# StackOverflow 问答 12092000-12092999

# browser - 您可以在 mailto: body 参数中放入多少数据是否有绝对限制？

> ID：12092003
> 
> 赞同：7
> 
> 时间：2012-08-23T12:50:49.207
> 
> 标签：browser, mailto, limits

鉴于我正在创建一个 mailto: 超链接。您可以在 mailto: body 参数中放入多少数据是否有绝对限制？

这个浏览器依赖吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:45:32.143

我相信这是对 mailto URI 的限制。我相信这个限制取决于浏览器。

查看这个问题和答案：[绕过 mailto/href/url 字符限制](https://stackoverflow.com/questions/4067391/getting-around-mailto-href-url-character-limit)

就像他们在那个答案中建议的那样，我建议对数据进行某种服务器端处理，最有可能在 POST 上通过 GET 进行。

同样从那个问题，这个链接（[http://support.microsoft.com/kb/q208427](http://support.microsoft.com/kb/q208427)）被提出并告诉IE在一个URL中有2083个字符的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T12:52:28.627

我认为在某个规范中定义的 URI 中最多有 8000 个字符

比你需要的更多:)

# c# - 是否可以创建一个以句点结尾的 Uri？

> ID：12092010
> 
> 赞同：1
> 
> 时间：2012-08-23T12:51:18.683
> 
> 标签：c#, uri

我目前正在创建一个网络爬虫，但遇到了一些障碍。由于网站文件管理不善，部分用户上传的文件以句号结尾：

```
//The file should have been 123.jpg,
// but the uploader/website did something incorrectly.
string path = "www.example.com/files/123."; 
```

使用 a`WebClient`或 an`HttpWebRequest`时，您传递请求的位置，该位置最终会变成`Uri`. 创建时会出现问题`Uri`，因为它会自动更正字符串可能存在的任何“错误”。这将删除我请求中的尾随句点并将其转换为`www.example.com/files/123`

我确实浏览了 SO 并遇到了[这个问题](https://stackoverflow.com/questions/1716667/webclient-problem-with-url-which-ends-with-a-period)`TcpClient`，但是对必须使用 a作为解决方法并不完全满意。有什么方法可以调整 Uri 的创建以包含尾随期，还是我坚持使用`TcpClient`?

# google-app-engine - 将源和目标之间的所有位置存储在表（数据库）中

> ID：12092011
> 
> 赞同：0
> 
> 时间：2012-08-23T12:51:21.973
> 
> 标签：google-app-engine, google-maps-api-3

我想从谷歌地图解析源和目的地之间的所有位置，如下所示：Google Maps API v3 Directions Example

```
 <script type="text/javascript"> 

 var directionsService = new google.maps.DirectionsService();
 var directionsDisplay = new google.maps.DirectionsRenderer();

 var map = new google.maps.Map(document.getElementById('map'), {
   zoom:7,
   mapTypeId: google.maps.MapTypeId.ROADMAP
 });

 directionsDisplay.setMap(map);
 directionsDisplay.setPanel(document.getElementById('panel'));

 var request = {
   origin: 'Kolkata', 
   destination: 'Patna',
   travelMode: google.maps.DirectionsTravelMode.DRIVING
 };

//echo 'directionsService.route()';

 directionsService.route(request, function(response, status) {
   if (status == google.maps.DirectionsStatus.OK) {
     directionsDisplay.setDirections(response);
   }
 });
</script> 
</body> 
</html> 
```

我想要类似[http://maps.googleapis.com/maps/api/directions/xml?origin=%22+kolkata+%22&destination=%22+patna+%22&sensor=false](http://maps.googleapis.com/maps/api/directions/xml?origin=%22%20kolkata%20%22&destination=%22%20patna%20%22&sensor=false)

这样我就可以解析位置并将其存储在数据库中的表中。请帮助找到一种方法来做到这一点。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:57:06.143

我假设您需要（以您使用的任何语言）将 XML 放入数组或数据表（或等效项）中，然后将这些逐行插入数据库中。

PHP： http: [//gaarf.info/2009/08/13/xml-string-to-php-array/](http://gaarf.info/2009/08/13/xml-string-to-php-array/)

VB.NET：http://msdn.microsoft.com/en-us/library/ekw4dh3f(v=vs.71).aspx [_](http://msdn.microsoft.com/en-us/library/ekw4dh3f(v=vs.71).aspx)

# java - eclipse中基于java配置的spring项目的bean依赖关系图

> ID：12092014
> 
> 赞同：2
> 
> 时间：2012-08-23T12:51:34.810
> 
> 标签：java, spring, spring-ide

我在 Eclipse 中使用 STS/GGTS 3.0.0，我的 spring 项目是基于 java 和基于 xml 的 spring 配置的混合。

我想看看spring bean的一些依赖关系图，我不知道该怎么做。

有任何想法吗？

亲切的问候

# apache - AWS 和 Node.js，我需要 nginx 还是 apache？

> ID：12092016
> 
> 赞同：4
> 
> 时间：2012-08-23T12:51:48.540
> 
> 标签：apache, node.js, nginx, amazon-web-services

我确实在 serverfault 上发布了这个，但没有得到任何意见或回复。

我在这里阅读了很多关于在使用 Node.js 时是否需要网络服务器的帖子，而提供静态文件的答案似乎总是是肯定的。

我的问题是这个。如果我正在处理的网站大部分是动态的，我不能只使用 Node.js 作为服务器和动态部分，然后将所有静态文件（css、js、图像等）放在 CloudFront 上为它们提供服务向上？这样我就不必担心缓存（通过清漆或redis或你有什么），或者运行像nginx这样的http服务器并通过代理来访问Node.js（我读过这会导致socket.io出现问题） ）。

在类似的主题中，亚马逊的 ELB 是否足以作为负载均衡器，或者如果站点足够大以至于需要进行负载均衡，我是否需要做其他事情？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T17:21:36.807

我无法明确谈论 node.js 架构决策，但我可以解决您的 CloudFront 和 ELB 问题。

CloudFront 是一个很棒的静态资产 CDN，但也有一些问题。俗话说[“计算机科学只有两个难题：缓存失效和命名事物”。](http://news.ycombinator.com/item?id=825997)如果你想用同名但更新的资产替换你的静态资产，你必须开始使用[缓存控制标题，](http://aws.amazon.com/about-aws/whats-new/2012/03/19/amazon-cloudfront-lowers-minimum-expiration-period/)它决定了任何给定的 CF 节点缓存资产的时间。如果将其设置得太低，则在 CF 中进行缓存几乎没有优势。这太痛苦了，我强烈建议您对资产进行版本控制并设置您的应用程序，以便同时部署资产和更新资产引用。目前，无法通过 API 调用或其他方法手动使 CF 中的对象缓存过期。

至于 ELB 扩展：是的。使用它们。Netflix 可以，如果可以的话，你也可以。使用 ELB 的关键是了解它们在应用程序流量中的作用：您希望它们具有高可用性，这意味着在多个可用区域中维护一组 Web 服务器，并确保 ELB 已正确配置以命中它们。事实上，Netflix 最近[开源](https://github.com/Netflix/asgard)了他们的[云管理应用程序](http://techblog.netflix.com/2012/06/asgard-web-based-cloud-management-and.html)“Asgard”。我建议检查一下。链接的博客文章对 ELB 的使用进行了很好的解释，而 Asgard 看起来像是一种管理云部署且停机时间为零的不错方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T17:36:32.433

如果您使用 Express 等 Node.js 框架，您可以轻松指定静态文件的位置，从而允许您使用 CDN。您可以简单地使用[express cdn 之类的东西。](https://github.com/niftylettuce/express-cdn). 如果您需要负载平衡，有几种方法可以处理它，但 EBS 很可能就足够了。

# shopify - 如何显示单件商品已售出多少件？

> ID：12092022
> 
> 赞同：0
> 
> 时间：2012-08-23T12:52:13.680
> 
> 标签：shopify

在项目的产品页面上，如何？

我知道您可以显示有多少库存，但我如何显示已售出多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:08:46.117

单程。在应用程序中记录您的所有订单。解析产品订单并更新应用程序中的计数器。渲染产品时，使用对 App 的回调来获取当前已售出的数量。另一种方法是，将元字段资源附加到每个带有计数的产品。然后，应用程序可以更新每次销售的计数，您只需使用 Liquid 呈现当前计数。

# mysql - 我怎么做这个 sql 技巧

> ID：12092029
> 
> 赞同：2
> 
> 时间：2012-08-23T12:52:28.043
> 
> 标签：mysql, sql, database, phpmyadmin

我在数据库中有一个用于类别和子类别的表。它的内部结构是：

```
id int not null primary 
name text
subcatfrom int 
```

它包含一些类别及其子类别的行。我希望“SELECT” sql 命令为每个根类别获取类别并在其后对它们的子类别进行分组，例如：

```
-cat1
--subcat1
--subcat2
-cat2
--subcat1
--subcat2 
```

可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:18:14.443

我的假设是- 1.您只有一个级别的父子关系。即子类别不能有进一步的子类别2。对于顶级类别，subcatfrom的值为0

```
SELECT * FROM 
(
SELECT NAME AS parent_category_name, '' AS child_category_name FROM categories WHERE subcatfrom = 0
UNION
SELECT b.NAME AS parent_category_name, a.NAME AS child_category_name FROM categories a JOIN     categories b ON a.subcatfrom = b.id
) a ORDER BY a.parent_category_name, a.child_category_name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:06:29.453

这很容易，但是有了这种结构

```
Table: category_id , name , parent_id 
```

样本数据

```
category_id    name   parent_id
   1           A        0
   2           B        0
   3           C        1
   4           D        1 
```

这意味着 A 是一个有 2 个子类别 C 和 D 的类别。而 parent_id 0 表示它是一个父类别现在 sql 是

```
SELECT lc.category_id,
       lc.name,
       rc.subcategories
FROM categories
LEFT JOIN (
    SELECT  
        subcategory_id , 
        GROUP_CONCAT(name) AS subcategories  
    FROM categories)  AS rc 
ON lc.category_id = rc.parent_id 
```

这将为您提供以下结果

```
category_id    name      subcategories
   1           A          C,D
   2           B          (null) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T13:14:47.087

原始问题希望将子类别放在单独的行上。这是一种方法：

```
select name
from ((select category as name, 1 as iscat, category as sortorder
       from t
      ) union all
      (select tsub.category as name 0 as iscat, t.category as sortorder
       from t join
            tsub on
            on t.subcategory_id = s.category_id
      )
     ) a
where not exists (select 1 from category c where c.subcategory_id = a.sortorder limit 1) 
order by sortorder, iscat desc, name 
```

这是在做什么？内部联合全部是汇集所有类别和子类别。它在表格中分配您想要的内容以及用于排序的信息。整体排序是按“父”类别名称。

where 子句将这些数据限制为不属于其他任何子类别的类别——顶级类别。

# c# - 鼠标右键选择单元格

> ID：12092030
> 
> 赞同：2
> 
> 时间：2012-08-23T12:52:31.570
> 
> 标签：c#, .net, wpf, telerik, radgridview

如何通过鼠标右键单击 RadGridView 中的单元格？

以下代码不起作用：

```
private void RadGridView_PreviewMouseDown(object sender, MouseButtonEventArgs e)
{
    // ... getting grid and cell
    if (e.RightButton == MouseButtonState.Pressed)
    {
        grid.UnselectAll();
        grid.CurrentCellInfo = new GridViewCellInfo(cell);
        cell.IsCurrent = true;
        cell.IsSelected = true;
    }
} 
```

这很奇怪，但选择行工作正常：

```
if (e.RightButton == MouseButtonState.Pressed)
{
    grid.UnselectAll();
    row.IsSelected = true;
    row.IsCurrent = true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:30:52.490

```
if (e.RightButton == MouseButtonState.Pressed)
{
    grid.Focus();
    grid.UnselectAll();
    grid.CurrentCellInfo = new GridViewCellInfo(cell);
    grid.SelectedCells.Add(grid.CurrentCellInfo);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:03:57.127

你试过 grid.SelectionMode = Telerik.WinControls.UI.GridViewSelectionMode.CellSelect 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:07:46.133

使用 OriginalSource 获取被点击的单元格（记住它也可以为空）并设置 IsSelected 值。

# php - 从具有特定单词的网站获取字符串

> ID：12092035
> 
> 赞同：2
> 
> 时间：2012-08-23T12:52:46.730
> 
> 标签：php, regex, string, list, preg-match

网站 www.example.com 中有许多列表。那是，

```
 <ol>
    <li>This is a list saying about asp</li>
    <li>This is a list  saying about javascript</li>
    <li>This is a list saying about php</li>
    <li>This is a list saying about .net</li>
    </ol> 
```

我需要使用 php 获取带有单词“ **php** ”的列表。
那就是输出应该是“**这是一个关于php的列表**”

我怎么能用 preg_match 做到这一点？？？

我使用 CURL 类来获取 HTML 内容。这是我使用的代码

```
$site = $curl->get("http://www.example.com/outputs.html");
$pattern = 'I NEED TO GET THIS PATTERN';
preg_match($pattern, $site, $matches);
$php_out = $matches[1];
echo $php_out; 
```

当我使用时，

```
$pattern = '/<li>(.*?)<\/li>/s'; 
```

它返回第一个结果
，即“**这是一个关于 asp 的列表**”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:19:25.840

最简单的解决方案是删除`/s`修饰符。然后每个匹配将限制为一行，因为`.`无法匹配换行符。

但这仅适用于 HTML 的格式与您的示例相同，每个元素位于单独的行且元素内容中没有换行符。这是一个更强大的解决方案：

```
$pattern = '~<li>[^<]*php[^<]*</li>~' 
```

但请注意，有很多事情会导致正则表达式失败，即使是在完全有效的 HTML 中也是如此。除非这是一次性的一次性工作，否则您应该认真考虑使用其他响应者建议的 HTML 特定工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:59:16.023

You need a website crawler and a parser. There is a project called [PHPCrawl](http://phpcrawl.cuab.de/example.html) with this lib you can crawl the site and get the content. Then you can parse and search in the source code for the specified pattern. If you want you can do it with a regex.

But i think you are not the first here on Stackoverflow with this problem. Perhaps you should search here and you'll get some more information.

# regex - 旧类型评论的正则表达式

> ID：12092038
> 
> 赞同：0
> 
> 时间：2012-08-23T12:52:59.627
> 
> 标签：regex, sed, grep

我有这样的评论（几个例子）：

1.  ```
    //========================================================================
    // some text some text some text some text some text some text some text 
    ```

2.  ```
    //========================================================================
    // some text some text some text some text some text some text some text some text
    // some text some text
    // (..) 
    ```

我想用这种风格的评论替换它：

```
/*****************************************************************************\

Description:

    some text some text
    some text some text some text

\*****************************************************************************/ 
```

所以我需要正则表达式。我设法制作了这个正则表达式：

```
//=+\r//(.+)+ 
```

它匹配组中的注释，但只有一行（示例 1）。如何使它与多行注释一起工作（如示例 2）？

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:23:50.573

使用 sed：

```
sed -n '
  \_^//==*_!p;
  \_^//==*_{
    s_//_/*_; s_=_\*_g; s_\*$_\*\\_;
    h; p; i\
Desctiption:
    : l; n; \_//[^=]_{s_//_\t_;p;};t l;
    x;s_^/_\\_;s_\\$_/_;p;x;p;
  }
  ' input_file 
```

评论版本：

```
sed -n '
  # just print non comment lines
  \_^//==*_!p;
  # for old-style block comments:
  \_^//==*_{
    # generate header line
    s_//_/*_; s_=_\*_g; s_\*$_\*\\_;
    # remember header, add description
    h; p; i\
Desctiption:
    # while comment continues, replace // with tab
    : l; n; \_//[^=]_{s_//_\t_;p;};t l;
    # modify the header as footer and print
    x;s_^/_\\_;s_\\$_/_;p
    # also print the non-comment line
    x;p;
  }
  ' input_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:05:14.930

这个正则表达式匹配整个评论

```
(\/\/=+)(\s*\/\/ .+?$)+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:10:28.623

一个简短的 perl 脚本，应该可以满足您的需要，在评论中进行了解释：

```
#!/usr/bin/perl -p

$ast = '*' x 75;                  # Number of asterisks.
if (m{//=+}) {                    # Beginning of a comment.
    $inside = 1;
    s{.*}{/$ast\\\nDescription:};
    next;
}
if ($inside) {
    unless (m{^//}) {             # End of a comment.
        undef $inside;
        print '\\', $ast, "/\n" ;
    }
    s{^//}{};                     # Remove the comment sign for internal lines.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T13:45:33.477

如果仍然需要正则表达式，不知道是否有更好的解决方案，这就是我想出的：

```
(?<=\/{2}\s)[\w()\.\s]+ 
```

应该得到所有感兴趣的文本。

# c# - C# 多选列表框选定项文本

> ID：12092044
> 
> 赞同：2
> 
> 时间：2012-08-23T12:53:18.563
> 
> 标签：c#, winforms, visual-studio-2010, listbox-control

我有一个列表框，我想遍历所有选定的项目并获取每个选定项目的文本值。

```
for (int i = 0; i < lstFieldNames.selectedItems.Count; i++)
{
string s = lstFieldNames.SelectedItems[i].ToString();
} 
```

s 的值为“{ Item = ADDR }”

我不需要 { Item = }，我只需要文本“ADDR”。

我做错了什么，我尝试了一些东西，但似乎没有任何东西对我有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:22:15.223

嗯，这是一个`Winforms`问题，因为`ASP.NET`ListBox 没有`SelectedItems`属性（注意复数）。这很重要，因为 Winforms`ListBox`没有像 ASP.NET 中那样的`ListItems`with`Text`和`Value`属性，而只是一个`Object`.

您还评论说 的数据源`ListBox`是匿名类型。以后不能将其强制转换为强类型对象。

所以我的建议是创建一个具有您想要的属性的类：

```
class ListItem {
    public String Item { get; set; }
} 
```

创建它的实例而不是使用匿名类型：

```
var items = (from i in xDoc.Descendants("ITEM") 
             orderby i.Value 
             select new ListItem(){ Item = i.Element("FIELDNAME").Value })
            .ToList(); 
```

现在这有效：

```
foreach (ListItem i in lstFieldNames.SelectedItems)
{
    String item = i.Item;   
} 
```

[请注意，我的`ListItem`课程不是`ASP.NET` [`ListItem`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitem.aspx).]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:55:33.697

```
string s = lstFieldNames.SelectedItems[i].Text.ToString(); 
```

注意`Text`属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:27:00.180

使用此代码：

```
 string s = "";

  foreach(var item in lstFieldNames.SelectedItems) 
  {
     s += item.ToString() + ",";
  }

  textBox1.Text = s; 
```

如果需要从您的列表框中选择一项，请尝试此鳕鱼：

```
 string s = "";

  foreach(var item in lstFieldNames.SelectedItems) 
  {
     s = item.ToString();
  } 
```

编辑 ：

试试这个代码

```
 private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        string s = "";

        foreach (var item in listBox1.SelectedItems)
        {
            s += item.ToString() + ",";
        }

        textBox1.Text = s;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T13:13:17.470

这将**只获取 Selected 值**。

**编辑：**

```
foreach (object listItem in listBox1.SelectedItems)
{
    string s = listItem.ToString();
} 
```

# java - 检查对象是否已更改（保持良好的类设计）

> ID：12092052
> 
> 赞同：1
> 
> 时间：2012-08-23T12:53:58.010
> 
> 标签：java, object-oriented-analysis

我有称为“层次结构”的对象，基本上只是一个字符串列表，例如。[1 2 3 4]。我还有一个名为 FormattedHierarchies 的对象，它应该始终以用户希望它们表示的方式保持层次结构的格式化版本，例如 (1-4) 或 {1,2,3,4}。

我的问题是这样的：

我想在层次结构发生更改时立即更新 FormattedHierarchy（例如，如果层次结构从 [1 2 3 4] 更改为 [1 2 3]，则 FormattedHierarchy 应从 (1-4) 更改为 (1-3)）。

谷歌搜索出现了[http://docs.oracle.com/javase/tutorial/uiswing/events/changelistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/changelistener.html) 但我的问题是：如果我想让 Hierarchy 实现 ChangeListener，它必须实现方法“stateChanged” .

> 类型 Hierarchy 必须实现继承的抽象方法 ChangeListener.stateChanged(ChangeEvent)

让 Hierarchy 创建一个新的 FormattedHierarchy 是不可行的，我也认为这不是好的类设计。这是因为层次结构随后将实现处理其格式的东西（尽管是以间接方式）。

这个问题有没有标准或聪明的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:45:44.507

我会尽量避免需要让两个对象完全同步。我可以建议你三种方式：

1.  Have whoever is calling the `Hierarchy` setter call also a `refresh()` method on `FormattedHierarchy`. This is easy if you call the setter from one or really few places.
2.  Recalculate the String representation of `Hierarchy` only on demand, without storing it. You need to store the format, not the actual formatted result.
3.  Have `Hierarchy` maintain a *version count*, which is incremented every time you change it. `FormattedHierarchy` holds the formatted string, and the last version count it has seen. When you ask `FormattedHierarchy` for the string, it first checks if the version count has changed, triggering a recalc of the formatted string if case it did.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:01:52.930

您不能简单地将`Hierarchy`类与合并`FormattedHierarchy`，如果需要，为您的不同消费者使用两个不同的接口吗？

通过这种方式，您只需要在您的类中创建特定的设置器，这些设置器将修改字符串`[1 2 3 4]`以及`(1-4)`设置`[1 2 3]`完成`(1-3)`时的设置。

# java - Java3D 在小程序中绘制空白窗口

> ID：12092053
> 
> 赞同：2
> 
> 时间：2012-08-23T12:54:01.823
> 
> 标签：java, applet, java-3d

我正在学习 java3D 1.5.2 并且已经完成了一些 ColorCube 测试。我完成的最后一个 java3D 小程序是大约 2000 个 ColorCube 旋转，在它们自身和整个宇宙中平移。立方体被生成为变换分支组的叶节点数组

图片： ![在此处输入图像描述](../Images/3e5562b8eadb847a1638316c145fafc3.png)

我的问题是：有时它显示得很好，没有任何问题，但有时窗口是白色的，在我调整窗口大小或使其全屏之前什么都没有显示。

**问题：**你能给我一些关于这个问题的提示吗？我没有使用任何 repaint() 或类似的方法。Java3D 线程正在绘制我假设的全部内容。我怎样才能克服这个绘图更新问题？

这是一个简短的伪代码：

```
class myclass extends Applet
{
    public void init()
        {
           //some init here
        }

    public void start()
        {
           //i make my thread start here
           mythread.start();
        }

    public void stop()
        {
           //...i make my thread pause here
        }

    public void destroy()
        {
           // Here i release the thread
        }

    public void paint()
        {
           //nothing here. its empty
        }

    public class my_thread extends Thread
        {
            public void run()
                 {
                        //here i use the java3D to initialize java3D things
                        while(working)
                           {
                               // here i change 2000 colorcubes' displacement and rotation
                           }
                 }
        } 
} 
```

这是我提到的 java3D 的一些初始化：

```
 GraphicsConfiguration GC_me=SimpleUniverse.getPreferredConfiguration();
            Canvas3D Canvas_me=new Canvas3D(GC_me);
            SimpleUniverse Space_me = new SimpleUniverse(Canvas_me); 
```

谢谢。

这是一个完整的代码：

```
package fiziksel_model;

import java.awt.*;
import java.applet.*;

import javax.media.j3d.*;
import javax.vecmath.*;

import com.sun.j3d.utils.*;
import com.sun.j3d.utils.geometry.ColorCube;
import com.sun.j3d.utils.universe.SimpleUniverse;

public class yabanci extends Applet{

/**
* Version 1
*/

private static final long serialVersionUID = 1L;

public drawer_thread palette=new drawer_thread();
int i;
public void init()
{
   System.out.println(" started! ");

}
//Geometry geom;
public void start()
{
   System.out.println(" continuing...");

   palette.start();

}
public void stop()
{
   System.out.println(" stopped! ");

}
public void destroy()
{
   System.out.println(" destroyed!");

}
public void paint(Graphics g)
{

           System.out.println(" painted! ");// does not print anything.
}

public class drawer_thread extends Thread
{

   public void run()
   {
       Vector3f temp_vect=new Vector3f();
       ColorCube color_box=new ColorCube(0.2f);

       GraphicsConfiguration GC_me=SimpleUniverse.getPreferredConfiguration();
       Canvas3D Canvas_me=new Canvas3D(GC_me);
       SimpleUniverse my_space = new SimpleUniverse(Canvas_me);

       BranchGroup cube_barrage = new BranchGroup();
       Transform3D rotator_element=new Transform3D();
       Transform3D temp_rotator=new Transform3D();

       cube_barrage.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
       cube_barrage.setCapability(TransformGroup.ALLOW_TRANSFORM_READ);
       cube_barrage.setCapability(TransformGroup.ALLOW_CHILDREN_READ);
       cube_barrage.setCapability(TransformGroup.ALLOW_CHILDREN_WRITE);
       setLayout(new BorderLayout());

       TransformGroup rotator1=new TransformGroup(rotator_element);
       TransformGroup rotator2=new TransformGroup(rotator_element);
       TransformGroup rotator3=new TransformGroup(rotator_element);
       TransformGroup rotator4=new TransformGroup(rotator_element);

       Vector3f translation[]=new Vector3f[4000];
       TransformGroup core1[]=new TransformGroup[4000];
       TransformGroup core2[]=new TransformGroup[4000];
       TransformGroup core3[]=new TransformGroup[4000];
       Transform3D core_move1[]=new Transform3D[4000];
       Transform3D core_move2[]=new Transform3D[4000];
       Transform3D core_move3[]=new Transform3D[4000];
       for(int j=0;j<4000;j++)
       {
       translation[j]=new Vector3f();
       core1[j]=new TransformGroup();core2[j]=new TransformGroup();
       core_move1[j]=new Transform3D();
       core_move2[j]=new Transform3D();    
       core_move3[j]=new Transform3D();
       }

       for(int j=0;j<4000;j++)
       {
       translation[j]=new Vector3f();
       translation[j].x=(float) (j/10.0);
       translation[j].y=(float)(-0.5+Math.random()*1.0);
       translation[j].z=(float)(-0.5+Math.random()*1.0);

       core_move1[j].setTranslation(translation[j]);
       core_move2[j].setTranslation(translation[j]);
       core_move3[j].setTranslation(translation[j]);

       core1[j]=new TransformGroup(core_move1[j]);
       core2[j]=new TransformGroup(core_move1[j]);
       core3[j]=new TransformGroup(core_move1[j]);
       core1[j].setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
       core1[j].setCapability(TransformGroup.ALLOW_TRANSFORM_READ);
       core2[j].setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
       core2[j].setCapability(TransformGroup.ALLOW_TRANSFORM_READ);

       core3[j].setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
       core3[j].setCapability(TransformGroup.ALLOW_TRANSFORM_READ);
       }

       rotator1.addChild(rotator2);
       rotator2.addChild(rotator3);rotator3.addChild(rotator4);
       rotator1.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
       rotator1.setCapability(TransformGroup.ALLOW_TRANSFORM_READ);
       rotator2.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
       rotator2.setCapability(TransformGroup.ALLOW_TRANSFORM_READ);
       rotator3.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
       rotator3.setCapability(TransformGroup.ALLOW_TRANSFORM_READ);
       rotator4.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
       rotator4.setCapability(TransformGroup.ALLOW_TRANSFORM_READ);

       for(int j=0;j<4000;j++)
       {
            rotator4.addChild(core1[j]);
            core1[j].addChild(core2[j]);
            core2[j].addChild(core3[j]);
            core3[j].addChild(new ColorCube(0.1));
       }

       cube_barrage.addChild(rotator1);

       cube_barrage.compile();
       my_space.addBranchGraph(cube_barrage);
       add("Center", Canvas_me);
       //Canvas_me.validate();

       my_space.getViewingPlatform().setNominalViewingTransform();
       float ran[]=new float [4000];
       float ran2[]=new float [4000];
       Vector3f temp_vector=new Vector3f();
       for(int j=0;j<4000;j++)
       {
           ran[j]=(float) Math.random();
           ran2[j]=(float) Math.random();
       }

       for(i=0;i<10000;i++)
       {

           rotator1.getTransform(temp_rotator);
           temp_rotator.setScale(0.1+0.05*Math.abs(Math.sin(i*0.03)));
           rotator1.setTransform(temp_rotator);

           rotator2.getTransform(temp_rotator);
           temp_rotator.rotX(i*0.03);
           rotator2.setTransform(temp_rotator);

           rotator3.getTransform(temp_rotator);
           temp_rotator.rotY(i*0.03);
           rotator3.setTransform(temp_rotator);

           rotator4.getTransform(temp_rotator);
           temp_rotator.rotZ(i*0.03);
           rotator4.setTransform(temp_rotator);

           for(int j=0;j<4000;j++)
           {
               core1[j].getTransform(temp_rotator);
               temp_rotator.get(temp_vector);
               temp_vector.x+=(float) (-0.5+Math.random())*0.02;
               temp_vector.y+=(float) (-0.5+Math.random())*0.02;
               temp_vector.z+=(float) (-0.5+Math.random())*0.02;

               temp_rotator.setTranslation(temp_vector);
               core1[j].setTransform(temp_rotator);

               core2[j].getTransform(temp_rotator);

               temp_rotator.rotZ(i*0.03+0.01*ran[j]*i);

               core2[j].setTransform(temp_rotator);

               core2[j].getTransform(temp_rotator);
               temp_rotator.rotY(i*0.02+0.01*ran2[j]*i);
               core2[j].setTransform(temp_rotator);
           }

           System.out.println(i);
           try {
               sleep(40);
           } catch (InterruptedException e) {
               // TODO Auto-generated catch block
               e.printStackTrace();
           }
       }
   }}} 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T16:34:08.777

第二次尝试：将以下代码行从您的线程移动到小程序的 init 方法中，以确保它们在事件分派线程 (EDT) 中运行。

```
private SimpleUniverse my_space = null;
public void init()
{
   System.out.println(" started! ");
   GraphicsConfiguration GC_me = SimpleUniverse.getPreferredConfiguration();
   Canvas3D Canvas_me = new Canvas3D(GC_me);
   my_space = new SimpleUniverse(Canvas_me);
   setLayout(new BorderLayout());
   add("Center", Canvas_me);
} 
```

请保存你的 200 声望，因为我没有注册。我什么时候注册我不知道。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T07:24:30.810

试一试：在您的小程序启动代码中将系统属性“sun.awt.noerasebackground”和“sun.awt.erasebackgroundonresize”设置为 true。

# java - 了解正则表达式

> ID：12092054
> 
> 赞同：-6
> 
> 时间：2012-08-23T12:54:02.620
> 
> 标签：java, regex

嗨，我知道该字符`*`用于匹配前面的字符零次或多次，这是问题，这里的零次是什么意思。示例：`script[\s]*`如果是这种情况，它是如何工作的，它会单独阻止脚本还是会阻止脚本后跟空格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:56:40.223

、和修饰符应用于紧接在它们之前的表达式，因此在这种情况下，星号仅`*`应用于。如果您想将其应用于，您可以在整个表达式周围加上括号：。如果您想阻止创建捕获组，请使用，如下所示：`+``?``[\s]``script[\s]``(script[\s])*``(?:)`

```
(?:script[\s])* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:58:41.493

在 Regexr.com 上查看它[的实际应用。](http://regexr.com?31u0g)

一些注意事项：

*   您不需要`\s`包装`[]`：`script\s*`
*   `\s`表示任何空格。
*   我建议阅读[regular-expressions.info](http://www.regexbuddy.com/)并尝试[RegexBuddy](http://www.regular-expressions.info/)。（或至少[Regexr](http://Regexr.com)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:58:45.937

方括号表示一个字符类，`\s`表示“空格字符”（即`，`\t`等）。所以这里`*`将应用于`[\s]`表达式，整个正则表达式的意思是“匹配`script`后跟零个或多个空格字符”。`

 `* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T13:01:36.847

您展示的正则表达式的工作方式如下：

1) 从字面上匹配字符“脚本”

2) 匹配“空白字符”的单个字符（空格、换行符等）

2.1) 尽可能多的次数

所以它将匹配单个'script'以及'script_ ***_*** '（任意数量的空格）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T14:54:43.830

> 这里的零时间是什么意思？

和其他地方的意思一样。

例如，“我戳了你零次”意味着我根本没有戳你。

或者“我戳了你零次或多次”意味着我没有戳你，或者我戳了你一次，两次或......

> 示例： script[\s]* 如果是这种情况，它是如何工作的，它会单独阻止脚本还是阻止脚本后跟空白。

正则表达式将*匹配* `"script"`or `"script "`or`"script "`等​​等。`

# java - Google Drive API - 添加和更新权限

> ID：12092056
> 
> 赞同：2
> 
> 时间：2012-08-23T12:54:05.393
> 
> 标签：java, android, file-permissions, google-drive-api

我正在我的 android 应用程序中的 Google Drive 上进行文件共享。这是场景... 用户 A 与用户 B 共享文件，给他/她“作者”角色。后来，健忘的用户 A 再次与用户 B 共享同一个文件，这一次让他/她成为“读者”角色。我的问题是，这会覆盖第一个权限吗？还是应用程序应该处理现有文件权限的检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:26:18.133

您可以使用[`drive.permissions.update`](https://developers.google.com/drive/v2/reference/permissions/update)更新`role`a 的属性`permission`，前提是您拥有`fileId`和`permissionId`。该`role`属性将被覆盖。但是，如果您注意到，有一个`additionalRoles[]`属性允许您将辅助角色添加到授予用户的权限。目前，只`commenter`允许。也许将来，该属性中会添加更多角色。

您可以使用[Google API Explorer 自行](https://developers.google.com/apis-explorer/#p/drive/v2/)确认：

1.  首先，发送`drive.files.list`请求以获取`fileId`共享文件。
2.  发送`drive.permissions.list`带有用户`fileId`获取 `permissionId`的请求（它`id`在响应中）。
3.  使用`fileId`and `permissionId`，现在您可以 通过在正文中发送带有属性`drive.permissions.update`的请求来更改该用户的角色。`role`

# entity-framework - EF 5.0 Code First 双向导航，子项中没有外键 ID

> ID：12092061
> 
> 赞同：3
> 
> 时间：2012-08-23T12:54:18.267
> 
> 标签：entity-framework, ef-code-first

我有以下课程

```
public class Employer
{
    [Key]
    public Int64 EmployerID { get; set; }
    public String CompanyName { get; set; }
    public virtual List<Employee> Employees { get; set; }
}

public class Employee
{
    [Key]
    public Int64 EmployeeID { get; set; }
    public String EmployeeName { get; set; }
    public virtual Employer EmployerInfo { get; set; }
} 
```

在数据库上下文中，我将关系设置为

```
modelBuilder.Entity<Employer>()
.HasMany(p => p.Employees)
.WithRequired()
.Map(x => x.MapKey("EmployerID")); 
```

`EmployerID`执行一些操作后，使用具有外键和一个额外键的 Employee 表创建数据库`EmployerInfo_EmployerID`。

现在，当我获取雇主数据时，我正在获取员工详细信息。但是当我试图获取员工数据时，我将 EmployerInfo 设为空。这是因为我需要从 Employee 到 EmployerInfo 的关系。

在这种情况下如何设置双向关系？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T12:59:42.320

You need to update your fluent so your relationship mapping contains both ends:

```
 modelBuilder.Entity<Employer>()
        .HasMany(p => p.Employees)
        .WithRequired(e => e.EmployerInfo)
        .Map(x => x.MapKey("EmployerID")); 
```

# android - 应用程序运行期间的 ICS 设备锁定

> ID：12092062
> 
> 赞同：1
> 
> 时间：2012-08-23T12:54:19.760
> 
> 标签：android, android-4.0-ice-cream-sandwich, lockscreen

当我的应用程序运行时，我的具有 ICS OS 4.0.4 的 Android 设备不会锁定应用程序的屏幕。当我在 OS < 4 的设备上使用该应用程序时，这很有效。ICS 设备的实现是否有任何变化？这会导致电池耗尽。

如果需要设置任何配置更改以锁定屏幕，请告诉我。

# android - 数据库删除后无法刷新 ListActivity

> ID：12092063
> 
> 赞同：0
> 
> 时间：2012-08-23T12:54:22.567
> 
> 标签：android, database, refresh, listactivity

`LongClick`我在 my 上设置了一个，`ListActivity`它调用一个`AlertDialogue`with 选项到`delete`or `cancel`，然后是另一个`AlertDialogue`用于确认删除。

但是，我需要刷新列表以显示更改，但看不到如何执行此操作（**注意**列表使用 a 填充`ResourceCursorAdapter`）：

```
public class InspectionActivity extends ListActivity {
private Button newInspection;
private static final int ACTIVITY_CREATE=0;

private RMDbAdapter rmDbHelper;
//private AlertDialog longClickOptionsDialog;
private AlertDialog clickOptionsDialog;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_inspection);
    setUpViews();
    setLongClick();

    rmDbHelper = new RMDbAdapter(this);
    rmDbHelper.open();

    // Get a Cursor for the list items
    Cursor listCursor = rmDbHelper.fetchAllInspections();
    startManagingCursor(listCursor);           

    // set the custom list adapter     
    setListAdapter(new MyListAdapter(this, listCursor));

}

private void setUpViews() {
    newInspection = (Button)findViewById(R.id.new_inspection);
    newInspection.setOnClickListener(new View.OnClickListener() {                       
        public void onClick(View v) {
            createInspection();
        }
    }); 

}

private void setLongClick() {
    ListView lv = getListView(); 
    lv.setOnItemLongClickListener(new OnItemLongClickListener() { 
        public boolean onItemLongClick(AdapterView<?> arg0, View arg1,int row, final long id) {
            Cursor cursor = (Cursor) rmDbHelper.fetchInspection(id);

            String inspectionRef = RMUtilities.notEmpty(cursor.getString(cursor.getColumnIndex( 
                    RMDbAdapter.INSPECTION_REF)), "Reference unknown"); 
            String companyName = RMUtilities.notEmpty(cursor.getString(cursor.getColumnIndex( 
                    RMDbAdapter.INSPECTION_COMPANY)), "company unknown"); 
            final String inspectionDialogueText = "(" + inspectionRef + ", " + companyName + ")"; 

            clickOptionsDialog = new AlertDialog.Builder(InspectionActivity.this)
            .setTitle(inspectionDialogueText)
            .setMessage(R.string.general_text_select_option)
            .setPositiveButton(R.string.general_button_delete, new AlertDialog.OnClickListener(){
                private AlertDialog confirmDeleteDialog;
                public void onClick(DialogInterface dialog, int which){
                    confirmDeleteDialog = new AlertDialog.Builder(InspectionActivity.this)
                    .setTitle(R.string.general_text_confirmation)
                    .setMessage(R.string.general_text_confirm_delete)
                    .setPositiveButton(R.string.general_button_yes, new AlertDialog.OnClickListener(){
                        public void onClick(DialogInterface dialog, int which){
                            rmDbHelper.deleteInspection(id);

**//REFRESH STATEMENT NEEDED HERE..**
                            }
                        })
                    .setNegativeButton(R.string.general_button_cancel, new AlertDialog.OnClickListener(){
                        public void onClick(DialogInterface dialog, int which){
                            confirmDeleteDialog.cancel();
                            }
                        })
                    .create();
                    confirmDeleteDialog.show();
                    }
                })                  
            .setNegativeButton(android.R.string.cancel, new AlertDialog.OnClickListener(){
                public void onClick(DialogInterface dialog, int which){
                    clickOptionsDialog.cancel();
                    }
                })
            .create();
            clickOptionsDialog.show();
            return true;
        } 
    });
}

// In your ListActivity class, create a new inner class that extends ResourceCursorAdapter. 
//This inner class is the custom CursorAdapter we will use to manage how data is bound to a list item:

private class MyListAdapter extends ResourceCursorAdapter { 

    public MyListAdapter(Context context, Cursor cursor) { 
        super(context, R.layout.inspection_row, cursor);
    } 

    @Override
    public void bindView(View view, Context context, Cursor cursor) { 
        TextView title = (TextView) view.findViewById(R.id.inspection_row_item_main_title);
        title.setText(cursor.getString(                            
                cursor.getColumnIndex(RMDbAdapter.INSPECTION_REF)));

        TextView description = (TextView) view.findViewById(R.id.inspection_row_item_description);        

        String companyName = RMUtilities.notEmpty(cursor.getString(cursor.getColumnIndex(
                        RMDbAdapter.INSPECTION_COMPANY)), "Company unknown");
        String inspectionDate = RMUtilities.notEmpty(cursor.getString(cursor.getColumnIndex(
                        RMDbAdapter.INSPECTION_DATE)), "date unknown");
        description.setText("(" + companyName + ", " + inspectionDate + ")");
    }
}

private void createInspection() {
    Intent i = new Intent(this, InspectionEdit.class);
    startActivityForResult(i, ACTIVITY_CREATE);
}

protected void onListItemClick(ListView l, View v, final int pos, final long id){

    Cursor cursor = (Cursor) rmDbHelper.fetchInspection(id);

    String inspectionRef = RMUtilities.notEmpty(cursor.getString(cursor.getColumnIndex( 
            RMDbAdapter.INSPECTION_REF)), "Reference unknown"); 
    String companyName = RMUtilities.notEmpty(cursor.getString(cursor.getColumnIndex( 
            RMDbAdapter.INSPECTION_COMPANY)), "company unknown"); 
    final String inspectionDialogueText = "(" + inspectionRef + ", " + companyName + ")"; 

    super.onListItemClick(l, v, pos, id);
    clickOptionsDialog = new AlertDialog.Builder(InspectionActivity.this)
    .setTitle(inspectionDialogueText)
    .setMessage(R.string.general_text_select_option)
    .setPositiveButton(R.string.general_button_open, new AlertDialog.OnClickListener(){
        public void onClick(DialogInterface dialog, int which) {
            Intent i = new Intent(InspectionActivity.this, AreaActivity.class);
            i.putExtra("intentID", id);
            startActivityForResult(i, ACTIVITY_CREATE);
            }
        })
    .setNeutralButton(R.string.general_button_edit, new AlertDialog.OnClickListener(){
        public void onClick(DialogInterface dialog, int which){
            Intent i = new Intent(InspectionActivity.this, InspectionEdit.class);
            i.putExtra("intentID", id);
            startActivityForResult(i, ACTIVITY_CREATE);
            }
        })

    .setNegativeButton(android.R.string.cancel, new AlertDialog.OnClickListener(){
        public void onClick(DialogInterface dialog, int which){
            clickOptionsDialog.cancel();
            }
        })
    .create();
    clickOptionsDialog.show();

} 
```

谢谢你的帮助。

亲切的问候，

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:59:10.380

尝试使用适配器的 notifyDataSetChanged()。

```
youradapter.notifyDataSetChanged() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:36:15.623

您需要重新拉动光标。您正在更改数据库，因此您需要更新您的光标，这将导致您的列表被更新。

根据您显示的代码，`listCursor.requery()`应该为您解决问题。

请注意，对于较新的 API，您应该使用 CursorLoaders 将数据活动移出 UI 线程。

# google-analytics - 谷歌分析点击事件跟踪触发两次

> ID：12092066
> 
> 赞同：2
> 
> 时间：2012-08-23T12:54:38.470
> 
> 标签：google-analytics, click

我有一个带有许多 .item div 的 Isotope #container div，可以通过单击其嵌套的 .header div 来最大化和最小化它们。当查看者直接单击另一个内容 div 而不最小化（单击标题）当前最大化的内容时，它们也会自动最小化。

因此，Google 分析事件跟踪有时会触发两次：当查看者没有直接单击另一个 .item div 的 .header div 时 - 而是决定先单击它来最小化当前最大化的一个，然后再单击另一个。

我应该如何修改逻辑，以便在我的分析中只注册一次点击事件？

```
$('.header').click(function () { // instead of registering the entire .item div (default use), only its .header div (child div) receives clicks

    var $previousSelected = $('.selected'); // necessary for maximising and minimising

    if ($(this).parent().hasClass('selected')) { // use $(this).parent() - not $(this) - because the .header div is a child of the .item div

        $(this).parent().removeClass('selected');
        $(this).parent().children('.maximised').hide();
        $(this).parent().children('.minimised').show();

        $items.find('.minimised').removeClass('overlay'); // returns all .minimised divs to previous state after the .item is closed again

    } else {

        $previousSelected.removeClass('selected');
        $previousSelected.children('.minimised').show();
        $previousSelected.children('.maximised').hide();

        $(this).parent().addClass('selected');
        $(this).parent().children('.minimised').hide();
        $(this).parent().children('.maximised').show();

        $items.not('.selected').find('.minimised').addClass('overlay'); // adds .overlay on each .item which is not currently .selected

    }

    $container.isotope('reLayout');

    <!-- ga project interest tracking -->

    var clicked = $(this).parent().data('item');
    _gaq.push(['_trackEvent', 'Items viewed', 'Clicked', clicked, null, true]);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:57:48.243

因此，如果我理解正确，您只想在某些东西最大化时触发 GA 跟踪：

```
$(this).parent().children('.maximised').show(function(){
    _gaq.push(['_trackEvent', 'Items viewed', 'Clicked', clicked, null, true]);
}); 
```

您也可以在`.click`函数的底部尝试：

```
if( $(this).parent().children('.maximised').is(':visible') ){
   _gaq.push(['_trackEvent', 'Items viewed', 'Clicked', clicked, null, true]); 
} 
```

# c++ - Doxygen 用调用图记录一个类中的所有函数？

> ID：12092068
> 
> 赞同：6
> 
> 时间：2012-08-23T12:54:52.013
> 
> 标签：c++, doxygen, function-calls

找出在 C++ 类中进行的所有调用的最佳方法是什么？我不仅想找到所有的调用，我还想找出根本没有被调用的函数，这样我就可以清理我的代码了。我听说 doxygen 在生成调用图时可以创造奇迹，但它似乎只是为我的构造函数生成调用图，并且当我需要更多其他函数时，它就像另一个函数一样。

我所有的班级功能都已记录在案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T13:17:26.033

我们在这里确实需要更多信息，例如，您是否记录了所有的类方法？您是否对默认的 doxygen 配置文件进行了任何更改？作为第一步尝试设置

```
CALL_GRAPH = YES
EXTRACT_ALL = YES 
EXTRACT_LOCAL_CLASSES = YES 
```

在[doxygen 配置文件](http://www.doxygen.nl/manual/config.html#cfg_collaboration_graph)中。

# javascript - 更多信息 - 展开 div

> ID：12092078
> 
> 赞同：-1
> 
> 时间：2012-08-23T12:55:40.327
> 
> 标签：javascript

我正在寻求 Javascript/HTML 中的“更多信息”脚本的帮助。

当前代码：

```
<div id="information">
    Content
    <div id="more_information" style="display:none;">
        More content
    </div>
<a href="#" onclick="showhide('more_information');">More information</a>​​​​​​​​
</div> 
```

Javascript：

```
function showhide(layer_ref) {

if (state == 'block') {
state = 'none';
}
else {
state = 'block';
}
if (document.all) { 
eval( "document.all." + layer_ref + ".style.display = state");
}
if (document.layers) {
document.layers[layer_ref].display = state;
}
if (document.getElementById &&!document.all) {
info = document.getElementById(layer_ref);
info.style.display = state;
}
}​ 
```

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:58:13.110

JS：

```
function showhide(layer_ref) {
  var el = document.getElementById(layer_ref);
  var visible = el.style.display == 'block' // current state
  el.style.display = visible ? 'none' : 'block';
  return !visible; // new state (true=visible,false=invisible)
} 
```

HTML：

```
<a href="#" onclick="if(showhide('more_information')){this.innerHTML='Less information'}else{this.innerHTML='More information'};return false;">More information</a>​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:59:39.533

I suggest using [jQuery](http://jquery.com), this makes it a lot easier:

```
jQuery("#information a").click(function(){
    jQuery(this).parent().find("#more_information").toggle();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:04:44.317

只有当您只有一个 id 为“more_information”的 DOM 元素时，它才会起作用：

```
function showhide(nodeId) {
   var node = document.getElementById(nodeId);
   if (node) {
       node.style.display = node.offsetWidth ? 'none' : 'block';
   }
}​ 
```

如果您在页面上几乎没有类似的结构，您应该使用这个：

**HTML：**

```
<div id="information">
    Content
    <div id="more_information" style="display:none;">
        More content
    </div>
    <a href="#" onclick="showhide(this); return false;">More information</a>​​​​​​​​
</div> 
```

**JS：**

```
function showhide(node) {
   var moreNode = node.previousSibling, i = 5;
   while (moreNode.nodeType != 1 && i--) {
      moreNode = moreNode.previousSibling;
   }

   if (moreNode && moreNode.nodeType == 1) {
       moreNode.style.display = moreNode.offsetWidth ? 'none' : 'block';
   }
}​ 
```

# opencv - 物体面积和物体最大长度

> ID：12092080
> 
> 赞同：1
> 
> 时间：2012-08-23T12:55:48.960
> 
> 标签：opencv, area

我是 open cv 的新用户。我想在图像中标记后计算对象的面积。然后我需要找到对象的最大长度。（线性度 = 最大长度/面积 * Pai/40）有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:52:53.850

首先，你是如何标记图像的？根据您的标签，您可能会发现一些描述该对象轮廓的点。因此，您可以使用此[功能](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html#contourarea)找到它的区域：

```
double contourArea(InputArray contour, bool oriented=false ) 
```

关于最大长度部分，您可以使用此[功能](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html#minarearect)：

```
RotatedRect minAreaRect(InputArray points) 
```

对象的最小区域边界矩形的长度将为您提供最大长度。

无论如何，对于这种类型的形状分析，您可以查看有关[结构分析和形状描述符](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html)的 OpenCV 文档，因为还有更多功能甚至可以为您提供更多帮助。

# oracle - 常规 Oracle ADO 提供程序和 Oracle Web ASP 提供程序有什么区别？

> ID：12092082
> 
> 赞同：0
> 
> 时间：2012-08-23T12:56:01.077
> 
> 标签：oracle, ado.net

我正在从 Microsoft 的 OracleConnection 类迁移到一个 asp.net-mvc 网站，因为它已被弃用。我在[oracle 网站](http://www.oracle.com/technetwork/database/windows/downloads/utilsoft-087491.html)上看到，有 2 个不同的选项，一个是用于 .Net 4 的 Oracle ADO 提供程序，另一个是用于 .Net 4 的 Oracle ADO ASP 提供程序。我试图找出差异，因为我使用的代码在我的站点中访问 Oracle 不是特定于 Web 的（它位于与主 MVC 项目不同的项目中，我也计划在桌面应用程序中使用这个库）。

有人可以解释这两个库之间的区别并建议我应该使用哪一个来解决我的情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:05:03.963

Oracle 网站可能有问题！:)

[ADO 提供程序](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html)是来自 .NET的Oracle 标准数据访问代码：

> Oracle Data Provider for .NET (ODP.NET) 优化了对 Oracle 数据库的 ADO.NET 数据访问。ODP.NET 允许开发人员利用高级 Oracle 数据库功能，包括
> 
> 真正的应用集群
> 
> XML 数据库

[您提到](http://www.oracle.com/technetwork/topics/dotnet/index-087367.html)的Oracle Providers for ASP.NET是一个特定版本，用于帮助处理 ASP.NET 状态管理、成员资格和角色等问题：

> ASP.NET 提供程序开发人员会发现，适用于 ASP.NET 的 Oracle 提供程序易于学习和使用，因为它们与现有的 ASP.NET 提供程序共享一个通用架构和 API。它们与现有的 ASP.NET 服务和控件无缝集成，就像其他 ASP.NET 提供程序一样。
> 
> Oracle 提供以下提供程序：
> 
> 会员提供者
> 
> 角色提供者
> 
> 站点地图提供者
> 
> 会话状态提供者...

# html - 如何同步循环遍历 indexedDB 表？

> ID：12092083
> 
> 赞同：4
> 
> 时间：2012-08-23T12:56:02.087
> 
> 标签：html, indexeddb

我想在 JS 中编写一个函数，在其中循环遍历索引数据库中的表并获取表的最后修改的最大值并返回该值

```
function readData(){
    var trans = '';
    trans = idb.transaction(["tableName"],'readonly'); // Create the transaction
    var request = trans.objectStore("tableName").openCursor();
    request.onsuccess = function(e) {
        var cursor = request.result || e.result; 
        if(cursor) {
            // logic to  and find maximum
        } else {
            return // max last modified
        }
        cursor.continue();
    }
} 
```

IMP--既然 onsuccess 方法是异步的，我怎样才能让它同步呢？这样我的方法 readData() 将仅在成功找到最大最后修改记录时返回。如果需要，我可以同步调用此方法（readData()）以获取 2-3 个表的最后修改记录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T13:20:38.857

同步 API 仅在 webworker 中可用。所以这将是第一个要求。（据我所知，目前只有 IE10 支持）

您可以提供的另一种方法是使用 JS 1.7 并使用 yield 关键字。有关它的更多信息，请看[这里](http://tobyho.com/2010/12/10/trampolines-in-javascript-and/)

我建议使用您在达到最新值时调用的 callbakck 方法。

```
function readData(callback){     
   var trans = '';         
   trans = idb.transaction(["tableName"],'readonly'); //Create the transaction   
   var request = trans.objectStore("tableName").openCursor();
   var maxKey;      
   request.onsuccess = function(e) {   
       var cursor = request.result || e.result;             
       if(cursor.value){             
          //logic to  and find maximum
          maxKey = cursor.primaryKey            
          cursor.continue();
       }
   } 
   trans.oncomplete = function(e) {
        callback(maxKey); 
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T16:44:56.857

顶部框架中的 IndexedDB API 是异步的。async 不能是同步的。但是您可以在单个事务中读取所有表。

# openx - OpenX 市场广告商控制台 API

> ID：12092085
> 
> 赞同：0
> 
> 时间：2012-08-23T12:56:05.227
> 
> 标签：openx

我想为 openx 广告控制台开发一个简单的 API，它允许我在一个展示位置中自动添加展示位置和域，即我可以同时在一个展示位置中添加多个域。我正在寻找示例代码/脚本来做到这一点？由于我是 openX 的新手，请告诉我如何执行此操作或提供示例代码/脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T13:44:00.193

抱歉回复晚了，但请访问[此处的开发人员 API 示例](https://developer.openx.org/wiki/display/API/OpenX+API+Tutorial+%28v1%29)

# spring - org.xml.sax.SAXParseException：cvc-complex-type.2.4.c：匹配的通配符是严格的，但找不到元素“http”的声明

> ID：12092086
> 
> 赞同：0
> 
> 时间：2012-08-23T12:56:06.193
> 
> 标签：spring, spring-security

> **可能重复：**
> [“匹配的通配符是严格的，但找不到元素'http'的声明”错误](https://stackoverflow.com/questions/10561579/the-matching-wildcard-is-strict-but-no-declaration-can-be-found-for-element-h)

我正在尝试将我的应用程序与 Spring Security 集成。我在我的应用程序中添加了我的 applicationContext-security.xml 文件。但在运行时，我收到以下错误：

```
2012-08-23 17:24:32,626 ERROR main [ContextLoader.initWebApplicationContext] - Context initialization failed
org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 32 in XML document from class path resource [cm-application-context-security.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'http'.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:404)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:342)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:92)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:123)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:422)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:352)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)
    at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:447)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:222)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:543)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:421)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1035)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:783)
    at com.google.gwt.dev.DevMode.main(DevMode.java:275)
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'http'.
    at org.apache.xerces.parsers.DOMParser.parse(DOMParser.java:267)
    at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:201)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
    ... 31 more
Starting Jetty on port 8888
   [WARN] Failed startup of context com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload@dc6a77{/,D:\Project\IBMP\IBMP_Release17\CM_UI_WORK\cm-ui_work\war}
org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 32 in XML document from class path resource [cm-application-context-security.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'http'.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:404)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:342)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:92)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:123)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:422)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:352)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)
    at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:447)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:222)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:543)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:421)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1035)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:783)
    at com.google.gwt.dev.DevMode.main(DevMode.java:275)
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'http'.
    at org.apache.xerces.parsers.DOMParser.parse(DOMParser.java:267)
    at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:201)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
    ... 31 more
   [WARN] Nested in org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 32 in XML document from class path resource [cm-application-context-security.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'http'.:
org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'http'.
    at org.apache.xerces.parsers.DOMParser.parse(DOMParser.java:267)
    at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:201)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:342)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:92)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:123)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:422)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:352)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:255)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:199)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:45)
    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:543)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)
    at com.google.gwt.dev.shell.jetty.JettyLauncher$WebAppContextWithReload.doStart(JettyLauncher.java:447)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:222)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:543)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:421)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1035)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:783)
    at com.google.gwt.dev.DevMode.main(DevMode.java:275) 
```

我不知道为什么会出现这个错误。以前我的应用程序使用的是 spring 2.5.6 分发 jar。但对于春季安全实施，我添加了 2 个额外的罐子。即
spring-security-core-3.0.2 spring-security-web-3.0.2

下面是我的**applicationContext-security.xml**

```
<?xml version="1.0" encoding="UTF-8"?>

<!-- - Sample namespace-based configuration - -->

<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                        http://www.springframework.org/schema/security
                        http://www.springframework.org/schema/security/spring-security-3.0.xsd">

    <!-- <global-method-security pre-post-annotations="enabled">
    </global-method-security>  -->

    <!-- <beans:import resource="urm.xml" />  -->

    <beans:bean id="customAuthenticationProcessingFilter"
        class="com.onmobile.campaignmanager.urm.authentication.CustomAuthenticationProcessingFilter">
        <beans:property name="filterProcessesUrl" value="/j_spring_security_filter" />
        <beans:property name="authenticationManager" ref="authenticationManager" />
    </beans:bean>

    <beans:bean id="customUserDetailsService"
        class="com.onmobile.campaignmanager.urm.authentication.CustomUserDetailsService">
        <beans:property name="urmService" ref="urmService" />
    </beans:bean>

    <http use-expressions="true">
        <form-login login-page="/login.jsp" default-target-url="/Campaignmanager.html"
            authentication-failure-url="/login.jsp?login_error=1"
            always-use-default-target="true" />
        <intercept-url pattern="/login.jsp*" access="permitAll" />
        <intercept-url pattern="/ForgetPassword*" access="permitAll" />
        <intercept-url pattern="/cm-ui/**" access="isAuthenticated()"/>
        <intercept-url pattern="/gwt/**" access="isAuthenticated()"/>
        <intercept-url pattern="/**/*.html" access="isAuthenticated()"/>
        <intercept-url pattern="/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <!--intercept-url pattern="/**" access="isAuthenticated()" /-->
        <logout logout-url="/j_spring_security_logout"
            invalidate-session="true" />
        <remember-me />
        <session-management invalid-session-url="/login.jsp?loggedout=true">
            <concurrency-control max-sessions="1"
                error-if-maximum-exceeded="false" />
        </session-management>
        <anonymous enabled='false'/>
    </http>

    <authentication-manager alias="authenticationManager">
        <authentication-provider user-service-ref="customUserDetailsService" />
    </authentication-manager>

</beans:beans> 
```

在我也收到同样的标签错误之前。在那之后，正如你在上面看到的，我已经评论了那个。

请向我提供任何建议，如果有人遇到过或对同一问题有任何了解，可以在哪里查看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:56:12.183

您可能忘记添加`spring-secuirty-config.jar`到您的类路径。（强烈推荐使用 Maven，因为它会处理依赖关系。）

# objective-c - iOS / Objective-C：未调用 UIView 委托

> ID：12092089
> 
> 赞同：0
> 
> 时间：2012-08-23T12:56:10.780
> 
> 标签：objective-c, ios, uiview, delegates

我在视图控制器中的滚动视图中有一个 uiview，似乎没有调用代表，因为我将它们添加到了 uiview。

有可能解决这个问题吗？（我想将代表保留在 uiview 中，因为它似乎是更简洁的代码）

迈克

编辑：

在 .h 文件中：

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface RHCHuntingReportViewPageTwo : UIView <MKMapViewDelegate>

@property (weak, nonatomic) IBOutlet MKMapView *mapView;

@end 
```

在 .m 文件中：

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation {
    MKAnnotationView *pin=[[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"current"];
    pin.image = [UIImage imageNamed:@"map_pin.png"];
    pin.draggable = NO;
    pin.canShowCallout = YES;

    return pin;
} 
```

我在情节提要中正确添加了代表和出口。

编辑2：

在 .m 文件中：

```
- (id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];
    if (self) {
        RHCAnnotation *annotation = [[RHCAnnotation alloc] init];
        annotation.title = @"title";
        annotation.subtitle = @"subtitle";
        annotation.image = [UIImage imageNamed:@"map_tipp.png"];
        annotation.coordinate = CLLocationCoordinate2DMake(57.242465, 2.533579);
        mapView.region = MKCoordinateRegionMakeWithDistance(annotation.coordinate, 250, 250);
        [mapView addAnnotation:annotation];
    }
    return self;
} 
```

# doctrine-orm - Zend 2 + 学说 2 Auth 适配器

> ID：12092091
> 
> 赞同：6
> 
> 时间：2012-08-23T12:56:22.287
> 
> 标签：doctrine-orm, zend-framework2, zend-auth

我正在寻找有关使用 Zend 2 和 Doctrine 2 进行身份验证的教程。特别是控制器和适配器的创建。

官方文档太全球化了，对我的帮助不够。

谢谢你

编辑：

我使用“Doctrine Entity”（命名空间用户\实体；）

实体在 module.config.php 文件中注册：

```
'doctrine' => array(
    'driver' => array(
        __NAMESPACE__ . '_driver' => array(
            'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
            'cache' => 'array',
            'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')
        ),
        'orm_default' => array(
            'drivers' => array(
                __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'
            )
        )          
    ),
) 
```

但是现在，我怎样才能将我的 identityClass 键指向我的适配器？控制器 ：

```
use Zend\Mvc\Controller\AbstractActionController,
    Zend\View\Model\ViewModel,
    Zend\Authentication\AuthenticationService,
    Doctrine\ORM\EntityManager,
    DoctrineModule\Authentication\Adapter\ObjectRepository as DoctrineAdapter,        
    User\Entity\User,  
    User\Form\UserForm;
class UserController extends AbstractActionController 
{
protected $em;

public function setEntityManager(EntityManager $em)
{
    $this->em = $em;
}

public function getEntityManager()
{
    if (null === $this->em)
        $this->em = $this->getServiceLocator()->get('Doctrine\ORM\EntityManager');
    return $this->em;
} 

public function getRepository()
{
    if (null === $this->em) 
        $this->em = $this->getEntityManager()->getRepository('User\Entity\User');
    return $this->em;
} 

public function loginAction()
{
    ....
    ????????????
    $adapter = new DoctrineAdapter();
    $adapter->setIdentityValue($username);
    $adapter->setCredentialValue($password);
    $auth = new AuthenticationService();    
    $result=$auth->authenticate($adapter);
    ????????????

}

} 
```

我遇到了这个错误：在第 132 行第 123 行的 ...doctrine\doctrine-module\src\DoctrineModule\Options\AuthenticationAdapter.php 中的非对象上调用成员函数 getRepository()：返回 $this-> objectManager->getRepository($this->identityClass);

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-23T23:42:52.663

有很多方法可以做到这一点，但是 zf2 的 DoctrineModule 附带了一个基于原则的身份验证适配器 ( `DoctrineModule\Authentication\Adapter\ObjectRepository`)。还有一个工厂来创建适配器 ( `DoctrineModule\Service\AuthenticationAdapterFactory`)。DoctrineMongoODMModule 的 module.config.php 设置为使用这些服务。（请注意，工厂和适配器将与 ORM 一起使用，但我不确定配置键是否已添加到 DoctrineORMModule 中——也许读过这篇文章的人想为此创建一个 PR？）这些是相关的配置键：

```
 'authenticationadapter' => array(
        'odm_default' => array(
            'objectManager' => 'doctrine.documentmanager.odm_default',
            'identityClass' => 'Application\Model\User',
            'identityProperty' => 'username',
            'credentialProperty' => 'password',
            'credentialCallable' => 'Application\Model\User::hashPassword'
        ),
    ), 
```

这`identityClass`是代表您经过身份验证的用户的原则文档。通常`identityProperty`是用户名。`getUsername`适配器将调用它来访问它。`credentialProperty`通常是密码。`getPassword`适配器将调用它来访问它。`credentialCallable`是可选的。它应该是一个可调用的（方法、静态方法、闭包），它将散列 credentialProperty - 您不需要这样做，但这通常是个好主意。适配器将期望可调用对象具有以下形式：`function hashPassword($identity, $plaintext)`.

要获取身份验证适配器，请使用：

```
$serviceLocator->get('doctrine.authenticationadapter.odm_default'); 
```

请注意，所有这些只为您提供了一个身份验证适配器，它实际上并不进行身份验证。身份验证是这样完成的：

```
$adapter = $serviceLocator->get('doctrine.authenticationadapter.odm_default');
$adapter->setIdentityValue($username);
$adapter->setCredentialValue($password);
$authService = new Zend\Authentication\AuthenticationService
$result = $authService->authenticate($adapter); 
```

This will store the whole doctrine document of the authenticated user in the session object. If you want to store only the document ID in the session object, and retrieve the rest of the authetnicated user document form the DB each request, then take a look at `DoctrineModule\Authentication\Storage\ObjectRepository`. This provides a new `StorageInterface` for the `Zend\Authentication\AuthenticationService`.

# windows-7 - MiniFilter 驱动程序 - 修改 IRP_MJ_CLOSE 和 IRP_MJ_CREATE 上的文件字节

> ID：12092098
> 
> 赞同：0
> 
> 时间：2012-08-23T12:56:33.340
> 
> 标签：windows-7, driver, minifilter, irp

我想在关闭文件时更改文件，并在打开文件时撤消更改。它有点像加密驱动程序，只是我不想加密文件。

我在 Visual Studio 2012 中使用 WDK8 创建了一个新的“过滤器驱动程序：文件系统微型过滤器”项目，并将 PreCreate、PostCreate、PreClose 和 PostClose 注册为回调函数。

例如，在其字节为 {72,101,108,108,111}（“Hello”）的文件的 IRP_MJ_CLOSE 上，我希望在 PostClose 函数之后，文件在硬盘上看起来像这样：{10,11,12,72,101,108,108,111}。

我怀疑这并不像这样简单：

```
 FLT_PREOP_CALLBACK_STATUS
    PreClose (
    _Inout_ PFLT_CALLBACK_DATA Data,
    _In_ PCFLT_RELATED_OBJECTS FltObjects,
    _Flt_CompletionContext_Outptr_ PVOID *CompletionContext
    )
{
    //...

    //some if statment...
    {
        Data->Iopb->Parameters.Write.WriteBuffer = newBfr;
        Data->Iopb->Parameters.Write.Length = newLen;
    }
    //...

    return FLT_PREOP_SUCCESS_WITH_CALLBACK;
} 
```

我想要一些关于这个主题的指导。

还有什么是调试这个的最佳方法？我还没有找到打印到 Windows 7 调试的方法。

谢谢！gfgqtmakia。

编辑：我已经阅读了[http://code.msdn.microsoft.com/windowshardware/swapBuffer-File-System-6b7e6e2d](http://code.msdn.microsoft.com/windowshardware/swapBuffer-File-System-6b7e6e2d)但我认为它对我没有帮助，因为它是用于读/写的，我没有不想处理。

EDIT2：或者我应该在 PreCreate 和 PostClose 中进行更改，当文件在硬盘驱动器上而不是在 IRP 中间时，然后我不需要“即时”处理缓冲区，而是在磁盘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:08:32.000

您将不得不编写诸如*交换缓冲区之*类的东西。在 PostCreate/PreClose 中修改文件数据不是一个好主意。

几个原因：

*   首先在 PostCreate/PreClose 你不应该访问`Data->Iopb->Parameters.Write.WriteBuffer`. 这仅在 IRP_MJ_WRITE 中有效。您可以`FltWriteFile`将数据写入文件。
*   Windows 内核可能不会在 IRP_MJ_CLOSE 中/之后立即将文件数据写入磁盘。想想页面缓存。
*   可能存在需要适当注意的复杂性，例如分页 i/o、直接 i/o 等。
*   我注意到的另一件事是您还将更改文件大小（如您的问题中所说，实际数据长度为 5 个字节，而您将数据更新为 8 个字节）。现在这很难管理。从不建议在 minifilter/文件系统驱动程序中更改文件大小。

# javascript - 自定义 HTML Shiv 的缺点

> ID：12092108
> 
> 赞同：7
> 
> 时间：2012-08-23T12:57:03.687
> 
> 标签：javascript, html, html5shiv

在最近的一个项目中，我使用了[Alexander Farkas 的 HTML5 Shiv](https://github.com/aFarkas/html5shiv/)，我注意到缩小脚本后的大小为 2.274 KB。[对于John Resig 基本上用两行代码演示](http://ejohn.org/blog/html5-shiv/)的概念，这对我来说似乎相当大（*我意识到这过于简单化了，因为 John 不包括检查支持或所有新的 HTML5 元素*）。我深入研究了[html5shiv 源代码](https://github.com/aFarkas/html5shiv/blob/master/src/html5shiv.js)。它是 248 sloc，对于这样一个简单的任务来说，这似乎是很多不必要的代码。我只用了 14 行就实现了一个更简单的 shiv：

```
(function(document) {
    var div      = document.createElement('div'),
        elements = 'article|aside|audio|canvas|details|figure|figcaption|footer|header|hgroup|nav|output|progress|section|summary|video'.split('|'),
        i        = 0,
        length   = elements.length;

    div.innerHTML = '<header></header>';

    if(div.childNodes.length != 1) {
        for(; i < length; i++) {
            document.createElement(elements[i]);
        }
    }
})(document); 
```

缩小它只有约 270 字节（这比 Farkas Shiv 的大小节省了 88%）。当与适当的 CSS 结合使用时，它可以在 IE 6、7 和 8 中正常工作。

```
article,aside,audio,canvas,figure,figcaption,footer,header,hgroup,nav,output,progress,section,video{display:block;} 
```

似乎 Farkas shiv 的肉在创建元素和检查 try/catch 中的功能方面发挥了一些作用。这种肉和填充物有必要吗？我的解决方案是否足够，或者 Farkas shiv 是否解释了我没有考虑过的事情？

**编辑**

该脚本现在使用正确的声明创建它自己的样式标记（仍然只有 21 行！）：

```
(function(document) {
    var div      = document.createElement('div'),
        elements = 'article,aside,audio,canvas,figure,figcaption,footer,header,hgroup,nav,output,progress,section,video',
        elementArr = elements.split(','),
        i        = 0,
        length   = elementArr.length,
        script, style;

    div.innerHTML = '<header></header>';

    if(div.childNodes.length != 1) {
        for(; i < length; i++) {
            document.createElement(elementArr[i]);
        }

        script = document.getElementsByTagName('script')[0];
        style = document.createElement('style');
        style.innerHTML = elements+'{display: none}';
        script.parentNode.insertBefore(style, script)
    }
})(document); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T13:09:41.207

您的代码和 html5_shiv 之间的主要区别在于，您的版本仅满足 IE*在页面初始加载期间*缺乏对 HTML5 元素的支持。

事实上，还有很多重要的问题需要处理，如果您在加载后使用 Javascript 修改页面内容，您会遇到这些问题。

在某一时刻，实际上有一个名为[html5 inner shiv](http://jdbartlett.com/innershiv/)的辅助脚本，它解决了这些问题。但是，主 html_shiv 脚本的更新版本也包含这些修复程序，因此不再需要辅助脚本。但这确实意味着主脚本现在要大得多。

这说明了您看到的代码量。

如果您的 HTML 将是静态的，那么答案是否定的，您不需要所有额外的代码；你的版本很好。（或者您可以访问 html5_shiv Github 页面并下载以前的版本；早期版本看起来更像您的代码）。

但是，如果您打算编写一个包含任何动态内容的站点，那么建议您使用完整的当前版本的 html5_shiv。它解决的不仅仅是一个问题。

# android - 使用电子表格作为 android 应用程序的数据库作为集中式数据库

> ID：12092111
> 
> 赞同：1
> 
> 时间：2012-08-23T12:57:08.130
> 
> 标签：android, database, spreadsheet

我有一个需要集中式数据库的应用程序。所以我打算使用`Google Spread Sheets`.
我已经浏览了[这个链接](https://developers.google.com/google-apps/spreadsheets/)，但我真的不太了解它。
那么是否有任何可用的示例代码，请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:04:42.560

相关的 SO 问题：[Using Google Docs and Google Spreadsheet APIs for Android](https://stackoverflow.com/q/6408580/1431750)。有一个[答案链接到带有 API 文档和示例的项目](https://stackoverflow.com/a/6409252/1431750)。

> 那么是否有任何可用的示例代码，请建议。
> 
> 我仍在研究它，不知道如何使用 Google API 本身我已经下载了库

为什么不也谷歌一些例子 - [http://www.google.com/search?q=android+google+spreadsheet+example](http://www.google.com/search?q=android+google+spreadsheet+example)？

# java - 安装后找不到java但java程序运行

> ID：12092112
> 
> 赞同：0
> 
> 时间：2012-08-23T12:57:13.650
> 
> 标签：java, java-7

我今天将我的 java 更新到 JDK 7，安装后我可以运行 java 程序并且 eclipse 运行良好，但[http://www.java.com/en/download/installed.jsp](http://www.java.com/en/download/installed.jsp)说没有检测到有效的 java。Minecraft 也不会登录，tekkit 也无法从互联网上加载任何东西。我尝试将 java 添加到 PATH 变量中无济于事。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:10:45.867

好的，这个jsp也没有在我的机器上检测到java。

我相信这是因为 JSP 无法*真正*检测到您机器上*安装*的java 。它只能检测您当前浏览器上安装的 Java 插件的版本。所以，你必须安装java插件（如果你需要的话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:11:17.080

安装 JDK 不一定会在您的浏览器中安装 Java 插件。假设您在 Windows 上，请按照下列步骤操作：

*   打开控制面板
*   打开Java
*   单击“Java”选项卡
*   点击“查看”
*   单击要启用的 JRE 的“已启用”列中的复选框。如果看不到，请单击“添加”添加它（通过指定 java exe 的路径）
*   重启浏览器

# nunit - 未安装 CLR 4.0.30319 版的 NUnit 组件

> ID：12092117
> 
> 赞同：15
> 
> 时间：2012-08-23T12:57:27.703
> 
> 标签：nunit

我正在尝试实现一个自动构建过程。构建后，运行 nunit-console.exe 上的单元测试。显示以下错误：

```
> c:\nunit_2.5.10\nunit-console.exe c:\builds\Output\bin\TDD.nunit /framework=4.0.30319 /nologo /trace=Off
ProcessModel: Default    DomainUsage: Default
Execution Runtime: v4.0.30319
Unhandled Exception:
System.ArgumentException: NUnit components for version 4.0.30319 of the CLR are not installed
Parameter name: targetRuntime
   at NUnit.Util.TestAgency.LaunchAgentProcess(RuntimeFramework targetRuntime, Boolean enableDebug)
   at NUnit.Util.TestAgency.CreateRemoteAgent(RuntimeFramework framework, Int32 waitTime, Boolean enableDebug)
   at NUnit.Util.TestAgency.GetAgent(RuntimeFramework framework, Int32 waitTime, Boolean enableDebug)
   at NUnit.Util.ProcessRunner.Load(TestPackage package)
   at NUnit.ConsoleRunner.ConsoleUi.Execute(ConsoleOptions options)
   at NUnit.ConsoleRunner.Runner.Main(String[] args) 
```

构建机器上没有 nunit-agent.exe。但是，在我的机器上它甚至没有被调用，所以我认为没有必要。

为什么在某些情况下需要 nunit-agent.exe 但并不总是需要？应该满足什么条件才能使 nunit-agent 不需要启动？

编辑：我找到了一个资源，它描述了它是如何工作的，但不是很好：[http](http://www.nunit.org/index.php?p=nunit-agent&r=2.5.10) ://www.nunit.org/index.php?p=nunit-agent&r=2.5.10 。它说它是在程序需要在与 NUnit 使用的框架不同的框架下运行时启动的（就是这种情况，因为 NUnit 是为 2.0 编译的）。但是，在我的机器上 nunit-agent.exe 没有运行，尽管条件似乎是相同的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-09-12T20:21:32.163

我遇到了同样的错误，它肯定是通过包含`nunit-agent.exe`在`nunit-console.exe`启动的文件夹中来解决的。成功运行测试所需的`.exe`s 和s的完整列表是：`.dll`

```
nunit.core.dll
nunit.core.interfaces.dll
nunit.framework.dll
nunit.util.dll
nunit-agent.exe
nunit-console.exe
nunit-console-runner.dll 
```

所有文件都打包在[nunit.org](http://nunit.org/index.php?p=download)提供的下载中。截至这篇文章，2.6.3 是当前版本。可以在[此处](http://www.nunit.org/index.php?p=nunit-console&r=2.6.3)找到控制台运行器的文档。并且 zip 文件的直接下载在[这里](http://launchpad.net/nunitv2/trunk/2.6.3/+download/NUnit-2.6.3.zip)。

对于面向 .NET 4.5.1 的测试程序集，以下语句将执行测试：

```
nunit-console.exe your-assembly.dll /framework=v4.5.1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-20T22:10:32.013

添加“startup/supportedRuntime”配置标签来`nunit-console.exe.config`为我解决它。

```
<startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0.30319" />
</startup> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T22:36:24.063

尝试使用 Fusion 查看可能缺少的程序集以及 .exe 正在查找的位置。 [http://msdn.microsoft.com/en-us/library/e74a18c4(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/e74a18c4(v=vs.110).aspx)

# .htaccess - mod_rewrite 丢失文件扩展名、重写和使用或不使用斜杠

> ID：12092118
> 
> 赞同：1
> 
> 时间：2012-08-23T12:57:28.950
> 
> 标签：.htaccess, mod-rewrite

我想让我的网址漂亮。

`example.com/en/directions.php`

`example.com/en/directions/`

都应该重写为

`example.com/en/directions`

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME}\.php -f
    RewriteRule ^(.*)$ $1.php
</IfModule> 
```

这目前会产生一个 500 错误，`example.com/en/directions/`并将 .php 保留为`example.com/en/directions.php`.

如果你能让我理解重写条件和重写规则是如何工作的，那就加分。*如果这些条件中的任何一个匹配，*它是否遵循然后*执行此操作*。那么`-d`and`-f`呢，他们在做什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:58:12.980

The check against `-f` fails because of the trailing slash so you need to do an additional check against it *without* a possible trailing slash:

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} ^(.*?)/?$
    RewriteCond %{DOCUMENT_ROOT}/%1.php -f
    RewriteRule ^(.*?)/?$ $1.php
</IfModule> 
```

> how rewrite conditions and rewrite rules work. Does it follow if any of these conditions match then do this. And what about the -d and -f, what are they doing?

Any number of conditions preceding a rule *only apply to that rule* and they are all required to match. If you want one condition *or* another, then you can include the `[OR]` flag at the end of the condition:

```
 RewriteCond %{REQUEST_FILENAME} !-d [OR]
    RewriteCond %{REQUEST_FILENAME} !-f 
```

As for the `-f` and `-d`, they are resource checks, to see if a given path points to a file or a directory. See [apache's mod_rewrite docs](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond) for the full explanation.

# mysql - MySQL WHERE a la NoSQL 风格

> ID：12092120
> 
> 赞同：0
> 
> 时间：2012-08-23T12:57:35.830
> 
> 标签：mysql, select, nosql, where

有没有一种方法可以在 MySQL 的 JSON 字段中搜索 la NoSQL？我的意思是，如果我存储，比如说，`"{name: 'John', surname: 'Doe', age:'30'}"`在一个`VARCHAR`字段中，我可以用类似的东西选择和过滤它

```
SELECT my_json_field FROM my_table where my_json_field.name = 'John' 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:59:36.620

Why not like this:

```
 SELECT my_json_field FROM my_table where my_json_field LIKE '% name:\'John\' %' 
```

Or more general, depending on the structure of your `my_json_field`:

```
 SELECT my_json_field FROM my_table where my_json_field LIKE '% name: \'John\' %' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:25:50.213

与操作员一起实施这样的功能`like`可能会降低性能。我建议为此目的使用 MySQL[全文](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)搜索而不是`like`.

```
create table my_table (my_json_field text);

ALTER TABLE my_table ADD FULLTEXT(my_json_field);

insert into my_table (my_json_field) values ("{name: 'John', surname: 'Doe', age:'30'}");

insert into my_table (my_json_field) values ("{name: 'Pope', surname: 'Benedict', age:'666'}");

select *
from my_table
where MATCH(my_json_field) AGAINST ("Pope" IN BOOLEAN MODE);
'{name: ''Pope'', surname: ''Benedict'', age:''666''}'

select * 
from my_table
where MATCH(my_json_field) AGAINST ("John" IN BOOLEAN MODE);
'{name: ''John'', surname: ''Doe'', age:''30''}' 
```

您可能会注意到我没有在查询中添加“名称”文件名，因为它是一个[停用词](http://dev.mysql.com/doc/refman/5.0/en/fulltext-stopwords.html)（在搜索词中被忽略）。

此外，如果要搜索“fieldname: 'value'”对，则必须找到一种处理特殊字符的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T11:33:43.957

哪有这回事。MySQL 只是不会理解 JSON 并且编写正则表达式匹配或其他任何东西都只是自找麻烦。

# uiscrollview - 如何在 UIScrollView 内平移缩小的 UIImageView？

> ID：12092121
> 
> 赞同：0
> 
> 时间：2012-08-23T12:57:36.083
> 
> 标签：uiscrollview, uiimageview

我有一个 UIScrollView，其中包含一个 UIImageView。一切正常，我可以放大和缩小，放大时我可以平移，等等。

我无法解决的问题是如何在屏幕上平移缩小的图像。用户需要能够将图像缩小到很小，然后将该小图像移动到屏幕上的任意点。可悲的是，它卡在屏幕中央（通常，它会卡在左上角，但我确实解决了这个问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:02:56.987

您需要在这里做几件事。我建议在 viewWillAppear 而不是 viewDidLoad 中执行它们，因为如果您使用情节提要，它在 viewDidLoad 中无法正常工作。

首先，您需要将滚动视图的内容大小属性设置为照片本身的大小，因为您希望照片的整个区域都是可滚动的。

```
self.scrollView.contentSize=self.photoShown.size; 
```

photoShown 是 UIImage。scrollView 是一个 UIScrollView

其次，您需要将包含图像的 UIImageView 的框架设置为图像的大小：

```
self.imageView.frame=CGRectMake(0,0, self.photoShown.size.width, self.photoShown.size.height); 
```

如果你还没有这样做，那么 UIImageView 的框架就是屏幕本身的大小，根本无处可平移。这就是它需要更大的原因，以便您可以平移到当前未显示在屏幕上的区域。

# json - 使用具有不同子字段的 JSON 加载 TreeStore

> ID：12092123
> 
> 赞同：1
> 
> 时间：2012-08-23T12:57:38.520
> 
> 标签：json, extjs, extjs4.1

我有一个如下所示的 JSON 数据。

```
{
    "divisions": [{
        "name": "division1",
        "id": "div1",
        "subdivisions": [{
            "name": "Sub1Div1",
            "id": "div1sub1",
            "schemes": [{
                "name": "Scheme1",
                "id": "scheme1"
            }, {
                "name": "Scheme2",
                "id": "scheme2"
            }]
        }, {
            "name": "Sub2Div1",
            "id": "div1sub2",
            "schemes": [{
                "name": "Scheme3",
                "id": "scheme3"
            }]
        }

        ]
    }]
} 
```

我想将其读入 TreeStore，但不能将子字段（、、、`divisions`）`subdivisions`更改`schemes`为相同（例如，`children`）。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T13:39:04.447

当嵌套的 JSON 加载到 TreeStore 中时，子节点本质上是通过`TreeStore.fillNode()`方法和`NodeInterface.appendChild()`.

每个节点的子字段的实际检索`TreeStore.onNodeAdded()`在此行内完成：

```
dataRoot = reader.getRoot(data); 
```

阅读器的`getRoot()`是在阅读器的`buildExtractors()`方法中动态创建的，这是您需要覆盖的内容，以便处理嵌套 JSON 中的不同子字段。这是如何完成的：

```
Ext.define('MyVariJsonReader', {
    extend: 'Ext.data.reader.Json',
    alias : 'reader.varijson',

    buildExtractors : function()
    {
        var me = this;    
        me.callParent(arguments);

        me.getRoot = function ( aObj ) {                
            // Special cases
            switch( aObj.name )
            {
                case 'Bill':   return aObj[ 'children' ];
                case 'Norman': return aObj[ 'sons' ];                    
            }

            // Default root is `people`
            return aObj[ 'people' ];
        };
    }
}); 
```

这将能够解释这样的 JSON：

```
{
   "people":[
      {
         "name":"Bill",
         "expanded":true,
         "children":[
            {
               "name":"Kate",
               "leaf":true
            },
            {
               "name":"John",
               "leaf":true
            }
         ]
      },
      {
         "name":"Norman",
         "expanded":true,
         "sons":[
            {
               "name":"Mike",
               "leaf":true
            },
            {
               "name":"Harry",
               "leaf":true
            }
         ]
      }
   ]
} 
```

请参阅[此 JsFiddle](http://jsfiddle.net/Izhaki/fF5Ux/)以获得完整的工作代码。

# c# - 如何检测应用程序是否从 DVD 运行？

> ID：12092126
> 
> 赞同：2
> 
> 时间：2012-08-23T12:57:55.643
> 
> 标签：c#, system.reflection, driveinfo

我正在尝试检测我们的应用程序是否从 DVD 运行（因为这会禁用/启用逻辑中的功能）。到目前为止，我已经想出了下面似乎有效的代码片段，尽管我真的想知道是否有检测到这一点的最佳实践。

```
 public static bool IsDVDInstallation()
    {
        try
        {
            string location = Assembly.GetExecutingAssembly().Location;
            var info = new DriveInfo(Path.GetPathRoot(location));
            return info.DriveType == DriveType.CDRom;
        }
        catch
        {
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T13:00:55.933

如果您想知道*应用程序*（而不是您所在的任何特定程序集）是否在光驱上运行，那么您可能应该使用`GetEntryAssembly()`而不是`GetExecutingAssembly()`. 除此之外，您上面的逻辑似乎完全合理。

为什么是静音`catch`块？您之前尝试此操作时是否遇到异常？即使你这样做了，你真的应该捕获你知道如何处理的*特定异常，而不是一切。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:00:47.610

您的解决方案几乎是可靠的。但是，如果从虚拟 DVD 驱动器运行它仍然可以运行（我假设你不想要）

在这种情况下，您必须查询 WMI 以获取有关硬件的更多信息，以尝试确定它是否“真实” - 但这也不是安全的赌注，因此您现有的解决方案应该涵盖除电源之外的任何内容知道自己在做什么的用户（无论如何您都无法对他们做太多的事情）

# php - 关于 Iphone 和 Web 服务器通信的多个问题

> ID：12092128
> 
> 赞同：1
> 
> 时间：2012-08-23T12:57:58.493
> 
> 标签：php, iphone, mysql, xml, xml-parsing

现在我正在大学里做一个关于 iPhone 开发的项目。该项目由一个带有 mysql 数据库的网络服务器和多个客户端（IPhone 设备）组成。

我在基本概念上有些挣扎，即 iPhone 和 Webserver 之间的通信（接收、发送数据）。

我已经建立了一个带有 MYSQL 数据库的网络服务器。我还有一个 PHP 脚本，它可以访问数据库并将 db-Data 写入 XML 文件。

1) 与客户端 (iPhone) 合作的最佳方式是什么？

2) 是否可以直接访问 .php 文件并将 XML 下载到 iPhone？

3) 什么会下载到 iPhone 上？整个 XML 文件还是 XML 内容？

然后，我将继续使用 XML-Parser（最好是 NSXMLParser）处理 XML-File。

4) 如何将接收到的数据永久存储在 iPhone 上？NSMutableArray？如果在 iPhone 设备上添加任何数据，则离线模式需要此功能。

这让我想到了我的最后一个问题：

5) 如何将数据发送回网络服务器？或者更具体地说，我必须使用哪种数据结构将数据发送回网络服务器？这样做的合理方法是什么？例如：创建一个新的 XML 文件并将其发送回网络服务器？

最好的问候， 亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:55:10.863

数据协议必须是 XML 吗？我会选择 JSON 作为数据协议！如果您可以使用 JSON，请查看轻量级[SBJson](http://stig.github.com/json-framework/)框架。相信我，在 iOS 上使用 JSON 而不是 XML 会容易得多！

总结其他问题，关于服务器通信等！从头开始编写网络代码是强制性的先决条件，还是允许您为此使用现有的开放框架？如果您可以使用框架，那么请看一下[MKNetworkKit](https://github.com/MugunthKumar/MKNetworkKit)！它将消除编写或合并自己的网络代码所带来的几乎所有麻烦，并且它已经内置了 JSON 序列化/反序列化！

如果没有，那么使用 NSURLConnection、NSURLResponse 和可能的一些 NSOperation/NSOperationQueue 进行异步处理，玩得开心！:-) 不要忘记来自 Apple 的 Reachability.h/m！;-)

对于设备上的数据持久性，要么使用[CoreData](http://developer.apple.com/library/ios/#DOCUMENTATION/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html)，它非常强大，但对于您的目的来说，mybe（关于复杂性）的开销很大。或者只是将您的东西存储在[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)中！

# java - 发送和接收数据PHP到android JAVA

> ID：12092143
> 
> 赞同：0
> 
> 时间：2012-08-23T12:58:53.963
> 
> 标签：java, php, android

我目前正在开发一个从服务器接收数据的 Android 应用程序。我真的不知道如何将数据传输到服务器并返回到应用程序的问题，我使用 PHP 就像一个接受和返回数据的引擎，但我不确定它有多好和有效..有谁知道 WAZE 是如何工作的，可以给我一个解决问题的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:01:24.560

您需要为此使用 Web 服务。

**Web 服务是两个电子设备之间通过 Web 进行通信的方法**

看看下面的项目链接。

[http://www.codeproject.com/Articles/267023/Send-and-receive-json-between-android-and-php](http://www.codeproject.com/Articles/267023/Send-and-receive-json-between-android-and-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:08:01.203

您需要 Web 服务来在网络上传输数据。W3C 将“Web 服务”定义为“旨在支持网络上可互操作的机器对机器交互的软件系统”。[看看这个](http://davidwalsh.name/web-service-php-mysql-xml-json)

# jqgrid - 添加对话框后未关闭

> ID：12092147
> 
> 赞同：5
> 
> 时间：2012-08-23T12:59:07.027
> 
> 标签：jqgrid

下面是我的代码，我需要在提交后关闭添加/编辑对话框。在这两种情况下，它都会更新服务器并重新加载网格，但不会关闭对话框：

```
jQuery("#toolbar1").jqGrid({
     url:'category/getcategorylist',
     datatype: "xml",
     colNames:["Name","Description","Id"],
     colModel:[
         {name:"cname",index:"cname",editable:true, width:250, align:"center",xmlmap:"categoryName"},
         {name:"cdescription",index:"cdescription", editable:true,width:300, align:"center",xmlmap:"description"},
         {name:"id",index:"id", editable:true,width:210, align:"center",xmlmap:"categoryId",key: true,hidden: true},
     ],
     rowNum:100,
     viewrecords: true,
     toppager:true,
     height:250,
     width:800,
     modal:true,
     sortorder: "asc",
     xmlReader: {
        root : "CategoryList",
        row: "categoryList",
        repeatitems: false
     },
});
$("#toolbar1").jqGrid("navGrid", "#toolbar1_toppager", {
     reloadAfterSubmit:true, view: false, search:false ,addtext: 'Add',
     edittext: 'Edit',
     deltext: 'Delete',
     refreshtext: 'Reload'
},
{url: "category/updatecategory"}, {url: "category/createcategory"}, {url:"category/deletecategory"}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T13:21:30.003

有一些用于关闭对话框的属性需要在您的编辑/添加声明中设置，它们通常默认为 false。

**添加：**

`closeAfterAdd`- 添加模式时，添加记录后关闭对话框。（默认：假）

**对于编辑：**

`closeAfterEdit`- 在编辑模式下，编辑后关闭对话框。（默认：假）

因此，在您的示例中，您需要：

```
{url: "category/updatecategory", closeAfterEdit: true}, 
{url: "category/createcategory", closeAfterAdd: true} 
```

或者：

```
$("#toolbar1").jqGrid("navGrid", "#toolbar1_toppager", {
     reloadAfterSubmit:true, view: false, search:false ,addtext: 'Add',
     edittext: 'Edit',
     deltext: 'Delete',
     refreshtext: 'Reload',
     closeAfterAdd: true,
     closeAfterEdit: true
}, 
```

这些设置在[wiki上可用](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing&s%5B%5D=navgrid)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-12T05:48:01.967

以下代码段将解决您的目的：

```
$('#toolbar1').jqGrid('navGrid', '#toolbar1_toppager', 
            {edit:true,add:true,del:true,search:false}, // options
            {closeAfterEdit:true}, // edit options
            {closeAfterAdd:true},  // add options
            {},   //del options
            {},  // search options
); 
```

# android - 无法启动活动 ComponentInfo：NullPointerException

> ID：12092149
> 
> 赞同：2
> 
> 时间：2012-08-23T12:59:10.887
> 
> 标签：android, android-activity, nullpointerexception

我对 android 开发并不陌生，但我无法弄清楚为什么会出现这个愚蠢的问题。我所做的只是在应用程序启动时启动一个活动，它会崩溃给`nullpointerException`. 请在下面检查我的代码。

可能是最后办公时间让我失明。

日志猫：

```
08-23 18:19:19.359: E/AndroidRuntime(798): FATAL EXCEPTION: main
08-23 18:19:19.359: E/AndroidRuntime(798): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.click4tab.orderformnew/com.click4tab.orderformnew.Login}: java.lang.NullPointerException 
```

登录.java：

```
public class Login extends Activity {

    Button loginButton;
    EditText id, password;
    String sID, sPassword;
    TestAdapter obj;
    Context loginContext;
    public static int loginSuccessful;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);

        //Initialising variables 

        loginButton = (Button)findViewById(R.id.button1);
        id = (EditText)findViewById(R.id.editText1);
        password = (EditText)findViewById(R.id.editText2);

        obj = new TestAdapter(loginContext);

        sID = id.getText().toString();
        sPassword = password.getText().toString();

        StringBuffer buf = new StringBuffer();
        buf.append(sID + ":::" + sPassword);

        TestAdapter.params = new ArrayList<NameValuePair>();
        TestAdapter.params.add(new BasicNameValuePair("tag", "login"));
        TestAdapter.params.add( new BasicNameValuePair("query", buf.toString()));

        loginButton.setOnClickListener( new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                //send login information to authenticate user

                obj.new Read().execute("");

//              Intent i = new Intent("mainActivity");
//              startActivity(i);

            }
        });

    }

} 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.click4tab.orderformnew"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="mainActivity" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <activity
            android:name=".Login"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

登录.xml：

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginTop="194dp"
            android:text="ID"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/textView1"
            android:layout_alignBottom="@+id/textView1"
            android:layout_alignLeft="@+id/button1"
            android:ems="10" >

            <requestFocus />
        </EditText>

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/editText1"
            android:layout_marginTop="29dp"
            android:text="Password"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/editText2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/textView2"
            android:layout_alignBottom="@+id/textView2"
            android:layout_alignLeft="@+id/button1"
            android:layout_alignParentRight="true"
            android:ems="10"
            android:inputType="textPassword" />

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/editText2"
            android:layout_centerHorizontal="true"
            android:layout_marginLeft="19dp"
            android:layout_marginTop="16dp"
            android:text="Login" />

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:02:58.693

你还没有实例化`loginContext`

做

```
loginContext = this; 
```

前

```
obj = new TestAdapter(loginContext); 
```

# c# - Maintain Scroll Bar position of a div within a gridview after a PostBack

> ID：12092150
> 
> 赞同：4
> 
> 时间：2012-08-23T12:59:12.097
> 
> 标签：c#, asp.net, gridview, scroll

I used the following piece of code in the web.config in order to maintain the scrollbar position after a server postback:

```
<pages maintainScrollPositionOnPostBack="true" >
</pages> 
```

All is working fine, but now i have a gridview encapsuled within a div with a scrollbar in the div (internal scrollbar).

When an event occur on one of the rows inside the gridview, the internal scrollbar doesn't maintain its original position unlike the outer one.

Any ideas?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-28T07:57:04.637

备查：

正常程序是在 web.config 文件中写入以下内容：

```
 <system.web>
    <pages maintainScrollPositionOnPostBack="true" >
    </pages>
  </system.web> 
```

这将保留所有网页的滚动条位置。

如果您在 gridview（或 div）中有滚动条，则使用以下脚本：

```
<script type="text/javascript">
    window.onload = function () {
        var strCook = document.cookie;
        if (strCook.indexOf("!~") != 0) {
            var intS = strCook.indexOf("!~");
            var intE = strCook.indexOf("~!");
            var strPos = strCook.substring(intS + 2, intE);
            document.getElementById("grdWithScroll").scrollTop = strPos;
        }
    }
    function SetDivPosition() {
        var intY = document.getElementById("grdWithScroll").scrollTop;
        document.cookie = "yPos=!~" + intY + "~!";
    }
</script> 
```

并且 div 必须如下：

```
<div id="grdWithScroll" …………  onscroll="SetDivPosition()"> 
```

[http://michaelsync.net/2006/06/30/maintain-scroll-position-of-div-using-javascript-aspnet-20](http://michaelsync.net/2006/06/30/maintain-scroll-position-of-div-using-javascript-aspnet-20)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-27T07:37:02.007

尝试这个，

```
 <script type="text/javascript">
  window.onload = function () {
               var h = document.getElementById("<%=hfScrollPosition.ClientID%>");
               document.getElementById("<%=scrollArea.ClientID%>").scrollTop = h.value;
              }
   function SetDivPosition() {
           var intY = document.getElementById("<%=scrollArea.ClientID%>").scrollTop;
           var h = document.getElementById("<%=hfScrollPosition.ClientID%>");
           h.value = intY;
     }

  function afterpostback() {

            var h = document.getElementById("<%=hfScrollPosition.ClientID%>");
            document.getElementById("<%=scrollArea.ClientID%>").scrollTop = h.value;

     }

</script> 

 <asp:HiddenField ID="hfScrollPosition" runat="server" Value="0" />
 <div id="scrollArea" onscroll="SetDivPosition()"   runat="server"  style="height:225px;overflow:auto;overflow-x:hidden;"> 
```

在 Page_Load

```
if (Page.IsPostBack) {
    ScriptManager.RegisterClientScriptBlock(Page, this.GetType(), "CallJS", "afterpostback();", true);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-25T05:59:51.603

我没有很长的解释和任何解释，最重要的部分是这些代码适用于我的项目。

```
<script  type="text/javascript">
// This Script is used to maintain Grid Scroll on Partial Postback
var scrollTop;
//Register Begin Request and End Request 
Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(BeginRequestHandler);
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);
//Get The Div Scroll Position

function BeginRequestHandler(sender, args) 
{
var m = document.getElementById('divGrid');
scrollTop=m.scrollTop;
}
//Set The Div Scroll Position
function EndRequestHandler(sender, args)
{
var m = document.getElementById('divGrid');
m.scrollTop = scrollTop;
} 
</script> 
```

这是来自[http://www.codeproject.com/Articles/30235/Maintain-GridView-Scroll-Position-and-Header-Insid](http://www.codeproject.com/Articles/30235/Maintain-GridView-Scroll-Position-and-Header-Insid)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T13:48:54.177

你可以做你想做的事，但它需要在客户端使用 jQuery 之类的东西来完成。以下教程使用 jQuery 确定 GridView 控件中滚动条的值，然后在每次`$(document).ready`调用该函数时恢复该值。通过这种方式，您的滚动条将根据您的意愿重置到回发之前的位置。

[使用 jQuery 在 GridView 中轻松维护滚动位置](http://www.sergeyakopov.com/2010/11/easily-maintaining-scroll-position-in-gridview-using-jquery)

# excel - SSRS Excel Renderder, set up page break vertically in single sheet for printing rather than new tab

> ID：12092155
> 
> 赞同：1
> 
> 时间：2012-08-23T12:59:20.200
> 
> 标签：excel, printing, reporting-services

I have two tables in my ssrs report, I want to export those two tables in single sheet of excel but with page break so that if I do print preview, two different tables should be displyed in two different pages, even if first page has enough space to display the second table. How can I achieve this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T00:35:10.283

如果您的两个数据集具有相同的结构，您可以通过合并两个查询来完成此操作。只需添加一列来标识每个数据集，然后在新列上分页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:11:25.873

唉，这对于默认渲染器**是不可能的。**两个表之间要么有*分页符，要么**没有*，报表本身不知道如何呈现。Excel 将始终为分页符生成一个新选项卡，afaik。

有关（除其他外）分页符的更多信息，请参阅[相应的 msdn 文档。](http://msdn.microsoft.com/en-us/library/dd255244.aspx?ppud=4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-26T21:03:47.470

是的。你可以做到。选择您设置分页符的表格。然后按 F4 查看其属性。然后您可以在 PageBreak 标签下找到“已禁用”。使用表达式：

```
=Iif(Globals!RenderFormat.Name = "EXCELOPENXML" Or Globals!RenderFormat.Name = "EXCEL", True, False) 
```

然后将其导出到 Excel 中，它不会分成 2 页。

# jquery - Regex for Full Name Field in Jquery Validation

> ID：12092157
> 
> 赞同：0
> 
> 时间：2012-08-23T12:59:24.323
> 
> 标签：jquery, regex, jquery-validate

i have following method of Jquery Validation:

```
jQuery.validator.addMethod("alpha", function(value, element) {
    return this.optional(element) || value == value.match(/^[a-zA-Z]+$/);
},"Only Characters Allowed."); 
```

Now i am having problem that if i add a space between my name words it gives me error can anyone tell me what will be the Regex for checking a name which may have character inputs of A-Z,a-Z and also a space.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:11:11.340

全名*不规则*。我建议不要进行验​​证，而不要检查它是否为空。

不同文化中的不同名称看起来可能非常不同。您的模式中不包含大量特殊字符，它们很可能存在于名称中。即使是很常见的。

考虑

*   奥布莱恩
*   弗朗索瓦
*   林内
*   שְׂרוּ

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T08:59:41.903

```
$("#ValuationName").bind("keypress", function (event) {
    if (event.charCode!=0) {
        var regex = new RegExp("^[a-zA-Z ]+$");
        var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
        if (!regex.test(key)) {
            event.preventDefault();
            return false;
        }
    }
});

Try This 
```

# php - Cron invoked function looping till given time

> ID：12092158
> 
> 赞同：1
> 
> 时间：2012-08-23T12:59:32.300
> 
> 标签：php, cron

I am writing a task which will be ran by as a Cron Job. I want the function to check if a file has been downloaded to the server yet. The time stamp check is fine, however what is the best way to make the check loop run every 15 minutes? Could I use sleep and then check the current time stamp againsed the time stamp I want the loop to terminate (5am)?

Cheers.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:04:10.253

这就是 cron 所做的。Crontab 允许您设置运行脚本的时间间隔。很容易指定 15 分钟的间隔。这样您就不必担心睡眠或错误恢复或 php 脚本中的任何内容，只需担心您的逻辑。

[http://www.electrictoolbox.com/run-cron-command-every-15-minutes/](http://www.electrictoolbox.com/run-cron-command-every-15-minutes/)

# c# - 获取已发布 HTML 页面的快照？

> ID：12092159
> 
> 赞同：0
> 
> 时间：2012-08-23T12:59:35.900
> 
> 标签：c#, webclient, httprequest

我正在使用expertPDF 将几个网页转换为PDF，其中一个我遇到了困难。此页面仅在向其发布信息时呈现内容，并且内容是文本和 PNG 图形（图形是最重要的部分）。

`onload=''`我尝试在正文事件上创建一个带有“自动提交”的页面表单。如果我转到此页面，它会自动发布到第 3 方页面，并且我会按预期获得该页面。但是，如果页面被重定向，ExpertPDF 似乎不会拍摄“快照”。

我尝试使用 HTTPRequest/Response 和 WebClient，但只能检索不包括 PNG 图的 HTML。知道如何创建一个包含 HTML 和 PNG 图或发布到它的内存流，然后以某种方式将 ExpertPDF 发送到该 URL 以获取发布结果的快照吗？

非常感谢您的帮助 - 我花了太多时间尝试这个*嗅探*。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:10:43.533

在 HTML/HTTP 中，网页（HTML）是与其包含的任何图像分开的资源。因此，您需要解析 HTML 并找到指向您的图形的 URL，然后对该 URL 发出第二个请求以获取图像。（除非页面将图像内联吐出，这非常罕见，如果是这种情况，您可能不会问。）

快速浏览 ExpertPDF 的[常见问题](http://www.html-to-pdf.net/FAQ.aspx)页面，有一个常见问题解答问题*专门*针对您的问题。我建议你看看那个。

****更新****

看看第二个FAQ问题：

> 问：当我将 HTML 字符串转换为 PDF 时，外部 CSS 文件和图像不会应用到呈现的 PDF 文档中。

您可以从您那里获取原始（单个）响应`WebClient`并将其转换为字符串，然后根据该问题的答案将该字符串传递给 ExpertPDF。

# language-agnostic - Languages where 3 > 2 > 1 is true

> ID：12092163
> 
> 赞同：0
> 
> 时间：2012-08-23T12:59:49.700
> 
> 标签：language-agnostic, comparison

I have written a decimal floating point unit for LaTeX3 (pure macros... that was tough). In particular, I have to decide how `x < y < z` should be parsed. I see three options:

*   Treat `<` as a left-associative binary operator, so `x < y < z` would be equivalent to `(x < y) < z`. This is what `C` does: `-1 < 0 < 1` becomes `(-1 < 0) < 1`, thus `1 < 1`, which is `0`.

*   Treat `<` as a right-associative binary operator, so `x<y<z` would be equivalent to `x < (y < z)`. I see no advantage to that option.

*   When encountering `<`, read ahead for more comparison operators, and treat `x < y < z` as equivalent to `(x < y) && (y < z)`, where `y` would be evaluated only once. This is what most non-programmers would expect. And quite a few LaTeX users are non-programmers.

At the moment I am using the first option, but it does not seem very natural. I think that I can implement the second case whithout too much overhead. Should I?

Since that question is subjective, let me ask an objective question: what mainstream languages pick option 3? I'm interested in the details of what happens with mixed things like `a < b > c == d < e != f`. I'm also interested in other choices if they exist.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T14:11:27.600

**简短的回答：**只有当比较序列“指向同一个方向”并且你不使用`!=`.

**长答案：**在 Python 中，`3 > 2 > 1`计算结果为`True`. 但是，我不得不说使用的实现过于简单化，因为它允许像这样的表达式`a < b > c == d < e != f`，在我看来这是无意义的。该表达式[将被解释为](http://docs.python.org/reference/expressions.html#not-in) `(a < b) and (b > c) and (c == d) and (d < e) and (e != f)`。这是一个简单的规则，但因为它允许令人惊讶的结果，我不喜欢这种解释。

我提出了一个更可预测的选择：

*   考虑一个命题`xAyBzCw`。如果这个命题是“有道理的”，它等价于`xAy and yBz and zCw`。对于“感性”，有必要...

    *   值 ( `x`, `y`, `z`, `w`) 是同一集合的一部分`X`（或者它们的类型可以这样统一），并且
    *   关系[(](http://en.wikipedia.org/wiki/Binary_relation)`A` , `B`, `C`)[是](http://en.wikipedia.org/wiki/Transitive_relation) ,和`X`
    *   对于每对有序的关系`A`和`B`，都存在一个关系，`C`这`xAy and yBz`意味着`xCz`, `x`, `y`; `z`这种关系也受到这些限制。

关于最后一条规则，您希望能够说 that`1 < 2 = a < 4`等价于`1<2 and 2=a and a<4`，但也可以说`1<2 and 1<a and 1<4`. 要说后者，你必须知道如何`=`互动`<`。

你不能`!=`在我的选项中使用，因为它不是传递的。但是你也不能说`1 < 3 > 2`, `2 < 3 > 1`, or `1 < 3 > 1`, 除非你有一个`?`这样的关系`1?2`, `2?1`and `1?1`（基本上，这将是一个允许任何对的关系）。

从句法的角度来看：您希望将关系运算符视为特殊运算符（`+`更像是函数运算符），有点像您的第三个选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T14:29:15.080

[J](http://www.jsoftware.com)从右到左评估语句，以便：

```
3 > 2 > 1 
```

成为第一

```
2 > 1 
```

解析为真，表示为 1，因此：

```
3 > 1 
```

这也解析为真，因此为 1。相反的运算符`<`将导致错误，而整个语句恰好为真。所以你不再和 J 在一起了。

您的主要问题是您的初始代表：

```
3 > 2 > 1 
```

是人类的简写

```
(3 > 2) AND (2 > 1) 
```

因此，虽然提前阅读似乎很讨厌，但这确实是表示所需要的。除非当然有一些 Python 魔法，正如其他人所说的那样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T13:23:46.913

Python 链关系运算符。`in`当您点击and时，这会变得很有趣`is`，因为它们也被认为是关系型的。

```
>>> 1 < 2 in [True, False]
False
>>> 1 < 2 in [2, 4]
True 
```

# sql - Is this split function efficient, or is there better one?

> ID：12092166
> 
> 赞同：0
> 
> 时间：2012-08-23T12:59:55.847
> 
> 标签：sql, sql-server, sql-server-2008

I want a split function in SQL server. I came across this thread: [Cannot find either column "dbo" or the user-defined function or aggregate "dbo.Splitfn", or the name is ambiguous](https://stackoverflow.com/questions/2091830/cannot-find-either-column-dbo-or-the-user-defined-function-or-aggregate-dbo-s)

and I feel it is doing too many calculations using index etc. I wrote this function:

```
ALTER FUNCTION [dbo].[Split]
(
    @Data   varchar(8000),
    @Delimter   char(1) = ','
)
RETURNS @RetVal TABLE 
(
    Data    varchar(8000)
)
AS
Begin
    Set @Data = RTrim(Ltrim(IsNull(@Data,'')))
    Set @Delimter = IsNull(@Delimter,',')

    If Substring(@Data,Len(@Data),1) <> @Delimter
    Begin
        Set @Data = @Data + @Delimter
    End

    Declare @Len int = Len(@Data)
    Declare @index int = 1
    Declare @Char char(1) = ''
    Declare @part varchar(8000) = ''

    While @index <= @Len
    Begin

        Set @Char = Substring(@Data,@index,1)       
        If @Char = @Delimter And @part <> ''
        Begin
            Insert into @RetVal Values (@part)      
            Set @part = ''
        End
        Else
        Begin
            Set @part = @part + @Char
        End

        Set @index = @index + 1
    End

    RETURN;
End 
```

Can anybody comment which one is efficient? I will be using this function too much for splitting the data for one of my scrapping application and I want this to be efficient. Also please mention how did you measure it's efficiency.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:33:23.163

For some discussions on different string splitting methods and their efficiency, I tend to try to get people to stop trying to do this in T-SQL. You can spend hours fighting with inefficient functions to try and squeeze a few extra microseconds out of them, but it's an exercise in futility. T-SQL is inherently slow at this task and it's much better to go outside of T-SQL - either by using CLR (2005) or Table-Valued Parameters (TVPs) (2008+). I recently published a three-part series on this that is likely worth a read, and I suspect you'll come to the same conclusions I did (CLR is good, TVPs are better, and all T-SQL methods just look silly in comparison):

[http://www.sqlperformance.com/2012/07/t-sql-queries/split-strings](http://www.sqlperformance.com/2012/07/t-sql-queries/split-strings)

[http://www.sqlperformance.com/2012/08/t-sql-queries/splitting-strings-follow-up](http://www.sqlperformance.com/2012/08/t-sql-queries/splitting-strings-follow-up)

[http://www.sqlperformance.com/2012/08/t-sql-queries/splitting-strings-now-with-less-t-sql](http://www.sqlperformance.com/2012/08/t-sql-queries/splitting-strings-now-with-less-t-sql)

> Also please mention how did you measure it's efficiency.

Well, you can do what I did in those articles, select `SYSDATETIME()` before and after you run each test, and then calculate the difference. You can also log to a table before and after each test, or use Profiler to capture , or surround your test with:

```
SET STATISTICS TIME ON;

PRINT 'Test 1';

-- do test 1 here

PRINT 'Test 2';

-- do test 2 here

SET STATISTICS TIME OFF; 
```

You'll get output in the messages pane like:

```
Test 1

SQL Server execution times:
  CPU time: 247 ms, elapsed time: 345 ms

Test 2

SQL Server execution times:
  CPU time: 332 ms, elapsed time: 421 ms 
```

Finally, you can use our free tool, [SQL Sentry Plan Explorer](https://www.sqlsentry.net/plan-explorer/sql-server-query-view.asp). *(Disclaimer: I work for SQL Sentry.)*

You can feed any query into Plan Explorer, generate an actual plan, and in addition to a graphical plan that is much more readable than the showplan put out my Management Studio, you also get runtime metrics such as duration, CPU and reads. So you can run two queries and compare them side by side without doing any of the above:

![enter image description here](../Images/97523486fc9d5096698fa7bad8454a77.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T15:38:10.600

另一种不同的方法：

```
CREATE FUNCTION [dbo].[fGetTableFromList]
(
    @list VARCHAR(max), @delimiter VARCHAR(10)
)
RETURNS @table TABLE
(value VARCHAR(8000)) AS
BEGIN

DECLARE @list1 VARCHAR(8000), @pos INT, @rList VARCHAR(MAX);

SET @list = LTRIM(RTRIM(@list)) + @delimiter
SET @pos = CHARINDEX(@delimiter, @list, 1)

WHILE @pos > 0
    BEGIN
        SET @list1 = LTRIM(RTRIM(LEFT(@list, @pos - 1)))

        IF @list1 <> ''
            INSERT INTO @table(value) VALUES (@list1)

        SET @list = SUBSTRING(@list, @pos+1, LEN(@list))
        SET @pos = CHARINDEX(@delimiter, @list, 1)
    END
RETURN 
END 
```

`dbo.SplitString`在 CPU 时间上， ,`dbo.Split`和我的没有太大区别`dbo.fGetTableFromList`。我通过执行这个知道这一点：

```
SET STATISTICS TIME ON;

SELECT * FROM [dbo].[Split]('Lorem ipsum dolor sit amet,...', ' ');
SELECT * FROM [dbo].[SplitString]('Lorem ipsum dolor sit amet,...', ' ');
SELECT * FROM [dbo].[fGetTableFromList]('Lorem ipsum dolor sit amet,...', ' ');

SET STATISTICS TIME OFF; 
```

当然，尽可能多的时间执行记录，使用不同的输入进行测试，你会更准确地了解哪个函数执行得更好。

您还必须注意执行计划。删除`SET STATISTICS`句子并执行上面的三个查询，并告诉 SMSS 向您显示执行计划。

只需查看“执行计划”选项卡中提供的摘要，而不检查其详细信息，您就可以看到第一个，`Split`，正在花费预期工作的 13%，第二个，`SplitString`一个 60%，第三个，`fGetTableFromList`，又是 13%（其余的工作由`SELECT`s 花费）。

这是“虚拟”方式，不适用于 DBA。如果您需要准确或精确的基准测试，您应该尝试编写一些压力测试并提取简洁的结果（如@AaronBertrand 提供的链接中所示）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T14:04:02.667

@AnandPhadke，

我不明白你在用 CTE 做什么。这工作得很好：

```
Create function dbo.SplitString(@inputStr varchar(1000),@del varchar(5))
RETURNS @table TABLE(col varchar(100))
As
BEGIN

DECLARE @t table(col1 varchar(100))
INSERT INTO @t
select @inputStr

if CHARINDEX(@del,@inputStr,1) > 0
BEGIN
    ;WITH CTE1 as (
    select ltrim(rtrim(LEFT(col1,CHARINDEX(@del,col1,1)-1))) as col,RIGHT(col1,LEN(col1)-CHARINDEX(@del,col1,1)) as rem from @t
    union all
    select ltrim(rtrim(LEFT(rem,CHARINDEX(@del,rem,1)-1))) as col,RIGHT(rem,LEN(rem)-CHARINDEX(@del,rem,1))
    from CTE1 c
    where CHARINDEX(@del,rem,1)>0
    )

        INSERT INTO @table 
        select col from CTE1
        union all
        select rem from CTE1 where CHARINDEX(@del,rem,1)=0
    END
ELSE
BEGIN
    INSERT INTO @table 
    select col1 from @t
END

RETURN

END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T13:35:37.497

尝试这个：

```
CREATE function dbo.SplitString(@inputStr varchar(1000),@del varchar(5))
RETURNS @table TABLE(col varchar(100))
As
BEGIN

DECLARE @t table(col1 varchar(100))
INSERT INTO @t
select @inputStr

if CHARINDEX(@del,@inputStr,1) > 0
BEGIN
;WITH CTE as(select ROW_NUMBER() over (order by (select 0)) as id,* from @t)
,CTE1 as (
select id,ltrim(rtrim(LEFT(col1,CHARINDEX(@del,col1,1)-1))) as col,RIGHT(col1,LEN(col1)-CHARINDEX(@del,col1,1)) as rem from CTE
union all
select c.id,ltrim(rtrim(LEFT(rem,CHARINDEX(@del,rem,1)-1))) as col,RIGHT(rem,LEN(rem)-CHARINDEX(@del,rem,1))
from CTE1 c
where CHARINDEX(@del,rem,1)>0
)

INSERT INTO @table 
select col from CTE1
union all
select rem from CTE1 where CHARINDEX(@del,rem,1)=0
END
ELSE
BEGIN
INSERT INTO @table 
select col1 from @t
END

RETURN

END 
```

# html - Div won't auto size completely with auto height and inner Image

> ID：12092168
> 
> 赞同：0
> 
> 时间：2012-08-23T13:00:14.053
> 
> 标签：html, css, resize, height

I have a big absolute div that holds a smaller relative div. The smaller div wraps an Image (png) and auto sizes with height:auto. All works fine. But on one particular site, I get 5px of extra spacing at the bottom of the smaller div after the resize, like it over calculated the height needed? I assume I'm somehow inheriting something from the site that is impacting my resize and div container.

I reworked everything, clear floats, overflow, alternate positioning, removed auto option, flow, etc, but I can't seem to get rid of that 5px extra at the bottom, and its only on that site?

My question - how do you debug your height or auto height issues, and any idea what could be causing this?

Thanx, Chris

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:24:02.437

在容器 div 上：

`line-height: 0px;`将消除由空白引起的任何高度增加。

`padding: 0px;`将消除容器 div 内部的填充。

在图像上

`margin: 0px`将消除图像外部周围添加的任何空间。

您能否将我们指向该站点或 jsfiddle，以便我们更好地了解正在发生的事情？正如@RyanMcDonough 提到的，Chrome 的 Inspector 很棒。在 IE 中，您有 IE 开发人员工具栏。在 FF 中，您可以使用 Firebug（这是经典！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:02:43.477

我会使用 Chrome 的 Inspect Element 之类的东西，并查看影响它的 css 规则。

然后，您可以浏览所有元素并即时启用/禁用以查看影响它的因素。

[https://developers.google.com/chrome-developer-tools/](https://developers.google.com/chrome-developer-tools/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:15:27.750

尝试

```
font-size:0;
line-height:0 
```

对于较小的 div

示例[http://jsfiddle.net/U9z5K/14/](http://jsfiddle.net/U9z5K/14/)

或使用

```
display:block; 
```

对于图像

# git - Git submodules PyFlakes

> ID：12092172
> 
> 赞同：0
> 
> 时间：2012-08-23T13:00:26.683
> 
> 标签：git, vim, pyflakes

Hi folks I'm trying to power up my Vim, so I started to use plugins from GitHub, but after install [PyFlakes plugin](https://github.com/kevinw/pyflakes-vim) I got this error:

```
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "<string>", line 82, in check
  File "/usr/lib/pymodules/python2.7/pyflakes/checker.py", line 176, in __init__
    self.handleChildren(tree)
  File "/usr/lib/pymodules/python2.7/pyflakes/checker.py", line 267, in handleChildren
    for node in tree.getChildNodes():
AttributeError: 'Module' object has no attribute 'getChildNodes' 
```

I'm using PyFlakes as a submodule in my dotfiles repo so I cannot use `git clone --recursive` as suggested in the [issue 27](https://github.com/kevinw/pyflakes-vim/issues/27) on the plugin's GitHub. My Vim 7.3 compiled with Python support.

Can anyone help me with this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T20:42:10.593

我用这个命令修复它：

```
git submodule update --recursive 
```

只需要知道如何更新子模块:)

# linux - Sharing NFS4 mount accesed by multiple users

> ID：12092177
> 
> 赞同：-2
> 
> 时间：2012-08-23T13:00:35.950
> 
> 标签：linux, permissions, chmod, nfs

I'm trying to share a NFS mount among multiple users. I can't get it to work, because I always get access denied. I can mount the shares, but I can't see the files.

The export is made through Heartbeat+Pacemaker. I don't think that makes the difference, but here's the export config:

```
primitive exports_nfs_proys ocf:heartbeat:exportfs \
params rmtab_backup="none" directory="/export/proyectos" clientspec="172.16.54.0/24" options="rw,async,no_subtree_check,insecure,root_squash" fsid="2" \
op monitor interval="30s" \
op start interval="0" timeout="240s" 
```

So I mount the NFS share:

```
jorge.suarez@decp1304:~$ sudo mount -t nfs4 172.16.54.56:/proyectos/innovacion /mnt
jorge.suarez@decp1304:~$ cd /mnt
bash: cd: /mnt: Permission denied 
```

On the client:

```
$ stat /mnt
File: «/mnt»
Size: 3896          Blocks: 0          IO Block: 1048576 directorio
Device: 19h/25d Inode: 131542      Links: 2
Access: (6770/drwsrws---)  Uid: (65534/  nobody)   Gid: ( 3001/proyecto-innovacion)
Access: 2012-08-23 14:47:53.953641353 +0200
Modify: 2012-08-23 14:47:53.263610391 +0200
Change: 2012-08-23 14:47:53.263610391 +0200

jorge.suarez@decp1304:/$ getent group | grep proyecto-innovacion
gproyecto-innovacion:*:3001:diego,felix,jorge.suarez,maria
jorge.suarez@decp1304:/$ getent passwd | grep jorge.suarez
jorge.suarez:*:4004:2000:Jorge Suárez de Lis:/home/remoto/jorge.suarez:/bin/bash 
```

On the server:

```
root@ctserv01:/# stat /export/proyectos/innovacion
  File: «.»
  Size: 3896        Blocks: 0          IO Block: 4096   directorio
Device: fb04h/64260d    Inode: 131542      Links: 2
Access: (6770/drwsrws---)  Uid: (65534/  nobody)   Gid: ( 3001/proyecto-innovacion)
Access: 2012-08-23 14:47:53.953641353 +0200
Modify: 2012-08-23 14:47:53.263610391 +0200
Change: 2012-08-23 14:47:53.263610391 +0200

root@ctserv01:/# getent group | grep proyecto-innovacion
proyecto-innovacion:*:3001:diego,felix,jorge.suarez,maria
root@ctserv01:/# getent passwd | grep jorge.suarez
jorge.suarez:*:4004:2000:Jorge Suárez de Lis:/home/remoto/jorge.suarez:/bin/bash 
```

So, I'm doing something wrong, but all seems OK here. The UID/GID are matching on client and server.

If I set the directory permissions to 777 I can access, read and write the directory, but I want to restrict this just to some users so that's not an accepted solution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:00:14.873

确保在服务器和客户端上禁用 SELinux

确保在导出中使用以下选项

```
rw,sync,no_root_squash 
```

确保您允许正确的子网或主机名等。

# android - Java Android Eclipse 中的 FTP 客户端

> ID：12092190
> 
> 赞同：0
> 
> 时间：2012-08-23T13:01:26.643
> 
> 标签：android, ftp-client

首先 - 这是我在 StackOverflow 上提出的第一个问题。我来自德国，我的英语不太好:)

我尝试将 FTP 客户端创建为 Android 应用程序。我正在使用 Eclipse 和 Android SDK 进行编码。

这是我的代码，但它不起作用。我使用 Apache Commons FTP 库。你能帮助我吗？我不想要功能代码，但我喜欢获得建议以使代码正常工作。谢谢！

所以这是我的代码：

* * *

```
 import org.apache.commons.net.ftp.FTPClient;

    public class speechatStart extends Activity {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
            requestWindowFeature(Window.FEATURE_NO_TITLE);
            setContentView(R.layout.main);

    Button b1 = (Button) findViewById(R.id.bt_load);
    b1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            FTPClient client = new FTPClient(); 

            TextView ausgabe = (TextView) findViewById(R.id.ausgabe);

            try {
            client.connect("ftp-web.ohost.de");
            client.login("ftp1857836", "123456789"); 
                String filename = "file1.txt"; 
                FileInputStream fis = null; 
                    fis = new FileInputStream(filename); 
                    client.storeFile(filename, fis); 
                    client.logout(); 
                    fis.close();

                    ausgabe.setText(fis);

        } catch (SocketException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            ausgabe.setText("SocketException");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            ausgabe.setText("IOException");
        } 

        }
    }); 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:21:25.930

Apache-Commons FTP 库没有为我提供可靠的解决方案。所以我使用[了 ftp4j](http://www.sauronsoftware.it/projects/ftp4j/)，它给了我更好的解决方案，API 也很简单。

```
 Example:

    FTPClient client = new FTPClient();
    client.connect("ftp.host.com");
    if(client.isConnected())
    {
        client.login("username","password");
        if(client.isAuthenticated())
         {
              client.upload(new java.io.File("localFile.txt"));
          }
    } 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:48:23.483

如果要下载文件，请尝试下一个代码：

```
ftpClient.retrieveFile(filename, outputStream);
outputStream.flush();
outputStream.close();
ftpClient.logout();
ftpClient.disconnect(); 
```

将更改上传到

```
ftpClient.storeFile(filename, inputStream); 
```

似乎您在流关闭之前正在注销。

# c++ - c++ BWAPI异常访问冲突

> ID：12092196
> 
> 赞同：2
> 
> 时间：2012-08-23T13:01:45.177
> 
> 标签：c++, exception, access-violation

是否有人使用 BWAPI 在访问当前游戏的 Unit 对象时遇到访问冲突错误？

我确定该错误不在我的代码中..无论如何..我可以做些什么来避免访问冲突？

我有时会在下面的评论中遇到这个错误。。下面的代码执行了很多次，只是有时我会收到错误。

```
int Squad::getSize() {

    int no = 0;

    for (int i = 0; i < (int) agents.size(); i++) {

        BaseAgent* agent = agents.at(i);

        if (agent != NULL && agent->isAlive() && agent->getUnit() != NULL && !agent->getUnit()->isBeingConstructed()) // this line
            no++;
    }

    return no;
} 
```

这是我用来从向量中删除 BaseAgent 的代码。分析一下，看看我能不能做得更好：

```
void AgentManager::cleanup() {

    //Step 2\. Do the cleanup.
    int cnt = 0;
    int oldSize = (int)agents.size();
    for (int i = 0; i < (int)agents.size(); i++) {

        if (!agents.at(i)->isAlive()) {

            delete agents.at(i);

            agents.erase(agents.begin() + i);
            cnt++;
            i--;
        }
    }

    int newSize = (int)agents.size();
} 
```

BaseAgent 代码在此[链接上](http://codepad.org/0BpCpHYJ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:17:47.733

我推测这条线：

```
BaseAgent* agent = agents.at(i); 
```

正在返回一些未设置为的无效指针`0`。

查看您的`cleanup`代码，它看起来有点复杂。我会建议

1.  循环整个向量，删除死元素并将指针设置为`0`.

2.  在循环之后，使用[erase-remove 习惯用法](http://en.wikipedia.org/wiki/Erase-remove_idiom)从向量中删除所有`NULL`指针。

第1步

```
for (unsigned int i = 0; i < agents.size(); ++i) {
    if (!agents.at(i)->isAlive()) {
       delete agents.at(i);
       agents.at(i) = 0;
} 
```

第2步

```
agents.erase(std::remove(agents.begin(), agents.end(), 0), agents.end()); 
```

# android - android json（输出字符串和数组）解析

> ID：12092197
> 
> 赞同：0
> 
> 时间：2012-08-23T13:01:47.267
> 
> 标签：android, json, parsing

如何解析这个输出

```
{
    "durum": "tamam",
    "mahalleler": [
        {
            "mahalle_kodu": "1",
            "mahalle_ismi": "BEKTAŞ MAH."
        },
        {
            "mahalle_kodu": "2",
            "mahalle_ismi": "ÇARŞI MAH."
        }]} 
```

我尝试此代码但返回“null”。

```
 contacts = json.getJSONArray("mahalleler");

            for (int i = 0; i < contacts.length(); i++) {

                JSONObject c = contacts.getJSONObject(i);

                String name = c.getString("mahalle_kodu");
                String body = c.getString("mahalle_ismi");} 
```

问题是什么？json 输出有两个变量；mahalleler[] 和硬粒小麦。我想解析硬粒小麦的 valur 和 mahalleler 数组的值。但我不能那样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:13:55.467

```
 JSONObject json = new JSONObject("{
"durum": "tamam",
"mahalleler": [
    {
        "mahalle_kodu": "1",
        "mahalle_ismi": "BEKTAŞ MAH."
    },
    {
        "mahalle_kodu": "2",
        "mahalle_ismi": "ÇARŞI MAH."
    }]}
   ");

 String name[]
    String body[]

      JSONArray  contacts = json.getJSONArray("mahalleler");
         name=new String[contacts.length()];
      body  =new String[contacts.length()];

        for (int i = 0; i < contacts.length(); i++) {

            JSONObject c = contacts.getJSONObject(i);

             name[i] = c.getString("mahalle_kodu");
             body[i] = c.getString("mahalle_ismi");} 
```

我认为你没有得到 o/p，因为你在 for 循环中声明了字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:04:31.013

你必须像这样得到 json 数组

```
JSONArray mahallelerArray = c.getJSONArray("mahalleler"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:11:32.550

您需要检查内容是否在 json 中：

```
if (json != null && !json.isNull("mahalleler")) {
   JSONArray contacts = json.getJSONArray("mahalleler");

        for (int i = 0; i < contacts.length(); i++) {

            JSONObject c = contacts.getJSONObject(i);

            String name = c.getString("mahalle_kodu");
            String body = c.getString("mahalle_ismi");}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T13:18:41.383

`String`你在你的内部声明你的`for loop`. 使它们成为类变量数组以存储数据。

# pentaho - 列号变化的 CDE 表

> ID：12092198
> 
> 赞同：0
> 
> 时间：2012-08-23T13:01:51.003
> 
> 标签：pentaho, pentaho-cde

我们的仪表板中的表格组件有问题。为了进行延迟加载，我们使用了相同的表组件，并用我们的 mdx 查询中的数据填充它。问题是，在第一次加载数据时，每个查询都可以返回不同数量的列和表修复一个大小。我可以重新加载数据，但前提是列数相同。

简单来说，如何更改已初始化表中的列数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T03:04:40.000

将此功能放入 Pre Execute

```
function f() {
        this.chartDefinition.colHeaders = [];
        this.chartDefinition.colTypes = [];
        this.chartDefinition.colFormats = [];        
} 
```

希望这有帮助

# visual-studio - 使用 Visual Studio 2012 构建部署包

> ID：12092202
> 
> 赞同：9
> 
> 时间：2012-08-23T13:02:01.890
> 
> 标签：visual-studio, msbuild, visual-studio-2012, msdeploy

我们正在使用以下**msbuild**命令构建**Visual Studio 2010解决方案：**

 **```
msbuild MySolution.sln /p:DeployOnBuild=true;DeployTarget=Package 
```

此命令构建解决方案并为解决方案中的 Web 项目创建部署包。

但是在我们迁移到**Visual Studio 2012**之后，这个命令就不再起作用了。解决方案已构建，但未创建部署包。

如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T06:13:04.140

[问题与这个问题](https://stackoverflow.com/questions/4962705/msbuild-deployonbuild-true-not-publishing)完全相同。将 *C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web** 从本地计算机复制到远程 CI 服务器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-23T14:24:27.397

我手动使用这个，应该是匹配的 msbuild 参数

[使用发布 Web 向导创建部署包](http://msdn.microsoft.com/en-us/library/dd465323.aspx)**

# java - 在Java中以yyyymmddhhmmss.mmm格式递增日期

> ID：12092206
> 
> 赞同：0
> 
> 时间：2012-08-23T13:02:15.557
> 
> 标签：java, date

我想在每次迭代中以 yyyymmddhhmmss.mmm 格式增加任何给定日期的毫秒数。mmm 这里代表毫秒。我想在 Java 1.5 中执行这个操作。

例如：20120823151034.567 应该递增到 20120823151034.568

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T13:13:50.287

您可以使用`long`毫秒，这使得递增变得微不足道。

```
final String input = "20120823151034.567";
final DateFormat df = new SimpleDateFormat("yyyyMMddHHmmss.SSS");

Date d = df.parse(input);
d.setTime(d.getTime()+1);
System.out.println(df.format(d)); 
```

我不会使用日历，因为它非常慢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T13:03:47.427

您可以解析`String`为`Date`对象并使用`getTime()`和`setTime(long l)`修改日期。然后您可以将`Date`对象转换回`String`. 对于解析对象`String`并将其转换`Date`回`String`您可以使用`SimpleDateFormat`类。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T13:07:28.300

用于此操作的最佳类是[`Calendar`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html). 您将其设置为所需的日期，然后使用

```
myCalendar.add(Calendar.MILLISECOND, 1); 
```

将其提前一毫秒。用于[`DateFormat`](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/DateFormat.html)生成字符串表示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T13:08:02.697

这给了你你想要的。它将跨越任何日/月/年边界，以及处理夏令时的开始和结束。

```
 final String input = "20120823151034.567";
  final DateFormat df = new SimpleDateFormat("yyyyMMddHHmmss.SSS");
  final Calendar c = Calendar.getInstance();
  c.setTime(df.parse(input));
  c.add(Calendar.MILLISECOND, 1);
  System.out.println(df.format(c.getTime())); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T13:47:26.890

您可以为此使用日历类和日期类......

**日期类：**

```
final String dateStr = "20120823151034.567";
final DateFormat format = new SimpleDateFormat("yyyyMMddHHmmss.SSS");

Date date = format.parse(input);
date.setTime(date.getTime()+1);
System.out.println(format.format(date)); 
```

**日历类：**

```
final String dateStr = "20120823151034.567";
final DateFormat format = new SimpleDateFormat("yyyyMMddHHmmss.SSS");

Calendar c = Calendar.getInstance();
c.setTime(format.parse(dateStr ));
c.add(Calendar.MILLISECOND,1);
System.out.println(format.format(c.getTime())); 
```

在这两种情况下，format.parse() 都有可能抛出 ParseException，您需要捕获和处理它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T13:12:11.340

不使用日历的替代方案（尽管日历很好）

```
 final String input = "20120814120000.111";
 final DateFormat format = new SimpleDateFormat("yyyyMMddHHmmss.SSS");

 Date date = new format.parse(input);
 long time = date.getTime();

 Date incrementedDate = new Date(time + 1);
 System.out.println(format.format(date)); 
```

# jquery - 垃圾邮件机器人能够阅读此内容吗？

> ID：12092208
> 
> 赞同：0
> 
> 时间：2012-08-23T13:02:19.287
> 
> 标签：jquery, spam-prevention

正如标题所说，这是否可以防止垃圾邮件机器人获取联系方式：

```
$(document).ready(function(e) {
    $.each($('.cd'), function(i,v){
        $(this).html($(this).attr('html'));
    });
});

<div style="display:table-cell" class="cd" html="0123456789"></div> 
```

如果没有，还有其他建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:08:02.033

我最喜欢这样做的是：http: [//jsfiddle.net/ejwZJ/](http://jsfiddle.net/ejwZJ/)

# iphone - 如何在 Cocos2d CCLayer 中添加摇动手势？

> ID：12092216
> 
> 赞同：5
> 
> 时间：2012-08-23T13:02:52.373
> 
> 标签：iphone, cocos2d-iphone, gesture, shake

我尝试使用[摇动手势识别包装器](http://www.cocos2d-iphone.org/forum/topic/12216)来检测摇动手势。我还尝试实现[Geeky Lemon](http://www.youtube.com/watch?v=3kIEOW_7dIw)中建议的代码。但我无法处理摇晃手势。有什么方法可以识别摇晃手势吗？

谢谢！

**编辑1：**

代码是在摇动手势识别包装演示的帮助下完成的。

在初始化方法中

```
ShakeDispatcher * dispatcher = [ShakeDispatcher sharedInstance];
[dispatcher addShakeListener:self];    
[[[CCDirector sharedDirector]view] addGestureRecognizer:dispatcher];

-(void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event {  
    if ( event.subtype == UIEventSubtypeMotionShake ){      
        NSLog(@"Shake detected");   
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T22:55:42.640

以正常方式创建您的手势识别器，然后像这样添加它

```
[[[CCDirector sharedDirector] view] addGestureRecognizer:shakeGesture]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T04:43:28.110

你必须使用`ShakeEnabledUIWindow`而不是`UIWindow`. 在您`AppDelegate`需要导入文件并且需要为该窗口创建实例，例如

```
#import "ShakeEnabledUIWindow.h" 
```

然后为`ShakeEnabledUIWindow`

```
@property (strong, nonatomic) ShakeEnabledUIWindow *window; 
```

现在它可以工作了。试试这些[链接](http://www.softvelopment.com/index.php/blogs/2010/03/19/3-adding-shake-recongnition-to-cocos2d-iphone-library-)来实现你的`Shake Gesture`.

# android - android：在运行时动态转换方法

> ID：12092217
> 
> 赞同：0
> 
> 时间：2012-08-23T13:02:52.477
> 
> 标签：android, casting, android-activity

给定代码：

```
public class CommandSequence {

public CommandSequence() {
}

public void startCommunications(View v) {
    Bundle dataout1 = new Bundle();
    dataout1.putInt("ACTION", Communications.ACTION_LOAD_COMMAND_ONLY);
    dataout1.putInt("PORT", Commands.MESSAGE_TYPE_SMC);
    dataout1.putInt("COMMAND", Commands.SMC_RESETEVENTSTATUS);
    ((MainActivity) v.getContext()).sendMessageToBackgroundCommunicationsService(
        Communications.MESSAGE_LOAD_COMMAND,
        dataout1);
}
} 
```

我必须使用调用活动上下文（即“MainActivity”）转换“sendMessageToBackgroundCommunicationsService()”。

是否可以传递一个允许我在运行时强制转换方法调用的参数，以便可以从任何活动类调用此方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:08:27.043

为什么不创建一个所有活动都继承的基本活动类，然后在需要调用时转换为该类：

```
((MyBaseActivity) v.getContext()).sendMessageToBackgroundCommunicationsService(
    Communications.MESSAGE_LOAD_COMMAND,
    dataout1); 
```

[编辑] 事实上，为了让你的代码更好一点，你可以将活动传递给你的方法，这样就不需要你的类需要知道另一个类。

```
public void startCommunications(View v, Class myActivity) {
 //your code
} 
```

# wcf - s#arp 用于 wcf 服务/客户端的存储库构造函数注入

> ID：12092220
> 
> 赞同：0
> 
> 时间：2012-08-23T13:02:59.437
> 
> 标签：wcf, castle-windsor, s#arp-architecture, s#arp

我知道有 as#arp contrib 的 dll 集合，但没有太多文档（据我所知）。我打算在 wcf 服务（托管的控制台应用程序）中使用 s#arp 架构。有人可以提供一些代码来告诉我如何（构造函数）将存储库注入 wcf 服务/客户端吗？wcf 方法是否有类似于 asp.net mvc 中控制器操作的事务属性？谢谢。

PS：

北风示例：

[北风](https://github.com/sharparchitecture/Northwind)

据说包含一个示例，但下载的 vs 解决方案无法正确加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:06:50.753

有一段时间没有使用 WCF，但请按照此处的步骤操作：

[https://github.com/sharparchitecture/Sharp-Architecture-Contrib/wiki/preparing-your-application-to-use-attributes-with-Castle-facilities](https://github.com/sharparchitecture/Sharp-Architecture-Contrib/wiki/preparing-your-application-to-use-attributes-with-Castle-facilities)

您需要在应用程序开始时添加初始化代码。

无需下载 dll，只需使用 nuget 添加即可。从 nuget 包管理器控制台：

```
install-package SharpArchContrib.Core
install-package SharpArchContrib.Domain
install-package SharpArchContrib.Castle 
```

这里有一些关于事务属性的文档，它应该提供一个起点 WCF：

[https://github.com/sharparchitecture/Sharp-Architecture-Contrib/wiki/Transaction-attribute-%28supports-nhibernate-or-system.transaction.-works-with-asp.net%2C-wcf%2C-windows- gui-and-windows-service-applications%29](https://github.com/sharparchitecture/Sharp-Architecture-Contrib/wiki/Transaction-attribute-%28supports-nhibernate-or-system.transaction.-works-with-asp.net%2C-wcf%2C-windows-gui-and-windows-service-applications%29)

Chris Richards 发布了一个关于如何在 WCF 控制台应用程序中使用 SharpArch 的示例 [https://github.com/yellowfeather/TestWcfService](https://github.com/yellowfeather/TestWcfService)

# android - 单个 TableRow 中有两个复选框？

> ID：12092221
> 
> 赞同：0
> 
> 时间：2012-08-23T13:03:00.220
> 
> 标签：android, user-interface, checkbox, tablerow

我正在尝试将两个`CheckBoxes`组合成一个`TableRow`，以便它们并排放置。一旦我尝试加载视图，我的程序就会在运行时崩溃。

我以前将它们分别放在自己的行中，但想将它们更改为适合在同一行中。我搞砸了该`android:layout_width`功能，但无济于事。这是我为`TableRow`.

```
 <TableRow>
            <CheckBox 
                android:id="@+id/circleCloseCheck"
                android:text="@string/parameters_circle_close"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />

            <CheckBox
                android:id="@+id/nwpCheck"
                android:text="@string/parameters_nwp_check"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />
        </TableRow> 
```

这是我的 LogCat ...

```
08-23 08:59:20.760: W/dalvikvm(27494): threadid=1: thread exiting with uncaught exception (group=0x40015560)
08-23 08:59:20.768: E/AndroidRuntime(27494): FATAL EXCEPTION: main
08-23 08:59:20.768: E/AndroidRuntime(27494): java.lang.RuntimeException: Unable to start activity ComponentInfo{my.eti.commander/my.eti.commander.Parameters}: java.lang.ClassCastException: android.widget.CheckBox
08-23 08:59:20.768: E/AndroidRuntime(27494):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
08-23 08:59:20.768: E/AndroidRuntime(27494):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-23 08:59:20.768: E/AndroidRuntime(27494):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-23 08:59:20.768: E/AndroidRuntime(27494):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-23 08:59:20.768: E/AndroidRuntime(27494):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-23 08:59:20.768: E/AndroidRuntime(27494):    at android.os.Looper.loop(Looper.java:130)
08-23 08:59:20.768: E/AndroidRuntime(27494):    at android.app.ActivityThread.main(ActivityThread.java:3683)
08-23 08:59:20.768: E/AndroidRuntime(27494):    at java.lang.reflect.Method.invokeNative(Native Method)
08-23 08:59:20.768: E/AndroidRuntime(27494):    at java.lang.reflect.Method.invoke(Method.java:507)
08-23 08:59:20.768: E/AndroidRuntime(27494):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-23 08:59:20.768: E/AndroidRuntime(27494):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-23 08:59:20.768: E/AndroidRuntime(27494):    at dalvik.system.NativeStart.main(Native Method)
08-23 08:59:20.768: E/AndroidRuntime(27494): Caused by: java.lang.ClassCastException: android.widget.CheckBox
08-23 08:59:20.768: E/AndroidRuntime(27494):    at my.eti.commander.Parameters.populateArrayLists(Parameters.java:534)
08-23 08:59:20.768: E/AndroidRuntime(27494):    at my.eti.commander.Parameters.onCreate(Parameters.java:54)
08-23 08:59:20.768: E/AndroidRuntime(27494):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-23 08:59:20.768: E/AndroidRuntime(27494):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-23 08:59:20.768: E/AndroidRuntime(27494):    ... 11 more 
```

编辑 ：

这是我的 Parameters.java 文件中第 534 行的信息。第 534 行是`wattVarCurrentSpinner = (Spinner) findViewById( R.id.wattVarCurrentSpinner`.

```
 wattVarCurrentRelayList = new ArrayList<String>();
    wattVarCurrentRelayList.add( "N/A" );
    for( int i = 1; i <= 100; i++ ) {
        double temp = (i/10.0);
        wattVarCurrentRelayList.add( String.valueOf( temp ) );
    }
    wattVarCurrentSpinner = (Spinner) findViewById( R.id.wattVarCurrentSpinner );
    if( RelayAPIModel.AppPrefsType.displayUnits.equals( "Relay" ) ) {
        wattVarCurrentAdapter = new ArrayAdapter<String>( this, android.R.layout.simple_spinner_item, wattVarCurrentRelayList );
    } else if( RelayAPIModel.AppPrefsType.displayUnits.equals( "Protector" ) ) {
        wattVarCurrentAdapter = new ArrayAdapter<String>( this, android.R.layout.simple_spinner_item, wattVarCurrentProtectorList );
    } else if( RelayAPIModel.AppPrefsType.displayUnits.equals( "Percent" ) ) {
        wattVarCurrentAdapter = new ArrayAdapter<String>( this, android.R.layout.simple_spinner_item, wattVarCurrentPercentList );      
    } else {
        RelayAPIModel.AppPrefsType.displayUnits = "Relay";
        wattVarCurrentAdapter = new ArrayAdapter<String>( this, android.R.layout.simple_spinner_item, wattVarCurrentRelayList );
    }
    wattVarCurrentAdapter.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );
    wattVarCurrentSpinner.setAdapter( wattVarCurrentAdapter ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:08:43.580

每个复选框中应该是 android:layout_width="wrap_content" ；您还应该将 android:layout_weight="1.0" 添加到每个复选框

完美的例子在这里：所以[回答](https://stackoverflow.com/questions/2698817/linear-layout-and-weight-in-android/6596597#6596597)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:10:08.570

我想您忘记为**TableRow**添加 layout_width 和 layout_height 还需要将复选框 layout_width 更改为“wrap_content”

```
 <TableRow
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <CheckBox
        android:id="@+id/circleCloseCheck"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/parameters_circle_close" />

    <CheckBox
        android:id="@+id/nwpCheck"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/parameters_nwp_check" />
</TableRow> 
```

# css - 更改 .control-group 行之间的边距

> ID：12092222
> 
> 赞同：1
> 
> 时间：2012-08-23T13:03:09.207
> 
> 标签：css, twitter-bootstrap, margin

我想更改行之间的边距。这是我的开始：

### [JSFiddle](http://jsfiddle.net/4Z2DB/)

默认值太多了。在**bootstrap.css**中，我只看到 classes `.control-group.warning`、`.control-group.error`等，但没有`.control-group`main 样式。

我应该如何改变它？

* * *

## 编辑

我发现这改变了它：

```
.control-group {
  margin-top: -8px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T14:06:31.810

无需使用负边距。以下是诀窍：

```
.form-horizontal .control-group {
  margin-bottom: 12px;
}​ 
```

### [JSFiddle](http://jsfiddle.net/mmfansler/A4J3L/)

此外，除非您正在对 CSS 进行大修（在这种情况下，您可能应该使用 LESS），通常更好的做法是不编辑**bootstrap.css**，并将您的覆盖添加到**styles.css**文件中。这样，您可能会利用 CDN（例如[BootstrapCDN](http://www.bootstrapcdn.com/)）。

# php - 发布 HTML 表单后重定向

> ID：12092226
> 
> 赞同：0
> 
> 时间：2012-08-23T13:03:38.333
> 
> 标签：php, javascript, redirect, post

在发布 HTML 表单后是否有重定向用户？

我有一个看起来像这样的表格

```
 <form action="/URL/" method="post">
     <input type="radio" name="answer" value="W" />W<br />
     <input type="radio" name="answer" value="X" />X<br />
     <input type="radio" name="answer" value="Y" />Y<br />
     <input type="radio" name="answer" value="Z" />Z<br />
     <input type="submit" />
 </form> 
```

无论如何，我可以在用户单击提交按钮后将用户重定向到新页面吗？我发现了一些 javascript，但这似乎阻止了帖子的工作：S

干杯!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T13:06:20.417

如果您使用的是 PHP，请在服务器上执行：

```
if( isset( $_POST['answer'])) {
    header( 'Location: http://www.example.com/newurl');
    exit();
} 
```

请注意，您应该在`header()`调用中使用完整的 URL，并且在这种情况下您可能希望`exit()`在调用之后`header()`使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T13:05:11.657

您可以使用简单的 php`header('yourlocation.php');`将它们从表单中移开。

即使您的 header() 位于 php 文件的顶部，您的表单操作指向的 PHP 仍将继续执行。

标头重定向将处理用户点击刷新 - 它已经将它们移动到发送表单数据的位置，因此即使它们刷新，它也会再次打开页面而无需任何表单提交。

一个例子如下：

```
<?php
/* This will give an error. Note the output
 * above, which is before the header() call */
// Process Form Data, insert to database, whatever you want... then
header('Location: http://www.example.com/');
?> 
```

然后用户最终访问 wwww.example.com，他们可以随意刷新垃圾邮件，但所有处理都已经发生。它不会重新发送信息（或再次处理他们的付款或其他任何事情）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T13:05:57.330

是的，使用重定向标头：

```
header("Location: http://new.location.com/w00t"); 
```

这必须在发送任何输出之前调用。

请注意，标头调用**之后**的所有内容仍将执行！因此，您需要`die()`或`exit()`之后才能防止意外结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T13:07:13.227

您可以简单地指定提交后表单的 URL。

```
<form action="http://localhost/redirected.php" method="post"> 
```

您可以使用 PHP 检查表单是否已提交，然后重定向：

```
if (isset($_POST['answer']))
    header('Location: redirect.php'); 
```

您可以使用 javascript/jquery 来实现这一点。

```
$('#submit_button').click(function () {
    // do everything with variables
    window.location = 'redirect.php';
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T13:05:19.643

是的，只需使用 ajax 发布数据，然后使用`window.location = 'http://xxxx.com'`将用户重定向到您选择的位置。这是假设您要重定向用户而不使用服务器端位置标头（如发布的其他标头）。

# html - 内联块与其容器之间的额外间隙

> ID：12092228
> 
> 赞同：0
> 
> 时间：2012-08-23T13:03:49.923
> 
> 标签：html, css

我的代码是

**HTML：**

```
<div id = "container">
  <div id = "content">
      Text
  </div>
</div> 
```

**CSS：**

```
div {
  border: 1px solid;
}

#container {
   display: block;
   width: 100%;
   height: 60px;
   margin: 0;
   padding: 0;
   font-size: 24px;
}

#content {
   display: inline-block;
   vertical-align: middle;
} 
```

**现场演示：[jsFiddle](http://jsfiddle.net/Ry2DY/)**

有同样的问题`line-height: 60px`：[jsFiddle](http://jsfiddle.net/7kJtq/)和居中 div：[jsFiddle](http://jsfiddle.net/VQWhs/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:35:32.840

`font-size: 0;`为父容器和子容器设置`font-size: your_size;`。

修改示例：http: [//jsfiddle.net/Ry2DY/2/](http://jsfiddle.net/Ry2DY/2/)

# regex - 如何仅使用正则表达式而不使用其他工具来提取匹配模式

> ID：12092231
> 
> 赞同：0
> 
> 时间：2012-08-23T13:03:52.837
> 
> 标签：regex

我需要编写一个正则表达式，在看到`"aaa"`代码后，这个正则表达式应该只打印 6 位代码，而不是整行。一行中只有一个 6 位代码，在`"aaa"`.

我不能使用`sed`, `awk`, `grep`... 等。我的应用程序只接受正则表达式。

例子：

```
x aaa    y z    123456          returns  123456

aaa  x  654321   y z            returns  654321 
```

`[\d]{6}`我用反向引用尝试了这个正则表达式，但不知道如何不重复

```
(.*)(aaa)(.*)[\d]{6}((?(2)[\d]{6}|.+) 
```

但它会打印整行。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:12:26.860

你可以做类似的事情

```
aaa.+?(\d{6}) 
```

然后只返回第一组（带`\1`）

您还可以将反向引用与不同的正则表达式一起使用：

```
(?<=aaa.+?)\d{6} 
```

这意味着您需要 aaa 和任何其他字符之后的前 6 位数字。不幸的是，许多语言不支持可变长度反向引用，所以我会选择第一个

# jquery - 验证引擎插件的错误提示位置问题（绝对位置）

> ID：12092238
> 
> 赞同：4
> 
> 时间：2012-08-23T13:04:24.323
> 
> 标签：jquery, css, jquery-validation-engine

我正在使用[**Position Absolute 的验证引擎**](https://github.com/posabsolute/jQuery-Validation-Engine)来验证表单上的值。

问题是在验证时，错误提示不会像预期的那样附加到文本框（输入类型：文本）。我知道问题出在我给文本框的边距顶部，但我无法改变它。此处提供了示例代码片段...

html:

```
<form id="frmTest" style="position:relative">
    <div id="divContents" style="position:relative; overflow-y:auto; overflow-x:none;">
        <div class="row1">
            <span>FName:</span>
            <input id="txtFName" data-prompt-position="bottomRight" class="validate[required] text-input" tabindex="1" />
        </div>
        <div class="row2">
            <span>LName:</span>
            <input id="txtLName" class="validate[required] text-input" tabindex="2" />
        </div>
        <div class="row3">
            <span>Age:</span>
            <input id="txtAge" class="validate[required, custom[integer],min[1]] text-input" tabindex="3" />
        </div>
    </div>

        <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
    <input type="submit" id="btnSubmit" value="Submit" />
</form> 
```

JS：

```
$('#frmTest').validationEngine();

$('#txtFName').focus();

$('#btnSubmit').click(function(){
    return $('#frmTest').validationEngine();
}); 
```

[**js小提琴**](http://jsfiddle.net/NCB39/17/)。

我创建的 div 只是示例，但在实际环境中，它们是可折叠的 div。另外，我不想为每个输入字段硬编码 data-prompt-position 值，因为每个表单中有超过 100 个字段。所以我正在寻找一种处理这个问题的通用方法（我知道这可以通过 CSS 但不知道如何？）

有问题的演示设置在[**www.x-lant.com**](http://www.x-lant.com)

使用**guest** / **pwd**登录应用程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T07:54:55.767

我只是在js中使用了这段代码

```
$('#frmTest').validationEngine({promptPosition : "bottomRight"}); 
```

这在css中

```
.formError{margin-top: 15px!important;} 
```

它看起来不错。更新的小提琴在[这里](http://jsfiddle.net/7zkgR/5/)。

我希望这可以帮助你。

**HTML**

```
<!DOCTYPE html>
    <html>
    <head>
        <title>Demo</title>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    </head>
    <body>

    <form id="frmTest" style="position:relative">
        <div id="divContents" style="position:relative; overflow-y:auto; overflow-x:none;">
            <div class="row1">
                <span>FName:</span>
                <input id="txtFName" data-prompt-position="bottomRight" class="validate[required] text-input" tabindex="1" />
            </div>
            <div class="row2">
                <span>LName:</span>
                <input id="txtLName" class="validate[required] text-input" tabindex="2" />
            </div>
            <div class="row3">
                <span>Age:</span>
                <input id="txtAge" class="validate[required, custom[integer],min[1]] text-input" tabindex="3" />
            </div>
        </div>
        <input type="submit" id="btnSubmit" value="Submit" />
    </form>
    </body>
    </html>​ 
```

**CSS**

```
body
{
    margin: 0 auto;
    font-family: Arial;
    font-size: 12px;
    line-height: 20px;
}

div.row1, div.row2, div.row3
{
    min-height: 100px;
}

span
{
    clear: both;
    float: left;
    margin-left: 10px;
    padding: 20px 5px 0 20px;
    width: 50px;
}

#txtFName, #txtLName, #txtAge
{
    margin-top: 20px;
}

input[type=text]
{
    width: 150px;
}
.formError{
    margin-top: 15px!important;
} 
```

**​JS**

```
$('#frmTest').validationEngine({promptPosition : "bottomRight", autoPositionUpdate: true});

$('#txtFName').focus();

$('#btnSubmit').click(function(){
    return $('#frmTest').validationEngine();
});
​ 
```

[此外，这里](https://github.com/posabsolute/jQuery-Validation-Engine)还有更多文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-08T05:15:18.097

打开 jquery.validationEngine.js

并转到

```
// LEAK GLOBAL OPTIONS
    $.validationEngine = {
        fieldIdCounter: 0, defaults: {
// topRight, bottomLeft, centerRight, bottomRight, inline
promptPosition: "topLeft", 
```

设置你的位置

# reporting-services - SSRS 报告的访问方法

> ID：12092239
> 
> 赞同：0
> 
> 时间：2012-08-23T13:04:28.737
> 
> 标签：reporting-services, sql-server-2012

我目前正在使用 SQL Server 2012 中的 Reporting Services。我知道访问报告的最常见可能性之一是使用 SSRS 本身的 Web 服务器及其 Web 服务。我的问题是：我们是否有其他可能访问这些报告，例如从我们自己的服务器上的网页，例如 IIS 或 Apache？我们还需要这个与 SSRS 集成的 Web 服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:34:20.727

Sounds like you are looking for this document specifying [methods applications can use SSRS](https://docs.microsoft.com/en-us/sql/reporting-services/application-integration/integrating-reporting-services-into-applications). It provides links on how you can implement three methods of server access:

*   Using the web service
*   the ReportViewer control
*   URL access.

URL access can be very easy to implement, you can get the resulting report as a stream and pass it on to the client, save it, display it, &c.

Note that even Report Manager is built using these methods.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:01:37.060

有两种方法可以访问报告：从 SSRS Web 服务器或从 SharePoint。

请注意，您始终可以创建一个 Web 应用程序，从 SSRS 中提取报告列表并使用 SSRS Web 服务按您的意愿显示这些报告。

# c# - 将文件写入 HttpResponse，浏览器不提示保存

> ID：12092243
> 
> 赞同：5
> 
> 时间：2012-08-23T13:04:35.820
> 
> 标签：c#, javascript, asp.net, ajax, ashx

我有一个带有 IHttpHandler 的 ashx 文件。当我向这个 IHttpHandler 发布一些数据时，我会做一些工作，创建一个文件，然后希望将该文件返回给用户，以便他们可以通过浏览器保存文件。

创建文件后，这就是我尝试将文件写回响应的方式：

```
HttpResponse response = context.Response;
response.ClearContent();
response.Clear();
response.ContentType = "application/octet-stream";
response.AddHeader("Content-Disposition", "attachment; filename=MYFILE.EXT");
response.WriteFile("C:\tempstuff\MYFILE.EXT"); 
```

在稍后的 finally 块中，我将调用：

```
response.End() 
```

当我调用这个处理程序时，什么也没有发生。返回响应 200，不抛出任何错误 - 但浏览器不会提示用户保存此文件。

Fiddler 捕获的响应如下所示：

```
HTTP/1.1 200 OK
Server: ASP.NET Development Server/10.0.0.0
Date: Thu, 23 Aug 2012 12:12:19 GMT
X-AspNet-Version: 4.0.30319
Content-Disposition: attachment; filename=MYFILE.EXT
Cache-Control: private
Content-Type: application/octet-stream
Content-Length: 781053
Connection: Close

[raw content of the file here] 
```

这个回答对我来说是正确的。它包含文件的内容 - 但是在任何主要浏览器下，都没有文件对话框提示我保存文件。

我在这里做错了什么？

**更新：**如果有帮助，这里是我使用 Web 应用程序中的 JavaScript 调用此 HttpHandler 的地方。

```
$.ajax({
    type: 'POST',
       url: ashxUrl,
       data: postData,
       success: function (result) {
           // Doin' stuff on success
       },
       error: function (error) {
           // Doin' stuff on error.
        }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T14:02:53.483

您已经说过您希望将网络调用的结果提供给您的 javascript。如果这导致浏览器提示您保存它，那将是非常烦人的，因为那时所有的 AJAX 都将是不可能的。

您希望浏览器本身进行调用。对于 GET 来说，这将是一个简单的设置问题`self.location.href`。对于 POST，最简单的方法通常是用数据填写隐藏表单，然后再填写`submit()`。

# c# - 如何使用 C# 中的复合格式制作我自己的类似于 String.Format 的方法

> ID：12092245
> 
> 赞同：24
> 
> 时间：2012-08-23T13:04:37.507
> 
> 标签：c#, resharper, syntax-highlighting

我喜欢 String.Format 如何使用参数将变量注入到它正在格式化的字符串中。这称为复合格式化，并由 MSDN [here](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)讨论。

我希望我的日志外观具有此功能：

```
string foo = "fancy";
string bar = "message";
log.Debug("My {0} log {1}.", foo, bar) 
```

我的 ILoggerFacade 具有以下方法签名：

```
void Debug<T>(T message, params Object[] args); 
```

而且，我知道我可以很简单地实现这一点：

```
ILog m_Log = \\some logging implementation
public void Debug<T>(T message, params Object[] args)
{
    m_Log.Debug(String.Format(message, args));
} 
```

但是，在 Visual Studio 中，我没有得到 {0}、{1}、... 参数的花哨突出显示：

![复合格式方法的参数突出显示](../Images/48258f24f5cf5295c6b996aaae882e58.png)

我猜是 ReSharper 对他们负责，而且它似乎只是忽略了格式化参数并且没有提供“智能感知”帮助。这并不好，因为将使用外观的其他开发人员会期待这一点。

如何为自定义格式化方法获得参数突出显示和“智能感知”，类似于这些方法的工作方式：

```
Console.WriteLine(...)
String.Format(...)
etc... 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-23T13:07:11.133

查看 ReSharpers[外部注释](http://www.jetbrains.com/resharper/webhelp/Code_Analysis__External_Annotations.html)。具体来说，您想为此使用[StringFormatMethodAttribute](http://www.jetbrains.com/resharper/webhelp/Code_Analysis__String_Formatting_Methods.html)。

要使用外部注释，实际上有 3 种方法。两个是它说明的，一个是你必须在字里行间阅读才能看到的。

1.  参考“JetBrains.Annotations.dll”。我会建议反对这个。我不喜欢复制 DLL 或必须引用 ReSharper 安装目录的想法。如果您升级或重新安装，这可能会导致问题。

2.  将属性声明复制并粘贴到您的解决方案中。我推荐这个，因为它可以让你有更多的控制权。此外，您可以摆脱 ReSharper（为什么有人会这样做？我猜发生了奇怪的事情。），并且仍然向使用您的库的任何人提供此功能。第一个链接中有关于如何执行此操作的分步说明。

3.  创建一个类似于用于 .NET 程序集的 XML 文件。我为 Silverlight 单元测试框架做了这个。默认情况下，ReSharper 无法识别这些测试。

    去做这个

    1.  创建一个文件名`<assembly>.xml`并将其放在“ReSharper\vXX\Bin\ExternalAnnotations”中。
    2.  添加根元素`"<assembly name="<assembly>">`
    3.  `<member>`现在为要赋予属性的每个成员添加元素。

    我不建议对您自己的代码执行此操作。但是，如果您有一个想要具有此功能但无法编辑的程序集，则可以这样做。这仅适用于您的机器，并且每个使用该程序集的开发人员都需要复制 xml 文件。

# csv - 数据适配器填写的CSV文件是否为空

> ID：12092252
> 
> 赞同：1
> 
> 时间：2012-08-23T13:05:02.773
> 
> 标签：csv

私有数据表 GetDataFromCSV() {

```
 System.Data.DataTable dtExecChanges = new System.Data.DataTable("exec_changes");

        string dirName = Path.GetDirectoryName(sInputFileName);          

        using (OleDbConnection cn =
            new OleDbConnection(@"Provider=Microsoft.Jet.OleDb.4.0;" +
                    "Data Source=" + dirName + ";" +
                    "Extended Properties=\"Text;HDR=Yes;FMT=Delimited\""))
        {
            // Open the connection 
            cn.Open();

            // Set up the adapter 
            using (OleDbDataAdapter adapter =
                new OleDbDataAdapter("SELECT * FROM " + (sInputFileName.Substring(sInputFileName.LastIndexOf("\\") + 1)), cn))
            {                    
                adapter.Fill(dtExecChanges);
            }

            cn.Close();
        } 
```

当我填写我的数据表 dtExecChanges 时，它会出错，因为我的 CSV 文件是空的。有没有办法检查选择查询实际上是在获取由数据表填充的任何行 b4 吗？

# jquery - 在使用 jquery 回发后保留一个类

> ID：12092259
> 
> 赞同：1
> 
> 时间：2012-08-23T13:05:22.760
> 
> 标签：jquery

我有以下内容：

```
function pageLoaded() {

    $(".panel-dividers").click(function () {
            $(this).parent().toggleClass("collapsed");
            return false;
        });
}); 
```

使用 jquery 回发后，如何让类在 div 中折叠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:09:50.903

您将无法做到这一点，因为 jQuery 是客户端，它不记得在页面刷新之前在 DOM 中所做的任何更改。

当页面刷新时，它会重新加载整个 DOM。

您可以考虑使用[**JSON 进行回发**](http://softwarecycling.com/post/2861344855/json-postbacks-with-mvc)

还有另一种使用[**DOM Storage**](https://developer.mozilla.org/en-US/docs/DOM/Storage)的方法，正如@Jitendra 所建议的那样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:12:40.810

将服务器端指示器带入 jquery 并对其进行测试。

```
function pageLoaded() {

    var my_server_side_indicator_of_collapsed_state = <INSERT SERVER SIDE STUFF> (eg. <?php echo my_var; ?>)

    if( my_server_side_indicator_of_collapsed_state === TRUE ){
        $(this).parent().toggleClass("collapsed");
    }

    $(".panel-dividers").click(function () {
            $(this).parent().toggleClass("collapsed");
            return false;
        });
}); 
```

或者，您可以使用 AJAX 方法并在成功回调中返回一个指示器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:21:23.060

使用 cookie 或将切换存储在服务器上，以便可以将其重新呈现为首选项。

最简单的（并且对每个用户设置的干扰也很小）是使用 cookie。使用[`$.cookie`](https://github.com/carhartl/jquery-cookie)并将其添加到您的点击代码以存储首选项（然后在页面加载时调用这些首选项并相应地 show.hide）将是一个不错的选择 -**但是**这需要标题具有一些唯一的 ID，否则它就是全部 -或无设置。

为了进一步澄清，如果您在页面加载时显示了 3 个标题，并且您在其中一个上单击隐藏，则 cookie 可能被设置为隐藏。下一页加载所有元素都被隐藏了，因为没有说 [first|second|third] 元素是点击的那个。

## 更新

如果您在面板上没有 ID，并且无法制作或不想制作任何 ID，则可以使用[以下代码](http://jsfiddle.net/QLdDW/1/)使其工作。然而，一个警告是，只要面板的顺序不变，它就可以工作（因为 ID 是由 jQuery 在加载时生成的，而不是服务器给出的固定 ID）。

```
$('.panel-divider').each(function(id){
    var $this = $(this),
        $parent = $this.parent(),
        className = 'collapsed',
        cookieName = [className,id].join('-');

    if ($.cookie(cookieName) === className){
        $parent.addClass(className);
    }

    $this.on('click',function(){
        $parent.toggleClass(className);
        if ($parent.hasClass(className)){
            $.cookie(cookieName, className);
        }else{
            $.removeCookie(cookieName);
        }
    });
}); 
```

同样，[这是一个工作示例](http://jsfiddle.net/QLdDW/1/)（当 jsFiddle 加载时，单击灰色标题以切换面板。然后，`Run`再次点击按钮，页面将重新加载保存的设置。泡沫，冲洗，重复。

# php - 未设置数组时 php 开关的行为

> ID：12092260
> 
> 赞同：0
> 
> 时间：2012-08-23T13:05:23.170
> 
> 标签：php, optimization, switch-statement, default-value

因此，我试图更好地了解 switch 在未设置数组时的作用以及是否应该使用`isset()`和/或`default:`

例如，我目前正在使用的代码：

```
$parameters['sort'] = NULL;

if(isset($parameters['sort'])) {

    switch($parameters['sort'])
    {
        case 'relevance':
            $parameters['sort'] = 'rating';
        break;
        case 'published':
            $parameters['sort'] = 'updated';
        break;
        case 'views':
            $parameters['sort'] = 'viewCount';
        break;
    }

} 
```

**注意：**我知道`break;`没有正确的缩进（应该如下），但这是我喜欢在`switch()`.

**注意2：**我只是在审查我的代码以修复错误并改进它，同时更好地了解应该如何正确实现/使用事物

```
 case 'relevance':
        $parameters['sort'] = 'rating';
        break; 
```

所以我的问题是，我应该添加额外的`default`并删除`if()`还是继续使用它，`if()`因为它没有引起任何问题？两者都使用没有任何意义！

```
 default:
        $parameters['sort'] = '';
    break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:12:15.083

`default`在检查所有先前的比较后将选择该选项。如果默认将是最常见的选择并且代码将被大量执行，我认为您应该坚持使用 if 子句，并且您不必相信任何自动优化来节省您的处理器时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:13:02.767

Well, the thing is whether You want to do if value is not found in any of cases. If You don't, then You can skip default case, but if there is stuff to do even if value is not specified, then use default case.
But I must say, that using default case is good practice, at least logging error/unspecified usage or printing error to screen.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:11:32.517

这是个人喜好，但我个人会删除 if 语句并将默认值添加到 switch 中。

这背后的主要原因是因为如果你像刚才那样使用它（使用 if 语句），并且`$parameters['sort']`等于你在 switch 中定义的 3 以外的东西，那么你就会遇到问题。而如果定义了默认值，那么在这些情况下，它将始终知道默认值是什么。

# javascript - 如果任何一个孩子获得焦点，则防止触发模糊事件

> ID：12092261
> 
> 赞同：53
> 
> 时间：2012-08-23T13:05:35.570
> 
> 标签：javascript, jquery, knockout.js, onblur

我在页面上有一个 div，显示有关特定类别（图像、名称等）的一些信息。

当我单击编辑图像时，它会将类别置于编辑模式，允许我更新名称。从下图中可以看出，“Soup”当前处于编辑模式，其他处于正常视图模式。这一切都按预期工作，取消/保存按钮一切正常。（我尝试添加图像但不让我，需要更多的爱）

**但是**，一旦进入编辑模式，如果我单击页面上的任何其他位置（div 之外），预期的结果将是汤类别将返回查看模式。在某种事件触发时，这也应该允许我询问他们是否要保存更改。

所以我决定做的是在“汤”父 div 上创建一个模糊事件。如果我单击页面上的任何位置，这将按预期工作，但是如果我单击 div 的内部元素，它也会导致触发父模糊事件，从而导致类别返回查看模式。

那么，如果父 div 的任何一个子元素获得焦点，有没有办法阻止父 div 触发 blur 事件？

```
<div tabindex="-1" onblur="alert('outer')">
    <input type="text" value="Soup" />
</div> 
```

我只是在没有编译器的情况下编写了代码，所以不确定它是否有效，但希望你能明白这一点。

我正在使用 Knockout.js 即时更新 GUI，但这不应该影响我没想到的答案。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2020-02-06T12:16:16.540

我遇到了同样的问题。这对我有用。

```
 handleBlur(event) {
    // if the blur was because of outside focus
    // currentTarget is the parent element, relatedTarget is the clicked element
    if (!event.currentTarget.contains(event.relatedTarget)) {
        .....
    }
} 
```

享受 ：）

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-08-23T13:17:00.377

我以前必须解决这个问题。我不确定它是否是最好的解决方案，但它是我最终使用的。

由于单击事件在模糊之后触发，因此没有（跨浏览器，可靠的）方法来判断哪个元素正在获得焦点。

然而，Mousedown 在模糊之前触发。这意味着您可以在子元素的 mousedown 中设置一些标志，并在父元素的模糊中询问该标志。

工作示例：http: [//jsfiddle.net/L5Cts/](http://jsfiddle.net/L5Cts/)

`keydown`请注意，如果您还想捕捉由键盘引起的模糊，您还必须处理（并检查 tab/shift-tab）。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2017-11-29T23:06:12.380

我认为`mousedown`在所有浏览器中的焦点事件之前都不会发生任何保证，因此处理此问题的更好方法可能是使用[`evt.relatedTarget`](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/relatedTarget). 对于`focusin`事件，该`eventTarget`属性是对当前**失去**焦点的元素的引用。您可以检查该元素是否是父元素的后代，如果不是，则您知道焦点从外部进入父元素。对于`focusout`事件，`relatedTarget`是对当前**获得**焦点的元素的引用。使用相同的逻辑来确定焦点是否完全离开父级：

```
const parent = document.getElementById('parent');

parent.addEventListener('focusin', e => {
    const enteringParent = !parent.contains(e.relatedTarget);

    if (enteringParent) {
        // do things in response to focus on any child of the parent or the parent itself
    }
});

parent.addEventListener('focusout', e => {
    const leavingParent = !parent.contains(e.relatedTarget);

    if (leavingParent) {
        // do things in response to fully leaving the parent element and all of its children
    }
}); 
```

# django - 动态定义 Django 会话密钥

> ID：12092262
> 
> 赞同：1
> 
> 时间：2012-08-23T13:05:35.833
> 
> 标签：django, django-sessions

# 网址.py

```
(r'^(?P<restaurant>\d+)/like/(?P<option>\w+)$','like') 
```

# 视图.py

```
def like(request,option="food",restaurant = 1):
    if request.is_ajax:
        rest = 'rest'
        #option could be 'food' , 'service' , 'speciality'
        like = '%s_like' % str(option)

        if restaurant in request.session:
            if like not in request.session[restaurant]:
                request.session[restaurant][str(like)] =str(like)
                session = [item for item in request.session[restaurant]]
                return HttpResponse(session)
            else:
                session = [item for item in request.session[restaurant]]
                return HttpResponse(session)
        if restaurant not in request.session:

            request.session[restaurant] = {} 
```

# html

```
<a href="/{{rest.id}}/like/{{key|lower}}">
    <button  data-placement="left" data-original-title="{{val.0}} people like {{key|upper}} at {{rest|title}}" rel="tooltip" class="like pull-right pointer btn btn-info text-left pad0  btn-mini mrg-left5 like-food">
        <i class="icon-thumbs-up"></i>&nbsp;{{val.0}}
    </button></a> 
```

这里 rest.id = 1

# 怀疑

当我将“餐厅”键声明为字典时，我无法理解，当我单击“like”按钮时，它不会返回所有键，每次只返回一个键，例如当我单击 food_like 按钮时，它的返回关键 food_like 但是当我再次单击 service_like 按钮而不是返回所有 food_like 和服务就像它刚刚返回服务一样，请帮助。提前致谢

基本上我想要的是创建嵌套会话字典，例如。

```
request.session[restaurant][food][like]
request.session[restaurant][food][dislike] 
request.session[restaurant][service][like]
request.session[restaurant][service][dislike] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:33:29.213

**Suggestion**: I wouldn't have your dynamic dictionary values in the root session dict, nest it one level for better manageability. see `request.session["restaurants"]`

**Solution**: check out: [https://docs.djangoproject.com/en/dev/topics/http/sessions/#when-sessions-are-saved](https://docs.djangoproject.com/en/dev/topics/http/sessions/#when-sessions-are-saved)

```
request.session[restaurant][str(like)] = str(like) 
```

Does not modify the session and so it does not trigger a save by default.

Your options are to tell the session that it has been modified

```
request.session.modified = True 
```

OR save the session every request: [https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-SESSION_SAVE_EVERY_REQUEST](https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-SESSION_SAVE_EVERY_REQUEST)

```
SESSION_SAVE_EVERY_REQUEST = True 
```

# java - 使用 JPA Criteria API 查询 Enum 的 ElementCollection

> ID：12092268
> 
> 赞同：4
> 
> 时间：2012-08-23T13:05:49.863
> 
> 标签：java, jpa, jpa-2.0, criteria-api

我正在为汽车经销商开发一个 Web 应用程序。我有一个 Car 类，其中包含一组安全枚举。

```
public class Car {
    @Id
    @GeneratedValue
    private Long id;

    @NotNull(message = "{year}")
    @Min(value = 1950)
    @Max(value = 2020)
    @Column(nullable = false)
    private int year;

    @NotNull()
    @Column(nullable = false)
    private String make;

    @NotNull()
    @Column(nullable = false)
    private String model;

    @NotNull()
    @Min(value = 0)
    @Max(value = 1000000)
    @Column(nullable = false)
    private int kilometres;

    @Column(nullable = false)
    private int price;

    @NotNull()
    @Enumerated(EnumType.STRING)
    private Gearbox gearbox;

    @ElementCollection(fetch = FetchType.EAGER)
    @Enumerated(EnumType.STRING)
    @CollectionTable(name="SECURITY")
    @Column(name="TYPE")
    private Set<Security> securityList = new HashSet<Security>();

    @NotNull()
    @Column(nullable = false)
    private String description;

    @OneToMany(cascade = { CascadeType.ALL }, fetch = FetchType.LAZY, orphanRemoval = true)
    private List<Picture> pictureList = new ArrayList<Picture>();

   // Getters and setters + help methods.. 
```

安全枚举就像：

```
public enum Security {

    ABS("abs"),
    AIRBAG("airbag"),
    ANTISPIN("antispin"),
    CENTRAL_LOCKING("centralLocking"),
    REMOTE_ALARM("remoteAlarm"),
    FOUR_WHEEL("fourWheel"),
    PARKING_ASSISTANCE("parkingAssistance"),
    SERVICE_MANUAL("serviceManual"),
    STABILITY_CONTROL("stabilityControl"),
    XENON_LIGHT("xenonLight");

    private String label;

    private Security(String label) {

    }

    public String getLabel() {
        return label;
    }
} 
```

在 Web 应用程序中，我将创建一个搜索页面，用户可以在其中定义所需的 Securitiy 部件和制造商模式（在 Car 类中创建字段）。例如，用户可能会搜索具有根据“Volkswagen”和至少具有 ABS 和 REMOTE_ALARM 的安全性的制造模式的汽车。

我的问题是我不确定如何使用标准 API 创建查询。我想它应该像这样开始：

```
public List<Car> searchCars(String makePattern, Set<Security> requiredSecuirtySet) {

        CriteriaBuilder cb = em.getCriteriaBuilder();

        CriteriaQuery<Car> cq = cb.createQuery(Car.class);
        Root<Car> _car = cq.from(Car.class);

        // Give me some help here please =)

        return em.createQuery(cq).getResultList();
} 
```

你能帮我么？我还有一个 Car 类的元模型。

提前致以最诚挚的问候和感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T14:40:59.713

您可以使用集合作为参数，所以也许这会起作用：

```
TypedQuery<Car> q = em.createQuery("select c from Car c where c.make = :make and c.securityList in :secutiryList", Car.class);
q.setParameter("make", makePattern);
q.setParameter("securityList", requiredSecuirtySet);

return q.getResultList(); 
```

我没有对此进行测试，所以我不确定它是否会起作用。它基于[这个问题](https://stackoverflow.com/questions/4638543/selecting-where-an-entity-contains-a-list-thats-a-subset-of-another-list)。~~我也没有使用过标准 API，所以我不知道如何“翻译”它。~~

下面是使用条件 API 进行查询的截图：

```
public List<Car> searchCars(String makePattern,
        Set<Security> requiredSecuirtySet)
{
    CriteriaBuilder builder = em.getCriteriaBuilder();

    CriteriaQuery<Car> query = builder.createQuery(Car.class);
    Root<Car> car = query.from(Car.class);
    query.select(car).where(
            builder.equal(car.get("make"), makePattern),
            car.get("securityList").in(requiredSecuirtySet));
    return em.createQuery(query).getResultList();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T19:59:39.507

谢谢siebz0r！

我正在稍微修改您的代码，因为您的代码返回所有具有 1 个或多个安全性（而不是全部）的汽车，即返回所有具有至少包含安全列表子集的安全列表的汽车。

这是我的代码：

```
public List<Car> searchCars(String makePattern, Set<Security> requiredSecuirtySet) {

        CriteriaBuilder cb = em.getCriteriaBuilder();

        CriteriaQuery<Car> cq = cb.createQuery(Car.class);
        Root<Car> car = cq.from(Car.class);

        Predicate criteria = cb.conjunction();
        for (Security security : carQueryData.getSecurityCriteria()) {
            criteria = cb.and(criteria, car.get(Car_.securityList).in(security) );
        }
        // Add more predicates, for instance:
        // for (Equipment equipment : carQueryData.getEquipmentsCriteria()) {
        //    criteria = cb.and(criteria, car.get(Car_.equipmentList).in(equipment) );
        // }

        Predicate makePredicate = cb.equal(car.get(Car_.make), makePattern);

        cq.select(car).where(makePredicate, criteria);

        return em.createQuery(cq).getResultList();
    } 
```

此致

# ruby - 如何在 ARel 中执行完全联接？

> ID：12092269
> 
> 赞同：4
> 
> 时间：2012-08-23T13:05:50.540
> 
> 标签：ruby, activerecord, arel

假设我有两个表`TableA`，并且`TableB`通过连接表具有多对多关系`TableABJoin`。我想使用 ARel 3 生成一个执行完全连接的查询`TableA`and `TableB`。

我想生成的查询应该是这样的：

```
SELECT a.id, b.code
FROM TableA as a, TableB as b 
```

这导致表 A 和 B 的完全连接。

在不编写显式 sql 字符串的情况下，我能够得到的最接近的方法是破解外连接：

```
part_a = TableA.arel_table
part_b = TableB.arel_table
query = part_a.join(part_b, Arel::Nodes::OuterJoin).on('1=1').project(part_a[:id], part_b[:code]).to_sql 
```

这将产生以下 SQL：

```
SELECT "TableA"."id", "TableB"."code" FROM "TableA" LEFT OUTER JOIN "TableB" ON 1=1 
```

如果我排除该`.on`组件，我最终会得到一个尾随 NULL：

```
SELECT "TableA"."id", "TableB"."code" FROM "TableA" LEFT OUTER JOIN "TableB" NULL 
```

是否有更合理的方法来生成正确的完全联接或至少生成相同的结果而无需破解 ARel 中的左外联接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-31T00:05:52.710

实际上，不可能使用 arel 执行完全外连接（和右外连接），它只支持内连接和外连接（左外连接）。

因为我不喜欢这样，所以我更新了 arel 3-0-stable（我正在开发一个 3.2.13 rails 应用程序），以便它也支持正确和完整的外部连接。即使使用未记录的代码，添加这些也非常简单，这很容易，所以如果你尝试它应该不会遇到任何问题。

在这里您可以找到我的拉取请求：[https](https://github.com/rails/arel/pull/202)
://github.com/rails/arel/pull/202 在这里您可以找到带有分支的更新存储库：[https ://github.com/Fire-Dragon-DoL/arel /tree/3-0-right-full-outer-join](https://github.com/Fire-Dragon-DoL/arel/tree/3-0-right-full-outer-join)

通过将其添加到 Gemfile 中，您可以轻松地在 Rails 应用程序中使用它：

```
gem 'arel', '~> 3.0.3.4', github: 'Fire-Dragon-DoL/arel', branch: '3-0-right-full-outer-join' 
```

在这里您可以看到一个语法示例：

```
class Cat < ActiveRecord::Base
  has_many :cat_diseases
end
class Disease < ActiveRecord::Base
  has_many :cat_diseases
end

class CatDisease < ActiveRecord::Base
  belongs_to :cat
  belongs_to :disease

  def self.all_diseases_for_cat(cat)
    cat_diseases = self.arel_table
    diseases     = Disease.arel_table

    scoped
    .joins(
      cat_diseases.join(diseases, Arel::Nodes::RightOuterJoin)
                    .on(cat_diseases[:disease_id].eq(diseases[:id]))
      .join_sources
    )
    .where(
      cat_diseases[:cat_id].eq(cat.id)
      .or(cat_diseases[:cat_id].eq(nil))
    )
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T16:31:44.167

我用 SQL 编写连接。它更清晰并且工作正常：

```
part_a = TableA.arel_table
part_b = TableB.arel_table
query = part_a.joins('LEFT OUTER JOIN "TableB"').other_scopes.to_sql 
```

# python - 在python中取消慢速下载

> ID：12092272
> 
> 赞同：7
> 
> 时间：2012-08-23T13:05:55.927
> 
> 标签：python, download, urllib, restart

我正在通过 http 下载文件并使用 urllib 和以下代码显示进度 - 效果很好：

```
import sys
from urllib import urlretrieve

urlretrieve('http://example.com/file.zip', '/tmp/localfile', reporthook=dlProgress)

def dlProgress(count, blockSize, totalSize):
  percent = int(count*blockSize*100/totalSize)
  sys.stdout.write("\r" + "progress" + "...%d%%" % percent)
  sys.stdout.flush() 
```

现在，如果下载速度太慢（比如 15 秒不到 1MB），我也想重新开始下载。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T16:56:41.657

这应该有效。它计算实际下载速率，如果它太低则中止。

```
import sys
from urllib import urlretrieve
import time

url = "http://www.python.org/ftp/python/2.7.3/Python-2.7.3.tgz" # 14.135.620 Byte
startTime = time.time()

class TooSlowException(Exception):
    pass

def convertBToMb(bytes):
    """converts Bytes to Megabytes"""
    bytes = float(bytes)
    megabytes = bytes / 1048576
    return megabytes

def dlProgress(count, blockSize, totalSize):
    global startTime

    alreadyLoaded = count*blockSize
    timePassed = time.time() - startTime
    transferRate = convertBToMb(alreadyLoaded) / timePassed # mbytes per second
    transferRate *= 60 # mbytes per minute

    percent = int(alreadyLoaded*100/totalSize)
    sys.stdout.write("\r" + "progress" + "...%d%%" % percent)
    sys.stdout.flush()

    if transferRate < 4 and timePassed > 2: # download will be slow at the beginning, hence wait 2 seconds
        print "\ndownload too slow! retrying..."
        time.sleep(1) # let's not hammer the server
        raise TooSlowException

def main():
    try:
        urlretrieve(url, '/tmp/localfile', reporthook=dlProgress)

    except TooSlowException:
        global startTime
        startTime = time.time()
        main()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T13:27:31.333

像这样的东西：

```
class Timeout(Exception): 
    pass 

def try_one(func,t=3):
    def timeout_handler(signum, frame):
        raise Timeout()

    old_handler = signal.signal(signal.SIGALRM, timeout_handler) 
    signal.alarm(t) # triger alarm in 3 seconds

    try: 
        t1=time.clock()
        func()
        t2=time.clock()

    except Timeout:
        print('{} timed out after {} seconds'.format(func.__name__,t))
        return None
    finally:
        signal.signal(signal.SIGALRM, old_handler) 

    signal.alarm(0)
    return t2-t1 
```

使用您想要超时的函数和超时时间调用“try_one”：

```
try_one(downloader,15) 
```

或者，您可以这样做：

```
import socket
socket.setdefaulttimeout(15) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T15:55:40.513

圣鲭鱼！使用工具！

```
import urllib2, sys, socket, time, os

def url_tester(url = "http://www.python.org/ftp/python/2.7.3/Python-2.7.3.tgz"):
    file_name = url.split('/')[-1]
    u = urllib2.urlopen(url,None,1)     # Note the timeout to urllib2...
    file_size = int(u.info().getheaders("Content-Length")[0])
    print ("\nDownloading: {} Bytes: {:,}".format(file_name, file_size))

    with open(file_name, 'wb') as f:    
        file_size_dl = 0
        block_sz = 1024*4
        time_outs=0
        while True:    
            try:
                buffer = u.read(block_sz)
            except socket.timeout:
                if time_outs > 3:   # file has not had activity in max seconds...
                    print "\n\n\nsorry -- try back later"
                    os.unlink(file_name)
                    raise
                else:              # start counting time outs...
                    print "\nHmmm... little issue... I'll wait a couple of seconds"
                    time.sleep(3)
                    time_outs+=1
                    continue

            if not buffer:   # end of the download             
                sys.stdout.write('\rDone!'+' '*len(status)+'\n\n')
                sys.stdout.flush()
                break

            file_size_dl += len(buffer)
            f.write(buffer)
            status = '{:20,} Bytes [{:.2%}] received'.format(file_size_dl, 
                                           file_size_dl * 1.0 / file_size)
            sys.stdout.write('\r'+status)
            sys.stdout.flush()

    return file_name 
```

这会按预期打印状态。如果我拔下以太网电缆，我会得到：

```
 Downloading: Python-2.7.3.tgz Bytes: 14,135,620
             827,392 Bytes [5.85%] received

sorry -- try back later 
```

如果我拔下电缆，然后在 12 秒内重新插入，我会得到：

```
Downloading: Python-2.7.3.tgz Bytes: 14,135,620
             716,800 Bytes [5.07%] received
Hmmm... little issue... I'll wait a couple of seconds

Hmmm... little issue... I'll wait a couple of seconds
Done! 
```

该文件已成功下载。

您可以看到[urllib2](http://docs.python.org/library/urllib2)支持超时和重新连接。如果您断开连接并保持断开连接 3 * 4 秒 == 12 秒，它将永远超时并引发致命异常。这也可以处理。

# scala - 在 Jenkins 中显示 SCCT 覆盖率

> ID：12092276
> 
> 赞同：8
> 
> 时间：2012-08-23T13:06:05.580
> 
> 标签：scala, maven-2, jenkins, automated-tests, code-coverage

我们已经让 SCCT 生成了一些漂亮的网页，展示了我们的单元测试的覆盖范围。现在我们想将它集成到我们的 Jenkins 持续集成构建中。

我已经创建了一个 Jenkins 作业来运行 SCCT 测试，但是如何 a）如果覆盖率低于*n* % 和 b）如何显示这些漂亮的网页？

该构建是一个 Maven 多模块项目。

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T12:45:40.233

我们正在使用 jenkins cobertura 插件。SCCT 为每个模块发出一个 cobertura 格式的覆盖 xml 文件（我一开始没有发现），cobertura 插件会整理这些文件。一个问题是 cobertura 插件需要降级到 1.3，否则它会认为 mojo 没有运行并且不执行任何操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T22:04:33.167

由于其他覆盖工具（如 cobertura）可以通过 jenkins 插件实现这一点，因此您可以

*   将 SCCT 的输出转换为类似于现有工具的结果，并使用匹配的 jenkins 插件。

*   编写自己的 jenkins 插件，可能从现有插件中借用代码用于其他覆盖工具。

# php - NotORM：如何获取数据？

> ID：12092281
> 
> 赞同：2
> 
> 时间：2012-08-23T13:06:15.417
> 
> 标签：php, notorm

我在使用选择时遇到问题，我尝试阅读文档，但不太清楚，谈论它的论坛很少且不活跃。

我想做一个简单的选择，所以我尝试了：

```
$applications = $NOTORM->user_types()
                        ->select('id, group_title')
                        ->where('id', 1);
return $applications; 
```

但是，这给了我一个 NotORM 对象，在该对象中我看不到执行正常操作时得到的结果行：`SELECT id, group_title FROM user_types WHERE id = 1`

我尝试使用 fetch() 但不确定如何使用它。有什么见解吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-13T19:35:08.503

其实NotORM的作者推荐的是使用：

```
<?php
array_map('iterator_to_array', iterator_to_array($result));
?> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T16:30:09.363

我有同样的问题，直到我意识到你必须循环结果。尝试

```
foreach($applications as $application) {
     echo $application["id"] . ": " . $application["group_title"]
} 
```

或者，正如您所提到的，您可以使用`fetch()`它一次获取一行。

```
$row=$applications->fetch();
echo $row["id"]; 
```

**编辑：**

要将所有行数据作为普通关联数组而不是 NotORM 对象，我遇到了 2 种技术：

1.  `foreach($row as $key => $value) { $data[$key]=$value; }`
2.  `$data=iterator_to_array($row);`- 我还没有找到执行此操作的 NotOrm 函数，但我发现 Notorm 在内部（某处）使用此技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:11:18.430

要实际**仅**获取行的**数据**数组，您必须访问 NotORM_Row->row 参数，但默认情况下它是“*受保护的”。*所以像这样使用它：

```
$row = $NOTORM->user_types()
              ->select('id, group_title')
              ->where('id', 1)
              ->fetch()->row;                //here is the magic :) 
```

您首先需要在“NotORM/Row.php”中“破解”核心 NotORM_Row 类，

通过更换

`protected $row, $result;`

至

`public $row, $result;`

**注意：**您必须在 NotORM 结果上调用 fetch()，因为它将返回放置行数据的 NotORM_Row 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-02T10:31:17.573

只需在 NotORM_Result 类中的某处添加此代码：

```
function result() { return (Object)$this->result_array(); }
function result_array() {
    foreach($this as $row) {    $ret[] = iterator_to_array($row);   }
    return $ret;
} 
```

并像这样使用它：

```
 $applications = $NOTORM->user_types()
                            ->select('id, group_title')
                            ->where('id', 1);
    return $applications->result(); //To return it as an Plain Object
//or
   return $applications->result_array();  //To return it as a Assoc Array 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-16T08:06:27.413

NotOrm 添加了一个函数，该函数返回原始行数据而不是 names `jsonSerialize`。您可以通过此函数获取行数据数组。

例子：

```
$row=$db->MyTable->where('X','93054660084')->fetch();

var_dump($row->jsonSerialize()); 
```

输出：

```
array (size=5)
  'X' => string '93054660084' (length=9)
  'Idc' => string '1132' (length=4)
  'IdH' => string '1' (length=1)
  'Mab' => string '0' (length=1)
  'Tar' => string 'xsderf' (length=10) 
```

对于多记录数据，您需要使用 foreach 并将其应用于所有记录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-14T05:14:08.670

尝试定义这个 PHP 函数：

```
function getArray($obj){
  $arr = array();

  foreach ($obj as $objSingle) {

      $arrRow = array();
      foreach ($objSingle as $key => $value) {
          $arrRow[$key] = $value;
      }
      $arr[] = $arrRow;
  }
  return $arr; 
```

}

并通过调用使用它：

```
$arr = getArray($applications); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-19T10:39:53.317

> 可以这样做。

```
 function comboBuilder2($tbl, $name, $lable, $value, $value2, $value3, $selected = NULL, $cond, $sort = NULL){
global $db;
$html = '';
$sort1 = (!empty($sort)) ? "order by sort asc" : '';
$sql = "select * from " . $tbl . " " . $cond . " " . $sort1 . "";
//echo $sql;
$sth = $db->query($sql);
$rs = $sth->fetchAll();
//print_r($rs);
if ($rs[0] > 0) {
    foreach ($rs as $row) {
        if ($selected == $row[$value])
            $sel = 'selected = "selected" ';
        else
            $sel = '';
        echo $row[$lable];
        //$html .= '<option value="' . $row[$value] . '"  data-min="' . $row[$value2] . '"  data-max="' . $row[$value3] . '" ' . $sel . '>' . $row[$lable] . '</option>';
    }
    $html .= '';
}
return $html; 
```

}

# ruby-on-rails - Nokogiri 不加载解析整个 xml 文件

> ID：12092283
> 
> 赞同：0
> 
> 时间：2012-08-23T13:06:22.667
> 
> 标签：ruby-on-rails, ruby, nokogiri

我有一个 XML 文档：

```
<event>
    <type>SUBSCRIPTION_ORDER</type>
    <marketplace>
        <baseUrl>https://www.acme-marketplace.com</baseUrl>
        <partner>ACME</partner></marketplace>
    </marketplace>
    <creator>
        <email>admin@fakeco</email>
        <firstName>Alice</firstName>
        <lastName>Hacker</lastName>
        <openId>https://www.acme-marketplace.com/openid/id/a11a7918-bb43-4429-a256-f6d729c71033</openId>
        <uuid>a11a7918-bb43-4429-a256-f6d729c71033</uuid>
    </creator>
    <payload>
        <company>
            <uuid>d15bb36e-5fb5-11e0-8c3c-00262d2cda03</uuid>
            <email>admin@fakeco</email>
            <name>Fake Co.</name>
            <phoneNumber>1-415-555-1212</phoneNumber>
            <website>fakeco</website>
        </company>
        <order>
            <editionCode>BASIC</editionCode>
            <item>
                <quantity>10</quantity>
                <unit>USER</unit>
            </item>
        </order>
    </payload>
</event> 
```

当我用 nokogiri 加载它时，我得到了奇怪的结果：

```
1.9.3p194 :056 > doc = Nokogiri::XML(File.open("test.xml")).to_s
=> "<?xml version=\"1.0\"?>\n<event>\n    <type>SUBSCRIPTION_ORDER</type>\n    <marketplace>\n        <baseUrl>https://www.acme-marketplace.com</baseUrl>\n        <partner>ACME</partner></marketplace>\n    </event>\n" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:08:53.473

您有两个结束`</marketplace>`标记，它们是无效的 XML：

```
 <partner>ACME</partner></marketplace>
</marketplace> 
```

删除其中一个，Nokogiri 应该可以正常读取文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T17:48:05.363

如果您将 XML 解析为 Nokgiri::XML 文档：

```
doc = Nokogiri::XML(<<EOT)
<event>
    <type>SUBSCRIPTION_ORDER</type>
    <marketplace>
        <baseUrl>https://www.acme-marketplace.com</baseUrl>
        <partner>ACME</partner></marketplace>
    </marketplace>
    <creator>
        <email>admin@fakeco</email>
        <firstName>Alice</firstName>
        <lastName>Hacker</lastName>
        <openId>https://www.acme-marketplace.com/openid/id/a11a7918-bb43-4429-a256-f6d729c71033</openId>
        <uuid>a11a7918-bb43-4429-a256-f6d729c71033</uuid>
    </creator>
    <payload>
        <company>
            <uuid>d15bb36e-5fb5-11e0-8c3c-00262d2cda03</uuid>
            <email>admin@fakeco</email>
            <name>Fake Co.</name>
            <phoneNumber>1-415-555-1212</phoneNumber>
            <website>fakeco</website>
        </company>
        <order>
            <editionCode>BASIC</editionCode>
            <item>
                <quantity>10</quantity>
                <unit>USER</unit>
            </item>
        </order>
    </payload>
</event>
EOT 
```

然后查看文档的`errors`方法，你会看到：

```
doc.errors
[
    [0] #<Nokogiri::XML::SyntaxError:0x100a6dbb8
        attr_reader :code = 76,
        attr_reader :column = 19,
        attr_reader :domain = 1,
        attr_reader :file = nil,
        attr_reader :int1 = 1,
        attr_reader :level = 3,
        attr_reader :line = 6,
        attr_reader :str1 = "event",
        attr_reader :str2 = "marketplace",
        attr_reader :str3 = nil
    >,
    [1] #<Nokogiri::XML::SyntaxError:0x100a6daa0
        attr_reader :code = 5,
        attr_reader :column = 5,
        attr_reader :domain = 1,
        attr_reader :file = nil,
        attr_reader :int1 = 0,
        attr_reader :level = 3,
        attr_reader :line = 7,
        attr_reader :str1 = nil,
        attr_reader :str2 = nil,
        attr_reader :str3 = nil
    >
] 
```

那是 Nokogiri 告诉你文件的问题。您可以使用以下方法对此做出简单的反应：

```
if (!doc.errors.empty?)
  ...
end 
```

`RECOVER`由于在步骤中设置了标志，它会尝试从错误中恢复`parse`，但在某些情况下它无法修复，例如双结束标记。您需要进行飞行前检查并修复以清理文档，然后 Nokogiri 才能理解它。不幸的是，并不是所有的 XML 都是正确生成的，并且创建 XML 的人应该在将其发布之前通过有效性检查器运行它。事实上，它在 XML 世界中是不合格的并且被认为是非法的。

# c# - 在富文本框中搜索字符串

> ID：12092284
> 
> 赞同：0
> 
> 时间：2012-08-23T13:06:28.247
> 
> 标签：c#, .net, find, richtextbox

这是我在我的richtextbox 中查找文本并突出显示它的代码：

```
 int start = 0;
        int indexOfSearchText = 0;

        private void button1_Click(object sender, EventArgs e)
        {
            int startindex = 0;

            if (textBox1.Text.Length > 0)
                startindex = FindMyText(textBox1.Text.Trim(), start, richTextBox1.Text.Length);

            // If string was found in the RichTextBox, highlight it
            if (startindex >= 0)
            {
                // Set the highlight color as red
                richTextBox1.SelectionBackColor = Color.Red;
                // Find the end index. End Index = number of characters in textbox
                int endindex = textBox1.Text.Length;
                // Highlight the search string
                richTextBox1.Select(startindex, endindex);
                richTextBox1.ScrollToCaret();
                // mark the start position after the position of
                // last search string
                start = startindex + endindex;
            }

            else
            {
                MessageBox.Show("0 occurence in richtextbox");
            }
        }

        public int FindMyText(string txtToSearch, int searchStart, int searchEnd)
        {
            // Unselect the previously searched string
            if (searchStart > 0 && searchEnd > 0 && indexOfSearchText >= 0)
            {
                richTextBox1.Undo();
            }

            // Set the return value to -1 by default.
            int retVal = -1;

            // A valid starting index should be specified.
            // if indexOfSearchText = -1, the end of search
            if (searchStart >= 0 && indexOfSearchText >= 0)
            {
                // A valid ending index
                if (searchEnd > searchStart || searchEnd == -1)
                {
                    // Find the position of search string in RichTextBox
                    indexOfSearchText = richTextBox1.Find(txtToSearch, searchStart, searchEnd, RichTextBoxFinds.None);
                    // Determine whether the text was found in richTextBox1.
                    if (indexOfSearchText != -1)
                    {
                        // Return the index to the specified search text.
                        retVal = indexOfSearchText;
                    }
                }
            }
            return retVal;
        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {
            start = 0;
            indexOfSearchText = 0;
        }
    }
} 
```

问题是，当它到达richtextBox1的末尾时，它并没有从头开始重新启动！我想在到达richtextBox1.text 的末尾后再次循环到开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:21:35.557

那这个呢？

```
if (textBox1.Text.Length > 0)
{
    startindex = FindMyText(textBox1.Text.Trim(), start, richTextBox1.Text.Length);
    if(startindex == -1 && start > 0) // Not found string and not searching from beginning
    {
        // Wrap search
        int oldStart = start;
        start = 0;
        startindex = FindMyText(textBox1.Text.Trim(), start, oldStart);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-26T08:31:20.627

下面的代码对于在richtextbox中搜索文本并以圆形方向突出显示文本很有用。我在richtextbox中使用文本框。我在文本框中输入搜索文本并按回车按钮查找下一个。最初我声明两个值作为 0 开始和 indexOfSearchText。

整数开始 = 0; int indexOfSearchText = 0;

私人无效文本框1_KeyDown（对象发送者，KeyEventArgs e）

```
 private void textBox1_KeyDown(object sender, KeyEventArgs e)   
        {
            if (e.KeyCode == Keys.Enter)

            {                   
                 int startindex = 0;

                if (textBox1.Text.Length > 0)
                {

                    startindex = FindMyText(textBox1.Text.Trim(), start, richTextBox1.Text.Length);

                    if (startindex == -1 && start >= 0) // Not found string and not searching from beginning
                    {
                        // Wrap search
                       // int oldStart = start;
                        start = 0;
                        startindex = FindMyText(textBox1.Text.Trim(), start, richTextBox1.Text.Length);
                    }

                }

                // If string was found in the RichTextBox, highlight it
                if (startindex >= 0)
                {
                    // Set the highlight color as red
                    richTextBox1.Select(startindex, textBox1.TextLength);
                    richTextBox1.SelectionBackColor = Color.Yellow;
                   // richTextBox1.SelectionColor = Color.Red;
                    // Find the end index. End Index = number of characters in textbox
                    int endindex = textBox1.Text.Length;
                    // Highlight the search string
                    richTextBox1.Select(startindex, endindex);
                    // mark the start position after the position of
                    // last search string
                    start = startindex + endindex;
                }

            }
        }

        public int FindMyText(string txtToSearch, int searchStart, int searchEnd)
        {
            // Unselect the previously searched string
            if (searchStart > 0 && searchEnd > 0 && indexOfSearchText >= 0)
            {
                richTextBox1.Undo();
            }

            // Set the return value to -1 by default.
            int retVal = -1;

            // A valid starting index should be specified.
            // if indexOfSearchText = -1, the end of search
            if (searchStart >= 0 && indexOfSearchText >= 0)
            {
                // A valid ending index
                if (searchEnd > searchStart || searchEnd == -1)
                {
                    // Find the position of search string in RichTextBox
                    indexOfSearchText = richTextBox1.Find(txtToSearch, searchStart, searchEnd, RichTextBoxFinds.None);
                    // Determine whether the text was found in richTextBox1.
                    if (indexOfSearchText != -1)
                    {
                        // Return the index to the specified search text.
                        retVal = indexOfSearchText;
                    }
                    else
                    {
                        start = 0;
                        indexOfSearchText = 0;
                        //return indexOfSearchText;
                    }
                }
            }
            return retVal;

        }

 private void textBox1_TextChanged(object sender, EventArgs e)
        {

            start = 0;
            indexOfSearchText = 0;
            string temp = richTextBox1.Text;
            richTextBox1.Text = string.Empty;
            richTextBox1.Text = temp;
            richTextBox1.SelectionBackColor = Color.White;
        } 
```

# vb.net - 任何人都可以帮助解释为什么文件有时会加载但其他时候不会？

> ID：12092287
> 
> 赞同：1
> 
> 时间：2012-08-23T13:06:39.377
> 
> 标签：vb.net, pdf

该代码应该抓取一个或多个链接，抓取该链接的内容并将它们加载到 pdf 中。在大多数情况下，它有效。

我们目前遇到的问题是有时文档或文档被正确加载到 PDF 中；有时，一分钟前正确加载的同一个文档要么将空白加载到 pdf 中，要么没有加载文档的图像部分。

我认为通过添加`Response.Clear()`，原始负载将被清除，并且文档已准备好再次加载。到目前为止，情况并非如此。

```
Protected Sub btnGetCheck_Click(ByVal sender As Object, ByVal e As EventArgs)

    Dim doc As New PdfDocument()

    Dim baseLink As String = _
        "http://default.html?mode=print&ino=pan&s=g"

    For Each r As GridViewRow In dsParcels.Rows
        If CType(r.Cells(0).FindControl("link"), CheckBox).Checked Then

            Dim url As String = baseURL & "&gen=" & r.Cells(1).Text
            HtmlToPdf.ConvertUrl(url, doc)

            ' Setup HttpResponse headers
            Response.Clear()
            Response.ClearHeaders()
            Response.ContentType = "application/pdf"
        End If
    Next
    doc.Save(Response.OutputStream)
    Response.Flush()
    Response.End()
End Sub 
```

谁能建议出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T20:12:26.913

肯尼，您一个接一个地添加您的文档，但每次调用时`Response.Clear()`都会重置响应缓冲区（删除已经生成的 PDF）。

# javascript - js：毕竟注入了几个没有 createElement/appendChild 的脚本

> ID：12092294
> 
> 赞同：0
> 
> 时间：2012-08-23T13:07:10.173
> 
> 标签：javascript, post

有一个带有多个标签的字符串，我必须插入它们 - 如果可能的话，一次插入，而不解析字符串来提取单独的脚本：

> > decodeURIComponent("%3Cscript%20src%3D%27%2F%2Ftest%2Fdg-48119-137488.js%27%20async%20defer%3E%3C%2Fscript%3E%3Cscript%20src%3D%27%2F%2Ftest2% 2Feg-48119-137488.js%27%20async%20defer%3E%3C%2Fscript%3E").replace(/+/g,"%20");

我尝试使用 createElement("DIV")，使用 .innerHTML 和 appendChild(theDIV) 添加字符串的内容。html 内容看起来不错，但脚本没有加载:-(

我还能做些什么来后加载脚本（之前不解析字符串）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:12:42.557

我认为这不起作用，因为您发布的代码使用了无效的正则表达式。

`+`是正则表达式中的保留字符。尝试改用`.replace(/\+/g,"%20");`
（注意转义的`+`）。

# android - Android：自定义对话框的尺寸错误

> ID：12092299
> 
> 赞同：0
> 
> 时间：2012-08-23T13:07:26.223
> 
> 标签：android, android-layout, xamarin.android

我正在尝试显示一个带有自定义视图的对话框。布局非常简单；基本上有两个`LinearLayouts`；每个带有 a`TextView`和`EditText`.

我正在使用的布局是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
  <LinearLayout
    android:orientation="vertical"
    android:layout_margin="5dip"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/ll_element1">    
    <TextView
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="Element 1"/>
    <EditText
      android:layout_width="250dip"
      android:layout_height="wrap_content"
      android:lines="5"/>
  </LinearLayout>
  <LinearLayout
    android:orientation="vertical"
    android:layout_margin="5dip"
    android:layout_width="wrap_content"
    android:layout_below="@id/ll_element1"
    android:layout_height="wrap_content">    
    <TextView
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="Element 2"/>
    <EditText
      android:layout_width="250dip"
      android:layout_height="wrap_content"
      android:lines="5"/>
  </LinearLayout>
</RelativeLayout> 
```

但是，如果我将其设置为对话框视图，则如下所示： ![错误大小的对话框](../Images/a0c6f8fd05b5f6dc1cfb83a3efe270a0.png)

我显示对话框的代码是这样的：

```
var view = this.LayoutInflater.Inflate(Resource.Layout.Custom_Dialog, null);

var dialog = new AlertDialog.Builder(this)
            .SetView(view)
            .Create();

dialog.Show(); 
```

在我看来，对话框的宽度应该更小，以便布局填充对话框。我尝试了几件事：

*   使用 LinearLayout 而不是 RelativeLayout
*   设置所有尺寸
*   使用 Dialog 而不是 AlertDialog

那么，我该怎么做才能获得正确大小的对话框？

**编辑** 更新了图片

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:19:24.893

试试这个

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ll_element1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="5dip"
    android:orientation="vertical" >

    <EditText
        android:layout_width="250dip"
        android:layout_height="wrap_content"
        android:hint="Element 1"
        android:lines="5" />

    <EditText
        android:layout_width="250dip"
        android:layout_height="wrap_content"
        android:hint="Element 2"
        android:lines="5" />

</LinearLayout> 
```

在你的活动中

```
final Dialog dialog = new Dialog(YourActivity.this);
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
dialog.setContentView(R.layout.yourCustomdialog);
dialog.setCancelable(true);
dialog.show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:11:34.413

删除 TextView 并`android:hint`在 EditText 上使用。将两者`EditText in One LinearLayout`与`vertical Orientation.`

也改变`android:layout_width of EditText as fill_parent`它的父级。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T13:16:45.720

你已经`lines=5`在你的 中设置了`EditText`，所以它占用了空间。使用`dp`代替`dip`，检查[这个](https://stackoverflow.com/questions/2025282/difference-of-px-dp-dip-and-sp-in-android)

现在你希望它如何显示？提供一些参考，以便确定确切的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-15T20:01:09.987

这些答案都没有帮助我，所以这是我的解决方案（也许有人觉得它有用）。

我有类似的问题，`NumberPicker`显示在`AlertDialog`. `NumberPicker`有自己的布局，以相对单位（`"match_parent"`，，`android:layout_weight`...）定义。

在没有默认参数的情况下膨胀布局`rootView`，因此布局大小与预期不符。由于方法将视图附加到内部对话框布局，因此在调用时膨胀布局`rootView`会导致`IllegalStateException`：*“指定的子级已经有父级” 。*`AlertDialog#create()``create()`

如[如何使警报对话框填充 90% 的屏幕尺寸中所述？](https://stackoverflow.com/questions/2306503/how-to-make-an-alert-dialog-fill-90-of-screen-size#answer-6631310)您可以像这样覆盖默认参数：

```
AlertDialog dialog = builder.show();

WindowManager.LayoutParams params = new WindowManager.LayoutParams();
params.copyFrom(dialog.getWindow().getAttributes());
params.width = 300; // LayoutParams.MATCH_PARENT will match dialog_layout which can be stretched to fullwidth.
params.height = 300;
dialog.getWindow().setAttributes(params); 
```

除了使用以像素为单位的固定宽度和高度，您可以创建以`dialog_helper.xml`相对单位（`android:id="@+id/dialog_dimension"`然后将此布局包含到活动/片段布局中：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout ...>
    <LinearLayout ....>
        ...
    </LinearLayout>
    <include layout="@layout/dialog_helper"/>
</RelativeLayout> 
```

由于此视图包含在活动布局中，因此它具有“测量的”宽度和高度，可用作对话框参数：

```
View dialogDim = findViewById(R.id.dialog_dimension);
params.width = dialogDim.getMeasuredWidth();
params.height = dialogDim.getMeasuredHeight(); 
```

计算相对大小`dialog.getWindow().getAttributes()`不起作用，因为它包含一些负值常量（MATCH_PARENT 或其他）。因此，如果要计算相对于显示大小的对话框大小，请使用[screen metrics](https://stackoverflow.com/questions/1016896/get-screen-dimensions-in-pixels#answer-1016941)。

请注意，屏幕旋转后将使用相同的宽度和高度，因此我建议将您的对话框包装到`DialogFragment`更改设备配置时自动重新创建的对话框中，因此将`dialogDim`根据当前屏幕方向更新创建对话框。这是一个简单的示例[如何创建 DialogFragment](https://stackoverflow.com/questions/7557265/prevent-dialog-dismissal-on-screen-rotation-in-android#answer-15729764)。

前面的例子包含了activity和fragment之间的通信（activity需要接收关于对话事件的消息）。这需要定义自定义侦听器接口 + 正确覆盖`Fragment#onAttach()`方法。所有这些步骤都在以下文章中进行了解释：[Fragment 和 Activity 之间的 Cummunication](https://developer.android.com/training/basics/fragments/communicating.html)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-01-23T23:45:06.413

在显示时使用构建器并添加宽度和高度

```
builder.show().getWindow().setLayout(600, 250); 
```

# java - 从一个测试类中调用两个相同的类并比较结果

> ID：12092300
> 
> 赞同：1
> 
> 时间：2012-08-23T13:07:26.983
> 
> 标签：java, class, testing, automated-tests

我目前正在开发一个系统，希望能用于比较两个单独但同名的类的结果。通过比较这两个类，我希望能够确定在给定相同输入参数的情况下，第一类方法的输出是否与第二类方法的输出相同。

我将如何动态地在两个独立的类上运行相同的测试类？

伪代码示例：

如果我有一个简单的测试类......

```
class TestClass{
   public int TestMethod(int num){
   int num2;
   TestedClass t = new TestedClass();
   num2 = t.add(num);
} 
```

以及需要测试的两个相同的类...

```
class TestedClass{
    public int add(int num){
    num = num + 2;
    return num;
} 
```

和

```
class TestedClass{
    public int add(int num){
    num = num + 4;
    return num;
} 
```

我将如何针对两个不同的 TestedClass 运行 TestClass，然后将测试结果保存在某种形式的集合中。

如您所见，两个 TestedClass 的名称相同，返回类型相同，只是功能略有不同。我也无权更改 TestedClass，但是我可以控制它们在程序、包等中的位置。

提前致谢。

**编辑：**

似乎很巧妙地漏掉了一条很重要的信息：

我也无权*编辑*TestClass，尽管如上所述，我会知道类/方法名称并控制它们的位置。这个想法是构建一些可以动态测试给定输入副本和正确输出（TestClass 和另一个 TestedClass）的类的东西。

为混乱道歉。

**编辑2：** 我可以访问测试，即。我可以运行它们，但我无法编辑它们，例如建议的一些答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T13:09:35.357

```
foo.bar.TestedClass   c1 = new foo.bar.TestedClass();
baz.plugh.TestedClass c2 = new baz.plugh.TestedClass();
assertEquals(c1.add(42), c2.add(42)); 
```

*编辑*

您不需要在同一个 JVM 中运行这两个测试，您只需调用方法、保存输出并使用各种技术进行比较。或者您可以像旧的 JUnit 一样扫描类，并`Class.forName("...").newInstance()`通过反射实例化和运行方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:16:03.343

您应该创建一个接口来声明该`add`方法，并实现[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)模式以提供此接口的不同实现。

处理此问题的更高级方法是使用注入依赖库，例如[Guice](http://code.google.com/p/google-guice/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:34:36.533

除非您想同时在两个 TestedClasses 上运行 TestClass，否则它只是在类路径中安排 jar，以便应该测试的预期 TestedClass 首先出现。希望这可以帮助。

# visual-studio - 为什么不能再在 Visual Studio 2012 中将文件拖动到解决方案资源管理器？

> ID：12092302
> 
> 赞同：0
> 
> 时间：2012-08-23T13:07:34.283
> 
> 标签：visual-studio, visual-studio-2012

在 VS2010 中，我总是可以将文件拖到解决方案资源管理器中。这在 Visual Studio 2012 中不再有效。如何启用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T13:09:46.123

[正如我在此答案](https://stackoverflow.com/a/275227/106866)中所读到的，这是 Windows 的“功能” ：

> 如果只有其中一个窗口以管理员身份运行，Windows 将不允许您从一个窗口拖动到另一个窗口。
> 
> 您是否以管理员身份运行 Visual Studio？

# php - 在 Google Chrome 中丢失 Facebook 状态会话密钥，但在 Firefox 中没有

> ID：12092303
> 
> 赞同：2
> 
> 时间：2012-08-23T13:07:39.130
> 
> 标签：php, session, google-chrome, facebook-php-sdk

当要求将来自 facebook sdk 的登录 url`state`保存在会话中以防止 CSRF 时，这是在`Facebook`类`setPersistentData($key, $value)`方法中完成的：

```
$session_var_name = $this->constructSessionVariableName($key);
$_SESSION[$session_var_name] = $value; 
```

在那之后，我做了一个`var_dump`并`$_SESSION`确保`exit;`它在那里并且没有任何东西可以改变`$_SESSION`数组。瞧，它就在那里：

```
...
'fb_451994004840680_state' => string '6de843508d52d3d4926275ab49280cef' (length=32)
... 
```

所以我将`index.php`文件更改为

```
session_start();
var_dump($_SESSION);
exit; 
```

并刷新。所有先前设置的会话元素都在那里，**但不是 facebook state**。

所以我尝试了以下方法：我在`setPersistentData($key, $value)`方法中添加了另一个（虚拟状态）键：

```
$_SESSION[$session_var_name] = $value;
$_SESSION['fb_1234567890_state'] = '848a87592acd';
var_dump($_SESSION);
exit; 
```

并且两者都直接在 var_dump 之后设置：

```
'fb_451994004840680_state' => string '6de843508d52d3d4926275ab49280cef' (length=32)
'fb_1234567890_state' => string '848a87592acd' (length=12) 
```

在 index.php 中刷新和 var 转储后，只存在虚拟键：

```
'fb_1234567890_state' => string '848a87592acd' (length=12) 
```

* * *

**这怎么可能？？？**

# c# - 从另一个线程 c# 访问主窗体中的文本框组件

> ID：12092304
> 
> 赞同：0
> 
> 时间：2012-08-23T13:07:41.480
> 
> 标签：c#, multithreading, c#-4.0, thread-safety

我有一个名为 mainForm 的类，它是我程序的主窗口。我在这个类中创建了一个 TextBox（这个 TextBox Logs 程序）对象，我想向它写入程序状态。我很容易从 mainForm 和其他对象（通过将 TextBox 对象传递给它）执行此操作，但是当我想从另一个线程执行此操作时，它很复杂。但是，我正在通过线程向 TextBox 写入它在 mainForm 中运行定义的代码（使用委托）。

我的问题是，如何在另一个类中运行的线程中写入 TextBox？

```
public partial class mainForm : Form
{
   TextBox log = new TextBox();
   .
   .
   .
   OtherClass o = new OtherClass(log);
}
class OtherClass
{
   private TextBox log;
   public otherClass(TextBox aLog)
   {
      log = aLog;
      Thread thread = new Thrad(new ThreadStart(this.run));
      thread.Start();
   }
   private void run()
   {
      log.Text = "Message";// I Can't Do This. Can I Use Delegate Here? How?
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:19:45.970

您可以使用`Invoke`/ `BeginInvoke`：

```
log.BeginInvoke(
    (Action)(() =>
    {
       log.Text = "Message";
    })); 
```

这允许辅助线程安全地将 GUI 更改转发到 GUI 线程，这是唯一应该应用它们的线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:56:39.963

另一种使用已定义委托的方式——顺便说一下，只要签名相同，这里的 Xt 就可以用于其他方法。也可以传递参数 - （然后将在 Xt 委托中有参数，并且 Invoke 将为每个传递一个逗号分隔的列表。

```
private void run() 
    { 
          XteChangeText();
    } 

    private delegate void Xt();

    private void XteChangeText()
    {
        if (log.InvokeRequired)
        {
        Invoke(new Xt(XteChangeText));
        }
        else
        {
        log.Text="Message";
        }
    } 
```

# macos - 如何在 Mac Mountain Lion OS X v10.8 上使用 pip 安装 Scipy

> ID：12092306
> 
> 赞同：18
> 
> 时间：2012-08-23T13:07:45.333
> 
> 标签：macos, scipy, pip, osx-mountain-lion

我在 Mountain Lion 上使用 pip 安装 Scipy 时遇到严重困难。我试过了：

```
sudo pip install -e git+https://github.com/scipy/scipy#egg=scipy-dev 
```

正如网络上各个地方所建议的那样。

这会导致错误，例如：

```
ld: library not found for -lgcc
lipo: can't figure out the architecture type of: /var/tmp//ccC2HLVs.out 
```

以及错误之前的几个警告（我认为不严重）。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-14T08:31:18.170

Scipy 现在也可以通过自制水龙头获得。如果您安装了[自制软件](http://mxcl.github.com/homebrew/)：

```
brew tap samueljohn/python
brew install scipy 
```

在此处查看更多信息：[homebrew-python](https://github.com/samueljohn/homebrew-python)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-23T18:44:36.817

Pip 通常在 OS X 上使用 scipy 有困难。从源代码安装并非易事，因此我建议不要这样做。在 OS X 中，您有一些更好的选择：

*   [Scipy superpack](http://fonnesbeck.github.com/ScipySuperpack/)，一堆预编译的二进制文件
*   [Enthought Canopy](https://store.continuum.io/cshop/anaconda/)（免费或其他）已经拥有您需要的一切（numpy、scipy、matplotlib 等）
*   [Anaconda](https://www.enthought.com/products/canopy/)，一个免费的科学 python 发行版，可能包含你需要的所有包。
*   [MacPorts](http://www.macports.org)，一个全面而灵活的包管理器，允许您安装和维护 python 发行版
*   [Homebrew](http://brew.sh/)，另一个流行的 OS X 包管理器

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-04T23:11:21.227

以下是在虚拟环境（Mac OS X 10.9.2 Mavericks）中安装 matplotlib 和 scipy 对我有用的方法：

```
# See George's answer above
brew update
brew upgrade
brew install gfortran 

# See http://www.scipy.org/scipylib/building/macosx.html (the link Nathan Gould posted above)
export CXX=g++-5.1
export CC=gcc-5.1
export FFLAGS=-ff2c
sudo ln -s /usr/bin/gcc /usr/bin/gcc-5.1
sudo ln -s /usr/bin/g++ /usr/bin/g++-5.1

pip install matplotlib
pip install scipy 
```

matplot lib 安装很快，但是 scipy 花了很长时间。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-20T10:31:06.150

只是为了补充@Anton I. Sipos 所说的话。我安装了 Enthought 包，但在升级它时遇到了问题，所以我决定使用*Homebrew*进行全新安装。不幸的是，仅仅执行点击并安装对我来说效果不佳。因此，经过一番搜索，我在 GitHub 上发现了一个*samualjohn*解决并为我工作的[问题：](https://github.com/samueljohn/homebrew-python/issues/1 "问题")

 *```
brew remove python
rm -rf /Library/Python/2.7/site-packages # it's save to delete this!
brew install python
pip install nose
brew install numpy
brew install scipy 
```

问题显然是 Enthought 卸载说明未涵盖的站点包中的冲突。

注意：我必须使用*pip安装**matplotlib*。

 ** * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-08T02:56:20.277

我在 OSX 10.9 Mavericks 上安装 scipy 时也遇到了类似的问题。为我解决的问题如下：

```
sudo pip list 
```

正在显示 numpy，因此我这样做了：

```
sudo pip install --upgrade numpy 
```

然后

```
brew list 
```

正在显示 gfortran。我确保我有最新版本

```
brew update
brew upgrade 
```

但

```
sudo pip install scipy 
```

因奇怪的 fortran 错误而失败。因此，我将其卸载并重新安装

```
sudo brew install gfortran
sudo brew uninstall gfortran 
```

令我惊讶的是

```
sudo pip install scipy 
```

在那之后工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-10T03:14:30.973

在 Mavericks 上，以下作品（可能也适用于其他版本）：

如果您还没有，请安装`pip`

```
sudo easy_install pip 
```

然后安装/更新`scipy`

```
sudo pip install scipy -U 
```

由于某种原因`pip`安装`scipy`到

```
/Library/Python/2.7/site-packages/ 
```

并且不会删除旧版本

```
/System/Library/Frameworks/Python.framework/Versions/2.7//Extras/lib/python/scipy/ 
```

因此，只需删除旧版本即可。打印版本号：

```
python -c "import scipy; print scipy.__version__" 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-09-29T21:00:10.507

使用 pip 在 Mac OS X 上安装 scipy 是可能的！您将需要系统上正确的 C 和 Fortran 编译器来设置 scipy。此页面应该可以帮助您：

[http://www.scipy.org/scipylib/building/macosx.html](http://www.scipy.org/scipylib/building/macosx.html)

完成此操作后，您应该可以使用`pip install scipy`.

作为附加的故障排除说明，您可能需要创建指向编译器的符号链接，以便安装过程可以找到它。以前的海报@biophetik 给出了一个如何做到这一点的例子。

另外，当我安装 scipy 时，我已经在我的虚拟环境中安装了 numpy。我不确定一个是否/如何依赖另一个。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-05-02T20:04:06.493

我最近也很难在 virtualenv 上安装 scipy。我的问题是没有正确看到 gfortran。我使用了 macports`sudo port install gcc48`并通过以下方式创建了一个指向 gfortran 的符号链接：

```
sudo ln -s /opt/local/bin/gfortran-mp-4.8 /opt/local/bin/gfortran 
```

之后，`pip install scipy`在我的 virtualenv 上工作没有任何错误。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-06-12T23:03:08.633

我用 Mac OS El Captain 尝试了一切：pip、ma​​cports、easy_install……。唯一对我有用的是brew：

```
$ brew install scipy 
```

之后，它会要求您按照以下说明进行操作：

```
$ brew link --overwrite numpy
$ mkdir -p /Users/adrieljr/Library/Python/2.7/lib/python/site-packages
$ echo 'import sys; sys.path.insert(1, "/usr/local/lib/python2.7/site-packages")' >> /Users/adrieljr/Library/Python/2.7/lib/python/site-packages/homebrew.pth 
```**

# sql - SQL 查询根据最近的客户 dob 查找平均工资

> ID：12092307
> 
> 赞同：1
> 
> 时间：2012-08-23T13:07:53.030
> 
> 标签：sql, tsql, sql-server-2008-r2

我有一个下表的要求。

条件：

1.  如果客户有连续3天的出生日期差距，我必须取客户的平均工资。
2.  如果客户之间的差距没有最近的 3 天出生日期差距，则无需考虑该客户。

示例：
在下表中，
客户端 17 具有以前的客户端 ID 的 WITH 串行 dob，间隔为 1 天 -> 在这种情况下，我将通过 15,16 和 17 的薪水获得 17 的平均工资。
客户 18 有以前的客户 ID，带有连续的出生日期 -> 在这种情况下，我将通过 16,17 和 18 的工资获得 18 的平均工资。

桌子：

```
JobType    ClientID     ClinetDOB's         Slaries
.net        1           2012-03-14              300  
.net        2           2012-04-11              400  
.net        3           2012-04-12              200  
.net        4           2012-07-29              400

.net        5           2012-08-17              1200 
.net        6           2012-08-18              1400 
.net        7           2012-08-19              1400

java        8           2012-04-10              400
java        9           2012-07-29              400  
java        10          2012-07-30              600  

java        11          2012-08-14              1200  
java        12          2012-08-15              1800  
java        13          2012-08-16              1100

java        14          2012-09-17              1200 

java        15          2012-08-18              2400 
java        16          2012-08-19              2400  
java        17          2012-08-20              2400  
java        18          2012-08-21              1500 
```

结果应该看起来像这样：-

```
 JobType   ClientID     ClinetDOB's         AVG(Slaries)
.net        7           2012-08-19              1333
Java        13          2012-08-16              1366        --This avg of 5,6,7 clientsId's(because they have serial 3days dob's)    
Java        17          2012-08-20              2400        --This avg of 15,16,17 clientsId's(because they have serial 3days dob's)
Java        18          2012-08-21              2100        --This avg of 16,17,18 clientsId's(because they have serial 3days dob's) 
```

下面的查询给出了一些混乱的结果。

```
select t1.ClientID,  
       t1.ClinetDOBs, 
       (t1.Slaries + sum (t2.Slaries)) / (count (*) + 1) Avg_Slaries 
  from table1 t1 
 inner join table1 t2 
    on (t1.ClinetDOBs = dateadd(day, 3, t2.ClinetDOBs) and t1.jobtype = t2.jobtype) 
 group by t1.ClientID,  
       t1.ClinetDOBs, 
       t1.Slaries 
```

请帮忙。

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T14:09:40.967

您可以试试这个 - 不同之处在于，从 t2 获取前三天的行，其中包括正在测试的当前行，因此不需要双重求和。此外 ˙have` 删除仅引用自身的行。

```
select t1.ClientID, 
       t1.ClinetDOBs,
       avg(t2.Slaries) Avg_Slaries
  from table1 t1
 inner join table1 t2
    on t1.ClinetDOBs >= t2.ClinetDOBs
   and t1.ClinetDOBs <= dateadd(day, 3, t2.ClinetDOBs)
   and t1.jobtype = t2.jobtype 
 group by t1.ClientID, 
       t1.ClinetDOBs
having count(*) > 1 
```

[您可以在此处查看您最后的数据](http://sqlfiddle.com/#!3/26fab/23)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T13:28:54.043

下面的查询连接前面三个记录中的每一个。联接既带来数据又充当过滤器以确保存在三个：

```
select tmain.ClientID, tmain.ClinetDOBs,
       sum(tmain.slaries + t1.slaries + t2.slaries)/3.0 as avg_slaries
from table1 tmain join
     table1 t1
     on t1.ClinetDOBs = dateadd(day, -1, tmain.ClinetDOBs) and 
        t1.jobtype = tmain.jobtype join
     table t2
     on t2.ClinetDOBs = dateadd(day, -2, tmain.ClinetDOBs) and 
        t2.jobtype = tmain.jobtype
group by tmain.ClientID, tmain.ClinetDOBs, tmain.Slaries 
```

你的问题似乎很奇怪。为什么日期必须是连续的，为什么它们都必须在那里？如果有多个人在同一日期和职位上会发生什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T13:28:13.180

尝试

```
select t1.ClientID,  
       t1.ClinetDOBs, 
       avg(t2.Slaries)
  from table1 t1 
 inner join table1 t2 
    on t2.ClinetDOBs >= t1.ClinetDOBs) 
       t2.ClinetDOBs <= dateadd(day, 3, t1.ClinetDOBs)
       and t1.jobtype = t2.jobtype 
 group by t1.ClientID,  
       t1.ClinetDOBs 
```

# android - 更改操作栏图标

> ID：12092314
> 
> 赞同：1
> 
> 时间：2012-08-23T13:08:12.803
> 
> 标签：android, icons, android-actionbar

是否可以动态更改**操作栏**图标？

我已经在我的清单中设置了它。我想更改它并通过代码进行设置。

**我的清单**：

```
 <activity android:name=".plugin.importer.face.FaceActivity"
        android:windowSoftInputMode="stateHidden|adjustResize"
        android:configChanges="orientation|keyboardHidden"
        android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.SYNC" />
            <category android:name="android.intent.category.DEFAULT" />              
        </intent-filter>

    <intent-filter android:icon="@drawable/new_enabled">
            <action android:name="android.intent.action.INSERT" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>

    </activity> 
```

有没有办法做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T20:52:54.600

```
 ActionBar actionBar = getSupportActionBar(); // || getActionBar();
    actionBar.setIcon(getResources().getDrawable(R.drawable.new_enabled)); 
```

希望有帮助

# python - 用于 hive 的 python 中的示例 map reduce 脚本产生异常

> ID：12092319
> 
> 赞同：6
> 
> 时间：2012-08-23T13:08:25.543
> 
> 标签：python, hadoop, hive

我正在学习蜂巢。我已经设置了一个名为`records`. 架构如下：

```
year        : string
temperature : int
quality     : int 
```

这是示例行

```
1999 28 3
2000 28 3
2001 30 2 
```

现在，我完全按照 Hadoop The Definitive Guide 一书中的说明在 python 中编写了一个示例 map reduce 脚本：

```
import re
import sys

for line in sys.stdin:
    (year,tmp,q) = line.strip().split()
    if (tmp != '9999' and re.match("[01459]",q)):
        print "%s\t%s" % (year,tmp) 
```

我使用以下命令运行它：

```
ADD FILE /usr/local/hadoop/programs/sample_mapreduce.py;
SELECT TRANSFORM(year, temperature, quality)
USING 'sample_mapreduce.py'
AS year,temperature; 
```

执行失败。在终端上我得到这个：

```
Hadoop job information for Stage-1: number of mappers: 1; number of reducers: 0
2012-08-23 18:30:28,506 Stage-1 map = 0%,  reduce = 0%
2012-08-23 18:30:59,647 Stage-1 map = 100%,  reduce = 100%
Ended Job = job_201208231754_0005 with errors
Error during job, obtaining debugging information...
Examining task ID: task_201208231754_0005_m_000002 (and more) from job job_201208231754_0005
Exception in thread "Thread-103" java.lang.RuntimeException: Error while reading from task log url
    at org.apache.hadoop.hive.ql.exec.errors.TaskLogProcessor.getErrors(TaskLogProcessor.java:130)
    at org.apache.hadoop.hive.ql.exec.JobDebugger.showJobFailDebugInfo(JobDebugger.java:211)
    at org.apache.hadoop.hive.ql.exec.JobDebugger.run(JobDebugger.java:81)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.io.IOException: Server returned HTTP response code: 400 for URL: http://master:50060/tasklog?taskid=attempt_201208231754_0005_m_000000_2&start=-8193
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1436)
    at java.net.URL.openStream(URL.java:1010)
    at org.apache.hadoop.hive.ql.exec.errors.TaskLogProcessor.getErrors(TaskLogProcessor.java:120)
    ... 3 more 
```

我转到失败的作业列表，这是堆栈跟踪

```
java.lang.RuntimeException: Hive Runtime Error while closing operators
    at org.apache.hadoop.hive.ql.exec.ExecMapper.close(ExecMapper.java:226)
    at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:57)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:436)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: Hit error while closing ..
    at org.apache.hadoop.hive.ql.exec.ScriptOperator.close(ScriptOperator.java:452)
    at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:566)
    at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:566)
    at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:566)
    at org.apache.hadoop.hive.ql.exec.ExecMapper.close(ExecMapper.java:193)
    ... 8 more 
```

相同的轨迹重复了 3 次以上。

请问，有人可以帮我解决这个问题吗？这里有什么问题？我完全按照书本行事。似乎是什么问题。似乎有两个错误。在终端上，它说它无法从任务日志 url 中读取。在失败的作业列表中，异常说明了一些不同的内容。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:44:35.757

我从 hadoop 管理界面转到 stedrr 日志，发现 python 存在语法错误。然后我发现当我创建配置单元表时，字段分隔符是制表符。而在`split()`我没有提到的。所以我把它改成`split('\t')`它工作正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-27T01:28:46.310

只需使用“describe formatted”，在输出底部附近，您会发现“Storage Desc Params:”，它描述了所使用的任何分隔符。

# .net - .Net ListItem 的 Flex 相等

> ID：12092323
> 
> 赞同：0
> 
> 时间：2012-08-23T13:08:35.880
> 
> 标签：.net, apache-flex

我正在尝试在 Flex 中执行类似于下面的代码的操作。下面的代码是.Net。有什么想法吗？

```
<asp:dropdownlist id="lstBufferDistance" style="Z-INDEX: 125; LEFT: 488px; POSITION: absolute; TOP: 112px"
        tabIndex="4" runat="server" Width="72px" Height="16px">
        <asp:ListItem Value="200">200 ft</asp:ListItem>
        <asp:ListItem Value="500" Selected="True">500 ft</asp:ListItem>
        <asp:ListItem Value="1000">1000 ft</asp:ListItem>
        <asp:ListItem Value="1500">1500 ft</asp:ListItem>
        <asp:ListItem Value="5280">1 Mile</asp:ListItem>
      </asp:dropdownlist>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:23:04.220

我不知道 .NET，但看起来该代码是一个带有 dataProvider 的下拉列表。像这样的东西应该工作：

```
<s:DropDownList id="lstBufferDistance" selectedIndex="1">
 <s:dataProvider>
  <s:ArrayCollection>
   <fx:Object label="200 ft" value="200"/>
   <fx:Object label="500 ft" value="500"/>
   <fx:Object label="1000 ft" value="1000"/>
   <fx:Object label="1500 ft" value="1500"/>
   <fx:Object label="1 Mile" value="5200"/>
  </s:ArrayCollection>
 </s:dataProvider>
</s:DropdownList> 
```

因此，这使用了 Spark DropDownList。它在 MXML 中创建一个由通用对象组成的 dataProvider。通用对象有一个名为 label 的属性；DropDownList 使用它作为每个项目的显示字段。通用对象还可以具有其他属性——在这种情况下是值——可以表示有关项目的一些其他数据。

通常在“现实世界”应用程序中，您不会为 dataProvider 使用通用对象，而是创建一个自定义类。

我使用 selectedIndex 属性将默认值设置为列表中的第二项。

# xpages - 自定义控件的属性存储在哪里？

> ID：12092328
> 
> 赞同：1
> 
> 时间：2012-08-23T13:09:17.657
> 
> 标签：xpages

我知道如何在设计选项卡上定义自定义控件的属性，但我没有在源选项卡上看到它们。它们存储在哪里？如果存储在其他地方，当我复制自定义控件时如何复制它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T13:23:50.750

当您打开设计器的 java 透视图时。转到自定义控件目录，您将找到 xsp-config 文件。这些文件也与它们所属的自定义控件同名

# c# - 如何将 T 强制转换为一个类以匹配“where T : class”约束？

> ID：12092332
> 
> 赞同：5
> 
> 时间：2012-08-23T13:09:28.813
> 
> 标签：c#, generics, constraints

我在处理通用依赖注入处理程序（基本服务定位器）时遇到了泛型问题。

**编辑 1（为清楚起见）**

好的，所以我实际上使用 SimpleInjector 作为 DI 解析器，它的 GetInstance 方法具有类约束，所以这里有一些更完整的代码：

```
 public T GetInstance<T>() where T : class
  {
     try
     {
        // works
        return _container.GetInstance<T>();
     }
     catch( ActivationException aEx )
     {
        return default( T );
     }
  }

  public T GetInstance<T>()
  {
     try
     {
        if( typeof( T ).IsClass )
        {
           // does not work, T is not a reference type
           return _container.GetInstance<T>();
        }
     }
     catch( ActivationException aEx )
     {
        return default( T );
     }
  } 
```

**编辑 2** - 最终代码，因为它在评论中看起来很奇怪：

```
 public T GetInstance<T>()
  {
     try
     {
        if( typeof( T ).IsClass )
        {
           return (T) _container.GetInstance(typeof(T));
        }
     }
     catch( ActivationException aEx )
     {
        return default( T );
     }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:26:05.007

简短的回答是你不能这样做，至少不能直接这样做。编译器必须做很多工作才能绝对保证 T 在您的情况下始终是一个类，因此它不会让您将其作为泛型类型参数传递，而不对 GetEvenMoreGenericInstance 应用相同的类型约束。

您可以通过反射来完成此操作，或者创建一个以 Type 作为参数的非泛型 GetInstance 重载。我建议使用 Type 参数选项，或者完全重组代码以消除调用此方法的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:26:16.703

您可以使用另一种辅助方法吗？请在下面找到测试类

```
public class Test
{
  public T GetInstance<T>() where T : class
  {
    return (T)GetInstance(typeof(T));
  }

  private object GetInstance(Type type) 
  {
     return Activator.CreateInstance(type);
  }

  public T GetEvenMoreGenericInstance<T>()
  {
     if( !typeof( T ).IsValueType )
     {
        return (T)GetInstance(typeof(T));
     }
     return default( T );
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:38:19.627

您可以使用反射找到 的变体`GetInstance`，然后调用适当的变体。

以下示例调用静态方法，但您可以扩展它：

```
namespace Scratch
{
    internal class Foo
    {
      // A class to create
    }

    class Program
    {
        public static T GetInstance<T>() where T : class, new()
        {
            return new T(); // Or whatever...
        }

        public static T CallGeneric<T>(Func<object> f)
        {
            var method = f.Method;

            var converted = method.GetGenericMethodDefinition().MakeGenericMethod(typeof(T));

            return (T) converted.Invoke(null, new object[] {});
        }

        public static T GetEvenMoreGenericInstance<T>()
        {
            if(!typeof(T).IsValueType)
            {
                return CallGeneric<T>(GetInstance<object>);
            }
            return default(T);
        }

        static void Main( string[] args )
        {
            var a = GetEvenMoreGenericInstance<int>();
            var b = GetEvenMoreGenericInstance<Foo>();
        }
    }
} 
```

# php - 对象属性的 PHP 动态名称

> ID：12092336
> 
> 赞同：16
> 
> 时间：2012-08-23T13:09:38.617
> 
> 标签：php, oop

而不是使用

```
$object->my_property 
```

我想做这样的事情

```
$object->"my_".$variable 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-23T13:10:33.383

像这样使用大括号：

```
$object->{'my_' . $variable} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-23T13:11:50.630

这个怎么样：

```
$object->{"my_$variable"}; 
```

我想[这部分](http://www.php.net/manual/en/language.variables.variable.php)PHP 文档可能会有所帮助。简而言之，可以在花括号内编写任意表达式；它的结果（一个字符串）成为要处理的属性的名称。例如：

```
$x = new StdClass();
$x->s1 = 'def';

echo $x->{'s' . print("abc\n")};
// prints
// abc
// def 
```

...但是通常将此表达式的结果存储到临时变量中更具可读性（顺便说一句，可以给它一个有意义的名称）。像这样：

```
$x = new StdClass();
$x->s1 = 'def';

$someWeirdPropertyName = 's' . print("abc\n"); // becomes 's1'.
echo $x->$someWeirdPropertyName; 
```

如您所见，这种方法使大括号不再是必需的，并且至少为读者提供了一些关于属性名称组成的描述。)

PS`print`只是用来说明变量名表达的潜在复杂性；虽然这种代码通常用于认证测试，但在生产中使用这些东西是一个很大的“禁忌”。)

# wordpress - Wordpress wptouch 移动网站重定向

> ID：12092340
> 
> 赞同：1
> 
> 时间：2012-08-23T13:09:44.720
> 
> 标签：wordpress, redirect, mobile

我已经为我的 wordpress 站点（example.com）安装了 wptouch，现在我有另一个子域 m.example.com，它指向 example.com。如果我在任何手机中输入 m.example.com，则应该查看 example.com 手机版。请让我知道如何使用公用数据库和公用文件管理此重定向。

提前致谢。

# sql - Postgres 对 FTS 查询进行分页

> ID：12092343
> 
> 赞同：3
> 
> 时间：2012-08-23T13:09:50.793
> 
> 标签：sql, postgresql, pagination, full-text-search, postgresql-9.1

对 FTS 查询进行分页的最佳方法是什么？`LIMIT`并`OFFSET`浮现在脑海。但是，我担心通过使用限制和偏移量，我会一遍又一遍地运行相同的查询（即，一次用于第 1 页，另一次用于第 2 页......等）。

PostgreSQL 会足够聪明，可以透明地缓存查询结果吗？因此随后满足来自缓存的分页查询？如果没有，我如何有效地分页？

**编辑**

该数据库用于单用户桌面分析。但是，我仍然想知道最好的方法是什么，如果这是一个实时的 OLTP 应用程序。过去，我通过创建一组有序的文档 ID 并针对单独表中的 ID 缓存查询参数来解决 SQL Server 的问题。每隔几个小时清除一次缓存（以便让新文档进入结果集）。

也许这种方法对 postgres 是可行的。但我仍然想知道数据库中存在的机制以及如何最好地利用它们。如果我是数据库开发人员，我会启用查询响应缓存以与 FTS 系统一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T16:01:02.923

****如果**客户端会话可以绑定到在整个会话期间保持打开的特定数据库连接，则可以有效地使用**服务器端 SQL 游标。**这是因为游标不能在不同的连接之间共享。但是，如果它是一个桌面应用程序，每个运行实例都有唯一的连接，那很好。**

 **[DECLARE CURSOR](http://www.postgresql.org/docs/9.1/static/sql-declare.html)的文档解释了`WITH HOLD`在提交的事务中声明游标时结果集将如何实现。

**锁定**根本不应该是一个问题。如果在光标已经物化时修改数据，它不会影响读取器，也不会阻塞写入器。

除此之外，PostgreSQL 中没有隐式查询缓存。LIMIT/OFFSET 技术意味着对每个页面重新执行一次查询，这可能与初始查询一样慢，具体取决于执行计划的复杂性以及缓冲区缓存和磁盘缓存的有效性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T13:18:28.180

好吧，老实说，您可能希望您的查询返回一个活动光标，然后您可以重用它来获取它（光标）表示的结果的某些部分。现在，我不知道 PostGre 是否支持这一点，Mongo DB 支持，我已经尝试过这条路，但它并不酷。例如：您是否知道从查询完成到需要该查询的第二页结果之间需要多长时间？如果时间，光标可以停留在那个量吗？如果可以，它究竟意味着什么，它是否会阻塞资源，这样如果你有很多懒惰的用户，他们开始查询但需要很长时间浏览页面，你的服务器可能会被锁定的游标卡住？

老实说，我认为每次有人要求某个页面时重做一个分页查询是可以的。首先，您将返回少量条目（一次不需要显示超过 10-20 个条目），这将非常快，其次，您应该更可能调整您的服务器，以便它快速执行频繁的请求（添加索引，必要时将其放在[Solr服务器后面等），而不是让这些查询运行缓慢，但缓存它们。](http://lucene.apache.org/solr/)

最后，如果你真的想加快全文搜索，并且有花哨的索引，如不区分大小写、启用前缀和后缀等，你应该看看[Lucene](http://lucene.apache.org/core/)或更好的[Solr](http://lucene.apache.org/solr/)（它是类固醇上的 Lucene）作为一个 in-在您的用户和您的持久层之间的搜索和索引解决方案之间。**

# image - 如何在 c# 中更改 devxpress gridcontrol 中的图像大小？

> ID：12092350
> 
> 赞同：2
> 
> 时间：2012-08-23T13:10:13.540
> 
> 标签：image, grid, devexpress

我正在使用 c# - WinForms 进行编程。我从中选择照片`t_person_photo`。并通过数据表将数据加载到`DevExpress GridControl`.
我表中图像的大小是 150x150 像素，但是当我将这些图像加载到网格时，我想将它们调整为 50x50 像素。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:27:39.223

如果您使用 a`PictureEdit`作为`RepositoryItem`您的专栏，您可以尝试以下方法：

1-将`RowHeight`GridView 的属性设置为 50。

2-将`SizeMode`您的属性设置`RepositoryItemPictorEdit`为`Squeeze`。这样做，图像会适当地缩小以适合容器

祝你好运

# php - 关于 MySQL JOIN 的建议

> ID：12092355
> 
> 赞同：1
> 
> 时间：2012-08-23T13:10:23.557
> 
> 标签：php, mysql, sql, join

我正在努力让我了解 MySQL Join 功能。

这是我有的两张桌子：

用户表：

```
admin_id     username
  *1          peter93
   2       stackoverflowrocks
   3          user3* 
```

管理员详细信息表：

```
 admin_username     description        image
       pedro93          [text]        [image_url]
 stackoverflowrocks     [text]        [image_url]
        user3           [text]        [image_url] 
```

我知道通常将两个数据库链接在一起你会使用 ID 号，但在这种情况下，我想加入两个表，其中 admin_username = username。

任何人都可以帮助我吗？如果有帮助，它适用于 PHP 脚本。

提前致谢！彼得

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T13:12:57.440

所以没关系。你可以加入任何你喜欢的东西。

```
select * 
from user
    inner join admin
    on user.username=admin.admin_username 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:13:38.103

通过字符串列加入与通过 Id 加入相同

```
select * from admin_table
inner join admin_details on admin_table.username = admin_details.admin_username 
```

但请确保您拥有用户名列并为其编制索引，否则当您有大量记录时，您的查询会变慢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T13:21:12.943

您几乎可以加入任何领域，但您可能希望牢记数据类型不匹配、索引等

所有用户

```
SELECT u.*, a.*
FROM users AS u
LEFT JOIN admin AS a 
       ON u.username = a.username 
```

所有管理员用户

```
SELECT u.*, a.*
FROM users AS u
INNER JOIN admin AS a 
       ON u.username = a.username 
```

所有管理员

```
SELECT u.*, a.*
FROM users AS u
RIGHT JOIN admin AS a 
       ON u.username = a.username 
```

# django - 使用 type="ngram" 的 Django+ Haystack + Solr 部分匹配

> ID：12092358
> 
> 赞同：2
> 
> 时间：2012-08-23T13:10:40.723
> 
> 标签：django, solr, django-haystack

我只是想检查一下我是否以正确的方式做事。我想为我的 django 应用程序添加高级搜索功能，并开始使用 SOLR 作为后端测试 Haystack。

因为我确实需要部分匹配，所以我修改了我的 schema.xml，所以 haystack 定义的文本字段是 nGram 类型，如下所示：

```
 <field name="text" type="ngram" indexed="true" stored="true" multiValued="false" /> 
```

部分匹配现在使用 haystack 中包含的默认视图，因此对于名为 John 的模型，如果我查找“Joh”，它会找到，因为它是“ohn”或任何 3 个字母组合。

这是正确的方法吗？由于性能问题，为什么默认没有ngram类型的文本字段？

多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:38:09.057

看到[这个](https://stackoverflow.com/q/6337811/993769)和[这个](https://stackoverflow.com/a/16083106/993769)。我不确定它在性能方面是如何响应的，但是您也可以使用 ngram 来实现部分匹配行为，而无需触及您的 solr 模式。只需将索引的文本字段定义为 EdgeNgramField。

# android - 使用 FFMPEG 从视频中更快地提取缩略图/图像？

> ID：12092362
> 
> 赞同：4
> 
> 时间：2012-08-23T13:10:51.533
> 
> 标签：android, ffmpeg, java-native-interface, libavcodec, libav

我正在使用此命令从视频中提取一系列图像，以将它们表示为视频的视觉时间范围。

`ffmpeg -i inputfile.mp4 -r 1 -t 12 image-%d.jpeg`

我的大部分视频都是 mp4 格式。我能够成功提取图像，但提取时间太长。

有什么办法可以减少图像提取的时间吗？

**编辑**：**我需要 60 秒才能从以 MP4 格式编码的 15 秒长视频中获取 8 个缩略图**，我正在我的**Galaxy Nexus（Android 手机）**上执行此操作有什么方法可以提高操作**速度**，理想情况下我想要它小于**~10secs**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T15:15:55.730

嗯，定义“慢”:) 我只是这样做了，在标准机器上花了四秒钟。可能有一些方法可以加快速度，但 ffmpeg 必须解码 MP4 数据包结构 (GOP)，提取帧并存储 JPG 图像 - 4 秒对我来说看起来很合理。我只是看到您的命令行几乎没有改进空间：

`ffmpeg -i inputfile.mp4 -r 1 -an -t 12 -s 512x288 -vsync 1 -threads 4 image-%d.jpeg`

使用`threads`and`-s`参数（这个参数定义了目标图像大小 - 它不会加快过程，但如果您不想保持源图像大小，它将为您节省额外的步骤）。

此外，请确保您有一个与您的平台相匹配的 ffmpeg 构建 - 那里的速度差异很大。不幸的是，我不能在这里给你一个一般性的建议。[对于您的方案，自己编译 ffmpeg 源代码](https://stackoverflow.com/questions/1618163/building-ffmpeg-for-windows-with-msys-and-mingw)可能是一个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-17T04:47:05.933

这里[https://stackoverflow.com/a/18539500/2563051](https://stackoverflow.com/a/18539500/2563051)是这方面的戏剧 :))

> -ss 参数需要在 -i 之前指定：
> 
> ffmpeg -ss 00:03:00 -i Underworld.Awakening.avi -frames:v 1 out1.jpg
> 
> 此示例将在影片开始后的第三分钟左右生成一个图像帧 (out1.jpg)。输入将使用关键帧进行解析，速度非常快。缺点是它也会在某个关键帧完成搜索，不一定是在指定时间（00:03:00），所以搜索不会像预期的那么准确。

# codeigniter - batch_update 主键加入表

> ID：12092363
> 
> 赞同：0
> 
> 时间：2012-08-23T13:10:58.393
> 
> 标签：codeigniter

我在使用 codeigniter 的批量更新功能时遇到问题，我正在为我的产品和类别使用连接表，因为我有多对多的关系。我到处寻找答案，但仍然一无所获，所以我来这里寻求更多高级技术人员的帮助。

我在表“product_category”中有 2 列，其中包含“product_id”和“category_id”，因此我可以将 1 个产品链接到多个类别。我已经设法执行插入所有 id 的插入查询，但更新不起作用。这是我的代码：

模型：

 `````
function update_product_cat($product, $cat_id) {            
                 $data = array();
                    foreach( $product as $index => $value )
                        {
                    $data[] = array(
                        'product_id'    => $value ,
                        'category_id'  => $cat_id[ $index ]
                        );
                            }

                    $this->db->update_batch('product_category', $data, 
'product_id');

                                } 
````  `大批：

 `````
Array ( [0] => Array ( [product_id] => 327 [category_id] => 3 ) [1] => Array ( [product_id] => 327 [category_id] => 5 ) [2] => Array ( [product_id] => 327 [category_id] => 7 )) 
````  `我的错误代码：

错误号：1062

键 'PRIMARY' 的重复条目 '327-3' 任何帮助将不胜感激： `UPDATE `product_category` SET `category_id` = CASE WHEN `product_id` = '327' THEN '3' WHEN `product_id` = '327' THEN '5' WHEN `product_id` = '327' THEN '7' ELSE `category_id` END WHERE `product_id` IN ('327','327','327')`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:59:05.033

我不是 100% 确定这是您的全部问题，但看起来 product_category 表将 product_id 设置为主键 - 看起来您正在尝试输入许多相同的 product_id。如果是这种情况，您可能应该只使用常规更新而不是批处理，更不用说删除/替换主键了。````

# c - vsprintf 的奇怪行为

> ID：12092366
> 
> 赞同：0
> 
> 时间：2012-08-23T13:11:02.650
> 
> 标签：c

由于这 1 行代码，我一直在拔头发。如果我不为额外的内存动态分配内存（仅通过 char extra[*cur_size+1];），vsprintf 就会卡住。

```
char *append(char *str, int *cur_size, char *fmt, ...) {
    va_list args;
    va_start(args, fmt);
    int len = vsnprintf(NULL, 0, fmt, args) + strlen(str);
    if (len > *cur_size) {
        //alloc more memory
        *cur_size = len * sizeof (char) << 1;
        char *extra = malloc(*cur_size+1);
        // char extra[*cur_size+1]; will cause problem
        strcpy(extra, str);
        str = extra;
    }
    vsprintf(eos(str), fmt, args);
    va_end(args);
    LOGE("len = %d, cur_size = %d", len, *cur_size);
    return str;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:14:04.897

如果您使用：

```
char extra[*cur_size + 1]; 
```

数组将在 next 超出范围`}`，这意味着`str`将是一个悬空指针。当您使用`malloc()`内存时，范围会超过范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T13:15:59.720

该数组超出范围，无法通过别名指针访问`str`，这就是该解决方案不起作用的原因。

但是，您的实际解决方案也被破坏了：它泄漏了调用者传入的内存 in `str`，因为该指针只是被新分配的 memory 覆盖`extra`。

如果你的函数需要一个动态分配的指针`str`，你应该`free()`在覆盖指针之前使用`extra`. 您可能还想查看`realloc()`，如果是这样，请记住 的返回值`realloc()`可能是一个*新*指针，因此请将您当前的解决方案保留`str`在函数返回的位置。

# r - 如何将 R 文本+图像输出捕获到一个文件（html、doc、pdf 等）中？

> ID：12092369
> 
> 赞同：20
> 
> 时间：2010-09-28T21:21:07.823
> 
> 标签：r, sweave, knitr

任务是创建一个文件（word、rtf、pdf、html 或其他），将 R 的输出（例如：不是创建输出的代码）捕获为该格式（包括文本**和**图像）。

这样做的方式应该尽可能少地改变原始 R 脚本。

如果我只关心文本或图像，那么我会使用 ?sink 或 ?pdf。但我不知道如何以简单的方式将两者组合成一个输出。

我知道有一种方法可以[使用 r2wd 导出 R 输出](http://www.r-statistics.com/2010/05/exporting-r-output-to-ms-word-with-r2wd-an-example-session/)，但它在原始代码中涉及到太多的奖章以符合我的口味（我想 sweave 解决方案也是如此，尽管我没有经验告诉我）

以下是未来示例的示例代码：

```
START.text.and.image.recording("output.file") # this is the function I am looking for
x <- rnorm(100)
y <- jitter(x)
print(summary(x))
print(head(data.frame(x,y)))
cor(x,y)
plot(x,y)
print(summary(lm(y~x)))
STOP.text.and.image.recording("output.file") # this is the function I am looking for 
```

**更新**：我被问到不是 Sweave 或[ReproducibleResearch 任务视图](http://cran.r-project.org/web/views/ReproducibleResearch.html)中的其他选项。

原因是：

1.  我（还）不知道 LaTeX
2.  即使知道 LaTeX，我也想要一些具有简单默认值的东西来**简单地**将所有输出按顺序转储在一起。“简单”意味着 - 尽可能少的额外代码/文件管理开销。

我知道像 sweave 或 brew 这样的东西更具可扩展性，但我想看看是否有针对较小项目/脚本的更“简单”的解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-21T07:59:32.477

截至2012年`knitr`，为这个问题提供了完美的解决方案。

例如，创建一个扩展名为 rmd 的文件。将代码包装在几个命令中，如下所示：

```
```{r}
x <- rnorm(100)
y <- jitter(x)
print(summary(x))
print(head(data.frame(x,y)))
cor(x,y)
plot(x,y)
print(summary(lm(y~x)))
``` 
```

您可以通过多种方式将其转换为独立的 HTML 文件。在 RStudio 中，您只需按一个按钮`Knit HTML`。这是[生成的 HTML 文件](https://gist.github.com/2761072)；要实际查看 HTML 在浏览器中的显示方式，请保存文件并打开它。

如您所料，图像代码和输出交织在一起。

当然，您可以而且通常会将您的文件分成多个 R 代码块。但关键是，你不必这样做。

这是我创建的另外几个示例：

*   [R Markdown 入门](http://jeromyanglim.blogspot.com.au/2012/05/getting-started-with-r-markdown-knitr.html)
*   [使用 R Markdown 的案例研究](http://jeromyanglim.blogspot.com.au/2012/05/example-reproducile-report-using-r.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-09-28T22:26:08.440

如果你知道 LaTeX，sweave 可能是你最好的选择。odfWeave 是一种类似的机制，但用于将代码嵌入到 OpenOffice.org 文件中。对于 HTML，有 R2html 包。但是所有这些都可能需要您稍微分解代码以充分利用系统。或者，您的 sweave/odfweave/html 模板可以在单个代码块中获取脚本的数据生成方面，并将输出显示（`print()`语句）放置在需要的位置。您的图形也可以在脚本中调用以生成要作为单独文件嵌入到文档中的图形，然后您可以手动将其包含在模板中。

例如（这*不是*一个完整的`.Rnw`文件用于运行`sweave`）在一个 sweave 文件中，您可以在模板中放置类似这样的内容，该模板为 R 脚本的主要部分提供源代码，该脚本将执行分析并生成 R 对象：

```
<<run_script, eval=TRUE, echo=FALSE, results=hide>>=
source("my_script.R")
@ 
```

然后你需要在你想要打印输出的地方插入代码块：

```
<<disp_output, eval=TRUE, echo=FALSE, results=verbatim>>=
## The results=verbatim is redundant as it is the default, as is eval=TRUE
print(summary(x)) ## etc
@ 
```

然后你需要块来插入数字。

将您的分析代码与输出（打印和/或图形）分开可能也是一种很好的做法，尤其是在分析代码在计算方面很昂贵的情况下。您可以运行一次 - 甚至缓存它 - 同时根据需要更新输出/显示代码。

### 示例编织文件

使用 csgillespie 的示例 sweave 文件，我会像这样进行设置。首先是`my_script.R`包含核心分析代码的文件：

```
x <- rnorm(100)
y <- jitter(x)
corXY <- cor(x,y)
mod.lm <- lm(y~x) 
```

然后是 Sweave 文件

```
\documentclass[12pt]{article}
\usepackage{Sweave}
\begin{document}

An introduction
<<run_analysis, eval=TRUE,echo=FALSE, results=hide>>=
source("my_script.R")
@

% Later
Here are the results of the analysis
<<show_printed_output, echo=FALSE>>=
summary(x))
head(data.frame(x,y))
@

The correlation between \texttt{x} and \texttt{y} is:
<<print_cor, echo=FALSE>>=
corXY
@

Now a plot
\begin{figure}[h]
    \centering
<<echo=FALSE, eval=TRUE, fig=TRUE, width=6, height=4>>=
plot(x,y)
@ 
\caption{\textit{A nice plot.}}
\end{figure}

\end{document} 
```

你似乎想要的东西并不存在；一种将 R 代码和输出组合成文档文件的简单方法。也就是说，如果您不认为 sweave 及其同类简单。您可能需要重新考虑您想要做什么或如何安排分析、图形和输出代码，但您可能最好查看建议的选项之一（sweave、odfweave、brew、R2html）。

高温高压

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-09-29T06:59:17.377

我会鼓励您使用 Sweave，但使用`sink()`.

一个普通的txt文件：

```
sink(file = "test.txt", type = "output")
summary(cars)
sink() 
```

或添加一些 HTML 标签：

```
sink(file = "tal_test.html", type = "output")
cat("<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\"", "\n")
cat("\"http://www.w3.org/TR/html4/strict.dtd\">", "\n")
        cat("<HTML>", "\n")
        cat("<HEAD>", "\n")
        cat("<TITLE>My first HTML document</TITLE>", "\n")
        cat("</HEAD>", "\n")
        cat("<BODY>", "\n")
        summary(cars)
        cat("</BODY>", "\n")
        cat("</HTML>", "\n")
sink() 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-10-04T21:48:25.543

大约一年前，我编写了一个名为 Roux 的脚本来执行此操作。我希望能够通过运行 R 脚本（包括任何图像）来创建 HTML 脚本，而无需更改脚本。

您可以从命令行调用 Roux，如下所示：roux example.R

和 roux 将：

*   在 R 中运行脚本（首先自动需要 Roux 包）
*   语法使用 Pygments 突出显示 .Rout 输出
*   在正确的位置插入图像

Roux R 包是一个非常小的 R 包，它修改了 plot() 和其他一些函数以自动写入随机文件名而不是默认的交互式图形设备。

我已经使用了很多，它对我来说效果很好，尽管我确信如果更多的人将它与新软件包一起使用，那么就会出现一些小问题，很可能你会有一个不同的函数来生成图表和 Roux不会知道它应该为您打开一个 PNG 设备。

自从与 Tal 谈论此事后，我已经更新和改进了代码，现在在这里： [http ://bitbucket.org/ananelson/roux/src](http://bitbucket.org/ananelson/roux/src)

因此，如果您遇到任何问题，请将它们报告给 Bitbucket 上的问题跟踪器。

我添加了对 LaTeX 脚本的支持，因此您可以轻松创建包含 R 脚本脚本（包括图像）的 PDF。（如果您查看示例输出目录，您可以看到一个示例，找到“原始”链接以下载它。）

您确实需要安装 Python 和 Pygments python 库。如果您有旧版本的 Python 并遇到任何问题，请告诉我。

我在我的博客上写了关于 Roux 的文章，但没有过多地宣传它，因为我的努力一直集中在一个名为 Dexy 的新项目上，该项目旨在替代 Sweave。如果您想要更多的灵活性和控制力或对文字文档感兴趣，那么您可能也想查看 Dexy。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-09-28T21:39:45.397

你在你的问题中提到[了 sweave](http://www.stat.uni-muenchen.de/~leisch/Sweave/)，但并不是真的为什么它不合适。您的问题似乎非常适合 Sweave。事实上，您的示例代码可能来自第二个 Sweave[示例](http://www.stat.uni-muenchen.de/~leisch/Sweave/example-2.pdf)。

**示例 Sweave 文件**

如果您了解 Latex，那么 Sweave 就不那么难了。这是您作为 Sweave 文件的示例文件：

```
\documentclass[12pt,BCOR3mm,DIV16]{scrreprt}
\usepackage{Sweave}
\begin{document}

An introduction
<<eval=TRUE,echo=TRUE>>=
x <- rnorm(100)
y <- jitter(x)
print(summary(x))
print(head(data.frame(x,y)))
cor(x,y)
@ 
Now a plot
\setkeys{Gin}{width=0.5\textwidth}
\begin{figure}[h]
    \centering
<<echo=FALSE, eval=TRUE, fig=TRUE, width=6, height=4>>=
plot(x,y)
@ 
\caption{\textit{A nice plot.}}
\end{figure}

\end{document} 
```

在linux下，只需将文件保存为tmp.Rnw即可。然后

```
R CMD Sweave tmp.Rnw
pdflatex tmp.tex 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-09-29T05:58:13.493

还有 LyX，它有一个 Sweave 接口。R / LyX / Sweave 接口代码位于 CRAN 上，网址为[http://cran.fhcrc.org/contrib/extra/lyx/](http://cran.fhcrc.org/contrib/extra/lyx/)。LyX 本身存在于大多数 Linux 发行版中。所有这些魔法都可以在 Windows 上运行，但这绝对不是微不足道的。在 Windows 上，我建议使用 Blue Reference 中的 Inference for R 进行读写 R 编程。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2010-09-29T07:18:00.323

好吧，我只是提醒一下，我正在使用[Asciidoc](http://www.methods.co.nz/asciidoc/)进行简短的报告或编辑网页。现在有一个[R 插件](http://eusebe.github.com/ascii/)（ CRAN 上的[ascii](http://cran.r-project.org/web/packages/ascii/index.html)），它允许将 R 代码嵌入到 asciidoc 文档中。语法与 Markdown 或 Textile 非常相似，因此您将很快学会它。

通过最后两个后端之一输出 (X)HTML、Docbook、LaTeX，当然还有 PDF。

不幸的是，我认为您不能将所有代码包装到一个语句中。但是，它支持大量的 R 对象，见下文。

```
> methods(ascii)
 [1] ascii.anova*              ascii.aov*                ascii.aovlist*            ascii.cast_df*           
 [5] ascii.character*          ascii.coxph*              ascii.CrossTable*         ascii.data.frame*        
 [9] ascii.default*            ascii.density*            ascii.describe*           ascii.describe.single*   
[13] ascii.factor*             ascii.freqtable*          ascii.ftable*             ascii.glm*               
[17] ascii.htest*              ascii.integer*            ascii.list*               ascii.lm*                
[21] ascii.matrix*             ascii.meanscomp*          ascii.numeric*            ascii.packageDescription*
[25] ascii.prcomp*             ascii.sessionInfo*        ascii.simple.list*        ascii.smooth.spline*     
[29] ascii.summary.aov*        ascii.summary.aovlist*    ascii.summary.glm*        ascii.summary.lm*        
[33] ascii.summary.prcomp*     ascii.summary.survfit*    ascii.summary.table*      ascii.survdiff*          
[37] ascii.survfit*            ascii.table*              ascii.ts*                 ascii.zoo*               

   Non-visible functions are asterisked 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2010-09-29T11:23:44.320

这是根据罗穆诺夫的回答，但仍然如此。您可以编写自己的打印件，将输出包装成某种 HTML 格式并将输出嵌入到 HTML 文件中。[使用Data URI 方案](http://en.wikipedia.org/wiki/Data_URI_scheme)的图片也可以这样做，例如使用R 包中的`img`函数。[`base64`](http://cran.r-project.org/web/packages/base64/)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-05-21T20:52:05.793

您可以使用该`R2HTML`包将会话输出到 html，并且该`TeachingDemos`包中有一些类似的功能（请参阅`txtStart`）用于输出到增强的文本和单词（通过`R2wd`）。非图形命令将自动包含在文件中，并且可以通过单个命令插入当前绘图。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-10-02T08:22:18.313

通过 twitter 的奇迹，有人伸出手给我发了一个链接到[这个页面](http://ananelson.com/blog/2009/09/introducing-roux/)，关于一个叫做“roux”的包。它是一年前创建的，我从未听说过它（显然你们大多数人都没有）。

这个包似乎完全符合我在我的问题中寻找的东西，尽管安装似乎并不简单。

我希望使用这个解决方案，也希望看看其他 R 成员是否可以参与这个项目以更好地增强 R。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-09-29T18:00:10.670

@znmeb 提出的尝试 Lyx 的好建议 - 一个更像单词的 LaTeX 前端，正如文档所指出的，在[本版 R 新闻的第 2 页上有一篇很好的文章介绍了它与 Sweave 的使用](http://www.r-project.org/doc/Rnews/Rnews_2008-1.pdf)

这就是我在 Ubuntu 10.04 中遵循[lyx sweave 存储库](http://cran.fhcrc.org/contrib/extra/lyx/)中的指南的方式：

```
sudo apt-get install lyx
cd ~./lyx
wget http://cran.fhcrc.org/contrib/extra/lyx/preferences
光盘布局
wget http://cran.fhcrc.org/contrib/extra/lyx/literate*
wget http://cran.fhcrc.org/contrib/extra/lyx/literate-article.layout
wget http://cran.fhcrc.org/contrib/extra/lyx/literate-book.layout
wget http://cran.fhcrc.org/contrib/extra/lyx/literate-report.layout
wget http://cran.fhcrc.org/contrib/extra/lyx/literate-scrap.inc
cd ~/texmf/tex
wget http://www.biostat.jhsph.edu/~rpeng/ENAR2009/Sweave.sty

```

1.  启动 Lyx
2.  首选项 -> 重新配置
3.  重启 Lyx
4.  文件 -> 新建
5.  文档 -> 设置 -> 文档类 -> 文章（Sweave noweb）

有用的链接：

*   [lyx sweave 存储库](http://cran.fhcrc.org/contrib/extra/lyx/)
*   [关于 Lyx 和 Sweave 的 R 新闻文章](http://www.r-project.org/doc/Rnews/Rnews_2008-1.pdf)

# php - 什么是 POSIX 形式的正则表达式

> ID：12092381
> 
> 赞同：1
> 
> 时间：2012-08-23T13:11:25.410
> 
> 标签：php, regex

扩展的 POSIX 形式的正则表达式如何工作？也就是说，我找到了一个问题来找到一个正则表达式来测试被七整除。我尝试遵循我在[https://codegolf.stackexchange.com/questions/3503/hard-code-golf-regex-for-divisibility-by-7的帮助下创建的代码](https://codegolf.stackexchange.com/questions/3503/hard-code-golf-regex-for-divisibility-by-7)

```
if (preg_match("0|(7|[18]5*4|(2|9|[18]5*6)(3|[29]5*6)*(1|8|[29]5*4)|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4))|(4|[18]5*[18]|(2|9|[18]5*6)(3|[29]5*6)*(5|[29]5*[18])|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(2|9|35*4|(4|35*6)(3|[29]5*6)*(1|8|[29]5*4)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4)))|(5|[18]5*[29]|(2|9|[18]5*6)(3|[29]5*6)*(6|[29]5*[29])|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(4|[18]5*[18]|(2|9|[18]5*6)(3|[29]5*6)*(5|[29]5*[18])|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))(4|[07]5*[29]|(1|8|[07]5*6)(3|[29]5*6)*(6|[29]5*[29])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))*(6|[07]5*4|(1|8|[07]5*6)(3|[29]5*6)*(1|8|[29]5*4)|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(2|9|35*4|(4|35*6)(3|[29]5*6)*(1|8|[29]5*4)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4))))|(6|[18]5*3|(2|9|[18]5*6)(3|[29]5*6)*(0|7|[29]5*3)|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3))|(4|[18]5*[18]|(2|9|[18]5*6)(3|[29]5*6)*(5|[29]5*[18])|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(1|8|35*3|(4|35*6)(3|[29]5*6)*(0|7|[29]5*3)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3)))|(5|[18]5*[29]|(2|9|[18]5*6)(3|[29]5*6)*(6|[29]5*[29])|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(4|[18]5*[18]|(2|9|[18]5*6)(3|[29]5*6)*(5|[29]5*[18])|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))(4|[07]5*[29]|(1|8|[07]5*6)(3|[29]5*6)*(6|[29]5*[29])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))*(5|[07]5*3|(1|8|[07]5*6)(3|[29]5*6)*(0|7|[29]5*3)|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(1|8|35*3|(4|35*6)(3|[29]5*6)*(0|7|[29]5*3)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3)))))(2|9|45*3|(5|45*6)(3|[29]5*6)*(0|7|[29]5*3)|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3))|(0|7|45*[18]|(5|45*6)(3|[29]5*6)*(5|[29]5*[18])|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(1|8|35*3|(4|35*6)(3|[29]5*6)*(0|7|[29]5*3)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3)))|(1|8|45*[29]|(5|45*6)(3|[29]5*6)*(6|[29]5*[29])|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(0|7|45*[18]|(5|45*6)(3|[29]5*6)*(5|[29]5*[18])|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))(4|[07]5*[29]|(1|8|[07]5*6)(3|[29]5*6)*(6|[29]5*[29])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))*(5|[07]5*3|(1|8|[07]5*6)(3|[29]5*6)*(0|7|[29]5*3)|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(1|8|35*3|(4|35*6)(3|[29]5*6)*(0|7|[29]5*3)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3)))))*(3|45*4|(5|45*6)(3|[29]5*6)*(1|8|[29]5*4)|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4))|(0|7|45*[18]|(5|45*6)(3|[29]5*6)*(5|[29]5*[18])|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(2|9|35*4|(4|35*6)(3|[29]5*6)*(1|8|[29]5*4)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4)))|(1|8|45*[29]|(5|45*6)(3|[29]5*6)*(6|[29]5*[29])|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(0|7|45*[18]|(5|45*6)(3|[29]5*6)*(5|[29]5*[18])|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))(4|[07]5*[29]|(1|8|[07]5*6)(3|[29]5*6)*(6|[29]5*[29])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))*(6|[07]5*4|(1|8|[07]5*6)(3|[29]5*6)*(1|8|[29]5*4)|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(2|9|35*4|(4|35*6)(3|[29]5*6)*(1|8|[29]5*4)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4))))))*", "2517146967299095283979176")) {
  echo "A match was found.";
} else {
  echo "A match was not found.";
} 
```

我想知道为什么它会输出“找不到匹配项”。因为 2517146967299095283979176 可以被 7 整除。

Codegolf 的答案或 preg_match 是否有错误，或者是否有几种不同的正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:20:58.100

您的正则表达式缺少分隔符，因此无法正确编译（因此无法正确执行）。

```
if (preg_match("#0|(7|[18]5*4|(2|9|[18]5*6)(3|[29]5*6)*(1|8|[29]5*4)|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4))|(4|[18]5*[18]|(2|9|[18]5*6)(3|[29]5*6)*(5|[29]5*[18])|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(2|9|35*4|(4|35*6)(3|[29]5*6)*(1|8|[29]5*4)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4)))|(5|[18]5*[29]|(2|9|[18]5*6)(3|[29]5*6)*(6|[29]5*[29])|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(4|[18]5*[18]|(2|9|[18]5*6)(3|[29]5*6)*(5|[29]5*[18])|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))(4|[07]5*[29]|(1|8|[07]5*6)(3|[29]5*6)*(6|[29]5*[29])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))*(6|[07]5*4|(1|8|[07]5*6)(3|[29]5*6)*(1|8|[29]5*4)|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(2|9|35*4|(4|35*6)(3|[29]5*6)*(1|8|[29]5*4)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4))))|(6|[18]5*3|(2|9|[18]5*6)(3|[29]5*6)*(0|7|[29]5*3)|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3))|(4|[18]5*[18]|(2|9|[18]5*6)(3|[29]5*6)*(5|[29]5*[18])|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(1|8|35*3|(4|35*6)(3|[29]5*6)*(0|7|[29]5*3)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3)))|(5|[18]5*[29]|(2|9|[18]5*6)(3|[29]5*6)*(6|[29]5*[29])|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(4|[18]5*[18]|(2|9|[18]5*6)(3|[29]5*6)*(5|[29]5*[18])|(3|[18]5*[07]|(2|9|[18]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))(4|[07]5*[29]|(1|8|[07]5*6)(3|[29]5*6)*(6|[29]5*[29])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))*(5|[07]5*3|(1|8|[07]5*6)(3|[29]5*6)*(0|7|[29]5*3)|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(1|8|35*3|(4|35*6)(3|[29]5*6)*(0|7|[29]5*3)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3)))))(2|9|45*3|(5|45*6)(3|[29]5*6)*(0|7|[29]5*3)|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3))|(0|7|45*[18]|(5|45*6)(3|[29]5*6)*(5|[29]5*[18])|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(1|8|35*3|(4|35*6)(3|[29]5*6)*(0|7|[29]5*3)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3)))|(1|8|45*[29]|(5|45*6)(3|[29]5*6)*(6|[29]5*[29])|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(0|7|45*[18]|(5|45*6)(3|[29]5*6)*(5|[29]5*[18])|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))(4|[07]5*[29]|(1|8|[07]5*6)(3|[29]5*6)*(6|[29]5*[29])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))*(5|[07]5*3|(1|8|[07]5*6)(3|[29]5*6)*(0|7|[29]5*3)|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(1|8|35*3|(4|35*6)(3|[29]5*6)*(0|7|[29]5*3)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(4|65*3|(0|7|65*6)(3|[29]5*6)*(0|7|[29]5*3)))))*(3|45*4|(5|45*6)(3|[29]5*6)*(1|8|[29]5*4)|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4))|(0|7|45*[18]|(5|45*6)(3|[29]5*6)*(5|[29]5*[18])|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(2|9|35*4|(4|35*6)(3|[29]5*6)*(1|8|[29]5*4)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4)))|(1|8|45*[29]|(5|45*6)(3|[29]5*6)*(6|[29]5*[29])|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(0|7|45*[18]|(5|45*6)(3|[29]5*6)*(5|[29]5*[18])|(6|45*[07]|(5|45*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))(4|[07]5*[29]|(1|8|[07]5*6)(3|[29]5*6)*(6|[29]5*[29])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(0|7|35*[29]|(4|35*6)(3|[29]5*6)*(6|[29]5*[29])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(3|65*[29]|(0|7|65*6)(3|[29]5*6)*(6|[29]5*[29]))))*(6|[07]5*4|(1|8|[07]5*6)(3|[29]5*6)*(1|8|[29]5*4)|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4))|(3|[07]5*[18]|(1|8|[07]5*6)(3|[29]5*6)*(5|[29]5*[18])|(2|[07]5*[07]|(1|8|[07]5*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))(6|35*[18]|(4|35*6)(3|[29]5*6)*(5|[29]5*[18])|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(2|9|65*[18]|(0|7|65*6)(3|[29]5*6)*(5|[29]5*[18])))*(2|9|35*4|(4|35*6)(3|[29]5*6)*(1|8|[29]5*4)|(5|35*[07]|(4|35*6)(3|[29]5*6)*(4|[29]5*[07]))(1|8|65*[07]|(0|7|65*6)(3|[29]5*6)*(4|[29]5*[07]))*(5|65*4|(0|7|65*6)(3|[29]5*6)*(1|8|[29]5*4))))))*#", "2517146967299095283979176")) {
  echo "A match was found.";
} else {
  echo "A match was not found.";
} 
```

现在，[此代码打印](http://viper-7.com/m3QcNw)：

```
A match was found. 
```

# titanium - 如何在钛移动应用程序中设置应用程序图标？

> ID：12092391
> 
> 赞同：0
> 
> 时间：2012-08-23T13:11:50.707
> 
> 标签：titanium, titanium-mobile

我使用 Titanium 平台开发了通用应用程序。但我无法设置 ipad 应用程序图标 appicon-72.png。

你能告诉我如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T05:31:07.867

更好的方法是在项目的根目录中创建一个 info.plist 文件。您需要添加：

```
<key>CFBundleIconFiles</key>
    <array>
        <string>appicon.png</string>
        <string>appicon@2x.png</string>
        <string>appicon-72.png</string>
    </array> 
```

对于 info.plist 创建试试[这个](https://wiki.appcelerator.org/display/guides/Custom+Fonts)

info.plist 文件现在将在构建期间用于分发到 appstore，并且不同的图标将在二进制文件中正确使用。

# sql - 有没有一种简单而干净的方法可以在 UTC 午夜将“DATE”转换为该日期的“TIMESTAMP AT TIME ZONE”？

> ID：12092393
> 
> 赞同：3
> 
> 时间：2012-08-23T13:12:05.180
> 
> 标签：sql, postgresql, date, timezone

这应该很简单，但是我遇到了令人尴尬的麻烦。

在 PostgreSQL 9.1 中，我需要解释一个`DATE`在数据库中存储为 a 的字段，就好像它是`TIMESTAMPTZ`那个日期的午夜 UTC 一样。我想以一种清晰易读的方式来完成它，以便有人可以出现、查看并理解正在发生的事情。

到目前为止，我发现的唯一方法都非常难看。将其转换为 a然后通过将其解释为 UTC来`TIMESTAMP WITHOUT TIME ZONE`创建 a ：`TIMESTAMP WITH TIME ZONE`

```
SELECT CAST(DATE '2012-01-01' AS TIMESTAMP WITHOUT TIME ZONE) AT TIME ZONE 'utc' 
```

另一种方式更糟糕：

```
('2012-01-01'::date)::timestamptz - (current_timestamp AT TIME ZONE 'UTC' - current_timestamp) 
```

因为它将日期转换为当地时间午夜的时间戳，然后减去时区偏移量。我找不到任何方法将偏移量作为本地时间间隔（这似乎很疯狂），所以我通过`current_timestamp`在当地时间与`current_timestamp`UTC 进行比较来获得它。

我可以解决的唯一其他方法`extract`是获取日期零件并`timestamptz`从中组装新零件。我什至不会展示那个，它太丑了。

这两种方法都让人感到各种奇怪和错误。是否有任何理智的方式 - 标准或否 - 以可读且易于理解的方式从该日期的午夜 UTC转换`DATE`为 a ？`timestamptz`

我正在寻找类似的东西（想象的，行不通）

```
'2012-01-01'::date AS TIMESTAMPTZ IN TIME ZONE '00:00'; 
```

或者

```
to_timestamp('2012-01-01'::date, '00:00'::time, 'UTC'); 
```

请指出我错过的愚蠢明显的事情。

请注意，我正在测试以确保日期在内部真正正确，而不仅仅是在显示时，转换日期`extract(epoch from $1)`在哪里。`$1`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T14:41:57.913

你的第一种方法是正确的。而且它没那么丑，不是吗？在简化的 Postgres 语法中：

```
SELECT '2012-1-1'::date::timestamp AT TIME ZONE 'UTC'; 
```

应用于变量或列，它看起来更加优雅：

```
SELECT mydate::timestamp AT TIME ZONE 'UTC'; 
```

如果您要手动输入日期，您可以快捷方式：

```
SELECT '2012-1-1 0:0'::timestamp AT TIME ZONE 'UTC' 
```

结果将始终根据客户端的本地时区*显示*（即具有相应的偏移量），但这对*value*没有影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T13:23:10.940

注意：我对 PSQL 了解不多，但我对日期/时间问题有一些经验。

你的第一种方式对我来说是正确的。您实际上是从“本地日期”到“本地日期/时间”再到“特定时区的日期/时间”。这些都是合理的步骤，我希望在正常的日期/时间 API 中看到。

据我所知，这种方法从未引入系统默认时区，这是一件非常好的事情。它一次执行一个逻辑步骤，假设强制转换是明智的。

您无需担心目标时区中的本地日期/时间不明确或缺失，因为 UTC 没有任何 DST 转换。

基本上，它看起来不错。如果它的工作原理和性能都和你需要的一样好，我会坚持下去。

# c# - 将存储过程转换为 LINQ

> ID：12092399
> 
> 赞同：2
> 
> 时间：2012-08-23T13:12:32.547
> 
> 标签：c#, asp.net-mvc-3, stored-procedures, linq-to-entities, linq-query-syntax

我正在使用 MVC3 并且仍在学习 LINQ。我在尝试将查询转换为 LINQ to Entities 时遇到了一些麻烦。我想返回一个 Json 方法

我的存储过程

```
Create Procedure [dbo].[ResourceReports]
(
    @EmployeeID int
) 
as
begin
    select   p.projectName AS Projects,  count( b.[CreatedByID]) AS Bugs
    from [EmployeeDetails] e inner join [Bugs] b  on e.[EmployeId] = b.[CreatedByID]
    inner join Projects p on b.ProjectId = p.ProjectId
    where e.[EmployeId] = @EmployeeID   
    group by P.projectName
end 
```

我有几张表，我开始在 LINQ 中写出来，但我不确定如何正确返回正确的类型或强制转换它。

我的控制器

```
public JsonResult Getchart()
{
    var Bug = db.Bugs.ToList<Bug>();
    var EmployeDetails = db.EmployeeDetails.ToList<EmployeeDetail>();
    var projects = db.Projects.ToList<Project>();

    var result = (from e in EmployeDetails 
                  join b in Bug on e.EmployeId equals b.CreatedByID
                  join p in projects on b.ProjectId equals p.ProjectId
                  where e.EmployeId = @EmployeId
                  group p.projectName
                  select new (p.projectName as Project ,count(b.CreatedByID) as Bug)).Take(50);

    return Json(result,JsonRequestBehavior.AllowGet);
} 
```

我将如何将参数传递给查询，希望数据以 json 格式返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:24:36.290

假设您可以将值作为参数传递给方法：

```
public JsonResult Getchart(int employeeId)
{
    var Bug = db.Bugs.ToList<Bug>();
    var EmployeeDetails = db.EmployeeDetails.ToList<EmployeeDetail>();
    var projects = db.Projects.ToList<Project>();

    var result = (from e in EmployeeDetails 
                  join b in Bug on e.EmployeeId equals b.CreatedByID
                  join p in projects on b.ProjectId equals p.ProjectId
                  where e.EmployeeId == employeeId   // <-- use the parameter here
                  group p by p.projectName into g
                  select new {
                     Project = g.Key,
                     Bug = g.Count() 
                     }
                 ).Take(50);
    return Json(result,JsonRequestBehavior.AllowGet);
} 
```

顺便说一句，我故意更正了一些拼写`Employee`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:25:08.697

这是你需要的吗：

```
public JsonResult Getchart(int employeId)
  {
        var Bug = db.Bugs.ToList<Bug>();
        var EmployeDetails = db.EmployeeDetails.ToList<EmployeeDetail>();
        var projects = db.Projects.ToList<Project>();

       var result =   (from e in EmployeDetails 
                      join b in Bug on e.EmployeId equals b.CreatedByID
                      join p in projects on b.ProjectId equals p.ProjectId
                      where e.EmployeId == employeeId
                      group p.projectName
                     select new (p.projectName as Project ,count(b.CreatedByID) as Bug)).Take(50);
                       return Json(result,JsonRequestBehavior.AllowGet);
     } 
```

您确定要执行所有这些“ToList<>()”调用吗？一旦调用“ToList<>()”，就可以将所有这三个表从数据库中带入内存。如果它们很大，则可能是性能问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T13:30:34.363

如果这是一个控制器操作，您可能希望通过 URL 传递 ID。此外，在查询*之前*无需调用`ToList`您的表，在数据库中进行查询并仅提取结果，例如

 *```
public JsonResult GetChart(int employeeId)
{
    var query = (from e in db.EmployeeDetails
                join b in db.Bugs on e.EmployeeId equals b.CreatedById
                join p in db.Projects on b.ProjectId equals p.ProjectId
                where e.EmployeeId == employeeId
                group new {p, b} by new {
                    p.ProjectName
                } into g
                select new {
                    Project = g.Key.Name,
                    Bugs = g.Count()
                }).Take(50);
    return Json(query.ToList(), JsonRequestBehaviour.AllowGet);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T09:24:50.297

```
public JsonResult GetChart()
            {
                //int employeeId
              var Bug = db.Bugs.ToList<Bug>();
              var EmployeDetails = db.EmployeeDetails.ToList<EmployeeDetail>();
              var projects = db.Projects.ToList<Project>();

              var query = (from e in EmployeDetails
                           join b in Bug on e.EmployeId equals b.CreatedByID
                           join p in projects on b.ProjectId equals p.ProjectId
                           where e.EmployeId == 1
                           group new { p, b } by new
                           {
                               p.projectName
                           } into g
                           select new ChartModel
                           {
                               ProjectName = g.Key.projectName,                     

                               bug = g.Count()
                           }).ToList();
              return Json(query, JsonRequestBehavior.AllowGet);
} 
```

我有 ...*

# ios - 以编程方式创建和显示 UIBarButtonItem 的正确方法是什么？

> ID：12092400
> 
> 赞同：0
> 
> 时间：2012-08-23T13:12:32.213
> 
> 标签：ios, uinavigationcontroller, automatic-ref-counting, uibarbuttonitem

我遇到了一个问题：每次`UIBarButtonItem`点击 an 时，我正在开发的应用程序都会崩溃。

我在主 ViewController 的 viewDidLoad 方法中创建按钮：

```
UIBarButtonItem *settingsButton = [[UIBarButtonItem alloc] initWithTitle:@"Settings" style:UIBarButtonItemStyleBordered target:self action:@selector(showSettings)];
self.navigationItem.leftBarButtonItem = settingsButton; 
```

该`showSettings`方法只包含一个 NSLog()：

```
- (void)showSettings {
    NSLog(@"ciao");
} 
```

该按钮在导航栏中正确显示，但只要点击该按钮，应用程序就会崩溃并显示一条`exc_bad_access`消息。

我究竟做错了什么？

**编辑**： ARC 已启用，我正在 iOS 5.1 模拟器中运行代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:16:48.690

变化：

```
UIBarButtonItem *settingsButton = [[UIBarButtonItem alloc] initWithTitle:@"Settings" style:UIBarButtonItemStyleBordered target:self action:@selector(showSettings:)]; 

- (void) showSettings:(UIBarButtonItem *)sender
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:52:37.373

正如关于选择器的[参考](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocSelectors.html)文档所述：

> 如果一个对象接收到一条消息来执行一个不在其库中的方法，则会导致错误。这与调用不存在的函数是同一种错误。但是因为消息传递发生在运行时，所以错误通常在程序执行之前并不明显。

因此，请确保您的方法在视图控制器的范围内。我将首先检查您是否有任何错字。如果您的方法不带任何参数，请不要使用`:`并确保您已在类描述中声明了您的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-28T12:19:21.773

以编程方式创建 uibarbutton。此示例用于自定义 uibarbutton

```
UIButton *timebutton = [[UIButton alloc]initWithFrame:CGRectMake(0, 0, 90, 40) ];
[timebutton setTitle:timeString forState:UIControlStateNormal];
[timebutton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];

UIBarButtonItem *rightBarButtonItem1 = [[UIBarButtonItem alloc]  
                                      initWithCustomView:timebutton];
[rightBarButtonItem1 setTintColor:[UIColor blackColor]];

//set the action for button
rightBarButtonItem1.action =  @selector(navigationMethod:);

self.navigationItem.rightBarButtonItem = rightBarButtonItem1;

//Method declaration
-(IBAction)navigationMethod:(id)sender{
 // action
} 
```

希望这可以帮助你

# regex - 带有正则表达式的电子邮件验证，它支持对电子邮件 ID 的所有验证

> ID：12092406
> 
> 赞同：0
> 
> 时间：2012-08-23T13:12:46.370
> 
> 标签：regex

我想要一个支持验证电子邮件 ID 的正则表达式，它不应该支持以下电子邮件 ID：

1.  `1test@yopmail.com`

2.  `test_test_@yopmail.com`

3.  `test.123_abc@yopmail.com`

我正在使用以下正则表达式：

```
^([0-9a-zA-Z]+[_*|.*]{1}[0-9a-zA-Z]*|[_*|.*]|[0-9a-zA-Z]*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})$ 
```

但它没有显示所有的验证

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T05:34:19.743

得到这个支持电子邮件的所有验证

^([az]+[0-9] *[_* |. *]?[a-z0-9]* )@[az]+(.[az]+)*(.[az]{2,4})$

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T09:29:21.930

以下应该为您做：

```
function validateEmail(email) { 
    var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
} 
```

# c# - 退出被阻塞等待传入管道流的应用程序

> ID：12092413
> 
> 赞同：2
> 
> 时间：2012-08-23T13:13:09.600
> 
> 标签：c#, named-pipes, namedpipeserverstream

我有一个应用程序在线程中运行 NamedPipeServerStream 并等待其上的连接，如下所示：

```
NamedPipeServerStream pipeServerTemp = new NamedPipeServerStream(PIP_NAME, PipeDirection.InOut, 254);
pipeServerTemp.WaitForConnection(); 
```

应用程序总是在等待新的连接，但是当我尝试终止应用程序时，进程挂起对 WaitForConnection 的调用。

我试过中止有问题的线程，但它不会杀死应用程序。

如何告诉 NamedPipeServerStream 停止侦听连接？

**编辑：**

我可以看到 NamedPipeServerStream 有一个名为的方法，`EndWaitForConnection`但它需要一个对 an 的引用`IAsynchResult`，我从哪里得到那个对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:28:59.177

[在另一个问题](https://stackoverflow.com/questions/607872/what-is-a-good-way-to-shutdown-threads-blocked-on-namedpipeserverwaitforconnect)的答案中找到了我正在寻找的解决方案。

对于它的价值，我选择了连接到 Stream 然后立即关闭连接而不是使其异步的简单解决方案。

# arrays - Perl 问题

> ID：12092417
> 
> 赞同：0
> 
> 时间：2012-08-23T13:13:23.657
> 
> 标签：arrays, perl, templates, hash, dbi

我正在编写一个 Perl 脚本，但我遇到了一个我无法真正克服的问题。这是我的代码：

```
my @rowses = ();

while ( @list = $sth->fetchrow_array())
{
    %row = ();

    if($list[30] == 1) 
      %row = (
            cod_cliente => $list[1],
            rag_soc => $list[2], 
            p_iva => $list[11],
            IDanagrafica => $list[0],
            tabella => $tab,
            IDanagraficaE => $list[0],
            tabellaE => $tab,
            checkbox => "checked",
            );
    $LOL = \%row;
    print $cgi->p($LOL);
}
else
{
    %row = (
            cod_cliente => $list[1],
            rag_soc => $list[2], 
            p_iva => $list[11],
            IDanagrafica => $list[0],
            tabella => $tab,
            IDanagraficaE => $list[0],
            tabellaE => $tab,
            checkbox => "",
            );
    $LOL = \%row;
    print $cgi->p($LOL);
}

push (@rowses, \%row);
}

 $template->param(table => \@rowses);   
$template->param(tab => $tab); 
```

当我尝试打印对行（$LOL）的引用以进行调试时，它什么也不打印，当我在@rowses 打印引用时，它是一个充满所有相同哈希的数组，最后一个由从声明中。

奇怪的是，如果我每次打印一个哈希行，而不引用它，它就会很好地打印它们，并且全部打印出来。

我这样做是为了将包含所有哈希的数组引用传递给 TMPL_LOOP，然后打印它们；但它会打印一长串仅提取的最后一行的列表。

提前感谢所有帮助我的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T13:25:24.640

对于 while 循环的每次迭代，您`%row`都是相同的变量。您只将对它的引用存储在 中`@rowses`，这意味着如果您更改`%row`，所有引用都指向更改后的哈希。您应该为循环的每次迭代定义一个新`%row`的，例如使用

```
my %row; 
```

不死

```
%row = (); 
```

为什么不打印 $LOL：如果第一个参数`p`是哈希引用，则将其解释为`<p>`.

# java - JXTitledPanels 在 JPanel 中，用户需要能够选择一个并单击删除按钮

> ID：12092418
> 
> 赞同：3
> 
> 时间：2012-08-23T13:13:24.180
> 
> 标签：java, swing, jpanel, swingx

我有一个`JPanel`n 个`JXTitledPanel`s。用户应该能够单击`JXTitledPanel`并点击删除按钮将其删除。

我的问题是我怎么知道`JXTitlePanel`用户选择了什么。

[这](https://i.imgur.com/oDomy.png)是我程序中的一个屏幕，基本上我希望用户单击“医院”，单击删除，医院表将消失。

[![截屏](../Images/fc9e39bc0425ae2ab6a1a0941420d45e.png)](https://i.imgur.com/oDomy.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:29:15.337

我可能会在正确的装饰位置添加一个“删除”控件。这样，您可以传递对 JXTiltedPane 控件的引用

```
titledPane.addRightDecoration(new MyRemoveControl(titkedPane)); 
```

或者这样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T02:15:55.703

@madprogrammer 可能有最简单的答案，但如果您不想更改应用程序的外观，您可以将按钮`actionListener`与`mouseListener`面板结合起来。

该`mouseListener`部分保存最后一次单击的面板，并且`actionListener`仅删除由`mouseListener`.

这是我制作的一个快速示例 - 它没有使用`JXTitledPane`，但这并不重要，因为它们都在同一个层次结构中。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class TempProject extends JFrame{

    public TempProject(){
        Box mainContent = Box.createVerticalBox();

        //Create Button
        JButton removePanel = new JButton("RemovePanel");
        RemoveListener listener = new RemoveListener(mainContent);
        removePanel.addActionListener(listener);
        mainContent.add(removePanel);

        //Create Panels
        mainContent.add(getPanel(Color.red, listener));
        mainContent.add(getPanel(Color.orange, listener));
        mainContent.add(getPanel(Color.pink, listener));
        mainContent.add(getPanel(Color.magenta, listener));

        setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        setContentPane(mainContent);    
        pack();
        setVisible(true);
    }

    public JPanel getPanel(Color color, RemoveListener l){
        JPanel result = new JPanel();
        result.setBackground(color);
        result.add(new JLabel(color.toString()));
        result.addMouseListener(l);
        return result;
    }

    public static void main(String args[])
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                new TempProject();
            }
        });
    }

    public static class RemoveListener extends MouseAdapter implements ActionListener{

        Component lastSelectedComponent = null;
        Container master; //The panel containing the ones being listened to

        public RemoveListener(Container master){
            this.master = master;
        }

        @Override
        public void mouseClicked(MouseEvent arg0) {
            lastSelectedComponent = (Component)arg0.getSource();
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            if(lastSelectedComponent != null){
                master.remove(lastSelectedComponent);
                master.repaint();
            }
        }

    }

} 
```

# objective-c - Objective-C或NSDrawer中的滑出面板？

> ID：12092419
> 
> 赞同：1
> 
> 时间：2012-08-23T13:13:26.167
> 
> 标签：objective-c, panel, slide

也许有人可以与我分享一些如何实现滑出面板的信息？因为我厌倦了尝试根据需要自定义 NSDrawer。我认为有一些方法可以实现，例如 NSPanel 滑出。我对吗？如果是，那怎么办？

# php - php orm 够强大吗？

> ID：12092421
> 
> 赞同：5
> 
> 时间：2012-08-23T13:13:32.610
> 
> 标签：php, orm

我正在将一个应用程序从 MySQL 转换为 MSSQL，其中的语句是用特定于 db 的 SQL 编写的。部分语句涉及`isnull()`,`ifnull()`目前`concat()`需要手动重写为 MSSQL 语法。

为了提高代码可移植性，我正在考虑可以解决上述问题的 ORM 替代方案，而且速度仍然很快（我不希望 ORM 对结果集进行后处理）。

目标数据库：

*   MySQL
*   微软SQL
*   PostgreSQL

感谢在这件事上的任何提示或经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:26:35.913

我认为最好的 ORM 之一是 Doctrine 2。

参见项目网站[http://doctrine-project.org/](http://doctrine-project.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:36:28.393

我正在使用 LLBLGen Pro [http://en.wikipedia.org/wiki/LLBLGen_Pro](http://en.wikipedia.org/wiki/LLBLGen_Pro)

该系统是可扩展的，因此任何第三方 O/R 映射器框架都可以在设计器中使用

# java - 在 Eclipse 中仅在一个项目中搜索文件

> ID：12092425
> 
> 赞同：10
> 
> 时间：2012-08-23T13:13:44.717
> 
> 标签：java, eclipse, eclipse-indigo

有没有办法仅在某些特定项目中而不是在所有工作区中搜索文件或类（我的意思是 Ctrl + Shift + T 或 R）？我有 Eclipse Indigo。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T13:29:14.490

在极右使用选项上`Menu`的`Ctrl + Shift + T or R`对话箭头上，然后设置工作集，现在您已完成，您只能从选定的工作集中搜索文件。`Small down``Select Working Set`

```
Ctrl + Shift + T Or R
>Menu
 >Select Working Set
  >New
   >Java
     >Add Or Add All
      >Click on Selected Working set in Select Working set Dialog
        >Select Working set and you are done. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:23:19.040

在项目资源管理器中选择项目 -> Ctrl + H -> 文件搜索选项卡 -> 在包含文本中输入文件名 -> 检查范围下的选定资源。

另一个技巧 -> 如果您只想从 *.java 文件中搜索，则在同一文件搜索选项卡的文件名模式文本框中输入 *.java 或 *.props。这将为您过滤掉

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-16T18:10:44.030

单击文件搜索选择子类别“范围”下的封闭项目。这将使您能够在特定项目中进行搜索

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T13:18:56.430

为此，您有“搜索”菜单。为此，您可以使用 Search > File 或 Search > Java。在搜索对话框中，您可以将搜索范围限制为仅选定的项目，或者作为预定义的工作集，只要一些附加选项即可。

# sql - 如何将序列值分配给变量？

> ID：12092430
> 
> 赞同：5
> 
> 时间：2012-08-23T13:13:54.337
> 
> 标签：sql, oracle

我需要将一个序列值分配给一个变量，以便在序列值增加后稍后使用。我已经尝试过了，但它给出了一个错误：

```
variable imageID number;
select SEQ_IMAGE_ID.CURRVAL into :imageID from dual;

select * from IMAGES where IMAGE_ID = :imageID;

Error starting at line 2 in command:
select SEQ_IMAGE_ID.CURRVAL into :imageID from dual
Error report:
SQL Error: ORA-01006: bind variable does not exist
01006\. 00000 -  "bind variable does not exist" 
```

我已经三次检查序列名称是否正确，有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T13:32:40.957

根据声明，您似乎在 SQL*Plus 或 SQL Developer 中执行此操作`variable`。您需要在 PL/SQL 块中进行分配，或者使用显式`begin`/`end`或使用`exec`隐藏它的调用：

```
variable imageID number;
exec select SEQ_IMAGE_ID.CURRVAL into :imageID from dual;
select * from IMAGES where IMAGE_ID = :imageID; 
```

如果您使用的是 11g，则不需要`select`，您可以分配：

```
variable imageID number;
exec :image_id := SEQ_IMAGE_ID.CURRVAL;
select * from IMAGES where IMAGE_ID = :imageID; 
```

您还可以使用替换变量：

```
column tmp_imageid new_value image_id;
select SEQ_IMAGE_ID.CURRVAL as tmp_imageID from dual;
select * from IMAGES where IMAGE_ID = &imageID; 
```

注意从`:`表示绑定变量`&`到表示替换变量的变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T13:26:33.033

在 PL/SQL 中，需要声明变量，如下所示：

```
declare
  V_IMAGEID;
begin
  select SEQ_IMAGE_ID.CURRVAL into V_IMAGEID from dual;

  select * /*into ... */ from IMAGES where IMAGE_ID = V_IMAGEID;
end; 
```

如果您使用绑定变量，则必须绑定变量。错误消息表明情况并非如此。如何精确绑定变量取决于语言/情况。确保在绑定变量时使用正确的方向。在第一个（双重）查询中，您将需要一个 out 参数。您可能需要指定此项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T13:19:04.527

只需在 :imageId 之前删除 ':'。如果您处于触发器中，请使用 :new.imageid

单词变量也应该被删除

ps 我的意思是匿名块肯定。

# android - Android计费 - 如何设置购买按钮并正确读取用户是否取消或购买？

> ID：12092431
> 
> 赞同：2
> 
> 时间：2012-08-23T13:13:54.807
> 
> 标签：android, android-billing

我正在从 Android 提供的地下城示例中工作，感觉我几乎得到了正确的结果，但我不知道如何检测该人是否按下了后退按钮并退出了购买。这是我到目前为止所拥有的：

```
Button buy = (Button)findViewById(R.id.buy); 
buy.setOnClickListener(new Button.OnClickListener() 
{  
   public void onClick(View v) 
   {                                           
     try
     {
        if (mBillingService.requestPurchase(issueProductId, 
                                                Consts.ITEM_TYPE_INAPP , null)) 
        {
          // Not sure what to do here. Has the person been sent to the buy screen yet or no?
          // There are these strings I need to check for but not entirely certain how:                

          if(mBillingService.checkBillingSupported(Consts.ITEM_TYPE_INAPP))
          { 
                 // OK
          } 
          else 
          {
             // If billing is not supported,  give them the item for free
                 Intent myIntent = new Intent(ExtraHelpActivity.this, PsychologyActivity.class);
                 ExtraHelpActivity.this.startActivity(myIntent);    
          }    

          try
          {   
          if (mBillingService.requestPurchase(issueProductIdPsych, 
                     Consts.ITEM_TYPE_INAPP ,  null)) 
          {
                  // HOW DO I CHECK HERE IF THE USER CANCELED OUT OF THE PURCHASE? 
                  // EVEN ON CANCEL, THEY ARE BEING TAKEN TO THE ITEM THAT THEY NEED TO PAY FOR.  

              // Send them to the screen of the article.
                  Intent myIntent = new Intent(ExtraHelpActivity.this, PsychologyActivity.class);
              ExtraHelpActivity.this.startActivity(myIntent);                         
          } 
        }
     catch ( Exception e )
     {
        // Report exception.
     }  
     }); 
```

我在我感到困惑的地方添加了一些内联注释。我不确定如何阅读该人是购买了该商品还是取消了该商品。如果有人可以帮助我，那就太好了。

现在这段代码将人带到购买屏幕，有些人购买，但是当人们按下取消时，他们仍然被带到他们没有购买的项目。:)

编辑：

顺便说一句，如果用户已经购买了该项目并想要返回它，那么购买请求状态不会改变，对吧？那么最终会触发什么方法呢？我用一次购买进行了测试，我可以通过文章购买访问一个屏幕的权限，但现在无法再次访问它，因为付款屏幕一直告诉我我已经购买了该项目，而不是带我到下一页。

这是我的新 onStateChanged 方法的样子：

```
@Override
public void onPurchaseStateChange(PurchaseState purchaseState, String itemId,
                int quantity, long purchaseTime, String developerPayload) 
{
    if (purchaseState == PurchaseState.PURCHASED) 
    {
        mOwnedItems.add(itemId);

        if ( itemId != null && itemId.trim().equals("3") )
        {
        Intent myIntent = new Intent(ExtraHelpActivity.this, PsychologyActivity.class);
        ExtraHelpActivity.this.startActivity(myIntent);
        }
        if ( itemId != null && itemId.trim().equals("4") )
        {
           Intent myIntent = new Intent(ExtraHelpActivity.this, NumberOfBusinessesActivity.class);
    }                
   }
   else 
   if (purchaseState == PurchaseState.CANCELED) 
   {  
                // purchase canceled
   } 
   else 
   if (purchaseState == PurchaseState.REFUNDED) 
   {
                // user ask for a refund
   }
   else
   {   
                if ( itemId != null && itemId.equals("3") )
                {
                      Intent myIntent = new Intent(ExtraHelpActivity.this, PsychologyActivity.class);
                      ExtraHelpActivity.this.startActivity(myIntent);
                }
                if ( itemId != null && itemId.equals("4") )
                {
                      Intent myIntent = new Intent(ExtraHelpActivity.this, NumberOfBusinessesActivity.class);
                      ExtraHelpActivity.this.startActivity(myIntent);   
                }                   
     }           
} 
```

当我测试它并购买了一篇文章时，它确实到达了这里，`if (purchaseState == PurchaseState.PURCHASED)`但不是个人如果里面的案例，即使 itemId id 是“3”或“4”

编辑：

这就是我在活动开始时声明产品 ID 的方式：

```
String issueProductIdWebMarketing = "1";    
    String issueProductIdDonate = "2";  
    String issueProductIdPsych = "3";
    String issueProductIdNumberofBusinesses = "4"; 
```

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T13:30:11.283

根据[计费集成指南](http://developer.android.com/guide/google/play/billing/billing_integrate.html)：

> 当请求的交易改变状态时（例如，购买成功通过信用卡支付或用户取消购买），Google Play 应用程序发送一个 IN_APP_NOTIFY 广播意图。此消息包含一个通知 ID，您可以使用它来检索 REQUEST_PURCHASE 请求的交易详细信息。

意图`com.android.vending.billing.PURCHASE_STATE_CHANGED`包含`purchaseState`

> 订单的购买状态。可能的值为 0（已购买）、1（已取消）、2（已退款）或 3（已过期，仅用于订阅购买）。

[来源](http://developer.android.com/guide/google/play/billing/billing_reference.html#billing-interface)（表 4）

* * *

编辑：在地牢示例中，有一个内部类扩展`PurchaseObserver`（参见`Dungeons`活动）来完成这项工作，尤其是（`onPurchaseStateChange`）

* * *

EDIT2：一些伪代码

在活动中（`Dungeons`sdk 示例中的类）：

```
Button buy = (Button)findViewById(R.id.buy); 
buy.setEnabled(false);
buy.setOnClickListener(new Button.OnClickListener() {  
    public void onClick(View v) 
    {
        // show purchase dialog and call mBillingService.requestPurchase() on dialog validation
    }
});

// request to see if supported
if (!mBillingService.checkBillingSupported()) {
    // not supported
} 
```

在观察者中（`DungeonsPurchaseObserver`在样本中）：

```
public void onBillingSupported(boolean supported, String type) {
    if (type == null || type.equals(Consts.ITEM_TYPE_INAPP)) {
        if (supported) {
           // billing supported: enable buy button
        } else {
           // billing not supported: disable buy button
        }
    }
}

public void onPurchaseStateChange(PurchaseState purchaseState, String itemId,
    int quantity, long purchaseTime, String developerPayload) {
    if (purchaseState == PurchaseState.PURCHASED) {
        // item purchased
    } else if (purchaseState == PurchaseState.CANCELED) {
        // purchase canceled
    } else if (purchaseState == PurchaseState.REFUND) {
        // user ask for a refund
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T12:00:41.467

问题是调用`mBillingService.requestPurchase`不是同步的。因此，您无法在购买成功后立即检查。

我建议您使用库[AndroidBillingLibrary](https://github.com/robotmedia/AndroidBillingLibrary)。有了它，您可以轻松获取 Google Play 的所有活动。为此，您可以从助手中使用`onRequestPurchaseResponse()`and或.`onPurchaseStateChanged()``AbstractBillingActivity``AbstractBillingFragment`

# c# - 在下面的 c# asp.net 中找不到逻辑错误

> ID：12092432
> 
> 赞同：-3
> 
> 时间：2012-08-23T13:14:04.150
> 
> 标签：c#, asp.net, mysql, webforms, odbc

我编写了这段代码来使用 odbc 连接从 mysql 数据库中获取数据。它没有给出错误，但也没有输出。我无法找到问题所在。

```
public partial class Members : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        DataTable table = new DataTable();
        string conString = WebConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
        try
        {
            using (OdbcConnection con = new OdbcConnection(conString))
            {
                con.Open();
                // We are now connected. Now we can use OdbcCommand objects
                // to actually accomplish things.
                using (OdbcCommand com = new OdbcCommand("SELECT * FROM abc", con))
                {
                    using (OdbcDataAdapter ad = new OdbcDataAdapter(com))
                    {
                        ad.Fill(table);
                    }
                }
                con.Close();
            }
        }
        catch (Exception ei)
        {
            Label1.Text = ei.Message;
        }

        GridView1.DataSource=table;
        GridView1.DataBind();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:41:42.023

在 web.config 中你有一个 connectionString 吗？请检查一下。如果没有，您可以从 Visual Studio 设计器添加数据源，它会要求在其中一个步骤中添加连接字符串。最后，您可以从设计器中删除数据源，但 web.config 文件中仍然有连接字符串。在您的代码中，您可以试试这个

字符串 SQL_CONNECTION_STRING = System.Configuration.ConfigurationManager.ConnectionStrings["SqlConnectionTest"].ConnectionString;

其中“SqlConnectionTest”是 web.config 中连接字符串的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:08:47.037

问题是我只是通过将 c# 文件替换为 vb 文件以使其成为 ac# 项目来转换 vb 项目，这造成了整个混乱。在新项目上完成代码时，代码工作得非常好。

# android - 安卓联系人管理器

> ID：12092434
> 
> 赞同：0
> 
> 时间：2012-08-23T13:14:10.753
> 
> 标签：android, contacts

我想模拟 android 中的本机联系人管理器行为，我该怎么做？有例子或代码吗？我知道如何检索联系人并显示它们，我需要做的是单击联系人姓名，这会将我带到联系人的详细信息。

我坚持的部分是如何使用联系人的详细信息执行操作，即拨打号码或通过电子邮件发送电子邮件地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:31:23.430

如果您可以检索联系人，请进行自己的活动以显示所有详细信息。然后您可以使用电子邮件编写器发送电子邮件，如下所示：

```
Intent email = new Intent(Intent.ACTION_SEND);
email.putExtra(Intent.EXTRA_EMAIL,new String[] { "yourid@gmail.com"});
email.putExtra(Intent.EXTRA_SUBJECT,"Contact Us");
email.putExtra(Intent.EXTRA_TEXT, text field here);

email.setType("message/rfc822");

startActivity(Intent.createChooser(email, "Choose an Email client :")); 
```

并使用此调用：

```
Intent callIntent = new Intent(Intent.ACTION_CALL);
callIntent.setData(Uri.parse("tel:123456789"));
startActivity(callIntent); 
```

同样，您也可以发送短信。

希望这可以帮助！

编辑：
为了`ListView`尝试这个代码来实现`onClickListener`：

```
ListView lv;
String listview_array[] = { "ONE", "TWO", "THREE", "FOUR", "FIVE", "SIX", "SEVEN", "EIGHT", "NINE", "TEN" };

lv = (ListView) findViewById(R.id.listview);
lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, listview_array));
lv.setTextFilterEnabled(true);
lv.setOnItemClickListener(new OnItemClickListener()
{
   public void onItemClick(AdapterView<?> arg0, View v, int position, long id)
   {
       AlertDialog.Builder adb = new AlertDialog.Builder(ListviewOnclickExample.this);
       adb.setTitle("ListView OnClick");
       adb.setMessage("Selected Item is = " + lv.getItemAtPosition(position));
       adb.setPositiveButton("Ok", null);
       adb.show();                     
   }
}); 
```

每当`ListView`将选中您的项目时，您可以使用该`position`变量访问它。

# c# - System.MethodAccessException：尝试通过安全透明方法访问安全关键方法在所有应用程序上失败

> ID：12092435
> 
> 赞同：18
> 
> 时间：2012-08-23T13:14:13.407
> 
> 标签：c#, asp.net, .net, .net-4.0, visual-web-developer-2010

您好，提前感谢您的帮助，我知道已经发布了这个问题或类似问题，通常与 MVC 3 应用程序有关。但是，每当我尝试使用 .net 4.0 目标框架从 Visual Web Developer Express 2010 中启动任何应用程序时，都会收到此错误消息。

确切的错误信息是：

> 尝试通过安全透明方法 'System.Runtime.Diagnostics.DiagnosticTrace..ctor(System.String, System.Guid)' 访问安全关键方法 'System.Runtime.Diagnostics.EtwDiagnosticTrace..ctor(System.String, System.Guid )'失败'。
> 
> 程序集 'System.ServiceModel.Internals, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 标记有 AllowPartiallyTrustedCallersAttribute，并使用 2 级安全透明模型。2 级透明度会导致 AllowPartiallyTrustedCallers 程序集中的所有方法默认变为安全透明，这可能是此异常的原因。

堆栈跟踪：

```
[MethodAccessException: Attempt by security transparent method 'System.Runtime.Diagnostics.DiagnosticTrace..ctor(System.String, System.Guid)' to access security critical method 'System.Runtime.Diagnostics.EtwDiagnosticTrace..ctor(System.String, System.Guid)' failed.

Assembly 'System.ServiceModel.Internals, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' is marked with the AllowPartiallyTrustedCallersAttribute, and uses the level 2 security transparency model.  Level 2 transparency causes all methods in AllowPartiallyTrustedCallers assemblies to become security transparent by default, which may be the cause of this exception.]
   System.Runtime.Diagnostics.DiagnosticTrace..ctor(String traceSourceName, Guid etwProviderId) +24
   System.ServiceModel.Activation.FxTrace.InitializeTracing() +90
   System.ServiceModel.Activation.FxTrace.get_Trace() +84
   System.ServiceModel.ServiceHostingEnvironment.EnsureInitialized() +59
   System.ServiceModel.ServiceHostingEnvironment.OnEnsureInitialized(Object state) +4
   System.ServiceModel.AspNetPartialTrustHelpers.PartialTrustInvoke(ContextCallback callback, Object state) +52
   System.ServiceModel.ServiceHostingEnvironment.SafeEnsureInitialized() +65
   System.ServiceModel.Activation.HttpModule.ProcessRequest(Object sender, EventArgs e) +58
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +143
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +69 
```

我在这里完全不知所措。如果我从头开始创建任何基本应用程序并尝试启动它，即使没有添加任何内容，我也会收到此错误屏幕。我尝试从

```
<compilation debug="true" targetFramework="4.0" /> 
```

标记并运行它没有结果。我已经尝试删除该属性并添加

```
<startup useLegacyV2RuntimeActivationPolicy="true">
  <supportedRuntime version="v2.0.50727"/>
  <supportedRuntime version="v4.0.30319"/>
 </startup> 
```

正如此线程中所建议的那样：[BadImageFormatException - 是否可以指定使用哪个 .NET 版本来运行可执行文件？](https://stackoverflow.com/questions/3706428/badimageformatexception-is-it-possible-to-specify-which-net-version-is-used-t) 我尝试修复 .Net 4.0 框架安装，因为我听说这可能是一个问题。我昨晚刚刚安装了可视化 Web 开发人员，以便处理我从 Microsoft Visual Studio 2010 转移过来的项目，因为我的试用版已过期，任何帮助或潜在的解决方法将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-27T11:29:43.467

我今天遇到了这个问题。据我了解，问题在于 .NET 4.0 程序集现在默认为*security critical*。安全透明代码不可能调用安全关键代码。

在我的案例中，解决方案与`AllowPartiallyTrustedCallersAttribute`仅在我的应用程序中的几个程序集上定义有关。我必须从所有程序集中删除此属性，或者将其添加到所有程序集中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-17T21:20:11.523

您可能需要将以下内容添加到您的 AssemblyInfo.cs 文件中，以便所涉及的程序集相同。

```
[assembly: SecurityTransparent()] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-18T15:05:16.410

感谢我在这里参加聚会非常晚，但是在 VS2013 中并且在 .NET 4.5.1 ClickOnce 项目中遇到了同样的问题，我通过以下方式解决了这个问题：

1.  打开相关 ClickOnce 项目的项目属性
2.  打开安全选项卡
3.  将信任设置更改为“这是一个部分信任的应用程序”
4.  将信任设置改回“这是一个完全信任的应用程序”

希望这对其他人有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T16:05:53.247

显然，至少使我能够在 Visual Web Developer 中启动应用程序的一种潜在解决方法是：

*   从位于元素内的元素中删除**targetFramework="4.0"属性。**

*   如果是 Silverlight 应用程序右键单击 ApplicationName.Web 标题选择属性，然后将目标框架更改为 3.5。如果是 asp.net 应用程序，请右键单击顶部项目标题并选择属性，然后将目标框架设置为 3.5。

所有这些都表明我的 .Net 4.0 框架安装存在问题。但是由于我已经安装和卸载，然后至少安装了两次 .Net 4.0 框架，这是我目前能想到的唯一选择。如果有人为我提供了更好的响应/更永久的解决方案，我会将其标记为答案。与此同时，我将尝试启动“安装其他框架”并再次重新安装 .Net 4.0 目标包和 .Net 4.0 运行时，看看它是否有效。

# xpages - 创建自定义控制组对象？

> ID：12092437
> 
> 赞同：0
> 
> 时间：2012-08-23T13:14:21.913
> 
> 标签：xpages

我在自定义控件中的组内设置属性时遇到问题。

```
 compositeData.MyGroup.MyProperty = "foo"; 
```

我将此报告给 Notes 技术支持，他们给了我一个解决方案，我不记得细节，但说我首先需要创建组对象。

就像是：

```
 compositeData.MyGroup = new GroupObject; 
```

当然，这不是正确的语法。有谁知道如何创建这个对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:53:19.247

想通了。要使用组将属性值传递回 xPage，您必须执行以下操作。

在抄送中：

```
if (compositeData.MyGroup == null)
 compositeData.MyGroup = new com.ibm.xsp.binding.PropertyMap;

 compositeData.MyGroup.MyProperty = "Test"; 
```

# android - Android onkey - dispatchKeyEvent 未触发

> ID：12092438
> 
> 赞同：5
> 
> 时间：2012-08-23T13:14:24.430
> 
> 标签：android, android-edittext, keylistener, keyevent, onkeydown

好吧，我已经尝试了在stackoverflow和其他地方可以找到的所有解决方案，但最终结果并没有改变一点：触发onKey事件或dispatchKeyEvent的唯一键是虚拟键盘上的回车键，并且只有按下两次。我无法截获任何其他键（事件顶部有一个断点，并且 Eclipse 永远不会在其上停止，除非是上述输入）。模拟器和真实设备上的行为是相同的。有任何想法吗？提前谢谢我的代码 atm 如下所示：

```
public class ChatWindow {

 @Override
public void onCreate(Bundle savedInstanceState) {
    //...
    setSendText();
            //...
}

    private void setUserInput() {
    Intent i = getIntent();
    mChatInput = (EditText) findViewById(R.id.UsrInput);
    if (i.hasExtra(INTENT_EXTRA_MESSAGE)) {
        mChatInput.setText(i.getExtras().getString(INTENT_EXTRA_MESSAGE));
    }
    mChatInput.setFocusable(true);
    mChatInput.requestFocus();
    mChatInput.setFocusableInTouchMode(true);

    mChatInput.addTextChangedListener(new TextWatcher() {

        public void  afterTextChanged (Editable s){ 
            Log.d(TAG, "afterTextChanged"); 
            if (mChatInput.getText().length() >= 1) {
                mChatInput.addTextChangedListener(this);
                //mChatInput.setOnKeyListener(this);
                //mChatInput.dispatchKeyEvent(this);
                mSendButton.setEnabled(true);       
            }
                    else 
                       mSendButton.setEnabled(false);
            } 

                    public void  beforeTextChanged  (CharSequence s, int start, int 
                    count, int after)
            { 
                    Log.d(TAG, "beforeTextChanged"); 
            } 

                    public void  onTextChanged  (CharSequence s, int start, int before, 
                    int count) 
            { 
                    Log.d(TAG, s.toString()); 
            }

         }); 

}
}

@Override
public boolean dispatchKeyEvent(KeyEvent event) {
//THIS HERE IS NEVER FIRED UNLESS THE ENTER KEY IS CLICKED TWICE    
    if (event.getAction() == KeyEvent.ACTION_DOWN 
            && event.getKeyCode()==KeyEvent.KEYCODE_ENTER) {
    sendMessageIfNotNull(); 
return true;
}

    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-02T10:14:58.227

dispatchKeyEvent 仅在活动具有焦点时才起作用

# javascript - Javascript setInterval 函数清除自身？

> ID：12092439
> 
> 赞同：78
> 
> 时间：2012-08-23T13:14:24.370
> 
> 标签：javascript, setinterval, clearinterval

```
myInterval = setInterval(function(){
     MyFunction();
},50);

function MyFunction()
{
    //Can I call clearInterval(myInterval); in here?
} 
```

间隔没有停止（没有被清除），如果我上面编码的内容很好，那么它将帮助我在别处寻找导致问题的原因。谢谢。

编辑：假设它在调用 clearInterval 之前完成了几个间隔，这消除了对 setTimeout 的需要。

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-08-23T13:23:23.467

只要您对保存的`interval`变量有范围，就可以从任何地方取消它。

在“子”范围内：

```
var myInterval = setInterval(function(){
     clearInterval(myInterval);
},50); 
```

在“兄弟”范围内：

```
var myInterval = setInterval(function(){
     foo();
},50);

var foo = function () {
    clearInterval(myInterval);
}; 
```

如果超出范围，您甚至可以通过间隔：

```
var someScope = function () {
    var myInterval = setInterval(function(){
        foo(myInterval);
    },50);
};

var foo = function (myInterval) {
    clearInterval(myInterval);
}; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-23T13:16:58.960

```
clearInterval(myInterval); 
```

将在您需要时取消间隔。如果你想在第一次通话后立即取消，你应该`setTimeout`取而代之。并且确保您可以在 Interval 函数本身中调用它。

```
var myInterval = setInterval(function() {
  if (/* condition here */){
        clearInterval(myInterval);
   } 
}, 50); 
```

在此处查看[示例](http://jsfiddle.net/poikl/vDmHA/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T13:19:46.563

```
var interval = setInterval(function() {
  if (condition) clearInterval(interval); // here interval is undefined, but when we call this function it will be defined in this context
}, 50); 
```

或者

```
var callback = function() { if (condition) clearInterval(interval); }; // here interval is undefined, but when we call this function it will be defined in this context
var interval = setInterval(callback, 50); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-26T11:55:02.240

您可以通过使用 window.setTimeout 的技巧来做到这一点

```
var Interval = function () {
    if (condition) {
        //do Stuff
    }
    else {
        window.setTimeout(Interval, 20);
    };
};
window.setTimeout(Interval, 20); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-29T16:33:05.163

从您的代码看来，您想要做的是运行一个函数并一次又一次地运行它，直到完成某些工作......

这实际上是一个任务`setTimeout()`，方法是类似的：

```
 var myFunction = function(){
      if( stopCondition ) doSomeStuff(); //(do some stuff and don't run it again)
        else setTimeout( myFunction, 50 );
    }
    myFunction(); //immediate first run 
```

# 就那么简单 ：）

当然，如果你真的想使用 setInterval 出于某种原因，@jbabey 的答案似乎是最好的:)

# java - 使用 Java，如何让用户在不使用打印对话框的情况下设置打印机选项？

> ID：12092440
> 
> 赞同：1
> 
> 时间：2012-08-23T13:14:30.317
> 
> 标签：java, printing, printer-properties

我正在开发一个应用程序作为大学项目。它（几乎）完整，大多数功能都可以正常工作。

该应用程序记录访客信息并为每位访客打印访客证。访客通过用户友好的界面将他们的信息输入系统，完成后会自动打印访客证，并将他们的详细信息保存到数据库中。

这一切都很好！我们已经得到了我们的成绩，我们得到了最高分，再高兴不过了！！

但是，管理屏幕上的打印机选项对于标签打印机来说非常有限。在管理屏幕上，您可以搜索数据库并使用典型的打印对话框打印结果，或者您可以将数据保存到逗号分隔的 CSV 文件中。

都好！但是由于标签打印机仅从程序的前端运行，没有可用的打印对话框，我需要在管理屏幕上提供对打印机选项的访问权限，然后保存它们以供以后在标签打印机运行时使用。目前我们可以选择用于打印访客证卡的打印机，我们可以从管理页面设置和保存页面设置信息 - 但我不知道如何访问打印机设置在不使用打印对话框的情况下向管理员提供访问权限的选项。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:35:22.973

也许我完全误会了你..:)..也许这可以帮助你

[Java 打印 API](http://www.javaworld.com/jw-10-2000/jw-1020-print.html)

# asp.net-mvc - 在 ASP MVC 中通过 UserKey 而不是 UserName 获取用户

> ID：12092441
> 
> 赞同：0
> 
> 时间：2012-08-23T13:14:39.117
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, asp.net-membership

我可以通过使用他们的用户名来获取用户，如下所示：

```
Dim user = Membership.GetUser("myUserName") 
```

如何让用户使用他们的 UserKey？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:24:08.760

该`Membership.GetUser`方法有一个重载，它采用用户密钥（作为对象）。

[http://msdn.microsoft.com/en-us/library/ms152019.aspx](http://msdn.microsoft.com/en-us/library/ms152019.aspx)

只要您传入的键不是字符串或布尔值，它就应该使用该重载。

# cocoa-touch - Xcode 4.4 IOS本地化

> ID：12092442
> 
> 赞同：-4
> 
> 时间：2012-08-23T13:14:40.493
> 
> 标签：cocoa-touch, localization

在我的 IOS 项目中，我必须在所有 .h 和 .m 文件中将 NSLocalizedStrings 本地化为其他语言。在最新的 Xcode 4.4 (Montain Lion) 中执行此操作的最正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:16:48.393

Mac 上的本地化与 iOS 上的本地化相同。您使用 NSLocalizedString 并翻译您的 .strings 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:48:20.830

您可以参考 Ray Wenderlich 本地化教程[http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)

# java-ee-6 - Jboss 6.1.0 应用程序已安装

> ID：12092444
> 
> 赞同：0
> 
> 时间：2012-08-23T13:14:49.343
> 
> 标签：java-ee-6, jboss6.x, ejb-2.x

我正在尝试将应用程序从 JBoss 4.0.5 迁移到 JBoss 6.1.0。我使用 ant 进行部署。这是我的 application.xml 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
    <application xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_6.xsd"
    version="6">
        <application-name>Fantana</application-name>
        <module>
            <ejb>fantana.jar</ejb>
        </module>
        <module>
            <web>
                <web-uri>fantantaWeb.war</web-uri>
                <context-root>/</context-root>
            </web>
        </module>
        <module>
            <web>
                <web-uri>fantanaTerm.war</web-uri>
                <context-root>/</context-root>
            </web>
        </module>
    </application> 
```

当我部署时，我在服务器的“部署”文件夹中生成了以下文件。

```
fantana.jar
fantana.war
fantanaWeb.war
fantanaTerm.war 
```

运行服务器时出现以下问题：

```
15:34:29,296 WARN  [Digester] Empty stack (returning null)
15:34:29,319 INFO  [TomcatDeployment] deploy, ctxPath=/crud
15:34:29,364 ERROR [AbstractKernelController] Error installing to Real: name=vfs:///D:/abujdei/develop/jboss-6.1.0.Final/server/brendolan/deploy/fantana.war state=PreReal mode=Manual requiredState=Real: org.jboss.deployers.spi.DeploymentException: Error deploying: jboss.naming:application=fantana
Caused by: java.lang.IllegalStateException: jboss.naming:application=fantana is already installed. 
```

我知道这个问题之前已经解决过，但我无法理解为什么会发生这种情况。如有必要，我可以提供更多信息。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:30:05.870

@ionutab

那么好吧。我已重命名文件

```
fantana.war 
```

进入

```
fantanaCore.war 
```

我在互联网上读过几篇文章，不知何故，fantana.jar 和 fantana.war 具有相同的名称，这是不对的。我在 ant 任务中重命名了它，而不是在文件系统中。（非常重要）如果你遇到这样的事情，请写在这里。也许我可以帮忙。

我发现[这里](https://issues.jboss.org/browse/JBAS-8528)的链接非常有用。谢谢。

# html - 为什么按 TAB 键不会导致我页面上的链接被“标记”？

> ID：12092446
> 
> 赞同：0
> 
> 时间：2012-08-23T13:15:00.730
> 
> 标签：html, css, browser

我看到当我按下 tab 键时，页面上的链接没有得到焦点。

我希望 TAB 键标记下一个 html 控件（锚点、输入），就像在任何其他站点中一样： ![在此处输入图像描述](../Images/fdc1541b127687b38c069b9f69492fbf.png)

是 html/css 的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T13:21:09.590

很确定默认浏览器大纲被抑制了，这里是 all.css 文件中的代码：

```
a:focus,
div:focus,
input:focus{outline:none;} 
```

我在一些移动网站中使用过它，Android 有时无法很好地使用它的元素轮廓。

**编辑：**

这是我直接从 HTML5 Boilerplate 覆盖大纲的方法：

```
a:focus                                             { outline:thin dotted; }
a:hover, a:active                                   { outline:0; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T13:22:55.233

这确实与CSS有关。在第 23 行的 all.css 中，您删除了通常突出显示焦点元素的蓝色轮廓

```
a:focus, div:focus, input:focus{outline:none;} 
```

如果你想让它突出显示，那么你需要定义某种样式。或者您只需删除这些线条并获得标准的蓝色轮廓。

# wix - 如何在 WiX 中读取自定义操作的可执行输出？

> ID：12092447
> 
> 赞同：4
> 
> 时间：2012-08-23T13:15:02.300
> 
> 标签：wix, windows-installer, wix3.5, custom-action

我在 WiX 中制作 MSI 安装程序。在安装过程中，我想从[自定义操作](http://wix.sourceforge.net/manual-wix2/wix_xsd_customaction.htm)运行可执行文件并获取其标准输出（而不是返回代码）以供以后在安装过程中使用（[`Property`](http://wix.sourceforge.net/manual-wix2/wix_xsd_property.htm)据说是元素）。

如何在 WiX (3.5) 中实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T14:45:25.020

我将此代码用于类似的任务（它是 C# DTF 自定义操作）：

```
// your process data
ProcessStartInfo processInfo = new ProcessStartInfo() {
   CreateNoWindow = true,
   LoadUserProfile = true,
   UseShellExecute = false,
   RedirectStandardOutput = true,
   StandardOutputEncoding = Encoding.UTF8,
   ...
};

Process process = new Process();
process.StartInfo = processInfo;
process.OutputDataReceived += (object sender, DataReceivedEventArgs e) =>
  {
     if (!string.IsNullOrEmpty(e.Data) && session != null)
     {
         // HERE GOES THE TRICK!
         Record record = new Record(1);
         record.SetString(1, e.Data);
         session.Message(InstallMessage.ActionData, record);
      }
  };

process.Start();
process.BeginOutputReadLine();
process.WaitForExit();

if (process.ExitCode != 0) {
   throw new Exception("Execution failed (" + processInfo.FileName + " " + processInfo.Arguments + "). Code: " + process.ExitCode);
}

process.Close(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T15:35:19.730

这被称为“屏幕抓取”，虽然在技术上可以创建基础架构以在进程外运行 EXE，抓取它的输出，然后将数据编组回 MSI 上下文，但它永远不会是一个强大的解决方案。

更好的解决方案是了解 EXE 的作用以及它的作用方式。然后编写一个 C# o C++ 自定义操作，该操作在进程中运行并可以访问 MSI 句柄，以便您可以完成工作并设置您需要设置的属性。

# c++ - 基于指针的基本随机访问迭代器的代码？

> ID：12092448
> 
> 赞同：12
> 
> 时间：2012-08-23T13:15:02.920
> 
> 标签：c++, stl, iterator

我从未实现过类似 STL 的迭代器，我试图了解如何基于指针实现一个非常基本的东西。一旦我有了这门课，我就可以修改它来做更复杂的事情。因此，这是第一步，我需要它坚如磐石才能理解如何编写我自己的迭代器（没有提升）。

我已经编写了以下代码，并且我知道其中有错误。你能帮我正确设计一个受此启发的随机访问迭代器类吗：

```
template<Type> class Container<Type>::Iterator : public std::iterator<random_access_iterator_tag, Type>
{
    // Lifecycle:
    public:
        Iterator() : _ptr(nullptr) {;}
        Iterator(Type* rhs) : _ptr(rhs) {;}
        Iterator(const Iterator &rhs) : _ptr(rhs._ptr) {;}

    // Operators : misc
    public:
        inline Iterator& operator=(Type* rhs) {_ptr = rhs; return *this;}
        inline Iterator& operator=(const Iterator &rhs) {_ptr = rhs._ptr; return *this;}
        inline Iterator& operator+=(const int& rhs) {_ptr += rhs; return *this;}
        inline Iterator& operator-=(const int& rhs) {_ptr -= rhs; return *this;}
        inline Type& operator*() {return *_ptr;}
        inline Type* operator->() {return _ptr;}
        inline Type& operator[](const int& rhs) {return _ptr[rhs];}

    // Operators : arithmetic
    public:
        inline Iterator& operator++() {++_ptr; return *this;}
        inline Iterator& operator--() {--_ptr; return *this;}
        inline Iterator& operator++(int) {Iterator tmp(*this); ++_ptr; return tmp;}
        inline Iterator& operator--(int) {Iterator tmp(*this); --_ptr; return tmp;}
        inline Iterator operator+(const Iterator& rhs) {return Iterator(_ptr+rhs.ptr);}
        inline Iterator operator-(const Iterator& rhs) {return Iterator(_ptr-rhs.ptr);}
        inline Iterator operator+(const int& rhs) {return Iterator(_ptr+rhs);}
        inline Iterator operator-(const int& rhs) {return Iterator(_ptr-rhs);}
        friend inline Iterator operator+(const int& lhs, const Iterator& rhs) {return Iterator(lhs+_ptr);}
        friend inline Iterator operator-(const int& lhs, const Iterator& rhs) {return Iterator(lhs-_ptr);}

    // Operators : comparison
    public:
        inline bool operator==(const Iterator& rhs) {return _ptr == rhs._ptr;}
        inline bool operator!=(const Iterator& rhs) {return _ptr != rhs._ptr;}
        inline bool operator>(const Iterator& rhs) {return _ptr > rhs._ptr;}
        inline bool operator<(const Iterator& rhs) {return _ptr < rhs._ptr;}
        inline bool operator>=(const Iterator& rhs) {return _ptr >= rhs._ptr;}
        inline bool operator<=(const Iterator& rhs) {return _ptr <= rhs._ptr;}

    // Data members
    protected:
        Type* _ptr;
}; 
```

非常感谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-08-07T20:53:49.510

您的代码存在以下问题：

*   你不遵循三/五规则。在您的情况下，最好的选择是不要声明任何自定义析构函数、复制/移动构造函数或复制/移动赋值运算符。让我们遵循所谓的零规则。
*   `Iterator(Type* rhs)` *可以*是私有的，并且`Container`可以标记为`Iterator`' 朋友，但这不是绝对必要的。
*   `operator=(Type* rhs)`是个坏主意。这不是类型安全的意义所在。
*   Post-in(de)crementation 应该返回`Iterator`，而不是`Iterator &`。
*   添加两个迭代器没有任何意义。
*   减去两个迭代器应该返回一个差异，而不是一个新的迭代器。
*   您应该使用`std::iterator<std::random_access_iterator_tag, Type>::difference_type`而不是`const int &`.
*   如果一个方法不修改一个对象，它应该被标记`const`。

有用的资源：[RandomAccessIterator@cppreference.com](http://en.cppreference.com/w/cpp/concept/RandomAccessIterator)

这是您的代码的固定版本：

```
template<typename Type>
class Container<Type>::Iterator : public std::iterator<std::random_access_iterator_tag, Type>
{
public:
    using difference_type = typename std::iterator<std::random_access_iterator_tag, Type>::difference_type;

    Iterator() : _ptr(nullptr) {}
    Iterator(Type* rhs) : _ptr(rhs) {}
    Iterator(const Iterator &rhs) : _ptr(rhs._ptr) {}
    /* inline Iterator& operator=(Type* rhs) {_ptr = rhs; return *this;} */
    /* inline Iterator& operator=(const Iterator &rhs) {_ptr = rhs._ptr; return *this;} */
    inline Iterator& operator+=(difference_type rhs) {_ptr += rhs; return *this;}
    inline Iterator& operator-=(difference_type rhs) {_ptr -= rhs; return *this;}
    inline Type& operator*() const {return *_ptr;}
    inline Type* operator->() const {return _ptr;}
    inline Type& operator[](difference_type rhs) const {return _ptr[rhs];}

    inline Iterator& operator++() {++_ptr; return *this;}
    inline Iterator& operator--() {--_ptr; return *this;}
    inline Iterator operator++(int) const {Iterator tmp(*this); ++_ptr; return tmp;}
    inline Iterator operator--(int) const {Iterator tmp(*this); --_ptr; return tmp;}
    /* inline Iterator operator+(const Iterator& rhs) {return Iterator(_ptr+rhs.ptr);} */
    inline difference_type operator-(const Iterator& rhs) const {return _ptr-rhs.ptr;}
    inline Iterator operator+(difference_type rhs) const {return Iterator(_ptr+rhs);}
    inline Iterator operator-(difference_type rhs) const {return Iterator(_ptr-rhs);}
    friend inline Iterator operator+(difference_type lhs, const Iterator& rhs) {return Iterator(lhs+rhs._ptr);}
    friend inline Iterator operator-(difference_type lhs, const Iterator& rhs) {return Iterator(lhs-rhs._ptr);}

    inline bool operator==(const Iterator& rhs) const {return _ptr == rhs._ptr;}
    inline bool operator!=(const Iterator& rhs) const {return _ptr != rhs._ptr;}
    inline bool operator>(const Iterator& rhs) const {return _ptr > rhs._ptr;}
    inline bool operator<(const Iterator& rhs) const {return _ptr < rhs._ptr;}
    inline bool operator>=(const Iterator& rhs) const {return _ptr >= rhs._ptr;}
    inline bool operator<=(const Iterator& rhs) const {return _ptr <= rhs._ptr;}
private:
    Type* _ptr;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T13:31:45.200

一般来说，您的方法是正确的。[后缀递增/递减运算符应按值返回](https://stackoverflow.com/questions/3181211/prefix-postfix-increment-operators)，而不是按引用返回。我也有疑问：

```
Iterator(Type* rhs) : _ptr(rhs) {;} 
```

这告诉大家，这个迭代器类是围绕指针实现的。我会尝试使此方法只能由容器调用。分配给指针也是如此。添加两个迭代器对我来说毫无意义（我会留下“iterator+int”）。减去两个指向同一个容器的迭代器可能会有意义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T13:31:55.027

看看 Boost 是如何做到的，[boost/container/vector.hpp](http://www.boost.org/doc/libs/1_50_0/boost/container/vector.hpp)中的迭代器-`vector_const_iterator`并且`vector_iterator`相当容易理解基于指针的迭代器。

# php - PHP表单需要提交两次

> ID：12092449
> 
> 赞同：1
> 
> 时间：2012-08-23T13:15:03.273
> 
> 标签：php, forms, url, get

我正在编写一个应用程序，允许用户为潜在员工上传推荐信。

每个引用都会发送一封电子邮件，其中包含 URL 末尾的唯一字符串。因此，例如，地址看起来类似于：www.mywebaddress?url=503241a20b5085_18720621。

要确定唯一字符串是否有效（即存在于数据库中），我需要进行查询搜索。但是，当引用尝试访问 URL 时，他需要回答安全问题。所以，我还需要检查答案是否有效，他之前是否上传过等，以确定将他重定向到哪个页面。

但是因为查询，我的代码要求用户点击“提交”两次。这真的很烦人，但我不知道如何解决它。

这是我的代码的相关摘录：

```
if ( isset ($_GET['url']) ) {
        $query = "SELECT * FROM ref_info WHERE url='" . $_GET['url'] . "'";
        $result = $db->execute($query);
        if ( empty ($result) ) {
            //error message

        } else {
            $url = $_GET['url'];

            if ( $_SESSION['validated'] ) {
                if ( $result[0]['uploaded'] ==1 ) {
                    $_SESSION['uploaded'] =true;
                } else {
                    $_SESSION['uploaded'] =false;   
                }

                include_once("process_upload.php"); 

            } else { 
                if ( empty($result[0]['answer']) ) {
                    include_once("security.php");

                } else {
                    include_once("security_check.php");
                }
            }
        }

} 
```

有什么办法可以让表单只需要提交一次吗？

在此先感谢您的任何建议！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:32:08.837

```
if ( isset ($_GET['url']) ) {
        $query = "SELECT * FROM ref_info WHERE url='" . $_GET['url'] . "'"; //that is really not secure. Take a look at mysql_real_escape_string or something like that in yor $db
        $result = $db->execute($query);
        if ( empty ($result) ) {
            //error message

        } else {
            $url = $_GET['url'];
            if (empty($result[0]['answer']) ) { // page is just opened,form is not yet submitted - ask sequrity question
                include_once("security.php");    
            } else { //oh. Submit is done - let me check if it is Ok
                include_once("security_check.php");
            }
            if ( $_SESSION['validated'] ) { //validation is Ok? Yeah. Answer is not posted yet, so validation fails and we do nothing. Just show a form with a question
                if ( $result[0]['uploaded'] ==1 ) {
                    $_SESSION['uploaded'] =true;
                } else {
                    $_SESSION['uploaded'] =false;   
                }

                include_once("process_upload.php"); 

            } 
        }

} 
```

# php - 在用 asp.net mvc 编写的网站的门户中使用用 php 编写的页眉/页脚

> ID：12092451
> 
> 赞同：0
> 
> 时间：2012-08-23T13:15:07.867
> 
> 标签：php, asp.net-mvc

如何将用asp.net mvc编写的网站集成到用php编写的门户网站中？我只需要保留 php 站点的页眉/页脚。它们都将有单独的托管，我们希望保留链接 (SEO)，因此 iframe 不是解决方案。也许是一个获取静态 HTML 的网络服务？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:13:28.987

如果您不能使用`<iframe>`另一种可能性，那就是让 PHP 站点向 ASP.NET MVC 站点发送 HTTP 请求，检索 HTML 并将其包含到响应中。但是您可能需要调整您的 ASP.NET MVC 站点，使其不再使用布局，以避免在生成的标记中出现多个头部和主体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:54:48.797

我通过在 ASP.NET 中处理 HTML 代码并修改所需部分来修复它。我使用 HtmlAgilityPack 来解析 HTML 代码。

# radio-button - 获取单选按钮选择

> ID：12092452
> 
> 赞同：0
> 
> 时间：2012-08-23T13:15:10.213
> 
> 标签：radio-button

没有查询！当用户选择有一个婴儿或军事离开单选按钮弹出。我无法获取所选按钮的值并将带有 id="choice" 的 innerHTML 更改为该值。有人可以帮忙吗？

[http://jsfiddle.net/73Vq9/](http://jsfiddle.net/73Vq9/)

```
<html>
<head>
<script>
//this function deals with changing the event
function changeMessage(oElement) {
    //have a baby
    if (oElement.value == "100") {
        document.getElementById("btn").style.display = "none";
        document.getElementById("radio").style.display = "inline-block";
        document.getElementById("rd1").innerHTML = "C-Section";
        document.getElementById("rd2").innerHTML = "Regular Birth";
        document.getElementById("rd1").value = "C-Section";
        document.getElementById("rd2").value = "Regular Birth";
    //military leave
    } else if (oElement.value == "15") {
        document.getElementById("btn").style.display = "none";
        document.getElementById("radio").style.display = "inline-block";
        document.getElementById("rd1").innerHTML = "Training";
        document.getElementById("rd2").innerHTML = "Active Duty";
        document.getElementById("rd1").value = "Training";
        document.getElementById("rd2").value = "Active Duty";
    //no value, the first, blanck value
    } else if (oElement.value == "0") {
        document.getElementById("btn").style.display = "none";
        document.getElementById("radio").style.display = "none";

    } else {
        document.getElementById("btn").style.display = "inline-block";
        document.getElementById("radio").style.display = "none";
    }
    return;
}
</script>
</head>
<body>

<div style="margin-left:250px;">
<select id="leave" onchange="changeMessage(this);">
  <option value="0"></option>
  <option value="5">Get Married</option>
  <option value="100">Have a Baby</option>
  <option value="90">Adopt a Child</option>
  <option value="35">Retire</option>
  <option value="15">Military Leave</option>
  <option value="25">Medical Leave</option>
</select>
 <button id="btn" style="display:none" onclick="getInfo()"type="button">Process</button>
</div>
<div id="radio" style="display:none">
    <div id="rd1"></div><input type="radio" name="sex" value="" />
    <div id="rd2"></div><input type="radio" name="sex" value=""/>
</div>
    <div id="choice">Radio Choice</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:25:24.360

您的`input`值永远不会设置，因此将始终为空。

[当您在上一个问题https://stackoverflow.com/questions/12091968/javascript-function-not-chang-input-types](https://stackoverflow.com/questions/12091968/javascript-function-not-changing-input-types)中更改了代码时，您将其`id`从a 移到了`input`a `<div>`，因此您的 JavaScript 不再设置输入的值。

您需要更改 JavaScript 以正确设置输入，然后是：

### HTML

```
<input type="radio" name="sex" value="" onclick="showChoice(this)"/> 
```

### JavaScript

```
function showChoice(input) {
    document.getElementById('choice').innerHTML = "Radio Choice=" + input.value;
} 
```

应将所选输入的值附加到`<div id="choice">`

# web-services - 将用户名和密码令牌添加到 WSSecurity Web 服务调用（.net 客户端）

> ID：12092454
> 
> 赞同：0
> 
> 时间：2012-08-23T13:15:18.567
> 
> 标签：web-services, credentials, soapheader

嘿，代码战士和堆栈交换器。

我一直在徒劳地尝试为 Web 服务设置凭据。我在 Websphere (java ee) 中编写了 web 服务，它需要在标题中输入用户名和密码才能调用任何服务。我可以在 SOAP UI 中很好地运行它，但我需要能够从 .net Web 客户端访问它。

到目前为止，我已经尝试像这样设置凭据...

```
dlc.ClientCredentials.UserName.UserName = "idiotCreds";
dlc.ClientCredentials.UserName.Password = "someWhackyPWD"; 
```

到目前为止，我刚刚收到了这个例外

```
security.wssecurity.WSSContextImpl.s02: com.ibm.websphere.security.WSSecurityException: Exception  org.apache.axis2.AxisFault: CWWSS6500E: There is no caller identity candidate that can be used to login. ocurred while running action: com.ibm.ws.wssecurity.handler.WSSecurityConsumerHandler$1@42304230 
```

我猜这告诉我没有设置凭据......
即使我设置了客户端凭据。我需要在这里手动创建和添加一个肥皂头吗？我认为这应该由该客户端对象处理？有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:54:32.303

这个 SO 线程中的问答将为寻求答案的人提供他们需要的解决方案。 [https://stackoverflow.com/a/12159837/729820](https://stackoverflow.com/a/12159837/729820)

# linux - 如何从 shell 启动 2 个线程？

> ID：12092455
> 
> 赞同：1
> 
> 时间：2012-08-23T13:15:25.980
> 
> 标签：linux, node.js, shell, console

我是 shell 编程的新手。

1) 我想从 *.sh 文件启动 2 个 node.js 进程： node script1.js node script2.js

2）我想在系统加载时启动它（在系统启动时）。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:20:26.217

1.  要在后台启动进程，`&`请在末尾启动它：

    ```
    node script1.js & 
    ```

2.  您使用的是什么发行版？启动脚本可能位于`/etc/init.d`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:04:04.157

您还需要通过 sys v / BSD init 样式系统启用 crond 服务。在 RHEL / CentOS / Fedora 下，你需要使用`chkconfig (ntsysv) command`来启用 crond on boot：

```
chekconfg crond on 
```

在 Debian / Ubuntu Linux 下使用 update-rc.d 如下打开开机服务：

```
update-rc.d cron defaults 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:28:18.847

您也可以添加[crontab](http://linux.die.net/man/5/crontab)条目。用于`crontab -e`编辑：

```
@reboot /PATH/TO/SCRIPT1/script1.js
@reboot /PATH/TO/SCRIPT2/script2.js 
```

这将在启动时启动这些脚本。

# java - 如何检查 X509Certificate 是否为 CA 证书？

> ID：12092457
> 
> 赞同：18
> 
> 时间：2012-08-23T13:15:31.073
> 
> 标签：java, certificate, x509certificate, ca

我有一个 Java 中的 X509Certificate 实例，我需要确定它是 CA 证书还是用户证书。

任何人都可以提供任何帮助吗？

提前致谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-27T13:12:11.480

根据我进行的研究，可以通过检查基本约束来检查！检查[API](http://docs.oracle.com/javase/6/docs/api/java/security/cert/X509Certificate.html#getBasicConstraints)以获取方法的返回结果`getBasicConstraints()`。

因此，如果该方法返回结果`!= -1`，则可以将证书视为`CA certificate`.

我已经用几个`CA certificates`（根和中间）检查了这个，它按描述工作。我还使用多个用户证书检查了此方法，该方法返回 -1 作为结果。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-02-12T17:40:28.010

X509Certificate.getKeyUsage() javadoc:

> 获取一个布尔数组，表示 KeyUsage 扩展的位 (OID = 2.5.29.15)。密钥使用扩展定义了证书中包含的密钥的用途（例如，加密、签名、证书签名）。ASN.1 对此的定义是：
> 
> ```
>  KeyUsage ::= BIT STRING {
>               digitalSignature        (0),
>               nonRepudiation          (1),
>               keyEncipherment         (2),
>               dataEncipherment        (3),
>               keyAgreement            (4),
>               keyCertSign             (5),  --> true ONLY for CAs
>               cRLSign                 (6),
>               encipherOnly            (7),
>               decipherOnly            (8) } 
> ```

可以通过以下方式检查证书：

```
X509Certificate cert = ...;
boolean[] keyUsage = cert.getKeyUsage();
if ( keyUsage[5] ) {
    // CA certificate
}
else {
    // User certificate
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T13:24:06.263

根 CA 将是`keyCertSign`启用了标志的自签名证书。在大多数情况下，`CA`为方便起见，通用名称可能包含该词。中间`CA`证书可以由一个`Root CA`（或另一个中间人！）签名。您的浏览器密钥库将包含通常受信任的 CA 证书的示例。

来自[互联网工程任务组](http://www.ietf.org/rfc/rfc2459.txt)

```
The keyCertSign bit is asserted when the subject public key is
    used for verifying a signature on certificates.  This bit may only
    be asserted in CA certificates. 
```

# macos - 在 mac 上安装 libtools

> ID：12092468
> 
> 赞同：6
> 
> 时间：2012-08-23T13:16:00.797
> 
> 标签：macos

我想在 mac 上安装 libtools。我去了苹果开发者网站并下载了 .dgm，该 .dgm 下载了 Xcode for Mountain Lion 的 cmdline 工具。

但是当我去终端并输入 libtools 时，它说找不到 bash 命令。

有人可以告诉我如何在 mac 上安装 libtools。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-11-03T22:06:13.647

如果你像这样安装 brew

```
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" 
```

你可以在终端写

```
brew install libtool 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-17T09:59:27.780

在 MacOS 上安装*libtool*如下 -

```
brew install libtool 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-15T00:37:41.517

请注意，在 OSX`libtool`上调用：`glibtool`

> 该工具作为 glibtool 安装在 OS X 中，以避免与 NeXT libtool 的名称冲突。

来源：[https ://developer.apple.com/library/mac/documentation/Porting/Conceptual/PortingUnix/compiling/compiling.html#//apple_ref/doc/uid/TP40002850-SW5](https://developer.apple.com/library/mac/documentation/Porting/Conceptual/PortingUnix/compiling/compiling.html#//apple_ref/doc/uid/TP40002850-SW5)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-24T06:31:18.277

极端的菜鸟错误。该命令是 libtool 而不是 libtools。**我在Apple Developers 网站上**找到了安装链接。 你必须解压缩包，它会自动在 Xcode 上开始安装。

# javascript - 隐藏选择选项并在单击定义的选项后显示它们

> ID：12092476
> 
> 赞同：1
> 
> 时间：2012-08-23T13:16:34.560
> 
> 标签：javascript, jquery, select, options

这是我的例子。

```
<select name="mydropdownbox">
<option value="val1">val1</option>
<option value="val2">val2</option>
<option value="val3">val3</option>
<option value="val4">val4</option>
<option value="val5">val5</option>
<option value="val6">val6</option>
</select>​ 
```

如您所见，我们有一个带有不同选项的选择框。我想要做的是使用 val2 和 val5 隐藏选项，但在列表末尾添加另一个选项，例如`<option value="more">more</option>`.

通过单击“更多”，应显示隐藏的选项。“更多”选项应替换为“更少”选项。通过单击更少，选项应再次隐藏。

请记住，这只是一个示例。完整列表包含 50 多个选项。它对某种数组有用吗？

不幸的是，我不知道如何开始。对此的任何帮助将不胜感激。谢谢。

**更新** 请查看我在 js-Part [http://jsfiddle.net/bqyBQ/5/中的评论](http://jsfiddle.net/bqyBQ/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:22:20.697

在“更多”选项中创建链接。单击更多选项应调用 javascript 或 jquery 并从脚本动态添加数据并切换更多和更少的标题以及添加和删除操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:33:51.890

我会尝试这样的事情

```
<select id="mydropdownbox" name="mydropdownbox">
    <option value="val1">val1</option>
    <option value="val2">val2</option>
    <option value="val3">val3</option>
    <option value="val4" class="hide">val4</option>
    <option value="val5" class="hide">val5</option>
    <option value="val6" class="hide">val6</option>
    <option value="more" class="more">more</option>
</select>​

<style type="text/css">
  .hide { display: none; }
</style>

<script type="text/javascript">
  jQuery('#mydropdownbox .more').click(function() { 
    jQuery('#mydropdownbox .hide').attr('class', 'show');
  });
</script> 
```

只需为这些元素添加一个新类，默认情况下应该隐藏。然后将点击事件添加到更多链接以切换这些类。使用这种技术也可以轻松制作更少的按钮。

# android - 在 Android 上捕获音量控制按钮事件

> ID：12092482
> 
> 赞同：2
> 
> 时间：2012-08-23T13:16:50.380
> 
> 标签：android, event-handling, android-audiomanager

使用以下代码捕获音量控制按钮事件。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    int action = event.getAction();
    Log.i("Volume", "Volume " + keyCode + " " + action);
        AudioManager audio = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
        switch (keyCode) {
        case KeyEvent.KEYCODE_VOLUME_UP:
            if (action == KeyEvent.ACTION_DOWN) {
                audio.adjustStreamVolume(AudioManager.STREAM_VOICE_CALL, AudioManager.ADJUST_RAISE, AudioManager.FLAG_SHOW_UI);
            }
            return true;
        case KeyEvent.KEYCODE_VOLUME_DOWN:
            if (action == KeyEvent.ACTION_DOWN) {
                audio.adjustStreamVolume(AudioManager.STREAM_VOICE_CALL, AudioManager.ADJUST_LOWER, AudioManager.FLAG_SHOW_UI);
            }
            return true;
        default:
            return super.onKeyDown(keyCode, event);
        }
} 
```

但是当显示音量条吐司时，它不再捕获音量按钮按下事件，除非吐司消失。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:38:16.940

由于您似乎只是捕捉按钮按下来调整音量，也许您应该[`setVolumeControlStream()`](http://developer.android.com/reference/android/app/Activity.html#setVolumeControlStream%28int%29)在初始化 Activity 时调用？

从[开发者网站](http://developer.android.com/training/managing-audio/volume-playback.html#HardwareVolumeKeys)：

> 您可能很想尝试听音量键按下并以这种方式修改音频流的音量。忍住冲动。Android 提供了方便的 setVolumeControlStream() 方法来将音量键按下定向到您指定的音频流。

# java - 用于收集/查找表的 GWT RequestFactory、ValueProxy 或 EntityProxy

> ID：12092483
> 
> 赞同：0
> 
> 时间：2012-08-23T13:16:52.840
> 
> 标签：java, gwt, requestfactory

我不确定处理 collection/lookup tables/in 的最佳做法是什么`RequestFactory`。

例如，如果我有以下两个域对象：

```
@Entity
public class Experiment  {
    private Long id;
    private String name;

    @ManyToOne(cascade={CascadeType.PERSIST,CascadeType.MERGE})
    private UnitOfMeasure unitOfMeasure;

    public Experiment() { }

    public String getName() {
        return name;
    }
    public Long getId() {
        return id;
    }
    public void setName(String name) {
        this.name = name;
    }

    public UnitOfMeasure getUnitOfMeasure()  {
        return unitOfMeasure;
    }

    public void setUnitOfMeasure(UnitOfMeasure unitOfMeasure)  {
        this.unitOfMeasure = unitOfMeasure;
    }
}

@Entity
public class UnitOfMeasure  {
    private Long id;
    private String unit_type;

    public UnitOfMeasure() { }

    public String getUnitType() {
        return unit_type;
    }
    public Long getId() {
        return id;
    }
    public void setUnitType(String unitType) {
        this.unit_type = unitType;
    }
} 
```

`Experiment`这是表中的 ForeignKey和`UnitOfMeasure`使用 ForeignKey之间的正常单向 1:n 关系`Experiment`。
我有数量有限的不同`UnitOfMeasure`实例，这些实例通常不会改变。

Web 应用程序提供了一个视图，用户可以在其中更改`Experiment`实例的某些属性。该视图使用`Editor framework`. 为了更改`UnitOfMeasure`特定的，`Experiment`我使用 a`ValueListBox`并渲染`unit_type`属性。

因为可用`UnitOfMeasure`实例的列表是静态的，所以我`AutoBeanFactory`用来创建一个 json 字符串，将其放入 HTML 主机页面，并在应用程序启动期间解析它（对于所有其他集合，如表值也是如此）并将它们存储在 Singleton 类实例中（`AppData`) 我传递给`setAcceptableValues`。

目前我`UnitOfMeasureProxy`来自`EntityProxy`但为了解码/编码它，`AutoBeanFactory`我必须用`EntityProxyCategory`. 我不知何故怀疑 a`ValueProxy`会更合适。
然而，`ValueProxy`当我改变`UnitOfMeasure`一个特定`Experiment`的实例时，整个`ValueProxy`实例都是通过网络传输的。
然而，从数据库的角度来看，只需要更改`Experiment`表中外键的值。

那么分别收集表格和子值的最佳实践（ `ValueProxy`vs ）是什么？`EntityProxy`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:41:11.857

在许多情况下，对其他实体的引用最好使用它们的 ID 而不是`EntityProxy`s 本身来建模（这是有争议的，但我认为对于服务器端代码，或者实际上任何跨越工作单元边界的代码也是如此——JPA EntityManager生命周期、休眠会话等-)

顺便说一句，序列化 RequestFactory 代理的正确方法是使用[ProxySerializer](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/web/bindery/requestfactory/shared/ProxySerializer.html)。
如果您有 s 列表，请确保使用 GWT 2.5.0-rc1 `ValueProxy`（请参阅[issue 6961](http://code.google.com/p/google-web-toolkit/issues/detail?id=6961)）

# sql - Oracle：更新查询后精度错误

> ID：12092488
> 
> 赞同：0
> 
> 时间：2012-08-23T13:17:11.063
> 
> 标签：sql, oracle

我遇到了他更新查询的问题。我将 balance1 字段更新为 6442450941.026600。

```
update account_subscriber set total_balance1=6442450941.026600
 where SUB_ID='xyz' 
```

但结果如下（在触发 select stmt 后我们得到）

TOTAL_BALANCE1 6442450941.02659988

第二种情况：让我们使用以下值进行更新

```
update account_subscriber set total_balance1=6442450941.4567
 where SUB_ID='xyz' 
```

结果为 6442450941.45670032。

您能否帮助我理解为什么精度会发生变化。

sql*plus version is version is 10.2.0.3.0

谢谢和问候， Chandra Bhushan Bakshi

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T17:22:07.003

我能想出的唯一解释是，在您的数据库和显示它的路径之间的某个位置，它被转换为浮点值。我使用 PL/SQL Developer 作为我的 Oracle 开发工具，并认为它非常可靠。因此，当我运行以下命令时，想象一下我的惊讶：

```
create TABLE rpj_test (val number(22, 8));

INSERT INTO rpj_test(val) VALUES (6442450941.026600);

SELECT * FROM rpj_test; 
```

我得到了你报告的确切结果（6442450941.02659968）。WTF?!?!?

但后来我问自己一个重要的问题——我如何测试这个以确保正确的数据实际上在数据库中？所以我运行了以下查询：

```
SELECT val * 10000 FROM rpj_test; 
```

并得到了我预期的答案（64424509410266）。

所以看起来数据库中的数据是正确的。这并不奇怪——我认为 Oracle 的 NUMBER 类型是该产品中最不受重视的特性之一，它一直存在，而且它坚如磐石（如果我们希望我们的系统有任何正常工作的机会，最好是这样：- ）。好的，所以在我看来，这看起来像是一个浮点转换错误——我能做些什么呢？因此，我在 PL/SQL Developer 的 Preferences 配置对话框中四处寻找，在那里我在 SQL Window 选项卡上找到了一个名为“Number fields to_char”的简洁小设置，该设置没有被选中。我检查了这个，重新运行了第一个 SELECT 查询，你瞧，数据按预期呈现。

故事寓意：

1.  NUMBER 正确计算和存储。如果您认为自己发现了一个错误，请认真思考**一遍***又* 一遍。以十六种不同的方式对其进行测试。弄清楚如何证明这实际上不是一个错误。
***   您使用的工具会影响您获得的结果。**

 **分享和享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:40:18.830

这只是一个 pl/sql 开发人员显示问题。在 PL/SQL 开发人员中，选择工具菜单和首选项选项，在 SQL 窗口类型和数字布局中取消选中格式化选项并选择任何其他选项并查看正确的结果。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:22:03.183

您提供的值无法通过接收列的数据类型解析为所需的精度。如果您需要精确到*百万分之一*，正如问题所暗示的那样，您应该检查表字段数据类型的精度并进行相应调整。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T13:22:16.017

这是因为您使用的数据类型不精确。**

# image - 倾斜图像 - 未检测到

> ID：12092490
> 
> 赞同：0
> 
> 时间：2012-08-23T13:17:17.263
> 
> 标签：image, image-processing, barcode, zbar-sdk

我正在使用 zbar 从图像中扫描条形码。Zbar 无法检测图像中条码倾斜或倾斜的条码。它正在检测垂直或水平但倾斜的图像。

如何去做。我是否应该手动将图像旋转 15 度并循环尝试。或者有没有更好的方法来处理这样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:11:39.390

我建议先对图像进行霍夫变换，然后使用结果来找出 iamge 的倾斜程度。

然后，您可以进行简单的图像处理以将其旋转正确的量，以便程序可以读取它。

编辑：

[这应该会有所帮助。](http://www.codeproject.com/Articles/13615/How-to-deskew-an-image)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:58:22.773

图书馆几乎可以肯定是在水平扫描条形码。只要倾斜不是太大以至于水平线不再能穿过整个条码，这种方法就可以工作。这大概是20度左右；你可以更精确地测量它。

我想它实际上会像你说的那样在旋转一些增量后简单地扫描比试图找到确切的旋转更快。

# jenkins - 声纳在多配置 Jenkins 构建中多次执行

> ID：12092492
> 
> 赞同：2
> 
> 时间：2012-08-23T13:17:23.357
> 
> 标签：jenkins, sonarqube, jenkins-plugins

我们在使用 Sonar 配置多配置构建时遇到了一些问题。

我想用多个 jdks（6 和 7）编译和测试一个项目，以确保项目在两者下都能正常工作。此外，我想让 Sonar 执行，但是希望 Sonar 仅在其中一个构建上执行以避免多次执行它，这会在 Sonar 数据库中复制数据并浪费时间。

我已将其设置为一个多配置项目，以两个 jvm 作为轴，Sonar 作为构建后操作。这构建和测试很好，但是它似乎在两个构建上都执行 Sonar。

一个问题是多配置项目上的“构建后操作”的定义是什么。它是在每次配置后执行的东西，还是在所有配置完成后运行一次的东西。我们有一个 Git 发布操作，它似乎可以执行我期望的操作，该操作在构建所有其他配置后运行一次，但是声纳似乎相反。这是 Sonar 插件的一个怪癖吗？它所做的并不是真正的“构建后操作”？

有什么方法可以配置可以实现我想要的构建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:03:17.710

您是否尝试过条件构建步骤插件？ [https://wiki.jenkins-ci.org/display/JENKINS/Conditional+BuildStep+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Conditional+BuildStep+Plugin) 您可以为构建步骤定义规则和条件。还要记住，Sonar 不仅可以配置为构建后操作，还可以配置为构建步骤[http://docs.codehaus.org/display/SONAR/Activate+Sonar+on+Jenkins+job](http://docs.codehaus.org/display/SONAR/Activate+Sonar+on+Jenkins+job)

# php - 运行多个 dos 命令并更改驱动器号 - 全部通过 php exec()

> ID：12092496
> 
> 赞同：0
> 
> 时间：2012-08-23T13:17:41.187
> 
> 标签：php, cmd, dos

我正在尝试通过 php exec() 运行一些命令，但遇到了很多麻烦。#1，我无法更改命令需要运行的驱动器号。#2，我不能运行多个命令 - 只有第一个命令运行。

我正在尝试做的示例

```
"cmd.exe /c \"cd E:\files; p4 -P -u user1 -c client1 sync ...\"" 
```

这让我绝对发疯，我已经尝试了所有方法并且无法更改驱动器号。即使不更改驱动器号，也只有我的第一个命令会运行。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:32:17.290

我认为您需要这样做的原因是因为`p4`应用程序需要从它所在目录的工作目录启动 - 在这种情况下，这样做的方法是更改​​ PHP 脚本的工作目录 ( [`chdir()`](http://php.net/manual/en/function.chdir.php))在调用之前`exec()`：

```
// Get current working directory so we can set it back afterwards
$oldDir = getcwd();

// Change to required dir
chdir('E:\\files');
// Execute external program
exec('p4 -P -u user1 -c client1 sync ..');

// Change back to original working directory
chdir($oldDir); 
```

如果外部程序的工作目录无关紧要，你可以这样做：

```
exec('E:\\files\\p4 -P -u user1 -c client1 sync ...'); 
```

您可能还需要将文件扩展名（例如`.exe`）附加到您正在执行的文件的名称中以使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:23:57.463

我可以看到的一个问题是`E:\files`，需要转义反斜杠。

而且我注意到在 Windows 中您首先更改驱动器号，然后更改目录。因此，如果您必须更改驱动器，请尝试以下操作：

```
"cmd.exe /c \"E:; cd E:\\files; p4 -P -u user1 -c client1 sync ...\"" 
```

# javascript - 铬秤闪烁不正确

> ID：12092500
> 
> 赞同：5
> 
> 时间：2012-08-23T13:17:56.517
> 
> 标签：javascript, flash, google-chrome, params

我使用下面的函数来创建用于显示 Flash 对象的代码。原始闪存大小为 320x240，但我想将其显示为 200x150，因此我使用参数宽度为 200，高度为 150 的函数。所有浏览器都可以正常工作，但 chrome 不能。它显示为 200x151（检查代码显示为 200x151 大小）。为什么？

```
function getFlashCode(params)
{
    debug('getFlashCode');
     var defaultParams = {movie: '', flashvars: {}, width:'', height: ''};
     for (var key in defaultParams)
     {  
         if (params[key] === undefined)
        params[key] = defaultParams[key];
     }

     var flashvars = '';
     for (var key in params.flashvars)
         flashvars += encodeURIComponent(key) + '=' + encodeURIComponent(params.flashvars[key]) + '&';

    var id = "fl" + Math.random();
     var code="";
      code += "         <object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" width=\"" + params.width + "\" height=\"" + params.height + "\"  align=\"middle\" id=\"" + id + "\">";
      code += "             <param name=\"movie\" value=\"" + params.movie +  "\" \/>";
      code += "             <param name=\"quality\" value=\"high\" \/>";
      code += "             <param name=\"play\" value=\"true\" \/>";
      code += "             <param name=\"loop\" value=\"true\" \/>";
      code += "             <param name=\"wmode\" value=\"transparent\" \/>";
      code += "             <param name=\"scale\" value=\"showall\" \/>";
      code += "             <param name=\"menu\" value=\"true\" \/>";
      code += "             <param name=\"devicefont\" value=\"false\" \/>";
      code += "             <param name=\"salign\" value=\"\" \/>";
      code += "             <param name=\"allowScriptAccess\" value=\"always\" \/>";
      code += "             <param name=\"flashvars\" value=\"" + flashvars + "\" \/>";
      code += "             <!--[if !IE]>-->";
      code += "             <object type=\"application\/x-shockwave-flash\" flashvars=\""+ flashvars + "\" data=\"" + params.movie + "\" width=\"" + params.width + "\" height=\"" + params.height + "\">";

      code += "                 <param name=\"movie\" value=\"" + params.movie + "\" \/>";
      code += "                 <param name=\"quality\" value=\"high\" \/>";
      code += "                 <param name=\"play\" value=\"true\" \/>";
      code += "                 <param name=\"loop\" value=\"true\" \/>";
      code += "                 <param name=\"wmode\" value=\"transparent\" \/>";
      code += "                 <param name=\"scale\" value=\"showall\" \/>";
      code += "                 <param name=\"menu\" value=\"true\" \/>";
      code += "                 <param name=\"devicefont\" value=\"false\" \/>";
      code += "                 <param name=\"salign\" value=\"\" \/>";
      code += "                 <param name=\"allowScriptAccess\" value=\"always\" \/>";
      code += "                 <param name=\"flashvars\" value=\"" + flashvars + "\" \/>";
      code += "             <\/object>";
      code += "             <!--<![endif]-->";
      code += "         <\/object>";
    return code;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T03:42:29.220

首先，该代码相当不可读，并且您会遇到一些问题。正如 Kos 所说，我强烈建议您使用[swfobject](https://code.google.com/p/swfobject)嵌入您的 Flash 文件，因为它可以处理所有浏览器异常。此外，不需要您的大多数参数，因为它们的默认值已经是指定的。这将是我推荐的方法：

```
<script type="text/javascript" src="swfobject.js"></script>
<script type="text/javascript">
var flashvars = {};
var params = {};
var attributes = {};

swfobject.embedSWF("filename.swf", "div-id-here", "200", "150", "9.0.0","expressInstall.swf", flashvars, params, attributes);
</script> 
```

然后，您只需添加带有您在 javascript 代码中指定和设置的 id 的 div 元素，您就完成了。我还必须提到一个我马上看到的问题：300/240 的宽/高比是 1.25，200/150 的比是 1.333，这意味着除非闪光灯是按比例缩放和改变元素的在大小方面，除非您更改缩放模式（这`showall`不是潜在的选项之一），否则您将在 Flash 电影上设置边框以保持比例不变。

我不知道 flash 是如何编程的，也不知道您到底想做什么，但我会让您自己尝试并阅读[Adob​​e 网站上的 params 文档](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html)。

# hibernate - Hibernate 覆盖数据

> ID：12092501
> 
> 赞同：1
> 
> 时间：2012-08-23T13:17:59.703
> 
> 标签：hibernate

我是 Hibernate 的初学者，我正在尝试将测试数据保存到表中。每次我运行脚本时，我的数据都会被覆盖，甚至是自动生成的 ID 字段。你能帮助我吗？

系统：（win7 32，Eclipse Indigo SR2，Jboss Hybernate 3.5.1）

```
public class testeHibernate {

public testeHibernate() {
}

/**
 * @param args
 */
public static void main(String[] args) {

    Session session = SessionFactoryUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    Status st = new Status();
    st.setAbrev("CON");
    st.setDescricao("Consultado");
    st.setFim(false);
    st.setVigente(true);
    session.persist(st);
    List result = session.createQuery("FROM Status").list();

    for(Status sta : (List<Status>) result){
        System.out.println(sta.getDescricao());
    }

    session.getTransaction().commit();

} 
```

}

公共类 SessionFactoryUtil {

```
private static final SessionFactory sessionFactory;

static {
    try {
        // Create the SessionFactory from hibernate.cfg.xml
        sessionFactory = new Configuration().configure().buildSessionFactory();

    } catch (Throwable ex) {
        // Make sure you log the exception, as it might be swallowed
        System.err.println("Falha na criação da SessionFactory Inicial: " + ex);
        throw new ExceptionInInitializerError(ex);
    }
}

public static SessionFactory getSessionFactory() {
    return sessionFactory;
} 
```

}

xml映射

```
<class name="br.com.bb.analop.classes.Status" table="analop_status">

    <id name="id" column="ID">
        <generator class="native" />
    </id>

    <property name="descricao">
        <column name="DESCRICAO" length="30" not-null="true" />
    </property>

    <property name="abrev">
        <column name="ABREV" length="10" not-null="true" />
    </property>

    <property name="fim">
        <column name="FIM" length="1" not-null="true" />
    </property>

    <property name="vigente">
        <column name="VIGENTE" length="1" not-null="true" />
    </property>

</class> 
```

配置 XML

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
                                         "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
 <session-factory name="sessionFactoryDB2">
  <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
  <property name="hibernate.connection.password">***classified****</property>
  <property name="hibernate.connection.url">jdbc:mysql://**CLASSIFIED**:3306/DB2</property>
  <property name="hibernate.connection.username">developer</property>
  <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
  <property name="hibernate.current_session_context_class">thread</property>
  <property name="hibernate.show_sql">true</property>
  <property name="hibernate.format_sql">true</property>
  <!-- Automatic schema creation (begin) === -->
  <property name="hibernate.hbm2ddl.auto">create</property>
  <!-- Simple memory-only cache -->
  <property name="hibernate.cache.provider_class">org.hibernate.cache.HashtableCacheProvider</property>
  <mapping class="br.com.bb.analop.classes.Status"
   package="br.com.bb.analop.classes" resource="br/com/bb/analop/classes/Status.hbm.xml"/>
 </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T13:23:34.417

改变这个：

```
<property name="hibernate.hbm2ddl.auto">create</property> 
```

对此：

```
<property name="hibernate.hbm2ddl.auto">update</property> 
```

每次启动应用程序时，Create 都会删除并重新创建数据库。更新只会在需要时更新您的架构，但（如果可能）保持数据不变

# asp.net - cookie 可接受的过期时间是多少

> ID：12092504
> 
> 赞同：0
> 
> 时间：2012-08-23T13:18:11.580
> 
> 标签：asp.net, .net, web-applications, cookies

我开发了一个 Web 应用程序，我正在使用 cookie 来存储用户 ID。

我的问题是我应该将到期时间设置为多长时间？我是否应该将其设置得尽可能短？

例如：-我的应用程序与时间和出勤率有关，因此我可以假设离开应用程序的最长时间是 2 周假期，因此我可以将其设置为 3 周或 1 个月。

还是我应该将其设置为 1 年、10 年？开发人员是否有某种道德责任在他们可以或人们不关心这种事情时保持机器cookie免费？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:26:43.327

我认为如果您的应用程序包含任何敏感数据，您应该为您的用户提供选择，例如“记住我”。

我们有一个关键业务应用程序，用户可以在其中拥有发票和敏感数据。一年前，我们甚至为所有用户设置了双因素登录。

所以这取决于有什么要保护的？或者另一个问题，如果有人要去度假 2 周，他到家后必须重新登录，这是否太糟糕了？

一般来说，我认为这只是一个舒适的功能。

关于道德问题，如果您的系统中有个人和重要数据，您应该尝试使用当今最好的技术之一（我的意思是存储密码）来保护它，但是如果您想给您的用户带来安慰，让他们使用“记住我”功能，因为那不是你的决定。

# jquery - 在 jquery 函数中设置变量

> ID：12092506
> 
> 赞同：0
> 
> 时间：2012-08-23T13:18:17.893
> 
> 标签：jquery

好吧，我知道，标题可能听起来有点奇怪......

以下问题：

我有一个这样的jquery函数：

```
(function($){
    $.fn.myFunction = function(opts){
        var settings = {
           params: {}
        };
    }

    if ( options ) { 
      $.extend( settings, options );
    }

} 
```

现在，该函数应用于这样的元素：

```
$('#elem').myFunction({'data':'test','data2': 'test2'}); 
```

如何从函数外部访问设置属性？

意思是，在函数初始化后，我想更改一些设置 - 但我不知道如何。

有任何想法吗？

（希望我写的内容不会太混乱：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:25:29.167

You'll have to take the variable up into higher level scope.

```
(function ($) {

    // we expose your variable up here
    var settings = {
    };

    $.fn.myFunction = function (opts) {
        // ...instead of down here
        // do something with settings, like:
        opts = $.extend({}, settings, opts);
    }

    // you can then access a "shared" copy of your variable even here
    if (options) {
        $.extend(settings, options);
    }

})(jQuery); 
```

If you have to expose it further, you'll just have to work along that same gist.

As a side note however, do note that calling `$.extend(settings, options)` will modify the `settings` variable. A nice way to do the same thing without modifying the original `settings` value is to call `$.extend()` on an empty object, and just cache the return like I did in the first `$.extend()` call in my example.

```
var modified_options = $.extend({}, settings, options); 
```

# jquery - 更改表格宽度并在单击时显示 div

> ID：12092512
> 
> 赞同：0
> 
> 时间：2012-08-23T13:18:37.430
> 
> 标签：jquery, css, onclick

我试图将表格的宽度从 100% 更改为 60%，并在用户单击特定 href 时显示 div。这是我的相关代码：

```
<table id="pageTable" width="100%">
...
...
<td><a href="#" onclick="shrink();">ABC</a></td>          
...
...
</table>
<div id="#xyz"> 
```

#xyz 的 CSS 有`display:none`

Javascript：

```
function shrink()
    {
    curr = document.getElementById('pageTable').width;  
    curr = (curr== '100%'?'60%':'100%');
    } 
```

我在使用 Jquery .show 函数时遇到问题。我的意思是`div`我应该应用它。此外，桌子的宽度没有改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:23:49.417

请不要内联javascript。

此外，在 html 中，您不需要在 id 中使用 #，这纯粹是 jquery 和 css。这是对的：`<div id="xyz"></div>`

```
<table id="pageTable" width="100%">
...
...
<td><a href="#" class="shrinky-dinky">ABC</a></td>          
...
...
</table>

<div id="xyz">XYZ</div> 
```

JS：

```
$(".shrinky-dinky").click( function() {
$("#pageTable").width( "60%" );
$("#xyz").show();
}); 
```

示例：http: [//jsfiddle.net/drpqT/1/](http://jsfiddle.net/drpqT/1/)

关于非侵入式 JavaScript 的文档：[http ://en.wikipedia.org/wiki/Unobtrusive_JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)

**更新：**我们已经确定该表正在加载 AJAX，因此将需要 .live 函数。

[http://jsfiddle.net/drpqT/2/](http://jsfiddle.net/drpqT/2/)

更多关于 .live [http://api.jquery.com/live/](http://api.jquery.com/live/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T13:25:42.880

宽度没有改变，因为您只更改了`curr`变量，您没有将其分配回表格宽度。所以试试这个：

```
function shrink() {
    curr = document.getElementById('pageTable').width;  
    curr = (curr== '100%'?'60%':'100%');
    document.getElementById('pageTable').width = curr;

    document.getElementById('#xyz').style.display = "block";
}​ 
```

[http://jsfiddle.net/q9X62/](http://jsfiddle.net/q9X62/)

或者使用 jQuery 我会这样做：

```
$(document).ready(function() {
    $("#shrinkLink").click(function() {
        $("#pageTable").toggleClass("shrunk");
        $("#xyz").toggle();
    });
});​ 
```

在您的样式表中使用以下内容：

```
#pageTable { width : 100%; }
#pageTable.shrunk { width : 60%; } 
```

演示：http: [//jsfiddle.net/q9X62/1/](http://jsfiddle.net/q9X62/1/)

添加和删​​除一个类来改变宽度比将宽度直接放在你的 JS 中更整洁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:23:04.823

如果您使用的是 jQuery，那么有一种更好的方法来做您想做的事情：

```
$("#yourLink").click(function() {
    $("#xyz").show(); /* Show the div whose id is "xyz" */
    $("#pageTable").width("60%"); /* Now change the width of the table to 60% */
}); 
```

这是一个演示：http: [//jsfiddle.net/BenjaminRH/Cq2CH/](http://jsfiddle.net/BenjaminRH/Cq2CH/)

此外，只有几个风格点：

*   不要使用内联 Javascript。使用 jQuery 的 click() 函数并将其绑定到链接，而不是将函数放在 onClick 属性中
*   HTML 中的 ID 不需要井号 (#)。只需在 div id 中使用“xyz”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T13:34:35.487

这应该很简单。这是执行扩展和隐藏/显示的 Html 和 JavaScript 代码。

```
<html>
<head>
    <title>Testing, what can be tested.</title>
    <script type="text/javascript" language="javascript">
        function shrink() {
            var curr = document.getElementById('pageTable').width;
            // This code will check current table width, and re-assign to 60% if 100%.
            if (curr == '100%') {
                document.getElementById('pageTable').width = '60%';
            }
            else {
                document.getElementById('pageTable').width = '100%';
            }

            // This code will check current div display, and re-assign to visible is hidden & vide versa.
            if (document.getElementById('pageDiv').style.display != 'block') {
                document.getElementById('pageDiv').style.display = 'block';
            }
            else {
                document.getElementById('pageDiv').style.display = 'none';
            }
        }
    </script>
</head>
<body>
    <!-- This table needed a border to identify the dimension change. -->
    <table id="pageTable" width="100%" border="1">
        <tr>
            <td>
                <a href="#" onclick="shrink();">Calling Shrink</a>
            </td>
        </tr>
    </table>
    <!-- This div needed to hidden first to shown on click. -->
    <div id="pageDiv" style="display: none;">
        Now Showing; An extra function.
    </div>
</body>
</html> 
```

# google-apps-script - 在时钟事件触发器中，论坛字段未定义

> ID：12092514
> 
> 赞同：0
> 
> 时间：2012-08-23T13:18:51.837
> 
> 标签：google-apps-script

我有一个由时钟事件调用的触发函数。我正在使用 range.getValues() 从电子表格中读取值。我没有在结果数据数组中接收公式结果值，而是在有公式的地方看到未定义。

如何让公式在这种环境中执行？

这是一个例子。该函数每小时调用一次。它应该等到股价超过 15.01 美元。相反，它只是在第一个小时给我发电子邮件，告诉我价格“未定义”......

```
/*
    run a script at a time or times you designate:

    From the Script Editor, choose Resources > Current script's triggers. You 
    see a panel with the message No triggers set up. Click here to add one now.
    Click the link that says No triggers set up. Click here to add one now.
    Under Run, select the function you want executed on schedule.
    Under Events, select Time-driven.
    On the first drop-down list that appears, select Hour timer
*/
function onHour() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var s = ss.getSheetByName("onHour");
  if(s == null) {
    s = ss.insertSheet("onHour", 1);
    s.appendRow(["EVENT","PROCESSED","EMAIL","SUBJECT","BODY"]);
  }
  //here are the column headers in the sheet onHour
  var EVENT=0; // first row (A2) has formula: =F2>15.01 ... cell F2 is: =GoogleFinance(G2; "price") ... G2 = PBI
  var PROCESSED=1; // this is empty (until later)
  var EMAIL=2; // my email
  var SUBJECT=3; //email subject
  var BODY=4;//has formula: =F2  ... email the price (however, email body = "undefined") 
  var range = s.getRange("A2:D"); //get everything above (leaving the D range open-ended works fine)
  var values = range.getValues(); 
  for(var rowIndex = 0; rowIndex < values.length; rowIndex++) {
    var data = values[rowIndex];
    if(data[EVENT] && ! data[PROCESSED]) {//The first hour, cell data[EVENT] (A2) should be FALSE, but the IF condition evaluates to True ..
      //This emails me, but it should not have because the price has not reached $15.01
      MailApp.sendEmail(data[EMAIL], data[SUBJECT], data[BODY]);
      var cell = range.getCell(rowIndex+1, PROCESSED+1);
      //set the PROCESSED column (A3) to TRUE so I will only get 1 email
      cell.setValue(true);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:56:42.893

改变：

```
var ss = SpreadsheetApp.getActiveSpreadsheet(); 
```

到：

```
var ss = SpreadsheetApp.openById("spreadsheet id"); 
```

“添加触发器”可以处理一条消息 - 建议人们使用 openById 而不是 getActiveSpreadsheet

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:13:01.940

将 s.getRange("A2:D") 更改为 s.getRange("A2:E")

getValue 按预期返回评估后的所有公式。我的范围不够大。

# user-interface - 在命令按钮侦听器的 InputText 上输入事件

> ID：12092516
> 
> 赞同：0
> 
> 时间：2012-08-23T13:19:03.380
> 
> 标签：user-interface, jsf-2, primefaces

我有一个`<p:inputText value="#{beans.text}" />`和一个`<p:commandButton actionlistener="#{beans.method}" />`。如何通过 inputText 中的“输入”从 Button 执行 actinoListener-Method？

感谢您的回答

出了点问题。这是代码片段->

```
<h:panelGrid columns="2">
<p:commandButton actionListener="#{hoursView.saveOrUpdateHour}" />
<p:commandButton actionListener="#{hoursView.onFilterChange()}" oncomplete="dlgHoursFilter.show()" immediate="true" update=":hoursFilter" />
</h:panelGrid>
</h:panelGrid>
<h:panelGrid columns="4" class="buttonContent" id="buttonView">
<p:commandButton ajax="false" actionListener="#{hoursView.showDay()}" immediate="true" update="hoursList" />
<p:commandButton  ajax="false" actionListener="#{hoursView.showWeek()}" immediate="true" update="hoursList" />
<p:commandButton  ajax="false" actionListener="#{hoursView.showMonth()}" immediate="true" update="hoursList" />
<p:commandButton  ajax="false" actionListener="#{hoursView.showAll()}" immediate="true" update="hoursList" />
</h:panelGrid>
         <h:panelGrid columns="3" id="tableGrid">
            <p:dataTable id="hoursList" value="#{hoursView.listHours}"
                var="hours" widgetVar="hoursTable" resizableColumns="true"
                emptyMessage="#{msg.noData}" rowKey="#{hours.id}"
                selection="#{hoursView.selected}" selectionMode="single">

                <p:ajax event="rowDblselect" update=":hourEditDialog"
                    listener="#{hoursView.onHourSelect}"
                    oncomplete="dlgHourEdit.show()" />

                <f:facet name="header">
                    <h:panelGrid columns="3" class="buttonContent" id="regexContent">
                        <h:outputText value="#{msg.regexHour}" />
                        <p:inputText value="#{hoursView.regex}" id="regex">
                        </p:inputText>
                        <p:commandButton icon="addButton" id="regexSave"
                            process="regexContent" actionListener="#{hoursView.regexSave}"
                            update=":editContent:hoursList,:editContent:growl,regex">
                            <p:defaultCommand target="regexSave" scope="regexContent" />
                        </p:commandButton>
                        <p:tooltip for="regexSave" value="#{msg.regexSave}"
                            showEffect="fade" hideEffect="fade" />
                    </h:panelGrid>
                </f:facet> 
```

如果我触发“输入”事件，则将执行正则表达式保存方法。但是 saveOrUpdateHour 的方法也是....

* * *

出了点问题。这是代码片段->

```
<h:panelGrid columns="2">
<p:commandButton actionListener="#{hoursView.saveOrUpdateHour}" />
<p:commandButton actionListener="#{hoursView.onFilterChange()}" oncomplete="dlgHoursFilter.show()" immediate="true" update=":hoursFilter" />
</h:panelGrid>
</h:panelGrid>
<h:panelGrid columns="4" class="buttonContent" id="buttonView">
<p:commandButton ajax="false" actionListener="#{hoursView.showDay()}" immediate="true" update="hoursList" />
<p:commandButton  ajax="false" actionListener="#{hoursView.showWeek()}" immediate="true" update="hoursList" />
<p:commandButton  ajax="false" actionListener="#{hoursView.showMonth()}" immediate="true" update="hoursList" />
<p:commandButton  ajax="false" actionListener="#{hoursView.showAll()}" immediate="true" update="hoursList" />
</h:panelGrid>
<h:panelGrid columns="3">
<h:outputText value="#{msg.regexHour}" />
<p:inputText value="#{hoursView.regex}" id="regex">
<p:ajax event="change" update="hoursList, growl" listener="#{hoursView.regexSave}" />
</p:inputText>
<p:commandButton  actionListener="#{hoursView.regexSave}" update="hoursList, growl" />
</h:panelGrid> 
```

如果我触发“输入”事件，则将执行正则表达式保存方法。但是 saveOrUpdateHour 的方法也是....

同时我已经配置了我的代码。现在文本字段和按钮在我的表格的标题中。

```
 <h:panelGrid columns="3" id="tableGrid">
            <p:dataTable id="hoursList" value="#{hoursView.listHours}"
                var="hours" widgetVar="hoursTable" resizableColumns="true"
                emptyMessage="#{msg.noData}" rowKey="#{hours.id}"
                selection="#{hoursView.selected}" selectionMode="single">

                <p:ajax event="rowDblselect" update=":hourEditDialog"
                    listener="#{hoursView.onHourSelect}"
                    oncomplete="dlgHourEdit.show()" />

                <f:facet name="header">
                    <h:panelGrid columns="3" class="buttonContent" id="regexContent">
                        <h:outputText value="#{msg.regexHour}" />
                        <p:inputText value="#{hoursView.regex}" id="regex">
                        </p:inputText>
                        <p:commandButton icon="addButton" id="regexSave"
                            process="regexContent" actionListener="#{hoursView.regexSave}"
                            update=":editContent:hoursList,:editContent:growl,regex">
                            <p:defaultCommand target="regexSave" scope="regexContent" />
                        </p:commandButton>
                        <p:tooltip for="regexSave" value="#{msg.regexSave}"
                            showEffect="fade" hideEffect="fade" />
                    </h:panelGrid>
                </f:facet>   .... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:08:22.950

您可以在 jquery 的帮助下使用`onkeypress`and调用`p:inputText`按钮`.click()`上的`return false;``p:ajax for example`

像这样：

```
<p:commandButton id="myButtonID" actionlistener="#{beans.method}" />

<p:inputText value="#{beans.text}" onkeypress="if (event.keyCode == 13) { jQuery('#myButtonID').click(); return false;}"/> 
```

* * *

更新而不是`:editContent:hoursList`尝试`update="tableGrid"`（请参阅表包装器）或者如果您使用的是 primefaces 3.4 尝试`update="hoursList"`

# python - 在 python 中签署亚马逊 GetFederationToken

> ID：12092518
> 
> 赞同：1
> 
> 时间：2012-08-23T13:19:15.220
> 
> 标签：python, amazon-web-services

我有一段 python 代码请求一个新的联合令牌：

```
AWS_HOST = 'sts.amazonaws.com'
AWS_URI = '/'

AWS_ID = '...'
AWS_SECRET = '...'

def amazon(content):
  URI_String=[]         
  for keyword, value in sorted(content.items()):  
    URI_String.append('%s=%s' % (keyword, urllib.quote(value)) 
  req =  '&'.join(URI_String)                                

  to_sign_req = 'GET\n%s\n%s\n%s' % (AWS_HOST, AWS_URI, req) 
  h = hmac.new(AWS_SECRET, to_sign_req, hashlib.sha256)      
  sig = base64.b64encode(h.digest())                         
  req += '&Signature=%s' % urllib.quote(sig)                 

  baseurl = 'https://sts.amazonaws.com?'                     

  apicall = baseurl + req                                    
  r = urllib.urlopen(apicall).read()                         
  return r 
```

我将它与这些准备好的内容一起使用：

```
content['Timestamp'] = dstamp.strftime('%Y-%m-%dT%H:%M:%S.000Z')
content['SignatureVersion'] = '2'
content['AWSAccessKeyId'] = AWS_ID
content['DurationSeconds'] = '3600'
content['SignatureMethod']='HmacSHA256'
content['Version']='2011-06-15'
content['Action']='GetFederationToken'
content['Name']='someFederateduserName' 
```

它工作正常。但是当我尝试添加策略（`content['Policy']=POLICY`）时，具有 POLICY =

```
{ 
  "Statement": [{
    "Effect": "Allow",
    "Action": "s3:PutObject",
    "Resource": "arn:aws:s3:::bucketname/foldername/*"
  }]
} 
```

亚马逊返回`SignatureDoesNotMatch`响应。有谁知道如何修理它？我想发布具有自定义策略的联合令牌...

# jquery - 使用 jquery 和 Coldfusion 下载 ajax 文件

> ID：12092521
> 
> 赞同：0
> 
> 时间：2012-08-23T13:19:26.133
> 
> 标签：jquery, ajax, coldfusion, download

单击处理从服务器下载文件的冷融合页面时，我有一个链接。当我直接在 url 中访问文件时，它可以正常工作，所以我知道该部分正在工作。我的下一步是引入 ajax，以便与用户无缝交互。这是我使用 ajax 调用的事件处理程序（在初始页面加载时调用事件处理程序）：

```
function fileHandler(){
    $('#attachment').click(function(e){
        e.preventDefault();
        $.ajax({
            type:"get",
            url:"test.cfm",
            data:{name:"john"}
        });
    });
} 
```

但我什么也得不到。这是我第一次使用 jQuery 的 .ajax()。我通常使用 .get() 和 .load()。我检查了文档，我的语法看起来是正确的。有没有人看到为什么我无法让浏览器提示保存文件的问题？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:24:26.390

您不能通过 Ajax (XMLHTTPRequest) 触发“另存为”对话框。Ajax 调用将数据从您的服务器返回到您的 javascript 应用程序，这就是使用 Ajax 的全部意义所在。下载文件并将其保存在计算机上只是另一个用例 - 这是“浏览器工作”，而不是您的工作。

我通过在页面上附加一个隐藏的 iframe 解决了这个“问题”，这将触发一个“另存为...”对话框，用户不会注意到它。这就像在另一个选项卡中打开一个地址，只是它被隐藏了。

```
$('body').append(
    $('<iframe>', { 
        src: 'test.cfm?name=john' 
    }).hide()
); 
```

# windows-phone-7 - 在 Windows Phone 应用程序中处理 SVG

> ID：12092522
> 
> 赞同：1
> 
> 时间：2012-08-23T13:19:28.947
> 
> 标签：windows-phone-7, svg

我正在寻找一些相关的资源。我有 svg 类型的地图文件，我想在上面放一些图钉。

这个主题有任何可用的教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T21:00:48.180

这是给你的投机路线。使用 INKSCAPE 将 SVG 转换为 XAML。看看它是否会在 Expression Blend 中呈现。将您的图钉放在 XAML 画布上。可能工作....

# python - 如何将字节写入文件？

> ID：12092527
> 
> 赞同：195
> 
> 时间：2012-08-23T13:19:53.103
> 
> 标签：python

我有一个返回字符串的函数。该字符串包含回车符和换行符（0x0D，0x0A）。但是，当我写入文件时，它只包含新的换行符。有没有办法让输出包含回车和换行符？

```
msg = function(arg1, arg2, arg3)
f = open('/tmp/output', 'w')
f.write(msg)
f.close() 
```

* * *

## 回答 #1

> 赞同：349
> 
> 时间：2012-08-23T13:22:00.830

如果要写入字节，则应以二进制模式打开文件。

```
f = open('/tmp/output', 'wb') 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2020-08-04T12:41:15.910

如果不存在，则写入字节并创建文件：

```
f = open('./put/your/path/here.png', 'wb')
f.write(data)
f.close() 
```

`wb``write binary`表示以模式打开文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-11-29T15:40:31.120

这只是一个“更清洁”的版本`with`：

```
with open(filename, 'wb') as f: 
    f.write(filebytes) 
```

# c# - 静态一次性物品

> ID：12092529
> 
> 赞同：13
> 
> 时间：2012-08-23T13:20:07.497
> 
> 标签：c#, winforms, static, garbage-collection, dispose

*   我应该如何管理`static`带有一次性物品的课程？有什么经验法则吗？

*   基本上，我应该重构并制作以下`DisposableDataManager`​​课程`non- static`还是可以将所有内容留给`GC`?

.

```
public static class DisposableDataManager
{
    // ImageList is an 'IDisposable'.
    public static ImageList FirstImageList { get; private set; }
    public static ImageList SecondImageList { get; private set; }

    static DisposableDataManager()
    {
        FirstImageList = CreateFirstImageList();
        SecondImageList = CreateSecondImageList();        
    }

    // ...
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-31T06:06:46.907

这实际上取决于处置资源对您的重要性。当您的应用程序关闭时，它打开的所有句柄（文件、网络连接、图形等）无论如何都会被释放，所以*这*不是问题。如果您想处理更有序的发布，那就更成问题了——例如，在关闭流之前刷新它。`Dispose`CLR 会“尽最大努力”在进程退出之前运行终结器，在*某些*情况下这会反过来调用——但这不是我想要依赖的任何重要的东西。

所以在`ImageList`对象的情况下，它真的不应该是一个问题。你绝对不会泄露任何资源——操作系统会处理这些。

话虽如此，我仍然会尝试重构 - 仅仅是因为全局状态往往不是一个好主意。它使依赖关系变得隐含，并且更难测试。在施工时为每个需要它的对象提供相关信息有多难？

（注意：静态变量实际上与整个过程相关联，`AppDomain`而不是与整个过程相关联。这使得整个问题在`AppDomain`s 上下移动的应用程序中变得更加复杂，但我怀疑它与您的场景相关。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T13:28:44.410

作为一个静态类，您是说应用程序可以使用一切。那么你为什么要处理它呢？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T13:37:44.377

您可以挂钩 AppDomain.DomainUnload 事件并调用 dispose 在您想要确保在退出之前清理的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T17:44:30.547

我从该代码中看到的是您将无法处理`ImageList`，因为它`DisposableDataManager`是一个静态类，在应用程序关闭之前可以访问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T20:38:56.633

我相信你目前的工作方式*可能会*奏效，但肯定有更好的方法来解决你的程序打算做的事情。如果它确实有效，那将是对语言的滥用 - 使用违背其意图的功能。

如果您继续使用此架构路径，您的代码将难以理解和修改。

用这种方法写下你所追求的东西并寻求其他想法可能是值得的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-23T13:32:10.347

无论如何，一次性资源都不应该放在静态类中。因为如果程序结束（例如程序崩溃），它们不太可能被处理掉。因此，您可以自己在一个对象中添加和释放资源，只要您的应用程序运行和

*   在进入程序循环之前被包装在 using 语句中。
*   或者您自己处理它，并在程序结束后立即在 finally 构造中调用 dispose。

或者您可以将 ImageList 更改为根本不是一次性的。仅当您可以自己处置它拥有的所有资源时，这才是一种选择。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-08-28T02:22:55.253

我认为您不需要做任何一次性对象管理器。GC 已经为您管理内存。您可能已经知道，Dispose 方法是来自 .Net 框架中包含的 IDisposable 接口的方法。但这是一种与其他任何方法一样的方法*。垃圾收集器不会等待调用 Dispose 来释放对象的内存。他监视对象是否总是可以从某个地方到达。这有助于他确定哪些对象是活的，哪些是死的。

在继续阅读 GC 生成之前。[http://msdn.microsoft.com/en-us/library/ms973837.aspx](http://msdn.microsoft.com/en-us/library/ms973837.aspx)

我不确定，但是当调用 new() 并且 GC 达到实际使用的一代的容量时，他会清除下一代“死”对象。可能在其他时候我没有。GC 是一个如此神秘而神秘的实现，因为它可能是 C++ 中的死记硬背。但你不必关心它。

在某些情况下（mono-develop），我听说你应该更关心它。但如果您在 Microsoft 环境中编码，则不会。

*我说：

> 像其他人一样的方法

但是 using 块使您可以自由地不关心调用 IDisposable 对象的 Dispose 方法并为您调用该方法。Dispose方法的存在就是在对象停止使用前释放需要释放的资源。

前任：

```
 public class Test : IDisposable
    {
        public void Dispose()
        {
            // release other necessary ressources if needed

            Console.WriteLine("Disposed");
        }
    }

    {
        using (IDisposable disposable = new Test())
        {

        }
    } 
```

如同：

```
{
    IDisposable disposable = new Test()
    disposable.Dispose();
} 
```

所以你可以对GC充满信心。如果您想确保 GC 会释放您的对象内存，只需将所有对它的引用设为 null。GC 会将您的对象视为“死”：P

# macos - Jabber 服务器的 IMServicePlugIn

> ID：12092530
> 
> 赞同：5
> 
> 时间：2012-08-23T13:20:12.503
> 
> 标签：macos, osx-lion, xmpp, osx-mountain-lion, ichat

由于某些特殊身份验证，我必须编写一个 Messages 插件来访问内部 Jabber 服务器。我有两个问题：

1.  Messages Jabber 插件是否有可用的源代码，所以我可以只修改身份验证部分而不必编写整个插件？
2.  如果没有，我如何将群组列表中每个好友的状态发送到 IMService？我创建了一个插件，可以登录并从内部服务器检索好友列表。好友列表显示在消息中，每个人都离线，甚至在线的好友。我花了几天时间查看有限的文档和标题，但我无法弄清楚如何将组列表中每个好友的状态传递给 IMService。当我从 Jabber 服务器获取组列表时，我在我的 IMServiceApplication 对象上调用 plugInDidUpdateGroupList 方法。我只看到我可以通过组名，权限和每个好友的名称。他们都出现在离线状态。如何传递每个好友的状态？

谢谢。

# javascript - 如何将 HTML 转换为有效的 XHTML？

> ID：12092532
> 
> 赞同：9
> 
> 时间：2012-08-23T13:20:15.323
> 
> 标签：javascript, html, xml, parsing, xhtml

我有一个 HTML 字符串，在这个例子中它看起来像

```
<img src="somepic.jpg" someAtrib="1" > 
```

我正在尝试锻炼与“img”节点匹配的正则表达式，并在节点末尾应用斜杠，使其看起来像。

```
<img src="somepic.jpg" someAtrib="1" /> 
```

本质上，这里的最终目标是确保节点是关闭的，打开的节点在 HTML 中有效，但显然不是 XML。是否有任何正则表达式爱好者可以提供帮助？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-23T13:38:16.237

不要使用正则表达式，而是使用专用的解析器。在 JavaScript 中，使用 创建一个文档[`DOMParser`](https://developer.mozilla.org/en-US/docs/DOM/DOMParser)，然后使用 序列化它[`XMLSerializer`](https://developer.mozilla.org/en-US/docs/XMLSerializer)：

```
var doc = new DOMParser().parseFromString('<img src="foo">', 'text/html');
var result = new XMLSerializer().serializeToString(doc);
// result:
// <html xmlns="http://www.w3.org/1999/xhtml"><head></head><body> (no line break)
// <img src="foo" /></body></html> 
```

如果需要将它与 nodejs 后端一起使用，则必须使用[xmldom](https://www.npmjs.com/package/xmldom)。`npm i xmldom`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-07T08:57:39.230

您可以创建 xhtml 文档并导入/采用 html 元素。Html 字符串可以通过 HTMLElement.innerHTML 属性解析，原因。关键是使用 Document.importNode() 或 Document.adoptNode() 方法将 html 节点转换为 xhtml 节点：

```
var di = document.implementation;
var hd = di.createHTMLDocument();
var xd = di.createDocument('http://www.w3.org/1999/xhtml', 'html', null);
hd.body.innerHTML = '<img>';
var img = hd.body.firstElementChild;
var xb = xd.createElement('body');
xd.documentElement.appendChild(xb);
console.log('html doc:\n' + hd.documentElement.outerHTML + '\n');
console.log('xhtml doc:\n' + xd.documentElement.outerHTML + '\n');
img = xd.importNode(img); //or xd.adoptNode(img). Now img is a xhtml element
xb.appendChild(img);
console.log('xhtml doc after import/adopt img from html:\n' + xd.documentElement.outerHTML + '\n'); 
```

输出应该是：

```
html doc:
<html><head></head><body><img></body></html>

xhtml doc:
<html xmlns="http://www.w3.org/1999/xhtml"><body></body></html>

xhtml doc after import/adopt img from html:
<html xmlns="http://www.w3.org/1999/xhtml"><body><img /></body></html> 
```

Rob W 的答案在 chrome（至少 29 及以下）中不起作用，因为 DOMParser 不支持 'text/html' 类型，并且 XMLSerializer 为 chrome 中的 html 文档生成 html 语法（不是 xhtml）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-18T20:33:30.860

除了 Rob W's [answer](https://stackoverflow.com/a/12092919/1712065)之外，您还可以使用 RegEx 提取正文内容：

```
var doc = new DOMParser().parseFromString('<img src="foo">', 'text/html');
var result = new XMLSerializer().serializeToString(doc);

/<body>(.*)<\/body>/im.exec(result);
result = RegExp.$1;

// result:
// <img src="foo" /> 
```

*注意：`parseFromString(htmlString, 'text/html');`会在 IE9 中抛出错误，因为 IE9不[支持](http://msdn.microsoft.com/en-us/library/ie/ff975278%28v=vs.85%29.aspx)**text/html** mimeType 。虽然适用于 IE10 和 IE11。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T13:55:26.250

这将做得很好：

```
result = text.replace(/(<img\b[^<>]*[^<>\/])>/ig, "$1 />"); 
```

附录：如果（不太可能）您的代码包含包含尖括号的标记属性（这不是有效的 XML/XHTML BTW），那么这个会做得更好：

```
result = text.replace(/(<img\b(?:[^<>"'\/]+|'[^']*'|"[^"]*")*)>/ig, "$1 />"); 
```

# windows - 准备windows phone7应用上传到市场

> ID：12092535
> 
> 赞同：0
> 
> 时间：2012-08-23T13:20:33.833
> 
> 标签：windows, windows-phone-7, windows-phone-7.1

我是 windows phone7 的新手，只是在准备将应用程序上传到市场时遇到了一些问题。

**(1)。**对 App 版本命名有点困惑。

在 中`WMAppManifest.xml`，App 标签下有“version”属性。另外，当我检查`AssembleInfo.cs`它有以下内容时

```
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")] 
```

我不确定这三个版本号之间的区别（一个在 WMAppManifest.xml 文件中，另一个在 AssembleInfo.cs 中）并且都应该包含相同的值。

同样据我所知，我们不应该手动编辑这些文件，而应该通过应用程序属性界面更改值。但是我在应用程序属性界面中没有找到任何地方可以更改“WMAppManifest.xml”文件的“版本”号。

* * *

**(2)。**在创建最终 .xap 文件之前必须执行的所有重要步骤

*   WMAppManifest.xml 文件的部分是什么`<Capabilities>`，我必须在那里更改任何内容吗？

* * *

**(3)。** 将新的应用程序更新推向市场时必须遵循的步骤。

* * *

如果有人可以指导这一点，将不胜感激。提前致谢....！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:33:14.140

这些根本不是问题，也没有什么可担心的。

(1) 应用版本是您在向市场提交应用时指定的版本。

申请提交过程中有一个栏目，询问你应用程序的版本，你可以在那里选择一个版本号。与您的财产无关（就市场提交而言）。

(2) 是您的应用程序使用或包含的功能。例如：如果您的应用程序从您的代码发出任何网络请求，则网络功能，或者如果您的应用程序使用相机等，则为相机功能

同样，这些都是从您的 XAP 文件中识别出来的，您不必担心这一点。

(3) 以上两项适用于您提交更新时。提交更新时没有什么特别的，过程是一样的。

有一个快乐的提交。我建议您在提交过程中为您的应用选择关键字时要小心:)

更新：

微软文档说：

```
The app version number is not extracted from the executable, so you’ll need
to enter it manually. If you're uploading an update to your app, adjust the
XAP version number accordingly. 
```

So you don't have to worry about version number during submission. But you can maintain version in the XAP for future purpose. And I forgot to tell, In the app properties interface, there is a button "Assembly Information" which allows you to change your version number of the build. Hope this clears your doubt.

# ios - 如何在 MegaFiers 中使用碰撞变形器？

> ID：12092537
> 
> 赞同：0
> 
> 时间：2012-08-23T13:20:43.787
> 
> 标签：ios, unity3d, collision, mesh

我是 Unity 和 MegaFiers 的新手。我试图找到一个关于如何在任何地方使用碰撞变形器的教程，但我找不到任何东西。我在蒙皮网格上有一个网格渲染器，当它撞到其他物体时我试图使其变形。碰撞变形器听起来很适合这个，但我就是不能让它工作！

你知道如何使用碰撞变形器，或者你知道任何地方的教程会告诉我如何使用它吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T20:53:26.513

作为系统的作者，碰撞变形器仍处于早期 alpha 阶段，添加它是为了让用户可以使用代码。我将很快完成变形器并为其添加适当的文档和教程。

# jquery - 如何从css值附加元素条件

> ID：12092539
> 
> 赞同：1
> 
> 时间：2012-08-23T13:20:55.190
> 
> 标签：jquery, css, opacity

我需要为不透明度小于 0 的元素添加一些 css，这个值会动态变化。如果这种情况存在，如何为此元素设置条件。

```
if ($('#rounded_items li').css("opacity" < "0")){
    $(this).css('display','none');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:27:46.433

```
 var opacity = Number($('#rounded_items li').css("opacity"));

 something.css('display', opacity < 0 ? 'none' : 'block'); 
```

**注意**：不透明度是从不`< 0`。总是在 0 到 1 之间 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:29:28.697

另一种解决方案，不如罗宾的好：

[http://jsfiddle.net/8Wr56/](http://jsfiddle.net/8Wr56/)

```
<div class="zero">Zero Opacity</div>
<div class="full">Full Opacity</div>

.zero { opacity:0; }
.full{ opacity:1; }

$("div").each(function() {

    if( $(this).css("opacity") === '0' )
    {
        $(this).css('display','none');
    }    

}); 
```

# javascript - 调用函数和创建函数实例之间的 Javascript 区别

> ID：12092542
> 
> 赞同：17
> 
> 时间：2012-08-23T13:20:59.213
> 
> 标签：javascript

我试图理解为什么在直接调用外部函数时内部函数可以访问外部函数的公共属性，但在将其分配给变量时不能访问？

例子：

```
function outer(x,y){

    this.x = x;
    this.y = y;

    function inner(){
        alert(this.x);       
    }

    inner();
}

outer(1,2); //As expected, alerts 1
var func = outer(1,2) //Also alert 1
var func2 = new outer(1,2); //Alerts undefined 
```

我尝试的一件事是从中删除`this`关键字`alert(this.x);`，它确实适用于所有三种情况。但是，如果我确实删除了`this`关键字，我将访问传入的参数，而不是公共变量，这绝对不是所需的操作。有人可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-23T13:23:49.750

当您`outer(1, 2)`这样调用时，`this`是对 的引用`window`，因此“x”和“y”实际上是全局变量。这就是为什么`inner()`可以访问“x”。

当您调用时，`new outer(1, 2)`您已导致`this`（在“外部”中）成为对新对象的引用。当在“outer”内部调用“inner”时，`this`仍然会引用`window`，所以没有“x”。

的值`this`是针对**每个**函数调用确定的，并且该值仅取决于该调用的细节。因此，您通过调用“外部”的事实`new`对“内部”的内部调用没有影响——因为您只是将函数调用为`inner();`，该`this`函数内部的值将是对`window`（好吧，全局上下文，无论是）。

以下是`this`可以在调用函数时设置的方法：

1.  如果函数是通过`new`操作符调用的，那么`this`将引用一个新创建的对象。
2.  如果对函数的引用是通过对对象 ( `foo.someFunction()`) 的属性查找获得的，`this`则将是对该对象的引用。
3.  如果函数是通过`.call()`或`.apply()`从函数原型调用的，那么`this`将引用使用这些函数中的任何一个的第一个参数，必要时强制为对象值。
4.  如果函数是通过简单的“裸”引用调用的，那么`this`将引用全局上下文（`window`在浏览器中）。*编辑*— Šime Vidas 在上面的评论中指出，在严格模式下，这种情况会导致`this`存在`null`（这确实更有意义，并且可以避免在 OP 中观察到的怪异）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-23T13:27:38.980

有 4 种方法可以在 Javascript 中使用函数，每种方法的作用都是改变其内容`this`：

*   函数调用：this = 全局对象（浏览器中的窗口）
*   方法调用：this = 调用它的对象。
*   构造函数调用： this = 您正在创建的新对象。
*   调用/应用调用：this = 您传递的对象。

在您的情况下`this == window`，当您直接调用函数（`outer()`）但如果您使用 new（`new outer()`）调用，那么它将是您正在创建的新对象。

基本上我在[这里写的](https://stackoverflow.com/a/12091342/82526)

# c++ - 具有唯一静态成员的 C++ 模板

> ID：12092543
> 
> 赞同：1
> 
> 时间：2012-08-23T13:21:01.703
> 
> 标签：c++, templates, static-members

模板类为它的每个实例复制了所有静态成员。如果我想要一个对所有实例只存在一次的静态成员，我该怎么办？在类模板之外使用普通的静态字段？会工作，但似乎不优雅，因为没有更多与模板类的关联。有没有办法以某种方式将这种独特的静态成员与模板类相关联？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T13:26:01.080

不; 每个模板类都是一个完全独立的对象。

您可以做的是使用静态成员创建一个公共祖先类：

```
class Parent
{
public:
  static int commonStatic;
};

template <typename T>
class MyTempl : public Parent
{
  static int nonSharedStatic;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:23:04.543

> 模板类为它的每个实例复制了所有静态成员。

没有。每个*专业化*都有不同的静态，但不同的专业化是不同的类。别搞错了，`vector<int>`而且`vector<char>`是**完全**分开的。把它想象成写作`IntVector`和`CharVector`。

编辑：不要为此使用继承。仅仅为了共享静态成员而引入基类绝对是错误的做法。

如果您希望在不同的班级之间共享内容，请像通常那样做。在第三个类中包装一些静态，就是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T13:25:12.877

为模板类定义一些基类。在这个基类中包含所有常见的成员：

```
class ExampleBase {
public:
   static int foo;
};
int ExampleBase::foo = 0;

template <class A>
class Example : private ExampleBase {
public:
    static void setFoo(int f) { foo = f; }
    static int getFoo() { return foo; }
}; 
```

然后每个 Example 实例都有共同的静态成员`ExampleBase::foo`：

```
int main() {
    Example<int>::setFoo(7);
    assert(Example<float>::getFoo() == 7);
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T13:27:58.087

在某处放置一个全局变量。

像这样的东西：

```
#include <iostream>

// header.hpp
extern int someValue;
template< typename T >
struct A
{
  int foo() const
  {
    return someValue;
  }
};

// source.cpp
int someValue = 5;

int main()
{
  std::cout << A< float >().foo() << std::endl;
  std::cout << A< int >().foo() << std::endl;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T13:28:27.993

> 在类模板之外使用普通的静态字段？

确切地; 只需将其放入模板声明之外的函数中即可。

如果真的想在这种情况下限制访问，你可以使用这样的东西：

```
class t_shared {
    static int& Shared() {
        static int s(0);
        return s;
    }
public:
    template < typename T >
    class t_template {
    public:
        void f() {
            std::cout << ++Shared() << std::endl;
        }
    };
};

int main(int argc, const char* argv[]) {
    t_shared::t_template<int>().f();
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-23T13:34:35.047

类模板在静态成员方面实际上与普通类有点不同。以下内容非常好，即使`foo.hpp`每个翻译单元都包含以下内容：

**foo.hpp：**

```
template <typename T> struct TmplFoo
{
    static double d;
};

struct OrdFoo
{
    static double e;
} 
```

**foo.cpp：**

```
#include "foo.hpp"

double OrdFoo::e = -1.5; 
```

请注意，我们*永远*不需要单独定义`TmplFoo<T>::d`. 链接器知道如何确定对`TmplFoo<T>::d`（对于给定的`T`）的所有本地引用都指向同一个对象。

# javascript - 如果 googlemap lat long 值为空，则 Javascript 隐藏 div

> ID：12092549
> 
> 赞同：1
> 
> 时间：2012-08-23T13:21:13.490
> 
> 标签：javascript

嗨希望有人可以帮助我解决这个问题

我有一张来自 Json 文件的动态数据的地图 来自 json 的数据字段是 [[LAT]] [[LONG]]

我想要做的是，如果 json 文件没有发送任何值，则 mapcontainer div 必须关闭。到目前为止我所拥有的不起作用。

这里的javascript：

```
<script type="text/javascript">
        function initialize() {
            var latlng = new google.maps.LatLng(50.892374,5.992003);
            var myOptions = {
                zoom: 15,
                streetViewControl: true,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            if (latlng !== "50.892374" , "5.992003000000068"){
            alert(latlng)
            var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
            }
            else{
            alert("hide mapcontainer div")
            document.getElementById("mapcontainer").style.visibility = 'none';
            }
        }
        </script> 
```

问题是，无论我做什么，latlng 永远不会等于我在示例中给出的值。

这是我要关闭的 div：

```
 <div class="mapcontainer" id="mapcontainer">
  <div class="themap">
  <div id="map_canvas" style="width:100; height:200px;"></div>
  </div>
  </div> 
```

在我的实际工作中，latlng 看起来像这样： var latlng = new google.maps.LatLng([[LAT]],[[LONG]]);

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:43:50.997

这个测试永远不会起作用： if (latlng !== "50.892374" , "5.992003000000068"){

您正在将 google.maps.LatLng 对象与一对字符串进行比较；我希望你得到一个 javascript 错误。

[google.maps.LatLng](https://developers.google.com/maps/documentation/javascript/reference#LatLng)有一个 equals 方法，允许您将其与另一个 google.maps.LatLng 进行比较，但我建议使用[几何库](https://developers.google.com/maps/documentation/javascript/geometry#Distance)进行距离比较（浮点数几乎从不相等）（检查是否2 LatLng 对象“接近”到足够相同）

# jboss - 检测到错误情况时排除 jboss 进程

> ID：12092551
> 
> 赞同：0
> 
> 时间：2012-08-23T13:21:18.467
> 
> 标签：jboss

是否可以从 JBOSS 抛出异常以终止进程？我不想做像 system.exit 这样粗糙的事情，但是我们的代码作为插件在更大的基础设施中运行，我想在启动时检查一些状态，如果数据丢失则退出系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:23:09.840

[`ModelControllerClient`](https://docs.jboss.org/author/display/AS71/The+native+management+API#ThenativemanagementAPI-Workingwitha%7B%7BModelControllerClient%7D%7D)使用连接到服务器并执行`:shutdown`命令可能是消息。

就像是：

```
final ModelControllerClient client = createClient();
try {
    final ModelNode op = new ModelNode();
    op.get(ClientConstants.OP).set(":shutdown");
    op.get(ClientConstants.OP_ADDR).setEmptyList();
    final ModelNode result = client.execute(op);
    if (result.get(ClientConstants.OUTCOME).asString().equals(ClientConstants.SUCCESS)) {
        // Do some there
} finally {
    try {
        client.close();
    } catch (Exception ignore) {
    } 
} 
```

如果您只是关闭，您可能会忽略结果。

# php - 在 Ubuntu 11.10 (Hiphop) 上构建 hiphop 的问题

> ID：12092553
> 
> 赞同：0
> 
> 时间：2012-08-23T13:21:23.033
> 
> 标签：php, hiphop

当我来到 hiphop-php 目录并运行 cmake 。我收到以下错误：

> -- 找不到 LIBINOTIFY（缺少：LIBINOTIFY_LIBRARY LIBINOTIFY_INCLUDE_DIR）
> 
> CMake/FindLibunwind.cmake:19 处的 CMake 错误（消息）：
> 
> 发现 libunwind.h 没有匹配 unwind.h
> 
> 调用堆栈（最近的调用优先）：
> 
> CMake/HPHPFindLibs.cmake:38 (find_package)
> 
> CMake/HPHPSetup.cmake:46（包括）
> 
> src/CMakeLists.txt:18（包括）

我不知道如何安装 LIBINOTIFY

我在 linux mint 12 上运行，它基于 ubuntu 11.10

感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:37:23.610

你需要安装 libunwind：

[https://github.com/facebook/hiphop-php/issues/563](https://github.com/facebook/hiphop-php/issues/563)

令人讨厌的是，这不在 Ubuntu 设置说明中。但是，您可能会遇到一些问题`make`，因此也请遵循以下步骤：

[http://comments.gmane.org/gmane.comp.lib.unwind.devel/1133](http://comments.gmane.org/gmane.comp.lib.unwind.devel/1133)

# c# - RSA加密，密钥存储

> ID：12092554
> 
> 赞同：1
> 
> 时间：2012-08-23T13:21:28.963
> 
> 标签：c#, .net, security, cryptography, rsa

我正在编写一个使用第三方 api 的 .NET 应用程序。存储 api 凭据的最佳方式是什么？我正在考虑使用 RSACryptoServiceProvider 对它们进行加密，但我的问题是：如果我使用 RSA 加密我的凭据，我将不得不在应用程序中的某处拥有私钥来解密凭据，这是否意味着加密是基本无关？因为任何人都可以继续使用加密的凭据并使用我必须提供的密钥来解密凭据。

处理私钥并避免使用我的应用程序的任何人的最佳方法是什么？

如果我将密钥存储为班级某处的字符串，是否可以读取密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:27:56.017

是的，如果您将密钥存储为一个简单的字符串，则可以读取它。但是您可以使用 SecureString 类并最大限度地减少易失性访问。

此外，永远不要将 SecureString 的内容放入字符串中：如果这样做，则字符串在堆中未加密，并且在垃圾回收后重用内存之前不会将其字符清零。

通过 C# 来自 CLR 的示例：

```
public static class Program
{
    public static void Main()
    {
        using (SecureString ss = new SecureString())
        {
            Console.Write("Please enter password: ");
            while (true)
            {
                ConsoleKeyInfo cki = Console.ReadKey(true);
                if (cki.Key == ConsoleKey.Enter) break;
                // Append password characters into the SecureString
                ss.AppendChar(cki.KeyChar);
                Console.Write("*");
            }
            Console.WriteLine();
            // Password entered, display it for demonstration purposes
            DisplaySecureString(ss);
        }
        // After 'using', the SecureString is Disposed; no sensitive data in memory
    }
    // This method is unsafe because it accesses unmanaged memory
    private unsafe static void DisplaySecureString(SecureString ss)
    {
        Char* pc = null;
        try
        {
            // Decrypt the SecureString into an unmanaged memory buffer
            pc = (Char*)Marshal.SecureStringToCoTaskMemUnicode(ss);
            // Access the unmanaged memory buffer that
            // contains the decrypted SecureString
            for (Int32 index = 0; pc[index] != 0; index++)
                Console.Write(pc[index]);
        }
        finally
        {
            // Make sure we zero and free the unmanaged memory buffer that contains
            // the decrypted SecureString characters
            if (pc != null)
                Marshal.ZeroFreeCoTaskMemUnicode((IntPtr)pc);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:42:20.280

对于已经有权访问您的计算机以及您的 Windows 用户名和密码的坚定攻击者，您将无法隐藏它。

话虽如此，[ProtectedData 类可能是使](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata%28v=vs.100%29.aspx)*没有*适当凭据的用户无法访问数据的最简单方法。

# wpf - 如何将 CommandParameter 添加到文本块

> ID：12092557
> 
> 赞同：1
> 
> 时间：2012-08-23T13:21:31.817
> 
> 标签：wpf, dependency-properties

我正在尝试通过下面介绍的类向 wpf 控件添加一些功能。

```
namespace ATCheckerView
{
    public class AttachedMouseBinding
    {
        public static ICommand GetCommand(DependencyObject obj)
        {
            return (ICommand)obj.GetValue(CommandProperty);
        }

        public static void SetCommand(DependencyObject obj, Object value)
        {
            obj.SetValue(CommandProperty, value);
        }

        public static Object GetCommandParameter(DependencyObject obj)
        {
            return (ICommand)obj.GetValue(CommandParameterProperty);
        }

        public static void SetCommandParameter(DependencyObject obj, Object value)
        {
            obj.SetValue(CommandParameterProperty, value);
        }

        public static readonly DependencyProperty CommandProperty =
            DependencyProperty.RegisterAttached("Command", typeof(ICommand), typeof(AttachedMouseBinding),
            new FrameworkPropertyMetadata(CommandChanged));

        public static readonly DependencyProperty CommandParameterProperty =
            DependencyProperty.RegisterAttached("CommandParameter", typeof(object), typeof(AttachedMouseBinding),
            new FrameworkPropertyMetadata(CommandParameterChanged));

        private static void CommandChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            var fe = d as FrameworkElement;
            var command = e.NewValue as ICommand;
            if (command == null) return;
            var inputBinding = new InputBinding(command, new MouseGesture(MouseAction.LeftDoubleClick));
            fe.InputBindings.Add(inputBinding);
        }

        private static void CommandParameterChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            //var fe = d as FrameworkElement;
            // var parameter = e.NewValue as Object;
        }
    }
} 
```

我这样使用它：

```
<TextBlock Grid.Column="0" HorizontalAlignment="Stretch" 
           Tag="{Binding ElementName=Root, Path=DataContext}"
           Text="{Binding Path=path, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
           ContextMenu="{StaticResource SchemeContextMenu}"
           local:AttachedMouseBinding.Command="{Binding ElementName=Root, Path=DataContext.vclient.OpenInViewer}"
           local:AttachedMouseBinding.CommandParameter="{Binding}">
</TextBlock> 
```

我的问题是：现在将 CommandParameter 发送到命令

UPD：Igor 的变体与我的更改：

```
private static void OnMouseLeftClick(object sender, RoutedEventArgs e)
        {
            var me = e as MouseButtonEventArgs;
            if (me != null && me.ClickCount != 2) return; ``FrameworkElement control = sender as FrameworkElement;
        ICommand command = (ICommand)control.GetValue(CommandProperty);
        object commandParameter = control.GetValue(CommandParameterProperty);
        if (command.CanExecute(commandParameter))
            command.Execute(commandParameter);
    }``  * * *

## 回答 #1

> 赞同：2
> 
>             
> 
> 时间：2012-08-23T15:07:00.367

您是否在鼠标左键单击时尝试触发命令？

尝试这个：

```
public static class AttachedMouseBinding
{

    public static DependencyProperty CommandProperty = DependencyProperty.RegisterAttached("Command", typeof(ICommand), typeof(AttachedMouseBinding), new UIPropertyMetadata(CommandChanged));

    public static DependencyProperty CommandParameterProperty = DependencyProperty.RegisterAttached("CommandParameter", typeof(object), typeof(AttachedMouseBinding), new UIPropertyMetadata(null));

    public static void SetCommand(DependencyObject target, ICommand value)
    {
        target.SetValue(CommandProperty, value);
    }

    public static void SetCommandParameter(DependencyObject target, object value)
    {
        target.SetValue(CommandParameterProperty, value);
    }
    public static object GetCommandParameter(DependencyObject target)
    {
        return target.GetValue(CommandParameterProperty);
    }

    private static void CommandChanged(DependencyObject target, DependencyPropertyChangedEventArgs e)
    {
        FrameworkElement control = target as FrameworkElement;
        if (control != null)
        {
            if ((e.NewValue != null) && (e.OldValue == null))
            {
                control.PreviewMouseLeftButtonDown += OnMouseLeftClick;
            }
            else if ((e.NewValue == null) && (e.OldValue != null))
            {
                control.PreviewMouseLeftButtonDown -= OnMouseLeftClick;
            }
        }
    }

    private static void OnMouseLeftClick(object sender, RoutedEventArgs e)
    {
        FrameworkElement control = sender as FrameworkElement;
        ICommand command = (ICommand)control.GetValue(CommandProperty);
        object commandParameter = control.GetValue(CommandParameterProperty);
        if (command.CanExecute(commandParameter))
            command.Execute(commandParameter);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
>             
> 
> 时间：2012-08-23T15:22:30.670

修改xml

```
<TextBlock Grid.Column="0" HorizontalAlignment="Stretch" 
           Tag="{Binding ElementName=Root, Path=DataContext}"
           Text="{Binding Path=path, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
           ContextMenu="{StaticResource SchemeContextMenu}">
    <TextBlock.InputBindings>
          <MouseBinding MouseAction="LeftDoubleClick"
                        Command="{Binding ElementName=Root, Path=DataContext.vclient.OpenInViewer}"
                        CommandParameter="{Binding}"/>
    </TextBlock.InputBindings>
</TextBlock> 
``` 
```

# excel - 复制公式时更新绝对引用

> ID：12092566
> 
> 赞同：0
> 
> 时间：2012-08-23T13:22:01.657
> 
> 标签：excel, excel-formula

我有一个包含很多公式的巨大表格，其中一些以绝对方式引用单元格（即`$C$3`，而不是`C3`）。

我现在如何在同一张表中复制这个表，同时更新绝对引用的值，但保持它们仍然是绝对的（即`$C$3`应该成为`$I$3`）？

在删除任何现有公式的同时重写每个公式`$`将是一项令人讨厌的工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T15:24:48.733

查找/替换命令的威力：

突出显示您需要编辑的范围（重复表）将限制命令的权限

查找`$C$` 替换`$I$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T10:05:28.030

复制大面积填充了 folumas、相对和绝对引用时，最简单的解决方案确实是 CUT 和 PASTE。

不过，您不需要将其保存在单独的文件中，只需复制公式所在的工作表，然后从那里剪切并粘贴即可。

如果您需要大量复制公式，这是一个非常烦人的解决方法......但我怀疑是否有更好的方法......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:48:33.583

我找到了一种解决方案，但必须/应该有更方便的方法。

1.  复制/粘贴整个 XLS 文件以创建新的临时文件`my file - Copy.xls`
2.  打开复制的文件，剪切要复制的表格
3.  将其粘贴到您想要的原始文件中
4.  删除临时文件

仍然以不那么烦人的方式接受任何其他技巧或提示...

# php - 如何为 PHP Web 应用程序制作在线帮助？

> ID：12092572
> 
> 赞同：1
> 
> 时间：2012-08-23T13:22:18.383
> 
> 标签：php

我有一个 PHP/JS Web 应用程序，我的老板希望我在其中添加一个在线帮助。想法是，点击一些“按钮”后，它会显示一些新的帮助窗口。应该有一些索引和搜索...就像Windows帮助之类的东西...是否有任何免费软件可以让我这样做？我完全没有这方面的经验，所以我不知道要下载什么，什么是最好的以及如何实现它。任何提示表示赞赏;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:39:43.063

您可以使用 HelpNDoc！

HelpNDoc 以多种格式输出，包括 CHM（这正是 Windows 提供帮助的原因）。

格式：

HTML Microsoft Word PDF ePub CHM

免费版可用，但会为 HelpNDoc 添加页脚广告。

[http://www.helpndoc.com](http://www.helpndoc.com)

编辑：并且内置了索引和搜索

# c# - Html Agility Pack - 删除元素，但不删除 innerHtml

> ID：12092575
> 
> 赞同：4
> 
> 时间：2012-08-23T13:22:25.917
> 
> 标签：c#, html, html-agility-pack

我可以通过 note.Remove() 轻松删除元素，如下所示：

```
HtmlDocument html = new HtmlDocument();

html.Load(Server.MapPath(@"~\Site\themes\default\index.cshtml"));

foreach (var item in html.DocumentNode.SelectNodes("//removeMe"))
{
    item.Remove();
} 
```

但这也删除了 innerHtml 。如果我只想删除标签并保留 innerHtml 怎么办？

例子：

```
<ul>
    <removeMe>
        <li>
            <a href="#">Keep me</a>
        </li>
    </removeMe>
</ul> 
```

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-23T13:58:54.297

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var node = doc.DocumentNode.SelectSingleNode("//removeme");
node.ParentNode.RemoveChild(node, true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T13:55:01.787

这应该有效：

```
foreach (var item in doc.DocumentNode.SelectNodes("//removeMe"))
{
    if (item.PreviousSibling == null)
    {
        //First element -> so add it at beginning of the parent's innerhtml
        item.ParentNode.InnerHtml = item.InnerHtml + item.ParentNode.InnerHtml;
    }
    else
    {
        //There is an element before itemToRemove -> add the innerhtml after the previous item
        foreach(HtmlNode node in item.ChildNodes){
            item.PreviousSibling.ParentNode.InsertAfter(node, item.PreviousSibling);
        }
    }
    item.Remove();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-18T16:53:57.160

bool KeepGrandChildren 实现存在问题，对于那些可能包含他们试图删除的元素的文本的人。如果 removeme 标记中包含文本，则该文本也将被删除。例如`<removeme>text<p>more text</p></removeme>`会变成`<p>more text</p>`

试试这个：

```
private static void RemoveElementKeepText(HtmlNode node)
    {
        //node.ParentNode.RemoveChild(node, true);
        HtmlNode parent = node.ParentNode;
        HtmlNode prev = node.PreviousSibling;
        HtmlNode next = node.NextSibling;

        foreach (HtmlNode child in node.ChildNodes)
        {
            if (prev != null)
                parent.InsertAfter(child, prev);
            else if (next != null)
                parent.InsertBefore(child, next);
            else
                parent.AppendChild(child);

        }
        node.Remove();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T19:42:08.793

有一个简单的方法：

```
 element.InnerHtml = element.InnerHtml.Replace("<br>", "{1}"); 
 var innerTextWithBR = element.InnerText.Replace("{1}", "<br>"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-04T20:00:05.060

添加我的两分钱，因为这些方法都没有处理我想要的（删除一组给定的标签，如`p`and`div`并在保留内部标签的同时正确处理嵌套）。

以下是我想出的并通过了我所有的单元测试以及我认为我需要处理的大多数情况：

```
var htmlDoc = new HtmlDocument();

// load html
htmlDoc.LoadHtml(html);

var tags = (from tag in htmlDoc.DocumentNode.Descendants()
           where tagNames.Contains(tag.Name)
           select tag).Reverse();

// find formatting tags
foreach (var item in tags)
{
    if (item.PreviousSibling == null)
    {
        // Prepend children to parent node in reverse order
        foreach (HtmlNode node in item.ChildNodes.Reverse())
        {
            item.ParentNode.PrependChild(node);
        }                        
    }
    else
    {
        // Insert children after previous sibling
        foreach (HtmlNode node in item.ChildNodes)
        {
            item.ParentNode.InsertAfter(node, item.PreviousSibling);
        }
    }

    // remove from tree
    item.Remove();
}

// return transformed doc
html = htmlDoc.DocumentNode.WriteContentTo().Trim(); 
```

以下是我用来测试的案例：

```
[TestMethod]
public void StripTags_CanStripSingleTag()
{
    var input = "<p>tag</p>";
    var expected = "tag";
    var actual = HtmlUtilities.StripTags(input, "p");

    Assert.AreEqual(expected, actual);
}

[TestMethod]
public void StripTags_CanStripNestedTag()
{
    var input = "<p>tag <p>inner</p></p>";
    var expected = "tag inner";
    var actual = HtmlUtilities.StripTags(input, "p");

    Assert.AreEqual(expected, actual);
}

[TestMethod]
public void StripTags_CanStripTwoTopLevelTags()
{
    var input = "<p>tag</p> <div>block</div>";
    var expected = "tag block";
    var actual = HtmlUtilities.StripTags(input, "p", "div");

    Assert.AreEqual(expected, actual);
}

[TestMethod]
public void StripTags_CanStripMultipleNestedTags_2LevelsDeep()
{
    var input = "<p>tag <div>inner</div></p>";
    var expected = "tag inner";
    var actual = HtmlUtilities.StripTags(input, "p", "div");

    Assert.AreEqual(expected, actual);
}

[TestMethod]
public void StripTags_CanStripMultipleNestedTags_3LevelsDeep()
{
    var input = "<p>tag <div>inner <p>superinner</p></div></p>";
    var expected = "tag inner superinner";
    var actual = HtmlUtilities.StripTags(input, "p", "div");

    Assert.AreEqual(expected, actual);
}

[TestMethod]
public void StripTags_CanStripTwoTopLevelMultipleNestedTags_3LevelsDeep()
{
    var input = "<p>tag <div>inner <p>superinner</p></div></p> <div><p>inner</p> toplevel</div>";
    var expected = "tag inner superinner inner toplevel";
    var actual = HtmlUtilities.StripTags(input, "p", "div");

    Assert.AreEqual(expected, actual);
}

[TestMethod]
public void StripTags_IgnoresTagsThatArentSpecified()
{
    var input = "<p>tag <div>inner <a>superinner</a></div></p>";
    var expected = "tag inner <a>superinner</a>";
    var actual = HtmlUtilities.StripTags(input, "p", "div");

    Assert.AreEqual(expected, actual);

    input = "<wrapper><p>tag <div>inner</div></p></wrapper>";
    expected = "<wrapper>tag inner</wrapper>";
    actual = HtmlUtilities.StripTags(input, "p", "div");

    Assert.AreEqual(expected, actual);
}

[TestMethod]
public void StripTags_CanStripSelfClosingAndUnclosedTagsLikeBr()
{
    var input = "<p>tag</p><br><br/>";
    var expected = "tag";
    var actual = HtmlUtilities.StripTags(input, "p", "br");

    Assert.AreEqual(expected, actual);
} 
```

它可能无法处理所有事情，但它可以满足我的需要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T13:59:55.973

也许这可能是您正在寻找的？

```
foreach (HtmlNode node in html.DocumentNode.SelectNodes("//removeme"))
{
    HtmlNodeCollection children = node.ChildNodes; //get <removeme>'s children
    HtmlNode parent = node.ParentNode; //get <removeme>'s parent
    node.Remove(); //remove <removeme>
    parent.AppendChildren(children); //append the children to the parent
} 
```

*编辑：LB的答案更清晰。和他一起去！*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-13T10:43:41.667

这个怎么样？

```
var removedNodes = document.SelectNodes("//removeme");
if(removedNodes != null)
    foreach(var rn in removedNodes){
        HtmlTextNode innernodes =document.CreateTextNode(rn.InnerHtml);
        rn.ParnetNode.ReplaceChild(innernodes, rn);
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-03T17:57:05.693

通常正确的表达式是`node.ParentNode.RemoveChildren(node, true)`.

由于`HtmlNode.RemoveChildren()`（[http://htmlagilitypack.codeplex.com/discussions/79587](http://htmlagilitypack.codeplex.com/discussions/79587)）中的一个排序错误，我创建了一个类似的方法。对不起，它在VB中。如果有人要翻译，我会写一个。

```
'The HTML Agility Pack (1.4.9) includes the HtmlNode.RemoveChild() method but it has an ordering bug with preserving child nodes.  
'The below implementation orders children correctly.
Private Shared Sub RemoveNode(node As HtmlAgilityPack.HtmlNode, keepChildren As Boolean)
    Dim parent = node.ParentNode
    If keepChildren Then
        For i = node.ChildNodes.Count - 1 To 0 Step -1
            parent.InsertAfter(node.ChildNodes(i), node)
        Next
    End If
    node.Remove()
End Sub 
```

我已经使用以下测试标记测试了此代码：

```
<removeme>
    outertextbegin
    <p>innertext1</p>
    <p>innertext2</p>
    outertextend
</removeme> 
```

输出是：

```
outertextbegin
<p>innertext1</p>
<p>innertext2</p>
outertextend 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-10T08:29:07.237

这是 C# 中的版本 - 2014 年 12 月 3 日 17:57 的帖子的答案 - 伪编码器

该网站不允许我评论和添加到原始帖子。也许它会帮助某人。

```
private void removeNode(HtmlAgilityPack.HtmlNode node, bool keepChildren)
{
    var parent = node.ParentNode;
    if (keepChildren)
    {
        for ( int i = node.ChildNodes.Count - 1; i >= 0; i--)
        {
            parent.InsertAfter(node.ChildNodes[i], node);
        }            
    }
    node.Remove(); 
} 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2012-08-23T13:32:38.180

您可以使用正则表达式还是需要使用 htmlagilitypack？

```
string html = "<ul><removeMe><li><a href="#">Keep me</a></li></removeMe></ul>";

html = Regex.Replace(html, "<removeMe.*?>", "", RegexOptions.Compiled);
html = Regex.Replace(html, "</removeMe>", "", RegexOptions.Compiled); 
```

# maven - 基于 tycho 的构建的依赖关系报告

> ID：12092576
> 
> 赞同：2
> 
> 时间：2012-08-23T13:22:33.333
> 
> 标签：maven, dependency-management, tycho

可以很容易地创建 Maven 依赖报告，就像[这个问题](https://stackoverflow.com/questions/2493507/maven-report-on-licenses-your-project-depends-on)中描述的那样。

但是，如果我尝试将那里给出的解决方案应用于基于 Tycho 的构建，我会在构建过程中得到一个空报告甚至 NullPointerExceptions。有没有办法为基于 Tycho 的构建创建（传递）依赖关系报告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T14:04:56.563

[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html)`dependency:tree`的目标应该适用于 Tycho 项目。IIRC，您需要至少与默认生命周期阶段一起调用插件，例如 as 。`package``mvn clean package dependency:tree`

然后你会得到这样的东西：

```
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ org.example.bundle ---
[INFO] org.example.group:org.example.bundle:eclipse-plugin:1.0.0-SNAPSHOT
[INFO] +- org.example.group:org.example.otherbundle:eclipse-plugin:1.0.0-SNAPSHOT:provided
[INFO] +- p2.eclipse-plugin:org.eclipse.osgi:jar:3.8.0.v20120430-1750:system
[INFO] +- p2.eclipse-plugin:org.eclipse.equinox.common:jar:3.6.100.v20120209-1951:system 
```

范围可以识别来自 p2 存储库的工件`system`；范围内来自反应器的工件`provided`。请注意，依赖项列表包括所有传递依赖项，但这些显示为平面列表。

# ios - 序列化我的自定义 nsobject 以通过 http 发送

> ID：12092578
> 
> 赞同：0
> 
> 时间：2012-08-23T13:22:40.927
> 
> 标签：ios, ios5

我的应用程序需要通过 HTTP 将自定义对象序列化到远程数据库。将对象转换为可以通过 http 发送的格式的最佳方法是什么？我的应用程序使用 Core Data 在内部存储数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:29:51.543

使用实体的属性值创建一个 NSDictionary 对象，其中键是属性名称，值是字典的对象。使用 NSJSONSerialization 序列化字典并创建一个 NSData。将此数据用作您发送的请求的 httpbody。

文档：http: [//developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html)

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableURLRequest_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableURLRequest_Class/Reference/Reference.html)

# oop - OOP 是否所有属性都有 getter 和 setter

> ID：12092583
> 
> 赞同：3
> 
> 时间：2012-08-23T13:22:55.557
> 
> 标签：oop, design-patterns

我一直为大多数类属性提供 getter 和 setter。

虽然我读过这很糟糕 - [http://www.codeweavers.net/getters-and-setters-are-evil/](http://www.codeweavers.net/getters-and-setters-are-evil/)

依赖注入和单元测试不要求大多数属性都有一个设置器吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T13:34:16.543

应始终使用 getter 和 setter。getter 或 setter的**原因不是为内部属性提供公共接口，而是提供对属性的读/写的控制**。它们提供对类属性的抽象。

即使您的类属性是私有的，您也需要 getter 和 setter。这允许在分配或读取之前控制值。

想想你很久以前设计的一个类，你为每次阅读做一些共同的计算。

```
class A{
    private decimal x;
    public void do_stuff(){
        decimal a = this.x/70;
        // process with a
    }
    public void do_anoter_stuff(){
        decimal a = this.x/70;
        // process again a
    }
} 
```

现在您要更改因子 (70)。你怎么做呢？到处换？最好这样设计。

```
class A{
    private decimal x;
    private get_x(){ return this.x/70; }
    public void do_stuff(){
        // process with get_x()
    }
    public void do_anoter_stuff(){
        // process again get_x()
    }
} 
```

事实是盲目地为每个属性使用 getter 和 setter 是邪恶的。经验法则是。使用私有 getter 和 setter 将所有属性声明为私有。稍后更改 getter 和 setter 的可见性，仅在需要时允许从外部世界访问

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:37:05.320

那篇文章的意思是，您不应该通过公共 getter 和 setter 公开您的私人数据。为所有成员设置 getter 和 setter 并没有隐含的错误（有些人会争辩说这是一个好主意，尽管实际上很少有人真正为每个私有变量而烦恼……我还没有遇到真正这样做的人反正）

**一个**坏主意是为每个变量设置**公共getter 和 setter。**这几乎保证了一个封装不良的类。

在 c++ 中，可以通过友谊绕过私有访问以提供白盒测试，我认为您可以使用其他语言中的其他机制来做同样的事情，但我不确定（我只在 c++ 中进行了商业开发，而且我不会测试我用 Java 和 C# 编写的有趣的应用程序）。可能反射将允许您正在寻找的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T00:02:29.643

那篇文章的意思是，OO 意味着封装数据和提供行为。通过提供属性，您不会封装数据。例如，您可以实现这样的`Account`类：

```
public class Account
{
  public decimal Balance { get;set; }
} 
```

但是，从概念上讲，这与：

```
public class Account 
{
  public decimal Balance;
} 
```

在任何一种情况下，该类都没有行为。所有操作的行为都`Account`需要在`Account`. 文章说的是行为和国家应该共存。所以，你可能有这样的东西：

```
public class Account 
{
  private decimal balance;
  //...
  public void DepositFunds(Money money)
  {
    balance += ValidateAndConvert(money);
  }
  public void WithdrawFunds(Money money)
  {
    balance -= ValidateAndConvert(money);
  }
  public void AdjustBalance(Money money)
  {
    balance -= ValidateAndConvert(money);
  }
  private decimal ValidateAndConvert(Money money)
  {
    // TODO: validate, convert
  }
} 
```

对于将余额作为属性或字段的帐户，外部逻辑可以根据需要对其进行修改。这通常将业务逻辑分散在代码库中。如果需要从帐户中提取资金的逻辑来检查余额并验证帐户不能透支，或者只能透支一定数量，那么代码中的许多地方都必须提供该逻辑。如果需要更改该逻辑，则必须找到并更改许多地方（风险是一个被遗漏并且发生不一致的撤回）。当数据被封装在对象中并且只提供行为时，就无法将该逻辑分散在代码库中。这也允许更明确的代码。可能`account.Balance -= someValue;`是撤回、调整等。现在可以明确了：`account.Widthdraw(someValue);`或 account.AdjustBalance(someOtherValue);`--这是明确的帐户发生了什么。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-23T13:32:18.540

除非您需要，否则我不会添加 getter/setter，否则很难知道其他类的数据/方法取决于您何时需要进行更改。此外，过度使用 getter/setter 可能是面向对象设计不佳的症状，这完全是关于数据封装的。

Getter 当然可以帮助基于状态的单元测试，尽管您可能会考虑限制范围，以便只有测试类可以访问它们。或者更好的是，通过创建一个`equals`方法在类本身中进行相等性检查。

依赖注入可以帮助您避免 getter，因为您可以通过注入模拟对象来[进行基于交互的测试。](http://www.martinfowler.com/articles/mocksArentStubs.html)

# swing - Swing 应用程序监听 Grails 应用程序中的变化

> ID：12092589
> 
> 赞同：1
> 
> 时间：2012-08-23T13:23:06.513
> 
> 标签：swing, grails, messaging

我想知道如何让一个简单的 Swing 应用程序知道 Grails 应用程序的变化。因此，如果 Grails 更新了一个域对象，Swing 就会意识到它并更新它的显示。两个应用程序都由同一个数据库支持。

我在想 Grails JMS（或 Apache Camel）插件可以公开发生的变化，但是 Swing 应用程序如何发现它们呢？我希望 Grails 方面的实现是直截了当的，但我对 Swing 方面完全迷失了。

如果这听起来很模糊，那是因为这种类型的整合对我来说是一个完全未知的领域。如此之多，以至于我还没有代码可以发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T22:39:30.800

好吧，如果是同一个数据库，您可以创建一个表，该表将在某些更改时包含记录以及一些更新该表的方法（在您的 grails 应用程序中触发或更新）。您的 Swing 应用程序只会检查（您可以使用[计时器](http://www.java2s.com/Code/Java/Development-Class/UsejavautilTimertoscheduleatasktoexecuteonce5secondshavepassed.htm)或[Quartz](http://quartz-scheduler.org/)作业）表并在找到某些内容时刷新视图。

就像是：

```
grails_changes (i'm not concerned about better names here :) )
--------------------------
id
domain
id_record_domain
timestamp_changed
timestamp_updated_swing 
```

并且使您的桌面应用程序更加灵活，例如`domain`，`id_recrod_domain`您可以拥有一个仅针对一个特定域刷新的特定视图。

这`timestamp_update_swing`是要知道视图是否已经更新以及何时更新。

所以流程将是：

*   在 grails 应用中记录更改（创建、修改、删除）；
*   在 grails_changes 中注册更改；
*   Swing app查询表，寻找没有timestamp_updated_swing的新记录；
*   Swing 应用程序刷新视图；

# html - 一个带有两个按钮的表单

> ID：12092596
> 
> 赞同：2
> 
> 时间：2012-08-23T13:23:26.967
> 
> 标签：html, forms, http

我有一个带有两个按钮的表单，我还有一个参数，它根据按下的按钮取 2 个不同的值。如果我写这样的东西

```
<form>
     <input type="hidden" name="method" value="saveXml"/>
     <input type="submit" name="save" value="SAVE"/>

     <input type="hidden" name="method" value="cancelled"/>
     <input type="submit" name="back" value="BACK"/> 
</form> 
```

参数“method”总是以值“saveXml”传递给服务器。

而且由于任务的其他条件，我不能将这些按钮放在 2 种单独的形式中。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:29:49.527

1.  将按钮更改为超链接。
2.  使超链接调用不同的 javascript 函数。
3.  特定的 JS 函数将使用您指定的值提交表单。

除此之外 - 您只能放置一个“隐藏”输入并使用 Javascript 动态更改其值，具体取决于单击了哪个按钮。您还必须在 javascript 中检测到这一点。在这种情况下，提交也是用 JS 完成的，而不是通过按钮单击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:32:13.380

在您的表单发布值中，如果用户单击`save`按钮，它将具有一个字段，`save`其值为`SAVE`。

如果用户单击该`back`按钮，它将有一个值`BACK`。

您不需要隐藏字段来执行此操作。

单击提交按钮时，浏览器只会将用户单击的输入值发布到服务器。（如果点击`save`，则`back`不会发布，反之亦然）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-23T13:46:18.103

@Matthew 给出了正确的建议。这是示例 php 代码（将其视为 PSEUDOCODE，只是为了理解逻辑）：

[编辑以反映逻辑，而不是带有 javascript history.back(-1) 的 PHP 示例]

```
if( $_POST['save'] ) :
    // your saveXml case
    ...
else if ($_POST['back']) :
    // your back case
    ... 
```

只有当您按下“保存”按钮时才会处理保存（将保存 XML），并且只有当您按下“返回”按钮时才会处理返回。没有javascript，没有隐藏字段。

# html - 导航中的 HTML 冗余

> ID：12092597
> 
> 赞同：1
> 
> 时间：2012-08-23T13:23:28.557
> 
> 标签：html, navigation, redundancy

来自 C++ 的人告诉我，代码重复是做错事的巨大危险信号。现在，当我用 HTML 制作导航菜单时，我必须将它复制到我想要的每个页面中，这违反了我所知道的关于干净代码的一切。这只是 HTML 的方式，还是在单独的 HTML 文件中定义导航菜单并使用 iframe 将其显示到页面中会更简洁？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:25:43.580

我同意你的观点。将导航栏放在单个 html 文件中并单独加载会更干净。但是，我建议您使用一些服务器端脚本（如 PHP）将所有 html 放在一起，而不是将其加载到 iframe 中。

您可以制作一个非常简单的 PHP 脚本，它将多个文件中的 html 连接起来，然后将其输出到浏览器。如果这在你的情况下是可能的，那就是我会做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:27:09.630

如果您只是在处理静态 html 页面，请在可能的情况下使用服务器端包含：

[http://en.wikipedia.org/wiki/Server_Side_Includes](http://en.wikipedia.org/wiki/Server_Side_Includes)

简而言之，在一个单独的文件中定义您的代码，然后每个模板只是引用该文件，无论您告诉它到哪里。

在页面中“包含”模板样式文件有一百零一种不同的方式，这取决于我猜你的主机的设置类型。

# android - 如何在不同的包中定义活动

> ID：12092599
> 
> 赞同：1
> 
> 时间：2012-08-23T13:23:42.067
> 
> 标签：android

我已将我的应用程序分成几个`packages`. 我的一些扩展类`Activity`位于下`com.tmt.app`，另一个`Activity`位于包中`Dialogs`。这两个包都位于`src`文件夹下，我注意到在我的清单文件中我指定了包名称，如下所示：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.tmt.app"
android:versionCode="1"
android:versionName="1.0" > 
```

这表明此清单与包`com.tmt.app`相关。相关类定义如下：

```
<activity
        android:name=".PasswordDialog"
        android:theme="@style/AboutTheme"
        android:screenOrientation="portrait" >
    </activity> 
```

这表明该类`PasswordDialog`在包中`com.tmt.app`

如何指定此类位于包下`Dialogs`？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:26:00.430

当您 `android:name=".PasswordDialog"`像这样声明您的活动时，它会将其视为当前包活动，其中 package 在 manifest 的根目录中声明。

当您必须在另一个包中声明您的活动时，您必须在清单中声明您的活动，如下所示。

```
<activity
        android:name="YourAnotherPackageName.PasswordDialog"
        android:theme="@style/AboutTheme"
        android:screenOrientation="portrait" >
    </activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:26:01.833

```
<activity
        android:name=".Dialogs.PasswordDialog"
        android:theme="@style/AboutTheme"
        android:screenOrientation="portrait" >
</activity> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T13:26:20.377

您必须编写包的整个路径。例子 ：

```
<activity
        android:name="com.tmt.Dialogs.PAsswordDialog"
        android:theme="@style/AboutTheme"
        android:screenOrientation="portrait" >
    </activity> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T13:26:50.070

假设您有两个包，例如`com.one`和`com.two`。您的清单如下所示：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.two"
android:versionCode="1"
android:versionName="1.0" >

.......

<activity
        android:name="com.one.a"
        android:theme="@style/AboutTheme"
        android:screenOrientation="portrait" >
    </activity>

<activity
        android:name=".b"
        android:theme="@style/AboutTheme"
        android:screenOrientation="portrait" >
    </activity> 
```

您将需要使用完全限定名称来引用包外部的活动。

或者

如果第二个包是 com.one 和 com.one.two 之类的子包，您将使用：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.one"
android:versionCode="1"
android:versionName="1.0" >

.......

<activity
        android:name=".two.a"
        android:theme="@style/AboutTheme"
        android:screenOrientation="portrait" >
    </activity>

<activity
        android:name=".b"
        android:theme="@style/AboutTheme"
        android:screenOrientation="portrait" >
    </activity> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T13:27:36.893

转到应用程序节点中的清单选择应用程序选项卡选择添加活动，然后您将获得可用活动的列表，从中选择这是最好的方法和免费的

# c - exit() 是否在 _SUCCESS 和 _FAILURE 上释放分配的内存

> ID：12092606
> 
> 赞同：12
> 
> 时间：2012-08-23T13:23:58.637
> 
> 标签：c, malloc, free, exit

这是一小段代码，`exit(3)`在失败的情况下会调用两次。这些调用是否会释放 malloc 分配的内存？谷歌搜索曾经说过它会，甚至更多次，它不会......

我应该添加 free() 吗？

另外：哪个更好`if (!word)`（它也适用于例如 word == 0 与 word == NULL 不同，所以我猜这是错误的）还是`if (word == NULL)`？

```
char *word = NULL, *temp = NULL;
    word = (char *)malloc(sizeof(char) * size);

    if (!word) {            /* or maybe rather it should be (word == NULL)  */
        perror("malloc fail");
        if (fclose(fp)) {
            perror("fclose fail");
            exit(3);                            /* exit without free ? */
        }
        exit(3);                                /* exit without free ? */
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-23T13:30:10.873

是的，所有的内存都被退回了。顺便说一句，无论如何，您想在退出后如何处理剩余内存？
还是您担心内存泄漏`exit()`？如果内存没有被回收，它会随着每个退出进程泄漏更多，这是任何可靠的操作系统都无法承受的。所以，除了一个有问题的操作系统，别再担心内存了，`exit()`在你需要的地方使用它。

要回答代码注释中的问题，是否要免费，我会说`free`与每个`malloc`. 如果这看起来很难，则表明您的代码存在结构性问题。在退出之前释放所有内存的好处是，您可以使用强大的工具（如 valgrind）来检查其余代码中的内存泄漏，而不会出现您向我们展示的 malloc 的*误报。*

请注意，在malloc**失败**后，尝试释放结果是没有意义的——无论如何它都是一个空指针。

第三，我更喜欢`if (pointer == NULL)`，`if (!pointer)`但这完全是主观的，我可以阅读和理解两者:-)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-23T13:25:06.077

打电话给`exit`你之后，你已经超越了`malloc`朋友，但操作系统收回了一切。将`malloc`其视为操作系统和您的进程之间的便捷中介。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T14:20:53.420

请注意，在这 2 次 exit 调用中，您没有分配任何内存，因此释放该指针将毫无意义（并且可能会崩溃，具体取决于您的 C 运行时系统的年龄）。

所以，不，你不应该释放它，因为它不存在。

我会说，如果发生这样的致命错误，您可能不想费心释放内存。

但是，如果您的程序正常退出，是的，您应该尝试释放您分配的所有内存。有时这可能很棘手。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T13:31:23.257

当您退出程序时，所有分配的内存都由操作系统（堆栈和堆）回收。您的程序不会在 RAM 中留下任何足迹，除非您通过缓冲区溢出等在程序内存之外工作。

# excel - Apache POI：生成 excel 时 cell.setCellFormula 未给出所需值

> ID：12092607
> 
> 赞同：1
> 
> 时间：2012-08-23T13:23:58.870
> 
> 标签：excel, apache-poi

我能够生成 excel 文件，但包含公式的单元格（假设显示列的整数值的总和）最初显示值为 0。然后，当我编辑一些列单元格时，它会更新为**仅**已编辑单元格的值的总和，而不是将未编辑单元格的值相加。

我的一段代码是：

```
Cell cell = row.createCell(size - 2);
cell.setCellValue("Total");
cell = row.createCell(size - 1);
cell.setCellType(HSSFCell.CELL_TYPE_FORMULA);
cell.setCellFormula("SUM(D3:D4)"); 
```

另外，我尝试在上述代码下方添加更多这些代码。

```
FormulaEvaluator evaluator =  wb.getCreationHelper().createFormulaEvaluator();
evaluator.evaluateFormulaCell(cell); 
```

但它仍然给出了相同的结果。谁能告诉我出了什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:53:42.160

我不知道为什么它对你不起作用，试试这个代码，它对我有用。

```
 Workbook wb = new HSSFWorkbook();
    Sheet sheet = wb.createSheet("new sheet");
    Row row = sheet.createRow(3);// Row 4
    Cell cell = row.createCell(3); // Cell 'D'
    cell.setCellValue(10);

    row=sheet.createRow(2);// Row 3
    cell=row.createCell(3);// Cell 'D' 
    cell.setCellValue(2);

    cell=row.createCell(4);// Cell 'E'
    cell.setCellValue("Total");
    cell = row.createCell(5);// Cell 'F'
    cell.setCellType(Cell.CELL_TYPE_FORMULA);
    cell.setCellFormula("SUM(D3:D4)"); 
```

唯一的区别是我使用`Cell.CELL_TYPE_FORMULA`而不是`HSSFCell.CELL_TYPE_FORMULA`，也许这就是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-04T13:23:03.823

使用 wb.setForceFormulaRecalculation(true); 在关闭文件之前

它将计算公式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:10:03.887

也许您稍后会在代码中更改单元格的样式

# android - 将对象列表从一个活动传递到android中的另一个活动

> ID：12092612
> 
> 赞同：39
> 
> 时间：2012-08-23T13:24:07.140
> 
> 标签：android, android-intent

我想从另一个活动传递一个活动的对象列表。我在下面有一堂**SharedBooking**：

```
public class SharedBooking {
  public int account_id;
  public Double betrag;
  public Double betrag_effected;
  public int taxType;
  public int tax;
  public String postingText;
} 
```

调用活动的代码：

```
public List<SharedBooking> SharedBookingList = new ArrayList<SharedBooking>();

public void goDivision(Context context, Double betrag, List<SharedBooking> bookingList) {
  final Intent intent = new Intent(context, Division.class);    
  intent.putExtra(Constants.BETRAG, betrag);        
  intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);  
  context.startActivity(intent);        
} 
```

调用活动的代码：

```
Bundle extras = getIntent().getExtras();
if (extras != null) {
  amount = extras.getDouble(Constants.BETRAG,0);
} 
```

如何从一项活动发送 SharedBooking 列表并在另一项活动中接收？

请建议我任何可用的链接或示例代码。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2015-08-12T17:53:37.270

首先，使列表的类实现**Serializable**。

```
public class MyObject implements Serializable{} 
```

然后你可以将列表转换为（Serializable）。像这样：

```
List<MyObject> list = new ArrayList<>();
myIntent.putExtra("LIST", (Serializable) list); 
```

并检索您执行的列表：

```
Intent i = getIntent();
list = (List<MyObject>) i.getSerializableExtra("LIST"); 
```

就是这样。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-08-23T13:39:12.557

使用[parcelable](http://developer.android.com/reference/android/os/Parcelable.html)。以下是您将如何做到的：

```
public class SharedBooking implements Parcelable{

    public int account_id;
    public Double betrag;
    public Double betrag_effected;
    public int taxType;
    public int tax;
    public String postingText;

    public SharedBooking() {
        account_id = 0;
        betrag = 0.0;
        betrag_effected = 0.0;
        taxType = 0;
        tax = 0;
        postingText = "";
    }

    public SharedBooking(Parcel in) {
        account_id = in.readInt();
        betrag = in.readDouble();
        betrag_effected = in.readDouble();
        taxType = in.readInt();
        tax = in.readInt();
        postingText = in.readString();
    }

    public int getAccount_id() {
        return account_id;
    }
    public void setAccount_id(int account_id) {
        this.account_id = account_id;
    }
    public Double getBetrag() {
        return betrag;
    }
    public void setBetrag(Double betrag) {
        this.betrag = betrag;
    }
    public Double getBetrag_effected() {
        return betrag_effected;
    }
    public void setBetrag_effected(Double betrag_effected) {
        this.betrag_effected = betrag_effected;
    }
    public int getTaxType() {
        return taxType;
    }
    public void setTaxType(int taxType) {
        this.taxType = taxType;
    }
    public int getTax() {
        return tax;
    }
    public void setTax(int tax) {
        this.tax = tax;
    }
    public String getPostingText() {
        return postingText;
    }
    public void setPostingText(String postingText) {
        this.postingText = postingText;
    }
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeInt(account_id);
        dest.writeDouble(betrag);
        dest.writeDouble(betrag_effected);
        dest.writeInt(taxType);
        dest.writeInt(tax);
        dest.writeString(postingText);

    }

    public static final Parcelable.Creator<SharedBooking> CREATOR = new Parcelable.Creator<SharedBooking>()
    {
        public SharedBooking createFromParcel(Parcel in)
        {
            return new SharedBooking(in);
        }
        public SharedBooking[] newArray(int size)
        {
            return new SharedBooking[size];
        }
    };

} 
```

**传递数据：**

```
Intent intent = new Intent(getApplicationContext(),YourActivity.class);
Bundle bundle = new Bundle();
bundle.putParcelable("data", sharedBookingObject);
intent.putExtras(bundle);
startActivity(intent); 
```

**检索数据：**

```
Bundle bundle = getIntent().getExtras();
sharedBookingObject = bundle.getParcelable("data"); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-01-27T15:20:44.687

### 可打包对象类

```
 public class Student implements Parcelable {

        int id;
        String name;

        public Student(int id, String name) {
            this.id = id;
            this.name = name;

        }

        public int getId() {
            return id;
        }

        public String getName() {
            return name;
        }

        @Override
        public int describeContents() {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public void writeToParcel(Parcel dest, int arg1) {
            // TODO Auto-generated method stub
            dest.writeInt(id);
            dest.writeString(name);
        }

        public Student(Parcel in) {
            id = in.readInt();
            name = in.readString();
        }

        public static final Parcelable.Creator<Student> CREATOR = new Parcelable.Creator<Student>() {
            public Student createFromParcel(Parcel in) {
                return new Student(in);
            }

            public Student[] newArray(int size) {
                return new Student[size];
            }
        };
    } 
```

### 和名单

```
ArrayList<Student> arraylist = new ArrayList<Student>(); 
```

### 调用活动的代码

```
Intent intent = new Intent(this, SecondActivity.class);
Bundle bundle = new Bundle();
bundle.putParcelableArrayList("mylist", arraylist);
intent.putExtras(bundle);       
this.startActivity(intent); 
```

### 调用活动的代码

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_second);   

    Bundle bundle = getIntent().getExtras();
    ArrayList<Student> arraylist = bundle.getParcelableArrayList("mylist");
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-23T13:33:09.857

您可能希望在**SharedBooking类中实现****Parcelable**接口并将它们添加到 Intent 中，即使用**putParcelableArrayListExtra**方法。检查[文档](http://developer.android.com/reference/android/content/Intent.html#putParcelableArrayListExtra%28java.lang.String,%20java.util.ArrayList%3C?%20extends%20android.os.Parcelable%3E%29)。

 ***** * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-14T08:00:22.010

您还可以使用 将列表转换为字符串`Gson`，然后像这样传递它：

```
String yourListAsString = new Gson().toJson(yourList);
bundle.putString("data",yourListAsString); 
```

然后使用您的类作为类型检索它：

```
List<YourList> listName = new Gson().fromJson("data", new TypeToken<List<YourList>>(){}.getType()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-09T16:48:56.337

有两种方法可以将对象数组列表或对象从一个活动发送到另一个活动：

1.  [可包裹](https://guides.codepath.com/android/using-parcelable)
2.  [可序列化](https://medium.com/@kkunalandroid/serializable-in-android-with-example-38eb8b7334ea)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-02T14:14:28.597

如果有人正在寻找答案，这就是我使用 Kotlin 实现它的方式。

**可打包对象类**

```
data class CollectedMilk(
    @SerializedName("id")
    var id: Int,
    @SerializedName("igicuba")
    var igicuba: Int,
    @SerializedName("collector")
    var collector: String?,
    @SerializedName("collected")
    var collected: Int,
    @SerializedName("accepted")
    var accepted: Int,
    @SerializedName("standard")
    var standard: String?,
    @SerializedName("created_at")
    var created_at: String?,
    @SerializedName("updated_at")
    var updated_at: String?,
): Parcelable {

    constructor(parcel: Parcel) : this(
        parcel.readInt(),
        parcel.readInt(),
        parcel.readString(),
        parcel.readInt(),
        parcel.readInt(),
        parcel.readString(),
        parcel.readString(),
        parcel.readString()
    )

    override fun describeContents(): Int {
        return 0
    }

    override fun writeToParcel(parcel: Parcel?, int: Int) {
        parcel?.writeInt(id)
        parcel?.writeInt(igicuba)
        parcel?.writeString(collector)
        parcel?.writeInt(collected)
        parcel?.writeInt(accepted)
        parcel?.writeString(standard)
        parcel?.writeString(created_at)
        parcel?.writeString(updated_at)
    }

    companion object CREATOR : Parcelable.Creator<CollectedMilk> {
        override fun createFromParcel(parcel: Parcel): CollectedMilk {
            return CollectedMilk(parcel)
        }

        override fun newArray(size: Int): Array<CollectedMilk?> {
            return arrayOfNulls(size)
        }
    }
} 
```

**然后在片段中**

```
collectedMilkAdapter.onItemClick = { collectedMilk ->
            Toast.makeText(
                MccApp.applicationContext(),
                "Collector: " + collectedMilk.collector,
                Toast.LENGTH_LONG
            ).show()

            val intent = Intent(MccApp.applicationContext(), CollectedMilkActivity::class.java)
            val bundle: Bundle = Bundle()

            bundle.putParcelableArrayList("collectedMilk", collectedMilkArrayList)
            intent.putExtras(bundle)

            activity?.startActivity(intent)
        } 
```

**然后在另一个活动上我的详细活动**

**全局变量**

```
private lateinit var collectedMilk: ArrayList<CollectedMilk> 
```

**在函数或 OnCreate 活动中**

```
val bundle = intent.extras
        collectedMilk = (bundle?.getParcelableArrayList<CollectedMilk>("collectedMilk") as ArrayList<CollectedMilk>)

        Toast(this).showCustomToast(
            this,
            ""+collectedMilk,
            dark
        ) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-15T15:31:47.847

另一种选择是使用 Gson。

将此扩展名复制到您的代码中：

```
// will write a list of objects to intent
fun Intent.putExtra(name: String, objs: List<*>) = putExtra(name, Gson().toJson(objs))

// will read a list of objects from intent
inline fun <reified T> Intent.getObjListExtra(name: String): List<T>? {
    val lstStr = getStringExtra(name) ?: return null
    val lst = Gson().fromJson<List<T>>(lstStr, object: ParameterizedType {
        override fun getActualTypeArguments(): Array<Type> = arrayOf(T::class.java)
        override fun getRawType(): Type = List::class.java
        override fun getOwnerType(): Type = T::class.java
    })
    return lst
} 
```

并使用它们：

**活动一：**

```
startActivity(Intent(this, Activity2::class.java).also {
   val people = listOf(Person("Moishe"), Person("Albert"), Person("Lezly"))
   it.putExtra("people", people)
 }) 
```

**活动二：**

```
val people = intent.getObjExtra<Person>("Person") 
```

该解决方案旨在使用 Gson 作为解析器

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-29T08:07:44.503

**科特林**

首先，使列表的类实现**Serializable**。

```
class MyObject: Serializable{} 
```

然后你可以将列表转换为（Serializable）。像这样：

```
val list: List<MyObject> = mutableListOf<MyObject>();
myIntent.putExtra("LIST", list as Serializable); 
```

并检索您执行的列表：

```
val mlist = intent.getSerializableExtra("LIST") as? List<ModuleDataRow> 
```

就是这样。****

# android - 让我的应用程序只运行应用程序

> ID：12092613
> 
> 赞同：-2
> 
> 时间：2012-08-23T13:24:08.130
> 
> 标签：android

我正在制作一个 android 应用程序，我希望它是唯一运行的应用程序。当我的应用程序运行时，没有其他应用程序可以运行。如何才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T13:26:27.760

为什么这么贪心？您永远不是唯一运行的应用程序。这完全违背了Android的整个设计。您可以让它成为一个更好的“公民”，而不是让您的应用程序成为唯一运行的应用程序。有很多关于应用程序优化的 Google IO 视频。

# asp.net-mvc-3 - MVC .NET - 将用户模型传递给剃刀视图

> ID：12092616
> 
> 赞同：1
> 
> 时间：2012-08-23T13:24:18.870
> 
> 标签：asp.net-mvc-3, unit-testing, razor

我正在尝试对剃刀视图进行单元测试。特别是，我正在尝试编写一个管理员按钮 - 如果登录的用户是管理员，则该按钮出现在主工具栏上。

目前我们没有任何测试，它的工作方式是设置一个名为 CurrentUser 的静态对象。

剃刀：

```
@if CurrentUser.IsAdmin()
{
     <button>admin</button>
} 
```

但是，由于我们正在调用 CurrentUser - 在项目的其他地方设置的静态对象，我不确定我们是否不能独立地对该剃刀视图进行单元测试。我认为我们必须创建一个用户对象，让用户实例登录，并将其注入剃刀视图。

例如。

```
Controller
{ 
    ActionResult Index(){
        var currentUser = //somehow get current user
        return View(currentUser);
} 
```

但是，如果我正在测试的剃刀视图是 _Layout 页面怎么办？每当我呈现页面时，我是否必须注入当前用户？

有没有办法可以将当前用户注入 View 的父级？也许我必须重写 View 方法？有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:25:53.913

您是否考虑过使用 DI（依赖注入）容器（如 ninject）？然后你可以像这样将 CurrentUser 添加到 Controllers 构造函数中：

```
class Controller 
{  
    private _currentUser;
    public Controller(IUser currentUser) {
        _currentUser = currentUser
    }

    ActionResult Index(){ 
        return View(_currentUser); 
    }
} 
```

并将静态类分配给 DI（在 ninject 的情况下）：

```
ninjectKernel.Bind<IUser>().To<CurrentUser>(); 
```

在单元测试中，您可以使用测试用户简单地实例化控制器：

```
[TestMethod]         
public void Index()         
{         
    // Arrange         
    CurrentUser currentUser = new CurrentUser() { Role = "Admin" };        
    HomeController controller = new HomeController(currentUser);                 

    // Act         
    ViewResult result = controller.Index() as ViewResult;
    Assert.IsTrue(((CurrentUser)result.ViewData.Model).IsAdmin());
} 
```

但是你不能直接测试 HTML 输出。您只能检查您的模型是否设置/行为正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:51:56.957

首先尝试在 Account Controller 上调用 LogOn Action 以进行登录：

```
 [TestMethod]
        public void Index()
        {
            // Arrange
            AccountController account = new AccountController();
            HomeController controller = new HomeController();

            var accRes = account.LogOn(new Models.LogOnModel() { UserName = "mylogin", Password = "abc123" }, string.Empty);

            // Act
            ViewResult result = controller.Index() as ViewResult;
        } 
```

# javascript - 检测移动浏览器名称和版本

> ID：12092622
> 
> 赞同：2
> 
> 时间：2012-08-23T13:24:37.337
> 
> 标签：javascript, mobile-browser

我正在尝试找到一个 javascript 代码来检测移动浏览器名称和版本，但到目前为止还没有运气。

任何帮助都会很大...

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:26:42.453

检查这个：[浏览器检测](http://www.quirksmode.org/js/detect.html)

使用导航器对象。这会帮助你

```
<div id="example"></div>

<script>

txt = "<p>Browser CodeName: " + navigator.appCodeName + "</p>";
txt+= "<p>Browser Name: " + navigator.appName + "</p>";
txt+= "<p>Browser Version: " + navigator.appVersion + "</p>";
txt+= "<p>Cookies Enabled: " + navigator.cookieEnabled + "</p>";
txt+= "<p>Platform: " + navigator.platform + "</p>";
txt+= "<p>User-agent header: " + navigator.userAgent + "</p>";

document.getElementById("example").innerHTML=txt;

</script> 
```

# objective-c - 从 tableView 在 webView 中打开网页

> ID：12092627
> 
> 赞同：0
> 
> 时间：2012-08-23T13:24:54.797
> 
> 标签：objective-c, ios, xcode, uitableview, uiwebview

好的，所以我已经搜索了谷歌和这个网站的代码片段，但它们似乎都不起作用。表格视图导航到一个新视图，其中包含一个 web 视图。标题说

```
@interface WebViewController : UIViewController <UIWebViewDelegate> {
UIWebView *_webView;
}
@property (nonatomic, retain) IBOutlet UIWebView *webView; 
```

然后我们有 viewDidLoad

```
- (void)viewDidLoad
{
    [super viewDidLoad];
//    [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.co.uk"]]];
            NSString *urlAddress = @"http://www.google.co.uk";
            NSURL *url = [NSURL URLWithString:urlAddress];
            NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
            [self.webView loadRequest:requestObj]; 
```

如您所见，我尝试了两种可以找到的不同方法。视图正在加载，但未加载网站。在 NIB 上，webView 具有 Outlets - delegate - File's Owner 和 Reference Outlets - webView - File's Owner 还合成了 webView = _webView。

据我所见，一切都是相互联系的，我很困惑为什么它不起作用！哈普？^_^

如果这无法排序，任何人都可以推荐一种更好的方法来从 tableview 导航到 webview 吗？

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:06:33.790

当我实现 UIWebView 时，我通常在头文件中执行以下操作：

```
//.h
//XIB UIWebView has a single outlet to the IBOutlet below

@interface WebViewController : UIViewController <UIWebViewDelegate> {
IBOutlet UIWebView *webView;
}

@property (nonatomic, strong) UIWebView *webView;

//.m
//The only difference, and it's somewhat semantics, is the following

[webView loadRequest:requestObj];
webView.delegate = self; 
```

# php - joomla组件之间如何通信？

> ID：12092628
> 
> 赞同：0
> 
> 时间：2012-08-23T13:25:00.413
> 
> 标签：php, session, joomla, joomla2.5

在我的网站中，注册用户浏览各种组件，我正在考虑使用会话变量来进行组件之间的所有通信，而不是 POST /GET。这是正确的做法吗？

我有几个由我编写的自定义 joomla 2.5 组件。登录欢迎页面、application1 等。现在欢迎页面有这些应用程序的按钮，而不是使用 post/get 我正在考虑使用会话变量。我是网络技术的新手，我想知道这种方法的优缺点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:16:39.890

没有必要像`$_SESSION`使用 Joomla 这样的 CMS 时那样使用超全局变量。相反，使用：

```
JRequest::setVar("varName"); 
```

和

```
JRequest::getVar("varName"); 
```

# javascript - Pdf.js：使用 base64 文件源而不是 url 呈现 pdf 文件

> ID：12092633
> 
> 赞同：78
> 
> 时间：2012-08-23T13:25:12.137
> 
> 标签：javascript, pdf, canvas, base64, pdf.js

我正在尝试使用 pdf.js 从 pdf 呈现页面

通常，使用 url，我可以这样做：

```
PDFJS.getDocument("http://www.server.com/file.pdf").then(function getPdfHelloWorld(pdf) {
  //
  // Fetch the first page
  //
  pdf.getPage(1).then(function getPageHelloWorld(page) {
    var scale = 1.5;
    var viewport = page.getViewport(scale);

    //
    // Prepare canvas using PDF page dimensions
    //
    var canvas = document.getElementById('the-canvas');
    var context = canvas.getContext('2d');
    canvas.height = viewport.height;
    canvas.width = viewport.width;

    //
    // Render PDF page into canvas context
    //
    page.render({canvasContext: context, viewport: viewport});
  });
}); 
```

但在这种情况下，我有 base64 中的文件而不是 url：

```
data:application/pdf;base64,JVBERi0xLjUKJdDUxdgKNSAwIG9iaiA8PAovTGVuZ3RoIDE2NjUgICAgICAKL0ZpbHRlciAvRmxhdGVEZWNvZGUKPj4Kc3RyZWFtCnjarVhLc9s2... 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-08-23T15:18:02.337

来自 [http://mozilla.github.com/pdf.js/build/pdf.js的源代码](http://mozilla.github.com/pdf.js/build/pdf.js)

```
/**
 * This is the main entry point for loading a PDF and interacting with it.
 * NOTE: If a URL is used to fetch the PDF data a standard XMLHttpRequest(XHR)
 * is used, which means it must follow the same origin rules that any XHR does
 * e.g. No cross domain requests without CORS.
 *
 * @param {string|TypedAray|object} source Can be an url to where a PDF is
 * located, a typed array (Uint8Array) already populated with data or
 * and parameter object with the following possible fields:
 *  - url   - The URL of the PDF.
 *  - data  - A typed array with PDF data.
 *  - httpHeaders - Basic authentication headers.
 *  - password - For decrypting password-protected PDFs.
 *
 * @return {Promise} A promise that is resolved with {PDFDocumentProxy} object.
 */ 
```

因此，使用标准 XMLHttpRequest(XHR) 来检索文档。问题在于 XMLHttpRequests 不支持 data: uris（例如 data:application/pdf;base64,JVBERi0xLjUK ...）。

但是有可能将类型化的 Javascript 数组传递给函数。您唯一需要做的就是将 base64 字符串转换为 Uint8Array。您可以使用[https://gist.github.com/1032746上的此功能](https://gist.github.com/1032746)

```
var BASE64_MARKER = ';base64,';

function convertDataURIToBinary(dataURI) {
  var base64Index = dataURI.indexOf(BASE64_MARKER) + BASE64_MARKER.length;
  var base64 = dataURI.substring(base64Index);
  var raw = window.atob(base64);
  var rawLength = raw.length;
  var array = new Uint8Array(new ArrayBuffer(rawLength));

  for(var i = 0; i < rawLength; i++) {
    array[i] = raw.charCodeAt(i);
  }
  return array;
} 
```

**tl;博士**

```
var pdfAsDataUri = "data:application/pdf;base64,JVBERi0xLjUK..."; // shortened
var pdfAsArray = convertDataURIToBinary(pdfAsDataUri);
PDFJS.getDocument(pdfAsArray) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-01T17:24:24.983

[根据示例](https://mozilla.github.io/pdf.js/examples/)，直接支持 base64 编码，尽管我自己没有测试过。获取您的 base64 字符串（从文件派生或使用任何其他方法加载，POST/GET、websockets 等），使用 atob 将其转换为二进制文件，然后将其解析为 PDFJS API 上的 getDocument，如`PDFJS.getDocument({data: base64PdfData});`Codetoffel 答案确实适用于我虽然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-17T17:50:44.533

使用 Accepted Answer 对 IE 进行检查并将 dataURI 转换为 UInt8Array；PDFJS 接受的表格

```
 Ext.isIE ? pdfAsDataUri = me.convertDataURIToBinary(pdfAsDataUri): '';

        convertDataURIToBinary: function(dataURI) {
          var BASE64_MARKER = ';base64,',
            base64Index = dataURI.indexOf(BASE64_MARKER) + BASE64_MARKER.length,
            base64 = dataURI.substring(base64Index),
            raw = window.atob(base64),
            rawLength = raw.length,
            array = new Uint8Array(new ArrayBuffer(rawLength));

          for (var i = 0; i < rawLength; i++) {
            array[i] = raw.charCodeAt(i);
          }
          return array;
        },
```

# php - 如何使用 php 将未知字符转换为 UTF-8？

> ID：12092637
> 
> 赞同：0
> 
> 时间：2012-08-23T13:25:25.747
> 
> 标签：php, curl, encoding, character-encoding, json

我通过 php 中的 curl 向网页发送请求并将其作为响应：

```
���`I�%&/m�{J�J��t��`$ؐ@�������iG#)�*��eVe]f@�흼��{����{����;�N'���?\fdl��J�ɞ!���?~|?"~�G�Y��?z��ݧ�y�.�q֬��ٛ�U��W��Y�-�M��K�z��a, 
```

通常响应应该是这样的：

```
{"value":"/Default.aspx?aType=UyeIlanListe"} 
```

已经尝试过 json_encode、mb_convert_encoding ($return, "UTF-8", "ISO-8859-1") 和 mb_convert_encoding ($return, "ISO-8859-1", "UTF-8") 函数。

我在这里想念什么？

这是响应的原始屏幕截图：

![在此处输入图像描述](../Images/13d942529046e476415be696398b65e9.png)

![响应和帖子标题](../Images/746b4cdeb52c4307d3b58e1c10696c54.png)

![发布数据](../Images/5a8f84d6130c4276a4db0a7324b07fe4.png)

![回复](../Images/25b7e77408692a39e77885a52ed09ee8.png)

![json](../Images/57ad53d7f6652ecd26d86d68ff3d4761.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:25:13.123

另一种解决方案是在 curl 中添加 gzip 编码选项：

```
curl_setopt($login, CURLOPT_ENCODING , "gzip"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T19:20:20.770

原来问题是gzip。

使用gzip解码功能后问题解决：

```
function gzdecode($data) 
{ 
   return gzinflate(substr($data,10,-8)); 
} 
```

ps 根据手册，PHP 6 将提供内置的 gzip 解码功能

[http://php.net/manual/en/function.gzdecode.php](http://php.net/manual/en/function.gzdecode.php)

# php - MySQL、Mongo DB 和 Apache Solr

> ID：12092638
> 
> 赞同：0
> 
> 时间：2012-08-23T13:25:26.713
> 
> 标签：php, mysql, mongodb, solr, document-oriented-db

我们想建立一个具有高流量和数据的高度可扩展的网站（想象一下 youtube 或 facebook）。我们计划在 PHP 和 MySQL 中进行开发。

我们可能需要存储数以百万计的数据，还需要更快地搜索。我们听说我们必须使用面向文档的数据库和索引服务器来优化性能。我们正在考虑将 Mongo DB 和 Apache Solr 作为选项。

有人能解释一下这些技术有何不同吗？我们知道 Apache Solr 用于优化搜索性能，但这是否意味着在 MongoDB 中搜索数据很慢。

我们对这些技术的实现有点困惑。有人可以向我们解释解决方案吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:47:18.110

不是 MongoDB 搜索速度慢，而是它不是搜索索引，不支持[全文搜索](http://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo#FullTextSearchinMongo-TextSearch)、排名等高级功能。

# javascript - how to run / debug javascript in command line

> ID：12092641
> 
> 赞同：5
> 
> 时间：2012-08-23T13:25:28.667
> 
> 标签：javascript, command-line, v8

I'm wondering (actually I know there definitely is such a way to run js in command line, because when I watch google I/0 presentations, they use a command like d8, maybe it's part of V8 engine) is there any way to run/debug my javascripts in command line? such as `d8 myJsfile.js --prof` etc.?

Does anybody have any idea about this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-14T02:16:21.487

是的，D8 是一个命令行工具，可让您运行和调试 Javascript 脚本。它配备了 V8。

## 获得 D8

在您的机器上安装 V8 并不难。请按照以下说明操作： [https ://developers.google.com/v8/build](https://developers.google.com/v8/build)

（GYP 的部分看起来有点乱，但我在 Linux 机器上轻松完成了它。）

安装 V8 后，您现在拥有 d8，它允许您从命令行运行 javascript。

```
$ d8 myscript.js 
```

## 使用 D8

查看`d8 --help`分析选项。这些与您想在 Chrome 上使用分析时可以使用的选项非常相似。

如果你想调试启动 d8 `--debugger`。当脚本遇到代码中的语句或在 d8 shell 中`debugger;`键入时，脚本将中断。`debugger;`（您可以通过以 d8 开头来获得 shell 。）当 shell 提示符从变为`--shell`时，您知道您正在调试。在提示符处获取有关调试器类型的帮助。`d8>``dbg>``help``dbg>`

d8 调试器是一个老式的命令行调试器，如果您习惯于 GUI 调试器，在大型复杂脚本上使用它会很痛苦。

## 使用带有 D8 的 GUI 调试器

如果你想使用 GUI 调试器，你可以使用 Chrome DevTools for Java，它包括一个 Eclipse 调试器：

[https://code.google.com/p/chromedevtools/](https://code.google.com/p/chromedevtools/)

让它工作：

*   安装 Eclipse
*   安装 ChromeDevTools 插件（我从这个视频中得到了帮助：[http](http://www.youtube.com/watch?v=_uzSw_fb7NQ) ://www.youtube.com/watch?v=_uzSw_fb7NQ ）
*   创建一个类型为“Standalone V8 VM”的新调试配置，为连接参数设置 host:localhost 和 port:5858。

要调试在 D8 中运行的代码：

*   使用您的脚本和 --debugger_agent 启动 D8，必要时根据您的配置使用 --debugger_port；D8 的默认端口是 5858。
*   在 Eclipse 中启动您在上面创建的调试配置。脚本将显示在界面中
*   在 Eclipse UI 中设置断点并设置断点。（您的代码中不需要`debugger;`语句。）

笔记！D8 只监听本地主机上的调试器。因此，如果您在单独的机器上，那么这将不起作用。没有标志可以让它在另一个 IP 上侦听。请参阅： [https ://code.google.com/p/v8/issues/detail?id=1855](https://code.google.com/p/v8/issues/detail?id=1855)

## 在 D8 中运行 Javascript 的陷阱

请注意，D8 中的 Javascript 环境与浏览器窗口中的环境不同。您无法使用许多功能：

*   setTimeout 及其表兄弟
*   XMLHttpRequest
*   还有更多。检查 ECMA 规范以了解您实际可以使用的内容。

记住没有`window.*`or `document.*`or DOM！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T13:28:54.060

[Node.JS](http://www.nodejs.org/)非常适合这一点。

您将无法测试浏览器的东西，例如`window.location`和什么不是，但对于运行直接脚本，它是有帮助的。

# javascript - 如何集成requirejs？

> ID：12092643
> 
> 赞同：2
> 
> 时间：2012-08-23T13:25:32.863
> 
> 标签：javascript, jquery, asp.net-mvc

我的 ASP.NET MVC 项目中有一个文件，它依赖于`Jquery`：

```
// namespace pattern
var diem = diem  || {};
diem .defineNamespace = function(ns_string) {
    var parts = ns_string.split('.');
    var parent = diem ;
    var i;

    if(parts[0] === "diem ") {
        parts = parts.slice(1);
    }

    for(i = 0; i < parts.length; i += 1) {    
        if(typeof parent[parts[i]] === "undefined") {
            parent[parts[i]] = {};
            parent = parent[parts[i]];
        }
        return parent;
    }
};

diem.defineNamespace('diem.utils');

// module pattern
diem.utils = (function() {
    // private API
    // ...
    // public API
    return {
        handleFileInputs: function(container) {
            $(container + ' ' + 'input[type="image"]').click(function(e) {
                // prevent from submission
                e.preventDefault();
                // handle add/remove items
                if($(this).hasClass('add')) {
                    $(this).parent().append('<p><input type="file" accept="image/jpeg,image/png,image/gif" name="files" /></p>');
                } else {
                    $(this).parent().find('p:last-child').remove();
                } // if($(this).hasClass('add')) {
            });
        }, // handleFileAttachments: function() {
        handleLabelWidths: function(container) {
            var max = 0;
            $(container + ' ' + 'label.autoWidth').each(function() {
                if($(this).width() > max) {
                    max = $(this).width(); 
                }
            });
            $(container + ' ' + 'label.autoWidth').width(max + 5);
        } // handleLabelWidths: function(container) {
    } // return {
})(); // streamlined.utils = (function() { 
```

还有一个依赖于`Modernizr`库的代码。

如何将我的代码、、、`JQuery`和`Modernizr`一起使用`requirejs`？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:36:47.693

假设您将所有`.js`文件放在“脚本”子目录中

```
<script data-main="scripts/main.js" src="scripts/require-jquery.js"></script> 
```

在`main.js`

```
require(["jquery", "jquery.alpha", "jquery.beta"], function($) {
    //the jquery.alpha.js and jquery.beta.js plugins have been loaded.
    $(function() {
        $('body').alpha().beta();
    });
}); 
```

# ios - 以编程方式在视图之间切换

> ID：12092644
> 
> 赞同：-1
> 
> 时间：2012-08-23T13:25:33.967
> 
> 标签：ios, cocoa-touch

这个问题已经发布了很多次，但是，我找不到我的方式有什么问题。我只想以`UIView`编程方式推送：

```
 UINavigationController *navController = self.navigationController;

    [navController popViewControllerAnimated:YES];

    WebViewDisplayer *webViewDisplayer = [[WebViewDisplayer alloc] init];
    webViewDisplayer.view.backgroundColor=[UIColor redColor];
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration: 0.65];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:navController.view cache:YES];
    [navController pushViewController:webViewDisplayer animated:YES];
    [UIView commitAnimations]; 
```

我有一个`UIViewController`调用`WebViewDisplayer`，我想在代码中移动到它，但似乎我的代码没有响应转换。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:32:57.913

代替

```
[navController pushViewController:webViewDisplayer animated:YES]; 
```

和

```
[navController pushViewController:webViewDisplayer animated:NO]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:33:05.207

这似乎不是 UIViewController 子类的正确初始化方法。如果您使用的是笔尖，它可能无法加载。使用——initWithNibName:bundle:

此外，这些动画调用已被弃用。改用基于 UIView 块的动画。

另一方面，如果您只是尝试推送视图，则应删除这些动画，因为这不是您要在此处完成的操作。

# android - android日历中的事件详细信息保存问题

> ID：12092645
> 
> 赞同：0
> 
> 时间：2012-08-23T13:25:35.437
> 
> 标签：android, events, calendar, save

我面临着长期以来保存在 android 日历中的事件详细信息。我可以将详细信息保存在 android 版本 2.2.3 以下的设备中，但对于更高版本，它不会保存到日历中。这是我的代码：

* * *

```
 Calendar cal = Calendar.getInstance();  
            Uri events = null;
            if(getCalendarUriBase(this)!=null)
            {   
            Uri EVENTS_URI = Uri.parse(getCalendarUriBase(this) + "events");
            ContentResolver cr = getContentResolver();
            // event insert

             long eventdate1=Date.parse(“23/07/2012”);
             long eventdate2=Date.parse((“23/07/2012”);

            ContentValues values = new ContentValues();
            values.put("calendar_id", 1);
            values.put("title","Event 1");
            values.put("allDay", 0);
            values.put("dtstart", eventdate1); // event starts at 11 minutes from now
            values.put("dtend", eventdate2); // ends 60 minutes from now
            values.put("description", "Description 1");
            values.put("eventLocation", "xyz");
            values.put("visibility", 0);
            values.put("hasAlarm", 1);
            try{
            try{    
            events = cr.insert(EVENTS_URI, values);
            }catch (Exception e) {
                // TODO: handle exception
                return false;
            }
            // reminder insert

            Uri REMINDERS_URI = Uri.parse(getCalendarUriBase(this) + "reminders");
            values = new ContentValues();
            values.put( "event_id", Long.parseLong(events.getLastPathSegment()));
            values.put( "method", 1 );
            values.put( "minutes", 10 );
            cr.insert( REMINDERS_URI, values ); 
```

* * *

```
private String getCalendarUriBase(Activity act) {

    String calendarUriBase = null;
    Uri calendars = Uri.parse("content://calendar/calendars");
    Cursor managedCursor = null;
    try {
        managedCursor = act.managedQuery(calendars, null, null, null, null);
    } catch (Exception e) {
    }
    if (managedCursor != null) {
        calendarUriBase = "content://calendar/";
    } else {
        calendars = Uri.parse("content://com.android.calendar/calendars");
        try {
            managedCursor = act.managedQuery(calendars, null, null, null, null);
        } catch (Exception e) {
        }
        if (managedCursor != null) {
            calendarUriBase = "content://com.android.calendar/";
        }
    }
    return calendarUriBase;
} 
```

## ****** *** ** *******

 **我错过了什么。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:43:26.857

我有一个类似的问题。我认为问题出在

```
values.put("visibility", 0); 
```

我认为数据库中没有具有该名称的列。*这与名为透明度*的列相同。我在网上的一些教程中找到了**

# haskell - 如何定义嵌套列表

> ID：12092650
> 
> 赞同：2
> 
> 时间：2012-08-23T13:25:46.590
> 
> 标签：haskell, types

尝试解决[此页面上](http://www.haskell.org/haskellwiki/99_questions/1_to_10)的练习 7我想定义数据类型以写入一些值，例如：

```
(List [Elem 1, List [Elem 2, List [Elem 3, Elem 4], Elem 5]]) 
```

嵌套列表，任意长度，任意深度。

我试过这段代码：

```
data List a = Elem a | List [List a] 
```

但它不编译：

```
Parse error: naked expression at top level 
```

如何做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T13:48:56.930

而不是包含以下内容的文件：

```
data List a = Elem a | List [List a]
(List [Elem 1, List [Elem 2, List [Elem 3, Elem 4], Elem 5]]) 
```

尝试包含以下内容的文件：

```
data List a = Elem a | List [List a]
sampleListValue = List [Elem 1, List [Elem 2, List [Elem 3, Elem 4], Elem 5]] 
```

顺便说一句，[标准库中也提供了](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Tree.html)一种非常相似的类型（我知道您不想使用它，因为它是一种学习练习，但请记住它是可用的）。

# php - 虚拟子域 htaccess

> ID：12092652
> 
> 赞同：0
> 
> 时间：2012-08-23T13:25:51.450
> 
> 标签：php, .htaccess, subdomain, virtual

朋友们，我用的是正确的虚拟域子htaccess文件请帮忙（我已经阅读了htaccess文件的内容，但是我太糊涂了）

输入 => [http://www.example.com/](http://www.example.com/)
加载 => [http://www.example.com/index.php](http://www.example.com/index.php)

输入 => [http://sample.example.com/](http://sample.example.com/)
加载 => [http://www.example.com/directory/sample/index.php](http://www.example.com/directory/sample/index.php)

访问：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www.lidlike.com
RewriteCond %{HTTP_HOST} ^([^.]+).lidlike.com
RewriteRule ^$ /index.php?name=%1 [L] 
```

* * *

我有两个要求，第一个

```
Enter => http://www.example.com/
Load => http://www.example.com/

Enter => http://sample.example.com/
Load => http://www.example.com/directory/sample/ 
```

第二种情况：用php的获取子域名

```
index.php
    <?php
    $SubName=$_GET['name'];
    ?> 
```

我明白了，但我无法理解

```
Options +FollowSymLinks -Multiviews
RewriteEngine on
RewriteBase /
#
# Canonicalize the hostname
RewriteCond www.%{HTTP_HOST} ^(www)\.(example\.com) [OR]
RewriteCond %{HTTP_HOST} ^www\.([^.]+)\.(example\.com) [OR]
RewriteCond %{HTTP_HOST} ^([^.]+)\.www\.(example\.com) [OR]
RewriteCond %{HTTP_HOST} ^([^.]+)\.(example\.com). [OR]
RewriteCond %{HTTP_HOST} ^([^.]+)\.(example\.com):[0-9]+
RewriteRule (.*) http://%1.%2/$1 [R=301,L]
#
# If subdomain is NOT www
RewriteCond %{HTTP_HOST} !^www\.example\.com [NC]
# Extract (required) subdomain to %1
RewriteCond %{HTTP_HOST} ^([^.]+)\.example\.com$
# Rewrite if requested URL resolves to existing file or subdirectory in /subdomains/<subdomain>/ path
RewriteCond %{DOCUMENT_ROOT}/subdomains/%1/$1 -f [OR]
RewriteCond %{DOCUMENT_ROOT}/subdomains/%1/$1 -d
RewriteRule (.*) /subdomains/%1/$1 [L] 
```

[http://www.webmasterworld.com/apache/3638570.htm](http://www.webmasterworld.com/apache/3638570.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:24:12.847

根本不清楚您要做什么。您的 htaccess 文件不会像您的示例所示那样做任何事情。

尝试：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www.lidlike.com
RewriteCond %{HTTP_HOST} ^([^.]+).lidlike.com
RewriteRule ^$ /directory/%1/index.php [L] 
```

# apache-flex - 如何使用拆分视图导航器在主视图和详细视图之间传递数据

> ID：12092653
> 
> 赞同：1
> 
> 时间：2012-08-23T13:25:50.970
> 
> 标签：apache-flex, view, split, navigator

我正在构建一个拆分视图导航器可以非常有效地工作的应用程序。我遇到的唯一问题是在包含要单击的内容列表的主视图和应该显示单击的按钮信息的详细视图之间传递数据。我正在使用 Flex 4.6。信息 例如，我的按钮是“获取信息”、“客户信息”和“接受服务”。在每个按钮中，我需要在单击按钮时显示表单。Lynda.com 没有解释如何在拆分视图导航器中传递数据。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:37:47.617

[SplitViewNavigator 上的](http://help.adobe.com/en_US/flex/mobileapps/WSa367498dc1175407-5e4576591324aa78a9f-8000.html#WS7a1cbd3f8fb59df015a8879a1325e6aa20c-8000)这个Flex 文档可能会有所帮助。

基本上，导航器就像任何其他导航器一样。当您将视图推送到其上时，您可以发送数据。从上面的链接复制代码。此代码将在您的“主”视图中：

```
protected function myList_changeHandler(event:IndexChangeEvent):void {
    // Create a reference to the SplitViewNavigator.
    var splitNavigator:SplitViewNavigator = navigator.parentNavigator as SplitViewNavigator;

    // Create a reference to the ViewNavigator for the Detail frame.
    var detailNavigator:ViewNavigator = splitNavigator.getViewNavigatorAt(1) as ViewNavigator;

    // Change the view of the Detail frame based on the selected List item.
    detailNavigator.pushView(DetailView, myList.selectedItem);
} 
```

这是一篇关于[在视图之间传递数据的](http://cookbooks.adobe.com/post_Passing_data_between_Views-18854.html)文章，可能会提供更多信息。

# sql - SQL 用其组成的值替换子集

> ID：12092659
> 
> 赞同：1
> 
> 时间：2012-08-23T13:26:03.203
> 
> 标签：sql, sql-server-2008

假设我有下表：

```
CREATE TABLE #temp(AnimalId varchar(5), BodyPartId varchar(5), Value decimal)
INSERT INTO #temp
SELECT 'A', 'X', 50 union all
SELECT 'A', 'Y', 75 union all
SELECT 'A', 'B', 100 union all
SELECT 'B', 'K', 60 union all
SELECT 'B', 'J', 53 
```

动物是由具有一定价值的身体部位组成的。他们的身体部位也可以是其他动物。

我需要能够用其他动物身体部位的价值替换其他动物的身体部位。

是否可以在 SQL 中执行此操作？

要使用上面的示例进行计算，我会找出哪些身体部位是动物（B）。然后对于这些动物，我会计算出每个身体部位构成的百分比。

```
K divided by total of B: 60/113 = 0.53
J divided by total of B: 53/113 = 0.47 
```

然后我将这些值乘以 B 在 A 中的总数：

```
Ks percentage times 100: 0.53 * 100 = 53
Js percentage times 100: 0.47 * 100 = 47 
```

所以动物A的最终组成是：

```
X 50
Y 75
K 53
J 47 
```

我正在努力寻找每个身体部位相对于动物的百分比。我假设动物只能由仅由身体部位组成的其他动物组成 - 所以我不需要递归解决方案（尽管很高兴看到）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:53:43.023

我已经制定了一个似乎可行的解决方案，但最好在更复杂的场景中对其进行测试或了解可能涉及哪些类型的场景，例如子子动物或多个动物的子动物亲代动物，或复制的身体部位等。

首先，计算作为动物的一部分的身体部位的百分比和总数，该动物是亲本动物的子动物，并使用新的总数更新回表格。此外，更新父动物以匹配正确的新父动物：

```
-- update body parts of sub-animals to new value and parent animal
-- also set parent animal bodypartid to itself so it can be identified
with animalbodyparts as (
  select * from animals
  where bodypartid in (select animalid from animals)
), totals as (
  select a.animalid, sum(a.value) as subtotal
  from animals a
  group by a.animalid
), newtotals as (
  select ab.animalid as parentanimalid, t.animalid,
    p.bodypartid, p.value / t.subtotal as percentage,
    ab.value as newtotal, cast(p.value / t.subtotal * ab.value as integer) as newvalue
  from animalbodyparts ab
  join totals t on ab.bodypartid = t.animalid
  join animals p on t.animalid = p.animalid
)
update a
set
  a.animalid = 
    case
      when t.parentanimalid is null then a.animalid
      else t.parentanimalid
    end,
  a.bodypartid =
    case
      when t.animalid = a.bodypartid then t.parentanimalid
      else a.bodypartid
    end,
  a.value =
    case
      when t.newvalue is null then a.value
      else t.newvalue
    end
from animals a
left join newtotals t on a.bodypartid = t.bodypartid
  or t.animalid = a.bodypartid; 
```

此外，当 bodypartid 是对作为身体部位的子动物的引用时，我将 bodypartid 更新为与父动物相同。这是因为一旦我更新了子部分的动物 ID，就没有其他方法可以引用曾经引用过动物的身体部位。我将它更新为相同的值，这样我就可以知道需要删除哪些，因为它们现在具有匹配的 bodypartid 和 animalid 值：

```
--cleanup by removing the body parts that were sub-animals
delete from animals where animalid = bodypartid 
```

演示：[http ://www.sqlfiddle.com/#!3/6a5a0/39](http://www.sqlfiddle.com/#!3/6a5a0/39)

注意：我得到了 for 的最终结果，`46`因为`J`我在总计算之后四舍五入，而您在计算新值之前先四舍五入百分比。如有必要，这应该很容易改变。请注意，无论使用哪种方法，都不能保证新值将与原来的旧总数相加（即 47 + 53 = 100）。有 - 罕见的 - 病理情况（可能涉及子动物的 3 个或更多身体部位），即使您先四舍五入，最终的总数也会与原始情况略有不同。

# eclipse - Eclipse 强制处理程序重新评估

> ID：12092661
> 
> 赞同：2
> 
> 时间：2012-08-23T13:26:05.053
> 
> 标签：eclipse, eclipse-plugin, swt, eclipse-rcp, jface

如何强制 Eclipse 重新评估所有处理程序的 activeWhen 条件？

情况：我在 TreeViewer 上定义了一个命令。该命令有多个可能的处理程序。处理程序已经定义了一些条件来决定处理程序是否应该被激活。

我的问题是，在我取消选择树中的项目（例如选择另一个项目）并再次选择它之前，没有重新评估处理程序条件。

如果选择没有改变但引发条件改变（例如由于元素的更新），错误的处理程序将被执行。

有没有办法手动强制对选择进行处理程序重新评估？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:11:42.097

如果您的条件使用属性测试器检查您的 treeviewer 选择中的状态，那么您需要通知 IEvaluationService 相关属性已更改。看`org.eclipse.ui.services.IEvaluationService.requestEvaluation(String)`

# extjs - 如何在不多次重新加载的情况下重用 EXT JS 4 MVC 应用程序中的存储？

> ID：12092670
> 
> 赞同：5
> 
> 时间：2012-08-23T13:26:34.673
> 
> 标签：extjs, extjs4, extjs-mvc, reusability, extjs-stores

我正在开发 extjs 4 MVC 应用程序。

应用程序运行包含选项卡面板的视口。每个选项卡都有自己的控制器和多个视图。

[在http://wap7.ru/folio/ext-reuseable-store/TE.html](http://wap7.ru/folio/ext-reuseable-store/TE.html)查看我的沙箱

我有一个商店多次使用（例如，顶部菜单组合框中的一个选项卡，另一个在客户端网格中。）使用自动加载配置的商店：true。代理在模型中配置。

我的问题： Store 被多次加载 - 在控制器 [stores] 数组中的每一次提及。

如果我从数组 [stores] 控制器中删除一个 - 组合框将为空，尽管它声明 store: Ext.getStore ('STORE-ID')

请给我一个提示，或者一个重用商店（不是模型）的例子，如这里[http://docs.sencha.com/ext-js/4-0/#!/guide/mvc_pt2](http://docs.sencha.com/ext-js/4-0/#!/guide/mvc_pt2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:32:59.990

您可以实例化您的商店并加载它，删除自动加载。

```
var store = Ext.create('App.store.YourStore').load(); 
```

然后将该存储传递给您的所有组件，就像您希望将分页栏连接到网格时所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T16:00:15.783

这通常可以很好地从其他控制器调用您的商店：

```
Ext.getStore('PlatformClient'); 
```

我从未尝试将同一个商店放在多个控制器`stores`阵列中。这对我来说似乎很奇怪。

不过，您发布的代码还有其他一些奇怪之处，也许它们只是拼写错误，也许它们对框架没有任何影响，但它们与我通常所做的不同，所以我会指出它们：

首先，“典型控制器”中的模型数组包含一个商店：

```
models:[
'te.store.PlatformClient'

], 
```

那一个可能只是一个错字。

其次，我没有将完整的命名空间放在我的存储数组中，这可能没有什么不同，但我不知道。也许 ExtJS 在您写出的名称空间之上添加了名称空间，因此它认为您在初始化新控制器时正在实例化不同的存储 - 从而导致它重新加载。例如，无论它值多少钱，这都更“正常”：

```
stores:[
    'Taxonomy',
    'PlatformClient',
    'DataType'
],
controllers:[
    'Taxonomies' ,
    'DataType' ,
    'DataSale' ,
    'Clients' 
], 
```

尝试像这样设置它并摆脱其他控制器存储阵列中的重复存储。

另外，我想确保您在文档中了解到不需要`storeId`为 MVC 商店定义配置。该框架将自动为商店提供以下信息：

```
storeId: [StoreClassName] 
```

所以在你的例子中，你会自动得到这个：

```
storeId: 'PlatformClient' 
```

最近有人在[使用 MVC 商店时遇到了麻烦，](https://stackoverflow.com/q/12058210/1062992)这可以追溯到框架被开发人员大胆地`storeId`使用 MVC 模式提供他们自己的配置而大吃一惊。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-03T13:11:42.540

我们曾经在加载时遇到过类似的问题。在多次使用同一商店的情况下也会出现过滤问题（您可能希望在其中一个上设置过滤器，而不是在另一个上）。因此，我们在应用程序启动时加载所有商店。然后，每当我们需要该存储用于显示目的时，我们将使用 ha 实用函数将其克隆到内存中，而不是使用原始存储，如下所示。

```
/**
* Use this for example if you want to apply a filter on a store
* but you dont want the original store to change, so:
* singleton store has no filter
* you clone it to be used with filters in some places.
*
* Note: this will have memory proxy, so no changes to the stores are persistent,
* changes will have no effect on the local/remote db.
*
*/
createStore: function(storeId, data) {

    //
    // Creates a new store from the given array of records without
    // registering the new store.
    // See cloneStore for more info
    //
    var modelName = storeId;
    var prevStore = Ext.getStore(storeId);
    data = data || prevStore.data.all;

    var clonedStore = Ext.create('App.store.' + storeId, {
        data: data,
        model: 'App.model.' + modelName,
        proxy: 'memory'
    });

    Ext.data.StoreManager.register( prevStore );

    return clonedStore;

} 
```

请注意，克隆的副本正在使用内存代理。因此不应对其进行写操作。如果您需要更新商店，请始终使用原始商店。

我希望这在某种程度上有所帮助。

# django - 当他进入注册页面时，Django 自动注销用户

> ID：12092675
> 
> 赞同：2
> 
> 时间：2012-08-23T13:26:56.383
> 
> 标签：django, django-urls, django-authentication, django-registration, django-login

提前致谢。

我在我的一个 Django 网站中遇到了一个问题。在这里，经过身份验证的用户可以访问注册页面。但是客户提出了它作为一个问题。所以我试图纠正这个问题并最终得到以下解决方案。

这是一个很好的解决方案吗？或者我怎样才能让它变得更好？

流程应该是这样的，当登录用户尝试访问注册页面时，他应该自动从站点注销，然后重定向到注册页面。

我的代码是

```
def user_signup(request, template_name='profiles/profile_register_form.html'):
if request.user.is_authenticated():
    return custom_logout(request, next_page = "/accounts/register/")

def custom_logout(request, next_page='/'):
try:
    language = request.session['django_language']
except:
    language = False
response = logout(request, next_page=next_page)
if language:
    request.session['django_language'] = language
return response 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:19:33.583

你的方法是正确的。它将保存当前的语言会话并执行您需要的确切过程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:40:09.913

如果我理解你的问题

为什么`custom_logout`

你可以直接调用 django logout 像

```
if request.user.is_authenticated():
    logout(request)
    return HttpResponseRedirect('/login/')  # whatever you register page 
```

# types - 没有类型规范的函数的警告？

> ID：12092682
> 
> 赞同：12
> 
> 时间：2012-08-23T13:27:25.073
> 
> 标签：types, erlang, compiler-warnings

我希望我所有的导出函数都具有 type `-spec`s，以确保至少有接口的基本文档。我可以让编译器或 Dialyzer 为没有类型规范的函数发出警告吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T13:27:25.073

有一个未记录的编译器（不是 Dialyzer）选项`warn_missing_spec`可以执行此操作。在命令行上，传递`+warn_missing_spec`给`erlc`：

```
erlc -o ebin +warn_missing_spec foo.erl 
```

如果您使用钢筋，请添加`warn_missing_spec`到`erl_opts`：

```
{erl_opts, [warn_missing_spec]}. 
```

# jquery - 如果未选中复选框，则显示 DIV

> ID：12092690
> 
> 赞同：0
> 
> 时间：2012-08-23T13:27:38.197
> 
> 标签：jquery

如果未选中复选框，我试图显示一个 div，如果选中则隐藏。我有这个，但我似乎遗漏了一些东西：

[http://jsfiddle.net/XyUWV/8/](http://jsfiddle.net/XyUWV/8/)

HTML：

```
<input name="billing_check" id="billing_check" type="checkbox" class="billing_check" size="40"  checked="checked"/>

<div class="registration_box01 showme">
          <div class="title">
            <h4>billing information - infomration associated with your credit card<br />
            </h4>
          </div>
</div> 
```

Javascript：

```
$("input[name='billing_check']").change(function() {
  (".showme").toggle($("input[name='mycheckboxes']:checked").length>0);
}); 
```

风格：

```
.showme{
    display:none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:32:34.707

我认为您可能正在检查错误的复选框，应该`mycheckboxes`是`billing_check`. 此外，`.length`您可以检查，而不是`.is(':checked')`，如下所示：

```
$('#billing_check').change(function() {     
    $('.showme').toggle(!$(this).is(':checked'));
}); 
```

## [jsFiddle 演示](http://jsfiddle.net/GeekyEggo/XyUWV/13/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:32:37.017

就像 Felix Kling 说的，你需要在 jquery 函数之前设置 $ 。但主要的错误是错误的输入名称`mycheckboxes`name 它`billing_check`会起作用。

**HTML**

```
<input name="billing_check" id="billing_check" type="checkbox" class="billing_check" size="40"  checked="checked"/>

<div class="registration_box01 showme">
  <div class="title">
    <h4>billing information - infomration associated with your credit card<br />
    </h4>
  </div>
</div> 
```

​</p>

**CSS**

```
.showme{
    display:none;
} 
```

​</p>

**JS**

```
$('#billing_check').change(function() {     
    $('.registration_box01').toggle(!$(this).is(':checked'));
}); 
```

​</p>

**[演示](http://jsfiddle.net/ARTsinn/XyUWV/19/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:32:26.043

我会通过 id 引用该复选框，并使用 .is(":checked")

[http://jsfiddle.net/XyUWV/12/](http://jsfiddle.net/XyUWV/12/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T13:33:27.203

你可以这样做，虽然没有经过测试

```
$("#billing_check").click(function()
{
    if(this.checked)
    {
        $(".registration_box01").hide();
    }else
    { 
        $(".registration_box01").show();
   }
}); 
```

# php - odbc_connect sql 服务器

> ID：12092699
> 
> 赞同：2
> 
> 时间：2012-08-23T13:27:55.507
> 
> 标签：php, sql, windows, iis

我正在尝试在 Windows 2000 Server IIS 上安装 PHP5 Web 服务器。

它可以正常运行 php 文件，但是对我的 SQL 数据库的查询给出了错误而没有任何类型的消息。

这是我的连接： `$conn=odbc_connect("Driver={SQL Server Native Client 10.0};Server=$server;Database=$database;", $user, $password);`

在 phpinfo 中启用了 obdc。

我的 WapServer 上的这个连接运行良好，没有错误。

该数据库位于两台机器的本地服务器上。

我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T15:00:41.683

经过一番尝试和错误，我得到了答案，而不是***SQL Server Native Client 10.0*** is just ***SQL Server***。

这是正确的连接代码：

```
$conn=odbc_connect("Driver={SQL Server};Server=$server;Database=$database;", $user, $password); 
```

# vb.net - 在 VB.net 的赋值左侧使用 LINQ 查询

> ID：12092702
> 
> 赞同：2
> 
> 时间：2012-08-23T13:28:12.473
> 
> 标签：vb.net, linq, syntax-error

我有这个简单的 LINQ 查询：

```
Dim sourceSect = (From sect In allSections
                  Where sect.ORDER = sourceNode.Index
                  Select sect).Single()

sourceSect.ORDER = targetNode.Index 
```

但是，如果我在线编写它：

```
(From sect in allSections Where sect.ORDER = sourceNode.index Select sect).Single().ORDER = targetNode.Index 
```

我从 Visual Studio 收到语法错误。

有什么合理的理由吗？:)

![在此处输入图像描述](../Images/53352d3499391196e73f1634de8fd3d2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:52:36.647

作为已接受答案的旁注。可以使用方法语法：

```
allSections.Single(Function(s) s.ORDER = sourceNode.Index).Order = targetNode.Index 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T13:41:01.760

你不能只写

```
(From sect in allSections Where sect.ORDER = sourceNode.index Select sect).Single().ORDER = targetNode.Index 
```

在 VB.Net 中。使用查询语法时，必须先将结果分配给变量，然后才能设置属性

```
Dim sect = (From sect in allSections Where sect.ORDER = sourceNode.index Select sect).Single()
sect.ORDER = targetNode.Index 
```

因此，您必须使用您的代码，或使用方法语法（正如 Tim Schmelter 指出的那样）：

```
allSections.Single(Function(sect) sect.ORDER = sourceNode.Index).Order = targetNode.Index 
```

# gwt - GWT画面自动刷新

> ID：12092705
> 
> 赞同：0
> 
> 时间：2012-08-23T13:28:16.340
> 
> 标签：gwt

我在项目中的 GWT 工作。我的项目中有一个要求，我需要每 5 分钟自动刷新一次屏幕。

有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:35:54.927

```
public class TimerExample implements EntryPoint, ClickListener {

  public void onModuleLoad() {
    Button b = new Button("Click and wait 5 minutes");
    b.addClickListener(this);

    RootPanel.get().add(b);
  }

  public void onClick(Widget sender) {
    Timer t = new Timer() {
      public void run() {
        reloadAll();
      }
    };

    // Schedule the timer to run once in 5 minutes.
    t.schedule(5*1000*60);
  }

  private void reloadAll() {
    Window.Location.reload();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T19:57:44.783

如果您使用 GWT 的[Activies 和 Places](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)框架，您可以使用带有 'goTo(samePlace)' 方法的活动映射器来轻松处理您的用例。它是 MVP 设计/模式的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T21:07:02.403

每 300 秒（5 分钟）刷新一次：

```
<meta http-equiv="refresh" content="300"> 
```

将此元标记放在 gwt html 托管页面的 head 元素下。

如果您使用 JSP 而不是 HTML 文件作为 GWT 托管文件，您可以这样做

```
<%
   String refreshInterval = request.getParameter("refreshInterval");
%>
<head>
  <meta http-equiv="refresh" content="<%=refreshInterval%>">
</head> 
```

# php - wordpress：如何在 wordpress 的 wp_list_table 类中启用编辑和删除操作按钮

> ID：12092707
> 
> 赞同：4
> 
> 时间：2012-08-23T13:28:19.937
> 
> 标签：php, wordpress-theming, wordpress

嗨，我正在编写一个插件，其中我通过扩展 wordpress wp_list_table 类来显示数据库中的各种条目。为了在每一行中显示一些操作链接，我以以下方式使用了此功能。

```
function column_name($item) {
    $actions = array(
        'edit' => sprintf('<a href="?page=%s&action=%s& hotel=%s">Edit</a>',$_REQUEST['page'],'edit',$item['id']),
        'delete' => sprintf('<a href="?page=%s&action=%s&hotel=%s">Delete</a>',$_REQUEST['page'],'delete',$item['id']),
    );
    return sprintf('%1$s %2$s', $item['Name'], $this->row_actions($actions) );
} 
```

但是从管理页面，当我点击这些链接时，什么都没有发生，只有我搜索了每个商品的 url 更改，并且大多数示例都使用数组形式的静态数据，所以我想说的是如何通过 $_GET 使其处于活动状态[] 方法还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T12:30:51.077

回到您的设置页面，您应该为 $ *GET 值添加一个 if 语句。（即来自您的 add* (sub)menu_page 调用的回调。

例如

```
if( isset( $_GET['edit-hotel'] ) ) :
  // Show my edit hotel form
else :
  // Show my WP_List_Table
endif; 
```

如果合适，您当然也可以在编辑表单上方显示列表 - 这只是一个示例。

请注意，WP_List_table 类被标记为 @access 私有，因此不应真正用作 API 的一部分。[请参阅 WordPress 核心开发人员 Andrew Nacin 的评论](http://wpengineer.com/2426/wp_list_table-a-step-by-step-guide/#comment-9617)。

# c# - 如何在 wpf 运行时更改 Datagrid 行颜色？

> ID：12092710
> 
> 赞同：0
> 
> 时间：2012-08-23T13:28:32.053
> 
> 标签：c#, wpf, wpfdatagrid

我正在使用 WPF DataGrid 并通过使用类 RowItem 在运行时添加行

```
 public class RowItem //Class
 {
     public int Rule_ID { get; set; }
     public string Rule_Desc { get; set; }
     public Int64 Count_Of_Failure { get; set; }
 }    

adding row at run time like :

dgValidateRules.Items.Add(new RowItem() { Rule_ID = ruleID, Rule_Desc = ruleDesc, Count_Of_Failure = ttlHodlings }); 
```

使用下面的 Loading Row 事件代码来更改数据网格行的颜色。但它不起作用。

```
private void dgValidateRules_LoadingRow(object sender, DataGridRowEventArgs e)
{
  for (int i = 1; i < dgValidateRules.Items.Count; i++)
  {
    if (((RowItem)dgValidateRules.Items[i]).Count_Of_Failure == 0)
      e.Row.Foreground = new SolidColorBrush(Colors.Black);
    else
      e.Row.Foreground = new SolidColorBrush(Colors.Red);
  }
} 
```

谁能告诉我解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-29T09:56:09.880

因为它是行事件，所以它是做这件事的好地方，在这里你可以放置一个关于行的条件：

```
 private void table_LoadingRow(object sender, DataGridRowEventArgs e)
    {
        if (((MyData)e.Row.DataContext).Module.Trim().Equals("SomeText"))
        {
            e.Row.Foreground = new SolidColorBrush(Colors.Red);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-29T11:20:03.813

您可以使用[DataTrigger](http://www.wpf-tutorial.com/styles/trigger-datatrigger-event-trigger/)或[Converter](https://wpftutorial.net/ValueConverters.html)

```
<DataGrid ItemsSource="{Binding YourItemsSource}">
    <DataGrid.RowStyle>
        <Style TargetType="DataGridRow"> 
            <Style.Triggers>
                <DataTrigger Binding="{Binding Count_Of_Failure}" Value="0">
                    <Setter Property="Foreground" Value="Red"></Setter>
                </DataTrigger>
                <DataTrigger Binding="{Binding Count_Of_Failure}" Value="1">
                    <Setter Property="Foreground" Value="Green"></Setter>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </DataGrid.RowStyle>
</DataGrid> 
```

# apache - 带有 CAS 和 Apache 的 Alfresco SSO

> ID：12092712
> 
> 赞同：0
> 
> 时间：2012-08-23T13:28:36.247
> 
> 标签：apache, single-sign-on, alfresco, cas

我正在尝试根据[本指南](http://wiki.alfresco.com/wiki/Alfresco_With_mod_auth_cas)将 CAS 集成到 Alfresco (ver 4.2.0) 中。/alfresco 应用程序工作正常，但 /share 无法登录。当 org.alfresco.web.site.EditionInterceptor 尝试通过新的远程端点获取许可证信息时，它会重新路由到 cas 登录页面（该应用程序是已经登录，并且 CAS cookie 在请求中）。这会导致错误，因为它需要 JSON 响应。这可能是由 Apache 配置引起的吗？或者端点有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-16T21:38:06.947

Share 通过 Alfresco 进行身份验证，并通过 https 拨打电话，您必须使 alfresco 和 CAS 可通过**https**共享。这篇[文章](http://www.ixxus.com/blog/2011/08/configuring-alfresco-sso-cas-and-securing-tomcat "使用 CAS 为 SSO 配置 Alfresco 并保护 Tomcat")可以提供很好的帮助。

# git - 如何 git reset --hard 除了 4 个文件之外的所有内容

> ID：12092714
> 
> 赞同：32
> 
> 时间：2012-08-23T13:28:48.183
> 
> 标签：git

假设什么都没有上演，那么推荐的重置所有工作的方法是什么，除了文件：

```
app/models/a.rb
app/views/a/index.html.rb
config/foo.rb
config/bar.rb 
```

我不想保留的其他脏文件存在于 app/models/ 和 app/views/ 中。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-23T16:36:05.387

正如您描述的问题，它看起来不像您想要的那样`reset`。最简单的事情是：

```
 git add app/models/a.rb app/views/a/index.html.rb config/foo.rb config/bar.rb
 git checkout . 
```

因此，它将您的 4 个文件添加到索引中，并检查其他文件的干净版本（即丢弃更改）。

我假设您之前没有暂存 ( `git add`) 修改过的文件（然后您应该使用重置取消暂存它）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-23T13:31:38.100

一种方法是 git 提交这四个文件，然后硬重置，然后撤消提交：

```
git add <files to keep>
git commit -m "temp"
git reset --hard
git reset HEAD~ 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-23T13:44:42.137

如果这四个文件在索引中而脏文件不在索引中，那么简单的[`git-clean`](https://git-scm.com/docs/git-clean)应该可以解决问题。如果不确定，`--dry-run`请先使用开关，并注意`--exclude`开关。

否则，坚持[siride的回答](https://stackoverflow.com/a/12092767/321973)

# mysql - 可以计算 MySQL 查询中两个日期时间字段之间的时间差吗？

> ID：12092717
> 
> 赞同：0
> 
> 时间：2012-08-23T13:28:55.267
> 
> 标签：mysql

> **可能重复：**
> [MySQL 中两个日期之间的差异](https://stackoverflow.com/questions/4759248/difference-between-two-dates-in-mysql)

我在一个表中有三个字段。Date1、Date2 和 DiffinHours。在我们的 PHP 代码中，当设置 Date2 时，我们计算 Date2 和 Date1 之间的小时差，然后将 DiffinHours 设置为该值。

但是，我们有一个数据库在一段时间内没有进行计算，我们需要计算那个时间范围内的 DiffinHours。我可以编写一个脚本来完成它，但我希望它可以通过查询来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:40:39.860

定期运行此查询。跟踪最后一次评估该行的时间，并检查该值是否为 0（表示该行的 timediff 尚未计算）：

```
UPDATE database SET DiffInHours = HOUR(TIMEDIFF(date2, date1)), lastEval = NOW() WHERE date2 != 0 AND lastEval = 0; 
```

或者您的意思是一次性查询回填数据库，这里查询只是在 Diffinhours 为零时运行：

```
UPDATE database SET DiffInHours = HOUR(TIMEDIFF(date2, date1)) WHERE date2 != 0 AND DiffInHours = 0; 
```

# c++ - 使用 _bstr_t 时无效的空指针

> ID：12092718
> 
> 赞同：1
> 
> 时间：2012-08-23T13:29:04.513
> 
> 标签：c++, string, exception, com, bstr

我有一个正在开发的 COM DLL，但遇到了一些问题。我对一段代码进行了尝试捕获，并且在捕获中我`_bstr_t`从异常中得到了一个。我想要做的是捕获该异常并将其打印到一个字符串中，但是，当该异常被抛出时，它会向我抛出一个无效的空指针错误。我尝试查看有关如何检查空指针的 MSDN，但它似乎不起作用。我无法真正调试该错误，因为这是在客户端计算机上，并且在尝试输出信息时出现此错误。

```
catch(const _com_error& ex)
{
    ::OutputDebugStringW(ex.Description());

    _variant_t ret;
    std::string str = "#N/A ExcelException: ";
    _bstr_t desc = ex.Description();

    if(!desc || desc.GetBSTR() == L"")
    {
        str += ConvertBSTRToMBS(desc);
    }

    ret.SetString(str.c_str());
    *Result = ret.Detach();
}

std::string ConvertBSTRToMBS(_bstr_t bstr) 
{
    std::string converted((char *)bstr);
    return converted;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:38:29.590

由于`if`条件错误，`ConvertBSTRToMBS`仅在`bstr`为空时调用。更正如下

```
if(!!desc && desc.length() != 0)
{
    str += ConvertBSTRToMBS(desc);
} 
```

奇怪的`!!desc`表情意味着`!(desc.operator!())`。 `_bstr_t::operator!`如果为 null，则返回 true `BSTR`，因此您必须将其取反以检查非 null。

# iphone - UITableView 在得到服务器的响应后变为 Nil

> ID：12092719
> 
> 赞同：1
> 
> 时间：2012-08-23T13:29:13.417
> 
> 标签：iphone, objective-c, xcode, uitableview

这是我的场景，我有 ViewController1 和 Class1（服务类）。

我通过在 ViewController1 中设置委托和数据源来在 nib 中加载 tableView。在 viewDidLoad 中，我在另一个类（Class1）中调用 networkCall 函数。在 Class1 中，收到响应后，它会将响应数据数组传递给 ViewController1 中的函数，其中数据应填充到 tableview 中。

我已经在 xib 中连接了数据源和委托。问题：当我在 ViewController1 中以数组形式获得响应时，UITableView 变为 nil，我无法使用 reloadData，但我的数组包含来自服务器的项目列表。

这是我的代码

视图控制器1

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    ClassA *class = [[ClassA alloc]init];
    [class getResponse];

}

//This method is calling from ClassA using delegate
-(void)responseData:(NSArray*)arrayList
{
//arrayList have response data
[tableView reloadData];//here tableView becomes nil.
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"array count %d",array.count);//has number of items(for me, its 3).
    return array.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"TableView";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = @"dsds";

    return cell;
} 
```

tableView 是第一次调用。

在界面的 ViewController1 中，我正在设置协议

```
<UITableViewDelegate,UITableViewDataSource> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:51:58.847

您正在创建新实例，`ViewController1`而不是使用已加载的实例。

您可以执行以下操作：

对于 A 类：

界面：

```
@interface ClassA : ...
    @property (weak) ViewController1 * vcDelegate; 
...
@end 
```

执行：

```
@implementation ClassA
    @synthesize vcDelegate;
...
@end 
```

而不是

```
 id<ViewController1Protocol>view1 = [[ViewController1 alloc]init]; 
  [view1 responseData:objects]; 
```

称呼

```
 [vcDelegate responseData:objects]; 
```

在您的 ViewController 中，创建`ClassA`时需要将委托设置为 self：

```
 - (void)viewDidLoad
 {
      [super viewDidLoad];
      ClassA *class = [[ClassA alloc]init];

      [class setVcDelegate: self];

      [class getResponse];          
 } 
```

这不是最好的实现，但应该让你知道如何去做。

例如，财产可能应该是

```
@property (weak) id<ViewController1Protocol> vcDelegate; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:33:47.360

您必须将您的`tableView`与 xib 中的表视图连接起来。

图像中的红色区域与您的表格视图没有连接。它是空的。

![在此处输入图像描述](../Images/89d64c286a564730710d038c44fbbf85.png)

# javascript - 链接到函数

> ID：12092723
> 
> 赞同：4
> 
> 时间：2012-08-23T13:29:17.377
> 
> 标签：javascript

我正在构建一个简单的框架来处理 DOM 元素。我在框架中有大约 40 个大函数。

框架功能是：

```
var $ = function(a) { /* content */ }; 
```

它的功能：

```
Dev.FN = {
 /* big functions here */
}; 
```

这是我在框架中包含函数的方式：

```
 if($.FN) {
       $.FN.em = em;
       return $.FN;
     }
     $.FN = { em : em };
     for(var b in Dev.FN) {
       if(Dev.FN.hasOwnProperty(b)) {
         $.FN[b] = Dev.FN[b];
       }
     }
     return $.FN; 
```

问题：**它为每个框架调用创建了我的 40 个大函数**，我的意思是：如果我调用`$(element1)`它为它创建 40 个函数，然后`$(element2)`再创建 40 个大函数，依此类推..

**如何链接到函数`Dev.FN`而不在每次`$(element)`调用时创建它们？**

*PS：我也尝试了以下方法，但我不知道它是否有帮助：*

```
 for(var b in Dev.FN) {
       if(Dev.FN.hasOwnProperty(b)) {
         $.FN[b] = function() {
           return Dev.FN[b].apply(this, arguments);
         };
       }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:32:48.197

将您的声明粘贴在[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)中：

```
Dev.FN = (function () {
 /* big functions here */
}) (); 
```

> 在 JavaScript 中，每个函数在被调用时都会创建一个新的执行上下文。...在许多情况下，您不需要任何 makeWhatever 函数返回的多个“实例”，并且只需一个实例即可

# sql - SQL Oracle Select Group 借用所有成员

> ID：12092726
> 
> 赞同：-1
> 
> 时间：2012-08-23T13:29:27.343
> 
> 标签：sql, oracle

我有两张桌子：Car 和 CarBorrowed。

**Car**表包含拼车中所有具有 ID 的汽车以及汽车所属的组。例如：

```
ID 1, Car 1, Group Renault
ID 2, Car 3, Group Renault
ID 3, Car 4, Group VW
ID 4, Car 6, Group BMW
ID 5, Car 7, Group BMW 
```

**CarBorrow**表包含在特定日期借用的所有汽车

```
Car 1, Borrowed on 23.08.2012
Car 3, Borrowed on 23.08.2012
Car 5, Borrowed on 23.08.2012 
```

现在我想要所有没有汽车的团体（今天= 23.08.2012）。所以我应该得到“雷诺集团”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:40:07.803

嗯。. . 处理此查询的一种方法是计算一个组中的汽车数量，并计算特定日期的汽车数量，然后选取借用量等于可用量的组：

```
select borrowed.BorrowedOn, available.CarGroup
from (select c.CarGroup, count(*) as cnt
      from car c
      group by c.CarGroup
     ) available left outer join
     (select c.CarGroup, cb.BorrowedOn, count(*) as cnt
      from CarBorrowed cb join
           Car c
           on cb.CarId = c.CarId
      group by c.CarGroup, cb.BorrowedOn
     ) borrowed
     on available.CarGroup = borrowed.CarGroup
where available.cnt = borrowed.cnt 
```

顺便说一句，“组”对于一个列来说是个坏名字，因为它是一个 SQL 保留字。我已将其重命名为 CarGroup。

如果同一辆车可以在给定日期多次借用，则将`count(*)`第二个子查询中的 更改为`count(distinct cb.carId)`。

如果您只想要一天，您可以在 WHERE 子句中添加一个子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:47:17.513

首先，加入表格，这样我们就有了每辆车借来的（一天）。

```
select c.id, c.GroupName, cb.day
from car c
left join (select * from CarBorrow where day = '23 Aug 2012') cb 
  on (c.id = cb.id) 
```

所有未借用的汽车将在当天为空。

在此之后，我们应该选择所有没有空值的组。下面是一个技巧来获得它：

```
select GroupName
FROM(
    select c.id, c.GroupName, cb.day
    from car c
    left join (select * from CarBorrow where day = '23 Aug 2012') cb 
      on (c.id = cb.id)
)
group by GroupName
having count(day) = count(*) 
```

（为 null 的天数不计入 COUNT）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T13:55:45.250

```
SELECT distinct(D1.CARGROUP)
FROM   den_car d1
MINUS
(SELECT D.CARGROUP
 FROM   den_car d
 WHERE  d.id IN (SELECT c.ID
                 FROM   den_car c
                 MINUS
                 SELECT b.id
                 FROM   den_car_borrow b
                 WHERE  B.DATE_BORROW = TO_DATE (SYSDATE))) 
```

这可能会被优化，但想法很简单：找到借来的，从所有汽车中减去。然后找到剩余组。

希望能帮助到你。（顺便说一句，当然还有很多其他方法可以做到这一点。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T14:09:21.427

我想我现在有一个解决方案：

```
select x.groupname from 
(select a.groupname, count(*) as cnt from car a  group by a.groupname) x 
inner join  
(
  select b.groupname, count(*) as cnt from car b   where b.carid in (select caraid from modavail where day ='23.08.2012')
  group by b.groupname
  ) y

on x.groupname = y.groupname
where  x.cnt = y.cnt and y.cnt ! = 0 ORDER BY GROUPNAME; 
```

谢谢你的帮助！！！！

# grails - 如何在子目录中运行 Grails？

> ID：12092729
> 
> 赞同：0
> 
> 时间：2012-08-23T13:29:32.943
> 
> 标签：grails

是否可以将 Grails 配置为在子目录中运行？默认情况下，它在开发中运行：

```
http://localhost:8080/appname/$controller/$action 
```

我想将其配置为运行：

```
http://localhost:8080/appname/subdirectory/$controller/$action 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T15:24:27.887

在 Config.groovy 中，您可以添加它以获得它在子目录中运行的效果：

```
grails.app.context = '/subdirectory' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:39:57.107

如果它只是关于 URL 中的“子目录”，只需改进您的 URLMappings：

```
 "/subdirectory/$controller/$action?/$id?" {
            constraints {
                // apply constraints here
            }
    } 
```

# php - 脚本上的错误 H12（请求超时）但浏览器上没有

> ID：12092730
> 
> 赞同：0
> 
> 时间：2012-08-23T13:29:34.430
> 
> 标签：php, ruby-on-rails, heroku, libcurl

我有一个调用 ruby​​ on rails web 服务器的 php 脚本。该 Web 服务器旨在成为女巫上的 api 服务器，我将从 php 脚本进行多次调用。

我创建了一个测试路由`/api/test`，看看我的脚本是否可以成功调用我的 api 服务器。

在开发中一切正常，没有发现任何问题。但是今天，当我将它上传到heroku时，我得到了`Error H12 (Request timeout)`

所以我在浏览器上打开了相同的网址。在浏览器中我看不到任何错误，并且页面以应有的方式加载。

我的 php 脚本是这样的：

```
 $ch = curl_init($url);

curl_setopt($ch, CURLOPT_CUSTOMREQUEST, $http_method); // GET, POST, PUT and DELETE, one at the time
curl_setopt($ch, CURLOPT_HTTPHEADER, $header_fields);
curl_setopt($ch, CURLOPT_POSTFIELDS, $body_data);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$response = curl_exec($ch);
curl_close($ch);

return $response; 
```

这是错误日志，顺便说一句，有时 GET 请求甚至不会显示为错误或成功：

```
2012-08-23T13:28:07+00:00 heroku[router]: Error H12 (Request timeout) -> POST *.herokuapp.com/api/test dyno=web.1 queue= wait= service=30000ms status=503 bytes=0
2012-08-23T13:28:08+00:00 heroku[router]: Error H12 (Request timeout) -> PUT *.herokuapp.com/api/test dyno=web.1 queue= wait= service=30000ms status=503 bytes=0
2012-08-23T13:28:09+00:00 heroku[router]: Error H12 (Request timeout) -> DELETE *.herokuapp.com/api/test dyno=web.1 queue= wait= service=30000ms status=503 bytes=0 
```

有时 4 个请求中的一个会返回一些东西，但就像不小心一样

有人能帮我吗？我真的需要这个脚本工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:37:10.853

发现了问题。

这是我公司的防火墙。

不知道在哪里，但是一旦我的机器清除了限制，它现在就可以工作了

# java - Swig for java，从具有数组成员的c结构生成代理类

> ID：12092732
> 
> 赞同：1
> 
> 时间：2012-08-23T13:29:40.280
> 
> 标签：java, arrays, java-native-interface, structure, swig

我正在使用 SWIG 2.0，并且正在为 API 创建一个 Java 包装器，作为该 API 的一部分，它具有一个包含多维数组的结构：

```
typedef struct mbuf
{
  data[2][31]
} 
```

当它生成我的代理类时，它为我提供了获取指向数组的指针的函数：

```
public void setData_buf_num1(int value) {
    apiJNI.MBUF_data_buf_num1_set(swigCPtr, this, value);
  }

  public int getData_buf_num1() {
    return apiJNI.MBUF_data_buf_num1_get(swigCPtr, this);
  } 
```

我知道他们给了我可以传递给其他 C 函数的只读指针，我尝试使用 carray.i 给我访问权限，但没有运气，

我无法让演员表工作，因为我的函数`int`按照指针和数组函数的要求返回`SWIGTYPE_p_int`。

我要做的就是正确地从代理类访问数组的元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:40:28.237

如果您只想读取 Java 中的数据，最简单的方法是`data`完全隐藏该成员并使用`%extend`添加方法来读取数组中的特定条目。您可以使用 SWIG 执行此操作，如下所示：

```
%module test

%ignore mbuf::data; 

%inline %{
struct mbuf
{
  int data[2][31];
};
%}

%extend mbuf {
  int getData(int i, int j) {
    return $self->data[i][j];
  }
} 
```

如果需要，您可以`setData`以相同的方式添加。

您可以做更复杂的事情，例如使用 pragma 提供一些 Java 重载，这些重载基于 Java 数组填充和设置整个数组。使用 carrays.i 可以做到这一点，但二维数组比一维数组更麻烦。也可以编写一些 JNI，但是作为二维数组，这再次增加了复杂性，这使得简单的`%extend`解决方案更具吸引力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:01:34.230

仅供参考，假设您的头文件名为`Test.h`，这是我们如何使用[JavaCPP 执行此操作：](http://code.google.com/p/javacpp/)

```
import com.googlecode.javacpp.*;
import com.googlecode.javacpp.annotation.*;

@Platform(include="Test.h")
public class Test {
    public static class mbuf extends Pointer {
        static { Loader.load(); }
        public mbuf()          { allocate(); }
        public mbuf(int size)  { allocateArray(size); }
        public mbuf(Pointer p) { super(p); }
        private native void allocate();
        private native void allocateArray(int size);

        public native int data(int i, int j); 
        public native mbuf data(int i, int j, int k);
    }

    public static void main(String[] args) {
        mbuf m = new mbuf();
        m.data(1, 2, 42);
        System.out.println(m.data(1, 2));
    }
} 
```

更多样板，但至少在 Java 中:)

# php - 在php中计算两个数组值？

> ID：12092733
> 
> 赞同：0
> 
> 时间：2012-08-23T13:29:44.573
> 
> 标签：php, arrays

我有两个数组

```
 $a1                $b1
0 : A                  10
1:  B                  10
2:  A                  15
3:  A                  20
4: B                   05
5: c                   25 
```

现在我想以同样的方式计算它们然后结果是 A=45, B=15 和 C=25

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:33:49.957

```
$calc = array_fill_keys($a1,0);
foreach($a1 as $i => $key) {
  $calc[$key] += $b1[$i];
} 
```

`$calc`是计算值的数组：

```
[A] => 45,
[B] => 15
etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:12:44.217

我知道它已经被回答和接受了，接受的答案要简单得多，效率更高；但纯粹是因为我很想尝试一种完全不同的方法：

```
$a1 = array('A', 'B', 'A', 'A', 'B', 'c');
$b1 = array('10','10','15','20','05','25');

$sumArray = array();
foreach(array_unique($a1) as $key) {
    $arrayElements = array_filter(
                         $a1,
                         function($value) use ($key) {
                             return $value == $key;
                         }
                     );
    $sumArray[$key] = array_sum(
                          array_intersect_key(
                              $b1,
                              array_fill_keys(
                                  array_keys($arrayElements),
                                  NULL
                              )
                          )
                      );
}

var_dump($sumArray); 
```

# javascript - 刷新滚动到底部

> ID：12092735
> 
> 赞同：2
> 
> 时间：2012-08-23T13:29:50.370
> 
> 标签：javascript, jquery, scroll, html-table, page-refresh

我有一个嵌入标签，它正在嵌入我网站的另一个页面，我希望该嵌入向下滚动。该嵌入实际上是嵌入来自另一个页面的聊天评论，我每 3 秒更新一次该页面，但我希望嵌入框架滚动条在每次刷新时滚动到底部。任何 JavaScript 或 JQuery 都会很好，请帮我完成这个，我需要在某个地方提交它。

**标记**

```
<embed id="embed" src="comments.php" width="200" height="500" border="1"/> <-- This is embed frame 
```

两个页面都写在 .php 文件中，comments.php 也不包含任何 body/html 标签。

**评论.php**

```
<table id="commentstable">
<?php
    echo"<tr>
        <td class='username'>$username</td>
        <td class='comment'>$comment</td>
            </tr>";
?>
</table> 
```

我正在使用它来刷新评论框架和页面。只有框架被更新，但主页保持静态。

```
Header("refresh:3;url='comments.php'"); 
```

请，我需要带有脚本标签的完整代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T13:45:43.180

收听 comments.php 中的 onload 事件并在此事件上向下滚动。您可以使用 jQuery：

```
$("window").load(scrollDown); 
```

**或**使用 onload 属性：

```
// your comment.php body tag
<body onload="scrollDown()"> 
```

实际的 scrollDown 函数可能类似于：

```
scrollDown = function() {
   document.body.scrollTop = document.body.scrollHeight;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:50:37.470

```
$(function(){
 $('body').scrollTop($(document).height());
}); 
```

# php - 除 MVC 外的 Web 代码设计模式

> ID：12092736
> 
> 赞同：-4
> 
> 时间：2012-08-23T13:29:50.193
> 
> 标签：php, oop, design-patterns

真的，我知道在没有 MVC 的情况下永远不会编码类型（模式）。现在，我可以创建自己的 mvc，但这对我来说还不够。（使用 PHP）我需要学习更多的东西。

我需要如何学习才能成为专业的 PHP 开发人员？我想我会成为killerphp的高级会员，你建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:54:34.097

除了了解 php 或任何其他语言本身之外，开始学习设计模式和面向对象的设计和分析将是明智的。我认为这就是你想要的。我觉得这两本书很棒。剩下的就是实施你学到的东西和大量的实践。

**头部优先设计模式**

**首先是OOA和OOD**

# tomcat - tomcat 和 docbase 的奇怪行为

> ID：12092739
> 
> 赞同：1
> 
> 时间：2012-08-23T13:30:07.550
> 
> 标签：tomcat, tomcat7

我正在使用 tomcat 7.0.22

我希望 URL:`127.0.0.1:8080`指向位于 Project 文件夹下的我的 webapp，而不是`127.0.0.1:8080/Project/`

所以我在 server.xml 中定义

```
<Context docBase="Project" path="/"  /> 
```

这适用于我第一次启动tomcat。

如果我采取以下行动：

1.  停止Tomcat
2.  删除war和项目文件夹
3.  将战争从部署服务器移动到 webapp 文件夹
4.  启动tomcat

再次 - 我必须输入`127.0.0.1:8080/Project/`才能访问应用程序。

如果我，除了上述4个步骤之外：

1.  停止Tomcat
2.  启动tomcat

它工作正常，我可以在`127.0.0.1:8080/`

我能做些什么来防止额外的停止和启动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T14:39:29.663

几个问题：

1.  不要`<Context>`放入`server.xml`。相反，请使用将`[appname].xml`文件放入`conf/[service]/[engine]`目录的首选部署技术。对你来说，这可能意味着`conf/Catalina/localhost`。

2.  根本不要`path`设置，`"/"`如果要设置，也不要设置为：`path`根 web 应用程序的正确值为`""`(empty, not `/`)。

3.  让你的名字`[appname].xml`成为`ROOT.xml`

4.  将您的`Project`文件夹移到 Tomcat 的`appBase`（`webapps/`目录）之外，并使用完全限定的路径名​​作为`docBase`.

如果你只做了两件事，你就可以避免上面的所有错误：

```
$ mv webapps/Project webapps/ROOT 
```

...并`<Context>`从您的`server.xml`完全删除。

哦，你应该升级 Tomcat：你目前落后了 7 个版本，这七个小版本中有一些好东西。

# hadoop - 如何在 Linux 机器中将文本文件加载到 Hbase

> ID：12092741
> 
> 赞同：0
> 
> 时间：2012-08-23T13:30:17.260
> 
> 标签：hadoop, hbase

如何将我的本地机器上的文本文件加载到远程 Hbase。我参考了上面的命令，但我真的对命令感到困惑

```
hadoop jar <path to hbase jar> importtsv -Dimporttsv.columns=a,b,c '-Dimporttsv.separator=,' <tablename> <inputdir> 
```

文本文件的路径和表名和列的地址将在文本文件中。在文本文件中，我有 create 和 put 语句，如何在 Hbase shell 中加载和执行该文件。如果有任何人知道，请打破我的困惑。

脚本文件：

```
create 'blogpostss', 'post', 'image' 

Run in HBase shell the following to add some data:

put 'blogpostss', 'post1', 'post:title', 'Hello World'
put 'blogpostss', 'post1', 'post:author', 'The Author'
put 'blogpostss', 'post1', 'post:body', 'This is a blog post'
put 'blogpostss', 'post1', 'image:header', 'image1.jpg'
put 'blogpostss', 'post1', 'image:bodyimage', 'image2.jpg'

put 'blogpostss', 'post2', 'post:title', 'Another Post'
put 'blogpostss', 'post2', 'post:title', 'My Second Post'

put 'blogpostss', 'post1', 'post:body', 'This is an updated blog postss'

Following commands retrieve data:

get 'blogpostss', 'post1'
get 'blogpostss', 'post1', { COLUMN => 'post:title' }
get 'blogpostss', 'post1', { COLUMN => 'post:title', VERSIONS => 4 }
get 'blogpostss', 'post1', { COLUMNS => 'post:body', VERSIONS => 3 }

get 'blogpostss', 'post2'
get 'blogpostss', 'post2', { COLUMN => 'post:title' }
get 'blogpostss', 'post2', { COLUMN => 'post:title', VERSIONS => 4 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:42:40.553

1.使用终端和ssh到所需的hbase配置的PC。
2.将本地文本文件复制到HDFS。
3.使用 Hbase shell 创建具有所需列族的表。
4.现在执行插入命令。
`hadoop jar <path to hbase jar> importtsv -Dimporttsv.columns=a,b,c '-Dimporttsv.separator=,' <tablename> <inputdir>`
注意：
hbase jar 的路径 -> 路径，其中 hbase jar 可用。
tablename -> 您现在创建的表名。
inputdir -> 带有文件扩展名的完全限定的 Hdfs 路径。
-Dimporttsv.columns=a,b,c -> column family:qualifer 不得不提。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-18T13:39:18.913

你可以试试这个：

1) 对您的 hbase 机器执行 ssh

2）将该文件复制到以下路径：

```
/home/hbase/hbase-0.98.3-hadoop2/bin (it can be change according to where you have hbase folder) 
```

3)[root@hostname bin]# ./hbase shell ./sample_commands.txt

# javascript - 反向按位与运算

> ID：12092742
> 
> 赞同：2
> 
> 时间：2012-08-23T13:30:23.717
> 
> 标签：javascript, bit-manipulation

> **可能重复：**
> [如何在 C 中反转按位与 (&)？](https://stackoverflow.com/questions/2566225/how-to-reverse-bitwise-and-in-c)

如果我使用按位与

```
7758194 & 255 = 114 
```

`7758194`鉴于结果，我怎么能回来`114`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T13:32:59.200

& 运算符，无论是否按位，都是不可逆的。

```
0 & 1 => 0
0 & 0 => 0
1 & 0 => 0 
```

所以你不能。

# ruby-on-rails - 我应该使用什么来可靠地检测 mimetypes？

> ID：12092743
> 
> 赞同：1
> 
> 时间：2012-08-23T13:30:22.977
> 
> 标签：ruby-on-rails, ruby, mime-types

我尝试使用 mimetype-fu 来检测 mimetypes，但它似乎适用于某些文件，而对于其他文件则不起作用。例如，我下载[了这个 R 手册](http://cran.r-project.org/doc/manuals/R-intro.pdf)，并尝试通过以下方式检测它的 mimetype：

```
File.mime_type?(File.read("R-intro.pdf")) 
```

它告诉我 mimetype 是`"unknown/unknown"`. 还有另一种检测模仿类型的方法吗？是否有另一个我不知道的 mimetype-fu 选项可以处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:21:08.703

正如评论中所讨论的，[filemagic](https://github.com/ricardochimal/ruby-filemagic#!/usr/bin/ruby1.8)非常适合。

# excel - Excel，链接2个单元格以具有相同的格式

> ID：12092750
> 
> 赞同：4
> 
> 时间：2012-08-23T13:30:41.403
> 
> 标签：excel, formatting

在 excel 中，我想在不同的工作表中链接 2 个单独的单元格以具有完全相同的格式。如果第一个单元格发生更改，我还需要第二个单元格自动更新。

这可能吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-01-25T17:59:12.427

下面的 VBA 代码将完成这项工作。

在这里你可以检查找到一个例子：

[https://github.com/thanosa/excel-vba-collection/tree/master/link_formatted_cells](https://github.com/thanosa/excel-vba-collection/tree/master/link_formatted_cells)

您必须指定：

1.  源工作表名称
2.  目标工作表名称（可以相同）
3.  源 ID 列
4.  来源信息栏
5.  目标 ID 列
6.  目的地信息栏

它的作用是：

1.  从目标表中读取目标 ID
2.  在源表中查找目标 ID 以查找行
3.  根据上面找到的行和源信息列从源表中复制单元格
4.  将单元格按原样粘贴到当前行和目标信息列的目标工作表中。

> ```
> Const MAX_ROWS = 1000000
> 
> Private Sub CopyFormatted()
>     ' Looks-up the destination id into the source look-up column to retrieve the row number
>     ' Then it copies the source cell into the destination cell
>     ' This is done to copy the format and the within cell new lines
> 
>     ' Layout dependent for the Destination
>     dstWsName = "sheet1"
>     dstFirstRow = 2
>     dstIdCol = "A"
>     dstWriteCol = "B"
> 
>     ' Layout dependent for the Source
>     srcWsName = "sheet1"
>     srcFirstRow = 2
>     srcLookupCol = "D"
>     srcReadCol = "E"
> 
>     Call performancePre
> 
>     Call lookUpCell(dstWsName, dstFirstRow, dstIdCol, dstWriteCol, _
>                     srcWsName, srcFirstRow, srcLookupCol, srcReadCol)
> 
>     Call performancePost
> 
> End Sub
> 
> Private Sub lookUpCell(dstWsName, dstFirstRow, dstIdCol, dstWriteCol, _
>                        srcWsName, srcFirstRow, srcLookupCol, srcReadCol)
>     ' Reads a value in
> 
>     Dim srcWs As Worksheet
>     Dim dstWs As Worksheet
> 
>     Set srcWs = ActiveWorkbook.Sheets(srcWsName)
>     Set dstWs = ActiveWorkbook.Sheets(dstWsName)
> 
>     Dim sourceIdsVector As Range
>     Set sourceIdsVector = srcWs.Range(srcLookupCol & srcFirstRow & ":" & srcLookupCol & MAX_ROWS)
> 
>     ' Initialization
>     dstWriteRow = dstFirstRow
>     Do
>         srcRow = Empty
>         searchId = dstWs.Range(dstIdCol & dstWriteRow).Value
> 
>         ' Make sure the id is not empty
>         If searchId = vbNullString Then Exit Do
> 
>         ' Lookup the id to find the row number
>         For Each cell In sourceIdsVector.Cells
>             If cell.Value = "" Then Exit For
> 
>             If cell.Value = searchId Then
>                 srcRow = cell.Row
>                 Exit For
>             End If
>         Next cell
> 
>         ' If the search succeeds id does the copy paste of the cells.
>         If srcRow <> Empty Then
> 
>             Dim srcCell As Range
>             Set srcCell = srcWs.Range(srcReadCol & srcRow)
> 
>             Dim dstCell As Range
>             Set dstCell = dstWs.Range(dstWriteCol & dstWriteRow)
> 
>             Call CopyPasteRange(srcWs, srcCell, dstWs, dstCell)
> 
>         End If
> 
>         ' Update
>         dstWriteRow = dstWriteRow + 1
>     Loop
> 
> End Sub
> 
> Private Sub CopyPasteRange(srcWs As Worksheet, srcRange As Range, dstWs As Worksheet, dstRange As Range)
>     ' Copy a ranges and pastes it to another
>     srcWs.Select
>     srcRange.Select
>     Selection.Copy
> 
>     dstWs.Select
>     dstRange.Select
>     ActiveSheet.Paste
> 
>     Application.CutCopyMode = False
> 
> End Sub
> 
> Private Sub performancePre()
>     Application.ScreenUpdating = False
>     Application.DisplayStatusBar = False
>     Application.Calculation = xlCalculationManual
>     Application.EnableEvents = False
>     ActiveSheet.DisplayPageBreaks = False 'note this is a sheet-level setting
> End Sub
> 
> Private Sub performancePost()
>     Application.ScreenUpdating = True
>     Application.DisplayStatusBar = True
>     Application.Calculation = xlCalculationAutomatic
>     Application.EnableEvents = True
>     ActiveSheet.DisplayPageBreaks = True 'note this is a sheet-level setting
> End Sub 
> ```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-23T13:34:13.077

尝试使用 =sheetname!Cellref 例如，如果您需要您的单元格与价格中的单元格 g4 相同，您会说 =Prices!G4

或者，如果这不起作用，请打开两张纸，在正在复制的单元格中键入 =，然后轻弹到另一本书并单击您希望它复制的单元格 =]

# matlab - fitspeed2 适合速度.m

> ID：12092754
> 
> 赞同：1
> 
> 时间：2012-08-23T13:30:52.430
> 
> 标签：matlab

我有一个程序我无法解决它的问题

```
Error in ==> fitspeed2 at 7
sysf=gain/dcgain(sys)*sys;[Fitted_Curve, t]=lsim(sysf, y, Input); 
```

程序

```
function sse=fitspeed2(params,Input,Actual_Output) 
b=params(1);
c=params(2);
global y gain
sys=tf(1, conv([1 b c], [1 3.35]));
if (length(t) ~= length(Input))
    Fitted_Curve=Fitted_Curve(1:round(length(t)/length(Input)):end,:);
end
Error_Vector=Fitted_Curve - Actual_Output;
sse=sum(Error_Vector.^2); 
```

# php - Sql连接两个表并获取一个值

> ID：12092756
> 
> 赞同：0
> 
> 时间：2012-08-23T13:30:58.670
> 
> 标签：php, mysql, sql

我有两个表'talent_empcomp'和'talent_employee_details_v'，我需要从'Emp_Compensation'中获取一个值，该值仅存在于'talent_empcomp'表中，但'Emp_Id'在两个表中都很常见并且具有相同的值..我需要获取下面特定“Emp_Id”的“Emp_Compensation”是正在运行的联合查询..但我收到错误消息“where 子句中的列 'Emp_Id' 不明确”

```
SELECT A.*, B.Emp_Compensation 
FROM talent_employee_details_v A, talent_empcomp B   
WHERE Emp_FirstName like '%' and Emp_Id='$Emp_Id' ORDER BY Emp_FirstName 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:34:34.487

首先，您应该使用显式连接语法。其次，您应该使用您定义的表别名：

```
SELECT A.*, B.Emp_Compensation
FROM talent_employee_details_v A join
     talent_empcomp B
     on a.EmpId = B.Emp_id
WHERE A.Emp_FirstName like '%' and A.Emp_Id='$Emp_Id'
ORDER BY A.Emp_FirstName 
```

在列引用之前放置别名是个好主意，这样您就知道值的来源。我猜名字来自“A”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:37:16.577

当您运行连接但未指定要从哪个表中选择列时，会发生此错误。只需在列名之前指定表，例如 A.Emp_id

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:33:13.443

好吧，您正在尝试过滤`Emp_Id`列，但它存在于两个表中，因此 SQL 解释器不知道要过滤哪一列。您需要明确限定列，例如`B.Emp_Id`.

```
SELECT A.*, B.Emp_Compensation 
FROM talent_employee_details_v A, talent_empcomp B   
WHERE Emp_FirstName like '%' and B.Emp_Id='$Emp_Id' ORDER BY Emp_FirstName 
```

顺便说一句：如果您删除`like %`条件，您的查询可能会运行得更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T13:33:17.517

```
SELECT A.*, B.Emp_Compensation 
FROM talent_employee_details_v A, talent_empcomp B   
WHERE Emp_FirstName like '%' and B.Emp_Id='$Emp_Id' ORDER BY Emp_FirstName 
```

# facebook - Facebook like 按钮不适用于 wordpress 中的自定义帖子类型

> ID：12092757
> 
> 赞同：0
> 
> 时间：2012-08-23T13:31:02.967
> 
> 标签：facebook, wordpress, facebook-like

我无法让 facebook like 按钮在 wordpress 中处理自定义帖子类型。

我正在使用的代码：

```
<iframe src="http://www.facebook.com/plugins/like.php?href=<?php echo urlencode(get_permalink($post->ID)); ?>&amp;layout=button_count&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light" scrolling="no" frameborder="0" allowTransparency="true" style="border:none; overflow:hidden; width:450px; height:25px"></iframe> 
```

它在网站上注册了类似的东西，但在 facebook 上没有任何更新。

不知道问题是什么，认为它可能与永久链接有关，但我尝试过的一切都不起作用。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-23T13:43:25.033

2 最佳插件可用于 facebook，例如自定义帖子类型

1.  [Facebook 点赞按钮](http://wordpress.org/extend/plugins/facebook-like-button/)

2.  [另一个不错的 facebook 插件](http://wordpress.org/extend/plugins/facebook-like-button-plugin/)

您只需要：下载它->安装它->选择类型（POST）->显示位置（帖子底部）

或者，如果您对“代码”之类的自定义 Facebook 感兴趣，请[前往此处](http://mashable.com/2010/05/07/wordpress-facebook-like-buttons/)。

我希望这会帮助你！:)

# jquery - jquery ui自动完成组合框没有可见的下拉菜单

> ID：12092759
> 
> 赞同：1
> 
> 时间：2012-08-23T13:31:08.857
> 
> 标签：jquery, user-interface, drop-down-menu, autocomplete, combobox

我想包含一个 jquery ui 自动完成组合框，如[http://jqueryui.com/demos/autocomplete/#combobox](http://jqueryui.com/demos/autocomplete/#combobox)所示。悬停我的组合框只是一个下拉菜单，直到我将 jquery-ui-1.8.21.custom.css 包含到我的 html 文件中 - 我现在有一个自动完成（打字）功能，但不再有下拉菜单。我还需要包括其他什么来获得自动完成功能以及下拉菜单吗？

我包含以下脚本和 css 文件：

```
<link href="css/bootstrap.min.css" rel="stylesheet" />
<link href="css/bootstrap-responsive.css" rel="stylesheet" />
<link href="css/docs.css" rel="stylesheet" /><!--my own code-->
<link href="css/jquery-ui-1.8.21.custom.css" rel="stylesheet" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.js"></script>    
<script type="text/javascript" src="js/dynamic2.js"></script> <!--my own code-->
<script src="js/bootstrap.min.js"></script> 
<script src="js/bootswatch.js"></script> 
```

我包含在我的 html 文件中：

```
 <div class="ui-widget">             
          <input id="tags" />
        </div> 
```

进入我的css文件：

```
.ui-combobox {
    position: relative;
    display: inline-block;
}
.ui-combobox-toggle {
    position: absolute;
    top: 0;
    bottom: 0;
    margin-left: -1px;
    padding: 0;
    /* adjust styles for IE 6/7 */
    *height: 1.7em;
    *top: 0.1em;
}
.ui-combobox-input {
    margin: 0;
    padding: 0.3em;
} 
```

并进入我的js：

```
(function( $ ) {
    $.widget( "ui.combobox", {
        _create: function() {
            var input,
                self = this,
                select = this.element.hide(),
                selected = select.children( ":selected" ),
                value = selected.val() ? selected.text() : "",
                wrapper = this.wrapper = $( "<span>" )
                    .addClass( "ui-combobox" )
                    .insertAfter( select );

            input = $( "<input>" )
                .appendTo( wrapper )
                .val( value )
                .addClass( "ui-state-default ui-combobox-input" )
                .autocomplete({
                    delay: 0,
                    minLength: 0,
                    source: function( request, response ) {
                        var matcher = new RegExp( $.ui.autocomplete.escapeRegex(request.term), "i" );
                        response( select.children( "option" ).map(function() {
                            var text = $( this ).text();
                            if ( this.value && ( !request.term || matcher.test(text) ) )
                                return {
                                    label: text.replace(
                                        new RegExp(
                                            "(?![^&;]+;)(?!<[^<>]*)(" +
                                            $.ui.autocomplete.escapeRegex(request.term) +
                                            ")(?![^<>]*>)(?![^&;]+;)", "gi"
                                        ), "<strong>$1</strong>" ),
                                    value: text,
                                    option: this
                                };
                        }) );
                    },
                    select: function( event, ui ) {
                        ui.item.option.selected = true;
                        self._trigger( "selected", event, {
                            item: ui.item.option
                        });
                    },
                    change: function( event, ui ) {
                        if ( !ui.item ) {
                            var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( $(this).val() ) + "$", "i" ),
                                valid = false;
                            select.children( "option" ).each(function() {
                                if ( $( this ).text().match( matcher ) ) {
                                    this.selected = valid = true;
                                    return false;
                                }
                            });
                            if ( !valid ) {
                                // remove invalid value, as it didn't match anything
                                $( this ).val( "" );
                                select.val( "" );
                                input.data( "autocomplete" ).term = "";
                                return false;
                            }
                        }
                    }
                })
                .addClass( "ui-widget ui-widget-content ui-corner-left" );

            input.data( "autocomplete" )._renderItem = function( ul, item ) {
                return $( "<li></li>" )
                    .data( "item.autocomplete", item )
                    .append( "<a>" + item.label + "</a>" )
                    .appendTo( ul );
            };

            $( "<a>" )
                .attr( "tabIndex", -1 )
                .attr( "title", "Show All Items" )
                .appendTo( wrapper )
                .button({
                    icons: {
                        primary: "ui-icon-triangle-1-s"
                    },
                    text: false
                })
                .removeClass( "ui-corner-all" )
                .addClass( "ui-corner-right ui-combobox-toggle" )
                .click(function() {
                    // close if already visible
                    if ( input.autocomplete( "widget" ).is( ":visible" ) ) {
                        input.autocomplete( "close" );
                        return;
                    }

                    // work around a bug (likely same cause as #5265)
                    $( this ).blur();

                    // pass empty string as value to search for, displaying all results
                    input.autocomplete( "search", "" );
                    input.focus();
                });
        },

        destroy: function() {
            this.wrapper.remove();
            this.element.show();
            $.Widget.prototype.destroy.call( this );
        }
    });
})( jQuery );

$(function() {
    $( "#combobox" ).combobox();
    $( "#toggle" ).click(function() {
        $( "#combobox" ).toggle();
    });
}); 
```

我还尝试仅使用该自动完成组合框创建一个单独的文件，但这样做的效果相同 - 要么只是自动完成而没有保管箱，要么只是保管箱并且无法编写文本。

我已经在这方面花了很多时间，并且感到非常愚蠢，因为它似乎对其他人都有效，因此感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-07T17:24:06.237

我有一个类似的问题。下拉菜单不显示在本地机器上，但显示在线。

我不明白你的意思

```
 .ui-autocomplete {
                       z-index: 10000;
                       } 
```

解决了你的问题。

对我来说，解决方案就像上面指出的 Abhijit Mazumder。缺少 css 文件中引用的图像

[http://code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css](http://code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css)

在本地计算机上工作时。

这个引用的 css 文件一直引用诸如 url("images/ui-bg_highlight-soft_100_eeeeee_1x100.png") 之类的图像，我认为这些图像可以在线获得，但不能在本地计算机中获得。

这就是下拉图像一直丢失的原因。

我通过下载 jquery 自动完成 ui 解决了这个问题，它的文件夹中有我需要的图像。

这有点棘手，因为下载的自动完成 ui zip 文件没有下拉按钮。

所以我使用了 jquery 网站自动完成功能的代码，因为它具有下拉功能，但使用了下载的 zip 文件中的文件 jquery-ui.css。

这是一个相当多的步行，但希望其他人会受益。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-16T20:24:01.907

我通过在我的 css 文件中添加自动完成的 z-index 样式解决了这个问题。

```
.ui-autocomplete {
  z-index: 10000;
} 
```

`z-index`如有必要，请记住为 设置更高的值。只是为了记录，我在 HTML 文件中有这样的东西

```
<div class="ui-widget">
   <label for="employee">Employee:</label>
   <input id="employee" type="text" name="employee" />
</div> 
```

# web-applications - 将下载的文件链接到服务器

> ID：12092764
> 
> 赞同：6
> 
> 时间：2012-08-23T13:31:26.333
> 
> 标签：web-applications

我试图找出一种方法来允许用户从服务器下载文件并对其进行编辑，但是当他们保存时，它会保存回服务器。如果可能的话，我正在寻找一种不涉及闪光灯或银光之类的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T16:03:35.713

你不能那样做。如果文档是通过本地软件下载本地版本，则必须由用户自愿上传。

如果不是这种情况，那将是安全漏洞，因为浏览器不必查看（也看不到）本地文件，也不会收到更改通知。

现在，如果我们不寻找通用且简单的解决方案，而是接受用户的一些协作，我们有什么？

*   [webdav](http://en.wikipedia.org/wiki/WebDAV)通常用于企业 WAN 上的共享目录。这个基于 Web 的协议允许共享文档，并且许多软件，其中包括[OpenOffice](http://www.oooforum.org/forum/viewtopic.phtml?t=8327)和[MsOffice](http://www.webdavsystem.com/server/documentation/ms_office_read_only)，都能够与 webdav 一起使用。我认为所有最近的操作系统都支持这个协议。

*   一些[文档管理系统](http://en.wikipedia.org/wiki/Document_management_system)（其中包括我过去使用的[KTDMS ）在您的计算机上安装本机（windows）挂钩，使您能够从您使用的软件（主要是 MsOffice）发回文档。](https://www.knowledgetree.com/)那些 DMS 通常还提供标准的 webdav 访问，以便与任何操作系统兼容

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T16:52:30.797

正如其他人所说，一旦用户从您的服务器下载文件，您就无法控制他对它的处理方式。您还有其他可能性：

*   不要让用户下载文件，而是在网站内显示一个编辑器。这在没有 Flash/Silverlight 的情况下通常是可能的，但可用的（通常基于 JavaScript 的）编辑器与桌面版相比通常相对原始，除非您只处理纯文本文件。

*   告诉用户修改后再次上传文件。不太直观，但对您来说也更少麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:48:36.597

您希望保存的版本自动上传到服务器吗？如果您让他们将它下载到他们的桌面并在那里进行编辑，您将无法控制它会发生什么，他们如何编辑它以及他们是否会上传它。

如果您希望用户在保留在服务器上的同时可以编辑某些内容，请让他们通过服务器上的 Web 应用程序对其进行编辑。像 Google Docs 和许多类似的云服务。

这是否可行取决于它是什么类型的文件以及你需要什么样的编辑器来编辑它。纯文本相对容易。某些专有格式不是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T12:49:06.933

尝试使用谷歌驱动器。他们将本地副本同步到服务器。理解它可能会帮助你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T05:48:37.557

如果您只是希望用户能够使用您服务器上的文本文件，您可以使用像 codemirror 这样的 javascript 编辑器。CodeMirror 允许您在浏览器中编辑文件并支持程序语言语法高亮。

这是一个演示：
[http ://codemirror.net/demo/complete.html](http://codemirror.net/demo/complete.html)

如果你想拥有一个用户友好的所见即所得编辑器，或者使用 TinyMCE：
[http ://www.tinymce.com/](http://www.tinymce.com/)

# mysql - 如何查找列的表名

> ID：12092765
> 
> 赞同：-1
> 
> 时间：2012-08-23T13:31:26.497
> 
> 标签：mysql

我有一个列名，我想知道该列属于哪个表？或者更像是在 mysql 的数据库中获取具有此列的表的列表。

提前致谢！维杰·塞卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:42:03.550

可以查询`information_schema`数据库：

```
SELECT TABLE_SCHEMA, TABLE_NAME
FROM information_schema.`COLUMNS`
WHERE COLUMN_NAME = 'your_column_name' 
```

# facebook - 为 Facebook 页面打开 Graph Like

> ID：12092766
> 
> 赞同：1
> 
> 时间：2012-08-23T13:31:32.827
> 
> 标签：facebook, facebook-graph-api

是否可以使用开放图形协议点赞（增加点赞数）Facebook 页面。我知道用户可以喜欢具有开放图形元标记的 URL。

**我想为 facebook 页面做同样的事情。请让我知道这是否可能以及如何完成？**

谢谢@n！sh

# android - 片段android中的ListView

> ID：12092769
> 
> 赞同：1
> 
> 时间：2012-08-23T13:31:44.850
> 
> 标签：android, android-listview, android-fragments

我无法在片段中实现列表视图。

xml代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:src="@drawable/jo_logo" />

    </LinearLayout>

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1" >
    </ListView>

</LinearLayout> 
```

简单的 ImageView 和之后的列表视图。我已经尝试实现：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity().getBaseContext(), 
            android.R.layout.simple_list_item_1, viewList);
    setListAdapter(adapter); 
```

其中 viewList 是 View[]，在 onCreateView 函数上。似乎它在片段内部不是这样工作的。事情是我需要第一个视图是 ImageView，第二个是 ListView，并且都在 Fragment 中。

请帮助，在此先感谢，udi

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:33:02.690

在您的布局 xml 中更改`android:id="@+id/listView1"`为，`android:id="@android:id/list"`否则`ListActivity`/`ListFragment`将找不到您的`ListView`.

# jquery - gridview 中的 RadioButtonList - 服务器端代码太慢，我可以在客户端执行吗？

> ID：12092771
> 
> 赞同：0
> 
> 时间：2012-08-23T13:31:47.110
> 
> 标签：jquery, asp.net

我在网格视图中有一个单选按钮列表，如下所示：

```
<asp:GridView ID="gvLineItems" runat="server">
<asp:TemplateField>
      <asp:RadioButtonList ToolTip="Please provide an answer to the method." AutoPostBack="true" RepeatDirection="Horizontal" ID="rbAnswer" runat="server" SelectedValue='<%# DataBinder.Eval(Container, "DataItem.AnswerID")%>' OnSelectedIndexChanged="rbAnswer_SelectedIndexChanged">
                                    <asp:ListItem Text="Yes" Value="Yes" style="color:green;"></asp:ListItem>
                                    <asp:ListItem Text="No" Value="No" style="color:red;"></asp:ListItem>
                                    <asp:ListItem Text="N/A" Value="N/A" style="color:gray;"></asp:ListItem>
                                    <asp:ListItem Value="" Text="" style="display: none" />
                                </asp:RadioButtonList>
</asp:TemplateField>
</asp:GridView> 
```

目前，当您更改单选按钮的选择时，它会`rbAnswer_SelectedIndexChanged()`在后面的代码中调用...

这背后的代码（我会缩短它）的效果是：

```
 protected void rbAnswer_SelectedIndexChanged(object sender, EventArgs e)
        {
           GridViewRow gr = (GridViewRow)((DataControlFieldCell)((RadioButtonList)sender).Parent).Parent;
            RadioButtonList rbl = (RadioButtonList)gr.FindControl("rbAnswer");

            //since the answer changed set some hidden fields as being changed...
            HtmlInputHidden hiddenFieldAnswered = (HtmlInputHidden)gr.FindControl("hdnAnswered");
            hiddenFieldAnswered.Value = "1";
            HtmlInputHidden hiddenField = (HtmlInputHidden)gr.FindControl("hdnIsChanged");
            hiddenField.Value = "1";

            Panel p;
            p = (Panel)gr.FindControl("pnlAnswer");

            switch (rbl.SelectedItem.Text)
            {
                case "No":
                    gr.Cells[0].BackColor = System.Drawing.Color.Red;
                    p.Visible = true;
                    break;
                case "Yes":
                    gr.Cells[0].BackColor = System.Drawing.Color.Green;
                    p.Visible = false;
                    break;
                case "N/A":
                    gr.Cells[0].BackColor = System.Drawing.Color.Gray;
                    p.Visible = false;
                    break;
                default:
                    gr.Cells[0].BackColor = System.Drawing.Color.Transparent;
                    p.Visible = false;
                    break;
            }
        } 
```

基本上，如果您选择一个答案，它会更改网格视图中单元格的颜色，并且它会隐藏或取消隐藏面板。这样做作为后端代码会导致应用程序出现很大延迟。我可以在 jquery 中执行此操作吗？如果是这样，我如何访问单选按钮列表、答案、面板以及更改`gr.cells[0].backcolor`jquery 中第一个单元格 ( ) 的颜色的方法？

如果我在客户端做这一切，它可能会增加最终用户的可用性，他们现在抱怨它太慢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:51:02.150

你可以试试这个。在单选按钮上附加点击事件。我尝试测试此功能，但它可能会对您有所帮助。使用 jquery 文件版本 1.7 或更高版本

在标记文件中：提供类似 的`RowStyle-CssClass`属性`GridView`

```
<asp:GridView ID="gvLineItems" runat="server" RowStyle-CssClass="row"> 
```

这将帮助您找到父行。

```
$(function(){

     var gvLineItemsRadioObjs = $('[id$=gvLineItems] input[type=radio]');
     gvLineItemsRadioObjs.on('click', function(){

         var $this = $(this);

         //var parentRow =  $this.parents('tr'); // find the parent row.
         var parentRow =  $this.parents('tr.row'); // find the parent row.

         var firstCell = parentRow.find('td:eq(0)'); //find the first cell

         var p =parentRow .find('[id$=pnlAnswer]'); // find the panel

         switch($this.val()) //check the value
         {
            case 'No':
               firstCell.css('background-color', 'red');
               p.show();
               break;
            case 'Yes':
               firstCell.css('background-color', 'green');
               p.hide();
               break;
            case 'N/A':
               firstCell.css('background-color', '');
               p.hide();
               break;
            default:
               firstCell.css('background-color', 'red');
               p.show();
               break;
         }   

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:55:42.790

每当用户单击单选按钮时进行回发会让用户感到沮丧。

你可以在 jQuery 中做这样的事情

```
$("#tableName").click(function (e) {
if(e.target.nodeName == "INPUT") {
    var radio = $(e.target);
    // Change to whatever element you want to change color
    var chgColor = radio.parent().find(":eq(0)");
    var pnlAnswer = $("#tableName #pnlAnswer");

    switch(radio.val()) {
        case "NO":
            tr.css("background-color": "#FF0000");
            pnlAnswer.show();
            break;
        case "YES":
            tr.css("background-color": "#00FF00");
            pnlAnswer.hide();
            break;  
        // ...
    }
} 
```

});

您需要检查页面生成的 html 代码，然后弄清楚如何使用 jQuery 操作它。

# node.js - 在预保存回调中确定记录是否“新”

> ID：12092772
> 
> 赞同：58
> 
> 时间：2012-08-23T13:31:49.693
> 
> 标签：node.js, mongodb, mongoose

有没有办法在猫鼬模型模式的预保存回调中找出记录是否“是新的”（尚未保存）？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-08-23T13:36:14.947

是的，[`isNew`](http://mongoosejs.com/docs/api.html#document_Document-isNew)模型实例上有一个布尔属性表明了这一点。`this.isNew`从您的预保存中间件访问它。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-11-23T14:33:41.393

```
var MySchema = new Schema({...});

MySchema.pre('save', function(next) {
    if (this.isNew) {
        // Hooray !
    }
    next();
}); 
```

# cuda - 在 CUDA 上使用新建/删除

> ID：12092775
> 
> 赞同：2
> 
> 时间：2012-08-23T13:31:57.727
> 
> 标签：cuda

我听说使用新显卡（兼容性 >= 2.0）我可以直接在内核上使用`new`和。`delete`

1.  如果我`new`在内核上使用，我会在“全局内存”中分配内存吗？
2.  `new`如果我在 GPU 中创建一个对象，该对象的生命周期是否与内核生命周期或应用程序生命周期相同？
3.  我听说`new`在内核上使用不方便。那正确吗？为什么？

**更新：** 有人可以发布一些关于此的文档的链接吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T03:43:38.090

1.  正确的
2.  作为应用程序生命周期
3.  内核中的 new 和 malloc 非常方便，但数量有限。

# java - Jetty 如何重新部署战争

> ID：12092786
> 
> 赞同：2
> 
> 时间：2012-08-23T13:32:18.437
> 
> 标签：java, jetty, war, embedded-jetty

现在我已经阅读了 Jetty 文档[http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty#Setting_a_Web_Application_Context](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty#Setting_a_Web_Application_Context)。

但是没有关于如何使用 scanInterval 热重新部署 war 文件来制作代码的信息。

如果它发生了变化，它必须重新部署war文件。

如何编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:37:00.657

对于热部署，您需要使用部署管理器和 webapp 或上下文提供程序部署 webapp。

[http://wiki.eclipse.org/Jetty/Feature/Hot_Deployment](http://wiki.eclipse.org/Jetty/Feature/Hot_Deployment)

那里显示的 xml（以及在 jetty-deploy.xml 和 jetty-webapps.xml 的分布中）可以简单地转换为 java

# c# - 为多个表单设置单个事件处理程序

> ID：12092787
> 
> 赞同：0
> 
> 时间：2012-08-23T13:32:19.817
> 
> 标签：c#, .net, winforms, events

我有一些表格，其中我有一些基本相同的事件函数

我试图实现一个“共享”类并将 Eventhandler 链接到该函数，但是当我为该函数提供必要的保护级别时，它抱怨它是非静态的，我也必须将其设为静态。

我不喜欢静态函数，所以问：有更好的方法吗？

（如果上述内容不清楚：我想这样做：[为 .NET 中的多个按钮设置单个事件处理程序？](https://stackoverflow.com/questions/4157851/set-up-single-event-handler-for-multiple-buttons-in-net)但使用多个表单而不是多个控件）

编辑：根据要求提供更多信息：

我对代码重复非常有强迫症，我的程序同时有多个活动/隐藏表单，显然我想在按下“x”时关闭整个程序：

```
class Shared
{
    public static void FormClosed(object sender, FormClosedEventArgs e)
    {
        Application.Exit();
    }

    public static void FormClosing(object sender, FormClosingEventArgs e)
    {
        if (MessageBox.Show("Are you sure you want to exit?", "Confirm exit", MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.No) {
            e.Cancel = true;
        }
    }
} 
```

非常简单的功能，我知道，但我不喜欢重复：P

上面的“公共静态”的“配置”工作正常，但我只是想知道是否有“更好的方法”（tm）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:38:13.490

如果您不想要静态类，则有 2 个简单的选项可以满足大多数偏好：

*   单身人士
*   将参数传递给表单ctor

对于单身人士：

```
class EventMangler {

   private static readonly _instance = new SomeHandler ();

   // although you don't like static methods  :(
   static EventMangler Instance {
      get { return _instance; }

   public void SomeEventHandler (object sender, EventArgs e) {
      // handle event
   }
}

// use EventMangler.Instance
public MyForm () {
   InitializeComponent();
   button1.Click += EventMangler.Instance.SomeEventHandler;
} 
```

要将参数传递给 Form 的构造函数，您有更多选择：(a) 将引用传递给处理程序的对象，或 (b) 将引用传递给处理程序本身。对于单个处理程序，我更喜欢选项 (b)。否则，如果父对象 - 例如`EventMangler`- 有多个处理程序，请使用选项 (a)：

```
// remove singleton Instance method from EventMangler
// instantiate EventMangler in Program and pass to Form ctors

// pass a single handler reference as Action
public MyForm (Action<object, EventArgs> handler) {
   InitializeComponent();
   button1.Click += handler;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:39:58.583

您可以使用静态方法，然后将处理委托给实例，然后才使用 OOP 的所有优点

```
public static void GeneralHandler(object sender, EventArgs args)
{
    instance.Handle(sender, args);
}
private static MyProcessingClass instance = new MyProcessingClass(); 
```

订阅喜欢

```
button1.Event1 += GeneralHandler;
Button1.Event2 += GeneralHandler;
Button1.Event1 += GeneralHandler; 
```

您可以进一步增强您的实现以支持依赖注入，例如在此处引入`HandlerProvider`和封装创建机制，同时仅在外部公开接口

# javascript - 如何在两个函数之间同步

> ID：12092798
> 
> 赞同：3
> 
> 时间：2012-08-23T13:32:47.813
> 
> 标签：javascript

我有两个函数要在其他函数（一和二）完成时调用第三个函数。我需要将第一个函数和第二个函数称为异步。例如

```
 var func1 = function( do something..... return arr )
  var func2 = function ( do something ..... return arr2 )

   if ( arr.length > 0  && arr2.length > 0 )
       var func3 = function( do something ) 
```

我的问题：

1.  最好的方法是什么？

2.  我如何以异步方式调用函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T13:44:37.607

如果你有 jQuery，你可以使用它们的[`Deferred`对象](http://api.jquery.com/category/deferred-object/)：

```
var func1 = function () {
    var dfd = $.Deferred();

    setTimeout(function () {
        // do your processing
        dfd.resolve(arr1);
    }, 0);

    return dfd.promise();
};
var func2 = function () {
    var dfd = $.Deferred();

    setTimeout(function () {
        // do your processing
        dfd.resolve(arr2);
    }, 0);

    return dfd.promise();
};

$.when(func1(), func2()).then(function (arr1, arr2) {
    if ( arr.length > 0  && arr2.length > 0 ) {
        func3();
    }
}); 
```

相关问题：

*   [如何使用 jQuery 延迟？](https://stackoverflow.com/questions/4869609/how-can-jquery-deferred-be-used)
*   [如何在 Javascript 中创建异步函数？](https://stackoverflow.com/questions/9516900/how-can-i-create-an-asynchronous-function-on-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:38:28.013

```
var arr1 = [], arr2 = [];

function arraysAreReady() {
     if(arr1.length && arr2.length) {
         func3();
     }
}

var func1 = function() {
    var localArray = [];
    /// create the local array
    arr1 = localArray;
    arraysAreReady();
}

var func2 = function() {
    var localArray = [];
    /// create the local array
    arr2 = localArray;
    arraysAreReady();
}

func1(); funct2(); 
```

当 func1 创建了第一个数组时，它将把它分配给全局变量 arr1 并调用 arraysAreReady() 函数。当 func2 创建第二个数组时，它将把它分配给全局变量 arr2 并调用 arraysAreReady()。

如果 2 个全局数组不为空，arraysAreReady() 函数会检查每次调用。它们不是它会调用第三个函数（func3）吗

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:44:26.967

将 func3 函数作为回调传递，并在回调内部检查两个数组是否都已填充。

```
var func1 = function(callback) ( do something; callback();..... return arr );
var func2 = function(callback) ( do something; callback(); ..... return arr2 );
var func3 = function() {
    if(arr != undefined && arr2 != undefined){  
        //do stuff
    }
};

func1(func3); 
func2(func3); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T14:07:25.190

如果您的程序逻辑合适，您可以通过进行部分处理并使用 setTimeout() 函数来模仿 javascript 中的异步行为，如下所示：

```
var result1 = []
var result1Ready = false;
var result2 = []
var result2Ready = false;

func1 = function(list, start, end) {

    if(start>=end) {
        result1Ready = true;
    }
    else {
        partialEnd = start+10>end ? end : start+10;
        for(i=start;i<partialEnd;i++) {
            //process 10 items
            //append results to array result1
        }
        //schedule second partial process
        setTimeout(function () { func1(list, partialEnd, end); }, 50);
    }
};

func2 = function(list, start, end) {
    //similar to func1...
};

waitResults = function() {

    if(result1Ready && result2Ready) {
        func3();
    }
    else {
        setTimeout(function () { waitResults(); }, 50);
    }
};

setTimeout(function () { func1(someList, 0, listLength); }, 5);
setTimeout(function () { func2(someOtherList, 0, otherListLength); }, 5);
setTimeout(function () { waitResults(); }, 10); 
```

# php - 错误时不要关闭任务

> ID：12092802
> 
> 赞同：-1
> 
> 时间：2012-08-23T13:32:59.927
> 
> 标签：php, windows, scheduled-tasks

我正在使用 Windows 任务调度程序运行 php.exe。问题是我不希望它（windows taskeng.exe）在错误时关闭。

```
C:\Program Files (x86)\Php\php.exe -f C:\filename.php 
```

我在这里寻找它 [http://www.php.net/manual/en/features.commandline.options.php](http://www.php.net/manual/en/features.commandline.options.php)

但没有运气..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:35:20.900

您看到的问题是 PHP 错误不是 Windows 调度程序的问题。

您要做的是在脚本中写入一些日志记录，以便在出现错误时将其附加到日志/错误文件中。

如果脚本中有错误，PHP 会将其视为错误，但 windows 调度程序会愉快地继续执行，直到脚本输出结束。

您*无法*让 Windows 调度程序在 PHP 错误时*停止。*Windows 调度程序只是运行代码并将错误输出到`cmd`窗口中，该窗口仍然继续，直到收到最后一个输出 - 无论是否是错误消息。您必须在代码中捕获 PHP 错误（然后登录到数据库或日志文件），因为 Windows Schdeuler 将在 PHP 输出停止的那一刻成功完成。

# sencha-touch-2 - 未捕获的错误：[Ext.createByAlias] 无法创建无法识别的别名的实例：widget.blogpanel

> ID：12092803
> 
> 赞同：0
> 
> 时间：2012-08-23T13:33:00.150
> 
> 标签：sencha-touch-2

我是sencha touch 2的新手。当我按照教程中的说明创建博客视图后尝试实例化时。出现此错误“未捕获的错误：[Ext.createByAlias]无法创建无法识别的别名的实例：widget.blogpanel” ;

blog.js 的代码如下：

```
 Ext.define('GS.view.blog',{
    extend:'Ext.navigation.View', `xtype: 'blog',

config:{
    title: 'Blog',
    iconCls: 'star',

    items:
    {
        xtype:'list',
        itemTpl:'{title}',
        store:
        {   
            autoLoad: true,
            fields:['title','author','content'],

            proxy:
            {
                type:'jsonp',
                url: 'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&q=http://feeds.feedburner.com/SenchaBlog',

                reader:
                {
                    type:'json',
                    rootProperty:'responseData.feed.entries',
                }
            }
        }
    }
}` 

});

            回答 #1

赞同：1

时间：2012-09-01T03:52:47.733

您需要检查 Ext.application.views 以查看您的类是否已添加

            回答 #2

赞同：-1

时间：2014-04-16T02:03:13.220

这是相对于这个[Uncaught Error: [Ext.createByAlias] Cannot create an instance of unrecognized alias: widget](https://stackoverflow.com/questions/10762338/uncaught-error-ext-createbyalias-cannot-create-an-instance-of-unrecognized-al)。

您需要检查 Ext.Application 的“views”数组

```

# sharepoint - SPD 2007 自定义工作流程发送重复的电子邮件

> ID：12092807
> 
> 赞同：0
> 
> 时间：2012-08-23T13:33:09.560
> 
> 标签：sharepoint, sharepoint-designer

希望您能提供帮助：

我们在 SPD 中构建了一个相当简单的自定义工作流，它连接到自定义列表。在列表中有一个状态列，带有一个下拉选项，其中一个值为“完成”。

对于工作流程启动选项，我们同时选择了：-“创建新项目时”和 - 每当更改项目时。

我们通过两个步骤构建了工作流程：

**第 1 步**：

（条件）：当一个新项目被创建时，（动作）发送一封电子邮件到“创建者”（一个“谢谢你的提交......”）

**第 2 步**：（条件 - 查找）当“状态”列等于“完成”时（操作）向“创建者”/创建项目的用户发送电子邮件（“您的订单已完成......”）。

好消息是，在测试中，当我们将状态字段更新为“完成”时，我们会在创建新项目时收到“谢谢”电子邮件，也会收到“订单完成”电子邮件。坏消息是，如果我们在将记录标记为“完成”（“保留”等）之前使用其他状态值更新记录，那么第一封“感谢您的提交”电子邮件将再次发送给“创建者”用户。您可以猜到，他们应该在整个过程中总共只收到两封电子邮件。

这可能是因为启动选项也设置为“更改”，即使我们指定了更改的参数？也许这两个步骤需要定义为两个独立的工作流程？看起来足够简单和具体，它们可以包含在同一个工作流程中。

感谢任何反馈，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:10:22.103

您是正确的，因为您的电子邮件可能会再次发送，因为您在创建和更改时都有工作流触发器。您可以隔离创建事件的方法是仅在项目的“创建”日期与“修改”日期相同时有条件地发送该电子邮件。这只会在您最初创建项目时发生。这将使您不必创建 2 个单独的工作流程。

# facebook - 获取 facebook 访问令牌无效

> ID：12092809
> 
> 赞同：-1
> 
> 时间：2012-08-23T13:33:13.110
> 
> 标签：facebook, url, facebook-access-token

我可以通过点击从这个链接获取访问令牌:)

> [http://developers.facebook.com/tools/explorer](http://developers.facebook.com/tools/explorer)

我检索的访问令牌很长，它适用于

> graph.facebook.com/me/permissions?access_token

和其他图形api

但是当我使用此 URL 获取访问令牌时，它非常短且不起作用

> [https://graph.facebook.com/oauth/access_tokenclient_id=MYID&redirect_uri=http%3A%2F%2Fbenbiddington.wordpress.com&client_secret=MYSECID&grant_type=client_credentials&scope=read_stream,manage_friendlists,read_mailbox,read_page_mailboxes](https://graph.facebook.com/oauth/access_tokenclient_id=MYID&redirect_uri=http%3A%2F%2Fbenbiddington.wordpress.com&client_secret=MYSECID&grant_type=client_credentials&scope=read_stream,manage_friendlists,read_mailbox,read_page_mailboxes)

它不起作用并返回

> { "error": { "type": "QueryParseException", "message": "必须使用活动访问令牌来查询有关当前用户的信息。" } }

但在某些情况下它是否有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:41:23.470

这是一个 VB.NET 示例 - 但我一直使用它获取用户的访问令牌，并且从未收到您显示的响应 - 所以这可能会有所帮助吗？

```
 Public Class FacebookAuthorization

    Private Shared Property BaseURL As String = "https://graph.facebook.com/oauth/authorize"

    Public Shared Function GetAuthUrl(ByVal appID As String, ByVal redirectUrl As String, ByVal permissions As String) As String

        Return String.Format("{0}?client_id={1}&redirect_uri={2}&type=user_agent&scope={3}", BaseURL, appID, redirectUrl, permissions)

    End Function

End Class 
```

编辑：

你从这个请求中得到的 access_token 可以这样使用：

[https://graph.facebook.com/me/feed?access_token=XXXXXX](https://graph.facebook.com/me/feed?access_token=XXXXXX) - 给你他们的墙/时间线

[https://graph.facebook.com/me/home?access_token=XXXXXX](https://graph.facebook.com/me/home?access_token=XXXXXX) - 给你他们的新闻提要

# c - 如何比较C中的字符串命令行参数？

> ID：12092815
> 
> 赞同：4
> 
> 时间：2012-08-23T13:33:37.750
> 
> 标签：c, pointers, command-line-arguments, string-comparison

*抱歉，我是 C 语言的新手。如果将--help*参数输入到终端中，我要做的只是打印一些东西，例如`./program --help`. 所以代码是这样的：

```
char *HELP = "--help";
char *argv1 = argv[1];

if (argv1 == HELP) {
    printf("argv[1] result isaa %s\n", argv[1]);
} 
```

因此，即使我使用 --help 参数，它也不会通过 if 条件。那么这背后的原因可能是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-23T13:34:48.973

这不是您在 C 中比较字符串的方式。使用`strcmp`or `strncmp`：

```
if (strcmp(argv1, HELP) == 0) 
```

包括`string.h`以访问这些内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T13:35:06.743

那是比较地址，而不是内容。使用[`strcmp()`](http://en.cppreference.com/w/c/string/byte/strcmp)：

```
if (0 == strcmp(HELP, argv1))
{
    printf("argv[1] result isaa %s\n", argv[1]);
} 
```

`argc > 1`在访问`argv[1]`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T13:36:13.193

在 C 中，没有字符串类型。你已经声明`char *HELP`了，所以 HELP 是一个`char *`，而不是一个字符串。在 if 中，您正在比较两个指针，而不是它们指向的字符串。您将需要调用`strcmp`(string compare)，这是一个接收两个`char *`并比较它们指向的字符串的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T13:37:59.070

你应该使用 strcmp。

```
result=strcmp(argv1,HELP);
if(result==0)
{
    --what you want
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T13:51:09.607

`char *HELP = "--help";`- 这`--help`是一个字符串文字，它是文本段中的只读数据。您只是将地址分配给指针变量`HELP`。

`argv[1] 将为您提供存储第一个命令行参数的地址。

所以`argv[1]`和`HELP`有不同的地址。所以条件`(argv[1] == HELP)`只是检查存储在这两个指针变量中的地址。这总是会失败的。

实际上你必须比较这两个先驱者的内容。为此，您可以实施字符串比较逻辑或使用该`strcmp`函数。

```
if (0 == strcmp(argv[1], HELP)
{
    //do your stuff
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-25T00:57:18.780

我有同样的问题。我的问题通过使用解决了`strncmp`。
`strcmp`无论如何都不适用于我的问题

```
#include <string.h>

    if (strncmp(argv1, HELP,6) == 0) //6 is size of argument
    {
    //do smt
    } 
```

# java - Itext PDF表格单元格的数据不在第二页上

> ID：12092818
> 
> 赞同：1
> 
> 时间：2012-08-23T13:33:43.333
> 
> 标签：java, itext

我正在使用 pdfptable 进行打印。单元格，当表格到达页面末尾并且任何携带更多数据且具有相同单元格延续的单元格不会进入下一页时，实际上它正在截断单元格的数据。我在代码中使用单个表来打印数据

有可能解决这个问题吗？

# sql - SQL Server 2008 脚本向导未创建数据库

> ID：12092823
> 
> 赞同：1
> 
> 时间：2012-08-23T13:33:56.210
> 
> 标签：sql, sql-server-2008

我想使用 SQL Server 2008 中的脚本向导来生成整个数据库的副本

它似乎以前工作过，因为我生成了包括`CREATE DATABASE`and`CREATE TABLE`语句的脚本，但现在我只得到`CREATE TABLE`脚本。

我知道我可以单独编写创建数据库的脚本并将语句链接在一起，但是我是否错过了自动包含`CREATE DATABASE`脚本的选项？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:51:55.177

如果您在向导中选择“**脚本整个数据库和所有数据库对象”选项。**数据库创建是脚本的一部分。在高级部分中，我没有看到排除数据库创建的选项。但是您可以在那里配置许多其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-10T06:43:49.393

I know its very late to respond to this question. I faced this issue recently. There is an option in the advanced section "Script Database Create" which will be false by default. Make it as true and it will add create database script also. Thank you.

# android - 直接启动Android的联系人聚合建议屏幕

> ID：12092829
> 
> 赞同：2
> 
> 时间：2012-08-23T13:34:13.553
> 
> 标签：android, android-activity, android-contacts

我的应用程序显示了一个联系人列表，我已经（在代码中）验证了每个联系人至少有一个聚合建议。一旦用户点击这些联系人之一，我想打开内置的活动/屏幕，询问用户他想加入所选联系人的联系人。

部分基于[此示例](http://developer.android.com/reference/android/provider/ContactsContract.Contacts.AggregationSuggestions.html)，我尝试运行此代码：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) 
{

    ContactInfo selectedValue = (ContactInfo) getListAdapter().getItem(position);

    /*Should give URI for Aggregation suggestion*/
    Uri uri = Contacts.CONTENT_URI.buildUpon()
       .appendEncodedPath(String.valueOf(selectedValue.getId()))
       .appendPath(Contacts.AggregationSuggestions.CONTENT_DIRECTORY)
       .appendQueryParameter("limit", "3")
       .build();

    /*Opens Activity*/
    Intent openContactDetailsIntent = new Intent(Intent.ACTION_VIEW);
    openContactDetailsIntent.setData(uri);
    startActivity(openContactDetailsIntent);
} 
```

然而，所发生的只是一个通用联系人屏幕正在打开，其中包含所有联系人的列表 - 而不是仅建议的联系人。

这甚至可能吗？我是否将正确的论点传递给正确的活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:04:51.433

你显然需要使用[`ContactsContract.AggregationExceptions`](http://developer.android.com/reference/android/provider/ContactsContract.AggregationExceptions.html)类。

# sql - 当我们使用以下字符串时会产生错误，请帮我解决

> ID：12092831
> 
> 赞同：-1
> 
> 时间：2012-08-23T13:34:13.437
> 
> 标签：sql

```
selectString = @"SELECT StudentRegistrationInformation.registrationNo,
                        StudentRegistrationInformation.firstName,
                        StudentRegistrationInformation.lastName,
                        StudentPayment.subjectName,
                        sum(StudentPayment.feeReceived) AS totalReceivedFee
                 FROM StudentRegistrationInformation
                 INNER JOIN StudentPayment 
                     ON StudentPayment.registrationNo =
                            StudentRegistrationInformation.registrationNo"; 
```

错误：

> *列“StudentRegistrationInformation.registrationNo”在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:35:45.010

您在查询中使用聚合函数。因此，您的查询需要知道如何对其余结果进行分组。就像在查询末尾添加以下内容一样简单：

```
GROUP BY StudentRegistrationInformation.registrationNo,
         StudentRegistrationInformation.firstName,
         StudentRegistrationInformation.lastName,
         StudentPayment.subjectName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:37:27.317

因为您使用的是聚合函数“sum”，所以需要添加

```
GROUP BY StudentRegistrationInformation.registrationNo,
         StudentRegistrationInformation.firstName,
         StudentRegistrationInformation.lastName,
         StudentPayment.subjectName 
```

到您的 SQL 字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:35:38.107

您必须在查询的末尾添加 GroupBy 在没有聚合函数的选择中的 clumns

```
SELECT StudentRegistrationInformation.registrationNo,
                                            StudentRegistrationInformation.firstName,
                                            StudentRegistrationInformation.lastName,
                                            StudentPayment.subjectName,
                                            sum(StudentPayment.feeReceived) AS        totalReceivedFee
                                       FROM StudentRegistrationInformation
                                            INNER JOIN StudentPayment ON
                                            StudentPayment.registrationNo=StudentRegistrationInformation.registrationNo

GROUP BY tudentRegistrationInformation.registrationNo,
                                            StudentRegistrationInformation.firstName,
                                            StudentRegistrationInformation.lastName,
                                            StudentPayment.subjectName 
```

# excel - excel条件格式公式问题

> ID：12092837
> 
> 赞同：0
> 
> 时间：2012-08-23T13:34:34.687
> 
> 标签：excel, conditional-formatting

我有以下公式

```
=AND(A1="USA",I6=0) 
```

它适用于`=$I$6:$I$100` 我希望与 A1 的比较保持不变，并且 I6 到 I100 应始终与 A1 比较。

就目前而言，A1 用于在 I6 上进行比较，而 A2 而不是 A1 用于对 I7 进行条件格式化。

有人可以帮我弄这个吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:39:43.220

您是否将格式应用于单元格的列？

尝试使用格式粘贴工具将格式复制到范围范围。

您是否检查过其他单元格的条件是否为真？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:52:24.550

这个做到了

=AND($A$1="USA",$I6="") 范围 =$I$6:$I$10000

# r - 尝试使用 gplots 中的 venn() 将维恩图输出到 png 文件时出现奇怪的 png 图片

> ID：12092842
> 
> 赞同：1
> 
> 时间：2012-08-23T13:34:41.447
> 
> 标签：r, png, venn-diagram

我想将我的维恩图作为 png 文件。以下是不输出到文件时的外观：

```
library(gplots)
> x <- c("X","B")
> v <- c("X","A")
venn(list(x,v)) 
```

然后我得到这个：[http://postimage.org/image/d3nbyrp5f/277b50b3/](http://postimage.org/image/d3nbyrp5f/277b50b3/) ，看起来不错。

但是这样做：

```
library(gplots)
> x <- c("X","B")
> v <- c("X","A")
> png(filename="test10.png")
> venn(list(x,v))
> dev.off() 
```

给出了这个： http: [//postimage.org/image/tpdywxxrp/a148b2db/](http://postimage.org/image/tpdywxxrp/a148b2db/)，你可以看到png文件没有显示正确的维恩图，圆圈重叠，所以一个圆圈在另一个上面......

有什么办法可以克服这种奇怪的行为？

编辑：

通过加载 cairoDevice 解决：

```
library(cairoDevice) 
```

然后使用：

```
Cairo_png(filename="test.png") 
```

使用 venn() 正确输出维恩图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:50:59.713

这可能是透明度的问题，您可以使用不同的维恩图工具，或者使用支持透明度的图形设备，我相信 Cairo 设备允许您创建 png 文件并尊重透明度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T14:01:48.540

您必须将`bg`参数（在`png`函数中）设置为`NA`（透明），默认背景为白色。

```
library(gplots)
x <- c("X","B")
v <- c("X","A")
png("bgNA.png", bg = NA)
venn(list(x,v))
dev.off() 
```

![在此处输入图像描述](../Images/ff9885eaa113ce33a2310a10ad272730.png)

# java - 如何替换 Android 操作系统的默认日历？

> ID：12092843
> 
> 赞同：8
> 
> 时间：2012-08-23T13:34:43.473
> 
> 标签：java, android, calendar

是否有任何官方或非官方 API 或黑客可以将 Android OS 的默认日历（格鲁吉亚日历）替换为另一个日历（我自己的日历）？如果您不熟悉它们，您可以在[这里](http://en.wikipedia.org/wiki/Category%3aSpecific_calendars)查看世界各地的日历列表。

我可以重写[DateFormat](http://developer.android.com/reference/java/text/DateFormat.html)或[GregorianCalendar](http://developer.android.com/reference/java/util/GregorianCalendar.html)或[Calendar.getInstance()](http://developer.android.com/reference/java/util/Calendar.html#getInstance%28%29)吗？

*（在编辑中添加）*它会完全覆盖公历的使用，例如在 Android 锁屏上吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T13:43:17.253

`Calendar.getInstance()`不是Android API。它是标准的 Java API。使用默认时区和语言环境`Calendar.getInstance()`调用。`createCalendar()`有`getInstance()`接受时区、语言环境和两者的工厂方法。这是影响创建日历的方式。

例如，据我所知，发送日语语言环境会导致创建`JapaneseImperialCalendar`.

编辑

有几个预定义的日历：`BuddistCalendar`和日文日历。并且显然是默认`GregorianCalendar`的。您可以使用添加自己的“扩展” `Locale.setExtension(char key, String value)`。我从来没有做过，但它应该可以工作。但是，您应该自己深入研究代码以找出正确的参数。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:43:16.317

好吧，这是不可能的。我最初担心的是锁屏日历现在似乎可以在 Android 4.2 上为另一种日历类型放置一个新的小部件，所以我已经失去了寻找这个问题的解决方案的兴趣（虽然我认为它必须以某种方式...... ）！

现在我认为唯一真正的解决方案是修补 AOSP 本身以在 GUI 中使用当然与这个问题无关的其他日历。

**编辑：**

[Xposed框架](https://github.com/rovo89/XposedBridge/wiki/Development-tutorial)是我实现的梦想！从理论上讲，它可以用你想要的任何东西替换 Android 框架上的任何方法。[但目前它与 Android 4.4不](http://forum.xda-developers.com/showthread.php?p=47771876)兼容（[快照为 2013](http://archive.is/LVdYK)年 11 月 28 日），我希望尽快修复。

# c# - 从隔离存储中创建的目录中读取文件

> ID：12092845
> 
> 赞同：0
> 
> 时间：2012-08-23T13:34:44.910
> 
> 标签：c#, windows-phone-7, isolatedstorage

我正在尝试读取隔离存储中已创建目录中的写入文件。该文件实际上正在创建中。但是当它被读取时，会出现一个异常“IsolatedStorageFileStream 上不允许操作。”...

```
using (IsolatedStorageFile storage = IsolatedStorageFile.GetUserStoreForApplication())
{
    if (!storage.DirectoryExists("CourseworkDirectory"))
        storage.CreateDirectory("CourseworkDirectory");

    XElement Coursework = new XElement(CourseworkID);
    XDocument  _doc = new XDocument(new XDeclaration("1.0", "utf-8", "yes"), Coursework);
    IsolatedStorageFileStream location = new IsolatedStorageFileStream("CourseworkDirectory\\"+CourseworkID, System.IO.FileMode.Create, storage);
    StreamWriter file = new StreamWriter(location);  

    _doc.Save(file);//saving the XML document as the file
    file.Close();
    file.Dispose();//disposing the file
    location.Dispose();
} 
```

读取文件....

```
using (IsolatedStorageFile storage = IsolatedStorageFile.GetUserStoreForApplication())
{
    string searchpath = System.IO.Path.Combine("CourseworkDirectory", "*.*");

    foreach (string filename in storage.GetFileNames(searchpath))
    {
        XElement _xml;
        IsolatedStorageFileStream location = new IsolatedStorageFileStream(filename, System.IO.FileMode.Open, storage); 
```

它实际上正在获取文件名，但此时有一个例外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:05:42.757

您可以通过这样做来实现这一点——

```
using (IsolatedStorageFile storage = IsolatedStorageFile.GetUserStoreForApplication())
{
   IsolatedStorageFileStream fileStream = storage.OpenFile(app.getSettingsPath,FileMode.Open, FileAccess.Read);
   using (StreamReader reader = new StreamReader(fileStream ))
   {
      string line;
      while((line = reader.ReadLine()) != null)
      {
         // do your work here
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T03:58:20.467

试试这个，它对我有用：希望它也对你有用

```
 String sb;

        using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (myIsolatedStorage.FileExists(fileName))
            {
                StreamReader reader = new StreamReader(new IsolatedStorageFileStream(fileName, FileMode.Open, myIsolatedStorage));

                sb = reader.ReadToEnd();

                reader.Close();
            }

            if(!String.IsNullOrEmpty(sb))
            {
                 MessageBox.Show(sb);
            }
        } 
```

如果这不起作用，那么您的文件可能不存在。

# php - PHP将数据从子窗口传递到父窗口

> ID：12092851
> 
> 赞同：1
> 
> 时间：2012-08-23T13:35:02.470
> 
> 标签：php, javascript, netbeans, window, parent

大家好，我是 php 新手，想知道是否可以通过包含数据库数据的表从子窗口传递数据，并在选择哪些数据时将值回显到父窗口的文本区域在子窗口中使用复选框。如果有人能提供一些帮助，我将不胜感激。下面是代码。谢谢。

子窗口：

```
<head>
    <!-- CSS goes in the document HEAD or added to your external stylesheet -->
<!-- CSS goes in the document HEAD or added to your external stylesheet -->
<style type="text/css">
table.hovertable {
    font-family: verdana,arial,sans-serif;
    font-size:11px;
    color:#333333;
    border-width: 1px;
    border-color: #999999;
    border-collapse: collapse;
}
table.hovertable th {
    background-color:#c3dde0;
    border-width: 1px;
    padding: 8px;
    border-style: solid;
    border-color: #a9c6c9;
}
table.hovertable tr {
    background-color:#d4e3e5;
}
table.hovertable td {
    border-width: 1px;
    padding: 8px;
    border-style: solid;
    border-color: #a9c6c9;
}
</style>

<!-- Table goes in the document BODY -->

</head>
<body>
        <form action="retrievemath.php" method="post">
<table class="hovertable">
<tr>
    <th>Insert ?</th><th>Expression Name</th><th>Math Expression</th>
</tr>
<tr onmouseover="this.style.backgroundColor='#ffff66';" onmouseout="this.style.backgroundColor='#d4e3e5';">

</tr>

    <?php
               while($row = mysql_fetch_assoc($queryResource))
               {     
    ?>

                    <tr> 
                    <td><input type="radio" name="insert" id="<?php echo $row['mathID']?>" value="<?php echo $row['expressionname']?>" /> </td> 
                    <td><?php echo $row['expressionname']; ?></td>
                    <td><?php echo $row['mathexpression']; ?></td> 
                    </tr>

    <?php
               }
    ?>

</table>

    <div class="submit">
     <input type="hidden" name="formsubmitted" value="TRUE" />
      <input type="submit" value="Insert" />
    </div>
        </form>
</body>
<?php 
if (isset($_POST['formsubmitted'])) {
    echo $_POST['insert'];
}
?> 
```

父窗口：

```
<head>
<script type="text/javascript">
<!--
function myPopup2() {
window.open( "retrievemath.php", "myWindow", 
"status = 1, height = 300, width = 300, resizable = 0" )
}
//-->
</script>
<script src="ckeditor/ckeditor.js"></script>

</head>
<body>
    <textarea class="ckeditor" cols="80" id="editor1" name="editor1" rows="10" ></textarea>
<form>
<input type="button" onClick="myPopup2()" value="POP2!">
</form>
<p onClick="myPopup2()">CLICK ME TOO!</p>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:43:06.223

您的父窗口可以通过“window.opener”访问[这](https://stackoverflow.com/a/11416809/82460)是一个示例，您可以如何将数据从子窗口发送到父窗口。

# tfs - 如何以编程方式合并 TFS 更改集？

> ID：12092854
> 
> 赞同：7
> 
> 时间：2012-08-23T13:35:07.577
> 
> 标签：tfs, merge, changeset

我知道如何使用命令行命令“tf merge”合并 TFS 2010 中的更改集。

有没有办法可以在 C# 中使用代码执行此操作。我只想合并特定的变更集（樱桃挑选），一次一个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T13:57:25.100

如果您使用的是 2010 或 2012 TFS 对象模型，这大致就是您的做法。如果您有任何问题，请告诉我。

```
// Get a reference to yourTeam Foundation Server. 
TfsTeamProjectCollection tpc = new TfsTeamProjectCollection(new Uri("http://<yourserver>:8080/tfs/<yourcollection> "));

// Get a reference to Version Control. 
VersionControlServer versionControl = tpc.GetService<VersionControlServer>();

Workspace workspace = versionControl.GetWorkspace("<local path to your workspace>");

string sourceBranch = "$/<sourceBranch>";
string targetBranch = "$/<targetBranch>";
VersionSpec changesetToMerge = new ChangesetVersionSpec(<your changeset here>);

// actually pend the merge
workspace.Merge(sourceBranch, targetBranch, changesetToMerge, changesetToMerge);

// check in the merge
workspace.CheckIn(workspace.GetPendingChanges(), "your comment"); 
```

# c++ - 内在数组访问比 std::vector 访问快得多——黑魔法？

> ID：12092855
> 
> 赞同：6
> 
> 时间：2012-08-23T13:35:10.927
> 
> 标签：c++, arrays, vector, iterator, intel

我已经建立了一个测试程序来比较数组访问性能和 std::vector 的性能。我发现了几个类似的问题，但似乎都没有解决我的具体问题。当我过去读到它们应该是等效的时，我一直在为为什么数组访问似乎比向量访问快 6 倍而摸不着头脑。事实证明，这似乎是英特尔编译器 (v12) 和优化的一个功能（发生在 -O1 以上的任何情况下），因为我在使用 gcc v4.1.2 时看到 std::vector 的性能更好，而数组*只有*gcc v4.4.4 的 2 倍优势。我在具有 Xeon X5355 内核的 RHEL 5.8 机器上运行测试。顺便说一句，我发现迭代器比元素访问更快。

我正在使用以下命令进行编译：

```
icpc -fast test.cc
g++44 -O3 test.cc 
```

谁能解释速度的显着提高？

```
#include <vector>
#include <iostream>

using namespace std;

int main() {
  int sz = 100;
  clock_t start,stop;
  int ncycle=1000;
  float temp  = 1.1;

  // Set up and initialize vector
  vector< vector< vector<float> > > A(sz, vector< vector<float> >(sz,  vector<float>(sz, 1.0)));

  // Set up and initialize array
  float*** a = new float**[sz];
  for( int i=0; i<sz; ++i) {
    a[i] = new float*[sz];
    for( int j=0; j<sz; ++j) {
      a[i][j] = new float[sz]();
      for( int k=0; k<sz; ++k)
        a[i][j][k] = 1.0;
    }
  }

  // Time the array
  start = clock();
  for( int n=0; n<ncycle; ++n )
    for( int i=0; i<sz; ++i )
      for( int j=0; j<sz; ++j )
        for( int k=0; k<sz; ++k )
          a[i][j][k] *= temp;

  stop = clock();
  std::cout << "STD ARRAY: " << double((stop - start)) / CLOCKS_PER_SEC << " seconds"     << std::endl;

  // Time the vector
      start = clock();
  /*
  */
  for( int n=0; n < ncycle; ++n )
    for (vector<vector<vector<float> > >::iterator it1 = A.begin(); it1 != A.end();     ++it1)
      for (vector<vector<float> >::iterator it2 = it1->begin(); it2 != it1->end();     ++it2)
        for (vector<float>::iterator it3 =it2->begin(); it3 != it2->end(); ++it3)
          *it3 *= temp;
  /*
     for( int n=0; n < ncycle; ++n )
       for( int i=0; i < sz; ++i )
         for( int j=0; j < sz; ++j )
           for( int k=0; k < sz; ++k )
             A[i][j][k] *= temp;
  */

  stop = clock();
  std::cout << "VECTOR: " << double((stop - start)) / CLOCKS_PER_SEC << " seconds" <<     std::endl;

  for( int i=0; i<100; ++i) {
    for( int j=0; j<100; ++j)
      delete[] a[i][j];
  }
  for( int i=0; i<100; ++i) {
    delete[] a[i];
  }
  delete[] a;
  return 0;
} 
```

**解决了**

在注意到 Bo 表示编译器“了解所有循环”并因此可以比向量情况更优化它之后，我用调用“rand()”的乘法替换了乘法“temp”。这拉平了竞争环境，实际上似乎使 std::vector 略有领先。各种场景的时序如下：

```
ARRAY (flat): 111.15 seconds
ARRAY (flat): 0.011115 seconds per cycle
ARRAY (3d): 111.73 seconds
ARRAY (3d): 0.011173 seconds per cycle
VECTOR (flat): 110.51 seconds
VECTOR (flat): 0.011051 seconds per cycle
VECTOR (3d): 118.05 seconds
VECTOR (3d): 0.011805 seconds per cycle
VECTOR (flat iterator): 108.55 seconds
VECTOR (flat iterator): 0.010855 seconds per cycle
VECTOR (3d iterator): 111.93 seconds
VECTOR (3d iterator): 0.011193 seconds per cycle 
```

要点似乎是向量与数组一样快，并且在展平（连续内存）并与迭代器一起使用时稍快。我的实验平均只进行了超过 10,000 次迭代，因此可以说这些都是大致相同的，应该由最容易使用的那个来决定使用哪个；就我而言，这将是“3d 迭代器”的情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T15:14:28.160

这里没有黑魔法，编译器很容易在这里看到

```
for( int n=0; n<ncycle; ++n )
   for( int i=0; i<sz; ++i )
     for( int j=0; j<sz; ++j )
       for( int k=0; k<sz; ++k )
          a[i][j][k] *= temp; 
```

在编译时一切都是已知的。它可以轻松展开循环以加快速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T07:03:28.367

数组只是一个指向内存区域的指针。你不能比这更直接。

向量需要调用内联函数来做同样的事情。这可能会或不会真正内联。因为 inline 和 __forceinline 只是编译器内联代码的指南。反过来，编译器可以自由地做它想做的任何事情。

此外，迭代器不一定是指针。编译器正在调用一个内联函数，该函数可能是内联的，也可能不是内联的。（同样，内联是对编译器的指导，而不是规则）。

有疑问时。编译为汇编并查看生成的代码。如果编译器正在完成它的工作，那么应该没有明显的差异。但是，如果编译器没有内联应该内联的内容，那么使用向量而不是数组会大大降低编译器的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T10:06:48.173

嵌套数组中的所有元素都位于连续的内存位置，因此当编译器遇到该形式的表达式时，`a[x][y][z]`它会生成*计算*实际索引的代码，其中仅涉及整数乘法和加法。`std::vector`另一方面，嵌套实际上是嵌套的。对于表达式`v[x][y][z]`，涉及另外两个级别的间接，因为`v[x]`实际上存在一个`std::vector`对象，其中包含指向向量数组的指针，而向量数组又包含真实数据。

# xml - 遍历所有子目录以查找 XML 文件 - Perl

> ID：12092856
> 
> 赞同：1
> 
> 时间：2012-08-23T13:35:11.190
> 
> 标签：xml, perl

我正在尝试实现一个过程，该过程遍历目录中的所有`subdirectories`内容，在.`root``.xml``Perl`

```
sub getXMLFiles {

    my $current_dir = $_[ 0 ];
    opendir my $dir, $current_dir or die "Cannot open directory: $!\n";
    my @files = grep /\.xml$/i, readdir $dir;
    closedir $dir;

    return @files;
}

sub iterateDir {
    my $current_dir = $_[ 0 ];
    finddepth( \&wanted, $current_dir );
    sub wanted{ print getXMLFiles }
}
#########################################################
#                                                       #
# define the main subroutine.                           #
# first, it figures from where it is being ran          #
# then recursively iterates over all the subdirectories #
# looking for .xml files to be reformatted              #
#                                                       #
#########################################################
sub main(){
    #
    # get the current directory in which is the 
    # program running on
    #
    my $current_dir = getcwd;
    iterateDir( $current_dir );
}

#########################################################
#                                                       #
# call the main function of the program                 #
#                                                       #
#########################################################
main(); 
```

我不是很熟悉`Perl`。该`sub iterateDir`过程应该遍历子目录，而`getXMLFiles`将过滤`.xml`文件并返回它们。我会使用这些`.xml`文件进行解析。这就是为什么我试图`.xml`从一个`root`目录中找到所有文件。但是，我不知道如何使用`sub wanted`里面的程序`iterateDir`发送`dirpath`to `getXMLFiles`。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:44:41.023

`$File::Find::dir`是当前目录名。您可以在 sub 中使用该变量`wanted`并将其传递给您调用的 subs。[有关所需功能](http://search.cpan.org/~rjbs/perl-5.16.1/lib/File/Find.pm#The_wanted_function)的更多信息，请参阅文档

这应该有效：

```
sub iterateDir {
    my $current_dir = $_[ 0 ];
    finddepth( \&wanted, $current_dir );
    #                                    |
    # pass current dir to getXMLFiles    V
    sub wanted{ print getXMLFiles($File::Find::dir) }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:50:31.687

其他方式...

```
use warnings;
use strict;
use File::Find;
use Cwd;

my $current_dir = getcwd();
my @files;
find(
    {
        wanted => sub { push @files, $_ if -f $_ and /\.xml$/i },
        no_chdir => 1,
    },
    $current_dir
); 
```

# ios - glReadPixel 停止使用 iOS6 Beta

> ID：12092865
> 
> 赞同：4
> 
> 时间：2012-08-23T13:35:34.593
> 
> 标签：ios, cocos2d-iphone, beta, ios6, glreadpixels

> **可能重复：**
> [为什么 glReadPixels() 在 iOS 6.0 中的此代码中失败？](https://stackoverflow.com/questions/12528365/why-is-glreadpixels-failing-in-this-code-in-ios-6-0)

我目前在 Appstore 中有一个使用 Cocos2D 框架的应用程序。对于碰撞检测，我使用 glReadPixels。屏幕只有白色和黑色像素，检测到黑色像素意味着碰撞。在 iOS 5.1.1 之前一切正常，但在 iOS6 Beta（全部）中 glReadPixels 停止工作。现在 glReadPixels 返回的 RGB 值始终为 0,0,0。

有谁知道出了什么问题或如何解决？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T23:51:16.193

在 EAGLView.m 上更改此设置为我运行！

```
- (id)initWithCoder:(NSCoder*)coder {

   self = [super initWithCoder:coder];
   if (self) {
        CAEAGLLayer *eaglLayer = (CAEAGLLayer *)self.layer;

        eaglLayer.opaque = TRUE;
        eaglLayer.drawableProperties = [NSDictionary dictionaryWithObjectsAndKeys:
                                        [NSNumber numberWithBool:YES],
                                        kEAGLDrawablePropertyRetainedBacking,
                                        kEAGLColorFormatRGBA8, kEAGLDrawablePropertyColorFormat,
                                        nil];
        // YES
        self.contentScaleFactor = [UIScreen mainScreen].scale;
    }

    return self;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T22:50:49.523

感谢苹果私人名单的建议——我在那里找到了解决该问题的方法。

在 Cocos2D 类“EAGLView.m”中，我在 init 方法中将“preserveBackbuffer”变量设置为“YES”。它现在也可以在 iOS 6 Beta 中再次使用。

# javascript - 如何在jquery中使用下拉菜单插入textarea内容

> ID：12092870
> 
> 赞同：2
> 
> 时间：2012-08-23T13:35:37.623
> 
> 标签：javascript, jquery, html

我是 jquery 的新手，有一个问题....也许你可以帮忙...

```
<select name="prodName[]" class="select-head" id="prodName0">
  <option value="">Select Product</option>
  <option value="add_prod">Add New</option>
 <-- Here i have db select query --><option value=" "></option></select> 
```

我的jQuery作为

```
 $(".select-head").live('change',function() { 
      if($(this).val() != "") { 
          $(this).next().val($(this).val()); 
      }
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:43:52.200

```
 $(".select-head").on('change',function () { 
     var selText = $(this).find('option:selected').text(); //.val() for value
     $('.textarea').val(selText);           
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T08:22:00.250

```
 $(".select-head").live('change',function () {
       if($(this).val() == "add_prod") { 
          var price=$(this).find('option:selected').attr('role');
          $(this).parent().parent().find('#num').val(price);
       }
  } 
```

# c++ - 将对象显式类型转换为 int *

> ID：12092873
> 
> 赞同：5
> 
> 时间：2012-08-23T13:35:52.067
> 
> 标签：c++

以下 c++ 代码的输出是什么？

```
#include<iostream> 
using namespace std;
class IndiaBix
{
    int x, y; 
    public:
    IndiaBix(int xx)
    {
        x = ++xx;
    } 
    ~IndiaBix()
    {
        cout<< x - 1 << " ";
    }
    void Display()
    {
        cout<< --x + 1 << " ";
    } 
};
int main()
{
    IndiaBix objBix(5);
    objBix.Display();
    int *p = (int*) &objBix;
    *p = 40;
    objBix.Display();
    return 0; 
} 
```

我没看懂下面这行::

```
 int *p = (int*) &objBix;//Explicit type cast of a class object to integer pointer type 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-23T13:38:04.173

可以将（标准布局类型的）对象指针转换为指向其第一个成员的指针。这是因为保证标准布局对象的第一个成员与整个对象具有相同的地址：

> [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")
> 
> ### 9.2 类成员 [class.mem]
> 
> 20 - 指向标准布局结构对象的指针，使用 reinterpret_cast 适当转换，指向其初始成员（或者如果该成员是位字段，则指向它所在的单元），反之亦然。

因此`int *p = (int*) &objBix;`是指向 的指针`objBix.x`，因为`objBix`是标准布局；它的数据成员`x`和`y`are `private`，并且该类没有`virtual`方法或基类。

# javascript - 在 node.js 中用僵尸填写登录表单

> ID：12092877
> 
> 赞同：5
> 
> 时间：2012-08-23T13:36:00.060
> 
> 标签：javascript, node.js, zombie.js

晚上！我正在尝试使用zombie.js 登录一个网站，但我似乎无法让它工作。哦，网站是芬兰语的，但不是很难理解，有两个文本字段和一个按钮。第一个是用户名，第二个是密码，按钮是登录按钮。

目前我的登录代码如下：

```
var Browser = require("zombie");
browser = new Browser();
browser.visit("https://www.nordnet.fi/mux/login/startFI.html?cmpi=start-loggain",
    function () {
        // Here I check the title of the page I'm on.
        console.log(browser.text("title"));
        // Here I fill the needed information.
        browser.document.getElementById("input1").value ="MYUSERNAME";
        browser.document.getElementById("pContent").value ="MYPASSWORD";
        // And here it fails. I try to submit the form in question.
        browser.document.getElementById("loginForm").submit();
        setTimeout(function () {
            // This is here to check that we've submitted the info and have been
            // redirected to a new website.
            console.log(browser.text("title"));
        }, 2000);
}); 
```

现在我知道我可能应该使用僵尸自己的“填充”方法，但我尝试了没有运气，所以我尝试了一些新的东西。

我从中得到的只是一个错误：

```
Y:\IMC\Development\Web\node_modules\zombie\lib\zombie\forms.js:72
  return history._submit(_this.getAttribute("action"), _this.getAttribute(
                 ^
TypeError: Cannot call method '_submit' of undefined 
```

现在，如果我记录`browser.document.getElementById("loginForm")`它显然确实找到了表格，但可惜，由于某种原因它不喜欢它。

我还尝试了僵尸的“常规”方法，即使用网页上的登录按钮并按下它。问题是它实际上不是一个按钮，只是一个附有链接的图像，它都在里面`<span>`。而且我不知道如何“单击”该按钮。

它上面没有ID，所以我不能使用它，然后我尝试使用它上面的文本，但是因为它上面有变音符号，所以我无法让它工作。用 /344 转义 ä 只会产生错误：

```
throw new Error("No BUTTON '" + selector + "'");
        ^
Error: No BUTTON 'Kirjaudu sis├ñ├ñn' 
```

所以，是的，这没有用，虽然我不知道为什么它不能正确识别转义的变音符号。

这是我的第一个问题，第二个是次要问题，但是既然我已经写了这篇文章，为什么不在这里问呢。

如果我让所有这些工作，我可以以某种方式复制此登录给我的 cookie，并在我的 YQL 中使用它来进行屏幕抓取吗？基本上我正在尝试抓取股票市场价值，但如果没有登录，价值会延迟 15 分钟，这还不错，但我希望它无论如何都可以上线。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T08:05:31.850

在使用zombie 进行了几次测试后，我得出的结论是，将它用于严肃的测试还为时过早。尽管如此，我还是想出了表单提交的工作示例（使用常规`.submit()`方法）。

```
var Browser = require("zombie");
var assert = require("assert");

browser = new Browser()
browser.visit("http://duckduckgo.com/", function () {
    // fill search query field with value "zombie"
    browser.fill('input[name=q]', 'mouse');
    // **how** you find a form element is irrelevant - you can use id, selector, anything you want
    // in this case it was easiest to just use built in forms collection - fire submit on element found
    browser.document.forms[0].submit();
    // wait for new page to be loaded then fire callback function
    browser.wait().then(function() {
        // just dump some debug data to see if we're on the right page
        console.log(browser.dump());
    })
}); 
```

如您所见，线索是`browser.wait().then(...)`在提交表单后使用构造，否则`browser`对象仍将引用初始页面（作为参数传递给`visit`方法的页面）。注意：历史对象将包含您提交表单的页面地址，即使您不等待页面加载 - 它让我有点困惑，因为我确信我应该已经*看到*新页面。

* * *

**编辑**：对于您的网站，僵尸似乎工作正常（我可以提交表单并收到“错误的登录名或密码”警报）。有一些 JS 错误，但僵尸不关心它们（但是你应该调试这些错误以查看脚本对于普通用户是否正常工作）。无论如何，这是我使用的脚本：

```
var Browser = require("zombie");
var assert = require("assert");

browser = new Browser()
browser.visit("https://www.nordnet.fi/mux/login/startFI.html?cmpi=start-loggain", function () {
    // fill in login field
    browser.fill('#input1', 'zombie');
    // fill in password field
    browser.fill('#pContent', 'commingyourway');
    // submit the form
    browser.document.forms[0].submit();
    // wait for new page to be loaded then fire callback function
    browser.wait().then(function() {
        console.log('Form submitted ok!');
        // the resulting page will be displayed in your default browser
        browser.viewInBrowser();
    })
}); 
```

* * *

作为旁注：当我试图提出工作示例时，我尝试使用以下页面（由于不同的原因都失败了）：

*   google.com - 即使我用字符串填写了查询框并提交了表单，但我没有得到搜索结果。原因？可能google采取了一些措施来防止自动工具（例如僵尸）浏览搜索结果。
*   bing.com - 与谷歌相同 - 提交表单后我没有得到搜索结果。原因？可能和谷歌一样。
*   paulirish.com - 在填写搜索查询框并提交表单后，僵尸遇到了阻止其完成页面的脚本错误（图表脚本中缺少 ActiveX）。
*   perfectkills.com - 令人惊讶的是，我在这里遇到了与 Paul Irish 网站相同的问题 -由于 javascript 错误，无法加载带有*搜索结果的页面。*

结论：毕竟强迫僵尸做你的工作并不是那么容易...... :)

# c# - 如何在jquery中单击动态创建的html按钮的id

> ID：12092879
> 
> 赞同：3
> 
> 时间：2012-08-23T13:36:04.677
> 
> 标签：c#, jquery, asp.net

我`dynamically`创建了几个（内部循环），`html` `buttons`例如：

```
sb.Append("<input type=\"button\"  name=\"deleteimage" + id 
              + " \" id=\"btndelete" + id 
              + "\" value=\"Delete\" class=\"t-button t-grid-delete\" " 
              + " style=\"margin-left:10px;\" />"); 
```

我想得到我使用`id`的那个`button``click``jquery`

帮我

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:37:40.937

使用[.on()](http://api.jquery.com/on/) (jQuery 1.7+) 或[.delegate()](http://api.jquery.com/delegate/) (jQuery 1.6 及更低版本)委托

```
$('body').on('click','input[type=button]',function(){
     alert(this.id); // <-- this refers to current clicked input button
}); 
```

或者

```
$('body').delegate('input[type=button]','click',function(){
     alert(this.id);
}); 
```

或者无论你的 sb 元素是什么，都用它替换 body，因为它存在于 dom 负载上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:38:57.507

怎么样

```
$('input:button').click(function(){
    alert('Clicked ' + this.id); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T13:43:04.850

试试这个

```
$("input[type=button]").click(function()
{
    alert(this.id);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T13:43:37.363

您可以尝试以下方法：

```
$(document).click(function(event) { 
        var target = event.target;      
        if ($(target).hasClass("t-grid-delete")) { // check if element has class t-grid-delete is your button
            var targetId =  $(target).attr("id");
            // set your image id with attribute like image_id
            // it take easy to get image id $(target).attr("image_id")
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T18:05:02.693

对动态生成的 html 元素的事件使用“live”事件

```
$("input[type=button]").live('click',function()
{
    alert(this.id);
}); 
```

# sql - SQL查询将1个值分成3行

> ID：12092886
> 
> 赞同：1
> 
> 时间：2012-08-23T13:36:26.897
> 
> 标签：sql, sql-server

我的要求是这样的。我有 3 列和 1 行。

```
Column A -> Value a
Column B -> Value b
Column C -> Value 123 
```

我必须在 C 列中拆分值并从中获取 3 行，并从其他列中复制值。我必须得到 3 行，它应该是这样的：

```
Column A -> Value a , a , a
Column B -> Value b , b , b
Column C -> Value 1, 2, 3 
```

任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T13:45:44.363

试试这个：

```
create table test(cola varchar(10),colb varchar(10),colc varchar(10))

insert into test select 'a','b','123'

    ;WITH CTE AS(
    select cola,colb,LEFT(colc,1) colc,RIGHT(colc,len(colc)-1) as rem from test
    union all
    select cola,colb,LEFT(rem,1) colc,RIGHT(rem,len(rem)-1) as rem from CTE
    where LEN(rem) >= 1
    )
    select cola,colb,colc from CTE 
```

# android - 特定 api 级别的独家布局 - Android

> ID：12092887
> 
> 赞同：4
> 
> 时间：2012-08-23T13:36:30.243
> 
> 标签：android, android-layout, android-api-levels

我有一个只想用于平板电脑的布局。我知道如果创建一个文件夹“layout-v(api level)”，那么该布局将仅用于该特定的 api。问题是，对于平板电脑，要么你有 api 11、12 或 13。有没有办法我可以创建一个包含所有这些的文件夹，而不是创建 layout-v11、layout-v12、layout-v13？

希望我的问题不会令人困惑，我只是不知道如何以其他方式提出我的问题。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-23T13:41:23.447

如果您使用`layout-v11`它将用于所有版本 >= 11，除非指定了更高版本（例如`layout_v14`）。所以你应该只需要制作一个文件夹，`layout-v11`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T13:46:43.230

不要忘记你可以拥有一个 API lvl 14 的 4" android 设备。所以使用 API 版本来区分平板电脑和手机并不是一个好方法。

更喜欢与屏幕分辨率的区别。Android 开发者博客上有一篇关于它的好文章：

[http://android-developers.blogspot.fr/2012/07/getting-your-app-ready-for-jelly-bean.html](http://android-developers.blogspot.fr/2012/07/getting-your-app-ready-for-jelly-bean.html)

# javascript - 在鼠标悬停时替换包含的元素文本

> ID：12092888
> 
> 赞同：1
> 
> 时间：2012-08-23T13:36:35.747
> 
> 标签：javascript, jquery, replace, mouseover

我只是看一下一位用户关于通过鼠标悬停切换内容的问题的答案。我指的答案在这里：[https ://stackoverflow.com/a/3088819/532645](https://stackoverflow.com/a/3088819/532645)

我想弄清楚的是如何调整下面的代码，以便当用户将鼠标悬停在关联 LI 元素的任何区域上时，只有一些指定的文本会发生变化。

在这种情况下，您可以看到当用户将鼠标悬停在包含该 H3 标记的 LI 元素上时，我正试图触发 H3 文本的替换。

有什么想法可以快速解决这个问题吗？代码如下...

```
<script type="text/javascript">
$( function() {
  $(".homepage-content-columns li h3").hover(
    function () {
      $(this).attr('small',$(this).html());
      $(this).html($(this).attr('full'));
    },
    function () {
       $(this).html($(this).attr('small'));
    }
  );
});
</script>

<ul class="homepage-content-columns">
  <li class="blue spacer">
    <a href="#a">
    <h3 full="Switch Text A">Text A</h3>
    <p>some text here</p>
    </a>
  </li>
  <li class="green spacer">
    <a href="#b">
    <h3 full="Switch Text B">Text B</h3>
    <p>some text here</p>
    </a>
  </li>
  <li class="orange">
    <a href="#c">
    <h3 full="Switch Text C">Text C</h3>
    <p>some text here</p>
    </a>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:48:34.890

2 小改动。

1.`hover`事件必须改为LI元素，而不仅仅是h3。因此： 更改：

```
$(".homepage-content-columns li h3").hover( 
```

到：

```
$(".homepage-content-columns li").hover( 
```

2.由于这种变化，`this`“是”`li`元素。您想更改包含在其中的 H3，因此您可以使用：

```
find("h3") 
```

例如：

```
var htitle = $(this).find("H3");
 htitle.html(htitle.attr('full')); 
```

**把它们放在一起：**

```
<script type="text/javascript">
$( function() {
  $(".homepage-content-columns li").hover(
    function () {
    htitle = $(this).find("h3");
      htitle.attr('small',htitle.html());
      htitle.html(htitle.attr('full'));
    },
    function () {
       $(this).find("h3").html($(this).find("h3").attr('small'));
    }
  );
});
</script> 
```

# image - 有没有一种方法可以在 WP7 上显示所有类型的图像

> ID：12092889
> 
> 赞同：0
> 
> 时间：2012-08-23T13:36:44.680
> 
> 标签：image, silverlight, windows-phone-7, xaml

我正在开发一个 WP7.5 应用程序，我必须在其中下载多个图像并将它们显示在列表中。图像可以是 PNG、JPEG 或 GIF。对于前两个扩展，它不是问题，但我们知道，要在 WP7 上显示/播放 GIF 图像，还有一些其他库或控件。（我尝试使用 ImageTools [http://imagetools.codeplex.com/；](http://imagetools.codeplex.com/;)它工作正常。但它提供的控件无法呈现除 GIF 以外的图像（或者可能是我没有找到方法）。

是否有任何工具或自定义控件或 API 可以渲染所有类型的图像，以便无论它是什么扩展名，都显示图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T03:42:52.350

WP7 使用 silverlight，silverlight 不支持 GIF 图片。

请检查这些链接以获取有关相同的信息。[http://forums.silverlight.net/p/39235/112333.aspx](http://forums.silverlight.net/p/39235/112333.aspx)

您还可以在这里找到一些有用的问题答案：[Displaying a GIF in Silverlight](https://stackoverflow.com/questions/1457959/displaying-a-gif-in-silverlight)

# session - Rails 3.2.8 - 使用 POW 跨子域共享设计会话

> ID：12092893
> 
> 赞同：5
> 
> 时间：2012-08-23T13:36:52.787
> 
> 标签：session, devise, ruby-on-rails-3.2, subdomain, rack-pow

我正在尝试在 rails 3.2.8 中建立一个简单的基于子域的博客。基本上，它将具有站点、用户（通过 Devise 验证）和将用户连接到站点的成员资格。我设置了 POW，以便 myapp.dev 正常工作。每个站点都有一个子域，我可以毫无问题地使用子域导航到 site#show 操作。我的问题是我无法让设计会话在子域之间共享。我的 heroku 应用程序一切正常，但我希望能够在本地进行测试。

当我将以下内容添加到 session_store.rb 时，会话似乎可以跨子域工作，但是我无法注销。

```
Appname::Application.config.session_store :cookie_store, :key => '_appname_session', domain: :all 
```

当我将结尾更改为域时：“.appname.dev”它不起作用。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T19:06:20.977

确保清除 cookie 并重新启动应用程序。

```
Appname::Application.config.session_store :cookie_store, :key => '_appname_session', domain: ".appname.dev" 
```

`domain: ".appname.dev"`是域选项的正确格式。开始阶段很重要。

# android - 一个活动和另一个活动之间的动画过渡

> ID：12092894
> 
> 赞同：8
> 
> 时间：2012-08-23T13:36:57.600
> 
> 标签：android, android-layout, android-intent, android-widget

我声明我在 android 方面不是很有经验，我想了解，也许有一些教程，如何在一个活动和另一个活动之间实现任何滚动动画。我希望在你的帮助下

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-23T13:41:07.487

当您在这样的活动之间切换时，您可以设置动画（如幻灯片）：

在`res`文件夹中，创建一个`anim`文件夹

例如，`xml`为幻灯片效果放置两个文件：

幻灯片输入.xml

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:shareInterpolator="false">
    <translate 
       android:fromXDelta="100%" android:toXDelta="0%"
       android:fromYDelta="0%"   android:toYDelta="0%"
       android:duration="200"/>
</set> 
```

幻灯片输出.xml

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:shareInterpolator="false">
    <translate
       android:fromXDelta="100%" android:toXDelta="0%"
       android:fromYDelta="0%" android:toYDelta="0%"
       android:duration="200" />
</set> 
```

然后在你的java代码上写这个：

```
Intent i = new Intent(YourActivity.this, OtherActivity.class);
this.startActivity(i);
overridePendingTransition(R.anim.slide_in, R.anim.slide_out); 
```

如果您在真实设备上进行测试，请不要忘记让它播放动画（设置 -> 显示 -> 动画 -> 所有动画）

希望能帮助到你 ！:)

# multithreading - 寻找一种单写多读多线程通信的设计

> ID：12092902
> 
> 赞同：0
> 
> 时间：2012-08-23T13:37:38.403
> 
> 标签：multithreading, condition-variable

应用上下文如下：

1.  它是一个单进程多线程程序
2.  它专为自动期货交易而设计。在期货交易市场中，有数百个活跃的期货合约。每份合约的市场数据称为分时数据，每 500 毫秒从 Future-Exchange 推送一次。每个自动期货交易策略都作为一个线程运行。每个策略都需要不同合约的实时市场数据。例如：策略A需要合约A1、合约A2、合约A3的行情数据。策略B需要合约A1、合约B1和合约B2的行情数据。
3.  该程序中的一个线程作为市场数据接收器运行，它接收所有合约的市场数据并将它们保存在数据缓冲区中，交易后可以将其保存到磁盘数据库中。因此，这个线程可以作为数据生产者进行审查，而策略线程可以作为数据消费者进行审查。所以这个场景是一个单生产者多消费者的问题。设计必须确保所有策略线程都能有效地获取他们需要的分时数据。
4.  一种可能的设计是：所有消费者都等待一个条件变量并尝试获取共享锁。当一个新的tick到来时，单个生产者会尝试获得一个排他锁并将这个tick数据保存到数据缓冲区中。然后它用条件变量通知所有消费者。当通知消费者时，它会检索数据缓冲区以查看它需要的合约数据是否更新（通过比较时间戳）。如果不是，它将再次等待条件变量。但是这种低效率的设计，每一个新的到来的tick数据都会导致所有的消费者醒来并检索数据缓冲区（检索的过程可能很耗时）无论消费者是否需要数据。
5.  一个改进的设计是：定义一个全局变量来存储新来的分时数据。当有新的分时数据到来时，生产者将更新全局变量并将分时数据存储到数据缓冲区中，然后通知所有消费者。消费者醒来，只需检查全局变量以查看刻度数据是否符合他们的需要（无需检索整个数据缓冲区）。但问题是存在一些竞争条件。可能在消费者获得共享锁之前，另一个新的滴答数据到来，生产者提前获得锁并更新全局变量。所以消费者会错过一个滴答数据。有更好的设计吗？（比如用unix domain socket来广播？不知道unix domain socket是否可以在多线程之间应用，如果可以，对比共享内存效率如何？）

# php - php pdo插入名称中带有问号的列

> ID：12092907
> 
> 赞同：4
> 
> 时间：2012-08-23T13:37:44.940
> 
> 标签：php, pdo

我花了几个小时尝试使用 PDO 插入查询，最后我意识到我做不到（不知道怎么做）。问题实际上是列名有“？” 在里面。其中一列名为“如果 HSM 签证到哪一年？”。因此，每次插入时，我都会得到：-传递的参数数量错误或-不能混合名称和？在查询中。

我放弃了，我将改变我必须使用的 mysql 表（谁在用问号命名列？），但我仍然很好奇。

```
INSERT INTO `tbl_maindetails` (`Id`,`Title`,`If HSM Visa to what year?`) VALUES (?, ?, ?) 
```

谢谢， 戈兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:39:10.077

```
$dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, FALSE); 
```

会解决问题的，我相信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-19T01:09:31.460

我也有同样的问题！我试图绕过字符“？”之间的混淆。在列（字段）名称和相同的字符“？” 作为PDO中的位置（未命名）占位符，通过切换到命名参数绑定......但问题仍然存在:(

现在，PDO 看到“？” 在列名中，并认为我混淆了命名参数和位置参数！

例如：

```
UPDATE myTable SET `title` = :title, `Underwater?` = :Underwater 
WHERE ID='123' 
```

连同以下绑定：

```
 Array ( [:title] => test  [:Underwater] => 0) 
```

产生以下错误消息：

```
"SQLSTATE[HY093]: Invalid parameter number: mixed named and positional parameters" 
```

请注意，我避免放置任何“？” 在占位符本身内部（它是**":Underwater"**而不是**":Underwater?"**，但这无济于事......）

显然，这是一个错误！PDO 看到“？” 在列名中，并得出结论，它是一个位置占位符，即使我们严格使用 NAME 参数绑定！

我看看能不能报告这个bug...

由于 MySQL 允许在列名中使用问号，我看不出我们必须避免使用问号的令人信服的理由！（虽然，在短期内，我会这样做，叹息......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:28:24.873

这是我能想出的唯一（丑陋的）解决方案：

```
$db->query("SET @column_name = 'question?'");
$db->query("SET @sql_text = CONCAT('INSERT INTO table1 SET `', @column_name, '` = ?')");
$db->query("PREPARE stmt FROM @sql_text;");
$db->query("SET @v = ?", 'something');
$db->query("EXECUTE stmt USING @v");
echo $db->insert_id(); 
```

这将在 table1 中插入一个新行，有问题？='东西'

此代码使用 PDO 包装器，因此您需要对此进行调整。

从长远来看，我认为您通过重命名列做出了正确的选择。

# ruby-on-rails - 在 Rails 3.0.11 中将 url_options 添加到 url_for

> ID：12092910
> 
> 赞同：3
> 
> 时间：2012-08-23T13:37:48.693
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我遇到了类似于[default_url_options 和 rails 3](https://stackoverflow.com/questions/6100954/default-url-options-and-rails-3)中的问题。我正在尝试实施最佳答案中描述的解决方案，即：

```
class ApplicationController < ActionController::Base
  def url_options
    { :profile => current_profile }.merge(super)
  end
end 
```

在 routes.rb 中（名称已更改以保护我的 NDA）：

```
scope ":profile" do
  match "/:comment" => "comments#show", :as => :show_comment
  match "/comments(/*comments)" => "comments#index", :as => :show_many_comments
end 
```

现在这是我在使用 url 助手时遇到的问题。

```
show_comment_path(comment) #=> "/current_profile/comment" 
```

这按预期工作。但是，它会在具有可选段的路线上中断。

```
show_many_comments_path([comment1, comment2]) 
```

产量

```
No route matches {:profile=>[comment1, comment2], :controller=>"comments", :action=> "index"} 
```

但是，它*仅*在使用位置参数而不是命名参数时才会中断。换句话说：

```
show_many_comments_path(:comments => [comment1, comment2]) #=> "/current_profile/comments/comment1/comment2" 
```

正如预期的那样。所以唯一的错误情况是使用位置参数*和*可选的路径段。

我查看了 ActionDispatch 中的源代码，但我无法弄清楚为什么会发生这种情况。看起来它应该足够聪明，可以看到我们提供了明确的 :profile，并将位置参数应用于剩余的路径段。任何关于它为什么不这样做的见解，或者我必须做什么才能获得我想要的行为？

编辑：我不再确定是导致错误的*可选*路径段，而不是路由通配符。我以为我之前在单个可选路径段上重现了这个错误，但我最近的试验有可选段的行为不同，具体取决于它们是否包含 *。无论如何，我仍然对此感到好奇，但实际上我决定放弃 url_options 以支持传递显式参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T06:20:43.287

复制评论中的答案，以便从“未回答”过滤器中删除此问题：

> 我看到你用 3.0.11 描述的确切错误。好消息是最新版本似乎没有它。在 3.2.6 和 3.2.2 上按预期工作

〜回答每个[Serge Balyuk](https://stackoverflow.com/users/323021/serge-balyuk)

# php - 错误的 ELF 类 - PHP 扩展

> ID：12092913
> 
> 赞同：0
> 
> 时间：2012-08-23T13:38:01.923
> 
> 标签：php, c++, build, elf

我正在尝试加载 PHP 扩展 (sdo.so)，但在尝试运行 XAMPP 时出现以下错误。

```
PHP Warning:  PHP Startup: Unable to load dynamic library '/opt/lampp/lib/php/extensions/no-debug-non-zts-20060613/sdo.so' - /opt/lampp/lib/php/extensions/no-debug-non-zts-20060613/sdo.so: wrong ELF class: ELFCLASS64 in Unknown on line 0 
```

从我看到的其他人看来，这似乎与它在 64 位机器上编译有关，它需要 32 位。这是问题的根源吗？如果是这样，我将如何在 Fedora 17 中将其编译为 32 位，因为我只看到了 Ubuntu 的解决方案并且无法让它们为我工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:24:31.373

> 从我看到的其他人看来，这似乎与在 64 位机器上编译有关

*您在*哪台机器上编译（构建主机）并不重要。重要的是*您*编译的机器（目标主机）。

您（显然）正在运行 32 位 ix86 `PHP`，因此您还需要`sdo.so`针对 32 位 ix86 进行编译。

> 我如何在 Fedora 17 中将其编译为 32 位

```
./configure CC='gcc -m32' CXX='g++ -m32' && make && make install 
```

应该是关于它的。

# php - 从 IF 语句中提取基本的 PHP 回显

> ID：12092922
> 
> 赞同：-1
> 
> 时间：2012-08-23T13:38:25.617
> 
> 标签：php, wordpress, plugins, if-statement, echo

以下代码用于 Wordpress 插件，它显示用户的积分和坦克：

```
<?php
if(function_exists('cp_displayPoints') && $authordata->ID){
  echo '<span class="cubepoints_buddypress">'; cp_displayPoints($authordata->ID); echo '</span>';
  if(function_exists('cp_module_ranks_getRank')) echo ' <span class="cupepoints_buddypress_rank">'.cp_module_ranks_getRank($authordata->ID).'</span>';
}
?> 
```

我试图从 If 语句中提取这两个 echo 函数，但只成功了其中一个。我可以回应这样的观点：

```
<?php cp_displayPoints($authordata->ID); ?> 
```

工作正常。现在我尝试对第二个回声做同样的事情：

```
<?php cp_module_ranks_getRank($authordata->ID); ?> 
```

但它没有用。显然，我在这里缺少一些基本的东西。你知道这是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:39:12.553

第一个可能直接打印到输出，而第二个返回它的值。因此，您需要[`echo()`](http://php.net/echo)第二个，就像他们在您的示例代码中所做的那样：

```
<?php echo cp_module_ranks_getRank($authordata->ID); ?> 
```

# php - 如何使 html 选择框默认为最近的数据库条目

> ID：12092923
> 
> 赞同：0
> 
> 时间：2012-08-23T13:38:25.220
> 
> 标签：php, mysql, sql

我有一个由数据库中的数组填充的 html 选择框。此表中的所有数据，包括它写入数据库中新表的选择框以及当前日期。当用户返回课堂时，我希望选择框默认为用户提交的最后一个条目，无论是前一天还是前一周。我可以得到非常接近我需要的查询，但我并没有真正从哪里开始，只要将它传递给选择框。

这是我的选择框，它是来自 php 的回显。

```
 <td>
              <select name="movement[]" width=200>
              <option>Select...</option>
              <option>'. ($wc['mv_00']). '</option>
              <option>'. ($wc['mv_01']). '</option>
              <option>'. ($wc['mv_02']). '</option>
              <option>'. ($wc['mv_03']). '</option>
              <option>'. ($wc['mv_04']). '</option>
        </select></td> 
```

这是回显的整个数组的代码。

```
 if(empty($workout_class) === false)
{   
foreach($workout_class as $wc){
if ($wc['pagenum'] !== $pagenum) continue 1;

    echo '<tr>
        <td><input type="hidden" name="client_id[]" value="'.($wc['client_id']).'">
        <input type="hidden" name="first_name[]" value="'.($wc['first_name']).'">'. ($wc['first_name']).'
        <span><input type="hidden" name="nickname[]" value="'.($wc['nickname']).'">('. ($wc['nickname']).')</span>
        <span><input type="hidden" name="last_name[]" value="'.($wc['last_name']).'">'. ($wc['last_name']).'</span>
        </td>
              <td><input type="hidden" name="order[]" value="'.($wc['order']).'">'. ($wc['order']). '</td>
              <td>
              <select name="movement[]" width=200>
              <option>Select...</option>
              <option>'. ($wc['mv_00']). '</option>
              <option>'. ($wc['mv_01']). '</option>
              <option>'. ($wc['mv_02']). '</option>
              <option>'. ($wc['mv_03']). '</option>
              <option>'. ($wc['mv_04']). '</option>
        </select></td>
        <td><input type="hidden" name="rep_set_sec[]" value="'.($wc['rep_set_sec']).'">'. ($wc['rep_set_sec']). '</td>
        <td><input type="hidden" name="rest[]" value="'.($wc['rest']).'">'. ($wc['rest']). '</td>
        <td>00</td>
        </tr>';    
   } // foreach($data_array 
```

这可以用php完成还是js会更好？

好的，这是我的变量，它根据类、客户和订单获取最后输入的动作。

```
 $recent_movement = recent_movement($class_id, $client_id, $order); 
```

这是我的查询，它根据 MA​​X(date) 从 db 返回移动数组

```
function recent_movement($class_id, $client_id, $order){
    $class_id = (int)$class_id;
    $client_id = (int)$client_id;

$query = mysql_query("SELECT `movement` FROM `completed_movements` WHERE `class_id` = '$class_id' AND `client_id` = '$client_id' AND `order` = '$order' AND
`date` = (SELECT MAX(`date`) FROM `completed_movements` WHERE `order` = '$order')");

$last_movement = mysql_fetch_array($query);

return $last_movement['movement'];

} 
```

这是我不确定如何告诉选择菜单根据我的 $recent_movement 返回的内容设置 select="selected" 的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:45:43.383

如果你有

```
<option>A</option>
<option>B</option>
<option>C</option> 
```

什么时候选择“B”你会做

```
<option>A</option>
<option selected="selected">B</option>
<option>C</option> 
```

因此，您需要做的就是获取您想要的最后一个值，然后对于每个输出，如果该值是您想要的值，则添加“selected = ...”部分。

（编辑以将选定的值设置为选定的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:45:00.777

好的，为了论证，假设您将最新选择存储在`$recent_movement`. 只需将该变量的值与选项的值进行比较，并将匹配选项设置为“已选择”：

```
<?php
.
.
.
echo '...

    <option' . ($ws['mv_00'] == $recent_movement ? ' selected="selected"' : "") . '>'. ($wc['mv_00']). '</option>
    <option' . ($ws['mv_01'] == $recent_movement ? ' selected="selected"' : "") . '>'. ($wc['mv_01']). '</option>
    <option' . ($ws['mv_02'] == $recent_movement ? ' selected="selected"' : "") . '>'. ($wc['mv_02']). '</option>
    <option' . ($ws['mv_03'] == $recent_movement ? ' selected="selected"' : "") . '>'. ($wc['mv_03']). '</option>
    <option' . ($ws['mv_04'] == $recent_movement ? ' selected="selected"' : "") . '>'. ($wc['mv_04']). '</option>

...'; 
```

您还可以通过使用计数器实现循环来简化此操作：

```
<?php

$options = "";
for($i = 0; $i <= 4; $i++) {
    $options .= '<option' . ($ws['mv_0' . $i] == $recent_movement ? ' selected="selected"' : "") . '>'. ($wc['mv_0' . $i]). '</option>';
} 
```

**更新：**

如果这是我自己的代码，我会做一些小的改动。而不是那种***巨大的***回声，我会退出 PHP 模式并直接使用 HTML。我也会使用我的循环字符串构造函数（上面发布）`options`：

```
<?php
foreach ($workout_class as $wc) :
    if ($wc['pagenum'] !== $pagenum) continue 1;

    $options = "";

    for ($i = 0; $i <= 4; $i++) {
        $options .= '<option' . ($ws['mv_0' . $i] == $recent_movement ? ' selected="selected"' : "") . '>' . ($wc['mv_0' . $i]) . '</option>';
    }
    ?>
    <tr>
        <td><input type="hidden" name="client_id[]" value="<?= $wc['client_id'] ?>">
            <input type="hidden" name="first_name[]" value="<?= $wc['first_name'] ?>"><?= $wc['first_name'] ?>
            <span><input type="hidden" name="nickname[]" value="<?= $wc['nickname'] ?>">(<?= $wc['nickname'] ?>)</span>
            <span><input type="hidden" name="last_name[]" value="<?= $wc['last_name'] ?>"><?= $wc['last_name'] ?></span>
        </td>
        <td><input type="hidden" name="order[]" value="<?= $wc['order'] ?>"><?= $wc['order'] ?></td>
        <td>
            <select name="movement[]" width=200>
                <option>Select...</option>
                <?= $options ?>
            </select></td>
        <td><input type="hidden" name="rep_set_sec[]" value="<?= $wc['rep_set_sec'] ?>"><?= $wc['rep_set_sec'] ?></td>
        <td><input type="hidden" name="rest[]" value="<?= $wc['rest'] ?>"><?= $wc['rest'] ?></td>
        <td>00</td>
    </tr>
<?php endforeach; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T13:46:59.780

行。你在标签所在的地方分割你的回声。然后，您遍历它们，当您到达您希望设置为默认值的那个时，您只需设置

```
<option selected="selected" value="value">Option</option> 
```

这样进入页面时，该选项将成为默认选项。这将适用于您的情况。

* * *

我不建议使用 echo 来构建您的页面。相反，您应该依赖应用程序中的模板引擎。我推荐[Twig 模板引擎](http://twig.sensiolabs.org/)。

# sql - 在 SQLite 中查询范围

> ID：12092924
> 
> 赞同：1
> 
> 时间：2012-08-23T13:38:26.507
> 
> 标签：sql, sqlite, system.data.sqlite

我有一个 SQLite 表，其中包含大量数据，数百万行。大约每秒插入一行。

这些行有一列是创建日期，它转换为自 Epoch 以来的毫秒数并保存为一个数字，例如 1343224574667。每一行还有一列用于容器的 ID，它只是一个字符串字段。

我正在尝试运行查询以获取在特定时间范围内为特定容器 ID 创建的项目。所以查询看起来像

```
Select * from Item where Created > [number] and Created < [number] and ContainerId=[string] 
```

非常基本的查询。

我在桌子上有几个索引。[Created] 上有一个，[Created, ContainerId] 上有一个。当我在较小的时间范围内运行此查询时，查询速度非常快，例如几百毫秒。然而，将其扩展，以便时间范围延长一周左右，这个查询非常慢，平均超过 75 秒。有什么办法可以加快这个速度吗？这似乎是一段疯狂的等待结果的漫长时间。但我不是 DBA，所以也许我做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:22:49.327

**聚集索引**可以加快对某个范围的查询。在 SQLite 的情况下，这可能意味着使用主键。如果可以，请尝试将 (Created, ContainerId) 设为表的 PRIMARY KEY。

# wpf - 解决内存泄漏问题

> ID：12092927
> 
> 赞同：0
> 
> 时间：2012-08-23T13:38:30.153
> 
> 标签：wpf, debugging, c#-4.0, memory-leaks

我已经阅读了很多关于这个主题的内容，但我仍然没有明确的路径如何继续。任何人都可以指向一些资源（或解释），详细说明如何找到未调用某些对象 dctor 的原因。

基本上我测试泄漏的逻辑是这样的（WPF应用程序）：

1.  创建一些视图/视图模型
2.  关闭视图
3.  调用 GC.Collect()

几秒钟后，通常会调用 ViewModel 类的 dctor，但在我的应用程序上从未调用过。我想知道当时哪个对象持有对它的引用，因为我认为这是找到内存泄漏原因的方法。

这些类不使用任何非托管资源，也没有`IDisposable`实现，这意味着没有 SupressFinalize 调用来阻止析构函数的执行。

编辑：通过 ViewModelLocator 上的静态属性检索 ViewModel，并添加 List。这是 TabControl 所要求的，它需要绑定到视图模型的集合。View 和 ViewModel 通过 DataTemplate 连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:53:36.707

首先，搜索未订阅的事件处理程序和指向您的 ViewModel 的静态引用，即使是间接的。由于您在 WPF 应用程序中，因此还要确保您不使用`DependencyPropertyDescriptor.AddValueChanged`已知会导致泄漏的静态引用。

如果您无法手动找到任何内容，请使用很棒的（这是我的意见，我与他们没有任何关系）[SciTech .NET Memory Profiler](http://memprofiler.com/)。您可以在一个漂亮的图形视图中查看每个对象的所有引用，以及哪些其他对象持有对它的引用。它还会警告您常见的内存问题。

编辑：

> ViewModel 是通过 ViewModelLocator 上的静态属性检索的

不再搜索，你有你的泄漏。静态引用防止对象被垃圾收集。删除静态引用或将其包装在`WeakReference`.

# ruby-on-rails - 当您的 Gemfile 需要旧版本的捆绑器时，如何“捆绑安装”？

> ID：12092928
> 
> 赞同：95
> 
> 时间：2012-08-23T13:38:30.830
> 
> 标签：ruby-on-rails, ruby, bundler

我在一个具有 Gemfile 的旧 Rails 项目中。我尝试向 Gemfile 添加一个 gem，`bundle install`但出现错误：

```
Bundler could not find compatible versions for gem "bundler":
  In Gemfile:
    rails (= 3.0.0) ruby depends on
      bundler (~> 1.0.0) ruby

  Current Bundler version:
    bundler (1.1.5)

This Gemfile requires a different version of Bundler. 
```

它使用的 Rails 版本需要 bundler ~>1.0.0，但我安装了 1.1.5 并将其用于我的其他项目。通常我会使用`bundle exec ...`，但由于这是我们正在谈论的捆绑程序，它比这更复杂一些。如何在我的 Gemfile 中添加 gem 并`bundle install`在使用它所需的 bundler 版本时运行？

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2012-08-23T14:09:14.467

首先，您需要安装适当版本的捆绑器：

```
% gem install bundler -v '~> 1.0.0'
Successfully installed bundler-1.0.22 
```

然后强制 ruby​​gems 使用你想要的版本（[见这篇文章](https://stackoverflow.com/questions/4373128/how-do-i-activate-a-different-version-of-a-particular-gem)）：

```
% bundle _1.0.22_ install 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-18T09:19:20.710

错误消息`In Gemfile: bundler (~> 1.16)`有点不准确，因为版本号要求可能来自其他地方，例如`.gemspec`文件，对我来说就是这种情况：

```
spec.add_development_dependency "bundler", "~> 1.16" 
```

从文件中删除版本号`.gemspec`为我解决了这个问题：

```
spec.add_development_dependency "bundler" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-06-14T18:37:31.550

这是我必须做的才能让它与以前版本（2.2.11）的捆绑器一起安装：

```
gem install bundler:2.2.11
bundle _2.2.11_ install 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-04T18:13:31.490

我在 macOS Mojave 上遇到了同样的问题。我安装了不同版本的 bundler gem 并卸载了当前版本。

`gem install bundler -i '2.0.1'`

`gem uninstall bundler`

然后让我选择要卸载的版本，然后我选择造成问题的版本。

# c++ - 从析构函数调用虚函数

> ID：12092933
> 
> 赞同：44
> 
> 时间：2012-08-23T13:38:52.677
> 
> 标签：c++, virtual

这安全吗？

```
class Derived:  public PublicBase, private PrivateBase
{
 ... 

   ~Derived()
   {
      FunctionCall();
   }

   virtual void FunctionCall()
   {
      PrivateBase::FunctionCall();
   }
}

class PublicBase
{
   virtual ~PublicBase(){};
   virtual void FunctionCall() = 0;
}

class PrivateBase
{
   virtual ~PrivateBase(){};
   virtual void FunctionCall()
   {
    ....
   }
}

PublicBase* ptrBase = new Derived();
delete ptrBase; 
```

此代码***有时会***在 IP 地址错误的情况下崩溃。

每个人都清楚在构造函数上调用虚函数不是一个好主意。

从[http://www.artima.com/cppsource/nevercall.html](http://www.artima.com/cppsource/nevercall.html)之类的文章中，我了解到析构函数也不是调用虚函数的好地方。

我的问题是“这是真的吗？” 我已经用 VS2010 和 VS2005 进行了测试，并且调用了 PrivateBase::FunctionCall。是未定义的行为吗？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-08-23T13:53:44.007

我将在这里逆流而上……但首先，我必须假设您的`PublicBase`析构函数是虚拟的，否则`Derived`将永远不会调用析构函数。

*从构造函数/析构函数调用虚函数通常不是一个好主意*

原因是在这两个操作期间动态调度很奇怪。对象的实际类型在构造过程中发生*变化*，并且在销毁过程中再次发生*变化。*当一个析构函数被执行时，对象就是那个类型，而不是从它派生的类型。动态调度始终有效，但虚函数的*最终覆盖*将根据您在层次结构中的位置而改变。

也就是说，你永远不应该期望在构造函数/析构函数中对虚函数的调用以派生自正在执行的构造函数/析构函数的类型的任何类型执行。

*但*

在您的特定情况下，*最终*覆盖者（至少对于层次结构的这一部分）*高于*您的级别。此外，您根本*没有使用动态调度*。该调用`PrivateBase::FunctionCall();`是静态解析的，并且实际上等效于对任何非虚拟函数的调用。该函数是否为*虚拟*函数这一事实不会影响此调用。

所以**是**的，按照你的方式做是很好的，尽管你将被迫在代码审查中解释这一点，因为大多数人都了解规则的口头禅而不是它的原因。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-23T14:42:39.807

> 这安全吗？

是的。从构造函数或析构函数调用虚函数会分派函数，就好像对象的动态类型是当前正在构造或销毁的那样。在这种情况下，它是从 的析构函数中调用的`Derived`，因此它被分派到`Derived::FunctionCall`（在您的情况下，它`PrivateBase::FunctionCall`是非虚拟调用的）。所有这一切都定义明确。

从构造函数或析构函数调用虚函数“不是一个好主意”，原因有以下三个：

*   如果您从基类调用它并且（错误地）期望它被分派到派生类中的覆盖，它将导致意外行为；
*   如果它是纯虚拟的，它将导致未定义的行为；
*   你将不得不继续向那些认为这样做总是错误的人解释你的决定。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T13:42:53.620

一般来说，调用虚函数不是一个好主意，除非它可能被分派到的类的对象（即最派生类的“完整”对象）是完全构造的。事实并非如此

*   直到所有构造函数完成执行
*   在任何析构函数完成执行后

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T13:44:20.910

根据斯科特的说法，这是一个非常糟糕的主意：[链接](http://www.artima.com/cppsource/nevercall.html)

这是我编译并运行的内容，以帮助自己更好地了解销毁过程，您可能还会发现它有帮助

```
#include <iostream>
using namespace std;

class A {
public:
  virtual void method() {
    cout << "A::method" << endl;
  }

  void otherMethod() {
    method();
  }

  virtual ~A() {
    cout << "A::destructor" << endl;
    otherMethod();
  }

};

class B : public A {
public:
  virtual void method() {
    cout << "B::method" << endl;
  }

  virtual ~B() {
    cout << "B::destructor" << endl;
  }
};

int main() {

  A* a = new B();

  a->method();

  delete a;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-02T04:48:31.340

> Is this safe ?

Yes and No.

Yes, because your example as-is is well defined and will work. All of that is well explained by other answers. Also, this code is totally safe because it won't compiler the way it's written: private dtors in base classes etc.

The reason it's not safe to do the way your example does is because this code assumes that nobody else will override `FunctionCall` from your `Derived` class **and** won't expect that override to be called on object destruction. Most likely compilers will complain about this. You can improve your code by marking your `FunctionCall` as [final](https://en.cppreference.com/w/cpp/language/final):

```
class Derived : public PublicBase, private PrivateBase
{
 ... 
   virtual void FunctionCall() final;
} 
```

or your `Derived` class as [final](https://en.cppreference.com/w/cpp/language/final):

```
class Derived final : public PublicBase, private PrivateBase
{
 ... 
   virtual void FunctionCall();
} 
```

If you compile on older compilers or cannot use [c++11](https://en.wikipedia.org/wiki/C%2B%2B11) for any other reason, then you may at least be more explicit here and write in your code exactly what will happen at runtime regardless if `FunctionCall` is overridden by any descendant of your `Derived` class:

```
class Derived : public PublicBase, private PrivateBase
{
 ... 
   ~Derived()
   {
      Derived::FunctionCall(); // be explicit which FunctionCall will be called
   }

   virtual void FunctionCall()
   {
      PrivateBase::FunctionCall();
   }
} 
```

# javascript - 将数据从一个 django 应用程序发送到另一个应用程序时如何保持换行符

> ID：12092935
> 
> 赞同：2
> 
> 时间：2012-08-23T13:38:54.337
> 
> 标签：javascript, python, html, django

用户在 textarea (HTML) 中编写代码我发布这样的表单：

```
<form id="codeid" method="post" enctype="application/x-www-form-urlencoded" name="code" action="192.168.56.2:8000/api/comp/">
    <input id="textarea_1" name="content" cols="80" rows="15" type="text" onkeypress="return runScript(event)"></input>
    <input id="thebutton" type="button" value="Submit"  onclick="document.forms.codeid.submit();" /> 
</form> 
```

似乎用编码数据`"application/x-www-form-urlencoded"`不足以编码换行符，

这就是我将数据发送到其他应用程序的方式：

```
def comp(request):

    data = request.POST['content']
    url = urllib2.urlopen('http://192.168.56.2:8000/api/comp/?' + data)
    redirect('http://192.168.56.2:8000/api/comp/?' + data)
    tml = url.read()

    return HttpResponse(encoded_data) 
```

因此，例如，当用户键入 python 代码时；

```
def current_datetime(request):
    current_date=datetime.datetime.now()
    return render_to_response('index.html', locals()) 
```

这是收到的：

```
def+current_datetime%28request%29%3A++++current_date%3Ddatetime.datetime.now%28%29++++return+render_to_response%28%27index.html%27%2C+locals%28%29%29 
```

换行没有编码。我试图`<enter>`从键盘捕获事件并添加`\n`到文本区域的值，但它没有奏效。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:22:38.600

`urllib.urlquote()`在将数据附加到 URL 之前，您可能需要数据：

```
>>> import urllib
>>> urllib.quote('\n')
'%0A' 
```

# python - 使用 QTableWidget 显示一个巨大的工作表

> ID：12092941
> 
> 赞同：4
> 
> 时间：2012-08-23T13:39:06.820
> 
> 标签：python, pyqt, qtableview, qtablewidget

我需要使用 PyQt 类显示数据`QTableWidget`。但是可能有几十万行。显示整个工作表会使应用程序挂起......

所以我找到了一个解决方案，包括加载数据（意味着创建工作表）但隐藏大部分行，并且在移动滚动条时显示新行并隐藏以前的行。

在下面的代码中，我设置`self.rowsShown = 50`并在初始化时显示了从 1 到 50 的行。我以前做过`self.verticalScrollBar().actionTriggered.connect(self.refreshDisplay)`。

所以代码是：

```
def refreshDisplay(self):
    """
    This is to refresh the display when the scrollbar is moved
    """

    # Minimum is reached and a previous row exists
    if self.verticalScrollBar().value() <= self.verticalScrollBar().minimum() and self.isRowHidden(self.firstRowShown-1):# Minimum is reached and a previous row exists
        for row in xrange(self.lastRowShown-1, self.lastRowShown):
            self.hideRow(row)
            self.lastRowShown -= 1
        for row in xrange(self.firstRowShown-1, self.firstRowShown):
            self.showRow(row)
            self.firstRowShown -= 1
    # Maximum is reached and a next row exists
    if self.verticalScrollBar().value() >= self.verticalScrollBar().maximum() and self.isRowHidden(self.lastRowShown+1):
        for row in xrange(self.firstRowShown, self.firstRowShown+1):
            self.hideRow(row)
            self.firstRowShown += 1
        for row in xrange(self.lastRowShown, self.lastRowShown+1):
            self.showRow(row)
            self.lastRowShown += 1 
```

当我使用鼠标滚动或单击滚动条的按钮时，这非常有效。但是当我抓住滑块或使用键盘移动选定的案例时，我被挡在了显示的区域中。

此外，滚动区域的大小仅对应于所示的行。我想重新定义它以设置我自己的栏（例如，使用基于实际行数的大小），以便我可以快速移动到工作表的另一部分。但是滚动条的大小总是随着显示的行数而更新。

所以，我对你的期望是帮助我解决这两个问题，或者给我另一个想法来展示这么大的表格。也许我错过了一个在移动光标时已经具有加载/显示行功能的模块或类。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:05:19.473

我编写了一个工具，可以在类似 Excel 的表格中显示 10^6+ 行，而不会出现资源问题。解决方案是使用`QTableView`and `QAbstractTableModel`。您必须派生`QAbstractTableModel`并实现它需要您实现的必要功能（我记得`headerData`和`data`，但我认为还有更多）。然后通过执行将模型插入视图`view.setModel(model)`。可以在[此处](http://doc.qt.nokia.com/4.7-snapshot/model-view-programming.html)找到如何完成此操作的更多信息。

# php - 将 Jquery 值发送 到 PHP 页面

> ID：12092947
> 
> 赞同：0
> 
> 时间：2012-08-23T13:39:34.617
> 
> 标签：php, jquery, ajax, json

我真的很难让这个工作，所以任何帮助将不胜感激！

基本上我有一个 JQGRid 显示带有双击事件的预订，如下所示：

```
 ondblClickRow: function(rowid)
    {
        rowData = $("#bookings").getRowData(rowid);
                    var brData = rowData['bookref'];

        getGridRow(brData);
    }, 
```

这被传递给 getGridRow 函数：

```
function getGridRow(brData) {

    $.ajax({
      url: 'bookings-dialog.php',
      data: {'rowdata' : brData },
      dataType: 'json', //this is what we expect our returned data as
     error: function(){
                    alert("It failed");
                    $('#cp-div-error').html('');
                    $('#cp-div-error').append('<p>There was an error inserting the data, please try again later.</p>');
                    $('#cp-div-error').dialog('open');
             },
      success: function(data){
        //empty our dialog so we don't end up with duplicate content
        $('.cp-booking-info').empty();
        //we have told the browser to expect JSON back, no need to do any parsing
        //the date
        $('.cp-booking-info').append('<p class="pno-margin">Booking Date: '+data.bookref+'</p>');

        //now let's manipulate our dialog and open it.
        $("#cp-bookings-dialog").dialog({
          show: { effect: 'drop', direction: "up" },
          hide: 'slide',
          height: 625,
          width: 733,
          title: 'Booking Reference: - '+ brData
        });
      }

    }); 
```

这是bookings-dialog.php：

```
<?php

require_once('deployment.php');
require_once('bootstrp/all.inc.php');
require_once('models/sql.php');
require_once('models/bookingdocket.php');

    $pdo = new SQL();
    $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

    try {
           $rowdata = $_POST['rowdata'];

           $query = ("SELECT * FROM tblbookings WHERE bookref = '$rowdata'");

        $stmt = $dbh->prepare($query);

        $stmt->execute();

        $row = $stmt->fetch(PDO::FETCH_BOTH);

           BookingDocket::set_id($row['id']);
           BookingDocket::set_bookref($row['bookref']);
           BookingDocket::set_bookdate($row['bookingdate']);
           BookingDocket::set_returndate($row['returndate']);
           BookingDocket::set_journeytype($row['journeytype']);
           BookingDocket::set_passtel($row['passengertel']);
           BookingDocket::set_returndate($row['returndate']);

           $booking_ref = BookingDocket::get_bookref();

           return json_encode(array('bookref' => $booking_ref,
                                    )
                             );

        $stmt->closeCursor();

    }

    catch (PDOException $pe) {
        die("Error: " .$pe->getMessage(). " Query: ".$stmt->queryString);
    }

    $dbh = null;

?>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Title Work</title>
<link rel="stylesheet" type="text/css" href="css/main.css" />
<link rel="stylesheet" type="text/css" href="css/styles.css" />
<link rel="stylesheet" type="text/css" href="lib/jq-ui/jquery-ui-1.8.16.custom.css" />
<link rel="stylesheet" type="text/css" href="lib/jq-grid/ui.jqgrid.css" />
<script type="text/javascript" src="scripts/js/utils/util-sha256.js"></script>
<script type="text/javascript" src="lib/jq-core/jquery-1.4.4.min.js" ></script>
<script type="text/javascript" src="lib/jq-ui/jquery-ui-1.8.16.custom.min.js" ></script>
<script type="text/javascript" src="lib/jq-grid/grid.locale-en.js"></script>
<script type="text/javascript" src="lib/jq-grid/jquery.jqGrid.min.js" ></script>
<script type="text/javascript" src="scripts/js/interface-datagrids.js"></script>
<script type="text/javascript" src="scripts/js/image-preload.js"></script>
<script type="text/javascript" src="scripts/js/general-interface.js" ></script>
<script type="text/javascript" src="scripts/js/general-controlpanel.js" ></script>
<script type="text/javascript" src="scripts/js/general-validation.js"></script>

</head>

<body>

<div id="cp-bookings-dialog">
  <div class="cp-tiles-wrapper-dlg">
    <div class="cp-booking-info left">
    </div>
  </div>
</div>

</body>
</html> 
```

我想要实现的是，当您双击预订时，预订参考（例如`BR12345`）被传递给 bookings-dialog.php 并在查询中使用（例如`SELECT * FROM tblbookings WHERE bookref = '$rowdata'`）。我一直在尝试使用 JSON 来实现这一点，但是当我双击一行时，它现在只是失败了，我不确定为什么。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:45:22.337

尝试：

```
 $.ajax({
      type: 'POST',  //ADD THIS .ajax defaults to GET and in the php you expect POST
      url: 'bookings-dialog.php',
      data: {'rowdata' : brData }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:45:55.897

AJAX 调用的默认 HTTP 类型是 GET。您应该更改为 POST。

```
$.ajax({
type:'POST',
... 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# mysql - MYSQL 长超级键

> ID：12092948
> 
> 赞同：0
> 
> 时间：2012-08-23T13:39:38.887
> 
> 标签：mysql

我目前正在从事一个项目，该项目涉及更改存储在 MYSQL 数据库中的数据。由于我正在处理的表没有密钥，因此我使用以下命令添加了一个密钥：

```
ALTER TABLE deCoupledData ADD COLUMN MY_KEY INT NOT NULL AUTO_INCREMENT KEY 
```

由于我想根据所选字段对记录进行分组，因此我尝试为包含 MY_KEY 以及所选字段的表 deCoupledData 创建一个索引。例如，如果我想使用字段 STATED_F 和 NOT_STATED_F，我输入：

```
ALTER TABLE deCoupledData ADD INDEX (MY_KEY, STATED_F, NOT_STATED_F) 
```

真正的问题是我通常使用的字段超过 16 个，因此 MYSQL 不允许超键长于 16 个字段。总之，还有其他方法可以做到这一点吗？我可以（以某种方式）制作 MYSQL 以根据所需的超级键（类似于集群）对记录进行排序吗？我真的需要让我的脚本更快，主要开销是每个组可能包含未存储在磁盘同一页面上的记录，并且我假设我的电脑启动随机 I/O 以检索记录。

感谢您的时间。尼克·卡齐波拉基斯

```
CREATE TABLE deCoupledData ( 
AA double NOT NULL DEFAULT '0', 
STATED_F double DEFAULT NULL, 
NOT_STATED_F double DEFAULT NULL, 
MIN_VALUES varchar(128) NOT NULL DEFAULT '-1,-1', 
MY_KEY int(11) NOT NULL AUTO_INCREMENT, 
PRIMARY KEY (MY_KEY), 
KEY AA (AA) ) 
ENGINE=InnoDB AUTO_INCREMENT=74358 DEFAULT CHARSET=latin1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:19:14.123

好的，首先，当您在多个列上添加索引并且您并没有真正使用第一列时，索引是无用的。

示例：您有一个类似的查询

```
SELECT *
FROM deCoupledData 
WHERE
stated_f = 5
AND not_stated_f = 10 
```

和一个超过（MY_KEY，STATED_F，NOT_STATED_F）的索引。

`AND my_key = 1`只有在 WHERE 子句中有其他或某些内容时，才能使用索引。

想象一下，您想查找电话簿中名字为“John”的每个人。那么书按姓氏排序的知识是没有用的，你仍然需要查找每个名字。

此外，主键不必是代理/人工的。拥有一个由列组成的主键几乎总是更好，这些列无论如何都唯一地标识每一行。

此外，拥有许多索引并不总是好的。索引不仅会减慢 INSERT 和 UPDATE 的速度，有时还会导致额外的查找，因为首先查看索引，然后再查看实际数据。

这只是一些提示。也许 Jordan 的提示不是一个坏主意，“您可能应该发布一个新问题，其中包含您的实际 SQL 查询、表布局和性能问题”。

**更新：**

是的，这是可能的。根据[说明书](http://dev.mysql.com/doc/refman/5.0/en/innodb-index-types.html)

> 如果您在表上定义 PRIMARY KEY，InnoDB 会将其用作聚集索引。

这意味着数据实际上是在磁盘上排序的，是的。

**请注意，也可以在多个列上定义主键！**

喜欢

```
CREATE TABLE deCoupledData ( 
AA double NOT NULL DEFAULT '0', 
STATED_F double DEFAULT NULL, 
NOT_STATED_F double DEFAULT NULL, 
MIN_VALUES varchar(128) NOT NULL DEFAULT '-1,-1', 
MY_KEY int(11) NOT NULL AUTO_INCREMENT, 
PRIMARY KEY (NOT_STATED_F, STATED_F, AA), 
KEY AA (AA) ) 
ENGINE=InnoDB AUTO_INCREMENT=74358 DEFAULT CHARSET=latin1 
```

只要列的组合是唯一的。

# java - 依赖于库时的不同属性文件

> ID：12092950
> 
> 赞同：0
> 
> 时间：2012-08-23T13:39:43.800
> 
> 标签：java, maven

我有两个不同的项目，A 和 B。这两个项目都加载了自己的属性：

```
new PropertiesConfiguration("application.properties") 
```

每个`application.properties`都位于 Maven 资源根目录中。

当我单独执行项目 B 时，所有属性都已正确加载。

项目A依赖于项目B。当我执行项目A时，项目B的属性类无法加载正确的属性，因为加载了项目A的属性。

每个项目如何加载正确的属性，即使它们作为依赖项包含在内。我必须指定在不同的上下文中加载资源，但我不知道如何。

我的 Maven 资源设置：

```
<resource>
  <directory>${project.build.sourceDirectory}</directory>
  <filtering>true</filtering>
</resource>
<resource>
  <directory>${basedir}/src/main/resources</directory>
  <filtering>true</filtering>
</resource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:32:13.550

您可以像这样遍历所有 application.properties 文件

```
 for (Enumeration<URL> urls = ClassLoader.getSystemResources("application.properties"); urls.hasMoreElements();) {
        URL url = urls.nextElement();
    } 
```

根据您的应用程序，您必须选择在找到多个属性文件时如何进行。我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:52:58.263

您可能有一些针对项目 B 的特定包，例如

```
com.company.packageB 
```

所以把你`application.properties`的

```
src/main/resources/com/company/packageB/application.properties 
```

项目 A 也是如此

# sql - 将另外两列相加

> ID：12092952
> 
> 赞同：-1
> 
> 时间：2012-08-23T13:39:51.650
> 
> 标签：sql

我有两张桌子`readysale`和`ordersale`. 我想得到两个表的总和。表格的列 `t1=pid,branch,quantity` 和 `t2=pid,branch,quantity`.我需要分支列中所有分支的列表并显示.的总和数量`readysale,ordersale`。一些分店他们没有准备好或订购，但它应该在列表中显示为 0 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:44:44.493

这将从按分支分组的两个表中获得总数量：

```
select sales.branch, sum(sales.quantity) as quantity
from (
    select branch, quantity
    from readysale
    union
    select branch, quantity
    from ordersale
) as sales
group by sales.branch 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:44:57.883

```
select sum(u.quantity) as total, u.branch 
from (
    select quantity, branch 
    from readysale
    union
    select quantity, branch 
    from ordersale
    ) as u
group by u.branch 
```

编辑 ：

然后

```
select u.itemcode, u.branch, sum(u.ordersaleqty), sum(u.readysaleqty)
from (
        select itemcode, branch, 0 as ordersalqty, quantity as readysaleqty 
        from readysale
        union
        select itemcode, branch, quantity as ordersalqty, 0 as readysaleqty  
        from ordersale
        ) as u
group by u.itemcode, u.branch 
```

或使用完全外连接

```
 select 
    coalesce(r.itemcode, o.itemcode), 
    coalesce(r.branch, o.branch),
    sum (r.quantity) as readysaleqty,
    sum (o.quantity) as ordersaleqty
  from readysale r
  full outer join ordersale o on o.branche = r.branch
  group by coalesce(r.itemcode, o.itemcode), coalesce(r.branch, o.branch); 
```

# php - magento 自定义付款方式表单未显示在实时站点上，但正在分期工作

> ID：12092956
> 
> 赞同：1
> 
> 时间：2012-08-23T13:40:02.513
> 
> 标签：php, magento

我有自定义支付模块。我发现在 onestepheckout 中，这是呈现付款方式表单的方式：

```
<?php if ($html = $this->getPaymentMethodFormHtml($_method)): ?>
<dd id="container_payment_method_<?php echo $_code; ?>" class="payment-method" <?php      if(!$this->getSelectedMethodCode()==$_code || !($hide_nonfree_methods && $_code == 'free')): ?> style="display:none"<?php endif; ?>>

<?php echo $html; ?>
</dd> 
```

所以，对于我的方法 $this->getPaymentMethodFormHtml($_method) 是 FALSE。为什么？请帮我，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:11:06.460

检查你的后端，

```
system > configuration > sales > payment methods 
```

启用任何方法？

如果没有*启用*，它将返回**FALSE**。

# ruby-on-rails - 创建新评级时更新帖子属性

> ID：12092964
> 
> 赞同：1
> 
> 时间：2012-08-23T13:40:29.573
> 
> 标签：ruby-on-rails, ruby, model, update-attributes

我有一个帖子模型，它有很多评级，我想将每个帖子的平均评级数字存储在帖子评级数据库列中。我在帖子模型上有一个计数器缓存，用于计算评分的数量。

我的 post.rb 中有以下代码

```
def update_rating
    if self.ratings_count_changed? 
      self.rating = self.ratings.average(:rating)
    end
  end 
```

我把它作为 before_save 回调，所以每当编辑和保存帖子时，它都会更新评级，不是很有用。

有没有一种方法可以在创建新评级时调用此方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:46:22.850

您是否考虑将平均评分存储在评分模型中而不是后模型中？在这种情况下，您不需要任何回调，并且您需要在更改后的第一次请求中重新计算平均值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:52:33.303

不是在帖子上保存 before_save，而是在评级上执行 after_create，因为听起来您需要在创建新评级时更新该评级分数，而不是在保存帖子之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T13:52:53.473

接近目标的一种方法是`after_create`向模型添加回调`Rating`：

```
class Rating < ActiveRecord::Base
  belongs_to :post

  # ...

  after_create :update_post_average_rating
  def update_post_average_rating
    self.post.update_attributes(:rating => self.post.ratings.average(:rating))
  end
end 
```

甚至更 OO 友好的版本：

```
class Post < ActiveRecord::Base
  has_many :ratings

  # ...

  def update_average_rating
    update_attributes(:rating => self.ratings.average(:rating))
  end
end

class Rating < ActiveRecord::Base
  belongs_to :post

  # ...

  after_create :update_post_average_rating
  def update_post_average_rating
    self.post.update_average_rating
  end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T13:53:29.183

如何将其放入评级模型：

```
after_create :update_post_average_rating

def update_post_average_rating
  self.post.rating = #....
end 
```

# c# - cshtml c#由于某种原因不听分配的ID？

> ID：12092967
> 
> 赞同：0
> 
> 时间：2012-08-23T13:40:38.933
> 
> 标签：c#, jquery, asp.net-mvc-3, visual-studio, razor

所以我有一个我正在研究的基本 CRUD，我试图让 Jquery 验证工作。除了我需要给我的表单一个 id 之外，我几乎都设置好了。我在 Visual Studio 中使用 cshtml 并尝试使用以下代码将 id 分配给表单：

```
@using (Html.BeginForm( new { id = "daftform" })) {
@Html.ValidationSummary(true)
<fieldset>
<legend>News</legend> 
```

然而生成的 html 看起来像这样：

```
<form action="/News/Create/daftform" method="post">    <fieldset>
    <legend>News</legend> 
```

我很确定这是为元素分配 id 的方法，因为我使用此方法以类似的方式分配类。谁能告诉我我哪里出错了？

我只是希望它将“daftform”分配为 id 而不是作为操作。

对不起，如果它是一个简单的答案，对 c# 来说相当新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:43:50.180

使用[这个](http://msdn.microsoft.com/en-us/library/dd492714%28v=vs.108%29.aspx) 重载

```
public static MvcForm BeginForm(
    this HtmlHelper htmlHelper,
    string actionName,
    string controllerName,
    FormMethod method,
    Object htmlAttributes
) 
```

所以您的代码可以更改为

```
@using (Html.BeginForm("Create","News",FormMethod.Post, new { id = "daftform" }))
{
  //form elements
} 
```

这将创建一个属性设置为的`form`标签`Id``"daftform"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:51:02.727

@using (Html.BeginForm(,"actionname","controllername",formmethod.post/get, new {id = "yourId"})

是要走的路

# actionscript-3 - AS3 在movieclip的父级中改变变量

> ID：12092971
> 
> 赞同：0
> 
> 时间：2012-08-23T13:40:44.403
> 
> 标签：actionscript-3, typeerror

我正在尝试使用以下方法更改影片剪辑的父级或根目录中的变量：

```
this(root).variable 
```

到目前为止，我只遇到过错误，我不知道如何修复它们。变量在舞台上。

当前的错误是：

> TypeError：错误 #1034：类型强制失败：无法将 flash.display::Stage@28b7ef99 转换为 flash.display.MovieClip。

有谁知道我做错了什么？
似乎这对其他人都有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:24:36.643

尝试

```
Movieclip(parent).variable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:50:17.080

你的意思 ：

```
this.root.variable 
```

或者

```
this.parent.variable 
```

# mongodb - MongoDb：根据每个文档的计算查询文档

> ID：12092972
> 
> 赞同：3
> 
> 时间：2012-08-23T13:40:48.860
> 
> 标签：mongodb

我想从 MongoDB 数据库中查询一个文档，其中条件是给定计算的结果。我不知道这是否可以理解，模拟 SQL 查询可能会有所帮助：

```
SELECT * FROM tasks AS t WHERE t.lastRun < (NOW() - t.maxAge) 
```

每个任务都有一个 maxAge 字段，用于确定任务应该运行的频率。如果达到 maxAge，则查询应返回该任务，然后执行该任务。

因为我缺乏描述这样一个查询的词汇，所以很难找到关于这个主题的任何内容。如果在某处提到这一点，请原谅。:-)

我的第一个反应是：让我们映射整个集合以包含每个任务的计算阈值，但这对于这样一个简单的查询来说似乎有点太多了。我希望这不是唯一的解决方案。:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T16:24:45.570

你可以试试

```
db.tasks.insert({lastRun:new ISODate(), maxAge:100});

db.tasks.find({ $where: "this.maxAge < (new ISODate()-this.lastRun)"}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T20:47:52.357

使用 $where 的问题是它无法被索引，并且当前在服务器上运行 javascript 查询存在问题，因为 javascript 引擎是单线程的。

在这种情况下，更好的方法是

将：t.lastRun < (NOW() - t.maxAge) 重写为： (t.lastRun + t.maxAge) < NOW()

插入时将计算 t.lastRun 和 t.maxAge 的总和并将其存储在附加字段中。因此，生成的查询只需要一次比较。

# macos - 无法在 vmware 上安装 Mac OS Lion

> ID：12092976
> 
> 赞同：-1
> 
> 时间：2012-08-23T13:40:56.720
> 
> 标签：macos, osx-lion, vmware

我尝试在 Vmware（8.0 和 7.1）上安装 Mac OS，但出现此错误：

“Mac OS X 不支持软件虚拟化。要运行 Mac OS X，您需要一台 VMware Workstation 支持硬件虚拟化的主机。”

我尝试在谷歌上搜索，有人说我需要进入 BIOS 并启用虚拟化。我去了那里，但我没有在 BIOS 中看到虚拟化。

我使用 Intel Processor ID Utility 工具检查 CPU 并看到：

英特尔(R) 虚拟化技术是 -> 否。

有什么方法可以在我的 PC 上安装 Mac OS 吗？我需要它来学习 iPhone 编程...谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:43:46.770

除非您打破 EULA 并安装自定义内核扩展，否则不会。你必须买一台Mac。这就是与苹果的交易。

请参阅[http://images.apple.com/legal/sla/docs/macosx107.pdf](http://images.apple.com/legal/sla/docs/macosx107.pdf)

它仅提及“Mac 电脑”和“Apple 品牌电脑”。

# java - 如何使用 Jersey 客户端为每个 POST 请求建立新连接

> ID：12092977
> 
> 赞同：0
> 
> 时间：2012-08-23T13:40:59.187
> 
> 标签：java, ssl, https, jersey

我的程序应该向 https 站点发出多个 POST 请求，并且每次发出新请求时我都需要它进行 SSL 握手。然而，它似乎只在第一次握手，然后使用现有连接来执行其他请求而无需新的握手。我确定它以后不会握手，因为第一次大约需要 700 毫秒来完成请求并收到响应，但后来只需要大约 30 毫秒。

这是我初始化客户端的方式：（我在这里缺少一些属性吗？）

```
 SSLContext context = SSLContext.getInstance("SSL");
    context.init(kms, trustAllCerts, null);
    SSLContext.setDefault(context);

    ClientConfig config = new DefaultClientConfig();
    config.getProperties().put(ClientConfig.PROPERTY_READ_TIMEOUT, timeout * 1000);
    config.getProperties().put(ClientConfig.PROPERTY_FOLLOW_REDIRECTS, false);
    config.getFeatures().put(ClientConfig.FEATURE_DISABLE_XML_SECURITY, true);
    client = Client.create(config); 
```

以下是我提出实际请求的方式：

```
 ClientResponse cr = service.type(MediaType.APPLICATION_XML).accept(MediaType.APPLICATION_XML).post(ClientResponse.class, batch); 
```

（服务变量是 Builder 类，它创建 ClientRequest。它是指定 URL 的位置。）

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T22:48:13.383

HTTP 具有持久连接，而 SSL 具有可恢复的会话，这两者都专门用于防止您尝试完成的操作。

如果您深入研究服务器的内部结构，您可能会出于测试目的以某种方式将它们都关闭，但我真的看不出测试一个您会在生产中部署的配置有什么意义。

# database - H2 数据库授权认为序列是一个表

> ID：12092982
> 
> 赞同：2
> 
> 时间：2012-08-23T13:41:10.897
> 
> 标签：database, h2

我在 H2 上运行一个脚本，它执行以下操作：

```
create role admin_role;
create user app_user password 'password' ;

grant admin_role to app_user;

create sequence from_event_seq;
grant select on from_event_seq to admin_role; 
```

令人沮丧的是，这不起作用，我收到以下错误：

```
 [Error Code: 42102, SQL State: 42S02]  Table "FROM_EVENT_SEQ" not found; SQL statement: grant select on  from_event_seq to admin_role [42102-154] 
```

奇怪的是，错误消息似乎认为我正在尝试授予表（42102 是未找到表错误）。此外，我实际上可以查询序列并且它可以工作（这意味着它已经被创建）。H2 的授权语法未指定应将授权应用于何种对象类型。

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T14:53:23.023

所以...仔细阅读 H2 文档（请参阅[此处](http://www.h2database.com/html/grammar.html#grant_right)）表明 h2 中的“授予权利”语句仅适用于表。因此错误。由于我使用 H2 进行单元测试，并且脚本最终要在 Oracle 上运行，所以我暂时需要跳过授权。

# android - 如何将微调器添加到 AlertDialog.Builer？

> ID：12092984
> 
> 赞同：1
> 
> 时间：2012-08-23T13:41:12.833
> 
> 标签：android, exception, dialog, spinner, android-alertdialog

我正在使用 AlertDialog.Builder 创建自定义 AlertDialog。但是，我无法让我的微调器在 AlertDialog 中工作。每当我单击微调器时，我都会收到一条错误消息

```
android.view.WindowManager BadTokenException: Unable to add window--token null
is not for an application 
```

最初，我认为这是由于我的自定义适配器造成的，但这不是错误的原因。我不明白为什么会这样。多年来，我一直以这种方式编码我的微调器，但从未遇到过这个问题。这是我的代码。提前致谢。

```
public void openCustomDialog(){
    AlertDialog.Builder customDialog= new AlertDialog.Builder(Portfolio.this);
    customDialog.setTitle("Create Portfolio");

    LayoutInflater layoutInflater = (LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View view=layoutInflater.inflate(R.layout.createdialog,null);

    EditText enterportfolioname = (EditText)view.findViewById(R.id.enterportfolioname);
    Spinner denominationselection = (Spinner)view.findViewById(R.id.denomination);
    ArrayAdapter<String> adaptercreatetype;
    createdenominationsarray = getResources().getStringArray(R.array.createdenominations);    
    adaptercreatetype = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item,createdenominationsarray){
            @Override
            public View getDropDownView(int position, View convertView, ViewGroup parent)
            {
                View v = null;

                // If this is the initial dummy entry, make it hidden
                if (position == 0) {
                    TextView tv = new TextView(getContext());
                    tv.setHeight(0);
                    tv.setVisibility(View.GONE);
                    v = tv;
                }
                else {
                    // Pass convertView as null to prevent reuse of special case views
                    v = super.getDropDownView(position, null, parent);
                }

                // Hide scroll bar because it appears sometimes unnecessarily, this does not prevent scrolling 
                parent.setVerticalScrollBarEnabled(false);
                return v;
            }
        };      
    adaptercreatetype.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    denominationselection.setAdapter(adaptercreatetype);

 customDialog.setPositiveButton("Save", new DialogInterface.OnClickListener(){

 @Override
 public void onClick(DialogInterface dialog,int which) {
 // TODO Auto-generated method stub

 }});

 customDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener(){

 @Override
 public void onClick(DialogInterface dialog,int which) {
 // TODO Auto-generated method stub

 }});

   customDialog.setView(view);
   customDialog.show();     

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:56:23.513

具有您自己的布局的 DialogFragment 将解决您的所有问题，让您的生活更轻松:) 是的，它适用于带有支持库的旧版本的 android。

您的问题也可以通过使用活动上下文而不是应用程序上下文来解决。在这里查看更多信息：[https ://stackoverflow.com/a/2639515/969325](https://stackoverflow.com/a/2639515/969325)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:31:46.333

非常简单的解决方案，而不是...

```
LayoutInflater layoutInflater = (LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

采用...

```
LayoutInflater layoutInflater = getLayoutInflater(); 
```

这将缓解您的问题。

# c# - 从字符串中读取双精度值

> ID：12092989
> 
> 赞同：2
> 
> 时间：2012-08-23T13:41:24.407
> 
> 标签：c#, .net, double

我已经尝试解决这个问题好几个小时了，但绝对不明白编译器在这里做了什么。我有基本上看起来像这样的字符串：

```
"KL10124 Traitor #2 - +XX-+0.25 - More Stuff" 
```

并且需要以编程方式读取双“0.25”。调用s上面的字符串，下面两行不起作用：

```
string[] h = s.Split('-');
string h2 = h[2].Substring(1,h[2].Length - 2);
double d = Convert.ToDouble(h2); 
```

如果我显示 d，则输出为“25”。我认为这可能取决于'。resp ',' 文化依赖，但如果我插入

```
double d = Convert.ToDouble(h2.Replace('.',',')); 
```

它没有改变任何东西，输出仍然是“25”。

但最后，如果我执行下面的蛮力方法，我会在屏幕上得到逐字输出“0,25”

```
double d;
string[] h = s.Split('-');
string h2 = h[2].Substring(1,h[2].Length - 2);
if (h2.Contains("."))
{
    string[] h3 = h2.Split('.');
    d = Convert.ToDouble(h3[0]) + Convert.ToDouble(h3[1])/100;
}
else
{
    d = Convert.ToDouble(h2);
}
return d; 
```

为什么前两个版本不起作用？最后一点代码不可能是正确的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T13:48:05.083

尝试使用

```
double d = Convert.ToDouble(h2, CultureInfo.InvariantCulture); 
```

代替

```
double d = Convert.ToDouble(h2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T13:52:25.720

许多人已经提到使用正则表达式。如果您对 Regex 不是很熟悉，那么此页面可能会对您有所帮助：

[http://txt2re.com/index-csharp.php3?s=%22KL10124%20Traitor%20%232%20-%20%2bXX-%2b0.25%20-%20More%20Stuff%22&-7](http://txt2re.com/index-csharp.php3?s=%22KL10124%20Traitor%20%232%20-%20%2bXX-%2b0.25%20-%20More%20Stuff%22&-7)

干杯

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T14:25:51.830

尝试正则表达式方式：

```
string input = "KL10124 Traitor #2 - +XX-+0.25 - More Stuff";

Match match = Regex.Match(input, "^.*([0-9]+\\.[0-9]+).*$");

if (match.Success)
{
    double value = Convert.ToDouble(match.Groups[1].Value, CultureInfo.InvariantCulture);
    Console.Write(value);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-23T13:47:32.200

```
d = double.Parse(h2,CultureInfo.InvariantCulture); 
```

您需要将转换操作的格式提供程序设置为不变。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T13:48:24.657

您应该在转换之前查看 h2。看起来它不包括小数点。Convert.ToDouble 可能需要前导 0 才能知道它也是一个分数，我不确定。

一般来说，使用正则表达式要容易得多。看到[这个答案](https://stackoverflow.com/questions/308122/simple-regular-expression-for-a-decimal-with-a-precision-of-2)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-23T13:50:33.757

使用这样的 RegEx 查询：

```
^KL\d+ Traitor #\d \- \+XX\-\+(\d+\.\d+) \- .+ 
```

分组（括号中的表达式）将为您提供结果。

请参阅[沙盒](http://rubular.com/r/2xOgRO6xv4)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-23T13:48:46.783

在第一个代码示例中打印 h2 以查看您是否正确执行子字符串提取。

同样使用正则表达式来提取数字会更直接。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-23T13:52:39.083

使用正则表达式

```
(?<=\+)([0-9\.])+ 
```

# apache-flex - 在线上方填充 flex AreaSeries

> ID：12092991
> 
> 赞同：1
> 
> 时间：2012-08-23T13:41:31.297
> 
> 标签：apache-flex, charts

我想在 Flex 中有一个 AreaSeries，填充放置在数据点上方。有没有办法做到这一点？

# activemq - Mule 中的 ActiveMQ 负载均衡

> ID：12092994
> 
> 赞同：1
> 
> 时间：2012-08-23T13:41:38.237
> 
> 标签：activemq, messaging, mule

我在使用 Mule 进行 ActiveMQ 负载平衡时遇到问题。我正在使用 Mule 3.2.0 和 ActiveMQ 5.5.1

我有一个 Mule FLow 应用程序，它使用 JMS 入站端点来监听 ActiveMQ 中的队列。我有 2 个 AMQ 实例运行，每个实例都有一个名为“MyQueue”的队列。让我们将它们命名为 AMQ1 和 AMQ2。我还运行了 2 个 mule 实例——每个实例都有相同的应用程序。我们将它们命名为 Mule1 和 Mule2。

现在我希望每个 mule 实例从任一 AMQ 队列中获取消息。所以说消息发送者将消息发送到 AMQ1 或 AMQ2 中的队列 MyQueue （消息发送者使用 ActiveMQ 支持的故障转移传输进行负载平衡 - 并且该位工作正常）。假设它达到了 AMQ1。现在理想情况下，我希望在每个 AMQ 实例中注册 Mule1 和 Mule2 各有 10 个消费者。所以他们俩都在监听两个队列中的传入消息。其中之一应该从队列中提取消息并进行处理。

这是我在 Mule 中用来连接两个 AMQ 代理的配置。

```
 <jms:activemq-connector name="Active_MQ"  brokerURL="failover:tcp://10.0.64.158:61616,tcp://10.0.64.160:61616)?randomize=true"  eagerConsumer="true" numberOfConsumers="10" dynamicNotification="true" validateConnections="true" clientId="MuleInstance1"  doc:name="Active MQ">
      <reconnect count="5" frequency="3000" blocking="false"/>

  </jms:activemq-connector> 
```

请注意，对于不同的 Mule 实例，clientId 是不同的。目前 AMQ 1 和 Mule1 共享同一台机器，AMQ2 和 Mule2 共享另一台机器。

但是我注意到一些随机行为。有时，所有消费者（Mule1 和 Mule2）只注册到一个 AMQ 实例。有时 Mule1 仅注册到 AMQ1，而 Mule 2 注册到 AMQ2。理想情况下我想要的是 Mule1 和 Mule2 的 cosnumers 注册到 AM1 和 AMQ2 我按照这里的说明 [http://www.mulesoft.org/documentation-3.2/display/MULE3USER/ActiveMQ+Integration](http://www.mulesoft.org/documentation-3.2/display/MULE3USER/ActiveMQ+Integration)

基本上我想使用代理架构的网络，这样无论 Mule 实例或 AMQ 实例出现故障还是必须重新启动，都不会丢失服务。在这种情况下，不确定**randomize=true**查询参数是否有帮助。

有人可以建议如何使用 Mule 3.2.0 和 Active MQ 5.5.1 实现上述目标吗？

遗憾的是，如果没有解决方案，我可能不得不让 Mule1 听 AMQ1，而 Mule2 只听 AMQ2，它不会真正被集群:(

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:59:45.423

得到它的工作。得到了骡子论坛本身的建议。

[http://forum.mulesoft.org/mulesoft/topics/activemq_loadbalancing_with_mule](http://forum.mulesoft.org/mulesoft/topics/activemq_loadbalancing_with_mule)

所以基本上我没有为消费者依赖 AMQ 负载平衡，而是使用了 2 个 AMQ 连接器，并在每个 mule 应用程序中使用了一个复合源来监听 2 个入站端点。它是一种享受。启动/关闭 Mule 和 AMQ 实例 - 一切都很好。这是配置

```
 <jms:activemq-connector  name="Active_MQ_1"  brokerURL="failover:  (tcp://10.0.64.158:61616)"  eagerConsumer="true"  numberOfConsumers="10"  dynamicNotification="true"  validateConnections="true"  clientId="MuleInstance1"  doc:name="Active MQ">
       <reconnect count="5" frequency="3000" blocking="false"/>

     </jms:activemq-connector>
     <jms:activemq-connector  name="Active_MQ_2"  brokerURL="failover:(tcp://10.0.64.160:61616)"  eagerConsumer="true"  numberOfConsumers="10"  dynamicNotification="true"  validateConnections="true"  clientId="MuleInstance1"  doc:name="Active MQ">
     <reconnect count="5" frequency="3000" blocking="false"/>

      </jms:activemq-connector> 
```

现在使用复合源从您的流程中引用它

```
 <flow name="MyAutomationFlow" doc:name="MyAutomationFlow">
      <composite-source>
          <jms:inbound-endpoint queue="MyOrderQ" connector-ref="Active_MQ1" doc:name="JMS Inbound Endpoint"/>
          <jms:inbound-endpoint queue="MyOrderQ" connector-ref="Active_MQ2" doc:name="JMS Inbound Endpoint"/>
      </composite-source>
   ........ 
```

工作了一个款待！

# javascript - 从内容脚本 onbeforeunload 向插件发送消息？

> ID：12092996
> 
> 赞同：6
> 
> 时间：2012-08-23T13:41:43.487
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk, dom-events

我有一个内容脚本，它计算用户查看页面的时间。为此，我将一个内容脚本注入每个页面，启动一个计时器，然后在`onbeforeunload`触发事件时向附加组件发送一条消息。

但是，该消息似乎永远不会传递给后台脚本。

鉴于我的`main.js`样子是这样的：

```
var pageMod = require('page-mod'),
    self = require("self");

pageMod.PageMod({
  include: "http://*",
  contentScriptFile: [self.data.url('jquery.min.js'),
                      self.data.url('content.js')],
  onAttach: function(worker) {
    worker.port.on('pageView', function(request) {
      console.log("Request received");
    });
  }
}); 
```

我可以`main.js`使用以下代码发送消息没有问题。

```
self.port.emit('pageView', { visitTime: time }); 
```

但是，当我在用户离开页面时尝试这样做时遇到了问题。当我这样做时，永远不会收到该消息：

```
$(window).bind('onbeforeunload', function(e) {
  self.port.emit('pageView', { visitTime: time });
  // This should prevent the user from seeing a dialog.
  return undefined;
}); 
```

我也试了听，`beforeunload`还是不行。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T00:26:22.943

内容脚本在 Firefox 浏览器加载项中访问的`window`对象是代理对象，可能有点喜怒无常。使用`window.addEventListener`将起作用。

```
window.addEventListener('beforeunload', function(e) {
  # Do stuff then return undefined so no dialog pops up.
  return undefined
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:12:26.530

onbeforeUnload 事件不是[同步](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Synchronous_and_Asynchronous_Requests#Irreplaceability_of_the_synchronous_use)的，因此浏览器垃圾会在页面完成之前收集页面。使用[同步 AJAX 请求](https://dvcs.w3.org/hg/webperf/raw-file/tip/specs/Beacon/Overview.html)：

```
function Data() 
 {
 var client = new XMLHttpRequest();
 client.open("GET", "/request", false); // third paramater indicates sync xhr
 client.setRequestHeader("Content-Type", "text/plain;charset=UTF-8");
 client.send({ visitTime: time });
 client.onreadystatechange = emitter;
 }

function emitter()
 {
 self.port.emit('pageView', { visitTime: time });
 } 
```

或[返回一个字符串](https://stackoverflow.com/questions/1802930/setting-onbeforeunload-on-body-element-in-chrome-and-ie-using-jquery)作为替代。