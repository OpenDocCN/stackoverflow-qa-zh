# StackOverflow 问答 12385000-12385999

# c# - 在 mdi 应用程序中使用不同的表单

> ID：12385000
> 
> 赞同：0
> 
> 时间：2012-09-12T09:24:30.340
> 
> 标签：c#, winforms

我有一个使用 C# 的应用程序，其中我有一个名为 MdiContainer 表单的表单，`parentmdiform`我的所有子表单都在其中打开。

从这个子菜单中，`parentmdiform`一个名为的表单被打开。从`studentmasterform`这个表单中点击一个按钮，一个名为existingstudent form 的新表单被打开。

当我想`studentmasterform`再次返回时`Existingstudentform`，单击一个按钮即可打开。`studentmasterform`但问题是我之前`studentmasterform`从父表单打开并没有得到焦点或关闭。这意味着我得到了两个相同表单的单独对象，即 Studentmasterform存在于我的`parentmdiform`.

我想要的是，当我单击 MDI 应用程序中的任何其他表单以访问早期表单时，同一个表单对象应该得到聚焦或处理。

谁能告诉我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:29:24.533

您需要跟踪`studentmasterform`. 如果它在那里，创建，不要创建新的，做`Keyboard.Focus(oldOne);`

PS 有`studentmasterform.Closed`事件可以帮助您保持跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:34:50.177

我希望我明白你想做什么。首先，如果您希望 Form 在失去焦点时关闭，请查看 Form 类的“Deactivate”事件。[MSDN 停用事件]：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.form.deactivate.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.deactivate.aspx)

当您只需要打开一次表单时，您可以检查“parentmdiform.MdiChildren”以获取您的 MDI From 的所有子项。你可以给你的表单一个唯一的名字，这样更容易集中注意力。

问候， C#er

# postgresql - 从值可以为空的表中选择

> ID：12385001
> 
> 赞同：0
> 
> 时间：2012-09-12T09:24:33.310
> 
> 标签：postgresql, select, null

我尝试从这样的一张表中进行选择：

```
SELECT * FROM table1 where id=311
         and date BETWEEN '2012-09-01' And '2012-09-09' 
         and col2='a'
         and (col3 ='m' 
              or col3 ='n' 
              or col3=' ' )
ORDER BY date 
```

在表中，我遇到 col3 的值为“m”、“n”或 null 的情况，但此选择不返回 col3 值为 null 的行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:28:16.763

`NULL``' '`是使用以外的东西`col3 is null`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T09:53:51.790

数据库中存在三值逻辑： **TRUE, FALSE, NULL(unknown)**

**col3 =''** 是一个真实的条件，

**col3 为 null**是未知条件。

它们不一样。

所以你必须使用

> col3 为空

您可以参考[维基百科的“NULL”条目](http://en.wikipedia.org/wiki/Null_%28SQL%29)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T09:29:11.240

NULL 不等于 'm' 、 'n' 或 ' ' 。NULL 甚至不等于 NULL。利用：

```
SELECT * FROM table1 where id=311
         and date BETWEEN '2012-09-01' And '2012-09-09' 
         and col2='a'
         and (col3 ='m' 
              or col3 ='n' 
              or col3 IS NULL)
ORDER BY date 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T09:29:35.263

```
SELECT * 
FROM table1 
where 
    id=311
    and date BETWEEN '2012-09-01' And '2012-09-09' 
    and col2='a'
    and (
        col3 ='m' 
        or col3 ='n' 
        or col3 is null 
    )
ORDER BY date 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-12T09:34:55.047

这是一个避免 OR 列表的好技巧，同时也避免了`OR IS NULL`：

```
SELECT * 
FROM table1
WHERE id=311
 AND zdate BETWEEN '2012-09-01' AND '2012-09-09' 
 AND col2='a'
 AND COALESCE(col3, 'm') IN ('m', 'n' )
ORDER BY zdate
   ; 
```

# javascript - 背景图像顶部的滚动图像不移动

> ID：12385007
> 
> 赞同：1
> 
> 时间：2012-09-12T09:24:46.607
> 
> 标签：javascript, html, css

我试图在我的背景图像上滚动一个透明图像。我遵循了位于此处的教程：[http ://www.kudoswebsolutions.com/blog/jquery_scrolling_background/demos.html](http://www.kudoswebsolutions.com/blog/jquery_scrolling_background/demos.html)

我稍微修改了代码，因为我只需要滚动覆盖而不是背景本身。目前，我可以在背景图像上看到我的叠加图像，但它没有移动。

想象我的背景图像是酒，而叠加图像是移动的气泡。

在原始教程中，背景是移动的，并且与图像（气泡）重叠。我（尝试）所做的更改是让覆盖滚动而不是背景。即使我已将值从 更改`$('#container').css("background-position", "50% " + offset + "px");`为`$('#overlay').css("background-position", "50% " + offset + "px");`，图像也不会移动。我在 .js 文件中保留了其他所有内容。

此外，在本教程中，overlay-div 被封装在 container-div 中。如您所见，我现在已将 body-div 封装在自己的 HTML 文件中的 overlay-div 中。此外，我已将 CSS 文件中叠加层的位置更改为`relative`.

我的代码：

HTML页面：

```
<!DOCTYPE html>
<html>
<head>
    <title>title</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="resources/assets/styles.css" type="text/css"  />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
    <script type="text/javascript" src="js/custom.js"></script>
    <script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js"></script>
</head>
<body>
<div id="overlay">
<div class="body">
<div class="header">
...
</div>
</body>
</html> 
```

我的 CSS 文件：

```
body {
        background-image: url("../images/background.jpg");
        width: 1104px;
        height: 976px;
        display: block;
        margin-left: auto;
        margin-right: auto;
        font-family: Verdana;
}

#overlay {
        position:relative;
        width:899px;
        height:858px;
        background:url("../images/overlay.png");
} 
```

还有我的 JS 文件：

```
$(function() {
    // Define the height of your two background images.
           //The image to scroll
       var backgroundheight = 1000;

    // Create a random offset for both images' starting positions
        offset = Math.round(Math.floor(Math.random()* 2001));

    function scrollbackground() {
                //Ensure all bases are covered when defining the offset.
        offset = (offset < 1) ? offset + (backgroundheight - 1) : offset - 1;
        // Put the background onto the required div and animate vertically
        $('#overlay').css("background-position", "50% " + offset + "px");
        // Enable the function to loop when it reaches the end of the image
        setTimeout(function() {
            scrollbackground();
            }, 100
        );
    }

    // Initiate the scroll
    scrollbackground();

    // Use the offset defined earlier and apply it to the div.
        $('#overlay').css("background-position", "50% " + offset + "px");
}); 
```

谁能看到我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:17:58.003

我的 JavaScript 资源链接有问题。如果人们对这个概念的工作原理感兴趣，请查看我的 Fiddle：http: [//jsfiddle.net/YuBpA/](http://jsfiddle.net/YuBpA/)。原始教程来自[http://www.kudoswebsolutions.com/blog/jquery_scrolling_background/demos.html](http://www.kudoswebsolutions.com/blog/jquery_scrolling_background/demos.html)，一定要看看那里。

# django - 如何根据登录django的用户在模板中显示不同的按钮

> ID：12385008
> 
> 赞同：-1
> 
> 时间：2012-09-12T09:24:46.487
> 
> 标签：django, django-templates, django-views

我需要根据用户的登录在我的模板中显示不同的按钮。场景是我的模板显示跟随按钮：

```
Check whether the user logged in or not-
  if user logged in-
   check which channel he follwed:
     if he followed any channel 
       beside that channel name show "followed" button
     else
       show "follow" button with the path follow_save 
  elif user not logged in:
     show follow button with the path follow_save 
```

我被卡住了怎么办？这是视图任务还是模板任务？怎么做？你们专家的任何帮助都会救我..我也想从会话中获取 user_id。这是我的意见.py

```
e= EventArchiveGallery.objects.all()   
user = request.session['user_id']
if user:
    j = EventArchiveGallery()
    joining_list = j.joiningList(user)         

return render_to_response('gallery/allevents.html',
{
    'joining_list':joining_list,
},
context_instance=RequestContext(request)                         
) 
```

这是我的模板：

```
{% for event in live %}
    <p>Event Title:{{event.event_title}}<p/>
    <p>Channel Name:{{event.channel_id.channel_title}}</p>
    <p>Event Description{{event.event_description}}</p>
    {% if event in joining_list %}
        <p>followed</p>
            {%else%}
                    <p>follow</p> #I have wanted to show follow_save function call from this button,when user clicked
            {endif%}
  {% endfor %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:54:37.553

无论如何，如果你可以分成 2 个问题，你会更好地问 2 个问题......

*   根据用户的登录在我的模板中显示不同的按钮
    *   更好的方法是确定要在视图中显示的内容并将上下文参数传递给模板。根据这个变量模板将呈现不同的 HTML。

示例模板：假设视图传递`followed_channel`参数。

```
{% if user.is_authenticated %}
    {%if followed_channel %}
        {# render html you want #}
    {%else%}
        {# render another way #}
    {%endif%}
{%endif%} 
```

*   我也想从会话中获取 user_id

在从会话中获取之前，您必须存储它。因此，您可以将视图更新为

```
e= EventArchiveGallery.objects.all()   
user = request.session.get('user_id')
if not user:
     request.session['user_id'] = request.user.id
if user:
    j = EventArchiveGallery()
    joining_list = j.joiningList(user)         

return render_to_response('gallery/allevents.html',
{
    'joining_list':joining_list,
},
context_instance=RequestContext(request)                         
) 
```

# android - 无法实例化活动 ComponentInfo-super()

> ID：12385010
> 
> 赞同：0
> 
> 时间：2012-09-12T09:25:04.523
> 
> 标签：android

```
public NumberPicker(Context context, AttributeSet attrs, int defStyle) {

        super(context, attrs);
        setOrientation(VERTICAL);
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(R.layout.number_picker, this, true);
        mHandler = new Handler();
        InputFilter inputFilter = new NumberPickerInputFilter();
        mNumberInputFilter = new NumberRangeKeyListener();
        mIncrementButton = (NumberPickerButton) findViewById(R.id.increment);
        mIncrementButton.setOnClickListener(this);
        mIncrementButton.setOnLongClickListener(this);
        mIncrementButton.setNumberPicker(this);
        mDecrementButton = (NumberPickerButton) findViewById(R.id.decrement);
        mDecrementButton.setOnClickListener(this);
        mDecrementButton.setOnLongClickListener(this);
        mDecrementButton.setNumberPicker(this);

        mText = (EditText) findViewById(R.id.timepicker_input);
        mText.setOnFocusChangeListener(this);
        mText.setFilters(new InputFilter[] {inputFilter});
        mText.setRawInputType(InputType.TYPE_CLASS_NUMBER);

        if (!isEnabled()) {
            setEnabled(false);
        }

        mStart = DEFAULT_MIN;
        mEnd = DEFAULT_MAX;
    } 
```

大家好，我知道这`Unable to instantiate activity ComponentInfo`是由于 super() 引起的。请帮助我。请为我提供相同的内容。我并不是真的很想为这个类创建 super()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:07:40.737

```
super(this, attrs,0); 
```

并且代码正在运行

# javascript - 谷歌如何确定网站加载时间

> ID：12385024
> 
> 赞同：2
> 
> 时间：2012-09-12T09:25:37.077
> 
> 标签：javascript, jquery, html, seo

因此，谷歌宣布它将使用网站加载时间作为其排名算法的一个因素。

现在，我正在构建一个包含大量动态加载的脚本和内容的网站。初始脚本在 DOM 加载后运行，使用 JQUERY .ready 函数。更多脚本稍后运行，当“onload”发生时，即在“静态”内容被渲染（图像）之后。之后，脚本会使用后续的 AJAX 调用，一张一张地动态获取其他图像。

我的问题不在于 Google 机器人会阅读或不会阅读多少内容。关于这个问题有很多问题。

我的问题是，你知道，或者你能建议，谷歌机器人将如何确定这样一个动态网站的“加载时间”吗？这样做的机制是什么？如果谣言是正确的并且机器人没有执行任何 javascript，我可以假设加载时间只是“onload”发生时？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:05:30.210

根据我的经验[即：如果我在我的 access.log 中“grep googlebot”] google 通常只抓取 html，而不是 js 或其他东西；在这个[线程](https://stackoverflow.com/questions/2434445/does-google-crawl-ajax-content)中，您可以对 ajax 加载的内容有一些提示，但如果您对 WMT 中的站点速度值感兴趣，请考虑 html 生成速度，也不考虑 css/js 资产或任何内容 编辑：有关**谁**和**何时**抓取您的页面的详细信息对于索引包含阅读[here](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=182072)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:11:01.127

恐怕这不再完全正确了。虽然主要索引器（据我所知不索引 JS）有谷歌机器人绝对**使用**javascript。例如，为预览功能截取屏幕截图的机器人会定期显示需要 javascript 显示的部分网站。

你可以确定的一件事是，如果他们说页面加载速度是一个因素，并且 JS 没有被索引......他们不会使用 javascript 的 onload 或任何 jQuery 抽象这个事件......它只是http响应时间和服务器传输html部分的速度的问题。

# php - 如何在zend中隐藏和显示元素？

> ID：12385028
> 
> 赞同：0
> 
> 时间：2012-09-12T09:25:51.757
> 
> 标签：php, javascript, zend-form-element

我已经通过在 zend 中选中复选框为这两个元素编写了隐藏和显示脚本，但是值 1 将被发送到函数以进行选中和取消选中，因此它只显示元素但不隐藏元素。如何解决？

```
$this->addElement('checkbox', 'Change_Password',
    array('decorators' => $this->elementDecoratorsTr ,'label' => 'Want to Set password ? :',
    'required' => false,
    'onchange' => 'passwordShow(this.value)',
        'Options' => array(
            'checkbx1'  => 'checkbx1'),
    ));

    $this->addElement('Password', 'User_Password',array(
    'decorators' => $this->elementDecoratorsTr,
    'label' => 'Password:',
    'style' =>  'display:none;',
    'required' => false,
    'filters' => array('StringTrim'),
        'validators' => array(array(
        'validator' => 'StringLength')) 
    ));

    $this->addElement('Password', 'Confirm_Password',array(
    'decorators' => $this->elementDecoratorsTr,
    'label' => 'Confirm Password:',
    'style' =>  'display:none;',
    'required' => false,
    'filters' => array('StringTrim'),
        'validators' => array(array(
        'validator' => 'StringLength')) 
    )); 
```

这是我隐藏和显示两个元素的脚本`User_Password`函数`Confirm_Password`

```
<script>

    function passwordShow(password)
    {
        alert(password);
        if(password)
        {
             $("#User_Password").show();
             $("#Confirm_Password").show();
        }
        else
        {
             $("#User_Password").hide();
             $("#Confirm_Password").hide();
        }
    }

    </script> 
```

# php - 如何读取目录内的文件和目录

> ID：12385031
> 
> 赞同：1
> 
> 时间：2012-09-12T09:26:02.633
> 
> 标签：php

任何人都可以让我知道如何阅读目录并找到该目录中的文件和目录。

我尝试使用以下`is_dir()`函数检查目录

```
$main = "path to the directory";//Directory which is having some files and one directory
readDir($main);

function readDir($main) {
    $dirHandle = opendir($main);
    while ($file = readdir($dirHandle)) {
        if ($file != "." && $file != "..") {
            if (is_dir($file)) {
                 //nothing is coming here
            }
        }
    }
} 
```

但它不检查目录。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:32:53.407

您必须使用子目录的完整路径：

```
if(is_dir($main.'/'.$file)) { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:35:32.923

PHP 5 中最简单的方法是使用[`RecursiveDirectoryIterator`](http://php.net/RecursiveDirectoryIterator)and [`RecursiveIteratorIterator`](http://php.net/RecursiveIteratorIterator)：

```
$dir = '/path/to/dir';
$directoryIterator = new RecursiveDirectoryIterator($dir);

$iterator = new RecursiveIteratorIterator($directoryIterator, RecursiveIteratorIterator::CHILD_FIRST);

foreach ($iterator as $path) {
  if ($path->isDir()) {
     // ...
  }
} 
```

您不需要自己递归，因为这些优秀的迭代器自己处理它。

有关这些强大的迭代器的更多信息，请参阅链接的文档文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:31:45.250

```
$le_map_to_search = $main;
$data_to_use_maps[] = array();
$data_to_use_maps = read_dir($le_map_to_search, 'dir');
$aantal_mappen = count($data_to_use_maps);
$counter_mappen = 1;
while($counter_mappen < $aantal_mappen){
   echo $data_to_use_maps[$counter_mappen];
   $counter_mappen++;
}

$data_to_use_files[] = array();
$data_to_use_files = read_dir($le_map_to_search, 'files');
$aantal_bestanden = count($data_to_use_files);
$counter_files = 1;
while($counter_files < $aantal_files){
   echo $data_to_use_files [$counter_files ];
   $counter_files ++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T09:46:17.373

尝试这个
`$handle = opendir($directory); //Open the directory
while (false !== ($file = readdir($handle))) {
$filepath = $directory.DS.$file; //Get all files/directories in the directory
}`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T09:28:15.487

使用[scandir](http://php.net/manual/en/function.scandir.php) 然后解析结果并消除'.' 和 '..' 和`is_file()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T09:33:20.643

看看这里的参考：

[http://php.net/manual/en/function.scandir.php](http://php.net/manual/en/function.scandir.php)

# google-maps - 是否可以将固定的谷歌地图值存储在数据库中，然后显示这些地理位置的信息？

> ID：12385034
> 
> 赞同：0
> 
> 时间：2012-09-12T09:26:13.397
> 
> 标签：google-maps

这就是我想要实现的目标：

一个照片上传器，用户可以选择固定世界上的任何位置，比如他的街道。

上传后，照片连同其地理位置数据一起记录在数据库中。

在 listout 中输出时，地理位置将转换为城市名称和国家名称。

这可能吗？如果是这样，它实用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:44:16.163

这是可能的，而且很实用，但需要做一些工作。

当用户为他们的照片设置位置时，您保存纬度、经度或 LatLng 这是谷歌用来在地图中定位一个点的两个数字，然后从该点提取信息（城市名称等），请参阅代码这个其他答案：

[使用 Google Map API 和 PHP 进行反向地理编码，以使用经纬度坐标获取最近的位置](https://stackoverflow.com/questions/2054635/reverse-geocoding-with-google-map-api-and-php-to-get-nearest-location-using-lat)

[使用 Google Maps API 进行反向地理编码](https://stackoverflow.com/questions/2667636/reverse-geocoding-with-google-maps-api)

# ruby-on-rails-3.1 - 带有 rails 3.0.1 rails 的友好 ID 4.0.8 生成友好 ID 不起作用？

> ID：12385035
> 
> 赞同：0
> 
> 时间：2012-09-12T09:26:20.393
> 
> 标签：ruby-on-rails-3.1, friendly-id

我将friendly_id 4.0.8 与rails 3.0.1 一起使用。我想使用历史记录功能。

当我键入 command`rails generate friendly_id`时，它会失败并显示以下错误消息：

```
[WARNING] Could not load generator "generators/friendly_id_generator". Error: ActiveRecord is not missing constant Migration!.
/usr/lib/ruby/gems/1.8/gems/activesupport-3.0.1/lib/active_support/dependencies.rb:479:in `load_missing_constant'
/usr/lib/ruby/gems/1.8/gems/activesupport-3.0.1/lib/active_support/dependencies.rb:183:in `rake_original_const_missing'
/usr/lib/ruby/gems/1.8/gems/activesupport-3.0.1/lib/active_support/dependencies.rb:181:in `each'
/usr/lib/ruby/gems/1.8/gems/activesupport-3.0.1/lib/active_support/dependencies.rb:181:in `rake_original_const_missing'
/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2503:in `const_missing'
/usr/lib/ruby/gems/1.8/gems/friendly_id-4.0.8/lib/generators/friendly_id_generator.rb:8
/usr/lib/ruby/gems/1.8/gems/activesupport-3.0.1/lib/active_support/dependencies.rb:239:in `require'
/usr/lib/ruby/gems/1.8/gems/activesupport-3.0.1/lib/active_support/dependencies.rb:239:in `require'
/usr/lib/ruby/gems/1.8/gems/activesupport-3.0.1/lib/active_support/dependencies.rb:225:in `load_dependency'
/usr/lib/ruby/gems/1.8/gems/activesupport-3.0.1/lib/active_support/dependencies.rb:591:in `new_constants_in'
/usr/lib/ruby/gems/1.8/gems/activesupport-3.0.1/lib/active_support/dependencies.rb:225:in `load_dependency'
/usr/lib/ruby/gems/1.8/gems/activesupport-3.0.1/lib/active_support/dependencies. 
```

是否有一些不同的语法可以使它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:32:38.633

我现在通过手动生成迁移脚本使其正常工作

```
rails generate migration create_friendly_id_slugs 
```

然后将迁移脚本的内容替换为 gems/friendly_id-4.0.8/lib/friendly_id/migration.rb 中的内容，如下所示：

```
class CreateFriendlyIdSlugs < ActiveRecord::Migration
  def self.up
    create_table :friendly_id_slugs do |t|
      t.string   :slug,           :null => false
      t.integer  :sluggable_id,   :null => false
      t.string   :sluggable_type, :limit => 40
      t.datetime :created_at
    end
    add_index :friendly_id_slugs, :sluggable_id
    add_index :friendly_id_slugs, [:slug, :sluggable_type], :unique => true
    add_index :friendly_id_slugs, :sluggable_type
  end

  def self.down
    drop_table :friendly_id_slugs
  end
end 
```

然后运行`rake db:migrate`

# jquery - 使用jquery不眨眼的图像淡入淡出

> ID：12385039
> 
> 赞同：0
> 
> 时间：2012-09-12T09:26:33.657
> 
> 标签：jquery, html, image, fade

当我点击一个链接时，我试图淡入图像，但这让我在每次淡入淡出时都会“眨眼”。有没有办法避免这种眨眼，只是有一个干净的淡入淡出？

这是我当前的代码：

```
function changeMortar(mortar) {
     var html = '<img src="http://www.randerstegl.dk/fileadmin/fugefarver/GFXSharedMortars/fuge'+mortar+'.png" width="500" height="300">'                    
        $("#fuge-color").hide().html(html).fadeIn('slow');
    }​ 
```

我做了这个例子 [http://jsfiddle.net/BHCam/14/](http://jsfiddle.net/BHCam/14/)

它褪色成白色，然后变成我选择的砂浆。我想要的是让我选择的砂浆消失在旧砂浆上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T09:29:33.333

像这样的闪烁和其他伪影可能是由您的浏览器或显卡驱动程序引起的，因此除了检查图形设置调整或升级机器组件之外，您无能为力。您的示例在这里顺利消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:41:31.683

只需将其更改为

```
 $("#fuge-color").hide().fadeIn('slow'); //use slow,fast,1000,2000,3000 
```

选择你最好的结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T09:47:21.080

你可以试试`animate`：

```
function changeMortar(mortar) {
 var $html = '<img src="http://www.randerstegl.dk/fileadmin/fugefarver/GFXSharedMortars/fuge'+mortar+'.png" width="500" height="300">'                    
     $("#fuge-color").animate({ opacity: 0.8 }, 'fast', function(){
          $(this).html($html).animate({ opacity: 1 }, 'fast');
     });
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T10:33:45.290

我对您的代码进行了一些更改。在 HTML 中尝试这样：

```
<div id="slideshow">
   <img src="http://www.randerstegl.dk/fileadmin/fugefarver/GFXSharedMortars/fugeGraa.png" alt="" class="active" width="500" height="300"/>
   <img src="http://www.randerstegl.dk/fileadmin/fugefarver/GFXSharedMortars/fugeAnthrazit.png" width="500" height="300" />

</div>
<a href="#" class="change-mortar-link" onclick="slideSwitch();">Change mortar</a> 
```

在 CSS 中：

```
#slideshow {
   position:relative;
   height:350px;
}
#slideshow IMG {
  position:absolute;
  top:0;
  left:0;
  z-index:8;
}
#slideshow IMG.active {
   z-index:10;
}
#slideshow IMG.last-active {
   z-index:9;
} 
```

和 JavaScript 代码：

```
function slideSwitch() {
   var $active = $('#slideshow IMG.active');

   if ( $active.length == 0 ) $active = $('#slideshow IMG:last');

   var $next =  $active.next().length ? $active.next()
    : $('#slideshow IMG:first');

   $active.addClass('last-active');

   $next.css({opacity: 0.0})
      .addClass('active')
      .animate({opacity: 1.0}, 1000, function() {
          $active.removeClass('active last-active');
     });
  } 
```

在[这里](http://jonraasch.com/blog/a-simple-jquery-slideshow)您可以找到更多信息。这是 JsFiddle 中的运行示例[。](http://jsfiddle.net/mahsa_999/gQjsS/1/)

# python - Python - 在多行上定义一个整数变量

> ID：12385040
> 
> 赞同：5
> 
> 时间：2012-09-12T09:26:34.147
> 
> 标签：python, python-2.7

我想定义一个长度为 1000 位的变量，但我不想将它全部放在一行上。有没有办法将整数变量拆分为多行？

我尝试使用不同的缩进和括号但无济于事。

我应该接受以下内容必须存储在一行上还是我只是遗漏了一些明显的东西？

```
num = 73167176531330624919225119674426574742355349194934
  96983520312774506326239578318016984801869478851843
  85861560789112949495459501737958331952853208805511
  12540698747158523863050715693290963295227443043557
  66896648950445244523161731856403098711121722383113
  62229893423380308135336276614282806444486645238749
  30358907296290491560440772390713810515859307960866
  70172427121883998797908792274921901699720888093776
  65727333001053367881220235421809751254540594752243
  52584907711670556013604839586446706324415722155397
  53697817977846174064955149290862569321978468622482
  83972241375657056057490261407972968652414535100474
  82166370484403199890008895243450658541227588666881
  16427171479924442928230863465674813919123162824586
  17866458359124566529476545682848912883142607690042
  24219022671055626321111109370544217506941658960408
  07198403850962455444362981230987879927244284909188
  84580156166097919133875499200524063689912560717606
  05886116467109405077541002256983155200055935729725
  71636269561882670428252483600823257530420752963450 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-12T09:32:05.310

```
num = int("""
73167176531330624919225119674426574742355349194934
96983520312774506326239578318016984801869478851843
85861560789112949495459501737958331952853208805511
12540698747158523863050715693290963295227443043557
66896648950445244523161731856403098711121722383113
62229893423380308135336276614282806444486645238749
30358907296290491560440772390713810515859307960866
70172427121883998797908792274921901699720888093776
65727333001053367881220235421809751254540594752243
52584907711670556013604839586446706324415722155397
53697817977846174064955149290862569321978468622482
83972241375657056057490261407972968652414535100474
82166370484403199890008895243450658541227588666881
16427171479924442928230863465674813919123162824586
17866458359124566529476545682848912883142607690042
24219022671055626321111109370544217506941658960408
07198403850962455444362981230987879927244284909188
84580156166097919133875499200524063689912560717606
05886116467109405077541002256983155200055935729725
71636269561882670428252483600823257530420752963450""".replace("\n", "")) 
```

祝欧拉计划问题好运。:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-09T17:20:17.587

为了清楚地呈现您的数据而不对其进行操作，隐式连接允许：

```
number = ('73167176531330624919225119674426574742355349194934'
          '96983520312774506326239578318016984801869478851843'
          '85861560789112949495459501737958331952853208805511'
          #...
          ) 
```

括号是必要的。请注意，没有逗号，这意味着 Python 将它们作为同一字符串的延续进行处理。

优点：

*   读起来很清楚。
*   看起来很明确。
*   很容易与第一行对齐。
*   排队使大多数 IDE 的代码折叠变得非常容易。
*   它避免了转义端线，这被认为是不好的形式。
*   它直接作为字符串处理一次，无需进一步操作和浪费时钟周期。

`'`缺点：和的轻微噪音`()`。

* * *

然后，您可以将数字强制转换为整数（Python 2 中的长整数）

```
number = int(number) 
```

在 python 3 中，所有整数都是长整数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T08:49:22.383

尝试将其保存在一个字符串中：

```
numbers = "73167176531330624919225119674426574742355349194934\
96983520312774506326239578318016984801869478851843\
85861560789112949495459501737958331952853208805511\
12540698747158523863050715693290963295227443043557\
66896648950445244523161731856403098711121722383113\
62229893423380308135336276614282806444486645238749\
30358907296290491560440772390713810515859307960866\
70172427121883998797908792274921901699720888093776\
65727333001053367881220235421809751254540594752243\
52584907711670556013604839586446706324415722155397\
53697817977846174064955149290862569321978468622482\
83972241375657056057490261407972968652414535100474\
82166370484403199890008895243450658541227588666881\
16427171479924442928230863465674813919123162824586\
17866458359124566529476545682848912883142607690042\
24219022671055626321111109370544217506941658960408\
07198403850962455444362981230987879927244284909188\
84580156166097919133875499200524063689912560717606\
05886116467109405077541002256983155200055935729725\
71636269561882670428252483600823257530420752963450" 
```

# spring - 模拟单元测试的 AOP 方法实现

> ID：12385042
> 
> 赞同：0
> 
> 时间：2012-09-12T09:26:48.827
> 
> 标签：spring, unit-testing

我有一个 java 应用程序，它有多个模块 - (GWT-)RPC 服务，，`perf-library`（`remote-client`我的团队编写/拥有的所有 java 代码）。包含 Spring AOP 方面相关的`perf-library`代码，主要用于将截获的方法日志推送到数据存储。现在，`perf-library`依赖于另一个远程客户端，它实际上维护一个队列并处理将日志推送到数据存储的工作。因此，在某种程度上，`perf-library`只是将任务委托给远程客户端。业务逻辑代码调用截获的具有 AOP 逻辑的方法，因此依赖于远程客户端。显然，我不想从单元测试中连接到远程客户端。我想我需要模拟方法的实现`push()`它连接到远程客户端。我无法弄清楚的是如何将模拟实现用于业务逻辑代码包单元测试。

为了澄清事情，我有这样的模块 -

*   `RPC service module`- 例如方法`login()`被拦截。
*   `perf-library`- 有方面（拦截方法，如`login()`）和实现调用`remote-client`
*   `remote-client`- 将数据推送到某个数据存储区

现在，为了编写 RPC 服务方法的单元测试，我如何获得模拟实现，`push()`因为它在 perf-library 内部。假设，我有一个由两个类（一个用于生产，另一个用于测试）实现的接口`LogClient`（具有方法`push()`）。我可以将此测试实现用于 perf-library 本身的单元测试，但是如何使 RPC 单元测试使用它。我是 Spring 新手，所以不确定这是否可以用 Spring 或其他任何东西轻松完成。任何帮助都会很好。

注意：我们使用 Spring 来维护 bean 和 DI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:38:29.063

不确定具体如何，但[Mockito](http://code.google.com/p/mockito/)可能是一个不错的选择。
检查此[链接](http://tamasgyorfi.wordpress.com/2011/04/25/mocking-tutorial-part-2-mockito/)以获取详细信息。

# jboss - 使用 jboss 作为 maven 插件启动 osgi bundle

> ID：12385043
> 
> 赞同：1
> 
> 时间：2012-09-12T09:26:49.543
> 
> 标签：jboss, osgi

我正在使用**Jboss 作为 maven 插件**在 Jboss 7.1.1 中部署 OSGI 包，并且我已成功将其部署到我的 jboss 中，我的控制台在部署后显示以下消息。

00:54:51,080 INFO [org.jboss.as.server.deployment]（MSC 服务线程 1-1）JBAS015876：开始部署“services-1.0-SNAPSHOT.jar” 00:54:51,110 INFO [org.jboss. osgi.framework]（MSC 服务线程 1-2）JBOSGI011001：已安装包：testAapi:1.0.0.SNAPSHOT 00:54:51,190 INFO [org.jboss.as.server]（管理处理程序线程 - 7）JBAS018562：重新部署“services-1.0-SNAPSHOT.jar”

但是现在我不明白**如何使用相同的 maven 插件自动启动我的 osgi 包意味着 jboss 作为 maven 插件**

意味着我正在使用**mvn jboss-as:deploy**部署捆绑包，它已部署但未启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T15:17:46.437

见这里：http: [//community.jboss.org/message/759637#759637](http://community.jboss.org/message/759637#759637)

# c# - 无论传递的参数名称如何，C# SQL 都会执行存储过程

> ID：12385044
> 
> 赞同：0
> 
> 时间：2012-09-12T09:26:50.930
> 
> 标签：c#, sql, stored-procedures, parameters

> **可能重复：**
> [SQL Server 和 .net 支持使用参数值调用存储过程而不提供参数名称？](https://stackoverflow.com/questions/6463010/sql-server-net-support-calling-a-stored-procedure-with-params-values-wihout)

我想调用存储过程类型的 command.ExecuteReader()，但是我不希望我传递的参数名称与 SP 中的参数名称相同。下面是我正在尝试做的一个示例

SP：

```
ALTER PROCEDURE SPName
@Id nvarchar(50)
AS
BEGIN
    SET NOCOUNT ON;
SELECT * FROM TableName
WHERE ColumnName = @Id 
END
GO 
```

代码：

```
using (SqlCommand command = new SqlCommand(spName, connection) { CommandType = CommandType.StoredProcedure })
{
    command.parameters.Add(new SqlParameter(*paramaeter name*, sqlDbType.nvarchar){ Value = "SomeValue"};
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:26:09.607

如果你想要一个通用样式函数，而不需要额外的往返，并且你很乐意使用反射，你可以使用这样的东西。

```
// Return an array of SqlParameter's by using reflection on ParamObject
private static SqlParameter[] GetParametersFromObject( object ParamObject )
{

    var Params = new List<SqlParameter>();

    foreach( var PropInfo in ParamObject.GetType().GetProperties() )
    {
        Params.Add( new SqlParameter( PropInfo.Name, PropInfo.GetValue( ParamObject, null ) ) );
    }

    return Params.ToArray();

}

public static void ExecuteSP( SqlConnection Connection, string SPName, object ParamObject )
{

    using( var Command = new SqlCommand() )
    {

        Command.Connection = Connection;
        Command.CommandType = CommandType.StoredProcedure;
        Command.CommandText = SPName;

        Command.Parameters.AddRange( GetParametersFromObject( ParamObject ) );

        // Command.ExecuteReader()...

    }

} 
```

这使用反射从匿名对象中获取属性名称和值以填充 SqlCommand。可以这样使用；

```
ExecuteSP( Conn, "GetStuff", new { Id = 7, Name = "Test" } ); 
```

这种方式 ExecuteSP 是“通用的”，您可以在调用 ExecuteSP 时选择参数名称和值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:55:41.377

简单的事实——调用存储过程时最终必须使用正确的参数名称，因为 SQL 服务器按名称绑定参数（即使您使用 EXEC 调用 SP 而不使用命名参数，解析器也会按名称从左到右绑定它们） .

因此，如果您想使用不同的名称，则需要在您的`SqlCommand`和目标 SP 之间引入一个中间层。

但是，如果您只想不关心名称并自动发现它 - 那么您可以使用[Conrad Frix](https://stackoverflow.com/users/119477/conrad-frix)在他接受的关于[SQL Server 和 .net 支持调用具有参数值的存储过程而不提供参数名称的答案中提到的技术？](https://stackoverflow.com/questions/6463010/sql-server-net-support-calling-a-stored-procedure-with-params-values-wihout)- 这就是为什么我标记为重复，因为它最终是你想要做的，即使原因不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T09:55:46.900

对于 SqlServer，有一个[DeriveParameters](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.deriveparameters)方法，该方法接受一个命令对象并在数据库中查询请求的存储过程的参数（名称和类型）。

然后，您可以遍历它们并提供值。

注意：这意味着对数据库的额外访问，所以如果你经常需要这个，你可能想要缓存结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T10:09:24.293

下面的方法允许您编写用于调用存储过程的通用代码，但也使您可以灵活地为每个不同的存储过程执行特定操作

```
public delegate void SqlCOmmandDelegate(SqlCommand command);

public class Dal
{
    public void ExecuteStoredProcedure(string procedureName, 
        SqlCommandDelgate commandDelegate)
    {
        using (SqlConnection connection = new SqlConnection())
        {
            connection.ConnectionString = GetConnectionString();
            using (SqlCommand command = connection.CreateCommand())
            {
                command.CommandType = CommandType.StoredProcedure;
                command.CommandText = procedureName;
                connection.Open();
                commandDelegate(command);
            }
        }
    }
}

class UsesDal
{
    public CallFirstProcedure(int value)
    {
        string userName;

        ExecuteStoredProcedure("FIRST_PROCEDURE",
            delegate(SqlCommand command)
            {
                command.Parameters.Add("UserID", value);
                command.ExecuteReader();

                //Do stuff with results e.g.
                username = command.Parameters.Parameters["UserName"].ToString();
            }
    }

    public CallOtherProcedure(string value)
    {
        int id;
        ExecuteStoredProcedure("OTHER_PROCEDURE",
            delegate(SqlCommand command)
            {
                command.Parameters.Add("ParameterName", value);
                id = command.ExecuteScalar();
            }
    }
} 
```

# eclipse - Eclipse 插件：ObjectAid UML Explorer 类图：以更高分辨率导出

> ID：12385047
> 
> 赞同：7
> 
> 时间：2012-09-12T09:27:01.460
> 
> 标签：eclipse, uml, class-diagram, objectaid

我正在使用 ObjectAid UML Explorer 从我的代码生成 UML 类图。

我需要在 LaTeX 文档中包含输出 PNG，但我得到的分辨率太低而无法包含。

如何从 Eclipse 插件获得更高分辨率的输出？

我可以看到 .ucls 文件的内部格式只是 XML：

```
<class-diagram version="1.0.10"... 
```

有没有办法获得比 72dpi 更密集的东西或可扩展格式的东西，比如 EPS 或类似的东西？目标文档 > 300dpi，因此不幸的是，72dpi 甚至无法接近。无论 XML 定义如何栅格化，都必须接受陷阱和可插入模块？

我需要一些可以插入 ObjectAid 的自动保存机制的东西......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T16:02:30.173

我找到了一个肮脏但简单的解决方案。

通过将图表打印到 PDF，例如使用 PDFCreator 等程序，您可以获得 PDF 中的矢量图形。使用 Adob​​e Photoshop 或 Gimp 等图形编辑程序，您可以将 PDF 光栅化为高质量的 PNG。

它对我来说很好。

使用 ObjectAid 的图表插件，您可以对打印比例进行一些自定义。也可以将图表保存为 SVG 图像，您也可以将其转换为高质量的像素图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:48:22.590

您是否尝试使用诸如 snagit 之类的裁剪/设计工具来裁剪计算机屏幕的副本并将其导出为高清图像（例如图像）或直接粘贴并复制到 Word 文档中？

在提供我的 java 代码文档时，我遇到了与您相同的问题。我使用 EclipseUML Omondo，但图像导出也很差。我现在更喜欢为我的图像导出使用特定的裁剪工具，这要好得多。

我的意思是您在计算机屏幕上创建所需的视图，然后将其裁剪并粘贴到您的文档中。我喜欢在 Microsoft Word 中使用 snagit 的粘贴和复制功能。

**我最喜欢的裁剪 UML 图的工具是 snagit。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T23:41:45.357

虽然不光彩，但我所做的是进入*Window | 偏好 | 一般 | 外观 | Eclipse 中的颜色和字体*，并将所有文本字段设置为两倍大小。

这创建了一个更大的图表，因此导出的分辨率更高。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T16:14:16.840

在 ObjectAid 实现该功能之前不可能...

# c# - JSchException 验证：错误 C# .NET Scp SSH

> ID：12385049
> 
> 赞同：0
> 
> 时间：2012-09-12T09:27:10.910
> 
> 标签：c#, .net, ssh, scp, sharpssh

我想连接到远程服务器以通过 SCP/SSH 上传一些文件。

我为此使用 SharpSSH，但它不起作用。

每次 ScpClint 想要连接时，我都会得到 JSchException 验证：False。

这是我的代码：

```
Scp scpClient = new Scp();
scpClient.To(@"C:localPath", "hostIP", "/var/...", sshUser, sshPwd); 
```

有人对如何解决此问题有任何建议吗？也许另一个图书馆？我也试过 Renci.SshNet 但我可以连接或者它没有给出任何错误，但无论我尝试上传什么都无法在服务器上找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T21:51:10.013

Which version of the library are you using? That code is fairly old and unmaintained. My usual recommendation is to try SSHNet since that's a much more solid library, written for .NET, but you said you've already tried that. Perhaps it's a problem on the remote side if you cannot connect with either of the libraries?

# php - 从特定索引/键的返回数组中获取项目的快捷方式？

> ID：12385051
> 
> 赞同：4
> 
> 时间：2012-09-12T09:27:20.667
> 
> 标签：php

我觉得有一些捷径可以做到这一点：

```
$date_array = explode("-", $date);
$day = $date_array[2]; 
```

就像是：

```
$day = explode("-", $date)[2]; 
```

基本上得到答案并将其设置为某种东西？

不记得了，但不是有一堆花哨的“=”之类的东西`.=`连接。还有其他类似的捷径吗？似乎无法在 Google 上找到包含所有快捷方式的文章。

我讨厌不得不做一个`$date_array`当我真正想要的是`$day`，让我觉得我的代码效率不高。

编辑：将标题更改为更通用，想不出什么好东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T09:28:23.660

## 列出变量

`list(,,$day) = explode("-", $date);`

`list()`接受一个数组并将其解析为变量......您可以通过将项目留空来跳过您不想要的项目，就像我在上面所做的那样。应该做你需要的。您尝试的另一种语法在 php 中不起作用*（至少不是我曾经使用过的版本）* ——这更像是一种 JavaScript 类型表示法。

## 选择

万一您感兴趣，您正在尝试的还有另一种解决方案*（除非它只是一个示例）*：

```
/// this will give you the current day based on server time
$day = date('d');

/// this will work from an existing Y-m-d date
$day = date('d', strtotime($date)); 
```

现在，将 Ymd 日期字符串转换为时间戳是否比拆分字符串并列出它的 vars 更快 - 只有速度测试会告诉我们*（我认为拆分会赢）*。但对我来说，上面的内容更好，因为我不禁想到其他数组项被拆分出来然后就被遗忘了；）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T09:30:26.467

正如[PHP 5.4 页面中的新功能](http://www.php.net/manual/en/migration54.new-features.php)所说，您建议的语法（称为函数数组解引用）现在可以从该版本开始。

```
$day = explode("-", $date)[2]; 
```

但是，这在 5.3 或更早版本中不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:31:56.993

在 php5.4 之后你可以这样做：

```
$day = explode("-", $date)[2]; 
```

在 php5.4 之前，您可以使用`list`.

```
list(,,$day) = explode("-", $date); 
```

# iphone - 所有视图中的导航栏

> ID：12385052
> 
> 赞同：0
> 
> 时间：2012-09-12T09:27:21.587
> 
> 标签：iphone, ios, uiview, uinavigationcontroller

在我的项目中，导航栏只出现在 rootview(homeview) 中，我想在所有视图中启用导航栏？这是我的代码？我应该为此做些什么改变

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
SecondViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
navigationController = [[UINavigationController alloc] initWithRootViewController:viewController2];
self.window.rootViewController =navigationController;
[self.window addSubview:[navigationController view]];
[self.window makeKeyAndVisible];
return YES;
} 
```

请帮我写代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:38:56.003

看到这个[链接](http://ioscoderef.blogspot.com/2012/08/adding-uinavigation-to-simple-view.html)

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{    
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    navigationController =[[UINavigationController alloc] init];

    UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    [navigationController pushViewController:viewController2 animated:NO];  

    self.window.rootViewController = navigationController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

当您从 viewController2 导航到另一个视图时，执行 pushViewController 而不是像 presentView 这样的其他视图

```
[self.navigationController pushViewController:anotherViewController animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:40:31.470

试试这个方法可能对你有帮助

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    // [NSThread sleepForTimeInterval:0.1]; // simulate waiting for server response

    // Override point for customization after application launch.

    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];

    // Initialise the navigation controller with the first view controller as its root view controller

    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];

    // This is where we hide the navigation bar! :)

    [navigationController setNavigationBarHidden:NO];

    // Navigation controller has copy of view controller, so release our copy

    //[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight animated:NO];

    [self.viewController release];
    // Add the navigation controller as a subview of our window

    [_window addSubview:[navigationController view]];
    [_window makeKeyAndVisible];
    return YES;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T11:12:37.480

将此代码放在委托类中。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    // Set the navigation controller as the window's root view controller and display.
    self.window.rootViewController = self.navigationController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T09:31:54.810

如果您想在所有视图中启用导航，那么您必须在 AppDelegate.m 中声明导航，其中它将在所有视图中可见。我现在没有我的 mac rite，但这是我现在能提供的最好的建议 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T09:33:02.453

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
SecondViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
navigationController = [[UINavigationController alloc] initWithRootViewController:viewController2];
self.window.rootViewController =navigationController;
[self.window addSubview:[navigationController view]];
[self.window makeKeyAndVisible];
return YES;
} 
```

将 uiviewcontroller 更改为 SecondViewController

# java - tomcat 和 mysql 内存使用情况

> ID：12385063
> 
> 赞同：0
> 
> 时间：2012-09-12T09:28:09.837
> 
> 标签：java, mysql, tomcat, memory-management

我想设备一个应用程序，它将在任何给定时间检查 tomcat 内存使用情况和 mysql 内存使用情况。我的问题是，有没有办法在 java 中检索这些值？请任何人都可以向我提供示例代码片段。

提前致谢

# ios - 更多游戏的 SDK

> ID：12385064
> 
> 赞同：-2
> 
> 时间：2012-09-12T09:28:11.007
> 
> 标签：ios, sdk, ads

我见过一些有`More Games`按钮的游戏，点击它会重定向到用户可以下载游戏的游戏列表。我也想为我的游戏提供相同的功能。哪个框架、SDK 或扩展提供了这样的功能。当然，我想通过每次下载产生收入。

我尝试的 SDK 是`Tapjoy`and `Revmob`，但它们并没有给出我想要的确切解决方案。Tapjoy 一次只显示一个应用程序，而 revmob 只是显示一个警报，要求用户下载一个随机的免费应用程序。

注意：我删除了上一个问题并创建了一个新问题，因为上一个问题无缘无故被否决了，我对此没有任何答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T12:52:28.427

[RevMob](http://www.revmob.com)提供您描述的功能，但仅适用于他们选择的单个游戏，并让您选择横幅广告、全屏广告、弹出警报（正如您提到的）或您可以设置为直接调用的链接按下按钮。

创建一个“更多游戏”按钮，并在其操作中像这样调用 RevMob，

```
 [RevMobAds openAdLink]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T17:42:20.213

RevMob 的其他替代方案是已经配置好的 UIButton：

```
RevMobAds *revmob = [RevMobAds revMobAds];
UIButton *button = [revmob button]; 
```

[API 文档](http://sdk.revmob.com/ios-api/Classes/RevMobAds.html)

# forms - 多个动态div在jsp中的表单并在相应的div中重新生成响应

> ID：12385066
> 
> 赞同：1
> 
> 时间：2012-09-12T09:28:11.897
> 
> 标签：forms, jsp, struts2

我使用 div 将 5 个 jsps 的代码放入单个 jsp 中。

我有一个jsp，它分为左右两个主要div。左侧 div 包含指向右侧 div 的链接（包含 5 个）。每当我们单击链接（左侧）时，相应的链接将显示在右侧，并且所有剩余的 div 都将被隐藏。右边的每个 div 都有 struts2 形式，2 形式包含下拉列表，可靠的下拉列表将在进入我们的 jsp 之前预先填充。

如果单击link1（假设）应该显示相应的div，每当我们提交表单时，只有包含表单的那个div应该被提交给服务器，并且应该只将响应发送回那个div。

我正在使用 jquery-show() 函数显示 div。

我们如何在同一个 div 中呈现响应？

```
<div id="desc-customer" align="center" style="display: none" >

    <s:if test="hasActionErrors()">
        <s:actionerror />
    </s:if>
    <s:form id="customerFormID" action="createcustomerAction" theme="simple" cssClass="yform" method="execute">
        <fieldset>
            <legend>customer</legend>
            <table>
                <tr>
                    <th>Add customer </th>
                </tr>
                <tr>
                    <sj:div class="type-text">
                        <td><label for="customerName">customer Name: </label></td>
                        <td><s:textfield name="customerName" id="customerNameId" /></td>
                    </sj:div>
                </tr>

                <tr>
                    <sj:div class="type-text">
                        <td><label for="label">Label: </label></td>
                        <td><s:textfield name="label" id="labelId"/></td>
                    </sj:div>
                </tr>
                <tr>
                    <td> 
                        <s:div class="type-button">
                            <s:submit id="customerFormID"
                                value="Add"
                                targets="msg"
                                indicator="indicator" 
                                button="true" />
                            <img id="indicator" src="../images/indicator.gif"
                                alt="Loading..." style="display: none" />
                        </s:div><%--  <sj:submit value="Create"/> --%>
                    </td>
                </tr>
            </table>
        </fieldset>
    </s:form>
</div> 
```

# android - 获取我的应用程序活动堆栈

> ID：12385069
> 
> 赞同：0
> 
> 时间：2012-09-12T09:28:16.217
> 
> 标签：android, android-activity

我的应用中有 3 个活动。活动 A、B 和 C。

我现在处于活动 B 中，我需要知道我的活动堆栈中是否还有更多活动，或者当我完成活动时，BI 将退出应用程序。

我发现[ActivityManager](http://developer.android.com/reference/android/app/ActivityManager.html)可以完成这项工作，但它需要`GET_TASKS`许可。

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:35:41.143

从一个活动转到另一个活动时，您可以设置标志清除顶部以删除现在在堆栈上的其他活动，然后转到新活动。如果您这样做然后完成当前活动，那么您将退出应用程序。

例如

```
Intent imra = new Intent(getApplicationContext(),
                            MoreActivity.class);
                    imra.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(imra);
                    finish(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:53:16.913

不幸的是，答案是否定的！

# java - 运行时的 json 解析错误

> ID：12385070
> 
> 赞同：4
> 
> 时间：2012-09-12T09:28:16.313
> 
> 标签：java, android, json, parsing

我正在尝试从我的*Android*应用程序向 php 服务器发送一些注册信息。

我有两个类：***RegisterActivity***和***JSONParser***。当我试图运行这个程序时，会出现一些这样的错误：

`Error parsing data org.json.JSONException: Value not of type java.lang.String cannot be converted to JSONObject" and "android.os.AsyncTask$3.done(AsyncTask.java:299)`

这是我的代码：

***注册活动.java***

```
public class RegisterActivity extends Activity {

    private ProgressDialog pDialog;

    JSONParser jsonParser = new JSONParser();
    EditText username;
    EditText email;
    EditText password;
    EditText RePass;

    private static String url_create_product = "http://oranz.co/pmdtest/index.php";

            private static final String TAG_SUCCESS = "sucess";
            @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Set View to register.xml
        setContentView(R.layout.register);
        Button registerscreen=(Button)findViewById(R.id.btnCntnueRegister);
        // Listening to Login Screen link

        email = (EditText)findViewById(R.id.reg_email);
        password =(EditText)findViewById(R.id.reg_password);
        username =(EditText)findViewById(R.id.reg_username);
        RePass = (EditText)findViewById(R.id.rereg_password);
        EditText passwords=(EditText)findViewById(R.id.reg_password);
        passwords.setTransformationMethod(new PasswordTransformationMethod());
        EditText repasswords = (EditText) findViewById(R.id.rereg_password);
        repasswords.setTransformationMethod(new PasswordTransformationMethod());

        registerscreen.setOnClickListener(new View.OnClickListener(){

            public void onClick(View arg0) {

                Context context = getApplicationContext();
                int duration = Toast.LENGTH_SHORT;
                if(email.getText().toString().equals("")&&password.getText().toString().equals("")&&username.getText().toString().equals("")&&RePass.getText().toString().equals(""))
                {                                        
                    Toast toast = Toast.makeText(context, "Please Enter a valed data. !", duration);       
                    toast.show();
                }
                else if(email.getText().toString().equals("")||password.getText().toString().equals("")||username.getText().toString().equals("")||RePass.getText().toString().equals(""))
                {
                    Toast toast = Toast.makeText(context, "Please check any field is blank. !", duration);       
                    toast.show();
                }
                else if(password.getText().toString().compareTo(RePass.getText().toString())==0)
                {
                Intent k = new Intent(getApplicationContext(), ContinueRegister.class);
                startActivity(k);

                new CreateNewUser().execute();

                }
                else
                {
                    Toast toast = Toast.makeText(context, "Password matching is failed. !", duration);       
            toast.show();

                }
            }
            });
      TextView loginScreen = (TextView) findViewById(R.id.link_to_login);

      loginScreen.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent m = new Intent(getApplicationContext(),LoginActivity.class);
            startActivity(m);

        }
    });
    }
            class CreateNewUser extends AsyncTask<String, String, String> {

@Override
protected void onPreExecute() {
super.onPreExecute();
pDialog = new ProgressDialog(RegisterActivity.this);
pDialog.setMessage("Creating Product..");
pDialog.setIndeterminate(false);
pDialog.setCancelable(true);
pDialog.show();
}

protected String doInBackground(String... args) {
String Username = username.getText().toString();
String Email = email.getText().toString();
String Password = password.getText().toString();

List<NameValuePair> params = new ArrayList<NameValuePair>();
params.add(new BasicNameValuePair("Username", Username));
params.add(new BasicNameValuePair("Email", Email));
params.add(new BasicNameValuePair("Password",Password));

// getting JSON Object
// Note that create product url accepts POST method

JSONObject json = jsonParser.makeHttpRequest(url_create_product,
"POST", params);

// check log cat fro response
Log.d("Create Response", json.toString());                  
// check for success tag
try {
int success = json.getInt(TAG_SUCCESS);

if (success == 1) {
// successfully created user
Intent i = new Intent(getApplicationContext(),FinishSignupActivity.class);
startActivity(i);
// closing this screen
finish();
} else {
// failed to create user
}
} catch (JSONException e) {
e.printStackTrace();
}

return null;
                    }

                /**
                 * After completing background task Dismiss the progress dialog
                 * **/
                protected void onPostExecute(String file_url) {
// dismiss the dialog once done
pDialog.dismiss();
                }
            }
} 
```

***JSONParser.java***：

```
public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    // function get json from url
    // by making HTTP POST or GET method
    public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T16:24:42.083

这是由于android模拟器崩溃，程序中没有错误。

# java - 字符串到字节然后字节[] 0xformat

> ID：12385073
> 
> 赞同：0
> 
> 时间：2012-09-12T09:28:24.873
> 
> 标签：java, string, bytearray, byte

我在通过 string->byte->byte[] 进行转换时遇到问题

到目前为止我做了什么：

```
 double db = 1.00;
     double ab = db*100;
     int k = (int) ab;

     String aa = String.format("%06d", k);

     String first = aa.substring(0,2);``
     String second = aa.substring(2,4);
     String third = aa.substring(4,6);

     String ff = "0x"+first;
     String nn = "0x"+second;
     String yy = "0x"+third; 
```

我想将这些字节写入字节 []。我的意思是：

```
byte[] bytes = new byte[]{(byte) 0x02, (byte) 0x68, (byte) 0x14,
    (byte) 0x93, (byte) 0x01, ff,nn,yy}; 
```

按此顺序并使用 0x 进行投射。非常感谢任何帮助。

问候，阿里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:31:44.720

您可以使用[Byte.decode()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Byte.html#valueOf%28java.lang.String%29)

> 将字符串解码为字节。接受以下语法给出的十进制、十六进制和八进制数：

```
DecodableString:
    Signopt DecimalNumeral 
    Signopt 0x HexDigits 
    Signopt 0X HexDigits 
    Signopt # HexDigits 
    Signopt 0 OctalDigits 
```

下面的代码将打印`10`，`11`这是值`0XA`，`0XB`

```
 byte[] temp = new byte[2];
    temp[0] = Byte.decode("0xA");
    temp[1] = Byte.decode("0xB");
    System.out.println(temp[0]);
    System.out.println(temp[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T15:20:37.197

如我所见，这里的主要问题是如何将表示十六进制数的 2 char 字符串转换为字节类型。Byte 类有一个静态方法 parseByte(String s, int radix) 可以使用您想要的基数（在本例中为 16）将字符串解析为数字。这是一个如何进行解析并将结果保存在字节数组中的示例：

```
public static void main(String [] args){
    System.out.println(Arrays.toString(getBytes("0001020F")));
}

public static byte[] getBytes(String str) {

    byte [] result = new byte[str.length() / 2]; //assuming str has even number of chars...

    for(int i = 0; i < result.length; i++){
        int startIndex = i * 2;
        result[i] = Byte.parseByte(str.substring(startIndex, startIndex + 2), 16);
    }
    return result;
} 
```

# intellisense - mvvm-light：在 VS2012 上失去智能感知

> ID：12385078
> 
> 赞同：4
> 
> 时间：2012-09-12T09:28:44.220
> 
> 标签：intellisense, mvvm-light

我们正在使用 MVVM Light Toolkit（来自 Galasoft - Laurent Bugnion）。到目前为止，我们使用的是 Visual Studio 2010。一切都运行良好（感谢 Laurent）。

两天前，我们迁移到 Visual Studio 2012。现在 Intellisense 不再在 Xaml 文件中工作（但仍在代码隐藏中工作）。

在查看论坛并进行了一些测试后，我们似乎遇到了“GalaSoft.MvvmLight.Extras.SL5.dll”的问题。

一旦从项目引用中删除 GalaSoft.MvvmLight.Extras.SL5.dll，智能感知就会再次工作。

有人已经遇到过同样的问题和/或知道解决方案吗？

谢谢。

阿兰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:46:39.287

当我们从 Silverlight 4 迁移到 5 时，我们遇到了类似的问题。我们使用的是从另一台计算机复制的 GalaSoft.MvvmLight.Extras.SL5.dll 的本地副本。

安装 MvvmLight .msi 包并将 Silverlight 项目中的引用更改为 C:\Program Files (x86)\[...]\GalaSoft.MvvmLight.Extras.SL5.dll 后，IntelliSense 再次开始工作。

希望这可以帮助

# java - 带有 MySQL 故障转移的 Hibernate Web 应用程序

> ID：12385079
> 
> 赞同：3
> 
> 时间：2012-09-12T09:28:50.973
> 
> 标签：java, mysql, hibernate, database-replication

我开发了一个 Java Web 应用程序，使用 Hibernate 3.3.2 作为持久性框架，使用 Apache Tomcat 7.0.27 作为服务器。此应用程序已成功设置为使用 MySQL 5.5 Replication Server：1 个主服务器，1 个从属服务器。只读查询在后者上进行，其他在主实例上进行。

问题来了：我想测试数据库故障转移，即在某个时间停止从属 MySQL 实例，并查看应用程序在只读查询下仍然可以正常工作。据我从以下文章[MySQL Failover with Connector/J](http://dev.mysql.com/doc/connector-j/en/connector-j-usagenotes-j2ee-concepts-load-balancing-failover.html)中了解到，这应该可以在不更改代码的情况下实现。首先，我对第二种情况感兴趣：通信异常（以“08”开头的 SQL 状态）。不幸的是，这不会发生，如果我停止从服务器，有时需要很长时间才能从服务器获得响应，有时没有任何响应并且 HTTP 连接卡住了。在 Tomcat 日志中，只需获取以下行：

> 从服务器成功接收到的最后一个数据包是在 N 毫秒前。最后一个成功发送到服务器的数据包是 0 毫秒前。

这是休眠配置的片段：

```
<property name="hibernate.connection.driver_class">com.mysql.jdbc.ReplicationDriver</property>
<property name="hibernate.connection.url">jdbc:mysql://masterIP,slaveIP/mydb?loadBalancePingTimeout=1500&amp;loadBalanceBlacklistTimeout=7000&amp;autoReconnect=true&amp;failOverReadOnly=false&amp;roundRobinLoadBalance=true</property> 
```

在查看 MySQL 连接器文档时，我尝试了许多属性配置，但无法弄清楚如何获得可靠的故障转移。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:49:54.743

对我来说同样的问题：[https](https://dba.stackexchange.com/questions/19453/jboss-dont-fail-over-mysql-slave-using-datasource) ://dba.stackexchange.com/questions/19453/jboss-dont-fail-over-mysql-slave-using-datasource 。

它应该可以正常工作...但我不知道如何...

似乎许多人使用一些外部代理或负载平衡器：

*   [MySQL JDBC连接上的故障转移？](https://stackoverflow.com/questions/6711301/failover-on-mysql-jdbc-connections)
*   [如何在休眠中使用数据库作为备份/故障转移？](https://stackoverflow.com/questions/4001780/how-to-use-database-as-backup-failover-in-hibernate)

# c++ - 矢量拆分/移位元素

> ID：12385080
> 
> 赞同：2
> 
> 时间：2012-09-12T09:28:53.190
> 
> 标签：c++, stl, vector, refactoring

我有`std::vector<type> myVector`

可以说内容是：

```
el1, el2, el3, splitElement, el4,el5 
```

我正在分裂，`splitElement`我 想要向量：`split1``split2`

```
split2, el4, el5, el1, el2, el3, split1 
```

Split2 应该开始，split1 结束。其他元素顺序应如示例中所示。让我们将向量视为链。我想插入两个元素并移位链以使 split2 第一个元素。使用 stl.js 的优雅而有效的方法是什么？

我现在的快速代码（这是非常丑陋的解决方案）：

```
std::vector<type> before;
std::vector<type> after;
bool afterBool = false;
for(std::vector<type>::iterator it = myVector.begin(); it != myVector.end(); it++)
{
     if(*it == splitElement)
     {
          afterBool = true;
          before.push_back(split1);
          after.push_back(split2);
     }
     else if(afterBool)
          after.push_back(*it);
     else
          before.push_back(*it);
}
myVector.clear();
for(std::vector<type>::iterator it = after.begin(); it != after.end(); it++)
     myVector.push_back(*it);
for(std::vector<type>::iterator it = before.begin(); it != before.end(); it++)
     myVector.push_back(*it); 
```

我添加它只是因为我不想在没有任何代码的情况下离开主题。

如何以好的方式做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T10:37:28.693

例子：

```
std::vector<int> myvector = {1, 2, 3, 0, 4, 5};
int splitElement = 0;
int split1 = -1;
int split2 = -2; 
```

首先你找到你的`splitElement`：

```
auto it = std::find(myvector.begin(), myvector.end(), splitElement); 
```

`splitElement`然后使用[std::rotate](http://en.cppreference.com/w/cpp/algorithm/rotate)算法在找到的点旋转向量：

```
std::rotate(myvector.begin(), it, myvector.end());
// this yields { 0, 4, 5, 1, 2, 3 } 
```

最后只需将 split2 分配给开始并将 split1 推到后面：

```
myvector[0] = split2;
myvector.push_back(split1); 
```

向量现在看起来像这样：`{-2, 4, 5, 1, 2, 3, -1}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:42:34.673

听起来您想对向量进行分区。因此，您可以使用`std::partition`
以整数和 -1 作为拆分元素的示例。

```
#include <iostream>
#include <algorithm>
#include <vector>
using namespace std;

struct Splitter
{
    int split;
    Splitter(int sp):split(sp){}
    bool operator()(int i)
    {
    return split < i;
    }
};
int main () {
  vector<int> myvector;
  vector<int>::iterator it, bound;

  // set some values:
  for (int i=1; i<10; ++i) myvector.push_back(i); // 1 2 3 4 5 6 7 8 9

  bound = partition (myvector.begin(), myvector.end(), Splitter(5));

  myvector.insert(bound, -1);
  cout << "odd members:";
  for (it=myvector.begin(); it!=myvector.end(); ++it)
    cout << " " << *it;
  cout << endl;

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:53:24.340

由于您没有提到类型的排序要求和 < 操作。我想你只是想拆分元素并将第一个拆分作为向量中的最后一个元素，将第二个拆分作为向量的第一个元素我想更好的方法是使用数据结构（链接列表）

*   将向量的元素存储在 LL 中
*   遍历列表直到拆分元素
*   将第二个元素作为头部，将第一个元素作为 LL 的尾部
*   原来的尾巴应该指向原来的tal旁边。

在完成上述这些操作之后。只需遍历 ll 并存储回向量中。

# ipad - 使用垂直旋转动画在 iPad 上呈现 formSheet modalViewController

> ID：12385081
> 
> 赞同：1
> 
> 时间：2012-09-12T09:28:56.250
> 
> 标签：ipad, animation, centering, presentmodalviewcontroller, screen-rotation

我在 splitViewDetailController 中有带有 splitViewController 和 tableViewController 的 iPad 应用程序。在单击 tableCell 后，我想显示 detailViewController（使用 UIModalPresentationFormSheet），并带有自定义动画。动画应该是 tableViewCell 的垂直旋转，旋转单元格应该转换为 detailViewController 视图。整个动画应该看起来像 iTunes 播客中的动画。

这是我的动画代码：

```
CGRect rectInCell = [[self.cellView superview] convertRect:self.cellView.frame toView:cell];
CGRect rectInTableView = [self.tableView rectForRowAtIndexPath:[self.tableView indexPathForCell:cell]];
CGRect rectInSuperview = [self.tableView convertRect:rectInTableView toView:[[[APP_DELEGATE window] subviews] lastObject]];

CGRect imgRect = CGRectMake(rectInSuperview.origin.x+rectInCell.origin.x, rectInSuperview.origin.y+rectInCell.origin.y, rectInCell.size.width, rectInCell.size.height);

self.originalRelativeFrame = imgRect;
self.originalFrame      = self.cellView.frame;
self.originalSuperview  = self.cellView.superview;
self.originalTransform  = self.cellView.transform;

[self.cellView setFrame:imgRect];
if (self.whiteView == nil) {
    self.whiteView = [[UIView alloc] init];
    [self.whiteView setBackgroundColor:[UIColor whiteColor]];
}
[self.whiteView setFrame:imgRect];
[self.whiteView setAlpha:0];

self.cellView.layer.zPosition = self.cellView.frame.size.width;
self.whiteView.layer.zPosition = self.cellView.frame.size.width;

[[[[APP_DELEGATE window] subviews] lastObject] addSubview:self.whiteView];
[[[[APP_DELEGATE window] subviews] lastObject] addSubview:self.cellView];

CATransform3D rotation = CATransform3DMakeRotation(M_PI/2, 0, 1, 0);
CATransform3D scale = CATransform3DMakeScale(1.5,1.5,1);//(540.0/self.cellView.bounds.size.width, 620.0/self.cellView.bounds.size.height, 1);
CGPoint finCent = CGPointMake([[[[APP_DELEGATE window] subviews] lastObject] bounds].size.width/2.0, [[[[APP_DELEGATE window] subviews] lastObject] bounds].size.height/2.0);
//(finCent.x > self.cellView.center.x) ? (finCent.x - self.cellView.center.x) : (self.cellView.center.x - finCent.x);
CGPoint center = CGPointMake((self.cellView.center.x - finCent.x) / 2.0 ,(self.cellView.center.y - finCent.y )/2.0);

[UIView animateWithDuration:ANIMATION_DURATION_HALF delay:0 options:UIViewAnimationOptionCurveEaseOut
                 animations:^{

                     [self.cellView.layer setTransform:CATransform3DConcat(scale, rotation)];
                     [self.cellView setCenter:CGPointMake(self.cellView.center.x - center.x, self.cellView.center.y - center.y)];
                     //[self.cellView setAlpha:0];

                     [self.whiteView.layer setTransform:CATransform3DConcat(scale, rotation)];
                     [self.whiteView setCenter:CGPointMake(self.whiteView.center.x - center.x, self.whiteView.center.y - center.y)];
                     //[self.whiteView setAlpha:1];

                     [self.blackView setAlpha:0.3];

                 }
                 completion:^(BOOL finished) {

                     [self.whiteView setAlpha:1];
                     [self.cellView setAlpha:0];

                     [UIView animateWithDuration:ANIMATION_DURATION_HALF delay:0 options:UIViewAnimationOptionCurveLinear
                                      animations:^{

                                          CATransform3D rotation = CATransform3DMakeRotation(M_PI, 0, 1, 0);
                                          CATransform3D scale = CATransform3DMakeScale(540.0/self.cellView.bounds.size.width, 620.0/self.cellView.bounds.size.height, 1);
                                          CGPoint finCent = CGPointMake([[[[APP_DELEGATE window] subviews] lastObject] bounds].size.width/2.0, [[[[APP_DELEGATE window] subviews] lastObject] bounds].size.height/2.0);

                                          [self.cellView.layer setTransform:CATransform3DConcat(scale, rotation)];
                                          [self.cellView setCenter:finCent];

                                          [self.whiteView.layer setTransform:CATransform3DConcat(scale, rotation)];
                                          [self.whiteView setCenter:finCent];

                                      }
                                      completion:^(BOOL finished) {

                                          [self presentModalViewController:self.modalCtrl animated:YES];

                                      }];

                 }]; 
```

但问题是应用程序的轮换。在我的 detailViewController 后面旋转应用程序 whiteView 后，它不会保持在窗口中间。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:48:32.143

当用户旋转设备时，您应该重新排列视图的布局。

UIViewController 类提供了几个方法来处理这个问题：

```
– willRotateToInterfaceOrientation:duration:
– willAnimateRotationToInterfaceOrientation:duration:
– didRotateFromInterfaceOrientation: 
```

看看[UIViewController 参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
                            duration:(NSTimeInterval)duration {

       CGRect imgRect = <CALC YOUR NEW FRAME HERE TO ACCOUNT FOR THE DEVICE ORIENTATION>;
       [self.whiteView setFrame:imgRect];
} 
```

在计算新框架时，您可以使用`toInterfaceOrientation`参数来了解哪个方向。您拥有的另一个可能使事情变得更简单的选项是定义视图`center`。

# java - 删除 JR 服务器在预定时间内生成的报告

> ID：12385085
> 
> 赞同：2
> 
> 时间：2012-09-12T09:29:06.827
> 
> 标签：java, jasper-reports, jasperserver

我想在预定时间内对生成的报告（ *PDF文件）执行删除。*

我完成了调度程序部分。唯一的事情是创建一种方法，该方法具有删除在这些小时之间生成的一堆报告的逻辑。

1.  是否有可用的*JasperReports API*可用于从指定位置删除那些生成的报告？

2.  如何使用*ResourceLookup*，查找资源和删除资源。我对使用它没有太多想法。

3.  一个小例子/资源链接会有所帮助

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-12T10:15:46.913

您知道要删除报告的目录。

因此，在简单的 Java 中，使用 lastModified 日期：

```
File dir = new File("directoryName");

Date deleteStartDate;
Date deleteEndDate;

File[] children = dir.listFiles();
if (children == null) {
    // Either dir does not exist or is not a directory
} else {
    for (int i=0; i<children.length; i++) {
        // Get filename of file or directory
        File file = children[i];
        Date lastModified = new Date(file.lastModified());
        if (lastModified.after(deleteStartDate) && lastModified.before(deleteEndDate))
        {
            file.delete();
        }
    }
} 
```

# asp.net - 将 .Net 1.1 网站转换为 4.0

> ID：12385093
> 
> 赞同：3
> 
> 时间：2012-09-12T09:29:24.487
> 
> 标签：asp.net, .net

我有一些需要转换为 4.0 的 .NET 1.1 网站。我不想更改功能或设计，我只想将它们转换为 4.0，以便将来可以轻松进行编辑，因为在 1.1 中工作并不容易。为此，我应该遵循什么野兽方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T09:32:16.700

使用 VS 2012 中的转换器工具，然后在构建后清理所有错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T09:32:21.893

只需将 targetFramework 元素放在 webconfig 中

```
<compilation targetFramework="4.0"> 
```

通过这样做，您的网站将运行`Asp.Net 4.0`，因为您不想更改任何其他内容，只需保留其他所有内容，
因为`.net 4.0`向后兼容我认为您不会遇到任何错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T09:34:22.050

不要忘记阅读[Microsoft .NET Framework 1.1 and 2.0 Compatibility](http://msdn.microsoft.com/en-us/library/ms994381.aspx)。

之后，请务必查看 .NET 4.0 迁移问题文档。

阅读[Jon Skeet的](https://softwareengineering.stackexchange.com/users/8958/jon-skeet)[C# 深度](https://rads.stackoverflow.com/amzn/click/com/1935182471)文章，其中描述了每个 C# 版本的所有新功能。

# r - 在图中绘制职业道路

> ID：12385103
> 
> 赞同：0
> 
> 时间：2012-09-12T09:29:45.653
> 
> 标签：r, ggplot2, diagram, igraph

我有数据框

```
test <- structure(list(
     y2002 = c("freshman","freshman","freshman","sophomore","sophomore","senior"),
     y2003 = c("freshman","junior","junior","sophomore","sophomore","senior"),
     y2004 = c("junior","sophomore","sophomore","senior","senior",NA),
     y2005 = c("senior","senior","senior",NA, NA, NA)), 
              .Names = c("2002","2003","2004","2005"),
              row.names = c(c(1:6)),
              class = "data.frame")
> test
       2002      2003      2004   2005
1  freshman  freshman    junior senior
2  freshman    junior sophomore senior
3  freshman    junior sophomore senior
4 sophomore sophomore    senior   <NA>
5 sophomore sophomore    senior   <NA>
6    senior    senior      <NA>   <NA> 
```

我想创建一个应该类似于下面丑陋的文字艺术的图表：

```
freshman ---- junior ----------------------\

freshman ---- junior --- sophomore -------- senior

sophomore ================================/

senior ---------------------------------/ 
```

换句话说，我需要在图表中显示通往“高级”的可能路径，根据使用该路径的案例数量为边赋予权重。

**第一次尝试** 此代码生成一个图形，*但与上面的文本艺术不同*。

```
library(igraph)
elist <- lapply(seq_len(nrow(test)), function(i) {
  x <- as.character(test[i,])
  x <- unique(na.omit(x))
  x <- rep(x, each=2)
  x <- x[-1]
  x <- x[-length(x)]
  r <- matrix(x, ncol=2, byrow=TRUE)
  if (nrow(r) > 0) { r <- cbind(r, i) } else { r <- cbind(r, numeric()) }
  r
})

result <- as.data.frame(do.call(rbind, elist))
names(result) <- c("vertex","edge", "id")
categories <- data.frame(name=c("freshman","junior","sophomore","senior"))
g <- graph.data.frame(result,directed=T,vertices=categories)
g <- set.edge.attribute(g, "weight", value=runif(ecount(g))*10)
igraph.par("plot.layout", layout.reingold.tilford)
plot(g, vertex.label=categories$name, vertex.label.dist=7, 
     edge.width=get.edge.attribute(g,"weight"), edge.arrow.size=1.5) 
```

**结果**（不是我想要的）

![结果图像](../Images/469db3607e3491c8608b7039e6c6bfe0.png)

**这个问题与[这篇文章](https://stackoverflow.com/questions/12362866/from-dataframe-to-vertex-edge-array/12382276#12382276)有关*

**而[这篇文章](https://stackoverflow.com/questions/12417467/reduce-row-to-unique-items/12418321)是解决这个问题的必要步骤*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:30:46.800

这是一个完全可行的解决方案。必须自下而上阅读图表，记住每个人都被表示为代表他们职业道路的垂直线。是的，我确实为这项任务放弃了 iGraph。\o/

![在此处输入图像描述](../Images/916f40d3f763f03500b3f5c7bdbbe566.png)

```
require(reshape2)

meltpath <- function(x){
  require(data.table)
  x <- melt(data = x, id.vars = 'id', measure.vars = names(x)[-1])
  names(x) <- c('id','year','category')
  x$year <- factor(x$year)
  id <- unique(x$id)
  idtable <- data.table(id = id, count = 1:length(id))
  x <- x[order(x$id), ]
  x <- merge(x, idtable, by='id')
  return(x)
}

carpath <- function(datatable, max_x = max(datatable$count)){
  require(ggplot2)
  p = ggplot(datatable, aes(x = count, y = year, fill = category)) + 
    geom_tile() +
    scale_y_discrete(name = "year\n", 
                     breaks = rev(levels(datatable$year))) + 
    scale_x_continuous(name = "cumulative count", 
                      limits = c(0,max_x)) +
    guides(fill = guide_legend(title="Career stage\n",
                               reverse=TRUE)) +
    theme(panel.grid.major = element_blank(), 
         panel.background = element_blank(), 
         axis.ticks = element_blank(),
         plot.title = element_text(vjust = 1.2, face="bold", size=20),
         axis.title.y = element_text(size=15, face="bold"),
         axis.text.y = element_text(size=15, colour="black"),
         legend.title = element_text(size = 15),
         legend.text = element_text(size = 15)) +
         scale_fill_brewer(palette = "Dark2") +
    ggtitle("Career path of individual Students by year")
  p
}

test <- structure(list(
  id = 1:6,
  y2002 = c("freshman","freshman","freshman","sophomore","sophomore","senior"),
  y2003 = c("freshman","junior","sophomore","sophomore","sophomore","senior"),
  y2004 = c("junior","sophomore","sophomore","senior","senior",NA),
  y2005 = c("senior","senior","senior",NA, NA, NA)), 
                  .Names = c("id","2002","2003","2004","2005"),
                  row.names = c(c(1:6)),
                  class = "data.frame")
# Grow dataset
testg = data.frame()
for (i in rownames(test)) {
  test0 <- test[rep(i, each=abs(floor(rnorm(1)*100))),]
  testg <- rbind(testg, test0)
}
testg$id <- 1:nrow(testg)
# Munge
test0 <- testg
test1 <- melt(data = test0, id.vars = 'id', measure.vars = names(test0)[-1])
names(test1) <- c('id','year','category')
test1$category[test1$category == 'freshman'] <- 1
test1$category[test1$category == 'junior'] <- 2
test1$category[test1$category == 'sophomore'] <- 3
test1$category[test1$category == 'senior'] <- 4
test1$category <- factor(test1$category, levels=1:4, labels = c('1\. freshman','2\. junior','3\. sophomore','4\. senior'))
test1 <- test1[order(test1$category), ]
test1 <- dcast(test1, id ~ year)
test1 <- test1[order(test1$'2005',test1$'2004',test1$'2003',test1$'2002'), ]
test2 <- meltpath(test1)
carpath(test2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T10:46:56.683

我认为您并不完全了解您在做什么，在您的图表示例草图中，您有 8 个节点。但是在您制作的图中，您只有 4 个节点。这是因为在您创建的图表中，您只有 4 个节点。`igraph`将处理具有相同名称的节点（例如，两个大二学生作为同一个节点但有两条边）

但是，一旦您制作了具有多个大二等节点的图表。例如大二1和大二。然后，您可以将节点放置在您想要的位置，`layout`如下所示

```
 df<- read.table(text="vertex edge weight
 freshman junior 2
 junior    senior 2
 freshman2 junior2 2
 junior2 sophomore 2
 sophomore senior 2
 sophomore2 senior 3
 senior2   senior 2",header=TRUE)
 categories <-data.frame(name=c("freshman","junior","sophomore","senior","freshman2",
 "junior2","sophomore2","senior2"))

g <- graph.data.frame(df,directed=T,vertices=categories)
layOUT<-data.frame(x=c(1,2,3,4,1,2,1,1),y=c(4,4,3,3,3,3,2,1))
l<-as.matrix(layOUT)
plot(g,layout=l) 
```

![在此处输入图像描述](../Images/1c562d954065acd199feafac5049096a.png)

# c# - 看起来像 Word 2010 中的样式选择器的 VSTO 功能区库

> ID：12385104
> 
> 赞同：3
> 
> 时间：2012-09-12T09:29:56.667
> 
> 标签：c#, visual-studio-2010, ms-word, vsto, ribbon

我正在用 C# 编写功能区 COM 加载项，并尝试在新选项卡上创建可用模板文件库。

是否可以将画廊设置为像 word ie 中主页选项卡上的样式选择器画廊一样打开。显示画廊中的所有文件名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T15:27:59.580

MS 不允许其他人在 Outlook 2007->2013 中使用**功能区库。**也许我们会在 Outlook 2015/2016 中看到它。

查看[MSDN 代码示例，了解可用的功能区 XML 控件](http://code.msdn.microsoft.com/office/VBOutlookRibbonXml-bc478854)。您可以使用的最接近的方法是使用显示可自定义下拉网格的[库控件](http://msdn.microsoft.com/en-us/library/office/dd548011%28v=office.12%29.aspx)，而不是功能区中的库。

# android - Android 视频测试自动化

> ID：12385105
> 
> 赞同：1
> 
> 时间：2012-09-12T09:29:59.493
> 
> 标签：android, testing, video

我想在*Android ICS-x86*上自动测试视频播放器。基本上，我从*播放、暂停、随机搜索、随机播放*等功能开始。

请告诉我可以使用的好工具。

*MonkeyRunner*在那里，但它不支持所有*Python*模块。所以，我正在寻找更多的自动化工具和方法。

# c# - 使用 foreach 循环删除 Winform 上的所有控件

> ID：12385109
> 
> 赞同：1
> 
> 时间：2012-09-12T09:30:09.867
> 
> 标签：c#, winforms, foreach, dispose

> **可能重复：**
> [C# 没有像我说的那样处理控件](https://stackoverflow.com/questions/1493309/c-sharp-not-disposing-controls-like-i-told-it-to)

我用它来删除我在 Winform 上创建的所有图片框

```
foreach (PictureBox pb in this.Controls)
{
    pb.Dispose();
} 
```

但每次只有大约一半的图片框被丢弃，另一半保持不变

我通过用循环包围它来解决它，`while (Controls.OfType<PictureBox>().Count() > 0 )`所以它只会被执行，直到所有图片框都消失了，但这是一个糟糕的解决方案，我想知道为什么会发生这种情况以及如何以正确的方式解决它

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T10:02:50.087

[`Control.Dispose`](http://msdn.microsoft.com/en-us/library/3cc9y48w)正在从集合中删除控件，更改索引并弄乱 foreach。

您可以通过使用反向 for 循环或创建一个包含引用的单独数组来解决此问题。

**解决方案 #0**

```
for (int i = Controls.Count - 1; i >= 0; i--)
{
    Controls[i].Dispose();
} 
```

**解决方案#1**

```
foreach (var control in Controls.Cast<Control>().ToArray())
{
    control.Dispose();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:37:28.753

尝试：

```
foreach(Control c in this.Controls)
{
  if(c is PictureBox) 
  {
   c.Dispose();
   this.Controls.Remove(c);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:37:57.447

因为您有不是 a 的控件，所以`PictureBox`当循环到达此控件时，您的循环将引发异常。像这样修复你的循环：

```
foreach (PictureBox pb in this.Controls.OfType<PictureBox>().ToArray())
{
    pb.Dispose();
    this.Controls.Remove(pb);
} 
```

# c# - C# WaitFor 或在下一行之前暂停 X 秒

> ID：12385110
> 
> 赞同：4
> 
> 时间：2012-09-12T09:30:10.693
> 
> 标签：c#

我试图找出执行以下操作的最佳方法是什么？我有一个与 httpwebrequest 一起使用的控制台应用程序。在我的应用程序的某些部分，我想这样做：

```
 agent.GetURL("http://site.com/etc.../"); 
Wait for 8-16 Seconds<-Should be random  
 Agent.GetURL("http://site.com/etc.../");
Wait for 4-6 Seconds etc... 
```

请求是时间敏感的，所以计算机时间应该与每个请求不同我不能只是请求等待它完成并再次请求。我已经阅读了有关计时器 thread.sleep 的信息。恐怕我没有停止或暂停的经验 不想在未来提出问题。那么，如果你能告诉我这种代码的最佳方法是什么？

计时器/thread.sleep 是否有可能在函数内部并在我需要时使用它？

谢谢！

编辑：这个程序是不可见的，所以我需要一个不加载圆形鼠标的解决方案:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T09:31:21.537

尝试

```
Random random = new Random();
int timeDelay = random.Next(8, 16);

Thread.Sleep(timeDelay * 1000); //time in milliseconds 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T09:42:51.593

[这个问题](https://stackoverflow.com/questions/6299197/rngcryptoserviceprovider-generate-number-in-a-range-faster-and-retain-distribu)提供了一种在定义范围内生成随机数的方法，您可以按原样将其包装在另一种方法中以暂停随机数秒。

代码可能如下所示：

```
// Method from the linked answer, copy-pasted here for completeness
// added the relevant fields because the original code is an override
public Int32 GetNewRandomNumber(Int32 minValue, Int32 maxValue)
{
    RNGCryptoServiceProvider _rng = new RNGCryptoServiceProvider();
    byte[] _uInt32Buffer = new byte[4];

    if (minValue > maxValue) 
        throw new ArgumentOutOfRangeException("minValue");
    if (minValue == maxValue) return minValue;
    Int64 diff = maxValue - minValue;
    while (true)
    {
        _rng.GetBytes(_uint32Buffer);
        UInt32 rand = BitConverter.ToUInt32(_uint32Buffer, 0);

        Int64 max = (1 + (Int64)UInt32.MaxValue);
        Int64 remainder = max % diff;
        if (rand < max - remainder)
        {
            return (Int32)(minValue + (rand % diff));
        }
    }
}

public void RandomWait(int minWait, int maxWait)
{
    // Thread.Sleep() wants a number of milliseconds to wait
    // We're going, as an example, to wait between 8 and 16 seconds
    System.Threading.Thread.Sleep(GetNewRandomNumber(8, 16) * 1000);
} 
```

然后，您只需`RandomWait()`在需要时拨打电话即可。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-12T09:31:41.877

用于`Thread.Sleep(miliseconds)`在所需时间停止执行。

# jquery - 用于日期时间选择的 jQuery 插件，具有相对时间的功能

> ID：12385113
> 
> 赞同：1
> 
> 时间：2012-09-12T09:30:22.907
> 
> 标签：jquery, jquery-ui, gwt

想要一个具有以下功能的用于选择日期和时间的 jQuery 插件：

*   可以选择相对时间，立即在选择中。前 1 小时，前 2 小时，依此类推。

*   可以同时选择日期。

我找到了一个满足确切要求的屏幕截图，但我不知道它是什么插件，它来自什么库等。我认为它来自 GWT，但我不确定。我在 GWT 文档中没有找到类似的参考。如果有人可以指导我确切的插件是什么，或者建议一个具有相同功能的替代插件，那将不胜感激。

图片如下：http: [//imgur.com/4jFir](http://imgur.com/4jFir)

我是这方面的新手；很抱歉，如果这是在错误的线程上，或者我超越了社区的一些已知规则。

# templates - 列表中的 Freemarker if-else（范围）

> ID：12385118
> 
> 赞同：1
> 
> 时间：2012-09-12T09:30:46.620
> 
> 标签：templates, freemarker, template-engine

在一个列表中，我想合并一个 if host.machine == 1 then action=Set else action=Create

我想要以下输出 `Type:Machine;Action:Set;Attributes[Name:machine1~NodeManager.ListenAddress:10.104.17.70~NodeManager.ListenPort:5558]<BR> Type:Machine;Action:Create;Attributes[Name:machine2~NodeManager.ListenAddress:10.104.17.71~NodeManager.ListenPort:5558]<BR>`

我的数据

`hosts:[{"name": "trfuoemlpa004v", "node": 0, "server": 1, "Machine": 1, "ManagedPort": "7002", "SSLPort": 1081}, {"name": "trfuoemlpa007v", "node": 1, "server": 2, "Machine": 2, "ManagedPort": "7002", "SSLPort": 1081}]`

我制作的不同模板都失败了：

1) `<#list hosts as host><#assign machine=${host.machine}><#if machine == 1><#assign action="Set"><#else><#assign action="Create"></#if>Type:Machine;Action:${action};Attributes[Name:${host.machine}~NodeManager.ListenAddress:${host.name}~NodeManager.ListenPort:${nodeManagerPort}]<BR></#list>`

`**freemarker.core.ParseException: Encountered "}" at line 8, column 40 in J2EE.properties. Was expecting one of:">" ... "." ... "[" ... "(" ... "?" ... "!" ... <TERMINATING_EXCLAM> ... "??" ... "+" ...**`

2) `<#list hosts as host><#if host.machine == 1><#assign action="Set"><#else><#assign action="Create"></#if>Type:Machine;Action:${action};Attributes[Name:${host.machine}~NodeManager.ListenAddress:${host.name}~NodeManager.ListenPort:${nodeManagerPort}]<BR></#list>`

`**freemarker.core.InvalidReferenceException: Expression host.machine is undefined**`

3) `<#list hosts as host><#if $host.machine} == 1 > ...`

`**freemarker.core.ParseException: Encountered "}" at line 8, column 40 in J2EE.properties. Was expecting one of:">" ... "." ... "[" ... "(" ... "?" ... "!" ... <TERMINATING_EXCLAM> ... "??" ... "+" ...**`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:14:00.323

第二个是正确的，因为*在*`$`FreeMarker 表达式中没有特殊含义（字符串文字除外）。仅用于将表达式的值插入*静态文本*（或字符串文字）。错误消息意味着该变量没有调用子变量或者它是. 在最后一种情况下，您必须为其指定一些默认值，例如.*`${expression}`*`host``machine``null``host.machine!0`**

 **顺便说一句，这个：

`<#if host.machine == 1><#assign action="Set"><#else><#assign action="Create"></#if>Type:Machine;Action:${action};`

可以这样写：

`Type:Machine;Action:<#if host.machine == 1>Set<#else>Create</#if>;`**

# string - 列表[字符串] -> 向量[向量[字符]]

> ID：12385120
> 
> 赞同：2
> 
> 时间：2012-09-12T09:30:51.753
> 
> 标签：string, list, scala, vector, char

我正在尝试将字符串列表转换为 char 向量的向量：

```
import collection.breakOut

def stringsToCharVectors(xs: List[String]) =
    xs.map(stringToCharVector)(breakOut) : Vector[Vector[Char]]

def stringToCharVector(x: String) =
    x.map(a => a)(breakOut) : Vector[Char] 
```

有没有一种`stringToCharVector`不涉及与身份函数映射的方法？一般来说，是否有更短/更好的实施方式`stringsToCharVectors`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T09:46:49.713

您可以将 a`String`直接传递给 varargs 构造函数`Vector`：

```
def stringToCharVector(x: String) = Vector(x: _*) 
```

在这一点上，有一个单独的方法似乎有点愚蠢。 `breakOut`用于优化；如果你只想转换，你可以

```
Vector(xs.map(x => Vector(x: _*)): _*) 
```

以相对适度的成本为每个列表元素增加一个对象。（所有字符很可能是内存密集型部分。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T10:41:28.813

在 Scala 2.10 中：

```
scala> val xs = List("hello")
xs: List[String] = List(hello)

scala> xs.map(_.to[Vector]).to[Vector]
res0: Vector[Vector[Char]] = Vector(Vector(h, e, l, l, o)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T01:50:22.540

另一种方法是将所有元素添加到一个空的 Vector 中；无论如何，当您调用转换方法时，这就是幕后发生的事情：

```
def stringsToCharVectors(xs: List[String]) =
    Vector() ++ xs.map(Vector() ++ _) 
```

# flume - 如何使用 Flume NG 在控制台上收集日志？

> ID：12385121
> 
> 赞同：6
> 
> 时间：2012-09-12T09:30:51.130
> 
> 标签：flume

我正在测试 Flume NG (1.2.0) 以收集日志。Flume 收集日志文件`flume_test.log`并将收集的日志作为 sysout 打印到控制台是一个简单的测试。`conf/flume.conf`是：

```
agent.sources = tail
agent.channels = memoryChannel
agent.sinks = loggerSink

agent.sources.tail.type = exec
agent.sources.tail.command = tail -f /Users/pj/work/flume_test.log
agent.sources.tail.channels = memoryChannel

agent.sinks.loggerSink.channel = memoryChannel
agent.sinks.loggerSink.type = logger

agent.channels.memoryChannel.type = memory
agent.channels.memoryChannel.capacity = 100 
```

我运行 Flume 如下：

```
$ $FLUME_HOME/bin/flume-ng agent --conf $FLUME_HOME/conf --conf-file $FLUME_HOME/conf/flume.conf --name agent1 -Dflume.root.logger=DEBUG,console 
```

在控制台上运行 Flume 后的日志是：

```
Info: Sourcing environment configuration script /usr/local/lib/flume-ng/conf/flume-env.sh
+ exec /Library/Java/JavaVirtualMachines/jdk1.7.0_07.jdk/Contents/Home/bin/java -Xmx20m -Dflume.root.logger=DEBUG,console -cp '/usr/local/lib/flume-ng/conf:/usr/local/lib/flume-ng/lib/*' -Djava.library.path= org.apache.flume.node.Application --conf-file /usr/local/lib/flume-ng/conf/flume.conf --name agent1
2012-09-12 18:23:52,049 (main) [INFO - org.apache.flume.lifecycle.LifecycleSupervisor.start(LifecycleSupervisor.java:67)] Starting lifecycle supervisor 1
2012-09-12 18:23:52,052 (main) [INFO - org.apache.flume.node.FlumeNode.start(FlumeNode.java:54)] Flume node starting - agent1
2012-09-12 18:23:52,054 (lifecycleSupervisor-1-0) [INFO - org.apache.flume.node.nodemanager.DefaultLogicalNodeManager.start(DefaultLogicalNodeManager.java:187)] Node manager starting
2012-09-12 18:23:52,056 (lifecycleSupervisor-1-0) [INFO - org.apache.flume.lifecycle.LifecycleSupervisor.start(LifecycleSupervisor.java:67)] Starting lifecycle supervisor 9
2012-09-12 18:23:52,054 (lifecycleSupervisor-1-1) [INFO - org.apache.flume.conf.file.AbstractFileConfigurationProvider.start(AbstractFileConfigurationProvider.java:67)] Configuration provider starting
2012-09-12 18:23:52,056 (lifecycleSupervisor-1-0) [DEBUG - org.apache.flume.node.nodemanager.DefaultLogicalNodeManager.start(DefaultLogicalNodeManager.java:191)] Node manager started
2012-09-12 18:23:52,057 (lifecycleSupervisor-1-1) [DEBUG - org.apache.flume.conf.file.AbstractFileConfigurationProvider.start(AbstractFileConfigurationProvider.java:86)] Configuration provider started
2012-09-12 18:23:52,058 (conf-file-poller-0) [DEBUG - org.apache.flume.conf.file.AbstractFileConfigurationProvider$FileWatcherRunnable.run(AbstractFileConfigurationProvider.java:188)] Checking file:/usr/local/lib/flume-ng/conf/flume.conf for changes
2012-09-12 18:23:52,058 (conf-file-poller-0) [INFO - org.apache.flume.conf.file.AbstractFileConfigurationProvider$FileWatcherRunnable.run(AbstractFileConfigurationProvider.java:195)] Reloading configuration file:/usr/local/lib/flume-ng/conf/flume.conf
2012-09-12 18:23:52,063 (conf-file-poller-0) [INFO - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.addProperty(FlumeConfiguration.java:902)] Added sinks: loggerSink Agent: agent
2012-09-12 18:23:52,063 (conf-file-poller-0) [INFO - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.addProperty(FlumeConfiguration.java:988)] Processing:loggerSink
2012-09-12 18:23:52,063 (conf-file-poller-0) [DEBUG - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.addProperty(FlumeConfiguration.java:992)] Created context for loggerSink: type
2012-09-12 18:23:52,063 (conf-file-poller-0) [INFO - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.addProperty(FlumeConfiguration.java:988)] Processing:loggerSink
2012-09-12 18:23:52,063 (conf-file-poller-0) [DEBUG - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.isValid(FlumeConfiguration.java:295)] Starting validation of configuration for agent: agent, initial-configuration: AgentConfiguration[agent]
SOURCES: {tail={ parameters:{command=tail -f /Users/pj/work/flume_test.log, channels=memoryChannel, type=exec} }}
CHANNELS: {memoryChannel={ parameters:{capacity=100, type=memory} }}
SINKS: {loggerSink={ parameters:{type=logger, channel=memoryChannel} }}

2012-09-12 18:23:52,068 (conf-file-poller-0) [DEBUG - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.validateChannels(FlumeConfiguration.java:450)] Created channel memoryChannel
2012-09-12 18:23:52,082 (conf-file-poller-0) [DEBUG - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.validateSinks(FlumeConfiguration.java:649)] Creating sink: loggerSink using LOGGER
2012-09-12 18:23:52,085 (conf-file-poller-0) [DEBUG - org.apache.flume.conf.FlumeConfiguration$AgentConfiguration.isValid(FlumeConfiguration.java:353)] Post validation configuration for agent
AgentConfiguration created without Configuration stubs for which only basic syntactical validation was performed[agent]
SOURCES: {tail={ parameters:{command=tail -f /Users/pj/work/flume_test.log, channels=memoryChannel, type=exec} }}
CHANNELS: {memoryChannel={ parameters:{capacity=100, type=memory} }}
AgentConfiguration created with Configuration stubs for which full validation was performed[agent]
SINKS: {loggerSink=ComponentConfiguration[loggerSink]
  CONFIG: 
    CHANNEL:memoryChannel
}

2012-09-12 18:23:52,085 (conf-file-poller-0) [DEBUG - org.apache.flume.conf.FlumeConfiguration.validateConfiguration(FlumeConfiguration.java:117)] Channels:memoryChannel

2012-09-12 18:23:52,085 (conf-file-poller-0) [DEBUG - org.apache.flume.conf.FlumeConfiguration.validateConfiguration(FlumeConfiguration.java:118)] Sinks loggerSink

2012-09-12 18:23:52,085 (conf-file-poller-0) [DEBUG - org.apache.flume.conf.FlumeConfiguration.validateConfiguration(FlumeConfiguration.java:119)] Sources tail

2012-09-12 18:23:52,085 (conf-file-poller-0) [INFO - org.apache.flume.conf.FlumeConfiguration.validateConfiguration(FlumeConfiguration.java:122)] Post-validation flume configuration contains configuration  for agents: [agent]
2012-09-12 18:23:52,085 (conf-file-poller-0) [WARN - org.apache.flume.conf.properties.PropertiesFileConfigurationProvider.load(PropertiesFileConfigurationProvider.java:227)] No configuration found for this host:agent1 
```

我觉得 Flume 启动正常，所以就`flume_test.log`连续放了一堆线。但它不会`flume_test.log`在控制台上打印添加的行。

这个测试有什么问题？感谢您的任何评论和更正。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T07:51:10.650

问题是启动脚本中( ) 中的代理名称与`flume.conf`( `agent`) 之后的代理名称之间的名称不匹配。`--name``agent1`

将 name 选项从 更改为 后`--name agent1`，`--name agent`问题解决。

感谢我的同事莱尼。

# wcf - 使用 nagios 监控 WCF

> ID：12385124
> 
> 赞同：4
> 
> 时间：2012-09-12T09:30:58.990
> 
> 标签：wcf, monitoring, nagios

我对 Nagios 不熟悉，我还在浏览插件和文档的一半，但我们的客户目前正在使用它，他们也想用它来监控我们的 WCF。Nagios 有没有办法使用 WCF 方法或至少监视 WCF 抛出的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:57:56.440

在我们公司，我们使用 Nagios 进行监控。我们也有许多 WCF 服务。我们发现的唯一方法是在每台服务器上部署 NsClient++ 并收集 WCF 性能计数器（调用/完成/故障、持续时间）。我们有很多计数器。

正如我之前所说，监控 WCF 非常痛苦。看到这个[链接](https://stackoverflow.com/questions/12297076/what-should-be-used-for-wcf-service-monitoring-wmi-or-ws-discovery/12313529#12313529)

# c# - Sox 返回一些值，但 StandardOutput.ReadToEnd() 返回空

> ID：12385129
> 
> 赞同：1
> 
> 时间：2012-09-12T09:31:11.520
> 
> 标签：c#, console-application, sox

```
try
{
        string filename = "E:\\sox-14-4-0\\mysamplevoice.wav";
        Process p = new Process();
        p.StartInfo.UseShellExecute = false;
        p.StartInfo.RedirectStandardOutput = true;
        p.StartInfo.FileName = "E:\\sox-14-4-0\\sox.exe ";
        p.StartInfo.Arguments = filename + " -n stat";
        p.Start();
        string output = p.StandardOutput.ReadToEnd();
        p.WaitForExit();
}
catch(Exception Ex)
{
        Console.WriteLine(Ex.Message);
} 
```

输出始终为空。当我`sox`在命令提示符下运行该命令时，我会得到如下响应：

```
E:\sox-14-4-0>sox mysamplevoice.wav -n stat
Samples read:             26640
Length (seconds):      3.330000
Scaled by:         2147483647.0
Maximum amplitude:     0.515625
Minimum amplitude:    -0.734375
Midline amplitude:    -0.109375
Mean    norm:          0.058691
Mean    amplitude:     0.000122
RMS     amplitude:     0.101146
Maximum delta:         0.550781
Minimum delta:         0.000000
Mean    delta:         0.021387
RMS     delta:         0.041831
Rough   frequency:          526
Volume adjustment:        1.362 
```

在 C# 中运行相同的命令时，我得到相同的结果，但“输出”的值为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T09:35:55.497

您确定 sox.exe 写入 STDOUT 而不是 STDERR 吗？

`OutputDataReceived`您可以尝试使用事件来读取数据。

```
string filename = "E:\\sox-14-4-0\\mysamplevoice.wav";
Process p = new Process();
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.RedirectStandardError = true;
p.StartInfo.FileName = "E:\\sox-14-4-0\\sox.exe ";
p.StartInfo.Arguments = filename + " -n stat";

p.OutputDataReceived += process_OutputDataReceived;
p.ErrorDataReceived += process_ErrorDataReceived;

p.Start();
p.BeginErrorReadLine();
p.BeginOutputReadLine();

void process_OutputDataReceived(object sender, DataReceivedEventArgs e)
{
    string s = e.Data;
}

void process_ErrorDataReceived(object sender, DataReceivedEventArgs e)
{
    string s = e.Data;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-10T03:14:29.190

我也遇到了这个问题。为什么 SoX 会写入 StandardError？！

如果其他人也遇到这个问题，原始问题的解决方案可能只是添加 2 行

```
p.StartInfo.RedirectStandardError = true; // <-- this
...
string output = p.StandardOutput.ReadToEnd();
if(output == "") output = p.StandardError.ReadToEnd(); // <-- and this 
```

# c# - 带有 FormatterAssemblyStyle.Full 的 C# 二进制序列化和 AssemblyFormat

> ID：12385130
> 
> 赞同：4
> 
> 时间：2012-09-12T09:31:20.803
> 
> 标签：c#, .net, winforms, visual-studio-2010, serialization

我很想知道如何使用带有 FormatterAssemblyStyle.Full 的二进制格式化程序的汇编格式来“打破”反序列化。

[文档](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.RUNTIME.SERIALIZATION.FORMATTERS.FORMATTERASSEMBLYSTYLE.FULL%29;k%28FULL%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)说明了这一点：

> 在完整模式下，反序列化期间使用的程序集必须与序列化期间使用的程序集完全匹配。

我想如果我用程序集的 1.0.0.0 版本序列化一个对象（_person，它是一个具有值类型字段的简单类），然后尝试用程序集的 v1.2.0.0（更新 AssemblyInfo.cs）反序列化，我会得到一个反序列化异常。但是，它成功反序列化。

我错过了什么吗？

我正在使用以下内容序列化到文件：

```
 BinaryFormatter formatter = new BinaryFormatter();
                formatter.AssemblyFormat = System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Full;

                using (Stream stream = new FileStream(fileName,
                                                     FileMode.Create,
                                                     FileAccess.Write,
                                                     FileShare.None))
                {
                    formatter.Serialize(stream, _person);
                    stream.Close();
                } 
```

然后使用以下反序列化：

```
 BinaryFormatter formatter = new BinaryFormatter();
                formatter.AssemblyFormat = System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Full;

                using (Stream stream = new FileStream(fileName, FileMode.Open, FileAccess.Read, FileShare.Read))
                {
                    _person = (Person)formatter.Deserialize(stream);
                   stream.Close();
                } 
```

我还注意到使用 FormatterAssemblyStyle.Full 和 FormatterAssemblyStyle.Simple 生成的序列化文件都包含完整的版本信息（例如版本 1.0.0.0 Culture = 中性，PublicKeyToken = null） - 我认为 Simple 不会添加所有这些信息？（请参阅此处的格式化程序和程序集名称[部分](http://www.diranieh.com/NETSerialization/BinarySerialization.htm#MySerializableClass)）

**更新1：**

到目前为止，我看到的唯一区别是，如果我使用 Simple，那么我*不必*将`OptionalField`属性放置到序列化类中的新字段中，就可以成功地反序列化旧版本。如果我使用 Full，那么它会抛出异常，除非我将`OptionalField`属性放在新字段上。如果使用非强命名的程序集，这是唯一的区别吗？

有关详细信息，请参阅[此](https://stackoverflow.com/questions/3634823/have-optionalfield-been-obsoleted-in-c)。

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T13:01:46.720

文档`FormatterAssemblyStyle.Full`实际上说了两件事：

1.  [Assembly.Load](http://msdn.microsoft.com/en-us/library/x4cw969y%28v=vs.100%29.aspx)方法将用于加载程序集。
2.  反序列化期间使用的程序集必须与序列化期间使用的程序集完全匹配。

**通过 Assembly.Load 加载程序集**

加载程序集时，还会检查程序集版本，但前提是程序集是强命名的。[Assembly Versioning](http://msdn.microsoft.com/en-us/library/51ket42z%28v=vs.100%29.aspx)的文档是这样说的：

> 为了版本控制，运行时区分常规程序集和强名称程序集。版本检查仅发生在强名称程序集上。

要对程序集进行强命名，只需按照[如何：使用强名称对程序集进行签名](http://msdn.microsoft.com/en-us/library/xc31ft41.aspx)中的步骤。此外，即使您为没有强名称的程序集指定完全限定的程序集名称，[AssemblyName 文档](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyname%28v=vs.100%29.aspx)也会说明以下内容：

> 提供显示名称时，约定 StrongName =null 或 PublicKey= null 表示需要对简单命名的程序集进行绑定和匹配。

因此，即使使用`Assembly.Load`方法，运行时也将始终加载常规程序集而不进行版本检查。

**完全反序列化**

整个程序集必须与反序列化期间使用的程序集相匹配，这并不完全正确。只有正在反序列化的类（以及对象图中的所有其他类）应该匹配。在每个反序列化的类中，只有字段应该匹配，您可以随意添加新方法。[Version Tolerant Serialization](http://msdn.microsoft.com/en-us/library/ms229752%28v=vs.100%29.aspx)更详细地介绍了这一点。

总而言之，是的，如果您没有强命名的程序集，那么唯一的区别在于反序列化的容忍度。因此，您可以使用`Full`反序列化`OptionalFieldAttribute`还是`Simple`反序列化，具体取决于您的上下文。

# sql - 需要一个正则表达式来匹配文本块中的 >N 个标签

> ID：12385133
> 
> 赞同：0
> 
> 时间：2012-09-12T09:31:24.017
> 
> 标签：sql, regex

我需要一个正则表达式，它仅在文本块中有 >15 个标签时才匹配。

我用来匹配主题标签的正则表达式是 -

```
r'(\B#\w*[a-zA-Z]+\w*)' 
```

我想为此设置最小数量的 Hashtags 存在检查，其中 min。= 15。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:35:00.897

如果`(\B#\w*[a-zA-Z]+\w*)`匹配单个主题标签，则`(\B#\w*[a-zA-Z]+\w*){15,}`如果有 15 个或更多主题标签，则应该匹配。

# java - 意图中的数据不匹配

> ID：12385137
> 
> 赞同：0
> 
> 时间：2012-09-12T09:31:32.503
> 
> 标签：java, android

我在将数据放入意图和读取数据之间存在数据不匹配的问题。在我的服务中，我正在创建通知并向意图添加参数。当我看到通知时，参数没问题。但是当我打开通知时，参数行为是有线的。我在我的系统中获得了真实的参数，但一旦我发送就没有。这个问题是因为我在我的服务中创建通知吗？

```
public void createNotification(ChatMessage message) 
{

    Notification notification = new Notification(R.drawable.ic_action_sm, 
                                                 "Message From" +
                                                 " " + message.getSenderName(),
                                                 System.currentTimeMillis());

    notification.flags |= Notification.FLAG_AUTO_CANCEL;

    Intent intent = new Intent(this, ChatActivity.class);
    intent.putExtra("userProfile", message.getReciverChatProfile());        
    intent.putExtra("friendProfile", message.getSenderChatProfile());

    PendingIntent activity = PendingIntent.getActivity(this, 0, intent, 0);

    notification.setLatestEventInfo(this,
                                    message.getSenderName(),
                                    message.getMessage(),
                                    activity);
    notification.number += 1;
    notification.iconLevel = 3;
    notificationManager.notify(0, notification);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:05:23.970

添加 FLAG_UPDATE_CURRENT 解决了这个问题。

```
PendingIntent activity = PendingIntent.getActivity(this, 0,intent,PendingIntent.FLAG_UPDATE_CURRENT); 
```

# c# - 隐式 linq to sql 事务

> ID：12385138
> 
> 赞同：1
> 
> 时间：2012-09-12T09:31:35.530
> 
> 标签：c#, linq-to-sql

我有两张桌子，由 1-1 房地产。就像是：

> DOC：Id,SN（Id为主键） Sub：Id,Name（Id为外键）

正如我提到的，DOC.Id 和 Sub.Id 是相关的 1 - 1

现在在业务对象中，我觉得数据类如下：

```
DOC doc = new DOC();
doc.SN = 1;
Sub sub = new Sub();
sub.Name = "name";
doc.Sub = sub;

using(dbDataContext db = new dbDataContext())
{
   db.DOC.InsertOnSubmit(doc);
   db.SubmitChanges();
   sub.Id = doc.Id;
   db.Sub.InsertOnSubmit(sub);
   db.SubmitChanges();
} 
```

最后的***SubmitChanges()***抛出异常（can't insert object is already exists）

回到数据库，我发现这两个对象都是在执行该代码后插入的。
是隐式交易还是我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:34:09.850

Linq2SQL 在第一个持久化对象图`SubmitChanges()`

IE

```
db.DOC.InsertOnSubmit(doc); 
```

保存`doc`和它的孩子`doc.Sub`

这与隐式事务无关，只是当使用 InsertOnSubmit() 将父级附加到数据上下文时，L2SQL 也会自动附加其子级。

如果您确实想要为 Sub 显式“插入”，则不要将 Sub 分配给 Doc，直到 Doc 的 SubmitChanges() 之后（即插入带有 null Sub 的文档）。

附加后，[手动将对象从 DataContext 中分离](http://social.msdn.microsoft.com/Forums/en-US/linqtosql/thread/ca077d6b-aa59-4a4d-a9a6-da11bad251af)是非常困难的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:34:33.233

您是否尝试过简单地删除第一个 SubmitChanges，所以您的代码如下所示：

```
using(dbDataContext db = new dbDataContext())
{
  db.DOC.InsertOnSubmit(doc);
  sub.Id = doc.Id;
  db.Sub.InsertOnSubmit(sub);
  db.SubmitChanges();
} 
```

我想问题是，在您第一次`SubmitChanges`调用后，文档仍被标记为已插入，当您`SubmitChanges`再次调用时，它会给出错误，因为它已经存在于数据库中。

数据库上下文跟踪更改，因此您应该只调用`SubmitChanges`一次。

# coronasdk - 如何检测电晕sdk中的触摸区域？

> ID：12385139
> 
> 赞同：0
> 
> 时间：2012-09-12T09:31:36.997
> 
> 标签：coronasdk

在我的应用程序中，我想计算触摸次数。但是当我触摸必须覆盖某个区域的图像时，只会增加计数。请帮助我

```
function pop(event)

  if event.phase=="began" then

  elseif event.phase == "ended" then

    numValue=numValue+1
    print("tapcount value"..numValue)
    count.text=numValue
  end
end
lips:addEventListener("touch",pop) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T16:40:36.367

你想计算点击数还是触摸数？如果它是水龙头，这就是它的样子，看看这个教程就是这样做的：[http ://corona.techority.com/2012/07/30/how-to-use-double-tap-in- your-corona-app/](http://corona.techority.com/2012/07/30/how-to-use-double-tap-in-your-corona-app/)我知道标题是“双击”，但它适用于任何类型的点击计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:19:48.527

这就是你要找的..？

```
local obj_1 = .....   ; obj.tag  = 1
local lips  = .....   ; lips.tag = 2
local count = .....

local numValue = 0
local clickedObj_tag = 0

    local function pop(e)
       if(clickedObj_tag~=e.target.tag)then
       clickedObj_tag = e.target.tag
       -- cover/highlight your object
    else
       numValue=numValue+1
       print("tapcount value"..numValue)
       count.text=numValue
       -- do rest of your code 
    end
    lips:addEventListener("touch",pop)
    obj_1:addEventListener("touch",pop) 
```

# wpf - WPF 应用程序显示“无法识别图像格式”

> ID：12385143
> 
> 赞同：11
> 
> 时间：2012-09-12T09:31:44.797
> 
> 标签：wpf

我有一个在 Windows 7 操作系统上运行良好的 WPF 应用程序。但是同一个应用程序在特定的少数 Windows XP 机器上崩溃。

它在少数 Windows XP 机器上运行良好。但在一些 XP 机器上它无法启动。

> 错误 - 图像格式无法识别。

我知道这个问题已经被问过几次了。但我的问题是我仍然无法弄清楚如何解决这个问题。

我应该更改`.ico`用于应用程序的..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-14T17:54:52.897

不幸的是，当您希望支持 Windows Vista、7、8 及更高版本的大图标大小时，简单地删除 256x256 应用程序并不是最佳解决方案。

解决这个问题的另一种方法......是不压缩图标中的256x256图像。有关更多信息，请参阅此[论坛主题](http://social.msdn.microsoft.com/Forums/vstudio/en-US/9e723d51-0e26-4609-8fe1-5e0edcf7385b/setting-windowicon-to-vista-256x256-png-icon-causes-a-fileformatexception?forum=wpf)。

如何做到这一点？好吧，大多数图标实用程序都有一个选项（因为这是一个常见问题）。我使用[IcoFX](http://icofx.ro/)，您可以在下面看到我需要清除的选项（以红色突出显示）。

![IcoFX 截图](../Images/04ea50f54612f23337e0f27daa4bdc72.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-11T07:31:37.060

今天早上我对这个问题感到很开心。事实证明，该错误仅发生在颜色设置为 16 位的 XP 机器上，而当我将其更改为 32 位时，问题就神奇地消失了。

这适用于 XP（包括嵌入式）SP3。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-12T09:42:43.657

如果我没记错的话，Windows XP 不支持大于 的图标`48x48 pixels`，这可能是崩溃的原因。`.ico`文件绝对应该在两个系统上运行。

您可以创建一个支持多种尺寸的图标，因此如果您在同一个文件中添加 48x48 和例如 256x256，您应该会很好。在制作支持多种尺寸的图标时，请务必使用选择好的软件制作图标。我使用了我认为效果很好的[Greenfish 图标编辑器。](http://greenfish.tk/)但是还有许多其他产品可以做到这一点。

请务必阅读[ICON 手册，Windows 部分](http://iconhandbook.co.uk/reference/chart/windows/)，它包含有关要使用的图标大小和位深度的良好信息。

* * *

SO上的其他线程支持我的信念：

[图标图像的问题](https://stackoverflow.com/questions/8650520/problems-with-icon-image)

[我的 Windows 应用程序的图标应包括哪些图标尺寸？](https://stackoverflow.com/questions/3236115/which-icon-sizes-should-my-windows-applications-icon-include)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-15T11:09:11.307

在您的 WPF 应用程序中，您至少有两个地方可以设置图标：

1.  应用程序图标。这用于在资源管理器、桌面等中显示应用程序。您可以在项目属性中设置它。
2.  窗口图标。这用作窗口左上角的图标，也可能用于 alt-tabbing 和任务栏上。您将其设置为窗口上的 Icon 属性。

通常，您可以在这两种情况下使用相同的图标文件。但是，如果您有一个压缩的 256x256 图标作为窗口图标，那么这可能会在 Windows XP 中崩溃。这就是你正在经历的。另一方面，当应用程序图标具有压缩的 256x256 图标时，情况并非如此。

所以另一个解决方案（我在所有项目中实现）是有两个图标：应用程序图标（包含所有尺寸）和一个特殊的“窗口图标”版本，它只包含尺寸 16x16 和 32x32（因为这些是唯一的使用的尺寸）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-22T15:30:28.310

另一种解决方法（16/32 位分辨率问题）不是在 XAML 中定义图标，而是在代码中加载它：

```
 this.Icon = new BitmapImage(new Uri("pack://application:,,,/UserInterface;component/Resources/Icons/ReportViewer.ico")); 
```

# email - 重定向通配符电子邮件帐户

> ID：12385149
> 
> 赞同：1
> 
> 时间：2012-09-12T09:32:00.100
> 
> 标签：email, wildcard, forwarding, qmail

我试图设置一个转发器将所有发送到 exapmle*@mydomain.com 的邮件转发到 myaccount@gmail.com。我们使用的是qmail。我尝试设置“.qmail-example*。但没有用。任何人都可以帮我解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:24:22.553

为了设置转发器，只需在用户的 .qmail 文件的末尾添加一个条目，该条目通常存在于用户的主路径中，如下所示：

> &转发器 ID

我过去 10 年来一直在做这件事...... :-)

# iphone - 如何在sqlite中创建虚拟表并访问？

> ID：12385156
> 
> 赞同：0
> 
> 时间：2012-09-12T09:32:23.423
> 
> 标签：iphone, objective-c, xcode, sqlite

我在 iphone 应用程序中使用 sqlite。我想要做的就像我将使用“select * from tablename”从数据库中获取数据。但我不想一次访问所有行。我知道我们可以为此使用游标。我知道如何在 MySql 程序中编写它们。但我希望它在我的应用程序中实现。[虚拟表]http://www.sqlite.org/vtab.html#xconnect 这里他们解释说我们必须创建虚拟表才能使用光标。因此，如果有任何机构使用此功能，您能否通过一些编码示例向我解释如何做到这一点...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:36:18.800

我相信你太努力了。SQLite 一次只获取一行。有一个函数调用将获取所有行，但文档具体说明了它在做什么。

# c# - 如何根据 URL 检查文件创建日期？

> ID：12385157
> 
> 赞同：3
> 
> 时间：2012-09-12T09:32:32.300
> 
> 标签：c#, java, php

我有一个 XML 文件的 URL，是否有可能获得它的创建日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:43:13.490

`CURL` [是的，可以使用curl_getinfo](http://php.net/manual/en/function.curl-getinfo.php)获取文件信息，而无需返回整个正文

例子

```
$curl = curl_init('URL_TO_XML');
curl_setopt($curl, CURLOPT_NOBODY, true);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_FILETIME, true);
$result = curl_exec($curl);
if ($result === false) {
    die (curl_error($curl)); 
}
$timestamp = curl_getinfo($curl, CURLINFO_FILETIME);
if ($timestamp != -1) { 
    echo date("Y-m-d H:i:s", $timestamp);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:36:00.893

不。
因为它是一个 Web url，所以您可能无法获得 Web 服务器公开的更多信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-01T09:27:44.333

你可以这样做

```
Uri myUri = new Uri(url);

// Creates an HttpWebRequest for the specified URL. 
HttpWebRequest myHttpWebRequest = (HttpWebRequest)WebRequest.Create(myUri); 
HttpWebResponse myHttpWebResponse = (HttpWebResponse)myHttpWebRequest.GetResponse();

DateTime today = DateTime.Now;
// Uses the LastModified property to compare with today's date.
if (DateTime.Compare(today,myHttpWebResponse.LastModified) == 0)
    Console.WriteLine("\nThe requested URI entity was modified today");
else
    if (DateTime.Compare(today,myHttpWebResponse.LastModified) == 1)
        Console.WriteLine("\nThe requested URI was last modified on:{0}",
                        myHttpWebResponse.LastModified);
    // Releases the resources of the response.

myHttpWebResponse.Close(); 
```

# c - FindResource() 找不到我的资源

> ID：12385163
> 
> 赞同：0
> 
> 时间：2012-09-12T09:32:52.863
> 
> 标签：c, winapi

我有一些我编译的代码模板，我想了解代码的一部分，尽管我花了一整天的时间试图弄清楚它的作用。

有问题的代码如下：

```
#define IDR_STUB 1
hRsrc = FindResource(NULL, MAKEINTRESOURCE(IDR_STUB), "STUB"); 
```

我在与主文件相同的目录中还有另外两个文件，第一个文件名为“something.rc”，内容为：

```
#define IDR_STUB 1
IDR_STUB STUB DISCARDABLE "stub.exe" 
```

您可以猜到的另一个文件是`stub.exe`.

我的问题是`FindResource`上面的调用有什么问题，它找不到任何试图找到的东西，我很难理解该函数是如何工作的。

所以如果你能给我一些帮助我会很高兴:)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:28:51.463

有同样的问题。我通过使用 MSDN 中描述的字符串资源 id 解决了这个问题：

> 如果字符串的第一个字符是井号 (#)，则其余字符表示一个十进制数，用于指定资源名称或类型的整数标识符。例如，字符串“#258”表示整数标识符 258。

所以试试下面的代码：

```
hRsrc = FindResource(NULL, "#1", "STUB"); 
```

# java - 为 android 上的每个 xml 标签添加更多文本视图

> ID：12385164
> 
> 赞同：1
> 
> 时间：2012-09-12T09:32:52.733
> 
> 标签：java, android, xml, eclipse, sax

我对android编程很陌生，我正在尝试读取一个xml文件。一切正常，我可以在 logCat 中看到他正在接收所有数据，但应用程序仅显示 xml 文件中的 5 个标记。所以我想知道是否可以添加某种字符串来添加新的 textView/listView 或我需要的任何视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:34:59.067

有一个很好的 Android API 指南：http: [//developer.android.com/guide/topics/ui/layout/listview.html](http://developer.android.com/guide/topics/ui/layout/listview.html)

# java - LWJGL Display.create() 抛出异常

> ID：12385167
> 
> 赞同：0
> 
> 时间：2012-09-12T09:32:56.530
> 
> 标签：java, opengl, lwjgl

对于一个大学项目，我们需要在一个 5 人的小组中用 Java 制作一个游戏。当我们正在编写 3D 第一人称游戏时，我想使用 lwjgl。我在运行 Ubuntu 的家用计算机上编写了一个测试程序。但是我把它带到了 uni 并尝试在 Arch Linux 的机器上运行它，它在尝试调用 Display.create() 方法时抛出了异常。

这是堆栈跟踪：

无法创建可绘制的 org.lwjgl.LWJGLException：X 错误 - 显示：0x7bde17a0 序列：89 错误：BadDrawable（无效的像素图或窗口参数）请求代码：14 次要代码：0 在 org.lwjgl.opengl.LinuxDisplay.globalErrorHandler（LinuxDisplay.java： 318) 在 org.lwjgl.opengl.LinuxContextImplementation.makeCurrent(LinuxContextImplementation.java:121) 在 org.lwjgl.opengl.ContextGL.makeCurrent(ContextGL.java:194) 的 org.lwjgl.opengl.LinuxContextImplementation.nMakeCurrent(Native Method)在 org.lwjgl.opengl.DrawableGL.makeCurrent(DrawableGL.java:110) 在 org.lwjgl.opengl.Display.makeCurrent(Display.java:703) 在 org.lwjgl.opengl.Display.makeCurrentAndSetSwapInterval(Display.java:1022 ) 在 org.lwjgl.opengl.Display 的 org.lwjgl.opengl.Display.create(Display.java:754) 的 org.lwjgl.opengl.Display.create(Display.java:849)。创建（Display.java:736）

我问过uni，但似乎没有人有任何帮助，因为没有人使用过lwjgl。我无法更新显卡驱动程序，因为它是一台大学机器。我还必须让它在 uni 机器上运行，因为我们必须在上面展示我们的项目，并且小组中的其他人将在它们上编程。

有谁知道如何解决这一问题？或者我可以使用使用 openGL 的替代库吗？我知道有 java opengl，但它似乎不如 lwjgl 好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:53:05.377

lwjgl 可能正在尝试使用`/dev/video`，如果您可以尝试运行`usermod -a -G video <Your-UserName>`

[资源](http://www.minecraftforum.net/topic/36618-minecraft-crash-on-ubuntu-linux/)

# php - Facebook php sdk在注销后返回用户ID

> ID：12385170
> 
> 赞同：1
> 
> 时间：2012-09-12T09:33:03.970
> 
> 标签：php, facebook, facebook-graph-api

您好，我正在为我的应用程序使用最新的 facebook php sdk。我在注销时遇到问题。这是我的注销代码。

```
<?php
$logout = $facebook->getLogoutUrl(array(
  'next' => 'https://www.thevoucherlink.com/logout.php'));
?> 
```

这是我的 logout.php：

```
<?php
session_start();
unset($_SESSION['fb_uid']);
session_destroy();
header('location:https://www.thevoucherlink.com/index.php?ref=logout');
?> 
```

注销用户从 facebook 注销后。但不是来自我的应用程序。

`$user_id=$facebook->getUser();`

此函数在注销后返回用户 ID。

请帮我解决它。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:39:21.700

尝试删除 FB cookie 以及取消设置会话，例如：

```
session_start();
$fb_key = 'fbs_'."YOUR_FB_APP_ID";
setcookie($fb_key, '', time() - 3600, '', '/', '');
unset($_SESSION['fb_uid']);
session_destroy(); 
```

然后您可以尝试执行 try..catch 块，例如：

```
$userId = $facebook->getUser();
try {
   $myDetails = $facebook->api('/me');
   //will return details if still loggedin
} catch (Exception $e) {
   //user has already logged out
} 
```

已编辑:: 在您的 logout.php 中，尝试执行以下操作：

```
$facebook = new Facebook(array('appId' => 'your_id', 'secret' => 'your_secret'));
//destroy the session
$facebook->destroySession(); 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:41:52.917

可能是注销链接是从 Facebook 中注销用户，而不是从您的应用程序中注销。

您必须使用`$this->Auth->logout();`从您的应用程序中注销用户。

或者

尝试使用 PHP SDK 与 Javascript SDK 的集成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:39:03.527

删除 Facebook 登录 URL 的`offline_access`from`scope`参数。

# email - 从手机或浏览器收到的电子邮件

> ID：12385172
> 
> 赞同：0
> 
> 时间：2012-09-12T09:33:09.100
> 
> 标签：email, mobile, browser

有没有办法知道电子邮件来自哪个环境？（无论是来自移动设备还是网络浏览器？）。我想为此使用服务器端程序。如果您有任何其他想法，请提出建议。

谢谢素食主义者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:42:04.737

这取决于生成电子邮件的客户端，以区分浏览器/移动设备是源，并添加一些扩展标头以让接收者知道此信息。

如果您是生成电子邮件的此类客户端的作者/用户，则可以适当地配置扩展标头。

# asp.net - .NET 和 Active Directory 中的外部网站

> ID：12385178
> 
> 赞同：0
> 
> 时间：2012-09-12T09:33:21.737
> 
> 标签：asp.net, .net, active-directory

我正在构建一个网站，我需要使用 Active Directory 对用户进行身份验证。

我的网站与运行 Active Directory 的服务器位于不同的网络和 IP 上（它位于完全不同的网络和域中）。

我想知道是否可以构建一个登录页面，该页面可以验证远程 AD 上的用户。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:53:04.043

一种方法是使用 LDAP 来验证提供的用户凭据。[这是 Microsoft 的一个示例](http://support.microsoft.com/kb/326340)，说明您如何做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T09:54:46.750

您不应在 Active Directory 服务器上部署任何 Web 服务。

您可以使用 System.Directoryservices.Accountmanagement 命名空间类 (.NET 4) 或使用 ADSI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:39:34.837

我有类似的情况，我能想到的唯一方法是这样的：

*   使用 Active Directory 在服务器上创建一个非常小的网站，该网站使用 Windows 身份验证
*   如果用户通过身份验证，则让该网站重定向到您的主网站，并在 URL 中使用某种形式的登录密钥（最好是动态生成）。

不要认为除了这些方法之外，您还有其他方法可以通过外部网站使用身份验证。

# python - 如何在 python 中发送带有请求的“multipart/form-data”？

> ID：12385179
> 
> 赞同：313
> 
> 时间：2012-09-12T09:33:22.813
> 
> 标签：python, python-requests, multipartform-data

如何在python`multipart/form-data`中发送一个？`requests`如何发送文件，我明白，但是如何通过这种方法发送表单数据就无法理解。

* * *

## 回答 #1

> 赞同：281
> 
> 时间：2012-09-12T09:59:56.113

基本上，如果您指定一个`files`参数（字典），那么`requests`将发送一个`multipart/form-data`POST 而不是一个`application/x-www-form-urlencoded`POST。但是，您不仅限于使用该字典中的实际文件：

```
>>> import requests
>>> response = requests.post('http://httpbin.org/post', files=dict(foo='bar'))
>>> response.status_code
200 
```

httpbin.org 让您知道您发布的标题是什么；在`response.json()`我们有：

```
>>> from pprint import pprint
>>> pprint(response.json()['headers'])
{'Accept': '*/*',
 'Accept-Encoding': 'gzip, deflate',
 'Connection': 'close',
 'Content-Length': '141',
 'Content-Type': 'multipart/form-data; '
                 'boundary=c7cbfdd911b4e720f1dd8f479c50bc7f',
 'Host': 'httpbin.org',
 'User-Agent': 'python-requests/2.21.0'} 
```

更好的是，您可以通过使用元组而不是单个字符串或字节对象来进一步控制每个部分的文件名、内容类型和附加标头。元组预计包含 2 到 4 个元素；文件名、内容、可选的内容类型和可选的进一步标题字典。

我将使用元组形式`None`作为文件名，以便`filename="..."`从对这些部分的请求中删除参数：

```
>>> files = {'foo': 'bar'}
>>> print(requests.Request('POST', 'http://httpbin.org/post', files=files).prepare().body.decode('utf8'))
--bb3f05a247b43eede27a124ef8b968c5
Content-Disposition: form-data; name="foo"; filename="foo"

bar
--bb3f05a247b43eede27a124ef8b968c5--
>>> files = {'foo': (None, 'bar')}
>>> print(requests.Request('POST', 'http://httpbin.org/post', files=files).prepare().body.decode('utf8'))
--d5ca8c90a869c5ae31f70fa3ddb23c76
Content-Disposition: form-data; name="foo"

bar
--d5ca8c90a869c5ae31f70fa3ddb23c76-- 
```

`files`如果您需要排序和/或具有相同名称的多个字段，也可以是二值元组的列表：

```
requests.post(
    'http://requestb.in/xucj9exu',
    files=(
        ('foo', (None, 'bar')),
        ('foo', (None, 'baz')),
        ('spam', (None, 'eggs')),
    )
) 
```

如果同时指定`files`和`data`，那么它取决于将用于创建 POST 正文的*值*。`data`如果`data`是字符串，则只会使用它；否则两者都使用`data`和，首先列出`files`的元素。`data`

还有一个优秀的`requests-toolbelt`项目，其中包括[高级多部分支持](https://toolbelt.readthedocs.io/en/latest/uploading-data.html)。它采用与参数相同格式的字段定义`files`，但与 不同的`requests`是，它默认不设置文件名参数。此外，它可以从打开的文件对象中流式传输请求，其中`requests`将首先在内存中构造请求体：

```
from requests_toolbelt.multipart.encoder import MultipartEncoder

mp_encoder = MultipartEncoder(
    fields={
        'foo': 'bar',
        # plain file object, no filename or mime type produces a
        # Content-Disposition header with just the part name
        'spam': ('spam.txt', open('spam.txt', 'rb'), 'text/plain'),
    }
)
r = requests.post(
    'http://httpbin.org/post',
    data=mp_encoder,  # The MultipartEncoder is posted as data, don't use files=...!
    # The MultipartEncoder provides the content-type header with the boundary:
    headers={'Content-Type': mp_encoder.content_type}
) 
```

字段遵循相同的约定；使用具有 2 到 4 个元素的元组来添加文件名、部分 mime 类型或额外的标题。与参数不同，如果您不使用元组，则`files`不会尝试查找默认值。`filename`

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2014-04-09T21:50:45.973

自从写了一些以前的答案以来，请求已经发生了变化。请查看[Github 上的此问题以](https://github.com/psf/requests/issues/1081)获取更多详细信息，并查看[此评论](https://github.com/psf/requests/issues/1081#issuecomment-32956681)以获取示例。

简而言之，该`files`参数采用一个字典，其键是表单字段的名称，值是字符串或 2、3 或 4 长度的元组，如在请求中[发布多部分编码文件](https://docs.python-requests.org/en/latest/user/quickstart/#post-a-multipart-encoded-file)部分所述快速开始：

```
>>> url = 'http://httpbin.org/post'
>>> files = {'file': ('report.xls', open('report.xls', 'rb'), 'application/vnd.ms-excel', {'Expires': '0'})} 
```

在上面，元组的组成如下：

```
(filename, data, content_type, headers) 
```

如果值只是一个字符串，则文件名将与键相同，如下所示：

```
>>> files = {'obvius_session_id': '72c2b6f406cdabd578c5fd7598557c52'}

Content-Disposition: form-data; name="obvius_session_id"; filename="obvius_session_id"
Content-Type: application/octet-stream

72c2b6f406cdabd578c5fd7598557c52 
```

如果该值是一个元组并且第一个条目是`None`文件名属性，则将不包括在内：

```
>>> files = {'obvius_session_id': (None, '72c2b6f406cdabd578c5fd7598557c52')}

Content-Disposition: form-data; name="obvius_session_id"
Content-Type: application/octet-stream

72c2b6f406cdabd578c5fd7598557c52 
```

* * *

## 回答 #3

> 赞同：110
> 
> 时间：2016-03-13T18:29:29.113

*即使*您不需要上传任何文件，您也需要使用该`files`参数发送多部分表单 POST 请求。

 *从原始[请求](https://github.com/kennethreitz/requests/blob/master/requests/api.py#L16)来源：

```
def request(method, url, **kwargs):
    """Constructs and sends a :class:`Request <Request>`.

    ...
    :param files: (optional) Dictionary of ``'name': file-like-objects``
        (or ``{'name': file-tuple}``) for multipart encoding upload.
        ``file-tuple`` can be a 2-tuple ``('filename', fileobj)``,
        3-tuple ``('filename', fileobj, 'content_type')``
        or a 4-tuple ``('filename', fileobj, 'content_type', custom_headers)``,
        where ``'content-type'`` is a string
        defining the content type of the given file
        and ``custom_headers`` a dict-like object 
        containing additional headers to add for the file. 
```

相关部分是：**`file-tuple`** `can be a`

*   **`2-tuple`**（*文件名，文件对象*）
*   **`3-tuple`**（*文件名、文件对象、内容类型*）
*   **`4-tuple`**（*文件名、fileobj、content_type、custom_headers*）。

> ^(*☝*可能不明显的是，它**`fileobj`**可以是*处理*文件时的实际文件对象，也可以是处理纯文本字段时的字符串。)

 *基于上述，包含要上传的文件和表单字段的最简单的多部分表单请求将如下所示：

```
import requests

multipart_form_data = {
    'upload': ('custom_file_name.zip', open('myfile.zip', 'rb')),
    'action': (None, 'store'),
    'path': (None, '/path1')
}

response = requests.post('https://httpbin.org/post', files=multipart_form_data)

print(response.content) 
```

☝*注意`None`作为纯文本字段元组中的第一个参数 - 这是文件名字段的占位符，仅用于文件上传，但对于`None`作为第一个参数传递的文本字段，需要提交数据.*

### 多个同名字段

如果您需要发布多个具有相同名称的字段，那么您可以将有效负载定义为元组列表（或元组），而不是字典：

```
multipart_form_data = (
    ('file2', ('custom_file_name.zip', open('myfile.zip', 'rb'))),
    ('action', (None, 'store')),
    ('path', (None, '/path1')),
    ('path', (None, '/path2')),
    ('path', (None, '/path3')),
) 
```

* * *

### 流式请求 API

如果上述 API 对您来说不够 Pythonic，那么请考虑使用[requests 工具带](http://toolbelt.readthedocs.org/en/latest/uploading-data.html#streaming-multipart-data-encoder)( `pip install requests_toolbelt`)，它是[核心 requests](http://docs.python-requests.org/en/master/)模块的扩展，提供对文件上传流的支持以及[MultipartEncoder](http://toolbelt.readthedocs.io/en/latest/user.html#multipart-form-data-encoder)可以用来代替`files`，它还允许您将有效负载定义为字典、元组或列表。

`MultipartEncoder`可用于带或不带实际上传字段的多部分请求。它必须分配给`data`参数。

```
import requests
from requests_toolbelt.multipart.encoder import MultipartEncoder

multipart_data = MultipartEncoder(
    fields={
            # a file upload field
            'file': ('file.zip', open('file.zip', 'rb'), 'text/plain')
            # plain text fields
            'field0': 'value0', 
            'field1': 'value1',
           }
    )

response = requests.post('http://httpbin.org/post', data=multipart_data,
                  headers={'Content-Type': multipart_data.content_type}) 
```

如果您需要发送多个具有相同名称的字段，或者如果表单字段的顺序很重要，则可以使用元组或列表来代替字典：

```
multipart_data = MultipartEncoder(
    fields=(
            ('action', 'ingest'), 
            ('item', 'spam'),
            ('item', 'sausage'),
            ('item', 'eggs'),
           )
    ) 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2019-01-23T21:59:54.980

这是使用请求上传带有附加参数的单个文件的简单代码片段：

```
url = 'https://<file_upload_url>'
fp = '/Users/jainik/Desktop/data.csv'

files = {'file': open(fp, 'rb')}
payload = {'file_id': '1234'}

response = requests.put(url, files=files, data=payload, verify=False) 
```

请注意，您不需要明确指定任何内容类型。

注意：想对上述答案之一发表评论，但由于声誉低下而无法发表评论，因此在此处起草了新的回复。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-05-01T11:29:02.263

您需要使用`name`网站 HTML 中的上传文件的属性。例子：

```
autocomplete="off" name="image"> 
```

你看到了 `name="image">`吗？您可以在用于上传文件的站点的 HTML 中找到它。您需要使用它来上传文件`Multipart/form-data`

脚本：

```
import requests

site = 'https://prnt.sc/upload.php' # the site where you upload the file
filename = 'image.jpg'  # name example 
```

在这里，在图片的地方，添加上传文件的 HTML 名称

```
up = {'image':(filename, open(filename, 'rb'), "multipart/form-data")} 
```

如果上传需要点击上传按钮，可以这样使用：

```
data = {
     "Button" : "Submit",
} 
```

然后开始请求

```
request = requests.post(site, files=up, data=data) 
```

大功告成，文件上传成功

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-09-08T17:34:30.783

为了澄清上面给出的例子，

“即使您不需要上传任何文件，您也需要使用 files 参数发送多部分表单 POST 请求。”

文件={}

不幸的是，不会工作。

您将需要输入一些虚拟值，例如

```
files={"foo": "bar"} 
```

我在尝试将文件上传到 Bitbucket 的 REST API 时遇到了这个问题，不得不写下这个可憎的东西以避免可怕的“不支持的媒体类型”错误：

```
url = "https://my-bitbucket.com/rest/api/latest/projects/FOO/repos/bar/browse/foobar.txt"
payload = {'branch': 'master', 
           'content': 'text that will appear in my file',
           'message': 'uploading directly from python'}
files = {"foo": "bar"}
response = requests.put(url, data=payload, files=files) 
```

:O=

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-04-20T06:58:03.897

# 发送 multipart/form-data 键和值

卷曲命令：

```
curl -X PUT http://127.0.0.1:8080/api/xxx ...
-H 'content-type: multipart/form-data; boundary=----xxx' \
-F taskStatus=1 
```

python[请求 - 更复杂的 POST 请求](https://requests.readthedocs.io/en/master/user/quickstart/#more-complicated-post-requests)：

```
 updateTaskUrl = "http://127.0.0.1:8080/api/xxx"
    updateInfoDict = {
        "taskStatus": 1,
    }
    resp = requests.put(updateTaskUrl, data=updateInfoDict) 
```

# 发送多部分/表单数据文件

卷曲命令：

```
curl -X POST http://127.0.0.1:8080/api/xxx ...
-H 'content-type: multipart/form-data; boundary=----xxx' \
-F file=@/Users/xxx.txt 
```

python[请求 - 发布一个多部分编码的文件](https://requests.readthedocs.io/en/master/user/quickstart/#post-a-multipart-encoded-file)：

```
 filePath = "/Users/xxx.txt"
    fileFp = open(filePath, 'rb')
    fileInfoDict = {
        "file": fileFp,
    }
    resp = requests.post(uploadResultUrl, files=fileInfoDict) 
```

就这样。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-12-24T21:59:15.877

```
import requests
# assume sending two files
url = "put ur url here"
f1 = open("file 1 path", 'rb')
f2 = open("file 2 path", 'rb')
response = requests.post(url,files={"file1 name": f1, "file2 name":f2})
print(response) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-26T12:10:44.080

这是在多部分请求中发送文件的一种方法

```
import requests
headers = {"Authorization": "Bearer <token>"}
myfile = 'file.txt'
myfile2 = {'file': (myfile, open(myfile, 'rb'),'application/octet-stream')}
url = 'https://example.com/path'
r = requests.post(url, files=myfile2, headers=headers,verify=False)
print(r.content) 
```

其他方法

```
import requests

url = "https://example.com/path"

payload={}
files=[
  ('file',('file',open('/path/to/file','rb'),'application/octet-stream'))
]
headers = {
  'Authorization': 'Bearer <token>'
}

response = requests.request("POST", url, headers=headers, data=payload, files=files)

print(response.text) 
```

我已经测试了两者，都可以正常工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-04T15:58:51.543

这是您需要将一个大的单个文件作为多部分表单数据上传的 python 片段。在服务器端运行 NodeJs Multer 中间件。

```
import requests
latest_file = 'path/to/file'
url = "http://httpbin.org/apiToUpload"
files = {'fieldName': open(latest_file, 'rb')}
r = requests.put(url, files=files) 
```

对于服务器端，请查看 multer 文档：[https](https://github.com/expressjs/multer) ://github.com/expressjs/multer 这里的字段 single('fieldName') 用于接受一个文件，如下所示：

```
var upload = multer().single('fieldName'); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-01-09T13:29:28.227

通过在请求中指定`files`参数，将请求的 设置为（后跟参数），无论您是只发送，还是同时发送数据。然而，如果只发送数据，则设置为。`POST``content-type``multipart/form-data`[`boundary`](https://stackoverflow.com/questions/3508338/what-is-the-boundary-in-multipart-form-data)`files``form``files``form``content-type``application/x-www-form-urlencoded`

您可以在下面给出的示例中打印出`content-type`标题以验证上述内容，该示例显示了如何上传具有（可选）相同`key`（即，`files`在下面的情况下）以及可选`form`数据（即，`data=form_data`)。对于服务器端——如果你需要的话——请看一下[这个答案](https://stackoverflow.com/a/70640522/17865804)，下面的代码片段是从中获取的，它使用[了 FastAPI](https://fastapi.tiangolo.com/) Web 框架。

```
import requests

url = 'http://127.0.0.1:8000/submit'
files = [('files', open('test_files/a.txt', 'rb')), ('files', open('test_files/b.txt', 'rb'))]
form_data ={"name": "foo", "point": 0.13, "is_accepted": False}
resp = requests.post(url=url, data=form_data, files=files) 
print(resp.json())
print(resp.request.headers['content-type']) 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-08-26T23:56:17.073

我正在尝试使用 python 3 中的请求模块向 URL_server 发送请求。这对我有用：

```
# -*- coding: utf-8 *-*
import json, requests

URL_SERVER_TO_POST_DATA = "URL_to_send_POST_request"
HEADERS = {"Content-Type" : "multipart/form-data;"}

def getPointsCC_Function():
  file_data = {
      'var1': (None, "valueOfYourVariable_1"),
      'var2': (None, "valueOfYourVariable_2")
  }

  try:
    resElastic = requests.post(URL_GET_BALANCE, files=file_data)
    res = resElastic.json()
  except Exception as e:
    print(e)

  print (json.dumps(res, indent=4, sort_keys=True))

getPointsCC_Function() 
```

在哪里：

*   URL_SERVER_TO_POST_DATA = 我们要发送数据的服务器
*   HEADERS = 发送的标头
*   file_data = 发送的参数

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2021-05-20T22:09:50.530

Postman 为文件上传生成了带有附加表单字段的代码：

```
import http.client
import mimetypes
from codecs import encode

conn = http.client.HTTPSConnection("data.XXXX.com")
dataList = []
boundary = 'wL36Yn8afVp8Ag7AmP8qZ0SA4n1v9T'
dataList.append(encode('--' + boundary))
dataList.append(encode('Content-Disposition: form-data; name=batchSize;'))

dataList.append(encode('Content-Type: {}'.format('text/plain')))
dataList.append(encode(''))

dataList.append(encode("1"))
dataList.append(encode('--' + boundary))
dataList.append(encode('Content-Disposition: form-data; name=file; filename={0}'.format('FileName-1.json')))

fileType = mimetypes.guess_type('FileName-1.json')[0] or 'application/octet-stream'
dataList.append(encode('Content-Type: {}'.format(fileType)))
dataList.append(encode(''))

with open('FileName-1.json', 'rb') as f:
  dataList.append(f.read())
dataList.append(encode('--'+boundary+'--'))
dataList.append(encode(''))
body = b'\r\n'.join(dataList)
payload = body
headers = {
  'Cookie': 'XXXXXXXXXXX',
  'Content-type': 'multipart/form-data; boundary={}'.format(boundary)
}
conn.request("POST", "/fileupload/uri/XXXX", payload, headers)
res = conn.getresponse()
data = res.read()
print(data.decode("utf-8")) 
```**

# jvm - OQL 包中的所有实例

> ID：12385185
> 
> 赞同：3
> 
> 时间：2012-09-12T09:33:45.107
> 
> 标签：jvm, oql

是否可以`OQL`检索属于一个包的所有对象？或者我可以查询`wildcards`吗？

正如@haridsv 建议的那样，我尝试过：

```
SELECT * from "com.example.*" 
```

和

```
SELECT a from "com\.example\..*" 
```

但`VisualVM`其中抱怨说不存在这样的包裹。

甚至

```
SELECT a from "java.io.File" a 
```

失败。

谢谢！

塞达诺。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T17:06:38.707

您可以像这样使用正则表达式：

```
SELECT * from "<packagename>.*" 
```

如果包名称是“java.io”，您将使用：

```
SELECT * from "java\.io\..*" 
```

请注意正则表达式周围的引号以及路径中的点如何受到保护。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T09:27:16.727

[我在VisualVM OQL 帮助](http://visualvm.java.net/oqlhelp.html)中找到了答案。

```
select filter(heap.classes(), "/com.example./(it.name)") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-18T16:52:56.883

来自 VisualVM 有限的文档：

*   选择所有具有名称模式 java.net.* 的类

`select filter(heap.classes(), "/java.net./.test(it.name)")`

[https://visualvm.github.io/documentation.html](https://visualvm.github.io/documentation.html)

诀窍在于“测试（it.name）”

# styles - Metro 风格应用程序中的 UAC (VS 2012)

> ID：12385191
> 
> 赞同：1
> 
> 时间：2012-09-12T09:34:01.907
> 
> 标签：styles, microsoft-metro, uac

我希望我的应用程序始终以管理员身份运行。我已经创建了新的清单文件（通过 New Items -> Manifest 文件），将 requestedExecutionLevel 设置为“requireAdministrator”，但它根本不要求提供凭据，即使我在另一个非管理员帐户上尝试它（通过 appackages 安装） . 有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:44:03.390

Windows 应用商店应用程序不能作为“提升”运行。它们在应用程序容器中运行，这比普通用户进一步限制了权限。

# php - php mysql 检查连接是否已经建立

> ID：12385195
> 
> 赞同：0
> 
> 时间：2012-09-12T09:34:14.420
> 
> 标签：php, mysql

这个问题不同于我在 SO 本身和 Google Search Resutls 中找到的检查特定连接是否存在。

我想要的是检查mysql连接是否已经建立。我需要检查一下，因为我有很多模块需要连接才能运行。有时在没有连接的情况下调用相同的模块，有时在已经存在连接时调用相同的模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:40:17.743

我建议使用单例模式和一些 OO。

```
class Singleton{
    private static $instance=null;
    public function connection(){
        if(self::$instance==null){
            self::$instance = mysql_connect(); 
    }
        return self::$connection;
    }
}

class TableA extends Singleton{
    function find($id){
        $query="select * from `A` where `id`='$id'";
        mysql_query($query, $this->connection());
        ... // other codes
    }
} 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:41:31.370

您应该简单地`mysql_connect`使用相同的参数调用。如果已经存在相同的连接，它将被简单地重用。

* * *

那是懒惰的答案。显然，更好的方法是以您知道程序状态的方式来构建程序。摆脱陈旧、已弃用的 mysql_ 扩展是第一步。使用 mysqli 或 PDO，它们都不支持隐式连接，但需要您传递一个代表您的连接的变量。无论如何，对于一个健全的模块化应用程序结构，这就是你应该做的，那么你就不会有这些问题了。

# javascript - IE6 在启用/禁用文本字段上闪烁

> ID：12385197
> 
> 赞同：0
> 
> 时间：2012-09-12T09:34:16.667
> 
> 标签：javascript, jquery, html, internet-explorer-6

我在我的代码中使用以下两行无辜的 jQuery

```
jQuery("#textfield").attr("disabled","disabled");

jQuery("#textfield").removeAttr("disabled"); 
```

只是为了启用和禁用文本字段。每当发生这种情况时，IE6 都会稍微闪烁一下屏幕。老流氓IE6有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:57:14.660

试过这个？

```
if($('#textfield').is(':disabled')){
    $('#textfield').prop('disabled',false);
}else{
    $('#textfield').prop('disabled',true);
} 
```

# c# - 具有非空外键的流畅 nhibernate 映射 (HasMany)

> ID：12385199
> 
> 赞同：3
> 
> 时间：2012-09-12T09:34:26.010
> 
> 标签：c#, nhibernate, fluent-nhibernate

我在 nhibernate 中有以下映射。当我打电话时，`Session.Merge(myparent)`我在插入时收到一个错误，表明`NULL`无法插入外键 ( `ParentItemId`) 列。

如何调整映射以便在插入时插入父键。如果我使外键可以为空，则此映射有效，但会向数据库发出两个单独的语句。

这种关系是一对多的，没有对子类的父级的引用。

*   子类没有父属性。*   孩子依赖父母。

    ```
    HasMany(map => map.Children).Table("ChilrenTable")
       .KeyColumn("ParentItemId") // this is not nullable.
       .Cascade
       .AllDeleteOrphan(); 
    ```

    **示例更新**

    ```
    // entity here is the parent instance, which contains the list
    // of children.
    using (var tx = Session.BeginTransaction())
    {
        entity = Session.Merge(entity); // this line causes the problem.
        Session.SaveOrUpdate(entity);
        Session.Flush();
        tx.Commit();
        return entity;
    } 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T11:43:40.610

[NHibernate 中的逆属性](https://stackoverflow.com/questions/713637/inverse-attribute-in-nhibernate)

```
HasMany(map => map.Children).Table("ChilrenTable")
   .KeyColumn("ParentId") // this is not nullable.
   .Inverse()  // <--- This is the key here
   .Cascade
   .AllDeleteOrphan(); 
```

# html - 从谷歌下来的图片

> ID：12385200
> 
> 赞同：-1
> 
> 时间：2012-09-12T09:34:30.017
> 
> 标签：html

我想写一个 sript 从谷歌下载图像。我发现有两个版本来显示图片（**标准版**：在一个页面中显示所有图片；**基本版**：显示图片到多页，你应该点击**下一步**看下一页）
在**标准版**中，它也有**页面N**标记。但是所有这些都显示在一页中。然后我检查网站的源代码。我只能找到 page1-page5 图片的**URL**。如何找到其余图像的**URL**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:46:22.703

我想您想抓取 Google 图片搜索结果页面。这违反了谷歌[的服务条款](http://www.google.com/intl/en/policies/terms/)。他们说：

> 不要滥用我们的服务。例如，**不要**干扰我们的服务或尝试使用**我们提供**的界面 和说明**以外的方法访问它们**。

 **您可能想要使用他们现在支持图像搜索的[自定义搜索 API 。](https://developers.google.com/custom-search/v1/overview)**

# jboss - JBoss AS 7 模块：可以在一个目录中包含所有库的模块吗？

> ID：12385204
> 
> 赞同：2
> 
> 时间：2012-09-12T09:34:37.273
> 
> 标签：jboss, classpath, jboss7.x

我想用这样的资源根定义一个模块：

```
<?xml version="1.0" encoding="UTF-8"?>
<module xmlns="urn:jboss:module:1.0" name="com.mymodule">
  <resources>
    <resource-root path="libs"/>
  </resources>
  <dependencies />
</module> 
```

该目录包含我需要的所有库。我已经尝试过了，但它不起作用，但如果我这样说它会起作用：

```
<?xml version="1.0" encoding="UTF-8"?>
<module xmlns="urn:jboss:module:1.0" name="com.mymodule">
  <resources>
    <resource-root path="libs/lib1.jar"/>
    <resource-root path="libs/lib2.jar"/>
    <resource-root path="libs/lib3.jar"/>
    <resource-root path="libs/lib4.jar"/>
    ........
  </resources>
  <dependencies />
</module> 
```

有没有办法先做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:33:36.573

尝试在您的第一个实现中使用 libs.*

更新：

此功能目前不可用，虽然它正在研发中

如果您需要在一个模块中包含多个 jar，则需要单独实例化每个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-11T06:04:31.770

我知道这个很旧，但我在 EAP-7 上遇到了同样的问题，并解决了如下问题：

您可能想使用 JBoss CLI 创建模块。我的问题是提供多种资源，因为它是你的。我正在使用属性 resource-delimiter 并提供我的资源列表，如下所示：

```
module add --name=my.module --resource-delimiter=, --resources=libA.jar,libB.jar,libC.jar --dependencies=my.dep.a,my.dep.b 
```

这会在相应的 JBoss 文件夹中生成以下 module.xml：

```
<?xml version="1.0" ?>
    <module xmlns="urn:jboss:module:1.1" name="my.module">
    <resources>
        <resource-root path="libA.jar"/>
        <resource-root path="libB.jar"/>
        <resource-root path="libC.jar"/>
    </resources>
    <dependencies>
        <module name="my.dep.a"/>
        <module name="my.dep.b"/>
    </dependencies>
</module> 
```

希望能帮助到你。

# .htaccess - htaccess 将部分文件名重写为 url

> ID：12385210
> 
> 赞同：1
> 
> 时间：2012-09-12T09:34:57.400
> 
> 标签：.htaccess, mod-rewrite

我不知道如何重写这个：

```
/part-filename.php 
```

到

```
/part/filename.php 
```

/part/ 不是现有目录。

我知道这应该很容易，但是找不到如何在文件名中搜索“部分”并将其转换为 url 中的子级别。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:17:42.493

试试这个

```
<IfModule mod_rewrite.c>
   RewriteEngine on

  RewriteRule ^part/(.*)$ /part-$1 [L,QSA]
</IfModule> 
```

# asp.net-mvc-3 - mvc3 partialview 不加载查询字符串

> ID：12385214
> 
> 赞同：0
> 
> 时间：2012-09-12T09:35:21.220
> 
> 标签：asp.net-mvc-3, query-string

我有使用 AJAX 更新的部分视图。问题是部分视图需要两个参数，一个不在查询字符串中。

这是控制器

```
public ActionResult _Unutrasnjost(string verzijaIme,int bojeId=0)
{
    return PartialView(repositoryU.BojeUnutrasnjostVezano.Where(v =>v.VerzijaIme==verzijaIme&&v.BojeId == bojeId).ToList());
} 
```

string verzijaIme 在查询字符串中，但是当加载部分视图时，它告诉我未定义

int bojeId 不在查询字符串中，但是当用户单击按钮时，它由 AJAX 发送。

我不明白为什么如果我只输入一个参数（字符串或 int）并且如果我输入两个参数 verzijaIme 未定义，为什么一切正常？

如果我从 int bojeId 中删除 =0 并将该参数放入查询字符串中，它也可以工作，但我不能接受这种解决方案

有什么建议吗？

阿贾克斯代码

```
function unutrasnjostData(id) {
        var urlclear = '@Url.Action("_Unutrasnjost", "Configurator")' + "?bojeId=" + id;
        $.ajax({
            cache: false,
            type: 'POST',
            url: urlclear,
            success: function (data) {
                $('#meniDesnoIzmjeneUnutrasnjost').html(data);
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:57:08.890

看起来你根本没有传递`verzijaIme`到局部视图。您需要扩展您的`unutrasnjostData`功能：

```
function unutrasnjostData(id, verzijaIme) {
        var urlclear = '@Url.Action("_Unutrasnjost", "Configurator")' + "?bojeId=" + id + "&verzijaIme=" + verzijaIme;
        $.ajax({
            cache: false,
            type: 'POST',
            url: urlclear,
            success: function (data) {
                $('#meniDesnoIzmjeneUnutrasnjost').html(data);
            }
        });
    } 
```

或者，更好的是，邮寄：

```
 $.ajax({
        cache: false,
        data: { bojeId: id, verzijaIme: verzijaIme },
        type: 'POST',
        url: urlclear,
        success: function (data) {
            $('#meniDesnoIzmjeneUnutrasnjost').html(data);
        }
    }); 
```

不要将来自请求到页面的查询字符串与来自 AJAX 调用的查询字符串混淆。这是两个单独的请求。

# iphone - 如何使用以字符串分隔的组件进行 json 解析

> ID：12385219
> 
> 赞同：0
> 
> 时间：2012-09-12T09:35:32.830
> 
> 标签：iphone, ios, json

我是解析 JSON 的新手，我正在尝试一个简单的任务，即从天气预报 json 文件中检索 URL。

在这里，我解析 json 并 NSLog 数据的每个组件的内容：

```
NSError *myError = nil;
NSDictionary *res = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableLeaves  error:&myError];

NSArray *data =  [res objectForKey:@"data"];
NSLog(@"data=%@",data);

NSArray *results =  [data valueForKey:@"weather"];
NSLog(@"weather=%@",results);

NSArray *results1 =  [results valueForKey:@"tempMaxC"];
NSLog(@"tempMaxC=%@",results1);

NSArray *results2 =  [results1 valueForKey:@"weatherIconUrl"];
NSLog(@"weatherIconUrl=%@",results2); 
```

问题是当我得到 WeatherIconUrl 它带有这种格式

```
"http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png" 
```

而且我无法在没有引号的情况下获取 url，我尝试使用 nsrange 和 componentsSeparatedByString 但它总是给我这个错误：

```
[__NSArrayI componentsSeparatedByString:]: unrecognized selector sent to instance 
```

来自服务器的 JSON：

```
{
    "data": {
        "current_condition": [
            {
                "cloudcover": "0",
                "humidity": "73",
                "observation_time": "12:19 PM",
                "precipMM": "0.0",
                "pressure": "1021",
                "temp_C": "23",
                "temp_F": "73",
                "visibility": "10",
                "weatherCode": "113",
                "weatherDesc": [
                    {
                        "value": "Sunny"
                    }
                ],
                "weatherIconUrl": [
                    {
                        "value": "http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png"
                    }
                ],
                "winddir16Point": "NW",
                "winddirDegree": "320",
                "windspeedKmph": "17",
                "windspeedMiles": "11"
            }
        ],
        "request": [
            {
                "query": "Fanzeres, Portugal",
                "type": "City"
            }
        ],
        "weather": [
            {
                "date": "2012-09-12",
                "precipMM": "0.0",
                "tempMaxC": "28",
                "tempMaxF": "83",
                "tempMinC": "17",
                "tempMinF": "63",
                "weatherCode": "113",
                "weatherDesc": [
                    {
                        "value": "Sunny"
                    }
                ],
                "weatherIconUrl": [
                    {
                        "value": "http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png"
                    }
                ],
                "winddir16Point": "NW",
                "winddirDegree": "312",
                "winddirection": "NW",
                "windspeedKmph": "16",
                "windspeedMiles": "10"
            },
            {
                "date": "2012-09-13",
                "precipMM": "0.0",
                "tempMaxC": "33",
                "tempMaxF": "91",
                "tempMinC": "17",
                "tempMinF": "63",
                "weatherCode": "113",
                "weatherDesc": [
                    {
                        "value": "Sunny"
                    }
                ],
                "weatherIconUrl": [
                    {
                        "value": "http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png"
                    }
                ],
                "winddir16Point": "N",
                "winddirDegree": "8",
                "winddirection": "N",
                "windspeedKmph": "10",
                "windspeedMiles": "6"
            }
        ]
    }
} 
```

对不起我的英语不好，如果我做错了请纠正我，提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:49:09.367

从@“weatherIconUrl”获取数组时使用objectForKey而不是valueForKey，然后将字符串放入NSString，例如

```
NSString *weatherIconUrlString = [results2 objectAtIndex:0] 
```

要检查这是一个有效的 url，请使用 NSURLConnection 的 canHandleRequest 方法，例如

```
NSURL *url = [NSURL URLWithString:weatherIconUrlString];
NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url 
BOOL canGo = [NSURLConnection canHandleRequest:request]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T09:48:25.600

如果您的 URL 周围确实有引号，请尝试以下操作：

```
NSString *someURLString = [results2 objectAtIndex:0];
NSString *quotesRemoved = [someURLString stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"\""]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T11:28:29.127

将服务器的输出通过[jsonLint.com](http://jsonLint.com)提供更易于阅读的 json 格式。

下面的代码现在根据需要获取天气图标 url。它假定 json 已作为名为 jsonData 的 NSData 对象下载，并且不检查数据所指的日期。

```
NSError *error = nil;
NSDictionary *jsonDict      = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableLeaves
                                                                error:&error];
NSArray      *data          =  [jsonDict    valueForKey:@"data"];
NSArray      *weather       =  [data        valueForKey:@"weather"];
NSArray      *weatherIcon   = [[weather     objectAtIndex:0] valueForKey:@"weatherIconUrl"];
NSString     *url           = [[weatherIcon objectAtIndex:0] valueForKey:@"value"]; 
```

生成的 url 用于 NSURLRequest 并显示在 webview 中

![在此处输入图像描述](../Images/bc02eff136a2c79fcd0d2ee1bfe8b5cb.png)

# asp.net-mvc - 在 MVC3 中扩展 ClaimsIdentity

> ID：12385231
> 
> 赞同：4
> 
> 时间：2012-09-12T09:36:00.190
> 
> 标签：asp.net-mvc, asp.net-mvc-3, claims-based-identity

我已经使用 azure 使用 MVC3 设置了我的声明，并且一切顺利。

我现在需要做的是扩展当前线程/http上下文中的Claims Identity并添加我自己的信息（DOB，地址..之类的东西）

所以我的问题是 - 最好的地方在哪里？任何例子都会很棒..

我假设当用户通过身份验证时，必须去数据库并为用户拉回相关记录，然后将其添加到自定义 Claims Identity 对象中？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-25T11:07:09.410

通常，您将有一个 httpmodule 来检查 cookie，一旦找到 FedAuth 令牌，您就有一个挂钩来构建您的 Claims Principal 和身份。

您通常不需要存储用户的整个配置文件，只需存储通常不会经常更改的有用内容。我在动作过滤器中执行此操作。

这是我发现完成所有这些的代码。

[https://github.com/wcpro/ScaffR/tree/master/src/ScaffR.Security/content/CodeTemplates/Scaffolders/ScaffR.Security](https://github.com/wcpro/ScaffR/tree/master/src/ScaffR.Security/content/CodeTemplates/Scaffolders/ScaffR.Security)

您可能需要进行一些挖掘，但一切都在那里。

这是http模块的代码

```
public class ClaimsTransformationHttpModule : IHttpModule
{
    public void Init(HttpApplication context)
    {
        context.PostAuthenticateRequest += context_PostAuthenticateRequest;
    }

    void context_PostAuthenticateRequest(object sender, EventArgs e)
    {
        var context = ((HttpApplication) sender).Context;

        if (FederatedAuthentication.SessionAuthenticationModule != null &&
            FederatedAuthentication.SessionAuthenticationModule.ContainsSessionTokenCookie(context.Request.Cookies))
        {
            return;
        }

        var transformer = FederatedAuthentication.FederationConfiguration.IdentityConfiguration.ClaimsAuthenticationManager;

        if (transformer != null)
        {
            var transformedPrincipal = transformer.Authenticate(context.Request.RawUrl, context.User as ClaimsPrincipal);

            context.User = transformedPrincipal;
            Thread.CurrentPrincipal = transformedPrincipal;
        }
    }

    public void Dispose() { }
} 
```

这是索赔转换器

```
 public partial class ClaimsTransformer : ClaimsAuthenticationManager
{
    partial void SetCustomPrincipalClaims(IUserService userService, ref ClaimsPrincipal principal);

    public override ClaimsPrincipal Authenticate(string resourceName, ClaimsPrincipal incomingPrincipal)
    {
        if (!incomingPrincipal.Identity.IsAuthenticated)
        {
            return incomingPrincipal;
        }

        var newPrincipal = Transform(incomingPrincipal);

        EstablishSession(newPrincipal);

        return newPrincipal;
    }

    ClaimsPrincipal Transform(ClaimsPrincipal incomingPrincipal)
    {
        var nameClaim = incomingPrincipal.Identities.First().FindFirst(ClaimTypes.Name);

        var userService = DependencyResolver.Current.GetService<IUserService>();

        var user = userService.GetByUsername(nameClaim.Value);

        var id = new ApplicationIdentity(user);

        var principal = new ClaimsPrincipal(id);

        SetCustomPrincipalClaims(userService, ref principal);

        return principal;
    }        

    private void EstablishSession(ClaimsPrincipal principal)
    {
        if (HttpContext.Current != null)
        {
            var sessionToken = new SessionSecurityToken(principal);
            FederatedAuthentication.SessionAuthenticationModule.WriteSessionTokenToCookie(sessionToken);
        }
    }
} 
```

然后这里是配置

```
<?xml version="1.0" encoding="utf-8"?>
<system.identityModel>
  <identityConfiguration>
    <claimsAuthenticationManager type="Barbarella.Core.Common.Security.ClaimsTransformer, Barbarella.Core" />
  </identityConfiguration>
</system.identityModel> 
```

还有这个...

```
 <system.identityModel.services>
  <federationConfiguration>
    <cookieHandler mode="Default" requireSsl="false" />
  </federationConfiguration>
</system.identityModel.services> 
```

还有这个...

```
<system.webServer>
<validation validateIntegratedModeConfiguration="false" />
<modules runAllManagedModulesForAllRequests="true">
  <add name="ClaimsTransformationModule" type="Barbarella.Core.Common.Security.ClaimsTransformationHttpModule, Barbarella.Core" />
  <add name="SessionAuthenticationModule" type="System.IdentityModel.Services.SessionAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />

</modules> 
```

不要忘记添加您的配置部分

```
 <section name="system.identityModel" type="System.IdentityModel.Configuration.SystemIdentityModelSection, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
<section name="system.identityModel.services" type="System.IdentityModel.Services.Configuration.SystemIdentityModelServicesSection, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" /> 
```

这是我的 ApplicationIdentity 代码（覆盖 ClaimsIDentity）...这是真正回答您问题的代码...

```
 public sealed partial class ApplicationIdentity : ClaimsIdentity
{
    partial void SetCustomIdentityClaims(User user);

    private readonly User _user;

    public ApplicationIdentity(User user) : base("Application")
    {
        _user = user;
        AddClaim(new Claim(ClaimTypes.Name, user.Username));     
        AddClaim(new Claim(ApplicationClaimTypes.UserId, user.Id.ToString(CultureInfo.InvariantCulture)));
        AddClaim(new Claim(ApplicationClaimTypes.FirstName, user.FirstName));
        AddClaim(new Claim(ApplicationClaimTypes.LastName, user.LastName));
        AddClaim(new Claim("Time", DateTime.Now.ToString()));

        SetCustomIdentityClaims(_user);
    }

    public User User
    {
        get { return _user; }
    }

    public int UserId
    {
        get { return int.Parse(FindFirst(ApplicationClaimTypes.UserId).Value); }
    }

    public string Username
    {
        get { return FindFirst(ClaimTypes.Name).Value; }
    }

} 
```

# uml - 如何使用用例关系 - uml

> ID：12385233
> 
> 赞同：2
> 
> 时间：2012-09-12T09:36:03.203
> 
> 标签：uml

嘿伙计们！我一直在研究 UML，并试图设计一个问题的用例图。

假设我的应用程序包含以下内容：

两个要求： - 创建团队 - 创建球员

这是交易：用户可以创建一个团队，创建一个团队后，他可以为该团队创建球员（不是必需的）。但是在这个应用程序中有多个用户，一个用户可以创建一个团队，其他用户可以创建玩家。唯一的限制是创建球员必须已经存在于一个团队中。我研究了一下，结果有点困惑。如果我正确理解了用例图上的关系概念，我认为我应该有以下两个用例：

[用例-创建团队] <--------extends---- [用例-创建玩家]

我需要意见，这是正确的解决方案吗？还是我应该有两个不相关的用例？

在此先感谢，我很抱歉我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:17:00.080

通常，您不需要在用例图中对依赖关系进行建模，例如“在执行 B 之前必须完成 A”。用例应该代表一组 Szenarios 以将它们分组为常见用例。

“扩展”依赖项用于指定一个比扩展的用例更特殊的用例。因此，如果您想表达创建球员是使用“扩展”创建团队的一种特殊形式就可以了。但是这与上述情况不符。

如果您想表达创建游戏总是意味着创建团队，您可以使用“包含”依赖项。这可能符合您的情况，但 imo 并不完全符合。

最后一个选项是绘制一个未指定的依赖关系（没有 << >> 标记），表示用例彼此之间有关系。

我的建议：在这种情况下不要使用任何依赖项。

顺便说一句，可以在[这里](http://etutorials.org/Programming/Learning+uml/Part+II+Structural+Modeling/Chapter+4.+Use-Case+Diagrams/4.4+Dependencies/)找到一些更好的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T16:33:29.133

用例有一个共同的问题：关系。我们倾向于使用关系来描述用例的顺序。但这是一种误解。以下是[《UML 用户指南》](http://www.worldcat.org/oclc/634473149)中关于*用例和事件流的*一些话（第 4 部分，第 17 章）：

```
You can specify a use cases's flow of events in a number of ways
[...] informal structured text
[...] formal structured text
[...] states machines
[...] activity diagrams 
```

关键是，如果指南倾向于（隐含地）说不应该使用关系来指定事件流，它并没有说明用例关系应该用于什么。我认为这就是为什么用例是 UML 和 UP 的一个重点，但却是一个非常难以处理的工具的原因。

在您的模型中，您也许应该更改箭头和术语（简单的建议，您是分析师）：

![团队创造意味着球员创造](../Images/1cd21d5b53b90bfcb71873eac68ac916.png)

如果您想强调约束，这应该在您的图表上表示，而不是作为操作顺序的表示（细微区别）。

*扩展*术语通常与泛化/专业化相关联。在我看来，这不是团队和用户创作之间的那种关系。该指南给出的示例如下（第 4 部分，第 18 章）：

![拨打电话会议是拨打电话的专业化](../Images/af2da66ef36c0ba32f93a28326ada02c.png)

也就是说，对用例的专业化建模大多数时候兴趣有限。但有时这是需要的，这取决于用例描述：如果两者相等，则不相等，否则不相等。有经验的程序员[知道](http://dx.doi.org/10.1145/62959.62963)专业化并不意味着相等的断言。

# svn - 从 github 查看我的项目时获取“响应中的无效 XML”

> ID：12385235
> 
> 赞同：2
> 
> 时间：2012-09-12T09:36:27.963
> 
> 标签：svn, github, tortoisesvn

我试图使用 TortoiseSVN 客户端从 github 获取我的项目的新副本。但我收到以下异常：

> PROPFIND 请求在响应中返回了无效的 XML：第 1 行的 XML 解析错误：未找到元素（来自[https://github.com/anoopchaurasia/JavaScript-File-Manager.git](https://github.com/anoopchaurasia/JavaScript-File-Manager.git)的结帐）

当我尝试在 Eclipse 上使用 Subclipse 结帐时，它显示`"Folder does not exist."`.

我可以在我的其他系统上签出相同的存储库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:13:23.870

您**可以**使用 TortoiseSVN 或命令行 SVN 客户端从 Git 存储库中签出工作副本。

这看起来像是特定系统和 github 之间的连接问题。该错误`XML parse error at line 1: no element found`通常意味着您输入的 URL 不正确。例如看到这个 StackOverflow 线程：[为什么我在访问 VisualSVN 服务器时在 svn 客户端“第 1 行的 XML 解析错误没有找到元素”上收到错误？](https://stackoverflow.com/q/11541520/761095)并阅读文章[KB102：不适当的存储库 URL 导致的 Subversion 客户端错误](https://www.visualsvn.com/support/topic/00102/)。

现在我可以用 TortoiseSVN 和命令行检查工作副本。

例如，这就像一个魅力：

```
svn co https://github.com/anoopchaurasia/JavaScript-File-Manager 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-12T09:42:56.317

SVN 与 Git 不同。TortoiseSVN 不支持 Git。改用[TortoiseGit](http://code.google.com/p/tortoisegit/)。

# c# - 在 C# 中的“datetimepicker”中限制日期

> ID：12385236
> 
> 赞同：1
> 
> 时间：2012-09-12T09:36:29.193
> 
> 标签：c#, .net-3.5, datagridview, datetimepicker

我正在开发的基于表单的应用程序的一项功能允许用户搜索历史记录。

用户可以按名称、编号和日期之间进行搜索，并将结果填充到 datagridview 控件中。

![这是表格：](../Images/d30dec891e8e12bc7cedd405ee09eeca.png)

但是，由于表单将用于搜索以前的记录。不需要用户选择未来日期的能力。

有没有办法阻止用户选择未来的日期，甚至将未来的日期变灰？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T09:39:28.207

您可以尝试使用基于`MaxDate` 属性的代码

```
yourControl.MaxDate = DateTime.Today; 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/system.windows.forms.datetimepicker.maxdate.aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.forms.datetimepicker.maxdate.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T09:38:34.243

您可以使用该[`DateTimePicker.MaxDate`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.maxdate.aspx)属性：

> ***DateTimePicker.MaxDate 属性**：获取或设置可以在控件中选择的最大日期和时间。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T09:38:22.347

请试试：

```
dateTimePicker.MaxDate = DateTime.Now; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T09:44:38.263

设置 MaxDate 属性将隐藏指定日期之后的所有日期，并且不允许输入大于该日期的日期。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.maxdate.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.maxdate.aspx)。

# objective-c - iOS离开页面翻转过渡的性能调整

> ID：12385237
> 
> 赞同：0
> 
> 时间：2012-09-12T09:36:29.087
> 
> 标签：objective-c, ios

我正在使用 GitHub 叶子库来实现具有翻页转换的 PDF 阅读器。在 iPad/iPhone 模拟器中，每一件事都完美无缺。但是当我在设备上安装相同的设备时，横向模式下的翻页过渡变慢了。即，当显示两个页面时。任何人都可以给我任何建议来解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:58:40.140

您是否在用户翻转时从磁盘读取 PDF 图像？在后台预加载它们可以帮助加快速度。

# python - Twisted Spread：如何使用数字签名验证每个 RPC

> ID：12385240
> 
> 赞同：1
> 
> 时间：2012-09-12T09:36:34.120
> 
> 标签：python, twisted, rpc, digital-signature

我有使用 Twisted Spread 与 RPC 相互交谈的远程对象。

我希望对象在使用消息之前使用数字签名对消息进行身份验证，但我不知道从哪里开始实现这一点。

在我看来，根对象必须有一个公钥/私钥对，客户端也必须有。发送消息时，会添加哈希的数字签名，并在收到消息时检查签名。我需要在协议部分添加这些添加和检查吗？

谢谢

# asp.net - 跨域 Web 服务 - 脚本错误

> ID：12385245
> 
> 赞同：0
> 
> 时间：2012-09-12T09:37:01.813
> 
> 标签：asp.net, web-services, cross-domain

我在某个服务器中托管了一个 Web 服务。我正在尝试从我的本地主机访问它。

我收到一个 javascript 错误：

```
status = 0
responseText = null 
```

仅当我从本地主机访问它时，托管在同一服务器中的同一应用程序才能正常工作。

对此有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T13:24:36.873

将数据格式更改为 JSONP 格式 JSON 后工作。

# jquery - JQuery 在 IE7/8 中不起作用

> ID：12385246
> 
> 赞同：1
> 
> 时间：2012-09-12T09:37:04.530
> 
> 标签：jquery, internet-explorer

我得到了以下代码来实现：

```
<script type="text/javascript">

  $(document).ready(function(){
    $('.hotspots a').bind('mouseover click', function() {
      $this = $(this);
      if($('.hotspot-target').data('hotspot')!=$this.attr('href')) {
        $('.hotspot-target').data('hotspot', $this.attr('href'));

        $('.hotspot-target').fadeOut(100, function() {
          $('.hotspot-target').css({backgroundImage: 'url('+$this.attr('href')+')'});
          $('.hotspot-target .detail').hide();
          $('.hotspot-target .detail.'+$this.attr('class')).show();

          $('.hotspot-target').fadeIn(100);
        });
      }
      return false;
    })
  });
</script> 
```

它在 FF 和 Chrome 中运行良好，在控制台中没有错误。我在 IE 调试器中也看不到任何错误，尽管我不太习惯它是如何工作的。

上面的代码有什么明显的错误吗？它位于页面的末尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:13:24.437

怎么样：

```
$(document).ready(function(){
    $('.hotspots a').bind('mouseover click', function() {
        var hotSpotTarget = $('.hotspot-target'),
            value = this.href,
            cssClass = this.className;

        if(hotSpotTarget.data('hotspot') != value) {
            hotSpotTarget.data('hotspot', value);

            hotSpotTarget.fadeOut(100, function() {
                hotSpotTarget.css('background-image', 'url(' + value+ ')');
                hotSpotTarget.find('.detail').hide().filter('.' + cssClass).show();
                hotSpotTarget.fadeIn(100);
            });
        }
        return false;
    })
}); 
```

演示：http: [//jsfiddle.net/2F9VW/1/](http://jsfiddle.net/2F9VW/1/)

# validation - 如何使用具有唯一约束的 EF5 在 MVC4 中编辑实体？

> ID：12385247
> 
> 赞同：0
> 
> 时间：2012-09-12T09:37:05.477
> 
> 标签：validation, asp.net-mvc-4, entity-framework-5

```
[HttpPost]
        public ActionResult Edit(Car car)
        {
            if (ModelState.IsValid)
            {
                db.Entry(car).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            return View(car);
        } 
```

这是由 MCV 4 搭建的控制器方法 我的“汽车”实体有一个唯一字段：LicensePlate。我对我的实体进行了自定义验证：

验证：

```
public partial class Car
    {
        partial void ValidateObject(ref List<ValidationResult> validationResults)
        {
            using (var db = new GarageIncEntities())
            {
                if (db.Cars.Any(c => c.LicensePlate.Equals(this.LicensePlate)))
                {
                    validationResults.Add(
                        new ValidationResult("This licenseplate already exists.", new string[]{"LicensePlate"}));
                }
            }
        }
    } 
```

如果有用，我的汽车实体：

```
 public partial class Car:IValidatableObject
    {
        public int Id { get; set; }
        public string Color { get; set; }
        public int Weight { get; set; }
        public decimal Price { get; set; }
        public string LicensePlate { get; set; }
        public System.DateTime DateOfSale { get; set; }
        public int Type_Id { get; set; }
        public int Fuel_Id { get; set; }

        public virtual CarType Type { get; set; }
        public virtual Fuel Fuel { get; set; }

        public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
            {
                var result = new List<ValidationResult>();
                ValidateObject(ref result);
                return result;
            }

        partial void ValidateObject(ref List<ValidationResult> validationResults);
    } 
```

## 问题：

每次我编辑汽车时，都会引发错误：

> 一个或多个实体的验证失败。有关更多详细信息，请参阅“EntityValidationErrors”属性。

该错误是我的验证引发的错误，说它无法编辑，因为已经有一辆带有该牌照的汽车。

如果有人能指出我正确的方向来解决这个问题，那就太好了！我搜索了但找不到任何东西，所以即使是相关的帖子也欢迎！

*注意：这个字段有一个唯一的约束，所以这个验证仍然必须为创建操作触发*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:47:10.743

好吧，我找到了一个修复方法，但我不确定它是否是有史以来最好的。我修改了验证，使其仅在 Id 不存在时触发（所以.. 0）。这样，我可以区分新实体和更新实体。

```
if (db.Cars.Any(c => c.LicensePlate.Equals(this.LicensePlate) && c.Id != this.Id)) 
```

这确实解决了我的问题，但不知何故，我认为应该有一个更清洁的解决方案。

# android - 如何在线程内的looper中使用处理程序（在looper之前创建）

> ID：12385249
> 
> 赞同：0
> 
> 时间：2012-09-12T09:37:11.343
> 
> 标签：android

嗨，在所有教程或示例中，looper 中使用的处理程序是在 looper 示例中创建的：

```
 class LooperThread extends Thread {
      public Handler mHandler;

      public void run() {
          Looper.prepare();

          mHandler = new Handler() {
              public void handleMessage(Message msg) {
                  // process incoming messages here
              }
          };

          Looper.loop();
      }
  } 
```

但是如果在线程之前创建处理程序，例如

```
public Handler mHandler=new Handler() {
              public void handleMessage(Message msg) {
                  // process incoming messages here
              }
          }; 
```

是否可以将他与 looper 的 run() 方法中的线程相关联，或者我必须只在 looper 内的 run 方法中创建他？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:26:19.717

中的构造函数`Handler`基本上如下所示：

```
public Handler() {
    ....
    mLooper = Looper.myLooper();
    if (mLooper == null) {
       // throws an exception
    }
    ....
} 
```

该字段`mLooper`是一个包私有`final`字段 - 当然，您以后没有可用的设置器来更改它。

简而言之，`Handler()`构造函数将自身与 关联`Looper.myLooper()`，还有其他构造函数允许您传递`Looper`- 但这些也需要您在`Looper`创建`Handler`.

# php - 如何保护 sql 条目免受“元”注入？

> ID：12385251
> 
> 赞同：0
> 
> 时间：2012-09-12T09:37:15.170
> 
> 标签：php, mysql, sql-injection

我有一个允许用户保存图像的网站。我用“mysql_real_escape_string”清理了 mysql 插入，但是有人在他的图像描述中输入了一个带有内容重定向的元数据，这样每当我们的网站加载（也加载最新的图像）时，它就会重定向。

如何清理我的字符串或 sql 查询以防止这种情况发生？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:40:05.887

对于这个特定的示例，您可以通过在输出数据时使用[htmlentities来避免它：](http://php.net/manual/en/function.htmlentities.php)

```
<?php
$str = "A 'quote' is <b>bold</b>";

// Outputs: A 'quote' is &lt;b&gt;bold&lt;/b&gt;
echo htmlentities($str);

// Outputs: A &#039;quote&#039; is &lt;b&gt;bold&lt;/b&gt;
echo htmlentities($str, ENT_QUOTES);
?> 
```

问题是它会破坏几乎*所有*用于您保存的内容的 HTML。如果您试图允许某些标签并禁止其他标签，它很快就会变得更加复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:40:06.140

`mysql_real_escape_string`仅用于防止sql注入。

为了防止 XSS，您需要使用[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php)或[htmlentities](http://www.php.net/manual/en/function.htmlentities.php)来清理 html 内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:42:30.030

我认为您应该在`htmlspecialchars();`从数据库中放入任何内容之前以及在将用户输入提交到数据库之前使用准备好的语句 + `htmlspecialchars();`[可选]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T09:42:38.787

这是您可以做的几件事

1.  采用[`strip_tags()`](http://www.php.net/manual/en/function.strip-tags.php)
2.  使用`mysqli_*`函数代替`mysql_`
3.  使用参数化查询/准备好的语句。
4.  如果可能，请考虑使用 PHP 框架。
5.  将特殊字符转换为各自的[`htmlentities()`](http://www.php.net/manual/en/function.htmlentities.php)

# android - 使用数据表内容获取android中的联系人：//com.android.contacts/data/1319

> ID：12385253
> 
> 赞同：1
> 
> 时间：2012-09-12T09:37:22.530
> 
> 标签：android, android-contacts

> **可能重复：**
> [从 Android 中的 URI 检索联系人电话号码](https://stackoverflow.com/questions/3370628/retrieve-contact-phone-number-from-uri-in-android)

我有内容提供商 Uri `content://com.android.contacts/data/1319`。我可以获取与此 uri 对应的电话号码吗？

*   我为此找到了一些东西，即我可以从中获得`raw_Contact_id`，有了`raw_contact_id`我可以获得`contact_id`，现在请任何人告诉我如何加入所有这些`data`，`contacts`并`raw_contacts`获得表格`phone number`。

# plone - 将 XDV 主题产品迁移到 Diazo

> ID：12385261
> 
> 赞同：0
> 
> 时间：2012-09-12T09:37:43.517
> 
> 标签：plone, diazo, xdv

我正在尝试从 XDV 迁移到 Diazo。

目前我有一个主题产品，其中包含：

*   自定义 navigation.py 和 layout.py
*   文件夹：
    *   覆盖（用于核心覆盖）
    *   配置文件（例如 cssregistry.xml）
    *   静态（主题资源、rules.xml、js、css 和其他我们可能希望能够使用 /++resource++theme/ 语法从静态目录中通用调用的杂物）
*   tests.py 中的单元测试。

    **我的问题是：**所有这些都涉及到 Diazo 主题，还是我仍然需要为它的某些部分安装当前的主题产品？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T11:30:11.730

我想是的，是的。

overrides/ 和profiles/ 是一样的。

规则 URL 在 configure.zcml 中的注册应该更改为一个，这将更改 URL（++theme++ 而不是 ++resource++），但它非常相似。

有一些语法更改，但它们在这里是细微而详细的：http: [//pypi.python.org/pypi/plone.app.theming](http://pypi.python.org/pypi/plone.app.theming)

马丁

# powershell - Powershell 从文件中剥离所有目录路径

> ID：12385262
> 
> 赞同：0
> 
> 时间：2012-09-12T09:37:45.727
> 
> 标签：powershell, batch-file

好的，我要做的是制作一个脚本，该脚本将读取文本文件“directory.txt”的每一行并将每一行导出到文件而不是目录。下面的例子。

> 我只是想删除“C:\users\”等目录的路径，并保留“C:\users\file.txt”等文件的任何路径

在测试文件中，Direcory.txt”会有以下内容：

> C:\path\path\folder\
> C:\path\path\file.ext
> C:\path\path\path\path\folder

该脚本需要读取上面的文本文件并将下面的行导出到一个新的文本文件中。

> C:\path\path\file.ext

等效的批处理脚本如下：

```
@ECHO OFF
FOR /F %%A IN (directory.txt) DO CALL:NoDir "%%A"
pause
EXIT /B

:NoDir
IF "%~x1" NEQ "" ECHO %~1>>nodir.txt
EXIT /B 
```

批处理脚本无法处理 400mb 的文件，所以需要使用 powershell 来完成 o.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:57:42.243

FTR：这种情况`if "%~x1" neq ""`并没有达到您的预期。它不仅会匹配文件夹，还会匹配没有扩展名的文件。

无论如何，在 PowerShell 中你可能会做这样的事情来只列出不是目录的项目：

```
Get-Content \PATH\TO\directory.txt `
  | Get-Item `
  | Where-Object { -not $_.PSIsContainer } `
  | Select-Object FullName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:22:49.667

我不确定我是否理解这个问题（批处理示例显示所有路径），也许这就是你要找的：

```
Get-Content directory.txt | Where-Object {$_ -eq 'C:\path\path\file.ext'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T10:41:44.847

您没有说您是否担心它们是否是有效路径。以下输出到主机的行是有效文件（使用 Test-Path cmdlet 的“-PathType 叶”参数），或者路径中最后一项的最后 4 个字符是一个点，后跟 3 个字母.

```
$Lines = Get-Content C:\Path\to\file.txt

foreach ( $line in $Lines )
{
  if ( (Test-Path $line -PathType leaf) -OR ($line -match "\.\w{3}$") )
  {
    Write-Host $line
  }
} 
```

如果您发现文件扩展名超过 3 个字母，您可以适当更改正则表达式（`"\.\w{3,4}$"`对于 4 个字符扩展名，或`"\.[\w\d]{3,4}$`匹配 3 或 4 个字符长且可能包含数字的扩展名）

单线：

```
Get-Content C:\Path\to\file.txt | % { if ((Test-Path $_ -PathType Leaf) -OR ($_ -match "\.\w{3}$")) { $_ } } 
```

# android - 如何在 Android 中的两个活动之间传递字符串？

> ID：12385265
> 
> 赞同：0
> 
> 时间：2012-09-12T09:37:50.240
> 
> 标签：android, android-activity

在这里，我在我的项目中创建了 2 个活动。

```
public class CheckAvailability extends Activity{

Button but1,but2;
EditText brName;
TextView txt1;
String text;
//private static final String ATM_NO = "atmbrno";
//private static final String ATM_PLACE = "atmbrname";

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.availability);

    brName =(EditText)findViewById(R.id.editText1);
    but1 = (Button)findViewById(R.id.button5); 
    but2 = (Button)findViewById(R.id.button6);

    but1.setOnClickListener(new View.OnClickListener(){

        public void onClick(View v){

            String b_name=brName.getText().toString();

            Intent intent1 = new Intent(); 
            intent1.setClass(getApplicationContext(), ListAtmActivity.class);
            Bundle b = new Bundle();
            b.putString("key", b_name);
            intent1.putExtras(b);
            startActivity(intent1);
            finish();}
});

    but2.setOnClickListener(new View.OnClickListener(){

        public void onClick(View v){
            Intent intent1 = new Intent(); 
            intent1.setClass(getApplicationContext(), SelectOption.class);
            startActivity(intent1);
    }                                                                       });

}
} 
```

我想将 b_name 字符串值传递给另一个活动。这是我的第二个活动。

```
public class ListAtmActivity extends ListActivity{

TextView error;
String brName;

// contacts JSONArray
JSONArray contacts = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list_main);

    Bundle b = getIntent().getExtras();
    brName = b.getString("key");

    error = (TextView)findViewById(R.id.name);
    error.setText(brName);}} 
```

但我无法在我的第二个活动中得到那个字符串？请帮我找出错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:42:46.190

答案比您尝试做的简单：

```
Intent intent = new Intent(this, ListAtmActivity.class);
intent.putExtra("key", b_name);
startActivity(intent); 
```

然后在活动 B 中：

```
Intent intent= getIntent(); // gets the previously created intent
String value = intent.getStringExtra("key"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:41:49.123

```
public void onClick(View v){
        Intent intent1 = new Intent(); 
        intent1.setClass(CheckAvailability.this , ListAtmActivity.class);
        intent1.putExtra("name", b_name );
        startActivity(intent1);
} 
```

然后在第二个活动中：

```
 getIntent().getStringExtra("name"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T09:43:37.650

在活动 1 中：

```
 Intent intent1 = new Intent(); 
        intent1.setClass(getApplicationContext(), ListAtmActivity.class);           
        intent1.putExtra("key", b_name);
        startActivity(intent1);
        finish(); 
```

在活动 2 中：

```
Intent intent = getIntent();
brName = intent.getStringExtra("key"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T09:43:58.060

在您的第一个活动中，

```
 Intent passIntent = new Intent(FirstActivity.this,
                    SecondActivity.class);
            passIntent.putExtra("key", b_name);
            startActivity(passIntent); 
```

在您的 SecondActivity 中，

```
String u_name=getIntent().getExtras().getString("key"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-12T09:44:00.023

您需要使用以下代码`putExtra()`

```
Intent intent=new Intent(this,ListAtmActivity.class);
intent.putExtra("key",b_name);
startActivity(intent) 
```

并在`ListAtmActivity`获取字符串中使用

```
String data;
data=getIntent.getExtras().getString("key"); 
```

现在您在数据变量中发送的值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-30T11:45:54.010

在第一个活动中

```
Intent in=new Intent(first.this,second.class);
in.putExtra("nameOfImage", "firstImage");
startActivity(in); 
```

在第二个活动中

```
Intent intent = getIntent();
String nameOfImage = intent.getStringExtra("nameOfImage"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-12T09:51:02.940

在你的第一个活动中

```
Intent intent = new Intent(context, second.class);
intent.putExtra("string_name", "string");
startActivity(intent); 
```

在你的第二个活动中

```
Bundle bundle = getIntent().getExtras();
extras.getString("string_name") 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-23T06:42:48.130

在您的第二项活动中：

代替：

```
Bundle b = getIntent().getExtras();
brName = b.getString("key"); 
```

和：

```
Intent intentListatmactivity = getIntent(); 
brName = intentListatmactivity.getStringExtra("key"); 
```

# c - C中与数组相关的函数参数的区别

> ID：12385267
> 
> 赞同：0
> 
> 时间：2012-09-12T09:37:55.417
> 
> 标签：c, arrays

我定义了一个数组：

```
float array[3][4][5]; 
```

那么，当

```
array, array[0], array[0][0], &array[0][0][0] 
```

用作函数参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:06:22.300

需要学习的重要一点是，在 C 中，数组不是作为参数整体传递的。而是传递指向数组第一个元素的指针。

所以，给定定义`float array[3][4][5];`...

`array`（作为参数）类型为`float (*)[4][5]`，指向浮点二维数组的指针（说明：我们不能传递数组，我们将指针传递给它的第一个元素，这是一个 4x5 数组，因此`float (*)[4][5]`）。

`array[0]`（作为参数）将是类型`float (*)[5]`，指向浮点数的一维数组的指针（解释：`array[0]`是一个 4x5 数组，我们不能传递数组，我们将指针传递给它的第一个元素，第一个元素是一个由 5 个元素组成的数组，因此`float (*)[5]`)。

`array[0][0]`（作为参数）将是类型`float *`，指向浮点数的指针（解释：`array[0][0]`是一个由 5 个元素组成的数组，我们不能传递数组，我们将指针传递给它的第一个元素，第一个元素是浮点数，因此`float *`)。

`&array[0][0][0]`（作为参数）将是类型`float *`，指向浮点数的指针（解释：`array[0][0][0]`是 a `float`，我们将指针传递给它，因此`float *`）。

也许，一个更详细的例子：

```
#include <stdio.h>

int x[3][5] =
{
  {  1,  2,  3,  4,  5 },
  {  6,  7,  8,  9, 10 },
  { 11, 12, 13, 14, 15 }
};

int (*pArr35)[3][5] = &x;
// &x is a pointer to an array of 3 arrays of 5 ints.

int (*pArr5a)[5] = x;
// x decays from an array of arrays of 5 ints to
// a pointer to an array of 5 ints,
// x is a pointer to an array of 5 ints.

int (*pArr5b)[5] = &x[0];
// &x[0] is a pointer to 0th element of x,
// x[0] is an array of 5 ints,
// &x[0] is a pointer to an array of 5 ints.

int *pInta = x[0];
// x[0] is 0th element of x,
// x[0] is an array of 5 ints,
// x[0] decays from an array of 5 ints to
// a pointer to an int.

int *pIntb = *x;
// x decays from an array of arrays of 5 ints to
// a pointer to an array of 5 ints,
// x is a pointer to an array of 5 ints,
// *x is an array of 5 ints,
// *x decays from an array of 5 ints to
// a pointer to an int.

int *pIntc = &x[0][0];
// x[0][0] is 0th element of x[0],
// where x[0] is an array of 5 ints,
// x[0][0] is an int,
// &x[0][0] is a pointer to an int.

int main(void)
{
  printf("&x=%p x=%p &x[0]=%p x[0]=%p *x=%p &x[0][0]=%p\n",
         pArr35, pArr5a, pArr5b, pInta, pIntb, pIntc);

  return 0;
} 
```

输出（[ideone](http://ideone.com/NDvca)）：

```
&x=0x804a040 x=0x804a040 &x[0]=0x804a040 x[0]=0x804a040 *x=0x804a040 &x[0][0]=0x804a040 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:48:49.990

都是指向同一个位置的。

```
#include <stdio.h>

    int main()
    {

    float array[3][4][5];
    printf("\n Address : %p, \n%p, \n%p, \n%p\n",array, array[0], array[0][0], &array[0][0][0]);
printf("\n Address : %p, \n%p, \n%p, \n%p\n",array+1, array[0]+1, array[0][0]+1, &array[0][0][0] + 1);

    return 0;
    } 
```

给我

```
 Address : 0x7fff51a2cac0, 
0x7fff51a2cac0, 
0x7fff51a2cac0, 
0x7fff51a2cac0

 Address : 0x7fff51a2cb10, 
0x7fff51a2cad4, 
0x7fff51a2cac4, 
0x7fff51a2cac4 
```

主要区别在于我们增加地址时。

```
array + 1       gives array[1][0][0]
array[0] + 1    gives array[0][1][0] 

then both array[0][0]+1 and &array[0][0][0] + 1 will points to array[0][0][1]. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:45:14.167

在这些情况下，您正在传递`float[3][4][5]`, `float[4][5]`,`float[5]`或`float*`，但它们都会在需要时退化`float*`。

请参阅[将数组和数组指针传递给 C 中的函数之间的区别](https://stackoverflow.com/questions/5573310/difference-between-passing-array-and-array-pointer-into-function-in-c)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T09:46:37.367

如果你想将它传递给一个函数没有区别，因为你只能传递指向数组的指针。但是在函数中，您可以将数组的大小作为参数并自己计算适当的成员。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T09:51:33.993

在可访问性方面，

```
array = gives 3 dimensional array
array[0] = gives 2 dimensional array which is in array's 0th index
array[0][0] = gives 1 dimensional array which is in array's (0,0)th index
&array[0][0][0] = gives float * 
```

如果你说`array[0][0][0]`，它只给出一个`float`变量，它是第一位的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T09:52:28.583

如前所述，没有区别。

例如，如果您有一个数组

```
float x[10][10]; 
```

您可以使用两种不同的方式在第一个“行”中引用 3-d 项目：

```
x[1][3] 
```

或者

*(*(x+1) + 3)

# firefox - css3 边框图像 firefox 15.0.1

> ID：12385269
> 
> 赞同：0
> 
> 时间：2012-09-12T09:38:04.280
> 
> 标签：firefox, css

我们有一个可以发布的网络。它使用 css3 边框图像。在以前的 firefox 版本中一切正常，但最后一次更新（firefox 15.0.1）不起作用。

用于检测：

[http://www.w3schools.com/cssref/tryit.asp?filename=trycss3_border-image](http://www.w3schools.com/cssref/tryit.asp?filename=trycss3_border-image)

此示例适用于 Opera、chrome、safari 和旧版本的 firefox。

如何修复这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:54:07.173

你需要设置`border-style: solid`. 它曾经是设置`border-image`覆盖`border-style`设置，但在规范中发生了变化，Firefox 实现也被更改为遵循他的规范。

# javascript - 将 Javascript 日期转换为 ASP.NET 日期格式

> ID：12385271
> 
> 赞同：8
> 
> 时间：2012-09-12T09:38:08.317
> 
> 标签：javascript, asp.net, momentjs

我想将 Javascript 日期格式转换为 ASP.NET 日期格式。

```
2012-09-10 12:00PM to /Date(1347442050050-0700)/ 
```

因为我将它传递回服务器。我从服务器上的请求中获得了 ASP.NET 格式，然后使用 moment.js 将其转换为 Javascript 日期：

```
moment("/Date(1347442050050-0700)/").format("YYYY-MM-DD hh:mmA"); 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T10:46:14.280

我得到了我需要的东西。如果这是某种错误，请发表评论。

```
var test = moment("2012-09-10 12:00PM").valueOf();
var test2 = moment("2012-09-10 12:00PM").format("ZZ");

var test1 = "/Date("+test+test2+")/";

alert( test1 ); // returns /Date(1347206400000+0800)/

var string = moment(test1).format("YYYY-MM-DD hh:mmA");

alert( string );​ // returns 2012-09-10 12:00PM 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T17:12:05.177

您可以将该功能添加到 moment 原型中，使其更便携。

[http://jsfiddle.net/timrwood/qe8pk/](http://jsfiddle.net/timrwood/qe8pk/)

```
moment.fn.toASP = function () {
    return '/Date(' + (+this) + this.format('ZZ') + ')';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T11:32:18.870

如果要将日期发送回 RPC 方法接收 DateTime 对象的 ASP.NET ASMX Web 服务，这可能会有所帮助：[https ://stackoverflow.com/a/12973157/1145963](https://stackoverflow.com/a/12973157/1145963)

# python - 长参数列表和性能

> ID：12385278
> 
> 赞同：2
> 
> 时间：2012-09-12T09:38:26.443
> 
> 标签：python, performance, global

这肯定不是特定于 python 的问题，但我正在寻找特定于 python 的答案——如果有的话。它是关于将具有大量变量的代码块放入函数（或类似的？）中。让我假设这段代码

```
##!/usr/bin/env python
# many variables: built in types, custom made objects, you name it.
# Let n be a 'substantial' number, say 47.
x1 = v1
x2 = v2
...
xn = vn

# several layers of flow control, for brevity only 2 loops
for i1 in range(ri1):
    for i2 in range(ri2):
        y1 = f1(i1,i2)
        y2 = f2(i1,i2)
        # Now, several lines of work

        do_some_work

        # involving HEAVY usage and FREQUENT (say several 10**3 times)
        # access to all of x1,...xn, (and maybe y1,y2)
        # One of the main points is that slowing down access to x1,...,xn
        # will turn into a severe bottleneck for the performance of the code.

# now other things happen. These may or may not involve modification
# of x1,...xn

# some place later in the code, again, several layers of flow control,
# not necessarily identical to the first occur
for j1 in range(rj1):
    y1 = g1(j1)
    y2 = g2(j1)
    # Now, again

    do_some_work  # <---- this is EXACTLY THE SAME code block as above

# a.s.o. 
```

显然，我想将“do_some_work”放入函数之类的东西（或者更好的东西？）。

在 python 中执行此操作的最高效方法是什么

*   没有带有大量令人困惑的参数的函数调用

*   没有性能有损的间接访问 x1,...,xn （例如，通过将它们包装到另一个列表、类或类似物中）

*   在函数 do_some_work(...) 中不使用 x1,...,xn 作为全局变量

我不得不承认，我总是发现自己回到了全球。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:55:53.097

全局变量比局部变量慢得多。

此外，使用大量不同的变量名几乎总是一个坏主意。最好使用单个数据结构，例如字典：

```
d = {"x1": "foo", "x2": "bar", "y1": "baz"} 
```

等等

然后你可以传递`d`给你的函数（这非常快，因为只传递字典的地址，而不是整个字典），并从那里访问它的内容。

```
if d["x2"] = "eggs":
    d["x1"] = "spam" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:20:51.057

一个简单而肮脏（可能不是最佳）的基准：

```
import timeit
def test_no_func():
    (x0,x1,x2,x3,x4,x5,x6,x7,x8,x9,x10,x11,x12,x13,x14,x15,x16,x17,x18,x19) = range(20)
    for i1 in xrange(100):
            for i2 in xrange(100):
                    for i3 in xrange(100):
                            results = [x0+x1+x2+x3+x4+x5+x6 for _ in xrange(100)]
                            results.extend(x7+x8+x9+x10+x11+x12+x13+x14+x15 for _ in xrange(100))
                            results.extend(x16+x17+x18+x19+x0 for _ in xrange(500))
    for j1 in xrange(100):
            for j2 in xrange(100):
                    for i3 in xrange(100):
                            results = [x0+x1+x2+x3+x4+x5+x6 for _ in xrange(100)]
                            results.extend(x7+x8+x9+x10+x11+x12+x13+x14+x15 for _ in xrange(100))
                            results.extend(x16+x17+x18+x19+x0 for _ in xrange(500))

def your_func(x_vars):
    # of the number is not too big you can simply unpack.
    # 150 is a bit too much for unpacking...
    (x0,x1,x2,x3,x4,x5,x6,x7,x8,x9,x10,x11,x12,x13,x14,x15,x16,x17,x18,x19) = x_vars

    results = [x0+x1+x2+x3+x4+x5+x6 for _ in xrange(100)]
    results.extend(x7+x8+x9+x10+x11+x12+x13+x14+x15 for _ in xrange(100))
    results.extend(x16+x17+x18+x19+x0 for _ in xrange(500))
    return results

def test_func():
    (x0,x1,x2,x3,x4,x5,x6,x7,x8,x9,x10,x11,x12,x13,x14,x15,x16,x17,x18,x19) = range(20)
    for i1 in xrange(100):
            for i2 in xrange(100):
                    for i3 in xrange(100):
                            results = your_func(val for key,val in locals().copy().iteritems() if key.startswith('x'))
    for j1 in xrange(100):
            for j2 in xrange(100):
                    for i3 in xrange(100):
                            results = your_func(val for key,val in locals().copy().iteritems() if key.startswith('x'))

print timeit.timeit('test_no_func()', 'from __main__ import test_no_func', number=1)
print timeit.timeit('test_func()', 'from __main__ import test_func, your_func', number=1) 
```

结果：

```
214.810357094
227.490054131 
```

传递参数的速度大约慢了 5%。但也许你不能比这引入 100 万个函数调用做得更好......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:59:51.430

我推荐使用 python cProfile 模块。只需以这种方式运行您的脚本：

```
python -m cProfile your_script.py 
```

在不同的模式下（有和没有函数包装器），看看它的工作速度有多快。我不认为访问变量是一个瓶颈。通常，循环和重复操作都是。

其次，我建议考虑抽象函数，因为您使用 i1、i2 等。

*   那些变量可能需要在列表或字典中，并且
*   循环可以用 itertools 抽象：

    from itertools import product equal_sums = 0 for l in product(range(10), repeat=6): # 而不是 range(10) 上的 6 个嵌套循环 if sum(l[:3]) == sum(l[3: ]): equal_sums += 1

# linux - 如何在没有 'yum' 的情况下在 linux 中安装 LAMP

> ID：12385282
> 
> 赞同：1
> 
> 时间：2012-09-12T09:38:39.803
> 
> 标签：linux, lamp, yum

我需要安装 Pandora FMS 监控工具，为此我需要 Apache、MYSQL 服务器和 Php 以及珍珠 5.8 支持。问题是我们公司没有开放网络访问权限，因此无法使用“yum install”命令。

* * *

any1 可以帮助如何在不使用 yum 的情况下安装所有这些。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:22:18.367

您可以下载源代码并编译它。或者您可以下载预构建的 .rpm 文件，然后将它们传输到机器上

[阿帕奇](http://httpd.apache.org/download.cgi#apache24)

[PHP](http://php.net/downloads.php)

[mysql](http://dev.mysql.com/downloads/mysql/)

请注意，您必须获取所有依赖项，除非您使用 YUM，否则这会很糟糕。

# java - 如何从 Java 中的 HashMap 中选择一个随机键？

> ID：12385284
> 
> 赞同：28
> 
> 时间：2012-09-12T09:38:42.713
> 
> 标签：java, random, hashmap

我正在使用一个大`ArrayList<HashMap<A,B>>`的 ，我会反复需要从随机 HashMap 中选择一个随机键（并用它做一些事情）。选择随机 HashMap 很简单，但是我应该如何从这个 HashMap 中选择一个随机键呢？

速度很重要（因为我需要这样做 10000 次并且哈希图很大），所以只是在 [0,9999] 中选择一个随机数 k，然后`.next()`在迭代器上执行 k 次，这真的不是一个选择。**同样，在每次随机选择时将 HashMap 转换为数组或 ArrayList 确实不是一种选择。**请在回复之前阅读此内容。

从技术上讲，我觉得这应该是可能的，因为 HashMap 将其键存储在`Entry[]`内部，并且从数组中随机选择很容易，但我不知道如何访问它`Entry[]`。因此，任何访问内部的想法`Entry[]`都非常受欢迎。当然也欢迎其他解决方案（只要它们不消耗散列图大小的线性时间）。

**注意：**启发式方法很好，所以如果有一种方法可以排除 1% 的元素（例如，由于多个填充的桶），那根本没有问题。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-12T09:44:39.217

从我的头顶

```
List<A> keysAsArray = new ArrayList<A>(map.keySet())
Random r = new Random() 
```

那么就

```
map.get(keysAsArray.get(r.nextInt(keysAsArray.size())) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-12T10:58:26.107

我设法找到了一个没有性能损失的解决方案。我会把它贴在这里，因为它可能会帮助其他人——并且可能会回答关于这个主题的几个未解决的问题（我稍后会搜索这些问题）。

您需要的是第二个类似自定义`Set`的数据结构来存储密钥——而不是这里建议的列表。类似列表的数据结构要从中删除项目的成本很高。所需的操作是在恒定时间内添加/删除元素（以使其与 HashMap 保持同步）以及选择随机元素的过程。下面的课程`MySet`正是这样做的

```
class MySet<A> {
     ArrayList<A> contents = new ArrayList();
     HashMap<A,Integer> indices = new HashMap<A,Integer>();
     Random R = new Random();

     //selects random element in constant time
     A randomKey() {
         return contents.get(R.nextInt(contents.size()));
     }

     //adds new element in constant time
     void add(A a) {
         indices.put(a,contents.size());
         contents.add(a);
     }

     //removes element in constant time
     void remove(A a) {
        int index = indices.get(a);
        contents.set(index,contents.get(contents.size()-1));
        indices.put(contents.get(index),index);
        contents.remove((int)(contents.size()-1));
        indices.remove(a);
     }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-12T10:36:25.343

您需要访问基础条目表。

```
// defined staticly
Field table = HashMap.class.getDeclaredField("table");
table.setAccessible(true);
Random rand = new Random();

public Entry randomEntry(HashMap map) {
    Entry[] entries = (Entry[]) table.get(map);
    int start = rand.nextInt(entries.length);
    for(int i=0;i<entries.length;i++) {
       int idx = (start + i) % entries.length;
       Entry entry = entries[idx];
       if (entry != null) return entry;
    }
    return null;
} 
```

这仍然必须遍历条目以找到其中的条目，因此最坏的情况是 O(n)，但典型的行为是 O(1)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-12T09:42:02.927

听起来您应该考虑将辅助键列表或真实对象（而不是地图）存储在您的列表中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-04-29T03:25:59.883

正如@Alberto Di Gioacchino 指出的那样，在接受的解决方案中存在一个带有删除操作的错误。这就是我修复它的方法。

```
class MySet<A> {
     ArrayList<A> contents = new ArrayList();
     HashMap<A,Integer> indices = new HashMap<A,Integer>();
     Random R = new Random();

     //selects random element in constant time
     A randomKey() {
         return contents.get(R.nextInt(contents.size()));
     }

     //adds new element in constant time
     void add(A item) {
         indices.put(item,contents.size());
         contents.add(item);
     }

     //removes element in constant time
     void remove(A item) {
        int index = indices.get(item);
        contents.set(index,contents.get(contents.size()-1));
        indices.put(contents.get(index),index);
        contents.remove(contents.size()-1);
        indices.remove(item);
     }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-12T09:58:42.610

我假设您正在使用`HashMap`，因为您需要在以后查找一些东西？

如果不是这种情况，那么只需将您的更改`HashMap`为`Array`/ `ArrayList`。

如果是这种情况，为什么不将您的对象存储在`Map`AND an中，`ArrayList`以便您可以随机或按键查找。

或者，您可以使用 a`TreeMap`而不是`HashMap`吗？我不知道您的密钥是什么类型，但您`TreeMap.floorKey()`与一些密钥随机器一起使用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-12T10:21:40.797

花了一些时间后，我得出的结论是，您需要创建一个可以由 a`List<Map<A, B>>`和 a支持的模型`List<A>`来维护您的密钥。您需要保留`List<Map<A, B>>`and的访问权限`List<A>`，只需向调用者提供操作/方法即可。通过这种方式，您将拥有对实现的完全控制权，并且实际对象将更安全地免受外部更改的影响。

顺便说一句，你的问题引导我，

*   [为什么 java.util.Set<V> 接口不提供 get(Object o) 方法？](https://stackoverflow.com/questions/861296/why-does-the-java-util-setv-interface-not-provide-a-getobject-o-method)， 和
*   [Bimap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/BiMap.html)：我试图变得聪明，但当然，它的`values()`方法也返回`Set`。

这个示例[IndexedSet](http://www.java2s.com/Code/Java/Collections-Data-Structure/IndexedSet.htm)可以让您了解操作方法。

**[编辑]**

如果您决定创建自己的模型，[此类 SetUniqueList可能会对您有所帮助。](https://commons.apache.org/collections/apidocs/org/apache/commons/collections/list/SetUniqueList.html)它明确声明它包装了`list`，而不是副本。所以，我认为，我们可以做类似的事情，

```
List<A> list = new ArrayList(map.keySet());
SetUniqueList unikList = new SetUniqueList(list, map.keySet);
// Now unikList should reflect all the changes to the map keys
...
// Then you can do
unikList.get(i); 
```

**注意：** *我自己没有尝试过。稍后会这样做（急于回家）。*

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-02-26T20:15:21.167

从 Java 8 开始，有一种 O(log(N)) 方法和 O(log(N)) 额外内存：创建一个`Spliterator`via `map.entrySet().spliterator()`，进行 log(map.size())`trySplit()`调用并随机选择前半部分或后半部分. 当 a 中剩下的元素少于 10 个时`Spliterator`，将它们转储到列表中并随机选择。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-12T19:54:50.163

在 Map 的另一个实现中包装 HashMap 怎么样？另一张地图维护一个列表，在 put() 上它会：

```
if (inner.put(key, value) == null) listOfKeys.add(key); 
```

（我假设值的空值是不允许的，如果它们使用 containsKey，但这会更慢）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-12T10:40:01.773

如果绝对需要访问 HashMap 中的 Entry 数组，可以使用反射。但是你的程序将依赖于 HashMap 的具体实现。

正如建议的那样，您可以为每个地图保留一个单独的键列表。您不会保留密钥的深层副本，因此实际的内存非规范化不会那么大。

第三种方法是实现您自己的 Map 实现，将键保存在列表中而不是集合中。

# javascript - 将格式化的纯文本转换为 HTML

> ID：12385285
> 
> 赞同：4
> 
> 时间：2012-09-12T09:38:45.823
> 
> 标签：javascript, jquery, html

我有一堆像这样格式化的数据，在预标签中显示得很好：

```
1: Here's my first row, and it is
   quite long...
   and can span over several rows.
2: This is the second row. 
```

但是，我想对其进行一些控制，并可能将其转换为 html：

```
<ol>
    <li>Here's my first row, and it is<br/>quite long...<br/>and can span over several rows.</li>
    <li>This is the second row</li>
</ol> 
```

我似乎无法在线找到 pre-to-html-converter。我该怎么办？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:46:45.203

将文本文件转换为 HTML 的常用工具是[Markdown](http://en.wikipedia.org/wiki/Markdown)和[Textile](http://en.wikipedia.org/wiki/Textile_%28markup_language%29)。每个都有许多实现（维基百科列出[了 Markdown 的 8 个 JS 实现](http://en.wikipedia.org/wiki/List_of_Markdown_implementations)）。

我怀疑要么开箱即用，适合您拥有的特定文本，但它们的源代码应该是一个合理的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:43:13.787

[尝试一个像 SO 使用](http://daringfireball.net/projects/markdown/)的 Wiki 标记引擎。

# scala - 我怎样才能让 scalac 告诉我是否有未使用的变量？

> ID：12385293
> 
> 赞同：12
> 
> 时间：2012-09-12T09:39:14.460
> 
> 标签：scala, lint

我刚刚注意到我的代码中有一个错误，我在其中创建了一个新变量，但随后未能实际使用它。

我认为 scalac 会告诉我我的新变量未使用，但事实并非如此，在少量谷歌搜索/手册页之后，我找不到任何关于启用警告的信息。

我该怎么做才能启用此类警告？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T10:50:55.007

[这个东西刚刚在 scala 用户邮件列表上讨论过。](https://groups.google.com/forum/?fromgroups=#!topic/scala-user/1Oox9vPj90Q)

讨论结果：IDE 的考虑任务是这样做（到目前为止，他们没有或至少不是很详尽）

主要论点似乎是 scala 编译器已经因速度慢而受到批评，因此在顶部添加更多内容可能不是一个好主意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-03T16:20:07.217

从 scalac 2.12 开始，您现在可以使用`-Ywarn-unused:locals`. 如果您不仅仅指局部变量，还有其他选项：

```
$ scalac -Ywarn-unused:help
Enable or disable specific `unused' warnings
  imports    Warn if an import selector is not referenced.
  patvars    Warn if a variable bound in a pattern is unused.
  privates   Warn if a private member is unused.
  locals     Warn if a local definition is unused.
  explicits  Warn if an explicit parameter is unused.
  implicits  Warn if an implicit parameter is unused.
  params     Enable -Ywarn-unused:explicits,implicits.
  linted     -Xlint:unused.
Default: All choices are enabled by default. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-10T16:22:58.727

编译器现在可以警告您未使用的私有变量，因为[d0c4be6861](https://github.com/scala/scala/commit/d0c4be6861)。这是下`-Xlint`。请参阅相关[错误报告](https://issues.scala-lang.org/browse/SI-440)中的讨论。如果提及`-Xlint`不熟悉，答案在`scalac`手册页中。

# sql-server - mssql 2008 - 使用 select into 创建存储过程

> ID：12385303
> 
> 赞同：0
> 
> 时间：2012-09-12T09:39:43.527
> 
> 标签：sql-server, sql-server-2008

我是 Mssql 2008 的新手。在 Oracle 中，当我尝试根据另一个表中的值创建存储产品时，我可以使用类似的东西；

```
Select username into temp_value from logintbl; 
```

然后我将其插入`temp_value`我的桌子。我如何在 MSSQL 中实现这一点？非常感谢任何评论、参考或建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:41:40.577

尝试：

```
DECLARE @Username nvarchar(100)
SELECT @Username = username FROM logintbl

INSERT INTO table1 (usernames)
VALUES (@username) 
```

# java - 如何强制TestNG在类中运行所有方法而不以并行模式切换到另一个线程

> ID：12385304
> 
> 赞同：0
> 
> 时间：2012-09-12T09:39:44.363
> 
> 标签：java, selenium, webdriver, testng

我有以下套件 xml 用于使用 Webdriver 运行 UI 测试：

```
 <suite name="test suite" verbose="3" parallel="classes" thread-count="2">

<test name="extended_smoke_test_suite">
    <listeners>
        <listener
            ...
        </listener>
    </listeners>   
    <groups>
        <run>
            <include name="somegroup1" />
            <include name="somegroup2" />
        </run>
    </groups>
    <packages>
           <package name="tests.*" ></package>
    </packages>
</test> 
```

当我运行这个套件时，它会启动几个浏览器（超过 2 个），我可以观察到它只适用于其中两个。看起来它启动了一些测试类（TestClass1），执行一个测试方法，然后切换到另一个类（TestClass2）。在 TestClass2 中完成测试方法后，它返回到 TestClass1 并继续它因为我有很多测试类，这导致多个打开的浏览器。

有没有办法“说”TestNG 来执行来自 TestClass1 的所有测试，并且只有在切换到下一个之后，所以我们目前只有两个打开和活动的浏览器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T20:41:44.843

您已设置 TestNG 配置以并行运行测试：

```
<suite name="test suite" verbose="3" parallel="classes" thread-count="2"> 
```

如果您只有两个类：TestClass1 和 TestClass2，那么 TestNG 将创建 2 个线程，并在一个线程中从 TestClass1 调用测试，在另一个线程中调用 TestClass2。

如果您希望 TestClass2 在 TestClass1 之后运行，您有几个选择：

1.使类TestClass2依赖于TestClass1。这里有多个选项，所以只需参考 TestNG 文档的[Dependcies](http://testng.org/doc/documentation-main.html#dependent-methods)部分。

2.设置`thread-count="1"`和`parallel="false"`（或删除并行属性）。还要确保您没有`preserve-order="false"`并将您的 TestClass2 放在 xml 中的 TestClass1 之后。

```
<test name="extended_smoke_test_suite">
    <classes>
        <class name="test.TestClass1"/>
        <class name="test.TestClass2"/>
    </classes>
</test> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:35:39.473

在我看来，要解决这个问题，你应该在 maven surefire 插件方向进行调查。目前我用它来排除我的构建测试套件。

我本地模块中的 pom.xml

```
 <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.11</version>
                <dependencies>
                    <dependency>
                        <groupId>org.apache.maven.surefire</groupId>
                        <artifactId>surefire-junit47</artifactId>
                        <version>2.12</version>
                    </dependency>
                </dependencies>
                <configuration>
                    <!--<includes>-->
                        <!--<include>**/*.class</include>-->
                    <!--</includes>-->
                    <excludedGroups>com.exadel.rms.selenium.SeleniumTests</excludedGroups>

                </configuration>
            </plugin> 
```

我注释我的测试类以排除

```
 @Category(SeleniumTests.class)
    public class HomePageTestSuite extends BaseSeleniumTest {
............ 
```

您可以在图片上看到整个结构： ![在此处输入图像描述](../Images/1086b9e8012e5ab5677efc99594ee036.png)

[其实你可以在这里](http://johndobie.blogspot.com/2012/04/unit-and-integration-tests-with-maven.html)得到一些有用的信息

也看看这个话题。Prolly 它也很有用：[JUnit：可以（应该）这样做吗？](https://stackoverflow.com/questions/12335034/junit-can-should-this-be-done)

希望这对你有帮助）

# android - WebView Facebook 授权

> ID：12385310
> 
> 赞同：1
> 
> 时间：2012-09-12T09:40:06.963
> 
> 标签：android, facebook, authorization, android-webview

在我的应用程序中，我需要通过 facebook 添加日志记录。为此，我在服务器上获得了一个页面，该页面将我重定向到 facebook 登录页面，我在其中输入用户凭据，然后它返回到我的页面并返回身份验证数据。我想要做的是在我的应用程序中打开一个 webview，打开我的页面（重定向到 facebook），登录后它返回一些令牌，我需要关闭 webview，从中获取数据并在我的应用程序中继续。但我做不到。谁能给我一些此类授权机制示例的链接？以及如何从 webview 获取数据？

# wcf - 在 WCF 中保护和签名消息

> ID：12385311
> 
> 赞同：1
> 
> 时间：2012-09-12T09:40:13.337
> 
> 标签：wcf, wcf-security, x509certificate, digital-signature

我是这个奇妙网站的新成员，这是我在这里的第一个问题.. 我希望我能找到解决方案..

我正在建立一个网站，我需要保护客户端和服务器之间的通信。

我应该在实现中使用 WCF。

我的项目要求：

*   使用 WCF
*   绑定：ws2007HttpBinding
*   安全性：HTTPS
*   客户：签

我应该使用 HTTPS 来保护通信，并且我应该让客户端签署消息（这很重要）。

我在服务器和客户端中都安装了证书但我不知道如何让客户端签署消息。

我无法在 wcf 中使用消息安全性，因为我需要 HTTPS。任何人都可以帮助我了解 TransportWithMessageCredential 对签名的作用以及如何实现这样的事情？

这是服务器的 app.config 的一部分：

```
<bindings>
    <ws2007HttpBinding>
        <binding name="ServiceWS2007HttpBindingConfg">
            <security mode="TransportWithMessageCredential">
                <transport clientCredentialType="None" />
                <message clientCredentialType="Certificate" negotiateServiceCredential="false" />
            </security>
        </binding>
    </ws2007HttpBinding>
</bindings>
<services>
    <service name="Service">
        <endpoint address="https://MAHER-PC/EBPP/Service.svc" binding="ws2007HttpBinding"
         bindingConfiguration="ServiceWS2007HttpBindingConfg" contract="IService" />
    </service>
</services> 
```

谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T00:54:22.850

看你打算签什么。

一个好的起点是查看在服务合同中为您的服务设置 ProtectionLevel。

信息：

[http://msdn.microsoft.com/en-gb/library/aa347692.aspx](http://msdn.microsoft.com/en-gb/library/aa347692.aspx)

如何：

[http://msdn.microsoft.com/en-gb/library/aa347791.aspx](http://msdn.microsoft.com/en-gb/library/aa347791.aspx)

# android - 将字符串结果发送到网站

> ID：12385317
> 
> 赞同：1
> 
> 时间：2012-09-12T09:40:25.180
> 
> 标签：android

我对 Android Dev 还很陌生，我被困在我的应用程序的最后一部分。我制作了一个条码扫描应用程序（感谢 Zxing），并想在网站上搜索结果。

例如，如果我想在 www.trademe.co.nz 上搜索我的结果，我该怎么做？

到目前为止，我已经获得了字符串并打开了浏览器，但我只是不知道如何将文本导入正确的文本框并进行搜索。

我的代码的 web 部分。

```
private void openBrowser(String contents, String format) {
        Intent i = new Intent(Intent.ACTION_VIEW, 
                Uri.parse("http://www.trademe.co.nz"));
        startActivity(i);       

} 
```

对不起，如果我做错了什么，这是我的第一篇文章！

感谢您提供任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:44:54.170

使用 httpPost 方法将您的字符串发布到 url。

[在这里](http://developer.android.com/reference/org/apache/http/client/methods/HttpPost.html)检查

[另请参见此处](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient) 的简单示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:46:06.133

试试这个（如果我的答案解决了您的问题，请将其标记为答案）

```
private void openBrowser(String contents, String format) {
String url = "http://www.trademe.co.nz/Browse/SearchResults.aspx?searchType=all&searchString=%s&rptpath=all&type=Search&generalSearch_keypresses=5&generalSearch_suggested=0";

try
    {
        your_keyword = URLEncoder.encode(your_keyword, "UTF-8")); //encode keyword
    }
    catch (UnsupportedEncodingException e)
    {          
        e.printStackTrace();
    }     

    url = String.format(url, your_keyword);
    Intent i = new Intent(Intent.ACTION_VIEW, 
            Uri.parse(url));
    startActivity(i); 
```

}

# css - 无法点击表单输入

> ID：12385320
> 
> 赞同：1
> 
> 时间：2012-09-12T09:40:34.873
> 
> 标签：css, forms, twitter-bootstrap, click

我的表格有问题。我无法点击任何输入文本或某些复选框。可以通过单击 Tab 来选择它们，然后可以写一些东西。

我正在使用 Twitter Bootstrap，但我不知道是 bootstrap 还是其他问题。

这就是我的表格的样子

```
 <div class="well section" id="EventInfo">
                <h1>1\. Event info</h1>
                    <div class="row">
                        <div class="span1"><label for="name" class="label-padding">Name</label></div>
                        <div class="span6">
                            @inputText(
                                configuratorForm("name"), 
                                '_label -> "",
                                '_error -> "Please enter valid name",
                                'class -> "span6"
                            )
                        </div>
                     </div>

                 <div class="row">
                    <div class="span1"><label for="name">Description</label></div>
                    <div class="span6">
                        @textarea(
                            configuratorForm("description"),
                            '_label -> "",
                            'cols -> 50,
                            'class -> "span6"
                        )
                    </div>
                 </div>

                 <div class="row">
                    <div class="span1"><label for="date" class="label-padding">Date</label></div>
                    <div class="span1">
                        <label for="fromDate" class="label-padding">From</label>
                    </div>
                    <div class="span2">
                        @inputText(
                            configuratorForm("fromDate"),
                            '_label -> "",
                            '_error -> "Please enter valid date",
                            'placeholder -> "From",
                            'class -> "span2"
                        )
                    </div>
                    <div class="span1">
                        <label for="toDate" class="label-padding">To</label>
                    </div>
                    <div class="span2">             
                         @inputText(
                            configuratorForm("toDate"),
                            '_label -> "",
                            '_error -> "Please enter valid date",
                            'placeholder -> "To",
                            'class -> "span2"
                        )
                    </div>
                 </div>

                <div class="row url-row">
                    <div class="span1"><label for="webUrl" class="label-padding">URL</label></div>
                    <div class="span6">
                        @inputText(
                            configuratorForm("webUrl"), 
                            '_label -> "",
                            'class -> "span6"
                        )              
                    </div>
                 </div>

                <div class="row">
                      <div class="span1"><label for="address">Address</label></div>  
                      <div class="span6"> 
                        <div class="row">
                            <div class="span1"><label for="street">Street</label></div>  
                            <div class="span5">
                                    <div class="clearfix ">                                         
                                        <div class="input">                                             
                                        <input class="span5" type="text" id="street" name="street" value="" onChange="googleGeocode()">                                     
                                            <span class="help-inline"></span> 
                                        </div>
                                    </div>
                            </div>     
                        </div>     
                        <div class="row">
                            <div class="span1"><label for="street">City</label></div>  
                            <div class="span5">
                                    <div class="clearfix ">  
                                            <div class="input">                                             
                                            <input class="span5" type="text" id="city" name="city" value="" onChange="googleGeocode()">
                                                <span class="help-inline"></span> 
                                            </div>
                                    </div>
                            </div>     
                        </div>
                        <div class="row">
                            <div class="span1"><label for="street">Country</label></div>  
                            <div class="span5">
                                    <div class="clearfix ">  
                                            <div class="input">                                             
                                                 <input class="span5" type="text" id="country" name="country" value="" onChange="googleGeocode()">

                                            <span class="help-inline"></span> 
                                            </div>
                                    </div>
                            </div>     
                        </div>               
                    </div> 
                 </div>

                 <div class="row">
                    <div class="span1"><label for="gps" class="label-padding">GPS</label></div>
                    <div class="span1">
                        <label for="latitude" class="label-padding">Latitude</label>    
                    </div>
                    <div class="span2">
                         @inputText(
                            configuratorForm("latitude"), 
                            '_label -> "",
                            'class -> "span2"
                        )
                    </div>
                    <div class="span1">
                        <label for="longitude" class="label-padding">Longitude</label>
                    </div>
                    <div class="span2">
                           @inputText(
                                configuratorForm("longitude"), 
                                '_label -> "",
                                'class -> "span2"
                            )

                    </div>
                 </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T18:12:58.910

所以我找到了解决方案。这是CSS问题。我包装这个表格的容器有`z-index: -1`。当我`removed`这样做时，一切都变得正常了。

# php - 将图像转换为 pdf php

> ID：12385325
> 
> 赞同：1
> 
> 时间：2012-09-12T09:40:59.657
> 
> 标签：php, image, pdf

我正在使用[csxi](http://www.chestysoft.com/ximage/twainupload.asp)将文档网扫描为图像，但我必须将 pdf 文件上传到服务器。如何在 php 中将图像转换为 PDF？或者有没有办法让csxi扫描文档作为PDF而不是图像

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-11-17T11:31:31.800

如果你的机器上安装了 ImageMagick，你可以使用[PHP 的 ImageMagick 绑定](http://php.net/manual/en/book.imagick.php)来执行一些简单的 PHP 代码来完成这个任务：

```
$im=new Imagick('my.png');
$im->setImageFormat('pdf');
$im->writeImage('my.pdf'); 
```

或者，如果您没有可用的 ImageMagick，您可以使用商业 API，例如[Zamzar](https://developers.zamzar.com/)，它支持通过 PHP 将图像转换为 PDF（[文档中的](https://developers.zamzar.com/docs#section-Start_a_conversion_job)更多信息）。

使用它的代码是：

```
<?php
// Build request
$endpoint = "https://api.zamzar.com/v1/jobs";
$apiKey = "YOUR_API_KEY";
$sourceFilePath = "my.png";
$targetFormat = "pdf";

$sourceFile = curl_file_create($sourceFilePath);    
$postData = array(
  "source_file" => $sourceFile,
  "target_format" => $targetFormat
);

// Send request
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $endpoint);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'POST');
curl_setopt($ch, CURLOPT_POSTFIELDS, $postData);
curl_setopt($ch, CURLOPT_SAFE_UPLOAD, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERPWD, $apiKey . ":");
$body = curl_exec($ch);
curl_close($ch);

// Process response (with link to converted files)
$response = json_decode($body, true);
print_r($response);
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T09:42:37.163

将您的图像包裹在里面`HTML`并使用`HTML to PDF converter`类似`fpdf`或`mpdf`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-27T12:04:22.983

您可以使用 convertapi 服务，易于安装：

```
作曲家需要 convertapi/convertapi-php
```

```
require_once('vendor/autoload.php');

use \ConvertApi\ConvertApi;

//get api key: https://www.convertapi.com/a/si
ConvertApi::setApiSecret('xxx');

$result = ConvertApi::convert('pdf', ['File' => '/dir/test.png']);

# save to file
$result->getFile()->save('/dir/file.pdf'); 
```

转换多个文件和其他选项检查[https://github.com/ConvertAPI/convertapi-php](https://github.com/ConvertAPI/convertapi-php)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-10-11T17:15:22.630

对于几张图片，使用 Chrome 网络浏览器手动轻松地完成。您将不需要互联网连接。

1.  将以下带有`.html`扩展名的内容保存在图像的同一文件夹中：

> ```
> <html>
>  <body>
>  <img src="image.jpg" width="100%">
> </body>
> </html> 
> ```

2.  用谷歌浏览器打开 html 文件，
3.  Crtl + P，打开打印对话框
4.  选择另存为 PDF，将其保存在本地
5.  或者，您可以通过 Google 云打印将副本发送到您的智能手机

# iphone - 查找字符串中字符的索引

> ID：12385331
> 
> 赞同：12
> 
> 时间：2012-09-12T09:41:22.253
> 
> 标签：iphone, objective-c, ios, nsstring

我有一个字符串`NSString *Original=@"88) 12-sep-2012";`或`Original=@"8) blablabla";`

我只想打印“）”之前的字符，所以如何找到字符“）”的索引。或者我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-12T09:45:18.393

要打印第一个右括号之前的字符，您可以这样做：

```
NSString *str = [[yourString componentsSeparatedByString:@")"] objectAtIndex:0];
NSLog(@"%@", str);

// If you need the character index:
NSUInteger index = str.length; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-12T09:49:31.360

你可以像这样找到字符“）”的索引：

```
NSString *Original=@"88) 12-sep-2012";
NSRange range = [Original rangeOfString:@")"];
if(range.location != NSNotFound)
{
 NSString *result = [Original substringWithRange:NSMakeRange(0, range.location)];
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-12T09:44:29.970

您可以使用以下代码查看**“）”之前的字符**

```
 // this would split the string into values which would be stored in an array
   NSArray *splitStringArray = [yourString componentsSeparatedByString:@")"];
   // this would display the characters before the character ")"
   NSLog(@"%@", [splitStringArray objectAtIndex:0]); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-12T09:47:17.707

```
NSUInteger index = [Original rangeOfString:@")"];

NSString *result = [Original substringWithRange:NSMakeRange(0, index)]; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-12T10:32:01.280

尝试以下代码以获取字符串中特定字符的索引：-

```
NSString *string = @"88) 12-sep-2012";
NSCharacterSet *charSet = [NSCharacterSet characterSetWithCharactersInString:@")"];
NSRange range = [string rangeOfCharacterFromSet:charSet];

if (range.location == NSNotFound) 
{
    // ... oops
}
else {
    NSLog(@"---%d", range.location);
    // range.location is the index of character )
} 
```

并在 ) 字符之前获取字符串，请使用以下命令：-

```
NSString *str = [[string componentsSeparatedByString:@")"] objectAtIndex:0]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-12T09:49:39.350

另一个解决方案：

```
NSString *Original=@"88) 12-sep-2012";
NSRange range = [Original rangeOfString:@")"];
NSString *result = Original;

if (range.location != NSNotFound)
{
    result = [Original substringToIndex:range.location];
}

NSLog(@"Result: %@", result); 
```

# python - AttributeError：“NoneType”对象没有属性“userName”

> ID：12385341
> 
> 赞同：0
> 
> 时间：2012-09-12T09:42:02.880
> 
> 标签：python, gql

```
reqUser =  friends.UserFriends.gql("where udid =:1", str(udid) ).get()
reqUserName = reqUser.userName 
```

这是我的代码我想知道如何处理这个错误，这个错误出现在第 2 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:48:27.613

你可以使用 python 的 try/except 对。

```
reqUser =  friends.UserFriends.gql("where udid =:1", str(udid) ).get()
try:
    reqUserName = reqUser.userName
except AttributeError:
    reqUserName = "No username found!" 
```

这仅捕获 AttributeError 异常，因此仍会引发其他任何异常。

# seam - excelExporter非法导航缝

> ID：12385342
> 
> 赞同：1
> 
> 时间：2012-09-12T09:42:04.533
> 
> 标签：seam

我有一个 Rich:dataTable，我想用 excelExporter seam 组件导出它。它适用于没有定义页面流的页面。但是当我有一个 pageFlow(jpdl) 时，我会得到非法导航。我想这是因为导出器为用户进行了重定向，以便能够下载 excel 文件。如何定义规则或其他内容以允许导出器进行重定向以便下载文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:50:41.100

问题`ExcelExporter`在于它与文档存储的耦合过于紧密，它总是会生成到文档存储的重定向以获取生成的文件。没有解决方法。PDF 生成也是如此。

因此，您需要在页面流中考虑该重定向，但即使这样做，您也需要在下载 excel 后考虑离开文档存储的导航，否则页面流会将您重新定位回文档存储（一次又一次地触发下载）。[https://community.jboss.org/thread/185716](https://community.jboss.org/thread/185716)中描述了这样做的一个技巧（基本上，您创建一个虚假的值表达式，一旦您呈现 excel 工作表，它就会重新定位前一页中的页面流）。

可能的解决方法：

1.  在单独的弹出窗口或`<iframe/>`有效页面流页面中执行下载
2.  通过 javascript/flash 导出 excel 工作表

# jquery - jQuery 根据单元格内容显示/隐藏表格行

> ID：12385343
> 
> 赞同：0
> 
> 时间：2012-09-12T09:42:06.363
> 
> 标签：jquery, html-table, jquery-selectors

我正在尝试制作一些基于第 4 个单元格的内容显示/隐藏数据表中的行的 Javascript。

表如下：

```
DATE | DESCRIPTION | PRICE | PHONE |  STATUS  |
-----------------------------------------------
xxx  | yyyyyyyyyyy | 3243  | 32553 | Finished |
xxx  | yyyyyyyyyyy | 3243  | 32553 | Suspeded |
xxx  | yyyyyyyyyyy | 3243  | 32553 | Active   |
xxx  | yyyyyyyyyyy | 3243  | 32553 | Finished | 
```

我在下拉列表的 onChange 函数上有以下代码：

```
function refinesearch() {
    $(".data tr").hide(); //hide all rows
    var refine = $("#refine1").val(); //retrieve wanted status

    if(refine=="All") {
        $(".data tr").show(); //show all rows if want to see All
    } else {

        $(".data tr").each(function() { //loop over each row

             if($("td:eq(4)").text() == refine) { //check value of TD
                 $(this).show(); //show the row 

             }

        });

    }
} 
```

基本上，下拉菜单有不同的状态，如果他们选择了，例如完成，只有状态为完成的行应该显示，所有其他的都隐藏。

但它似乎无法正常工作。当我选择 All it works 并且当我选择 Finished 时，它会出于某种原因将它们全部显示出来！选择任何其他值会隐藏所有行！:S - 有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T09:52:39.787

在您的循环`$("td:eq(4)")`中选择整个页面中的表格单元格（不仅是循环中的行）。

你仍然可以这样做：

```
$(".data tr").toggle(function() {
  返回细化==“全部”|| $("td:eq(4)", this).text() == 细化；
})

```

而不是你的整个`if`/ `else`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:45:55.173

尝试使用 find() 方法将您的条件限制为当前行（您的条件是在每个循环中选择表中的所有行）：

```
function refinesearch() {
    $(".data tr").hide(); //hide all rows
    var refine = $("#refine1").val(); //retrieve wanted status

    if(refine=="All") {
        $(".data tr").show(); //show all rows if want to see All
    } else {

        $(".data tr").each(function() { //loop over each row

             if($(this).find("td:eq(4)").text() == refine) { //check value of TD
                 $(this).show(); //show the row 

             }

        });

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-18T21:34:04.033

```
 $(".newgrid tbody tr td:nth-child(5)").each(function () {

                    var found = false;
                    for (i = 0; i < selected.length && !found; i++) {
                        if ($(this).text().toLowerCase().indexOf(selected[i].toLowerCase()) >= 0) {
                            found = true;
                        }
                    }
                    if (!found)
                        $(this).parent().hide();
                    else
                        $(this).parent().show();

                }); 
```

这会成功的。selected 是一个数组，其中包含您要检查的可能 td 值。如果它只是一个字符串，你可以替换数组 for 循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T09:52:52.470

在每一行的循环中，您错过`$(this)`了引用当前元素。
然后，使用 find() 过滤选择
`$(this).find("td:eq(4)").text() == refine`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T10:33:04.883

回答我自己的问题 - 感谢保罗的帮助！

```
function refinesearch() {

    var count = 1;
    $(".data tr").hide(); //hide all rows
    $(".data tr:first").show();
    $(".data tr:nth-child(2)").show();

    var refine = $("#refine1").val(); //retrieve wanted status
    if(refine=="All") {
        $(".data tr").show(); //show all rows if want to see All
    } else {

        $(".data tr").each(function() { //loop over each row

            if($(this).find("td:eq(4)").text() == refine) { //check value of TD

                $(this).find("td").css({"background": "#fff", "border-right" : "none"});
                $(this).show(); //show the row 

            }

        });

        $(".data tr:visible").each(function() { //loop over each row

            if(isEven(count)) {
                $(this).find("td").css({"background" : "#D4EDF9", "border-right" : "3px solid #D4EDF9" });
            }

            count++;

        });
    }
} 
```

# ruby-on-rails - 如何在 Rails 中发送简单的 json 响应？

> ID：12385345
> 
> 赞同：38
> 
> 时间：2012-09-12T09:42:18.787
> 
> 标签：ruby-on-rails, json

我需要发送 json 响应取决于用户在输入中输入的数据，但我无法发送简单的 json 请求。

我关注了这篇文章 - [http://paydrotalks.com/posts/45-standard-json-response-for-rails-and-jquery](http://paydrotalks.com/posts/45-standard-json-response-for-rails-and-jquery)。

添加了 MimeType：

```
Mime::Type.register_alias "application/json", :jsonr, %w( text/x-json ) 
```

在我的控制器中：

```
 def checkname
  respond_to do |format|
    format.jsonr do
      render :json => { 
         :status => :ok, 
         :message => "Success!",
         :html => "<b>congrats</b>"
      }.to_json
     end  
  end
end 
```

但是屏幕是空的，这是来自 fiddler2 的响应代码，当我对此操作进行 GET 响应时：

```
 HTTP/1.1 406 Not Acceptable
   Content-Type: text/html; charset=utf-8
   X-UA-Compatible: IE=Edge
   Cache-Control: no-cache
   X-Request-Id: 14a8467908d9ce322d054607efdacf92
   X-Runtime: 0.011000
   Content-Length: 1
   Connection: keep-alive
  Server: thin 1.4.1 codename Chromeo 
```

**我做错了什么？**

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-12T09:59:42.710

不确定如何处理自定义 MIME，但对于呈现 JSON，这应该可以工作：

```
def testme
  respond_to do |format|
    msg = { :status => "ok", :message => "Success!", :html => "<b>...</b>" }
    format.json  { render :json => msg } # don't do msg.to_json
  end
end 
```

如果您说明您使用的是哪个版本的 Ruby 和 Rails，它也可能会有所帮助。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-09-06T04:32:24.267

我通常使用这种方法返回json数据：

```
msg = {:token => token, :courseId => courseId}
render :json => msg 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-01-12T09:57:39.827

一种简单的方法是：

```
def my_action 

 render :json => {:name => "any name"}

end 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-06-27T14:04:20.433

最简单的方法是`render json: {foo: 'bar'}`

# javascript - jQuery UI 自动完成 - 修改问题

> ID：12385359
> 
> 赞同：0
> 
> 时间：2012-09-12T09:43:06.857
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete

查看 jQuery UI 自动完成： http: [//jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)并对其进行更改以满足我的要求，我遇到了一些问题。

如果您查看链接中提供的默认列表，其中一个选项是“ActionScript”，如果您键入“Sc”，它会建议“ActionScript”，这在我的情况下不适合。

我只希望它建议“ActionScript”，例如，如果用户键入：

*   一种
*   交流电
*   行为
*   行动
*   行动
*   行动
*   行动
*   行动科学
*   动作脚本
*   动作脚本
*   动作脚本
*   动作脚本

“ActionScript”只是一个例子，但它明白了重点。

查看 jQuery UI 自动完成代码中的建议功能：

```
_suggest: function( items ) {
        var ul = this.menu.element
            .empty()
            .zIndex( this.element.zIndex() + 1 );
        this._renderMenu( ul, items );
        // TODO refresh should check if the active item is still in the dom, removing the need for a manual deactivate
        this.menu.deactivate();
        this.menu.refresh();

        // size and position menu
        ul.show();
        this._resizeMenu();
        ul.position( $.extend({
            of: this.element
        }, this.options.position ));

        if ( this.options.autoFocus ) {
            this.menu.next( new $.Event("mouseover") );
        }
    }, 
```

我似乎找不到缩小选择范围的部分。有人可以指出我正确的方向吗？我正在使用最新的稳定版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:12:49.517

```
function hackAutocomplete(){

    $.extend($.ui.autocomplete, {
        filter: function(array, term){
            var matcher = new RegExp("^" + term, "i");

            return $.grep(array, function(value){
                return matcher.test(value.label || value.value || value);
            });
        }
    });
}

hackAutocomplete(); 
```

找到解决它的这段代码。

# asp.net - MVCSiteMapProvider DynamicNode RouteValues 混淆

> ID：12385363
> 
> 赞同：0
> 
> 时间：2012-09-12T09:43:33.127
> 
> 标签：asp.net, mvcsitemapprovider

我面临一些问题，或者我很困惑。我按照以下链接生成动态站点地图：

[MVSiteMapProvider 动态站点地图](http://mvcsitemap.codeplex.com/wikipage?title=Dynamic%20sitemaps)

我`node.RouteValues.Add("id", album.AlbumId);`对上面链接中给出的课程感到困惑。我的网站链接不是他们讨论的示例中给出的形式（他们的 URL 类似于 mysite.com/controller?id=some id）

我的网址采用以下格式：

mysite.com/mycontroller/querystring1/querystring2/querystring3

我怎样才能“提及”这种类型的 URL，`node.RouteValues.Add(..., ...);`以便它应该重定向到 mysite.com/controller/querystring1/querystring2/querystring3？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T09:58:08.090

URL 的格式没有区别。无论哪种方式，它们都被转换为路由值的集合，这是 MvcSiteMapProvider 在后台使用的。

`node.RouteValues.Add("id", album.AlbumId);`因此，在任一场景中都可以使用同一行来使节点匹配。将 URL 实际处理为路由值是由 .NET 路由完成的，而不是 MvcSiteMapProvider。

# jquery-ui - jquery-ui datepicker 主题未正确显示

> ID：12385364
> 
> 赞同：2
> 
> 时间：2012-09-12T09:43:33.643
> 
> 标签：jquery-ui, jquery-ui-datepicker, jquery-ui-theme

我尝试将 jquery-ui datepicker 添加到我的网站。我下载了必要的 jquery-ui js 组件和 Smoothness 主题 css。问题是当我将小部件添加到我的网站时，它看起来像这样：

[损坏的日期选择器](http://i.stack.imgur.com/WS5ar.png)

与此相反：

[它应该是什么样子](http://i.stack.imgur.com/qOTOG.png)

我使用自定义 twitter bootstrap 作为我网站的主要样式，但根据 Chrome Inspect 元素，它似乎不会影响小部件的样式。

有什么想法可能是错的，或者我该如何进一步调查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:45:44.140

您需要更改字体的大小：

```
.ui-widget {
    font-size: 11px;
} 
```

# php - 基于现有变量构建 URL

> ID：12385365
> 
> 赞同：0
> 
> 时间：2012-09-12T09:43:36.760
> 
> 标签：php

我是一个 PHP 新手，我正在尝试做我认为在网站上相当复杂的操作。所以我需要你的帮助:)

我想要做的是为每个客户端请求一个特定的页面，唯一涉及的 URL 变量在最后，就像往常一样。

基本上我的变量之前已经在脚本中设置好了，我想说的是；URL`http://site.com/index.php?image=$clientnumber` 不知何故。

如果你们能给我一些关于如何做到这一点的见解，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:46:39.893

您可以使用[sprintf 函数](http://php.net/manual/en/function.sprintf.php)来执行此操作：

```
$url = sprintf('http://site.com/index.php?image=%s', $clientnumber); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:47:08.037

[PHP 字符串运算符](http://php.net/manual/en/language.operators.string.php)

```
$new_url = "http://site.com/index.php?image=$clientnumber"; 
```

或者

```
$new_url = 'http://site.com/index.php?image=' . $clientnumber; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:48:39.947

```
$data = array('foo'=>'bar',
              'baz'=>'boom',
              'cow'=>'milk',
              'php'=>'hypertext processor');

echo http_build_query($data) . "\n"; 
```

结果是：

> foo=bar&baz=boom&cow=milk&php=超文本+处理器

满足您的需求：

```
$data = array('image'=> $clientnumber);
echo 'index.php?' . $data; 
```

会给你：

> index.php?image=878787283

# java - 从 XML 属性中删除 \n

> ID：12385367
> 
> 赞同：-2
> 
> 时间：2012-09-12T09:43:38.367
> 
> 标签：java, xml

```
<Task>Reading</Task>
<day/>
<month/>
<year/> 
```

在这里，我想将其显示为相同，但是为了编写一个 java 类，我需要`\n`在解析时删除元素之间的内容。因为我必须删除空元素。任何人都可以帮助我如何在 XML 中解析和删除 \n 吗？

这里的元素`<day/>`是空的。在解析时我不应该得到这个`<day>`。需要检查一个条件，如果一个元素有值，它应该显示。否则，它不应该显示。提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:41:54.317

当您指的是元素时，您会通过谈论属性来混淆人们。

我看不到剥离/忽略元素之间的空白与检测元素内容何时为空之间的联系。这两项任务都非常简单；你需要更清楚为什么你有困难。展示您编写的代码总是有助于我们了解您哪里出错了。

# c# - 在带有 .net 2.0 的客户端中部署使用 vsto .net 4.0 制作的 Excel 加载项

> ID：12385369
> 
> 赞同：0
> 
> 时间：2012-09-12T09:43:40.987
> 
> 标签：c#, wcf, excel, vsto

我使用 Visual Studio 2010 开发了一个 excel 插件，目标框架为 4.0 客户端配置文件。该插件在我的机器上运行良好，现在我想运送我客户的机器。我将我的添加托管在我的网站上，以便可以直接从那里下载。

我面临的问题是，在客户端的机器上，插件安装得很好，但没有加载。当我转到“选项”菜单中的“添加”部分时，在选择我的 COM 加载项后，我发现加载行为说，

加载行为：未加载。加载 COM 加载项期间发生运行时错误。

我最好的猜测是，因为我使用 .Net 4.0 客户端配置文件开发了我的加载项，所以我使用的所有 .Net 引用都是来自 4.0 版的引用，并且在客户端它试图找到 .Net 4.0程序集，但由于我的客户端具有 .Net 2.0，因此无法找到它们，因此它不会加载加载项。

但我想将它部署在具有 .Net 框架 2.0 及更高版本的客户端上，而不安装 .Net 客户端配置文件 4.0。

如果有人知道如何解决这个问题，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:38:38.810

我认为您在 VS2010 中运气不佳，但是您应该能够使用 Visual Studio 2008 中的模板在 .NET 2.0 机器上部署 Excel 插件，我很确定该选项可用，所以一个选项是将您的解决方案反向移植到 VS2008 及其“旧”VSTO 项目类型之一。这不好玩，但应该解决。

这在一定程度上取决于您的附加组件的功能，但另一个考虑因素是研究开源/免费的[ExcelDNA](http://excel-dna.net/)，它提供了一种在 XLL 和 .NET 之间建立桥梁的好方法，可以轻松调用 .NET dll。

我自己没有使用过它，但[NetOffice](http://netoffice.codeplex.com/)也可能值得研究。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:54:18.887

据我所知，您无法使用 Visual Studio 2010 开发针对 .Net 2.0 的 VSTO Excel 加载项。

如果您在 Visual Studio 2010 开始屏幕上单击“新建项目”，请将“目标框架”下拉列表更改为`.NET Framework 2.0`并浏览至，`Office => 2007`否则`Office => 2010`您将看到两者都“未找到项目”。

如果您创建面向 .Net 3.5 或 4.0（或 VS 2012 上的 4.5）的 Office 加载项，并在“项目属性”窗口中尝试更改目标框架，则会收到以下错误：

![错误](../Images/04136e26404401a1171f14522770e8ce.png)

如果您想让它工作，您将需要在客户端计算机上安装 .Net framework 4。每个 Windows 操作系统 >= XP 都支持 .Net 4，所以这应该不会太成问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T11:37:39.200

我会确保在项目的先决条件中选择 .NET 4.0 Framework。这样做将允许用户在安装外接程序期间下载/安装您所针对的 .NET Framework。

您可以在以下位置找到此设置

> 项目属性 -> 构建 -> 先决条件

这有几个好处：

*   您不会收到说“您的加载项经常崩溃”的客户电话，因为他们要么将 .NET 4.0 与您的加载项一起安装，要么他们根本不会安装加载项。
*   加载外接程序后，您可以确定您所针对的 .NET 框架已安装在最终用户计算机上。

# command-line - 如何格式化从命令行预填充的 Outlook 电子邮件

> ID：12385371
> 
> 赞同：2
> 
> 时间：2012-09-12T09:43:49.727
> 
> 标签：command-line, outlook

我一直在使用以下命令从 Windows 命令行预填充我的电子邮件，这正是我想要的，唯一我仍然无法弄清楚的是如何将简单的 html 格式添加到电子邮件正文中，我尝试添加 < b > </b> 例如，但它不起作用，我只是想要一些简单的，比如粗体文本，文本着色，没什么花哨的，谢谢

> outlook.exe /c ipm.note /m someone@microsoft.com&subject=test%20subject&body=test%20body

参考： [启动 Outlook 并从命令行预先填充电子邮件](https://stackoverflow.com/questions/248569/starting-outlook-and-having-an-email-pre-populated-from-command-line) [http://support.microsoft.com/default.aspx?scid=kb;en-us;181991](http://support.microsoft.com/default.aspx?scid=kb;en-us;181991)

# java - ActiveMq Broker 中的错误：WARN [Transport:203] Transport Connection to: StompSocket_1661562307 failed: java.io.IOException: closedOut 1006:null

> ID：12385372
> 
> 赞同：1
> 
> 时间：2012-09-12T09:43:55.237
> 
> 标签：java, spring, websocket, activemq

我使用嵌入式代理 ActiveMq 并从 JavaScript 应用程序连接到它。使用的协议是 STOMP over WebSocket。Spring 的 XML 配置：

```
<amq:broker id="broker" useJmx="false" persistent="false" brokerId="1" brokerName="locHost">
    <amq:transportConnectors>
        <amq:transportConnector name="websocket" uri="ws://0.0.0.0:6661"/>
    </amq:transportConnectors>
</amq:broker>

<!-- JMS ConnectionFactory to use, configuring the embedded broker using XML -->
<amq:connectionFactory id="jmsFactory" brokerURL="vm://localhost"/>

<bean id="jmsConnectionFactory"
      class="org.springframework.jms.connection.SingleConnectionFactory"
      depends-on="broker"
      p:targetConnectionFactory-ref="jmsFactory"
      />

<jms:listener-container
        container-type="default"
        connection-factory="jmsConnectionFactory"
        >
    . . . . .
    <jms:listener destination="toggle"     ref="consumer" method="toggle"      response-destination="toggle"/>

    . . . . .

</jms:listener-container> 
```

也有一些这种形式的听众（其中之一）：

```
@Component
public class Consumer {
   . . . . .
   public String toggle(String message)  {

        return "Responce" + message; 
   }

   . . . . .
} 
```

一些侦听器正在工作，但有些侦听器存在异常类型：

```
09:33:25,196 WARN  [Transport:203] Transport Connection to: StompSocket_1661562307 failed: java.io.IOException: closedOut 1006:null 
```

并且消息没有到达收件人。我们能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T15:02:34.557

您正在运行哪个版本的 AMQ？

您是否尝试过使用 stomp 格式的 URL：

```
<transportConnectors>
   <transportConnector name="stomp" uri="stomp://localhost:61613"/>
</transportConnectors> 
```

网址以`stomp://`

[在Apache 文档](http://activemq.apache.org/stomp.html)中查看更多详细信息

# c++ - 多路优先队列实现

> ID：12385375
> 
> 赞同：0
> 
> 时间：2012-09-12T09:43:58.553
> 
> 标签：c++, priority-queue

这是我的多路优先队列实现代码

```
#include<iostream>
#include<vector>
using namespace std;
template<class T>
class pq
{
    int d,n;
    vector<int>pq;
    vector<int>qp;
    const vector<T>&a;
    void exch(int i,int j)
    {
        int t=pq[i];
        pq[i]=pq[j];
        pq[j]=t;
        qp[pq[i]]=i;
        qp[pq[j]]=j;
    }

    void fixup(int k)
    {
        while(k>1 && a[pq[(k+d-2)/d]]>q[pq[k]])
        {
            exch(k,(k+d-2)/d);
            k=(k+d-2)/d;
        }
    }

    void fixdown(int k,int n)
    {
        int j;
        while((j=d*(k-1)+2)<=n)
        {
            for(int i=j+1;i<j+d&& i<=n;i++)
                if(a[pq[j]]>a[pq[i]])
                    j=i;
            if(!(a[pq[k]]>a[pq[j]]))
                break;
            exch(k,j);
            k=j;
        }
    }

public:
    pq(int n,const vector<T>&a,int d=3):a(a),pq(n+1,0),qp(n+1,0),n(0),d(d){}

    int empty() const
    {
        return n==0;
    }

    void insert(int v)
    {
        pq[++n]=v ;
        qp[v]=n;
        fixup(n);
    }

    int getmin()
    {
        exch(1,n);
        fixdown(1,n-1);
        return pq[--n];
    }

    void lower(int k)
    {
        fixup(qp[k]);
    }
};

int main()
{
    return 0;
} 
```

但它有一些错误，即我做了一些不正确的构造函数，这是我在运行代码时看到的两个错误

```
1>c:\users\\documents\visual studio 2012\projects\multiway_heap\multiway_heap\multiway_heap.cpp(8): error C2461: 'pq<T>' : constructor syntax missing formal parameters
1>          c:\users\\documents\visual studio 2012\projects\multiway_heap\multiway_heap\multiway_heap.cpp(68) : see reference to class template instantiation 'pq<T>' being compiled
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========= 
```

所以请帮助我了解错误在哪里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:53:14.560

试着理解编译器告诉你什么——这并不难。

```
class pq
{
/* ... */
    vector<int> pq;    // I suppose this is line 8 according to compiler error 
```

您为类模板及其成员使用相同的名称。这在 c++ 中是不合法的。

# java - 在 Android 中实现类似 iOS 的时间选择器

> ID：12385377
> 
> 赞同：1
> 
> 时间：2012-09-12T09:44:02.430
> 
> 标签：java, android, ios, datetimepicker, timepicker

我希望在 Android 中实现如下所示的时间选择器。

我已经看过[http://tolkianaa.blogspot.mx/2012/04/how-to-use-android-wheel-part-ii.html](http://tolkianaa.blogspot.mx/2012/04/how-to-use-android-wheel-part-ii.html)但他似乎有多个 xml 文件和多个类，所以我不能看看那是如何工作的。（我错过了什么吗？）

我安装了 android-wheel 所以这个问题没用[在 Android 中复制 iOS 时间选择器](https://stackoverflow.com/questions/11284200/replicating-the-ios-time-picker-in-android)

来自 android wheel 的演示似乎并没有真正适应它。

无论如何，有没有人有更好的方法来实现这个是android？

![在此处输入图像描述](../Images/f4b4e54e00d0f78dcb9c1d34286882d6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:18:00.330

您应该看一下[AOSP 源代码](https://code.google.com/p/android-source-browsing/source/browse?repo=platform--packages--apps--deskclock#git/src/com%253Fstate%253Dclosed)，其中包含一个时钟应用程序，我认为它是 ICS 和 JB 附带的默认应用程序（但我没有编译它来验证）。
此外，[官方网站](http://developer.android.com/guide/topics/ui/controls/pickers.html)总是有一些有用的信息，你应该尝试从这个小部件开始。插图似乎表明它使用按钮而不是滑动，这很奇怪，但即使是这种情况，实现这个小部件的滑动版本也是一个好的开始。
@Lokesh 的链接似乎也符合您的需求。

# ios - 办公文档无法使用 quicklook 打开

> ID：12385383
> 
> 赞同：0
> 
> 时间：2012-09-12T09:44:13.880
> 
> 标签：ios, ms-office, docx, doc, quicklook

我创建了 2 个测试应用程序：

在其中一个文档包含在包中，*可以*使用快速查看控制器打开。在另一个应用程序中，文件被下载。当我尝试打开文件时，快速查看控制器只会显示一条消息，说明发生了错误。奇怪的是，它会毫无问题地打开下载的 PDF 文档。

我怀疑它与标题和 mime 类型有关，但我不确定这一点。有谁知道下载的 .doc 或 .docx 文档无法打开而本地文档会打开的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:07:10.147

原来是保存下载的文件有问题。起初，我将数据写入文件路径 URL。这将数据保存到正确的位置，但文件类型不再被识别。

解决方案是使用默认的 FileManager 来保存文件。

```
[[NSFileManager defaultManager] createFileAtPath:filePath contents:data attributes:nil]; 
```

# jquery - 在其中一个更改后再次验证字段

> ID：12385385
> 
> 赞同：1
> 
> 时间：2012-09-12T09:44:17.007
> 
> 标签：jquery, validation, input

当其中一个字段发生更改时，我在重新验证字段时遇到了一些问题。更具体地说，假设您必须处理总和不能超过 100 的任意数量的字段（用户可以添加新闻或删除现有的新闻）。

我现在正在做的是：

```
//This basically works on change of the input
$.validator.addMethod('inputBox', checkAmount, 'Value exceeds maximum quantity');

function checkAmount(value, element) {

    if (sumAmounts() <= 100) {
        return true;
    }
    return false;
} 
```

下面是它的工作原理，假设我们有 2 个输入框： - 我在第一个输入框中放了 80 - 我在第二个中放了 30 - 第二个变成红色并显示错误“值超过最大数量”<-很好我！- 我按下提交：两者都变成红色并显示错误<-对我来说很好！- 我编辑了两者中的一个（哪个没有区别）以符合验证规则 - 编辑后的一个变得有效，但另一个仍然显示错误（但我可以提交）<- 这就是问题所在！

当我更改其中一个并且它们的值的总和小于 100 时，我希望所有的框都变得“有效”。

在返回 true 或 false 之前，我尝试在 checkAmount() 函数中插入以下方法： $('inputBox').validate() / .valid(); / 。改变（）; / $('form').validate(); / 甚至 $('inputBox').focus(); 可以工作但会经历无限循环xD

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:09:09.277

它不起作用，因为出现问题的不是当前框，而是其他具有相同验证规则的框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:57:04.830

您可以在每个输入框元素上添加 css 类，例如“inputclass”并应用以下 jQuery 脚本。可能是它的工作..

```
$(function(){
    $(".inputclass").change(function(){
          $(this).validate();
     });
}); 
```

# xml - 如何在 Oracle XML DB Native Web Services 中处理 NULL Stored Proc 返回 arg？

> ID：12385387
> 
> 赞同：3
> 
> 时间：2012-09-12T09:44:20.557
> 
> 标签：xml, database, oracle, plsql

我有一个简单的 Oracle 包，其中包含一个简单的存储过程。存储过程声明了 1 个 IN 参数和几个 OUT 参数。

只要 OUT 参数包含值，我就可以使用 XML DB Native Web Services 成功调用存储过程。

但是，如果任何 OUT 参数包含 NULL，我会收到一个 SOAP 错误，其中包含 ORA-01405 Fetched column value is null。

我可以看到在调用 SQL 时有处理 NULL 值的选项（使用`<null_handling>`元素，但有人知道如何对 PL/SQL 做同样的事情吗？

...

```
-- create a test table
CREATE TABLE xmldb_test
(
   key_value varchar2(32)
   ,value1 varchar2(32)
   ,value2 varchar2(32)
   ,value3 varchar2(32)
);

-- populate the table
insert into xmldb_test values ('key1', 'value1', 'value2', 'value3');
insert into xmldb_test values ('key2', 'value4', 'value5', null); -- this row has a null
commit;

-- create package
CREATE OR REPLACE package pack_xmldb_test
is
procedure getDataValue (ca_key in varchar2, ra_value1 out varchar2, ra_value2 out varchar2, ra_value3 out varchar2);
end;

-- create package body
create or replace package body pack_xmldb_test
is
procedure getDataValue (ca_key in varchar2, ra_value1 out varchar2, ra_value2 out varchar2, ra_value3 out varchar2)
IS
BEGIN
  select value1, value2, value3 
  into ra_value1, ra_value2, ra_value3
  from xmldb_test
  where key_value = ca_key;
END;
end;

-- test the package in pl/sql
declare
key_value varchar2(32) := 'key1';
value1 varchar2(32) := 'dog';
value2 varchar2(32) := null;
value3 varchar2(32) := null;
begin
dbms_output.put_line('before call, key_value:' || key_value);
pack_xmldb_test.getDataValue(key_value, value1, value2, value3);
dbms_output.put_line('after call, value1:' || value1 || ' value2:' || value2 || ' value3:' || value3);
end;

The WSDL for the Stored Procedure is at ...
http://node:port/orawsv/schema_name/pack_xmldb_test/getDataValue?wsdl

Build a soapUI project based on the WSDL, then ...

Sending the following request :

<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:get="http://xmlns.oracle.com/orawsv/CUSTOMER_FRAUD/PACK_XMLDB_TEST/GETDATAVALUE">
   <soapenv:Header/>
   <soapenv:Body>
      <get:GETDATAVALUEInput>
         <get:RA_VALUE3-VARCHAR2-OUT/>
         <get:RA_VALUE2-VARCHAR2-OUT/>
         <get:RA_VALUE1-VARCHAR2-OUT/>
         <get:CA_KEY-VARCHAR2-IN>key1</get:CA_KEY-VARCHAR2-IN>
      </get:GETDATAVALUEInput>
   </soapenv:Body>
</soapenv:Envelope>

... results in a successful call :

<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <GETDATAVALUEOutput xmlns="http://xmlns.oracle.com/orawsv/CUSTOMER_FRAUD/PACK_XMLDB_TEST/GETDATAVALUE">
         <RA_VALUE1>value1</RA_VALUE1>
         <RA_VALUE2>value2</RA_VALUE2>
         <RA_VALUE3>value3</RA_VALUE3>
      </GETDATAVALUEOutput>
   </soap:Body>
</soap:Envelope>

... but calling with this request :

<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:get="http://xmlns.oracle.com/orawsv/CUSTOMER_FRAUD/PACK_XMLDB_TEST/GETDATAVALUE">
   <soapenv:Header/>
   <soapenv:Body>
      <get:GETDATAVALUEInput>
         <get:RA_VALUE3-VARCHAR2-OUT/>
         <get:RA_VALUE2-VARCHAR2-OUT/>
         <get:RA_VALUE1-VARCHAR2-OUT/>
         <get:CA_KEY-VARCHAR2-IN>key2</get:CA_KEY-VARCHAR2-IN>
      </get:GETDATAVALUEInput>
   </soapenv:Body>
</soapenv:Envelope>

... results in the following fault :

<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <soap:Fault>
         <faultcode>soap:Client</faultcode>
         <faultstring>Error processing input</faultstring>
         <detail>
            <OracleErrors xmlns="http://xmlns.oracle.com/orawsv/faults">
               <OracleError>
                  <ErrorNumber>ORA-19202</ErrorNumber>
                  <Message>Error occurred in XML processing</Message>
               </OracleError>
               <OracleError>
                  <ErrorNumber>ORA-01405</ErrorNumber>
                  <Message>fetched column value is NULL</Message>
               </OracleError>
            </OracleErrors>
         </detail>
      </soap:Fault>
   </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:20:40.143

抱歉，这不是一个更有说服力的解决方案，但也许可以在您的 pl/sql 中尝试：

```
select nvl(ra_value1, '""'), nvl(ra_value2,'""'), nvl(ra_value3,'""')
into ra_value1, ra_value2, ra_value3
from xmldb_test
where key_value = ca_key; 
```

我只是将空值转换为双引号“”，但更改为对 XML 有意义的任何内容。

我承认这是一个 hack，应该有一个更有说服力的解决方案。检查[文档](http://docs.oracle.com/cd/B28359_01/appdev.111/b28369/xdb_web_services.htm#CHDFGIBD)，老实说，我不确定如何通过 wsdl 执行此操作（如果可能的话）。

# testing - 如果冗余系统本质上都相同，那么冗余系统如何降低故障率？

> ID：12385393
> 
> 赞同：1
> 
> 时间：2012-09-12T09:44:40.540
> 
> 标签：testing, redundancy, system-analysis

在系统分析课上，讲师谈到了冗余系统。她讲述了一个故事，其中 3 个独立的系统可以让一架飞机着陆，但在试运行中，所有 3 个系统同时失败（不知何故，飞行员仍有时间手动着陆）。我不明白为什么拥有冗余系统会有所帮助？如果系统 A 不能与起落架系统 B 和 C 也不能通信，对吧？冗余系统背后的想法是“让我们希望其中一个没有错误”吗？如果是，那么发现错误会不会太晚了（例如，主系统发生故障，因此切换到辅助系统，哦，等飞机爆炸了）？

在我看来，冗余系统就像在说“这是同一个工具以多种不同的方式制作的，但如果你需要不同的工具，那你就倒霉了”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T09:55:45.843

相同的系统有助于防止某一类故障，即设备中的电子或物理故障，如果这是非确定性故障的话。换句话说，如果您在 RAID 5 配置中有 3 个硬盘驱动器，则可以防止一个硬盘驱动器出现磁头崩溃，但如果有两个硬盘驱动器发生磁头崩溃，则它是从备份时间恢复的。硬盘驱动器的磁头崩溃，电子故障等是这类事情可以防止的各种错误。

它不能保护的是由所有三个系统中的软件错误引起的确定性故障。回到您的 RAID 5 阵列，如果硬盘驱动器相同并且控制器中存在导致磁头在所有三个上写入损坏数据的错误，那么您有三个硬盘驱动器写入损坏数据的事实是没有的真正的舒适。

因此，作为一个很好的[真实世界示例](http://www.defenseindustrydaily.com/f22-squadron-shot-down-by-the-international-date-line-03087/)，一个 F22 战斗机中队从夏威夷飞往日本，当时他们越过国际日期变更线并经历了一次*糟糕*的航空电子设备倾销。显然，从某些来源，他们失去了惯性参考、一些空中数据、一些通信、武器系统的一切。一个软件错误显然没有正确处理日期变更线并锁定了所有冗余系统。该中队不得不在没有仪器的情况下返回基地并着陆。如果天气不好，虽然我们希望飞行员能够弹射，但计算机崩溃会变成飞机失事。

此外，您还有更复杂的冗余系统故障案例，当出现问题时，参与维护安全的人员通常更难排除故障。例如[，第二个系统的故障如何处理？](http://spectrum.ieee.org/riskfactor/aerospace/aviation/lawsuit-brought-in-case-of-2008-qantas-airbus-uncontrolled-plunge) 这在至少一个飞机案件中造成了恐怖和伤害。在这种情况下，第二个攻角单元（大气数据/惯性参考单元的一部分）的故障导致系统使用来自第一个故障传感器的输入，这首先导致了无指令的爬升，然后导致了无指令的俯冲。飞机安全着陆，但这是坐在飞机上系好安全带的好理由！

因此，与往常一样，在健壮性和能够证明优雅地处理所有可能的故障状态之间存在权衡。一般来说，在航空领域，这被认为是一个积极的权衡，但它不是免费的。

# excel - Excel VBA：更改列表

> ID：12385394
> 
> 赞同：2
> 
> 时间：2012-09-12T09:44:42.437
> 
> 标签：excel, vba

在 Excel 中，我可以激活“在编辑时跟踪更改”。使用“选择“突出显示屏幕上的更改。”，我可以看到所有更改。

现在我想生成所有这些变化的复杂报告，所以我需要一种通过 VBA 访问这些信息的方法。不幸的是，没有“Workbook.Changes”属性。

有人知道怎么做吗？

亲切的问候，托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:01:40.650

根据您需要跟踪更改的内容，您可以使用[电子表格比较](http://www.thefoolonthehill.net/drupal/Spreadsheet%20Compare/)来帮助报告更改。这是一个 Excel 插件，有很多选项可用于报告 2 个工作簿之间的差异。

如果您在编辑之前保存工作簿的副本，则可以使用此工具总结编辑后的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:38:43.623

您是否注意到有一个内置选项允许您“在新工作表上列出更改”？
*最好的宏是没有宏。（老Excel谚语）*

# javascript - 如何为 .css 状态的更改添加延迟

> ID：12385398
> 
> 赞同：0
> 
> 时间：2012-09-12T09:44:52.877
> 
> 标签：javascript, jquery

我有以下内容：

```
 $(document)
    .ajaxStart(function () {
        $(this).css({ 'cursor': 'progress !important' })
    })
    .ajaxStop(function () {
        $(this).css({ 'cursor': 'default !important' })
    }); 
```

有没有办法可以将光标进度状态延长 2 秒。现在它来得太快了。换句话说，我想让光标变为“进度”至少几秒钟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:47:09.183

*编辑：*

尝试使用`window.setTimeout`.

```
 var timer = null;

  $(document)
    .ajaxStart(function () {
        if (timer) {
            clearTimeout(timer);
        }
        $(this).css({ 'cursor': 'progress !important' });
    })
    .ajaxStop(function () {
        timer = setTimeout(function() {
           $(this).css({ 'cursor': 'default !important' });
        }, 2000);

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:47:18.823

像这样试试

```
$(this).delay('1000').css({ 'cursor': 'progress !important' }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:47:19.230

尝试这个

```
$.delay(1000, function(){
//Do anything after 1 second
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T09:47:38.333

你可以使用 setTimeout ( [http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp) );

setTimeout("javascript 函数",毫秒);

在“javascript 函数”中做你想做的事，用你想等待的时间替换毫秒。

# matlab - 用 Matlab 查询 MS Access 2010 (accdb)

> ID：12385399
> 
> 赞同：0
> 
> 时间：2012-09-12T09:44:54.400
> 
> 标签：matlab, ms-access

我想用 matlab 在 MS Access 2010（.accdb 文件）中进行查询。我想发送一个查询（例如：“SELECT * FROM TESTTABLE”）并能够读取结果。

如果无法使用 .accdb 文件，我将使用 .mdb。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:54:31.397

您可以使用[Database Toolbox](http://www.mathworks.com/products/database/)执行此操作。

# vb.net - VB / CLASS问题：所有记录仅显示最后一条记录

> ID：12385403
> 
> 赞同：0
> 
> 时间：2012-09-12T09:45:11.800
> 
> 标签：vb.net

我尝试获取每张专辑的歌曲列表。我创建了 2 个类：专辑和歌曲，所以我可以将它们组织如下：

```
Public Class Album
    Sub New()
        Entered = Now
    End Sub
    Public Entered As DateTime
    Public AlbumName As String = ""
    Public Artist As String = ""
    Public YearReleased As Integer = 1900
    Public Songs As New List(Of Song)
End Class

Public Class Song
    Public SongName As String = ""
    Public SongLength As String = ""
End Class 
```

但是，当我将歌曲添加到专辑时，我总是得到最后一首输入的歌曲。这是一个输出结果的例子。

```
Protected Sub Test()
    Dim vAlbum As New Album
    Dim vsong As New Song

    vAlbum.AlbumName = "Test 01"
    vAlbum.Artist = "Jackie"
    vAlbum.YearReleased = 2012

    vsong.SongName = "Exit"
    vsong.SongLength = "1.5"
    vAlbum.Songs.Add(vsong)

    vsong.SongName = "Exit II"
    vsong.SongLength = "2.5"
    vAlbum.Songs.Add(vsong)

    For Each sSong As Song In vAlbum.Songs
        Response.Write(sSong.SongName + "<br>")
    Next
End Sub 
```

输出 ：

*   出口二*   出口二

我到处都有谷歌，但找不到所有歌曲的最新记录。

欢迎任何帮助。

谢谢，弗雷德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:49:56.760

经典参考问题。您的 vsong 始终是同一个对象。您需要实例化一个新实例：

```
...
vAlbum.Songs.Add(vsong)
vsong = new Song()
vsong.SongName = "Exit II"
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:49:10.477

您添加了`Song`两次相同的内容，只是更改了它的字段。

你应该使用这样的东西：

```
Dim vAlbum As New Album

vAlbum.AlbumName = "Test 01"
vAlbum.Artist = "Jackie"
vAlbum.YearReleased = 2012

Dim vsong As New Song
vsong.SongName = "Exit"
vsong.SongLength = "1.5"
vAlbum.Songs.Add(vsong)

vsong As New Song ' create a new instance of Song
vsong.SongName = "Exit II"
vsong.SongLength = "2.5"
vAlbum.Songs.Add(vsong) 
```

或者更好的是，使用对象初始化器或创建一个接受所有必要值的构造器：

```
Public Class Song

    Public SongName As String = ""
    Public SongLength As String = ""

    Public Sub new(name as String, length as String)
        SongName = name
        SongLength = length
    End Sub

End Class

...

vAlbum.Songs.Add(new Song("Exit", "1.5"))
vAlbum.Songs.Add(new Song("Exit II", "2.5")) 
```

# eclipse - Eclipse 在哪里存储有关从哪个工作区启动的信息？

> ID：12385413
> 
> 赞同：23
> 
> 时间：2012-09-12T09:45:46.400
> 
> 标签：eclipse

当我启动 Eclipse 时，它​​会从我创建的一个工作区开始，并选择“不再询问”（通常，Eclipse 会在启动期间询问从哪个工作区开始）。

因此，它必须将要使用的工作空间存储在某个地方。它在哪里存储这条信息？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-12T09:49:21.380

在

`$HOME/.eclipse/org.eclipse.platform_3.7.0_155965261/configuration/.settings`

有一个文件

`org.eclipse.ui.ide.prefs`

它存储在哪里。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-12T09:49:04.797

`eclipse\configuration\.settings`使用 Eclipse Juno，我可以在文件中看到这些信息：

我猜你正在寻找`RECENT_WORKSPACES`和`SHOW_WORKSPACE_SELECTION_DIALOG`vars。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-10-24T15:11:08.847

自发布此问题以来，设置已更改，因为已发布较新版本的 Eclipse。

**使用 Eclipse Luna**，导航到`$ECLIPSE_HOME/eclipse/configuration/.settings`该文件`org.eclipse.ui.ide.prefs`包含这样的设置（**显示 Windows 文件配置**）：

```
MAX_RECENT_WORKSPACES=5
RECENT_WORKSPACES=C\:\\src\\eclipse-workspaces\\luna\\MyApp\nC\:\\src\\eclipse-workspaces\\luna\\MyOtherApp
RECENT_WORKSPACES_PROTOCOL=3
SHOW_WORKSPACE_SELECTION_DIALOG=true
eclipse.preferences.version=1 
```

中的每个条目`RECENT_WORKSPACES`似乎都由`\n`没有空格分隔。每当我手动调整我的工作区时（这种情况很少见，但确实会发生），我已经非常成功地手动编辑了这个文件，保存它，并且新路径在 Workspace Lancher/Select a Workspace 对话框中显示得很好.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-12T09:49:05.023

您在“eclipse_home”/configuration 中有 eclipse 配置文件，您可能要查找的配置文件在设置目录中：org.eclipse.ui.ide.prefs

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-02T15:36:39.603

我在使用 Spring Tool Suite 4 时遇到了问题。该工作区曾经给出错误，我也无法选择其他工作区。在已经给出的一些答案的帮助下，我可以在 $ECLIPSE_HOME\sts-4.7.1.RELEASE\configuration.settings\org.eclipse.epp.mpc.ui.prefs 中找到配置

我删除了 RECENT_WORKSPACES 属性（尝试重新启动后，它再次添​​加默认条目）并更改

```
SHOW_WORKSPACE_SELECTION_DIALOG=true 
```

STS 再次开始显示工作区选择对话框。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-12-11T09:36:56.500

如果 Eclipse 已使用**ubuntu-make**安装，则文件位置为`~/.local/share/umake/ide/eclipse-jee/configuration/.settings/org.eclipse.ui.ide.prefs`.

# paypal - Paypal API 链式支付 - 二级收款人没有贝宝账户

> ID：12385418
> 
> 赞同：1
> 
> 时间：2012-09-12T09:46:10.103
> 
> 标签：paypal, paypal-adaptive-payments, chained

我有一个网站，可以让零售商在线销售商品，并且该网站收取一定比例。这使用贝宝链式付款。- 网站的用户是发件人。- 网站是主要接收者。- 零售商是第二接收者。

问题是，如果零售商没有设置贝宝账户，那么付款就会失败。在贝宝文档中说​​接收者不需要拥有一个帐户，但似乎并非如此。

是否可以在没有贝宝账户的情况下向二级收款人设置链式付款？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T05:36:15.617

所有收件人都必须拥有有效的 Paypal 帐户。

为此，我为 Rails/ActiveMerchant 创建了一个开源库，可帮助您检查 Paypal 帐户的已验证状态： [https ://github.com/jonaphin/active_paypal_adaptive_accounts](https://github.com/jonaphin/active_paypal_adaptive_accounts)

还有其他针对不同语言和框架的库可以帮助您实现这一目标。

# sharepoint - 使用 SSIS 导入 Sharepoint 文档库

> ID：12385431
> 
> 赞同：1
> 
> 时间：2012-09-12T09:47:00.817
> 
> 标签：sharepoint, ssis

我们需要使用 SSIS 将 SharePoint 文档库（可能包含多种格式的多个文档）导入目标文件夹（在不同的服务器上）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T02:21:18.683

有可用于 SharePoint 的开源 SSIS 适配器。你可以使用这些。

[http://sqlsrvintegrationsrv.codeplex.com/](http://sqlsrvintegrationsrv.codeplex.com/) http://sqlsrvintegrationsrv.codeplex.com/releases/view/17652

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-07T18:44:42.467

您还可以在 ssis 中创建脚本任务并使用 c# 将文件从 SharePoint 库提取到本地文件夹。确保 SharePoint url 仅包含 siteurl/Library/Folder/File（无特殊字符）。下面复制一个文件，但可以修改为复制多个文件。祝你好运。

```
using System.net;

public void main ()
{
WebClient Client = new WebClient();
Client.UseDefaultCredentials = true;
Client.DownloadFile("yourSharePointurl/File.ext", 
@"YourLocalFolder/File.ext");
Dts.TaskResult = (int)ScriptResults.Success;
} 
```

# java - 如何自定义 Vitamio 小部件？

> ID：12385444
> 
> 赞同：3
> 
> 时间：2012-09-12T09:47:27.697
> 
> 标签：java, android, http-live-streaming, live-streaming

我正在使用 Vitamio 插件播放直播。它运作良好。但我无法自定义它的 VideoPlayer。任何人都可以告诉我如何：

1/ 加载流媒体时自动播放。我正在使用此代码，但效率不高

```
mVideoView.setOnPreparedListener(new OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer mp) {
        mp.start();
        if (mProgressDialog.isShowing())
            mProgressDialog.dismiss();
    }
}); 
```

2/隐藏控制栏上的文件名。我尝试使用`mMediaController.setFileName("")`，`mMediaController.setInfoView(null)`但文件名仍然显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:43:14.420

1）他们的例子使用

```
mVideoView.setOnPreparedListener(new OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer arg0) {
        if (loadingDialog.isShowing()) {
            loadingDialog.dismiss();
            mVideoView.start();
        }
    }
}); 
```

2) 您是否使用 Vitamio Bundle 作为库？

如果是这样，只需打开 res/layout/mediacontroller.xml 并编辑文件名 TextView 以添加可见性不可见（使用消失会破坏 ui）在这里您可以根据需要自定义

```
<TextView
  android:id="@+id/mediacontroller_file_name"
  style="@style/MediaController_Text"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_alignParentBottom="true"
  android:ellipsize="marquee"
  android:singleLine="true" 
  android:visibility="invisible"
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T13:14:09.490

```
mVideoView.setMediaController() 
```

设置要显示的 MediaController 小部件。只需从头开始创建自己的。

# java - 物理菜单按钮不显示选项

> ID：12385446
> 
> 赞同：0
> 
> 时间：2012-09-12T09:47:33.050
> 
> 标签：java, android, menu

我在我的应用程序中使用带有片段的 ActionBarSherlock 选项卡：

```
public class ExampleActivity extends SherlockFragmentActivity{} 
```

我在操作栏中添加了一个选项菜单。问题是，虽然这确实会在单击操作栏中的虚拟按钮时显示选项菜单，但在按下物理按钮时却不会这样做。我希望在按下物理菜单按钮时显示选项菜单。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    //return super.onCreateOptionsMenu(menu);
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.options_menu, menu);
    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
        case R.id.menu_prefs:
            Intent i = new Intent(this,ShowSettingsActivity.class);
            startActivityForResult(i, requestCode);
            return true;
        case R.id.menu_faq:
            startActivity(new Intent(this, AboutApp.class));
            return true;
        case R.id.menu_contact:
            startActivity(new Intent(this, FeedbackApp.class));
            return true;

        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

在 res/menu/options_menu.xml 中：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_settings"
        android:title="@string/menu_settings"
        android:icon="@drawable/ic_settings_dark"
        android:orderInCategory="100"
        android:showAsAction="always">
      <menu
          android:id="@+id/e">
        <item
            android:id="@+id/menu_prefs"                                
            android:title="@string/menu_prefs"/>
        <item
            android:id="@+id/menu_faq"                                
            android:title="@string/menu_faq"/>
        <item
            android:id="@+id/menu_contact"                                
            android:title="@string/menu_contact"/>
    </menu>
    </item>
</menu> 
```

如果我删除子菜单，它会在单击物理按钮时显示选项菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:02:45.190

（对不起，我的第一个答案离题了）

我不认为`<menu>`XML 元素接受 android:id 作为属性。你试过删除它吗？

另一个尝试：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.options_menu, menu);
    return true; // override the useless returned value by super()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:09:05.937

试试这个代码：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    getMenuInflater().inflate(R.menu.options_menu, menu);
    return true;
} 
```

希望这会帮助你。

# iphone - 如何为 iphone 测试和调整网站？

> ID：12385449
> 
> 赞同：0
> 
> 时间：2012-09-12T09:47:46.187
> 
> 标签：iphone, mobile-safari, web-deployment

我开发了这个[网站](http://prawalekarzy.pl)

它在 PC 上的大多数浏览器和操作系统上看起来都很好。它甚至在我的 HTC with Opera Mobile 上看起来也不错。不幸的是，我不断收到有关它如何在 iphone 上显示的报告。我没有iphone所以这里是我的问题：

1.  有没有一种简单的方法可以在 iphone 上可靠地检查（模拟）我的网站（我尝试过[这样](http://iphone4simulator.com/)的 网站，但是这个网站在 safari 中打开 iframe 试图模拟 ihopne 本机屏幕尺寸，但问题出在其他地方......）？

2.  关于我犯的明显错误的任何快速提示？

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:07:22.410

如果你有一台安装了 MacOS 的电脑（它甚至可能是一个 hackintosh），你可以在那里安装 Xcode，然后从中运行 iPhone 模拟器。到达那里后，您可以在模拟器中打开 Safari 并输入您的站点 URL 进行查看。

我还在您的主页上附上了模拟器的快照。 ![在此处输入图像描述](../Images/9c22d55816b66a3601dcdb462b65b483.png)

您可以尝试在 HTML 中定义视口：

```
 <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

此外，请查看[Mobile Safari 中可用的其他元标记](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariHTMLRef/Articles/MetaTags.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:59:25.203

我部分找到了答案。事实证明，大多数移动浏览器（包括 iphone 的 safari 和三星银河中的默认浏览器）不支持

```
{ background: transparent;} 
```

所以我需要提供这里描述的后备颜色：http: [//css-tricks.com/rgba-browser-support/](http://css-tricks.com/rgba-browser-support/)

# java - JUnit 详细输出

> ID：12385451
> 
> 赞同：0
> 
> 时间：2012-09-12T09:47:55.890
> 
> 标签：java, junit, robolectric

我正在使用 Robolectric 测试运行器，不幸的是我的测试挂起（不是测试，而是运行器中的 somwehre）。JUnit，JVM是否有任何标志来打印任何详细信息，以便我对它可能挂起的位置有更多见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:32:22.770

我有一种感觉（但我可能完全错了）可能有一个用户线程正在运行，这就是 JUnit 永远不会终止的原因。

虽然暂停应用程序时只能看到两个线程...

# api - Paypal API 和同一 PayPal 帐户中的多个电子邮件

> ID：12385452
> 
> 赞同：2
> 
> 时间：2012-09-12T09:47:59.053
> 
> 标签：api, email, paypal, receiver

我不能在这里称赞我的贡献，因为我是新用户，但如果可以的话，我会有所帮助。

我有一个大问题，我不知道如何解决它，请帮助。

在默认电子邮件地址的同一 Paypal 帐户中：email1@somedomain.com，还有 7 封电子邮件：

```
email2@somedomain.com
email3@somedomain.com
email4@somedomain.com
email5@somedomain.com
email6@somedomain.com
email7@somedomain.com 
```

这是一个 PayPal 帐户下允许的最大电子邮件数量 (8)。

所以我们在多个页面上使用API​​，而在paypal界面只能做一个API签名，所以每个网页使用相同的API签名。

我们想定义资金将流向何处 - 流向同一 PayPal 帐户中的哪个电子邮件地址。

我们使用高级 PayPal 帐户，并且我们知道对于徽标更改、电子邮件删除等，我们需要 Business 帐户，但是对于在同一个 PayPal 帐户中定义收款人电子邮件地址，我们假设它可以定义，否则我们不请注意在同一个 PayPal 帐户中拥有多个电子邮件地址。

问题是购买时总是显示默认电子邮件：S 我们试图定义主题：

```
SUBJECT=merchantEmailAddress
N O T  E: Typically, a merchant grants third-party permissions to a shopping cart... 
```

并设置merchantEmailAddress email2@somedomain.com。

在沙盒中，一旦我们将其投入生产，它就会像魅力一样工作，默认邮件会再次显示。

请如果有人有同样的问题帮助。

非常感谢，这个论坛很棒，我意识到如果没有好的人和贡献，就没有答案。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T05:49:16.630

除非代表第 3 方 PayPal 帐户处理权限和拨打电话，否则您不会使用 SUBJECT。

您正在使用一个 PayPal 帐户，因此您根本不会使用 SUBJECT。您将像现在一样使用凭据。

也就是说，我不确定我是否完全关注您尝试发送到不同电子邮件的内容。我不明白最终目标..？？API 凭证将告诉系统将钱放在哪里，或者从哪里提取数据，或者其他什么。

如果您只是想在结账时显示不同的徽标，您可以使用标准按钮代码或 API 请求中的参数来实现。

让我知道这是否有帮助。再说一次，我不确定我是否理解你在这里的目的。

# c# - 将 System.Drawing.Image 转换为 System.Data.Linq.Binary

> ID：12385453
> 
> 赞同：3
> 
> 时间：2012-09-12T09:48:01.787
> 
> 标签：c#, image, linq

我正在开发一个在数据库中存储图像的应用程序。这些图像与一个对象有关，我必须为此使用 Linq。当我将对象插入数据库时​​，它的图像是 System.Drawing.Image，需要在 System.Data.Linq.Binary 中转换。

我找到了另一种方式的tutos，但没有找到这种方式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T09:52:55.463

```
 using (MemoryStream ms = new MemoryStream())
  {
      image.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
      var binary = new System.Data.Linq.Binary(ms.GetBuffer());
  } 
```

# asp.net - 如何制作，一个解决方案中的两个 Web 项目在一个实例下如何工作？ASP.NET

> ID：12385454
> 
> 赞同：0
> 
> 时间：2012-09-12T09:48:00.500
> 
> 标签：asp.net, webforms

我在 VB.NET 上有一个 Web 项目，并在 C# 上创建了第二个 Web 项目。我希望我的网站作为一个整体工作。示例转到 url [http://mysite.com/default.aspx](http://mysite.com/default.aspx) - 第一个 Web 项目的页面，但如果我转到[http://mysite.com/manage/default.aspx](http://mysite.com/manage/default.aspx) - 此页面来自第二个 Web 项目。对不起，我的英语不好。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:29:14.837

这应该没有任何问题。

我可以想到两种方法来做到这一点，只需将第二个项目放在第一个项目中的文件夹中就可以了（尽管您需要将 DLL 从第二个项目 bin 目录移动到第一个项目中。

所以：

```
Web Site Root
 L Project 1 <Directory>
  L Bin <Directory>
   L Project1.DLL
   L Project2.DLL
  L Default.aspx
 L Project 2 <Directory>
  L Default.aspx 
```

另一种方法是从第一个项目中创建一个指向第二个项目的虚拟目录/应用程序（尽管 bin 目录的东西仍然适用于虚拟目录解决方案）

一旦它不再编译为 c# 或 VB，它就会被编译成 IL，所以只要它编译成 IL，你最初使用的语言就无关紧要了。

# syntax - octopress 中的语法高亮显示

> ID：12385455
> 
> 赞同：3
> 
> 时间：2012-09-12T09:48:11.523
> 
> 标签：syntax, octopress

我需要做什么才能使语法突出显示在 octopress 上工作？这是我目前拥有的：

```
``` ruby 
 class Fixnum
   def prime?
     ('1' * self) !~ /^1?$|^(11+?)\1+$/
   end
 end
``` 
```

反引号的左侧没有空格，我在编辑器的最左侧和要突出显示的代码之间放置了一个空格。

我也尝试了代码块，但即使我已经在他们的网站上复制粘贴了示例，也没有运气：

```
{% codeblock lang:objc %}
[rectangle setX: 10 y: 10 width: 20 height: 20];
{% endcodeblock %} 
```

还有什么我需要安装的吗？我相信在我安装 octopress 时已经包含了代码块和反引号。但即使我包含语言，它仍然看起来像这样：

![在此处输入图像描述](../Images/a6dd77981bbd08c26c7427a5f0c8c96a.png) 有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T13:28:32.967

你的问题解决了吗？

如果没有，您可以尝试使用**不同的降价引擎**（默认为 rdiscount + pygments）。

其他可能的引擎是 kramdown、redcarpet 和 maruku，它们**使用 ruby​​ 而不是 python**，所以如果你对 python 有问题，这可能会解决它们。

我写了[一篇](http://blog.alestanis.com/2013/02/04/octopress-and-the-twilight-color-scheme/)关于如何使用 Octopress 设置 kramdown 的博客文章，您可以查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T05:04:52.910

*   专门为 Octopress 创建的 Solarized [语法突出显示](http://ethanschoonover.com/solarized)的 Sass 端口。
*   Gist 代码嵌入 - 由[Brandon Tilly](https://gist.github.com/1027674)编写。
*   使用下载链接从您的文件系统中插入代码片段。
*   `<figure>`带有和`<figcaption>`可选下载链接 的简单内联代码块。
*   Pygments 缓存 - [Jekyll 社区插件](https://github.com/rsim/blog.rayapps.com/blob/master/_plugins/pygments_cache_patch.rb)。
*   使用 javascript 添加的基于表格的行号。

[Octopress 共享代码片段](http://octopress.org/docs/blogging/code/)

# c# - 无法更改列表框中所选项目的样式

> ID：12385456
> 
> 赞同：0
> 
> 时间：2012-09-12T09:48:18.050
> 
> 标签：c#, wpf, listbox

我正在尝试更改列表框的焦点/选定项。我的申请是基于[这篇文章](http://www.codeproject.com/Articles/279704/iOS-UIPickerView-like-control-in-WPF)。目前我正在尝试通过数据模板设置 ListBoxItem 样式：

```
 <DataTemplate x:Key="ItemTemplate">
        <TextBlock Text="{Binding}" 
                   Foreground="Black" 
                   FontFamily="Segoe UI" 
                   FontSize="22"
                   HorizontalAlignment="Left"
                   Padding="15,10,0,0"
                   />
    </DataTemplate>

    <DataTemplate x:Key="SelectedTemplate">
        <TextBlock Text="{Binding}" 
                   Foreground="Red" 
                   FontFamily="Segoe UI" 
                   FontSize="30"
                   HorizontalAlignment="Left"
                   Padding="15,10,0,0"
                   />
    </DataTemplate> 
```

我的想法是使用触发器在这些模板之间切换：

```
<Style TargetType="{x:Type ListBoxItem}" x:Key="ContainerStyle">
        <Setter Property="ContentTemplate" Value="{StaticResource ItemTemplate}" />
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="ContentTemplate" Value="{StaticResource SelectedTemplate}" />
            </Trigger>
        </Style.Triggers>
    </Style> 
```

列表框如下所示：

```
<ListBox x:Name="valuesItemsCtrl" 
         BorderThickness="0" 
         ItemContainerStyle="{StaticResource ContainerStyle}"
         Background="Transparent"
         Tag="{Binding }">
    <ListBox.AlternationCount>
        <Binding>
            <Binding.Path>Values.Count</Binding.Path>
        </Binding>
    </ListBox.AlternationCount>
        <ListBox.ItemsSource>
            <Binding>
                <Binding.Path>Values</Binding.Path>
            </Binding>
        </ListBox.ItemsSource>
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel />
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
    </ListBox> 
```

最后，我将模板添加到另一个 ListBox：

```
<ListBox x:Name="tumblersCtrl" 
                 BorderThickness="0" 
                 Background="Transparent" 
                 ItemsSource="{Binding Tumblers, ElementName=thisCtrl}" 
                 ItemTemplate="{StaticResource TumblerTemplate}">
</ListBox> 
```

感谢您的帮助或提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:14:22.160

使用`ItemTemplate`和数据触发器：

```
<ListBox ItemsSource="{Binding}">
    <ListBox.ItemContainerStyle>
        <Style TargetType="{x:Type ListBoxItem}">
            <Setter Property="IsSelected" Value="{Binding IsSelected}"/>
        </Style>
    </ListBox.ItemContainerStyle>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Name}" 
                       Foreground="Black" 
                       FontFamily="Segoe UI" 
                       FontSize="22" 
                       HorizontalAlignment="Left" 
                       Padding="15,10,0,0"
                       x:Name="tbName"/>
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding IsSelected}" Value="True">
                    <Setter TargetName="tbName" Property="Foreground" Value="Red"/>
                    <Setter TargetName="tbName" Property="FontSize" Value="30"/>
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

其中绑定数据是以下内容的集合：

```
public class ViewModel : ViewModelBase
{
    public String Name
    {
        get { return name; }
        set
        {
            if (name != value)
            {
                name = value;
                OnPropertyChanged("Name");
            }
        }
    }
    private String name;

    public Boolean IsSelected
    {
        get { return isSelected; }
        set
        {
            if (isSelected != value)
            {
                isSelected = value;
                OnPropertyChanged("IsSelected");
            }
        }
    }
    private Boolean isSelected;
} 
```

窗口代码隐藏：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new[]
        {
            new ViewModel { Name = "John", IsSelected = true },
            new ViewModel { Name = "Mary" },
            new ViewModel { Name = "Pater" },
            new ViewModel { Name = "Jane" },
            new ViewModel { Name = "James" },
        };
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:59:30.577

如果要更改模板，请使用`DataTemplateSelector`.

关闭您的 ContainerStyle 并将其设置`ListBox.ItemsTemplateSelector`为您的自定义数据模板选择器作为静态资源。

[您可以在此链接](http://www.switchonthecode.com/tutorials/wpf-tutorial-how-to-use-a-datatemplateselector)中找到详细示例。

**编辑：** 根据您的评论，您不需要 DataTemplate 只需在触发器中设置这两个属性：

```
<Style TargetType="{x:Type ListBoxItem}" x:Key="ContainerStyle">
    <Setter Property="Foreground" Value="Black" />
    <Setter Property="FontSize" Value="22" />
    <Setter Property="FontFamily" Value="Segoe UI" />
    <Setter Property="HorizontalAlignment" Value="Left" />
    <Setter Property="Padding" Value="15,10,0,0" />
    <Style.Triggers>
        <Trigger Property="IsSelected" Value="True">
            <Setter Property="Foreground" Value="Red" />
            <Setter Property="FontSize" Value="30" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

# asp.net-mvc - asp.net mvc 属性更改事件

> ID：12385470
> 
> 赞同：2
> 
> 时间：2012-09-12T09:48:40.100
> 
> 标签：asp.net-mvc, inotifypropertychanged, asp.net-mvc-partialview

我是一名`.Net`桌面应用程序开发人员，试图切换到`ASP.Net` `MVC`（3 或 4 无关紧要）。我们有一个`.Net`库，可以通知任何`GUI`您想`assembly`通过`Property Changed Events`（或我们认为为此必要的任何其他自定义事件）添加此内容的任何人。

这甚至可能不是一个相关的问题，因为它在 中可能完全不同，但是在从服务器上的程序集中接收到 a 后，如何在客户端的浏览器中`ASP.Net` `MVC`更新您的？顺便说一句，我们自己生成这些事件。组件是我们自己的。`View``Property Changed Event`

我读过关于`Partial Views`，但我需要调查一下。我遇到的任何事情都显得那么麻烦。因为它在桌面开发中非常直接和简单。所以我开始怀疑是否`Property Changed Events`是为网络开发时要走的路。

想法？链接？来源？我很感兴趣。

ps：请参阅标签以进一步了解我的目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:55:00.173

`HTTP`世界是完全不同的，你从服务器
请求一些东西，`server(Asp.Net MVC)`然后你从服务器得到响应。
服务器无法与用户联系**
，因为 asp.net 服务器在响应后不会在内存中保留任何内容，
所以在这里你在 2 个方面是错误的
1\. `property changes`- 因为在响应之后内存中没有任何内容服务器没有`models(Objects)`，所以 whoz 属性实际上没有任何变化
2\. 即使你保持一些静态的东西，如果发生变化，你也无法联系客户端

**有一些框架可以让你联系客户回来，他们通过[套接字](http://en.wikipedia.org/wiki/WebSocket)或[彗星来做到这一点](http://en.wikipedia.org/wiki/Comet_%28programming%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:53:51.243

您需要摆脱桌面（以及相关的 WebForms）开发的事件驱动思维。

MVC 是一种用于分离关注点的设计模式，不会存在紧密绑定的事件，除非您自己做一些 hack-ish 工作。

但是，您可以通过使用像[SignalR](http://signalr.net/)这样依赖于 Javascript 和打开连接的框架来完成此操作，但 MVC 中不存在事件的概念。

# symfony - symfony2 的 propel.ini 的位置？

> ID：12385473
> 
> 赞同：1
> 
> 时间：2012-09-12T09:48:47.417
> 
> 标签：symfony

我正在从 symfony1 迁移到 symfony2，我很难实现推进行为。symfony2 中的 propel.ini 实际上在哪里？

好吧，在 sf1.4 中，它位于根配置目录中。symfony2怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:56:08.130

[Propel ORM Symfony2 页面](http://www.propelorm.org/cookbook/symfony2/working-with-symfony2.html#propel_configuration)是这样说的：

> 您可以在项目中添加一个 app/config/propel.ini 文件来指定一些配置参数。...但是，配置 Propel 的推荐方法是依赖构建属性。
> 
> 您可以通过在 app/config 中创建一个 propel.ini 文件来定义构建属性，如下所示，但您也可以通过在 app/config/config.yml 中添加构建属性来遵循 Symfony2 约定

所以我相信你可以通过创建来接近 Symfony1 的行为`app/config/propel.ini`，但更惯用的方法是使用`app/config/config.yml`该页面说明的方法。

警告：我没有将 Propel 与 Symfony2 一起使用，所以这个答案完全基于手册。

# protocols - 为什么他们总是使用数字作为返回码？

> ID：12385476
> 
> 赞同：3
> 
> 时间：2012-09-12T09:48:52.860
> 
> 标签：protocols

一旦我建立了一个项目，我需要设置代码来描述返回给客户的操作结果。

所以代码是这样的：

```
100 'succeed 
200 'failed
201 'failed because the require object doesn't exist
... 
```

或像这些：

```
43100 'shop buy item succeed
43201 'shop buy item failed because user doesn't have enough money
43202 'shop buy item failed because the item sold out.
... 
```

但是在实际开发中，返回码的事情并不顺利，队友必须用字典查一个code的含义，没有人记得它们。

所以我想为什么我们必须使用数字作为返回码？只是因为根据我们的经验，许多协议都返回数字代码，例如最著名的 http 协议 404,403,500 等。

所以我的问题是他们为什么使用数字？字符串不是更适合人类阅读吗？像 'FileNotFound' 替换 404\. 或 'success.cart.order' 这意味着在模块 'cart' 子函数 'order' 中操作是成功的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:09:03.470

人类可读性只是一方面，在大多数情况下您还需要*处理*操作结果。执行字符串比较容易出错并且不必要地昂贵。最近，有人问到如何[使用常量值而不是文字](https://stackoverflow.com/questions/12384592)，这是实现可读性的方法：通过对所有返回码使用命名良好的常量。我喜欢使用`Enum`s 来完成这项任务，但这在所有编程语言中都是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:09:47.603

因为很多时候，收到状态码的东西是*另*一段代码。

必须解析字符串消息（可能因语言设置而异，或者因为开发人员选择在以后的版本中改进措辞）可能非常复杂。

在许多情况下，您可以返回一个数字代码*和*一条消息——一个是供代码使用的，另一个是供人类使用的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T10:12:53.747

好吧，我不知道确切的答案。然而，对于软件来说，数字有一些优势：

*   整数处理比字符串处理更快，并且数字需要更少的消息存储（无论是在内存中还是通过网络）。
*   几十年来，数字允许您使用`switch`/跳转表（处理速度也更快）。
*   错别字与数字不那么微妙。您不太可能犯错误，例如使用`FileNotfound`而不是`FileNotFound`.
*   在内存中，字符串往往以许多不同的方式存储。我猜数字也减少了互操作性问题。

# database - 规范化后创建外键

> ID：12385478
> 
> 赞同：1
> 
> 时间：2012-09-12T09:48:54.697
> 
> 标签：database, database-design, foreign-keys, primary-key, normalization

我一直在创建一个数据库，并且刚刚完成了规范化步骤。其中一个关系通过部分依赖违反了 2NF，因此我根据规范化指南将其拆分为两个关系。我想知道的是，对于我创建的新关系，它是否具有依赖于原始关系主键的外键？

例如;

标准化前：R{PK1, PK2, attr1, attr2}

归一化后：R1{PK1, PK2, attr1} R2{PK2, attr2}

PK2 应该与 PK1 有外键吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:36:56.887

理想情况下，您希望在 R1{PK2} 和 R2{PK2} 之间强制执行连接依赖关系。不幸的是，大多数 DBMS（基于 SQL 的 DBMS）不能强制表之间的连接依赖关系。

如果你不能强制加入依赖，你至少可以让 R1.PK2 成为引用 R2.PK2 的外键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T18:14:43.267

不。

由于 attr2 在功能上仅依赖于 PK2，因此 attr2 对于具有给定值的 PK2 的所有行具有相同的值。如果您将 PK1 添加到 R2，您将有两个选择，都不好。

1.  对于 PK2 的每个值，您只能在 R2 中拥有一行，在这种情况下，您仅限于 PK1 的一个值。这会过度限制您的数据。

2.  您可以在 R2 中有许多行，所有行都具有相同的 PK2 值，但每行都具有不同的 PK1 值。现在你不再是 2NF 了，你又回到了你开始的地方。

# java - Struts2 结果类型不调用 portlet

> ID：12385483
> 
> 赞同：2
> 
> 时间：2012-09-12T09:49:10.467
> 
> 标签：java, struts2, portlet

现在这是奇怪的东西！

/viewClientFXPortlet /createFXReports.jsp

当我的操作类返回结果“reportsuccessful”时，它不会调用 /viewClientFXPortlet，而是因为 jvm 崩溃而无限次调用相同的 portlet。如果我用 jsp 页面替换 portlet，它工作正常。需要的是调用portlet。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T15:56:09.263

If you are indeed trying to pass parameters between portlets you will nide something called Inter Portlet Communication (IPC)

# c++ - 内核开发和 C++

> ID：12385485
> 
> 赞同：29
> 
> 时间：2012-09-12T09:49:14.680
> 
> 标签：c++, operating-system, kernel

据我[所知](https://stackoverflow.com/questions/580292/what-languages-are-windows-mac-os-x-and-linux-written-in)，即使常见的操作系统有部分是用其他语言编写的，内核完全是用 C 编写的。

我想知道用 C++ 编写内核是否可行，如果不可行，会有什么缺点。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-12T09:54:42.787

这在[OSDev Wiki](http://wiki.osdev.org/C++)中有明确的介绍。

基本上，您要么必须为某些事物（如 RTTI、异常）实现运行时支持，要么避免使用它们（只留下 C++ 的一个子集）。

除此之外，C++ 是更复杂的语言，因此您需要有一些更胜任的开发人员，他们不会把它搞砸。当然，Linus Torvalds 讨厌 C++ 纯属巧合。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-09-12T10:41:32.417

有很多用 C++ 实现的常用操作系统（或其中的一部分）的例子——IOKit——MacOSX 和 IOS 的设备驱动子系统是用[EC++](http://en.wikipedia.org/wiki/Embedded_C++)实现的。然后是[eCOS RTOS——](http://ecos.sourceware.org)内核是用 C++ 实现的，甚至使用模板。

操作系统传统上充斥着用 C 语言实现的 OO 概念示例。在 linux 设备模型`kobject`中，实际上是驱动程序和设备对象的基类，完成了 DIY v-tables 和一些在宏中实现的时髦安排，用于 up 和向下铸造。

Windows NT 内核有一个更根深蒂固的内核对象继承层次结构。对于所有抱怨内核代码中异常处理的适用性的邻居来说，正是提供了这样一种机制。

传统上，反对在内核代码中使用 C++ 的论点是：

*   可移植性：所有预期目标平台的 C++ 编译器的可用性。这不再是一个真正的问题
*   C++ 语言机制（例如 RTTI 和异常）的成本。显然，如果要使用它们，标准实现是不合适的，需要使用特定于内核的变体。这一般是使用EC++背后的驱动
*   C++ API 的鲁棒性，尤其是[脆弱的基类问题](http://en.wikipedia.org/wiki/Fragile_base_class)

毫无疑问，异常和[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)范式的使用将极大地提高内核代码质量——你只需要查看 BSD 或 linux 的源代码就可以看到替代方案——使用 s 实现的大量错误处理代码`goto`。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-01-07T16:02:34.090

为了解决 Torvalds 的问题以及此处其他地方提到的其他问题：在用 C++ 编写的硬 RT 系统中，不使用 STL/RTTI/异常，并且可以将相同的原则应用于更宽松的 Linux 内核。关于“OOP 内存模型”或“多态性开销”的其他担忧基本上表明程序员从未真正检查过汇编级别或内存结构发生的情况。C++ 和 C++ 一样高效，并且由于优化的编译器比 C 程序员编写查找表的效率要高很多倍，因为他手头没有虚函数。

在普通程序员的手中，C++ 不会添加任何额外的汇编代码而不是 C 编写的代码。在阅读了大多数 C++ 结构和机制的 asm 翻译后，我想说编译器甚至比 C 有更多的优化空间，并且有时可以创建更精简的代码。因此，就性能而言，使用 C++ 和使用 C 一样高效非常容易，同时仍然利用 C++ 中 OOP 的强大功能。

所以答案是它与事实无关，基本上围绕着偏见，不知道 CPP 创建了什么代码。我个人喜欢 C 几乎和 C++ 一样多，我不介意，但是没有理由反对在 Linux 之上或在内核本身中分层面向对象的设计，它会给 Linux 带来很多好处。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-09-12T10:14:14.697

您可以或多或少地用您喜欢的任何语言编写操作系统内核。

然而，有几个理由更喜欢 C。

*   这是一门简单的语言！魔法很少。您可以毫不费力地推断编译器将从您的源代码生成的机器代码。
*   它往往很快。
*   所需的运行时间并不多；将其移植到新系统所需的工作量很小。
*   有许多体面的编译器可用于许多不同的 CPU 和系统架构。

相比之下，C++ 可能是一种非常复杂的语言，它需要做很多魔法来将越来越高级的 OOP 代码转换为机器代码。对生成的机器代码进行推理变得更加困难，当您需要开始调试恐慌的内核或不稳定的设备驱动程序时，您的 OOP 抽象的复杂性将开始变得非常烦人……尤其是如果您必须通过用户不友好的方式进行调试调试端口到目标系统。

顺便说一句，Linus 并不是唯一对系统编程语言有强烈看法的操作系统开发人员。OpenBSD 的 Theo de Raadt 也对这个问题做了一些选择引用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-12T10:32:22.147

用 C++ 编写内核的可行性很容易确定：它已经完成了。[EKA2](http://www.developer.nokia.com/Community/Wiki/EPOC_Kernel_Architecture_2)是 Symbian OS 的内核，它是用 C++ 编写的。

但是，某些 C++ 功能的使用[限制](http://en.wikipedia.org/wiki/Symbian#Symbian_C.2B.2B)适用于 Symbian 环境。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-24T18:54:01.857

虽然 (ANSI) C 有一些“诚实”的东西，但 C++ 也有一些“诚实”的东西，以不同的方式。

C++ 对抽象对象的句法支持是非常值得的，无论是什么应用程序空间。可用于减轻误称的工具越多，效果就越好……而类就是这样的工具。

如果现有 C++ 编译器的某些部分不能很好地适应内核级的现实，那么削减一个以“正确”方式执行它的编译器的修改版本，并使用它。

就程序员的能力和代码质量而言，可以用 C 或 C++ 编写丑陋或崇高的代码。我认为通过在内核级别禁止它来歧视那些实际上可以很好地编写 OOP 的人是不正确的。

也就是说，即使作为一名经验丰富的程序员，我也怀念过去用汇编程序编写代码的日子。我喜欢它们……C++ 和 ASM……只要我可以使用 Emacs 和源代码级调试器 (:-)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-12T10:00:27.477

多年后的修订：

回顾过去，我想说最大的问题实际上是 C++ 中的大量高级特性，这些特性要么隐藏，要么不受程序员的控制。该标准不强制执行任何特定的实现方式，即使大多数实现遵循共同的理智，也有很多充分的理由要 100% 明确并完全控制事物在 OS 内核中的实现方式。

这允许（只要您知道自己在做什么）减少内存占用，基于访问模式而不是 OOP 范例优化数据布局，从而提高缓存友好性和性能，并避免可能隐藏在大量数据中的潜在错误C++ 的高级特性。

请注意，即使更简单，甚至 C 在某些情况下也太难以预测，这也是内核代码中还有很多特定于平台的程序集的原因之一。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-12-28T21:42:15.860

Google 新推出的操作系统**Fuchsia**基于名为**Zircon**的内核，该内核主要使用 C++ 编写，部分使用汇编语言[[1]](https://en.wikipedia.org/wiki/Google_Fuchsia#Kernel) [[2]](https://fuchsia.dev/fuchsia-src/development/languages/c-cpp/cxx)。另外，操作系统的其余部分也主要是用 C++ [[3]](https://fuchsia.dev/fuchsia-src/contribute/governance/policy/programming_languages#analysis_2)编写的。我认为现代 C++ 为程序员提供了许多理由将其用作大型代码库的通用编程环境。它有很多很棒的功能，并且会定期添加新功能。我认为这是谷歌做出这一决定的主要动机。我认为 C++ 很容易成为系统编程的未来。

* * *

## 回答 #9

> 赞同：-6
> 
> 时间：2014-12-27T00:07:26.603

C 的一大好处是它的可读性。如果您有很多代码，则更具可读性：

```
foo.do_something(); 
```

或者：

```
my_class_do_something(&foo); 
```

每次使用 foo 时，C 版本都会明确说明 foo 是哪种类型。在 C++ 中，你有很多很多模棱两可的“魔法”在幕后进行。所以如果你只看一小段代码，可读性会差很多。

# windows - Windows 7 Qt 创建者 libqxt

> ID：12385486
> 
> 赞同：3
> 
> 时间：2012-09-12T09:49:14.720
> 
> 标签：windows, qt, build, libqxt

> SDK：在 Windows 7 上运行的 Qt Creator 2.4.1（Qt 4.7.4（32 位））
> 软件：libqxt
> 最终目标平台：Harmattan（诺基亚 N9）

我正在开发一个假设使用 qt-Brisa 的应用程序，而后者又使用 libqxt，所以我正在尝试安装 libqxt。

最后我正在做一个诺基亚 N9 (Harmattan) 应用程序所以我需要 libqxt 的静态库

但是，如果我尝试使用命令提示符或使用 Qt Creator 安装 libqxt，则会遇到问题。

什么是正确的方法，我认为使用 Qt Creator 是构建它的正确方法？

## 试试 1

使用命令提示符方法（根据[http://dev.libqxt.org/libqxt/wiki/user_guide](http://dev.libqxt.org/libqxt/wiki/user_guide)）

```
C:\QtSDK\Desktop\Qt\4.8.1\msvc2010\bin

configure.bat -static -no-db -debug_and_release
   Testing for qmake...
   Testing for mingw32-make...
   Testing for nmake...
   Testing for GNU make...
       Using GNU make.
   Testing for optional external libraries.
   If tests fail, some features will not be available.
   Testing for Zero Conf...
       Zero Conf disabled.
   Configuration successful.
   Generating makefiles...
Project MESSAGE: building docs
Project MESSAGE: building core module
Project MESSAGE: building widgets module
Project MESSAGE: building network module
Project MESSAGE: building sql module
Project MESSAGE: building web module
Reading C:/temp/Project/libqxt/libqxt/tools/3rdparty/qdoc3/qdoc3.pro
Reading C:/temp/Project/libqxt/libqxt/src/core/core.pro
Reading C:/temp/Project/libqxt/libqxt/src/widgets/widgets.pro
Project MESSAGE: Warning: unknown QT: widgets
Project MESSAGE: Warning: unknown QT: widgets
Project MESSAGE: Warning: unknown QT: widgets
Reading C:/temp/Project/libqxt/libqxt/src/designer/designer.pro
Project MESSAGE: Warning: unknown QT: widgets
Project MESSAGE: Warning: unknown QT: widgets
Project MESSAGE: Warning: unknown QT: widgets
Project MESSAGE: Warning: unknown QT: widgets
Project MESSAGE: Warning: unknown QT: widgets
Project MESSAGE: Warning: unknown QT: widgets
Reading C:/temp/Project/libqxt/libqxt/src/network/network.pro
Reading C:/temp/Project/libqxt/libqxt/tools/jsonrpcclient/jsonrpcclient.pro
Reading C:/temp/Project/libqxt/libqxt/src/sql/sql.pro
Reading C:/temp/Project/libqxt/libqxt/src/web/web.pro
   Makefiles generated. Run make now.

make
Makefile:280: *** multiple target patterns.  Stop. 
```

为什么它使用 GNU make 而不是 qmake 或者我做错了什么？

## 试试 2

使用 Qt 创建者

我还尝试将 libqxt 项目加载到 Creator（我更喜欢），但编译输出窗口显示以下内容

```
 11:05:50: Running build steps for project libqxt...
 11:05:50: Starting: "c:\qtsdk\desktop\qt\4.8.1\msvc2010\bin\qmake.exe"
 C:\temp\Project\libqxt\libqxt\libqxt.pro -r -spec win32-msvc2010 "CONFIG+=declarative_debug"
 WARNING: features.path is not defined: install target not created

 11:05:50: The process "c:\qtsdk\desktop\qt\4.8.1\msvc2010\bin\qmake.exe" exited normally.
 11:05:50: Starting: "C:\QtSDK\QtCreator\bin\jom.exe" 

 jom 1.0.6 - empower your cores

 11:05:51: The process "C:\QtSDK\QtCreator\bin\jom.exe" exited normally. 
```

但这也没有编译
（警告：未定义 features.path：未创建安装目标）

当它编译时，我如何将 libqxt“添加”到 Qt 环境的其余部分，以便另一个项目可以“看到”libqxt 库，是通过“全部部署”吗？

问候斯特凡

# c - char 数组和字符串长度

> ID：12385487
> 
> 赞同：-1
> 
> 时间：2012-09-12T09:49:16.947
> 
> 标签：c, char

我已经定义了字符串：

```
char ch[300]; 
```

当我得到字符串长度时

```
strlen(ch); 
```

我总是有长度等于`323`。为什么我有这个神奇的数字？

是否因为函数 strlen 正在寻找第一个`0x00`字节并超出数组而发生？

让 strlen 离开数组是否安全？

这是否意味着如果我想使用 strlen 函数，我必须将最后一个字节设置为 `ch[300]=0`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:55:00.393

> 是否因为函数 strlen 正在寻找第一个 0x00 字节并超出数组而发生？

是的

> 让 strlen 离开数组是否安全？

不

> 这是否意味着如果我想使用 strlen 函数，我必须将最后一个字节设置为 ch[300]=0 ？

几乎 -`ch[299] = 0;`此外，您应该在已初始化的缓冲区上调用它，而不是在未初始化的缓冲区上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T09:54:13.060

strlen 搜索第一次出现的`0x00`. 如果没有找到，它会继续计数。这可能非常危险。如果您尝试获取超出范围的值，您的程序可能会崩溃，或者您可能会得到无法预料的结果。始终确保字符串为空终止。

# c - fgetc,getc 导致程序在读取文本文件时崩溃

> ID：12385490
> 
> 赞同：1
> 
> 时间：2012-09-12T09:49:30.250
> 
> 标签：c, file, input, fgetc, getc

怎么了？我很确定我的语法是正确的，因为它没有警告。另外它不会过去`getc(document);`我尝试了`fgetc(document);`相同的结果。我没有得到什么？（我曾经`printf("$");`看到它崩溃的地方）

```
char temp[51];
int cntr = 0,listcntr = 0,buffer;
FILE *document;
contact list[MAXCONTACTS];
document = fopen("addressbook.txt","r");
do
{
    for(cntr = 0;cntr < 51; cntr++)
        temp[cntr] = '\0';
    cntr = 0;
    do
    {

        buffer = getc(document);
         printf("$");
        if(buffer != '\t')
            temp[cntr] = buffer;
        ++cntr; 
    }while(buffer != '\t'&& buffer != EOF);
list[listcntr].name = temp; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:00:09.347

好的，我稍微修改了您的代码并添加了一些检查，也许就足够了。

```
char temp[51];
int listcntr = 0,buffer;
contact list[MAXCONTACTS];
FILE *document = fopen("addressbook.txt","r");

if (NULL == document){
    //exit here
}

for(int i = 0;i < 51; i++){
    temp[i] = '\0';
}

int cntr = 0;
for (int cntr=0; cntr < 51 && !feof(document); cntr++){
    buffer = getc(document);
    if (buffer == '\t'){
        break;
    }
    temp[cntr] = buffer;
}

if(listcntr < MAXCONTACTS){
    // you should probably copy temp here
    list[listcntr].name = temp;
} 
```

# visual-studio-2010 - 在上下文菜单中没有抑制 StyleCop 警告的选项

> ID：12385493
> 
> 赞同：2
> 
> 时间：2012-09-12T09:49:45.640
> 
> 标签：visual-studio-2010, stylecop

我刚刚安装了 StyleCop v4.7.36.0 并且正在使用 Visual Studio 2010。

当我在解决方案或单个项目上运行 StyleCop 时，错误列表窗口中会正确报告警告。

但是，当我右键单击时，没有选项可以禁止显示警告消息。

![在此处输入图像描述](../Images/6ff5c3cfa874e8dcfc466a903889658b.png)

有没有什么办法解决这一问题？我真的不想求助于手动编辑`GlobalSuppressions.cs`文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-15T15:35:39.530

在 Visual Studio 项目资源管理器中右键单击您的项目。然后到 StyleCop 设置。您可以从显示的窗口中禁用您想要的任何警告。您可以从代码中找到图片中显示的特定警告。因此，例如要禁用第一个警告显示，您将转到 StyleCop 设置窗口中的警告 1633，然后取消选中您想要的。

# magento - Magento - 逆转收藏的最佳方式

> ID：12385497
> 
> 赞同：5
> 
> 时间：2012-09-12T09:50:05.913
> 
> 标签：magento, collections, reverse

反转使用创建的自定义集合的最佳方法是什么`new Varien_Data_Collection()`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T10:28:39.327

集合是否已加载？该类支持 setOrder，因此如果您知道它是如何排序的并且尚未加载，您可以简单地在同一字段上调用 ​​setOrder，使用`Varien_Data_Collection::SORT_ORDER_DESC`或`Varien_Data_Collection::SORT_ORDER_ASC`视情况而定。或者，如果您只需要对象而不需要特定于您可以使用的集合。

```
// where $collection is your instance of Varien_Data_Collection
$reversedCollection = array_reverse($collection->toArray()); 
```

# java - 用于 Rgb、Rgba、Hsl、Hsla 颜色编码的正则表达式模式

> ID：12385500
> 
> 赞同：6
> 
> 时间：2012-09-12T09:50:32.183
> 
> 标签：java, regex

我正在为这种字符串寻找一些正则表达式

```
rgb(r,g,b)
rgba(r,g,b,a)
hsl(h,s%,l%)
hsla(h,s%,l%,a) 
```

和：

```
r,g,b integer included between 0 and 255, 
a float between 0 and 1 (truncated to first digit after the point)
h integer included between 0 and 359
s,l integer included between 0 and 100 
```

对于 rgb，我写了那些正则表达式：

```
rgb\(\s*((?:[0-2]?[0-9])?[0-9])\s*,\s*((?:[0-2]?[0-9])?[0-9])\s*,\s*((?:[0-2]?[0-9])?[0-9])\s*\)$ 
```

它可以工作，但它也允许像 rgb(299,299,299) 这样的字符串。我怎样才能使它更有效？那么rgba，hsl和hsla呢？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T10:20:05.390

最后我写了这些正则表达式：

```
 String keywords_color_regex = "^[a-z]*$";
    String hex_color_regex = "^#[0-9a-f]{3}([0-9a-f]{3})?$";
    String rgb_color_regex = "^rgb\\(\\s*(0|[1-9]\\d?|1\\d\\d?|2[0-4]\\d|25[0-5])%?\\s*,\\s*(0|[1-9]\\d?|1\\d\\d?|2[0-4]\\d|25[0-5])%?\\s*,\\s*(0|[1-9]\\d?|1\\d\\d?|2[0-4]\\d|25[0-5])%?\\s*\\)$";
    String rgba_color_regex = "^rgba\\(\\s*(0|[1-9]\\d?|1\\d\\d?|2[0-4]\\d|25[0-5])%?\\s*,\\s*(0|[1-9]\\d?|1\\d\\d?|2[0-4]\\d|25[0-5])%?\\s*,\\s*(0|[1-9]\\d?|1\\d\\d?|2[0-4]\\d|25[0-5])%?\\s*,\\s*((0.[1-9])|[01])\\s*\\)$";
    String hsl_color_regex = "^hsl\\(\\s*(0|[1-9]\\d?|[12]\\d\\d|3[0-5]\\d)\\s*,\\s*((0|[1-9]\\d?|100)%)\\s*,\\s*((0|[1-9]\\d?|100)%)\\s*\\)$"; 
```

我正在开发一个供我个人使用的库，所以我更喜欢使用正则表达式。我完全注释了代码。感谢您的提示！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T12:30:09.697

我可以为您看到两种解决方案。任何一个 ：

### 1.从输入中提取数字，然后用`if`条件检查它们

**a) 正则表达式**

> rgb\(\s*(?:(\d{1,3})\s*,?){3}\)

**b) 视觉描述**

![用于解析 RGB 值的简单正则表达式](../Images/ef09ade7afae16b040849cbdf53d20a7.png)

### 2\. 构建一个（相当复杂的）正则表达式来直接检查输入

**a) 正则表达式**

> rgb\(\s*(?:(?:\d{1,2}|1\d\d|2(?:[0-4]\d|5[0-5]))\s*, ?){3}\)$
> 
> rdb(0,0,255) => **OK**
> rdb(104,10,299) => **KO**
> rdb(299,5,299) => **KO**

**b) 视觉描述**

![用于解析 RGB 值的更健壮的正则表达式](../Images/877c2f5ec4a1c9969731ce6a234ffd8d.png)

* * *

**尖端 ：**

*   正则表达式允许包含 0 到 359 之间的整数

    > \d{1,2}|[1-2]\d{2}|3[0-5]\d

*   正则表达式允许包含 0 到 100 之间的整数

    > \d{1,2}|100

### 结论

作为一般经验法则，为了**代码的可维护性，**更喜欢解决方案#1。不涉及正则表达式的开发人员会很快理解发生了什么。不要忘记完整地注释代码。

如果您更喜欢解决方案＃2，那么请准备好让开发人员在正则表达式方面具有良好的背景，因为正则表达式很复杂。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-22T10:01:29.750

十六进制

```
/[\#]([a-fA-F\d]{6}|[a-fA-F\d]{3})/gm 
```

RGB

```
/[Rr][Gg][Bb][\(](((([\d]{1,3})[\,]{0,1})[\s]*){3})[\)]/gm 
```

RGBA

```
/[Rr][Gg][Bb][Aa][\(](((([\d]{1,3}|[\d\.]{1,3})[\,]{0,1})[\s]*){4})[\)]/gm 
```

HSL

```
/[Hh][Ss][Ll][\(](((([\d]{1,3}|[\d\%]{2,4})[\,]{0,1})[\s]*){3})[\)]/gm 
```

HSLA

```
/[Hh][Ss][Ll][Aa][\(](((([\d]{1,3}|[\d\%]{2,4}|[\d\.]{1,3})[\,]{0,1})[\s]*){4})[\)]/gm 
```

# jquery - 使用返回的 json 数据填充 jquery 数据表

> ID：12385501
> 
> 赞同：0
> 
> 时间：2012-09-12T09:50:42.393
> 
> 标签：jquery, json

我有一些基于用户输入返回的 json 对象

```
$('#button').click(function () {
        var usersData= $('input[name="UserInputData"]').val();

        $.ajax({
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify({ UserInputData: usersData}),
            url: '/Home/Data',
            success: function (result) {
                $.each(result, function (i, item) {
                    // how to invoke data table and populate with returned
                    // item object, for ex. item.Title                    
                });
            },
            error: function () { alert("error"); }
        });
    }); 
```

只是为了澄清我从控制器获取 json 对象列表，没关系，我正在努力解决如何在数据表上显示这些数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:05:24.183

```
success: function (result) {
    //if table is already on the page
    var table = $("table-selector");
    table.find("tr").remove(); //remove all previous rows if needed

    //or, if table does not exist
    var table = $("<table></table>");
    $("table-container-selector").append(table);

    $.each(result, function (i, item) {
        var tr = $("<tr></tr>");
        table.append(tr);

        var td = $("<td>" + item.field1 + "</td>");
        tr.append(td);

        var td = $("<td>" + item.field2 + "</td>");
        tr.append(td);

        var td = $("<td>" + item.field3 + "</td>");
        tr.append(td);
    });
}, 
```

# java - 使用 java 连接到 Sqlite 数据库

> ID：12385504
> 
> 赞同：2
> 
> 时间：2012-09-12T09:50:59.437
> 
> 标签：java, sqlite, jdbc

我需要连接到 Sqlite 数据库，我正在使用以下代码，但我认为它连接到内存中的数据库。如何连接到磁盘上的数据库。

```
 String sDriver = "org.sqlite.JDBC";
        String Database = "NyDatabase.sqlite";
        String sJdbc = "jdbc:sqlite";
        String sDbUrl = sJdbc + ":" + Database;
        Class.forName(sDriver);

        conn = DriverManager.getConnection(sDbUrl);
        Statement st = conn.createStatement();

        // result = st.executeQuery(Select).toString();
        rs = st.executeQuery(Select);
        while (rs.next()) {
            for (int i = 1; i <= 4; i++)
                result[i] = rs.getString(i);
        }
        conn.close();

                    } catch (SQLException e) {

                    e.printStackTrace();
            }
            catch(Exception e){
        e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:07:01.270

你应该有：

```
 String sDbUrl = "jdbc:sqlite:C:/path/to/myDB.db"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:55:46.610

您必须使用正确的 JDBC URL 来指定数据库文件。

请参阅SQLite 的 JDBC 驱动程序文档中的[如何指定数据库文件](http://www.xerial.org/trac/Xerial/wiki/SQLiteJDBC#HowtoSpecifyDatabaseFiles)（假设这是您正在使用的 JDBC 驱动程序）。

# django - 管理部分的问题

> ID：12385511
> 
> 赞同：0
> 
> 时间：2012-09-12T09:51:21.273
> 
> 标签：django, django-admin

我正在开发一个**扩展****auth_user**表的应用程序，每当任何用户注册到该应用程序时，它的一个实例都会在扩展表中创建，它从简单的 url（手动）运行得很好，但是当我从管理员端登录并添加用户时它还将在扩展表中创建实例，但不显示或获取用户名，它只显示空白行。

model.py 代码如下：

```
from django.db import models
from django.contrib.auth.models import User
from django.db.models.signals import post_save
class Drinker(models.Model):
       user     =models.OneToOneField(User)
       birthday =models.DateField()
       name     =models.CharField(max_length=100)

       def __unicode__(self):
             return self.name

#create our user object to attach to our drinker object

def create_drinker_user_callback(sender, instance, **kwargs):
      drinker, new=Drinker.objects.get_or_create(user=instance)
post_save.connect(create_drinker_user_callback, User) 
```

最后 3 行第三行在扩展表饮酒者中创建实例，但不显示任何值，只是从 auth_user 表中获取 user_id。它不需要名字和生日

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:16:19.000

您没有填充 Drinker.name 字段。该行是空白的，因为**unicode** () 方法没有返回任何内容。

解决此问题的一种方法是在信号处理程序中显式设置它：

```
def create_drinker_user_callback(sender, instance, **kwargs):
      drinker, new=Drinker.objects.get_or_create(user=instance, name=instance.get_full_name())
post_save.connect(create_drinker_user_callback, User) 
```

或完全放弃（可能是多余的）名称字段并将其标准化：

```
class Drinker(models.Model):
    user = models.OneToOneField(User)
    birthday = models.DateField()

    def __unicode__(self):
        return self.user.get_full_name() 
```

# cakephp - 在 cake1.3 中保存表单数据

> ID：12385515
> 
> 赞同：0
> 
> 时间：2012-09-12T09:51:38.663
> 
> 标签：cakephp, cakephp-1.3

我的应用程序中有一个奇怪的问题。我有一个包含一些数据要编辑的表单，当我试图保存数据时，会发生奇怪的事情。

如果我把它放在`die('test');`末尾`beforeFilter()`，我会在屏幕上看到“test”，但如果我把它放在我的操作的开头，我会被重定向到登录页面。

仅当我传递一些特定数据时才会发生

```
$this->data['Movie']['title']) 
```

如果我通过别的东西

```
$this->data['Movie']['genere'] 
```

一切正常。

我该如何调试它？beforFilter 和 action 之间发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:02:02.993

如果您`Auth`的组件处于活动状态，则在您的`beforeFilter()`函数中检查您是否允许该用户执行该操作。

例如：

```
function beforeFilter() {
  $this->Auth->allow( array('add', 'edit', ) );  // for example
} 
```

在您的`allow()`方法中包含所需方法的名称。

# asp.net-mvc-3 - 导出到 excel 时 Math.Round() 不起作用

> ID：12385518
> 
> 赞同：0
> 
> 时间：2012-09-12T09:51:46.527
> 
> 标签：asp.net-mvc-3, excel, razor

在我导出到 excel 的视图中，我显示了这个变量的值

```
VeryGoodPercentage = subQst.Question.ReponseList.Where(
            r => r.ReponseValeur == 4 &&
            Model.SelectedGroupContactList.Select(c => c.ContaId).Contains(r.ContaId.Value)
            ).ToList().Count() * 100
            /
            denominator; 
```

我这样显示

```
<td class=xl76 align=right width=69 style='width:52pt'>@Math.Round(VeryGoodPercentage)%</td> 
```

当我显示视图而不导出到 Excel 时，一切正常。但是当我打开导出的 Excel 文件时，我发现该变量的值没有四舍五入。

例如：

在视图中：36%

在excel文件中：0.36

我使用这一行来生成文件：

```
Response.AddHeader("Content-Type", "application/vnd.ms-excel"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:52:43.130

就像声明的那样：

36% 和 0.36 应该是相同的 - 只是 excel 没有将其格式化为百分比，或者确实将 36 解释为百分比 - 这将导致 0.36 作为数字。

我不认为这是一个舍入问题，它是格式化或输入或两者兼而有之。

根据`@Math.Round(VeryGoodPercentage)`产生的值 - 0.xx 或 XX.XX - 带或不带 % 符号，excel 将对此进行不同的解释。

一些例子：

=0.36 将产生一个数 0.36

=36 将导致数字 36

到目前为止没有惊喜，但现在：

=0.36% 将导致 0.0036

=36% 将导致 0.36

但是那些是公式，现在如果你只是在一个空的“默认”格式化单元格上使用 F2 并写入它：

36% -> 您可以将其格式化为百分比，这会将其显示为 36%，但如果您将其格式化为“默认”，那么它将是数字 0.36！

0.36% -> 表现得像 36%

希望这比它更令人困惑;）祝你好运！

*编辑：*为了使这一点更加模糊，在我的国家`.`是数千的符号，所以你必须使用它`,`。

*编辑：*使用 VBA，您可以将列或单元格设置为使用特定的数字格式，如下所示：

```
Table1.Columns("A").NumberFormat = "0.00%" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T22:23:55.653

我终于在这里找到了解决方案

[格式化 HTML 表格单元格以便 Excel 格式化为文本？](https://stackoverflow.com/questions/4619909/format-html-table-cell-so-that-excel-formats-as-text)

只需将此 css 参数添加到标签：

```
mso-number-format:Percent; 
```

# android - 通过 Intent 使用基于 Tesseract 的 OCR

> ID：12385520
> 
> 赞同：2
> 
> 时间：2012-09-12T09:51:59.380
> 
> 标签：android, tesseract

我需要我的应用程序通过相机阅读文本。我知道有 Tesseract 库可以做到这一点，但如果有一个应用程序可以处理 Intents 以通过相机读取文本，我真的更喜欢，就像 Xzing 用于读取 QR 码一样。

有没有这样的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:38:37.433

目前 Google Play 上没有执行此操作的应用程序。

我已经考虑过制作一个，但这种应用程序的可能用例比扫描二维码的用例要大得多。有不同的可能场景：

*   车牌识别
*   识别 LCD 7 段显示器
*   韩语 OCR
*   用于程式化文本的 OCR
*   带有阴影或不均匀照明的 OCR

不同的场景对如何处理图像提出了挑战。通过 Intent 对此类应用程序的请求可能需要至少指定用于预处理图像的阈值类型以及要使用的语言/训练数据文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-10T20:48:15.540

我刚刚创建了一个应用程序，它使用相机拍照、裁剪照片并返回识别的文本作为结果。

在您的应用中，您可以使用以下代码：

```
 PackageManager pm = getPackageManager();
    try {
        pm.getPackageInfo("sunbulmh.ocr", PackageManager.GET_ACTIVITIES);

        Intent LaunchIntent = pm.getLaunchIntentForPackage("sunbulmh.ocr");
        LaunchIntent.setFlags(0);
        startActivityForResult(LaunchIntent,5);

    } catch (NameNotFoundException e) {
        Uri URLURI = Uri.parse("http://play.google.com/store/apps/details?id=sunbulmh.ocr");
        Intent intent = new Intent(Intent.ACTION_VIEW,URLURI);
        startActivity(intent);
    } 
```

然后，在 onActivityResult() 中获取结果：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (resultCode == RESULT_OK) {
        if(requestCode == 5){
            String ocr_txt = data.getStringExtra(Intent.EXTRA_TEXT);
            // ocr_txt contains the recognized text.

        }
    }
} 
```

# php - 自动填充表单并使用 URL 参数自动提交

> ID：12385524
> 
> 赞同：0
> 
> 时间：2012-09-12T09:52:37.213
> 
> 标签：php, javascript, html, forms

我想用 URL 参数自动填充下面的表单，例如使用这样的 URL：

example.co.uk/example.php?acct=wirelesslogicde&pwd=jenkins

如果可能的话，我也希望它自动提交，我该怎么做？

```
 <form action="http://www.twg.com/logincheck.aspx" method="post" name="login" style="margin-bottom: 0;">
            <p class="readmore" style="margin-bottom: 0;">
            <input name="module" id="module" type="hidden" value="HL"/>
            <input name="page" id="page" type="hidden" value="account.aspx"/>
            <strong>Account:</strong> <br />
            <input name="acct" id="acct" class="contact input" size="12" maxlength="16"/>
            <br />             
            <strong>Password:</strong> <br />
            <input type="password" name="pwd" id="pwd" class="contact input" size="12" maxlength="16"/><br /><br />
            <input type="submit" name="submit" id="submit" class="button" value="Login"/>
            </p>
            </form> 
```

新形式：

```
 <head>
    <script src="jq.js" type="text/javascript"></script>
    </head>

    <form action="http://www.zstats.com/logincheck.aspx" method="post" name="login" style="margin-bottom: 0;" id="zstatslogin">
    <p class="readmore" style="margin-bottom: 0;">
    <input name="module" id="module" type="hidden" value="HL"/>
    <input name="page" id="page" type="hidden" value="account.aspx"/>
    <strong>Account:</strong> <br />
    <input name="acct" id="acct" class="contact input" size="12" maxlength="16" value="<?php echo $_REQUEST['acct']; ?>"/>
    <br />             
    <strong>Password:</strong> <br />
    <input type="password" name="pwd" id="pwd" class="contact input" size="12" maxlength="16" value="<?php echo $_REQUEST['pwd']; ?>"/><br /><br />
    <input type="submit" name="submit" id="login" class="button" value="Login"/>
    </p>
    </form>

    <script type="text/javascript">
    $(document).ready(function() {
    $("#login").submit();       
    }); 
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:57:56.773

```
 <form action="http://www.twg.com/logincheck.aspx" method="post" id="login" name="login" style="margin-bottom: 0;">
           <p class="readmore" style="margin-bottom: 0;">
              <input name="module" id="module" type="hidden" value="HL"/>
              <input name="page" id="page" type="hidden" value="account.aspx"/>
              <strong>Account:</strong> <br />
              <input name="acct" id="acct" class="contact input"  value="<?=$_GET['acct']?>" size="12" maxlength="16"/>
              <br />             
              <strong>Password:</strong> <br />
              <input type="password" name="pwd" id="pwd" class="contact input"  value="<?=$_GET['pwd']?>" size="12" maxlength="16"/><br /><br />
              <input type="submit" name="submit" id="submit" class="button" value="Login"/>
           </p>
        </form> 
```

用于`$_GET`从 中获取值`URL`。

对于自动提交使用，请确保在使用以下脚本之前已加载 jquery 插件。如果您没有添加 JQuery，请从[JQuery](http://jquery.com/)`javascript`获取它，并像在您的文档`<head>`部分中的任何其他文件一样包含该文件`HTML`。

```
$(document).ready(function() {
   $("#login").submit();       
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:59:33.523

您可以使用 jQuery 进行自动提交

```
$('#some_form_id').onLoad(function(){
$.Post('form_target',{parameters:values});
}); 
```

对于填充，您可以添加

```
<input name="acct" id="acct" class="contact input" size="12" maxlength="16" value="<?php echo $_REQUEST['acc']; ?>"/>
<input type="password" name="pwd" id="pwd" class="contact input" size="12" maxlength="16" value="<?php echo $_REQUEST['pwd']; ?>"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T10:00:07.670

您可以通过 php 执行此操作，例如：

```
<input name="acct" id="acct" class="contact input" size="12" type="text" value=="<?php echo $_GET['acct'];?>" maxlength="16"/> 
```

或使用更复杂的javascript，查看window.location.search以过滤查询字符串..

参考：[https ://developer.mozilla.org/en-US/docs/DOM/window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)

# validation - 从图像的二进制数据中提取特征的工具

> ID：12385526
> 
> 赞同：1
> 
> 时间：2012-09-12T09:52:38.677
> 
> 标签：validation, machine-learning, file-format, feature-extraction, fuzzing

我正在从事一个项目，其中我的图像文件格式错误（模糊，即它们的图像数据已被更改）。这些文件在各种平台上呈现时会导致来自平台的警告/崩溃/通过报告。

我正在尝试使用无监督机器学习构建一个防护罩，这将帮助我将这些图像识别/分类为恶意或非恶意图像。我有这些文件的二进制数据，但我不知道我可以从中识别出哪些特征集/模式，因为从视觉上看，这些图像可能是任何东西。（我需要能够从二进制数据中找到特征集）

*我需要一些关于我可以用来从这个二进制数据中自动提取特征的工具/方法的建议*；我可以将其与无监督学习算法（例如 Kohenen 的 SOM 等）一起使用的功能集。

我是新手，任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T08:04:32.060

我不认为这是可行的。

问题是这些都是*旧的*漏洞利用，对它们的训练不会告诉你太多关于*未来的*漏洞利用。因为这是一个极其不平衡的问题：没有漏洞利用与另一个漏洞使用相同的东西。因此，即使您生成多个相同类型的文件，您最终也可能会获得一个相关的单个训练案例，例如针对每个漏洞利用。

尽管如此，您需要做的是从*文件元数据*中提取特征。这就是漏洞所在，而不是实际图像。因此，解析文件已经成为问题所在，您的检测工具可能会受到此类漏洞的攻击。

由于数据可能被*压缩*，一个简单的二进制特征也不会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:05:42.073

您可能根本不想查看实际的像素数据，因为大多数（几乎可以肯定）损坏位于文件头中，它具有不同的“块”（例如 png，其工作方式不同，但其他格式的工作方式相同） ：

> [http://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header](http://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header)

选择特征应该是直截了当的，制作一个从文件中读取所有标题信息的程序，如果信息丢失，并将这些信息用作特征。仍然会比不必要的原始图像数据小得多。

哦，总是从更简单的算法开始，比如 pca 和 kmeans 什么的，如果它们失败了，你应该拿出大炮。

# php - 从 Symfony2 中的目录检索图像到视图

> ID：12385533
> 
> 赞同：-2
> 
> 时间：2012-09-12T09:52:59.053
> 
> 标签：php, symfony

我已经按照 symfony2 cookbook 中提供的上传教程进行操作，现在我的问题是如何检索文件并对应数据库中的记录...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:17:32.507

如果您按照[本](http://symfony.com/doc/2.0/cookbook/doctrine/file_uploads.html)教程进行操作，您会注意到您的对象有一个`getWebPath()`函数。您可以使用此函数获取可在您的网站上使用的路径来创建指向该文档的链接。例如，在树枝中：

```
<a href="{{document.getWebPath()}}">Document</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:56:26.743

我已经能够参考实体实现上传文件的上传和编辑，但无法删除。这是控制器中用于删除的方法。

```
public function deleteimageAction($id)
{
    $form = $this->createDeleteForm($id);
    $request = $this->getRequest();

    $form->bindRequest($request);

    if ($form->isValid()) 
    {
        $em = $this->getDoctrine()->getEntityManager();
        $entity = $em->getRepository('AcmeDemoBundle:Document')->find($id);

        if (!$entity) 
        {
            throw $this->createNotFoundException('Unable to find Document entity.');
        }
        $entity->removeUpload(); 

        //$em->remove($entity);
        $em->persist($entity);
        $em->flush();

    }

    return $this->redirect($this->generateUrl('viewimages'));
} 
```

任何帮助将不胜感激...

# matlab - SPMD 与 Parfor

> ID：12385534
> 
> 赞同：7
> 
> 时间：2012-09-12T09:53:02.600
> 
> 标签：matlab, parallel-processing, classification

我是matlab中并行计算的新手。我有一个创建分类器（SVM）的函数，我想用几个数据集对其进行测试。我有一个 2 核工作站，所以我想并行运行测试。有人可以解释一下两者之间的区别：

```
 dataset_array={dataset1, dataset2}
 matlabpool open 2
 spmd
      my_function(dataset(labindex));
 end 
```

和

```
 dataset_array={dataset1, dataset2}
 matlabpool open 2
 parfor i:1=2
      my_function(dataset(i));
 end 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-12T14:03:39.503

spmd 是一个并行区域，而 parfor 是一个并行 for 循环。不同之处在于，在 spmd 区域中，当涉及到可以并行执行的任务时，您具有更大的灵活性。你可以写一个for循环，你可以对分布式数组和向量进行操作。您可以对整个工作流程进行编程，该流程通常包含多个循环。这是有代价的：您需要了解更多关于在线程之间分配工作和数据的信息。例如，并行化循环需要在工作程序之间显式划分循环索引范围（您在代码中使用*labindex 执行此操作*），并且可能创建分布式数组。

另一方面， parfor 仅执行此操作-并行化的 for 循环。自动并行化，您可以添加，因此工作由 MATLAB 在工作人员之间分配。

如果您只想并行运行一个循环，然后在本地客户端上处理结果，则应使用 parfor。如果您想并行化整个 MATLAB 程序，您将不得不处理 spmd 和工作分配的复杂性。

# function - Matlab中带有函数名称的变量的警告

> ID：12385536
> 
> 赞同：3
> 
> 时间：2012-09-12T09:53:07.837
> 
> 标签：function, matlab, variables, warnings, variable-assignment

有时我不小心声明了具有函数名称的变量。

这是一个构造的示例：

```
 max(4:5) % 5
 max(1:10)=10*ones(10,1); % oops, should be == instead  of = 
 max(4:5) % [10 10] 
```

目前，我总是很难发现这一点，尤其是在我不经常使用的函数名称上。

有没有办法让matlab对此给出警告？最好在屏幕右侧看到这个和其他警告，但我愿意接受其他建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T11:55:58.663

由于 Matlab 允许您重载内置功能，因此在使用现有名称时不会收到任何警告。

但是，有一些技巧可以最大程度地降低现有函数过载的风险：

*   使用`explicitFunctionNames`. 有一个函数`maxIndex`而不是`max`.

*   经常使用“Tab”键。Matlab 将自动完成路径上的函数（以及您之前声明的变量）。因此，如果变量自动完成，它已经存在。如果您不记得它是否也是一个功能，请按“F1”以查看是否存在它的帮助页面。

*   使用函数而不是脚本，这样工作区中“错误”分配的变量就不会弄乱您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:31:38.177

我很确定 mlint 也可以检查这一点。

一般来说，我会尽可能地将代码包装到函数中。这样，这种覆盖的范围被限制在函数的范围内——所以除了偶然的假设之外，没有持久的问题*。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T10:10:00.547

如有疑问，请检查：

```
exist max
ans = 
  5 
```

查看`help exist`，您可以看到 " `max`" 是一个函数，不应将其分配为变量。

```
 >> help exist
exist  Check if variables or functions are defined.
exist('A') returns:
  0 if A does not exist
  1 if A is a variable in the workspace
  2 if A is an M-file on MATLAB's search path.  It also returns 2 when
       A is the full pathname to a file or when A is the name of an
       ordinary file on MATLAB's search path
  3 if A is a MEX-file on MATLAB's search path
  4 if A is a MDL-file on MATLAB's search path
  5 if A is a built-in MATLAB function
  6 if A is a P-file on MATLAB's search path
  7 if A is a directory
  8 if A is a class (exist returns 0 for Java classes if you
    start MATLAB with the -nojvm option.) 
```

# jquery - jQuery ui datepicker('getDate') 值本地化

> ID：12385539
> 
> 赞同：2
> 
> 时间：2012-09-12T09:53:19.643
> 
> 标签：jquery

如何本地化`$('#datepicker').datepicker('getDate')`值？例如`alert`中国日期喜欢`(2012年9月10日)`

这是我的代码：http: [//jsfiddle.net/8JyDB/1/](http://jsfiddle.net/8JyDB/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:04:14.860

使用 jQuery i18n 插件。请参阅以下链接以完成本地化。

[http://codingwithcoffee.com/files/trunk/index.html](http://codingwithcoffee.com/files/trunk/index.html)

[http://keith-wood.name/localisation.html](http://keith-wood.name/localisation.html)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:59:09.940

[http://jqueryui.com/demos/datepicker/#localization](http://jqueryui.com/demos/datepicker/#localizatio)

```
$( "#datepicker" ).datepicker( $.datepicker.regional[ "zh-CN" ] ); 
```

# eclipse - 由于缺少类，无法调试 Eclipse 应用程序

> ID：12385540
> 
> 赞同：3
> 
> 时间：2012-09-12T09:53:20.753
> 
> 标签：eclipse, plugins, osgi, equinox, launch-configuration

我使用 Xtext 2.2.1 编写了一个 DSL 插件。升级到 Xtext 2.3.0 后，由于以下错误，我无法调试相关的 Eclipse 应用程序（即，我正在使用标记为“Eclipse 应用程序”的启动配置从 Eclipse 中使用我的 DSL 插件启动实例）：

```
Error instantiating builder 'org.eclipse.xtext.ui.shared.xtextBuilder'.
Plug-in org.eclipse.xtext.ui.shared was unable to load class org.eclipse.xtext.ui.shared.internal.ExecutableExtensionFactory.
org/eclipse/xtext/ui/guice/AbstractGuiceAwareExecutableExtensionFactory 
```

我尝试了什么：

1.  我在启动配置中取消选择目标平台中的所有捆绑包，单击“添加必需的插件”，再次尝试，同样的错误。

2.  我确保插件列表中提供了该`org.eclipse.xtext.ui`和`org.eclipse.xtext.ui.shared`版本，并且两者都已启用。`2.3.0`

3.  当我将插件安装到我的 IDE 中时，它可以完美运行。我只是无法从 IDE 中启动 Eclipse 应用程序。

“验证插件”没有显示任何问题。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:03:06.937

虽然这既不是问题的答案，也不是启动器停止工作的*原因*，也不是修复现有启动器的方法，但您至少应该能够通过创建新的启动器重新开始工作。为此，只需从 XText 项目的上下文菜单中选择*Run As > Eclipse Application*。这样，Eclipse 应该为您处理启动器的创建和配置。

确保 Eclipse 实际上创建了一个*新*的启动器！如果 Eclipse 找到现有的 Eclipse 应用程序启动器，它可能会改用那个。您至少应该重命名旧的启动器，这样您就可以知道使用的是哪个启动器（显示在控制台视图的顶部）。默认情况下，新启动器的名称为“Eclipse Application”。如果 Eclipse 仍然使用旧的启动器，您可能必须先删除该启动器。

如果您想找出旧启动器出了什么问题，或者如果该启动器是专门配置的并且您想保留该配置，这可能会有所帮助：Eclipse 将启动器配置存储在`.metadata/.plugins/org.eclipse.debug.core/.launches/`工作区中的目录中，因此您可以返回启动旧启动器，然后使用一些差异工具将其与新创建的启动器进行比较。

# hibernate - 使用实体管理器刷新时事务中的空闲

> ID：12385544
> 
> 赞同：3
> 
> 时间：2012-09-12T09:53:31.243
> 
> 标签：hibernate, jpa, transactions

我们将 hiberante、c3p0、postgresql 用于持久层。在运行数据密集型作业（主要是选择/插入）时，其中一位开发人员决定在 commit 之前使用 entityManager.flush() ，就像这样

```
entityManager.getTransaction().begin()
insert n elements
entityManager.flush()
entityManager.getTransaction().commit() 
```

一段时间后，所有运行数据密集型作业的线程似乎都被阻塞了，我们发现它们正在等待来自池的数据库连接。池中处于“空闲事务”状态的所有连接。这种情况每次都可以复制。

删除 flush() 后，情况消失了。

有谁知道为什么会发生这种情况？

感谢：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:05:57.497

hibernate 有一个智能缓存系统，它简单地收集要执行的 sql 命令列表，然后在提交时执行它们。Flush 用于继续并部分执行这些命令。看起来这可能会有所帮助，但是当您认为 hibernate 在没有刷新的情况下提交之前什么都不做，那么您将导致数据库必须在短时间内处理大型事务，而不是一次处理所有事务。

这相当于将单张纸交给您的同事进行撕碎，而不是让他一次撕碎多张纸。结合数据库可能会在事务中间锁定记录的事实，从您第一次调用刷新的那一刻起，数据库将致力于执行命令的任务，直到您提交。如果数据库没有在等待您并且一次拥有所有命令，它可以在完成实际工作所需的时间内完成。

简而言之，hibernate 知道它在做什么。Flush 会覆盖休眠的正常功能，如果您不小心，实际上会降低性能。如果顺序很重要（例如在插入之前执行删除），您可能应该只使用刷新。

# java - 通过 HTTP 下载特定站点的问题

> ID：12385546
> 
> 赞同：1
> 
> 时间：2012-09-12T09:53:39.443
> 
> 标签：java, http, tcp

我正在使用专有工具从软件提供商处下载软件。在后端，它是一个 java 应用程序，它使用普通的 http（或可选的 https）来检索软件。

但是最近下载失败了。请注意，我无权访问下载工具的源代码，并且我在代理服务器后面。该工具在开始实际下载之前多次连接到同一主机。这些连接通常是成功的，尽管它们看起来有些慢（当然这是主观的）。

该工具执行一些日志记录，当它失败时，我们会得到这个异常：

```
java.net.SocketException: Connection reset
 at java.net.SocketInputStream.read(SocketInputStream.java:168)
 at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)
 at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
 at sun.net.www.MeteredStream.read(MeteredStream.java:116)
 at java.io.FilterInputStream.read(FilterInputStream.java:116)
 at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:2676) 
```

通过wireshark收听时，我看到了一些奇怪的行为（或者至少是我未经训练的眼睛所特有的）。下载将“正常”进行一段时间，直到发生这种情况：

*   我们的服务器不会为特定数据包发送 ACK
*   代理服务器（超时后）执行重传
*   我们的服务器发送一个 ACK
*   直到正好 3 分钟（代理服务器上配置的超时）之后才出现更多流量，代理发送 TCP RST，我们得到上述 java 错误

一些额外的信息：

1）我还可以访问不在我们网络上的亚马逊服务器，它可以顺利执行下载。我们已经要求至少 2 个人在不同的网络上尝试下载，并且它运行良好。

2) 我们一直使用相同的服务器和代理连接到其他 http/https 站点没有问题，这包括不时的大下载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:16:42.120

通过调整代理服务器上的一些超时设置来解决这个问题，尽管他们没有给我们太多反馈，说明究竟发生了什么变化，或者为什么只有这个特定站点受到影响。

# boost - 提升压缩矩阵 & Chlesky 分解 & BLAS/LAPACK

> ID：12385555
> 
> 赞同：1
> 
> 时间：2012-09-12T09:54:20.660
> 
> 标签：boost, lapack, lapack++

我想解决以下步骤：

*   填充 boost::numeric::ublas::compressed_matrix；

*   现在，我需要应用 Cholesky 分解。

    *   但是，没有这种boost的功能。所以我开始寻找另一个库——我在考虑 BLAS 或一种 LAPACK 库。但是，虽然我需要一些算法，但如何将 boost::numeric::ublas::compressed_matrix 与 BLAS 或 LAPACK 的函数/算法绑定？有没有这样的方法？
*   最后，我需要解决“Ax=b”，其中“A”是由 Cholesky 算法分解的 boost 的压缩矩阵。那么如何使用 boost 和/或 LAPACK 的算法或函数来解决“x”？

提前致谢。

葡聚糖

# javascript - 提取部分 JSON 以在列表中显示它们

> ID：12385559
> 
> 赞同：0
> 
> 时间：2012-09-12T09:54:29.223
> 
> 标签：javascript, jquery, json

我有以下 JSON：

```
var questions = {
    section: {
        "1": question: {
            "1": {
                "id" : "1a",
                "title": "This is question1a"
            },
            "2": {
                "id" : "1b",
                "title": "This is question2a"
            }
        },
        "2": question: {
            "1": {
                "id" : "2a",
                "title": "This is question1a"
            },
            "2": {
                "id" : "2b",
                "title": "This is question2a"
            }
        }
    }
}; 
```

**注意：JSON 根据以下答案进行了更改，以更好地支持该问题，因为原始 JSON 格式错误以及它如何与下面的 for 循环一起使用。**

完整的 JSON 将有 8 个部分，每个部分将包含 15 个问题。

这个想法是 JS 代码将读取要拉出的部分，然后从列表中一一拉出问题。在第一次加载时，它将拉出第**一个问题**，然后当用户单击选项 A 或 B 的按钮时，它将**加载下一个问题，直到所有问题都被拉出，然后进行回调。**

当单击附加列表项中的按钮时，它会将其添加到下面称为响应的列表中，其中用户给出的答案作为跨度标记。

这是我到目前为止所拥有的：

```
 function loadQuestion( $section ) {

    $.getJSON('questions.json', function (data) {

    for (var i = 0; i < data.length; i++) {

        var item = data[i];

        if (item === $section) {
            $('#questions').append('<li id="' + item.section.questions.question.id + '">' + item.section.questions.question.title + ' <button class="btn" data-response="a">A</button><button class="btn" data-response="b">B</button></li>');
        }
    }
});

}

    function addResponse( $id, $title, $response ) {

        $('#responses').append('<li id="'+$id+'">'+$title+' <span>'+$response+'</span></li>');

    }

    $(document).ready(function() {

        // should load the first question from the passed section
        loadQuestion( $('.section').data('section') );

        // add the response to the list and then load in the next question
        $('button.btn').live('click', function() {

            $id = $(this).parents('li').attr('id');
            $title = $(this).parents('li').html();
            $response = $(this).data('response');

            addResponse( $id, $title, $response );

            loadQuestion ( $('.section').data('section') );

        });

    }); 
```

以及页面的 HTML（每个页面都是单独的 HTML 页面）：

```
<div class="section" data-section="1">

            <ul id="questions"></ul>

            <ul id="responses"></ul>

        </div> 
```

我已经被如何只从一个部分中获取第一个问题然后连续加载该部分的每个问题直到所有问题都被调用然后进行回调以显示该部分已完成而感到困惑和困惑。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:03:16.377

1.  html 中没有多个 id，称为“section”。
2.  在您的 JSON 中不要在称为“部分”的同一级别上有多个键。同一级别的 JSON 中的键应该是唯一的，就像您正在考虑键值哈希系统一样。然后你就可以真正找到钥匙了。同一级别的重复 JSON 密钥无效。

一种解决方案可以是 section1、section2 等，而不仅仅是 section。不要依赖 HTML 中的 data-section 属性 - 如果将“section”作为重复的 html id 和重复的 JSON 键，仍然不好。

如果您在 HTML DOM 中只有一个 section id，那么在您的 JSON 中您还必须只有一个名为“section”的东西，例如：

```
var whatever = {
                    "section" : { 
                               "1":  {
                                        "question" : {
                                                       "1" : {
                                                          "id" : "1a",
                                                          "title" : "question1a"
                                                              },
                                                       "2" : {
                                                          "id" : "2a",
                                                          "title"  : "question2a"
                                                              }
                                                     }
                                      },                                 
                                "2":  {
                                        "question" : {
                                                       "1" : {
                                                          "id" : "1a",
                                                          "title" : "aquestion1a"
                                                              },
                                                       "2" : {
                                                          "id" : "2a",
                                                          "title"  : "aquestion2a"
                                                              }
                                                     }
                                      }
                                 }
               }
console.log(whatever.section[1].question[1].title); //"question1a" 
```

要获得问题，请执行以下操作：

```
 function loadQuestions(mySectionNum) {

       $.getJSON('whatever.json', function(data){

        var layeriwant = data.section[mySectionNum].question;

           $.each(layeriwant, function(question, qMeta) {
               var desired = '<div id="question-' + 
                              qMeta.id +
                              '"' + 
                              '>' + 
                              '</div>';
               $("#section").append(desired);
               var quest = $("#question-" + qMeta.id);
               quest.append('<div class="title">' + qMeta.title + '</div>');
               //and so on for question content, answer choices, etc.
           });

       });
   } 
```

然后像这样实际得到问题：

```
 function newQuestion(){
       var myHTMLSecNum = $("#section").attr('data-section');
       loadQuestions(myHTMLSecNum);
    }

    newQuestion();

  //below is an example, to remove and then append new question:

    $('#whatevernextbutton').on('click',function(){
       var tmp = parseInt($("#section").attr('data-section'));
       tmp++;
       $("#section").attr('data-section', tmp);
       $("#section").find('*').remove();
       newQuestion();
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:08:15.077

从技术上讲，您的`getJSON`函数始终检索相同的数据。您的代码永远不会将给定的 id 与您正在提取的 id 进行比较。

您的 getJSON 应该类似于：

```
function loadQuestion( $section ) {
        for (var i = 0; i < questions.section.length; i++) {

            var item = questions.section[i];
            if (item.id === $section) {
                for (var j = 0; j < item.questions.length; j++) {
                    $('#questions').append('<li id="' + 
                        item.questions[i].id + '">' + 
                        item.questions[i].title + 
                        ' <button class="btn" data-response="a">A</button><button class="btn" data-response="b">B</button></li>'
                    );
                }
           }
        }
} 
```

将您的 JSON 修改为：

```
var questions = {
    section: [{
        id: 1,
        questions: [{
            id: "1a",
            title: "This is question1a"
            },{
            id: "2a",
            title: "This is question2a"
        }]},{
        id: 2,
        questions: [{
            id: "1a",
            title: "This is question1a"
            },{
            id: "2a"
            title: "This is question2a"
        }]
    }]
}; 
```

编辑：[getJSON](http://api.jquery.com/jQuery.getJSON/)的第一个参数是 JSON 返回服务的 URL。

如果您的 JSON 已在客户端上定义，则您根本不需要 getJSON。我已经修改了上面的代码。

# sublimetext2 - 在 Sublime Text 中换行后将缩进与括号对齐

> ID：12385561
> 
> 赞同：12
> 
> 时间：2012-09-12T09:54:39.490
> 
> 标签：sublimetext2, sublimetext, sublimetext3

我喜欢将行保持在 80 列以下，因此我经常想重构如下所示的行：

```
object.function(a_long_argument, another_long_argument, and_a_third) 
```

对此：

```
object.function(a_long_argument,
                another_long_argument,
                and_a_third) 
```

但是当我在 Sublime 中的第一个“，”之后按 Enter 时，它只是换行并将光标缩进几个空格。我希望它与我所在的括号或 [] 或 {} 对齐，就像 Emacs 做得非常漂亮一样。

有这个选项吗？有这个插件吗？我必须自己写吗？

我已经尝试搜索它，但我没有找到任何东西。

编辑：

更好的是快捷方式或插件或用于选择几行或整个缓冲区的东西，并让它尝试在合适的位置自动换行。也重构注释。如果它必须是特定于语言的，我希望它主要用于 Python 和 C++。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-04T04:27:15.107

Sublime`indent_to_bracket`将为您包装光标。只需将以下行添加到您的`User/Preferences.sublime-settings`或`User/Python.sublime-settings`文件中：

```
"indent_to_bracket": true 
```

不幸的是，目前这似乎只适用于括号，花括号和方括号仍然会换行到前一行缩进。

# php - 从 Javascript 同一个文件调用 php 函数

> ID：12385564
> 
> 赞同：0
> 
> 时间：2012-09-12T09:54:45.867
> 
> 标签：php, javascript

> **可能重复：**
> [在 Javascript 中调用 PHP 函数](https://stackoverflow.com/questions/4172976/calling-php-function-within-javascript)

我在 php 文件中有一个小的 JavaScript 代码。此 JavaScript 代码运行一些逻辑，最后应调用在同一 php 文件中定义的 php 函数。我怎样才能做到这一点 ？任何指导？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:59:16.913

您可以为此使用 ajax 并调用同一个文件。因为 php 函数不会从 javascript 初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:02:30.877

我认为使用[`PHPLIVEX`](http://www.phplivex.com/), 在这种情况下也很有用。

PHPLIVEX 有一个小标语 -

*在一行中从 javascript 调用您的 php 函数和类方法*

如果您需要在应用程序中多次从 javascript 调用 php 函数，这将很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:56:44.490

如果需要执行服务器端代码，则需要通过 ajax 调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T09:56:51.317

这肯定不是最好的答案，但它应该可以工作：让你的 javascript 使用 POST 参数对你的同一页面进行 ajax 调用，所以你知道这是对该函数的调用..希望很清楚足够大的线条..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T09:57:52.917

你不能。JavaScript 在浏览器中执行，PHP 在服务器上执行。唯一的方法是使用 AJAX 请求，例如使用 jQuery：

```
$.get('myurl.php', function(data){ ... }); 
```

[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

这将返回由 myphp.php 文件产生的输出；如果你想从中运行一个函数，你需要一些逻辑来确定它应该执行哪个函数，例如 URL 参数。但是，我强烈建议不要使用 url 参数值作为直接函数名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T12:32:03.460

你应该使用 jquery 的 ajax 或 post

# ios - IOS 块指针复制问题。

> ID：12385565
> 
> 赞同：0
> 
> 时间：2012-09-12T09:54:46.383
> 
> 标签：ios, pointers, block

看下面的动画执行块，UI控件指针clickButton是如何从栈复制到堆的呢？通过引用（保留）还是仅复制指针值（不是深复制）？

提前致谢。

```
[UIView animateWithDuration:10.0 animations:^(void){
    clickButton.alpha = 1.0;  // clickButton is class variable. 
}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:59:05.723

当一个块被复制时（在这种情况下就是这样），该块引用的任何objective-c对象都被保留（然后在块被释放时释放）。

在这种情况下，如果`clickButton`是块外的局部变量，它将保留在块内。但是，您说它是一个“类变量”，我假设您的意思是它是一个实例变量。因此，该块实际上保留了`self`，因为对 ivar 的引用实际上是对 ivar 内的隐式查找`self`。

在 MRR（非 ARC）代码中，任何标有`__block`存储限定符的 obj-c 对象实际上都不会被捕获块保留。这是出于技术原因，但它已被许多人利用。但是，在 ARC 代码中，`__block`-qualified 变量确实会被块保留（和释放）。如果需要 ARC 下的非保留对象，可以`__unsafe_unretained`改用。但是，在 ARC 代码中，弱引用通常可以解决与`__unsafe_unretained`变量相同的问题，但更安全。

* * *

由于这里的块有一个临时的生命周期（它只在动画的持续时间内存在），所以保留 self 没有问题。然而，对于更永久的块，其生命周期实际上与 的生命周期相关联`self`（例如，它们存储在 ivar 或`self`拥有的对象上），您应该注意不要引入保留周期。如果您使用 ARC，弱引用可以在这里为您提供帮助。

# javascript - javascript中的法语口音字符问题

> ID：12385566
> 
> 赞同：0
> 
> 时间：2012-09-12T09:54:49.497
> 
> 标签：javascript, utf-8, diacritics, non-ascii-characters

我在 javascript 中遇到法语单词（重音/特殊字符）的问题。例如，Payable date pass.e de maturit' here 它需要显示确切的字符而不是...。请帮我。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:58:06.963

将所有 HTML 和 JS 文件保存为 UTF-8 并将 HTML 设置`Content-Type`为 UTF-8：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

# ruby - 使用正则表达式搜索 Ruby 数组

> ID：12385572
> 
> 赞同：7
> 
> 时间：2012-09-12T09:55:01.667
> 
> 标签：ruby, regex, arrays

嗨，我有一个小的 ruby​​ 函数，它可以拆分一个 Ruby 数组，如下所示：-

```
def rearrange arr,from,to
  sidx = arr.index from
  eidx = arr.index to
  arr[sidx] = arr[sidx+1..eidx]
end

arr= ["Red", "Green", "Blue", "Yellow", "Cyan", "Magenta", "Orange", "Purple", "Pink",    "White", "Black"]
start = "Yellow"
stop = "Orange"

rearrange arr,start,stop
puts arr.inspect
#=> ["Red", "Green", "Blue", ["Cyan", "Magenta", "Orange"], "Cyan", "Magenta", "Orange", "Purple", "Pink", "White", "Black"] 
```

我需要在开始和停止搜索中使用正则表达式，例如

开始 = "/Yell/"

停止 = "/Ora/"

有没有一种简单的方法可以在 Ruby 中做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-12T09:59:16.790

当然，方法[`index`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-index)可以接收一个块，这样你就可以做到

```
sidx = arr.index{|e| e =~ from } 
```

您甚至可以查看漂亮的 Ruby 的“大小写相等”运算符，并轻松地将字符串和正则表达式作为参数覆盖：

```
sidx = arr.index{|e| from === e} # watch out: this is not the same as 'e === from' 
```

然后，如果你传递一个正则表达式 as `from`，它将执行正则表达式匹配，如果你传递一个`String`，它将寻找精确的字符串。

# mysql - MySQL从select distinct + union中获取重复项

> ID：12385573
> 
> 赞同：0
> 
> 时间：2012-09-12T09:55:01.470
> 
> 标签：mysql

当我在 MySQL 中运行以下查询时，我得到了很多重复项。我知道我已经足够清楚了，我只需要不同的记录，所以我不明白为什么它会为我加倍。当我包含最后一个联合（表）时，似乎所有重复项都会出现，`importorders`因为大多数客户在客户和订单中都有相同的地址。谁能帮我理解为什么会这样？

```
SELECT DISTINCT PostalCode, City, Region, Country
FROM 
(select distinct postalcode, city, region, country
from importemployees
UNION
select distinct postalcode, city, region, country
from importcustomers
UNION
select distinct postalcode, city, region, country
from importproducts
UNION
select distinct shippostalcode as postalcode, shipcity as city, shipregion as region, shipcountry as country
from importorders) T 
```

* * *

![查询和结果](../Images/a41f5356c7759496546e4ba3b0c4cc53.png)

如你看到的。有些行是重复的。

如果我使用`INSERT IGNORE`先插入`importcustomers`，`importorders`则它会设法将记录识别为重复项。为什么选择查询不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T18:40:55.523

非常好奇的问题。当我放弃“国家”时，它似乎解决了这个问题。

```
SELECT DISTINCT PostalCode, City, Region 
```

*总共 128 个，查询耗时 0.0066 秒*

```
SELECT DISTINCT PostalCode, City, Region, Country 
```

*共 209 个，查询耗时 0.0002 秒*

此外，该行为似乎只影响`ImportCustomers`and `ImportOrders`：

```
SELECT postalcode, city, region, country
FROM 
    (SELECT postalcode, city, region, country FROM importcustomers
    UNION
    SELECT shippostalcode, shipcity, shipregion, shipcountry FROM importorders) t 
```

*总共 172 个，查询耗时 0.0053 秒*

```
SELECT postalcode
FROM 
    (SELECT postalcode FROM importcustomers
    UNION
    SELECT shippostalcode FROM importorders) t 
```

*总共 91 个，查询耗时 0.0050 秒*

然后我将其缩小到`country`列`importcusotmers``importorders`

```
SELECT TRIM(country) AS country FROM importcustomers
UNION
SELECT TRIM(shipcountry) AS country FROM importorders 
```

```
阿根廷
阿根廷
奥地利
奥地利
比利时
比利时
...
```

当我将专栏投到`BINARY`

```
SELECT BINARY country AS country FROM importcustomers
UNION
SELECT BINARY shipcountry AS country FROM importorders 
```

```
阿根廷
417267656e74696e610d
奥地利
417573747269610d
比利时
42656c6769756d0d
...
```

该表`ImportOrders`导致重复。

```
 SELECT BINARY shipcountry AS country FROM importorders 
```

```
4765726d616e790d
5553410d
5553410d
4765726d616e790d
...
```

查看您提供的转储，国家末尾附加了一个额外的`\r`（在值中表示为）。`0d`

```
--
-- 转储表 `importorders` 的数据
--
插入“进口订单”值
...'德国\r'),
...'美国\r'),
...'美国\r'),
...'德国\r'),
...'墨西哥\r'),

```

`importcustomers`在哪里`country`看起来不错：

```
--
-- 转储表 `importcustomers` 的数据
--
插入“importcustomers”值
...'德国'， ... ，
...'墨西哥'， ... ，
...'墨西哥'， ... ，
...'英国'， ... ，
...'瑞典'，...，
```

您可以通过运行以下查询来删除这些`\r`（回车）：

```
UPDATE importorders SET ShipCountry = REPLACE(ShipCountry, '\r', '') 
```

然后，如果您运行原始查询，您将获得所需的结果集。仅供参考，`DISTINCT`如果您使用的是`UNION`.

```
SELECT PostalCode, City, Region, Country
FROM 
    (SELECT postalcode, city, region, country FROM importemployees
    UNION
    SELECT postalcode, city, region, country FROM importcustomers
    UNION
    SELECT postalcode, city, region, country FROM importproducts
    UNION
    SELECT shippostalcode as postalcode, shipcity as city, 
        shipregion as region, shipcountry as country FROM importorders) T 
```

# onclick - 触摸设备上带有 zurb 基础工具提示的链接中的 onclick 事件

> ID：12385574
> 
> 赞同：2
> 
> 时间：2012-09-12T09:55:11.337
> 
> 标签：onclick, touch, tooltip, zurb-foundation

我正在使用 Zurb Foundation 框架 (2.0) 并在链接上有一个工具提示。

```
<a href="" id="delete-preference" class="has-tip" title="Delete" onclick="return someFunction(0);">x</a> 
```

在桌面上它工作正常，工具提示显示在鼠标悬停上，您可以单击链接触发 someFunction

然而，在触摸设备上，工具提示显示在单击/选项卡上。但是这样你就不能触发 onClick 事件和 someFunction。

你怎么能这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T16:08:55.100

寻找：

```
if (Modernizr.touch) {
    $body.on('click.tooltip touchstart.tooltip touchend.tooltip', settings.targetClass, function (e) {
        e.preventDefault(); 
```

代替

```
e.preventDefault(); 
```

和

```
if($(settings.tooltipClass).css("display") != "block")e.preventDefault(); 
```

应该是固定的。

# sql - 使用 Spring JDBC 的 Oracle 存储过程

> ID：12385575
> 
> 赞同：1
> 
> 时间：2012-09-12T09:55:22.400
> 
> 标签：sql, oracle, spring, stored-procedures

您好我正在尝试使用 Spring JDBC 执行存储过程。这是SP类

```
 class IncrementExtraBalanceStoredProcedure extends StoredProcedure {

    /**
     * @param jdbcTemplate
     * @param procedureName
     */
    public IncrementExtraBalanceStoredProcedure(JdbcTemplate jdbcTemplate, String procedureName) {
        super(jdbcTemplate, procedureName);
        declareParameter(new SqlOutParameter(O_RETURN_CODE, Types.INTEGER));
        declareParameter(new SqlParameter(P_NUMEC, Types.INTEGER));
        declareParameter(new SqlParameter(P_GBYTES, Types.INTEGER));
        compile();
    }

    /**
     * @param inputBean
     * @return resultObjects
     */
    public Map<String, Object> execute(RateLimitLogBean inputBean) {
        Map<String,Object> sqlMap = new HashMap<String,Object>();
        sqlMap.put(P_NUMEC, inputBean.getNumec());
        sqlMap.put(P_GBYTES,  inputBean.getGb());
        return super.execute(sqlMap);
    }

} 
```

我从这个方法调用这个类。

```
 public int incrementExtraBalance(RateLimitLogBean inputBean) {
    IncrementExtraBalanceStoredProcedure procedure = new IncrementExtraBalanceStoredProcedure(this.jdbcTemplate, "RATELIMIT_OWN.increment_extra_balance");
    Map<String, Object> resultMap = procedure.execute(inputBean);
    if (!StringUtils.isEmpty(resultMap)) {
        return ((Integer) resultMap.get(O_RETURN_CODE)).intValue();
    }
    return -1;
} 
```

但我得到空值作为 O_RETURN_CODE。它应该返回 0 从 Toad 执行此函数 - Oracle Db

> 变量 z 数
> 
> 执行 RATELIMIT_OWN.unlimit_contract (0123,:z)
> 
> 打印 z

*我在 Toad 中得到 0 作为输出。*

为什么我从 Java 代码返回 null 值（没有 sql 异常）。代码有什么问题吗？

本机调用返回正确的输出

```
public void unlimitContract(RateLimitLogBean inputBean, boolean load) throws SQLException {
    String sql = "{call RATELIMIT_OWN.unlimit_contract (?,?)}";
    CallableStatement callableStatement = this.dataSource.getConnection().prepareCall(sql);
    callableStatement.setInt(1, 0123);
    callableStatement.registerOutParameter(2, java.sql.Types.INTEGER);

    callableStatement.executeUpdate();

    int resultCode = callableStatement.getInt(2);
} 
```

SQL SP

```
CREATE OR REPLACE PROCEDURE RATELIMIT_OWN.increment_extra_balance (p_numec IN  NUMBER,
  p_gbytes            IN    NUMBER,
  o_return_code    OUT NUMBER)
AS

   message            logs.errormsg%TYPE;

BEGIN

  update balance set extrabalance=extrabalance+(p_gbytes*1073741824),limited=0 WHERE numec = p_numec;

  IF SQL%ROWCOUNT = 0
  THEN
    o_return_code:=1;
  ELSE
    o_return_code:=0;
    message := 'Cops added ' || p_gbytes || ' gb extra volume';
    INSERT INTO logs (logid, eventid, origin, numec, VALUE, errormsg) VALUES (seq_log.NEXTVAL, 'NEXTRAROV', 'increment_extra_balance', p_numec, p_gbytes, message);
  END IF;

   commit;

  EXCEPTION
    WHEN OTHERS
    THEN
      o_return_code := SQLCODE;
      ROLLBACK;  

END;
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:02:01.087

你的参数顺序看起来不对。尝试：

```
 declareParameter(new SqlParameter(P_NUMEC, Types.INTEGER));
   declareParameter(new SqlParameter(P_GBYTES, Types.INTEGER));
   declareParameter(new SqlOutParameter(O_RETURN_CODE, Types.INTEGER)); 
```

# iphone - 2.0 版的Phonegap 插件

> ID：12385576
> 
> 赞同：1
> 
> 时间：2012-09-12T09:55:24.067
> 
> 标签：iphone, cordova, xcode4.2, phonegap-plugins

*好吧，我对电话间隙很陌生。一天前，我用 Xcode 4.2 版将它安装在 MAC OSX 10.7.1 上。*

*   首先，我在 Xcode 中看不到创建电话间隙应用程序的选项。但是我可以使用终端实现它。（后来才知道，这可能就是它在这个版本上的工作方式）。
*   其次，我按照[本教程](http://nathancampos.me/post/23831039066/how-to-setup-and-use-nativecontrols-in-phonegap)尝试添加[插件](https://github.com/phonegap/phonegap-plugins/tree/master/iOS)。当我编译时，它给了我致命的错误。`'CDVPlugin.h' file not found`. 但我可以在**Cordovalib.xcodeproj中看到它**

在**NativeControls.h**

```
#import <Cordova/CDVPlugin.h>
#else
#import "CDVPlugin.h"
#endif 
```

*那么谁能指出我做错了什么？我是否需要再次添加 CDVPlugin.h 和相关文件？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:36:46.920

`NativeControls.h`修改文件和修改后编译工作`NativeControls.m`：

修改`NativeControls.h`：

```
//
// NativeControls.h
//
//
// Created by Jesse MacFadyen on 10-02-03.
// MIT Licensed

// Originally this code was developed my Michael Nachbaur
// Formerly -> PhoneGap :: UIControls.h
// Created by Michael Nachbaur on 13/04/09.
// Copyright 2009 Decaf Ninja Software. All rights reserved.

#import <Foundation/Foundation.h>
#import <UIKit/UIKit.h>
#import <UIKit/UITabBar.h>
#import <UIKit/UIToolbar.h>

//#ifdef PHONEGAP_FRAMEWORK
#import <Cordova/CDVPlugin.h>
//#else
//#import "CDVPlugin.h"
//#endif

@interface NativeControls : CDVPlugin <UITabBarDelegate, UIActionSheetDelegate> {
    UITabBar* tabBar;
    NSMutableDictionary* tabBarItems;

    UIToolbar* toolBar;
    UIBarButtonItem* toolBarTitle;
    NSMutableArray* toolBarItems;

    CGRect  originalWebViewBounds;
}

/* Tab Bar methods
 */
- (void)createTabBar:(NSArray*)arguments withDict:(NSDictionary*)options;
- (void)showTabBar:(NSArray*)arguments withDict:(NSDictionary*)options;
- (void)hideTabBar:(NSArray*)arguments withDict:(NSDictionary*)options;
- (void)showTabBarItems:(NSArray*)arguments withDict:(NSDictionary*)options;
- (void)createTabBarItem:(NSArray*)arguments withDict:(NSDictionary*)options;
- (void)updateTabBarItem:(NSArray*)arguments withDict:(NSDictionary*)options;
- (void)selectTabBarItem:(NSArray*)arguments withDict:(NSDictionary*)options;

/* Tool Bar methods
 */
- (void)createToolBar:(NSArray*)arguments withDict:(NSDictionary*)options;
- (void)resetToolBar:(NSArray*)arguments withDict:(NSDictionary*)options;
- (void)setToolBarTitle:(NSArray*)arguments withDict:(NSDictionary*)options;
- (void)createToolBarItem:(NSArray*)arguments withDict:(NSDictionary*)options;
- (void)showToolBar:(NSArray*)arguments withDict:(NSDictionary*)options;
- (void)hideToolBar:(NSArray*)arguments withDict:(NSDictionary*)options;
/* ActionSheet
 */
- (void)createActionSheet:(NSArray*)arguments withDict:(NSDictionary*)options;

@end 
```

* * *

文件中的修改`NativeControls.m`：在第 22 行，更改`PGPlugin`为`CDVPlugin`

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:39:27.227

在 Cordova 2.1（仅限）中，我通过简单地注释掉给定 PushNotification 插件的 if/else 来解决这个错误

```
#import <Foundation/Foundation.h>
//#ifdef CORDOVA_FRAMEWORK
#import <Cordova/CDVPlugin.h>
//#else
//#import "CDVPlugin.h"
//#endif
#import <EventKitUI/EventKitUI.h>
#import <EventKit/EventKit.h> 
```

# proxy - Wso2 ESB 上的 FTP

> ID：12385579
> 
> 赞同：1
> 
> 时间：2012-09-12T09:55:34.847
> 
> 标签：proxy, ftp, wso2, wso2esb, esb

我有一个 .Net Web 应用程序，它是 ESB 的前端，以便以**编程方式创建代理**。

我正在尝试将 xml 代理推送到 ESB 路径：`repository/deployment/server/synapse-configs/default/proxy-services/`通过 FTP，但它似乎不起作用。

我正在尝试这种连接：`ftp://admin:admin@localhost:9443/repository/deployment/server/synapse-configs/default/proxy-services/`

还有其他方法可以将我的 XML 上传到 ESB 中吗？非常感谢

**编辑**：我知道一个答案可能是“是的，你可以通过使用管理服务来做到这一点”，但这对我不起作用，因为缺乏关于通过管理服务添加代理的文档。所以我正在寻找像 FTP 这样的替代方案，因为我知道将 xml 直接放在 Repo 文件夹中会起作用，问题是访问该文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:37:40.913

据我了解，您正在尝试使用 FTP 将文件上传到路径。这不涉及调用 WSO2 ESB，是吗？

根据以上理解，您在[FTP 地址](http://www.cs.tut.fi/~jkorpela/ftpurl.html)中指定的端口似乎不正确。我认为您应该使用您在机器上运行的 FTP 服务器的端口。除非你没有编辑它的配置，它应该是 21。在这个改变之后，你需要提供绝对路径而不是相对路径 /repository/...

把它想象成另一个 FTP 上传。ESB 自动部署到 /repository/deployment/server/synapse-configs/default/proxy-services/ 的任何文件，无论它是如何到达那里的。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:06:06.283

我正在寻找一种将代理添加到 ESB 的正确方法，可能使用 ws-admin 服务，但这并不是很简单：存储库、库等问题......

我最终得到了一个快速的肮脏解决方案：将 java ftp 保护到代理的正确文件夹中的服务器（使用 jsch ）。

还是要谢谢你的帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T15:15:23.347

1.  您可以在 WSO2 的 Web 界面中创建您的代理（使用 Web 浏览器）： `localhost:9443/carbon/admin/login.jsp`

2.  或者通过复制文件来添加代理

`mv myProxy.xml MY_WSO2/repository/deployment/server/synapse-configs/default/proxy-services/myProxy.xml`

到 localhost:9443 的 FTP 连接将不起作用。否则解释一下为什么需要使用FTP？

# css - CSS Dropdown 特定项目更小

> ID：12385581
> 
> 赞同：0
> 
> 时间：2012-09-12T09:55:38.500
> 
> 标签：css, drop-down-menu, wordpress-theming

我的网站有问题。我想让下拉项目变小。否则它将“扑通”出我的主题..

我正在使用 WordPress..

谁能帮我？！

这是网站： [MDS](http://www.managed-desktop-systems.de/)

问题显示在菜单点“Kontakt -> Presse”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:59:13.093

CSS：

```
#menu-item-38 ul, #menu-item-38 li{
    width:100px;
}
#menu-item-38 ul li a{
    width:80px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T23:32:14.547

您在`ul#dropdown-menu`

```
ul#dropdown-menu ul li a = 160px ;
ul#dropdown-menu ul li = 180px  ; 
```

将我更改 `ul#dropdown-menu ul l`为

```
ul#dropdown-menu ul li{width:160px; overflow:hidden;} 
```

确保添加溢出：隐藏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T10:04:05.057

嗨，现在像这样**定义**你的**最后一个宽度** `submenu`

```
#menu-item-38 .sub-menu{
width:90px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T10:04:59.597

如果减小宽度，当内部文本的长度很大时会产生问题，所以

如果您喜欢它，请更改此属性，如下所示..

```
ul#dropdown-menu li .sub-menu li a {
color: #252525;
width: 140px;
}

ul#dropdown-menu ul {
position: absolute;
top: 100%;
right: 0;
width: 160px;
list-style: none;
display: none;
border: 1px solid #EFEFEF;
border-bottom: none;
background-color: white;
z-index: 35;
} 
```

# asp.net - 从月份键获取月份的第一天和最后一天

> ID：12385588
> 
> 赞同：1
> 
> 时间：2012-09-12T09:55:52.670
> 
> 标签：asp.net, sql, vb.net

我有一个看起来像这样的月份键`"201208"`。

我正在从 SQL 读取数据并以`DataTable`. 然后我循环通过我的`DataTable`.

```
For Each dr As DataRow In dt.Rows
   Dim s As String = dr.Item(0)
Next 
```

我`s`将是一个看起来像这样的字符串`"201208"` 如何将此字符串转换为`year, first day of the month and last day of the month`？

**寻找一种将字符串拆分为两个单独`dim`的 s 的方法。**

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T10:01:27.017

最简单的方法是将字符串解析为`Date`，然后计算该月的最后一天。

尝试以下操作：

```
Dim s = "201208"
Dim firstDay = Date.ParseExact(s, "yyyyMM", Nothing)
Dim lastDay = firstDay.AddMonths(1).AddDays(-1)
Dim year = firstDay.Year 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T10:01:29.650

首先，我将使用格式为“ddMMyy”的[DateTime.TryParseExact 方法](http://msdn.microsoft.com/en-us/library/h9b85w22.aspx)将字符串解析为 DateTime。

然后我会使用类似的东西

```
Dim startDate As New DateTime(dbDate.Year, dbDate.Month, 1)
Dim endDate As DateTime = startDate.AddMonths(1).AddDays(-1) 
```

获取 StartDate 和 EndDate

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T10:06:17.437

这对我有用：

```
Function FormatDate(ByVal dateKey As String) As String
    Dim x As DateTime = DateTime.ParseExact(dateKey, "yyyyMM", Nothing)
    FormatDate = String.Format("Year: {0}; First day of month: {1}; Last day of month: {2}", x.Year, x.AddDays(-x.Day).ToString("dddd"), x.AddMonths(1).AddDays(-x.Day).ToString("dddd"))
End Function 
```

你可以这样使用这个函数：

```
Dim dateDetails As String = FormatDate("201208") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T09:59:41.237

1.  将该字符串拆分为年份和月份（请参阅[Substring](http://msdn.microsoft.com/en-us/library/system.string.substring.aspx)）
2.  使用“1”作为本月的第一天 -> 这是您的开始日期
3.  加一个月，减一天 -> 那是你的结束日期

# asp.net-mvc-3 - MVC 3 Razor 和表单中空日期的显示

> ID：12385591
> 
> 赞同：0
> 
> 时间：2012-09-12T09:55:58.397
> 
> 标签：asp.net-mvc-3, razor

我有一个 MVC 3 网站，我在其中使用以下表格显示日期：

```
<div class="editor-label control-label">
     @Html.LabelFor(m => m.rrsfWoman.DateOfBirth)
</div>
<div class="editor-field controls">
     @Html.EditorFor(m => m.rrsfWoman.DateOfBirth)
     @Html.ValidationMessageFor(m => m.rrsfWoman.DateOfBirth)
</div> 
```

出生日期在 rrsfWoman 类中定义为

```
public DateTime WomansDateOfBirth { get; set; } 
```

我的问题是，出生日期字段的默认值为 MinDate。有没有一种方法可以将日期显示为 1/01/0001*而不*会使该字段为空。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T10:03:06.100

> 有没有一种方法可以将日期显示为 1/01/0001 而不会使该字段为空。

实现这一目标的正确方法是在您的视图模型中使日期为空。如果您以后不这样做，您也会遇到模型绑定问题，因为不可为空的 DateTime 字段不能绑定到空字符串，您必须编写自定义模型绑定器和其他东西才能使其工作。如果你不使用视图模型，你会让你的生活变得悲惨。

话虽如此，如果您想违背良好做法，您可以为 DateTime 类型定义一个自定义编辑器模板，该模板将执行检查并使用空值，但老实说，我不建议您这样做：

`~/Views/Shared/EditorTemplates/DateTime.cshtml`：

```
@model DateTime

@if (Model == default(DateTime))
{
    @Html.TextBox("", "")
}
else
{
    @Html.TextBox("", ViewData.TemplateInfo.FormattedModelValue)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:06:11.427

您可以像这样显式设置 WomansDateOfBirth 的默认值：

```
private DateTime _womansDateOfBirth = DateTime.Now;
public DateTime WomansDateOfBirth
{
    get { return _womansDateOfBirth; }
    set { _womansDateOfBirth = value; }
} 
```

`DateTime.Now`你的MinDate在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-30T15:30:21.967

如果日期字段不允许空值并且您想强制用户输入日期。IMO，最好的方法是在表单构建后简单地清除输入字段。

所以在你的视图末尾添加这个小片段。

```
<script type='text/javascript'>
    document.getElementById("DateOfBirth").value = "";
</script> 
```

# kendo-ui - 如何删除剑道网格中的多行？

> ID：12385598
> 
> 赞同：3
> 
> 时间：2012-09-12T09:56:21.697
> 
> 标签：kendo-ui

我有一个剑道网格，第一列是复选框。我想使用这些复选框删除多行。我一次只能删除一行。

我尝试添加

```
.Batch(true) 
```

对于数据源，以下是我在网格外删除按钮的功能。

```
function deleteRule() {
    var grid = $("#grid").data("kendoGrid");

    grid.select().each(function () {
        grid.removeRow($(this));
    });
} 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T19:39:45.067

哟，伙计，

你究竟如何删除那一行？为什么使用 select 方法？

基本上，我建议您创建一个删除按钮，该按钮执行删除所选行的逻辑 - 我猜您正在使用一个带有复选框的模板列。如果您向该复选框添加一个类，您可以轻松地选择网格内的所有复选框。因此，假设复选框的类名称**很酷**，那么您可以在删除按钮单击处理程序中执行以下逻辑：

```
function whenYourDeleteButtonIsClicked(){
    var grid = $("#grid").data("kendoGrid");
    $('.cool:selected').each(function(){
       grid.removeRow($(this).closest('tr'));
    })
} 
```

我希望你有这个想法的伙伴。祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-11T09:06:38.320

这是我使用的

效果很好

```
 $('#your-grid-id').data("kendoGrid").select().each(function () {
        grid.dataSource.remove(grid.dataItem($(this).closest("tr")));
   }); 
```

# asp.net - 如何在 DetailsView 中动态隐藏字段（字段数始终为 0）

> ID：12385599
> 
> 赞同：2
> 
> 时间：2012-09-12T09:56:26.160
> 
> 标签：asp.net, detailsview

我正在使用 a`DetailsView`来显示 a 中单行的详细信息`DataTable`。

我在设计时*不*知道列名，所以我`AutoGenerateRows = true`在标记中。

```
DataView dv = myDataTable.AsDataView();
dv.RowFilter = string.Format("ResourceID = {0}", resourceId);

dvScoresBreakdown.DataSource = dv;
dvScoresBreakdown.DataBind(); 
```

其中大约有 4 列`DataView`我不想`DetailsView`显示 - 主要是 ID 列。

我了解我应该访问 的`Fields`属性`DataView`并将相关字段设置为不可见：

```
dvScoresBreakdown.Fields[0].Visible = false;
dvScoresBreakdown.Fields[1].Visible = false; 
```

但是，`.Fields.Count`始终为零。所以我得到一个索引越界异常。

当我说“始终为零”时，我的意思是`.DataBind()`在`OnDataBinding`,`OnDataBound`和`OnPreRender`事件之后也是零。

但是，DetailsView 确实在页面上呈现并显示所有内容 - 原始中的所有列`DataView`- 所以数据视图是绑定的！

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T10:27:58.663

我刚刚发现，这样做的方法是在`.DataBind()`方法之后立即删除行。

```
dvScoresBreakdown.DataSource = dv;
dvScoresBreakdown.DataBind();

dvScoresBreakdown.Rows[0].Visible = false;
dvScoresBreakdown.Rows[1].Visible = false; 
```

希望这可以帮助别人！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-12T10:17:58.063

Columns 集合仅存储显式声明的列，因此如果您使用自动生成的列，则计数将为零。如果您使用的是自动生成的列，则在数据绑定之后，您可以遍历行集合并使相应的单元格不可见，例如：

如果 dvScoresBreakdown 是 GridView

```
 dvScoresBreakdown .DataBind();
if (dvScoresBreakdown .Columns.Count > 0)
    dvScoresBreakdown .Columns[0].Visible = false;
else
{
    dvScoresBreakdown .HeaderRow.Cells[0].Visible = false;
    foreach (GridViewRow gvr in dvScoresBreakdown .Rows)
    {
        gvr.Cells[0].Visible = false;
    }
} 
```

我想这会对你有所帮助。

# c# - 在列表视图中显示图像及其名称

> ID：12385600
> 
> 赞同：0
> 
> 时间：2012-09-12T09:56:27.110
> 
> 标签：c#, winforms, listview

我正在使用带有 3.5 框架的 C#.net。我有一个具有列表视图和图像列表控件的表单。我正在将图像从文件夹添加到 imagelist，然后从 imagelist 到 listview。这工作正常并显示图像，但是我如何也显示图像名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:00:49.623

有两种做法。。

1.  如果您将图像存储在数据库中。那么您也应该将图像的名称保存在数据库中。并在显示获取该记录以及其他记录以将其显示在 UI 上时。
2.  如果您将图像存储在应用程序的某个目录中。那么您必须在数据库中保存带有路径或不带路径的图像名称。您可以通过将您的姓名与 SQL 查询中的其他字段一起提取来获取并显示您的姓名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:16:12.187

我猜你想设置[View 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.view.aspx)：

`ListView.LargeIcon`例如，在其下方显示带有标签的图像。

另外，如果你打算使用 ListViews，我建议你看看[ObjectListView](http://www.codeproject.com/Articles/16009/A-Much-Easier-to-Use-ListView)，它非常灵活，可以让你开发更漂亮的 listview 控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-08T11:21:02.443

在设计时，编辑 Items 集合，并将它们的 Text 属性设置为您要显示的标签的文本。

[在这里，您可以看到有关在哪里可以找到 Text 属性的图像。](https://i.stack.imgur.com/oJECc.png)

在运行时，您还可以设置它们的 Text 属性。

# qt - 在 Matlab 中调用 qt 可执行文件时出错

> ID：12385601
> 
> 赞同：1
> 
> 时间：2012-09-12T09:56:29.170
> 
> 标签：qt, matlab

当我得到一个使用 unix() 运行的 qt 编译可执行文件时，我有一个 Matlab 文件，但是我收到了一个错误。

编码：

```
unix('/home/matt/Desktop/PlaneVolumeFinal/PlaneVolumeGui'); 
```

错误：

```
/home/matt/Desktop/PlaneVolumeFinal/PlaneVolumeGui: symbol lookup error: /home/matt/Desktop
/PlaneVolumeFinal/PlaneVolumeGui: undefined symbol: _ZN9QListData7detach3Ev 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:50:28.973

动态链接的库在应用程序启动时被链接，错误是说操作系统找不到包含 的东西的库`QList`，那个库是`QtCore`.

确保 Qt 的运行时库位于操作系统可以找到它们的地方——通常是`/usr/lib(64)`. 我的猜测是您没有运行时但正在使用 Qt 的 SDK，因此 QtCreator 使用它们进行编译 - 但它们不在您的操作系统路径上，因为当它在此之外运行时。

# web-services - 优雅地终止服务器上基于请求的服务

> ID：12385609
> 
> 赞同：0
> 
> 时间：2012-09-12T09:57:04.400
> 
> 标签：web-services, webserver

在我们的 Web 应用程序中，对于每个 http 请求，后端都会发生大量计算。输出可以从 10 秒到 1 小时不等。在计算的同时，网站上会为相应用户显示“Waiting..”。

但是碰巧的是，用户可能会在两者之间减少服务。那么后端可以做些什么，以便在两者之间停止计算以节省资源呢？这里可以应用哪些不同的策略？

如果更好（而不是直接杀死线程），那么优雅的终止策略应该会产生奇迹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:38:09.053

我不确定这是否适合您的情况，但这是我过去解决此问题的方式。我们正在为一个网络应用程序生成 pdf 报告。大多数报告可以在 5 秒内生成，但有些可能需要一个小时。

当用户单击生成按钮时，我们将它们重定向到“正在生成...”对话框屏幕，该屏幕具有一种进度条和一个取消按钮。这也会在单独的线程中启动服务器上的生成过程（我们有一个工作池）。然后浏览器通过 ajax 定期轮询服务器以检查进度（更新进度条或完成后重定向到显示页面）。

生成进程和 ajax 进程之间的服务器同步是通过进程同步对象完成的。sync-obj 是一个非常简单的类实例，可以通过一些唯一的字符串随时从任何线程中快速检索。

两个进程都可以更新这个共享的同步对象。当报告生成时，repgen 线程将更新 ajax 线程将通知浏览器的 sync-obj。如果用户单击了取消按钮，那么 ajax 线程将在 sync-ob 中设置“取消”标志，并且 repgen 线程将拾取该标志并跳出生成循环。

显然，整个过程的响应能力很大程度上取决于 repgen 线程检查同步 obj 的频率，而这通常归结为单个报告的编码方式。

最后，为了回答您的问题，如果用户感到无聊并“返回”并再次单击生成按钮，我们不会取消第一个报告并开始第二个报告，而是意识到它是相同的报告（以及相同的同步对象id) 所以让报告继续。但是，如果这不适合您的场景，那么启动生成过程可以取消第一个过程，就像用户可以通过“取消”按钮一样。

# hibernate - Hibernate 使用复合键进行多对多映射

> ID：12385614
> 
> 赞同：0
> 
> 时间：2012-09-12T09:57:16.130
> 
> 标签：hibernate, mapping, many-to-many, composite-primary-key

我有这些表（带有这些主键）：

**资源** - idResource (PK) - idResLanguage (PK)

**标签** - idTag (PK)

**Resources_Tags** - idResource (PK) - idTag(PK)

有没有办法映射这些表只引用**Resources_Tags**表中的字段“idResource”？

我问这个是因为如果我在 Eclipse 上执行 Hibernate 的逆向工程时没有将 idResLanguage 放在**Resources_Tags表中，则会引发此错误：**

**“MappingException：外键必须与引用的主键具有相同的列数”**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:48:47.737

如果`idResource`足以唯一标识一个 Resource，那么它应该是主键，`idResLanguage`而不应该是主键的一部分。

如果唯一标识一个资源还不够，那么你需要在连接表中使用它，否则它不会映射一个资源与一个标签，而是映射多个资源与一个标签。

# javascript - 从数组中删除元素的最佳方法：javascript/jquery

> ID：12385615
> 
> 赞同：1
> 
> 时间：2012-09-12T09:57:20.017
> 
> 标签：javascript, jquery

我找到了两种方法。哪一个更好？还有比这两个更好的方法吗？

```
 myArray.splice($.inArray(id, myArray),1); 
```

或者

```
myArray.splice(myArray.indexOf(id),1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:22:42.910

**这两个选项都不安全**`id`，因为如果找不到，两者都会从数组中删除最后一个元素。

无论您是使用`$.inArray()`还是`.indexOf()`返回`-1`if`id`不在数组中，当您传递`-1`给该[`.splice()`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)时，它将从数组中删除最后一项。

所以你真的应该说：

```
var index = $.inArray(id, myArray); // or myArray.indexOf(id)
if (index > -1) myArray.splice(index, 1); 
```

显然，如果需要，您可以将上述内容封装在您自己的函数中。

至于哪个更好`$.inArray()`，`.indexOf()`这取决于您是否关心支持不支持的旧浏览器（主要是IE8及以下）`.indexOf()`。你*应该*注意你的代码是否在公共网站上，因为很多人仍然使用 IE8 和 IE7。如果您已经在使用 jQuery，您最好还是坚持使用`$.inArray()`，否则请使用[`.indexOf()`MDN 上的 shim](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf#Compatibility)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:00:37.280

清空整个数组：

```
while (myArray.length) {
  var element = myArray.shift();
  element = null; // free memory
}
myArray = []; 
```

或删除单个元素：

```
var element = myArray.splice(id,1);
element = null; // free memory 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T10:28:41.970

您也可以使用以下方法从数组中删除元素。

```
var y = [1, 2, 3]
var removeItem = 2;

y = jQuery.grep(y, function(value) {
  return value != removeItem;
}); 
```

或者

```
var arr = ["jQuery","JavaScript","HTML","Ajax","Css"];
var itemtoRemove = "HTML";
arr.splice($.inArray(itemtoRemove, arr),1); 
```

以上两种方式都是最好的。

**注意：** IE < 9 不支持数组上的 .indexOf()。如果你想确保你的代码在 IE 中工作。

# grails - 获取 gmail 附件的 grails 插件

> ID：12385617
> 
> 赞同：0
> 
> 时间：2012-09-12T09:57:34.333
> 
> 标签：grails, plugins, gmail, attachment

我正在做一个 grails 项目，我需要一个插件来从 Gmail 帐户中提取电子邮件附件。

我的同事说了一些关于 Java Mail API 的事情，但我实际上不确定如何将 api 与 grails 集成。

是否有任何其他插件或解决方法可以从 gmail 帐户中提取电子邮件附件？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:15:14.417

虽然不是专门用于从 GMail 中提取附件，但[Grails Routing 插件](http://grails.org/plugin/routing)绝对值得评估。它将[Apache Camel](http://camel.apache.org/)集成到您的 Grails 服务和控制器中，并提供了一种非常简单的方法来创建路由。然后，您可以将以下依赖项添加到您的`grails-app/BuildConfig.groovy`文件中：

```
// replace x.x.x with version used by the Grails Routing plugin
runtime("org.apache.camel:camel-mail:x.x.x") 
```

在 Mail 组件的文档中，您将看到一个从 GMail 获取附件的示例，还有[Haki 先生的这篇博客文章](http://mrhaki.blogspot.com/2009/04/use-apache-camel-plugin-in-grails.html)，其中显示了一个使用旧 Grails Camel 插件的示例（路由插件取代了它）。

虽然我没有为此目的使用 Camel，但我已经在一些项目中使用过它，并且会推荐它作为一种可能的解决方案。它是一个非常强大的集成工具，可以真正让一些非常复杂的事情变得非常容易。

# php - 使用 .htaccess 重命名 .php 文件 .html？

> ID：12385618
> 
> 赞同：0
> 
> 时间：2012-09-12T09:57:44.577
> 
> 标签：php, html, .htaccess

只是想知道通过 .htaccess 重命名 .php 文件 .html 文件是否会有任何问题？我们现有的网站是 html，我想用动态 php 页面更新页面，但是人们有链接保存到现有的 html 网站。如果这不可能，是我创建带有 iframe 的 html 页面以包装 php 页面的唯一方法吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:07:25.523

它不是将 php 文件重命名为 html，而只是将文件使用 html 扩展名重定向到 php 文件。

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f        # don't apply to the existing html files
RewriteRule ^([^.]+)\.html$ /$1\.php [QSA,L]  # QSA means combine query string. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T10:00:46.647

我相信

```
RewriteEngine on
RewriteRule ^(.*)\.html $1\.php 
```

应该满足您的需求（未经测试）

# python - 如何正确记录 hasattr() 的使用

> ID：12385619
> 
> 赞同：0
> 
> 时间：2012-09-12T09:57:46.977
> 
> 标签：python

我看到它不被认为是 pythonic 使用`isinstance()`，人们建议例如使用`hasattr()`.

我想知道最好的方法是记录正确使用使用`hasattr()`.

示例：我从不同的网站（例如 Yahoo Finance、Google Finance）获取股票数据，并且有一些类`GoogleFinanceData`，`YahooFinanceData`它们都有一个方法`get_stock(date)`。还有一个比较两只股票价值的功能：

```
def compare_stocks(stock1,stock2,date):
    if hasattr(stock1,'get_stock') and hasattr(stock2,'get_stock'):
        if stock1.get_stock(date) < stock2.get_stock(date):
            print "stock1 < stock2"
        else:
            print "stock1 > stock2" 
```

该函数的使用如下：

```
compare_stocks(GoogleFinanceData('Microsoft'),YahooFinanceData('Apple'),'2012-03-14') 
```

它不是这样使用的：

```
compare_stocks('Tree',123,'bla') 
```

问题是：我如何让人们知道他们可以使用哪些`stock1`课程`stock2`？我是否应该编写一个文档字符串，`"stock1 and stock2 ought to have a method get_stock"`并且人们必须自己查看源代码？或者我是否将所有正确的类放入一个模块并在文档字符串中引用该文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:10:58.270

如果您所做的只是用`*FinanceData`实例调用函数，我什至不会费心测试该`get_stock`方法；传入其他任何内容都是错误的，如果有人传入字符串，该函数应该会中断。

换句话说，只需将您的函数记录为期望`get_stock()`方法，而根本不进行测试。Duck typing 适用于需要接受明显不同类型输入的代码，而不适用于仅适用于一种特定类型的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:00:08.653

做你的建议，放入传递参数的文档字符串应该有一个 get_stock 函数，这就是你的函数所需要的，列出类是不好的，因为当它适合某人时，代码很可能与派生类或其他类一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T10:11:05.947

我没有看到关于使用的 unpythonic `isinstance()`，我会创建一个基类并参考基类的文档。

```
def compare_stocks(stock1, stock2, date):
    """ Compares stock data of two FinanceData objects at a certain time. """
    if isinstance(stock1, FinanceData) and isinstance(stock2, FinanceData):
        return 'comparison'

class FinanceData(object):
    def get_stock(self, date):
        """ Returns stock data in format XX, expects parameter date in format YY """
        raise NotImplementedError

class GoogleFinanceData(FinanceData):
    def get_stock(self, date):
        """ Implements FinanceData.get_stock() """
        return 'important data' 
```

如您所见，我在这里不使用鸭式打字，但是由于您已经就文档提出了这个问题，所以我认为这是一种更简洁的可读性方法。每当另一个开发人员看到`compare_stocks`函数或`get_stock`方法时，他都知道必须在哪里寻找有关功能、数据结构或实现细节的更多信息。

# vba - excel按生日排序

> ID：12385624
> 
> 赞同：0
> 
> 时间：2012-09-12T09:57:56.993
> 
> 标签：vba, excel

如何在excel表格中根据生日排列列表？

```
SLno 姓名 rollnumber 生日
______________________________________
1 aaa 8 月 25 日 45 日
2 ddfg 87 4 月 2 日
3 poiu 98 年 1 月 4 日

```

在上表中，我需要根据生日列更新列表吗？预期的o / p：

```
SLno 姓名 rollnumber 生日
______________________________________
1 月 98 日 1 月 4 日
2 ddfg 87 4 月 2 日
3 月 45 日 8 月 25 日

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:18:09.550

使用@chrisneilsen 给出的帮助列想法，帮助列的不同公式将是：

```
=DATEVALUE(LEFT(D2,LEN(D2)-2)&", 2012") 
```

这将删除您拥有的日期的最后 2 个字母（因为 Excel 不理解序数），并通过将“, 2012”附加到该新文本并读取日期将其转换为日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T10:24:31.003

最好的选择是使用`DateSerial`数字作为生日，格式化为你想要的显示。

如果你不能转换，试试这个

添加一个带有公式的辅助列，以将生日转换为 a`DateSerial`并对该列进行排序

公式（假设生日在列中`D`）：

```
=DATEVALUE(MID(D2,FIND(" ",D2)+1,LEN(D2)-FIND(" ",D2)-2)&" "&LEFT(D2,FIND(" ",D2)-1)&" 1900") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T13:11:36.883

如果您有大量数据，您可以使用这样的脚本将日期格式转换为数字。我从您的样本中假设生日在 D 列中，如果不是，那么只需在下面更改。

```
Option Explicit
Sub ChangeFormat()
    With Columns("D").Cells
        .Replace What:="January", Replacement:="01", LookAt:=xlPart, _
            SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
            ReplaceFormat:=False
        .Replace What:=" ", Replacement:="/", LookAt:=xlPart, _
            SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
            ReplaceFormat:=False
        .Replace What:="th", Replacement:="", LookAt:=xlPart, _
            SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
            ReplaceFormat:=False
        .Replace What:="nd", Replacement:="", LookAt:=xlPart, _
            SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
            ReplaceFormat:=False
        .Replace What:="st", Replacement:="", LookAt:=xlPart, _
            SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
            ReplaceFormat:=False
        .Replace What:="rd", Replacement:="", LookAt:=xlPart, _
            SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
            ReplaceFormat:=False
    End With
End Sub 
```

然后，您可以按日期对其进行排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T16:18:26.607

我同意，您需要有一列具有正确格式的日期才能进行排序。

但是，您可以使用我在[另一个网站](http://www.excelforum.com/excel-general/677702-date-format-of-just-st-nd-rd-and-th.html)上找到的这个漂亮的公式来使用您喜欢的视觉格式的第二列，以按照您想要的方式重新格式化您的日期。我更改了原件以匹配您的格式。

```
=LOWER(TEXT(A1,"mmmm d"))&LOOKUP(DAY(A1),{1,2,3,4,21,22,23,24,31;"st","nd","rd","th","st","nd","rd","th","st"}) &TEXT(A1,", yyyy") 
```

# python - 在 Python 2.6.6 上导入 sqlite3 时找不到共享库 _sqlite3.so

> ID：12385634
> 
> 赞同：3
> 
> 时间：2012-09-12T09:58:42.933
> 
> 标签：python, sqlite, embedded-linux, python-2.6, dynamic-library

好吧，我已经为此奋斗了 2 天，这通常意味着它太简单而无法实现。

我有一个嵌入式 linux 系统，我在我的 ubuntu 上交叉编译。在编译python时，sqlite3不在无法编译的模块列表中。

但是，_sqlite3.so 库与 Python-2.6.6/build/lib.linux868-2.6/ 中的 json.so 和 ctypes.so array.so... 等位置不同

具有 init-functions 等的实际模块位于 Python-2.6.6/modules 中的正确位置，它也可以在目标系统上找到。

由于缺少so文件，我尝试使用我的arm编译器将它自己编译为共享库。这也不起作用。

没有手动编译的so文件：

```
>>> import sqlite3
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "rootfs/python/lib/python2.6/sqlite3/__init__.py", line 24, in <module>
  File "rootfs/python/lib/python2.6/sqlite3/dbapi2.py", line 27, in <module>
ImportError: /python/lib/python2.6/lib-dynload/_sqlite3.so: cannot open shared object file: No such file or directory 
```

使用在 lib-dynloads 中找到的已编译共享库：

```
>>> import sqlite3
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "rootfs/python/lib/python2.6/sqlite3/__init__.py", line 24, in <module>
  File "rootfs/python/lib/python2.6/sqlite3/dbapi2.py", line 27, in <module>
ImportError: dynamic module does not define init function (init_sqlite3) 
```

编辑：我想知道我是否为 sqlite3 编译了正确的库。据我现在了解 _sqlite3.so 是 python 构建器制作的东西，而 libsqlite3.so 是它需要构建它的库吗？libsqlite3.so 是从 Sqlite3 源代码构建的。我在这里弄错了吗？

任何拥有更多嵌入式 Linux 或 Python 经验的人都知道我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:01:33.197

尝试首先在您的系统上编译和安装 sqlite3，然后再编译 python。要不就

```
easy_install pysqlite 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:28:01.170

好的，想通了。不知何故，我没有正确手动编译 SO 文件。让它像这样工作：

首先从 setup.py ，我添加了为 sqlite3 模块启用的详细调试。这添加了解决问题的打印输出：

```
skipping incompatible /usr/lib/libsqlite3.so
cannot find -sqlite3 
```

That made me realize that the setup.py had chosen the first path where it found any module named sqlite3, ignoring it's architecture alltogether. Removing other search paths from the setup.py, but the one i had the ARM compiled library in, made it work. The _sqlite3.so was compiled nicely with all the other modules.

# java - Wicket 添加一个大的 Pdf 作为资源

> ID：12385635
> 
> 赞同：2
> 
> 时间：2012-09-12T09:58:44.590
> 
> 标签：java, pdf, wicket

在我的应用程序中，我使用 ByteArrayResource 显示 pdf。在我开始处理更大的文件之前，这一直很好。转换为 ByteArray 不断给我一个内存不足的错误。

这就是我目前的做法：

```
 File myPdf=new File(thePath);
        FileInputStream fin = new FileInputStream(myPdf);
        final byte fileContent[] = new byte[(int)myPdf.length()];
        fin.read(fileContent);
        fin.close();
        ResourceReference rr = new ResourceReference(dePdf.getName()) {

        @Override
        public IResource getResource() {
            return new ByteArrayResource("Application/pdf", fileContent);

        }
        };
        if (rr.canBeRegistered()) {
            getApplication().getResourceReferenceRegistry().registerResourceReference(rr);
        }        

        return wmc; 
```

**有没有更好的方法来显示大文件？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:14:03.917

尝试使用 ResourceStreamResource 和 FileResourceStream：

```
File myPdf=new File(thePath);
FileResourceStream frs = new FileResourceStream(myPdf);

ResourceStreamResource rsr = new ResourceStreamResource(frs);
rsr.setContentDisposition(ContentDisposition.ATTACHMENT);
rsr.setFileName(fileName);

//the same code for resource reference creation and registration
//... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:13:53.123

不完全确定（我自己从未真正使用过它们），但[ContextRelativeResource](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/request/resource/ContextRelativeResource.html)可能是一种选择。也许是这样的：

```
final File myPdf=new File(thePath);
        ResourceReference rr = new ResourceReference(dePdf.getName()) {

        @Override
        public IResource getResource() {
            // You'll need to adjust the path here to be relative to your context
            return new ContextRelativeResource(myPdf.getAbsolutePath());

        }
        };
        if (rr.canBeRegistered()) {
            getApplication().getResourceReferenceRegistry().registerResourceReference(rr);
        } 
```

# mysql - 从两个表中选择

> ID：12385638
> 
> 赞同：1
> 
> 时间：2012-09-12T09:58:56.067
> 
> 标签：mysql, sql, inner-join

我需要从 2 个表中选择几列：

```
Tab1
| Col1 | Col2 | Col3

Tab2
| Col1 | Col4 | Col5 
```

这是我的查询：

```
SELECT A.*,B.Col4 
FROM Tab1 A,Tab2 B 
WHERE A.Col1=B.Col1 
AND A.Col2=='XXX'
AND A.Col3>5; 
```

但是，此查询以某种方式连接了两个表并**复制了一些行**。它有什么问题？

预期的结果是这样的：

```
Tab3
| Col1 | Col2 | Col3 | Col4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:03:50.763

您应该使用`=`而不是`==`. 如果 col1 是 Tab1 的主键，col2 是 Tab2 的主键，并且 Tab1 和 Tab2 之间的关系是一对一的，则无法复制记录。

```
SELECT A.*,B.Col4 
FROM Tab1 A,Tab2 B 
WHERE A.Col1=B.Col1 
AND A.Col2 ='XXX'
AND A.Col3>5; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:05:22.460

您发布的查询没有问题，但如果问题是有

> 重复一些行

如您所述，然后使用`DISTINCT`：

```
SELECT DISTINCT A.*, B.Col4 
FROM Tab1 A, Tab2 B 
WHERE A.Col1 = B.Col1 
AND A.Col2 = 'XXX'
AND A.Col3 > 5; 
```

或其他`JOIN`语法：

```
SELECT DISTINCT A.*,B.Col4 
FROM Tab1 A 
INNER JOIN Tab2 B ON A.Col1 = B.Col1 
WHERE A.Col2 ='XXX'
  AND A.Col3 > 5; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T11:25:12.123

[SQL INNER w3schools](http://www.w3schools.com/sql/sql_join_inner.asp)

使用那个web端来练习和理解inner，left，right join。多个查询....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T10:03:06.360

使用连接

```
SELECT A.*,B.Col4 
FROM Tab1 A JOIN Tab2 B ON A.Col1=B.Col1 
WHERE A.Col2='XXX'
AND A.Col3>5; 
```

请注意，在 sql 中没有 ==（双等号）来检查相等性，而是使用单（=）

# iphone - 谷歌方向 API 没有响应

> ID：12385640
> 
> 赞同：0
> 
> 时间：2012-09-12T09:59:00.470
> 
> 标签：iphone, maps

谷歌方向 API 几天后停止发送 KML 响应。有没有人遇到同样的问题？？请帮忙。

我正在请求圣何塞和西雅图之间的方向。回应：“无地图迷你”

谢谢，罗希特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T07:02:11.517

我认为您正在寻找的答案就在这里：[为什么使用 KML 数据检索适用于 Android 的 Google 路线不再有效？](https://stackoverflow.com/questions/11745314/why-retrieving-google-directions-for-android-using-kml-data-is-not-working-anymo/11745316#11745316).

简而言之：“自 2012 年 7 月 27 日起，这种通过解析 KML 文件从 Google 提取 Google 路线的方式不再可用”。

Google 建议使用 json：[https](https://developers.google.com/maps/documentation/directions/) ://developers.google.com/maps/documentation/directions/ 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:04:45.210

&output=kml 中的 KML 在 Google 方面没有记录。你不应该依赖它。相反，您可以使用 Google Directions Web 服务并获取可以解析或转换为 KML 的 JSON 或 XML。

# iphone - iPhone：使用 NSURLConnection 下载数据时 UI 被阻止

> ID：12385647
> 
> 赞同：-3
> 
> 时间：2012-09-12T09:59:21.080
> 
> 标签：iphone, objective-c, ios

我正在使用`NSURLConnection`从服务器下载视频文件，同时通过将不同的 url 链接传递给电影播放器​​来播放视频。问题是用户界面的一些阻塞。在下载过程中，我们无法与 UI 交互，例如播放器缩放、暂停按钮被阻止。连接代码是这样的：_

```
connection1=[[NSURLConnection alloc] initWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlStr]] delegate:self]; 
```

以同样的方法，我们称

```
[playerInstance Play] 
```

请你能解释一下问题出在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:01:02.137

我不能完全理解你的问题。但我认为你在同一个线程上做这两项工作（下载，播放文件），可能是主线程。所以这可能会发生。所以尝试在单独的线程中运行这两个进程。

```
 [self performSelectorOnMainThread:@selector(playfile:) withObject:nil waitUntilDone:NO];

        [self performSelectorInBackground:@selector(downloadfile:) withObject:nil]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-12T10:16:21.510

您应该为 NSUrl 操作创建函数，如果已经创建函数，请按以下方式调用此函数以进行异步通信。

```
[self performSelector:@selector(method) withObject:nil afterDelay:1]; 
```

# clojure - Clojure 瞬态使用

> ID：12385651
> 
> 赞同：2
> 
> 时间：2012-09-12T09:59:31.403
> 
> 标签：clojure

我对在clojure中使用瞬变有点迷茫。任何帮助将不胜感激。示例代码：

```
(defn test-transient [v]
    (let [b (transient [])]
        (for [x v] (conj! b x))
        (persistent! b)))

user> (test-transient [1 2 3])
[] 
```

我试图在返回之前使其持久化，结果是：

```
(defn test-transient2 [v]
    (let [b (transient [])]
        (for [x v] (conj! b x))
        (persistent! b)
        b))

user> (test-transient2 [1 2 3])
#<TransientVector clojure.lang.PersistentVector$TransientVector@1dfde20> 
```

但是如果我使用 conj! 单独看来工作正常：

```
(defn test-transient3 [v]
    (let [b (transient [])]
    (conj! b 0)
    (conj! b 1)
    (conj! b 2)
    (persistent! b)))

user> (test-transient3 [1 2 3])
[0 1 2] 
```

for 有一些限制吗？如果是这样，我如何将值从持久向量复制到瞬态？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T10:51:04.837

瞬态不应该像那样被就地打击。您的最后一个示例仅适用于您不应该依赖的实现细节。

`for`不起作用的原因是它是惰性的，并且`conj!`永远不会执行调用，但这不是重点，因为无论如何您都不应该以这种方式使用瞬变。

您应该使用与使用带有不可变向量`conj!`的“常规”相同的方式- 通过使用返回值。`conj`

您正在尝试做的事情可以这样完成：

```
(defn test-transient [v]
  (let [t (transient [])]
    (persistent! (reduce conj! t v)))) 
```

# wordpress - 在图像选择后添加这个 pinterest 错误

> ID：12385658
> 
> 赞同：0
> 
> 时间：2012-09-12T09:59:46.913
> 
> 标签：wordpress, addthis, pinterest

Pinterest 按钮在我的 wordpress 博客上不再起作用。
选择要发布的图像后，添加 ADDTHIS 向我显示服务列表，其中没有 PINTEREST。没有人遇到这个问题。
[http://www.moowon.com](http://www.moowon.com)
我还检查了 ADDTHIS 网站，当我单击示例中的 pinterest 按钮时遇到了同样的错误：
[https://www.addthis.com/get/sharing?frm=hp#。 UFBckESitL8](https://www.addthis.com/get/sharing?frm=hp#.UFBckESitL8)

这是我的代码

```
 <!-- AddThis Button BEGIN -->
    <div class="addthis_toolbox addthis_default_style" addthis:url="<?php echo get_permalink() ?>" addthis:title="<?php the_title(); ?>">
            <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
            <a class="addthis_button_tweet" tw:via="metwit"></a>
            <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal" pi:pinit:description="<?php the_title(); ?>"></a>
            <a class="addthis_counter addthis_pill_style"></a>
        </div>
        <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};      </script>
        <!-- AddThis Button END --> 
```

任何的想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:27:36.393

使用此代码，它的工作 100%

```
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_preferred_3"></a>
<a class="addthis_button_preferred_4"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};      </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:12:52.860

我有同样的问题。我昨天写信给 addthis.com 的支持。看来这个问题现在已经解决了，而无需更改我的任何代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T10:10:50.940

如果您的 ADD THIS 不起作用，请使用此代码共享...

```
<span class="st_twitter_large" displayText="Tweet"></span>
<span class="st_facebook_large" displayText="Facebook"></span>
<span class="st_ybuzz_large" displayText="Yahoo! Buzz"></span>
<span class="st_gbuzz_large" displayText="Pinterest"></span>
<span class="st_email_large" displayText="Email"></span>
<span class="st_sharethis_large" displayText="ShareThis"></span>

<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">
    stLight.options({publisher:'12345'});
 </script> 
```

# drupal-6 - 仅访问特定用户的内容类型的少数字段

> ID：12385663
> 
> 赞同：0
> 
> 时间：2012-09-12T10:00:03.217
> 
> 标签：drupal-6, cck

我创建了一种内容类型“视频”，其中有许多字段，例如 url、语言、位置等。我创建了 1 个角色，现在我只想授予该特定角色的权限，以便他只能添加 url 等字段，地点。他应该不能使用其他领域。

我正在使用drupal 6。

如果您有任何想法，请提供帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T17:37:43.710

转到 /admin/build/modules，CCK 部分，然后启用 Content Permissions 模块。这将允许您限制“CCK 字段的字段级权限”。

之后，进入并转到/admin/user/permissions。在“节点模块”部分授予对“创建视频内容”的访问权限。然后，向上滚动到 content_permissions 模块，并选中“Edit field_NAME_OF_FIELD”以授予访问权限。如果你不检查，它应该会显示出来。

所有检查都应应用于您为其创建的角色。

# iphone - 如何将 SQLite 文件导出为表格格式的 CSV 文件（Excel 表格样式）

> ID：12385668
> 
> 赞同：0
> 
> 时间：2012-09-12T10:00:11.860
> 
> 标签：iphone, objective-c, sqlite, csv, mfmailcomposeviewcontroller

在 iphone 应用程序中，**我想将 SQLite 数据库文件导出为 CSV 文件**。（后来我在邮件中附上了这个文件）

**这也是表格格式（或 exel-sheet 格式）**

我**尝试**了以下逻辑，但它不像表格格式和列对齐方式的巨大差异。

storedataBaseArray = [数据库选择AllFromDB];

```
 NSString *CSVstring=@"SNO \t\t\t Index \t\t\t  Definition\n" ;

  NSString *CSVPath,*record;;

   NSString  *temporayCSV= @"" ;

  for(int i=0;i<storedataBaseArray.count ;i++)
  {

        record = [NSString stringWithFormat:@"%@, \t\t\t %@, \t\t\t %@, [ [storedContactsArray objectAtIndex:i] objectForKey"id"] ,  [ [storedContactsArray objectAtIndex:i] objectForKey"title"],  [ [storedContactsArray objectAtIndex:i] objectForKey"Definition"]];

   // NSString *role =[storedContactsArray objectAtIndex:i]  ;

    NSLog(@"%d",i);

    temporayCSV = [NSString stringWithFormat:@"%d  %@  \n ",(i+1),record];

       CSVstring = [CSVstring stringByAppendingFormat:temporayCSV];       
     NSLog(@"%@",CSVstring); 
```

}

```
 CSVPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.csv", @"CSV_FormatedTable"]];

  //add our file to the path
  [fileManager createFileAtPath:CSVPath contents:[CSVstring dataUsingEncoding:NSUTF8StringEncoding] attributes:nil];

  NSData *rolesCSVData =[NSData dataWithContentsOfFile:CSVPath];
  [mailpage addAttachmentData:rolesCSVData mimeType:@"text/csv" fileName:@"CSV_FormatedTable.csv"]; 
```

**数据库文件：**

![在此处输入图像描述](../Images/fde4fcce3e3b0131c17f6e75ed108fc5.png)

**所需格式：**

![在此处输入图像描述](../Images/84a5070b1b463140bb95797f6e58c06d.png)

**我的输出 CSV 文件：**

![在此处输入图像描述](../Images/6a7961140480ce82700e104c1a56bfd9.png)

任何人都可以建议我如何做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:14:30.907

不需要同时使用多个`\t`s和`,`s。

您可以像这样简化格式：

```
 record = [NSString stringWithFormat:@"%@, %@, %@", [ [storedContactsArray objectAtIndex:i] objectForKey"id"] ,  [ [storedContactsArray objectAtIndex:i] objectForKey"title"],  [ [storedContactsArray objectAtIndex:i] objectForKey"Definition"]]; 
```

在任何情况下，只有在合适的程序（例如 Excel）中打开生成的文件（并选择正确的导入选项）时，您才会看到正确的对齐方式。文本编辑器通常不会以表格格式显示 CSV 数据。除了文本编辑器显示它的方式之外，文件格式也很好。

# winforms - 在 windows 窗体中移动图形

> ID：12385671
> 
> 赞同：0
> 
> 时间：2012-09-12T10:00:30.060
> 
> 标签：winforms, graph

我有两个数组列表，x[]，y[]。认为 ：

```
x[0]=  1, y[0]=2,

x[1]=  3, y[1]=3,

x[2]=  4, y[2]=6,

x[3]=  4, y[3]=9,

x[4]=  7, y[4]=22,

x[5]= -4, y[5]=5,

.............. 
```

在 10 秒的时间延迟中，图表从 [0] 变为 [1]，然后以相同的延迟继续。

我如何表示图表？我认为这里必须有 3d 图。但是我如何在.Net winform 中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T01:59:09.393

您将需要使用一个组件将数据可视化为图形。

查看[Microsoft Chart Controls](http://www.microsoft.com/en-us/download/details.aspx?id=14422)，它们是一个不错的选择。

# xna - 如何编辑已编译的 spritefont？

> ID：12385675
> 
> 赞同：3
> 
> 时间：2012-09-12T10:00:42.320
> 
> 标签：xna, spritefont

如何编辑已编译的 spritefont？我想更改某些字符的字距，删除一两个像素，更改锯齿，但我找不到任何仍受支持或广为人知的官方工具。

如果没有办法（或者如果太难）编辑编译的 spritefont，我该如何手动创建 spritefont？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T12:01:07.527

没有官方方法可以做到这一点。您会注意到，如果您查看`SpriteFont`类型，您可以修改的东西很少（`DefaultCharacter`和`Spacing`）`LineSpacing`。

如果您查看它的内容管道对应项，`SpriteFontContent`则根本没有`public`成员。

* * *

最好的办法是使用[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)来查看这些类有哪些私有成员（以及它们是如何工作的）。然后直接使用反射修改它们。`SpriteFont`基本上是一堆指标数据和一个`Texture2D`.

我建议您制作一个内容管道扩展并`SpriteFontContent`在构建它时进行修改（如果您有一个不是您自己构建的 XNB 文件，这将变得更加棘手）。它看起来像这样：

```
[ContentProcessor(DisplayName = "Custom Font Processor")]
public class CustomFontProcessor : FontDescriptionProcessor
{
    public override SpriteFontContent Process(FontDescription input, ContentProcessorContext context)
    {
        SpriteFontContent output = base.Process(input, context);
        // ... your modifications here ...
        return output;
    }
} 
```

为了让您的生活更轻松，您可以使用[Exposed Object](http://exposedobject.codeplex.com/)，它为您提供了一个`dynamic`然后您可以直接访问私有成员（使编写此反射代码更容易）。

您可以查看 Nuclex TrueType Importer，它实现了自己的 sprite 字体处理器。它是开源的（albiet C++/CLI），因此您可以检查它的功能并可能对其进行修改。它包括自己的版本`SpriteFontContent`，但遗憾的是它同样被锁定。Nuclex 将为您提供的最重要的东西是它具有描述精灵字体中不同指标含义的注释。

显然你在搞乱 XNA 的私有部分——所以不要指望它在不同的 XNA 版本之间继续工作。（首先它是私有的，这样 XNA 团队将来可以自由地修改它。）

* * *

您可以做的另一件事是使用替代工具将您的字体构建为“字体纹理”（[在此处描述](http://blogs.msdn.com/b/shawnhar/archive/2007/04/26/bitmap-fonts-in-xna.aspx)- 尽管这篇文章很旧）。

# wix - WiX 工具集 - 构建许多独特的版本

> ID：12385681
> 
> 赞同：0
> 
> 时间：2012-09-12T10:00:55.797
> 
> 标签：wix, windows-installer

我们需要在安装中嵌入一个对每个客户都是唯一的许可证文件。我们曾经通过在下载过程中修补网络服务器上的 exe 安装程序来做到这一点，但基于云的防病毒和 Windows 8 给我们带来了问题。我们正在寻找 WiX 工具集。

在网络服务器上签名安装程序看起来并不容易，因此我们尝试限制唯一安装程序的数量。我们仍然需要生成 500 个唯一的安装程序，它们仅在一个小文件上有所不同。

`light.exe`运行需要相当长的时间。有没有更快的方法来更改一个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:31:42.747

我不禁想知道 Windows 8 是否仍不会让你的生活变得地狱般。如果您为每个客户构建并签署一个 MSI，但内容略有不同，他们都会有不同的哈希值，微软的安全功能可能会警告它不安全，因为*这个*MSI 不经常下载。

这`feature`要了我的命。我在 CodePlex 上有一个经过数字签名的开源项目，但 Windows 8 仍然采取防御措施，声明类似于我们已保护您免受危险软件的侵害。这个软件不经常下载....天哪。

也许您可以通过其他方式实现这一点。也许一个具有所有许可证的 MSI 和用户类型的许可证密钥可以动态选择正确的许可证？这样只有 1 个 MSI。

# c - 如何在运行时检查指针变量是否为垃圾？

> ID：12385686
> 
> 赞同：2
> 
> 时间：2012-09-12T10:01:14.223
> 
> 标签：c, pointers, valgrind, conditional-breakpoint

我使用 valgrind 来验证我的代码，它在我的一个函数中报告“条件跳转或移动取决于未初始化的值”，该函数将指针数组作为参数。

现在，如何在运行时检查数组是否包含垃圾值（可能正在使用条件断点）？说，我不访问指针，因此程序不会中断。

识别垃圾指针的检查条件是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T09:29:09.967

While the other answers are correct, you can also get valgrind to help you identify which entry or entries in the array exactly are causing the problem.

What you need to do is to add code to your program which loops over the array (you may already have such a loop of course) and then include `valgrind/memcheck.h` and add something like this to the loop:

```
if (VALGRIND_CHECK_VALUE_IS_DEFINED(entry)) {
  printf("index %d undefined\n", index);
} 
```

where `entry` is the actual value from the array and `index` is the index of that value in the arry.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T10:11:53.357

您无法区分有效指针和垃圾（未初始化）指针，它们都只是数字。

您在代码中的某个点处理“垃圾”指针这一事实表明，在到达该点之前存在问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T10:19:43.600

您需要系统地将所有指针初始化为 NULL。当您释放内存时，您的指针也会重置为 NULL。例如，这可以使用包装 malloc/free 的“构造函数/析构函数”函数来完成。只有这样，您才能测试 NULL 值指针以查看是否出现问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T10:20:52.343

您不测试垃圾，而是在创建数组和第一次考虑使用这些值之间的某个时间点将非垃圾值放入数组中。通常你在创建数组时这样做：

```
const char* strings[] = {0, "junk", "here"};
int some_values[10] = { 0 }; 
```

Valgrind 使用自己的技巧来识别它认为是垃圾的东西，但这些技巧超出了标准的范围，常规的 C 代码不能使用它们（或者无论如何不应该尝试）。即使你能以某种方式挂钩 valgrind 所做的事情，你最终会得到不适用于所有实现的代码，或者只能在 valgrind 下运行的代码。

# ios - iPhone显示屏灯不会自动关闭

> ID：12385691
> 
> 赞同：0
> 
> 时间：2012-09-12T10:01:31.960
> 
> 标签：ios, ios5, screen

我观察到我运行我的 iPhone 应用程序（本机）时，显示灯没有像在其他应用程序中通常那样关闭，我已经等了几分钟，但在我退出应用程序之前它不会关闭。有什么我搞砸的东西不会导致自动调光吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:05:05.313

```
[[UIApplication sharedApplication] setIdleTimerDisabled:NO];

[[UIApplication sharedApplication] setIdleTimerDisabled:YES]; 
```

在 iOS 应用程序中启用/禁用屏幕变暗的两条线。仔细检查并查看您的应用程序是否有任何这些。

将此代码放入应用程序 didFinishLaunchingWithOptions: 方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:05:50.353

你在你的应用程序中使用过这个吗？
`[[UIApplication sharedApplication] setIdleTimerDisabled:YES];`

如果是这样，请将其删除或设置为`NO`.

# installation - couchDB RHEL4 安装错误

> ID：12385692
> 
> 赞同：1
> 
> 时间：2012-09-12T10:01:32.773
> 
> 标签：installation, couchdb, redhat

我目前正在尝试在 Red Hat 4 机器上安装 couchDB

> Linux 版本 2.6.32-220.el6.x86_64 (mockbuild@c6b18n3.bsys.dev.centos.org) (gcc 版本 4.4.6 20110731 (Red Hat 4.4.6-3) (GCC)) #1 SMP Tue Dec 6格林威治标准时间 2011 年 19:48:22

按照 Apache Wiki 上的说明进行操作：[http](http://wiki.apache.org/couchdb/Installing_on_RHEL4) ://wiki.apache.org/couchdb/Installing_on_RHEL4 。安装运行良好，直到该行

> 制作 && sudo 制作安装

当我收到以下错误时：

```
/usr/local/bin/erlc   couch_key_tree.erl;
./couch_key_tree.erl:78: type boolean() undefined
./couch_key_tree.erl:79: type boolean() undefined
./couch_key_tree.erl:93: type boolean() undefined
./couch_key_tree.erl:136: type boolean() undefined
make[4]: *** [couch_key_tree.beam] Error 1
make[4]: Leaving directory `/home/acarter/couchdb/src/couchdb'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/home/acarter/couchdb/src/couchdb'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/home/acarter/couchdb/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/acarter/couchdb'
make: *** [all] Error 2 
```

我在网上看了一两次提到的问题，但从来没有解决方案。有谁知道解决方案或开始寻找的好地方？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T16:54:02.880

我遇到了同样的问题。问题是 Erlang 的版本已经过时（在我的例子中是 12B）。解决方案是升级到更新版本。

来源： [https ://github.com/cloudant/bigcouch/issues/13](https://github.com/cloudant/bigcouch/issues/13)

# javascript - 使用本地文件而不是 $.getJSON

> ID：12385693
> 
> 赞同：0
> 
> 时间：2012-09-12T10:01:35.103
> 
> 标签：javascript, jquery, html, highcharts

我对 Javascript 很陌生，所以提前道歉。

此[链接](http://jsfiddle.net/bsHM8/)包含来自`jsonp.php`使用 AJAX 请求命名的文件的图表数据。

我正在尝试重新创建它，但使用本地文件而不是他们服务器中的文件。我可以下载他们的示例`jsonp.php`文件并将其保存到我的桌面。

我已经设法将这段代码放在一起，让我可以打开和读取文件。

```
<!DOCTYPE html>
<html>

<script src="http://code.highcharts.com/stock/highstock.js"></script>
<script src="http://code.highcharts.com/stock/modules/exporting.js"></script>

<input type="file" id="files" name="file" />
<div id="container" style="height: 500px; min-width: 500px"></div>?

<script>
function handleFileSelect(evt)
{
    var files = evt.target.files; // FileList object

    for (var i = 0, f; f = files[i]; i++)
    {

        var reader = new FileReader();
        reader.onload = (function(reader)
        {
            return function()
            {
                var contents = reader.result;
                //var lines = contents.split('\n');
                //example('test')
                //////
                //document.getElementById('container').innerHTML=contents;
            }
        })(reader);

        reader.readAsText(f);
    }
}

//function example(a)
//{
//alert('You have chosen: ' + a);
//}

document.getElementById('files').addEventListener('change', handleFileSelect, false);
</script>
</html> 
```

我现在正在尝试结合这两个脚本来显示带有本地文件的图表（请参阅[链接](http://jsfiddle.net/bsHM8/1/)）。我试图删除 ajax 调用并调用该函数`renderChart(f)`

```
function renderChart(data) {
    // Create the chart
    window.chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'container'
        },

        rangeSelector : {
            selected : 1
        },

        title : {
            text : 'AAPL Stock Price'
        },

        series : [{
            name : 'AAPL',
            data : data,
            tooltip: {
                valueDecimals: 2
            }
        }]
    });
}); 
```

这是行不通的。请问我哪里错了

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:09:02.077

您发送的 JSFiddle 中有几个语法错误。[这是一个新的 JSFiddle](http://jsfiddle.net/S4C5a/)，基本错误已解决。但是我没有尝试使用格式化为 Highcharts 应该需要的文件。

提示：尝试使用 Chrome 中的 Javascript 控制台查看错误。

# asp.net-mvc - 如何强制 asp.net webapi 始终将 POST 数据解码为 JSON

> ID：12385694
> 
> 赞同：5
> 
> 时间：2012-09-12T10:01:48.583
> 
> 标签：asp.net-mvc, json, asp.net-web-api

我正在将一些 json 数据发布到我的 asp.net webapi，但 post 参数始终为 null - 数据未正确序列化。该方法看起来像这样：

```
public HttpResponseMessage Post(string id, RegistrationData registerData) 
```

似乎问题在于客户端（我无法控制）总是将内容类型发送为`x-www-form-urlencoded`，即使内容实际上是 json 。这会导致 mvc 尝试将其反序列化为表单数据，但失败了。

有什么方法可以让 webapi 始终反序列化为 json，并忽略 content-type 标头？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T10:01:48.583

我在这里找到了答案：http: [//blog.cdeutsch.com/2012/08/force-content-types-to-json-in-net.html](http://blog.cdeutsch.com/2012/08/force-content-types-to-json-in-net.html)

此代码需要添加到 Application_Start 或 WebApiConfig.Register

```
foreach (var mediaType in config.Formatters.FormUrlEncodedFormatter.SupportedMediaTypes) 
{
    config.Formatters.JsonFormatter.SupportedMediaTypes.Add(mediaType);
}

config.Formatters.Remove(config.Formatters.FormUrlEncodedFormatter);
config.Formatters.Remove(config.Formatters.XmlFormatter); 
```

它告诉 json 格式化程序接受每种类型，并删除 form 和 xml 格式化程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T15:36:45.730

我建议宁愿修改传入请求的内容类型，比如在消息处理程序中将其更改为适当的内容类型，而不是从配置中删除格式化程序

# cordova - 融合表、Phonegap 和静态地图 API

> ID：12385696
> 
> 赞同：1
> 
> 时间：2012-09-12T10:01:51.650
> 
> 标签：cordova, google-fusion-tables, google-static-maps

我正在构建一个使用 Google Map V3 JS API 和 Fusion Tables 的 Phonegap 应用程序（iOS 和 Android）。该应用程序的核心是显示野生动物目击事件的“实时”地图——人们可以通过地图/应用程序等添加和查看目击事件。

核心功能运行良好。但是我们有 2 个性能问题： 1\. 由于 Google 地图的“实时”特性和我们的地图内容（直接来自 Fusion Tables），地图加载速度很慢。2\. 用户有时会没有电话网络覆盖（偏远地区）。根据上述问题，地图无法离线工作。

所以我们需要一种方法来帮助地图在没有网络覆盖的情况下离线工作。

我花了很多时间寻找替代方案，但是（在技术上只是自学）我很难找到答案......

*   我们可以将 Google 静态地图与 Fusion Tables 一起使用吗？所以基线谷歌地图是一个静态地图，但我们仍然可以在它上面显示 Fusion Table 图层、标记等？
*   我们可以将离线、非 Google 地图与 Fusion Tables 结合起来吗？所以我们会使用例如 TileMill 构建我们自己的离线地图，然后 Fusion Tables 图层会显示在上面吗？
*   上述哪些类型的离线地图最适合与 PhoneGap 和 Fusion Tables 一起使用？使用PhoneGap 和TileMill 似乎存在一些我们正在努力克服的问题。有谁知道我们可以查看的成功部署的替代方案或替代方案？

为所有问题道歉。非常感谢任何和所有输入。

抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:05:32.020

您可能想考虑其他技术，您的问题表明您正在使用谷歌地图 API 和融合表，但也许您应该将这些陈述视为您可能需要重新考虑的假设。我建议将leaflet.js（[http://leafletjs.com/](http://leafletjs.com/)）作为替代方案。为什么我告诉你这个我无法理解，因为我正在构建一个应用程序，它将与你的应用程序直接竞争，从它的声音来看。祝你好运。

# php - S3.php - 将文件写入 Amazon S3

> ID：12385697
> 
> 赞同：1
> 
> 时间：2012-09-12T10:01:57.707
> 
> 标签：php, amazon-s3

我成功地使用以下代码将文件写入 S3：

```
<?php

        require_once 'S3.php';

        // Instantiate the class
        $s3 = new S3('AKIAJNIMGH2SZ5YRGTTA', 'dpIf3P7YsW38IosMTzX30KkMfTE7zkX77wuuIRzk', true, 's3-ap-southeast-1.amazonaws.com');

        // dirname(__FILE__).'/S3.php' - this is the full server path to the file
        $s3->putObjectFile(dirname(__FILE__).'/S3.php', 'dating-images.goneglobal.com', '1000089762/new-file-user.jpg', S3::ACL_PUBLIC_READ);

?> 
```

我注意到元数据默认为“文本/纯文本”。如何通过 php 脚本将其更新为“image/jpeg”？例如：我可以在上面的代码中添加一个属性还是额外的一行？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:58:04.673

您可以通过这种方式将内容类型作为字符串传递：

```
$s3->putObjectFile(dirname(__FILE__).'/S3.php', 'dating-images.goneglobal.com', '1000089762/new-file-user.jpg', S3::ACL_PUBLIC_READ, array(), 'image/jpeg'); 
```

# flash - 在 DHTML 和 SWF10/11 运行时的 OpenLaszlo 5.0 中使用动画 GIF

> ID：12385701
> 
> 赞同：1
> 
> 时间：2012-09-12T10:02:04.107
> 
> 标签：flash, animated-gif, openlaszlo, lzx

Flash Player 不提供对动画 GIF 文件的本机支持。在 DHTML 运行时中，您可以像使用任何其他图像资源一样使用动画 GIF。但是如何将图像用作 SWF10 或 SWF11 运行时中的视图资源呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:02:04.107

幸运的是，有许多现有的开源 ActionScript 库支持播放和生成动画 GIF。我们将使用[as3gif](http://code.google.com/p/as3gif/)项目。我们首先必须将 as3gif 的 ActionScript 源代码编译成一个 SWC 库，然后才能与 OpenLaszlo 一起使用。下载[0.6 版 as3gif 的 ZIP 文件](http://code.google.com/p/as3gif/downloads/list)。解压缩 $LPS_HOME 文件夹中的 ZIP 文件。您应该有一个子文件夹“GIFPlayer 0.6”。

> $LPS_HOME/GIFPlayer 0.6/

进入该文件夹，并使用 Flex SDK compc 命令将 ActionScript 类编译为 SWC 文件。对于 OpenLaszlo 4.9 或 5.0（截至 2012 年 9 月），可在 $LPS_HOME/WEB-INF/bin/compc 中找到 compc 命令。如果您使用 OpenLaszlo 的 flex4.6 分支，则 compc 命令的路径对于 SWF10 运行时为 WEB-INF/flexsdk/4.5.1/bin/compc，或 WEB-INF/flexsdk/4.6.0/bin/用于 SWF11 运行时的 compc。

> $LPS_HOME/WEB-INF/bin/compc -optimize=true -static-link-runtime-shared-libraries=true -source-path+=. -output=bin/as3gif_0.6.swc -include-classes org.bytearray.gif.decoder.GIFDecoder org.bytearray.gif.encoder.GIFEncoder org.bytearray.gif.encoder.LZWEncoder org.bytearray.gif.encoder.NeuQuant org.bytearray.gif.errors.FileTypeError org.bytearray.gif.events.FileTypeEvent org.bytearray.gif.events.FrameEvent org.bytearray.gif.events.GIFPlayerEvent org.bytearray.gif.events.TimeoutEvent org.bytearray.gif .frames.GIFFrame org.bytearray.gif.player.GIFPlayer

编译完成后会在子文件夹bin中找到生成的SWC文件：

> bin/as3gif_0.6.swc

将 SWC 文件复制到 $LPS_HOME/WEB-INF/flexlib 文件夹中。我们将用来显示动画 GIF 的类是 org.bytearray.gif.player.GIFPlayer 类。

下面是一个在两个运行时都支持 GIF 的 OpenLaszlo 类示例：

```
<canvas>
<!-- Copyright (c) Raju Bitter / MIT license http://www.opensource.org/licenses/mit-license.php -->

  <class name="gifview" extends="view" width="200" height="200">
    <passthrough when="$as3">
      import flash.events.IOErrorEvent;
      import flash.net.URLRequest;
      import org.bytearray.gif.player.GIFPlayer;
      import org.bytearray.gif.events.GIFPlayerEvent;
    </passthrough>
    <attribute name="gifsrc" type="string" value="" />
    <attribute name="__gifplayer" type="object" value="null" />
    <handler name="oninit">
      if (this.gifsrc != '') {
         this.ongifsrc.sendEvent();
      }
    </handler>
    <handler name="ongifsrc">
      if ($dhtml) {
        this.setSource(this.gifsrc);
      } else {
    if (this.__player == null) {
          this.__player = new GIFPlayer();
          this.__player.addEventListener(GIFPlayerEvent.COMPLETE, onGIFLoadComplete);
          this.__player.addEventListener(IOErrorEvent.IO_ERROR, onIOError);
        }
        this.__player.load(new URLRequest(this.gifsrc));
        this.getDisplayObject().addChild(this.__player);
      }
    </handler>
    <method name="onGIFLoadComplete" args="evt"><![CDATA[
      Debug.info("GIF loaded successfully!");
      Debug.info("Total frames: " + this.__player.totalFrames);
      for (var i=1; i <= this.__player.totalFrames; i++) {
        Debug.info("Delay for frame #" + i + ": " + this.__player.getDelay(i));
      }
    ]]></method>
    <method name="onIOError" args="evt">
      Debug.error("Error loading GIF!");
      Debug.inspect(evt);
    </method>
    <!-- Custom unload method -->
    <method name="unload">
       if ($dhtml) {
         super.unload();
       } else {
         this.getDisplayObject().removeChildAt(0);
         // Dispose image resources
     this.__player.dispose();
         this.setAttribute('__player', null);
       }
    </method>
    <method name="stopGIFAnim">
      if ($as3) {
        this.__player.stop();
        Debug.info("Stopped animation at frame " + this.__player.currentFrame);
      } else {
         Debug.warn("Not supported in this runtime");
      }
    </method>
    <method name="startGIFAnim">
      if ($as3) {
        this.__player.play();
      } else {
         Debug.warn("Not supported in this runtime");
      }
    </method>
  </class>

  <gifview x="100" y="10" id="gv" gifsrc="animated.gif" />

  <button text="Start anim" onclick="gv.startGIFAnim()" />
  <button y="50" text="Stop anim" onclick="gv.stopGIFAnim()" />
  <button y="100" text="Unload GIF" onclick="gv.unload()" />
  <button y="150" text="Load again" onclick="gv.setAttribute('gifsrc', 'animated.gif')" />

</canvas> 
```

ActionScript 类支持开始和停止动画，并允许您访问 GIF 的每一帧的延迟。

![将动画 GIF 加载到 SWF11 运行时的 OpenLaszlo 应用程序](../Images/c6d3c5bbd2586b55efba0905e139f96b.png)

# sharepoint - 网站定义和网页模板有什么区别？

> ID：12385703
> 
> 赞同：1
> 
> 时间：2012-09-12T10:02:20.597
> 
> 标签：sharepoint

昨天在一次采访中，他们问网站定义和网页模板有什么区别？真的我很困惑。谁能告诉我这些区别？我用谷歌搜索但没有得到具体答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:45:12.160

1.  **网站定义**会影响从它创建的整个网站集。
    **Web 模板**是站点范围的。

2.  **站点定义**由存储在前端 Web 服务器`\(14 hive)\TEMPLATE\SiteTemplates`目录下的文件夹中的文件组成。
    **Web 模板**存储在数据库中。

3.  **Web 模板**基于现有站点，因此它们依赖于用于创建其基本站点的站点定义。

更多信息：[站点类型：Web 模板和站点定义](http://msdn.microsoft.com/en-us/library/ms434313.aspx)

# java - 如何在 jython 脚本中随机运行函数？

> ID：12385711
> 
> 赞同：3
> 
> 时间：2012-09-12T10:02:51.687
> 
> 标签：java, python, jython, grinder

```
class TestRunner:
    def __call__(self):
        user1()
        user2()
        user3()
        user4() 
```

如何在 jython 中随机执行用户以在磨床工具中运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T10:12:58.393

将函数存储在列表中（不调用它们），然后使用`random.shuffle`：

```
import random

class TestRunner:
    def __call__(self):
        users = [user1, user2, user3, user4]
        random.shuffle(users)
        for user in users:
            user() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T10:14:15.180

我不知道 jython，但如果你想要一个随机选择，这应该可以

```
import random
class TestRunner:
    def __call__(self):
        func = random.choice([user1, user2, user3, user3])
        func() 
```

# ssis - 根据 SSIS 变量表达式中的条件将输入文件名追加到日期

> ID：12385714
> 
> 赞同：0
> 
> 时间：2012-09-12T10:03:04.940
> 
> 标签：ssis

我有几个具有不同文件名和不同日期格式的 CSV 输入文件。我需要根据条件动态选择输入文件。

例如

```
i have files file120120909.csv, scalefile09102012.csv 
```

我需要根据条件检索输入文件。所以我采用了一个用户变量并以这种方式返回表达式

```
(@[User::Type] =="File" ? "file" : (@[User::type] =="scale" ? "scale_" :"NA"))  + (DT_STR,4,1252)DATEPART("yyyy", @[System::StartTime] ) + RIGHT("0" + (DT_STR,2,1252) DATEPART("mm", @[System::StartTime]),2) + RIGHT("0" + (DT_STR,2,1252)DATEPART("dd", @[System::StartTime]),2) 
```

当我评估表达式时，我得到以下结果

```
file120120912 
```

现在，当我为用户变量 @[User::Type] =="scale" 赋值时，表达式结果必须是`scalefile09102012`.

所以根据条件我如何附加文件的日期

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:28:21.420

您可以将 VB.NET 代码写入脚本任务来解决您的问题：

```
 Dim type As String = Dts.Variables("Type").Value.ToString()
    Dim startDate As DateTime = DateTime.Parse(Dts.Variables("StartTime").Value.ToString())

    Dim result As String = ""

    If type.ToLower() = "file" Then
        result = type.ToLower() + startDate.ToString("yyyyMMdd")
    ElseIf type.ToLower() = "scale" Then
        result = type.ToLower() + "file" + startDate.ToString("MMddyyyy")
    Else
        result = "incorrect type"
    End If

    MsgBox(result) 
```

# php - 在对二维数组进行排序时保留数组键

> ID：12385717
> 
> 赞同：2
> 
> 时间：2012-09-12T10:03:10.533
> 
> 标签：php, arrays, multidimensional-array, sorting

这是我的二维数组：

```
$a = array(
    '6' => array(10, 5),
    '5' => array(20, 7),
    '40' => array(15, 9)
); 
```

我可以简单地对它进行排序`array_multisort`：

```
foreach ($a as $k => $r) {
    $keys[$k] = $r[1]; 
}
array_multisort($keys, SORT_DESC, $a); 
```

但它会清除键（'6'、'5'、'40'）：

```
Array
(
    [0] => Array
        (
            [0] => 15
            [1] => 9
        )

    [1] => Array
        (
            [0] => 20
            [1] => 7
        )

    [2] => Array
        (
            [0] => 10
            [1] => 5
        )

) 
```

是否`array_multisort`有任何参数来保留数组键？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T10:06:26.467

使用更简单的解决方案[`uasort`](http://php.net/uasort)：

```
uasort($a, function ($a, $b) { return $a[1] - $b[1]; }); 
```

# cordova - 网页上带有关闭按钮的全屏儿童浏览器

> ID：12385720
> 
> 赞同：2
> 
> 时间：2012-09-12T10:03:26.630
> 
> 标签：cordova, childbrowser

我（我认为）childbrowser 插件有一个小问题，问题如下；

所有 Childbrowser 代码都可以正常工作，它连接到我们服务器上的外部网页，我以全屏模式运行它（所以没有导航栏/na 按钮等），我正在寻找放置在我们关闭的网页上的代码窗户。

我需要放置什么代码来关闭网页上的子浏览器窗口？当我单击要关闭子浏览器会话的那个时，网页上只是一个图像“主页”。这甚至可能吗？

非常感谢您提前提供的所有帮助，

埃瓦尔德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T16:56:34.580

我想我知道你的意思。这是我的快速破解。它涉及修改您的 ChildBrowser.java。在进入代码之前，让我解释一下这基本上会将关闭按钮移动到 ChildBrowser 的 web 视图中。但它并没有悬停在右上角。因此，当您在 ChildBrowser 中向下滚动时，该按钮将移动。

我还删除了其他按钮，例如前进、后退和地址 URL 文本字段。这是专门针对 ShowWebPage 函数的。

```
 public String showWebPage(final String url, JSONObject options) {
    // Determine if we should hide the location bar.
    if (options != null) {
        showLocationBar = options.optBoolean("showLocationBar", true);
    }

    // Create dialog in new thread
    Runnable runnable = new Runnable() {
        /**
         * Convert our DIP units to Pixels
         *
         * @return int
         */
        private int dpToPixels(int dipValue) {
            int value = (int) TypedValue.applyDimension( TypedValue.COMPLEX_UNIT_DIP,
                                                        (float) dipValue,
                                                        cordova.getActivity().getResources().getDisplayMetrics()
            );

            return value;
        }

        public void run() {
            // Let's create the main dialog
            dialog = new Dialog(cordova.getActivity(), android.R.style.Theme_NoTitleBar);
            dialog.getWindow().getAttributes().windowAnimations = android.R.style.Animation_Dialog;
            dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
            dialog.setCancelable(true);
            dialog.setOnDismissListener(new DialogInterface.OnDismissListener() {
                    public void onDismiss(DialogInterface dialog) {
                        try {
                            JSONObject obj = new JSONObject();
                            obj.put("type", CLOSE_EVENT);

                            sendUpdate(obj, false);
                        } catch (JSONException e) {
                            Log.d(LOG_TAG, "Should never happen");
                        }
                    }
            });

            // Main container layout
            LinearLayout main = new LinearLayout(cordova.getActivity());
            main.setOrientation(LinearLayout.VERTICAL);

            // Toolbar layout
            RelativeLayout toolbar = new RelativeLayout(cordova.getActivity());
            toolbar.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, this.dpToPixels(44)));
            toolbar.setPadding(this.dpToPixels(2), this.dpToPixels(2), this.dpToPixels(2), this.dpToPixels(2));
            toolbar.setHorizontalGravity(Gravity.LEFT);
            toolbar.setVerticalGravity(Gravity.TOP);
            toolbar.setBackgroundColor(Color.TRANSPARENT);

            // Close button
            ImageButton close = new ImageButton(cordova.getActivity());
            RelativeLayout.LayoutParams closeLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.FILL_PARENT);
            closeLayoutParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
            close.setLayoutParams(closeLayoutParams);
            close.setId(5);
            try {
                close.setImageBitmap(loadDrawable("www/childbrowser/icon_close.png"));
            } catch (IOException e) {
                Log.e(LOG_TAG, e.getMessage(), e);
            }
            close.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    closeDialog();
                }
            });

            // WebView
            webview = new WebView(cordova.getActivity());
            webview.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
            webview.setWebChromeClient(new WebChromeClient());
            WebViewClient client = new ChildBrowserClient(edittext);
            webview.setWebViewClient(client);
            WebSettings settings = webview.getSettings();
            settings.setJavaScriptEnabled(true);
            settings.setJavaScriptCanOpenWindowsAutomatically(true);
            settings.setBuiltInZoomControls(true);
            settings.setPluginsEnabled(true);
            settings.setDomStorageEnabled(true);
            webview.loadUrl(url);
            webview.setId(6);
            webview.getSettings().setLoadWithOverviewMode(true);
            webview.getSettings().setUseWideViewPort(true);
            webview.requestFocus();
            webview.requestFocusFromTouch();

            toolbar.addView(close);

            // Don't add the toolbar if its been disabled
            if (getShowLocationBar()) {
                webview.addView(toolbar);
            }

            // Add our webview to our main view/layout
            main.addView(webview);

            WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
            lp.copyFrom(dialog.getWindow().getAttributes());
            lp.width = WindowManager.LayoutParams.FILL_PARENT;
            lp.height = WindowManager.LayoutParams.FILL_PARENT;

            dialog.setContentView(main);
            dialog.show();
            dialog.getWindow().setAttributes(lp);
        }

      private Bitmap loadDrawable(String filename) throws java.io.IOException {
          InputStream input = cordova.getActivity().getAssets().open(filename);
          return BitmapFactory.decodeStream(input);
      }
    };
    this.cordova.getActivity().runOnUiThread(runnable);
    return "";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:46:32.637

正如一位好心人在电子邮件中提到的那样，这将是添加到网页中的代码：

在在线 html 页面中的主页按钮的单击事件上使用以下代码：

```
window.plugins.childBrowser.close(); 
```

或添加到插件的其他选项：

```
window.plugins.childBrowser.onLocationChange = function(loc){ if (loc.indexOf("exit.html") >= 0) { window.plugins.childBrowser.close(); } 
```

什么检测 clidbrowser 是否找到 exit.html 页面然后返回（关闭）到应用程序

希望它能像对我一样对你有帮助

# .net - 温莎城堡 TypedFactory 注册

> ID：12385728
> 
> 赞同：0
> 
> 时间：2012-09-12T10:04:00.230
> 
> 标签：.net, castle-windsor, castle

是否有可能自动注册所有在温莎城堡中实现某个接口的 TypedFactories？

我的界面如下所示：

```
Public Interface IViewModelFactory(Of TViewModel)

    Function Create() As TViewModel

    Sub Release(view As TViewModel)

End Interface 
```

我尝试通过以下方式注册我的所有工厂：

```
container.Register(Classes _
                   .FromThisAssembly() _
                   .BasedOn(GetType(IViewModelFactory(Of ))) _
                   .WithServiceFromInterface() _
                   .Configure(Sub(o) o.AsFactory())) 
```

但我的工厂都没有注册

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:44:14.683

use `Types`， not `Classes`，那些不是类而是接口。

# jquery - jQuery cookie 插件的问题（cookie expire 不起作用）

> ID：12385733
> 
> 赞同：1
> 
> 时间：2012-09-12T10:04:04.870
> 
> 标签：jquery, plugins, cookies

我对 jQuery cookie 插件有一个棘手的问题。过期选项不适用于我的所有计算机和浏览器。

这只是以下行：

```
$.cookie( 'basket_id' , basket_id , { expires: 365 , path: '/' }); 
```

basket_id 是一个字符串。

根据此代码，应设置 cookie 并在一年后过期。

cookie 已设置（我看到它@firebug），但在重新加载网站（F5）后被删除。

我完全不知道这个问题？！

有人可以帮助我吗？我已经不知道该往哪里看...

希腊克里斯

（当然，插件已正确包含）

*编辑*并且萤火虫显示的到期日期也是正确的（+365天）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:23:16.607

这是一个完整的垃圾箱，您可以如何使用 cookie 插件以及读取和重置 cookie。在此演示中，只需单击每个元素，它将将该元素的文本/值存储在 cookie 中，然后单击读取 cookie 按钮以检查存储的 cookie 值。

**演示** [http://codebins.com/bin/4ldqp7i](http://codebins.com/bin/4ldqp7i)

# ios - 左上角像素坐标 ios (0,0) 还是 (1,1)？

> ID：12385739
> 
> 赞同：0
> 
> 时间：2012-09-12T10:04:22.997
> 
> 标签：ios

考虑到 ios 设备的屏幕分辨率为 (320*480) 点。左上像素的点值是多少？是 0,0 还是 1,1 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:09:31.660

从技术上讲，左上角的像素实际上是一个从`{0, 0}`到延伸的矩形，`{1, 1}`中心点在`{0.5, 0.5}`。

表示矩形时，要包含要从 开始的左上角像素`{0, 0}`。但是，例如，如果你想画一条以左上角像素为中心的线，那么你的线需要通过`{0.5, 0.5}`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T10:06:26.947

`(0, 0)`. 在计算世界中，编号*总是*从零开始。这就是你可以区分程序员和其他人的方式：告诉他们数到十。

# c++ - Visual Studio 2010 资源树未打开

> ID：12385740
> 
> 赞同：0
> 
> 时间：2012-09-12T10:04:27.980
> 
> 标签：c++, visual-studio-2010, mfc

我在使用 Visual Studio 2010 时遇到问题，因为我制作了一个包含对话框的 MFC 项目。但是，当我转到资源视图时，我可以看到 .rc 文件（我看不到在解决方案资源管理器中列出的 .rc2 文件）但是当我单击它时，它没有打开到预期的图标、对话框、菜单等

该项目运行和编译正常，但我只是不明白为什么我不能进入对话框来编辑它。谢谢詹姆斯

# android - 带有 h264 编码器的视频聊天工具

> ID：12385743
> 
> 赞同：2
> 
> 时间：2012-09-12T10:04:41.743
> 
> 标签：android, video, encoder

大家好，我正在尝试开发视频聊天应用程序，并且我正在使用 h264 编码器进行视频，但由于视频似乎有点不清楚，所以我面临一些问题。我在下面附上了一张图片，您可以在其中看到眉毛上方的一些阴影。谁能告诉我可能是什么问题？因为它只发生在前置摄像头上，并且适用于真实摄像头。![在此处输入图像描述](../Images/3bb96dd22fd00d4316ebdc3860d5121a.png)

希望得到回应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:43:20.890

编码世界确实是巨大的，有很多方法可以存储数据、操作数据和传输数据，而当涉及到成像世界时，所有选项都会成倍增加。

你的问题让我想起了[这个话题](http://en.wikipedia.org/wiki/Chroma_subsampling)，看起来也有一些阴影，有点像那个蓝色的阴影是前一帧的一部分，形状在不同的位置。

请记住，H264 是一种获得专利的编解码器，如果您想使用它，您必须付费。

# php - 私人推特应用程序？

> ID：12385747
> 
> 赞同：1
> 
> 时间：2012-09-12T10:04:52.317
> 
> 标签：php, api, twitter

我希望将 Twitter 实施到内部现有系统中。我需要使用需要授权的 API 的几个功能（例如提及）。

据我了解，这只能与 Twitter 应用程序一起使用，因此我创建了一个。

然而，这一切都非常面向公众，要求提供网站 URL 和应用程序描述等详细信息，在我的情况下，我不需要或不想要这些信息。

我只需要授权我的系统调用 API，我是否以正确的方式进行？

如果没有，是否有某种 PHP 库/替代方式来获得自动化？我无法想象在这种情况下我是第一个？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:12:05.323

您需要提供这些详细信息，以便 Twitter 知道您正在构建什么样的应用程序。如果您的应用程序不打算发布任何推文，那完全可以；如果您只是发出 GET 请求，您的应用程序信息将不会在任何地方发布。

如果您的应用程序没有面向公众的 URL，则可以输入占位符或虚假 URL。

# javascript - contentWindow.document.body 为空

> ID：12385756
> 
> 赞同：2
> 
> 时间：2012-09-12T10:05:28.780
> 
> 标签：javascript, iframe

我的 javascript 中有一个问题，它只是根据内容调整 iFrame 的大小。我让它在其他地方工作，但对于这个例子，它抛出了一个错误。使用以下代码`body`为 null ，因此无法获取`scrollHeight`.

```
if(document.getElementById('iFrameHelpDesk') != null)
{
    var Height = document.getElementById('iFrameHelpDesk').contentWindow.document.body.scrollHeight;

    document.getElementById('iFrameHelpDesk').height = Height + 40;
} 
```

使用的html是：

```
<iframe src="http://<snipped webaddress>" id="iFrameHelpDesk" scrolling="no" frameborder="no"></iframe> 
```

为什么这不填充`body`对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T15:50:17.900

相当简单，我从文档加载 ( `$(function() {})`) 方法中获取代码，并将其放入它自己的方法中，以便在实际 iframe 加载时使用。IE。

```
$('#iFrameHelpDesk').load(function() {

    var Height = document.getElementById('iFrameHelpDesk').contentWindow.document.body.scrollHeight;

    document.getElementById(iFrameHelpDesk').height = Height + 40;

}); 
```

这完美地工作，因为它应该。但现在让我感到困惑的是，为什么我在其上执行类似代码的其他一些 iframe 在文档加载中运行良好。但这行得通，我对此很满意。

# android - 如何根据android中的按钮位置设置弹出窗口位置？

> ID：12385758
> 
> 赞同：0
> 
> 时间：2012-09-12T10:05:31.183
> 
> 标签：android, android-layout

我在单击按钮时以编程方式添加按钮我需要在该按钮位置显示 PopupWindow 当方向改变时该按钮位置也改变..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:05:54.347

我想告诉你我的想法，可能不是最好的解决方案，只是一个参考。这里的所有来源都是伪代码。

这是父布局，并将按钮和弹出窗口设置在同一位置：

* * *

```
<RelativeLayout
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

  <Button android:layout_marginTop="80dp" 
     android:layout_marginLeft="80dp" >

  </Button>

  <com.yourdomain.android.PopupWindow 
      android:layout_marginTop="80dp" 
      android:layout_marginLeft="80dp" 
      android:visibility="GONE">
  </com.yourdomain.android.PopupWindow> 

</RelativeLayout> 
```

这是您的弹出窗口的布局：

```
 <LinearLayout
            android:id="@+id/linearlayout1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:visibility="visible" >

</LinearLayout> 
```

在这里，您可以创建一个类来绑定到此布局，因此它是您的自定义组件：

```
public class PopupWindow extends LinearLayout {

    protected Context _context = null;

    public PopupWindow (Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub

        _context = context;
        setupView(context);
    }

    public PopupWindow (Context context) {
        super(context);
        // TODO Auto-generated constructor stub

        _context = context;
        setupView(context);
    }

        public void setupView (Context context)
        {
           // here to initialize all children views in this layout
        }

        public void show ()
        {
            this.setVisibility (LinearLayout.Visible);
        }

        public void hide ()
        {
            this.setVisibility (LinearLayout.GONE);
        }

} 
```

我希望这有帮助。

# sql - 抑制“重复键值违反唯一约束”错误

> ID：12385763
> 
> 赞同：11
> 
> 时间：2012-09-12T10:05:56.053
> 
> 标签：sql, ruby-on-rails, postgresql, duplicates, sql-insert

我正在开发一个使用 Postgres 作为其数据库的 Rails 3 应用程序。我有如下所示的表格：

```
 Table "public.test"
    Column     |  Type   | Modifiers
---------------+---------+-----------
 id            | integer | not null
 some_other_id | integer |
Indexes:
    "test_pkey" PRIMARY KEY, btree (id)
    "some_other_id_key" UNIQUE CONSTRAINT, btree (some_other_id) 
```

这有两列：

*   id，即主键（由 rails 自动创建）
*   some_other_id，其中包含由另一个系统生成的密钥。这个 id 需要是唯一的，所以我在表中添加了唯一键约束。

现在，如果我尝试插入带有重复的行`some_other_id`，它会失败（很好）并且我在我的 Postgres 日志中得到以下输出：

> ```
> ERROR:  duplicate key value violates unique constraint "some_other_id_key" 
> ```

问题是我的应用程序尝试两次添加相同的 ID 完全是主线，并且我的日志被此“错误”消息发送垃圾邮件，这会导致各种问题：文件占用大量磁盘空间，诊断信息丢失噪音，Postgres 必须丢弃诊断以将日志文件保持在大小限制内，等等。

有谁知道我怎么能：

*   抑制日志，或者通过抑制有关此键的所有日志，或者通过在尝试执行`INSERT`.
*   使用其他一些 Postgres 功能来发现重复键，而不是尝试`INSERT`. 我听说过规则和触发器，但我都无法工作（尽管我不是 Postgres 专家）。

请注意，任何解决方案都需要使用 Rails，它的插入如下：

```
INSERT INTO test (some_other_id) VALUES (123) RETURNING id; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-12T12:47:04.420

为了避免重复键错误开始：

```
INSERT INTO test (some_other_id)
SELECT 123
WHERE  NOT EXISTS (SELECT 1 FROM test WHERE some_other_id = 123)
RETURNING id; 
```

我假设 id 是一个自动获取其值 的*串行列。*

这受制于*非常小的竞争条件*`SELECT`（在和之间的时间段内`INSERT`）。但可能发生的最糟糕的情况是，您毕竟会得到一个重复的密钥错误，这几乎不会发生，并且在您的情况下不应该成为问题。

如果您的框架限制您使用正确语法的选项，您始终可以使用原始 SQL。

或者您可以为此目的创建一个 UDF（用户定义函数）：

```
CREATE FUNCTION f_my_insert(int)
 RETURNS int LANGUAGE SQL AS
$func$
INSERT INTO test (some_other_id)
SELECT $1
WHERE  NOT EXISTS (SELECT 1 FROM test WHERE some_other_id = $1)
RETURNING id;
$func$ 
```

称呼：

```
SELECT f_my_insert(123); 
```

或者，默认为已经存在的`id`：

```
CREATE FUNCTION f_my_insert(int)
 RETURNS int LANGUAGE plpgsql AS
$func$
BEGIN;

RETURN QUERY
SELECT id FROM test WHERE some_other_id = $1;

IF NOT FOUND THEN
   INSERT INTO test (some_other_id)
   VALUES ($1)
   RETURNING id;
END IF;

END
$func$ 
```

同样，这为竞争条件留下了最小的机会。您可以以降低性能为代价来消除它：

*   [函数中的 SELECT 或 INSERT 是否容易出现竞争条件？](https://stackoverflow.com/questions/15939902/is-select-or-insert-in-a-function-prone-to-race-conditions/15950324#15950324)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T10:18:19.253

您可以禁用会话（或实际上是全局）的错误消息记录，但它需要超级用户权限：

通过运行：

```
set log_min_messages=fatal; 
```

在会话 (=connection) 结束或您发出新`set`语句来重置值之前，只会记录致命错误。

但由于只允许超级用户更改此设置，它可能不是一个好的解决方案，因为它要求您的应用程序用户拥有该权限，这是一个主要的安全问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-28T16:25:48.363

如果你只是想在工作时抑制这些错误`psql`，你可以这样做

```
SET client_min_messages TO fatal 
```

这将持续到您的会话的其余部分。

# java - 删除 ANTLR 生成的 java 类中的（绝对）路径：

> ID：12385765
> 
> 赞同：3
> 
> 时间：2012-09-12T10:05:58.280
> 
> 标签：java, antlr, antlrworks

我正在使用 ANTLRWorks 1.4.3 和 ANTLR 3.4 从语法文件生成基于 Java 的解析器和词法分析器。生成的`.java`-files 包含字符串，如

```
C:\\Users\\[path to the eclipse project]\\src\\some\\package\\name\\MyGrammar.g 
```

此绝对路径用作

*   返回字符串，例如在`getGrammarFileName()`词法分析器和解析器的方法中，以及
*   在这两个文件中多次作为评论。

我看到以下缺点：

*   如果其他人在他的开发环境中使用不同的路径重新生成这些文件，即使没有对语法文件进行任何更改，也会引入很多更改。
*   没有人，尤其是在开源项目中，需要知道我的语法文件到底存储在哪里。例如，关于`C:\\Users\\simon\\customerA\\crap_software\\[rest of the path to grammar file]`

有没有办法在 ANTLRWorks 或 ANTLR s.th 中控制它。至少只使用相对路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T12:33:26.083

最后我找到了解决我自己问题的方法。

路径似乎取决于您调用 ANTLR 的位置和方式。我无法使用 ANTLRWorks 实现这一点，但使用命令行 ANTLR 你可以执行此操作。您可以执行以下操作（示例适用于 Windows，但也应该可以在其他操作系统上重现）：

1.  [为命令行下载](http://www.antlr.org/download/antlr-3.4-complete.jar)Antlr 并将其复制到 eg

    `C:\Program Files (x86)\ANTLRworks\antlr-3.4-complete.jar`.

2.  打开 Windows 命令行 ( `cmd.exe`) 并切换到语法文件所在的目录：

    `cd C:\Users[path to the eclipse project]\src\some\package\name`

3.  调用

    ```
    java -jar "C:\Program Files (x86)\ANTLRworks\antlr-3.4-complete.jar" MyGrammar.g 
    ```

    从命令行。

生成的 java 文件将只包含您的语法文件的名称，不再包含路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:31:45.843

> 有没有办法在 ANTLRWorks 或 ANTLR s.th 中控制它。至少只使用相对路径？

### 简短的回答

不。

### 长（呃）答案（包含高度主观的观点！风险自负）

这是特定于目标的，但是，AFAIK，没有目标允许您指定路径的类型（绝对或相对）。

“否”可能是因为`getGrammarFileName()`仅在调试生成的词法分析器/解析器时使用。并且可能*不*应该将生成的源文件签入源代码管理，因此没有人会看到您在生成的源文件中看到的路径。应该检查语法，并让开发人员从中生成自己的词法分析器/解析器。

同样，这都是我的猜测。

# php - 实现网址正则表达式

> ID：12385770
> 
> 赞同：5
> 
> 时间：2012-09-12T10:06:11.507
> 
> 标签：php, regex

我在网上找到了以下内容，但我无法实施

`(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?`

这就是我希望 php 执行的操作：

采取以下措施：`Look here: http://www.rocketlanguages.com/spanish/resources/pronunciation_spanish_accents.php`

并将其变成：`Look here: <a href="http://www.rocketlanguages.com/spanish/resources/pronunciation_spanish_accents.php">http://www.rocketlanguages.com/span...anish_accents.php</a>`

如果 URL 很长，那么 a 文本会在中间被分解为 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:59:20.690

尝试这个：

```
// URL regex from here:
// http://daringfireball.net/2010/07/improved_regex_for_matching_urls
define( 'URL_REGEX', <<<'_END'
~(?i)\b((?:[a-z][\w-]+:(?:/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))~
_END
);

// PHP 5.3 or higher, can use closures (anonymous functions)
function replace_urls_with_anchor_tags( $string,
                                        $length = 50,
                                        $elision_string = '...' ) {
    $replace_function = function( $matches ) use ( $length, $elision_string) {
        $matched_url = $matches[ 0 ];
        return '<a href="' . $matched_url . '">' .
                abbreviated_url( $matched_url, $length, $elision_string )   .
                '</a>';
    };
    return preg_replace_callback(
        URL_REGEX,
        $replace_function,
        $string
    );
}

function abbreviated_url( $url, $length = 50, $elision_string = '...' ) {
    if ( strlen( $url ) <= $length ) {
        return $url;
    }
    $width_either_side = (int) ( ( $length - strlen( $elision_string ) ) / 2 );
    $left  = substr( $url, 0, $width_either_side );
    $right = substr( $url, strlen( $url ) - $width_either_side );

    return $left . $elision_string . $right;
} 
```

（URL_REGEX 定义中的反引号混淆了 stackoverflow.com 的语法高亮，但没什么好担心的）

该函数`replace_urls_with_anchor_tags`接受一个字符串并将其中匹配的所有 URL 更改为锚标记，通过省略省略号来缩短长 URL。该函数采用可选参数`length`和`elision_string`参数，以防您希望使用长度并将椭圆更改为其他内容。

这是一个使用示例：

```
// Test it out
$test = <<<_END
Look here:
http://www.rocketlanguages.com/spanish/resources/pronunciation_spanish_accents.php

And here:
http://stackoverflow.com/questions/12385770/implementing-web-address-regular-expression
_END;

echo replace_urls_with_anchor_tags( $test, 50, '...' );
// OUTPUT:
// Look here:
// <a href="http://www.rocketlanguages.com/spanish/resources/pronunciation_spanish_accents.php">http://www.rocketlangua...ion_spanish_accents.php</a>
//
// And here:
// <a href="http://stackoverflow.com/questions/12385770/implementing-web-address-regular-expression">http://stackoverflow.co...ress-regular-expression</a> 
```

请注意，如果您使用的是 PHP 5.2 或更低版本，则必须重写`replace_urls_with_anchor_tags`以使用 create_function 而不是闭包。直到 PHP 5.3 才引入闭包：

```
// No closures in PHP 5.2, must use create_function()
function replace_urls_with_anchor_tags( $string,
                                        $length = 50,
                                        $elision_string = '...' ) {
    $replace_function = create_function(
        '$matches',
        'return "<a href=\"$matches[0]\">" .
                abbreviated_url( $matches[ 0 ], '            .
                                 $length  . ', '             .
                                 '"' . $elision_string . '"' .
                               ') . "</a>";'
    );
    return preg_replace_callback(
        URL_REGEX,
        $replace_function,
        $string
    );
} 
```

请注意，我将您找到的 URL 正则表达式替换为 DaveRandom 在他的评论中提到的页面上的链接。它更完整，实际上您使用的正则表达式实际上存在错误——几个“/”字符没有被转义（在这里：）`[\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#]`。此外，它不会检测 80 或 8080 等端口号。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:21:48.017

我正在使用这个正则表达式，它对我来说很好，如果你愿意，试试这个

```
(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)? 
```

# visual-studio-2012 - 替换字符串的多个部分的正则表达式（在 Visual Studio 2012 中）

> ID：12385776
> 
> 赞同：5
> 
> 时间：2012-09-12T10:06:27.123
> 
> 标签：visual-studio-2012

基本上我正在更新一个旧的网络应用程序以兼容多浏览器。原始程序员使用过的所有地方-

```
document.all.element 
```

据我了解，“.all”只是 IE，在 IE 4 中引入。符合标准的“.getElementById”函数在 IE 5 中引入。我想将上述语句的实例更改为 -

```
document.getElementById("element") 
```

我将如何形成这个正则表达式，特别是使用 Visual Studio 的“查找和替换”对话框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:11:55.137

在 Visual Studio 2010 及更早版本中，正则表达式语法如下：

标记表达式使用`{ }`，引用第一个标记以供替换使用`\1`

在您的情况下，您需要找到：

```
document\.all\.{[a-zA-Z0-9]+} 
```

并替换为：

```
document.getElementById('\1') 
```

在 Visual Studio 2012 中，正则表达式语法已更改为：

```
document\.all\.([a-zA-Z0-9]+)
document.getElementById('$1') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T10:56:24.893

我不确定这是否是我使用 Visual Studio 2012 RC 的问题，但使用大括号无法匹配任何内容。

我最终使用了 find 表达式 -

```
document\.all\.([a-zA-Z0-9]+) 
```

和替换

```
document.getElementById("$1") 
```

“$1”指的是括号中的表达式。

谢谢你们的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T10:12:55.743

搜索

```
[.]all[.]{:i} 
```

并替换为

```
.getElementById("\1") 
```

点周围的方括号`.`是为了确保它不会被解释为元字符（您可以`\.`改用）。`:i`是 Visual Studio 的标识符*符号*。

替换字符串中的`\1`引用第一个*标记*的表达式（即`{:i}`表达式），因此标识符将被“粘贴”在双引号内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T10:09:37.353

我认为您不需要正则表达式。

只需在文本替换对话框中替换`document.all.element`为`document.getElementById`

# android - 删除appwidget时onDeleted方法未启动

> ID：12385780
> 
> 赞同：2
> 
> 时间：2012-09-12T10:06:51.377
> 
> 标签：android, android-appwidget

`onDeleted`从主屏幕删除应用程序小部件时，该方法不会触发。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:22:39.840

这似乎是 Android 小部件的一个常见问题。

如果您是 AppWidgetProvider 的子类，onDelete() 可能不会被调用。为了解决这个问题，您可以改为实现 onReceive() 方法并显式查找 APPWIDGET_DELETED。

参考资料：
- [https://groups.google.com/forum/?fromgroups=#!topic/android-developers/Nl0e06rDCRY](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/Nl0e06rDCRY) - [http://blog.elsdoerfer.name/2009/06/03/writing-an-android-小部件-what-the-docs-dont-tell-you/](http://blog.elsdoerfer.name/2009/06/03/writing-an-android-widget-what-the-docs-dont-tell-you/)

# validation - gwt 编译期间的 GWT 验证错误 - 没有可用的源代码

> ID：12385785
> 
> 赞同：4
> 
> 时间：2012-09-12T10:07:22.127
> 
> 标签：validation, gwt, hibernate-validator

我正在尝试使用休眠验证器进行 gwt 验证。我已按照 http://code.google.com/p/google-web-toolkit/wiki/BeanValidation 中的步骤[操作，并根据](http://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/validation/)[http://code.google.com/p/](http://code.google.com/p/google-web-toolkit/wiki/BeanValidation)上的示例验证项目配置了我的项目[google-web-toolkit/source/browse/trunk/samples/validation/](http://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/validation/)

我的 .gwt.xml 文件包含：

```
<inherits name="org.hibernate.validator.HibernateValidator" /> 
```

和我的自定义验证工厂：

```
<replace-with class="my.package.here.client.validation.ValidatorFactory">
<when-type-is class="javax.validation.ValidatorFactory" />
</replace-with> 
```

在开发模式下，验证在客户端和服务器端都可以完美运行，但是在尝试 gwt 编译时，我得到：

```
gwtc-production:
     [java] Compiling module my.package.MyModule
     [java]    Validating newly compiled units
     [java]       [ERROR] Errors in 'jar:file:/hibernate-validator-4.2.0.Final-sources.jar!/org/hibernate/validator/constraints/impl/FutureValidatorForReadableInstant.java'
     [java]          [ERROR] Line 32: No source code is available for type org.joda.time.ReadableInstant; did you forget to inherit a required module?
     [java]       [ERROR] Errors in 'jar:file:/hibernate-validator-4.2.0.Final-sources.jar!/org/hibernate/validator/constraints/impl/FutureValidatorForReadablePartial.java'
     [java]          [ERROR] Line 32: No source code is available for type org.joda.time.ReadablePartial; did you forget to inherit a required module?
     [java]       [ERROR] Errors in 'jar:file:/hibernate-validator-4.2.0.Final-sources.jar!/org/hibernate/validator/constraints/impl/PastValidatorForReadableInstant.java'
     [java]       [ERROR] Errors in 'jar:file:/hibernate-validator-4.2.0.Final-sources.jar!/org/hibernate/validator/constraints/impl/SafeHtmlValidator.java'
     [java]          [ERROR] Line 22: The import org.jsoup cannot be resolved
     [java]          [ERROR] Line 23: The import org.jsoup cannot be resolved
     [java]          [ERROR] Line 35: Whitelist cannot be resolved to a type
     [java]          [ERROR] Line 40: Whitelist cannot be resolved to a type
     [java]          [ERROR] Line 40: Whitelist cannot be resolved
     [java]          [ERROR] Line 43: Whitelist cannot be resolved to a type
     [java]          [ERROR] Line 43: Whitelist cannot be resolved
     [java]          [ERROR] Line 46: Whitelist cannot be resolved to a type
     [java]          [ERROR] Line 46: Whitelist cannot be resolved
     [java]          [ERROR] Line 49: Whitelist cannot be resolved to a type
     [java]          [ERROR] Line 49: Whitelist cannot be resolved
     [java]          [ERROR] Line 52: Whitelist cannot be resolved to a type
     [java]          [ERROR] Line 52: Whitelist cannot be resolved
     [java]          [ERROR] Line 55: Whitelist cannot be resolved to a type
     [java]          [ERROR] Line 62: Jsoup cannot be resolved
     [java]          [ERROR] Line 62: Whitelist cannot be resolved to a type
     [java]       [ERROR] Errors in 'jar:file:gwt-user.jar!/org/hibernate/validator/super/org/hibernate/validator/engine/PathImpl.java'
     [java]          [ERROR] Line 72: The constructor NodeImpl(String) is undefined
     [java]          [ERROR] Line 84: The constructor NodeImpl(Path.Node) is undefined
     [java]          [ERROR] Line 95: The constructor NodeImpl(Path.Node) is undefined
     [java]          [ERROR] Line 202: The constructor NodeImpl(String) is undefined
     [java]          [ERROR] Line 204: The method setInIterable(boolean) is undefined for the type NodeImpl
     [java]          [ERROR] Line 209: The method setIndex(Integer) is undefined for the type NodeImpl
     [java]          [ERROR] Line 212: The method setKey(String) is undefined for the type NodeImpl
     [java]    [ERROR] Aborting compile due to errors in some input files 
```

显然我缺少一些源 jar。我的类路径中有（除其他外）：

```
hibernate-validator-4.2.0.Final.jar
hibernate-validator-4.2.0.Final-sources.jar 
```

我也尝试添加`joda-time-2.1.jar`,`joda-time-2.1-sources.jar`和.`jsoup-1.6.3.jar``jsoup-1.6.3-sources.jar`

不应该继承 org.hibernate.validator.HibernateValidator 照顾超级来源，所以我不需要提供来源？谁能看到我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T10:59:20.523

GWT 是针对 Hibernate Validator 4.1.0-Final 构建的，并且依赖于它的一些内部结构（`PathImpl`, `NodeImpl`），显然这些在 Hibernate Validator 4.2.0 中已经发生了变化。

使用 4.1.0-Final（或者可能是示例中的 4.0.2.GA）而不是 4.2.0。

* * *

可以在[GWT Tracker](http://code.google.com/p/google-web-toolkit/issues/detail?id=7661)中跟踪问题，我们可能至少应该明确记录不兼容性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:32:19.277

我不知道 Hibernate 验证的 GWT 实现。但是为什么 GWT 试图从您的 Hibernate 源 jar 中理解代码？如果它是 GWT 自己的代码，它应该来自它的 gwt-user.jar 或类似的东西。

如果你同意我的观点，那么不要在 GWT 编译类路径中包含任何真正的 Hibernate jar。无论如何，它不需要它/知道它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T13:50:42.453

4.1.0 也对我有用，一段时间后我发现更高版本存在一些问题。因此，使用与 gwt 教程中推荐的相同版本（[http://www.gwtproject.org/doc/latest/DevGuideValidation.html](http://www.gwtproject.org/doc/latest/DevGuideValidation.html)）我也有一个编译警告：

```
detected warnings related to 'javax.validation.constraint'. is validation- version .jar on the classpath 
```

我修复了：

```
<dependency>
    <groupId>javax.validation</groupId>
    <artifactId>validation-api</artifactId>
    <scope>compile</scope>
</dependency> 
```

# android - Listview 的自定义适配器给出错误

> ID：12385789
> 
> 赞同：0
> 
> 时间：2012-09-12T10:07:44.820
> 
> 标签：android, image, listview, textview

我想开发一个活动，以列表视图格式显示带有名称的图像列表。我有使用 BaseAdapter 的代码自定义适配器。在模拟器中运行时总是向我显示一个调试器窗口，并且模拟器上没有任何内容。

指定文件夹下有图像 (11) 图像，并授予用户权限 WRITE_EXTERNAL_STORAGE。

下面是代码。(ImageViewer.java)

```
package com.example.imageviewer;

import java.io.File;
import java.io.FileFilter;
import java.sql.Array;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.zip.Inflater;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.media.audiofx.EnvironmentalReverb;
import android.os.Bundle;
import android.os.Environment;
import android.app.Activity;
import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Adapter;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;

public class ImageViewer extends Activity {

    File oDirectory;
    ListView oLVImages ;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_image_viewer);

        try
        {
            oLVImages = (ListView) findViewById(R.id.lvImages);

            String strPath = Environment.getExternalStorageDirectory().getPath() + File.separator + Environment.DIRECTORY_PICTURES;

            oDirectory = new File(strPath);
            Log.d("ImageViewer", strPath);

            populateImages (oDirectory);
        }
        catch(Exception e){
            Log.d("ImageViewer", "1 " + e.getMessage());
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_image_viewer, menu);
        return true;
    }

    public void populateImages (File oDirectory){
        try{
            File[] oFiles = oDirectory.listFiles();

            ArrayList<Image> oImages = new ArrayList<ImageViewer.Image>();

            for (int i = 0 ; i < oFiles.length;i++){
                if (oFiles[i].isFile())
                {
                    Image x = new Image();
                    x.imgPath = oFiles[i].getPath().toString();
                    x.imgName = oFiles[i].getName().toString();
                    oImages.add(x);
                }
            }

            ImageListAdapter oImageListAdapter = new ImageListAdapter(getApplicationContext(), oImages);

            oLVImages.setAdapter(oImageListAdapter);

        }
        catch (Exception e){
            Log.d("ImageViewer", e.getMessage());
        }
    }

    class Image{
        private String imgName ;
        private String imgPath;

        public Image(){
            super();
            imgName = "";
            imgPath = "";
        }

        public Image (String imgName, String imgPath){
            super();
            this.imgName = imgName;
            this.imgPath = imgPath;
        }

    }

    public class ImageListAdapter extends BaseAdapter{

        ArrayList<Image> imgImageList;
        Context oContext;

        public ImageListAdapter(Context oContext, ArrayList<Image> oImage){
            this.imgImageList = oImage;
            this.oContext = oContext;
        }
        public int getCount() {
            // TODO Auto-generated method stub
            return imgImageList.size();
        }

        public Object getItem(int arg0) {
            // TODO Auto-generated method stub
            return this.imgImageList.get(arg0);
        }

        public long getItemId(int arg0) {
            // TODO Auto-generated method stub
            return 0;
        }

        public View getView(int arg0, View arg1, ViewGroup arg2) {
            // TODO Auto-generated method stub
            //super.getView(arg0, arg1, arg2);
            View oView = arg1;
            LayoutInflater inflater =  getLayoutInflater();
            oView = inflater.inflate(R.layout.imagedetail, null);
            ImageView iv = (ImageView) findViewById(R.id.ivimage);
            TextView tv = (TextView) findViewById(R.id.tvimage);
            Image oIM = imgImageList.get(arg0);
            Bitmap oBM = BitmapFactory.decodeFile(oIM.imgPath);
            iv.setImageBitmap(oBM);
            tv.setText(oIM.imgName.toString());

            return oView;
        }

    }

} 
```

字符串.xml 文件：

```
<resources>

    <string name="app_name">ImageViewer</string>
    <string name="hello_world">Hello world!</string>
    <string name="menu_settings">Settings</string>
    <string name="title_activity_image_viewer">Image Viewer</string>

    <string name="ivimage"></string>
    <string name="tvheader">Photos</string>

</resources> 
```

activity_image_viewer.xml 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView 
        android:id="@+id/tvheader"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textColor="#FFFFFFFF"
        android:padding="10dp"
        android:text="@string/tvheader"
        android:textSize="22dp"
        android:background="#FF336699"
        />
    <ListView 
        android:id="@+id/lvImages"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
    </ListView>

</LinearLayout> 
```

imagedetail.xml（ListView每一项的布局文件）

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:stretchColumns="1"
      android:padding="10dp"
      android:id="@+id/tbllayout" >
      <TableRow
          android:id="@+id/tblrow"
          android:layout_width="match_parent"
          android:layout_height="wrap_content">
        <ImageView 
            android:id="@+id/ivimage"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:padding="10dp"
            android:contentDescription="@string/ivimage"
            />

        <TextView 
            android:id="@+id/tvimage"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:padding="10dp"
            />
    </TableRow>
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:13:29.330

在自定义适配器中使用此代码

获取视图方法

```
 public View getView(int arg0, View arg1, ViewGroup arg2) {
            // TODO Auto-generated method stub
            //super.getView(arg0, arg1, arg2);
            View oView = arg1;
            LayoutInflater inflater =  getLayoutInflater();
            oView = inflater.inflate(R.layout.imagedetail, null);
            ImageView iv = (ImageView)oView.findViewById(R.id.ivimage);
            TextView tv = (TextView)oView.findViewById(R.id.tvimage);
            Image oIM = imgImageList.get(arg0);
            Bitmap oBM = BitmapFactory.decodeFile(oIM.imgPath);
            iv.setImageBitmap(oBM);
            tv.setText(oIM.imgName.toString());

            return oView;
        } 
```

布局膨胀使用小部件，

> ImageView iv = (ImageView)oView.findViewById(R.id.ivimage);
> 
> TextView tv = (TextView)oView.findViewById(R.id.tvimage);

# jquery - 如何让jquery没有冲突？

> ID：12385792
> 
> 赞同：1
> 
> 时间：2012-09-12T10:07:58.177
> 
> 标签：jquery

我是 jquery 的新手，我遇到了将 $jq 添加到脚本中的问题，

```
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
var $jq = $.noConflict(true);
</script>

<script type="text/javascript" src="js/jquery-1.4.2.js"></script>

<script type="text/javascript">

    $(window).load(function(){
        $('#slider').slideshow();
    });

    </script> 
```

如何在脚本中添加 $jq？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:12:43.280

试试这个，并在页面中只包含一个 jquery。您的脚本正在使用两个 jquery 脚本文件，`js/jquery-1.7.2.min.js`并且`js/jquery-1.4.2.js`. 删除`js/jquery-1.4.2.js`脚本标签。

```
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    var $jq = jQuery.noConflict();

    $jq(window).load(function(){
        $jq ('#slider').slideshow();
    });

</script 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:13:18.067

```
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/jquery-1.4.2.js"></script>

<script type="text/javascript">
   var $jq = $.noConflict();
    $jq(window).load(function(){
        $jq('#slider').slideshow();
    });

    </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T10:10:43.530

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  jQuery(document).ready(function($) {
      $('#slider').slideshow();
  });
  // Code that uses other library's $ can follow here.
 </script> 
```

# bash - Shell：连接到网站并访问字段

> ID：12385795
> 
> 赞同：5
> 
> 时间：2012-09-12T10:08:09.943
> 
> 标签：bash, shell, scripting

我想编写一个脚本，它接受一个文本参数，打开与特定网站的连接，并使用字段的 ID 将 arg 输入到文本字段中。这可能吗？我该怎么做？我是个彻头彻尾的菜鸟

编辑：

确切的流程：

```
- start script with string
- input string into text field on web page
- click form button
- wait for processing
- click hyperlink 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T11:30:56.643

如果您确切知道需要填写哪个字段，则可以使用`lynx`. `S`假设您使用脚本作为输入参数获取字符串。然后您创建一个命令脚本，它将指导`lynx`其行为。

例如，假设`S=foo`，并且您的字段是网页中的第二个字段。之后，还有两个字段，然后是提交按钮。之后，您等待页面加载并单击超链接（然后退出）。网页是 www.something.com。

命令脚本将在文件 bar.txt 中：

```
key <tab> //get to first field
key <tab> //get to second field
key f     //input f
key o     //input o
key o     //input o
key <tab> //get to third field
key <tab> //get to fourth field
key <tab> //get to sumbit button
key ^J    //click submit and wait for load
key <tab> //get to hyperlink
key ^J    //click hyperlink and wait for load
key Q     //exit
key y     //confirm exit 
```

主要命令将是`lynx www.something.com -accept_all_cookies -cmd_script=bar.txt`

现在您需要做的就是动态创建输入字符串。

```
#!/bin/bash
script=bar.txt
input=$1
webpage=www.something.com
len=${#input}
echo 'key <tab>' > $script
echo 'key <tab>' >> $script
for i in `echo $input|fold -w1` 
do
    echo 'key '$i >> $script
done
echo 'key <tab>' >> $script
echo 'key <tab>' >> $script
echo 'key <tab>' >> $script
echo 'key ^J' >> $script
echo 'key <tab>' >> $script
echo 'key ^J' >> $script
echo 'key Q' >> $script
echo 'key y' >> $script

lnyx $webpage -accept_all_cookies -cmd_script=bar.txt 
```

现在您需要做的就是保存脚本，将其修改为可执行并调用它`./script your_string`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T11:31:36.300

为了让您开始，这是我从当地食堂订购今天午餐的脚本：

```
URL="https://lunch.com/lunch/cgi-bin/order.cgi"

O="order=Order"
A="amount_%d=%%d&amount_foil_container_%d=%%d"

function order_lunch() {
  if [[ -n "$@" ]]; then
    curl -u "$USER":"$PASSWORD" \
         -d $(printf $(printf "$O&$A&$A&$A&$A" 0 0 1 1 2 2 3 3) \
                     "${@:2:8}") \
         "$URL";
  else
    echo "Nothing to order.";
  fi;
} 
```

其中输入是以下格式的字符串

```
2012-08-23 1 0 0 0 0 0 0 0 
```

其中每个字段表示不同的菜，即日期后第一个位置的 1 是“1 Pasta”

祝你好运。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T12:43:21.663

> ...“打开到特定网站的连接并使用字段的 ID 将 arg 输入到文本字段中”...

你的意思是你想填写并发送一个 HTML `<form> ... </form>`，对吧？

我会使用 curl (http://curl.haxx.se/)。使用 curl 您可以非常轻松地自动执行 HTTP POST 请求，假设您的网站具有以下形式（摘自：[http](http://curl.haxx.se/docs/httpscripting.html) ://curl.haxx.se/docs/httpscripting.html ）：

```
<form method="POST" action="junk.cgi">
      <input type=text name="birthyear">
      <input type=submit name=press value=" OK ">
</form> 
```

此命令将填写并发送表单（假设该表单在[http://www.example.com/when.cgi](http://www.example.com/when.cgi)上可用）：

```
curl --data "birthyear=1905&press=%20OK%20" http://www.example.com/when.cgi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T11:21:27.367

认为您需要先掌握表格，然后再尝试此操作。

这意味着您可以在本地复制包含表单的所有值的 thml 文件，表单操作可能是结束 url 步骤 3 和 4，还可以查看自动提交 java 脚本

提交表单后的最终超链接 - 如果最后一步是通过解析帖子的结果然后使用 curl 或 wget 或其他可以充当点击的东西

E2A bash 脚本的问题是我上面创建表单的概念是废话，因为然后执行 java 脚本命令行浏览器或链接/lynx/wget/curl 等将是一个挑战。

第一个问题是表单是否支持获取和发布 - 如果表单操作只能发布，那么您将无法将表单字段作为变量发送，即

[http://destinatio-form-url.com/acceptform.cgi?user=something&address=something_else](http://destinatio-form-url.com/acceptform.cgi?user=something&address=something_else)

上面的示例是如果支持 get 时如何生成表单值，但是如果您需要发布，则需要生成表单，并将表单操作设置为发布以获取该 url，就像我说的那样，您需要创建形式。

如果假设您可以通过上述格式发送它，那么要注意的是可点击链接中的响应是否在另一个点击之外 - 如果它在提交给的同一页面上返回，您可以看到问题 - 它是通过 grepping 查找特定的东西并 grepping/awking 来解析 html 非常容易，直到你得到你触发的确切 url，

看看我的回答here

[用于登录网页的 bash 脚本](https://stackoverflow.com/questions/12255124/bash-script-to-login-to-webpage/)

这就是你在java中进行身份验证获取cookie然后作为登录用户进行的方式，这就是你发布表单所需要的一切

我要说的是在 bash 中是可能的，但是对于 url 处理可能会用一种更好的语言来完成，它为您提供所有库来执行此操作并使其优雅而不是调用各种系统命令

给出的示例是用 Java 编写的，但可以是任何语言，perl、php、python 等，它们都应该有用于此任务的库，因为 Perl 在 google 中查找 LWP html 以及许多特定的库，如 LWP HTML Parser 等你可以使用

总之一切顺利

如果有帮助，我认为链接支持 java 脚本。

它就像 lynx，但有更多的插件

```
 apt-cache search links|grep browser
amule-gnome-support - ed2k links handling support for GNOME web browsers
elinks - advanced text-mode WWW browser
elinks-data - advanced text-mode WWW browser - data files
elinks-doc - advanced text-mode WWW browser - documentation
elinks-lite - advanced text-mode WWW browser - lightweight version
libhtmlunit-core-js-java - GUI-Less browser for Java programs - JavaScript engine
libhtmlunit-java - GUI-Less browser for Java programs
libjenkins-htmlunit-java - Jenkins branch of HtmlUnit browser testing for web apps
libphp-snoopy - Snoopy is a PHP class that simulates a web browser
links - Web browser running in text mode
links2 - Web browser running in both graphics and text mode
man2html - browse man pages in your web browser
surf - simple web browser 
```

# ios - 分配分配的对象以保留属性的最佳实践是什么？

> ID：12385800
> 
> 赞同：0
> 
> 时间：2012-09-12T10:08:20.517
> 
> 标签：ios, memory-management, properties, coding-style

亲爱的 iOS 开发者，

我仍然在没有 ARC 的情况下进行开发（即将切换），在与 iOS 初学者进行有趣的讨论后，我提出了初始化保留属性（我们称之为`property`）的方法，我从 Apple 文档在他们的 pre-ARC 继承时代：

```
NSObject *tmpProperty = [[NSObject alloc] init];
self.property = tmpProperty;
[tmpProperty release]; 
```

我看到了一个很大的好处：它使内存管理变得清晰。

还有一个很大的缺点：它需要 3 行，对于一些非常基本的东西。所以我们假设：为什么不采用以下解决方案？

```
self.property = [[[NSObject alloc] init] autorelease]; 
```

它对内存管理不太清楚，但更紧凑（并且它可能使 ARC 迁移更容易实现）。

什么是（是？）你使用自己？您认为其中一个明显比另一个更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:16:12.263

我尽可能使用第一个，因为它使用的内存更少。在第二种情况下，您分配的对象在运行循环完成时被释放。当您在 for 循环或表格视图单元格中有此代码时，这可能很重要。在某些情况下，这可以区分“内存警告”和“一切正常”。

顺便说一句：切换到 ARC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:16:38.457

*两者都有*一点。我不认为公约应该说“一个或另一个”。

当您只需要一条线时，单线就可以很好地工作。所有权不需要额外阅读。

当您需要进一步初始化（例如，在您设置之前`self.property`）或在某些情况下希望最大限度地减少将对象添加到自动释放池或其破坏更可预测的可能性时，您可能会倾向于第二种。

但是，如果您要迁移到 ARC，我不会为此担心太多 - 届时会有很多变化，迁移后您可能会在无收益的情况下完成额外的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T10:18:32.170

使用 autorelease 从来都不是一个好的选择，因为您无法控制正在初始化的对象的生命周期，因此可能是这样的情况

在 ViewController 中，您已经初始化了一些对象，例如属性，并且您正在切换到其他一些视图，如果您想回到旧的 ViewController 并访问该对象，它可能会被 iOS 释放，并且您的应用程序可能会崩溃。

我认为**尽早切换到 ARC**将是您的最佳选择。我认为 ARC 应该被每个开发者使用，几乎所有的设备都是由 iOS5 更新提供的，所以支持旧设备的可能性最小。

希望这能解决你的疑问

# android - 在选项卡式活动中专门设置 onOptionsItemSelected

> ID：12385801
> 
> 赞同：0
> 
> 时间：2012-09-12T10:08:22.143
> 
> 标签：android, android-tabhost

我做了一个选项卡活动，菜单逻辑在主活动中处理，因为操作是相同的。我需要为特定选项的活动添加一行代码......是否可以在主要活动中指定一般行为，然后，如果需要，更改子活动中的某些内容？

# arrays - Sencha Touch 2\. JsonP 中的数组

> ID：12385805
> 
> 赞同：0
> 
> 时间：2012-09-12T10:08:44.500
> 
> 标签：arrays, jsonp, sencha-touch-2

我收到 Jsonp 如下：

```
Mycallback([['name1', 'id1', 'price1'], ['name2', 'id2', 'price2']] 
```

并想用它来加载商店（通过 Jsonp 请求一切正常，但我需要使用 store.load()）

如何在我的商店中加载数组？

如何访问回调函数中的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:40:09.393

创建一个具有名称、id、价格字段的模型，并将商店的模型属性设置为您定义的模型，然后 sencha 在内部将数据存储为数组

# samsung-smart-tv - 三星智能电视应用程序：设置视频帧位置（本机播放器）

> ID：12385806
> 
> 赞同：2
> 
> 时间：2012-09-12T10:08:59.143
> 
> 标签：samsung-smart-tv

我正在为三星智能电视创建一个应用程序，该应用程序在原生三星播放器中播放音乐剪辑。我想滚动，所以我必须移动视频帧（播放器窗口）。这里有一些问题：

1）滚动期间在屏幕上移动视频不流畅（在滚动事件中，我获取元素的位置，我想要视频帧，并通过函数 SetDisplayArea 设置此位置）。你有任何经验如何处理这个吗？

2）当我将视频帧滑出显示时，视频的顶部/底部无法滑出。是否可以仅显示视频帧的一部分（例如 SetDisplayArea(0, -200, 400, 225)）

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T14:10:13.237

我认为应该可以`SetCropArea()`在屏幕外的情况下使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T08:43:20.917

您使用哪个 API 版本？

对于 API 2.5，改变播放器位置和大小`SetDisplayArea()`是原生播放器的唯一解决方案。

我还没有尝试过，但如果`SetDisplayArea(0, -200, 400, 225)`不走出屏幕，那是不可能的。

您想在视频播放时移动播放器吗？您不能指望 SmartTV 平台上的流畅动画，尤其是当您想要移动巨大（内存昂贵）元素时。

对我来说可能的解决方案是制作视频播放器的图像并在此图像上制作幻灯片动画。之后隐藏图像并显示真实播放器并开始播放视频。

# regex - RegEX - 不匹配以特定字符开头的行

> ID：12385821
> 
> 赞同：0
> 
> 时间：2012-09-12T10:09:56.293
> 
> 标签：regex, vb6, match

我有一个这样的文件：

```
-- START 
.
.
Err_EstensioneDatiClientiFornitori:
    Set ClsExtClifor = Nothing
    Set CallInterface = Nothing
    Call MsgError("EstensioneDatiClientiFornitori")
End Sub

 declare Cg44_clifor  decimal(8,0)
 declare Cg44_clifor  decimal(6,0)
' declare Cg44_clifor  decimal(6,0)
PC_CalcolaSaldoAllaData
PC_CalcolaSaldoMensileParziale
.
.
--END 
```

我必须只匹配包含`decimal(6,0)`但不以字符开头的行`'`。

我试过这个正则表达式：

```
.*?decimal\(6,0\) 
```

我得到了两场比赛。第一：

```
 declare Cg44_clifor  decimal(6,0) 
```

第二个：

```
' declare Cg44_clifor  decimal(6,0) 
```

如何排除第二个？我不想要以 . 开头的行`'`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:11:17.570

很容易试试这个：

```
^[^'].*?decimal\(6,0\) 
```

甚至更好的版本：

```
^(\s*[^']\s*)\w.*?decimal\(6,0\) 
```

在检查单引号之前将跳过任何空格。

编辑：

如果库在多行上匹配，这应该有效：

```
^\s*[^'\n]\s*.*?decimal\(6,0\) 
```

# javascript - html5 视频中的 Youtube 类型注释

> ID：12385822
> 
> 赞同：1
> 
> 时间：2012-09-12T10:09:59.427
> 
> 标签：javascript, jquery, html, video

我有一个关于风格/趋势提示的视频，里面有不同的衣服。我想将该视频中显示的衣服链接到其在线商店的产品页面。[有一个选项 YouTube 可以使用Youtube Annotation](http://www.youtube.com/t/annotations_about)来做这样的事情。但 YouTube 注释不提供指向外部链接的链接。所以我们不能在 youtube 注释中链接到 google.com，我们只能链接到其他 YouTube 视频。

***那么是否可以在 html5 视频中添加 YouTube 类型注释？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:21:23.947

尝试`popcorn.js`

演示链接：[演示链接](http://popcornjs.org/demos)

文档：[文档](http://popcornjs.org/documentation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T15:44:33.577

试试 www.bittubes.com - 我们提供适合商业用途的工具

# django - 根据 url 获取模板名称和在中间件中呈现所需的时间

> ID：12385827
> 
> 赞同：0
> 
> 时间：2012-09-12T10:10:20.593
> 
> 标签：django, django-middleware

我想编写一个中间件，它会告诉我正在呈现的模板的名称以及它所花费的时间，用于该特定视图的数据库查询。Django 调试工具栏也是如此，但由于编写了自定义请求和响应对象，我无法使其正常工作。所以我想编写一个自定义中间件，它可以在附加了一些获取请求变量的 url 上为我做同样的事情。
Say`127.0.0.1/index/polls`给了我所有的民意调查。如果我尝试`127.0.0.1/index/polls/?my_tool`它会调用一个 url，我会得到数据。

关于如何实施它的任何建议？有工作的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:15:33.593

我可以推断你需要一些调试工具来进行开发，在这种情况下我会建议[django-debug-toolbar](https://github.com/django-debug-toolbar/django-debug-toolbar)，否则，如果你真的需要中间件，你总是可以查看[django-debug-toolbar](https://github.com/django-debug-toolbar/django-debug-toolbar)的代码。:)

如果我必须自己编写，我会编写几个继承自[template](https://github.com/django-debug-toolbar/django-debug-toolbar/blob/master/debug_toolbar/panels/template.py)和[timer](https://github.com/django-debug-toolbar/django-debug-toolbar/blob/master/debug_toolbar/panels/timer.py)的类（在调试工具栏中称为面板） ，并覆盖`process_response`日志方法或打印我需要的信息。

甚至您可以查看[调试工具栏的中间件](https://github.com/django-debug-toolbar/django-debug-toolbar/blob/master/debug_toolbar/middleware.py)并了解它的工作原理

# android - 如何在不改变 .wav 质量的情况下将 .wav 文件转换为 bytearray？

> ID：12385828
> 
> 赞同：0
> 
> 时间：2012-09-12T10:10:29.487
> 
> 标签：android, web-services, bytearray, type-conversion, wav

不知何故，我正在从 android 设备创建 .wav 文件并将其存储在我的 SD 卡上。现在我想将该 .wav 文件发送到 Java webservice。我需要在一些 Java 应用程序中对该 .wav 文件进行一些处理。所以我需要做的是通过 web 服务将 wav 文件发送到存储 java 应用程序的服务器。因此，为此我需要知道如何在不改变 wav 文件质量的情况下将波形文件转换为字节数组？

我已经用.net完成了如下......

```
 byte[] byteArrayFile = File.ReadAllBytes("D:/Projects/ConsoleApplication1/ConsoleApplication1/bhavik.wav"); 
```

但我是安卓新手。谁能帮我吗？

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T09:26:09.047

检查这个问题[Convert wav audio format byte array to floating point](https://stackoverflow.com/questions/6235016/convert-wav-audio-format-byte-array-to-floating-point)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:25:19.133

看看这个有用的库

[http://commons.apache.org/io/](http://commons.apache.org/io/)

文件 f = 新文件

字节[] 数据 = org.apache.commons.io.FileUtils.readFileToByteArray(f);

# reporting - 如何将 SQL 报告项目 (rptproj) 升级到 Visual Studio 2012？

> ID：12385830
> 
> 赞同：17
> 
> 时间：2012-09-12T10:10:40.690
> 
> 标签：reporting, visual-studio-2012, bids

如果我在工作，我们目前正在使用 Visual Studio 2008，因为 2010 年不包括投标的东西，我现在被要求测试 2012 年是否更好，所以我们有一个我被允许工作的虚拟机，我们'已经安装了 Visual Studio 2012 和 2012 集成服务。

我试图打开我们的一个解决方案，其中包含各种报告项目。当我这样做时，我得到了我选择的单向升级选项，然后我得到以下内容：

> Projectname.rptproj：未找到该项目类型所基于的应用程序。请尝试此链接以获取更多信息：[link](http://go.microsoft.com/fwlink/?prd=12395&pver=11&sbp=ProjectTypeDeprecated&plcid=0x409&clcid=0x409&ar=MSDN&sar=ProjectCompatibility&o1=F14B399A-7131-4C87-9E4B-1186C45EF12D)

这个链接不能正常工作，我似乎在这个 Visual Studio 2012 上找不到很多东西我在这里遗漏了什么吗？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-14T10:54:05.650

微软最近发布了在 VS2012 中打开和创建 .rptproj 项目所需[的工具：](http://www.microsoft.com/en-us/download/details.aspx?id=36843) [Microsoft SQL Server Data Tools - Business Intelligence for Visual Studio 2012](http://www.microsoft.com/en-us/download/details.aspx?id=36843)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T14:29:55.220

据此[，](http://msdn.microsoft.com/en-us/data/hh322942)您似乎必须安装 VS2012 的客户端工具（来自 SQL2012 安装程序）才能获得 BIDS 位。顺便说一句，安装 VS2012 客户端工具显然会更新 VS2010 和 VS2012。

# python - 从 threading.Thread 子类返回 wx.Panel

> ID：12385833
> 
> 赞同：1
> 
> 时间：2012-09-12T10:10:46.870
> 
> 标签：python, multithreading, wxpython

我有一个 threading.Thread 的子类，我用它来创建 wx.Panels（因为它们中的大多数是 I/O 绑定的）并通过 wx.PostEvent 将它们发送到我的 wx.Frame。

问题是线程结束后，发送的面板被破坏并丢失，留下框架空白。我认为这与线程本身在执行后被销毁有关。将 time.sleep(s) 添加到线程的最后一行允许在 s 秒内看到框架内的面板，而线程被冻结，证明面板实际上是创建的。

以下是您可能感兴趣的框架代码：

```
self.Bind(MyEvents.EVT_CONTROL_NEWPANEL,self.ChangePanel)
def ChangePanel(self,event):
    if self.panel != None:
        self.panel.Hide()
    self.panel = event.panel
    self.panel.Show() 
```

和 threading.thread 子类的一个：

```
class ThreadExecute(threading.Thread):
    def __init__(self,func,args):
        threading.Thread.__init__(self)
        self.func = func
        self.args = args
        self.start()

    def run(self):
        apply(self.func,self.args)

CreateRandomPanel(parent):
    panel = RandomPanel(parent)
    event = MyEvents.Control_NewPanel(panel = panel)
    wx.PostEvent(parent,event) 
```

线程结束后有没有办法让对象保持活动状态？对 Thread 上的对象进行酸洗并在框架上对其进行脱酸是一个不错的选择吗？

**编辑：**

一个小的可运行代码示例：

```
import wx
import threading
from wx.lib.newevent import NewEvent
from time import sleep

NewPanelEvent, EVT_NEWPANEL = NewEvent()
class MyFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self,None,size=wx.Size(350,350))
        self.panel = None        
        self.Bind(EVT_NEWPANEL,self.ChangePanel)
        self.control = MyControl(self)
        self.control.NewPanel()

    def ChangePanel(self,event):

        if self.panel != None:
            self.panel.Hide()

        self.panel = event.panel
        #self.Refresh()

class MyPanel(wx.Panel):
    def __init__(self,parent,size):
        wx.Panel.__init__(self,parent,size=size)
        self.btn = wx.Button(self,label='hit me!',pos=wx.Point(25,25),size=wx.Size(75,25))
        self.SetBackgroundColour(wx.Colour(255,255,0))

class MyControl(object):
    def __init__(self,window):
        self.window = window

    def NewPanel(self):
        MyThread(RandomFunction,(self.window,))

class MyThread(threading.Thread):
    def __init__(self,func,args):
        threading.Thread.__init__(self)
        self.func = func
        self.args = args
        self.start()

    def run(self):
        apply(self.func,self.args)

def RandomFunction(window):
    sleep(3)
#    size = window.GetSizeTuple()
    size = (250,250) 
    panel = MyPanel(window,size=size)
    event = NewPanelEvent(panel = panel)
    wx.PostEvent(window,event)
    # use the sleep to prevent the thread from ending, so you can see the panel
    sleep(5)

class App(wx.App):
    def OnInit(self):
        self.frame = MyFrame()
        self.frame.Show()
        self.SetTopWindow(self.frame)
        return True

def main():
    app = App(False)
    app.MainLoop()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:55:44.493

我看不到您实际上将 RandomPanel 传递到哪里。您创建它，然后当函数结束时，它被销毁。你从来没有真正通过面板，而只是父母。就个人而言，我会使用 wx.CallAfter 将 PubSub 消息发送到您的主应用程序类，并让它在那里创建一个面板，或者只是在 PubSub 消息中传递面板。

这是关于 Pubsub 的教程：

*   [http://www.blog.pythonlibrary.org/2010/06/27/wxpython-and-pubsub-a-simple-tutorial/](http://www.blog.pythonlibrary.org/2010/06/27/wxpython-and-pubsub-a-simple-tutorial/)

这是一个带有 pubsub 和线程的：

*   [http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)

# security - 如何以正确的方式将密码存储在硬盘上？

> ID：12385838
> 
> 赞同：-2
> 
> 时间：2012-09-12T10:10:58.800
> 
> 标签：security, passwords, gmail, password-protection, autoit

脚本用于每天通过用户交互发送电子邮件（仅限 Gmail）。我想将他们的电子邮件以纯文本文件的形式存储在硬盘中。什么是正确的方法？

*   我知道一种方法是要求用户输入密码以保护电子邮件密码，但这种方法毫无意义，因为用户每次发送电子邮件时都应输入新密码，所以我宁愿询问他们的电子邮件密码代替。

*   另一种方法是加密密码并使用与用户特定信息组合的密钥，例如计算机名+用户名+系统+...，并使用相同的密钥来解密加密的密码。问题在于，我使用的是易于反编译的[Autoit](http://www.autoitscript.com/site/)，因此当潜在的攻击者获得加密密码时，他们理论上可以知道加密密钥，所以我使用谁的许多 uniq 信息来加密密码并不重要，他们无论如何都能得到它。

*   另一种方法是将 OAuth 用于 gmail，因此用户根本不需要输入密码，但我不能这样做。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T19:44:34.227

由于您在 Windows 上编程，我建议您查看 Windows API 来为您完成加密工作。你可以相信它们比你自己发明的更好，假设你不愿意做出不同的假设（例如：TPM）。

如果您想针对该操作系统，在 Win8 上现在有一个 PasswordVault 类。在 <=Win7 上，有 DPAPI 和凭据管理器

这些都不是 GMail 特有的……这只是一般的“在 Windows 上安全地存储东西”之类的建议。您应该追求更好的特定于 gmail 的方式（例如：服务特定凭证）。但即使您这样做了，这也是将其存储在客户端操作系统上的更好方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T14:59:28.307

正如 Eric 所提到的，如果您使用的是 Windows，DPAPI 是可行的方法。[http://msdn.microsoft.com/en-us/library/ms995355.aspx](http://msdn.microsoft.com/en-us/library/ms995355.aspx) 函数 CryptProtectData() 使用该特定用户的 Windows 登录信息来加密数据，以便系统上的其他用户无法解密纯文本你存储的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T19:13:04.233

AutoIt 有 _Crypt...() 函数可用于此。您可以散列@computername 或@username，并将散列用作_Crypt_DeriveKey() 函数的密钥，以本地化其密码的使用。然后使用密钥将密码字符串作为数据传递给 _Crypt_EncryptData()。将加密密钥存储在纯文本文件中。

当您调用它时，读取文件，使用_Crypt_DeriveKey() 再次创建密钥，然后使用_Crypt_DecryptData() 对其进行解密。后一个函数的输出应该是您的密码。

Crypt.au3 利用 WinAPI 函数进行加密。

# xml - XPath 是否支持 WHERE 子句？

> ID：12385845
> 
> 赞同：1
> 
> 时间：2012-09-12T10:11:16.230
> 
> 标签：xml, xpath, soapui

如何为 xpath 表达式应用 WHERE 子句？例子：

```
<users>
    <user>
       <name>membersound</name>
       <age>52</age>
    </user>
    <user>...
</users> 
```

我可以检查是否存在，例如：

```
exists(//ns1:users/ns1:user[ns1:name='membersound']) 
```

我该如何执行以下操作？：

```
SELECT age WHERE name='membersound' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:15:33.713

该`WHERE`子句已由您的`[ns1:name='membersound']` [谓词](http://www.w3.org/TR/xpath20/#id-predicates)表示。要获取年龄，只需附加`/ns1:age`到您的 XPath 表达式：

```
//ns1:users/ns1:user[ns1:name='membersound']/ns1:age 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:20:02.867

这样你可以选择它..

```
//users/user[name = 'membersound']/age 
```

# jquery - jquery 创建选中的复选框

> ID：12385846
> 
> 赞同：3
> 
> 时间：2012-09-12T10:11:16.387
> 
> 标签：jquery

**如何使用 jquery 创建选中的复选框元素？**

我试过了。

```
$('<input>', {
    type:"checkbox",
    "checked":"checked"
}); 
```

和

```
var input = $('<input>', {
    type:"checkbox"
});
input.attr('checked',true); 
```

这些都不起作用。附加到元素后，复选框保持未选中状态。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T10:12:31.233

***您必须将它们附加到 Document。***

例如：

```
$('<input>', {
    type:"checkbox",
    "checked":"checked"
}).appendTo('body'); // instead of body you can use any valid selector
                     // to your target element to which you want to
                     // append this checkbox 
```

编码

```
$('<input>', {
    type:"checkbox",
    "checked":"checked"
}); 
```

只需创建一个元素但不将其附加到 DOM。为了将其附加到 DOM，您必须使用***[`append()`](http://api.jquery.com/append)***/ ***[`appendTo()`](http://api.jquery.com/appendTo)***/***[`html()`](http://api.jquery.com/html)***等任何一种方法。

如果是第二个片段：

```
var input = $('<input>', {
    type:"checkbox"
});
input.attr('checked',true);

$('#target_container').append(input);

// Or

input.appendTo('#target_container'); 
```

# c# - 时间格式是 24 小时制吗？

> ID：12385850
> 
> 赞同：1
> 
> 时间：2012-09-12T10:11:22.157
> 
> 标签：c#, datetime, string.format

我得到一个以字符串形式传递给我的时间格式字符串。它可以是像“t”这样的标准字符串，但也可以是自定义字符串（包含“HH”等）。我怎样才能知道，**如果显示它将是 12 小时或 24 小时格式**？（取决于文化和一切......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T11:10:10.950

最简单的方法是尝试一个日期，然后您可以检查字符串中的给定数字，您只希望这样。例如，是否`2000-01-01T19:00:00Z`导致包含 a`7`或 a`9`或两者的字符串。

为了确定即使是奇怪的字符串，例如`"'This valid string will mess you up 79'"`，那么您需要在获得给定文化信息的完整版本后检查该字符串（如果需要）。

`CultureInfo`以下作为or上的扩展方法也是有意义的`DateTimeFormatInfo`。

在实践中，您可以通过将通常仅包含日期信息的标准格式放入`None`立即返回的组中来简化，但我决定在那里捕捉甚至奇怪的东西：

```
[Flags]
public enum HourRepType
{
  None = 0,
  Twelve = 1,
  TwentyFour = 2,
  Both = Twelve | TwentyFour
}
public static HourRepType FormatStringHourType(string format, CultureInfo culture = null)
{
  if(string.IsNullOrEmpty(format))
    format = "G";//null or empty is treated as general, long time.
  if(culture == null)
    culture = CultureInfo.CurrentCulture;//allow null as a shortcut for this
  if(format.Length == 1)
    switch(format)
    {
      case "O": case "o": case "R": case "r": case "s": case "u":
        return HourRepType.TwentyFour;//always the case for these formats.
      case "m": case "M": case "y": case "Y":
        return HourRepType.None;//always the case for these formats.
      case "d":
          return CustomFormatStringHourType(culture.DateTimeFormat.ShortDatePattern);
      case "D":
        return CustomFormatStringHourType(culture.DateTimeFormat.LongDatePattern);
      case "f":
        return CustomFormatStringHourType(culture.DateTimeFormat.LongDatePattern + " " + culture.DateTimeFormat.ShortTimePattern);
      case "F":
        return CustomFormatStringHourType(culture.DateTimeFormat.FullDateTimePattern);
      case "g":
        return CustomFormatStringHourType(culture.DateTimeFormat.ShortDatePattern + " " + culture.DateTimeFormat.ShortTimePattern);
      case "G":
        return CustomFormatStringHourType(culture.DateTimeFormat.ShortDatePattern + " " + culture.DateTimeFormat.LongTimePattern);
      case "t":
        return CustomFormatStringHourType(culture.DateTimeFormat.ShortTimePattern);
      case "T":
        return CustomFormatStringHourType(culture.DateTimeFormat.LongTimePattern);
      default:
        throw new FormatException();
    }
  return CustomFormatStringHourType(format);
}
private static HourRepType CustomFormatStringHourType(string format)
{
  format = new Regex(@"('.*')|("".*"")|(\\.)").Replace(format, "");//remove literals
  if(format.Contains("H"))
    return format.Contains("h") ? HourRepType.Both : HourRepType.TwentyFour;
  return  format.Contains("h") ? HourRepType.Twelve : HourRepType.None;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:27:50.917

第 1 步：如有必要，将标准格式字符串转换为所选区域性的等效自定义格式字符串。这使用反射逻辑来模仿`DateTime.ToString`。

```
if (formatString.Length == 1)
{        
    // Get formatter for the culture of your choice - e.g. the current culture
    DateTimeFormatInfo fi = CultureInfo.CurrentCulture.DateTimeFormat;

    formatString = epf.Invoke(
        null,
        new object[]{
            formatString,
            DateTime.MinValue,
            fi,
            TimeSpan.MinValue});
} 
```

第 2 步：解析字符串以查看它是否包含 12 小时或 24 小时说明符。这是使用反射逻辑尽可能模仿`DateTime.ToString`和自定义逻辑在不可能的情况下的不幸组合，但它似乎工作正常。

```
for (int i = 0; i < formatString.Length; i++)
{
    char current = formatString[i];
    if (current == '"' || current == '\'') // Skip literal quoted sections
    {
        i += (int)pqs.Invoke(
            null,
            new object[] {
                formatString,
                i,
                new StringBuilder()});
    }
    else if (current == '\\') // Skip escaped characters
    {
        i+= 1;
    }
    else if (current == 'h')
    {
        is12Hour = true;
    }
    else if (current == 'H')
    {
        is24Hour = true;
    }
} 
```

这依赖于`MethodInfo`反射获得的以下两个s：

```
var t = Assembly
    .GetAssembly(typeof(System.DateTime))
    .GetType("System.DateTimeFormat");
var epf = t.GetMethod(
    "ExpandPredefinedFormat",
    BindingFlags.Static | BindingFlags.NonPublic);
var pqs = t.GetMethod(
    "ParseQuoteString",
    BindingFlags.Static | BindingFlags.NonPublic); 
```

第一个处理将单字符标准格式说明符转换为给定文化的多字符自定义格式说明符。第二个处理自定义格式说明符内的引用文字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T10:46:07.270

您可以使用字符串格式化已知日期，如果它使用 24 小时时间，您知道该日期将仅包含特定值：

```
if ((new DateTime(1, 1, 1, 23, 1, 1)).ToString(formatString).Contains("23"))
    Console.WriteLine("24");
else
    Console.WriteLine("12"); 
```

# python - 在 python 中以单独的行打印输出

> ID：12385853
> 
> 赞同：0
> 
> 时间：2012-09-12T10:11:34.653
> 
> 标签：python, python-2.7

我正在尝试在单独的行中打印出最大路线的输出。

代码在这里：

```
def triangle(rows):
    PrintingList = list()
    for rownum in range (rows ):     
        PrintingList.append([])
        newValues = map(int, raw_input().strip().split())
        PrintingList[rownum] += newValues
    return PrintingList

def routes(rows,current_row=0,start=0): 
        for i,num in enumerate(rows[current_row]): 
            if abs(i-start) > 1:   
                continue
            if current_row == len(rows) - 1: 
                yield [num]
            else:
                for child in routes(rows,current_row+1,i):
                    yield [num] + child

testcases = int(raw_input())
output = []
for num in range(testcases):
    rows= int(raw_input())
    triangleinput = triangle(rows)
    max_route = max(routes(triangleinput),key=sum)
    output.append(sum(max_route))

print '\n'.join(output) 
```

我试过这个：

```
2
3
1
2 3
4 5 6
3
1
2 3 
4 5 6 
```

当我尝试输出值时，我得到了这个：

```
print '\n'.join(output)
TypeError: sequence item 0: expected string, int found 
```

如何改变这个？需要一些指导...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:12:50.003

试试这个：

```
print '\n'.join(map(str, output)) 
```

Python 只能将字符串连接在一起，因此您应该先将整数转换为字符串。这就是该`map(str, ...)`部分的作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T10:34:03.883

@grc 是正确的，但是您可以简单地执行以下操作，而不是使用换行符创建新字符串：

```
for row in output:
    print row 
```

# forms - JQuery Mobile/Datebox，显示日期格式和提交日期格式的区别

> ID：12385854
> 
> 赞同：4
> 
> 时间：2012-09-12T10:11:42.703
> 
> 标签：forms, date, jquery-mobile, input, datebox

有没有办法在与我要提交的格式不同的输入中显示日期。

例如，我必须以“yyyy-mm-dd”格式提交日期，但我想以另一种格式显示日期：“dd/mm/yyyy”（法语显示）。使用 jQuery Mobile 的 Datebox 是否有一个很好的提示（我没有看到的选项？）

我认为我必须作弊，创建一个以良好的表单格式隐藏的输入和另一个以显示格式（而不是提交）的输入，但也许存在更好的解决方案。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T16:46:23.873

您最好的选择是确实使用 2 个输入 - 但是，这很容易做到，并且在 set 事件上使用回调，您甚至可以让 datebox 为您执行第二种格式。

[http://dev.jtsage.com/jQM-DateBox2/demos/script/split.html](http://dev.jtsage.com/jQM-DateBox2/demos/script/split.html)

（注：我只是添加了演示，所以你没有错过前面）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T11:45:14.773

只是一个小小的补充

它应该是 HTML 内联选项中的 "overrideDateFormat":"%d/%m/%Y"。

在[http://dev.jtsage.com/jQM-DateBox2/demos/script/split.html](http://dev.jtsage.com/jQM-DateBox2/demos/script/split.html)它声明“dateFormatOverride”：“%d/%m/%Y”} 但是这是不正确的并且不起作用。只是提醒其他有此问题的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T00:27:01.463

是的，您需要使用此方法。

```
 <!-- fix american date formatting -->
   <script type="text/javascript">
   jQuery.extend(jQuery.mobile.datebox.prototype.options, {
       'overrideDateFormat': '%d/%m/%Y',
       'overrideHeaderFormat': '%d/%m/%Y'
   });
   </script> 
```

# c# - 分页符不适用于 MS WORD 2003

> ID：12385855
> 
> 赞同：1
> 
> 时间：2012-09-12T10:11:46.510
> 
> 标签：c#, ms-word, office-interop

以下代码适用于 MS WORD 2007(docx)，但不适用于 MS WORD 2003(doc)。帮我。

```
Object nullobj = System.Reflection.Missing.Value;
            Object objBreak = Word.WdBreakType.wdPageBreak;
            Object objUnit = Word.WdUnits.wdStory;
            oWord.Selection.EndKey(ref objUnit, ref nullobj);
            oWord.Selection.InsertBreak(ref objBreak); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:43:38.313

尝试使用 Word.WdBreakType.wdSectionBreakNextPage，而不是 Word.WdBreakType.wdPageBreak。

# sqlite - 在sqlite中使用group by时选择某行的rowid

> ID：12385860
> 
> 赞同：4
> 
> 时间：2012-09-12T10:11:55.557
> 
> 标签：sqlite, group-by

我在 SQLite 中有一个查询，我按某个列分组，并在 select 语句的另一列上使用聚合函数 MAX。现在我还想要保存由 MAX 聚合显示的值的行的 rowid。我知道由于主键约束，这必须是唯一的行。我不知道如何编写查询。请参见以下示例：

```
create table t1 (c1, c2, constraint t1_pk primary key (c1, c2));

insert into t1 values ('boys', 1);
insert into t1 values ('boys', 2);
insert into t1 values ('girls', 1);
insert into t1 values ('girls', 2); 
```

现在我的表在两列上都有主要约束。表的 SELECT 查询提供以下输出：

```
sqlite> select rowid, * from t1;

rowid|c1|c2
1|boys|1
2|boys|2
3|girls|1
4|girls|2 
```

现在我想按 c1 分组并选择 c2 的 MAX。然后我想要保存现在显示的值的行的rowid。请参阅以下查询：

```
sqlite> select rowid, c1, max(c2) from t1 group by c1;

rowid|c1|max(c2)
2|boys|2
4|girls|2

sqlite> select rowid, c1, min(c2) from t1 group by c1;

rowid|c1|min(c2)
2|boys|1
4|girls|1 
```

使用 MIN 聚合的第二个查询应该返回包含 MIN 值的行的 rowid，这就是我想要实现的：

```
rowid|c1|min(c2)
1|boys|1
3|girls|1 
```

现在我尝试了以下子选择，它也不起作用，因为它给出了一个错误：

```
sqlite> select (select rowid from t1 b where b.c1 = a.c1 and b.c2 = max(a.c2)), a.c1, max(a.c2) from t1 a group by a.c1;

Error: misuse of aggregate function max()

sqlite> select (select rowid from t1 b where b.c1 = a.c1 and b.c2 = min(a.c2)), a.c1, min(a.c2) from t1 a group by a.c1;

Error: misuse of aggregate function min() 
```

我尝试的最后一件事是 FROM 子句中的子查询，它也不起作用：

```
sqlite> select
   ...>         (select rowid from t1 b where b.c1 = c.c1 and b.c2 = c.c2),
   ...>         c1,
   ...>         c2
   ...> from
   ...>         (select a.c1, max(a.c2) as c2 from t1 a group by a.c1) c;

Error: misuse of aggregate: max()

sqlite> select
   ...>         (select rowid from t1 b where b.c1 = c.c1 and b.c2 = max(c.c2)),
   ...>         c.c1,
   ...>         max(c.c2)
   ...> from
   ...>         (select a.c1, a.c2 from t1 a group by a.c1) c;

Error: misuse of aggregate function max() 
```

我的问题有什么解决办法吗？我真的不知道我还能尝试什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:36:35.777

如果我正确理解了您的问题，请尝试这样：

```
select rowid, c1, min(c2) from t1 a
where c2=(select min(c2) from t1 b where b.c1=a.c1) 
group by rowid,c1; 
```

检查[小提琴](http://sqlfiddle.com/#!5/77b75/5)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-11-10T13:12:53.670

事实上，在@Pradeeshnarayan 的回答之后，我不得不对其进行改进以使其在 Oracle 中工作。“分组依据”子句没用

```
select rowid, c1, c2 from t1 a
where c2=(select min(c2) from t1 b where b.c1=a.c1); 
```

# android - 当屏幕在android中关闭时音频流停止

> ID：12385863
> 
> 赞同：3
> 
> 时间：2012-09-12T10:12:03.140
> 
> 标签：android, android-layout, android-intent

我在媒体播放器上流式传输 mp3，当您的屏幕打开或您正在执行多任务处理时它会连续播放，但是当您关闭屏幕时它不会连续播放音频，它会卡住很多次。我得到了这个“信息/警告（ 702,0）“在日志猫

我试过 mp.setWakeMode(getBaseContext(),PowerManager.FULL_WAKE_LOCK);

我正在使用服务来播放音频流，但它仍然卡住了。

```
public class myPlayService extends Service{

MediaPlayer mp;
String link ="http://85.23.194.72:70/mp3/str";

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}
@Override
public void onCreate() {

 mp = new MediaPlayer();
    try {
        mp.setDataSource(link);
        mp.setWakeMode(getBaseContext(),PowerManager.FULL_WAKE_LOCK);
        mp.prepareAsync();
        mp.setOnPreparedListener(new OnPreparedListener() {

            @Override
            public void onPrepared(MediaPlayer mp) {
                // TODO Auto-generated method stub
                mp.start();
            }
        });

    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}@Override public void onDestroy() { mp.stop();mp.release();}} 
```

# jpa-2.0 - 表未使用 JPA 2.0 创建

> ID：12385866
> 
> 赞同：1
> 
> 时间：2012-09-12T10:12:09.957
> 
> 标签：jpa-2.0, ejb-3.0

我在 Netbeans 中使用 JPA 2.0。我正在使用实体。如果我的数据库没有表，那么它应该从实体创建表。这是我的代码

```
public class BankServlet extends HttpServlet {

     @EJB
     private BankServiceBeanRemote bankServiceBean;

     protected void processRequest(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {

        int custId = Integer.parseInt(request.getParameter("id"));

        bankServiceBean.createCustomers();
        Customer cust = bankServiceBean.findCustomer(custId);

        response.setContentType("text/html;charset=UTF-8");
        ....

    } //end of processRequest

} //end of class BankServlet 
```

这是我的豆子

```
@Stateless
public class BankServiceBean implements BankServiceBeanRemote {

    @PersistenceContext(unitName = "Bank_JPA-ejbPU")
    private EntityManager em;

    @Override
    public void createCustomers() {

        Referee r1 = new Referee();
        r1.setId(1);
        r1.setName("SIR JOHN DEED");
        r1.setComments("JUDGE");     
        em.persist(r1);

        Customer c1 = new Customer();
        c1.setId(1);
        c1.setFirstName("SIMON");
        c1.setLastName("KING");
        c1.setReferee(r1);

        ......
    }

} //end of class BankServiceBean 
```

这是我的裁判实体

```
@Entity
public class Referee implements Serializable {

    private static final long serialVersionUID = 1L;

    private int id;
    private String name;
    private String comments;

    public Referee() {

    }

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    // other getter setters

} //end of class Referee 
```

当我运行代码时，我得到以下异常

```
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.0.1.v20100213-r6600):     org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table     'dbbank.referee' doesn't exist
Error Code: 1146
Call: INSERT INTO REFEREE (ID, NAME, COMMENTS) VALUES (?, ?, ?)
    bind => [3, MICHAEL ELLIS, MAJOR SHAREHOLDER OF THIS BANK]
Query: InsertObjectQuery(pk.mazars.basitMahmood.entity.Referee[id=3])
    at     org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:324) 
```

如果表不存在，那么它应该自动创建表。难道我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:45:01.183

你的假设是错误的。如果表不存在，则不会神奇地创建表。大多数应用程序使用现有的数据库。

EclipseLink*可以*为您创建模式，但它不是默认的。阅读[此页面](http://wiki.eclipse.org/EclipseLink/Examples/JPA/DDL)以了解如何启用此功能：

> EclipseLink 可用于为持久性单元自动生成表和数据库模式。这是通过“eclipselink.ddl-generation”持久性单元属性完成的，设置为“create-tables”或“drop-and-create-tables”。将为该持久性单元中定义的所有类生成表和约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:08:13.617

您应该更改persistence.xml 中的表生成策略。

只需将这些行添加到 persistence.xml 文件中：

```
<properties>
  <property name="eclipselink.ddl-generation" value="create-tables"/>
</properties> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-05T19:21:20.673

这是一个添加到您的 persistence.xml 的片段，以使**openjpa**为您创建表。这在使用 openejb 和 HyperSQL 等内存数据库进行容器单元测试时会派上用场。

```
 <properties>
         <property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema(ForeignKeys=true)"/>
    </properties> 
```

# java - 使用 Hbase MapReduce 将文件中的数据加载到表中

> ID：12385868
> 
> 赞同：1
> 
> 时间：2012-09-12T10:12:17.647
> 
> 标签：java, mapreduce, hbase

我需要从位于 HDFS 中的文件加载数据并使用 Hbase Map Reduce 将其加载到 Hbase 表中。我有一个 csv 文件，它仅包含列限定符的值，如下所示：

现在在我的 Hbase 表中，我如何从 mapReduce 程序加载这些值。以及如何自动生成 RowId。

```
 Class:

    public class SampleExample {

          private static final String NAME = "SampleExample "; //class Name

          static class Uploader extends Mapper<LongWritable, Text, ImmutableBytesWritable, Put> 
          {
            private long statuspoint = 100;
            private long count = 0;
            @Override
            public void map(LongWritable key, Text line, Context context)
            throws IOException {
              String [] values = line.toString().split(",");
                      /* How to read values into columnQualifier and how to generate row id */
         // put function-------------------
                               try {
                context.write(new ImmutableBytesWritable(row), put);
              } catch (InterruptedException e) {
                e.printStackTrace();
              }
              if(++count % statuspoint == 0) {
                context.setStatus("Emitting Put " + count);
              }
            }
          }
      public static Job configureJob(Configuration conf, String [] args)
          throws IOException {

                                   }
        } 
```

错误：

```
12/09/17 05:23:30 INFO mapred.JobClient: Task Id : attempt_201209041554_0071_m_000000_0, Status : FAILED
java.io.IOException: Type mismatch in value from map: expected org.apache.hadoop.io.Writable, recieved org.apache.hadoop.hbase.client.Put
        at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.collect(MapTask.java:1019)
        at org.apache.hadoop.mapred.MapTask$NewOutputCollector.write(MapTask.java:691)
        at org.apache.hadoop.mapreduce.TaskInputOutputContext.write(TaskInputOutputContext.java:80)
        at com.hbase.Administration$Uploader.map(HealthAdministration.java:51)
        at com.hbase.Administration$Uploader.map(HealthAdministration.java:1)
        at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
        at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
        at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:415)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
        at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

谁能帮助我，我无法弄清楚我们如何将值读入限定符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:22:22.717

```
String stringLine = line.toString();
StringTokenizer stringTokenizer = new StringTokenizer(line, "\t");`

Put put = new Put(key.get());
put.add(family, column1,stringTokenizer.nextToken().getBytes());
put.add(family, column2,stringTokenizer.nextToken().getBytes());
put.add(family, column3,stringTokenizer.nextToken().getBytes());
put.add(family, column4,stringTokenizer.nextToken().getBytes());

try {
    context.write(new ImmutableBytesWritable(row), put);
} catch (InterruptedException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T05:13:31.603

请更改您的地图并减少如下。在 Map 中仅处理行 ID，并将这个工作的行 ID 和行（原样）传递给减速器

```
map{
  byte[] row=Bytes.toBytes(key.get());
  try {
            context.write(new ImmutableBytesWritable(row),line);
          } catch (InterruptedException e) {
            e.printStackTrace();
          }
    } 
```

减少更改

```
@Override     
reduce (ImmutableBytesWritable row , Text line ){
String stringLine=line.toString();
StringTokenizer stringTokenizer=new StringTokenizer(line, "\t");

Put put = new Put(key.getBytes());
put.add(family, column1,stringTokenizer.nextToken().getBytes());
put.add(family, column2,stringTokenizer.nextToken().getBytes());
put.add(family, column3,stringTokenizer.nextToken().getBytes());
put.add(family, column4,stringTokenizer.nextToken().getBytes());
try {
    context.write(new ImmutableBytesWritable(row), put);
  } catch (InterruptedException e) {
    e.printStackTrace();
  } 
```

请根据上面的代码对你的代码进行适当的修改。例外是 coz ，当我们有一个 +ve 数量的 reducer 时，map 函数无法写入表（或使用 put 对象），因此 context.write(writable,put) 被转移到具有表的 reduce -name ，需要写入最终输出的位置。希望这应该解决。否则我将编写相同输入文件的工作代码并将其粘贴到此处

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T05:21:15.030

嗨，只需在 put 命令中删除 +1，如下所示 Put put = new Putkey.get()); 并删除 job.setNumReduceTasks(0) 的注释；那么它肯定有效

# java - 如何在 Web 应用程序中使用来自 weblogic 领域密钥库的证书？

> ID：12385871
> 
> 赞同：0
> 
> 时间：2012-09-12T10:12:25.103
> 
> 标签：java, cryptography, weblogic

我正在我的 Web 应用程序中执行一些涉及证书的安全操作，我希望管理员通过标准 weblogic 控制台管理这些证书（包括密码等）。但是我不知道如何在该 weblogic 中运行的 web 应用程序中获取 weblogic 中设置的证书。它甚至支持的功能吗？是否可以将其与标准 java 加密 api 连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-10T07:27:25.647

在 Weblogic 中，有一个`Mbean`名称为`com.oracle.jps:type=JpsKeyStore`。您可以检查操作以找到满足您要求的操作。我认为在大多数情况下，您可以找到一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T03:08:01.133

在 weblogic 中更新 KeyStore 有 3 种方法（管理控制台、WLST 在线、WLST 离线）。

**管理控制台**

> Environment--> servers--> 'your server' --> KeyStores ，然后更新相关参数

**WLST 离线（脚本模式）**

```
readDomain(domainDir)
cd("/Servers/" + msName)
set("KeyStores", "CustomIdentityAndCustomTrust")
set("CustomIdentityKeyStoreFileName", identKeystoreFile)
set("CustomIdentityKeyStorePassPhraseEncrypted", identKeystoreKSPass)
set("CustomTrustKeyStoreFileName", trustKeystoreFile)
set("CustomTrustKeyStorePassPhraseEncrypted", trustKeystoreKSPass)
updateDomain()
exit() 
```

**WLST 在线（脚本模式）**

```
connect(username,password,"t3://localhost:7001")
cd("/Servers/" + msName)
set("KeyStores", "CustomIdentityAndCustomTrust")
set("CustomIdentityKeyStoreFileName", identKeystoreFile)
set("CustomIdentityKeyStorePassPhraseEncrypted", encrypt(inp_identKeystoreKSPass))
set("CustomTrustKeyStoreFileName", inp_trustKeystoreFile)
set("CustomTrustKeyStorePassPhraseEncrypted", encrypt(inp_trustKeystoreKSPass))
save()
activate() 
```

**WLST 在线（嵌入式模式）**

```
InteractiveInterpreter interpreter = new WLSTInterpreter();
StringBuffer buffer = new StringBuffer();
buffer.append("connect('weblogic','weblogic','t3://localhost:7001')\n"); 
buffer.append("cd('/Servers/' + msName)\n");
buffer.append("set('KeyStores', 'CustomIdentityAndCustomTrust')\n");
buffer.append("set('CustomIdentityKeyStoreFileName', identKeystoreFile)\n");
buffer.append("set('CustomIdentityKeyStorePassPhraseEncrypted', encrypt(inp_identKeystoreKSPass))\n");
buffer.append("set('CustomTrustKeyStoreFileName', inp_trustKeystoreFile)\n");
buffer.append("set('CustomTrustKeyStorePassPhraseEncrypted', encrypt(inp_trustKeystoreKSPass))\n");
buffer.append("save()\n");
buffer.append("activate()");
interpreter.exec(buffer.toString()); 
```

# android - 如何将数据（少量字符串）从 Activity 传递到 Fragment

> ID：12385887
> 
> 赞同：1
> 
> 时间：2012-09-12T10:13:16.883
> 
> 标签：android, android-fragments, android-activity

在 Android 中从 Activity 到 Fragment 获取一些数据的最佳方式（最简单）是什么？

我有一个或多个字符串，我需要在 Fragment 中使用（或显示）它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:16:01.633

第 1 步：使用`findFragmentById()`或`findFragmentByTag()`查找片段。

步骤#2：在片段上调用方法。

# php - 如何在其他服务中呈现没有类的表单？

> ID：12385888
> 
> 赞同：0
> 
> 时间：2012-09-12T10:13:18.023
> 
> 标签：php, forms, symfony

我想在我的服务中生成一个无类表单。

我这样做的方式是：

```
class StepSummary implements StepInterface 
{
    public function __construct($container)
    {
        $this->container = $container;
    }

    public function getVariables()
    {
        $form = $this->container->get('form.factory')->createBuilder('text')
            ->add('accept')
            ->getForm();

        return array('form' => $form->createView());
    }
} 
```

在[API](http://api.symfony.com/2.0/Symfony/Component/Form/FormFactory.html#method_createBuilder)中，我发现我需要将表单类型传递给`FormBuilder`- 我没有找到对它的任何引用，所以我放了假想的`text`字符串。现在它以这种方式呈现表单：

```
<input type="text" id="text" name="text" required="required" /> 
```

显然没有提到该`accept`领域。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T10:34:53.987

控制器的`createForm()`方法在这里很有帮助：

```
 public function createFormBuilder($data = null, array $options = array())
    {
        return $this->container->get('form.factory')->createBuilder('form', $data, $options);
    } 
```

所以解决方案是：

```
$form = $this->container->get('form.factory')->createBuilder('form')
            ->add('accept')
            ->getForm(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T10:27:15.730

查看 Symfony2 文档中名为[Using a Form without a Class](http://symfony.com/doc/current/book/forms.html#using-a-form-without-a-class)的章节。

基本上，您必须使用`createFormBuilder`and 而不是字符串或对象，您只需传递具有默认值的数组即可。

从前面提到的文档中：

```
// make sure you've imported the Request namespace above the class
use Symfony\Component\HttpFoundation\Request
// ...

public function contactAction(Request $request)
{
    $defaultData = array('message' => 'Type your message here');
    $form = $this->createFormBuilder($defaultData)
        ->add('name', 'text')
        ->add('email', 'email')
        ->add('message', 'textarea')
        ->getForm();

        if ($request->getMethod() == 'POST') {
            $form->bind($request);

            // data is an array with "name", "email", and "message" keys
            $data = $form->getData();
        }

    // ... render the form
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T10:27:32.683

如果您不想将表单绑定到任何特定对象，则不需要将任何对象传递给构建器，您可以执行以下操作：

```
 $form = $this->container->get('form.factory')->createBuilder()
        ->add('accept')
        ->getForm(); 
```

如果要为表单设置一些默认值，可以将表单绑定到数组。例如：

```
 $data['accept'] = 'default accept';

    $form = $this->container->get('form.factory')->createBuilder($data)
        ->add('accept')
        ->getForm(); 
```

# php - 如何处理 HTML 电子邮件中的长链接

> ID：12385891
> 
> 赞同：15
> 
> 时间：2012-09-12T10:13:33.073
> 
> 标签：php, html-email

我已经在网上搜索过，我可以找到两种解决方案：

1.  使用 URL-shortner。
2.  使用括号`<` `>`允许插入空格。这仅适用于纯文本电子邮件。

我正在发送包含敏感信息的 HTML 电子邮件，例如密码恢复链接和自动身份验证链接。这些安全链接就其性质而言相当长。很容易超过 70 个字符或对电子邮件正文施加的任意限制。

显然我不能使用任何形式的 URL 缩短，因为它会绕过我用于链接的任何安全加密技术。

我想最大的问题是电子邮件客户端没有很好地包装链接。CSS3 技术支持漂亮的自动换行，因此 MS Outlook 永远不会支持这一点。

**如何使链接不会在视觉上造成破坏，并且在电子邮件客户端出现故障时可能易于复制粘贴？**

*例子*

> 如果链接似乎没有工作时，试图复制粘贴到浏览器：hxxp：//开发/＃AUTH / YoxOntz0Oj0ExOiJfcmFuG9tbmVzcyI7czoxOTI6kJsYkV0qMGMuZ1pFZVQ5YkRQNDZPR200Unl60dGlpNlhZZC9QcEVeH0lvV2NVVlpWWFcwWlF0VjRyc0p4akYzclJ0GTkJmSlgxco0aEtDS0FuTlBVSXAxUVhCcGdRNGpHMVl5UGZMRFVacDVSQ1BqcU0tKYlNxZ0FqYXpjTkNqTS9LV29xSk4ydGtyeFpNdV0c2VLMERUbEYwc08xUWU5aXR0GOXl0bVFpcjlXeGZjUE100S0o1L1FcmQ4MmhOdm5LUSI7fQ

补充笔记：

我不希望我的链接过期。如果我希望它们完全过期，我会有几个月的时间框架，而不是几个小时。这些链接不仅仅是密码恢复链接。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-12T13:15:38.487

您是否尝试过 Microsoft 专有的 word-break:break-all; ?

```
<td style=“word-break:break-all;”&gt; 
```

* * *

这对我来说效果最好（跨供应商的最佳兼容性）：

```
<p style="word-break:break-all;">
    <font style="word-break:break-all;">hxxp://really_long_link</font>
</p> 
```

测试于：MS Office 2007/2010、outlook.com、hotmail.com、gmail.com、yahoo.com（雅虎显示不佳）

* * *

虽然这被编辑为包括在内`<p>...</p>`，但如果间距很重要，我强烈反对在 HTML 电子邮件中使用段落标签，因为电子邮件客户端对这些的解释不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T10:20:19.383

## 在 Html 电子邮件中 ​​- 使用 html

如果您发送 html 电子邮件，有什么问题：

```
... <a href="long url">reset your password</a> ... 
```

如果在您发送 html 电子邮件时链接被破坏 - 问题在于您发送电子邮件的方式，而不是收件人的电子邮件客户端。

## 使用较短的哈希

超长哈希（是哈希还是加密？）真的有必要吗？使用任何足够长的哈希值在过期之前不会被暴力破解就足够了。要求用户复制和粘贴显然要换行的字符串对用户没有帮助，它只是将开发问题推给用户。

# html - IE7 尴尬的列表间距

> ID：12385898
> 
> 赞同：2
> 
> 时间：2012-09-12T10:13:57.007
> 
> 标签：html, css, cross-browser, internet-explorer-7

我有一个从列表构建的大菜单。

它在我尝试过的所有现代浏览器和 IE8 中都能正确显示，但是在 IE7 中，列表项似乎被赋予了大量不同大小的边距，具体取决于列表项的大小*（参见下面的图像比较）*：

![好浏览器和IE7的比较](../Images/49d9f2dfd2306f4f0e76d43ee64b2304.png)

不幸的是，IE7 中的调试工具不是最佳的，我很难弄清楚问题出在哪里。源代码在这里发布有点长，所以我制作了一个 JSfiddle 供您观看。

[查看源代码和工作演示](http://jsfiddle.net/hKhMu/5)

谁能看到这个神秘的间距是从哪里来的，我怎么能把它说清楚？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:20:27.443

在 IE7 中，`<ul>`标签继承了 a `line-height : 1.5em`，在 ie7 中禁用它可以消除烦人的间距。[更新的小提琴](http://jsfiddle.net/hKhMu/6/)

这种情况是罪魁祸首

```
ul {
    /* line-height: 1.5em; */
    list-style-position: outside;
} 
```

**额外的**

好的，我明白你对白色间隙的意思了。这看起来像是它（惊喜）那些烦人的ie7“功能”之一。我刚刚通过使用黑客解决了它

```
ul li, ul li a {
    /* Needed in ie7 to stop list items expanding vertically
    *line-height:1.2em;
} 
```

和

```
* html ul li a {
    height:15px;
} 
```

或者

```
ul#map > li > a.map-item {
    height:auto;
    *height:15px;
} 
```

[IE7中没有间距的小提琴](http://jsfiddle.net/hKhMu/9/)

更好的方法是创建一个仅限 IE7 的样式表并将其声明为标准，而不是依赖于 hack。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:22:27.273

您是否尝试过添加 CSS 以将所有浏览器的所有样式重置为相同？

通过包含重置 CSS 文件，例如： http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)可能有助于解决您的问题。

# android - 我如何通过 split s 字符串获得二维数组响应

> ID：12385902
> 
> 赞同：0
> 
> 时间：2012-09-12T10:14:10.017
> 
> 标签：android

如何拆分`String`并获得二维`Array`结果。
我希望我的答案在 [ ][ ]Array 中。
如何拆分单个`String`消息并在 [ ][ ]Array 中获取结果

```
public static String[][] SMSAgAppXMLParser( String parUrl) 
{
    String [][] xmlRespone=null;
    String[] parts;
    parts = parUrl.split("\n");
    xmlRespone = new String[ parts.length/2 ][2];

    for (int j=0,  i = 0;  i < parts.length-1+2; ) {
        xmlRespone[j][0] =  parts[i];
        xmlRespone[j][1] = parts[i+1];
        j++;

    }
return xmlRespone;      
} 
```

# apache-httpclient-4.x - 使用 HttpClient java 登录到 https URL

> ID：12385907
> 
> 赞同：2
> 
> 时间：2012-09-12T10:14:19.223
> 
> 标签：apache-httpclient-4.x

我正在尝试使用 HttpClient 登录到 HTTPS URL，但失败了。我可以就我的问题寻求帮助吗？这是我写的代码。此代码能够获取 cookie 部分，但未登录。登录后，我需要从登录页面获取一些数据。

```
DefaultHttpClient httpclient = new DefaultHttpClient();
    HttpGet httpget = new HttpGet("http://www.example.com");
    HttpResponse response = httpclient.execute(httpget);
         HttpEntity entity = response.getEntity();
    System.out.println("Initial set of cookies:");
         List<Cookie> cookies = httpclient.getCookieStore().getCookies();
         if (cookies.isEmpty()) {
             System.out.println("None");
         } else {
             for (int i = 0; i < cookies.size(); i++) {
                 System.out.println("- " + cookies.get(i).toString());
             }
         }

         HttpPost httpost = new HttpPost("https://www.example.com/jsp/login.jsp");

         List <NameValuePair> nvps = new ArrayList <NameValuePair>();
         nvps.add(new BasicNameValuePair("username", "xxx"));
         nvps.add(new BasicNameValuePair("password", "xxx"));

         httpost.setEntity(new UrlEncodedFormEntity(nvps, Consts.UTF_8));

         response = httpclient.execute(httpost);
         entity = response.getEntity();

         System.out.println("Login form get: " + response.getStatusLine());
         EntityUtils.consume(entity);

         System.out.println("Post logon cookies:");
         cookies = httpclient.getCookieStore().getCookies();
         if (cookies.isEmpty()) {
             System.out.println("None");
         } else {
             for (int i = 0; i < cookies.size(); i++) {
                 System.out.println("- " + cookies.get(i).toString());
             }
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-17T15:48:52.510

您可能缺少登录按钮和更多名称值对。我不确定您的按钮被称为什么或随它发送的值。

```
List <NameValuePair> nvps = new ArrayList <NameValuePair>();
         nvps.add(new BasicNameValuePair("username", "xxx"));
         nvps.add(new BasicNameValuePair("password", "xxx"));
         nvps.add(new BasicNameValuePair("button", "Login")); 
```

我会下载[TamperData](https://addons.mozilla.org/en-US/firefox/addon/tamper-data/)，然后在 TamperData 启动时访问您的网页并登录。使用它来查看您登录的 POST。可能会发送您丢失的名称值对。

# android - 这是拨打应用内电话的最佳上下文

> ID：12385908
> 
> 赞同：1
> 
> 时间：2012-09-12T10:14:19.800
> 
> 标签：android, android-intent, android-activity

我有以下代码：

```
 Intent myintent = new Intent (ScreenOne.this, ScreenTwo.class);
  startActivity(myintent); 
```

ScreenTwo 包含一个电话号码列表。两个屏幕都扩展了 BaseScreen。

我需要做的是点击一个电话号码并从我的应用程序中拨打电话。我有正确的代码，唯一的问题是调用屏幕在 ScreenTwo 后面。

我猜这与我在 Intent 中传递的上下文有关。

我用过

*   ScreenOne.this,
*   这，
*   getBaseContext(),
*   获取应用程序上下文（），
*   获取应用程序和
*   获取父母（），

一切都无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:18:08.280

`ScreenTwo`本身应该是一个，`Activity`因为它**扩展了 Activity**。您应该创建更多新活动（并将它们`AndroidManifest.xml`也注册进去），然后像在第一种方法中那样调用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T12:23:53.040

对此没有任何启示，并且所有上下文似乎都无法将屏幕带到顶部，我想我必须找到另一种解决方法。

# youtube - Youtube 获取视频和播放列表帐户

> ID：12385910
> 
> 赞同：0
> 
> 时间：2012-09-12T10:14:24.823
> 
> 标签：youtube, youtube-api, youtube-javascript-api

我正在创建一个媒体屋模拟应用程序，我想知道是否有办法从某个不是我的帐户获取视频播放列表，例如，如果用户的页面是[http://www.youtube.com/ someuser](http://youtube.com/someuser)是否可以从该用户那里获取所有视频和播放列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T14:59:38.300

您可以使用 youtube 视频供稿（[Youtube RSS 视频供稿](http://www.youtube.com/t/rss_feeds)）

使用 GET 发出以下请求并读取返回的 xml 数据。

```
http://gdata.youtube.com/feeds/api/users/{{username}}/playlists - For playlists
http://gdata.youtube.com/feeds/api/users/{{username}}/uploads - For uploads 
```

Orderby 参数可用于更改视频的顺序。

# ruby-on-rails - 使用 ruby mail gem 发送邮件时 Mail.deliver 会返回什么？或使用响应来确定电子邮件 ID 的有效性，请不要使用正则表达式

> ID：12385912
> 
> 赞同：3
> 
> 时间：2012-09-12T10:14:26.057
> 
> 标签：ruby-on-rails, ruby, rubygems

请参阅以下代码片段：

```
def deliver_email
    mailResponse = Mail.deliver do
      to 'someEmail@whichDoesntExist.bla'
      from 'Unspecified <info@unspecified.com>'
      subject 'Email Delivery Test'
      text_part do
        body(
          "email Body"
        )
      end
      html_part do
        content_type 'text/html; charset=UTF-8'
        body("email Body")
      end
    end
rescue Exception => exception
  p "Invalid Email ID"
end 
```

我正在使用 ruby​​ "mail" gem 发送邮件，如果发现无效的电子邮件，我想打印一些东西。我不想使用正则表达式，而是想使用 Mail.deliver 的响应来确定电子邮件的有效性。即使电子邮件 ID 无效，上述代码片段也不会进入救援块！
**我的 smtp 设置**

```
Mail.defaults do
  delivery_method :smtp, {
    :address => 'smtp.gmail.com',
    :port => '587',
    :user_name => 'sampleUsername',
    :password => 'samplePassword',
    :authentication => :plain,
    :enable_starttls_auto => true,
  }
end 
```

我在这里错过了什么吗？

# python - 登录 python + mod_wsgi 应用程序

> ID：12385915
> 
> 赞同：3
> 
> 时间：2012-09-12T10:14:27.210
> 
> 标签：python, mod-wsgi

我已经在 apache 服务器上部署了一个 python 烧瓶应用程序。这是我的`abc.conf`文件：

```
WSGIDaemonProcess voting_app threads=5
WSGIScriptAlias /election /var/www/voting_app/voting.wsgi

LogLevel info
ErrorLog "/var/www/voting_app/error.log"
CustomLog "/var/www/voting_app/access.log" combined

<Directory /var/www/voting_app>
    WSGIProcessGroup voting_app
    WSGIApplicationGroup %{GLOBAL}
    Order deny,allow
    Allow from all
</Directory> 
```

为了检查调试，我在我的应用程序中犯了一个语法错误。重新启动服务器时，我收到 500 服务器错误，但我无法在任何地方看到错误的详细信息。我检查了我作为日志添加的两个文件——它们完全是空白的。中的日志文件也是如此`/var/log/apache2`。我在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T05:06:37.200

在生产环境中运行 Flask 时，而不是使用内置的开发服务器，它会将应用程序异常转换为 HTTP 500 响应，但不会记录任何内容。所以你看到的是正常的。

如果您是唯一一个查看该站点的人，您可以暂时启用调试模式，就像使用开发服务器自动完成一样。有关如何执行此操作，请参阅：

[http://flask.pocoo.org/docs/quickstart/#debug-mode](http://flask.pocoo.org/docs/quickstart/#debug-mode)

具体来说：

```
app.debug = True 
```

其中 'app' 是 Fl​​ask 类实例。

这将导致在发出请求的浏览器中显示错误的详细信息。

在真正的生产系统上，您显然不应该使用它，因此在这种情况下，您应该设置 Flask 来记录此类应用程序错误。为此，请参阅：

[http://flask.pocoo.org/docs/errorhandling/](http://flask.pocoo.org/docs/errorhandling/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:08:12.697

您是否检查过 Apache 在目录中是否具有写入权限`voting_app`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-26T00:42:50.393

如果您在 Ubuntu 11.10 或更高版本上运行，那么您可能会被这个[错误](https://bugs.launchpad.net/ubuntu/+source/mod-wsgi/+bug/908605)所困扰。显然，当 Python 子进程崩溃时，它应该将堆栈跟踪转储到 Apache 日志，但在某些情况下它无法这样做。该错误报告引用了 mod_wsgi 维护者的[另一个错误报告](https://code.google.com/p/modwsgi/issues/detail?id=276)。记者在调试问题方面取得了一些进展，但早在 2013 年就陷入了困境，AFAICT 的进展从此停止。

至少现在您应该按照 Graham Dumpleton 的回答并按照 Flask 文档的描述为您的应用程序配置一个记录器。您可能希望将该记录器配置代码包装在 try-except 块中，以防初始设置失败。

# cocoa - QFileDialog::getOpenFileName 在 mac 上非常慢

> ID：12385917
> 
> 赞同：1
> 
> 时间：2012-09-12T10:14:34.603
> 
> 标签：cocoa, qt, qfiledialog

我正在研究涉及读取现有目录的示例 qt 项目，要求是我必须使用 getOpenFileName 函数，并且在处理它时我观察到该函数在 Windows 上运行良好，但在 Mac 上通过使用本机窗口它的响应能力是很慢有人知道如何加快速度吗？目前我正在使用以下功能

QFileDialog::getOpenFileName(this, Caption, defaultPath, filters);

# objective-c - 在界面生成器中设置 UIButton 的标题时调用哪个方法？

> ID：12385918
> 
> 赞同：0
> 
> 时间：2012-09-12T10:14:36.010
> 
> 标签：objective-c, ios, xcode, interface-builder

有谁知道，当我在界面生成器中设置 UIButton 的默认标题时会调用哪个方法？

![在此处输入图像描述](../Images/50604b117713c714118cf351d0b71609.png)

我将 UIButton 子类化，并希望通过界面生成器轻松设置其标题。我假设它的工作方式类似于调用 setValue: forKeyPath: 方法的用户定义的运行时属性。

编辑：所以我正在寻找在实例化视图时类似于“界面构建器告诉按钮具有特定标题”的方法。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:02:33.093

Interface Builder 不调用 setTitle: 方法，而是您可以在 UIButton 的子类中覆盖 initWithCoder: 和 awakeFromNib

```
- (id) initWithCoder:(NSCoder *)aCoder{
    if(self = [super initWithCoder:aCoder){

        NSLog([self titleForState:UIControlStateNormal]);

    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:16:48.560

您正在寻找的方法是[`setTitle:forState:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/occ/instm/UIButton/setTitle%3aforState%3a).

# android - 在android应用程序中实现水平滑动标签栏按钮时出错

> ID：12385919
> 
> 赞同：0
> 
> 时间：2012-09-12T10:14:38.830
> 
> 标签：android

我正在制作一个 android 应用程序，我必须在其中实现滑动标签栏。我也尝试了示例代码。

这是我的邮件 xml 文件：

[http://pastebin.com/Z3fPnzv1](http://pastebin.com/Z3fPnzv1)

这是我的 footer_tabs.xml 文件：

现在的问题是在这种情况下标签没有滑动

谢谢酷 jatt

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:19:43.870

这里是一些好的主题的参考，它们会帮助你::

1.  [水平标签栏](https://stackoverflow.com/questions/12356238/how-can-i-allow-horizontal-tab-navigation-swipe-views-with-action-bar-navigati)推荐问题。
2.  [水平标签切换器](http://wptrafficanalyzer.in/blog/implementing-horizontal-view-swiping-using-viewpager-and-fragmentpageradapter-in-android/)
3.  [操作栏](http://developer.android.com/design/patterns/actionbar.html)

谢谢。

# spring - Spring -Mongodb 将枚举存储/检索为 int 而不是字符串

> ID：12385920
> 
> 赞同：9
> 
> 时间：2012-09-12T10:14:52.607
> 
> 标签：spring, mongodb, spring-mongo

我的枚举作为 int 存储在 mongodb 中（来自 C# 应用程序）。现在在 Java 中，当我尝试检索它们时，它会引发异常（似乎枚举只能从字符串值转换）。有什么办法可以做到吗？

此外，当我将一些集合保存到 mongodb（来自 Java）时，它会将枚举值转换为字符串（而不是它们的值/基数）。有没有可用的覆盖？

这可以通过在类级别编写 mongodb-converter 来实现，但我不想为每个类编写 mondodb-converter，因为这些枚举位于许多不同的类中。

那么我们在现场层面有什么东西吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-05-04T07:19:54.123

在对 spring-mongodb 转换器代码进行了长时间的挖掘之后，好的，我完成了，现在它可以工作了 :) 就是这样（如果有更简单的解决方案，我也会很高兴看到，这就是我所做的）：

首先定义：

```
public interface IntEnumConvertable {
      public int getValue();    
} 
```

和一个实现它的简单枚举：

```
public enum tester implements IntEnumConvertable{   
    vali(0),secondvali(1),thirdvali(5);

    private final int val;
    private tester(int num)
    {
        val = num;          
    }
    public int getValue(){
        return val;
    }
} 
```

好的，现在您需要 2 个转换器，一个简单，另一个更复杂。最简单的（这个简单的婴儿也处理简单​​的转换，并在无法进行强制转换时返回一个字符串，如果你想将枚举存储为字符串，而枚举是数字存储为整数，那就太好了）：

```
public class IntegerEnumConverters {
    @WritingConverter
    public static class EnumToIntegerConverter implements Converter<Enum<?>, Object> {
        @Override
        public Object convert(Enum<?> source) {
            if(source instanceof IntEnumConvertable)
            {
                return ((IntEnumConvertable)(source)).getValue();
            }
            else
            {
                return source.name();
            }               
        }
    }   
 } 
```

更复杂的，其实是一个转换器工厂：

```
public class IntegerToEnumConverterFactory implements ConverterFactory<Integer, Enum> {
        @Override
        public <T extends Enum> Converter<Integer, T> getConverter(Class<T> targetType) {
            Class<?> enumType = targetType;
            while (enumType != null && !enumType.isEnum()) {
                enumType = enumType.getSuperclass();
            }
            if (enumType == null) {
                throw new IllegalArgumentException(
                        "The target type " + targetType.getName() + " does not refer to an enum");
            }
            return new IntegerToEnum(enumType);
        }
        @ReadingConverter
        public static class IntegerToEnum<T extends Enum>  implements Converter<Integer, Enum> {
            private final Class<T> enumType;

            public IntegerToEnum(Class<T> enumType) {
                this.enumType = enumType;
            }

            @Override
            public Enum convert(Integer source) {
                  for(T t : enumType.getEnumConstants()) {
                      if(t instanceof IntEnumConvertable)
                      {
                          if(((IntEnumConvertable)t).getValue() == source.intValue()) {
                                return t;
                            }                         
                      }                     
                    }
                    return null;   
            }
        }
} 
```

现在对于hack部分，我个人没有找到任何“programmitacly”方法来在 mongoConverter 中注册转换器工厂，所以我挖掘了代码并进行了一些铸造，这就是（将这 2 个婴儿函数放在你的 @Configuration班级）

```
 @Bean
        public CustomConversions customConversions() {
            List<Converter<?, ?>> converters = new ArrayList<Converter<?, ?>>();
            converters.add(new IntegerEnumConverters.EnumToIntegerConverter());     
// this is a dummy registration , actually it's a work-around because
// spring-mongodb doesnt has the option to reg converter factory.
// so we reg the converter that our factory uses. 
converters.add(new IntegerToEnumConverterFactory.IntegerToEnum(null));      
            return new CustomConversions(converters);
        }

    @Bean
    public MappingMongoConverter mappingMongoConverter() throws Exception {
        MongoMappingContext mappingContext = new MongoMappingContext();
        mappingContext.setApplicationContext(appContext);
        DbRefResolver dbRefResolver = new DefaultDbRefResolver(mongoDbFactory());
        MappingMongoConverter mongoConverter = new MappingMongoConverter(dbRefResolver, mappingContext);        
        mongoConverter.setCustomConversions(customConversions());       
        ConversionService convService = mongoConverter.getConversionService();
        ((GenericConversionService)convService).addConverterFactory(new IntegerToEnumConverterFactory());                  
        mongoConverter.afterPropertiesSet();
        return mongoConverter;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:56:19.700

您将需要实现您的自定义转换器并将其注册到 spring。

[http://static.springsource.org/spring-data/data-mongo/docs/current/reference/html/#mongo.custom-converters](http://static.springsource.org/spring-data/data-mongo/docs/current/reference/html/#mongo.custom-converters)

# symfony - 在 Symfony2 控制器中处理 Ajax 中的错误

> ID：12385923
> 
> 赞同：9
> 
> 时间：2012-09-12T10:15:15.900
> 
> 标签：symfony, symfony-2.1

我正在尝试处理 Ajax 中的错误。为此，我只是想在 Symfony中重现这个[SO 问题。](https://stackoverflow.com/questions/407596/how-do-you-handle-errors-from-ajax-calls)

```
$.ajaxSetup({
    error: function(xhr){
        alert('Request Status: ' + xhr.status + ' Status Text: ' + xhr.statusText + ' ' + xhr.responseText);
    }
}); 
```

但我无法弄清楚控制器中的代码在 Symfony2 中会是什么样子才能触发`header('HTTP/1.0 419 Custom Error');`。是否可以附上个人信息，例如`You are not allowed to delete this post`. 我是否也需要发送 JSON 响应？

如果有人对此很熟悉，我将非常感谢您的帮助。

非常感谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-12T10:21:00.167

在您的操作中，您可以返回一个`Symfony\Component\HttpFoundation\Response`对象，您可以使用该`setStatusCode`方法或第二个构造函数参数来设置 HTTP 状态代码。当然，如果您愿意，也可以将响应的内容作为 JSON（或 XML）返回：

```
public function ajaxAction()
{
    $content = json_encode(array('message' => 'You are not allowed to delete this post'));
    return new Response($content, 419);
} 
```

或者

```
public function ajaxAction()
{
    $response = new Response();
    $response->setContent(json_encode(array('message' => 'You are not allowed to delete this post'));
    $response->setStatusCode(419);
    return $response;
} 
```

**更新：**如果你使用 Symfony 2.1，你可以返回一个实例`Symfony\Component\HttpFoundation\JsonResponse`（感谢 thecatontheflat 的提示）。使用此类的优点是它还会发送正确的`Content-type`标头。例如：

```
public function ajaxAction()
{
    return new JsonResponse(array('message' => ''), 419);
} 
```

# xamarin.ios - ReleaseDesignerOutlets 已解除分配的网点未重新分配

> ID：12385925
> 
> 赞同：1
> 
> 时间：2012-09-12T10:15:26.503
> 
> 标签：xamarin.ios

我有以下情况：

1.  UIViewControllerA 通过故事板 segue 将 UIViewControllerB 推送到导航堆栈；

2.  UIViewControllerB 现在在屏幕上，我通过 iOS 模拟器模拟内存警告。

3.  UIViewControllerA.DidReceiveMemoryWarning() 和 UIViewControllerA.ViewDidUnload() 一样被调用。

4.  在 UIViewControllerA.ViewDidUnload() 方法中，我按照建议调用 ReleaseDesignerOutlets()。UIViewControllerA 设计器出口现在被释放并为空。

5.  我点击导航栏上的“返回”按钮，该按钮关闭 UIViewControllerB 并导致 UIViewControllerA.ViewDidLoad() 被调用。

6.  在这一点上，我希望设计器出口被初始化**，但它们仍然为空**，并且我的应用程序由于空指针异常而崩溃。

我从根本上错过了什么吗？我正在使用 Monotouch 5.4.0。

编辑我发现这篇描述问题解决方案的[帖子](http://monotouch.2284126.n4.nabble.com/Getting-a-SIGABRT-on-the-device-td4410210.html#a4411696)与我发现的相同，也就是说，**不要**在 ViewDidUnload() 中发布设计器出口。

> 更新：终于没有崩溃了！（或者至少看起来是）
> 
> 为了将来参考，看起来大锁定是由于我**在 ViewDidUnload 事件中处理了我的 UIWebView 插座**。UIWebView 是在 xib 中定义的，而不是在代码中添加为子视图。
> 
> 当内存不足时，视图卸载并删除了 UIWebView 插座。随后，随着应用程序恢复（！？），ViewDidLoad 事件将再次触发，但它会锁定。**我希望在重新加载视图**（即重新加载 xib）时恢复 UIWebView。
> 
> 不是这样吗？**我认为在 ViewDidUnload 事件中处理网点是一种好习惯**吗？
> 
> **我一注释掉**“webView.Dispose(); webView = null;” 代码行，它一直在按预期工作。
> 
> 多么美好的一天！

编辑 进一步调试显示，一些设计器出口正在重新分配，例如 UIImageView 和 UIScrollView，而其他诸如 UITextField 和 UIBarButtonItem 则没有。

# regex - 使用 sed 和正则表达式处理多行日志文件

> ID：12385931
> 
> 赞同：2
> 
> 时间：2012-09-12T10:15:50.777
> 
> 标签：regex, sed, awk, logparser, log-analysis

我有一个看起来像这样的日志文件：

> ```
> 11-Sep-2012 00:00:00 clojure.contrib.logging$fn__43$impl_write_BANG___51 invoke
> INFO: creditAcc(args=[1506112834429596390 7080851004 4500])
> 11-Sep-2012 00:00:00 clojure.contrib.logging$fn__43$impl_write_BANG___51 invoke
> INFO: callProf|tupsCredit|180|[1506112834429596390 7080851004 45]
> 11-Sep-2012 00:00:00 clojure.contrib.logging$fn__43$impl_write_BANG___51 invoke
> INFO: creditAcc(args=[1506112834429596390 7080851004 4500]) -> done.
> 11-Sep-2012 00:00:00 clojure.contrib.logging$fn__43$impl_write_BANG___51 invoke
> INFO: return(1506112834429596390,0) 
> ```

日志文件中的每个条目跨越两行，因此每个条目都以时间戳开头。我已经设法使用 sed 替换了第一行末尾的换行符，但问题是日志条目中间的某个地方是 java stacktrace 消息。当 sed 通过堆栈跟踪时，它会反转条目的顺序，它们以 INFO 或 ERROR 等开头，时间戳显示为第二行。因此，我正在寻找一种解决方案，该解决方案将强制 sed 使用正则表达式 [类似于 ^\d{2}] 将时间戳识别为第一行，然后在同一行中，将换行符替换为空格，然后将值分解为用于分析的列。堆栈跟踪消息以空格 [^\s] 开头，因此它们很容易识别和跳过。

使用 sed 或 awk 解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:01:49.677

```
sed '/^ /d; N; s/\n/ /' inputfile 
```

这匹配以空格开头的行并删除它们。该`d`指令跳过其余指令。如果一行不以空格开头，则下一行也被读入，并且它们之间的换行符更改为空格。

只有当日志行成对出现时，它才能正常工作。换句话说，如果堆栈跟踪行跟在时间戳行之后，并且 INFO/ERROR 行出现在堆栈跟踪之后，它将无法正常工作。

# sql - 以特定方式获取要订购的查询

> ID：12385932
> 
> 赞同：4
> 
> 时间：2012-09-12T10:15:51.703
> 
> 标签：sql, oracle, sql-order-by

我有一个查询，在执行时会返回过去 24 小时的所有时间。因此，如果您在上午 10:55 运行查询，则结果将从昨天上午 11 点到今天上午 10 点。

这是我正在使用的查询：

```
select to_char(trunc(a_date,'HH24'),'HH24') col_x,
       type_name seriesname,
       sum(a_measure_3) col_y
from a_agg,
     (select trunc(sysdate, 'hh')-1 POS from dual)
where a_date >= POS
and   a_date <= POS + 1
group by trunc(a_date,'HH24'),
         type_name 
order by 2; 
```

这是我正在寻找的输出：

```
COL_X  | SERIESNAME  | COL_Y
-----------------------------------
 11    |  STATUS1    |  6715846
 12    |  STATUS1    |  7064692
 13    |  STATUS1    |  6821742
 14    |  STATUS1    |  6241758
 15    |  STATUS1    |  6364713
 16    |  STATUS1    |  6762539
 17    |  STATUS1    |  6200213
 18    |  STATUS1    |  8479341
 19    |  STATUS1    |  13346516
 20    |  STATUS1    |  10107274
 21    |  STATUS1    |  3716290
 22    |  STATUS1    |  1321966
 23    |  STATUS1    |  433947
 00    |  STATUS1    |  200273
 01    |  STATUS1    |  97429
 02    |  STATUS1    |  81726
 03    |  STATUS1    |  124943
 04    |  STATUS1    |  284946
 05    |  STATUS1    |  1360847
 06    |  STATUS1    |  4250001
 07    |  STATUS1    |  5840156
 08    |  STATUS1    |  6666608
 09    |  STATUS1    |  6949196
 10    |  STATUS1    |  982411 
```

现在我的问题是，有没有办法订购`COL_X`以获得这个特定的输出，因为我的电流`order by 2`不会总是返回上述结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:24:39.507

还`order by trunc(a_date,'HH24')`不够吗？您应该能够按顺序使用所有分组值，而不仅仅是选择列表表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:25:42.597

我认为您想按实际日期列（a_date）订购。它不允许您自行订购，因为它不在 group by 中使用。要允许它，您需要以某种方式聚合日期。只需使用 MAX 或 MIN 即可。

简而言之，只需 ORDER BY MAX(a_date)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T10:17:34.550

是的，您可以`CASE`在`ORDER BY`子句中使用语句，例如：

```
 ORDER BY 
    CASE WHEN COL_X > 10 AND COL_X <= 23
         THEN 0
    ELSE 1
    END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T10:22:26.670

试试这个：

只需将您的 order by 条款更改为

```
Order by a_date 
```

由于 a_date 是您的日期列，它将按时间顺序排列

# python - jython < 2.1 中的 str.lstrip(char) 等价物

> ID：12385933
> 
> 赞同：0
> 
> 时间：2012-09-12T10:15:55.167
> 
> 标签：python, jython

考虑下面的代码：

```
word='hello.world'
//matchedWord to contain everything right of "hello"
matchedWord=word.lstrip('hello') //now matchedWord='.world' 
```

如何在 str.lstrip(char) 不可用的 jython 2.1 中实现相同的目标。任何其他解决方法来删除一个单词的所有字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:46:07.453

如果您确实需要使用`.lstrip()`，可以将其重新实现为函数：

```
def lstrip(value, chars=None):
    if chars is None:
        chars=' \t\n'
    while value and value[0] in chars:
        value = value[1:]
    return value 
```

但是您需要注意什么`.lstrip()`（和`.rstrip()`和`.strip()`）从前面去除一*组*字符，而不是前缀。从（cpython）文档中：

> 返回删除了前导字符的字符串的副本。参数是一个字符串，`chars` 指定要删除的字符集。如果省略 or `None`，则`chars`参数默认为删除空格。chars 参数不是前缀；相反，它的值的所有组合都被剥离：
> 
> ```
> >>> '   spacious   '.lstrip()
> 'spacious   '
> >>> 'www.example.com'.lstrip('cmowz.')
> 'example.com' 
> ```

# c++ - 不是类或命名空间

> ID：12385939
> 
> 赞同：2
> 
> 时间：2012-09-12T10:16:27.647
> 
> 标签：c++

我的 C++ 有点生锈。任何人都可以看到为什么我在访问 i 时在 main() 中看到“不是类或命名空间”编译时错误。

```
#include <iostream>

using namespace std;

class Singleton2 {
    Singleton2(){
        i = 0;
    }
public:
    int i;

    friend Singleton2 & singleton2();
};

Singleton2 & singleton2(){
    static Singleton2 ms;

    return ms;
}

int main() {
    Singleton2 ms = singleton2();
    int i = ms::i;              // error: `ms' is not a class or namespace
    cout << i << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:17:35.370

您使用点`.`运算符来访问非静态成员，而不是范围解析运算符`::`

```
int i = ms.i; 
```

注意下面的赋值

```
Singleton2 ms = singleton2(); 
```

*复制*你的单身人士。你`singleton2()`返回一个参考，所以你可能也应该做`ms`一个参考：

```
Singleton2 &ms = singleton2(); 
```

# php - Sendhub api 问题

> ID：12385941
> 
> 赞同：1
> 
> 时间：2012-09-12T10:16:33.540
> 
> 标签：php, javascript, json

我正在使用 sendhub API。

[https://www.sendhub.com/developer/](https://www.sendhub.com/developer/)

并得到这个错误。

指示“application/x-www-form-urlencoded”的格式没有可用的反序列化方法。请检查您的`formats`和`content_types`在您的序列化器上。

我正在使用的代码是：

```
 $ch = curl_init();

                curl_setopt($ch, CURLOPT_URL,$url);
                curl_setopt($ch, CURLOPT_HEADER, "Content-Type: application/json");
                curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
                curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);

                if(LOCAL_MODE){
                  curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, TRUE);
                  curl_setopt($ch, CURLOPT_PROXYTYPE, CURLPROXY_HTTP);
                  curl_setopt($ch, CURLOPT_PROXY, FALSE);
                 }

                curl_setopt($ch, CURLOPT_POST, 1);

                $data = '{
                   "contacts": [
                      1111
                   ],
                   "text": "Testing"
                }';

                curl_setopt($ch, CURLOPT_POSTFIELDS,$data);
                echo $result=curl_exec ($ch);
                echo curl_error($ch); 
```

谁能帮我解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T05:01:55.240

似乎没有正确发送 Content-Type。

消息“指示的格式 'application/x-www-form-urlencoded' 没有可用的反序列化方法。” 表示服务器正在将内容类型读取为“application/x-www-form-urlencoded”而不是“application/json”。

您应该像这样设置内容类型：

```
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/json')); 
```

（注意 CURLOPT_HEADER 现在是 CURLOPT_HTTPHEADER）

假设您的 url（包括用户名和 apikey）是正确的并且提供的联系人 ID 存在，这现在应该可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T11:37:53.933

```
// The code
$vs_user = $t_user->getAppConfig()->get('sms_user');
$vs_api_key = $t_user->getAppConfig()->get('sms_api_key');
$vs_url = "https://api.sendhub.com/v1/messages/?username={$vs_user}&api_key={$vs_api_key}";
$o_ch = curl_init();
$ps_message = stripslashes(rawurldecode($ps_message));
$ps_message = trim(preg_replace("!\n+!","\\"."n", $ps_message));
curl_setopt($o_ch, CURLOPT_URL, $vs_url);
curl_setopt($o_ch, CURLOPT_HEADER, false);
curl_setopt($o_ch, CURLOPT_HTTPHEADER, array('Content-Type:application/json'));
curl_setopt($o_ch, CURLOPT_POSTFIELDS, '{"contacts":['.$vn_sendhub_contact_id.'],"text":"'.$ps_message.'"}');
curl_setopt($o_ch, CURLOPT_RETURNTRANSFER, 1);
$vs_return = curl_exec($o_ch);
$va_return = json_decode($vs_return);
curl_close($o_ch); 
```

检查我使用的我的 php

# javascript - 使用全选复选框移动数据

> ID：12385949
> 
> 赞同：2
> 
> 时间：2012-09-12T10:17:01.750
> 
> 标签：javascript, jquery, html, asp.net-mvc-3

目前我有两张桌子

我在左上角的复选框上有全选功能，但是单击一个全选会突出显示两个表中的所有复选框，而我只希望在单击的特定“全选”中选中所有框。

此外，当我选择全部并单击方向按钮之一 < 或 > 时，它会很好地拖动所有行，但会拖动标题，如下所示：

我的 JQuery 目前很简单，但我显然错过了一些东西 -

```
 $('#select-all').click(function (event) {
        if (this.checked) {
            // Iterate each checkbox
            $(':checkbox').each(function () {
                this.checked = true;
            });
        }
        else
        // Iterate each checkbox
            $(':checkbox').each(function () {
                this.checked = false;
            });
    }); 
```

其中 'select-all' 是 'tarifs de quittancement' 中全选复选框的 id。

任何帮助表示赞赏

**编辑**

我的 > 按钮代码的 JQuery 如下：

```
 $("#move-to-1").on("click", function () {
        var selected = $("#table2").find("input:checked");

        selected.each(function (idx, elem) {
            $(elem).closest("tr").detach().appendTo($("#table1 tbody"));
        });
    }); 
```

这可以很好地从一个表移动到另一个表，但我不希望包含全选复选框/表标题的行与其余的行数据一起移动。如何才能做到这一点？

再次感谢。

**进一步编辑**

现在它已全部排序，除了一个小错误，即选择一个复选框行（不是全选）并将其移动 < 或 > 会导致所有行都被移动。

使用中的 JQuery：

```
 $('#move-to-1').on('click', function () {
        var selected = $('#table2').find('input:checked');
        selected.each(function (idx, elem) {
            $(elem).closest('tbody').find('tr').detach().appendTo($("#table1 tbody"));
            $('input[type=checkbox]').attr('checked', false);
        });
    });   

   $('#select-all').click(function (event) {
    $(this).closest('table').find(':checkbox').prop('checked', this.checked);
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:19:37.850

您只需要修改当前表中的复选框。由于您没有显示您的标记，因此很难猜测正确的选择器的外观或您是否正在使用表格，但请尝试如下：

```
$('#select-all').click(function (event) {
    $(this).closest('table').find(':checkbox').prop('checked', this.checked);
}); 
```

* * *

更新：

为了解决您的第二个问题，假设您已使用正确方法将这些表中的标题与正文分开，您可以调整选择器`<thead>`：`<tbody>`

```
$('#move-to-1').on('click', function () {
    var selected = $('#table2 tbody').find('input:checked');
    selected.each(function (idx, elem) {
        $(elem).closest('tr').detach().appendTo($("#table1 tbody"));
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:19:18.840

```
$('#select-all').click(function (event) {

        // mention the table

        var table = $('selector_to_your_table');

        if (this.checked) {
            // Iterate each checkbox
            table.find(':checkbox').each(function () {
                this.checked = true;
            });
        }
        else
        // Iterate each checkbox
            table.find(':checkbox').each(function () {
                this.checked = false;
            });
    }); 
```

## 笔记

在最新版本的 jQuery`:checkbox`中已弃用。***[看这里。](http://api.jquery.com/category/deprecated/)***.

而不是`:checkbox` 使用`input[type=checkbox]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T10:20:19.610

代替：

```
$(':checkbox').each(function () {
  this.checked = true;
}); 
```

做：

```
$('some_sort_of_selector :checkbox').attr('checked', true); 
```

你不需要那个`each()`循环——jQuery 会自动完成。您需要某种选择器来限制更改哪些复选框。

我注意到你有`#select-all`- 但你说你有两个全选复选框。你不能那样做。ID 必须是唯一的。

# javascript - 勾选复选框时灰显（禁用）HTML 文本区域

> ID：12385958
> 
> 赞同：5
> 
> 时间：2012-09-12T10:17:36.927
> 
> 标签：javascript, html, forms

我还不太了解Javascript，我希望有人可以帮助我了解如何解决我的问题：

我的 HTML 表单有一个`checkbox`，然后是一个`textarea`：

```
<form>
<input type="checkbox" name="detailsgiven" />
<textarea name="details"></textarea>
</form> 
```

我想要它，以便在勾选`textarea`时被禁用，`checkbox`以便用户无法单击它并输入文本。

我在这里和谷歌上看过，我找不到任何明确的例子来说明如何做到这一点。

我猜这可以用 Javascript 完成，但我感觉有点超出我的深度。有人可以向我解释如何做到这一点，最好不使用第三方库吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T10:22:32.760

```
<form>
<input type="checkbox" name="detailsgiven" onchange="toggleDisabled(this.checked)"/>
<textarea name="details" id="tb1"></textarea>
</form>

<script>
function toggleDisabled(_checked) {
    document.getElementById('tb1').disabled = _checked ? true : false;
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:20:51.577

您所要做的就是在标记复选框时，只需在 textarea 中添加属性 disabled="disabled"。

查看我添加的 jsfiddle

[http://jsfiddle.net/Q9Lg4/](http://jsfiddle.net/Q9Lg4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T10:25:19.283

使用 jQuery 非常容易做到这一点。每个人都使用 jQuery，你也应该使用 ;-)。

```
<form>
    <input type="checkbox" name="detailsgiven" id="detailsgiven" />
    <textarea name="details" id="details"></textarea>
</form>

<script type="text/javascript">
jQuery(document).ready(function($) {
    $("#detailsgiven").change(function() {
        if($(this).is(":checked")) {                
            $("#details").attr("disabled", "disabled");
        }
        else {
            $("#details").removeAttr("disabled");
        }
    });
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T10:25:20.457

试试这个：

```
if ($('input:checkbox').is(':checked')) {
    $('textarea').attr('disabled', 'disabled');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T10:25:24.447

```
<form>
<input type="checkbox" name="detailsgiven" onclick="document.getElementById('t').setAttribute('disabled','disabled');" />
<textarea id="t" name="details"></textarea>
</form> 
```

请注意`onclick`复选框事件如何用于执行一些 javascript 代码。

如果你给你的html元素id，你可以通过`getElementById`javascript DOM（文档对象模型）的方法访问javascripts中的元素。

一旦你有了这个元素，你就可以设置/获取它的属性，做很多事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T10:51:54.540

根据我对您的要求的理解。首先，textarea 被禁用。当 detailsgiven 复选框被选中时，textarea 被启用并且复选框被禁用，因此他无法更改。像这样试试。

```
<!DOCTYPE html>
<html>
<head>
<script>
function valueChanged()
{
    var element1 = document.getElementById("detailsgiven");
    var element2 = document.getElementById("details");
    if(element1.checked)
    {
        element2.disabled=false;
        element1.disabled="disabled";
    }
}

</script>
</head>
<body>
<form>
    <input type="checkbox" name="detailsgiven" id="detailsgiven" onchange="valueChanged()"/>
    <textarea name="details" id="details" disabled="true"></textarea>
</form>
</body>
</html> 
```

# java - Android：PorterDuff.Mode.CLEAR 自定义

> ID：12385962
> 
> 赞同：1
> 
> 时间：2012-09-12T10:18:04.533
> 
> 标签：java, android, android-canvas, porter-duff

使用 PorterDuff.Mode.CLEAR 在 Canvas 上绘图时，移动事件后会留下黑色痕迹。这可以定制吗，例如，我想改变轨迹的宽度和颜色？

# jquery - Ajax 调用未从复选框 onClick 触发

> ID：12385968
> 
> 赞同：0
> 
> 时间：2012-09-12T10:18:24.647
> 
> 标签：jquery, ajax, checkbox, onclick, onchange

我正在尝试做一些简单的事情，以便在检查表单中的复选框时在数据库上触发查询，但是当用户单击它时，简单就无能为力。我尝试过 onClick 或 onChange 事件句柄但没有成功。我究竟做错了什么？感谢您的任何建议！

```
 <head>
  //I'm using joomla and document.js is loading normaly
  $document->addScript("path/document.js");
  </head>

  <body>
  <form id='avisar' method='post' name='avisar'><div id='risposta'></div><input type='checkbox' name='invia' id='invia' value='yes' />Check it!</form>
  </body> 
```

Document.js：编辑以正确获取变量

```
 $(document).ready(function() {
$('#invia').change(function(){

    //variable
    var name = $("#att").val();
    var user = $("#user_id").val();
    var datastr ='name=' + name + '&amp;user=' + user;

    var id = parseInt($(this).val(), 10);
    if($(this).is(":checked")) {
        // checkbox is checked -> do something
        $.ajax({
        url: "processa_form_avisar.php",
        data: datastr,
        cache: false,
        success: function(html){
            alert('Updated successful.');
            $('#risposta').fadeIn("slow");
            $('#risposta').html(html);
            $('#risposta').css("background-color","#e1ffc0");
            setTimeout(function() {
            $("#risposta").fadeOut("slow");
            }, 2000);

            }
        });
    } else {
        // checkbox is not checked -> do something different
    } 
```

}); });

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:35:09.407

使用 jQuery 更改事件而不是单击...

# php - 如何在一个用户上访问多个 API（Facebook 和 Twitter）？

> ID：12385970
> 
> 赞同：1
> 
> 时间：2012-09-12T10:18:31.887
> 
> 标签：php, facebook, oauth, twitter-oauth, facebook-oauth

我一直在阅读有关某人网站的 Facebook 和 Twitter 登录信息。使用这些服务之一的集成是可以的，但我的问题是如何为一个用户访问这两个 API。

**例子：**

用户已登录我的网站（活动会话）。现在他必须以某种方式允许我访问他在 Facebook 和 twitter 上的用户详细信息等。我如何意识到这一点？我不希望他/她每次登录以获取访问令牌 (oAuth) 时都输入他的 facebook 或 twitter 凭据。使用我的网站登录后如何获取自己的 oAuth 用户访问令牌，以便我可以与 Facebook 和 Twitter 的 API 进行交互。

这个对吗？ ![从我的网站接收 oAuth 令牌](../Images/6230f10c7f89c754a44aa7c33f3b33c2.png)

非常感谢你，如果你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:28:13.547

每个单独的 API 都需要一个弹出窗口进行身份验证，该弹出窗口将重定向到适当的 api 进行授权，然后在您获得授权后的令牌后重定向回您的弹出窗口。

然后，您将获得一个令牌，您可以将其传递回调用页面“window.opener”，并通过在主页上调用 Javascript 函数将该 API 的令牌存储在 Javascript 变量中。

```
window.opener.getInstagramData("self", oauth_token); 
```

每个身份验证都需要有自己的令牌，并且需要是用户应该单击的按钮。

我正在使用这种方法来获取 Facebook、Twitter、LinkedIn Foursquare 和 GooglePlus 帐户信息。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:04:31.387

## Facebook

当有人登录 Facebook 帐户时，他们会一直保持登录状态，直到他们主动退出。

对此进行测试的方法是：

```
FB.getLoginStatus(function(response){
    if response.status === 'connected'{
        // The user is logged in
        var access_token = response.authResponse.accessToken;
        // Do whatever you need to do
    } else {
        // Get the user to log in
    }
}); 
```

有关更多详细信息，请参见此处： [https ://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

## 推特

对于 Twitter，这个过程稍微复杂一些，但如果您只想显示推文，请考虑[Web Intents](https://dev.twitter.com/docs/intents)。

否则，请按照以下步骤操作： [https ://dev.twitter.com/docs/auth/3-legged-authorization](https://dev.twitter.com/docs/auth/3-legged-authorization)

这两个平台都能够检查用户是否首先登录，因此您不必担心有人每次使用您的网站时都必须登录。但是，您不能在两个站点上使用相同的 oAuth 令牌 - 您必须为每个站点获取一个单独的令牌。

# processing - 处理：我需要在绘图功能中使用计数器

> ID：12385974
> 
> 赞同：-1
> 
> 时间：2012-09-12T10:18:42.133
> 
> 标签：processing

我正在使用`controlP5`处理 GUI，我需要计数器内部`draw()`功能。

我知道该`draw()`函数连续运行，并且每个 for 循环都显示在其最后一步。

我需要看到每一步。我有两个输入，我只能输入一次，因为`draw()`. 我需要`draw()`功能来等待输入或类似的东西。

```
import controlP5.*;

Textarea myTextareaMI;
Textarea myTextareaVI;
Textarea my;

String textValueBODOVI = "";
String textValueZVANJE = "";
boolean mi=false, vi=false;
int i=1;

ControlP5 cp5;

int myColor = color(255);

int c1, c2;

float n, n1;

void setup() {
  size(320, 480);
  noStroke();
  PFont font = createFont("arial", 20);
  cp5 = new ControlP5(this);
  cp5.addButton("NOVA PARTIJA")
    .setValue(0)
      .setPosition(0, 0)
        .setSize(480, 19)
          ;
  cp5.addButton("PONISTI ZADNJI UNOS")
    .setValue(100)
      .setPosition(0, 20)
        .setSize(480, 19)
          ;

  cp5.addBang("MI")
      .setPosition(60, 80)
        .setSize(60, 20)
          .getCaptionLabel().align(ControlP5.CENTER, ControlP5.CENTER)

            ;
  cp5.addBang("VI")
      .setPosition(123, 80)
        .setSize(60, 20)
          .getCaptionLabel().align(ControlP5.CENTER, ControlP5.CENTER)

            ;
  cp5.addTextfield("BODOVI")
    .setPosition(60, 41)
      .setSize(60, 20)
        .setFont(font)
            .setColor(color(255, 0, 0))
              ;
  cp5.addTextfield("ZVANJE")
    .setPosition(123, 41)
      .setSize(60, 20)
        .setFont(font)
            .setColor(color(255, 0, 0))
              ;

  ;
  int l=0;
  for (int i=1;i<11;i++,l=l+22) {
    my = cp5.addTextarea("MIVI"+i).setPosition(60, 101+l).setSize(123, 20).setFont(createFont("arial", 14))
      .setLineHeight(14)
        .setColor(color(128))
          .setColorBackground(color(255, 100))
            .setColorForeground(color(255, 100))

              ;
  }

}
public void bang() {
}
void draw() {
delay(15);
  background(myColor);
  myColor = lerpColor(c1, c2, n);
  n += (1-n)* 0.1; 
  funkcija();
   }
void funkcija(){ 
   int suma= 0;
    for( i=1;i<=11;i++){
    int brojmi=0;
    textValueZVANJE = cp5.get(Textfield.class, "ZVANJE").getText();
    textValueBODOVI = cp5.get(Textfield.class, "BODOVI").getText();
    int bodovi = int(textValueBODOVI);
    int zvanje = int(textValueZVANJE);

    int mii, vii;
    if(bodovi>0){
    if (mi) {  
      println("mi"+brojmi+i); 
      int ukupno = 162 + zvanje;      
      vii = ukupno - bodovi;
      cp5.get(Textarea.class, "MIVI"+i).setText(textValueBODOVI+"         "+vii);
       mi=false;
       vi=false;
      cp5.get(Textfield.class, "BODOVI").clear();
      cp5.get(Textfield.class, "ZVANJE").clear();
      loop();

    }
    if (vi) { 
      println("vi"+i);
      int ukupno = 162 + zvanje;
      mii = ukupno - bodovi;
      cp5.get(Textarea.class, "MIVI"+i).setText(mii+"         "+textValueBODOVI);
       mi=false;
       vi=false;
      cp5.get(Textfield.class, "BODOVI").clear();
      cp5.get(Textfield.class, "ZVANJE").clear();
        }
}
       brojmi++; }
}

public void controlEvent(ControlEvent theEvent) {
  mi = theEvent.getController().getName().equals("MI");
  vi = theEvent.getController().getName().equals("VI");
}
public void clear() {
  cp5.get(Textfield.class, "BODOVI").clear();
  cp5.get(Textfield.class, "ZVANJE").clear();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:34:22.497

嗯嗯，不知道有没有收到你的问题。如果您的问题是：“我需要 draw() 函数来等待输入或类似的东西。”，然后使用标志（布尔值）来决定是否绘制。当用户输入某些内容时，将 true 分配给该值。

所以你的代码应该是：

```
void draw () {
    // put the code you want to run anyways here...
    // code 
    // code
    if (hasUserInput) {
        // here write the code you should wait to execute
    }
} 
```

# php - 阻止 htaccess 在子文件夹中重写

> ID：12385976
> 
> 赞同：0
> 
> 时间：2012-09-12T10:18:57.953
> 
> 标签：php, .htaccess, url, rewrite

我有 htaccess 的问题

我从 php 将 url 转换为 html

但如果域中的任何子文件夹都将 url 转换为 html

我只需要域 conert url 而不是在任何子文件夹中

这是我的代码

```
RewriteCond %{REQUEST_URI} !^(.*)form.php(.*)$
RewriteCond %{THE_REQUEST} ^[A-Z]+\s([^\s]+)\.php\s
RewriteCond %{REQUEST_URI} !^(.*)form.php(.*)$
RewriteRule .* %1.html [R=301,L]
RewriteRule ^(.*)\.html$ $1.php
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^.*$ - [L]
RewriteRule ^index.php$ http://%{http_host} [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:37:45.090

将您的规则更改为：

```
RewriteCond %{REQUEST_URI} !^(.*)form.php(.*)$
RewriteCond %{REQUEST_URI} !^(.*)sitemap\.xml(.*)$
RewriteCond %{THE_REQUEST} ^[A-Z]+\s([^/]+)\.php\s
RewriteRule .* %1.html [R=301,L]
RewriteRule ^([^/]*)\.html$ $1.php
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^.*$ - [L]
RewriteRule ^index.php$ http://%{http_host} [R=301,L] 
```

# php - preg_replace 用两个数组

> ID：12385977
> 
> 赞同：0
> 
> 时间：2012-09-12T10:19:07.147
> 
> 标签：php, arrays, preg-replace

我在`preg_replace()`使用数组时遇到问题。

基本上，我想转置这个字符串；

```
$string = "Dm F Bb F Am"; 
```

到

```
$New_string = "F#m D D A C#m"; 
```

这是我所做的：

```
$Find = Array("/Dm/", "/F/", "/Bb/", "/Am/", "/Bbm/", "/A/", "/C/");
$Replace = Array('F#m', 'A', 'D', 'C#m', 'Dm', 'C#', 'E');
$New_string = preg_replace($Find, $Replace, $string); 
```

但我得到了这个结果：

E##m E# DE# E#m

问题是每个匹配都被以下内容替换，会发生这样的事情（例如 E##m）：

Dm -> F#m -> A#m -> C##m -> E##m

是否有任何解决方案可以简单地将“Dm”更改为“F#m”，将“F”更改为“A”等？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:39:42.043

您可以使用[strtr()](http://www.php.net/manual/en/function.strtr.php)：

```
<?php
    $string = "Dm F Bb F Am";
    $Find = Array('Dm', 'F', 'Bb', 'Am', 'Bbm', 'A', 'C');
    $Replace = Array('F#m', 'A', 'D', 'C#m', 'Dm', 'C#', 'E');

    $New_string = strtr($string, array_combine($Find, $Replace));

    echo $New_string;

    // F#m A D A C#m 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:40:10.947

`preg_replace_callback()`可能是最简单的方法，您需要在一次操作中完成。像这样的东西：

```
<?php

$string = "Dm F Bb F Am";

$replacements = array (
    'Dm' => 'F#m',
    'F' => 'A',
    'Bb' => 'D',
    'Am' => 'C#m',
    'Bbm' => 'Dm',
    'A' => 'C#',
    'C' => 'E'
);

$New_string = preg_replace_callback('/\b('.implode('|', array_map('preg_quote', array_keys($replacements), array_fill(0, count($replacements), '/'))).')\b/', function($match) use($replacements) {
    return $replacements[$match[1]];
}, $string);

echo $New_string; 
```

[看到它工作](http://codepad.viper-7.com/TcjB3R)

现在，我知道上面的代码有点难以理解，所以让我们把它分解一下，看看每个单独的组件做了什么：

```
// The input string and a map of search => replace
$string = "Dm F Bb F Am";
$replacements = array (
    'Dm' => 'F#m',
    'F' => 'A',
    'Bb' => 'D',
    'Am' => 'C#m',
    'Bbm' => 'Dm',
    'A' => 'C#',
    'C' => 'E'
);

// Get a list of the search strings only
$searches = array_keys($replacements);

// Fill an array with / characters to the same length as the number of search
// strings. This is required for preg_quote() to work properly
$delims = array_fill(0, count($searches), '/');

// Apply preg_quote() to each search string so it is safe to use in the regex
$quotedSearches = array_map('preg_quote', $searches, $delims);

// Build the regex
$expr = '/\b('.implode('|', $quotedSearches).')\b/';

// Define a callback that will translate search matches to replacements
$callback = function($match) use($replacements) {
  return $replacements[$match[1]];
};

// Do the replacement
$New_string = preg_replace_callback($expr, $callback, $string); 
```

# logging - 如何在 c++ xe2 上安装 boost log

> ID：12385980
> 
> 赞同：1
> 
> 时间：2012-09-12T10:19:15.800
> 
> 标签：logging, boost, c++builder, c++builder-xe2

我知道 XE2 中有 Boost 库。目前我想添加[Boost Log](http://boost-log.sourceforge.net/libs/log/doc/html/log/tutorial.html)。因为没有关于使用 C++ builder 安装的文档。我只是将相关文件复制到“boost”和“libs”文件夹中（C:\Program Files\Embarcadero\RAD Studio\9.0\include\boost_1_39）。在我添加了`#include <boost/log/trivial.hpp>`. 我看到了很多错误...

是否有任何教程或示例来展示如何安装我可以遵循的 Boost Log？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:57:16.880

C++Builder 只附带了有限的 boost 子集，因为那些没有附带的我们对人们使用来说太成问题了。其中许多不会在运行时编译或失败。我对即将推出的基于 clang 的编译器寄予厚望，它必须具有更好的语言兼容性。

# c++ - zip文件可以稀疏/不连续吗？

> ID：12385984
> 
> 赞同：6
> 
> 时间：2012-09-12T10:19:23.553
> 
> 标签：c++, c, compression, zip, archive

zip 文件格式以中央目录部分结尾，然后指向文件中的各个 zip 条目。这似乎允许 zip 条目出现在 zip 文件本身的任何位置。事实上，自解压 zip 文件就是一个很好的例子：它们以可执行文件开头，所有 zip 条目都出现在可执行字节之后。

问题是：**zip 文件格式真的允许稀疏或不连续的 zip 条目吗？**例如，zip 条目之间是否存在空字节或其他未计入字节？最终的 PK 说明和维基百科文章似乎都允许这样做。所有/大多数典型的 zip 实用程序都可以处理这种稀疏的 zip 文件吗？

用例是这样的：我希望能够删除或替换 zip 文件中的 zip 条目。为此，典型的 minizip 等库希望您复制整个 zip 文件，而不复制已删除或替换的 zip 条目，这看起来既浪费又缓慢。

过度分配不是更好吗，比如说 1.5 倍的条目存储空间，然后在删除或替换条目时，您可以找出未分配字节的位置并直接使用它们？使用 1.5 倍的存储意味着如果 zip 条目线性增长，则重新分配也应该线性摊销。它类似于文件系统块分配，但可能没有那么复杂。

这也有助于许多基于 zip 的文件格式。不必在某个地方（甚至在内存中）有一些临时目录以及用于编辑/更改的临时解压缩文件，然后必须将大量重新压缩回文件格式，这将减少重新压缩和重写部分 zip 的需要文件。

**是否有任何 C/C++ 库可以做到这一点？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T17:40:27.763

不，阅读中央目录是可选的。zip 解码器可以（而且有些确实）从头开始顺序读取 zip 文件，期望连续看到本地标头和条目数据。他们可以完成解码工作，甚至从未看过中央目录。

为了做你想做的事，你需要在有用的条目之间放入虚拟的 zip 条目以保留该空间。至少如果您想与 zip 世界的其他部分兼容。

# asp.net - 我们如何在使用 sqlcommand 的 VB.net 代码中处理 MSSQL raiseerror？

> ID：12385985
> 
> 赞同：2
> 
> 时间：2012-09-12T10:19:23.130
> 
> 标签：asp.net, sql-server, vb.net

我编写了一个在相同特定条件下引发错误的存储过程。当我使用 sqlcommand 使用 vb.net 代码调用此存储过程时，我无法捕获 RAISEERROR

**存储过程**

```
Create sp_UPDATE
as 
begin

    IF @QTY > @ReqAlloQty
    BEGIN
         RAISERROR('Product Quantity should not be more than Required qty.',16,1)        
         goto EXITWITHERROR  
    END             

end 
```

**VB.NET**

```
 Try
    m_commDBcommand.ExecuteNonQuery()
 Catch ex As Exception
 Finally
 End Try 
```

匹配存储过程条件时不会引发异常。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:49:28.203

在 raiserror 之后添加一个 return 语句：

```
RAISERROR('Product Quantity should not be more than Required qty.',16,1);
RETURN; 
```

# jsf - 如何设置 bean变量的值？

> ID：12385986
> 
> 赞同：-1
> 
> 时间：2012-09-12T10:19:26.410
> 
> 标签：jsf, jsf-2, selectonemenu

我正在尝试设置`<h:selectOneMenu>`使用 bean setter 的值，但它不起作用。这是我的 .xml 代码：

```
 <h:selectOneMenu value="#{adminActionController.tempBean.selectType}">
      <f:selectItem itemLabel="Check" itemValue="Check" />
      <f:selectItem itemLabel="Cash" itemValue="Cash"/>
      <f:ajax event="change" listener="#{adminActionController.tempBean.changeType}"/>
   </h:selectOneMenu> 
```

这是我的 bean 代码：

```
protected String selectType;

public String getSelectType() {
    return selectType;
}

public void setSelectType(String selectType) {
    this.selectType = selectType;
} 
```

我尝试了很多方法，但仍然缺少一些东西。我不知道是什么。它将`h:inputText`值设置为 bean，但下拉值有问题。有谁能够帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:28:03.883

尝试不使用 immediate="true"。并且 selectOneMenu 必须在 h:form 内。当 selectOneMenu 更改时，您的侦听器正在工作，对吗？

# c++ - 为什么程序看不到全局变量？

> ID：12385987
> 
> 赞同：0
> 
> 时间：2012-09-12T10:19:32.683
> 
> 标签：c++, priority-queue

在我的代码中，程序不能变量 n，我很惊讶为什么会发生这种情况？

```
#include<iostream>
#include<vector>
using namespace std;
int d=3;
int n=12;

template<class T>
class pqi
{
    vector<int>pq;
    vector<int>qp;
    vector<T>&a(n);
    void exch(int i,int j)
    {
        int t=pq[i];
        pq[i]=pq[j];
        pq[j]=t;
        qp[pq[i]]=i;
        qp[pq[j]]=j;
    }
    void fixup(int k)
    {
        while(k>1 && a[pq[(k+d-2)/d]]>qp[pq[k]])
        {
            exch(k,(k+d-2)/d);k=(k+d-2)/d;
        }
    }
    void fixdown(int k,int n)
    {
        int j;
        while((j=d*(k-1)+2)<=n)
        {
            for(int i=j+1;i<j+d&& i<=n;i++)
                if(a[pq[j]]>a[pq[i]]) j=i;
            if(!(a[pq[k]]>a[pq[j]])) break;
            exch(k,j);k=j;
        }
    }
public:
    pqi(int n,const vector<T>&a,int d=3):a(a),pq(n+1,0),qp(n+1,0),n(0),d(d){}
    int empty() const
    {
        return n==0;
    }
    void insert(int v)
    {
        pq[++n]=v ;
        qp[v]=n;
        fixup(n);
    }
    int getmin()
    {
        exch(1,n);
        fixdown(1,n-1);
        return pq[--n];
    }
    void lower(int k)
    {
        fixup(qp[k]);
    }
};
int main()
{
    vector<int>s(n);
    pqi<int>a(n,s,d);
    for(int i=0;i<12;i++)
        a.insert(rand()%(RAND_MAX+i));
    while(!a.empty())
    {
        cout<<a.getmin()<<"  ";;
    }

    return 0;
} 
```

我已经在代码之外声明为全局变量，但它可以看到它并说

```
1>c:\users\\documents\visual studio 2012\projects\multiway_heap\multiway_heap\multiway_heap.cpp(12): error C2061: syntax error : identifier 'n'
1>          c:\users\\documents\visual studio 2012\projects\multiway_heap\multiway_heap\multiway_heap.cpp(62) : see reference to class template instantiation 'pqi<T>' being compiled
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

真的我无法理解这种行为，请帮助我澄清我做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:21:30.290

```
 vector<T>&a(n); 
```

这应该*是*什么？你试图……什么？这既不是变量声明，也不是函数声明——即使是其中任何一个，`n`也不会有任何位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T10:27:58.077

问题是

```
vector<T>&a(n); 
```

不是初始化成员变量的正确方法。您应该为此使用构造函数。但是，我可以看到两个似是而非的版本：

1.  您实际上的意思是`vector<T> a;`，即不是对向量的*引用。*在这种情况下，您可以使用整数初始化变量，例如

    pqi::pqi() : a( n ) { }

2.  您*确实*需要对向量的引用-在这种情况下，您需要使用可以传递给构造函数的另一个向量（引用不能反弹，只能初始化）对其进行初始化，例如

    pqi::pqi( std::vector &v ) : a( v ) { }

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T10:25:58.507

```
vector<T>&a(n); 
```

不知道你想用这个做什么，但看起来你试图用大小 n 初始化向量，你不能在构造函数之外做这件事（因为它不是静态的）。

# javascript-events - 如何在javascript中隐藏“for”属性具有特定值的标签标签？

> ID：12385994
> 
> 赞同：0
> 
> 时间：2012-09-12T10:19:50.547
> 
> 标签：javascript-events, javascript

标签的“for”属性具有单选按钮的 ID。我可以隐藏单选按钮，但不能隐藏标签。我怎样才能隐藏标签。？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:25:20.333

如果你使用 jQuery：

```
$('#radio_btn').hide();
$('label[for="radio_btn"]').hide(); 
```

或使用不同的标记：

HTML：

```
<label for="radio"><input type="radio" id="radio"> Radio</label>​ 
```

JS：

```
$('label[for="radio"]').hide(); 
```

# java - 如何使用java将自动增量功能设置为pdf文件？

> ID：12385995
> 
> 赞同：0
> 
> 时间：2012-09-12T10:19:55.503
> 
> 标签：java, pdf, pdfbox

我有在 PDF 文件中生成表格的 Java 代码，但即使需要更多字段，它也无法生成多个页面。

如何为页面添加自动增量功能？

这是我所指的代码。

```
public static void main(String[] args) {
    PDDocument doc = new PDDocument();
    PDPage page = new PDPage();
    doc.addPage(page);
    PDPageContentStream contentStream = new PDPageContentStream(doc, page);
    String[][] content = { { "a", "b", "1" }, { "c", "d", "2" },
            { "e", "f", "3" }, { "g", "h", "4" }, { "i", "j", "5" } };
    drawTable(page, contentStream, 700, 100, content);
    contentStream.close();
    doc.save("test.pdf");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T00:12:06.113

这段特定代码的问题在于您将单个页面传递给该`drawTable`方法。您必须在调用`drawTable`main 方法之前计算是否需要多个页面并在那里创建页面。如果需要多个页面，这可能需要对该方法进行一些细微的修改，`drawTable`以接受一个 PDPage 列表而不是单个 PDPage。所以方法`drawTable`实现了，没有办法自动处理它，但是用一点数学应该是可以完成的。

# c# - 通过使用 LINQ 在对象列表中分组来执行聚合

> ID：12385999
> 
> 赞同：2
> 
> 时间：2012-09-12T10:20:12.810
> 
> 标签：c#, .net, linq, object, linq-to-objects

我需要通过基于另一个属性对对象进行分组来计算对象列表中某个属性的聚合。例如，我有一个包含 5 个对象的列表，如下所示：

```
list<cls> Objlist = new list<cls>();

 Obj1.Name="earth";
 Obj1.Value = 10;
 objlist.add(Obj1);

 Obj2.Name="sun";
 Obj2.value = 15;
 objlist.add(Obj2);

 Obj3.Name = "earth";
 Obj3.Value = 25;
 objlist.add(Obj3);

 Obj4.Name = "earth";
 Obj4.Value = 35;
 objlist.add(Obj4);

 Obj5.Name="sun";
 Obj5.value = 50;
 objlist.add(Obj5); 
```

我需要的是另一个列表来获得地球和太阳对象的平均值。如何使用 LINQ 来完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:25:47.957

[`Average`](http://msdn.microsoft.com/en-us/library/bb338413.aspx)是您从 LINQ 中需要的，首先`GroupBy`用于分组`Name`：

```
var result = Objlist.GroupBy(x => x.Name)
            .Select(g => new {
                                 Name = g.Key, 
                                 Value = g.Average(o => o.Value)
                             }); 
```