# StackOverflow 问答 10004000-10004999

# android - 使用 adb forward 而不是 redir

> ID：10004002
> 
> 赞同：0
> 
> 时间：2012-04-04T01:53:51.190
> 
> 标签：android, networking, adb, forward, ice

我在 Android 上有一个客户端和一个服务器应用程序（使用 ZeroC - Ice 平台进行通信）。服务器侦听 TCP 端口 10000，客户端使用 TCP 端口 5501（我选择的任意端口号）。

当我远程登录到服务器并运行它时，`redir add tcp:5501 tcp:10000`它运行顺利。

但是，由于我当前的系统设置（通过虚拟机使用 androidx86 二进制文件），我无法再 telnet 到服务器。所以我希望我可以`adb forward`改用。但是，无论我尝试什么端口组合，我都无法让它工作。

如果有人能对这些有所了解，我将不胜感激： - 是否可以远程登录到设备复制或设备？`redir`我在 stackoverflow 上的另一篇文章中读到 telnet 接口仅适用于模拟器 -和有什么区别`adb forward`？我应该如何在服务器上使用 adb 转发来实现`redir tcp:A:B`？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T21:32:01.250

我终于设法让它工作了。多条评论

*   无法通过以太网访问 USB 连接的设备。可以通过无线网络访问它们（假设它们与对方连接到同一网络）
*   VirtualBox 有自己的 NAT 转发。如果没有端口转发，在默认网络配置（即 NAT）下，虚拟设备将无法访问。

我的工作设置如下

*   USB 连接的设备通过无线连接到 PC（找出您 PC 的本地 IP 地址，通常类似于 192.168.1.x）
*   我为 NAT 启用了 VirtualBox 转发。我的选项是 TCP 10000:10000（其中 10000 是任意端口号。注意它应该高于 1024）所以当我的 USB 连接设备在端口 10000 连接到 PC 时，它通过 VirtualBox 的转发转发到虚拟设备.
*   虚拟设备监听 TCP 端口 10000。（我没有指定主机地址以使生活更轻松）
*   如果您收到“NetworkOnMainThread”异常，请使用

    ```
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy); 
    ```

希望这可以帮助某人

# java - 如何在httpget中设置用户名/密码

> ID：10004003
> 
> 赞同：10
> 
> 时间：2012-04-04T01:53:56.790
> 
> 标签：java, httpclient

我使用 Apache HttpComponents 访问 Web 服务，但不知道如何在请求中设置用户/密码，这是我的代码：

```
URI url = new URI(query);
HttpGet httpget = new HttpGet(url);

DefaultHttpClient httpclient = new DefaultHttpClient();
Credentials defaultcreds = new UsernamePasswordCredentials("test", "test");
httpclient.getCredentialsProvider().setCredentials(new AuthScope(HOST, AuthScope.ANY_PORT), defaultcreds);

HttpResponse response = httpclient.execute(httpget); 
```

..

但它仍然得到 401 未经授权的错误。

```
HTTP/1.1 401 Unauthorized [Server: Apache-Coyote/1.1, Pragma: No-cache, Cache-Control: no-cache, Expires: Wed, 31 Dec 1969 16:00:00 PST, WWW-Authenticate: Basic realm="MemoryRealm", Content-Type: text/html;charset=utf-8, Content-Length: 954, Date: Wed, 04 Apr 2012 02:28:49 GMT] 
```

我不确定它是否设置用户/密码的正确方法？有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T05:00:14.807

我认为你在正确的轨道上。也许您应该检查您的用户凭据，因为 http[错误响应](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.2)可能意味着用户名/密码不正确，或者用户没有访问资源的权限。我有以下代码，我进行基本的 http 身份验证，它工作正常。

```
import org.apache.http.HttpResponse;
import org.apache.http.auth.AuthScope;
import org.apache.http.auth.UsernamePasswordCredentials;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

public class Authentication
{

    public static void main(String[] args)
    {

        DefaultHttpClient dhttpclient = new DefaultHttpClient();

        String username = "abc";
        String password = "def";
        String host = "abc.example.com";
        String uri = "http://abc.example.com/protected";

        try
        {
            dhttpclient.getCredentialsProvider().setCredentials(new AuthScope(host, AuthScope.ANY_PORT), new UsernamePasswordCredentials(username, password));
            HttpGet dhttpget = new HttpGet(uri);

            System.out.println("executing request " + dhttpget.getRequestLine());
            HttpResponse dresponse = dhttpclient.execute(dhttpget);

            System.out.println(dresponse.getStatusLine()    );
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
        finally
        {
            dhttpclient.getConnectionManager().shutdown();
        }

    }

} 
```

# java - 调用 SmartCardReader.openSession() 时出现 net.rim.device.api.smartcad.SmartCardNoCardPresentException

> ID：10004004
> 
> 赞同：0
> 
> 时间：2012-04-04T01:54:06.130
> 
> 标签：java, blackberry, smartphone, sim-card, smartcard-reader

我需要用智能手机上的 SIM 卡交换 APDU。

我使用我的运营商（Rogers）的 SIM 卡做了一个小测试功能来尝试这个。

```
SmartCardReader[] allReaders = SmartCardReaderFactory.getInstalledReaders();
for( int readerIndex = 0; readerIndex < allReaders.length; ++readerIndex) {
    try {
        SmartCardReaderSession session = allReaders[readerIndex].openSession();
    }
    catch( Exception e ) {
        System.err.println( e.toString() );
    }
} 
```

但我不断收到 SmartCardNoCardPresentException 异常。

显然，SIM 卡存在，（我可以用它来拨打电话）但 isSmartCardPresent() 返回 false。

请注意，我没有在模拟器上运行它，它只在真手机上“工作”。我使用 Torch 9810 作为目标。

另请注意，我已经签署了我的申请。

任何提示/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:46:36.360

我认为对黑莓智能卡读卡器的概念存在误解。

您假设 sim-card 是智能卡，并且安装的 sim-card 必须被识别为智能卡。但事实并非如此。

在此处阅读更多信息：[BlackBerry 智能卡读卡器](http://us.blackberry.com/ataglance/security/products/smartcardreader/)

# seo - 站点地图是否需要覆盖整个站点？

> ID：10004005
> 
> 赞同：0
> 
> 时间：2012-04-04T01:54:26.773
> 
> 标签：seo, sitemap

站点地图是否需要覆盖整个站点？

如果我有一个指向网站上所有最重要视图的站点地图链接，我应该期望该网站上的所有第一个子页面都应该在没有明确定义的情况下被抓取，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T02:05:09.983

您可能希望站点地图上的页面链接到的所有 URL 都被[抓取](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=70897#E)，但我仍然建议将它们包含在站点地图中，因为它[提供了元数据](http://www.sitemaps.org/index.html)。请记住，[页面在站点地图中的位置并不重要](http://www.sitemaps.org/faq.html#faq_url_position)。如果您有很多页面并且想自己整理一些东西，您可以[将地图拆分为多个文件](http://www.sitemaps.org/protocol.html#index)。[`priority`](http://www.sitemaps.org/protocol.html#prioritydef)否则，最明智的做法可能是让爬虫使用该属性来确定哪些页面更重要。

# c++ - VS2005 和 VS2008 的并排清单问题

> ID：10004006
> 
> 赞同：2
> 
> 时间：2012-04-04T01:54:29.257
> 
> 标签：c++, visual-studio-2008, visual-studio-2005, manifest, side-by-side

我有一个在 VS2008 中构建的 C++ 项目。该项目还链接到使用 VS2005 构建的库（DLL + Import lib），从而加载 VS2005 调试 CRT 库（一切都是调试构建）。

当试图运行这个内置于 VS2008 的可执行文件时，由于 VS2005 DLL 没有找到调试 CRT 库，即使我安装了带有 SP1 的 VS2005，我也会在加载时出错。我也检查了 Windows 更新，所以我不确定我还能做些什么。

我该如何诊断这个问题？我查看了 Windows 中的事件查看器，发现它找不到调试 VC80 CRT 库，但这就是我所知道的。我猜这里的某个地方存在版本不匹配，我只是不知道如何解决它，因为我对这个清单/并排的东西不太了解。

我正在构建的操作系统是 Windows XP 32 位。我安装了 VS2008 SP1 和 VS2005 SP1（所以所有调试清单/CRT dll 都应该可用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T03:29:03.663

学习检查或创建或检查适当的[程序集清单](http://msdn.microsoft.com/en-us/library/f2c0w594%28v=vs.80%29.aspx)。

[完成后，这里有更多信息。](http://msdn.microsoft.com/en-us/library/ms235342%28v=vs.80%29.aspx)

在 Windows XP 上，如果应用程序的本地文件夹中存在外部清单，则操作系统加载程序使用此清单而不是嵌入二进制文件中的清单。在 Windows Server 2003 和更高版本的 Windows 上，情况正好相反——外部清单被忽略，而嵌入的清单在存在时被使用。

# c# - 如何在asp.net（c#）中显示存储在网络上的图像

> ID：10004009
> 
> 赞同：2
> 
> 时间：2012-04-04T01:55:01.980
> 
> 标签：c#, asp.net

如何在 asp.net 中显示存储在网络上的图像（使用 c#）。我希望 img src 是下面给出的：

`\\pgapp\folder\image.jpg`，其中 pgapp 是网络上的共享驱动器。

我正在使用这些代码，但它没有在网页上显示图像。

```
originalImage2.ImageUrl=@"\\pgapp\folder\image.jpg"; 
```

或者

`originalImage2.Attributes["src"]=ResolveUrl(@"\\pgapp\folder\image.jpg")`;

```
<div ID="imgContainer" runat="server" style="width: 400px; height: 400px;  overflow:auto; border: solid 1px black;
                    padding: 10px; margin-bottom: 5px;" >

                    &nbsp;<asp:Image ID="originalImage2" runat="server" />
                </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T01:58:42.043

你会遇到两个问题：

*   浏览器通常不能访问服务器共享（除非它在同一个网络上）。您需要以某种方式通过您的网站公开图像，以便它像[http://myserver/image/image1.jpg一样可见](http://myserver/image/image1.jpg)
*   “NTLM one hop” - 如果您开始通过服务器渲染图像，您的服务器将无法从远程服务器读取文件。你只需要验证你是否有问题并阅读它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-26T11:25:46.903

要在用户 Web 浏览器中显示存储在网络上的图像，请执行以下操作：

将图像转换为 base64 对应并显示：

```
// PhotoId is the network file path and name.
string photoId = "\\Photos\2015-May\390828d1-8f20-4fe9-9287-13d03894e9c0.jpg"

// Call to display the networked images.
lbl_images.Text += "<img src='" + this.PhotoBase64ImgSrc(photoId) + "' height='60px' width='60px' alt='photo' />";

// Supporting function that converts an image to base64.
protected string PhotoBase64ImgSrc(string fileNameandPath)
{
    byte[] byteArray = File.ReadAllBytes(fileNameandPath);
    string base64 = Convert.ToBase64String(byteArray);

    return string.Format("data:image/gif;base64,{0}", base64);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-07T18:37:35.140

如果要显示存储在网络路径中的图像，请在 IIS 中更改以下设置，

1.  导航到 IIS。
2.  导航到站点文件夹中的网站。
3.  选择应用程序网站并导航到右侧的操作菜单，然后单击查看虚拟目录。 [![在此处输入图像描述](../Images/96e421b9015d11960a6eb70333e41ba2.png)](https://i.stack.imgur.com/TkzlS.png)
4.  单击添加虚拟目录并将别名指定为“图像”，将物理路径指定为“网络驱动器路径”。 [![在此处输入图像描述](../Images/e13543cd55f093ead0520007d888c7f9.png)](https://i.stack.imgur.com/42tay.png) [![在此处输入图像描述](../Images/c6c006ac033a16b6c55f3ceb1fddf0bf.png)](https://i.stack.imgur.com/uznou.png)
5.  测试设置并保存。
6.  刷新应用程序池并测试图像是否正在渲染。

# jboss - Jboss 6：通过 JMX 触发 GC

> ID：10004011
> 
> 赞同：1
> 
> 时间：2012-04-04T01:55:37.523
> 
> 标签：jboss, jmx

是否可以通过 JBoss 6 中的 JMX 触发 GC？我的问题是平台 MBean 根本没有发布。我使用 jboss.platform.mbeanserver 启用了 JMX，如下所示：

```
JAVA_OPTS="$JAVA_OPTS -Xrunjdwp:transport=dt_socket,address=9797,server=y,suspend=n"
JAVA_OPTS="$JAVA_OPTS -Djava.util.logging.manager=org.jboss.logmanager.LogManager"
JAVA_OPTS="$JAVA_OPTS -Dorg.jboss.logging.Logger.pluginClass=org.jboss.logging.logmanager.LoggerPluginImpl"
JAVA_OPTS="$JAVA_OPTS -Djavax.management.builder.initial=org.jboss.system.server.jmx.MBeanServerBuilderImpl"
JAVA_OPTS="$JAVA_OPTS -Djboss.platform.mbeanserver"
JAVA_OPTS="$JAVA_OPTS -Dcom.sun.management.jmxremote.port=8007"
JAVA_OPTS="$JAVA_OPTS -Dcom.sun.management.jmxremote.ssl=false"
JAVA_OPTS="$JAVA_OPTS -Dcom.sun.management.jmxremote.authenticate=false"
JAVA_OPTS="$JAVA_OPTS -Djava.rmi.server.hostname=10.69.68.217"
JAVA_OPTS="$JAVA_OPTS -Djboss.boot.server.log.dir=/app/logs/cps/log"
JAVA_OPTS="$JAVA_OPTS -Xbootclasspath/p:/app/jboss6/boot/jboss-logmanager.jar" 
```

一个类似的问题被问到here。 [JBoss JMX twiddle Runtime 未注册](https://stackoverflow.com/questions/6175861/jboss-jmx-twiddle-question)

非常感谢，

李

# symfony - 如何在 security.yml 中使用带盐的密码散列

> ID：10004013
> 
> 赞同：0
> 
> 时间：2012-04-04T01:55:51.563
> 
> 标签：symfony

我需要随机盐来与文件 security.yml 中的用户而不是数据库中的用户进行哈希密码。我需要在“编码器”部分声明什么才能在密码散列中使用盐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:11:26.430

I think you shoud implement your own encoder logic by providing a service

```
services:
   custom_encoder:
       class: Acme\TestBundle\Service\CustomEncoder 
```

It must implement Symfony\Component\Security\Core\Encoder\PasswordEncoderInterface

After that add this class to security.yml

```
security:
   encoders:
      Acme\TestBundle\Entity\User:
         id: custom_encoder 
```

# c++ - C++显式转换和隐式转换

> ID：10004016
> 
> 赞同：1
> 
> 时间：2012-04-04T01:56:20.317
> 
> 标签：c++, oop, class

看下面两种方式来新建一个Y类的对象：

(1)

```
X x;
Y y(x);//explicit conversion 
```

(2)

```
X x;
Y y = x;//implicit conversion 
```

第一种方法使用**显式转换**，另一种使用**隐式转换**。但是，我不太了解它们是如何工作的。它们有什么区别？有人可以为我解释一下吗？越详细越好。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T02:42:32.290

第一个称为*直接初始化*，第二个称为*复制初始化*。假设`Y`有一个接受 a `X`（或引用它）的构造函数，*直接初始化*将直接调用该构造函数，而不管构造函数是否被标记为*隐式*。*复制初始化*在语义上等价于：

```
Y y( implicit_conversion<Y>(x) ); 
```

也就是说，参数通过隐式转换为目标类型进行转换，然后调用复制构造函数来初始化变量。在现实生活中，编译器将删除副本并转换目标变量，但编译器必须检查是否存在从to的*隐式转换*，并且复制构造函数是可访问的。`X``Y`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T02:14:09.663

实际上，假设您的类“Y”具有如下构造函数，则两者都是隐式转换：

```
public:
  Y(X &x) 
```

具有*单个参数*的类构造函数将为您执行转换。

为避免隐式构造，请使用以下其中一种（根据您的情况，一种可能更适合您）：

*   不要用单个参数声明构造函数
*   在构造函数声明中使用`explicit`关键字
*   使用中间类（换句话说，只允许'Y'由'Z'初始化，一个永远不会直接分配给'Y'的类）
*   使用静态成员函数使用“X”显式“制作”一个“Y”的实例（因为该成员函数与该类的实例无关

# ruby-on-rails - Redis 支持的 Rails 模型

> ID：10004023
> 
> 赞同：6
> 
> 时间：2012-04-04T01:57:34.977
> 
> 标签：ruby-on-rails, ruby, redis

我正在寻找可以将整个基于 Rails 的模型存储在 Redis 中的东西。这里有 Redis Objects[https://github.com/nateware/redis-objects](https://github.com/nateware/redis-objects)可以找到 Redis 对象，但仅当您的模型已经由 ActiveRecord 之类的东西支持并且它需要唯一的 id 生成器时才有效。我不希望创建一个 ActiveRecord 支持的模型，因为我想将所有内容直接保存到内存中而不是数据库中。

是否有一个我现在可以使用的工具，可以让我执行以下操作：

`RedisBackedModel.find_by_name('foo')`

它会从 Redis 中检索 RedisBackedModel 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T03:05:11.020

我以前使用[Ohm](https://github.com/soveran/ohm)来存储几个小时后过期的搜索；这很不错。我认为 DataMapper 也有一个[redis 适配器](https://github.com/whoahbot/dm-redis-adapter)，尽管我从未使用过它。这是我认为您所追求的一些欧姆代码：

```
class RedisBackedModel < Ohm::Model
  attribute :name
  index :name
end

rbm = RedisBackedModel.create :name => "foo"
rbm.id # => 1

# Search by name:
RedisBackedModel.find(:name => "foo")

# Search by id (like AR-style model.get(id)):
RedisBackedModel[1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-12T17:34:56.307

我认为[莫迪斯](https://github.com/rpush/modis)正是这样做的。

# subroutine - GAMBAS - 在 IF 语句中退出 Sub

> ID：10004025
> 
> 赞同：0
> 
> 时间：2012-04-04T01:57:53.123
> 
> 标签：subroutine, basic, gambas

我有一个复选框，应该触发按钮是否可见。下面是代码：

```
PUBLIC SUB chkGiveUp_Click()

  ' Check to see if the Give Up button's visible property is set to true, and if it is, hide the button. If it is hidden, show it again.
IF btnClearAnswer.Visible THEN
  btnGiveUp.Visible = FALSE
  RETURN  
END IF

IF btnGiveUp.Visible = FALSE THEN 
  btnGiveUp.visible = TRUE
  RETURN 
END IF

END 
```

但是，它没有正确退出子程序，因此如果与另一个相矛盾。这样做的正确方法是什么？我是从 VB6 转移过来的初学者 gambas 程序员。我在 Ubuntu 11.10 上运行 gambas2，项目类型是图形应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T08:30:19.413

我认为如果你把“return”放在“end if”之后，它可能会按照你想要的方式工作......

否则，

```
IF btnClearAnswer.Visible THEN
 btnGiveUp.Visible = FALSE

Else btnGiveUp.Visible = FALSE THEN 
btnGiveUp.visible = TRUE

END IF
RETURN 
```

不过，您必须仔细检查我的命令名称，因为我不知道 GAMBAS...但是这些语言都足够相似，我可以看到问题...通过两个语句都只是“IF”...它们都在运行......（检查并确保“RETURN”也是正确的命令......某些语言使用“RET”）如果它是我的程序并且不起作用我会切换到一个选择案例

# jquery - 第一次单击时未捕获 MVC3 和 JQuery AJAX 更改事件

> ID：10004028
> 
> 赞同：1
> 
> 时间：2012-04-04T01:58:19.393
> 
> 标签：jquery, ajax, asp.net-mvc-3, razor

我正在使用 Razor 语法开发 MVC3 应用程序，但我在使用 AJAX 时遇到了一些问题。

问题如下：我有一个`DropDownList`这样定义的类别：

```
 @Html.DropDownList("category_1", 
                 new   SelectList(LocalRuckusMVC.Code.StaticDictionaries.BusinessCategories,                                      
   "Value", "Text"), "Please Select A Category") 
```

当用户选择一个类别时，应用程序向服务器发出 AJAX 请求，以获取所选类别的适当子类别列表。

jquery 的设置如下：

```
$('#category_1').change(function () {
    $('#category_1').cascade({
        url: '@Url.Action("GetSubCats")',
        paramName: 'category_id',
        childSelect: $("#subCategory_1")
    });
}); 
```

和级联 jquery 扩展：

```
 (function (jQuery) {
    $.fn.cascade = function (options) {
        var defaults = {};
        var opts = $.extend(defaults, options);

        return this.each(function () {
            jQuery(this).change(function () {
                var selectedValue = jQuery(this).val();
                var params = {};
                params[opts.paramName] = selectedValue;
                jQuery.getJSON(opts.url, params, function (items) {
                    var options = opts.childSelect.options;

                    opts.childSelect.empty();
                    window.console.log(params);
                    window.console.log(items);
                    jQuery.each(items, function (index, item) {
                        //window.console.log(index);
                        window.console.log(opts.childSelect);
                        window.console.log(item.Value);

                        var html = '<option value=\'' + item.Value + '\' >' + item.Text +    
                                     '</option>';
                        opts.childSelect.append(html);
                        window.console.log(html);

                    });
                });
            });
        });
    };
})(jQuery); 
```

就 AJAX 而言，一切正常，我得到了正确的响应，问题是用户必须在发出 AJAX 请求之前两次选择不同的类别。

我已经使用 firebug 和 fiddler 进行了广泛的调试，并且在第一次选择类别时不会触发 change 事件，或者至少在查看 firebug 或 chrome 开发控制台时它似乎不会触发。

有人有什么想法吗？？

非常感谢所有帮助。

糟糕，忘记添加此 jquery 方法更新的 html 选择，所以这里是：

```
 <select id="subCategory_1" name="subCategory_1">
                </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T02:39:23.820

啊哈，我认为这是因为您在现有更改事件之上定义了另一个 jQuery(this).change 事件。

这是原始的更改事件

```
$('#category_1').change(function () { 
```

然后在您拥有的辅助函数中

```
jQuery(this).change(function () { 
```

我认为这是断言；仅在其更改并且选择未再次更改以触发该代码时才运行以下代码。

试试下面的修订版。

```
$.fn.cascade = function (options) {
    var defaults = {};
    var opts = $.extend(defaults, options);

    return this.each(function () {
            var selectedValue = jQuery(this).val();
            var params = {};
            params[opts.paramName] = selectedValue;
            jQuery.getJSON(opts.url, params, function (items) {
                opts.childSelect.empty();
                window.console.log(params);
                window.console.log(items);
                jQuery.each(items, function (index, item) {
                    //window.console.log(index);
                    window.console.log(opts.childSelect);
                    window.console.log(item.Value);

                    var html = '<option value=\'' + item.Value + '\' >' + item.Text +
                                     '</option>';
                    opts.childSelect.append(html);
                    window.console.log(html);
                });
            });

    });
}; 
```

在你的代码中你也有

```
var options = opts.childSelect.options; 
```

this 与 the 同名`function(options)`，变量未使用！！所以我把它拿出来:-)我已经测试过它，它在第一次选择时对我有用，希望它有所帮助。

# ruby-on-rails - Rails 3.2.2 Facebook 应用程序使用 Devise 和 Omniauth 在用户权限确认时重定向到 iframe

> ID：10004038
> 
> 赞同：0
> 
> 时间：2012-04-04T02:00:15.833
> 
> 标签：ruby-on-rails, facebook, omniauth, ruby-on-rails-3.2

Heroku 使用 Devise 和 Omniauth 托管 Rails 3.2.2 应用程序。

我目前在打开应用程序时通过帖子获取 facebook 用户 ID。如果用户存在，我会自动将他们登录，并且一切正常。如果他们不这样做，我会将他们重定向到

```
user_omniauth_authorize_path(:facebook) 
```

其中获得“/users/auth/facebook” - 和 Facebook 的“权限请求”对话框。如果用户接受，OmniauthCallbacksController#facebook 会被调用，这会让用户登录并将他们重定向到应用程序的主页。但在最后一次重定向中，他们被重定向到 Facebook iframe 之外。

我不知道为什么这会让我离开 iframe。有什么建议么？

小修正，我不要求新用户自动认证。在被要求获得许可之前，他们必须按下一个按钮才能与该网站互动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:37:41.430

在您的 omniauth.rb 初始化程序中，放入

`OmniAuth.config.full_host = "http://apps.facebook.com/canvas_url/"`

如果我没记错的话，尾随 / 是必要的。

这应该让您保持在 Facebook 框架内。

# html - CSS Float填充div之间的空白

> ID：10004039
> 
> 赞同：0
> 
> 时间：2012-04-04T02:00:17.037
> 
> 标签：html, css, css-float

我有一些想要展示的元素。但遗憾的是，它并没有按照我想要的方式工作。

这是它的工作原理：http: [//jsfiddle.net/lukasoppermann/H3Nmg/7/](http://jsfiddle.net/lukasoppermann/H3Nmg/7/)

我想要它，以便红色框填充绿色框和左侧之间的空间。它需要是动态的。容器的宽度可能会改变，元素的顺序可能会不同。

我当然更喜欢纯 CSS 的方式，但 js 也很好。有没有人有任何提示？

// 编辑澄清一下，元素不能硬编码或向右浮动，因为元素的数量、包装器的宽度以及绿色元素的数量可能会有所不同。元素的顺序也可以变化。我基本上需要元素在没有任何整体的情况下自动排列。

这就是我想要的。

[http://img526.imageshack.us/img526/613/boxsorting.jpg](http://img526.imageshack.us/img526/613/boxsorting.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T02:04:21.933

`float:right`用`row-two`div怎么样？如果需要，您可能必须修复填充以使绿色更接近红色。在这里演示[http://jsfiddle.net/H3Nmg/9/](http://jsfiddle.net/H3Nmg/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T02:12:12.863

它应该看起来像这样[http://jsfiddle.net/H3Nmg/14/](http://jsfiddle.net/H3Nmg/14/)

减去硬编码的宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T03:44:58.303

查看代码和演示的小提琴

小提琴：http: [//jsfiddle.net/H3Nmg/20/](http://jsfiddle.net/H3Nmg/20/)

演示：http: [//jsfiddle.net/H3Nmg/20/embedded/result/](http://jsfiddle.net/H3Nmg/20/embedded/result/)

注意：尝试减小容器 div 的窗口大小或宽度，您将看到 case 和 case 输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T04:30:29.667

嗨，您可以像这样定义三个 div

**css**

```
.container{
    float:left;
    margin-left:10px;
}
.top{
    width:100px;
    height:100px;
    background:red;
}

.middle{
    width:100px;
    height:100px;
    background:darkred;
    margin-top:5px;
}
.right{
    width:100px;
    height:200px;
    background:lightgreen;
    float:left;
    margin-left:10px;
}

.bottom{
    float:left;
    width:100px;
    height:100px;
    background:green;
    margin-left:10px;
} 
```

**HTML**

```
<div class="container">
    <div class="top"></div>
    <div class="middle"></div>
</div>

<div class="right"></div>

<div class="bottom"></div>
​ 
```

现场演示[http://jsfiddle.net/rohitazad/wyvrt/1/](http://jsfiddle.net/rohitazad/wyvrt/1/) ​</p>

# ruby - 元编程 Ruby：在 class_eval 中定义继承

> ID：10004045
> 
> 赞同：0
> 
> 时间：2012-04-04T02:01:32.807
> 
> 标签：ruby, metaprogramming

我想使用 class_eval 扩展某些类的功能。我想强制类从其他类继承一些方法。

IE：

```
SomeClass.class_eval do
  # force inheritence from some other class
end 
```

实现它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:23:45.200

如果在这里覆盖现有功能是一项硬性要求，您需要在包含的模块中定义这些现有方法。

```
class SomeClass
  include DefaultBehaviour
end

module DefaultBehaviour
  def run
    puts "ran default"
  end
end

module AlternateBehaviour
  def run
    puts "ran alternate"
  end
end

SomeClass.class_eval {
  include AlternateBehaviour
}

SomeClass.new.run #=> "ran alternate" 
```

原因是因为 ruby​​ 的方法查找路径。

它从 SomeClass -> Object 开始。

当您包含 AlternateBehaviour 时，它变为 SomeClass -> AlternateBehaviour -> Object。所以直接在 SomeClass 上定义的方法仍然优先。

但是，如果在 DefaultBehaviour 上定义了这些方法，则查找路径将变为 SomeClass -> AlternateBehaviour -> DefaultBehaviour -> Object，因此您的替代方法优先。最近包含的模块是最高优先级的。

在您无法控制原始类的情况下，您可以改为：

```
module AlternateBehaviour
  def self.included(base)
    base.send(:remove_method, :run)
  end

  def run
    puts "ran alternate"
  end
end 
```

虽然在这一点上，人们开始怀疑你是否可以通过做

```
SomeClass.class_eval {
  def run
    "ran alternate"
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T02:08:11.150

尝试使用`include`and `extend`，这里都解释[了](http://railstips.org/blog/archives/2009/05/15/include-vs-extend-in-ruby/)。它们仅适用于模块；在 Ruby 中创建一个类之后，您就*不能*修改/添加它的超类。

只有一个问题：你不能覆盖一个类中已经存在的方法来解释这篇文章的第三条评论。

另请参阅[此](https://stackoverflow.com/questions/1337439/set-class-inheritance-after-class-delcaration-or-setting-class-inheritance-on-co)主题以获取更多信息。

# php - PHP使用前缀标签链接文本

> ID：10004047
> 
> 赞同：0
> 
> 时间：2012-04-04T02:01:49.707
> 
> 标签：php, regex

我正在尝试编写一个供我个人使用的代码库，并且我正在尝试提出一个链接 URL 和邮件链接的解决方案。我最初打算使用正则表达式将 URL 和邮件地址转换为链接，但担心覆盖所有基础。所以我目前的想法可能是使用这样的某种标签系统：

l:www.google.com 变成[http://www.google.com](http://www.google.com/)并且 m:john.doe@domain.com 变成 john.doe@domain.com。

您如何看待这个解决方案，您能协助表达吗？（正则表达式不是我的强项）。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T02:24:33.100

也许像这样的一些正则表达式：

```
$content = "l:www.google.com some text m:john.doe@domain.com some text";
$pattern = '/([a-z])\:([^\s]+)/'; // One caracter followed by ':' and everything who goes next to the ':' which is not a space or tab
if (preg_match_all($pattern, $content, $results))
{
    foreach ($results[0] as $key => $result)
    {
        // $result is the whole matched expression like 'l:www.google.com'
        $letter = $results[1][$key];
        $content = $results[2][$key];

        echo $letter . ' ' . $content . '<br/>';
        // You can put str_replace here
    }
} 
```

# skype4py - 我可以使用 skype4py 将 SMS 消息的电话号码发送到 Skype 号码吗？

> ID：10004054
> 
> 赞同：0
> 
> 时间：2012-04-04T02:02:44.667
> 
> 标签：skype4py

使用 skype4py 包装器，我可以从短信中获取电话号码到我的 Skype 号码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:42:12.900

Skype4Py 中的 SMS 对象 API

[https://github.com/stigkj/Skype4Py/blob/master/Skype4Py/sms.py](https://github.com/stigkj/Skype4Py/blob/master/Skype4Py/sms.py)

看起来有`ReplyToNumber`。

我建议你用它来推动你的运气。

# java - Java 的 Jersey、RESTful API 和 JSONP

> ID：10004060
> 
> 赞同：4
> 
> 时间：2012-04-04T02:04:13.427
> 
> 标签：java, json, jsonp, jersey

之前一定已经回答过了，但是我的谷歌电源今天关闭了，我一直在努力解决这个问题。我们正在从旧的 PHP 基础迁移到基于 Jersey 的 JVM 堆栈，它最终将提供一个可以从许多应用程序中使用的基于 JSON 的 RESTful API。到目前为止，一切都非常好，我们喜欢简单的 POJO 到 JSON 的转换。但是，我们正在处理跨域 JSON 请求中的困难。我们基本上所有的响应都返回 JSON（使用 @Produces("application/json") 和 com.sun.jersey.api.json.POJOMappingFeature 设置为 true）但是为了支持 JSONP，我们需要更改我们的方法以返回一个JSONWithPadding 的实例。这当然也需要我们为每个方法添加一个@QueryParam("callback") 参数，这基本上会重复我们的工作，根据请求中是否有回调参数，导致需要两个方法以相同的数据响应。显然，这不是我们想要的。

所以我们基本上尝试了几种不同的选择。作为泽西岛的新手，我相信这个问题已经解决了。我从几个地方读到我可以编写请求过滤器或者我可以扩展 JSON Provider。我理想的解决方案是不对我们的数据或逻辑层产生影响，而是有一些代码说“如果有回调参数，则用回调包围 JSON，否则只返回 JSON”。在这里找到了一个解决方案：http: [//jersey.576304.n2.nabble.com/JsonP-without-using-JSONWithPadding-td7015082.html](http://jersey.576304.n2.nabble.com/JsonP-without-using-JSONWithPadding-td7015082.html)

但是，该解决方案扩展了 Jackson JSON 对象，而不是默认的 JSON 提供程序。

最佳实践是什么？如果我在正确的轨道上，我可以扩展的默认 JSON 过滤器的类是什么？是否需要任何额外的配置？我完全偏离轨道了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T19:43:56.563

如果您的所有资源方法都返回 JSONWithPadding 对象，那么 Jersey 会根据请求的媒体类型自动确定它是否应该返回 JSON（即仅由它包裹的对象）或回调 - 即客户端请求的媒体类型是否为application/javascript、application/x-javascript、text/ecmascript、application/ecmascript 或 text/jscript 中的任何一个，然后 Jersey 返回被回调包裹的对象。如果请求的媒体类型是 application/json，Jersey 返回 JSON 对象（即不使用回调包装它）。因此，实现这项工作的一种方法是让您的资源方法生成上述所有媒体类型（包括 application/json），始终返回 JSONWithPadding 并让 Jersey 弄清楚该做什么。

如果这对您不起作用，请告诉我们为什么它不涵盖您的用例（在 jersey.java.net 的用户处）。无论如何，在这种情况下，您可以使用 ContainerRequest/ResponseFilters。在请求过滤器中，您可以以任何方式修改请求标头（例如调整接受标头）以确保它匹配正确的资源方法。然后在响应过滤器中，您可以使用 JSONWithPadding 包装响应实体，具体取决于回调查询参数是否可用并调整内容类型标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:42:21.200

所以我最终最终做的（在 Martin 的伟大响应到来之前）是创建一个过滤器和一个 ResponseWrapper 来拦截输出。代码的基础位于[http://docs.oracle.com/cd/B31017_01/web.1013/b28959/filters.htm](http://docs.oracle.com/cd/B31017_01/web.1013/b28959/filters.htm)

本质上，过滤器检查回调参数是否存在。如果是这样，它会将回调添加到输出的 JSON 并在末尾附加 )。这在我们的测试中非常有用，尽管它还没有被强化。虽然我希望 Jersey 能够自动处理它，但我无法让它正确地与 jQuery 一起工作（可能是我这边的东西，而不是 Jersey 的问题）。我们有预先存在的 jQuery 调用，我们正在更改 URL 以查看新的 Jersey Server，如果我们不这样做，我们真的不想进入每个 $.ajax 调用来更改调用中的任何标题或内容类型不得不。

除了小问题之外，泽西岛的合作非常愉快！

# servlets - Web应用程序需要死锁

> ID：10004063
> 
> 赞同：0
> 
> 时间：2012-04-04T02:05:08.823
> 
> 标签：servlets, deadlock

出于某种原因，我想检查 Web 应用程序中的死锁是如何发生的，所以我使用了下面的代码，但是当我部署 Web 应用程序并对其进行测试时，我并没有陷入死锁情况！任何帮助

```
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.ServletException;
import java.util.ArrayList;
import java.io.IOException;
import java.io.PrintWriter;

public class DeadLockServlet extends HttpServlet
{
public static ArrayList student = new ArrayList();
public static ArrayList employee = new ArrayList();
PrintWriter out;

@Override
protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
    String lsAction = request.getParameter("action");
    String lsValue = request.getParameter("data");

    out = response.getWriter();
    String msg = "";
    if (lsAction != null)
    {
        if (lsAction.equals("addStudent"))
        {
            addStudent(lsValue);
            msg = "Student added: "+lsValue;
        }
        else if (lsAction.equals("addEmployee"))
        {
            addEmployee(lsValue);
            msg = "Employee added: "+lsValue;
        }
    }
    else
    {
        msg = "Invalid Request";
    }

    request.setAttribute("msg", msg);
    request.setAttribute("student", student);
    request.setAttribute("employee", employee);
    request.getRequestDispatcher("index.jsp").forward(request, response);
}

public void addStudent(String lsValue)
{
    synchronized (employee)
    {
        synchronized (student)
        {
            if (lsValue != null && !lsValue.equals(""))
            {
                student.add(lsValue);
            }
        }
    }
}

public void addEmployee(String lsValue)
{

    synchronized (student)
    {
        synchronized (employee)
        {

            if (lsValue != null && !lsValue.equals(""))
            {
                employee.add(lsValue);
            }

        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T00:47:32.687

虽然你的锁排序会导致死锁，但它需要准确的时间。如果不在调试器中运行该 Web 服务器并单步执行代码，我认为您不可能做到这一点。

如果您不想或不能这样做，请在 addStudent 和 addEmployee 的两个同步块之间添加足够长的睡眠时间。说，每个1分钟。然后大约同时从两个客户端访问 servlet，一个执行 addStudent，另一个执行 addEmployee。

'student' 请求处理线程将获得 'employee' 锁，然后坐下来稍等。'employee' 请求处理线程将获得 'student' 锁，然后坐下来等待。然后其中一个会醒来，并尝试抓住另一个锁，而另一个线程会做相反的事情，然后：死锁。

add*** 方法应该改成这样：

```
public void addStudent(String lsValue)
{
    synchronized (employee)
    {
        Thread.sleep(60 * 1000);
        synchronized (student)
        {
            if (lsValue != null && !lsValue.equals(""))
            {
                student.add(lsValue);
            }
        }
    }
}

public void addEmployee(String lsValue)
{

    synchronized (student)
    {
        Thread.sleep(60 * 1000);
        synchronized (employee)
        {

            if (lsValue != null && !lsValue.equals(""))
            {
                employee.add(lsValue);
            }
        }
    }
} 
```

显然要避免死锁，但是，嘿，这完全是另一个问题！

# java - Java，用冒号分割输入文件

> ID：10004066
> 
> 赞同：9
> 
> 时间：2012-04-04T02:05:19.303
> 
> 标签：java, parsing, input, split

我想在冒号字符上拆分java中的一些字符串。

字符串的格式为：`Account:Password`.

我想分隔标记：`Account`和`Password`. 最好的方法是什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-04T02:17:16.560

先看欧内斯特弗里德曼希尔的回答。

```
String namepass[] = strLine.split(":"); 
String name = namepass[0]; 
String pass = namepass[1];
// do whatever you want with 'name' and 'pass' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T02:08:10.377

不确定您需要帮助的部分，但请注意，`split()`上面的调用永远不会返回单元素数组以外的任何内容，因为根据定义，当它看到一个字符`readLine()`时会停止。，另一方面，对你来说应该很方便......`\n``split(":")`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T02:12:53.767

您需要使用拆分（“：”）。试试这个-

```
import java.util.ArrayList;
import java.util.List;

class Account {
    String username;
    String password;

    public Account(String username, String password) {
        super();
        this.username = username;
        this.password = password;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

}

class Solution {
    public static void main(String[] args) {
        while(.....){//read till the end of the file
            String input = //each line
            List<Account> accountsList = new ArrayList<Account>();
            String splitValues[] = input.split(":");
            Account account = new Account(splitValues[0], splitValues[1]);
            accountsList.add(account);  
        }
        //perform your operations with accountList
    }
} 
```

希望能帮助到你！

# javascript - CakePHP：通过 AJAX 将当前模型 ID 发送到另一个控制器

> ID：10004069
> 
> 赞同：0
> 
> 时间：2012-04-04T02:05:41.877
> 
> 标签：javascript, ajax, cakephp

所以我在我的编辑视图中......让我们说它是posts/edit/1

该页面加载了一些 Javascript，该 Javascript 进行了 $.get 调用，该调用从同一控制器（posts/foo）上的不同操作中提取数据。

我怎样才能简单地将当前模型的 ID 发送到 AJAX，然后发送到另一个控制器？

在这种情况下，两个动作都在同一个控制器中，但我不确定在这种情况下是否有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T21:45:42.273

如果您只需要从编辑视图中获取 Post ID，则这是您需要的变量：

```
$this->Form->fields['Post.id'] 
```

如果它不是“发布”，只需将其替换为您正在使用的型号名称并尝试获取其 ID。

更新：根据澄清：你是对的；对于您要执行的操作，您需要生成链接或仅在脚本标记中生成唯一 ID，然后以某种方式在包含的脚本中使用该变量。看看[我是如何为 CakePHP 插件做的](https://github.com/srs81/CakePHP-Full-Calendar-Plugin/commit/fecfbf80166a5510c57adc8cccf4f93a2b3c3d17)。快速总结：

1.  像往常一样包含 JS 文件
2.  在控制器的脚本标签中创建一个变量
3.  在包含的 JS 文件中使用该变量

像这样的东西：

```
<script type="text/javascript">
id = '<?php echo $this->Form->fields['Post.id'] ?>;
</script> 
```

然后在您包含的 Javascript 文件中使用此 id 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T02:11:05.730

如果你使用的是 jquery，你可以有这样的东西

```
$(document).ready(function(){
  //ajax call here
}); 
```

问题是，一旦您的文档加载完毕，您只需将此 id 发送给另一个控制器。

我希望这会有所帮助

# objective-c - 正态分布最佳方法

> ID：10004075
> 
> 赞同：1
> 
> 时间：2012-04-04T02:07:32.580
> 
> 标签：objective-c, xcode, algorithm, math

我正在尝试使用布莱克斯科尔斯公式[http://en.wikipedia.org/wiki/Black%E2%80%93Scholes](http://en.wikipedia.org/wiki/Black%E2%80%93Scholes)构建一个简单的程序来为看涨期权定价。我试图找出从正态分布中获取概率的最佳方法。例如，如果我要手动执行此操作，我得到的值为 d1=0.43，而不是在此表中查找 0.43 [http://www.math.unb.ca/~knight/utility/NormTble.htm](http://www.math.unb.ca/~knight/utility/NormTble.htm)并得到值 0.6664。

我相信c或objective-c中没有函数可以找到正态分布。我也在考虑创建一个二维数组并循环遍历，直到找到所需的值。或者，也许我可以用相应的值定义 300 个双精度值并循环遍历这些值，直到得到适当的结果。关于最佳方法的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T02:12:42.883

您需要更清楚地定义您正在寻找的内容。根据您发布的内容，您似乎正在寻找累积分布函数或 P(d < d1)，其中 d1 以标准偏差测量，d 是正态分布：以您的示例为例，如果 d1 = 0.43 则 P(d < d1) = 0.6664。

您想要的函数称为误差函数`erf(x)`，它有一些很好的近似值。

显然`erf(x)`是`math.h`C 中标准的一部分。（不确定objective-c，但我认为它可能也包含它）。

但`erf(x)`不完全是您需要的功能。一般形式 P(d < d1) 可以通过`erf(x)`以下公式计算：

```
P(d<d1) = f(d1,sigma) = (erf(x/sigma/sqrt(2))+1)/2 
```

其中 sigma 是标准差。（在您的情况下，您可以使用 sigma = 1。）

您可以在[Wolfram Alpha](http://www.wolframalpha.com/input/?i=%28erf%280.43/sqrt%282%29%29%2b1%29/2)上对此进行测试，例如： f(0.43,1) = (erf(0.43/sqrt(2))+1)/2 = 0.666402 与您的表匹配。

还有两件事很重要：

1.  如果您正在寻找 d1 较大的 P(d < d1)（绝对值大于大约 3.0 * sigma），那么您真的应该使用互补误差函数`erfc(x) = 1-erf(x)`，它告诉您 P(d < d1) 与 0 的接近程度或 1 而不会遇到数字错误。对于 d1 < -3*sigma，P(d < d1) = (erf(d1/sigma/sqrt(2))+1)/2 = erfc(-d1/sigma/sqrt(2))/2，并且对于d1 > 3*sigma, P(d < d1) = (erf(d1/sigma/sqrt(2))+1)/2 = 1 - erfc(d1/sigma/sqrt(2))/2 -- 但不要实际上并没有计算出来；而是将其保留为 1 - K，其中 K = erfc(d1/sigma/sqrt(2))/2。例如，如果 d1 = 5*sigma，则 P(d < d1) = 1 - 2.866516*10 ^(-7)

2.  If for example your programming environment doesn't have `erf(x)` built into the available libraries, you need a good approximation. (I thought I had an easy one to use but I can't find it and I think it was actually for the inverse error function). I found this [1969 article by W. J. Cody](http://roma.stat.wisc.edu/courses/st771-newton/papers/2004390.pdf) which gives a good approximation for erf(x) if |x| < 0.5, and it's better to use erf(x) = 1 - erfc(x) for |x| > 0.5\. For example, let's say you want erf(0.2) ≈ [0.2227025892105](http://www.wolframalpha.com/input/?i=erf%280.2%29) from Wolfram Alpha; Cody says evaluate with x * R(x²) where R is a rational function you can get from his table.

If I try this in Javascript (coefficients from Table II of the Cody paper):

```
 // use only for |x| <= 0.5
 function erf1(x)
 {
    var y = x*x;
    return x*(3.6767877 - 9.7970565e-2*y)/(3.2584593 + y);
 } 
```

then I get `erf1(0.2) = 0.22270208866303123` which is pretty close, for a 1st-order rational function. Cody gives tables of coefficients for rational functions up to degree 4; here's degree 2:

```
 // use only for |x| <= 0.5
 function erf2(x)
 {
    var y = x*x;
    return x*(21.3853322378 + 1.72227577039*y + 0.316652890658*y*y)
      / (18.9522572415 + 7.8437457083*y + y*y);
 } 
```

which gives you `erf2(0.2) = 0.22270258922638206` which is correct out to 10 decimal places. The Cody paper also gives you similar formulas for erfc(x) where |x| is between 0.5 and 4.0, and a third formula for erfc(x) where |x| > 4.0, and you can check your results with Wolfram Alpha or known erfc(x) tables for accuracy if you like.

Hope this helps!

# android - 如何为 android ndk 安装 libiconv？

> ID：10004077
> 
> 赞同：4
> 
> 时间：2012-04-04T02:07:38.213
> 
> 标签：android, android-ndk, iconv, libiconv

有人可以教我或指点我有关如何为 android 安装 libiconv 的教程吗？我已经在谷歌上搜索了 3 天，但找不到教程或操作方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T02:56:33.023

获取 libiconv 源，并制作一个 Android.mk 生成文件。查看[此站点](http://groups.google.com/group/android-ndk/browse_thread/thread/012d679319e4ea6e?pli=1)以获取针对 libiconv 和 Android 的预先编写的 makefile。获得 Android.mk 文件后，您可以使用 ndk-build 脚本进行构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T15:21:29.497

我的猜测是你在 Android 上不需要 iconv。Android应该到处都是UTF-8，所以应该不需要字符转换。也许在某些情况下，您希望您的应用程序以各种字符集编辑外部文件，这是我能想到的 Android 应用程序需要 iconv 的唯一原因。

因此，与其尝试包含 libiconv，也许您应该更改您正在使用的任何需要 libiconv 的代码，以便在 Android 上运行时不需要它。

# log4j - PreparedStatement 日志记录

> ID：10004078
> 
> 赞同：0
> 
> 时间：2012-04-04T02:07:49.210
> 
> 标签：log4j

我使用 log4j 进行日志记录。我可以通过 Log4j 看到 SQL，如下所示。

这是我使用 jdbcTemplate 访问数据库的 java 源代码。

```
public QnaDTO selectBoard(int articleID) {
        String SQL = 
            "SELECT " +
            "   QA.ARTICLE_ID, " +
            "   QA.EMAIL, " +
            "   QA.TEL, " +
            "   QA.CATEGORY_ID, " +
            "   CG.CATEGORY_NAME, " +
            "   QA.SUBJECT, " +
            "   QA.CONTESTS, " +
            "   QA.WRITER_NAME, " +
            "   QA.WRITER_ID, " +
            "   QA.READCOUNT, " +
            "   QA.ANSWER, " +
            "   QA.FILE_NAME, " +
            "   QA.OPEN_FLG, " +
            "   QA.KTOPEN_FLG, " +
            "   TO_CHAR(QA.WRITE_DAY, 'YYYY.MM.DD') WRITE_DAY, " +
            "   QA.DISPOSAL_FLG " +
            "FROM QNA QA JOIN QNA_CATEGORY_GROUP CG " +
            "ON QA.CATEGORY_ID = CG.CATEGORY_ID " +
            "WHERE QA.ARTICLE_ID = ? ";

        QnaDTO qnaDTO = (QnaDTO) jdbcTemplate.queryForObject(
                SQL,
                new Object[]{articleID}, 
                new RowMapper() {
                    public Object mapRow(ResultSet rs, int rowNum) throws SQLException {
                        QnaDTO qnaDTO = new QnaDTO();
                        qnaDTO.setArticleID(rs.getInt("ARTICLE_ID"));
                        qnaDTO.setCategoryID(rs.getInt("CATEGORY_ID"));
                        qnaDTO.setCategoryName(rs.getString("CATEGORY_NAME"));
                        qnaDTO.setEmail1(rs.getString("EMAIL"));
                        qnaDTO.setTel1(rs.getString("TEL"));
                        qnaDTO.setSubject(rs.getString("SUBJECT"));
                        qnaDTO.setContests(rs.getString("CONTESTS"));
                        qnaDTO.setName(rs.getString("WRITER_NAME"));
                        qnaDTO.setUserID(rs.getString("WRITER_ID"));
                        //
                        qnaDTO.setReadcount(rs.getString("READCOUNT"));
                        qnaDTO.setAnswer(rs.getString("ANSWER"));
                        qnaDTO.setFileName(rs.getString("FILE_NAME"));
                        qnaDTO.setOpenFlg(rs.getString("OPEN_FLG"));
                        qnaDTO.setKtOpenFlg(rs.getString("KTOPEN_FLG"));
                        //
                        qnaDTO.setWriteDay(rs.getString("WRITE_DAY"));
                        qnaDTO.setDisposalFlg(rs.getString("DISPOSAL_FLG"));
                        return qnaDTO;
                    }
                }
            );
            return qnaDTO;
    } 
```

正如你在上面看到的。jdbcTemplate.queryForObject(...) 是真正发送查询并获得一些结果的方法。

**在 jdbcTemplate.queryForObject 内部，最后使用了 logger**

```
public Object query(final String sql, final ResultSetExtractor rse)
    throws DataAccessException
{
    Assert.notNull(sql, "SQL must not be null");
    Assert.notNull(rse, "ResultSetExtractor must not be null");
    if(logger.isDebugEnabled())
        logger.debug("Executing SQL query [" + sql + "]");
    class _cls1QueryStatementCallback
        implements StatementCallback, SqlProvider
    {

        public Object doInStatement(Statement stmt)
            throws SQLException
        {
            ResultSet rs = null;
            Object obj;
            try
            {
                rs = stmt.executeQuery(sql);
                ResultSet rsToUse = rs;
                if(nativeJdbcExtractor != null)
                    rsToUse = nativeJdbcExtractor.getNativeResultSet(rs);
                obj = rse.extractData(rsToUse);
            }
            finally
            {
                JdbcUtils.closeResultSet(rs);
            }
            return obj;
        }

        public String getSql()
        {
            return sql;
        }

        _cls1QueryStatementCallback()
        {
            super();
        }
    }

    return execute(new _cls1QueryStatementCallback());
} 
```

但有了上述来源，我只能用 ? 获得 SQL。我想要的是我的结果没有问号**？** 是填充的意思吗？用真实数据。

有没有办法做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:40:35.137

全，对不起，忙于工作。:-) 无论如何，我已经查看了您的代码并使用 spring 2.5 在此处复制。我也谷歌，我想你想阅读[这个](http://ramblingabout.wordpress.com/2007/01/03/logging-sql-queries-with-spring/)和[这个](https://stackoverflow.com/questions/1932208/seeing-the-underlying-sql-in-the-spring-jdbctemplate)进一步了解。

从官方[文档](http://static.springsource.org/spring/docs/2.5.x/reference/jdbc.html)，

> 最后，该类发出的所有 SQL 都记录在与模板实例的全限定类名（通常为 JdbcTemplate，但如果 JdbcTemplate 类的自定义子类为正在使用）。

所以你需要弄清楚如何启用调试级别的日志记录。

不知道你到底是如何追踪的，但根据我的追踪，我最终到了下面。因此，如果您启用调试级别，您应该能够看到输出，可能不**完全**一样`QA.ARTICLE_ID = 123;`，但您可能应该在下一行中打印出类似于该[示例](http://ramblingabout.wordpress.com/2007/01/03/logging-sql-queries-with-spring/)中的值。无论如何，我没有像您的环境那样的确切设置，但我认为您应该提供一个线索。

```
public Object execute(PreparedStatementCreator psc, PreparedStatementCallback action)
        throws DataAccessException {

    Assert.notNull(psc, "PreparedStatementCreator must not be null");
    Assert.notNull(action, "Callback object must not be null");
    if (logger.isDebugEnabled()) {
        String sql = getSql(psc);
        logger.debug("Executing prepared SQL statement" + (sql != null ? " [" + sql + "]" : ""));
    } 
```

# node.js - Jade 模板引擎 - 每个迭代偏移量

> ID：10004079
> 
> 赞同：10
> 
> 时间：2012-04-04T02:07:56.003
> 
> 标签：node.js, foreach, express, template-engine, pug

使用 Jade 模板引擎时，有没有办法抵消“每次”迭代？

例如，当传入名为 list 的对象时：

```
ul
   each item in list
      li #{item} 
```

将输出

```
<ul>
   <li> Item 1 </li>
   <li> item 2 </li>
   <li> item 3.....
...
</ul> 
```

但我希望第一个项目的显示方式与其他项目不同，如下所示：

```
<ul>
   <li> Item 1: First Item in list! </li>
   <li> item 2 </li>
   <li> item 3.....
...
</ul> 
```

那么有没有人知道一种方法来抵消 Jade 中的“每个”语句，以便我可以单独渲染第一个项目，然后从第二个索引开始渲染每个后续项目？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-04T09:02:03.097

```
each item, i in list
  li= item
  if i === 1
    | : First item in list! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-09T17:43:32.233

如果@Johnathan 的回答对您不起作用：在 Jade 1.7 中，以下工作：

```
for item, i in list
    li= item
    if i === 0
        | : First item in list! 
```

[http://www.learnjade.com/tour/iteration/](http://www.learnjade.com/tour/iteration/)

还要注意 0 索引与 1 索引。

# php - 为所有可能的组合创建动态 for 循环 PHP 函数

> ID：10004081
> 
> 赞同：1
> 
> 时间：2012-04-04T02:08:03.897
> 
> 标签：php, for-loop, combinations

下面的代码将为您有四个不同变量时可能发生的所有可能组合创建一个数组。变量总是需要等于 1。我创建的 for 循环可以工作，并且我了解如何使其适用于更多变量，但我可以让它动态化吗？我需要一个函数，它有多少个变量作为参数。如果有三个变量，则创建三个 forloop。如果有 10... 创建 10 个对应的 for 循环以确定所有可能的组合。

```
$anarray2 = array();
for( $a = 1; $a <= 97; $a++ ) {
  for( $b = 1; $a + $b <=98 ; $b++ ) {
    for( $c = 1; $a + $b + $c <= 99; $c++ ) {
      $d = 100 - ( $a + $b + $c );
      $var_1 = $a / 100;
      $var_2 = $b / 100;
      $var_3 = $c / 100;
      $var_4 = $d / 100;
      $anarray2[] = array( $var_1, $var_2, $var_3, $var_4 );
    }
  }
}
print_array( $anarray2 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:44:44.363

您正在有效地寻求以所有不同的可能方式`I`与人们分享相同的项目。`N`

如果只有一个人 ( `N==1`)，那么只有一种方法可以做到这一点 - 给那个人所有的`I`物品。

如果有不止一个人（`N>1`），那么我们可以考虑有多少项目可以分配给第一个人，然后`N-1`在每种情况下剩下的人可能分配什么。

这导致了一个很好的递归解决方案。首先我们解决问题`N=1`：

```
function assign($I, $N) {
    $anarray = array();

    if ($N == 1) {
        $anarray[] = array($I);
    } else {
        // Coming up...
    }

return $anarray;
} 
```

现在我们用`N=k`（一些常数）的方式来`N=k-1`解决问题——也就是说，我们使用解决方案来解决更小的问题。这将一路回到解决方案时`N=1`。

```
function assign($I, $N) {
    $anarray = array();

    if ($N == 1) {
        $anarray[] = array($I);
    } else {
        for ($i = $I; $i < $I; $i++) {
            foreach (assign($I - $i, $N - 1) as $subproblem) {
                $anarray[] = array_merge(array($i), $subproblem);
            }
        }
    }

    return $anarray;
} 
```

像这样的东西应该可以完成这项工作。

# iphone - iOS - 动画 CGAffineTransformTranslate - 隐藏在导航栏下

> ID：10004086
> 
> 赞同：2
> 
> 时间：2012-04-04T02:08:58.543
> 
> 标签：iphone, ios, animation, uinavigationbar, cgaffinetransform

我正在制作一个动画，同时移动和缩放图像。我想将图像移动到顶部导航栏中的工具栏按钮上。它在执行此操作时缩小到零，因此看起来图像正在保存到该位置......类似于您在 iPhone 上的 iTunes 中下载歌曲时发生的情况。我的缩放和翻译工作正常，但是图像在导航栏下消失了。我希望它在导航栏顶部翻译然后消失。

有谁知道我如何告诉我的动画不要进入导航栏？我的代码如下。谢谢布赖恩

```
CGAffineTransform translate = CGAffineTransformMakeTranslation(160, -160);
CGAffineTransform scale = CGAffineTransformMakeScale(0.1, 0.1);
CGAffineTransform transform =  CGAffineTransformConcat(scale, translate);
//transform = CGAffineTransformRotate(transform, 20);

[UIView beginAnimations:@"MoveAndScaleAnimation" context:nil];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut]; 
[UIView setAnimationDuration:1.0];

imageView.transform = transform;

[UIView commitAnimations]; 
```

# javascript - 验证电子邮件地址失败

> ID：10004091
> 
> 赞同：1
> 
> 时间：2012-04-04T02:10:38.810
> 
> 标签：javascript, jquery, css, html

我有一个关于 jquery 和电子邮件验证的小问题。我正在使用电子邮件输入框来检索用户输入的电子邮件地址（html5），但它在 IE 上不起作用，我现在想添加一个简单的 jquery 函数来在提交表单之前验证输入的电子邮件地址。这是我所做的。

```
 function IsValidEmail(email)
{
    var eReg=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
    return eReg.test(email);
}
$(document).ready(function()
    {
    var em=$('#email').val();
    if(!IsValidEmail(em))
    {
        $('#e-valid').css('color','red');
            $('#e-valid').html("Email is invalid.Please enter a valid address");
    }
    }
); 
```

这是表格

```
<form method="POST" action="doit" id="stuff">
        <table>
        <tr>
            <td width="175px"><label for="email">Your email address</label></td>                
            <td><input type="email" name="email" id="email" size="35"/><span id="e-valid">&nbsp;</span></td>
        </tr>
        <tr>
            <td></td><td><input type="submit" value="Send" /></td>
        </tr>
        </table>
    </form> 
```

但是，当我在输入框中输入无效的电子邮件地址时，没有显示任何内容。我很感谢任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T02:21:16.700

您正在验证页面加载时的电子邮件，但不是在用户提交信息时。您应该将验证放在`submit`事件上

```
$("#aspnetForm").submit(function(){
    var em=$('#email').val();
    if(!IsValidEmail(em))
    {
        $('#e-valid').css('color','red');
        $('#e-valid').html("Email is invalid.Please enter a valid address");
        return false;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T02:24:23.430

首先，您使用的正则表达式看起来很奇怪。大多数使用反斜杠的占位符在字符集中失去了意义。

有关用于验证电子邮件地址的正则表达式的信息，请参阅[此](https://stackoverflow.com/questions/210945/what-would-be-a-globally-accepted-regular-expression-to-match-e-mail-addresses)和[此。](http://www.regular-expressions.info/email.html)

修复正则表达式后，您应该遵循[Claudio](https://stackoverflow.com/a/10004147/1311700)的建议并将验证放在表单提交上。

# ruby-on-rails - 红宝石，Errno::EACCES，权限被拒绝，链轮

> ID：10004096
> 
> 赞同：3
> 
> 时间：2012-04-04T02:11:18.217
> 
> 标签：ruby-on-rails, ruby

我正在请求某人帮助我……我无法理解这个错误……我到处寻找……这似乎是一个权限问题。我已经完成了 CHMOD -R 777 和 CHOWN…

我无知的猜测是，也许我 SUDO 设置了......然后后来改变了......然后权限变得混乱......但也许这是完全不同的东西......

```
Errno::EACCES in Pages#home

Showing [PATH]/sample_app/app/views/layouts/_stylesheets.html.erb where line #7 raised:

Permission denied - ([PATH]/sample_app/tmp/cache/assets/sprockets%2F6fad04bfc6f657170023030f3a905cfd20120403-32248-1jrp9lc, [PATH]/sample_app/tmp/cache/assets/D2F/8A0/sprockets%2F6fad04bfc6f657170023030f3a905cfd)
Extracted source (around line #7): 
```

我是 Ruby on Rail 3 教程的新手，见[此处](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#sec:a_name_and_a_gravatar)。

我成功地做到了这一点，一切都很好......甚至在这个错误阻止我之前，我甚至短暂地看到我的页面加载正确。

另一件事——这可能有助于混淆不确定的问题——在我`_stylesheets.html.erb`的路径中：

```
<%= stylesheet_link_tag 'custom', :media => 'screen' %> 
```

如果我通过在“自定义”之前添加斜杠来更改路径，如下所示：

```
<%= stylesheet_link_tag '/custom', :media => 'screen' %> 
```

......然后页面显示正常......但只是没有必要的样式表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-05T09:20:32.603

只是

```
mv /sample_app/tmp/assets to /sample_app/tmp/assetsbak 
```

一切都好

# javascript - 有没有办法确定javascript中哪个函数调用myFunction？

> ID：10004097
> 
> 赞同：0
> 
> 时间：2012-04-04T02:11:35.020
> 
> 标签：javascript

> **可能重复：**
> [确定javascript中的调用函数](https://stackoverflow.com/questions/1333498/determine-calling-function-in-javascript)

假设我在 javascript 中有一个函数，我想知道调用者是谁。如果不使用全局变量/参数方法，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T02:47:39.057

要与多种浏览器兼容，您需要以下内容：

```
if (typeof arguments.caller == 'function') {
  return arguments.caller;

} else if (typeof arguments.callee == 'function' && 
           typeof arguments.callee.caller == 'function') {
  return arguments.callee.caller;

} else {
  // called from global scope, in strict mode or browser doesn't support
  // either of the above access methods
} 
```

请注意，在 ES5 严格模式下访问 arguments.callee 或 caller 会抛出异常，上面可能会避免这种情况，但我现在无法测试它。

# windows-phone-7 - 更新隔离存储中的数据

> ID：10004099
> 
> 赞同：3
> 
> 时间：2012-04-04T02:12:27.687
> 
> 标签：windows-phone-7, c#-4.0

我有一个在独立空间中添加电子邮件 ID 和名称的代码。但它不能添加多个数据。另外，如果输入错误的任何数据，我该如何更新？

```
namespace IsoStore
{

    public partial class MainPage : PhoneApplicationPage
    {

        // Constructor
        public MainPage()
        {
            InitializeComponent();
            IsolatedStorageSettings appSettings = IsolatedStorageSettings.ApplicationSettings;
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            IsolatedStorageSettings.ApplicationSettings.Add("email", "someone@somewhere.com");
            IsolatedStorageSettings.ApplicationSettings.Add("name", "myname");
        }

        private void button2_Click(object sender, RoutedEventArgs e)
        {
            textBlock1.Text = (string)IsolatedStorageSettings.ApplicationSettings["email"];
            textBlock2.Text = (string)IsolatedStorageSettings.ApplicationSettings["name"];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:13:56.393

为您清理了一些代码，使用辅助方法进行存储：

```
namespace IsoStore
{
    public partial class MainPage : PhoneApplicationPage
    {
        private IsolatedStorageSettings _appSettings;

        // Constructor
        public MainPage()
        {
            InitializeComponent();
            _appSettings = IsolatedStorageSettings.ApplicationSettings;                
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            SaveSetting("email", "someone@somewhere.com");
            SaveSetting("name", "myname");
        }

        private void button2_Click(object sender, RoutedEventArgs e)
        {
            textBlock1.Text = (string)_appSettings["email"];
            textBlock2.Text = (string)_appSettings["name"];
        }

        private void SaveSetting( string setting, string value )
        {
            if (_appSettings.Contains(setting))
            {
                _appSettings[setting] = value;
            }
            else
            {
                _appSettings.Add(setting, value);
            }
        }
    }
} 
```

尝试使用其他一些示例来了解如何使用 IsolatedStorageSettings。

*   [如何：使用独立存储存储和检索应用程序设置](http://msdn.microsoft.com/en-us/library/cc221360%28v=vs.95%29.aspx)
*   [所有关于 WP7 隔离存储 - 在 IsolatedStorageSettings 中存储数据](http://www.windowsphonegeek.com/tips/all-about-wp7-isolated-storage-store-data-in-isolatedstoragesettings)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T04:33:56.770

我想到了 2 个选项，您可以将数据保存到 isolatedStorageFile [MSDN 库](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.aspx)，或者，在这种情况下，我可能会这样做，您将所有电子邮件保存在密钥电子邮件下作为一个字符串，用不允许的字符分隔电子邮件在电子邮件中，昏迷“，”可以说，当需要时拆分您的字符串并将其检索到任何让您感到舒服的地方。

```
private void SaveSetting( string setting, string value )
    {
        if (_appSettings.Contains(setting))
        {
            _appSettings[settings] = _appSettings[settings] + "," + value;
        }
        else
        {
            _appSettings.Add(setting, value);
        }
    } 
```

请注意，此代码段是从 HiTech Magic 的答案中复制的。

# string - 使用变量在 Fortran 中打开输出文件

> ID：10004106
> 
> 赞同：0
> 
> 时间：2012-04-04T02:13:33.987
> 
> 标签：string, variables, fortran

我有一段 Fortran 代码：

```
C --------------------------------------------
      CALL READIN_HYD
      CALL READIN_CONFIG
      CALL READIN_FORCE
      CALL READIN_STEPPER
C --------------------------------------------

      OPEN(11,FILE='EVO_0wall.dat') 
```

我正在尝试用我可以从我的输入参数输入的东西（这些都由子程序 readin_hyd 等读取）替换硬编码的文件名（EVO_0wall.dat）。

我正在尝试做这样的事情：

```
 CHARACTER*30 OUTFILE

  WRITE(*,*) 'OUTPUT FILE'
  READ(*,*)   OUTFILE
  WRITE(*,*) 'OUTPUT FILE: ',OUTFILE 
```

我已将其添加到 READIN_CONFIG 子例程中。回来，我替换为

```
 OPEN(11,FILE=OUTFILE,STATUS='NEW') 
```

在主例程中，希望如果我输入的输入文件在适当的位置包含“EVO_0wall.dat”（带有撇号），它会说与以前相同的内容。

如果我运行代码，则所有其他输入变量都被正确读取，并且数据被正确输出 - 但是，它会创建输出并将输出放置在一个没有扩展名和损坏字符的奇怪文件中（例如，度数，“{ a} 和 0 ）。用 .dat 扩展名重命名文件可以打开它，并且其中的数据是正确的。（编辑：实际上，如果我尝试，变量 OUTFILE 在主函数中时会变为奇数字符简单地打印它的值，所以我猜它不仅仅是 OPEN 语句中的错误语法）

Fortran 是否有某种方法可以处理我在这些字符串之间缺少的字符串？恐怕我是 Fortran 的新手（这是我正在改编的别人的代码），我不太确定我错过了什么。任何帮助将非常感激！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T05:20:27.017

作为@MSB 建议的替代方案，您可以使用`trim`and `adjustl`，如下所示：

```
 implicit none
   character*99 :: outf

   outf='outf.outf'

   open(1,file=trim(adjustl(outf)))
   write(1,*)'foobar',42
   close(1)

   end 
```

这里`adjustl`确保没有前导空格，并`trim`修剪尾随空格。只要`outf`变量仅包含合法字符[我建议仅使用基本 ASCII]，这应该可以工作。

附带说明一下，如果我添加`status='new'`到`open`语句中，`gfortran 4.4.3`如果文件已经存在，它会在运行时（至少）失败。如果你真的想确保现有文件不被覆盖，你需要`inquire`先。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T02:22:36.887

这似乎没问题。以下 read 语句应允许您省略撇号：

```
read (*, '(A)' )  outfile 
```

outfile输出值的“echo”写语句是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T02:24:54.020

我的 FORTRAN 生锈了，但我认为 {a} 可能代表十六进制 A，或十进制 10，这是一个换行符。这就是您在读取 ​​OUTFILE 名称时会得到的结果。

您可能需要修剪所有空白的 OUTFILE

# javascript - 如何等待一组异步回调函数？

> ID：10004112
> 
> 赞同：99
> 
> 时间：2012-04-04T02:14:00.400
> 
> 标签：javascript, asynchronous

我的代码在 javascript 中看起来像这样：

```
forloop {
    //async call, returns an array to its callback
} 
```

在所有这些异步调用完成后，我想计算所有数组的最小值。

我怎么能等到他们所有人？

我现在唯一的想法是有一个名为 done 的布尔数组，并在第 i 个回调函数中将 done[i] 设置为 true，然后说 while(not all are done) {}

编辑：我想一个可能但丑陋的解决方案是在每个回调中编辑 done 数组，然后在每个回调中设置所有其他 done 时调用一个方法，因此最后一个完成的回调将调用 continue 方法。

提前致谢。

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2012-04-04T02:19:21.833

你的代码不是很具体，所以我会编一个场景。假设您有 10 个 ajax 调用，并且您想累积这 10 个 ajax 调用的结果，然后当它们全部完成时，您想做一些事情。您可以通过在数组中累积数据并跟踪最后一个完成的时间来做到这一点：

**手动计数器**

```
var ajaxCallsRemaining = 10;
var returnedData = [];

for (var i = 0; i < 10; i++) {
    doAjax(whatever, function(response) {
        // success handler from the ajax call

        // save response
        returnedData.push(response);

        // see if we're done with the last ajax call
        --ajaxCallsRemaining;
        if (ajaxCallsRemaining <= 0) {
            // all data is here now
            // look through the returnedData and do whatever processing 
            // you want on it right here
        }
    });
} 
```

注意：错误处理在这里很重要（未显示，因为它特定于您如何进行 ajax 调用）。您将需要考虑如何处理一个 ajax 调用从未完成的情况，无论是错误还是长时间卡住或长时间后超时。

* * *

**jQuery 承诺**

添加到我在 2014 年的回答中。如今，promise 经常用于解决此类问题，因为 jQuery`$.ajax()`已经返回了一个 Promise，并且`$.when()`会在一组 Promise 全部解决时通知您，并为您收集返回结果：

```
var promises = [];
for (var i = 0; i < 10; i++) {
    promises.push($.ajax(...));
}
$.when.apply($, promises).then(function() {
    // returned data is in arguments[0][0], arguments[1][0], ... arguments[9][0]
    // you can process it here
}, function() {
    // error occurred
}); 
```

* * *

**ES6 标准承诺**

[如 kba 的回答中所述](https://stackoverflow.com/a/33813793/576767)：如果您有一个内置原生 Promise 的环境（现代浏览器或 node.js 或使用 babeljs transpile 或使用 Promise polyfill），那么您可以使用 ES6 指定的 Promise。有关浏览器支持，请参阅[此表。](http://caniuse.com/#feat=promises)除了 IE，几乎所有当前的浏览器都支持 Promise。

如果`doAjax()`返回一个承诺，那么你可以这样做：

```
var promises = [];
for (var i = 0; i < 10; i++) {
    promises.push(doAjax(...));
}
Promise.all(promises).then(function() {
    // returned data is in arguments[0], arguments[1], ... arguments[n]
    // you can process it here
}, function(err) {
    // error occurred
}); 
```

* * *

如果你需要将一个非承诺异步操作变成一个返回承诺的操作，你可以像这样“承诺”它：

```
function doAjax(...) {
    return new Promise(function(resolve, reject) {
        someAsyncOperation(..., function(err, result) {
            if (err) return reject(err);
            resolve(result);
        });
    });
} 
```

然后，使用上面的模式：

```
var promises = [];
for (var i = 0; i < 10; i++) {
    promises.push(doAjax(...));
}
Promise.all(promises).then(function() {
    // returned data is in arguments[0], arguments[1], ... arguments[n]
    // you can process it here
}, function(err) {
    // error occurred
}); 
```

* * *

**蓝鸟承诺**

如果您使用功能更丰富的库，例如[Bluebird Promise 库](http://bluebirdjs.com/docs/api-reference.html)，那么它内置了一些额外的功能来使这更容易：

```
 var doAjax = Promise.promisify(someAsync);
 var someData = [...]
 Promise.map(someData, doAjax).then(function(results) {
     // all ajax results here
 }, function(err) {
     // some error here
 }); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-11-19T20:29:37.633

从 2015 年开始检查：我们现在在[最新的浏览器](http://caniuse.com/#feat=promises)（Edge 12、Firefox 40、Chrome 43、Safari 8、Opera 32 和 Android 浏览器 4.4.4 和 iOS Safari 8.4，但不包括 Internet Explorer、Opera Mini 和旧版本）中具有[原生承诺](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)安卓）。

如果我们想要执行 10 个异步操作并在它们全部完成时收到通知，我们可以使用 native [`Promise.all`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all)，而无需任何外部库：

```
function asyncAction(i) {
    return new Promise(function(resolve, reject) {
        var result = calculateResult();
        if (result.hasError()) {
            return reject(result.error);
        }
        return resolve(result);
    });
}

var promises = [];
for (var i=0; i < 10; i++) {
    promises.push(asyncAction(i));
}

Promise.all(promises).then(function AcceptHandler(results) {
    handleResults(results),
}, function ErrorHandler(error) {
    handleError(error);
}); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-04T02:19:17.467

您可以将 jQuery 的[Deferred](http://api.jquery.com/category/deferred-object/)对象与[when](http://api.jquery.com/jQuery.when/)方法一起使用。

```
deferredArray = [];
forloop {
    deferred = new $.Deferred();
    ajaxCall(function() {
      deferred.resolve();
    }
    deferredArray.push(deferred);
}

$.when(deferredArray, function() {
  //this code is called after all the ajax calls are done
}); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-04-04T02:21:13.483

您可以像这样模拟它：

```
 countDownLatch = {
     count: 0,
     check: function() {
         this.count--;
         if (this.count == 0) this.calculate();
     },
     calculate: function() {...}
  }; 
```

然后每个异步调用都会这样做：

```
countDownLatch.count++; 
```

而在方法末尾的每个异步回调中，您添加以下行：

```
countDownLatch.check(); 
```

换句话说，您模拟了倒计时锁存功能。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-04-14T19:30:39.317

这是我认为最简洁的方式。

[承诺.all](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all "承诺.all()")

[FetchAPI](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API "FetchAPI")

（由于某种原因 Array.map 在 .then 中对我不起作用。但您可以使用 .forEach 和 [].concat() 或类似的东西）

```
Promise.all([
  fetch('/user/4'),
  fetch('/user/5'),
  fetch('/user/6'),
  fetch('/user/7'),
  fetch('/user/8')
]).then(responses => {
  return responses.map(response => {response.json()})
}).then((values) => {
  console.log(values);
}) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-04T02:28:26.027

使用控制流库，如[`after`](https://github.com/Raynos/after.js)

```
after.map(array, function (value, done) {
    // do something async
    setTimeout(function () {
        // do something with the value
        done(null, value * 2)
    }, 10)
}, function (err, mappedArray) {
    // all done, continue here
    console.log(mappedArray)
}) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-11T04:44:35.673

**在 Node.js 中，您可以使用 async/await 来控制异步流程**

*   Node.js 7.6 支持异步/等待
*   Node.js v8 支持 util 函数来承诺回调

**示例代码：**

```
const foo = async () => {
  try {
    const ids = [100, 101, 102];
    const fetchFromExternalApi = util.promisify(fetchFromExternalApiCallback);
    const promises = ids.map((id) => fetchFromExternalApi(id));
    const dataList = await Promise.resolve(promises); // dataList is an array
    return dataList;
  } catch (err) {
    // error handling
  }
}; 
```

# oracle - 选择查询以等待插入其他记录

> ID：10004118
> 
> 赞同：2
> 
> 时间：2012-04-04T02:15:32.453
> 
> 标签：oracle

在我的应用程序中，多个请求同时从一个表中读取记录，并基于该表在表中插入新记录。

我想串行执行请求，以便第二个请求读取第一个请求插入的最新值。

我尝试使用 select for update 查询来实现这一点，但它只锁定要等待更新的行，因为我无法更新现有记录，它的值与之前的请求相同。

是否可以使用 Oracle 锁定机制？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T02:20:02.347

伙计——这就是*交易*的目的！

强烈建议：

1.  将代码放入 PL/SQL 存储过程

2.  将选择/插入包装在“开始传输/提交”中

3.  如果可以避免的话，甚至不要*考虑锁！*

# xml - 如何在 WP7 中读取此 XML 文件？

> ID：10004119
> 
> 赞同：0
> 
> 时间：2012-04-04T02:15:41.460
> 
> 标签：xml, windows-phone-7

我正在尝试从一个 XML 文件中加载国家名称及其城市。

我希望根据所选国家/地区将城市加载到 ListPicker。

这是我的 XML 文件的一部分：

```
<Times>
    <country name="USA">
        <city name="Aaronsburg -- PA">
            <state>PA</state>
            <latitude>408739</latitude>
            <longitude>-773815</longitude>
            <timezone>-500</timezone>
            <daylight>1</daylight>
        </city>
        <city name="Abbeville -- AL">
            <state>AL</state>
            <latitude>316077</latitude>
            <longitude>-853051</longitude>
            <timezone>-600</timezone>
            <daylight>1</daylight>
        </city>
        <city name="Abbeville -- GA">
            <state>GA</state>
            <latitude>319710</latitude>
            <longitude>-833016</longitude>
            <timezone>-500</timezone>
            <daylight>1</daylight>
        </city>
        <city name="Abbot -- ME">
            <state>ME</state>
            <latitude>453219</latitude>
            <longitude>-695342</longitude>
            <timezone>-500</timezone>
            <daylight>1</daylight>
            </city>
........
........ 
```

这是我写的代码：

```
private void LoadButton_Click(object sender, RoutedEventArgs e)
{
    XDocument doc = XDocument.Load("Athan.xml");
    var definitions = doc.Document.Descendants(XName.Get("country"));

    foreach (var definition in definitions)
    {
        if (definition.Attribute(XName.Get("name")).Value == CountryListPicker.SelectedItem.ToString())
        {
            var cities = definition.Document.Descendants(XName.Get("city"));

            foreach (var city in cities)
            {
                CityListPicker.Items.Add(city.Attribute(XName.Get("name")).Value.ToString());
            }

            return;
        }
    }
} 
```

城市加载了半天，还是没有加载！我的代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T03:07:21.930

好的，我可能在这里完全偏离基础，因为我对 windows-phone-7 一无所知，但我假设您的 LoadButton_Click 方法的核心是 Linq to Xml。

如果是这种情况，我想知道您对 .Document 的调用以及对 XName 的频繁调用。例如，在我看来，您的定义代码可能很简单，例如“var definitions = doc.Descendants("country");" 对于“var city”行也是如此。

在处理属性时，您可能能够摆脱诸如“CityListPicker.Items.Add(city.Attribute("name")).Value;”之类的东西。

因为数据至少在某些时候加载，我假设您没有命名空间问题，但您应该验证。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:59:11.930

尝试添加

```
XDocument doc = XDocument.Load("Athan.xml");
XElement root = doc.Root;

foreach (XElement el in root.Descendants("Times"))
{
    // code to navigate in your XML

    if ( el.Name == "country"){
        foreach ( XAttribute attr in el.Attributes())
        {
            if ( attr.name == "name"){
                // receive your country name
                String CountryName = attr.Value;
            }
        }
        foreach (XElement city in el.Descendants())
        {
            if (city.Name == "city")
            {
                Object City = new Object(); // create your object...
                foreach ( XAttribute attr in el.Attributes())
                {
                    if ( attr.name == "state"){
                        City.sate = cityAttr.Value;
                    }
                    if ( attr.name == "latitude"){
                        City.latitude = cityAttr.Value;
                    }
                    // etc....
                }

          //You add your object city in list ( for example ) ...
    }
} 
```

我在加载我的 xml 时遇到问题，使用这种方法，xml 被加载...

希望这个解决方案可以帮助你...

# android - Android Twitter4j 给出错误 NoClassDefFoundError: twitter4j.TwitterFactory

> ID：10004123
> 
> 赞同：4
> 
> 时间：2012-04-04T02:15:57.947
> 
> 标签：android, twitter4j

我正在制作一个与 Twitter 通信以发布推文的应用程序。我的问题是，在编译我的代码时，我收到错误消息：

```
NoClassDefFoundError: twitter4j.TwitterFactory 
```

这是通过 onClickListener 发布推​​文的代码：

```
post.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Twitter twitter = new TwitterFactory().getInstance();  
            AccessToken a = new AccessToken("****", "****");
            twitter.setOAuthConsumer("****", "****");
            twitter.setOAuthAccessToken(a); 
            try {
                twitter.updateStatus("If you're reading this on Twitter, it worked!");
            } catch (TwitterException e) {
                e.printStackTrace();
            }   
        }
    }); 
```

这是我在 logcat 中得到的：

```
04-04 10:27:51.330: E/AndroidRuntime(12547): FATAL EXCEPTION: main
04-04 10:27:51.330: E/AndroidRuntime(12547): java.lang.NoClassDefFoundError: twitter4j.TwitterFactory
04-04 10:27:51.330: E/AndroidRuntime(12547):    at com.bintuu.updater.TwitterClass$3.onClick(TwitterClass.java:107)
04-04 10:27:51.330: E/AndroidRuntime(12547):    at android.view.View.performClick(View.java:2485)
04-04 10:27:51.330: E/AndroidRuntime(12547):    at android.view.View$PerformClick.run(View.java:9080)
04-04 10:27:51.330: E/AndroidRuntime(12547):    at android.os.Handler.handleCallback(Handler.java:587)
04-04 10:27:51.330: E/AndroidRuntime(12547):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-04 10:27:51.330: E/AndroidRuntime(12547):    at android.os.Looper.loop(Looper.java:130)
04-04 10:27:51.330: E/AndroidRuntime(12547):    at android.app.ActivityThread.main(ActivityThread.java:3683)
04-04 10:27:51.330: E/AndroidRuntime(12547):    at java.lang.reflect.Method.invokeNative(Native Method)
04-04 10:27:51.330: E/AndroidRuntime(12547):    at java.lang.reflect.Method.invoke(Method.java:507)
04-04 10:27:51.330: E/AndroidRuntime(12547):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-04 10:27:51.330: E/AndroidRuntime(12547):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-04 10:27:51.330: E/AndroidRuntime(12547):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T08:35:38.313

尝试将“lib”文件夹名称重命名为“libs”。这为我解决了类似的问题，请在此处查看：[https ://github.com/ddewaele/AndroidTwitterSample/issues/2](https://github.com/ddewaele/AndroidTwitterSample/issues/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T05:37:13.687

我现在找到了解决方案。问题是我使用的是非常旧的 Twitter4j 版本，并且在我的 libs 文件夹中，有多个名称相同的 jar。我现在已经解决了这些问题，它现在运行良好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T06:22:27.483

在项目的根目录中创建一个名为 libs 的文件夹，并将 twitter4j jar 放入其中。

然后通过 Project Properties -> Java Build Path -> Libraries -> Add Jars 包含新 jar。

删除对 twitter4j jar 的任何旧引用。

清洁并启动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T22:22:26.877

我在 twitter4j 上遇到了同样的问题，我解决了。只需将文件夹命名为“libs”，然后我将“libs”文件夹用作源文件夹，以便可以访问其中的一些方法。我想知道它背后的实际化学反应是什么！！但就是这样，它现在对我有用。要使其成为源文件夹，只需右键单击它，转到“构建路径”，然后选择“用作源文件夹”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T09:57:05.873

我知道它太旧了，但对于像我这样的人来说——问题是通过在项目中包含 log4j、slf4j 和 commons-logging jar 来解决的，因为 twitter4j 核心使用它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-18T08:21:18.957

I found that I Imported Twitter4J the incorrect way. So what I proceeded to do was remove it from my build path then copy twitter4j-core-4.0.2.jar to my libs folder then restart eclipse and add the jar in my libs to my build path. All was sorted thereafter.

# bash - 一些文本在左边，一些文本在右边，在一行中，带有 BASH

> ID：10004124
> 
> 赞同：0
> 
> 时间：2012-04-04T02:16:07.950
> 
> 标签：bash

我在 BASH 脚本中显示了一些状态文本，例如：

```
Removed file "sandwich.txt". (1/2)
Removed file "fish.txt". (2/2) 
```

我想让进度文本`(1/2)`完全显示在右侧，与终端窗口的边缘对齐，例如：

```
Removed file "sandwich.txt".                           (1/2)
Removed file "fish.txt".                               (2/2) 
```

我已经在 bash和[右文本 align - bash](https://stackoverflow.com/questions/4239010/right-text-align-bash)中尝试了[右对齐/填充数字](https://stackoverflow.com/questions/994461/right-align-pad-numbers-in-bash)的解决方案，但是，这些解决方案似乎不起作用，它们只是产生了一个很大的空白，例如：

```
Removed file "sandwich.txt".                           (1/2)
Removed file "fish.txt".                           (2/2) 
```

我怎样才能让一些文本左对齐而一些文本右对齐？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T02:53:33.877

```
printf "Removed file %-64s (%d/%d)\n" "\"$file\"" $n $of 
```

文件名周围的双引号是不拘一格的，但将文件名用双引号括在`printf()`命令中，然后将在宽度为 64 的字段中打印该名称左对齐。

调整以适应。

```
$ file=sandwich.txt; n=1; of=2
$ printf "Removed file %-64s (%d/%d)\n" "\"$file\"" $n $of
Removed file "sandwich.txt"                                                   (1/2)
$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T03:13:38.580

这将自动调整到您的终端宽度，无论是什么。

```
[ghoti@pc ~]$ cat input.txt 
Removed file "sandwich.txt". (1/2)
Removed file "fish.txt". (2/2)
[ghoti@pc ~]$ cat doit
#!/usr/bin/awk -f

BEGIN {
  "stty size" | getline line;
  split(line, stty);
  fmt="%-" stty[2]-9 "s%8s\n";
  print "term width = " stty[2];
}

{
  last=$NF;
  $NF="";
  printf(fmt, $0, last);
}

[ghoti@pc ~]$ ./doit input.txt 
term width = 70
Removed file "sandwich.txt".                                    (1/2)
Removed file "fish.txt".                                        (2/2)
[ghoti@pc ~]$ 
```

您可以删除`print`BEGIN 块中的；那只是为了显示宽度。

要使用它，基本上只需通过 awk 脚本通过管道创建任何现有的状态行，它会将最后一个字段移动到终端的右侧。

# c# - 如何创建双向数据绑定代理？

> ID：10004127
> 
> 赞同：3
> 
> 时间：2012-04-04T02:17:14.563
> 
> 标签：c#, .net, winforms, data-binding, 2-way-object-databinding

我有以下课程...

```
class ExpressionBinder<T>
{
    public Func<T> Getter;
    public Action<T> Setter;

    public T Value
    {
        get { return Getter.Invoke(); }
        set { Setter.Invoke(value); }
    }

    public ExpressionBinder(Func<T> getter, Action<T> setter)
    {
        Getter = getter;
        Setter = setter;
    }
}

class ComparisonBinder<TSource, TValue> : ExpressionBinder<bool>, INotifyPropertyChanged
{
    private TSource instance;
    private TValue comparisonValue;
    private PropertyInfo pInfo;

    public event PropertyChangedEventHandler PropertyChanged;

    public ComparisonBinder(TSource instance, Expression<Func<TSource, TValue>> property, TValue comparisonValue) : base(null,null)
    {
        pInfo = GetPropertyInfo(property);

        this.instance = instance;
        this.comparisonValue = comparisonValue;

        Getter = GetValue;
        Setter = SetValue;
    }

    private bool GetValue()
    {
        return comparisonValue.Equals(pInfo.GetValue(instance, null));
    }

    private void SetValue(bool value)
    {
        if (value)
        {
            pInfo.SetValue(instance, comparisonValue,null);

            NotifyPropertyChanged("CustomerName");
        }
    }

    private void NotifyPropertyChanged(string pName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(pName));
        }
    }

    /// <summary>
    /// Adapted from surfen's answer (https://stackoverflow.com/a/10003320/219838)
    /// </summary>
    private PropertyInfo GetPropertyInfo(Expression<Func<TSource, TValue>> propertyLambda)
    {
        Type type = typeof(TSource);

        MemberExpression member = propertyLambda.Body as MemberExpression;

        if (member == null)
            throw new ArgumentException(string.Format(
                "Expression '{0}' refers to a method, not a property.",
                propertyLambda));

        PropertyInfo propInfo = member.Member as PropertyInfo;
        if (propInfo == null)
            throw new ArgumentException(string.Format(
                "Expression '{0}' refers to a field, not a property.",
                propertyLambda));

        if (type != propInfo.ReflectedType &&
            !type.IsSubclassOf(propInfo.ReflectedType))
            throw new ArgumentException(string.Format(
                "Expresion '{0}' refers to a property that is not from type {1}.",
                propertyLambda,
                type));

        return propInfo;
    }
} 
```

我使用`ComparisonBinder`该类的代码如下：

```
radioMale.DataBindings.Add(
    "Checked", 
    new ComparisonBinder<DataClass, GenderEnum>(DataObj, (x) => x.Gender, GenderEnum.Male), 
    "Value", 
    false, 
    DataSourceUpdateMode.OnPropertyChanged);

radioFemale.DataBindings.Add(
    "Checked",
    new ComparisonBinder<DataClass, GenderEnum>(DataObj, (x) => x.Gender, GenderEnum.Male), 
    "Value", 
    false, 
    DataSourceUpdateMode.OnPropertyChanged); 
```

它们允许我使用表达式将许多控件绑定到同一个属性，以生成控件绑定属性的值。它从控件到对象都很好地工作。（如果你想了解更多关于使用这个类和[这个问题](https://stackoverflow.com/q/10002817/219838)的信息）

现在，我需要另辟蹊径。当我更新我的对象（这将改变 get 表达式的结果）时，我需要更新绑定控件。我尝试实施，`INotifyPropertyChanged`但没有任何区别。

一件奇怪的事情：将控件设置为`DataSourceUpdateMode`以`OnPropertyChanged`某种方式阻止我更改选中的收音机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:51:26.910

# 快速回答：

*   你必须使用**绑定**源
*   在您的对象中实现 INotifyPropertyChanged
*   让代理监听上面的事件
*   在代理中实现 INotifyPropertyChanged
*   在代理中过滤从您的对象接收到的 PropertyChanged 事件，并且仅在以下情况下引发`((PropertyChangedEventArgs) args).PropertyName == pInfo.Name`
*   将代理添加到`BindSource.DataSource`
*   使用`BindingSource`将控件绑定到数据对象的属性

# 最终代码

可用（连同其他绑定类）：http: [//github.com/svallory/BindingTools](http://github.com/svallory/BindingTools)

## 课程

```
class ExpressionBinder<T> : INotifyPropertyChanged
{
    public Func<T> Getter;
    public Action<T> Setter;

    public event PropertyChangedEventHandler PropertyChanged;

    protected IList<string> WatchingProps;

    public T Value
    {
        get { return Getter.Invoke(); }
        set { Setter.Invoke(value); }
    }

    public ExpressionBinder(Func<T> getter, Action<T> setter)
    {
        WatchingProps = new List<string>();
        Getter = getter;
        Setter = setter;
    }

    public ExpressionBinder(Func<T> getter, Action<T> setter, ref PropertyChangedEventHandler listenToChanges, IList<string> propertyNames)
    {
        Getter = getter;
        Setter = setter;

        listenToChanges += SourcePropertyChanged;
        WatchingProps = propertyNames;
    }

    protected void SourcePropertyChanged(object obj, PropertyChangedEventArgs args)
    {
        if (PropertyChanged != null && WatchingProps.Contains(args.PropertyName))
        {
            PropertyChanged(this, args);
        }
    }

    protected PropertyInfo GetPropertyInfo<TSource, TValue>(Expression<Func<TSource, TValue>> propertyLambda)
    {
        Type type = typeof(TSource);

        var member = propertyLambda.Body as MemberExpression;

        if (member == null)
            throw new ArgumentException(string.Format(
                "Expression '{0}' refers to a method, not a property.",
                propertyLambda));

        var propInfo = member.Member as PropertyInfo;
        if (propInfo == null)
            throw new ArgumentException(string.Format(
                "Expression '{0}' refers to a field, not a property.",
                propertyLambda));

        if (type != propInfo.ReflectedType &&
            !type.IsSubclassOf(propInfo.ReflectedType))
            throw new ArgumentException(string.Format(
                "Expresion '{0}' refers to a property that is not from type {1}.",
                propertyLambda,
                type));

        return propInfo;
    }
}

class ComparisonBinder<TSource, TValue> : ExpressionBinder<bool> where TSource : INotifyPropertyChanged
{
    private readonly TSource instance;
    private readonly TValue comparisonValue;
    private readonly PropertyInfo pInfo;

    public ComparisonBinder(TSource instance, Expression<Func<TSource, TValue>> property, TValue comparisonValue)
        : base(null, null)
    {
        pInfo = GetPropertyInfo(property);

        this.instance = instance;
        this.comparisonValue = comparisonValue;

        Getter = GetValue;
        Setter = SetValue;

        instance.PropertyChanged += SourcePropertyChanged;
        WatchingProps.Add(pInfo.Name);
    }

    private bool GetValue()
    {
        return comparisonValue.Equals(pInfo.GetValue(instance, null));
    }

    private void SetValue(bool value)
    {
        if (value)
        {
            pInfo.SetValue(instance, comparisonValue, null);
        }
    }
} 
```

## 用法

```
var bs = new BindingSource();
bs.DataSource = new ComparisonBinder<MySourceObjClass, PropType>(
    MySourceObject, 
    p => p.PropertyToBind, 
    ValueToCompare);

rdBeSmart.DataBindings.Add(
    "Checked", 
    bs, 
    "Value"); 
```

# hadoop - 开源云搜索引擎

> ID：10004132
> 
> 赞同：0
> 
> 时间：2012-04-04T02:18:10.053
> 
> 标签：hadoop, cloud

我需要一个基于开源云计算的搜索引擎？有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T03:09:23.350

[Nutch](http://nutch.apache.org/)是一个开源的网络爬虫，它基于 hadoop。它与[Solr](http://wiki.apache.org/nutch/NutchTutorial)集成，因此可以对爬取的数据进行索引和搜索。

# c++ - 如何在 C++ 中动态分配全局二维数组

> ID：10004133
> 
> 赞同：0
> 
> 时间：2012-04-04T02:18:31.380
> 
> 标签：c++, arrays, pointers, 2d

我想制作一个 2d、3 x 3 的数组，如下所示：

```
double *array;

void setArray(double x, double y, double z){
    array = {{x,0,0},
             {0,y,0},
             {0,0,z}};
} 
```

我读了一些帖子，建议是这样的：

```
double **array = new double*[3];

void setArray(double x, double y, double z){
   array[0] = new double*[3];
   array[0][0] = x;
   array[0][1] = 0;
   array[0][2] = 0;
   ... 
```

如果有什么方法可以直接使用值 {{x,0,0},{0,y,0},{0,0,z}} 设置二维数组？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:11:10.627

如果你想使用类似的列表`{{x,0,0},{0,y,0},{0,0,z}}`，你应该使用硬编码大小的数组：

```
double *array; // no good
double array[3][3]; // OK 
```

用复制填充它们：

```
void setArray(double x, double y, double z){
    double temp[3][3] = {{x,0,0},
                         {0,y,0},
                         {0,0,z}};
    memcpy(&array, &temp, sizeof(array));
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T02:22:57.337

如果您不需要锯齿状数组，并且在设计时知道大小，您可以使用以下语法来声明它：

```
double array[3][3]; 
```

但是，如果你想使用初始化列表，你可以这样做：

```
typedef double Array[3][3];

Array& array(double x = 0.0, double y = 0.0, double z = 0.0) {
  static double array_[3][3] = {{x,0,0},{0,y,0},{0,0,z}};
  return array_;
}

// init:
array(4,5,8);
// access:
array()[0,2]; 
```

# cmake - 使用 CMake 添加不在子目录中的依赖项

> ID：10004134
> 
> 赞同：17
> 
> 时间：2012-04-04T02:18:37.013
> 
> 标签：cmake

假设有以下目录结构：

```
root
  |
  +--projects
  |      |
  |      +-test
  |         |
  |         +-CMakeFiles.txt
  |
  +--libs
       |
       +-testlib
            |
            +-CMakeFiles.txt 
```

`test`包含`CMakeFiles.txt`并且`testlib`还包含`CMakeFiles.txt`。“test”产生一个可执行文件，“testlib”产生一个静态库。

我希望“test”与“testlib”链接而不使用符号链接，也不需要将“testlib”库移动到“test”中的子目录中。

因为“testlib”不是“test”的子目录，所以我做不到

```
add_subdirectory("../../libs/testlib") 
```

在测试中`CMakeFiles.txt`- CMake 会抱怨“testlib”不在“test”子目录中。

另外，因为系统有几个不同的编译器，我不能简单地将“testlib”库安装到某种中央目录中，所以我想`test`编译它的本地副本`testlib`并与之链接（即好像`testlib`是一个子目录）。我还希望“test”项目在更改后自动重建“testlib”。

那么，我该如何处理呢？我在 Windows XP SP3 上使用 CMake 2.8.4。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-04T08:52:46.790

您可以在 中提供顶级 CMakeLists.txt `root`，也可以为命令提供二进制目录`add_subdirectory`；例如

```
add_subdirectory("../../libs/testlib" "${CMAKE_CURRENT_BINARY_DIR}/testlib_build") 
```

`testlib_build`这会在当前构建目录中创建一个名为的子目录，其中包含为 testlib 生成的项目文件，但不包含源代码。

有关更多信息，请运行

```
cmake --help-command ADD_SUBDIRECTORY 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-04T06:21:28.190

我看到这样做的唯一方法 -`CMakeLists.txt`在根目录中创建并将以下代码放在那里：

```
add_subdirectory(projects/test)
add_subdirectory(lib/testlib) 
```

完成后，您可以`target_link_libraries(test testlib)`在 中进行`test/CMakeLists.txt`，如果您在 中更改某些内容，它将自动重建`testlib`。

# java - java尝试将planarimage转换为bufferedimage但colormodel不兼容

> ID：10004142
> 
> 赞同：2
> 
> 时间：2012-04-04T02:20:04.063
> 
> 标签：java, image, colors, jai

我有一个平面图像，我通过我找到的一些示例代码将其转换为黑白。然后，我需要将其转换为 BufferedImage 以供下一个代码部分使用。但我得到以下异常：

java.lang.IllegalArgumentException：指定的 ColorModel 与图像 SampleModel 不兼容。在 javax.media.jai.PlanarImage.setImageLayout(PlanarImage.java:535) 在 javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867) 在 javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888) ) 在 javax.media.jai.RenderedOp.createInstance(RenderedOp.java:799) 在 javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867) 在 javax.media.jai.RenderedOp.copyData(RenderedOp.java:第2284章

这是我找到的转换为黑白的代码（我认为是 Sun 示例）：

```
ParameterBlock pb = new ParameterBlock();
pb.addSource(input);
ColorModel cm = new ComponentColorModel(ColorSpace.getInstance(ColorSpace.CS_GRAY), new int[] {8}, 
    false, 
    false, 
    Transparency.OPAQUE, 
    DataBuffer.TYPE_BYTE);
pb.add(cm);
PlanarImage src = JAI.create("ColorConvert", pb);

pb = new ParameterBlock();
pb.addSource(src);
String opName = null;
opName = "errordiffusion";
LookupTableJAI lut =  new LookupTableJAI(new byte[] {(byte)0x00, (byte)0xff});
pb.add(lut);
pb.add(KernelJAI.ERROR_FILTER_FLOYD_STEINBERG);

// Create a layout containing an IndexColorModel which maps
// zero to zero and unity to 255.
ImageLayout layout = new ImageLayout();
byte[] map = new byte[] {(byte)0x00, (byte)0xff};
cm = new IndexColorModel(1, 2, map, map, map);
layout.setColorModel(cm);

// Create a hint containing the layout.
RenderingHints hints = new RenderingHints(JAI.KEY_IMAGE_LAYOUT,layout);

// Dither the image.
PlanarImage dst = JAI.create(opName, pb, hints); 
```

这是我尝试按照我尝试的顺序将其转换为 BufferedImage 的内容：

```
//doesn't work
BufferedImage image = dst.getAsBufferedImage();

//thought of using the color model the b&w process did,also doesn't work
byte[] map = new byte[] {(byte)0x00, (byte)0xff};
ColorModel cm = new IndexColorModel(1, 2, map, map, map);
BufferedImage image = new BufferedImage(cm, dst.copyData(), false, null);

//I had the most hope for this one,but same error again
WritableRaster wr = dst.copyData();
ColorModel cm = PlanarImage.createColorModel(wr.getSampleModel());
BufferedImage image = new BufferedImage(cm, wr, false, null); 
```

谁能告诉我我做错了什么？

我发现即使调用`dst.getNumBands()`也会抛出这个错误。显然我不知道我在这里做什么。更准确地说，调用`dst.betNumbBands();`将导致：

java.lang.IllegalArgumentException：指定的 ColorModel 与图像 SampleModel 不兼容。在 javax.media.jai.PlanarImage.setImageLayout(PlanarImage.java:535) 在 javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867) 在 javax.media.jai.RenderedOp.getRendering(RenderedOp.java:888) ) 在 javax.media.jai.RenderedOp.createInstance(RenderedOp.java:799) 在 javax.media.jai.RenderedOp.createRendering(RenderedOp.java:867) 在 javax.media.jai.RenderedOp.getSampleModel(RenderedOp.java:第2233章）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-10T18:19:16.233

我认为您的问题可能出在与源 img 的 colorSpace 参数不匹配的 colorSpace 参数上。你可以试试这个实现“bandCombine”opName的代码。

```
 public void imageToGrayScale()
 {
  double[][] matrix1 = {{ 1./3, 1./3, 1./3, 0 }};

  ParameterBlock pb = new ParameterBlock();
  pb.addSource(image);
  pb.add(matrix1);

  PlanarImage dst = (PlanarImage) JAI.create("bandCombine",pb,null);

  BufferedImage img = dst.getAsBufferedImage();
  display(img);

 } 
```

这里发生的情况是，vr 只需将三个颜色分量 (RGB) 的平均值放入矩阵中，然后将其添加到参数块中，从而为您提供灰度图像。

display() 方法只是在 JFrame 中显示图像。

矩阵解释：- 矩阵形式为：- double[][] matrix = new double[destBands][sourceBands + 1]; sourceBands 在它包含 RGB 值的情况下很重要，额外的“+1”用于常量值，每个常量值都添加到目标的相应波段。

此方法仅适用于 .JPG 文件。

# wolfram-mathematica - 阻止不同的 Manipulate Panels 相互触发

> ID：10004143
> 
> 赞同：1
> 
> 时间：2012-04-04T02:20:31.817
> 
> 标签：wolfram-mathematica

这应该是一个简单的问题，但我现在已经放弃了一段时间。我有不同的输入行，我在一个笔记本中进行了评估。其中两个具有操纵语句：

第一个

```
Manipulate[{  Some Plot Func }, {{\[Omega]0, 3}, 0, 3}, {{\[Tau], 5}, -1, 20}] 
```

第二个：

```
Manipulate[{  Some Plot Func }, {Twave, 1, 10}, {{Tenv, 10}, 0, 100}, TrackedSymbols :> True] 
```

当我在第二个中更改参数时，我也可以看到第一个正在评估。

我尝试使用 TrackedSymbols 指定来解开这两者，但这没有成功。我希望有人能给我指出明显的解决方案。这大大减慢了评估速度。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T02:38:29.323

这个怎么样？

用分号结束您的每个操作。创建第三个不以分号结尾的“主”操作。在主控操作中，使用一个 TabView。对于选项卡的每个窗格，通过像函数一样调用它来运行您的操作之一。创建一个操作列表并使用各种“选项卡索引”选择要执行的操作很方便。

我已经使它与几个操作、通过选项卡在它们之间移动的规则等配合得很好。事实证明，这是一种对笔记本应用程序有用的方法，因为一个巨大的操作的复杂性已经失控。

# iphone - 试图从 iOS 中的另一个类中提取属性

> ID：10004150
> 
> 赞同：2
> 
> 时间：2012-04-04T02:22:06.777
> 
> 标签：iphone, objective-c, ios, ios5, gps

我对 iOS 开发完全陌生，所以我可能做错了，但我有一个类用于获取坐标 gps 数据，我希望将其作为可以在许多应用程序中重用的通用类。我的问题是从 gps 获取数据以正确显示在其他应用程序中。

这是我的 GPS 类的头文件：

```
#import <Foundation/Foundation.h>
#import <CoreLocation/CoreLocation.h>

@interface LocationAwareness : NSObject <CLLocationManagerDelegate> {
CLLocationManager *locationManager;
}
@property(copy) NSString *longitude;
@property(copy) NSString *latitude;

@end 
```

这是实现：

```
#import "LocationAwareness.h"

@implementation LocationAwareness
@synthesize longitude;
@synthesize latitude;

- (id)init {

locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self;
locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
[locationManager startUpdatingLocation];
return self;
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation   *)newLocation fromLocation:(CLLocation *)oldLocation {

    // Stops updating location if data has been updated within 10 minutes
    if ( abs([newLocation.timestamp timeIntervalSinceDate: [NSDate date]]) < 600) {

        [locationManager stopUpdatingLocation];
        float latitudedata = newLocation.coordinate.latitude;
        latitude = [NSString stringWithFormat:@"%f", latitudedata];

        float logitudedata = newLocation.coordinate.longitude;
        longitude = [NSString stringWithFormat:@"%f", logitudedata];

    }
}

@end 
```

现在我似乎找不到任何地方告诉我如何在另一个项目中获取纬度或经度属性。我导入了标头，并尝试将 LocationAwareness.latitude 存储到一个我可以使用的变量中，但我存储它的所有内容最终都是空白的。当我开始我的主类并 aloc 初始化一个位置感知对象时，gps 会启动，所以我认为它可以工作，但我似乎对它如何工作以使一切井井有条的了解不够。我已经在互联网上搜索了几个小时。任何人都知道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T02:33:20.103

好吧，这可能会或可能不会导致问题（很有可能），但一个主要问题是您的 init 方法。

开头应该是：

```
self = [super init];
if (self) {
    // Do your initializing as you did above.
}
return self; 
```

**编辑：**
我将您的代码与我的更新一起添加到项目中，效果很好。为了使用它，您应该执行以下操作：

```
LocationAwareness *loc = [[LocationAwareness alloc] init];

// Give it some time to start updating the current location and then
// in a different function:
NSLog(@"%@", loc.latitude); 
```

**编辑 2**
无论您在哪里使用它，您都需要声明一个存储它的属性，以便您可以创建一次并多次引用它。为此，请使用以下代码：

在要使用此对象的对象的标题中，将其与其他属性一起添加：

```
@property (nonatomic, assign) LocationAwareness *location; 
```

然后，在实现文件（.m 文件）的顶部，您应该会看到其他 @synthesize 行，添加以下行：

```
@synthesize location; 
```

然后，根据上面的示例创建您要使用的实际位置实例：

```
self.location = [[LocationAwareness alloc] init]; 
```

现在给它一些时间来确定您的位置并开始提供更新。然后你可以像这样打印位置：

```
NSLog(@"%@", self.location.latitude); 
```

# python - Python GTK 问题

> ID：10004151
> 
> 赞同：1
> 
> 时间：2012-04-04T02:22:20.427
> 
> 标签：python, gtk

我对 gtk 有一个小问题。我将它导入到我之前编写的一些 python 代码中，现在每当我导入它时，它都会在解释器上加载该代码。有没有办法消除这种依赖？

```
>>> import gtk
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/pymodules/python2.6/gtk-2.0/gtk/__init__.py", line 30, in <module>
    import gobject as _gobject
  File "/usr/lib/pymodules/python2.6/gtk-2.0/gobject/__init__.py", line 26, in <module>
    from glib import spawn_async, idle_add, timeout_add, timeout_add_seconds, \
  File "/usr/lib/pymodules/python2.6/gtk-2.0/glib/option.py", line 33, in <module>
    import optparse
  File "/usr/lib/python2.6/optparse.py", line 90, in <module>
    from gettext import gettext
  File "/usr/lib/python2.6/gettext.py", line 49, in <module>
    import locale, copy, os, re, struct, sys
  File "copy.py", line 42, in <module>
    clipboard = gtk.clipboard_get()
AttributeError: 'module' object has no attribute 'clipboard_get' 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T02:37:30.623

您已将其中一个脚本称为“copy.py”，从而[`copy`](http://docs.python.org/library/copy.html)在 stdlib 中隐藏模块。重命名它。

# objective-c - 为什么不尊重跟踪区域

> ID：10004156
> 
> 赞同：1
> 
> 时间：2012-04-04T02:23:05.180
> 
> 标签：objective-c, cocoa

我一直在尝试跟踪区域，并且遇到了一些问题，所以我创建了这个简单的程序作为测试。我在视图的左下角创建了一个跟踪区域（这是窗口的内容视图），但是`mouseEntered`无论我在哪里进入或退出视图，我都会收到和退出消息。我也试过把这段代码放在 init 方法中并`awakeFromNib`得到相同的结果。

```
@implementation Parent //This view is the contentView of the main window

-(void)viewDidMoveToWindow{
    NSLog(@"In viwDidMoveToWindow");
    NSTrackingArea *area = [[NSTrackingArea alloc]initWithRect:NSMakeRect(0,0,50,50) options:NSTrackingInVisibleRect |NSTrackingMouseEnteredAndExited |NSTrackingActiveInActiveApp owner:self userInfo:nil];
    [self addTrackingArea:area];
}

-(void)mouseEntered:(NSEvent *)theEvent {
    NSLog(@"Entered");
}

-(void)mouseExited:(NSEvent *)theEvent {
    NSLog(@"Exited");
}

@end 
```

为什么不尊重跟踪区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:02:30.950

它与您正在使用的选项有关，请尝试使用

```
options:NSTrackingActiveAlways | NSTrackingMouseEnteredAndExited 
```

# spring - Spring MVC 框架容易吗？

> ID：10004157
> 
> 赞同：2
> 
> 时间：2012-04-04T02:23:21.143
> 
> 标签：spring, spring-mvc

我是新手，我擅长 Struts 框架。今天我尝试了一个 Spring MVC 框架的教程。

我尝试的示例网址如下：

[http://static.springsource.org/docs/Spring-MVC-step-by-step/part6.html](http://static.springsource.org/docs/Spring-MVC-step-by-step/part6.html)

我认为他们使本教程变得更加复杂，尤其是在接近尾声时。我在教程的第 5 部分和第 6 部分中看到了一些错误，主要是拼写错误。我发现 Spring 框架组织不当，我们如何知道要扩展哪些类，尤其是当它们的名称如此奇怪时（请原谅我的语言），例如 AbstractTransactionalDataSourceSpringContextTests。

总的来说，我发现 Spring 让事情变得比它应该的要复杂得多。我很惊讶为什么这么大肆宣传 Springs 非常容易学习。

任何建议如何轻松学习弹簧？如何判断要延长什么？有快速参考之类的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T04:06:17.487

您提到的教程涵盖了应用程序的所有层 - 数据访问、业务逻辑和 Web。对于只想了解 Spring MVC 的人，它解决了特定于应用程序 Web 层的问题，这可能比所需的信息更多。可能这就是为什么您觉得教程很复杂的原因。

为了回答您的问题，Spring 很容易学习，因为整个框架旨在与 POJO 一起使用，而不是依赖于特殊的接口、抽象类等。开发人员可以像普通的 Java 应用程序一样编写软件——接口、类和枚举，并使用 Spring 将组件连接起来，而无需特意去实现连接。您所引用的教程试图比经验丰富的程序员在实际应用程序中通常所做的更详细地解释事物，这可能是因为作者希望读者对 Spring 的工作原理有足够的了解，以便更好地理解概念。

在大多数应用程序中（无论它们的大小或性质如何），通常不需要扩展 Spring 类或实现专门的类。Spring 社区非常大，并且存在与 Spring 集成的更大的现成组件生态系统。因此，很少有人必须实现 Spring 组件来实现某些目标。例如，让我们以数据访问层为例。不同的团队喜欢使用不同的方法来访问数据库。有些喜欢原始 JDBC，有些喜欢第三方 ORM，例如 iBatis 或 Hibernate，而有些喜欢 JPA。Spring 发行版包含支持所有这些方法的类。同样，假设有人希望在他们的应用程序中加入声明式事务管理。再次，事务管理可以通过许多不同的方式来完成，并且有大量的事务管理产品可供人们使用。大多数这些产品都可以使用 Spring 集成，使团队可以简单地选择他们想要使用的产品并在他们的 Spring 应用程序中配置它。

最近的 Spring 版本大多取消了基于 XML 的大量配置文件，这些配置文件在 Java 代码之外确实使 Spring 应用程序难以理解。如今，许多事情都可以通过注释来完成。例如，

```
@Controller
public class AuthenticationController
{
    ...
} 
```

表示 AuthenticationController 是一个 Web MVC 控制器类。甚至有一些方法可以避免使用 Controller 注释并遵循约定优于配置的方法来进一步简化编码。

[在http://www.vaannila.com/spring/spring-mvc-tutorial-1.html](http://www.vaannila.com/spring/spring-mvc-tutorial-1.html)上提供了一个很好且简单的 Spring MVC 教程。本教程使用基于 XML 的 Spring bean 配置而不是注解，但概念保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T12:22:11.563

我看过你学的教程，看来你先学错了，你先尝试简单的，而不是教程，你应该先看书我推荐你两本书来了解 Spring 的力量

春季行动和春季食谱。

实际上，您可以使用 STS 一个特殊的 ide 进行 spring 项目开发。它有一些预定义的模板，您不需要自己编写整个配置。

在开始时只看简单的教程，比如 Spring mvc hello world ，表单控制器而不是大的

春天很凉爽，万事如意。

# ruby - 哈希火箭被弃用了吗？

> ID：10004158
> 
> 赞同：101
> 
> 时间：2012-04-04T02:23:28.067
> 
> 标签：ruby, syntax, hash, ruby-1.9, hashrocket

被广泛引用的[RIP Hash Rocket 帖子](http://web.archive.org/web/20130909062027/http://peepcode.com/blog/2011/rip-ruby-hash-rocket-syntax)似乎暗示 Hash Rocket 语法 ( `:foo => "bar"`) 已被弃用，取而代之的是新的 Ruby JSON 风格的散列 ( `foo: "bar"`)，但我找不到任何明确的参考说明 Hash Rocket 形式从 Ruby 1.9 开始，实际上已弃用/不建议使用。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-04-04T02:54:36.370

[那篇](https://stackoverflow.com/a/8796799/479863)博文的作者过于戏剧化和愚蠢， `=>`还是[很有](https://stackoverflow.com/a/8675314/479863) [必要](https://stackoverflow.com/a/9694676/479863)的。尤其是：

1.  您必须将火箭用于无效标签的符号：`:$set => x`有效但`$set: x`无效。在 Ruby 2.2+ 中，您可以用引号解决这个问题：`'$set': x`将做正确的事。

2.  如果您在哈希中使用不是符号的键，例如字符串、整数或常量，则必须使用火箭。例如，`'s' => x`是有效的，但`'s': x`完全不同。

当然，您可以以明显的方式解决上述问题：

```
h = { }
h[:'where.is'] = 'pancakes house?'
# etc. 
```

但这只是丑陋和不必要的。

如果不破坏 Ruby 的哈希，火箭就不会去任何地方。

# javascript - Backbone JS - 用值设置模型属性节点对象

> ID：10004159
> 
> 赞同：0
> 
> 时间：2012-04-04T02:23:48.720
> 
> 标签：javascript, jquery, backbone.js

所以标题有点令人困惑，我认为，但问题是：

我的整个页面都有一个模型，称为 FD.page。我有一个名为过滤器的模型的属性，因此 FD.page.get("filters") 返回一个具有多个属性本身、日期、位置等的对象。

我希望能够为过滤器属性的属性设置值，但我似乎无法弄清楚如何指定该节点。

所以像 FD.page.set("filters.location", "close");

任何帮助都感激不尽。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T02:25:42.063

尝试`FD.page.get('filters')['location'] = 'close';`

不过，这不会在模型上触发更改事件。如果要触发更改事件，则必须在设置后手动触发它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T02:30:56.320

制作`filters`骨干模型

`FD.page.get('filters').set('location', 'close');`

将触发更改事件。

# android - 模拟来自私人号码的来电

> ID：10004162
> 
> 赞同：7
> 
> 时间：2012-04-04T02:24:16.043
> 
> 标签：android, emulation, phone-call

如何在模拟器中模拟来自私人号码的来电？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-04T03:02:19.210

使用模拟器端口上的 telnet 连接到您的 PC，例如

```
telnet localhost 5554 
```

并使用`gsm call`带有数字`#`而不是数字的命令

```
gsm call # 
```

你会在模拟器的手机上接到你的未知电话。

# c# - 在 Live SDK 中使用 async/await

> ID：10004165
> 
> 赞同：4
> 
> 时间：2012-04-04T02:24:43.297
> 
> 标签：c#, asynchronous, windows-phone-7.1, live-connect-sdk

从我所看到的关于将 Async CTP 与事件异步模式一起使用的情况来看，我在这里的代码应该可以正常工作，并且会`var result1 = await tcs1.Task`阻塞直到`clientGetFileList.GetCompleted`触发。然而，最终发生的事情是我被弹回到 GetRestoreStream，`return GetRestoreStreamAwait().Result`它永远不会返回 - 相反，我的应用程序几乎锁定了我。

有人可以向我解释我做错了什么吗？

```
protected override Stream GetRestoreStream()
{
    if (SkyDriveFolderId != null)
        return GetRestoreStreamAwait().Result;

    return Stream.Null;
}

private async Task<Stream> GetRestoreStreamAwait()
{
    LiveConnectClient clientGetFileList = new LiveConnectClient(_session);
    TaskCompletionSource<LiveOperationCompletedEventArgs> tcs1 = new TaskCompletionSource<LiveOperationCompletedEventArgs>();
    EventHandler<LiveOperationCompletedEventArgs> d1 = (o, e) => { tcs1.TrySetResult(e); };

    clientGetFileList.GetCompleted += d1;
    clientGetFileList.GetAsync(SkyDriveFolderId + "/files");
    var result1 = await tcs1.Task;
    clientGetFileList.GetCompleted -= d1;

    // ... method continues for a while
} 
```

**更新：**这段代码似乎一直在移动，但是`task.Start()`扔掉了，`InvalidOperationException`所以我最后从来没有真正得到流。将它包装在 try/catch 中也不会改变任何东西——如果没有 try/catch，InvalidOperationException 会被进一步捕获到堆栈中，而操作会愉快地运行，而不会知道它的结果将永远不会被使用；有了它，`task.Result`就可以像上面的代码一样冻结事物。

```
protected override Stream GetRestoreStream()
{
    if (SkyDriveFolderId != null)
    {
        var task = GetRestoreStreamImpl();
        task.Start();
        return task.Result;
    }

    return Stream.Null;
}

private async Task<Stream> GetRestoreStreamImpl()
{
    var getResult = await GetTaskAsync(SkyDriveFolderId + "/files");

    List<object> data = (List<object>)getResult["data"];
    foreach (IDictionary<string, object> dictionary in data)
    {
        if (dictionary.ContainsKey("name") && (string)dictionary["name"] == BackupFileName)
        {
            if (dictionary.ContainsKey("id"))
            {
                SkyDriveFileId = (string)dictionary["id"];
                break;
            }
        }
    }

    if (String.IsNullOrEmpty(SkyDriveFileId))
    {
        MessageBox.Show("Restore failed: could not find backup file", "Backup", MessageBoxButton.OK);
        return Stream.Null;
    }

    return await DownloadTaskAsync(SkyDriveFileId + "/content");
}

private Task<IDictionary<string,object>> GetTaskAsync(string path)
{
    var client = new LiveConnectClient(_session);
    var tcs = new TaskCompletionSource<IDictionary<string, object>>();

    client.GetCompleted += (o, e) =>
        {
            if (e.Error != null)
                tcs.TrySetException(e.Error);
            else if (e.Cancelled)
                tcs.TrySetCanceled();
            else
                tcs.TrySetResult(e.Result);
        };
    client.GetAsync(path);
    return tcs.Task;
}

private Task<Stream> DownloadTaskAsync(string path)
{
    var client = new LiveConnectClient(_session);
    var tcs = new TaskCompletionSource<Stream>();

    client.DownloadCompleted += (o, e) =>
        {
            if (e.Error != null)
                tcs.TrySetException(e.Error);
            else if (e.Cancelled)
                tcs.TrySetCanceled();
            else
                tcs.TrySetResult(e.Result);
        };
    client.DownloadAsync(path);
    return tcs.Task;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T02:31:40.393

你误解了它的`async/await`工作方式。基本上，您的代码在 var result1 及以下位置阻塞。然而，await 允许的是调用 async 方法（`GetRestoreStream`在这种情况下）的代码在调用前面的长时间运行的任务*时立即返回`await`。如果您不依赖`.Result`，那么您的 GetRestoreStream 方法将完成。但是，由于您需要结果，因此您的 GetRestoreStream 方法在等待 GetRestoreStreamAwait 完成时将变为同步。我将很快添加一些视觉效果。

这是一些示例代码流：

```
-GetRestoreStream calls GetRestoreStreamAwait
---GetRestoreStreamAwait calls an async task
-GetRestoreStreamAwait returns to GetRestoreStream with a pending result
-GetRestoreStream can do anything it wants, but if it calls for the pending result, it will block
---GetRestoreStreamAwait finally finishes its async task and continues through its code, returning a result
-Any code in GetRestoreStream that was waiting for the result receives the Result 
```

这不是最好的图形表示，但希望它有助于解释它。需要注意的是，由于异步的性质，代码流不是您习惯的

所以，我的猜测是，您的应用程序锁定只是因为您尝试访问`Result`尚不可用的内容，而您应该做的就是等待`tcs1.Task`完成。如果您想避免锁定，则需要嵌套调用，以便 GetRestoreStream 也是一个异步方法。但是，如果结果是您最终要寻找的结果，那么您将需要等待返回，或者像往常一样为异步模式设置回调

*请注意，我说的是长时间运行的任务，因为编译器不会浪费时间重写已经完成的代码（如果在调用 await 时确实完成了）

**更新...试试这个**

```
protected override Stream GetRestoreStream()
{
    if (SkyDriveFolderId != null)
        return GetRestoreStreamAwait().Result;

    return Stream.Null;
}

private async Task<Stream> GetRestoreStreamAwait()
{

    try
    {
    LiveConnectClient clientGetFileList = new LiveConnectClient(_session);
    TaskCompletionSource<LiveOperationCompletedEventArgs> tcs1 = new TaskCompletionSource<LiveOperationCompletedEventArgs>();
    EventHandler<LiveOperationCompletedEventArgs> d1 = 
        (o, e) => 
            { 
                try
                {
                    tcs1.TrySetResult(e); 
                }
                catch(Exception ex)
                {
                    tcs1.TrySetResult(null);
                }
            };

    clientGetFileList.GetCompleted += d1;
    clientGetFileList.GetAsync(SkyDriveFolderId + "/files");
    var result1 = await tcs1.Task;
    clientGetFileList.GetCompleted -= d1;

    // ... method continues for a while
   }
   catch(Exception ex)
   {
       return null;
   }
} 
```

# ruby-on-rails-3 - 如何通过 has_many through 关联设置 has_one through 关联？

> ID：10004166
> 
> 赞同：2
> 
> 时间：2012-04-04T02:24:43.857
> 
> 标签：ruby-on-rails-3, associations, has-many, has-one

我有一个用户模型、一个会员模型和一个俱乐部模型。我已经建立了以下协会：

俱乐部.rb

```
has_many :memberships
has_many :members, through: :memberships 
```

会员资格.rb

```
belongs_to :user
belongs_to :club 
```

我现在想要的是在 Club 上有一个 has_one :organizer，它根据在 join 模型中将 Organizer 属性设置为 true 的成员检索单个用户记录。

如何建立这个 has_one 关联？我尝试过通过会员协会，但提出了一个例外，即会员是一个集合并且需要是单数的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T02:27:36.817

我想我只是想通了...但是以防万一其他人需要知道..

```
has_one :membership, conditions: ['memberships.organizer = ?', true]
has_one :organizer, through: :membership, source: :user 
```

# android - 如何将数组列表从扩展 arryadapter 的类传递到活动

> ID：10004170
> 
> 赞同：0
> 
> 时间：2012-04-04T02:25:55.103
> 
> 标签：android

我正在创建一个自定义`listview`，其中我给出了一个复选框。我创建了一个扩展适配器的自定义适配器类。我将这些复选框的值存储在适配器类的数组中。arraylist 的名称是 itemname（您可以在 customadapter 类的底部看到它）。我想将此数组列表发送到一个活动中（为了将这些值存储到数据库中）。由于我正在扩展数组适配器类，因此我不能使用`sharedpreferences`. 能解决这个问题吗？我的适配器类如下。

```
 public class CustomArrayAdapter extends ArrayAdapter<Model> {

        protected static final String MODE_PRIVATE = null;
        private final List<Model> list;
        private final Activity context;

        public CustomArrayAdapter(Activity context, List<Model> list) {
            super(context, R.layout.customlistlayout, list);
            this.context = context;
            this.list = list;
        }

        static class ViewHolder {
            protected TextView mText;
            protected CheckBox mCheckbox;

            public string getItemAtPosition(int i) {
                // TODO Auto-generated method stub
                return null;
            }
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View view = null;
            if (convertView == null) {

                final ArrayList<String> itemname = new ArrayList<String>();
                LayoutInflater inflator = context.getLayoutInflater();
                view = inflator.inflate(R.layout.customlistlayout, null);
                final ViewHolder viewHolder = new ViewHolder();
                viewHolder.mText = (TextView) view.findViewById(R.id.settings_label);
                viewHolder.mCheckbox = (CheckBox) view.findViewById(R.id.check);

                Activity activity = new SettingsActivity();
                viewHolder.mCheckbox.setOnCheckedChangeListener(activity);
                viewHolder.mCheckbox
                        .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                            @Override
                            public void onCheckedChanged(CompoundButton buttonView,
                                    boolean isChecked) {
                                Model element = (Model) viewHolder.mCheckbox
                                        .getTag();  

                                element.setSelected(buttonView.isChecked());
                                **itemname.add(element.getName());**

                            }
                        });
                for (String myValue : itemname) {
                    System.out.println(myValue);
                }
                view.setTag(viewHolder);
                viewHolder.mCheckbox.setTag(list.get(position));
            } else {
                view = convertView;
                ((ViewHolder) view.getTag()).mCheckbox.setTag(list.get(position));
            }
            ViewHolder holder = (ViewHolder) view.getTag();
            holder.mText.setText(list.get(position).getName());
            holder.mCheckbox.setChecked(list.get(position).isSelected());
            return view;
        }
    } 
```

我从一个活动中调用这个适配器类如下

```
ArrayAdapter<Model> settingsadapter = new CustomArrayAdapter(this, getModel()); setListAdapter(settingsadapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T05:44:52.487

首先为您的活动创建空构造函数。喜欢

```
public class MyActivity extends Activity{
    public MyActivity ()
        {

        } 
```

然后在这个活动中使用 ArrayList 参数创建一个函数，该函数可以将 ArrayList 值转储到数据库中。

```
public void save_to_database(ArrayList<String> itemname)
{
 // your code for save values in database...
} 
```

从您的活动中调用此构造函数。

```
settingsadapter = new settingsadapter(getBaseContext(), list, MyActivity.this); 
```

现在，在适配器中创建您的活动对象。

```
public class CustomArrayAdapter extends ArrayAdapter<Model> {

MyActivity mMyActivity; 
```

然后创建具有您的活动的适配器的构造函数

```
public CustomArrayAdapter(Activity context, List<Model> list, MyActivity mActivity)
    {
      this.mMyActivity = mActivity;
    } 
```

现在您可以访问适配器中活动的所有方法。现在，当您需要时，将 ArrayList 传递给活动的方法（该方法会将列表转储到数据库中）

```
mMyActivity.save_to_database(Your ArrayList); 
```

希望这会帮助你。

谢谢...

# php - 检查变量是否为空 - 验证不正确

> ID：10004171
> 
> 赞同：0
> 
> 时间：2012-04-04T02:26:21.710
> 
> 标签：php, isnull

这个问题有点奇怪。如果发送的值为空，为什么显示“不为空”？有什么理由吗？

```
Parametersapplication/x-www-form-urlencoded
lists_owned null
Source
lists_owned=null

<?php
$lists_owned = $_POST['lists_owned'];

var_dump($lists_owned); // string(4) "null"

if(!is_null($_POST['lists_owned'])) {
    echo "Is not null"; I see this echo
}
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T02:27:44.753

`"null"`不是`null`。如果你想检查`"null"`那么你应该使用平等。

```
if($_POST['lists_owned'] != 'null') { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T02:27:51.357

这是因为您的帖子值是一个名为“null”的字符串，而不是实际的 null 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T02:29:13.060

看起来您的值实际上是字符串“null”，而不是值 null。IE

```
<?php
$x = "null";
$y = null;
var_dump($x);
var_dump($y);
?> 
```

输出

```
string(4) "null"
NULL 
```

# c# - 在其父级中拖动图像

> ID：10004173
> 
> 赞同：0
> 
> 时间：2012-04-04T02:26:44.073
> 
> 标签：c#, wpf, imaging

所以，我使用这种方法能够拖动图像：

[在 WPF 中拖动图像](https://stackoverflow.com/questions/294220/dragging-an-image-in-wpf)

效果很好，但问题是它取决于画布，但它会在画布外绘制和拖动图像。这是我正在使用的扩展器，是否可以将自身限制为原始画布大小。

我想要做的是能够（在原始画布大小内）拖动图像以查看开始时不可见的部分。

**扩展器**

```
public class DraggableExtender : DependencyObject
    {
        // This is the dependency property we're exposing - we'll 
        // access this as DraggableExtender.CanDrag="true"/"false"
        public static readonly DependencyProperty CanDragProperty =
            DependencyProperty.RegisterAttached("CanDrag",
            typeof(bool),
            typeof(DraggableExtender),
            new UIPropertyMetadata(false, OnChangeCanDragProperty));

        // The expected static setter
        public static void SetCanDrag(UIElement element, bool o)
        {
            element.SetValue(CanDragProperty, o);
        }

        // the expected static getter
        public static bool GetCanDrag(UIElement element)
        {
            return (bool)element.GetValue(CanDragProperty);
        }

        // This is triggered when the CanDrag property is set. We'll
        // simply check the element is a UI element and that it is
        // within a canvas. If it is, we'll hook into the mouse events
        private static void OnChangeCanDragProperty(DependencyObject d,
                  DependencyPropertyChangedEventArgs e)
        {
            UIElement element = d as UIElement;
            if (element == null) return;

            if (e.NewValue != e.OldValue)
            {
                if ((bool)e.NewValue)
                {
                    element.PreviewMouseDown += element_PreviewMouseDown;
                    element.PreviewMouseUp += element_PreviewMouseUp;
                    element.PreviewMouseMove += element_PreviewMouseMove;
                }
                else
                {
                    element.PreviewMouseDown -= element_PreviewMouseDown;
                    element.PreviewMouseUp -= element_PreviewMouseUp;
                    element.PreviewMouseMove -= element_PreviewMouseMove;
                }
            }
        }

        // Determine if we're presently dragging
        private static bool _isDragging = false;
        // The offset from the top, left of the item being dragged 
        // and the original mouse down
        private static Point _offset;

        // This is triggered when the mouse button is pressed 
        // on the element being hooked
        static void element_PreviewMouseDown(object sender,
                System.Windows.Input.MouseButtonEventArgs e)
        {
            // Ensure it's a framework element as we'll need to 
            // get access to the visual tree
            FrameworkElement element = sender as FrameworkElement;
            if (element == null) return;

            // start dragging and get the offset of the mouse 
            // relative to the element
            _isDragging = true;
            _offset = e.GetPosition(element);
        }

        // This is triggered when the mouse is moved over the element
        private static void element_PreviewMouseMove(object sender,
                  MouseEventArgs e)
        {
            // If we're not dragging, don't bother - also validate the element
            if (!_isDragging) return;

            FrameworkElement element = sender as FrameworkElement;
            if (element == null) return;

            Canvas canvas = element.Parent as Canvas;
            if (canvas == null) return;

            // Get the position of the mouse relative to the canvas
            Point mousePoint = e.GetPosition(canvas);

            // Offset the mouse position by the original offset position
            mousePoint.Offset(-_offset.X, -_offset.Y);

            // Move the element on the canvas
            element.SetValue(Canvas.LeftProperty, mousePoint.X);
            element.SetValue(Canvas.TopProperty, mousePoint.Y);
        }

        // this is triggered when the mouse is released
        private static void element_PreviewMouseUp(object sender,
                MouseButtonEventArgs e)
        {
            _isDragging = false;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:43:07.870

也许我在这里已经完成了，但我认为问题出在 Canvas 的 XAML 中，而不是在 Extender 中。

您是否在 Canvas 上设置了 ClipToBounds="True" 属性，因为它在 Canvas 对象上默认为 false。

```
<Canvas ClipToBounds="True" /> 
```

# string - VBA for Excel 中的 Str 函数向字符串中添加一个字符

> ID：10004175
> 
> 赞同：5
> 
> 时间：2012-04-04T02:27:05.587
> 
> 标签：string, casting, excel, integer, vba

我正在使用 str() 函数将整数转换为字符串

但是，我注意到 str() 函数会向字符串返回一个额外的字符。

例如，`MsgBox(Len(str(1)))`将返回 2。

附加的额外字符是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T02:37:32.693

从 Excel 2010 帮助：

“将数字转换为字符串时，始终为数字的符号保留前导空格。如果数字为正，则返回的字符串包含前导空格，并且隐含加号。”

果然，这条语句在调试窗口中返回 True：

```
? left(str(1),1) = " " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T02:30:53.617

最简单的查找方法：

```
MsgBox(Asc(Right(Str(1),1))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-24T15:11:11.737

[正如this](https://stackoverflow.com/a/17997997/2135406) answer中所指出的，您应该使用该`format()`功能。

# jquery - 寻找 HTML/JQuery 的可拖动复选框列表控件

> ID：10004177
> 
> 赞同：5
> 
> 时间：2012-04-04T02:27:36.470
> 
> 标签：jquery, html, jquery-ui

我想知道是否有一个 JQuery 控件来执行以下操作？

有一个复选框列表，用户除了选中和取消选中之外，还可以拖动以更改其顺序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T03:15:55.483

You could do this pretty easily using [jQuery UI's sortable method](http://jqueryui.com/demos/sortable/).

[Here is a *very basic* example](http://jsfiddle.net/PtskU/) to get you started, using the demo found in the above link, with some checkboxes added.

# django-forms - Django 表单查询

> ID：10004179
> 
> 赞同：0
> 
> 时间：2012-04-04T02:27:43.633
> 
> 标签：django-forms

我看到了这段代码并且有几个问题..如果有人能解释这将非常有帮助。

视图.py

```
def search_page(request):
    pdb.set_trace()
    form = SearchForm()
    bookmarks = []  
    show_results = False
    if 'query' in request.GET:
        show_results = True
        query = request.GET['query'].strip()
        if query:
           form = SearchForm({'query': query})
           bookmarks = Bookmark.objects.filter(title__icontains=query)
    variables = RequestContext(request,{'form': form,
                                       'bookmarks': bookmarks,
                       'show_results': show_results,
                       'show_tags': True,
                       'show_user': True})

    return render_t7tr o_response('search.html', variables) 
```

form.py class SearchForm(forms.Form): query = forms.CharField(label=u'输入要搜索的关键字', widget=forms.TextInput(attrs={'size':32}))

下面的代码行是如何工作的？

如果 request.GET 中的“查询”

'query' 字符串在 request.Get?..当我调试时字典包含的值包含我给出的搜索值。

代码工作正常，但我想了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T02:29:35.347

[映射](http://docs.python.org/library/stdtypes.html#mapping-types-dict)的包含测试会检查键。

> ```
> key in d 
> ```
> 
> > `True`如果*d*有一个键*key* ，则返回，否则`False`。

**编辑：**

Django 解析查询字符串并`request.GET`从中填充。

# linux - 有没有一种简单的方法可以将 gedit 插件从 gnome2 版本转换为 gnome3 版本？

> ID：10004184
> 
> 赞同：0
> 
> 时间：2012-04-04T02:28:06.180
> 
> 标签：linux, gnome, gedit

我想将我的插件转移到 Gnome 3 中的新 gedit（来自 Gnome 2 Gedit），但它们并不都有效。

我已将它们的位置从 ~/,gnome2/gedit 更改为 ~/.local/share/gedit，并将所有文件从 *.gedit-plugin 重命名为 *.plugin，并将这些文件中的标题从[Gedit 插件] 到 [插件]。我现在可以在首选项的插件选项卡中看到它们，但启用它们会导致错误。

有没有简单的修复方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T06:05:12.350

如果您使用python，实际上并不难。您已经转换了 .plugin 文件。在 python 文件中，这是一个典型的差异：

```
-import gtk
-import gedit
-import gobject
-import pango
+from gi.repository import Gtk, GObject, Gedit

.......

-class PluginName(gedit.Plugin):
+class PluginName(GObject.Object, Gedit.WindowActivatable):
+    window = GObject.property(type=Gedit.Window)
+
     def __init__(self):
-        gedit.Plugin.__init__(self)
+        GObject.Object.__init__(self)
         self._instances = {}

-    def activate(self, window):
-        self._instances[window] = PluginNameWindowHelper(self, window)
+    def do_activate(self):
+        self._instances[self.window] = PluginNameWindowHelper(self, self.window)
+
+    def do_deactivate(self):
+        self._instances[self.window].deactivate()
+        del self._instances[self.window]

-    def deactivate(self, window):
-        self._instances[window].deactivate()
-        del self._instances[window]
+    def do_update_state(self):
+        self._instances[self.window].update_ui()

-    def update_ui(self, window):
-        self._instances[window].update_ui()

.......

-        self._action_group = gtk.ActionGroup("PluginNameActions")
+        self._action_group = Gtk.ActionGroup("PluginNameActions")

.......

-             line = document.get_text(line_start, line_end)
+             line = document.get_text(line_start, line_end, False) 
```

前段时间我转换了 6 个插件，这些是我需要的唯一更改。

# android - 在 Eclipse Classic 3.7.2 和 Windows 7-64Bit 上安装存档 ADT 1.7.0 Eclipse 插件时遇到问题

> ID：10004185
> 
> 赞同：0
> 
> 时间：2012-04-04T02:28:15.490
> 
> 标签：android, eclipse, plugins, adt

在这种情况下，我在安装 ADT 1.7.0 Eclipse 插件时遇到了困难：

*   Eclipse 版本是来自 www.eclipse.org 的 Eclipse Classic 3.7.2
*   Windows 7 专业版 64 位 SP1
*   ADT 安装方法使用存档，如[http://developer.android.com/sdk/eclipse-adt.html#installing中所述](http://developer.android.com/sdk/eclipse-adt.html#installing)
*   Java 运行时环境 6 更新 31。

安装进度停止详细：

*“无法完成安装，因为找不到一个或多个必需项。正在安装的软件：Android 开发工具 17.0.0.v201203161636-291853 (com.android.ide.eclipse.adt.feature.group 17.0.0.v201203161636- 291853）缺少要求：Android 开发工具 17.0.0.v201203161636-291853（com.android.ide.eclipse.adt.feature.group 17.0.0.v201203161636-291853）需要 'org.eclipse.wst.sse.core 0.0。 0' 但找不到”*

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T23:15:54.913

对我来说有帮助的是为 Java EE 开发人员安装 Eclipse Indigo。显然，经典版本没有 ADT 所需的一切。

我还以管理员身份运行 Eclipse，但我不确定它是否需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T21:04:00.720

我有同样的问题，终于解决了。我必须为 Java EE Developers 安装 Eclipse Indigo，然后在安装运行时我不得不关闭我的 AVG 2012 一段时间。

这解决了我的问题。

# django - 如何将特定于实例的查询集附加到 Django 中的模型？

> ID：10004193
> 
> 赞同：0
> 
> 时间：2012-04-04T02:29:20.247
> 
> 标签：django, django-models, django-templates, django-queryset, django-managers

我正在使用 Django 1.4 制作一个非常小的用户对用户消息传递应用程序。我想从我的模板中获取用户以直接方式收到的未读消息。我的模型看起来像这样：

```
from django.contrib.auth.models import User

class Message(models.Model):
    sender = models.ForeignKey(User, related_name='messages_sent')
    receiver = models.ForeignKey(User, related_name='messages_received')
    read = models.BooleanField(default=False) 
```

现在我可以轻松访问用户从`user.messages_received`. 不过，我想过滤这个查询集，以便以一种简单的方式快速访问未读消息。我知道我总是可以过滤 queryset `user.messages_received.filter(read=False)`，但我想直接在模板中获取它们，可能像这样：

```
<a href="{% url inbox %}"> Inbox ({{ user.unread_messages.count }})</a> 
```

我怀疑我想做一个经理，但我不知道如何写或在哪里附加它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:53:01.510

我想到了两种方法来实现这一点。

首先，您可以使用**自定义函数**扩展用户模型。

```
from django.contrib.auth.models import User

def unread_messages(self):
    return self.messages_received.filter(read=False)
User.add_to_class('unread_messages', unread_messages) 
```

但这有点骇人听闻。“干净”的方式不是直接扩展 User 模型，而是为您的用户**创建一个 UserProfile**并在那里添加函数。[文档](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)很好地描述了这一点。

在你的情况下：

*模型.py*

```
from django.db import models
from django.contrib.auth.models import User

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    def unread_messages(self):
        return self.user.messages_received.filter(read=False) 
```

*设置.py*

```
AUTH_PROFILE_MODULE = 'appname.UserProfile' 
```

*模板*

```
{{ user.get_profile.unread_messages.count }} 
```

该代码未经测试，但应该可以工作:)

# python - 搜索字符串并仅返回我指定的内容

> ID：10004194
> 
> 赞同：0
> 
> 时间：2012-04-04T02:29:34.643
> 
> 标签：python, python-3.x

希望这个帖子越来越好。。

所以我被困在这个程序的这个功能上，它将返回指定某个关键字的整个单词。

ie - 如果我告诉它在字符串“blah blah blah blah I=1mV blah blah etc?”中查找单词“I=”，它会返回找到它的整个单词，所以在这种情况下，它会返回 I = 1mV。

我尝试了很多不同的方法，例如，

```
text = "One of the values, I=1mV is used"
print(re.split('I=', text)) 
```

但是，这会返回相同的字符串，但其中没有 I，因此它会返回

```
['One of the values, ', '1mV is used'] 
```

如果我尝试正则表达式解决方案，我会遇到数字可能超过 1 位的问题，因此底部的代码仅在数字为 1 位时才有效。如果 I=10mV 是那个值，它只会返回一个，但如果我有两次 [/0-9]，则代码不再适用于只有 1 个值。

```
text = "One of the values, I=1mV is used"
print(re.findall("I=[/0-9]", text))

['I=1'] 
```

当我尝试使用 re.match 时，

```
text = "One of the values, I=1mV is used"
print(re.search("I=", text))

<_sre.SRE_Match object at 0x02408BF0> 
```

什么是检索单词的好方法（在这种情况下，我想检索 I=1mV）并切掉字符串的其余部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T02:37:23.830

更好的方法是首先将文本拆分为单词：

```
>>> text = "One of the values, I=1mV is used"
>>> words = text.split()
>>> words
['One', 'of', 'the', 'values,', 'I=1mV', 'is', 'used'] 
```

然后过滤单词以找到您需要的单词：

```
>>> [w for w in words if 'I=' in w]
['I=1mV'] 
```

这将返回其中包含的所有单词的列表`I=`。然后我们可以只取第一个找到的元素：

```
>>> [w for w in words if 'I=' in w][0]
'I=1mV' 
```

完毕！我们可以做一些清理它的方法是只查找第一个匹配项，而不是检查每个单词。我们可以为此使用生成器表达式：

```
>>> next(w for w in words if 'I=' in w)
'I=1mV' 
```

当然，您可以调整`if`条件以更好地满足您的需求，例如，您可以使用[`str.startswith()`](http://docs.python.org/library/stdtypes.html#str.startswith)检查单词是否以某个字符串开头或[`re.match()`](http://docs.python.org/library/re.html#re.match)检查单词是否与模式匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T04:22:37.807

# 使用字符串方法

作为记录，您尝试将字符串分成两半，`I=`用作分隔符，几乎是正确的。而不是 using `str.split()`，它会丢弃分隔符，您可以使用`str.partition()`，它会保留它。

```
>>> my_text = "Loadflow current was I=30.63kA"
>>> my_text.partition("I=")
('Loadflow current was ', 'I=', '30.63kA') 
```

# 使用正则表达式

更灵活和健壮的解决方案是使用正则表达式：

```
>>> import re
>>> pattern = r"""
... I=             # specific string "I="
... \s*            # Possible whitespace
... -?             # possible minus sign
... \s*            # possible whitespace
... \d+            # at least one digit
... (\.\d+)?       # possible decimal part
... """
>>> m = re.search(pattern, my_text, re.VERBOSE)
>>> m
<_sre.SRE_Match object at 0x044CCFA0>
>>> m.group()
'I=30.63' 
```

这说明了更多的可能性（负数、整数或十进制数）。

注意使用：

*   量词表示你想要的每件事有多少。
    *   `a*`- 零个或`a`多个
    *   `a+`- 最后一个`a`
    *   `a?``a`- “可选” - 一或零
*   带有注释的详细正则表达式（`re.VERBOSE`标志） - 比非详细等价物更容易理解上述模式，`I=\s?-?\s?\d+(\.\d+)`.
*   正则表达式模式的原始字符串，`r"..."`而不是普通字符串`"..."`- 意味着不必转义文字反斜杠。这里不需要，因为我们的模式不使用反斜杠，但有一天你需要匹配`C:\Program Files\...`，那一天你需要原始字符串。

## 练习

*   练习 1：你如何扩展它以使其也可以匹配单位？以及如何扩展它以使其可以匹配单位为`mA`,`A`或`kA`？提示：“交替运算符”。

*   练习 2：你如何扩展它以便它可以匹配工程符号中的数字，即“1.00e3”或“-3.141e-4”？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T02:39:34.600

```
import re
text = "One of the values, I=1mV is used"
l = (re.split('I=', text))
print str(l[1]).split(' ') [0] 
```

`I=`如果您对 l 中的每个奇数索引执行上述操作不止一个，那么 0 是第一个。

这是一种好方法，因为可以写“其中一个值，使用 I = 1mV”，我猜你想知道 I 是 1mv。

顺便说一句，我是电流的，它的单位是安培而不是伏特:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T03:18:01.713

通过您的 re.findall 尝试，您可能想要添加`+`一个或多个。
这里有些例子：

```
import re

test = "This is a test with I=1mV, I=1.414mv, I=10mv and I=1.618mv."

result = re.findall(r'I=[\d\.]+m[vV]', test)

print(result)

test = "One of the values, I=1mV is used"

result = re.search(r'I=([\d\.]+m[vV])', test)

print(result.group(1)) 
```

第一个打印是：`['I=1mV', 'I=1.414mv', 'I=10mv', 'I=1.618mv']`

`I=`除了re.search 示例之外，我已经对所有内容进行了分组，
所以第二个打印是：`1mV`
如果您有兴趣提取它。

# java - PHP运行带有参数作为php变量的java jar文件

> ID：10004196
> 
> 赞同：0
> 
> 时间：2012-04-04T02:30:26.970
> 
> 标签：java, php, html, jar

您好我正在尝试从 PHP 5 执行一个 jar

这是我正在执行的代码：

```
$command = '"java -jar WEB-INF\\lib\\FileReceiver.jar '.$address.' '.$service_port.' \"'.$command.'\" \"'.$filePath.'\""';
exec($command, $out); 
```

但是 jar 没有被执行。我在 firebug 中记录了 $command 变量，并将输出插入到代码中，例如：

```
exec("java -jar WEB-INF\lib\FileReceiver.jar 127.0.1.1 2018 \"docs/document.txt \" \"C:\\apache-tomcat-7.0.26\\webapps\\test\\downloads\\doument.txt\"", $out); 
```

给出正确的输出。我不明白为什么硬编码它有效，但包含相同信息的变量却没有。

有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T02:34:26.363

试试这样

```
$command = escapeshellarg($address).' '.escapeshellarg($service_port).' '.escapeshellarg($command).' '.escapeshellarg($filePath).' ';

exec('java -jar WEB-INF\\lib\\FileReceiver.jar '.$command, $out); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T02:36:49.993

您在第一个片段中过度转义了双引号。

您使用单引号作为文字字符串分隔符，因此您不需要转义双引号。

另外，决赛`'\""'`应该是`'"'`

# javascript - 至少一个数字和一个大写字母的javascript正则表达式

> ID：10004205
> 
> 赞同：2
> 
> 时间：2012-04-04T02:31:50.527
> 
> 标签：javascript, jquery, regex

检查给定字符串是否包含至少一个数字和一个大写字母的正则表达式是什么？提前致谢

我正在这样做

```
function validate_pass{
var var_password = document.getElementById("npassword").value;
else if (!(/^(?=.*\d)(?=.*[A-Z]).+$/).test(var_password))){
    msg = "Password should contain atleast.";

    showErrorMsgPassword(msg);
    $('#npassword').val('');
    $('#cpassword').val('');
    return false;
  }

else return true; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T02:49:44.923

如果希望测试一个字符串以查看它是否具有至少一个数字和至少一个任意顺序的大写字母以及是否允许任何其他字符，那么这将起作用：

```
var str = "abc32Qdef";
var re = /[A-Z].*\d|\d.*[A-Z]/;
var good = re.test(str);​ 
```

在这里使用一堆测试用例进行演示：http: [//jsfiddle.net/jfriend00/gYEmC/](http://jsfiddle.net/jfriend00/gYEmC/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T03:02:18.177

自从我这样做以来已经有一段时间了，我相当肯定有比这更有效的方法。您将需要使用积极的前瞻，但应该有一种方法可以从其中删除通配符：

`/^(?=.*[A-Z])(?=.*\d).*$/`如果匹配条件，此正则表达式 ( ) 将返回整个密码。

`('a3sdasFf').match(/^(?=.*[A-Z])(?=.*\d).*$/);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T02:37:18.080

如下所示：

```
/(\d.*[A-Z])|([A-Z].*\d)/ 
```

测试字符串是否匹配：

```
var str = "abc32dQef";
var is_matched = /(\d.*[A-Z])|([A-Z].*\d)/.test(str); 
```

# asp.net - Asp.net 文件上传控制 hasfile 对于 docx 文件总是为假

> ID：10004206
> 
> 赞同：0
> 
> 时间：2012-04-04T02:31:53.763
> 
> 标签：asp.net, file-upload

这在过去 6 个月左右的时间里莫名其妙地开始发生。用于处理 .docx 文件的相同代码：

```
<asp:FileUpload ID="FileUploader" runat="server" BackColor="#620D14" />

if (FileUploader.HasFile)
    .... 
```

知道什么开始发生了吗？或者至少有人可以推荐使用开源或廉价的替代控件吗？反正我真的不喜欢这个东西，因为它是不可能的风格......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T12:30:14.253

如果您的 docx 文件为空 fileupload.Hasfile 返回 false 但如果您打开 docx 文件并保存某些内容，则从 fileupload.HasFile 获得 true

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T02:37:06.507

[这个](https://stackoverflow.com/questions/7390898/asp-net-c-iis-mime-types-file-upload-conditional)其他问题可能会对您有所帮助。

关于 FileUpload 控件的替代方案，我建议您尝试[Uploadify](http://www.uploadify.com/)。它对我来说非常有用，它比内置的文件上传控件灵活得多。

# html - 重复图像 HTML 和 CSS

> ID：10004208
> 
> 赞同：0
> 
> 时间：2012-04-04T02:32:08.003
> 
> 标签：html, css

我对如何使用 html 和 css 获得重复图像有点困惑。在这里我有这个代码：

```
<html>
<head>
    <title>Test</title>
    <link rel="stylesheet" href="style.css" media="screen" />
</head>
<body>

    <div id="top_background"></div>

</body>
</html> 
```

然后在 style.css 中：

```
/* Reset CSS */

html, body, div, span, h1, h2, h3, h4, h5, h6, p, img, ul, li, fieldset, form, label { margin: 0; padding: 0; border: 0; outline: 0; font-size: 100%; vertical-align: baseline; background: transparent; }

ol, ul { list-style: none; }

:focus { outline: 0; }

/* Content */

#top_background { background: url(images/header.png) repeat-x; } 
```

但是当我加载文件时它只是一个空白网页。取出“repeat-x”不会改变任何东西。我对 html 和 css 还很陌生，所以我可能会做一些完全错误的事情。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T02:36:38.463

因为它是空的，所以你`<div>`有 0 `height`。

您应该在 CSS 中设置高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T03:01:04.077

原因是你的css维度`id="top_background"`没有设置。**默认情况下 div 包含它的宽度 100% 因为 div 是块级元素。**

在您的情况下，您正在重复背景图像，因此我们必须设置 div 的高度才能看到背景图像。

由您决定要设置多少宽度和高度。

**例如：**您想重复您的背景图像`600px`，并且`200px.`请参见下面的 css

```
#top_background 
{ 
    background: url(images/header.png) repeat-x; 
    width:600px;
    height:200px
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T04:43:54.730

您尚未在**#top_background**中定义高度，这就是图像不重复的原因。

因此，每当您在 y 轴或 x 轴上重复图像时，请检查宽度高度并根据您的要求进行设置。

现在您只需添加下面提到的 css 并可以根据您的要求设置宽度。

```
#top_background 
{ 
    background: url(images/header.png) repeat-x; 
    height:200px
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-14T18:34:37.407

尝试使用这个 background-repeat:repeat-x;

# objective-c - @interface 多重继承？

> ID：10004210
> 
> 赞同：1
> 
> 时间：2012-04-04T02:32:16.333
> 
> 标签：objective-c, ios, inheritance, interface

我在我的应用程序中使用了 Objective-C，我对 @interface 声明中的多重继承有疑问。

几乎这就是我的 .h 现在的样子：

```
#import "cocos2d.h"

    @interface UIViewController (Save)

    - (void)saveImage:(UIImage*)image:(NSString*)imageName;
    - (void)removeImage:(NSString*)fileName;
    - (UIImage*)loadImage:(NSString*)imageName;

    @end

    @interface CCLayer (Save)
    - (UIImage*)loadImage:(NSString*)imageName;
    - (BOOL)checkExists:(NSString*)thePath;
    @end 
```

如您所见，我已经两次声明了 loadImage 方法。**我不想这样做。**这也意味着我必须在我的 .m 中有两次相同的代码才能使用该方法。

有什么方法可以将 UIViewController 和 CCLayer 混合到 1 个@interface 中，这样我就不必多次声明它了？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T02:37:11.823

1.  ObjC 没有多重继承。
2.  您不希望`SEL`在同一个类中有多个相同的定义。
3.  您可以声明（并采用）协议。然后您将在声明采用的方法中定义方法 ( `loadImage:`) 。`@interface`您也可以在虚拟类别中声明它，然后`loadImage:`在另一个`@implementation`范围内定义。
4.  对此的替代方法是组合——基本上，您将向您的类添加一个类或协议实例变量并让它执行工作。如果这是公共接口，那么您还可以为其提供访问器，或者您可以根据需要包装它。如果您的 50 个方法`@interface`可以在逻辑上进行细分，那么这是值得考虑的。

# javascript - 讲故事滚动

> ID：10004211
> 
> 赞同：2
> 
> 时间：2012-04-04T02:32:27.483
> 
> 标签：javascript, html, scroll

有人可以确定该站点如何具有滑过页面的效果吗？主要是它如何将一页向上拉到另一页上。是Javascript吗？我认为它做得很好。

[http://hire.visualidiot.com/typestacks](http://hire.visualidiot.com/typestacks)

谢谢！

乔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T03:01:51.217

helixed 的回答解释了他们是如何做到的。但是，如果您想自己重新创建效果，请考虑使用 Parallaxjs，而不是使用潜在的抄写代码。

查看演示站点：[http ://stolksdorf.github.com/Parallaxjs/](http://stolksdorf.github.com/Parallaxjs/)

和来源：[https ://github.com/stolksdorf/parallaxjs/](https://github.com/stolksdorf/parallaxjs/)

编辑：该网站存在错误，请尝试按住箭头键几秒钟，然后再松开。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T02:48:14.570

我在 Safari 中打开它并禁用了 JavaScript。滑动效果消失了（尽管它很好地退化了）。显然，JavaScript 必须以某种方式参与其中。好的，所以我打开了 Chrome 开发者工具并查看了资源。有一个名为[handler.js](http://hire.visualidiot.com/assets/js/handler.js)的脚本。我打开它，果然有一些记录良好的代码。看起来它正在使用[jQuery 动画](http://api.jquery.com/animate/)。看一下脚本。你应该能够从那里弄清楚。

# ssl - 如何强制 Disqus 对所有请求使用 HTTPS？

> ID：10004213
> 
> 赞同：5
> 
> 时间：2012-04-04T02:32:35.570
> 
> 标签：ssl, https, disqus

我正在使用以下代码在通过 HTTPS 加载的页面上加载 Disqus，如[本答案](https://stackoverflow.com/questions/9780140/how-to-enable-ssl-support-on-disqus/9835119#9835119)中所建议的那样。

```
 <div id="disqus_thread"></div>
  <script type="text/javascript">
      var disqus_shortname = 'our-shortname';
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js?https';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script> 
```

请注意，我已将 embed.js 的请求更改为`https`而不是`http`，并且我也已添加`?https`到请求的末尾，我认为这应该强制使用 HTTPS。

初始请求按计划通过 HTTPS 进行，但它通过 HTTP 发出辅助请求，这[是 Chrome 讨厌](https://support.google.com/chrome/bin/answer.py?hl=en-GB&answer=95617)的（我得到了挂锁图标上的红色叉号）。

从 Chrome 控制台：

```
The page at https://our-website.com/blog-post-name ran insecure content from http://juggler.services.disqus.com/event.js?thread=635675380&forum=our-shortname...[long query string] 
```

这是让 Disqus 在所有请求上使用 ssl 的正确方法，还是我错过了一步？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T16:11:29.847

这似乎是 Disqus 本身的一个问题。我们让 Disqus 通过 SSL 在几个 Drupal 站点中使用相同的方法正常工作，但正如您所描述的，最近两个站点都让 Disqus 开始在 IE 和 Chrome 中引起 SSL 警告。

我做了一些挖掘，我看到在 embed.js 中定义并在 thread.js 中调用的 DISQUS.useSSL 函数更新了一些 URL（特别是 ["disqus_url","re​​altime_url","uploads_url"]）如果在设置中找到 https，则通过将其 URL 中的 http 替换为 https 来 Disqus json 设置对象。juggler_url 没有得到相同的处理，因此它没有更新为通过 SSL 加载。我不确定 juggler 的目的是什么，但似乎该 URL (http://juggler.services.disqus.com/) 在任何情况下都不会通过 SSL 加载，所以即使它的 url 更改为 https，它仍然行不通。

所以也许 Disqus 最近做出了改变，因为我们之前有这个工作？我们正在与他们一起解决这个问题，因为这似乎不是我们的配置问题......

**更新：**

显然 Disqus 推出了一项不支持 SSL 的新服务。这就是生成不安全加载的额外脚本的原因，从而触发了安全警告。Disqus 为我们的特定帐户禁用了这项新服务（他们没有告诉我们名称），现在 SSL 再次按预期工作。因此，解决方案是只要求他们使您的帐户符合 SSL 规定，这应该会处理好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T08:44:40.373

找到了这篇文章，它提供了解决方案： http: [//help.disqus.com/customer/portal/articles/542119-can-disqus-be-loaded-via-https-](http://help.disqus.com/customer/portal/articles/542119-can-disqus-be-loaded-via-https-)

基本上，使用 Disquss 2012 是不可能的（还），但将其关闭并更改嵌入 src，使其使用 https:// 并添加 ?https 参数：

```
dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js?https'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T02:01:55.857

在过去的几个月里，我断断续续地遇到了这个问题，并且被迫完全禁用了 Disqus。最初，我联系了 Disqus，看看他们是否可以在他们这边进行禁用非 SSl 兼容功能的开关，这工作了一段时间，但混合内容问题不断再次出现。

似乎发生的情况是，尽管 Disqus 强制其 count.js javascript 的 https 版本，count.js 仍出于某种原因重定向到 mediacdn.disqus.com 而不是 securecdn.disqus.com。如果在插件编辑器中手动附加 ?https 以强制重定向到 securecdn.disqus.com，则问题会在第一次调用 CDN 时消失，但在随后调用 CDN 时会添加查询字符串 ?https 到计数中。 js 调用，重定向只是恢复到 mediacdn.disqus.com。我已经尝试过很多次了。

关于这个问题的烦人之处在于，我的网站上创建混合内容通知的 SSL 页面甚至没有评论部分。所以 Disqus 在页面上不必要地加载了它的 javascript。

我喜欢 Disqus，但令我难以置信的是，他们不会通过允许用户有选择地禁用 javascript 或通过实施适用于所有情况的安全 cdn 版本来解决此问题。我希望他们能解决这个问题。

他们还告诉我 Disqus 2012 不支持 HTTPS（尽管将来会支持）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-13T20:38:36.627

显然 Disqus 推出了一项不支持 SSL 的新服务。这就是生成不安全加载的[额外](http://www.karelsantralservisii.com)脚本的原因，从而触发了安全警告。

# naudio - 所有传入通道必须具有相同的格式参数名称：inputStreams.WaveFormat

> ID：10004216
> 
> 赞同：1
> 
> 时间：2012-04-04T02:33:01.077
> 
> 标签：naudio

我使用 NAudio。在一切都很好之前。但是昨天出现了一个错误：

所有传入通道必须具有相同的格式参数名称：inputStreams.WaveFormat

混合器.AddInputStream(audio32);

我找不到错误原因！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:37:01.783

混音器的所有输入必须具有相同的格式。这意味着相同的采样率、相同的位深度和相同数量的通道（不能混合单声道和立体声）。比较`mixer.WaveFormat.ToString()`和`audio32.WaveFormat.ToString()`你会发现有什么不同。

# android - 无法使 TableLayout 中的行水平居中

> ID：10004218
> 
> 赞同：3
> 
> 时间：2012-04-04T02:33:23.353
> 
> 标签：android, tablelayout, android-tablelayout

我无法让 TableLayout 中的行在屏幕上居中。我正在尝试创建一个 4x4 的可点击图像表，并希望它们在屏幕上居中。画完它们左对齐，我希望它们在两边都有空间居中。这是我的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingTop="20dp">

        <TableRow android:layout_gravity="center_horizontal">

            <ImageView android:src="@drawable/rocket"
                android:layout_width="60dp"
                android:layout_height="60dp" 
                android:padding="3dp"
                android:layout_gravity="center" />
            <ImageView android:src="@drawable/rocket"
                android:layout_width="60dp"
                android:layout_height="60dp" 
                android:padding="3dp" 
                android:layout_gravity="center" />
            <ImageView android:src="@drawable/rocket"
                android:layout_width="60dp"
                android:layout_height="60dp" 
                android:padding="3dp" 
                android:layout_gravity="center" />
            <ImageView android:src="@drawable/rocket"
                android:layout_width="60dp"
                android:layout_height="60dp" 
                android:padding="3dp" 
                android:layout_gravity="center" />

        </TableRow>

        <TableRow android:layout_gravity="center_horizontal">

            <ImageView android:src="@drawable/rocket"
                android:layout_width="60dp"
                android:layout_height="60dp" 
                android:padding="3dp" />
            <ImageView android:src="@drawable/rocket"
                android:layout_width="60dp"
                android:layout_height="60dp" 
                android:padding="3dp" />
            <ImageView android:src="@drawable/rocket"
                android:layout_width="60dp"
                android:layout_height="60dp" 
                android:padding="3dp" />
            <ImageView android:src="@drawable/rocket"
                android:layout_width="60dp"
                android:layout_height="60dp" 
                android:padding="3dp" />

        </TableRow>

        <TableRow android:layout_gravity="center_horizontal">

            <ImageView android:src="@drawable/rocket"
                android:layout_width="60dp"
                android:layout_height="60dp" 
                android:padding="3dp" />
            <ImageView android:src="@drawable/rocket"
                android:layout_width="60dp"
                android:layout_height="60dp" 
                android:padding="3dp" />
            <ImageView android:src="@drawable/rocket"
                android:layout_width="60dp"
                android:layout_height="60dp" 
                android:padding="3dp" />
            <ImageView android:src="@drawable/rocket"
                android:layout_width="60dp"
                android:layout_height="60dp" 
                android:padding="3dp" />            
        </TableRow>

    </TableLayout>

</LinearLayout> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T11:34:37.353

尝试使用**android:layout_gravity="center_horizo​​ntal"** 如下

```
 <TableRow android:layout_gravity="center_horizontal" 
          android:layout_weightsum = "4">

                <ImageView android:src="@drawable/rocket"
                    android:layout_width="60dp"
                    android:layout_height="60dp" 
                    android:padding="3dp"
                    android:layout_weight = "1" />
                <ImageView android:src="@drawable/rocket"
                    android:layout_width="60dp"
                    android:layout_height="60dp" 
                    android:padding="3dp"
                    android:layout_weight = "1"  />
                <ImageView android:src="@drawable/rocket"
                    android:layout_width="60dp"
                    android:layout_height="60dp" 
                    android:padding="3dp"
                    android:layout_weight = "1"  />
                <ImageView android:src="@drawable/rocket"
                    android:layout_width="60dp"
                    android:layout_height="60dp" 
                    android:padding="3dp"
                    android:layout_weight = "1"  />            
            </TableRow> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-04T02:43:40.400

通常我们使用 layout_gravity 来对齐。

尝试

```
android:gravity="center_horizontal" 
```

在你的代码中。

`android:gravity`将数据对齐到水平中心。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-28T15:12:30.057

在您的情况下， bieno002，请确保您`<TableLayout>`已`layout_width`设置为`"wrap_content"`. 这将给它两侧呼吸的空间。

然后，只需将 a 添加`android:layout_gravity="horizontal"`到您的`<TableLayout>`节点。像这样：

```
<TableLayout android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal">
    <TableRow>
        <TextView (or whatever)>
        <TextView (or whatever)>
    </TableRow>
</TableLayout> 
```

# php - 按字母列出，将包含少量条目的字母组合在一起（PHP 或 JS）

> ID：10004220
> 
> 赞同：5
> 
> 时间：2012-04-04T02:34:05.567
> 
> 标签：php, javascript, html-lists, alphabetical

我正在开发一个包含长列表名称的 Web 应用程序。客户最初希望将名称按字母拆分为`div`s，以便轻松跳转到列表中的特定名称。

现在，查看列表，客户指出了几个只有一两个名字的字母。他现在想知道，如果每个字母中只有几个名字，我们是否可以组合几个连续的字母。

（请注意，根本不显示没有名称的字母。）

我现在要做的是让数据库服务器返回一个排序列表，然后保留一个包含当前字符的变量。我遍历名称列表，递增字符并在到达每个字母时打印开始和结束`div`以及标签。`ul`我知道如何调整这段代码来组合一些字母，但是，我不确定如何处理的一件事是特定的字母组合是否是最好的组合。换句话说，假设我有：

*   `A`- 12 个名字
*   `B`- 2 个名字
*   `C`- 1 个名字
*   `D`- 1 个名字
*   `E`- 1 个名字
*   `F`- 23 个名字

我知道如何与一个团体结束`A-C`，然后`D`自己拥有。我正在寻找的是一种*有效*的方式来实现它`A`应该单独存在，然后`B-D`应该在一起。

我不确定从哪里开始看这个。

如果有任何不同，此代码将在 Kohana 框架模块中使用。

* * *

2012 年 4 月 4 日更新：

这是我需要的澄清：

假设我在一个组中想要的最少项目数是 30。现在假设字母 A 有 25 个项目，字母 B、C 和 D 各有 10 个项目，字母 E 有 32 个项目。我想不理会A，因为结合B+C+D会更好。组合它们的简单方法是 A+B、C+D+E——这不是我想要的。

换句话说，我需要最接近每组最小值的最佳拟合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:35:44.997

如果一封信包含超过 10 个姓名，或者您设置的任何合理限制，请不要将其与下一个合并。但是，如果您开始组合字母，您可能会一直运行直到收集到 15 个左右的名称，只要没有单个字母超过 10 个。这不是一个通用的解决方案，但我会这样解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T17:30:58.170

我用 PHP 想出了这个函数。它将组合中包含超过 $ammount 名称的字母分组。

```
function split_by_initials($names,$ammount,$tollerance = 0) {
    $total = count($names);
    foreach($names as $name) {
        $filtered[$name[0]][] = $name;
    }
    $count = 0;
    $key = '';
    $temp = array();
    foreach ($filtered as $initial => $split) {
        $count += count($split);
        $temp = array_merge($split,$temp);
        $key .= $initial.'-'; 
        if ($count >= $ammount || $count >= $ammount - $tollerance) {
            $result[$key] = $temp;
            $count = 0;
            $key = '';
            $temp = array();
        }
    }
    return $result;
} 
```

第三个参数用于当您想将组限制为一个没有指定数量但足够接近的单个字母时。

像我想分成 30 个一组但 a 有 25 个这样的东西，如果您将公差设置为 5，则 A 将被单独留下，其他字母将被分组。

我忘了提，但它返回一个多维数组，其中包含的字母作为键，然后是它包含的名称。就像是

```
大批
(
    [ABC-] => 数组
        (
            [0] => 班迪斯卑尔根
            [1] => 艾瑞洛厄尔
            [2] => 卡门米兰达
        )
)

```

这不完全是您所需要的，但我认为它已经足够接近了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T07:48:01.793

使用 mrsherman 提出的[jsfiddle](https://stackoverflow.com/users/510314/mrtsherman "谢尔曼先生")，我想出了一些可行的方法：http: [//jsfiddle.net/F2Ahh/](http://jsfiddle.net/F2Ahh/)

显然，这将用作伪代码，可以应用一些使其更有效的技术。但这可以完成工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-05T03:48:10.707

Javascrip 版本：具有排序和符号分组的增强版本

```
function group_by_initials(names,ammount,tollerance) {
        tolerance=tollerance||0;
        total = names.length;
        var filtered={}
        var result={};
        $.each(names,function(key,value){
            val=value.trim();
            var pattern = /[a-zA-Z0-9&_\.-]/
            if(val[0].match(pattern)) {
                intial=val[0];
            }
            else
            {
                intial='sym';
            }
            if(!(intial in filtered))
                filtered[intial]=[];

            filtered[intial].push(val);
        })
        var count = 0;
        var key = '';
        var temp = [];
        $.each(Object.keys(filtered).sort(),function(ky,value){
            count += filtered[value].length;
            temp = temp.concat(filtered[value])
            key += value+'-'; 
            if (count >= ammount || count >= ammount - tollerance) {
                key = key.substring(0, key.length - 1);
                result[key] = temp;
                count = 0;
                key = '';
                temp = [];
            }
        }) 
        return result;
    } 
```

# javascript - youtube onStateChange 事件不起作用

> ID：10004221
> 
> 赞同：0
> 
> 时间：2012-04-04T02:34:10.467
> 
> 标签：javascript, youtube-api, dom-events

一段时间以来，我一直在抨击这一点，需要一些新鲜的眼光：

当嵌入式视频状态发生变化时，我正在尝试使用 youtube JS api 调用函数。但由于某种原因，事件似乎正在触发，我在控制台中没有收到任何错误。

HTML：

```
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="630" height="350" id="bannerVideo">
    <param name="movie" value="http://www.youtube.com/v/6Yfd1uGYgk8?enablejsapi=1&version=3&playerapiid=ytplayer" />
    <param name="allowfullscreen" value="true" />
    <param name="allowscriptaccess" value="always" />
    <!--[if !IE]>-->
    <object type="application/x-shockwave-flash" data="http://www.youtube.com/v/6Yfd1uGYgk8?enablejsapi=1&version=3&playerapiid=ytplayer" width="630" height="350">
        <param name="allowfullscreen" value="true" />
        <param name="allowscriptaccess" value="always" />
        <!--<![endif]-->
        <a href="http://www.adobe.com/go/getflashplayer">
            <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
        </a>
        <!--[if !IE]>-->
    </object>
    <!--<![endif]-->
</object> 
```

Javascript：

```
function onYouTubePlayerReady(playerId) {
    //alert(playerId);
    ytplayer = document.getElementById("bannerVideo");
    //alert(2);
    ytplayer.addEventListener("onStateChange", "onytplayerStateChange");
    //alert(3);
    //ytplayer.addEventListener("click", function(){alert('click');});
}

function onytplayerStateChange(newState) {
    alert("Player's new state: " + newState);
} 
```

示例网站： [http ://dev.stewartknapman.com/ytPlayer/](http://dev.stewartknapman.com/ytPlayer/)

我使用的代码是从 youtube api 站点直接复制和粘贴的，我正在使用 swf 对象嵌入代码。我正在使用静态嵌入，因为我将用 php 改变一些东西，但这不重要......对吗？我将所有代码移到它自己的文件中只是为了测试，它托管在我的开发服务器上，所以它不应该是沙盒问题。我还尝试在每一行之后发出警报，以确保 addEventListener 函数没有失败。（我在示例代码中留下了警报，但将它们注释掉了。）

在搜索了有关此错误的先前帖子后，我发现它们都通过将 ID 添加到正确的元素或将回调函数解析为字符串来解决。所以我双重和三重检查这些东西，但这似乎不是问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:12:17.923

您是否尝试过使用 SWFObject 方法（如 YouTube API 中所述）初始化 Flash 嵌入？

```
var params = { allowScriptAccess: "always" };
var atts = { id: "myytplayer" };
swfobject.embedSWF("http://www.youtube.com/v/VIDEO_ID?enablejsapi=1&playerapiid=ytplayer&version=3",
                   "ytapiplayer", "425", "356", "8", null, null, params, atts); 
```

将您的标签替换为上述内容并将其配置为您的设置。

# xcode - 没有可用的临时 ios 设备

> ID：10004225
> 
> 赞同：0
> 
> 时间：2012-04-04T02:35:32.510
> 
> 标签：xcode, ios-provisioning

我的 Mac 有 Snow Leopard 和 Xcode about shows 4.2 (4c199) 我的 iphone4 有一个更新，现在它有 ios5.1（以前是 ios5.01）

当我尝试在 ios 设备目标上运行时，构建运行良好，但安装失败，“没有可用的临时 ios 设备与兼容的 ios 版本”。

当我查看 Xcode 管理器时，我可以看到类似的情况：“XXXXXX 的 iPhone”上的 iOS 版本与使用此 iOS SDK 安装支持开发的任何 iOS 版本都不匹配。请将设备恢复到以下列出的操作系统版本，或更新到最新版本的 iOS SDK；可在此处获得。这是组织者展示的内容：

安装在 XXXXX 的 iPhone 5.1 (9B176) 上的操作系统

Xcode 支持的 iOS 版本 最新 5.0 (9A334) 4.3 4.2 (8C134) 4.2

这里的“最新”是什么意思？我希望我不需要安装 Xcode 4.3，因为它需要在项目中间移动到 Mountain Lion？

在此更新之前，我认为以前的东西可以正常工作（最近我只在模拟器中工作，但在此之前，iPhone 上的一切正常）。感谢您提前提供任何帮助。问候，维克多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T02:51:41.063

您的错误是将您的 iphone 更新到 IOS 5.1，因为您当前的 xcode 版本不支持它。所以基本上，您要么必须将 IOS 设备降级到 5.0，要么必须升级到 Lion（不是山狮），然后安装支持 IOS 5.1 的最新版本的 xcode。

降级可能是个婊子顺便说一句，所以我认为狮子是你最好的选择。我很快就会这样做。希望这能让事情更清楚一点！祝你好运！

# java - 绘制和重绘以及创建 JFrame/JPanel

> ID：10004227
> 
> 赞同：3
> 
> 时间：2012-04-04T02:35:39.450
> 
> 标签：java, image, swing, jframe, jpanel

在我开始知道这一点之前：我对 Java 和编程非常陌生。我如何正确地将“grass.jpg”绘制到屏幕上？

```
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.ImageIcon;
import java.util.Random;
import java.awt.*;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

public class Game extends Canvas {
private static int Height = 300, Width = 600;  //25x50
private Random generator = new Random();

private String[][] TerrainList = new String[12][12];

public void GameSetup() {
    JFrame container = new JFrame("CARSSémon");

// get hold the content of the frame and set up the resolution of the game
JPanel panel = (JPanel) container.getContentPane();
panel.setPreferredSize(new Dimension(Width,Height));
//panel.setLayout(null);

    //setBounds(0,0,800,600);
//panel.add(this);

// finally make the window visible
container.pack();
container.setResizable(false);
container.setVisible(true);
    container.setLocationRelativeTo(null);  //Centers screen

    container.addWindowListener(new WindowAdapter() {
    public void windowClosing(WindowEvent e) {
        System.exit(0);
    }
    });

    PrepareTerrain();
    PreparePlayer();

}

public void PrepareTerrain() {

  for (int a=0; a<=11; a++){
   for (int b=0; b<=11; b++){
      TerrainList[a][b]="grass";   //Sets defult terrain of grass
   }
  }

  int BushLocationx = generator.nextInt(12);
  int BushLocationy = generator.nextInt(12);

  BushCheck(BushLocationx,BushLocationy);  //Checks to see if it can make bushs at the location

}

@Override
public void paint(Graphics g) {
super.paint(g);
// Draw an Image object
Image grass = new ImageIcon("grass.jpg").getImage();
Image bushes = Toolkit.getDefaultToolkit().getImage("bushes.jpg");
g.setColor(Color.BLACK);
g.drawImage(grass, 0, 0, null);
g.drawImage(grass, 0, 50, null);
g.drawImage(grass, 50, 0, null);
g.drawImage(grass, 200, 200, null);
}

public void DrawTerrain() {

  for (int r=0; r<=11; r++){
   for (int c=0; c<=11; c++){

   }
  }
}

private void BushCheck(int x, int y){

}

public void PreparePlayer() {

}

public static void main(String[] args) {

    Game G =new Game();
    G.GameSetup();

}

} 
```

现在我显然意识到这个程序基本上没有实现，但我想如果我什至不能显示任何图片，开始实现的意义何在？

我的问题是我无法弄清楚为什么 .jpgs 没有被显示。创建and`paint();`时不应该调用该方法吗？代码非常混乱，但我认为最好包含所有代码。`JFrame``JPanel`

万一这很重要，这最终将成为一款类似于 Pokemon 的游戏，其中运行窗口由许多 16x16 像素的正方形组成，玩家可以在上面移动。在开始之前，我想尝试在随机位置输出一些图像。我一直在阅读类似的问题并查看示例，我刚刚阅读了一段关于图形的 Java 文本，但只能找到有关加载图像的信息，而不是通过绘画显示的信息。如果有人可以通过正确的方式指出我，将不胜感激。（我意识到我很可能完全需要重新启动，并且正在做完全错误的事情，但你能做的任何事情都会有所帮助。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T03:33:21.683

> 我刚刚阅读了大量关于图形的 Java 文本，但只能找到有关加载图像的信息，而不是通过绘图显示的信息。

对于口袋妖怪风格的游戏，我认为使用`JLabel`每个图标/图像不会带来任何好处。反而：

*   创建一个`BufferedImage`所需大小的游戏区域。
*   获取`Image`您可能需要绘制的每个较小图标的实例（字符、地形中的元素等）并将它们绘制到`Graphics`main `BufferedImage`¹的实例。
*   要显示主要的“游戏”图像，有两个不错的选择：
    1.  将主图像添加到 a`JLabel`并将其添加到 a `JPanel`，调用`label.repaint()`.
    2.  将游戏图像直接绘制到`Graphics`提供`paintComponent()`给`JComponent`.

对于最后一部分，我会推荐选项 1。

### 1\. EG

```
public void gameRenderLoop() {
    Graphics2D g2 = gameImage.createGraphics();
    g2.drawImage(playerImage, 22, 35, this);
    ...
    g2.dispose();
} 
```

### 处理`BufferedImage`&的例子`Graphics`

1.  [绘画图像](https://stackoverflow.com/a/8214990/418556)的非常简单的例子。
    ![](../Images/a30a512643b1a150d53d56b1b846dbfe.png)
2.  [处理文本和剪辑的](https://stackoverflow.com/a/6296381/418556)更复杂的示例。
    ![](../Images/ece95cff85ba4d2b70119d5522f685a6.png)
3.  [显示具有透明度的图像绘画](https://stackoverflow.com/a/7133370/418556)的略有不同的大头钉（扩展 a `JLabel`）。 ![](../Images/7b2621de99198947b0885df4fb30169a.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T02:39:44.470

不要重新发明轮子。使用 a[`JLabel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLabel.html#JLabel%28javax.swing.Icon%29)和 an[`ImageIcon`](http://docs.oracle.com/javase/7/docs/api/javax/swing/ImageIcon.html)为您绘制图像。只需将其添加到 a 即可`JPanel`。

# php - 按元素排序数组

> ID：10004228
> 
> 赞同：1
> 
> 时间：2012-04-04T02:35:55.733
> 
> 标签：php, arrays, sorting, multidimensional-array

我有一个非常大的多维数组，我想按元素的值对其进行降序排序。这是数组的一个示例：

```
[match_info]  
    [123]  
        [match_id] => [123]  
    [124]  
        [match_id[ => [124] 
```

所以真的，我想我想对数组下一层的初始“名称”的数据进行排序 - 所以是 123 和 124，而不是 [match_id] （即使它们是相同的值，我觉得最好从列出的第一个值开始排序）。我一直在看 usort 但不完全理解比较功能。任何帮助都是极好的！

此外，我正在寻找的结果是 [124] 高于 [123] ：P

这是数组的真实摘录：http: **[//pastebin.com/DTngBiH5](http://pastebin.com/DTngBiH5)**（我不想链接到您的外部站点，但是...太大了）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T02:49:48.520

看看[krsort](http://php.net/manual/en/function.krsort.php)函数。它以相反的顺序按键对数组进行排序（如果不需要反向，则只需 ksort ）。

```
krsort($array['match_info']); 
```

# inotifypropertychanged - 除了 INotifyPropertyChanged 之外的东西？

> ID：10004234
> 
> 赞同：0
> 
> 时间：2012-04-04T02:36:57.550
> 
> 标签：inotifypropertychanged

我有以下属性和伪代码方法：

```
private DataModelMember _PropertyMember = new DataModelMember();
public DataModelMember PropertyMember
{
    get { return _PropertyMember; }
}

void GetWCFData()
{
    DataModel d = client.getWCFData();
    this._PropertyMember = d.result.anotherclass; //*(DataModelMember is anotherclass)
} 
```

因此，“this._PropertyMember = value”实际上确实更改了私有成员，但是它不会更新内部的任何属性（如数据绑定所示）。似乎我的“DataModelMember”类需要继承一些其他接口来通知类副本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T02:45:23.387

`INotifyPropertyChanged`不是魔法。每当属性更改时，
您都需要自己引发事件。`PropertyChanged`

# json - 使用 UTF-8 编码的 Jackson ObjectMapper？

> ID：10004241
> 
> 赞同：48
> 
> 时间：2012-04-04T02:37:29.547
> 
> 标签：json, jackson

有没有办法告诉杰克逊在序列化和反序列化对象时使用 UTF-8 编码`ObjectMapper`？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-04-04T17:14:07.693

Jackson 自动检测源代码中使用的编码：根据 JSON 规范，只有 UTF-8、UTF-16 和 UTF-32 是有效的编码。不能使用其他编码（如 Latin-1）。因此，自动检测很容易并由解析器完成——因此不接受编码检测。因此，如果输入是 UTF-8，它将被这样检测。

对于输出，UTF-8 是默认值；但是如果您明确想要使用另一种编码，您可以`JsonGenerator`明确创建（使用采用 的方法`JsonEncoding`），并将其传递给`ObjectMapper`.

或者，在这两种情况下，您当然可以手动构造`java.io.Reader`/ `java.io.Writer`，并使其使用您想要的任何编码。

# javascript - Ext js：如何在 DOM 中移动元素

> ID：10004246
> 
> 赞同：2
> 
> 时间：2012-04-04T02:38:40.310
> 
> 标签：javascript, dom, extjs, dom-manipulation

Ext 中是否有一种很好的方式来移动 DOM 中的元素？我想将元素 'iShouldBeInsideTheBox' 移动到 'box' 元素内，然后回到它在两个 p 元素之间的原始位置：

```
<p>
    surrounding text
</p>
<p id="iShouldBeInsideTheBox">
    This should be inside the box
</p>
<p>
    surrounding text
</p>
<p id="box">
    Some content in the box
</p> 
```

在 jQuery 中我花了四行代码（小提琴： http: [//jsfiddle.net/F2PXw/19/](http://jsfiddle.net/F2PXw/19/)），但我想不出在 Ext（或纯 JS，如果它是可靠的）中做到这一点的简单方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:03:08.440

你要什么版本？？

分机 4.0.7：http: [//jsfiddle.net/mohammad_erdin/cdLPA/](http://jsfiddle.net/mohammad_erdin/cdLPA/)

但是，应该在旧版本中工作......
永远不要尝试:)

还有一件事：
请仔细看，区别`Ext.get`和`Ext.query`
没有`#`char`Ext.get`

# objective-c - 我可以将 NSInteger 作为方法的可选参数吗？

> ID：10004247
> 
> 赞同：0
> 
> 时间：2012-04-04T02:38:48.030
> 
> 标签：objective-c, ios, core-data, nsinteger

我想有一种方法

```
setData:(SomeClassName *)data inPosition:(NSInteger)position 
```

在实现中，检查 nil 作为位置。这个想法是，如果提供了位置，我将使用它，如果没有，我将自动分配它。

问题是我不能在没有编译器警告的情况下将 NULL 或 nil 传递给它。

我相信我在其他地方看到过这种模式（可选参数）。我认为它可能与 NSIndexPath 有关。

我应该使用 NSNumber 作为包装器吗？还是有其他秘密？

顺便说一句，我考虑使用单独的方法 - setData: 和 setData:inPosition:。但问题是“数据”是一个核心数据创建属性，而不是常规 ivar，所以当我真正想要设置该值时，我必须记住发送所有 KVO 消息。例如，在 setData:withPosition 中，我不能调用标准的 setData: - 它会覆盖我对该位置所做的任何工作。

也会有兴趣知道这两者中哪个是“更好”的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T02:53:29.897

@Justin 的方法通常是最合适的。但是，对于您关于`setData:`KVO 的问题，有几点需要注意：

*   只要方法名为 ，就会自动发送 KVO 通知`setFoo:`。即使您覆盖`setFoo:`，KVO 也会使用该属性的正确 KVO 通知调用来包装您的实现。这很可能是 Cocoa 中最神奇的东西。（我曾经确信这是最神奇的事情，但我开始怀疑块变量的作用域，尤其是块如何从堆栈移动到堆；这可能更神奇。）

*   如果您需要直接设置 Core Data 属性，绕过 KVO 和所有其他可能的魔法，您可以使用原始访问器。`setPrimitiveData:`是`setData:`用于设置属性的底层方法。您不应该覆盖原始访问器。

* * *

@Justin 似乎已经删除了他的答案。这里的典型解决方案是声明`setData:`and `setData:inPosition:`（顺便说一句，作为读者，我不知道“inPosition”是什么意思。我希望它在上下文中有意义）。`setData:`会调用`setData:inPosition:`应用任何必要的东西来确定“位置”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T02:41:19.837

使用 NSNumber 包装器是非常标准的。

当然，你总是可以传递 -1、NSNotFound，或者定义你自己的 n/a 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T03:12:34.017

有三个选项：

1.  通过 -1 或类似的“无价值”
2.  使用 NSNumber 包装器并传递`nil`“无值”
3.  超载

您可以尝试使用 Objective-C 的可选参数机制，但这需要某种哨兵来标记列表的结尾，因此它并不比其他任何一个更好。

# c++ - Opengl相机和乘法矩阵

> ID：10004253
> 
> 赞同：0
> 
> 时间：2012-04-04T02:39:34.977
> 
> 标签：c++, opengl, matrix, camera

我目前正在制作的相机有很多问题。正如本网站所说，为了避免万向节锁定，我正在做的矩阵旋转出现问题。

> 您将注意到的第一个问题是您应用这些旋转的顺序很重要。如前所述，旋转矩阵是方向变换。每个变换定义一个新的坐标系，下一个变换基于新空间中的一个对象。例如，如果我们先应用滚动，我们现在已经更改了后续偏航的轴。

例如，当我执行此操作时，如果我想围绕当前的 x 轴俯仰，x 轴也会在我的轴上更改为旋转方法，这显然是错误的。我环顾四周，找不到任何解决方案。我已经尝试了很多不同版本的轴角旋转矩阵..

```
void FrustumCamera::xAxisRotation(float angle)
{
    Vector3<float> x = m_orientation.getXAxis();
    Matrix4<float> matrix = m_orientation.axisAngleRotation(x,angle);
    m_orientation = matrix*m_orientation;
    normalise(m_orientation.getXAxis());
    normalise(m_orientation.getYAxis());
    normalise(m_orientation.getZAxis());
}
void FrustumCamera::yAxisRotation(float angle)
{
    Vector3<float> y = m_orientation.getYAxis();

    Matrix4<float> matrix = m_orientation.axisAngleRotation(y,angle);
    m_orientation = matrix*m_orientation;

    normalise(m_orientation.getXAxis());
    normalise(m_orientation.getYAxis());
    normalise(m_orientation.getZAxis());
}

Matrix4<Type> Matrix4<Type>::operator*(Matrix4& matrix)
{
    Matrix4<Type> temp(m_matrix);
    for(int i=0;i<4;i++)
    {
        for(int j=0;j<4;j++)
        {
            Type total = 0;
            for(int k=0;k<4;k++)
            {

                total += m_matrix[i][k]*matrix.getAt(k,j);;

            }
            temp.setAt(i,j,total);
        }
    }
    return temp;
}
template <class Type>
Matrix4<Type> Matrix4<Type>::axisAngleRotation(Vector3<Type> axis, const Type angle)
{
    Type radians = angle * (double)degToRad;
    Matrix4<Type> temp;
    float c = cosf(radians);
    float s = sinf(radians);
    float t = 1.0f - c;

    float x = axis.x;
    float y = axis.y;
    float z = axis.z;

    temp.setAt(0,0, c+x*x*(t));
    temp.setAt(0,1, x*y*(t)-z*s);
    temp.setAt(0,2, x*z*(t)+y*s);
    temp.setAt(0,3, 0.0f);

    temp.setAt(1,0, y*x*(t)+z*s);
    temp.setAt(1,1, c+y*y*(t));
    temp.setAt(1,2, y*z*(t)-x*s);
    temp.setAt(1,3, 0.0f);

    temp.setAt(2,0, z*x*(t)-y*s);
    temp.setAt(2,1, z*y*(1-c)+x*s);
    temp.setAt(2,2, c+z*z*(t));
    temp.setAt(2,3, 0.0f);

    temp.setAt(3,0, 0.0f);
    temp.setAt(3,1, 0.0f);
    temp.setAt(3,2, 0.0f);
    temp.setAt(3,3, 1.0f);

    return temp;
}
void OpenGLRenderer::startDraw(unsigned long mask)
{
    //sortBuffer();                                     // sort draw queue
    clearBuffers(mask);                                 // clear buffers
    loadIdentity();
    glTranslatef(-1*m_frustumCamera->getViewMatrix().getTranslationAxis().x,-1*m_frustumCamera->getViewMatrix().getTranslationAxis().y,-1*m_frustumCamera->getViewMatrix().getTranslationAxis().z);// load identity
    glMultMatrixf(m_frustumCamera->getViewMatrix().getMatrix());
    glTranslatef(m_frustumCamera->getViewMatrix().getTranslationAxis().x,m_frustumCamera->getViewMatrix().getTranslationAxis().y,m_frustumCamera->getViewMatrix().getTranslationAxis().z);

    matrixStackPush();                                          
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T04:57:33.513

我认为乘法的顺序会导致问题，而不是

```
m_orientation = matrix*m_orientation; 
```

尝试

```
m_orientation = m_orientation * matrix; 
```

# shell - Shell 扫描“C”源程序中的变量

> ID：10004254
> 
> 赞同：0
> 
> 时间：2012-04-04T02:39:35.223
> 
> 标签：shell, powershell

谁能帮助我就如何解决以下问题提供一些建议？

问题的想法是扫描`Foo.c`文件以查找所有变量、它们出现的次数以及它们确实出现的行。

该实现可以是至少一种方法：

1.  构建一个 bat 脚本并最终构建额外的 C 程序来解决问题。在 cmd 窗口中运行实现。

2.  构建一个 ps1 脚本并最终构建额外的 C 程序来解决问题。在 PowerShell 窗口中运行实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:07:28.753

我认为，为了获得所有变量声明和使用，并且只有变量声明和使用，您将需要至少部分解析源文件并分析生成的抽象语法树。

那么，您的第一步是编写一个解析器或弄清楚如何利用现有的解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:06:58.027

如果您正在编写 C#，您可以使用[ANTLR V3](http://www.antlr.org/)来解析您的源代码，因为存在“C”语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-14T00:51:28.177

您当然可以尝试将其编写为 bat 脚本，但请相信我，我已经编写了近 200 个 bat 脚本，这太可怕了。cmd.exe 的 findstr 会是你的朋友，但在 bat 和 regex 之间，你会发疯的。Powershell 肯定会更好，但是最好的选择是真正的脚本语言，例如 perl、ruby 或 python。

幸运的是，无论如何，在您的情况下，C 中的所有 var 都是显式声明的，因此您可以扫描一次以查找所有 var 声明并创建它们的数组。然后，再次扫描以查找这些变量名称的实例。实例总数将为 total_times_seen -1，因为第一个是 var 声明。这当然假设它们只被声明一次......

# c# - 将整个数据库表输出到 Excel 文件的最简单方法是什么？

> ID：10004257
> 
> 赞同：0
> 
> 时间：2012-04-04T02:39:46.720
> 
> 标签：c#, .net, asp.net-mvc-3, excel

我的数据库中有一个名为的表`Products`。它有几个属性，但并不复杂。

这是在使用 Entity Framework 4 进行数据访问的 ASP.Net MVC3 应用程序上，我只想创建一个 ActionMethod，它返回包含表内所有数据的可下载（根据请求生成）excel 文件。

从表中的数据生成 excel 文件的最简单方法是什么？

我正在使用 .NET 4，因此我可以使用最新的技术/选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T02:50:49.013

我同意 xanadont 的评论（csv 更容易），但如果您使用的是 EF（可能，但未指定）并且需要导出一个 excel 文件，这将做到这一点：

[http://rachel53461.wordpress.com/2011/06/26/exporting-a-view-or-stored-procedure-to-excel-with-entity-framework/](http://rachel53461.wordpress.com/2011/06/26/exporting-a-view-or-stored-procedure-to-excel-with-entity-framework/)

# mysql - PHP MYSQL - 返回不同的值

> ID：10004258
> 
> 赞同：0
> 
> 时间：2012-04-04T02:39:51.587
> 
> 标签：mysql, compare, field

我想比较 2 个表中的字段以查看字段是否具有相同的值。

例如
- 我有 2 个表，“产品”和“愿望清单”。
- 在这两个表中，它们具有相同的字段“prodId”和“userId”，以及其他字段，如“title”等。
-“wishlist”表包含表“products”中的一些相同行
（例如 10总共在“产品”中，但只有 6 个相同的行在表“愿望清单”中）

-我想显示表“产品”中与表“愿望清单”不同的字段/行，因此从只显示 4（因此它不显示 6 的重复项），
因此我想在表“产品”中使用字段“prodId”和“userId”，并将其与表中的相同字段进行比较'愿望清单'。

我该怎么做？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T02:43:31.513

A[`JOIN`](http://dev.mysql.com/doc/refman/5.0/en/join.html)将返回在两个表中具有匹配值的所有记录：

```
SELECT *
FROM
    products p
    JOIN wishlist w ON w.userId = p.userId AND w.prodId = p.prodId 
```

![加入](../Images/59203e7db8b78b660651228b8f54eeb8.png)

* * *

编辑：

要返回所有不匹配的记录：

```
SELECT *
FROM
    products p
    FULL OUTER JOIN wishlist w ON w.userId = p.userId AND w.prodId = p.prodId
WHERE
    p.Id IS NULL
    OR w.Id IS NULL 
```

![全外连接](../Images/a1de6665cb64260d836be91902ab9d9c.png)

* * *

编辑：

要显示在`products`中不匹配的记录，请`wishlist`使用`LEFT JOIN`：

```
SELECT *
FROM
    products p
    LEFT JOIN wishlist w ON w.userId = p.userId AND w.prodId = p.prodId
WHERE
    w.Id IS NULL 
```

![左连接](../Images/7ddb5325e3e2381fe09e7413f6db9798.png)

# java - java中“p[z] <--y”伪代码的解释是什么？

> ID：10004261
> 
> 赞同：1
> 
> 时间：2012-04-04T02:40:13.693
> 
> 标签：java, pseudocode, red-black-tree, interpretation

这是一棵红黑树。

对于伪代码“p[z] <-- y”，java 中的解释是：

```
z.getParent() = y; 
```

或者

```
z.setParent(y); 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T02:43:48.033

正确的代码是`z.setParent(y);`

请注意，这`z.getParent() = y;`是无效代码。赋值运算符`=`将计算右侧表达式的结果存储到`=`左侧的变量、属性或数组位置`=`。在像您问题中的第一个表达式这样的表达式中，您会尝试将值分配给`y`调用的结果`z.getParent()`- 也就是说，尝试将值分配给另一个值，这是行不通的。

更改属性的正确方法是调用相应的`setXXX()`方法，或者如果属性被声明为非私有，则直接分配给该属性，如下所示：`z.parent = y;`

# python-3.x - 根据列表大小对字典进行排序，然后按 Python 中的键按字母顺序排序？

> ID：10004264
> 
> 赞同：4
> 
> 时间：2012-04-04T02:41:26.770
> 
> 标签：python-3.x

所以我有一个小问题。不久前，我在这里获得了有关根据列表中事物的值对带有每个键的列表的键进行排序的字典的帮助。具有最少值的列表的键在左侧，而具有最多值的列表的键在右侧。那效果很好。现在我知道如何按字母顺序对字典键进行排序，但我无法将其与上述内容结合使用..

我正在尝试首先根据键列表包含的值的数量对下面的字典进行排序......然后如果键列表包含与前一个键列表相同数量的值，则按字母顺序排列。

所以在我有这个之前：

`Dict = {"anna":[1,2,3],"billy":[1,2],"cilla":[1,2,3,4],"cecillia":[1,2,3,4],"dan":[1]}`

如果一切顺利，我想拥有...

`Dict = {"dan":[1],"billy":[1,2],"anna":[1,2,3],"cecillia":[1,2,3,4],"cilla":[1,2,3,4]}`

正如您在上面看到的，排在前面`cecillia`是`cilla`因为他们的列表中都有 4 个值......并且`dan`排在第一位是因为他的列表中的值最少。我希望这是有道理的。我现在得到以下结果的是：

`ascending = sorted(Dict, key =lambda x: len(Dict[x]))`

这给了我例如：

`{"dan":[1],"billy":[1,2],"anna":[1,2,3],"cilla":[1,2,3,4],"cecillia":[1,2,3,4]}`

所以它有效，但仅适用于列表中的值..现在当我去的时候

`ascending.sort()`

它按字母顺序对字典进行排序，但是从最小到最大的值顺序消失了。有谁知道如何将这两个东西结合起来？我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T03:24:49.837

您不能保持字典排序，因此您必须将其转换为元组列表：

```
D = [ (x, Dict[x]) for x in Dict]
ascending = sorted(D, key = lambda x: x[1])
ascending.sort() 
```

请参阅[http://wiki.python.org/moin/HowTo/Sorting](http://wiki.python.org/moin/HowTo/Sorting)。顺便说一句，您所依赖的功能实际上是因为排序算法是[稳定](http://en.wikipedia.org/wiki/Sorting_algorithm#Stability)的（当我用 Python 编程时显然不是这种情况）。

# python - 以编程方式导入适用于 Windows，但不适用于 Linux

> ID：10004265
> 
> 赞同：1
> 
> 时间：2012-04-04T02:41:42.853
> 
> 标签：python, plugins, import

所以我有一个目录树如下：

```
pluginlist.py
plugins/
    __init__.py
    plugin1.py
    plugin2.py
    ... 
```

并希望从每个插件 1、插件 2 等中连接一个名称相似的字典。

我这样做的方式如下（来自pluginlist.py）：

```
import os

pluginFolderName = "plugins"
pluginFlag = "##&plugin&##"

commands = {}

os.chdir(os.path.abspath(pluginFolderName))

for file in os.listdir(os.getcwd()):
    if os.path.isfile(file) and os.path.splitext(file)[1] == ".py":
        fileo = open(file, 'r')
        firstline = fileo.readline()
        if firstline == "##&plugin&##\n":
            plugin_mod = __import__("plugins.%s" % os.path.splitext(file)[0])
            import_command = "plugin_commands = plugin_mod.%s" %     os.path.splitext(file)[0]
            exec import_command
            commands = dict(commands.items() + plugin_commands.commands.items())
print commands 
```

（打印命令用于测试目的）

在 Windows 上运行它会给出正确的命令字典，但在 Linux（Ubuntu 服务器）上运行它会给出一个空字典。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T02:54:02.637

尝试：

```
for file in os.listdir(os.getcwd()):
    basename, ext = os.path.splitext(file)
    if os.path.isfile(file) and ext == ".py":
        with open(file, 'r') as fileo:
            firstline = fileo.readline()
            if firstline.startswith("##&plugin&##"):
                plugin_mod = __import__("plugins.%s" % basename, fromlist = [True])
                plugin_commands = getattr(plugin_mod, basename)
                commands.update(plugin_commands.commands) 
```

当你打电话`__import__('A.B')`时，包裹`A`被退回。当您调用 时`__import__('A.B', fromlist = [True])`，将返回模块`B`。在我看来你想要`B`。因此，在 Windows 和 Linux 上，您都需要设置`fromlist`一些非空列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T02:58:46.773

您的源代码是否有 Windows CRLF 行尾？尝试添加 a`print repr(firstline)`以检查它不以`\r\n`而不是结尾`\n`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T03:24:30.943

如果插件缺少标识符，我会在打印警告`else:`的语句上放置一个分支`if`

此外，您可能不关心行尾，因此`firstline.strip()`在检查时调用可能会解决您的问题

最后，迂腐地，你可以加入`file`路径`pluginFolderName`而不是使用`os.chdir()`

未测试：

```
pluginFolderName = "plugins"
pluginFlag = "##&plugin&##"

pluginFolderName = os.path.abspath(pluginFolderName)

commands = {}
for file in os.listdir(pluginFolderName):
    # Construct path to file (instead of relying on the cwd)
    file = os.path.join(pluginFolderName, file)

    if os.path.isfile(file) and os.path.splitext(file)[1] == ".py":
        fileo = open(file, 'r')
        firstline = fileo.readline()

        if firstline.strip() == pluginFlag:
            # Strip firstline to ignore trailing whitespace

            plugin_mod = __import__("plugins.%s" % os.path.splitext(file)[0])
            plugin_cmds = getattr(plugin_mod, os.path.splitext(file)[0])
            commands.update(plugin_cmds)
         else:
             print "Warning: %s is missing identifier %r, first line was %r" % (
                 file, PLUGIN_IDENTIFIER, firstline) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T18:21:16.850

想通了我的问题！这

```
os.path.isfile(file) 
```

测试不起作用，因为 Linux 想要插件文件的绝对路径。因此，将文件的所有实例替换为

```
os.path.join(os.getcwd(), file) 
```

似乎可以解决所有问题。

# c# - 错误：指定的字符串不是电子邮件地址所需的格式。（用于外发邮件的带有后缀的电子邮件地址）

> ID：10004267
> 
> 赞同：2
> 
> 时间：2012-04-04T02:41:51.820
> 
> 标签：c#, smtp

我正在使用 C# 电子邮件发送。

我使用普通电子邮件地址（如“myemail@exchange.com”）通过 SMTP 发送程序化电子邮件没有问题。

但是根据公司政策，每当他们在网络外发送电子邮件时，他们都会在电子邮件中添加一个后缀，例如“myemail@exchange.com@yodachi”。

因此，当我尝试使用该电子添加格式发送时，我收到错误：指定的字符串不是电子邮件地址所需的格式。

任何建议将不胜感激。

注意：我使用的是 SmtpDeliveryMethod.Network，因为我们通过公司网络使用 SMTP。

谢谢，艾尔

编辑：我发现我所说的策略是 Lotus Domino Roaming。后缀用作主服务器上传输外发邮件的请求。

# apache - 奇怪的斜杠问题

> ID：10004269
> 
> 赞同：0
> 
> 时间：2012-04-04T02:42:50.447
> 
> 标签：apache, redirect

我在 Apache 服务器的 document_root 下有一个文件夹。当我输入[http://www.example.com/help](http://www.example.com/help)时，它不会重定向到[http://www.example.com/help/](http://www.example.com/help/)，而是转到[http://www.exmaple.com//help/](http://www.exmaple.com//help/) . 注意域名后面有**两个斜杠。**

我找不到为这种重定向设置的任何 mod-rewrite 规则。谁能想到其他可能的原因？

此外，在 Apache 中，从[http://www.example.com/help](http://www.example.com/help)重定向到[http://www.example.com/help/](http://www.example.com/help/)是由什么完成的？（注意“help”是真正的文件夹，没有名为“help”的文件）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:11:48.910

最后我发现这是Apache的一个错误。 [https://issues.apache.org/bugzilla/show_bug.cgi?id=51982](https://issues.apache.org/bugzilla/show_bug.cgi?id=51982)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T02:45:35.793

第一个猜测是您的应用程序配置有一个项目作为其基本 URL，在您的情况下，它以 结尾`/`，导致应用程序的内部路由系统添加额外的斜杠。

回复提问者评论：

查看您的 .htaccess 文件。如果它看起来像这样（顺便说一下，这是 WordPress 安装默认使用的）：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
</IfModule> 
```

然后它将尝试从实际目录加载`/help`。但是如果它不包含`!-f`and`!-d`行，它将通过应用程序入口点加载每个请求，无论请求的项目是否存在于文件系统中。

# ios - JSON 很好地进入字典，但 objectForKey 错误

> ID：10004270
> 
> 赞同：0
> 
> 时间：2012-04-04T02:42:56.807
> 
> 标签：ios, json, rest, ios5

我有一个提供 JSON 的 RESTful API。我这样称呼它：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    dispatch_async(kBgQueue, ^{
        NSData* data = [NSData dataWithContentsOfURL: 
                        kProjectList];
        [self performSelectorOnMainThread:@selector(fetchedData:) 
                               withObject:data waitUntilDone:YES];
    });
} 
```

然后我有我的 fetchedData 方法：

```
- (void)fetchedData:(NSData *)responseData {
    //parse out the json data
    NSError* error;
    NSDictionary* json = [NSJSONSerialization 
                          JSONObjectWithData:responseData //1

                          options:kNilOptions 
                          error:&error];
    //NSArray *projects = [json objectForKey:@"name"]; //2

    NSLog(@"name: %@", json); //3
} 
```

如果我取消注释 //NSArray 行我得到`-[__NSCFArray objectForKey:]: unrecognized selector sent to instance 0x6d81720`

随着它被注释掉，我的字典记录：

```
(
        {
        "created_at" = "2012-04-04T01:46:51Z";
        description = "First Project Created";
        id = 1;
        name = "Test 1";
        "updated_at" = "2012-04-04T01:46:51Z";
    },
        {
        "created_at" = "2012-04-04T01:47:23Z";
        description = "Second Project Created";
        id = 2;
        name = "Test 2";
        "updated_at" = "2012-04-04T01:47:23Z";
    }
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T02:52:45.727

你有一个字典数组，而不是数组字典。代替 objectForKey，使用 objectAtIndex 并分配给字典。做这个：

```
NSDictionary *projects = [[json objectAtIndex:0] objectForKey:@"name"]; 
```

# ruby-on-rails - kaminari - 重定向到最后一页

> ID：10004272
> 
> 赞同：2
> 
> 时间：2012-04-04T02:43:09.153
> 
> 标签：ruby-on-rails, kaminari

所以我在我的应用程序上设置了 Kaminiari 分页，这是一个论坛。当有人回复该主题时，我想将他们引导至该主题的最后一页。似乎很容易根据我用于记录编号的内容对逻辑进行硬编码以获取最后一页，但是是否有内置方法来获取最后一页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T13:55:31.577

在我当前版本的 kaminari (v0.12.4) 中，以下工作：

```
users = User.page(params[:page])
last_page = users.num_pages 
```

`num_pages`在[https://github.com/amatsuda/kaminari/blob/master/lib/kaminari/models/page_scope_methods.rb](https://github.com/amatsuda/kaminari/blob/master/lib/kaminari/models/page_scope_methods.rb)中定义。如果你想添加一个`last_page`方法，我建议如下：

```
module Kaminari
  module PageScopeMethods
    def last_page
      num_pages
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T02:47:43.273

看来[这个帖子](https://github.com/amatsuda/kaminari/issues/150)有答案了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:01:33.657

如果 Kaminari 中还没有，您可以编写一个方法来实现这一点。这应该存在，因为 Kaminari 还呈现用于导航的页码。

说，@records 是您执行 @records.page(1) 以显示获取当前记录集的数据库记录列表，

最后页码由 定义`(@records.total_count / per_page.to_f).ceil`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-23T02:04:42.737

为了其他人，我会分享对我有用的东西。

### 协会

1.  对话 has_many 消息
2.  消息 belongs_to 对话

在对话显示页面中，我想每 10 条消息分页一次

```
messages = conversation.messages.page(params[:page]).per(10)
last_page = messages.total_pages 
```

然后我想创建一个指向这个显示页面的链接，它将显示最后一页。我刚刚做了一个辅助方法

```
def create_link_to_last_page(conversation)
    content_tag :div do
      link_to("Show", url_for(controller: 'conversations', action: 'show', id: conversation.id, page: last_page))
    end
end 
```

# java - Vector 和 Hashtable 如何在集合中是线程安全的？

> ID：10004277
> 
> 赞同：3
> 
> 时间：2012-04-04T02:43:48.987
> 
> 标签：java

我知道他们都有线程安全的方法。我想知道它们是如何线程安全的？执行情况是什么？这是所有面试中常见的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T02:47:30.517

[查看OpenJDK中](http://openjdk.java.net/)[Vector](http://www.docjar.com/html/api/java/util/Vector.java.html)和[Hashtable](http://www.docjar.com/html/api/java/util/Hashtable.java.html)的代码，您会注意到大多数公共方法都是，这是使两个集合的*方法*线程安全的实现细节。另请注意，对这些集合的其他操作（例如迭代）需要外部同步以实现线程安全。`synchronized`

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T02:47:36.297

他们不是。他们所有的*方法*都是*同步的。*这不是一回事。对它们的迭代不是也不能是线程安全的，除非包含迭代的块是线程安全的，例如同步的。所以调用者仍然有责任提供线程安全。这就是集合框架中的新类默认没有同步方法的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T03:27:50.550

这些类是有条件的线程安全的，使用它们不是一种好的风格。更好的选择是使用真正线程安全并提供良好性能的 java.util.concurrent.* 类（例如 ConcurrentHashMap、CopyOnWriteArrayList 等）

例如，ConcurrentHashMap 比同步的 HashMap 扩展性更好：[http ://www.javamex.com/tutorials/concurrenthashmap_scalability.shtml](http://www.javamex.com/tutorials/concurrenthashmap_scalability.shtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-21T12:01:55.920

术语表明类中的方法是线程安全的，即同步的！（一个类本身不能是线程安全的。它只是这么说的方式。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T02:47:45.543

我的 Sun/Oracle JDK 版本附带的 Vector 类，它是 6 东西，使用同步方法，就像这样

```
public synchronized void insertElementAt(E obj, int index) {
modCount++;
if (index > elementCount) {
    throw new ArrayIndexOutOfBoundsException(index
                         + " > " + elementCount);
}
ensureCapacityHelper(elementCount + 1);
System.arraycopy(elementData, index, elementData, index + 1, elementCount - index);
elementData[index] = obj;
elementCount++;
} 
```

所有重要的方法都以这种方式同步，就在方法签名中。

但是请注意，这不是强制性的。合同只说你必须让它线程安全，它没有具体说明如何。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T04:24:47.410

这两个类的问题在于，它们通过提供同步方法给人以线程安全的印象，但它们的内部状态可以通过它们提供给您访问的迭代器来修改。

这种同步只会在所有同步方法中执行线程独占权，因为它们共享相同的同步锁。*

# ravendb - 考虑到这些要求，我如何为本文档构建我的 RavenDb where 子句？

> ID：10004281
> 
> 赞同：0
> 
> 时间：2012-04-04T02:44:29.997
> 
> 标签：ravendb

这个问题建立在以下问题之上

索引：[考虑到这些要求，我如何为本文档构建我的 RavenDb 静态索引？](https://stackoverflow.com/questions/9961882/how-do-i-construct-my-ravendb-static-indexes-for-this-document-given-these-requ)

带分页的简单 Where 子句：[如何使用 RavenDb 构造适当的 WHERE 子句](https://stackoverflow.com/questions/10003360/how-to-construct-a-proper-where-clause-with-ravendb)

问题的本质是如何动态添加或删除字段以参与 where 子句？

文档：

```
[Serializable]
public class Product
{
    public string AveWeight { get; set; }

    public string BrandName { get; set; }

    public string CasePack { get; set; }

    public string Catalog { get; set; }

    public decimal CatalogId { get; set; }

    public decimal CategoryId { get; set; }

    public string Info { get; set; }

    public bool IsOfflineSupplierItem { get; set; }

    public bool IsRebateItem { get; set; }

    public bool IsSpecialOrderItem { get; set; }

    public bool IsSpecialPriceItem { get; set; }

    public bool IsTieredPricingItem { get; set; }

    public string ItemNum { get; set; }

    public string ManufactureName { get; set; }

    public string ManufactureNum { get; set; }

    public decimal OffineSupplierId { get; set; }

    public string PackageRemarks { get; set; }

    public decimal Price { get; set; }

    public decimal PriceGroupId { get; set; }

    public decimal ProductId { get; set; }

    public string ProductName { get; set; }

    public int Quantity { get; set; }

    public string SupplierName { get; set; }

    public string UOM { get; set; }

    public string Upc { get; set; }

    public string Url { get; set; }

} 
```

指数：

```
if (store.DatabaseCommands.GetIndex("Products_Index") == null)
{
    store.DatabaseCommands.PutIndex("Products_Index", new IndexDefinitionBuilder<Product>
    {
        Map = products => from p in products
                          select new { p.CatalogId, 
                                         p.HasPicture, 
                                         p.INFO2, 
                                         p.IsOfflineSupplierItem, 
                                         p.IsRebateItem, 
                                         p.IsSpecialOrderItem, 
                                         p.IsSpecialPriceItem, 
                                         p.IsTieredPricingItem, 
                                         p.Price },
        Indexes = 
        { 
            { x => x.INFO2, FieldIndexing.Analyzed }, 
            { x => x.CatalogId, FieldIndexing.Default},
            { x => x.HasPicture, FieldIndexing.Default},
            { x => x.IsOfflineSupplierItem, FieldIndexing.Default},
            { x => x.IsRebateItem, FieldIndexing.Default},
            { x => x.IsSpecialOrderItem, FieldIndexing.Default},
            { x => x.IsSpecialPriceItem, FieldIndexing.Default},
            { x => x.IsTieredPricingItem, FieldIndexing.Default},
            { x => x.Price, FieldIndexing.Default}
        }
    });
} 
```

朴素的 Where 子句

```
 string  t1 = "foo";
  bool    t2 = true;
  decimal t3 = 100m;

  products = DocumentSession.Query<Product>()
      .Statistics(out stats)
      .Where(p => p.INFO2.StartsWith(t1) && p.IsRebateItem == t2 && p.CatalogId = t3) 
      .OrderByField(columnToSortBy, columnToSortByAsc)
      .Skip(pageIndex * pageSize)
      .Take(pageSize)
      .ToList()
      ; 
```

高级查询的第一关

```
 var products = s.Advanced.LuceneQuery<Product>("Products")
    .WhereEquals("Catalog", "National Catalog")
    .ToList()
    ; 
```

抛出异常

Lucene.Net.dll 中出现“Lucene.Net.QueryParsers.QueryParser.LookaheadSuccess”类型的第一次机会异常 Lucene.Net.dll 中出现“System.IO.IOException”类型的第一次机会异常

第二关（作品）

```
 result = s.Advanced.LuceneQuery<Product>("Products_Index")
 .Where("CatalogId:(736275001) AND HasPicture:(true) AND IsOfflineSupplierItem:(false)")
 .ToArray(); 
```

第三次通过（也是最快的）

```
result = s.Advanced.LuceneQuery<Product>("Products/Index")
    .Statistics(out stats)
    .WhereStartsWith("INFO2", "ink")
    .AndAlso()
    .WhereStartsWith("INFO2", "pen")
    .AndAlso()
    .WhereEquals("CatalogId", 736275001)
    .AndAlso()
    .WhereEquals("HasPicture", true)
    .AndAlso()
    .WhereEquals("IsOfflineSupplierItem", false)
    .AndAlso()
    .WhereEquals("IsRebateItem", false)
    .AndAlso()
    .WhereEquals("IsSpecialOrderItem", false)
    .AndAlso()
    .WhereEquals("IsSpecialPriceItem", false)
    .ToArray()
    ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:10:23.460

如果您想动态地执行此操作，您可以使用 DocumentSession.Advanced.LuceneQuery，它允许您将字符串作为索引的属性名称传递。这样，您就不必处理强类型问题。

# c# - 支持混合空格和制表符的编辑器？

> ID：10004290
> 
> 赞同：4
> 
> 时间：2012-04-04T02:45:32.240
> 
> 标签：c#, java, c++, windows, text-editor

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:26:59.243

不确定这是否有资格作为答案。但是，我的[gvim](http://www.vim.org/download.php)与当前 vimrc 完全符合您正在寻找的制表符和空格。我强烈推荐使用[Gvim](http://www.vim.org/download.php)。这是个人选择的问题，可能会有更好或更差的编辑器。

`se syn=`您可以使用命令突出显示 vim 上的任何语言

您找不到的是词法支持或智能感知 - 至少以可用的方式。

看一下屏幕截图。这是我改编的[vimrc的链接。](http://spf13.com/post/perfect-vimrc-vim-config-file)

**编辑**我真的怀疑是否有一个编辑乌托邦可以这么说。您可能必须根据“适合工作的工具”原则取得平衡。

![在此处输入图像描述](../Images/a6f80da5b2f6d06e6158c9258546a4ea.png)

# python - 如何添加登录/注销链接（Django）

> ID：10004292
> 
> 赞同：1
> 
> 时间：2012-04-04T02:45:57.127
> 
> 标签：python, django

我需要 django 模板中的链接，如果用户通过身份验证，该链接将变为注销。（我已经实现了登录/注销页面）

试过`{% if user.is_authenticated %} {% endif %}`但`{% if user.is_anonymous %} {% endif %}`没有用。

测试代码（https://docs.djangoproject.com/en/dev/topics/auth/） -

```
{% if user.is_authenticated %}
    <p>Welcome, {{ user.username }}. Thanks for logging in.</p>
{% else %}
    <p>Welcome, new user. Please log in.</p>
{% endif %} 
```

登录成功后返回**false** evan。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T03:39:17.067

您发布的模板代码看起来没有任何问题。所以我会查看相关的视图。特别是，如果您使用的是定制视图（而不是通用视图），请记住向您的模板提供[RequestContext 。](https://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext)

来自[Django 教程，第 4 部分](https://docs.djangoproject.com/en/1.4/intro/tutorial04/)：

```
from django.template import RequestContext
# ...
def detail(request, poll_id):
    p = get_object_or_404(Poll, pk=poll_id)
    return render_to_response('polls/detail.html', {'poll': p},
                           context_instance=RequestContext(request)) 
```

# c# - ASP.NET 下载处理程序适用于 IE，但不适用于 Chrome

> ID：10004293
> 
> 赞同：3
> 
> 时间：2012-04-04T02:46:14.883
> 
> 标签：c#, asp.net, ashx

我有一个下载处理程序，它会在 IE 中下载文件，但在 chrome 中它会尝试自行下载。我的意思是 Chrome 尝试下载一个名为 downloadhandler.ashx 的文件处理程序的代码是

```
<%@ WebHandler Language="C#" Class="DownloadHandler" %>
using System;
using System.Web;

public class DownloadHandler : IHttpHandler 
{
public void ProcessRequest(HttpContext context)
{
    string file = "";

    // get the file name from the querystring
    if (context.Request.QueryString["Filepath"] != null)
    {
        file = context.Request.QueryString["Filepath"].ToString();
    }

    string filename = context.Server.MapPath("~/Minutes/" + file);
    System.IO.FileInfo fileInfo = new System.IO.FileInfo(filename);

    try
    {
        if (fileInfo.Exists)
        {
            context.Response.Clear();
            context.Response.AddHeader("Content-Disposition", "inline;attachment; filename=\"" + fileInfo.Name + "\"");
            context.Response.AddHeader("Content-Length", fileInfo.Length.ToString());
            context.Response.ContentType = "application/octet-stream";
            context.Response.TransmitFile(fileInfo.FullName);
            context.Response.Flush();
        }
        else
        {
            throw new Exception("File not found");
        }
    }
    catch (Exception ex)
    {
        context.Response.ContentType = "text/plain";
        context.Response.Write(ex.Message);
    }
    finally
    {
        context.Response.End();
    }
}

public bool IsReusable
{
    get
    {
        return false;
    }
}

} 
```

处理程序从这段代码中接收它的信息

```
private static string BuildAbsolute(string relativeUri)
{
    // get current uri
    Uri uri = HttpContext.Current.Request.Url;
    // build absolute path
    string app = HttpContext.Current.Request.ApplicationPath;
    if (!app.EndsWith("/")) app += "/";
    relativeUri = relativeUri.TrimStart('/');
    // return the absolute path
    return HttpUtility.UrlPathEncode(
      String.Format("http://{0}:{1}{2}{3}",
      uri.Host, uri.Port, app, relativeUri));
} 
```

此方法中使用的

```
public static string ToDownloadMinutes(string fileName)
{
    return BuildAbsolute(String.Format("Handlers/DownloadHandler.ashx?Filepath={0}", fileName));
} 
```

任何帮助让这个下载功能在 Chrome 中工作将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T03:03:30.090

尝试从 Content-Disposition 标头中删除“inline”，因为“inline”和“attachment”不应该一起使用：

```
context.Response.AddHeader("Content-Disposition", "attachment; filename=\""
    + fileInfo.Name + "\""); 
```

# php - PHP IF Statment Based On Geo Location?

> ID：10004294
> 
> 赞同：2
> 
> 时间：2012-04-04T02:46:14.773
> 
> 标签：php, ip-geolocation

Is there a way to do a PHP If statement based on the persons location?

My problem comes down to Amazon Affiliate links. The link to buy a DVD on Amazon.co.uk is different to the one to buy from Amazon.com and I want a way to only show the correct one.

At the same time, If they aren't based in either country, then I don't want the link to show in the first place.

Example:

```
If Location = UK; print "amazon-UK-link"
If Location = US; print "amazon-US-link"
If location = None of the above; print nothing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T02:53:19.037

您可以使用：[字符串 geoip_country_code_by_name（字符串 $hostname）](http://www.php.net/manual/en/function.geoip-country-code-by-name.php)

例子：

```
<?php
$country = geoip_country_code_by_name('www.example.com');
if ($country) {
    echo 'This host is located in: ' . $country;
}
?> 
```

输出：

> 该主机位于：美国

对于您的情况，您可以使用：`geoip_country_code_by_name($_SERVER['REMOTE_ADDR']);`获取当前用户的国家代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T02:55:49.203

您将不得不使用访问者的 IP 地址来查找他们的实际位置。除了使用 PHP 的 GeoIP 扩展（正如 Stee 指出的那样）之外，还有两种方法可以做到这一点：

**简单的方法**

[使用像http://www.hostip.info](http://www.hostip.info/)这样的外部服务

**使用您自己的 MySQL 数据**

1.) 检索访问者的 IP 地址：

```
if (getenv('HTTP_X_FORWARDED_FOR')) 
{
    $ip_address = getenv('HTTP_X_FORWARDED_FOR');
} 
else 
{
    $ip_address = getenv('REMOTE_ADDR');
} 
```

2.) 将访问者的 IP 地址转换为 IP 号：

```
$ips = explode(".",$ip_address);
return ($ips[3] + $ips[2] * 256 + $ips[1] * 256 * 256 + $ips[0] * 256 * 256 * 256); 
```

3.) 从您可以[在此处下载](http://ip-to-country.webhosting.info/downloads/ip-to-country.csv.zip)的数据库中找到 IP 号码。例如：IP 地址 202.186.13.4 转换为 IP 号 3401190660。它位于以下 IP 号的开头和结尾之间：

```
Beginning_IP | End_IP      | Country  | ISO
-------------+-------------+----------+----
3401056256   | 3401400319  | MALAYSIA | MY 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T12:20:00.793

您可以使用来自[http://www.geoplugin.net/的简单 API](http://www.geoplugin.net/)

```
$xml = simplexml_load_file("http://www.geoplugin.net/xml.gp?ip=".getRealIpAddr());
echo $xml->geoplugin_countryName ;

echo "<pre>" ;

foreach ($xml as $key => $value)
{
    echo $key , "= " , $value ,  " \n" ;
}

function getRealIpAddr()
{
    if (!empty($_SERVER['HTTP_CLIENT_IP']))   //check ip from share internet
    {
      $ip=$_SERVER['HTTP_CLIENT_IP'];
    }
    elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))   //to check ip is pass from proxy
    {
      $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
    }
    else
    {
      $ip=$_SERVER['REMOTE_ADDR'];
    }
    return $ip;
} 
```

输出

```
United States
geoplugin_city= San Antonio
geoplugin_region= TX
geoplugin_areaCode= 210
geoplugin_dmaCode= 641
geoplugin_countryCode= US
geoplugin_countryName= United States
geoplugin_continentCode= NA
geoplugin_latitude= 29.488899230957
geoplugin_longitude= -98.398696899414
geoplugin_regionCode= TX
geoplugin_regionName= Texas
geoplugin_currencyCode= USD
geoplugin_currencySymbol= $
geoplugin_currencyConverter= 1 
```

它让你有很多可以玩的选择

谢谢

:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T02:53:15.493

您需要通过 maxmind [http://www.maxmind.com/app/ip-location](http://www.maxmind.com/app/ip-location)使用 geoip，或者还有另一种选择，搜索 Country API 的 IP，网上有一些。

# iphone - Making border with QuartzCore is slow?

> ID：10004295
> 
> 赞同：2
> 
> 时间：2012-04-04T02:46:27.647
> 
> 标签：iphone, cocoa-touch, ipad, uikit, quartz-core

When i try to do a border to a view my view become slow

```
[self.userView setBackgroundColor:[UIColor whiteColor]];
[self.userView.layer setMasksToBounds:YES];
[self.userView.layer setCornerRadius:15.0f];
[self.userView.layer setBorderColor:[UIColor lightGrayColor].CGColor];
[self.userView.layer setBorderWidth:1.0f]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T02:56:19.473

您可能希望将`shouldRasterize`图层的属性设置为`YES`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T02:48:22.227

这是 omz 的回答，以提高光栅化层的质量，以防止像素化，您也需要设置光栅化比例。

```
[self.userView.layer setShouldRaterize:YES];
[self.userView.layer setRasterizationScale:[UIScreen mainScreen].scale]; 
```

# c++ - (char)0 在 C++ 中是什么意思？

> ID：10004297
> 
> 赞同：1
> 
> 时间：2012-04-04T02:46:37.847
> 
> 标签：c++, arrays, char

是什么意思`(char)0`。

例如，这是什么意思？

```
array[1] = (char)0; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T02:47:39.540

这是一个C风格的演员表。也就是说，它将`0`（类型的文字`int`）转换为`char`（`\0`字符）。`'\0'`只需使用文字就可以完全避免这种演员表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T02:47:42.293

它被`0`转换为 a `char`，即`'\0'`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T02:48:36.977

您正在将 int（整数）（ ）*转换*`0`为字符（char）。

铸造意味着你正在改变类型。

# ios - IOS的文件系统加密？

> ID：10004299
> 
> 赞同：11
> 
> 时间：2012-04-04T02:46:59.557
> 
> 标签：ios, iphone, filesystems, data-protection, macfuse

我知道在 Mac OS 上，我们可以使用 Macfuse 在用户空间编写文件系统，我们可以创建盒子加密。我不知道IOS上有一个框架，像FUSE，Macfuse这样的库，我可以编写我的文件系统来加密/解密文件（可能挂载在目录/文件夹上）。谁能指出我的解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T11:49:29.800

至于内置的 iOS 支持，有许多选项，从基于每个文件到加密应用程序的整个沙箱。我建议您阅读iOS App Programming Guide 中的[Protecting Data Using On-Disk Encryption](https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/StrategiesforImplementingYourApp/StrategiesforImplementingYourApp.html#//apple_ref/doc/uid/TP40007072-CH5-SW21)。

但是，所有这些选项都要求用户在设备上设置密码。较旧的设备可能不支持文件系统加密。

本文档中未提及的选项之一是将`DataProtectionClass`权利值设置为`NSFileProtectionComplete`. 这将自动保护您应用沙箱中的所有文件。

最后，我建议您观看 WWDC 2011 视频[保护 iOS 应用程序](https://developer.apple.com/videos/wwdc/2011/?id=208)（Apple 视频页面上的“保护应用程序数据”）并直接从 Apple 工程师那里了解最佳实践。该视频几乎涵盖了 Apple 提供的所有内容。

编辑：

根据开发论坛上的人的说法，DataProtectionClass 权利在当前的 iOS 版本中可能无法正常工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-04T11:29:12.340

您可以将[`NSFileProtection`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)文件的属性设置为使用从用户密码派生的密钥对其进行加密。

# javascript - 试图理解 underscore.js

> ID：10004310
> 
> 赞同：2
> 
> 时间：2012-04-04T02:47:46.733
> 
> 标签：javascript, return, underscore.js

在浏览 underscore.js 库时，我遇到了

```
for (var i = 0, l = obj.length; i < l; i++) {
    if (i in obj && iterator.call(context, obj[i], i, obj) === breaker) return;
}

// Establish the object that gets returned to break out of a loop iteration.
breaker = {}; 
```

为什么`return`用在最后？检查什么`i in obj`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T03:01:33.547

`return`存在函数（具有指定的返回值，如果有的话）。这将在教程中介绍。在循环结构中，它“提前停止”。

`prop in obj``obj`是一个表达式，当且仅当（或链式 [[prototype]]）具有属性`prop`（具有*任何*值，包括）时才会返回 true `undefined`。在这种情况下，请注意 的值`i`超出范围`[0, length)`。这里的结果是“对于数组中每个*分配的索引”。*

`iterator`评估为一个函数并被调用，`call()`因此上下文（`this`可以设置）。特殊`breaker`变量计算为特殊的哨兵对象。对于对象，`===`是“身份相等”，并且没有其他新对象将`===`对象分配给`breaker`.

简而言之：它是`Array.forEach`（ECMAScript ed. 5）或`jQuery.each`（实用程序方法）的变体，它遍历*稀疏数组*，传递一些额外的参数并允许“提前终止”。

快乐编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T02:50:12.577

似乎代码在某个迭代器对象上循环并`breaker`在到达变量时中断。该`return`语句退出函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T00:59:21.523

请注意，这`breaker`不是您可以用来跳出`_.each`循环的东西。它只能在下划线内部访问，并由`_.all`and`_.some`方法在内部使用。

# iphone - 检测摄像头并使用警报视图

> ID：10004315
> 
> 赞同：-1
> 
> 时间：2012-04-04T02:48:36.547
> 
> 标签：iphone, camera, uialertview, detect, alertview

我正在尝试检测 iOS 设备是否有摄像头。我知道有办法检测，但我需要帮助发出警报，如果没有摄像头，它会提醒用户。

这是我的代码....它在哪里拍照

```
 #import "CameraViewController.h"

@implementation CameraViewController

@synthesize imageView;
@synthesize takePictureButton;
@synthesize selectFromCameraRollButton;

/*
// The designated initializer. Override to perform setup that is required before the view is loaded.
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) {
        // Custom initialization
    }
    return self;
}
*/

/*
// Implement loadView to create a view hierarchy programmatically, without using a nib.
- (void)loadView {
}
*/

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {
     [super viewDidLoad];
    /*if(! [UIImagePickerController isSourceTypeAvailable:
       UIImagePickerControllerSourceTypeCamera])
    {
        takePictureButton.hidden = YES;
        selectFromCameraRollButton.hidden = YES;
    }*/
 }

/*
// Override to allow orientations other than the default portrait orientation.
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
*/

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {
    [imageView release];
    [takePictureButton release];
    [selectFromCameraRollButton release];
    [super dealloc];
}

 -(IBAction)getCameraPicture:(id)sender
{
    UIImagePickerController *picker = [[UIImagePickerController alloc] init];
    picker.delegate = self;
    picker.allowsImageEditing = YES;
    picker.sourceType = (sender == takePictureButton) ? UIImagePickerControllerSourceTypeCamera :
    UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    [self presentModalViewController: picker animated:YES];
    [picker release];
    upload.hidden = NO;

}

-(IBAction)selectExitingPicture
{
    if([UIImagePickerController isSourceTypeAvailable:
       UIImagePickerControllerSourceTypePhotoLibrary])
    {
        UIImagePickerController *picker= [[UIImagePickerController alloc]init];
        picker.delegate = self;
        picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
        [self presentModalViewController:picker animated:YES];
        [picker release];
        upload.hidden = NO;

    }

}

-(void)imagePickerController:(UIImagePickerController *)picker
  didFinishPickingImage : (UIImage *)image
editingInfo:(NSDictionary *)editingInfo
{
    imageView.image = image;
    [picker dismissModalViewControllerAnimated:YES];
}

-(void)imagePickerControllerDidCancel:(UIImagePickerController *) picker
{
    [picker dismissModalViewControllerAnimated:YES];
    upload.hidden = NO;
}

- (IBAction)uploadImage {
    /*
     turning the image into a NSData object
     getting the image back out of the UIImageView
     setting the quality to 90
     */
    NSData *imageData = UIImageJPEGRepresentation(imageView.image, 90);
    // setting up the URL to post to

    //over here 
    NSString *urlString = @"/over here puut your url";

    // setting up the request object now
    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    /*
     add some header info now
     we always need a boundary when we post a file
     also we need to set the content type

     You might want to generate a random boundary.. this is just the same 
     as my output from wireshark on a valid html post
     */
    NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    /*
     now lets create the body of the post
     */
    NSMutableData *body = [NSMutableData data];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];    
    [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"ipodfile.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    // setting the body of the post to the reqeust
    [request setHTTPBody:body];

    // now lets make the connection to the web
    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    NSLog(returnString);
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:02:42.867

你可以：

```
[UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]; 
```

[http://blog.mugunthkumar.com/coding/iphone-tutorial-better-way-to-check-capabilities-of-ios-devices/](http://blog.mugunthkumar.com/coding/iphone-tutorial-better-way-to-check-capabilities-of-ios-devices/)

然后要创建警报，只需使用 [[UIAlertView alloc] initWithTitle...] 方法，并在创建后对其调用 show。

# configuration - 来自 sendmail 的邮件被标记为垃圾邮件

> ID：10004316
> 
> 赞同：0
> 
> 时间：2012-04-04T02:48:46.150
> 
> 标签：configuration, sendmail, spam, php

我在 CentOS 框中使用默认设置发送邮件，并且我有一个使用 PHP 邮件功能的 php 应用程序。在过去几天的测试中，我看到来自该应用程序的邮件在垃圾邮件箱中。我用gmail和hotmail测试过，两种情况都是一样的。

我是否必须修改或更改 Sendmail 配置中的某些内容以确保邮件来自真实服务器？我从某个地方读到，如果我们从无法访问的主机发送电子邮件，它将被标记为垃圾邮件……但我确实记得邮件最初是到达收件箱的，并且仅在过去几天它被标记为垃圾邮件。

对此的任何建议或指示都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T02:58:37.820

我在使用 php mail 发送邮件时遇到了类似的问题，我通过在代码中包含 header 参数解决了这个问题

```
 <? 

         $header="-F 'Webmaster' -f support@yourdomain.com";
        mail("recipient@recipient-domain.com", "Test Message", "This is my message.", $header); 
    ?> 
```

# c# - 如何获取 wpf 用户控件的设计时高度/宽度

> ID：10004327
> 
> 赞同：1
> 
> 时间：2012-04-04T02:51:27.593
> 
> 标签：c#, .net, wpf, c#-4.0

有没有办法在运行时获取大小？

我需要在对话框中显示用户控件并需要相应地调整窗口大小

由于有多个用户控件，如果可能，请寻找使其通用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:00:46.970

听起来你可能需要重新考虑这个问题？如果您需要设计时的高度和宽度，则只需明确设置您正在使用的控件的宽度和高度。这会将控件“默认”为特定大小。通常，您可能希望将控件的宽度和高度设置为 Auto，并让容器或布局管理器决定大小。因此，如果您将控件放在网格中，请将其分配到象限并在那里设置大小。

最后，如果您之所以询问是因为您正在使用 Blend 进行设计并且调整用户控件的大小设置了设计时间，那么您可以通过选择内角槽口而不是具有较大手柄的外角槽口来明确调整控件的大小。内凹口将导致显式设置高度和宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T03:02:05.540

您可以使用[**SizeToContent**](http://msdn.microsoft.com/en-us/library/system.windows.window.sizetocontent.aspx)

```
<Window x:Class="WindowSample.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Title="WPF Window"
            SizeToContent="WidthAndHeight" > 
```

这将使您的窗口自动调整大小以适合您的窗口内容的首选大小。

# sql - 返回最新“连续”数据的行

> ID：10004328
> 
> 赞同：4
> 
> 时间：2012-04-04T02:51:27.717
> 
> 标签：sql, postgresql, gaps-and-islands

给定一个包含以下数据的简单表：

```
 id | result |   played   
----+--------+------------
  7 | L      | 2012-01-07
  6 | L      | 2012-01-06
  5 | L      | 2012-01-05
  4 | W      | 2012-01-04
  3 | W      | 2012-01-03
  2 | L      | 2012-01-02
  1 | W      | 2012-01-01 
```

我将如何编写查询以返回使用 PostgreSQL 的最新连续输赢行？在这种情况下，我正在寻找以下结果：

```
 id | result |   played   
----+--------+------------
  7 | L      | 2012-01-07
  6 | L      | 2012-01-06
  5 | L      | 2012-01-05 
```

我猜答案是使用`lag()`和分区语法，但我似乎无法确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T03:39:34.057

假设（正如你没有告诉的那样）

*   `result`:有两个不同的值`(W, L)`。
*   `id`在最新条目具有最高的意义上是连续的`id`。

这将完成这项工作：

```
SELECT *
FROM   tbl
WHERE  id > (
    SELECT max(id)
    FROM   tbl
    GROUP  BY result
    ORDER  BY max(id)
    LIMIT  1
    ); 
```

这将获取`W`and的最新 id `L`，两者中较早的一个。所以 a`LIMIT 1`得到相反结果的最后一个条目。`id`高于该值的行形成最新的连胜记录。瞧。

# php - 别名为 Postfix 中的电子邮件地址时 PHP 脚本未运行

> ID：10004330
> 
> 赞同：1
> 
> 时间：2012-04-04T02:51:50.220
> 
> 标签：php, postfix-mta

我目前正在运行 Postfix 服务，可以正常发送和接收电子邮件。我正在尝试使用别名“测试”地址来运行 PHP 脚本。请参阅下面的别名文件摘录。

```
test: "| php -q /var/blahblahblah/php/test.php" 
```

这是test.php的内容。这似乎在命令行中正确运行。

```
#!/usr/bin/php
<?php
$file = fopen("/tmp/postfixtest", "a");
fwrite($file, "Script successfully ran at ".date("Y-m-d H:i:s")."\n");
fclose($file);
?> 
```

下面是 mail.log 的摘录，显示了感兴趣的主要行。

```
postfix/qmgr[3427]: 02BE9472A: from=<sender@email.com>, size=1681, nrcpt=1 (queue active)
postfix/virtual[3435]: 02BE9472A: to=<test@domain.com>, relay=virtual, delay=0.45, delays=0.42/0.01/0/0.02, dsn=2.0.0, status=sent (delivered to maildir)
postfix/qmgr[3427]: 02BE9472A: removed 
```

请注意括号中的传递到 maildir 位。这应该说“交付给脚本”之类的东西吗？

现在所有文件都设置为 777 权限，别名文件通过使用保持更新`sudo newaliases`

似乎 PHP 脚本没有被正确调用，但我在任何日志中都没有收到“错误”。

有没有人经历过或解决过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:15:03.973

from `man aliases`

```
|command
       Mail  is piped into command. Commands that contain special char-
       acters, such as whitespace, should be  enclosed  between  double
       quotes. See local(8) for details of delivery to command.

       When  the  command  fails, a limited amount of command output is
       mailed back to the  sender.   The  file  /usr/include/sysexits.h
       defines  the expected exit status codes. For example, use "|exit
       67" to simulate a "user unknown" error, and "|exit 0" to  imple-
       ment an expensive black hole. 
```

so I would expect this is what is meant:

```
test: |"php -q /var/blahblahblah/php/test.php" 
```

# c# - 更新 GUI 表单分离类

> ID：10004331
> 
> 赞同：2
> 
> 时间：2012-04-04T02:51:57.500
> 
> 标签：c#

所以我一直在寻找过去几个小时，阅读有关如何从另一个类更新表单的 GUI 的所有内容。我尝试了 backgroundworker 和 Invoke，但似乎没有任何效果，或者我做得不对。（我对 c# 还是很陌生）那么..为什么这种方法根本不起作用？

*表格一：*

```
 private void button2_Click_1(object sender, EventArgs e)
    {
        prog.stuff();
    }
    public void Updateprogressbar(int input)
    {
        progressBar1.Value = input;

    } 
```

*类程序*

```
 public static void stuff()
    {
        Form1 f = new Form1();
        int up = 100;
        f.Updateprogressbar(up);
    } 
```

我知道这可能是一个非常简单的问题，但我仍然无法弄清楚。进度条不会更新。而且我确实在属性中将其全部启用。不管怎么说，还是要谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T02:57:27.007

```
private void button2_Click_1(object sender, EventArgs e)
    {
        prog.stuff(this);
    }
    public void Updateprogressbar(int input)
    {
        progressBar1.Value = input;

    }

 public static void stuff(Form f)
    {
        int up = 100;
        f.Updateprogressbar(up);
    } 
```

因此，您可以看到代码不起作用的原因是因为您实例化了 Form1 的新实例，该实例仅在 stuff() 方法中有效。在我的代码中，我通过让我访问 form1 的方法，将 Form1 的引用传递到类 Prog.Stuff 中。

# c++ - Win32 GUI程序中的布局

> ID：10004332
> 
> 赞同：14
> 
> 时间：2012-04-04T02:52:42.187
> 
> 标签：c++, winapi

我有一个关于使用直接 Win32 进行 GUI 编程的抽象问题。由于我之前唯一的 GUI 经验是在 Java 中使用 Swing，因此我习惯于拥有一个布局管理器，该管理器会在调整窗口大小时自动调整按钮和内容的大小/重新定位。Win32 API 中是否内置了类似的东西，或者是否必须在每次重绘时使用绝对位置手动重新计算大小和位置？我认为这实际上是实现它的方法，因为我没有偶然发现任何看起来像 MSDN 文档中的布局管理的东西，但因为那些（在我看来）有点迷宫，我可能错过了它。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T03:13:58.063

You need to take a look at [ATL](http://en.wikipedia.org/wiki/Active_Template_Library) (shipped with Visual C++), and correspondingly, [WTL](http://sourceforge.net/projects/wtl/) (not shipped, need to download).

They compile almost completely to "straight Win32", while providing a nice C++ wrapper around them. They are very lightweight (almost *no* weight, actually -- it's direct Win32 for 99% of the calls), and yet WTL is designed to mimic MFC's features, so it's still pretty featureful.

You need to be semi-good with C++, though.

The easiest way is to use `CDialogResize<CYourDialog>` in something like

```
// Put ATL includes before here..
#include <atlcrack.h>  // Include this from WTL for message map
#include <atlframe.h>  // Include this from WTL for CDialogResize

class CYourDialog : CDialogImpl<CYourDialog>, CDialogResize<CYourDialog>
{
    BOOL OnInitDialog(CWindow wndFocus, LPARAM lInitParam)
    {
        this->DlgResize_Init();                     // Initialize the positions
    }

    BEGIN_MSG_MAP_EX(CYourDialog)  // Learn about message maps if you haven't
        MSG_WM_INITDIALOG(OnInitDialog)
        CHAIN_MSG_MAP(CDialogResize<CYourDialog>)   // Chain to the parent
    END_MSG_MAP()

    BEGIN_DLGRESIZE_MAP(CYourDialog)
        DLGRESIZE_CONTROL(IDOK, DLSZ_MOVE_Y)        // Layout for "OK" button
    END_DLGRESIZE_MAP()
}; 
```

`DLGRESIZE_CONTROL()` is the heart of the layout -- `DLSZ_MOVE_Y`, for example, says that you want to move `IDOK` vertically. You can also group them, but it gets tricky (sometimes I don't understand what's going on either)... but once you get it right, it's actually not that bad. :)

* * *

Here's a self-contained example:

```
#pragma comment(linker, "/manifestdependency:\"type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='*' publicKeyToken='6595b64144ccf1df' language='*'\"")

#include <atlbase.h>
extern CComModule _Module;
#include <atlapp.h>
#include <atlcrack.h>
#include <atlwin.h>
#include <atlframe.h>
#include "resource.h"

class CMyDialog : public CDialogImpl<CMyDialog>, CDialogResize<CMyDialog>
{
public:
    enum { IDD = IDD_DIALOG1 };

private:
    BOOL OnInitDialog(CWindow wndFocus, LPARAM)
    {
        this->DlgResize_Init();
        return TRUE;
    }

    void OnOK(UINT, int, HWND) { this->EndDialog(ERROR_SUCCESS); }
    void OnCancel(UINT, int, HWND) { this->EndDialog(ERROR_CANCELLED); }

    BEGIN_MSG_MAP_EX(CMyDialog)
        MSG_WM_INITDIALOG(OnInitDialog)
        COMMAND_HANDLER_EX(IDOK, BN_CLICKED, OnOK)
        COMMAND_HANDLER_EX(IDCANCEL, BN_CLICKED, OnCancel)
        CHAIN_MSG_MAP(CDialogResize<CMyDialog>)
    END_MSG_MAP()

    BEGIN_DLGRESIZE_MAP(CMyDialog)
        DLGRESIZE_CONTROL(IDOK, DLSZ_MOVE_X | DLSZ_MOVE_Y)
        DLGRESIZE_CONTROL(IDCANCEL, DLSZ_MOVE_X | DLSZ_MOVE_Y)
    END_DLGRESIZE_MAP()
};

CComModule _Module;

int WINAPI _tWinMain(
    HINSTANCE hInstance, HINSTANCE hInstPrevious,
    LPTSTR lpCmdLine, int nCmdShow)
{
    _Module.Init(NULL, hInstance);
    {
        CMyDialog dialog;
        dialog.DoModal();
    }
    _Module.Term();
} 
```

To compile it, you also need a file named `resource.h` with the following contents in the same project folder:

```
#define IDD_DIALOG1                     101
#define IDR_RT_MANIFEST1                103 
```

And a file named `Sample.rc` added to the project, which can be edited with Visual Studio and which contains the dialog layout:

```
#include "resource.h"

#define APSTUDIO_READONLY_SYMBOLS
#include "afxres.h"
#undef APSTUDIO_READONLY_SYMBOLS
#if !defined(AFX_RESOURCE_DLL) || defined(AFX_TARG_ENU)
#ifdef _WIN32
LANGUAGE LANG_ENGLISH, SUBLANG_ENGLISH_US
#pragma code_page(1252)
#endif
#ifdef APSTUDIO_INVOKED
1 TEXTINCLUDE 
BEGIN
    "resource.h\0"
END

2 TEXTINCLUDE 
BEGIN
    "#include ""afxres.h""\r\n"
    "\0"
END

3 TEXTINCLUDE 
BEGIN
    "\r\n"
    "\0"
END
#endif
IDD_DIALOG1 DIALOGEX 0, 0, 316, 180
STYLE DS_SETFONT | DS_FIXEDSYS | DS_CENTER | WS_MINIMIZEBOX | WS_MAXIMIZEBOX | WS_POPUP | WS_CLIPCHILDREN | WS_CAPTION | WS_SYSMENU | WS_THICKFRAME
EXSTYLE WS_EX_APPWINDOW
CAPTION "Dialog"
FONT 8, "MS Shell Dlg", 400, 0, 0x1
BEGIN
    DEFPUSHBUTTON   "OK",IDOK,205,159,50,14
    PUSHBUTTON      "Cancel",IDCANCEL,259,159,50,14
END
#ifdef APSTUDIO_INVOKED
GUIDELINES DESIGNINFO 
BEGIN
    IDD_DIALOG1, DIALOG
    BEGIN
        LEFTMARGIN, 7
        RIGHTMARGIN, 309
        TOPMARGIN, 7
        BOTTOMMARGIN, 173
    END
END
#endif
#endif
#ifndef APSTUDIO_INVOKED
#endif 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T03:09:41.740

不，Win32 API 不包含调整控件大小和重新定位控件的代码。您必须自己编写或使用库。Microsoft 在 Visual Studio 和 MFC（围绕 API 的 C++ 包装器）中提供了资源编辑器，但它们都不能解决您的实际问题（自动调整大小和重新定位）。我使用了 wxWidgets，它比 MFC 更加连贯（在我看来），并且有一个称为“sizers”的概念，它确实解决了调整大小和重新定位的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T02:59:37.820

您可能需要查看[MFC](http://msdn.microsoft.com/en-us/library/47xcww9x%28v=vs.80%29.aspx)，它是 win32 的包装器，它将隐藏 GUI 设计中的大部分困难部分。它将为您提供一个资源编辑器，您可以在其中以所见即所得的形式创建和定位控件。

# objective-c - 使用 UISegmentedControl 切换 UIViewControllers，同时使用相同的工具栏

> ID：10004342
> 
> 赞同：0
> 
> 时间：2012-04-04T02:54:30.117
> 
> 标签：objective-c, ios, uitoolbar, uisegmentedcontrol

我看到一些关于使用分段控件切换视图控制器的问题，但似乎没有一个建议符合我的需求。

我有一个带有 3 个标签的标签栏应用程序。第一个选项卡是一个以 tableview 作为根的导航控制器。选择一个行时，我将视图控制器X推到导航堆栈上。

在控制器 X 中，我希望使用分段控件放置在底部工具栏中（与许多示例中的标题视图相反）。如果选择了第一段，则控制器 A 将显示在控制器 X 中，如果选择了第二段，则将显示控制器 B，同时保持 A 和 B 的工具栏相同。解决此问题的最佳方法是什么？

谢谢，乔

# jquery - 嵌套的 Contenteditable 不会专注于 Opera

> ID：10004353
> 
> 赞同：0
> 
> 时间：2012-04-04T02:56:30.520
> 
> 标签：jquery, opera, contenteditable

我对嵌套的 contenteditable div 有疑问。在 Mozilla 和 Webkit 中它都能正常工作。您可以在嵌套 div 内或父级内单击，光标将按预期显示。问题在于 Opera。我可以在父 div 中获取光标，但是当我在嵌套 div 中单击时没有光标。这是我的例子：

[http://jsfiddle.net/Hawkee/gSd2p/1/](http://jsfiddle.net/Hawkee/gSd2p/1/)

首先单击链接以添加嵌套 div。您会看到，如果您单击嵌套 div 上方的“代码”，光标会出现，但只要您在 div 内单击，它就会消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T18:25:24.127

在 Opera 中将焦点返回到 div 的解决方法：

```
var range = document.createRange();
range.selectNodeContents(document.getElementById('yourdiv'));
range.collapse(false);
var selection = window.getSelection();
selection.removeAllRanges();
selection.addRange(range); 
```

# ruby-on-rails-3 - respond_with/to 渲染错误的视图

> ID：10004358
> 
> 赞同：2
> 
> 时间：2012-04-04T02:57:37.917
> 
> 标签：ruby-on-rails-3, respond-with

我试图理解为什么 respond_with/to 呈现错误的视图......

### 控制器

```
respond_to :html, :js

def get_numbers
  Rails.logger.info request.format
  @numbers = Number.all
  respond_with @numbers
end 
```

发出 ajax 请求时，rails 日志显示格式为`JS`，请求格式为`text/javascript`，但它呈现 html 视图。

### 日志

```
Started GET "/numbers/get_numbers?_=1333564838110" for 127.0.0.1 at 2012-04-04 11:40:38 -0700
Processing by NumbersController#get_numbers as JS
  ...
text/javascript
  Rendered numbers/get_numbers.html.haml within layouts/application (106.4ms) 
```

我有一个`get_numbers.html.haml`&`get_numbers.js.coffee`视图`views/numbers`

我可以通过执行以下操作来呈现正确的视图：

```
respond_with @numbers do |format|
  format.js {}
end 
```

但它不应该只用渲染js视图吗`respond_with @numbers`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:52:08.677

如果您希望在未明确指定格式时响应为 JavaScript（意味着没有`.html`或`.js`在 URL 中），您可以在路由中设置默认格式参数：

```
match '/numbers/get_numbers(.:format)' => 'numbers#get_numbers', :defaults => { :format => :js } 
```

您还可以通过将调用中的格式顺序切换为 来获得所需的结果`respond_to`，因为它似乎默认为第一个，但我尚未对此进行测试。

# java - 在 XYDifferenceRenderer 上绘制网格线

> ID：10004359
> 
> 赞同：1
> 
> 时间：2012-04-04T02:57:40.990
> 
> 标签：java, jfreechart, timeserieschart

我正在使用 JFreeChart 制作（时间序列）山图。所以，我做了 2 个时间序列——数据 1 和所有范围值的数据都为零。

```
 TimeSeriesCollection dataset2 = new TimeSeriesCollection();
  dataset2.addSeries(close); //my data series/
  dataset2.addSeries(zeroseries); /zero series/ 
```

然后，我使用 XYDifferenceRenderer 用我想要的颜色填充 2 个系列之间的空白。

创建图表和设置渲染器的代码：

```
 final JFreeChart chart = garch_differencechart(url);//my method to create the chart//
  final ChartPanel chartPanel = new ChartPanel(chart);
  final XYPlot plot = (XYPlot) chart.getPlot();
  chart.setBackgroundPaint(Color.WHITE);
  plot.setBackgroundPaint(Color.WHITE);
  XYDifferenceRenderer renderer = new XYDifferenceRenderer();
  renderer.setPositivePaint(new Color(202, 225, 255));
  renderer.setSeriesPaint(0, new Color(72, 118, 255));
  renderer.setSeriesStroke(0, new BasicStroke(1.2f));
  plot.setRenderer(renderer); 
```

设置 GridLines 可见的代码：

```
 plot.setDomainGridlinesVisible(true);
 plot.setDomainGridlinePaint(new Color(234,234,234));
 plot.setDomainGridlineStroke(new BasicStroke(0.5f));

 plot.setRangeGridlinesVisible(true);
 plot.setRangeGridlinePaint(new Color(234,234,234));
 plot.setRangeGridlineStroke(new BasicStroke(0.5f)); 
```

![在此处输入图像描述](../Images/166f0781593af9d7a658144125d941f7.png)但是，渲染器覆盖了绘图的网格线（似乎网格线是在 XYDifferenceRenderer 之前绘制的）。

如何在 XYDifferenceRenderer 上获得带有网格线的绘图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T03:24:14.760

网格线显示在[演示](http://www.jfree.org/jfreechart/samples.html)和[API](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/xy/XYDifferenceRenderer.html)中。一个[sscce](http://sscce.org/)将是决定性的，但我怀疑你的网格和填充油漆只需要更多的对比度。

# javascript - 从 Rails 资产管道中清除缓存

> ID：10004365
> 
> 赞同：58
> 
> 时间：2012-04-04T02:58:07.960
> 
> 标签：javascript, ruby-on-rails, caching, ruby-on-rails-3.1, asset-pipeline

我正在 Rails 中开始一个新项目，看起来 application.js 清单文件对我引用的 javascript 做了一些有趣的事情——它是否将这些文件缓存为资产管道的一部分？

这就是发生的事情。我在 vendor/assets/javascripts 文件夹中添加了一个名为 jquery.autoresize.js 的 javascript 文件，然后在 application.js 清单中引用该文件，如下所示：

```
//= require jquery.autoresize.js 
```

然后我启动了rails服务器。但是在我的应用程序中浏览之后，我意识到我不小心添加了错误版本的 jquery.autoresize.js 文件。因此，我删除了该文件，然后将正确的版本添加到 vendor/assets/javascripts 文件夹中。但是，令我恐惧的是，当我重新加载页面时，它仍在加载旧的 javascript 文件。

我尝试清空浏览器缓存，然后退出并重新启动 Rails 服务器，但无济于事。我通过简单地重命名我的 javascript 文件并引用新名称来共同破解一个解决方案，效果很好。但必须有一个更好的解决方案。

新的资产管道是否会以某种方式缓存您引用的文件？如果是这样，我该如何清除该缓存？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-05T23:22:52.497

我假设我们正在谈论生产环境。

当您在生产环境中更改任何 javascript 或样式表时，您需要运行`rake assets:precompile`；此任务编译和压缩各种 .js 和 .css 文件，并创建您的视图加载的 application.js 和 application.css 文件。

如果您替换`jquery.autoresize.js`为具有*较旧时间戳*的版本，则预编译步骤可能会跳过它，认为编译的版本是最新的。您可以通过首先运行来避免这种情况，强制它从头开始`rake assets:clean`重建目录中的所有内容。`public/assets`

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2015-07-20T13:11:13.053

也试试`rake assets:clobber`。这将完全重置所有内容并删除所有已编译的资产。另外，我经常需要在推送到生产之前设置环境：`RAILS_ENV=production rake assets:precompile`.

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-04-04T04:23:28.267

每次编辑内容时，Rails 都会自动清除单个文件的缓存。**要清除单个文件的缓存，只需打开文件，编辑一行代码，然后重新保存即可。**Rails 将清除该*文件*的缓存，并且浏览器将在下次加载页面时加载新文件。

jquery.autoresize.js 使用文件的旧缓存版本的原因是因为旧版本被删除，然后新版本被复制并以相同的名称粘贴到同一文件夹中。因为文件本身从未被编辑过，Rails 继续使用缓存的旧文件。

这是因为资产管道对缓存使用指纹。

> 指纹识别是一种使文件名依赖于文件内容的技术。当文件内容改变时，文件名也随之改变。对于静态或不经常更改的内容，这提供了一种简单的方法来判断文件的两个版本是否相同，即使跨不同的服务器或部署日期也是如此。
> 
> 当文件名是唯一的并且基于其内容时，可以设置 HTTP 标头以鼓励各处的缓存（无论是在 CDN、ISP、网络设备还是 Web 浏览器中）以保留自己的内容副本。当内容更新时，指纹会发生变化。这将导致远程客户端请求内容的新副本。这通常称为缓存清除。
> 
> Rails 用于指纹识别的技术是在名称中插入内容的散列，通常在末尾。例如，可以使用其内容的 MD5 摘要重命名 CSS 文件 global.css：

```
global-908e25f4bf641868d8683022a5b62f54.css 
```

因此，如果您删除清单中引用的文件，然后复制到具有相同名称的新文件中，则永远不会发生缓存破坏。当您编辑文件时，指纹会启动，并为文件名生成一个新的哈希值。*这会破坏该文件*的缓存。

有关完整的故事，请参阅[什么是指纹识别以及我为什么要关心？](https://guides.rubyonrails.org/asset_pipeline.html#what-is-fingerprinting-and-why-should-i-care-questionmark).

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-08-10T17:21:09.960

`rake tmp:clear`为我做了诀窍，我正在使用更少的导轨。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-03-03T21:15:52.660

我用`config.assets.version = '1.01019'`我`application.rb`的来破坏整个缓存。当我想推送一个完整的新版本时，我会增加版本，这样就可以了。这会处理那些 Rails 出于任何原因没有重新编译为资产的边缘情况。

# ios - Xcode Phonegap 构建错误：没有这样的文件或目录

> ID：10004369
> 
> 赞同：0
> 
> 时间：2012-04-04T02:59:30.003
> 
> 标签：ios, xcode, cordova

每次我在 xcode 4.3 中开始一个新项目时都会遇到这些错误。由于文件在目录中，我无法弄清楚如何摆脱它们。我在开始项目时关闭了 ARC。有人能帮我吗。

```
chmod: /Users/AB/Dropbox/Clients/Foreign: No such file or directory
chmod: Car: No such file or directory
chmod: Services/Mobile: No such file or directory
chmod: Application/xcode/foreignCarServies/verify.sh: No such file or directory
/Users/AB/Library/Developer/Xcode/DerivedData/foreignCarServies-hkikistryyiksohlfphsfvjcrimy/Build/Intermediates/foreignCarServies.build/Debug-iphonesimulator/foreignCarServies.build/Script-204C9E7A152BED2200A80E8B.sh: line 4: /Users/AB/Dropbox/Clients/Foreign: No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T03:21:26.657

Looks like you have a "run script" build phase in which you are doing a `chmod`.

Find that phase and delete it.

If it happens with every new project, it sounds like your templates somehow got messed up.

# android - 无法使位图的某些部分透明

> ID：10004378
> 
> 赞同：0
> 
> 时间：2012-04-04T03:01:37.490
> 
> 标签：android

我正在开发一个 android 应用程序，我需要在其中捕获文本并将其保存为透明图像。捕获文本已经完成，但是制作一个透明的 png 文件是我卡住的地方，因为我根本不熟悉图像像素操作。这是我到目前为止所拥有的......我首先创建一个空白位图并用白色背景填充它，然后我将油漆的透明度设置为 0（完全透明），然后使用 XOR 模式将源位图绘制到目标位图中。 . 但是当我运行应用程序时，我看到的只是一张空白的白色图像。如果有人指出我做错了什么以及如何解决它，我会很高兴。提前致谢。

```
b = Bitmap.createBitmap(tw, th,Bitmap.Config.ARGB_8888); 
Canvas canvas = new Canvas(b);
Rect dest = new Rect(0,0,b.getWidth(),b.getHeight());               
Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
paint.setColor(Color.WHITE);

canvas.drawRect(0, 0, b.getWidth(), b.getHeight(), paint);
paint.setAlpha(0);
paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.XOR));
canvas.drawBitmap(bmp,null,dest,paint); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:14:10.257

Have you looked at : [How to change a bitmap's opacity?](https://stackoverflow.com/questions/5118894/set-alpha-of-bitmap-image) Seems like

```
paint.setAlpha(0); 
```

won't do anything as you need to set the alpha channel to something greater than 0...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T03:21:17.253

Use:

```
Color.argb(0,0,0,0) 
```

The first parameter is the alpha. Set it to 0 for complete transparency.

# sql-server - 无法再登录 SQL Server 2008 R2

> ID：10004381
> 
> 赞同：2
> 
> 时间：2012-04-04T03:02:02.110
> 
> 标签：sql-server, sql-server-2008

不知道是什么原因造成的，我在任务管理器中结束了一些 SQL 进程的任务，然后重新启动了计算机。现在我无法再登录到 SQL Server 2008 R2。这是我尝试登录时遇到的错误：

> ====================================
> 
> 无法连接到 JSMITH。
> 
> ====================================
> 
> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）（.Net SqlClient 数据提供者）
> 
> ------------------ 如需帮助，请点击：http: [//go.microsoft.com/fwlink ?ProdName=Microsoft +SQL+Server&EvtSrc=MSSQLServer&EvtID=2&LinkId=20476](http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&EvtSrc=MSSQLServer&EvtID=2&LinkId=20476)
> 
> ------------------------------ 错误号：2 严重性：20 状态：0
> 
> ------------------------------ 节目地点：
> 
> 在 System.Data.SqlClient.SqlInternalConnection.OnError（SqlException 异常，布尔 breakConnection） 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning（TdsParserStateObject stateObj） 在 System.Data.SqlClient.TdsParser.Connect（ServerInfo serverInfo，SqlInternalConnectionTds connHandler，布尔 ignoreSniOpenTimeout , Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean IntegratedSecurity, SqlConnection owningObject) 在 System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnection owningObject) 在 System.Data.SqlClient.SqlInternalConnectionTds .LoginNoFailover(String host, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject,SqlConnectionString connectionOptions, Int64 timerStart) 在 System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) 在 System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) 在 System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) 在 System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup) 在System.Data.ProviderBase。DbConnectionFactory.GetConnection(DbConnection owningConnection) 在 System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) 在 System.Data.SqlClient.SqlConnection.Open() 在 Microsoft.SqlServer.Management.SqlStudio.Explorer.ObjectExplorerService.ValidateConnection （UIConnectionInfo ci，IServerType 服务器）在 Microsoft.SqlServer.Management.UI.ConnectionDlg.Connector.ConnectionThreadUser()ValidateConnection(UIConnectionInfo ci, IServerType server) 在 Microsoft.SqlServer.Management.UI.ConnectionDlg.Connector.ConnectionThreadUser()ValidateConnection(UIConnectionInfo ci, IServerType server) 在 Microsoft.SqlServer.Management.UI.ConnectionDlg.Connector.ConnectionThreadUser()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T03:10:58.887

我建议检查以下内容：

1.  检查 SQL Server 服务是否正在运行，如果没有，请检查 EventLog 是否有任何与服务相关的错误。

2.  检查名称管道是否在配置管理器中启用。您可能还想尝试改用 TCP/IP。如果要切换到 TCP/IP，则需要确保 SQL Server Browser 服务也已启用/正在运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T03:16:00.473

尝试重新启动计算机。如果其他人对您的服务器拥有管理员权限，则他们可能更改了您的密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T03:52:50.670

我通过在命令提示符中执行这个解决了这个问题：

> 网络启动“SQL Server (MSSQLSERVER)”

我不确定为什么会修复它，或者为什么服务没有在 Windows 启动时自动启动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-08T05:46:10.943

运行 Services.msc，转到 SQL Server 代理，如果服务未运行，则启动该服务。

about the service: Executes jobs, monitors SQL Server, fires alerts, and allows automation of some administrative tasks.

# javascript - ajax 调用/Javascript，代码流/逻辑问题的不稳定执行。？

> ID：10004389
> 
> 赞同：0
> 
> 时间：2012-04-04T03:02:55.120
> 
> 标签：javascript, ruby-on-rails, ajax, asynchronous, logic

我有一个代码正在对服务器进行 ajax 调用并在屏幕上进行一些绘图。一切正常，但执行似乎不稳定，有时我必须重新加载页面几次才能看到绘图功能的结果。绘图是通过 Processing.js 完成的。这是带有一些注释的代码，我添加了这些注释，显示了我想要代码做什么。

视图结构（它是 Rails 3.2 ）如下：

应用程序/句子/show.html.erb

```
 <script>

    $(document).ready(function () {
      //This calls the action in controller that queries database for new results:
      setInterval(function(){
        var idx  = "<%= @sentence.id %>";
        $.post("getstatus/", {id:idx});
        console.log("reload");
      },6000);
    });

    </script>
    <%= javascript_include_tag "pjs" %>
    <div class="container-fluid plots-field" >
    <div id="grid-system">
    <canvas id="graphsketch" data-processing-sources="/assets/pjs/graphBuilder2_2.pde"></canvas>

    <div id='node_div'></div>
    <div id='iframe_div'></div>
    <div id='comments_div'></div>
    <div id='link_to_plot'><%= link_to "Original plot", @sentence.plot %></div>
    </div>  
    </div>
    <div id="data_div"></div> 
```

app/controllers/sentences_controller.rb <- 这里我有一个 getstatus 函数：

```
 def getstatus
        @sentence = Sentence.find(params[:id])
        @sentence_so_far = @sentence.get_graph.to_json.html_safe
        @sentence_test = "BBB"

            respond_to do |format|
            format.js
        end
      end 
```

app/controllers/sentences/gestatus.js.erb <- 这是绘图发生的地方。我有一个“缓存”变量，它通过 jquery.data 保存到相应的 div 中，并与控制器的最新返回值进行比较。

```
 var bound = false;
    var pjs = Processing.getInstanceById("graphsketch");
    var text = <%= @sentence_so_far %>;
    var test = <%= array_or_string_for_javascript(@sentence_test)%>;

    //Added this to be able to check difference between cache and current data
    Array.prototype.diff = function(a) {
        return this.filter(function(i) {
            return !(a.indexOf(i) > -1);
        });
    };
    //Saving current state to data with 'orig' ket
    $("#data_div").data("orig", text);
    var orig = $("#data_div").data("orig");
    //Getting cache from data_div
    var cache = $("#data_div").data("cache");
    //If I have the cache, get the difference and get assign it to text variable, if there is no difference, means I already have what I need on screen
    if (cache) {
        var dif = cache.diff(orig);
        text = dif;
    }
    //If cache is different from what I had before, draw stuff with text.
    if (cache != orig) {
        pjs.update(text);
    }
    //Save current text to cache.
    $("#data_div").data("cache", text);
    //This allows Processing.js to interact with Javascript
    function bindJavascript() {
        var pjs = Processing.getInstanceById("graphsketch");
        if (pjs != null) {
            pjs.bindJavascript(this);
            bound = true;
        }
        if (!bound) setTimeout(bindJavascript, 250);
    }
    bindJavascript();
    //This function is getting called form within Processing.js and works fine.. 
    function nodeName(name) {

        $.post("/nodes/this_node/", {id: name});    
    //  console.log(name);

    } 
```

所以结果是有时我实际上可以看到 pjs.update(text) 的结果，但有时什么也没画。从服务器控制台我可以看到控制器操作工作正常，并且总是从模型中返回我需要的东西。

编辑：这是 HTML 页面的“显示源”，如果有帮助的话..

```
 <!DOCTYPE html>
    <html lang="en">
      <head>

    <link href="/assets/bootstrap.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/docs.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap-responsive.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/style.css?body=1" media="screen" rel="stylesheet" type="text/css" />
    <link href='http://fonts.googleapis.com/css?family=Didact+Gothic' rel='stylesheet' type='text/css'>
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/pjs.js?body=1" type="text/javascript"></script>
<script src="/assets/pjs/lib/toxiclibs.js?body=1" type="text/javascript"></script>
<script src="/assets/pjs/lib/toxiclibs.min.js?body=1" type="text/javascript"></script>
<script src="/assets/pjs/processing.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>

    </head>
<body>
            <script>

$(document).ready(function () {
  setInterval(function(){
    var idx  = "5";
    $.post("getstatus/", {id:idx});
    console.log("reload");
  },6000);
});

</script>
<script src="/assets/pjs.js?body=1" type="text/javascript"></script>
<script src="/assets/pjs/lib/toxiclibs.js?body=1" type="text/javascript"></script>
<script src="/assets/pjs/processing.js?body=1" type="text/javascript"></script>
<div class="container-fluid plots-field" >
<div id="grid-system">
<canvas id="graphsketch" data-processing-sources="/assets/pjs/graphBuilder2_2.pde"></canvas>

<div id='node_div'></div>
<div id='iframe_div'></div>
<div id='comments_div'></div>
<div id='link_to_plot'><a href="/plots/60">Original plot</a></div>
</div>  
</div>
<div id="data_div"></div>

<div id="video_grid" class="row"></div>
</body>

</html> 
```

非常感谢任何输入。如果我可以提供更多信息，请告诉我。

谢谢！

# c++ - 无法从 QNetworkAccessManager 访问 Ssl 错误列表

> ID：10004391
> 
> 赞同：1
> 
> 时间：2012-04-04T03:03:20.590
> 
> 标签：c++, qt, ssl, undefined, qnetworkaccessmanager

我正在做一个项目，我试图通过 REST 请求向我们的网络服务发送请求。首先，我只将`finished(QNetworkReply*)`信号连接到一个插槽，但由于 ssl 问题，它永远无法完成，我也尝试连接`sslErrors(QNetworkReply*, const QList<QSslError>&)`插槽，因为请求是 https。

```
connect(&_accessManager, SIGNAL(sslErrors(QNetworkReply*, const QList<QSslError>&)), 
        this, SLOT(printSslErrors(QNetworkReply*, const QList<QSslError>&))); 
```

然后在我的打印功能中，我无法以任何方式访问错误列表。

```
void AssetManager::printSslErrors(QNetworkReply *reply, const QList<QSslError>& errors) {
     ...
} 
```

我试过：

```
const QSslError test = errors.at(0); // error on 'test' 
QSslError test = errors.at(0); // error on 'test' 
```

或者

```
foreach(QSslError error, errors) {
    qDebug() << error.errorString(); // error on 'errors'
}
for(int i = 0; i < errors.count(); i++) {
     qDebug() << errors.at(i).errorString(); // error on 'errors'
} 
```

这导致：

> 错误 C2079：'test' 使用未定义的类 'QSslError'
> 错误 C2440：'initializing'：无法从 'const QSslError' 转换为 'int'

或者

> 错误 C2027：使用未定义类型 'QSslError'
> 错误 C2228：'.toString' 左侧必须有类/结构/联合

此外，IntelliSense 强调`errors`或`test`带有以下消息：

> IntelliSense：不允许不完整的类型

（请注意，当我这样做时它不会抱怨`errors.count()`）

我包含`<QSslError>`在头文件中...

我一直在为 sslError 信号苦苦挣扎，几周前我什至无法将信号连接到任何东西，因为它“不存在”。我错过了一个模块还是什么？

谢谢你的帮助

编辑：

仍然收到错误：

> Object::connect: 没有这样的信号 QNetworkAccessManager::sslErrors(QNetworkReply*, const QList&)

另外，无法检查我是否有 SSL

```
qDebug() << QSslSocket::supportsSsl(); 
```

由于 QSslSocket 是未定义的，即使它被包含在内。我必须在这里缺少一些重要的东西，对吗？我必须安装一些东西吗？我完全迷失在这里:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T05:27:24.070

确保您的 Qt 是在启用 SSL 支持的情况下构建的（并且可以在 PATH 上找到 OpenSSL dll）。

如果您自己构建 Qt（我也经常忘记那些配置选项），或者您使用 linux 发行版中的 Qt 碰巧在没有 SSL 的情况下构建它（尽管我从未见过），这通常只是一个问题。

编辑：如果您需要在 Windows 上构建它（并且由于某种原因不能使用[预构建的二进制文件）：](http://qt.nokia.com/downloads/windows-cpp-vs2010)

*   下载[OpenSSL](http://www.openssl.org/source)和[Qt](http://download.qt.nokia.com/qt/source/qt-everywhere-opensource-src-4.8.1.zip)并将其解压缩到同一个文件夹中。例如：

    `c:\root\openssl-1.0.1`

    `c:\root\qt-everywhere-opensource-src-4.8.1`

*   启动 Visual Studio 命令行并运行 c:\root\openssl-1.0.1\ms\32all.bat，等待构建

*   cd 进入 c:\root\qt-everywhere-opensource-src-4.8.1 并运行

    `configure.exe -platform win32-msvc2010 -openssl -I c:\root\openssl-1.0.1\include`

*   确保 Qt 检测到并启用 OpenSSL 支持（配置打印出所有内容的列表）

*   运行 nmake 来构建 Qt 本身

（针对其他版本的VS进行适当修改）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T16:42:57.640

我只是遇到了同样的错误，想知道为什么信号无效。如上所述，确实是因为未启用 OpenSSL 支持。请参阅 QNetworkAccessManager.h:144:146：

```
#ifndef QT_NO_OPENSSL
    void sslErrors(QNetworkReply *reply, const QList<QSslError> &errors);
#endif 
```

即，仅当编译 Qt 时支持 OpenSSL 时才声明信号。

# mobile - WordPress 移动集成？

> ID：10004394
> 
> 赞同：0
> 
> 时间：2012-04-04T03:03:38.780
> 
> 标签：mobile, wordpress, smartphone

我有一个与我的自定义主题一起使用的现有网站。不幸的是，当我从智能手机访问它时，它看起来不太好。

有人可以推荐一个可以帮助提升智能手机用户体验的好插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:14:52.813

[http://www.bravenewcode.com/store/plugins/wptouch-pro/](http://www.bravenewcode.com/store/plugins/wptouch-pro/)

让我知道你是否喜欢它...

# c++ - 在两个迭代器之间获取“std::string”的子字符串

> ID：10004395
> 
> 赞同：32
> 
> 时间：2012-04-04T03:03:41.283
> 
> 标签：c++, string, parsing

我有一个程序，它预计将几个选项作为输入，以 (p1, p2, p3, ... ) 的形式指定概率。所以命令行用法实际上是：

```
./myprog -dist (0.20, 0.40, 0.40) 
```

我想在 C++ 中解析这样的列表，我目前正在尝试使用 std::string 类型的迭代器和 Boost 提供的 split 函数来完成它。

```
// Assume stuff up here is OK
std::vector<string> dist_strs; // Will hold the stuff that is split by boost.
std::string tmp1(argv[k+1]);   // Assign the parentheses enclosed list into this std::string.

// Do some error checking here to make sure tmp1 is valid.

boost::split(dist_strs,  <what to put here?>   , boost::is_any_of(", ")); 
```

注意上面的`<what to put here?>`部分。因为我需要忽略开头和结尾的括号，所以我想做类似的事情

```
tmp1.substr( ++tmp1.begin(), --tmp1.end() ) 
```

但它看起来不像这样`substr`工作，我在文档中找不到可以做到这一点的函数。

我的一个想法是做迭代器算术，如果允许的话，并`substr`用来调用

```
tmp1.substr( ++tmp1.begin(), (--tmp1.end()) - (++tmp1.begin()) ) 
```

但我不确定这是否被允许，或者这是否是一种合理的方式。如果这不是一种有效的方法，那么更好的方法是什么？...提前谢谢了。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-04-04T03:11:39.617

`std::string`的构造函数应该提供你需要的功能。

```
std::string(tmp1.begin() + 1, tmp1.end() - 1) 
```

# c# - Kinect 不显示彩色图像

> ID：10004397
> 
> 赞同：3
> 
> 时间：2012-04-04T03:04:42.330
> 
> 标签：c#, wpf, rgb, kinect

所以我添加了 coding4fun 和 microsoft 源，甚至完成了 kinect sdk 中的内容，用于在屏幕上显示 kinect 图像帧，但由于某种原因它不会显示，我在 sdk 上工作，虽然
**我写的代码**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using Microsoft.Research.Kinect.Nui;
using Coding4Fun.Kinect.Wpf;
using System.Net.Mail;
using System.IO;
using System.ComponentModel;

namespace WpfApplication1
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    Runtime nui;

    int PersonDetected = 0;
    int totalFrames = 0;
    int lastFrames = 0;
    DateTime lastTime = DateTime.MaxValue;

    Dictionary<JointID, Brush> jointColors = new Dictionary<JointID, Brush>() { 
        {JointID.HipCenter, new SolidColorBrush(Color.FromRgb(169, 176, 155))},
        {JointID.Spine, new SolidColorBrush(Color.FromRgb(169, 176, 155))},
        {JointID.ShoulderCenter, new SolidColorBrush(Color.FromRgb(168, 230, 29))},
        {JointID.Head, new SolidColorBrush(Color.FromRgb(200, 0,   0))},
        {JointID.ShoulderLeft, new SolidColorBrush(Color.FromRgb(79,  84,  33))},
        {JointID.ElbowLeft, new SolidColorBrush(Color.FromRgb(84,  33,  42))},
        {JointID.WristLeft, new SolidColorBrush(Color.FromRgb(255, 126, 0))},
        {JointID.HandLeft, new SolidColorBrush(Color.FromRgb(215,  86, 0))},
        {JointID.ShoulderRight, new SolidColorBrush(Color.FromRgb(33,  79,  84))},
        {JointID.ElbowRight, new SolidColorBrush(Color.FromRgb(33,  33,  84))},
        {JointID.WristRight, new SolidColorBrush(Color.FromRgb(77,  109, 243))},
        {JointID.HandRight, new SolidColorBrush(Color.FromRgb(37,   69, 243))},
        {JointID.HipLeft, new SolidColorBrush(Color.FromRgb(77,  109, 243))},
        {JointID.KneeLeft, new SolidColorBrush(Color.FromRgb(69,  33,  84))},
        {JointID.AnkleLeft, new SolidColorBrush(Color.FromRgb(229, 170, 122))},
        {JointID.FootLeft, new SolidColorBrush(Color.FromRgb(255, 126, 0))},
        {JointID.HipRight, new SolidColorBrush(Color.FromRgb(181, 165, 213))},
        {JointID.KneeRight, new SolidColorBrush(Color.FromRgb(71, 222,  76))},
        {JointID.AnkleRight, new SolidColorBrush(Color.FromRgb(245, 228, 156))},
        {JointID.FootRight, new SolidColorBrush(Color.FromRgb(77,  109, 243))}
    };

   private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        if (Runtime.Kinects.Count == 0)
        {
            MessageBox.Show("No Kinect Detected");
        }

        else
        {
            nui = Runtime.Kinects[0];

            nui.Initialize(RuntimeOptions.UseColor | RuntimeOptions.UseSkeletalTracking);

            lastTime = DateTime.Now;

            nui.VideoFrameReady += new EventHandler<ImageFrameReadyEventArgs>(nui_VideoFrameReady);
            nui.SkeletonFrameReady += new EventHandler<SkeletonFrameReadyEventArgs>(nui_SkeletonFrameReady);
            //nui.DepthFrameReady += new EventHandler<ImageFrameReadyEventArgs>(nui_DepthFrameReady);

            nui.VideoStream.Open(ImageStreamType.Video, 2, ImageResolution.Resolution640x480, ImageType.Color);
            //nui.DepthStream.Open(ImageStreamType.Depth, 2, ImageResolution.Resolution640x480, ImageType.DepthAndPlayerIndex);
        }
    }
    void nui_VideoFrameReady(object sender, ImageFrameReadyEventArgs e)
    {
        //KinectImage.Source = e.ImageFrame.ToBitmapSource();
        PlanarImage Image = e.ImageFrame.Image;
        ++totalFrames;

        {
            string bb1 = Convert.ToString(DateTime.Now);
            string filename = "C:\\Kinected\\Kinect1_Image " + bb1 + ".jpg";

            KinectImage.Source = BitmapSource.Create(
                Image.Width, Image.Height, 96, 96, PixelFormats.Bgr32, null, Image.Bits, Image.Width * Image.BytesPerPixel);

            BitmapSource image = BitmapSource.Create(
                Image.Width, Image.Height, 96, 96, PixelFormats.Bgr32, null, Image.Bits, Image.Width * Image.BytesPerPixel);

            if (PersonDetected == 1)
            {
                image.Save(filename, Coding4Fun.Kinect.Wpf.ImageFormat.Jpeg);
                SendNotificationEmail();
                PersonDetected = 0;
            }
        }
    } 
```

**骨架示例代码**

```
 using System;
 using System.Net.Mail;
 using System.Collections.Generic;
 using System.Linq;
 using System.Text;
 using System.Windows;
 using System.Windows.Controls;
 using System.Windows.Data;
 using System.Windows.Documents;
 using System.Windows.Input;
 using System.Windows.Media;
 using System.Windows.Media.Imaging;
 using System.Windows.Navigation;
 using System.Windows.Shapes;
 using Microsoft.Research.Kinect.Nui;
 using Coding4Fun.Kinect.WinForm;
 using Coding4Fun.Kinect.Wpf;
 using System.IO;
 using System.ComponentModel;

 namespace SkeletalViewer
{
 /// <summary>
 /// Interaction logic for MainWindow.xaml
 /// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    Runtime nui;
   // public int ElevationAngle { get; set; }
     //   public static readonly int ElevationMaximum;
       // public static readonly int ElevationMinimum;
        //public static readonly int ElevationMedian;
        //int ElevationMedian = ElevationAngle == 0;
    int totalFrames = 0;
    int totalFrames2 = 0;
    int lastFrames = 0;
    int PersonDetected = 0;
    DateTime lastTime = DateTime.MaxValue;

    // We want to control how depth data gets converted into false-color data
    // for more intuitive visualization, so we keep 32-bit color frame buffer versions of
    // these, to be updited whenever we receive and process a 16-bit frame.
    const int RED_IDX = 2;
    const int GREEN_IDX = 1;
    const int BLUE_IDX = 0;
    byte[] depthFrame32 = new byte[320 * 240 * 4];

    Dictionary<JointID,Brush> jointColors = new Dictionary<JointID,Brush>() { 
        {JointID.HipCenter, new SolidColorBrush(Color.FromRgb(169, 176, 155))},
        {JointID.Spine, new SolidColorBrush(Color.FromRgb(169, 176, 155))},
        {JointID.ShoulderCenter, new SolidColorBrush(Color.FromRgb(168, 230, 29))},
        {JointID.Head, new SolidColorBrush(Color.FromRgb(200, 0,   0))},
        {JointID.ShoulderLeft, new SolidColorBrush(Color.FromRgb(79,  84,  33))},
        {JointID.ElbowLeft, new SolidColorBrush(Color.FromRgb(84,  33,  42))},
        {JointID.WristLeft, new SolidColorBrush(Color.FromRgb(255, 126, 0))},
        {JointID.HandLeft, new SolidColorBrush(Color.FromRgb(215,  86, 0))},
        {JointID.ShoulderRight, new SolidColorBrush(Color.FromRgb(33,  79,  84))},
        {JointID.ElbowRight, new SolidColorBrush(Color.FromRgb(33,  33,  84))},
        {JointID.WristRight, new SolidColorBrush(Color.FromRgb(77,  109, 243))},
        {JointID.HandRight, new SolidColorBrush(Color.FromRgb(37,   69, 243))},
        {JointID.HipLeft, new SolidColorBrush(Color.FromRgb(77,  109, 243))},
        {JointID.KneeLeft, new SolidColorBrush(Color.FromRgb(69,  33,  84))},
        {JointID.AnkleLeft, new SolidColorBrush(Color.FromRgb(229, 170, 122))},
        {JointID.FootLeft, new SolidColorBrush(Color.FromRgb(255, 126, 0))},
        {JointID.HipRight, new SolidColorBrush(Color.FromRgb(181, 165, 213))},
        {JointID.KneeRight, new SolidColorBrush(Color.FromRgb(71, 222,  76))},
        {JointID.AnkleRight, new SolidColorBrush(Color.FromRgb(245, 228, 156))},
        {JointID.FootRight, new SolidColorBrush(Color.FromRgb(77,  109, 243))}
    };

    private void Window_Loaded(object sender, EventArgs e)
    {
        nui = new Runtime();

        try
        {
            nui.Initialize(RuntimeOptions.UseDepthAndPlayerIndex | RuntimeOptions.UseSkeletalTracking | RuntimeOptions.UseColor);
        }
        catch (InvalidOperationException)
        {
            System.Windows.MessageBox.Show("Runtime initialization failed. Please make sure Kinect device is plugged in.");
            return;
        }

        try
        {
            nui.VideoStream.Open(ImageStreamType.Video, 2, ImageResolution.Resolution640x480, ImageType.Color);
            nui.DepthStream.Open(ImageStreamType.Depth, 2, ImageResolution.Resolution320x240, ImageType.DepthAndPlayerIndex);
        }
        catch (InvalidOperationException)
        {
            System.Windows.MessageBox.Show("Failed to open stream. Please make sure to specify a supported image type and resolution.");
            return;
        }

        if (Runtime.Kinects.Count < 2)
        {

            lastTime = DateTime.Now;

            nui.DepthFrameReady += new EventHandler<ImageFrameReadyEventArgs>(nui_DepthFrameReady);
            nui.SkeletonFrameReady += new EventHandler<SkeletonFrameReadyEventArgs>(nui_SkeletonFrameReady);
            nui.VideoFrameReady += new EventHandler<ImageFrameReadyEventArgs>(nui_ColorFrameReady2);
        }

        if (Runtime.Kinects.Count == 2)
        {
            lastTime = DateTime.Now;

            nui.DepthFrameReady += new EventHandler<ImageFrameReadyEventArgs>(nui_DepthFrameReady);
            nui.SkeletonFrameReady += new EventHandler<SkeletonFrameReadyEventArgs>(nui_SkeletonFrameReady);
            nui.VideoFrameReady += new EventHandler<ImageFrameReadyEventArgs>(nui_ColorFrameReady2);
            nui.VideoFrameReady += new EventHandler<ImageFrameReadyEventArgs>(nui_ColorFrameReady3);
        }
    }

    // Converts a 16-bit grayscale depth frame which includes player indexes into a 32-bit frame
    // that displays different players in different colors
    byte[] convertDepthFrame(byte[] depthFrame16)
    {
        for (int i16 = 0, i32 = 0; i16 < depthFrame16.Length && i32 < depthFrame32.Length; i16 += 2, i32 += 4)
        {
           // 
           // System.Windows.MessageBox.Show(depthFrame16);
            int player = depthFrame16[i16] & 0x07;
            int realDepth = (depthFrame16[i16+1] << 5) | (depthFrame16[i16] >> 3);
            // transform 13-bit depth information into an 8-bit intensity appropriate
            // for display (we disregard information in most significant bit)
            byte intensity = (byte)(255 - (255 * realDepth / 0x0fff));

            depthFrame32[i32 + RED_IDX] = 0;
            depthFrame32[i32 + GREEN_IDX] = 0;
            depthFrame32[i32 + BLUE_IDX] = 0;

            // choose different display colors based on player
            switch (player)
            {
                case 0:
                    depthFrame32[i32 + RED_IDX] = (byte)(intensity / 2);
                    depthFrame32[i32 + GREEN_IDX] = (byte)(intensity / 2);
                    depthFrame32[i32 + BLUE_IDX] = (byte)(intensity / 2);
                    break;
                case 1:
                    depthFrame32[i32 + RED_IDX] = intensity;
                    break;
                case 2:
                    depthFrame32[i32 + GREEN_IDX] = intensity;
                    break;
                case 3:
                    depthFrame32[i32 + RED_IDX] = (byte)(intensity / 4);
                    depthFrame32[i32 + GREEN_IDX] = (byte)(intensity);
                    depthFrame32[i32 + BLUE_IDX] = (byte)(intensity);
                    break;
                case 4:
                    depthFrame32[i32 + RED_IDX] = (byte)(intensity);
                    depthFrame32[i32 + GREEN_IDX] = (byte)(intensity);
                    depthFrame32[i32 + BLUE_IDX] = (byte)(intensity / 4);
                    break;
                case 5:
                    depthFrame32[i32 + RED_IDX] = (byte)(intensity);
                    depthFrame32[i32 + GREEN_IDX] = (byte)(intensity / 4);
                    depthFrame32[i32 + BLUE_IDX] = (byte)(intensity);
                    break;
                case 6:
                    depthFrame32[i32 + RED_IDX] = (byte)(intensity / 2);
                    depthFrame32[i32 + GREEN_IDX] = (byte)(intensity / 2);
                    depthFrame32[i32 + BLUE_IDX] = (byte)(intensity);
                    break;
                case 7:
                    depthFrame32[i32 + RED_IDX] = (byte)(255 - intensity);
                    depthFrame32[i32 + GREEN_IDX] = (byte)(255 - intensity);
                    depthFrame32[i32 + BLUE_IDX] = (byte)(255 - intensity);
                    break;
            }
           // file_dist.Close();
        }

       // Console.WriteLine(depthFrame32);

        return depthFrame32;
    }

    void nui_ColorFrameReady(object sender, ImageFrameReadyEventArgs e)
    {
        // 32-bit per pixel, RGBA image
        PlanarImage Image = e.ImageFrame.Image;
        ++totalFrames;
        string bb1 = Convert.ToString(totalFrames);
        // string file_name_3 = "C:\\Research\\Kinect\\Proposal\\Depth_Img" + bb1 + ".jpg"; xxx
        string file_name_4 = "C:\\temp\\Video_Img" + bb1 + ".jpg";
        video.Source = BitmapSource.Create(
            Image.Width, Image.Height, 96, 96, PixelFormats.Bgr32, null, Image.Bits, Image.Width * Image.BytesPerPixel);

                BitmapSource image4 = BitmapSource.Create(
                    Image.Width, Image.Height, 96, 96, PixelFormats.Bgr32, null, Image.Bits, Image.Width * Image.BytesPerPixel);
          //      image4.Save(file_name_4, Coding4Fun.Kinect.Wpf.ImageFormat.Jpeg);

    }

    void nui_ColorFrameReady2(object sender, ImageFrameReadyEventArgs e)
    {
        // 32-bit per pixel, RGBA image  xxx
        PlanarImage Image = e.ImageFrame.Image;
        //int deltaFrames = totalFrames - lastFrameWithMotion;
        //if (totalFrames2 <= stopFrameNumber & deltaFrames > 300)
        {
           ++totalFrames2;
            string bb1 = Convert.ToString(totalFrames2);
            // string file_name_3 = "C:\\Research\\Kinect\\Proposal\\Depth_Img" + bb1 + ".jpg"; xxx
            string file_name_4 = "C:\\Kinected\\Kinect1_Img" + bb1 + ".jpg";
            video.Source = BitmapSource.Create(
                Image.Width, Image.Height, 96, 96, PixelFormats.Bgr32, null, Image.Bits, Image.Width * Image.BytesPerPixel);

            BitmapSource image4 = BitmapSource.Create(
                Image.Width, Image.Height, 96, 96, PixelFormats.Bgr32, null, Image.Bits, Image.Width * Image.BytesPerPixel);

            if (PersonDetected == 1)
            {
                if (totalFrames2 % 10 == 0)
                {
                    image4.Save(file_name_4, Coding4Fun.Kinect.Wpf.ImageFormat.Jpeg);
                    SendNotificationEmail();
                    PersonDetected = 0;
                    // lastFrameWithMotion = totalFrames;
                    // topFrameNumber += 100;
                }
            }
        }

    } 
```

关于为什么它没有在我的应用程序上显示图像的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:09:47.757

按照benjgorman 所说的去做，如果您使用的是xbox kinect，它仍然可以与新的sdk 一起使用。你可以在[这里](http://www.microsoft.com/en-us/kinectforwindows/)得到它。代码感觉与旧程序有点不同，但你会很快习惯它。您可以[从此处](http://channel9.msdn.com/Series/KinectQuickstart)获取我使用的教程，或使用我提供的代码，确保添加源`Microsoft.Kinect`并从 kinect explorer 添加项目（通过 sdk 下载）`Microsoft.Samples.Kinect.WpfViewers`，然后将其添加为源。我建议观看教程，因为它们解释了类以及您在 SDK
**代码中需要什么**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using Microsoft.Kinect;
using System.Net.Mail;
using Coding4Fun.Kinect.Wpf;
using Microsoft.Samples.Kinect.WpfViewers;
using System.Diagnostics;

namespace WpfApplication1
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }
 private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        kinectSensorChooser1.KinectSensorChanged += new DependencyPropertyChangedEventHandler(kinectSensorChooser1_KinectSensorChanged);
    }

    void kinectSensorChooser1_KinectSensorChanged(object sender, DependencyPropertyChangedEventArgs e)
    {
        KinectSensor oldSensor = (KinectSensor)e.OldValue;
        StopKinect(oldSensor);

        KinectSensor newSensor = (KinectSensor)e.NewValue;

        newSensor.ColorStream.Enable();
        newSensor.DepthStream.Enable();
        newSensor.SkeletonStream.Enable();
        newSensor.AllFramesReady += new EventHandler<AllFramesReadyEventArgs>(newSensor_AllFramesReady);
        try
        {
            newSensor.Start();
        }
        catch (System.IO.IOException)
        {
            kinectSensorChooser1.AppConflictOccurred();
        }
    }

    void StopKinect(KinectSensor sensor)
    {
        if (sensor != null)
        {
            sensor.Stop();
            sensor.AudioSource.Stop();
        }
    }

    private void Window_Closing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        StopKinect(kinectSensorChooser1.Kinect);
    }
    void newSensor_AllFramesReady(object sender, AllFramesReadyEventArgs e)
    {
        using (ColorImageFrame colorFrame = e.OpenColorImageFrame())
        {
            if (colorFrame == null)
            {
                return;
            }

            byte[] pixels = new byte[colorFrame.PixelDataLength];
            colorFrame.CopyPixelDataTo(pixels);

            int stride = colorFrame.Width * 4;
            video.Source = BitmapSource.Create(
                colorFrame.Width, colorFrame.Height, 96, 96, 
                PixelFormats.Bgr32, null, pixels, stride);
         }
       } 
```

希望这可以帮助。

# visual-c++ - 本机单元测试，调试器执行比预期更长的远程操作

> ID：10004399
> 
> 赞同：1
> 
> 时间：2012-04-04T03:05:03.893
> 
> 标签：visual-c++, visual-studio-debugging, visual-studio-2012

我已经使用 Visual Studio 2011 Beta 中的 Native Unit Test 项目编写了一个非常简单的单元测试。测试构建并失败（并非意外），我需要对其进行调试。当我尝试在调试器下启动测试时，调试器永远不会启动，而是显示这个无限期徘徊的对话框：

![在此处输入图像描述](../Images/2ac405b30a86fbbbba824b7dcf601a61.png)

有谁知道这可能是什么原因？我以前版本的 Visual Studio 从来没有遇到过这个问题。

更新：

我已经为此打开了一个 MSDN 线程：[http ://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/db3213f8-9658-4470-9e3f-3b67ec954fae](http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/db3213f8-9658-4470-9e3f-3b67ec954fae)

我还打开了一个连接错误（显然只是简单地忽略了）：[https ://connect.microsoft.com/VisualStudio/feedback/details/735369/debugger-wont-start-for-native-unit-test#details](https://connect.microsoft.com/VisualStudio/feedback/details/735369/debugger-wont-start-for-native-unit-test#details)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T01:55:07.283

我需要了解有关此问题的更多信息，但似乎 Windows 中的 DebugAttachProcess() 方法没有返回，如果您没有足够的权限这样做，可能会发生这种情况......确保你以管理员身份运行 VS，你也可以尝试在 ollydbg 中调试它，看看它是否是一个可执行问题，尽管它不会给你源代码（你被困在汇编中）。

# javascript - 如何检测文本区域输入中的 Javascript 中按下的键？

> ID：10004404
> 
> 赞同：1
> 
> 时间：2012-04-04T03:06:04.443
> 
> 标签：javascript, dom-events, textarea, text-editor

我正在尝试创建一个简单的 Javascript 文本编辑器，它只对 textarea 输入中输入的段落进行分段。在将 textarea 输入值保存在数据库中时，它们会去掉分节符，我也不想使用所有其他现有的文本编辑器，因为我只需要在`enter`击键时放置分节符（br 标签）并且应该像那样保存与数据库内的标签。我无法通过谷歌搜索找到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T03:17:22.243

```
<textarea id="txtArea" onkeypress="onKeyDown();"></textarea>

<script>
    function onKeyDown() {
    var key = window.event.keyCode;

    // If the user has pressed enter
    if (key == 13) {
       alert('enter');
    return false;
    }
    else {
    return true;
    }
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T03:43:44.823

根据您的需要，您可以考虑`<br>`在服务器端使用标签替换换行符，而不是尝试在 textarea 本身中插入标签。例如，PHP 有[nl2br](http://php.net/manual/en/function.nl2br.php)函数。

# javascript - 不要保留以前回发的隐藏字段值

> ID：10004405
> 
> 赞同：0
> 
> 时间：2012-04-04T03:06:12.807
> 
> 标签：javascript

我正在一个用户可以更新他/她的个人资料的页面上工作。从这个页面，用户可以上传个人资料图片。我将对此个人资料图片的引用存储在动态创建的页面上的隐藏字段中。该字段仅可用于单个更新，并且仅对回发时的服务器端逻辑有意义；之后不再有效。我目前遇到的问题是，如果用户更新个人资料然后点击浏览器中的后退按钮，则这些与照片相关的隐藏字段的值在不应该保留时被保留：它最终只会破坏我的服务器-侧面逻辑。我可以通过 javascript 在页面加载时清除这些隐藏字段，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T03:10:14.540

清除回发时的隐藏字段，例如..

在页面加载时设置隐藏字段的值，如果页面有回发请求，则将隐藏字段的值设置为 0

# html - 发送简单的 HTML 电子邮件

> ID：10004406
> 
> 赞同：0
> 
> 时间：2012-04-04T03:06:55.337
> 
> 标签：html, email

我有一个简单的联系我们表格，我需要在提交时发送电子邮件。我在本地机器上尝试使用“mailto”但它不起作用。是否有任何其他简单的机制可以在 HTML 中发送电子邮件。以下是我的代码现在正在使用

```
<html>
<body>

<h3>Send e-mail to someone@example.com:</h3>

<form action="MAILTO:yourmail@mail.com" method="post" enctype="text/plain">
Name:<br />
<input type="text" name="name" value="your name" /><br />
E-mail:<br />
<input type="text" name="mail" value="your email" /><br />
Comment:<br />
<input type="text" name="comment" value="your comment" size="50" />
<br /><br />
<input type="submit" value="Send">
<input type="reset" value="Reset">

</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T03:09:48.760

HTML 本身不能发送电子邮件。你需要一种脚本语言来做到这一点。

`mailto:`进入`<a>`标签的`href`属性，如下所示：

```
<a href="mailto:yourmail@mail.com">yourmail@mail.com</a> 
```

但是，这将只是打开用户机器上的默认电子邮件客户端，如果有可用的并且实际上不会自行发送任何内容。

# macos - MonoMac 创建 Mac 安装程序导致合并 Mono 失败。致命的未处理异常

> ID：10004407
> 
> 赞同：3
> 
> 时间：2012-04-04T03:06:57.560
> 
> 标签：macos, mono, monodevelop, bundle, monomac

我正在使用 MonoDevelop 2.8.8.4 和 MonoFramework (MDK) 2.10.9_8。我也在使用 Mac OSX Lion 10.7.3 并为 Lion SDK 安装了 XCode 4.3.1。使用 MonoDevelop 进行调试时，我的 MonoMac 应用程序运行良好。然后我尝试通过转到项目-> 创建 Mac 安装程序来创建应用程序包...

选中“在应用程序包中包含 Mono”

链接器：设置为“不链接程序集”

其他所有内容都未选中并显示为灰色。

当我点击“创建包”然后“保存”时，MonoDevelop 开始创建包，但随后失败：

```
Unhandled Exception: System.ComponentModel.Win32Exception: ApplicationName='gcc', CommandLine='-mmacosx-version-min=10.5 -m32 /tmp/monomac-build-634690657739224650/AboutToBlowUpDemo.app/Contents/MacOS/driver.m -o /tmp/monomac-build-634690657739224650/AboutToBlowUpDemo.app/Contents/MacOS/AboutToBlowUpDemo -D_THREAD_SAFE -I/Library/Frameworks/Mono.framework/Versions/2.10.9/include/mono-2.0   /Library/Frameworks/Mono.framework/Versions/2.10.9/lib/libmono-2.0.a -framework AppKit -liconv', CurrentDirectory=''  
  at System.Diagnostics.Process.Start_noshell (System.Diagnostics.ProcessStartInfo startInfo, System.Diagnostics.Process process) [0x00000] in <filename unknown>:0   
  at System.Diagnostics.Process.Start_common (System.Diagnostics.ProcessStartInfo startInfo, System.Diagnostics.Process process) [0x00000] in <filename unknown>:0   
  at System.Diagnostics.Process.Start (System.Diagnostics.ProcessStartInfo startInfo) [0x00000] in <filename unknown>:0   
  at MonoMac.Bundler.Driver.RunCommand (System.String path, System.String args, System.String[] env, System.String& output) [0x00000] in <filename unknown>:0   
  at MonoMac.Bundler.Driver.Compile () [0x00000] in <filename unknown>:0   
  at MonoMac.Bundler.Driver.Main (System.String[] args) [0x00000] in <filename unknown>:0   

[ERROR] FATAL UNHANDLED EXCEPTION: System.ComponentModel.Win32Exception: ApplicationName='gcc', CommandLine='-mmacosx-version-min=10.5 -m32 /tmp/monomac-build-634690657739224650/AboutToBlowUpDemo.app/Contents/MacOS/driver.m -o /tmp/monomac-build-634690657739224650/AboutToBlowUpDemo.app/Contents/MacOS/AboutToBlowUpDemo -D_THREAD_SAFE -I/Library/Frameworks/Mono.framework/Versions/2.10.9/include/mono-2.0   /Library/Frameworks/Mono.framework/Versions/2.10.9/lib/libmono-2.0.a -framework AppKit -liconv', CurrentDirectory=''  
  at System.Diagnostics.Process.Start_noshell (System.Diagnostics.ProcessStartInfo startInfo, System.Diagnostics.Process process) [0x00000] in <filename unknown>:0   
  at System.Diagnostics.Process.Start_common (System.Diagnostics.ProcessStartInfo startInfo, System.Diagnostics.Process process) [0x00000] in <filename unknown>:0   
  at System.Diagnostics.Process.Start (System.Diagnostics.ProcessStartInfo startInfo) [0x00000] in <filename unknown>:0   
  at MonoMac.Bundler.Driver.RunCommand (System.String path, System.String args, System.String[] env, System.String& output) [0x00000] in <filename unknown>:0   
  at MonoMac.Bundler.Driver.Compile () [0x00000] in <filename unknown>:0   
  at MonoMac.Bundler.Driver.Main (System.String[] args) [0x00000] in <filename unknown>:0 
```

mmp 以代码 1 退出

合并 Mono 失败

我还在“创建 Mac 安装程序...”窗口中尝试了所有其他组合，但我总是遇到同样的错误。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T11:27:11.027

您需要安装 gcc。您可以通过在 Xcode 中安装命令行工具来执行此操作，如此[处](https://stackoverflow.com/questions/9329243/xcode-4-4-command-line-tools/9329325#9329325)所述。

# css - 如何创建具有 4 个矩形分割的网页？

> ID：10004410
> 
> 赞同：2
> 
> 时间：2012-04-04T03:07:43.780
> 
> 标签：css, html

**如何使用CSS**和**div**创建网页以创建 4 个分屏？

**![强文本](../Images/b10026764cccbfca1b3754b7836d1054.png)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T03:23:36.077

HTML 看起来像这样：

```
<div class="box">
    Area 1
</div>

<div class="box">
    Area 2
</div>

<div class="box">
    Area 3
</div>

<div class="box">
    Area 4
</div> 
```

CSS 看起来像这样：

```
html, body {
    width: 100%;
    height: 100%;
}

.box {
    float: left;
    width: 50%;
    height: 50%;
} 
```

这是一个可以玩的小提琴：http: [//jsfiddle.net/UMKWU/](http://jsfiddle.net/UMKWU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T03:10:20.523

```
<div class="one" style="float: left; width: 50%; height: 50%;">

</div>

<div class="two" style="float: left; width: 50%; height: 50%;">

</div>

<div class="three" style="float: left; width: 50%; height: 50%;">

</div>

<div class="four" style="float: left; width: 50%; height: 50%;">

</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T03:54:57.787

我不允许对问题发表评论，否则我只会对 Jordan 的第一个答案添加评论。他的回答是正确的，但是当您添加边框时，您需要考虑边框宽度，在这种情况下，只需添加到您的 css:`border-width:1%;`并更改`width:49%; height: 49%;`.

这应该可以解决问题，这里是 Fiddle 的链接：http: [//jsfiddle.net/UMKWU/3/](http://jsfiddle.net/UMKWU/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T05:32:34.753

嗨，你可以这样做

**CSS**

```
html, body {
    width: 100%;
    height: 100%;
}

.box1, .box2, .box3, .box4 {
    float: left;
    width:49%;
    height: 49%;
    border-style: solid;
    border-width:1%;
}

.box3{
    clear:left;
}
​ 
```

**HTML**

```
<div class="box1">
Area 1
</div>

<div class="box2">
    Area 2
</div>

<div class="box3">
Area 3
</div>

<div class="box4">
Area 4
</div>​ 
```

现场演示[http://jsfiddle.net/rohitazad/UMKWU/8/](http://jsfiddle.net/rohitazad/UMKWU/8/)

# iphone - 替代/类似于 UIView 中的标记

> ID：10004411
> 
> 赞同：0
> 
> 时间：2012-04-04T03:08:42.393
> 
> 标签：iphone, objective-c, uiview, tags

是否有任何替代方法可以使用`tag`UIView 的属性？问题是我想通过`UITextField`一些`NSInteger`。做法是`tag`。但我想通过 2 个不同的`NSInteger`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T03:12:12.323

您可以继承 UITextField 并将两个 NSInteger 属性添加到该类。

```
@interface CustomTextField : UITextField

@property (nonatomic, assign) NSInteger x;
@property (nonatomic, assign) NSInteger y;

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T03:20:19.510

您可以使用[关联引用](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html)将任何数据附加到任何对象。这是一个非常方便的方法。它甚至可以正确处理内存管理。我有时会使用一个类别来包装这些，这样我就可以在现有类上创建新属性。例如，在一个项目中，我希望每个视图控制器都知道一个特殊的标签（比如他们都知道的`navigationController`）。我这样做：

```
@interface UIViewController (MYSpecialViewController)
@property (nonatomic, readwrite, strong) UILabel *specialLabel;
@end

@implementation UIViewController (MYSpecialViewController)
static const char kMySpecialLabelKey;

- (UILabel *)specialLabel
{
  return objc_getAssociatedObject(self, &kMySpecialLabelKey);
}

- (void)setSpecialabel:(UILabel *)value
{
  objc_setAssociatedObject(self, &kMySpecialLabelKey, value, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}
@end 
```

[您可以在第 3 章](https://github.com/rnapier/ios5ptl/blob/master/ch03/AssocRef/AssocRef/ViewController.m)`UIAlertView`的 iOS5:PTL 示例代码中找到一个使用 a 的简单工作示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T04:17:14.850

采用通用的面向对象的解决方案，但请记住，您可以将大量数据填充到标签中：

```
- (uint32_t)pack:(uint16_t)a with:(uint16_t)b {

  return (uint32_t)(a << 16 | b);
}

- (uint16_t)getA:(uint32_t)pair {
    return (uint16_t)((pair & 0xffff0000) >> 16);
}

- (uint16_t)getB:(uint32_t)pair {
    return (uint16_t)(pair & 0xffff);
}

// use it

- (void)setupSomeView {

    someView.tag = [self pack:1024 with:2048];
}

- (IBAction)someControlEventHappened:(id)sender {

    NSLog(@"%d %d", [self getA:sender.tag], [self getB:sender.tag]);
} 
```

注意事项：

1.  @RobNapier 的回答更笼统、更正确。这种方式的唯一优点是它又快又脏
2.  适用于小于 32k 的无符号整数对
3.  作品 NSInteger 实现> = 32位，我认为这是无处不在的。

# google-app-engine - 查询数据存储中存在的一组属性值

> ID：10004413
> 
> 赞同：0
> 
> 时间：2012-04-04T03:09:02.880
> 
> 标签：google-app-engine, properties, google-cloud-datastore, set

我有一个属性列，它可以在任何时间点包含以下值的子集：`{ a | b | c | d | e }`. 我的意思是有时它可以是任何一个`{ a | d | e }`，或者有时它甚至可以是`{ x | y | z }`。如何查询数据存储，以便我可以找出那个时间点存在的子集，而无需深入研究每个实体？

目前我正在这样做：

```
people = Person.all().fetch(100)
city = set()
for p in people:
    city.add(p.address) 
```

我想获取此时存在的一组属性值（即没有重复项）。例如，在某个时间点，所有 5,000,000`people`人都有一个`address`of `{ Manila | Cebu | Davao }`，那么我想要`set(Manila, Cebu, Davao)`.

在另一个时间点，所有 5,000,000`people`都会有一个`address`of `{ Iloilo | Laoag }`，那么我想要`set(Iloilo, Laoag)`.

在进行任何查询之前，我不知道`set`应该由什么组成。

我目前的方法要求我挖掘所有实体。效率太低了，有什么更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:04:48.157

在 AppEngine 中，在写入期间生成和存储您可能需要的内容几乎总是更好。

因此，在您的用例中，每次添加或编辑人员实体时，您都会将他们所在的城市添加到列出所有城市的另一个模型中，然后也存储该城市实体。

```
class Cities(db.Model):
    list_of_cities = db.TextProperty(default="[]") #we'll use a stringified json list of cities

#when creating a new person / or when editing
person = Person(city = city)
cities = Cities.all().get() #there's only one model that we'll use.
list_of_cities = simplejson.loads(cities.list_of_cities)
if city not in list_of_cities:
    list_of_cities.append(city) #add to the list of cities
    cities.list_of_cities = simplejson.dumps(list_of_cities)
    db.put(cities)

person.put() 
```

您可能希望在您的城市实体上使用 memcache 来加快速度。如果您还希望以超过 1 次写入/秒的速度增加一个以上的人，那么您可能还需要考虑对城市列表进行分片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T06:03:56.893

Albert 建议的方法的替代方法是使用 mapreduce 定期计算这些值。[App Engine Mapreduce](https://developers.google.com/appengine/docs/python/dataprocessing/)库使这变得相当简单。您的映射器将输出每条记录的城市（例如），而化简器将输出每条记录的值和出现的次数。

# php - 在访问同一目录中的文件的子目录中包含文件

> ID：10004415
> 
> 赞同：1
> 
> 时间：2012-04-04T03:09:26.967
> 
> 标签：php, html, include

我有一个 PHP 脚本 (index.php)，它在子目录 (site1.com) 中包含一个 index.html 文件。此 index.html 文件显示位于同一目录 (site1.com) 中的图像。

现在，index.php 文件包含 index.html 文件。显示了 index.html 中的 html，但没有显示图像。index.html 文件在根目录中查找要显示的图像。这就是问题。我想以某种方式包含 site1.com 目录的所有内容 (??)，而不仅仅是单个“index.html”文件。

我尝试更改工作目录，但没有成功。也许我只是没有正确使用它......

由于我不想解释的原因，我不想在 PHP 或 Apache 中编辑任何配置设置。我也不想修改 index.html 的代码。基本上，我需要找到一个可以 100% 用 PHP 实现的解决方案。url 需要看起来好像用户仍在根目录 (mysite.com) 中，而实际上显示的是子目录 (site1.com) 中的内容。在某种程度上，这有点像透明代理。

```
 [FILE] index.php
 [DIR]  site1.com
   [FILE]  index.html
   [FILE]  img1.png
   [FILE]  img2.png
 [DIR]  site2.com
   [FILE]  index.html
   [FILE]  img1.png
   [FILE]  img2.png 
```

我做了很多搜索，但没有找到可行的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:45:06.657

当您包含（）/需要（）一个文件时，就好像该文件的内容被逐字剪切/粘贴到执行包含的脚本中。如果 index.html 使用 site1.com 目录中的图像，则必须使用基于 index.php 位置的路径来引用这些图像。

远程用户无法判断您已包含来自站点子目录的文件 - 他们只会看到一些从您的服务器返回的 html，因此如果您的 index.html 有类似

```
<img src="img1.png" /> 
```

在其中，但该 html 正在从 index.php 脚本中显示，那么浏览器将正在寻找

```
http://example.com/img1.png 
```

不是

```
http://example.com/site1.com/img1.png 
```

输出正确的路径取决于您。

# jquery - 将 span 换行到 div 中的文本

> ID：10004418
> 
> 赞同：1
> 
> 时间：2012-04-04T03:09:48.230
> 
> 标签：jquery, css, border

我正在尝试为包含在 div 中的标题添加底部边框，但它会影响整个块。

```
<div class="title">I'm a title</div> 
```

和我的 CSS

```
.title {border-bottom: 2px solid #000; padding-bottom: 3px;} 
```

将此边框应用于文本的最佳方法是什么？

在文本周围环绕一个跨度将是理想的。但我无法访问 HTML。

```
<div class="title">
<span class="border">I'm a title</span>
</div> 
```

我将如何使用 Jquery 用跨度包装文本。

我正在努力

```
$(".title").wrap('<span></span>'); 
```

还是有另一种方法来添加这个 CSS？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T03:13:37.013

```
.title {border-bottom: 2px solid #000; padding-bottom: 3px; display: inline;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T03:14:14.033

根据您想要获得的花哨，您可以通过设置`text-decoration:underline`（[MDN](https://developer.mozilla.org/en/CSS/text-decoration)）获得您想要的效果

这本身不是真正的边框，但如果您无法修改 html，这可能是您唯一的选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T03:38:38.690

“......我将如何使用 Jquery 用跨度包装文本。”

这应该回答你的问题：

```
<html>
<head runat="server">
    <title></title>

    <style>
        .border {border-bottom: 2px solid #000; padding-bottom: 3px;}
    </style>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('.title').each(function(index) { 
                $(this).html("<span class='border'>" + $(this).html() + "</span>");
            });
        });
    </script>

</head>
<body runat="server">
    <div class="title" style="text-align: center">I'm a title</div>
</body>
</html> 
```

# c# - 根据上一次单击更改按钮内容和文本

> ID：10004422
> 
> 赞同：11
> 
> 时间：2012-04-04T03:10:29.237
> 
> 标签：c#, .net, wpf, windows

我想根据之前的内容单击来更改按钮内容。例如，如果是`Add`，则应更改为`Save`，如果是`Save`，则应更改回`Add`。

我知道如何更改按钮的内容。但是如何*阅读*内容来做出改变呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-04T03:35:54.100

如果您使用的是 MVVM，请将内容绑定到一个值并将命令绑​​定到函数。

```
<Button Content="{Binding ButtonText}" Command="{Binding ButtonClickCommand}"/> 
```

当然，您可以在 ViewModel 中将 String ButtonText 和 ButtonClickCommand 作为属性。

```
private string _ButtonText;
public string ButtonText
{
    get { return _ButtonText ?? (_ButtonText = "Add"); }
    set
    { 
        _ButtonText = value;
        NotifyPropertyChanged("ButtonText"); 
    }
}

private ICommand _ButtonClickCommand;
public ICommand ButtonClickCommand
{
    get { return _ButtonClickCommand ?? (_ButtonClickCommand = _AddCommand); }
    set
    {
        _ButtonClickCommand = value;
        NotifyPropertyChanged("ButtonClickCommand");
    }
} 

private ICommand _AddCommand = new RelayCommand(f => Add());
private ICommand _SaveCommand = new RelayCommand(f => Save());

private void Add()
{
    // Add your stuff here

    // Now switch the button   
    ButtonText = "Save";
    ButtonClickCommand = SaveCommand;
}

private void Save()
{
    // Save your stuff here

    // Now switch the button   
    ButtonText = "Add";
    ButtonClickCommand = AddCommand;
} 
```

然后，您可以让 ButtonClickCommand 更改属性，并且绑定会处理所有事情。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-04T03:14:49.337

将上次单击的值存储在该按钮的标记属性中，并在单击时检查其值。

标签 描述

> 获取或设置可用于存储有关此元素的自定义信息的任意对象值。

[MSDN 链接](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.tag.aspx)

或者

```
void MyButton_OnClick(object sender, RoutedEventArgs e)
{
    if(mybutton.Content.ToString() == "Add")
    {
        \\ Lines for add
        mybutton.Content = "Save";
    }
    else
    {
        \\ Lines for Save
        mybutton.Content = "Add";    
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-06-09T07:27:08.073

我同意 Surfens 的回答，即这里的问题不是一个完美的示例，`ToggleButton`因为“保存”和“添加”是一个非常不同的操作，每个操作都应该在各自的按钮上设置自己的“ICommand”。

但这里有一些样式会根据`IsChecked`ToggleButton 的值改变内容。

如果未选中按钮，内容将为**“ValueForUnToggledState” ，选中时变为****“ValueForToggledState”**。

```
<ToggleButton>
    <ToggleButton.Style>
        <Style TargetType="{x:Type ToggleButton}">
            <Setter Property="Content" Value="ValueForUnToggledState" />
            <Style.Triggers>
                <Trigger Property="IsChecked" Value="True">
                    <Setter Property="Content" Value="ValueForToggledState" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </ToggleButton.Style>
</ToggleButton> 
```

这比其他一些答案更像 WPF。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-04T03:14:33.953

另一种设计可能是如果创建了 2 个按钮，例如`AddButton`和`SaveButton`，那么可以分别显示或隐藏它们（使用`Visibility`属性）。

为什么？

因为这是一个*关注点分离的问题*。例如，在单击处理程序中，您不需要检查您所处的模式，因为您将拥有单独的处理程序。您还希望按钮具有不同的图标、不同的工具提示等。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-08-07T15:08:15.677

您还可以使用带有 EventTriggers 的 ToggleButton 来执行 Checked 和 Unchecked 状态的不同方法。

```
<ToggleButton x:Name="ToggleButton" Content="Add"
              Style="{StaticResource ToggleStyle}"
              IsThreeState="False">
     <i:Interaction.Triggers>
      <i:EventTrigger EventName="Checked">
      <ei:CallMethodAction MethodName="Save" TargetObject="{Binding}" />
     </i:EventTrigger>
     <i:EventTrigger EventName="Unchecked">
       <ei:CallMethodAction MethodName="Add" TargetObject="{Binding}" />
     </i:EventTrigger>
 </i:Interaction.Triggers>
 </ToggleButton> 
```

您还可以使用样式来修改 ToggleButton 模板并更改选中状态的文本。为此，请获取 ToggleButton 样式的副本，并在 Checked VisualState 中将其添加到情节提要：

```
<ObjectAnimationUsingKeyFrames Storyboard.TargetName="contentPresenter" Storyboard.TargetProperty="(UIElement.Content)">
 <DiscreteObjectKeyFrame KeyTime="0">
    <DiscreteObjectKeyFrame.Value>
         Save
    </DiscreteObjectKeyFrame.Value>
   </DiscreteObjectKeyFrame>
 </ObjectAnimationUsingKeyFrames> 
```

如果您不想走那条路线，那么您可以将其添加到您的检查触发器中：

```
<ei:ChangePropertyAction PropertyName="ButtonText" Value="Save"/> 
```

要使用这些方法，您需要引用 C:\Program Files (x86)\Microsoft SDKs\Expression\Blend.NETFramework\v4.5\Libraries 中的 Microsoft.Expression.Interactions 和 System.Windows.Interactivity 二进制文件。

# jquery - fancybox+youtube 空白页

> ID：10004435
> 
> 赞同：0
> 
> 时间：2012-04-04T03:12:17.217
> 
> 标签：jquery, youtube, fancybox

我知道有很多关于这个的问题，但在过去的 3 天里我一直在努力解决这个问题，并没有设法解决我的问题。我在图片库中有 Fancybox 2.0，它运行良好。在另一个页面中有一个视频库，即使窗口完美弹出，它也不会显示视频，而是显示一个空白页面。

这是jquery的代码：

```
<link rel="stylesheet" type="text/css" media="screen" href="jquery.fancybox.css" />

<script type="text/javascript" language="javascript" src="jquery.js"></script>
<script type="text/javascript" language="javascript" src="jquery.fancybox.js"></script>

<script type="text/javascript">
$(document).ready(function() {
    $(".various").fancybox({
    maxWidth    : 800,
    maxHeight   : 600,
    fitToView   : false,
    width       : '70%',
    height      : '70%',
    autoSize    : false,
    closeClick  : false,
    openEffect  : 'none',
    closeEffect : 'none'
    });
});

</script>

<script type="text/javascript" language="javascript">

$(document).ready(function(){
$('.fancybox').fancybox();
});
</script> 
```

这就是我所说的：

```
<a class="various fancybox.iframe" href="<src="http://www.youtube.com/embed/WQNQU_EQy6I?    rel=0" title="I'm floating"><img src="photos/floatings.png"></a> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T03:33:28.470

首先，您在链接上的 href 有

```
<src=" 
```

如在

```
href="<src="http://www.youtube.com/embed/WQNQU_EQy6I?    rel=0" 
```

然后让它工作，删除

```
$('.fancybox').fancybox(); 
```

*最后，大声笑，请提供一个示例视频，例如“湖上的鸭子”，那个视频有点吓人:)*

# python - 维基百科页面的子类别

> ID：10004437
> 
> 赞同：0
> 
> 时间：2012-04-04T03:12:22.617
> 
> 标签：python, mediawiki, wikipedia

有没有办法我们可以获得某个类别的所有子类别？我的意思是说如果我只想存储类别计算机科学及其所有子类别的页面。我希望我足够清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T03:40:51.297

MediaWiki 中的子类别只是属于另一个类别的成员的类别——它们在这方面与文章没有什么不同，因此您可以通过搜索也是类别的类别成员来查找它们。例如，这是一个 API 查询，它查找[Category:Dogs](https://en.wikipedia.org/wiki/Category%3aDogs)的子类别。（命名空间 14 是类别命名空间。）

[https://en.wikipedia.org/w/api.php?action=query&list=categorymembers&cmnamespace=14&cmlimit=100&cmtitle=Category:Dogs](https://en.wikipedia.org/w/api.php?action=query&list=categorymembers&cmnamespace=14&cmlimit=100&cmtitle=Category:Dogs)

请注意，这意味着不能保证类别会形成层次树！事实上，它们通常不会——许多类别是多个其他类别的成员，并且围绕抽象主题经常存在循环。例如：

*   [类别：认知](https://en.wikipedia.org/wiki/Category%3aCognition)是[类别：认知科学的成员](https://en.wikipedia.org/wiki/Category%3aCognitive_science)
*   [类别：认知科学](https://en.wikipedia.org/wiki/Category%3aCognitive_science)是[类别：语言学的成员](https://en.wikipedia.org/wiki/Category%3aLinguistics)
*   [类别：语言学](https://en.wikipedia.org/wiki/Category%3aLinguistics)是类别：语言的[成员](https://en.wikipedia.org/wiki/Category%3aLanguage)
*   [Category:Language](https://en.wikipedia.org/wiki/Category%3aLanguage)是[Category:Cognition](https://en.wikipedia.org/wiki/Category%3aCognition)的成员...我们从这里开始。

# c++ - 在 C++ 中连接两个 FASTA 文件

> ID：10004438
> 
> 赞同：0
> 
> 时间：2012-04-04T03:12:22.550
> 
> 标签：c++, string

我有两个 FASTA 文件：

文件1.fasta

```
>foo
ATCGGGG
>bar
CCCCCC 
```

文件2.fasta

```
>qux
ATCGGAAA 
```

我现在要做的是将它们连接到一个文件中，结果如下：

```
>foo
ATCGGGG
>bar
CCCCCC
>qux
ATCGGAAA 
```

因此保留以“>”开头的每个序列的名称。目前我下面的代码将该名称替换为索引，即：

```
>0
ATCGGGG
>1
CCCCCC
>0
ATCGGAAA 
```

在下面修改我的代码的正确方法是什么？

```
#include <iostream>
#include <vector>
#include <fstream>
#include <sstream>
#include<stdio.h>
#include<string>
using namespace std;
#define MAX_LINE_SIZE 1024

int mk_joint_file(char *ctrlFile, char *tgtFile, char *outFile){

  char s[MAX_LINE_SIZE];

  FILE *ofp = fopen(outFile,"w");
  FILE *cfp = fopen(ctrlFile,"r");
  FILE *tfp = fopen(tgtFile,"r");

  //  char *p;
  int flg=false;
  int line=0;
  while(fgets(s,MAX_LINE_SIZE,cfp) != NULL){
      if(s[0]=='>'){
          flg=true;
          fprintf(ofp,">%d\n",line);
          line++;
      }else{
          if(flg==true){
              fprintf(ofp,"%s",s);
          }
          flg=false;
      }
  }

  flg=false;
  line=0;
  while(fgets(s,MAX_LINE_SIZE,tfp) != NULL){
      if(s[0]=='>'){
          flg=true;
          fprintf(ofp,">%d\n",line);
          line++;
      }else{
          if(flg==true)
              fprintf(ofp,"%s",s);
          flg=false;
      }
  }

  fclose(cfp);
  fclose(tfp);
  fclose(ofp);

  return(0);
}

int main(int argc, char **argv)
{
    string ifname_control = argv[1];
    string ifname_target = argv[2];
    string ofname = "newjoin.txt";
    mk_joint_file((char *)ifname_control.c_str(), (char *)ifname_target.c_str(), (char *)ofname.c_str());

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:19:42.840

是否比仅仅更改这些行更难

```
fprintf(ofp,">%d\n",line); 
```

到

```
// TODO check fgets() handling of EOL - may not need the \n
fprintf(ofp, %s\n", s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T03:35:09.927

只需将第 29 和 40 行更改为 `fprintf(ofp,"%s",s);`

# python - Numpy 和 Python

> ID：10004439
> 
> 赞同：3
> 
> 时间：2012-04-04T03:12:25.803
> 
> 标签：python, numpy

我用一些排序方法创建了一个 python .py。我正在使用 numpy 以便我可以使用真正的数组。我的问题是，当我将此文件提交给我的老师时，是否有一个 dll 或我可以包含的东西，以便他能够运行该程序，还是他必须自己安装 numpy？.py 文件是我应该提交的唯一文件吗？提前感谢您的任何提示。

```
 import numpy as np 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T03:33:49.523

他们需要从[http://sourceforge.net/projects/numpy/files/](http://sourceforge.net/projects/numpy/files/)安装 numpy - 只需在评论中将其列为要求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:51:36.450

如果你使用 *nix(linux 或 unix) 系统，你可以使用这个命令让你的老师安装 numpy 模块：`apt-get install python-numpy`

# node.js - 错误：尝试连接到 Heroku 上托管的启用 mqtt 的节点服务器时出现连接被拒绝的问题

> ID：10004441
> 
> 赞同：1
> 
> 时间：2012-04-04T03:12:36.373
> 
> 标签：node.js, heroku, mqtt

所以我基本上想在 Heroku 上托管一个支持 mqtt pub/sub 的节点服务器。这些是我参考的 2 个指南： [https](https://github.com/adamvr/MQTT.js) ://github.com/adamvr/MQTT.js和[https://gist.github.com/1826931](https://gist.github.com/1826931)

在 localhost 上测试时，mqtt pub/sub 运行良好，在 heroku 上部署很好，但是当我尝试在 Heroku 上进行测试时，它不起作用

我尝试了 2 个命令来订阅，都显示了相同的错误。

命令 1：

```
mosquitto_sub -p <port> -h <host> -t <topic> 
```

错误一：

```
Error: Connection refused
Unable to connect (13). 
```

命令 2：

```
mqtt_sub <port> <host> <topic> 
```

错误2：

```
node.js:201
    throw e; // process.nextTick error, or 'error' event on first tick
          ^
Error: connect ECONNREFUSED
    at errnoException (net.js:670:11)
    at Object.afterConnect [as oncomplete] (net.js:661:19) 
```

我的 main.js（服务器）代码与此类似 - [https://gist.github.com/1826931](https://gist.github.com/1826931)。该错误似乎更像是节点问题而不是 mqtt pub/sub 问题，而且我是节点新手，所以不太确定如何调试它。我输入了一些 console.log 行，但正如预期的那样，它没有打印，因为它没有连接。Heroku 上有一个测功机运行`node main.js`良好。

```
Process  State       Command       
-------  ----------  ------------  
web.1    up for 35m  node main.js 
```

感谢有关此问题的任何建议。

# haskell - 如何使用 Haskell 动态调用函数

> ID：10004442
> 
> 赞同：8
> 
> 时间：2012-04-04T03:12:38.080
> 
> 标签：haskell

我希望根据关联列表中的内容动态调用函数。

这是半伪代码中的示例。*listOfFunctions*将被传递给*callFunctions*。

```
listOfFunctions = [('function one', 'value one')
                   , ('function two', 'value two')
                   , ('function three', 'value three')]

callFunctions x = loop through functions
                  if entry found 
                  then call function with value
                  else do nothing 
```

问题的关键不是循环遍历列表，而是一旦我有了它的名字，如何调用一个函数？

考虑这个用例以进一步澄清。您打开命令提示符并显示以下菜单。

> 1：写入新的 vHost 文件
> 
> 2：退出

您编写了新的 vHost 文件并且没有显示新菜单

> 1：输入新指令
> 
> 2：写文件
> 
> 3：退出

您为 vHost 输入了一些新指令，现在可以编写文件了。

该程序不会盲目地编写它可以编写的每一个指令，而是只会编写您提供的指令。这就是关联列表的用武之地。写一个巨大的 if/then/else 或 case 语句是疯狂的。循环遍历列表，查找添加了哪些指令并调用函数以相应地编写它们会更加优雅。

因此，循环，找到一个函数名，用提供的值调用所述函数。

感谢任何可以提供帮助的人。

**编辑：**

这是我提出的解决方案（总是欢迎建设性的批评）。

我导出了在关联列表中编写指令的函数，因为提供的每个答案都说只包含该函数是要走的路。

```
funcMap = [("writeServerName", writeServerName)
           ,("writeServeralias", writeServerAlias)
           ,("writeDocRoot", writeDocRoot)
           ,("writeLogLevel", writeErrorLog)
           ,("writeErrorPipe", writeErrorPipe)
           ,("writeVhostOpen", writeVhostOpen)] 
```

在实际写入主机的文件中，该文件被导入。

我有一个名为*hostInfo*的关联列表来模拟将从最终用户收集的一些虚拟值和一个名为*runFunction*的函数，它使用 edalorzo 提供的技术*来*过滤这两个列表。通过匹配两个列表的键，我确保使用正确的值调用正确的函数。

```
import Vhost.Directive

hostInfo =     [("writeVhostOpen", "localhost:80")
                ,("writeServerName", "norics.com")] 

runFunctions = [f val | (mapKey, f) <- funcMap, (key, val) <- hostInfo, mapKey == key] 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-04T03:17:06.760

您可以简单地将函数直接包含在列表中；函数是值，因此您可以在列表中按名称引用它们。将它们从列表中删除后，应用它们就像`func value`. 根本不需要涉及他们的名字。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-04T03:25:58.833

由于我对 Haskell 非常陌生，我会冒着风险让您认为我的建议非常幼稚，但无论如何这里都是：

```
let funcs = [("sum", (+3),1),("product", (*3),2),("square", (^2),4)]
[f x | (name, f, x) <- funcs, name == "sum"] 
```

我认为它满足了问题的要求，但也许你的意图比我对 Haskell 的有限知识所能看到的更复杂。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-04T03:22:52.570

这可能有点矫枉过正（我同意 ehird 的推理），但您可以使用[System.Eval.Haskell](http://hackage.haskell.org/packages/archive/plugins/1.0/doc/html/System-Eval-Haskell.html)`eval`中的函数使用 Haskell 代码评估字符串。

**编辑**

正如评论中所指出的，[提示](http://hackage.haskell.org/package/hint)是使用 Haskell 表达式评估字符串的更好选择。引用页面：

> 这个库定义了一个解释器单子。它允许加载 Haskell 模块、浏览它们、使用 Haskell 表达式对字符串进行类型检查和评估，甚至将它们强制转换为值。该库是线程安全和类型安全的（甚至是表达式强制转换为值）。从本质上讲，它是封装在更简单 API 中的 GHC API 的一个巨大子集。适用于 GHC 6.10.x 和 6.8.x

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T03:19:36.607

首先我们定义我们的函数列表。这可以使用更多的机器来构建，但为了举例，我只列出一个明确的列表：

```
listOfFunctions :: [(Int, IO ())]
listOfFunctions = [(0, print "HI")        -- notice the anonymous function
                  ,(1, someNamedFunction) -- and something more traditional here
                  ]

someNamedFunction = getChar >>= \x -> print x >> print x 
```

然后我们可以从这个列表中选择我们想要的并执行函数：

```
executeFunctionWithVal :: Int -> IO ()
executeFunctionWithVal v = fromMaybe (return ()) (lookup v listOfFunctions) 
```

它有效（如果您导入 Data.Maybe）：

```
Ok, modules loaded: Main.
> executeFunctionWithVal 0
"HI"
> executeFunctionWithVal 01
a'a'
'a' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T03:22:50.983

不要将函数存储为字符串，或者更确切地说，尝试存储实际函数，然后用字符串标记它们。这样您就可以直接调用该函数。函数是一流的值，因此您可以使用分配给它的任何名称来调用该函数。

# java - IntelliJ IDEA + Maven 在 iml 文件中需要什么依赖项？

> ID：10004443
> 
> 赞同：24
> 
> 时间：2012-04-04T03:12:45.097
> 
> 标签：java, maven, intellij-idea

在 Maven 中，项目的依赖关系在 pom.xml 文件中指定。在 IntelliJ IDEA 中，即使对于 Maven 项目，相同的信息也存储在 iml 文件中。在两个地方拥有相同的信息有什么需要？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-04T03:52:25.893

在导入 Maven 项目时，IDEA 以它内部可以理解和使用的格式来表示它的依赖模型。如果您通过 Maven 管理依赖项，则无需更改 IntelliJ IDEA 模块设置中的依赖项。

这也可以用于在不更改`pom.xml`. 请注意，您所做的所有修改都将在下一次 Maven 导入时恢复。

换句话说，IDEA 并不直接理解 Maven 模型，而是将其转换为自己的项目模型，供所有子系统使用，而内部项目信息需要存储在某个地方，因此是`.iml`文件和`.idea`项目目录。这样IDEA就不需要每次打开项目都去分析pom文件，重新解析所有的依赖，只在有`pom.xml`变化的时候做。

由于您完全可以在 IDEA 中构建/运行/测试/部署/调试 Maven 项目，而无需使用 Maven，因此这些任务所需的信息以 IDE 自身可以理解的格式存储。它更快，更容易维护，我想它比直接读取 Maven 模型更容易实现。

# assembly - x86_64 汇编命令行参数

> ID：10004448
> 
> 赞同：3
> 
> 时间：2012-04-04T03:14:00.513
> 
> 标签：assembly, stack, command-line-arguments, x86-64

要在 Mac OS X 上的 x86_64 中获取命令行参数，我可以执行以下操作：

```
_main:
  sub   rsp, 8         ; 16 bit stack alignment
  mov   rax, 0
  mov   rdi, format
  mov   rsi, [rsp + 32]
  call  _printf 
```

其中格式为“%s”。rsi 设置为 argv[0]。

所以，从这里，我画出了（我认为）堆栈最初的样子：

```
 top of stack
               <- rsp after alignment
return address <- rsp at beginning (aligned rsp + 8)
  [something]  <- rsp + 16
    argc       <- rsp + 24
   argv[0]     <- rsp + 32
   argv[1]     <- rsp + 40
    ...            ...
bottom of stack 
```

等等。抱歉，如果这很难阅读。我想知道[东西]是什么。经过几次测试，我发现它通常只是 0。然而，偶尔，它是一些（看似）随机数。

另外，你能告诉我我的堆栈图的其余部分是否正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:47:08.407

根据[AMD64 ABI](http://www.x86-64.org/documentation/abi.pdf)（3.2.3，参数传递），参数`main(int argc, char **argv)`被传递给（按从左到右的顺序）`rdi`&，`rsi`因为它们属于 INTEGER 类。`envp`, 如果它被使用, 将被传递到`rdx`, 等等。 `gcc`按如下方式将它们放入当前帧（大概是为了方便？释放寄存器？）：

```
mov    DWORD PTR [rbp-0x4],  edi
mov    QWORD PTR [rbp-0x10], rsi 
```

当省略帧指针时，寻址是相对于`rsp`. 通常，`argv`将是一个八字节以下`rbp`（`argc`首先出现，尽管这不是强制性的），因此：

```
# after prologue
mov    rax, QWORD PTR [rbp-0x10] # or you could grab it from rsi, etc.
add    rax, 0x8
mov    rsi, QWORD PTR [rax]
mov    edi, 0x40064c # format
call   400418 <printf@plt> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T05:26:26.300

你有它关闭。

`argv`是一个数组*指针*，而不是数组所在的位置。`C`里面写着，`char **argv`所以你必须做两级解除引用才能得到字符串。

```
 top of stack
               <- rsp after alignment
return address <- rsp at beginning (aligned rsp + 8)
  [something]  <- rsp + 16
    argc       <- rsp + 24
   argv        <- rsp + 32
   envp        <- rsp + 40  (in most Unix-compatible systems, the environment
    ...            ...       string array, char **envp)
bottom of stack
 ...
somewhere else:
   argv[0]     <- argv+0:   address of first parameter (program path or name)
   argv[1]     <- argv+8:   address of second parameter (first command line argument)
   argv[2]     <- argv+16:  address of third parameter (second command line argument)
    ...
   argv[argc]  <-  argv+argc*8:  NULL 
```

# javascript - Jquery $(this) 是否被 jqgrid gridunload 方法破坏？

> ID：10004452
> 
> 赞同：4
> 
> 时间：2012-04-04T03:14:39.763
> 
> 标签：javascript, jquery, jqgrid

我希望下面的代码卸载一个 javascipt jqgrid，然后用不同的选项加载另一个网格，包括不同的列

```
//onload
(function($)
$.fn.myGridFn = function(options){
   $(this).jqGrid('GridUnload');
   $(this).jqGrid(options.gridoptions);

//....

$('#select').change(function(){ 
    switch($(this).val())
    {
      case 'grid1':
            $('#grid').myGridFn({gridoptions:{/*grid1 options*/}});
            break;
      case 'grid2':
            $('#grid').myGridFn({gridoptions:{/*grid2 options*/}});
            break;
    }
   });

})(jQuery);

//...
<table id="grid"></table> 
```

我得到的是网格卸载，然后我必须更改选择元素中的选择并再次返回以加载新网格。

**更新：** 如果我用实际的元素选择器 $('#grid') 替换插件中的 $(this) - 它工作得很好，我不能在我的真实应用程序中这样做，因为该插件被其他几个表格元素使用并且网格

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T05:04:00.867

为未来的读者清理：

所以这是一种工作小提琴：http: [//jsfiddle.net/s3MsW/10/](http://jsfiddle.net/s3MsW/10/)

我说“有点”是因为底层代码是可疑的（jqGrid 本身）。但是我们马上就会到达那里......第一件事：如果你为插件记录“this”，它实际上是 jQuery 对象，而不是节点。从理论上讲，我们可以`$(this)`在您的原始代码中替换为`this`并且一切都应该工作。

除了没有。

实际上，您可以使用`this`卸载 Grid，但随后该函数`this`作为不指向呈现页面上的表的引用留下。有一些方法可以表明旧节点仍然存在（[http://jsfiddle.net/s3MsW/8](http://jsfiddle.net/s3MsW/8)是一个测试），但只要说它不能再用于将新表呈现到正确的页面上就足够了。

除了缓存选择器字符串并从头开始重新选择干净的表（即创建一个新的 jQuery 对象）之外，别无选择：

```
$.fn.myGridFn = function(options){
   var theId = this.selector;
   this.jqGrid('GridUnload'); // reference works for now
   $(theId).jqGrid(options); // reference is broken, so re-select with cached ID
} 
```

如果您对内存使用很认真，您可能想要销毁`this`（幽灵节点），但保留它可能没有真正的危害。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T05:21:08.737

在我看来，您应该只保存`$(this)`在一个变量中`$this`，然后再使用它。问题只是在里面

```
$('#select').change(function(){/*here*/}); // another value of this 
```

所以你应该做

```
(function($)
$.fn.myGridFn = function(options) {
    var $this = $(this), selector = $this.selector;

    $this.jqGrid('GridUnload');
    $this = $(selector);    // reset $this value
    ...    

    $('#select').change(function() { 
        switch($(this).val()) { // here is $('#select')
          case 'grid1':
                $this.myGridFn({gridoptions:{/*grid1 options*/}});
                ... 
```

另外一种用法通常以

```
return this.each( function() { ... 
```

确保您的插件在使用情况下也能正常工作，例如`$(".myGridClass").myGridFn(...)`在包装集合中可以将多个元素作为一个元素`$(".myGridClass")`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:12:40.047

这个问题难倒了，上面的答案是正确的。

我一直在尝试执行以下操作：

```
this.jqGrid('GridUnload')
this.('getGridParam'); /* Still returning all the parameters for the grid. */ 
```

相反，我做了：

```
var $t = $(this.selector);
$t.jqGrid('GridUnload');
$t = $(this.selector);
$t.jqGrid('getGridParam'); /* Now empty */ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-04T04:01:49.827

我觉得你应该试试

```
$('#select option:selected).val()// gives the value of the selected option.
$('#select option:selected).text()// gives the text of the selected option. 
```

代替

```
$(this).val() 
```

在 switch 的括号中

# css - CSS 404 error using Django

> ID：10004460
> 
> 赞同：0
> 
> 时间：2012-04-04T03:15:38.820
> 
> 标签：css, django

CSS link:

```
<link rel="stylesheet" href="/site_media/style.css"
        type="/text/css" /> 
```

I'm getting a -404 error while loading my CSS sheet.When I try to debug the location thru Firebug(Firefox), I get the below location.

"C:\Python27\Djangoprojects\django_bookmarks..\django_bookmarks\site_media\style.css" does not exist

Site_media is determined by the Python code in URLS.py

```
site_media = os.path.join(os.path.dirname(__file__), 'site_media') 
```

Why do I get the ..\ in the location?

# javascript - 如何将javascript字符串变量作为真实设置传递？

> ID：10004464
> 
> 赞同：1
> 
> 时间：2012-04-04T03:16:30.537
> 
> 标签：javascript, string, variables, dynamic

我有一个 JavaScript 问题。我正在尝试动态构建插件字符串变量（optPlugins）并插入到 jwplayer 的设置中，但它不起作用。例如：

这不起作用：

```
function jsCreatePlayer(sStartVid)
{
var optPlugins = '{ "dplaylists-1": { "dxmlpaths": "/jw/playlist_latest.xml", "dposition": "top", "dskin": "/jw/DPlaylistsSample.swf", "dtarget": "_self" } }';

jwplayer('mainplayer').setup({
'flashplayer': '/jw/player.swf',
'file': sStartVid,
'plugins': optPlugins,
'autostart': 'true',
'width': '577',
'height': '324'
});
} 
```

这样做：

```
function jsCreatePlayer(sStartVid)
{
jwplayer('mainplayer').setup({
'flashplayer': '/jw/player.swf',
'file': sStartVid,
'plugins': { "dplaylists-1": { "dxmlpaths": "/jw/playlist_latest.xml", "dposition": "top", "dskin": "/jw/DPlaylistsSample.swf", "dtarget": "_self" } },
'autostart': 'true',
'width': '577',
'height': '324'
});
} 
```

请注意，两者之间的唯一区别是我将 optPlugins var 复制到插件中：。我不擅长这个，这些 JSON 选项还是什么？我如何让 jwplayer 的 .setup 正确评估（？） optPlugins？它不是 jwplayer 问题，我认为我也可以轻松地对 jquery 选项提出这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T03:23:00.230

使用如下代码，

```
var optPlugins = { "dplaylists-1": { "dxmlpaths": "/jw/playlist_latest.xml", "dposition": "top", "dskin": "/jw/DPlaylistsSample.swf", "dtarget": "_self" } }; 
```

# uilabel - SubClassing UILabel

> ID：10004466
> 
> 赞同：6
> 
> 时间：2012-04-04T03:16:41.273
> 
> 标签：uilabel, subclass

I read in this same site how to inset and UILabel (subclass UILabel and override the required methods). Before adding it to my app I decided to test it out in a standalone test app. Code is shown below.

**Here's MyUILabel.h**

```
#import <UIKit/UIKit.h>

@interface MyUILabel : UILabel

@end 
```

**Here's MyUILabel.m**

```
#import "MyUILabel.h"
#import <QuartzCore/QuartzCore.h>

@implementation MyUILabel

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

// for border and rounding
-(void) drawRect:(CGRect)rect
{
    self.layer.cornerRadius = 4.0;
    self.layer.borderWidth = 2;

    [super drawRect:rect];
}

// for inset
-(void) drawTextInRect:(CGRect)rect
{
    UIEdgeInsets insets = {0, 5, 0, 5};

    [super drawTextInRect: UIEdgeInsetsInsetRect(rect, insets)];
} 
```

**Here's my ViewController.h**

```
#import <UIKit/UIKit.h>
#import "MyUILabel.h"

@interface ViewController : UIViewController
{
    MyUILabel   *myDisplay;
}

@property (strong, nonatomic) IBOutlet MyUILabel *myDisplay;

@end 
```

**Here's ViewController.m:**

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize myDisplay;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    myDisplay.text = @"Hello World!";
}

- (void)viewDidUnload
{
    [self setMyDisplay:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

None of the methods in MyUILabel.m (that Im overriding) get called.

Insights into why are greatly appreciated.

Regards,

Ramon.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T06:15:15.460

好的。我做了一些进一步的挖掘，在 Xcode 中查看 nib 文件时可以看到一个字段。它是“身份检查员”（左起第三个图标）。这需要从 UILabel 更改为 MyUILabel。

现在它起作用了！

# c++ - C++：新手的函子和 std::function

> ID：10004467
> 
> 赞同：0
> 
> 时间：2012-04-04T03:16:46.153
> 
> 标签：c++, functor, std-function

我有一个简单的问题，但我不知道如何解决它，因为我从未在 C++ 中使用过函子。

我想做这样的事情（这只是一个例子）：

```
class MyClass
{
    void applyFunction(myFunction);  /* WRONG SYNTAX */
    double *_x;
    unsigned int *_size;
};

void MyClass::applyFunction(myFunction) /* WRONG SYNTAX */
{
    for (unsigned int i = 0; i < _size; ++i)
        myFunction(_x[i], 10.);
}

class OtherClass
{
    void myFunction1(double x, double lim);
    void myFunction2(double x, double lim);
    std::vector _v;
};

void OtherClass::myFunction1(double x, double lim)
{
    _v.clear();
    if (x > lim)
        _v.push_back(x);
}

void OtherClass::myFunction2(double x, double lim)
{
    _v.clear();
    if (x < lim)
        _v.push_back(x);
}

int main()
{
    MyClass myClass;
    OtherClass otherClass;
    myClass.applyFunction(otherClass.myFunction1); /* WRONG SYNTAX */
    std::cout<<otherClass._v.size()<<std::endl;
    myClass.applyFunction(otherClass.myFunction2); /* WRONG SYNTAX */
    std::cout<<otherClass._v.size()<<std::endl;
        return 0;
} 
```

使用 functors/std::functions 的正确语法是什么？

非常感谢你 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T03:54:49.683

我会相信你的话，你想为此使用函子。只是为了笑，我还假设您想以“正确”的方式执行此操作，而不仅仅是找到可以让它编译的语法（并且可能运行，也许做您想做的事情）。

在这种情况下，标准库已经有算法来支持你正在做的大部分事情（尤其是在 C++11 中）。要将满足某些标准的数据复制到目标向量中，您需要`std::copy_if`（尽管在 C++98/03 中没有这样做——您必须颠倒比较和使用的意义`std::remove_copy_if`）。

使用它，您的代码将变成这样：

```
template <class T>
class less_than {
    T limit;
public:
    less_than(T lim) : limit(lim) {}
    bool operator()(T const &val) { return val < limit; }
};

std::copy_if(source.begin(), 
             source.end(), 
             std::back_inserter(target), 
             less_than<int>(10)); 
```

但是，如果您有可用的 C++11，则使用 lambda 可能更方便：

```
std::copy_if(source.begin(), 
             source.end(), 
             std::inserter(target), 
             [](int v) { return v < 10;}); 
```

lambda 基本上只是让编译器为您生成匿名仿函数类的一种方式，因此两者之间没有太大的真正区别，但 lambda 显然节省了相当多的输入。

如果你坚持使用 C++03，你基本上只是颠倒比较：

```
template <class T>  
class greater_than { 
    T limit;
public:
    bool operator()(T const &val) {
        return val > limit;
    }
};

std::remove_copy_if(src.begin(), 
                    src.end(), 
                    std::back_inserter(dst),
                    greater_than(10)); 
```

或者，您可以很容易地编写自己的`copy_if`- 它主要是由于疏忽而被排除在 C++98/03 之外，而不是因为它需要该语言不提供的任何东西，或者类似的东西（尽管我记得，得到所有完全正确的边界条件可能有点棘手）。

对于它的价值，我还应该注意标准库确实有`std::less`and `std::greater`，所以我上面给出的`less_than`and函子并不是真正必要的。`greater_than`不幸的是，它们只是进行比较，所以要像我们在这里一样使用它们，你必须使用`std::bind1st`or`std::bind2nd`让它们与一个常数进行比较：

```
std::remove_copy_if(src.begin(),
                    src.end(),
                    std::ostream_iterator<int>(std::cout, "\n"),
                    std::bind1st(std::less<int>(), 10)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T03:23:52.037

```
void applyFunction(std::function<void(double, double)>);
// ...
applyFunction(std::bind(&OtherClass::myFunction1, &otherClass)); 
```

# r - 安装 R 包时出错：为 Universal-apple-darwin 构建的包

> ID：10004468
> 
> 赞同：2
> 
> 时间：2012-04-04T03:16:51.393
> 
> 标签：r

[我按照如何从源代码安装](https://stackoverflow.com/questions/1474081/how-do-i-install-an-r-package-from-source)R 包的建议安装了 R 包？, 使用`R CMD INSTALL [my_pkg_path.tgz]`. 包源从 r-project.org 下载，例如[http://cran.r-project.org/web/packages/fields/index.html](http://cran.r-project.org/web/packages/fields/index.html)

但是，当我尝试使用 say 加载包时`library(fields)`，我收到了抱怨包是为 Universal-apple-darwin 构建的错误：

```
Error: package ‘fields’ was built for universal-apple-darwin9.8.0 
```

猜猜这与架构有关，但不知道如何解决它。任何的想法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T05:35:22.670

看起来您下载了包的 Mac OSX 二进制文件，该文件通常以 .tgz 结尾 - 尝试下载包源（通常以 .tar.gz 结尾）并再次安装包。

根据您的操作系统，您可能需要一组额外的软件才能从源代码安装软件包。如果上述建议不起作用，您能否提供一些有关操作系统的信息，例如来自`sessionInfo()`？

# javascript - 如何在 Javascript/jQuery 中获取 mousemove 事件的开始时间？

> ID：10004469
> 
> 赞同：0
> 
> 时间：2012-04-04T03:16:59.617
> 
> 标签：javascript, jquery, timer, jquery-events, onmousemove

我可以从 mousemove 事件的回调函数中的“事件”参数中获得与开始时间相关的任何属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:21:22.163

你试过**[`event.timeStamp`](https://developer.mozilla.org/en/DOM/event.timeStamp)**吗？

> 返回创建事件的时间（自纪元以来的毫秒数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T03:34:27.207

此代码将`timestamp`在元素内第一次发生 mousemove 时存储时间（as）：

```
 var startTime = null;
    $('<YOUR_ELEMENT>').one('mousemove', function(e) {
        startTime = e.timeStamp;
        console.log(startTime);
    }); 
```

# android - 收到 C2DM 消息后工作的最佳实践是什么？

> ID：10004473
> 
> 赞同：0
> 
> 时间：2012-04-04T03:17:35.183
> 
> 标签：android, android-c2dm

有人可以解释处理 C2DM 意图工作的常用方法吗？

我有一个执行智能轮询的应用程序 - 它本质上是一个消息传递应用程序 - 所以它轮询服务器以检查您的收件箱是否有新消息。有一个活动 UI 和一个保守轮询的后台服务。

现在作为投票的补充，我已经加入了 C2DM——大概是为了推送 30 分钟未读的收件箱内容。

因此，当我收到 C2DM RECEIVE 意图时，我是在告诉我的后台服务进行投票。

**这将如何运作？**

我假设 C2DM 的主要用例是一部“空闲”电话（即在你的口袋里，屏幕关闭）。所以你得到一个 RECEIVE 意图，获取一个唤醒锁，然后启动后台服务去轮询；向后台服务发送意图后返回唤醒锁。

**后台服务还能存活多久？**

android不会马上把它杀掉吗？

我是否应该尝试执行 1 个服务器 ping 然后死掉？

我只是对在获得 C2DM 意图后可以进行多少处理感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T15:55:22.170

您建议的方法听起来很可靠。使用 C2DM 作为轮询的一种补充方式是一种很好的方法。C2DM 本身并不是 100% 可靠的（永远不会），您的设计可以防止这种情况发生。

该服务将一直运行，直到完成其工作。我希望它会向用户显示通知，或更新消息列表。

我将服务设置为进行指数回退重试，并让它在失败前尝试 X 次。如果失败，那么下次进行轮询时，它将被更新。我不希望后台服务尝试太久，因为这就是轮询代码要做的事情。

除非操作系统严重需要内存，否则您的服务将继续运行。您可以强制该服务成为前台服务（带有通知图标），但我不认为这是必要的。

我假设您的服务定期轮询服务，因此它将弥补 C2DM 消息中的任何失败以发出服务器请求。

# php - 如何告诉 Eclipse 将 HTML 文件验证为 PHP？

> ID：10004479
> 
> 赞同：5
> 
> 时间：2012-04-04T03:19:06.667
> 
> 标签：php, eclipse, eclipse-pdt

我刚刚开始使用 Eclipse PDT，我遇到了与[如何在 Eclipse for PHP 中抑制警告中描述的问题类似的问题？](https://stackoverflow.com/questions/3791690/how-do-i-suppress-warnings-in-eclipse-for-php)

我刚刚指出 Eclipse 来查看一个使用不同 IDE 构建的项目。在该项目中，有许多 HTML 文件被 Apache 解析为 PHP。

*我的问题窗口*中出现了许多 Eclipse 验证*错误*。

 *但是，我怀疑 Eclipse 认为它们是错误的唯一原因是因为它认为这些文件是 HTML。毕竟他们确实有 .html 扩展名。祝福它。

我不愿意更改验证设置以[抑制错误](https://stackoverflow.com/a/6236155/205814)，因为它似乎并没有真正解决问题，而只是在上面贴上石膏。

我已经[遵循了这里的建议，](https://stackoverflow.com/questions/1959606/making-eclipse-view-different-file-extensions-as-php)并深入到 General -> Editors -> File Associations 和关联的 PHP 编辑器，将其作为与 .htm 和 .html 文件扩展名关联的默认编辑器。（然后重新启动 Eclipse）。但是，这没有任何效果。

因此，如果有人能让我知道如何告诉 Eclipse 将.htm 文件*验证为 PHP，我将不胜感激。*

另外，只是为了感兴趣，Eclipse 框架的哪一部分负责进行实际验证？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T21:47:58.837

您应该像以前一样在 eclipse 首选项中转到 General -> Editors -> File Associations，然后单击“Content Types”：

![在此处输入图像描述](../Images/289999af3abc5daa233cfbfc69604726.png)

并添加 *.htm 作为 PHP 内容类型

![在此处输入图像描述](../Images/6ec544065b5258b770541ad93a1abc4b.png)

PS 该方法适用于 Eclipse 3.7.2*

# linux - How to set green screen in Ubuntu?

> ID：10004480
> 
> 赞同：0
> 
> 时间：2012-04-04T03:19:15.847
> 
> 标签：linux, ubuntu, colors, console

The default console in Ubuntu are white characters and purple background. I want to change it to green characters and black background, just like the old computer screens. I want to set all stuff to be green, including all files listed by "ls".(In the original console, different files may be shown in different colors, I do not want that).

What is more, how to set green characters in pure character environment? (Suppose I do not install X to my OS.)

Thanks a lot for your help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:15:40.930

只需编辑您的终端配置文件。

gnome-terminal：编辑 -> 配置文件 -> 编辑
konsole：设置 -> 配置配置文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T03:55:40.333

Bash`ls`使用别名在输出中显示颜色。您可以取消设置该命令别名。从命令行运行`unalias ls`，列表命令中的颜色将变为单色。将此行添加到您的`.bashrc`文件中，`.bashprofile`以便在您的登录会话中设置它。

更改控制台颜色是非常基本的，快速的 google 将为您提供所需的所有步骤。例如[这个链接。](http://www.addictivetips.com/ubuntu-linux-tips/changing-terminal-colors-in-ubuntu-linux/)

# javascript - Get Timeline Button Disabled?

> ID：10004481
> 
> 赞同：0
> 
> 时间：2012-04-04T03:19:35.237
> 
> 标签：javascript, facebook, facebook-timeline

I just made a new Facebook account, and I want to add timeline. But, apparently Facebook keeps the "[Get Timeline](http://www.facebook.com/about/timeline)" button [hidden from new users](http://filesmelt.com/dl/Screen_Shot_2012-04-03_at_11.14_.13_PM_.png).

So how could I get around this? Javascript through the address bar or maybe just a url?

```
<form rel="async" ajaxify="/ajax/timeline/activate.php?action=activate&amp;ref=marketing_page" class="buttonForm" action="#" method="post" onsubmit="return Event.__inlineSubmit(this,event)">
    <input type="hidden" name="lsd" value="AVoDDmtm" autocomplete="off">
    <label class="TimelineMarketingUpgradeButton uiButton uiButtonSpecial uiButtonLarge" for="ut0eri_8">
        <input value="Get Timeline" type="submit" id="ut0eri_8">
    </label>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:29:33.217

您可以从此 URL 激活时间轴：http: [//www.facebook.com/about/timeline](http://www.facebook.com/about/timeline)

即使按钮被隐藏，使用上述 URL 访问页面仍然有效。

# java - javax.ws.rs 包

> ID：10004485
> 
> 赞同：9
> 
> 时间：2012-04-04T03:19:42.727
> 
> 标签：java, rest, web-services, jakarta-ee, jax-rs

我正在学习 RESTful Web 服务，所有教程都使用`javax.ws.rs.*`包。但是对于 JDK 6 和 JDK 7，我的 Eclipse 似乎无法识别`javax.ws`包。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T03:44:23.273

您可能缺少[Jersey](http://jersey.java.net/)安装或环境配置中的某些内容。也尝试安装[Eclipse WPT](http://www.eclipse.org/webtools/)。您可以按照本[教程](http://www.vogella.de/articles/REST/article.html#installation)进行操作，它还涵盖了先决条件和基本安装过程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T08:07:06.707

[javax.ws.rs](http://docs.oracle.com/javaee/6/api/javax/ws/rs/package-summary.html)不是 JDK 包；它是构成 Java EE 规范一部分的服务器端 API。如果您要采用[自组装](https://cwiki.apache.org/WINK/jax-rs-getting-started.html)路线（例如使用 Tomcat），则需要在类路径中包含 Java EE 运行时或从第三方获取实现。

# php - 使用php限制对pdf页面的访问

> ID：10004486
> 
> 赞同：2
> 
> 时间：2012-04-04T03:20:01.783
> 
> 标签：php, pdf

使用 PHP，我正在开发一个脚本，一旦脚本被验证，就会生成一个合同。

合同是使用 TCPDF 生成的 pdf 文档，我将其保存到服务器的子目录中，并带有用户 ID。例如，“contracts/132/1.pdf”将是 ID 为 132 的用户的账单 #1。

但是，我希望只有用户 132 能够访问该文件，因为它包含个人信息。如何将每个子文件夹中的 pdf 文档的访问权限限制为各自的用户（使用 php 或 htaccess，以最好的方式 - 我对 htaccess 不是很熟悉）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T03:24:32.303

最简单的方法可能只是拥有一个需要存在有效会话的 PHP 脚本（就像生成器脚本一样），其功能是`readfile("/path/to/contract.pdf");`

这样，您可以让您的 PDF 包装脚本验证正在下载的合同是会话中人员的正确合同，而不仅仅是目录中的合同。

目录上基于 .htaccess 的解决方案的问题在于，任何对该目录具有读取权限的人都可以下载任何合约。

给定一个 URL，`http://example.com/contract.php?user=132&bill=1`你可以：

```
<?php

$user = $_GET['user'];
$bill = $_GET['bill'];
# do input validation on $user and $bill.  No really, do it.

if ($user != $_SESSION['user']) {
  die("Security error; the black choppers are on their way.");
}

header("Content-type: application/pdf");
header('Content-Disposition: attachment; filename="Contract-$user-$bill.pdf"');

readfile("/path/to/pdfspool/$user/Contract-$user-$bill.pdf"); 
```

中间的`if ()`块验证被请求的 $user 对当前用户是否有效。显然，您可能想要存储 $_SESSION['user']，可能是在此用户首次登录时。

当然，你真的不需要保留假脱机文件。如果生成 PDF 的过程不会使您的 Web 服务器不堪重负（如果确实存在其他问题），那么根据请求从头开始重新生成每个 PDF 可能会更容易。这就是我现在对公司发票所做的事情，每张发票都有一个 6 点的页脚，说明它是何时生成的，以及来自哪个 IP 地址的请求。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T03:24:12.623

首先，您将 PDF 文件放在站点的 Web 根目录之外并通过脚本检索它们。

这可以通过将 Mod_Rewrite 规则组合到一个 PHP 脚本中来实现无缝连接，该规则将请求传递到 PDF 将被检索到的位置，该 PHP 脚本从 URL 获取用户和文档 ID 并执行访问控制，如果成功，则输出文件的内容。

有关如何使用 PHP 代码执行 HTTP 级别身份验证的详细信息，请参阅[PHP 手册。](http://php.net/manual/en/features.http-auth.php)

# c++ - 具有已知矩阵的模板矩阵表达式

> ID：10004487
> 
> 赞同：4
> 
> 时间：2012-04-04T03:20:08.240
> 
> 标签：c++, templates, matrix

这是一个思考练习，不是一个特定的问题，但我想听听你的意见。假设我有一些使用模板（Eigen、ublas 等）的矩阵表达式 DSL。

现在假设我有一些常量矩阵，例如：

```
Matrix2 sigma1 = {{0,1}, {1,0}};
Matrix2 sigma2 = {{0,i}, {-i,0}};
... etc 
```

...而且我对那些涉及运行时值的矩阵进行了一些操作：

```
a*sigma1 + b*sigma2; // a,b runtime 
```

你有什么想法来实现常量矩阵，以便编译器可以最优化表达式？特别是，如何将`(i,j)`运算符解析为常量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T00:49:15.760

根据我对问题空间的理解：给定特定[领域的语言](https://en.wikipedia.org/wiki/Domain-specific_language)，我们希望确定最小转换，以便数据上的某些运算符（例如，`(i,j)`）导致查找常量而不是计算数学公式（例如，`a*sigma1 + b*sigma2`）。

让我们在这里探索一些可能性：

*   *直接执行数学运算*

    [0 级](https://en.wikipedia.org/wiki/Orders_of_approximation)实现。如果您的编译器没有显式优化，如果我们直接执行指令会发生什么？

    答案是视情况而定。但是，在大多数处理器上，您的代码执行将落在[CPU 缓存](https://en.wikipedia.org/wiki/CPU_cache)上，您的程序集和分支执行将在其中优化到您的内核的最佳能力。该过程的核心[实际上非常酷，](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)但我们假设您想要超越这些功能并直接在代码中解决操作的恒定化问题。

*   *使用[编译器-编译器绑定和捕获空间](https://en.wikipedia.org/wiki/Compiler-compiler)*

    一阶优化是使用[compiler-compiler](https://en.wikipedia.org/wiki/Compiler-compiler)绑定和捕获可能的输入和输出空间。虽然这将有效地解决您的输入范围，将其限制为您想要的一组输入和输出，但它对性能没有*任何*帮助。所以，我们必须继续前进。

*   *[字符串化](http://gcc.gnu.org/onlinedocs/cpp/Stringification.html)和[宏扩展](https://en.wikipedia.org/wiki/Macro_%28computer_science%29)*

    二阶优化将是直接执行值空间的字符串或宏扩展。虽然这[充满了极端情况和令人惊讶的实现级焦油坑](http://gcc.gnu.org/onlinedocs/cppinternals/Macro-Expansion.html)，但如果需要该操作，可以直接由编译器完成。（另见：[循环展开](https://en.wikipedia.org/wiki/Loop_unwinding)）

*   *[封闭式表达式](https://en.wikipedia.org/wiki/Closed-form_expression) 的手动推导和堆栈绑定可满足性
    （例如，使用查找表）*

    最后，我们的三阶优化将直接限制您的空间。这要求您具有定义明确的[封闭式关系](https://en.wikipedia.org/wiki/Closed-form_expression)以及有界输入和输出空间才能有效地工作。如果这种关系无法确定或没有界限，[那么您就不走运了](https://en.wikipedia.org/wiki/NP-complete)，如果不知道存在更好的实现，则应该考虑保留当前的实现。

在这些优化技术中，最适用于[线性代数运算](https://en.wikipedia.org/wiki/Linear_algebra)的是后两种，考虑到您所描述的问题范围。因为大多数操作，例如矩阵平移、旋转和缩放操作本质上是确定性的，所以您确实可以有效地优化和限制您的空间。

对于更理论的答案，我建议咨询[http://cs.stackexchange.com](http://cs.stackexchange.com)、[http://cstheory.stackexchange.com](http://cstheory.stackexchange.com)和[http://math.stackexchange.com](http://math.stackexchange.com)。两者都有许多线程致力于整个方程类的封闭式[多项式解的](https://en.wikipedia.org/wiki/Time_complexity)[可判定性和证明。](https://en.wikipedia.org/wiki/Decidability_%28logic%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T12:44:57.657

好的，这很可怕，但与我对原始帖子的评论有关。

使用这种结构应该可以定义您需要的相关操作，但是编写所有适当的专业化将是很多工作。您可能还希望交换行/列。

最后定义矩阵肯定不像你原来的帖子那样优雅，但也许这可以改进，特别是在 C++11 中使用“自动”。

```
//-----------------------------------------------------------------------------
struct Unused {};

struct Imaginary {
    Imaginary() {}
    Imaginary(Unused const& unused) {}
};
struct MinusImaginary {
    MinusImaginary() {}
    MinusImaginary(Unused const& unused) {}
};

//-----------------------------------------------------------------------------
template <int I, int F = 0>
struct Fixed {
    Fixed() {}
    Fixed(Unused const& unused) {}
};

//-----------------------------------------------------------------------------
struct Float
{
    Float(float value) : value_(value) {}
    const float value_;
};

//-----------------------------------------------------------------------------
template <typename COL0, typename COL1>
struct Vector2
{
    typedef COL0 col0_t;
    typedef COL1 col1_t;

    template <typename T0, typename T1>
    Vector2(T0 const& t0, T1 const& t1)
        : col0_(t0)
        , col1_(t1)
    {}

    COL0 col0_;
    COL1 col1_;
};

//-----------------------------------------------------------------------------
template <typename ROW0, typename ROW1>
struct Matrix2
{
    typedef ROW0 row0_t;
    typedef ROW1 row1_t;

    Matrix2()
        : row0_(Unused(), Unused())
        , row1_(Unused(), Unused())
    {
    }
    template <typename M00, typename M01, typename M10, typename M11>
    Matrix2(M00 const& m00, M01 const& m01, M10 const& m10, M11 const& m11)
        : row0_(m00, m01)
        , row1_(m10, m11)
    {
    }

    ROW0 row0_;
    ROW1 row1_;
};

//-----------------------------------------------------------------------------
Matrix2<
    Vector2< Fixed<0>, Fixed<1> >,
    Vector2< Fixed<1>, Fixed<0> > 
> sigma1;

const float f = 0.1f;

//-----------------------------------------------------------------------------
Matrix2<
    Vector2< Fixed<0>, Imaginary >,
    Vector2< MinusImaginary, Fixed<0> > 
> sigma2;

//-----------------------------------------------------------------------------
Matrix2<
    Vector2< Fixed<0>, Float >,
    Vector2< Float, Fixed<0> > 
> m3(Unused(), 0.2f,
     0.8f, Unused());

// EDIT: Nicer initialization syntax in c++11

//-----------------------------------------------------------------------------
template <typename M00, typename M01, typename M10, typename M11>
Matrix2< Vector2<M00, M01>, Vector2<M10, M11> >
MakeMatrix(M00 const& m00, M01 const& m01, M10 const& m10, M11 const& m11)
{
    return Matrix2< Vector2<M00, M01>, Vector2<M10, M11> >(m00,m01,m10,m11);
}

auto m4 = MakeMatrix(Fixed<0>(),  Float(0.2f), 
                     Float(0.8f), Fixed<0>()  ); 
```

# excel - EXCEL：如何在循环列以更改数字格式时忽略多个标题行？

> ID：10004489
> 
> 赞同：1
> 
> 时间：2012-04-04T03:20:18.967
> 
> 标签：excel, vba

下面的代码正在运行。它将遍历工作表中的所有列，并根据第 2 行中找到的数字将其中的数据更改为固定长度的数字。

我的问题是这样做时它会选择整个列。这对我来说是个问题，因为我有 4 个我不想转换的标题行。

我的第一个想法是偏移/调整选择的大小并将更改应用于所有单元格，但我只是没有运气这样做。

任何人都可以修改此代码以在列中前进时忽略前 4 个标题行吗？

注意：lastCol 是一个单独的函数，它只返回一个整数值，其中包含工作表上最后使用的列的编号。

```
Sub FormatFixedNumber()

    Dim i As Long

    Application.ScreenUpdating = False

    For i = 1 To lastCol 'replace 10 by the index of the last column of your spreadsheet
        With Columns(i)
            .NumberFormat = String(.Cells(2, 1), "0") 'number length is in second row
        End With
    Next i
    Application.ScreenUpdating = True

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T03:34:14.647

这应该这样做。我添加了一个常量来保存标题行数。

编辑：添加代码以按要求转到最后一行。还检查 LastRow 是否大于 HEADER_ROWS。并修复了调整大小/偏移中 HEADER_ROWS 的一些复杂的加法和减法。

```
Sub FormatFixedNumber()
Const HEADER_ROWS As Long = 4
Dim i As Long
Dim LastRow As Long

Application.ScreenUpdating = False
For i = 1 To LastCol    'replace 10 by the index of the last column of your spreadsheet
    With Columns(i)
        LastRow = .Cells(Rows.Count).End(xlUp).Row
        If LastRow > HEADER_ROWS Then
            With .Resize(LastRow - HEADER_ROWS).Offset(HEADER_ROWS)
                .NumberFormat = String(.EntireColumn.Cells(2, 1), "0")    'number length is in second row
            End With
        End If
    End With
Next i
Application.ScreenUpdating = True
End Sub 
```

# html - inside with automatic element clearing

> ID：10004491
> 
> 赞同：0
> 
> 时间：2012-04-04T03:20:52.320
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T03:49:30.503

I know that you want to adhere to your posted layout, but there are several problems I foresee.

First and foremost, you are creating a very strange structure by having the text `Blah blah blah` and the `code` block as siblings. I don't think your layout is even possible with this syntax.

The second problem is that the paragraph tag, `p`, cannot contain block level elements. So you are severely limiting yourself to what content can be inside them when writing your pages.

I would change your structure to be something like this and then use floats to position.

```
div.parent { overflow: auto; } /* self clearing parent div */
p.left { float: left; width: 30%; } 
code.right { float: right; width: 70%; } 
```

```
<div class="parent">
     <p class="left">
        Text
     </p>
     <code class="right">Code</code>
</div> 
```

This allows you to position encapsulated blocks of html with float left/right. It also allows you to make use of block level elements in your description areas. In addition, I would probably go in and add classes and encapsulate the code tags in a parent div also. But I think the example is pretty straightforward.

# android - Android: Custom Tab Icon Size

> ID：10004492
> 
> 赞同：0
> 
> 时间：2012-04-04T03:20:58.153
> 
> 标签：android, android-layout, android-tabhost, android-tabs

Ok, I am going to building some custom tab icon images as explained in the following [post](https://stackoverflow.com/questions/9992639/android-how-to-build-tabs-like-the-ones-show-on-android-ui-page). But I just need to know what size do I need to build my tab icons? I keep on guessing and then putting them in this demo and they get squashed or changed. What ratio in pixels do I need to create my tab icons so that they appear right?

SOLUTION:
I will give sandy the best answer, especially since he is the only answer at this point, and because I did eventually use a 9 patch image. But I tell you what, for someone who is new to the graphic editing game, 9 patch images were a pain in the butt to use. I eventually just download someone else 9 patch image then edited the image for what I needed. If you look at my other question [here](https://stackoverflow.com/questions/9992639/android-how-to-build-tabs-like-the-ones-show-on-android-ui-page). You can see the image I use as the background behind example 1 and example 2 are 9 patch images. And that works great because everything looks perfect when you move it to landscape mode as well.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T03:37:51.997

您需要创建一个 9 补丁图像.. 更多信息请参见[此处](http://developer.android.com/guide/developing/tools/draw9patch.html)

# apache-flex - Multi column forms in Adobe Flex

> ID：10004493
> 
> 赞同：1
> 
> 时间：2012-04-04T03:20:59.630
> 
> 标签：apache-flex, flex4, adobe

What is the best way to make a multi column form in Flex?

My current solution if more than one column is required is to put the form items inside an `<s:HGroup>` but the alignment isn't the best.

Is there a better way?

Thank you, Fred

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T07:12:19.943

I haven't had a chance to really explore the new Spark Form controls, but one thing they do is re-introduce constraint columns and rows. Perhaps they were under-used in Flex 3, but I was sad to see them go in Flex 4.

You should be able to setup some rows and columns to lay the form elements out and keep things aligned between columns this way.

Some Adobe resources:

*   [The Spark Form, Spark FormHeading, and Spark FormItem containers](http://help.adobe.com/en_US/flex/using/WSc5cd04c102ae3e973827a8e912ac2b325a4-8000.html)
*   [Using constraint rows and columns with MX containers and the Spark FormLayout class](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7df9.html#WS2db454920e96a9e51e63e3d11c0bf633a0-7ff2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:33:16.073

如何使用网格控件。与使用 Hbox/Hgroup 的性能不同，但仍然可以满足您的需要。[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/containers/Grid.html#includeExamplesSummary](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/containers/Grid.html#includeExamplesSummary)

```
<s:VGroup left="10" right="10" top="10" bottom="10">
        <s:Label width="100%" color="blue" 
            text="A 3 by 3 Grid container of Button controls."/>

        <mx:Grid>
            <mx:GridRow>
                <mx:GridItem>
                    <s:Button label="Row 1 Col 1" width="100"/>
                </mx:GridItem>
                <mx:GridItem>
                    <s:Button label="Row 1 Col 2" width="100"/>
                </mx:GridItem>
                <mx:GridItem>
                    <s:Button label="Row 1 Col 3" width="100"/>
                </mx:GridItem>
            </mx:GridRow>

            <mx:GridRow>
                <mx:GridItem>
                    <s:Button label="Row 2 Col 1" width="100"/>
                </mx:GridItem>
                <mx:GridItem>
                    <s:Button label="Row 2 Col 2" width="100"/>
                </mx:GridItem>
                <mx:GridItem>
                    <s:Button label="Row 2 Col 3" width="100"/>
                </mx:GridItem>
            </mx:GridRow>

            <mx:GridRow>
                <mx:GridItem>
                    <s:Button label="Row 3 Col 1" width="100"/>
                </mx:GridItem>
                <mx:GridItem>
                    <s:Button label="Row 3 Col 2" width="100"/>
                </mx:GridItem>
                <mx:GridItem>
                    <s:Button label="Row 3 Col 3" width="100"/>
                </mx:GridItem>
            </mx:GridRow>
        </mx:Grid>
    </s:VGroup> 
```

# selenium - 同时在一台机器上运行 selenium 测试的可能问题

> ID：10004497
> 
> 赞同：1
> 
> 时间：2012-04-04T03:21:32.850
> 
> 标签：selenium, webdriver, selenium-webdriver

我有多个类似的站点（相同的布局，只是不同的数据），并且每个站点都有鼠标悬停的下拉菜单（鼠标移出时消失）。

我正在使用 Selenium 2 和 WebDriver，并且我有一个 selenium 测试用例，基本上可以将鼠标悬停并确保下拉菜单中的每个链接都有效。

我正在使用硒网格，所以我有一个集线器和几台测试机器。

因为我有很多站点（几百个）要测试，所以我正在考虑让每台机器对多个站点并行运行测试用例。

我担心的是因为一次只能有一个活动浏览器，如果网络驱动程序尝试大致同时在多个浏览器上执行 Action.moveToElement() 会导致问题吗？只有活动浏览器会正确执行 Action.moveToElement() 而其他浏览器会失败吗？如果出现问题，是否有任何解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T02:29:22.887

我已经尝试使用`JUnitCore.runClasses(ParallelComputer.classes(), SomeClass1.class, SomeClass2.class, SomeClass3.class);`它，当在一台机器上运行三个测试时，它会将通过测试的百分比从 100% 降低到大约 67%。不好=/。

好的部分 - Firefox 实际上可以并行执行。如果 FF 实例彼此之间存在延迟，因此它们不会同时执行相同的操作，则效果会更好。一些故障发生在 Firefox 启动过程中 - 所以如果你可以最小化关闭和打开窗口，那就去做吧。但是，有时它会无缘无故地失败。

如果您真的会使用节省的时间，那就去吧，记录所有失败的测试并在第一轮之后再次运行它们 - 这次一次一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:34:55.360

您也可以根据您的最终测试目标来解决这个问题，方法是不使用带有鼠标移动单击的 Action 类，而是使用 WebDriver findBy-click 方法或 Javascript 执行器方法。当同时运行多个窗口时，它可能不会那么有争议。如果 Action 类在定义鼠标移动时完全使用本机调用，例如“移动到点”，然后一个浏览器在另一个浏览器的顶部，那么我猜移动点可能会被另一个窗口掩盖. 我真的不确定这一点，只是给你另一个想法尝试。

# php - Why is my included file executed again when isset(POST['submit'])?

> ID：10004498
> 
> 赞同：0
> 
> 时间：2012-04-04T03:22:00.010
> 
> 标签：php, arrays, shuffle

My included file (include.php) is this:

```
<?php
$myarray=(a,b,c);
shuffle($myarray);
?> 
```

My main php file is this:

```
include('include.php');

if isset($_POST['submit_button']){
      echo "Button was clicked";
      echo $myarray;
      }
else {
     echo "Not clicked."; 
     echo $myarray;
     }
?>

<form method='POST'><input type='submit' name='submit_button'></form> 
```

Why are the elements of `$myarray` displayed in a different order after I clicked the button? Isn't it shuffled only once?

How can I prevent the shuffle from being executed more than one time? (so that I can display the elements of myarray in the same order, before and after the button was clicked)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T03:36:14.840

您的 PHP 文件会根据每个请求进行解释。正如您现在所拥有的那样，您的系统中没有内存，因此您的文件无法“记住”数组已经被洗牌。此外，如果您将数组洗牌一次，然后再次加载页面，并且设法**不**洗牌，则数组将是（a，b，c），因为变量被初始化为（a，b，c）并且从不洗牌。

做你想做的事，如果我理解正确，你可以使用会话。

```
$myarray=(a,b,c);

if (!isset($_SESSION['shuffled'])) {
    shuffle($myarray);
    $_SESSION['shuffled'] = $myarray;
} else {
    $myarray = $_SESSION['shuffled'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T03:31:53.327

发生这种情况是因为每次加载页面时，都会包含该文件，这也会再次对数组进行洗牌。

尝试使用`serialize()`然后按您想要的顺序发布数组。检索它使用`unserialize()`

[http://www.php.net/manual/en/function.serialize.php](http://www.php.net/manual/en/function.serialize.php)

# c++ - Erorr: no operator ">>" matches these arguments

> ID：10004499
> 
> 赞同：-1
> 
> 时间：2012-04-04T03:22:00.027
> 
> 标签：c++, cin

```
int main()
{ 
char* NamePointer = new char;

std::cout << "Enter the file you want to edit (MUST BE IN THE PROJECT'S DIRECTORY): ";
std::cin >> &NamePointer;

const char* FileName = NamePointer;
delete &NamePointer;

return 0;
} 
```

This returns me the error in the title:

```
std::cin >> &NamePointer; 
```

Any ideas? This is probably something simple I'm missing, but when I looked it up I didn't get my answer.

~~JUST FIXED IT, SORRY FOR BOTHERING! I took out the "&" in "&NamePointer".~~

Yeah I just found out another way of doing this using c_str(). Sorry!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T03:25:24.503

你应该有：

```
std::cin >> NamePointer; 
```

此外，您只是分配一个字符的内存，可能您的意思是：

```
char* NamePointer = new char[MAX_SIZE]; 
```

并将其分解为：

```
delete []NamePointer; 
```

请注意，执行此操作的 C++ 方法是简单地使用[`std::string`](http://www.cplusplus.com/reference/string/string/)which 来解决您使用时遇到的缓冲区溢出问题`char*`：

```
std::string Name;
std::cin >> Name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T03:26:42.397

这里不需要运营商的*地址。*简单地：

```
std::cin >> NamePointer; 
```

* * *

我注意到的其他一些事情：

```
char* NamePointer = new char; 
```

您可能需要更多的空间而不仅仅是一个字符。一个简单的开始可能是一个大的静态分配：

```
char NamePointer[1024]; 
```

在这种情况下，您可以省略最后的`delete`语句（顺便说一下，它也不使用运算符的*地址*）。

# java - How to get OWL file from opencyc?

> ID：10004501
> 
> 赞同：1
> 
> 时间：2012-04-04T03:22:10.017
> 
> 标签：java, ontology, owl, protege

I want to get some domain of knowledge in opencyc KB in OWL form.. Assume we want to take fruit. Then how can I take this knowledge as OWL form? Because I want to load that file into protege as OWL ontology. So how can I do this? I already downloaded OWL files from [opencyc site](http://opencyc.org/downloads) and I tried to load into protege. But I got error as at edu.stanford.smi.protegex.owl.jena.parser.ProtegeOWLParser$1.invokeARP(Unknown Source) Plz help me...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:46:10.803

这些文件是用 gzip 压缩的（因此是`.gz`扩展名）。下载后，您需要解压缩它们。我猜您使用的是 Windows：如果您使用[cygwin](http://cygwin.com/) ，您可以使用 cygwin 中的 gzip 实用程序，或者下载[7zip](http://sourceforge.net/projects/sevenzip/)之类的实用程序。

# objective-c - Setting Bool in different classes

> ID：10004502
> 
> 赞同：1
> 
> 时间：2012-04-04T03:22:36.757
> 
> 标签：objective-c, xcode, cocoa

I have the following code where after a bool is true I want to add a drawing to my rect. here is the code I have but for some reason it is either not setting the bool or calling the setNeedsDisplay. Am I referencing to the other class properly? thanks

//in AppController.m

```
-(IBAction)colorToggle:(id)sender
{
    if ([colorFilter state] == NSOnState) 
    {
        CutoutView *theView = [[CutoutView alloc] init];
        [theView setFilterEnabled:YES];

    } 
```

}

//in cutoutView.m

```
- (void)drawRect:(NSRect)dirtyRect
{
    [[[NSColor blackColor]colorWithAlphaComponent:0.9]set];
    NSRectFill(dirtyRect); 

    //this is what i want to be drawn when my bool is true and update the drawRect        
    if (filterEnabled == YES) {
        NSRectFillUsingOperation(NSMakeRect(100, 100, 300, 300), NSCompositeClear);
        [self update];
    }
}

-(void)update
{
    [self setNeedsDisplay:YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T04:02:32.923

好的，你知道不是每个 UILabel 都是一样的吗？就像，您可以从视图中删除一个 UILabel 而不让所有其他 UILabel 也消失？好吧，您的 CutoutView 也是如此。当您在那里编写`CutoutView *theView = [[CutoutView alloc] init];`时，这会创建一个不会在任何地方显示的**新**CutoutView。您需要与*现有的*CutoutView 交谈（可能通过连接插座，但有许多完全有效的设计可以实现此目标）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T03:44:16.103

您忘记调用该`drawRect:`方法，它应该如下所示：

```
CutoutView *theView = [[CutoutView alloc] init];
[theView setFilterEnabled:YES];
[theView setNeedsDisplay]; 
```

从[文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)：

> 当您的视图的实际内容发生变化时，您有责任通知系统您的视图需要重绘。为此，您可以调用视图的 setNeedsDisplay 或 setNeedsDisplayInRect: 方法。

# python - Python-需要把它变成一个循环，让它看起来像我的照片吗？

> ID：10004504
> 
> 赞同：1
> 
> 时间：2012-04-04T03:22:45.270
> 
> 标签：python, loops

我需要使用循环编写这个程序

[http://imgur.com/CGRMn](http://imgur.com/CGRMn)

这是我到目前为止所拥有的，但我的程序必须看起来和图片一样？？？

```
def main():

    sum=0.0
    for i in range(1,6):
        x,y=eval(input("Please enter length and width of room:"))
        sf=(x*y)
        sum=sum+sf
        print("The total square footage is",sum)

main() 
```

感谢您的帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T03:26:24.723

只需将缩进放在打印语句上。

```
sum=0.0
for i in range(1,6):
    x,y=eval(input("Please enter length and width of room:"))
    sf=(x*y)
    sum=sum+sf
print("The total square footage is",sum) 
```

**编辑：**

这是python中的一种常用技术，您可以使用它来实现您想要的：

```
sum=0.0
for i in range(1,6):
    x,y=eval(input("Please enter length and width of room %i:" % i ))
    sf=(x*y)
    sum=sum+sf
print("The total square footage is %i" % sum ) 
```

我在这里做的是在字符串中间放置一个通配符，然后传递参数。'%i' 告诉 % 运算符您要插入一个整数。如果要添加字符串，也可以输入 '%s'。还有几个你可以看看。这是控制台的另一个示例：

```
>>> user_name = 'mauricio'
>>> sum = 42
>>> line_to_print = 'Hello user %s, your sum is %i' % (user_name, sum)
>>> print(line_to_print)
Hello mauricio, your sum is 42 
```

# python - Interactive Brokers automated trading

> ID：10004505
> 
> 赞同：6
> 
> 时间：2012-04-04T03:22:48.450
> 
> 标签：python, interactive-brokers

I've tried to setup Interactive Broker's C++ API in Visual Studio 2008, but I know very limited C++ and I keep getiing errors. :<

1) Is there any way to use some kind of light scripting language to connect to Interactive Brokers and make trade. F.E.

```
login.('username','password')
>>>'Connected'
makeTrade('GOOG','550')
>>>'Trade Completed' 
```

Something light like Python would be just fine, and yes ***I have looked into IBPY***, but I do not understand how the java2python system works.

2) How did you setup your automated system, or how would you set up your automated trading system with Interactive Brokers?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T05:50:07.053

“DDE for Excel”API 是迄今为止最容易启动和运行的 API，IB 提供了一个示例程序，其中包含有关如何使其工作的说明。 [https://interactivebrokers.github.io/tws-api/excel_apis.html](https://interactivebrokers.github.io/tws-api/excel_apis.html)

* * *

现在有许多选项可用于使用[TWS API](https://interactivebrokers.github.io/tws-api/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-20T03:16:29.877

虽然没有官方支持的 Python API，但我已经成功使用 ibpy 几个月了，而且非常简单。无需关心 java2python 等。我所要做的就是在某处克隆 ibpy：

```
git clone https://github.com/blampe/IbPy 
```

从那里安装：

```
cd IbPy
python setup.py install 
```

瞧，它完成了。我最初是从[http://www.quantstart.com/articles/Using-Python-IBPy-and-the-Interactive-Brokers-API-to-Automate-Trades得到的](http://www.quantstart.com/articles/Using-Python-IBPy-and-the-Interactive-Brokers-API-to-Automate-Trades)

安装后，python 中的接口与 Java API 接口几乎相同：[IB API pdf](http://www.interactivebrokers.com/download/newMark/PDFs/APIprintable.pdf)

我发现查看 IB API 中包含的 TWS 测试客户端 Java 代码很有用。

**编辑：** IB 现在拥有自己的 python API 已经有一段时间了，所以除非你在 python 2 上，否则不再需要 ibPy。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-17T22:13:44.277

或者您可以将 R 与 IBrokers 包一起使用。示例：

```
tws <- twsConnect()
id <- reqIds(tws)
placeOrder(tws, twsSTK("AAPL"), twsOrder(id))
cancelOrder(id) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-05T16:24:23.643

[使用TWS API](https://interactivebrokers.github.io/tws-api/index.html)进行算法交易有很多选择。

选择以下任何一项，包括[Excel](https://interactivebrokers.github.io/tws-api/excel_apis.html)：

1.  `C#`
2.  `C++`
3.  `VB`
4.  `Java`
5.  `Python`
6.  `Excel`

# git - 你如何使用 Git 从 repo 中检索一个（或几个）文件？

> ID：10004508
> 
> 赞同：1
> 
> 时间：2012-04-04T03:22:56.457
> 
> 标签：git, github, repository

> **可能重复：**
> [使用 Git 和 Mercurial 进行部分克隆](https://stackoverflow.com/questions/2586824/partial-clone-with-git-and-mercurial)

我切换到我希望将我的 repo 文件复制到的特定目录，然后尝试以下操作：

```
 git clone git@github.com:path/to/file.java 
```

但它给了我错误：找不到存储库

谁能告诉我发生了什么事，什么是正确的做法？（一点背景不会伤害！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:46:33.150

你可能想研究一下我相信在 Git 1.7 中实现的称为稀疏检出的东西。在此之前，我认为 git 不允许您这样做，尽管在 github 上您始终可以通过打开文件并保存来从其 Web 界面复制单个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:18:30.953

git 在存储库级别工作，而不是在文件级别（与 CVS/SVN 不同）。

因此，如果您克隆，您通常会克隆整个 repo - 并且更改被跟踪为存储库内容更改 - 而不是简单的文件更改。

# c++ - 为什么字符串文字是左值，而所有其他文字都是右值？

> ID：10004511
> 
> 赞同：72
> 
> 时间：2012-04-04T03:23:13.490
> 
> 标签：c++, c, literals, string-literals

**C++03 5.1 主要表达式 §2**说：

> 文字是主要的表达方式。它的类型取决于它的形式（2.13）。字符串文字是左值；所有其他文字都是右值。

同样，**C99 6.5.1 §4**说：

> 字符串文字是主要表达式。它是一个左值，其类型详见 6.4.5。

这背后的原因是什么？

据我了解，字符串文字是对象，而所有其他文字都不是。l 值总是指一个对象。

但是问题是为什么字符串文字是对象而所有其他文字都不是？在我看来，这个理由更像是鸡蛋或鸡肉的问题。

我知道这个问题的答案可能与硬件架构有关，而不是与 C/C++ 作为编程语言有关，但我想听听同样的。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-04T03:34:03.607

字符串字面量是具有数组类型的字面量，在 C 中，数组类型除了作为左值之外，无法在表达式中存在。可以将字符串文字指定为具有指向字符串“内容”的指针类型（而不是通常衰减为指针的数组类型），但这会使它们的用处不大；特别是，`sizeof`运算符不能应用于它们。

请注意，C99 引入了复合文字，它们也是左值，因此让文字成为左值不再是一个特殊的例外；它更接近于常态。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-06T01:40:15.417

字符串字面量是*数组*- 本质上不可预测大小的对象（即用户定义的并且可能很大的大小）。在一般情况下，除了作为内存中的对象（即`lvalues`. 在 C99 中，这也适用于*复合文字*，它们也是`lvalues`.

任何人为地隐藏字符串文字处于语言级别这一事实的尝试`lvalues`都会产生大量完全不必要的困难，因为使用指针指向字符串文字的能力以及作为数组访问它的能力至关重要它的左值性在语言级别上是可见的。

同时，标量类型的文字具有固定的编译时大小。同时，这些文字很可能直接嵌入到给定硬件架构上的机器命令中。例如，当您编写类似`i = i * 5 + 2`的内容时，文字值`5`并`2`成为生成的机器代码的显式（甚至隐式）部分。它们不存在，也不需要作为数据存储中的独立位置存在。`5`存储值和`2`数据存储器根本没有意义。

还值得注意的是，在许多（如果不是大多数或全部）硬件架构上，浮点文字实际上是作为“隐藏的”实现的`lvalues`（即使该语言没有将它们公开）。在 x86 等平台上，来自浮点组的机器命令不支持嵌入式立即操作数。这意味着几乎每个浮点文字都必须由编译器存储在数据存储器中（并从中读取）。例如，当你写类似的东西时，`i = i * 5.5 + 2.1`它会被翻译成类似的东西

```
const double unnamed_double_5_5 = 5.5;
const double unnamed_double_2_1 = 2.1;
i = i * unnamed_double_5_5 + unnamed_double_2_1; 
```

换句话说，`floating-point literals`通常最终在`lvalues`内部变得“非官方”。然而，语言规范没有尝试公开这个实现细节是完全合理的。在语言层面，`arithmetic literals`更有意义的是`rvalues`。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-04T08:00:25.057

C++ 中的 An`lvalue`并不总是指代对象。它也可以引用一个函数。此外，对象不必由 引用`lvalues`。它们可以由 引用`rvalues`，包括数组（在 C++ 和 C 中）。但是，在旧 C89 中，数组到指针的转换不适用于`rvalues`数组。

现在，an`rvalue`表示没有、有限或即将过期。然而，字符串文字存在于整个程序中。

所以`string literals`存在`lvalues`是完全正确的。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-04-04T07:38:33.360

我猜最初的动机主要是务实的：字符串文字必须驻留在内存中并具有地址。字符串字面量的类型是数组类型（`char[]`在 C 中，`char const[]`在 C++ 中），并且数组类型在大多数上下文中转换为指针。该语言可以找到其他方法来定义它（例如，字符串文字可以以指针类型开头，并具有关于它所指向的特殊规则），但仅将文字设为左值可能是定义具体内容的最简单方法需要。

# ruby - 路径名的正则表达式

> ID：10004520
> 
> 赞同：1
> 
> 时间：2012-04-04T03:24:43.383
> 
> 标签：ruby, regex

我想要一些与路径匹配的东西，例如没有域名的 Web URL 或 Linux 目录中的东西/like/this/and/allows-dashes

所以换句话说，允许的字符是数字、字母、破折号和斜线。第一个和最后一个字符不能是破折号或斜线。

我能得到的最好的就是这个

```
^[a-z0-9]+[a-z0-9(\/)(-)]*[a-z0-9]+$ 
```

但它失败了

```
a/b-c/d 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T03:48:28.063

你也需要逃避你的 - 。请尝试以下

```
^[a-z0-9]+[a-z0-9(\/)(\-)]*[a-z0-9]+$ 
```

# java - java sockets - 测量发送和响应所需的时间

> ID：10004522
> 
> 赞同：1
> 
> 时间：2012-04-04T03:24:53.177
> 
> 标签：java, sockets

我有一个 java 程序，当用户按下按钮时，它会向服务器发送一个 udp 数据包。客户端然后等待来自服务器的响应，并旨在记录从发送 udp 数据包到收到响应之间的时间（以毫秒为单位）。

我遇到了一个问题，即时间似乎不准确。它在大多数情况下都能正常工作，给出大约 160 毫秒的值（这是我所期望的）。然而，它有时会进入一个给出值太低（即低于 5 毫秒）的阶段。

我知道消息正在发送，因为我可以看到结果出现在服务器上（而且延迟肯定超过 1 毫秒）。如果我多次向按钮发送垃圾邮件，似乎会出现此问题。

我的代码如下：

```
public String sendMessage(String message){
    long startTime = System.currentTimeMillis();
    sendData = message.getBytes();
    try{
        DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, IPAddress, port);
        clientSocket.send(sendPacket);
        DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
        clientSocket.receive(receivePacket);
        String returnString = new String(receivePacket.getData());
       //arg1 message, arg2 - transmit time
        addConsoleLine(returnString, System.currentTimeMillis() - startTime);
        return returnString;
    }catch (Exception e){
        return "error";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:41:03.030

您的传输和接收可能重叠（或者是因为您的 sendMessage() 正在从多个线程调用，或者一个数据包被丢弃。

即，您发送当前请求，但收到来自先前请求的响应，这会产生响应时间非常快的错觉。

# vb.net - NAnt vbc 构建错误加载自定义 DLL 参考

> ID：10004524
> 
> 赞同：0
> 
> 时间：2012-04-04T03:25:18.620
> 
> 标签：vb.net, nant

我在尝试让 NAnt 编译我的项目时遇到了麻烦，该项目由一个 Windows 窗体应用程序、一个实用程序库 (DLL) 和一个数据类库 (DLL) 组成。问题是在编译应用程序之前，我无法让主 WinEXE 应用程序引用作为第二步编译的数据类库。

这是我第一次涉足 NAnt（我决定在 MSBuild 之前尝试一下）。我正在使用 NAnt，因为我们想要使用的新 CI 服务器支持它。

在我上传构建配置文件并在服务器上尝试之前，我想我会在安装了 VS2005、VS2008 和 VS2010 的本地 PC 上尝试。服务器没有安装任何这些，只有各种 .NET 框架和 NAnt 二进制分发。

这是构建文件：

```
<?xml version="1.0"?>
<project name="APP3" default="build" basedir="..\">
<description>APP3 build</description>
<property name="nant.settings.currentframework" value="net-3.5" />
<property name="projectversion" value="3.8.0" />
<property name="project.config" value="debug" />

<target name="init">
    <call target="${project.config}" />
</target>

<target name="debug">
    <property name="project.config" value="debug" />
    <property name="build.debug" value="true" />
    <property name="basedir.suffix" value="-debug" />
</target>

<target name="release">
    <property name="project.config" value="release" />
    <property name="build.debug" value="false" />
    <property name="basedir.suffix" value="-release" />
</target>

<target name="clean">
    <delete file="${project::get-base-directory()}${project::get-name()}_${projectversion}${basedir.suffix}\APP3_DataClasses.dll" failonerror="false" />
    <delete file="${project::get-base-directory()}${project::get-name()}_${projectversion}${basedir.suffix}\classUtilities.dll" failonerror="false" />
    <delete file="${project::get-base-directory()}${project::get-name()}_${projectversion}${basedir.suffix}\APP3.exe" failonerror="false" />
</target>

<target name="build-classutilities" depends="init, clean" description="compiles the APP3 utilities class">
    <property name="build.dir" value="${project::get-base-directory()}/${project::get-name()}_${projectversion}${basedir.suffix}"/>
    <mkdir dir="${build.dir}" />
    <vbc target="library" output="${build.dir}/classUtilities.dll" debug="${build.debug}" rootnamespace="classUtilities">
        <imports>
            <import namespace="Microsoft.VisualBasic" />
            <import namespace="System" />
            <import namespace="System.Collections" />
            <import namespace="System.Collections.Generic" />
            <import namespace="System.Data" />
            <import namespace="System.Diagnostics" />
            <import namespace="System.Linq" />
            <import namespace="System.Xml.Linq" />
        </imports>
        <sources>
            <include name="${project::get-base-directory()}/classUtilities/Utilities.vb" />
        </sources>
        <resources>
            <include name="**/*.resources" />
        </resources>
        <references>
            <include name="System.dll" />
            <include name="System.Data.dll" />
            <include name="System.Core.dll" />
            <include name="System.Xml.dll" />
            <include name="System.Xml.Linq.dll" />
        </references>
    </vbc>
</target>

<target name="build-dataclasses" depends="build-classutilities" description="compiles the APP3 data classes">
    <property name="build.dir" value="${project::get-base-directory()}/${project::get-name()}_${projectversion}${basedir.suffix}"/>
    <mkdir dir="${build.dir}" />
    <vbc target="library" output="${build.dir}/APP3_DataClasses.dll" debug="${build.debug}" rootnamespace="APP3_DataClasses">
        <imports>
            <import namespace="Microsoft.VisualBasic" />
            <import namespace="System" />
            <import namespace="System.Collections" />
            <import namespace="System.Collections.Generic" />
            <import namespace="System.Configuration" />
            <import namespace="System.Data" />
            <import namespace="System.Diagnostics" />
            <import namespace="System.Xml" />
            <import namespace="System.Xml.Linq" />
            <import namespace="Iesi.Collections" />
            <!--<import namespace="NHibernate" />-->
        </imports>
        <sources>
            <include name="${project::get-base-directory()}/APP3_DataClasses/**/*.vb" />
        </sources>
        <resources>
            <include name="**/*.resources" />
            <include name="**/*.hbm.xml" />
        </resources>
        <references>
            <include name="System.dll" />
            <include name="System.Core.dll" />
            <include name="System.Xml.dll" />
            <include name="System.Xml.Linq.dll" />
            <include name="C:\Dev\NHibernate-2.1.2\Required_Bins\Iesi.Collections.dll" />
        </references>
    </vbc>
</target>

<target name="build" description="compiles the source code" depends="build-dataclasses">
    <property name="build.dir" value="${project::get-base-directory()}/${project::get-name()}_${projectversion}${basedir.suffix}"/>
    <mkdir dir="${build.dir}" />
    <vbc target="winexe" output="${build.dir}/APP3.exe" debug="${build.debug}" rootnamespace="APP3" main="APP3.My.MyApplication">
        <imports>
            <import namespace="APP3_DataClasses"/>
            <import namespace="classUtilities"/>
            <import namespace="Iesi.Collections"/>
            <import namespace="log4net"/>
            <import namespace="LumenWorks.Framework.IO.Csv" />
            <import namespace="Microsoft.Office.Interop.Word" />
            <import namespace="Microsoft.VisualBasic" />
            <import namespace="NHibernate" />
            <import namespace="System" />
            <import namespace="System.Collections" />
            <import namespace="System.Collections.Generic" />
            <import namespace="System.Configuration" />
            <import namespace="System.Data" />
            <import namespace="System.Data.SqlClient" />
            <import namespace="System.Diagnostics" />
            <import namespace="System.Drawing" />
            <import namespace="System.Windows.Forms" />
            <import namespace="System.IO" />
            <import namespace="System.Xml" />
        </imports>
        <sources>
            <include name="${project::get-base-directory()}/${project::get-name()}/**/*.vb" />
        </sources>
        <resources>
            <include name="**/*.resources" />
        </resources>
        <references>
            <include name="System.dll" />
            <include name="System.Data.dll" />
            <include name="System.Windows.Forms.dll" />
            <include name="System.configuration.dll" />
            <include name="System.Drawing.dll" />
            <include name="${build.dir}APP3_DataClasses.dll" />
            <include name="${build.dir}/classUtilities.dll" />
            <include name="System.Xml.dll" />
            <include name="C:\Dev\NHibernate-2.1.2\Required_Bins\Iesi.Collections.dll" />
            <include name="C:\Dev\NHibernate-2.1.2\Required_Bins\NHibernate.dll" />
            <include name="C:\Dev\NHibernate-2.1.2\Required_Bins\log4net.dll" />
            <include name="C:\Dev\LumenWorks.Framework\LumenWorks.Framework.3.8.1\LumenWorks.Framework.IO.dll" />
            <include name="C:\Program Files (x86)\Microsoft Visual Studio 9.0\Visual Studio Tools for Office\PIA\Office11\Microsoft.Office.Interop.Word.dll" />
        </references>
    </vbc>
</target> 
```

这是第一批输出，它持续了一段时间，但你从前几个错误中得到了要点：

```
NAnt 0.91 (Build 0.91.4312.0; release; 22/10/2011)
Copyright (C) 2001-2011 Gerry Shaw
http://nant.sourceforge.net

Buildfile: file:///c:/Projects/Company/Windows Forms Applications/APP3-trunk/APP3/default.build
Target framework: Microsoft .NET Framework 4.0
Target(s) specified: build

[property] Target framework changed to "Microsoft .NET Framework 3.5".

init:

debug:

clean:

[delete] Deleting file c:\Projects\Company\Windows Forms Applications\APP3-trunk\APP3_3.8.0-debug\APP3_DataClasses.dll.
[delete] Deleting file c:\Projects\Company\Windows Forms Applications\APP3-trunk\APP3_3.8.0-debug\classUtilities.dll.

build-classutilities:

[vbc] Compiling 1 files to 'c:\Projects\Company\Windows Forms Applications\APP3-trunk\APP3_3.8.0-debug\classUtilities.dll'.

build-dataclasses:

[vbc] Compiling 24 files to 'c:\Projects\Company\Windows Forms Applications\APP3-trunk\APP3_3.8.0-debug\APP3_DataClasses.dll'.

build:

[vbc] Compiling 45 files to 'c:\Projects\Company\Windows Forms Applications\APP3-trunk\APP3_3.8.0-debug\APP3.exe'.
[vbc] vbc : error BC30420: 'Sub Main' was not found in 'APP3.My.MyApplication'.
[vbc] vbc : warning BC40057: Namespace or type specified in the project-level Imports 'APP3_DataClasses' doesn't contain any public member or cannot be found. Make sure the namespace or the type is defined and contains at least one public member. Make sure the imported element name doesn't use any aliases.
[vbc] c:\Projects\Company\Windows Forms Applications\APP3-trunk\APP3\frmMain.vb(19) : error BC30002: Type 'Company' is not defined.
[vbc]
[vbc] c:\Projects\Company\Windows Forms Applications\APP3-trunk\APP3\frmMain.vb(49) : error BC30002: Type 'APP3_DataClasses.DataDictionary' is not defined.
[vbc]
[vbc]             APP3CompanyTypes = tQuery.List(Of APP3_DataClasses.DataDictionary)()
[vbc]                                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[vbc] c:\Projects\Company\Windows Forms Applications\APP3-trunk\APP3\frmMain.vb(72) : error BC30002: Type 'APP3_DataClasses.Company' is not defined.
[vbc]
[vbc]             APP3Customers = tQuery.List(Of APP3_DataClasses.Company)()
[vbc]                                            ~~~~~~~~~~~~~~~~~~~~~~~~
[vbc] c:\Projects\Company\Windows Forms Applications\APP3-trunk\APP3\frmMain.vb(133) : error BC30002: Type 'APP3_DataClasses.DataDictionary' is not defined.
[vbc]
[vbc]                 Dim tType As APP3_DataClasses.DataDictionary 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T04:43:41.950

解决了。好的，在尝试了半天不同的事情之后，似乎正斜杠是问题所在，或者更确切地说是缺少正斜杠。以下行不正确：

```
<include name="${build.dir}APP3_DataClasses.dll" /> 
```

这是正确的行：

```
<include name="${build.dir}/APP3_DataClasses.dll" /> 
```

Stackoverflow 再次进行救援。如果我不发布这个，我就不会更快地找到问题:-) 我现在还有很多其他错误，但至少这个问题已经解决

# iphone - 在 NavigationBar 的 titleview 中添加按钮，无需重复代码

> ID：10004525
> 
> 赞同：3
> 
> 时间：2012-04-04T03:25:21.547
> 
> 标签：iphone, uinavigationbar

为了提供一些背景知识，我正在制作一个基于 UINavigationControlled 的博客类型应用程序（我想它最类似于 iPhone facebook 应用程序）。无论当前处于活动状态的视图如何，NavigationBar 都会在其标题区域显示一些按钮，例如好友请求和活动通知。与 facebook 应用程序大致相同，单击这些按钮将创建一个弹出视图。

目前，我正在以一种我觉得非常低效的方式做事。对于加载的每个视图，我都在重新创建按钮并将它们添加到导航栏。我的代码如下：

```
//Setup the custom middle buttons
UIView *container = [[UIView alloc] init];
container.frame = CGRectMake(0, 0, 80, 44);

// create a button and add it to the container
UIButton *notificationButton = [UIButton buttonWithType:UIButtonTypeCustom];
notificationButton.frame = CGRectMake(0, 0, 35, 44);
[notificationButton addTarget:self 
                       action:@selector(showNotifications:) 
             forControlEvents:UIControlEventTouchUpInside];
[container addSubview:notificationButton];

// add another button to the container
UIButton *friendActivityButton = [UIButton buttonWithType:UIButtonTypeCustom];
friendActivityButton.frame = CGRectMake(45, 0, 35, 44);
[friendActivityButton addTarget:self 
                         action:@selector(showFriendActivity:) 
               forControlEvents:UIControlEventTouchUpInside];
[container addSubview:friendActivityButton];

// Set the titleView to the container view
[self.navigationItem setTitleView:container];
[container release]; 
```

由于我的应用程序有多个视图并且导航栏始终可见，因此继续重新创建按钮，将它们添加到容器视图，然后将该视图添加到导航控制器的 titleView 似乎很愚蠢。

实现相同效果的更好方法是什么？我正在研究子类化或为 UINavigationBar 创建一个类别，并可能在那里添加容器视图代码。但是，我不知道如何使选择器在这些情况下工作。我也不确定如何使用 UINavigationBar 类别访问 titleView 属性。

对此的任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:28:36.977

我建议只将上面的代码放在一个`UIViewController`类别中（`UIViewController`如果您可以从一个根目录中对所有视图控制器进行子类化，则可以将其放在一个子类中）。然后在 中`viewDidAppear`，只需调用上面的代码（或将其放在超类中`viewDidAppear`）。我认为子类`UINavigationBar`化将比它的价值更麻烦。

如果您真的想避免重新创建按钮（可能没有理由这样做，但如果出于某种原因它对您很重要），您可以将按钮连接到某个单例对象，而不是将它们指向`self`. 单例可以直接处理响应，将消息转发到活动视图控制器，或者发布活动视图控制器可以侦听的通知。

# php - 在页面加载时启动日期选择器代码

> ID：10004527
> 
> 赞同：0
> 
> 时间：2012-04-04T03:25:29.260
> 
> 标签：php, jquery, datepicker

我有两个日期选择器。选择开始日期后，结束日期会在 x 天后通过 php.ini 自动分配。这工作正常，但我有一个问题。完成这项工作的 jQuery 代码，我希望它在页面刷新/加载时也能启动（开始日期保存在 php 会话中）。这是我的代码：

```
$(document).ready(function(){
    $("#txtStartDate").datepicker({
        onSelect: function(){
        var datum = $(this).datepicker('getDate');
        datum.setDate(datum.getDate() + <?php echo $nights; ?>);
        $("#txtEndDate").datepicker("setDate", new Date(datum.getTime()));
        }
    });
    $("#txtEndDate").datepicker();
}); 
```

我正在考虑使用“onSelect，onLoad：funct ...”。

这是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:50:58.090

创建一个单独的函数来设置结束日期，然后在 onLoad 事件上调用它。

```
function setEndDate(){
    var datum = $("#txtStartDate").datepicker('getDate');
    datum.setDate(datum.getDate() + <?php echo $nights; ?>);
    $("#txtEndDate").datepicker("setDate", new Date(datum.getTime()));
} 
```

然后`<body onLoad="setEndDate();">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T03:44:10.170

添加`$("#txtStartDate").trigger('focus');`到最后

```
$("#txtStartDate").datepicker({
    onSelect: function() {
        var datum = $(this).datepicker('getDate'),
            days = 2,
            d = new Date(datum.getTime() + (days * 86400000)),
            month = parseInt(d.getMonth(), 10)+1 < 10 ? '0'+ (parseInt(d.getMonth(), 10)+1) : parseInt(d.getMonth(), 10)+1,
            day = d.getDate() < 10 ? '0'+ d.getDate() : d.getDate(),
            year = d.getFullYear();
        $("#txtEndDate").val(month+'/'+day+'/'+year);
    }
});
$("#txtEndDate").datepicker();
$("#txtStartDate").trigger('focus'); 
```

更新。更改变量 days 以提前几天设置结束日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T04:22:30.623

尝试删除 document.ready 并将其放置在脚本标记中。

```
<script type="text/javascript">

 $("#txtStartDate").datepicker({
        onSelect: function(){
        var datum = $(this).datepicker('getDate');
        datum.setDate(datum.getDate() + <?php echo $nights; ?>);
        $("#txtEndDate").datepicker("setDate", new Date(datum.getTime()));
        }
    });
    $("#txtEndDate").datepicker();

 </script> 
```

如果上述方法不能解决您的问题，请尝试`defaultDate: new Date`在开始日期选择器中设置如下

```
$(function () {
    $.datepicker.setDefaults({
        //Set your common attributes here for both date pickers
    });

    var dateFrom = $('#txtStartDate').datepicker({ defaultDate : new Date,
        onSelect: function (selectedDate) {
            dateTo.datepicker('option', 'defaultDate', dateFrom.datepicker('getDate')+[ x days //add days according to your need]);
        }
    });  

    var dateTo = $('#txtEndDate').datepicker();  
}); 
```

# arduino - Arduino：按钮的莫名行为

> ID：10004528
> 
> 赞同：2
> 
> 时间：2012-04-04T03:25:49.607
> 
> 标签：arduino

我刚刚开始用几个 Teensy 和 Teensy++ 深入研究 arduino 的世界，到目前为止，除了我在尝试从多个按钮获取输入时遇到的极其奇怪的行为外，它已经变得很好。

几乎，我只有一个 teensy++、一个 LCD 显示屏和 3 个按钮。我刚刚读取所有三个按钮的状态的代码，然后将结果发布到屏幕上，0 或 1。再简单不过了，这就是为什么我无法弄清楚它为什么不起作用的原因。

使用一个按钮，上述工作正常。但是，当我将其他按钮之一添加到组合中时，当我按下按钮 1 时，按钮 1 和按钮 2 都变为 1，而不是正常工作。按钮 2 什么也不做。按钮 3 也没有任何作用，甚至在按下任何其他按钮时都不会变为 1。

我的第一个倾向是我笨拙的屁股在板上用焊料桥接了一些痕迹。我抓起一个新的并重新焊接，检查每个触点以确保它是好的，而且确实如此。我没有使用我通常使用的面包板线，而是使用实芯线来确保电线不是问题。我还更换了面包板以防万一出现故障。

同样的问题。我不确定是什么导致它不起作用。我希望你们中的一位大师可以突然出现并告诉我我做错了什么，因为我不明白为什么它根本不起作用

这是我的代码：

```
#include <LiquidCrystal.h>

LiquidCrystal lcd(5,6,7,8,9,10);

void setup(){

pinMode(13,INPUT);pinMode(21,OUTPUT);  //Button one
pinMode(12,INPUT);pinMode(20,OUTPUT);  //Button two
pinMode(11,INPUT);pinMode(19,OUTPUT);  //Button three

digitalWrite(21,HIGH); //Power buttons
digitalWrite(20,HIGH);
digitalWrite(19,HIGH);

lcd.begin(16,4);

}

int resp1 = 3;  //Variables for responses 
int resp2 = 3;
int resp3 = 3;

void loop(){

 resp1 = digitalRead(13); //Read button 1
 resp2 = digitalRead(12); //Read button 2
 resp3 = digitalRead(11); //Read button 3

 //Print it to screen
 lcd.clear();
 lcd.print("Mike's Devboard");
 lcd.setCursor(0,1);
 lcd.print("Btn 1:");
 lcd.print(resp1);
 lcd.print("    Btn 2:");
 lcd.print(resp2);
 lcd.setCursor(0,2);
 lcd.print("Btn 3:");
 lcd.print(resp3);
 delay(48);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:14:44.957

阅读我猜的按钮引脚的注释，您将每个按钮的两侧都连接到芯片的上述引脚而没有其他任何东西（即没有电阻器等）

如果是这样的话

```
pinMode(13,INPUT);pinMode(21,OUTPUT);
digitalWrite(21,HIGH); //Power buttons 
```

只要按钮打开，就会驱动引脚 21 HIGH 和引脚 13 进入高阻抗模式。这意味着输入引脚基本上是“浮动的” - 环境的任何影响都会使其切换。它基本上是随机输入。

如果关闭按钮，输入引脚连接到 HIGH 并提供强 HIGH。

你需要什么：

您需要在*两种*情况下将输入引脚置于定义的“强”状态 - 按钮打开时*和*打开时。

你可以这样做：

```
pinMode(13,INPUT); digitalWrite(13, HIGH);  // input pin with internal pullup enabled
pinMode(21,OUTPUT); digitalWrite(21,LOW);   // other pin to ground 
```

现在按钮的一条腿总是低（在地面上）。当按钮打开时，输入引脚被 CPU 的内部电阻“上拉”至高电平。当按钮关闭时，一些电流从高电平通过电阻器通过按钮流入另一个仍为低电平的引脚。这也将输入引脚驱动为低电平。

有关更多信息，请参阅教程中的[数字引脚](http://arduino.cc/en/Tutorial/DigitalPins)。

一个值得注意的副作用：

您将获得“否定”输入：如果按钮打开，您将读取 HIGH (1)，当按钮关闭时，您将读取 LOW (0)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:57:41.127

请注意，函数 digitalRead() 返回一个 HIGH 或 LOW，它们对应于 TRUE、FALSE 或 1,0 。顺便说一句，不需要重置这些值，它们将在每个循环中重新设置为按钮的状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T06:15:25.183

您必须重置三个变量 resp1、resp2 和 resp3 的值，这些变量用于在 loop() 函数的末尾保持按钮的状态。

# php - 在 mysqli 查询中使用 COUNT 时的最佳比较运算符

> ID：10004530
> 
> 赞同：1
> 
> 时间：2012-04-04T03:26:02.857
> 
> 标签：php, mysql, comparison-operators

进行 mysqli 查询并计算结果，是否有首选的比较运算符和字符串引用？

例如

```
$query = mysqli_query($connect, "SELECT COUNT(`user_id`) FROM `users` WHERE `user_color` = '{$color}'");
$result = mysqli_fetch_assoc($query);
if ($result['COUNT(`user_id`)'] != 0){
 -- then do something.... 
```

我的问题是，使用的含义是什么：

```
if ($result['COUNT(`user_id`)'] != '0'){ 
```

相对

```
if ($result['COUNT(`user_id`)'] != 0){ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:32:21.013

我的偏好是：

```
... "SELECT COUNT(`user_id`) as user_count ..." ...

if ($result['user_count']) 
```

`0`并且`'0'`都`false`在 PHP 中，所以这可以非常简洁地完成您正在寻找的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T03:33:33.857

两者都是一样的，php 处理字符串和数字。

php 解释器的内部功能：如果您将数字与字符串进行比较，或者比较涉及数字字符串，则每个字符串都将转换为数字并以数字方式执行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T03:38:02.527

看看：[比较运算符](http://www.php.net/manual/en/language.operators.comparison.php)

```
<?php

0=='0'; // true
0==='0' // false

0!='0'; // false
0!=='0'; // true

?> 
```

在你的情况下没关系，因为你只使用一个`=`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T05:05:54.550

使用 mysqli_fetch_row 而不是 mysqli_fetch_assoc。

```
$result = mysqli_fetch_row($query);
if ($result[0] != 0){
    // your code
} 
```

# windows-phone-7 - 获取 WP7 的地名列表

> ID：10004537
> 
> 赞同：3
> 
> 时间：2012-04-04T03:27:15.607
> 
> 标签：windows-phone-7

对不起，如果这是一个愚蠢的问题，或者如果它已经被回答，但我对这种事情没有经验，需要一些建议。

基本上，我正在为 Windows Phone 7 设计一个包含 AutoCompleteBox 的应用程序。这个想法是，当用户输入一个地点的名称时（例如，任何地址字符串，无论是完整地址还是街道、城镇、城市等），AutoCompleteBox 将显示可能的建议。

我已经在应用程序上放置了 AutoCompleteBox，其中包含一个示例 ItemsSource，其中仅包含 3 个字符串，分别为“London”、“Birmingham”和“Manchester”。我唯一需要做的就是将应用程序连接到返回地名列表的 Web 服务。

哪些 API 可以做到这一点？哪些最适合用于 Windows Phone 7？如果可能的话，我更喜欢使用一个使用谷歌地图的应用程序，因为这个应用程序是围绕一个网站设计的，它有一个类似的输入框连接到谷歌地图 API。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T05:42:11.207

是的，这可以通过 Google 地图的“自动完成”API 方法来完成：

[https://developers.google.com/maps/documentation/places/autocomplete](https://developers.google.com/maps/documentation/places/autocomplete)

只需使用`WebClient`实例向所需的 URL 发出请求，然后解析返回的 XML（使用 Linq-to-XML）。

# java - 即使使用 return 语句，递归也永远不会结束

> ID：10004540
> 
> 赞同：1
> 
> 时间：2012-04-04T03:27:45.077
> 
> 标签：java, recursion

我可能不明白 return 语句的作用（我以为它只是返回了一个变量并允许我退出循环）。我试图更好地理解递归，但这似乎永远不会退出。

```
import java.util.Arrays;
import java.util.List;

public class main {

    public static void main(String[] args) {
        System.out.println("Starting..");
        List<Integer> list_to_start = Arrays.asList(new Integer[] {0, 0, 0, 0, 0, 0, 0, 0, 0, 0}); 
        String[] name_of_list_to_start = new String[] {"grapes", "Strawberries", "Raspberries", "Blackberries", "Pineapples", "Oranges", "Prunes", "Pears", "cherries", "Peaches", "Apples"};       
        System.out.println(list_to_start.size());
        counter(list_to_start.size(), list_to_start, name_of_list_to_start);
    }

    private static void counter(int length, List<Integer> list_to_start, String[] name_of_list_to_start) {
        // TODO Auto-generated method stub
        if (length == 0) {
            System.out.println("List is empty now");
            for (int i = 0; i>=list_to_start.size(); i++) {
                System.out.println(name_of_list_to_start[i] + " = " + list_to_start.get(i));
            }
            return;
        }   
        Integer x_lenght = (Integer) list_to_start.get(length-1);
        for (int i = 0; i<=5; i++) {
            //System.out.println(i);
            if (length != 0 ) {
                list_to_start.set((length-1), i);
                counter((length-1), list_to_start, name_of_list_to_start);
                list_to_start.set((length-1), 0);
            }
        }
    }
} 
```

基本上我想做的是，使用递归，找出10种不同水果的0-5的所有组合（这只是为了我学习，而不是作业......不是学生）。

知道我做错了什么吗？为什么这个程序没有以 return 语句停止？

更新：如果有人遇到同样的问题，这里是上述代码的工作版本（保留损坏的代码，以便答案有意义）：

```
import java.util.Arrays;
import java.util.List;

public class main {

    public static void main(String[] args) {
        System.out.println("Starting..");
        List<Integer> list_to_start = Arrays.asList(new Integer[] {0, 0, 0, 0, 0, 0, 0, 0, 0, 0}); 
        String[] name_of_list_to_start = new String[] {"grapes", "Strawberries", "Raspberries", "Blackberries", "Pineapples", "Oranges", "Prunes", "Pears", "cherries", "Peaches", "Apples"};       
        System.out.println(list_to_start.size());
        counter(list_to_start.size(), list_to_start, name_of_list_to_start);
    }

    private static void counter(int length, List<Integer> list_to_start, String[] name_of_list_to_start) {
        // TODO Auto-generated method stub
        if (length == 0) {
            //System.out.println("List is empty now");
            for (int i = 0; i<list_to_start.size(); i++) {
                //(name_of_list_to_start[i] + " = " + list_to_start.get(i));
                int k = i +2;
                int y = k -1;
            }
            //System.out.println("********");
            return;
        }   
        Integer x_lenght = (Integer) list_to_start.get(length-1);
        for (int i = 0; i<=5; i++) {
            //System.out.println(i);
            if (length != 0 ) {
                list_to_start.set((length-1), i);
                counter((length-1), list_to_start, name_of_list_to_start);
                list_to_start.set((length-1), 0);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T03:40:13.997

你确定这是一个无限循环，而不仅仅是一个很长的序列吗？

在每个级别上循环 5 次，每次都分支到另一个递归。您有 10 个级别，因此在底层总共有 5^10 个函数调用，或 9,765,625 个 System.out.println 调用！

您的 return 语句不在循环中。return 语句退出了当前的函数调用……但是你这里有超过 1000 万个函数调用，所以它必须返回很多次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T03:42:27.737

当 length = 0 时，您在 for 循环中的条件应该是

```
i<list_to_start.size() 
```

正如莱利所说，您的递归需要进行一些调整。

# eclipse - 如何从清除案例远程客户端服务器导入非 Eclipse 项目？

> ID：10004544
> 
> 赞同：1
> 
> 时间：2012-04-04T03:28:47.557
> 
> 标签：eclipse, version-control, clearcase

从 ccrc 服务器加载项目的正常过程是在本地机器上创建一个基本视图并在 CCRC 服务器中安装一个特定的 VOB。然后我们可以通过 import -> Existing project from workspace 来导入这个 VOB 中的项目。

但问题是我们的一些开发人员正在使用 Eclipse 作为 IDE，并且服务器 vob 上的所有项目都不包含 .project 和 .classpath，如果没有 .project 和 .classpath 文件，Eclipse 无法识别项目。我尝试了一种解决方法，即创建一个与要导入的项目同名的新项目，然后导入 -> 文件系统。这会将项目从本地视图复制到工作区，而不是在源代码管理中。所以这会是入住和退房时的问题。

谁能告诉我正确的为什么要这样做？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:47:50.087

尝试将您创建的简单内容与已存储在 CCRC 中`.project`的一个文件进行比较，以便尝试导入 Eclipse 工作区。`.project`

您应该会看到一个`nature`向项目添加“版本控制”功能的元素。
例如，对于 Rational Method Composer，您会看到：

```
<nature>com.ibm.rmc.library.persistence.distributed.project.MethodPluginProjectNature</nature> 
```

（我不确定 CCRC 项目使用的确切性质）以[这个技术](http://www-01.ibm.com/support/docview.wss?uid=swg21441578)说明为例，其中 .project 被
手动*修改*为如下所示：

 *```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
  <name>new_name</name>
  <comment></comment>
  <projects>
  </projects>
  <buildSpec>
  </buildSpec>
  <natures>
    <nature>com.ibm.rmc.library.persistence.distributed.project.MethodPluginProjectNature</nature>
  </natures>
</projectDescription> 
```*

# dojox.mobile - 使用 href 参数在 dojo 移动内容窗格中不显示 html

> ID：10004546
> 
> 赞同：0
> 
> 时间：2012-04-04T03:28:55.747
> 
> 标签：dojox.mobile

我正在尝试实现 dojox.mobile.ContentPane 来解析来自 html 的内容。但是，根本不显示任何文本。这是我要由 dojox.mobile.ContentPane 解析的 html 文件（文件名：fragment1.html）：

```
<div data-dojo-type='dojox.mobile.RoundRect' shadow='true'>
  HTML fragment example
</div> 
```

这是我的 index.html ：

```
<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"/>
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <title>dojox/mobile Demo</title>
        <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/dojo.js" data-dojo-config="async: true"></script>
        <script type="text/javascript">

            require(["dojox/mobile/parser", "dojox/mobile", "dojox/mobile/deviceTheme", "dojox/mobile/compat", "dojo/domReady!","dojox/mobile/ContentPane", "dojox/mobile/RoundRect", "dojox/mobile/RoundRectCategory"], function(parser) {
                parser.parse();
            });

        </script>
    </head>
    <body>

        <div id="main" data-dojo-type="dojox.mobile.View" data-dojo-props="selected: true">
            <h1 data-dojo-type="dojox.mobile.Heading">Main Menu</h1>
            <ul data-dojo-type="dojox.mobile.RoundRectList">
                <li data-dojo-type="dojox.mobile.ListItem" data-dojo-props="moveTo: 'view-content'">
                    View Content
                </li>               
        </div>

        <div id="view-content" data-dojo-type="dojox.mobile.View">
            <h1 data-dojo-type="dojox.mobile.Heading" data-dojo-props="back:'Main Menu', moveTo:'main'">This is sample content</h1>
            <h2 data-dojo-type="dojox.mobile.RoundRectCategory">Pane1</h2>
            <div id="pane1" data-dojo-type="dojox.mobile.ContentPane" content="&lt;div data-dojo-type='dojox.mobile.RoundRect' shadow='true'&gt;Thank you!&lt;/div&gt;"></div>

            <h2 data-dojo-type="dojox.mobile.RoundRectCategory">Pane2</h2>
            <div id="pane2" data-dojo-type="dojox.mobile.ContentPane" href="fragment1.html"></div>
        </div>

    </body>
</html> 
```

有人有解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:05:11.807

[您的片段看起来与文档](http://livedocs.dojotoolkit.org/dojox/mobile/ContentPane)非常相似！我认为这里发生的事情是您的`parser.parse()`行可能执行得太早了。在 ContentPane 小部件获取外部 HTML 内容并将其插入 DOM 之前。您是否尝试过使用调试器查看加载时 DOM 中的实际内容？控制台中有什么？

无论如何，我认为您可能需要打开`parseOnLoad: true`ContentPane 上的属性（请参阅文档）。看起来这会做你想要的。

# javascript - 防止点击事件传播/冒泡到谷歌地图上

> ID：10004550
> 
> 赞同：1
> 
> 时间：2012-04-04T03:29:40.583
> 
> 标签：javascript, jquery, google-maps, dom-events

我正在使用 Google Maps API V3 的 MarkerClusterer 库将附近的标记分组为单个标记。当用户单击集群标记时，该集群标记旁边会出现一个 div。现在我想让它在点击集群标记后关闭弹出的div，他可以点击地图。

**问题：**在map上添加a后`google.maps.event.addListener(map, 'click', function(){})`，当用户点击cluster marker打开popup div时，没有任何反应！！我猜集群标记上的单击事件导致 div 弹出，但单击事件也传播到地图，触发地图的单击侦听器关闭弹出窗口。

我希望我可以使用 jQuery`event.stopPropagation()`，但我在哪里可以获得`event`对象？

我怎么解决这个问题？如何防止点击通过集群标记传播到地图？希望该解决方案是跨浏览器兼容的。

**JS代码**

```
clusterclickListener = google.maps.event.addListener(mc, "clusterclick", function (cluster) {
    $('#content_container').show();
});

google.maps.event.addListener(map, 'click', function() {
    $('#content_container').hide(); 
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T07:49:21.500

唔。我刚刚测试了这个，一切都对我有用。我唯一的建议是检查您的 div 是否具有正确的 html/css/positioning，因为它可能只是被地图所覆盖。

默认情况下，事件对象可在处理程序函数中访问。如果你想访问事件对象，你可以简单地使用“事件”访问它，所以 event.stopPropagation() 应该可以工作。请记住，如果您将“事件”作为参数传递给处理函数，您将获得一个没有 stopPropagation 方法的自定义 Google 地图点击事件。

# c# - c#异步逻辑到同步调用

> ID：10004551
> 
> 赞同：2
> 
> 时间：2012-04-04T03:29:43.737
> 
> 标签：c#, wpf, visual-studio-2010, .net-4.0

我有这个

```
public Result SomeMethod()
{
    Popup popup = new Popup();

    popup.Closed += PopupClosedHandler;
    popup.ShowPopup();

    // have to return the result from handler.

}

void PopupClosedHandler(EventArgs<PopupEventArgs> args)
{
    Result result = args.Result;
} 
```

我必须阻止`SomeMethod()`调用，直到调用弹出窗口并在处理程序中返回`Result`from `args`。我不知道如何做到这一点，甚至不知道如何寻找它。谁能把我引向正确的方向？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T03:45:30.540

您想使用[EventWaitHandle](http://msdn.microsoft.com/en-us/library/system.threading.eventwaithandle.aspx)。

```
public Result SomeMethod()
{
    _doneHandler = new EventWaitHandle(false, EventResetMode.ManualReset);

    Popup popup = new Popup();

    popup.Closed += PopupClosedHandler;
    popup.ShowPopup();

    // This will wait until it is SET.  You can pass a TimeSpan 
    // so that you do not wait forever.
    _doneHandler.WaitOne();

   // Other stuff after the 'block'

}

private EventWaitHandle _doneHandler;

void PopupClosedHandler(EventArgs<PopupEventArgs> args)
{
    Result result = args.Result;

    _doneHandler.Set();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T03:38:44.013

这是粗略的，但应该给出一般的想法

```
public Result SomeMethod()
{
    Popup popup = new Popup();
    bool called = false;
    Result result = null;
    popup.Closed += (args) => {
        called = true;
        result = args.Result;
    }
    while(!called) ;
    return result;
} 
```

# iphone - 通过应用程序发送电子邮件；任何方式都可以

> ID：10004552
> 
> 赞同：1
> 
> 时间：2012-04-04T03:30:26.573
> 
> 标签：iphone, uitableview, xcode4.2

这是我的 UITableView 单元格的代码：

```
 forKeys:[NSArray arrayWithObjects:@"Title", @"Cells", @"Footer Title", nil]] autorelease];
[tableView1CellData addObject:sectionContainer_3];
NSMutableArray *cells_4 = [[[NSMutableArray alloc] init] autorelease];
NSDictionary *cellContainer_4_1 = [[[NSDictionary alloc] initWithObjects:[NSArray arrayWithObjects:@"Support", @"", @"", @"", @"", @"1", nil] 
```

我必须添加什么，以便当点击单元格时，它会在应用程序中出现 MailView（最好），但我知道最简单的方法是只使用 HTML“mailto”？我是 Objective-C 的新手，但我能够编辑 C 和 C++，所以我认为我可以解决任何问题。提前致谢！

PS从iPhone发布这个（只是想问问题）如果代码没有突出显示，很抱歉，但我试图把它隔开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T03:34:42.913

查看 上的文档[`MFMailComposeViewController`](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)。您可以呈现一个邮件撰写视图，用户将填写并发送邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T03:36:02.670

是的，您*可以*使用`mailto:`URL 的东西......但@jer 的答案是我更愿意自己做的，作为一名开发人员。

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"mailto://info@iosdevelopertips.com"]]; 
```

（上面的详细信息可以在[http://iosdevelopertips.com/cocoa/launching-other-apps-within-an-iphone-application.html](http://iosdevelopertips.com/cocoa/launching-other-apps-within-an-iphone-application.html)找到）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T04:20:09.417

1.添加[消息UI框架](https://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MessageUI_Framework_Reference/_index.html)

2.你应该已经为 UITableView 注册了一个委托。如果需要，请参阅 UITableView 教程。

3.实现以下方法：

```
- (void)tableView: (UITableView *)tableView didSelectRowAtIndexPath: (NSIndexPath *) indexPath { 
    ... 
} 
```

4.在方法内部使用 MFMailComposeViewController 发送电子邮件。示例用法：

```
MFMailComposeViewController* controller = [[MFMailComposeViewController alloc] init];
controller.mailComposeDelegate = self;
[controller setSubject:@"My Subject"];
[controller setMessageBody:@"Hello there." isHTML:NO]; 
if (controller) [self presentModalViewController:controller animated:YES];
[controller release]; 
```

阅读更多：[如何从 iPhone 应用程序发送邮件](https://stackoverflow.com/questions/310946/how-can-i-send-mail-from-an-iphone-application)

[UITableView/UITableViewCell 点击事件响应？](https://stackoverflow.com/questions/1889200/uitableview-uitableviewcell-tap-event-response)

# c# - C# 中的泛型继承类型限制

> ID：10004560
> 
> 赞同：7
> 
> 时间：2012-04-04T03:32:52.703
> 
> 标签：c#, generics, inheritance

我有一个不优雅的解决方案来满足我的需要，但我正在寻找一个优雅的解决方案来替换它。

以下代码无法编译，但代表我想做的事情：

```
interface IWebService
{
}

abstract class BaseClient<T>
{
}

class SpecializedClient : BaseClient<IWebService>
{
}

class ClientHelper<T> where T : BaseClient<*>
{
} 
```

in`T`是`ClientHelper<T>`任何扩展的类`BaseClient`无论传入的模板类型如何。

我发现的不优雅的解决方案是：

```
class ClientHelper<T, U> where T : BaseClient<U> {} 
```

这变得不优雅的原因是我的项目最终得到了一个类似于：

```
class MyClass<A, B, C, D, E, F, G> where A  : MyBaseClass<B, C, D, E, F, G> 
```

一直到采用单一类型的基类。这仅仅是拥有一个复杂的泛型类继承树的成本，还是有一种更简单的方法来做到这一点，同时保留对模板类型的类型限制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T03:42:28.817

如果 BaseClient 的公共接口以任何方式公开它的泛型类型参数，那么您的“不优雅”解决方案就是正确的解决方案。

所以假设`BaseClient`不是你定义的那样**：**

```
abstract class BaseClient<T>
{
   //Something about T here
} 
```

那么 T 是 的公共接口契约的`BaseClient`一部分，因此是 的公共接口契约的一部分`ClientHelper`（同样，假设它`BaseClient<U>`是通过 ClientHelper 的接口公开的）。

另一方面，让我们假设它实际上是您的示例所说的：

```
abstract class BaseClient<T>
{
   //Nothing about T here
} 
```

在这种情况下，您可以这样做：

```
interface IBaseClient
{
   //Nothing about T here
}

abstract class BaseClient<T> : IBaseClient
{ 
    // Whatever you like here
} 
```

并`ClientHelper`变成：

```
class ClientHelper<T> where T : IBaseClient
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T04:32:39.033

一种选择似乎是：

```
interface IWebService
{
}

interface IClient<out T>
{
}

abstract class BaseClient<T> : IClient<T>
{
}

class SpecializedClient : BaseClient<IWebService>
{
}

class ClientHelper<T> where T : IClient<object>
{
} 
```

但是，只有当您`BaseClient`只返回`T`并且从不接受它时，这才有效。

# javascript - 使用 javascript 从 struts.xml 获取结果

> ID：10004561
> 
> 赞同：2
> 
> 时间：2012-04-04T03:33:05.963
> 
> 标签：javascript

我想通过使用 javascript 或 jquery 在 struts.xml 中获得结果。例如，我的 struts.xml 中有这些结果，

```
 <global-results>
        <result name="input">error.jsp</result>
        <result name="syserror">error.jsp</result>
        <result name="login">loginError.jsp</result>
        <result name="error">error.jsp</result>
    </global-results> 
```

我想知道如何使用 javascript 获取结果名称。我需要检测 struts.xml 的返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:03:07.797

我对 Struts 的体验有些有限，但是...

“struts.xml”是一个 Struts 配置文件。我无法想象任何默认功能会将该文件的内容发送到浏览器。根本没有理由（我知道）。

另外，我认为这是您不希望任何决定查看您的页面源代码的人公开获得的信息。您将提供一些对您的应用程序组织的洞察力，而这些洞察力本来不会向公众提供。

但是，如果您真的必须这样做，解决方案可能在于创建某种类型的服务器端资源（JSP、PHP 等），该资源可以使用该文件的内容响应 AJAX 请求。从那里您可以通过 E4X 轻松解析它。

但同样，我真的不认为这是一个特别*好的*主意。

# performance - Redis 内存使用量比数据多 10 倍

> ID：10004565
> 
> 赞同：25
> 
> 时间：2012-04-04T03:33:37.003
> 
> 标签：performance, memory, redis

我正在尝试在 redis 中存储一个单词表。表演很棒。

我的方法是制作一个名为“单词”的集合，并通过“sadd”添加每个新单词。

当添加一个 15.9 MB 且包含大约一百万字的文件时，redis-server 进程会消耗 160 MB 的内存。为什么我使用 10 倍的内存，有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-04-04T09:15:38.050

嗯，这是任何有效数据存储的预期：必须在内存中以指针链接的单元格的动态数据结构对单词进行索引。结构元数据、指针和内存分配器内部碎片的大小是数据比相应平面文件占用更多内存的原因。

Redis 集以哈希表的形式实现。这包括：

*   几何增长的指针数组（2的幂）
*   当增量重新散列处于活动状态时，可能需要第二个数组
*   表示哈希表中条目的单链表单元格（3 个指针，每个条目 24 个字节）
*   Redis 对象包装器（每个值一个）（每个条目 16 个字节）
*   实际数据本身（每个都以 8 字节为前缀表示大小和容量）

以上所有大小都是针对 64 位实现给出的。考虑到内存分配器开销，对于使用 jemalloc 分配器 (>= 2.4) 的 Redis 的最新版本，它导致 Redis 每个集合项（在数据之上）至少占用 64 个字节

Redis 为某些数据类型提供了[内存优化](http://redis.io/topics/memory-optimization)，但它们不涵盖字符串集。如果你真的需要优化集合的内存消耗，你可以使用一些技巧。我不会只为 160 MB 的 RAM 执行此操作，但如果您有更大的数据，这就是您可以执行的操作。

如果您不需要集合的并集、交集、差集功能，则可以将单词存储在哈希对象中。好处是如果哈希对象足够小，Redis 可以使用 zipmap 自动优化哈希对象。在 Redis >= 2.6 中，zipmap 机制已被 ziplist 取代，但想法是一样的：使用可以适合 CPU 缓存的序列化数据结构，以获得性能和紧凑的内存占用。

为了保证散列对象足够小，数据可以按照某种散列机制进行分布。假设你需要存储1M个项目，添加一个单词可以通过以下方式实现：

*   散列它模 10000（在客户端完成）
*   HMSET 单词：[hashnum] [word] 1

而不是存储：

```
words => set{ hi, hello, greetings, howdy, bonjour, salut, ... } 
```

你可以存储：

```
words:H1 => map{ hi:1, greetings:1, bonjour:1, ... }
words:H2 => map{ hello:1, howdy:1, salut:1, ... }
... 
```

要检索或检查单词的存在，它是相同的（散列并使用 HGET 或 HEXISTS）。

使用此策略，只要根据 zipmap 配置（或 Redis >= 2.6 的 ziplist）选择散列的模数，就可以显着节省内存：

```
# Hashes are encoded in a special way (much more memory efficient) when they
# have at max a given number of elements, and the biggest element does not
# exceed a given threshold. You can configure this limits with the following
# configuration directives.
hash-max-zipmap-entries 512
hash-max-zipmap-value 64 
```

请注意：这些参数的名称已随着 Redis >= 2.6 更改。

在这里，1M 个项目的模 10000 意味着每个散列对象有 100 个项目，这将保证所有这些项目都存储为 zipmaps/ziplists。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-26T18:23:28.513

至于我的实验，最好将数据存储在 hash table/dictionary 中。经过大量基准测试后，我遇到的最好的情况是存储在不超过 500 个键的哈希表数据条目中。

我尝试了标准字符串设置/获取，对于 100 万个键/值，大小为 79 MB。如果您有像 1 亿这样的大数字，它将使用大约 8 GB，这是非常巨大的。

我尝试使用哈希存储相同的数据，对于相同的百万键/值，大小越来越小 16 MB。

如果有人需要基准测试代码，请尝试一下，给我发邮件

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-04T08:22:54.103

您是否尝试过持久化数据库（`BGSAVE`例如），关闭服务器并将其备份？由于碎片行为，当它恢复并从保存的 RDB 文件中填充其数据时，它可能会占用更少的内存。

**另外：**你使用什么版本的 Redis？看看[这篇博](http://danmaz74.me/2011/06/19/redis-or-how-i-learned-to-stop-worrying-and-love-the-unstable-version/)文——它说从 2.4 版开始，碎片化已部分解决。

# php - 如何使用下拉列表中的选定项目来填充 php 中的项目？

> ID：10004569
> 
> 赞同：0
> 
> 时间：2012-04-04T03:34:25.973
> 
> 标签：php, mysql

我从我的数据库中的一个表中填充我的下拉列表。我试图抓住用户选择的下拉列表中的选定项目，以便我可以查询数据库以获取与该项目相关的更多信息。

```
<html>
<head></head>
<body>
<br>    
<table id ="topnav" width="1100" border="0" align="center">
    <tr>
    <td colspan="2" style="background-color:#FFA500;">
    <h1><table border="0">
    <tr>
    <th colspan="6"><img src ="../_images/Eu_flags.jpg" border="0" align="top" width="1100" height="180" />
    </th>
    </tr>

<table></h1>
    </td>
    </tr>

    <tr valign="top">
    <td style="background-color:#FFD700;width:150px;text-align:top;">

    <b>Menu</b><br />

    Select the state<br>
    See rank of Universities<br />
    Other information
    </td>
    <td style="background-color:#eeeeee;height:100px;width:940px;text-align:top;">
<?php
        $con = mysql_connect("localhost","root","pasword");
        if (!$con)
        {
            die('Could not connect: ' . mysql_error());
        }

        mysql_select_db("test", $con);
        if (!$con)
        {
            die('Could not connect: ' . mysql_error());
        }

        $result = mysql_query("SELECT lnamestate FROM state" );

        while($row = mysql_fetch_array($result))
        {
        $lnamestate_id = $lnamestate['id'];
        $row_lnamestate=$row['lnamestate'];
        $row_block .= '<OPTION value="'.lnamestate_id.'">'.$row_lnamestate.'</OPTION>';
        }
        mysql_close($con);

?>  
        <label for="row">Select state</label>
        <select name="lnamestateID"><?php echo $row_block; ?></select>

    </td>
    </tr>

    <tr>
    <td colspan="2" style="background-color:#FFA500;text-align:center;">
    </td>
    </tr>
</table>

</table>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:47:57.683

首先，需要在Select Control中添加一个Event Handler，这样当某物被选中时，就可以捕捉到这个事件，可以通过以下方式实现；

```
<select name="ab" onchange="if (this.selectedIndex) doSomething();"> 
```

现在，按住索引可以知道已选择的内容，或者如果您愿意，可以通过索引获取所选项目并将其放入 javascript 中的全局变量中。

如果您在选择项目时加载更多信息，请使用带有 xmlHttpRequest 的 ajax。在许多 Web 应用程序中，当您使用 JQuery 时，它为您提供了许多任务。看看[这里](http://jquery.com/)的 JQuery ，它使用简单并且简化了很多事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T15:36:24.450

您将需要 AJAX：

```
$('select.whatever').change(function(){
   $.ajax({
      url: '/path/to/your/script.php',
      data: 'var='+$(this).val(),
      type: 'POST',
      success: function(data) {
         $('.insert_element').html(data);
      }
   });
}); 
```

这将获取正在更改的元素的值，将其发送到脚本（然后可以查询数据库），并返回特定元素中的数据。

# apache-flex - 覆盖 mxml 组件脚本块中定义的函数实例的函数

> ID：10004572
> 
> 赞同：1
> 
> 时间：2012-04-04T03:34:44.403
> 
> 标签：apache-flex, actionscript

我在 mxml 中定义的组件的脚本块中定义了一个受保护的函数，如下所示：

```
<s:VGroup xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:mx="library://ns.adobe.com/flex/mx" creationComplete="onCreationComplete()">
    <fx:Script>
    <![CDATA[
    protected function onCreationComplete():void {

    }
    ... 
```

是否可以像这样覆盖组件实例中的函数：

```
<gen:CreateObjectFormSubmit id="formSubmit">
     <fx:Script>
     <![CDATA[
          override protected function onCreationComplete():void {
              form=form1;
          }
     ]]>
     </fx:Script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T07:20:17.150

你当然可以。MXML组件是一个类，所以如果你基于组件A创建组件B（B继承自A），那么你可以在B中覆盖A的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:45:46.987

要覆盖任何函数，你想要覆盖的函数应该在你当前类的父类中可用。

```
public class A {
  public function methodtooverride():void{
    trace('in class A');
  }
}

public class B extends A {
  override public function methodtooverride():void{
    trace('in class B');
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T18:17:07.603

请注意您在何处以及如何声明您的超级类。从上面提供的语法来看，您可能正在尝试在 mxml 类中声明一个 <component> 标记，如果是这种情况 - 编译器会将其视为单独的子对象，而不是实际的扩展。

一方面，根级标签不能声明 id（但组件可以 - 这将成为类名），并且您很可能需要显式声明所有 xml 命名空间。

为了使其成为真正的扩展，您的第一个 <VGroup> 类需要命名为 CreateObjectFormSubmit，这将成为您扩展类的根标记。但是有一个问题，如果你从一个 mxml 类扩展，你就不能声明任何额外的子类（由于布局规则，在 mxml 表示法中）。

如果正如您所说的您的类的*实例*，那么您将无法覆盖它，因为 <Script> 标记的函数范围仍将驻留在根级别内。在声明 <component> 标记时，这有时也称为“外部文档”。

在常规 AS 中执行上述操作并没有什么不同，如下所示：

```
class SomethingCool extends UIComponent {
    ...
    public function addButtons():void
    {
         var btn:Button = new Button();
             btn.id = 'formSubmit';
             //can't declare an override of Button here
    }
} 
```

# iphone - 方法访问另一个方法的局部变量

> ID：10004573
> 
> 赞同：0
> 
> 时间：2012-04-04T03:35:03.620
> 
> 标签：iphone, objective-c, xcode, ipad, encapsulation

这里只是一个快速的新手问题。我有一个计算值并将结果存储在双变量中的方法，这个变量也是该方法的局部变量。我还有第二种方法可以单独计算，但这种方法需要第一种中的结果。如何从第一个方法中获取值，同时仍然将该变量隐藏到类的其余部分？下面是我想要达到的一个例子。

```
-(IBAction)methodA{
double answer;
answer = 2 + 3;
}

-(IBAction)methodB{
double answerTimeTwo;
answerTimeTwo = answer * 2;   //Problem arises here as I cannot access "answer"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:39:30.030

除非它们是 UIControl 事件的结果，否则不应将它们装饰为操作。

像这样做：

```
- (double)methodA {
    double answer = 2.0 + 3.0;  // don't really need the stack variable, but it's okay
    return answer;
}

- (double)methodB {
    double answerTimesTwo = [self methodA] * 2.0;
    return answerTimesTwo;
} 
```

# ios - UIView 可以“忽略”界面方向吗？

> ID：10004576
> 
> 赞同：1
> 
> 时间：2012-04-04T03:35:53.997
> 
> 标签：ios, uiview, uiviewcontroller, augmented-reality, uiinterfaceorientation

我有一个`UIView`与它自己的关联`UIViewController`，我希望始终锁定为纵向模式。

想象一下，它想要充当进入 iPhone 内部的窗口。很奇怪，我知道。

该视图将在其顶部具有子视图，或者可能是其他`viewcontrollers`想要适当响应界面旋转的视图。我基本上想将单个视图锁定为纵向，同时让我的实现`shouldAutoRotateToInterfaceOrientation`处理其余部分。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T03:40:00.937

我相信将它添加为主窗口的子视图会阻止它自动旋转（因为只有 UIViewControllers 处理旋转）。调用`[self.view.window addSubview:internalView];`应该完美。（尽管不能保证添加视图时视图的方向）。

# ssl - SSL 连接关闭

> ID：10004580
> 
> 赞同：3
> 
> 时间：2012-04-04T03:36:20.470
> 
> 标签：ssl, netty

我已经解决了这个问题。您需要创建一个 SSLEngine 实例并将其添加到每个客户端请求的处理程序管道中。我通过在 channelConnected 事件中添加处理程序并在断开连接的通道中删除 ssl 处理程序来完成此操作。这确保每个连接的通道都将被添加新的。

下面是处理程序的代码。这是使用 SSL 支持进行持久套接字连接的正确方法吗？

```
package server;
import static org.jboss.netty.buffer.ChannelBuffers.dynamicBuffer;
import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLEngine;
import org.jboss.netty.buffer.ChannelBuffer;
import org.jboss.netty.buffer.ChannelBuffers;
import org.jboss.netty.channel.Channel;
import org.jboss.netty.channel.ChannelFuture;
import org.jboss.netty.channel.ChannelFutureListener;
import org.jboss.netty.channel.ChannelHandlerContext;
import org.jboss.netty.channel.ChannelStateEvent;
import org.jboss.netty.channel.ExceptionEvent;
import org.jboss.netty.channel.MessageEvent;
import org.jboss.netty.channel.SimpleChannelHandler;
import org.jboss.netty.channel.group.ChannelGroup;
import org.jboss.netty.channel.group.DefaultChannelGroup;
import org.jboss.netty.handler.ssl.SslHandler;
import ssl.SslContextFactory;
import ssl.SslKeyStore;

public class ServerHandler extends SimpleChannelHandler {
  private static final String ECHORES   = "0057081082200000000000000400000000000000070612201399966400301";
  @Override
  public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) throws Exception {
System.out.println("Inside ServerHandler.messageReceived");
ChannelBuffer buffer = (ChannelBuffer) e.getMessage();
ChannelBuffer temp = dynamicBuffer();
temp.writeBytes(buffer);
if (temp.readableBytes() >= 4) {
   byte messageLen[] = new byte[4];
   temp.readBytes(messageLen);
   int len = Integer.parseInt(new String(messageLen));
   System.out.println("Length of the message is : " + len);
   if (temp.readableBytes() >= len) {
       byte[] message = new byte[len];
       temp.readBytes(message);
       System.out.println("Input message is : " + new String(message));
       Channel channel = e.getChannel();
       buffer = ChannelBuffers.copiedBuffer(ECHORES.getBytes());
       ChannelFuture future = channel.write(buffer);
       future.addListener(ChannelFutureListener.CLOSE);
   }
}
     }

  @Override
  public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e) throws Exception {
e.getCause().printStackTrace();
Channel channel = e.getChannel();
channel.close();
 }

 @Override
 public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {
String file = "test.jks";
SSLContext sslCtx = SslContextFactory.getServerContext(new SslKeyStore(file));
final SSLEngine sslEngine =sslCtx.createSSLEngine();
sslEngine.setNeedClientAuth(false);
sslEngine.setUseClientMode(false);
final SslHandler sslHandler = new SslHandler(sslEngine);
ctx.getPipeline().addFirst("ssl", sslHandler);
ChannelFuture handshakeFuture = sslHandler.handshake();
handshakeFuture.addListener(new ChannelFutureListener() {

    @Override
    public void operationComplete(ChannelFuture future) throws Exception {
       if (future.isSuccess()) {
         System.out.println("SSL/TLS session established");
         System.out.println("Your session is protected by "+ sslHandler.getEngine().    
                         getSession().getCipherSuite() + " cipher suite.\n");
       } else {
           future.getChannel().close();
       }
    }
});
    }

    @Override
    public void channelDisconnected(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception {
System.out.println("Inside ServerHandler.channelDisconnected");
ctx.getPipeline().remove("ssl");
    }
} 
```

使用带有 ssl 的 netty 时出现以下异常。我的第一笔交易和握手都很顺利。如果我再次向服务器发送新消息，我会收到此异常。

“javax.net.ssl.SSLException：SSLEngine 正在关闭/关闭”

这里可能出了什么问题。如何保持已建立的 TLS/SSL 会话？这个错误发生在 org.jboss.netty.handler.ssl.SslHandler.handshake(SslHandler.java:358)。

目的是让服务器使用持久的 TLS 套接字连接运行，以便客户端可以发送消息。

-TK

# jquery - 如果输入为空，jQuery 输入事件不会触发

> ID：10004581
> 
> 赞同：5
> 
> 时间：2012-04-04T03:36:21.487
> 
> 标签：jquery, javascript-events

我有一个 jQuery 事件处理程序，它对

```
<input id="myId" type="text" /> 
```

元素：

```
$("#myId").bind('input', function (e) {    
        // Do Stuff
    }); 
```

这非常有效，除非输入`#myId`为空（例如，输入框中只有 1 个字符，我用 Backspace 将其删除）。如果输入变为空，则不会触发事件。如果我然后输入一个字符，事件就会触发。

这是一个已知的问题？难道我做错了什么？当输入为空时，有什么方法可以获取事件？

**更新**

输入 Backspace 时，至少在 IE9 中，该事件根本不会触发。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T03:40:38.940

据我所知，“输入”不是您要使用的事件。由于“输入”类似于“更改”，因此当您的字符串接近 0 个字符时，它往往会产生不好的结果，请`keyup`改用

```
$("input#myId").bind('keyup', function (e) {    
    // Do Stuff
}); 
```

# iphone - awakeFromInsert 从未调用过

> ID：10004583
> 
> 赞同：3
> 
> 时间：2012-04-04T03:36:33.683
> 
> 标签：iphone, objective-c, ios, core-data

我有一个使用 Core Data 的应用程序。我在项目中有两个数据模型，我通过合并这两个模型来创建 ManagedObjectContext。这是我这样做的代码：

```
- (NSManagedObjectModel *)managedObjectModel {
    if (__managedObjectModel != nil) {
        return __managedObjectModel;
    }

    NSURL* entityURL = [[NSBundle mainBundle] URLForResource:@"User_data" withExtension:@"momd"];
    NSManagedObjectModel* entityModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:entityURL]; 

    NSURL* whoURL = [[NSBundle mainBundle] URLForResource:@"WHO_data" withExtension:@"momd"];
    NSManagedObjectModel* whoModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:whoURL];

    NSArray* models = [NSArray arrayWithObjects:entityModel, whoModel, nil];
    __managedObjectModel = [NSManagedObjectModel modelByMergingModels:models];

    return __managedObjectModel; 
} 
```

我的实体中的所有属性都不是可选的，当我尝试保存 managedObjectContext 时，我的应用程序崩溃了。我相信这是因为一些属性没有被设置。我已经为父实体覆盖了 awakeFromInsert:：

```
- (void) awakeFromInsert
{
    [super awakeFromInsert];

    NSString* userCFUUID = [[NSUserDefaults standardUserDefaults]objectForKey:@"device_identifier"];

    if ( userCFUUID ) {
        [self cfuuid:userCFUUID];
    } else {
        [NSException raise:NSInvalidArgumentException format:@"Entry: awakeFromInsert: cannot find CFUUID"];
    }

    [self setCreationDate:[NSDate date]]; // the time since Jan 1st 1970 in seconds
    [self setEventDate:[NSDate date]]; 
} 
```

但是 awakeFromInsert: 永远不会被调用。我已经设置了一个断点，并从创建 NSManagedObject 的语句开始执行：

```
LengthEntry *length1 = [NSEntityDescription insertNewObjectForEntityForName:@"LengthEntry" inManagedObjectContext:moc]; 
```

可能相关也可能不相关的附加事实：创建包含问题实体的数据模型后，我使用 Xcode 功能自动创建类。然后我意识到，由于我没有在模型中指定其他方式，xcode 以复数形式命名类（因为这是我在模型中对它们的称呼）。所以，我最终得到了“Entries.h”而不是“Entry.h”。我回去手动更改了所有类并在模型中指定了类的名称。

所以，我需要弄清楚为什么 awakeFromInsert 永远不会被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:05:37.440

`awakeFromInsert`每个对象在第一次创建时只调用一次。

您想要的是`awakeFromFetch`每次将其从存储加载到内存中时调用它。

很多时候，您希望在两个地方使用相同或相似的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T05:02:28.710

出于绝望，我删除了数据模型和 NSManagedObject 类。然后我重新创建了模型和类。

现在，它起作用了。当我手动更改类的名称时，一定发生了一些奇怪的事情。

# python - 找不到 lxml 模块

> ID：10004591
> 
> 赞同：0
> 
> 时间：2012-04-04T03:38:53.307
> 
> 标签：python, lxml

下载lxml-2.3.3.tar.gz

解压然后在文件夹下运行 sudo python setup.py build

python selftest.py => 184 次测试正常。

将 lxml 文件夹 lxml-2.3.3\src\lxml 提取到我的 python 路径

运行应用程序将导致错误 - XML 方面的使用需要 lxml

这是构建和安装的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T03:42:53.477

构建后，您必须使用安装

```
python setup.py install 
```

简单地将文件夹复制到 python 路径是行不通的。

或者你可以只使用[pip](http://pypi.python.org/pypi/pip)并运行

```
pip install lxml 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T04:14:59.547

对于 Windows，您可以从此[windows python lib 站点](http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml)下载预构建模块。请注意，这是非官方的，但受到高度尊重。

# css - CSS：使用 XHTML 过渡文档类型的绝对位置

> ID：10004592
> 
> 赞同：0
> 
> 时间：2012-04-04T03:38:59.423
> 
> 标签：css, xhtml, position, doctype

我正在尝试定位`<span>`相对于特定图像的相对位置。我必须使用 XHTML Transitional 文档类型，因为这是该应用程序在我接触它之前几年就一直在使用的东西，并且太多地依赖它。

以下代码正确地将`<span>`路径定位到一边：

```
<html>
    <head>
        <style type="text/css">
            span.tooltip {
                z-index:1000;

                position:absolute;
                top:200;
                left:600;
            }
        </style>
    </head>
    <body>
        <span class="hasTooltip">
            <img src="https://www.google.com/images/srpr/logo3w.png" />
            <span class="tooltip">Tooltip!</span>
        </span>
    </body>
</html> 
```

但是，此代码破坏了`<span>`位置，并且无论`left`or`top`值是什么，它总是出现在同一个位置：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <style type="text/css">
            span.tooltip {
                z-index:1000;

                position:absolute;
                top:200;
                left:600;
            }
        </style>
    </head>
    <body>
        <span class="hasTooltip">
            <img src="https://www.google.com/images/srpr/logo3w.png" />
            <span class="tooltip">Tooltip!</span>
        </span>
    </body>
</html> 
```

如何`<span>`使用 XHTML 过渡文档类型正确定位此元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T05:06:12.827

使用`top: 200px`和`left: 600px`。它们可以在任何模式下工作，而如果您省略“px”，则它是不正确的 CSS 代码，并且只能在[Quirks 模式下](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)工作。

# javascript - jQuery data() 如何打破循环引用

> ID：10004593
> 
> 赞同：10
> 
> 时间：2012-04-04T03:39:14.037
> 
> 标签：javascript, jquery, circular-reference

我已经阅读了[*为什么它更好*](https://stackoverflow.com/a/2744432/575527)以及[*它是如何实现的*](https://stackoverflow.com/a/2744417/575527)。但我真正不明白的是***它是如何破坏循环引用的？***.

它是如何打破参考圈的？

```
$(div1).data('item', div2);
$(div2).data('item', div1); 
```

例如，上面的div相互指向，如何防止？我有预感，但我只是想确定我的预感是否正确。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-04T03:46:20.467

当您将对 DOM 对象的引用作为该 DOM 对象的属性时，在某些浏览器中会发生循环引用问题。然后，您有两个相互指向的 DOM 对象。移除带有自定义属性的 DOM 对象并不会清除该自定义属性。不那么聪明的垃圾收集器没有意识到这个 DOM 引用不计数，因此它被卡住了，并且有几种方法可能导致泄漏。

`.data()`解决了这个问题，因为`.data()`数据不在 DOM 对象上。它只是一个 javascript 数据结构，可以通过唯一的字符串 ID 与 DOM 对象相关联。

一个令人困惑的部分是，当您阅读时`.data("key")`在`key`javascript 数据结构中没有找到`.data()`，然后，只有这样，jQuery 才会在 DOM 对象上查找名为`"data-key"`. 但无论何时使用 编写`.data("key", "myData")`，它都不会写入 DOM 对象，只会写入 javascript 数据结构。

因此，由于`.data()`从不将数据写入 DOM 对象，因此不会存在某些浏览器遇到问题的任何这些类型的循环引用。

`.data()`关于数据结构，还有一些其他有用的信息需要了解。当您使用 jQuery`.remove()`从 DOM 中删除元素或调用 时`$(elem).html("new html")`，jQuery 会清除`.data()`所有已删除项上的数据。这是一种最好不要将 jQuery 与纯 javascript 混合的情况。如果您正在使用`.data()`，那么您应该始终使用 jQuery 函数从 DOM 中删除项目，以便`.data()`适当地清理。否则，您可能会以这种方式获得内存泄漏（`.data()`数据可能泄漏以及在可能泄漏中引用的任何已删除 DOM 对象`.data()`。但是，如果您仅使用 jQuery 方法从 DOM 中删除项目（包括替换 innerHTML），然后 jQuery 会适当地清理东西并且不会有泄漏。

因此，例如，这将造成内存泄漏：

```
// suppose elem is a DOM element reference

// store some data in jQuery's data storage on behalf of a DOM element
$(elem).data("someKey", "someValue");

// remove DOM element with plain Javascript
elem.parentNode.removeChild(elem); 
```

因为您使用纯 Javascript 删除了 DOM 元素，所以 jQuery 没有机会清理您之前存储的数据。DOM 元素本身将被垃圾回收，但`.data()`您之前存储的值现在在 jQuery 的存储中是孤立的，本质上是一个“泄漏”，因为它可能永远不会被清除。另一方面，如果你这样做：

```
$(elem).data("someKey", "someValue");
$(elem).remove(); 
```

然后，jQuery 将看到您正在删除 DOM 元素，并且还会清除您使用`.data()`.

了解其工作原理的一种相当简单的方法是使用非最小化版本的 jQuery 创建一对行脚本，然后`$(elem).data("key", "whatever")`在调试器中逐步调用并观察它是如何工作的。

# android - ScrollView 中的 Android WebView 滚动

> ID：10004595
> 
> 赞同：1
> 
> 时间：2012-04-04T03:39:18.457
> 
> 标签：android, webview

`ScrollView`非常普遍的问题：我在Android 应用中有多个小部件。标准`ScrollView`的移动设备可以显示 720 行，用户可以向下滚动然后通过多个小部件（文本窗格、按钮等）进行备份。问题是我想添加一个`WebView`显示 HTML 表格的内容；这个 HTML 表格的高度是可变的。

有没有办法根据它应该显示的 HTML 表格的大小来改变 WebView 的高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:09:30.150

是的，您可以获取对 WebView 的引用，然后使用 setHeight 属性设置它的高度。

也许您最好让容器为您处理，并将属性设置为“wrap_content”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T04:47:23.950

我想，您需要计算 web-view 内容大小（[here](https://stackoverflow.com/questions/4440640/how-a-change-the-content-size-of-a-webview-in-android)和[here](https://stackoverflow.com/questions/4065134/is-there-a-listener-for-when-the-webview-displays-its-content)并在此处[输入链接描述](https://stackoverflow.com/search?q=android%20webview%20height)），而不是将 webview 大小设置为适合内容（[也许 here](https://stackoverflow.com/questions/4756606/how-to-set-height-of-relative-layout-dynamically-in-android)）。这样，您应该只有滚动视图滚动。

祝你好运

# c - 设置宏的范围

> ID：10004599
> 
> 赞同：2
> 
> 时间：2012-04-04T03:39:48.240
> 
> 标签：c, macros

我有一个普遍的疑问..

有没有办法像静态函数一样限制 .C 文件中 MACRO 的范围？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T03:46:00.880

宏由预处理器完成。预处理器读取所有正在处理的文件并应用宏和宏逻辑，然后将其结果传递给编译器。

一旦定义了宏，它的值将在**引用宏的任何地方**使用，即使在其他文件中也是如此。

有关宏使用的详细信息，请参阅[GCC 文档](http://gcc.gnu.org/onlinedocs/cpp/Macros.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T03:47:49.070

一般的做法是`#undef`在你完成宏时使用它。容易出错，但它有效。

宏没有任何类型的块作用域。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T03:42:04.930

您可以将宏放在您希望使用它的 .c 文件中，而不是头文件，并且无法从其他文件中访问它（尽管有些编译器允许包含 .c 文件，但没有人这样做，好吧没有一个是明智的）。

下面还提到了使用，`#undef`但是如果你经常使用这个宏，它很快就会变得混乱。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T03:51:45.560

所有宏都已经像静态函数一样，因为它们只能在定义它们的翻译单元中使用。如果您想限制可以使用特定宏的区域，只需将其定义在合理的位置即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T14:48:13.187

宏由预处理器评估，而不是由编译器评估。它对编译单元一无所知，因此您不能将其限制为一个。相反，它在翻译单元内进行评估。

宏生命周期从它定义的行开始（它上面的所有行对宏一无所知），它在翻译单元的末尾或使用“#undef”未定义时结束

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-15T13:10:13.843

所有 C 宏都仅限于翻译单元（单个 C 文件），除非它们在标题中定义并包含在每个翻译单元中。

不幸的是，翻译单元通常很大，很容易有数百到数千行代码，并且宏依赖于上下文，如果它可以限制在更小的上下文（例如块范围）中，它会更加有用。缺少作用域限制了 C 中宏的使用，主要是全局常量、一些通用的简单例程，并且通常需要全部大写名称或一些技巧来管理污染）。

但是，使用宏可以轻松实现高阶函数。想想我们如何使用自然语言，我们可能会使用“它”来指代任何太长而无法在上下文中重复的事物。范围宏系统将启用相同的功能。

我开发了[MyDef](https://github.com/hzhou/MyDef)，它本质上是一个作用域宏系统。

# c# - 查看源代码而不是网站

> ID：10004602
> 
> 赞同：0
> 
> 时间：2012-04-04T03:40:01.390
> 
> 标签：c#, asp.net, mono, mamp

我是 ASP.NET 和 C# 的新手，所以这听起来可能是个愚蠢的问题。我安装了 MAMP 以便拥有一个测试服务器。我的项目在 htdocs 目录中。

我正在使用 mac，正如我所说，我正在尝试学习 C# 和 ASP.NET。当我尝试在 Dreamweaver 中预览我的网站时，我看到的是源代码而不是网站（当不在“实时视图”中时，我看到我在代码中放入的示例按钮）。

当我使用 mono-develop 时，同一个项目在浏览器上运行良好。我认为问题出在 MAMP 或 apache 上，但我不确定......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T04:18:52.347

MAMP 专门用于 Apache、MySQL 和 PHP 安装。ASP 和 C# 是 Microsoft 语言，MAMP 服务器无法识别它们。您需要 Windows 才能拥有 ac# 服务器。我试着做你正在做的事情：获得 Windows 7，它更容易。

幸运的是：

1.  您可以在 Mac 上运行 Windows
2.  Microsoft 提供[免费的开发人员工具](http://www.microsoft.com/express)，包括[Visual Studio](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/express) ，可帮助您入门。

或者，您可以以每月不到 7 美元的价格获得一个 .NET 网络主机，并在他们的服务器上试用您的所有作品。不过，对于初学者来说，在 Mac 上编写代码并完成它仍然是一个挑战。

# button - 在代码中添加时的 MonoTouch 旋转按钮

> ID：10004603
> 
> 赞同：0
> 
> 时间：2012-04-04T03:40:04.710
> 
> 标签：button, xamarin.ios, rotation

我有一个使用 MonoTouch 创建的基本 iPad 应用程序。我有一个单一的视图控制器。

在代码中，我添加了一个这样的按钮：

```
 _button = UIButton.FromType(UIButtonType.RoundedRect);
        _button.Frame = new Rectangle((int)location.X - 50, (int)location.Y - 50, 100, 100);
        _button.SetTitle("A", UIControlState.Normal);

        _viewController.View.AddSubview(_button); 
```

当 iPad 处于纵向模式时，此功能非常有用。如果我在添加按钮之前旋转屏幕，然后尝试添加按钮，那么它会被旋转。

例如，如果当前方向是 LandscapeLeft（左侧的硬件按钮），那么当我添加上面的按钮时，按钮上的字母 A 位于其右侧，就好像按钮向右旋转 90 度一样。

如何在代码中添加按钮以使其始终正确定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:50:36.893

原来这是因为我将按钮添加到 View.Window （出于其他原因）。我已将其更改为将按钮添加到视图中，现在它可以工作了。

虚惊。每天学习一些东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T10:12:37.690

也许这可以帮助你：

```
UIButton button = new UIButton();
...

button.Transform = CGAffineTransform.MakeRotation(); 
```

这是一个旋转按钮的功能；）

# java - 具有多个字符串参数的 Bash 脚本

> ID：10004606
> 
> 赞同：2
> 
> 时间：2012-04-04T03:40:31.937
> 
> 标签：java, string, bash

我在分隔两个字符串变量作为 bash 脚本的参数时遇到问题。我的 bash 脚本接受两个参数，如下所示：

```
#!/bin/bash

DATA1=$1
DATA2=$2 
```

但是，DATA1 和 DATA2 不是我想要的，因为 bash 错误地读取了我的字符串。DATA2 只是我想提出的论点的第一部分，因为我无法将复杂（相对）的字符串变成单个争论。

我从一个 Java 应用程序调用这个脚本，变量如下：

```
String m1 = "some data";
String m2 = "some more"+mystring+"even more data"+anotherstring;

myscript.sh  m1 m2 
```

只有 m2 的第一部分被传递给 bash 脚本中的 DATA1。我尝试将整个内容用单引号和双引号括起来，但我无法让它接受整个 m2 作为第二个参数。

对创建两个字符串参数的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T06:55:56.120

它对我有用，请参阅：

```
Runtime.getRuntime().exec(new String[]{"/bin/sh", "/tmp/myscript.sh", m1,m2}); 
```

* * *

您的代码调用：`Runtime.getRuntime().exec(String)`

它调用方法`exec(command,null,null)`（参见 src.zip 中的源代码）[exec(String command, String[] envp, File dir)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#exec%28java.lang.String,%20java.lang.String%5B%5D,%20java.io.File%29)。

方法 exec(String command, String[] envp, File dir) 由 StringTokenizer 解析命令。所以文本`"some data"`or`"\"some data\""`被拆分为`some` `data`(or `"some` `data "`)

# javascript - 在 CakePHP 中保存数据，并同时通过 AJAX 发布 JSON？

> ID：10004609
> 
> 赞同：1
> 
> 时间：2012-04-04T03:41:00.950
> 
> 标签：javascript, ajax, json, cakephp

所以我有一个表单，我有一个带有 CakePHP 后端的 KnockoutJs 应用程序。当我点击 Cake 的默认“保存”按钮时，我想吐出并发布一个 JSON 以及标准表单数据。

到目前为止，这是我的 JS 中的内容：

```
$('input.saveProgram').click(function() {
    var theJson = ko.mapping.toJSON(pvm, mapping);
    $.ajax({
        url: 'http://localhost/cake/programs/edit',
        dataType: 'json',
        type: 'POST',
        data: theJson
    });
}); 
```

在 Cake 中，我试图在我的控制器中使用 Request 处理程序，但无济于事：

```
if($this->RequestHandler->setContent('json', 'application/json')) {
    // standard saving code
} 
```

在我的 Cake 应用程序中，我尝试使用 die($this->request->data) 来查看发生了什么，而 JSON 似乎根本没有发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:15:09.517

这是我解释您的问题时的解决方案。在您的控制器中：

```
 if($this->RequestHandler->isAjax()){

        // "spit" out json
        echo $this->data;

        //decode data into an array
        $decodedData = json_decode($this->data);        

        //standard saving code would 
        $this->Model->save($decodedData);
    } 
```

# maven - 在 OSGi Bundle 中使用 com.sun.crypto.provider.SunJCE

> ID：10004612
> 
> 赞同：1
> 
> 时间：2012-04-04T03:41:10.513
> 
> 标签：maven, dependencies, osgi, bundle

我正在尝试在 OSGi Bundle 中使用 com.sun.crypto.provider.SunJCE （用于 HMAC）。

我正在使用带有这些配置的 maven-bundle-plugin：

```
<Embed-Dependency>*;scope=runtime;inline=false</Embed-Dependency>
<Import-Package>*;resolution:=optional</Import-Package> 
```

当我执行我的包时，我收到了这个错误：

```
Caused by: java.lang.ClassNotFoundException: com.sun.crypto.provider.SunJCE 
```

如何获取我的 OSGi 包中的代码以访问 com.sun.crypto.provider？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T04:28:08.963

查看您的 maven 配置，跳出来的一件事是让您的所有包导入可选是不明智的。它取消了 OSGi 通过将问题推迟到执行时间给您带来的许多好处，而不是在捆绑包开始时让您知道某些事情是不正确的。换句话说，缓慢失败而不是快速失败！它仅适用于真正可选的依赖项。

当然，您的最终目标是完全不失败，而不仅仅是更快地失败。作为了解正在发生的事情的起点，您是否打开了构建的捆绑包并检查了加密包是否实际被嵌入？检查您的构建是否符合您的期望是一个好主意。

但是，在这种特殊情况下，由于这是您通常希望 JVM 提供的类，我建议检查您的引导类路径以确保它可用，删除嵌入依赖项，并使用 org.osgi.framework.system .packages.extra 属性而不是嵌入依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:07:58.227

为什么需要 com.sun.crypto 类？一般来说，您可以通过 java.* API 访问加密函数吗？例如：

```
 KeyGenerator keyGen = KeyGenerator.getInstance("HmacMD5");
 SecretKey key = keyGen.generateKey();
 Mac mac = Mac.getInstance(key.getAlgorithm());
 mac.init(key);
 String str = "This message will be digested";
 byte[] utf8 = str.getBytes("UTF8");
 byte[] digest = mac.doFinal(utf8); 
```

# c# - 如何通过异步调用更新列表框？

> ID：10004613
> 
> 赞同：3
> 
> 时间：2012-04-04T03:41:13.963
> 
> 标签：c#, delegates

我开发了一个 Windows 窗体 c# 应用程序，我只想通过在不阻塞 GUI 窗体的情况下剥离另一个线程来更新主窗体中的列表框中的项目。由于线程无法访问列表框等表单实体，因此我想到了使用委托。下面的代码显示了我如何使用委托来执行该任务，但它会阻止 GUI 表单。所以我只想将其转换为更新列表框而不阻塞 GUI 表单的异步委托

代表声明

```
 delegate void monitoringServiceDel(); 
```

调用代表

```
new monitoringServiceDel(monitoringService).BeginInvoke(null, null); 
```

委托方法实现

```
private void monitoringService()
{
        this.listEvents.Invoke(new MethodInvoker(delegate()
        {
            int i = 0 ;
            while (i<50)
            {

                listEvents.Items.Add("count :" + count++);
                Thread.Sleep(1000);
                i ++;
            }

        }));

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T04:48:51.677

对于 Win Forms，您需要使用 Control 的[Invoke](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)方法：

> 在拥有控件的底层窗口句柄的线程上执行指定的委托

基本场景是：

*   [使用BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)完成繁重的工作，以在非 UI 阻塞线程上检索所有项目。
*   在[BackgroundWorker.RunWorkerCompleted Event](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.runworkercompleted.aspx)上，使用控件的 Invoke 方法将项目添加到控件（在您的情况下为 ListBox）。

类似于以下内容：

```
var bw = new BackgroundWorker();
bw.DoWork += (sender, args) => MethodToDoWork;
bw.RunWorkerCompleted += (sender, args) => MethodToUpdateControl;
bw.RunWorkerAsync(); 
```

这应该让你朝着正确的方向前进。

**编辑：工作样本**

```
public List<string> MyList { get; set; }

private void button1_Click( object sender, EventArgs e )
{
    MyList = new List<string>();

    var bw = new BackgroundWorker();
    bw.DoWork += ( o, args ) => MethodToDoWork();
    bw.RunWorkerCompleted += ( o, args ) => MethodToUpdateControl();
    bw.RunWorkerAsync();
}

private void MethodToDoWork()
{
    for( int i = 0; i < 10; i++ )
    {
        MyList.Add( string.Format( "item {0}", i ) );
        System.Threading.Thread.Sleep( 100 );
    }
}

private void MethodToUpdateControl()
{
    // since the BackgroundWorker is designed to use
    // the form's UI thread on the RunWorkerCompleted
    // event, you should just be able to add the items
    // to the list box:
    listBox1.Items.AddRange( MyList.ToArray() );

    // the above should not block the UI, if it does
    // due to some other code, then use the ListBox's
    // Invoke method:
    // listBox1.Invoke( new Action( () => listBox1.Items.AddRange( MyList.ToArray() ) ) );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T04:09:05.957

最简单的解决方案是使用`BackgroundWorker`控件，结合两个`Panels`. `Visible`这个想法是在表单加载时在前台放置一个面板，并在其中有一个`ImageBox`播放简单加载 gif 的面板。将`ListBox`位于默认情况下不可见的另一个面板内，并且将位于第一个面板的正后方。

加载表单后，启动`BackgroundWorker`并完成您必须执行的任何数据检索或更新，一旦任务完成，将数据设置在您的 ListBox 中，只需将`ListBox`面板打开并使其可见。

这样，您将获得 的半异步加载`ListBox`，而在添加每个项目后它不会更新。您可以随时使用此技术，而不仅仅是在表单加载时！

这是一个代码示例：

```
namespace AsyncForm
{
    public partial class Form1 : Form
    {

        private List<String> collectionItems = new List<String>();

        public Form1()
        {
            InitializeComponent();
        }

        private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            for (int i = 0; i < 20; i++)
            {
                ((List<String>)e.Argument).Add("Something " + i);
                System.Threading.Thread.Sleep(200);
            }
        }

        private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            listBox1.Items.AddRange(collectionItems.ToArray());
            listBox1.Visible = true;
            pictureBox1.Visible = false;
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            backgroundWorker1.RunWorkerAsync(collectionItems);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T03:49:07.287

如果您正在修改 UI 元素，那么您将不得不阻塞 UI 线程。如果项目突然出现或需要在添加每个项目之间进行处理，那么您可能需要考虑在幕后运行处理（通过[backgroundworker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)或[Task](http://msdn.microsoft.com/en-us/library/dd321439.aspx)）。但是，如果您只是获取数据并填充列表，则需要使用 UI 线程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T05:32:06.760

您应该将更新 UI 和长时间进程的功能分开。

处理 UI 逻辑..

```
 private void UpdateUI(string item) 
    {
        if (Thread.CurrentThread.IsBackground) 
        {
            listEvents.Dispatcher.Invoke(new Action(() => //dispatch to UI Thread
            {
                listEvents.Items.Add(item);
            }));
        }
        else
        {
            listEvents.Items.Add(item);
        }
    } 
```

使用 TaskParallel 进行异步处理

```
 private void Dowork()
    {
        Task task = Task.Factory.StartNew(() =>
        {
            int i = 0;
            while (i < 10)
            {
                Thread.Sleep(1000);
                UpdateUI(i.ToString());
                i++;
            }
        });
    } 
```

# scala - 将顺序集合转换为并行集合的成本是多少，而不是从头开始创建它

> ID：10004615
> 
> 赞同：4
> 
> 时间：2012-04-04T03:41:26.523
> 
> 标签：scala, collections, parallel-processing, parallel-collections

根据[官方文档](http://docs.scala-lang.org/overviews/parallel-collections/overview.html)，有两种创建并行集合的选项：

1)

```
// There's a little bug here, doesn't matter for the sake of the question
import scala.collection.parallel.mutable.ParArray
val pv = new ParVector[Int] 
```

2)

```
val pv = Vector(1,2,3,4,5,6,7,8,9).par 
```

现在，有什么区别？当我从简单的顺序集合转换它时是否存在任何性能损失？

如果您必须创建一个有点并行的集合（例如，数千个元素），您会怎么做，您会从头开始创建它还是转换它？

谢谢你们！

**编辑：**

正如@oxbow_lakes 所说，有一段文档专注于这个主题，但我正在尝试获得“经验丰富的建议”。我的意思是，例如，如果您必须从数据库中读取大量集合，您会怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T07:26:48.967

取决于收藏。`Vector`基本上是免费的，`ParVector`只是向量的包装。对`Arrays`. 其他的，例如`List`，将不得不以不同的结构完全复制，更适合并行性。如果您希望结果也成为列表，则将其复制回新列表。

您可以在 scala 文档站点上查看[这个全新的指南](http://docs.scala-lang.org/overviews/parallel-collections/overview.html)，创建并行集合部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T07:28:14.550

该`par`方法的官方文档说：

> *对于大多数集合类型，此方法通过**复制所有元素**来创建一个新的并行集合。对于这些集合，par 需要**线性时间**[...]*
> 
> *特定集合（例如`ParArray`或`mutable.ParHashMap`）通过创建共享相同底层数据集的并行集合来覆盖此默认行为。对于这些集合，par 需要常数**或次线性**时间。*

也就是说，通常 O(n) 中的操作，除非使用**可变**集合`ParArray`和`ParHashMap`，它小于 O(n) - 但可能不是恒定时间。

# node.js - 有没有人在 node/socket.io 中成功实现了动态命名空间？

> ID：10004616
> 
> 赞同：4
> 
> 时间：2012-04-04T03:41:28.860
> 
> 标签：node.js, socket.io

含义：用户对应用程序的身份验证 -> 应用程序设置 socket.io 连接的命名空间 (http://www.socketioserver.com/NAMESPACE) 并且节点服务器相应地响应，*而无需为该特定命名空间进行硬编码。*到那个特定的命名空间。

因此，目的是编写一段服务器端节点代码，该代码使用该名称空间的适当数据响应对特定名称空间的请求，而无需事先知道将从客户端连接的名称空间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T08:13:28.900

是的，你可以很容易地做到这一点。您只需要事先执行某种握手（例如，在默认 ns 上发送一条消息，其中包含用于识别请求的 ns 的内容），以便 socketio 代码知道它需要侦听的命名空间。

然后你可以使用`sio.of(namespaceFromHandshake).on...`

# python - C相当于python pickle（对象序列化）？

> ID：10004618
> 
> 赞同：5
> 
> 时间：2012-04-04T03:42:13.513
> 
> 标签：python, c, client, pickle

与此 python 代码等效的 C 是什么？谢谢。

```
data = gather_me_some_data()
# where data = [ (metic, datapoints), ... ]
# and datapoints = [ (timestamp, value), ... ]

serialized_data = cPickle.dumps(data, protocol=-1)
length_prefix = struct.pack("!L", len(serialized_data))
message = length_prefix + serialized_data 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T10:48:18.300

C doesn't supports direct serialization mechanism because in C you can't get type information at run-time. You must yourself inject some type info at run-time and then construct required object by that type info. So define all your possible structs:

```
typedef struct {
  int myInt;
  float myFloat;
  unsigned char myData[MY_DATA_SIZE];
} MyStruct_1;

typedef struct {
  unsigned char myUnsignedChar;
  double myDouble;
} MyStruct_2; 
```

Then define enum which collects info about what structs in total you have:

```
typedef enum {
  ST_MYSTRUCT_1,
  ST_MYSTRUCT_2
} MyStructType; 
```

Define helper function which lets to determine any struct size:

```
int GetStructSize(MyStructType structType) {
      switch (structType) {
          case ST_MYSTRUCT_1:
              return sizeof(MyStruct_1);
          case ST_MYSTRUCT_2:
              return sizeof(MyStruct_2);
          default:
              // OOPS no such struct in our pocket
              return 0;
      }
} 
```

Then define serialize function:

```
void BinarySerialize(
    MyStructType structType,
    void * structPointer,
    unsigned char * serializedData) {

  int structSize = GetStructSize(structType);

  if (structSize != 0) {
    // copy struct metadata to serialized bytes
    memcpy(serializedData, &structType, sizeof(structType));
    // copy struct itself
    memcpy(serializedData+sizeof(structType), structPointer, structSize);
  }
} 
```

And de-serialization function:

```
void BinaryDeserialize(
    MyStructType structTypeDestination,
    void ** structPointer,
    unsigned char * serializedData)
{
    // get source struct type
    MyStructType structTypeSource;
    memcpy(&structTypeSource, serializedData, sizeof(structTypeSource));

    // get source struct size
    int structSize = GetStructSize(structTypeSource);

    if (structTypeSource == structTypeDestination && structSize != 0) {
      *structPointer = malloc(structSize);
      memcpy(*structPointer, serializedData+sizeof(structTypeSource), structSize);
    }
} 
```

Serialization usage example:

```
MyStruct_2 structInput = {0x69, 0.1};
MyStruct_1 * structOutput_1 = NULL;
MyStruct_2 * structOutput_2 = NULL;
unsigned char testSerializedData[SERIALIZED_DATA_MAX_SIZE] = {0};

// serialize structInput
BinarySerialize(ST_MYSTRUCT_2, &structInput, testSerializedData);
// try to de-serialize to something
BinaryDeserialize(ST_MYSTRUCT_1, &structOutput_1, testSerializedData);
BinaryDeserialize(ST_MYSTRUCT_2, &structOutput_2, testSerializedData);
// determine which object was de-serialized
// (plus you will get code-completion support about object members from IDE)
if (structOutput_1 != NULL) {
   // do something with structOutput_1 
   free(structOutput_1);
}
else if (structOutput_2 != NULL) {
   // do something with structOutput_2
   free(structOutput_2);
} 
```

I think this is most simple serialization approach in C. But it has some problems:

*   struct must not have pointers, because you will never know how much memory one needs to allocate when serializing pointers and from where/how to serialize data into pointers.
*   this example has issues with system endianess - you need to be careful about how data is stored in memory - in big-endian or little-endian fashion and reverse bytes if needed [when casting `char *` to integal type such as `enum`] (...or refactor code to be more portable).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T06:51:16.190

如果您可以使用 C++，则有[PicklingTools 库](http://www.picklingtools.com/)

# visual-c++ - C++ 编程

> ID：10004621
> 
> 赞同：0
> 
> 时间：2012-04-04T03:42:27.380
> 
> 标签：visual-c++

我正在编写一个程序来计算和打印我正在使用 get.line 供用户输入的停车费，我如何使用“查找”来分隔行？

```
#include <iostream>
#include <fstream>
#include <iomanip>
#include <string>
#include <cmath>
using namespace std;
int main ()
{
string enter_date;
string enter_time;
string exit_date;
string exit_time;
int calculatecharge;
int num;

cout << "Please enter the date and time the car is entering "<< endl
<< "the parking garage in the following format: YY/MM/DD hh:mm"<< endl;
getline (cin,enter_date);
getline (cin,enter_time);
cout<< "Please enter the date and time the car is exiting "<< endl
<< "the parking garage in the following format: YY/MM/DD hh:mm"<< endl;
getline (cin,exit_date);
getline (cin,exit_time);

find(' ')

cout<<"Parking fee due: "<< num << endl;
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:43:44.657

如果您使用 getline() 两次，请尝试以下代码。

```
getline (cin, enter_date, ' ');
getline (cin, enter_time); 
```

# r - 在 R 中使用 spplot 在图形上绘制多个 shp 文件

> ID：10004624
> 
> 赞同：11
> 
> 时间：2012-04-04T03:42:32.667
> 
> 标签：r, plot, ggplot2, gis

我有 3 个 shp 文件分别代表房子的房子、房间和床。我需要使用 R 将它们绘制在图表上，以便它们相互重叠。我知道在`plot`功能上，我可以用来`line`在现有图的顶部绘制新线，有什么等价的`spplot`吗？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-04T04:50:01.757

这是一种方法，使用**latticeExtra**包中的漂亮`layer()`函数：

 **```
# (1) Load required libraries
library(sp)
library(rgeos)        # For its readWKT() function
library(latticeExtra) # For layer()

# (2) Prepare some example data
sp1 = readWKT("POLYGON((0 0,1 0,1 1,0 1,0 0))")
sp2 = readWKT("POLYGON((0 1,0.5 1.5,1 1,0 1))")
sp3 = readWKT("POLYGON((0.5 0,0.5 0.5,0.75 0.5,0.75 0, 0.5 0))")

# spplot provides "Plot methods for spatial data with attributes",
# so at least the first object plotted needs a (dummy) data.frame attached to it.
spdf1 <- SpatialPolygonsDataFrame(sp1, data=data.frame(1), match.ID=1)

# (3) Plot several layers in a single panel
spplot(spdf1, xlim=c(-0.5, 2), ylim=c(-0.5, 2), 
       col.regions="grey90", colorkey=FALSE) +
layer(sp.polygons(sp2, fill="saddlebrown")) +
layer(sp.polygons(sp3, fill="yellow")) 
```

![在此处输入图像描述](../Images/e9b78178857d20688bd72c30acd12620.png)

或者，您可以通过`spplot()`'`sp.layout=`参数获得相同的结果。（指定`first=FALSE`确保“屋顶”和“门”将绘制在作为`spplot()`第一个参数给出的灰色正方形之后/之上。）

```
spplot(spdf1, xlim=c(-0.5, 2), ylim=c(-0.5, 2), 
       col.regions="grey90", colorkey=FALSE,
       sp.layout = list(list(sp2, fill="saddlebrown", first=FALSE),
                        list(sp3, fill="yellow", first=FALSE))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T07:07:56.940

您可以使用 中的`sp.layout`参数`spplot`。或者，您可以使用 ggplot2。一些示例代码（未经测试）：

```
library(ggplot2)
shp1_data.frame = fortify(shp1)
shp1_data.frame$id = "shp1"
shp2_data.frame = fortify(shp2)
shp2_data.frame$id = "shp2"
shp = rbind(shp1_data.frame, shp2_data.frame)

ggplot(aes(x = x, y = y, group = group, col = id), data = shp) + geom_path() 
```

在`ggplot2`中，数据中的列与图中的图形比例相关联。在这种情况下`x`，是 x 坐标，`y`是 y 坐标，`group`是 data.frame shp 中的一列，它指定一个点属于哪个多边形，并且`col`是多边形的颜色。我使用的几何图形是`geom_path`，它根据多边形输入 data.frame 绘制一系列线条。另一种方法是使用`geom_poly`，它也支持填充多边形。**

# asp.net - 从 ASHX 处理程序呈现样式表

> ID：10004629
> 
> 赞同：1
> 
> 时间：2012-04-04T03:43:08.380
> 
> 标签：asp.net, css, webforms, ashx

我正在创建一个 CMS，我想从数据库中动态加载样式。我创建了一个返回样式表的 ASHX 处理程序。然后我像这样引用处理程序：

```
<link href="/Assets/Get.ashx?aid=1" rel="stylesheet" type="text/css" /> 
```

当我在浏览器中单击链接时，它会按预期加载样式表。但是，当我检查元素时，我发现没有应用任何样式。

这是不可能的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T03:45:22.527

您的 ASHX 处理程序是否在响应中设置了正确的 Content-Type ( `text/css`)？

# git - 您如何将单个文件（或一次多个）从 Git 存储库复制到您的家用计算机？

> ID：10004630
> 
> 赞同：0
> 
> 时间：2012-04-04T03:43:14.427
> 
> 标签：git, github, copy

> **可能重复：**
> [您如何使用 Git 从存储库中检索一个（或几个）文件？](https://stackoverflow.com/questions/10004508/how-do-you-use-git-to-retrieve-just-one-or-a-few-files-from-a-repo)

我想将一个文件从我的 Git 存储库复制到我的家用机器中，但是使用

```
 git clone ... 
```

只允许我复制整个存储库，而不是单个文件。

任何帮助表示赞赏。谢谢 ：）

# php - 如何通过谷歌分析知道有多少收件人打开了邮件？

> ID：10004644
> 
> 赞同：2
> 
> 时间：2012-04-04T03:45:04.480
> 
> 标签：php, javascript, google-analytics, swiftmailer

我正在使用 swiftmailer ，一个用于在 php 中发送邮件的库。问题是，我已经注册了一个谷歌分析账户。

如何使用此工具检查有多少人打开了电子邮件？

谢谢你。

更新：

好的，trackcode 在 js 中，肯定行不通。如果用户允许，图像有一些机会。

准确地说，我应该在 image.php 中包含什么，

这是否意味着我去谷歌分析网页并跟踪 ../image.php?id=xxx 然后我可以得到结果？

我应该在php中添加代码吗？

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29940706-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T03:48:34.890

你不能 100% 可靠地做到这一点。您可以在邮件中嵌入 webbug，但大多数邮件客户端会自动阻止任何第三方内容自动加载。如果用户没有说“好的，请加载图像”，那么您将永远不会看到 webbug 命中。

您可以在电子邮件中请求回执，但大多数邮件客户端会忽略这一点，或者默认不发送回执，或者用户将拒绝确认回执。

如果您想确认人们已经阅读了电子邮件，那么最好不要邮寄您想要跟踪的内容，而只需发送一个指向该内容的链接：

```
"please click here to read an important announcement" 
```

该链接将包含一个唯一标识符，该标识符与消息发送到的特定电子邮件地址相关联。如果您点击该地址，则有人阅读了该消息并单击了该链接，嵌入的跟踪代码将告诉您是谁这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:54:52.763

要为您的时事通讯获得完整的 Google Analytics 集成，请查看此主题的官方博客文章：

[http://analytics.blogspot.com/2009/03/tips-for-tracking-email-marketing.html?m=1](http://analytics.blogspot.com/2009/03/tips-for-tracking-email-marketing.html?m=1)

# google-app-engine - 将 XML 文件上传到 Google App Engine DataStore

> ID：10004652
> 
> 赞同：1
> 
> 时间：2012-04-04T03:46:02.193
> 
> 标签：google-app-engine, google-cloud-datastore

我正在寻找将 XML 文件从网页上传到 GAE DataStore 的最佳方式。XML 稍后将通过 Web 界面进行解析和修改。到目前为止，我正在使用`form`带有文件类型的 HTML `input`：

```
<form enctype="multipart/form-data" action="update" method="post" > 
  <input type="file" name="myfile" /> 
  <input type="submit" /> 
</form> 
```

在 servlet 类中，我使用 for 循环将数据读入`String`：

```
InputStream input = req.getInputStream();
StringBuffer sb = new StringBuffer(""); 

int c = -1;
while ( (c = input.read() ) != -1 ) 
{
  char ch = (char) c;
  sb.append( ch );
} 
```

然后我检查 DataStore 是否包含具有应用程序硬编码键值的实体，如果没有，我创建一个新实体并将 XML 上传到`Text`( `com.google.appengine.api.datastore.Text`)，否则我创建一个新实体并将文件放在那里。这就是你可以称之为好方法的东西吗？

问候， STeN

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:50:53.783

如果您使用带`type="file"`字段的 html 表单，则浏览器将通过 http POST 上传带有[`multipart/form-data`content type](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)的文件。

请参阅 AppEngine 文档，[了解如何正确处理多部分内容数据](https://developers.google.com/appengine/kb/java#fileforms)。

# image - 可以将嵌入式图像提取到文件中吗？

> ID：10004653
> 
> 赞同：11
> 
> 时间：2012-04-04T03:46:02.380
> 
> 标签：image, reporting-services

给定一个带有嵌入图像的 SSRS 报告定义文件，只是想知道是否可以提取该图像 XML 以重新创建原始图像文件。

例如：

在 rdlc 文件中，您可能会看到这样的 xml：

```
<EmbeddedImage Name="tick">
  <MIMEType>image/bmp</MIMEType>
  <ImageData>Qk1mAwAAAAAAADYAAAAoAAAAEAAAABEAAAABABgA ... <<REST OF IMAGE HERE>>
  </ImageData>
</EmbeddedImage> 
```

是否可以获取 ImageData，并以某种方式对其进行转换以重新创建原始图像位图字节流？

（这在您丢失嵌入图像所基于的原始图像文件等情况下可能很有用。）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-04T13:46:30.133

[此博客文章](http://beyondrelational.com/modules/2/blogs/65/posts/11587/extracting-images-from-ssrs-reports.aspx)中详细介绍了两种方法：

1.  如果您需要在此处重复使用，请将编码图像从一份报告复制到另一份报告。
2.  将报告的副本导出到 Excel 并从电子表格中复制图像。

或者，如果您需要更直接地访问图像，我发现[这个实用程序](http://geekswithblogs.net/QuandaryPhase/archive/2009/07/22/extracting-embedded-images-from-ssrs-reports.aspx)可以解析 XML 并加载和导出图像。看起来源代码可用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-03-29T22:12:15.590

我创建了一个小的 Power Shell 脚本来解决这个问题：

```
$ErrorActionPreference = 'Stop';
Get-ChildItem -Filter '*.rdl' | ForEach {
    $reportFile = $_;
    Write-Host $reportFile;
    $report = [xml](Get-Content $reportFile);
    $report.Report.EmbeddedImages.EmbeddedImage | Foreach {
        $imagexml = $_;
        $imageextension = $imagexml.MIMEType.Split('/')[1];
        $filename = $imagexml.Name + '.' + $imageextension;
        Write-Host '->' $filename;
        $imageContent =  [System.Convert]::FromBase64String($imagexml.ImageData);
        Set-Content -Path $filename -Encoding Byte -Value $imageContent;
    }
} 
```

[https://gist.github.com/Fabian-Schmidt/71746e8e1dbdf9db9278](https://gist.github.com/Fabian-Schmidt/71746e8e1dbdf9db9278)

此脚本从当前文件夹中的所有报告中提取所有图像。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-13T16:06:42.170

1.  打开 XML（在记事本 ++ 或任何东西中）
2.  寻找`<ImageData></ImageData>`标签
3.  复制标签之间的 64 位编码字符串
4.  查找将 x64 编码字符串转换为文件的实用程序。我使用[了这个网站](https://codebeautify.org/base64-to-image-converter)并下载了图像

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-30T15:17:06.267

我只需要这样做并意识到可以剪切和粘贴嵌入的图像，即使无法复制和粘贴。

# python - 如何使用我自己的循环与 pyhook 而不是 pumpMessages()？

> ID：10004658
> 
> 赞同：8
> 
> 时间：2012-04-04T03:47:33.180
> 
> 标签：python, pyhook

我正在尝试使用 pyhooks 来检测屏幕上任意位置的鼠标点击。问题是我只能让它与 PumpMessages() 一起工作。我希望它在我构建的 while 循环内运行。有没有办法完成这个/为什么需要pumpMessages？

```
def onclick(event):
    print 'Mouse click!'
    return True

hm = pyHook.HookManager()

hm.MouseLeftDown = onclick

hm.HookMouse()
pythoncom.PumpMessages()
hm.UnhookMouse() 
```

以上是我可以让它运行的唯一方法。

我正在尝试完成这样的事情：

```
sTime = time.time()

def onclick(event):
    global sTime
    print 'Time between clicks equals: %i' % time.time() - stime
    sTime = time.time()
    return True

hm.MouseLeftDown = OnClick

while True:

    hm.HookMouse() 
```

**编辑：**我不是一个聪明人。场景中不需要while循环..

叹..

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-10T00:51:01.403

仅供将来参考，您可以`pythoncom.PumpWaitingMessages()`在 while 循环内使用，因为它不会锁定执行。像这样的东西：

```
while True:
    # your code here
    pythoncom.PumpWaitingMessages() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T03:58:47.470

[从 pyhook 教程](http://sourceforge.net/apps/mediawiki/pyhook/index.php?title=PyHook_Tutorial#Message_Pump)：

> 任何希望接收全局输入事件通知的应用程序都必须具有 Windows 消息泵。

但是，这不一定会阻止您的代码工作。您为什么不发布您正在尝试做的事情，我们可以寻找一种在您的代码上下文中使用消息泵的方法。

您可能能够解决问题的一种方法是通过 PostQuitMessages（[此处](https://stackoverflow.com/questions/6023172/ending-a-program-mid-run)为原始解决方案）

```
import ctypes
ctypes.windll.user32.PostQuitMessage(0) 
```

# android - 我想获取单击的复选框的名称并将这些复选框的名称存储在数据库中（sqlite）

> ID：10004665
> 
> 赞同：0
> 
> 时间：2012-04-04T03:48:11.917
> 
> 标签：android, sqlite, checkbox, android-listview

我想创建一个自定义列表视图，其中应该包含复选框。单击复选框时，我想获取单击的复选框的名称并将这些复选框的名称存储在数据库（sqlite）中。任何人都可以帮助跳过这个谜语？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T03:58:30.317

[创建一个类似这样](http://redth.info/2010/10/12/monodroid-custom-listadapter-for-your-listview)的Custome ListAdapter .. 但一个单一的变化是你需要使用 CheckBox 标记`setTag()`converTview`view.getTag()``checkBox.getText()`

# android - 当一个活动加载其他活动时添加进度条

> ID：10004669
> 
> 赞同：2
> 
> 时间：2012-04-04T03:48:32.027
> 
> 标签：android, android-activity, progress-bar

这是我的活动`oncreate()`方法。`ok`我设置了一个带有对话窗口的积极按钮。当我单击它时，它会导航 UI 活动`staticDisplay.class`。我想在单击`ok`对话窗口后设置一个进度条，直到它加载下一个活动。

```
public void onCreate(Bundle savedInstanceState) {
    Log.d(TAG, "ACTIVITY ONCREATE");
    super.onCreate(savedInstanceState);
    // setContentView(R.layout.dialog);
    setContentView(R.layout.main);

    if (Registration.isRunning == false) {

        TextView title = new TextView(this);
        title.setText("DM2");
        title.setBackgroundColor(Color.DKGRAY);
        title.setPadding(10, 10, 10, 10);
        title.setGravity(Gravity.CENTER);
        title.setTextColor(Color.WHITE);
        title.setTextSize(20);
        /* alert message */
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setCustomTitle(title);

        builder.setMessage(R.string.app_description).setPositiveButton(
                "Ok", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {
                        if (Registration.isRunning == false) {

                            startService(new Intent(
                                    getApplicationContext(),
                                    Registration.class));
                        }
                        staticInfo();
                        if (Registration.ruid == null)
                            Registration.ruid = uId;

                        startActivity(new Intent(getApplicationContext(),
                                StatisticDisplay.class));
                    }
                });
        AlertDialog alert = builder.create();
        alert.show();
    } else {
        startActivity(new Intent(getApplicationContext(),
                StatisticDisplay.class));
    }
} 
```

创建方法上的 StaticDisplay.class

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.statdisplay);

    usage_btn = (Button) findViewById(R.id.appstat);
    usage_btn.setOnClickListener(this);
    setting_btn = (Button) findViewById(R.id.setting);
    setting_btn.setOnClickListener(this);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-07T11:14:58.830

这段代码，为我工作

```
private ProgressDialog progress;
Button CallButton;

@Override
    protected void onCreate(Bundle savedInstanceState) 
    {
     progress = new ProgressDialog(Page.this);
     CallButton=(Button)findViewById(R.id.button1);

      CallButton.setOnClickListener(this);

   }

@Override
    public void onClick(View v)
    {
        switch (v.getId()) {
        case R.id.button1:
             progress.setMessage("Please Wait Loading...");
       progress.setProgressStyle(ProgressDialog.STYLE_SPINNER);
       progress.setIndeterminate(true);
    progress.show();
     new Thread() 
     {

         public void run() 
         {

             Intent i = new Intent(Page.this,Update.class);
             startActivity(i);
             progress.dismiss();
         }

     }.start();

            break;
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T04:32:16.543

您可以使用 AysncTask 来完成后台进程并显示进度对话框，如下所示，

打电话给班级

```
 new Task().execute(CurrentActivity.this); 
```

在任务类中：

```
 private class Task extends AsyncTask<Void, Void, Void> 
             { 
                 ProgressDialog dialog;
                 Context context;
                public Task(Context context)
                { 
                  this.context=context;
                   //constructor for this class
                }
               protected void onPreExecute() {            
                 //create the progress dialog as 
                   dialog=new ProgressDialog(context);
              } 
             protected Void doInBackground(Void... JSONArray) { 

           //Place your background process code     

            }

            protected void onPostExecute(Void unused) {
                 //dismiss the progressdialog 
                dialog.dismiss();
           } 
       } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T04:16:27.817

请查看以下代码片段，

```
progDailog = ProgressDialog.show(loginAct,"Process ", "please wait....",true,true);

new Thread ( new Runnable()
{
     public void run()
     {
      // your loading code goes here
     }
}).start();

 Handler progressHandler = new Handler() 
 {

     public void handleMessage(Message msg1) 
     {

         progDailog.dismiss();
         }
 } 
```

在 run() 方法中，您可以放置​​加载代码。

# jquery-selectors - jQuery fcbks 选择

> ID：10004674
> 
> 赞同：0
> 
> 时间：2012-04-04T03:49:26.200
> 
> 标签：jquery-selectors

我正在使用它来选择所有项目并检查它们

```
$("#selectAll").live('click', function() {
$("#fcbklist li .fcbklist_item:not(:has(:hidden:checked))").click();
}); 
```

这样可行。并取消选中

```
$("#unselectAll").live('click', function() {
$("#fcbklist li .fcbklist_item:not(has(:hidden:checked))").click();
}); 
```

unselectAll 代码不起作用。它的行为就像一个切换。那些被选中的被取消选中，那些未被选中的被选中。

请问正确的方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T03:30:52.217

解决方案就这么简单。这会创建一个切换

```
 $("#fcbklist li .fcbklist_item").click(); 
```

# embed - 在嵌入标签中包含 json 值

> ID：10004675
> 
> 赞同：0
> 
> 时间：2012-04-04T03:49:26.923
> 
> 标签：embed

我无法从 javascript 文件将 json 值设置为 embed 标记的 scr 属性。

$.getJSON("url",函数(数据){

```
 jsonMovies = data.Movies;
 $.each(data.Movies, function(index,value){
     numofMovs[i]= index;
     if (numofMovs[i] == 'Movie6')
     {
        var parent = $('embed#video1').parent();            
        $('embed#video1').remove();             
        parent.append('<embed type="video/mp4" width="200px" height="200px" id = "video1"           
        src=value.Video />');   
     }
} 
```

请让我知道在 src 属性 (src=value.Video) 中包含 json 值的正确语法。

谢谢， 苏拉比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T03:54:52.843

您需要将值连接到字符串中：

```
parent.append('<embed type="video/mp4"
      width="200px"
      height="200px"
      id="video1"
      src=' + value.Video + '/>');
          ^^^^^^^^^^^^^^^^^^^ 
```

两者之间存在很大差异：

```
x = 'hello';
alert(x);   // shows hello
alert('x'); // shows x 
```

# php - 如何动态更改 Doctrine 实体的映射信息？

> ID：10004677
> 
> 赞同：0
> 
> 时间：2012-04-04T03:49:28.360
> 
> 标签：php, doctrine, doctrine-orm

我在一个实体上有一个注释映射，该实体将具有“Person”类型的 ManyToOne 关联，但根据具体情况，我想将该关系的类型更改为更具体的类型，例如“Student”。

如何动态更改关系映射信息？

PD：实际上我想将其作为其他问题的解决方法（[在与 Doctrine2 的多态关联中找不到字段](https://stackoverflow.com/questions/9834842/not-finding-field-in-polymorphic-association-with-doctrine2)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:15:27.757

我是这样做的：

```
 $cmf = $this->em->getMetadataFactory();
    $class = $cmf->getMetadataFor("Article");
    $class->associationMappings["person"]["targetEntity"]="User"; 
```

# ruby-on-rails - 禁止模型

> ID：10004680
> 
> 赞同：1
> 
> 时间：2012-04-04T03:49:52.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, scope

我有几个模型`belong_to :status`。

状态是：

*   积极的
*   隐
*   禁止

我为每个状态设置了范围，它们适用于用户和其他几个内容模型，但让我们举个`User`例子。

出于习惯，我写`User.find(15)`or `User.all`or or `User.last(5)`or`@category.users`

我认为不应该有任何理由改变这一点。事实上，称我为自私，但我*不想*改变这一点。我觉得我应该能够在更高的层次上处理这类任务，并且避免一遍又一遍地重新输入：

*   `User.active.where(...)`
*   `User.active`
*   `User.active.last(5)`
*   `@category.users.active`

这似乎不合常规。不幸的是，这些模型在许多情况下都使用，所以我想要一种方法，也许在模型级别，预先筛选被禁止或隐藏的模型。例如，从`all`范围中删除被禁止的实例，以及“last”之类的范围或一般查询模型时。或者，如果专门调用了属于禁止或隐藏范围的实例，它会引发一条未找到的记录。我仍然希望能够通过它们各自的作用域（例如`User.banned`or `User.hidden`）访问这些实例，但我宁愿*那*是额外的输入，而不是最常用的查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T04:04:27.727

您需要定义一些范围

```
default_scope joins(:status).where(:status => {:state => :active})
scope :hidden, unscoped.joins(:status).where(:status => {:state => :hidden}) 
```

# ios - 使用 Facebook Graph API 获取最近的雇主

> ID：10004683
> 
> 赞同：3
> 
> 时间：2012-04-04T03:50:15.420
> 
> 标签：ios, facebook-graph-api, facebook-fql

如何使用 Graph API 获取登录用户的最新雇主？我知道我可以使用以下方式找到所有列出的雇主：

```
https://graph.facebook.com/me/friendlists/work 
```

我可以使用“id”字段返回的数字并添加“/members”来获取该组的成员。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:35:19.117

```
<?php

$config = array(
'appId' => FB_APP_ID,
'secret' => FB_SECRET_KEY,
'cookie' => true // enable optional cookie support  
);
$facebook = new Facebook($config); 
$user = $facebook->getUser();

$params = array(
'scope' => 'user_work_history',
'redirect_uri' => FB_APP_URL,
);

$loginUrl = $facebook->getLoginUrl($params); 

if ($user) {
  try { 
    $user_profile = $facebook->api('/me');

    var_dump($user_profile["work"][0]["employer"]["name"]); //will display most recent eployer

  } catch (FacebookApiException $e) {
        $user = null;
    }
}
else
{
?>
    <script>top.location.href = "<?php echo $loginUrl?>";
<?php

} 
```

?>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T20:45:02.227

此功能似乎是在用户端点使用与您的搜索一致的附加参数提供的。

例如：

```
https://graph.facebook.com/me?fields=work 
```

从[文档中](http://developers.facebook.com/docs/reference/api/user/)：

*   `work`：用户的工作历史列表
    *   权限令牌：`user_work_history`或`friends_work_history`
    *   返回：包含雇主、位置、职位、开始日期和结束日期字段的对象数组

`start_date`您可以通过分别检查和来合理地找到用户的当前雇主`end_date`。对于与当前用户不同的用户，请替换`me`为所需的`PROFILE_ID`.

# javascript - 使用 Javascript 呈现时，外部 CSS 在 IE 上被剥离

> ID：10004684
> 
> 赞同：0
> 
> 时间：2012-04-04T03:50:21.853
> 
> 标签：javascript, internet-explorer

我在下面有这段代码，它通过 Javascript 在网站上呈现：

```
<div id="rs_overlay">
  <link type="text/css" rel="stylesheet" media="screen" href="CSS URL HERE">
  <div id="rs_content">

      <div id="rs_images">
        <div class="left">
          <div class="rs_image">
            <img height="161" src="http://www.dwellstudio.com/media/upload/image/35a1zki.jpg">
          </div>
        </div>
        <div class="rs_clear">
      <div>

  </div>
</div> 
```

覆盖布局在 webkit 和 moz 浏览器和 IE9 上运行良好，但是在 IE8 和 IE7 上失败，因为该行

```
<link type="text/css" rel="stylesheet" media="screen" href="CSS URL HERE"> 
```

在 IE7/8 上被剥离。

除了内联 css 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:03:06.867

正如 Marc B 评论的那样，`<link>`标签应该放在`<head>`. 您的脚本应该创建`<link>`元素并将其附加到那里。

例子：

```
var head = document.getElementsByTagName('head').item(0);
var elem = document.createElement('link');
elem.type = 'text/css';
elem.rel = 'stylesheet';
elem.href = "CSS URL HERE";
head.appendChild(elem); 
```

# c# - 选择要在 Visual Studio 2010 中调试或运行的解决方案下的项目

> ID：10004685
> 
> 赞同：45
> 
> 时间：2012-04-04T03:50:26.503
> 
> 标签：c#, .net, visual-studio, visual-studio-2010, ide

这应该很容易。我只是不知道要搜索什么...

对于这个解决方案，我创建了一个单元测试项目，并且一直在疯狂地添加单元测试。当我在通过所有单元测试后回去尝试运行原始项目时，我意识到我无法弄清楚如何调试原始项目。

换句话说，每次我尝试“调试”（例如，按`F5`）时，Visual Studio 都会运行单元测试。所以问题是我如何在一个解决方案中运行各种项目？我如何选择在我想要的时候运行哪一个？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-04-04T03:53:54.250

[您可以右键单击该项目并选择设置为启动项目](http://msdn.microsoft.com/en-us/library/a1awth7y.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T03:55:28.123

您可以右键单击一个项目并将其设置为启动项目。然后在您按 F5 时进行调试，或者在您按 Ctrl-F5 时运行。

您可以右键单击一个项目并选择`Debug / Start new instance`调试一个不是启动项目的项目。

附带说明一下，您可以在不将单元测试项目设置为启动项目的情况下运行/调试单元测试。工具栏中有图标（和键盘快捷键）可以在各种范围内运行或调试单元测试（如果不可见，请右键单击工具栏并选择测试工具）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-04T03:59:38.977

1) 在解决方案资源管理器中，右键单击作为可执行程序集项目的项目，然后选择“设置为启动项目”。这将使项目以粗体显示，并在您按 F5 时自动运行。

2) 或者，在解决方案资源管理器中，右键单击作为可执行程序集项目的项目，然后选择“调试 -> 启动新实例”。这将立即启动调试会话。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-09T15:27:39.903

这是我快速启动项目的改变方式：

1.  **工具**>**自定义**>**命令选项卡**。
2.  选择**工具栏**选择
3.  选择**标准**工具栏。 [![自定义窗口](../Images/7e57124096cc689a2cf12d2e9c82411b.png)](https://i.stack.imgur.com/JgGaK.png)
4.  在菜单预览中通过鼠标选择新图标的位置，然后单击**添加命令...**按钮
5.  在打开的**添加命令**窗口上转到**类别列表上的****项目**项目。
*****   **在Commands**列表中 选择**Set as Startup Project**项**[![在此处输入图像描述](../Images/5effe568f15cce4646e8e968bd3a32af.png)](https://i.stack.imgur.com/XV8B7.png)*****   现在，您可以一键 **将**当前项目设置**为启动项目**[![在此处输入图像描述](../Images/28d32c285646e07db54ac28a8b7d0ded.png)](https://i.stack.imgur.com/2jU4x.png)******

 ****但是今天我想要更快的方法，然后我终于找到了一种方法来设置设置为启动项目菜单的快捷方式。

只需在“**工具**” > “**选项**” > “**环境**” > “**键盘”中为“** ***ClassViewContextMenus.ClassViewProject.Debug.Startnewinstance*** ”项目设置一个快捷方式

 *******我设置了 Ctrl + Alt + Shift + F5*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-06T11:16:12.877

我想调试一个控制台应用程序项目，就这么简单：

1.  在 Visual Studio 运行菜单中选择项目： [![在此处输入图像描述](../Images/cf7f9f3e4236290d251b9f97cd98e0d3.png)](https://i.stack.imgur.com/f7kVO.png)
2.  您甚至可以在项目属性中添加调试参数： [![在此处输入图像描述](../Images/7abb41c6fd5aab57461119cf85abe8e5.png)](https://i.stack.imgur.com/nPtTz.png)

就是这样。您可以右键单击项目并按“启动新实例”，[![在此处输入图像描述](../Images/fb98612f025b486890a1f09f121147d2.png)](https://i.stack.imgur.com/oSN23.png)

或按 F5，或单击第一张图像中可见的“播放”按钮。**********

# javascript - 使用 javascript 和 jquery 从外部文件 div 填充 div

> ID：10004686
> 
> 赞同：4
> 
> 时间：2012-04-04T03:50:42.267
> 
> 标签：javascript, html, jquery, jquery-load

这里非常沮丧。不能让它工作，也不知道为什么。我正在尝试用另一个 html 文件中的 div 填充我的 div。这是我的代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

<div id="text">
content goes here
</div>

<script type="text/javascript">
    function whenButtonClicked() {
        var book = document.getElementById("book").value; //this is working
        var chapter = document.getElementById("chapter").value; //this is working
        var filename = 'files/' + book + chapter + '.html'; //this is working
        $('#text').load(filename #source); //this is NOT
    }

</script> 
```

谢谢你的帮助。

亚当

编辑：这是我正在处理的实际文件的[链接。](http://dl.dropbox.com/u/8899944/files/kh-bible.html)它也可能有问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T03:52:52.667

使用此代码：`$('#text').load(filename + " #source");`.

# node.js - Expressjs中可能的绑定丢失？

> ID：10004688
> 
> 赞同：1
> 
> 时间：2012-04-04T03:50:51.790
> 
> 标签：node.js, mongodb, express

所以我遇到了我认为是由connect-mongo或expressjs引起的绑定问题这是代码：

```
 //Error
  app.use(function(err, req, res, next) {

        if (err instanceof noData) {
            res.send(err, 404);
        } else {
            next(err);
        }
  }); 
```

我的自定义错误处理程序

```
function noData(err){
  this.code = 0;
  this.msg = err;
  console.log(Error);
  Error.call(this, {code:0, msg:err});
  Error.captureStackTrace(this, arguments.callee);
};
noData.prototype.__proto__ = Error.prototype; 
```

在这里抛出错误：

```
 err = true;
  //if(err) throw new noData('No Password');
  //Get user from database
  db.collection('users').find({}, {limit:1}).toArray(function(err, result) {
    if(err) throw new noData('No Data');             
  }); 
```

第一个错误正确抛出，但第二个错误但第二个抛出一般 nodejs 错误。

```
throw e; // process.nextTick error, or 'error' event on first tick 
```

我在这里做错了什么？connect-mongo 是否会导致它以某种方式失去绑定？任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T22:15:13.877

问题不在于 express 或 connect-mongo，回调在不同的范围内。要解决此问题，只需在调用末尾添加 (this)。

```
 //Get user from database
  db.collection('users').find({}, {limit:1}).toArray(function(err, result) {
    if(err) throw new noData('No Data');             
  }(this)); 
```

现在节点知道我的自定义错误。（哈利路亚）这本质上是一个允许我传递参数的[iife 。](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)

# javascript - 如何使用 java 脚本和 jquery 从共享点列表中获取数据？

> ID：10004689
> 
> 赞同：-6
> 
> 时间：2012-04-04T03:51:04.607
> 
> 标签：javascript, jquery, sharepoint

我是分享点的新手。我想使用 java 脚本和 j-query 从共享点列表中选择数据并将其显示在页面上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T04:12:16.993

Sharepoint 2010 使用客户端对象模型

[http://blogs.msdn.com/b/vesku/archive/2010/02/25/how-to-sharepoint-2010-js-client-object-model-and-ui-advancements.aspx](http://blogs.msdn.com/b/vesku/archive/2010/02/25/how-to-sharepoint-2010-js-client-object-model-and-ui-advancements.aspx)

[http://www.codeproject.com/Articles/60348/SharePoint-2010-Client-Object-Model-for-JavaScript](http://www.codeproject.com/Articles/60348/SharePoint-2010-Client-Object-Model-for-JavaScript)

Sharepoint 2007 使用以下代码

```
 <script language="javascript" type="text/javascript" src="jquery-1.4.3.min.js">   </script>
 <script language="javascript" src="jquery.SPServices-0.7.0.min.js"></script>
 <script type="text/javascript">

    $(document).ready(function () {
         $().SPServices({
            operation: "GetListItems",
            async: false,
            listName: "[LIST NAME]",
            CAMLViewFields: "<ViewFields><FieldRef Name=\"Status\" /><FieldRef Name=\"COLUMN NAME\" /><FieldRef Name=\"COLUMN NAME\" /></ViewFields>",
            completefunc: function (xData, Status) {
               $(xData.responseXML).SPFilterNode("z:row").each(function () {
                  var status = $(this).attr("ows_COLUMN NAME");
                  var createdDate = $(this).attr("ows_COLUMN NAME");

              });
          }
       });
});
</script> 
```

# ipad - MonoTouch UISplitViewController - 设备和模拟器不同

> ID：10004692
> 
> 赞同：1
> 
> 时间：2012-04-04T03:51:48.343
> 
> 标签：ipad, xamarin.ios, uisplitviewcontroller, ios5.1

`UISplitViewController`MonoTouch 中是否存在任何已知问题？我正在使用 MonoDevelop 2.8.8.4、MonoTouch 5.2.10 和 xCode 4.3.2 (4E2002)

我有一个`UISplitViewController`. 当我转到纵向时，我会显示一个按钮，用户可以单击该按钮以在弹出控制器中查看“主”视图。在模拟器上，它完全按预期工作 - 主显示在 popupviewcontroller 中。

但是，在设备上（运行 iOS5.1），主视图将从侧面推入（就像在`UINavigationController.PushController()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:22:44.467

这来自 iOS 5.1 发行说明：

> 在 5.1 中，UISplitViewController 类在呈现左视图时采用了滑动呈现样式（以前只在 Mail 中看到）。当通过委托方法提供的现有条形按钮项或通过右视图中的滑动手势启动演示时，将使用此样式。无需额外的 API 采用即可获得此行为，所有现有 API，包括委托提供的 UIPopoverController 实例的 API，将继续像以前一样工作。如果您的应用程序不支持该手势，请将拆分视图控制器的 PresentWithGesture 属性设置为 NO 以禁用该手势。但是，不鼓励禁用手势，因为使用它可以在所有应用程序中保持一致的用户体验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:07:21.357

> Monotouch 中的 UISplitViewController 是否存在任何已知问题？

MonoTouch 没有什么特别的，`UISplitViewController`但就像您发现后者在 iOS 5.1 内部发生了相当大的变化，这可能会出现在应用程序中。

> 我正在使用 MonoDevelop 2.8.8.4、Monotouch 5.2.10 和 xCode 4.3.2 (4E2002)

更重要的是您使用的是哪个版本的 iOS 模拟器？即 iOS 5.0 还是 iOS 5.1？

无论如何请注意，不同版本的 iOS 在不同时间调用它们的选择器。这可能会导致相同代码在不同 iOS 版本上表现不同的情况。

一个已知的案例是关于`UISplitViewController`. 您可以[阅读](http://spouliot.wordpress.com/2012/03/26/events-vs-objective-c-delegates/)它（为什么以及如何发生）以及如何正确修复此问题以在两个版本的 iOS 中相同地工作。

**免责声明：链接到我自己的博客**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:19:42.567

是的，这是“新功能”。

不再有 Popover(UISplitViewController MasterView)。我试图改变，但没有任何效果。我向 Monotouch 支持寻求帮助。但也什么都不知道。

这是我的问题的链接，也许这可以更好地回答您的问题；）

[IOS 5.1 的 UISplitViewController 问题](https://stackoverflow.com/questions/9630492/uisplitviewcontroller-problems-with-ios-5-1)

# gitignore - 无法让 .gitignore 文件在 OSX 和 Tower git GUI 上工作

> ID：10004693
> 
> 赞同：1
> 
> 时间：2012-04-04T03:52:02.470
> 
> 标签：gitignore

我有一个缓存目录，我试图被 git 忽略，它位于我的 CMS 的根目录中：

```
/files/cache/ 
```

我在项目根目录的 .gitignore 文件中尝试了以下变体：

```
/files/cache
/files/cache/*
files/cache
files/cache/* 
```

但是文件仍然显示在 Tower 中，准备好上演 - 我唯一能想到的另一件事是我在文件中使用这样的注释：

```
# comment
/files/cache 
```

只是不确定我错过了什么对不起 - 任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:45:03.890

1.  有问题的文件是否未被跟踪？请注意，Git 已经跟踪的文件不能被忽略。在这种情况下，您必须首先取消跟踪它们并提交删除。

2.  在 Tower 的“状态”视图中，您使用哪种视图模式？如果我们谈论的是由模式匹配的文件夹（不仅仅是单个文件），“ALL”模式将继续将文件夹显示为未跟踪（同时也隐藏单个文件）。“修改”将完全隐藏匹配的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T03:59:24.510

把这个 .gitignore 放在 /files/.gitignore

```
cache 
```

并提交它。

# asp.net-mvc-4 - 从 ASP.NET MVC 操作调用 ConfigureAwait

> ID：10004697
> 
> 赞同：17
> 
> 时间：2012-04-04T03:52:32.743
> 
> 标签：asp.net-mvc-4, async-await

我正在做一个演示文稿，并认为以下操作应该失败，因为 ActionResult 没有在正确的上下文中返回。我已经用 VS 对其进行了负载测试，没有出现任何错误。我已经调试过了，知道它正在切换线程。所以看起来它是合法的代码。

ASP.NET 是否像客户端应用程序一样不关心它所在的上下文或线程？如果是这样，AspNetSynchronizationContext 提供什么目的？我觉得在动作本身中放置一个 ConfigureAwait 是不对的。似乎有些不对劲。谁能解释一下？

```
 public async Task<ActionResult> AsyncWithBackendTest()
    {
        var result = await BackendCall().ConfigureAwait(false);
        var server = HttpContext.Server;
        HttpContext.Cache["hello"] = "world";
        return Content(result);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T06:12:33.813

ASP.NET 没有许多客户端应用程序需要的“UI 线程”（由于它下面的 UI 框架）。该上下文与线程亲和性无关，而是用于跟踪页面进度（以及其他事情，例如携带请求的安全上下文）

[Stephen Toub 在 MSDN 文章中提到了这一点](http://msdn.microsoft.com/en-us/magazine/cc163600.aspx)：

> Windows 窗体不是提供 SynchronizationContext 派生类的唯一环境。ASP.NET 还提供了一个，即 AspNetSynchronizationContext，尽管它不是公开的，也不适合外部使用。相反，它被 ASP.NET 在后台使用以促进 ASP.NET 2.0 中的异步页面功能（有关详细信息，请参阅 msdn.microsoft.com/msdnmag/issues/05/10/WickedCode）。此实现**允许 ASP.NET 阻止页面处理完成，直到所有未完成的异步调用都已完成**。

关于同步上下文的更多细节在[Stephen Cleary 去年的文章](http://msdn.microsoft.com/en-us/magazine/gg598924.aspx)中给出。

特别是图 4 显示它没有 WinForms/WPF 的“特定线程”行为，但整件事读起来很不错。

> 如果同一应用程序一次完成多个操作，AspNetSynchronizationContext 将确保它们一次执行一个。它们可以在任何线程上执行，但该线程将具有原始页面的身份和文化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T13:46:04.860

在您的代码中，`HttpContext`是您的`AsyncController`基类的成员。它不是执行线程的当前上下文。

此外，在您的情况下，`HttpContext`仍然有效，因为请求尚未完成。

我目前无法对此进行测试，但如果您使用`System.Web.HttpContext.Current`而不是`HttpContext`.

PS 安全性*总是*被传播，不管`ConfigureAwait`- 如果你考虑一下，这是有道理的。我不确定文化，但如果它也总是被传播，我不会感到惊讶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-15T15:10:02.603

之所以出现是因为控制器捕获了上下文，而使用`System.Web.HttpContext`的是实时访问同步上下文的一部分。

如果我们查看[ASP.NET MVC5 源代码](https://github.com/aspnet/AspNetWebStack/blob/master/src/System.Web.Mvc/ControllerBase.cs#L112)，我们可以看到`ControllerBase`所有控制器继承的类都有自己的类，`ControllerContext`它是从`RequestContext`.

我认为这意味着虽然同步上下文在继续发生`ConfigureAwait(false);`的状态之后丢失`Controller`，但仍然可以通过闭包从继续之前访问控件的状态。

在之外，`Controller`我们无法访问此内容`ControllerContext`，因此我们必须使用`System.Web.HttpContext`具有所有警告的直播`ConfigureAwait(false);`。

# asp.net-mvc-3 - 为不同用户和 seo 友好子域创建子域的正确方法

> ID：10004699
> 
> 赞同：1
> 
> 时间：2012-04-04T03:52:42.267
> 
> 标签：asp.net-mvc-3, url-rewriting, entity-framework-4.1

我想用 asp.net mvc3 和实体框架构建一个网站，用户可以登录并在子域下创建自己的商店。

有两种方法可以做到这一点：

第一个是只创建一个视图页面，并根据用户从数据库中用适当的样式和内容填充页面，并使用 url 重写来修复 url。因此，例如，如果我的网站名称是 example.com，则用户可以登录并创建一个子域，例如 user1.example.com，然后会有一些页面，例如 user1.examples.com/add ， user1.examples.com/shoppingCart/Checkout ， ...

或者

第二种方法是我可以创建不同的视图和控制器，并根据用户使用适当的内容和样式填充视图。

不同子域下的页面数相同，甚至名称。例如两个不同的用户，如 user1.example.com 和 user2.example.com 都有 user1.example.com/shoppingcart 和 user2.example.com/shoppingcart 等等。

哪种方法是正确的方法，还有其他方法可以建立这个网站吗？哪一个对seo更友好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:57:30.460

我将创建一个以用户为主题的布局，您可以在其中根据所选商店配置设计。

您可以创建一个基本上将商店名称作为“id”的路线，然后从数据库中加载设计设置。

为每个商店复制视图听起来很痛苦且没有必要，而且是维护的噩梦。

# java - 将字符串解析为双精度

> ID：10004708
> 
> 赞同：0
> 
> 时间：2012-04-04T03:54:26.773
> 
> 标签：java, parsing

当字符串标记是 int 时，我的代码似乎不起作用。这里是：

```
public class CO2Data {

    CO2Data dataSet[] = new CO2Data[10];
    String strLine = "Italy 476.08  116.86  2   592";
    int lines = 10;
    double roadCO2;

    public void saveLineInfo(String strLine, int lines) {
        StringTokenizer token = new StringTokenizer(strLine);
        String str = "hello";
        int count = 0;
        for (int i = 0; i < lines; i++) {
            while (token.hasMoreTokens()) {
                str = token.nextToken();
                if (count == 3) {
                    getRoadCO2(str, roadCO2);
                    dataSet[i].setRoadCO2(roadCO2);
                }
                count++;
            }
        }
    }

    public double getRoadCO2(String str, double roadCO2) {
        roadCO2 = Double.parseDouble(str);
        return roadCO2;
    }

    public void setRoadCO2(double roadCO2) {
        this.roadCO2 = roadCO2;
    }
} 
```

在其余的行中，roadCO2 是双倍的，所以我猜我的程序很混乱？我如何解决它？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T05:09:53.990

你得到 NullPointerException 因为，

您已经声明了一个 Array `CO2Data dataSet[] = new CO2Data[10];`，但其中的每个元素`CO2Data[] array`都指向 Null。

因此，这个调用：`dataSet[i].setRoadCO2(roadCO2);`将生成一个`NullPointerException` 因为`dataSet[i]`指向`null`。

解决方案 ：

实例化`dataSet[i] = new CO2Data();` 然后调用`dataSet[i].setRoadCO2(roadCO2);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T04:04:17.183

我建议将方法的参数名称更改为与类数据成员“roadCO2”稍有不同的名称。这可能会帮助您解决错误:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T04:06:28.443

当我运行你的代码时，我在第 22 行得到了 NullPointerException。这是因为数组“数据”尚未初始化。

您可以按如下方式初始化数组

```
for(int i = 0; i < dataSet.length; i++) {
    dataSet[i] = new CO2Data();
} 
```

# php - 查询中的递归求和

> ID：10004715
> 
> 赞同：3
> 
> 时间：2012-04-04T03:55:24.120
> 
> 标签：php, mysql, recursion

我有一个使用邻接列表分层存储数据的表，如下例所示

```
身份证账户父母
1 根空
2 a1 1
3 b1 1
4 a2 2
5 a3 4
6 a4 2
7 b2 3

```

还有一张表，我在其中保存这些帐户的值

```
id_account 值
2 10
2 10
4 20
5 30
6 10

```

我做了一个函数，它返回给定父帐户的所有子帐户：

```
function getChildrenAccount($parent_id)
  {
    $query = "SELECT id, account FROM accounts WHERE parent='{$parent_id}' ORDER BY account";
    $result = mysql_query($query) or die(mysql_error());
    while($r[]=mysql_fetch_assoc($result));
    return $r;
  } 
```

我想要做的是一个函数，它不仅返回子帐户，还返回所有值的总和，包括每个结果的子项。例如

```
getChildrenAccount(4) 
```

将返回具有以下语法的数组

```
数组（1）{
  [0]=> 数组（3）{
     ["id"]=> 5
     ["帐户"]=> "a3"
     [“总和”]=> 50 //a2 + a3
}

```

和

```
getChildrenAccount(2) 
```

```
数组（2）{
  [0]=> 数组（3）{
     ["id"]=> 4
     ["帐户"]=> "a2"
     ["sum"]=> 70 //a1 + a2 + a3
  [1]=> 数组（3）{
     ["id"]=> 6
     ["帐户"]=> "a4"
     ["sum"]=> 30 //a1 + a4
}

```

我想我必须在我的 while 语句中使用某种递归，但我有点困惑。你能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T06:01:28.797

```
function getChildrenAccount($accountID){

   $query = ' SELECT id,account,sum(value) as `SUM`
    FROM accounts,accountsValues
    WHERE accounts.id = accountsValues.id_accounts
    AND id = $accountID 
    OR id IN (SELECT id FROM accounts where parent = $accountID) ';
....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T17:25:29.860

您需要迭代您的结果，然后为每个 id 调用 getChildrenAccount 为其父 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T02:16:42.257

我找到了一个无需递归查询即可根据需要获取结果的函数。

```
$nodeList = array();
$tree     = array();
$query = mysql_query("SELECT A.guid, A.name, A.parent_guid, SUM( S.value_num ) /100 AS suma FROM accounts AS A
    LEFT JOIN splits AS S ON S.account_guid = A.guid GROUP BY A.guid ORDER BY A.name");
while($row = mysql_fetch_assoc($query))
  $nodeList[$row['guid']] = array_merge($row, array('children' => array()));
mysql_free_result($query);

foreach ($nodeList as $nodeId => &$node) {
  if (!$node['parent_guid'] || !array_key_exists($node['parent_guid'], $nodeList))
    $tree[] = &$node;
  else 
    $nodeList[$node['parent_guid']]['children'][] = &$node;
}
unset($node);
unset($nodeList); 
```

# jquery - jQuery Mobile 多选框

> ID：10004719
> 
> 赞同：3
> 
> 时间：2012-04-04T03:55:56.447
> 
> 标签：jquery, mobile, jquery-mobile, customization, multi-select

因此，多选框并不是单词中最好的输入，但有时它们可​​能很好。在我的 jQuery mobile 案例中，他们创建了一个对话框，该对话框覆盖了用户可以选择的所有选项的页面。

```
<div data-role="fieldcontain">
    <label for="select-choice-1" class="select">Choose shipping method:</label>
    <select name="select-choice-1" id="select-choice-1" multiple="multiple">
        <option value="standard">Standard: 7 day</option>
        <option value="rush">Rush: 3 days</option>
        <option value="express">Express: next day</option>
        <option value="overnight">Overnight</option>
    </select>
</div> 
```

好的，现在我遇到的问题是我需要在底部添加一个关闭按钮，因为动态填充的列表对于移动页面可能会变得很长。顶部只有一个关闭按钮，这不是很好。有没有办法将页脚附加到使用多选创建的对话框中？我似乎在 jQM API 中找不到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T20:05:34.553

除非你想疯狂地编辑他们的 CSS。话虽如此，您可以将 Close 添加为选项，然后在单击时触发对话框关闭方法：

[http://jquerymobile.com/demos/1.1.0-rc.1/docs/forms/selects/methods.html](http://jquerymobile.com/demos/1.1.0-rc.1/docs/forms/selects/methods.html)

# android - 根据位置打开/关闭/振动铃声_ANDROID ECLIPSE

> ID：10004721
> 
> 赞同：0
> 
> 时间：2012-04-04T03:56:48.550
> 
> 标签：android, eclipse

我有一个接收纬度和经度的应用程序的工作代码——我正在朝着一个目标努力，即根据我设置的这个经度和纬度它会关闭铃声——它听起来很简单，就像我有程序员阻止并且似乎无法超越这一点----所以我的问题是---我可以通过什么方式使用 android 中的位置服务使用 eclipse 将某个经度和纬度坐标设置到我输入该特定位置时的位置放置它为我关闭铃声或铃声的任何变化开/关/振动/静音

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T04:31:31.943

这不是一个真正的编程问题。因此，您有机会被否决……但是，首先，您应该阅读位置服务和位置管理器。这个概念是您首先从位置服务获取您的“最后一个已知位置”，然后开始使用 Network_Service 和 GPS_Service 拨入您的精确位置。从头开始实际获取 GPS 位置可能需要一分钟左右，并且会消耗电池电量，因此您必须明智地开始和停止“定位”以保持良好的位置并节省电池电量。至于关掉铃声？？您还应该将其标记为 Android 并将一些代码放在一起，或者至少是一个想法并重新发布。

说得通？从这里开始阅读[Android 位置](http://developer.android.com/reference/android/location/package-summary.html)

# html - HTML5 输入类型范围显示范围值

> ID：10004723
> 
> 赞同：162
> 
> 时间：2012-04-04T03:57:03.970
> 
> 标签：html, css, range

我正在制作一个我想使用范围滑块的网站（我知道它只支持 webkit 浏览器）。

我已经完全集成它并且工作正常。但我想用 a`textbox`来显示当前的幻灯片值。

我的意思是，如果最初滑块的值为 5，那么在文本框中它应该显示为 5，当我滑动文本框中的值时应该会改变。

我可以只使用`CSS`or来做到这一点吗`html`？我想避免`JQuery`。是否可以？

* * *

## 回答 #1

> 赞同：256
> 
> 时间：2013-09-21T18:52:05.880

对于那些仍在寻找没有单独 JavaScript 代码的解决方案的人。如果不编写 javascript 或 jquery 函数，几乎没有简单的解决方案：

```
<input type="range" value="24" min="1" max="100" oninput="this.nextElementSibling.value = this.value">
<output>24</output>
```

[**JsFiddle 演示**](https://jsfiddle.net/w8bw4dte/)

如果要在文本框中显示值，只需将输出更改为输入。

* * *

**需要注意的是：** 它仍然是在您的 html 中编写的 Javascript，我们可以在 js 中编写类似下面的内容来做类似的事情：

```
 document.registrationForm.ageInputId.oninput = function(){
    document.registrationForm.ageOutputId.value = document.registrationForm.ageInputId.value;
 } 
```

除了元素的 id，还可以使用名称，现代浏览器都支持这两者。

* * *

## 回答 #2

> 赞同：139
> 
> 时间：2012-04-04T04:19:19.937

这使用javascript，而不是直接使用jquery。它可能会帮助您入门。

```
function updateTextInput(val) {
          document.getElementById('textInput').value=val; 
        }
```

```
<input type="range" name="rangeInput" min="0" max="100" onchange="updateTextInput(this.value);">
<input type="text" id="textInput" value="">
```

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2014-04-11T03:12:31.450

具有可编辑输入的版本：

```
<form>
    <input type="range" name="amountRange" min="0" max="20" value="0" oninput="this.form.amountInput.value=this.value" />
    <input type="number" name="amountInput" min="0" max="20" value="0" oninput="this.form.amountRange.value=this.value" />
</form> 
```

[http://jsfiddle.net/Xjxe6/](http://jsfiddle.net/Xjxe6/)

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2014-01-19T11:06:14.697

更好的方法是在输入本身而不是整个表单上捕获输入事件（性能方面）：

```
<input type="range" id="rangeInput" name="rangeInput" min="0" max="20" value="0"
       oninput="amount.value=rangeInput.value">                                                       

<output id="amount" name="amount" for="rangeInput">0</output> 
```

这是一个[小提琴](http://jsfiddle.net/gleezer/L10r5zvv/1/)（`id`根据 Ryan 的评论添加）。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2016-02-14T11:12:47.117

如果您希望当前值显示在滑块下方并随之移动，请尝试以下操作：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>MySliderValue</title>

</head>
<body>
  <h1>MySliderValue</h1>

  <div style="position:relative; margin:auto; width:90%">
    <span style="position:absolute; color:red; border:1px solid blue; min-width:100px;">
    <span id="myValue"></span>
    </span>
    <input type="range" id="myRange" max="1000" min="0" style="width:80%"> 
  </div>

  <script type="text/javascript" charset="utf-8">
var myRange = document.querySelector('#myRange');
var myValue = document.querySelector('#myValue');
var myUnits = 'myUnits';
var off = myRange.offsetWidth / (parseInt(myRange.max) - parseInt(myRange.min));
var px =  ((myRange.valueAsNumber - parseInt(myRange.min)) * off) - (myValue.offsetParent.offsetWidth / 2);

  myValue.parentElement.style.left = px + 'px';
  myValue.parentElement.style.top = myRange.offsetHeight + 'px';
  myValue.innerHTML = myRange.value + ' ' + myUnits;

  myRange.oninput =function(){
    let px = ((myRange.valueAsNumber - parseInt(myRange.min)) * off) - (myValue.offsetWidth / 2);
    myValue.innerHTML = myRange.value + ' ' + myUnits;
    myValue.parentElement.style.left = px + 'px';
  };
  </script>

</body>
</html>
```

请注意，这种类型的 HTML 输入元素有一个隐藏功能，例如当元素具有焦点时，您可以使用左/右/下/上箭头键移动滑块。与 Home/End/PageDown/PageUp 键相同。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2020-10-16T17:09:30.627

`form`没有或`min`外部 JavaScript 的最短版本。

```
<input type="range" value="0" max="10" oninput="num.value = this.value">
<output id="num">0</output>
```

**解释**

如果您想从中检索值，`output`您通常使用`id`可以从而`oninput`不是使用链接的值`this.nextElementSibling.value`（我们利用我们已经在使用的东西）

将上面的示例与这个有效但更复杂且冗长的答案进行比较：

```
<input id="num" type="range" value="0" max="100" oninput="this.nextElementSibling.value = this.value">
<output>0</output> 
```

用最短的答案：

*   我们避免使用`this`, 在 JS 中对新手来说很奇怪的东西
*   我们避免在 DOM 中连接兄弟姐妹的新概念
*   `input`我们避免在中放置过多的`id`属性`output`

**笔记**

*   在这两个示例中，我们不需要`min`在等于时添加值 `0`
*   删除 JavaScript 的`this`关键字使其成为更好的语言

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-07-20T09:21:16.940

如果您使用**多个幻灯片**，并且可以使用 jQuery，则可以执行以下操作来轻松处理多个滑块：

```
function updateRangeInput(elem) {
  $(elem).next().val($(elem).val());
}
```

```
input { padding: 8px; border: 1px solid #ddd; color: #555; display: block; }
input[type=text] { width: 100px; }
input[type=range] { width: 400px; }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<input type="range" min="0" max="100" oninput="updateRangeInput(this)" value="0">
<input type="text" value="0">

<input type="range" min="0" max="100" oninput="updateRangeInput(this)" value="50">
<input type="text" value="50">
```

此外，通过使用`oninput`on ，`<input type='range'>`您将在拖动范围时收到事件。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-10-25T01:07:48.617

对于不关心 jquery 使用的人，这里有一个不使用任何 id 的捷径

```
<label> userAvatar :
  <input type="range" name="userAvatar" min="1" max="100" value="1"
         onchange="$('~ output', this).val(value)" 
         oninput="$('~ output', this).val(value)">
  <output>1</output>
</label> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-03-20T12:12:02.410

我有一个涉及（Vanilla）JavaScript 的解决方案，但仅作为库。您必须将其包含一次，然后您需要做的就是设置`source`数字输入的适当属性。

该`source`属性应该是`querySelectorAll`您要收听的范围输入的选择器。

它甚至适用于 selectcs。它适用于多个听众。它在另一个方向起作用：更改数字输入，范围输入将调整。它将适用于稍后添加到页面上的元素（请查看[https://codepen.io/HerrSerker/pen/JzaVQg](https://codepen.io/HerrSerker/pen/JzaVQg)）

在 Chrome、Firefox、Edge 和 IE11 中测试

```
;(function(){

  function emit(target, name) {
    var event
    if (document.createEvent) {
      event = document.createEvent("HTMLEvents");
      event.initEvent(name, true, true);
    } else {
      event = document.createEventObject();
      event.eventType = name;
    }

    event.eventName = name;

    if (document.createEvent) {
      target.dispatchEvent(event);
    } else {
      target.fireEvent("on" + event.eventType, event);
    }    
  }

  var outputsSelector = "input[type=number][source],select[source]";

  function onChange(e) {
    var outputs = document.querySelectorAll(outputsSelector)
    for (var index = 0; index < outputs.length; index++) {
      var item = outputs[index]
      var source = document.querySelector(item.getAttribute('source'));
      if (source) {
        if (item === e.target) {
          source.value = item.value
          emit(source, 'input')
          emit(source, 'change')
        }

        if (source === e.target) {
          item.value = source.value
        }
      }
    }
  }

  document.addEventListener('change', onChange)
  document.addEventListener('input', onChange)
}());
```

```
<div id="div">
  <input name="example" type="range" max="2250000" min="-200000" value="0" step="50000">
  <input id="example-value" type="number" max="2250000" min="-200000" value="0" step="50000" source="[name=example]">
  <br>

  <input name="example2" type="range" max="2240000" min="-160000" value="0" step="50000">
  <input type="number" max="2240000" min="-160000" value="0" step="50000" source="[name=example2]">
  <input type="number" max="2240000" min="-160000" value="0" step="50000" source="[name=example2]">
  <br>

  <input name="example3" type="range" max="20" min="0" value="10" step="1">
  <select source="[name=example3]">
    <option value="0">0</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
  </select>
  <br>

</div>
<br>
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-03-10T10:39:02.937

试试这个 ：

```
 <input min="0" max="100" id="when_change_range" type="range">
 <input type="text" id="text_for_show_range"> 
```

在**jQuery**部分：

```
 $('#when_change_range').change(function(){
 document.getElementById('text_for_show_range').value=$(this).val();
  }); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-10-09T17:11:07.423

```
<form name="registrationForm">
    <input type="range" name="ageInputName" id="ageInputId" value="24" min="1" max="10" onchange="getvalor(this.value);" oninput="ageOutputId.value = ageInputId.value">
    <input type="text" name="ageOutputName" id="ageOutputId"></input>
</form>
```

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2017-01-18T23:05:11.283

如果您仍在寻找答案，则可以使用 input type="number" 代替 type="range" min max work 如果它按以下顺序设置：
1-name
2-maxlength
3-size
4-min
5-max
just复制它

```
<input  name="X" maxlength="3" size="2" min="1" max="100" type="number" /> 
```

# android - 当我的项目依赖于具有 Android 库项目依赖项的非库项目时，如何使用 ANT 构建我的项目？

> ID：10004727
> 
> 赞同：0
> 
> 时间：2012-04-04T03:57:51.133
> 
> 标签：android, ant, actionbarsherlock, roboguice

我正在尝试使用 ANT 构建我的项目。我的项目使用 ActionbarSherlock 和 Roboguice-Sherlock。ActionbarSherlock 是一个 Android 库项目，但 Roboguice-Sherlock 不是。它甚至根本不是一个 Android 项目。看这里：

[https://github.com/rtyley/roboguice-sherlock](https://github.com/rtyley/roboguice-sherlock)

我可以让 ActionbarSherlock 使用 ANT 构建没有问题，问题在于 Roboguice-Sherlock。它不是一个 Android 项目，但它依赖于 Android 和 ActionbarSherlock 以及 Roboguice。当我尝试构建时，我收到大量错误，说它找不到 Roboguice-Sherlock 的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:08:54.500

如果您的项目已经配置了 Roboguice`.jar`和对 ActionBarSherlock 的库项目引用，您应该能够将其拖放到您的`libs/`文件夹中以使其自动拾取。

我正在与 Roberto 合作，以确保将`.jar`他的项目上传到 GitHub 以供非 Maven 用户使用。

现在，您可以克隆项目，只需运行即可在文件夹中`mvn clean package`获得一个独立的项目，这将使您能够按照我上面描述的方式进行操作。`.jar``target/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T04:11:51.930

您需要将 robiguice-sherlock 作为 .jar 添加到您的 Android 项目中。您可以[在此处](http://mvnrepository.com/artifact/com.github.rtyley/roboguice-sherlock/1.0)下载（单击*下载 (JAR)*）。尝试在 Android 中构建源代码会失败，因为它不是 Android 项目。一旦它在您的目录中，您需要打开项目属性并将 .jar 添加到您的构建路径。

# php - 为什么没有从我的 MYSQL 数据库中提取“消息”字段？

> ID：10004729
> 
> 赞同：0
> 
> 时间：2012-04-04T03:58:26.953
> 
> 标签：php, mysql, html, random

我正在尝试从主页正文中的随机数据库条目（在我的数据库的消息表中）返回“消息”字段。

这是我的 index.php 文件。我已经通过 connect.php 验证了与数据库的链接是否正常工作。

```
<html>
<body>

<?php 
include_once('connect.php');
$quote=$_GET['message'];
$sql="SELECT message FROM messages ORDER BY RAND()LIMIT 1";
$results=mysql_query($sql, $link);
while(list($message)=mysql_fetch_array($results)){
echo $message;
}

mysql_close();

?>

</body>
</html> 
```

你能看出我做错了什么吗？我确定我在某个地方犯了一个严重的错误。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T04:04:01.197

错字：

```
$sql="SELECT message FROM messages ORDER BY RAND()LIMIT 1";
                                                  ^--missing a space 
```

如果您甚至只进行了最低限度的查询错误处理，您就会检测到这一点：

```
$results=mysql_query($sql, $link) or die(mysql_error()); 
```

永远不要假设查询已经成功。即使 SQL 语法 100% 有效，也有太多其他原因导致无法检查失败。

# image-processing - 如何将 3d 图像转换为 2d 图像

> ID：10004731
> 
> 赞同：4
> 
> 时间：2012-04-04T03:58:44.327
> 
> 标签：image-processing

如何在不使用 3D 眼镜的情况下将 3D 图像转换为 2D 图像以便观看？

![在此处输入图像描述](../Images/1dd09b5c9cd1405eb1a2af9303ac90f9.png)

更新：
-我目前没有解决方案，但是，您知道，您可以想象，如果您有 3d 图像，您会将玻璃戴在相机上并拍摄另一张图像（所以，我认为这是一种转换的物理方法从 3d 到 2d。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:06:33.300

首先通过它`Red and Blue filters`并获得两个单独的图像（这些图像的位置会略有不同）。

然后你需要通过一些像素转换一个图像（你应该确定 - 你可以检测两个图像中的边缘并找到它们的第一个边缘之间的像素差异）

此方法将帮助您获得 2D 图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T04:21:07.313

通过使用相对简单的图像处理，您可以通过红色或蓝色滤镜（就像眼镜一样）运行该源图像，以尝试恢复原始左眼或右眼图像之类的东西。您仍然会得到两张略有不同的图像，并且您可能无法恢复原始图像颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T04:21:38.277

3d 图像实际上是一对图像：1 个左眼，1 个右眼。有很多方法可以将它们从计算机传输到您的眼睛，包括洋红色/青色（您的情况）、偏振（[http://en.wikipedia.org/wiki/Polarized_3D_glasses](http://en.wikipedia.org/wiki/Polarized_3D_glasses)）、动画（[http://en.wikipedia.org/ wiki/File:Home_plate_anim.gif](http://en.wikipedia.org/wiki/File:Home_plate_anim.gif) ) 等。关键是 3d 是两个不同的图像。没有真正的方法可以将它们合并为一个。如果您有源图像（例如，左右分开的图像），您可以只拍摄其中一张，这将是您的 2d 图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T06:38:25.067

将图像拆分为红色和绿色通道。然后使用任何立体视觉技术来匹配红色通道和绿色通道图像。

# linq - 实体框架：获取具有多对多关系中链接模型的模型

> ID：10004738
> 
> 赞同：1
> 
> 时间：2012-04-04T03:59:53.260
> 
> 标签：linq, entity-framework, many-to-many

我来自 TSQL + C# 领域，一直在尝试适应 linq 和 EF。多对多的关系一直困扰着我。我有想要从数据库中查询的具有多对多关系的模型。如：

```
 class Product{
       public int ID {get;set;}
       public string ProductName {get;set;}
       public virtual ICollection<Tag> Tags {get;set;}
     }

   class Tag {
       public int ID {get;set;}
       public string TagName {get;set;}
       public virtual ICollection<Product> Products {get;set;}

    } 
```

我能够从 DbContext 中获取产品本身，然后获取它的关联标签，如下所示：

```
// product exists in memory as a Product with an empty product.Tags

var query = from p in db.Product
            from t in db.Tags
            where p.ID == product.ID
            select p.Tags; 
```

然后我可以为 product.Tags 分配获取的标签。显然，如果我必须查询每个产品，这在处理多个产品时效率非常低。

使用 linq 和 EF，我希望能够在一次到数据库的往返中获得具有所有相关标签的产品。此外，我希望能够获取所有产品及其相关标签（或过滤的产品列表）。linq 的外观如何？

编辑：

好的，经过更多的摆弄，我得到了这个：

```
var query = db.Product.Include("Tags")
            .Where(p => p.Tags.Any(t => t.Products.Select(m => m.ID).Contains(p.ID))); 
```

这几乎是我需要的。结果都是带有标签的产品。缺少的是没有标签的产品。我认为这相当于 SQL 内连接。我想将标签从外部连接到产品，并返回所有带有可选标签的产品。如何在不排除没有标签的产品的情况下获取所有带有关联标签的产品？

编辑：

这比我想象的要容易。

```
var query2 = db.Product.Include("Tags").DefaultIfEmpty(); 
```

这将获取所有产品及其各自的标签，包括没有标签的产品。希望它有正确的理由...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T05:29:11.353

使用像 EF 这样的对象关系映射器的目的是它*为您映射关系。*如果您手动连接数据库中具有外键的对象，那么您做错了。

请参阅我的问题[为什么在简单的一对多关系上使用 LINQ Join？](https://stackoverflow.com/questions/7229569/why-use-linq-join-on-a-simple-one-many-relationship)

正确答案是简单的`context.Products.Include("Tags")`，它会自动为您加入产品和标签。这实际上是使用 ORM 的最大（唯一？）好处。

# f# - 使用带有 redis 服务堆栈库的 f# 类的奇怪行为

> ID：10004740
> 
> 赞同：1
> 
> 时间：2012-04-04T04:00:05.177
> 
> 标签：f#, redis

我正在使用 .Net 测试一点 redis，我已经阅读了本教程 [http://www.d80.co.uk/post/2011/05/12/Redis-Tutorial-with-ServiceStackRedis.aspx](http://www.d80.co.uk/post/2011/05/12/Redis-Tutorial-with-ServiceStackRedis.aspx) 并使用 c#并且工作完美，现在当我尝试将其转换为 f# 时，我有一个奇怪的行为，首先我创建了一个简单的 f# 类（使用类型也不起作用，但这是预期的）......基本上这个类类似于这个：

```
//I ve used [<Class>] to
type Video (id : int, title : string , image : string , url : string) =
  member this.Id = id
  member this.Title = title
  member this.Image = image
  member this.Url = url 
```

当我运行代码时，我的数据库会保存一个空数据，如果我在我的 f# 代码中使用 ac# 类这个工作，所以我确定问题是 f# 类...如何在不依赖 c# 代码的情况下解决这个问题我的 f# 代码

谢谢 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T04:15:56.570

根据您的教程，您似乎希望您的 F# Video 类充满 getter 和 setter 属性，而不是像现在这样拥有一个带有 getter 的构造函数（它是一个类，您可以通过 FSI 运行它来验证它）。

您可以使用一个充满可变字段的记录类型来实现这一点（它被编译成一个充满公共 getter 和 setter 的类类型）：

```
type Video = { 
    mutable Id : int
    mutable Title : string
    mutable Image : byte[]
    mutable Url : string
} 
```

# c# - 在 C# 中使用 Blob 文字字符串将图像写入 SQL Server

> ID：10004741
> 
> 赞同：1
> 
> 时间：2012-04-04T04:00:08.617
> 
> 标签：c#, sql, tsql, bytearray

我有需要写入 SQL 图像列的 ac# 函数。我有一个字节数组中的图像。标准似乎是在将字节数组作为 System.Data.SqlDbType.Image 类型的参数传递时使用 SqlCommand。

不幸的是，我的函数只能使用文本查询（不要问为什么），所以我必须找到一种只使用 T-SQL 命令的方法。到目前为止我所拥有的内容可以写入列，但我不知道用什么格式的字符串来制作图像 blob 字符串。

```
sql = "DECLARE @ptrval binary(16)" +
"SELECT @ptrval = textptr(Photo) FROM EMPhoto WHERE Employee='" + employeeID + "'" +
"WRITETEXT EMPhoto.Photo @ptrval " + imageByteArrayAsString; 
```

我尝试将 imageByteArray 转换为十六进制字符串和二进制字符串，但它似乎在 SQL 或读取它的应用程序中最终不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:12:26.213

[T-SQL 二进制常量](http://msdn.microsoft.com/en-us/library/ms179899.aspx)是一个不带引号的十六进制字符串，前缀为 0x。即0xFFD8FFE0 ...

```
string imageByteArrayAsString = "0x" + BitConverter.ToString(image).Replace("-", string.Empty); 
```

# jquery - 需要在加利福尼亚测试网站 - 是否存在任何工具

> ID：10004745
> 
> 赞同：0
> 
> 时间：2012-04-04T04:00:29.627
> 
> 标签：jquery, geolocation, ip

我有一个网站检查用户 IP，如果它来自 CA 显示一条消息。

我正在使用 JQuery 检查用户 IP，代码位于[http://jquery-howto.blogspot.in/2009/04/get-geographical-location-geolocation.html](http://jquery-howto.blogspot.in/2009/04/get-geographical-location-geolocation.html)

我已经在我的网站上实现了代码

我的问题是：

我如何检查代码是否有效？因为我不在加利福尼亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T04:02:27.743

地理位置并非 100% 准确（例如，几乎所有 AOL 用户看起来都像是在弗吉尼亚州）。

如果你能接受这种不完美，那么有许多 Web 服务和可下载的数据库可以对 IP 进行地理定位。

我对 MaxMind 有很好的体验（它们不是最准确的，但它们的价格相当准确，而且他们现在似乎有一个[免费版本](http://www.maxmind.com/app/geolitecity)，比付费产品“不太准确”）。

快速的谷歌搜索将出现许多其他选择，包括

*   [http://freegeoip.net/static/index.html](http://freegeoip.net/static/index.html)
*   [http://www.hostip.info/](http://www.hostip.info/)
*   [http://freegeoip.appspot.com/](http://freegeoip.appspot.com/)

请务必查看您选择的任何服务条款。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T04:09:20.887

他们在那里提供的示例代码确实返回了状态。请注意，他们提供了一个新的 URL：

```
// Utilize the JSONP API
$.getJSON('http://www.geoplugin.net/json.gp?jsoncallback=?', function(data){
    var region = data['geoplugin_region'];
    var country = data['geoplugin_countryCode'];
    if(country == 'US' && region == 'CA')
    {
      console.log("In CA");
    }
    else
    {
      console.log("In " + region + ", " + country);
    }
}); 
```

这不是您可以通过任何方式使用的唯一 API。

[演示](http://jsfiddle.net/wnuDs/1/)

# regex - 如何在 Play 2.0 中路由 URL，使其对结尾斜杠无动于衷

> ID：10004746
> 
> 赞同：12
> 
> 时间：2012-04-04T04:00:34.600
> 
> 标签：regex, scala, playframework, routes, playframework-2.0

我可以在一行中捕获以下两条路线吗？

```
GET     /game                    controllers.Main.app.gamelist
GET     /game/                   controllers.Main.app.gamelist 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T08:17:25.517

目前不支持此功能，并且[已将票证提交给问题跟踪器](https://play.lighthouseapp.com/projects/82401/tickets/98)。[Google Groups](https://groups.google.com/forum/#!topic/play-framework/4XArPGneBKQ)上也有关于此的讨论（包括一些解决方法）。

希望这将很快以某种聪明的方式实施。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T22:15:50.073

虽然目前似乎不支持，但可以通过覆盖 Global.scala 中的 onRouteRequest 来实现

我们这样做是这样的：

```
import play.api._
import play.api.mvc.{Handler, RequestHeader, Action, Controller}

object TrailingSlashRedirector extends Controller {
  def redirect(request: RequestHeader) = Action {
    Redirect(request.path.dropRight(1), request.queryString, 301)
  }
}

object Global extends GlobalSettings {

  override def onRouteRequest(request: RequestHeader): Option[Handler] = {

    val EndsWithASlash= """/(.*)/$""".r

    request.path match {  
      case EndsWithASlash(_) => Some(TrailingSlashRedirector.redirect(request))
      case _ => super.onRouteRequest(request)
    }

  }  

} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-04T04:12:34.657

如果您使用的是 playframework 1.x，那么它是：

```
GET /game/? controllers.Main.app.gamelist 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-06T18:06:10.297

（雅各布可能会迟到，但有人可能会觉得这很有用）

我也遇到了这个问题，我的解决方法是：

我在路由的末尾添加了以下行（这样，它匹配与其他任何内容都不匹配的 url）

```
GET  /*path  controllers.Application.appendSlash(path: String) 
```

这是我的 Application.appendSlash：

```
public static Result appendSlash(String path) {
char ending = path.charAt(path.length() -1 );
if (ending != '/')
    return redirect('/' + path + '/');
else
    return notFound();
} 
```

您可能希望将 404 Not Found 视图作为参数添加到 notFound()

希望这可以帮助

戴维德

编辑：只有一件事：这将适用于常见的浏览器导航（如果有人键入了 url 但忘记了尾随的 '/'），但它不适用于 ajax 或其他方式的自动请求：因为你无论如何都必须输入完整的网址。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-12T15:04:19.290

另一种可能性是将其放入您的全局对象中：

如果未找到带有尾部斜杠的路由，它会尝试删除尾部斜杠的路由。

路线文件只有路线没有尾随斜杠......

```
@Override
public Result onHandlerNotFound(Http.RequestHeader requestHeader) {
    if (hasTrailingSlash(requestHeader.path())) {
        return Action.redirect(removeLastChar(requestHeader.path()));
    }
    return super.onHandlerNotFound(requestHeader);
}

private static String removeLastChar(String value) {
    return value.substring(0, value.length() - 1);
}

private static boolean hasTrailingSlash(String value) {
    return value != null && value.endsWith("/");
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-02T21:37:58.713

这是我找到的解决方案

```
import play.api.mvc.RequestHeader

import play.api.Play.current

class NormalizedRequest(request: RequestHeader) extends RequestHeader {

  val headers = request.headers
  val queryString = request.queryString
  val remoteAddress = request.remoteAddress
  val method = request.method

  val path = request.path.stripSuffix("/")
  val uri = path + {
    if(request.rawQueryString == "") ""
    else "?" + request.rawQueryString
  }
}

object NormalizedRequest {
  def apply(request: RequestHeader) = new NormalizedRequest(request)
} 
```

然后我在 Global.scala 中像这样使用它

```
override def onRouteRequest(request: RequestHeader): Option[Handler] = {
  super.onRouteRequest(NormalizedRequest(request))
} 
```

这是一个类似的问题：[play framework2: remove trailing slash from urls](https://stackoverflow.com/questions/13189095/play-framework2-remove-trailing-slash-from-urls)

# c# - 根据MVC3和EF中的某些属性值在两个表中选择一个表

> ID：10004757
> 
> 赞同：1
> 
> 时间：2012-04-04T04:03:03.210
> 
> 标签：c#, asp.net, entity-framework, asp.net-mvc-3

假设我有一个基类 Component 和两个派生类 ComponentA 和 ComponentB，如下所示：

```
public class Component
{
   public int ComponentID {get; set;}
   public int ComponentType {get; set;}
   // some other statements ...
} 
```

接着

```
public class ComponentA : Component
{
   // some statements ...
}

public class ComponentB : Component
{
   // some statements ...
} 
```

现在，根据类Component中的COMponentType的值，如何切换到ComponentA或ComponentB并取回它们的相关数据。

这是如何在 edmx 中执行此操作的示例之一，但我想知道是否有任何方法可以在 EF 的 Code First 方法中执行相同的操作。[http://www.c-sharpcorner.com/UploadFile/ff2f08/entity-framework-4-0-tph-part-2/](http://www.c-sharpcorner.com/UploadFile/ff2f08/entity-framework-4-0-tph-part-2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T19:56:23.940

您可以删除该`ComponentType`属性，EF 将自动创建一个`Component`表，其中包含`Discriminator`用于区分 (duh) 子类的列。

`OnModelCreating`如果您需要鉴别器列的特定列名和/或数据类型，您可以`DbContext`直接覆盖默认值，或者通过`EntityTypeConfiguration`例如通过执行

```
Map(m => m.Requires("ComponentType").HasValue(1); 
```

对于每个子类型。（`HasValue`显然，每次都有不同的值）。

您将`DbSet<Component>`在上下文中创建一个属性。这将返回所有组件，无论类型如何。如果你只想`ComponentA`做

```
context.Components.OfType<ComponentA>(). ... 
```

哦，`Component`应该是一个抽象类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:02:39.313

[您可以先在此处](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)找到带有代码的 TPH（每个层次结构的表）

# r - 在 spplot 的最底层绘制 jpg 文件

> ID：10004769
> 
> 赞同：1
> 
> 时间：2012-04-04T04:05:27.043
> 
> 标签：r, gis, jpeg, sp

我正在创建房子的平面图，这是我现在拥有的：

*   一个 jpg 文件，它是平面图纸质副本的扫描版本
*   显示房子、房间和床的 3 个 shp 文件

我想出了如何使用 3 个 shp 文件创建一个 spplot `sp.layout`，现在我还需要在 spplot 的背面绘制 jpg。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-04T09:52:32.673

`Orcs`包提供`rgb2spLayout`了将 RGB 光栅转换为格式的函数，该格式可用于函数`sp.layout`的参数`spplot`。

请看下面的代码：

```
library(raster)
library(sp)
library(Orcs)
library(rgdal)

b <- brick( system.file("pictures/Rlogo.jpg", package="rgdal"))
lout <- rgb2spLayout(b)

df <- data.frame(dat = rnorm(100, 50, 10),
                 x = rnorm(100, 100, 50),
                 y = rnorm(100, 100, 50))
coordinates(df) <- ~x+y

spplot(df, sp.layout = lout) 
```

输出（注意颜色缩放）：

[![阴谋](../Images/9ff1eddbebec28274147fd551ce665eb.png)](https://i.stack.imgur.com/xmEh7.png)

# ios - iPad 拆分视图尺寸零件

> ID：10004771
> 
> 赞同：1
> 
> 时间：2012-04-04T04:05:56.763
> 
> 标签：ios, uisplitviewcontroller

我有一个应用程序需要拆分视图的两个部分的背景。

如果整个屏幕是`1024 x 768`，每个部分的大小是多少？

左：w：xx px；h: 768px
右: w:xx px ; 高：768 像素

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-04T04:11:09.253

根据文档，拆分视图的主视图宽度为 320 像素，根据设备的方向，详细信息窗格的宽度为 768 或 704 像素。

# php - 尝试单独存储 JSON

> ID：10004775
> 
> 赞同：0
> 
> 时间：2012-04-04T04:06:27.803
> 
> 标签：php, android, sql, json

我正在尝试将一些 JSON 解析为 Android 中的单独对象。对象由一个结束大括号分隔，没有空格，然后是一个开始大括号（“第一个结束 {第二个开始”）。到目前为止，我的代码允许我找到这些点在 JSON 中的位置，但我不知道使用什么方法来拆分对象然后存储它们。这是我获取 JSON 然后尝试解析的代码：

```
public ArrayList<String> getQuestionJSONFromUrl(String url, List<NameValuePair> params) {

    // Making HTTP request
try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        ArrayList<String> questionsList = new ArrayList<String>();
        int count = 0;
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        String newLine = null;
        String newLine2 = null;
        int previousJ = 0;
        if ((line = reader.readLine()) != null) {
            for(int j = 0; j < line.length(); j++) {
                while (line.charAt(j) == '}' && line.charAt(j+1) == '{') {
                    //everything before j = 1 string
                    //everything after gets deleted because I can't think
                    //of anything better, yet                       
                    sb.append(line);
                    sb.delete(j+1, sb.length());
                    line = sb.toString();
                    questionsList.add(count, line);
                    //line = line.split("\\}\\{");
                    Log.v("forintbs", questionsList.toString());
                    count++;
                }
            }
        }
        is.close();
        json = sb.toString();            
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }        
    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    } 
    // return JSON String
    return null; 
} 
```

显然，该方法现在返回 null，因为无论如何它都无关紧要。到目前为止，当我查看日志以查看打印输出时，我的数组列表是一长并且已按预期正确获取字符串 - 但原始数据的其余部分也按预期删除。我已经完全按照原样保留了我的代码，因此您可以看到我尝试过的内容。有没有人有什么建议？以下是一些示例 JSON：

```
{"category":"elections","id":"0","title":"Who will you vote for in November's Presidential election?","published":"2012-04-02","enddate":"2012-04-30","responsetype":"0"}

{"category":"elections","id":"2","title":"Question title, ladies and gents","published":"2012-04-02","enddate":"2012-04-30","responsetype":"1"} 
```

我不使用 ArrayList 没有问题，而是使用 JSON 对象数组。我只是按照我昨天提出的问题中的建议进行尝试。

编辑~ 这是我的 PHP 脚本：

```
<?php

define("DB_HOST", "localhost");
define("DB_USER", "*");
define("DB_PASSWORD", "*");
define("DB_DATABASE", "*");

mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
mysql_select_db(DB_DATABASE);
$sql=mysql_query("select * from QUESTIONS where CATEGORY like 'elections'");
while($row=mysql_fetch_assoc($sql)) {
$output[]=$row;
}
foreach($output as $value) {
echo json_encode($value);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:38:11.570

正如 Marc B 所说，我需要更强大/更正确的 PHP 代码。另一个 Stack Overflow 用户帮助我完善了 Marc B 帮助我理解的代码。现在 JSON 作为正确编码的数据返回，但我还没有确定如何将它解析为单独的对象。我很快就会到达那里。

这是部分解决方案：[https ://stackoverflow.com/a/10019165/1231943](https://stackoverflow.com/a/10019165/1231943)

# objective-c - 如何重写 UIDatePicker 组件？

> ID：10004778
> 
> 赞同：15
> 
> 时间：2012-04-04T04:06:46.687
> 
> 标签：objective-c, ios, uipickerview, uidatepicker

我注意到[UIDatePicker 不适](https://stackoverflow.com/questions/9521600/show-hebrew-months-in-uidatepicker)用于 iOS 5.0 或 5.1 中的 NSHebrewCalendar。我决定尝试自己编写。我对如何填充数据以及如何以理智和内存高效的方式维护日期标签感到困惑。

每个组件中实际有多少行？什么时候用新标签“重新加载”行？

我要试一试，我会在发现后发布，但如果您知道任何事情，请发布。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-05T03:03:47.777

首先，感谢您提交关于`UIDatePicker`和希伯来日历的错误。:)

* * *

**编辑**现在 iOS 6 已经发布，您会发现它`UIDatePicker`现在可以与希伯来日历一起正常工作，因此不需要下面的代码。但是，我会把它留给后代。

* * *

As you've discovered, creating a functioning date picker is a difficult problem, because there are bajillions of weird edge cases to cover. The Hebrew calendar is particularly weird in this regard, having an [intercalary *month*](http://en.wikipedia.org/wiki/Intercalation) (Adar I), whereas most of western civilization is used to a calendar that only adds an extra day about once every 4 years.

That being said, creating a minimal Hebrew date picker isn't too complex, assuming you're willing to forego some of the niceties that `UIDatePicker` offers. So let's make it simple:

```
@interface HPDatePicker : UIPickerView

@property (nonatomic, retain) NSDate *date;

- (void)setDate:(NSDate *)date animated:(BOOL)animated;

@end 
```

We're simply going to subclass `UIPickerView` and add support for a `date` property. We're going to ignore `minimumDate`, `maximumDate`, `locale`, `calendar`, `timeZone`, and all the other fun properties that `UIDatePicker` provides. This will make our job *much* simpler.

The implementation is going to start off with a class extension:

```
@interface HPDatePicker () <UIPickerViewDelegate, UIPickerViewDataSource>

@end 
```

Simply to hide that the `HPDatePicker` is its own delegate and datasource.

Next we'll define a couple of handy constants:

```
#define LARGE_NUMBER_OF_ROWS 10000

#define MONTH_COMPONENT 0
#define DAY_COMPONENT 1
#define YEAR_COMPONENT 2 
```

You can see here that we're going to hard-code the order of the calendar units. In other words, this date picker will always display things as Month-Day-Year, regardless of any customizations or locale settings that the user may have. So if you're using this in a locale where the default format would want "Day-Month-Year", then too bad. For this simple example, this will suffice.

Now we start the implementation:

```
@implementation HPDatePicker {
    NSCalendar *hebrewCalendar;
    NSDateFormatter *formatter;

    NSRange maxDayRange;
    NSRange maxMonthRange;
}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        [self setDelegate:self];
        [self setDataSource:self];

        [self setShowsSelectionIndicator:YES];

        hebrewCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSHebrewCalendar];
        formatter = [[NSDateFormatter alloc] init];
        [formatter setCalendar:hebrewCalendar];

        maxDayRange = [hebrewCalendar maximumRangeOfUnit:NSDayCalendarUnit];
        maxMonthRange = [hebrewCalendar maximumRangeOfUnit:NSMonthCalendarUnit];

        [self setDate:[NSDate date]];
    }
    return self;
}

- (void)dealloc {
    [hebrewCalendar release];
    [formatter release];
    [super dealloc];
} 
```

We're overriding the designated initializer to do some setup for us. We set the delegate and datasource to be ourself, show the selection indicator, and create a hebrew calendar object. We also create an `NSDateFormatter` and tell it that it should format `NSDates` according to the hebrew calendar. We also pull out a couple of `NSRange` objects and cache them as ivars so we don't have to constantly be looking things up. Finally, we initialize it with the current date.

Here are the implementations of the exposed methods:

```
- (void)setDate:(NSDate *)date {
    [self setDate:date animated:NO];
} 
```

`-setDate:` just forwards on to the other method

```
- (NSDate *)date {
    NSDateComponents *c = [self selectedDateComponents];
    return [hebrewCalendar dateFromComponents:c];
} 
```

Retrieve an `NSDateComponents` representing whatever is selected at the moment, turn it into an `NSDate`, and return that.

```
- (void)setDate:(NSDate *)date animated:(BOOL)animated {
    NSInteger units = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit;
    NSDateComponents *components = [hebrewCalendar components:units fromDate:date];

    {
        NSInteger yearRow = [components year] - 1;
        [self selectRow:yearRow inComponent:YEAR_COMPONENT animated:animated];
    }

    {
        NSInteger middle = floor([self pickerView:self numberOfRowsInComponent:MONTH_COMPONENT] / 2);
        NSInteger startOfPhase = middle - (middle % maxMonthRange.length) - maxMonthRange.location;
        NSInteger monthRow = startOfPhase + [components month];
        [self selectRow:monthRow inComponent:MONTH_COMPONENT animated:animated];
    }

    {
        NSInteger middle = floor([self pickerView:self numberOfRowsInComponent:DAY_COMPONENT] / 2);
        NSInteger startOfPhase = middle - (middle % maxDayRange.length) - maxDayRange.location;
        NSInteger dayRow = startOfPhase + [components day];
        [self selectRow:dayRow inComponent:DAY_COMPONENT animated:animated];
    }
} 
```

And this is where fun stuff starts happening.

First, we'll take the date we were given and ask the hebrew calendar to break it up into a date components object. If I give it an `NSDate` that corresponds to the gregorian date of 4 Apr 2012, then the hebrew calendar is going to give me an `NSDateComponents` object that corresponds to 12 Nisan 5772, which is the same day as 4 Apr 2012.

Based on this information, I figure out which row to select in each unit, and select it. The year case is simple. I simply subtract one (rows are zero-based, but years are 1-based).

For months, I pick the middle of the rows column, figure out where that sequence starts, and add the month number to it. The same with the days.

The implementations of the base `<UIPickerViewDataSource>` methods are fairly trivial. We're displaying 3 components, and each one has 10,000 rows.

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 3;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
    return LARGE_NUMBER_OF_ROWS;
} 
```

Getting what's selected at the current moment is fairly simple. I get the selected row in each component and either add 1 (in the case of `NSYearCalendarUnit`), or do a little mod operation to account for the repeating nature of the other calendar units.

```
- (NSDateComponents *)selectedDateComponents {
    NSDateComponents *c = [[NSDateComponents alloc] init];

    [c setYear:[self selectedRowInComponent:YEAR_COMPONENT] + 1];

    NSInteger monthRow = [self selectedRowInComponent:MONTH_COMPONENT];
    [c setMonth:(monthRow % maxMonthRange.length) + maxMonthRange.location];

    NSInteger dayRow = [self selectedRowInComponent:DAY_COMPONENT];
    [c setDay:(dayRow % maxDayRange.length) + maxDayRange.location];

    return [c autorelease];
} 
```

Finally, I need some strings to show in the UI:

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    NSString *format = nil;
    NSDateComponents *c = [[NSDateComponents alloc] init];

    if (component == YEAR_COMPONENT) {
        format = @"y";
        [c setYear:row+1];
        [c setMonth:1];
        [c setDay:1];        
    } else if (component == MONTH_COMPONENT) {
        format = @"MMMM";
        [c setYear:5774];
        [c setMonth:(row % maxMonthRange.length) + maxMonthRange.location];
        [c setDay:1];
    } else if (component == DAY_COMPONENT) {
        format = @"d";
        [c setYear:5774];
        [c setMonth:1];
        [c setDay:(row % maxDayRange.length) + maxDayRange.location];
    }

    NSDate *d = [hebrewCalendar dateFromComponents:c];
    [c release];

    [formatter setDateFormat:format];

    NSString *title = [formatter stringFromDate:d];

    return title;
}

@end 
```

This is where things are a little bit more complicated. Unfortunately for us, `NSDateFormatter` can only format things when given an actual `NSDate`. I can't just say "here's a 6" and hope to get back "Adar I". Thus, I have to construct an artificial date that has the value I want in the unit I care about.

In the case of years, that's pretty simple. Just create a date components for that year on Tishri 1, and I'm good.

For months, I have to make sure that the year is a leap year. By doing so, I can guarantee that the month names will always be "Adar I" and "Adar II", regardless of whether the current year happens to be a leap year or not.

For days, I picked an arbitrary year, because every Tishri has 30 days (and no month in the Hebrew calendar has more than 30 days).

Once we've built the appropriate date components object, we can quickly turn it into an `NSDate` with our `hebrewCalendar` ivar, set the format string on the date formatter to only be producing strings for the unit we care about, and generate a string.

Assuming you've done all this correctly, you'll end up with this:

![custom hebrew date picker](../Images/c58ef0ec91b815c76017f09c9449fc81.png)

* * *

Some notes:

*   I've left out the implementation of `-pickerView:didSelectRow:inComponent:`. It's up to you to figure out how you want to notify that the selected date changed.

*   This doesn't handle graying out invalid dates. For example, you might want to consider graying out "Adar I" if the currently selected year isn't a leap year. This would require using `-pickerView:viewForRow:inComponent:reusingView:` instead of the `titleForRow:` method.

*   `UIDatePicker` will highlight the current date in blue. Again, you'd have to return a custom view instead of a string to do that.

*   Your date picker will have a blackish bezel, because it is a `UIPickerView`. Only `UIDatePickers` get the blueish one.

*   The components of the picker view will span its entire width. If you want things to fit more naturally, you'll have to override `-pickerView:widthForComponent:` to return a sane value for the appropriate component. This could involve hard coding a value or generating all the strings, sizing them each, and picking the largest one (plus some padding).

*   As noted previously, this always displays things in Month-Day-Year order. Making this dynamic to the current locale would be a little bit trickier. You'd have to get a `@"d MMMM y"` string localized to the current locale (hint: look at the class methods on `NSDateFormatter` for that), and then parse it to figure out what the order is.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T12:55:10.393

我假设您使用的是 UIPickerView？

UIPickerView 像 UITableView 一样工作，你指定另一个类作为 dataSource/delegate，它通过调用该类上的方法来获取它的数据（应该符合 UIPickerViewDelegate/DataSource 协议）。

所以你应该做的是创建一个新类，它是 UIPickerView 的子类，然后在 initWithFrame 方法中，将其设置为自己的数据源/委托，然后实现这些方法。

如果你以前没有使用过 UITableView，你应该熟悉一下数据源/委托模式，因为理解起来有点棘手，但是一旦你理解了它，它就很容易使用。

如果有帮助，我已经编写了一个自定义 UIPicker 来选择国家。这与您上课的方式几乎相同，只是我使用的是国家/地区名称数组而不是日期：

[https://github.com/nicklockwood/CountryPicker](https://github.com/nicklockwood/CountryPicker)

关于内存问题，UIPickerView 仅加载屏幕上可见的标签，并在它们从底部滚动到顶部时回收它们，每次需要显示新行时再次调用您的委托。这是非常节省内存的，因为一次屏幕上只有几个标签。

# css - IE9 在应用边框之前不能正确地对 FIELDSET 进行 CSS

> ID：10004782
> 
> 赞同：0
> 
> 时间：2012-04-04T04:07:22.373
> 
> 标签：css, internet-explorer-9

所以我有一个很好的浮动表单布局，它在 FF 和 Chrome 中运行良好，但在 IE 中却不行（震惊，恐怖！）：

![在此处输入图像描述](../Images/bac21a45181ea4b615a01b1cb726617c.png)

所以，开始测试我去，第一个镜头是在 IE 上的 FIELDSET 中添加一个 1px 的粉红色边框，看看它的边框在哪里，这就是我得到的：

![在此处输入图像描述](../Images/1b57df61cf3c721e3b94d91485461d84.png)

...整洁的 IE，整洁。所以我记得一些关于“显示”在 IE 的布局引擎中触发某些东西或其他东西以使东西表现得像他们应该的那样，所以我要去看看谷歌。但似乎 hasLayout 的东西是 IE7 主义。

因此，细节是：未正确定位的元素是 FIELDSET。它只有一个 CSS 属性。“空白：nowrap；” （它下面的标签带有浮动样式）。添加“新”清除修复不起作用。

所以.. 有人对 IE 到底发生了什么有任何想法吗？另外，顺便说一句，条件语句似乎对我不起作用（...），这也很奇怪。

啊……想起我为什么非常非常讨厌IE的温暖和光芒……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:58:33.770

不总是这样吗？你花时间为 StackOverflow 写一篇文章，当你发布它时，一些你以前没有看到的焦点？

所以......似乎造成这种情况的原因与 IE9 在渲染期间未设置宽度有关。当将边框放在 FIELDSET 上时，它会强制设置至少 2px 的宽度，这足以强制换行。将宽度设置为 0px 仍然会导致问题，但宽度为 1px（或更多）时，它会按预期包裹。最后，我只是简单地在 CSS 类中添加了一个“clear: left”（这可以说是正确的，因为这是我所期望的），一切都在世界上再次正确。

所以......在某些情况下，IE9 似乎不会在渲染（渲染？）元素（在这种情况下为 FIELDSET）设置宽度。这可能与 hasLayout 的东西有关，但我不能 100% 确定。这可能是由于 FIELDSET 中的所有元素都被浮动了。

# iphone - 在 NSMutableDictionary 的派生类中未调用 encodeWithCoder

> ID：10004783
> 
> 赞同：2
> 
> 时间：2012-04-04T04:07:28.043
> 
> 标签：iphone, objective-c, nsmutabledictionary, nskeyedarchiver

基本上我正在使用一些名为 OrderedDictionary 的开源代码，它是从 NSMutableDictionary 派生的。然后我想通过向 OrderedDictionary 类添加编码和解码方法将有序字典数据保存到 NSUserDefaults。但是，我意识到编码和解码方法没有被调用，因此解码的字典不再是有序的。下面是我的代码：

```
@interface OrderedDictionary : NSMutableDictionary <NSCopying, NSCoding>
{
    NSMutableDictionary *dictionary;
    NSMutableArray *array;
} 
```

在实现文件中：

```
/**
 * encode the object
 **/
- (void)encodeWithCoder:(NSCoder *)coder
{
    [super encodeWithCoder:coder];
    [coder encodeObject:dictionary forKey:@"dictionary"];
    [coder encodeObject:array forKey:@"array"];
}

/**
 * decode the object
 */
- (id)initWithCoder:(NSCoder *)coder
{
    self = [super initWithCoder:coder];
    if (self != nil)
    {
        dictionary = [coder decodeObjectForKey:@"dictionary"];
        array = [coder decodeObjectForKey:@"array"];
    }   
    return self;
} 
```

使用它的快速示例代码：

```
dictionary = [[OrderedDictionary alloc] init];
[dictionary setObject:@"one" forKey:@"two"];
[dictionary setObject:@"what" forKey:@"what"];
[dictionary setObject:@"7" forKey:@"7"];
NSLog(@"Final contents of the dictionary: %@", dictionary);

if ([[NSUserDefaults standardUserDefaults] objectForKey:@"myDictionary"] == nil)
{
    [[NSUserDefaults standardUserDefaults] setObject:[NSKeyedArchiver archivedDataWithRootObject:dictionary] 
                                          forKey:@"myDictionary"];
}
else
{
    NSUserDefaults *currentDefaults = [NSUserDefaults standardUserDefaults];

    NSData *savedDictionary = [currentDefaults objectForKey:@"myDictionary"];

    if (savedDictionary != nil)
    {
        OrderedDictionary *oldData = [NSKeyedUnarchiver unarchiveObjectWithData:savedDictionary];
        if (oldData != nil) 
        {
            NSLog(@"Final contents of the retrieved: %@", oldData);

        } 
    }
} 
```

问题是，最终的检索字典没有原始数据顺序，并且根本不调用编码和解码方法。

提前感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T18:04:34.290

有一个调用的 NSObject 方法`-classForCoder`，您需要在 OrderedDictionary 中重写它。从文档：

> classForCoder
> 被子类覆盖以在编码期间替换其自身以外的类。
> 
> -(Class)classForCoder
> 返回值
> 在编码期间替换接收者自己的类的类。
> 
> 讨论
> 该方法由 NSCoder 调用。NSObject 的实现返回接收者的类。类簇的私有子类在归档时会替换其公共超类的名称。

最后一行是关键。因此，在 OrderedDictionary.m 中：

```
- (Class)classForCoder 
{  
    return [self class]; // Instead of NSMutableDictionary
} 
```

此外，如果您不使用 ARC，请确保保留从`-decodeObjectForKey`. 正如 rob mayoff 在下面提到的，您不应该调用`[super initWithCoder:]` (或`[super encodeWithCoder:'`)。我还更改了键字符串以避免冲突。

```
- (id)initWithCoder:(NSCoder *)coder
{
    if (self != nil)
    {
        dictionary = [[coder decodeObjectForKey:@"OrderedDictionary_dictionary"] retain];
        array = [[coder decodeObjectForKey:@"OrderedDictionary_array"] retain];
    }   
    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T04:53:05.987

您可能正在`OrderedDictionary`使用错误的初始化程序创建一个新的`initWithDictionary:`. 试试这个：

```
OrderedDictionary *oldData = [NSKeyedUnarchiver unarchiveObjectWithData: savedDictionary];
if (oldData != nil) 
{
    NSLog(@"Final contents of the retrieved: %@", oldData);
} 
```

确保将`initWithDictionary:`期望`OrderedDictionary`作为参数。我的猜测是它需要一个`NSDictionary`.

编辑：保存默认值的代码应包括以下内容：

```
OrderedDictionary *myDict = ...;
NSData* data = [NSKeyedArchiver archivedDataWithRootObject: myDict];
[[NSUserDefaults standardDefaults] setObject: data forKey: @"myDictionary"]; 
```

# c++ - 我在 C++ 程序中的内存泄漏

> ID：10004785
> 
> 赞同：1
> 
> 时间：2012-04-04T04:07:37.603
> 
> 标签：c++, memory-leaks, new-operator, delete-operator

我在内存分配和泄漏方面遇到了一个新问题，这是我的错误日志：

```
Dr. Memory version 1.4.6 build 2 built on Mar  7 2012 10:14:04
Application cmdline: ""D:\c++\Begin\Lab3-5_OOP\Debug\Lab3-5_OOP.exe""
Recorded 62 suppression(s) from default C:\Program Files (x86)\Dr. Memory/bin/suppress-default.txt

Error #1: UNINITIALIZED READ: reading register eax
# 0 _fu89___ZSt4cout               [D:\c++\Begin\Lab3-5_OOP\Debug/../Controller.cpp:156]
# 1 main                           [D:\c++\Begin\Lab3-5_OOP\Debug/../M.cpp:25]
Note: @0:00:00.924 in thread 4584
Note: instruction: test   %eax %eax

Error #2: LEAK 12 direct bytes 0x00531420-0x0053142c + 1024 indirect bytes
# 0 libstdc++-6.dll!Znwj           
# 1 constr()               [D:\c++\Begin\Lab3-5_OOP\Debug/../ListStruc.cpp:24]
# 2 main                   [D:\c++\Begin\Lab3-5_OOP\Debug/../M.cpp:18]

Error #3: LEAK 12 direct bytes 0x009bec48-0x009bec54 + 1024 indirect bytes
# 0 libstdc++-6.dll!Znwj  +0x23     (0x6fcbb523 <libstdc++-6.dll+0x7b523>)
# 1 constr()               [D:\c++\Begin\Lab3-5_OOP\Debug/../ListStruc.cpp:24]
# 2 main                   [D:\c++\Begin\Lab3-5_OOP\Debug/../M.cpp:20]

DUPLICATE ERROR COUNTS:

SUPPRESSIONS USED:

ERRORS FOUND:
      0 unique,     0 total unaddressable access(es)
      1 unique,     1 total uninitialized access(es)
      0 unique,     0 total invalid heap argument(s)
      0 unique,     0 total warning(s)
      2 unique,     2 total,   2072 byte(s) of leak(s)
      0 unique,     0 total,      0 byte(s) of possible leak(s)
ERRORS IGNORED:
     78 still-reachable allocation(s)
         (re-run with "-show_reachable" for details)
Details: C:\Users\Warzaru\AppData\Roaming/Dr. Memory/DrMemory-Lab3-5_OOP.exe.10024.000/results.txt 
```

结构：

```
const int days=31;
const int exp=6;

struct Arr{
    int days;
    int exp;
    int **M;
};
typedef Arr* Array; 
```

构造函数：

```
void constr(Array &loc){
    //Construct of 31*6 Matrix, were 31 nr. of days and 6 specific types:
    //0-HouseKeeping, 1-Food, 2-Transport, 3-Clothing, 4-TelNet, 5-others
    loc=new Arr;
    loc->days = days;
    loc->exp = exp;
    loc->M = new int*[loc->days];
    for(int i=0; i<loc->days;i++ ){
       loc->M[i] = new int[loc->exp];
       for (int j = 0; j < loc->exp; j++){
           loc->M[i][j] = 0;
       }
    }
} 
```

该程序仅对 ti 的某些功能出错，例如功能：

```
void maxDay(Array &M){
    //Output the day with highest value
    cout<<"test";
    int hD = 0;
    int s1 = 0;
    int s2 = 0;
    cout<<"test";
    for(int i = 0; i<30;i++){
        s1=0;
        for (int j=0; i<5; j++){
            s1 = s1 + M->M[i][j];
            if(s2 <= s1){
                s2 = s1;
                hD = i;
                cout<<"test";
            }
        }
    }

} 
```

这么短，我有一个结构`Arr`（31 * 6 的矩阵），我存储整数（不同类型的费用），但是当我使用我的一些函数时，我得到了分段错误。我对这种错误没有经验，所以任何建议都是有用的。

编辑：

```
void destruc(Array &loc){
    for(int i=0; i<loc->days;i++ ){
       delete[] loc->M[i];
       for (int j = 0; j < loc->exp; j++){
           delete[] loc->M[i][j];
   }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:22:27.733

遵循“释放您动态分配的每个内存块”的规则

`delete`使用您分配的内存释放`new`

这可能会给你一些启发[http://www.cplusplus.com/doc/tutorial/dynamic/](http://www.cplusplus.com/doc/tutorial/dynamic/)

如果您使用分配了一个数组，`new[]`则使用删除它`delete[]`

在这种情况下，我建议您编写构造函数和析构函数，`struct Arr`而不是编写普通函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T04:46:20.027

```
// I hope you intended to write j<5
for (int j=0; i<5; j++){  //infinite Loop... as j is still 0 
```

所以你的程序中的语句会发生什么`i<5`，你的内部 for 循环变成了一个无限循环并试图访问未分配的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T07:35:43.773

```
1    void destruc(Array &loc) {
2        for(int i=0; i<loc->days;i++ ) {
3            delete[] loc->M[i];
4            for (int j = 0; j < loc->exp; j++) {
5                delete[] loc->M[i][j];
6            }
7        }
8    } 
```

我看到你正在 delete[]'ing loc->M[i] （第 3 行），但你仍然在第 5 行引用它的内容。

我建议这是一个错误，因为您已将内存交还给堆，并且应用程序的任何其他部分现在都可以重用它。因此，当您的应用程序到达第 5 行时，它可能没有您期望的内容。

我建议将其重写为...

```
1    void destruc(Array &loc) {
2        for(int i=0; i<loc->days;i++ ) {
3            for (int j = 0; j < loc->exp; j++) {
4                delete[] loc->M[i][j];
5            }
6            delete[] loc->M[i];
7        }
8    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T07:38:52.353

里面的析构函数似乎很奇怪

```
void destruc(Array &loc){
    for(int i=0; i<loc->days;i++ ){
       delete[] loc->M[i]; <-------------- deleting array of pointers to array
       for (int j = 0; j < loc->exp; j++){
           delete[] loc->M[i][j]; <------- deleting pointer to array that
                                           is already deallocated
   }
} 
```

析构函数应如下所示（根据构造函数）：

```
void destruc(Array &loc){
    for(int i=0; i<loc->days;i++ ){
       delete[] loc->M[i];
    }
    delete[] M;
} 
```

# android - 如何将付费安卓应用从一个谷歌账户转移到另一个谷歌账户

> ID：10004787
> 
> 赞同：25
> 
> 时间：2012-04-04T04:08:09.077
> 
> 标签：android, transfer, account

我正在为 android 开发一个 SYSTEM 应用程序来管理设备上的用户帐户。

有没有办法以编程方式将付费用户应用程序从一个帐户转移到另一个帐户？

任何帮助表示赞赏（即使答复不直接针对解决方案）。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-26T08:53:54.437

谷歌在帐户之间传输数据时有这样的说法。

[http://support.google.com/accounts/bin/answer.py?hl=en&answer=63304](http://support.google.com/accounts/bin/answer.py?hl=en&answer=63304)

它列出了某些**可以**传输的数据类型和某些不能传输的数据**类型**。不幸的是，Google Play Apps 属于**NOT**类别。

 ****它的标题很方便：“移动产品数据”

[http://support.google.com/accounts/bin/answer.py?hl=en&answer=58582](http://support.google.com/accounts/bin/answer.py?hl=en&answer=58582)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T04:10:36.577

你将无法做到这一点。您可以将应用程序再次下载到不同设备上的同一用户 ID 帐户，但不能将这些许可证转移到其他用户 ID。

没有办法以编程方式执行此操作 - 我认为您实际上无法执行此操作（除了尝试在 Play 商店致电客户支持）。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2015-01-12T10:06:33.480

现在完全可行。Google 现在允许您在帐户之间转移 Android 应用程序。请查看此链接： [https ://support.google.com/googleplay/android-developer/checklist/3294213?hl=en](https://support.google.com/googleplay/android-developer/checklist/3294213?hl=en)

* * *

## 回答 #4

> 赞同：-10
> 
> 时间：2012-05-10T00:01:04.830

您应该能够将应用程序转移到另一个用户名。您需要所有旧用户信息才能传输它。该应用程序会将其自身从旧帐户删除到新帐户。您也可以限制允许传输的次数。如果您将其转移到应用程序可能会在一年后过期并强制购买更新。****

# java - Eclipse 中缺少基本的 JavaDoc

> ID：10004789
> 
> 赞同：13
> 
> 时间：2012-04-04T04:08:13.040
> 
> 标签：java, eclipse, javadoc

直到几天前，Eclipse 在定位 Java.io.File 等基类的 javadoc 时工作良好。但是，最近，将鼠标悬停在这些类上只会产生一条消息，表明缺少源代码和 javadoc：

“注意：此元素没有附加源，在附加的 Javadoc 中找不到 Javadoc。”

我一辈子都找不到让我重新选择基本文档位置的选项。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-04T04:13:09.003

最好的方法是转到`Project > Properties > Java Build Path > Libraries`并扩展 JRE System Library `[your jre version] then, rt.jar`。选择源附件，单击编辑...。选择源代码文件（外部文件...），然后按 OK。

此链接中提到了附加 java 源代码的其他方法

[http://www.cavdar.net/2008/07/14/3-ways-of-jdk-source-code-attachment-in-eclipse/](http://www.cavdar.net/2008/07/14/3-ways-of-jdk-source-code-attachment-in-eclipse/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-04T04:14:23.660

展开您的 JRE 系统库并找到 rt.jar（Mac OS X 的 classes.jar）。右键单击，然后选择“属性”。

![类.jar](../Images/e0741d1136ac31d7a23bce5910f76208.png)

然后，您可以指定 Javadoc 位置（以及源位置）。

![特性](../Images/c77fc4e5500900b622d9076fa7faf184.png)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-04-23T09:41:45.887

我现在也遇到过几次这个问题。如果您的工作区中有很多项目并且您不想为每个项目设置 javadoc 位置，这尤其令人讨厌。

参考在线文档确实很有效，并且有一种方法可以在全球范围内为所有 Java 库做到这一点：

*   转到：窗口 -> 首选项
*   展开：Java -> 已安装的 JRE
*   选择您的默认 Java 安装
*   按“编辑”
*   选择*所有*JRE 系统库
*   按''Javadoc 位置...''
*   在 Javadoc 位置路径中放入在线文档的路径。例如，对于 Java 8，这是`http://docs.oracle.com/javase/8/docs/api/`. （如果您按“验证...”，它将告诉您它是否是有效的 javadoc 位置。）
*   按“确定”，然后按“完成”，然后按“确定”

在这里你有一些图像：

![Eclipse 设置：已安装的 JRE](../Images/0c2071b357adcbc409e1a8c220b95ca0.png)

![选择所有 JRE 系统库](../Images/20353a6aa98a3db62a25e6a3ab69605f.png)

![编辑 javadoc 位置](../Images/6fc93dba9a71528fc7581903da8ac09e.png)

您的基本 Java javadoc 已准备就绪。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-04T04:13:53.277

在没有 javadocs 的任何方法上按`ctrl+click`（或者如果您在 Mac 上）。`command+click`例如，在这一行中：

```
System.out.println(); 
```

...假设没有可用于的 javadocs `println`，单击控件`println`将打开一个新选项卡，其中带有标有“附加源...”的按钮。就是这样！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-21T10:41:12.153

我有同样的问题。

我卸载了 eclipse，从用户的主目录和应用程序数据目录中删除了所有 eclipse 特定数据，卸载了所有 Java JRE 和 JDK，但没有任何帮助。

**我系统上的解决方案是将 JavaDoc URL 中的协议从 HTTP 更改为 HTTPS**

例如对于 JRE 7，我将 URL 从[http://docs.oracle.com/javase/7/docs/api/](http://docs.oracle.com/javase/7/docs/api/)更改为[https://docs.oracle.com/javase/7/docs/api/](https://docs.oracle.com/javase/7/docs/api/)

（使用特里提到的步骤并将“http”替换为“https”）

# uitableview - 从传递的数据中自动删除重复项或只是不在 uitableview 中创建它们

> ID：10004797
> 
> 赞同：0
> 
> 时间：2012-04-04T04:09:32.703
> 
> 标签：uitableview, uiwebview, nsmutablearray, duplicates

我有一个`uiwebview`将其加载的页面 url 发送到 a`uitableview`以保留访问站点的历史记录。它工作得很好，除了一些站点暂停加载会导致创建另一个 url 引用。尝试访问 redmondpie.com，我的访问列表中有 50 个 redmondpie.com 链接。我做错了吗，还是有一个代码可以用来阻止在页面加载时一遍又一遍地重新创建链接。我想最好的选择是，如果 url 就在正在创建的 URL 旁边，那么就不要创建它，或者其他什么。这是它现在的加载方式。

```
 - (void)webViewDidFinishLoad:(UIWebView *)webView {

urlField.text = [[[[self webView]request] URL] absoluteString];

{
    NSMutableArray *history = [[[NSUserDefaults standardUserDefaults]    arrayForKey:@"History"] mutableCopy];
    if (!history) {
        history = [[NSMutableArray alloc] init];
    }
    NSString *newString  = 
    [urlField.text stringByReplacingOccurrencesOfString:@"http://" withString:@""]

    urlField.text = [NSString stringWithFormat:@"%@", newString];

    [history addObject:newString];
    [[NSUserDefaults standardUserDefaults] setObject:history forKey:@"History"];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T04:21:18.883

在添加它之前检查数组中的最后一个对象是否相同，方法是更改​​此：

```
[history addObject:newString];
[[NSUserDefaults standardUserDefaults] setObject:history forKey:@"History"]; 
```

对此：

```
if (![newString isEqualToString:(NSString *)[history lastObject]]) {
    [history addObject:newString];
    [[NSUserDefaults standardUserDefaults] setObject:history forKey:@"History"];
} 
```

# java - Jasper 报告：如何编译子报告

> ID：10004800
> 
> 赞同：8
> 
> 时间：2012-04-04T04:09:41.190
> 
> 标签：java, jasper-reports, reporting, report

我有一个独立的应用程序，它的职责之一是获取 *.jrxml 文件的路径并编译它。

在出现带有子报表的报表之前，我可以毫无问题地执行此操作，其中主报表的编译不会编译其任何子报表，从而导致稍后找不到子报表 *.jasper 文件。

有没有办法

1) 将 JasperCompileManager 设置为自动拾取子报表？

2) 获取包含在 JasperDesign 或 JasperReport 对象中的子报表的路径列表？

我无法直接访问 jrxml 文件，因此修改报告以适应编译方法不是一种选择，也不能应用任何标准命名方案来推断哪些子报告属于哪些报告。

这里有一个类似的问题：

[http://jasperforge.org/plugins/espforum/view.php?group_id=102&forumid=103&topicid=40683](http://jasperforge.org/plugins/espforum/view.php?group_id=102&forumid=103&topicid=40683)

其中 JRVisitor 用于生成 JRSubreport 对象列表，但是没有说明如何使用它来获取子报表的路径以编译它并递归查找子报表的子报表，我无法弄清楚。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T07:15:04.623

好的，所以它需要一些hackery，但我能够弄清楚一些事情......

subreport.getExpression().getText() 返回主报表中子报表小部件事物的表达式字段，是一个看起来像这样的字符串

```
$P{SUBREPORT_DIR} + "/report_sub1.jasper" 
```

因此，我能够使用以下方法将其拆开以获取名称。它不理想，但它应该坚持下去。

```
JRElementsVisitor.visitReport(jasperReport, new JRVisitor(){

  // ** snip other overrides **

  @Override
  public void visitSubreport(JRSubreport subreport){
    String expression = subreport.getExpression().getText().replace(".jasper", ".jrxml");
    StringTokenizer st = new StringTokenizer(expression, "\"/");
    String subreportName = null;
    while(st.hasMoreTokens())
      subreportName = st.nextToken();
    compileReport(subreportName);
  }
} 
```

**编辑：**

这是我的整个 compileReport 方法，演示了如何递归编译子报表的子报表等。并不完美，但对我的应用程序来说已经足够了。所有已编译的 *.jasper 文件都保存回磁盘上与未编译的 *.jrxml 文件被拾取的位置相同的位置，但这并不难更改。如果您想运行它或其他什么，则将编译的主报告对象传回。

请记住，此代码在此编辑时已有 9 个月的历史，并且 Jasper Reports 的较新版本现在可能具有此类内容的内置函数。

```
private static final String reportsPath = "someplace/nice/";
private ArrayList<String>   completedSubReports = new ArrayList<String>(30);
private Throwable           subReportException  = null;

/**
 * Recursively compile report and subreports
 */
public JasperReport compileReport(String reportName) throws Throwable{
  JasperDesign jasperDesign = JRXmlLoader.load(reportsPath + reportName + ".jrxml");
  JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);
  JRSaver.saveObject(jasperReport, reportsPath + reportName + ".jasper");
  toLog("Saving compiled report to: " + reportsPath + reportName + ".jasper");
  //Compile sub reports
  JRElementsVisitor.visitReport(jasperReport, new JRVisitor(){
    @Override
    public void visitBreak(JRBreak breakElement){}

    @Override
    public void visitChart(JRChart chart){}

    @Override
    public void visitCrosstab(JRCrosstab crosstab){}

    @Override
    public void visitElementGroup(JRElementGroup elementGroup){}

    @Override
    public void visitEllipse(JREllipse ellipse){}

    @Override
    public void visitFrame(JRFrame frame){}

    @Override
    public void visitImage(JRImage image){}

    @Override
    public void visitLine(JRLine line){}

    @Override
    public void visitRectangle(JRRectangle rectangle){}

    @Override
    public void visitStaticText(JRStaticText staticText){}

    @Override
    public void visitSubreport(JRSubreport subreport){
      try{
        String expression = subreport.getExpression().getText().replace(".jasper", "");
        StringTokenizer st = new StringTokenizer(expression, "\"/");
        String subReportName = null;
        while(st.hasMoreTokens())
          subReportName = st.nextToken();
        //Sometimes the same subreport can be used multiple times, but
        //there is no need to compile multiple times
        if(completedSubReports.contains(subReportName)) return;
        completedSubReports.add(subReportName);
        compileReport(subReportName);
      }
      catch(Throwable e){
        subReportException = e;
      }
    }
    @Override
    public void visitTextField(JRTextField textField){}

    @Override
    public void visitComponentElement(JRComponentElement componentElement){}

    @Override
    public void visitGenericElement(JRGenericElement element){}
  });
  if(subReportException != null) throw new RuntimeException(subReportException);
  return jasperReport;
} 
```

# jquery - 如何在下一个 div 之后移动 div

> ID：10004801
> 
> 赞同：6
> 
> 时间：2012-04-04T04:09:43.140
> 
> 标签：jquery, html

如何在下一个 div 之后移动 div。例如，我有 3 个不同的 div 坐在这里。

```
<div class="div1">Div1</div>
<div class="div2">Div2</div>
<div class="div3">Div3</div> 
```

我想在第二个 div 之后移动第一个 div。这意味着`div2`将是第一，`div1`将是第二。我有一堆相同的 html 格式。

我想执行 jquery 之类的东西

```
$(".div1").each(function() {
    $(this).appendTo().$(this).after();
}); 
```

让我知道这是否没有意义。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-04T04:19:37.107

您可以获取[.next()](http://api.jquery.com/next/)元素，并将其放置在[.after()](http://api.jquery.com/after/)

或者

你可以[.insertAfter()](http://api.jquery.com/insertAfter/) .next [()](http://api.jquery.com/next/)元素

[http://jsfiddle.net/kFTc5/1/](http://jsfiddle.net/kFTc5/1/)

```
$(".div1").each(function() {
    var item = $(this);

    //either this:
    item.next().after(item);

    //or this:
    item.insertAfter(item.next());

}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-04T04:21:25.703

以下是您如何以 jQuery 方式使用 DOM 进行剪切粘贴操作。

```
Var temp=  $(“div1”).detach(); //Performs the cut operation
temp.insertAfter(“div2”);  //Does the paste 
```

# c# - 使用自定义颜色在 wpf 上创建 vista 玻璃效果

> ID：10004802
> 
> 赞同：0
> 
> 时间：2012-04-04T04:10:05.063
> 
> 标签：c#, wpf, themes, aero-glass

有很多教程向您展示如何在像[这样](https://i.stack.imgur.com/HSNoE.png)的 wpf 应用程序中使用 vista glass 效果。

我不想使用用户选择的默认颜色主题。换句话说，如果我将 vista glass 效果应用于我的 wpf 应用程序，它将等于用户在其中选择的任何内容：

![在此处输入图像描述](../Images/a70714c2ab3cd3d57320c50b592f8766.png)

* * *

## 这是我尝试过的，它在某种程度上是一个解决方案：

> **1) 获取整个桌面的图片。我稍后会弄清楚如何用代码做到这一点**
> 
> **2）将图像放在画布中。当我捕获我的桌面时，我碰巧打开了 Outlook。还要在顶部放置一个矩形，上面带有您想要使用的颜色并具有一定的透明度**

![在此处输入图像描述](../Images/a70714c2ab3cd3d57320c50b592f8766.png)

> **3）创建属性X和Y，实现INotifyPropertyChanged接口，以便我们可以在后面的代码中更新图像的位置：**

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    double _X;
    public double X
    {
        get
        {
            return _X;
        }
        set
        {
            _X = value;
            NotifyPropertyChanged("X");
        }
    }

    double _Y;
    public double Y
    {
        get
        {
            return _Y;
        }
        set
        {
            _Y = value;
            NotifyPropertyChanged("Y");
        }
    }
    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    } 
```

**不要忘记设置：`this.DataContext = this;` 以便在窗口加载完成时成功绑定属性**

> **4）现在我们需要放置相对于桌面而不是窗口的位置的图像。因此，每当窗口移动时，我们都会创建一个事件处理程序，我们会固定图像的位置，例如：**

```
void MainWindow_Loaded(object sender, RoutedEventArgs e)
    {
        this.DataContext = this;

        this.LocationChanged += new EventHandler(MainWindow_LocationChanged);

    }

    void MainWindow_LocationChanged(object sender, EventArgs e)
    {
        X = -((System.Windows.Window)(sender)).RestoreBounds.TopLeft.X;
        Y = -((System.Windows.Window)(sender)).RestoreBounds.TopLeft.Y;            
    } 
```

## 最后你应该有类似的东西：

![在此处输入图像描述](../Images/9c828964b5c4048b022da26f16daad3f.png)

**如果我在哪里有整个桌面的图像，这个解决方案会很好用。每次桌面更改时，我都必须更新图像源。此外，在更新图像源时，我必须在没有窗口的情况下捕获桌面图像。我不知道如何在没有主窗口的情况下获取桌面图像。也许我将不得不隐藏我的窗口获取屏幕截图，然后再次显示我的窗口**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:24:12.063

如果您想要 WPF 中的半透明窗口，只需将窗口不透明度设置为 < 1，将 AllowsTransparency 设置为 true，不幸的是，您还必须将 WindowStyle 设置为 None。这意味着如果需要，您必须重新创建窗口镶边。

# sql-server - 无法将 Northwind 数据库附加到 sql server 2008 R2

> ID：10004805
> 
> 赞同：5
> 
> 时间：2012-04-04T04:10:08.530
> 
> 标签：sql-server, northwind

当我尝试在 SQL Server Management Studio 中收到以下错误时：

> 标题：Microsoft SQL Server 管理工作室
> 
> 为服务器“AHAKEEM”附加数据库失败。(Microsoft.SqlServer.Smo)
> 
> 附加信息：
> 
> 执行 Transact-SQL 语句或批处理时发生异常。(Microsoft.SqlServer.ConnectionInfo)
> 
> 无法打开物理文件“C:\SQL Server 2000 Sample Databases\northwnd.mdf”。操作系统错误 5：“5（无法检索此错误的文本。原因：15105）”。（Microsoft SQL Server，错误：5120）

这是`Northwinds mdf`刚刚来自 Microsoft 安装程序的新版本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T04:15:57.833

错误 5120 是您正在打开的文件的共享冲突。尝试以管理员身份启动 SQL Management Studio，并确保尚未附加数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T07:51:40.107

当 mdf 或 ldf 文件丢失时会发生错误，如果它是一个 ldf，我们可以使用下面列出的脚本重新创建它：

方法一：重新创建所有日志文件

```
EXECUTE sp_attach_single_file_db @dbname = 'SAMPLEDB',
@physname = N'D:\MSSQL\DATA\SAMPLEDB.mdf' 
GO 
```

方法 2：如果缺少一个或多个日志文件，则重新创建它们。

```
CREATE DATABASE SAMPLEDB ON
(FILENAME = N'D:\MSSQL\DATA\SAMPLEDB.mdf')
FOR ATTACH_REBUILD_LOG
GO 
```

方法 3：如果仅缺少一个文件，则重新创建它们。

```
CREATE DATABASE SAMPLEDB ON
( FILENAME = N'D:\MSSQL\DATA\SAMPLEDB.mdf')
FOR ATTACH
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-02T19:47:56.767

我尝试[为 SQL Server 2000 安装 Northwind 和 pubs 示例数据库](http://www.microsoft.com/en-us/download/details.aspx?id=23654)，并将这两个数据库附加到 SQL Server 2014 中，并给了我一个错误，因为它们是兼容的版本。

这些是在 SQL Server 2014 中成功安装示例数据库的步骤：

1.  在 PC 中下载示例数据库后，打开 SQL Server 2014 Management Studio。成功连接后，您的 SQL Server 实例应列在对象资源管理器中。
2.  现在在***File*** Menu 下选择***Open*** > ***File***。在您的计算机中找到***instnwnd.sql***并选择它。单击打开 SQL 脚本应该会在主窗口中打开。不要单击执行。如果这样做，您将收到以下错误：

> 找不到存储过程“sp_dboption”。

*   在第 20 行附近，删除以下两行：

> exec sp_dboption 'Northwind','trunc. 登录 chkpt。','true' exec sp_dboption 'Northwind','select into/bulkcopy','true'

*   用这一行替换它们，如下所示：

> 更改数据库 Northwind 设置恢复简单

要附加 ' *pubs* ' 数据库，重复上面的步骤 2，这次打开***instpubs.sql***文件。像以前一样将*sp_dboption*替换为：

> 更改数据库 Pubs 设置恢复简单

*   剩下的就是执行脚本，所以在两个脚本中都单击**Execute**。

**注意：**默认情况下，示例数据库的文件夹位置是“ *C:\SQL Server 2000 Sample Databases* ”

# r - R中的日期格式

> ID：10004808
> 
> 赞同：3
> 
> 时间：2012-04-04T04:10:51.437
> 
> 标签：r, date

我在 chr 格式的数据框中有一个日期列，如下所示：

`chr [1:1944] "20-Sep-90" "24-Feb-05" "16-Aug-65" "19-Nov-56" "28-Nov-59" "19-Apr-86"`

我想使用类似的东西转换为日期：

`strptime(x=data$dob, '%d-%b-%y')`

但是我在结果中得到了几个未来的日期，比如

```
[1] “1990-09-20” “2005-02-24” “2065-08-16” “2056-11-19” “2059-11-28” “1986-04-19” “2041-04- 01" "1971-01-23"
[9] “1995-11-25” “1995-11-25” “2009-02-11” “2002-09-19” “1977-10-06” “1998-03-22” “2050-03- 12" "2030-03-26"

```

有没有办法确保我返回正确世纪开始的日期？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T04:26:22.360

它看起来（从 in 的文档`%y`中`?strptime`）看起来没有任何明显的选项可以更改从 2 位数年份推断的默认世纪。

但是，由于返回的对象`strptime()`具有类**POSIXlt**，因此从今天之后的任何日期（或您想要使用的任何其他截止日期之后）减去 100 年是一件非常简单的事情。

```
# Use strptime() to create object of class POSIXlt
dd <- c("20-Sep-90", "24-Feb-05", "16-Aug-65", 
        "19-Nov-56", "28-Nov-59", "19-Apr-86")
DD <- strptime(dd, '%d-%b-%y')

# Subtract 100 years from any date after today
DD$year <- ifelse(DD > Sys.time(), DD$year-100, DD$year)
DD
[1] "1990-09-20" "2005-02-24" "1965-08-16" "1956-11-19" "1959-11-28" "1986-04-19" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-15T11:14:46.130

```
 dd <- c("20-Sep-90", "24-Feb-05", "16-Aug-65", 
        "19-Nov-56", "28-Nov-59", "19-Apr-86")
    library(lubridate)
    DD=dmy(dd) 
```

[https://cran.r-project.org/web/packages/lubridate/vignettes/lubridate.html](https://cran.r-project.org/web/packages/lubridate/vignettes/lubridate.html) [http://vita.had.co.nz/papers/lubridate.pdf](http://vita.had.co.nz/papers/lubridate.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-14T07:05:12.553

```
strptime(data$dob, "%Y/%m/%d") 
```

# client-side - 无法扩展（并保持扩展），我的 radgrid 的详细信息表。

> ID：10004811
> 
> 赞同：1
> 
> 时间：2012-04-04T04:11:27.273
> 
> 标签：client-side, radgrid

我正在使用 Telerik radgrid。我想展开当前正在编辑的项目以显示详细信息。我创建了一个在 OnCommand 事件发生时触发的函数。发生的事情是细节扩展，然后再次收缩！无论我如何为主数据项或详细信息设置 HierarchyLoadMode，我已经尝试了所有我能想到的设置，当主数据项进入编辑模式时，它仍然不会保持展开状态。

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true"
CodeBehind="Users.aspx.cs" Inherits="WebCallManagerData.Account.Users" %>

<%@ Register Assembly="Telerik.Web.UI" Namespace="Telerik.Web.UI" TagPrefix="telerik" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
    <script type="text/javascript">
        function OnCommand(sender, args)
        {

            if (args.get_commandName() == 'Edit')
            {
                rowIndex = args.get_commandArgument();
                var radGrid = $find("<%= rgUsers.ClientID %>");
                var dataItem = radGrid.get_masterTableView().get_dataItems()[rowIndex];
                dataItem.set_expanded(true);

            }
            else if (args.get_commandName() == 'ExpandCollapse')
            {
                //dumpObject(args);
            }

        }

    </script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <asp:Label ForeColor="Red" Text="" ID="DisplayMessage1" runat="server" />
    <telerik:RadAjaxManagerProxy ID="RadAjaxManagerProxy1" runat="server">
        <AjaxSettings>
            <telerik:AjaxSetting AjaxControlID="rgUsers">
            </telerik:AjaxSetting>
        </AjaxSettings>
    </telerik:RadAjaxManagerProxy>
    <telerik:RadGrid ID="rgUsers" runat="server" CellSpacing="0" DataSourceID="odsUsers"
        GridLines="None" AutoGenerateColumns="False">
        <ClientSettings>
            <ClientEvents OnCommand="OnCommand" />
            <Selecting CellSelectionMode="None"></Selecting>
        </ClientSettings>
        <MasterTableView DataSourceID="odsUsers" AllowAutomaticDeletes="True" AllowAutomaticInserts="True"
            AllowAutomaticUpdates="True" DataKeyNames="UserName" HierarchyLoadMode="Client">
            <DetailTables>
                <telerik:GridTableView runat="server" DataSourceID="odsUserRole" AllowAutomaticUpdates="True"
                    AutoGenerateColumns="True" EditMode="EditForms" HierarchyLoadMode="Client">
                    <ParentTableRelation>
                        <telerik:GridRelationFields DetailKeyField="UserName" MasterKeyField="UserName" />
                    </ParentTableRelation>
                    <CommandItemSettings ExportToPdfText="Export to PDF" />
                    <RowIndicatorColumn FilterControlAltText="Filter RowIndicator column">
                    </RowIndicatorColumn>
                    <ExpandCollapseColumn FilterControlAltText="Filter ExpandColumn column">
                    </ExpandCollapseColumn>
                    <Columns>
                        <telerik:GridEditCommandColumn ButtonType="ImageButton" FilterControlAltText="Filter EditCommandColumn column">
                        </telerik:GridEditCommandColumn>
                    </Columns>
                    <EditFormSettings>
                        <EditColumn FilterControlAltText="Filter EditCommandColumn column" UniqueName="EditCommandColumn1">
                        </EditColumn>
                    </EditFormSettings>
                </telerik:GridTableView>
            </DetailTables>
            <CommandItemSettings ExportToPdfText="Export to PDF"></CommandItemSettings>
            <RowIndicatorColumn FilterControlAltText="Filter RowIndicator column">
                <HeaderStyle Width="20px"></HeaderStyle>
            </RowIndicatorColumn>
            <ExpandCollapseColumn FilterControlAltText="Filter ExpandColumn column" Visible="True">
                <HeaderStyle Width="20px"></HeaderStyle>
            </ExpandCollapseColumn>
            <Columns>
                <telerik:GridEditCommandColumn ButtonType="ImageButton" FilterControlAltText="Filter EditCommandColumn column">
                </telerik:GridEditCommandColumn>
                <telerik:GridBoundColumn DataField="UserName" FilterControlAltText="Filter UserName column"
                    HeaderText="UserName" SortExpression="UserName" UniqueName="UserName">
                </telerik:GridBoundColumn>
                <telerik:GridBoundColumn DataField="Email" FilterControlAltText="Filter Email column"
                    HeaderText="Email" SortExpression="Email" UniqueName="Email">
                </telerik:GridBoundColumn>
                <telerik:GridCheckBoxColumn DataField="Approved" DataType="System.Boolean" FilterControlAltText="Filter Approved column"
                    HeaderText="Approved" SortExpression="Approved" UniqueName="Approved">
                </telerik:GridCheckBoxColumn>
                <telerik:GridCheckBoxColumn DataField="LockedOut" DataType="System.Boolean" FilterControlAltText="Filter LockedOut column"
                    HeaderText="LockedOut" SortExpression="LockedOut" UniqueName="LockedOut">
                </telerik:GridCheckBoxColumn>
                <telerik:GridBoundColumn DataField="Creation" FilterControlAltText="Filter Creation column"
                    HeaderText="Creation" SortExpression="Creation" UniqueName="Creation" DataType="System.DateTime">
                </telerik:GridBoundColumn>
                <telerik:GridBoundColumn DataField="LastLogin" DataType="System.DateTime" FilterControlAltText="Filter LastLogin column"
                    HeaderText="LastLogin" SortExpression="LastLogin" UniqueName="LastLogin">
                </telerik:GridBoundColumn>
                <telerik:GridBoundColumn DataField="LastActivity" DataType="System.DateTime" FilterControlAltText="Filter LastActivity column"
                    HeaderText="LastActivity" SortExpression="LastActivity" UniqueName="LastActivity">
                </telerik:GridBoundColumn>
                <telerik:GridBoundColumn DataField="LastPasswordChanged" DataType="System.DateTime"
                    FilterControlAltText="Filter LastPasswordChanged column" HeaderText="LastPasswordChanged"
                    SortExpression="LastPasswordChanged" UniqueName="LastPasswordChanged">
                </telerik:GridBoundColumn>
                <telerik:GridCheckBoxColumn DataField="Online" DataType="System.Boolean" FilterControlAltText="Filter Online column"
                    HeaderText="Online" SortExpression="Online" UniqueName="Online">
                </telerik:GridCheckBoxColumn>
                <telerik:GridBoundColumn DataField="Password" FilterControlAltText="Filter Password column"
                    HeaderText="Password" SortExpression="Password" UniqueName="Password">
                </telerik:GridBoundColumn>
            </Columns>
            <EditFormSettings>
                <EditColumn FilterControlAltText="Filter EditCommandColumn column">
                </EditColumn>
            </EditFormSettings>
        </MasterTableView>
        <FilterMenu EnableImageSprites="False">
        </FilterMenu>
        <HeaderContextMenu CssClass="GridContextMenu GridContextMenu_Default">
        </HeaderContextMenu>
    </telerik:RadGrid>
    <asp:ObjectDataSource ID="odsUserRole" runat="server" SelectMethod="GetUserRoles"
        TypeName="WebCallManagerData.Account.MemberShipHelper.User" OldValuesParameterFormatString="original_{0}"
        UpdateMethod="UpdateUserRoles">
        <SelectParameters>
            <asp:Parameter DefaultValue="" Name="UserName" Type="String" />
        </SelectParameters>
        <UpdateParameters>
            <asp:Parameter Name="ur" Type="Object" />
            <asp:Parameter Name="UserName" Type="String" />
        </UpdateParameters>
    </asp:ObjectDataSource>
    <asp:ObjectDataSource ID="odsUsers" runat="server" SelectMethod="GetAllUsers" TypeName="WebCallManagerData.Account.MemberShipHelper.User">
    </asp:ObjectDataSource>
</asp:Content> 
```

# asp.net-mvc-3 - 带十进制的数据注释不起作用

> ID：10004813
> 
> 赞同：3
> 
> 时间：2012-04-04T04:11:59.583
> 
> 标签：asp.net-mvc-3, data-annotations

我们有这样的代码：

```
 [DisplayName("Refresh Rate")]
    [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:G2}")]
    [Range(1.00, 150.00, ErrorMessage = "Must be between 1 and 150")]
    public virtual decimal RefreshRate { get; set; } 
```

这是行不通的。如果我们将其更改为

```
[Range(0.00, 150.00, .... 
```

有用。如果我们尝试使用*正确的*方法

```
[Range(typeof(Decimal), "1", "150", .... 
```

它也不起作用。“不起作用”是指它没有验证。为什么 0 会起作用，而其他任何数字都不起作用？我们怎样才能使这段代码工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T10:04:19.693

我不知道您验证小数的目的是什么，但是也许这个技巧对您有用：

由于您需要 2 个精度数字，因此您可以使用一个 DataType：Currency。因此，也许以下内容对您有用：

```
[DisplayName("Refresh Rate")]
[Datatype(DataType.Currency)]
[Range(1, 150, ErrorMessage = "Must be between 1 and 150")]
public virtual decimal RefreshRate { get; set; } 
```

请告诉我它是否不起作用...

# crystal-reports - 水晶报表 - 隐藏特定页面

> ID：10004814
> 
> 赞同：0
> 
> 时间：2012-04-04T04:12:06.670
> 
> 标签：crystal-reports, header, hide

我开发了一份水晶报告。它必须有 4 页作为默认值，并根据条件附加 2 页。

当条件成功时，它会正确显示第 5 页和第 6 页中的所有文本对象，但在其他条件下，它会显示 4 页具有适当数据的页面，并且在最后 2 页中显示具有页眉的空页面。

如何抑制/完全隐藏最后 2 页？

请建议

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:15:16.500

在部分专家中，接下来要抑制使用以下公式

如果 [99,100] 中的页码则为 true 否则为 false

笔记; 假设 99 和 100 是报告的最后 2 页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:22:07.403

您最好的选择是创建一个包含多个报表页脚部分的报表。然后，您可以将每个报表页脚部分调整为 1 页高并添加相关条件和对象，或者将子报表添加到包含字段/逻辑的每个报表页脚部分。

我可能会创建 8 个报告页脚部分（2 个为空白），然后决定是显示 2 个空白部分还是显示 2 个带有相关对象的部分。

# vim - 如何在 Vim 中删除新行？

> ID：10004824
> 
> 赞同：0
> 
> 时间：2012-04-04T04:13:10.767
> 
> 标签：vim

> **可能重复：**
> [如何在 vi 中加入两行？](https://stackoverflow.com/questions/1912905/how-do-i-join-two-lines-in-vi)

我有以下文字：

```
the bunny
  is very cute 
```

如何快速删除`\n\t`介于`bunny`and之间`is`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:20:28.797

键入`J`（大写 J）以连接行。

# java - 如何在java中发送电子邮件

> ID：10004828
> 
> 赞同：-4
> 
> 时间：2012-04-04T04:13:36.223
> 
> 标签：java, email, jsp, smtp

> **可能重复：**
> [使用 java 发送电子邮件](https://stackoverflow.com/questions/3649014/send-email-using-java)

需要向用户发送电子邮件..必须具有输入电子邮件ID或使用联系人搜索的能力..通过填写收件人ID发送普通电子邮件也可以..如果使用需要jsp代码和库文件..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T04:17:10.907

有一个完整的 API，请查看[JavaMail](http://www.oracle.com/technetwork/java/javamail/index.html)的文档。

# android - 从对话框中获取价值

> ID：10004831
> 
> 赞同：5
> 
> 时间：2012-04-04T04:14:00.140
> 
> 标签：android, android-dialog

我想`Dialog`用`EditText`. 我设想它有两个按钮：一个肯定按钮，它将保留包含在 中的文本`EditText`，以及一个否定按钮，它将取消并返回`Activity`启动它的按钮，就好像什么都没发生一样。我试过使用`AlertDialog`没有成功：

```
AlertDialog.Builder builder = new Builder(context);
final EditText text = new EditText(context);

builder.setTitle("New Profile").setMessage("Name this new profile").setView(text);
builder.setPositiveButton("Create", new OnClickListener() {

    public void onClick(DialogInterface di, int i) {
        final String name = text.getText().toString();
        //do something with it
    }
});
builder.setNegativeButton("Cancel", new OnClickListener() {

    public void onClick(DialogInterface di, int i) {
    }
});
builder.create().show(); 
```

我的`setView()`方法有问题吗？使用自定义`Dialog`会更实用吗？

**编辑：**

我得到了几个答案，说代码对他们有用……不知道为什么它对我不起作用。这是日志猫：

```
E/AndroidRuntime(  326): FATAL EXCEPTION: main
E/AndroidRuntime(  326): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
E/AndroidRuntime(  326):    at android.view.ViewRoot.setView(ViewRoot.java:531)
E/AndroidRuntime(  326):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
E/AndroidRuntime(  326):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
E/AndroidRuntime(  326):    at android.app.Dialog.show(Dialog.java:241)
E/AndroidRuntime(  326):    at com.gobernador.TopPage.onListItemClick(TopPage.java:77)
E/AndroidRuntime(  326):    at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
E/AndroidRuntime(  326):    at android.widget.AdapterView.performItemClick(AdapterView.java:284)
E/AndroidRuntime(  326):    at android.widget.ListView.performItemClick(ListView.java:3513)
E/AndroidRuntime(  326):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
E/AndroidRuntime(  326):    at android.os.Handler.handleCallback(Handler.java:587)
E/AndroidRuntime(  326):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(  326):    at android.os.Looper.loop(Looper.java:123)
E/AndroidRuntime(  326):    at android.app.ActivityThread.main(ActivityThread.java:3683)
E/AndroidRuntime(  326):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  326):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(  326):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/AndroidRuntime(  326):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/AndroidRuntime(  326):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T06:01:19.967

gobernador Agarwal 是对的，我也试过你的代码并且它正在工作，通过用**这个替换上下文来尝试它**

```
AlertDialog.Builder builder = new Builder(this);
        final EditText text = new EditText(this);

        builder.setTitle("New Profile").setMessage("Name this new profile").setView(text);
        builder.setPositiveButton("Create", new OnClickListener() {

            public void onClick(DialogInterface di, int i) {
                final String name = text.getText().toString();
                //do something with it
            }
        });
        builder.setNegativeButton("Cancel", new OnClickListener() {

            public void onClick(DialogInterface di, int i) {
            }
        });
        builder.create().show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T04:23:51.353

试试这个，它对我有用

```
 AlertDialog.Builder alert = new AlertDialog.Builder(this);
         alert.setTitle("Title");
         alert.setMessage("Message");
        // Set an EditText view to get user input 
       final EditText input = new EditText(this);
       alert.setView(input);
       alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int whichButton) {
                  String value = input.getText();
                 // Do something with value!
       }
       });

      alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialog, int whichButton) {
             // Canceled.
      }
     });

     alert.show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T04:35:19.057

您可以使用自定义对话框而不是`AlertDialog`这样

```
Dialog dilog=new Dialog(this);
dilog.requestWindowFeature(Window.FEATURE_NO_TITLE);
dilog.setContentView(R.layout.yourlayout_in_xml); 
```

并参考其领域

```
EditText youredittext=(EditText)dilog.findViewById(R.id.youredittext);
String textGet = youredittext.getText().toString(); // u will get ur inserted stting here

dilog.show() to show it 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T04:18:38.493

您需要将自定义视图放置在对话框中。您可以动态创建视图或从 XML 扩展它。您将要使用而不是*setTitle*、*setNegativeButton*等的方法是[setView](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setView%28android.view.View%29)。

# python - 如何在pyglet包中使用暂停方法

> ID：10004837
> 
> 赞同：0
> 
> 时间：2012-04-04T04:15:04.087
> 
> 标签：python, pyglet

我正在使用 python 中的 pyglet 包为音乐播放器编写代码。我可以成功播放一首歌。但是打电话后我不能暂停这首歌`pyglet.app.run()`。

如果我`pyglet.app.run()`在暂停后打电话，我就无法播放这首歌。如何在我的代码中管理播放和暂停？

*我的代码*：

```
import pyglet

import time

player = pyglet.media.Player()

player.queue(pyglet.resource.media('1.mp3'))

player.play()

pyglet.app.run()

time.sleep(5)

player.pause()

print player.time() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-01-16T06:52:57.147

```
#This should play the video then pause after 12 seconds of
# play. Stay paused for 4 seconds and play again.
#Note AVbin7 needs to be installed to play mp4s

import pyglet
from time import sleep
vidPath="/home/path/to/file.mp4"
window = pyglet.window.Window()
player = pyglet.media.Player()
source = pyglet.media.StreamingSource()
MediaLoad = pyglet.media.load(vidPath)
pt = 0
player.queue(MediaLoad)
player.play()

@window.event
def on_draw():
    global pt
    window.clear()
    if player.source and player.source.video_format:
        player.get_texture().blit(0,0)
        if player.time >= 12 and pt == 0:
            print("pausing")
            player.pause()
            sleep(4)
            player.play()
            pt = 1

pyglet.app.run() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T17:05:31.200

```
pyglet.app.run() 
```

这个函数是一个无限循环。您可以创建新线程，您可以睡觉。

```
class ControllerThread(threading.Thread):
def __init__(self, player):
    threading.Thread.__init__(self)
    self.player = player

def run(self):
    time.sleep(10)
    self.player.pause()

player = pyglet.media.Player()
pyglet.resource.path = [r'path/to/music']
pyglet.resource.reindex()

music = pyglet.resource.media(r'awesomeSong.mp3')
player.queue(music)
player.play()

c = ControllerThread(player)
c.start()

pyglet.app.run() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-22T00:56:25.427

以下示例（python 3.7、pyglet 1.5.6）使用 SPACE 暂停/恢复视频播放：

```
import pyglet
from pyglet.window import key

source = pyglet.media.load(VIDEO_FILE_PATH)
fmt = source.video_format

player = pyglet.media.Player()
player.queue(source)
player.play()

window = pyglet.window.Window(width=fmt.width, height=fmt.height)

@window.event
def on_draw():
    player.get_texture().blit(0, 0)

@window.event
def on_key_press(symbol, modifiers):
    if symbol == key.SPACE:
        if player.playing:
            player.pause()
        else:
            player.play()

pyglet.app.run() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-30T15:40:54.620

这段代码应该适合你

```
import pyglet
import threading
import time
class ControllerThread(threading.Thread):
    def __init__(self, player):
    threading.Thread.__init__(self)
        self.player = player
    def run(self):
        self.player.pause()
player = pyglet.media.Player()
pyglet.resource.path = [r'/your/source/path/']
pyglet.resource.reindex()
def muz():
    music = pyglet.resource.media(r'file.mp3')
    player.queue(music)
    player.play()
t=threading.Thread(target=muz)  
a=''
while a!=' ':
   a=raw_input("STOP/Play S/P: ")
   if a=='s':
       c = ControllerThread(player)
       c.start()
   elif a=='p':
       if t.isAlive():
           player.play()
       else:
           t=threading.Thread(target=muz)   
           t.start()
pyglet.app.run() 
```

# jenkins - 如何使用参数化构建标记以将构建限制为从节点使用

> ID：10004839
> 
> 赞同：4
> 
> 时间：2012-04-04T04:15:38.067
> 
> 标签：jenkins, jenkins-plugins

对于我的 Jenkins 工作，我设置了一个环境参数，它告诉我的构建脚本要使用哪个配置。我还在每个环境上运行从节点来构建和部署我的应用程序。

我尝试使用“限制可以运行此项目的位置”的值

```
buildnode-${ENV} 
```

其中 ENV 是我的参数的名称。这似乎不起作用，因为标签不执行替换。

我还尝试了[NodeLabel 插件](https://wiki.jenkins-ci.org/display/JENKINS/NodeLabel+Parameter+Plugin#NodeLabelParameterPlugin-Label)，它允许我定义从哪些节点运行作业。但是，这将创建两个单独的选择：

![在此处输入图像描述](../Images/bd33f452fdcc891e33643175eb137627.png)

有没有办法将这两者联系在一起，所以当我选择 QA 环境时，例如，选择 QA 服务器的从节点来运行构建？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:22:38.880

您可以尝试以下解决方法：有两个构建 - *A*和*B*。*A*将设置环境，将其保存到文件中，并将文件作为参数传递给构建*B*，以及要在其上运行的节点的名称（参数将通过[Parameterized Trigger plugin](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)传递）。*B*将读取环境（通过[EnvInject 插件](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)）并在作为另一个参数传递的节点上运行构建（您确实需要使用 NodeLabel 插件）。

# c# - 如何根据下拉选择显示复选框列表？

> ID：10004845
> 
> 赞同：0
> 
> 时间：2012-04-04T04:16:26.520
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3, c#-4.0

以下是我的业务逻辑代码。我通过调用 web 服务得到低于 json 的信息，并将其反序列化为对象（如我的实体中所示）。现在，我想显示带有类别选择的下拉菜单，一旦用户选择了类别，它应该显示子类别的复选框列表。

根据我下面的代码，下拉菜单应该有“吃”和“娱乐”选项。如果用户选择“娱乐”，那么它应该显示“全部”、“电影”和“保龄球”作为复选框列表。谁能帮助我如何在 MVC3 和 C# 中拥有它？

JSON：

```
 {
  "Code":0,
  "Status":"Done",
  "Categories":[
              {
              "ID":1,
              "Name":"Eat",
              "Subcategories":[
                    {"Flag":false,"ID":100,"Name":"Food"},
                    {"Flag":false,"ID":101,"Name":"Fast Food"},         
                    {"Flag":false,"ID":102,"Name":"Other"}
                    ]
                    },
               {
               "ID":2,
               "Name":"Entertainment",
               "Subcategories":[
                        {"Flag":false,"ID":100,"Name":"All"},               
                        {"Flag":false,"ID":101,"Name":"Movie"},
                        {"Flag":false,"ID":102,"Name":"Bowling"}
                      ]
                     },
                     }
          ]
    } 
```

实体：

```
 public class MyData
 {
   public int Code { get; set; }
   public string Status { get; set; }
   public List<Category> Categories { get; set; }
  }

  public class Category
  {
      public string Name { get; set; }
      public int ID { get; set; }
      public List<Subcategory> Subcategories { get; set; }
  }

   public class Subcategory
   {
     public string Name { get; set; }
     public int ID { get; set; }
     public bool Flag { get; set; }
   } 
```

服务电话：

```
 public MyData GetAllCategories()
    {
           HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://host/data/categories/");

            request.ContentType = "application/json; charset=utf-8";
            request.Method = "GET";

            string returnJson = string.Empty;

            using (WebResponse response = request.GetResponse())
            {
                using (Stream stream = response.GetResponseStream())
                {
                    using (StreamReader reader = new StreamReader(stream))
                    {
                        while (!reader.EndOfStream)
                        {
                            returnJson += reader.ReadLine();
                        }
                    }
                }
            }

            MyData deserializedMyData = JsonConvert.DeserializeObject<MyData>returnJson 

            return deserializedMyData;
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T04:30:20.923

在视图@model MyData 中使用以下代码

```
 @foreach (Category item in Model.Categories)
        {
<input type="checkbox" name="Categories" value="@item.categoryId" id="@item.categoryId"/>

        } 
```

# r - 用 ggplot 和 aes_string 制作绘图函数

> ID：10004847
> 
> 赞同：23
> 
> 时间：2012-04-04T04:16:31.840
> 
> 标签：r, ggplot2

在 Hadley Wickham 的**ggplot2**书中第 10.3 章中，他提到了制作绘图函数。我想制作许多使用刻面的类似图，但我无法引用列。如果我所有的参考都是美学的，那么我可以使用 aes_string 并且一切正常。Facet_wrap 似乎没有类似物。

```
library(ggplot2)
data(iris) 
```

这是我想要功能化的情节。

```
pl.flower1 <- ggplot(data=iris, 
                    aes_string(x='Sepal.Length', y='Sepal.Width', color='Petal.Length')) +
                                 geom_point() +facet_wrap(~Species) 
```

如果我不分面，这可行。

```
flowerPlot <- function(dat, sl, sw, pl, sp){
  ggplot(data=dat, aes_string(x=sl, y=sw, color=pl)) + geom_point()
}
pl.flower2 <- flowerPlot(iris, sl='Sepal.Length', sw='Sepal.Width', pl='Petal.Length') 
```

“sp”应该是下面两行吗？一个公式，一个字符串？也许整个方法是错误的。

```
flowerPlotWrap <- function(dat, sl, sw, pl, sp){
      ggplot(data=dat, aes_string(x=sl, y=sw, color=pl)) + geom_point() +facet_wrap(sp)
    }
    pl.flower3 <- flowerPlotWrap(iris, sl='Sepal.Length', sw='Sepal.Width', pl='Petal.Length', sp= ?????) 
```

除了答案之外，我还想知道有人如何解决这个问题？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-04T04:29:01.767

`facet_wrap`期望一个公式作为它的第一个参数，所以我只是用 强制它`as.formula`，并将 my`sp`作为字符串输入：

```
flowerPlotWrap <- function(dat, sl, sw, pl, sp){
      ggplot(data=dat, aes_string(x=sl, y=sw, color=pl)) + 
      geom_point() +facet_wrap(as.formula(sp)) # note the as.formula
}
pl.flower3 <- flowerPlotWrap(iris, sl='Sepal.Length', 
                             sw='Sepal.Width', pl='Petal.Length', 
                             sp= '~Species') 
```

或者，如果我的公式总是看起来像`~[columnname]`，我可以将其构建到`flowerPlotWrap`并传入列名：

```
flowerPlotWrap <- function(dat, sl, sw, pl, sp){
      ggplot(data=dat, aes_string(x=sl, y=sw, color=pl)) + 
      geom_point() +facet_wrap(as.formula(sprintf('~%s',sp)))
}
pl.flower3 <- flowerPlotWrap(iris, sl='Sepal.Length', 
                             sw='Sepal.Width', pl='Petal.Length', 
                             sp= 'Species') 
```

（对您问题中可重复的示例表示敬意！如果每个人都提出问题并且他们会更快地得到答案）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-11-06T09:42:18.870

以下是一些使用新功能的替代方案`ggplot2 V3.0.0`

使用字符串：

```
flowerPlot <- function(dat, sl, sw, pl, sp){
  ggplot(data=dat, aes(x=!!ensym(sl), y=!!ensym(sw), color=!!ensym(pl))) + 
    geom_point() +
    facet_wrap(eval(expr(~!!ensym(sp))))
}

flowerPlot(iris, sl='Sepal.Length', sw='Sepal.Width', pl='Petal.Length', sp = 'Species') 
```

使用名称：

```
flowerPlot2 <- function(dat, sl, sw, pl, sp){
  ggplot(data=dat, aes(x=!!enquo(sl), y=!!enquo(sw), color=!!enquo(pl))) + 
    geom_point() +
    facet_wrap(eval(expr(~!!enquo(sp))))
}

flowerPlot2(iris, sl= Sepal.Length, sw=Sepal.Width, pl=Petal.Length, sp = Species) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T04:28:42.827

如果我只是使用`sp='Species'`，你的函数对我来说工作得很好，即你想要分面的变量的名称。

`flowerPlotWrap(iris, sl='Sepal.Length', sw='Sepal.Width', pl='Petal.Length', sp='Species')`

![在此处输入图像描述](../Images/387cca094a8be588a489fd9292e64cd2.png)

# python - Python - 类和 OOP 基础

> ID：10004850
> 
> 赞同：25
> 
> 时间：2012-04-04T04:16:44.727
> 
> 标签：python, oop

我不完全理解类。我已经阅读了 python 文档和其他几个教程。我了解它的基本要点，但不了解其中的细微差别。例如在我的代码中：

```
class whiteroom():
    """ Pick a door: red, blue, green, or black. """

    do = raw_input("> ")

    if "red" in do:
        print "You entered the red room."

    elif "blue" in do:
        print "You entered the blue room."

    elif "green" in do:
        print "You entered the green room."

    elif "black" in do:
        print "You entered the black room."

    else:
        print "You sit patiently but slowly begin to stave.  You're running out of time."
        return whiteroom()

game = whiteroom()
game 
```

（原[键盘](http://codepad.org/IP8IpfOl)）

我想返回课堂白室。这是不可能的，或者没有正确完成。如果您可以弄清楚如何返回一个类或如何将两个类“链接”在一起，以便白色房间在 else 上重复，并且在调用时返回其他房间（这将是类），那就太棒了。

此外，我非常不稳定，`__init__`仍然不确定它的目的是什么。每个人都一直告诉我它“初始化”，我确信它确实如此，但这似乎并没有帮助我的大脑。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-04-04T04:58:34.427

函数与类非常不同。看起来你接受了一个函数，只是`def`将`class`. 我想这*主要*适用于你的情况，但这不是课程应该如何进行的。

类包含函数（方法）和数据。例如，你有一个球：

```
class Ball(object):
    # __init__ is a special method called whenever you try to make
    # an instance of a class. As you heard, it initializes the object.
    # Here, we'll initialize some of the data.
    def __init__(self):
        # Let's add some data to the [instance of the] class.
        self.position = (100, 100)
        self.velocity = (0, 0)

    # We can also add our own functions. When our ball bounces,
    # its vertical velocity will be negated. (no gravity here!)
    def bounce(self):
        self.velocity = (self.velocity[0], -self.velocity[1]) 
```

现在我们有一`Ball`堂课。我们如何使用它？

```
>>> ball1 = Ball()
>>> ball1
<Ball object at ...> 
```

它看起来不是很有用。数据可能有用：

```
>>> ball1.position
(100, 100)
>>> ball1.velocity
(0, 0)
>>> ball1.position = (200, 100)
>>> ball1.position
(200, 100) 
```

好吧，很酷，但是与全局变量相比有什么优势？如果您有另一个`Ball`实例，它将保持独立：

```
>>> ball2 = Ball()
>>> ball2.velocity = (5, 10)
>>> ball2.position
(100, 100)
>>> ball2.velocity
(5, 10) 
```

并且`ball1`保持独立：

```
>>> ball1.velocity
(0, 0) 
```

现在`bounce`我们定义的那个方法（类中的函数）呢？

```
>>> ball2.bounce()
>>> ball2.velocity
(5, -10) 
```

该`bounce`方法导致它修改`velocity`自己的数据。再一次，`ball1`没有被感动：

```
>>> ball1.velocity 
```

# 应用

一个球是整洁的，但大多数人并没有模拟这一点。你在做游戏。让我们想想我们有什么样的东西：

*   **房间**是我们能拥有的最明显的东西。

所以让我们开个房间吧。房间有名字，所以我们会有一些数据来存储它：

```
class Room(object):
    # Note that we're taking an argument besides self, here.
    def __init__(self, name):
        self.name = name  # Set the room's name to the name we got. 
```

让我们举个例子：

```
>>> white_room = Room("White Room")
>>> white_room.name
'White Room' 
```

漂亮。但是，如果您希望不同的房间具有不同的功能，那么这并不是那么有用，所以让我们创建一个*子类*。子类从其*超**类*继承所有功能，但您可以添加更多功能或覆盖超类的功能。

 *让我们考虑一下我们想要对房间做什么：

> 我们想与房间互动。

我们如何做到这一点？

> 用户输入一行得到响应的文本。

它的响应方式取决于房间，所以让我们用一个名为的方法来处理房间`interact`：

```
class WhiteRoom(Room):  # A white room is a kind of room.
    def __init__(self):
        # All white rooms have names of 'White Room'.
        self.name = 'White Room'

    def interact(self, line):
        if 'test' in line:
            print "'Test' to you, too!" 
```

现在让我们尝试与之交互：

```
>>> white_room = WhiteRoom()  # WhiteRoom's __init__ doesn't take an argument (even though its superclass's __init__ does; we overrode the superclass's __init__)
>>> white_room.interact('test')
'Test' to you, too! 
```

您最初的示例以在房间之间移动为特色。让我们使用一个名为的全局变量`current_room`来跟踪我们所在的房间。¹让我们也制作一个红色房间。

^(1\. 这里除了全局变量之外还有更好的选择，但为了简单起见，我将使用一个。)

```
class RedRoom(Room):  # A red room is also a kind of room.
    def __init__(self):
        self.name = 'Red Room'

    def interact(self, line):
        global current_room, white_room
        if 'white' in line:
            # We could create a new WhiteRoom, but then it
            # would lose its data (if it had any) after moving
            # out of it and into it again.
            current_room = white_room 
```

现在让我们试试：

```
>>> red_room = RedRoom()
>>> current_room = red_room
>>> current_room.name
'Red Room'
>>> current_room.interact('go to white room')
>>> current_room.name
'White Room' 
```

**读者练习：**`WhiteRoom`在's中添加代码`interact`，让您回到红色房间。

现在我们已经一切正常，让我们把它们放在一起。有了我们`name`所有房间的新数据，我们还可以在提示中显示当前房间！

```
def play_game():
    global current_room
    while True:
        line = raw_input(current_room.name + '> ')
        current_room.interact(line) 
```

您可能还想创建一个函数来重置游戏：

```
def reset_game():
    global current_room, white_room, red_room
    white_room = WhiteRoom()
    red_room = RedRoom()
    current_room = white_room 
```

将所有类定义和这些函数放入一个文件中，您可以像这样在提示符下播放它（假设它们在 中`mygame.py`）：

```
>>> import mygame
>>> mygame.reset_game()
>>> mygame.play_game()
White Room> test
'Test' to you, too!
White Room> go to red room
Red Room> go to white room
White Room> 
```

为了能够通过运行 Python 脚本来玩游戏，您可以在底部添加：

```
def main():
    reset_game()
    play_game()

if __name__ == '__main__':  # If we're running as a script...
    main() 
```

这是对课程的基本介绍以及如何将其应用于您的情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T04:36:32.970

我相信你以前听过这一切，但我会试一试。

类是一种将一堆函数和变量组合成一个对象的方法。当您深入了解它时，这只是一种将所有内容组织成有意义的组的方法。让事情更容易理解、调试、扩展或维护是有好处的，但基本上它只是一种让你的心智模型更明确的方法。

您的代码看起来像是在尝试将整个程序编写在“对象”中（实际上，您只是编写了一个错误的函数）。

考虑一下这个。

想想你的心智模型，房间里有门，里面有白板。门有颜色。此外，白板上可以写一些文字。我们将把它放在那里很简单。

对我来说，这意味着 3 个不同的对象——一个带有颜色字符串的门对象，一个带有文本字符串的白板对象，以及一个带有门和白板的房间对象。

考虑以下代码：

```
class Door(object):
    def __init__(self, color):
        self.color = color

class Whiteboard(object):
    def __init__(self, default_text=''):
        self.text = ''
        self.write_text(default_text)

    def write_text(self, text):
        self.text += text

    def erase(self):
        self.text = ''

class Room(object):
    def __init__(self, doorcolor, whiteboardtext=''):
        self.whiteboard = Whiteboard(whiteboardtext)
        self.door = Door(doorcolor)

# make a room with a red door and no text on the whiteboard
room1 = Room('red')

# make a room with a blue door and 'yeah, whiteboard' on the whiteboard
room2 = Room('blue', 'yeah, whiteboard')

# make a room with a green door
room3 = Room('green')

# now I can play around with my 'rooms' and they keep track of everything internally

print 'room 1 door color: ' + room1.door.color
print 'room 2 door color: ' + room2.door.color

# all my rooms have a door and a whiteboard, but each one is different and self contained. For example
# if I write on room 1's whiteboard, it doesn't change anything about room 3s

print 'room1 whiteboard: ' + room1.whiteboard.text
print 'room2 whiteboard: ' + room2.whiteboard.text
print 'room3 whiteboard: ' + room3.whiteboard.text

print '-- changeing room 1 whiteboard text --'

room1.whiteboard.write_text('oop is really helpful')

print 'room1 whiteboard: ' + room1.whiteboard.text
print 'room2 whiteboard: ' + room2.whiteboard.text
print 'room3 whiteboard: ' + room3.whiteboard.text 
```

**init**函数是在您“初始化”类的新实例时调用的函数。在示例中，我制作了 3 个 Room 对象，每个对象在内部创建了一个 Door 和 Whiteboard 对象。我传递给构造函数的参数`Room(parameter1, parameter2)`被传递给**初始化**函数——你可以看到我正在使用它来设置门颜色和白板上的一些文本（可选）。另请注意，“属于”对象的变量被引用`self`- 这个引用是作为所有类函数的第一个参数传入的（并且在您扩展类和其他更高级的东西时变得更加重要）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T04:44:31.210

[好吧，我从Mark Lutz 的 Learning Python](https://rads.stackoverflow.com/amzn/click/com/0596002815)中了解了 Python 中的 OOPS 。它是理解 Python 概念的综合资源，尤其是用于编写**Pythonic**方式的代码。

为了您的在线参考，我喜欢[这个](http://zetcode.com/tutorials/pythontutorial/)网站的教程。浏览这篇[文章](https://stackoverflow.com/questions/625083/python-init-and-self-what-do-they-do)，它将帮助您进行初始化。Python 中的 OOP 非常容易理解和实现。起初看起来令人生畏，但在编写了一些基本的 OOP 代码之后就轻而易举了。享受学习。。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T05:10:32.923

你真的很遥远。

很抱歉这么说，但这几乎是无法挽救的。

据我所知，您想要诸如房间类之类的东西，例如：

```
class Room(object):
    ''' A generic room '''
    def __init__(self):
        self.choices = None
        self.enter()
    def enter(self):
        ''' Enter the room, to be filled out in subclass '''
        pass
    def print_choices(self):
        '''You are stuck bro'''
        print "You are stuck bro" 
```

然后你可以像这样制作一个特定的房间，比如 whiteroom：

```
class Whiteroom(Room):
    ''' A white room '''
    def __init__(self):
        self.choices = ["red", "blue", "green", "black"]
        self.enter()
    def enter(self):
        print "You sit patiently, but slowly begin to starve.  You're running out of time."
    def print_choices(self):
        print "You can choose from the following rooms:"
        print self.choices

class Blackroom(Room):
    ''' A black room '''
    def enter(self):
        print "It's really dark in here.  You're out of time."

class Redroom(Room):
    ''' A red room '''
    def __init__(self):
        self.choices = ["black", "blue", "green", "white"]
        self.enter()
    def enter(self):
        print "It's getting hot in here.  So take off all your clothes."
    def print_choices(self):
        print "You can choose from the following rooms:"
        print self.choices

class Blueroom(Room):
    ''' A blue room '''
    def __init__(self):
        self.choices = ["black", "red", "green", "white"]
        self.enter()
    def enter(self):
        print "It's nice and cool in here.  Stay awhile if you want."
    def print_choices(self):
        print "You can choose from the following rooms:"
        print self.choices

class Greenroom(Room):
    ''' A green room '''
    def __init__(self):
        self.choices = ["black", "red", "blue", "white"]
        self.enter()
    def enter(self):
        print "You won." 
```

然后你必须这样做来运行游戏：

```
print "Type 'quit' to quit"
print "Type 'choices' to see what your choices are"

current_room = Whiteroom()
done = False
while (not done):
    entry = raw_input("> ")
    if entry == "quit":
        done = True
    if "choices" in entry:
        current_room.print_choices()
    if current_room.choices:
        if entry in current_room.choices:    
            if "white" in entry:
                current_room = Whiteroom()

            if "black" in entry:
                current_room = Blackroom()

            if "red" in entry:
                current_room = Redroom()

            if "green" in entry:
                current_room = Greenroom()
                done = True

            if "blue" in entry:
                current_room = Blueroom() 
```

这是我使用类将您的片段变成实际游戏的最佳尝试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T04:22:29.157

面向对象编程一开始可能是一件非常有趣的事情，真正了解它的唯一方法是花时间做大量的阅读和练习。一个很好的起点将是在这里。[http://www.voidspace.org.uk/python/articles/OOP.shtml](http://www.voidspace.org.uk/python/articles/OOP.shtml)和[http://wiki.python.org/moin/BeginnersGuide/Programmers](http://wiki.python.org/moin/BeginnersGuide/Programmers)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-28T11:13:32.853

类圆（）：

```
pi = 3.14

def __init__(self,radius=1):

    self.radius = radius
    self.area = radius*radius*self.pi

def get_circrumference(self):
    return self.radius* self.pi*2 
```

结果：圆（23）

my_circle = 圆（30）

my_circle.pi = 3.14

my_circle.radius = 30

my_circle.get_circrumference() = 118.4

my_circle.area = 2826.0

help(Circle) = 模块**main**中类 Circle 的帮助：

类圈（builtins.object）| 圆（半径=1） |
| 此处定义的方法：|
| **初始化**（自我，半径=1）| 初始化自己。请参阅 help(type(self)) 以获取准确的签名。|
| get_circumference(self) |
| -------------------------------------------------- -------------------- | 此处定义的数据描述符：|
| **字典** | 实例变量的字典（如果已定义） |
| **弱引用** | 对象的弱引用列表（如果已定义） |
| -------------------------------------------------- -------------------- | 此处定义的数据和其他属性：|
| 圆周率 = 3.14*

# google-earth-plugin - '在 NPObject 上调用方法时出错！' 删除通过网络链接添加的 KML 的问题

> ID：10004851
> 
> 赞同：0
> 
> 时间：2012-04-04T04:16:53.057
> 
> 标签：google-earth-plugin

我通过**ADD KMZ**按钮的 onclick 上的网络链接添加 KMZ 文件，如下所示：-

```
var nlFile=null;
function addKMZData(){
    nlFile=ge.createNetworkLink('exampleKMLNL1');
    nlFile.setVisibility(true);
    var link = ge.createLink(" exampleLink1 ");
    link.setHref('http://localhost:8080/KMZs/example.kmz');
    nlFile.setLink(link);
    nlFile.setFlyToView(true);
    nlFile.setName('kmz');
    ge.getGlobe().getFeatures().appendChild(nlFile);
} 
```

此处获取的“example.kmz”文件包含一个线串地标，安装的插件版本为 6.1.0.5001。

然后，我有一个**REMOVE**按钮，单击它会从 ge-plugin 的实例中删除上面添加的 KMZ 的网络链接。以下是**REMOVE**按钮的 onclick 功能：

```
function clearKMZData(){
    ge.getFeatures().removeChild(ge.getElementById('exampleKMLNL1'));
    nlFile=null;
} 
```

这些功能第一次运行良好。但是，在删除添加的 KMZ 网络链接后，任何使用 addKMZData() 函数添加相同 KMZ 文件的尝试都会出现错误“错误调用 NPObject 上的方法！” 在 add 函数的第 1 行。这种通过网络链接添加和删除 KMZ/KML 数据的方式是否正确？我在上述 2 个 JavaScript 函数中遗漏了什么吗？

问候，湿婆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T05:12:27.190

只要 var nlFile 是全局的

在你的第一个函数中，改变这个

```
 nlFile=ge.createNetworkLink('exampleKMLNL1'); 
```

对此

```
 nlFile=ge.createNetworkLink(''); 
```

并改变这个

```
 function clearKMZData(){
          ge.getFeatures().removeChild(ge.getElementById('exampleKMLNL1'));
          nlFile=null;
      } 
```

对此

```
 function clearKMZData(){
          ge.getFeatures().removeChild(nlFile);
      } 
```

# git - git subtree/submodule/subproject/slave的适当使用

> ID：10004855
> 
> 赞同：4
> 
> 时间：2012-04-04T04:17:29.267
> 
> 标签：git, drupal, ubuntu

我在Drupal中开发一个网站，我的开发目录树如下：

```
modules
    -->moduleA
        -->moduleA.inc
        -->moduleA.info
        -->moduleA.php
    -->moduleB
        -->moduleB.inc
        -->moduleB.info
        -->moduleB.php
themes
    -->themeA
        -->themeA.info
        -->page.tpl.php
    -->themeB
        -->themeB.info
        -->page.tpl.php
ShellScripts
    -->scriptA.sh
    -->scriptB.sh
legacyPerlScripts
    -->script1.pl
    -->script2.pl 
```

没有庞大的开发团队；我正在自己开发所有模块和主题。模块和主题有些独立，每个都有自己的版本号。但是，一些大型任务可能需要升级到多个模块。此外，模块、主题和脚本应该一起部署，例如，将模块 A 的当前版本与模块 B 的旧版本一起使用不是一个好主意，因为模块 B 可能依赖于模块 A 中的新功能.

使用 git 进行修订控制的最佳实践是什么？我看到的选项是：

1.  将所有内容放在一个大型的单体存储库中。
2.  为每个模块、主题和脚本目录创建一个单独的存储库。
3.  使用 git-slave (gits) 为每个模块、主题和脚本目录创建子项目。
4.  使用 git 子模块
5.  使用 git 子树

对于这样的 Web 开发项目，这 5 个选项中哪一个最常见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T15:28:53.297

对于紧密耦合的代码，子模块是一个糟糕的解决方案。我们有两个主要项目共享一个子项目，用于两个项目都依赖的数据库迁移。我们使用子模块实现了这一点，对迁移进行更改的步骤如下所示：

1.  提交对子模块的更改。
2.  将更改推送到原点。
3.  备份到您当前所在的超级项目。
4.  提交并推送新的子模块 ref。
5.  移动到另一个超级项目的子模块副本。
6.  从源中提取最新更改。
7.  备份到*那个*超级项目。
8.  提交并推送新的子模块 ref。

最重要的是，您始终需要确保您在所有三个项目的正确分支上。这是一个巨大的痛苦。子模块并不是为这种开发而设计的。我们最终将数据库迁移作为两个主要项目之一的一部分，并且不再共享代码（无论如何它只是为了方便而真正共享）。

我确实研究了子树合并，但它看起来只比子模块好一点。

听起来您真的应该将其保留为一个存储库，并使用分支和标记来管理各种模块的不同版本，特别是如果无论如何这些模块都将部署在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T06:20:44.777

将它们全部保存在一个存储库中。您已经按目录组织了所有内容。如果有的话，您可能希望为每个客户端单独跟踪工作，这可能涉及对任何目录的更改。

# java - 只是想知道 System.out.println()

> ID：10004856
> 
> 赞同：1
> 
> 时间：2012-04-04T04:18:31.080
> 
> 标签：java

只是问我是否有正确的理解

```
System.out.println(); 
```

System 是包出来的是类 println() 是方法

如果这是错误的，那么请告诉我正确答案是什么。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T04:21:08.057

不，

*   **`System`**是类，它位于`java.lang`包中（这就是您不需要导入它的原因）。
*   **`out`**是`System`类的静态变量。它是*public*，因此您可以从外部访问它，它是*静态*的，因此您将它与类声明相关联，而不是与它的任何实例相关联。
*   **`println()`**确实是一种方法。它是一个`out`变量的方法，它是一个`PrintStream`实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T04:22:20.030

out 是[printstream](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#out)类的静态对象
`System -class,`

`PrintStream -class`,

`out - static object of PrintStream class`,

`println - public method in PrintStream Class`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T04:23:40.107

```
System = class
out = static object of the PrintStream class
println() = method 
```

阅读此[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T04:24:08.980

`System`不是一个包。它`class`是包含在`java.lang`包装内的

看看这里[http://docs.oracle.com/javase/7/docs/api/java/lang/System.html](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html)

`out`是一个`PrintStream`对象（`static`在`System`类的情况下），其中`println()`是方法之一

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T04:26:04.470

`System`是 java.lang 包中的一个类。 `out`是`System`类的公共静态成员，并且`println`是方法，是的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T04:24:25.483

不，你的理解是错误的。

“那么什么是对的”——

`System`- 一类，

`out`- 类型的静态公共成员`PrintStream`，

哦，是`println()`的，是一种方法。

你是对的 33% ;)[在这里阅读 java 文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html)

# pdf - 使用 GhostScript 为从 PDF 转换的 Jpeg 设置自动高度/宽度

> ID：10004858
> 
> 赞同：8
> 
> 时间：2012-04-04T04:18:36.993
> 
> 标签：pdf, jpeg, ghostscript

我正在使用 GS 进行从 PDF 到 JPEG 的转换，以下是我使用的命令：

```
gs -sDEVICE=jpeg -dNOPAUSE -dBATCH -g500x300 -dPDFFitPage -sOutputFile=image.jpg image.pdf 
```

如您所见，在此命令中`-g500x300`设置转换后的图像大小（宽度 x 高度）。

有没有办法只设置宽度而不必输入高度，所以它将基于宽度使用其原始纵横比缩放高度？我知道它可以通过使用 ImageMagick convert 来实现，您只需`0`在高度参数上加上 ie `-resize 500x0`。我尝试使用 GhostScript，但我认为这不是正确的方法。

我决定不使用 ImageMagick convert 原因是因为它在转换大尺寸多页 PDF 时非常慢。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T03:13:24.777

这篇文章解释了为什么 ghostscript 更快 - [https://serverfault.com/questions/167573/fast-pdf-to-jpg-conversion-on-linux-wanted](https://serverfault.com/questions/167573/fast-pdf-to-jpg-conversion-on-linux-wanted)，修复它的唯一解决方法是修改 imagemagick 代码。

不幸的是，ghostscript 不支持自动确定的输出大小。这主要是因为`-g`使用的选项实际上是确定将保存渲染输出的**设备**大小，而不是渲染输出本身。该输出大小正在发生变化，因为该`-dPDFFitPage`开关随后尝试匹配设备大小。尽管您可以使用 仅定义 jpeg 'device' 的高度`-dDEVICEHEIGHT=n`，但这将使设备宽度保持不变的默认值。

尽管解决方法有些繁琐，但您可以使用 ghostscript 或 imagemagick 来获取 pdf 页面的宽度和高度。要使用 ghostscript 执行此操作，请参阅[Using GhostScript to get page size](https://stackoverflow.com/questions/2943281/using-ghostscript-to-get-page-size)的答案。然后，您可以计算适当的宽度以设置 -g 标志以保持纵横比。如果您能找出一组命令来完成所有这些操作，则可以加分 :)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T07:37:28.530

您可以编写一个 PostScript 程序来轻松完成这项工作。这是一个开始：

```
%！
使用百分比：gs -sFile=____.pdf scale.ps

/文件没有{
  (\n *** 缺少源文件。\(使用 -sFile=____.pdf\)\n) =
  用法
} {
  流行音乐
}如果别的

% 获取PDF页面的宽度和高度
%
/GetSize {
  pdfgetpage 当前页面设备
  1 索引 get_any_box
  exch pop dup 2 得到 exch 3 得到
  /PDFHeight exch def
  /PDFWidth exch def
} 定义

%
% 主循环
% 对于原始 PDF 文件中的每一页
%
1 1 PDFPageCount
{
  /PDFPage exch def
  PDFPage 获取大小

% 在这里，知道所需的目标大小
% 计算适合 PDF 的比例因子
% 宽度或高度，或其他
% 宽度和高度存储在 PDFWidht 和 PDFHeight 中
  PDFPage pdfgetpage
  pdfshowpage
} 为了

```

pdfgetpage 和 pdfshowpage 是 PostScript 语言的内部 Ghostscript 扩展，用于处理 PDF 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-20T15:47:11.993

要使用 Ghostscript 调整图像大小，请使用`-dDownScaleFactor` 例如 `gs -dBATCH -dNOPAUSE -r300 -dDownScaleFactor=3 -sDEVICE=png16m -sOutputFile=/tmp/26a0e9f7-3f26-437d-9a97-1653074e819a_%d.png,/tmp/temp.pdf`

*   -r300 这里会产生一个巨大的图像

*   我可以通过缩小 3 来减小尺寸，同时保持纵横比。

如果设置精确的宽度尺寸并不重要，您可以使用它。这适用于大多数用例。

# subquery - 如何更新子查询字段？销售人员，soql，顶点

> ID：10004866
> 
> 赞同：0
> 
> 时间：2012-04-04T04:19:54.453
> 
> 标签：subquery, salesforce, soql

这是一个查询，它将让我所有的联系人都有高清质量的订单。

```
`Orderc__c[] orders = [SELECT id,customer__c, Customer__r.Number_of_HD_Orders__c,` `Quality_Code__c FROM Orderc__c where Quality_Code__c='HD'];` 
```

然后我更改使用这些代码来更新每个联系人的高清订单数：

```
for(Orderc__c o: orders){
    if(o.Customer__r.Number_of_HD_Orders__c==null)
    o.Customer__r.Number_of_HD_Orders__c=0.0;
    o.Customer__r.Number_of_HD_Orders__c++;
} 
```

现在，问题是如何更新联系人。作为“更新订单”；不会更新联系人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T04:57:46.743

您只需将所有联系人添加到新集合中，然后更新：

```
map<Id, Contact> contacts = new map<Id, Contact>();

for(Orderc__c o: orders) {
    if(o.Customer__r.Number_of_HD_Orders__c == null) {
        o.Customer__r.Number_of_HD_Orders__c=0.0;
    }

    Contact sContact = contacts.get(o.Customer__c);

    if(sContact != null) {
        sContact.Number_of_HD_Orders__c++;
    } else {
        o.Customer__r.Number_of_HD_Orders__c++;
        contacts.put(o.Customer__c, new Contact(id = o.Customer__c, Number_of_HD_Orders__c = o.Customer__r.Number_of_HD_Orders__c));
    }
}

update contacts.values(); 
```

请注意，这非常粗略，不会在更新等中检查太多联系人，但它应该让您的想法朝着正确的方向发展！

# open-source - BSD 许可证：如何在 fork 中管理属性和项目名称

> ID：10004867
> 
> 赞同：6
> 
> 时间：2012-04-04T04:19:55.287
> 
> 标签：open-source, licensing, fork

我已经分叉了一个 BSD 许可项目并进行了重大改写。就字符数而言，现在大约 70% 的代码是由我编写的。我想尊重原作者的版权，同时也接受我的作品的署名。最初我打算问最好的方法，但我看到[根据这个问题](https://stackoverflow.com/questions/2324517/bsd-license-adding-author)，我可以在许可文件中复制原作者的版权行，并输入我的姓名和我的工作年份。凉爽的。

现在我的问题与这一行有关：

> 未经事先书面许可，不得使用 PROJECTNAME 的名称或其贡献者的名称来认可或推广源自该软件的产品。

我的重写涉及对应用程序的范围和方向的重大改变。我觉得更改应用程序的名称以更好地代表我的 fork 是合适的。所以：

1.  改名字好看吗？我在许可证中没有看到任何禁止它的内容。
2.  如何最好地在许可证中表示这一点？我应该用新的项目名称替换旧项目名称吗？我应该将该行修改为“既不是 OLDPROJECTNAME 的名称，也不是 NEWPROJECTNAME 的名称，也不是其贡献者的名称……”？

我知道这里没有人会提供法律建议！我只是在寻找一些来自开源社区的通用指南和最佳实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T12:32:14.753

> 我想尊重原作者的版权，同时也接受我的作品的署名。

你想这样做很好，但实际上它甚至是必须的。如果您不遵守 BSD 下给出的使用条款，您将无权重写代码（您已经这样做了）。

有多种方法可以使软件的许可可见，无论您使用哪种软件都可以清楚地说明：

*   作品的名称是什么（以使其可识别），作者是谁，何时撰写。

*   当您的软件使用其他软件时，请明确其他软件是在哪个许可下使用的，它是什么软件，它是由谁编写的等等。

如果您想允许您自己的更改和扩展在您分叉的项目的上游重复使用，您应该为您的工作选择相同的许可证。

> 我觉得更改应用程序的名称以更好地代表我的 fork 是合适的。
> 
> 改名字好看吗？我在许可证中没有看到任何禁止它的内容。

原使用条件不禁止更改项目名称。当您实际分叉它时，更改名称非常有意义。即使它只是*PROJECTNAME-user1311904-fork*或完全不同的名称。

> 如何最好地在许可证中表示这一点？我应该用新的项目名称替换旧项目名称吗？我应该将该行修改为“既不是 OLDPROJECTNAME 的名称，也不是 NEWPROJECTNAME 的名称，也不是其贡献者的名称……”？

实际上如上所述，您有两个许可证。您已获得适用于“您的”软件的许可证（主许可证）。然后你写你的软件的那部分被许可为。然后列出您分叉的软件的原始条款（正如您从原作者那里获得的那样）。所以很清楚你的软件的许可是什么。

如果你想把这写得很好，你应该把所有的东西都放在版本控制之下，所以从技术上来说，获取原始代码是什么以及你的更改是什么的信息在技术上是可能的。因此，版本控制系统绝对安全地记录了哪个许可证/es 适用于哪个部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T04:26:49.427

您可以更改项目的名称，当然，BSD 许可证可能是有史以来最宽松的许可证之一，可能是在公共领域之后。由于您重写了大部分代码，因此保留旧名称并不酷。对原始开发团队来说也不公平。

如果您熟悉基于 GPL 的许可证，它们大多有一些条款来提及原始作者并保持许可证是强制性的。使用 BSD 风格，这些不再是问题。

* * *

我的回答是：

1.  考虑自己是一个 fork 的作者，它源自任何初始软件，但现在做事不同。
2.  我想您现在可以附上您想要的任何许可证，因为您是作者。不过不确定。

# ios - 使用 NSUserDefaults 校对设置/保存 UISwitch 状态

> ID：10004872
> 
> 赞同：1
> 
> 时间：2012-04-04T04:20:43.593
> 
> 标签：ios, nsuserdefaults, jailbreak, uiswitch, setuid

为越狱设备开发。

我在这里寻找我的问题的灵魂。[使用 NSUserDefaults 存储 UISwitch 状态](https://stackoverflow.com/questions/4231536/using-nsuserdefaults-for-storing-uiswitch-state)，但人们说很多代码不起作用。

我正在使用 UISwitch 加载/卸载 iOS 的启动守护程序。我已经非常接近了，但开关状态不会保存。这是我使用的代码。

```
@synthesize toggleSwitch;

- (void)viewDidAppear:(BOOL)animated
{

[super viewDidAppear:animated];

if([[NSUserDefaults standardUserDefaults] boolForKey:@"switch"]) toggleSwitch.on = [[NSUserDefaults standardUserDefaults] boolForKey:@"switch"];

}

- (void)switchValueChanged {
if (toggleSwitch.on) {
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:TRUE];
    switchlabel.text = @"Enabled";
    const char *onchar = [[NSString stringWithString:@"launchctl load -wF /System/Library/LaunchDaemons/com.launch.daemon.plist"] UTF8String];
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:FALSE];
    setuid(0); system(onchar);
    if (system(onchar) == 0){
        [[NSUserDefaults standardUserDefaults] setBool:self.toggleSwitch.on forKey:@"switch"];
        [[NSUserDefaults standardUserDefaults] synchronize];
    } else {
        [[NSUserDefaults standardUserDefaults] setBool:self.toggleSwitch.on forKey:@"switch"];
        [[NSUserDefaults standardUserDefaults] synchronize];
        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:FALSE];}
} else {
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:TRUE];
    switchlabel.text = @"Disabled";
    const char *offchar = [[NSString stringWithString:@"launchctl unload -wF /System/Library/LaunchDaemons/com.launch.daemon.plist"] UTF8String];
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:FALSE];
    setuid(0); system(offchar);
    if (system(offchar) == 0){
        [[NSUserDefaults standardUserDefaults] setBool:self.toggleSwitch.on forKey:@"switch"];
        [[NSUserDefaults standardUserDefaults] synchronize];
    } else {
        [[NSUserDefaults standardUserDefaults] setBool:self.toggleSwitch.on forKey:@"switch"];
        [[NSUserDefaults standardUserDefaults] synchronize];
        [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:FALSE]; }
} 
```

bool 值写在我的应用 plist 中。我似乎不知道我做错了什么。我从没有运气的溢出问题中拼凑了一些例子。不管命令是否失败，交换机都应该保存。

有人可以解释并告诉我应该编辑什么。这一直让我发疯。

# html-agility-pack - ArgumentOutOfRangeException 运行 HtmlAgilityPack

> ID：10004874
> 
> 赞同：1
> 
> 时间：2012-04-04T04:21:00.600
> 
> 标签：html-agility-pack

我无计可施。每当我尝试使用 XPath 选择节点时，我都会不断收到 HtmlAgilityPack 异常。即使我只用这个例子开始一个全新的解决方案，问题仍然存在（所以我的应用程序代码以某种方式干扰不是问题。网页没有问题，或者我的互联网连接或类似的东西。我知道我有这以前工作过。我什至怀疑某个损坏的 dll 不知何故并重新下载了它，但无济于事。有什么想法吗？

```
using System;
using HtmlAgilityPack;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var web = new HtmlWeb();
            var doc = web.Load("http://www.google.com");
            var root = doc.DocumentNode;

            var links = root.SelectNodes("//a");
            // Error!  ArgumentOutOfRangeException: Index was out of range. 
            // Must be non-negative and less than the size of the collection.
        }
    }
}

/*
    System.ArgumentOutOfRangeException: Index was out of range. Must be non-negative and less than the size of the collection.
    Parameter name: index
       at System.ThrowHelper.ThrowArgumentOutOfRangeException()
       at HtmlAgilityPack.HtmlNodeNavigator.MoveToFirstChild()
       at MS.Internal.Xml.XPath.XPathDescendantIterator.MoveNext()
       at MS.Internal.Xml.XPath.DescendantQuery.Advance()
       at MS.Internal.Xml.XPath.XPathSelectionIterator.MoveNext()
       at HtmlAgilityPack.HtmlNode.SelectNodes(String xpath)
       at ConsoleApplication1.Program.Main(String[] args) 

*/ 
```

编辑：

嗯...我不确定它是如何发生的或它做了什么，但我发现 .dll 安装在 GAC_MSIL 文件夹中。删除它立即解决了问题。所以，没关系！

# sql - Ruby on Rails - 通过扩展从 DB 中检索元素数组

> ID：10004880
> 
> 赞同：0
> 
> 时间：2012-04-04T04:21:41.133
> 
> 标签：sql, ruby-on-rails, ruby

我的数据库中有一个名为路由的表，其中每条路由都有一个起点和终点。给定任何来源，我希望能够返回可以直接从该来源或与该来源链接的任何目的地到达的目的地列表。我怎样才能在 Ruby 中做到这一点？

```
def find_available_routes(origin) 
  routes = Array.new
  #each row in routes has 'origin' and 'destination'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:41:28.903

您的意思是基本上可以通过最多一次“停留”到达的任何目的地？

```
def find_available_routes(origin)
  order_0_routes = Routes.where(:origin => origin)
  destinations = order_0_routes.map(&:destination)
  order_1_routes = Routes.where(:origin => [origin, *destinations])
end 
```

这不会很快，但根据您的应用程序的需要，它应该是可以接受的。缓存将是一个简单的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T04:32:57.770

> 我的数据库中有一个名为路由的表，其中每条路由都有一个起点和终点。给定任何来源，我希望能够返回可以直接从该来源或与该来源链接的任何目的地到达的目的地列表。我怎样才能在 Ruby 中做到这一点？

```
def find_available_routes(origin)
  #each row in routes has 'origin' and 'destination'
  Routes.where(:origin => origin)
end 
```

我建议，你应该去看看这个[guides.rubyonrails - association_basics](http://guides.rubyonrails.org/association_basics.html)。

# iphone - 如何使 UISegmentedControl 的选定段变暗？

> ID：10004884
> 
> 赞同：3
> 
> 时间：2012-04-04T04:21:58.110
> 
> 标签：iphone, ios, cocoa-touch

我正在使用[UIAppearance](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html)为我的 iOS 应用程序设置全局样式。我正在设想一种浅灰色的风格。

```
[[UINavigationBar appearance]
    setTintColor:[UIColor colorWithWhite:0.95 alpha 1.0]
];

[[UISegmentedControl appearance]
    setTintColor:[UIColor colorWithWhite:0.90 alpha 1.0]
]; 
```

![在此处输入图像描述](../Images/3d981ce4f72f73841b37b15a3e69d64d.png)

问题是[UISegmentedControl](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISegmentedControl_Class/Reference/UISegmentedControl.html)的选定段 (Uno)并不比正常段 (Dos) 暗多少。正常段已经在正确的黑暗中，但我只想使选定的段变暗，这样人们就可以分辨出两者之间的区别。变暗色调会同时使它们变暗，所以这是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:37:27.127

最简单的方法是遍历分段控制器的子视图列表并查看选择了哪个，当您找到选定的子视图时，您需要将其色调调整为更暗。

```
for (int x= 0; x <[aSegementedController.subviews count]; x++) 
{
    UIBarButtonItem *subview = [aSegementedController.subviews objectAtIndex:x];
    if ([subview isSelected]) 
    {               

        [subview setTintColor:darkerColor];
    }
} 
```

然而，这不适用于 UIAppearance，我不相信它在那个级别是可定制的。

# java - 在 JButton 32x32 上设置 1 或 2 个字符的文本

> ID：10004891
> 
> 赞同：3
> 
> 时间：2012-04-04T04:22:31.927
> 
> 标签：java, button, text, jbutton, counter

我想在大小为 32x32 的 JButton 上设置文本，但它只显示“...”。是的，我知道如果您将按钮放大，您可以看到文本，但是如何使文本显示在 32x32 jbutton 上？文本只有 1 或 2 位数字（字符），它实际上是一个计数器。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T04:26:18.900

插图可能挤占了文字......

尝试

```
button.setMargin(new Insets(1, 1, 1, 1)); 
```

编辑：另外，使用较小的字体。

edit2：您还可以控制所有按钮的插图：

```
UIManager.put("Button.margin", new Insets(1, 1, 1, 1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T04:26:22.157

我不认为你可以，这是由 Java 使用的*外观直接管理的。*您可以尝试将其[更改](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)为另一个，看看是否有一个具有不同插图的。您可以尝试通过以编程方式设置较小的昆虫来更改它们。

一种更复杂的方法是子类化`JButton`该类并提供自定义绘图实现，但我认为您将失去所有其他很酷的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T04:42:52.937

```
As per my idea , its quite simple to making GUI application  easier.I am writing some code below it may help you .

public static void main(String[] args) {
        // TODO Auto-generated method stub
            JFrame frm=new JFrame("Manoj Button Test");
            frm.setVisible(true);
            frm.setSize(500,500);
            Container cnt=frm.getContentPane();
                        //You can add any text to the JButton
            JButton btn=new JButton("Hello Button");
            cnt.add(btn);           

            //2nd type of example 
            JButton btn2=new JButton();
            int number_btntext=4;
            btn2.setText(String.valueOf(number_btntext));
            cnt.add(btn2);

    }

In the above code I have set text to GUI JButton. 
```

# screen - Galaxy Nexus 密度问题

> ID：10004893
> 
> 赞同：1
> 
> 时间：2012-04-04T04:22:58.047
> 
> 标签：screen, galaxy

我正在为 Nexus S 和 Galaxy Nexus 开发应用程序。纵向模式下的屏幕尺寸为 Nexus S 480x800 Galaxy Nexus 720x1280

默认 MDPI 屏幕为 320x480。现在，如果在 dp/dip 中给出，我所有的边距和边框值都乘以密度因子

所以对于 Nexus S，它的精确映射是 320x1.5 = 480。然而，对于 Galaxy Nexus，它的 320x2.0 = 640 是不合适的。

因此，不要创建一个单独的布局文件夹并在 px 中添加值，这样我就可以实现精确的像素完美屏幕，因为 Galaxy nexus 是我唯一应该支持的 xhdpi 设备。

是否有任何其他选项可以修改系统的屏幕密度并将其设为 2.25 以进行进一步计算？

看到一个旗舰谷歌产品表现得如此不正常，真的很失望。

BR，杰​​希尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T08:47:31.457

[也许这篇文章会有所帮助](http://developer.android.com/guide/topics/resources/providing-resources.html)，尤其是关于`-h<N>dp`/`w<N>dp`和`sw<N>dp`文件夹的部分。

# ios5 - 如何将 ZXingWidget 添加为我的 Xcode 项目的依赖项

> ID：10004894
> 
> 赞同：1
> 
> 时间：2012-04-04T04:23:00.193
> 
> 标签：ios5, xcode4.2, zxing, objective-c-2.0

1.我已经在我的xcode4.2.1中成功运行了ScanTest示例项目

2.然后我尝试使用 ZXing README 将 ZXingWidget 包含到我的项目中。我发现 ZXingWidget 无法展开。看图片。我要疯了。

请帮忙，万分感谢！！！

![在此处输入图像描述](../Images/8b5bcc15d93fb970818c3ea49cbb703d.png)

![在此处输入图像描述](../Images/e204e1052d75ce7c27db722904c45208.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T14:30:41.147

重新启动 Xcode，问题应该得到修复。

# c - C - 在输入字符时从标准输入读取

> ID：10004895
> 
> 赞同：1
> 
> 时间：2012-04-04T04:23:04.453
> 
> 标签：c, input, buffer, stdin

如何在输入字符时或直到按下回车键或缓冲区已满（以先发生者为准）填充 80 个字符的缓冲区。

我已经研究了很多不同的方法，但是必须按下输入然后输入 char* 在 80 处被切断..

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T05:42:34.057

如果您真的想要“输入时”的字符，则不能使用 C io。您必须以 unix 方式进行操作。（或窗口方式）

```
#include <stdio.h>
#include <unistd.h>
#include <termios.h>
int main() {
  char r[81];
  int i;
  struct termios old,new;
  char c;
  tcgetattr(0,&old);
  new = old;
  new.c_lflag&=~ICANON;
  tcsetattr(0,TCSANOW,&new);
  i = 0;
  while (read(0,&c,1) && c!='\n' && i < 80) r[i++] = c;
  r[i] = 0;
  tcsetattr(0,TCSANOW,&old);
  printf("Entered <%s>\n",r);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T04:41:10.617

```
#include <stdio>
...
char buf[80];
int i;
for (i = 0; i < sizeof(buf) - 1; i++)
{
    int c = getchar();
    if ( (c == '\n') || (c == EOF) )
    {
        buf[i] = '\0';
        break;
    }
    buf[i] = c;
}
buf[sizeof(buf] - 1] = '\0'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T04:35:42.497

```
#include<stdio.h>
...
int count=0;
char buffer[81];
int ch=getchar();
while(count<80&&ch!='\n'&&ch!='\r'&&ch!=EOF){
    buffer[count]=ch;
    count=count+1;
    ch=getchar();
}
buffer[count]='\0'; 
```

一旦你有了`buffer`一个字符串，确保你消化了输入行的其余部分，以使输入流为下次使用做好准备。

这可以通过以下代码完成（取自[本文档](http://randu.org/tutorials/c/io.php)`scanf`的部分）：

```
scanf("%*[^\n]");   /* Skip to the End of the Line */
scanf("%*1[\n]");   /* Skip One Newline */ 
```

# javascript - 在 fancybox iframe 中打开表单

> ID：10004896
> 
> 赞同：0
> 
> 时间：2012-04-04T04:23:08.313
> 
> 标签：javascript, forms, fancybox

我需要将一些数据发布到页面 [PopUp.aspx]，而不刷新当前页面。然后[PopUp.aspx]会得到fancybox iframe的请求和响应，我想在[PopUp.aspx]中的控件上继续交互。

有什么建议吗？

下面是代码，但返回数据是纯html结果，我无法与页面内的控件交互[PopUp.aspx]

```
function onSubmit(ctr)
{
   $.fancybox.showActivity();

    $.ajax({
        type: "POST",
        cache: false,
        url: "PopUp.aspx",
        data: $(ctr).serializeArray(),
        success: function (data) {
            $.fancybox(data);
        }
    });
} 
```

*[Form Get]方法没有优化，所以使用[Form Post]方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T05:35:29.067

```
// Display an external page using an iframe
var src = "http://365.ericmmartin.com/";
$.modal('<iframe src="' + src + '" height="450" width="830" style="border:0">', {
    closeHTML:"",
    containerCss:{
        backgroundColor:"#fff",
        borderColor:"#fff",
        height:450,
        padding:0,
        width:830
    },
    overlayClose:true
}); 
```

# android - 如何将 Web 服务结果存储在数组中？

> ID：10004900
> 
> 赞同：0
> 
> 时间：2012-04-04T04:23:36.423
> 
> 标签：android, web-services, ksoap2

我正在使用 KSoap 在 android 中获取 .net Web 服务。我得到了输出，但我不知道如何将该结果存储在数组中。我的代码看起来像

```
SoapObject request=new SoapObject(SOAP_NAMESPACE, METHOD_NAME);
    request.addProperty("UId","212");
    request.addProperty("verificationID","123456");
    SoapSerializationEnvelope envelope=new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet=true;
        envelope.setOutputSoapObject(request);

        //Toast.makeText(this, "Request : "+request.getProperty(0), Toast.LENGTH_LONG).show();
    HttpTransportSE httpTransport=new HttpTransportSE(SOAP_URL);
    Log.v("Done", request.toString());
    try {
        httpTransport.call(SOAP_ACTION, envelope);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    try {
        SoapObject response = (SoapObject) envelope.getResponse();
        Toast.makeText(this, "Detail : "+response.toString(), Toast.LENGTH_LONG).show();
        Log.v("RESPONSE : ", response.toString());
    } catch (SoapFault e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我得到了对象响应的全部结果，但不知道如何存储在数组中......如果有人知道，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:33:04.050

```
List< SoapObject > results = ArrayList< SoapObject >();
... //your code here
results.add(response); 
```

列表是通过链接存储对象，如数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T04:36:06.867

使用以下代码。

```
SoapObject response = (SoapObject) envelope.getResponse();          

    String ret[] = new String[response.getPropertyCount()];
        for (int i = 0; i < response.getPropertyCount(); ++i) {
            ret[i] = response.getProperty(i).toString();
        } 
```

# pydev - pydev 在代码格式化时错误地格式化多行关键字参数

> ID：10004905
> 
> 赞同：0
> 
> 时间：2012-04-04T04:23:56.197
> 
> 标签：pydev

Pydev 错误地将多行关键字参数格式化为函数，并放置空格，即使首选项是没有空格的关键字参数，在特殊情况下，当它的关键字参数跟随常规参数时。

我在这里错过了什么吗？并且可能的错误报告应该停留在堆栈溢出上吗？法比奥？

例如

```
funktion_call(arg1, kwarg1 = abc) 
```

正确格式化为（使用适当的 pydev 设置）：

```
funktion_call(arg1, kwarg1=abc) 
```

但是，如果函数调用多行：

```
funktion_call(arg1, 
                  kwarg1=abc) 
```

然后它错误地将空格视为分配和格式：

```
funktion_call(arg1, 
                  kwarg1 = abc) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:21:39.987

实际上，我无法在最新的 PyDev 版本中重现它（你使用的是哪个版本？）

如果您可以可靠地重现它，请在 PyDev sf 跟踪器中创建一个错误报告，并附上示例以重现它。

关于在哪里报告事情，如果你不确定它是否是一个错误，这里是一个很好的地方问，但如果你确定这是一个错误，它应该直接报告给 PyDev sf 跟踪器。

# android - R.java 背后的概念是什么？

> ID：10004906
> 
> 赞同：38
> 
> 时间：2012-04-04T04:24:05.173
> 
> 标签：android, architecture, android-resources, r.java-file

在 android 中，R.java 用于提供对 XML 文件中定义的资源的访问。要访问资源，我们需要调用`findViewById()`传入要获取的资源 id 的方法。

这类似于 Spring，其中 bean 在 XML 上下文中定义并使用应用程序上下文获取。`context.getBean("beanId")`

这提供了松散耦合，因为 bean 是在外部定义的，并且可以在不修改代码的情况下进行更改。

这让我很困惑。虽然 Android 的功能看起来和 spring 很像，但它有什么优势呢？

> 1.  无论如何，拥有一个中间 R.java 有什么意义？难道我们不能直接通过使用资源读取器/应用程序上下文从 XML 获取资源吗？例如`findViewById("resourceId")`
> 2.  没有任何松散耦合。由于 R.java 中的引用是自动生成的，如何删除资源并放入新资源？
> 3.  它遵循什么设计模式（如果有的话）？
> 4.  使用 IOC（如 Roboguice）注入资源不是更好吗？那么为什么谷歌决定给我们这样一种奇怪的资源处理方式呢？

原谅我的无知。我是一名新手 Java 开发人员，一次尝试了太多事情。:-) 感谢所有的反馈。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-04T04:50:00.377

最大的优势在于本地化和为不同的屏幕尺寸提供替代资源。

例如，您可以拥有一个字符串资源`R.string.myname`，这可以用英语`/values-en/strings.xml`和西班牙语定义`/values-es/strings.xml`

系统将根据您只需要`@string/myname`在布局文件或`R.string.myname`代码中使用的语言环境来处理或选择正确的文件。

同样，您可以在中定义纵向和横向的两个布局文件

```
res/layout/mylayout.xml
res/layout-land/mylayout.xml 
```

在您的代码中，您只需指定 R.layout.mylayout 来扩展布局。如果设备处于横向模式，资源管理器会在 layout-land 中获取文件。

手动执行此操作将是一场噩梦——因此需要 R 文件

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-04T04:38:35.287

*android.R.java*不仅仅是存储*XML* id 的地方。它还包含对资源的访问——例如可绘制对象、布局、字符串、数组以及基本上可以在资源中声明的任何内容。

我个人发现它在使用 Eclipse 时很有用。我可以简单地键入`findViewById(R.id.`，Eclipse 将显示一个工具提示，其中包含可供选择的选项列表。

但是在平台级别，我会说硬编码的 id 变量有助于防止在使用字符串来识别资源时出现错误——在编程时（或在编译期间，而不是运行时）可以调试的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T04:48:01.810

这种比较感觉~~有点~~ *（实际上）*奇怪，因为你比较两种机制是基于它们使用*命名事物*来做事的事实。对于资源加载，例如，看看`.Net`世界上资源处理是如何完成的。

* * *

它提供*编译时*检查资源是否可用。因为如果不是，内部就不会有`R.java`指向它的静态。在 Spring 示例中，您如何确定有一个名为 的 bean `beanId`？但是，它不提供检查它是否是正确*类型*的资源。

为什么这个不松？只要新资源具有相同的名称，它就会生成相同的静态常量。在 Spring 中，您必须使用相同的 bean 名称。

设计模式？没有任何。它只是通过命名资源添加了一层间接性，然后*仅通过 name*引用它们，而不是直接从它们的真实位置加载它们。

实际上，资源*是*注入的，因为资源加载必须应对本地化。请参阅[此处](http://developer.android.com/guide/topics/resources/localization.html)了解 Android 的处理方式；在`.Net`世界上，更多的文化被打包到卫星组件中；[资源管理器](http://ondotnet.com/pub/a/dotnet/2002/09/30/manager.html)将根据当前文化加载正确的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-30T10:24:37.313

它还包含对资源的访问——例如 id、drawable、布局、字符串、数组，以及基本上可以在资源中声明的任何内容。

# java - struts 中的 web.xml 以及如何使用 struts-config.xml 进行配置

> ID：10004912
> 
> 赞同：2
> 
> 时间：2012-04-04T04:24:41.003
> 
> 标签：java, xml, jakarta-ee, netbeans, struts

```
<servlet>
<servlet-name>action</servlet-name>
<servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
</servlet>

<servlet-mapping>
<servlet-name>action</servlet-name>
<url-pattern>*.do</url-pattern>
</servlet-mapping> 
```

当我为我的项目选择 struts 框架时，上面的代码是由我的 IDE 自动生成的。我没有看到任何名为*action*的 servlet 。请解释这个xml是什么意思？

**编辑 ：**

我读到 ActionServlet 已经配置了 struts-config.xml 文件。它是如何配置的？

```
<struts-config>

<form-beans>
<form-bean name="HelloWorldActionForm"

type="com.vaannila.HelloWorldActionForm"/>

<action-mappings>
<action input="/index.jsp" name="HelloWorldActionForm" path="/HelloWorld"  scope="session" type="com.vaannila.HelloWorldAction">
<forward name="success" path="/helloWorld.jsp" />
</action>
</action-mappings> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T04:28:15.183

显示的配置文件是这样说的：

*   所有以结尾的 URL`.do`都将由名为`action`
*   servlet 命名`action`对应于类`org.apache.struts.action.ActionServlet`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T04:31:03.340

以下是 Struts 的工作原理：

Struts 有一个 FrontController。这意味着所有请求都通过这个控制器。这是 org.apache.struts.action.ActionServlet。该类使用**struts-config**将请求传递给其他类。

您已指定每次 URL：**/HelloWorld**请求时，ActionServlet 将请求传递给类**com.vaannila.HelloWorldAction**当您的类返回**成功**时，ActionServlet 将显示 jsp：**helloWorld.jsp**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-19T03:59:36.887

默认情况下，ActionServlet 配置为您的 Web 应用程序项目目录下的 /WEB-INF/struts-config.xml 文件。

例如：如果您的项目名称是 StrutsPractice 那么您可以在路径 /StrutsPractice/src/main/webapp/WEB-INF/struts-config.xml 中找到默认配置文件

要显式配置 ActionServlet 或者您想将其配置到不同路径中的配置文件，那么您可以在 web.xml 中配置它，如下所示

```
<servlet>
    <servlet-name>strutspractice</servlet-name>
    <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
        <init-param>
            <param-name>config</param-name>
            <param-value>/WEB-INF/struts-config.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>strutspractice</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping> 
```

# iphone - 如何以随机方式显示数组值

> ID：10004917
> 
> 赞同：-3
> 
> 时间：2012-04-04T04:25:10.963
> 
> 标签：iphone

> **可能重复：**
> [洗牌 NSMutableArray 的最佳方法是什么？](https://stackoverflow.com/questions/56648/whats-the-best-way-to-shuffle-an-nsmutablearray)

我正在开发一个应用程序。我有一个数组。包含 5 个值 1、2、3、4、5。我想以随机方式显示这些值。例如，第一次显示 3 2 4 5 1。第二次 1 3 2 4 5.每次我想更改订单时都这样。所以请告诉我如何做这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:37:52.190

1.  您可以生成一个介于 0 和数组大小 -1 之间的随机数
2.  使用数字索引数组
3.  删除数组索引处的项目

示例代码：

```
int i = arc4random() % 4;
NSString value = [arr objectAtIndex: i]
[arr removeObjectAtIndex: i]; 
```

重复这些步骤，直到你有一个空数组。

# android - 强制关闭应用程序

> ID：10004920
> 
> 赞同：0
> 
> 时间：2012-04-04T04:25:47.953
> 
> 标签：android, json, web-services, httpclient

我正在尝试从android应用程序访问jsp页面上的json数据“名称”。我收到错误并且应用程序被强制关闭。

我的jsp代码如下...

```
<%@page contentType="text/html; charset=UTF-8"%>
<%@page import="org.json.simple.JSONObject"%>
<%
JSONObject obj=new JSONObject();
obj.put("name","foo");
obj.put("num",new Integer(100));
obj.put("balance",new Double(1000.21));
obj.put("is_vip",new Boolean(true));
obj.put("nickname",null);
out.print(obj);
out.flush();
%> 
```

我的android java代码如下...

```
package com.campuspro.start;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONObject;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class JsonDemo extends Activity 
{
TextView tv=(TextView)findViewById(R.id.jsonresult);
HttpClient client=new DefaultHttpClient();
String url="http://10.0.2.2:7001/f/json.jsp";

@Override
protected void onCreate(Bundle savedInstanceState) {

    // TODO Auto-generated method stub
    try{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.result_json);
    HttpGet get=new HttpGet(url);
    HttpResponse r=client.execute(get);
    int status=r.getStatusLine().getStatusCode();
    if(status==200)
    {
        HttpEntity e=r.getEntity();
        String data=EntityUtils.toString(e);
        JSONArray arr=new JSONArray(data);
        JSONObject last=arr.getJSONObject(0);
        String result=last.getString("name");
        tv.setText(result);
    }

}catch(Exception e)
{

}
}

} 
```

我在 Eclipse 上的日志猫错误是...

```
04-04 09:30:53.910: D/AndroidRuntime(345): Shutting down VM
04-04 09:30:53.910: W/dalvikvm(345): threadid=1: thread exiting with uncaught exception           (group=0x4001d800)
04-04 09:30:54.190: E/AndroidRuntime(345): FATAL EXCEPTION: main
04-04 09:30:54.190: E/AndroidRuntime(345): java.lang.RuntimeException: Unable to   instantiate activity ComponentInfo{com.campuspro.start/com.campuspro.start.JsonDemo}:   java.lang.NullPointerException
04-04 09:30:54.190: E/AndroidRuntime(345):  at   android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
04-04 09:30:54.190: E/AndroidRuntime(345):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-04 09:30:54.190: E/AndroidRuntime(345):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-04 09:30:54.190: E/AndroidRuntime(345):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-04 09:30:54.190: E/AndroidRuntime(345):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-04 09:30:54.190: E/AndroidRuntime(345):  at android.os.Looper.loop(Looper.java:123)
04-04 09:30:54.190: E/AndroidRuntime(345):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-04 09:30:54.190: E/AndroidRuntime(345):  at java.lang.reflect.Method.invokeNative(Native Method)
04-04 09:30:54.190: E/AndroidRuntime(345):  at java.lang.reflect.Method.invoke(Method.java:521)
04-04 09:30:54.190: E/AndroidRuntime(345):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-04 09:30:54.190: E/AndroidRuntime(345):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-04 09:30:54.190: E/AndroidRuntime(345):  at dalvik.system.NativeStart.main(Native Method)
04-04 09:30:54.190: E/AndroidRuntime(345): Caused by: java.lang.NullPointerException
04-04 09:30:54.190: E/AndroidRuntime(345):  at android.app.Activity.findViewById(Activity.java:1637)
04-04 09:30:54.190: E/AndroidRuntime(345):  at com.campuspro.start.JsonDemo.<init>(JsonDemo.java:18)
04-04 09:30:54.190: E/AndroidRuntime(345):  at java.lang.Class.newInstanceImpl(Native Method)
04-04 09:30:54.190: E/AndroidRuntime(345):  at java.lang.Class.newInstance(Class.java:1429)
04-04 09:30:54.190: E/AndroidRuntime(345):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-04 09:30:54.190: E/AndroidRuntime(345):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
04-04 09:30:54.190: E/AndroidRuntime(345):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T04:28:17.703

你有错误

```
TextView tv=(TextView)findViewById(R.id.jsonresult); 
```

你应该在之后设置它`setContentView(R.layout.result_json);`

# c - 如何使用涉及多次读写的管道在子进程和父进程之间实现双向通信

> ID：10004922
> 
> 赞同：1
> 
> 时间：2012-04-04T04:26:09.230
> 
> 标签：c, linux, pipe

我已经实现了一个涉及子进程和父进程之间双向通信的场景。子进程使用 execvp 启动另一个 c 程序（比如 XYZ）。Parent 在 pipe1 的一端写入数据，而 pipe1 的另一端复制到 child 的 stdin。所以孩子读取这些数据，执行一些操作并将数据写回标准输出。此标准输出被复制到 pipe2 的写入端，现在父级从 pipe2 的读取端读取。不得修改外部程序 XYZ。要遵循的顺序是

1) 父级将数据写入 pipe1 2) 子级从 pipe1 的重复端 (stdin) 读取数据 3) 子级对数据进行一些修改并将数据写回 stdout，该标准输出复制到 pipe2 的读取端 4) 父级尝试读取数据从管道2的读取端。

上述场景可以重复 n 次。

上述场景示例与示例 1) 父级写入 1 2) 子级读取 1 并进行修改并将 1（修改后）写入标准输出 3) 现在父级读取此数据并打印回来 4) 打印后，父级将 2 写入标准输入 5 ) 继续如上......

我面临的问题是父级无法从 pipe2 的读取端读取数据。它从字面上挂出。

Imp 注意：我没有关闭 pipe1 的写句柄，因为我需要再次写入数据。如果我关闭手柄，我将无法重新打开它，因为它不受管道支持。

代码如下图

```
void Child_write  (pid_t Handle);
void Parent_write (pid_t Handle, char c);
void Child_read  (pid_t Handle);
void Parent_read (pid_t Handle);

void main()
{

  pid_t Pid;
  int   writepipe[2],readpipe [2];  

  pipe(readpipe);               /* Create two file descriptors  */
  pipe(writepipe);              /* Create two file descriptors  */

  Pid = fork();

  if (Pid == 0)         
  {
     close(writepipe[1]);               /* closing writepipe's write end */
     dup2(writepipe[0],0); close(writepipe[0]);     /* duplicating writepipe's read    end to stdin*/
     close(readpipe[0]);                /* closing readpipe's read end*/
     dup2(readpipe[1],1);  close(readpipe[1]);      /* duplicating readpipe's write end to stdout*/    
     Child_read(writepipe[0]);              /* reading data from write pipe read end and then duplicating*/

  }
  else                  
  {
     close(writepipe[0]);               /* closing writepipe's read end */
     Parent_write(writepipe[1],'1');            /* pupming data to the writepipe */
     close(readpipe[1]);                /* closing the readpipes write end */
     Parent_read(readpipe[0]);              /* reading the data which is pumped into readpipe */
     //Parent_write(writepipe[1],'2');          /* pupming data to the writepipe */
     //Parent_read(readpipe[0]);

     //Parent_write(writepipe[1],'3');
     //Parent_read(readpipe[0]);
     puts("***** End of parent process*****");
  }
}

void Child_read(pid_t handle)
{
   static char* command = "./stdoutput";
   execvp(command, NULL);
}

void Parent_write(pid_t handle, char c)
{
   char Buff[] = {'\n','\n'};
   Buff[0] = c;
   int n_written= write(handle, Buff, strlen(Buff)+1);

   printf("write function has written %d no of bytes and the data written is %s",n_written,Buff);

   //close(handle);
}

void Parent_read(pid_t handle)
{
    printf("PARENT PROCESS: In Parent_read function\n");
    int i=0;
    int bytes_read = 0;
    char buffer[1024]= {'\0'};
    while (read(handle, buffer, sizeof(buffer)) > 0)
    {
        printf("PARENT PROCESS:: In while loop\n");
        printf("The character/string read from readend of readpipe (stdout) is %s",buffer);
    }
    close(handle);
} 
```

外部程序如下图

```
void printing()
{
  int c;
  do
    {
        c = getchar();
        printf("%c",c);
    } while ((c != EOF) && (c != '\n'));
}

void main()
{
  printing();
  printing();
} 
```

请帮我 ！！！！！！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T08:35:10.447

在给定 FILE * 的第一次 I/O 调用（使用文件流函数）时，库决定流应该是行缓冲的、块缓冲的还是非缓冲的。在您的情况下，当 stdoutput 启动时，它的 stdoutput 不是终端，因此流进入块缓冲模式，而您的 printf 在缓冲区中结束。

将您的主要功能更改为：

```
void main()
{
  setvbuf(stdout, NULL, _IONBF, 0);
  printing();
  printing();
} 
```

您的 printf 调用将产生写入。

您还应该查看[setvbuf](http://www.kernel.org/doc/man-pages/online/pages/man3/setbuf.3.html)手册页，并学习使用 strace ：

```
strace -ff -o test.log ./myprog 
```

将产生两个日志文件（一个用于父级，一个用于子级），让您可以看到每个程序进行了哪些系统调用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T05:29:03.600

确实，正如 Jerry Coffin 评论的那样，您应该使用`popen`（某些系统还具有`p2open`双向管道，一进一出）。

如果你真的坚持自己做，你应该强烈考虑使用多路复用系统调用，比如[poll](http://linux.die.net/man/2/poll)（或者可能是旧的[select](http://linux.die.net/man/2/select)）。然后，您将能够测试可以读取或写入哪个文件描述符，并采取相应措施。

# scripting-bridge - 如何使用 ScriptingBridge 告诉 Safari 在新窗口中打开 URL？

> ID：10004928
> 
> 赞同：1
> 
> 时间：2012-04-04T04:26:53.033
> 
> 标签：scripting-bridge

我有一个使用 ScriptingBridge 来控制 Safari 的 Objective-C 应用程序。它可以工作，但是我在为新功能编写代码时遇到了麻烦——告诉 Safari 在新窗口中打开一个 URL。这是我想要的AppleScript：

```
tell application "Safari"
make new document at end of documents
set URL of document 1 to "http://www.apple.com/"
end tell 
```

这是我希望使用 ScriptingBridge 的等效代码：

```
NSString *appName = @"com.apple.Safari";
safariApp = [SBApplication applicationWithBundleIdentifier:appName];

SafariDocument *doc = [[[safariApp classForScriptingClass:@"document"] alloc] init];
[[safariApp documents] addObject:doc];
doc.path = @"http://www.ford.com"; 
```

当我执行后面的代码时，Safari 会打开一个新窗口，但该窗口显示的是我的主页，而不是 www.ford.com。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T04:54:29.567

这是解决方案：

```
NSDictionary *theProperties = [NSDictionary dictionaryWithObject:@"http://www.ford.com" forKey:@"URL"];
SafariDocument *doc = [[[safariApp classForScriptingClass:@"document"] alloc] initWithProperties:theProperties];
[[safariApp documents] addObject:doc];
[doc release]; 
```

# xml - 如何删除节点的属性 (MSXML)

> ID：10004929
> 
> 赞同：1
> 
> 时间：2012-04-04T04:27:02.617
> 
> 标签：xml, visual-studio-2010, xpath, msxml

假设我有一个评估 XPath 表达式“//node/@*”的结果。MSXML6 返回一组 IXMLDOMNode 对象，它们实际上是 IXMLDOMAttribute 对象。

问题：有没有办法删除只有一个代表属性的 IXMLDOMNode 对象的属性？

问题是 MSXML 只允许通过父节点删除子节点，但属性没有它（parentNode 返回 NULL）。因此，在使用 XPath 提取后，我无法从节点中分离属性。有办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:03:47.803

我认为 W3C DOM 引入了一个[属性 ownerElement](http://www.w3.org/TR/DOM-Level-3-Core/core.html#Attr-ownerElement)，但 MSXML 从未尝试赶上 W3C DOM。所以我能想到的最好的方法是 XPath 和 selectSingleNode 来查找父元素。这是使用 JScript 和 MSXML 6 完成的示例：

```
var doc = new ActiveXObject("Msxml2.DOMDocument.6.0");
if (doc.loadXML([
    '<root>',
    ' <foo att="1"/>',
    ' <bar att="2"/>',
    '</root>'
].join('\r\n')))
{
  var attributes = doc.selectNodes('//@att');
  for (var i = attributes.length - 1; i >=  0; i--)
  {

    attributes[i].selectSingleNode('..').removeAttributeNode(attributes[i]);
  }
  WScript.Echo(doc.xml);
}
else
{
  WScript.Echo(doc.xml);
} 
```

那么输出是

```
<root>
        <foo/>
        <bar/>
</root> 
```

所以这种方法有效。我意识到您不使用 JScript 而是可能使用 C++，您需要添加强制转换以获得正确的接口来公开类似的方法，`removeAttributeNode`但上面应该足以概述该方法。

最后一点，由于您没有提到任何编程语言或环境，而只提到了 VS 2010，MSXML 适用于本机代码，如果您使用 C# 或 VB.NET 编写托管 .NET 代码，那么您应该使用命名空间中的类System.Xml 及以下。

# ruby-on-rails - 通过回调方法验证 rails activerecord 字段？

> ID：10004931
> 
> 赞同：0
> 
> 时间：2012-04-04T04:27:35.900
> 
> 标签：ruby-on-rails, validation

有没有一种方法可以验证回调方法返回的布尔值中的单个字段？就像是：

validate_with_callback :title, :callback_method, '错误信息'

不必完全相同，但是否有类似的内置导轨？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:48:26.630

我想你可以这样做：

```
def self.validate_with_callback(attr, method, error)
  validate do |record|
    record.errors.add attr, error unless record.send(method)
  end
end 
```

但这只是一个愚蠢的包装器`validate`，所以我直接调用它。

# java - 如何孤立删除/更新 JPA 实体？

> ID：10004933
> 
> 赞同：0
> 
> 时间：2012-04-04T04:27:49.293
> 
> 标签：java, jpa, orm, eclipselink

```
public class Person{

@OneToMany(orphanRemoval = true)
List<Cars> myCars;
  //Get and Set
}

public class Car{
  Here Attribs    
} 
```

使用此代码，如果我删除/更新一辆车而不是列表的元素。它会更新/删除吗？

例子：

```
Person me = DAO.GetPerson(23);
Car oneCar = me.getCars().get(0); ///Lets say it exits
//then i update
oneCar.setThis(4);
oneCar.setThat(5);
DAO.UpdateCar(oneCar); //This is just EntityManager.merge
DAO.DeleteCar(oneCar); //This is just EntityManager.remove 
```

我如何保证孤儿费用将级联到列​​表所有者（在这种情况下为 PErson）？所以我可以通过一辆车而不是汽车列表来更新人的汽车。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:13:24.057

orphanRemoval 意味着您只需从集合中删除对象，而不是对其调用 em.remove() 。看来您正在做相反的事情，所以这无济于事。

您需要从人员的汽车列表中删除汽车，然后合并人员。如果您级联合并，那么您根本不需要单独合并汽车，或者对其调用 remove 。

仅当您的对象已分离时才需要合并。如果您在同一个 EntityManager/事务中进行更改，那么您根本不需要调用合并。

# html - 使用 HTML5 的 LAN 消息传递？

> ID：10004934
> 
> 赞同：2
> 
> 时间：2012-04-04T04:27:57.187
> 
> 标签：html, messaging, lan

我想创建一个在 iPad、Playbook 和 Windows 计算机上运行的程序，它允许我创建用户数据库并让用户在彼此之间发送消息。我只需要它在局域网上运行，并且由于用户不希望互联网上的人能够访问局域网上发生的事情。目标是在玩游戏的人之间发送简单的聊天和状态更新。

据我所知，HTMl5 将允许我创建一个可以在设备上运行的程序，并具有一些现有的消息传递功能，明年还会有更多功能。这可以做到吗？可以在没有网络服务器的情况下完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T04:43:11.360

我不确定是不是在看这种方式。但是，有一个名为 WebRTC 的协议是免费和开源的，它将使浏览器能够通过 Javascript API 进行实时通信。更多信息可以从以下站点获得： [http:/ /www.webrtc.org/](http://www.webrtc.org/) 它也可以使用 HTML 5。希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T04:33:45.700

是的，可以这样做，但是您需要在 LAN 中设置一个 Web 服务器来提供 HTML5 和路由消息。

# debugging - 在 R 函数中粘贴变量名

> ID：10004939
> 
> 赞同：2
> 
> 时间：2012-04-04T04:28:28.227
> 
> 标签：debugging, r, function

[在flodel](https://stackoverflow.com/users/1201032/flodel)的帮助下，我[找到了一种用查找表中的值标签替换数字代码的方法](https://stackoverflow.com/questions/10002536/how-do-i-replace-numeric-codes-with-value-labels-from-a-lookup-table)。

像我一样雄心勃勃，我现在想把它变成一个函数。此外，我有很多查找表需要快速查找我的数据，这样一个函数就会很方便。

但首先是一些样本数据，从数据框开始，

```
df <- data.frame(id = c(1:6),
                 profession = c(1, 5, 4, NA, 0, 5))

df
#  id profession
#  1          1
#  2          5
#  3          4
#  4         NA
#  5          0
#  6          5 
```

以及一个包含有关职业代码的人类可读信息的查找表，

```
profession.lookuptable <- c(Optometrists=1, Accountants=2, Veterinarians=3, 
                            `Financial analysts`=4,  Nurses=5) 
```

[flodel](https://stackoverflow.com/users/1201032/flodel)向我展示了[如何用查找表中的值标签替换数字代码](https://stackoverflow.com/questions/10002536/how-do-i-replace-numeric-codes-with-value-labels-from-a-lookup-table)。像这样，

```
match.idx <- match(df$profession, profession.lookuptable)
df$profession <- ifelse(is.na(match.idx), 
                 df$profession, names(profession.lookuptable)[match.idx])

df
#  id         profession
#  1        Optometrists
#  2              Nurses
#  3  Financial analysts
#  4                <NA>
#  5                   0
#  6              Nurses 
```

我现在想把它放到一个函数中，我可以在其中声明数据框`df`和变量的名称，`profession`并让函数负责其余的工作。

我这样定义我的功能，

```
ADDlookup <- function(orginalDF, orginalVAR) {
   DF.VAR <- paste(orginalDF, "$", orginalVAR, sep="")
   lookup.table <- paste(orginalVAR, ".lookuptable")
   match.idx <- match(DF.VAR, lookup.table)
   DF.VAR <- ifelse(is.na(match.idx), DF.VAR, names(lookup.table)[match.idx])
} 
```

但显然这不起作用

```
ADDlookup(df, profession) 
```

我得到了错误的混乱

```
Error in paste(orginalDF, "$", orginalVAR, sep = "") : 
  object 'profession' not found 
```

现在，这就是我卡住的地方。

谁能告诉我需要阅读什么手册页，或者可能是关于如何解决这个问题的友好提示？

感谢您的阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T04:45:26.050

这是因为您正在传递`profession`函数`ADDlookup`，但它还不存在。

您编写函数的方式，您必须区分使用*包含变量名称的字符向量*和*变量本身*。

例如，您的前几行`paste(originalDF,'$',originalVAR,sep='')`等似乎期望`originalDF`并且`originalVAR`是*strings*，而您将`DF.VAR`成为*string* `'df$profession'`。但是，当您这样做时，您`match`似乎想`DF.VAR`成为*变量* `df$profession`。

这就是我建议你绕过它的方法： -`originalDF`作为对象`df` 传入，作为 -`originalVAR`作为*字符串*传入，作为`'profession'`（它是列名，因此是字符串）

然后，通过以下方式从数据框中检索包含的*列：*`originalVar`

```
DF.VAR <- originalDF[,originalVAR] # e.g. df[,'profession'] 
```

现在查找对象的下一行`profession.lookuptable`有点棘手：构造*字符串* `'profession.lookuptable'`，然后要查找具有该名称的*对象。*

为此，您可以使用`get`( `?get`)。`get('df')`将返回`df`数据框：

```
lookup.table <- get(paste(orginalVAR, "lookuptable",sep='.')) 
```

这将检索名为`'profession.lookuptable'`. 它遵循与您直接键入相同的规则`profession.lookuptable`，因此您必须确保该函数可以“看到”该对象（在您的情况下应该没问题）。

接下来，您似乎想要返回已将列替换为查找值的`originalDF`数据框。`originalVAR`

我将`originalDF[,originalVAR]`通过将其替换为查找值来修改该列：

```
originalDF[,originalVAR] <- 
   ifelse(is.na(match.idx), DF.VAR, names(lookup.table)[match.idx]) 
```

**请注意**，我们实际上并*没有*修改`df`您作为参数传入的数据框`ADDlookup`；R在函数中*复制*数据框。因此，您的原件`df`将被保留。

最后，我们要返回数据框：

```
return(originalDF) 
```

现在都在一起了：

```
ADDlookup <- function(orginalDF, orginalVAR) {
   # retrieve the originalVAR column of originalDF
   DF.VAR <- originalDF[,originalVAR] 
   # find the variable called {originalVAR}.lookuptable
   lookup.table <- get(paste(originalVAR, "lookuptable",sep='.'))
   # look up the values
   match.idx <- match(DF.VAR, lookup.table)
   # replace the originalVAR column with the looked-up values
   originalDF[,originalVAR] <- 
       ifelse(is.na(match.idx), DF.VAR, names(lookup.table)[match.idx])
   # return the modified data frame
   return(originalDF)
} 
```

现在来测试它：

```
> ADDlookup(df,'profession')
  id         profession
1  1       Optometrists
2  2             Nurses
3  3 Financial analysts
4  4               <NA>
5  5                  0
6  6             Nurses 
```

请注意，原件`df`未经修改；通常，R 函数*不会*修改传递给它们的参数。

* * *

作为另一项改进——在调用函数之前依赖`professions.lookup`已创建的表通常有点危险。`ADDlookup`

而不是整个`lookup.table <- get( 'profession.lookup' )`shebang（这取决于您是否在各种范围内有多个“profession.lookup”表），我强烈建议您只将查找表作为参数传递：

```
ADDlookup <- function( originalDF, originalVAR, lookup.table ) 
```

然后，您可以避免整`get(xxxx)`行（以及随之而来的所有相关范围界定问题）。

然后你可以通过以下方式调用该函数：

```
ADDlookup( df, 'profession', profession.lookup ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T04:45:13.973

当然有更复杂的方法可以让它按照你最初设想的方式工作，但是简单地重新组织这个函数的工作方式会简单得多：

```
ADDLookup <- function(originalDF,var,varLookup){
    match.idx <- match(originalDF[,var], varLookup)
    originalDF[,var] <- ifelse(is.na(match.idx), 
                        originalDF[,var], names(varLookup)[match.idx])
    originalDF
}                            

ADDLookup(df,"profession",profession.lookuptable)
  id         profession
1  1       Optometrists
2  2             Nurses
3  3 Financial analysts
4  4               <NA>
5  5                  0
6  6             Nurses 
```

请注意，现在我将数据框 、`df`相关变量的名称`var`作为文字字符传递，并将查找表本身作为参数传递。

此外，您现在已经了解了为什么`$`在交互使用中比在编程中使用更多！因为它与传递给函数的参数不能很好地结合。对于那种类型的任务，您需要`[`语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:42:43.657

我会将查找表定义为因素。

```
df[,"profession"] <- profession.lookuptable[df[,"profession"]] 
```

# java - Facebook Graph API 未返回 JSON 对象。它返回 TRUE ！为什么？

> ID：10004942
> 
> 赞同：0
> 
> 时间：2012-04-04T04:28:52.367
> 
> 标签：java, facebook, facebook-graph-api, login

我正在尝试在服务器端制作“使用 facebook 登录”按钮。

我成功获取了 access_token，但是当我调用 url 来接收带有用户信息的 json 对象时，响应正文内容仅返回“True”

最糟糕的是，如果我将 url 粘贴到同一个浏览器窗口中，浏览器会在响应正文中带来正确的 json 文本。

那是因为我在服务器端进行了此调用，并且进行调用的代码位于此处：

```
String token_url = "https://graph.facebook.com/oauth/access_token?"
    + "client_id=" + app_id + "&redirect_uri=" + URLEncoder.encode(my_url, "UTF-8")
    + "&client_secret=" + app_secret + "&code=" + code;

String response = Util.sendGET(token_url, "GET", "application/json"); 
```

函数 sendGET 如下：

```
public static String sendGET (String pageUrl, String method, String contentType) {
    String pagecontent = "";
    try {
        String stuff = null;

        java.net.URL url = new java.net.URL(pageUrl);
        java.net.HttpURLConnection conn = (java.net.HttpURLConnection)url.openConnection();
        conn.setRequestMethod(method);
        conn.setRequestProperty("Content-Type", contentType);
        conn.setDoOutput(true); 
        conn.setUseCaches(true); 
        conn.setAllowUserInteraction(false);

        DataOutputStream printout = new java.io.DataOutputStream(conn.getOutputStream ());
        BufferedReader in = new java.io.BufferedReader(
                                        new InputStreamReader(conn.getInputStream())
                                    ); 
        while ((stuff = in.readLine()) != null) {
            pagecontent += stuff; 
        }
        in.close(); 
        System.out.println("Page Content = " + pagecontent);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return pagecontent;
} 
```

正如我所说，pagecontent 的结果是“true”字符串，但是如果我将 de token_url 内容粘贴到浏览器上，它会带来正确的 json 对象。

# c# - 11 个数据库的 1 个 Web 服务

> ID：10004943
> 
> 赞同：1
> 
> 时间：2012-04-04T04:28:59.830
> 
> 标签：c#, asp.net, database

我正在为某家银行做一个项目。他们没有集中的数据库。他们为每个城镇使用多个数据库，例如他们在菲律宾拥有自己的数据库服务器，就像他们在其他国家拥有自己的数据库服务器一样。

他们在每个国家/地区为他们的本地应用程序使用不同的数据库服务器。

Web 服务是否有可能具有多个数据库连接字符串？

例如，如果我目前位于澳大利亚，如果我要注册，将使用的连接字符串是澳大利亚的数据库。

请有任何建议，如果您有，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T04:42:04.773

我假设您的（集中式）Web 服务可以连接到任何/所有数据库。你当然可以有多个连接字符串

```
 <connectionStrings>
    <add name="DbForPhillipines" connectionString="Data Source=1.2.3.5,1433;Initial Catalog=BankDB;User ID=user;Password=pass" 
providerName="System.Data.SqlClient" />
    <add name="DbForAussie" connectionString="Data Source=11.12.13.15,1433;Initial Catalog=BankDB;User ID=user;Password=pass" 
providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

然后，您需要将连接字符串名称与每个用户关联（直接关联，例如 User.ConnectionString 名称，或者最好通过间接关联，例如 User => Country => ConnectionStringName）

# eclipse - 如何将依赖项添加到 Eclipse

> ID：10004945
> 
> 赞同：1
> 
> 时间：2012-04-04T04:29:26.480
> 
> 标签：eclipse, maven, dependencies

我有 Eclipse IDE 3.6，我想使用 Maven 插件进行 Eclipse，所以我在[http://q4e.googlecode.com/svn/trunk/updatesite-iam/添加了 Eclipse IAM 更新站点](http://q4e.googlecode.com/svn/trunk/updatesite-iam/)

如何添加以下内容：

```
<dependency>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-rt-frontend-jaxrs</artifactId>
    <version>2.3.0</version>
</dependency> 
```

所以我可以使用 UriBuilder

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T05:31:52.343

也许现在最好使用官方的**[m2e“Maven for Eclipse”插件](http://www.eclipse.org/m2e/)**，而不是旧项目。

> m2ec 项目的目标是在 Eclipse IDE 中提供一流的 Apache Maven 支持，从而更轻松地编辑 Maven `pom.xml`，从 IDE 运行构建等等。
> `m2e`也是一个平台，可以让其他人更好地集成其他 Maven 插件（例如 Android、Web 开发等）

查看其[更新站点](http://www.eclipse.org/m2e/download/)。

# r - 将具有最大值的列的索引添加为新列

> ID：10004948
> 
> 赞同：3
> 
> 时间：2012-04-04T04:29:54.527
> 
> 标签：r, sas, max, apply

我的问题很简单。当数据如下时，

```
var1    var2    var3
10      40      60
15      10      5 
```

我想添加一个新列，该列返回在和`MaxValueVar`之间具有最大值的列的`var1`索引。也就是说，我想制作一个如下表。`var2``var3`

```
var1    var2    var3    MaxValueVar
10      40      60      3
15      10      5       1 
```

在 RI 中会使用：

```
apply(vector, 1, which.max) 
```

如何使用 SAS 完成此任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T06:42:25.170

根据您在此处提供的示例，一种解决方案供您参考。你没有提到如何处理关系。在这里，对于领带，第一次出现被提取。

```
data test;
input var1 var2 var3;
datalines;
10      40      60
15      10      5
run;

data test;
 set test;
 maxvalue=max(of var1-var3);
 maxvaluevar=0;
  array vars (*) var1-var3;
    do i=1 to dim(vars);
     if maxvaluevar=0 then maxvaluevar=i*(maxvalue=vars(i))+maxvaluevar;
    end;
 drop i maxvalue;
run; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T16:40:12.217

这是与 Robbie's 类似的解决方案。`vname()`除了数组中的索引之外，它还使用该函数来获取第一个最大值的变量名。

```
data maxarr (drop=i);
input var1 var2 var3;
 array vars(*) var1-var3;
 max=max(of vars(*));
   do i=1 to dim(vars);
     if vars(i)=max then do;
          MaxValueIndx=i;
          MaxValueVar=vname(vars(i));
          leave;
     end;
   end;
datalines;
10      40      60
15      10      5
;
run;

proc print data=maxarr noobs;run; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T00:04:41.917

下面的代码应该可以按预期工作，并在存在关联的情况下创建更多列。我知道你说过不要打扰，但这让我很烦！

输入测试数据：

```
data test;
    input var1 var2 var3;
    cards;
10 40 60
15 10 5
7 8 9
13 13 10
5 7 6
10 11 12
10 10 10
1 3 2
3 3 1
;
run; 
```

检查最大值的代码：

```
data test (drop = i howmanymax);
    set test;
    retain howmanymax;

    howmanymax=0;

    array varlist[*] var1--var3;
    array maxnum[3];

    do i = 1 to DIM(varlist);
        if varlist[i] = max(of var1--var3)
            then do;
                howmanymax+1;
                maxnum[howmanymax] = i;
            end;
    end;

run; 
```

输出如下所示：

```
 var1  var2  var3  nummax1 nummax2 nummax3
    10    40    60        3       .       .
    15    10     5        1       .       .
     7     8     9        3       .       .
    13    13    10        1       2       .
     5     7     6        2       .       .
    10    11    12        3       .       .
    10    10    10        1       2       3
     1     3     2        2       .       .
     3     3     1        1       2       . 
```

# ruby - 使用 nokogiri 解析 javascript 函数元素

> ID：10004950
> 
> 赞同：1
> 
> 时间：2012-04-04T04:29:55.400
> 
> 标签：ruby, nokogiri

我正在尝试使用 mechanize + nokogiri 解析脚本标记中的值。这是我所能得到的

```
1.9.3-p125 :107 > agent.page.search("script")[7]
=> #<Nokogiri::XML::Element:0x3ff1e10f3ff8 name="script" attributes=
[#<Nokogiri::XML::Attr:0x3ff1e10f3f80 name="type" value="text/javascript">] children=
[#<Nokogiri::XML::CDATA:0x3ff1e10f39b8 "countdownFactory.create('47884', '1333724400000', '');countdownFactory.create('48436', '1333638000000', '');countdownFactory.create('46085', '1333627200000', '');countdownFactory.create('48151', '1333551600000', '');countdownFactory.create('48211', '1333638000000', '');countdownFactory.create('48511', '1333551600000', '');countdownFactory.create('48513', '1333551600000', '');countdownFactory.create('48482', '1333551600000', '');countdownFactory.create('48439', '1333551600000', '');countdownFactory.create('48299', '1333551600000', '');countdownFactory.create('48272', '1333670400000', '');countdownFactory.create('46371', '1333638000000', '');countdownFactory.create('48254', '1333724400000', '');countdownFactory.create('46086', '1333638000000', '');countdownFactory.create('48317', '1333638000000', '');countdownFactory.create('48435', '1333724400000', '');countdownFactory.create('47223', '1334059200000', '');countdownFactory.create('48234', '1333972800000', '');countdownFactory.create('48407', '1333638000000', '');countdownFactory.create('48429', '1333638000000', '');countdownFactory.create('48212', '1333638000000', '');countdownFactory.create('48275', '1333551600000', '');countdownFactory.create('48205', '1333551600000', '');countdownFactory.create('48414', '1333886400000', '');countdownFactory.create('48185', '1333713600000', '');countdownFactory.create('48215', '1333540800000', '');countdownFactory.create('47636', '1333638000000', '');">] 
```

如何将所有 countdownFactory.create 元素放入哈希中？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T04:55:30.130

Nokogiri 不做 JavaScript 解析，但这并不难用正则表达式解析：

```
element = agent.page.search("script")[7]
text = element.text # not 100% sure on this line. Just need the script text though.
Hash[text.scan(/countdownFactory.create\('(\d+)', '(\d+)', ''\)/)] 
```

# facebook - FB.login 使用显示为 iframe

> ID：10004951
> 
> 赞同：1
> 
> 时间：2012-04-04T04:30:03.653
> 
> 标签：facebook, facebook-graph-api

我知道 facebook 最近更改了代码，以便在 facebook.com 的弹出窗口中提供登录凭据或重定向到 facebook.com

但是我需要在同一页面上的 iframe 中制作 FB.login，因为我正在做的事情是用户在我的应用程序上提交的表单。如果用户输入了一些数据并且他没有登录，那么在页面上，用户被要求使用弹出窗口登录 Facebook。但是对于 safari，弹出窗口被阻止。所以这让人很不方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:34:23.503

对 FB.login() 的调用应该在 onclick 处理程序中，然后弹出窗口阻止程序不会杀死它。

FB 在 iframe 中登录是不可能的，因为一些浏览器对在 iframe 中设置 cookie 的限制比在弹出窗口中所做的更严格。它也更容易受到点击劫持和密码盗窃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:17:24.740

这是因为 getLoginStatus 覆盖了杀死弹出窗口的用户操作。

# python - 如何为会话和登录系统设置 pyramid_beaker？

> ID：10004954
> 
> 赞同：1
> 
> 时间：2012-04-04T04:30:22.140
> 
> 标签：python, session, login, pyramid, beaker

我正在尝试按照此处的说明进行操作（[http://docs.pylonsproject.org/projects/pyramid_beaker/en/latest/](http://docs.pylonsproject.org/projects/pyramid_beaker/en/latest/)），以便设置会话/登录系统。这些说明让我很困惑。“默认激活设置”到底是什么？这是否意味着当我调用 config.include('pyramid_beaker') 时已经有会话工厂的配置，所以调用 pyramid_beaker.BeakerSessionFactoryConfig() 是不必要的？

使用 pyramid_beaker 的安全登录/权限系统最简单的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T04:46:30.447

Beaker 是一个用于处理缓存和会话（即非持久数据）的库。您可以劫持会话并使用它来存储用户是否登录（`request.session['user_id'] = some_id`或通过`pyramid.authentication.SessionAuthenticationPolicy`）。这两个都将简单地在会话中存储/跟踪当前用户 ID，而不是在其他一些 cookie 中。但是请注意，这与您用于处理用户凭据和登录的权限**或**工作流程无关。

是的，`config.include('pyramid_beaker')`将通过您的 INI 设置自动为您配置缓存区域和会话工厂（这些设置记录在您提供的链接以及单独的烧杯文档中）。

围绕这个想法设置登录/权限系统的最简单方法是遵循金字塔文档中的 wiki 教程。它展示了如何使用 SQLAlchemy 登录用户，如果您认为有必要`AuthTktAuthenticationPolicy`，您可以轻松地将其替换为。`SessionAuthenticationPolicy`

# ruby - 在 jRuby gem 中包含依赖项的问题

> ID：10004956
> 
> 赞同：1
> 
> 时间：2012-04-04T04:30:28.323
> 
> 标签：ruby, gem, jruby

我正在尝试使用内部依赖项打包 jRuby gem。例如，我将“fastercsv”gem 包含到*vendor/jruby/1.9/gems/fastercsv-1.5.4*中，并在我的 Gemfile 中使用了“:path”参数，见下文：

```
gem 'fastercsv', '~> 1.5.4',
 :path => "vendor/bundle/jruby/1.9/gems/fastercsv-1.5.4" 
```

现在的问题是我得到

```
Could not find gem 'fastercsv (~> 0.9.2.2) java' in source at vendor/bundle/jruby/1.9/gems/fastercsv-0.9.2.2. 
```

关于如何解决这个问题的任何想法？

提前致谢

# django - django 中的上下文处理器与中间件

> ID：10004962
> 
> 赞同：24
> 
> 时间：2012-04-04T04:31:02.607
> 
> 标签：django, django-templates, django-middleware, django-context

在我看来，上下文处理器可以做的所有事情，中间件都可以做。那么上下文处理器的意义何在？它们只是中间件精简版吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-10-23T03:09:24.847

中间件在底层充当 Django 请求/响应处理的钩子，它很轻。这些钩子可用于请求、响应、视图、模板响应和异常处理。钩子可能需要在视图处理请求之前修改请求，它可能需要记录有关请求的信息以进行调试，检查 cookie 以设置本地，等等。

阅读有关[中间件](https://docs.djangoproject.com/en/dev/topics/http/middleware/)的更多信息。

上下文处理器只是修改上下文。上下文是一个键值映射，变量传递给模板。上下文处理器将请求对象作为其参数，并返回合并到上下文中的项目字典。上下文会根据您的视图呈现到您的模板中，并附加您的上下文处理器合并的任何其他内容。您可以将其视为全局上下文变量，在您的所有模板中都可用。

阅读有关[上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/)的更多信息。

两者都相当容易编写并且有其目的。这是一个图表，显示了中间件和上下文在典型 django 流程中的位置：

![在此处输入图像描述](../Images/6a1f5e3d2478a7788f30f3f5ce6812e6.png)

Django 流程图

1.  用户请求页面

2.  请求到达请求中间件，它可以操纵或回答请求

3.  URL 使用 urls.py 确定相关视图

4.  视图中间件被调用，它可以操纵或回答请求

5.  调用视图函数

6.  视图可以选择通过模型访问数据

7.  所有模型到数据库的交互都是通过管理器完成的

8.  如果需要，视图可以使用特殊的上下文

9.  上下文被传递给模板进行渲染

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-04T04:34:07.927

上下文处理器用于为模板提供额外的数据。中间件用于拦截请求/响应对象，并以某种有意义的方式修改它们（或触发其他行为）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T05:26:00.940

它们针对不同的上下文在不同级别的堆栈中工作。通常很难让一个框架的堆栈保持绝对正统，尤其是像 Django 处理这样的 Web 框架唯一的事情就是请求和响应。是的，我们可以在渲染模板时使用 request.user，而不是 context.user by context_processor。但是您可能不希望在每个请求上都设置仅在模板中使用的属性。

此外，对于视图级操作，装饰器比中间件灵活，但很难说中间件是装饰器精简版。顺便说一下，我想将上下文处理器视为分配模板标签，但会自动加载。

# iphone - NSURLConnection 因 URL 无效而挂起

> ID：10004964
> 
> 赞同：2
> 
> 时间：2012-04-04T04:31:26.463
> 
> 标签：iphone, objective-c, http

我正在创建一个`NSURLConnection`但使用无效的 URL (http://thiswontwork.com/asdf)。我在主线程上调用它，并且在我的委托中实现了所有委托方法。

连接挂起并且从不调用任何委托方法，我本来希望`connection:didFailWithError:`被调用的。唯一调用的委托方法是

```
- (NSURLRequest *)connection:(NSURLConnection *)connection willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)redirectResponse 
```

有没有人遇到过这样的事情？

发生在设备上的调试器和模拟器中（xCode4 上的 iOS5）。

已经创建了一个带有单个按钮示例的简单视图控制器来演示，如果需要可以发布代码。

正在根据请求设置超时间隔（至 30 秒）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:50:11.023

如果返回 nil，则连接完成。我现在不在文档前面，但我相信将`NSURLRequest`传递的内容返回到函数中是标准做法。就像是：

```
-(NSURLRequest *)connection:(NSURLConnection *)connection willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)response{
    return request;
} 
```

**编辑**

在查看文档后，我明白你的意思。如果您返回 nil 会发生什么，该文档极具误导性。它说如果您返回 nil，则连接将继续，但我相信这仅适用于`response`不是 nil 的情况。我在我编写的一个小型下载管理器项目中测试了返回 nil，它似乎完全停止了连接。

这似乎要么是一个错误，要么是一个糟糕的文档实例。

# java - 从服务器套接字读取客户端 URL 请求

> ID：10004965
> 
> 赞同：1
> 
> 时间：2012-04-04T04:31:27.137
> 
> 标签：java, sockets

我正在使用 Socket 创建一个 Java 服务器。我想打印客户端应用程序在联系服务器时请求的 URL。也就是说，如果客户端请求：[https://your.server.com?usr=user_name](https://your.server.com?usr=user_name)，我想从服务器端读取这个 url。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T04:37:18.407

看起来现在每个人都在这样做；）

看看这个人，他也在做同样的事情：[URL Parsing with Java server using Runnable class](https://stackoverflow.com/questions/10003998/url-parsing-with-java-server-using-runnable-class)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:34:02.897

您不能拥有客户端请求的完整 URL。查看 HTTP 协议[RFC](http://www.w3.org/Protocols/rfc2616/rfc2616.html)。在您的消息的第一行，您有

```
GET /pub/WWW/ HTTP/1.1 
```

所以第一个值是请求方法，第二个值是 url 的一部分，没有

```
http://myhost:myport 
```

然后在标题字段中，有时，您只能找到主机

```
Host: myhost 
```

# c - setsockopt 出现奇怪错误，“协议不可用”

> ID：10004969
> 
> 赞同：2
> 
> 时间：2012-04-04T04:31:47.420
> 
> 标签：c, linux, sockets

适用的代码如下，确切的错误也是如此。

```
sd = socket(AF_INET, SOCK_RAW, IPPROTO_RAW);
if ( setsockopt( sd, IPPROTO_IP, IP_HDRINCL, &on, sizeof(on) ) < 0 )
{
    printf("%s\n", strerror(errno));
}
if ( setsockopt( sd, IPPROTO_IP, IP_DF, &on, sizeof(on) ) < 0 )
{
    printf("%s\n", strerror(errno));
    printf("DF\n");
} 
```

错误：

```
root@PC:~# gcc main.c
main.c: In function ‘main’:
main.c:71: warning: format not a string literal and no format arguments
root@PC:~# ./a.out localhost
Protocol not available
DF 
```

奇怪的是，第二个 setsockopt 出错了，而第一个却没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T04:39:34.610

`IP_DF`是一个数据包标志，而不是一个套接字选项。有效的套接字选项在`ip(7)`手册页中给出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:30:58.730

来自 ip(7) 手册页；

```
 IP_NODEFRAG (since Linux 2.6.36)
          If enabled (argument is nonzero), the reassembly of outgoing packets is
          disabled in the netfilter layer.  This option is only valid for
          SOCK_RAW sockets.  The argument is an integer. 
```

# bash - BASH，目录更新时自动运行脚本？

> ID：10004972
> 
> 赞同：4
> 
> 时间：2012-04-04T04:32:22.200
> 
> 标签：bash, events

有什么方法可以设置一个简单的 bash 脚本，例如

```
chmod a+xr -R ~/lib/ 
```

但是以某种方式，当任何文件被创建或移动到lib目录中时，这个脚本会自动运行，并且目录嵌套在lib中？

有点像等待某个事件发生，触发脚本的执行——这就是我正在寻找的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T04:41:40.100

### 是的， 。. .

. . . 主要的 Unix 版本具有对传统 Posix 核心服务的事件框架扩展。

如果您正在学习 Linux，请参阅[dnotify](http://en.wikipedia.org/wiki/Dnotify)和后来的工具[inotify](http://en.wikipedia.org/wiki/Inotify)。

这些设施与 bash 并没有太大关系，但 dnotify 是面向运行脚本的。这些功能可能已经在您的内核中，但您很可能需要安装诸如[inotify-tools](https://github.com/rvoicilas/inotify-tools/wiki/)之类的软件包才能轻松访问它们。

BSD 系统和其他 Unix-proper 系统具有等效的机制。

# vb.net - 如果文件很大，如何确保文件在 vb.net 中具有唯一行

> ID：10004974
> 
> 赞同：1
> 
> 时间：2012-04-04T04:32:42.513
> 
> 标签：vb.net, text, hashmap, collation

**语言：** vb.net 文件大小：1GB，等等。

**文本文件的编码：** UTF8（因此每个字符由不同的字节数表示）。

**排序规则：** UnicodeCI（当几个字符基本相同时，最流行的版本将是唯一的。）。我想我知道如何处理他的问题。

因为每个字符用不同的字节数表示，每行有不同的字符数，所以每行的字节数也不同。

我想我们必须为每一行计算哈希。我们还需要存储缓冲区位置所在的每一行。然后我们必须比较缓冲区。然后我们将检查是否显示同一行。

有没有最适合的特殊功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:37:30.607

根据行的长度，您可以计算每行的 MD5 哈希值并将其存储在 a 中`HashMap`：

```
Using sr As New StreamReader("myFile")
    Dim lines As New HashSet(Of String)
    Dim md5 As New Security.Cryptography.MD5Cng()

    While sr.BaseStream.Position < sr.BaseStream.Length
        Dim l As String = sr.ReadLine()
        Dim hash As String = String.Join(String.Empty, md5.ComputeHash(System.Text.Encoding.UTF8.GetBytes(l)).Select(Function(x) x.ToString("x2")))

        If lines.Contains(hash) Then
            'Lines are not unique
            Exit While
        Else
            lines.Add(hash)
        End If
    End While
End Using 
```

未经测试，但这可能足以满足您的需求。我想不出更快的东西，仍然保持一些简洁的外表:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T05:58:44.453

这是当代答案

```
Public Sub makeUniqueForLargeFiles(ByVal strFileSource As String)
    Using sr As New System.IO.StreamReader(strFileSource)
        Dim changeFileName = reserveFileName(strFileSource, False, True)
        Using sw As New System.IO.StreamWriter(reserveFileName(strFileSource, False, True), False, defaultEncoding)
            sr.Peek()
            Dim lines As New Generic.Dictionary(Of Integer, System.Collections.Generic.List(Of Long))
            While sr.BaseStream.Position < sr.BaseStream.Length
                Dim offset = sr.BaseStream.Position
                Dim l As String = sr.ReadLine()
                Dim nextOffset = sr.BaseStream.Position
                Dim hash = l.GetHashCode
                Do ' a trick to put the for each in a "nest" that we can exit from
                    If lines.ContainsKey(hash) Then
                        Using sr2 = New System.IO.StreamReader(strFileSource)
                            For Each offset1 In lines.Item(hash)
                                sr2.BaseStream.Position = offset1
                                Dim l2 = sr2.ReadLine
                                If l = l2 Then
                                    Exit Do 'will sr2.dispose be called here?
                                End If
                            Next
                        End Using
                    Else
                        lines.Add(hash, New Generic.List(Of Long))
                    End If
                    lines.Item(hash).Add(offset)
                    sw.WriteLine(l)
                Loop While False
                sr.BaseStream.Position = nextOffset
            End While
        End Using
    End Using
End Sub 
```

# message - 如何使用 Tom .NET 访问消息中心

> ID：10004979
> 
> 赞同：1
> 
> 时间：2012-04-04T04:33:33.453
> 
> 标签：message, tridion

我正在使用事件处理程序来自动创建页面。我想使用消息中心向用户提供反馈。访问消息中心的示例代码将很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T04:50:49.033

我认为不可能通过 TOM.NET 访问消息中心。一种方法是在您的事件系统中引发异常，该异常将显示在消息中心中，但我认为您不希望这样。该消息将包含异常，并将被标记为错误。

因此，或者，我将实现一个轮询机制，在 CME 上作为一些 Javascript 代码执行。这将轮询并使用提供您要在消息中心显示的消息的服务。您的事件系统代码会将消息写入此服务。

Javascript 代码可以是运行一些 AJAX 轮询器（作为 Javascript 超时或间隔）连接服务并使用其消息的 GUI 扩展。

该服务可以像 aspx 页面一样简单，但您也可以创建一些更高级的方法，例如带有 Web 方法的 Web 服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T09:02:32.613

消息中心不是 TOM.NET API 的一部分。它是 Content Manager Explorer 的一部分。

你可以查看这个网站：[http ://code.google.com/p/tridion-2011-power-tools/source/search?q=MessageCenter&origq=MessageCenter&btnG=Search+Trunk](http://code.google.com/p/tridion-2011-power-tools/source/search?q=MessageCenter&origq=MessageCenter&btnG=Search+Trunk)

如何访问消息中心可能会有所帮助。

# c# - 动态加载脚本/代码并将其绑定到绑定

> ID：10004980
> 
> 赞同：1
> 
> 时间：2012-04-04T04:33:44.837
> 
> 标签：c#, wpf

我不确定如何解决这个问题，或者它是否可行。我正在跟踪用户手的位置，并说出他们左手的 x 和 y 位置。我想要做的是动态加载一些松散的 xaml 代码，这些代码在画布上有一个正方形。正方形的位置将绑定到用户手的 x 和 y。

这可能吗？如果是这样，一些关于从哪里开始的指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T05:07:31.140

`DataTemplate`并且`Trigger`是您正在寻找的东西。

[MSDN 上的数据模板概述](http://msdn.microsoft.com/en-us/library/ms742521.aspx)

[Code Project 上的一个很好的例子](http://www.codeproject.com/Articles/18303/A-Guided-Tour-of-WPF-Part-4-Data-templates-and-tri)

基本上，您需要`DataTemplate`为您的输入创建一个并为您的 X 和 Y 属性添加触发器，以便您可以移动`Canvas`正确的位置。

这也将支持动态输入量（1、2、3 等手）。

祝你好运！

# javascript - 从子视图模型修改父级上可观察到的淘汰赛的模式

> ID：10004982
> 
> 赞同：14
> 
> 时间：2012-04-04T04:33:49.677
> 
> 标签：javascript, design-patterns, knockout.js, design-principles

我设置了一个父子视图模型对象结构，需要从子节点更新父节点的 observable。我基本上提出了两种模式：

1]将父属性的引用传递给孩子并从孩子内部更新属性：

```
var ParentViewModel = function(){
    var self = this;
    this.selectedItem = ko.observable();
    this.child = ko.observable(new ChildViewModel(self.selectedItem));
}

var ChildViewModel = function(parentSelectedItem){
    var self = this;
    this.id = ko.observable();
    this.parentSelectedItem = parentSelectedItem;
    this.select = function(){
        self.parentSelectedItem(self);
    }
} 
```

2]在父节点上创建子节点的select方法，并在本地引用父节点observable：

```
var ParentViewModel = function(){
    var self = this;
    this.selectedItem = ko.observable();

    var child = new ChildViewModel();
    child.select = function(){
        self.selectedItem(child);
    }
    this.child = ko.observable(child);
}

var ChildViewModel = function(){
    this.id = ko.observable();
} 
```

这些模式都没有让我兴奋不已。第一个将整个属性引用推送到子视图模型中，第二个定义了子范围之外的子函数。

关于如何以干净和可测试的方式在 javascript 中实现此操作，是否有人有任何其他模式建议？还是我或多或少只停留在这两个选项上？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-04T06:00:54.693

在 Knockout 中执行此操作的最常见模式是在您的父母身上放置一个“selectChild”方法来接收孩子。在大多数情况下，实际的孩子不需要知道它正在被选中。

然后在您的绑定中，您可以绑定到`$root.selectChild`or `$parent.selectChild`。传递给绑定到单击/事件绑定的处理程序的第一个参数是实际数据（在 KO 2.0 中），因此您的方法可以存在于父级上并接收子级作为第一个参数。

```
var Item = function(id, name) {
    this.id = id;
    this.name = ko.observable(name);    
};

var ViewModel = function() {
    var self = this;
    this.items = ko.observableArray([
        new Item(1, "one"),
        new Item(2, "two"),
        new Item(3, "three")
    ]);  

    this.selectedItem = ko.observable();

    this.selectItem = function(item) {
        self.selectedItem(item);
    };     
}; 
```

在这种情况下，您的绑定将如下所示：

```
<ul data-bind="foreach: items">
    <li>
        <a href="#" data-bind="text: name, click: $root.selectItem"></a>
    </li>
</ul> 
```

这是在 jsFiddle：http: [//jsfiddle.net/rniemeyer/anRsA/](http://jsfiddle.net/rniemeyer/anRsA/)

您甚至可以进一步简化它。Observables 是函数，传递给它们的第一个参数用于设置它们的值，因此您甚至可以选择不包含该`selectItem`方法并简单地直接绑定`$root.selectedItem`（看起来像：http: [//jsfiddle.net/rniemeyer/anRsA /1/](http://jsfiddle.net/rniemeyer/anRsA/1/) )。我通常使用单独的方法来明确，给它一个正确的名称（动作），以防在设置项目之前或之后需要进行额外的处理。

在 KO 2.0 之前（其中`$root`和与将数据作为第一个参数传递给和处理程序`$parent`的更改一起引入），我曾经使用您建议的第一种方法。您可以在那里做的一件事实际上是不创建子属性 ( )，而只是直接在方法中引用（作为参数传递），因为由于创建了闭包，它将在函数中可用。`click``event``this.parentSelectedItem``parentSelectedItem``select`

# python - Python "is" 语句和元组

> ID：10004987
> 
> 赞同：12
> 
> 时间：2012-04-04T04:34:41.287
> 
> 标签：python, comparison, tuples

为什么是`() is ()`真的，又`(0,) is (0,)`是假的？

我以为他们会是同一个对象。但是，我显然遗漏了一些东西。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T04:52:03.517

`is`测试语句的两边是否共享相同的内存地址。它基本上是一个简写形式`id(a) == id(b)`

```
>>> print id(()), id(())
30085168 30085168
>>> print id((0,)), id((0,))
38560624 38676432
>>> 
```

正如`()`经常发生的那样，它实际上被 Python 解释器视为单例（就像从 0 到 255 的整数、空字符串、空列表等）。与解释器相比`(0, )`，`(0, )`它们实际上是内存中的不同变量。如果它们是可变的，您可以修改第一个，而第二个不会改变，因此它们不一样（`a is not b`）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T04:45:11.493

`is`测试身份，而不是平等。这意味着 Python 只是比较对象所在的内存地址。基本上回答了“我对同一个对象有两个名称吗？”这个问题。

通常 Python 将每个元组写入不同的内存位置，
[实习](http://en.wikipedia.org/wiki/String_interning)通常只发生在字符串文字中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-04T05:04:31.283

正如 Dougal 在他的评论中所说，`is`测试您要比较的两件事在内存中的相同位置。对于数字、字符串、布尔值和空元组之类的东西，Python 默认重用对象（实习），因此`is`通常会产生与`==`. 这也意味着您可以通过比较内存指针而不是更复杂的数据类型（如字符串）来获得一些性能提升。

对于其他事物，例如您的情况下的元组（即使它们是不可变的），或者列表甚至是空列表`[]`，Python 将在不同的内存位置创建一个新对象，并且`is`不会以相同的方式工作`==`

如果您尝试按值比较两个元组，`==`那将是更好的比较。

# php - 裁剪图像 php 变形，翘曲

> ID：10004988
> 
> 赞同：0
> 
> 时间：2012-04-04T04:34:52.333
> 
> 标签：php, image, crop

我没有太多时间写，所以会告诉你我的问题，我有一个裁剪图像的 php 代码，好处是当我将 $thumb_width 和 $thumb_height 设置为相同的值时，它可以很好地裁剪图像，但是在这种情况下，我不想要具有此分辨率（200 * 150）的图像，这是代码，我找不到错误。

```
<?php
function create_thumb($directory, $image, $destination) {
$image_file = $image;
$image = $directory.$image;

if (file_exists($image)) {

$source_size = getimagesize($image);

if ($source_size !== false) {

  $thumb_width = 200;
  $thumb_height = 150;

  switch($source_size['mime']) {
    case 'image/jpeg':
         $source = imagecreatefromjpeg($image);
    break;
    case 'image/png':
         $source = imagecreatefrompng($image);
    break;
    case 'image/gif':
         $source = imagecreatefromgif($image);
    break;
  }

  $source_aspect = round(($source_size[0] / $source_size[1]), 1);
  $thumb_aspect = round(($thumb_width / $thumb_height), 1);

  if ($source_aspect < $thumb_aspect) {
    $new_size = array($thumb_width, ($thumb_width / $source_size[0]) * $source_size[1]);
    $source_pos = array(0, ($new_size[1] - $thumb_height) / 2);
  } else if ($source_aspect > $thumb_aspect) {
    $new_size = array(($thumb_width / $source_size[1]) * $source_size[0], $thumb_height);
    $source_pos = array(($new_size[0] - $thumb_width) / 2, 0);
  } else {
    $new_size = array($thumb_width, $thumb_height);
    $source_pos = array(0, 0);
  }

  if ($new_size[0] < 1) $new_size[0] = 1;
  if ($new_size[1] < 1) $new_size[1] = 1;

  $thumb = imagecreatetruecolor($thumb_width, $thumb_height);
  imagecopyresampled($thumb, $source, 0, 0, $source_pos[0], $source_pos[1], $new_size[0],                                                                $new_size[1], $source_size[0], $source_size[1]);

  switch($source_size['mime']) {
    case 'image/jpeg':
         imagejpeg($thumb, $destination.$image_file);
    break;
    case 'image/png':
          imagepng($thumb, $destination.$image_file);
    break;
    case 'image/gif':
         imagegif($thumb, $destination.$image_file);
    break;
}

}

}
}
?> 
```

在这个例子中，如果我放一张 (533px*300px) 的图像，它会变形，包装“对不起我的英语 =)”，请我需要帮助。如果您找到解决方案，我将非常高兴。

谢谢你，马蒂亚斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:42:30.077

这个 id 莳萝。

在第 46 行，您提供了更多空格，因此您需要删除该行中不需要的空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:15:02.313

是的。即使我们给了多个空格，通常也只有一个空格。但是这里存在多个“ ”之类的空格。

语法错误：imagecopyresampled($thumb, $source, 0, 0, $source_pos[0], $source_pos[1], $new_size[0], $new_size[1], $source_size[0], $source_size[1] );

正确语法：imagecopyresampled($thumb, $source, 0, 0, $source_pos[0], $source_pos[1], $new_size[0],$new_size[1], $source_size[0], $source_size[1] );

# svn - 使用 subversion 设置 php 开发服务器

> ID：10004989
> 
> 赞同：0
> 
> 时间：2012-04-04T04:35:04.060
> 
> 标签：svn

我有一个用于 php 应用程序的测试服务器。我决定开始使用我安装的 subversion，它工作正常，但我需要一些帮助来处理以下场景。我希望每个开发人员都能够在该服务器上签出他们自己的副本，然后通过简单地转到 url 进行测试，如果一切正常，然后提交他们的更改。然后，当所有新功能都实现后，代码将被推送到生产环境中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T04:52:36.623

我认为您可以通过将 Apache 服务器上的存储库与其他服务器同步来解决此问题。看看以下线程：[如何同步两个 Subversion 存储库？](https://stackoverflow.com/questions/143130/how-to-synchronize-two-subversion-repositories)

# ubuntu - Ubuntu 或 Android Eclipse 中的 OpenJDK

> ID：10004995
> 
> 赞同：0
> 
> 时间：2012-04-04T04:36:07.660
> 
> 标签：ubuntu, openjdk

我是 OpenJDK 的新手。我应该在 Ubuntu 中安装 OpenJDK，还是在我目前正在使用的 Android Eclipse 中已经可以使用 OpenJDK？如果不是，那么我该如何在 Ubuntu 中安装 OpenJDK。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T04:45:57.740

`sudo apt-get install openjdk-7-jre`您可以通过运行(jdk 7)来安装 openjdk 。但是，如果您为 Java 程序安装了可工作的 eclipse，那么您的机器上可能已经安装了 java。

现在验证它有以下三种方法： -

1.  从命令行运行 javac/java。
2.  手动检查 /usr/lib/jvm 文件夹。
3.  在 Eclipse 中转到 Window -> preferences -> Java -> installed JREs 并查看列出的 JREs 的路径，如果有的话.....

希望能帮助到你！！！

**编辑 1** Eclipse 是一个 IDE，它可以帮助您以各种编程语言开发应用程序，Java 只是其中之一，当您安装 eclipse 时，它​​会检查您的系统中是否安装了任何 JRE。如果安装程序找不到任何 JRE，它会给您一条消息。如果它找到任何 JRE，它就会获取该 JRE 的路径并相应地配置自己。

另一方面，[OpenJDK](http://openjdk.java.net/)是在 Java 平台、标准版和相关项目的开源实现上进行协作的地方。您还拥有 sunjdk（oracle 的实现）等等。有关 openJdk 的更多信息，请参阅链接。

另一件事是，您可以在您的机器上安装多个 JRE，然后选择要用于任何项目的 JRE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T14:37:15.767

您还可以使用该命令`sudo update-alternatives --config java`查看当前安装在您机器上的 java 替代品。

希望这可以帮助。祝你好运！

# objective-c - 核心数据数据库自行删除

> ID：10004996
> 
> 赞同：0
> 
> 时间：2012-04-04T04:36:29.467
> 
> 标签：objective-c, ios, core-data

我的核心数据数据库有问题。它会随机删除自己。我已经使用我的应用程序一周了，一切运行良好，但今天你打开应用程序并发现所有条目都已被删除（不是第一次发生这种情况）。我是核心数据编程的新手，但我了解 iOS 和 Objective-C。我需要知道我应该在哪里检查我的代码中的错误，它是保存功能吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T07:30:58.103

您可能想要检查是否明确调用 UIManagedDocument 的保存函数。为简单起见，斯坦福 CS193P 演示项目在此，如果我没记错的话，依赖于 UIManagedDocument 的保存功能的自动调用。在某些情况下，保存需要一段时间。甚至在这完成之前，应用程序就可以终止。这可能解释了您的数据丢失。

这是保存数据库的示例代码：

```
- (void) saveDatabase{
    [myDatabase saveToURL:myDatabase.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:^(BOOL success) {
    if(success == YES) NSLog(@"Awesome, databse is saved! booooyah!");
}];} 
```

# gwt - GWT CellTable 排序

> ID：10004999
> 
> 赞同：4
> 
> 时间：2012-04-04T04:36:53.117
> 
> 标签：gwt

我正在使用 GWT 的 celltable。我正在尝试根据用户名对列的数据进行排序。但无论如何它没有得到排序。我正在关注以下链接。

[http://gwt.google.com/samples/Showcase/Showcase.html#!CwCellTable](http://gwt.google.com/samples/Showcase/Showcase.html#!CwCellTable)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T04:54:16.263

您可能需要定义自己的 ColumnSortEvent 处理程序。

有关更多信息，请参阅有关[列排序的文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellTable#columnSorting)