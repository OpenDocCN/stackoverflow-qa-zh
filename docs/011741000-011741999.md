# StackOverflow 问答 11741000-11741999

# python - Django - 上传文件类型验证

> ID：11741001
> 
> 赞同：6
> 
> 时间：2012-07-31T13:17:34.000
> 
> 标签：python, validation, file-upload, django-forms, file-type

我需要验证上传文件的文件类型，并且应该只允许 pdf、plain test 和 MS word 文件。这是我的模型和具有验证功能的表单。但是，即使没有扩展名，我也可以上传文件。

```
class Section(models.Model):
    content = models.FileField(upload_to="documents")

class SectionForm(forms.ModelForm):
    class Meta:
        model = Section
    FILE_EXT_WHITELIST = ['pdf','text','msword']

    def clean_content(self):
        content = self.cleaned_data['content']
        if content:
            file_type = content.content_type.split('/')[0]
            print file_type
            if len(content.name.split('.')) == 1:
                raise forms.ValidationError("File type is not supported.")
            if content.name.split('.')[-1] in self.FILE_EXT_WHITELIST:
                return content
            else:
                raise forms.ValidationError("Only '.txt' and '.pdf' files are allowed.") 
```

这里的景色，

```
def section_update(request, object_id):
    section = models.Section.objects.get(pk=object_id)
    if 'content' in request.FILES:
            if request.FILES['content'].name.split('.')[-1] == "pdf":
                content_file = ContentFile(request.FILES['content'].read())
                content_type = "pdf"
                section.content.save("test"+'.'+content_type , content_file)
                section.save() 
```

在我看来，我只是将文件从`request.FILE`. 我认为在 save() 时它会调用 clean_content 并进行内容类型验证。我想， clean_content 根本不需要验证。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T08:22:12.600

您的方法将不起作用：作为攻击者，我可以简单地伪造 HTML 标头向您发送任何具有 mime 类型的内容`text/plain`。

正确的解决方案是使用`file(1)`Unix 上的工具来检查文件的内容以确定它是什么。请注意，没有什么好方法可以知道某些内容是否真的是纯文本。如果文件以 16 位 Unicode 保存，“纯文本”甚至可以包含 0 个字节。

有关如何执行此操作的选项，请参阅此问题：[How to find the mime type of a file in python?](https://stackoverflow.com/questions/43580/how-to-find-the-mime-type-of-a-file-in-python)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-06T12:58:44.853

你可以使用**python-magic**

```
import magic
magic.from_file('/my/file.jpg', mime=True)
# image/jpeg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-15T14:12:28.507

这是一个老问题，但对于后来的用户来说，评论中提到的主要问题是**为什么没有发生字段验证**，并且如 django 文档中所述，当您调用 is_valid() 时执行字段验证。所以必须使用下面的东西来激活字段验证：

```
section = models.Section.objects.get(pk=object_id)    
if request.method == 'POST':    
   form = SectionForm(request.POST, request.FILES)
   if form.is_valid:
      do_something_with_form 
```

> 清理数据时会进行表单验证。如果您想自定义此过程，可以在多个地方进行更改，每个地方都有不同的用途。在表格处理期间运行三种类型的清洁方法。这些通常在您在表单上调用 is_valid() 方法时执行

# python - 如何用aptana冲洗？

> ID：11741006
> 
> 赞同：0
> 
> 时间：2012-07-31T13:17:52.017
> 
> 标签：python, aptana, flush

sys.stdout.flush() 不适用于 aptana。我试过了 ：

```
import sys
import time
for count in range(100) :
   sys.stdout.write("\r"   str(count) + "%") 
   sys.stdout.flush()
   time.sleep(1) 
```

冲洗不适用于 aptana。我有类似的东西：

```
1%
2%
3%
.... 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:41:27.893

问题不在于冲洗，而是将 '\r' 打印到控制台。Aptana 使用 PyDev，而 PyDev 的终端不是真正的终端。关于处理 PyDev 控制台的[问题](https://stackoverflow.com/questions/6125692/print-r-correctly-in-console)有[很多。](https://stackoverflow.com/questions/10520200/pydev-send-stdout-to-a-real-tty-terminal) 似乎 PyDev 的控制台并不打算处理这个问题。您最好的选择是在真正的控制台上尝试一下。

# c# - 使用 SignalR 意外发送多条消息

> ID：11741009
> 
> 赞同：0
> 
> 时间：2012-07-31T13:18:04.153
> 
> 标签：c#, signalr

我是 SignalR 的新手，但我理解这个概念。

我的目标是公开 Web 服务，当调用它时会更新所有连接的客户端。我已经构建了一个小的淘汰赛 js 来连接到集线器，并且效果很好。当我点击我的开始按钮时，它会向每个连接的客户端发送一条消息，就像它应该的那样。这是背景代码。

中心：

```
[HubName("realTimeData")]
public class RealTimeDataHub : Hub
{
    public void UpdateFlash(string message)
    {
        Clients.flashUpdated(message);
    }
    public void clear()
    {
        Clients.cleared();
    }
} 
```

JS：

```
function viewModel(){
    var self = this;

    self.messages = ko.observableArray([]);

    self.hub = $.connection.realTimeData;

    self.hub.flashUpdated = function (m) {
        self.messages.push(new message(m));
    };
    self.hub.cleared = function () {
        self.messages.removeAll();
    };
    self.Start = function () {          
        self.hub.updateFlash("Updated Flashed from client");
    };
    self.Stop = function () {
        self.hub.clear();
    };
    $.connection.hub.start();
}

ko.applyBindings(new viewModel()); 
```

MVC API：

```
public class HomeController : Controller
{
    public ActionResult Update()
    {
        GetClients().updateFlash("From server");

        return Json(new { result = "ok" }, JsonRequestBehavior.AllowGet);
    }

    private static dynamic GetClients()
    {
        return GlobalHost.ConnectionManager.GetHubContext<RealTimeData.Hubs.RealTimeDataHub>().Clients;
    }
} 
```

问题：

当我从我的控制器（Home/Update，还不是真正的 API）调用“更新”方法时，它会为每个连接的客户端发送一个信号。因此，如果我连接了 2 个客户端，我将收到 2 条“来自服务器”的消息到每个客户端，依此类推。我只想要那个...

有什么建议么？任何事情都值得赞赏

谢谢，

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:30:33.023

解决方案：

必须导入“使用 SignalR.Client;”

```
public ActionResult Update()
{
    hub.Invoke("UpdateFlash", "From the Home Controller");
    //GetClients().updateFlash("From server");
    return Json(new { result = "ok" }, JsonRequestBehavior.AllowGet);
} 
```

这是我找到解决方案的地方：

[https://github.com/SignalR/SignalR/wiki/SignalR-Client-Hubs](https://github.com/SignalR/SignalR/wiki/SignalR-Client-Hubs)

我希望这可以帮助某人。

马特

# java - 映射值应该声明为常量还是枚举？

> ID：11741010
> 
> 赞同：13
> 
> 时间：2012-07-31T13:18:04.717
> 
> 标签：java, spring, spring-mvc, enums, dry

我看到这分散在整个代码库中：

```
@RequestMapping(value = "myValue") 
```

我更喜欢使用这样的东西：

```
@RequestMapping(value = Constants.myValue) 
```

似乎使用内部的实际字符串值`@RequestMapping`而不是常量来破坏 DRY。但这是良好的代码实践吗？我应该改用枚举吗？我可能需要`Constants.myValue`在代码库的其他地方使用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-31T13:39:50.720

> 我应该改用枚举吗？

你不能。注释变量必须是编译时常量。枚举和字符串文字都是，但是您不能创建一个作为字符串并且`@RequestMapping`需要字符串的枚举（如果您的枚举有一个返回字符串或字符串字段的方法，那不是编译时常量）。由于有多轮注释处理，当常量在另一个类中时它确实有效。

那就是说：是的，我想说使用专用的常量类（可能是几个，用于不同类型的常量）是一种很好的做法，我可以尽可能使用它（只要常量a）它就可以与注释一起使用）没有定义在具有注释的同一编译单元内，并且 b) 在声明中初始化（与静态初始化块相反））。

这是一个例子：

**控制器**

```
@Controller @RequestMapping(value = Mappings.CUSTOMER_PAGE)
public class CustomerPageController{
    // methods here
} 
```

**常量类**

```
public static final class Mappings{
    private Mappings(){}
    public static final String CUSTOMER_PAGE = "path/to/customer/page"
    // more constants
} 
```

以下是一些不起作用的版本：

一种）

```
@Controller @RequestMapping(value = CUSTOMER_PAGE)
public class CustomerPageController{
    private static final String CUSTOMER_PAGE = "path/to/customer/page";
} 
```

这不会编译，因为注释引用了它注释的类中的常量。这是行不通的，因为在编译期间，注释在其余代码之前在单独的一轮中处理，而类需要注释已经被处理以进行编译（即注释和常量之间存在循环依赖关系）

b)

```
public static final class Mappings{
    private Mappings(){}
    public static final String CUSTOMER_PAGE;
    static{
        CUSTOMER_PAGE = "path/to/customer/page"
    }

    // more constants
} 
```

虽然这是一个静态 final 字段，但它不是编译时常量，因此不能用作注释参数

# mysql - 自动将 0 添加到 int 字段 - mysql

> ID：11741011
> 
> 赞同：2
> 
> 时间：2012-07-31T13:18:04.910
> 
> 标签：mysql

我正在构建一些应用程序，它连接到 mysql 数据库。

在 mysql 中的 let say 表中`test`，我有一个 Integer 字段，名为`myId`.

我的第一次插入 myId 值“1”被添加，第二次插入我添加值“20”。

现在我的问题是：有没有可能，第二次插入后的第一个值“1”将自动添加“0”。

所以我会有：

```
|myId|
 10
 20 
```

如果添加“300”，那么前两个插入将添加下一个 0 ？

```
|myId|
 100
 200
 300 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:36:25.153

只需在选择数据时执行此操作

```
set @max:=(select max(length(myId)) from your_table);
SELECT myId * power(10, (@max - length(myId))) from table; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:26:32.803

未经证实：

```
delimiter |
CREATE TRIGGER upd_entries AFTER INSERT ON your_table
FOR EACH ROW 
BEGIN 
     update your_table 
     set myId = myId * power(10, ((select * from (select max(length(myId)) from your_table)) - length(myId)));
END;
|
delimiter ; 
```

# java - 如何使用与对其他方法的强制调用相关联的抽象方法

> ID：11741015
> 
> 赞同：3
> 
> 时间：2012-07-31T13:18:11.840
> 
> 标签：java, abstract-class

我面临以下问题：

我定义了一个抽象类，其中包含必须由子类实现的公共生成、克隆等方法。但是我想确保当这些公共方法被调用时，某些其他方法也会在抽象类中执行。

一个明显的解决方案是实现一个受保护的抽象方法和一个公共的非抽象方法，该方法调用抽象方法和我需要的所有其他方法。

例如：

```
abstract class Representation {

    public void generate(int variable) {
        myFunction();
        generateAbstract(variable);
    }

    protected abstract void generateAbstract(int variable);

    private void myFunction() {
        //do something
    }
} 
```

我的问题是如何以更好的方式解决它，或者如果这是以用户友好的方式命名函数的方法。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T13:22:01.773

你解决这个问题的方法非常标准，甚至有一个名字：它叫做[*模板方法模式*](http://en.wikipedia.org/wiki/Template_method_pattern)。这个想法是提供一个公共方法来执行您的算法的高级步骤，并使用子类中受保护的抽象方法的覆盖来处理算法的较低级别的步骤。这是解决问题的正确方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T13:21:29.987

我会像你那样做。我也会制作包装方法

1.  `final`所以我不能在一个子类中被吹走，或者
2.  记录方法的地狱，表明**必须**调用抽象方法......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T13:48:59.440

@dasblinkenlight 的答案确定了解决您的问题的设计模式：模板方法。[我更喜欢这个模板方法链接，而](http://sourcemaking.com/design_patterns/template_method/java/2)不是回答引用的维基百科条目。另外，我喜欢代码示例的答案：

```
// Demonstrate the template method design pattern
// straight out of GoF example
abstract class AbstractClass {
    // Final ensures extender does not override, but depends on your design
    final void templateMethod() {
        primitiveOperation1();
        primitiveOperation2();
    }

    // document extenders should keep as protected
    // so clients do not call directly
    protected abstract void primitiveOperation1();
    protected abstract void primitiveOperation2();
}

public class ConcreteClass extends AbstractClass {
    @Override
    protected void primitiveOperation1() {
        System.out.println("ConcreteClass.primitiveOperation1()");
    }

    @Override
    protected void primitiveOperation2() {
        System.out.println("ConcreteClass.primitiveOperation2()");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T13:20:58.130

我认为您建议的方法足够优雅。我以前肯定以这种方式解决过同样的问题。我可能会调用你的方法`doGenerate()`（或者没有这个词`Abstract`的东西）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T13:24:40.977

我认为最简单的方法是确保`super.generate`调用它。由于 Java 没有一个很好的机制来通知一个类什么时候被子类化（其他像 Ruby 一样），所以你不能做太多事情来强制实现抽象方法的子类调用另一个方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T14:07:26.603

如前所述，您建议的是根据[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)的正确方法。剩下的就是命名问题。我不会调用要覆盖的函数“generateAbstract”，因为当它被实现时，它不再是抽象的了。我推荐类似“makeGenerate()”的东西，它反映了原始功能并暗示了它的作用。

```
abstract class Representation {

  public void generate(int variable) {
    myFunction();
    makeGenerate(variable);
  }

  protected abstract void generateAbstract(int variable);

  private void myFunction() {
    //do something
  }
}

public class ConcreteClass extends Representation {
  @Override
  protected void makeGenerate() {
    ...
  } 
```

# java - 如何使用 Java StringTemplate 布尔值？

> ID：11741017
> 
> 赞同：2
> 
> 时间：2012-07-31T13:18:16.903
> 
> 标签：java, stringtemplate

我编写了以下 StringTemplate 模板行：

```
<instance.attributes: { attr | <attr.value>}>
<instance.attributes: { attr | <if(attr.value)>skip<else>don't skip<endif> } > 
```

`Instance.getAttributes().getValue()`如果返回的 Object 值是一个布尔值，它的值为真，则为了编写跳过。

这导致

```
1
skip 
```

和

```
0
skip 
```

（现在我只有一个属性）

有什么问题，为什么我不明白？

```
0
don't skip 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:54:49.613

来自[StringTemplate 维基](http://www.antlr.org/wiki/display/ST/StringTemplate+cheat+sheet)

> `<if(attribute)>subtemplate <else>subtemplate2 <endif>`如果属性有一个值或者是一个计算结果为真的布尔对象，则包括子模板，否则包括子模板2。这些条件可以嵌套。

我假设 0 表示 not `false`，而是表示存在值并评估为 true 的某个值。在将其推送到模板**之前**，您需要计算评估为 false 的布尔值。

# tomcat - 在 WEB-INF/classes 中创建自定义文件夹

> ID：11741028
> 
> 赞同：0
> 
> 时间：2012-07-31T13:18:45.707
> 
> 标签：tomcat, classloader

我在 tomcat6.0 中部署我的 Web 应用程序。根据要求，我必须将它部署在一些自定义文件夹中。默认情况下，我所有的类文件都将存储（在 tomcat 中）

`WEB-INF\classes\package-name\ClassName.`

但在这里我想把它放在我的自定义文件夹中。所以上面的看起来

`WEB-INF\classes\mycustomfolder\package-name\ClassName.`

这里 mycustomfolder 不是包名，它只是一个文件夹。因此，当使用自定义文件夹结构进行部署时，我的应用程序会抛出 ClassNotFoundException。无论如何，这个可以工作吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:45:41.110

编辑 WAR 项目的**.classpath**文件以指向新的目录位置：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>

    ...

    <classpathentry kind="output" path="WebContent/WEB-INF/classes/mycustomfolder"/>

</classpath> 
```

# jquery-selectors - jQuery可以用来根据高度选择一个div吗？还是教程错了？

> ID：11741029
> 
> 赞同：3
> 
> 时间：2012-07-31T13:18:46.137
> 
> 标签：jquery-selectors

我正在尝试`div`根据其高度选择 a，如本教程 [jQuery Selection](http://tutorials.jenkov.com/jquery/selection.html)所示。我无法让它工作：[jsbin 示例](http://jsbin.com/eriqix/1/edit)。行不通是：

```
 $('div[height=50px]').css('background-color', 'orange'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:21:37.667

这是一个[等于](http://api.jquery.com/attribute-equals-selector/)选择器的属性，所以它匹配的 HTML 是：

```
<div height="50px"></div> 
```

您可以将其更改为：

```
$('div[style="height:50px"]').css('background-color', 'orange'); 
```

根据评论，上述内容在 Internet Explorer 中不起作用。请尝试以下操作：

```
$('div').filter(function() {
    return $(this).css('height') == '50px';
}).css('background-color', 'orange'); 
```

如果要匹配其他未使用属性指定的高度为 50px 的元素，请查看该[`.filter()`](http://api.jquery.com/filter/)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-19T20:37:16.563

如果您的 HTML 是...

```
<div style="height:50px;"></div> 
```

那么你的选择器应该是......

```
$('div[style*="height:50px"]'); 
```

如果您将高度设置为“50px”和“50px”（常见）的值，则需要相应调整...

```
$('div[style*="height:50px"], div[style*="height: 50px"]'); 
```

如果你改变这个元素的 CSS，div 的 style 属性可能会变成：“height:50px;background-color:orange”，并且不会被这个选择器拾取。

文档：[https ://api.jquery.com/attribute-contains-selector/](https://api.jquery.com/attribute-contains-selector/)

# java - 包括核心和数学文件夹的 Mahout 数学库类 - Eclipse - Hadoop

> ID：11741037
> 
> 赞同：1
> 
> 时间：2012-07-31T13:19:13.043
> 
> 标签：java, eclipse, hadoop, mahout

我的问题与此类似：[如何构建/运行这个简单的 Mahout 程序而不会出现异常？](https://stackoverflow.com/questions/11479600/runing-a-simple-mahout-program), 但有点复杂。

我正在编写 Hadoop 代码，并且想使用 Mahout 数学库（例如 SparseRowMatrix 和 VectorWritable 类）。

问题是前一个示例类位于 Mahout 的最新 SNAPSHOT 的数学文件夹中，而后者位于 core 文件夹下，并且与根文件夹之后的点共享相同的路径`(org.apache.mahout.math)`。

问题是我找不到让 Hadoop jar 文件正确导入与数学有关的类的方法，而是位于Mahout 项目的*Core文件夹下。*

我正在使用 Eclipse 并成功运行我的工作，每次我导出一个新 jar 时，我都会搜索`classpath`核心文件夹树并将相应的数学文件夹捆绑到我的项目中。

我怎样才能避免这个过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:42:52.210

您是直接在 Eclipse 项目中使用 Mahout 代码，还是使用其他构建工具？我建议使用基于 maven 的项目，并在其中声明对所需 Mahout 版本的依赖。另外，您将获得创建条纹作业 jar 的能力，就像在[“Mahout in Action”一书中的示例](https://github.com/tdunning/MiA)中所做的那样- 看看`pom.xml`那里......

eclipse中的Maven支持是通过`m2eclipse`插件实现的...

# matlab - 用 SIFT 检测数字图像上的印章（印章）印记

> ID：11741038
> 
> 赞同：3
> 
> 时间：2012-07-31T13:19:13.130
> 
> 标签：matlab, image-processing, computer-vision, sift, feature-detection

我正在开发一个应用程序，该应用程序应确定输入图像是否包含印记并返回其位置。对于 RGB 图像，我使用颜色分割并进行验证（使用各种形状因子），对于灰度图像，我认为 SIFT + 验证可以完成这项工作，但使用 SIFT 只会找到我在我的数据库。

在理想情况下，它工作得非常好，如下图所示。

图 1. [http://i.stack.imgur.com/JHkUl.png](http://i.stack.imgur.com/JHkUl.png)

当输入图像包含数据库中不存在的标记时，会出现此问题。*我做的第一件事是检查如果我将类似*的印章与输入图像上的印章进行比较，是否会有任何匹配的关键点。在大多数情况下，没有单个匹配的关键点，如果有的话，它们宁愿参考输入图像的其他部分而不是戳记，如图 2 所示：

图 2. [http://i.stack.imgur.com/coA4l.png](http://i.stack.imgur.com/coA4l.png)

我还尝试在输入图像和圆形图像之间找到匹配，因为印章是圆形的，但圆形图像的关键点很少（如果有的话）。

所以我想知道是否有任何不同的方法可以让 SIFT 在这种情况下更有用？我想从我的数据库中创建一个包含所有描述符和关键点的矩阵，然后在输入图像和矩阵之间寻找最近的欧几里得距离，但它可能不会工作，因为整个数据库中有很多匹配的关键点（不需要） （见图 2）。

我正在使用 Matlab 并尝试了 VLFeat 和 D. Lowe SIFT 实现。

*编辑：*

所以我找到了一种强制 SIFT 计算图像上用户定义点的描述符的方法。我的测试图像包含一个圆圈，然后计算描述符并与输入图像匹配，包括图 1 和图 2 下的图像。这个过程重复了从 0 到 10 的尺度。不幸的是它也没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:18:30.543

这只是第一个提示，而不是对 SIFT 问题的完整答案。

我的印象是，通过 SIFT 将圆与圆的图像进行匹配来检测圆并不是最好的方法，尤其是当您要检测的圆内部有一些未知纹理时。

圆形检测的教科书算法是[Hough 变换](http://en.wikipedia.org/wiki/Hough_transform)，它主要用于线检测，但适用于任何可以用少量参数描述的形状（同事告诉我，3 以上的情况会变得很糟糕，但圆形只是有 X,Y 和 r)。文件交换有多种[实现](http://www.mathworks.com/matlabcentral/fileexchange/9833)方式，链接只是一个示例。霍夫圆检测要求您在要检测的半径上设置一个上限，但这对于您的应用程序来说似乎没问题。

从您提供的示例来看，如果您能可靠地检测到圆圈，您应该会走得很远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:15:25.357

实际上，我认为 SIFT 不会解决这个问题。我一直在玩 SIFT 很长一段时间，我的结论是它非常适合识别相同的模式，但不适用于相似的模式。看看 SIFT 特征向量的构造：描述符由几个梯度直方图组成（！）。如果数据库中的模式在图章中具有*非常*相似的斑点状结构，那么您可能有机会。但如果这不成立，那么我猜你不会很幸运。

从我的角度来看，您已经解决了查找**相同**对象（邮票）的问题，现在扩展到查找**相似**对象。这听起来一样，但在我过去的研究中，我发现这些问题只是相关但不太相同。

您的应用程序中有任何运行时限制吗？可能还有其他方法，但在这种情况下，关于可能的约束的更多输入可能是有用的。

**关于约束的更新**：
所以你的下一个任务可能是**检测**未知的邮票，对吧？这听起来像是一个分类任务。

在您的情况下，我首先会尝试找到一个描述符/表示（或 SVM），将图像分类为戳/无戳。为了评估这一点，请建立一个数据库，其中包含基本事实和合理数量的“未知”邮票和其他图像，例如来自字母的随机快照，不包含邮票。这将是您的测试集。

然后尝试一些描述符/表示来计算图像之间的距离/相似性，以将测试集分类为 STAMP / NO-STAMP 类。当您找到在分类方面表现良好的描述符/距离度量（或 SVM）时，您可以对字母执行滑动窗口方法来查找标记。滑动窗口方法当然不是一种非常快速的方法，而是一种非常简单的方法。至少当您达到这一点时，您可以调整检测 - 例如基于有趣的点检测器......但一步一步......

# web2py - Web2py SQLTABLE 数据样式设置

> ID：11741043
> 
> 赞同：0
> 
> 时间：2012-07-31T13:19:23.940
> 
> 标签：web2py

在我的应用程序中，我使用 SQLTABLE 来显示内容。我必须为此表数据指定一些 css 样式。请让我知道如何将样式设置为 SQLTABLE 数据。

例子：

```
#percengate datatype: decimal(5,2)
rows = db().select(db.t_tax.id,db.t_tax.percentage)
db.t_tax.percentage.represent = lambda r,v: str(v.percentage)+'%'
columns = ['t_tax.id','t_tax.percentage']
headers = {
    't_tax.id':{'label':T('id'),
    'class':'', #class name of the header
    'width':'', #width in pixels or %
    'truncate': 50, #truncate the content to...
    'selected': False #agregate class selected to this column
    },
    't_tax.percentage':{'label':T('Tax'),
    'class':'', #class name of the header
    'width':'', #width in pixels or %
    'truncate': 50, #truncate the content to...
    'selected': False #agregate class selected to this column
    }
}
table = SQLTABLE(rows,columns=columns,headers=headers,_width='100%',_class='datatable') 
```

在此表中，我想右对齐百分比列数据。现在它显示为左对齐的普通字符串（10.00%,20.00%）。我找不到任何选项来指定仅与 percetage 列对齐。

我将不胜感激任何评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:09:40.913

您是直接创建 SQLTABLE 吗？

你有没有尝试过：

```
x = SQLTABLE(rows, ..., _id='my-sqltable') 
```

然后您可以将`#my-sqltable`其用作选择器的第一部分。例如，要突出显示每隔一行：

```
#my-sqltable tr:nth-child(odd) td { background: gray; } 
```

无法将特定样式传递给 sql 表中的不同列/单元格。通常你会这样做`x = SQLTABLE(..., _style=...)`，但即使那样，也没有简单的方法来定位你想要的列。

但是，您可以使用“headers”关键字的“class”参数创建一个将附加到给定列的类。将类设置为“some-class”并检查生成的标记——你应该看到你有 th.some-class 和 td.some-class。您可以使用该类来定位您想要样式的元素。同样，SQLTABLE 无法将“样式”属性附加到生成的 TD 节点。

您也许可以使用“extracolumns”并使用 lambda 函数（类似于`{'content': lambda row: DIV(row.some_val, _style='text-align: right'), ...}`）设置内容，该函数会将内容包装在 DIV 中并允许您正确对齐它，但实际上这些类要容易得多。你可能需要做这样的事情来使你的 SQLTABLE 看起来一样而不依赖于外部样式表......我只是不确定它是否会工作。

如果您担心单独更新 css 或让您的代码更加模块化，您总是可以将 STYLE 元素传递给视图，或者`<style>...</style>`直接在使用该样式的视图中创建一个外壳。虽然在 HTML4x/XHTML 中将样式标签放在 head 元素之外在技术上是“无效的”，但它仍然会解析。此外，在 HTML5 中，这完全是 100% 有效的。

无论如何，我希望我已经回答了你的问题。我强烈建议只使用一个类——可能只是`.align-right { text-align: right }`在你的基础 css 中，因为这个类可以用于任何数量的东西。这已经被代码支持了！

如果这些选项都不可接受，恐怕您将不得不深入研究并编写自己的自定义 TABLE 类。您也许可以将 SQLTABLE 子类化，并找出一种向 TABLE 中的数据列添加样式选项的好方法……我**仍然**认为类更好。

# c# - 在没有内存泄漏的情况下替换巨大字符串中的文本

> ID：11741050
> 
> 赞同：2
> 
> 时间：2012-07-31T13:19:50.013
> 
> 标签：c#, .net, memory-leaks, replace

我目前正在处理一个必须连续生成大约 16000 封电子邮件的批次（时事通讯）。

不管它是不是垃圾邮件，我的问题是关于我如何生成这些电子邮件。

消息中的某些字段必须替换为自定义值（日期、用户名等）。

由于某些截止日期和代码可重用性的原因，我的模板是一个 HTML 文件，其中包含一些“_FIELDNAME”字段，可以通过正则表达式轻松发现：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
...
<body>
<p>Hi _NAME, _DATE newsletter.</p>
</body>
... 
```

该文件大约有 1000 行，因此在加载时它是一个相当大的字符串。

首先，我在一个字符串中加载一次 HTML 文件模板：

```
string template = File.ReadAllText(@"Template/newsletter.html"); 
```

替换功能如下所示：

```
return new StringBuilder(template)
.Replace("_DATE", profileConfig.SelectedMonth.ToString("MMMM yyyy"))
.Replace("_NAME", profileConfig.Name)
.ToString(); 
```

问题是内存消耗在每次迭代中都会略有增加。1000 次迭代大约 50MB，这是由于我的替换功能（我试图评论它并且内存泄漏消失了）。

如何替换模板中的许多字段 (~50) 而不会溢出我的 16000 次迭代的内存？我尝试了几件事，比如使用正则表达式（但它使用字符串）或临时文件，但两者都不满意。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:24:48.440

如果您可以将 , 等替换`_DATE`为`_NAME`, 等`{0}`，`{1}`您可以尝试`string.Format()`

模板将变为：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
...
<body>
<p>Hi {0}, {1} newsletter.</p>
</body>
... 
```

代码如下所示：

```
return string.Format(template, 
        profileConfig.SelectedMonth.ToString("MMMM yyyy"), 
        profileConfig.Name
    ); 
```

你实际上根本不需要经历`StringBuilder`。如果您`File.ReadAllLines()`只在包含令牌的行中交换值，您将极大地受益于速度（并且可能在资源使用方面）。

**更新**为了强制使用`string.Format(string format, params object[] args)`重载，您可能必须将所有参数放入一个集合中。

以下内容应该使此解决方案适合您（我测试了多达 1000 个参数，它既有效*又*非常快）。

```
List<string> tokenValues = new List<string> 
{ 
    profileConfig.SelectedMonth.ToString("MMMM yyyy"), 
    profileConfig.Name, 
    <follow with your other values>
};
return string.Format(template, tokenValues.ToArray()); //.ToArray() is mandatory 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:34:07.933

```
 var patterns = new Dictionary<string, string>();
    patterns["_Date"] = profileConfig.SelectedMonth.ToString("MMMM yyyy");
    patterns["_Name"] = profileConfig.Name;

    var builder = new StringBuilder(template.Length);
    for (var i = 0; i < template.Length;)
    {
      var pattern = CompareAndFindPattern(template, i, patterns);
      if (pattern != null)
      {
        builder.Append(pattern.Value.Value);
        i += pattern.Value.Key.Length;
      }
      else
      {
        builder.Append(template[i]);
        i++;
      }
    }

  static KeyValuePair<string, string>? CompareAndFindPattern(string template, int index, Dictionary<string, string> patterns)
  {
    foreach (var pattern in patterns)
    {
      if (string.Compare(template, index, pattern.Key, 0, pattern.Key.Length) == 0)
        return pattern;
    }
    return null;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:37:37.747

在尝试了许多解决方案之后，我终于决定从头开始重新启动我的批次。

我现在使用适当的 XSLT 文件从 XML 配置生成 HTML。

内存消耗仍会随着时间的推移而增加，但现在变慢了。我猜垃圾收集器不想收集，因为我的电脑有 6GB RAM，没有其他巨大的进程可以运行。

# c++ - 类成员中的 pthread_create

> ID：11741051
> 
> 赞同：0
> 
> 时间：2012-07-31T13:19:52.233
> 
> 标签：c++, oop, class, pthreads, this

假设我有以下课程：

* **.h**：

```
class MyClass{
    void caller();
    int threadProcuder(void *args);
}; 
```

* **cp**：

```
void MyClass::caller()
{
    pthread_t i;
    pthread_create(&i,NULL,(void*(*)(void*))&MyClass::threadProcedure,(void*)this);
}

int MyClass::threadProcedure(void *args) 
{
    cout << "body of thread" << endl;
} 
```

不幸的是，线程没有运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T14:43:29.120

正确的方法是：

```
// Must declare the callback is extern "C" 
// As you are calling back from a C library.
// As this is compiles as C it can only call functions that use the C ABI
// There is no guarantee in the C++ standard that static member functions
// use the same ABI as a "C" function.
//
// Certain C++ ABI definitions do make this explicit but using this knowledge
// Renders your code non portable. If you use a C++ static member it will likely
// break in the future and when it does tracking down the problem will be nearly
// imposable.
extern "C" void* threadProcuder(void *args);

class MyClass{
    void caller();
    void* threadProcuder();
};

void MyClass::caller()
{
    // NOTE: This function should NOT be called from the constructor.
    //       You should really wait until the object is fully constructed
    //       before letting a thread run around inside your object
    //       otherwise the thread may will start playing with members that
    //       are not fully constructed.
    pthread_t i;
    pthread_create(&i,NULL,&threadProcedure,this);
}

void* threadProcuder(void *args)
{
    // I use reinterpret_cast<> here to make it stand out.
    // Others prefer static_cast<>. Both are valid and guaranteed to work.
    // Casting a pointer to/from void* is guaranteed by the standard
    MyClass* obj    = reinterpret_cast<MyClass*>(args);
    void*    result = NULL;
    try
    {
        result = obj->threadProcuder();
    }
    catch(...) {}   // you MUST catch all exceptions
                    // Failing to do so is very undefined.
                    // In most pthread_application allowing exceptions to escape
                    // usually (but not always) leads to application termination.
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:34:37.047

**编辑：**传递给的函数`pthread_create`必须声明`extern "C"`。有关为什么会这样的更好解释，请参阅[https://stackoverflow.com/a/2068048/786714 。](https://stackoverflow.com/a/2068048/786714)

您不能像我原来的回答所说的那样使用静态成员函数，尽管它可能会因其未定义的行为而起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:27:56.690

我解决了，我的格式是正确的，我没有调用我的构造函数。

# android - 应用主题后Android保存应用程序状态

> ID：11741052
> 
> 赞同：1
> 
> 时间：2012-07-31T13:19:52.007
> 
> 标签：android, themes, activity-state

我创建了一个应用程序，我可以通过单击按钮在 2 个主题（黑色和白色）之间切换。我在清单中将默认主题设置为白色。

所以每次关闭并重新启动应用程序时，都不会保存主题状态，而是应用白色主题。

如果可能的话，谁能给我一些想法或代码，关于如何保存应用程序的状态，不同的方法来做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:23:38.790

有一个您检查的布尔触发器`SharedPreferences`。如果布尔值为真，则将应用程序设置为白色。如果为假，则为黑色。每次用户更改他/她想要的主题时，将布尔值保存在`SharedPreferences`.

**代码示例：**

在 onCreate() 中：

```
SharedPreferences mPrefs = getSharedPreferences("THEME", 0);
boolean theme_boolean = mPrefs.getBoolean("theme_boolean", true);
if (theme_boolean) {
    // Set theme to white
} else {
    // Set theme to black
} 
```

在按钮的 onClick() 中：

```
if (theme_boolean) {
    // Set theme to black
    theme_boolean = false;
} else {
    // Set theme to white
    theme_boolean = true;
}
SharedPreferences mPrefs = getSharedPreferences("THEME", 0);
SharedPreferences.Editor mEditor = mPrefs.edit();
mEditor.putBoolean("theme_boolean", theme_boolean).commit(); 
```

# iphone - UIWebView 在启动时被推到状态栏下

> ID：11741053
> 
> 赞同：0
> 
> 时间：2012-07-31T13:20:04.930
> 
> 标签：iphone, ios, uiwebview, webview

我正在尝试为 iPhone 构建一个带有 UIWebView 的应用程序。

这工作得很好，直到在我的应用程序中打开旋转支持。现在，当我启动应用程序时，webview 被推到状态栏下。当我将它旋转到横向并返回纵向时，webview 突然回到想要的位置。

我已经包含了下面发生的事情的图像。

什么可能导致这种情况？我应该更改 webview 的一些设置还是可能是什么？

如果您需要更多信息，请告诉我。

截图：（ [来源：][[teet.dk](http://teet.dk/screen.png)][）][![一只忙碌的猫](../Images/40fa97365a6f112e805ef8a06e559ec7.png)](https://i.stack.imgur.com/0CONH.png)

//詹斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:54:13.173

而不是做

```
[window addSubview:[wvTutorial view]]; 
```

尝试做：

```
[window.view addSubview:[wvTutorial view]]; 
```

还要确保您的 XIB 视图没有状态栏。

* * *

**编辑**

关于什么

```
self.window.rootViewController = [[WebViewController alloc] initWithNibName:@"WebView2" bundle:[NSBundle mainBundle]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:58:38.360

您正在添加到窗口而不是视图。尝试将视图添加到`ViewController`. 代替窗口使用

```
[RootViewController.view addSubView:[wvTutorial view]] 
```

# javascript - gzip .js 文件在 .htaccess 中带有 ?ver

> ID：11741057
> 
> 赞同：1
> 
> 时间：2012-07-31T13:20:11.587
> 
> 标签：javascript, compression, version, gzip

我在 .htaccess 中启用了压缩

```
AddOutputFilterByType DEFLATE text/css text/html text/plain text/xml text/javascript 
```

但我仍然收到很多未压缩的 JavaScript 文件，其版本号附加到 URI (?ver)。例子：

```
/js/slides.min.jquery.js?ver=3.3.1 
```

有什么方法可以有效地压缩这些文件吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:22:34.677

尝试也添加`application/javascript`和`application/x-javascript`内容类型

# c++ - C++ 程序中出现异常的编译器错误。与语法无关。视窗编程

> ID：11741058
> 
> 赞同：0
> 
> 时间：2012-07-31T13:20:12.373
> 
> 标签：c++, visual-c++

我正在尝试在 C++ MSVS2010 中编译该程序，但遇到了奇怪的编译器错误，例如

```
 Error  12  error LNK1120: 1 unresolved externals   C:\Users\win7vm\Documents\Visual Studio 2010\Projects\WinDemo \Debug\WinDemo.exe    1. 
```

我也得到了

```
 Error  11  error LNK2019: unresolved external symbol "public: int __thiscall Dice::returnRoll(void)" (?returnRoll@Dice@@QAEHXZ) referenced in function "public: void __thiscall Dice::drawSpots(struct HDC__ *,int,int,int,int,int,int,int)" (?drawSpots@Dice@@QAEXPAUHDC__@@HHHHHHH@Z)    C:\Users\win7vm\Documents\Visual Studio 2010\Projects\WinDemo \WinDemo \Debug\WinDemo.exe   1\Dice.obj 
```

两者似乎都与语法无关，我并不完全理解它们。基本上，这个想法是让 switch 语句显示从另一个函数传递到该函数的值。我几乎可以肯定这是一个简单的参考/指针问题，我完全错过了。这个类有一个头文件，一个 windows.h（开箱即用，未经修改，因此您可以在需要时查找它），以及带有主文件的函数（此处包含函数和类）。让我预先回答 2 个几乎肯定会出现的问题：a) 是的，它绝对必须使用 c++ 中的 windows.h 文件。b) 是的，我知道有一百个更好的库和语言可以用来解决这个问题，我在这件事上别无选择。也有人可能会尝试指出声明的全局变量。在对相对较短的代码块进行故障排除时，全局变量是暂时但必要的不便。我意识到你们中的许多人在 C++ 方面都非常熟练，但我要求你们耐心地解释我的 C++ 编程水平较低的答案。谢谢你。:)

** //头文件

```
#include <windows.h>
#include <math.h>
#include <vector>
using namespace std;

int count=0;
int *result = &count;

class Dice
{
public:
    void drawSpots(HDC hdc, int x1,int y1, int x2,int y2, int r, int g,int b);
    int roll();
    wchar_t * drawString();
    int returnRoll();
private:
    int x1,x2,y1,y2,sr,sg,sb;
    //int &count;
    //int *result;
    int value;
    int spotColor;
};

//definitions file

void Dice::drawSpots(HDC hdc, int x1,int y1, int x2,int y2, int r, int g,int b)
{
    *result = roll();
    //vectorOfDice.push_back(result);
    //wchar_t * drawString();
    returnRoll();
    HBRUSH hBrush = CreateSolidBrush(RGB(r,g,b));
    SelectObject(hdc,hBrush);
    switch(*result)
    {
    case 1:
        //draw something based on case
        break;
    case 2:
        //draw something based on case
        break;
    case 3:
        //draw something based on case
        break;
    case 4:
        //draw something based on case
        break;
    case 5:
        //draw something based on case      
                    break;
    case 6:
        //draw something based on case      
                    break;
    }

    DeleteObject(hBrush);
}

int Dice::roll()
{
    value=1+(rand()%6);
    return value;
}

int Dice::returnRoll()
{
    count=0;
    if((*result == 2)||(*result == 4)||(*result == 6))
    {
        count++;
    }
    return count;
}

wchar_t * Dice::drawString()
{
    //result = returnRoll(result);
    //result = roll();
    switch(*result)
    {
    case 0:
        return L"no";
        break;
    case 1:
        return L"1";
        break;
    case 2:
        return L"2";
        break;
    case 3:
        return L"3";
        break;
    case 4:
        return L"4";
        break;
    case 5:
        return L"5";
        break;
    case 6:
        return L"6";
        break;
    }
    return L"X";
}

//main file

#include <windows.h>
#include <math.h>
#include "Dice.h"

const wchar_t g_szClassName[] = L"myWindowClass";

// Step 4: the Window Procedure
LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    Dice dice;

    //state variables
    static int red = 0;
    static int green = 0;
    static int blue = 100;

    static int tr = 0;
    static int tg = 0;
    static int tb = 0;

    HDC hDC;
    PAINTSTRUCT Ps;
    HPEN hPen1;
    HPEN hPen2;

    HBRUSH hBrush1;
    HFONT hFont1;
    RECT rect;
    int fontHeight = 100;

    switch(msg)
    {
        case WM_PAINT:
            hDC = BeginPaint(hwnd,&Ps);

            hPen1=CreatePen(PS_SOLID,5,RGB(red,green,blue));
            hPen2=CreatePen(PS_SOLID,5,RGB(0,0,0));

            hBrush1= CreateSolidBrush(RGB(0,0,255));

            SelectObject(hDC,hPen1);
            SelectObject(hDC,hBrush1);

            fontHeight=50;
            hFont1=CreateFont(fontHeight,0,0,0,0,1,0,0,0,0,0,0,0,L"Times New Roman");
            //hFont1=CreateFont(fontHeight,0,0,0,0,0,0,0,0,0,0,0,0,L"Arial");
            SelectObject(hDC,hFont1);

            rect.top=100;
            rect.bottom=700;
            rect.left = 550;
            rect.right =950;

            DrawText(hDC,L"There are ",-1,&rect,DT_CENTER | DT_WORDBREAK );
            rect.top=200;
            DrawText(hDC,dice.drawString(),-1,&rect,DT_CENTER | DT_WORDBREAK );
            rect.top=300;
            DrawText(hDC,L" even dice!",-1,&rect,DT_CENTER | DT_WORDBREAK );

            DeleteObject(hBrush1);
            DeleteObject(hPen2);
            DeleteObject(hPen1);
            EndPaint(hwnd,&Ps);
        break;
        case WM_KEYDOWN:
            if(wParam==VK_SPACE)
            {
                dice.roll();
                InvalidateRect(hwnd,NULL,true);
            }
            break;
        case WM_CHAR:
            if(wParam=='c')
            {
                tr=rand()%256;
                tg=rand()%256;
                tb=rand()%256;
                dice.spotColors();
            }
            InvalidateRect(hwnd,NULL,true);
            break;
        case WM_CLOSE:
            DestroyWindow(hwnd);
        break;
        case WM_DESTROY:
            PostQuitMessage(0);
        break;
        default:
            return DefWindowProc(hwnd, msg, wParam, lParam);
    }
    return 0;
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
    LPSTR lpCmdLine, int nCmdShow)
{
    WNDCLASSEX wc;
    HWND hwnd;
    MSG Msg;

    //Step 1: Registering the Window Class
    wc.cbSize        = sizeof(WNDCLASSEX);
    wc.style         = 0;
    wc.lpfnWndProc   = WndProc;
    wc.cbClsExtra    = 0;
    wc.cbWndExtra    = 0;
    wc.hInstance     = hInstance;
    wc.hIcon         = LoadIcon(NULL, IDI_APPLICATION);
    wc.hCursor       = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    wc.lpszMenuName  = NULL;
    wc.lpszClassName = g_szClassName;
    wc.hIconSm       = LoadIcon(NULL, IDI_APPLICATION);

    if(!RegisterClassEx(&wc))
    {
        MessageBox(NULL, L"Window Registration Failed!", L"Error!",
            MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

    // Step 2: Creating the Window
    hwnd = CreateWindowEx(
        WS_EX_CLIENTEDGE,
        g_szClassName,
        L"window",
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT, CW_USEDEFAULT, 1000, 800,
        NULL, NULL, hInstance, NULL);

    if(hwnd == NULL)
    {
        MessageBox(NULL, L"Window Creation Failed!", L"Error!",
            MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

    ShowWindow(hwnd, nCmdShow);
    UpdateWindow(hwnd);

    // Step 3: The Message Loop
    while(GetMessage(&Msg, NULL, 0, 0) > 0)
    {
        TranslateMessage(&Msg);
        DispatchMessage(&Msg);
    }
    return Msg.wParam;
} 
```

**

编辑：是的，谢谢我收到链接器错误，但是将 Dice:: 添加到签名（似乎减少了编译器的抱怨但是）我仍然收到类似的不寻常错误，例如 -

```
Error   11  error LNK1169: one or more multiply defined symbols found   C:\Users\win7vm\Documents\Visual Studio 2010\Projects\\WinDemo \Debug\WinDemo.exe   1

Error   10  error LNK2005: "int * result" (?result@@3PAHA) already defined in Dice.obj  C:\Users\win7vm\Documents\Visual Studio 2010\Projects\WinDemo \WinDemo \main.obj

Error   9   error LNK2005: "int count" (?count@@3HA) already defined in Dice.obj    C:\Users\win7vm\Documents\Visual Studio 2010\Projects\WinDemo \WinDemo \main.obj 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T13:21:19.387

您没有输入定义`Dice::`的签名。`returnRoll`这会导致链接器在需要时永远找不到它，因此会给您一个链接器错误（不是编译器错误）。

```
int Dice::returnRoll() {...}
    ^^^^^^ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T13:21:55.290

您忘记`Dice::`了 returnRoll 定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T13:23:00.023

您忘记将 returnRoll 作为 Dice:: 的一部分

你只是错过了骰子::

```
int Dice::roll()
{
    value=1+(rand()%6);
    return value;
}

int returnRoll()
{
    count=0;
    if((*result == 2)||(*result == 4)||(*result == 6))
    {
        count++;
    }
    return count;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T13:57:04.723

根据你的新问题，我猜你没有提到你在两个文件中都包含了头文件，而不仅仅是主文件。你不应该在头文件中定义全局变量，否则你会遇到这样的问题。您需要将计数和结果的定义移动到源文件而不是标题。我没有看到您在主文件中使用它们，但如果您需要添加

```
extern int count;
extern int* result; 
```

到头文件。

更好的是避免使用全局变量，这不是你需要它们的情况。与其让 drawSpots 设置一个全局变量，为什么不直接返回值呢？

# windows - LLMNR on Windows vs. Zeroconf vs. Bonjour

> ID：11741062
> 
> 赞同：12
> 
> 时间：2012-07-31T13:20:21.250
> 
> 标签：windows, bonjour, zeroconf, mdns, windows-networking

[Link-Local Multicast Name Resolution (LLMNR)](http://technet.microsoft.com/library/bb878128) is a Microsoft tech for service discovery based on multicast DNS. Is it compatible with Bonjour/Zeroconf? If so, where's the API? The service discovery, I take it, is somehow rolled into vanilla DNS resolution (`gethostbyname()`?), but what about service advertisement?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T16:56:36.467

LLMNR solves a small subset of the problems that mDNS tackles, as set out in [this post](https://web.archive.org/web/20150602230543/http://lists.apple.com/archives/rendezvous-dev/2004/Apr/msg00031.html). In short, it's not compatible with Bonjour.

Here is the content of that post, in case archive.org decides to drop the page:

> From: Marc Krochmal Date: Fri, 16 Apr 2004 08:54:54 -0700 Hi Tom,
> 
> > I was reading the August 2003 article in Linux Magazine ([http://www.linux-mag.com/2003-08/zeroconf_01.html](http://www.linux-mag.com/2003-08/zeroconf_01.html)) on Zeroconf environments. Within the article they mention that Link Local Multicast Name Resolution was adopted by the IETF and that more or less mDNS was thrown out on its ear, even though it uses existing standards instead of creating an all new protocol. One of the reasons they mentioned or implied was that LLMNR was more advanced than mDNS was 'includes provisions to keep link-local addresses from accidentally being propagated into the greater DNS space' Based on research I have been doing into Rendezvous environments this is incorrect (is it not??) since mDNS is aware that domains ending with '.local' are available only on the local link and that a host will only ever try and resolve a domain name ending with '.local' on the local link. So have i misread this article or the mDNS white-paper or is there some truth in this??
> 
> LLMNR is much less advanced than mDNS. LLMNR solves a very small problem. It provides very basic name resolution when the name server is misconfigured or when it returns an error.
> 
> mDNS provides a distributed notification and cache coherency protocol that facilities ad-hoc DNS-Based Service Discovery. mDNS also provides reliable local name resolution when a hostname ends with ".local", regardless of the state of the DNS server. LLMNR is not a service discovery protocol. You could say that mDNS is a superset of LLMNR.
> 
> After a year and a half of operational experience with mDNS, we have never seen accidental leakage of link-local addresses outside the local-link.
> 
> There are many people in the IETF DNSEXT working group that would like to see LLMNR interoperate with mDNS. In fact, some people including Paul Vixie are saying that LLMNR should be thrown out and replaced with mDNS. You can read this for yourself in the namedroppers archives.
> 
> [http://ops.ietf.org/lists/namedroppers/namedroppers.2004/](http://ops.ietf.org/lists/namedroppers/namedroppers.2004/)
> 
> > Another thing alluded to by this article was that Microsoft is pushing for LLMNR and as far as I recall this is something provided by Service Pack 2 in Win XP.
> 
> I am not aware of LLMNR being included in Service Pack 2.
> 
> > Is this not going to take us back to a NetBIOS v AppleTalk days where instead of working towards a singular standard we now have two for name resolution in Zeroconf environments???
> 
> This is difficult to predict. If Rendezvous continues to gain momentum, it could easily become the standard in Zeroconf environments. Pretty much every network enabled printer today ships with Rendezvous. Rendezvous also enables iTunes Music Sharing on Mac and Windows which could allow you to potentially share music with many other devices in the home with zero configuration.
> 
> > Finally on a different track, the mDNS responder provided by Apple for OS X handles traditional DNS responses as well as well as link local mDNS. Is the mDNS responder for Windows and Linux boxes intended to replace the respective traditional DNS handlers provided by the Windows OS and Linux OS or does mDNS work in conjunction with their existing DNS handling (i.e. On a windows box with an mDNS Responder installed, if a DNS Query (for a global domain) needs to be sent, will the OS now use the mDNS responder to handle the process or will it use its 'out-of-the-box' DNS responder ???)
> 
> Even though mDNSResponder could be used to replace all DNS query handling, it probably won't. The name space provider for Windows which is included in the mDNSResonder project only works for names that end with ".local".
> 
> Best Regards,
> 
> -Marc

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-11-05T18:05:13.153

From [Apple's open source implementation of mDNSResponder](https://opensource.apple.com/source/mDNSResponder/mDNSResponder-541/mDNSCore/DNSCommon.c):

```
// Note: Microsoft's proposed "Link Local Multicast Name Resolution Protocol" (LLMNR) is essentially a limited version of
// Multicast DNS, using the same packet formats, naming syntax, and record types as Multicast DNS, but on a different UDP
// port and multicast address, which means it won't interoperate with the existing installed base of Multicast DNS responders.
// LLMNR uses IPv4 multicast address 224.0.0.252, IPv6 multicast address FF02::0001:0003, and UDP port 5355. 
```

# python - PyPI（Python 包索引）的源代码在哪里？

> ID：11741069
> 
> 赞同：9
> 
> 时间：2012-07-31T13:20:44.980
> 
> 标签：python, pypi

我很难找到 PyPI 的源代码。它在哪里？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T13:27:37.010

PyPI 源代码可以在[这里](https://bitbucket.org/pypa/pypi)找到。更多关于 PyPI 架构的技术文档有：

*   [CheeseShop](http://wiki.python.org/moin/CheeseShop)（带有各种链接的一般概述）
*   [CheeseShopDev](http://wiki.python.org/moin/CheeseShopDev)（技术文档）

*CheeseShop*这个名称是 Python 包索引 (PyPI) 的旧名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-29T13:29:52.923

[Warehouse](https://github.com/pypa/warehouse)是 PyPI 的漂亮、现代的替代品。它将最终达到功能平价并取代旧系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-05T00:01:08.800

这里是！[https://bitbucket.org/pypa/pypi](https://bitbucket.org/pypa/pypi)

这是一个 Mercurial 存储库，您可以克隆它：

```
hg clone https://bitbucket.org/pypa/pypi 
```

# javascript - 如何让元素被点击？

> ID：11741070
> 
> 赞同：41
> 
> 时间：2012-07-31T13:20:45.093
> 
> 标签：javascript, jquery

给定此代码，您将如何检查文档中单击了哪个项目？

```
if ( document.addEventListener && document.attachEvent && document.fireEvent ) {
    document.attachEvent( "onclick", function() {
     // ...
    });
} 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-31T13:30:29.447

```
// using e.srcElement or event.srcElement 
```

试试这个 :) 看看这个[http://www.quirksmode.org/js/events_advanced.html](http://www.quirksmode.org/js/events_advanced.html)

```
if (document.addEventListener){
    document.addEventListener("click", function(event){
        var targetElement = event.target || event.srcElement;
        console.log(targetElement);
    });
} else if (document.attachEvent) {    
    document.attachEvent("onclick", function(){
        var targetElement = event.target || event.srcElement;
        console.log(targetElement);
    });
} 
```

# javascript - 带有 ASP.NET 和 JQuery Mobile 的 innerHtml

> ID：11741074
> 
> 赞同：0
> 
> 时间：2012-07-31T13:20:59.470
> 
> 标签：javascript, asp.net, html, jquery-mobile

我正在进行移动搜索，它使用您的位置来确定邮政编码服务器端，但是当尝试将两个标签设置为纬度和经度以发送到服务器时，我收到一个错误，声称 innerHtml 为空。经过进一步检查，该元素为空。为什么会这样？

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site1.Master" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="Search.Default" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
<script language="javascript" type="text/javascript">
    navigator.geolocation.getCurrentPosition(foundLocation, noLocation);
    var latitude;
    var longitude;
    function foundLocation(position) {
        latitude = position.coords.latitude;
        longitude = position.coords.longitude;
        alert('Your location: ' + latitude + ', ' + longitude);
    }
    function noLocation() {
        //Do something here in the case that no location is found, or user denies access
    }
    function getLocation() {
        document.getElementById("ct100_ContentPlaceHolder1_lblLat").innerHtml = latitude;
        document.getElementById("ct100_ContentPlaceHolder1_lblLong").innerHtml = longitude;
    }
</script>   
<div data-role="page">
    <div data-role="header">
        <h1>Provider Search</h1>
    </div>
    <div data-role="content">
        <asp:Button ID="btnSearch" Text="Search" runat="server" data-role="button" OnClientClick="getLocation()" OnClick="btnSearch_Clicked"></asp:Button>
        <asp:Label ID="lblLat" runat="server"></asp:Label>
        <asp:Label ID="lblLong" runat="server"></asp:Label>
        <p></p> 

    </div>

</div>

</asp:Content> 
```

我想指出，除了标签的设置之外，本文档中的所有内容都运行良好。

还有，id前缀ct100_ContentPlaceHolder1_是asp.net在运行时生成的，我调试的时候看页面源码就可以确认。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:29:15.407

在您的 getLocation() 函数中，您可以尝试执行以下操作：

```
function getLocation() {
    $('#<%=lblLat.ClientID%>').html(latitude);
    $('#<%=lblLong.ClientID%>').html(latitude);
} 
```

您也可以尝试以类似的方式设置两个标签的文本属性：

```
function getLocation() {
    $('#<%=lblLat.ClientID%>').text(latitude);
    $('#<%=lblLong.ClientID%>').text(latitude);
} 
```

# jdbc - JDBC - 通信错误（MySQL + Eclipse）

> ID：11741076
> 
> 赞同：0
> 
> 时间：2012-07-31T13:21:04.147
> 
> 标签：jdbc

我在握手期间收到错误通信失败。localhost:3306 上是否有服务器运行？我已经使用类型 4 jdbc 驱动程序编写了一个 jdbc 程序，我想执行删除操作，ide 是 eclipse。代码：

```
Class.forName("com.mysql.jdbc.Driver");
String cs="jdbc:mysql://localhost:3306/account_db";
Connection con=DriverManager.getConnection(cs,"root",<password>);
PreparedStatement ps=con.prepareStatement("delete from empde emp_id=?");
Scanner s=new Scanner(System.in);
while(true)
{
    System.out.println("enter the emp_id :");
    int ac_id=s.nextInt();
    ps.setInt(1,emp_id);
    ps.executeUpdate();
    System.out.println("one emp_id is deleted:");
    System.out.println("one more emp_id?(yes/no)");
    String choice=s.next();
    if(choice.equals("no"))
    System.out.println("empde is exit");
    break;
}
ps.close();
con.close(); 
```

检测到错误：

```
java.sql.SQLException: Communication failure during handshake. Is there a server running on localhost:3306? at com.mysql.jdbc.MysqlIO.init(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:16:00.957

这可能是因为使用了旧的`MySQL Connector/J`JDBC 驱动程序。我假设您已经安装了最新的 MySQL，并且您正在尝试使用旧版本的 MySQL Connector jar 进行连接。

您可能想从[MySQL 驱动程序下载网站更新您的驱动程序](http://dev.mysql.com/downloads/connector/j/3.1.html/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T05:35:20.950

如果您从 cmd 提示符编译 java 代码，则意味着您需要在通过这种方式编译之前设置 java 路径。

```
set path=(drivein which java is stored):\program files\java\jdk(version)\bin;
ex: set path=C:\program files\Java\jdk1.6.0\lib; 
```

一旦你设置了环境变量意味着你不需要每次都设置java路径，只需查看如何设置环境变量的链接。

[http://www.roseindia.net/java/java-classpath.shtml](http://www.roseindia.net/java/java-classpath.shtml)

并且在使用 mysql 时还可以查看链接，您需要设置 CLASSPATH 查看链接

[http://java.blogs.webucator.com/2010/07/05/java-database-connectivity-jdbc-basics-using-mysql/](http://java.blogs.webucator.com/2010/07/05/java-database-connectivity-jdbc-basics-using-mysql/)

# android - 在 AndEngine 中绘制路径以移动图像或精灵

> ID：11741078
> 
> 赞同：5
> 
> 时间：2012-07-31T13:21:10.147
> 
> 标签：android, path, andengine

嗨，我是 Android 游戏开发的新手，我使用 AndEngine，我需要寻找一条路径，但有一个问题![图片](../Images/8ed235539e86b679e5f82378cbc318d9.png)

看图像。我需要的路径就像第一个对象应该从屏幕底部移动到屏幕中间。但是当我绘制我的路径时它移动到屏幕中间但回到第二个点在第二个图像中。图像正在通过路径移动，但它就像第二个图像。我需要它作为第一个图像。它应该在第三个点停止并且应该再次从第一个点开始。

我的代码如下

```
package com.example.sss;

import org.andengine.engine.camera.Camera;
import org.andengine.engine.options.EngineOptions;
import org.andengine.engine.options.ScreenOrientation;
import org.andengine.engine.options.resolutionpolicy.RatioResolutionPolicy;
import org.andengine.entity.IEntity;
import org.andengine.entity.modifier.LoopEntityModifier;
import org.andengine.entity.modifier.PathModifier;
import org.andengine.entity.modifier.PathModifier.IPathModifierListener;
import org.andengine.entity.modifier.PathModifier.Path;
import org.andengine.entity.scene.Scene;
import org.andengine.entity.scene.background.RepeatingSpriteBackground;
import org.andengine.entity.sprite.AnimatedSprite;
import org.andengine.entity.util.FPSLogger;
import org.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlas;
import   org.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlasTextureRegionFactory;
import org.andengine.opengl.texture.atlas.bitmap.source.AssetBitmapTextureAtlasSource;
import org.andengine.opengl.texture.region.TiledTextureRegion;
import org.andengine.ui.activity.SimpleBaseGameActivity;

/**
 * (c) 2010 Nicolas Gramlich
 * (c) 2011 Zynga
  *
 * @author Nicolas Gramlich
* @since 13:58:48 - 19.07.2010
 */
public class MainActivity extends SimpleBaseGameActivity {
// ===========================================================
// Constants
// ===========================================================

private static final int CAMERA_WIDTH = 720;
private static final int CAMERA_HEIGHT = 480;

// ===========================================================
// Fields
// ===========================================================

private RepeatingSpriteBackground mGrassBackground;

private BitmapTextureAtlas mBitmapTextureAtlas;
private TiledTextureRegion mPlayerTextureRegion;

// ===========================================================
// Constructors
// ===========================================================

// ===========================================================
// Getter & Setter
// ===========================================================

// ===========================================================
// Methods for/from SuperClass/Interfaces
// ===========================================================

public EngineOptions onCreateEngineOptions() {
    final Camera camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

    return new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), camera);
}

public void onCreateResources() {
    BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

    this.mBitmapTextureAtlas = new BitmapTextureAtlas(this.getTextureManager(), 128, 128);
    this.mPlayerTextureRegion = BitmapTextureAtlasTextureRegionFactory.createTiledFromAsset(this.mBitmapTextureAtlas, this, "player.png", 0, 0, 3, 4);
    this.mGrassBackground = new RepeatingSpriteBackground(CAMERA_WIDTH, CAMERA_HEIGHT, this.getTextureManager(), AssetBitmapTextureAtlasSource.create(this.getAssets(), "gfx/background_grass.png"), this.getVertexBufferObjectManager());
    this.mBitmapTextureAtlas.load();
}

public Scene onCreateScene() {
    this.mEngine.registerUpdateHandler(new FPSLogger());

    final Scene scene = new Scene();
    final Scene scene_one = new Scene();
    scene.setBackground(this.mGrassBackground);

    /* Calculate the coordinates for the face, so its centered on the camera.     */
    final float centerX = (CAMERA_WIDTH - this.mPlayerTextureRegion.getWidth()) / 2;
    final float centerY = (CAMERA_HEIGHT - this.mPlayerTextureRegion.getHeight()) / 2;
    System.out.println("aaaaaa"+centerX+"asdadas");

    /* Create the sprite and add it to the scene. */
    final AnimatedSprite player_one = new AnimatedSprite(centerX, centerY, 48, 64, this.mPlayerTextureRegion, this.getVertexBufferObjectManager());

    final Path path_one =  new Path(5).to(CAMERA_WIDTH - 58, 10).to(10, 10).to(100, CAMERA_HEIGHT/2f);//to(10, 10).to(10, CAMERA_HEIGHT - 74).to(CAMERA_WIDTH - 58, CAMERA_HEIGHT - 74).to(CAMERA_WIDTH - 58, 10).to(10, 10);
    final AnimatedSprite player = new AnimatedSprite(centerX, centerY, 48, 64, this.mPlayerTextureRegion, this.getVertexBufferObjectManager());
    final Path path = new Path(5).to(CAMERA_WIDTH - 58, 10).to(10, 10).to(10, CAMERA_HEIGHT/2f);

    player.registerEntityModifier(new LoopEntityModifier(new PathModifier(5, path, null, new IPathModifierListener() {

        public void onPathStarted(final PathModifier pPathModifier, final IEntity pEntity) {

        }

        public void onPathWaypointStarted(final PathModifier pPathModifier, final IEntity pEntity, final int pWaypointIndex) {
            switch(pWaypointIndex) {
                case 0:
                    player.animate(new long[]{200, 200, 200}, 6, 8, true);
                    break;
                case 1:
                    player.animate(new long[]{200, 200, 200}, 3, 5, true);

                    break;
                case 2:
                    player.animate(new long[]{200, 200, 200}, 0, 2, true);

                    break;
                case 3:
                    //scene.setVisible(false);
                    player.animate(new long[]{200, 200, 200}, 9, 11, true);
                    break;
            }
        }

        public void onPathWaypointFinished(final PathModifier pPathModifier, final IEntity pEntity, final int pWaypointIndex) {

        }

        public void onPathFinished(final PathModifier pPathModifier, final IEntity pEntity) {
            System.out.println("tileesdfsdfsdfgfdgdfsee"+player.getCurrentTileIndex() );
        }
    })));

player_one.registerEntityModifier(new LoopEntityModifier(new PathModifier(5, path_one,    null, new IPathModifierListener() {

        public void onPathStarted(final PathModifier pPathModifier, final   IEntity pEntity) {

        }

        public void onPathWaypointStarted(final PathModifier pPathModifier,   final IEntity pEntity, final int pWaypointIndex) {
            switch(pWaypointIndex) {
                case 0:
                    player.animate(new long[]{200, 200, 200}, 6, 8, true);
                    break;
                case 1:
                    player.animate(new long[]{200, 200, 200}, 3, 5, true);

                    break;
                case 2:
                    player.animate(new long[]{200, 200, 200}, 0, 2, true);

                         System.out.println("insideeeeeeeeeeeeeeeeeeeeeeeee");
                    scene.detachChild(player_one);
                    scene.attachChild(player);
                    break;
                case 3:
                    player.animate(new long[]{200, 200, 200}, 9, 11, true);
                    break;
            }
        }

        public void onPathWaypointFinished(final PathModifier pPathModifier, final IEntity pEntity, final int pWaypointIndex) {

        }

        public void onPathFinished(final PathModifier pPathModifier, final IEntity pEntity) {
            System.out.println("tileesdfsdfsdfgfdgdfsee"+player.getCurrentTileIndex() );
        }
    })));

    scene.attachChild(player);

    return scene;
}

// ===========================================================
// Methods
// ===========================================================

// ===========================================================
// Inner and Anonymous Classes
// ===========================================================
} 
```

请帮助我。在此先感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T18:15:07.163

如果您有三点，则应在 Path 构造函数中指定它：

```
final Path path = new Path(3).to(CAMERA_WIDTH - 58, 10).to(10, 10).to(10, CAMERA_HEIGHT/2f); 
```

反而

```
final Path path = new Path(5).to(CAMERA_WIDTH - 58, 10).to(10, 10).to(10, CAMERA_HEIGHT/2f); 
```

# jquery - 如何将 jquery lib 找出到项目中？

> ID：11741079
> 
> 赞同：0
> 
> 时间：2012-07-31T13:21:11.520
> 
> 标签：jquery, sharepoint, jquery-plugins, web-parts

我正在开发一个 WEB_PART，我想知道是否有某种方法可以找出要插入 Web 部件的母版页项目中是否存在任何 JQUERY LIB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:23:49.993

只是检查

```
if (typeof window.jQuery === 'function') {
   // jQuery is defined
} 
```

# matlab - Matlab 复数

> ID：11741085
> 
> 赞同：-2
> 
> 时间：2012-07-31T13:21:33.823
> 
> 标签：matlab

我有两个矩阵：矩阵 {a} <252x1> 是矩阵 {b} <252x4000> 的子集。我需要确定矩阵 {b} 中出现矩阵 {a} 的值之前和之后的天数。

```
Example:

Matrix a  Matrix b
10       12 34 54 10
23       23 98 78 98
43       98 53 43 88
44       98 44 88 78

Output
1  1  1  10
23 1  1  1
1  1  43 1
1  44 1  1

Days
3 0
0 3
2 1
1 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:48:42.123

假设每行恰好出现一次`a`in ：`b`

使用[bsxfun](http://www.mathworks.nl/help/techdoc/ref/bsxfun.html)获得`result`：

```
result=ones(size(b));
ainb=bsxfun(@eq,a,b);
result(ainb)=b(ainb); 
```

使用带有两个输出参数的[find](http://www.mathworks.nl/help/techdoc/ref/find.html)`a`查找所在的列索引，并从中推断出天数：`b`

```
[colidx_rev,~] = find(ainb);
colidx(colidx_rev,1) = 1:4;

Days = [colidx-1 size(b,2)-colidx]; 
```

当`any(sum(ainb,2)>1)`. 接下来要做的是选择一个（例如第一个匹配项）。通过使用循环或更短的使用arrayfun以另一种方式查找列索引来做到这一点：

```
col_idx = arrayfun(@(rowi) find(ainb(rowi,:),1),1:size(b,1))'; 
```

其余的类似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:49:10.670

此答案假设每行只有一个匹配项：

```
a = [10;23;43;44]
b = [12 34 45 10;23 98 78 98;98 53 43 88; 98 44 88 78]
l = bsxfun(@eq, a, b)
[c r] = find(l')
Days = [c - 1, size(b, 2) - c]
Output = b.*l + ~l 
```

If the assumption is bad then I think you'll be better off using loops.

# c# - 在 COM 可见 DLL 中显示表单

> ID：11741090
> 
> 赞同：0
> 
> 时间：2012-07-31T13:21:42.457
> 
> 标签：c#, .net, visual-c++, com, unmanaged

从非托管 VC++ 6.0 我调用一个 COM 可见的 .NET DLL。从这个 DLL 中，我想显示一个对话框。*如果方法不调用 Form.show()，*我可以让 DLL 正确注册并工作。但是，如果方法调用表单显示，我无法实例化 DLL（我得到“类未注册错误”）。

有人知道我需要做什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:49:54.617

假设这是一个 Windows Forms `Form.Show()`，我认为您`Application.Run()`的流程中的某个地方需要一个 Windows Forms 。

# performance - Drupal网站页面加载时间超过40s，请帮助我

> ID：11741099
> 
> 赞同：0
> 
> 时间：2012-07-31T13:21:59.450
> 
> 标签：performance, drupal, pagespeed

我已经完成了 drupal (7.14) .website，但它加载页面的速度非常慢，超过 40 秒。

网站名称是：open Casino bonus[.]com without space。

我曾尝试优化此站点，例如：安装模块（boost、filecache、...）、优化 htaccess、gzip、使用 pagespeed 工具、清除 css 和 javascript 等，但它没有改变。

我检查错误文件日志，它显示：“脚本头过早结束：index.php”

请检查页面速度测试结果此页面：[http ://www.webpagetest.org/result/120731_9E_H7W/1/details/](http://www.webpagetest.org/result/120731_9E_H7W/1/details/)

加载时间：51.792 秒。IP：182.50.148.1 位置：新加坡 错误/状态代码：200 开始偏移：0.368 s
DNS 查找：50 ms 初始连接：318 ms 到第一个字节的时间：38969 ms 内容下载：856 ms 字节输入（下载）：12.3 KB 字节输出（已上传）：0.4 KB

请帮我，

非常感谢

约翰

============ 补充资料===========

感谢您的回复，

我检查了 php.ini，我认为没问题，请参阅：open Casino bonus.com/phpinfo.php 我还检查了 gtmetrix.com 中的性能报告，我已经播种了 HTTP 请求和响应非常慢。例如，index.php 的请求和响应超过 15.71 秒，每个请求超过 1.5 秒（1 -> 2kb）。

[查看最新的业绩报告](http://gtmetrix.com/reports/opencasinobonus.com/rrz90BIb)

我为 2 台服务器创建了比较。

我的主机：playtech.png - 2KB - 请求：1.64 秒 其他主机：playtech.png - 2.5KB - 请求：46 毫秒

在 1.6s 和 46ms 之间，所以我认为我的托管有问题。你认为是吗？我为 godaddy.com 使用托管 4GB Deluxe 设备，我会联系 godaddy 并让大家知道以帮助我:)。

我会尝试检查我的问题。

谢谢大家，

此致！

约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:41:46.310

好吧，您的服务器上有 40 多岁 - 这是您的第一大瓶颈。不幸的是，如果没有更多信息，我们将无法告诉您更多关于那里发生的事情：缓慢的数据库查询、超载的服务器、向另一个 Web 服务发出实时请求以呈现页面.. 挖掘您的服务器端日志，添加一些仪器。

一旦你弄清楚了，你在前端也有 10 秒的加载时间。您正在获取数百张图像..您需要它们吗？如果是，那么考虑拆分其中的一些以获得更快的下载。您也绝对可以从跨多个域/主机名分片它们中受益，以解决浏览器的连接主机限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:54:47.960

> 我曾尝试优化此站点，例如：安装模块（升压，文件缓存，...）

如果您安装了太多模块，您将获得缓慢的页面加载。禁用并卸载您不需要的所有模块。

> 我尝试过 [...] 优化 htaccess、gzip、使用 pagespeed 工具、清除 css 和 javascript，...

如果您没有可用的 CPU、磁盘空间或内存 - 这些实际上可能会减慢速度。

* * *

***影响页面加载时间的特定于站点的问题：***

正如[dorien](https://stackoverflow.com/users/1496362/dorien)所说，检查 php.ini 文件中的 php_memory 。您可以使用 phpinfo(); 查看您的限制是什么以及正在加载哪个 php.ini 文件。

以下特定于站点的区域会影响页面加载时间：

*   您的应用程序运行的**PHP 模式**（mod_php、fast-cgi、cgi 等）根据您的服务器资源和网站的模块和主题依赖关系，每种模式都有优缺点。
*   分配给您站点的**PHP 内存**（更多 = 更快。如果您给 Drupal 站点提供的内存小于 100MB，那么您将在负载下失败。）
*   主题/页面中使用的图形的**数量、大小和 dpi 。**
*   主题/页面中使用的主题资产的**数量、大小和位置。**
*   从本身很慢或驻留在高延迟 WAN 连接上的服务器加载主题**嵌入式外部资源**（css、img、js 等）。
*   **启用**的模块数。（更少=更好。）
*   **双重压缩**您的页面（例如，您的服务器使用 mod_deflate 进行页面压缩，但您也在 Drupal 中这样做。）
*   在 Drupal 数据库中使用**MyISAM 而不是 InnoDB 表。**
*   **错误的自定义主题、模块或**Drupal 核心的添加。我知道，我知道......你的代码没有错误。
*   **APC 缓存**大小和分段（如果正在使用 APC，请确保它的缓存大小足够大以避免分段。）

* * *

***影响页面加载时间的服务器特定问题：***

以下更广泛的领域也会影响页面加载时间：

*   服务器上的其他**负载**。您确定没有其他东西在猛击您的服务器，对吗？正确的？
*   **资源限制**（您的 VPS 是否超卖？RAID 是如何配置的？如果是专用服务器，硬件的电流/速度如何？）
*   您的**服务器是否正在交换内存**？如果是这样，MySQL 就会崩溃。随着您的 MySQL 运行，您的站点也运行。
*   您的**Apache 线程、内存和 prefork**设置。
*   **MySQL 配置**设置不正确。检查线程、innodb、表缓存和最大用户设置以启动。
*   **查看计算机/浏览器**的负载/延迟。（不，真的。有人问为什么他们的网站加载速度很慢，而实际上客户端是在一个 128MB 上网本上，该上网本是通过手机的 2G Edge 网络连接的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:26:48.343

也许你的 php 内存已经耗尽。您可以在 php.ini 中增加它。否则，您可能需要使用 Devel 模块来检查您的内存使用情况。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-13T17:11:55.877

在我的服务器上托管的 drupal 7 遇到了同样的问题，经过数小时的调试后，我查看了设置。php... 就是这样，数据库服务器“主机”是域本身（example.com），所以看起来我们有 10 秒的查找开销。在诅咒并踢了开发人员的脸之后，我将其更改为“localhost”或您的数据库主机是什么，并且繁荣运行得像地狱一样！

希望节省别人的时间

# unix - 使用公钥/私钥加密登录到 unix boks

> ID：11741101
> 
> 赞同：0
> 
> 时间：2012-07-31T13:22:03.240
> 
> 标签：unix, public-key-encryption

我正在尝试使用公钥（XYZ）登录我的 unix 机器。我发现我必须创建一对公钥和私钥，并将公钥添加到我将要登录的服务器。但我实际上是在尝试从单独的工具登录到服务器。该工具正在部署到单独的服务器中。那么将公钥添加到该服务器会解决我的问题吗？除了这个还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:59:48.153

假设你想从机器A访问机器B。然后生成机器A的公钥和私钥。然后将机器A的公钥添加到机器B的可信密钥列表中

如果我没有正确理解您的问题，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:04:51.287

如果您在谈论 ssh，那么 ssh-copy-id 可以帮助将您的公钥放入 unix 机器上的正确位置。

# asp.net - ASP 按钮不起作用

> ID：11741104
> 
> 赞同：2
> 
> 时间：2012-07-31T13:22:07.200
> 
> 标签：asp.net, .net, sharepoint, button

所以我试图用asp在我公司的sharepoint站点中插入一个按钮。该按钮显示正确，但是当我单击它时，我无法让它转到某个页面。当我单击它时，它只会刷新页面。我希望它转到此链接... [http://www.w3schools.com/](http://www.w3schools.com/)。有人可以帮我解决这个问题吗？

```
 <WebPartPages:WikiContentWebpart frametype="none" chrometype="None" runat="server" partorder="1" __WebPartId="{9852E1FB-0E97-47D1-BC63-0A8D2D953F9D}" id="g_9852e1fb_0e97_47d1_bc63_0a8d2d953f9d">
        <content>
        <div>
            &nbsp;
            <asp:Button runat="server" Text="Add New Item" id="Button1" Font-Bold="True" onclick="window.location='http://www.w3schools.com/'"></asp:Button> </div>
        </content>
    </WebPartPages:WikiContentWebpart> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:29:11.603

```
<asp:Button runat="server" Text="Add New Item" id="Button1" Font-Bold="True"
     OnClientClick="window.location='http://www.w3schools.com/'; return false;">   </asp:Button> 
```

你需要改变两件事：

1.  由于这是客户端处理程序，请使用`OnClientClick`.
2.  设置位置后返回 false 以便不触发默认事件（回发）。

# html - 左浮动图像后垂直居中文本

> ID：11741107
> 
> 赞同：2
> 
> 时间：2012-07-31T13:22:12.020
> 
> 标签：html, css, center

```
<img style="float:left" src="image.jpg"> <center>text</center>
<hr style="clear:both"> 
```

我想用上面的代码实现的是让一个图像向左浮动，文本垂直居中（而不是像现在这样放在顶部）和水平居中，然后在图像和文本之后有一个水平栏将图像和文本与我的其他内容分开。我不确定如何垂直居中文本而不做一些时髦的东西，比如单行和单列的表格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:32:54.167

试试这个[例子](http://jsfiddle.net/uttara/fuaVF/2/)

如果您的图像所在区域的高度固定，那么您可以给出

`line-height = the height of the image`将文本垂直居中放置

编辑：[另一种方式](http://jsfiddle.net/uttara/fuaVF/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:26:50.430

```
<div>
<img style="float:left" src="image.jpg">text
</div>

img
{
  vertical-align:middle;
} 
```

# google-apps-script - 从 Google 应用脚本自动创建个性化的 Google 表单

> ID：11741108
> 
> 赞同：3
> 
> 时间：2012-07-31T13:22:13.410
> 
> 标签：google-apps-script

我想使用 Google Apps 脚本创建个性化表单，但在文档中找不到方法。例如，对于不同的用户，问题将是：

*   形容一棵“树”
*   形容一座“山”
*   形容一条“河”

... 等等

这可以通过 Google Apps 脚本实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-02T18:24:45.910

现在是 2014 年，是的，您可以制作动态表格：

您可以在三个地方更改表单。

1.  您可以预先创建几个标准表单，并为每个不同的用户或用户组提供不同的表单：首先制作第一个表单。然后制作一个脚本，将此表单邮寄给您想要的用户，然后遍历所有项目并替换文本。（请参阅本文底部的代码）

2.  您可以创建一个标准表单，然后每次在提供表单之前替换某些文本。这可以通过**onOpen()**触发器来完成。

注意：这可能不像记录的那样工作。我无法使用此方法，并且 onOpen() 仅用于打开文档以进行编辑而不是用于填充。我不想深入探讨，但这似乎与文档相反，文档指出 OPEN-FOR-EDITING 限制仅适用于可安装触发器，而不适用于简单触发器。

1.  在每个用户提交表单后，在运行 setQuiz() 函数的已安装触发器中，触发器设置为在提交时动作。每次用户提交响应时，替换上面#1 中的文本。这可行，但是，如果下一个用户在功能完成替换表单中的所有文本之前单击，下一个用户可能会在替换之前获得表单的部分内容！

不是一个很好的主意。

这是第一个解决方案（和第三个）的代码

```
 function setQuiz(keyword, replacement){
    var keyword = ...
    var replacement = ...
    var form = FormApp.getActiveForm();
    var items = form.getItems();
    var txt;
    for (i=0; i<items.length; i++){
        txt = items[i].getTitle();
        txt = txt.replace(replacement, keyword);
        items[i].setTitle(txt);
        txt = "";
        txt = items[i].getHelpText();
        txt = txt.replace(replacement, keyword);
        items[i].setHelpText(txt);
     }
     return form;
     // CREATE A COPY of the form
     // and send email with link to the form's COPY in next method, which will be done, only after this method replaced all texts. (see issue with solution 3)
     // note you'll have to iterate between the replacement texts each time. So if you start out with tree to mountain, you must remember to change mountain to river... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:55:22.030

简短的答案在评论中。稍微详细一点的答案是

1.  创建电子表格。在那里填充一对列，如下所示

> ```
> user1@email.com      tree
> user2@email.com      mountain
> user3@email.com      river 
> ```

1.  在您的脚本中：打开电子表格，将包含填充列的范围读取到数组中。[此处](https://developers.google.com/apps-script/storing_data_spreadsheets)和[此处的](https://developers.google.com/apps-script/service_spreadsheet)文档
2.  在您的脚本中：使用`Session.getActiveUser().getEmail()`函数获取用户电子邮件，在数组中找到电子邮件。
3.  在您的脚本中：创建带有标签的表单。标签文本应该类似于`label.setText('Describe a "' + usersWord + '"');`

# php - 使用 simplepie 和 codeigniter 列出特定提要类型旁边的集合图标

> ID：11741109
> 
> 赞同：0
> 
> 时间：2012-07-31T13:22:16.910
> 
> 标签：php, arrays, codeigniter, rss, simplepie

我有一个小问题，希望有人能帮我解决。

下面复制的是一段代码，它转到我的数据库模型并返回一个带有 URL 和提要类型的数组。用户输入他们是否使用过 Twitter 名称、博客网站等。

但是，要使用 simplepie 解析这些数据，我需要传递一个 URL 数组......并且我失去了我的“类型”选项。无论如何我可以将它添加回 simplepie 项目，以便如果用户选择了特定类型的提要，我可以显示特定图标。

```
$feed = $this->profile_model->get_module_feed();

    $feedarr = array();
    foreach($feed['data'] as $feeds) {
        if ($feeds['type'] == 1 ) {
            $i = "http://api.twitter.com/1/statuses/user_timeline.rss?screen_name=" . $feeds['rss'];
        }
        if ($feeds['type'] == 2 ) {
            $i = "http://search.twitter.com/search.atom?q=" . $feeds['rss'];
        }
        if ($feeds['type'] >= 3 ) {
            $i = $feeds['rss'];
        }

        $d = $feeds['type'];

        //else $i = $feeds['rss'];

        echo $i . " " . $d . "<br />";

        array_push($feedarr, $i);
    }

    $this->simplepie->set_feed_url($feedarr);
    $this->simplepie->enable_cache(false);
    $this->simplepie->init();
    $this->simplepie->handle_content_type();

    $data = $this->simplepie;

    foreach($data->get_items() as $item) { ?>
        <h2><a href="<?php echo $item->get_permalink(); ?>"><?php echo $item->get_title(); ?></a></h2>
        <p><?php echo $item->get_description(); ?></p>
        <p><small>Posted on <?php echo $item->get_date('j F Y | g:i a'); ?></small></p>
    <?php

    }

    }
}

?> 
```

例如，如果 $feed['type'] 是 1 我想显示与 1 关联的图像

希望有人可以提供帮助，因为我有点难过！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:05:38.377

您可以使用单个提要项的`feed`属性来获取它的订阅 url，并尝试将其与您用于获取的提要 url 匹配。这是一个简化的示例：

```
// array with unique feed url => feed type (icon)
$feed_types = array(
    'http://feed.one.com/' => 'type1',
    'http://feed.two.com/' => 'type2',
);

$pie = new SimplePie;
$pie->set_feed_url(array_keys($feed_types));
$pie->enable_cache(false);
$pie->init();
$pie->handle_content_type();

foreach ($pie->get_items() as $item) {
    $feed_url = $item->feed->subscribe_url();
    $type = isset($feed_types[$feed_url]) ? $feed_types[$feed_url] : 'unknown type';
    print $type;
} 
```

只要您使用相同的 url 来获取嵌入到提要结果中的内容，该`subscribe_ul()`方法的结果应该与`set_feed_url()`.

# titanium - 当用户滚动到表格视图的底行时，如何在 Titanium 中实现自动数据分页？

> ID：11741110
> 
> 赞同：1
> 
> 时间：2012-07-31T13:22:18.940
> 
> 标签：titanium, appcelerator, titanium-mobile, appcelerator-mobile

我正在开发一个 Titanium 项目，该项目有数百条用户可以滚动浏览（想想音乐专辑/歌曲）的不同类别的记录。

有没有人知道当用户滚动到底部时如何使用滚动表视图来获取下一组数据？我知道如何使用 jQuery 在网页上执行此操作，但不确定如何使用表格视图实现它？

根据获取的数据大小，我可能会将其缓存在本地数据库中，但不确定我会达到什么样的大小限制。我只是不想拥有一个需要用户最初下载的非常大的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:08:55.930

好的，我找到了一个应该是一个很好的起点的示例：

[https://github.com/appcelerator/KitchenSink/blob/master/Resources/examples/table_view_dynamic_scroll.js](https://github.com/appcelerator/KitchenSink/blob/master/Resources/examples/table_view_dynamic_scroll.js)

由此，我将定期对我的 Web 服务进行分页调用。

[编辑] - 看起来 KitchenSink 演示昨天刚刚更新！新链接：[https](https://github.com/appcelerator/KitchenSink/blob/master/Resources/ui/handheld/ios/baseui/table_view_dynamic_scroll.js) ://github.com/appcelerator/KitchenSink/blob/master/Resources/ui/handheld/ios/baseui/table_view_dynamic_scroll.js 基于这个新链接，有谁知道这是否仅适用于iOS？

# ios - 直接从网站安装 iOS 应用程序 - 无需密码、无需 iTunes、无需 UDID

> ID：11741111
> 
> 赞同：14
> 
> 时间：2012-07-31T13:22:26.280
> 
> 标签：ios, installation, silent

我刚刚从一个网站安装了一个应用程序 - 没有配置文件，没有 UDID，什么都没有。它刚刚开始安装。这怎么可能？我没有越狱，也没有运行新的 beta 6。安装完成后，我点击了它，它问我是否确定要运行这个应用程序。

[链接到“静默”安装的应用程序](http://cbreemail.com/collect/click.aspx?u=okCnMhIBMSuY7zcQkoxZ2g==&rh=ff002b084fc84afb9d4ea872ca4ca31845ee6c7d)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-31T22:10:26.227

他们似乎有一个企业开发者帐户，可以通过无线方式分发到任何 iPad，而无需添加每个设备的 UDID。

提供此类应用程序的过程类似于为您的“普通”开发人员帐户提供 AdHoc 分发。您构建您的应用程序以进行分发并将 .ipa 包和清单 .plist 文件上传到您的服务器。然后，您可以使用这样的链接使应用程序可供用户下载：

```
<a href="itms-services://?action=download-manifest&url=http://example.com/manifest.plist">Install App</a> 
```

与企业开发人员帐户的唯一区别是，您不必为要使用的每台设备提供 UDID。该链接适用于任何设备。

# aptana3 - 将 Aptana Studio 设置为不使用 ^M 字符

> ID：11741113
> 
> 赞同：0
> 
> 时间：2012-07-31T13:22:35.087
> 
> 标签：aptana3

我一直在尝试在 Aptana Studio 3 中找到任何允许我不使用 ^M 字符作为换行符的设置，因为我在 linux 上工作，这使得当我使用 VIM 打开时代码非常难看。

我已经多次查看设置，并进行了一些谷歌搜索，奇怪的是我没有找到任何适用的东西。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:31:37.447

`:set ff=dos`您可以尝试在 vim 中执行以使用相同的行结尾，而不是让 Aptana Studio 3 使用不同 的行尾。

# php - 通过 PHP 翻译文件

> ID：11741115
> 
> 赞同：-1
> 
> 时间：2012-07-31T13:22:41.123
> 
> 标签：php, translate, subtitle

假设有一个电影字幕文件（或其他文件）必须翻译成另一种语言，你知道手动这项工作并不容易，所以我想创建一个软件（基于网络或二进制）来翻译这个文件内容（不包括后缀）进入我的语言。我希望，你明白我的意思:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T13:25:18.153

那里已经有软件，请参阅链接：[Google Translate API](https://developers.google.com/translate/)

# typo3 - TYPO3 - 开发：在自定义扩展中调整图像大小

> ID：11741118
> 
> 赞同：1
> 
> 时间：2012-07-31T13:22:49.870
> 
> 标签：typo3

PHP中这个Typoscript的等价物是什么？

```
10 = IMAGE
10.file{
    width = 400
    height = 300
    import = uploads/pics/
    import.field = image
} 
```

我猜在 TYPO3 库中也有同样的功能。我已经安装了 Imagemagick。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:39:51.647

在您的分机的 pi1 类中：

```
$mediaArray = explode(',', $row['media']);
$imgConf = array();
$imgConf['file'] = 'uploads/media/'.$mediaArray[0];
$imgConf['altText'] = $row['nav_title']?$row['nav_title']:$row['title'];
$imgConf['file.'] = $conf['somePreset.']['file.'];
$image = $this->cObj->IMAGE($imgConf); 
```

在 TypoScript 模板中：

```
plugin.tx_myext_pi1.somePreset.file {
  maxW = 320
  maxH = 130
} 
```

您还可以通过替换直接在 PHP 中设置尺寸：

```
$imgConf['file.'] = $conf['somePreset.']['file.']; 
```

内联`array()`：

```
$imgConf['file.'] = array(
  'maxW' => '320',
  'maxH' => '130',
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:28:18.713

这取决于您的 TYPO3 配置（在安装程序工具中）。它要么使用 ImageMagick（或 GraphicsMagick）（它们是外部工具），要么使用 GD2（通常包含在 PHP 安装中的 PHP 库）。

要查看图像大小调整的示例，请咨询 Google。有很多可用的例子。

# git - 将非裸存储库转换为裸存储库的警告：“似乎克隆了一个空存储库”

> ID：11741121
> 
> 赞同：2
> 
> 时间：2012-07-31T13:22:56.397
> 
> 标签：git

我正在使用以下命令将现有的非裸仓库转换为裸仓库：

```
git clone --bare -l non_bare_repo new_bare_repo 
```

但是，我收到警告说

> 您似乎克隆了一个空存储库

为什么会发生这种情况，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:44:16.263

转到隐藏`.git`文件夹并编辑`config`文件：

```
[core]
    bare = true 
```

然后删除所有本地副本文件，您将拥有裸存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-26T00:59:31.913

当您克隆空存储库时会出现此警告：没有提交的存储库。

当然，这只是一个警告：这意味着结果对你来说可能没问题。

Git 会警告你这一点，因为通常你会克隆一个 repo 来获取和处理它的内容。所以看起来它可能是一个错误 - 警告你 - 你正在克隆一个空的 repo。

请注意，当您克隆没有提交的存储库时，您*不会*获得源存储库中的任何工作文件。

因此，在您的情况下，您的非裸仓库中的工作文件不会被复制到裸仓库（显然，因为裸仓库不能有工作文件）。

这意味着做你所做的事情可能更合乎逻辑的方式是

```
 git init --bare new-bare-repo 
```

这样做可以避免暗示您除了制作一个空的裸回购之外还取得了任何成就。

# c - 使用 fprintf 调试调用 C DLL 的 MFC 程序

> ID：11741125
> 
> 赞同：0
> 
> 时间：2012-07-31T13:23:10.197
> 
> 标签：c, mfc

我有一个 MFC 程序，它调用一个 C dll，它在发布时崩溃，但在调试中没有。我尝试使用 fprintf 将消息写入文件，这适用于第一次通过程序。但是，程序在第二次运行计算时会崩溃。

在将调试日志文件作为 C 例程顶部的第一个可执行语句写入后，我立即关闭它。信息在第一次计算后写入日志文件，但不是在第二次计算期间。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T01:43:01.723

在处理此类需要日志记录工具的问题时，我通常会编写一个调用日志记录的函数。然后我将该函数包装在一个允许我启用或禁用日志记录的宏中。作为其中的一部分，我有时也会使用调试级别指示器，这样就不会将所有日志都放入日志文件中。

日志记录函数将作为一个单独的小型库单独存在于一个文件中。将有一个包含文件，其中包含日志库函数原型和一个用于启用或禁用日志记录的宏。

我发现根据应用程序的类型，有些事情可能对日志有帮助，例如将每个日志的时间戳记到秒或毫秒。我还发现，使用标准行长可以更轻松地在文本编辑器中查看日志。了解源文件的路径以及源代码行号会很有帮助。

以下代码是徒手编写的，尚未经过测试甚至编译，因此其中可能有一两个错误。

实际的日志记录函数，让我们调用它将`LogWriteLog()`被包装在一个宏中，如下所示：

```
#define LOGISSUELOG(level,logtext)  LogWriteLog(level, logtext, __FILE__, __LINE__); 
```

通过使用宏，您可以通过更改宏定义来启用或禁用日志记录。这个宏还会自动生成源文件的路径和日志的源行号。

为此，当我想将变量作为日志的一部分时，我有时会将其包装到以下预处理器代码序列中。大括号允许在源中插入多行并具有局部范围的 char 变量。

```
#if defined(LOGISSUELOG)
{
    char  xBuff[128];
    sprintf (xBuff, "value 1 %d, error %d", iValue, iErrorStatus);
    LOGISSUELOG(4, xBuff);
}
#endif 
```

简单的日志库只有几个功能，一个是打开日志文件并指定调试级别，第二个是实际执行日志，第三个是完成后关闭日志文件。

使用标准 CI/O 例程，实际的日志记录功能将如下所示。你也需要`string.h`和`stdio.h`为此。此外，您可能需要考虑是否在每次重新启动时截断文件，或者是否要对文件进行追加。

我也这样做是检查文件大小以及当它达到一定大小时`fseek ()`到文件的开头环绕。如果你正在做环绕，时间戳几乎成为必需品。如果进行环绕真的使所有日志行的标准线宽成为必要，那么事情就会排成一行。

```
 // allocate the file scope globals used by the logging library
    static FILE  *fpLogWriteLog = 0;
    static int   iLogDebugLevel = 0;

    int LogOpenLog (int iDebugLevel, char *aszLogFilePath)
    {
        // open the log file for writing, truncating what is there already
        fpLogWriteLog = fopen (aszLogFilePath, "w");
        iLogDebugLevel = iDebugLevel;

        return (fpLogWriteLog == 0) ? 0 : 1;
    }

    void LogCloseLog (void)
    {
        if (fpLogWriteLog)
            fclose (fpLogWriteLog);
    }

    // allow the debug logging level to be changed.
    //return the current value so that it can be used in another call to set it back.
    int LogChangeLogLevel (int iDebugLevelNew)
    {
        int iDebugLevelSave = iLogDebugLevel;

        iLogDebugLevel = iDebugLevelNew;
        return iDebugLevelSave;
    }

    // write a log to the log file
    int LogWriteLog (int iDebugLevel, char *aszLogText, char *aszFileName, int iLineNo)
    {
          int iRetStatus = 0;

          if (fpLogWriteLog && iDebugLevel < iLogDebugLevel) {
            int iLen = strlen (aszFileName);

            // we will keep only the last 30 characters of the source file path
            if (iLen > 30)
                iLen = 30;
            else
                iLen = 0;

            // use print specifiers to provide the same line width for the output log
            // use %-60.60s to print log text in case of print format specifiers in it
            fprintf (fpLogWriteLog, "%3.3d %-30.30s - %6.6d: %-60.60s", iDebugLevel, aszFileName + iLen, iLineNo, aszLogText);
            fflush (fpLogWriteLog);
            iRetStatus = 1;
          }
          return iRetStatus;
    } 
```

# c# - 服务/API 设计模式 - 首选方法是什么？

> ID：11741126
> 
> 赞同：0
> 
> 时间：2012-07-31T13:23:11.730
> 
> 标签：c#, java, design-patterns

对于一个相当简单的问题，我正在努力使用两种不同的设计方法。

我有一项服务（在一般意义上，不是 Web/SOAP 等）：

*   接班`Input`_
*   用于`Input`处理和创建`Output`本质上只是数据的类，所有这些都依赖于输入数据。

两种不同的设计方法如下：

*   使用一个`OutputCreator`知道如何创建和填充的类，`Output`并将其保留`Output`为基本的 POCO。拥有所有的 `OutputCreator`处理逻辑，`Output`非常简单，不能被滥用。
*   或者，将`Input`直接传递给特定类型的`Output`类。每种类型都`Output`知道如何处理`Input`，因此它也支持行为。关键`Output`数据将由每种不同类型`Output`将实现的接口定义。

第一种方法意味着我可以将所有处理逻辑置于我的服务内部。第二个意味着我不需要`Creator`封装了该逻辑的类，但我可能会暴露更多（加上它可能违反 SRP）。

哪种方法更接近最佳实践？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:37:47.210

这在很大程度上取决于您想要实现的目标。

如果您的服务必须具有一定的响应性，那么一种队列似乎就足够了。

这表示：

您的服务接收`Input`并将其排入`InputQueue`.

然后您`OutputCreator`定期从另一个线程读取该队列，创建您的`Output`并将其放在`OutputQueue`. 如果这是可能的，并且您的结果可以异步传递，即通过消息，那么您就完成了。

添加到队列和删除可以在线程中完成，因此在相应队列被阻塞时不会阻塞 InputThread 或 OutputThread。

如果您`Input`期望`Output`结果，Proactor 模式将解决这个问题。这实现起来更复杂，但在以下 PDF 中对其进行了很好的解释：[Doug Schmidt 关于 Proactor 模式 Proactor](http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CF4QFjAB&url=http://www.cs.wustl.edu/~schmidt/PDF/proactor.pdf&ei=Lt8XUNeaBIzQsgacxoDQBw&usg=AFQjCNFoNeWioIF2nqgsmIsjIi403tXOhQ&sig2=fZ2CgSkyuu12a6dRWbV4Fg) 的示例可以是 WebServer。

如果您只需要一些调度，反应器模式（几乎如上所述）是首选的解决方案。 [Doug Schmidt 关于 Reactor 模式](http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CFcQFjAB&url=http://www.cs.wustl.edu/~schmidt/PDF/reactor-siemens.pdf&ei=KuAXUPPJHIfPtAb9-oDwCg&usg=AFQjCNHLIcRPZwBOARYZcxMI9aQn6XMonw&sig2=RvQXr19bUTocTEXt3-haOg) Reactor 在 C# 或 Java 中实现起来并不难。Reactor 的一个示例可以是中央日志服务器，它将来自不同客户端的 Logentries 写入服务器端日志。

最灵活的是活动对象模式，但最难实现。它甚至将方法调用与方法执行分离。在此处阅读更多内容：[Doug Schmidt 关于活动对象 活动对象](http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFQQFjAA&url=http://www.cs.wustl.edu/~schmidt/PDF/Act-Obj.pdf&ei=fuAXUPy5GMaLswarnYDICw&usg=AFQjCNH92aJsZ6V7h8crcodsk7w12Z8Psg&sig2=WfIFvmM6Dxl8ZmF-mDVAzQ) 的一个​​示例是 CORBA ORB。

# php - 通过 PHP 将文件提交到 Desire2Learn Dropbox

> ID：11741127
> 
> 赞同：0
> 
> 时间：2012-07-31T13:23:14.253
> 
> 标签：php, api, rest, dropbox, desire2learn

我正在尝试使用 PHP 将文件提交到[Desire2Learn](http://www.desire2learn.com) Dropbox。我已经在代理上收集了文件没问题；它正在尝试将文件从代理传输到出现问题的 Dropbox。我正在使用他们的[Valence API](http://docs.valence.desire2learn.com/index.html)。

进行此调用的用户上下文在系统上有足够的权限来执行此操作。

错误是“发生未知错误”。

```
$attachment=$_FILES["file"]["tmp_name"];
$attachmentName=$_FILES["file"]["name"];
$type=$_FILES["file"]["type"];
$file_name_with_full_path="files_dir/" . $_FILES["file"]["name"];
$file_to_upload = array('file_contents'=>'@'.$file_name_with_full_path); 

require_once 'libsrc/D2LAppContextFactory.php';
$errorArray = array(
    D2LUserContext::RESULT_OKAY => "Success",
    D2LUserContext::RESULT_INVALID_SIG => "Invalid signature.",
    D2LUserContext::RESULT_INVALID_TIMESTAMP => "There is a time skew between server and local machine.  Try again.",
    D2LUserContext::RESULT_NO_PERMISSION => "Not authorized to perform this operation.",
    D2LUserContext::RESULT_UNKNOWN => "Unknown error occured"
);

$port=443;
$host="subdomain.domain.com";

session_start();
foreach (array('appId', 'appKey', 'userId', 'userKey') as $e) {
    if (!isset($_SESSION[$e]) || $_SESSION[$e] == '') {
        die("Missing $e.  Please authenticate first.");
    }
}

$appKey = $_SESSION['appKey'];
$appId = $_SESSION['appId'];
$userId = $_SESSION['userId'];
$userKey = $_SESSION['userKey'];
session_write_close();

$authContextFactory = new D2LAppContextFactory();
$authContext = $authContextFactory->createSecurityContext($appId, $appKey);
$opContext = $authContext->createUserContext($host, $port, true, $userId, $userKey);

$target_url = $opContext->createAuthenticatedUri('/d2l/api/le/1.0/00004/dropbox/folders/00007/submissions/mysubmissions/', 'POST');

$ch = curl_init(); 

$random_hash = md5(date('r', time()));
$comment = array('Text'=>'some comment','HTML'=>null);
$comment = json_encode($comment);

$fp = fopen("files_dir/" . $_FILES["file"]["name"], 'rb');

ob_start(); //Turn on output buffering 
fpassthru($fp);
$filedata = ob_get_clean();

$request_pre="--".$random_hash."\r\nContent-Type: application/json\r\n".$comment."\r\n--".$random_hash."\r\nContent-Disposition:form-data; name=\"\"; filename=".$attachmentName."\r\nContent-Type:".$type."\r\n\r\n".$filedata."\r\n--".$random_hash."--\r\n";

$request=nl2br($request_pre);

$length=strlen($request);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("HTTP/1.1", "Content-Type: multipart/mixed; boundary=".$random_hash,"Host:".$host, "Content-length: ".$length));
curl_setopt($ch, CURLOPT_URL,$target_url); 
curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
curl_setopt($ch, CURLOPT_POST,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $request); 
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLINFO_HEADER_OUT, true);
curl_setopt($ch, CURLOPT_CAINFO, getcwd().'/cacert.pem');
$response = curl_exec($ch);
$httpCode  = curl_getinfo($ch, CURLINFO_HTTP_CODE);
$contentType = curl_getinfo($ch, CURLINFO_CONTENT_TYPE);
$responseCode = $opContext->handleResult($response, $httpCode, $contentType);
$error_no = curl_errno($ch);

fclose($fp);

if ($responseCode == D2LUserContext::RESULT_OKAY) {
    $ret = "$response";
    $tryAgain = false;
} elseif ($responseCode == D2LUserContext::RESULT_INVALID_TIMESTAMP) {
    $tryAgain = true;
} else {
    $ret = "{$errorArray[$responseCode]}<br/>$response";
    $tryAgain = false;
}
if ($error_no == 0) {
    $error = 'File uploaded succesfully.';
} else {
    $error = 'File upload error.';
}
echo "error: ".$error."<br/>";

curl_close ($ch); 
echo $result; 
```

POST 字段看起来像这样（该文件对我来说看起来不正确'86761'）。

```
--565cef73df4da0f072b9626f4fae7e50
Content-Type: application/json
{"Text":"some comment","HTML":null}
--565cef73df4da0f072b9626f4fae7e50
Content-Disposition:form-data; name=""; filename="example.pdf"
Content-Type:application/pdf
{86761}
--565cef73df4da0f072b9626f4fae7e50--

Unknown error occured
error: File uploaded successfully 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:49:47.283

我会尝试先添加一个 text/plain 类型的简单文本文件，看看是否可行。使用您的代码（经过一些修改），我能够将文件提交到 Valence 中的保管箱。

```
// read file
$fp = fopen($location, 'r');
$contents = fread($fp, filesize($location));
fclose($fp);

$request_pre="--".$random_hash."\r\nContent-Type: application/json\r\n\r\n{\"Text\":\"Some comment\", \"HTML\":null}\r\n\r\n--".$random_hash."\r\nContent-Disposition: form-data; name=\"\"; filename="."\"test1.txt\""."\r\nContent-Type: ".$type."\r\n\r\n".$contents."\r\n\r\n--".$random_hash;

$request = $request_pre; //nl2br($request_pre);

$length=strlen($request);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("HTTP/1.1", "Content-Type: multipart/mixed; boundary=".$random_hash));
curl_setopt($ch, CURLOPT_URL,$target_url); 
curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
curl_setopt($ch, CURLOPT_POST,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $request); 
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLINFO_HEADER_OUT, true); 
$response = curl_exec($ch); 
```

请注意，我发现使用 PHP Curl 不太理想。考虑使用[HTTPRequest](http://php.net/manual/en/class.httprequest.php)包。

# java - 关于 Java 内存泄漏的基础知识

> ID：11741128
> 
> 赞同：3
> 
> 时间：2012-07-31T13:23:14.300
> 
> 标签：java, memory-leaks

我读到[Java 是按值传递的](https://stackoverflow.com/questions/9224517/what-is-a-class-reference-and-an-object)。所以假设我们有这个代码，并说它的`HashMap somehashMap`生命周期比`foo`. 所以 foo 不允许被垃圾回收，即使它已经完成了它的工作，只是因为我们把 foo 放在 Map 中然后忘记从中删除。现在按照我链接到的帖子中答案的逻辑，我们实际上是在传递`foo`对方法的引用的副本，`put()`对吗？在这种情况下，将其`foo`放入`HashMap`不应阻止它被垃圾收集。你能帮我理解这里发生了什么吗？我到底错过了什么？

```
 public void someMethod(){
     Foo foo  = new Foo();
     somehashMap.put(fooKey,foo); 
  } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T13:26:37.577

垃圾收集不适用于引用，但适用于驻留在堆中的*实际*对象。当你把`foo`.`Map``somehashMap`

Java 中的引用在幕后透明地处理。当您将引用放入映射时，*引用*`foo`的副本实际上被传递给方法调用，但底层对象即原始引用和复制引用是相同的。让我们看看下面的代码片段：*`put``new Foo()`*

 *```
public void doIt() {
  Object f1 = new Object();
  Object f2 = f1;
  Object f3 = f2;
} 
```

在上面的代码片段中，执行完成后有多少对象被垃圾回收`doIt`？这只是`new Object()`我们创建的单曲。其余都是简单的引用或别名，用于指向同一个对象。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-31T13:27:26.327

只要对象是可访问的，它就不能被垃圾收集。在您的情况下， foo 可以通过`Foo foo = someHashMap.get(fooKey);`所以不能被垃圾收集，只要它在地图中并且地图本身是可以访问的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-31T13:28:18.263

我认为您不清楚参考实际上是什么。

'foo' 是对对象的引用，你说得对，将其添加到 hashmap 会有效地创建对同一对象的第二个引用。

然而，这正是为什么当你的 'foo' 变量消失时对象不会被垃圾回收的原因。仅当没有引用时才会对对象进行垃圾收集 - 您从一个引用 (foo) 开始，然后创建第二个引用（在 hashmap 内），第一个引用在函数结束时消失，但您仍然有一个引用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-31T13:51:44.210

试一张图：

![在此处输入图像描述](../Images/81b114e10691f3c1f9f1f7cc2913bcde.png)

盒子是对象。未装箱的字母是变量。

一开始你只有你的哈希图，我假设它在你的函数被调用之前就存在，然后继续存在。

然后`new Foo()`创建一个新对象，并`f=`创建一个引用它的变量。

然后`hashmap.put(k,f)`在 hashmap 中创建一个条目，它指向与 f 相同的对象。

然后，当您退出该函数时，局部变量`f`将不复存在，但其他所有内容都将保留。

垃圾收集器不会删除 Foo 对象，因为 hashmap 仍然指向它。这就是你想要的——如果你以后调用`hashmap.get(k)`，你会期望得到那个 Foo 对象。

如果您从 hashmap 中删除该条目 -`hashmap.remove(k)`那么 Foo 对象可以被垃圾收集。

如果 hashmap 本身不再存在，则可以对 Foo 对象进行垃圾收集。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-31T13:27:18.413

大多数带有垃圾收集器的语言都支持某些类型的[弱引用](http://en.wikipedia.org/wiki/Weak_reference)。例如，您可以在 Java 中找到一个弱哈希映射实现。如果将 foo 对象放入弱哈希映射并且垃圾收集器将运行，那么如果不存在指向 foo 的其他指针（周指针除外），则 foo 对象将被收集并从弱哈希映射中删除。有时您可以通过这种方式避免内存泄漏。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-31T13:28:02.893

只要 foo 在 HashMap 中，它就不能被垃圾收集，因为 Java 不知道你永远不会再使用它。foo 可以在*所有*引用结束后立即被垃圾回收。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-31T13:28:20.413

> 我们实际上是将 foo 引用的副本传递给 put() 方法，对吗？

**是**的，Java 正在将实习映射持有的引用的副本传递`reference`到`same object`内存中 ( `heap`)，因此在您的映射之前它没有资格进行 GC。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-31T13:27:34.503

在这种`put`方法的情况下，按值传递是对 的引用的值`foo`。既然`foo`是引用计数，只要`somehashMap`持有引用，`foo`就不会被垃圾回收。

我确实在一些我继承的代码中发现了这样的内存泄漏，其中有人使用地图缓存图像，但是当再次需要图像时，不是抓取缓存的图像，而是创建了一个新的图像并将其推入地图一把新钥匙。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-07-31T13:28:25.173

Java 确实是按值传递的。但是，您是按值传递*引用，而不是对象的**实例*。*

# java - Hibernate 和 SQL Server 2005 之间的连接异常

> ID：11741136
> 
> 赞同：0
> 
> 时间：2012-07-31T13:23:38.300
> 
> 标签：java, sql-server, hibernate

我想将我的 java 项目连接到 SQL Server 2005 数据库，但不幸的是我遇到了一些问题。我正在使用 Windows 身份验证（我的电脑名称是 BOURKADIXP，没有密码），这是我的 hibernate.cfg：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">net.sourceforge.jtds.jdbc.Driver</property>
        <property name="hibernate.connection.password">azerty</property>
        <property name="hibernate.connection.url">jdbc:jtds:sqlserver://127.0.0.1/DBM6000</property>
        <property name="hibernate.connection.username">sa</property>
        <property name="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</property>
    </session-factory>
</hibernate-configuration> 
```

这是我遇到的例外：

```
 org.hibernate.exception.JDBCConnectionException: Getting database metadata
Getting database metadata
  java.sql.SQLException: Network error IOException: Connection refused: connect
  Network error IOException: Connection refused: connect
    java.sql.SQLException: Network error IOException: Connection refused: connect
    Network error IOException: Connection refused: connect
    java.net.ConnectException: Connection refused: connect
    Connection refused: connect 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:02:46.933

Are you sure that tcp/ip connections is allowed in your server configuration? If yes, check that you are using correct port number for connection. Or if you want to connect throught named pipe, set namedPipe=true; property in the url string.

# xml - 如何将对象数据源数据保存到磁盘？

> ID：11741145
> 
> 赞同：1
> 
> 时间：2012-07-31T13:23:55.890
> 
> 标签：xml, vb.net, data-binding, datasource

我有一个项目，其中数据来自网络（不是数据库），并且有自己的解析特性。

解析过程将数据存储在一个类的对象数组中，该类对象中包含`Public Property`.

此类及其数组用作 BindingSource 的对象数据源，该 BindingSource 将值显示为屏幕上 DataGridView 中的漂亮表格。

现在我需要将这些数据保存到磁盘（并能够在稍后将其取回以发送回网络）。

我以前使用过将 DataSet 保存到 XML 的工作，实现起来很容易，但这让我感到困惑。

所有这些信息已经在代码中，所以我认为我不应该逐行输入，每个属性都能够保存它。我一直在尝试以某种方式将数据从活页夹中取出到新的 DataSet 中，这样我就可以使用 XML 方法，或者以某种方式从活页夹中获取到磁盘，甚至直接访问 DataSource 对象，但没有成功。

我真的不在乎它是否可以作为磁盘中的纯文本读取，只要我可以稍后将它读回 DataSource 对象。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:32:49.040

序列化呢？

```
Dim fileStream As Stream = File.Open("somefile.txt", FileMode.Create)
Dim xmlFormatter As New System.Xml.Serialization.XmlSerializer(GetType(YourClass))
xmlFormatter.Serialize(fileStream, anObjectOfYourClass)
fileStream.Close() 
```

为此，您必须使用`Serializable()`属性注释您的类。这将存储除具有该属性的属性之外的任何`NonSerialized()`属性。当然，类中的所有类型都应该是可序列化的。

要稍后加载数据，过程类似，不同之处在于您使用`xmlFormatter.Deserialize()`.

另请参阅[文档。](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:33:19.017

为什么不直接使用[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)来保存您的对象？

* * *

**例子：**

```
Class MyData
    Public Property Data1 As String
    Public Property Data2 As Int32
    Public Property Data3 As String()
End Class

Sub Main

    Dim d = New MyData() With { _
        .Data1 = "FooBar", _
        .Data2 = 1337, _
        .Data3 = new String(){"Foo", "Bar"} _
    }

    Dim serializer = new System.Xml.Serialization.XmlSerializer(gettype(MyData))

    '' Saving an object
    Using fs = new System.IO.FileStream("c:\users\username\mydata.xml", System.IO.FileMode.Create)
        serializer.Serialize(fs, d)
    End Using

    '' Loading the saved data to a new object        
     Using fs = new System.IO.FileStream("c:\users\username\mydata.xml", System.IO.FileMode.Open)
        Dim new_one = CType(serializer.Deserialize(fs), MyData)
        '' Do something
    End Using

End Sub 
```

**结果文件内容：**

```
<?xml version="1.0"?>
<MyData xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Data1>FooBar</Data1>
  <Data2>1337</Data2>
  <Data3>
    <string>Foo</string>
    <string>Bar</string>
  </Data3>
</MyData> 
```

# ios - 奇怪的 stringByAddingPercentEscapesUsingEncoding 问题

> ID：11741148
> 
> 赞同：0
> 
> 时间：2012-07-31T13:24:16.327
> 
> 标签：ios, search, searchbar

今天的两个问题！

在我的搜索应用程序中，我从搜索方法开始使用这一行：

```
 myQuery = [searchBar.text stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

然后我继续该方法的其余部分。问题是由于某种原因，它不允许我在模拟器或实际 iPhone 上搜索多个单词。

所以如果我这样写：

```
myQuery = searchBar.text;
    [myQuery stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

它将允许多个单词搜索，但在真正的 iPhone 上，字符串以某种方式变为空。在模拟器上它工作正常，但在真手机上却不行。

所以第一个问题是有人能看出这里有什么问题吗？其次，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:36:52.087

它为空，因为您没有分配返回的字符串。除此之外，这两个代码片段实际上是同一件事（顺便说一句，您如何尝试“搜索”？例如，您是否将其作为请求发送到某个服务器？）。试试这个：

```
theQuery = searchBar.text;
myQuery = [theQuery stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

# html - 布局损坏 - 不明白为什么

> ID：11741150
> 
> 赞同：1
> 
> 时间：2012-07-31T13:24:18.253
> 
> 标签：html, css

[由于某种原因，我的页面](http://www.inside-guides.co.uk/brentwood/pages/links.html)的布局被破坏了 - #main-content div 应该横跨页面延伸到右侧导航（固定为 348 像素）。

真的不知道为什么，如果有人可以看一下代码检查器，那会很棒..如果您需要 CSS 和 html，请告诉我。

非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:39:02.543

从 中删除`max-width`属性`content-wrapper`并将`width`包装器的设置为 98.6%（占您的边距）

请注意，您可能必须对其他一些包装的 div/元素重复此操作，以防您有其他元素比预期的短。

我用 Chrome 测试了这个解决方案，它运行良好 - 完全符合我的预期

编辑：

进一步解释为什么 max-width 不起作用：

`max-width`和`min-width`属性可以被认为是流体和静态尺寸元素之间的中介。没有指定宽度但具有指定最小宽度的元素将按其默认宽度或最小宽度（两者中的较低者）调整大小。同样，没有指定宽度但具有指定最大宽度的元素将设置为其自动宽度，但只会在不超过其最大宽度的范围内扩展。

最小和最大宽度也可以与定义的宽度一起使用。例如，如果您有一个元素，您将其宽度设置为，`width: 70%;`但您不希望该宽度超过 300 像素，您可以设置`max-width: 300px;`该元素不会超过 300 像素，但它可能小于 300 像素，具体取决于容器的大小（这是百分比所指的 - 即，如果宽度设置为百分比，它将是包含元素宽度的百分比）。

真实场景——这是我见过的最小和最大宽度的两种最常见的用法：

*   `min-width`- 情况：您正在创建一个具有流畅布局（调整窗口大小时变宽/变窄）和您希望始终清晰易读的内容部分的网页。您可以设置最小宽度，以便在滚动条出现后该部分具有最小尺寸并且该部分将不再缩小。`min-width`为了这个目的，我在我的新主页上实现了一个（在[这里看到它](http://zacharykniebel.com)- 调整窗口的大小以使其越来越窄，并观察当主要内容 [ `<div id="mainContentBack">`] 部分减小到只有 600px 的宽度时会发生什么 - 那个 div设置为有`min-width: 600px;`）。

*   `max-width`- 我在解释这些属性时描述的场景实际上是我见过的最常见的场景。然而，第二个最常见的情况是开发人员选择在他们的页面（有时甚至是整个部分）上创建一个可调整大小的文本区域（用户可以单击并拖动以更改大小）。他们设置了最大宽度，以便用户不能使元素比指定的更宽。

# javascript - Rangy - 替换 innerHTML 时恢复光标位置

> ID：11741156
> 
> 赞同：0
> 
> 时间：2012-07-31T13:24:30.040
> 
> 标签：javascript, dom, rangy

我正在使用 Rangy 来选择和恢复光标位置。

它做得很好，但它并不是为以编程方式操作用户输入并且在 DIV 的 innerHTML 中替换较短的字符串时设计的。

我在 jsbin 上创建了一个示例，显示了当用户在选择结束时键入一个空格并以编程方式删除该空格时会发生什么：http: [//jsbin.com/ebeqoj/4/edit](http://jsbin.com/ebeqoj/4/edit)

替换的 innerHTML 比 Rangy 尝试恢复的要短，因此它失败并且 DIV 失去焦点。

我将不胜感激有关如何处理此问题的建议。例如，有没有办法指示 Rangy 在新字符串的末尾恢复光标？（我试过使用 `rangy.getSelection().move("character", userInput2.length-1)`但没有成功）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:49:13.603

将插入符号放在内容的末尾`<div>`非常容易：

```
var sel = rangy.getSelection();
sel.selectAllChildren(el);
sel.collapseToEnd(); 
```

对于更一般的情况，您可以创建一个包含从开头`<div>`到插入符号位置的内容的范围，使用`text()`Rangy 范围的方法获取其文本，从该文本中删除空白并测量其长度。演示：

[http://jsbin.com/ebeqoj/5/edit](http://jsbin.com/ebeqoj/5/edit)

# html - 如何在 netbeans 6.9.1 中添加 HTML5

> ID：11741157
> 
> 赞同：-1
> 
> 时间：2012-07-31T13:24:36.903
> 
> 标签：html, netbeans

刚才我已经开始使用netbeans 6.9.1。我想创建一个 HTML5 文件，它会给我拖放事件。谁能告诉我如何做到这一点。netbeans6.9.1 是否支持 HTML5 和 css3。如果不支持如何将 html5 添加到 netbeans..

```
Thanks 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:34:45.440

据我所知，Netbeans 6.9.1 中没有 HTML5 支持，我认为它是在版本 7 中引入的。您可以轻松地将现有的 Netbeans 安装升级到最新版本（7.2 刚刚发布），您的所有设置都将被保存 - 并且如果您需要在以后的版本中放弃的功能，旧版本仍然完全可用。

# windows-phone-7 - 用户控件无法创建实例 [XapCannotFindFileInPackage]

> ID：11741162
> 
> 赞同：0
> 
> 时间：2012-07-31T13:24:46.250
> 
> 标签：windows-phone-7, windows-phone-7.1

在 Windows Phone7 中，我创建了一个 UserControl，我在其中解析一些数据。现在我无法创建该用户控件的实例。

当我从用户控件中删除解析时，我可以创建实例，除非我遇到错误，例如

```
`"Cannot create instance of '<usercontrolname>' 
"XapCannotFindFileInPackage]
Arguments:HelpScreenData.xml 
Debugging Resource String are unavailable.Often the key and
arguments provide sufficient information to diagonise the problem.see
http://go.microsoft.com'/fwlink/?linkid=106663&version5.0.10411.00&
file=system.xml.dll&key=Xml_cannot find file in Xappackage" 
```

我的用户控制代码隐藏

```
 public partial class ques : UserControl
{
    Popup popup = new Popup();
    tutorial tut = new tutorial();   //another usercontrol

    String[] str;
    String[] nam;
    public ques()
    {
        InitializeComponent();

   }
 private void UserControl_Loaded(object sender, RoutedEventArgs e)
    {

        LayoutRoot.Visibility = Visibility.Visible;

        buy_bac.Visibility = Visibility.Collapsed;
        buy_hme.Visibility = Visibility.Collapsed;
        buy_qestim.Visibility = Visibility.Collapsed;
        buy_piti.Visibility = Visibility.Collapsed;
        buy_qual.Visibility = Visibility.Collapsed;
        buy_rent.Visibility = Visibility.Collapsed;
        buy_rep.Visibility = Visibility.Collapsed;
        buy_mre.Visibility = Visibility.Collapsed;

        if (Modules.Programname == "Buyers")
        {
            buy_bac.Visibility = Visibility.Visible;
            buy_hme.Visibility = Visibility.Visible;
            buy_qestim.Visibility = Visibility.Visible;
            buy_piti.Visibility = Visibility.Visible;
            buy_qual.Visibility = Visibility.Visible;
            buy_rent.Visibility = Visibility.Visible;
            buy_rep.Visibility = Visibility.Visible;
            buy_mre.Visibility = Visibility.Visible;
        }
        XDocument doc = XDocument.Load("HelpScreenData.xml");
        string val = doc.ToString();

        XElement doc1 = doc.Descendants("buyer").First();

        var parsedPlist = doc1.Descendants("row");

        int i = 0;
        str = new string[parsedPlist.Count()];
        nam = new string[parsedPlist.Count()];
        foreach (XElement elem in parsedPlist)
        {
            nam[i] = (string)elem.Element("btn_name");
            str[i] = (string)elem.Element("string");
            i++;
        }
    }
    private void i1_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {

        if (nam[0] == buy_bac.Name)
        {

            Modules.msg = str[0];
            if (Modules.msg != null)
            {
                if (popup.IsOpen != true)
                {

                    popup.Child = tut;
                    popup.IsOpen = true;
                    popup.VerticalOffset = 200;
                    popup.HorizontalOffset = 50;
                    popup.IsOpen = true;
                    tut.lb_tut.Text = Modules.msg;
                }
                else
                {
                    popup.IsOpen = false;
                }
            }
            else if (nam[1] == buy_hme.Name)
            {
                Modules.msg = str[1];
                if (Modules.msg != null)
                {
                    if (popup.IsOpen != true)
                    {
                        popup.Child = tut;
                        popup.IsOpen = true;
                        popup.VerticalOffset = 400;
                        popup.HorizontalOffset = 50;
                        popup.IsOpen = true;
                        tut.lb_tut.Text = Modules.msg;
                    }
                    else
                    {
                        popup.IsOpen = false;
                    }
                }

            }
            else if (nam[1] == buy_qestim.Name)
            {
                Modules.msg = str[2];
                if (Modules.msg != null)
                {
                    if (popup.IsOpen != true)
                    {
                        popup.Child = tut;
                        popup.IsOpen = true;
                        popup.VerticalOffset = 400;
                        popup.HorizontalOffset = 50;
                        popup.IsOpen = true;
                        tut.lb_tut.Text = Modules.msg;
                    }
                    else
                    {
                        popup.IsOpen = false;
                    }
                }

            }
        }

    }

    private void i3_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        if (nam[2] == buy_piti.Name)
        {
            Modules.msg = str[3];
            if (Modules.msg != null)
            {
                if (popup.IsOpen != true)
                {
                    popup.Child = tut;
                    popup.IsOpen = true;
                    popup.VerticalOffset = 600;
                    popup.HorizontalOffset = 50;
                    popup.IsOpen = true;
                    tut.lb_tut.Text = Modules.msg;
                }
                else
                {
                    popup.IsOpen = false;
                }
            }

        }
        else if (nam[2] == buy_rent.Name)
        {
            Modules.msg = str[4];
            if (Modules.msg != null)
            {
                if (popup.IsOpen != true)
                {
                    popup.Child = tut;
                    popup.IsOpen = true;
                    popup.VerticalOffset = 600;
                    popup.HorizontalOffset = 50;
                    popup.IsOpen = true;
                    tut.lb_tut.Text = Modules.msg;
                }
                else
                {
                    popup.IsOpen = false;
                }
            }

        }
        else if (nam[2] == buy_qual.Name)
        {
            Modules.msg = str[5];
            if (Modules.msg != null)
            {
                if (popup.IsOpen != true)
                {
                    popup.Child = tut;
                    popup.IsOpen = true;
                    popup.VerticalOffset = 600;
                    popup.HorizontalOffset = 50;
                    popup.IsOpen = true;
                    tut.lb_tut.Text = Modules.msg;
                }
                else
                {
                    popup.IsOpen = false;
                }
            }

        }
        else if (nam[2] == buy_mre.Name)
        {
            Modules.msg = str[6];
            if (Modules.msg != null)
            {
                if (popup.IsOpen != true)
                {
                    popup.Child = tut;
                    popup.IsOpen = true;
                    popup.VerticalOffset = 600;
                    popup.HorizontalOffset = 50;
                    popup.IsOpen = true;
                    tut.lb_tut.Text = Modules.msg;
                }
                else
                {
                    popup.IsOpen = false;
                }
            }

        }
    } 
```

解析的 xml 示例

```
<?xml version="1.0" encoding="utf-8" ?>
<plist version="1.0">
<Main_Screen>
<row>
<btn_name>Buyer Programs</btn_name>
<string>Answer your client’s difficult .</string>
</row>
<row>
<btn_name>Seller’s Programs</btn_name>
<string>What do sellers want s needs.</string>
</row>
</Main_Screen>
 <abssas>
<row>
<btn_name>dat Programs</btn_name>
<string> your client’s </string>
</row>
<row>
<btn_name>my Programs</btn_name>
<string> sellers want s needs.</string>
</row>
</abssas>
</plist> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:08:24.207

您正在尝试加载“HelpScreenData.xml”，但无法解决。确保您已将此文件作为项目的一部分包含在内。

# json - 以纯文本或 JSON 格式发送 REST 响应？

> ID：11741167
> 
> 赞同：3
> 
> 时间：2012-07-31T13:24:59.213
> 
> 标签：json, api, rest

在创建 REST API 时，如果我为 GET 请求返回 JSON 格式的数据，是否也以 JSON 格式发送 POST、PUT、DELETE 和错误消息的响应，或者纯文本就足够了？

例如：

对于我需要返回新添加记录的新 ID 的 POST 请求（即只是数据库中的新自动增量值），响应是否仍然是 JSON 或只是像“1”或“2”这样的纯文本。

PUT 或 DELETE 请求也是如此，我需要说“OK”或“Accepted”，以及“Bad Request”、“Not Found”等错误消息。

纯文本还是 JSON？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T13:27:20.840

使用客户端提供的[`Accept`标头](https://www.rfc-editor.org/rfc/rfc2616#section-14.1)让客户端控制他们想要的内容类型。如果没有提供标头，则使用合理的默认值并**始终**在响应中包含[`Content-Type`标头。](https://www.rfc-editor.org/rfc/rfc2616#section-14.17)有关详细信息，请参阅[RFC2616 的内容协商部分](https://www.rfc-editor.org/rfc/rfc2616#section-12)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T13:26:58.607

理论上，只返回“1”是有效的 JSON。它只是不是数组或关联映射。

对于 OK 和 Accepted，您可以只使用 HTTP 状态代码。没有身体是真正需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:27:39.277

这完全取决于客户的能力。

当然，您实际上不必选择其中一个：您可以使用内容类型协商根据用户代理的接受列表返回不同的表示。

# javascript - 使用基于 id 的 jQuery 选择导航选项卡

> ID：11741168
> 
> 赞同：0
> 
> 时间：2012-07-31T13:24:59.243
> 
> 标签：javascript, jquery, navigation, jquery-ui-tabs

我有一个简单的导航菜单：

```
<ul>
<li><a href="index.php" id="home_menu">Home</a></li>
<li><a href="purchase.php"  class="selected" id="information_menu">Information</a></li>
<li><a href="purchase.php" id="contact_menu">Contact</a></li>
</ul> 
```

我正在尝试设置要选择的正确菜单项。一些菜单会有子菜单，所以我不认为我想通过它的 URL 来做，所以我在每个页面中设置了一个元数据标签，并带有正确的标签 ID：

```
<meta name="selected_nav_tab" content="home" /> 
```

然后通过 jQuery 获取 id：

```
$(document).ready(function () {

//set appropriate nav menu to selected
$('#nav li a').removeClass('selected');

//determine which tab should be selected
var selected_tab = $('meta[name=selected_nav_tab]').attr("content");
}); 
```

如何使用该 id("var selected_tab") 来选择主页选项卡？

就像是：

```
$(#selected_tab).addClass('selected'); 
```

大概是无脑...

谢谢你再次把我从我的脑海中拯救出来，

托德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:26:11.170

试试这个：

```
$('#' + selected_tab + '_menu').addClass('selected'); 
```

您的变量`selected_tab`仅包含`home`或其他内容，但您的变量`id`是`home_menu`这样的，并且`#`是选择器所需要的`id`。

所以正确的选择器会看起来`#home_menu`等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:29:26.247

作为您的 html 代码

你可以试试'_menu'是否总是在那里。

```
$('#' + selected_tab +'_menu').addClass('selected'); 
```

或者如果您想选择检查其内容。

```
$('#nav li a').contains(selected_tab).addClass('selected'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:49:34.213

设置选定的选项卡选项。不过，您首先必须获取要选择的选项卡的索引。

[http://jqueryui.com/demos/tabs/#option-selected](http://jqueryui.com/demos/tabs/#option-selected)

```
// Get jQuery object of the tabs element (assuming #nav is where you use the tabs plugin on)
var $tabs = $('#nav');

// Get selected tab id (this is the id right?)
var selected_tab = $('meta[name=selected_nav_tab]').attr('content');

// Get the index of the tab we are going to select
var selected_index = $tabs.find('li').index($tabs.find('li#' + selected_tab));

// Select the tab
$tabs.tabs('option', 'selected', selected_index); 
```

# asp.net - 如何将超链接值从一个页面上的 Gridview 列传递到另一个页面中的 KPIFrame.Attributes("SRC")

> ID：11741170
> 
> 赞同：0
> 
> 时间：2012-07-31T13:25:18.653
> 
> 标签：asp.net, html, vb.net, iframe

我正在使用一个相当基本的基于 Web 的 KPI 系统，并且正在努力解决这个问题。

我有一个顶级页面，其中包含我们正在跟踪的各种项目及其当前状态的 Gridview。还有一个超链接字段，提供指向外部页面/数据的链接。我需要在当前站点的框架内打开这些链接以保持其外观和感觉。

如果我对 iFrame 的 src 值进行硬编码，它可以正常工作，但我需要做的是将 LeafURL 字段中包含的 URL 传递到 KPIFrame.Attributes("SRC") = "Need something here"

所以问题是如何调用上一页的 URL 详细信息并将其注入新页面的 iFrame src 字段。

这是我主页上的代码。不知何故，我需要下一页从本页的 Gridview 中获取 linktext(LeafURL) 值。

```
 Protected Sub GridView1_RowCreated(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles GridView1.RowCreated

    If e.Row.RowType = DataControlRowType.DataRow Then

        Dim linknew As HyperLink
        Dim linktext as String

        linktext = e.Row.DataItem("LeafURL")
        linknew = e.Row.FindControl("Hyperlink1")

                  If e.Row.DataItem("Status") = "0" Or "1" Then
            linknew.NavigateUrl = ("~/leaf.aspx")

        End If
    End If
End Sub 
```

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:00:04.127

现在都整理好了。解决方案在于正确构造第一页上的查询字符串，以便可以在第二页上引用。如下所示：

第一页上的代码：

```
If e.Row.RowType = DataControlRowType.DataRow Then
    Dim linktext As String = e.Row.DataItem("URL")
    Dim linknew As HyperLink = e.Row.FindControl("HyperLink1")

    linknew.Text = linktext

    linknew.NavigateUrl = "~/Leaf.aspx?URL=" + e.Row.DataItem("URL") 
```

第二页代码：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    KPIframe.Attributes("SRC") = Request.QueryString("URL")

    Label1.Text = Request.QueryString("URL")

End Sub 
```

结果证明比最初解决这个问题要简单得多。

现在让系统工作，其中第 1 页上的 GridView 中的 URL 值被传递到第 2 页并用于确定该页面上 iframe 的 src 值。

# objective-c - 将实例变量复制到 Objective-C 块中

> ID：11741171
> 
> 赞同：4
> 
> 时间：2012-07-31T13:25:38.527
> 
> 标签：objective-c, objective-c-blocks, instance-variables

我有以下代码：

```
- (void)downloadPressed:(id)sender {
    [_download startDownloadWithParser:^id(NSData *rawData) {
        NSString* downloadName = [[_download url] lastPathComponent];

        // ... more code
    }];

    [self reloadView];
} 
```

这段代码位于 a`UITableViewCell`中，众所周知，重用机制应该特别注意..

**我的问题，干净简单：**

如果我在块之后添加以下代码行：

```
_download = nil; 
```

块内的`_download`变量也为零！我希望它得到一个副本，如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T13:30:37.023

如果您希望您的块获取您的 ivar 的副本，请从中创建一个局部变量，并在您的块中使用该本地变量而不是 ivar：

```
-(void)downloadPressed:(id)sender {
    MyDownload *tmp = _download; // Make an independent pointer
    [tmp startDownloadWithParser:^id(NSData *rawData) { // Use the local
        NSString* downloadName = [[tmp url] lastPathComponent];
        // ... more code
    }];
    [self reloadView];
} 
```

该块将在创建块对象时捕获该局部变量的值，从而使所有后续更改`_download`对您的块不可见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T15:03:34.297

`_download`在块中被解释为`self->_download`，因此块捕获`self`而不是`download`。

这解释了为什么设置 `_download = nil`会影响块，解决方案已经给出。

# c++ - mysql 和 matlab mex - libmysqlcppconn 找不到 glibcxx_3.4.15

> ID：11741174
> 
> 赞同：3
> 
> 时间：2012-07-31T13:25:45.500
> 
> 标签：c++, matlab, shared-libraries, mex, mysql-connector

我正在运行 ubuntu 12.04 和 matlab R2012a。

不确定到底是什么问题，但我可以很好地构建我的 mex 文件。但是当它运行时我收到这个错误

```
Invalid MEX-file '/home/br/Documents/MATLAB/langmod/rss2mysql/mexUrl2dbSrc.mexa64':/usr/local/MATLAB/R2012a/bin/glnxa64/../../sys/os/glnxa64/libstdc++.so.6: version `GLIBCXX_3.4.15' not found (required by /usr/local/lib/libmysqlcppconn.so.5) 
```

我觉得特别奇怪，因为如果我在终端中运行以下命令

```
strings /usr/local/MATLAB/R2012a/bin/glnxa64/../../sys/os/glnxa64/libstdc++.so.6 | grep GLIBC 
```

我懂了：

```
GLIBCXX_3.4
GLIBCXX_3.4.1
GLIBCXX_3.4.2
GLIBCXX_3.4.3
GLIBCXX_3.4.4
GLIBCXX_3.4.5
GLIBCXX_3.4.6
GLIBCXX_3.4.7
GLIBCXX_3.4.8
GLIBCXX_3.4.9
GLIBCXX_3.4.10
GLIBCXX_3.4.11
GLIBCXX_3.4.12
GLIBCXX_3.4.13
GLIBCXX_3.4.14
GLIBCXX_3.4.15
GLIBCXX_3.4.16
GLIBCXX_3.4.17
GLIBC_2.2.5
GLIBC_2.3
GLIBC_2.14
GLIBC_2.4
GLIBC_2.3.4
GLIBC_2.3.2
GLIBCXX_DEBUG_MESSAGE_LENGTH 
```

我该怎么做才能解决这个问题？任何帮助，将不胜感激。

谢谢，布赖恩

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T15:30:18.860

这可能是因为 Matlab 包含它自己的库副本，该副本与您用来编译它的库不同。您可以替换指向此库的符号链接，使其指向系统库，而您已编译了 mex 文件。在我的机器上，这看起来像这样：

```
sudo ln -sf /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16 /usr/local/MATLAB/R2012a/bin/glnxa64/libstdc++.so.6 
```

另请参阅：[/usr/lib/libstdc++.so.6：未找到版本“GLIBCXX_3.4.15”](https://stackoverflow.com/questions/5216399/usr-lib-libstdc-so-6-version-glibcxx-3-4-15-not-found)

# dart - ImageElement 宽度和高度始终为零

> ID：11741175
> 
> 赞同：2
> 
> 时间：2012-07-31T13:25:45.580
> 
> 标签：dart

我有一个快速的 Dart 问题。ImageElement 类的宽高属性还没有完全实现吗？我可以看到它们进入构造函数，但如果动态加载图像，它们显然不会更新，如下所示：

```
ImageElement image = new ImageElement();
image.src = 'whatever.jpg';
image.on.load.add((event) {
  window.console.log(image.width); // Will always print 0.
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:49:13.310

您的代码会为 PNG 和 JPEG 打印有效的*宽度*和*高度*。

可能你有一个错误的 Dart SDK 版本。[更新你的 Dart SDK](http://www.dartlang.org/dartium/)。

或者图像路径错误，尝试使用绝对路径，例如：[http ://www.dartlang.org/imgs/dart-logo.png](http://www.dartlang.org/imgs/dart-logo.png)

# java - 使用父文件夹符号 (../) 访问类路径上的资源

> ID：11741176
> 
> 赞同：2
> 
> 时间：2012-07-31T13:25:53.580
> 
> 标签：java, resources, jar, classpath

我正在尝试使用以下方式访问类路径上的资源`getResourceAsStream()`：

```
InputStream is = getClass().getResourceAsStream(path); 
```

如果路径是这样的：`/net/original/xsdtestxml.xml`，那么我没有问题。但是，在某些情况下，我必须使用“转到父级”标志`../`来访问某些文件。我正在根据某些参数手动构建路径。

最终结果是这样的：

```
/net/original/../original/xsdtestxml.xml 
```

这在 Eclipse 中运行良好。当我在 Eclipse 之外运行它时它工作正常（从包含 .class 的程序目标文件夹中的命令行）。但是，一旦我将它们打包到 jar 文件中，它就会抛出`NullPointerException`.

导出到jar后是否有可能`getResourceAsStream()`支持这种格式？如果没有，是否有一个 Java/ Utility 类可以获取没有`../`符号的文件路径？例如转换`/net/original/../original/xsdtestxml.xml`为`/net/original/xsdtestxml.xml`格式？

**一种可能的解决方案：**

`URI`在包中有一个类`java.net`可以满足我的需要。您只需`URI`使用构造函数创建对象或使用静态`create(String)`方法。然后你调用方法并可以使用或方法`normalize()`获取字符串路径。`toString()``getPath()`

这是对我有用的代码示例：

```
String finalPath = URI.create(inputPath).normalize().getPath(); 
```

`inputPath`是可以包含`../`文字的路径。这完美地转换`/net/original/../original/xsdtestxml.xml`为`/net/original/xsdtestxml.xml`我需要从类路径上的 jar 访问文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:12:25.650

If you need to access files inside a jar, I recommend opening and reading the jar file with [JarFile](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/jar/JarFile.html) and [JarFile.entries()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/jar/JarFile.html#entries%28%29).

For example:

```
String s = getClass().getProtectionDomain().getCodeSource().getLocation().getFile();
JarFile jf = new JarFile(java.net.URLDecoder.decode(s, "UTF-8"));
// ... 
```

Note that `URLDecoder.decode()` decodes something such as `%20` (— to a whitespace) after calling `getFile()`…</p>

# dynamics-crm-2011 - 已创建 Microsoft Dynamics CRM 2011 在线报告并附加到电子邮件

> ID：11741179
> 
> 赞同：3
> 
> 时间：2012-07-31T13:25:57.437
> 
> 标签：dynamics-crm-2011, workflow, dynamics-crm-online

有谁知道是否可以在 Microsoft Dynamics CRM 2011 Online 中设置一个对话框，该对话框将在创建后针对特定记录运行报告，然后将该报告附加到外发电子邮件。

我已经弄清楚了这个过程的三分之二。我可以创建报告，然后从其中通过电子邮件发送相同的对话信息，但是让它采取额外的步骤来添加报告是一个更大的挑战。

我正在考虑编写自定义工作流程/对话框，但在开始之前我想问一下。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:33:00.740

无法在 CRM Online 中编写自定义工作流活动，这仅适用于本地部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T22:07:14.843

我相信您现在可以为 CRM Online 创建自定义工作流操作，它需要使用 Microsoft .NET Framework 4 PU3（平台更新 3）或更高版本进行编译。(http://msdn.microsoft.com/en-us/library/gg328515.aspx)

这计划与 Rollup 9 一起发布，尽管在这方面找到的权威信息很少。因此，如果它现在不存在，它将在不久的将来。 [http://social.technet.microsoft.com/wiki/contents/articles/10762.microsoft-dynamics-crm-2011-update-rollup-9-beta-is-here.aspx](http://social.technet.microsoft.com/wiki/contents/articles/10762.microsoft-dynamics-crm-2011-update-rollup-9-beta-is-here.aspx)

# javascript - 骨干网.js路由器推送状态和根

> ID：11741180
> 
> 赞同：0
> 
> 时间：2012-07-31T13:26:05.787
> 
> 标签：javascript, jquery, html, backbone.js, underscore.js

我有一个页面，特定用户的 user_id`http://www.domain.com/user/123`在哪里。`123`有一个选项卡式界面，单击选项卡应使用新 URL 更新地址栏。

**示例：**单击`<a href="likes" data-toggle="tab">Likes</a>`应将地址栏更新为`http://www.domain.com/user/123/likes`

**问题：**我正在尝试在backbone.js 中实现pushstates，但在使用.js 时似乎无法正确获取URL `app.navigate()`。我尝试`root`在路由器中设置属性，使用`Backbone.history.start({ pushState: true, root: "/user/" });`它给我根为`http://www.domain.com/user/`. 如何将 user_id 添加到末尾`root`？IE。`http://www.domain.com/user/123/`

```
//Router
var AppRouter = Backbone.Router.extend({

    routes: {
        '': 'likes',
        'likes': 'likes',
    },

    likes: function() {
        console.log('fn likes');
        $('#tab_likes"').show();
    }
});

var app = new AppRouter();
Backbone.history.start({ pushState: true, root: "/user/" });

$(function() {
    // Update address bar URL
    $('a[data-toggle="tab"]').on('click', function(e) {
        app.navigate(e.target.getAttribute('href'));
    });

}); 
```

* * *

## 更新代码

从url获取后如何更新`root`属性？下面显示的当前方法不起作用`Backbone.history``user_id`

```
// Router

var AppRouter = Backbone.Router.extend({

    routes: {
        ':user_id/likes': 'likes',
        ':user_id/': 'likes'
    },

    set_user_id: function($user_id) {
        this.user_id = $user_id;
        // ADD SOME CODE TO CHANGE Backbone.history's root attribute
    },

    likes: function($user_id) {
        console.log('fn likes');
        this.set_user_id($user_id);
        $('#tab_likes"').show();
    }
});

var app = new AppRouter();
Backbone.history.start({ 
    pushState: true, 
    root: '/user/' + app.user_id + '/'  // app.user_id is undefined at the time this is called
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:23:44.143

您需要使用参数创建路由以捕获变量用户 id，即

```
var AppRouter = Backbone.Router.extend({

    routes: {
        ':user/likes': 'likes',
    },

    likes: function(user) {
        console.log(user, 'fn likes');
        $('#tab_likes"').show();
    }
}); 
```

有关更多信息，请参阅 Backbone[文档](http://backbonejs.org/#Router)。不用说，你`href`应该相应地改变，即`href="123/likes"`.

最后，为了不仅将 url 保存在历史记录中，而且还触发您需要导航的路线，如下所示：

```
app.navigate(e.target.getAttribute('href'), true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:58:31.983

`navigate``trigger`如果您希望它实际触发路由处理程序（而不是仅更新 URL），则需要设置一个选项。从[文档](http://backbonejs.org/)中：

> 每当您在应用程序中到达想要保存为 URL 的点时，调用 navigate 以更新 URL。如果您还想调用路由函数，请将触发器选项设置为 true。

所以，要让`console.log`调试至少工作，试试这个：

```
app.navigate(e.target.getAttribute('href'), true); 
```

# android - 在手机解锁一段时间后运行服务

> ID：11741181
> 
> 赞同：2
> 
> 时间：2012-07-31T13:26:06.300
> 
> 标签：android

我正在寻找一种在一定时间后运行服务的方法。但是，我不能使用标准的[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)来解决这个问题，因为我不想依赖我的应用程序一直在运行，并且 AlarmManager 会考虑手机锁定的时间。

基本上，目标是在用户使用手机达到一定时间（例如一小时）后运行服务。此计时器应允许在手机锁定或关闭时休息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T04:32:36.697

经过大量研究，我发现最好的方法如下：

*   `setRepeating`通过AlarmManager 的方法创建每 10 秒运行一次的服务。
*   如果创建 AlarmManager 的应用程序曾经停止过，一旦应用程序重新启动，只需重新启动重复警报即可。
*   当服务每 10 秒运行一次时，使用以下代码检查手机是否被锁定：

    `KeyguardManager keyguardManager = (KeyguardManager) getSystemService(Context.KEYGUARD_SERVICE); boolean locked = keyguardManager.inKeyguardRestrictedInputMode();`

    如果电话未锁定，则让服务增加一个数据库变量，以 10 秒为单位跟踪时间。

*   在更新数据库后，还要让服务检查总解锁时间是否超过最大时间。如果是这样，则激活任何事件。

如果有人提出更好（更清洁）的方法，我会接受这个答案。

# php - Tinymce文件管理器根本不工作+语言不加载

> ID：11741188
> 
> 赞同：2
> 
> 时间：2012-07-31T13:26:32.753
> 
> 标签：php, javascript, html, tinymce

我对 tinymce 的文件管理器有疑问。我试图连接它，但出了点问题。当我选择一些文本并尝试创建指向它的链接时。当我单击“链”图标然后单击“浏览”按钮时，文件管理器会加载但它不起作用。我什么也做不了，也没有语言。每个标签都像：`{#filelist.filename}`. 你能给我一些建议吗。

这是我的初始化代码：

```
tinyMCE.init({
    width: "1000",
    height: "550",
    mode : "exact",
    elements : "BODY,DESCRIPTION,LONG_DESCRIPTION, LONG_DESCRIPTION1, LONG_DESCRIPTION2, LONG_DESCRIPTION3, LONG_DESCRIPTION4, LONG_DESCRIPTION5",
    theme : "advanced",
    plugins : "imagemanager,filemanager,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist,autosave",
    theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
    theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,code,insertdate,inserttime,preview",
    theme_advanced_buttons3 : "forecolor,backcolor,|,tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,insertlayer,moveforward,movebackward,absolute",
    theme_advanced_buttons4 : "styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak,restoredraft,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_resizing : true,
    language: "en",
    template_external_list_url : "lists/template_list.js",
    external_link_list_url : "lists/link_list.js",
    external_image_list_url : "lists/image_list.js",
    media_external_list_url : "lists/media_list.js",
    style_formats : [
        {title : 'Bold text', inline : 'b'},
        {title : 'Red text', inline : 'span', styles : {color : '#ff0000'}},
        {title : 'Red header', block : 'h1', styles : {color : '#ff0000'}},
        {title : 'Example 1', inline : 'span', classes : 'example1'},
        {title : 'Example 2', inline : 'span', classes : 'example2'},
        {title : 'Table styles'},
        {title : 'Table row 1', selector : 'tr', classes : 'tablerow1'}
    ]
}); 
```

我不确定您是否需要它，但这是文件管理器文件夹中 config.php 文件中的代码：

```
$mcFileManagerConfig['general.theme'] = "fm";
    $mcFileManagerConfig['general.user_friendly_paths'] = true;
    $mcFileManagerConfig['general.tools'] = "imagemanager,createdir,createdoc,refresh,zip,upload,edit,rename,cut,copy,paste,delete,selectall,unselectall,view,download,insert,addfavorite,removefavorite";
    $mcFileManagerConfig['general.disabled_tools'] = "";
    $mcFileManagerConfig['general.error_log'] = "";
    $mcFileManagerConfig['general.language'] = "ru"; // en, sv, ru
    $mcFileManagerConfig['general.plugins'] = "History,Favorites"; // comma seperated
    $mcFileManagerConfig['general.demo'] = false;
    $mcFileManagerConfig['general.debug'] = false;
    $mcFileManagerConfig['general.encrypt_paths'] = true;
    $mcFileManagerConfig['general.remember_last_path'] = false;
    $mcFileManagerConfig['general.allow_override'] = "*";
    $mcFileManagerConfig['general.allow_export'] = "demo,tools,disabled_tools,debug";

    // Preview options
    $mcFileManagerConfig['preview.wwwroot'] = ''; // absolute or relative from this script path (c:/Inetpub/wwwroot).
    $mcFileManagerConfig['preview.urlprefix'] = "{proto}://{host}/"; // domain name
    $mcFileManagerConfig['preview.urlsuffix'] = "";
    $mcFileManagerConfig['preview.include_file_pattern'] = '';
    $mcFileManagerConfig['preview.exclude_file_pattern'] = '';
    $mcFileManagerConfig['preview.extensions'] = "*";
    $mcFileManagerConfig['preview.allow_export'] = "urlprefix,urlsuffix";
    $mcFileManagerConfig['preview.allow_override'] = "*";

    // General file system options
    $mcFileManagerConfig['filesystem'] = "Moxiecode_LocalFileImpl";
    $mcFileManagerConfig['filesystem.path'] = '../../../../../../uploads/artanesmining/tinymcefiles/';//'../../../../upload-files/'; // absolute or relative from this script path.
    $mcFileManagerConfig['filesystem.rootpath'] = '../../../../../../uploads/artanesmining/tinymcefiles/';//'../../../../upload-files/'; // absolute or relative from this script path.
    $mcFileManagerConfig['filesystem.datefmt'] = "Y-m-d H:i";
    $mcFileManagerConfig['filesystem.include_directory_pattern'] = '';
    $mcFileManagerConfig['filesystem.exclude_directory_pattern'] = '/^mcith$/i';
    $mcFileManagerConfig['filesystem.invalid_directory_name_msg'] = "";
    $mcFileManagerConfig['filesystem.include_file_pattern'] = '';
    $mcFileManagerConfig['filesystem.exclude_file_pattern'] = '/^\.|mcic_/i';
    $mcFileManagerConfig['filesystem.invalid_file_name_msg'] = "";
    $mcFileManagerConfig['filesystem.extensions'] = "gif,jpg,htm,html,pdf,zip,txt,php,png,swf,dcr,mov,qt,ram,rm,avi,mp3,mpg,mpeg,asf,flv,doc,pdf,xls,xslx,docx";
    $mcFileManagerConfig['filesystem.file_templates'] = '${rootpath}/templates/document.htm,${rootpath}/templates/another_document.htm';
    $mcFileManagerConfig['filesystem.directory_templates'] = '${rootpath}/templates/directory,${rootpath}/templates/another_directory';
    $mcFileManagerConfig['filesystem.readable'] = true;
    $mcFileManagerConfig['filesystem.writable'] = true;
    $mcFileManagerConfig['filesystem.delete_recursive'] = true;
    $mcFileManagerConfig['filesystem.force_directory_template'] = false;
    $mcFileManagerConfig['filesystem.clean_names'] = true;
    $mcFileManagerConfig['filesystem.allow_export'] = "extensions,readable,writable,file_templates,directory_templates,force_directory_template,clean_names";
    $mcFileManagerConfig['filesystem.allow_override'] = "*";

    // Upload options
    $mcFileManagerConfig['upload.maxsize'] = "20MB";
    $mcFileManagerConfig['upload.overwrite'] = false;
    $mcFileManagerConfig['upload.include_file_pattern'] = '';
    $mcFileManagerConfig['upload.exclude_file_pattern'] = '';
    $mcFileManagerConfig['upload.invalid_file_name_msg'] = "";
    $mcFileManagerConfig['upload.extensions'] = "gif,jpg,mp3,png,pdf,zip,swf,doc,pdf,xls,xslx,docx";
    $mcFileManagerConfig['upload.multiple_upload'] = true;
    $mcFileManagerConfig['upload.chunk_size'] = '1mb';
    $mcFileManagerConfig['upload.allow_export'] = "maxsize,multiple_upload,chunk_size,overwrite,extensions";
    $mcFileManagerConfig['upload.allow_override'] = "*";

    // Download options
    $mcFileManagerConfig['download.include_file_pattern'] = "";
    $mcFileManagerConfig['download.exclude_file_pattern'] = "";
    $mcFileManagerConfig['download.extensions'] = "gif,jpg,htm,html,mp3,pdf,txt,zip";
    $mcFileManagerConfig['download.allow_override'] = "*";

    // Create document options
    $mcFileManagerConfig['createdoc.fields'] = "Document title=title";
    $mcFileManagerConfig['createdoc.include_file_pattern'] = '';
    $mcFileManagerConfig['createdoc.exclude_file_pattern'] = '';
    $mcFileManagerConfig['createdoc.invalid_file_name_msg'] = "";
    $mcFileManagerConfig['createdoc.allow_export'] = "fields";
    $mcFileManagerConfig['createdoc.allow_override'] = "*";

    // Create directory options
    $mcFileManagerConfig['createdir.include_directory_pattern'] = '';
    $mcFileManagerConfig['createdir.exclude_directory_pattern'] = '/[^a-z0-9_\.]/';
    $mcFileManagerConfig['createdir.invalid_directory_name_msg'] = "";
    $mcFileManagerConfig['createdir.allow_override'] = "*";

    // Rename options
    $mcFileManagerConfig['rename.include_file_pattern'] = '';
    $mcFileManagerConfig['rename.exclude_file_pattern'] = '';
    $mcFileManagerConfig['rename.invalid_file_name_msg'] = "";
    $mcFileManagerConfig['rename.include_directory_pattern'] = '';
    $mcFileManagerConfig['rename.exclude_directory_pattern'] = '';
    $mcFileManagerConfig['rename.invalid_directory_name_msg'] = "";
    $mcFileManagerConfig['rename.allow_override'] = "*";

    // Edit file options
    $mcFileManagerConfig['edit.include_file_pattern'] = '';
    $mcFileManagerConfig['edit.exclude_file_pattern'] = '';
    $mcFileManagerConfig['edit.extensions'] = "html,htm,txt";
    $mcFileManagerConfig['edit.allow_override'] = "*";

    // Zip file(s) options
    $mcFileManagerConfig['zip.include_file_pattern'] = '';
    $mcFileManagerConfig['zip.exclude_file_pattern'] = '';
    $mcFileManagerConfig['zip.extensions'] = "*";
    $mcFileManagerConfig['zip.allow_override'] = "*";

    // Unzip file(s) file options
    $mcFileManagerConfig['unzip.include_file_pattern'] = '';
    $mcFileManagerConfig['unzip.exclude_file_pattern'] = '';
    $mcFileManagerConfig['unzip.extensions'] = "*";
    $mcFileManagerConfig['unzip.allow_override'] = "*";

    // Authenication
    $mcFileManagerConfig['authenticator'] = "BaseAuthenticator";
    $mcFileManagerConfig['authenticator.login_page'] = "login_session_auth.php";
    $mcFileManagerConfig['authenticator.allow_override'] = "*";

    // SessionAuthenticator
    $mcFileManagerConfig['SessionAuthenticator.logged_in_key'] = "isLoggedIn";
    $mcFileManagerConfig['SessionAuthenticator.groups_key'] = "groups";
    $mcFileManagerConfig['SessionAuthenticator.user_key'] = "user";
    $mcFileManagerConfig['SessionAuthenticator.path_key'] = "mc_path";
    $mcFileManagerConfig['SessionAuthenticator.rootpath_key'] = "mc_rootpath";
    $mcFileManagerConfig['SessionAuthenticator.config_prefix'] = "filemanager";

    // ExternalAuthenticator config
    $mcFileManagerConfig['ExternalAuthenticator.external_auth_url'] = "auth_example.jsp";
    $mcFileManagerConfig['ExternalAuthenticator.secret_key'] = "someSecretKey";

    // Local filesystem options
    $mcFileManagerConfig['filesystem.local.access_file_name'] = "mc_access";
    $mcFileManagerConfig['filesystem.local.allow_override'] = "access_file_name";
    $mcFileManagerConfig['filesystem.local.file_mask'] = "";
    $mcFileManagerConfig['filesystem.local.directory_mask'] = "";
    $mcFileManagerConfig['filesystem.allow_override'] = "*";

    // Stream options
    $mcFileManagerConfig['stream.mimefile'] = "mime.types";
    $mcFileManagerConfig['stream.include_file_pattern'] = '';
    $mcFileManagerConfig['stream.exclude_file_pattern'] = '/\.php$|\.shtm$/i';
    $mcFileManagerConfig['stream.extensions'] = "*";
    $mcFileManagerConfig['stream.allow_override'] = "*";

    // Logging options
    $mcFileManagerConfig['log.enabled'] = false;
    $mcFileManagerConfig['log.level'] = "error"; // debug, warn, error
    $mcFileManagerConfig['log.path'] = "logs";
    $mcFileManagerConfig['log.filename'] = "{level}.log";
    $mcFileManagerConfig['log.format'] = "[{time}] [{level}] {message}";
    $mcFileManagerConfig['log.max_size'] = "100k";
    $mcFileManagerConfig['log.max_files'] = "10";

    // Image manager options
    $mcFileManagerConfig['imagemanager.urlprefix'] = "../../../imagemanager/?type=im";  // need to add "imagemanager" button to tools as well.
    $mcFileManagerConfig['imagemanager.allow_override'] = "*";
    $mcFileManagerConfig['imagemanager.allow_export'] = "urlprefix"; 
```

我希望这已经足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:59:30.447

您是否在页面上添加了指向 tiny 的路径？：

```
<script type="text/javascript" src="YOUT_PATH/tiny_mce/tiny_mce.js"></script> 
```

尝试添加到文件管理器的文件夹 config.php

```
ini_set('display_errors',0); // may be bug with languages 
```

更改上传文件的路径

```
$mcFileManagerConfig['filesystem.path'] = $_SERVER['DOCUMENT_ROOT'].PATH_UPLOAD_FOLDER
$mcFileManagerConfig['filesystem.rootpath'] = $_SERVER['DOCUMENT_ROOT'].PATH_UPLOAD_FOLDER 
```

# javascript - 更改 VB 列表框“onclick”事件上的文本框

> ID：11741189
> 
> 赞同：0
> 
> 时间：2012-07-31T13:26:35.530
> 
> 标签：javascript, asp.net, vb.net

我目前正在尝试使用列表框中的“onclick”事件来更新文本框。

基本上，在设置“onclick”事件属性时，我需要传递选定的列表框值。但是，正在发生的问题是，当一切都是第一次构建时，没有选定的值，所以它试图传递一个空值并输出错误。

一些代码...

```
//listbox attribute creation...
Me.listbox.Attributes("onclick") = "javascript:board_click_button('" & Me.listbox.SelectedItem.Text & "');" 
```

如果我将 SelectedValue 设置为特定索引，那么每次用户单击时，无论他们选择什么，硬编码的索引值都是始终返回的值。

有没有办法让'onclick'做我需要的事情呢？我没有发布任何进一步的代码，因为我认为它不会有帮助，但如果需要，我可以。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:42:07.870

您需要了解服务器端和客户端之间的区别。

服务器端是发生在服务器上的一切（例如 ASP、ASP.NET、PHP），用于创建发送到浏览器的 HTML。它还处理用户提交内容（回发）时浏览器返回的信息。

客户端是一旦接收到 HTML 或当用户在页面上执行某些操作（如单击元素）时在浏览器上发生的所有事情。

这段代码是在服务器上创建的，因此就浏览器而言，文本参数永远不会改变（为了可见性而分割线）......

```
Me.listbox.Attributes("onclick") = "javascript:board_click_button('" 
                                   & Me.listbox.SelectedItem.Text & "');" 
```

浏览器将收到类似（为可见性而简化）...

```
<select onclick="javascript:board_click_button('hello world');" ... 
```

相反，我认为你想要的是这个......

```
Me.listbox.Attributes("onclick") = "board_click_button(this.options[this.selectedIndex].text);" 
```

这将允许 javascript 使用`this`变量（这是导致事件的对象，在本例中为`<select>`）来查找当前选定的项目文本。

（另外，请注意，您不需要`javascript:`在类型事件的开头放置 - 浏览器已经知道它是 javascript。如果您在标记中`onclick`使用 javascript，则只需将其放置。）`href``<a>`

**更新**

这是一个非常快速的测试，对我来说可以正常工作（显示在警报框中，来自已选择项目的文本）......

```
<asp:ListBox runat="server" onclick="alert(this.options[this.selectedIndex].text);">
  <asp:ListItem Value="1">one</asp:ListItem>
  <asp:ListItem Value="2">two</asp:ListItem>
  <asp:ListItem Value="3">three</asp:ListItem>
</asp:ListBox> 
```

# grails - 在 Micro Cloud Foundry 上部署 Grails 应用程序

> ID：11741192
> 
> 赞同：4
> 
> 时间：2012-07-31T13:26:44.363
> 
> 标签：grails, cloud-foundry

我尝试在 Micro Cloud Foundry 上部署一个简单的 hello world 应用程序。我完成了视频中提到的过程并设置了所有东西（我的 IDE 是 STS eclipse 和 Windows 7）。当我想在 Micro Cloud Foundry 上创建服务器时：1）我无法将服务器主机名设置为我的域，例如“multisite.cloudfoundry.me”它说“当前选择的服务器类型不支持远程主机”并强制我将“localhost”作为服务器名称。2）当我完成该过程时，它启动了我的 Grails 应用程序，并且似乎运行良好，但 url 已损坏“http://12431asd.multisite.cloudfoundry.me/”（它要求我选择此域上的 Grails 应用程序“12431asd”），我收到消息“VCAP 路由器：404 - 未找到目标”。当我尝试这个网址“http://api.

我感谢任何帮助和建议。礼萨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:22:44.493

添加 CloudFoundry 服务器时，将第一个窗格保留为默认设置，然后在第二个窗格中选择“Microcloud” url 选项，在弹出对话框中将名称设置为“multisite”。插件联系您的实例后，您可以继续输入电子邮件和密码。

从那里您应该能够通过将应用程序拖到服务器选项卡中的服务器实例来进行部署，并在随后的对话框中设置 url。部署后，您可以双击服务器选项卡中的应用程序实例并调整其属性。

您能否验证在部署应用程序时，它的状态是否已启动？（它应该在服务器下的应用程序名称旁边显示）

# java - 更改大小后 GUI 不会加载

> ID：11741193
> 
> 赞同：0
> 
> 时间：2012-07-31T13:26:47.730
> 
> 标签：java, user-interface, layout

有点慌张。过去两个月一直在做一个项目。几天前我更改了一些盒子尺寸并保存了它。今天早上重新加载它，窗口大小变得非常小，我收到错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.IllegalStateException: javax.swing.JButton[,0,0,0x0,invalid,alignmentX=0.0,alignmentY=0.5,border=javax.swing.plaf.synth.SynthBorder@ce623f,flags=288,maximumSize=,minimumSize=,preferredSize=,defaultIcon=,disabledIcon=,disabledSelectedIcon=,margin=javax.swing.plaf.InsetsUIResource[top=0,left=0,bottom=0,right=0],paintBorder=true,paintFocus=true,pressedIcon=,rolloverEnabled=true,rolloverIcon=,rolloverSelectedIcon=,selectedIcon=,text=Search,defaultCapable=true] is not attached to a horizontal group 
```

有任何想法吗？？！？！？！？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:36:35.120

错误消息说明了一切。您有某个组件 (a `JButton`)，您已将其添加到垂直组，但忘记将其添加到水平组以及`GroupLayout`. 请参阅教程的[如何使用`GroupLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/group.html)部分`LayoutManager`和相应的示例代码

```
layout.setHorizontalGroup(
   layout.createSequentialGroup()
      .addComponent(c1)
      .addComponent(c2)
      .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
           .addComponent(c3)
           .addComponent(c4))
);
layout.setVerticalGroup(
   layout.createSequentialGroup()
      .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
           .addComponent(c1)
           .addComponent(c2)
           .addComponent(c3))
      .addComponent(c4)
); 
```

如果您`addComponent(c3)`从第一行中删除该部分，您将收到类似的异常。

当然，如果没有看到您的代码，我无法确定您在项目中的确切位置搞砸了，但是一个不错的基于 VCS 的差异工具可以在这两个版本之间进行比较，应该很快就会发现这一点

# mercurial - mercurial 命令获取代码的总行数

> ID：11741202
> 
> 赞同：3
> 
> 时间：2012-07-31T13:27:08.480
> 
> 标签：mercurial

我正在寻找一个 mercurial 命令来获取存储库中的代码总行数。我确信有一种方法可以在没有扩展的情况下做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T04:58:38.210

这应该这样做：

```
hg cat glob:** | wc --lines 
```

它将包含任何二进制文件，但无论如何您都不应该存储这些文件。:)

如果您想计算当前签出的版本以外的某个版本， cat 将采用 -r 参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T17:10:29.823

捆绑的[流失](http://mercurial.selenic.com/wiki/ChurnExtension)扩展为您提供了每个作者更改的代码行列表。我怀疑这就是您的想法，因为没有扩展就没有功能可以做到这一点。

# iphone - openURL后如何返回应用

> ID：11741209
> 
> 赞同：0
> 
> 时间：2012-07-31T13:27:27.497
> 
> 标签：iphone, url, openurl

在我的应用程序中，我需要使用

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"urlstring"]]; 
```

在页面中的某个过程之后，我如何返回到应用程序。（就像 facebook 进行 safari 身份验证一样）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T13:30:32.943

[除非您还构建了网站部分，否则您不能这样做，然后您可以通过调用App 自定义 URL 方案](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW50)来打开自己的应用程序，您必须将自己添加到`info.plist`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:02:38.727

Facebook 应用程序所做的是注册`fb://`URL 以重定向到它。然后它会将您发送到 facebook.com 上的一个特殊链接，该链接重定向到一个`fb://`链接，同时传递一些信息（令牌或其他）。如果您打开 Safari 并`"fb://"`在 URL 栏中输入内容，您将被发送到 Facebook 应用程序。rckoenes 的回答显示了如何注册 URL 来做到这一点，但返回到您的应用程序的部分取决于您的网站（您必须编写该重定向页面）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T09:25:16.750

这可能有用吗？

```
UIWebView webView = [[UIWebView alloc] init]; 
NSURL *url = [NSURL URLWithString:@"urlstring"]; 
[webView loadRequest:[NSURLRequest requestWithURL:url]]; 
```

# sql-server - SQL Server 存储过程解决方案

> ID：11741211
> 
> 赞同：1
> 
> 时间：2012-07-31T13:27:33.037
> 
> 标签：sql-server, stored-procedures

我有一个存储过程，它返回两列`Start`和`end dates`. 什么将被存储过程转换为不同的日期列表，其中包括其间的所有日期。

事件示例：

```
 StartDate          EndDate    
•   1/2/2012 6:00   -   1/2/2012 9:00 
•   1/2/2012 11:00  -   1/2/2012 19:00  
•   1/1/2012 11:00  -   1/5/2012 19:00  
•   1/7/2012 11:00  -   1/8/2012 19:00  
•   1/11/2012 11:00 -   1/11/2012 19:00 
```

结果：

```
 •   1/1/2012 
    •   1/2/2012 
    •   1/3/2012 
    •   1/4/2012 
    •   1/5/2012 
    •   1/7/2012 
    •   1/8/2012 
    •   1/11/2012 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:40:16.273

```
SELECT dateadd(day,datediff(day,0,StartDate),0) as StartDate from table
union
SELECT dateadd(day,datediff(day,0,EndDate),0) from table 
```

# sql - 选择数据库中每个表的前 3 行

> ID：11741212
> 
> 赞同：10
> 
> 时间：2012-07-31T13:27:33.150
> 
> 标签：sql, sql-server-2008, select

我有一个包含 69 个表的数据库，我只想选择每个表的前三个记录。

我可以在*每张桌子*上做到这一点：

```
SELECT TOP 3 * 
  FROM table_schema.table_name 
```

但是，如果我要手动执行此操作，则需要很多时间。

你能建议一个解决方法吗？

我尝试[了这个解决方案](https://stackoverflow.com/questions/2154087/mysql-select-first-4-records-for-each-category-in-a-table)，但我可以让它工作（我不知道如何为 MSSQL 修改它）

**编辑**感谢您的回复。我可能不够清楚：我的意思是我想解析每个单独的表并且只获取前 3 条记录而不是移动到下一条记录。下面是雅罗斯拉夫的代码是我需要的

```
DECLARE @sql VARCHAR(MAX)='';
SELECT @sql=@sql+'SELECT TOP 3 * FROM '+'['+SCHEMA_NAME(schema_id)+'].['+name+']'+';'
  FROM sys.tables
EXEC(@sql) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-31T13:35:34.970

在这里你有：

```
DECLARE @sql VARCHAR(MAX)='';
SELECT @sql=@sql+'SELECT TOP 3 * FROM '+'['+SCHEMA_NAME(schema_id)+'].['+name+']'+';'
  FROM sys.tables
EXEC(@sql) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-31T13:35:25.497

```
 exec sp_MSforeachtable 'select top 3 * from ?' 
```

# redirect - 通过重定向屏蔽域 IP

> ID：11741217
> 
> 赞同：0
> 
> 时间：2012-07-31T13:27:45.080
> 
> 标签：redirect, web, dns, ip, subdomain

我有 domain.com 并将其 subtomain sub.domain.com 重定向到专用服务器的 IP：0.0.0.0

当我 ping sub.domain.com 时，它给了我 0.0.0.0 - 如何屏蔽它？

@domain.com - 它托管在虚拟主机上，我的 0.0.0.0 IP 在专用服务器上。它用于在线游戏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:31:59.197

如果 ip 与域不匹配，则无法屏蔽该 ip，但如果 ip 不可见，则可以在 sub.domain.com 添加 iframe。

# c# - 缓存mysql结果c#

> ID：11741219
> 
> 赞同：0
> 
> 时间：2012-07-31T13:27:50.120
> 
> 标签：c#, mysql, winforms, caching, mysqldatareader

有没有办法缓存 MySQL 查询的结果，特别是数据读取器？

我有一些普通查询实际上只需要在加载应用程序时执行一次，然后每个表单都可以使用缓存值而不是查询远程服务器。

目前我的方法是使用 MySqlDataReader 来检索数据并将其存储在另一个 MySqlDataReader 中，以便我以后可以检索它（下面的示例）

```
if (parentfrm.prioritylist != null)
        {
            if (parentfrm.prioritylist.HasRows)
            {
                using (var rows = parentfrm.prioritylist)
                {
                    while (rows.Read())
                    {
                        cboxitem cbi = new cboxitem(int.Parse(rows["priorityid"].ToString()), rows["label"].ToString());
                        cb.Items.Add(cbi);
                    }
                }
            }
            else
            {
                query = @"SELECT priorityid, label FROM prioritylist WHERE active = 'Y' ORDER BY theorder ASC";
                parentfrm.prioritylist = db.localfetchrows(query);
                if (cb != null)
                {
                    using (var rows = db.localfetchrows(query))
                    {
                        while (rows.Read())
                        {
                            cboxitem cbi = new cboxitem(int.Parse(rows["priorityid"].ToString()), rows["label"].ToString());
                            cb.Items.Add(cbi);
                        }
                    }
                }
            }
        }
        else
        {
            query = @"SELECT priorityid, label FROM prioritylist WHERE active = 'Y' ORDER BY theorder ASC";
            parentfrm.prioritylist = db.localfetchrows(query);
            if (cb != null)
            {
                using (var rows = db.localfetchrows(query))
                {
                    while (rows.Read())
                    {
                        cboxitem cbi = new cboxitem(int.Parse(rows["priorityid"].ToString()), rows["label"].ToString());
                        cb.Items.Add(cbi);
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:35:15.170

```
public class Priority{
    public int PriorityId {get;set;}
    public string Label {get;set;}
}

public class CachedItems {
    private static List<Priority> _priorityList=new List<Priority>();

    public static List<Priority> GetPriorityList() {
        if (_priorityList==null){
             // Load DB Items to the _priorityList, 
             // if the app is multithreaded, you might wanna add some locks here
        }
    }
} 
```

然后在代码的任何地方，只需使用`CachedItems.GetPriorityList()`访问缓存列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:36:39.713

**简短的回答：**填充一个对象，然后重用它

**更长的答案：**设计您的应用程序以使用某种解耦。最简单的方法是使用双重 DataSet/DataAdapter 类 + 一些数据绑定。

不仅您的代码将更易于阅读（和编写），而且您将拥有更大的灵活性（例如仅在需要时触发请求）。

一种传统的方法是创建：

*   一个数据抽象层 (DAL)，它包装 DB 操作以返回 Dataset（或自定义类），保存更改（DataSet 具有内置的更改跟踪功能）
*   封装逻辑的业务逻辑层 (BLL)。Bll 可以与 DAL 一起使用
*   UI 层，包含应用程序本身。Ui 应该只调用 BLL 的方法。

从阅读这篇文章开始：http: [//www.codeproject.com/Articles/36847/Three-Layer-Architecture-in-C-NET](http://www.codeproject.com/Articles/36847/Three-Layer-Architecture-in-C-NET)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T14:00:45.303

一种快速的方法是使用动态类型/匿名类（.NET 4），这与您已经在做的事情相当（稍微建立在 Mennans 代码上）

```
 public class CachedItems
    {
        private static List<dynamic> _priorityList = new List<dynamic>();

        public static List<dynamic> GetPriorityList()
        {
            if (_priorityList == null)
            {
                // Load DB Items to the _priorityList, 
                // if the app is multithreaded, you might wanna add some locks here

                query = @"SELECT priorityid, label FROM prioritylist WHERE active = 'Y' ORDER BY theorder ASC";
                parentfrm.prioritylist = db.localfetchrows(query);
                if (cb != null)
                {
                    using (var rows = db.localfetchrows(query))
                    {
                        while (rows.Read())
                        {
                            _priorityList.Add(new { 
                                                PriorityId = int.Parse(rows["priorityid"].ToString()), 
                                                Label = rows["label"].ToString() 
                                              });
                        }
                    }
                }

            }

            return _priorityList;
        }
    } 
```

使用缓存的值：

```
 foreach (var item in CachedItems.GetPriorityList())
        {
            if (item.Priority == 1)
            {

            }
        } 
```

您没有得到的是类型安全，即 item.Priority 可能会导致您的运行时错误，如果 Priority 不包含值或不是 int 的值，则在加载缓存时您必须涵盖这一点，但这基本上是您现在使用数据读取器的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T13:57:30.987

您可能会考虑一个小型应用程序工具包类 PriorityCheckboxes，并将其设为单例。然后，当您需要这些复选框值时，应首先加载 PriorityCheckboxes 上的 GetInstance() 方法。如果您对此有竞争条件，则加载逻辑可以进入静态初始化程序。

```
public class PriorityCheckboxes {
    private static CheckBox _CBItems = null;

    private static PriorityCheckboxes _instance - null;

    public CheckBox CheckBoxes { 
        get() { return _CBItems; } 
    }

    private PriorytyCheckboxes() {
        this.LoadCBItems();
        _instance = new PriorityCheckboxes();
    }

    public static PriorityCheckboxes GetInstance() { 
        if(_instance == null ) _instance = new PriorityCheckboxes();
        return _instance;
    }
    private void LoadCBItems() { }
} 
```

# css - a:在 asp.net C# web 上处于活动状态

> ID：11741221
> 
> 赞同：0
> 
> 时间：2012-07-31T13:27:52.697
> 
> 标签：css

我想要完成的是在我的导航菜单栏上单击时为实线创建一个功能。我曾尝试使用此代码：

```
div.menu ul li a:active
{
    text-decoration:none !important; 
    background-color: white;
    color: #999999;
    text-decoration:none !important; 
    border-bottom: thick outset White;
}

div.menu ul li a:visited
{
    display: inline;
    line-height: 13.6px;
    padding: 4px 20px;
    white-space: nowrap;
    text-decoration:none !important; 
    border-bottom: thick outset White !important;
} 
```

它适用于我的悬停：

```
div.menu ul li a:hover
{
    color: White;
    text-decoration:none !important; 
    border-bottom: thick outset White;
} 
```

所以很可能是浏览器的问题。有没有人有办法解决吗？一个例子会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:14:36.700

我的代码的问题是我正在使用生成的 asp:menu 项。而不是使用 ul 、li 和 a 标签。如果我从一开始就使用它，我不会将自己与服务器端代码和客户端代码混淆。

# c - 使用 printf("something") 或 system("echo something") 会消耗更多的处理能力吗？

> ID：11741226
> 
> 赞同：0
> 
> 时间：2012-07-31T13:28:08.570
> 
> 标签：c, performance

这个问题与ANSI C有关。我认为它应该是一个简单的答案......那么这些方法中哪种方法最快？它与我当前的项目没有任何关系，但有一天我突然想到了它，我没有立即在网上看到答案......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T13:31:43.363

`printf`到目前为止，它是可取的，在许多数量级上和在任何意义上。它是一个库函数，是 C 标准的一部分，它可以让您自己的程序打印所需的输出。`system`另一方面，启动一个新的、独立的进程（需要相当长的时间），您仍然必须希望您的 shell 确实提供了一个`echo`执行相同操作的命令。

唯一比调用*更糟糕*`system`的`echo`是`system`调用一个编译器来编译另一个包含`printf`并运行它的程序，我猜......

不要使用`system`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T13:30:45.840

`system`生成一个 shell 来执行你的命令。这意味着有一个`fork()/exec()`来生成shell，而shell又调用另一个`fork()/exec()`来执行`echo`。更不用说`shell`必须搜索`PATH`for `echo`，传递环境变量等。

非常非常慢，比对`printf`. 除了`system`可能因为没有 shell 或没有`echo`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:46:14.710

在这种情况下，比较可比较的内容会更好......你可以在 system() 中调用类似 printf 的东西，而且不仅处理器参与了速度。

在某些特定情况下，我相信调用 printf 比调用新的小进程慢并非不可能（但它假设拥有一个奇怪的配置处理器与硬盘/内存）。

在同一个过程中，使用 system_call 是写东西的最快方法......（没有缓冲区问题）。

例如，在大多数 unix 系统中，写调用（如果只需要写一个简单的字符串）是最快的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T13:49:42.360

`system`可能无法找到命令/程序......或者了解您的代码的人可能会在他/她的路径上`echo`安装一个恶意程序。`echo`因此，不仅`system`速度会慢几个数量级，而且还会带来安全风险。

如果您发现自己处于必须使用 的情况`system`，您应该*始终*完全限定您正在调用的命令（例如`/bin/echo`or `/usr/bin/echo`）。

但你永远不需要使用它。您可以调用外部程序来做的任何事情......您应该能够找到一个库（或您可以用来构建库的代码），您可以从您的程序中调用它来做同样的事情。这样会更快、更安全。

# ruby-on-rails - 在 Rails 中创建 3 模型关系

> ID：11741235
> 
> 赞同：0
> 
> 时间：2012-07-31T13:28:20.847
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我不确定如何始终创建事件，但仍保持数据完整性正确。这是我的模型

顾客

```
 id
  first
  last
  email 
```

书

```
 id
  description 
```

Book_Manager

```
 customer_id
  book_id
  visible 
```

为了做到这一点，我必须使用 has_many 关系，他的描述如下

```
Book
has_many :book_managers
    has_many :customers, :through => :book_managers
Book_Manager
    belongs_to :customer
    belongs_to :book
Customer
    has_many :book_managers
    has_many :books, :through => :book_managers 
```

我们的想法是查看之前已经创建的数据，这意味着我必须创建一个查询，其中 Book = Book_Manager Table where customer_id = current_customer 和 created_last。我不确定如何在图书控制器中创建这样的查询。我相信它可能看起来像查询。我是对的吗？当前客户是 sessionHelper 方法中的当前客户

```
@report = BookManager where customer.id == current_customer.id AND created_last.last 
```

最后但并非最不重要的一点是，每次客户通过按保存修改文本时，都会执行 create 操作，并创建一个新的 book_manager，其中包含与图书管理器关联的正确的第 3 模型图书，并且客户也与图书管理器相关联。

我有以下代码，但我不确定它是否正确

```
class BooksController < ApplicationController
    def edit
        @book = Book.find(params[:id])
    end

    def create
        @customer = Customer.first
        @book = @customer.BookManager.build(params[:book])
    end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:41:51.223

```
Book
  has_many :book_managers
  has_many :books, :through => :book_managers

Book_Manager
  belongs_to :customer
  belongs_to :book

Customer
  has_many :book_managers
  has_many :customers, :through => :book_managers

   Book                Book_Manager          Customer
|-------------|       |-------------|       |---------|
| id          |-1---*-| book_id     |       | id      |
| description |       | customer_id |-*---1-| first   |
|             |       | id          |       | last    |
|             |       |             |       | email   |
|-------------|       |-------------|       |---------| 
```

正如您所拥有的，`have_many through`您不需要参考连接表 ( `Book_Manager`)。您可以直接访问它：

```
@customer = Customer.first
@books = @customer.books #return all books 
```

# javascript - Apps 脚本中的类型转换

> ID：11741241
> 
> 赞同：0
> 
> 时间：2012-07-31T13:28:37.413
> 
> 标签：javascript, google-apps-script

第一次上 StackOverFlow！

我正在构建一个通过 UI 表单文本框接收值的应用程序。提交该表单后，它会调用一个方法，然后将“/”附加到该值。问题是 .append() 不可用，因为 getElementById() 返回一个 GenericWidget 对象，因此无法像字符串一样对其进行操作。我尝试在 var userinput = app.getElementById('input').toString; 中使用 .toString() 进行类型转换 调用并随后使用 userinput = userinput.toString。

我已经使用 Apps Script 大约一个月零几天了，我认为转换为 GenericWidget 以外的其他类型对于任何想要在将值传递给另一个值后以特定类型的方式修改值的人都会有所帮助方法。

我也做了很多研究，试图为我的问题找到解决方案，但就像过去使用 Apps Script 的几次一样，我发现由于它是一种较年轻的语言，因此没有像使用一样多的有用信息Javascript、HTML 和 XML 等语言。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:58:41.333

您必须使用 e.parameter.textBoxName 获取文本框值，然后将值重新分配给文本框。一个简短的例子会更明确

```
function doGet(){
 var app = UiApp.createApplication();
 var textbox = app.createTextBox().setName('txt').setId('txt')
// add other elements, handlers, callBackElements, etc...
}

function changetext(e){
var app = UiApp.getActiveApplication();
var textBoxValue = e.parameter.txt ; // get the value in the text box
var txtBoxWidget = app.getElementById('txt') ; get the widget by its ID
txtBoxWidget.setText(textBoxValue+'/'):// assign the modified value
return app ;// update the UI with new value
} 
```

# jquery - Microsoft JScript 运行时错误：'$' 是未定义的错误消息，试图将 jquery 与 ASP.NET 一起使用

> ID：11741242
> 
> 赞同：0
> 
> 时间：2012-07-31T13:28:38.560
> 
> 标签：jquery, asp.net-mvc

我不断收到以下错误消息：Microsoft JScript 运行时错误：'$' is undefined

我已经包含了 jquery ui js 文件，如下所示：

```
 <html xmlns="http://www.w3.org/1999/xhtml">
         <head runat="server">
         <title>jquery Test Page</title>
          <script src="@Url.Content("~/Scripts/jquery-1.4.1.js")" type="text/javascript"></script>

         <script src="@Url.Content("~/Scripts/jquery-ui-1.8.11-min.js")" type="text/javascript"></script>

         <script>
              $(function () {
              $('#startdate').datepick({ dateFormat: 'dd/mm/yyyy' });
              });        
         </script>
         </head>
        <body>
           <form id="form1" runat="server">
             jquery date picker test: <asp:TextBox ID="startdate" runat="server"></asp:TextBox>
           </form>
        </body>
        </html> 
```

我认为问题在于 URL.CONTENT 包含 - 编译器抱怨它在 Url.Content 行中找不到 js 文件。但我可以在我的解决方案文件夹中看到它们——它们肯定包含在 Scripts 文件夹中。我认为这是我的报价，但我无法弄清楚它是什么。我尝试将 Url.Contents 中的实际文件名更改为使用单引号而不是双引号。但这并没有解决问题。我也试过没有引号。

也许您可以看到我缺少的东西-我确定我忽略了一些简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:26:16.697

我看到的一些东西：

1.  **链接不好？** 您的 jQuery UI 链接可能是错误的。通常 ASP.NET MVC 初始设置项目中的文件名（我假设这是您在这里使用的基础）是 jquery-ui-1.8.11.min.js。可能需要将破折号更改为“11”之后的点。但是如果没有在 VS 中看到您的设置，我无法确定。
2.  **错误的用户界面方法。**“datepick”不是 jQuery UI 中的有效方法。如果您尝试实例化日期选择器，则应改用**日期选择器**。
3.  **ASP.NET 控件。**如果这是一个 MVC 项目（我再次假设它是）你不应该使用 asp:TextBox。请改用输入标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:30:27.827

您需要包括 jQuery，而不仅仅是 jQuery UI。

# asp.net - 是否可以根据用户在 MVC 应用程序（html 菜单列表）中的角色隐藏菜单项？

> ID：11741247
> 
> 赞同：5
> 
> 时间：2012-07-31T13:29:01.723
> 
> 标签：asp.net, asp.net-mvc, authentication, roles

我已经为 webforms 应用程序回答了这个问题，但是我可以用这个代码隐藏我的管理菜单项吗？是否可以使用站点地图绑定或其他方式？

我的菜单在：Layout.cshtml

> ```
>  <ul id="navlist">
>         <li class="first"> <a href="@Url.Content("~")" id="current">Home</a> </li>
> 
>         <li>
>             <a href="#">User</a>
>             <ul class="second">
>                 <li> <a href="@Url.Content("~/Service/")">> Services</a></li>
>             </ul>
>         </li>
> 
>         <li> 
>             <a href="#">Administration</a>
>             <ul class="second">
>                 <li><a href="@Url.Content("~/ServiceManager")">> Services</a></li>
>             </ul>
>         </li>
> 
>         <li>@Html.Partial("_LogOnPartial") </li>
>     </ul> 
> ```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T03:26:22.557

如 Alternative 所述，使用简单 if 语句的适用性取决于：

- 你有多少角色（因为你可能希望通过避免多次查询来避免对数据库的多次查询

```
if(User.IsInRole("whatever")) 
```

- 如果您使用自定义角色和成员资格提供程序，在这种情况下，您可能希望避免同时使用 User.IsInRole，因为它每次都会打开到数据库的新连接。

[Brij Mohan Dammani](http://techbrij.com/981/role-based-menu-asp-net-mvc)描述了一个解决方案，它具有一些不错的功能，但我喜欢在视图中添加太多逻辑。在可能的面向对象语言中，我也更喜欢强类型对象。

基于 Brij Dammani 描述的代码，我现在使用一个模型：

```
namespace Whatever
{
  public class RoleMenuItem: MenuItem
  {
    public RoleMenuItem(){}
    public RoleMenuItem(string linkText, string actionName, string controllerName, string roleNames)
    {
        LinkText = linkText;
        ActionName = actionName;
        ControllerName = controllerName;
        RoleNames = roleNames;
    }
    public string RoleNames { set { Roles = value.Split(new String[] { "," }, StringSplitOptions.RemoveEmptyEntries); } }
    internal string[] Roles;
  }
  public class MenuItem
  {
    public string LinkText { get; set; }
    public string ActionName { get; set; }
    public string ControllerName { get; set; }
  }
  public class RoleMenu : System.Collections.Generic.IEnumerable<MenuItem>
  {
    private readonly List<RoleMenuItem> _roleMenuItems = new List<RoleMenuItem>();
    private readonly string[] _userRoleNames;
    public readonly bool _isAuthenticated;
    public RoleMenu()
    {
        if (_isAuthenticated = WebSecurity.User.Identity.IsAuthenticated)
        {
            _userRoleNames = Roles.GetRolesForUser();
        }
    }
    public RoleMenu(IDataContext context) 
    {
        if (_isAuthenticated = WebSecurity.User.Identity.IsAuthenticated)
        {
            string userName = HttpContext.Current.User.Identity.Name;
            User usr = context.Users.FirstOrDefault(Usr => Usr.UserName == userName) ;
            _userRoleNames = (usr==null)? new string[0]: usr.Roles.Select(r => r.RoleName).ToArray(); 

        }
    }
    public RoleMenu Add(RoleMenuItem menuItem)
    {
        string[] menuRoles = menuItem.Roles;
        if (
                menuRoles.Contains("All" ) ||
                (!_isAuthenticated && menuRoles.Contains("Anonymous")) ||
                (_isAuthenticated && (menuRoles.Contains("Authenticated") || menuRoles.Any(mr=>_userRoleNames.Contains(mr))))
            )
        {
            _roleMenuItems.Add(menuItem);
        }
        return this;
    }
    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
    public System.Collections.Generic.IEnumerator<MenuItem> GetEnumerator()
    {
        return _roleMenuItems.GetEnumerator();
    } 
    public IEnumerable<MenuItem> ItemsForRole(string roleName)
    {
        return _roleMenuItems.Where(r => r.Roles.Contains(roleName));
    }
} 
```

然后在每个 Controller 的构造函数中（为依赖注入而设置）

```
ViewBag.Menu = new RoleMenu(_db); 
```

并在 _Layout 视图中

```
@using WhateverNamespace
<nav>
    <ul id="menu">
    @{
       RoleMenu menu = (ViewBag.Menu ?? new RoleMenu())
          .Add(new RoleMenuItem("Home", "Index", "Home","Anonymous"))
          .Add(new RoleMenuItem("Home", "Auth", "Home","Authenticated"))
          .Add(new RoleMenuItem("About", "About", "Home","All"))
          .Add(new RoleMenuItem("Administer", "Index", "Administrators","Webmaster,Administrator"))...;
       foreach (var link in menu)
       {
          <li> 
              @Html.ActionLink(link.LinkText, link.ActionName,link.ControllerName)
            .... 
```

或者

```
 if((var adminMenuItems=menu.ItemsFoRole("admin")).Any()) {
       <li><ul>
       foreach (var link in adminMenuItems) {
           <li> ....
       } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T13:33:10.460

只需添加此 IF 条件即可正常工作。其中“管理员”是您要显示此菜单项的用户角色。

> ```
>  @if(User.IsInRole("Administrator"))
>            {
> 
>     <li>        
>         <a href="#">Administration</a>       
>         <ul class="second">       
>             <li><a href="@Url.Content("~/ServiceManager")">> Services</a></li>       
>         </ul>       
>     </li>
> 
>         } 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-31T14:12:58.533

您可以使用它来根据用户角色显示或隐藏：

```
 @using Microsoft.AspNet.Identity
    @using Microsoft.AspNet.Identity.Owin;

    @if (Request.IsAuthenticated)
    {
        var userManager = Request.GetOwinContext().GetUserManager<IdentitySample.Models.ApplicationUserManager>();
        var userRoles = userManager.GetRoles(User.Identity.GetUserId());
        var role = userRoles[0]; 

   if (role == "Admin")
        {
           <p>Hello Admin!</p>

        }

   }` 
```

# git - git subtree merge 和 git-subtree 有什么区别

> ID：11741249
> 
> 赞同：14
> 
> 时间：2012-07-31T13:29:10.713
> 
> 标签：git, git-merge, git-subtree

我刚刚发现了 git-subtree 工具，该工具前段时间成为主要 git repo 的一部分 [https://github.com/apenwarr/git-subtree/](https://github.com/apenwarr/git-subtree/)

但是我不完全理解这个工具在现有的“git read-tree”+“git merge -s subtree”上提供了什么功能。git-subtree 的唯一目的是让生成的提交历史看起来更好，还是它有更多我忽略的功能？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T14:24:16.453

您描述的命令将子树读入存储库。[如文档](https://github.com/gitster/git/blob/master/contrib/subtree/git-subtree.txt)所述，该`git-subtree`命令有更多选项。除其他外，您可以（为简单起见进行注释）：

```
add::
    Create the <prefix> subtree by importing its contents
    from the given <refspec> or <repository> and remote <refspec>.
merge::
    Merge recent changes up to <commit> into the <prefix>
    subtree.
pull::
    Exactly like 'merge', but parallels 'git pull' in that
    it fetches the given commit from the specified remote
    repository.
push::
    Does a 'split' (see above) using the <prefix> supplied
    and then does a 'git push' to push the result to the 
    repository and refspec. This can be used to push your
    subtree to different branches of the remote repository.
split::
    Extract a new, synthetic project history from the
    history of the <prefix> subtree.  The new history
    includes only the commits (including merges) that
    affected <prefix>, and each of those commits now has the
    contents of <prefix> at the root of the project instead
    of in a subdirectory.  Thus, the newly created history
    is suitable for export as a separate git repository. 
```

还有各种标志可以帮助和操纵上述内容。我相信所有这些选项之前都可以通过管道命令链获得。`git-subtree.sh`只是包装它们并使它们更容易执行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-19T16:23:16.287

如果您在将旧子树代码作为 contrib 模块添加到 git 之前查看它：[https](https://github.com/apenwarr/git-subtree/blob/master/git-subtree.sh) ://github.com/apenwarr/git-subtree/blob/master/git-subtree.sh您可以看到 git subtree 工具实际上是围绕较低级别的 git 子树合并策略的更高级的包装器。

它基本上以一种明智的方式利用这些策略来简化子树管理。特别是 --squash 的东西真的非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-20T10:29:10.837

除了有更多的选择之外，`git subtree`还兼顾了 Git 的配置。

但是关于`git subtree pull`，请确保使用 Git 2.36+

当`git subtree`想要创建合并时，它使用了“ [`git merge`](https://github.com/git/git/blob/0ac270cf7c0d77b91670bda843578e943f5790bd/Documentation/git-merge.txt)” ^(（[man](https://git-scm.com/docs/git-merge)）)并让它受最终用户“ `merge.ff`”配置的影响，这已在 Git 2.36（2022 年第二季度）中更正。

请参阅[Thomas Koutcher ( ) 的](https://github.com/koutcher)[提交 9158a35](https://github.com/git/git/commit/9158a3564a970def3375a79e8f3f90927cd8e793)（2022 年 2 月 1 日[）](https://github.com/koutcher)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([0ac270c 提交中](https://github.com/git/git/commit/0ac270cf7c0d77b91670bda843578e943f5790bd))^(，2022 年 2 月 17 日）)[`koutcher`](https://github.com/koutcher)
^([`gitster`](https://github.com/gitster))

> ## [`subtree`](https://github.com/git/git/commit/9158a3564a970def3375a79e8f3f90927cd8e793): 强制合并提交
> 
> ^(签字人：Thomas Koutcher)
> ^(审核人：Johannes Altmanninger)

> 当`merge.ff`设置为`only`in 时`.gitconfig`，`git subtree pull`将失败并出现错误
> 
> ```
> fatal: Not possible to fast-forward, aborting. 
> ```
> 
> 但是该命令确实想在这些地方进行*合并。*
> 
> ^(向() ^([man](https://git-scm.com/docs/git-merge)) ^)添加`--no-ff`参数以强制执行此行为。[`git merge`](https://github.com/git/git/blob/9158a3564a970def3375a79e8f3f90927cd8e793/Documentation/git-merge.txt)

# ruby-on-rails-3 - 使用 irb 填充数据库

> ID：11741253
> 
> 赞同：0
> 
> 时间：2012-07-31T13:29:17.000
> 
> 标签：ruby-on-rails-3

导轨 3.2.3

我的需要是使用最简单的方法填充数据库。所以我创建了一个模型

```
rails g model MyModelName title:string, another_title:string, description:text 
```

现在我正在尝试使用 irb 填充数据库一些数据

```
mm = MyModelName.create :title =>'title1', :another_title=>'fdfds', :description =>'desc1 fdsfds' 
```

但这里有一个错误

```
NameError: uninitialized constant MyModelName
    from (irb):4
    from /home/alex/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:33:38.813

你跑`rake db:migrate`了吗？

你在用`rails console`吗？

# php - 使用递归将php数组转换为xml

> ID：11741254
> 
> 赞同：-1
> 
> 时间：2012-07-31T13:29:24.017
> 
> 标签：php

我希望我的函数将维度 N 的数组转换为 xml，但它不起作用。任何人都可以指出我正确的方向吗？

```
function arrayToXml($array,$render = ""){
if(!is_array($array)){
    return $array;
}
foreach ($array as $key => $value) {
    if(is_array($value)){
        $render .= '<' . $key . '>';
        arrayToXml($value,$render);
    }
    else {
        $render .= '<' . $key . '>';
        $render .= $value;
        $render .=  '</' . $key . '>';
    }
}
return $render; 
```

}

好的，我找到了解决方案：

```
function arrayToXml($array,$render = ""){
if(!is_array($array)){
    return $array;
}
foreach ($array as $key => $value) {
    if(is_array($value)){
        $render .= '<' . $key . '>';
        $render = arrayToXml($value,$render);
        $render .=  '</' . $key . '>';
    }
    else {
        $render .= '<' . $key . '>';
        $render .= $value;
        $render .=  '</' . $key . '>';
    }
}
return $render; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:31:19.590

您没有使用 的返回值`arrayToXml($value,$render);`，但您也需要将其分配给`$render`。

```
// …
if(is_array($value)){
    $render .= '<' . $key . '>';
    $render .= arrayToXml($value,$render);
} 
```

另请注意，可以在 Web 上找到大量现成的脚本来将 PHP 数组转换为 XML。例如[http://snipplr.com/view/3491/](http://snipplr.com/view/3491/)。

# c# - IIS7 中的动态 DLL 加载失败

> ID：11741258
> 
> 赞同：0
> 
> 时间：2012-07-31T13:29:59.730
> 
> 标签：c#, iis, dll, iis-7, dllimport

我们有两个 Web 服务在 IIS7 的不同应用程序池上运行。Web 服务是相同的，不同的是一个连接到测试数据库，另一个连接到实时数据库。

Web 服务需要一个用 Delphi 编写的 DLL 来生成系统所需的一些业务逻辑，我们使用动态 DLL 加载来加载这些逻辑，如下所示：

```
public static class DynamicLinking
    {
        private static int libHandle;
        private static string dllName;

        public static void init(String pDllName)
        {
            dllName = pDllName;
            libHandle = LoadLibrary(pDllName);
        }

        public static void fini()
        {
            FreeLibrary(libHandle);
        }

        [DllImport("kernel32.dll", EntryPoint = "LoadLibrary")]
        static extern int LoadLibrary([MarshalAs(UnmanagedType.LPStr)] string lpLibFileName);

        [DllImport("kernel32.dll", EntryPoint = "GetProcAddress")]
        static extern IntPtr GetProcAddress(int hModule, [MarshalAs(UnmanagedType.LPStr)] string lpProcName);

        [DllImport("kernel32.dll", EntryPoint = "FreeLibrary")]
        static extern bool FreeLibrary(int hModule);

        [UnmanagedFunctionPointer(CallingConvention.StdCall, CharSet = CharSet.Ansi)]
        delegate bool QryFunction(string domainString, string qryString,
                                     int outputStringBufferSize, ref string outputStringBuffer);
        public static void ExecuteDLLFunction(string pfunctionName, int bufferSize,
                                               string pDomain, string inputXMLString,
                                                out string outputString)
        {

            if (libHandle == 0)
                throw new Exception(string.Format("Could not load library \"{0}\"", dllName));

            var delphiFunctionAddress = GetProcAddress(libHandle, pfunctionName);
            if (delphiFunctionAddress == IntPtr.Zero)
                throw new Exception(string.Format("Can't find function \"{0}\" in library \"{1}\"", pfunctionName, dllName));

            var queryFunction = (QryFunction)Marshal.GetDelegateForFunctionPointer(delphiFunctionAddress, typeof(QryFunction));

            var outputStringBuffer = new String('\x00', bufferSize);
            var errorMsgBuffer = new String('\x00', bufferSize);

            if (!queryFunction(pDomain, inputXMLString,
                                bufferSize, ref outputStringBuffer))
                throw new Exception(errorMsgBuffer);

            outputString = outputStringBuffer;   

        }
    } 
```

现在问题出在此处：当我们启动网络时，最后启动的网站将无法加载 dll，而第一个加载的网站将运行良好。

//edit------------------------------------ 奇怪的是，当每个网站复制同一个DLL时，这个然而，问题出现了，如果我们将两个站点链接到同一个 DLL，一切正常

对此有何见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:33:36.173

您应该将每个站点放在单独的应用程序池中，以便 IIS 将在自己的进程中运行每个站点。

# menu - Enyo菜单得到重叠的z-index

> ID：11741262
> 
> 赞同：0
> 
> 时间：2012-07-31T13:30:07.720
> 
> 标签：menu, z-index, overlap, enyo

问题是我单击菜单的按钮我看不到弹出窗口，因为它隐藏在“主要内容”后面。我可以使用 Firebugs 检查元素工具看到这一点。

我尝试使用 z-index 样式，但似乎没有帮助..

有没有其他选择或创造性的解决方案来解决这个问题？

```
 {kind:"FittableColumns", style:"z-index:1;", fit:true, components:[
        {kind:"FittableRows", style:"z-index:1;", fit:true, components:[
            {content:"Main Content",style:"z-index:1;", fit:true},
            {kind: "onyx.Toolbar", style: "height:40px; padding:0px;", components: [
                {kind: "onyx.MenuDecorator", onSelect: "itemSelected", components: [
                    {kind: "onyx.IconButton", src: "assets/menu-icon-bookmark.png"},
                    {kind: "onyx.Menu",style:"z-index:99999;",components: [
                        {components: [
                            {kind: "onyx.IconButton", src: "assets/menu-icon-bookmark.png"},
                            {content: "Bookmarks"} 
                        ]}, 
                        {content: "Favorites"}, 
                        {classes: "onyx-menu-divider"}, 
                        {content: "Recents"}, 
                    ]} 
                ]},  
            ]} 
```

并且代码还在继续，但这不在菜单附近重叠的地方。

提前 Tkx 寻求解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:47:06.863

解决了添加这个，并做了奇迹`{kind: "onyx.Menu", floating: true, components: [`

# sql - PostgreSQL 嵌套 CTE 和 UNION

> ID：11741267
> 
> 赞同：27
> 
> 时间：2012-07-31T13:30:16.570
> 
> 标签：sql, postgresql, union, common-table-expression

我正在尝试使用 PostgreSQL 9.1.3 学习 SQL。我想了解一些让我觉得不一致的行为。以机智：

这有效：

```
WITH innermost AS (SELECT 2)
SELECT * FROM innermost
UNION SELECT 3; 
```

我明白了：

```
 ?column? 
----------
        2
        3 
```

这有效：

```
WITH outmost AS (
        (WITH innermost AS (SELECT 2)
         SELECT * FROM innermost)
)                                
SELECT * FROM outmost; 
```

结果：

```
?column? 
----------
        2 
```

这也有效：

```
WITH outmost AS (
  SELECT 1
  UNION (WITH innermost AS (SELECT 2)
         SELECT * FROM innermost)
)
SELECT * FROM outmost; 
```

我明白了：

```
 ?column? 
----------
        1
        2 
```

但这**不起作用**：

```
WITH outmost AS (
  SELECT 1
  UNION (WITH innermost as (SELECT 2)
         SELECT * FROM innermost
         UNION SELECT 3)
)
SELECT * FROM outmost; 
```

结果：

```
ERROR:  relation "innermost" does not exist
LINE 4:          SELECT * FROM innermost 
```

以我的思维方式，要么最后一个应该成功，要么其他一个应该失败。我没有看到模式。是否有一些一般规则可以让我预测嵌套 CTE 和 UNION 的哪些组合将起作用或不起作用？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-01T07:33:36.620

谜团解开了：我观察到的行为是一个已知的错误。我将相同的原始帖子发送到特定于 PostgreSQL 的列表并得到了这个答案：

> 这是一个错误:-(。解析分析代码似乎认为 WITH 只能附加到集合操作树中的顶层或叶级 SELECT；但语法遵循 SQL 标准，没有这样的说法。 WITH 被接受，并附加到语法上它应该去的中间级 UNION，然后在解析分析期间完全忽略它。将看到修复它。
> 
> ```
>  regards, tom lane 
> ```

[http://archives.postgresql.org/pgsql-novice/2012-07/msg00113.php](http://archives.postgresql.org/pgsql-novice/2012-07/msg00113.php)

# android - 片段中的Android SharedPreferences

> ID：11741270
> 
> 赞同：97
> 
> 时间：2012-07-31T13:30:21.927
> 
> 标签：android, android-fragments, sharedpreferences

我正在尝试阅读 Fragment 中的 SharedPreferences。我的代码是我用来在任何其他活动中获取首选项的代码。

```
 SharedPreferences preferences = getSharedPreferences("pref", 0); 
```

我收到错误

```
 Cannot make a static reference to the non-static method getSharedPreferences(String, int) from the type ContextWrapper 
```

我试图关注这些链接，但没有运气[通过静态方法](https://stackoverflow.com/questions/3806051/accessing-sharedpreferences-through-static-methods)和 [静态 SharedPreferences 访问 SharedPreferences](https://stackoverflow.com/questions/6241340/static-sharedpreferences)。感谢您提供任何解决方案。

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2012-07-31T13:47:10.733

该方法`getSharedPreferences`是`Context`对象的方法，因此仅从 a 调用 getSharedPreferences 是`Fragment`行不通的……因为它不是 Context！（Activity 是 Context 的扩展，所以我们可以从中调用 getSharedPreferences）。

所以你必须通过

```
// this = your fragment
SharedPreferences preferences = this.getActivity().getSharedPreferences("pref", Context.MODE_PRIVATE); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-07-03T09:49:57.973

标记的答案对我不起作用，我不得不使用

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getActivity()); 
```

编辑：

或者只是尝试删除`this`：

```
SharedPreferences prefs = getActivity().getSharedPreferences("pref", Context.MODE_PRIVATE); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-02-06T15:54:21.307

请注意，我上面的用户提供的这个答案是正确的。

```
SharedPreferences preferences = this.getActivity().getSharedPreferences("pref",0); 
```

但是，如果您在调用 onAttach 之前尝试在片段中获取任何内容，getActivity() 将返回 null。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-24T09:17:08.453

您可以像这样制作片段的`SharedPrefences`in`onAttach`方法：

```
@Override
public void onAttach(Context context) {
    super.onAttach(context);
    SharedPreferences preferences = context.getSharedPreferences("pref", 0);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-24T22:51:11.340

这对我有用

```
SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(getContext()); 
```

检查这里[https://developer.android.com/guide/topics/ui/settings.html#ReadingPrefs](https://developer.android.com/guide/topics/ui/settings.html#ReadingPrefs)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-19T16:33:20.533

**要在 Fragment 中定义首选项：** `SharedPreferences pref = getActivity().getSharedPreferences("CargaDatosCR",Context.MODE_PRIVATE); editor.putString("credi_credito",cre); editor.commit();`

**要调用另一个活动或分段偏好数据：** `SharedPreferences pref = getActivity().getSharedPreferences("CargaDatosCR", Context.MODE_PRIVATE); credit=pref.getString("credi_credito",""); if(credit.isNotEmpty)...`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-09T17:44:38.653

也许几年后这对某人有帮助。在 Androidx 上，`SharedPreferences()`进入片段的新方法是实现`gradle dependencies`

```
implementation "androidx.preference:preference:1.1.1" 
```

然后，在片段调用内部

```
SharedPreferences preferences;
preferences = androidx.preference.PreferenceManager.getDefaultSharedPreferences(getActivity()); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-26T21:12:37.103

`getActivity()`在同样的情况下并没有`onAttach()`帮助我，
也许我做错了什么
，但是！我发现了另一个决定，我在 Fragment
中创建了一个字段 并从方法 onCreateView 获得了当前上下文 ，现在我可以使用来自 Fragment 的共享首选项 `Context thisContext`

```
public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {   
...   
thisContext = container.getContext();   
...   
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-03-10T17:03:03.380

给定一个片段，您可以像这样设置 SharedPreferences：

```
val sharedPreferences = activity!!.applicationContext.getSharedPreferences(TAG,   Context.MODE_PRIVATE) // kotlin
SharedPreferences sharedPreferences = getActivity().getApplicationContext().getSharedPreferences(TAG,   Context.MODE_PRIVATE); // java 
```

如果您还有其他问题，请告诉我。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-12T16:23:18.967

在片段 kotlin 中使用 requiredactivity

```
 val sharedPreferences = requireActivity().getSharedPreferences(loginmasuk.LOGIN_DATA, Context.MODE_PRIVATE) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-20T22:39:04.770

可以从一个`Fragment`

做就是了

```
public class YourFragment extends Fragment {

    public View onCreateView(@NonNull LayoutInflater inflater,
                             ViewGroup container, Bundle savedInstanceState) {
        final View root = inflater.inflate(R.layout.yout_fragment_layout, container, false);
        // get context here
        Context context = getContext();
        // do as you please with the context

        // if you decide to go with second option
        SomeViewModel someViewModel = ViewModelProviders.of(this).get(SomeViewModel.class);
        Context context = homeViewModel.getContext();
        // do as you please with the context
        return root;
    }
} 
```

您还可以`AndroidViewModel`在`onCreateView`实现返回应用程序上下文的方法的方法中附加一个

```
public class SomeViewModel extends AndroidViewModel {

    private MutableLiveData<ArrayList<String>> someMutableData;
    Context context;

    public SomeViewModel(Application application) {
        super(application);
        context = getApplication().getApplicationContext();
        someMutableData = new MutableLiveData<>();
        .
        .
     }

     public Context getContext() {
         return context
     }
  } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-03-10T16:56:05.870

获取当前日期和时间或从中获取每个属性：

```
import java.sql.Date;
import java.text.SimpleDateFormat;
import java.util.Calendar;

String timeStamp = new SimpleDateFormat( "dd/MM/yy   HH:mm:ss").format(Calendar.getInstance().getTime());

        String timeStamp1 = new SimpleDateFormat("dd/MM/yy").format(Calendar.getInstance().getTime());
        String timeStamp2 = new SimpleDateFormat("dd").format(Calendar.getInstance().getTime());
        System.out.print(timeStamp1);
        if(timeStamp1.contains("10/03/21")) {
            System.out.print("\ntrue");
        }
        else {
            System.out.print("false");
        } 
```

# ajax - 使用 KnockoutJS 时不会在页面加载时发出 Ajax 请求

> ID：11741277
> 
> 赞同：1
> 
> 时间：2012-07-31T13:30:34.377
> 
> 标签：ajax, json, knockout.js, asp.net-web-api, cors

我是整个前端客户端脚本场景的新手，在处理我最近的项目时遇到了一些困难。我浏览了该网站，找不到任何可以回答我问题的内容。这里可能有一些东西，但由于我的经验不足，我只是没有找到它，如果你能提供这些资源的链接，那就太好了。

我目前正在构建一个客户端，它可以对我构建的跨域 asp.net web api 进行 ajax 调用。我知道 web api 可以在 fiddler 中进行测试。我还成功地在点击事件上进行了调用。

问题是我似乎无法在页面加载和使用 knockoutjs 时让它工作。我试图做一个简单的列表，在页面加载时填充数据，但是当我加载页面并检查提琴手时，我可以看到没有进行 ajax 调用。这可能解释了为什么当我加载页面时内容不存在。我已经尝试将一些静态数据插入到视图模型中并且绑定有效，所以看起来可能是有东西阻塞了 ajax 调用。

我查看了示例并敲了一些代码。我看不出代码有任何问题，但由于我缺乏经验，我肯定有可能遗漏了一些东西。可能还有更有效的方法来进行模型绑定，如果是这样，我将不胜感激来自更有经验的人的任何建议。

代码是：

```
@{
ViewBag.Title = "KnockoutTesting";
}

<!-- MAIN -->
    <div id="main">
        <!-- wrapper-main -->
        <div class="wrapper">
            <ul data-bind="foreach: places">
                <li>
                    <span data-bind="text: title"></span>
                </li>
            </ul>
        </div>
    </div>

@section scripts {
<script type="text/javascript" src="../../Scripts/jquery-1.7.2.js"></script>
<script type="text/javascript" src="../../Scripts/knockout-2.1.0.js"></script>

<script type="text/javascript">

    function PlacesViewModel() {
        var self = this;

        function Place(root, id, title, description, url, pub) {
            var self = this;

            self.id = id;
            self.title = ko.observable(title);
            self.description = ko.observable(description);
            self.url = ko.observable(url);
            self.pub = ko.observable(pub);

            self.remove = function () {
                root.sendDelete(self);
            };

            self.update = function (title, description, url, pub) {
                self.title(title);
                self.description(description);
                self.url(url);
                self.pub(pub);
            };

        };

        self.places = ko.observableArray();

        self.add = function (id, title, description, url, pub) {
            self.places.push(new Place(self, id, title, description, url, pub));
        };

        self.remove = function (id) {
            self.places.remove(function (place) { return place.id === id; });
        };

        self.update = function (id, title, description, url, pub) {
            var oldItem = ko.utils.arrayFirst(self.places(), function (i) { return i.id === id; });
            if (oldItem) {
                oldItem.update(title, description, url, pub);
            }
        };

        self.sendDelete = function (place) {
            $.ajax({
                url: "http://localhost:1357/api/places" + place.id,
                type: "DELETE"
            });
        }
    };

    $(function () {
        var viewModel = new PlacesViewModel();

        ko.applyBindings(viewModel);
        $JQuery.support.cors = true;
        $.get("http://localhost:1357/api/places", function (places) {
            $.each(places, function (idx, place) {
                viewModel.add(place.PlaceID, place.Title, place.Description, place.URL, place.Public);
            });
        }, "json");
    });

</script>
} 
```

在我添加更多功能之前，为了让它工作，它已经被简化了。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:53:47.770

我相信您的问题可能在于您的 Web API 实现。客户端和服务器都必须支持 CORS。根据 Carlos 的[帖子](http://blogs.msdn.com/b/carlosfigueira/archive/2012/02/20/implementing-cors-support-in-asp-net-web-apis.aspx)，Web API 本身并不支持 CORS。他的帖子包含一个代码示例。

# windows-server-2008 - DELL PowerEdge T110 - 无法连接到 Postgres 服务器

> ID：11741281
> 
> 赞同：0
> 
> 时间：2012-07-31T13:30:53.367
> 
> 标签：windows-server-2008, windows-server

我刚刚购买了带有**Microsoft Windows Small Business Server 2011的****DELL PowerEdge T110 II**。

 **我已经安装了 PostgreSQL（最新版本 9.1），并且我已经进行了 pg_hba 配置，以便从其他 LAN PC 访问数据库。

这是我的问题，如果我在服务器启动后尝试使用 PGAdmin 从 LAN PC 快速连接到 PGServer，我可以毫无问题地连接。

几分钟 (2-3) 后，我无法再连接到 PGServer。如果我使用本地 PGAdmin 连接到服务器就没有问题，只有在那之后我才能成功连接到没有问题的 PGServer。另一种解决方案是从服务器上拔下 LAN 电缆并重新插入。这样，来自其他 LAN PC 的 PGAdmin 就可以恢复工作了。

这是我收到的消息

> 服务器不监听 服务器不接受连接：连接库报告无法连接到服务器：连接被拒绝 (0x0000274D/10061) 服务器是否在主机“192.168.4.10”上运行并接受端口 5432 上的 TCP/IP 连接?

Postgres 进程是某种待机状态吗？

（我知道我的英语不是很好，如果你有什么不明白的地方，问我会更好地解释）

编辑：远程桌面也会发生同样的事情，所以这似乎不是 PostgreSQL 问题。**

# cassandra - 将 UUID1 与 phpcassa 一起使用

> ID：11741284
> 
> 赞同：2
> 
> 时间：2012-07-31T13:31:18.370
> 
> 标签：cassandra, uuid, phpcassa

有以下CF：

```
create column family gr_ip2
with column_type = 'Standard' and comparator = 'TimeUUIDType(reversed=true)' ...; 
```

然后执行以下代码：

```
$uuid1 = phpcassa\UUID::uuid1(null, $time);
$cf->insert("$key"  , array($uuid1 => $url) ); 
```

它毫无例外地工作，但最后的 CF 是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:44:58.797

$uuid1 不是字符串，而是一个对象。当我们这样做

```
$cf->insert("$key"  , array($uuid1 => $url) ); 
```

对象转换为字符串，插入失败。phpcassa 没有给出例外，但无论如何插入都会失败。

似乎我们需要使用 ARRAY_FORMAT，所以对象不要“扁平化”为字符串，

```
$uuid1 = phpcassa\UUID::uuid1(null, $time);

$cf->insert_format = phpcassa\ColumnFamily::ARRAY_FORMAT;

$cf->insert("$key"  , array(
      array($uuid1, $url)
) ); 
```

# tinymce - tinyMCE - tinymce-rails - 资产预编译问题

> ID：11741286
> 
> 赞同：2
> 
> 时间：2012-07-31T13:31:25.687
> 
> 标签：tinymce, asset-pipeline

我真的对如何部署 tinyMCE 感到困惑。它的预编译失败，所以我得到了我们很抱歉，但出了点问题。- 错误。

我尝试使用 tinymce-rails gem，但即使在开发中完全按照 github 页面上的所有说明进行操作，也无法使其正常工作。希望有一个稍微冗长的手册。我特别无法使用 formbuilder 代码来使用它。

我想如果我只是将 tinyMCE 原始 js 代码复制到 public/javascripts/tinyMCE 并让 enginx 提供它应该工作的静态文件，但我仍然需要它在开发中并且无法让 rails 以这种方式使用它。障碍仍然是导致上述错误的 capistrano 的预编译错误。

我什至尝试了tinymce-hammer，但也无法让它工作。是否有一个文件，简单的富文本编辑器？

我今天必须完成这件事，所以我在争先恐后。

我欢迎任何解决方案......但请包括尽可能多的细节或网址。谢谢一堆。

# javascript - Knockout.js 多个外部模板和多个 VM 切换失败

> ID：11741287
> 
> 赞同：5
> 
> 时间：2012-07-31T13:31:30.210
> 
> 标签：javascript, templates, mvvm, knockout.js

我正在使用以下内容：

*   淘汰赛-2.1.0.js
*   [koExternalTemplateEngine_all.js](https://github.com/ifandelse/Knockout.js-External-Template-Engine)

我想要达到的目标如下：

*   模板容器加载外部 HTML 并为该 HTML 加载特定的 VM（有效）。
*   模板容器加载/切换到另一个外部 HTML，以及该 HTML 的另一个特定 VM（工作）。
*   模板容器与它们的 VM 一起切换回第一个模板/VM（不起作用！）。

我猜它不起作用的原因是因为模板是在 VM 之前加载的（它确实给了我绑定错误）。

我的网站的结构是这样的（不包括上述库）：

*   `index.html`（持有模板容器）
*   `js/script.js`（持有主 ViewModel）
*   `js/firstvm.js`（持有第一个 ViewModel）
*   `js/secondvm.js`（持有第二个 ViewModel）
*   `tmpl/firstvm.html`（第一个虚拟机的模板）
*   `tmpl/secondvm.html`（第二个虚拟机的模板）

**[或者只是下载源代码并查看问题。](https://www.dropbox.com/s/y9tdo8zs5g9rdr5/external_template.zip)**

最重要的部分：

*   索引.html

    ```
    <button data-bind="click: loadFirstPage">Load first page + ViewModel</button>
    <button data-bind="click: loadSecondPage">Load second page + ViewModel</button>
    < hr />
    <div data-bind="template: { name: function() { return currentTemplate(); }, data: currentData }"></div> 
    ```

*   脚本.js

    ```
    function IndexViewModel() {

        var vm = this;

        this.currentTemplate = ko.observable();
        this.currentData = ko.observable();

        this.loadFirstPage = function() {
            vm.currentTemplate("firstvm");
            vm.currentData(new FirstViewModel());
        };

        this.loadSecondPage = function() {
            vm.currentTemplate("secondvm");
            vm.currentData(new SecondViewModel());
        };

        this.loadFirstPage();
    };
    ko.applyBindings(new IndexViewModel()); 
    ```

*   firstvm.html

    ```
    <p data-bind="text: displayValue"></p> 
    ```

*   secondvm.html

    ```
    <p data-bind="text: displayValue2"></p> 
    ```

*   第一个vm.js

    ```
    function FirstViewModel() {
        this.displayValue = ko.observable("Text from firstvm.js");
    }; 
    ```

*   secondvm.js

    ```
    function SecondViewModel() {
        this.displayValue2 = ko.observable("Text from secondvm.js");
    }; 
    ```

我希望有人可以帮助我解决这个问题。提前致谢！

附言。**忘了提一下：当两次**按下“首页”按钮时，它似乎确实有效（可能是因为加载了正确的虚拟机）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T16:59:14.160

所以看起来问题是名称和数据需要同时更改，因此模板没有绑定到尚不存在的视图模型。有几种方法可以解决这个问题。一种是加载模板并保留它们，但您可以像这样继续重新加载它们：

模板绑定：

```
<div data-bind="template: {name: currentTemplate().name(), 
                data: currentTemplate().data() }"></div> 
```

视图模型：

```
function TemplateViewModel(name, data) {
        this.name = ko.observable(name);
        this.data = ko.observable(data);
    };

    function IndexViewModel() {

        var vm = this;

        this.currentTemplate = ko.observable();

        this.loadFirstPage = function() {           
            vm.currentTemplate(new TemplateViewModel("firstvm", new FirstViewModel()));
        };

        this.loadSecondPage = function() {
            vm.currentTemplate(new TemplateViewModel("secondvm", new SecondViewModel()));
        };

        this.loadFirstPage();
    };
    ko.applyBindings(new IndexViewModel()); 
```

我测试了这个，它有效。您可能想对其进行更多调整，但您明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T11:50:03.700

这已经得到解答，但是我想分享我与标准淘汰模板一起使用的解决方案。我创建了自定义绑定，并将模板渲染调用包装到`setTimeout`队列末尾，它工作正常。这是代码：

```
ko.bindingHandlers.widget = {
    'init': function(element, valueAccessor) {
        return { 'controlsDescendantBindings': true };
    },
    'update': function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var templateName = valueAccessor().widgetTemplate();
        var dataValue = valueAccessor()
        var innerBindingContext = bindingContext['createChildContext'](dataValue);

        // This puts rendering of template to end of queue. 
        // This is to avoid binding errors while new template is assigned to old widget data
        setTimeout(function(){
            ko.renderTemplate(templateName, innerBindingContext, {}, element);
        }, 0);

    }
} 
```

**注意**：由于模板绑定的[淘汰赛 2.3](http://blog.stevensanderson.com/2013/07/09/knockout-v2-3-0-released-v3-0-0-beta-available/) [也接受 observable](http://knockoutjs.com/documentation/template-binding.html#note_5_dynamically_choosing_which_template_is_used)`name`

# asp.net - asp.net 的下拉检查列表在每次回发中都会重复

> ID：11741295
> 
> 赞同：0
> 
> 时间：2012-07-31T13:32:04.517
> 
> 标签：asp.net, drop-down-menu

我正在使用[dropdown-check-list](http://code.google.com/p/dropdown-check-list/)插件创建一个允许多选的下拉列表。

但是，它在使用后的每次回发中都会被复制，这会产生如下内容：

![在此处输入图像描述](../Images/8cc5e197be546e6d6e5fbbd5d3139994.png)

有谁知道为什么会发生这种情况以及如何解决？

**更新**：关于显示一些代码的请求：

Javascript：

```
$(document).ready(function () {
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(load_lazyload);
    load_lazyload();
    ...
}

function load_lazyload() {
    $("#ContentPlaceHolder1_userControl1_listBoxMultiValueNumbers").dropdownchecklist();
    ...
} 
```

C#：这是 listBox 的填充方式：

```
listBoxMultiValueNumbers.DataTextField = ds.Tables[0].Columns["number"].Caption;
listBoxMultiValueNumbers.DataValueField = ds.Tables[0].Columns["number"].Caption;
listBoxMultiValueNumbers.DataSource = ds;
listBoxMultiValueNumbers.DataBind();
listBoxMultiValueNumbers.Items.Insert(0, new ListItem("Select numbers", "-1"));
UpdatePanelUCCNFT.Update(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:40:56.210

我认为你已经在页面加载时加载了下拉列表而不使用回发事件。这就是为什么它每次都绑定的原因。

```
use page_load()
{
  if(!ispostback)
  {
     //load your dropdown here
  }    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:37:44.087

如果您仍然有问题，我不知道。我刚刚遇到了类似的问题，下拉列表在每次回发后都会重复。这解决了我的问题

```
fillDropDownList()
{
 String selectValue = DropDownList.SelectedValue();
 DropDownList.Items.Clear(); // to clear the duplicates
 DropDownList.SelectedValue = selectValue; // to restore previously selected value
 DropDownList.Items.Insert("0", New ListItem(" Select ", ""));
 DropDownList.DataBind();
} 
```

在 page_load

```
if (Page.IsPostBack)
  {
   fillDropDownList();
  } 
```

我希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T17:16:33.627

您调用 load 函数两次，从而获得两个下拉菜单。一旦注册`...add_endRequest(load_lazyload)`并再次明确。我猜如果你删除对它的调用`add_endRequest`会修复它（毕竟，你已经把它包裹起来了`$(document).ready()`）

# php - 如何将 PHP 代码块放入 PHPDoc DocBlock

> ID：11741302
> 
> 赞同：32
> 
> 时间：2012-07-31T13:32:44.797
> 
> 标签：php, documentation, comments, markdown, phpdoc

我正在玩 PHPDoc，并意识到您可以使用 markdown 向 DocBlock 添加一些格式。特别是，我注意到您可以使用反引号来突出显示内联代码。

但是，我似乎无法弄清楚如何将代码块添加到 DocBlock，因为使用 4 个空格似乎不起作用。

我也尝试过使用`<code>`and `<pre>`，虽然这些标签确实出现在生成的文档中，但其中的代码会被 HTML 注释注释掉。

例如，这个 DocBlock：

```
/**
 * This is a test DocBlock
 *
 * <pre>
 *     <?php
 *         echo('hi');
 *     ?>
 * </pre>
 *
 * @return object[] An array of objects.
 */ 
```

生成此 HTML：

```
<pre>
    <!--?php echo('hi'); ?-->
</pre> 
```

我哪里错了？如何将代码块添加到我的 DocBlock？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-04-03T13:58:54.153

phpdocumentor 使用 markdown 的 github 变体。

添加代码的正确方法是：

```
/**
 * This is a test DocBlock
 *
 * ```php
 * echo('hi');
 * ```
 *
 * @return ...
 */ 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-10-14T07:04:12.143

phpDocumentor 手册说对于**描述**

> 你可以根据[Markdown](https://daringfireball.net/projects/markdown/)来格式化你的文本，更具体地说是[Github 风格的 Markdown](https://guides.github.com/features/mastering-markdown/)。使用这种格式很容易使您的文本加粗，添加内联代码示例或轻松生成指向其他站点的链接。— [DocBlocks 内部](https://phpdoc.org/docs/latest/guides/docblocks.html)

[PSR-5 PHPDoc](https://github.com/php-fig/fig-standards/blob/master/proposed/phpdoc.md)说的是**描述**

> 任何解析描述的应用程序都建议支持该字段的 Markdown 标记语言，以便作者可以提供格式和表示代码示例的清晰方式。—[描述](https://github.com/php-fig/fig-standards/blob/d69fe63018e3cb01e9d05806bf46a285a440a4d0/proposed/phpdoc.md#52-description)

那**标签**

> 必须支持 Markdown 作为格式化语言。由于 Markdown 的性质，在同一行或后续行开始标签的描述并以相同的方式解释它是合法的。—[标签](https://github.com/php-fig/fig-standards/blob/d69fe63018e3cb01e9d05806bf46a285a440a4d0/proposed/phpdoc.md#53-tags)

# 使用 Github-Flavored Markdown 的 PHPDoc 示例

```
/**
 * This is a Summary.
 *
 * This is a Description. It may span multiple lines
 * or contain 'code' examples using the _Markdown_ markup
 * language.
 *
 * It's very easy to make some words **bold** and other 
 * words *italic* with Markdown. You can even 
 * [link to Google!](http://google.com).
 *
 * Here's an example of how you can use syntax 
 * highlighting with GitHub Flavored Markdown:
 *
 * ```
 * <?php
 * echo "Hello, world.";
 * ?>
 * ```
 * 
 * You can also simply indent your code by four spaces:
 * 
 *     <?php
 *     echo "Hello, world.";
 *     ?>
 *
 * @see Markdown
 *
 * @param int        $parameter1 A parameter description.
 * @param \Exception $e          Another parameter description.
 *
 * @\Doctrine\Orm\Mapper\Entity()
 *
 * @return string
 */
function test($parameter1, $e)
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-31T13:37:54.903

我认为您不应该添加`<?php`标签，我认为它会在解析时将其剥离。将其视为 phpdoc，您可能可以一起跳过它。

尝试

```
 * <code>
 *         echo('hi');
 * </code> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T13:38:10.283

您应该能够使用：-

```
/**
 * This is a test DocBlock
 *
 * <pre>
 *     &lt;?php
 *         echo('hi');
 *     ?&gt;
 * </pre>
 *
 * @return object[] An array of objects.
 */ 
```

# javascript - 使用 jQuery 选择焦点上的文本框在移动浏览器中不起作用

> ID：11741303
> 
> 赞同：2
> 
> 时间：2012-07-31T13:32:46.050
> 
> 标签：javascript, jquery, html

我在一个最大长度为 4 的页面上有四个文本框。我的目标是当用户填写第一个文本框时，焦点会自动移动到另一个文本框。我编写的方法在所有网络浏览器中都可以正常工作，但在移动浏览器中却不行。

我正在使用的标记：

```
<input tabindex="3" type="text" id="cnumber1" class="inputBx ccNumber" style="width:57px;margin-left: 11px!important" maxlength="4" size="4" autocomplete="off" />
        <input tabindex="4" type="text" id="cnumber2" class="ccNumber" style="width:57px;"  maxlength="4" size="4" autocomplete="off"/>
        <input tabindex="5" type="text" id="cnumber3" class="ccNumber" style="width:56px;"  maxlength="4" size="4" autocomplete="off"/>
        <input tabindex="6" type="text" id="cnumber4" class="ccNumber" style="width:56px;"  maxlength="4" size="4" autocomplete="off"/> 
```

我正在使用的 Jquery 方法：

```
(function($) {
  $.switchFocus = function($this) {
    $this.unbind('keyup');
    $this.each(function() {
      $(this).keyup(function(){
        var $this = $(this),
        inputVal = $this.val(),
        iLen = inputVal.length,
        $nextEle = $this.next();
        if (iLen == $this.attr("size") && $nextEle.length > 0){
          if($nextEle.val().length === 0)
            $nextEle.focus();
        }
      });
    });
  }
}(jQuery)); 
```

我可以就移动浏览器为什么会发生这种情况获得一些帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:57:07.397

一定是部分手机浏览器的bug，不过这个方法应该能解决你的问题，试试看，

```
(function($) {
  $.switchFocus = function($this) {
    $this.unbind('keyup');
    $this.each(function() {
      $(this).keyup(function(){
        var $this = $(this),
        inputVal = $this.val(),
        iLen = inputVal.length,
        $nextEle = $this.next();
        if (iLen == $this.attr("size") && $nextEle.length > 0){
          if($nextEle.val().length === 0)
            $nextEle.focus();
            setTimeout(function(){$nextEle.focus()},0);
        }
      });
    });
  }
}(jQuery)); 
```

[演示](http://fiddle.jshell.net/ocanal/ZL3gz/1/)

# c# - 是表达式的集合 > 可能吗？

> ID：11741306
> 
> 赞同：1
> 
> 时间：2012-07-31T13:32:49.683
> 
> 标签：c#, linq, generics, collections, expression

鉴于此代码：

```
public class PaginationModel<T> : BaseModel
{
    public List<T> Rows { get; set; }

    public PagingInfo PagingInfo { get; set; }

    public void AddColumn<TProp>(Expression<Func<T, TProp>> column)
    {

    }
} 
```

我希望能够使用代码

```
leadListOutputModel.AddColumn(x => x.DateCreated); 
```

然后在我的 MVC 视图中循环通过列集合并针对对象调用表达式，但是因为 TProp 是在方法调用中推断出来的，它似乎不能存储为通用字段，例如

```
 private List<Expression<Func<T, TProp>>> columns = new List<Expression<Func<T, TProp>>>(); 
```

任何人都可以在不使用对象或失去一般好处的情况下想出一种解决方法吗？

- - 编辑

我正在尝试做两件事，

首先，我将一个“SortBy”参数传递给我的控制器，它采用字符串属性的名称，当前通过 ((MemberExpression)expression).Member.Name 提取，其次我想使用Func 在我的 MVC 视图中提取该字段的值。

原因是我正在制作一个分页网格，我希望在控制器中使用很好的语法来配置列，例如我给出的 AddColumn 示例。我想查看列以创建标题行，然后在我的模型集合中循环遍历这些列并针对它们调用 Func 以提取值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:36:08.733

之后你想用这些列*做什么？*稍后您不能真正使用有关结果类型的任何编译时信息，因为它可能因调用而异：

```
AddColumn(x => x.SomeInt32Value);
AddColumn(x => x.SomeDateTimeValue); 
```

如果这些要存储在同一个集合中，则无论如何您*都*必须强制转换或使用更通用的形式。

您可能要考虑使用：

```
public void AddColumn(Expression<Func<T, object>> column) 
```

就“源”类型而言，它仍然是安全的......你会失去“结果”类型，但我认为这对你没有用处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:35:17.013

听起来您正在尝试创建一个集合，其中每个实例都有*不同* `TProp`的.
这是直接不可能的。

相反，您可以创建实现非泛型接口的泛型类。
然后，您可以创建非泛型接口的集合，并将泛型类的实例从泛型方法添加到集合中。

有关此技术的示例，请参阅我的[ExcelExporter 库](https://github.com/SLaks/ExcelExporter/blob/master/ExcelExporter/ExcelExport.cs#L15)及其通用[SheetBase 类](https://github.com/SLaks/ExcelExporter/blob/master/ExcelExporter/Exporters/SheetBase.cs)。

# doctrine-orm - 在学说 dql 中使用 date_format 转换 mysql 查询

> ID：11741307
> 
> 赞同：0
> 
> 时间：2012-07-31T13:32:50.777
> 
> 标签：doctrine-orm, dql

如何在学说中转换此查询？

```
select distinct date_format(data_fine, '%d/%m/%Y')
from calendario 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:40:23.423

> *   使用 Doctrine 的 NativeSQL 函数编写 SQL 语句
>     
>     
> *   编写一个用户定义的函数，以便 Doctrine 在用 DQL 编写时能够识别 DATE_FORMAT 并可以成功地将其转换为 SQL。

来自[http://www.uvd.co.uk/blog/labs/using-mysqls-date_format-in-doctrine-2-0/](http://www.uvd.co.uk/blog/labs/using-mysqls-date_format-in-doctrine-2-0/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-15T12:15:08.050

您需要为此行定义一个名称：

```
select distinct date_format(data_fine, '%d/%m/%Y') AS <name> from calendario 
```

例子：

```
select distinct date_format(data_fine, '%d/%m/%Y') AS day from calendario 
```

# ash - 如何从其他while循环中获取变量？

> ID：11741311
> 
> 赞同：0
> 
> 时间：2012-07-31T13:33:05.660
> 
> 标签：ash

```
#!/bin/bash

read()
{
    count=0
    cat localfile |
    while read line
    do
        FILE[$((count += 1))]="$line"
    done
}

read
for((i=0;i<${#FILE[@]});i++)
do
    echo ${FILE[i]}
done 
```

回声的结果是整个空白。有什么方法可以获取 FILE 数组吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:57:45.920

您在`ash`Almquist shell 下发布了此内容，但您使用`bash`的是 Bourne-Again SHell。

一个问题是管道。当您在 bash 中运行管道时，每一端都在其自己的子 shell 中运行，并且任何变量都是它的本地变量。正确的机制是重定向到循环中。

另一个问题是你的函数被调用`read`，它是一个shell-builtin（你使用它！）。一个好主意是使用命名约定，如`f_`前缀，这样您就不会遇到这些名称冲突。

您遇到的另一个问题是您的第二个`for`循环的语法在几个方面是错误的。这是一个更正的版本：

```
#!/bin/bash

f_read()
{
    count=0
    while read line
    do
        FILE[$((count += 1))]="$line"
    done < localfile
}

f_read
for ((i=0;i<${#FILE[@]};i++))
do
    echo ${FILE[i]}
done 
```

# git - Git合并两个重叠的存储库

> ID：11741313
> 
> 赞同：1
> 
> 时间：2012-07-31T13:33:11.493
> 
> 标签：git

我有这个配置：

```
RepoA
  |-Dir1

RepoB 
```

问题是 RepoB 被复制并修改了 Dir1。有没有办法在不丢失 RepoB 历史的情况下将 RepoB 合并到 RepoA 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-20T06:35:38.190

肯定有一种方法可以挽救 中的历史`RepoB`，如果理解正确，它代表了`Dir1`under的一个版本`RepoA`。

1.  首先，我将首先重写开发分支的历史记录，`RepoB`以便根据模式重命名所有文件`* -> Dir1\*`。也就是说，我会去最早的提交，将`git mv`所有文件中的一个执行到子目录中，然后对其他所有内容进行rebase。这是可行的`git rebase --interactive`。我会为此创建一个在`RepoA`. 让我们称之为`rescue`分支。

2.  接下来，我将同时指出`RepoA`和`RepoB`指向一个共同的祖先。如果`RepoA`有上游，则可以编辑`RepoB`'s以指向同一上游。`.git/config`

3.  然后我们将`rescue`分支推入`RepoB`上游，然后将其捡起。现在有了材料。`git fetch``RepoA``RepoA`

4.  此时，在 中`RepoA`，我们可以挑选`rescue`分支提交到开发分支。

具体场景，从头开始。在这个会话中，我们创建一个`repo-a`从`upstream`. 在`repo-a`我们创建一个`dir1/file`. 然后我们创建一个新的 git repo`repo-b`作为`dir1`. 我们对`file`. 然后我们重写历史记录，以便将文件移动到`dir/file`并重播更改，我们在一个名为`rescue`. 我们`upstream`设置为远程`repo-b`并推`rescue`到那里。然后我们拉`rescue`入，在上面进行`repo-a`rebase ，然后安装为。`rescue``master``rescue``master`

**注意：**历史重写`rescue`是使用一些手动命令破解的。我首先硬重置到基本提交，`git mv`将文件移动到子目录，并修改了根提交。然后我选择在那之后的下一个提交。实际上，我会做一个`git rebase --interactive <root-commit-sha>`，但这很难显示为记录的会话。

```
~$ mkdir upstream
~$ mkdir repo-a
~$ cd upstream
~/upstream$ git init --bare
Initialized empty Git repository in /home/kaz/upstream/
~/upstream$ cd ../repo-a
~/repo-a$ git clone ../upstream .
Cloning into '.'...
done.
warning: You appear to have cloned an empty repository.
~/repo-a$ mkdir dir1
~/repo-a$ cd dir1
~/repo-a/dir1$ cat > file
abc
def
~/repo-a/dir1$ git add file
~/repo-a/dir1$ git commit -m "file added"
[master (root-commit) 1b5cdf9] file added
 1 file changed, 2 insertions(+)
 create mode 100644 dir1/file
~/repo-a/dir1$ git push origin master
Counting objects: 4, done.
Writing objects: 100% (4/4), 252 bytes, done.
Total 4 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (4/4), done.
To /home/kaz/repo-a/../upstream
 * [new branch]      master -> master 
```

好的，现在愚蠢的部分来了：有人复制`repo-a/dir1`，调用它`repo-b`，并将其初始化为 Git 存储库，`file`在版本控制下添加并提交：

```
~/repo-a/dir1$ cd ../..
~$ cp -a repo-a/dir1 repo-b
~$ cd repo-b
~/repo-b$ git init
Initialized empty Git repository in /home/kaz/repo-b/.git/
~/repo-b$ git add file
~/repo-b$ git commit -m "repob"
[master (root-commit) fe0c898] repob
 1 file changed, 2 insertions(+)
 create mode 100644 file 
```

现在，同一个人开始工作`file`，向其中添加材料：

```
~/repo-b$ cat file
abc
def
~/repo-b$ cat >> file
ghi
~/repo-b$ git diff
diff --git a/file b/file
index 5f5521f..8edb37e 100644
--- a/file
+++ b/file
@@ -1,2 +1,3 @@
 abc
 def
+ghi
~/repo-b$ git commit -a -m "ghi"
[master 3e35a62] ghi
 1 file changed, 1 insertion(+) 
```

现在这个人意识到，“哦，不，我在做什么！我想要这个改变，在`repo-a`下面`dir1`！”。

第一步是连接`repo-b`到`upstream`：

```
~/repo-b$ git remote add origin ../upstream 
```

现在，停止工作`master`，并切换到一个`rescue`开始与相同的分支`master`：

```
~/repo-b$ git checkout -b rescue
Switched to a new branch 'rescue'
~/repo-b$ git log
commit 3e35a6216f8788cc7a58f7bb84a2dfaf8e47e720
Author: Kaz <kaz@stackoverflow.help.com>
Date:   Fri Dec 19 22:17:54 2014 -0800

    ghi

commit fe0c898b11124d0174e65b32fdcc956443446dcf
Author: Kaz <kaz@stackoverflow.help.com>
Date:   Fri Dec 19 22:17:25 2014 -0800

    repob 
```

现在，重写 的历史记录，`rescue`使文件位于`dir1`. 首先，重置为根提交，并进行重命名：

```
~/repo-b$ git reset --hard fe0c898b11124d0174e65b32fdcc956443446dcf
HEAD is now at fe0c898 repob
~/repo-b$ mkdir dir1
~/repo-b$ git mv file dir1
~/repo-b$ git commit -a --amend -m "repob"
[rescue e3a6c19] repob
 1 file changed, 2 insertions(+)
 create mode 100644 dir1/file 
```

现在，我们挑选最上面的变化。在重命名之后，更改很好地修补了`dir1/file`：

```
~/repo-b$ git cherry-pick 3e35a6216f8788cc7a58f7bb84a2dfaf8e47e720
[rescue 7f21bf5] ghi
 1 file changed, 1 insertion(+)
~/repo-b$ ls
dir1
~/repo-b$ cat dir1/file 
abc
def
ghi 
```

好的，现在我们将救援包推送到`../upstream`：

```
~/repo-b$ git push origin rescue
Counting objects: 8, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (8/8), 507 bytes, done.
Total 8 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (8/8), done.
To ../upstream
 * [new branch]      rescue -> rescue 
```

再次`repo-a`出发。在那里我们做一个`git fetch`引入`rescue`分支及其对象：

```
~/repo-b$ cd ..
~$ cd repo-a
~/repo-a$ git fetch
remote: Counting objects: 8, done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 8 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (8/8), done.
From /home/kaz/repo-a/../upstream
 * [new branch]      rescue     -> origin/rescue 
```

从这里开始，它是 Git 101 材料。我们将`rescue`分支重新设置在`master`.

```
~/repo-a$ git checkout rescue
Branch rescue set up to track remote branch rescue from origin.
Switched to a new branch 'rescue'
~/repo-a$ git rebase master
First, rewinding head to replay your work on top of it...
Applying: ghi
~/repo-a$ ls
dir1
~/repo-a$ cat dir1/file 
abc
def
ghi
~/repo-a$ # YAY! 
```

然后我们切换回`master`，并快进到`rescue`：

```
~/repo-a$ git checkout master
Switched to branch 'master'
~/repo-a$ git reset --hard rescue
HEAD is now at 2546207 ghi
~/repo-a$ cat dir1/file 
abc
def
ghi 
```

完毕。

# jquery - jQuery 多选选择第一个元素

> ID：11741315
> 
> 赞同：0
> 
> 时间：2012-07-31T13:33:13.640
> 
> 标签：jquery

我想在页面加载发生时自动选择下拉列表的第一个元素（使用 jQuery 多选插件）要使用哪个属性？

```
$('#cmbTicketStatus').multiselect({

  firstchild: 'selected', /* I Guess this is wrong */
  //  noneSelectedText: 'Select Ticket Status',
    selectedList: 1,
    selectedText: '# of # Status Selected'
}).multiselectfilter(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:42:00.740

我会这样做：

```
$('#cmbTicketStatus select option:first-child').prop("selected", true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T01:48:38.673

这实际上需要多选功能。您正在抓取插件，然后像这里其他有帮助的人已经注释掉一样，需要使用本机点击。

```
 var o1= $('#cmbTicketStatus').multiselect("widget");
           o1.find(":checkbox").first().click(); 
```

希望有帮助/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T01:12:01.850

Sagar，抱歉耽搁了，我没有收到您的回复通知...

第一个元素是一个复选框，因为它被插件重新设计，1.) 在它创建的下拉列表中找到一组复选框：

```
 $("select").multiselect("widget").find(":checkbox").each(function(elem, index)
            { 
```

答案 A：使用 is :首先，我们知道 it-s $(this)，但也是循环的元素，所以要么

```
 if(   $(elem).is(":first")  )  this.click(); 
```

或者

```
 if(   $(this).is(":first")  )  this.click(); 
```

答案 B：我们正在循环通过插件构建的元素，当我们通过循环时，有什么更好的地方来切换开关？index 是数组的第一个元素，那么显然我们在从 UI 收集元素的第一次交互中就有了它。

```
 switch( index) 
                              {   

                                      case 0: this.click(); break;

                                      default: break;

                               }
              }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-12T21:02:45.267

这可能不是设计使然，但如果您在选择元素本身中省略“multiple=multiple”，则默认情况下将选择第一个选项。

所以而不是

```
<select multiple='multiple' id=myselect> 
```

简单地做

```
<select id=myselect> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-31T13:36:59.713

看起来多选插件不支持选择选择，您必须手动触发点击事件才能选择：

手动选中或取消选中复选框？

调用“小部件”方法后可以访问复选框。只需手动触发它们的原生点击事件：

```
// manually check (or uncheck) the third checkbox in the menu:
$("select").multiselect("widget").find(":checkbox").each(function(){
   this.click();
}); 
```

由于 jQuery 核心中的这个错误，必须使用本机点击事件（触发器（'click'）将不起作用）。

所有必要的事件和操作，例如更新按钮值，都会自动触发。

或者，您可以为原始选项标签指定 selected 属性，然后调用 MultiSelect 的刷新方法。

来自：[http](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/) : //www.erichynds.com/jquery/jquery-ui-multiselect-widget/ 希望这是您正在使用的同一个多选小部件。

# xml - 防止 `xmlValue` 剥离 标签

> ID：11741318
> 
> 赞同：3
> 
> 时间：2012-07-31T13:33:24.880
> 
> 标签：xml, r, parsing

我遇到了一个问题，其中`xmlValue`剥离了`<br />`我需要保留的标签（或转换为我可以使用的其他字符`strsplit`。

这是一个例子：

```
> f <- htmlParse(getForm("http://sites.target.com/site/en/spot/store_locator_popups.jsp", ajax="true", storeNumber=1889), asText=TRUE)
> xpathSApply(f, "//div[@class=\"sl_results_popup_address\"]", xmlValue)
[1] "1154 S Clark StChicago, IL 60605(312) 212-6300" 
```

与它正在解析的 HTML 相比：

```
<div class="sl_results_popup_address">
1154 S Clark St
<br/>
Chicago, IL 60605
<br/>
(312) 212-6300
</div> 
```

我试过`, recursive=FALSE`了，但这似乎没有帮助。

如果它们是`<p>`和`</p>`换行符，那么它会更容易，因为我可以单独抓住它们，但`<br/>`不包装文本我真的不能朝那个方向发展。希望只有一个选项可以降低在内部完成的剥离级别`xmlValue`（或者可能在`<br/>`文档解析阶段剥离 s ？）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T13:59:38.760

有两件事可能会有所帮助

```
app.data<-getForm("http://sites.target.com/site/en/spot/store_locator_popups.jsp", ajax="true", storeNumber=1889)
app.data<-gsub("<br>","\n",app.data)
f <- htmlParse(app.data, asText=TRUE)
out<-xpathSApply(f, "//div[@class=\"sl_results_popup_address\"]", xmlValue)
> xpathSApply(f, "//div[@class=\"sl_results_popup_address\"]", xmlValue)
[1] "1154 S Clark St\nChicago, IL 60605\n(312) 212-6300"
> 
```

所以只需`br`用其他东西替换标签或使用您的原始代码和

```
> xpathSApply(f, "//div[@class=\"sl_results_popup_address\"]/text()", xmlValue)
[1] "1154 S Clark St"   "Chicago, IL 60605" "(312) 212-6300"   
> 
```

如果你想保留标签

```
dum.fun<-function(x){if(xmlName(x)=="br"){"<br/>"}else{xmlValue(x)}}
xChild<-xpathSApply(f, "//div[@class=\"sl_results_popup_address\"]",xmlChildren)
lapply(xChild,dum.fun)
> unlist(lapply(xChild,dum.fun))
[1] "1154 S Clark St"   "<br/>"             "Chicago, IL 60605"
[4] "<br/>"             "(312) 212-6300" 
> 
```

# android - 如何实现链接的ListViews？

> ID：11741322
> 
> 赞同：0
> 
> 时间：2012-07-31T13:33:44.253
> 
> 标签：android, listview, drop-down-menu, spinner

我想创建一个下拉列表视图并在第一个中选择一个项目时打开另一个（下拉）。我已经阅读了很多关于微调器、ListViews 等的内容。似乎没有什么有用的......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:36:54.077

一般来说，这是一个糟糕的 GUI 模式。并且您应该在从第一个选择项目后手动更改第二个列表视图（微调器）的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:52:01.063

`months drop down`在这里，我的 moto 是在用户选择时将适配器添加到`year`唯一的`year drop down`。

`changemonths()`因此，当用户单击下拉菜单中的年份时，我会调用该方法。

所以每次当用户选择`year`月份下拉菜单时`refresh`

```
 yearDropdown.setAdapter(Adapteryear);//=====> Here I am adding adapter to the year drop down.

 yearDropdown.setOnItemSelectedListener(new OnItemSelectedListener() {

    public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) 
    {
        selectedyear = parentView.getSelectedItemPosition();
        drpyear      = yearDropdown.getSelectedItem().toString();
        changemonths();
    }

    public void onNothingSelected(AdapterView<?> parentView) 
    {

    }
});

 public void changemonths()
 {

  adaptermonth = new ArrayAdapter<CharSequence>(this,android.R.layout.simple_spinner_item);

      for (int i = 1; i <= 12; i++) { 
            if(i<10)
                adaptermonth.add("0"+String.valueOf(i));
            else
                adaptermonth.add(String.valueOf(i));
            }

    monthDropdown.setAdapter(adaptermonth);
 } 
```

这是我自己的应用程序代码。如果您需要，您可以通过这种方式实现。它不是一个解决方案。它只是对您的要求的参考

祝你好运

# cmake - 如果 cmake 2.8 中的值不相等

> ID：11741325
> 
> 赞同：48
> 
> 时间：2012-07-31T13:34:01.613
> 
> 标签：cmake

**短版：**我有只能在一个平台上运行的构建选项。`autotools`我正在转换表格的文件有一个表格检查`if test "$platform_linux" != "yes"`。我可以在我的`CMakeLists.txt`（测试值是否不相等）中做同样的事情吗？

**稍长的版本：按照**[此处](http://www.openguru.com/2009/04/cmake-detecting-platformoperating.html)的建议，我对各种平台进行了测试：

```
 IF(${CMAKE_SYSTEM_NAME} MATCHES "Linux")
    # Linux specific code
    SET(OperatingSystem "Linux")
ENDIF(${CMAKE_SYSTEM_NAME} MATCHES "Linux") 
```

我想做一个表格测试`IF(${CMAKE_SYSTEM_NAME} NOT MATCHES "Linux")`。这似乎不起作用，我能找到的唯一文档是 2002 年的邮件列表帖子，`NOT`这`cmake`表明`1.2`. [[链接](http://www.cmake.org/pipermail/cmake/2002-January/002597.html)]。

`cmake`在以后的版本中是否仍然如此，特别是`2.6`和/或`2.8`？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-07-31T19:36:29.653

你很近！的正确语法[`IF`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command%3aif)是

```
IF(NOT <expression>) 
```

所以在你的具体情况下，你想要

```
IF(NOT ${CMAKE_SYSTEM_NAME} MATCHES "Linux"). 
```

# ios - MKMapView 显示 DetailView - 如何进行转场

> ID：11741334
> 
> 赞同：0
> 
> 时间：2012-07-31T13:34:12.303
> 
> 标签：ios, mkmapview, uistoryboard, uistoryboardsegue

我有一个 MapView，注释来自一个属性列表。现在我想在详细视图中查看更多数据。不幸的是，我不知道如何对 Segue 进行编程，以便显示数据。我希望你明白我的意思。我的英语不太好......我知道prepareforSegue方法中缺少一些内容。我正在使用故事板。提前感谢您的帮助...问候

```
#import "MapViewNewController.h"
#import "MapViewAnnotation.h"
#import "SetCardController.h"

@interface MapViewNewController ()

@end

@implementation MapViewNewController 

@synthesize recipesDictionary = _recipesDictionary;

@synthesize mapView;
@synthesize locationManager;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.mapView.delegate = self;

    [self.mapView setShowsUserLocation:YES];

    MKCoordinateRegion newRegion ;
    newRegion.center.latitude = 50.080635;
    newRegion.center.longitude = 8.518717;
    newRegion.span.latitudeDelta = 15.5;
    newRegion.span.longitudeDelta = 15.5;
    [mapView setRegion:newRegion animated:YES];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"Rezepte" ofType:@"plist"];
    NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path];
    NSArray *anns = [dict objectForKey:@"myRecipes"];
    for(int i = 0; i < [anns count]; i++) {
        float realLatitude = [[[anns objectAtIndex:i] objectForKey:@"latitude"] floatValue];
        float realLongitude = [[[anns objectAtIndex:i] objectForKey:@"longitude"] floatValue];

        MapViewAnnotation *myAnnotation = [[MapViewAnnotation alloc] init];
        CLLocationCoordinate2D theCoordinate;
        theCoordinate.latitude = realLatitude;
        theCoordinate.longitude = realLongitude;
        myAnnotation.coordinate = theCoordinate;
        myAnnotation.title = [[anns objectAtIndex:i] objectForKey:@"blogname"];
        myAnnotation.subtitle = [[anns objectAtIndex:i] objectForKey:@"blogger"];
        [mapView addAnnotation:myAnnotation];

    }      

}

-(MKAnnotationView *)mapView:(MKMapView *)view viewForAnnotation:(id<MKAnnotation>)annotation {
    MKPinAnnotationView *pin = nil;

    if ([annotation isKindOfClass:[MapViewAnnotation class]]) {
        NSString *pinIdentifier = @"myPin";

        pin = (MKPinAnnotationView*)[view dequeueReusableAnnotationViewWithIdentifier:pinIdentifier];
        if (!pin) {

            pin = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:pinIdentifier];

            pin.image = [UIImage imageNamed:@"pin2.png"];
            pin.canShowCallout = YES;

            pin.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

        }
            }

    return pin;
}

//if Button pressed
-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control{

     [self performSegueWithIdentifier:@"showPinDetails" sender:self];

    }

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([segue.identifier isEqualToString:@"showPinDetails"]) {

       // SetCardController *scc = [segue destinationViewController];

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T20:52:17.800

当你`performSegueWithIdentifier:sender`从一个 callout 里面`annotationView:view`时， sender 可以是这个`view.annotation`属性，它唯一地标识了用户刚刚点击的 callout。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T15:36:40.883

以上两个答案有帮助，但不能帮助您识别我假设是您的 p-list 的一部分的唯一引脚详细信息。

所有视图都继承了标签的属性。它可以使用它来保存 pin 索引（或键），因此将其传递给目标 View Controller 以唯一标识您持有的数据。

由于调用视图中的按钮继承自视图，因此您可以对其进行标记，并在其在方法 didselectAnnotationView 中处于活动状态时传递索引。使用的 if 语句取消选择用户位置引脚。

```
-(void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{

if (![(PointAnnotation *)view.annotation isKindOfClass:[MKUserLocation class]])
{
    PointAnnotation *myAnn = (PointAnnotation *)view.annotation;

    detailButton.tag = myAnn.pinIndex;
    NSLog (@"Pinindex = %d", myAnn.pinIndex);
}

} 
```

detailButton.tag 现在可以用作 segue 选择中的参数。

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
// Post data to destination VC

if ([[segue identifier] isEqualToString:@"clubsToDetail"])
{

    ClubsMasterData *current = [[ClubsMasterxmlParser ClubsMasterDatas] objectAtIndex:detailButton.tag];

    ClubsDetailViewController *DVC = [[ClubsDetailViewController alloc] init];
    DVC = [segue destinationViewController];

    DVC.linkURL =  current.linkURL;
    DVC.distance = current.distance;

}
} 
```

这里我索引了一个 Array 而不是 Plist，但原理是一样的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T02:30:35.943

我相信您没有在 Interface Builder 中设置 Segue 的标识符。我试过你的代码，它对我有用（Xcode 4.4 iOS 5.1 SDK）

# mysql - 共享主机上的自动 MySQL 备份

> ID：11741335
> 
> 赞同：0
> 
> 时间：2012-07-31T13:34:17.407
> 
> 标签：mysql, shared-hosting, database-backups

因为我不是编码员，所以我应该在这里停下来，但我很感兴趣我能走多远来构建一个自动 SQL 脚本。

案例：网站托管在使用 CPanel 的共享主机服务器上。该网站仅使用一个数据库，其中一张表是日志。现在日志表已经达到了 300k 行......（我可能在这里做错了......这是一个受欢迎的网站？:)）

所以我需要减少日志表，但我想做一个备份。所以这是我的想法：

设置备份数据库并复制旧条目，同时仅使用四分之一年的表，因此 1 月至 4 月的日志将存储在 table_2012-q1 等中。

方法：

我想使用 cron 和电子邮件警报。

问题：

1.  有没有更好和更容易的解决方案来使用这个行号进行备份。
2.  如果我通过 INSERT/DELETE 行执行“移动行”，我如何检查哪一个已准时准备好？
3.  我是否需要关注这个过程的性能，因为它应该在后台工作？换句话说，它是选择还是转储？

对不起，如果它太虚拟，但我想学习！我也不想为此使用太多处理器。

谢谢安德拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:45:15.007

由于您使用的是共享主机，我很确定您将无法访问 cron，所以这里有一个替代方案：

由于数据库充满了日志数据：

```
1\. Create a new table, regardless of the name or time period
2\. Move the files (from a certain id) from one table to the next 
```

这个链接会更好地解释：[mysqldump partial database](https://stackoverflow.com/questions/8914887/mysqldump-partial-database)

如果这是活动数据库，我会克隆它，然后尝试移动数据的方式，因为您不认为自己是编码员。

希望这可以帮助。

# javascript - 将 JSON 数组与 jQuery 相结合

> ID：11741337
> 
> 赞同：5
> 
> 时间：2012-07-31T13:34:25.387
> 
> 标签：javascript, jquery, json

我现在花了整个上午都在搞砸这个并在这里阅读，但发现自己在转圈！

我正在尝试使用出色的`AmCharts`Javascript Charts 绘制图表，以条形图的形式显示股票持有量，以折线图的形式显示股票走势。

我无法从一个查询中获取两组数据到我的数据库，也无法使用 AmCharts StockChart，因为它不是基于时间的数据……因此，我有两组需要与 Javascript 结合的数据。

正在从数据库中提取数据并以 JSON 数组的形式成功返回，类似于：

**销售数据：**

```
[{"brandName":"Fender","gearShiftedPerMonth":"35","retailSalesPerMonth":"55"},
 {"brandName":"Gibson","gearShiftedPerMonth":"23","retailSalesPerMonth":"43"},
 {"brandName":"Epiphone","gearShiftedPerMonth":"10","retailSalesPerMonth":"13"}] 
```

**库存数据：**

```
[{"brandName":"Gibson","stockValue":"1234"},
 {"brandName":"Fender","stockValue":"975"},
 {"brandName":"Epiphone","stockValue":"834"}] 
```

显然，实际数字是在该示例中组成的！

现在，我需要做的是结合这些来创建这个：

**组合数据**

```
[{"brandName":"Fender","gearShiftedPerMonth":"35","retailSalesPerMonth":"55","stockValue":"975"},
 {"brandName":"Gibson","gearShiftedPerMonth":"23","retailSalesPerMonth":"43","stockValue":"1234"},
 {"brandName":"Epiphone","gearShiftedPerMonth":"10","retailSalesPerMonth":"13","stockValue":"834"}] 
```

我们所拥有的是销售数据集与库存数据集相结合，以添加`stockValue`添加到相应品牌名称记录的附加数据。

我试过使用`$.extend`，但我不知道在这种情况下如何使用它。

可能需要注意的是，数据对可能不一定按正确的顺序排列，虽然不太可能，但可能不匹配，因此必须实现某种归零错误捕获。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T13:41:02.653

您首先需要做的是将数据转换为两个对象，其属性是您要合并在一起的值：

```
{
"Fender" : {"gearShiftedPerMonth":"35","retailSalesPerMonth":"55"},
"Gibson" : {"gearShiftedPerMonth":"23","retailSalesPerMonth":"43"},
"Epiphone" : {"gearShiftedPerMonth":"10","retailSalesPerMonth":"13"}
} 
```

和

```
{
"Gibson": {"stockValue":"1234"},
"Fender": { "stockValue":"975"},
"Epiphone": { "stockValue":"834"}
} 
```

转换完成后，您将拥有两个可以使用`$.extend`或其他功能合并的对象。

*更新*

对于大型集合，这会在几乎线性的时间内给出结果：

```
var salesa = {}, stocka = {};
$.each(sales, function(i, e) {
    salesa[e.brandName] = e;
});
$.each(stock, function(i, e) {
    stocka[e.brandName] = e;
});

var combine = {};
$.extend(true, combine, salesa, stocka) 
```

`$each(stock...`如果合并发生在第二个转换回调 ( ) 期间而不是单独调用，则可以调整更快的速度，`$.extend()`但它失去了一些明显性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:09:56.607

如果您的示例代码反映了现实，那么 jQuery`$.extend`将是*错误*的工具。

它盲目地将数据从一个对象复制到另一个对象。请注意，您的数据顺序并不一致。SALES DATA 排在`Fender`第一位，而 STOCK DATA 排在`gibson`第一位。

所以 jQuery`$.extend`混合了这两个结果。的“gearShifted”和“retailSales”以`Fender`.的“brandName”和“stockValue”结尾`Gibson`。

* * *

您需要的是迭代一个数组，并在另一个数组中查找“brandName”，然后复制您想要的数据。如果你愿意，你可以使用`$.extend`它的那部分......

```
var sales_data = 
[{"brandName":"Fender","gearShiftedPerMonth":"35","retailSalesPerMonth":"55"},
 {"brandName":"Gibson","gearShiftedPerMonth":"23","retailSalesPerMonth":"43"},
 {"brandName":"Epiphone","gearShiftedPerMonth":"10","retailSalesPerMonth":"13"}]

var stock_data = 
[{"brandName":"Gibson","stockValue":"1234"},
 {"brandName":"Fender","stockValue":"975"},
 {"brandName":"Epiphone","stockValue":"834"}]

var combined = $.map(sales_data, function(obj, i) {

    return $.extend({}, obj, $.grep(stock_data, function(stock_obj) {
        return obj.brandName === stock_obj.brandName
    })[0]);
}); 
```

* * *

*请注意，这并不是非常有效，但除非数据集非常庞大，否则这应该不是问题。*

* * *

***演示：http:*** [//jsfiddle.net/sDyKx/](http://jsfiddle.net/sDyKx/)

***结果：***

```
[
    {
        "brandName": "Fender",
        "gearShiftedPerMonth": "35",
        "retailSalesPerMonth": "55",
        "stockValue": "975"
    },
    {
        "brandName": "Gibson",
        "gearShiftedPerMonth": "23",
        "retailSalesPerMonth": "43",
        "stockValue": "1234"
    },
    {
        "brandName": "Epiphone",
        "gearShiftedPerMonth": "10",
        "retailSalesPerMonth": "13",
        "stockValue": "834"
    }
] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T14:12:48.663

我认为他想要做的是将两个数据集连接起来，就好像它们是表一样，通过品牌名称连接。从我一直在测试的情况来看，jQuery 的 $.extend() 函数并没有解决这个问题，而是根据对象在它接收的对象数组中的索引来合并对象。

我认为密钥的匹配需要手动完成。

```
stock = [{"brandName":"Fender","gearShiftedPerMonth":"35","retailSalesPerMonth":"55"},
 {"brandName":"Gibson","gearShiftedPerMonth":"23","retailSalesPerMonth":"43"},
 {"brandName":"Epiphone","gearShiftedPerMonth":"10","retailSalesPerMonth":"13"}];
value = [{"brandName":"Gibson","stockValue":"1234"},
 {"brandName":"Fender","stockValue":"975"},
 {"brandName":"Epiphone","stockValue":"834"}];

var results = [];
$(stock).each(function(){
    datum1 = this;
    $(value).each(function() {
        datum2 = this;
        if(datum1.brandName == datum2.brandName)
            results.push($.extend({}, datum1, datum2));
    });
}); 
```

这将导致：

```
[{"brandName":"Fender","gearShiftedPerMonth":"35","retailSalesPerMonth":"55","stockValue":"975"},
{"brandName":"Gibson","gearShiftedPerMonth":"23","retailSalesPerMonth":"43","stockValue":"1234"},
{"brandName":"Epiphone","gearShiftedPerMonth":"10","retailSalesPerMonth":"13","stockValue":"834"}] 
```

而不是使用`$.extend()`返回的东西：

```
[{"brandName":"Gibson","gearShiftedPerMonth":"35","retailSalesPerMonth":"55","stockValue":"1234"},
{"brandName":"Fender","gearShiftedPerMonth":"23","retailSalesPerMonth":"43","stockValue":"975"},
{"brandName":"Epiphone","gearShiftedPerMonth":"10","retailSalesPerMonth":"13","stockValue":"834"}] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T13:57:19.623

在 vanilla javascript 中，您可以执行以下操作：

```
var sales = [{"brandName":"Fender","gearShiftedPerMonth":"35","retailSalesPerMonth":"55"},
 {"brandName":"Gibson","gearShiftedPerMonth":"23","retailSalesPerMonth":"43"},
 {"brandName":"Epiphone","gearShiftedPerMonth":"10","retailSalesPerMonth":"13"}];

var stock = [{"brandName":"Gibson","stockValue":"1234"},
 {"brandName":"Fender","stockValue":"975"},
 {"brandName":"Epiphone","stockValue":"834"}];

var combined = stock.slice(0);     

for (var i = 0; i < stock.length; i++) {
    for (var j = 0; j < sales.length; j++) {
        if (stock[i].brandName === sales[j].brandName) {
            for (var attrname in sales[j]) { combined[i][attrname] = sales[j][attrname]; }
        }
    }
}

JSON.stringify(combined) 
```

生产

```
[
{"brandName":"Gibson","stockValue":"1234","gearShiftedPerMonth":"23","retailSalesPerMonth":"43"},
{"brandName":"Fender","stockValue":"975","gearShiftedPerMonth":"35","retailSalesPerMonth":"55"},
{"brandName":"Epiphone","stockValue":"834","gearShiftedPerMonth":"10","retailSalesPerMonth":"13"}
] 
```

# visual-studio-2010 - 如何在 TFS 2010 中编辑 .sln 文件？

> ID：11741339
> 
> 赞同：3
> 
> 时间：2012-07-31T13:34:29.147
> 
> 标签：visual-studio-2010, tfs

我需要从解决方案文件 (.sln) 中删除几行。更改 .csproj 文件时，我可以使用“卸载项目”。但是在 TFS 中编辑 .sln 文件的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T13:40:21.223

最好的办法是关闭解决方案并改用文本编辑器（记事本或同等工具）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T19:09:39.747

您可以为此目的使用 TFS Powertools。它使您能够从 Windows 资源管理器中进行 tfs-“操作”（并使用 txteditor 编辑 .sln 文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-04T20:10:02.910

另一种选择是将 Visual Studio 中的 sln 复制为临时文本文件，并在那里进行编辑。我使用它来处理一些更改，例如对 sln 文件的正则表达式更新，而无需使用 VS UI 来调整大量的构建处理器更改（并且无需使用公共在线 Web 工具进行）。更新文本后，将新文本粘贴回原始 sln 文件并保存，使用记事本等工具。然后 VS 会告诉您它需要重新加载新的 sln，并且将加载更改。

# java - 字符串连接上的特定类型的哈希

> ID：11741343
> 
> 赞同：4
> 
> 时间：2012-07-31T13:34:37.810
> 
> 标签：java, string, hash, concatenation

我需要一个具有以下属性的 Java 中的专用散列函数 h(X,Y)。

1.  X 和 Y 是字符串。
2.  h(X,Y) = h(Y,X)。
3.  X 和 Y 是任意长度的字符串，h(X,Y) 的结果也没有长度限制。
4.  如果 X 不等于 A 且 Y 不等于 B，则 h(X,Y) 和 h(Y,X) 不应与 h(A,B) = h(B,A) 发生冲突。
5.  h() 不需要是安全散列函数，除非必须满足上述要求。
6.  相当高性能，但这是一个开放式标准。

在我看来，我认为要求 2 和 4 有点矛盾，但也许我担心太多了。

目前，我在 Java 中所做的事情如下：

```
public static BigInteger hashStringConcatenation(String str1, String str2) {
    BigInteger bA = BigInteger.ZERO;
    BigInteger bB = BigInteger.ZERO;
    for(int i=0; i<str1.length(); i++) {
        bA = bA.add(BigInteger.valueOf(127L).pow(i+1).multiply(BigInteger.valueOf(str1.codePointAt(i))));
    }
    for(int i=0; i<str2.length(); i++) {
        bB = bB.add(BigInteger.valueOf(127L).pow(i+1).multiply(BigInteger.valueOf(str2.codePointAt(i))));
    }
    return bA.multiply(bB);
} 
```

我认为这很可怕，但这就是为什么我正在寻找更好的解决方案。谢谢。

忘了提到在 OS X 10.7 上具有 8GB RAM 和 Java 1.6 的 2.53GHz 双核 Macbook Pro 上，两个 8 (ASCII) 字符串的哈希函数大约需要 270 微秒。我怀疑随着字符串大小的增加，或者如果使用 Unicode 字符，这会更高。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:37:33.800

为什么不把他们的 hashCode 加在一起呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:42:37.410

您对要求 4 的要求有多严格？如果答案是“不完全严格”，那么您可以将两个字符串连接起来，将较小的字符串放在第一位（这将导致 h('A', 'B') 和 h('AB', '') 发生冲突)

如果有任何您确定永远不会出现在字符串值中的字符，那么您可以使用单个实例作为分隔符，这将解决上面的冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T13:52:39.220

> 3) 如果 X 不等于 A 且 Y 不等于 B，则 h(X,Y) 和 h(Y,X) 不应与 h(A,B) = h(B,A) 发生冲突。

我认为这个要求规定了任何产生小于（平均）原始字符串的数字的哈希函数。

任何不发生碰撞的要求都会[遇到鸽洞原则](http://en.wikipedia.org/wiki/Pigeonhole_principle)的障碍。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T13:53:11.357

从第 4 点我们可以得到，在为真之前`h(x,"")`永远不会发生冲突。所以，你对产生的东西没有大小限制，因为它应该为每个独特的产生独特的结果。但是有无数个唯一的字符串。我认为这不是一个正确的哈希函数。`h(y,"")``x.equals(y)``h(x,y)``x`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T08:49:17.353

今天我决定为这个哈希函数问题添加我的解决方案。它没有经过很好的测试，我也没有测量它的性能，所以你可以用你的评论反馈给我。我的解决方案位于以下：

```
public abstract class HashUtil {
    //determines that we want hash, that has size of 32 integers ( or 32*32 bits )
    private static final int hash_size = 32;

    //some constants that can be changed in sake of avoiding collisions
    private static final BigInteger INITIAL_HASH = BigInteger.valueOf(7);
    private static final BigInteger HASH_MULTIPLIER = BigInteger.valueOf(31);
    private static final BigInteger HASH_DIVIDER = BigInteger.valueOf(2).pow(32*hash_size);

    public static BigInteger computeHash(String arg){
        BigInteger hash = new BigInteger(INITIAL_HASH.toByteArray());
        for (int i=0;i<arg.length()/hash_size+1;i++){
            int[] tmp = new int[hash_size];
            for(int j=0;j<Math.min(arg.length()-32*i,32);j++){
                tmp[i]=arg.codePointAt(i*hash_size+j);
            }
            hash = hash.multiply(HASH_MULTIPLIER).add(new BigInteger(convert(tmp)).abs()).mod(HASH_DIVIDER);
        }
        //to reduce result space to something meaningful
        return hash;
    }

    public static BigInteger computeHash(String arg1,String arg2){
        //here I don't forgot about reducing of result space
        return computeHash(arg1).add(computeHash(arg2)).mod(HASH_DIVIDER);
    }

    private static byte[] convert(int[] arg){
        ByteBuffer byteBuffer = ByteBuffer.allocate(arg.length*4);
        IntBuffer intBuffer = byteBuffer.asIntBuffer();
        intBuffer.put(arg);
        return byteBuffer.array();
    }

    public static void main(String[] args){
        String firstString="dslkjfaklsjdkfajsldfjaldsjflaksjdfklajsdlfjaslfj",secondString="unejrng43hti9uhg9rhe3gh9rugh3u94htfeiuwho894rhgfu";
        System.out.println(computeHash(firstString,secondString).equals(computeHash(secondString,firstString)));
    } 
```

}

我想我的解决方案不应该对长度小于 32 的单个字符串产生任何冲突（更准确地说，对于长度小于`hash_size`变量值的单个字符串）。也不是很容易找到碰撞（我认为）。要为您的特定任务调节哈希冲突概率，您可以尝试使用其他素数而不是变量中的`7`和。你怎么看待这件事？对你来说足够好吗？`31``INITIAL_HASH``HASH_MULTIPLIER`

**PS**我认为如果你尝试更大的素数会更好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T13:55:30.737

建立在 String#hashCode 之上，这不是一个完美的哈希函数，因此它不满足条件 4。

```
public static long hashStringConcatenation(String str1, String str2) {
    int h1 = str1.hashCode();
    int h2 = str2.hashCode();

    if ( h1 < h2 )
    {
        return ((long)h1)<<32 & h2;
    }
    else
    {
        return ((long)h2)<<32 & h1;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-31T23:25:09.497

好的，@gkuzmin 的评论让我想到了为什么我要使用 127 的功能。所以，这里有一个稍微简单的代码版本。变化如下：

1.  我不再使用 127 的幂，而是将 codePointAt 数字连接为字符串，将每个输入字符串的结果转换为 BigInteger，然后添加两个 BigInteger。
2.  为了压缩答案，我在最终答案上做了一个 mod 2^1024。

速度并没有更好（也许更糟！）但是我认为我测量速度的方式不正确，因为它可能还测量了函数调用所花费的时间。

这是修改后的代码。这是否满足所有条件，尽管在 2^1024 结果空间上可能发生重复的不幸情况下满足 4？

```
public static BigInteger hashStringConcatenation(String str1, String str2) {
    if(str1==null || str1.isEmpty() || str2 == null || str2.isEmpty()) {
        return null;
    }
    BigInteger bA, bB;
    String codeA = "", codeB = "";
    for(int i=0; i<str1.length(); i++) {
        codeA += str1.codePointAt(i);
    }
    for(int i=0; i<str2.length(); i++) {
        codeB += str2.codePointAt(i);
    }
    bA = new BigInteger(codeA);
    bB = new BigInteger(codeB);
    return bA.add(bB).mod(BigInteger.valueOf(2).pow(1024));
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-01T08:54:10.500

我决定添加另一个答案，因为@Anirban Basu 提出了另一种解决方案。所以，我不知道如何提供他的帖子的链接，如果有人知道怎么做 - 纠正我。

Anirban 的解决方案如下所示：

```
public static BigInteger hashStringConcatenation(String str1, String str2) {
    if(str1==null || str1.isEmpty() || str2 == null || str2.isEmpty()) {
        return null;
    }
    BigInteger bA, bB;
    String codeA = "", codeB = "";
    for(int i=0; i<str1.length(); i++) {
        codeA += str1.codePointAt(i);
    }
    for(int i=0; i<str2.length(); i++) {
        codeB += str2.codePointAt(i);
    }
    bA = new BigInteger(codeA);
    bB = new BigInteger(codeB);
    return bA.add(bB).mod(BigInteger.valueOf(2).pow(1024));
} 
```

您的新解决方案现在看起来像一个哈希函数，但它仍然存在一些问题。我建议你应该考虑一下：

1.  `NullPointerException`也许抛出或`IllegalArgumentException`何时`null`用作函数参数会更好？您确定不想计算空字符串的哈希值吗？
2.  要连接大量字符串，最好使用`StringBuffer`而不是`+`运算符。使用此类将对您的代码性能产生巨大的积极影响。
3.  您的哈希函数不是很安全 - 计算字符串非常容易，这会产生冲突。

您可以尝试此代码来检查可以证明您的哈希函数冲突的算法。

```
public static void main(String[] args){
    String firstString=new StringBuffer().append((char)11).append((char)111).toString();
    String secondString=new StringBuffer().append((char)111).append((char)11).toString();

    BigInteger hash1 = hashStringConcatenation(firstString,"arbitrary_string");
    BigInteger hash2 = hashStringConcatenation(secondString,"arbitrary_string");
    System.out.println("Is hash equal: "+hash1.equals(hash2));
    System.out.println("Conflicted values: {"+firstString+"},{"+secondString+"}");
} 
```

所以，破解你的哈希函数真的很容易。此外，它有 2^1024 个结果空间是好的，但是对于您的实现来说，很多现实生活中的冲突在于非常接近和简单的字符串。

PS我认为你应该阅读一些关于已经开发的散列算法，在现实生活中失败的散列函数（比如`String`过去只使用16个第一个字符计算散列的java类散列函数），并尝试根据你的要求检查你的解决方案和现实生活。至少您可以尝试手动查找哈希冲突，如果您成功了，那么您的解决方案很可能已经存在一些问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-02T03:48:48.097

这是我根据@gkuzmin 的建议更改的代码：

```
public static BigInteger hashStringConcatenation(String str1, String str2) {
    BigInteger bA = BigInteger.ZERO, bB = BigInteger.ZERO;
    StringBuffer codeA = new StringBuffer(), codeB = new StringBuffer();
    for(int i=0; i<str1.length(); i++) {
        codeA.append(str1.codePointAt(i));
    }
    for(int i=0; i<str2.length(); i++) {
        codeB.append(str2.codePointAt(i));
    }
    bA = new BigInteger(codeA.toString());
    bB = new BigInteger(codeB.toString());
    return bA.multiply(bB).mod(BigInteger.valueOf(2).pow(1024));
} 
```

请注意，在结果中，我现在将 bA 与 bB 相乘，而不是相加。

此外，添加了@gkuzmin 建议的测试功能：

```
public static void breakTest2() {
    String firstString=new StringBuffer().append((char)11).append((char)111).toString();
    String secondString=new StringBuffer().append((char)111).append((char)11).toString();
    BigInteger hash1 = hashStringConcatenation(firstString,"arbitrary_string");
    BigInteger hash2 = hashStringConcatenation(secondString,"arbitrary_string");
    System.out.println("Is hash equal: "+hash1.equals(hash2));
    System.out.println("Conflicted values: {"+firstString+"},{"+secondString+"}");
} 
```

和另一个只有数字值的字符串的测试：

```
public static void breakTest1() {
    Hashtable<String,String> seenTable = new Hashtable<String,String>();
    for (int i=0; i<100; i++) {
        for(int j=i+1; j<100; j++) {
            String hash = hashStringConcatenation(""+i, ""+j).toString();
            if(seenTable.contains(hash)) {
                System.out.println("Duplication for " + seenTable.get(hash) + " with " + i + "-" + j);
            }
            else {
                seenTable.put(hash, i+"-"+j);
            }
        }
    }
} 
```

代码运行。当然，这不是一个详尽的检查，但是 breakTest1() 函数没有任何问题。@gkuzmin 的函数显示以下内容：

```
Is hash equal: true
Conflicted values: {                    o},{o                         } 
```

为什么这两个字符串产生相同的哈希？因为它们在这两种情况下都有效地使用了字符串 '11111arbitrary_string'。这是个问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-02T05:36:16.070

现在稍微修改的功能怎么样？

```
public static BigInteger hashStringConcatenation(String str1, String str2) {
    BigInteger bA = BigInteger.ZERO, bB = BigInteger.ZERO;
    StringBuffer codeA = new StringBuffer(), codeB = new StringBuffer();
    for(int i=0; i<str1.length(); i++) {
        codeA.append(str1.codePointAt(i)).append("0");
    }
    for(int i=0; i<str2.length(); i++) {
        codeB.append(str2.codePointAt(i)).append("0");
    }
    bA = new BigInteger(codeA.toString());
    bB = new BigInteger(codeB.toString());
    return bA.multiply(bB).mod(BigInteger.valueOf(2).pow(1024));
} 
```

在这里，我们在每个字符代码之间添加了一个分隔符“0”，因此字符 11 111 和 111 11 的组合将不再混淆函数，因为串联会产生 110111 和 111011。但是，它仍然不会破坏要求 2原来的问题。

那么现在这是否解决了问题，尽管在 2^1024 范围内？

# java - 如何在 POST 请求时在 HTTP 标头中设置自定义变量

> ID：11741347
> 
> 赞同：0
> 
> 时间：2012-07-31T13:34:51.143
> 
> 标签：java, httpwebrequest, http-headers

> 我想将我的机器名称作为 JAVA 中的自定义变量添加到 http 请求标头。
> 
> 这是我的代码：

```
private void sendIssuesToWebService(Issue issue) {
        // TODO Auto-generated method stub

        System.out.println("\n\n");
        //LOG.info("Sending issue : "+issue.getKey());

        HttpURLConnection ycSend = null;
        BufferedReader in1 = null;
        JSONObject j = null ;
        try{

            URL urlSend = null;

            try{
                urlSend = new URL(targetURL+"Issue/ImportIssue");
            }
            catch (MalformedURLException e) {
                // TODO Auto-generated catch block

                LOG.severe(" URL Malformed Exception while authentication ");
                e.printStackTrace();
            }

            try{
                ycSend = (HttpURLConnection) urlSend.openConnection();
            }
            catch (IOException e) {
                // TODO Auto-generated catch block

                LOG.severe(" Error in Http URL Connection while authentication");
                e.printStackTrace();
            }

            ycSend.setDoOutput(true);

            ycSend.setRequestMethod("POST");
            ycSend.setRequestProperty("Content-Type", "application/json");

            try{

                OutputStreamWriter outSend = null;

                outSend = new OutputStreamWriter(ycSend.getOutputStream());
                outSend.write(IssueAndHistoryJsonStr);

                outSend.flush();

            }catch(Exception e)
            {
                LOG.severe("Cannot write output stream while sending issue ");

            }

            System.out.println( ycSend.getResponseCode()+"\n\n\n");

            if(ycSend.getResponseCode()!=200){

                in1 = new BufferedReader(new InputStreamReader(
                        ycSend.getErrorStream()));

                String inputLine;
                while ((inputLine = in1.readLine()) != null) 
                    inputResponse=inputResponse+inputLine;
                //System.out.println("$$$$$$$"+inputResponse);

                try{
                    j = new JSONObject(inputResponse);
                    LOG.info(j.get("errors").toString());
                }
                catch(Exception e){

                    String errorTitle = inputResponse.substring(inputResponse.indexOf("<title>")+7,inputResponse.indexOf("</title>"));

                    LOG.severe(errorTitle);

                }

                LOG.severe(" Error in Sending  an Issue to the web service and the issue key is  "+issue.getKey());
                //LOG.severe("Error is : "+j.get("errors"));
            }
            else
            {

                LOG.info("Issue "+issue.getKey()+" Sent successfully" );
                countIssues++;
                System.out.println("\n\n");
            }
            //LOG.info("Issue ***** " +issue.getKey()+ " sent with response : "+inputResponse);

        }

        catch(Exception e)
        {
            LOG.severe(" Error in Sending  an Issue to the web service and the issue key is  "+issue.getKey());
            //LOG.severe(yc.getResponseMessage());
            //LOG.severe("Error is : "+j.get("errors"));
            e.printStackTrace();
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:40:34.673

我相信您只是想添加另一个类似于内容类型的 requestProperty。

```
ycSend.setRequestProperty("Machine-Name", MachineName); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T13:41:52.957

也许[这](https://stackoverflow.com/questions/480153/how-to-modify-the-header-of-a-httpurlconnection)会有所帮助。或者，您可以查看 Apache [HTTPClient](http://hc.apache.org/httpclient-3.x/)来执行此操作。

要获取主机名，您可以执行以下操作：

```
try {
    InetAddress addr = InetAddress.getLocalHost();

    // Get hostname
    String hostname = addr.getHostName();
} catch (UnknownHostException e) {
  //DO SOMETHING 
} 
```

# javascript - javascript raphael 对象函数传递

> ID：11741350
> 
> 赞同：1
> 
> 时间：2012-07-31T13:35:07.747
> 
> 标签：javascript, raphael

我很抱歉提出这个问题，但我只是在今天早上寻找一些指导。我只是想创建一个函数，这样我就可以通过传入该元素来使 Raphael 元素发光。下面是我的代码。为什么这不起作用？

```
var paper = Raphael("playarea", 500, 500);

var rectangle = paper.rect(100, 100, 200, 200, 4);

function elemHover(var el)
{

    el.hover(
    // When the mouse comes over the object //
    // Stock the created "glow" object in myCircle.g
   function() {
    this.g = this.glow({
        color: "#0000EE",
         width: 10,
         opacity: 0.8
     });
    },
    // When the mouse goes away //
    // this.g was already created. Destroy it!
    function() {
     this.g.remove();
    });
}

elemHover(rectangle); 
```

这是小提琴[http://jsfiddle.net/aZG6C/15/](http://jsfiddle.net/aZG6C/15/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:15:35.620

您应该`fill`使用元素（在我们的例子中为矩形）来触发悬停。

```
rectangle.attr("fill", "red"); 
```

试试这个小提琴[http://jsfiddle.net/aZG6C/17/](http://jsfiddle.net/aZG6C/17/)

完整的代码看起来像

```
<div id="playarea"></div>

​&lt;script type="text/javascript">
var paper = Raphael("playarea", 500, 500);

var rectangle = paper.rect(100, 100, 200, 200, 4);

function elemHover(el)
{
    el.hover(
    // When the mouse comes over the object //
    // Stock the created "glow" object in myCircle.g
    function() {
     this.g = this.glow({
         color: "#0000EE",
         width: 10,
         opacity: 0.8
     });
    },
    // When the mouse goes away //
    // this.g was already created. Destroy it!
    function() {
     this.g.remove();
    });
}

rectangle.attr("fill", "red");

elemHover(rectangle);

</script>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**更新**

仅当元素被填充时才会触发悬停事件。如果你想有一个透明的元素，你可以试试

```
rectangle.attr("fill", "transparent"); 
```

在这里检查小提琴[http://jsfiddle.net/aZG6C/20/](http://jsfiddle.net/aZG6C/20/)

# xcode - 创建开发者资料

> ID：11741351
> 
> 赞同：0
> 
> 时间：2012-07-31T13:35:10.317
> 
> 标签：xcode, macos

您如何在 xcode（Snow Leopard 上的 4.2）中创建“开发人员资料”？我不小心从钥匙串访问中删除了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:42:14.983

我之前的回答主要针对 Mac 开发人员，因为我没有意识到 iOS 证书等有不同的页面。

请尝试此链接以获取您的[证书](https://developer.apple.com/ios/manage/overview/index.action)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:44:22.870

可在此处找到完整指南：[开发人员证书和配置文件](http://www.techotopia.com/index.php/Testing_iOS_5_Apps_on_the_iPhone_%E2%80%93_Developer_Certificates_and_Provisioning_Profiles)

# c++ - 是否可以继承 QVBoxLayout 并将其设置为 QWidget 中的布局？

> ID：11741356
> 
> 赞同：0
> 
> 时间：2012-07-31T13:35:15.267
> 
> 标签：c++, qt, layout

我要完成的工作：

创建 2 个继承 QVBoxLayout 的类，以便为每个类设置一系列不同的对象。

例如：第 1 类（继承 QVBoxLayout），具有 QLabels 来显示约会，并且这些标签设置为`this->addWidget(labels);`

类 2（继承 QVBoxLayout），具有 QLineEdits（等等）来编辑约会，并且这些对象也设置为`this->addWidget(lineedits);`

`this->setLayout(class1_object);`是否可以有一个 QWidget 类，然后通过调用和在这两种布局之间切换`this->setLayout(class2_object);`？

或者您如何建议交换小部件上的活动对象（单击视图部分上的编辑按钮或编辑部分上的保存按钮时）？

只需使用`object->setShown(false);`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:54:34.137

IMO，在这里更容易使用`QTabWidget`。`QTabWidget`用 2 个标签制作一个。在 Tab1 上，放置您的标签。在 Tab2 上，放置您的编辑。调用 Tab2 类似“编辑约会”。现在，使用`currentChanged()`插槽来捕捉标签切换。

如果保存编辑应该很简单，那么您只需将编辑后的数据从编辑复制到标签，反之亦然。

如果保存需要更多，例如您想要一个确认对话框，您可以允许用户更改回 Tab1 直到满足某些条件：

```
void MainWindow::on_tabWidget_currentChanged(int index)
{
    //if the user is trying to go back to Tab1 (where the labels are)...
    if(index == 0)
    {
         //...and if user didn't accept something, we just return him to the current tab
         //It's probably a good idea to tell him what went wrong, too :P
         if(!userAcceptedSaveDialog())
             ui.tabWidget.setCurrentIndex(1);        
    }
} 
```

# python - 美汤忽略内部html

> ID：11741357
> 
> 赞同：1
> 
> 时间：2012-07-31T13:35:16.250
> 
> 标签：python, beautifulsoup

我有以下 html，我只想获取产品名称并忽略 html 的其余部分。我该怎么做

我想要这个作为使用 beautifulsoup 的输出`Apple iPhone 4 Verizon`

```
 <h1 itemprop="itemreviewed">Apple iPhone 4 Verizon    
                        <div class="right">
  <span class="s_button_follow_special" style="display: block">
  <a href="javascript:;" style="display: block" onclick="subscribe(this, 1, 5132);" class="follow_1_5132 s_button_2 s_button_follow" title="Follow Apple iPhone 4 Verizon"><em class="s_icon s_icon_follow"></em>Follow</a>
  <a class="s_button_2 s_button_follow_arrow" href="javascript:;" onclick="subscribe(this, 1, 5132, '', 2);"></a>
  </span>
  <a href="javascript:;" style="display: none" onclick="subscribe(this, 1, 5132);" class="unfollow_1_5132 s_button_2 s_button_follow_disabled s_button_following" title="Unfollow Apple iPhone 4 Verizon"><span><em class="s_icon s_icon_following"></em>Following</span></a>
  </div>
  </h1>

  header= soup('h1', {'itemprop' : 'itemreviewed'}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:50:24.820

就像是

```
soup = BeautifulSoup(<h1 ....)
header = soup.h1['itemprop'].contents
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:57:51.617

`Apple iPhone 4 Verizon`文本是解析树中自己的元素，与任何其他元素分开；您可以通过获取附近的元素并使用 、 或 导航`nextSibling`来`previousSibling`选择`next`它`previous`。

所以这应该工作：

```
header = soup.find('h1', itemprop='itemreviewed')
text = header.next 
```

# objective-c - NSDictionary 计数

> ID：11741360
> 
> 赞同：8
> 
> 时间：2012-07-31T13:35:19.967
> 
> 标签：objective-c, ios

我如何计算“账单”中有多少物品？

```
bills =     (
            {
        id = 1;
        name = "Cursus Nibh Venenatis";
        value = "875.24";
    },
            {
        id = 2;
        name = "Elit Fusce";
        value = "254.02";
    }
); 
```

我是这样数的：

```
NSUInteger keyCount = [resultsDictionary count];
NSLog(@"%i", keyCount); 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T13:47:13.577

一个天真的解决方案会假设 OP 想要 count `bills`，这恰好是一个数组，所以解决方案是

```
NSLog(@"Count: %i", [[resultsDictionary objectForKey: @"bills"] count]); 
```

但是，如果您的字典中有多个要计数的对象，那么将它们全部枚举是唯一的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T13:44:33.213

```
NSUInteger keyCount = [resultsDictionary count];
NSLog(@"%i", keyCount); 
```

是真的，但你也可以使用`[resultsDictionary allKeys];`它将返回一个键数组，你可以直接获取它的计数。有关更多信息，请访问[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html)：v

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T13:45:08.243

```
NSMutableArray *billsArray =[[NSMutableArray alloc] init];
billsArray = [resultsDictionary valueForKey:@"bills"];//returns array
NSUInteger keyCount = [billsArray count];
NSLog(@"%i", keyCount); 
```

我想这会对你有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T13:43:21.917

`NSUInteger count = [bills count];`// 字典中的顶级项

如果要获取所有项目，则需要使用块枚举并递归地询问每个字典的计数是多少，然后求和。您必须编写代码 - 没有系统提供的方法可以做到这一点。查看类引用中的块枚举（即枚举....）。

您还可以询问每个项目它是什么 - 如果“isKindOf:”是 NSDictionary 或 NSArray，则获取计数，否则将其视为 1。

# asp.net - 认证日期和时间

> ID：11741361
> 
> 赞同：1
> 
> 时间：2012-07-31T13:35:21.883
> 
> 标签：asp.net, asp.net-mvc, authentication, datetime

如何在 MVC .net Web 应用程序中保存用户身份验证的日期和时间？我必须保存它才能修改我在应用程序中使用的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:51:51.160

这实际上取决于您的数据库模型的结构。假设一个用户表：

```
User
-------
ID UserName Password 
```

像这样添加一个新列`LastLoggedInDate`：

```
User (with logged in date)
-------
ID UserName Password LastLoggedInDate 
```

或者，如果您需要查看登录历史记录，请考虑使用第二个表来记录登录：

```
LoginAttempt
------------
ID UserID DateStamp Successful 
```

可以进一步扩展此`LoginAttempt`表以包含用于集成身份验证（不要误认为是 Windows 集成安全性）或分布式身份验证 (API) 的具有到期日期的身份验证代码。

```
LoginAttempt (with auth code)
------------
ID UserID DateStamp Successful AuthCode ExpirationDate 
```

# c# - 将字符串转换为列表

> ID：11741365
> 
> 赞同：0
> 
> 时间：2012-07-31T13:35:30.390
> 
> 标签：c#, linq

我想要做的是使用 linq 将字符串转换为字符串列表。我尝试以下代码行：

```
value = "one,two,three,four";

List<string> arr = value.Split(',').Select(s => s.ToList()); 
```

但我收到错误：

**错误 1 ​​无法将类型“System.Collections.Generic.IEnumerable>”隐式转换为“System.Collections.Generic.List”。存在显式转换（您是否缺少演员表？）**

如果有人可以提供一些帮助，那就太棒了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T13:36:58.360

你好，你可以试试

```
 value.Split(',').ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T13:37:10.527

您`ToList`在每个单独的数组元素上都有 - 即在每个字符串上。该调用本身是有效的，因为`string`implements `IEnumerable<char>`，但这意味着您正在创建一个`IEnumerable<List<char>>`不是您想要的。

我认为您根本不需要`Select`- 只需使用：

```
List<string> arr = value.Split(',').ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T13:37:10.913

列表构造函数之一[采用 enumerable](http://msdn.microsoft.com/en-us/library/fkbw11z0)：

```
var arr = new List<string>(value.Split(',')); 
```

不知道为什么人们坚持对*所有东西*进行 linq 扩展......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T13:36:40.883

```
value = "one,two,three,four";

List<string> arr = value.Split(',').Select(s => s).ToList(); 
```

或更简单：

```
List<string> arr = value.Split(',').ToList(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T13:37:28.417

即使您不需要选择，但如果您想使用它，那么它应该是：

```
 List<string> arr = value.Split(',').Select(s => s).ToList(); 
```

或者你可以简单地做：

```
 List<string> arr = value.Split(',').ToList(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T13:37:53.220

你不应该需要选择：

```
value = "one,two,three,four";

List<string> arr = value.Split(',').ToList(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-31T13:38:03.347

```
string value = "one,two,three,four";
List<string> arr = value.Split(',').ToList(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-31T13:42:13.643

您不需要在这里使用 LINQ，而是可以简单地执行以下操作：

```
string value = "one,two,three,four";
List<string> arr = value.Split(',').ToList(); 
```

# xpages - XPages 视图控制链接操作

> ID：11741366
> 
> 赞同：1
> 
> 时间：2012-07-31T13:35:30.660
> 
> 标签：xpages

我有一个视图控件，并且至少有一列设置了“显示为链接”选项。链接是手动生成的。我想要实现的是添加一个添加到视图列链接的 url 参数。通常的链接是这样的

“http://host/path/file.nsf/$$OpenDominoDocument.xsp?databaseName=server!!path/file.nsf&documentId=03871DD0B47F88D4C12576AB00623137&action=editDocument”

我想要的是：

“http://host/path/file.nsf/$$OpenDominoDocument.xsp?databaseName=server!!path/file.nsf&documentId=03871DD0B47F88D4C12576AB00623137&action=editDocument?param1=value1¶m2=value2&etc...”

必须有一种（可能很简单）的方法来实现这一点 - 不幸的是我不知道如何......感谢任何帮助或提示。

提前谢谢了。迈克尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T15:19:59.697

请按照以下步骤操作： 1\. 转到视图列的所有属性，它将列值显示为链接。2\. 使用以下代码计算 PageUrl。

```
 var col:com.ibm.xsp.component.xp.XspViewColumn = getComponent("viewColumn1");
col.getDocumentUrl()+"&param1=value1" 
```

# jquery - 使用 jQuery/Ajax 上传 HTML 文件不起作用

> ID：11741367
> 
> 赞同：0
> 
> 时间：2012-07-31T13:35:32.453
> 
> 标签：jquery, ajax, file, file-upload, upload

我正在尝试在[此处合并 Stack 用户 DannYo 的评论](https://stackoverflow.com/a/8758614/362136)中的一些代码，但是我的他的代码版本似乎没有运行。错误和“beforesend”函数每次都返回。

**HTML**

```
<form action="" method="post" enctype="multipart/form-data">
    <input type="file" id="file">
    <input type="email" id="sender" name="sender" required>
    <input type="email" id="receiver" name="receiver" required>
    <input type="text" id="message" name="message">
    <button id="send" class="button">Send it</button>
</form> 
```

**JavaScript**

```
$("form").on("submit", function() {

    var formData = new FormData($('form')[0]);

    $.ajax({
        url: 'upload.php',  //server script to process data
        type: 'POST',
        xhr: function() {  // custom xhr

            myXhr = $.ajaxSettings.xhr();

            if (myXhr.upload) { // check if upload property exists
                myXhr.upload.addEventListener('progress',progressHandlingFunction, false); // for handling the progress of the upload
            }

            return myXhr;

        },

        //Ajax events
        beforeSend: function() { console.log("before send function works"); },
        success: function(e) {
            console.log(e);
        },
        error: function() { console.log("error function works"); },

        // Form data
        data: formData,

        //Options to tell JQuery not to process data or worry about content-type
        cache: false,
        contentType: false,
        processData: false
    });

    return false;

}); 
```

**PHP**

出于测试目的，该`upload.php`文件只有`<?php echo "success"; ?>`

使用 Chrome 的网络开发人员工具，我没有看到我的文件被传输到任何地方。有人在我的代码中看到一个明显的漏洞吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:46:11.690

如果您的错误函数被调用，那么答案很可能在其结果中。请检查返回的错误是什么，因为显示`error function works`对您没有好处。

```
error: function(xhr, status, error) {
    alert(xhr.responseText);
    // OR
    alert(status + " : " + error);
} 
```

**编辑**：还要注意，我相信您需要处理您尝试上传的文件的保存。他在php[中上传文件的教程](http://www.tizag.com/phpT/fileupload.php/)可能很有用。

# ffmpeg - 使用 avconv 编写两个网络摄像头视频

> ID：11741371
> 
> 赞同：3
> 
> 时间：2012-07-31T13:35:40.940
> 
> 标签：ffmpeg

使用 avconv 捕获视频时遇到问题

`video0`我在里面`shell 0`和里面`video1`使用这个命令`shell 1`

```
avconv -f video4linux2 -i /dev/video0 video0.avi
avconv -f video4linux2 -i /dev/video1 video1.avi 
```

但随着开始第二个录像机消息

> /dev/video1：设备上没有剩余空间

问题是否有可能同时录制两个视频？

**其他**

第一次捕获`video0.avi`工作完美，但如果我用 Ctrl+C 中断并尝试执行相同的命令，则不会捕获视频。

此消息显示在 shell 中

> uvcvideo：无法重新提交视频 URB (-27)

进程还在运行？

第一次删除网络摄像头并重新连接工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:15:18.440

我遇到了同样的问题 - 在我的情况下，我通过将网络摄像头连接到单独的 USB2 总线来解决它。我仍然无法让 2 个 USB 网络摄像头在同一条总线上同时工作。我还发现我必须以 root 身份运行 ffmpeg（现在是 avconv）才能同时从两个摄像头捕获和编码声音和视频。

此外，我从 bash 脚本运行它，发现我必须在后台运行一个 avconv 命令才能同时运行这两个命令。脚本如下所示：

* * *

```
nohup avconv -f video4linux2 -s 640x360 -r 30 /dev/video0 -f alsa -ac 2 -i hw:1,0 -acodec libmp3lame -ab 96k -async1 stream1.mp4

P1=$!

avconv -f video4linux2 -s 640x360 -r 30 /dev/video1 -f alsa -ac 2 -i hw:2,0 -acodec libmp3lame -ab 96k -async1 stream2.mp4

kill $P1 
```

* * *

# asp.net-mvc - 如何处理 ASP.NET MVC ActionResult 异常？

> ID：11741372
> 
> 赞同：1
> 
> 时间：2012-07-31T13:35:58.383
> 
> 标签：asp.net-mvc, asp.net-mvc-2

我有一个自定义 ActionResult ，当远程主机关闭连接时，它会更深入地遇到 System.Web.HttpException 。我已经覆盖了控制器的 OnException 方法，但它没有被抓住。ASP.NET MVC 管道已经完成了我的 Controller 的 Action 的执行，现在它在遇到此异常时正在执行返回的 ActionResult。

目前，它正在冒泡并将我的日志作为错误而混乱。我不想在记录时过滤掉这些，因为我不认为远程主机中止内容的下载是错误的。

我宁愿直接处理这个错误，但我不知道在哪里。Controller.OnException 不起作用，所以我怀疑 IExceptionFilter 也不会。我可以使用 Application_OnError 但我担心这太高了。

没有更 MVC 的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:44:20.380

在 Controller.OnException 和 Application_OnError 之间没有其他点可以捕获异常。勇敢地使用 Application_OnError

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T13:57:25.850

您可以使用[HandleErrorAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.handleerrorattribute.aspx)来处理控制器操作中引发的异常。正如您在问题中指出的那样，我怀疑该错误超出了此属性的范围。那将只留下 Application_OnError。

您可以在错误处理代码中添加白名单以忽略特定错误（具有特定代码的特定类型，可能还有特定的源/堆栈跟踪）。

# jquery - 使用 jq_form_remote_tag 刷新 div

> ID：11741375
> 
> 赞同：0
> 
> 时间：2012-07-31T13:36:13.227
> 
> 标签：jquery, ajax, symfony1, symfony-1.4

两张图。问题往下看。

![在此处输入图像描述](../Images/6e568eebdb1ba508c3b0d4eb391a0376.png)

![在此处输入图像描述](../Images/a1c255b5f9780fabda65086687e63623.png)

我的模板中确实有以下代码 - 再次非常感谢 j0k：

```
<div id="listdiv">
echo jq_form_remote_tag(array(
    'update' => 'listdiv',
    'url' => 'shoppinglist/update',
    'loading' => jq_visual_effect('fadeIn', '#indicator'),
    'complete' => jq_visual_effect('fadeOut', '#indicator'),
));
</form>
</div> 
```

当我在空白字段中输入“apple”并提交表单（第一张图片）时，所有内容都将正确保存在数据库中。结果如图二。但是新领域没有出现。任何想法？

如果我进行完全刷新，番茄、苹果和一个新的文本字段会正确显示！

我关闭了 action.class.php 中的所有 if-method-GET/POST 语句。有人有想法吗？

## 更新

动作类.php

```
public function executeIndex(sfWebRequest $request) {
$endkunde_id = $this->getUser()->getAttribute('id');
$zustand_id = 1;

$list_id = 252;
$shopname_id = 1;
$shopname = 'shop 1';

// if ($this->getRequest()->getMethod() == sfRequest::GET) {
    $this->form = new YourListForm(array(), array('endkunde_id' => $endkunde_id, 'list_id' => $list_id));
    $this->form2 = new AddOnYourListForm(array('shopname' => $shopname), array('endkunde_id' => $endkunde_id, 'list_id' => $list_id, 'shopname_id' => $shopname_id));
//  }

}

public function executeUpdate(sfWebRequest $request) {
$endkunde_id = $this->getUser()->getAttribute('id');
$zustand_id = 1;

$list_id = 252;
$shopname_id = 1;
$shopname = 'shop 1';

    $this->addon_listForm = new AddOnYourListForm();
    $addonlist = array();

    $p = 'addon_list_id_';
    $q = (string) 252;
    $p .= $q;

    $this->addon_listForm->bind($request->getParameter($p));
    if ($this->addon_listForm->isValid()) {
        $formData = $this->addon_listForm->getValues();
        // $this->addon_listForm->save();
    }

    $this->form = new YourListForm(array(), array('list_id' => $list_id, 'endkunde_id' => $endkunde_id));
    $p = 'yourlist_';
    $q = (string) 252;
    $p .=$q;

    $this->form->bind($request->getParameter($p));
    if ($this->form->isValid()) {
        $this->form->save();
        $this->form = new YourListForm(array(), array('list_id' => $list_id, 'endkunde_id' => $endkunde_id));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:53:07.887

我有一个解决方案：

简短说明：

action.class.php：

```
executeIndex{
if (method = post) {
 //handle the data
}
//here my index code above without method GET!!
} 
```

# html - 如何在容器底部设置元素

> ID：11741376
> 
> 赞同：2
> 
> 时间：2012-07-31T13:36:16.427
> 
> 标签：html, css

嗨，我有一个包含许多无序列表的容器。我希望将最后一个无序列表设置为底部的 0 边距。这是我的代码以及我尝试过但不起作用的代码：

```
<ul id="updates">
              <li>Follow Zack's updates<br/>300 followers. Follows:</li>
              <li><a href="#"><img src="img/zack/update1.png" alt="update"/></a></li>
              <li><a href="#"><img src="img/zack/update2.png" alt="update"/></a></li>
              <li><a href="#"><img src="img/zack/update3.png" alt="update"/></a></li>
              <li><a href="#"><img src="img/zack/update4.png" alt="update"/></a></li>
              <li>+ <br/> 10</li>
          </ul>

<p> Site powered by zi<span>kio<span></p>
div#articles p{
   margin-top: auto;
   margin-bottom: 0
}
ul#updates{
   margin-top: auto;
   margin-bottom: 0;
} 
```

p 和 ul#updates 都需要设置在底部，边距为 0。

****编辑：* *父已经设置为位置：固定，所以相对定位不是一个选项**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:39:46.773

假设您的列表都是`div.article`刚刚设置的孩子

```
div.article {
   position: relative; /* after your edit: fixed is fine too */
   padding-bottom : /* enough to make room for last ul */
}

div.article > ul:last-child {
   position : absolute;
   bottom   : 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T13:39:20.750

添加`position:relative`到“包含”，`<div>`然后添加`position:absolute; bottom:0;`到您的`<ul>`和`<p>`css

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T13:39:54.053

当使用这样的列表时，最好将列表重置为零边距和填充，然后设置列表的 CONTENTS 样式，而不是列表本身。

```
#updates, #updates li {
   margin:0;
   padding:0;
} 
```

然后对于您的列表项：

```
#updates a {
   display:block;
   padding: ___ <-- insert your values
   margin: ___
} 
```

此外，对 UI 元素使用 CSS 背景比内联图像更好。您可以将列表中链接的大小设置为与图像大小相对应，并将图像应用为 CSS 背景。

```
 #updates a {
       display:block;
       background-image:url(img/zack/update1.png);
       height: ___
       width: ___
       padding: ___ 
       margin: ___
    } 
```

# php - 显示当前页面之外的分页数。

> ID：11741379
> 
> 赞同：0
> 
> 时间：2012-07-31T13:36:19.910
> 
> 标签：php

更新：我已经修改了我的代码，现在可以显示当前页面，但第一页显示为 0。当他们移动到更多页面时，它会显示当前页面和以前的页面。我如何让它显示一定数量的页面。

```
<div id="paging">       
<div class="page">
    <?php if ($pageNum_getDisplay > 0) { // Show if not first page ?>
                <a href="<?php printf("%s?pageNum_getDisplay=%d%s", $currentPage, 0, $queryString_getDisplay); ?>">First</a>
                <?php } // Show if not first page ?></div>
<div class="page">
    <?php if ($pageNum_getDisplay > 0) { // Show if not first page ?>
                <a href="<?php printf("%s?pageNum_getDisplay=%d%s", $currentPage, max(0, $pageNum_getDisplay - 1), $queryString_getDisplay); ?>">Previous</a>
                <?php } // Show if not first page ?></div>
<div class="page">
    <?php for ($i=0;$i<=$pageNum_getDisplay;$i++){     
    if ($pageNum_getDisplay==$i)         
    echo ($i);     
    else         
    echo "<a title='Page $i' href='?pageNum_getDisplay=$i'><strong>$i</strong></a>"; 
    } ?> </div>
<div class="page"> 
    <?php if ($pageNum_getDisplay < $totalPages_getDisplay) { // Show if not last page ?>
                <a href="<?php printf("%s?pageNum_getDisplay=%d%s", $currentPage, min($totalPages_getDisplay, $pageNum_getDisplay + 1), $queryString_getDisplay); ?>">Next</a></div>             
<div class="page">
    <?php } // Show if not last page ?>
            <?php if ($pageNum_getDisplay < $totalPages_getDisplay) { // Show if not last page ?>
                <a href="<?php printf("%s?pageNum_getDisplay=%d%s", $currentPage, $totalPages_getDisplay, $queryString_getDisplay); ?>">Last</a>
                <?php } // Show if not last page ?>
        </div> 
```

我想显示它，所以它看起来像这样。

(第一页) 1 2 3 4 5 6 7 下一页 最后 (第二页) First 上一页 1 2* 3 4 5 6 7 Next Last

现在看起来像这样 .. First 上一页 0 1 2 Next Last

提前致谢

# iphone - 从 iPhone 上的流中获取 ID3 标签

> ID：11741388
> 
> 赞同：1
> 
> 时间：2012-07-31T13:36:44.107
> 
> 标签：iphone, ios, streaming, audio-streaming, avplayer

我无法从 HTTP Live Stream（使用 m3u、m3u8 播放列表文件）获取 iPhone 上的歌曲标题和作曲家姓名。我试过从这个网站[tempomix radio](http://www.tempomixradio.com)得到它。这是流媒体的链接 - [http://stream21.group-network.net:9012](http://stream21.group-network.net:9012)

我正在尝试使用下一个代码：

```
 AVPlayerItem *playerItem = [AVPlayerItem playerItemWithURL:url];
    _player = [[AVPlayer playerWithPlayerItem:playerItem] retain];

    _player.actionAtItemEnd = AVPlayerActionAtItemEndNone;
    [_player addObserver:self forKeyPath:@"status" options:NSKeyValueObservingOptionNew context:NULL];
    [_player addObserver:self forKeyPath:@"currentItem" options:NSKeyValueObservingOptionNew context:NULL];
    [_player addObserver:self forKeyPath:@"timedMetadata" options:NSKeyValueObservingOptionNew context:NULL]; 
```

然后在这里等待回调：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context { 
```

当回调到来时 - 我检查 AVPlayerStatus 并运行播放。收音机播放良好 - 但永远不会来observeValueForKeyPath。

我知道这个问题看起来与[这个](https://stackoverflow.com/questions/5085677/extracting-id3-tags-from-mp3-over-http-live-streaming)问题相似，但所描述的方法对我不起作用。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:17:58.207

ID3 标签与您链接到的流无关。SHOUTcast/Icecast 不使用 ID3 标签。

您将不得不解析 SHOUTcast 元数据协议。我在这里为 PHP 回答了这个问题： [https](https://stackoverflow.com/a/4914538/362536) ://stackoverflow.com/a/4914538/362536 无论是什么语言，主体都是相同的。

另见[http://www.smackfu.com/stuff/programming/shoutcast.html](http://www.smackfu.com/stuff/programming/shoutcast.html)

# wpf - 如何在上下文菜单中获取所选项目

> ID：11741397
> 
> 赞同：1
> 
> 时间：2012-07-31T13:37:02.670
> 
> 标签：wpf

我有一个包含绑定项的上下文菜单，我想设置一个命令和命令参数，所以我知道单击了哪个项目，但我不知道如何。

```
<MenuItem Command="{Binding Sync}"   
  Header="Synchronize" 
  ItemsSource="{Binding ItemsToSync}">
  <MenuItem.Icon>
      <Image Height="25" Source="Sync.png" />
  </MenuItem.Icon>
</MenuItem> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:24:01.513

你可以尝试这样的事情：在这个例子中，我有一个列表视图，我可以右键单击并删除一个选定的项目。我在这里使用RelativeSource 的原因是因为在菜单项中传递参数时，大多数时候在这个级别您无法访问页面的数据上下文。希望这可以帮助。

```
 <ListView.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Delete" Command="{Binding Path=DeleteDescriptions}" CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=ContextMenu}, Path=PlacementTarget.SelectedItem}" Name="MenuItem1">
                        </MenuItem>
                    </ContextMenu>
                </ListView.ContextMenu> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:42:28.700

这没有帮助，但我能够创建自己的解决方案。

```
 <MenuItem Header="Synchronize" ItemsSource="{Binding ItemsToSync}">
                    <MenuItem.Icon>
                        <Image Height="25" Source="Sync.png" />
                    </MenuItem.Icon>
                    <MenuItem.ItemContainerStyle>
                        <Style>
                            <Setter Property="MenuItem.Header" Value="{Binding Name}" />
                            <Setter Property="MenuItem.IsChecked" Value="{Binding IsCurrent}" />
                            <Setter Property="MenuItem.Command" Value="PT:Commands.SyncFromContextMenu" />
                            <Setter Property="MenuItem.CommandParameter" Value="{Binding}" />
                        </Style>
                    </MenuItem.ItemContainerStyle>

                </MenuItem>
</MenuItem> 
```

我确实必须为该命令创建一个静态类。

# xml - XSLT 转换 - 具有不同属性值的多个块

> ID：11741401
> 
> 赞同：0
> 
> 时间：2012-07-31T13:37:08.957
> 
> 标签：xml, xslt, xhtml, xslt-1.0

我必须使用 XSLT 从一个 XML (XHTML) 文件转换为另一个。转换规则如下：

1.  id="t0b" 和 "t1b" 的值必须分别替换为 id="ta0b8" 和 "ta3b8"。
2.  `<input type="radio" name="o0" id="t0"/>`必须替换为`<input type="radio" name="key0b8" value="0" id="ta0q" class="block" />`（同样在文件中）

**输入文件：**

```
<?xml version="1.0" encoding="utf-8"?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-type" content="text/html;  charset=utf-8" />
    </head>  
    <body>
      <div class="iDev">

        <div class="q">
          <div id="t0b" class="block">1<span style="color">TEXT1</span>
          </div><br />
          T <input type="radio" name="o0" id="t0"/> 
          F <input type="radio" name="op0" id="f0"/>
          <div id="sfb"></div>
        </div><br />

        <div class="q">
          <div id="t1b" class="block">2<span style="color">TEXT2</span>
          </div><br />
          T <input type="radio" name="o1" id="t1" /> 
          F <input type="radio" name="op1" id="f1" />
          <div id="sfb"></div>
        </div>
      </div>
    </body>
    </html> 
```

**输出文件：**

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html;  charset=utf-8" />
</head>
<body>
  <div class="iDev">

    <div class="q">
      <div id="ta0b8" class="block">1<span style="color">TEXT1</span>
      </div><br />
      T<input type="radio" name="key0b8" value="0" id="ta0q" />
      F<input type="radio" name="key0b8" value="1" id="ta1q" />
      <div id="sfb"></div>
    </div><br />

    <div class="q">
      <div id="ta3b8" class="block">2 <span style="color">TEXT2</span>
      </div><br />
      T<input type="radio" name="key3b8" value="0" id="ta0q3" />
      F<input type="radio" name="key3b8" value="1" id="ta1q3" />
      <div id="sfb"></div>
    </div>
  </div>
</body>
</html> 
```

当只有一个块时，我可以`<div class="q">CODE HERE</div>`通过使用身份模板和论坛中的建议进行修改，但是当该块被重复多次并具有不同的属性值时，我无法这样做。请帮助我完成这项任务。感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:39:29.193

规则 1 可以通过......

```
<xsl:template match="div[@id='t0b']">
  <xsl:copy>
   <xsl:copy-of select="@*" />
   <xsl:attribute name="id">ta0b8</xsl:attribute>
   <xsl:apply-templates select="node()" />
  </xsl:copy>
</xsl:template> 
```

...对于其他 div 元素也是如此。

规则 2 可以通过......

```
<xsl:template match="input[@name='o0']">
  <xsl:copy>
   <xsl:copy-of select="@*" />
   <xsl:attribute name="name">key0b8</xsl:attribute>
   <xsl:attribute name="value">0</xsl:attribute>
   <xsl:attribute name="id">ta0q</xsl:attribute>
   <xsl:attribute name="class">block</xsl:attribute>
   <xsl:apply-templates select="node()" />
  </xsl:copy>
</xsl:template> 
```

# android - Android 应用内容的安全性

> ID：11741404
> 
> 赞同：0
> 
> 时间：2012-07-31T13:37:27.440
> 
> 标签：android, database, security

我创建了一个 Android 应用程序，并准备将其发布在 Playstore 上。但我不确定我的应用内容是否安全。

关键是我的应用程序中有一个数据库，除了通过我的应用程序外，我不希望任何人以任何其他方式从中获取信息。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:47:04.570

除非有人将他的手机植根，否则您的数据库是安全的。

为了在手机有根的情况下更难获取数据，您可以：

*   在只有您的应用程序可以访问的服务器上托管数据库（ssl 客户端服务器身份验证）
*   使用存储在应用程序代码中的密码加密数据库内容（可以反向工程）

[http://sqlcipher.net/sqlcipher-for-android/](http://sqlcipher.net/sqlcipher-for-android/)

请记住，任何有权访问您的应用程序的人都可以对其进行逆向工程。您可以通过使用 proguard 使其变得更加困难。

[http://developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)

混淆您的解密代码。

# php - 如何强制 wordpress 模板解析代码而不是纯文本

> ID：11741407
> 
> 赞同：0
> 
> 时间：2012-07-31T13:37:32.670
> 
> 标签：php, html, css, wordpress

我最近在我的 wordpress 博客中安装了一个新模板（更具体地说是 SquirrelTheme - 免费模板）。碰巧我想在我的首页上有两个按钮。假设按钮 X 和按钮 Y。为了创建这些按钮，我使用了一个名为“MaxButtons”的插件，它允许您轻松创建和管理按钮及其功能。创建上述按钮后，它会为您提供一个短代码，您可以将其插入到您的帖子和页面中 - 比如说 [maxbutton id="1"] - 以显示它。

不幸的是，在根据我的喜好编辑模板（删除我不打算显示的 div）后，我似乎无法显示这两个按钮，因为模板解析纯文本，这与页面/帖子显然不同。

如果您想知道如何插入按钮的简码，可以通过仪表板轻松修改模板，在仪表板中，我在指示主页特定部分显示内容的字段中插入了以下内容：

```
[maxbutton id="1"]  [maxbutton id="2"] 
```

就像我之前说的，我没有按预期显示按钮，而是准确地看到我在框中输入的内容。

我相信这是由模板如何解析文本引起的，因为它使用自己的函数（？ - php _e('...')) 来回显文本：

```
<div class="full_content">
    <center>
    <?php if (squirrel_get_option('squirrel_slidehead') != '') { ?>
        <h1><?php echo stripslashes(squirrel_get_option('squirrel_slidehead')); ?></h1>
    <?php } else { ?>
        <h1><?php _e('We are scope, a design firm in England', 'squirrel'); ?></h1>
    <?php } ?>            
    <?php if (squirrel_get_option('squirrel_slidedesc') != '') { ?>
        <h2><?php echo stripslashes(squirrel_get_option('squirrel_slidedesc')); ?></h2>            
    <?php } else { ?>
        <p><?php _e('Newfoundland dogs are good to save children from drowning, but you must have a pond of water handy and a child.', 'squirrel') ?></p>
        <p><?php _e('From drowning, but you must have a pond of water handy and a child.', 'squirrel'); ?></p>
    <?php } ?>
    </center>    
    </div> 
```

我的问题是，我怎样才能让它显示按钮或任何其他代码。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:43:29.953

您可以调用该函数对某些文本[`do_shortcode()`](http://codex.wordpress.org/Function_Reference/do_shortcode)进行正确的[短代码处理。](http://codex.wordpress.org/Shortcode_API)

例子：

```
echo do_shortcode('This is a button: [maxbutton id="1"]'); 
```

# perl - 如何在 PostgreSQL UPDATE 语句中使用绑定值？

> ID：11741409
> 
> 赞同：1
> 
> 时间：2012-07-31T13:37:30.977
> 
> 标签：perl, postgresql, prepared-statement

对于我在 PostgreSQL 上的 UPDATE 语句（来自 Perl 通过`DBI`and `DBD::Pg`），我想绑定一个像这样的值：

```
my $sql = 'UPDATE mytable SET foo = % WHERE id = 42';
my $foo_value = 23;
$dbh->do($sql, {}, $foo_value); 
```

这在该行中给出以下错误`do()`：

```
DBD::Pg::db do failed: called with 1 bind variable when 0 are needed at... 
```

我尝试了占位符的其他语法，`$1`并且`?`. 两者都失败了

```
DBD::Pg::db do failed: ERROR:  invalid input syntax for type numeric: "" at... 
```

什么是正确的语法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T13:41:17.077

该`?`字符是正确的占位符。

```
my $sql = 'UPDATE mytable SET foo = ? WHERE id = 42';
my $foo_value = 23;
$dbh->do($sql, undef, $foo_value); 
```

# php - Symfony2 / Doctrine2 - 获取关系另一侧不存在的行

> ID：11741413
> 
> 赞同：0
> 
> 时间：2012-07-31T13:37:52.220
> 
> 标签：php, symfony, doctrine-orm, entity

我有 2 个实体，包括它的 setter 和 getter：

```
/**
 * @ORM\Entity
 * @ORM\Table(name="users")
 */
class User
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\ManyToMany(targetEntity="SRC\PurchaseBundle\Entity\Purchase", inversedBy="users")
     * @ORM\JoinTable(name="user_purchases",
     *      joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id")},
     *      inverseJoinColumns={@ORM\JoinColumn(name="purchase_id", referencedColumnName="id")}
     *      )
     */
    protected $purchases;

    ...
}

/**
 * @ORM\Entity
 * @ORM\Table(name="purchases")
 */
class Purchase
{
    /**
     * @ORM\Column(type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    protected $id;

     /**
     * @var users
     *
     * @ORM\ManyToMany(targetEntity="SRC\UserBundle\Entity\User", mappedBy="purchases")
     */
    protected $users;

    ...
} 
```

我需要为用户选择所有丢失的购买。我已经通过获取所有现有购买并一一检查来实现这一点，它们不存在于`$user->getPurchases()`.

是否存在获得此结果的更好方法？

有没有办法让我可以在 USER 实体中创建一个名为的方法`getMissingPurchases()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:46:06.723

是的，你不见了

```
@ORM\JoinColumn(name="{name_of_column}", referencedColumnName="{name_of_fk_column}") 
```

# c# - CLR 如何访问 C# 堆栈？

> ID：11741415
> 
> 赞同：6
> 
> 时间：2012-07-31T13:37:52.363
> 
> 标签：c#, clr, heap-memory, cil, stack-memory

这可能是一个非常简单的问题，但我在 SO 上找不到答案，也不知道有人问过答案：

我可以像这样编写一个简单的 c# 方法：

```
private void foo()
{
   int a = 1;
   int b = 5;
} 
```

如果 CIL 代码（由编译器创建）由公共语言运行时执行，它将在堆栈顶部创建以下字段，而执行控件位于方法内部：

```
b = 5
a = 1 
```

但是现在，我将方法扩展为访问名为“a”的字段：

```
private void foo()
{
   int a = 1;
   int b = 5;
   Console.WriteLine(a);
} 
```

现在 CLR 必须访问一个不在堆栈顶部的字段，但根据 FILO（先进后出）原则，它必须在访问之前处理所请求字段之上的所有字段。

位于请求字段“a”上方的堆栈中名为“b”的字段会发生什么情况？

CLR不能删除它，因为它可能会被之后的执行方法使用，那么它会发生什么？

AFAIK，只有两种方法来存储字段，堆栈或堆。将它移到堆中并没有多大意义，因为这将利用 CLR 的堆栈带来的所有好处。CLR 是否会创建类似于第二个堆栈的东西？

这究竟是如何工作的？

**-编辑-**

也许我没有足够清楚地解释我的意图。

如果我写这样的方法：

```
private void foo()
{
   int a = 1;
   int b = 5;
   Console.WriteLine(a);
   Console.WriteLine(b);
} 
```

CLR 首先将 2 个字段写入堆栈，然后再访问它们，但顺序相反。

首先，它必须访问字段“a”，但要访问它，CLR 必须处理位于堆栈上字段“a”之上的字段“b”。它不能只从堆栈中删除字段“b”，因为它必须在之后访问它。

这是如何运作的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T13:44:11.927

变量不是单独堆叠的；堆栈包含“帧”。每个帧都包含当前方法调用所需的所有变量（局部变量、参数等）。因此，在您的示例中，`a`并`b`在同一框架中彼此并存，无需删除它们中的任何一个。当方法`foo`完成时，整个堆栈帧从堆栈中弹出，将调用方法的帧留在顶部。

[维基百科的文章](http://en.wikipedia.org/wiki/Call_stack)可能会提供一些启示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T13:44:47.520

调用堆栈不是严格意义上的“纯”堆栈，您只能与顶部元素进行交互。在调用堆栈中，您正在堆叠整个函数调用和/或整个变量范围，而不是变量。

例如，如果`foo()`调用了一个新函数，比如说 ，它将把它的两个变量`a`和`b`放在堆栈的顶部，并且可以完全访问它们。它（通常）不知道堆栈中这些变量下方的任何内容。

让我们看一下这段代码：

```
void foo() { // << Space is allocated on the stack for a and b.
             // << Anything in this scope has full access to a and b.
             // << But you cannot (normally) access anything from the
             // << calling function.
    var a = 1;
    var b = 2;

    if (a == 1) {  // << Another variable scope is placed on the stack.
                   // << From here you can access a, b and c.
        var c = 3;
    } // << c is removed from the stack.
} // << a, b and anything else in foo() is removed from the stack. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-31T13:50:09.547

您对堆栈的印象是错误的，它只是在方法调用之间充当堆栈。在一个方法中，栈帧就像一个局部变量数组。托管代码的堆栈帧也没有什么特别之处，它的运行方式与本机 C 或 C++ 代码中使用的堆栈帧*完全相同。*

局部变量与 EBP 寄存器（堆栈帧指针）有一个固定的偏移量。该偏移量由 JIT 编译器确定。

您发布的代码的具体结果是内置在即时编译器中的优化器只会消除未使用的局部变量。最后一个示例中的`a`变量很可能最终会出现在 cpu 寄存器中，并且永远不会出现在堆栈中。标准优化。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-31T13:46:34.763

请注意，当您谈论*字段*时，`a`它们`b`被称为*局部变量*。

也许以下***简化***的逻辑表示可以澄清事情。在调用 之前`Console.WriteLine`，堆栈的顶部看起来像这样：

```
|5| // b
|1| // a 
```

在内部`Console.WriteLine`，为其参数添加了一个额外的堆栈帧（称为`value`，它获取变量的副本`a`）：

```
|1| // value = a
|5| // b
|1| // a 
```

一旦 Console.WriteLine 返回，顶帧被弹出，堆栈再次变为：

```
|5| // b
|1| // a 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T13:53:22.707

对于 CLR，最好将局部变量视为编号的“槽”，例如邮箱。存储在这些“槽”中的值是否最终出现在方法的堆栈帧中（这里的其他人已经涵盖了这个概念），存储在 CPU 寄存器中，甚至完全优化出来都是抖动细节。有关详细信息，请参阅 IL [Stloc](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.stloc)指令。

最好考虑 CLR 运行一个*执行堆栈*，根据正在执行的指令弹出和推送值。托管代码如何在 CPU 上运行和执行的底层细节是另一回事，这就是传统的堆栈帧、寄存器和指针解引用重新发挥作用的地方。然而，从 IL 级别的 CLR 的角度来看，这些事情（大部分）是无关紧要的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-02T08:52:15.260

有四个相关但不同的概念：C# 中的局部变量、CIL 中的局部变量、CIL 中的堆栈和本机堆栈。

请注意，C# 局部变量如何映射到 CIL 以及 CIL 局部变量和堆栈如何映射到本机内存是实现定义的，因此您不应依赖任何这些。

你知道 C# locals 是什么。它们可以表示为 CIL 局部变量，但它们通常不会进入 CIL 堆栈（C# 编译器中可能有一些优化会这样做）。但是也有很少的其他选项：如果不需要，可以完全优化局部变量，或者可以将其编译为类中具有难以描述的名称的字段（lambda 的闭包变量，`yield`方法或`async`方法中的变量）。此外，即使某些 C# 局部变量被编译为 CIL 局部变量，它们也不必映射 1:1，因为如果编译器知道这样做是安全的，一个 CIL 局部变量可以用于更多 C# 局部变量。

在 CIL 中，有局部变量和堆栈。局部变量与堆栈完全分离，并且每个变量都有不同的 CIL 指令。局部变量用于保存更长时间需要的值，并且可以随时访问每个局部变量。CIL 堆栈主要包含目前正在使用的值：指令参数及其返回值。在堆栈中，只能访问顶部的值。

CIL 本地和 CIL 堆栈实际上都放置在本机堆栈上，但如果它们适合的话，它们通常只是在寄存器中。当然，JIT 编译器可以进行任何其他优化。正如其他人所说，当前方法堆栈中的任何值都可以随时访问，而不仅仅是顶部。

# c# - 调用 Attach 和 Add 提供相同的对象作为参数

> ID：11741418
> 
> 赞同：0
> 
> 时间：2012-07-31T13:37:55.807
> 
> 标签：c#, sql-server, entity-framework, entity-framework-4

我在某些类型 A、B、C 和 X 之间有以下关系：

```
A->B->X
|->C->X
|->X 
```

现在假设我想在数据库中添加一个新的 A 并将其与 B、C 和 X 的现有实例相关联。

我正在做的是这样的：

```
using (Context context = new Context())
{
  context.As.Attach(A);
  context.As.Add(A);
  context.SaveChanges();
} 
```

它似乎有效，但我不确定，因为 Attach 通常用于附加现有实例。

此替代方法不起作用：

```
using (Context context = new Context())
{
  context.Bs.Attach(A.B);
  context.Cs.Attach(A.C);
  context.As.Add(A);
  context.SaveChanges();
} 
```

因为在这种情况下，X 被附加了两次（ABX 和 ACX）并且实体框架抛出了一个异常：

```
System.InvalidOperationException: 
An object with the same key already exists in the ObjectStateManager.
The ObjectStateManager cannot track multiple objects with the same key. 
```

使用我的解决方案有意义还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:33:38.507

是的，您的解决方案很有意义 - 您已附加整个图表并更改`A`为`Added`状态。也可以改写为：

```
using (Context context = new Context())
{
  context.As.Attach(A);
  context.Entry(A).State = EntityState.Added;
  context.SaveChanges();
} 
```

在一些复杂的场景中，以相反的顺序执行此操作也很有用 - 添加所有项目并更改所有现有项目的状态。

# c# - 报表查看器控件中的条件处理

> ID：11741425
> 
> 赞同：0
> 
> 时间：2012-07-31T13:38:17.627
> 
> 标签：c#, .net, reportviewer

我有`.rdlc`格式报告。我在我的报告中插入了表格，该表格是从数据表（也由数据适配器以编程方式填充）以编程方式（在运行时）填充的。另外我希望在表格中使用条件格式 - 基于值的单元格的背景颜色。为此，在所需列表达式的 BackGroundColor 属性中插入：

```
=iif(cdbl(Fields!MyField.Value),"Green","Yellow") 
```

我没有提到我的数据表中的所有字段都是字符串。因此我使用 cdbl 函数将字符串转换为双精度。当我呈现报告时，我没有想要的结果。因此问题：

*   如何确保没有解析错误？
*   是否可以看到逐步计算（如在 excel 中）？
*   还有什么错误？

我怀疑问题可能出在文化上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:51:13.173

最快的测试方法是致电

`=iif(cdbl("3.14"),"Green","Yellow")`

`=iif(cdbl("3,14"),"Green","Yellow")`

看看它是否有效。

我现在没有报告服务，也无法对其进行测试。我认为您可以在报告服务中执行 tryParse。

# python - 如何在 Python 中检查回文？

> ID：11741426
> 
> 赞同：1
> 
> 时间：2012-07-31T13:38:17.497
> 
> 标签：python

嗨，我正在研究一个`isPalindrome(x)`用于三位整数的 python 函数，如果百位等于个位，则返回 True，否则返回 false。我知道我必须在这里使用字符串，这就是我所拥有的：

```
def isPal(x):
    if str(1) == str(3):
        return "True"

    else:
        return "False" 
```

是`str(0)`个位，`str(2)`是百位。我得到的都是假的？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T13:40:31.100

数组访问是用 完成的`[]`，而不是`()`。此外，如果您正在寻找数百和单位，请记住数组是 0 索引的，这是代码的缩短版本。

```
def is_pal(num):
    return num[0] == num[2]

>>> is_pal('123')
False
>>> is_pal('323')
True 
```

您可能希望将数字作为参数，然后将其转换为字符串：

```
def is_pal(num):
    x = str(num)
    return x[0] == x[2] 
```

请注意，您可以简单地检查字符串是否等于它的反转，它适用于任意位数：

```
>>> x = '12321'
>>> x == x[::-1]
True 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T13:44:45.450

你的问题是`str(1) == '1'`和`str(3) == '3'`。您还将返回读取的字符串值`'True'`，而`'False'`不是使用实际值`True`和`False`值。

让我为您提出一个更简单的功能：

```
def isPal(x):
    s = str(x)          # convert int to str
    return s == s[::-1] # return True if s is equal to its reverse 
```

`s[::-1]`创建字符串的反转；例如`'foo'[::-1] == 'oof'`。这是因为扩展切片符号而起作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T13:42:37.897

`str(1)`将创建一个整数值 1 的字符串。它不等于整数值 3 的字符串值 - 所以它总是 False。

您应该返回`True`and `False`，而不是 "True" 和 "False" 字符串...

这就是您考虑到上述情况的目标......（适用于任何长度）

```
def pal(num):
    forward = str(num)
    backward = ''.join(reversed(forward))
    return forward == backward 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T13:44:56.520

`str()`将值转换为 a `str`。您想访问每个字符。您可能想要对一些不同的技术进行基准测试。

```
>>> t1 = timeit.Timer(stmt="""\
... def isPal(x):
...     return x//100 == x%10
... isPal(434)
... isPal(438)
... """)
>>> t2 = timeit.Timer(stmt="""\
... def isPal(x):
...     return str(x)[0] == str(x)[2]
... isPal(434)
... isPal(438)
... """)
>>> print "%.2f usec/pass" % (1000000 * t1.timeit(number=100000)/100000)
0.97 usec/pass
>>> print "%.2f usec/pass" % (1000000 * t2.timeit(number=100000)/100000)
2.04 usec/pass 
```

因此，看起来 mod 技术有效：

```
def isPal(x):
    return x//100 == x%10 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T13:48:53.030

不知道为什么人们在除法和模数会做的时候坚持字符串的想法：

```
def isPal(x):
    return (x/100)%10 == x%10 
```

如果数字不大于 999（OP 所述的 3 位数字），则它简化为

```
def isPal(x):
    return x/100 == x%10 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T13:40:43.107

`str(x)`传递您传递给它的任何字符串值，因此在您的情况下为 string`"1"`或 string `"3"`。但您真正想要的是访问给定数字的第 1 位和第 3 位。因此，首先您想将该数字转换为字符串（例如使用 str(num)），然后您必须考虑字符串中的索引以 0 开头，而不是从 1 开始。所以工作代码如下所示：

```
def isPal(x):
  if str(x)[0] == str(x)[2]:
    return 'true'
  else:
    return 'false' 
```

输出：

```
> isPal(101)
true
> isPal (203)
false 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-31T13:41:07.003

`str(1)`只是给你数字的字符串表示`1`：

```
>>> x = 357
>>> str(1)
'1' 
```

你想要的是字符串表示的*第一个索引*`x`。

```
>>> x = 357
>>> str(x)    #string representation of x
'357'
>>> str(x)[0] #first index of that
'3'
>>> str(x)[2] #third index of that
'7'
>>> str(x)[0]==str(x)[2] #compare 1st and last
False
>>> x = 525
>>> str(x)[0]==str(x)[2] #compare 1st and last
True 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-31T13:41:29.387

您比较数字 1 和 3，但您需要比较输入变量的索引。

```
x = 1000
def isPal(x):
    return str(x[-1]) == str(x[-3]): 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-31T13:43:45.640

看来你还需要学习[Python 语法](http://docs.python.org/release/2.7.3/reference/index.html)

这是实现您需要的一种方法：

```
>>> def isPal(x):
...     x_as_str = str(x)
...     if len(x_as_str) != 3:
...         raise Exception("{} is not of length 3".format(x))
...     return x_as_str[0] == x_as_str[2]
...
>>> isPal(42)
Traceback (most recent call last):
  File "<input>", line 1, in <module>
  File "<input>", line 4, in isPal
Exception: 42 is not of length 3
>>> isPal(420)
False
>>> isPal(424)
True 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-06T11:28:50.263

一个较小的解决方案是：

```
def isPalindrome(x):    
    return str(x) == str(x)[::-1] 
```

这适用于单词和整数值。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-07-30T12:00:56.113

```
def is_palindrome() :
a=(raw_input("enter the name : "))
b=a[::-1]
    if b == a:
    print " it is palindarome"
    else:
    print "  it is not palindarome" 
```

is_palindrome()

# python - 素数查找函数的优化

> ID：11741437
> 
> 赞同：1
> 
> 时间：2012-07-31T13:39:12.717
> 
> 标签：python, primes

经过 10 分钟的工作，我编写了一个如下所示的函数。它返回低于参数的所有素数的列表。我已经使用了所有已知的编程和数学技巧，以尽可能快地完成此功能。要找到所有低于一百万的素数，大约需要 2 秒。

您是否看到任何进一步优化它的可能性？有任何想法吗？

```
def Primes(To):
  if To<2:
    return []
  if To<3:
    return [2]
  Found=[2]
  n=3
  LastSqr=0
  while n<=To:
     k=0
     Limit=len(Found)
     IsPrime=True
     while k<Limit:
         if k>=LastSqr: 
            if Found[k]>pow(n,0.5): 
               LastSqr=k
               break
         if n%Found[k]==0:
            IsPrime=False
            break
         k+=1
     if IsPrime:
        Found.append(n)
     n+=1
  return Found 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T13:58:54.903

您可以使用一些技巧来加快速度，使用基本的erastothenes 筛子。一种是使用[轮因式分解](http://en.wikipedia.org/wiki/Wheel_factorization)来跳过计算已知不是素数的数字。例如，除了 2 和 3，所有素数都与 1 或 5 mod 6 相等。这意味着您根本不必处理每 6 个数字中的 4 个。

在下一个级别，所有质数都与 1、7、11、13、17、19、23 或 29，模 30 相等。您可以在每 30 个数字中抛出 22 个。

这是一个不计算或存储偶数的 Erastothenes 筛子的简单实现：

```
def basic_gen_primes(n):
    """Return a list of all primes less then or equal to n"""
    if n < 2:
        return []

    # The sieve.  Each entry i represents (2i + 1)
    size = (n + 1) // 2
    sieve = [True] * size

    # 2(0) + 1 == 1 is not prime
    sieve[0] = False

    for i, value in enumerate(sieve):
        if not value:
            continue

        p = 2*i + 1

        # p is prime.  Remove all of its multiples from the sieve
        # p^2 == (2i + 1)(2i + 1) == (4i^2 + 4i + 1) == 2(2i^2 + 2i) + 1
        multiple = 2 * i * i + 2 * i 
        if multiple >= size:
            break

        while multiple < size:
            sieve[multiple] = False
            multiple += p 

    return [2] + [2*i+1 for i, value in enumerate(sieve) if value] 
```

如前所述，您也可以使用更多奇特的筛子。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T13:44:26.690

您只能检查奇数。那么为什么不使用 n+=2 而不是 n+=1 呢？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T13:41:09.710

谷歌和维基百科以获得更好的算法。如果您只是在寻找小的素数，这可能已经足够快了。但是对于大素数，真正的算法要快得多。

[http://en.wikipedia.org/wiki/Quadratic_sieve](http://en.wikipedia.org/wiki/Quadratic_sieve)

从那个页面开始。

将 n 增加 2 而不是 1。?

# sql - HQL，在同一张表上左连接

> ID：11741439
> 
> 赞同：5
> 
> 时间：2012-07-31T13:39:21.217
> 
> 标签：sql, hibernate, hql

我搜索了一种使用 hql 对同一张表进行左连接的方法。

这是我的查询

```
 FROM Tvshow e
  LEFT JOIN Tvshow e1 ON e1.num = e.num
 WHERE e1.code = '024'
   AND e.code is not null
   AND e.code != '024' 
```

Hibernate 似乎不喜欢操作符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:22:31.850

只有在两个实体之间有关联时，才能使用 HQL 中的左连接。由于您的查询将连接的实体强制为非空，因此内部连接会做同样的事情。仅当您在两个实体之间建立关联时，也可以使用连接语法进行内部连接。但是您可以通过在 where 子句中简单地添加相等测试来做到这一点：

```
select e from Tvshow e, Tvshow e1
where e.num = e1.num
and e1.code = '024'
and e.code is not null
and e.code != '024' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:43:44.617

我不使用休眠，但从这个例子来看：

```
from Cat as cat
inner join cat.mate as mate
left outer join cat.kittens as kitten 
```

从这个页面：[http ://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-joins-forms](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-joins-forms)

看起来你只是不做一个ON？如果我弄错了，请告诉我，我会删除它。

```
FROM Tvshow e
  LEFT JOIN Tvshow e1 
 WHERE e1.code = '024'
   AND e.code is not null
   AND e.code != '024' 
```

# javascript - Javascript与子数组的区别

> ID：11741440
> 
> 赞同：0
> 
> 时间：2012-07-31T13:39:24.640
> 
> 标签：javascript, prototypejs

我正在开发一个程序，并希望对 Javascript 的区别有一点了解。在我的程序中，我有一个黑名单数组，其中包含不允许出现在最终结果中的值，如下所示：

```
blacklist = ["One", "Two", "Four"]
someArr = ["One", "Three", "Five", "Two", "One"]
//Desired result = ["Three", "Five"] 
```

我从另一个 Stack 问题中找到了一个很棒的提示（代码如下所示）。

```
Array.prototype.diff = function(a) {
    return this.filter(function(i) {return !(a.indexOf(i) > -1);});
};

////////////////////  
// Examples  
////////////////////

[1,2,3,4,5,6].diff( [3,4,5] );  
// => [1, 2, 6]

["test1","test2","test3","test4","test5","test6"].diff(["test1","test2","test3","test4"]);  
// => ["test5", "test6"] 
```

问题是我需要将字符串数组与 3 维数组中的特定键进行比较。这是我的结构：

```
Array1 = [collab1: "Name, Someone's",
          collab2: "Else, Somebody",
          ...: ...],

         [collab1: "Else, Somebody",
          collab2: "Thornton, Billy Bob",
          ...: ...];

Array2 = ["Name, Someone's", "Else, Somebody", "Thornton, Billy Bob"] 
```

我想使用 diff 类对照 Array2 检查每个索引的 collab1。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:13:29.680

Solution to compare any 2 objects:

```
var
array_tools = {};
array_tools.filter = function(Arr,fun){
    if(typeof Array.prototype.filter === 'undefined'){ // Допиливание функциональности массивов для IE
        //filter = function( fun  ){ // , thisp
          var len = Arr.length;
          if(typeof fun != "function") throw new TypeError();

          var res = [], thisp = arguments[1];

          for(var i=0;i<len;i++){
                if(i in Arr){
                  var val = Arr[i]; // in case fun mutates this
                  if(fun.call(thisp, val, i, Arr)) res.push(val);
                }
          }

          return res;

    }
    else{
        return Arr.filter(fun);
    }
};

var compare_objects = function( firstObj, secondObject ){
    var get_keys = function(O){
        var A = [];
        for(var key in O) A.push(key);
        return A;
    },
    keysFirstObj     = get_keys(firstObj),
    keysSecondObject = get_keys(secondObject);

    if( keysFirstObj.length != keysSecondObject.length ){
        return false;
    }

    return !array_tools.filter( keysFirstObj, function(key){
        if( typeof firstObj[key] == "object" || $.isArray(firstObj[key]) ){
            return !compare_objects(firstObj[key], secondObject[key]);
        }
        else{
            return firstObj[key] !== secondObject[key];
        }
    } ).length;
} 
```

To compare 2 objects: `compare_objects(Obj1, Obj2)`. If this will be true - they are equal.

* * *

**ADDITION** `$.isArray` is from jQuery. If you don't need jQuery - open it's full source and copy only this tool.

# asp.net - 通过 IIS 提供服务后缺少（替换的）波兰字符

> ID：11741444
> 
> 赞同：0
> 
> 时间：2012-07-31T13:39:39.910
> 
> 标签：asp.net, iis, localization

我在通过 IIS 提供服务的 ASP.net (VB) 中有一个页面。

该页面基本上是英国网站的翻译。

我有：

```
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

在代码的顶部，并且所有字符在代码中都显示 ok。

但是在（所有）浏览器中，许多特殊的波兰语字符（例如“Ł”）都丢失了，直接替换为“L”。

这是IIS的事情吗？或者它可能是别的东西？

ETA：我刚刚注意到从 SQL 数据库中提取的波兰语文本部分在同一页面中正确显示..！奇怪的！

* * *

进一步编辑：我认为我找到了问题的基本来源，但不是解决方案：未正确显示的区域是页眉和页脚，它们是通过服务器端包含导入页面的。它接缝在此导入/注入中丢失了某种编码。导入的文件应该有某种编码头吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:00:28.803

这听起来像是静态内容文件中的编码问题。内容类型`<meta>`与文件的实际物理编码无关。我怀疑该文件保存在`Codepage 1252`而不是 UTF-8 中。

我建议您在支持不同编码（例如 VS 或 Notepad2。不是写字板或 Windows 记事本）的文本编辑器中打开您的 *.aspx 文件（我假设您在其中存储有问题的波兰语文本）。使用 UTF-8 编码强制保存文件（在 VS 中，转到文件 > 高级保存选项并确保选择“Unicode（带有签名的 UTF-8）”）。然后再次访问您的网站。

还要确保 Content-Type HTTP 标头也正确设置为 UTF-8。

# visual-studio-2010 - 预编译 ASP.NET 解决方案在 IIS7 上的集成模式下导致错误

> ID：11741445
> 
> 赞同：0
> 
> 时间：2012-07-31T13:39:42.637
> 
> 标签：visual-studio-2010, iis-7, msbuild

我们有一个站点，我们正尝试将其迁移到 Windows Server 2008 R2 上的 IIS7，该站点以前托管在 Windows Server 2003 上的 IIS6 上。

这个问题（至少对我来说）真的很奇怪。

如果我使用我们的网站部署构建脚本（在 BIN 目录中生成 COMPILED 文件）预编译站点并将其放在服务器上，并将“Managed Pipeline Mode”设置为“Integrated”，我们会收到以下错误：

> 无法加载文件或程序集 'log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821' 或其依赖项之一。访问被拒绝。

如果我将“Managed Pipeline Mode”更改为“Classic”——它可以工作。我不想让它在经典模式下运行。

如果我将“托管管道模式”设置为“集成”并直接将 Web 解决方案复制到服务器上，而不通过我们的构建脚本运行它以使其进入预编译状态——它在集成模式下工作。

***什么可以预编译解决方案可能会导致仅在集成模式下 log4net 的 Access is denied 错误？***

# ruby - Ruby Array to Histogram：如何按范围对数字进行分组？

> ID：11741453
> 
> 赞同：7
> 
> 时间：2012-07-31T13:40:02.927
> 
> 标签：ruby, arrays, statistics, histogram

我正在尝试根据各个值在某个范围内的位置将整数数组分组到哈希中。基本上我想将数组转换为固定宽度的直方图。

**例子：**

```
values = [1,3,4,4,4,4,4,10,12,15,18]
bin_width = 3 
```

我需要将数组值分组到一个基于范围的直方图中，它们落入一个 3 单位宽的桶中，如下所示：

```
{'0..2'=>[1,3],'3..5'=>[4,4,4,4,4],'6..8'=>[],'9..11'=>[10].... 
```

是否有一个简单的单行解决方案（可能类似于`values.group_by{|x| #range calc}`）可以在这里工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T14:09:25.040

```
values = [1, 7, 2, 8, 2]
values.group_by { |x| x / 3 }.map { |k, vs| [(3*k..3*k+2), vs] }.to_h
#=> {0..2=>[1, 2, 2], 6..8=>[7, 8]} 
```

如果您真的需要空范围，我认为不可能有一个干净的单线。但这应该这样做：

```
grouped = values.group_by { |x| x / 3 }
min, max = grouped.keys.minmax
(min..max).map { |n| [(3*n..3*n+2), grouped.fetch(n, [])] }.to_h
#=> {0..2=>[1, 2, 2], 3..5=>[], 6..8=>[7, 8]} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T14:34:47.527

我想出了一个效率很低但很清晰的解决方案：

```
ranges = 0.step(values.max, bin_width).each_cons(2).map { |s, e| Range.new(s, e, true) }
values.group_by { |v| ranges.find { |r| r.cover? v } } 
```

# php - 不能preg_match以下。我究竟做错了什么？

> ID：11741456
> 
> 赞同：0
> 
> 时间：2012-07-31T13:40:05.437
> 
> 标签：php, regex

我想提取具有以下描述格式的页面的描述。即使我相信我是对的，我也不明白。

```
$file_string = file_get_contents('');

preg_match('/<div class="description">(.*)<\/div>/i', $file_string, $descr);
$descr_out = $descr[1];

echo $descr_out; 

<div class="description">
<p>some text here</p>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:42:32.340

看起来您需要在正则表达式中打开单行模式。修改它以添加 -s 标志：

```
preg_match('/<div class="description">(.*)<\/div>/si', $file_string, $descr); 
```

单行模式允许 . 匹配换行符的字符。没有它， .* 将不会匹配你在开始和结束 div 标签之间的换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:51:25.320

我建议使用[DOMDocument](http://www.php.net/manual/en/class.domdocument.php)类和[xpath](http://www.php.net/manual/en/class.domxpath.php)从 HTML 文档中提取随机片段，基于正则表达式的解决方案在更改输入时非常脆弱（添加额外的属性，在奇怪的地方添加空格等），并且对于更复杂的场景来说它是可读的。

```
$html = '<html><body><div class="description"><p>some text here</p></div></body></html>';
// or you could fetch external sites 
// $html = file_get_contents('http://example.com');

$doc = new DOMDocument();
// prevent parsing errors (frequent with HTML)
libxml_use_internal_errors(true);
$doc->loadHTML($html);
// enable back parsing errors as the HTML document is already parsed and stored in $doc
libxml_use_internal_errors(false);
$xpath = new DOMXpath($doc);

foreach ($xpath->query('//div[@class="description"]') as $el) {
    var_dump($el->textContent);
} 
```

# php - 如何获得 PHPUnit 的 IDE 自动完成功能？

> ID：11741458
> 
> 赞同：37
> 
> 时间：2012-07-31T13:40:07.487
> 
> 标签：php, symfony, phpunit, phpstorm

我正在使用 Symfony2，一切都已安装，到目前为止我的测试运行良好。

我想自动完成 PHPUnit 的方法。

Symfony 的 `WebTestCase`类扩展`PHPUnit_Framework_TestCase`如下：

```
abstract class WebTestCase extends \PHPUnit_Framework_TestCase 
```

父类被突出显示为不存在。

**如何告诉我的 IDE 使用 PHPUnit 的库？**

我正在使用 PHPStorm
PHPUnit 可以通过路径获得`/Users/myUser/pear/share/pear/PHPUnit/`

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-31T13:53:12.623

将其添加为库...在您正在编辑的项目中将其添加到“外部库”。

然后应该包括它。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-06-27T09:58:03.327

对我来说（Ubuntu 12.04），它将此文件夹添加为外部库：

```
/usr/share/php/PHPUnit 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-02-26T16:31:38.410

对于 PHPStorm 用户，请转到文件 -> 设置 -> 项目设置 -> PHP 并在其中添加路径。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-07-22T14:22:43.850

PhpStorm 2016.2 引入了一个特性——在这种情况下——也是一个错误。

在 $this-> 上下文中，自动完成现在不再包含静态方法作为选项。（[https://blog.jetbrains.com/phpstorm/2016/07/completion-changes-in-phpstorm/#more-10425](https://blog.jetbrains.com/phpstorm/2016/07/completion-changes-in-phpstorm/#more-10425)）

由于 phpunit 测试被定义​​为静态方法但通过 $this-> 调用，因此 phpunit 的自动完成功能现在被有效地破坏了。

[他们在下一个 EAP ( https://youtrack.jetbrains.com/issue/WI-32530](https://youtrack.jetbrains.com/issue/WI-32530) )中回滚了 phpunit 的这一更改。

下一个稳定版本之前的解决方法：按 CTRL-Space 两次；这将在自动完成字段中显示静态方法。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-29T16:51:06.573

您可以将包添加`phpunit/phpunit`到`require-dev`composer.json 文件的部分。

运行后`composer install`，PHPStorm 会知道 PHPUnit 类。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-07-23T10:48:47.277

我有 OSX，由 homebrew 和 phpstorm 9.0 安装的 phpunit

那么它对我的工作原理：打开首选项或按 cmd+，-> 语言和框架 -> PHP -> 包含路径 -> 添加“/usr/local/Cellar/phpunit/4.7.6/libexec/”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-28T09:12:57.863

我有 PHPStorm 2017.1.4，我的操作系统是 Ubuntu 16.04。我已经在我的 /usr/local/bin 中安装了 phpunit.phar。

我将使用 ~/WORK/.. 作为示例路径，但您应该使用完整路径 /home/myname/WORK/..

我所做的只是转到我家中的一个文件夹（例如：~/WORK/）并运行：

```
composer require phpunit/phpunit 
```

作曲家完成下载 phpunit 后，我​​添加了一个新项目包含路径：

```
~/WORK/vendor/phpunit/phpunit/src 
```

现在我拥有了所有的 PHPUnit 自动补全功能，我可以直接跳转到 PHPUnit 的源代码，并且可以使用 composer 更新 PHPUnit 的代码。我还从 /usr/local/bin 中删除了 phpunit.phar 并将其替换为 ~/WORK/vendor/bin/phpunit 的链接

# opengl - 在 javax.media.opengl.glu.GLU.getCurrentGL 的这个线程上没有当前的 OpenGL 上下文

> ID：11741459
> 
> 赞同：0
> 
> 时间：2012-07-31T13:40:09.290
> 
> 标签：opengl, exception, glu, openglcontext

当我几个月前开始为“GL2 gl”学习Opengl（JOGL）时遇到了类似的问题......然后我发现了如何解决（所有与“gl”有关的东西都应该从显示器中调用/初始化方法）。

一段时间后，我还需要使用“GLU glu”（用于 gluOrtho2D）。于是这个问题又出现了。但是可以说这不是什么大问题，因为尽管出现了这个错误，程序运行良好。

不幸的是，现在这个问题似乎有一些烦人的影响..所以我真的很想解决它。

这里有一些代码：

```
...
GLU glu = new GLU();

public void display(GLAutoDrawable gLAutoDrawable) {
    ...
    //  map a 2D bild width*height on OpenGL
    glu.gluOrtho2D(-width/2, (width+1)/2, -(height+1)/2, height/2);
} 
```

有趣的是：

*   我在显示中有其他 glu 调用，例如“glu.gluLookAt(0, 0, 1, 0, 0, 0, 0, -1, 0);" 我从来没有遇到过问题

*   仅当我从另一个线程（“glcanvas.display”）调用刷新时才会发生

*   我已经做了很多尝试，比如每次在显示中初始化它，或者强制上下文：

    ```
    glu = new GLU();
    gLContext = gLCanvas.getContext();
    gLContext.makeCurrent(); 
    ```

但到目前为止没有任何效果：

线程“AWT-EventQueue-0”javax.media.opengl.GLException 中的异常：javax.media.opengl.glu.GLU.getCurrentGL(GLU.java:175) 处 javax.media.opengl.glu.GLU.getCurrentGL(GLU.java:175) 处的此线程上没有 OpenGL 上下文。 .glu.GLU.gluOrtho2D(GLU.java:1344)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:05:43.847

我试图在 glu.gluOrtho2D 之前移动 getContext 和 makeCurrent 并且它起作用了..

# regex - 我需要使用正则表达式验证提交的 MIME 类型没有换行符

> ID：11741460
> 
> 赞同：0
> 
> 时间：2012-07-31T13:40:12.697
> 
> 标签：regex, asp.net-mvc, entity-framework, validation

我努力了：

```
[RegularExpression(@"\n", ErrorMessage = "Error")] // Needs to not allow newline characters
public string ImageMimeType { get; set; } 
```

但是当我尝试上传合法`.bmp`文件时它总是失败。

我不确定如何适当地格式化这一行以防止换行符。

另外 - 在验证 MIME 类型时我还应该考虑其他任何因素吗？

**解决了**

```
[RegularExpression(@"[^\n]+", ErrorMessage = "Error")] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:06:05.403

您只是指定`\n`为正则表达式。您的合法文件将不匹配`\n`，因此它们被视为`NO_MATCH`. 你想要它的另一种方式。即文件名不能包含`\n`. 尝试

```
[^\n]+ 
```

这就是说，***匹配不包含换行符的 1-任意数量字符的字符串（如果您愿意，可以使用 {m,n} 语法指定字符串范围）***。

# wordpress - wp_nav_menu 限制项目

> ID：11741465
> 
> 赞同：0
> 
> 时间：2012-07-31T13:40:34.320
> 
> 标签：wordpress, menu

我用 21 个子主题方法构建了一个网站，在 wp-admin 中的 Appearance 下的菜单中添加了 14 个项目后，只出现了 10 个第一个项目。我在互联网上搜索，很多人提到将 suhosin 添加到 php.ini 来解决它。我试过但没有帮助。

任何人都有解决方案，请帮助我。我正在使用蓝主机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:10:45.140

My first thought is, this **may be a CSS error** only. Your menu may be overflowed with 14 items or didn't get enough space to display all items in one line. Check your browser rendered source code first and make sure that all your 14 menus are listed there or not.

If all 14 items are there, then you need to reduce the font size or padding/margin between each element to accommodate all menu items in one line.

For a better check, provide us the live site link.

# sql - Oracle - 选择 * where column>5

> ID：11741467
> 
> 赞同：1
> 
> 时间：2012-07-31T13:40:36.333
> 
> 标签：sql, oracle, ora-01722

我正在尝试基于列进行比较。比方说，如果列> 5。

```
select * where column>5 
```

该列包含非数字。我认为 Oracle 允许比较字符串（如 Java）。

显然这是不允许的。

```
ORA-01722: invalid number
01722\. 00000 -  "invalid number" 
```

有没有办法与非数字字段进行比较？
谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T13:43:32.987

是的，您必须将 5 放在引号中：

```
select * from table where column > '5' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T14:01:38.633

如果列是`varchar2`，那么：

```
select * from some_table where some_column > 5 
```

... 将所有列值隐式转换为数字，所以你真的在做：

```
select * from some_table where to_number(some_column) > 5 
```

这是`to_number()`导致 ORA-01722 的原因，即使您看不到它，但当它遇到一个非数字值时。对列值调用的函数也会停止使用任何索引（有点过于简单化了）。

您可以阻止它失败，如果有索引，则让它使用索引，`where some_column > '5'`就像其他人所说的那样，或者`where some_column > to_char(5)`. 但是您需要小心进行比较，因为它仍然是字符串比较，而不是数字比较；所以`'10'`不会**被**视为`> '5'`；并且您的 NLS 排序参数可能会产生您不期望的结果。或者更重要的是，其他人的 NLS 参数（例如，当您将其上线时）可能会产生您不期望的结果，并且与您在环境中获得的结果不匹配。[有关更多信息，请参阅文档](http://docs.oracle.com/cd/E14072_01/appdev.112/e10766/tdddg_globalization.htm#i1008368)。

您应该使用`number`列来保存数值，使用`date`列来保存日期等，并且`varchar2`只保存文本值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T14:03:44.390

更清楚地说明它为什么不起作用。

当使用数字文字`5`而不是字符文字时，`'5'`Oracle 会进行隐式数据类型转换并尝试将表中的所有值转换为数字。这就是为什么你得到那个错误。

您***永远不***应该依赖隐式数据类型转换。这一定会给你带来麻烦。

现在，如果您正确地将字符文字 ( `'5'`) 与字符列进行比较，则无需进行数据类型转换，也不会发生错误。

但是：如果您希望 Oracle 实际进行数字比较，那么您就错了。字符串基于 ASCII 值。因此（字符）值`'10'`低于**（**字符）值`'2`' 因为第一个字符`'1'`的排名低于`'2'`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T14:00:56.253

你可以使用`to_char`功能

```
select * from table where column > to_char(5) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T13:42:29.343

你错过了这张桌子：

```
select * where FROM tablename column>5 
```

但这仅在 column 是数字时才有效。如果没有，则不能使用`>`.

* * *

要比较字符串，您可以使用`LIKE`or ，在[此处](http://docs.oracle.com/cd/E17952_01/refman-5.1-en/string-comparison-functions.html)`STRCMP()`查看它们的示例。

正如@Gerrat 所说，您也可以使用`>`，`<`但双方的类型必须兼容（数字与数字或文本与文本）。要了解更多信息，请查看[THIS](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements002.htm)。

请注意，在文本比较中，它将单独比较每个字符，因此“11”将小于“2”。

# eclipse - eclipse 在尝试构建时崩溃

> ID：11741468
> 
> 赞同：0
> 
> 时间：2012-07-31T13:40:37.450
> 
> 标签：eclipse, build, crash-reports

我想知道是否有人可以解释为什么我的日食会崩溃。Eclipse 说它正在尝试构建，然后有一条消息没有响应，我在图 1 中以 eclipse close 的形式收到此消息

![在此处输入图像描述](../Images/55465c022fc76830e6c46653f8cb9794.png)

图1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:45:19.390

分配给eclipse的启动jvm内存似乎很低，在提供的屏幕截图中：-Xms40m -Xmx512m

增加这些值可能会为 Eclipse 提供更多内存来构建项目。（尝试关闭eclipse工作区中所有未使用的项目）

假设您的机器的 RAM > 2-3 GB，修改文件 eclipse.ini（在您的情况下位于 C:\eclipse\eclipse.ini）

将“-Xms”和“-Xmx”的值更新为以下

```
....
-Xms512m
-Xmx1024m 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-15T06:54:20.200

问题是专用于 eclipse 的内存。

这是我的问题解决的方式

拳头:~>找到eclipse.ini

/home/ 你的 - 用户 /eclipse/eclipse.ini

第二

vi /home/ 你的 - 用户 /eclipse/eclipse.ini

> -启动插件/org.eclipse.equinox.launcher_1.3.0.v20140415-2008.jar

--launcher.library

插件/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.1.200.v20150204-1316

-产品

org.eclipse.epp.package.cpp.product

--launcher.defaultAction

打开文件

-showsplash

org.eclipse.platform
--launcher.XXMaxPermSize
512m
--launcher.defaultAction
openFile
--launcher.appendVmargs
-vmargs
-Dosgi.requiredJavaVersion=1.7
-XX:MaxPermSize=1024m
-Xms512m
-Xmx2048m

然后更改这一行 --launcher.XXMaxPermSize
512m // 我的是 256 -XX:MaxPermSize=1024m // 我的是 512
-Xms512m // 我的是 40
-Xmx2048m // 我的是 512

完毕 ：）

# c# - 将变量存储在列表/数组中并循环通过以后的c#

> ID：11741471
> 
> 赞同：0
> 
> 时间：2012-07-31T13:40:44.650
> 
> 标签：c#, collections

对不起，我想我之前不清楚。我正在尝试按照 ORmapper 在下面所说的那样创建任意变量的列表，然后稍后在 foreach 循环中获取它们的值。

此外，所有变量都是字符串类型，所以我认为可以放在一个列表中。谢谢。

有没有办法将变量存储在列表或数组中，然后再循环遍历它们。

例如：我在一个名为 x、y 和 Z 的类 c 中有三个变量。

我可以做类似的事情：

公共列表 Max_One = 新列表 {cx,cy,cz}

* * *

然后在代码中

```
 foreach (string var in Max_One)
          {                   
              if ((var < 0) | (var > 1 ))
              {
                // some code here
              }
          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:43:43.983

是的，例如，如果它们都是`string`s：

```
public List<string> Max_One = new List<string> {c.x,c.y,c.z}; 
```

这使用[集合初始](http://msdn.microsoft.com/en-us/library/bb384062.aspx)值设定项语法。

`string`但是，将 a 与 a进行比较是没有意义的`int`。这是一个有效的例子：

```
 foreach (string var in Max_One)
  {                   
      if (string.IsNullOrEmpty(var))
      {
        // some code here
      }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:43:45.827

您可以尝试使用：

```
List<object> list = new List<object>
{
  c.x,
  c.y,
  c.z  
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:43:48.913

如果您的属性是数字（`int`例如），您可以这样做：

```
List<int> Max_One = new List<int> { c.x, c.y, c.Z }; 
```

`foreach`像这样使用你的

```
foreach(int myNum in Max_One) { ... } //you can't name an iterator 'var', it's a reserved word 
```

`int`用正确的数字类型（`double`,`decimal`等）替换列表声明

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T14:07:16.087

我会以相反的方式回答你的问题

首先，您不能用“var”命名变量，因为它是保留名称。所以你可以为 foreach 做的是

```
foreach (var x in Max_One)
      {                   
          if ((x< 0) || (x> 1 ))
          {
            // some code here
          }
      } 
```

如果您有 .Net 3.0 及更高版本的框架，您可以使用“var”将 x 定义为 Max_One 列表的成员，而无需担心 x 的实际类型。如果您的版本早于 3.0，那么您需要指定 x 的数据类型，在这种情况下您的代码是有效的（尽管仍有风险）

最后一点（这是你的第一点）

```
public List Max_One = new List {c.x,c.y,c.z} 
```

您需要了解的主要内容是，为了存储在列表中，成员必须来自相同的数据类型，因此除非 a 、 b 和 c 来自相同的数据类型，否则您不能将它们存储在同一个列表中，除非如果您将列表定义为存储数据类型“对象”的元素。如果您使用“对象”方法，则需要将元素转换为原始类型，例如：

```
var x = (int) Max_One[0]; 
```

[您可以从该网站http://www.dotnetperls.com/collections](http://www.dotnetperls.com/collections)阅读有关列表和其他替代方案的更多信息

Ps 如果这是一个家庭作业，那么你应该阅读更多并从视频教程和书籍中学习更多；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T14:42:14.997

您是否有特殊原因要预先*存储*变量列表？*如果在需要时重用*这样的列表就足够了，我会选择创建一个返回的属性`IEnumerable<string>`：

```
public IEnumerable<string> Max_One {
    get {
        yield return c.x;
        yield return c.y;
        yield return c.z;
    }
} 
```

只有在调用属性 getter 时才会检索此枚举中返回的值。因此，生成的可枚举将始终包含和`c.x`的当前值。`c.y``c.z`

`foreach`然后，您可以使用您在问题中提到的循环遍历这些值。

如果您需要逐步组合变量列表，这可能不切实际；在这种情况下，您可能必须使用反射。如果确实需要，请告诉我；我可以为此提供一个示例，但它会变得更加冗长和复杂。

# android - Andengine - 从启动画面中删除广告

> ID：11741475
> 
> 赞同：3
> 
> 时间：2012-07-31T13:40:53.923
> 
> 标签：android, admob, andengine

问题是 XML 视图（广告）出现在游戏数据加载时（大约 5-6 秒）。如何从启动画面中删除广告？

将视图添加到布局。XML 视图 - 不可见

```
@Override
protected void onSetContentView() {
     relativeLayout = new RelativeLayout(this);
     final FrameLayout.LayoutParams relativeLayoutLayoutParams = 
          new FrameLayout.LayoutParams( FrameLayout.LayoutParams.MATCH_PARENT,
          FrameLayout.LayoutParams.MATCH_PARENT);

     this.mRenderSurfaceView = new RenderSurfaceView(this);
     this.mRenderSurfaceView.setRenderer( mEngine, this );

     final LayoutParams surfaceViewLayoutParams = new RelativeLayout.LayoutParams(
          super.createSurfaceViewLayoutParams());
     surfaceViewLayoutParams.addRule(RelativeLayout.CENTER_IN_PARENT);

     // XML-view above AndEngine view
     LayoutInflater vi = (LayoutInflater) getSystemService(
          Context.LAYOUT_INFLATER_SERVICE);
     vv = vi.inflate(R.layout.main, null);
     vv.bringToFront();
     // set XML-view visible!
     vv.setVisibility( View.GONE );

    // add views to the layout
    // AndEngine view
    relativeLayout.addView(this.mRenderSurfaceView, surfaceViewLayoutParams);

    // XML view
    relativeLayout.addView(vv, createAdViewLayoutParams());
    setContentView(relativeLayout, relativeLayoutLayoutParams);
} 
```

加载启动画面资源和场景

```
@Override
public void onCreateResources(OnCreateResourcesCallback pOnCreateResourcesCallback) throws Exception {

    splashBackgroundTextureAtlas = new BitmapTextureAtlas(getTextureManager(), 480, 800, TextureOptions.NEAREST);
    splashBackgroundTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(splashBackgroundTextureAtlas, this, "gfx/splash.png", 0, 0);
    mEngine.getTextureManager().loadTexture(splashBackgroundTextureAtlas);

    pOnCreateResourcesCallback.onCreateResourcesFinished();
}

@Override
public void onCreateScene(OnCreateSceneCallback pOnCreateSceneCallback) throws Exception {
    splashScene = new Scene();
    splashScene.setBackgroundEnabled(false);
    splashScene.attachChild(new Sprite(0, 0, splashBackgroundTextureRegion, this.getVertexBufferObjectManager()));
    pOnCreateSceneCallback.onCreateSceneFinished(splashScene);
} 
```

加载游戏资源和场景

```
@Override
public void onPopulateScene(Scene pScene, OnPopulateSceneCallback pOnPopulateSceneCallback) throws Exception {
    mEngine.registerUpdateHandler(new TimerHandler(0.01f, new ITimerCallback() {
            public void onTimePassed(final TimerHandler pTimerHandler) {
                    mEngine.unregisterUpdateHandler(pTimerHandler);
                    loadResources();
                    loadScene();

                    mEngine.setScene(scene);
                }
            }));

    pOnPopulateSceneCallback.onPopulateSceneFinished();

    // set XML-view visible!                
    runOnUiThread(new Runnable() {
        public void run() { 
            vv.setVisibility(View.VISIBLE);
        }
    });
}

public void loadResources() {
    // game resources
    try {
        ITexture backgroundTexture = new BitmapTexture(
                this.getTextureManager(), new IInputStreamOpener() {
                    @Override
                    public InputStream open() throws IOException {
                        return getAssets().open("gfx/bg01.jpg");
                    }
                });
        backgroundTexture.load();
        mBackgroundTextureRegion = TextureRegionFactory.extractFromTexture(backgroundTexture);

    } catch (IOException e) {
    }
}

public void loadScene() {
    scene = new Scene();
    scene.setTouchAreaBindingOnActionDownEnabled(true);

    // add background to scene
    Sprite backgroundSprite = new Sprite(0, 0, this.mBackgroundTextureRegion, getVertexBufferObjectManager());
    scene.attachChild(backgroundSprite);

    // add sprite to scene
    pandaSprite = new Panda( false, TextureControlManager.createTiledTextureRegionFromAsset(
            getTextureManager(), this, Panda.ANIMATION_FILES), 
            getVertexBufferObjectManager());
    scene.attachChild(pandaSprite);

    scene.attachChild(pandaSprite);
    scene.registerTouchArea(pandaSprite);       
} 
```

**编辑：** 布局 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/footer_layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:gravity="bottom"
    android:orientation="vertical" >

<com.google.ads.AdView
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@+id/adView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    ads:adSize="BANNER"
    ads:adUnitId="@string/admob_id"
    ads:loadAdOnCreate="true" />

</LinearLayout> 
```

堆栈跟踪：

```
07-31 19:38:27.531: D/AndEngine(4960): MainActivity.onSurfaceCreated @(Thread: 'GLThread 27')
07-31 19:38:27.531: D/AndEngine(4960): MainActivity.onCreateGame @(Thread: 'GLThread 27')
07-31 19:38:27.531: D/AndEngine(4960): MainActivity.onCreateResources @(Thread: 'GLThread 27')
07-31 19:38:27.541: D/AndEngine(4960): MainActivity.onCreateScene @(Thread: 'GLThread 27')
07-31 19:38:27.551: D/AndEngine(4960): MainActivity.onPopulateScene @(Thread: 'GLThread 27')
07-31 19:38:27.551: D/AndEngine(4960): MainActivity.onGameCreated @(Thread: 'GLThread 27')
07-31 19:38:27.551: D/AndEngine(4960): MainActivity.onSurfaceChanged(Width=320,  Height=480) @(Thread: 'GLThread 27')
07-31 19:38:27.551: D/AndEngine(4960): MainActivity.onResumeGame @(Thread: 'main')
07-31 19:38:28.052: D/dalvikvm(4960): GC_FOR_MALLOC freed 127K, 54% free 3307K/7175K, external 20K/512K, paused 39ms
07-31 19:38:28.062: I/dalvikvm-heap(4960): Grow heap (frag case) to 6.978MB for 1536016-byte allocation
07-31 19:38:28.152: D/dalvikvm(4960): GC_FOR_MALLOC freed 7K, 45% free 4799K/8711K, external 20K/512K, paused 63ms
07-31 19:38:28.312: D/dalvikvm(4960): GC_CONCURRENT freed <1K, 45% free 4799K/8711K, external 20K/512K, paused 5ms+8ms
07-31 19:38:28.472: D/dalvikvm(4960): GC_EXPLICIT freed 1502K, 63% free 3299K/8711K, external 20K/512K, paused 54ms
07-31 19:38:29.173: D/dalvikvm(4960): GC_CONCURRENT freed 200K, 60% free 3526K/8711K, external 40K/512K, paused 4ms+5ms
07-31 19:38:29.403: D/dalvikvm(4960): GC_CONCURRENT freed 477K, 60% free 3519K/8711K, external 40K/512K, paused 4ms+31ms 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T18:51:48.603

最好的选择是在游戏开始之前不加载广告。

`ads:loadAdOnCreate="true"`从您的 AdView XML 定义中删除该属性。通过这样做，AdView 将不会在 onCreate() 中自动加载广告。

准备好后，然后在代码中使用 AdRequest 加载 AdView：

```
AdView adView = (AdView) findViewById(R.id.adView);
adView.loadAd(new AdRequest()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:24:56.173

我会在 XML 文件中将广告视图可见性设置为“已消失”，然后在使用代码更改 onTimePassed 中的场景后，`mEngine.setScene(scene);`将可见性更改为“可见”

像这样

```
@Override 
public void onPopulateScene(Scene pScene, OnPopulateSceneCallback pOnPopulateSceneCallback) throws Exception {
mEngine.registerUpdateHandler(new TimerHandler(0.01f, new ITimerCallback() {
        public void onTimePassed(final TimerHandler pTimerHandler) {
                mEngine.unregisterUpdateHandler(pTimerHandler);
                loadResources();
                loadScene();

                mEngine.setScene(scene);

                // set XML-view visible here!                
                runOnUiThread(new Runnable() {
                    public void run() { 
                        vv.setVisibility(View.VISIBLE);
                    }
                });
        });

        pOnPopulateSceneCallback.onPopulateSceneFinished();

    });
} 
```

# ruby-on-rails - Ruby on Rails 数据库和应用程序设计

> ID：11741477
> 
> 赞同：2
> 
> 时间：2012-07-31T13:40:59.687
> 
> 标签：ruby-on-rails, database-design, architecture, rails-postgresql

我们必须基于大型数据库创建相当大的 Ruby on Rails 应用程序。该数据库每天更新，每个表大约有 500 000 条记录（或更多），并且这个数字会随着时间的推移而增长。我们还必须提供所有数据的正确版本以及参照完整性。用户必须可以从一个版本移动到另一个版本，这是主数据库在不同时间点的“快照”。此外，部分数据需要通过 API 提供给其他外部应用程序。

考虑到大量数据，我们考虑将数据库拆分为多个部分：

1.  当前数据状态

2.  每个表的版本化属性

3.  第一个数据库在特定历史时间点的快照

每一个都有自己的应用程序，创建一个带有 API 的服务来与数据交互。它是必需的，因为我们不想创建多个应用程序直接连接到多个数据库。

问题是：这是正确的方法吗？如果没有，你有什么建议？

我们从未有过如此规模的项目的任何经验，我们正在努力寻找可能的最佳解决方案。我们不知道这种数据分离是否有任何意义。如果是这样，如何提供不同应用程序与单个服务以及服务本身之间的适当通信，因为这也是必需的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T03:43:48.500

一般来说，表中的数据量不应该是您首先关心的问题。在 PostgreSQL 中，您可以使用大量选项来优化针对大型表的查询。更大的问题与您查询的具体内容、时间和原因有关。您的查询负载总是比数据量更大的问题。拥有 400 万行的 10 年财务数据是一回事。必须汇总这十年的数据以确定支票账户的余额是不同的。

一般来说，在我看来，您正在尝试创建一个依赖于此类聚合的系统。在这种情况下，我推荐以下方法，我称之为 log-aggregate-snapshot。在此，您基本上拥有三个互补的模型，它们协同工作以提供最新的、性能良好的解决方案。然而，这方面的限制对于认识和理解是很重要的。

1.  事件模型。这是仅附加的，没有更新。在此模型中，插入发生，并且仅在绝对需要时更新用于某些查询的某些元数据。对于财务应用程序，这将是表示日记帐分录和行的表格。

2.  聚合关闭模型。这是仅附加的（尽管出于重新开放期间的目的允许删除）。这为特定目的提供前滚信息。一旦进入关闭条目，就不能在关闭期间进行条目。在财务应用程序中，这将代表期末余额。可以通过从聚合点开始并向前滚动来计算新余额。您还可以使用部分索引来更轻松地仅提取您需要的数据。

3.  辅助数据模型。这由较小的表组成，这些表允许更新、插入和删除，前提是不影响其他模型的完整性。在财务应用程序中，这可能是客户或供应商数据、员工数据等。

# android - Android：将 getDat() 与当前日期进行比较

> ID：11741478
> 
> 赞同：0
> 
> 时间：2012-07-31T13:41:00.780
> 
> 标签：android

我在下面有这个 CalendarView

![在此处输入图像描述](../Images/bf9e08fa2d11d4b22b34441d3806f0a9.png)

如果我单击今天的日期，它将弹出一个对话框。但是如果您单击 CurrentDate 之前的日期，则不会弹出此日历，它只会说您无法在当前日期/时间之前添加事件.. 和如果我点击今天日期之后的任何一天，运行良好，但是当我点击今天的日期时，我会说一条消息，就像我点击之前的日期时一样......

这是我比较日期的代码

```
long currentTime;
Date curr = new Date();
currentTime = curr.getTime();
if(cw.getDate() >= currentTime || formatDate(cw.getDate()) == formatDate(currentTime))
{
            Dialog d = new Dialog(ScheduleActivity.this);
            //some code for setting up the dialog
            d.show();

}
else
{
        Toast toast = Toast.makeText(ScheduleActivity.this, Long.toString(cw.getDate())+" || "+Long.toString(currentTime),10000);
        toast.show();

        Log.d("timecheck", formatDate(cw.getDate())+" || "+ formatDate(currentTime));
} 
```

我只是使用格式为 MM/dd/yyyy 的 formatDate 来比较两个日期，因为单独比较时间戳仍然不起作用（使用 ">=" ）

顺便说一句，吐司发生了变化，所以我可以看到正在比较的值......以毫秒为单位，它们确实是不同的，但是当我将其格式化为 MM/dd/yy 时，它会认为它是相同的......但它不会通过 if 部分，它将进入 else 部分.. 我在 logcat 中记录了 formattedDate，logcat 下面..

Logcat 日志 ![在此处输入图像描述](../Images/542fe049d4a514201204b5ac58977436.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:51:17.943

您将需要使用`equals`而不是`==`比较从 formatDate 返回的字符串：

```
if(cw.getDate() >= currentTime || formatDate(cw.getDate()).equals(formatDate(currentTime))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:51:40.500

当您将所有输入与当前日期进行比较时，您的弹出窗口没有出现尝试通过添加以前的日期输入其他值进行比较，然后再次尝试它会起作用:)

# networking - Windows 7 升级，UDP 广播问题

> ID：11741480
> 
> 赞同：1
> 
> 时间：2012-07-31T13:41:01.907
> 
> 标签：networking, windows-7, udp

就 UDP 协议和通过网络发送/接收数据而言，我是这个环境的新手。我已阅读有关此类问题的另一篇文章，但我不确定如何解决我的问题：

我刚刚将 PC 从 XP 升级到 Windows 7。这次升级是由于我的应用程序需要在 Win7 上运行。我没有改变我们的 UDP 流是广播的。通过升级，我无法再运行旧版本的应用程序，因为 UDP 流无法连接到我的应用程序。

我已关闭所有防火墙并以管理员身份运行所有内容。

我的设置是这样的：

代码在ip上运行：192.168.2.1 UDP从192.168.2.1发送到192.168.2.87然后广播到192.168.2.255

我曾经能够在单独的计算机上使用我的旧应用程序看到这个 UDP 流：192.168.2.12

如果我将 UDP 流更改为直接转到 192.168.2.12 ip，那么我的应用程序可以工作，但是 UDP 不再广播。我需要 UDP 能够被多台计算机读取。

这是我为 UDP 流输出的wireshark：

```
Source: 192.168.2.87 
Destination: 192.168.2.255 
Protocol: UDP Info: 
Sorce Port: 6601 Destination Port: 6601 
```

我已经尝试对我的 c 代码进行硬编码以听取我能想到的任何可能性，也就是 sender addr 函数：

```
senderAddr.sin_addr.s_addr = htonl(INADDR_ANY); 
```

类似于：

```
 senderAddr.sin_addr.s_addr = inet_addr("192.168.2.212") 
```

这是初始化 I/O 缓冲区的代码：

```
// UDP Receiver Declarations -
SOCKET SockIn = INVALID_SOCKET;
SOCKADDR_IN senderAddr;
int senderSize = sizeof(senderAddr);
u_short PortIn = 6601;

int timeout = 1;

//===================<Callbacks::Callbacks>==================
//
// Summary: Constructor
//
//=============================================================================
Callbacks::Callbacks(RTUserIntegrationI &a_rIntegration)
: m_rIntegration(a_rIntegration)
, m_pUDPInput(NULL)

{
}

//=====================<Callbacks::~Callbacks>===============
//
// Summary: Destructor
//
//=============================================================================
Callbacks::~Callbacks()
{
}

//=====================<Callbacks::InitIOBuffers>====================
//
// Summary: Init function for the IO buffer
//
//=============================================================================
void Callbacks::vInitIOBuffers()
{
    BOOL bOptVal = TRUE;
        int bOptLen = sizeof(BOOL);

    WSADATA WSAData;

    UInt Size = 0;
  // UDP Declarations -

   // Initialize the member pointers to buffers

    bufferin = m_rIntegration.pGetIOBuffer(Input_Buffer);
    if (bufferin != NULL)
    m_pUDPInput = static_cast<InputData*>(bufferin->pGetDataAddress(Size));

  // UDP Receive -
   if (WSAStartup(MAKEWORD(2, 2), &WSAData) != 0)
   {
       printf("\nCould not open WSA connection");
       WSACleanup();
   }

   SockIn = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);
   if (SockIn == INVALID_SOCKET)
   {
       printf("\nCould not create socket.");
       closesocket(SockIn);
       WSACleanup();
   }

   senderAddr.sin_family = AF_INET;
   senderAddr.sin_port = htons(PortIn);
   senderAddr.sin_addr.s_addr = htonl(INADDR_ANY);

      if (setsockopt(SockIn, SOL_SOCKET, SO_REUSEADDR, (char*)&bOptVal, bOptLen) != INVALID_SOCKET)
   {
       printf("\nSet SO_REUSEADDR: ON.");
   }

   if (bind(SockIn, (struct sockaddr *) &senderAddr, senderSize) == -1)
   {
       printf("\nCould not bind socket.");
       closesocket(SockIn);
       WSACleanup();
   }

   setsockopt(SockIn, SOL_SOCKET, SO_RCVTIMEO, (char*) &timeout, sizeof(timeout));

} 
```

我将接收端口号硬编码为 6601。

上面的代码工作正常，计算机在 Windows XP 中看到并读取广播的 UDP，但在 Windows 7 中停止工作。

任何建议将不胜感激。

添加：

192.168.2.1 生成 UDP 流--->发送到 192.168.2.87--->在 192.168.2.255 上广播--->这些计算机中的任何一台都没有改变......然后我有两台计算机（一台 XP 和一台 Windows 7）比听 2.255 ip。XP 正在获取 UDP，而 Win7 没有。

# java - 具有多个框架的 GUI

> ID：11741482
> 
> 赞同：0
> 
> 时间：2012-07-31T13:41:02.530
> 
> 标签：java, swing, user-interface, jframe

我正在寻找构建一个带有表格区域和一个区域的 Java GUI，该区域将显示表格中选定行的数据。我以前从未尝试过多帧设置，所以在我冒险这样做之前，我想与其他人核实一下。拥有两个框架并让它们来回传递数据是否困难？我的想法是，我可以将详细信息框架移动到屏幕上任何我喜欢的位置，或者移动到第二台显示器上，如果用户愿意，可以让表格全屏显示。任何输入或示例表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:49:00.840

*   不要创建两个更多`JFrame`的 s 使用`JDialog`，

*   将此`JDialog`用于其他操作

*   创建一个`JFrame`和一个`JDialog`以显示详细信息

*   必须确定是否`JTables`选择以及选择了哪一行

*   更好的是设置`ListSelectionMode`为`SingleSelection`

*   也许会更好地调用（显示已经存在`JDialog`）`JPopupMenu Action`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:48:00.303

你做你所追求的应该没有问题。您可以`public`在每个框架中拥有公开属性和/或结构的方法，然后将其中一个的实例传递`JFrame`给另一个。这应该允许您来回传递数据。

话虽如此，但我认为这种情况仅在您拥有一个、两个或最多三个时才有效`JFrames`。有很多框架互相调用可能会导致维护噩梦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:47:45.090

这样做有几种可能性：

*   您可以将其中一个 jframe 作为侦听器添加到另一个，或者两者都添加到彼此。为此，您必须实现一个侦听器机制，例如在 java.awt 中。您可以传递事件对象中包含的信息 - 这将是最干净的选择
*   您可以直接在主框架的构造函数中传递细节框架的实例，并在细节框架上从主框架调用操作。这是最简单的方法，但是如果您要添加一些新功能，则需要进行大量代码更改

# c++ - Unbound Array - 行为怪异的 PopBack

> ID：11741485
> 
> 赞同：1
> 
> 时间：2012-07-31T13:41:08.570
> 
> 标签：c++, data-structures

我写了一个未绑定的数组，来练习一些 C++。但是 popBack 方法不能正常工作。我只是要粘贴我的代码，我希望它不会太多。代码使用 gcc (MacPorts gcc47 4.7.1_1) 4.7.1 编译。我会很感激一些帮助。谢谢 ：）

**unbound_array.hpp**

```
#ifndef _unbound_array_h_
#define _unbound_array_h_

#include <iostream>

namespace datastructures
{

template <typename T>
class UnboundArray {

private:
    int beta;
    int alpha;
    int w;
    int n;

    //T data[];
    T *data;

    auto reallocate(const int size) -> void;

public:
    UnboundArray(): beta(2) {
        alpha = 4;
        w = 1;
        n = 0;
        data = new T[w];
    }

//  void pushBack(T& element);
    auto pushBack(T element) -> void;
    auto popBack() -> T;
    auto operator [](const int& b) -> T&;
};  

    template <typename T>
    auto UnboundArray<T>::pushBack(T element) -> void {
        if (n == w) {
            reallocate(beta * n);
        }
        data[n] = element;
        n++;
   }

    template <typename T>
    auto UnboundArray<T>::popBack() -> T {
        n = (n == 0) ? 0 : (n - 1);
        if ((alpha * n <= w) && n > 0) {
            reallocate(beta * n);
        }
        return data[n];
    }

    template <typename T>
    auto UnboundArray<T>::operator [](const int& b) -> T&{
        return data[b];
    }

    template <typename T>
    auto UnboundArray<T>::reallocate(const int size) -> void {
        int idx = n;
        w = size;
        T *array = new T[w];
        for (int i = 0; i < idx; ++i) array[i] = data[i];
        delete[] data;
        data = array;
        std::cout << "Reallocation. #elements: " << (n + 1) 
        << " new size of UnboundArray: " << w << std::endl;
    }

} // datastructures
#endif 
```

**测试.cpp**

```
#include <iostream>
#include "unbound_array.hpp"

using namespace datastructures;

int main() {
    int num = 25;

    std::cout << "Test of datastructures" <<std::endl;
    UnboundArray<int> a;
    for (int i = 0; i < num; ++i) {
        std::cout << "Adding "<< i <<" to UnboundArray." << std::endl;
        a.pushBack(i);
    }

    for (int i = 0; i < num; ++i) {
        std::cout << "array[" << i << "] = "<< a[i] << std::endl;
    }

    for (int i = 0; i < num; ++i) {
        std::cout << "Popping " << a.popBack() << std::endl;
    }

    return 0;
} 
```

**输出**

添加（调整大小）效果很好，operator[] 也可以。只是 popBack 困扰我。

```
Popping 24
Popping 23
Popping 22
Popping 21
Popping 20
Popping 19
Popping 18
Popping 17
Popping 16
Popping 15
Popping 14
Popping 13
Popping 12
Popping 11
Popping 10
Popping 9
Reallocation. #elements: 9 new size of UnboundArray: 16
Popping 8
Popping 7
Popping 6
Popping 5
Reallocation. #elements: 5 new size of UnboundArray: 8
Popping 3
Popping 3
Reallocation. #elements: 3 new size of UnboundArray: 4
Popping 556531726
Reallocation. #elements: 2 new size of UnboundArray: 2
Popping -268435456
Popping 0 
```

**编辑**

我在重新分配中更改了代码。

```
template <typename T>
auto UnboundArray<T>::reallocate(const int size) -> void {
    w = size;
    T *array = new T[w];
    for (int i = 0; i < w; ++i) array[i] = data[i];
    delete[] data;
    data = array;
    std::cout << "Reallocation. #elements: " << (n + 1)
    << " new size of UnboundArray: " << w << std::endl;
} 
```

现在可以了。

**编辑2**

`reallocate()`不能用 调用两次`beta * n`，`popBack()`必须是`w / beta`。 `popBack()`现在返回 return `data[--n]`。该数组未分配`malloc()`. 功能就在那里，我将添加一些检查，但仅此而已。谢谢你。

```
template <typename T, size_t ALPHA, size_t BETA>
auto UnboundArray<T, ALPHA, BETA>::pushBack(T& element) -> void {
        if (n == w) {
                reallocate(BETA * n);
        }
        data[n++] = element;
}

template <typename T, size_t ALPHA, size_t BETA>
auto UnboundArray<T, ALPHA, BETA>::popBack() -> T {
        if ((ALPHA * n <= w) && n > 0) {
                reallocate(w / BETA);
        }
        T ret = data[--n];
        data[n] = 0;
        return ret;
}

template <typename T, size_t ALPHA, size_t BETA>
auto UnboundArray<T, ALPHA, BETA>::operator[](const int& b) -> T& {
        return data[b];
}

template <typename T, size_t ALPHA, size_t BETA>
auto UnboundArray<T, ALPHA, BETA>::reallocate(const int size) -> void {
        w = size;
        T* array = (T*) malloc(sizeof(T) * w);
        for (int i = 0; i < n; i++) array[i] = data[i];
        free(data);
        data = array;
        std::cout << "Reallocation. #elements: " << n << " new max size of UnboundArray: " << w << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T13:52:35.100

您`popBack`减小了数组的大小，可能会重新定位，它会使用缩小的大小进行复制，然后尝试读取旧大小的最后一个元素（未复制）。我建议您将 popBack 更改为：

```
template <typename T>
    auto UnboundArray<T>::popBack() -> T {
        n = (n == 0) ? 0 : (n - 1);
        T result = data[n];
        if ((alpha * n <= w) && n > 0) {
            reallocate(beta * n);
        }
        return result;
    } 
```

当在空数组上调用 popBack 时，我也会抛出异常。

**在 OPs 编辑之后**

我提到的问题在某种程度上通过编辑解决了，但仍然存在缺陷： `reallocate`总是`beta * n`在 reallocate 中使用 so调用`size = 2 * n`。由于数据将保存`n`元素，因此最终读取的数据量将是那里的两倍。这可能会触发访问冲突，因此只要存在这种情况，您就应该认为您的代码是不安全的。相反，复制方法应该只读取那里的内容（n 个元素）。`reallocate`当然，这是理所当然的，n 总是在数组中保存正确数量的元素，因此在调用之前不能更改它。

# css - 防止渐进式（逐行）加载背景图像

> ID：11741487
> 
> 赞同：2
> 
> 时间：2012-07-31T13:41:16.070
> 
> 标签：css, load, background-image

我正在寻找一种让背景图像（CSS）加载的方法，就好像它们在加载后就出现了一样，而不是“向下滚动”。我宁愿让图像在一次闪光中延迟 300 毫秒出现，而不是让它看起来像一个糟糕的 PowerPoint 效果。

任何可以使用的技术或特定代码（除了缓存）？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T13:52:23.853

jsfiddle [http://jsfiddle.net/9fFKT/3/](http://jsfiddle.net/9fFKT/3/)

```
$("#bg").hide();
$('#bg').load(function(){

  $('#bg').show();
}); 
```

使用jquery，您可以隐藏直到它加载并在加载后显示它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:45:57.567

基本上，您需要在初始加载时隐藏元素，或者在 CSS 中**没有**设置背景，通过 JavaScript 添加图像，然后将 CSS 背景与每个图像的 onload 事件一起应用。

单靠 CSS 无法做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T13:50:14.497

您可以将图像加载为隐藏在页面顶部，因此当您稍后将其放入 DOM 时，它是一个缓存副本。或者，您可以在其上放置一个隐藏属性，并在 300 毫秒计时器后，关闭隐藏。后者会更有把握地做你想做的事，但这取决于你的观众的网络速度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T13:49:33.057

首先，如果您的图像出现在“向下滚动”中，则它的图像太重了。

存在不同的程序或网站以减少您的网络图像（不损失质量），[例如 Yahoo SMUSH.IT！](http://developer.yahoo.com/yslow/smushit/)有好处！

之后，我不知道是否存在下载后出现背景图像的方法......也许在JavaScript中......

# jquery - jquery淡入淡出不起作用

> ID：11741492
> 
> 赞同：0
> 
> 时间：2012-07-31T13:41:31.020
> 
> 标签：jquery

```
 <div id="ranking">
                                    <div id="ranking_wrapper">
                                        <h5>Select site ranking</h5>
                                        <img src="images/star.png" width="23" height="23" alt="" border="0">
                                        <input type="hidden" name="sitename" value="webcamking">
                                        <input type="radio" name="rank" value="1">1
                                        <input type="radio" name="rank" value="2">2
                                        <input type="radio" name="rank" value="3" checked="checked">3
                                        <input type="radio" name="rank" value="4">4
                                        <input type="radio" name="rank" value="5">5
                                        <img src="/images/star.png" width="23" height="23" alt="" border="0">
                                        <p><input type="submit" value="Rank This Site" id="rank_submit"></p>
                                    </div>

                                    <div id="response" style="display:none;" >
                                        <h5>Loading...</h5>
                                        <img src='images/ajax_loader.gif' class='img_center'/>
                                    </div>
                                        </div>
                            <script>
                                        $("#rank_submit").click(function(){

                                          $("#ranking_wrapper").fadeOut(0);
                                            $("#response").fadeIn('slow');
                                            $("#response").fadeOut('slow',function(){

                                                 $("#ranking").html('<div id="response" style="display:none;"> Thanks you for ranking webca.</div>');
                                            });

                                        });
                            </script> 
```

问题是元素淡出后，它不会将 div 元素添加到排名 div 中。

```
 $("#response").fadeOut('slow',function(){

                                                 $("#ranking").html('<div id="response" style="display:none;"> Thanks you for ranking webca.</div>');
                                            }); 
```

回调函数不起作用..为什么？！！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:43:22.573

*   一定要在`#response`已经进入 dom时执行 fadeOut
*   确定`#ranking`存在
*   `div`你注射的有`display: none`（所以你看不到它）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:46:02.407

因为你有这个

```
<div id="response" style="display:none;"> 
```

您正在将 html 更改为该 html，因此它不显示，因此您将看不到它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T13:49:33.663

为什么添加属性 style="display:none"

替换代码

```
$("#ranking").html('<div id="response" style="display:none;"> Thanks you for ranking webca.</div>');

 $("#ranking").html('<div id="response"> Thanks you for ranking webca.</div>'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T14:00:15.390

请删除

```
style="display:none;" 
```

从您的代码中。它隐藏了您的 html。

[在http://jsfiddle.net/XcPd5/](http://jsfiddle.net/XcPd5/)工作演示。

# objective-c - 无法从 AppDelegate 访问 NSObject 的公共方法

> ID：11741493
> 
> 赞同：0
> 
> 时间：2012-07-31T13:41:31.550
> 
> 标签：objective-c, ios5

我创建了这个 NSObject 子类型类：

```
#import <Foundation/Foundation.h>
#import "SQLiteManager.h"

@interface clickEventManagement : NSObject{

    SQLiteManager *dbManager;

    NSURLConnection *adsconnection;

    NSMutableData *responseData;

}

@property (strong, nonatomic) NSURLConnection *adsconnection;

-(void) insertClickAdd:(int)zona;

-(void) insertPrintAdd:(int)zona;

-(NSArray*) loadClicks;

@end 
```

我已经在 AppDelegate.h 中声明了它：

```
#import "clickEventManagement.h"

@interface AppDelegate : NSObject <UIApplicationDelegate, AVAudioSessionDelegate>

{

    BOOL firstRun;

    AVPlayer *player;

    clickEventManagement *clickEvent;

}

@property (strong, nonatomic) clickEventManagement *clickEvent; 
```

但是当我尝试在 - (void)applicationDidEnterBackground:(UIApplication *)application 委托中实现它们时，clickEventMangement 方法不可用。

已编辑

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{

    clickEvent = [[clickEventManagement alloc] init];

    [clickEvent -> "loadClicks" method is not available in the Xcode list

} 
```

其他视图控制器中以相同方式声明的相同类可用。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:57:54.183

如果代码编译，并且您的意思是自动完成功能不起作用，我发现成功删除 xcworkspace 文件，如此处接受的解决方案中所述：[Xcode 4 - 性能缓慢](https://stackoverflow.com/questions/6355667/xcode-4-slow-performance)

# jquery - jQuery 排队多个 JSON 调用和回调

> ID：11741496
> 
> 赞同：0
> 
> 时间：2012-07-31T13:41:39.937
> 
> 标签：jquery, ajax, json, queue

> **可能重复：**
> [对 ajax 请求进行排序](https://stackoverflow.com/questions/3034874/sequencing-ajax-requests)

我得到了一系列艺术家的名字。对于每个艺术家的姓名，我都会对网络服务进行 ajax json 调用，以获取该艺术家的歌曲。

我现在的问题是：我如何确定所有 ajax 请求都已完成（成功或失败）。

我查看了[Deferreds](http://api.jquery.com/category/deferred-object/)和[AjaxManager](http://www.protofunc.com/scripts/jquery/ajaxManager/)，但我无法实现它以便它运行（如果它是正确的方法......）

我的代码看起来像：

```
$.each(tf.suggestedArtists, function(index, artist){
  var url = tf.enBaseUrl + "song/search?api_key=" + tf.apiKey + "&format=json&artist=" + artist.name + "&bucket=id:spotify-WW&bucket=tracks"

  $.ajax({
    type: "GET",
    url: url,
    dataType: 'json',
  }).done(function( data ) {
    //...do some more stuff 
```

由于 JSON 和跨域问题，无法异步执行这些调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:03:29.373

If you want to be sure that all ajax requests are completed, you can use an if statement, and `$.active`,.

```
if($.active > 0){ 
  //There's an ajax request pending.
}else{
  //No ajax requests pending.
} 
```

# gridview - 在 Windows 应用商店应用程序的水平列表中放置不同的项目

> ID：11741497
> 
> 赞同：2
> 
> 时间：2012-07-31T13:41:40.980
> 
> 标签：gridview, windows-runtime, windows-store-apps

我想用以下风格/设计开发我的应用程序：

![首页的设计模型](../Images/b042b0ff580727ce1cecf7fc20bb530b.png) 对实施的一些评论：

*   内容是动态加载的（三个类别（字幕1-3）是固定的。
*   子项目的数量（灰色）我的变化
*   我希望用户能够向右滚动（在 Metro-apps 中像往常一样）

不幸的是，我在实现方面遇到了一些困难（在 XAML 中）：

*   我尝试了一个在 ItemsPanelTemplate 中有一个 VirtualizingStackPanel (Orientation=Horizo​​ntal) 的 GridView（如示例教程中所示）。三个类别（绿色、黄色、灰色）显示为具有不同模板的网格。

*   这工作得很好，但现在我有多个我不喜欢/不需要的 GridView 功能：我可以选择它并稍微拖动它。我禁用了 SelectionMode 等。不幸的是，悬停效果仍然存在，并且可能会稍微拖动整个类别。我尝试了 IsHitTestVisible=false 删除了此悬停和拖动的方法，但禁用了类别中的所有按钮和单击事件。

我怎样才能做得更好，例如解决我的问题？

非常感谢任何提示和建议。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:01:45.953

您可以使用 Style="{StaticResource Horizo​​ntalScrollViewerStyle}" 的 ScrollViewer 并将具有三个类别的 StackPanel 作为 ItemsControls 并根据您的喜好定义 ItemsPanel，或者您可以修改 GridViewItem 的模板以更改悬停时发生的情况。您将在设计器中打开 XAML 文件，右键单击 GridView 并选择 Edit Additional Templates/Edit Generated Item Container (ItemContainerStyle)/Edit a Copy... - 提取默认模板并查看 PointerOver 视觉状态以查看需要改变。您可以从 VisualState 中删除 Storyboard，也可以删除用于可视化悬停反馈的相关控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T16:09:12.930

在 Windows 8.1 中，您可以为此使用`[Windows.UI.Xaml.Controls.Hub][1]`控件，这在[XAML 集线器控件示例](http://code.msdn.microsoft.com/windowsapps/XAML-Hub-control-sample-5d116fa9)中进行了演示。此控件用于呈现您所说明的异构数据集，并且可以包含子 GridView 等。

# c# - 添加对我的项目的引用后出错（TlGallioAddOn.dll）

> ID：11741504
> 
> 赞同：0
> 
> 时间：2012-07-31T13:42:05.930
> 
> 标签：c#, testing

我已将参考 TlGallioAddOn.dll 添加到我们的示例 c# 应用程序中。我使用了该参考，例如`using TlGallioAddOn;`. 使用该 dll 的引用时，它显示以下错误。

```
The type or namespace name 'TlGallioAddOn' could not be found (are you missing a using directive or an assembly reference?) 
```

你们能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:53:48.727

检查两个项目的框架目标。

项目默认值现在是 .NET 4.0 客户端。如果您已针对 .NET 4.0（完整版）编译插件项目，则需要修改要为其添加引用的项目以使用 .NET 4.0（完整版）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:51:41.057

右键单击解决方案资源管理器中的项目。单击“添加引用”，然后找到您的 DLL。它将导入 DLL 并解决错误。

# objective-c - SBJSON 将新数据附加到现有 JSON 文件中，而不先对其进行解析

> ID：11741506
> 
> 赞同：2
> 
> 时间：2012-07-31T13:42:06.277
> 
> 标签：objective-c, ios, json, file-io, sbjson

我正在制作一个应用程序，让用户以不同的颜色和画笔大小在屏幕上绘图。绘制后，我会将有关每个绘制路径的信息存储在 JSON 文件中，以防止其占用内存。现在我让它解析所有现有路径，然后添加新路径并再次将其全部写回。我希望它只是将新数据附加到 JSON 文件中，而不必先将其读入并解析它，这将使它一次只有一个路径在内存中。

我正在使用 SBJSON，JSONWriter 有一些附加功能，但我认为您需要先将 JSON 字符串附加到文件，而不是文件，这意味着无论如何我都必须读取文件。有没有办法在根本不读取文件的情况下做到这一点？我确切地知道数据的结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:55:12.050

这是可能的，但你必须作弊一点。您可以为每个路径创建一个独立的 JSON 文档，并将其附加到文件中。所以你的文件中会有这样的东西：

```
{"name":"path1", "from": [0,3], "to":[3, 9]}
{"name":"path2", "from": [0,3], "to":[3, 9]}
{"name":"path3", "from": [0,3], "to":[3, 9]} 
```

请注意，这不是一个 JSON 文档，而是三个。然而，方便地`SBJsonStreamParser`支持一次读取多个 JSON 文档。设置`supportMultipleDocuments`属性并将其插入 a `SBJsonStreamParserAdapter`，然后就可以了。这还有一个好处是，如果您的文件中有很多很多路径，因为您可以在阅读完整个文件之前开始绘制。（因为您会为每个路径获得一个回调。）

您可以在[此处查看有关用例的一些信息。](http://cocoadocs.org/docsets/SBJson/4.0.2/Classes/SBJson4Parser.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:50:37.140

我很确定这是不可能的......我最终做的是在 JSON 文件中作为字符串读取，而不是浪费内存将所有内容更改为字典和数组，我只是寻找部分字符串的实例（例如：我想在字符串 "]、"texts"" 出现之前插入一些东西）我想插入数据并将其插入那里并将其写回文件。

据我所知，这是最好的解决方案。

# sql-server - 使用 select 语句评估条件的 UDF

> ID：11741510
> 
> 赞同：0
> 
> 时间：2012-07-31T13:42:23.767
> 
> 标签：sql-server, sql-server-2008, tsql

这是一个UDF函数要求：

```
CREATE FUNCTION [dbo].[ConditionEvaluation]

(@condEquation VARCHAR(MAX),
@condParameters VARCHAR(MAX
)
RETURNS bit
AS 
```

`@condEquation`和的值`@condParameters`是

*   示例 1：`@condEquation = (C01 & C02)`和`@condParameters =10`
*   示例 2：`@condEquation = ((C01 & C02) | C3)`和`@condParameters =101`

因此对于每个 C 系列条件，`@condEquation`第二个参数中将提供相应的 0 或 1 值，即`@condParameters`。

我想将上述条件评估为...

*   示例 1：`select (1 & 0)`
*   示例 2：`select ((1 & 0) | 0)`

参数`@condEquation`可能包含方程中任意数量的 C。但是参数2中会有相应的位数。

我这里利用了 SQL Select 语句的条件求值能力，想将求值结果返回为 0 或 1。

如何使用 UDF 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:42:00.687

为了做到这一点，我不得不做两个功能：

```
create function [dbo].[f_test1](@CondEquation varchar(50))
returns bit
as
begin
declare @result bit
;with a as
(
select replace(replace(replace(@CondEquation, '(',''), ')',''), ' ','') n
),
b as
(
select n, 1 rn from a
union all
select stuff(n, patindex('%&%', n) - 1, 3 , case when substring(n, patindex('%&%', n) - 1, 3) like '%0%' then 0 else 1 end), rn+1
from b
where patindex('%&%', n)> 0
), c as
(
select n from (
select n, row_number() over (order by rn desc) rn2 from b
) a where rn2 = 1
), d as
(
select n, 1 rn from c
union all
select stuff(n, patindex('%|%', n) - 1, 3 , case when substring(n, patindex('%|%', n) - 1, 3) like '%1%' then 1 else 0 end), rn+1
from d
where patindex('%|%', n)> 0
), e as
(
select n from (
select n, row_number() over (order by rn desc) rn2 from d
) a where rn2 = 1
)
select @result=n from e
return @result
end
go

create function [dbo].[f_test2](@CondEquation varchar(max), @condparameters varchar(max))
returns bit
as
begin
declare @result bit

declare @i int = 1
while @i <= len(@condparameters)
begin
set @CondEquation = replace(@CondEquation, 'c' + right(@i+100, 2), substring(@condparameters, @i, 1))
set @i += 1
end

declare @returnvalue bit
;with a as
(
select @CondEquation a, 1 rn
union all
select stuff(a.a, z.a-z.b+1, z.b+1,[dbo].[f_test1](substring(a.a, z.a-z.b+1, z.b+1)) ), rn+1  from
a cross apply(
select patindex('%_)%', a.a) a, charindex('(', reverse(left(a.a, patindex('%_)%', a.a)))) b
where a.a like '%)%'
) z
), b as
(
select a, row_number() over (order by rn desc) rn from a
)
select @returnvalue = [dbo].[f_test1](a) from b where rn = 1

return @returnvalue
end
go 
```

您可以像这样测试功能

```
select dbo.[f_test2]('((C01 & C02) | C03)', '110') 
```

请注意，使用正确的参数格式很重要。你不能写 C3 而不是 C03。我强烈建议您回去评估您的旧问题以获得正确答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:38:33.933

```
 CREATE FUNCTION [dbo].[ConditionEvaluation] 

(@condEquation VARCHAR(MAX), 
@condParameters VARCHAR(MAX) 
) 
RETURNS bit 
AS 
BEGIN

declare @len int=len(@condParameters)
declare @val varchar(100)
declare @i int=1
declare @Sindex int=0
declare @op bit
set @condEquation=replace(replace(@condEquation,' ',','),')',',)')

while(@i<=@len )
begin
set @val=SUBSTRING (@condParameters,@i,1)
set @Sindex =CHARINDEX ('C',@condEquation)
set @condEquation=stuff(@condEquation,@Sindex ,charindex(',',@condEquation)-2 ,@val)
set @i=@i+1
end

set @condEquation= 'select @OP1'+replace(@condEquation,',','')+' as output1'

execute sp_executesql @condEquation,N'@OP1 int OUTPUT',@OP1=@OP OUTPUT

return @OP

END 
```

# storage - 紧凑型闪存卡会老化吗？

> ID：11741517
> 
> 赞同：0
> 
> 时间：2012-07-31T13:42:42.613
> 
> 标签：storage

我有我的 CF 卡几年了，并且一直认为它们可以可靠地存储我的照片是理所当然的。但我应该吗？会有突然失败的时候吗？如果是这样，参数是什么：年龄，读写量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:10:42.690

假设你的 CF 卡是固态闪存而不是磁性的（这可能是因为大多数 CF 卡都是固态的），你的卡应该比你我更长寿，即使你每天把它们扔在墙上。但不要相信我的话，请点击链接并阅读文章。

来自[http://en.wikipedia.org/wiki/CompactFlash](http://en.wikipedia.org/wiki/CompactFlash)：

> 与其他闪存设备一样，使用闪存的 CompactFlash 卡对任何“块”的擦除/写入周期数都是有限的。（读取周期不会对设备造成磨损。）使用 NOR 闪存的卡的写入寿命为 10,000 次。当前使用 NAND 闪存的卡在出现硬故障之前的额定写入次数为每块 1,000,000 次。这不如磁性介质可靠。. .
> 
> 大多数 CompactFlash 闪存设备通过改变块写入的物理位置来限制块的磨损。这个过程称为磨损均衡。当在 ATA 模式下使用 CompactFlash 代替硬盘驱动器时，磨损均衡变得至关重要，因为低编号块包含内容经常更改的表。当前的 CompactFlash 卡将磨损均衡分布在整个驱动器上。更先进的 CompactFlash 卡将移动很少更改的数据，以确保所有块均匀磨损。
> 
> NAND闪存容易出现频繁的软读取错误。CompactFlash 卡包括检测错误并重新读取块的错误检查和纠正 (ECC)。该过程对用户是透明的，尽管它可能会减慢数据访问速度。
> 
> 由于闪存设备是固态的，因此它们比旋转磁盘更防震。例如，ST68022CF 微型驱动器在 175G 运行和 750G 非运行时的冲击额定值。

希望这可以帮助！

# asp.net - Asp.net 部署策略

> ID：11741519
> 
> 赞同：2
> 
> 时间：2012-07-31T13:42:50.890
> 
> 标签：asp.net, deployment

我听说过很多部署 asp.net 应用程序的策略，但不太确定哪种策略最适合我的需求。

我有一个 asp.net 4 应用程序。我有单独的开发/登台/生产环境（不同的 web.configs）。我还需要管理 sql server 的更改。我可能有超过 1 个数据库服务器和超过 1 个应用程序服务器来推送更改。理想情况下，我想点击一个按钮并说“部署到登台”或“部署到生产”，它将部署代码/数据库/配置文件带到正确的服务器。理想情况下，我也希望有一些回滚过程，以防发布错误。

我听说过 xcopy/robocopy 策略、MSDeploy（现在称为 Web Deploy？）策略，以及构建 MSI 包以进行部署。

其中哪一个似乎最适合这种需求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:03:25.393

**方法 #1** 如果你有时间，我建议使用[CruiseControl.NET](http://sourceforge.net/projects/ccnet/)。至少有一段时间，stackoverflow 团队将其用于部署。

**方法 #2** 就复制策略而言，我建议将 7zip 和 ftp 组合用于应用程序和媒体。7Zip 很好，因为它允许您排除文件类型 (web.config)、文件夹和文件类型，并允许您以不同的方式压缩不同的文件。例如，压缩 PNG 是没有意义的。请注意，这每次都会进行完整部署。因此，如果您有大型媒体文件夹，我会单独处理它们。

至于数据库，我相信您使用 Redgate 的 SQL Compare 会获得最好的运气。它们是商业应用程序，但它们非常非常好。他们在 stackoverflow 播客中被多次正面提及。

*   在开发/构建服务器上构建一个 CMD 文件，该文件生成主 7zip 文件并将其通过 FTP 传输到登台（或生产）服务器上的专用文件夹。我最终多次调用 7zip 将文件输入到单个 7zip 文件中，每批使用不同的压缩方法。
*   为每个登台或生产服务器构建一个 CMD 文件。该文件将执行正确的文件备份，并将 7zip 文件解压缩到正确的位置。

部署到 staging 将如下所示：

*   执行您的 7zip-prep 命令文件，该文件将触发 FTP 上传到登台服务器上的专用 FTP 文件夹
*   通过 SQL Compare 生成的脚本对暂存数据库服务器执行数据库更改
*   在登台服务器上执行 7zip 提取命令文件

这是我使用的方法。我没有花时间掌握 CruiseControl.NET，但当我这样做时，我可能会使用它，至少对于更大的应用程序。这不是一键式部署，但它允许每天进行多次高效部署（就像我几年来一直在做的那样）。7zip 方法很好，因为一旦您有了命令文件，您就可以快速复制它们并将它们用于新项目。

# java - Jruby - （LoadError）没有要加载的文件

> ID：11741521
> 
> 赞同：0
> 
> 时间：2012-07-31T13:42:51.427
> 
> 标签：java, ruby, jruby

我在 Web 界面中集成了一个 shell。5 天前它还在工作，但现在我收到此错误 [1]，即使我没有修改源。我请一位朋友获得相同的来源，他没有收到任何错误。你知道可能是什么问题吗？

[1]

```
 javax.script.ScriptException: org.jruby.exceptions.RaiseException: (LoadError) no such file 
to load -- hirb 
```

# c++ - 类头文件和在我的类 .cpp 文件中使用构造函数：“错误：类‘测试’没有任何名为‘计数器’的字段”

> ID：11741523
> 
> 赞同：0
> 
> 时间：2012-07-31T13:42:53.637
> 
> 标签：c++, class, constructor, header, field

我遇到了一个问题，我的类中的一个字段不能被它的 .cpp 文件中的构造函数访问，原因我不知道 .cpp 没有继承它，我无法构造它以在我的其余部分中使用程序
这是包含我希望在 Test.h 中构建的字段的类

```
class Test
{
public:
    Test();
    virtual ~Test();
    void count();
    int counter();
}; 
```

这是 Test.cpp 中“计数器”字段的构造函数

```
Test::Test() : counter(0){} 
```

据我对 C++ 的了解，这应该是正确的，因为 Test.cpp 包含 #include "Test.h" 并且在仅使用 main.cpp 而没有标题的情况下编写和构造类时，完全相同的代码可以工作，有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T13:43:46.050

`Test::Test() : counter(0){}`- 你应该在这里初始化你的成员变量，而不是调用成员函数。

我猜你的意思是：

```
class Test
{
public:
    Test();
    virtual ~Test();
    void count();
    int counter; // no ()
}; 
```

正如尤里建议的那样

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T13:43:49.857

`int counter();`是一个函数声明。删除`()`.

# c# - 更好地引用 DLL 或拥有多项目解决方案？

> ID：11741524
> 
> 赞同：3
> 
> 时间：2012-07-31T13:42:54.627
> 
> 标签：c#, .net, dll, solution, multi-project

我仍在学习 .NET（特别是 C#），我很好奇创建和引用 dll 与拥有多项目解决方案的优势？我有机会做任何一个，但我不确定哪个会更好。将是 dll 的项目相当小，但可能会被重用。在做出这个决定时，大小和可重用性是否应该是一个因素？感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T13:46:30.990

当每个项目生成一个程序集时，您仍然在技术上引用其他程序集。

拥有多项目解决方案的一个好处是您不需要构建两个不同的解决方案 - 如果您更改两个项目中的代码，整个解决方案将一步构建。您还可以同时调试两个项目（这可以使用单独的解决方案，但更棘手）。

大小可能是构建时间的一个因素，但除非它们很大，否则它不应该是一个大问题。如果项目被其他解决方案使用，则将它们保存在单独的解决方案中可能是有意义的，这样您就可以更好地控制构建过程。

拥有单独的解决方案还可以帮助您保持接口不变，因为在整个堆栈中更改接口的难度适中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:49:52.300

每个项目仍将输出它自己的程序集，但对项目进行分组确实使调试和构建更容易。

如果您确信将来可以重用单个项目，请从多项目解决方案开始。仔细设计您的项目，以[尽量减少相互依赖](http://www.codeproject.com/Articles/25380/Dependency-Injection-with-Autofac)。如果您在这方面做得很好，那么以后当您决定要独立于整个解决方案开发单个项目时，将它们分开应该不会太难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T13:52:34.150

如果这些程序集不会在其他项目中共享，我只会将它们放在同一个解决方案中。

如果代码在不同的项目之间共享。我倾向于以与任何其他第三方二进制文件相同的方式处理项目之间共享的代码 - 也就是说，我获取特定版本的 DLL 副本并引用 DLL。

这样做的好处是，在 6 个月或一年后，当共享代码的两个项目处于不同的发布计划时，每个项目都可以完全控制何时更新共享代码并处理潜在的突破性的变化。

如果您刚刚将共享代码直接构建到您的项目中，那么您将受制于任何其他项目所需的更改——这不是一个好地方！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T13:47:31.577

当您最初开发消费程序时，我发现拥有多项目解决方案最容易。但是当你开发另一个程序也使用相同的 dll 时，只需引用 tehm。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T13:49:20.080

我建议您添加库项目并在同一解决方案中引用项目。您使用项目引用来引用库项目。这将帮助您更好地调试和维护您的代码。

# coldfusion - CF 自动建议不起作用

> ID：11741526
> 
> 赞同：0
> 
> 时间：2012-07-31T13:43:00.240
> 
> 标签：coldfusion, autocomplete, coldfusion-8

我正在尝试在coldfusion 8中使用cf autosuggest。我的输入为-

```
<cfinput name="tad" 
    autosuggest="(cfc.mywriters(getWriters.authors({cfautosuggestvalue})"> 
```

我的cfc是

```
<cffunction name="getWriters" access="public" returntype="any">
    <cfargument name="writers" required="yes"/>
    <cfset myArray = ArrayNew(1)>
    <cftry>
        <cfquery name="getWriters" datasource="mydb">
            SELECT   authors
            FROM     rp_authors
            ORDER BY authors asc
        </cfquery>
        <cfcatch>
            <cfdump var="#cfcatch#">
        </cfcatch>
    </cftry>
    <cfloop name="getWriters">
        <cfset arrayAppend(myArray,authors)>
    </cfloop>
    <cfreturn myArray>
</cffunction> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:04:16.310

我会使用 jQuery 来做到这一点。这是一个很好的例子：

[http://jacktraynor.blogspot.com.au/2012/02/jquery-autocomplete-using-coldfusion.html](http://jacktraynor.blogspot.com.au/2012/02/jquery-autocomplete-using-coldfusion.html)

# .net - Visual Studio 2008，调试和对象私有变量更改值

> ID：11741539
> 
> 赞同：0
> 
> 时间：2012-07-31T13:43:38.453
> 
> 标签：.net, debugging, visual-studio-2008

我正在调试一个类并且有一个特殊的问题，不知道如何解决它。

我像这样实例化类：

```
10: Dim myObj as Obj = new Obj() 
```

现在，如果类定义看起来像这样（显然在现实生活中更简化了）

```
Public Class Obj
  Private Counter as integer = 2

  Public Sub SetCounter()
     Counter = 0 
  End Sub
  'More methods and properties in class 
End Class 
```

现在我打电话：

```
10: Dim myObj as Obj = new Obj()
20: myObj.SetCounter() 
```

调试期间

如果我运行第 10 行并检查私有变量 Counter 的值 - 正如预期的那样，该值为 2。

如果我运行这两行，那么如果我在调试器中检查它，则该值最终为 1。

我什至没有将值设置为 1，同样在真正的类中，我在设置私有变量的任何地方都设置了断点，并且没有遇到断点。

我真的怀疑这是一个视觉工作室调试器问题。任何想法我可以如何证明它是一个调试器问题/确认这一点/排除这一点。

关于这个问题的任何想法。我已经让我们公司的 4 位开发人员参与进来，他们都被难住了，我也很困惑。

提前致谢。

# php - 将（近）未来日期与当前日期进行比较，如何

> ID：11741549
> 
> 赞同：0
> 
> 时间：2012-07-31T13:43:51.660
> 
> 标签：php, datetime, date

检查未来日期是否与当前日期在同一月份？我试过...

```
$Current_Date=time(); // today - 31st July
$Future_Date =mkdate(~1st aug~); // tomorrow - 1st Aug
if(("m",$Future_Date )>date("m",$Current_Date ))
    echo date("j",$Current_Date ) . "SAME MONTH!!";
else
    echo date("j",$Current_Date ) . date("m",$Current_Date ); 
```

但是说如果`$Future_Date`〜明年7月1日，它仍然显示“SAME MONTH”。

我正在做一个倒计时的东西，计算距离`$Future_Date`. 如果它在同一个月，我想只显示日期，但如果它在下一个月或任何更晚的月份，则显示它的月份。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:46:25.537

您可以为此使用 PHP 中的 dateinterval 类：http://php.net/manual/en/class.dateinterval.php[或者](http://php.net/manual/en/class.dateinterval.php)您也可以比较年份：

```
if(("m",$Future_Date )==date("m",$Current_Date ) && ("Y",$Future_Date )==date("Y",$Current_Date ))
    echo date("j",$Current_Date ) . "SAME MONTH!!";
else
    echo date("j",$Current_Date ) . date("m",$Current_Date ); 
```

# sharepoint - ReSharper 中的路径映射如何工作？

> ID：11741552
> 
> 赞同：2
> 
> 时间：2012-07-31T13:43:55.147
> 
> 标签：sharepoint, resharper

我一直在努力在任何地方找到一个很好的详细解释。所以我有一个项目（注定要部署到 SharePoint），其组织如下：

```
MyProject
    12
        TEMPLATE
            CONTROLTEMPLATES
            FEATURES
            LAYOUTS
                Images
                    MyImage.png 
```

在某处的css文件中，我有以下行：

```
.myClass { background: url(/_Layouts/Images/MyImage.png); } 
```

显然，整个 url 都是红色的，我有一个 ReSharper 错误说明：

```
Path C:\MySolutionFolder\MyProject\_Layouts\Images\MyImage.png not found 
```

因此，我绝不希望 ReSharper 了解有关 SharePoint 的任何内容，我只想了解如何映射文件夹。

所以我去了项目的属性，并创建了一个新的映射：

*用**C:\MySolutionFolder\MyProject\12\TEMPLATE\LAYOUTS***替换***/ _layouts***

 ***这似乎没有任何作用，所以我试着玩弄，我发现唯一可以做的*事情*是：

*用**C:\MySolutionFolder\MyProject\12\TEMPLATE\LAYOUTS***替换***_Layouts***

 ***而不是以前的错误，我现在只有红色的 url 的 *_Layouts* 部分，以及一个新的 ReSharper 错误：

```
Symbol '_Layouts' doesn't exist in CSS 3.0 
```

这对我来说没有多大意义，但这是我发现的唯一有任何影响的东西。请注意，在没有初始斜线的情况下放置此路径映射似乎是错误的，因为它会在路径中的任何位置替换单词“_layouts”，而它应该只在站点的根路径处替换。

而且，映射更改错误的事实似乎是区分大小写的，对于 url 路径映射，我不明白这一点（url 不区分大小写吗？）。

此外，使用 Ignore 而不是 Substitute 不会使错误消失。似乎唯一的方法是禁用错误，IMO 真的是一件坏事。

行为已在 6.1 和 7.0 上重现。

正如 12 所建议的那样，该项目是为 SP 2007 制作的，问题出在 VS 2010 上（我没有尝试过任何其他版本）。

如果路径映射不是我想的那样，有没有办法解决这个问题？例如插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:02:06.967

非常感谢您的反馈。看起来该功能已损坏，并将尽快在错误修复更新中修复。我为问题创建了一个 youTrack 问题[http://youtrack.jetbrains.com/issue/RSRP-328783](http://youtrack.jetbrains.com/issue/RSRP-328783)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T07:49:37.213

好像又坏了。替换应该替换匹配的部分，对吗？在我的情况下，它只是在路径前加上指定的替换文本......******

# java - Class Cast 异常错误：试图将 写入文件

> ID：11741553
> 
> 赞同：0
> 
> 时间：2012-07-31T13:43:56.190
> 
> 标签：java, arraylist

我正在尝试导出文件，但出现以下异常：

> 发生意外错误：java.lang.Exception：sailpoint.tools.GeneralException：应用程序脚本引发异常：java.lang.ClassCastException：无法将sailpoint.tools.xml.PersistentArrayList 转换为java.lang.String BSF 信息：导出文件- Abc 在行：0 列：columnNo

我的代码如下：

```
 import java.io.FileWriter;
    import java.io.File;
    import java.io.BufferedWriter;
    import java.io.FileInputStream;
    import java.io.FileOutputStream;
    import java.io.*;

    String appname = "Abc";
    String path = "//home/exportfile//";
    String filename = path+"ApplicationExport-"+appname+".txt";
    String ret = "false";

    QueryOptions ops = new QueryOptions();
    Filter [] filters = new Filter[1];
    filters[0] = Filter.eq("application.name", appname);
    ops.add(filters);

    List props = new ArrayList();
    props.add("identity.name");

    //Do search
    Iterator it = context.search(Link.class, ops, props);

    //Build file and export header row
    BufferedWriter out = new BufferedWriter(new FileWriter(filename));
    out.write("IdentityName,UserName,WorkforceID,Organization");
    out.newLine();          

    //Iterate Search Results
    if (it!=null)
    {                               
            while ( it.hasNext() ) {
                    //Get link and create object
                    Object [] record = it.next();
                    String identityName = (String) record[0];
                    Identity user = (Identity) context.getObject(Identity.class, identityName);

                    //Get Identity attributes for export
                    String workforceid = (String) user.getAttribute("workforceID");                 

                    //Get application attributes for export
                    String userid="";
                      String org="";
                    List links = user.getLinks();
                    if (links!=null)
                    {
                            Iterator lit = links.iterator();
                            while (lit.hasNext())
                            {
                                    Link l = lit.next();
                                    String lname = l.getApplicationName();
                                    if (lname.equalsIgnoreCase(appname))
                                    {
                                              userid = (String) l.getAttribute("User Name");
                                              org= (String) l.getAttribute("Organization");
                                    }
                            }
                    }                               

                    //Output file
                    out.write(identityName+","+userid+","+workforceid+","+org);                             
                    out.newLine();                                                                          
                    out.flush();
            }                       
            ret="true";
    }
    //Close file and return
    out.close();
    return ret; 
```

在运行上面的代码时，我收到强制转换异常错误：因为组织属性是多值的。即：在该属性中，您可以有多个值。

任何帮助纠正此代码将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:54:08.973

它说得很清楚，您正在获取一个类型的对象`sailpoint.tools.xml.PersistentArrayList`并尝试将其转换为字符串。

从你的问题我明白问题出在这里：

```
org= (String) l.getAttribute("Organization"); 
```

因此，您需要将其更改为：

```
sailpoint.tools.xml.PersistentArrayList orgList = (sailpoint.tools.xml.PersistentArrayList) l.getAttribute("Organization"); 
```

然后从该列表中提取正确的值。

# php - PHP 语法：$var = (new Class())->someFunction();

> ID：11741554
> 
> 赞同：2
> 
> 时间：2012-07-31T13:44:08.877
> 
> 标签：php, syntax

基本上我在标题中提到的是我正在尝试做的事情，我不确定它是否可以做。

我有：

```
$myClass = new Class();
$var = $myClass->someFunction(); 
```

但是后来我再也没有使用 $myClass 了，我可以取消它来释放内存。但是我试图同时清理我的代码并想知道以下内容是否有效

```
$var = (new Class())->someFunction(); 
```

如果不是，你们会建议什么？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T13:47:13.453

您始终可以声明`someFunction()`为`static`方法。

```
$var = Class::someFunction(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T13:48:22.890

没有本地方法可以做到这一点

**但**

您可以使用工厂方法实现您想要做的事情。

```
class a {
    public static create() {
        return new self();
    }
    //....
}

$something = a::create()->foo(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T13:50:25.553

```
$var = (new Class())->someFunction(); 
```

我相信这是从 php 5.4 开始的完全有效的语法。

可以在这里看到：[http ://www.php.net/manual/en/migration54.new-features.php](http://www.php.net/manual/en/migration54.new-features.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T13:47:49.703

不，在 < PHP 5.4.0 的版本中是不可能的

在 PHP >= 5.4.0 中，您可以取消引用数组并使用上面列出的语法。

也就是说，根据您的描述，听起来您想要一个`static`功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T13:51:57.693

是的，您可以在新对象上调用方法，但它仅在 PHP >= 5.4 中受支持

```
class Test {
   public function hello() {
    return "hello";
   }
} 

$var = (new Test())->hello();

echo $var; // prints hello 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T13:47:06.880

这是一个无效的语法。但是为什么不重用分配对象的变量呢？

```
$var = new Class();
$var = $var->someFunction(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-31T13:49:04.170

请记住，您还可以在几乎所有需要返回值或迭代的实例中使用 $myClass。例子：

```
foreach($myClass->fetchUsers() as $user){
}

if($myClass->userLoggedIn()){
} 
```

比做一个漂亮得多

```
$var = $myClass->fetchUsers();
foreach($var as $user){} 
```

# c# - 如何使用 C# 在 SQL Server 中存储和检索 DICOM 文件

> ID：11741558
> 
> 赞同：1
> 
> 时间：2012-07-31T13:44:13.110
> 
> 标签：c#, .net, sql, sql-server-2008, dicom

我的目标是用一些 ID 将 DICOM 文件存储在 SQL Server 中，当用户想要该 DICOM 文件时，他可以使用其相应的 ID 从 SQL Server 下载。该文件在存储到服务器以及从 SQL Server 检索时不应改变其原始性。我正在使用`Varbinary(max)`数据类型将 DICOM 文件的字节数组存储在 SQL Server 中。我将 DICOM 文件的内存流转换为字节数组，然后存储到 SQL 服务器中，如下所述：

```
 using (MemoryStream memStream = new MemoryStream())
 {
    using (FileStream fileStream = File.Open(txtDICOMFilePath.Text, FileMode.Open))
    {
         // Copy the file stream to memory stream.
         fileStream.CopyTo(memStream);
    }
    int intL = Convert.ToInt32(memStream.Length);
    byte[] objData = new byte[intL];
 }

 //Set insert query
 string qry = "insert into ImagesStore (ID,ImageData) values(@ID, @ImageData)";

 //Initialize SqlCommand object for insert.
 SqlCommand SqlCom = new SqlCommand(qry, CN);

 //We are passing Original Image Path and Image byte data as sql parameters.
 SqlCom.Parameters.Add(new SqlParameter("@ID", (object)txtUniqueID.Text));
 SqlCom.Parameters.Add(new SqlParameter("@ImageData", (object)objData));

 //Open connection and execute insert query.
 CN.Open();
 SqlCom.ExecuteNonQuery();
 CN.Close(); 
```

**问题：** 在存储图像时它存储正确（没有任何例外），但在检索它时没有给出确切的数据。任何人都可以帮助我将 DICOM 文件存储在 SQL Server 中而不会造成任何损失吗？

**更新：** 下面是我下载 DICOM 文件的代码。

```
qry = "select ImageData from ImagesStore where ID= @ID";

 //Initialize SqlCommand object for insert.
 SqlCom = new SqlCommand(qry, CN);

 SqlCom.Parameters.Add("@ID", SqlDbType.Int).Value = (object)txtUniqueID.Text;

 SqlDataAdapter adp = new SqlDataAdapter(SqlCom);

 DataTable dt = new DataTable();

 try
 {

     if (CN.State == ConnectionState.Closed)
        CN.Open();

     adp.Fill(dt);

     if (dt.Rows.Count > 0)
     {

           MemoryStream ms = new MemoryStream((byte[])dt.Rows[0]["ImageData"]);

           //Logic to save the file
     }
 }
 catch (Exception ex)
 {
     MessageBox.Show(ex.Message, "Error",MessageBoxButtons.OK, MessageBoxIcon.Error);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:47:51.033

在使用块之前和外部声明 `byte[] objData`并尝试设置字节数组的*大小：*

```
byte []objData=null;
using (MemoryStream memStream = new MemoryStream())
 {
    using (FileStream fileStream = File.Open(txtDICOMFilePath.Text, FileMode.Open))
    {
         fileStream.CopyTo(memStream);
    }
    int intL = Convert.ToInt32(memStream.Length);
    objData = new byte[intL];
    memStream.Read(objData,0,objData.Length);
 }

SqlCom.Parameters.Add("@ImageData",SqlDb.Image,objData.Length).Value=objData; 
```

编辑：从`ImagesStore`

```
string qry = "select * From ImagesStore";

using(SqlConnection Cn=new SqlConnect(CnStr))
{
  using(SqlCommand SqlCom = new SqlCommand(qry, CN))
  {
    Cn.Open();
    using(SqlDataReader dr=SqlCom.ExecuteReader())
    {
      while(dr.Read())
      {
          string path="x:\\folder\\" + dr[0] + ".png";
          byte []bytes=(byte[])dr[1];
          System.IO.File.WriteAllBytes(path,bytes);
       }
    }
  }
} 
```

或者，您可以使用 DataAdapter/DataTable（OP 中的代码）

```
if (dt.Rows.Count > 0)
     {
        foreach(DataRow row in dt.Rows)
         {
          string path="x:\\folder\\" + row[0] + ".png";
          byte []bytes=(byte[])row[1];
          System.IO.File.WriteAllBytes(path,bytes);
         }
     } 
```

# email - 将所有电子邮件从 *@example.com 发送到 user@example.com

> ID：11741561
> 
> 赞同：1
> 
> 时间：2012-07-31T13:44:19.380
> 
> 标签：email, dns

我不知道我应该在这里或在服务器故障时问这个问题，所以如果我已经磨损了，请迁移这个问题。

这样一来，如果任何人向以@example.com 结尾的随机地址（我的域而不是example.com）发送电子邮件，它总是会发送到user@example.com（这里还是我的域）。我们也将这种电子邮件称为“超级电子邮件”。

首先，我想先在 co.cc 或 cu.cc 等免费域（然后在真正的 .com 域）上尝试这个，所以我更喜欢一种适用于这些域的方法。

我怎样才能做到这一点？

# java - Java 垃圾收集日志输出

> ID：11741569
> 
> 赞同：2
> 
> 时间：2012-07-31T13:44:48.413
> 
> 标签：java, logging, garbage-collection, jvm

早上好，

我正在编写一个解析 Java 垃圾收集的程序，我需要一些帮助来确定日志输出的确切含义。我的日志文件包含以下我理解的输出：

```
46834.386: [Full GC 46834.386: [CMS: 412190K->414324K(8388608K), 2.9557920 secs] 4319571K->414324K(16769088K), [CMS Perm : 96586K->96555K(2097152K)], 2.9561693 secs]
49394.883: [GC 49394.883: [ParNew: 8372352K->0K(8380480K), 0.0256383 secs] 8786676K->422169K(16769088K), 0.0258842 secs] 
```

但它还包含以下我不太了解的输出：

```
 CMS: abort preclean due to time 2087298.141: [CMS-concurrent-abortable-preclean: 

0.680/1.055 secs]
2087298.146: [GC[YG occupancy: 7515768 K (8380480 K)]2087298.146: [Rescan (parallel) , 5.0710721 secs]2087303.217: [weak refs processing, 0.0718252 secs] [1 CMS-remark: 3769931K(8388608K)] 11285700K(16769088K), 5.1432270 secs]
2087303.289: [CMS-concurrent-sweep-start]
2087305.311: [CMS-concurrent-sweep: 2.022/2.022 secs]
2087305.311: [CMS-concurrent-reset-start]
2087305.393: [CMS-concurrent-reset: 0.082/0.082 secs]
2087307.415: [GC [1 CMS-initial-mark: 3769806K(8388608K)] 12129341K(16769088K), 4.3876237 secs]
2087311.803: [CMS-concurrent-mark-start]
2087311.816: [GC 2087311.816: [ParNew: 8372352K->0K(8380480K), 0.2496844 secs] 12142158K->3865939K(16769088K), 0.2499456 secs]
2087318.573: [CMS-concurrent-mark: 6.508/6.770 secs]
2087318.573: [CMS-concurrent-preclean-start]
2087319.007: [CMS-concurrent-preclean: 0.410/0.434 secs]
2087319.007: [CMS-concurrent-abortable-preclean-start] 
```

目前我正在使用正则表达式来分隔具有顶部格式的日志输出。它根据 eden/tenured 垃圾收集分离输出。我现在的问题是，底部的这些日志输出语句是什么？他们是伊甸园还是终身垃圾收集？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:57:31.500

[GCViewer] [http://www.tagtraum.com/gcviewer.html](http://www.tagtraum.com/gcviewer.html)适合您。您也可以下载源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:45:51.617

[您可以在此处](http://blog.ragozin.info/2011/12/garbage-collection-in-hotspot-jvm.html)找到有关 CMS GC 日志的一些信息。在镜头中，它们是 CMS 算法的特定不间断世界阶段。

尽管我建议您不要解析 GC 日志，但它们的格式笨拙且不稳定，并且由于多线程日志记录，有时它们可​​能无法解析。

[检查此处](http://blog.ragozin.info/2012/04/using-hotspot-attach-api-for-fun-and.html)描述的 JMX 基本替代方案。

# python - 如何在 Python < 3 中将 UTF-8 编码的文本打印到控制台？

> ID：11741574
> 
> 赞同：52
> 
> 时间：2012-07-31T13:45:08.727
> 
> 标签：python, shell, encoding, utf-8, ascii

我正在运行一个最近的 Linux 系统，我的所有语言环境都是 UTF-8：

```
LANG=de_DE.UTF-8
LANGUAGE=
LC_CTYPE="de_DE.UTF-8"
LC_NUMERIC="de_DE.UTF-8"
LC_TIME="de_DE.UTF-8"
...
LC_IDENTIFICATION="de_DE.UTF-8"
LC_ALL= 
```

**现在我想将 UTF-8 编码的内容写入控制台。**

现在 Python 使用 UTF-8 进行 FS 编码，但坚持使用 ASCII 作为默认编码:-(

```
>>> import sys
>>> sys.getdefaultencoding()
'ascii'
>>> sys.getfilesystemencoding()
'UTF-8' 
```

我认为最好的（干净的）方法是设置`PYTHONIOENCODING`环境变量。但似乎 Python 忽略了它。至少在我的系统上`ascii`，即使在设置了*envvar*之后，我也会继续使用默认编码。

```
# tried this in ~/.bashrc and ~/.profile (also sourced them)
# and on the commandline before running python
export PYTHONIOENCODING=UTF-8 
```

如果我在脚本开始时执行以下操作，它虽然有效：

```
>>> import sys
>>> reload(sys)  # to enable `setdefaultencoding` again
<module 'sys' (built-in)>
>>> sys.setdefaultencoding("UTF-8")
>>> sys.getdefaultencoding()
'UTF-8' 
```

但这种做法**似乎不干净**。那么，有什么好的方法可以做到这一点呢？

## 解决方法

而不是更改默认编码 - 这**不是一个好主意**（参见 mesilliac 的答案） - 我只是`sys.stdout`用`StreamWriter`这样的包装：

```
sys.stdout = codecs.getwriter(locale.getpreferredencoding())(sys.stdout) 
```

有关处理它的小实用程序功能，请参[见此要点](https://gist.github.com/brutus/6c90b2342ac63054e12d)。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-31T14:54:56.557

似乎不建议这样做。

Fedora 建议[使用系统语言环境作为默认设置](https://fedoraproject.org/wiki/Features/PythonEncodingUsesSystemLocale)，但显然这会破坏其他内容。

[这是邮件列表讨论中](https://www.mail-archive.com/python-dev@python.org/msg44652.html)的引述：

```
Python 中唯一支持的默认编码是：

 Python 2.x：ASCII
 Python 3.x：UTF-8

如果你改变这些，你就靠自己了，奇怪的事情会发生
开始发生。默认编码不仅影响
Python与外界的翻译，也
8 位字符串和 Unicode 之间的所有内部转换。

像 pango 模块中发生的事情（设置
通过重新加载站点模块，默认编码为“utf-8”
为了得到 sys.setdefaultencoding() API 回来）只是
彻头彻尾的错误，并且会导致严重的问题，因为 Unicode
对象缓存其默认编码表示。

请不要启用基于语言环境的默认编码。

如果您只想获得以下编码
stdout 和 stdin 正确设置管道，你应该
而是更改那些（仅）的 .encoding 属性。

--
马克-安德烈·伦堡
eGenix.com

```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-07-31T14:35:58.983

我就是这样做的：

```
#!/usr/bin/python2.7 -S

import sys
sys.setdefaultencoding("utf-8")
import site 
```

注意`-S`手镯线中的。这告诉 Python 不要自动导入`site`模块。该`site`模块用于设置默认编码并删除该方法，因此无法再次设置。但会尊重已经设定的。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-01-30T11:04:08.867

> 如何在 Python < 3 中将 UTF-8 编码的文本打印到控制台？

```
print u"some unicode text \N{EURO SIGN}"
print b"some utf-8 encoded bytestring \xe2\x82\xac".decode('utf-8') 
```

即，如果您有 Unicode 字符串，则直接打印它。如果您有一个字节串，那么首先将其转换为 Unicode。

您的语言环境设置 ( `LANG`, `LC_CTYPE`) 表示 utf-8 语言环境，因此（理论上）您可以直接打印一个 utf-8 字节串，它应该在您的终端中正确显示（如果终端设置与语言环境设置一致并且它们应该是) 但你应该避免它：*不要在你的脚本中硬编码你的环境的字符编码*；***而是直接打印 Unicode***。

您的问题中有许多错误的假设。

您无需设置`PYTHONIOENCODING`您的区域设置，即可将 Unicode 打印到终端。utf-8 语言环境支持所有 Unicode 字符，即它按原样工作。

您不需要解决方法`sys.stdout = codecs.getwriter(locale.getpreferredencoding())(sys.stdout)`。如果某些代码（您无法控制）确实需要打印字节和/或在将 Unicode 打印到 Windows 控制台时可能会中断 [（错误的代码页，无法打印不可解码的字符）](https://stackoverflow.com/a/32176732/4279)。正确的语言环境设置和/或`PYTHONIOENCODING`envvar 就足够了。此外，如果您需要替换`sys.stdout`，请[使用`io.TextIOWrapper()`而不是`codecs`](https://www.python.org/dev/peps/pep-0400/#motivation)像[`win-unicode-console`包这样的](https://github.com/Drekin/win-unicode-console)[模块](https://www.python.org/dev/peps/pep-0400/#motivation)。

`sys.getdefaultencoding()`与您的语言环境设置和 `PYTHONIOENCODING`. 您认为设置`PYTHONIOENCODING` 应该更改的假设`sys.getdefaultencoding()`是不正确的。你应该检查一下`sys.stdout.encoding`。

`sys.getdefaultencoding()`打印到控制台时不使用。如果 stdout 被重定向到文件/管道，它可以用作 Python 2 的后备，除非`PYTHOHIOENCODING`设置：

```
$ python2 -c'import sys; print(sys.stdout.encoding)'
UTF-8
$ python2 -c'import sys; print(sys.stdout.encoding)' | cat
None
$ PYTHONIOENCODING=utf8 python2 -c'import sys; print(sys.stdout.encoding)' | cat
utf8 
```

不要打电话`sys.setdefaultencoding("UTF-8")`；*它可能会默默地*破坏您的数据和/或破坏不期望它的第 3 方模块。记住`sys.getdefaultencoding()`用于在 Python 2 中*隐式*`str`转换字节串 ( ) 到/从，例如 . 另请参阅 [@mesilliac 的答案中的引用](https://stackoverflow.com/a/11742928/4279)。`unicode`*`"a" + u"b"`*

 ** * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-05-04T05:15:48.473

如果程序没有在屏幕上显示适当的字符，即无效符号，请使用以下命令行运行程序：

```
PYTHONIOENCODING=utf8 python3 yourprogram.py 
```

或者以下，如果您的程序是全局安装的模块：

```
PYTHONIOENCODING=utf8 yourprogram 
```

在某些平台上，如 Cygwin（`mintty.exe`终端）和 Anaconda `Python`（或`Python 3`），简单地运行`export PYTHONIOENCODING=utf8`并稍后运行该程序是行不通的，并且您必须每次都`PYTHONIOENCODING=utf8 yourprogram`正确运行该程序。

在 Linux 上，如果是`sudo`，您可以尝试传递`-E`参数以将用户变量导出到 sudo 进程：

```
export PYTHONIOENCODING=utf8
sudo -E python yourprogram.py 
```

如果您尝试此操作但没有成功，您将需要在 sudo shell 上输入：

```
sudo /bin/bash
PYTHONIOENCODING=utf8 yourprogram 
```

有关的：

1.  [如何在 Python < 3 中将 UTF-8 编码的文本打印到控制台？](https://stackoverflow.com/questions/11741574/how-to-print-utf-8-encoded-text-to-the-console-in-python-3)
2.  [更改 Python 的默认编码？](https://stackoverflow.com/questions/2276200/changing-default-encoding-of-python)
3.  [在 cp1252 (Python3) 上强制使用 UTF-8](https://stackoverflow.com/questions/38833533/forcing-utf-8-over-cp1252-python3)
4.  [在 Cygwin 中为 Anaconda 永久设置 Python 路径](https://stackoverflow.com/questions/24255407/permanently-set-python-path-for-anaconda-within-cygwin/30237678)
5.  [https://superuser.com/questions/1374339/what-does-the-e-in-sudo-e-do](https://superuser.com/questions/1374339/what-does-the-e-in-sudo-e-do)
6.  [为什么 bash -c 'var=5 printf "$var"' 不打印 5？](https://stackoverflow.com/questions/55985889/why-bash-c-var-5-printf-var-does-not-print-5)
7.  [https://unix.stackexchange.com/questions/296838/whats-the-difference-between-eval-and-exec](https://unix.stackexchange.com/questions/296838/whats-the-difference-between-eval-and-exec)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-09-04T11:16:33.143

While realizing the OP question is for Linux: when ending up here through a search engine, on Windows 10 the following fixes the issue:

```
set PYTHONIOENCODING=utf8
python myscript.py 
```*

# android - 使用联合登录或 OpenID（无 GAE）的 Android 应用程序 + 网络服务器 API

> ID：11741575
> 
> 赞同：2
> 
> 时间：2012-07-31T13:45:09.093
> 
> 标签：android, api, oauth, openid, federated-identity

我有一个需要将数据上传到 API 的 Android 应用程序（然后 API 会将数据保存在 MySQL DB 中）。我想使用联合登录 (Google) 或 OpenID 身份验证程序，以便用户无需为我的应用程序注册电子邮件 + 密码，而是可以使用保存在`AccountManager`.

直到今年年初，解决方案还是按照尼克约翰逊的著名配方使用 GAE。但自从 Google 开始对 GAE 的使用收费后，这不再是一个可行的解决方案。 *请不要推荐使用 GAE*。

有没有人设法解决使用联合登录或 OpenID 进行身份验证然后在第三方（您的）网络服务器 API 上获得授权的问题？

注意：OAuth 将是一种直接的授权解决方案，只是它依赖于（以受信任的方式）与先前经过身份验证的消费者交互，而当您使用 FedLogin 或 OpenID 对应用程序用户（在移动设备上）进行身份验证时，情况并非如此。如果我的应用程序（移动 + 网络服务器）对用户进行身份验证（并且我存储了登录名 + 密码——这正是我想要避免的），OAuth 就可以工作，但如果谷歌（或 FB）为你这样做就不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T02:57:44.497

这就是[OpenID Connect](http://openid.net/connect/)所做的。演示应用程序[在这里](https://oauthssodemo.appspot.com)。

至于 GAE，它仍然有一个免费套餐（28 个前端实例小时，足以 24/7 运行），如果您没有太多流量，它应该足够了。不管怎样，你必须在某个地方运行一个服务器（即使它是你自己的机器），所以没有办法让它完全免费。所以是的，GAE 是一个可行的选择。您可以免费开始并根据需要扩大规模。避免GAE还有其他原因，但“我必须（在某些时候）支付（某事），因此放弃它”，这绝对是错误的心态。

# java - Datanucleus Google App Engine 一对多关系

> ID：11741579
> 
> 赞同：1
> 
> 时间：2012-07-31T13:45:19.937
> 
> 标签：java, google-app-engine, jpa-2.0, datanucleus

我有以下代码：

```
@Entity
public class Incident {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Extension(vendorName="datanucleus", key="gae.encoded-pk", value="true")
    private String incidentId;

    @Persistent
    @Extension(vendorName="datanucleus", key="gae.pk-id", value="true")
    private Long keyId;

    @OneToMany(mappedBy="incident")
    @OrderBy("requestId")
    @JoinColumn(name="INCIDENT_ID")
    public List<ServiceRequest> requests;

    ...
}

@Entity
public class ServiceRequest {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Extension(vendorName="datanucleus", key="gae.encoded-pk", value="true")
    private String requestId;

    @Persistent
    @Extension(vendorName="datanucleus", key="gae.pk-id", value="true")
    private Long keyId;
    private Incident incident;

    ...
} 
```

使用它的场景是首先创建并持久化 ServiceRequest，然后创建一个事件并将现有的 ServiceRequest 添加到其中 - 但是当我尝试持久化一个事件时，我遇到了以下错误原因：org.datanucleus.exceptions.NucleusUserException: Object with id “agxzbWFydGNpdHlhZ2hyFAsSDlNlcnZpY2VSZXF1ZXN0GAEM”由不同的对象管理器管理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:12:07.730

我建议您从以下开始，然后告诉您深入研究有关所有数据存储的文档 JDO Stuff。然后感谢谷歌。:-)

您必须使用相同的持久性管理器一次完成所有读取/创建/保存/更新任务。这意味着在相同的方法或代码块中，您必须：

*   获取新的 PersistenceManager
*   获取您需要的 EntityA
*   用它做任何你想做的事，包括从其他类实例化其他实体并以某种方式将它们全部链接起来
*   使用 pm 来坚持一切
*   关闭下午

问题是，如果您使用多个实体，则需要使用相同的 PersistenceManager 实例。

[JDO 文档 - 谷歌](https://developers.google.com/appengine/docs/java/datastore/jdo/)

# c++ - dlopen/LoadLibrary on same application

> ID：11741580
> 
> 赞同：2
> 
> 时间：2012-07-31T13:45:22.493
> 
> 标签：c++, c, loadlibrary, dlopen

I need to call an exported symbol from my own application - therefore I need to know if it's safe to call `dlopen` / `LoadLibrary` on "yourself".

An example would be:

```
LoadLibrary("test.exe"); 
```

inside a program called `test.exe`.

I tested it and it seems to work, but I'm not quite sure if it is actually supported behavior.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T15:43:44.697

From the MSDN documentation [here](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175(v=vs.85).aspx)...

> The system maintains a per-process reference count on all loaded modules. Calling **LoadLibrary** increments the reference count. Calling the **FreeLibrary** or **FreeLibraryAndExitThread** function decrements the reference count. The system unloads a module when its reference count reaches zero or when the process terminates (regardless of the reference count).

It will work, just remember to clean-up after yourself by calling [FreeLibrary](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683152(v=vs.85).aspx), as stated above.

What you may have *really* wanted instead is [GetModuleHandle](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683199(v=vs.85).aspx).

> Retrieves a module handle for the specified module. The module must have been loaded by the calling process.

In fact, what you're trying to do is even a special case.

> *lpModuleName* [in, optional]
> 
> *...*
> 
> If this parameter is NULL, **GetModuleHandle** returns a handle to the file used to create the calling process (.exe file).

So, trying this...

```
#include <stdio.h>
#include <windows.h>

__declspec(dllexport) void print(void) {
  puts("OK");
}

main() {
  HMODULE mod = GetModuleHandle(0);
  FARPROC proc = GetProcAddress(mod, "print");
  proc();
  return 0;
} 
```

... appears to work:

```
C:\dev\scrap>gcc -oprint print.c

C:\dev\scrap>print
OK 
```

For [dlopen](http://linux.die.net/man/3/dlopen), it appears very similar.

> If *filename* is a NULL pointer, then the returned handle is for the main program. When given to **dlsym**(), this handle causes a search for a symbol in the main program, followed by all shared libraries loaded at program startup, and then all shared libraries loaded by **dlopen**() with the flag **RTLD_GLOBAL**.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:05:09.840

A quick test on Windows:

```
#include <windows.h>
#include <stdio.h>

__declspec(dllexport) FARPROC Test() { 
    printf("It worked");
}

int main(int argc, char **argv) {
    HMODULE m = LoadLibrary(argv[0]);
    FARPROC test = GetProcAddress(m, "Test");
    test();
    return 0;
} 
```

produced the following output:

```
It worked 
```

I suppose in theory that doesn't guarantee that it might not break on some other version of Windows, but I consider that rather doubtful.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T15:56:37.723

You can do this trivially with `dlopen()` - there's a pseudo handle given as a GNU extension, `RTLD_DEFAULT` which acts like a handle to yourself, so you can simply skip the `dlopen()` call and write:

```
dlsym(RTLD_DEFAULT, "entry_func"); 
```

For example:

```
#define _GNU_SOURCE
#include <stdio.h>
#include <dlfcn.h>
#include <assert.h>

void print(void) {
  puts("OK");
}

int main() {
  void (*proc)(void) = dlsym(RTLD_DEFAULT, "print");
  assert(proc);
  proc();
  return 0;
} 
```

Note that you'll need to compile with `-rdynamic` for this to work.

According to the manpage on a recent Solaris machine `RTLD_DEFAULT` is available there too.

# ruby-on-rails - 按整数值排序

> ID：11741582
> 
> 赞同：0
> 
> 时间：2012-07-31T13:45:26.887
> 
> 标签：ruby-on-rails

我有一个整数列“级别”。我想通过在控制器中执行此操作来订购：

```
@leagues = League.all.order('level') 
```

这会产生 1、10、2、3 作为结果，而我期望 1、2、3、10 作为结果。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:47:57.207

听起来您将列创建为数据库中的字符串......如果它是一个 int，你会得到 1、2、3、10 ......至少在 MySQL 中！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:51:58.843

只尝试**League.order('level')**

# ruby - 如何使用 .html.erb 作为 Sinatra 视图的文件扩展名？

> ID：11741585
> 
> 赞同：10
> 
> 时间：2012-07-31T13:45:35.963
> 
> 标签：ruby, sinatra, erb

如果我有以下 Sinatra 代码：

```
get '/hi' do
  erb :hello
end 
```

如果我有一个名为`views/hello.erb`. 但是，如果我有一个名为`views/hello.html.erb`Sinatra 的文件，则找不到该文件并给我一个错误。如何告诉 Sinatra 我希望它`.html.erb`作为有效的 .erb 扩展名查找？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-31T16:12:15.613

Sinatra 使用[Tilt](https://github.com/rtomayko/tilt/)来呈现其模板，并将扩展与它们相关联。你所要做的就是告诉 Tilt 它应该使用 ERB 来渲染那个扩展：

```
Tilt.register Tilt::ERBTemplate, 'html.erb'

get '/hi' do
  erb :hello
end 
```

**编辑**以回答后续问题。没有`#unregister`，还要注意 Sinatra 会更喜欢 hello.erb 而不是 hello.html.erb。解决首选项问题的方法是覆盖该`erb`方法或制作您自己的渲染方法：

```
Tilt.register Tilt::ERBTemplate, 'html.erb'

def herb(template, options={}, locals={})
  render "html.erb", template, options, locals
end

get '/hi' do
  herb :hello
end 
```

那将更喜欢 hello.html.erb，但如果找不到 hello.html.erb，它仍然会求助于 hello.erb。如果您*真的*想防止在任何情况下找到 .erb 文件，我猜您可以将 ERBTemplate 子类化并针对 .html.erb 进行注册，但坦率地说，这听起来并不值得。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-31T16:02:52.023

这应该做

```
get '/hi' do
  erb :'hello.html'
end 
```

或者，

```
get '/hi' do
  erb 'hello.html'.to_sym
end 
```

# trac - 具有新数据库的新 Trac 环境

> ID：11741596
> 
> 赞同：0
> 
> 时间：2012-07-31T13:45:58.030
> 
> 标签：trac

当我使用以下命令运行 Edgewall Trac 设置向导时：

```
trac-admin c:\projects\trac\0project initenv 
```

我应该指定“数据库连接字符串”，例如：

```
mysql://user:pasword@host:port/db 
```

我应该为每个项目都有一个单独的数据库，还是一个足够常见的数据库？

如果我使用一个数据库，我会得到以下信息：

> 为“c:\projects\trac\1project”创建和初始化项目 Initenv 失败。创建环境失败。（1050，“表'系统'已经存在”）回溯（最近一次调用最后）：... OperationalError：（1050，“表'系统'已经存在”）

如果我删除共享的 MySQL 数据库，则环境创建成功。但是，如果我使用 sqlite（默认），那么我不需要重新创建数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:24:53.663

当前的概念是每个 Trac 环境一个 db。如果这是一个适合您的项目，那么您最终会得到多个数据库，是的。

[trac.edgewall.org](http://trac.edgewall.org/wiki/TracMultipleProjects)上的 wiki 文档中的 TracMultipleProjects 提供了有关多项目支持方法的一些信息，以及从那里链接的页面中的更多详细信息。但总而言之，这一切都或多或少还处于概念和规划阶段。

因此，您会找到补丁和 Trac 插件来解决和解决这个缺失的功能。目前最活跃的开发代码是[SimpleMultiProjectPlugin](http://trac-hacks.org/wiki/SimpleMultiProjectPlugin)。

对于我自己的应用程序，我会在坚持现状的同时不断观察情况：多个环境并排在一个父目录中。我没有发现其他任何东西，这将允许靠近上游（承诺无痛升级）而不限制数据库类型或其他东西的选择。

已经开发或改进了一些 Trac 插件来应对这种情况。仅举几例，最近的[AccountManagerPlugin](http://trac-hacks.org/wiki/AccountManagerPlugin)代码具有单点登录功能，[SearchAllPlugin](http://trac-hacks.org/wiki/SearchAllPlugin)扩展了全文搜索以包括可配置的周围环境列表。

# r - 如何为 knn 模型绘制 ROC 曲线

> ID：11741599
> 
> 赞同：2
> 
> 时间：2012-07-31T13:46:09.140
> 
> 标签：r, knn, roc

我正在使用 ROCR 包，我想知道如何在 R 中为 knn 模型绘制 ROC 曲线？有没有办法用这个包把它全部绘制出来？

我不知道如何使用ROCR的预测功能进行knn。这是我的示例，我正在使用来自 UCI 存储库的 isolet 数据集，其中我将类属性重命名为 y：

```
cl<-factor(isolet_training$y)
knn_isolet<-knn(isolet_training, isolet_testing, cl, k=2, prob=TRUE) 
```

现在我的问题是，传递给 ROC 预测函数的参数是什么。我尝试了以下两种不起作用的替代方法：

```
library(ROCR)
pred_knn<-prediction(knn_isolet$y, cl)
pred_knn<-prediction(knn_isolet$y, isolet_testing$y) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T12:04:18.000

为了在此处获得 ROC 曲线，需要解决几个步骤。我只是要弥补一些数据，因为你没有提供一种简单的方法来获取你正在使用的数据。请注意，`ROCR`包希望类标签是正面/负面的，而不是因素，所以让我们把它们变成这样。

```
# Generate fake data
isolet_training <- sweep(matrix(rnorm(400), 40, 10), 1, rep(0:1, each=20))
isolet_testing <- sweep(matrix(rnorm(400), 40, 10), 1, rep(0:1, each=20))
# Generate class labels
cl <- cl_testing <- rep(c(-1, 1), each=20) 
```

您现在可以训练您的 knn 并从`"prob"`属性中获取其类别概率。

```
knn_isolet <- class::knn(isolet_training, isolet_testing, cl, k=2, prob=TRUE)
prob <- attr(knn_isolet, "prob")
# you can probably use just `knn` instead of `class::knn`,
# but for some reason it did not work for me. 
```

但是，它们以`ROCR`不接受的形式出现，因此我们需要为`-1`类反转它们并重新调整它们。

```
prob <- 2*ifelse(knn_isolet == "-1", 1-prob, prob) - 1 
```

现在您可以将“概率”输入`ROCR`包的函数并获得 ROC 曲线。

```
pred_knn <- prediction(prob, cl_testing)
pred_knn <- performance(pred_knn, "tpr", "fpr")
plot(pred_knn, avg= "threshold", colorize=T, lwd=3, main="Voilà, a ROC curve!") 
```

![在此处输入图像描述](../Images/40ae9ccdad09fdf8654915eedee6ee37.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-10T11:15:41.717

*pred_knn<-prediction(knn_isolet$y, isolet_testing$y)*

这条线可以正常工作，但根据文档，两个参数都必须是向量。

所以首先做：

*knn_isolet$y <- as.vector(knn_isolet$y, mode = "numeric")*

*isolet_testing$y <- as.vector(isolet_testing$y, mode = "numeric")*

注意：ROCR 只支持二分类。因此，请检查“knn_isolet$y”和“isolet_testing$y”中的级别是否具有相同的标签。

# iphone - UIWebView 和 Gmail 自动填充用户名和密码字段

> ID：11741603
> 
> 赞同：0
> 
> 时间：2012-07-31T13:46:22.347
> 
> 标签：iphone, ios, uiwebview, uiweb

UIWebView 和 Gmail 可以自动填充用户名和密码字段吗？我希望用户只在第一次插入他的信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:10:08.650

您可以使用 NSUserDefaults 作为用户名和密码。让它检查这些字段是否存在任何值，如果不存在，当用户输入它们时，使用 NSUserDefaults 存储它们。下次加载应用程序时，它将检查一个值是否存在，并将该值放入正确的字段中。

# asp.net - 网格视图中的 RadiobuttonList 更新但不显示更新？

> ID：11741604
> 
> 赞同：0
> 
> 时间：2012-07-31T13:46:22.760
> 
> 标签：asp.net, updatepanel

我有一个带有复选框和单选按钮列表的 gridview (asp.net)。在此 gridview 上方，我有一个按钮，允许用户将 gridview 中的所有 SELECTED 项目设置为特定值。我的意思是选中了gridview内的复选框。此网格视图位于更新面板中，我不知道这是否是我遇到问题的原因，但这是我的问题。

正如我所说，gridview 有一个这样的复选框：

```
 <ItemTemplate>
  <asp:CheckBox ID="chkSelector" runat="server" 
    ToolTip="Select row?" />
 </ItemTemplate> 
```

还有一个像这样的单选按钮列表：

```
 <asp:RadioButtonList ToolTip="Please provide an answer to the method." AutoPostBack="true" RepeatDirection="Horizontal" ID="rbAnswer" runat="server" SelectedValue='<%# DataBinder.Eval(Container, "DataItem.AnswerID")%>' OnSelectedIndexChanged="rbAnswer_SelectedIndexChanged">
                                    <asp:ListItem Text="Yes" Value="Yes" style="color:green;"></asp:ListItem>
                                    <asp:ListItem Text="No" Value="No" style="color:red;"></asp:ListItem>
                                    <asp:ListItem Text="N/A" Value="N/A" style="color:gray;"></asp:ListItem>
                                    <asp:ListItem Value="" Text="" style="display: none" />
                                </asp:RadioButtonList> 
```

当您选中复选框时（您可以选择多个复选框（网格中的行项目），然后单击此按钮。该按钮执行以下操作：

```
foreach (GridViewRow Row in this.gvLineItems.Rows)
                {
                    CheckBox cb = (CheckBox)Row.FindControl("chkSelector");
                    Label id = (Label)Row.FindControl("lblID");
                    if (cb != null && cb.Checked)
                    {
                        long lID = Convert.ToInt32(gvLineItems.DataKeys[Row.RowIndex].Value);
                        RadioButtonList rbl = (RadioButtonList)Row.FindControl("rbAnswer");

                        rbl.Items.FindByText("N/A").Selected = true;
                    }
                } 
```

那就是它遍历gridview中的所有项目。如果选中该项目（chkSelector = true），则它将单选按钮列表答案设置为“N/A”。我调试代码，我可以看到答案设置正确，但是当我的方法完成后，用户界面不显示结果。这意味着答案从未设置为 N/A。它只是保持原来的状态......

有谁知道为什么会这样？我正在使用更新面板，所以我不确定这是否是原因？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:28:42.153

```
<asp:ListItem Text="N/A" Value="N/A" style="color:gray;"></asp:ListItem>

for (int i = 0; i < gvLineItems.Rows.Count; i++)
{   
 CheckBox cb = (CheckBox)gvLineItems.Row[i].FindControl("chkSelector");   
 RadioButtonList rbl = (RadioButtonList)gvLineItems.Row[i].FindControl("rbAnswer");
 if(cb.checked == true)
{
    rbl.SelectedValue = "N/A";
}
} 
```

# ms-access - 如何将 CDATA 插入从 Access 2003 导出的 XML 文本标记中？

> ID：11741611
> 
> 赞同：4
> 
> 时间：2012-07-31T13:46:38.397
> 
> 标签：ms-access, xslt, xslt-1.0, cdata

我从 Access 2003 获得了 XML 导出，我尝试使用 XSLT 在文本字段（拉丁语...）上插入 CDATA 标记，但我在 XSLT 中非常糟糕...

这里是 XML 源代码：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <dataroot xmlns:od="urn:schemas-microsoft-com:officedata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:noNamespaceSchemaLocation="MESSAGES%20old.xsd" generated="2012-07-31T13:25:46">
      <export_x005F_xml_message>
       <libelle>h euismod tincidu </libelle>
       <price>300</price>
       <libelle2>h euirci tation ullamc</libelle2>
    </export_x005F_xml_message>
    <export_x005F_xml_message>
      <libelle>h euismod tincidunt ut lao</libelle>
      <price>200</price>
      <libelle2>h euirci tation ullamcorper</libelle2>
   </export_x005F_xml_message>
  </dataroot> 
```

这是我的 XSLT 的开始......：

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml"/>
     <xsl:template match='*[name() = "MESSAGES"]'>
           <xsl:text disable-output-escaping="yes">
             &lt;![CDATA[
           </xsl:text>
           <xsl:copy-of select="./node()"/>
           <xsl:text disable-output-escaping="yes">
             ]]&gt;
            </xsl:text>
     </xsl:template>
    </xsl:stylesheet> 
```

我想得到类似的东西：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <dataroot xmlns:od="urn:schemas-microsoft-com:officedata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:noNamespaceSchemaLocation="MESSAGES%20old.xsd" generated="2012-07-31T13:25:46">
      <export_x005F_xml_message>
       <libelle><![CDATA[h euismod tincidu ]]></libelle>
       <price>300</price>
       <libelle2><![CDATA[h euirci tation ullamc ]]></libelle>
    </export_x005F_xml_message>
    <export_x005F_xml_message>
      <libelle><![CDATA[h euismod tincidunt ut lao ]]></libelle2>
      <price>200</price>
      <libelle2><![CDATA[h euirci tation ullamcorper ]]></libelle2>
   </export_x005F_xml_message>
  </dataroot> 
```

你能帮我创建正确的 XSLT 吗？此 XML 来自 Access 2003，它不提供文本字段的 CDATA 选项...我确信通用模型可以帮助像我这样的其他开发人员:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T14:18:20.070

正如这里已经回答的那样：[Transform XML with XSLT and preserve CDATA (in Ruby)](https://stackoverflow.com/questions/1502083)，更好的答案是使用 xsl:output。例如 ...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes" cdata-section-elements="libelle libelle2" />

<xsl:template match="@*|node()">
 <xsl:copy>
   <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:21:08.350

**这种身份转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"
  cdata-section-elements="libelle libelle2"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时**（已纠正，因为它的格式严重错误）：

```
<dataroot xmlns:od="urn:schemas-microsoft-com:officedata"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:noNamespaceSchemaLocation="MESSAGES%20old.xsd"
 generated="2012-07-31T13:25:46">
    <export_x005F_xml_message>
        <libelle>h euismod tincidu </libelle>
        <price>300</price>
        <libelle2>h euirci tation ullamc</libelle2>
    </export_x005F_xml_message>
    <export_x005F_xml_message>
        <libelle>h euismod tincidunt ut lao</libelle>
        <price>200</price>
        <libelle2>h euirci tation ullamcorper</libelle2>
    </export_x005F_xml_message>
</dataroot> 
```

**产生想要的正确结果**：

```
<dataroot xmlns:od="urn:schemas-microsoft-com:officedata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="MESSAGES%20old.xsd" generated="2012-07-31T13:25:46">
   <export_x005F_xml_message>
      <libelle><![CDATA[h euismod tincidu ]]></libelle>
      <price>300</price>
      <libelle2><![CDATA[h euirci tation ullamc]]></libelle2>
   </export_x005F_xml_message>
   <export_x005F_xml_message>
      <libelle><![CDATA[h euismod tincidunt ut lao]]></libelle>
      <price>200</price>
      <libelle2><![CDATA[h euirci tation ullamcorper]]></libelle2>
   </export_x005F_xml_message>
</dataroot> 
```

**说明**：

正确使用 的`cdata-section-elements`属性**[`xsl:output`](http://www.w3.org/TR/1999/REC-xslt-19991116#output)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T14:13:18.063

Well, the only problem I see is the call of the xsl-template.

It should look like this:

```
<xsl:template name="MyTemplateName">
    <someTag>
        <xsl:text disable-output-escaping="yes">
                    &lt;![CDATA[
            </xsl:text>

        <someOtherTag/>

        <xsl:text disable-output-escaping="yes">
                 ]]&gt;
            </xsl:text>
    </someTag>
</xsl:template> 
```

So your template would look like this:

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="MESSAGES%20old.xsd">

<xsl:template match="/">
    <dataroot xmlns:od="urn:schemas-microsoft-com:officedata"  generated="2012-07-31T13:25:46">
    <xsl:apply-templates select="export_x005F_xml_message"/>
    </dataroot>
</xsl:template>

<xsl:template match="export_x005F_xml_message">
    <export_x005F_xml_message>
        <libelle>
        <xsl:text disable-output-escaping="yes">
         &lt;![CDATA[
       </xsl:text>
            <xsl:value-of select="libelle"/>
        </libelle>
        <xsl:text disable-output-escaping="yes">
        ]]&gt;
       </xsl:text>
       ...
    </export_x005F_xml_message>
</xsl:template>

</xsl:stylesheet> 
```

# rally - 通过 WS 以给定前缀开头的查询标题

> ID：11741614
> 
> 赞同：1
> 
> 时间：2012-07-31T13:46:46.743
> 
> 标签：rally

我正在使用 SOAP Web 服务通过 Java 应用程序从 Rally 平台检索数据。

我想获取标题以给定前缀开头的所有用户故事（HierarchicalRequirement），比如说title="aaaa - blablabla"，我想查询所有标题以“aaaa”开头的美国。

是否可以？是否可以使用正则表达式作为查询参数？

提前致谢！

R。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:11:49.777

WSAPI 支持 contains 运算符，这将使您非常接近，但此时不支持正则表达式。

# javascript - AngularJS 自定义指令 ng-show/ng-hide

> ID：11741615
> 
> 赞同：9
> 
> 时间：2012-07-31T13:46:52.700
> 
> 标签：javascript, angularjs

警告：前面有 Angular 新手。

我正在尝试创建一个自定义小部件，默认情况下将显示一个“回复”链接，当点击它时，它应该被隐藏并且应该显示一个文本区域。这是我到目前为止所拥有的，但它不起作用::

```
 .directive('replybox', function ($rootScope) {
    var linkFn = function (scope, element, attrs) {
        var label = angular.element(element.children()[0]);
        scope.showInput = false;

        label.bind("click", textbox);

        function textbox() {
            scope.showInput = true;
        }
    };
    return {
        link:linkFn,
        restrict:'E',
        scope:{
            id:'@',
            label:'@',
            showInput:'='
        },
        template:'<a ng-hide="showInput">label</a><textarea ng-show="showInput">    </textarea>',
        transclude:true
    };
}) 
```

任何指南将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-31T17:34:26.443

Matias，这是一个有效的 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/Z6RzD/](http://jsfiddle.net/pkozlowski_opensource/Z6RzD/)

确实发生了很多事情，但我认为最重要的一个事实是您需要使用 Scope.$apply 从“anular 世界之外”进行角度通知范围更改。默认情况下，angular 不会触发模板对每个 DOM 事件的重新评估，因此您需要将其包装到 apply 中：

```
scope.$apply('showInput = true'); 
```

更多信息在这里：http://docs.angularjs.org/api/ng.$ro​​otScope.Scope

在您的示例中还有其他值得注意的项目：

*   我想您希望能够将“标签”作为属性传递给您的指令，然后在您的模板中使用它 - 如果是这样，您需要使用 {{label}} 表达式
*   我不太确定“id”属性有什么用，所以从我的小提琴中省略了它
*   'showInput' 也一样 - 无法弄清楚你想要得到什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-11T00:50:59.810

您还可以使用 $timeout 来通知 Angular 您的更改，例如

```
.directive('replybox', function($rootScope, $timeout) {
  var linkFn = function(scope, element, attrs) {
    var label = angular.element(element.children()[0]);
    scope.showInput = false;

    label.bind("click", textbox);

   function textbox() {
     $timeout(function() {
       scope.showInput = true;
     });

   }
 };
 return {
  link: linkFn,
  restrict: 'E',
  scope: {
    id: '@',
    label: '@',
    showInput: '='
  },
  template: '<a ng-hide="showInput">label</a><textarea ng-show="showInput">    </textarea>',
  transclude: true
 };
}); 
```

# tfsbuild - 如何修改 TFS2010 构建完成电子邮件警报的“主题”行？

> ID：11741616
> 
> 赞同：0
> 
> 时间：2012-07-31T13:46:56.340
> 
> 标签：tfsbuild

我正在尝试修改 TFS 团队构建完成时发送的警报电子邮件。

我可以通过编辑来修改邮件正文： *BuildCompletionEvent.xsl*。然而 [这个 2006 年的帖子](http://social.msdn.microsoft.com/forums/en-US/tfsadmin/thread/1a568a62-115a-4e46-8023-8db024767814/%20/ "这个 2006 年的帖子")表明主题不能改变，现在还是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:12:42.993

您目前 (tfs2010) 无法更改其中一封警报电子邮件的主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:04:01.720

我认为您可以更改随 TFS 2008/2010/2012 部署的 XSL 电子邮件模板。文件夹结构类似于：

```
 "C:\Program Files\Microsoft Visual Studio 2008 Team Foundation Server\Web Services\Services\v1.0\Transforms" 
```

修改后需要重新启动应用程序池或网站，因为网站启动时会缓存模板。

# java - Apache Commons CLI - 订购帮助选项？

> ID：11741625
> 
> 赞同：10
> 
> 时间：2012-07-31T13:47:17.097
> 
> 标签：java, apache-commons, apache-commons-cli

我正在使用 Apache Commons CLI。默认情况下，它按字母顺序在命令行上按字母顺序排列帮助选项。所以，出现的是：

```
-csv
-ip
-msisdn
-xml 
```

但我想按如下方式订购它们：

```
-csv
-xml
-ip
-msisdn 
```

我知道您可以使用一个 OptionFormatter 类并将其传递给 HelpFormatter，但看不到任何关于如何将其用于上述目的的示例（http://www.marko.homeunix.org/programming/java/ commons-cli/api/org/apache/commons/cli/HelpFormatter.OptionComparator.html）。

只是想知道有没有人做过类似的事情？

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-11-02T08:57:17.617

从 v1.3 开始，您可以调用 setOptionComparator(null)，这样格式化程序将跳过排序，并且参数将以添加它们的相同顺序打印。

```
HelpFormatter formatter = new HelpFormatter();
formatter.setOptionComparator(null); 
```

[链接](https://issues.apache.org/jira/browse/CLI-212)到实际问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-16T17:45:17.667

从 Apache Commons CLI 1.2 开始，您可以直接在 HelpFormatter 类上设置比较器：

> **setOptionComparator** [[链接](http://commons.apache.org/proper/commons-cli/javadocs/api-1.2/org/apache/commons/cli/HelpFormatter.html#setOptionComparator%28java.util.Comparator%29)]
> 
> `public void setOptionComparator(Comparator comparator)`
> 
> 设置用于在帮助文本中输出选项时对选项进行排序的比较器。传入`null`参数会将排序设置为默认模式。

你应该提供你自己的实现`Comparator<Option>`，按照你想要的顺序对你的选项进行排序。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-18T09:01:53.803

实现这种比较器的最佳 KISS 方式是：

```
class OptionComparator<T extends Option> implements Comparator<T> {

    private static final String OPTS_ORDER = "abcdef"; // short option names

    public int compare(T o1, T o2) {
        return OPTS_ORDER.indexOf(o1.getOpt()) - OPTS_ORDER.indexOf(o2.getOpt());
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-31T14:03:42.563

目前不支持。但它是开源的，所以你知道该怎么做......

从源代码：

```
 private static class OptionComparator
    implements Comparator {

    /**
     * <p>Compares its two arguments for order. Returns a negative 
     * integer, zero, or a positive integer as the first argument 
     * is less than, equal to, or greater than the second.</p>
     *
     * @param o1 The first Option to be compared.
     * @param o2 The second Option to be compared.
     *
     * @return a negative integer, zero, or a positive integer as 
     * the first argument is less than, equal to, or greater than the 
     * second.
     */
    public int compare(Object o1, Object o2)
    {
        Option opt1 = (Option)o1;
        Option opt2 = (Option)o2;

        return opt1.getKey().compareToIgnoreCase(opt2.getKey());
    }
} 
```

您可以覆盖默认比较器并定义所需的顺序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T14:10:56.137

如果您知道选项的确切顺序，您可以扩展 Option 类以包含您的订购号，并使用 Options.add(Option opt) 方法将您的 OrderedOption 实例提供给 Options 实例。

然后，创建一个比较器并比较您的 OrderedOptions 中的订单号...我建议不要在一个 Options 实例中混合两种类型的 Option 实例，因为它会使排序复杂化，并且还会在 Comparator 中测试有效的 OrderedOption 实例。

# javascript - 表单提交后重新设置焦点（javascript）

> ID：11741627
> 
> 赞同：0
> 
> 时间：2012-07-31T13:47:20.307
> 
> 标签：javascript, prototypejs

我的表单上有一些需要提交更改的输入字段。当他们提交时，我失去了焦点。我想让我的注意力重新回到我的输入上。我想用那个：

```
Event.observe(document, 'dom:loaded', $('" + focusedFieldId + "').focus()); 
```

其中focusedFieldId 是更改元素的ID。有时它工作正常，但有时我的输入中有空值。当我将focusedFieldId 更改为其他字段ID 时，它可以正常工作（它设置值然后专注于字段）。问题只是当我尝试将焦点重新设置在相同的输入上时。一个重要问题：在值更改后触发一些 javascript (http://www.devbridge.com/projects/autocomplete/prototype/)。提交此 javascript 表单后，我想重新设置焦点。我认为当 dom 被加载时，这意味着提交结束，页面被重新加载，我准备好重新设置焦点。我在哪里犯错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T21:28:23.173

我相信你在这里陷入某种竞争状态。您可以使用prototype.js 观察两个主要的、不同的“onLoad”事件

其中之一就是您刚刚在这里使用的：

```
document.observe("dom:loaded", function() { ... }); 
```

另一个是

```
Event.observe(window, "load", function() { ... }); 
```

第一个将在浏览器**加载 DOM（读取：HTML）后立即执行，****第二****个**将在**所有内容加载**后执行。

 ******如果您`focusedFieldId`在上面的某个脚本中设置您的，我强烈建议您选择第二个事件观察者；即使速度较慢，它也会确保解析您以前的脚本。

不过，这仍然是一个设计缺陷。我强烈建议您将**所有**屏幕控制器逻辑（包括变量分配）放在第一个 onLoad 事件中，以便更快地执行并避免像这样的潜在竞争条件。******

# r - 如何正确地从 ICC 输出创建数据帧

> ID：11741628
> 
> 赞同：1
> 
> 时间：2012-07-31T13:47:20.537
> 
> 标签：r, dataframe, icc

我正在尝试从我的 ICC 计算中获取输出并创建一个数据框（请参阅下面的示例数据和代码）。当我查看新数据框时，一切似乎都运行良好，但如果您使用 str()，它会显示所有变量都是因子，而我的结果实际上是因子水平，每个因子水平的实际数据计数。这尤其是一个问题，因为我想操作新的数据框。

我对 R 比较陌生，我不知道如何修改我的代码来纠正这个问题。

数据集：

```
WW_Wing_13C_Summary <- structure(list(Individual_ID = c("WW_08A_02", "WW_08A_03",
"WW_08A_04", "WW_08A_05", "WW_08A_06", "WW_08A_08", "WW_08A_09", "WW_08A_13", 
"WW_08B_02", "WW_08G_01", "WW_08G_02", "WW_08G_05", "WW_08G_07", 
"WW_08I_01", "WW_08I_03", "WW_08I_07", "WW_08I_12"), Region = c("South", 
"South", "South", "South", "South", "South", "South", "South", 
"South", "North", "North", "North", "North", "North", "North", 
"North", "North"), P1 = c(-18.67, -20.06, -16.54, -20.33, -21.28, 
-23.86, -21.3, -21.34, -20.87, -20.32, -19.35, -21.2, -21.61, 
-18.3, -22.3, -21.6, -24.12), P2 = c(-19.16, -20.3, -15.6, -20.28, 
-21.24, -23.95, -21.44, -24.13, -20.95, -20.02, -19.38, -21.29, 
-21.42, -18.53, -22.2, -21.77, -24.08), P3 = c(-20.38, -21.21, 
-16.61, -20.58, -21.22, -24, -21.49, -23.03, -20.76, -19.92, 
-19.7, -21.85, -21.84, -19.55, -22.18, -22.17, -24), P4 = c(-20.96, 
-22.9, -19.65, -20.8, -21.2, -24.16, -21.49, -21.77, -20.9, -20.05, 
-19.94, -22.22, -21.68, -20.18, -22.14, -22.21, -24.2), P5 = c(-21.61, 
-22.87, -20.98, -21.24, -21.47, -24.93, -21.1, -21.4, -21.02, 
-20.23, -20.43, -22.34, -21.79, -20.96, -21.55, -22.24, -24.16
), P6 = c(-21.65, -21.13, -21.18, -20.94, -21.23, -24.93, -20.84, 
-21.57, -20.84, -20.73, -20.08, -22.42, -21.49, -21.08, -20.85, 
-22.47, -22.87), P7 = c(-21.31, -20.68, -21.7, -20.54, -21.89, 
-24.48, -20.78, -21.45, -21.11, -20.91, -20.81, -22.69, -21.88, 
-21.5, -23.1, -22.19, -22.51), P8 = c(-20.8, -20.58, -21.18, 
-21.04, -21.89, -24.17, -21.58, -21.32, -20.64, -19.87, -20.9, 
-22.75, -21.62, -17.42, -20.75, -21.89, -22.12), P9 = c(-21.28, 
-20.69, -21.33, -20.42, -21.6, -23.1, -20.76, -21.59, -20.11, 
-19.58, -19.24, -22.73, -21.54, -13.18, -20.9, -21.89, -22.3)), 
.Names = c("Individual_ID", "Region", "P1", "P2", "P3", "P4", "P5",
"P6", "P7", "P8", "P9"), class = "data.frame", row.names = c(NA, -17L)) 
```

代码：

```
## split the complete dataset by regions
WW_Wing_13C_Summary_Region <- split(WW_Wing_13C_Summary, WW_Wing_13C_Summary$Region)

library(psych)
# calculate ICC for delta-13C and create a data frame with results for each region
WW_Wing_13C_ICC <- data.frame(t(sapply(WW_Wing_13C_Summary_Region,
    function(temp) unlist(ICC(temp[ , c(3:11)])[c("results", "summary")]))))[ , c(49, 52, 55, 58, 61, 9, 39, 45)]

# View results
WW_Wing_13C_ICC

# View structure of dataframe
str(WW_Wing_13C_ICC) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:59:38.957

发生这种情况是因为在您的功能中：

```
WW_Wing_13C_ICC <- data.frame(t(sapply(WW_Wing_13C_Summary_Region,
    function(temp) unlist(ICC(temp[ , c(3:11)])[c("results", "summary")]))))[ , c(49, 52, 55, 58, 61, 9, 39, 45)] 
```

...（我可能会清理一下）您使用 unlist。当你这样做时，你混合了字符和数字类，R 会自动将所有内容转换为字符。然后你只拿你想要的那些看起来数字但实际上是字符/因素的部分。

两个修复：

**1.重写你上面的匿名函数，只提取你想要的，并确保一切都是数字**

如...

```
SUM <- function(temp) {
    x <- ICC(temp[ , c(3:11)])
    y <- x["summary"]
    z <- x["results"]
    sumR1 <- data.frame(y[[c(1, 1)]], check.names = FALSE)[1, ]
    resR3 <- z[[1]][3, c("ICC", "lower bound", "upper bound")]
    list(sum = sumR1, res = resR3)
}

sumres <- unlist(lapply(WW_Wing_13C_Summary_Region, SUM), recursive = FALSE)
DF <- data.frame(do.call(rbind, sumres[c(T, F)]), 
    do.call(rbind, sumres[c(F, T)]), check.names = FALSE)

rownames(DF) <- unlist(strsplit(rownames(DF) , "\\."))[c(T, F)]
DF 
```

**2.手动更改类：**

如...

```
NEW <- data.frame(apply(WW_Wing_13C_ICC, 2, as.numeric))
str(NEW) 
```

# jquery-plugins - 过滤后的jqgrid

> ID：11741632
> 
> 赞同：0
> 
> 时间：2012-07-31T13:47:29.623
> 
> 标签：jquery-plugins, jqgrid

我将 jqgrid 与 multiselect 一起使用：true，通过一些“复选框”过滤器。

如果我检查所有行。然后我取消选中一些复选框（某些行将被过滤）

它过滤正确，但选择背景颜色丢失（变为白色）。

任何人都可以帮助我，如何阻止这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:29:35.553

您可以尝试使用 onSelectedRow 方法将行 ID 保存在数组中，并在过滤器完成后选择所需的行。我确定这不是最好的主意，但这种解决方法可以解除对您的阻止。

希望能帮助到你

# php - 检查此要求，让我知道它是哪种 Magento 产品类型？

> ID：11741634
> 
> 赞同：0
> 
> 时间：2012-07-31T13:47:33.353
> 
> 标签：php, e-commerce, opencart, magento

我是 Magento 的新手，刚读完两本电子书。请检查下面的项目要求，让我知道它是哪种产品类型，我应该怎么做才能达到下面的要求？

该网站将只销售一种产品，即**自行车**。

**第一个选项卡**（三个选项）：绿色循环（30 美元）、红色循环（35 美元）和粉色循环（33 美元）。用户可以从中选择任何人循环。

**第二个选项卡**- 必须显示三种尺寸的循环（小，中，大）。循环的颜色基于之前的选择。用户可以从中选择任何人。

**第三个选项卡**：必须显示**50 种**轮胎（如果选择绿色循环）。
必须显示**30 种类型**的轮胎（如果选择红色循环） 必须显示**40 种类型**的轮胎（如果选择粉红色循环） 轮胎价格不同。用户可以从中选择任何一个轮胎。

**第 4 个选项卡**：必须在此处显示 5 种头盔。头盔的价格不一样。用户可以从中选择任何人。Note : ***This tab should be hidden*** , when a green cycle is selected. ***头盔仅适用于红色和粉色自行车***。

请让我知道，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:02:32.617

I've never worked with Magento, but looking at the following link:

[http://www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/catalog_product/producttype](http://www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/catalog_product/producttype)

It looks like you want the "Bundle" option. If I interpreted your question correctly, you want to only sell **one** product with different **attributes** - such as tires, helmets, size of bicycle.

Quote from the Magneto Wiki:

> This product type is also known as a “kit” in other eCommerce software. This product type is ideal for circumstances where the user have to select a number of configurable options

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:04:23.053

您正在寻找可**配置的产品**，设置它有点复杂。查看此链接，它将向您详细解释。 [http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product/](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product/)

# regex - Perl 仅从树中替换顶级数字

> ID：11741636
> 
> 赞同：0
> 
> 时间：2012-07-31T13:47:40.483
> 
> 标签：regex, string, perl, bioinformatics, bioperl

我是这个网站的新手。这是一个困扰我超过 2 小时的问题。我有一个字符串（newick 格式的系统发育树），它看起来像：

```
((A:14,B:43):22,C:76,(D:54,(E:87,F:28):17):35); 
```

树可能有多个级别，用括号表示。现在我想在顶级数字（分支长度）中添加一个数字，比如 10。这里只有三个顶级数字：22、76、35。转换后的字符串应如下所示：

```
((A:14,B:43):32,C:86,(D:54,(E:87,F:28):17):45); 
```

我已经尽力想出一个合适的正则表达式，但最终承认了我的局限性。怎样才能真正做到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:50:44.053

虽然我会选择解析整个树，但仅使用正则表达式可以解决问题：

```
use strict; use warnings; use feature qw(say);
my $string = "((A:14,B:43):22,C:76,(D:54,(E:87,F:28):17):35)";
$string =~ s/^\(//;
$string =~ s/\)$//;
$string =~ s{
    \G ((?&PRELEM)) : (\d+) (,|$)
    (?(DEFINE)
        (?<SUBLIST> [(] (?&ELEM)(?:,(?&ELEM))* [)] )
        (?<ELEM> (?&PRELEM) : \d+ )
        (?<PRELEM> (?:[A-Z]|(?&SUBLIST)) )
    )
 }{"$1:".($2+10).$3}gex;
 say "($string)"; 
```

打印`((A:14,B:43):32,C:86,(D:54,(E:87,F:28):17):45)`。

我定义了一个自顶向下递归解析的小语法，请根据需要进行调整。在顶层，我们有无趣的 Pre-Elements，我们将其存储在`$1`它们可以是单个字母或用括号括起来的树。在 a 之后是`:`我们想要增加的数字，存储在`$2`. 它后面是字符串或逗号的结尾。我们迭代匹配，从最后一个匹配的左侧开始（由`/g`选项和`\G`断言表示）。当我们构建替换字符串时会发生添加（我们正在使用该`/e`选项）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:51:31.683

```
s/(?:^\(|(\((?:(?>[^()]*)|(?1))*\)))\K|:\K([0-9]+)/$2?$2+10:""/ge 
```

匹配您要跳过的内容或以 : 开头的数字。

您要跳过的内容要么是前导括号，要么是`(`任何平衡的括号集（平衡括号正则表达式几乎从字面上取自[perlre](http://perldoc.perl.org/perlre.html#%28?PARNO%29-%28?-PARNO%29-%28?+PARNO%29-%28?R%29-%28?0%29)）。

在替换中，如果要修改的数字匹配，则添加十，否则不匹配。

但是你最好不要聪明，而是去解析、修改和重新序列化你的树。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:56:26.600

这需要一个递归正则表达式来匹配嵌套的括号。

首先定义一个“键”，它可以是一串大写字母，也可以是括号之间的任意数量的键：值对。

然后找到后跟冒号和十进制数的所有键，并对数字进行算术运算。

```
use strict;
use warnings;

my $str = '((A:14,B:43):22,C:76,(D:54,(E:87,F:28):17):35)';

my $key = qr/ (?<key> [A-Z]+ | \( (?&key) : \d+ (?: , (?&key) : \d+ )* \)  ) /x;

$str =~ s/$key : \K ( \d+ ) /$2 + 10/xge;

print $str; 
```

**输出**

```
((A:14,B:43):32,C:86,(D:54,(E:87,F:28):17):45) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T17:44:45.347

首先，我要感谢[ysth](https://stackoverflow.com/a/11742865/170194)在这个帖子中非常有趣的帖子。从这篇文章中，我了解了如何以及为什么要应用`\K`eep 修饰符。

我添加了另一个`\K`（到第一个子表达式）并使用了`++`原子组的新符号：

```
my $r = qr{
  (?:
     (?: ^ \(\K )
     |
     (
       \( (?: [^()]++ | (?1) )* \)
     )\K
  )
  |
  :\K (\d+)
}x; 
```

输出字符串现在与输入字符串完全匹配 - 除了增加的值：

```
$t =~ s/$r/$2?$2+10:''/ge;

input:  ((A:14,B:43):22,C:76,(D:54,(E:87,F:28):17):35)
output: ((A:14,B:43):32,C:86,(D:54,(E:87,F:28):17):45) 
```

# qt - 连接到插槽时传递一个常量值

> ID：11741638
> 
> 赞同：0
> 
> 时间：2012-07-31T13:47:45.387
> 
> 标签：qt, signals-slots

我在同一个对象中有很多信号，我想将它们连接到一个插槽，同时在连接时传递一个 const。具体来说，我想做这样的事情：

```
connect (obj, SIGNAL(sig()), obj2, SLOT(sl(1))) ;
connect (obj, SIGNAL(sig()), obj2, SLOT(sl(2))) ;
connect (obj, SIGNAL(sig()), obj2, SLOT(sl(3))) ;
connect (obj, SIGNAL(sig()), obj2, SLOT(sl(4))) ; 
```

有什么办法可以做到这一点吗？由于所有信号都来自同一个对象，我不能使用 QSignalMapper。有什么建议/解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:00:14.553

为每个连接使用单独的 QSignalMapper。效率不是很高，但应该可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:06:47.843

你也可以试试

```
connect (obj, SIGNAL(sig(int)), obj2, SLOT(sl(int))) ; 
```

因为在使用信号和插槽时，两者都应该具有相同的参数。所以我们可以发出任何具有任何值的信号。信号发出的值会自动传递给插槽。

# objective-c - 未填充 JSON 数据

> ID：11741639
> 
> 赞同：-1
> 
> 时间：2012-07-31T13:47:47.340
> 
> 标签：objective-c, ios, json

我正在尝试为 iOS 编写一个 Facebook Feed 应用程序，并且我正在尝试使用 JSON 框架，但收效甚微。每当我运行我的代码时，我都会收到错误“ *** Terminating app due to unaught exception 'NSInvalidArgumentException', reason: 'data parameter is nil'”。我使用来自 Flickr 的提要作为测试/演示 URL，因为 Facebook URL 是使用访问令牌请求和 appendToString: 以编程方式创建的。

```
 NSURL *url2 = [NSURL URLWithString:@"www.flickr.com/services/feeds
                     /photos_public.gne?tags=punctuation&someKey=atsign&format=json"];
    NSError *error = nil;
    NSData *data = [NSData dataWithContentsOfURL:url2];
    if (data == nil){
        NSLog(@"data is nil");
    }
    NSDictionary *json = [NSJSONSerialization JSONObjectWithData:data 
                                                         options:NSJSONReadingMutableContainers
                                                          error:nil];
    NSLog(@"json: %@\n\n Or Error: %@", json, [error localizedDescription]); 
```

编辑：我更改了我的代码以包含一个错误和一个 NSlog，并更改了 URL（根据海报 ilis 的建议），以及添加一个 if 语句来测试数据是否为零（感谢海报达斯汀的想法）。现在我从 NSLog 得到一个输出，指出“json: (null) Or Error: The operation could not be completed. (Cocoa error 3840.)”，并且 if 语句没有响应。所以我认为在创建 NSDictionary json 时会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:08:35.560

您的网址创建不正确。当您`dataWithContentsOfURL`使用无效的 url 调用时，您会得到一个`nil` `NSData`. JSON 序列化方法需要一个`NSData`对象但得到`nil`，所以它抛出`NSInvalidArgumentException`。

您的方法中没有任何内容看起来不正确，您只需要检查您的 URL 是否有效。在尝试执行 JSON 序列化之前检查它`data`是否是一个好主意。`nil`

如何检查数据是否为零

```
if (data == nil)
{
     //handle the problem
}
else
{
     //You have valid content, do something with it
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:44:16.850

Flickr 用他们的 JSON 做了一些解析器无法处理的坏事：

*   它们以 'jsonFlickrFeed(' 开头并以 ')' 结尾
    *   这意味着根对象无效
*   他们错误地转义单引号..例如。\'
    *   这是无效的 JSON，会让解析器难过！

对于那些希望处理 Flick JSON 提要的人

```
//get the feed
NSURL *flickrFeedURL = [NSURL URLWithString:@"http://api.flickr.com/services/feeds/photos_public.gne?format=json&tags=data"];
NSData *badJSON = [NSData dataWithContentsOfURL:flickrFeedURL];
//convert to UTF8 encoded string so that we can manipulate the 'badness' out of Flickr's feed
NSString *dataAsString = [NSString stringWithUTF8String:[badJSON bytes]];
//remove the leading 'jsonFlickrFeed(' and trailing ')' from the response data so we are left with a dictionary root object
NSString *correctedJSONString = [NSString stringWithString:[dataAsString substringWithRange:NSMakeRange (15, dataAsString.length-15-1)]];
//Flickr incorrectly tries to escape single quotes - this is invalid JSON (see http://stackoverflow.com/a/2275428/423565)
//correct by removing escape slash (note NSString also uses \ as escape character - thus we need to use \\)
correctedJSONString = [correctedJSONString stringByReplacingOccurrencesOfString:@"\\'" withString:@"'"];
//re-encode the now correct string representation of JSON back to a NSData object which can be parsed by NSJSONSerialization
NSData *correctedData = [correctedJSONString dataUsingEncoding:NSUTF8StringEncoding];
NSError *error = nil;
NSDictionary *json = [NSJSONSerialization JSONObjectWithData:correctedData options:NSJSONReadingAllowFragments error:&error];
if (error) {
    NSLog(@"this still sucks - and we failed");
} else {
    NSLog(@"we successfully parsed the flickr 'JSON' feed: %@", json);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:47:01.590

我在 StackOverflow 上找到了答案：[NSJSONSerialization](https://stackoverflow.com/questions/8684667/nsjsonserialization)。

事实证明，Flickr 的 JSON 提要格式不正确，因此数据被填充了带有前缀的信息，而`NSJSONSerialization`.

# c# - Xdocument 后代函数给出异常

> ID：11741644
> 
> 赞同：0
> 
> 时间：2012-07-31T13:48:00.567
> 
> 标签：c#, xml

我在 Xdocument 对象中加载了一个 html 文档：

```
XDocument xdoc = Xdocument.load(path);
XElement el = new XElement("name","value");

xdoc.Descendants("body").Single().Add(el);  <=== sequence conatin no element 
```

document 包含 body 元素，那么为什么会出现这个异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:54:34.717

`body`我怀疑问题是由于命名空间而找不到元素。如果它在命名空间中，您可以使用以下命令找到它：

```
XNamespace ns = "whatever the namespace uri is";
xdoc.Descendants(ns + "body").Single().Add(el); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:53:24.103

尝试使用：

```
xdoc.Root.Descendants("body").Single().Add(el); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:02:57.557

您可以找到没有 Namespase 的元素，只需在 XElement 中使用 LocalName

```
XElement root = XElement.Load("Data.xml");
root.Descendants().Where(x => x.Name.LocalName == "body") 
```

# sql-server - 将 SQLXMLBulkLoad 程序移至生产服务器，现在出现无效的连接字符串错误

> ID：11741645
> 
> 赞同：1
> 
> 时间：2012-07-31T13:48:06.227
> 
> 标签：sql-server, vb.net, connection-string, sqlxml, bulk-load

我要感谢任何对此提前提出意见的人。我开发了一个程序，它使用 SQLXMLBulkLoad4 类将 xml 文件批量加载到临时表，然后使用存储过程用这些数据更新生产表。这是我们不知所措的地方。在我的开发计算机上，一切都运行得非常好，但是，在移动所有必要的项目并将正确的 .dll 文件安装/注册到生产服务器之后，我在 SqlBulkLoad 错误日志中收到了一个致命错误。这是日志的文本（在 xml 中）：

```
 <?xml version="1.0"?>
 <Result State="FAILED">
    <Error>
        <HResult>0x80040154I32</HResult>
        <Description><![CDATA[Invalid connection string.]]></Description>
        <Source>XML BulkLoad for SQL Server</Source>
        <Type>FATAL</Type>
    </Error>
</Result> 
```

突然出现此错误时，我不明白。我尝试了不同的连接字符串类型，但无济于事。据我了解，使用 SqlXmlBulkLoad4 类调用 OLEDB 连接字符串。这是我的 SQLXMLBulkLoad 连接字符串示例：

```
<add key="ServerNameBulkLoad" value="Provider=SQLNCLI10;Server=ServerName;Database=DBName;Trusted_Connection=Yes;"/> 
```

我还尝试再次在服务器上手动注册 sqloledb.dll。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:17:01.867

好吧，在测试了一堆连接字符串之后（感谢www.connectionstrings.com），我终于找到了解决问题的方法，实际上是连接字符串。正确的连接字符串（用于生产服务器上的使用）与上面相同，除了 Provider=SQLOLEDB.1 而不是 SQLNCLI10。我相信这与程序正在运行的服务器有关，好吧，让我们说一下旧法规。总之，问题解决了。感谢 RGI 的帮助！

# batch-file - 将oracle sqlplus选择计数值放入dos批处理文件

> ID：11741658
> 
> 赞同：0
> 
> 时间：2012-07-31T13:48:53.683
> 
> 标签：batch-file, sqlplus, dos

我有一个运行 SQLplus 选择的 DOS 批处理文件，以获取特定列值为 10 的行数。这工作正常，我已经成功地将值输出到文件但是我现在使用时遇到了真正的问题批处理文件中的那个值。问题似乎是由于它是一个右对齐的 10 个字符的字符串。

所以如果我的值为0，我会得到这个，

```
 0 
```

或者如果我的价值是 7000 我会得到这个，

```
 7000 
```

我真正想要的是这个

```
0 
```

或这个

```
7000 
```

我有理由确定，如果我的数据从第 1 列开始，那么我可以使用以下内容来读取数据，

```
for %%a in ("C:\Program Files (x86)\BBWin\ext\status10.LST") do if /I %%a GTR 300 echo %%a >> "C:\Program Files (x86)\BBWin\ext\status10.txt" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:19:54.460

galuano1 答案肯定会从值中删除空格，在您的情况下不应该是必需的。

FOR /F 的默认标记分隔符是空格和制表符。因此，将为您修剪前导空格。该值不必左对齐:-)

您需要使用 FOR /F 和 USEBACKQ 选项来读取名称中包含空格的文件。

```
for /f "usebackq" %%a in ("C:\Program Files (x86)\BBWin\ext\status10.LST") do ... 
```

但你甚至不需要文件！您可以使用 FOR /F 通过将命令括在单引号中来直接处理 sqlplus 的结果。

```
for /f %%a in ('sqlplus ...') do ... 
```

您应该仔细阅读 FOR 命令的帮助文档：键入`HELP FOR`或`FOR /?`从命令行。FOR 的使用方式有许多细微的差别。

您还可以查看这个[出色的 FOR 循环教程](http://judago.webs.com/batchforloops.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:01:29.287

您可以通过执行以下操作删除空格

```
set str=%str: =%
echo."%str%" 
```

其中 str 是包含带空格的值的变量。

更多信息[在这里](http://www.dostips.com/DtTipsStringManipulation.php#Snippets.RemoveSpaces)

# sql-server - 从存储在 FILESTREAM 中的 pdf 文件中选择不同的单词

> ID：11741664
> 
> 赞同：0
> 
> 时间：2012-07-31T13:49:09.643
> 
> 标签：sql-server, sql-server-2008, full-text-search, filestream

我有一个将 PDF 文件存储在 FILESTREAM 中的 SQL Server 2008 数据库。我已经使用 Adob​​e iFilter 对这些 PDF 文件启用了全文搜索。全文搜索正常工作。现在，我希望能够从该 PDF 中选择所有不同的单词并在新行中显示每个单词。我怎样才能做到这一点？

# arrays - bash：从使用 & 控制运算符调用的函数分配给 bash 中的数组

> ID：11741669
> 
> 赞同：1
> 
> 时间：2012-07-31T13:49:12.810
> 
> 标签：arrays, bash, function

我想知道为什么会这样：

```
arr=()
fun() { arr[$1]=$2; }
fun 1 2
echo ${arr[1]}
# echoes '2' 
```

但这不是：

```
arr=()
fun() { arr[$1]=$2; }
fun 1 2 &
wait
echo ${arr[1]}
# echoes a blank line 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:05:04.053

通过`fun`在第二个示例中在后台运行，您可以在子 shell 中运行它。在子 shell 中对数组所做的更改对父 shell 不可见，您在其中回显`arr[1]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:09:58.510

这是行不通的，因为异步运行函数会创建一个新的 shell 上下文，它不能修改父上下文的环境。这与管道进入控制结构非常相似，在控制结构内修改的变量不会在管道外的父级中修改。

# javascript - 从 jquery ui 自动完成选项成功传递变量：选择：

> ID：11741671
> 
> 赞同：0
> 
> 时间：2012-07-31T13:49:16.677
> 
> 标签：javascript, jquery-ui, jquery-ui-autocomplete

在以下自动完成脚本中，如何将结果（值/标签/描述）传递给`select:`选项？

```
$( ".find_group_ac" ).autocomplete({
    minLength: 1,
    source: function(request, response) {
        $.ajax({
            url: "welcome/search/",
            data: { term: $(".find_group_ac").val()},
            dataType: "json",
            type: "POST",
            success: function(data) { 
                response($.map(data, function(obj) {
                    return {
                        label: obj.name,
                        value: obj.name,
                        description: obj.description 
                    };
                }));
            }
        });
    },
    select: function (ui, item) {
        alert (item.value);
    } 

}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:52:36.193

`select`处理程序通过`event`并且`ui`. `ui.item`指选中的项目。考虑到这一点，您只需要：

```
select: function (event, ui) {
    alert (ui.item.label);
    alert (ui.item.value);
    alert (ui.item.description);
} 
```

# algorithm - 图中与源无关的路径

> ID：11741675
> 
> 赞同：3
> 
> 时间：2012-07-31T13:49:30.210
> 
> 标签：algorithm, graph, path

几年前，我读到了一种算法：它标记了图的边，因此从源节点 X 到目标节点 Y 的路径始终是相同的标签序列，与您选择作为源 X 的节点无关。它是如何调用的？

（我不记得图形应该满足哪种条件）

这是一个示例（由我创建）：

![示例图](../Images/40e5a3e1de943646b7bcbab3362226b6.png)

*   顶点 1：红/黑/红
*   顶点 2：红/红/黑
*   顶点 3：红/红/黑/绿
*   顶点 4：红/黑/红/绿

从作为源的任何顶点开始，您使用上面的路径总是会到达目标顶点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:06:14.880

有道路着色问题：

**问题：** *给定一个有向图 G，给边上色，使得对于每个顶点，都有一组从其他顶点指向该顶点的指令。*

（[链接](http://en.wikipedia.org/wiki/Road_coloring_problem)）

最近证明（[Trahtman 2009](http://arxiv.org/abs/0709.0099)）如果图是非周期性的并且每个顶点具有相同的出度，则存在这样的着色：

**定理：每一个** ***均匀出度****的有限**强连通非周期**有向图都有一个同步着色。*

 **Trahtman 还为该问题提供了 O(n^3) 算法。

您应该搜索“道路着色问题算法”及其变体（例如，可以将条件放宽为非周期性，但我认为到目前为止这是一个未解决的问题）。**

# git - 如何告诉 git 在子树合并期间忽略某些文件夹和文件？

> ID：11741681
> 
> 赞同：2
> 
> 时间：2012-07-31T13:49:42.193
> 
> 标签：git, git-merge, git-subtree

我有具有以下目录结构的主分支

```
templates/something.lib
templates/libs/1.lib 
```

而且我还有一个包含以下文件的 templates_master 分支（就在根目录中）

```
a.html
b.html 
```

然后我去 master 并将模板加载到 master templates 文件夹中

```
git read-tree --prefix=templates/ -u templates_master 
```

现在形成这个主结构

```
templates/something.lib
templates/libs/1.lib
templates/a.html
templates/b.html 
```

然后我留在 master 并在 templates/a.html 中引入一些更改，并进行几次提交。现在我希望这个修改过的 templates/a.html 回到原来的分支。我切换到 templates_master 分支并运行此命令

```
git merge -s subtree master 
```

然而，这个命令不仅将 master:templates/a.html 复制到 templates_master:a.html ，而且还复制那些 libs 文件，所以基本上现在我的 templates_master 分支拥有原始主模板/拥有的所有内容。是否可以告诉 git 仅将某些文件和文件夹保留在主分支中，或者此逻辑是否在 git 级别上硬编码，即在子目录合并期间，它使用指向模板 / 的树状结构 / 模板 / 中的所有内容是并且只能是子目录模板/？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T07:59:05.310

不幸的是，我很确定这是子树工作流程的要求。它们毕竟被称为“子树”。子树的任何路径中都不能有超级项目文件。

也就是说，这出现了很多！我想知道是否有人会想到解决方案。

想象一下，如果您可以将 2 个项目合并到同一个文件夹中？您将如何处理 README 等常见文件？如果您添加一个新文件，您会期待什么？git 怎么知道你将它添加到哪个项目？perforce 中几乎需要一个类似于 clientspec 映射的新概念来满足这种需求。

现在尝试将您的子项目保存在***子文件夹***中。

# mysql - SQL JOIN 查询语法

> ID：11741682
> 
> 赞同：0
> 
> 时间：2012-07-31T13:49:47.750
> 
> 标签：mysql, sql

我有一张存放购买的桌子，还有一张存放产品的桌子。

*购买*表中的每一行最多可以包含 9 个产品 ID（8 个可以为空）

```
id, foo, bar, baz, product_1_id, product_2_id, product_3_id, etc... 
```

现在我需要查询该*购买*表的所有字段，以显示在 html 页面中。

我不能只显示products id，所以需要在*products*表中找到对应的product_name。

SQL 查询让我很难受。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:53:14.010

要检索产品名称，我会试试这个：

```
SELECT t2.product_name as product_name_1, t3.product_name as product_name_2, t4.product_name as product_name_1, [...]
FROM purchases as t1
JOIN products as t2 ON(t1.product_1_id = t2.product_id)
LEFT JOIN products as t3 ON(t1.product_2_id = t3.product_id)
LEFT JOIN products as t4 ON(t1.product_3_id = t4.product_id)
[...]
WHERE t1.id = ... 
```

但这可能会很慢，您可能想要重组您的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:53:26.673

您需要加入 Products 表 9 次。但考虑归一化

```
select id, foo, bar, baz, p1.product_name, p2.product_name, p3.product_name, 
  etc...  
from purchases as pur
left join products as p1 on pur.product_1_id=p1.product_id
left join products as p2 on pur.product_2_id=p2.product_id
.
. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:54:47.390

在sql中你可以这样使用..

```
 select *,PM.Product_id,P.Product_name from purchase_mst PM, product P where   
 PM.Product_id1=P.Product_id1 and PM.Product_id2=P.Product_id2 etc.... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T13:57:08.660

使用适当的规范化设计，您将拥有：product、purchase_Order 和 purchase_order_line，查询将是：

```
SELECT     ...
FROM       purchase_order
INNER JOIN purchase_order_line
ON         purchase_order.id = purchase_order_line.purchase_order_id
INNER JOIN product
ON         purchase_order_line.product_id = product.id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T14:02:22.567

I think it would be easier if you had a table connecting *purchases* and *products* with two columns *product_id, purchase_id*.

But still, I guess you can try something like this :

```
SELECT pr1.name
 FROM purchases pur1, products pr1
WHERE pur1.product_1_id = pr1.id
UNION ALL
SELECT pr2.name
 FROM purchases pur2, products pr2
WHERE pur2.product_1_id = pr2.id
UNION ALL
-- and so on until
SELECT pr9.name
 FROM purchases pur9, products pr9
WHERE pur9.product_9_id = pr9.id 
```

Although this looks pretty scary and I would strongly suggest rethinking your database design.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T14:03:17.477

You could do this

Select purchase.*, product.* from purchase join product on id1=id, id2=id... Etc.

Read this:

[MySQL how to join tables on two fields](https://stackoverflow.com/questions/498197/mysql-join-on-two-fields)

# image - 具有 16 位显示的设备上的 32 位 png 图像

> ID：11741686
> 
> 赞同：0
> 
> 时间：2012-07-31T13:49:56.477
> 
> 标签：image, qt, qimage, image-formats

有谁知道如何将 32 位图像转换为在具有 16 位显示的设备上显示？

我试图用 Qt QImage 创建一个 24 位图像 - [QImage QImage::convertToFormat](http://qt-project.org/doc/qt-4.8/qimage.html#convertToFormat)

并保存结果图像，但我得到的图像也是 32 位的（我在输出图像的属性中看到了这个数据 - 位深度）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:17:27.960

如果您只想显示图像，则无需自己进行转换。只需使用任何能够显示 QImage（或 QPixmap）的 Qt 小部件来显示它。Qt 应该即时处理转换。

如果您需要自己触摸像素数据，您正在寻找的格式可能是`QImage::Format_RGB16`，但您必须确保位布局 (RGB565) 是您想要的。

# ms-access - 申请人 - 先试用还是课程？访问数据库设计

> ID：11741688
> 
> 赞同：0
> 
> 时间：2012-07-31T13:49:57.397
> 
> 标签：ms-access, registration

我正在为大学注册系统设计一个数据库，学生可以直接进入课程或进行试验。

我有我的申请表{申请人 ID（不是学生 ID，因为他们还没有被授予课程），名字，姓氏，地址等，}

Tutor Table {Tutor ID, first Name, Last name, }

我的课程表 {课程 ID，课程名称，导师 ID，}

我的试用表 {试用 ID、试用日期、试用类型}

我怎样才能让一个学生报名参加课程或试用？一旦他们参加了审判，如何提供/拒绝主题课程？

我有一个注册表，但我不知道该放什么

我有{注册 ID、申请人 ID、课程 ID、试用 i、d)

这个对吗？

# image - 使用谷歌图像图表将图像导出到 excel？

> ID：11741693
> 
> 赞同：2
> 
> 时间：2012-07-31T13:50:17.957
> 
> 标签：image, grails, charts

我正在使用 grails 构建一个 Web 应用程序，并使用 jxl API 生成一个 excel 文件以允许格式化。我想使用我的应用程序中的数据生成一个图表以包含在 excel 文件中。

我发现创建可以保存然后插入到 excel 文件中的静态图像的唯一来源是已弃用的 Google 图像图表 API，用于构建 URL 字符串以检索相应的图表。

1.  考虑到我只使用饼图类型，我是否应该担心使用已弃用的谷歌图像图表来执行此操作，或者我应该没问题？

2.  我应该完全不同吗？使用浏览器保存图像可能会出现问题，因为应用程序需要支持 ie。7-9。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T07:26:05.113

我担心谷歌会在 2015 年之后删除该服务；如果完全删除服务，它只是一个简单的饼图可能并不重要。我不知道发生这种情况的可能性，但可能是一个问题。

您可以使用[JFreeChart](http://www.jfree.org/jfreechart/) API 将图表生成为 png，并使用 jxl 将其插入到使用`sheet.addImage()`.

[这里](http://www.intelligrape.com/blog/2010/03/31/generating-dyanmic-charts-in-grails/)有一个使用 Grails 创建图表的示例

# android - android.intent.action.BOOT_COMPLETED 在启动时不会被触发

> ID：11741694
> 
> 赞同：1
> 
> 时间：2012-07-31T13:50:22.447
> 
> 标签：android, broadcast

我有一个广播接收器，我试图检测系统启动何时完成，但接收器没有被触发，或者 LogCat 中什么也没有，知道吗？

AndroidManifest

```
<!--  SIM Card Receiver -->

<receiver android:name=".SIMChangeNotifierActivity" android:enabled="true" android:exported="false"> 
    <intent-filter android:priority="1001"> 
        <action android:name="android.intent.action.BOOT_COMPLETED"/> 
    </intent-filter> 
</receiver> 
```

广播接收器

```
public class SIMChangeNotifierActivity extends BroadcastReceiver {    

    public void onReceive(Context context, Intent intent)
    {
      if("android.intent.action.BOOT_COMPLETED".equals(intent.getAction()))
      {
         Log.e("TAG", "Boot completed"); 
          }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-22T09:52:13.410

只需在您的清单中声明

```
 <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

# ruby - 匹配一个不跟随登录的单词寄存器

> ID：11741697
> 
> 赞同：0
> 
> 时间：2012-07-31T13:50:25.230
> 
> 标签：ruby, regex

我正在尝试制作一个与此字符串中包含单词“log in”的单词“register”不匹配的正则表达式

```
"active active">Log in / Register</a>

"active active">Register / log in</a> 
```

但会匹配这个

```
"active active">Register</a>

"active active">siteRegister</a> 
```

可以制作正则表达式..？只需尝试近 3 小时..如果您能提供帮助，请不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:33:34.317

尽管我认为将正则表达式用于此类事情是个坏主意，但您应该尝试一下：

```
"active active">\w*Register\w*<\/a> 
```

# algorithm - 给定一个 NxN 矩阵，我怎样才能找到到某个位置 (i,i) 的所有可能路径？

> ID：11741703
> 
> 赞同：2
> 
> 时间：2012-07-31T13:50:33.940
> 
> 标签：algorithm, data-structures

给定一个`NxN`矩阵，我怎么能找到一个 location 的所有可能路径`(i,i)`。导航将只`downwards`和朝向`right`。起点是`(0,0)`。

PS不是作业。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:54:20.927

?

对于一个位置 (i, i)，即对角线上的一个位置，正好有 comb(i, 2 * i) 路径（从一组 2 * i 个元素中选择 i 个元素的方法的数量），每个路径由 i 个动作组成向右和我向下运动。枚举它们是微不足道的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T13:59:12.257

最简单的（对我来说）是递归地做：

1) 停止条件将到达 (i,i)

2）您将在每个递归级别尝试两个下一步动作：

*   你能下去吗
*   你能走对吗

假设您当前的位置是 (x,y)：如果您当前的 "y" 加 1 比 (i,i) 中的 "i" 大，则您不能正确。如果您当前的“x”加 1 大于 (i,i) 中的“i”，则您不能下降。

您只需要记住某个变量中的路径或将其向下传递并在停止条件发生时打印它。

因此，假设您从 (0,0) 开始，您会记住这一点，然后检查您是否可以向右或向下，如果两者都是，那么您递归地为 (0,1) 和 (1,0) 调用相同的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T14:18:46.053

尽管您可以使用 DP 来解决这个问题，但这只是简单的数学运算：

你必须`2i`迈出一步，从那里`i`必须是向右的步骤。总组合为`C(2i,i)`。请参阅：[计算二项式系数](http://en.wikipedia.org/wiki/Binomial_coefficient#Computing_the_value_of_binomial_coefficients)。

另一个类似的问题是你不能穿过对角线，称为[单调路径](http://en.wikipedia.org/wiki/Catalan_number#Applications_in_combinatorics)，有趣的[加泰罗尼亚数](http://en.wikipedia.org/wiki/Catalan_number)列就是解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T13:56:31.730

解决方案 1 - 使用动态编程：

将解决方案自下而上加起来，直到您想要的 (i,j) 索引：

> ans(i,i) = ans(i-1,j) + ans(i,j-1)
> 
> 并将相同的用于位置（i，i）。

解决方案 2 - 使用简单的排列和组合

> ans = (2i)!/i!i!

（因为您必须选择从 (0,0) 开始向右的 i 步和向下的 ji 步，总共是 2i 步）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T17:34:19.523

从 45 度角看问题。您会看到您正在尝试计算三角形数组上顶点的路径数。解由[帕斯卡三角形](http://en.wikipedia.org/wiki/Pascal%27s_triangle)给出。

`2i choose i`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-10T13:42:38.183

这取决于您何时从 (0,0) 或矩阵中的随机位置开始。

如果是 (0,0) ；使用深度优先直到一个分支结束，然后是其他分支。使用广度优先一步遍历所有相邻节点。仅检查向下和右侧节点。

如果它位于矩阵中的随机位置，则需要跟踪所有 4 个相邻节点。

# google-visualization - 在 Google 带注释的时间线图上显示一天中的时间

> ID：11741705
> 
> 赞同：2
> 
> 时间：2012-07-31T13:50:36.470
> 
> 标签：google-visualization, linechart

我正在尝试使用 Google 图表 api 创建在 x 轴上具有日期时间而在另一个轴上具有值的折线图。通常这些只会持续 48 小时，所以我真的需要在 x 轴上显示一天中的时间以及天数。

请问有人知道如何实现吗？

或者，任何人都可以建议另一个允许这样做的 Javascript 图表 api 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-03T13:04:25.383

AnnotatedTimeline 图表陈旧且过时；您可以使用具有“annotation”和“annotationText”[列角色](https://developers.google.com/chart/interactive/docs/roles)以及[ChartRangeFilter的](https://developers.google.com/chart/interactive/docs/gallery/controls#chartrangefilter)[LineChart](https://developers.google.com/chart/interactive/docs/gallery/linechart)来复制 95% 的功能。LineCharts 支持使用日期时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T04:09:45.327

![Morris.js 绘制带注释的时间表](../Images/8e0049f7b49af07168e30a7be0a2f747.png)

我在[温度时间序列](http://stats.webconverger.org/pihsg/temp/morris.html)上使用[morris.js](http://www.oesmith.co.uk/morris.js/)。

想看看其他建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T14:24:07.797

@asgallant 是对的。它的外观示例可以在[Google Code Playground](https://code.google.com/apis/ajax/playground/?type=visualization#line_chart)中看到并粘贴此脚本：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = new google.visualization.DataTable();
  data.addColumn('datetime', 'Time');
  data.addColumn('number', 'Count');
  data.addColumn({type: 'string', role: 'annotation'});
  data.addColumn({type: 'string', role: 'annotationText'});
  data.addRows([
    [new Date(2013, 0, 31, 19, 30),   1, 'A', 'Event 1'],
    [new Date(2013, 1, 2, 20, 30),   2, 'B', 'No event'],
    [new Date(2013, 1, 7, 18, 30),   2.5, 'C', 'No event'],
  ]);

  // Create and draw the visualization.
  new google.visualization.LineChart(document.getElementById('visualization')).
      draw(data, {curveType: "function",
                  width: 500, height: 400,
                  vAxis: {maxValue: 10}}
          );
} 
```

# html - 在 HTML5 WebWorks 应用程序中存储用户首选项

> ID：11741713
> 
> 赞同：0
> 
> 时间：2012-07-31T13:51:22.377
> 
> 标签：html, local-storage, blackberry-webworks, user-preferences

我正在为 Blackberry OS 5+ 开发 HTML5 Webworks 应用程序。

我必须存储用户名、密码和语言环境。但是，我不知道怎么做。

我可以使用本地商店，但它仅适用于 Blackberry OS 6+。

有人建议我可以编写自己的插件，但我不知道该怎么做。

如何在 Blackberry OS 5+ 上存储用户名、密码和语言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:54:38.907

[https://developer.blackberry.com/html5/api/blackberry.io.file.html](https://developer.blackberry.com/html5/api/blackberry.io.file.html)

使用该链接并可能保存到文件并从文件中读取？可惜你不能使用本地存储，它会很好用。你用的是什么操作系统？

认为这对您来说可能很方便阅读：http: [//supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Using-localStorage-for-pre-OS-6-devices/td-p/703827](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/Using-localStorage-for-pre-OS-6-devices/td-p/703827)

我已经用过几次了，似乎可以工作...

# java - 如何将方法移动到 AspectJ 类？

> ID：11741714
> 
> 赞同：0
> 
> 时间：2012-07-31T13:51:22.493
> 
> 标签：java, rmi, aspectj

在一个简单的 RMI 程序中，我设法在两个线程之间传递上下文。现在我需要将设置/报告从 Context 移动到 AspectJ 类。

我的问题是：如果我需要将上下文用作问候语（上下文）中的参数，如何移动它

你好IF

```
public interface HelloIF extends Remote {
    String greeting(Context c) throws RemoteException;
} 
```

你好

```
public class Hello extends UnicastRemoteObject implements HelloIF {

    public Hello() throws RemoteException {
    }

    public String greeting(Context c) throws RemoteException {
        c.report();
        return "greeting";
    }
} 
```

RMI服务器

```
public class RMIServer {

    public static void main(String[] args) throws RemoteException, MalformedURLException {
        LocateRegistry.createRegistry(1099);
        HelloIF hello = new Hello();
        Naming.rebind("server.Hello", hello);
        System.out.println("server.RMI Server is ready.");
    }
} 
```

RMI客户端

```
public class RMIClient {
    public static void main(String[] args) throws RemoteException, MalformedURLException, NotBoundException {

        Context context = new Context("request1", Thread.currentThread().getName()+System.currentTimeMillis());

        Registry registry = LocateRegistry.getRegistry("localhost");
        HelloIF hello = (HelloIF) registry.lookup("server.Hello");
        System.out.println(hello.greeting(context));

        context.report();

    }
} 
```

语境

```
public class Context implements Serializable
{
    private String requestType;
    private String distributedThreadName;

    public Context(String requestType, String distributedThreadName)
    {
        this.requestType = requestType;
        this.distributedThreadName = distributedThreadName;
    }

    (...)

    public void report() {
        System.out.println("thread : "
                + Thread.currentThread().getName() + " "
                + Thread.currentThread().getId());

        System.out.println("context : "
                + this.getDistributedThreadName() + " " + this.getRequestType());
    }
} 
```

最后是一个空的 AspectJ 类

```
@Aspect
public class ReportingAspect {
    @Before("call(void main(..))")
    public void beforeReportClient(JoinPoint joinPoint) throws Throwable {
    }

    @After("call(void main(..))")
    public void afterReportClient(JoinPoint joinPoint) throws Throwable {
    }

    @Before("call(String greeting(..))")
    public void beforeReportGreeting(JoinPoint joinPoint) throws Throwable {
    }

    @After("call(String greeting(..))")
    public void afterReportGreeting(JoinPoint joinPoint) throws Throwable {
    }

} 
```

如何从 Hello 和 RMIClient Context() 构造函数和 c/context.report()s 转移到 ReportingAspect？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:06:15.247

您可以将参数传递给函数，并将底层对象传递给 Advice，因此：

```
@Before("execution(* greeting(..)) && target(target) && " +
        "args(context)")
public void beforeReportGreeting(HelloIF target, Context context) {
       context.doSomething();
       target.doSomething();
} 
```

研究 AspectJ 注释文档以获取完整的详细信息。它可以用于所有的建议类型。

**编辑**更详细地阅读问题，听起来好像您想让 Context 对象由方面构造和控制，同时仍将其作为参数传递给 Hello.greeting()。

这不是什么有意义的事情。您的底层系统应该可以在没有任何 AOP 的情况下正常工作。因此，如果 Context 对象是该底层域的一部分，那么由 Aspect 负责其构建和管理就不是一个好主意。

如果 Context*仅*与 Aspect 相关，那么您将从域类中删除对上下文的所有引用（因此`greeting()`不带参数）并在 Aspect 中构建 Context 对象。

# jquery - 如果 cellEdit 设置为 true，jqgrid 保留行方法

> ID：11741717
> 
> 赞同：0
> 
> 时间：2012-07-31T13:51:40.420
> 
> 标签：jquery, jqgrid

如果设置了 celledit 的属性，是否可以在 jqgrid 中保留诸如“onSelectRow”之类的行方法：

```
cellEdit:true 
```

？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:02:10.387

好友检查此链接并阅读第一行中 cellEdit 的描述，我认为如果它禁用 onSelectRow，可能其他（editRow）也被禁用，因为您需要选择一行进行编辑，这就是我的想法。

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:cell_editing&ei=FwAYUIK3KInIrQeaxIDYBQ&usg=AF](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:cell_editing&ei=FwAYUIK3KInIrQeaxIDYBQ&usg=AF)

# c# - 将图像保存到 MemoryStream - 通用 GDI+ 错误

> ID：11741719
> 
> 赞同：7
> 
> 时间：2012-07-31T13:51:42.683
> 
> 标签：c#, asp.net, image-uploading

我的应用程序概述：在客户端，使用网络摄像头拍摄一系列快照。提交时，我希望将图像转换为字节数组，并将该字节数组发送到我编写的服务。

我的问题：我正在尝试将单个图像保存到 a `MemoryStream`，但它继续中断，吐出消息***“GDI+ 中发生一般错误。”*** 当我深入挖掘时，我看到当 MemoryStream 的缓冲区位置为 54 时抛出异常。不幸的是，这是一张`1.2 mb`照片。这是代码块：

```
// Create array of MemoryStreams
var imageStreams = new MemoryStream[SelectedImages.Count];
for (int i = 0; i < this.SelectedImages.Count; i++)
{   
    System.Drawing.Image image = BitmapFromSource(this.SelectedImages[i]);
    imageStreams[i] = new MemoryStream();
    image.Save(imageStreams[i], ImageFormat.Bmp); /* Error is thrown here! */
}

// Combine MemoryStreams into a single byte array (Threw this 
// in in case somebody has a better approach)
byte[] bytes = new byte[imageStreams.Sum(s => s.Length)];
for(int i = 0; i < imageStreams.Length; i++)
{
    bytes.Concat(imageStreams[i].ToArray());
} 
```

这是我的 BitmapFromSource 方法

```
// Converts a BitmapSource object to a Bitmap object
private System.Drawing.Image BitmapFromSource(BitmapSource source)
{
    System.Drawing.Image bitmap;

    using (MemoryStream ms = new MemoryStream())
    {
        BitmapEncoder encoder = new BmpBitmapEncoder();
        encoder.Frames.Add(BitmapFrame.Create(source));
        encoder.Save(ms);
        bitmap = new System.Drawing.Bitmap(ms);
    }
    return bitmap;
} 
```

我读到的很多关于通用 GDI+ 错误的内容都指向权限问题，但考虑到我没有保存到文件系统，我看不出这将如何适用。此外，我已经看到，由于在保存图像之前 MemoryStream 关​​闭可能会出现此错误，但考虑到我在保存图像之前立即创建 MemoryStream，我也看不到这将如何应用。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T14:04:55.573

我认为您的问题实际上在于您的 BitmapFromSource 方法。

您正在创建一个流，然后从该流创建一个位图，然后将流丢弃，然后尝试将位图保存到另一个流。但是， Bitmap 类的文档说：

> 您必须在位图的生命周期内保持流打开。

当您保存该位图时，该位图已经损坏，因为您已将原始流丢弃。

请参阅：http: [//msdn.microsoft.com/en-us/library/z7ha67kw](http://msdn.microsoft.com/en-us/library/z7ha67kw)

为了解决这个问题（记住我没有编写代码，更不用说测试了），在你的第一个代码块的第一个 for 循环中创建 MemoryStream，并将该内存流作为第二个参数传递给你的 BitmapFromSource 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:08:01.830

[调用 Graphics.DrawImage 时](https://stackoverflow.com/questions/9185494/securityexception-when-calling-graphics-drawimage)请参阅SecurityException，这会导致将[位图渲染到 ASP.NET OutputStream 时出现常见问题](http://www.west-wind.com/weblog/posts/2006/Oct/19/Common-Problems-with-rendering-Bitmaps-into-ASPNET-OutputStream)

# c# - 在一定数量的字符后拆分字符串

> ID：11741724
> 
> 赞同：0
> 
> 时间：2012-07-31T13:51:56.120
> 
> 标签：c#, string

如果字符串超过一定数量的字符（例如 100），我希望能够将字符串分成几个部分。这相对容易，但棘手的部分是我只想在空格后拆分它，这样它就不会切断某些单词，而是在空格字符上切断它。所以逻辑是 - 如果它超过〜95个字符，则将其拆分为下一个空格字符并继续循环执行。关于如何实现这一点的任何建议？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T13:55:15.153

使用覆盖`string.LastIndexOf`：[这个](http://msdn.microsoft.com/en-us/library/ms131439.aspx)

你可以打电话`mystring.LastIndexOf(' ', startIndex, endIndex)`。如果使用索引`0`和`100`，则可以获取前 100 个字符中的最后一个空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:43:14.433

`string.LastIndexOf`可能有效，但在我看来，你想要第 95 个字符之后的第一个空格，所以你可能会更好地使用`myString.IndexOf(' ', 95, myString.length - 95)`这些线或类似的东西。

例如，如果空间位于位置 101 而您这样做了`myString.LastIndexOf(' ', 0, 100)`，您将找不到正确的空间。

# silverlight - Silverlight 放大浏览器

> ID：11741727
> 
> 赞同：0
> 
> 时间：2012-07-31T13:52:03.883
> 
> 标签：silverlight, out-of-browser

是否可以在 Out of Browser 模式下使用整个 Silverlight 应用程序的缩放功能（CTRL+MouseWheel / 放大浏览器）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:55:26.383

您可以在*Application_Startup*中使用以下内容：

```
RootVisual = new WebBrowser() {Source = new Uri(Current.Host.Source, "../")}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:22:42.250

好的..我已经为“放大”和“缩小”按钮单击实现了此代码。

在按钮点击事件中：

```
commonwidth = commonwidth + (commonwidth * zoomPercent / 100) //For Zoom Out
commonwidth = commonwidth + (commonwidth * zoomPercent / 100) //For Zoom In 
```

然后调用这个方法：

```
 Private Sub ChangZoom()

            If Not fresult Is Nothing Then

                If fresult.Count() > 0 Then

                    Dim mainFrame As StackPanel

                    mainFrame = fresult(_currentPage)

                    Dim docBorder As Border

                    docBorder = mainFrame.Children(1)

                    Dim docImage As FrameworkElement

                    docImage = docBorder.Child

                    If Not docImage Is Nothing Then

                        Dim actualWidth As Double
                        Dim actualHeight As Double

                        actualWidth = commonwidth 'Me.ActualWidth - 30
                        actualHeight = Me.ActualHeight

                        Dim newHeight As Double

                        newHeight = actualWidth * docImage.Height / docImage.Width

                        docImage.Width = actualWidth
                        docImage.Height = newHeight

                        RenderResutlFrame(_currentPage)

                    End If

                End If

            End If

        End Sub

        Public Property ImageUrl As String Implements IDocumentViewer.ImageUrl
            Get
                Return _imageUrl
            End Get
            Set(ByVal value As String)
                _imageUrl = value

                'Me.Dispatcher.BeginInvoke(AddressOf OnInitialized)

            End Set
        End Property 
```

# testing - 前端测试：测试什么以及如何测试，使用什么工具？

> ID：11741738
> 
> 赞同：52
> 
> 时间：2012-07-31T13:52:38.177
> 
> 标签：testing, jasmine, frontend, ui-automation, casperjs

我一直在为我的 Ruby 代码编写测试，但作为一个前端开发人员，我显然有兴趣将它带入我为我的前端代码编写的代码中。我一直在玩很多不同的选择：

*   [卡斯珀JS](http://casperjs.org/)
*   [水豚 & Rspec](http://railscasts.com/episodes/257-request-specs-and-capybara)
*   [茉莉花](http://jasmine.github.io/)
*   黄瓜或只是 Rspec

人们使用什么进行测试？除此之外，人们还测试什么？只是 JavaScript？链接？形式？硬编码的内容？

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-11-13T12:55:26.300

几个月前我也有同样的问题，在与许多开发人员交谈并进行了大量研究之后，我发现了这一点。您应该对 JavaScript 进行单元测试，编写一小组 UI 集成测试，并避免使用记录和回放测试工具。让我更详细地解释一下。

首先，考虑[测试金字塔](http://martinfowler.com/bliki/TestPyramid.html). 这是 Mike Cohn 创建的一个有趣的类比，它将帮助您决定应该进行哪种测试。金字塔的底部是单元测试，它们是可靠的并且可以提供快速的反馈。这些应该是您的测试策略的基础，因此占据了金字塔的最大部分。在顶部，您有 UI 测试。这些是直接与您的 UI 交互的测试，例如 Selenium。尽管这些测试可能会帮助您发现错误，但它们的成本更高，并且反馈速度很慢。此外，根据您使用的工具，它们会变得非常脆弱，最终您将花费更多时间来维护这些测试，而不是编写实际的生产代码。中间的服务层包括不需要 UI 的集成测试。例如，在 Rails 中，

现在，回到你的问题。我发现我可以大大减少我的项目中的错误数量，这是一个用 Spring Roo (Java) 编写的带有大量 JavaScript 的 Web 应用程序，只需为 JS 编写足够的单元测试。在我的应用程序中，有很多用 JS 编写的逻辑，这就是我在这里测试的那种东西。我不关心页面的实际外观或动画是否按应有的方式播放。我测试我在 JS 中编写的模块是否会执行预期的逻辑，是否正确分配了元素类以及是否很好地处理了错误情况。对于这些测试，我一直在使用 Jasmine。这是一个很棒的工具。它很容易学习并且有很好的模拟能力，被称为间谍。[Jasmine-jQuery](https://github.com/velesin/jasmine-jquery)如果您使用 jQuery，它会添加更多强大的功能。特别是，它允许您指定固定装置，它们是 HTML 代码的片段，因此您不必手动模拟 DOM。我已将此工具与 maven 集成，这些测试是我的 CI 策略的一部分。

你必须小心 UI 测试，特别是如果你依赖像 Selenium 这样的记录/播放工具。由于 UI 经常更改，因此这些测试会不断中断，您将花费大量时间来确定测试是否真的失败或者它们是否已经过时。此外，它们没有像单元测试那样增加价值。由于它们需要一个集成的环境来运行，因此您通常喜欢在完成开发后才运行它们，此时修复的成本更高。

然而，对于冒烟/回归测试，UI 测试非常有用。如果您需要使这些自动化，那么您应该注意一些危险。**写你的测试，不要记录它们**。记录的测试通常依赖于自动生成的 xpath，这些 xpath 会因您对代码所做的每一个小改动而中断。我相信 Cucumber 是编写这些测试的一个很好的框架，你可以将它与 WebDriver 一起使用来自动化浏览器交互。**代码思考测试**。在 UI 测试中，您必须使元素更容易找到，这样您就不必依赖复杂的 xpath。在您通常不会经常使用的地方添加 class 和 id 元素。**不要为每个小的极端情况编写测试。**这些测试的编写成本很高，运行时间也很长。您应该专注于探索大部分功能的案例。如果您在这个级别编写了太多测试，您可能会测试您之前在单元测试中测试过的相同功能（假设您已经编写了它们）。

在我当前的项目中，我使用 Spock 和 Geb 编写 UI 测试。我发现这些工具很棒。它们是用 Groovy 编写的，更适合我的 Java 项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T15:36:57.957

有很多选择和工具。但他们的选择取决于您是拥有 Web UI 还是桌面应用程序？

假设您提到的工具是 Web UI。我建议 Selenium（又名 WebDriver）：[http ://seleniumhq.org/docs/](http://seleniumhq.org/docs/)

它支持多种语言（Ruby 在列表中）。它可以在各种浏览器上运行，它非常易于使用，并提供大量教程和提示。哦，当然，它是免费的 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-12T10:51:11.417

我虽然这篇文章得到了很多喜欢，但我会发布我对我的问题的回答，因为我现在确实编写了很多测试，并且你测试前端的方式现在已经发生了很大变化。

因此，在有限元测试方面，我花了很多时间将[karma](https://karma-runner.github.io/1.0/index.html)与[Jasmine](https://jasmine.github.io/2.0/introduction.html)一起使用，尽管 karma 可以很好地与 mocha 和 qunit 等其他测试套件配合使用。虽然这些都很棒，并且 karma 允许您直接与浏览器交互来运行测试。缺点是随着您的测试套件变大，它可能会变得非常慢。

所以最近我搬到了[Jest](http://facebook.github.io/jest/)，它的速度要快得多，如果你的写作反应应用程序，使用带有快照测试的[酶会给你很好的覆盖率。](http://airbnb.io/enzyme/)谈到覆盖范围 Jest 内置并设置了伊斯坦布尔覆盖范围，并且模拟非常易于使用。缺点是它没有在浏览器中进行测试，并且它使用了一种叫做[jsdom](https://github.com/tmpvar/jsdom)的东西，速度很快，但确实有一些麻烦。就我个人而言，我觉得这没什么大不了的，特别是当我通过 webpack/babel 编译我的代码时，这意味着跨浏览器的错误相当少而且相差甚远，所以如果你手动测试通常不是问题（而且 imo 你应该）。

就在 rails 堆栈中的工作而言，现在 webpacker gem 可用并且使用 npm 和 node 通常更例外，这很容易。我建议使用[nvm](https://github.com/creationix/nvm)来管理您的节点版本

虽然这不是严格测试，但我也建议使用 linting，因为这也会在您的代码中发现很多问题。对于 JS 我使用[更漂亮](https://prettier.io/)的[eslint](https://eslint.org/)和 scss/css 我使用[stylelint](https://stylelint.io/)

至于要测试什么，我认为 Carlos 谈到测试金字塔仍然是相关的，毕竟理论没有改变，只是工具而已。我还要补充一点关于测试的实用性，我总是会测试，但是到什么水平和覆盖范围将取决于项目。管理您的时间并花费数小时/数天测试一个生命周期较短的项目非常重要。更大/更长期的项目，更大的测试套件的好处显然更大。

无论如何，我希望这可以帮助那些看这个问题的人。

# excel - 可赎回/到期债券的彭博 Excel 函数

> ID：11741741
> 
> 赞同：1
> 
> 时间：2012-07-31T13:52:43.450
> 
> 标签：excel, excel-formula, finance, bloomberg

我正在尝试跟踪可能已到期或已被赎回的债券头寸。我在 Excel 中保留了一个小的未平仓头寸数据库。如果债券已被调用/到期，是否有 Bloomberg API 函数可以返回布尔值 (T/F)？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:25:22.713

如果您有彭博终端，这些类型的字段很容易找到。选择您的安全并转到`FLDS`。然后，您可以搜索此证券的相关字段。可以在 Excel 中（使用`=BDP(ticker,field)`）或通过 API（使用 ）访问任何字段`"ReferenceDataRequest"`。

对于您提到的字段，您可以尝试：

*   `CALLABLE`- 债券是否实际上是可赎回的
*   `CALLED`- 债券是否被赎回
*   `CALLED_DT`- 当债券被调用时

*   `MATURITY`- 债券的到期日（AFAIK，无法将债券是否到期作为布尔值，但将其与日期进行比较以确定到期日是否在未来应该相对简单。）

但是，听起来您正在尝试确定任何给定的债券是否仍然“有效”。棘手的部分是可替代债券 - 您可以使用：

*   `FUNGED_CUSIP`- 该债券所转换成的债券的 CUSIP（因此，如果没有被转换，则为空白）......但获得它所转换的日期的唯一方法是从`DES_NOTES`. 这些可以在`DES`页面上轻松查看，但如果您在 Excel 中或通过 API 获取它们，则必须解析文本以获取融资日期。

# .net - 密码字典查找

> ID：11741742
> 
> 赞同：1
> 
> 时间：2012-07-31T13:52:43.877
> 
> 标签：.net, dictionary, passwords

我有一个 .Net 应用程序，它需要在密码验证过程中实现字典查找。我可以轻松地使用像 NHunspell 这样的工具来查找仅是字典单词的密码。但是，我找不到查找包含字典查找词的密码的方法，例如 BOAT@123，其中 BOAT 是字典词。

有任何想法吗？

# c - 在查看核心转储时，我们如何丢弃目标文件中的符号并重新使用它？

> ID：11741746
> 
> 赞同：0
> 
> 时间：2012-07-31T13:52:48.400
> 
> 标签：c, linux, gnu, strip

要求是使用 GNU strip 从目标文件中丢弃符号，并保存符号。稍后，如果此目标文件有任何核心转储，我们必须包含符号以检查核心转储。我们怎样才能完成这项任务？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:55:16.457

简单的解决方案是在剥离之前保留二进制文件的副本。然后您可以使用未剥离的版本来调查核心转储，因为除了剥离的符号信息之外，这些二进制文件将是相同的。

因此，如果您有 FOO 二进制文件，请执行以下操作：

```
 cp FOO FOO.unstripped
  strip FOO 
```

然后运行 ​​FOO，当您调查 coredump 时，使用 FOO.unstripped。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:26:48.707

这里讨论了获取“符号文件”的不同方法： [如何在构建目标之外生成 gcc 调试符号？](https://stackoverflow.com/questions/866721/how-to-generate-gcc-debug-symbol-outside-the-build-target)

实际上，链接的问题与这个问题非常相似。

# mysql - 一对一关系中的父实体和子实体

> ID：11741749
> 
> 赞同：0
> 
> 时间：2012-07-31T13:52:52.283
> 
> 标签：mysql, sql, database-design, data-modeling

参与 1:0+ 关系的实体是父实体。

那是对的吗？

更新：

![提供的图片](../Images/5a60a829d9c81ff8776ddb249751b222.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:56:04.600

不，这是错误的。

在 1:1 的关系中，您只有一张桌子。没有区别。这些属性*必须*适用于这两种类型的实体。

但是，在可选的 1:1 关系中，通常称为 1:0+ 或“一对零或一”关系，孩子将是可选的，而不是父母。

简而言之，*总会*有父母。

* * *

在您的图像中，有一个可选的从员工到笔记本的一对一，即员工可能有零个笔记本或一个笔记本。笔记本与员工之间也存在一对一的关系，即笔记本必须只有一名员工作为所有者。

这是一个图表，可以帮助您理解：

![鱼尾纹](../Images/5c2b063eb52ed3c71ddb1f8b5ce16cde.png)

# c# - switch 语句中的 ASCII.GetBytes 错误 - 无法转换对象类型

> ID：11741751
> 
> 赞同：0
> 
> 时间：2012-07-31T13:53:01.577
> 
> 标签：c#, visual-studio-2010

我有以下 C# 代码-

```
switch (Convert.ToInt32(Encoding.ASCII.GetBytes(grdGrading.Text.Trim()))) 
```

`grdGrading`是一个数据网格。

我目前收到此错误 -`Unable to cast object of type 'System.Byte[]' to type 'System.IConvertible'.`

关于是什么原因的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:55:34.340

`Convert.ToInt32()`不适用于字节数组。假设您将它传递给它一个`object`实现`IConvertible`. 改为使用`BitConverter.ToInt32()`。

但是，正如@AVD 所指出的，您真正想要使用的是`Int32.TryParse()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:55:30.903

如果`grdGrading.Text`属性返回`digits (numeric value)`，则使用`int.Parse`or`int.TryParse`方法解析字符串数据。

```
int value;

if(int.TryParse(grdGrading.Text.Trim(),out value))
{
  //code
} 
```

# jquery - 花式盒问题。重复图像

> ID：11741760
> 
> 赞同：0
> 
> 时间：2012-07-31T13:53:30.140
> 
> 标签：jquery, html, fancybox

使用模块fancybox，我尝试在模式页面（fancybox）中显示照片库。

问题是图像显示了 11 次，我不知道为什么。我已经搜索并且我使用了正确的语法。

这是我的代码：

查询

```
$(".testGatorade[rel=group1]").fancybox({
            'speedIn'        :    200,
            'speedOut'        :    200,
            'overlayShow'    :    false,
            'modal'          : true,
            'showCloseButton' : true,
            'titleShow'       : true,
            'titlePosition'   : 'over',
            'titleFormat'        : function(title, currentArray, currentIndex, currentOpts) {
                return '<span id="fancybox-title-over">Image ' + currentIndex + ' / ' + currentArray.length + (title.length ? ' &nbsp; ' + title : '') + '</span>';
            }
        }); 
```

HTML

```
<div id="slider1">
                <a class ="testGatorade" href = "images/eagle.jpg" rel="group1" title = "Test de titre">
                    <img src = "images/eagle.jpg" width = "300" height = "300"/>
                </a>
                <a class ="testGatorade" href = "images/ring.jpg" rel="group1"></a>
                <a class ="testGatorade" href = "images/tarantula.jpg" rel="group1"></a>
            </div> 
```

感谢您的帮助，

我从 4 天就开始工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-17T12:54:39.057

我通过调整jQuery选择器解决了fancybox中的重复图像（我刚刚修改了选定的类名）。[更多关于fancybox使用的实用信息](http://fancyapps.com/fancybox/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-11T20:22:15.453

我有一个类似的问题，在我的情况下，它是由不符合标准的 a-tag 使用引起的。我在 a-tag（divs 和 imgs）中有非内联标签，这应该可以通过 html5-standards（参见此处：[http](http://html5doctor.com/block-level-links-in-html-5) ://html5doctor.com/block-level-links-in-html-5 ） ，但在此之前无效。Mozilla 和 Chrome 通过复制/相乘 a-tag 将其呈现为符合标准的 a-tag。（您可以使用 DOM Inspector 进行验证）

重复的 a-tags 意味着您的幻想库中的重复图像......

解决方案是使用符合标准的 a-tags，而不是这样：

```
<div>
 <a href="..." class="fancybox" rel="gallery1">
  <img src="..." alt="..." />
  <div class="overlay">
   <div class="overlay_title">...</div>
   <div class="overlay_text"><p>...</p></div>
  </div>
 </a>
</div> 
```

用这个：

```
<div>
 <a href="..." class="fancybox" rel="gallery1" style="position: absolute; top: 0px; width: 100%; height: 100%; z-index: 100;">
  <span>&nbsp;</span>
 </a>
 <img src="..." alt="..." />
 <div class="overlay">
  <div class="overlay_title">...</div>
  <div class="overlay_text"><p>...</p></div>
 </div>
</div> 
```

也许我可以帮助解决这个...

# javascript - 包含所有用户操作的业务逻辑的 Javascript 配置文件

> ID：11741761
> 
> 赞同：1
> 
> 时间：2012-07-31T13:53:46.663
> 
> 标签：javascript, configuration-files

我的问题可能会让你有点困惑。

实际上，我正在互联网上寻找一种标准技术来执行以下操作：

1.  编写一个包含所有业务逻辑的配置文件（JSON 或 .js）。
2.  Javascript 将加载该配置文件，它必须执行配置文件中指定的所有操作。

示例配置文件

```
"loginConfig":
[
    "#Submit-button",
    "click",
    {
        "perform": "LoginAction",
        "username": "#input-username",
        "password": "#input-password"
    }
] 
```

我的要求是，一个 javascript 库应该加载这个配置文件，它必须执行以下操作

1.  按下“提交”按钮时
2.  从“#input-username”和“#input-password”读取输入（文本框）值
3.  并使用从步骤 2 中读取的值调用函数“LoginAction”。

我编写了一个简单的 .js 文件来读取此配置文件并执行与上述相同的操作，但我想知道这种方法（概念）是否已经可用。

**为什么需要它？**

在我们的 Web 开发中，大多数时候我们会不断重复相同的 JS 代码来执行以下操作：

1.  点击 button1 启用 textbox1
2.  单击按钮2禁用文本框2
3.  点击链接1打开一些东西
4.  ETC。，

**为什么我们没有一些通用的 JS 库通过读取 Config 文件来完成上述基本工作？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:15:25.997

拥有 JSON 格式的配置文件是个好主意。

将 JSON 文件作为“所有业务逻辑”的定义需要 JavaScript 框架，因为规则可能非常复杂。不是每个人都使用相同的框架，因此每个应用程序都会有明显的限制。没有一刀切的解决方案，但在这方面正在取得进展。

[Sencha 的 EXT 框架](http://www.sencha.com/products/extjs/)就是一个很好的例子。它的很多功能都可以在 JSON 配置文件中定义，并且它确实内置了很多您想要做的事情，但它仍然需要您编写自己的代码来支持您定义的业务逻辑。

# php - PHP中的Unicode Json编码问题

> ID：11741764
> 
> 赞同：1
> 
> 时间：2012-07-31T13:53:59.803
> 
> 标签：php, json

在我的数据库中，它有一些 unicode 字符，当我：

```
$result=mysql_query($query) or die(mysql_error());

while ($row = mysql_fetch_assoc($result)) {
$response[] = $row;
}
echo json_encode($response); 
```

结果是

```
[{
    "id": "151",
    "titlenews": "iPad2 ? iPhone Mini ????????????? ???????????????? Samsung Galaxy Tab",
    "photo": "ipad_1294990020.jpg"
}, {
    "id": "153",
    "titlenews": "???????????????????????? iPhone 5 ??????????????????? Apple",
    "photo": "iphone-5_1294996201.jpg"
}, {
    "id": "154",
    "titlenews": "Android ??????????????????????????????????? ????????????????????????????????????????????????????? 2010",
    "photo": "android_1295234852.jpg"
}] 
```

为什么它有“？”，它应该编码为任何表示unicode的特殊字符。

感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:59:13.867

评论中的解决方案（由 Savartona 提供）：

```
mysql_set_charset("utf8", $con); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:03:31.930

This is what I use

```
function myencode(&$item,$key)
{
    $item=utf8_encode($item);
}

function my_json_encode($arr)
{
    if(is_array($arr))
    {
        array_walk_recursive($arr,myencode);
        return json_encode($arr);
    }
    else
    {
        return json_encode(array());
    }
} 
```

And then to decode

```
function my_json_decode($json)
{
    return json_decode(safeJSON_chars(stripslashes($json)),TRUE);
} 
```

# javascript - 等待属性加载

> ID：11741770
> 
> 赞同：0
> 
> 时间：2012-07-31T13:54:33.443
> 
> 标签：javascript

我只是想知道在 Javascript 中是否有可能发生这样的事情。

```
var Module = function(){
    var _ajaxLoaded = false;
    var _property = null;
    return {
        init : function(){
            // starting ajax request here
            $.getJSON('requesturl', function(data) {
                _property = data.property;
                _ajaxLoaded = true;
            });
        },
        property : function(){
            if(_ajaxLoaded){
                return _property;
            }
            // stop processing here and wait till  ajax request is finished

            // loop till ajax is finished
            return this.property();
        }
    }

 }();

Module.init();
alert(Module.property()); 
```

我知道可以在 init 函数中有一个回调并等待它。但是这个例子可以让我只要求财产而不知道它是否在那里。

- 编辑 -

我很确定我应该在 init 函数中使用回调。它只是一个更好的编码结构。但我真的很想知道如果我没有其他可能的话，是否有可能做到这一点。我添加了以下行：

```
 // loop till ajax is finished
      return this.property(); 
```

这会以某种方式工作，还是因为Javascript甚至没有时间处理ajax调用（单线程？）而导致无限循环？还没有测试它。

毫无疑问，这是糟糕的编码，我不会使用它，但我只是好奇。

# makefile - VPATH 不适用于 Makefile 规则

> ID：11741774
> 
> 赞同：0
> 
> 时间：2012-07-31T13:54:38.047
> 
> 标签：makefile, vpath

我在 Makefile 中添加了另一条规则，以尝试构建一个 C 共享库，该库使用 SWIG 使用 JNI 为 Java 包装函数

附加规则如下所示（基本上来自 SWIG java 示例之一）

```
java: $(program_C_SRCS)
    $(SWIG) -java $(SWIGOPT) $(INTERFACEPATH)
    $(CC) -c $(CFLAGS) $(JAVACFLAGS) $(program_C_SRCS) $(ISRCS) $(CPPFLAGS) $(JAVA_INCLUDE)
    $(JAVALDSHARED) $(CFLAGS) $(program_C_OBJS) $(IOBJS) $(JAVA_DLNK) $(LDFLAGS) -o $(JAVA_LIBPREFIX)$(TARGET)$(JAVASO)
    javac *.java 
```

我遇到的问题是我的 VPATH 似乎不再适用于 *.c 文件

我注意到此规则导致所有 .c 文件编译为对 gcc 的一次调用，而不是对 gcc 的单独调用以编译每个 .o 文件

我以前没有任何 JNI 东西的编译规则如下所示：

```
.PHONY: all clean

all: $(program_DEBUG_NAME) $(program_RELEASE_NAME)

# original rule to build library in src dir (no longer inc. in all)
$(program_NAME): $(program_C_OBJS)
    $(LINK.c) -shared -Wl,-soname,$@ $^ -o $@

# new rules to build debug/release libraries and place them in relevant build
# dirs
$(program_DEBUG_NAME): $(DEBUG_OBJS)
    $(DEBUG_LINK.c) -shared -Wl,-soname,$@ $^ -o $(BUILD_DIR)/debug/$@

$(program_RELEASE_NAME): $(RELEASE_OBJS)
    $(RELEASE_LINK.c) -shared -Wl,-soname,$@ $^ -o $(BUILD_DIR)/release/$@

# rule to build object files (replaces implicit rule)
$(BUILD_DIR)/debug/%.o: %.c
    $(DEBUG_LINK.c) $< -c -o $@

$(BUILD_DIR)/release/%.o: %.c
    $(RELEASE_LINK.c) $< -c -o $@ 
```

这些与VPATH一起工作没问题

我的 VPATH 语句如下所示：

```
VPATH = ../../pulse_IO/src ../../../g2/src 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:13:36.257

看看你的规则：

```
java: $(program_C_SRCS)
    ...
    $(CC) -c $(CFLAGS) $(JAVACFLAGS) $(program_C_SRCS) ...
    ... 
```

Suppose `program_C_SRCS` is `foo.c`, and the path is `somewhere/foo.c`. Without VPATH, this rule doesn't run at all because Make can't find `foo.c`. With VPATH, Make finds it, and knows that the real prereq is `somewhere/foo.c`. But you have `$(program_C_SRCS)` in your rule:

```
java: somewhere/foo.c
    ...
    $(CC) -c $(CFLAGS) $(JAVACFLAGS) foo.c ...
    ... 
```

This fails because there is no `foo.c` (locally).

Try this:

```
java: $(program_C_SRCS)
    ...
    $(CC) -c $(CFLAGS) $(JAVACFLAGS) $^ ...
    ... 
```

(The use of automatic variables like `$^` is the reason your previous rules worked.)

# database - 表示用户之间连接的数据库结构

> ID：11741776
> 
> 赞同：1
> 
> 时间：2012-07-31T13:54:43.103
> 
> 标签：database, database-design, connection

在我尝试构建的应用程序中，会有用户（存储在用户表中），并且用户可以相互“连接”（例如成为 Facebook 上的朋友）。我要做的是构建用于存储这些连接的数据结构。数据将主要用于为用户呈现“连接”（例如 Facebook 上的朋友）表。到目前为止，我遇到了两种不同的方法：

1.  为每个用户创建一个表，其中包含他所有的连接（例如朋友）。
2.  有一张表代表网站中的所有连接（例如：

[第 1 行 = 约翰-凯尔]

[第 2 行 = 凯尔鲍勃]

[第 3 行 = Lilli-John]

ETC....）。

我的问题是 - 哪一个会更有效（主要是在查询时间方面，但也在大小方面）。我猜第二个的大小会小得多，但会花费更多时间来查询......你觉得呢？哪个更好用？如果您知道哪种模型使用更广泛（尤其是 Facebook、Instagram 等流行网站），那也会有很大帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:20:00.907

除了性能之外，不采用第一种方法有充分的理由，但即使是性能也不太可能从这种方法中获得：

1.  在许多表中，DBMS 首先需要找到正确的表，然后才能搜索它。
2.  只需一次索引查找即可搜索一张表。

因此，您可以***搜索 table + small index seek***而不是***一个大索引 seek***。查找表不可能比大 B-Tree 下降的“上半部分”快，而且许多单独的表可能会导致很多“松弛”（即没有完全填满的页面），从而降低缓存效率. 由于这两个原因，（2）可能更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:57:03.727

一张包含所有连接的桌子。每行都有用户 a ，用户 b ，连接类型。其中连接类型是对另一个列出连接类型的表的引用。添加适当的索引。

# c# - 单个属性绑定到 WPF 中的多个控件

> ID：11741794
> 
> 赞同：0
> 
> 时间：2012-07-31T13:55:33.943
> 
> 标签：c#, wpf, converter

我有一个由三个字母和两个数字组成的属性，例如“ABC 12”。我的项目的要求要求 UI 将其分为三个字母组合的 ComboBox 和数字的 TextBox。我可以很容易地使用转换器解析出我需要的字符串部分。

我的问题是是否有办法在我的转换器中实现“ConvertBack”逻辑，以便我可以根据两个不同控件中的值重置属性。

我的xml：

```
<ComboBox IsEnabled="{Binding EditMode}" ItemsSource="{Binding AbbrevsList}"      
          DisplayMemberPath="SelectedAbbrev" SelectedValuePath="Abbrev" 
          SelectedValue="{Binding Row.Code, Converter=CodeAlphaConverter, 
                          UpdateSourceTrigger=PropertyChanged}" />
<TextBox TextAlignment="Left">
     <TextBox.Text>
          <Binding Path="Row.Code" Converter="CodeNumericConverter" 
                   UpdateSourceTrigger="LostFocus">
          </Binding>
      </TextBox.Text>
</TextBox> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:05:24.270

由于 WPF 不允许您绑定转换器参数，因此您可能必须切换方法。SO上的其他答案不是使用转换器，而是指向更改您的视图模型以将逻辑内置到两个属性中并绑定到这些属性，或者不是将单个值传递给转换器，而是传递整个对象。

# php - PHP如何将数组的每个元素转换为时间戳？

> ID：11741796
> 
> 赞同：0
> 
> 时间：2012-07-31T13:55:35.510
> 
> 标签：php, arrays, strtotime, timestamp, array-map

我有一个二元素数组 - $time

回声 var_dump($time) ：

```
array
  0 => 
    array
      'otw' => string '12:00' (length=5)
      'zam' => string '15:00' (length=5)
 1 => 
    array
      'otw' => string '16:00' (length=5)
      'zam' => string '18:00' (length=5) 
```

如何将 $time 数组的每个元素转换为时间戳？

echo var_dump($time) 应该如下所示：

```
array
  0 => 
    array
      'otw' => timestamp 'timestampvalue' (length=)
      'zam' => timestamp 'timestampvalue' (length=)
 1 => 
    array
      'otw' => timestamp 'timestampvalue' (length=)
      'zam' => timestamp 'timestampvalue' (length=) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:00:57.883

只需使用[array_walk_recursive](http://php.net/array_walk_recursive)

```
array_walk_recursive($your_array, function(&$element) {
  // notice: this will use the date of today and add the time to it.
  $element = strtotime($element);
  // $element = strtotime($element, 0); // use 1.1.1970 as current date
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:01:53.803

或使用 array_map()

```
function arrayToTimestamps($array)
{
    return array(strtotime($array['otw']), strtotime($array['zam']));
}
$newArray = array_map('arrayToTimestamps', $array); 
```

# ruby-on-rails-3 - Rails 3 中的淘汰赛

> ID：11741798
> 
> 赞同：1
> 
> 时间：2012-07-31T13:56:00.090
> 
> 标签：ruby-on-rails-3, knockout.js

如果我使用的是使用资产管道编译所有 Javascript 的 rails 3，这是否意味着我的整个应用程序只能有一个 Knockout 视图模型？如果没有，我如何指定哪个视图模型与哪个视图绑定？在教程代码中，看起来每页绑定了一个视图模型，但这在 Rails 中不起作用，因为所有 JS 都是在第一页加载时加载的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:01:49.357

不，您不需要在每个页面上都包含所有 javascript！这是一个非常糟糕的主意。

将javascript限制为单个页面的方法有很多，您应该选择一种：
[方法1](https://stackoverflow.com/questions/3437585/best-way-to-add-page-specific-javascript-in-a-rails-3-app)
[方法2](https://stackoverflow.com/questions/6167805/using-rails-3-1-where-do-you-put-your-page-specific-javascript-code)
[方法3](http://xn--ncoder-9ua.dk/blog/2012/02/page-specific-javascript-in-rails-3/)

请，请，请不要尝试在每个页面上加载所有 javascript。

**更新**（在您下面的评论之后）：

我认为您在这里混淆了一些不同的事情。

首先，即使您将所有 javascript 编译成单个 gzipped/uglified 文件，这仍然不会强制您为整个应用程序使用一个淘汰视图模型。该文件可以包含多个视图模型。他们甚至不需要互相了解。

其次，rails 管道的工作方式是将相关或依赖的 javascript 文件连接在一起。这样做是为了减少浏览器为获取每个页面所需的 javascript 而必须发出的*请求数。*这并不*一定*意味着您的所有 javascript 都成为一个文件。只是*每个页面*的javascript成为一个文件。有关更多信息，请查看[Rails Asset Pipeline 文档](http://guides.rubyonrails.org/asset_pipeline.html)，它很好地解释了它的工作原理以及如何正确使用它。

第三，这些都不意味着您需要编写所有的 javascript，就好像它是一个文件一样。事实上，这是一个坏主意。您应该按功能将您的 javascript 分成相关文件。这使它们可以重复使用，并简化了开发工作。

# ruby-on-rails - Rails 未解析有效的 YAML 文件

> ID：11741799
> 
> 赞同：8
> 
> 时间：2012-07-31T13:56:01.110
> 
> 标签：ruby-on-rails, web-applications, yaml

我正在尝试使用我的 Rails (3.2.7) 应用程序解析以下 YAML

```
---
main-menu:
  - mitem: Test1
    controller: user
    action: test
  - mitem: Test
    controller: user
    action: test2
    - mitem: Test3
      controller: user
      action: test 
```

不幸的是，当我加载我的文件时

```
 require "yaml"
    @menu = YAML.load_file(file) 
```

我收到一个错误

```
Psych::SyntaxError in User#test

Showing /srv/http/fiss/app/views/layouts/application.html.haml where line #12 raised:

(/srv/http/fiss/app/assets/yaml/menu.yaml): did not find expected key while parsing a     block mapping at line 6 column 5 
```

我是 Rails（和 YAML）的新手，但是我已经用[YAML Lint](http://yamllint.com/)检查了代码，显然 YAML 代码是有效的。这是什么原因造成的？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-07-19T18:52:02.363

最好的第一件事是通过[http://yamllint.com/运行您的 yaml 文件](http://yamllint.com/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-31T15:47:45.760

尝试

```
main-menu:
  - mitem: Test1
    controller: user
    action: test
  - mitem: Test
    controller: user
    action: test2
    children:
      - mitem: Test3
        controller: user
        action: test 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T15:38:05.850

你有一个缩进问题。你的意思是

```
main-menu:
  - mitem: Test1
    controller: user
    action: test
  - mitem: Test
    controller: user
    action: test2
  - mitem: Test3
    controller: user
    action: test 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-03T01:28:43.423

检查您的 YAML，您必须在键值之前有任何额外或更少的空格，这对我有帮助。

# wix - 无法将 SQL Server 2008 R2 作为 WIX 项目中的功能先决条件安装

> ID：11741803
> 
> 赞同：1
> 
> 时间：2012-07-31T13:56:09.190
> 
> 标签：wix, custom-action, prerequisites, sql-server-2008r2-express

我们有一个需要 SQL Server 2008 R2 Express 的 WinForms 项目。该应用程序使用 MSI 安装程序和 WIX 创建的 Bootstrapper 可执行文件进行部署。所以我们需要从我们的安装程序中运行 SQL Server 安装程序。

WIX 项目的功能很少，其中只有一个需要 SQL Server 2008 R2 Express。Bootstrapper 安装程序安装 .NET 3.5 SP1、.NET 4 和 Windows Installer 4.5，并使用 MSBuild GenerateBootstrapper 任务创建。我们使用带有嵌入式 SP1 和英文本地化的 SQL Server 2008 R2 Express，安装程序文件 SQLEXPR_x86_ENU.exe 取自[http://www.microsoft.com/en-us/download/details.aspx?id=26729](http://www.microsoft.com/en-us/download/details.aspx?id=26729)。

当用户选择需要 SQL Server 的功能时，我们会安排一个自定义操作来运行带有参数的 SQLEXPR_x86_ENU.exe： /QS /ACTION=Install /ENU /ERRORREPORTING=0 /SQMREPORTING=0 /IACCEPTSQLSERVERLICENSETERMS /FEATURES=SQL /INSTANCENAME=ASSET_BANK /HIDECONSOLE /ADDCURRENTUSERASSQLADMIN /SAPWD=[SqlPassword] /SQLSVCACCOUNT="[WIX_ACCOUNT_LOCALSYSTEM]" /SECURITYMODE=SQL /SQLCOLLATION=Latin1_General_CI_AS 此自定义操作安排在安装程序执行序列的 InstallInitialize 操作之前。

当上述自定义操作启动时，它会在 SQL Server 安装程序的 ExecuteStandardTimingsWorkflow 操作上挂起几分钟，然后失败。当我从 CMD 运行相同的命令时，一切正常。

附上日志文件。请帮助我们解决这个问题。

Summary_ComponentUpdate.log：

```
Overall summary:
  Final result:                  Failed: see details below
  Exit code (Decimal):           -2068052398
  Exit facility code:            1212
  Exit error code:               1618
  Exit message:                  Failed: see details below
  Start time:                    2012-07-31 06:42:11
  End time:                      2012-07-31 06:48:58
  Requested action:              ComponentUpdate
  Log with failure:              C:\Program Files (x86)\Microsoft SQL Server\100\Setup Bootstrap\Log\20120731_064129\WatsonX86_Cpu32_1_ComponentUpdate.log
  Exception help link:           http://go.microsoft.com/fwlink?LinkId=20476&ProdName=Microsoft+SQL+Server&EvtSrc=setup.rll&EvtID=50000&ProdVer=10.50.2500.0

Machine Properties:
  Machine name:                  TEST-PC
  Machine processor count:       1
  OS version:                    Windows 7
  OS service pack:               Service Pack 1
  OS region:                     United States
  OS language:                   English (United States)
  OS architecture:               x64
  Process architecture:          32 Bit
  OS clustered:                  No

Package properties:
  Description:                   SQL Server Database Services 2008 R2
  ProductName:                   SQL Server 2008 R2
  Type:                          RTM
  Version:                       10
  Installation location:         c:\935b38da99e6817b615ea738\x86\setup\
  Installation edition:          EXPRESS

  Slipstream:                    True
  SP Level                       1

User Input Settings:
  ACTION:                        ComponentUpdate
  CONFIGURATIONFILE:             
  ENU:                           True
  FARMACCOUNT:                   <empty>
  FARMADMINPORT:                 0
  FARMPASSWORD:                  *****
  HELP:                          False
  INDICATEPROGRESS:              False
  PASSPHRASE:                    *****
  PID:                           *****
  QUIET:                         False
  QUIETSIMPLE:                   True
  UIMODE:                        AutoAdvance
  X86:                           False

  Configuration file:            C:\Program Files (x86)\Microsoft SQL Server\100\Setup Bootstrap\Log\20120731_064129\ConfigurationFile.ini

Detailed results:
  Feature:                       SQL
  Status:                        Skipped
  MSI status:                    Passed
  Configuration status:          Passed

Rules with failures:

Global rules:

There are no scenario-specific rules.

Rules report file:               C:\Program Files (x86)\Microsoft SQL Server\100\Setup Bootstrap\Log\20120731_064129\SystemConfigurationCheck_Report.htm 
```

WatsonX86_Cpu32_1_ComponentUpdate.log：

```
=== Verbose logging started: 7/31/2012  6:42:39  Build type: SHIP UNICODE 5.00.7601.00  Calling process: c:\935b38da99e6817b615ea738\x86\setup100.exe ===
MSI (c) (68:54) [06:42:39:853]: Resetting cached policy values
MSI (c) (68:54) [06:42:39:853]: Machine policy value 'Debug' is 0
MSI (c) (68:54) [06:42:39:853]: ******* RunEngine:
           ******* Product: c:\935b38da99e6817b615ea738\x86\redist\watson\dw20shared.msi
           ******* Action: 
           ******* CommandLine: **********
MSI (c) (68:54) [06:42:39:853]: Client-side and UI is none or basic: Running entire install on the server.
MSI (c) (68:54) [06:42:42:864]: Failed to grab execution mutex. System error 258.
MSI (c) (68:54) [06:42:42:864]: Cloaking enabled.
MSI (c) (68:54) [06:42:42:864]: Attempting to enable all disabled privileges before calling Install on Server
MSI (c) (68:54) [06:42:42:864]: Incrementing counter to disable shutdown. Counter after increment: 0
MSI (c) (68:54) [06:42:42:864]: Decrementing counter to disable shutdown. If counter >= 0, shutdown will be denied.  Counter after decrement: -1
MSI (c) (68:54) [06:42:42:864]: MainEngineThread is returning 1618
=== Verbose logging stopped: 7/31/2012  6:42:42 === 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:55:32.430

您不能从另一个 .msi 安装 .msi。这就是 1618 错误所说的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-17T08:23:45.213

实际上，此问题可能是由 SQL Server 安装程序包引起的。从 SQL Server 2008 R2 开始，有一个众所周知的[SQL Server 设置问题](http://connect.microsoft.com/SQLServer/feedback/details/741476/sql-server-2012-express-setup-issue/)。当您在 MSI 包中启动 SQL Server 安装程序时，SQL 安装程序会尝试停止 Msiexec 进程，但父 MSI 包不允许这样做。因此 SQL Server 安装程序将挂起。正如 LucID 已经提到的，一种解决方法是使用异步自定义操作（作为单独的进程运行）启动 SQL Server 安装程序，或者创建一个 EXE 引导程序安装包，该安装包首先启动 SQL Server 安装程序，然后安装 MIS 包.

我希望这将有助于未来面临同样问题的用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T15:09:15.077

实际上这是 SQL Server 2008 R2 本身的问题。我使用相同的 WIX 项目成功安装了 SQL Server 2005。看起来像 Windows Installer 4.5 和 SQL Server 的链接 msi 的问题 :(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-07T15:39:06.030

**我的案例：**使用 WiX 创建的 msi 安装程序。SQL Server Express 2008 R2 SP1 安装程序是通过 C# 自定义操作从我的安装程序中启动的。自定义操作是从命令行启动 sql server 安装程序。它在 Windows Server 2008、Windows 7 甚至 Windows XP 中运行良好。但是，在 Windows 8 中，它给出了兼容性

我将安装程序更新为 SQL Server 2008 R2 SP2。那时它开始卡在 ExecuteStahdardTimingsWorkflow 没有任何进展。

查看 %ProgramFiles%\Microsoft SQL Server\100\Setup Bootstrap\Log 揭示了下面的内容，它给了我一个线索，即它无法超越 msiexec.exe (Windows Installer) 服务。

**有什么帮助（有点残酷）：**在自定义操作中添加了一段代码，用于搜索 Windows Installer 服务进程 ID 并使用 taskkill /F /PID xxxxx 明确杀死它（停止没有帮助！）

```
2013-10-07 13:17:44 Slp: Completed Action: InitializeMsiAction, returned True
2013-10-07 13:17:44 Slp: ----------------------------------------------------------------------
2013-10-07 13:17:44 Slp: Running Action: MsiTimingAction
2013-10-07 13:17:44 Slp: ----------------------------------------------------------------------
2013-10-07 13:17:44 Slp: Running Action: Install_SqlSupport_Cpu64_Action
2013-10-07 13:17:44 Slp: Sco: Attempting to create base registry key HKEY_LOCAL_MACHINE, machine 
2013-10-07 13:17:44 Slp: Sco: Attempting to open registry subkey 
2013-10-07 13:17:44 Slp: Sco: Attempting to open registry subkey SOFTWARE\Microsoft\VisualStudio\9.0
2013-10-07 13:17:44 Slp: Sco: Waiting for service 'msiserver' to accept the stop request.
2013-10-07 13:17:44 Slp: Sco: Returning service status Running
2013-10-07 13:17:49 Slp: Sco: Returning service status Running
2013-10-07 13:17:54 Slp: Sco: Returning service status Running
....
2013-10-07 13:20:39 Slp: Sco: Returning service status Running
2013-10-07 13:20:44 Slp: Sco: Returning service status Running 
```

# java - Java - 文件到字节数组 - 快速一

> ID：11741804
> 
> 赞同：2
> 
> 时间：2012-07-31T13:56:14.543
> 
> 标签：java

我想将文件读入字节数组。所以，我正在阅读它：

```
 int len1 = (int)(new File(filename).length());
    FileInputStream fis1 = new FileInputStream(filename);
    byte buf1[] = new byte[len1];
    fis1.read(buf1); 
```

但是，它真的很慢。谁能告诉我一种非常快速的方法（可能是最好的方法）将文件读入字节数组。如果需要，我也可以使用 java 库。

编辑：有没有更快的基准（包括库方法）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-31T14:03:16.137

It is not very slow, at least there is not way to make it faster. BUT it is wrong. If file is big enough the method `read()` will not return all bytes from fist call. This method returns number of bytes it managed to read as return value.

The right way is to call this method in loop:

```
 public static void copy(InputStream input,
      OutputStream output,
      int bufferSize)
      throws IOException {
    byte[] buf = new byte[bufferSize];
    int bytesRead = input.read(buf);
    while (bytesRead != -1) {
      output.write(buf, 0, bytesRead);
      bytesRead = input.read(buf);
    }
    output.flush();
  } 
```

call this as following:

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
copy(new FileInputStream(myfile), baos);
byte[] bytes = baos.toByteArray(); 
```

Something like this is implemented in a lot of packages, e.g. `FileUtils.readFileToByteArray()` mentioned by @Andrey Borisov (+1)

**EDIT**

I think that reason for slowness in your case is the fact that you create so huge array. Are you sure you really need it? Try to re-think your design. I believe that you do not have to read this file into array and can process data incrementally.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-31T13:58:27.443

apache commons-io **FileUtils.readFileToByteArray**

# javascript - ASP.NET MVC 4 - 部分视图和 Ajax.Actionlink

> ID：11741806
> 
> 赞同：2
> 
> 时间：2012-07-31T13:56:25.073
> 
> 标签：javascript, ajax, asp.net-mvc-4, partial-views

我正在尝试在我的主页上放置一些呈现部分视图的链接 - 我想在用户单击链接时显示数据库中的一些信息：该链接应替换为同一页面上的文本。我遵循了一个教程，但我无法让它在我的项目中工作。这是我所拥有的：

我的主页/索引视图：

```
<div id="NeZaman">
@Ajax.ActionLink("Ne Zaman Gelcekmiş?", "NeZaman", new AjaxOptions {
                                        UpdateTargetId="NeZaman",
                                        InsertionMode = InsertionMode.Replace,
                                        HttpMethod="GET" })
</div> 
```

我的家庭控制器：

```
 private CaglaContext db = new CaglaContext();

    public PartialViewResult NeZaman()
    {
        var neZaman = db.Caglas.Where(c => c.Id == 1).Select(c => c.NeZamanGelcek).FirstOrDefault();
        return PartialView("_NeZaman", neZaman);
    } 
```

我的部分观点（_NeZaman.cshtml）：

```
 @model caglageldimi.Models.Cagla

<p>
   @Model.NeZamanGelcek
</p> 
```

我的模型（Cagla.cs）：

```
public class Cagla
{
    public int Id { get; set; }
    public bool GeldiMi { get; set; }
    public string NeZamanGelcek { get; set; }
    public string Nerdeymis { get; set; }
} 
```

所以我传入了一个局部视图应该使用的 neZaman 值，但是如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T19:58:14.537

您已将您的全景视图模型设置为您的班级：

> caglageldimi.Models.Cagla

但是你传递了一个字符串：

> db.Caglas.Where(c => c.Id == 1).Select(c => c.NeZamanGelcek).FirstOrDefault();

您的 select 语句仅获取“NeZamanGelcek”字符串属性值以发送到您的局部视图。

将部分视图的模型更改为 System.String 应该可以修复它：

> @model 系统字符串

# c - 错误代码处理

> ID：11741808
> 
> 赞同：0
> 
> 时间：2012-07-31T13:56:27.007
> 
> 标签：c, error-handling

有错误代码处理的标准吗？我的意思不是如何处理特定的错误事件，而是过程中实际返回的内容。这方面的一个例子是在打开文件时发现错误。虽然`open()`函数可能返回自己的值，但调用该函数的`open()`函数可能返回不同的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:11:57.303

我不认为这是一个标准，必须检测和处理所有错误（调用者应始终处理错误）。在一般的 Unix 中：

*   始终以标准 C 库为例`return -1 on fail`，**并将全局变量 errno 设置**为正确的值。

*   一些库例如`return NULL`用于不**存在**的字段而不是**aborting**。

***   您应该始终返回尽可能多的有用信息。** 

 **希望这有帮助。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:07:07.727

这听起来完全取决于我的上下文。在某些情况下，甚至建议只`abort()`考虑整个过程。失败的函数是使用自己的编码标准从程序或库中调用的，您可能应该遵守这一点。**

# scala - Lift 和 Lifty 入门

> ID：11741812
> 
> 赞同：5
> 
> 时间：2012-07-31T13:56:36.103
> 
> 标签：scala, lift, sbt, lifty

我正在尝试开始使用 Lift 框架，阅读 Lift in Action。我想跟随示例，但我立即遇到了安装 Lift 的问题。我知道有多种方法可以轻松开始使用 Lift，但我想像本书一样使用 Lifty，以便能够遵循它。

问题是，自从这本书出版以来，Lifty 和`sbt`（还有 Lift！）都在向前发展。我`sbt`从 Ubuntu 的 Typesafe 存储库安装。现在我一直在尝试安装 Lifty。

遵循[Lifty 文档](http://lifty.github.com/Installing+The+Plugin.html)和[关于 SO 的答案](https://stackoverflow.com/questions/11010597/lifty-unresolved-dependency-org-liftylifty1-7-4-not-found)- 由于 Lifty 尚未发布`sbt`0.11.3 的二进制文件 - 我认为我应该将以下内容放入`~/.sbt/plugins/build.sbt`：

```
resolvers += Resolver.url("sbt-plugin-releases", new URL("http://scalasbt.artifactoryonline.com/scalasbt/sbt-plugin-releases/"))(Resolver.ivyStylePatterns)

addSbtPlugin("org.lifty" % "lifty" % "1.7.4")

libraryDependencies +=
  Defaults.sbtPluginExtra(
    "org.lifty" % "lifty" % "1.7.4",
    "0.11.2",
    "2.9.1"
  ) 
```

后者是告诉`sbt`使用 sbt 0.11.2 的 Lifty 插件。

现在`sbt`似乎可以下载 Lifty 并正确启动，但我没有`lifty`命令。所以当我这样做的时候

```
lifty learn lift https://raw.github.com/Lifty/lifty/master/lifty-recipe/lifty.json 
```

`sbt`抱怨：

```
[error] Not a valid key: lifty (similar: history)
[error] lifty learn lift https://raw.github.com/Lifty/lifty/master/lifty-recipe/lifty.json
[error]      ^ 
```

我应该如何安装 Lifty？请注意，我是 Scala、sbt 和 Lift 的新手。

**编辑**

我设法通过降级到 0.7.7 来安装`sbt`Lifty。但如果我这样做

```
> lift create project-blank
> reload
> update 
```

我得到错误

```
[error] sbt.ResolveException: unresolved dependency: net.liftweb#lift-webkit_2.9.1;2.3-RC3: not found
[error] unresolved dependency: org.scala-tools.testing#specs_2.9.1;1.6.6: not found
[info] == update ==
[error] Error running update: sbt.ResolveException: unresolved dependency: net.liftweb#lift-webkit_2.9.1;2.3-RC3: not found
[error] unresolved dependency: org.scala-tools.testing#specs_2.9.1;1.6.6: not found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T02:39:02.920

我不想把它告诉你，但是lifty已经消失了。在撰写本文时，sbt 的稳定版本为 0.13.0。查看[sbt community repo](http://repo.scala-sbt.org/scalasbt/sbt-plugin-releases/org.lifty/lifty/)，唯一发布的版本是 sbt 0.11.2 的 1.7.4。

[官网](http://liftweb.net/getting_started)说：

> [Lift Cookbook](http://cookbook.liftweb.net/)是学习如何使用 Lift的最新资源。

有一个名为[使用 SBT 从头开始​​创建电梯项目](http://cookbook.liftweb.net/#LiftFromScratch)的部分：

> ## 问题
> 
> 您想在不使用 Lift 官方网站上提供的 ZIP 文件的情况下从头开始创建一个 Lift Web 项目。
> 
> ## 解决方案
> 
> 您需要自己配置 SBT 和 Lift 项目。幸运的是，只需要五个小文件。首先，在以下位置创建一个 SBT 插件文件`project/plugins.sbt`（所有文件名都相对于项目根目录给出）：
> 
> ```
> addSbtPlugin("com.earldouglas" % "xsbt-web-plugin" % "0.3.0") 
> ```
> 
> 这个文件告诉 SBT 你将使用 xsbt-web-plugin。
> 
> 接下来，创建一个 SBT 构建文件 build.sbt...

不幸的是 xsbt-web-plugin 0.3.0 适用于 sbt 0.12。所以你必须要么使用 sbt 0.12，要么稍微修改一下指令。sbt 0.13的最新[xsbt-web-plugin](https://github.com/JamesEarlDouglas/xsbt-web-plugin)是 0.4.2，所以输入`project/plugins.sbt`：

```
addSbtPlugin("com.earldouglas" % "xsbt-web-plugin" % "0.4.2")

resolvers += Resolver.sonatypeRepo("public") 
```

我能够按照页面上的其余说明进行操作......最终我得到了 sbt 0.13 中的所有内容，并且能够启动容器：

```
> container:start
[info] Compiling 1 Scala source to /foo/sbt-lift-test/target/scala-2.10/classes...
[info] jetty-8.1.7.v20120910
....
[success] Total time: 2 s, completed Sep 20, 2013 10:34:22 PM 
```

`http://localhost:8080/`使用浏览器打开：

> 欢迎，您现在有一个可以工作的电梯安装

# sql-server-2008 - 模拟多个用户执行存储过程

> ID：11741814
> 
> 赞同：0
> 
> 时间：2012-07-31T13:56:43.807
> 
> 标签：sql-server-2008

我在 SQL Server 中有这个触发器

```
ALTER TRIGGER [dbo].[myTrigger]     
ON [dbo].[Data]     
AFTER INSERT 
AS 
BEGIN 

declare @number int

begin transaction
  select top 1 @number = NextNumber FROM settings

  Update Settings
    set NextNumber = NextNumber + 1

  UPDATE Data
    set number = @nnumber, currentDate = GetDate(), IdUser = user_id(current_user)
  FROM Data
    INNER JOIN inserted on inserted.IdData = Data.IdData

commit transaction

END 
```

它按预期工作，但我想知道当多个用户`Data`同时在表中添加新行时它是否会按预期工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:27:09.090

让我们分析一下这段代码：

```
begin transaction 
```

您使用默认设置开始事务`READCOMMITTED`。

```
select top 1 @number = NextNumber FROM settings 
```

您正在从`Settings`表中选择最大的数字（顺便说一句：您应该无论如何**添加一个`ORDER BY`子句**- 否则，**不能保证排序**！您可能会在这里得到意想不到的结果）。

然而，这个操作不是阻塞的——两个或多个线程可以同时读取相同的值，例如 100——`SELECT`只需要一个非常短的时间段的共享锁，并且共享锁是兼容的——多个读取器可以读取同时值。

```
Update Settings
set NextNumber = NextNumber + 1 
```

现在在这里，一个线程获得绿灯并将新值（在我们的示例中为 101）写回到表中。该表有一个`UPDATE`独占锁（后来升级为独占锁） - 只有一个线程可以同时写入

```
 UPDATE Data
 set number = @nnumber, currentDate = GetDate(), IdUser = user_id(current_user)
 FROM Data
 INNER JOIN inserted on inserted.IdData = Data.IdData 
```

同样的事情 - 一个幸运的线程可以更新`Data`表，将数字设置为`100`并且它正在更新的表的行被锁定直到事务结束。

```
 commit transaction 
```

现在，幸运线程提交了他的事务并完成了。

**但是：**读取相同**原始**值 100 的第二个（可能还有第三个、第四个、第五个......）线程仍然“在循环中” - 现在线程 #1 已经完成，这些线程中的第二个开始做它的事——它做了。它`Settings`正确地将表更新为新值 102，并继续对表进行第二次更新，这里也使用它已读入其变量`Data`的“当前”值....`100``@number`

最后，您可能有多个线程都从`Settings`表中读取相同的原始值（100），并且每个线程都会将`Settings`表更新为相同的“新”值（101）。

您在这里使用的这种方法**在 load 下是不安全的**。

可能的解决方案：

1.  首先也是最重要的 -**推荐**的方法：让数据库自己处理，通过使用`INT IDENTITY`表中的列（或者如果您已经在使用 SQL Server **2012** - 使用`SEQUENCE`对象来处理所有同步）

2.  如果你不能这样做——无论出于何种原因——那么**至少**要确保你的代码即使在繁忙的系统上也能正常工作！例如，当第一个线程到来并读取当前值时，您需要在表上`SELECT .... WITH (UPDLOCK)`放置一个（*独占*）`UPDATE`锁——这将阻止所有其他线程甚至*读取*“当前”值，直到第一个线程完成。或者还有其他替代方法，例如在单个操作中更新和分配旧值。`Settigns`*`UPDATE`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T18:51:22.730

> 模拟多个用户执行存储过程

您可以在 SQL Server Management Studio 中使用两个（或更多）编辑窗口，并在每个窗口中同时执行类似的操作。

```
insert into Data(ColName) values ('Value')
go 10000 
```

`go 10000`将执行批处理 10000 次。将其调整为您认为合适的任何值。*

# android - 根据语言在 webview 中加载本地 html

> ID：11741815
> 
> 赞同：0
> 
> 时间：2012-07-31T13:56:51.347
> 
> 标签：android, html, webview

Hy...我有一个 webview 组件在资产文件夹下加载本地 html 文件，工作完美。

现在我想翻译mi app，我需要webview根据手机语言加载翻译后的html文件。

我怎样才能做到这一点？

非常感谢 ！！！！

我的代码...

```
package com.altaguia.difuntos;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.webkit.WebSettings;
import android.webkit.WebSettings.RenderPriority;
import android.webkit.WebView;

public class AcercadeActivity extends Activity {

    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.acercade);

        WebView myWebView = (WebView) findViewById(R.id.webView1);
        myWebView.getSettings().setRenderPriority(RenderPriority.HIGH);
        myWebView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);
        myWebView.loadUrl("file:///android_asset/acercade.html");

    }

    public void backBTN(View v)
    {
        finish();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:01:55.987

用于`Locale`查找设备语言，然后加载相应的 html 文件：

```
String lang = Locale.getDefault().getLanguage();
String filename = "acercade.html";
if (lang.equals("fr")) {
  filename = "acercade.fr.html";
}
myWebView.loadUrl("file:///android_asset/" + filename); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:01:05.993

使用 php。选择语言并将其作为 GET 或 POST 中的参数传递。将其传递给 php 文件。在 php 文件中创建一个条件包含。

```
if ( $_GET['language']=="EN") include "indexEN.php";
else include index.php; 
```

将翻译放在特定文件中，并在条件中验证后将其包含在内。如果您有很多翻译，请使用 Switch/Case 而不是 IF。

如果您将使用 GET 表单，那么 URL 将如下所示：

```
www.webpage.com/index.php?language=EN 
```

# embedded-linux - 嵌入式 Linux 中只有一种 --hash-style。为什么？

> ID：11741816
> 
> 赞同：6
> 
> 时间：2012-07-31T13:56:56.440
> 
> 标签：embedded-linux, ld, openembedded

我正在尝试使用[基于 OpenEmbedded 的 Arago](http://www.arago-project.org)构建并部署到 rootfs 中的软件包。不幸的是，该软件包包括预建的共享库。据我了解，Arago 使用 构建整个 Linux 发行版，而我怀疑`--hash-style=gnu`那些共享库是使用 构建的。`--hash-style=sysv`至少构建因“ELF 二进制文件中没有 GNU_HASH”质量检查问题而停止。

我了解哈希的用途。但我想我不明白系统运行时它们是如何使用的。

为什么必须为系统中的所有 ELF 设置一种哈希样式？为什么动态链接器不能即时确定哈希样式并直接使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-02T07:29:20.257

动态链接器**可以**并且**确实**找出 ELF 中存在的哈希表类型（“sysv”或“gnu”）并相应地工作。

不幸的是，您看到的情况是，对 gnu 哈希部分的支持没有被反向移植到您系统上使用的旧版本的动态链接器。

存在类似的情况，其中[为 RHEL5/FC6 构建的二进制文件在 RHEL4/FC5 上不起作用](https://sites.google.com/site/avinesh/binaryincompatibilitybetweenrhel4andrhel)。

* * *

### 为什么 .gnu.hash 与 .hash(sysv) 不兼容？

使用 gnu 哈希部分生成 ELF 会对动态符号表的构造施加某些限制（附加规则）。

使用 GNU 哈希，动态符号表分为两部分。第一部分接收可以从哈希表中省略的符号。GNU hash 没有对动态符号表的这一部分中的符号施加任何特定的顺序。

动态符号表的第二部分接收可从哈希表访问的符号。这些符号需要使用上述 GNU 散列函数通过增加 (hash % nbuckets) 值进行排序。哈希桶 (nbuckets) 的数量记录在 GNU 哈希部分中，如下所述。结果，将在单个哈希链中找到的符号在内存中是相邻的，从而导致更好的缓存性能。

参考：[**blogs.oracle.com/ali/entry/gnu_hash_elf_sections**](https://blogs.oracle.com/ali/entry/gnu_hash_elf_sections)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-19T15:20:05.267

我的 Yocto Arago 构建遇到了同样的`No GNU_HASH in the ELF binary`问题，但事实证明我的应用程序`Makefile`没有使用`$(LDFLAGS)`Yocto 构建设置的并包含`-Wl,--hash-style=gnu`其他重要内容。

我之所以提到这一点，是因为此问题是该错误消息的热门搜索结果，这可能对其他人有所帮助。

# javascript - 在 JQuery 中将长字符串转换为 html 元素

> ID：11741821
> 
> 赞同：0
> 
> 时间：2012-07-31T13:57:15.180
> 
> 标签：javascript, jquery

我有一个字符串，其中包含一些字符串形式的 html，比如这个：

```
var string = '<html> ... some code here... </html>'; 
```

问题是当我尝试将此字符串转换为 JQuery 中的 html 元素时，如果此字符串的长度大于 28457 个字符，则 JQuery 将此字符串转换为数组，如下所示：

```
var temp = $(string.substr(0, 28458)); 
```

如果我打印“temp”，则会显示此消息：

*   jQuery.fn.jQuery.init[102]

![在此处输入图像描述](../Images/82e22971ff61cb73a5ebb52eff70562a.png)

为了访问 temp 我应该像数组一样执行我的操作

```
temp[12] /* return some html or text element that contain attribute, baseURI, etc. */ 
```

1.  为什么显示此消息？
2.  如果字符串的长度大于 28458 个字符，我该怎么做才能将字符串转换为 html？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:49:35.917

JQuery 将长字符串转换为 html 元素没有问题，问题在于该字符串中的引号，您应该转义它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:56:47.633

最后我找到了一种方法，通过 jquery 将`$()`字符串转换为 HTML ，方法是先Convert String to html element，像这样

```
$(String) 
```

但是在这种状态下你不能访问`.html()`所以，把这个对象放在你页面中的隐藏位置，比如 div 等，这里我使用了带有 temp id 的 div。

```
$('#temp').html($(String)); 
```

现在您可以访问`.html()`或其他内容，例如 complate 对象。

# algorithm - 从边缘构建树

> ID：11741825
> 
> 赞同：2
> 
> 时间：2012-07-31T13:57:27.697
> 
> 标签：algorithm, tree, edges, construct

我有优势，我想用它建一棵树。

问题是我只能在边缘处于特定顺序时才能构建我的树结构。订单示例：

```
(vertex, parent_vertex)

good:              bad:
(0,  ) <-top       (3, 2)
(1, 0)             (1, 0)
(2, 1)             (3, 2)
(3, 2)             (0,  ) <-top 
```

我迭代抛出边缘和当前顶点试图在创建的树中找到它的父节点，然后我构造节点并插入它。

```
result tree:

0 - 1 - 2 - 3 
```

因此，对于新添加的顶点，树中总是必须存在一个父节点。问题是如何对输入边进行排序。Voices 告诉我关于拓扑排序，但它是针对顶点的。是否可以正确排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:25:44.767

@mirt 感谢您指出我的方法的优化，您有更好的吗？我将把下面的算法作为参考

最初构造一个哈希映射来存储树中的元素：H，添加根（在您的情况下为空/或任何代表该根的东西）

取一对 (_child, _parent)

1.  循环遍历整个列表。在列表中。（每一对都是元素）
2.  对于每一对，查看哈希映射 H 中是否存在 _child 和 _parent，如果找不到，则为缺少的创建树节点并将它们添加到 H 中，并将它们与父子关系链接。
3.  您将在迭代结束时留下树。

复杂度为 O(n)。

# android - 谷歌地图说“不幸的是， 已经停止”

> ID：11741828
> 
> 赞同：0
> 
> 时间：2012-07-31T13:57:35.507
> 
> 标签：android, google-maps

每次我尝试运行我的应用程序时，我都会收到此错误：

```
不幸已经停止了
```

**资源：**

```
package com.example.mapsapp;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

import android.os.Bundle;
import android.view.Menu;

public class HichRideActivity extends MapActivity
{

    MapController mControl;
    GeoPoint geop;
    MapView mapV;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_hich_ride);

        mapV= (MapView) findViewById(R.id.menu_settings);
        mapV.displayZoomControls(true);
        mapV.setBuiltInZoomControls(true);

        double lat= 40.8;
        double longi=-96.666;

        geop = new GeoPoint ((int)(lat * 1E6), (int)(longi * 1E6));
        mControl.animateTo(geop);
        mControl.setZoom(13);

    }

   @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
       getMenuInflater().inflate(R.menu.activity_hich_ride, menu);
        return true;
   }

    @Override
    protected boolean isRouteDisplayed()
    {
        // TODO Auto-generated method stub
        return false;
    }

} 
```

这是logcat，它说我有`NullPointerException`，但我不知道哪个参数是`null`。

**日志猫：**

```
07-31 13:40:46.344: E/Trace(1043): 打开跟踪文件时出错: 没有这样的文件或目录 (2)
07-31 13:40:47.134: D/AndroidRuntime(1043): 关闭虚拟机
07-31 13:40:47.134: W/dalvikvm(1043): threadid=1: 线程以未捕获的异常退出 (group=0x40a13300)
07-31 13:40:47.194: D/dalvikvm(1043): GC_CONCURRENT freed 195K, 3% free 8273K/8519K, paused 80ms+5ms,总共166ms
07-31 13:40:47.194: D/dalvikvm(1043): WAIT_FOR_CONCURRENT_GC 阻塞 26ms
07-31 13:40:47.194：E/AndroidRuntime（1043）：致命异常：主要
07-31 13:40:47.194: E/AndroidRuntime(1043): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.example.mapsapp/com.example.mapsapp.HichRideActivity}: java.lang.NullPointerException
07-31 13:40:47.194: E/AndroidRuntime(1043): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
07-31 13:40:47.194: E/AndroidRuntime(1043): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
07-31 13:40:47.194: E/AndroidRuntime(1043): 在 android.app.ActivityThread.access$600(ActivityThread.java:130)
07-31 13:40:47.194: E/AndroidRuntime(1043): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
07-31 13:40:47.194: E/AndroidRuntime(1043): 在 android.os.Handler.dispatchMessage(Handler.java:99)
07-31 13:40:47.194: E/AndroidRuntime(1043): 在 android.os.Looper.loop(Looper.java:137)
07-31 13:40:47.194: E/AndroidRuntime(1043): 在 android.app.ActivityThread.main(ActivityThread.java:4745)
07-31 13:40:47.194: E/AndroidRuntime(1043): 在 java.lang.reflect.Method.invokeNative(Native Method)
07-31 13:40:47.194: E/AndroidRuntime(1043): 在 java.lang.reflect.Method.invoke(Method.java:511)
07-31 13:40:47.194: E/AndroidRuntime(1043): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-31 13:40:47.194: E/AndroidRuntime(1043): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-31 13:40:47.194: E/AndroidRuntime(1043): at dalvik.system.NativeStart.main(Native Method)
07-31 13:40:47.194: E/AndroidRuntime(1043): 由: java.lang.NullPointerException 引起
07-31 13:40:47.194: E/AndroidRuntime(1043): 在 com.example.mapsapp.HichRideActivity.onCreate(HichRideActivity.java:27)
07-31 13:40:47.194: E/AndroidRuntime(1043): 在 android.app.Activity.performCreate(Activity.java:5008)
07-31 13:40:47.194: E/AndroidRuntime(1043): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
07-31 13:40:47.194: E/AndroidRuntime(1043): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
07-31 13:40:47.194: E/AndroidRuntime(1043): ... 11 更多
07-31 13:40:47.214: W/CursorWrapperInner(1043): 游标在没有事先关闭的情况下完成()
07-31 13:40:47.214: W/CursorWrapperInner(1043): 游标在没有事先关闭的情况下完成()
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:02:52.993

```
mapV= (MapView) findViewById(R.id.menu_settings);
                                  ^^^^^^^^^^^^^ 
```

this should be **ID** of `MapView` and it should declare in `activity_hich_ride.xml`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:05:22.953

这些行：`mControl.animateTo(geop); mControl.setZoom(13);` 是你的问题。您正在使用`MapController`尚未创建的 a ，您在类的顶部声明了它，但您从未实例化它 - 因此，在您声明您的之后`MapView`，添加以下行 : `mControl = mapV.getController();`。试试看，让我知道它是否有效！

# objective-c - 第一个文本框不会让第一响应者辞职

> ID：11741829
> 
> 赞同：0
> 
> 时间：2012-07-31T13:57:37.707
> 
> 标签：objective-c, ios, textbox, uipickerview

我有三个文本字段。它们由 UI 选择器选择填充。第一个文本字段`text1`不会退出选择器，其他两个框工作正常。我已经检查并三重检查了代码。我真的不明白为什么它不会辞职。

```
 }
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component

{

NSInteger selectedRow = [select selectedRowInComponent:0];
    if([text1 isFirstResponder])
    text1.text = [arrStatus objectAtIndex: selectedRow];

else{
    NSInteger selectedRow = [select2 selectedRowInComponent:0];
    if ([text2 isFirstResponder])
        text2.text = [arrStatus2 objectAtIndex: selectedRow];

else{
    NSInteger selectedRow = [select3 selectedRowInComponent:0];
    if ([text3 isFirstResponder])
        text3.text = [arrStatus3 objectAtIndex: selectedRow];

    }

[text1 resignFirstResponder]; //<<<wont resign first responder
[text2 resignFirstResponder];
[text3 resignFirstResponder];

  }

} 
```

更新-我可以`text1`使用按钮辞职，由于某种原因它不会在`didSelectRow`方法中辞职

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:30:17.143

修复了这个，花括号来拯救！

```
{
    {
    NSInteger selectedRow = [select selectedRowInComponent:0];
    if([text1 isFirstResponder])
    {
    text1.text = [arrStatus objectAtIndex: selectedRow];
         [text1 resignFirstResponder];
    }
else{
    NSInteger selectedRow = [select2 selectedRowInComponent:0];
    if ([text2 isFirstResponder])
    {
    text2.text = [arrStatus2 objectAtIndex: selectedRow];
         [text2 resignFirstResponder];
    }
else{
    NSInteger selectedRow = [select3 selectedRowInComponent:0];
    if ([text3 isFirstResponder])
    {
    text3.text = [arrStatus3 objectAtIndex: selectedRow];
         [text3 resignFirstResponder];
    }

  }

  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:26:31.317

好的，那么你可以尝试一件事。

将 textField 分配给成员变量`textFieldDidbeginEditing`

并在您的选择器方法中退出 memberVariable 对象。

而不是在 if 条件内退出键盘。能不能放在外面。请尝试这样的事情。

```
{
    {

    NSInteger selectedRow = [select selectedRowInComponent:0];
        if([text1 isFirstResponder])
            text1.text = [arrStatus objectAtIndex: selectedRow];
    else
    {
        NSInteger selectedRow = [select2 selectedRowInComponent:0];
            if ([text2 isFirstResponder])
            text2.text = [arrStatus2 objectAtIndex: selectedRow];
            else
        {
                NSInteger selectedRow = [select3 selectedRowInComponent:0];
                if ([text3 isFirstResponder])
                 text3.text = [arrStatus3 objectAtIndex: selectedRow];
         }
     }

    }
[selectedTextField resignFirstResponder];
} 
```

# android - 修复了 C 代码中的拼写错误，仍然无法构建

> ID：11741833
> 
> 赞同：0
> 
> 时间：2012-07-31T13:57:45.757
> 
> 标签：android, android-ndk, compiler-errors

我正在将某人的 Palm Pilot 代码转换为他们的 Android 应用程序。这涉及到我使用 NDK 从他们已经构建的库之一中读取。为此，我需要创建几个新函数。

```
void __stdcall FreeRelay(void){
    RelayAPI_DataValid=0;
    RelayAPI_SetBaud=0;
    RelayAPI_get=0;
    RelayAPI_put=0;
    RelayAPI_flush=0;
    RelayAPI_delay=0;
    RelayAPI_initilized=0;
}

void Java_my_MainMenu_FreeRelayJava( JNIEnv * env, jobject this ) {
    RelayAPI_DataValid = 0;
    RelayAPI_SetBaud = 0;
    RelayAPI_get = 0;
    RelayAPI_put = 0;
    RelayAPI_flush = 0;
    RelayAPI_delay = 0;
    RelayAPI_initilized = 0;
} 
```

现在，我的错误出现在第二种方法的最后一行。我原来是拼写`RelayAPI_initialized`的，我知道那是正确的，但我不会因为错字而更改所有这些 C 代码的麻烦。我会让我的函数适合旧代码。无论如何，我试过`ndk-build`了，得到了这个。

![在此处输入图像描述](../Images/e02fdc1235458be3e4ccc85e400e9f9a.png)

现在在这些单独的`ndk-build`调用之间，我修复了错误。但它仍然在第 615 行告诉我有一个错误处理`RelayAPI_initialized`但它不存在。我不知道发生了什么，而且我对 C 真的知之甚少。我用更新的信息保存了我的文件，然后调用了`ndk-build`. 我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:04:07.133

也许您可以使用 grep 来查找是否在某些 c 代码或头文件中全局定义了 RelayAPI_* 等其他 var。如果不是，请定义它，或者不设置它。

它将解决编译错误...但可能无法正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:01:05.350

清理你的构建。所以党建的东西被删除，你得到一个完整的重建。

# excel - 检查是否选中了基于工作表的复选框

> ID：11741836
> 
> 赞同：22
> 
> 时间：2012-07-31T13:58:03.683
> 
> 标签：excel, vba, macos, checkbox

我正在尝试使用 IF 子句来确定是否选中了名为“复选框 1”的复选框。

我当前的代码：

```
Sub Button167_Click()
 If ActiveSheet.Shapes("Check Box 1") = True Then
 Range("Y12").Value = 1
 Else
 Range("Y12").Value = 0
 End If
End Sub 
```

这行不通。调试器告诉我有问题

```
ActiveSheet.Shapes("Check Box 1") 
```

但是，我知道这段代码有效（即使它用于不同的目的）：

```
ActiveSheet.Shapes("Check Box 1").Select
With Selection
.Value = xlOn 
```

我的复选框（我的页面上有 200 个）位于 sheet1 中，名称为“Demande”。每个复选框都具有相同的格式名称“复选框...”。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-31T14:43:56.040

```
Sub Button167_Click()
 If ThisWorkbook.Worksheets(1).Shapes("Check Box 1").OLEFormat.Object.Value = 1 Then
 Range("Y12").Value = 1
 Else
 Range("Y12").Value = 0
 End If
End Sub 
```

1 勾选，-4146 不勾选，2 混合（灰色框）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-31T14:33:32.357

这是你正在尝试的吗？

```
Sub Sample()
    Dim cb As Shape

    Set cb = ActiveSheet.Shapes("Check Box 1")

    If cb.OLEFormat.Object.Value = 1 Then
        MsgBox "Checkbox is Checked"
    Else
        MsgBox "Checkbox is not Checked"
    End If
End Sub 
```

替换`Activesheet`为相关的工作表名称。也替换`Check Box 1`为相关的复选框名称。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-31T20:27:11.617

在[前面的](https://stackoverflow.com/a/11742520/190829) [答案](https://stackoverflow.com/a/11742718/190829)`True`的基础上，您可以利用-1 和0的事实`False`并像这样缩短代码：

```
Sub Button167_Click()
  Range("Y12").Value = _
    Abs(Worksheets(1).Shapes("Check Box 1").OLEFormat.Object.Value > 0)
End Sub 
```

如果选中该复选框，则`.Value`= 1。

`Worksheets(1).Shapes("Check Box 1").OLEFormat.Object.Value > 0`返回`True`。

应用`Abs`函数转换`True`为`1`.

如果未选中该复选框，则`.Value`= -4146。

`Worksheets(1).Shapes("Check Box 1").OLEFormat.Object.Value > 0`返回`False`。

应用`Abs`函数转换`False`为`0`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-18T01:52:22.120

似乎在您使用的 ActiveX 复选框控件的 VBA 宏代码中

If (ActiveSheet.OLEObjects("CheckBox1").Object.Value = True)

对于您使用的表单复选框控件

If (ActiveSheet.Shapes("CheckBox1").OLEFormat.Object.Value = 1)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-31T14:08:56.763

尝试：`Controls("Check Box 1") = True`

# php - Flickr api 标题

> ID：11741837
> 
> 赞同：0
> 
> 时间：2012-07-31T13:58:17.263
> 
> 标签：php, html, xml, api, flickr

大家好，我想在我的网站上制作一个画廊，我正在从 flickr 中提取图像/集。我可以使用这段代码加载所有集合：

```
$flickr = simplexml_load_file('http://api.flickr.com/services/rest/?method=flickr.photosets.getList&api_key='.$api.'&user_id='.$user_id.'');
foreach($flickr->photosets->photoset as $ps) {
      echo '<img src="http://farm'.$ps['farm'].'.staticflickr.com/'.$ps['server'].'/'.$ps['primary'].'_'.$ps['secret'].'_q.jpg"><br />';
} 
```

有了这个，它将返回所有集合的主要图像的列表。但是，我也想在其上方添加标题，但标题的 XML 输出`$flickr->photosets->photoset->title`使我很难在每张图片上方添​​加标题。有没有一种简单的方法可以`foreach`在图像的循环中获取标题，但标题也与图像正确对齐？

xml flickr 输出如下所示：

```
<photosets page="1" pages="1" perpage="30" total="2" cancreate="1">
  <photoset id="72157626216528324" primary="5504567858" secret="017804c585" server="5174" farm="6" photos="22" videos="0" count_views="137" count_comments="0" can_comment="1" date_create="1299514498" date_update="1300335009">
    <title>Avis Blanche</title>
    <description>My Grandma's Recipe File.</description>
  </photoset>
</photosets> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:23:48.070

如果它使用给定的 XML，您可以在`foreach`循环内使用`$ps->title`.

# jquery - Jquery ui如何通过隐藏缩放到某个点

> ID：11741844
> 
> 赞同：0
> 
> 时间：2012-07-31T13:58:37.237
> 
> 标签：jquery

如何使缩放效果缩放回某个高度和宽度而不是 0？我试过

`$(element).hide("scale",{to:{width:600,height:500}},150);`

但它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:11:53.250

你试过[jQuery 动画](http://api.jquery.com/animate/)吗？

> $("div").animate({width:"600", height:"500"},150);

[http://jsfiddle.net/aQLD4/](http://jsfiddle.net/aQLD4/)

# c# - 关于crystalreport数据库错误的咨询

> ID：11741847
> 
> 赞同：0
> 
> 时间：2012-07-31T13:58:40.310
> 
> 标签：c#, ms-access, crystal-reports

我尝试使用 C# 和 CrystalReports 连接到 Access 数据库。

一份报告效果很好，但是当我尝试连接到一份新报告时，我收到了这个错误：

```
Logon failed
Details: DAO Error Code: 0Xbdb
Source: DAO.DbEngine
Description: System resource exceeded 
```

# java - 错误：找不到与给定名称匹配的资源（在“标题”处，值为“@string/menu_settings”）

> ID：11741849
> 
> 赞同：5
> 
> 时间：2012-07-31T13:58:41.673
> 
> 标签：java, android, eclipse, string

我正在做“hello to android”一书中的“数独”练习。我看到有人和我有同样的问题，但我无法解决。我已经删除了该项目三遍并从头开始重新创建，但即使我正在从书中复制/粘贴，我仍然在下面收到相同的错误消息。

```
W/ResourceType( 8592): Bad XML block: header size 29806 or total size 538970658 is larger than data size 0
    C:\java\Sudoku\res\layout\activity_main.xml:6: error: Error: No resource found that matches the given name (at 'text' with value '@string/hello_world').
C:\java\Sudoku\res\menu\activity_main.xml:2: error: Error: No resource found that matches the given name (at 'title' with value '@string/menu_settings'). 
```

书中有以下代码`Sudokuv1/res/layout/main1.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >
<TextView
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/main_title" />
<Button
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/continue_label" />
<Button
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/new_game_label" />
<Button
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/about_label" />
<Button
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/exit_label" />
</LinearLayout> 
```

有代码`Sudokuv1/res/values/strings.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string name="app_name">Sudoku</string>
<string name="main_title">Android Sudoku</string>
<string name="continue_label">Continue</string>
<string name="new_game_label">New Game</string>
<string name="about_label">About</string>
<string name="exit_label">Exit</string>
</resources> 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T05:06:01.787

如果您使用 Elcipse 插件创建了 android 应用程序，则在该`res`文件夹中您有一个 menu 文件夹，并且在该文件夹中还有另一个`activity_mail.xml`.

删除文件或评论其内容，因为您不会使用`sudoku app`.

那应该解决它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:03:52.970

要么添加

```
<string name="hello_world">hi</string> 
```

到你的 string.xml

或在您的 activity_main.xml 中找到名为“title”的视图并从中删除 android:text="@string/hello_world" 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T05:31:34.323

删除文件`activity_main.xml`，因为和`res>menu`中有两个同名文件。`res>menu``res>layout`

# dns - XBAP 应用程序在第二个浏览域上失败

> ID：11741851
> 
> 赞同：3
> 
> 时间：2012-07-31T13:58:48.157
> 
> 标签：dns, manifest, xbap

我在具有不同域名的两台不同服务器上部署了一个 XBAP 应用程序。不幸的是，它在第​​一个浏览域上加载正常，并在第二次浏览时抛出下面的异常。如果我再次使用 mage -cc 清除缓存，它会在第一个浏览域上正常加载并在第二个时抛出异常。

> 错误摘要 下面是错误摘要，这些错误的详细信息在日志后面列出。下载应用程序时发生异常。检测到以下故障消息：
> 
> 无法安装此应用程序，因为已安装具有相同标识的应用程序。要安装此应用程序，请修改此应用程序的清单版本或卸载预先存在的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-17T14:46:36.783

在 Manifest 文件中，更改应用程序标识的版本或重新发布，检查项目属性->发布->检查每次发布时自动增加修订。然后发布它，然后运行它。

# jquery - var $removable = $container.find(selector); 的反面是什么？

> ID：11741852
> 
> 赞同：0
> 
> 时间：2012-07-31T13:58:49.220
> 
> 标签：jquery

我试图选择所有不是“选择器”的元素。

就像是

 `````
var $removable = $container.find(.not(selector)); 
```` 

`但我知道语法是错误的。有人可以帮忙吗？谢谢`

 `* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T14:00:31.900

你可以试试这个：

```
var $removable = $container.find(':not('+ selector +')'); 
```

**或者**

```
var $removable = $container.find('some_selector').not(selector); 
```

来自[@Mattias 评论](https://stackoverflow.com/questions/11741852/whats-the-inverse-of-var-removable-container-findselector/11741891#comment15584352_11741891)

```
$container.find('some_selector:not('+selector+')' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:02:08.390

使用 not 选择器很简单

```
$('div').not('#selector').css('background-color', 'red');​ 
```

看这个[活生生的例子](http://jsfiddle.net/s5LE7/)。上面的示例假设您要查找不是具有 id 'selector' 的元素的 div 元素。``

# java - 在 BIRT 中隐藏网格/表格，而数据源没有结果

> ID：11741856
> 
> 赞同：2
> 
> 时间：2012-07-31T13:59:04.477
> 
> 标签：java, javascript, sql, eclipse-plugin, birt

我无法更改 birt 中的报告以满足我的团队规范。

问题是这样的：我正在从 jdbc 数据源生成报告。我正在从数据库中选择项目，这样要么有一行，要么没有。如果返回一行，我会显示反映结果的数据。如果没有返回任何行，我应该隐藏应该显示数据的整个网格并显示一条简单的消息，“找不到数据”。

我尝试了不同的操作，例如向查询添加计数和从插件计算的计数，但如果没有给出结果，则没有计数可以关闭。我还尝试创建一个默认为 true 的布尔参数 showHideData，如果其中一个关键字段为 null，则 showHideData 设置为 false。这看起来是这样的（我将它放在数据集 afterClose 脚本选项中）：

```
 if(row["FIRM"] != null){
        params["showHideData"] = true;
    }else {
        params["showHideData"] = false;
    } 
```

不幸的是，这给了我一个 javascript 错误，说它无法访问 null 值。我不知道如何做到这一点，因为我不精通 Javascript，但如果你能提供任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-31T16:01:44.370

您可以使用属性编辑器上的可见性选项卡来执行此操作。

1.  在您的数据表（或包含它的网格，如果您想隐藏整个网格）上，转到绑定选项卡。
2.  使用函数“COUNT”添加一个聚合，并为表达式选择一个数据集字段。
3.  转到属性-> 可见性选项卡并勾选“隐藏元素”并在表达式中放入**row["Aggregation"] == 0**如有必要，替换聚合名称。
4.  创建一个包含“无数据存在”标签的 1x1 网格。
5.  将网格与数据集相关联，并添加与上述相同的聚合。
6.  在 Visibility 选项卡上再次单击“Hide Element”，但这次使用**row["Aggregation"] != 0**。

# makefile - 我的 Makefile 有问题

> ID：11741858
> 
> 赞同：0
> 
> 时间：2012-07-31T13:59:11.637
> 
> 标签：makefile

我下载[了这个](http://caml.inria.fr/pub/docs/u3-ocaml/make/Makefile.ocaml) `Makefile`，我很难理解它是如何工作的。

我正在`Ocaml`对某些模块进行编程，我实现了一个`interface`（.mli）。奇怪的是，即使我`.mli`在相应文件之前添加`.ml`文件，Makefile 似乎也跳过了它；所以我得到了错误

```
could not find the X.cmi for the module X. 
```

更糟糕的是，我添加了一些不需要的文件，`.mli`而且奇怪的是 Makefile 再次将它们自动添加到源列表中。
我说的很**奇怪**，但对于 Makefiles 专家来说，这可能是完全正常的。

我不是 Makefile 方面的专家，谁能帮我理解这个 Makefile 是如何工作的？

当我替换该行时，编译工作正常

```
$(EXEC): $(OBJS) 
$(CAMLC) $(CUSTOM) -o $(EXEC) $(LIBS) $(OBJS) 
```

和

```
$(EXEC): $(SOURCES) 
$(CAMLC) $(CUSTOM) -o $(EXEC) $(LIBS) $(SOURCES) 
```

并添加所需的 .mli

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:05:55.470

尝试

```
# Makefile

PRG =

# Fichiers dans l'ordre
ML =
MLI = 

CMO=${ML:.ml=.cmo}
CMX=${ML:.ml=.cmx}
CMI=${ML:.mli=.cmi}

OCAMLFLAGS = -I
OCAMLLD = -ccopt -L.
OCAMLOPT = ocamlopt.opt
OCAMLC = ocamlc.opt
OCAMLDEP = ocamldep

${PRG}: ${OCAMLOPT} ${OCAMLFLAGS} ${OCAMLLD} -o $@ ${CMX}   
    make clean

.SUFFIXES: .ml .mli .cmo .cmx .cmi

.ml.cmx: 
    ${OCAMLOPT} ${OCAMLFLAGS} ${OCAMLLD} -c $<

.ml.cmo: 
    ${OCAMLC} -c $<

.mli.cmi: 
    ${OCAMLC} -c $<

clean:
    rm -f *~ *.o *.cm? *mli

fullclean: clean
    rm -f .depend ${PRG}

depend: .depend
.depend: ${ML} ${MLI}
    rm -f .depend
    ${OCAMLDEP} ${ML} ${MLI} > .depend

include .depend 
```

您必须设置 PRG、ML、MLI、FLAGS、LD。:)

# javascript - 在运行时检测 Facebook API 版本？

> ID：11741862
> 
> 赞同：2
> 
> 时间：2012-07-31T13:59:13.817
> 
> 标签：javascript, facebook, api

在运行时检测 Facebook API 版本的快速方法是什么？

我并不想用它做任何花哨的事情，只是为了了解我正在查看的页面是否碰巧以某种方式使用了古老的 FB 版本（调试与 FB init 进程相关的东西）。我指的特定 API 是 Like 按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:06:33.577

Facebook API 没有版本化——它每天更新，最大的变化每周发生一次。

支持的 SDK 也会偶尔更新，但它们都调用相同的 API，除非您遇到的问题是特定于 SDK 本身的，否则使用特定的 SDK 应该不会影响您的应用。

如果是 Javascript SDK - SDK 直接从 Facebook 加载（在`connect.facebook.net/en_US/all.js`），并且每天从 Facebook 更新

# twitter - 如何将 twitter 时区映射到 Joda 时区

> ID：11741866
> 
> 赞同：0
> 
> 时间：2012-07-31T13:59:22.713
> 
> 标签：twitter, timezone, jodatime

我正在查看 Twitter REST API，我看到 /users/show 端点返回了一个字符串时区。我想把它翻译成 org.joda.time.DateTimeZone。不幸的是，示例（https://dev.twitter.com/docs/api/1/get/users/show）“太平洋时间（美国和加拿大）”中给出的值与 DateTimeZone ID（完整列表见下文）。如何将此 Twitter 时区转换为 Joda DateTimeZone？

以下是 Joda DateTimeZone ID：

```
Africa/Abidjan
Africa/Accra
Africa/Addis_Ababa
Africa/Algiers
Africa/Asmara
Africa/Asmera
Africa/Bamako
Africa/Bangui
Africa/Banjul
Africa/Bissau
Africa/Blantyre
Africa/Brazzaville
Africa/Bujumbura
Africa/Cairo
Africa/Casablanca
Africa/Ceuta
Africa/Conakry
Africa/Dakar
Africa/Dar_es_Salaam
Africa/Djibouti
Africa/Douala
Africa/El_Aaiun
Africa/Freetown
Africa/Gaborone
Africa/Harare
Africa/Johannesburg
Africa/Juba
Africa/Kampala
Africa/Khartoum
Africa/Kigali
Africa/Kinshasa
Africa/Lagos
Africa/Libreville
Africa/Lome
Africa/Luanda
Africa/Lubumbashi
Africa/Lusaka
Africa/Malabo
Africa/Maputo
Africa/Maseru
Africa/Mbabane
Africa/Mogadishu
Africa/Monrovia
Africa/Nairobi
Africa/Ndjamena
Africa/Niamey
Africa/Nouakchott
Africa/Ouagadougou
Africa/Porto-Novo
Africa/Sao_Tome
Africa/Timbuktu
Africa/Tripoli
Africa/Tunis
Africa/Windhoek
America/Adak
America/Anchorage
America/Anguilla
America/Antigua
America/Araguaina
America/Argentina/Buenos_Aires
America/Argentina/Catamarca
America/Argentina/ComodRivadavia
America/Argentina/Cordoba
America/Argentina/Jujuy
America/Argentina/La_Rioja
America/Argentina/Mendoza
America/Argentina/Rio_Gallegos
America/Argentina/Salta
America/Argentina/San_Juan
America/Argentina/San_Luis
America/Argentina/Tucuman
America/Argentina/Ushuaia
America/Aruba
America/Asuncion
America/Atikokan
America/Atka
America/Bahia
America/Bahia_Banderas
America/Barbados
America/Belem
America/Belize
America/Blanc-Sablon
America/Boa_Vista
America/Bogota
America/Boise
America/Buenos_Aires
America/Cambridge_Bay
America/Campo_Grande
America/Cancun
America/Caracas
America/Catamarca
America/Cayenne
America/Cayman
America/Chicago
America/Chihuahua
America/Coral_Harbour
America/Cordoba
America/Costa_Rica
America/Cuiaba
America/Curacao
America/Danmarkshavn
America/Dawson
America/Dawson_Creek
America/Denver
America/Detroit
America/Dominica
America/Edmonton
America/Eirunepe
America/El_Salvador
America/Ensenada
America/Fort_Wayne
America/Fortaleza
America/Glace_Bay
America/Godthab
America/Goose_Bay
America/Grand_Turk
America/Grenada
America/Guadeloupe
America/Guatemala
America/Guayaquil
America/Guyana
America/Halifax
America/Havana
America/Hermosillo
America/Indiana/Indianapolis
America/Indiana/Knox
America/Indiana/Marengo
America/Indiana/Petersburg
America/Indiana/Tell_City
America/Indiana/Vevay
America/Indiana/Vincennes
America/Indiana/Winamac
America/Indianapolis
America/Inuvik
America/Iqaluit
America/Jamaica
America/Jujuy
America/Juneau
America/Kentucky/Louisville
America/Kentucky/Monticello
America/Knox_IN
America/Kralendijk
America/La_Paz
America/Lima
America/Los_Angeles
America/Louisville
America/Lower_Princes
America/Maceio
America/Managua
America/Manaus
America/Marigot
America/Martinique
America/Matamoros
America/Mazatlan
America/Mendoza
America/Menominee
America/Merida
America/Metlakatla
America/Mexico_City
America/Miquelon
America/Moncton
America/Monterrey
America/Montevideo
America/Montreal
America/Montserrat
America/Nassau
America/New_York
America/Nipigon
America/Nome
America/Noronha
America/North_Dakota/Beulah
America/North_Dakota/Center
America/North_Dakota/New_Salem
America/Ojinaga
America/Panama
America/Pangnirtung
America/Paramaribo
America/Phoenix
America/Port-au-Prince
America/Port_of_Spain
America/Porto_Acre
America/Porto_Velho
America/Puerto_Rico
America/Rainy_River
America/Rankin_Inlet
America/Recife
America/Regina
America/Resolute
America/Rio_Branco
America/Rosario
America/Santa_Isabel
America/Santarem
America/Santiago
America/Santo_Domingo
America/Sao_Paulo
America/Scoresbysund
America/Shiprock
America/Sitka
America/St_Barthelemy
America/St_Johns
America/St_Kitts
America/St_Lucia
America/St_Thomas
America/St_Vincent
America/Swift_Current
America/Tegucigalpa
America/Thule
America/Thunder_Bay
America/Tijuana
America/Toronto
America/Tortola
America/Vancouver
America/Virgin
America/Whitehorse
America/Winnipeg
America/Yakutat
America/Yellowknife
Antarctica/Casey
Antarctica/Davis
Antarctica/DumontDUrville
Antarctica/Macquarie
Antarctica/Mawson
Antarctica/McMurdo
Antarctica/Palmer
Antarctica/Rothera
Antarctica/South_Pole
Antarctica/Syowa
Antarctica/Vostok
Arctic/Longyearbyen
Asia/Aden
Asia/Almaty
Asia/Amman
Asia/Anadyr
Asia/Aqtau
Asia/Aqtobe
Asia/Ashgabat
Asia/Ashkhabad
Asia/Baghdad
Asia/Bahrain
Asia/Baku
Asia/Bangkok
Asia/Beirut
Asia/Bishkek
Asia/Brunei
Asia/Calcutta
Asia/Choibalsan
Asia/Chongqing
Asia/Chungking
Asia/Colombo
Asia/Dacca
Asia/Damascus
Asia/Dhaka
Asia/Dili
Asia/Dubai
Asia/Dushanbe
Asia/Gaza
Asia/Harbin
Asia/Hebron
Asia/Ho_Chi_Minh
Asia/Hong_Kong
Asia/Hovd
Asia/Irkutsk
Asia/Istanbul
Asia/Jakarta
Asia/Jayapura
Asia/Jerusalem
Asia/Kabul
Asia/Kamchatka
Asia/Karachi
Asia/Kashgar
Asia/Kathmandu
Asia/Katmandu
Asia/Kolkata
Asia/Krasnoyarsk
Asia/Kuala_Lumpur
Asia/Kuching
Asia/Kuwait
Asia/Macao
Asia/Macau
Asia/Magadan
Asia/Makassar
Asia/Manila
Asia/Muscat
Asia/Nicosia
Asia/Novokuznetsk
Asia/Novosibirsk
Asia/Omsk
Asia/Oral
Asia/Phnom_Penh
Asia/Pontianak
Asia/Pyongyang
Asia/Qatar
Asia/Qyzylorda
Asia/Rangoon
Asia/Riyadh
Asia/Saigon
Asia/Sakhalin
Asia/Samarkand
Asia/Seoul
Asia/Shanghai
Asia/Singapore
Asia/Taipei
Asia/Tashkent
Asia/Tbilisi
Asia/Tehran
Asia/Tel_Aviv
Asia/Thimbu
Asia/Thimphu
Asia/Tokyo
Asia/Ujung_Pandang
Asia/Ulaanbaatar
Asia/Ulan_Bator
Asia/Urumqi
Asia/Vientiane
Asia/Vladivostok
Asia/Yakutsk
Asia/Yekaterinburg
Asia/Yerevan
Atlantic/Azores
Atlantic/Bermuda
Atlantic/Canary
Atlantic/Cape_Verde
Atlantic/Faeroe
Atlantic/Faroe
Atlantic/Jan_Mayen
Atlantic/Madeira
Atlantic/Reykjavik
Atlantic/South_Georgia
Atlantic/St_Helena
Atlantic/Stanley
Australia/ACT
Australia/Adelaide
Australia/Brisbane
Australia/Broken_Hill
Australia/Canberra
Australia/Currie
Australia/Darwin
Australia/Eucla
Australia/Hobart
Australia/LHI
Australia/Lindeman
Australia/Lord_Howe
Australia/Melbourne
Australia/NSW
Australia/North
Australia/Perth
Australia/Queensland
Australia/South
Australia/Sydney
Australia/Tasmania
Australia/Victoria
Australia/West
Australia/Yancowinna
Brazil/Acre
Brazil/DeNoronha
Brazil/East
Brazil/West
CET
CST6CDT
Canada/Atlantic
Canada/Central
Canada/East-Saskatchewan
Canada/Eastern
Canada/Mountain
Canada/Newfoundland
Canada/Pacific
Canada/Saskatchewan
Canada/Yukon
Chile/Continental
Chile/EasterIsland
Cuba
EET
EST
EST5EDT
Egypt
Eire
Etc/GMT
Etc/GMT+0
Etc/GMT+1
Etc/GMT+10
Etc/GMT+11
Etc/GMT+12
Etc/GMT+2
Etc/GMT+3
Etc/GMT+4
Etc/GMT+5
Etc/GMT+6
Etc/GMT+7
Etc/GMT+8
Etc/GMT+9
Etc/GMT-0
Etc/GMT-1
Etc/GMT-10
Etc/GMT-11
Etc/GMT-12
Etc/GMT-13
Etc/GMT-14
Etc/GMT-2
Etc/GMT-3
Etc/GMT-4
Etc/GMT-5
Etc/GMT-6
Etc/GMT-7
Etc/GMT-8
Etc/GMT-9
Etc/GMT0
Etc/Greenwich
Etc/UCT
Etc/UTC
Etc/Universal
Etc/Zulu
Europe/Amsterdam
Europe/Andorra
Europe/Athens
Europe/Belfast
Europe/Belgrade
Europe/Berlin
Europe/Bratislava
Europe/Brussels
Europe/Bucharest
Europe/Budapest
Europe/Chisinau
Europe/Copenhagen
Europe/Dublin
Europe/Gibraltar
Europe/Guernsey
Europe/Helsinki
Europe/Isle_of_Man
Europe/Istanbul
Europe/Jersey
Europe/Kaliningrad
Europe/Kiev
Europe/Lisbon
Europe/Ljubljana
Europe/London
Europe/Luxembourg
Europe/Madrid
Europe/Malta
Europe/Mariehamn
Europe/Minsk
Europe/Monaco
Europe/Moscow
Europe/Nicosia
Europe/Oslo
Europe/Paris
Europe/Podgorica
Europe/Prague
Europe/Riga
Europe/Rome
Europe/Samara
Europe/San_Marino
Europe/Sarajevo
Europe/Simferopol
Europe/Skopje
Europe/Sofia
Europe/Stockholm
Europe/Tallinn
Europe/Tirane
Europe/Tiraspol
Europe/Uzhgorod
Europe/Vaduz
Europe/Vatican
Europe/Vienna
Europe/Vilnius
Europe/Volgograd
Europe/Warsaw
Europe/Zagreb
Europe/Zaporozhye
Europe/Zurich
GB
GB-Eire
GMT
GMT+0
GMT-0
GMT0
Greenwich
HST
Hongkong
Iceland
Indian/Antananarivo
Indian/Chagos
Indian/Christmas
Indian/Cocos
Indian/Comoro
Indian/Kerguelen
Indian/Mahe
Indian/Maldives
Indian/Mauritius
Indian/Mayotte
Indian/Reunion
Iran
Israel
Jamaica
Japan
Kwajalein
Libya
MET
MST
MST7MDT
Mexico/BajaNorte
Mexico/BajaSur
Mexico/General
NZ
NZ-CHAT
Navajo
PRC
PST8PDT
Pacific/Apia
Pacific/Auckland
Pacific/Chatham
Pacific/Chuuk
Pacific/Easter
Pacific/Efate
Pacific/Enderbury
Pacific/Fakaofo
Pacific/Fiji
Pacific/Funafuti
Pacific/Galapagos
Pacific/Gambier
Pacific/Guadalcanal
Pacific/Guam
Pacific/Honolulu
Pacific/Johnston
Pacific/Kiritimati
Pacific/Kosrae
Pacific/Kwajalein
Pacific/Majuro
Pacific/Marquesas
Pacific/Midway
Pacific/Nauru
Pacific/Niue
Pacific/Norfolk
Pacific/Noumea
Pacific/Pago_Pago
Pacific/Palau
Pacific/Pitcairn
Pacific/Pohnpei
Pacific/Ponape
Pacific/Port_Moresby
Pacific/Rarotonga
Pacific/Saipan
Pacific/Samoa
Pacific/Tahiti
Pacific/Tarawa
Pacific/Tongatapu
Pacific/Truk
Pacific/Wake
Pacific/Wallis
Pacific/Yap
Poland
Portugal
ROC
ROK
Singapore
Turkey
UCT
US/Alaska
US/Aleutian
US/Arizona
US/Central
US/East-Indiana
US/Eastern
US/Hawaii
US/Indiana-Starke
US/Michigan
US/Mountain
US/Pacific
US/Pacific-New
US/Samoa
UTC
Universal
W-SU
WET
Zulu 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:08:23.190

使用参数`utc_offset`而不是在*几秒钟内*`time_zone`
`utc_offset`存储偏移量

 *```
DateTimeZone tz = DateTimeZone.forOffsetMillis(utc_offset_from_response * 1000); 
```*

# genetic-algorithm - 具有播种初始种群的全局优化工具箱中的 MATLAB 遗传算法 (ga) 错误

> ID：11741868
> 
> 赞同：0
> 
> 时间：2012-07-31T13:59:34.540
> 
> 标签：genetic-algorithm, mathematical-optimization, matlab

在 MATLAB 的全局优化工具箱中使用该函数时，我遇到了一个令人费解的错误`ga`，错误消息粘贴在下面，看看是否有人能破译这意味着什么。

我正在尝试`ga`使用初始种群（pop-by-nvar）来播种。但是，这会产生以下错误。`ga`如果我传入 (pop-1)-by-nvar 的初始种群向量，我只能运行。这有点不方便，因为我想指定整个人口。希望熟悉全局优化工具箱和`ga`功能的朋友在这里指点一下！

```
??? Index exceeds matrix dimensions.

Error in ==> gacreationlinearfeasible>lhsLambda at 213
    [lambda(i,:),f,e] = fmincon(fun,lambda(i,:),[],[],Aeq,beq,lb,ub,[],opts);

Error in ==> gacreationlinearfeasible>feasibleLHS at 180
            initialPopulation(boundary_points+1:interior_points+boundary_points,:) = ...

Error in ==> gacreationlinearfeasible at 42
        feasiblePop = feasibleLHS(individualsToCreate,GenomeLength,options);

Error in ==> makeState at 30
      state.Population = feval(options.CreationFcn,GenomeLength,FitnessFcn,options,options.CreationFcnArgs{:});

Error in ==> galincon at 18
state = makeState(GenomeLength,FitnessFcn,Iterate,output.problemtype,options);

Error in ==> ga at 282
        [x,fval,exitFlag,output,population,scores] = galincon(FitnessFcn,nvars, ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:41:22.283

以下是使用 GA 并指定初始总体的示例：

```
%# find minima
initPop = bsxfun(@plus, [2 3], randn(20,2)*2);    %# 20-by-2 matrix
opts = gaoptimset('InitialPopulation',initPop);
[x, fx, flag, out, pop] = ga(@rastriginsfcn, 2, [],[], [],[], [],[], [], opts);

%# plot solution
figure('Renderer','opengl')
ezsurfc(@(x,y) rastriginsfcn([x,y])), colormap hot
line(x(1), x(2), fx, 'Marker','.', 'MarkerSize',50, 'Color','b')
view(3) 
```

这是我在 72 代之后得到的解决方案：

![截屏](../Images/e88bdd4b6b29cd054da62bb65e1c6c0f.png)

请注意，Rastrigin 函数在 (0,0) 处具有全局最小值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T13:59:14.863

在完全定义初始种群时我遇到了同样的问题（种群大小等于初始种群矩阵的行数）。它是由初始种群中的一个个体违反线性约束引起的。因此，检查手动分配的个人是否不违反线性约束。

# sass - 指南针在相同的图标名称下为不同颜色的主题创建多个精灵文件

> ID：11741871
> 
> 赞同：2
> 
> 时间：2012-07-31T13:59:38.610
> 
> 标签：sass, compass-sass

我正在寻找执行以下操作，如果没有大量的摆弄，我似乎无法弄清楚如何。

我想为我的主题设置两个图标集。一黑。一白。我的主题有两种不同的配色方案可供您选择。灰色和蓝色。在灰色主题上，我想要黑色图标，在蓝色主题上，我想要白色。

我已经很好地创建了我原来的黑色图标集并将它们包含在一个文件夹中`icon/*.png`

现在我想使用的是嵌套文件夹设置，我的图标位于以下文件夹`icon/black/*.png`中`icon/white/*.png`

这样做的问题是我的图标将像这样命名，`black-add`而`white-add`我真正想要的是`icon-add`这样我就不必更改我的主题`@import icon-sprite(add)`行，我只需将正确的`sprites/_black`或包含`sprites/_white`在顶级主题 sass 文件中。

是否有一些我缺少的配置允许我这样做？还是我以错误的方式解决这个问题？

我通过创建一个包含所有图标的通用 icon/*.png 文件夹，然后复制生成的 _icon.sass 文件并为黑白图标编辑它来解决这个问题。然后在我的灰色主题中包含“精灵/黑色”，在我的蓝色主题中包含“精灵/白色”。这行得通，但是当您想添加新图标时，它有点像 PITA。

这里的任何帮助将不胜感激！

**更新**澄清

当前文件夹结构。

```
themes/
    images/
        default/
            icon/
                black/
                white/
        blue/ 
```

**配置文件**

```
# $ext_path: This should be the path of the Ext JS SDK relative to this file
$ext_path = "../"

# sass_path: the directory your Sass files are in. THIS file should also be in the Sass folder
# Generally this will be in a resources/sass folder
# <root>/resources/sass
sass_path = File.dirname(__FILE__)

# css_path: the directory you want your CSS files to be.
# Generally this is a folder in the parent directory of your Sass files
# <root>/resources/css
css_path = File.join(sass_path, "..", "css")

images_path = File.join(sass_path, "..", "themes", "images", "default")
generated_images_dir = File.join(sass_path, "..", "themes", "images", "default")
generated_images_path = File.join(sass_path, "..", "themes", "images", "default")
http_generated_images_path = File.join("..", "themes", "images", "default")
sprite_load_path = File.join(sass_path, "..", "themes", "images", "default")

# output_style: The output style for your compiled CSS
# nested, expanded, compact, compressed
# More information can be found here http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#output_style
output_style = :compressed

# We need to load in the Ext4 themes folder, which includes all it's default styling, images, variables and mixins
load File.join(File.dirname(__FILE__), $ext_path, 'themes') 
```

重新阅读我的配置文件，就像我想为 sprite_load_path 设置多个条目或取消“默认”连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T01:57:23.973

我遇到的解决方案将@maxbeatty 解决方案与选择器的魔法生成混合在一起，以保持指南针的性感。基本上，每种样式都有一个 sass 模板，其中精灵具有相同的名称，并将选择器嵌套在每种颜色的不同类下。假设前面提到的文件结构：

```
/images
|
--/themes
  |
  --/grey
    |
    --/icon
      |
      -- add.png
  --/blue
    |
    --/icon
      |
      -- add.png 
```

考虑到该文件结构，您可以在样式表中创建一个名为 sprites 的文件夹，然后在其中为每种样式创建一个 sass 模板。例如。你将会有：

```
--/stylesheets/sprites
          |
          -- grey.sass
          -- blue.sass
          -- all.css (explained below) 
```

除了标记为 [color] 的相应可变部分外，文件相同：

```
@import themes/[color]/icon/*.png

.[color]
    @include all-icon-sprites 
```

然后，您将希望编译并导入这两个文件。**你必须小心，因为在编译之前合并它们可能会导致 sass 加入一些选择器并消除分离。**我在 rails 中所做的是让 .css 清单导入已编译的版本，而不是使用 sass 导入指令合并它们：

/stylesheets/sprites/all.css：

```
/*
*= require_tree .
* Import the compiled versions of the sprites. 
* Prevents SASS from mixing them and applying the same sprite to all selectors
*/ 
```

这最终给了你类似的东西：

```
.blue .icon-home
.gray .icon-home 
```

这当然具有必须将图标嵌套在设置颜色的父级下的缺点。考虑到您将生成魔法精灵，这很烦人，但并不可怕。

注意：Stack Overflow 对我很有帮助，现在我正在努力回馈。如果这有帮助，请考虑投票。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:53:13.640

您可以更改[sprite 基类](http://compass-style.org/help/tutorials/spriting/customization-options/)，但这对您的个人没有帮助`@include`。

目前尚不完全清楚您的整个项目目前是如何组织的，但我建议将您的图像文件夹层次结构与您的主题更接近，而不是图标的颜色。

```
/images
|
--/themes
  |
  --/grey
    |
    --/icon
      |
      -- add.png
  --/blue
    |
    --/icon
      |
      -- add.png 
```

由于 Compass 使用路径中的最后一个目录作为地图名称，因此您可以`@import "themes/grey/icon/*.png"`使用`@include icon-sprite(add)`

您还可以将文件结构“读取”为“蓝色主题的添加图标”

# c# - 静态 void main 中的 C# 对象引用

> ID：11741872
> 
> 赞同：0
> 
> 时间：2012-07-31T13:59:42.883
> 
> 标签：c#

我有个问题。我正在尝试订阅静态 void main 中的事件，但出现错误“非静态字段、方法等需要对象引用”

这是代码的一部分：

```
public static void Main(string[] args)
    {
        ...

        Factorial Fact = new Factorial();
        Fact.Progression += new Factorial.ProgressEventHandler(Progress);
        ...

    } 
```

如何摆脱错误？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T14:03:09.520

尝试内联。

```
public static void Main(string[] args)
{
    ...

    Factorial Fact = new Factorial();
    Fact.Progression += (s,e) => { /*Do stuff*/ };
    ...

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:01:55.583

如果没有完整的代码，很难确定，但我猜你的`Progress`函数不是静态的。如果将其更改为静态，则该代码应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T14:03:12.033

您不能在静态函数中引用类的非静态成员。

您的代码在 Main 方法之外定义了变量。将它们标记为静态，一切都应该没问题。

# c# - 空单元格包含到引号中

> ID：11741875
> 
> 赞同：-1
> 
> 时间：2012-07-31T13:59:53.450
> 
> 标签：c#

我从电子表格中读取数据并移动到记事本 csv 文件中，在 c# 中，然后返回电子表格。然而，在电子表格中，一些单元格是空的（空我的意思是有一个=“”的值，只是空格，空格的数量可能会有所不同）。在移动到记事本并返回电子表格时，这些值可能会丢失。有没有办法区分这些细胞，所以我可以在周围加上引号，这样细胞仍然存在？

我发现大多数空单元格的文件类型为 data_string 或 bool，此代码适用于所有 data_string

```
if (fileType == "data_string")
{
    string see = cell.getFormula().ToString();
    sw.Write("'" + see + "' ");
}
else
{

    string see = cell.getFormula().ToString();
    sw.Write(see + " ");
} 
```

但是我不希望所有布尔数据都在引号中，只是那些为空的。所以，到目前为止我有

```
if (fileType == "bool")
{

    if (cell.getFormula().Empty)
    {
        sw.Write("'" + cell.getFormula().ToString() + "' ");
    }
} 
```

然而，这不起作用，因为单元格不是空的，还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:32:30.897

然后忽略它们是 bool 的事实，只检查该字段是否为空，例如：

```
 if ( cell.getFormula().StartsWith(" "))
                    {
                        {
                            for (int i = 0; i < cell.getFormula().Length; i++)
                            {
                                if (cell.getFormula()[i] == ' ')
                                {

                                    emptyBool.Add(" ");

                                }
                            }
                            string emptyBoolString = string.Join(" ", emptyBool.ToArray()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:23:01.323

您可以检查单元格长度是否大于 0（因此不是空的），如果不是（这意味着它是空的），则添加撇号。我是 c# 新手，所以我不知道这是否可行

```
if (fileType == "bool")
{
    if (!cell.getFormula().length > 0) // If the cell is not longer than 0 characters
    {
        string see = cell.getFormula().ToString();
        sw.Write("'" + see + "' ");
    }
    else 
    {
        string see = cell.getFormula().ToString();
        sw.Write(see + " ");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:05:51.570

手动编码导入和导出分隔函数充满危险。相反，我建议您使用像[FileHelpers](http://filehelpers.sourceforge.net/quick_start.html)这样的 3rd 方库，它是专门为帮助解决这些情况而开发的。

FileHelpers 之类的库允许您使用特定属性装饰模型，然后使用该库完成繁重的工作。这是他们网站上的示例：-

**模型**

```
[DelimitedRecord(",")]
public class Customer
{
    public int CustId;

    public string Name;

    public decimal Balance;

    [FieldConverter(ConverterKind.Date, "dd-MM-yyyy")]
    public DateTime AddedDate;

} 
```

**解析器类**

```
var engine = new FileHelperEngine(typeof(Customer));

// To Read Use:
Customer[] res = engine.ReadFile("FileIn.txt") as Customer[];

// To Write Use:
engine.WriteFile("FileOut.txt", res); 
```

注意：还有其他库做类似的工作，但是我只使用了[FileHelpers](http://filehelpers.sourceforge.net/quick_start.html)并没有失望。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T14:07:16.010

```
 if you are using **bool**, then its a **bit** so it can't be empty,
 it is either true or false or you can use null 
```

# python - 从字典列表中获取唯一值

> ID：11741876
> 
> 赞同：3
> 
> 时间：2012-07-31T13:59:53.040
> 
> 标签：python

> **可能重复：**
> [如何在 python 中统一 dict 列表](https://stackoverflow.com/questions/6280978/how-to-uniqify-a-list-of-dict-in-python)

我有一个清单如下

```
[
{'x':'1','y':'1'},{'x':'2','y':'2'},{'x':'1','y':'1'}
] 
```

我想得到一个新列表如下（独特的元素）

```
[
{'x':'1','y':'1'},{'x':'2','y':'2'}
] 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:05:25.317

```
import ast

l = [
{'x':'1','y':'1'},{'x':'2','y':'2'},{'x':'1','y':'1'}
]

[ast.literal_eval(el1) for el1 in set([str(el2) for el2 in l])] 
```

通常，保留独特元素的简单解决方案是将它们添加到集合中。但是，由于 dict 是不可散列的（不能放在集合中），我提供了一个解决方法。首先，将字典转换为字符串，放置在一个集合中（以保留唯一的），然后使用 ast.literal_eval 转换回字典。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T14:08:38.480

```
>>> lst = [{'x':'1','y':'1'},{'x':'2','y':'2'},{'x':'1','y':'1'}]
>>> map(dict, set(tuple(x.items()) for x in lst))
[{'y': '1', 'x': '1'}, {'y': '2', 'x': '2'}]
>>> 
```

# javascript - jQuery滚动到底部

> ID：11741880
> 
> 赞同：0
> 
> 时间：2012-07-31T14:00:04.097
> 
> 标签：javascript, jquery, ajax

我正在使用此功能来更新聊天对话。该函数每 2 秒运行一次。当我向上滚动时，更新会导致页面再次自动向下滚动，这会阻止我阅读旧消息。我该如何防止这种情况？

```
function opdaterPost(til, fra){
    $('.beskeder_vis').load('calls/opdater_post.php?til=' + til + '&fra=' + fra);
    $("#beskeder_vis").animate({ scrollTop: $("#beskeder_vis").prop("scrollHeight") }, 1500);   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:07:13.920

有几种方法，具体取决于您想要的行为......

1.  完全禁用滚动动画。
2.  使滚动以位置为条件... if ($("#beskeder_vis").offset = the bottom) then animate (所以它只在滚动到底部时才动画)
3.  将#beskeder_vis 的内容存储在变量中，进行加载，然后如果新内容与变量不同，则进行动画处理（因此仅在出现新内容时才进行动画处理）

# jquery - 带有可拖动手势元素的页面中的 jQuery Mobile 滑动手势

> ID：11741890
> 
> 赞同：0
> 
> 时间：2012-07-31T14:00:29.523
> 
> 标签：jquery, mobile, drag, gesture, swipe

我正在使用 jQuery Mobile 在各种 html 外部页面之间切换，并且在页面上我有一个这样的可拖动元素：

```
var moveMe = function(e) {
    e.preventDefault();
    var orig = e.originalEvent;
    var x = event.touches[0].pageX; 
    if(x>=275 && x<709){
        $(this).css({
            left: orig.changedTouches[0].pageX
        });
    }
};
$("#dragmetimer").bind("touchstart touchmove", moveMe); 
```

我正在使用 jquery mobile 切换页面，如下所示：

```
$("#content1").live('swipeleft', function (event, ui) {
  $.mobile.changePage("index2.html", "slide");
  event.stopImmediatePropagation();
});

$("#content2").live('swipeleft', function (event, ui) {
    $.mobile.changePage("index3.html", "slide");
    event.stopImmediatePropagation();
});
$("#content2").live('swiperight', function (event, ui) {
    $.mobile.changePage("index.html", { transition: "reverse slide"});
    event.stopImmediatePropagation();
}); 
```

问题是当我到达具有拖动功能的页面时，当我拖动它时，它也会滑动。

**有什么方法可以控制 jQuery Mobile 并使其在拖动手势时不读取滑动功能？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:17:15.890

我认为您的问题与事件冒泡有关。touchmove 事件在您的可拖动元素上被正确触发，但随后在 DOM 中一直冒泡，导致它触发页面滑动事件。

尝试将此添加到您的事件处理程序中，它将阻止事件冒泡：

```
e.stopPropagation(); 
```

所以你的功能是这样的：

```
var moveMe = function(e) {
    e.preventDefault();
    e.stopPropagation();
    var orig = e.originalEvent;
    var x = event.touches[0].pageX; 
    if(x>=275 && x<709){
        $(this).css({
            left: orig.changedTouches[0].pageX
        });
    }
}; 
```

# hibernate - 如何使用 Hibernate Annotations 将 Firebird Smallint 映射到布尔值？

> ID：11741895
> 
> 赞同：2
> 
> 时间：2012-07-31T14:00:51.117
> 
> 标签：hibernate, firebird, hibernate-annotations

我有一个在 Firebird 2.0 中运行的旧数据库，我需要将 SmallInt 列映射到一个布尔类型，当它`SmallInt = 0`是`False`时，`SmallInt = 1`它是`True`.

我还需要使用 Hibernate Annotations 来完成。

我正在使用休眠 3.6。

有小费吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T15:14:56.290

再搜索一点后，我可以`org.hibernate.type.NumericBooleanType`在[http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/types.html#types-value-basic上找到这个休眠类型](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/types.html#types-value-basic)

我试图以这种方式进行映射：

```
@Type(type = "org.hibernate.type.NumericBooleanType")
private Boolean field; 
```

但是，这不起作用，因为 Hibernate 抛出了这个异常：

```
org.hibernate.HibernateException: Wrong column type in %TABLE_NAME% for column %COLUMN_NAME%. Found: smallint, expected: integer 
```

因此，我尝试强制定义此列，以这种方式映射：

```
@Column(columnDefinition = "SMALLINT")
@Type(type = "org.hibernate.type.NumericBooleanType")
private Boolean field; 
```

现在这就像一个魅力。

# javascript - JS 正则表达式只允许数字、分号和连字符

> ID：11741899
> 
> 赞同：0
> 
> 时间：2012-07-31T14:01:04.843
> 
> 标签：javascript, regex

我正在构建一个应用程序，它应该只接受以下格式的字符串：

1.  12345（只有一个数字）
2.  12345;23456（两个或多个数字，用 ; 分隔）
3.  12345-12367（由 - 分隔的数字范围）

java 脚本正则表达式应该只允许上述格式并且不应该接受任何其他格式或符号。任何人都可以为此想出一个正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:04:34.857

这是您需要的正则表达式：`/^\d+((;\d+)*|-\d+)?$/`

`(;\d+)*`将检查以“;”分隔的多个数字

`-\d+`将检查范围

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:04:49.603

尝试

```
^[0-9]+([;-][0-9]+)?$ 
```

那应该工作

`[0-9]+`匹配 1 个或多个数字 [;-] 匹配 a`;`或 a`-`

`(...)?`是可选匹配

`^``$`锚定字符串的开头和结尾

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-12T06:52:39.113

**^[0-9-;]{0,50}$**

**0-9**只接受数字

**-;** 只允许 - 和 ;

{0,50} 只允许 50 个字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T14:07:00.130

假设您要查找的数字部分每次都是 5 位数字，则以下内容应符合您的要求。

```
[0-9]{5}((;|-)[0-9]{5}){0,1} 
```

如果您需要不同的长度，您可以使用另一个固定长度或范围如 {3,5} 来更新 3 到 5 位数字的字符串的 {5}。如果您希望能够使用列出的分隔符​​捕获两个以上的数字，您可以使用

```
[0-9]{5}((;|-)[0-9]{5})* 
```

# iphone - iphone sdk中的设备方向

> ID：11741903
> 
> 赞同：0
> 
> 时间：2012-07-31T14:01:07.980
> 
> 标签：iphone, ios, device-orientation

我需要 ipad 以横向和纵向显示内容..所以我已经完成了代码并在每个方向上完成了控件的位置。它工作正常..我的代码是

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    if (interfaceOrientation == UIInterfaceOrientationLandscapeRight ||interfaceOrientation == UIInterfaceOrientationLandscapeLeft  ) {

        _viewContainer.frame = CGRectMake(342, 1, 681, 707);
        _viewtopic.frame = CGRectMake(1, 62, 343, 56);
        _viewpublicspeekingheaderleft.frame = CGRectMake(0, 6, 341, 58);
        _viewTableview.frame = CGRectMake(1, 118, 341, 590);
        _viewFooter.frame = CGRectMake(1, 716, 1024, 48);

  if (interfaceOrientation == UIInterfaceOrientationPortrait ||interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown  ) {

        _viewContainer.frame = CGRectMake(276, 1, 503, 946);
        _viewtopic.frame = CGRectMake(0, 58, 275, 50);
        _viewpublicspeekingheaderleft.frame = CGRectMake(0, 1, 275, 58);
        _viewTableview.frame = CGRectMake(1, 109, 274, 837);
        _viewFooter.frame = CGRectMake(1, 954, 767, 48);

    }

    return YES;
} 
```

上面的代码对我来说很好，我把控制器放在了正确的位置上。这是我的问题，我必须设置一个计时器来显示全屏，我需要在视图控制器中隐藏一些控制器，我已经完成了计时器设置为 3 秒，3 秒后它隐藏了一些控件并安排视图控制器中的其他控制器以显示完整的屏幕。它对我来说也很好用。我的代码是

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Define the timer object

    NSTimer *timer;

   // Create the timer object

    timer = [NSTimer scheduledTimerWithTimeInterval:3.0 target:self 
                                           selector:@selector(updateorientation:) userInfo:nil repeats:NO];
}

- (void) updateorientation:(NSTimer *)incomingTimer
{

    _tableTopic.hidden =YES;
    _viewtopic.hidden =YES;
    _viewpublicspeekingheaderleft.hidden =YES;
    _viewTableview.hidden =YES;
    _imgpulbicspeakingabovethetableview.hidden =YES;
    _topiclabel.hidden =YES;
    _lblpublicspeekingleft.hidden =YES;

    UIInterfaceOrientation orientation =[[UIApplication sharedApplication] statusBarOrientation];
    if (orientation == UIDeviceOrientationPortrait || orientation == UIDeviceOrientationPortraitUpsideDown ) {
        NSLog(@"portrait");// only works after a rotation, not on loading app

        _imgMicimage.frame = CGRectMake(69, 130, 635, 216);
          _txtContentofTopic.frame = CGRectMake(69, 354, 635, 203);
          _viewContainer.frame = CGRectMake(0, 0, 768, 1024);

    }
    UIInterfaceOrientation orientationLandscape =[[UIApplication sharedApplication] statusBarOrientation];
    if (orientationLandscape == UIDeviceOrientationLandscapeLeft || orientationLandscape == UIDeviceOrientationLandscapeRight ) {
        NSLog(@"landscape");

        _imgMicimage.frame = CGRectMake(93, 113, 836, 239);
        _txtContentofTopic.frame = CGRectMake(93, 360, 836, 203);
        _viewContainer.frame = CGRectMake(0, 0, 1024, 768);

    }
    } 
```

它工作正常，但是在计时器触发后，我改变了设备的方向，我只得到了 `- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {`函数中的排列。我需要时间函数中的排列。如何解决这个问题。

提前致谢。

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:09:22.113

您*不*应该在`-shouldAutorotateToInterfaceOrientation:`. 该方法只是确定您的 UI 是否应该旋转（并且很快会被新系统取代）。您应该使用这些方法来布局您的 UI 以响应实际的旋转：

*   `-willRotateToInterfaceOrientation:duration:`
*   `-willAnimateRotationToInterfaceOrientation:duration:`
*   `-didRotateFromInterfaceOrientation:`

有关这些的更多信息，请参阅[`UIViewController`文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)。

在 iOS 5 上，`-viewWillLayoutSubviews`可能是另一个不错的选择。（即使您的控制器的视图当前不可见，它也会被调用。）

# git - 为什么在 git rebase 之后应该做：git add？

> ID：11741904
> 
> 赞同：1
> 
> 时间：2012-07-31T14:01:07.683
> 
> 标签：git, git-rebase

为什么在 git rebase 之后应该做：“git add changedfile”？

我的问题的更多解释：

1.  将命令文件添加到暂存而不提交他

2.  什么 git rebase --continue 做什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T14:03:26.557

If Git is telling you to type `git rebase --continue`, it's because the rebase isn't finishing. It sounds like you're stopping mid-rebase because of one or more conflicted files.

When you are in a conflicted state, you can type `git status` and look for "Unmerged paths" and files marked as "both modified":

```
# Unmerged paths:
#   (use "git add/rm ..." as appropriate to mark resolution)
#
#   both modified:      README 
```

Git is asking you to manually resolve the conflicted file, remove the change markers, and then `git add <file>` to mark the conflict resolved. This moves the changes into the staging area, telling Git to include them in the rebased commit which it will generate when the rebase continues.

Once you've done this, you can continue rebasing with `git rebase --continue`.

# haskell - 在 repa-algorithms 函数中观察到意外的性能

> ID：11741905
> 
> 赞同：3
> 
> 时间：2012-07-31T14:01:15.933
> 
> 标签：haskell, repa

我正在使用以下代码测试该`mmultP`功能`repa-algorithms-3.2.1.1`（为简洁起见，此处稍作浓缩）：

```
import Data.Array.Repa hiding            (map)
import Data.Array.Repa.Algorithms.Matrix (mmultP)

import Control.Monad                     (replicateM)
import Control.Arrow                     ((&&&))
import System.Random.MWC                 (initialize, uniformR)
import Control.Monad.ST                  (runST)
import Data.Vector.Unboxed               (singleton)
import Data.Word                         (Word32)

-- Create a couple of dense matrices
genRnds :: Word32 -> [Double]
genRnds seed = runST $ do
    gen <- initialize (singleton seed)
    replicateM (1000 ^ 2) (uniformR (0, 1) gen)

(arr, brr) = head &&& last $ map (fromListUnboxed (Z :. 1000 :. 1000 :: DIM2) . genRnds) [1, 100000]

-- mmultP test
main :: IO ()
main = mmultP arr brr >>= print 
```

并按[此处](http://hackage.haskell.org/packages/archive/repa/3.2.1.1/doc/html/Data-Array-Repa.html)指定，使用编译

```
ghc mmultTest.hs -Odph -rtsopts -threaded -fno-liberate-case -funfolding-use-threshold1000 -funfolding-keeness-factor1000 -fllvm -optlo-O3 -fforce-recomp 
```

这是线程运行时中的顺序运行：

```
$ time ./mmultTest +RTS -K100M > /dev/null
real    0m10.962s
user    0m10.790s
sys     0m0.161s 
```

这是一个使用 4 核的版本（在四核 MacBook Air 上运行）：

```
$ time ./mmultTest +RTS -N4 -K100M > /dev/null
real    0m13.008s
user    0m18.591s
sys     0m2.067s 
```

有人对这里发生的事情有任何直觉吗？`-N2`对于and ，我也得到了比顺序慢的性能`-N3`；每个核心似乎都增加了一些额外的时间。

请注意，我*确实*观察到一些手动 Repa 矩阵乘法代码的并行性带来了一些小的收益。

**更新**：

令人费解；我替换`main`为

```
mmultBench :: IO ()
mmultBench  = do 
   results <- mmultP arr brr 
   let reduced = sumAllS results 
   print reduced 
```

并删除了对`mwc-random`：

```
(arr, brr) = head &&& last $ map (fromListUnboxed (Z :. 1000 :. 1000 :: DIM2)) (replicate 2 [1..1000000]) 
```

具有运行时选项的 Criterion 基准测试`-N1 -K100M`产生：

```
mean: 1.361450 s, lb 1.360514 s, ub 1.362915 s, ci 0.950
std dev: 5.914850 ms, lb 3.870615 ms, ub 9.183472 ms, ci 0.950 
```

并`-N4 -K100M`给我：

```
mean: 556.8201 ms, lb 547.5370 ms, ub 573.5012 ms, ci 0.950
std dev: 61.82764 ms, lb 40.15479 ms, ub 102.5329 ms, ci 0.950 
```

这是一个可爱的加速。我几乎会认为之前的行为是由于将生成的 1000x1000 数组写入标准输出，但正如我所提到的，如果我交换我自己的矩阵乘法代码，我确实观察到那里的并行性增益。还在挠头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:11:37.877

这看起来确实很奇怪，但也许您只是为并行性支付了通常的费用，但没有获得收益？——所以它类似于与荒谬的不平衡负载并行化？

似乎更多的事情一定是错的。然而，令我印象深刻的是——它可能对你的结果给出部分解释——你只使用了一个`repa`组合子，`mmultP`. 该框架几乎没有机会！`zipWith`如果我用一些东西等使事情复杂化`foldAllP`——例如

```
main :: IO ()
main =  arr `xxx` brr >>= foldAllP (+) 0 >>= print where
   xxx arr brr = R.zipWith (+) <$> complicated arr <*> complicated brr
   complicated = mmultP brr >=> mmultP arr >=> mmultP brr >=> mmultP arr 
```

然后用我的两核老爷车，我得到了两核并行器的梦想：

```
 $ time ./mmmult +RTS -K200M  -N2
 6.2713897715510016e16

 real   0m8.742s
 user   0m16.176s
 sys    0m0.444s

 $ time ./mmmult +RTS -K200M  
 6.2713897715512584e16

 real   0m15.214s
 user   0m14.970s
 sys    0m0.239s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T03:46:44.437

1) 将矩阵打印到标准输出将使程序 IO 绑定。在这种情况下记录的任何加速数据都是谎言。

2) 没有 4 核 MacBook Air。它们都是 2 个核心，每个核心有 2 个超线程。一次实际上只能运行 2 个线程。> -N2 的任何加速都将归因于延迟隐藏——核心上的第二个超线程可以运行，而第一个超线程在缓存未命中时停止。

# iphone - 在 UDP 中使用 3G 来电的 iPhone 上的 Pjsip 没有音频

> ID：11741908
> 
> 赞同：2
> 
> 时间：2012-07-31T14:01:29.943
> 
> 标签：iphone, ios, sip, 3g, pjsip

在我的 iPhone 项目中下载、编译和安装 pjsip 2.0 版（来自 pjsip.org）后，我遇到了以下问题：

问题是当我在 3G 上使用 UDP 时。

**iPhone 设备使用 3G 时 - 来电时，我听不到对方的声音，但对方可以听到我的声音。** 但是，在 3G 上拨出电话时，一切正常。

当手机在 Wi-Fi 上时，一切正常，传入、传出，双方都听得很好。

此外，TCP 适用于所有场景，包括 3G 和 Wi-Fi。

尝试实施此处找到的解决方案：http: [//trac.pjsip.org/repos/wiki/audio-problem-local-no-audio](http://trac.pjsip.org/repos/wiki/audio-problem-local-no-audio)

但无济于事，一直在这个问题上挠头......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-01T07:27:27.490

这很可能是与任一 sip 端点端的设置有关的问题，主要原因是 NAT。

我建议您使用[STUN](http://en.wikipedia.org/wiki/STUN)、[TURN](http://en.wikipedia.org/wiki/Traversal_Using_Relays_around_NAT)和[ICE](http://en.wikipedia.org/wiki/Interactive_Connectivity_Establishment)设置两个 sip 端点。使用 STUN 和 ICE，您可能能够解决大多数 NAT 问题，但如果没有 TURN 服务器，您将无法解决所有网络问题。

如果两个端点都不支持 STUN、TURN 和 ICE（例如硬件 sip 设备），那么您通常需要设置 B2BUA（作为媒体网关）或使用 sip 代理服务器支持的某种媒体网关。

至于您的特定设置不起作用的原因，它需要 pjsip 日志来了解正在发生的事情以及有关两个 sip 端点的网络环境的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-30T18:10:10.127

你应该试试这个。在 startPjsipAndRegisterOnServer 方法中添加 UDP 传输。

```
{
        // Init transport config structure
        pjsua_transport_config cfg;
        pjsua_transport_config_default(&cfg);
        cfg.port = 5080;
        status = pjsua_transport_create(PJSIP_TRANSPORT_UDP, &cfg, NULL);
        if (status != PJ_SUCCESS) error_exit("Error creating transport", status);
    } 
```

# android - 使用 random_shuffle 会导致 SIGSEGV 或 SIGBUS

> ID：11741911
> 
> 赞同：0
> 
> 时间：2012-07-31T14:01:46.700
> 
> 标签：android, stl, android-ndk

Android NDK 上的此调用

```
random_shuffle(node->elements.front(), node->elements.back()); 
```

导致 SIGBUS 或 SIGSEGV。我正在使用 gnustl（共享/静态没有区别）。另外，我无法切换 stl 库，因为我需要异常支持。到目前为止，所有其他 stl 功能都可以完美运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:03:12.010

使用`node->elements.begin()`和`node->elements.end()`。

`front()`并`back()`返回元素，而不是迭代器。我认为这`node->elements`是指针的集合；在这种情况下，`random_shuffle`将尝试随机化内存中第一个元素的地址和最后一个元素的地址之间的任何内容。这不是你想要的。

# java - 如何在java中实现水平手风琴？

> ID：11741913
> 
> 赞同：0
> 
> 时间：2012-07-31T14:01:50.970
> 
> 标签：java, eclipse-rcp, accordion, jface

在 Java 中实现水平手风琴的最佳方法是什么？我正在使用 Swing、JFace 和 Eclipse RCP。

[这](http://nicolahibbert.com/demo/liteAccordion/)是一个水平手风琴的例子，用 JavaScript 实现！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T11:20:58.340

我很确定您将使用 SWT，而不是 Swing。如果我是对的，您可以查看[Nebula Project](http://www.eclipse.org/nebula/)或 org.eclipse.swt.widgets.ExpandBar。我还没有看到 swt 的水平手风琴，但是看看代码你可能会知道如何实现它。另一种解决方案是使用浏览器来使用 js 手风琴。[这](http://www.vogella.com/blog/2009/12/21/javascript-swt/)是一个浏览器教程，可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:11:37.840

使用 Swing 的类似问题已经在本主题[Accordion for Swing 中提出？](https://stackoverflow.com/questions/2944256/accordion-for-swing)

可以在[此处](http://www.informit.com/guides/content.aspx?g=java&seqNum=236)找到垂直实施的示例。我认为横向实现并不难。

# android - ViewPager + FragmentStatePagerAdapter ：需要知道何时显示片段（选中）

> ID：11741914
> 
> 赞同：0
> 
> 时间：2012-07-31T14:01:52.673
> 
> 标签：android, fragment, fragmentpageradapter

我正在使用插入到 FragmentStatePagerAdapter 的 ViewPager。每个片段都包含一个列表视图。在此列表视图中，我希望显示广告并调用分析服务器。我只想在用户导航到片段时进行这些调用（因此我不能在片段中使用 onCreateView 或 onActivityCreated 事件）。有没有我可以为此挂钩的事件？

**更新** 我意识到我获取当前片段的方式是有缺陷的

```
 @Override
    public void onPageSelected(int page) {
      this.currentPage = page;
      tabsAdapter.getItem(page);
    } 
```

`getItem(int position)`在寻呼机中实际上负责实例化片段，因此它将创建一个新的未附加片段（因此`getActivity()`返回 null）。我想我将采用一种方法，我保留片段的地图（`<Position, Fragment>`），当在 pagerAdapter 中调用 destoryItem 时，我将从地图中删除片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:04:03.097

这个怎么样：

[http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html)

该`onPageSelected(int)`方法听起来像你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:06:36.390

你是对的，最好的选择是这里的第二个解决方案：http: [//tamsler.blogspot.nl/2011/11/android-viewpager-and-fragments-part-ii.html](http://tamsler.blogspot.nl/2011/11/android-viewpager-and-fragments-part-ii.html)

所以你的想法是正确的。

# c# - 为什么在使用带有隐式参数和显式参数的 DataContext.ExecuteQuery 时会得到不同的运行时？

> ID：11741917
> 
> 赞同：1
> 
> 时间：2012-07-31T14:01:55.763
> 
> 标签：c#, sql, linq-to-sql

我有一个包含 TFS 构建的测试程序集统计信息的表，如下所示：

```
AssemblyName   Duration      TestResults    MsPerResult Branch
Ass1.dll            100                2             50     $/branch1
Ass2.dll            200                2            100     $/branch1/sub1
Ass3.dll            400                2            200     $/branch1/sub1/subsub1
... 
```

另外，我有一个汇总类，用于保存 DataContext.ExecuteQuery<> 结果

```
public class AssemblyStatistics
{
    public string AssemblyName { get; set; }
    public int TestResultCount { get; set; }
    public long ValueInMs { get; set; }
} 
```

如果我执行以下代码，我的查询总是需要相同的时间，即使我限制结果只查询一个子分支：

```
context.ExecuteQuery<AssemblyStatistics>(
  "SELECT TOP 10 AssemblyName, SUM(Duration) AS ValueInMs, SUM(TestResults) AS TestResultCount FROM AssembliesByDuration WHERE Branch LIKE {0} GROUP BY AssemblyName ORDER BY SUM(Duration) DESC", "$/branch1/sub1%").ToList(); 
```

但是使用以下（非网络安全）格式，运行时按预期下降

```
context.ExecuteQuery<AssemblyStatistics>(
  @"SELECT TOP 10 AssemblyName, SUM(Duration) AS ValueInMs, SUM(TestResults) AS TestResultCount FROM AssembliesByDuration WHERE Branch LIKE '"
                  + "$/branch1/sub1%" + "' GROUP BY AssemblyName ORDER BY SUM(Duration) DESC").ToList(); 
```

我是否遗漏了什么，或者这只是 Linq2SQL 之后评估 LIKE 的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:19:18.850

在第一个查询中，您似乎缺少 {0} 周围的单引号。

# c# - 利用两个 Redis 实例 - 类似于 Mongos

> ID：11741919
> 
> 赞同：0
> 
> 时间：2012-07-31T14:02:03.923
> 
> 标签：c#, python, redis

我一直在读到扩展 Redis 的正确方法是添加一个单独的实例（即使在同一台机器上也可以，因为 CPU 密集型）。我想知道是否有任何现有的组件可以促进类似于 Mongos 的循环/写入/读取，以便我可以调用它并且它会正确地写入/读取到其中一个底层实例。我意识到它比我上面所代表的更复杂，但不想通过尝试编写自己的代理等来重新发明轮子来处理这个问题。

任何建议/提示等将不胜感激。

谢谢，

小号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:19:49.690

该方法适用于扩展读取，但不适用于写入，因为 Redis 尚未与 redis-cluster 一起发布。

对于负载平衡读取，任何 TCP 负载平衡器都应该可以正常工作，例如[Balance](http://www.inlab.de/balance.html "平衡")。我链接那个是因为它是基于软件的，并且设置和使用非常简单。当然，如果你有一个硬件负载均衡器，你可以在那里做，或者使用其他几个基于软件的负载均衡器。

另一种选择是在您的客户端代码中实现循环，尽管我不想自己这样做。一旦 redis-cluster 发布，你连接到哪个服务器就无关紧要了。

为了平衡写入，您需要采用对数据进行分片的方式，IMO 在[Craigslist 的 Redis usgae](http://blog.zawodny.com/2011/02/26/redis-sharding-at-craigslist/ "Craigslist 上的 Redis")页面上对此进行了很好的描述。如果你认为你需要走这条路，我建议你走 JZ 的路线并提前做好底层设置。理想情况下，一旦 redis-cluster 准备好，应该有最少的代码更改（如果有的话）移动到为您处理它的集群。

如果您想要一个 IP 来处理读取和写入以及多个分片写入主机，您可能需要自己编写那个“代理”，或者将代码放在您编写的客户端代码中。或者，[此代理公告](http://asyncionews.com/?p=1491)可能包含您需要的内容，尽管我没有看到任何有关路由的内容。

最终，我认为您需要在实现之前测试和验证您确实需要写入缩放。我发现如果我在一个或多个从属设备上进行所有读取，并让从属设备管理磁盘持久性，那么写入性能通常不是问题。

# javascript - 包装所有 AJAX 调用 jQuery

> ID：11741920
> 
> 赞同：2
> 
> 时间：2012-07-31T14:02:04.950
> 
> 标签：javascript, jquery, ajax, html

我使用填充我网站的许多部分

```
$("#theDivToPopulate").load("/some/api/call.php", callBackToBindClickEventsToNewDiv); 
```

其中 /some/api/call.php 返回一个构建列表、div 或其他一些 HTML 结构以直接放入我的目标 div。互联网最近运行缓慢，我注意到单击按钮（启动这些 API 调用）和填充 div 之间的时间是几秒钟。是否有一种简单的方法可以全局包装所有加载调用，以便在调用之前显示包含“正在加载...”的 div，并在 API 调用完成后隐藏。

我不能简单地将隐藏 div 的代码放入 callBackToBindClickEventsToNewDiv 中，因为某些加载事件具有不同的回调。我将不得不将代码复制到每个丑陋且违背目的的函数中。我希望任何 .load 的流程如下：

```
 1) dispplayLoadingDiv()
 2) Execute API call
 3) Hide loading div
 4) do callback function. 
```

加载 div 必须首先隐藏，因为回调包含一些动画以很好地引入新加载的 div。

编辑：扩展jacktheripper的答案：

```
var ajaxFlag;
$(document).ajaxStart(function(){
    ajaxFlag = true;
    setTimeout(function (e) {
        if(ajaxFlag) {
            hideAllDivs();
            enableDivs(['loading']);
        }
    }, 500);

}).ajaxStop(function(){
    ajaxFlag = false;
    var load = $("#loading");
    load.css('visibility','hidden');
    load.css('display','none');
    load.data('isOn',false);
}); 
```

只有在页面加载时间超过 500 毫秒时才会显示这种加载方式。我发现加载进出非常快，这使得快速页面加载变得不稳定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T14:05:32.523

使用以下 jQuery：

```
$(document).ajaxStart(function(){ 
    $('#loader').show(); 
}).ajaxStop(function(){ 
    $('#loader').hide();
}); 
```

您有一个名为的元素`#loader`，其中包含您要在执行 AJAX 请求时显示的内容。它可以是包含文本、图像（例如 gif）或任何类似内容的跨度。该元素最初应设置为`display: none`

您甚至不需要在其他任何地方调用该函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:05:17.733

尝试这个

```
$("#someButtonId").click(function(e){
   e.preventDefault();
   $("#theDivToPopulate").html("Loading...");
   $.get("/some/api/call.php",function(data){
       $("#theDivToPopulate").fadeOut(100,function(){
           $("#theDivToPopulate").html(data).fadeIn(100,function(){
               //Do your last call back after showing the content
           });
      });
   });    
}); 
```

# javascript - Jquery class is not responding to .click() despite being listed within selectors

> ID：11741922
> 
> 赞同：0
> 
> 时间：2012-07-31T14:02:13.687
> 
> 标签：javascript, jquery, html

I have some several labels on a webpage, that can be clicked, and all share the class 'btn'. In the console, if I use the selector `$('.btn');` among others the following elements DO appear:

```
<label id=​"skillstable_Certification" class=​"row btn">​Certification​&lt;/label>​,
<label id=​"skillstable_Compliance" class=​"row btn">​Compliance​&lt;/label>​,
<label id=​"skillstable_Technology" class=​"row btn">​Technology​&lt;/label>​,
<label id=​"skillstable_version(s)​" class=​"column btn">​Version(s)​&lt;/label>,​
<label id=​"skillstable_startdate" class=​"column btn">​StartDate​&lt;/label>​,
<label id=​"skillstable_enddate" class=​"column btn">​EndDate​&lt;/label>​,
<label id=​"skillstable_elapsedtime" class=​"column btn">​ElapsedTime​&lt;/label>,​
<label id=​"skillstable_expertiserating" class=​"column btn">​ExpertiseRating​&lt;/label>,​ 
```

which matches the HTML:

```
</fieldset>
  <label id="fs_skillstable_heading" class="fs btn heading skillstable">Skills Table</label><br class="">
  <label id="skillstable_Certification" class="row btn">Certification</label>
  <label id="skillstable_Compliance" class="row btn">Compliance</label>
  <label id="skillstable_Technology" class="row btn">Technology</label><br class="">
  <label id="skillstable_version(s)" class="column btn">Version(s)</label><br class="">
  <label id="skillstable_startdate" class="column btn">StartDate</label><br class="">
  <label id="skillstable_enddate" class="column btn">EndDate</label><br class="">
  <label id="skillstable_elapsedtime" class="column btn">ElapsedTime</label><br class="">
  <label id="skillstable_expertiserating" class="column btn">ExpertiseRating</label><br class="">
</fieldset> 
```

however, these elements only are not registering with the `$('.btn').on('click', function() {...})` function, which has a console.log() section to show that it has been clicked. They all have the `.btn` class, so I am totally lost here. I am trying to make an array to use for persistence, and made a quick variable with .push() to show all the elements I have clicked on so i can use that string to make a persistent URL, but noticed that these sections only are not registering.

The generation for the elements are scoped within a self calling function `(function TCC() {...})();`, so I tried pulling them out of that function and calling them individually, but that did not work either. I also switched the functions from .click() to .on('click', function(){}) to no avail.

[Here](http://specialorange.org/resume) is the webpage.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:07:24.903

尝试这个; [on()](http://api.jquery.com/on/)用法：

编辑：@David Thomas 提到`this.id;`会比`$(this).attr('id');`：

```
$(document).on('click','.btn',function() {
    var whichPart = this.id;
    console.log(whichPart);
}); 
```

[这是jsFiddle。](http://jsfiddle.net/ueHNg/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:20:15.557

出现此问题是因为您在“列按钮生成器”循环之前绑定了单击事件。最简单的解决方法是使用“现场”活动

```
$('.btn').live('click',function(){...}) 
```

或者，为循环创建一个回调并绑定点击事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:13:19.257

You can test the sample code on following link:

[http://jsfiddle.net/shivkant/ueHNg/4/](http://jsfiddle.net/shivkant/ueHNg/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T14:46:47.800

您的页面适用于我的 chrome，我单击左侧部分的专业知识/技能/工具等，如果这是您想要的，它会显示我在右侧橙色部分中单击的链接。

如果控制台/开发人员工具已经打开，它可以在 IE 中运行，这可能是因为您在代码中使用了 console.log 语句

参考这个

[IE8 中的 console.log 发生了什么？](https://stackoverflow.com/questions/690251/what-happened-to-console-log-in-ie8)

# html - Indian rupee symbol

> ID：11741931
> 
> 赞同：4
> 
> 时间：2012-07-31T14:02:44.750
> 
> 标签：html, internet-explorer, unicode

The indian rupee symbol Unicode U+20B9 (HTML: ₹) renders correctly in latest version of IE/ firefox but it doesn't it render in IE8

Is this related to system font or the internet explorer?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:23:19.027

并非所有字体都有这个符号。因此，如果您没有明确指定字体，浏览器会尝试使用后备字体来显示内容。IE 可能会使用不同的后备字体。

我不确定您是否可以将此称为 IE 问题。这可能是字体问题：IE 尝试使用的字体可能会错误地告诉系统它可以显示标志，而实际上不能。

因此，如果您知道哪些字体可以显示卢比，请在 HTML 中为其指定其中一种字体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-02T20:40:36.963

我来晚了，但我认为这是最好的解决方案，请访问[http://fontawesome.io/icons/](http://fontawesome.io/icons/)

# android - Is possible to declare attributes with the same name for different views?

> ID：11741932
> 
> 赞同：2
> 
> 时间：2012-07-31T14:02:45.003
> 
> 标签：android, android-xml

I've next problem. I create next attr.xml :

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="PublicMap">
        <attr name="public_map" format="boolean"/>
    </declare-styleable>
    <declare-styleable name="SceneMap">
        <attr name="public_map" format="boolean"/>
        <attr name="preview_mode" format="boolean"/>
    </declare-styleable>
</resources> 
```

now project can not be compiled. Error is "error: Attribute "public_map" has already been defined". Is not possible to declare attributes with the same name for different views?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:19:37.750

我在我的一个项目上对此进行了测试，并注意到它**不可能**在*`attr`*不同的*`declare-styleable`*.

但是，您可以附加前缀以区分具有相似名称的属性。

# sql - Why UNION result not appearing at bottom?

> ID：11741934
> 
> 赞同：1
> 
> 时间：2012-07-31T14:02:49.193
> 
> 标签：sql, sql-server, union

Initially I was working with two query, One was returning Student's marks, second was returning Grand Total Marks.

Now I decided to Union these two queries but my Grand Total row is appearing at top, which I want at bottom, I tried changing the sequencing of two, but no impact on result. Please suggest, my query is:

```
SELECT AISECTRESULT_Schemes.SUBNO, 
        AISECTRESULT_Schemes.SUBJECT, 
        AISECTRESULT_Schemes.CE_TotalMarks, 
        AISECTRESULT_ExamMarksData.TotalMarksObt_C, 
        AISECTRESULT_Schemes.TE_TotalMarks, 
        AISECTRESULT_ExamMarksData.TotalMarksObt,
        MAXMARKS, 
        AISECTRESULT_ExamMarksData.OverAllMarks 
  FROM AISECTRESULT_Schemes 
 INNER JOIN AISECTRESULT_ExamMarksData 
    ON AISECTRESULT_Schemes.[EXAMSCHEME ID] = AISECTRESULT_ExamMarksData.EXAMSCHEMEID
 WHERE (AISECTRESULT_ExamMarksData.REGISTRATIONID = '201192145')

UNION

SELECT ''AS SUBNO,
       ''AS SUBJECT,
        SUM(AISECTRESULT_Schemes.CE_TotalMarks)CE_TotalMarks, 
        SUM(AISECTRESULT_ExamMarksData.TotalMarksObt_C)TotalMarksObt_C,
        SUM(AISECTRESULT_Schemes.TE_TotalMarks)TE_TotalMarks, 
        SUM(AISECTRESULT_ExamMarksData.TotalMarksObt)TotalMarksObt,
        SUM(AISECTRESULT_Schemes.MAXMARKS)MAXMARKS,
        SUM(AISECTRESULT_ExamMarksData.OverAllMarks)OverAllMarks
  FROM AISECTRESULT_Schemes
 INNER JOIN AISECTRESULT_ExamMarksData
    ON AISECTRESULT_Schemes.[EXAMSCHEME ID] = AISECTRESULT_ExamMarksData.EXAMSCHEMEID
 WHERE (AISECTRESULT_ExamMarksData.REGISTRATIONID = '201192145') 
```

![enter image description here](../Images/c33ce38296de661ee59dafe690c9817c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:08:15.823

查询结果的顺序是任意的，没有**明确** `ORDER BY`的.

现在您可能会注意到排序**似乎**总是相同的，但请放心：添加数据或更改聚集索引或诸如此类会使您认为理所当然的顺序无效。

**通常，您可以通过以下方式解决此问题**

*   添加一个虚拟列进行排序*（如果没有合理的现有列可供选择）*
*   在该列上显式排序

**例子**

```
SELECT 1 AS ToSortOn, ... FROM ...
UNION ALL SELECT 2 AS ToSortOn, ... FROM ...
ORDER BY ToSortOn 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:08:16.350

虽然不是最好的方法...

```
UNION ALL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T14:08:54.890

你需要一个`ORDER BY`关于你的查询。这应该这样做：

```
SELECT  SUBNO, 
        SUBJECT, 
        CE_TotalMarks, 
        TotalMarksObt_C, 
        TE_TotalMarks, 
        TotalMarksObt,
        MAXMARKS, 
        OverAllMark
FROM (  SELECT  AISECTRESULT_Schemes.SUBNO, 
                AISECTRESULT_Schemes.SUBJECT, 
                AISECTRESULT_Schemes.CE_TotalMarks, 
                AISECTRESULT_ExamMarksData.TotalMarksObt_C, 
                AISECTRESULT_Schemes.TE_TotalMarks, 
                AISECTRESULT_ExamMarksData.TotalMarksObt,
                MAXMARKS, 
                AISECTRESULT_ExamMarksData.OverAllMarks,
                1 ColOrder
        FROM AISECTRESULT_Schemes 
        INNER JOIN AISECTRESULT_ExamMarksData 
        ON AISECTRESULT_Schemes.[EXAMSCHEME ID] = AISECTRESULT_ExamMarksData.EXAMSCHEMEID
        WHERE AISECTRESULT_ExamMarksData.REGISTRATIONID = '201192145'

        UNION

        SELECT  ''AS SUBNO,''AS SUBJECT,
                SUM(AISECTRESULT_Schemes.CE_TotalMarks)CE_TotalMarks, 
                SUM(AISECTRESULT_ExamMarksData.TotalMarksObt_C)TotalMarksObt_C,
                SUM(AISECTRESULT_Schemes.TE_TotalMarks)TE_TotalMarks, 
                SUM(AISECTRESULT_ExamMarksData.TotalMarksObt)TotalMarksObt,
                SUM(AISECTRESULT_Schemes.MAXMARKS)MAXMARKS,
                SUM(AISECTRESULT_Exa![enter image description here][1]mMarksData.OverAllMarks)OverAllMarks,
                2
        FROM AISECTRESULT_Schemes 
        INNER JOIN AISECTRESULT_ExamMarksData 
        ON AISECTRESULT_Schemes.[EXAMSCHEME ID] = AISECTRESULT_ExamMarksData.EXAMSCHEMEID 
        WHERE AISECTRESULT_ExamMarksData.REGISTRATIONID = '201192145') AS Data
ORDER BY ColOrder 
```

# php - Backbone.js not rendering JSON -

> ID：11741938
> 
> 赞同：1
> 
> 时间：2012-07-31T14:02:58.167
> 
> 标签：php, json, backbone.js

I have to code:

```
window.TicketCollection = Backbone.Collection.extend({
    model:Tickets,
    url:"/index.php/tickets/viewJSON"
});
window.TicketsView = Backbone.View.extend({
    tagName:'div',
    initialize: function () {
        this.model.bind("reset", this.render, this);

    },
    render:function(eventName){
        _.each(this.model.models, function(ticket){
            $(this.el).append(new TicketListItemView({model:ticket}).render().el);
        },this);
        return this;
    }
});
window.TicketListView = Backbone.View.extend({
    tagName: "li",
    template:_.template($('#tickets-list-item').html()),
    render:function (eventName){
        $(this.el).html(this.template(this.model.toJSON));
        return this;
    }
});

var AppRouter = Backbone.Router.extend({
    routes:{
        "":"list"
    },
    list:function(){
        window.alert("alright");
        this.ticketList = new TicketCollection();
        this.ticketLists = this.ticketList.get();

        this.ticketListView = new TicketListView({model:this.ticketList});
        $("#ticketListHolder").html(this.ticketListView.render().el);
    },
});
var app = new AppRouter();
Backbone.history.start();
}); 
```

My php is as follows:

```
<?php header('Content-type: application/json');
echo json_encode(array("ticketID"=>"test", "ticketName"=>"1"));?> 
```

The response from the php is:

```
[{"ticketID":"1","ticketName":"Fix the admin system"}] 
```

HTML:

```
<div id="ticketListHolder">
    #

</div>
<script type="text/template" id="tickets-list-item">
        <div class="supTicket ticketHolder nobg">
        <div class="issueType">
        <span class="issueInfo"><%= ticketName %></span>
        <span class="issueNum">[ #<%= ticketID %>] - <%= fullName %></span>
        </div>
        </div>
</script> 
```

I get the error: `Uncaught ReferenceError: ticketName is not defined`, it appears that it's not parsing the json, instead reading it as one string block. Why is this error occuring, when my JSON is returning the correct data.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:20:54.137

你不使用`collection.fetch`任何地方。你的路由器可能应该是这样的

```
var AppRouter = Backbone.Router.extend({
    routes:{
        "":"list"
    },
    list:function(){
        window.alert("alright");
        this.ticketList = new TicketCollection();

        this.ticketListView = new TicketListView({
                model:this.ticketList,
                el:$("#ticketListHolder") // I directly assigned #ticketListHolder as the el
        });

        this.ticketList.fetch();
    },
}); 
```

还有一个小提琴，其中包含您的代码[http://jsfiddle.net/Cc9Ad/2/](http://jsfiddle.net/Cc9Ad/2/)的大部分工作版本，您 应该检查一些要点：

*   你的 ListView 和你的 ItemView 是相反的，
*   正如 Daniel Aranda 在他的回答中所说，尝试将系列和模型用于其预期目的，
*   this.model.toJSON 应该是 this.model.toJSON()
*   在您的模型上设置默认值，fullName 未定义，如果在此状态下使用会破坏模板引擎

修改后的代码

```
window.Tickets=Backbone.Model.extend({
    defaults: {
        fullName :"No full name"
    }
});
window.TicketCollection = Backbone.Collection.extend({
    model:Tickets,
    url:"/index.php/tickets/viewJSON"
});

window.TicketsView = Backbone.View.extend({
    tagName:'li',
    template:_.template($('#tickets-list-item').html()),

    initialize: function () {
    },
    render:function(eventName){
        console.log
        $(this.el).html(this.template(this.model.toJSON()));
        return this;
    }
});
window.TicketListView = Backbone.View.extend({   
    initialize: function () {
        this.collection.bind("reset", this.render, this);

    },

    render:function (){
        this.collection.each( function(ticket){
            $(this.el).append(new TicketsView({model:ticket}).render().el);
        },this);

        return this;
    }
});

        var ticketList = new TicketCollection();

        var ticketListView = new TicketListView({
                collection:ticketList,
                el:$("#ticketListHolder")
        });

// ticketList.fetch();
ticketList.reset([
    {"ticketID":"1","ticketName":"Fix the admin system"},
    {"ticketID":"2","ticketName":"The ticket 2"}
]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:22:14.990

模型与集合不同。

您正在尝试将集合用作模型。

检查这个例子： [http ://danielarandaochoa.com/backboneexamples/blog/2012/02/22/real-world-usage-of-a-backbone-collection/](http://danielarandaochoa.com/backboneexamples/blog/2012/02/22/real-world-usage-of-a-backbone-collection/)

另外要解决您的特定问题，请将对象而不是 Backbone.Model 传递给您的模板

```
 $(this.el).html(this.template(this.model.toJSON())); 
```

你错过了括号。

但正如我所说，我建议您阅读解释如何使用集合的文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:12:37.433

I use JSON.parse() function to parse the data sent by the PHP.

```
var a = $.ajax({
    url:"/index.php/tickets/viewJSON",
    async:false,
    cache:false
}).responseText;

jsonData = JSON.parse(a);

then use  _.each to loop jsonData then push each data to your model. 
```

# asp.net-mvc - Save file dialog for local machine in mvc

> ID：11741946
> 
> 赞同：0
> 
> 时间：2012-07-31T14:03:14.503
> 
> 标签：asp.net-mvc, savefiledialog

wondering, if someone can help. I've written this code, which will generate an CSV file spreadsheet and save it to a specified location. I want to display a "Save as" dialogue box by reading the file from the stored location and then asking user, where they want to store it. The excel file is not generated and after click on "Export To CSV" in next window, it will show undefined as a massege! However my problem is the code i've written seems to be outputting the file directly to my browser, so i get all the contents of the CSV file on my browser screen, not displaying the save as dialogue box as expected!

Here is my Code

```
 public ActionResult ExportToCSSReport(List<CEPMobility.CEPServiceProxy.CSSReport>  Report) 
        {
            MemoryStream output = new MemoryStream(); 
            StreamWriter writer = new StreamWriter(output, System.Text.Encoding.UTF8);
            writer.WriteLine("PROJECT NAME,CSS ID,CSS Name,Customer Reprentative Name,CSS Recived Date,CSI,TOP 3 STRENGTH,TOP 3 OFI,Any Other COMMENT");
            foreach (CEPMobility.CEPServiceProxy.CSSReport objreport in Report)
            {
                writer.WriteLine("\"" + objreport.PROJECT_NAME + "\",\"" + objreport.CSS_ID + "\",\"" + objreport.CSS_NAME + "\",\"" + objreport.CUST_REP_NAME + "\",\"" + objreport.CSS_RECIEVED_DT + "\",\"" + objreport.CSI + "\",\"" + objreport.TOP_3_STRENGTH + "\",\"" + objreport.TOP_3_OFI + "\",\"" + objreport.COMMENT + "\""); 
            } 
            writer.Flush(); 
            output.Seek(0, SeekOrigin.Begin);
            return File(output, "text/csv", "CSSReport.csv"); 
        } 
```

In response to gor, it would show the same undefined message at the top:

```
public ActionResult ExportToCSSReport(List<CEPMobility.CEPServiceProxy.CSSReport>  Report) 
{
    CEPServiceProxy.CEPDataServiceClient client = null;
    client = new CEPServiceProxy.CEPDataServiceClient();
    lstCSSReport = client.GetCSSReport(cSS_NAME, in_Cust_ID).ToList();
    MemoryStream output = new MemoryStream(); 
    StreamWriter writer = new StreamWriter(output, System.Text.Encoding.UTF8);
    writer.WriteLine("PROJECT NAME,CSS ID,CSS Name,Customer Reprentative Name,CSS Recived Date,CSI,TOP 3 STRENGTH,TOP 3 OFI,Any Other COMMENT");
    foreach (CEPMobility.CEPServiceProxy.CSSReport objreport in Report)
    {
        writer.WriteLine("\"" + objreport.PROJECT_NAME + "\",\"" + objreport.CSS_ID + "\",\"" + objreport.CSS_NAME + "\",\"" + objreport.CUST_REP_NAME + "\",\"" + objreport.CSS_RECIEVED_DT + "\",\"" + objreport.CSI + "\",\"" + objreport.TOP_3_STRENGTH + "\",\"" + objreport.TOP_3_OFI + "\",\"" + objreport.COMMENT + "\""); 
    } 
    writer.Flush(); 
    output.Seek(0, SeekOrigin.Begin);
    Response.AddHeader("Content-Disposition", "attachment;filename=CSSReport.csv");
    return File(output, "text/csv", "CSSReport.csv"); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:13:10.240

You shoud add **Content-Disposition** header to your response. Like this:

```
Response.AddHeader("Content-Disposition", "attachment;filename=CSSReport.csv"); 
```

# xml - Symfony2 - 为什么使用 XML 进行设置/配置？

> ID：11741947
> 
> 赞同：14
> 
> 时间：2012-07-31T14:03:15.113
> 
> 标签：xml, symfony, yaml, configuration-files

是否有兴趣为每种类型的文件使用 XML 而不是 YAML：

*   配置
*   安全
*   路由
*   服务
*   翻译

我想在全球范围内询问 XML 与 YAML 和 JSON，但我会坚持这些主题 :)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-31T14:07:40.893

在我公司的项目中，我们使用上述每个点，`YAML`因为它更具可读性。最易读。**最易读。**

* * *

**编辑**：

我可以想象使用`XML`over的唯一抽象情况 - 可能是一些动态文件编写器，因为使用节点或类似的东西`YAML`更容易操作。`SimpleXML`例如，如果您需要定义一些配置文件，在测试中构建模式等......

但很难想象另一种情况。

* * *

**另一个编辑：**

由于我的回答被接受了，我不能不同意[m2mdas](https://stackoverflow.com/users/1218997/m2mdas) - 正如他在[下面的回答中](https://stackoverflow.com/a/11747193/970721)提到的那样，使用的另一件事`XML`是 IDE 的自动完成支持。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-31T19:06:17.570

xml 配置的优点是 IDE 自动完成和即时验证。作为由具体模式定义定义的元素，IDE 可以立即针对它验证元素，这在 YAML 或 JSON 中是不可能的。另外我认为 Symfony 在处理之前会根据定义验证配置中的 xml 元素。

**编辑：**

通过验证，我的意思是根据定义的模式验证元素结构。最好在处理之前验证配置。例如，`services.yml`具有数百个服务对象的定义在第 99 个服务定义中有错误。Yaml 解析器将增量解析，创建昂贵的 cpu 密集型服务对象，并将在第 99 个定义处失败。而对于已`service.xml`定义的模式，您可以验证元素结构并在正常时处理它们。显然第二个过程是有效的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-06-06T13:04:01.953

Fabien Potencier 在他的博客上写到了使用 XML 优于 YAML 的优势：

> *   加载 XML 文件时，会自动使用内置 services.xsd 文件对其进行验证；
>     
>     
> *   XML 可以在 IDE 中自动完成；
>     
>     
> *   XML 格式比 YAML 格式快；
>     
>     
> *   XML 格式没有外部依赖（YAML 格式依赖于 sfYAML 组件）。

虽然这篇文章是为 symfony1.x 写的，但这些积分也绝对可以应用于 Symfony2。

[http://fabien.potencier.org/article/15/symfony-service-container-using-xml-or-yaml-to-describe-services](http://fabien.potencier.org/article/15/symfony-service-container-using-xml-or-yaml-to-describe-services)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-14T20:25:20.307

支持 XML 的另一件事是可以使用 PHP 常量定义参数，而 YAML 则无法做到这一点。

# wpf - Can't use button property in trigger in WPF

> ID：11741949
> 
> 赞同：0
> 
> 时间：2012-07-31T14:03:16.103
> 
> 标签：wpf, button, triggers

I have button with custom content (a red circle) defined inside a user control and I want the circle to change to gray if the button is disabled.

I tried the following and it does not compile

> Error: 'IsEnabled' member is not valid because it does not have a qualifying type name.

Can any explain what I am doing wrong here?

```
<Button>
    <Button.Content>
        <Grid>
             <Ellipse x:Name="circle" Width="20" Height="20" Fill="Red"/>
        </Grid>
     </Button.Content>
     <Button.Triggers>
         <Trigger Property="IsEnabled" Value="False">
        <Setter TargetName="circle" Property="Fill" Value="Gray"/>
          </Trigger>
      </Button.Triggers>
</Button> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T14:06:08.850

`IsEnabled`是在继承自的类上定义的 DependecyProperty `Button`；XAML 要求您明确指定拥有类型。试试`Trigger Property="UIElement.IsEnabled"`吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:14:19.123

这是一种方法：

```
<Button Name="btn" >
    <Ellipse Height="20" Width="20">
        <Ellipse.Style>
            <Style TargetType="Ellipse">
                <Setter Property="Fill" Value="Red" />
                <!-- Here is the 'normal' content -->
                <Style.Triggers>
                    <DataTrigger Binding="{Binding IsEnabled, ElementName=btn}" Value="False">
                    <Setter Property="Fill" Value="Blue" />
                    <!-- Here is the 'override' content -->
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Ellipse.Style>
    </Ellipse>
</Button> 
```

DataTriggers 仅适用于样式，因此我们需要定位接收样式但绑定到控件中的另一个元素的实际元素。

# ruby-on-rails - 从 Ruby on Rails 中的模型和视图逆向工程（生成）表或数据库模式

> ID：11741951
> 
> 赞同：4
> 
> 时间：2012-07-31T14:03:24.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2, ruby-on-rails-2

***更新：问题仍然存在，欢迎任何评论，评论***

我有一个**现有的 rails 项目，其中****丢失了**一些重要的文件和目录。

项目 rails 版本（2.3.8）我在 environment.rb 中找到了它

目前我所拥有的是

```
app
   controllers (already fully coded)
   helpers  (already fully coded)
   models (already fully coded) 
   reports (already fully coded)
   views  (already fully coded)

config ---> default configurations (already fully coded)
lib ---> contains nothing
public --> contains images and scripts (already fully coded)
script ---> contains server,runner,plugin,dbconsole.... 
```

app 目录完全包含代码的工作状态，app/model 包含 100 多个 .rb 文件，所以我假设它会超过 100 个表

主要缺少的东西是***db 目录、.gem 文件、rake 文件、doc、test、vendor、database、schema.rb 和迁移***

**注意：** 我没有该项目的表架构和数据库

**我需要从模型和视图生成表或完整的数据库，我正在寻找逆向工程类的东西来从模型或视图生成数据库模式**

我是rails的新手，我来自java背景，在java中通过使用hibernate有一个pojo（rails中的模型）到数据库选项可用，我正在为rails寻找类似的东西，我的主要目标是运行那个项目，所以请大家帮帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T03:59:33.170

要重新创建数据库模式，需要相当长的时间。

您可以在 app/models、app/controllers app/views 目录中获得很多关于数据库的信息。

您应该知道 ActiveRecord**不需要**您显式列出模型的所有属性。这具有重要意义 - 您只能根据是否引用属性来**推断您仍需要添加到数据库中的属性！**这意味着这样做有点艺术。并且没有明确的步骤来完成这项工作。但以下是一些您可以用来帮助您的规则。

**这是一个大项目，以下是帮助您的指南、规则和提示**。但请注意，这可能需要**很长时间**，并且有时会**令人沮丧**才能完成这项工作。

* * *

## 您需要什么表：

每个表通常都有一个匹配的**ActiveRecord::Base**模型。所以在app/models目录下，检查每一个文件，如果类继承自ActiveRecord::Base，就是一个额外的表。

默认情况下，表名是类名的复数形式。

```
class UserGroup < ActiveRecord::Base # for this class 
```

表的名称是 user_groups。注意它是复数，而不是驼峰式，它是小写，用下划线分隔单词。

所有这些表都将有一个“id”整数列。默认情况下，这些表还具有日期时间类型的“created_at”和“updated_at”列。

## 关联和外键：

您可以通过模型中的关联来推断存在哪些外键。所有关联都明确列出，所以这并不难。

例如：

```
class UserGroup < ActiveRecord::Base # for this class
  belongs_to :category 
```

这意味着 user_groups 表有一个名为“category_id”的列，它是类别表的外键。

这意味着 Category 模型可能具有反比关系（但没有额外的列）：

```
class Category < ActiveRecord::Base
  has_many :user_groups 
```

主要的其他关联是 has_many_and_belongs_to 关联。例如。

```
class A < ActiveRecord::Base
  has_and_belongs_to_many :bs
end
class B < ActiveRecord::Base
  has_and_belongs_to_many :as
end 
```

这意味着要添加一个名为“as_bs”的连接表（as 和 bs 按字母顺序排序），外键为“a_id”和“b_id”。

所有外键都是整数。

* * *

## 属性

好的，这就是表关联。现在对于普通属性...

您应该检查**app/views/user_groups/**或其他类似的**app/views**目录。

在里面你会找到视图模板。您应该查看 _form.html.erb 模板（假设它是 .erb 模板，否则它可能是 .haml 等模板）。

_form.html.erb 模板（如果存在）通常具有许多列为表单字段的属性。

在`form_for`块中，检查它是否显示类似`f.text_field :name`的内容，这意味着有一个名为“名称”的属性/（表中的列）。您可以通过它是什么类型的字段来推断该列应该是什么类型。例如。在这种情况下，它是一个字符串，所以 VARCHAR(255) 可能是合适的（在 Rails 中称为字符串）。

您可能还需要根据属性的名称来推断哪种类型是合适的（例如，如果它提到类似 :time 的内容，那么它可能是 Time 或 DateTime 类型）。

这可能会为您提供表中的所有其他属性。但在某些情况下，您可能会错过这些属性。如果您在控制器中找到对其他属性的引用，例如。app/controllers/user_groups_controller.rb，那么您应该将其添加为表中的列。但是，您可以在测试时将其保留到最后，因为在测试时，如果缺少某个属性，那么它将为相关模型的对象抛出 NoMethodError 。例如。如果它说 UserGroup 类的 @user_group 变量缺少一个名为 title 的方法，那么它可能缺少一个名为“title”的字符串类型的列。

* * *

## 重新创建您的迁移/数据库

好的，现在您知道数据库表和列名和类型应该是什么了。

您应该为您的数据库生成/重新创建迁移。

为此，只需使用命令`rails generate migration RecreateTables`。

然后你应该在`db/migrate/???_recreate_tables.rb`.

在里面，开始编写 ruby​​ 代码来创建表。可以在[http://guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)找到这方面的参考。

但本质上，你会得到类似的东西：

```
class RecreateTables < ActiveRecord::Migration
  def up
    create_table :user_groups do |t|
      t.string :name # adds a string (VARCHAR) column called "name"
      t.text :description # adds a textarea type column called "description
      t.timestamps # adds both "created_at" and "updated_at" columns for you
    end
  end

  def down
    drop_table :products # this is the reverse commands to undo stuff in "up"
  end
end 
```

* * *

## 要重新创建您的 Gemfile：

首先添加一个默认的 Gemfile。这可以通过在`rails new testapplication`某个地方创建一个空的 Rails 应用程序来完成。然后将 Gemfile 复制到您的实际应用程序中。它将通过包含 rails 和其他常见的 gem 来帮助您入门。

很难准确地确定需要什么宝石。您可以做的最好的事情是在查看代码时尝试将它们一一添加。

同样，在这里，MethodNotFound 错误是您的朋友。当您测试应用程序时，根据您添加的 gem，它可能会检测到一些缺失的方法，这些方法可能由 gem 提供。模型上的一些缺失方法可能表明缺少宝石（或者它们可能表明数据库中缺少字段/列）。但是，Controller 或 ActiveRelation 类上缺少方法很可能是因为缺少 gem。

您将不得不查看代码并尝试推断要添加哪些 gem。

如果它使用`can`, `can?`, 之类的方法并且有一个文件`app/models/ability.rb`，那么你需要`gem 'cancan'`. 如果它调用`devise`一个模型，它需要`gem 'devise'`. [在http://ruby-toolbox.com](http://ruby-toolbox.com)可以看到许多常见的 gem 。

将 gem 添加到 Gemfile 后，您应该`bundle`在命令行上运行以安装新的 gem，然后再次测试。当你再次测试它时，你应该重新启动你的测试服务器。重新运行`bundle exec rails server`以启动本地测试服务器`localhost:3000`或类似的东西。

您可以简单地从 复制 Rakefile `rails new testapp`，它**可能会**包含您需要的所有内容。

## 缺少测试

缺少的 test/ 目录与您的实际应用程序无关。不需要运行应用程序。但是，它确实包含自动脚本来测试您的应用程序。如果您想自动测试您的应用程序，您将不得不重新编写新的测试。但是，为了备份您的应用程序，您现在可以忽略它。

## 缺少供应商目录

一些额外的代码不是作为 gem 安装的，而是作为插件安装的。如果您没有供应商目录，则作为插件安装的任何内容都会丢失。与 gems 一样，您能做的最好的事情就是尝试推断可能丢失的内容，然后重新下载丢失的插件，或者重新安装插件，或者使用 gem 替换。

* * *

## 附加提示：

*   尝试阅读一些评论，其中可能会列出一些使用的宝石。

*   如果缺少一个或一组方法，您认为不是数据库字段/列，则可能是由于缺少 gem。最好的办法是在 google 上搜索这些方法名称。例如。如果缺少“paginate”，您可以搜索“rails paginate gem”，看看您可能需要哪些宝石。这个例子可能会出现“will_paginate”和“kaminari”。然后，您必须尝试推断需要哪些宝石。也许`grep will_paginate app -r`在命令行上做一个看看它是否正在使用将分页。**grep 命令在名为“app”的目录中搜索字符串“will_paginate”，-r 使其递归地对所有文件执行此操作**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:34:28.847

尽管 rails 是一个全栈 Web 框架，但它也可以在没有某些部分的情况下工作，如果您愿意，

例如：在你的情况下

**db** - 目录用于保存迁移以创建数据库/表，但如果您使用的是旧数据库或数据库内容由数据库管理员处理，您可能不想要它。（您可以通过 database.yml 文件简单地连接到数据库）

Gem 文件帮助您将所有 gem（库）保存在一个地方，就像使用 Maven（在 java 中）一样

**test**，如果你写过测试用例（这绝对是个坏主意），你确实需要这个

**vendor**，用于 3rd 方插件， doc 用于文档，所以同样的规则适用，如果你确实需要它们，你可以跳过它们

在rails中休眠称为“Activerecord”，相同的概念，模型与数据库表绑定（技术上模型表示表中的原始数据）

因此，如果您真的想要他们添加它们，但如果不只是离开它们

但是，我认为拥有一个合适的 Gem 文件和测试用例是必须的

欢迎来到 Rails

高温高压

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T09:09:48.390

在下文中，我假设您已经知道如何：

*   将您的数据库模式转储到 SQL 文件中
*   启动 Rails 控制台 ( `rails c`)
*   生成 Rails 迁移

这是我认为你应该做的。

1.  确定您的哪些类对应于物理表（您在问题中提到了一些视图，这使我相信您的模型的一个子集绑定到数据库视图而不是实际表）。为此，您需要将模型的定义（扩展 ActiveRecord::Base 的类）与`CREATE TABLE`模式转储中的语句相匹配。例如，`class Person`在您的 Ruby 代码中匹配到`CREATE TABLE people`在您的 DB 模式转储中。

2.  一旦您确定了这些模型（类名），您就启动了一个 Rails 控制台并输入这些模型名称，一次一个，然后按 Enter。一个名为 Person 的模型的控制台输出大概如下所示：

`>> Person`
`=> Person(id: integer, first_name: string, last_name: string)`

You then take what's inside the parentheses, strip the leading `id: integer,`, get rid of commas, get rid of those blanks after the colons, thus obtaining something like this:

`first_name:string last_name:string`

Having done this, the command to generate the migration would look like this:

`rails g migration Person first_name:string last_name:string`

You then start a new Rails project somewhere else, perform all of these migrations and inspect the contents of `db/migrate`. Your migrations are most likely 90% done, what you still need to do is replace some instances of `t.integer` with `t.references`, and other minor stuff that's completely domain-specific and impossible to capture in a generic answer.

HTH.

# ruby - 更改 Ruby 中数组的每个元素

> ID：11741958
> 
> 赞同：2
> 
> 时间：2012-07-31T14:03:39.387
> 
> 标签：ruby

红宝石 1.9

我正在尝试在 Ruby 中做一个简单的操作。我想通过在其属性标题中添加一些数据作为前缀来更改数组的每个元素。

```
def my_proc
         @data = SomeTable.all
         @data.each { |d| 'my_title___'<< pt.title }
end 
```

我做错什么了？

**更新**：我需要附加一些值`pt.title`作为前缀。如果 pt.title == "some title" 那么在附加之后它必须是 "my_title___some title"。当然，因此它必须是具有更改标题的对象数组。

我怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T14:09:16.037

你是这个意思吗？

```
@data.each { |d|  d.title = 'my_title___' + d.title } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T14:09:24.493

要返回具有更改标题的对象数组，请使用`map`方法在块中返回对象。

```
def my_proc
     @data = SomeTable.all
     @data.map { |d| 
        d.title='my_title___' + pt.title
        d
     }
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T14:07:50.103

使用地图功能：[http ://www.ruby-doc.org/core-1.9.3/Array.html#method-i-map](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-map)

```
def my_proc
         @data = SomeTable.all
         @data.map! { |d| 'my_title___'<< pt.title }
end 
```

# html - Capture keypress on Anchor Tag

> ID：11741959
> 
> 赞同：2
> 
> 时间：2012-07-31T14:03:40.007
> 
> 标签：html, tags

In our application we are using anchor tags for all our buttons: so that certain styles can be implemented.

Anchor Tag never gets focus while pressing tabs. We have onClick implemented, but how do I capture 'enter' keypress event?

We need to make sure, that OnClick, keeps working.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-31T14:12:24.803

Add tabindex for you anchor tags.

[http://www.w3schools.com/tags/att_standard_tabindex.asp](http://www.w3schools.com/tags/att_standard_tabindex.asp)

# java - 线程代码意外停止

> ID：11741964
> 
> 赞同：0
> 
> 时间：2012-07-31T14:04:00.363
> 
> 标签：java, multithreading, sockets

这段代码不工作你能告诉这里有什么问题吗？它正在开始，但进程在线程第一个 for 循环之前停止。

我正在尝试创建要在 wifi 或任何无线数据传输中使用的代码。因为数据在无线数据通信中变得松散。

服务器代码：

```
public class Server {

  public static void main(String[] args) throws Exception{
      final fbufr a1 = null,a2 = null,a3 = null,a4 = null,a5 = null,a6 = null,a7 = null,a8 = null;
       final byte[] dd = new byte[1024];

    ServerSocket servsock = new ServerSocket(5001);

    int pos=0;

    final File myFile = new File("Music.mp4");
    final int packetsize=1024;
    final double nosofpackets=Math.ceil(((int) myFile.length())/packetsize);
    System.out.println(nosofpackets);
    final Socket sock = servsock.accept();
    System.out.println("server up!!");
    final OutputStream os = sock.getOutputStream();

    Thread t1 = new Thread(){
        public void run(){
            try{
                System.out.println("thread1 up!!!");
                    int isbyte;
                    int checksum=0;
                    double i=0;
                    BufferedInputStream bis = new BufferedInputStream(new FileInputStream(myFile));
                    System.out.println("near loop 1!!!");
                    for(i=0;i<nosofpackets+1;i=i+8)
                    {
                        a1.flag=0;
                        a2.flag=0;
                        a3.flag=0;
                        a4.flag=0;
                        a5.flag=0;
                        a6.flag=0;
                        a7.flag=0;
                        a8.flag=0;

                        isbyte = bis.read(a1.arr, 0,a1.arr.length);
                        System.out.println("Packet:"+(i+1)+"ready");
                        checksum += isbyte;

                        isbyte=bis.read(a2.arr, 0,a2.arr.length);
                        System.out.println("Packet:"+(i+2)+"ready");
                        checksum += isbyte;

                        isbyte=bis.read(a3.arr, 0,a3.arr.length);
                        System.out.println("Packet:"+(i+3)+"ready");
                        checksum += isbyte;

                        isbyte=bis.read(a4.arr, 0,a4.arr.length);
                        System.out.println("Packet:"+(i+4)+"ready");
                        checksum += isbyte;

                        isbyte=bis.read(a5.arr, 0,a5.arr.length);
                        System.out.println("Packet:"+(i+5)+"ready");
                        checksum += isbyte;

                        isbyte=bis.read(a6.arr, 0,a6.arr.length);
                        System.out.println("Packet:"+(i+6)+"ready");
                        checksum += isbyte;

                        isbyte=bis.read(a7.arr, 0,a7.arr.length);
                        System.out.println("Packet:"+(i+7)+"ready");
                        checksum += isbyte;

                        isbyte=bis.read(a8.arr, 0,a8.arr.length);
                        System.out.println("Packet:"+(i+8)+"ready");
                        checksum += isbyte;

                        for(int j=1 ;j<=8;j++){
                            send(j);        
                        //  Thread.sleep(500);
                        }
                        //Thread.sleep(1000);

                        checkdat(1);

                        //Thread.sleep(10000);
                }

                        checkdat(1);
                        System.out.println(checksum+"data sent");

            }catch (Exception e) {
                // TODO: handle exception
            }
        }

        private void checkdat(int j) throws Exception {
            // TODO Auto-generated method stub
            switch(j){
            case 1 :    if(a1.flag==0){ send(1); }
            case 2 :    if(a2.flag==0){ send(2); }
            case 3 :    if(a3.flag==0){ send(3); }
            case 4 :    if(a4.flag==0){ send(4); }
            case 5 :    if(a5.flag==0){ send(5); }
            case 6 :    if(a6.flag==0){ send(6); }
            case 7 :    if(a7.flag==0){ send(7); }
            case 8 :    if(a8.flag==0){ send(8); }
                        break;
            default :   break;
            }
        }

        private void send(int j) throws Exception {
            // TODO Auto-generated method stub
            setbufr(j);
            os.write(dd, 0, packetsize);
            System.out.println("packet "+j+" recieved");
            os.flush();         
        }

        private void setbufr(int j) {
            // TODO Auto-generated method stub
            switch(j){
            case 1 :    System.arraycopy(a1.arr, 0, dd, 0, packetsize);
                        break;
            case 2 :    System.arraycopy(a2.arr, 0, dd, 0, packetsize);
                        break;
            case 3 :    System.arraycopy(a3.arr, 0, dd, 0, packetsize);
                        break;
            case 4 :    System.arraycopy(a4.arr, 0, dd, 0, packetsize);
                        break;
            case 5 :    System.arraycopy(a5.arr, 0, dd, 0, packetsize);
                        break;
            case 6 :    System.arraycopy(a6.arr, 0, dd, 0, packetsize);
                        break;
            case 7 :    System.arraycopy(a7.arr, 0, dd, 0, packetsize);
                        break;
            case 8 :    System.arraycopy(a8.arr, 0, dd, 0, packetsize);
                        break;
            default :   break;
            }

        }
    };
    Thread t2 = new Thread(){
        public void run(){
            try{
                BufferedReader br = new BufferedReader(new InputStreamReader(sock.getInputStream()));
                Integer da = Integer.parseInt(br.readLine());
                donef(da);
            }catch (Exception e) {
                // TODO: handle exception
            }
        }

        private void donef(Integer da) {
            // TODO Auto-generated method stub
            switch(da){
            case 1 :    a1.flag=1;
                        break;
            case 2 :    a2.flag=1;
                        break;
            case 3 :    a3.flag=1;
                        break;
            case 4 :    a4.flag=1;
                        break;
            case 5 :    a5.flag=1;
                        break;
            case 6 :    a6.flag=1;
                        break;
            case 7 :    a7.flag=1;
                        break;
            case 8 :    a8.flag=1;
                        break;
            default :   break;
            }
        }
    };

        t1.start();
        t1.setPriority(10);
        t2.start();
      //sock.close();

    }
  } 
```

客户端代码：

```
public class client {

  public static void main(String[] args) throws Exception{
      final fbufr a1 = null,a2 = null,a3 = null,a4 = null,a5 = null,a6 = null,a7 = null,a8 = null;
       final byte[] dd = new byte[1024];

    int pos=0;

    final int packetsize=1024;
    Scanner s= new Scanner(System.in);
    final double nosofpackets=s.nextDouble();
    //final double nosofpackets=Math.ceil(((int) myFile.length())/packetsize);
    System.out.println(nosofpackets);
    final Socket sock = new Socket("127.0.0.1", 5001);
    final OutputStream os = sock.getOutputStream();
    final FileOutputStream fos = new FileOutputStream("Music.mp4");
    final InputStream bis = sock.getInputStream();

    //Timer tym1,tym2;
    //Timer tym1= new Timer(){};

    Thread t1 = new Thread(){

        public void run(){
            try{

                int isbyte=0;
                    for(double i=0;i<nosofpackets+1;i++)
                    {
                    isbyte = bis.read(dd, 0,dd.length);if(isbyte==-1)System.out.println("data received");
                    setbufr((int)i%8);

                    }
            }catch (Exception e) {
                // TODO: handle exception
            }
        }

        private void rece(int j) throws Exception {
            // TODO Auto-generated method stub
            setbufr(j);
            bis.read(dd, 0, packetsize);
            System.out.println("packet "+j+" recieved");
            os.flush();         
        }

        private void setbufr(int j) {
            // TODO Auto-generated method stub
            switch(j){
            case 1 :    System.arraycopy(dd, 0, a1.arr, 0, packetsize);a1.flag=1;
                        break;
            case 2 :    System.arraycopy(dd, 0, a2.arr, 0, packetsize);a2.flag=1;
                        break;
            case 3 :    System.arraycopy(dd, 0, a3.arr, 0, packetsize);a3.flag=1;
                        break;
            case 4 :    System.arraycopy(dd, 0, a4.arr, 0, packetsize);a4.flag=1;
                        break;
            case 5 :    System.arraycopy(dd, 0, a5.arr, 0, packetsize);a5.flag=1;
                        break;
            case 6 :    System.arraycopy(dd, 0, a6.arr, 0, packetsize);a6.flag=1;
                        break;
            case 7 :    System.arraycopy(dd, 0, a7.arr, 0, packetsize);a7.flag=1;
                        break;
            case 8 :    System.arraycopy(dd, 0, a8.arr, 0, packetsize);a8.flag=1;
                        break;
            default :   break;
            }
        }
    };

    Thread t2 = new Thread(){
        public void run(){
            try{
                int x = 0;
                x=sendack();
                int n=sack(x);
                if((x!=0)&&(n==1)){
                PrintWriter pwr = new PrintWriter(sock.getOutputStream());
                pwr.println( x);
                pwr.flush();
                }
            }catch (Exception e) {
                // TODO: handle exception
            }
        }

        private int sack(int x) {
            // TODO Auto-generated method stub
            switch(x){
            case 1:return a1.m;
            case 2:return a2.m;
            case 3:return a3.m;
            case 4:return a4.m;
            case 5:return a5.m;
            case 6:return a6.m;
            case 7:return a7.m;
            case 8:return a8.m;

            default: break;

            }
            return 0;
        }

        private int sendack() {
            // TODO Auto-generated method stub
            switch(1){
            case 1:     if(a1.flag==1 && a1.c==false){a1.c=true;a1.m++;return 1;}
            case 2:     if(a2.flag==1 && a2.c==false){a2.c=true;a2.m++;return 2;}
            case 3:     if(a3.flag==1 && a3.c==false){a3.c=true;a3.m++;return 3;}
            case 4:     if(a4.flag==1 && a4.c==false){a4.c=true;a4.m++;return 4;}
            case 5:     if(a5.flag==1 && a5.c==false){a5.c=true;a5.m++;return 5;}
            case 6:     if(a6.flag==1 && a6.c==false){a6.c=true;a6.m++;return 6;}
            case 7:     if(a7.flag==1 && a7.c==false){a7.c=true;a7.m++;return 7;}
            case 8:     if(a8.flag==1 && a8.c==false){a8.c=true;a8.m++;return 8;}
                        break;
            default:    return 0;
            }
            return 0;
        }
    };
    t1.start();
    t2.start();
      //sock.close();
  }
} 
```

fbufr.java：

```
public class fbufr {

    byte[] arr=new byte[1024];
    int flag;
    boolean c;
    int m;
    //Timer tym= new Timer();
    public fbufr(){
        flag=0;
        c=false;
        m=0;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:07:28.340

我认为您的问题出在以下几点：

```
 } catch (Exception e) {
        // TODO: handle exception
    } 
```

我怀疑您正在`IOException`尝试从您的文件中读取，或者您的程序的其他部分正在抛出。你*永远不*应该只捕获和丢弃异常。至少你应该打印或记录它们。他们可以隐藏，就像在这种情况下，你的应用程序的关键问题。[这是一个关于异常](http://docs.oracle.com/javase/tutorial/essential/exceptions/)的好教程，推荐阅读。

`try { ... } catch (Exception e) { ... }`此外，您应该使用较小的 try/catch 块来捕获更具体的异常类，而不是用封闭的代码块。这意味着您不会错误地掩盖重要错误。例如：

```
BufferedInputStream bis;
try {
   bis = new BufferedInputStream(new FileInputStream(myFile));
} catch (IOException e) {
   // print it
   e.printStackTrace(System.err);
   // or log it
   logger.error("problems reading from " + myFile, e);
} 
```

如果这不是问题，那么我建议您阅读有关在 Eclipse （或您使用的任何 IDE）[中调试应用程序的内容。](http://www.vogella.com/articles/EclipseDebugging/article.html)在你的方法开始处设置一个断点，`run()`然后向前走，直到你看到它走到了预期的地方。

# .net - Visual Studio 2012 RC 中断 .NET Framework 内的异常。如何使其仅在我的代码中中断异常？

> ID：11741968
> 
> 赞同：10
> 
> 时间：2012-07-31T14:04:04.160
> 
> 标签：.net, debugging, exception, visual-studio-2012

使用 Visual Studio 2012 RC 调试并打开异常中断时，Visual Studio 会中断 .NET Framework 内的异常。如何使其仅在我的代码中中断异常？

在调试 ASP.NET MVC 4 项目时，每次点击页面都会引发很多框架异常。以下异常经常发生：

```
System.Globalization.CultureNotFoundException occurred
  HResult=-2147024809
  Message=Culture is not supported.
Parameter name: name
UserCache is an invalid culture identifier.
  Source=mscorlib
  ParamName=name
  InvalidCultureName=UserCache
  StackTrace:
       at System.Globalization.CultureInfo..ctor(String name, Boolean useUserOverride)
  InnerException: 
```

此异常来自 mscorlib.dll，我不希望 Visual Studio 中断。

看起来我在例外窗口中缺少一列。我只看到“抛出”列并且缺少“用户未处理”。这可能是我的问题。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-31T14:16:59.007

我相信你需要做的就是去

调试 -> 选项 -> 调试并选中**Enable Just My Code (Managed Only)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:06:43.110

转到*Debug* -> *Exceptions*并取消勾选所有内容。这将告诉调试器仅在未处理的异常上中断。未处理的异常是未“捕获”的异常，它们不会在适当的 try/catch 中发生。

但是要明白，无论发生哪种类型的异常，如果不处理，调试器将中断或应用程序将退出。这就是它应该如何工作的方式。如果您希望发生异常，请将罪魁祸首代码包装在适当的 try/catch 块中。

在这种情况下，那将是

```
try
{
...
}
catch (CultureNotFoundException ex)
{
   // Show your own message here, or otherwise handle the exception
} 
```

# linq - LINQ - 如何翻译 patindex 和 substring

> ID：11741970
> 
> 赞同：0
> 
> 时间：2012-07-31T14:04:06.263
> 
> 标签：linq, tsql

有人可以帮我把这个 Transact-SQL 语句翻译成 LINQ 吗？

```
select distinct SUBSTRING ( car# ,1 , PATINDEX ( '%[0123456789]%' , car# )-1 ) from dbo.Purchases 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:14:20.410

如果您使用的是 Entity Framework 和 .NET 4.0，请查看[`SqlFunctions`](http://msdn.microsoft.com/en-us/library/system.data.objects.sqlclient.aspx)该类。[`PatIndex`](http://msdn.microsoft.com/en-us/library/system.data.objects.sqlclient.sqlfunctions.patindex.aspx)它包含可用于 LINQ to Entities 查询的常见内置 SQL 函数（如 ）的定义。在您的查询中使用时，这些函数将转换为相应的 SQL 函数。

# c# - 使 windows 窗体通用

> ID：11741971
> 
> 赞同：3
> 
> 时间：2012-07-31T14:04:21.790
> 
> 标签：c#, winforms

在 SO 上发布了一个类似的问题一年后。 [通用 Windows 表单模板](https://stackoverflow.com/questions/8778535/generic-windows-form-template)

你知道是否有更好的方法来使 Windows 窗体通用，这就是我想做的：

```
public partial class EntryPointEditForm<T>  : Form where T : ICriteriaObject<T>
{} 
```

但是抛出一个错误告诉我：没有找到合适的方法来覆盖
该方法：

```
protected override void Dispose(bool disposing) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T14:05:45.127

您需要将`.Designer.cs`文件中的部分类声明更改为通用的。

但是，我认为 VS 设计器不支持通用表单类。
您可能需要创建一个非泛型抽象形式以供设计器使用，然后创建一个从它继承的泛型类供您实际使用。

# c++ - 得到错误'char16_t 和 char32_t 未声明'

> ID：11741976
> 
> 赞同：8
> 
> 时间：2012-07-31T14:04:31.723
> 
> 标签：c++, linux, gcc, g++, std

我正在 Linux 上用 C++ 开发一个程序。gcc 版本是 4.5.1 20100924。我想在我的程序中使用 std::atomic_int。我已经包含了原子头，如下所示：

```
include <atomic> 
```

当我编译程序时，出现以下错误：

```
In file included from /usr/lib/gcc/x86_64-redhat-linux/4.5.1/../../../../include/c++/4.5.1/bits/atomic_base.h:87:0,
                 from /usr/lib/gcc/x86_64-redhat-linux/4.5.1/../../../../include/c++/4.5.1/atomic:41,
                 from ../Source/Main.h:33:
/usr/lib/gcc/x86_64-redhat-linux/4.5.1/../../../../include/c++/4.5.1/bits/atomicfwd_cxx.h:107:25: error: ‘char16_t’ was not declared in this scope
/usr/lib/gcc/x86_64-redhat-linux/4.5.1/../../../../include/c++/4.5.1/bits/atomicfwd_cxx.h:107:33: error: template argument 1 is invalid
/usr/lib/gcc/x86_64-redhat-linux/4.5.1/../../../../include/c++/4.5.1/bits/atomicfwd_cxx.h:107:53: error: invalid type in declaration before ‘;’ token
/usr/lib/gcc/x86_64-redhat-linux/4.5.1/../../../../include/c++/4.5.1/bits/atomicfwd_cxx.h:110:25: error: ‘char32_t’ was not declared in this scope
/usr/lib/gcc/x86_64-redhat-linux/4.5.1/../../../../include/c++/4.5.1/bits/atomicfwd_cxx.h:110:33: error: template argument 1 is invalid
/usr/lib/gcc/x86_64-redhat-linux/4.5.1/../../../../include/c++/4.5.1/bits/atomicfwd_cxx.h:110:53: error: invalid type in declaration before ‘;’ token 
```

如果我包括`<cstdint>`，我会得到同样的错误。标题 uchar.h 和 cuchar.h 在我的系统上不存在。如何解决编译错误？

先感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T14:09:57.837

**编辑：**

我错了。只需传递`--std=c++0x`给 g++，就可以了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-31T14:13:40.753

You seem to not have enabled C++11 support in your compiler or you use a compiler that has these new types not declared.

For `char16_t` and `char32_t`, you need no extra include.

* * *

g++ howto:

Type `g++ --version`. If it is at least 4.4, then it has support for [new string literals](http://gcc.gnu.org/projects/cxx0x.html). If not: You need a newer compiler version.

Then, make sure to pass `--std=c++0x` or `--std=c++11` to the compiler.

# java - 选择数据库服务 - mongohq vs dynamodb

> ID：11741977
> 
> 赞同：7
> 
> 时间：2012-07-31T14:04:32.640
> 
> 标签：java, mongodb, playframework-2.0, amazon-dynamodb, database

目前我正在收集我们应该使用什么数据库服务的信息。我对 Web 开发还很陌生，但我们认为我们想要一个 noSQL 数据库。

我们在 Play 中使用 Java！2.

我们只需要一个用于用户注册的数据库。

现在我已经熟悉了 GAE ndb，它是一个键值存储，例如 dynamoDB。MongoDB 是一个文档数据库。我不确定每种解决方案有什么优势。

我也知道 dynamoDB 在 SSD 上运行，而 mongoDB 在内存中。

mongoDB 的一个优势是 Java Play！已经“支持” mongodb。

现在我们不希望有太多的数据库使用，但如果我们的应用程序增长，我们需要非常快速地扩展。

我有什么选择？他们有什么优点/缺点？考虑：

*   价钱
*   缩放
*   使用方便
*   玩！支持？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T15:05:26.427

（披露：我是 MongoHQ 的创始人，显然更希望你选择我们）

从开发人员的角度来看，最大的不同是查询能力。在 DynamoDB 上，您需要给定文档的确切密钥，或者您需要以可以将它们用于基于范围的查询的方式构建密钥。在 Mongo 中，可以查询文档的结构，添加二级索引，做聚合等。

仅使用 k/v 执行此操作的优势在于，它迫使您以 DynamoDB 可以扩展的方式构建应用程序。Mongo 对您的文档进行灵活查询的优势在于，您可以进行更快的开发，即使您不考虑 Play 框架包含的内容。使用 Mongo 之类的东西进行新开发总是会更快，因为您不必从一开始就做出扩展决策。

在实施方面，Mongo 和 DynamoDB 基本上都可以无限增长。Dynamo 抽象出大部分关于存储、RAM 和处理器能力的决策。Mongo 要求您（或像我们这样的人）决定拥有多少 RAM、使用哪种磁盘、如何管理瓶颈等。操作障碍不同，但最终结果非常相似。我们在非常快的 SSD 上运行多个 Mongo DB，它运行得非常好。

不幸的是，定价非常难以比较。DynamoDB 定价基于象征性的每 GB 费用，但您需要为数据访问付费。您需要确保了解随着数据库变得更加活跃，您的成本将如何增长。我不确定我能否有效地预测 DynamoDB 的定价，但我知道我们的客户对 Dynamo 最终为他们想做的事情付出的代价感到惊讶（至少可以说）。

运行 Mongo 在成本方面更具可预测性。每 10GB 数据您可能需要 1GB 的 RAM，运行冗余设置会使您的价格翻倍，等等。这是一个更容易理解的方程式，如果您有一个巨大的一天的流量。

到目前为止，Mongo（和 MongoHQ）的最大优势在于：您可以随时离开您的提供商。如果你对你的 Mongo 提供商感到厌烦，迁移出去只会有点痛苦。如果您对亚马逊感到厌烦，您将不得不重写您的应用程序以使用完全不同的引擎。这对您应该期望获得的支持有很大的影响，托管 Mongo 具有足够的竞争力，您可以从您选择的任何 Mongo 特定公司获得非常好的支持（否则我们会死）。

我在上面谈到了缩放，但最简单的答案是：如果你定义好你的数据模型，任何一个选项都将扩展*到*你可以想象的范围内。不过，一开始你可能不会用 Mongo 做这件事，因为你可能会很快发展。这意味着一旦您无法再垂直扩展（通过向单个服务器添加 RAM、磁盘速度等），您将不得不小心选择分片的方式。Mongo 和 Dynamo 扩展之间最大的区别是当你选择让你的“我如何扩展我的数据？” 决策，而不是整体扩展能力。

所以我会选择 Mongo（呃！）。不过，我认为您可以在 DynamoDB 之上构建一个出色的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:50:12.717

正如您所说，mongoDB 在其他选项中领先一步，因为您可以使用 morphia 插件来简化 DB 交互（您也有 JPA 支持）。Play 框架还提供了 CRUD 模块（管理控制台）和安全模块（用于您的整个登录系统），所以我强烈建议您看看它们。

# javascript - 每天运行一次代码

> ID：11741979
> 
> 赞同：5
> 
> 时间：2012-07-31T14:04:44.067
> 
> 标签：javascript, loops

我只是想知道是否有可能有一个 javascript for 循环，它每天只迭代一次循环，即当日期更改时？

```
for(i=0; i < myArray.length; i++){

    alert(myArray[i]);

} 
```

所以在上面的循环中，让它运行，然后冻结它或其他东西，直到数据发生变化，然后再做一次迭代，然后继续这样做......你知道我的意思。

提前致谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-09-06T21:01:20.200

当您没有服务器时，使用[localStorage是最好的方法（因为用户可以更改计算机的时间并破坏您的逻辑，并且使用服务器更难破解）](https://developer.mozilla.org/en-US/docs/Web/API/Storage/LocalStorage)

## 下面的方法更防弹：

```
// checks if one day has passed. 
function hasOneDayPassed()
  // get today's date. eg: "7/37/2007"
  var date = new Date().toLocaleDateString();

  // if there's a date in localstorage and it's equal to the above: 
  // inferring a day has yet to pass since both dates are equal.
  if( localStorage.yourapp_date == date ) 
      return false;

  // this portion of logic occurs when a day has passed
  localStorage.yourapp_date = date;
  return true;
}

// some function which should run once a day
function runOncePerDay(){
  if( !hasOneDayPassed() ) return false;

  // your code below
  alert('Good morning!');
}

runOncePerDay(); // run the code
runOncePerDay(); // does not run the code 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T14:06:27.337

如果您希望以预定义的时间间隔发生某些事情，您可以设置超时/时间间隔： [http ://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

例如：

```
var dayInMilliseconds = 1000 * 60 * 60 * 24;
setInterval(function() { alert("foo"); },dayInMilliseconds ); 
```

编辑：由于您提到代码将在浏览器中运行，因此假设浏览器至少运行 24 小时，否则将无法运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-09T12:51:45.540

实现它的最佳方法是创建一个持续 1 天的 cookie。即使在网页或浏览器刷新后关闭，倒计时仍将继续。

```
setcookie($cookie_name, $cookie_value, time() + 86400, "/"); 
```

这意味着 86400 = 1 天

希望能帮助到你

# exim - Exim 没有退出邮件，出现错误

> ID：11741984
> 
> 赞同：0
> 
> 时间：2012-07-31T14:04:55.200
> 
> 标签：exim

我不知道多久了，但就在今天我意识到 exim 没有发送任何邮件。我尝试重新启动exim，没有。然后我重新启动了盒子，仍然出现错误。我不知道为什么它不发送。我清除了邮件队列，但这并没有做任何事情.. 我不知道这是否与它有关，但我还是尝试了。清除邮件队列后，我发送了一条消息并返回到邮件队列，但无法投递，这是我得到的错误：

```
root@srv21:/etc/exim4# exim -qff
2012-07-31 14:56:32 1SvrdZ-0000gb-4h failed to expand condition "${perl{check_limits}}" for lookuphost router: Undefined subroutine &main::check_limits called.

2012-07-31 14:56:32 1Sw5eA-0004ZT-4p failed to expand condition "${perl{check_limits}}" for lookuphost router: Undefined subroutine &main::check_limits called.

2012-07-31 14:56:32 1Sw9t7-0006LJ-KF failed to expand condition "${perl{check_limits}}" for lookuphost router: Undefined subroutine &main::check_limits called.

2012-07-31 14:56:32 1Sw5eO-0004Zd-79 failed to expand condition "${perl{check_limits}}" for lookuphost router: Undefined subroutine &main::check_limits called.

2012-07-31 14:56:32 1SwApL-0006eu-Tv failed to expand condition "${perl{check_limits}}" for lookuphost router: Undefined subroutine &main::check_limits called. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:26:44.033

这显然是 exim.conf 中的一个错误。似乎您必须重写您的 perl 条件，或者在安装 exim 时您没有表明您将使用 perl 条件（这是 make install 期间的先决条件）

# jquery - Jquery "$("*:focus")" 是空的。如何检测焦点在哪里？

> ID：11741992
> 
> 赞同：2
> 
> 时间：2012-07-31T14:05:10.010
> 
> 标签：jquery, html, css

我正在使用 jQuery。有带有 ID 和附加 .blur() 事件的输入字段。当我试图找出焦点所在的新项目时，问题就来了：

```
$("#"+field).blur(function()
{
 console.log ($(this).attr('id')+' -> '+$("*:focus").attr('id'));
} 
```

但是这个**$("*:focus").attr('id')**是未定义的。如何检测焦点在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:16:58.283

看起来模糊/焦点事件是在新元素实际获得`:focus`附加到它的伪类之前触发的。这很有趣。证明我在这个[小提琴中的意思](http://jsfiddle.net/MevpE/14/)

所以这就引出了一个问题——你为什么要这样做？:)

我对您的问题的**解决方案**（如果您绝对需要这样的话）就是这样做：[FIDDLE](http://jsfiddle.net/MevpE/19/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:17:10.227

你遇到的问题是你试图得到有焦点的项目，但你做得太早了。所以你要做的是：

```
blur event gets fired
you try to get the element which has got focus
new element gets focus 
```

当然，最简单的方法是为焦点添加事件侦听器，但如果您不想这样做，这将是诀窍：

```
$("input").blur(function() {
    setTimeout(function() {
        console.log($(":focus"));
    }, 1);
});​​ 
```

**[现场演示](http://jsfiddle.net/hajbd/)**

## 更新

所以实际上最好的解决方案如下，因为如果你设置一个超时它总是取决于性能：

```
var sTempId;
$("input")
    .focus(function() {
        if (sTempId)
            console.log ( sTempId + " -> " + $(this).attr("id") );
        sTempId = $(this).attr("id");
    });​ 
```

**[现场演示](http://jsfiddle.net/hajbd/3)**

# php - PHP 查询字符串 - 参数重复

> ID：11741995
> 
> 赞同：0
> 
> 时间：2012-07-31T14:05:17.917
> 
> 标签：php, mysql, pagination, query-string

这是我用于创建分页链接的代码：

```
echo "<a href='".$_SERVER['PHP_SELF']."?".$_SERVER["QUERY_STRING"]."&page=$ni'><span>$ni</span></a>"; 
```

唯一的问题是，每次我点击链接时，`'page'`URL 中的参数都会不断增加：

> http:..php?para1=something¶2=something¶3=something&page=2&page=3&page=4

我能理解为什么。`'page'`每次单击链接时，都会将另一个参数添加到现有 URL。

任何想法如何解决它？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T14:06:25.280

不要在`.$_SERVER["QUERY_STRING"].`每次页面加载时附加。

只需使用这个：

```
echo "<a href='".$_SERVER['PHP_SELF']."?page=$ni'><span>$ni</span></a>"; 
```

如果您需要来自 的另一个参数`QUERY_STRING`，请将其单独添加到您的 URL。

IE：

```
echo "<a href='".$_SERVER['PHP_SELF']."?page=$ni&para1=something...'><span>$ni</span></a>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:09:43.530

在您的示例代码中：

```
$_SERVER["QUERY_STRING"] = para1=something&para2=something&para3=something&page=2&page=3&page=4 
```

因此，当您创建链接并将 $_SERVER["QUERY_STRING"] 预先附加到 &page=$ni 时，您的链接确实是

```
para1=something&para2=something&para3=something&page=2&page=3&page=4&page=$ni 
```