# StackOverflow 问答 11579000-11579999

# asp.net - 如何在 asp.net 中发送确认电子邮件，无法获取 IIS 拾取目录错误

> ID：11579002
> 
> 赞同：0
> 
> 时间：2012-07-20T12:03:31.213
> 
> 标签：asp.net, email, iis, smtp, confirmation-email

我想在注册页面向用户发送确认电子邮件。以下代码是相关部分：

```
try
{
    SmtpClient sc = new SmtpClient();
    System.Net.Mail.MailMessage mail = new System.Net.Mail.MailMessage();
    string Ema = u.UserMail.ToString();
    MailAddress gonderen = new MailAddress("admin@gmail.com", "Hello");
    sc.Host = "smtp.gmail.com";
    sc.Port = 587;
    mail.To.Add(Ema);
    mail.Subject = "Confirmation Message";
    mail.From = gonderen;
    mail.IsBodyHtml = true;
    mail.BodyEncoding = System.Text.Encoding.GetEncoding("ISO-8859-9");
    mail.Body = "<html><body>";
    sc.DeliveryMethod = SmtpDeliveryMethod.PickupDirectoryFromIis;
    sc.Send(mail);
    MESSAGE(true, "Sending mail is successful");
}
catch (Exception)
{
    MESSAGE(true, "Sending mail is unsuccessful!");
} 
```

但它不会向相关用户发送电子邮件。我查看了论坛，并在 web.config 中添加了以下部分：

```
 <system.net>
    <mailSettings>
      <smtp from="myaddress@gmail.com ">
        <network host="smtp.gmail.com" defaultCredentials="false"
      port="587" userName ="myaddress@gmail.com" password="password" />
      </smtp>
    </mailSettings>
  </system.net> 
```

但一切都没有改变。然后我进行了调试，它进入了 try 语句，当它涉及到时`sc.Send(mail);`，它会下降到捕获。我的错误在哪里？

此外，在调试期间，我意识到它显示此错误：`cannot get IIS pickup directory`. 我已经从服务中控制了我是否有 smtp 服务，但我看不到这个服务。此错误与该服务有关吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:09:19.643

为什么不使用 GMAIL 作为 SMTP 服务器，因为您正在定义一个 GMAIL 帐户，将主机定义为“smtp.gmail.com”，端口为 587？

此处的具体细节：http: [//support.google.com/mail/bin/answer.py ?hl=en&answer=13287](http://support.google.com/mail/bin/answer.py?hl=en&answer=13287)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T08:27:08.087

感谢您的帮助。我已经解决了这个问题。我已将代码更改为以下代码：

```
try
{ 
    SmtpClient sc = new SmtpClient();
    System.Net.Mail.MailMessage mail = new System.Net.Mail.MailMessage();
    string Ema = u.UserMail.ToString();
    MailAddress gonderen = new MailAddress("admin@gmail.com", "Hello");
    sc.Host = "smtp.gmail.com";
    sc.Port = 587;
    sc.EnableSsl = true;
    mail.To.Add(Ema);
    mail.Subject = "Confirmation Message";
    mail.From = gonderen;
    mail.IsBodyHtml = true;
    mail.BodyEncoding = System.Text.Encoding.GetEncoding("ISO-8859-9");
    mail.Body = "<html><body>";
    mail.Body += "</body></html>";
    sc.DeliveryMethod = SmtpDeliveryMethod.Network;
    sc.Send(mail);
    MESAJ(true, "Sending mail is successful");
}
catch (Exception)
{
    MESAJ(true, "Sending mail is unsuccessful!");
} 
```

然后我将我的 web.config 设置如下：

```
<mailSettings>
  <smtp deliveryMethod="Network"
              from="admin@gmail.com">
    <network defaultCredentials="false" host="smtp.gmail.com" port="587"
              userName="admin@gmail.com"  password="password" />
  </smtp>
</mailSettings> 
```

这样可行.. ：）

# android - Android 应用程序过于滞后

> ID：11579005
> 
> 赞同：1
> 
> 时间：2012-07-20T12:03:50.793
> 
> 标签：android, http, android-asynctask

我的 Android 应用程序运行速度非常慢并且非常滞后。我的服务器上有 PHP API，我的应用程序通过 HTTP 请求数据。

不过，问题是有时我应该等待几秒钟才能看到结果。我在 onCreate 的主线程中完成了所有计算（解析 XML，添加控件）并在 AsyncTask 中从 HTTP 服务器下载数据。

如何优化我的程序以使其更快？我希望它首先加载活动，然后才在后台下载和解析数据。这怎么可能？对不起新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:22:29.167

你说的滞后是什么意思？你能详细说明一下这个问题吗？

从 OnCreate 中删除解析 XML 并将其移至 AsysnTask 的一项建议。原因是您在 UI 主线程中执行耗时的操作，这将影响要显示的活动。

创建线程以执行 HTTP 相关操作并在同一线程上解析响应，并在执行解析操作时显示对话框。

解析完成后关闭对话框，然后显示您要显示的活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:24:21.897

在 AsyncTask 的`doInBackground()`方法中添加数据解析并创建数据对象，然后`onPostExecute`更新 ui 元素。

做这样的事情的原因是应用程序一直响应并且只是在 ui 线程上做一些小工作以免冻结。

您可以将视图设置为默认状态，并在顶部某处添加进度以指示活动当前正在加载。例如，您可以创建一个空的`ListView`或`Button`无法选择的，当解析完成后，您应该将适配器设置为列表并使按钮再次变为可选。

所有这些事情都可以根据您希望用户在等待时能够执行的操作来实现。

# excel - 使用 Bash 写入 Excel 工作表

> ID：11579008
> 
> 赞同：9
> 
> 时间：2012-07-20T12:03:57.257
> 
> 标签：excel, bash, sed, awk

是否可以从 bash 脚本写入 excel 表（任何类型）？

我正在寻找的是这些方面的东西：

```
sed -e :a -e '$!N; s/\n/ /; ta' file.c > #( first coloumn ,second row of the spread sheet ) 
echo "$cdvar" > #( second coloumn ,third row of the spread sheet ) 
```

感谢您的回复和建议。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-21T06:46:49.960

`bash`您可以通过, `perl`, , ..编写 excel `python`。我认为每种程序语言都有其解决方案。

**重击**

您可以使用`join`or `awk`，我认为还有其他解决方案。

*加入*

如果您想`join`使用同一列的文件，请查看以下帖子：[Bash join command](https://stackoverflow.com/questions/8849681/bash-join-command) and [join in bash like in SAS](https://stackoverflow.com/questions/8835986/join-in-bash-like-in-sas)

*awk*

您可以编写一个 csv，但您可以`rename`输入`xls`然后使用 excel、gnumeric 或其他程序，它会像 xls 一样被识别。

```
ls -R -ltr / | head -50 | awk '{if ($5 >0) print $5,$9}' OFS="," > sample.xls 
```

当你用 excel、gnumeric 或其他程序修改 xls 并保存在 xls 中时，你无法通过 bash 读取。所以@Geekasaur 推荐`perl`或`python`解决方案。

**perl**

您可以用`xls`perl 编写，遵循[示例](http://forums.devshed.com/perl-programming-6/convert-csv-to-xls-603977.html)：

```
#!/usr/bin/perl
use Spreadsheet::WriteExcel;
my $workbook = Spreadsheet::WriteExcel->new("test.xls"); 
my $worksheet = $workbook->add_worksheet();
open(FH,"<file") or die "Cannot open file: $!\n";
my ($x,$y) = (0,0);
while (<FH>){ 
 chomp;
 @list = split /\s+/,$_;
 foreach my $c (@list){
    $worksheet->write($x, $y++, $c);     
 }
 $x++;$y=0;
}
close(FH);
$workbook->close(); 
```

然后您可以`xls`使用`Spreadsheet::ParseExcel`包进行修改：看看[如何使用 Perl 修改现有的 Excel 工作簿？](https://stackoverflow.com/questions/1368960/how-can-i-modify-an-existing-excel-workbook-with-perl)以及[读写示例](http://www.ibm.com/developerworks/linux/library/l-pexcel/)【编者按：此链接已损坏，已向IBM报告】

**Python**

您可以在 python 中编写真实`xls`的，遵循[示例](http://sujitpal.blogspot.it/2007/02/python-script-to-convert-csv-files-to.html)：

```
#!/usr/local/bin/python
# Tool to convert CSV files (with configurable delimiter and text wrap
# character) to Excel spreadsheets.
import string
import sys
import getopt
import re
import os
import os.path
import csv
from pyExcelerator import *

def usage():
  """ Display the usage """
  print "Usage:" + sys.argv[0] + " [OPTIONS] csvfile"
  print "OPTIONS:"
  print "--title|-t: If set, the first line is the title line"
  print "--lines|-l n: Split output into files of n lines or less each"
  print "--sep|-s c [def:,] : The character to use for field delimiter"
  print "--output|o : output file name/pattern"
  print "--help|h : print this information"
  sys.exit(2)

def openExcelSheet(outputFileName):
  """ Opens a reference to an Excel WorkBook and Worksheet objects """
  workbook = Workbook()
  worksheet = workbook.add_sheet("Sheet 1")
  return workbook, worksheet

def writeExcelHeader(worksheet, titleCols):
  """ Write the header line into the worksheet """
  cno = 0
  for titleCol in titleCols:
    worksheet.write(0, cno, titleCol)
    cno = cno + 1

def writeExcelRow(worksheet, lno, columns):
  """ Write a non-header row into the worksheet """
  cno = 0
  for column in columns:
    worksheet.write(lno, cno, column)
    cno = cno + 1

def closeExcelSheet(workbook, outputFileName):
  """ Saves the in-memory WorkBook object into the specified file """
  workbook.save(outputFileName)

def getDefaultOutputFileName(inputFileName):
  """ Returns the name of the default output file based on the value
      of the input file. The default output file is always created in
      the current working directory. This can be overriden using the
      -o or --output option to explicitly specify an output file """
  baseName = os.path.basename(inputFileName)
  rootName = os.path.splitext(baseName)[0]
  return string.join([rootName, "xls"], '.')

def renameOutputFile(outputFileName, fno):
  """ Renames the output file name by appending the current file number
      to it """
  dirName, baseName = os.path.split(outputFileName)
  rootName, extName = os.path.splitext(baseName)
  backupFileBaseName = string.join([string.join([rootName, str(fno)], '-'), extName], '')
  backupFileName = os.path.join(dirName, backupFileBaseName)
  try:
    os.rename(outputFileName, backupFileName)
  except OSError:
    print "Error renaming output file:", outputFileName, "to", backupFileName, "...aborting"
    sys.exit(-1)

def validateOpts(opts):
  """ Returns option values specified, or the default if none """
  titlePresent = False
  linesPerFile = -1
  outputFileName = ""
  sepChar = ","
  for option, argval in opts:
    if (option in ("-t", "--title")):
      titlePresent = True
    if (option in ("-l", "--lines")):
      linesPerFile = int(argval)
    if (option in ("-s", "--sep")):
      sepChar = argval
    if (option in ("-o", "--output")):
      outputFileName = argval
    if (option in ("-h", "--help")):
      usage()
  return titlePresent, linesPerFile, sepChar, outputFileName

def main():
  """ This is how we are called """
  try:
    opts,args = getopt.getopt(sys.argv[1:], "tl:s:o:h", ["title", "lines=", "sep=", "output=", "help"])
  except getopt.GetoptError:
    usage()
  if (len(args) != 1):
    usage()
  inputFileName = args[0]
  try:
    inputFile = open(inputFileName, 'r')
  except IOError:
    print "File not found:", inputFileName, "...aborting"
    sys.exit(-1)
  titlePresent, linesPerFile, sepChar, outputFileName = validateOpts(opts)
  if (outputFileName == ""):
    outputFileName = getDefaultOutputFileName(inputFileName)
  workbook, worksheet = openExcelSheet(outputFileName)
  fno = 0
  lno = 0
  titleCols = []
  reader = csv.reader(inputFile, delimiter=sepChar)
  for line in reader:
    if (lno == 0 and titlePresent):
      if (len(titleCols) == 0):
        titleCols = line
      writeExcelHeader(worksheet, titleCols)
    else:
      writeExcelRow(worksheet, lno, line)
    lno = lno + 1
    if (linesPerFile != -1 and lno >= linesPerFile):
      closeExcelSheet(workbook, outputFileName)
      renameOutputFile(outputFileName, fno)
      fno = fno + 1
      lno = 0
      workbook, worksheet = openExcelSheet(outputFileName)
  inputFile.close()
  closeExcelSheet(workbook, outputFileName)
  if (fno > 0):
    renameOutputFile(outputFileName, fno)

if __name__ == "__main__":
  main() 
```

然后你也可以使用这个[sourceforge 项目](http://sourceforge.net/projects/py-csv2xls/)`convert`来 csv 。如果你可以转换为 csv，你可以重写 xls.. 修改脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-17T18:45:00.973

您可以通过首先创建一个 R 脚本 (xsltocsv)，然后从您的 Bash 文件中调用它来轻松地做到这一点。

R 脚本看起来像：

```
#!/usr/bin/Rscript

suppressMessages(library("gdata"))
suppressMessages(library("argparse"))

#. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

parser <- ArgumentParser(
description = "A script to convert a given xsl file to a csv one"
)

parser$add_argument(
  '-rn',
  '--print-row-names',
  action = 'store_true',
  help = 'outputs row names in the output csv file'
)

parser$add_argument(
  '-cn',
  '--print-column-names',
  action = 'store_true',
  help = 'outputs column names in the output csv file'
)

parser$add_argument(
  '-s',
  '--separator',
  metavar='separator',
  type='character',
  default=';',
  action = 'store',
  help = 'outputs column names in the output csv file'
)

parser$add_argument(
  "xsl",
  metavar = "xsl-file",
  action = "store",
  help = "xsl input file"
)

parser$add_argument(
  "csv",
  metavar = "csv-file",
  action = "store",
  help = "csv output file"
)

args <- parser$parse_args(commandArgs(TRUE))

#. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

vals <- read.xls(args$xsl)

write.table(n, file=args$csv, quote = FALSE,         
    col.names=args$print_column_names, 
    row.names=args$print_row_names, sep=args$separator) 
```

假设您在使文件可执行（`chmod +x xsltocsv`）后将其放入系统路径。然后，调用这个脚本并传递相关参数，你就可以开始了；）

# python - 在 python 中编写提醒/秒表程序的最佳方法？

> ID：11579009
> 
> 赞同：1
> 
> 时间：2012-07-20T12:04:05.513
> 
> 标签：python, reminders

我想用python编写一个提醒程序。我真的没有太多经验，但我正在考虑一些想法。我这样做的主要方法是使用线程模块中每秒运行的计时器，并让它查看所有提醒和秒表，看看时间是否与这些提醒中的任何一个匹配，但这可能会消耗大量资源，尤其是如果一个人有很多提醒。那么以前有人用过这个吗？以消耗尽可能少的资源的方式进行这项工作的最佳方法是什么？我是否应该将提醒列表加载到内存中一次，然后每秒查看一次？或者我应该每 10 秒查看一次并获得匹配 >= 次的条件？如果有人对此有任何经验，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:09:34.253

如果你保持你的提醒**排序**，你只需要每秒检查一次列表中的下一个。

此外，您不必每秒钟都检查一次-您可以小睡更长的时间，当您知道几个小时内不会发生任何事情时-请确保在设置新提醒时醒来；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T12:07:04.123

您可以简单地让警报线程休眠，直到下一个事件。当新事件早于当前最早事件插入时，这将需要唤醒该线程。

# wpf - 用户控件中的绑定命令

> ID：11579013
> 
> 赞同：0
> 
> 时间：2012-07-20T12:04:19.623
> 
> 标签：wpf, binding

我在 xaml 中定义了一个 WPF 用户控件

```
<UserControl x:Class="AIT.Modules.ComponentEditor.Editor.Controls.AITButton"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300" Name="UC">
    <Grid>
        <Button Background="White" BorderBrush="Transparent">
            <StackPanel Orientation="Horizontal" Margin="10">
                <Image Source="{Binding ElementName=UC, Path=Image}"
                       Width="{Binding ElementName=UC, Path=ImageWidth}"
                       Height="{Binding ElementName=UC, Path=ImageHeight}"/>
                <TextBlock Text="{Binding ElementName=UC, Path=Text}"
                           Margin="10,0,0,0"/>
            </StackPanel>
        </Button>
    </Grid>
</UserControl> 
```

对应的 DependyProperty 在 usercontrols 代码后面

在使用控件的窗口中，我需要将我的 viewmodel 命令绑定到按钮

```
 <controls:AITButton Image="..\..\Resources\folder_images.png" Text="Add file" 

    HorizontalAlignment="Left" VerticalAlignment="Top"
                            Margin="10" Command="{x:Static local:ComponentEditorCommands.AddFileCommand}" CommandParameter="{Binding Path=ObjectId}" /> 
```

如何在绑定语句中访问按钮命令参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:24:57.090

为什么不将 ICommand 添加为 DependencyProperty 呢？

```
 <Button Background="White" BorderBrush="Transparent"
            Command="{Binding ElementName=UC, Path=MyCommand}"
            CommandParameter="{Binding ElementName=UC, Path=MyCommandParameter}">
        <StackPanel Orientation="Horizontal" Margin="10">
            <Image Source="{Binding ElementName=UC, Path=Image}"
                   Width="{Binding ElementName=UC, Path=ImageWidth}"
                   Height="{Binding ElementName=UC, Path=ImageHeight}"/>
            <TextBlock Text="{Binding ElementName=UC, Path=Text}"
                       Margin="10,0,0,0"/>
        </StackPanel>
    </Button> 
```

# c# - 列出视图中 ViewBag 的内容

> ID：11579014
> 
> 赞同：3
> 
> 时间：2012-07-20T12:04:19.533
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

为了调试，我想将 ViewBag 的内容转储到 View 的注释中。这似乎相对简单，但没有教程甚至可以解决这个问题。ViewBag 的细节似乎很少。

那么如何将 ViewBag 的内容转储到 View 中呢？假设没有复杂类型，如列表等。链接到提供有关 eh VB 的详细信息的源是一个加号。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T12:15:55.883

You can do it with `ViewData` instead. Like this

```
<ul>
@foreach(var pair in ViewData)
{
   <li>@pair.Key : @pair.Value</li>
}
</ul> 
```

To learn why `ViewData` may be used instead of `ViewBag` please have a look in [here](https://stackoverflow.com/questions/4705426/whats-the-difference-between-viewdata-and-viewbag). Check the question and the accepted answer by Darin Dimitrov.

# jquery - jQuery on('toggle') 可能吗？

> ID：11579017
> 
> 赞同：9
> 
> 时间：2012-07-20T12:04:26.677
> 
> 标签：jquery, toggle

而不是使用`$('.element').toggle(function(){}, function(){});`

我需要在要使用`.on()`的元素上使用该方法，`.toggle()`但我不知道如何指定我的第二个事件处理函数：

```
$('body').on('toggle', '.element', function(){}); 
```

我必须在哪里为我的切换事件指定第二个处理函数？

我在这里做了这个：http: [//jsfiddle.net/D33f4/](http://jsfiddle.net/D33f4/)但是第一次点击没有任何反应。我真的不明白为什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T12:27:51.383

尝试仅使用切换。

```
$('#clickme').toggle(
    function(){alert('click 1');},
     function(){alert('click 2');}
); 
```

事实上，它在第一次点击时不会做任何事情，因为它只是在那个时候附加事件处理程序。

编辑：

我没有完全阅读帖子。我的错。

```
$('body').on('click', '#clickme', function()
{
    var state = $(this).data('state');

    switch(state){
        case 1 :
        case undefined : alert('click 1'); $(this).data('state', 2); break;
        case 2 : alert('click 2'); $(this).data('state', 1); break;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-05T18:40:20.243

这对我有用。

```
 $("#chkShowDevices").click(function() {
    console.log($("#chkShowDevices").prop("checked"));
  }); 
```

# sql - 主体宕机时连接到镜像数据库

> ID：11579022
> 
> 赞同：0
> 
> 时间：2012-07-20T12:04:50.007
> 
> 标签：sql

当我与主体的连接出现问题时，我想自动连接到镜像数据库。你能帮我做什么吗？如何配置我的连接字符串。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:08:40.413

[ConnectionStrings.com](http://connectionstrings.com/sql-server-2008)是你的朋友吗

> 数据库镜像
> 
> 如果您使用 ADO.NET 或 SQL Native Client 连接到正在镜像的数据库，您的应用程序可以利用驱动程序在数据库镜像故障转移发生时自动重定向连接的能力。您必须在连接字符串中指定初始主体服务器和数据库以及故障转移伙伴服务器。

```
Data Source=myServerAddress;Failover Partner=myMirrorServerAddress;Initial Catalog=myDataBase;Integrated Security=True; 
```

> 当然还有许多其他方法可以使用数据库镜像来编写连接字符串，这只是指出故障转移功能的一个示例。您可以将其与其他可用的连接字符串选项结合使用。

# mysql - 将一列的值复制到新表

> ID：11579034
> 
> 赞同：2
> 
> 时间：2012-07-20T12:05:42.373
> 
> 标签：mysql, sql

我正在尝试仅将表中的一列复制到新创建的表中。

这是我的 SQL：

```
CREATE TABLE whatever(
            id INT NOT NULL AUTO_INCREMENT,
            PRIMARY KEY(id),
            uid INT,
            can_view TINYINT DEFAULT 0
        ) 
```

这很好用，但是，我需要对其进行修改，以便使用我的 users 表中的 'id' 值填充 'uid' 列。

有人知道该怎么做吗？

我试过

```
uid INT (SELECT id FROM users) 
```

这似乎不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T12:07:43.127

```
INSERT INTO whatever (uid)
SELECT id
FROM users 
```

[**插入...选择**](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

或者你可能喜欢它：

```
CREATE TABLE whatever (
    id INT NOT NULL AUTO_INCREMENT,
    PRIMARY KEY(id),
    uid INT,
    can_view TINYINT DEFAULT 0
)
SELECT NULL AS id, id AS uid, 0 AS can_view
FROM users 
```

[**创建表...选择**](http://dev.mysql.com/doc/refman/5.1/en/create-table-select.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:08:02.923

创建之后 - 像这样：

```
INSERT into whatever( uid ) select id from users 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T12:12:54.537

创建为选择：

```
CREATE TABLE whatever(
        id INT NOT NULL AUTO_INCREMENT,
        PRIMARY KEY(id),
        uid INT,
        can_view TINYINT DEFAULT 0
    ) AS SELECT id AS uid FROM users; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T12:08:22.023

```
insert into whatever(uid ) values select id from users 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T12:12:43.923

这是简单的答案，它肯定会对您有所帮助。

```
INSERT into whatever(uid) VALUES (SELECT id FROM users) 
```

谢谢。

# c# - 从 HTML 中删除所有空/不必要的节点

> ID：11579035
> 
> 赞同：3
> 
> 时间：2012-07-20T12:05:43.733
> 
> 标签：c#, html-agility-pack

删除所有空节点和不必要节点的首选方法是什么？例如

`<p></p>`应该被删除并且`<font><p><span><br></span></p></font>`也应该被删除（因此在这种情况下 br 标签被认为是不必要的）

我是否必须为此使用某种递归函数？我在想一些事情可能是这样的：

```
 RemoveEmptyNodes(HtmlNode containerNode)
 {
     var nodes = containerNode.DescendantsAndSelf().ToList();

      if (nodes != null)
      {
          foreach (HtmlNode node in nodes)
          {
              if (node.InnerText == null || node.InnerText == "")
              {
                   RemoveEmptyNodes(node.ParentNode);
                   node.Remove();
               }
           }
       }
  } 
```

但这显然不起作用（stackoverflow异常）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T12:17:46.127

不应删除的标签您可以将名称添加到列表中，并且由于 containerNode.Attributes.Count == 0（例如图像），具有属性的节点也不会被删除

```
static List<string> _notToRemove;

static void Main(string[] args)
{
    _notToRemove = new List<string>();
    _notToRemove.Add("br");

    HtmlDocument doc = new HtmlDocument();
    doc.LoadHtml("<html><head></head><body><p>test</p><br><font><p><span></span></p></font></body></html>");
    RemoveEmptyNodes(doc.DocumentNode);
}

static void RemoveEmptyNodes(HtmlNode containerNode)
{
    if (containerNode.Attributes.Count == 0 && !_notToRemove.Contains(containerNode.Name) && string.IsNullOrEmpty(containerNode.InnerText))
    {
        containerNode.Remove();
    }
    else
    {
        for (int i = containerNode.ChildNodes.Count - 1; i >= 0; i-- )
        {
            RemoveEmptyNodes(containerNode.ChildNodes[i]);
        }
    }
} 
```

# java - 支持 XEP-133（管理命令）的 XMPP 库

> ID：11579043
> 
> 赞同：3
> 
> 时间：2012-07-20T12:06:22.833
> 
> 标签：java, php, python, xmpp

我正在尝试从我们的 jabber 服务器获取在线用户列表，以及他们的 IP 地址。[XEP-133](http://xmpp.org/extensions/xep-0133.html)提供了两种我可以使用的方法：`get-online-users-list`和`get-user-stats`.

现在我的问题是找到一个实现它的库（PHP、Python、Ruby、Java），但找不到。

我尝试了提供基本 XEP-133 支持的 JAXL v2，但对于这种方法来说还不够。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:16:51.713

明确[的 XEP-0133](http://xmpp.org/extensions/xep-0133.html)支持应该是不必要的。XEP-133 仅定义了一组命令以及它们在服务器端的作用。要使用这些，您需要一个符合[XEP-0050](http://xmpp.org/extensions/xep-0050.html)、[XEP-0004](http://xmpp.org/extensions/xep-0004.html)和可能其他的库。

其中之一是[SleekXMPP](https://github.com/fritzy/SleekXMPP)，它是一个用于 python 的异步 XMPP 客户端和组件库。这是可以接受的有据可查的。只需确保您使用 github 存储库中的最新版本，其他在线教程可能会失败（许多正在使用最近才引入 SleekXMPP 的功能）。

您可能想查看 xep_0050 的[文档](https://github.com/fritzy/SleekXMPP/blob/develop/sleekxmpp/plugins/xep_0050/adhoc.py)和xep_0004插件[的源代码](https://github.com/fritzy/SleekXMPP/tree/develop/sleekxmpp/plugins/xep_0004/dataforms.py)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T13:39:57.097

如果您对 Java 解决方案感兴趣，[Smack](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smackx/Form.html)还支持[Data Forms](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smackx/Form.html)和[Adhoc 。](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smackx/commands/package-summary.html)如前所述，您不需要显式支持，因此任何支持这两个扩展的库都应该满足您的需求。

当然，如果您同意这一点，那么诸如此类的答案（例如我自己的）实际上都是正确的，但是您的问题属于所有“我也是”答案的持续辩论和讨论的领域。

# javascript - 如何检测打开“twitter://”URL 是否会成功？

> ID：11579044
> 
> 赞同：11
> 
> 时间：2012-07-20T12:06:22.313
> 
> 标签：javascript, twitter, url-scheme

我想使用 Twitter 应用程序从我的网络应用程序发送推文，而不是在安装 twitter 客户端时使用 twitter 按钮。

如果我在 iPhone 或 Mac 上安装了 Twitter 应用程序，则在将 Web 应用程序重定向到“twitter://”网址时会打开此应用程序。（见[http://handleopenurl.com/scheme/twitter](http://handleopenurl.com/scheme/twitter)）

但是，如果我只想在未安装 Twitter 应用程序的地方显示 Twitter 按钮，我该如何检查呢？假设我有这个代码。**twitter_app_installed()**应该如何？有没有办法检查是否`window.location="twitter://...";`不起作用？

```
<div class="twitter-button"><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://google.com" data-text="Hello World">Tweet</a></div>
<div class="twitter-app-button"><a href="twitter://post?message=Hello%20World%20http://google.com">Tweet</a></div>

<script>
function twitter_app_installed() { /* check if window.location="twitter://"; works */}
$(document).ready(function() {
  if (twitter_app_installed()) $('.twitter-app-button').show();
  else $('.twitter-button').show();
});
</script> 
```

**另外**：是否有正确的方法将 URL 添加到 twitter:// 方案？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-05-19T14:13:31.177

似乎不可能进行这种类型的检查。

我认为（在 iPhone 上）你能做的最好的事情是：

a) 在第一个用户访问时始终显示“下载应用程序”

b）在按钮单击事件上执行类似的操作：

```
setTimeout(function () { 
    window.location = "your store url here";    
}, 25);
document.cookie="is_app_installed=true"
window.location = "appname://"; 
```

仅当未安装应用程序时才会触发设置的超时

c) 从第二个用户访问，您可以使用cookie来检查应用程序是否已安装。

这个方法有很多不足（如果用户卸载应用程序或不在 iTunes 上安装它会失败），但可能是你唯一能做的事情。

# javascript - 如何将加载的 JavaScript 文件中返回的公共对象传递给回调函数？

> ID：11579047
> 
> 赞同：0
> 
> 时间：2012-07-20T12:06:30.703
> 
> 标签：javascript, jquery, callback, public-method, dynamic-script-loading

我有一个 JavaScript 文件，它返回公共方法。这个 JavaScript 文件我不是在开始时加载，而是仅在需要时才预加载。例子：

```
(function () {
  // Some privat vars and functions
  var something = 'Something goes well!';

  function doSomething() {
    console.log(something);
  }  

  return {
    doSomething: doSomething,
    doAnotherThings: doAnotherThing
  }
})(); 
```

我用 jQuery 构建了一个函数，在我真的需要时预加载我的 JavaScript 文件。这是一个函数：

```
function load(file, callback) {
  var head = $("html").closest("head"),
      tag = $("<script />", {
        type: "text/javascript"
      });

  tag.on("load", callback);
  tag.attr("src", file);

  head.append(tag);
} 
```

我的问题是**如何将刚刚加载的脚本返回的公共对象作为参数传递给回调**？因为我希望尽快使用这些公共方法......</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:08:42.960

您可以在加载文件时触发事件，然后让回调函数监听该自定义事件。

您可以使用 jQuery 触发方法 - [http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:20:42.217

您只需要将匿名的返回值分配`function`给一个变量。然后，您将能够在您的 中使用它`callback` `function`，例如

```
var loaded = (function () {
    return {
        foo: function () {

        }
    };
})(); 
```

在您的内部`callback` `function`，您可以使用`loaded.foo`.

当您使用 jQuery 时，我建议您使用[`$.getScript()`](http://api.jquery.com/jQuery.getScript/)它来获取 JS 文件。这将使您的代码更简单，即

```
function load(file, callback) {
    $.getScript(file, callback);
} 
```

然后你可以像这样使用它：

```
load('js/test.js', function () {
    console.log(loaded.foo());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T12:18:05.187

如果您已经在使用 jQuery，您可以使用内置的 $.fn.get，它会在加载成功时触发回调：http: [//api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

（虽然也许你想滚动你自己的加载函数呢？）

# php - 从 mysql 打印的每隔一行应该是彩色的

> ID：11579053
> 
> 赞同：2
> 
> 时间：2012-07-20T12:06:52.663
> 
> 标签：php, mysql, html, css

我在我的 wordpress 网站上有一个联系表格，它是 mysql 的数据，也可以通过邮件发送。我目前正在开发一个简单的 wep 应用程序，它只是从数据库中读取数据并打印出来。为了更容易在移动设备上阅读，我希望从数据库打印的每一行都是灰色的，每一秒都是白色的。正如您从代码中看到的那样，我尝试了这个但失败了。所以我希望它看起来像这样：http: [//i49.tinypic.com/20fbvdi.png](http://i49.tinypic.com/20fbvdi.png) 这是代码：

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Yhteydenottopyynnöt</title>
<style>
body{width:100%;}
.anotherrow{background-color:#f1f;}
</style>
</head>

<body>
<?php
$con = mysql_connect("localhost","user","pass");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("database", $con);

$result = mysql_query("SELECT * FROM wp_contactform");

echo "<table border='1'>
<tr>
<th style='width:10%;'>ID</th>
<th style='width:10%;' class='anotherrow'>Nimi</th>
<th style='width:10%;'>Puhelin</th>
<th style='width:10%;' class='anotherrow'>Sposti</th>
<th style='width:40%;'>Viesti</th>
<th style='width:10%;' class='anotherrow'>P&auml;iv&auml;</th>
<th style='10%;'>IP</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td style='width:10%;'>" . $row['ID'] . "</td>";
  echo "<td style='width:10%;' class='anotherrow'>" . $row['Nimi'] . "</td>";
  echo "<td style='width:10%;'>" . $row['Puhelin'] . "</td>";
  echo "<td style='width:10%;' class='anotherrow'><a href='mailto:" . $row['Email'] . "'>" . $row['Email'] . "</a></td>";
  echo "<td style='width:40%;'>" . $row['Viesti'] . "</td>";
  echo "<td style='width:10%;' class='anotherrow'>" . $row['Day'] . "</td>";
  echo "<td style='width:10%;'>" . $row['IP'] . "</td>";
  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?>
</body>
</html> 
```

请不要从代码中得到噩梦，它对我来说已经足够有效了，而且我是唯一一个使用网络应用程序的人 :)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T12:29:39.230

为什么不采用更现代的方法并使用 CSS3 选择器？

```
tr:nth-child(even) { background: #f1f; } 
```

有关兼容性状态，请参见[此处](http://www.quirksmode.org/css/contents.html#t38)和[此处](http://caniuse.com/#search=nth-child)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T12:12:13.750

在你之前创建一个迭代计数器。

```
$i = 0;
while($row = mysql_fetch_array($result)) 
```

然后如果`$i`是偶数，应用一种颜色，如果它是奇数，应用超过一种。

```
if ($i % 2 == 0) {
  echo "<tr class='firstColor'>";
} else {
  echo "<tr class='secondColor'>";
} 
```

在结束之前迭代你的变量`while`。`$i++`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T12:11:34.513

试试这个 ;

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Yhteydenottopyynnöt</title>
<style>
body{width:100%;}
.anotherrow{background-color:#f1f;}
</style>
</head>

<body>
<?php
$con = mysql_connect("localhost","user","pass");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("database", $con);

$result = mysql_query("SELECT * FROM wp_contactform");

echo "<table border='1'>
<tr>
<th style='width:10%;'>ID</th>
<th style='width:10%;'>Nimi</th>
<th style='width:10%;'>Puhelin</th>
<th style='width:10%;'>Sposti</th>
<th style='width:40%;'>Viesti</th>
<th style='width:10%;'>P&auml;iv&auml;</th>
<th style='10%;'>IP</th>
</tr>";

$count = 0;
while($row = mysql_fetch_array($result))
  {
  echo "<tr".((($count%2) == 0)?"":" class='anotherrow'").">";
  echo "<td style='width:10%;'>" . $row['ID'] . "</td>";
  echo "<td style='width:10%;' class='anotherrow'>" . $row['Nimi'] . "</td>";
  echo "<td style='width:10%;'>" . $row['Puhelin'] . "</td>";
  echo "<td style='width:10%;' class='anotherrow'><a href='mailto:" . $row['Email'] . "'>" . $row['Email'] . "</a></td>";
  echo "<td style='width:40%;'>" . $row['Viesti'] . "</td>";
  echo "<td style='width:10%;' class='anotherrow'>" . $row['Day'] . "</td>";
  echo "<td style='width:10%;'>" . $row['IP'] . "</td>";
  echo "</tr>";
$count++;
  }
echo "</table>";

mysql_close($con);
?>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T12:14:30.597

一个非常简单的解决方案是为奇数和偶数值创建 2 个简单的 CSS 类。并在其中定义单独的背景颜色。然后使用以下代码完成您的工作：

```
$j=0;
if(!($j%2)) {
            $cssClass = 'odd';
         } else {
            $cssClass = 'even';
         }
         $j++;

<tr class=<?php echo $cssClass; ?> > Data </tr> 
```

有点像这样。

# eclipse - eclipse.ini 中的内存管理命令被忽略

> ID：11579054
> 
> 赞同：0
> 
> 时间：2012-07-20T12:06:58.230
> 
> 标签：eclipse, memory-management, ram

我正在制作一个 java 游戏（我的世界克隆），我需要在 RAM 中存储相当多的数据，大约 1024Mb。

但是我尝试在 eclipse.ini 中设置我需要的参数，但是 eclipse 的 JVM 没有使用这些参数。

日食.ini

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
512M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
512m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms1024m
-Xmx1024m
-javaagent:lombok.jar
-Xbootclasspath/a:lombok.jar 
```

如您所见，我应该获得更多 RAM，但我的测试应用程序向我展示了其他内容：

```
memory with 500 sectors :
##### Heap utilization statistics [MB] #####
Used Memory:102
Free Memory:50
Total Memory:152
Max Memory:247 
```

内存仍被阻塞在 256MB。

有任何想法吗？

配置：windows 7 64位，eclipse indigo 32位，JDK1.6 32位

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:12:15.540

*您已经更改了可用于运行 Eclipse*的内存量。

要更改程序可用的内存量，您需要添加`-Xms1024m -Xmx1024m`到运行/调试配置中的*VM Arguments*部分（查看*Arguments*选项卡下）。

# jquery - getJSON 返回变量.. 解决方案？

> ID：11579055
> 
> 赞同：-2
> 
> 时间：2012-07-20T12:06:59.513
> 
> 标签：jquery

如果用户被禁止，我的函数会获取并且我想返回一个变量来确定是否显示弹出窗口；但正如我发现的那样，您不能从`getJSON`函数中返回变量。

```
 function fetchban() {
    $.getJSON('/fetchban.php',function(data) {

        if(data==0) {

            var banned =  data;
        } else {
            $.each(data,function(index,result) {
            $('#ban-prompt').html(result);
            $('.popup-background').show();
            $('#ban-container-2').show();
            });
        }

    });

    return banned;
}

$('.button').click(function() {
var banned = fetchban();

if(banned==0) {

//display-popup

}

}); 
```

我有很多行调用该`fetchban`函数，所以我更喜欢`getJSON`in 函数。解决办法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:10:09.477

您的功能有两个问题。

第一个也是最重要的一点是它假设它`getJSON`是同步的。默认情况下它是*异步*的，这意味着不可能`fetchban`根据检索到的数据*返回*值。相反，`fetchban`应该接受它用结果调用的回调。

第二个（一旦你修复第一个，它就会消失），是你试图返回一个`fetchban`未声明的变量（因为你*在*你的`getJSON`成功处理程序中声明了它）。

所以你会改变`fetchban`看起来像：

```
function fetchban(callback) {
    $.getJSON('/fetchban.php',function(data) {
        var banned;

        // ...figure out what `banned` should be from the `data`,
        // I'm afraid I couldn't make sense of the code, looked
        // like it always set `banned` to 0.

        // Call the callback with the result
        callback(banned);
    });
} 
```

然后**代替**：

```
$('.button').click(function() {
    var banned = fetchban();

    if(banned==0) {
        //display-popup
    }
}); 
```

做这个：

```
$('.button').click(function() {
    fetchban(function(banned) {
        if(banned==0) {
            //display-popup
        }
    });
}); 
```

...或者**更好**的是，早点获取它，以便在到达时您*已经*拥有该信息。`click`用户不喜欢点击时的延迟，即使是网络往返的最佳情况也能引起人们的注意。

# c# - 如何在 .NET 4.0 之前将 TimeSpan 格式化为字符串

> ID：11579070
> 
> 赞同：16
> 
> 时间：2012-07-20T12:07:46.013
> 
> 标签：c#, .net-3.5, tostring, timespan, string.format

我正在使用 .NET 3.5 在 C# 中编译，并尝试将 TimeSpan 转换为字符串并格式化字符串。我想用

`myString = myTimeSpan.ToString("c");`

但是，在`TimeSpan.ToString`.NET 4.0 之前，该方法不会将格式字符串作为参数，而我使用的是 .NET 3.5。

那么你将如何将 TimeSpan 格式化为字符串？我的最终目标是以格式显示 TimeSpan`hh:mm:ss`但目前正在接收`hh:mm:ss:fffffff`.

我试过使用

`myString = string.Format("{0:hh:mm:ss}", myTimeSpan);`

但是 string.Format 只是格式化我的 DateTime 并且在尝试格式化 TimeSpan 时传递不同的格式字符串不起作用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-20T12:13:25.343

一种方法可能是：

```
TimeSpan ts = DateTime.Now - DateTime.Now.AddHours(-10);
Console.WriteLine(string.Format("{0:00}:{1:00}:{2:00}", ts.TotalHours, ts.Minutes, ts.Seconds)); 
```

结果将类似于：

```
09:59:59 
```

编辑：

或者您可以尝试：

```
TimeSpan ts = DateTime.Now - DateTime.Now.AddHours(-10);
DateTime mydate = new DateTime(ts.Ticks);
Console.WriteLine(mydate.ToString(("hh:mm:ss"))); 
```

输出将是：

```
09:59:59 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T11:07:45.740

24*ts.Days+ts.Hours 比 ts.TotalHours 更好。比较：

```
var ts = TimeSpan.FromHours( 23.9 );
Console.WriteLine( ts );
Console.WriteLine( "{0:00}:{1:00}:{2:00}", ts.TotalHours, ts.Minutes, ts.Seconds );
Console.WriteLine( "{0}:{1:00}:{2:00}", ts.TotalHours, ts.Minutes, ts.Seconds );
Console.WriteLine( "{0}:{1:00}:{2:00}", 24*ts.Days+ts.Hours, ts.Minutes, ts.Seconds ); 
```

# php - php $_SERVER 没有 HTTPS 值

> ID：11579073
> 
> 赞同：2
> 
> 时间：2012-07-20T12:08:04.450
> 
> 标签：php, https

好的，我有一个奇怪的问题：我为客户域设置了一个 ssl 证书。在那个域上，我有一个 php 脚本，除了 print_r 输出 Php $_SERVER 超级全局之外什么都不做。在浏览器中我转到**https://www.example.com**，但 $_SERVER 数组中不仅没有 HTTPS 值，SCRIPT_URI 是**http** ://www.example.com，SERVER_PORT 是 80，SERVER_PROTOCOL 是 HTTP /1.1。

这里可能发生了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:45:31.723

因此 Network Solutions 将 https 查询重定向到防火墙或一些此类废话后面，因此无法在服务器端检测 ssl 连接。

我已经使用以下 javascript 处理了重定向。不是最干净的解决方案，但它似乎有效。

```
if(window.location.protocol == "http:")
    window.location.href = "https://" + window.location.host + window.location.pathname; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T12:37:19.767

是的，这是 PHP 的正确行为。`$_SERVER`https 的东西在超级全局数组中表示为 http 。我对这种奇怪的行为也有疑问。我希望这对你有帮助。

# html - 嵌套的 li 样式不适用于 IE。

> ID：11579080
> 
> 赞同：0
> 
> 时间：2012-07-20T12:08:37.867
> 
> 标签：html, css

我的 IE 和 FireFox 设计存在不一致的问题。

问题在于“li”渐变背景。该代码在 Firefox 上运行良好，但不适用于 IE。我将尝试通过代码解释我要做什么：

```
<li class="is-active">
    <ul>
        <li></li>
        <li class="is-active"></li>
        <li></li>
    </ul>
</li>

//For FireFox
li.is-active {
    background: -moz-linear-gradient(50% 0 , #E8E9E9, #FFFFFF 40px) repeat scroll 0 0 transparent;
    border-bottom: 1px solid #E0E0E0;
}
li li.is-active {
    background: none repeat scroll 0 0 transparent;
    border-bottom: 0 none;
}

//For Internet Explorer
li.is-active {
    filter progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#e8e9e9', endColorstr='#ffffff'); BACKGROUND-COLOR: #fff; _zoom: 1;
    border-bottom: #e0e0e0 1px solid;
}
li li.is-active {
    background: none transparent scroll repeat 0% 0%;
    border-bottom: 0px;
} 
```

在这种情况下，IE 的 li li.is-active 不起作用。代替 li li.is-active，li.is-active 也在其上实现。

这是不希望的。

我希望我能够解释我的问题。

请让我知道任何可以帮助我解决此问题的建议。

提前谢谢你。

泽山

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:09:24.430

我为你创建了一个 JS Fiddle。看看和玩。[http://jsfiddle.net/Bf4CV/7/](http://jsfiddle.net/Bf4CV/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T14:50:13.787

试试这个

```
li li.is-active {
    background: none transparent scroll repeat 0% 0%;
    filter: none;
    border-bottom: 0px;
} 
```

希望它能解决你的问题

# asp.net - ASP 向导步骤

> ID：11579087
> 
> 赞同：3
> 
> 时间：2012-07-20T12:09:11.350
> 
> 标签：asp.net, accessibility, wizard

我不是特别精通 ASP，所以我可能在这里遗漏了一些明显的东西。我有一系列网页在asp中使用wizardstep进行处理。在返回的 HTML 标记中，我注意到了一些与可访问性有关的问题。问题是基本上返回的 HTML 表是使用属性，而不是 css 样式来显示数据。我在 asp 代码中看不到指定这些属性的任何地方，所以我无法修改它们。有人能指出我正确的方向吗？

干杯。

```
<form id="form1" runat="server">
<h2><span style="font-size:90%;">
Code of Conduct for Members</span></h2>
<div style="text-align: center">
<asp:Wizard ID="Wizard1" runat="server"  DisplaySideBar="false" width="550px" ActiveStepIndex="0"  OnFinishButtonClick="Wizard1_FinishButtonClick">
<WizardSteps>
        <asp:WizardStep ID="WizardStep1" runat="server" Title="Step 1">
          <!-- <h2> -->
                <span style="font-size:110%;position:relative;">Introduction</span></h2>
            <p >
                <span style="font-size:90%;"> 
```

这是来自此网页中的 iframe：http: [//www.leicestershire-fire.gov.uk/cfa/complaints_members.shtml](http://www.leicestershire-fire.gov.uk/cfa/complaints_members.shtml)

基本上我可以在生成的页面上看到这个：

```
<table cellspacing="0" cellpadding="0" border="0" id="Wizard1" style="width:550px;border-collapse:collapse;">

<tr style="height:100%;">

    <td align="left" valign="top" style="background-color:White;border-color:White;border-style:Solid;"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:12:55.307

看起来您使用的是旧版本的 ASP.NET，它因使用内联样式而不是 css 类而臭名昭著。

有两种可能的解决方案：

1.  升级到 ASP.NET 4。在此页面中搜索“向导”：http: [//msdn.microsoft.com/en-us/library/s57a598e.aspx](http://msdn.microsoft.com/en-us/library/s57a598e.aspx)。这是可取的，尽管升级可能会改变其他页面和组件的外观和感觉。有一些方法可以使其向后兼容（参见 TargetFramework）

2.  安装 CSS 适配器：[http](http://www.asp.net/CssAdapters/) ://www.asp.net/CssAdapters/ - 如您所见，自 2006 年以来就没有更新。

您可能还会发现此页面很有用，因此您可以查看问题所在以及他们如何使用 CSS 适配器解决问题的示例：[http ://www.asp.net/cssadapters/Membership/CreateUserWizard.aspx](http://www.asp.net/cssadapters/Membership/CreateUserWizard.aspx)

# c# - 如何限制我的网络服务的用户？

> ID：11579089
> 
> 赞同：1
> 
> 时间：2012-07-20T12:09:10.927
> 
> 标签：c#, web-services

我有一个网络服务；假设这个 Web 服务做了很多计算，它消耗了大量的内存资源。如果我的 Web 服务被 2 个不同的客户端调用，那么服务器将消耗两倍的资源。是否可以将我的服务限制为由一个客户端使用，而不是通过使用用户身份验证？

我的一个想法是知道服务何时被使用，因此如果另一个用户想要使用该服务，它将收到一条消息，表明该服务已被另一个用户使用。

我知道 Web 服务的主要目标之一是允许许多用户，限制并发用户不是一个好主意。我只是好奇它是否可能以及如何做到这一点，我在哪里可以找到文档以便我可以学习这个过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:39:42.713

如果这是基于 WCF 的服务，您可以通过查看可用的实例化和并发选项来获得所需的结果。

[更多信息在这里](http://msdn.microsoft.com/en-us/library/ms731193.aspx)

# backbone.js - 替换视图中的集合

> ID：11579090
> 
> 赞同：1
> 
> 时间：2012-07-20T12:09:13.003
> 
> 标签：backbone.js

我想替换视图内的集合。我使用这样的重置命令：

```
var maColl=mContent.get(ici).get("svgParameterList");  
msvgParameterListView.collection.reset(maColl); 
```

A`JSON.stringify`给出了这个：

**麦科尔**

```
 [{"id":"x","name":"x"},....{"id":"style","name":"style"}] 
```

**msvgParameterListView.collection**

```
 [[{"id":"x","name":"x"},....{"id":"style","name":"style"}]] 
```

现在，我将我的集合放在一个数组中，所以当我渲染它时返回空值。

如何将集合数组更改为集合？
简而言之，如何使 msvgParameterListView.collection 等于 maColl ？

请注意`[[ ]]`新集合的 。
注意 maColl 是另一个集合中的一个集合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:46:10.830

如果我理解正确，您正在尝试使用另一个集合的模型重置一个集合？[`collection.toJSON`](http://backbonejs.org/#Collection-toJSON)是你的朋友：

> **toJSON** *collection.toJSON()*
> 返回一个数组，其中包含集合中每个模型的属性哈希。这可用于序列化和持久化整个集合。这个方法的名字有点混乱，因为它符合 JavaScript 的 JSON API。

可以这样应用

```
msvgParameterListView.collection.reset(maColl.toJSON()); 
```

或者，如果您想保留对原始模型的引用，请通过`maColl.models`

```
msvgParameterListView.collection.reset(maColl.models); 
```

直接将集合传递给`reset`只会混淆 Backbone。

# javascript - 网站可以对在新标签页中打开的链接进行多少控制？

> ID：11579091
> 
> 赞同：2
> 
> 时间：2012-07-20T12:09:13.317
> 
> 标签：javascript, asp.net, html, ajax

我正在创建一个使用 youtube 视频的网站，但我不想使用嵌入式播放器，我只想在 IFRAME 中有一个 youtube 页面。我阅读了 youtube TOS，但我不确定除了嵌入式播放器之外是否允许使用 IFRAMES，所以我认为我会建立网站以在新标签中打开链接。我真正想要的是能够在一个标签中打开新链接。澄清一下，我的网站是标签 1，一旦点击链接 youtube 会在标签 2 中打开，我网站上点击的任何其他链接都会替换标签 2 中的内容，并且不会存在超过 2 个标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:17:11.567

YouTube 和其他一些知名网站出于安全原因阻止使用 iFrame。因此，如果您使用 iFrame，它只会加载空白。

要打开指向新选项卡的链接，您可以使用：

```
<a href="/example.html" target="_blank">Open me!</a> 
```

我不完全确定您可以控制哪个选项卡然后用更多内容替换。

我的建议是这样做：

1) 创建指向嵌入视频的页面的链接，target="_blank"。[2）当用户点击链接时，使用 Javascript（可能是 jQuery）捕获它，并在 Shadowbox（ http://www.shadowbox-js.com/](http://www.shadowbox-js.com/)）等某种模态叠加层中打开该链接的内容。

这样，用户就停留在同一个窗口中，根本不需要 iFrame 或新选项卡。如果用户禁用了 JS，他们将获得默认的“新标签”行为。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:13:16.380

我不认为你很容易控制你想要的东西，如果你能找到一个钩子，它很可能不是跨浏览器。我愿意接受更好的建议，但我认为您可以使用 javascript[`window.open(URL, windowName[, windowFeatures])`](http://www.javascript-coder.com/window-popup/javascript-window-open.phtml)并在每次调用时使用相同的名称。然后它将替换上一个窗口。它只是不会在另一个选项卡中打开，而是在弹出窗口中打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T12:33:55.010

您无法控制另一个选项卡中的网页，也不能限制否。出于明显的安全原因，浏览器可以打开的选项卡数量。限制编号。在没有用户干预的情况下可以打开或控制的选项卡肯定会被视为黑客攻击，Bowsers 不允许这样做。

# c# - 防止 IValueConverter 设置本地值

> ID：11579092
> 
> 赞同：2
> 
> 时间：2012-07-20T12:09:13.750
> 
> 标签：c#, wpf

*简短版本：*
WPF 似乎总是`IValueConverter`在绑定中使用时设置一个本地值，即使该转换器返回`Binding.DoNothing`.
我的问题是：我必须返回或做什么来告诉 WPF 使用继承的值？

请注意：我不想使用 DataTriggers，因为这会使我的代码显着膨胀，因为我需要一个数据触发器和一个转换器来处理当前转换器返回的每种颜色。

* * *

*带复制的长版：*

想象一下以下场景：
我有一个`Button`a 位于其中`TextBlock`。存在`Button`设置`Foreground`属性的样式。此值由`TextBlock`. 现在我想创建一个值转换器，将 a 的值转换`TextBlock`为`Brush`用作`Foreground`- 但仅在某些情况下。在我不想设置特殊颜色的情况下，我返回`Binding.DoNothing`. 我的理解是，这将使`TextBlock`继续使用继承的值。

不幸的是，我的理解并不正确。即使`Binding.DoNothing`设置了返回本地值。这已通过 Snoop 进行了验证。

这个简单的例子可以很容易地重现这个问题：

XAML：

```
<Window x:Class="WpfApplication1.MainWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:WpfApplication1="clr-namespace:WpfApplication1"
        Title="MainWindow" Height="350" Width="525">
  <Window.Resources>
    <WpfApplication1:DummyConverter x:Key="DummyConverter" />
    <Style TargetType="{x:Type Button}">
      <Setter Property="Foreground" Value="Red" />
    </Style>
    <Style TargetType="{x:Type TextBlock}">
          <Setter Property="Foreground"
                  Value="{Binding Path=Text, RelativeSource={RelativeSource Self}, Converter={StaticResource DummyConverter}}" />
    </Style>
  </Window.Resources>
  <StackPanel>
    <Button><TextBlock>Text1</TextBlock></Button>
    <Button><TextBlock>Text2</TextBlock></Button>
  </StackPanel>
</Window> 
```

转换器：

```
public class DummyConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value.ToString() == "Text2")
            return Brushes.Cyan;
        return Binding.DoNothing;
    }
} 
```

如您所见，第一个按钮的文本是黑色而不是红色。如果您删除`TextBlock`两个按钮的样式，则会有正确的红色文本。

**问题：**
我必须做些什么来防止这种情况发生？是否有一些返回值告诉引擎继续使用继承的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:16:51.070

回答你的问题：根据[这个](https://stackoverflow.com/questions/2433230/can-i-get-a-wpf-listbox-to-inherit-brushes-from-parent-element)线程，不。一旦你给 TextBlock 一个样式设置器（#4），任何返回的值都将覆盖继承的属性（#7）。

相反，您可以像这样创建 MultiBinding：

```
public class DummyConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (values[0].ToString() == "Text2")
            return Brushes.Cyan;

        return values[1];
    }
}

<Window x:Class="Spritefire.MainWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:local="clr-namespace:Spritefire"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <local:DummyConverter x:Key="DummyConverter" />
        <Style TargetType="{x:Type Button}">
            <Setter Property="Foreground" Value="Red" />
        </Style>
        <Style TargetType="{x:Type TextBlock}">
            <Setter Property="Foreground">
                <Setter.Value>
                    <MultiBinding Converter="{StaticResource DummyConverter}">
                        <Binding Path="Text" RelativeSource="{RelativeSource Self}" />
                        <Binding Path="Foreground" ElementName="ExampleButton" />
                    </MultiBinding>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <StackPanel>
        <Button x:Name="ExampleButton">
            <TextBlock>Text1</TextBlock>
        </Button>
        <Button>
            <TextBlock>Text2</TextBlock>
        </Button>
    </StackPanel>
</Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:00:42.270

我已经让它工作了，但这个解决方案并不好，而且有点味道......不过我会发布它。

像这样声明自定义附加属性：

```
 public static class CustomForeground
{
    public static readonly DependencyProperty CustomForegroundProperty = DependencyProperty.RegisterAttached(
                      "CustomForeground",
                      typeof(Brush),
                      typeof(CustomForeground),
                      new FrameworkPropertyMetadata(Brushes.Black, FrameworkPropertyMetadataOptions.AffectsRender, OnChange));

    public static void SetCustomForeground(UIElement element, Brush value)
    {
        element.SetValue(CustomForegroundProperty, value);
    }

    public static void OnChange(DependencyObject d, DependencyPropertyChangedEventArgs arg)
    {
        if (arg.NewValue != null)
            d.SetValue(TextBlock.ForegroundProperty, arg.NewValue);
    }
} 
```

和文本框样式：

```
<Style TargetType="{x:Type TextBlock}">
        <Setter Property="WpfApplication1:CustomForeground.CustomForeground"
              Value="{Binding Path=Text, RelativeSource={RelativeSource Self}, Converter={StaticResource DummyConverter}}" />
    </Style> 
```

这是我目前唯一想到的事情，假设你按钮的文本没有改变，它会起作用。如果是，您需要在另一个附加属性中记住 Foreground 的默认值并在 else 语句中设置它。

# python - keyReleaseEvent 忽略 PySide/Qt 中的所有其他键释放

> ID：11579093
> 
> 赞同：0
> 
> 时间：2012-07-20T12:09:16.930
> 
> 标签：python, qt, qt4, pyside

我在 Qt 4.7 中使用 PySide，并且在我的 QMainWindow 中遇到 keyReleaseEvent 问题。这是代码：

```
def keyReleaseEvent(self, event):
    if event.key() == QtCore.Qt.Key_Alt:
        print 'Alt Key Released'
        if self.pointerTypeGroup.checkedId() != self.scene.HandDrag:
            print "Disabling Drag"
            self.pointerGroupClicked(self.pointerTypeGroup.checkedId())
            #event.accept()
    #super(MainWindow, self).keyPressEvent(event) 
```

这仅适用于所有其他密钥版本。第一个被忽略，第二个有效，第三个失败，第四个有效，依此类推。是否实现 keyPressEvent、是否放入 event.accept() 或之后是否调用基本实现都无关紧要。这些对行为没有影响。

我正在使用它在 QGraphicsView 中制作可拖动的地图。如果我实现 keyPressEvent 并拖动地图，只要我在每次按键之间操作地图，就永远不会调用 keyReleaseEvent。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:02:52.497

对我来说，Alt 键是一个修饰键，这对我来说很重要，它是由`event.modifiers()`方法识别的。检查这个：

```
def keyPressEvent(self, event):
    if event.key() == QtCore.Qt.Key_O and ( event.modifiers() & QtCore.Qt.ALT ):
        print 'yeah' # Or your actual action code 
```

作为参考，请查看[QtCore.Qt 命名空间参考](http://www.pyside.org/docs/pyside/PySide/QtCore/Qt.html)。希望这可以帮助！

我一直在[这篇博文的指导下](http://qtonthepyside.wordpress.com/2010/06/27/keypressevent-event-key-event-modifiers-ctrl-x/)

# c++ - 为什么在 msvc++ 我们有 _snprintf 而其他编译器允许 snprintf

> ID：11579095
> 
> 赞同：12
> 
> 时间：2012-07-20T12:09:26.557
> 
> 标签：c++, visual-c++, printf

“_”是什么意思？为什么微软在开头加上这个标记？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-20T12:30:06.013

全局命名空间中以 开头的标识符`_`是为实现保留的。`_snprintf`只是实现（Visual Studio）提供的一个功能。至于这样做的理由，Visual Studio 实现了 C89，并且`snprintf`是后来的 C99 标准的一部分。

除此之外，两个函数的语义在返回类型上有所不同，返回类型`snprintf`总是格式化字符串占用的字符数（缓冲区中是否有足够的空间，如果没有则`_snprintf`返回*负数*缓冲区中有足够的空间。

也就是说，要为输出分配一个足够大的缓冲区，您可以执行以下操作：

```
int size = snprintf( 0, 0, "%s %d\n", str, i );
char * buffer = malloc( size+1 );
snprintf( buffer, size+1, "%s %d\n", str, i ); 
```

您不能这样做，`_snprintf`因为该函数返回的唯一信息是当前大小不够。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-20T12:22:43.557

`snprintf()`在 Microsoft 的 C 运行时开始支持它时，它还不是标准的一部分。

由于函数原型没有标准化，并且开发人员不想使用该名称`snprintf`（以防标准后来指定了不同的原型），他们选择添加一个前导下划线来表示该函数是微软对该标准的扩展。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-03T16:38:56.950

加上上述，

**自 Visual Studio 2015 以来有适当的 C99[`snprintf()`](https://msdn.microsoft.com/en-us/library/2ts7cx93(v=vs.140).aspx)和可用[`vsnprintf()`](https://msdn.microsoft.com/en-us/library/1kt27hek(v=vs.140).aspx)**

他们甚至不会触发众所周知的不安全功能弃用警告。
`_snprintf_s()`或`_vsnprintf_s()`，虽然提供，是 MSVC 特定功能的“安全变体”，具有非 C99 行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-21T03:01:56.940

除了在缓冲区不够大的情况下返回值不同（在大卫的回答中描述）之外，组中的函数在另一个重要方面`_sn...`与标准不同。*如果目标缓冲区只有一个字符*`snprintf`太短，则函数将这种情况视为“成功”。*`_sn...`*

 *更详细地说，如果目标缓冲区足够长以存储整个结果序列*但没有终止零字符*，则`_sn...`函数不会截断结果，不将终止零写入目标缓冲区并返回缓冲区大小为结果。因此，在一般情况下，不能保证结果为零终止。

在相同的情况下，`snprintf`将丢弃结果序列的最后一个字符并在其位置写入零终止符。的结果`snprintf`总是以零结尾。*

# java - JBoss部署后调用方法

> ID：11579098
> 
> 赞同：0
> 
> 时间：2012-07-20T12:09:40.757
> 
> 标签：java, jakarta-ee, jboss, postconstruct

我想让一些方法运行，只有在我的 WAR 部署到 JBoss 之后。

**问题**：目前我正在使用@PostConstruct 从数据库加载保存的时间表。问题是我正在从这个方法创建调度程序的实例，这反过来又启动了 Quartz 调度程序，这阻止了 JBoss 完成部署。如果没有要加载的计划，我的 WAR 部署正常，但如果有计划，它们会导致部署失败，因为 JBoss 正在“等待”计划实际完成。

有没有办法将方法调用延迟到完全部署之后？或者，是否可以在服务器上进行异步调用（来自服务器代码）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:26:57.140

Java EE 规范严格限制应用程序服务器提供的设施之外的任何线程操作。

在任何情况下，您都不应该在无限循环中使用容器管理线程；容器期望线程被返回。线程创建仍然可以在没有太多附带损害的情况下完成（如果您不将多个应用程序放在服务器上，因为容器将无法管理所有应用程序之间的资源），但必须返回任何容器线程。

在新的 Jboss 7 中，有一些 Java EE 调度工具（@Scheduling 和计时器，以及可能的持久计时器）。快速搜索显示了一些如何在 JBoss 7 中运行 Quartz 的示例：[如何在 Jboss AS 7.0 中启用 Quartz 调度？](https://stackoverflow.com/questions/6740924/how-to-enable-quartz-scheduling-in-jboss-as-7-0)

在较旧的 JBoss 中存在更高级的集成（JCA 集成是获得更精细线程管理的唯一标准方法）。使用谷歌找到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T22:15:16.047

[简单的ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)不会为您解决问题吗？只需在 contextInitialized 方法中实现您需要的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-14T07:45:45.810

在 JBoss 7 中，有一个管理 API。

也许您可以使用它来检查服务器是否已启动（使用单例和 TimerService）。

示例代码：

```
ModelControllerClient client = ModelControllerClient.Factory.create(InetAddress.getByName("localhost"), 9999);
        ModelNode op = new ModelNode();
        op.get(ClientConstants.OP).set("read-attribute");
        op.get(ClientConstants.NAME).set("server-state");
        ModelNode returnVal = client.execute(op);

        if(StringUtils.equals(returnVal.get("result").toString(), "\"running\"")){
            LOGGER.info("Server running, init start actions");
            timer.cancel();
        }else{
            LOGGER.info("Server not running, wait");
        } 
```

# javascript - 数数 Javascript 的高度

> ID：11579104
> 
> 赞同：2
> 
> 时间：2012-07-20T12:10:03.207
> 
> 标签：javascript, jquery, jquery-plugins, height

这是我的情况。我有一个像这样的滑动 jquery 菜单：http: [//tympanus.net/codrops/2011/07/03/sliding-background-image-menu](http://tympanus.net/codrops/2011/07/03/sliding-background-image-menu)。

菜单代码如下：

```
<div id="sbi_container" class="sbi_container">
        <div class="sbi_panel" data-bg="images/1.jpg">
            <a href="#" class="sbi_label">About</a>
            <div class="sbi_content">
                <ul>
                    <li><a href="#">Subitem</a></li>
                    <li><a href="#">Subitem</a></li>
                    <li><a href="#">Subitem</a></li>
                </ul>
            </div>
        </div>
        <div class="sbi_panel" data-bg="images/2.jpg">
            ...
        </div> 
```

CSS：

```
.sbi_content{
    position:absolute;
    border-top:2px solid #000;
    bottom:90px;
    left:0px;
    width:100%;
    background:transparent url(../images/pattern.png) repeat top left;
    display:none;
    overflow:hidden;
}
.sbi_content ul{
    padding:10px;
}
.sbi_content ul a{
    display:block;
    color:#f0f0f0;
    font-size:16px;
    padding:4px 6px 4px 14px;
    background:transparent url(../images/triangle.png) no-repeat 3px 50%;
    opacity:0.9;
}
.sbi_content ul a:hover{
    background-color:#000;
    color:#fff;
    -moz-box-shadow:1px 1px 5px #000;
    -webkit-box-shadow:1px 1px 5px #000;
    box-shadow:1px 1px 5px #000;
} 
```

这是一个我遇到问题的 JavaScript 片段：

```
 $content.each(function(i) {
            var $el = $(this);
// save each content's height (where the menu items are)
// and hide them by setting the height to 0px
            var num = $el.find('ul li').size();

            $el.data( 'height', num * 35 + 10 ).css( 'height', '0px' ).show();
                    }); 
```

我需要计算这些的高度`<ul>`。我现在正在做的是计算有多少`<li>`项目，然后将它乘以一个人的高度（35）并添加一个 10px 的边距。

一切都会好的，但是当有一个很长的`<li>`项目时，它会跳转到第二行，问题是这段代码不计算第二行的高度。

有什么想法可以解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:12:20.100

您可以使用该`scrollHeight`属性：

```
$("ul")[0].scrollHeight 
```

对于您的具体情况 -

```
$content.find('ul')[0].scrollHeight 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:21:47.047

`li`您可以使用以下方法计算内容中所有 s的高度：

```
var totalLiHeight = 0;
$el.find('ul li').each(function() {
    var currentLiHeight = $(this).height();
    totalLiHeight += currentLiHeight;
}); 
```

然后你可以添加边距。

# r - ggplot2：每个箱中因子单水平分数的条形图

> ID：11579107
> 
> 赞同：3
> 
> 时间：2012-07-20T12:10:18.667
> 
> 标签：r, ggplot2, histogram, stacked

例如，我们有通常的堆积条形图：

```
ggplot(diamonds, aes(x=color, fill=cut))+geom_bar(position="fill") 
```

![在此处输入图像描述](../Images/874f2d799205cdefea63567b57df2060.png)

而且我想制作相同的情节，但只留下“剪切”类型之一。例如“理想”（紫色）。因此，它应该类似于所有其他具有相同颜色的钻石中理想钻石的分数直方图。我可以在 ggplot 中执行此操作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T20:10:27.820

如果您预先汇总数据，则很简单：

```
library("plyr")

idl <- ddply(diamonds, .(color), summarize, 
             idealpct = sum(cut=="Ideal")/length(cut))

ggplot(idl, aes(x=color, y=idealpct)) + 
  geom_bar() 
```

![在此处输入图像描述](../Images/785ee9d927e12d829c9481bc34cd61df.png)

# html - AJAX 调用是否会使 DOM 变大？

> ID：11579112
> 
> 赞同：0
> 
> 时间：2012-07-20T12:10:35.620
> 
> 标签：html, ajax, dom

我的网站有一个 3 列结构。

链接显示在左侧布局中。

用户点击一个链接，我触发一个 AJAX 调用来加载布局的中间列。我在中间栏中加载了一个完整的模板文件。

我的问题 - 当用户单击另一个链接时，我会进行另一个 AJAX 调用以加载中间列。

在每个后续的 ajax 调用之后，我的 DOM 是否会变大，因为我在中间列加载不同的 html，而不刷新整个页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:12:52.237

否。如果您用新数据替换数据，则旧数据将被丢弃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:13:35.433

好吧，是的，您所说的 DOM 在技术上更大，并且您正在动态注入 HTML。但是，这应该不是问题，当然也不是客户端。仅在下载整个页面时才需要考虑大小。

# ios - 向服务器 iOS 发送请求

> ID：11579116
> 
> 赞同：0
> 
> 时间：2012-07-20T12:10:49.490
> 
> 标签：ios, asihttprequest

我试图弄清楚如何将数据发送到服务器，但目前没有任何进展。

我知道的

在服务器上，我有一些 php 脚本返回数据作为响应

例如这个网址：`http://test.com/mobile_api/register`

此脚本获取下一个参数：

```
id
name
info
time 
```

所以我需要的字符串如下所示

[http://test.com/mobile_api/register?id=1000&name=alex&info=1.0&time=10000](http://test.com/mobile_api/register?id=1000&name=alex&info=1.0&time=10000)

发送这个的最好方法是服务器上的字符串

现在我正在尝试使用`ASIHTTPRequest`. 任何人都可以发送一个示例如何使用我的参数创建正确的请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:54:28.270

此示例代码应该可以帮助您

```
-(void)sendRequest
{
    int userId=10, time=10000;
    NSString *name = @"ABC";
    float info = 1.0;
    NSString *urlString = [NSString stringWithFormat:@"http://test.com/mobile_api/register?id=%d&name=%@&info=%f&time=%d",userId,name,info,time];
    ASIHTTPRequest *request = [[ASIHTTPRequest alloc] initWithURL:[NSURL URLWithString:urlString]];
    //You need to add ASIHTTPRequestDelegate in header(.h) file
    [request setDelegate:self];
    [request startAsynchronous];
}

- (void)requestFinished:(ASIHTTPRequest *)request
{
    // Use when fetching text data
    NSString *responseString = [request responseString];

    // Use when fetching binary data
    NSData *responseData = [request responseData];
}

- (void)requestFailed:(ASIHTTPRequest *)request
{
    NSError *error = [request error];
} 
```

# json - 如何在我的 ActionScript 3 中使用 JSON？

> ID：11579118
> 
> 赞同：-3
> 
> 时间：2012-07-20T12:11:09.990
> 
> 标签：json, actionscript-3, flash

我有一个用 AS3 编写的小型 Flash 游戏。我的游戏发送`score`和`game_id`. 我有自己的加密类，它调用为`CryptoCode`.

我想将这些变量 (`score`和`game_id`) 作为 JSON 对象发送，该对象被加密并发送到 PHP。

如何创建这个 JSON 对象？任何人都可以用一些代码回答我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:29:42.003

自版本 11 起可在 Flash Player 中使用的本机 JSON API 记录在[http://help.adobe.com/en_US/as3/dev/WS324d8efcab3b0d1e2408f9e3131fddffcfc-8000.html](http://help.adobe.com/en_US/as3/dev/WS324d8efcab3b0d1e2408f9e3131fddffcfc-8000.html)

基本上你需要的是使用`JSON.stringify()`方法并将你的对象作为参数传递。

您将获得一个序列化的 JSON 字符串作为回报。

# java - DisplayTag 导出到 Excel，并在表格顶部显示搜索条件

> ID：11579129
> 
> 赞同：1
> 
> 时间：2012-07-20T12:12:11.323
> 
> 标签：java, struts, displaytag

我正在为我的应用程序使用 Struts2 和 DisplayTag。我需要将表格结果导出到 excel 中，包括以下两个功能。1.必须导出搜索条件的所有记录（我有分页。所以我一次只显示20条记录）。2.必须将过滤条件附加到Excel中。

是否可以有自定义装饰器，我可以在导出前将过滤条件添加到 Excel 中。

一些我正在使用的代码示例，

```
<display:table id="data" name="lstEntities"
                        sort="external" uid="row" htmlId="rowid" class="tborder"
                        excludedParams="*" style="width:100%"
                        pagesize="${pageCriteria.recordsPerPage}" partialList="true"
                        size="${pageCriteria.totalRecords}" export="false"
                        requestURI="planningItemListMDA.action">
                        <display:column property="planningIrc" sortName="planningIrc"
                            sortable="true" titleKey="table.title.planningIrc"
                            style="width:100px" />..... 
```

提前致谢。

# eclipse - 在 PATH 中找不到程序“make”

> ID：11579135
> 
> 赞同：48
> 
> 时间：2012-07-20T12:12:26.387
> 
> 标签：eclipse, makefile

我在 Eclipse 的 PATH 错误中找不到程序“make”。我检查了路径变量，它是：

```
C:\cygwin\bin;
%JAVA_HOME%\bin;
%ANT_HOME%\bin;
%ANDROID_SDK%\tools;
%ANDROID_SDK%\platform-tools;
%ANDROID_NDK%;
%CommonProgramFiles%\Microsoft Shared\Windows Live;
C:\Program Files\NVIDIA Corporation\PhysX\Common;
%SystemRoot%\system32;
%SystemRoot%;
%SystemRoot%\System32\Wbem;
%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;
C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;
C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;
C:\Program Files\Git\cmd 
```

从`PATH`包含 make 的文件夹开始（我检查并`make.exe`在那里），但 eclipse 仍然存在`Program "make" not found in PATH`。

我曾尝试更改路径并重新启动几次，但似乎没有任何改变。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2014-10-17T08:07:11.610

如果由于某种原因您不能使用 gcc，您可以尝试更改工具链。打开项目的**属性（通过在****Project Explorer**中右键单击项目名称），然后**C/C++ Build** > **Tool Chain Editor**。您可以将当前的构建器从*GNU Make Builder*更改为*CDT Internal Builder*或您拥有的任何兼容的构建器。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-07-28T13:32:11.737

您是第一次尝试运行“Hello world”吗？请确保选择正确的工具链。对于 Windows，您必须选择 MinGW GCC。 [![在此处输入图像描述](../Images/fd7c7f301a94ba6ad03b643664a68205.png)](https://i.stack.imgur.com/huBGw.jpg)

要将 MinGW GCC 编译器设置为默认值或更改原始项目并在尝试运行程序时出现错误“程序“make” not found in PATH”或“launch failed binary not found eclipse c++”，只需转到 Windows >> Preferences >> C \C++ Build >> Tool Chain Editor >> Change Current toolchain to MinGW GCC

[![在此处输入图像描述](../Images/b61fcf730365f401bc60d6b6a277409c.png)](https://i.stack.imgur.com/rjbE0.jpg)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-11-21T19:35:41.543

在 MinGW 中，我必须安装以下内容：

```
Basic Setup -> mingw32-base  
Basic Setup -> mingw32-gcc-g++  
Basic Setup -> msys-base 
```

在 Eclipse 中，转到

```
Windows -> Preferences -> C/C++ -> Build -> Environment 
```

并设置以下环境变量（使用“Append variables to native environment”选项集）：

```
MINGW_HOME   C:\MinGW
PATH   C:\MinGW\bin;C:\MinGW\msys\1.0\bin 
```

单击“应用”，然后单击“确定”。

据我所知，这对我有用。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-02-25T22:45:19.470

如果您正在使用 MinGw，请将 mingw32-make.exe 重命名为 make.exe，位于“C:\MinGW\bin”文件夹或系统中安装了 minGw 的任何位置。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-09-19T17:07:49.640

只是为了澄清 Adel 链接的 eclipse 论坛涵盖的细节，这是我解决这个问题的方法（在 OS X 上）：

注意：对我来说，即使我的个人环境（即如果在 bash 中，回显 $PATH）中有 /Developer/usr/bin，我仍然必须将它添加到 Eclipse 的环境变量中：

去`Eclipse Preferences -> C/C++ -> Build -> Environment -> Add.. -> "${PATH}:/Developer/usr/bin"`

在其他一些操作系统的情况下，只需使用 make 存在的正确路径。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-02-14T04:45:38.820

如果您使用 CDT 的 MinGW 工具链，make.exe 位于 C:\MinGW\msys\1.0\bin

（或在 MinGW 文件夹中搜索 make.exe。）

在eclipse窗口->首选项->环境中添加这个路径

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-09-29T21:53:45.010

确保您已通过 Cygwin 的安装程序安装了“make”工具。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-09-26T16:04:50.017

如果您在 Windows 上使用 GNU MCU Eclipse，请确保已安装[Windows Build Tools](https://gnu-mcu-eclipse.github.io/windows-build-tools/install/)，然后检查安装路径并在 Eclipse Window/Preferences... 中填写“Global Build Tools Path”：

[![全局构建工具路径](../Images/6e7059bb10e8afb4663d9f2c6e4de5df.png)](https://i.stack.imgur.com/MghWJ.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-06-19T15:48:49.483

里面可能有一些文件`C:\cygwin\bin called xxxxxmake.exe`，尝试重命名为`make.exe`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-05T04:39:53.537

我有同样的问题。最初，我使用 Cygwing 设置了 Eclipse CDT，并且工作顺利。一天发生了一个问题，因此我不得不重置窗口。之后，当我打开 Eclipse 时，我开始面临上述问题。这就是我解决它的方法。

首先，我在错误中搜索 PATH 变量值与 windows 的 PATH 变量相同（仅通过手动比较两个值）。我发现是一样的。现在我意识到这是一个 PATH 问题。

然后开始寻找Cygwin是否存在？它就在那里。我找到并发现它存在于

```
C:\cygwin64\bin>
C:\cygwin64\bin>dir ma*
 Volume in drive C is Windows8_OS
 Volume Serial Number is 042E-11B5

 Directory of C:\cygwin64\bin

16-05-2015  18:34            10,259 mag.exe
13-08-2013  04:57               384 mailmail
11-04-2015  02:56             4,252 make-emacs-shortcut
15-02-2015  23:25           194,579 make.exe
04-05-2015  21:36            40,979 makeconv.exe
29-07-2013  11:57            29,203 makedepend.exe
16-05-2015  18:34            79,891 makeindex.exe
16-05-2015  18:34            34,323 makejvf.exe
07-05-2015  03:04               310 mako-render
18-04-2015  02:07            92,179 man.exe
18-04-2015  02:07           113,683 mandb.exe
13-08-2013  04:57               286 manhole
18-04-2015  02:07            29,203 manpath.exe
24-10-2014  13:31           274,461 mate-terminal.exe
24-10-2014  13:31             1,366 mate-terminal.wrapper
              15 File(s)        905,358 bytes
               0 Dir(s)  373,012,271,104 bytes free

C:\cygwin64\bin> 
```

然后我只是继续并更新了 PATH 变量以包含此路径并重新启动 Eclipse。

代码编译和调试（GDB）运行良好。

希望这可以帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-03-14T06:50:50.153

转到**项目> 属性> C/C++ 构建>**环境。您将看到三个字段，选择 PATH。查看包含 make.exe 的文件夹是否附加到路径中。有时对系统 PATH 变量的更改（从我的电脑> 属性> 高级系统设置...）不会反映在 Eclipse 中。这解决了我的问题，希望它也能帮助你！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-04-04T07:55:07.170

附加提示：如果您打开了多个具有不同工具链的项目，请检查构建控制台标头以获取失败项目的路径。

我刚刚花了半个小时试图修复一个显示此错误的构建，因为在同一个工作台中打开了另一个具有无可救药的过时工具链设置的项目。关闭另一个项目重新启用构建。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2021-08-12T19:29:45.310

我也遇到了这个问题，但通过安装 QT 并在 C 中提取 omnet5.6 文件夹解决了这个问题：

# php - 使用 htaccess 和 mod_rewrite 忽略/接受正斜杠

> ID：11579145
> 
> 赞同：0
> 
> 时间：2012-07-20T12:13:11.347
> 
> 标签：php, .htaccess, mod-rewrite, redirect

我需要一点帮助。

我正在制作一个 php 页面，该页面收集查询字符串，针对数据库对其进行测试以查找匹配项，然后将用户重定向到网站的不同部分。

这是它目前的工作方式（没有 htaccess/mod_rewrite）：

1.  用户访问：domain.com/redirect/index.php?slug=Test_1
2.  php 页面清理并在数据库中查找“Test_1”并检索目标 URL 以将用户重定向到。（例如 domain.com/New_Test_1）
3.  然后 php 页面 301 相应地重定向。

这部分工作正常。但是，由于我无法控制某些变量，我需要解释原始 URL（使用 htaccess/mod_rewrite），如下所示：

*   domain.com/redirect/index.php/Test_1

仍然与以下内容相同：

*   domain.com/redirect/index.php?slug=Test_1

（注意：是的，index.php 需要保留在 url 中。）

我在我的 htaccess 中使用了以下内容，但我知道它可能会更好：

```
RewriteEngine On
Options +FollowSymLinks

RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/(.*)$ %{DOCUMENT_ROOT}/redirect/index.php?slug=$2 [PT,L,QSA] 
```

**我需要帮助...**

一些旧的 url slug 中有正斜杠，如下所示：

*   domain.com/redirect/index.php?slug=How_to_Code/Program

如果没有 htaccess，上述方法仍然有效，但使用 pretty(ier) url 失败：

*   domain.com/redirect/index.php/How_to_Code/Program

使用我当前的 htaccess，它只捕获“How_to_Code”部分，但忽略它之后的所有内容。

所以我的问题是：如何重组我的 htaccess 以获取 domain.com/redirect/index.php/(.*)$ 之后的所有内容，包括正斜杠？

*编辑：这个 .htaccess 进入 /redirect 目录*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:24:18.807

如果你这样做

```
RewriteRule ^redirect/index.php/([a-zA-Z0-9/_]+)$ redirect/index.php?slug=$1 
```

这将接受正斜杠和下划线。要添加更多允许的字符，只需将它们添加到 [] 方括号内。某些字符可能需要转义，所以只需谷歌即可。

# selenium - Selenium：“角色集线器”和“角色 webdriver”之间的区别？

> ID：11579154
> 
> 赞同：6
> 
> 时间：2012-07-20T12:13:40.723
> 
> 标签：selenium, selenium-webdriver, webtest, web-testing

我正在使用 Selenium 进行自动化测试。有什么区别

```
java -jar selenium-server-standalone-2.24.1.jar -role hub 
```

和

```
java -jar selenium-server-standalone-2.24.1.jar -role webdriver 
```

?

似乎是一样的。或者有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:53:12.593

引用官方[wiki页面](http://code.google.com/p/selenium/wiki/Grid2)：

Hub 是接收所有测试请求并将它们分发到正确节点的中心点。

无论您是要运行具有新 WebDriver 功能的网格，还是具有 Selenium 1 RC 功能的网格，或者同时运行两者，您都可以使用相同的 selenium-server-standalone jar 文件来启动节点。

我个人的想法：该节点用于 Selenium 1 (RC)，webdriver 用于 selenium 2 (webdriver)。在我的个人设置中，我使用角色 webdriver

如果 wiki 还不够，我建议你加入[Selenium 用户组](https://groups.google.com/forum/?fromgroups#!forum/selenium-users)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-15T18:55:25.477

一切都取决于节点的能力，下面的 json 文件显示了 seleniumProtocol 值，并基于它反映了网格上的 RC 和 Webdriver。

```
 "capabilities":
      [
        {
          "browserName": "*firefox",
          "maxInstances": 2,
          "seleniumProtocol": "Selenium"
        },
        {
          "browserName": "*googlechrome",
          "maxInstances": 2,
          "seleniumProtocol": "Selenium"
        },
        {
          "browserName": "*iexplore",
          "maxInstances": 1,
          "seleniumProtocol": "Selenium"
        },
    {
          "browserName": "firefox",
          "maxInstances": 5,
          "seleniumProtocol": "WebDriver"
        },
        {
          "browserName": "chrome",
          "maxInstances": 5,
          "seleniumProtocol": "WebDriver"
        },
        {
          "browserName": "internet explorer",
          "maxInstances": 1,
          "seleniumProtocol": "WebDriver"
        } 
```

无论我们给定节点还是在命令行上，始终在网格上显示`RC`和实例`webdriver``webdriver`

![在此处输入图像描述](../Images/74b0982039e83e62ad8504b7af2cc890.png)

# mysql - 从两个表mysql中选择多行

> ID：11579155
> 
> 赞同：0
> 
> 时间：2012-07-20T12:13:42.923
> 
> 标签：mysql, select

我正在尝试从两个表中选择多行：第一个表是捐助者

```
 CREATE TABLE donor(
   donor_number INT NOT NULL AUTO_INCREMENT,
   d_name VARCHAR(30) NOT NULL,
   mobile_number INT NOT NULL,
   blood_group VARCHAR(20) NULL,
      dob DATE NOT NULL,
   gender ENUM('male','female') NOT NULL,
    govid INT(10) NOT NULL,
   PRIMARY KEY (donor_number  )

); 
```

第二张表是 blood_donation

```
 CREATE TABLE blood_donation(

   donor_number INT NOT NULL,
   date_of_donate DATE NOT NULL,
   blood_group VARCHAR(20) NULL,
   serial_number INT(10) NOT NULL,
   blood_component ENUM('wb','prcb') NOT NULL,
   PRIMARY KEY (donor_number , date_of_donate ),
   FOREIGN KEY (donor_number) REFERENCES donor(donor_number) 

   ); 
```

使用此选择语句：

```
 SELECT 
serial_number,
blood_group
FROM blood_donation
WHERE date_of_donate = '2012-07-18'
UNION ALL
SELECT 
blood_group
FROM donor
WHERE donor.donor_number=blood_donation.donor_number; 
```

但是，我得到错误

```
 SQL state 42S22: Unknown column 'blood_donation.donor_number' in 'where clause'
any idea???? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:21:34.477

[UNION](http://dev.mysql.com/doc/refman/5.1/en/union.html)用于将多个结果集组合成一个结果集 - 每个结果集必须具有相同的列集。

你需要的是一个[JOIN](http://dev.mysql.com/doc/refman/5.1/en/join.html)，这是你如何在外键等上将多个表链接在一起，并且会是这样的：

```
SELECT 
  serial_number,
  blood_group
FROM blood_donation
INNER JOIN donor ON donor.donor_number=blood_donation.donor_number
WHERE date_of_donate = '2012-07-18' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:28:16.857

实际上你不应该使用 UNION 而是 JOIN :)

您的查询将如下所示

```
SELECT 
  blood_donation.serial_number,
  donor.blood_group 
FROM
  blood_donation ,
  donor 
WHERE donor.donor_number = blood_donation.donor_number  AND date_of_donate = '2012-07-18' ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:08:27.057

```
 SELECT 
dd.serial_number,
dd.blood_group
FROM blood_donation dd
inner join
donor d
on d.donor_number=dd.donor_number
WHERE dd.date_of_donate = '2012-07-18'; 
```

`UNION`不是您真正需要的，请阅读有关[JOINS](http://dev.mysql.com/doc/refman/5.0/en/join.html)的更多信息。另请根据需要更改列的选择别名。如果您不想在表上使用强制连接条件，您可以使用`Left Join`而不是。`Inner Join`

# .net - 当客户端打开我的应用程序时，出现此错误“十六进制值 0x00 是无效字符”

> ID：11579157
> 
> 赞同：2
> 
> 时间：2012-07-20T12:14:03.470
> 
> 标签：.net, xml-serialization

我已经创建了一个在某些电脑上可以正常工作的应用程序，但是在某些电脑上给出了这个“十六进制值 0x00 是无效字符”错误我发现这个异常是由于 xml 中的空值而发生的。但我没有做任何事情意味着在应用程序启动时获取 xml 等当打开应用程序时，它会显示网站和这个错误。我不明白为什么它只是在打开应用程序错误时给出错误是这样的

有关调用即时 (JIT) 调试而不是此对话框的详细信息，请参阅此消息的末尾。

****** *** ******异常文本******* *** ****** System.Configuration.ConfigurationErrorsException：配置系统初始化失败---> System.Configuration.ConfigurationErrorsException：'.'，十六进制值 0x00，是无效字符。第 12 行，位置 130604。*****

 ****** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T07:50:20.273

Thanks guys I found the answer

when its raises exception

I just deleted MYProject Folder under

C:\Users\\AppData\Local

Delete-->MYProject Folder

The much quicker way to access the Local Folders is to type %localappdata% in Windows Explorer and hit Enter*****

# magento - Magento：根据条件动态重写 URL？

> ID：11579160
> 
> 赞同：0
> 
> 时间：2012-07-20T12:14:19.803
> 
> 标签：magento, url-rewriting, controller

我有这个问题：

我有一个如下所示的默认路由： .../myapp/index.php/ **config** /configuration/test/product_id/51

如您所见，这会导致 ConfigurationController 和 testAction 函数。那很好，它应该保持这种状态。我想要更改的是 URL 的“配置部分”。

所以而不是

[http://somedomain.de/myapp/index.php/config/configuration/test/product_id/51](http://somedomain.de/myapp/index.php/) **_** _

我想

[http://somedomain.de/myapp/index.php/](http://somedomain.de/myapp/index.php/)**家具**/configuration/test/product_id/51

导致相同的位置（ConfigurationController 和那里的 testAction 功能）。更改的部分不是静态的，它是产品的属性集名称。因此，除了家具，它可以是电脑或其他东西。我已经可以从产品中得到这个，所以我需要的只是重写的东西。

想法如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:52:17.523

在模块中`config.xml`，您可以更改`frontend`/ `routers`/ `your_router`/ `args`/`frontName`这将允许您使用不同的名称（如家具）。如果它是 adminhtml 控制器，则必须使用`adminhtml`路由器，但其余部分相同。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T13:16:12.223

您可以使用路由器，就像 Magento 为 CMS 页面所做的那样（在本文的第二部分中解释：http: [//alanstorm.com/magento_dispatch_admin_cms_default_routers](http://alanstorm.com/magento_dispatch_admin_cms_default_routers)）

# jquery-ui - 单击子元素时，整个 div 的 jQuery UI 可排序

> ID：11579164
> 
> 赞同：0
> 
> 时间：2012-07-20T12:14:35.047
> 
> 标签：jquery-ui, jquery-ui-sortable

我想使用可排序的 jQuery UI 助手移动列表项。我想使用某种句柄：能够移动整个 div 但仅在使用该句柄时。我不希望 div 在单击句柄以外的其他位置时移动。

知道该怎么做吗？我搜索了文档并没有找到任何东西。我目前唯一的想法是设置某种功能，当我按下手柄时启用可排序状态，当我释放鼠标时禁用它，但感觉很草率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:53:28.863

使用`handle`选项：

```
$(document).ready(
    function()
    {
        $('#sortable_list').sortable({axis: 'y', handle: '.handle'});
    }
);​ 
```

# jsp - 使用 jsp/servlet 在没有任何网关的情况下发送短信

> ID：11579173
> 
> 赞同：3
> 
> 时间：2012-07-20T12:15:38.150
> 
> 标签：jsp, networking, servlets, mobile, sms

我想使用 jsp/servlets 构建一个 Web 应用程序，我们将能够向收件人发送短信，我知道，是否可以不使用网关/gsm 调制解调器或者我必须使用它。我不想使用第 3 方的短信应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:17:59.053

为此，您需要一个进入顶级聚合器的第三方网关，或者自己获得一个进入它们的网关（可能需要昂贵的设置费）。（我在这个领域工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:19:27.783

我个人使用过[http://www.smspm.com/en](http://www.smspm.com/en)，对此我非常满意。简单，容易，他们也有一个 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T12:19:48.987

使用[SS7](http://en.wikipedia.org/wiki/Signaling_System_7)协议，通过ss7可以直接发送短信/彩信

# arrays - 3d array Matlab plot

> ID：11579179
> 
> 赞同：0
> 
> 时间：2012-07-20T12:16:08.353
> 
> 标签：arrays, matlab, 3d, plot, histogram

I'm a little stuck plotting a 3D array in MATLAB. I have created some histograms that vary as I change a certain threshold. Meaning, for t=65, I have one histogram, for t=70, another and so on. I would like to make a 3D plot or surface where the third dimension is this threshold (t from 0-100 intervals of 5) and the other two dimensions are intensity and frequency respectively (as for the 2D histogram). How can I do that? I've looked at most of the plotting tools such as surf, isosurface, slices and so on. None of them seem to do the trick. My matrix is 80x100x20 where the 20 dimension is that of the threshold. Any ideas? THANKS!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:10:17.773

也许一个例子可能会有所帮助：

```
%# 20 intervals
t = linspace(0,100,20+1);
labels = strtrim(cellstr(num2str([t(1:end-1);t(2:end)]', '[%g,%g)\n')));  %#'

%# some sample data parametrized by t
x = randn(1000,20);
[count,bins] = hist(x, 10);

%# plot 3D bar graph
bar3(bins, count, 'histc')

xlabel('param intervals'), ylabel('bins'), zlabel('counts')
set(gca, 'XTick',1:2:20, 'XTickLabel',labels(1:2:end))
axis tight 
```

![截屏](../Images/a3e511db8bf10cb414e6dbc4b7e30297.png)

# matlab - 迭代多个区间 Matlab

> ID：11579180
> 
> 赞同：0
> 
> 时间：2012-07-20T12:16:12.580
> 
> 标签：matlab, loops, iteration, intervals

我想在 Matlab 中创建一个循环，它只能在用户指定的时间间隔内工作，而不仅仅是整个时间。怎么写这个循环条件？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:34:56.830

你的意思是这样的：

```
for i = [1:5 7:10 12:14 21:22]
   do_func(i)
end 
```

甚至

```
for i = [1:5 4:7 19:-1:15]
   do_func(i)
end 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:38:54.400

通常，您会以多种方式进行迭代。我能想到的主要方法有两种。我还将为社区 wiki 打开它，以便其他人也可以轻松地编辑它。

* * *

首先，使用一个简单的`For`循环。

一般语法是`for index = 1:someValue`

`someValue`实际上可以是比`1`这种情况更大的任何东西。很多时候，它只是您要遍历的矩阵的最后一个索引值。

你也可以修改它！假设您希望每个第三个索引都从矩阵中的第二个位置开始。你所要做的就是：`for index = 2:3:someValue` 这里的 3 告诉循环它应该`index`在每次循环迭代结束时将 3 添加到 ，直到你到达（或超过）`someValue`。

另一个修改是向后遍历。在这种情况下，您从“结束”开始并移动到开头。它看起来像这样：`for index = someValue:-1:1` 您还可以在倒退的同时执行每 4 个索引`for index = someValue:-4:1`。

显然，您可以将两者之间的值替换为`:`您想要的步长。您只需要注意可能出现的潜在索引问题。即试图索引超出矩阵范围或可能变为负数。

* * *

其次，您可以在这里修改循环本身的值。通常，当您使用`for`循环时，这不是最好的主意，因为您的索引变量的值将由循环以及您在循环中更改。很多时候，您会看到这是通过`while`循环或`do while`组合完成的。

几个例子如下：

```
index = 0;
do
{
% some operations
index = index + aNumber;
}while(index <= someValue) 
```

在上面的示例中，循环将继续循环，直到索引值`index`大于或等于`someValue`循环的当前迭代结束时。这种类型的循环将始终执行，我重复执行至少一次。

```
index = 0;
while(index <= someValue)
{
%some operations
index = index + aNumber;
} 
```

在这种情况下，循环将继续循环，同时`index`满足这里的逻辑语句。如果第一次尝试运行循环时该语句不正确，则它根本不会执行。

* * *

希望这会有所帮助，如果您需要，请随时要求任何额外的说明！

其他人，请随时编辑以添加其他信息或清理我可能没有完全解释的内容 =)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:41:46.213

如果您只想在循环中某个条件为真时执行操作，则只需要以下内容：

```
for i=1:length(arr)
    if condition(arr(i))
        do_something(arr(i));
    end
end 
```

# excel - 多列Excel范围中的最长列（在单个公式中）？

> ID：11579182
> 
> 赞同：6
> 
> 时间：2012-07-20T12:16:18.257
> 
> 标签：excel, excel-formula

在不同列可能具有不同数量值的范围内（但列内的序列中不会有间隙）我想知道最长列的长度。为了要求更高，我希望它在一个公式中。

所以给定一个这样的范围：

```
 |  A   B   C   D
   ---+---+---+---+---
    1 |  1   2   3   4
    2 |  2   9   5   6
    3 |      5   5
    4 |          4
    5 | 
```

..我想要的答案是4。

在这种情况下有效的是

```
=MAX(COUNT(A1:A999),COUNT(B1:B999),COUNT(C1:C999),Count(D1:D999)) 
```

但它（a）丑陋和（b）不灵活 - 不适合可能添加列的情况。

我尝试了这样的事情，希望有一个数组给出列数集（希望将它包裹`MAX()`起来）：

```
{=COUNT(OFFSET(A1,0,COLUMN(A1:D1)-COLUMN(A1),999,1))} 
```

..但它只给出一个单元格，这似乎总是第一列的计数。

我知道这可以在 VBA 中轻松解决，但出于几个原因（尤其是好奇），我想看看它是否可以在单个（可能是数组）公式中解决。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T13:38:28.257

也许用 CTRL+SHIFT+ENTER 试试这个：

```
=MAX(SUBTOTAL(3,OFFSET(A:D,,COLUMN(A:D)-MIN(COLUMN(A:D)),,1))) 
```

可以使用任何矩形范围来代替`A:D`。

# javascript - 使用 href 我们可以使用 javascript 或 jquery 从文件中调用函数吗？

> ID：11579183
> 
> 赞同：-1
> 
> 时间：2012-07-20T12:16:21.383
> 
> 标签：javascript

我想使用href从文件中调用一个函数。下面是我的javascript代码：

```
 function createtable() {
   function displaytable(argument) {
     var tr=document.createElement('tr');
     for (var i=0; i < argument.length; i++) {
       var td=document.createElement('td');
       if (i == 0) {
         td.appendChild(document.createTextNode(argument[i]));
       }
       if (i == 1) {
         td.appendChild(document.createTextNode(argument[i]));
       }
       if (i == 3) {
         td.appendChild(document.createTextNode(argument[i]));
       }
       if (i == 2) {
         td.ondblclick= function () {
         var column_index= (this.cellIndex) -1;
         var row_index= (this.parentNode.rowIndex);
         search_cell(row_index,column_index);
       }
       td.appendChild(document.createTextNode(argument[i]));
     }
     tr.appendChild(td);
    }
    document.getElementById('table_body').appendChild(tr);
  }
  document.write("<table border=\"1\"><tr><th>INDEX</th><th>--CELL NAME--</th><th>--PIN NAME--</th><th>--PG PIN--</th></tr><tbody id='table_body'></tbody></table>");

 for (var x=0; x < array_cells.length; x++) {
  displaytable([x+1,array_cells[x].cell,array_cells[x].pins,array_cells[x].pg_pins])
 }
 function search_cell(row_index,column_index) { 
```

//想用href调用这个函数 } }

我想在我的代码中添加一个功能，当我单击 html 表中的单元格时，它会使用 href 从文件中调用一个函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:29:38.357

你的问题不清楚。但这就是我理解你想要的：

```
<table>
    <tr>
        <td>Column 1</td>
        <td>Column 2</td>
        <td>Column 3</td>
        <td><a href="#" id="link1">Function 1</a></td>
    </tr>
</table> 
```

对于 JS 部分：

```
<script type="text/javascript">

    function doSomething( data ) {
        alert(data + ' clicked');
    }

    document.getElementById('link1').onclick = function () {
        doSomething( this.innerHTML );

        return false;
    }

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:32:56.977

在回应您的评论时，主要是...

我从未见过使用`link.setAttribute()`来完成此操作。所以我什至不知道这是否可行。但是你绝对不想用它`href`来执行一个 JavaScript 函数。您也不想引用 JavaScript 文件。在加载到 DOM 中的 JavaScript 代码和其他内容的范围内，文件是无关紧要的。一旦 JavaScript 代码被加载，它就可以在整个 DOM 中使用。

因此，您要做的第一件事是加载 JavaScript（可能在 HTML 的标题中，但在它真正使用之前的任何地方）：

```
<script type="text/javascript" src="path/to/file.js"></script> 
```

（请注意，这不是一个自闭合标签。它需要根据 HTML 规范使用完整的闭合语法。）

加载 JavaScript 代码后，您可以从任何点击事件调用其中的任何函数。因此，如果在您的代码中，`link`是一个引用目标 DOM 元素的值，那么您希望`onclick`of`link`调用该函数：

```
link.onclick = someFunction(); 
```

[这里](https://stackoverflow.com/questions/1265887/call-javascript-function-on-hyperlink-click)有更多的例子。

# android - 如何以特定速率获取 gps 位置更新？

> ID：11579186
> 
> 赞同：0
> 
> 时间：2012-07-20T12:16:31.830
> 
> 标签：android, gps, location

我正在开发一个需要快速获取位置更新的应用程序，与它们的准确性无关。我需要能够每秒读取一次。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T12:22:07.097

除了在`0`中指定最小距离和最小时间值`requestLocationUpdates()`外，您无法控制速率。Android 会为您提供它收到的所有修复，但这是每秒 30 次修复还是每次修复 30 秒将取决于硬件、环境（例如，用户是否在室内？）等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T12:23:50.030

您可以在 Android 位置更新和您的接收器之间构建一个层。
在您自己的层中，捕获 Android 位置更新，并将同一位置每秒 30 次传递给您的接收器，直到您获得一个新位置。

**编辑**
这样的东西（未经测试）：

```
public class MyLocationManager implements LocationListener{

    private List<MyLocationListener> listeners;
    private Location lastLocation;
    private Handler handler;

    public MyLocationManager(){
        LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        lastLocation = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);

        listeners = new ArrayList<MyLocationListener>();
        handler = new Handler();

        sendLocationUpdates();
    }

    private void sendDelayedLocationUpdates(){
        handler.postDelayed(locationUpdater, 200);
    }

    public void addMyLocationListener(MyLocationListener mListener){
        listeners.add(mListener);
    }

    public void removeMyLocationListener(MyLocationListener mListener){
        listeners.remove(mListener);
    }

    @Override
    public void onLocationChanged(Location location) {
        lastLocation = location;
    }

    public interface MyLocationListener{
        public void onLocationChanged(Location location);
    }

    private Runnable locationUpdater = new Runnable(){
            @Override
            public void run(){
                for(MyLocationListener mListener : listeners){
                    mListener.onLocationChanged(lastLocation);
                }

                sendDelayedLocationUpdates();
            }
    };
} 
```

# iphone - 我们如何使用 12:30 AM 等格式的字符串将日期设置为日期选择器？

> ID：11579187
> 
> 赞同：1
> 
> 时间：2012-07-20T12:16:37.363
> 
> 标签：iphone, objective-c

大家好，我想从问题中给出的上述格式的字符串中将日期设置为日期选择器，我使用以下代码将日期设置为日期选择器

```
NSString *tmStr=[selectedDics objectForKey:@"Time"];
NSArray *timeStr=[tmStr componentsSeparatedByString:@" "];
NSString *fStr=[timeStr objectAtIndex:1];
NSArray *Time=[[timeStr objectAtIndex:0]componentsSeparatedByString:@":"];
NSInteger hour=[[Time objectAtIndex:0] intValue];

NSString *str=[NSString stringWithFormat:@"%i:%i",hour,[[Time objectAtIndex:1]intValue]];

NSString *a;
if ([fStr isEqualToString:@"PM"]) 
{
    a=@"PM";
    hour=hour+12;
}else
{
    a=@"AM";
    if (hour==12) {
        hour=0;
    }
}
NSCalendar *calender = [NSCalendar currentCalendar];
[calender setTimeZone:[NSTimeZone defaultTimeZone]];
unsigned currentFlag = NSDayCalendarUnit|NSMonthCalendarUnit|NSYearCalendarUnit|NSSecondCalendarUnit;
NSDateComponents *comps = [calender components:currentFlag fromDate:[NSDate date]];
comps.hour = hour;
comps.minute = [[Time objectAtIndex:1]intValue];
datePicker.date = [calender dateFromComponents:comps]; 
```

还有其他方法可以轻松设置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:23:27.457

```
 NSDateFormatter *formatter;
 formatter = [[NSDateFormatter alloc] init];
 [formatter setDateFormat:@"h:mm a"];

 NSDate *date=[formatter dateFromString:@"12:30 AM"]; 
 [datepicker setDate:date]; 
```

# regex - 读取命令的输出或从文件中读取

> ID：11579188
> 
> 赞同：2
> 
> 时间：2012-07-20T12:16:43.297
> 
> 标签：regex, linux, bash, shell

我是 bash 新手，想改进。我需要学习从文件或命令输出中读取特定文本。例如，我想从 /proc/interrupts 文件中计算计算机每个内核的总以太网中断数。文件的内容是：

```
CPU0       CPU1       CPU2       CPU3
0:        142          0          0          0   IO-APIC-edge      timer
1:          1          0          1          0   IO-APIC-edge      i8042
4:        694         18        635         19   IO-APIC-edge      serial
7:          0          0          0          0   IO-APIC-edge      parport0
9:          0          0          0          0   IO-APIC-fasteoi   acpi
12:          1          1          0          2   IO-APIC-edge      i8042
14:          0          0          0          0   IO-APIC-edge      ide0
19:          0          0          0          0   IO-APIC-fasteoi   uhci_hcd:usb3
23:          0          0          0          0   IO-APIC-fasteoi   ehci_hcd:usb1,  uhci_hcd:usb2
46:     347470     119806     340499     108227   PCI-MSI-edge      ahci
47:      33568      45958      46028      49191   PCI-MSI-edge      eth0-rx-0
48:          0          0          0          0   PCI-MSI-edge      eth0-tx-0
49:          1          0          1          0   PCI-MSI-edge      eth0
50:      28217      42237      65203      39086   PCI-MSI-edge      eth1-rx-0
51:          0          0          0          0   PCI-MSI-edge      eth1-tx-0
52:          0          1          0          1   PCI-MSI-edge      eth1
59:     114991     338765      77952     134850   PCI-MSI-edge      eth4-rx-0
60:     429029     315813     710091      26714   PCI-MSI-edge      eth4-tx-0
61:          5          2          1          5   PCI-MSI-edge      eth4
62:    1647083     208840    1164288     933967   PCI-MSI-edge      eth5-rx-0
63:     673787    1542662     195326    1329903   PCI-MSI-edge      eth5-tx-0
64:          5          6          7          4   PCI-MSI-edge      eth5 
```

我需要使用“eth”关键字读取所有中断数，然后找到每个 CPU 核心的总和（无论 CPU 核心名称是什么）。比如CPU0:33568+0+1+28217...什么适合这个？我必须将 awk 或 sed 用于正则表达式吗？如何使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:22:16.933

您可以使用`awk`它，*不需要*grep 或任何其他工具，因为 awk 可以自己进行搜索。

**更新**：

基于不同数量的 CPU 列的可能性（请参阅下面的第一条评论），这将起作用：

```
NR==1 {
  core_count = NF
  print "core count: ", core_count
  next
}
/eth/ {
  for (i = 2; i <= 2+core_count; i++)
    totals[i-2] += $i
}

END {
  print "Totals"
  for (i = 0; i < core_count; i++)
    printf("CPU%d: %d\n", i, totals[i])
} 
```

给出输出：

```
core count:  4
Totals
CPU0:  2926686
CPU1:  2494284
CPU2:  2258897
CPU3:  2513721 
```

*备注*：

如果第一行仅包含 CPU 标头，则使用`NF`脚本开头所示的方法将起作用。如果可能存在其他数据，则`core_count = gsub(/CPU/, "CPU")`可以使用。此外，此脚本依赖于连续的 CPU 列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T12:20:15.833

您可以使用过滤掉 eth 行`grep`，然后[使用 awk 求和](http://www.liamdelahunty.com/tips/linux_ls_awk_totals.php)。

例如对于 CPU 1 和 2：

```
grep eth report | awk '{ CPU0 += $2; CPU1 += $3} END { print CPU0; print CPU1} ' 
```

请注意，您可以[在 awk 中过滤](http://gilmation.com/articles/filtering-lines-in-awk/)，而不是`grep`为此使用。

然而，我可能很想在 Perl 中执行此操作，并为每个 CPU 创建一个总和哈希值。这将取决于我想要做到这一点的可扩展性。

# jquery - jQuery Breaks in MVC4

> ID：11579191
> 
> 赞同：0
> 
> 时间：2012-07-20T12:16:47.743
> 
> 标签：jquery, asp.net-mvc, jquery-ui, jquery-mobile

jQuery Breaks in MVC4

I have jQuery, jQuery Mobile and jQuery-UI included in my MVC4 project. I am having a problem where the jQuery-UI script only loads if the page is refreshed, otherwise the jQuery-UI will not load initially.

I have tried moving the include script to the bottom of the page instead of including it in the top. This seems to work 80% of the time with one side effect. When I post some data to the server, I would get two posts instead of one.. ugh! I seem to be stuck and I can find anything on Google that will help alleviate my problem. Any help or guidance will be appreciated.

Thanks!

Here is some added code

Here is my _layout.cshtlm

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title - My ASP.NET MVC Application</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <link href="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Content/css")" rel="stylesheet" type="text/css" />
        <link href="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Content/themes/base/css")" rel="stylesheet" type="text/css" />
        <link type="text/css" href="~/Content/jquery-ui-1.8.21.custom.css" rel="stylesheet" />
        <script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Scripts/js")" type="text/javascript"></script>
        <script src="@Url.Content("http://code.jquery.com/jquery-latest.js")" type="text/javascript"></script>              

        <script src="@Url.Content("~/Scripts/jquery-ui-1.8.21.custom.min.js")" type="text/javascript"></script>  
        <script src="@Url.Content("~/Scripts/jquery.multi-accordion-1.5.3.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/myjQuery.js")" type="text/javascript"></script>   
        <meta name="viewport" content="width=device-width" />
    </head>
    <body>
    <div>

        <header>
        <script>
        </script>
            <div class="content-wrapper wrappingBorder bottomRound shadow" style="background-color:White;margin:0 auto 30px auto;">
                <div class="float-left">
                    <p class="title">NTI Project Management</p>
                </div>
                <div class="float-right">
                  @*<section id="login">
                        @Html.Partial("_LoginPartial")
                    </section>*@
                        <nav>
                            <ul id="menu">
                                <li >@Html.ActionLink("Home", "Index", "Home")</li>
                                <li>@Html.ActionLink("Projects", "Index", "Project")</li>
                                <li>@Html.ActionLink("Profile", "Contact", "Home")</li>
                                <li>@Html.ActionLink("Logout", "Index", "Logout")</li>
                            </ul>
                        </nav>
                </div>
            </div>
        </header>

        @*Start of main content*@
        <div id="body">
            <section class="content-wrapper main-content clear-fix allRound shadow">
                @RenderBody()
            </section>
        </div>
        <footer>
            <div class="content-wrapper">
                <div class="float-left">
                    <p style="font-size: 14px">&copy; @DateTime.Now.Year - 3M</p>
                </div>
            </div>
        </footer>
        </div>   

    </body>     
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:15:58.003

我会先尝试删除捆绑，看看是否存在加载顺序问题。看起来您正在捆绑 scripts/js 文件夹并在 jquery 和 jquery.ui 之前加载它，这可能是问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:21:37.940

听起来你在加载 JQ lib 之前加载 JQUI 等

尝试在 _layout/master 页面的头部按以下顺序移动它：

*   江青
*   杰奎
*   其他

或者，确保您只调用每个库一次，并使用两个库的最新版本： - JQ：1.7.1 - JQUI：1.8.21

此外，请仔细检查这些库是否真的“存在”。进入 View Source > Head > 单击每个脚本的 URL 以查看您是否在 MVC 中指定了错误的位置。（有时在错误使用 Content.URL/URL.Action 时会发生）

由于浏览器缓存，它可能会在您第二次刷新时加载

就双贴而言，如果检查上述后仍然存在，显示一些代码也将帮助我们帮助您

# c# - 在不安全模式下使用 64 位指针访问 16 位数组

> ID：11579192
> 
> 赞同：2
> 
> 时间：2012-07-20T12:16:50.973
> 
> 标签：c#, arrays, pointers, unsafe

这是我的代码：

```
 long max = pcmU16.Length;
              long index = 0;

              fixed (ushort* srcFix = pcmU16)
              {
                    ushort* src = srcFix;

                    next:

                    *src = 32768;
                    src++;
                    index++;

                    if (index != max)
                    {
                          goto next;
                    }
              } 
```

如您所见，它一次写入 2 个字节。如何使用 ulong 类型一次写入 8 个字节？pcmU16 是 ushort[] 数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:51:11.753

你只是强迫它：

```
ulong* src = (ulong*)srcFix; 
```

不过要注意的事项：

*   您`max`需要除以 4，否则您将超出范围
*   您需要处理任何杂散值 - 例如，假设您有 10 个`ushort`值（`max`最初是 10 个）；即 2 组`ulong`（每组 4 组），最后 2组`ushort`；通常的除数/余数

最后一点，您*可能会*发现索引语法更方便，即

```
for(int i = 0 ; i < max ; i++) {
    src[i] = ...
} 
```

# objective-c - How do I change ARC setting after the project is created?

> ID：11579193
> 
> 赞同：0
> 
> 时间：2012-07-20T12:16:53.310
> 
> 标签：objective-c

I am new to iOS development. When I created my project, I chose the wrong setting for ARC, and now I don't know how to go back and change that setting. Where can I find that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:00:20.620

您必须进入项目设置的构建设置部分并更改：**Objective-C 自动引用计数**属性的值：

![截屏](../Images/6fac657790c81748218c9659ea024d6e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:25:19.057

进入构建设置并搜索“自动引用计数”，您应该会看到一个是/否选项。

# ruby-on-rails - Rails: How can I share a common object across different actions (that is unique to each user)

> ID：11579198
> 
> 赞同：2
> 
> 时间：2012-07-20T12:17:15.887
> 
> 标签：ruby-on-rails, controllers

I am building a rails3 application and I'm using the excellent ['gmail' gem](https://github.com/nu7hatch/gmail) to do some work with gmail. Each user enters his/her username and password and the gem creates a connection to gmail that can be used to fetch emails or send new emails.

How can I share this connection variable across actions in the same controller without having to create a new connection every time?

ex. user logs in with his details:

```
@gmail = Gmail.connect(email, pass) 
```

then user clicks on a link that calls a different action, for example to read new emails:

```
@newemails = @gmail.inbox.count(:unread) 
```

well the problem is that I cannot reuse this @gmail connection object in the 'unread' action as it is nil. I cannot store this in a session variable or in the database as it is not a string. And I cannot store this in a @@class_variable as the connection variable is not global across all sessions - each user must have its own connection obviously.

What is the best way to share this object across different actions?

Many thanks for your help, Alex

# c# - Html.DropownlistFor with editablefield

> ID：11579200
> 
> 赞同：0
> 
> 时间：2012-07-20T12:17:18.440
> 
> 标签：c#, jquery, model-view-controller, html.dropdownlistfor

I'm using a dropdownlistfor that populates some data from the database, the idea is that i want that the default value of the dropdown, has to be editable.

So the user can submit one of the options that are populated from the database, or the default one modified

How can i make this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:07:48.863

您可以在第一个值上使用 onclick 事件，该事件触发带有文本字段的 jquery 弹出窗口，该文本字段可以在提交时重写您的下拉列表的第一个值。

# scripting - XSS 中的常见漏洞？

> ID：11579202
> 
> 赞同：-1
> 
> 时间：2012-07-20T12:17:31.830
> 
> 标签：scripting, xss, cross-site

XSS（Java）中最常见的漏洞是什么，你能举出每个例子吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:21:44.110

试着阅读这篇文章，它应该对你有很大帮助！

[格雷格·默里的文章](http://weblogs.java.net/blog/gmurray71/archive/2006/09/preventing_cros.html)

# html - 具有相同填充的不同高度

> ID：11579204
> 
> 赞同：1
> 
> 时间：2012-07-20T12:17:39.110
> 
> 标签：html, css, button, label

我有以下填充：`padding:12px 24px;`输入按钮和复选框标签。字体在 body 中设置`16px Arial`，所有其他字体大小继承。`border:0;`对于所有元素。为什么浏览器会将 1px 添加到按钮的高度？所以如果标签的高度是 42px - 按钮的高度是 43px。这发生在 Chrome 和 Firefox 中。

如何使按钮和标签的高度相同？

![在此处输入图像描述](../Images/4d2d449ea8bcb80740d49573a27a2cdf.png) ![在此处输入图像描述](../Images/62efcaa338f0334852f5817367f36b17.png)

**部分代码**

`<input type='checkbox' name='remember' id="remember"/><label for="remember" >Remember me</label> <input type='submit' value='Sign in' id='signin-button' />`（在 HTML 表单中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:56:13.353

尝试添加`line-height: 17px;`，抱歉，如果您已经尝试过行高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:22:42.287

不确定，但可能归结为字体的行高以及它们在 HTML 中不同元素中的处理方式。

尝试使用 CSS 强制设置高度，如下所示：

```
#signin-button { height: 42px!important; border: none!important; overflow: hidden; } 
```

我通常反对为元素设置确切的高度作为一般规则，但对于这种情况，它可能只是完成这项工作并且是适当的。

祝你好运。

# android - 从 WebView 获取当前页面的 URL

> ID：11579208
> 
> 赞同：0
> 
> 时间：2012-07-20T12:17:54.130
> 
> 标签：android, url, download, android-webview

我有一个包含书籍集合的链接（例如*www.bookstore.com*），我从中选择一本书（带有 URL *www.bookstore.com/book1.epub*），当用户点击时应该将其下载到我的图书馆那本书的下载按钮。

我已经完成了下载部分，但困扰我的是如何获取用户选择下载的特定书籍的 URL，即*www.bookstore.com/book1.epub*？

我试过了`webView.getUrl()`，但除了第一次加载它为空时，它根本不会被触发。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T12:20:41.153

你只需要实现`WebViewClient`.

在其中`shouldOverrideUrlLoading()`，您将拥有当前 URL：

```
@Override  
public boolean shouldOverrideUrlLoading(WebView view, String url) {  
        // TODO Auto-generated method stub  

       // Log.d("URL => ", url);    // current URL
       view.loadUrl(url);  
       return true;  
 } 
```

阅读更多关于 WebView 和 WebViewClient => [WebView | 安卓开发者](http://developer.android.com/reference/android/webkit/WebView.html)

# delphi - 在 Delphi 中从 Windows 消息中获取串行端口的友好名称

> ID：11579216
> 
> 赞同：2
> 
> 时间：2012-07-20T12:18:07.317
> 
> 标签：delphi, winapi, serial-port

我在使用 delphi 从 DEV_BROADCAST_PORT 获取友好名称 (dbcp_name) 时遇到问题。

我试过使用微软帮助文档，它说它是一个指向空终止字符串的指针，但是在那个页面上有一条注释表明它是一个可变长度结构，而 dbcp_name 是一个包含实际字符的数组端口名称。

我试图提取它，但我目前还没有找到一种方法，因为当我让它返回任何东西时，它完全是胡言乱语。

我使用的代码如下：

```
PDevBroadcastPort = ^DEV_BROADCAST_PORT;

DEV_BROADCAST_PORT = packed record
    dbcp_size : DWORD ;
    dbcp_devicetype : DWORD;
    dbcp_reserved : DWORD ;
    dbcp_name : array[0..0] of ansichar; //TCHAR dbcp_name[1]; not valid
end; 
```

我为数组的长度尝试了不同的值，我在某处读到这是正确的声明，但我不完全确定。注释掉的行也是微软文档为 C++ 中的行提供的内容

要提取我尝试过的信息：

```
var
  PData: PDevBroadcastPort;

  FName: string;

  ...

  PData := PDevBroadcastPort(Msg.lParam);

  ShowMessage('Length '+Inttostr(length(PData^.dbcp_name)));

  FName := '';

  i:=0;

  while((PData^.dbcp_name[i]) <> #0) and (i < 100) do
      begin
          FName := FName + (PData.dbcp_name[i]);

          i := i +1;

          ShowMessage(FName); 
      end; 
```

我尝试将 while 循环设置为在数据结构的长度处终止，但如果我不设置它，它就会变得很大。

感谢您提供任何帮助，如果我遗漏了此问题所需的任何代码，请告诉我，我会尽快获取。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T13:19:20.107

文档并没有说它是*指向*以空字符结尾的字符串的指针。它说它*是*一个以空字符结尾的字符串。这对于在长度仅为一个元素的记录末尾声明的数组来说是典型的。

在指定的记录大小之后实际上还有更多的内存，并且该内存保存了字符串的剩余字符。指向该记录字段的指针也是指向字符数据的指针。

```
FName := PAnsiChar(@PData.dbcp_name); 
```

你的数组遍历代码也应该可以工作，假设你禁用了那段代码的边界检查（否则当程序检测到你读取超出数组的第一个元素时你会得到一个异常）。

这一切都假定这`PData`确实是一个指向`Dev_Broadcast_Port`结构的指针。你没有提供关于你正在传递什么信息的信息，所以我不知道你是否真的拥有你认为你拥有的东西。

如果您使用的是 Delphi 2009 或更高版本，则`TCHAR`C 声明中的类型等同于 Delphi 的`WideChar`类型。将该字段解释为一个数组`AnsiChar`会得到错误的结果，尽管对于大多数端口名称，它可能看起来好像该数组是一个以空字符结尾的单字符字符串列表。除非您确定您有非 Unicode 数据，否则您应该只使用`Char`and `PChar`，并让 Delphi 版本确定您拥有的数据类型。

```
FName := PChar(@PData.dbcp_name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:00:02.340

该`dbcp_name`字段包含实际字符。字符数据的长度减去空终止符后为`dbcp_size - SizeOf(DEV_BROADCAST_PORT)`，因此您可以像这样获取名称：

```
type
  DEV_BROADCAST_PORTA = packed record
    dbcp_size : DWORD;
    dbcp_devicetype : DWORD;
    dbcp_reserved : DWORD;
    dbcp_name : array[0..0] of AnsiChar;
  end; 

  DEV_BROADCAST_PORTW = packed record
    dbcp_size : DWORD;
    dbcp_devicetype : DWORD;
    dbcp_reserved : DWORD;
    dbcp_name : array[0..0] of WideChar;
  end; 

  {$IFDEF UNICODE}
  DEV_BROADCAST_PORT = DEV_BROADCAST_PORTW;
  {$ELSE}
  DEV_BROADCAST_PORT = DEV_BROADCAST_PORTA;
  {$ENDIF}
  PDEV_BROADCAST_PORT = ^DEV_BROADCAST_PORT; 
```

.

```
var
  PData: PDEV_BROADCAST_PORT;
  FName: string;

...
PData := PDEV_BROADCAST_PORT(Msg.lParam);
SetString(FName, PData^.dbcp_name, (PData^.dbcp_size - SizeOf(DEV_BROADCAST_PORT)) div SizeOf(Char));
ShowMessage(FName); 
```

# c++ - 使用 C++ 教程和示例代码进行音频流式传输

> ID：11579217
> 
> 赞同：15
> 
> 时间：2012-07-20T12:18:09.507
> 
> 标签：c++, audio-streaming

我想学习音频流的基础知识。特别是，我想学习如何从计算机麦克风捕获音频，并实时流式传输，以便其他用户可以实时收听。我想在 Windows 上做。

是否有任何好的教程来解释它是如何完成的，以及一些我可以查看更多细节的示例 C++ 代码？

另外我听说 ASIO 提供了一个低延迟库，所以我对此很感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T12:23:21.527

如果您使用的是 Windows，也许[这里是一个不错的起点？](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370784%28v=vs.85%29.aspx)

阅读该页面并查看[WASAPI](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371455%28v=vs.85%29.aspx)。

您可以使用`IAudioCaptureClient`

我参与了涉及实时音频流的项目，并使用[aac](http://en.wikipedia.org/wiki/Advanced_Audio_Coding)作为音频格式，使用[Live555](http://www.live555.com/liveMedia/)作为流媒体库。这些可能是一个很好的起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T13:03:46.360

对于在 Windows 上录制和播放音频，我推荐[使用波形音频 API](http://msdn.microsoft.com/en-us/library/aa446573.aspx#waveinout_topic_002)。您在[这里](http://www.techmind.org/wave/)有一个用于从麦克风记录数据的示例。

对于流媒体部分，如果您想使用已经可用的多媒体流媒体服务器，我会推荐[icecast](http://www.icecast.org/)及其[API lib](http://directory.fsf.org/wiki/Libshout)。

如果你想自己实现网络流，那么你可以使用[asio lib](http://think-async.com/)。你有一些例子[在这里](http://think-async.com/Asio/asio-1.4.8/doc/asio/examples.html)。

对于客户端的音频播放，这里有一个使用波形 API 的[教程](http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=4422&lngWId=3)。

# ios - NSURLConnection 没有调用委托方法

> ID：11579218
> 
> 赞同：1
> 
> 时间：2012-07-20T12:18:12.127
> 
> 标签：ios, nsurlconnection

我正在尝试使用 NSURLConnection 与我的服务器建立连接。我之前已经实现了很多次，但目前它无论如何都没有调用它的委托方法（成功/失败/超时）。我不明白为什么会这样。

下面是我写的代码。

在 .hi 中实现了 NSURLConnectionDelegate

米

这被调用了，我已经通过放置日志进行了检查。

```
 self.connection = nil;
 self.connection = [[NSURLConnection alloc] initWithRequest:MyRequest delegate:self    startImmediately:YES]; 
```

我的连接对象不是零。

我实现的委托方法是

```
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
- (void)connectionDidFinishLoading:(NSURLConnection*)theConnection 
```

我已将所有日志都放入其中，但没有一个被调用。

我还检查了我的服务器，它工作正常。我也连接到互联网。

任何人都可以抛出一些光，我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:04:40.900

是的，问题得到了解决。

我使用 performSelectorOnMainThread 在主线程上调用了我的 createConnection。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T07:48:55.257

实际上，如果您正在滚动 tableview 等，有更好的解决方案不会阻止您的连接委托回调：

```
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self  startImmediately:NO];
[connection scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];
[connection start]; 
```

当然你也可以在其他线程中调用 NSURLConnection 。查看[github](https://github.com/hrchen/ExamplesForBlog)中的示例。

# c# - 通过 MSCOMM 从 VB6 转换为 C# 到串行端口

> ID：11579225
> 
> 赞同：3
> 
> 时间：2012-07-20T12:18:32.207
> 
> 标签：c#, vb6

我正在尝试将一些数据发送到通过串行端口工作的 LED 显示屏。这段代码在 VB6 上完成了这项工作，但我需要将它转换为 C#。可悲的是它不起作用。有任何想法吗？

**VB6（示例）**

```
MSComm1.CommPort = 1

MSComm1.Settings = "9600,N,8,1"

MSComm1.PortOpen = True

MSComm1.Output = Chr(170)

MSComm1.Output = Chr(2) 
```

**C#（示例）**

```
var serialPort1 = new SerialPort("COM1", 9600, Parity.None, 8, StopBits.One);

serialPort1.Open();

serialPort1.Write(((char)170).ToString());

serialPort1.Write(((char)2).ToString());

serialPort1.Close(); 
```

我认为问题出在 serialPort1.Write 函数上，但我想不通。你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:28:28.100

我刚刚解决了在 C# 中使用 MSComm 类的问题。请大家帮忙:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:06:26.600

还想出了如何使用 serialPort 类来做到这一点。重要的是使用设计器添加 serialPort1 定义，而不是使用“var serialPort1 = new SerialPort("COM1", 9600, Parity.None, 8, StopBits.One);" 的手动定义。我猜我的问题是因为缺少定义。这是示例：

```
Byte[] _bytesToSend = new Byte[7];
_bytesToSend[0] = 170;
_bytesToSend[1] = 2;
serialPort1.Open();
serialPort1.Write(_bytesToSend, 0, _bytesToSend.Length);
serialPort1.Close(); 
```

# ruby-on-rails - 用户的heroku未定义方法“名称”

> ID：11579227
> 
> 赞同：5
> 
> 时间：2012-07-20T12:18:40.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

在我的应用程序中，当我通过迁移添加此字段时，它是没有“名称”字段的用户模型。在我的本地主机上，我的注册表单工作正常，但在 heroku 上我有这个日志：

```
ActionView::Template::Error (undefined method `name' for #<User:0x0000000518fb00>):
Rendered users/new.html.haml within layouts/application (3.1ms)
     5:       = f.input :name, required: 'true'
     6:       = f.input :email, required: 'true'
     3:     %h1 Sign up
     4:     = simple_form_for @user do |f|
     7:       = f.input :password
     8:       = f.input :password_confirmation, required: 'true' 
```

我试过的：

```
heroku run rake db:migrate
heroku run rake db:reset 
```

但没有任何帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-20T13:14:42.997

您还必须在迁移后重新启动 heroku - 您想运行

```
heroku run rake db:migrate
heroku restart 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:08:03.000

确保你已经完成`git add .`。然后`git status`确保所有文件都已提交。然后再次尝试推送。然后再次迁移。

# javascript - EmberJS + jqueryUI + 可排序

> ID：11579230
> 
> 赞同：3
> 
> 时间：2012-07-20T12:18:55.943
> 
> 标签：javascript, jquery, jquery-ui, ember.js, jquery-ui-sortable

我想在 emberjs 和 jqueryui 中创建一个包含一些可排序项目的列表（或表）。

我在 JSFiddle 上上传了一个示例：http: [//jsfiddle.net/KCxxu/](http://jsfiddle.net/KCxxu/)

当我启动它并单击删除时，它可以完美运行。但是，当我第一次重新排序项目并再次单击删除时，直到我单击两个删除按钮之前都没有任何反应。

有任何想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:44:44.057

在你的 del 函数中添加`contentWillChange()`和`contentDidChange()`

似乎现在可以工作

```
window.App = Ember.Application.create({});

Item = Ember.Object.extend({
    id : null,
    name : null
});

App.listController = Ember.ArrayProxy.create({
    content : [
        Item.create({id: 1, name : 'test'}),
        Item.create({id: 1, name : 'test2'}),
    ],
});

App.ListView = Ember.View.extend({
    tagName : 'tr',

    didInsertElement : function() {
        var me = this;
        this._super();

        // Make list sortable
        this.$().parent("tbody").sortable({
            items : 'tr',
            opacity : 0.6,
            axis : 'y'
        });
    },

    del : function(event) {
        var item = event.context;
        App.listController.contentWillChange();
        App.listController.removeObject(item);
        App.listController.contentDidChange();
    }
}); 
```

[http://jsfiddle.net/KCxxu/3/](http://jsfiddle.net/KCxxu/3/)

# c# - WCF 返回类特化

> ID：11579231
> 
> 赞同：0
> 
> 时间：2012-07-20T12:19:01.093
> 
> 标签：c#, .net, wcf

我有`M`返回类的 WCF web 方法`A`。Web 方法配置为使用 JSON 序列化程序。

现在问题来了：我有`B`一个直接专业化的课程`A`。我想返回`B`，但如果我这样做，请求会失败。

如果可能的话，我需要做些什么来完成这项工作？

这本质上是我在乱写代码中的问题：

```
[WebMethod]
A M();

public A M() {
   return new B(); // <-- no response on the client
} 

[DataContract]
class A { 
    [DataMember]
    bool Foo;
}

[DataContract]
class B : A {

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:22:46.707

首先要尝试的是：

```
[DataContract, KnownType(typeof(B))]
class A { 
    [DataMember]
    bool Foo;
} 
```

# python - 如何将多个可重用的 Django 应用程序绑定在一起？

> ID：11579232
> 
> 赞同：22
> 
> 时间：2012-07-20T12:19:00.863
> 
> 标签：python, django, django-1.4

我尽力编写可重用的 Django 应用程序。现在我很困惑如何将它们放在一起以获得最终项目。

这是我的意思的一个例子：我有一个图片应用程序，可以存储、调整大小和显示图像。我还有一个用于存储、编辑和显示文本的博客应用程序。现在我想将这两者结合起来以显示带有图像的博客文章。

为此，我可以在博客中放置外键字段以指向图片。但是没有图片应用程序就无法使用博客。我还可以创建第三个应用程序，负责连接两者。

什么是“最佳实践”的做法？

编辑：感谢您提供非常好的答案，但我仍在寻找如何解决此问题的更实际示例。完成我的示例：有时使用没有图片应用程序的博客应用程序会很好。但是，如果我对依赖项进行硬编码，则不再可能。那么第三个应用程序如何结合两者呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-14T22:01:17.153

答案底部的介绍谈话（更直接的答案）。我假设您有一个用于文本处理的应用程序，称为文本，一个用于处理图片的应用程序，称为图片，以及第三个用于博客的应用程序，称为博客。

## 大图

您将需要学习[有关 python 程序员模板语言的手册](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)。这个想法是每件事都在它自己的应用程序中，并且你有一个连接一切的第三个应用程序。然后，应用程序应该提供您喜欢的模型和视图（只要记住让您专注于应用程序应该做什么）并提供一组模板标签。

## 如何制作包含标签

制作包含标签，这真的很容易！它会提醒您编写普通视图。

在您的应用程序文件夹中创建目录模板标签。`__init__.py`还要在这个 templatetags 中创建一个文件（这样目录就变成了一个 python 包）。

然后创建一个python文件。名称很重要，您将在`{% load xyz %}`将使用您的应用程序的模板中使用它。例如，如果调用文件`picturestags.py`，您将调用
`{% load picturestags %}`将使用它的所有模板。

首先在文件中添加一些您不需要考虑太多的政治，只需将其包含在其他任何内容之前：

```
from django.template import Library
register = Library() 
```

然后通过定义与您的标签同名的函数来添加标签。我将在示例中将其称为 display_picture，它将采用一个参数 url。该函数应该创建一个您将在模板中使用的字典。我的示例将仅显示 url 指向的图片。

```
@register.inclusion_tag('pictures/display_picture.html')
def display_picture(url):
    return {'picture': url} 
```

在您的应用程序中创建路径模板/图片并在其中创建文件 display_picture.html 包含：

```
<img src="{{ picture }}" /> 
```

正如您可能理解的那样，@register 将其作为标签，字典 display_picture 返回的内容就是您可以在 display_picture.html 中使用的内容。非常像您的正常视图功能。

最后你会得到这些文件：

```
pictures/
    __init__.py
    models.py
    views.py
    tests.py
    templates/
        pictures/
            display_picture.html
    templatetags/
        picturetags.py 
```

这就是您需要添加到您的图片应用程序的全部内容。要在您的博客应用程序中使用它，您需要将图片添加到您的 INSTALLED_APPS。然后在模板中，您需要使用自己的新自制标签首先加载它：`{% load picturestags %}`然后只需`{% display_picture https://www.google.com/intl/sv_ALL/images/logos/images_logo_lg.gif %}`像这样添加标签：

```
{% load picturestags %}
<html>
    <body>
        {% display_picture https://www.google.com/intl/sv_ALL/images/logos/images_logo_lg.gif %}
    </body>
</html> 
```

## 结果

这只是一个小例子，但您可以看到它很容易扩展。您的博客可以通过导入模型和外键来连接文本和图片应用程序。您可以为某个博客文章连接文本和图片。您的 blog_post.html-template 可能看起来像（简化）：

```
{% load picturestags %}
{% load texttags %}
<html>
    <body>
        <h1>{{ subject }}</h1>
        <div class="article">{% article_to_html articleid %}</div>
        <div class="article_picture">{% display_picture %}</div>
    </body>
</html> 
```

请注意，只有博客有依赖关系，它应该有依赖关系（没有文字和图片的博客......但图片可以没有文字）。外观和位置应该并且可以由 CSS 和 DIV/SPAN 标记控制。通过这种方式，您可以将您的图片应用程序提供给不了解文本应用程序的人并使用它，以不同的方式显示图片，可能无需接触您的代码！

包含标签是我唯一知道的，因为我昨天才知道这一点。我认为这是 Django 提供的一种便利，让生活变得简单。在文档页面上还有更多内容（包括如何在没有“快捷方式”的情况下艰难地制作“真实”标签）。因此，如果您发现此方法有限，请阅读文档...它有很多示例。它还讨论了如何制作过滤器、simple_tags、线程注意事项和其他高级内容。

## 介绍

我和你一样遇到了这个问题，我也想要一些与我读到的答案不同的东西（我并不是说答案很糟糕，它们帮助我学到了很多东西并给了我见解，但我想要这个我现在正在写） . 我设法弄清楚了一些不是很明显的事情，这要归功于您的问题，并且绝对要感谢 Stack Overflow，所以这是我对可能被放弃的半年前问题的贡献（可能会帮助一两个谷歌人）！

[我还从Google Tech Talk Reusable Apps](http://www.youtube.com/watch?v=A-S0tqpPga4)中获得了很多灵感。最后（43 分钟）他提到了一些很好的例子，比如[django-tagging](http://code.google.com/p/django-tagging/)，这是他所说的如何编写可重用应用程序的模型。这给了我所有这一切的想法，因为这就是 django-tagging 解决我们曾经/拥有的这个问题的方式。

现在，在我写完所有这些（花了一个小时）之后，我第一次觉得我可能会做出贡献，而不仅仅是谷歌，关注别人在做什么，或者抱怨别人没有写出我需要做的事情。这是我第一次承担起写下我的观点的责任，这样其他人就可以在谷歌上搜索这个（只需要写下这段:-)，因为它感觉真的很棒，即使它可能被撕成碎片或被忽视和遗忘）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T15:19:23.717

以您在项目中使用任何 3rd 方应用程序的方式来考虑它。“可重用”并不意味着“没有依赖关系”。相反，你很难找到一个没有至少一个依赖项的应用程序，即使它只依赖于 Django 或核心 Python 库。（虽然核心 Python 库通常被认为是“安全的”依赖项，即每个人都会拥有它，但有时在 Python 版本之间会发生变化，因此您仍将应用程序锁定到特定时间点）。

可重用的目标与 DRY 的目标相同：您不想一遍又一遍地编写相同的代码。因此，像图片应用一样拆分功能是有意义的，因为您可以在其他应用和项目中一遍又一遍地使用它，但是您的图片应用将具有依赖项，其他包将依赖它，只要没有循环依赖，你很好（循环依赖意味着你实际上没有分离功能）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-20T12:27:51.723

这是一个很好的问题，我也觉得很难处理。但是 - 您是否认为这些应用程序会公开发布，或者您只是自己使用它们？如果你不释放，我不会*太*担心。

另一件事是，依赖关系很好。您示例中的图片应用程序听起来很适合成为“可重用”应用程序。它很简单，只做一件事，并且可以被其他应用程序使用。

另一方面，博客应用程序通常需要使用其他应用程序，例如图片应用程序或标记应用程序。我发现这种依赖很好。您可以通过简单地链接到您的图片应用程序放置的媒体资源来尝试将其抽象一点。

这只是一点点常识。你能让你的应用程序变得苗条吗？如果是，则尝试创建它们以便可以重复使用。但是，当它们有意义时，不要害怕接受依赖。此外，请尝试允许扩展点，以便您可以将依赖项换成其他的。直接外键在这里没有帮助，但也许像信号或 Restful API 之类的东西可以。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-25T20:46:57.687

我是 Django 新手，我遇到了同样的问题。令人羞耻的是，在 Django 社区中有这么多关于可重用应用程序的嗡嗡声，但没有一个关于如何在没有硬编码依赖项的项目中连接它们的权威参考。

我一直在做一个新的 Django 项目，我想设置我的模型来尽可能避免硬编码。这是我使用的模式。

**布局**

```
project_root/
    core/
        models/
            mixinmodels1.py
            mixinmodels2.py
            ...
        utils.py
        ...
    app1/
        models/
            __init__.py
            base.py
            basemixins.py
            mixins.py
            concrete.py
        /signals
            __init__.py
            handlers.py
        utils.py
        ...
    app2/
        ...
    ... 
```

**应用模型**

`base.py`：此模块仅在抽象类中实现该应用程序的“存在理由”。规则是：

*   这个模块通常只从`core`应用程序导入。它通常不会从同一项目中的其他应用程序导入任何内容。

*   上述规则的一个例外是当“存在的理由”假设存在另一个应用程序时。例如，一个`group`应用程序假设`user`某处有一个应用程序。在这种情况下，链接它们的方法是：

    ```
    # project_root/settings.py

    AUTH_USER_MODEL = 'app_label.UserModel'

    # project_root/groups/models/base.py

    from django.conf import settings 
    ```

    然后使用 settings.AUTH_USER_MODEL 来引用`user`模型

*   将此模式用于所有应用程序，而不仅仅是`user`应用程序。例如，您还应该这样做

    ```
    # project_root/settings.py

    GROUP_MODEL = 'app_label.GroupModel' 
    ```

*   如果使用上述模式，仅假设`base.py`您链接到的其他应用程序提供的功能。不要假设复杂的具体类的功能（我将很快讨论在哪里放置具体类）

*   当然，允许从 django、第三方应用程序和 python 包导入。

*   确保您`base.py`对任何应用程序所做的假设是坚如磐石的，并且在未来不会发生太大变化。`django-registration`James Bennett就是一个很好的例子。它是一个旧应用程序，但它的吸引力并没有减弱，因为它做出了坚如磐石的假设。由于好的可重用应用程序可以很好地完成一件事，因此不难找到这组假设。

`basemixins.py`：这个模块应该实现对该应用程序具体模型的插件。模型 M 的“插头”是包含模型 M 的外键的任何模型。例如：

```
# project_root/groups/models/basemixins.py

from django.conf import settings
from django.db import models

class BaseOwnedByGroup(models.Model):
    """
    This is a plug to the group model. Use this
    to implement ownership like relations with 
    the group model
    """
    owner = models.ForeignKey(settings.GROUP_MODEL,
        related_name = '%(app_label)s_%(class)s_owner',
        verbose_name = 'owner')

    # functionality and manager definitions go here.

    class Meta:
        abstract = True
        app_label = 'groups' 
```

`BaseOwnedByGroup`是`group`模型的“插头”。这里的规则和'base.py'一样

*   在定义 'plugs' 时`basemixins.py`，仅假定`base.py`.
*   仅从`core`、django、第三方应用程序和 python 包导入。

`mixins.py`: 这个模块应该用于两个目的

*   定义精细的“插件”，它假定精细的具体类的功能，而不是与其他应用程序的关系。精心设计的插件应该理想地继承`basemixins.py`.

*   定义可由该应用程序的具体类使用的混合模型（不是“插件”）。

`concrete.py`：这个模块应该用于定义（你猜对了）该应用程序的具体类并建立与其他应用程序的关系。简而言之，该模块假定您的项目以及您想要在其中提供的所有功能。

与其他应用程序的关系应设置如下：

*   要与 app 的模型 M 建立`one to one`or`many to one`关系`another_app`，请执行以下操作：

    ```
    # project_root/another_app/utils.py

    def plug_to_M_factory(version_label):
        """
        This is a factory method which returns
        the plug to model M specified by 
        version_label
        """
        if version_label == 'first_version':
            from another_app.models.basemixins import BasePlugToM
            return BasePlugToM
        if version_label == 'second_version':
            from another_app.models.mixins import PlugToM
            return PlugToM
        ...

    # project_root/groups/models/concrete.py

    from groups.models.base import BaseGroup
    from another_app.utils import plug_to_M_factory

    PlugToMClass = plug_to_M_factory(version_label = 'second_version')

    class ConcreteGroup(BaseGroup, PlugToMClass):
        # define your concrete model

        class Meta:
            app_label = 'groups' 
    ```

*   要建立`many to many`关系，推荐的方法是使用`through`模型。`through`以完全相同的方式继承模型中的正确插件（就像我们在`ConcreteGroup`模型中所做的那样）

`signals`: 在建立关系的过程中`app1`，当app的模型N`app2`发生变化时，我们经常要对app的模型M进行操作。您可以使用信号来处理它。您的处理程序可以承担具体发送者的功能，但通常他们不需要。假设发件人的基本版本`base.py`就足够了。这就是为什么总是`settings.ModelName`用来指​​代具体模型是个好主意。`settings.ModelName`您可以使用`ContentType`或使用项目范围的函数从字符串中提取模型类，`get_model_for_settings`如下所示：

```
# project_root/project/utils.py

from django.db.models import get_model
from django.core.exceptions import ImproperlyConfigured

def get_model_from_settings(model_string):
    """
    Takes a string of the form 'app_label.model' as input, returns the 
    appropriate model class if it can find it.
    """
    try:
        app_label, model_name = model_string.split('.')
    except ValueError:
        raise ImproperlyConfigured("function argument must be of the " 
            "form 'app_label.model_name', got '%s'" % model_string)

    model = get_model(app_label, model_name)

    if model is None:
        raise ImproperlyConfigured("function argument refers to model "
            "'%s' that has not been installed" % model_string)

    return model 
```

`core`：核心应用程序是一个特殊的应用程序，它存储了项目范围的混合功能。

*   这些 mixin 不应该假设任何其他应用程序。此规则的唯一例外是依赖于 settings.AUTH_USER_MODEL 基本功能的 mixin。这是因为您可以放心地假设大多数项目都会有一个`user`模型。

*   当然仍然允许从 django、第三方和 python 包导入

*   请记住，所有`base.py`和`basemixins.py`模块都允许从`core`.

最后，为了让一切按预期工作，将您的模型导入`models/__init__.py`每个应用程序。

我发现遵循此方案的优点是：

*   这些模型是*可重复使用*的。任何人都可以使用抽象基础模型和 mixin 来设计自己的具体模型。`base.py`，`basemixins.py`并且相关的工厂方法可以与一个基本的具体模型捆绑在一起，并在一个可重用的应用程序中发布。

*   这些应用程序是*可扩展*的。所有的 mixin 都是版本化的，并且有一个明确的继承方案。

*   这些应用程序是*松散耦合*的。通过工厂方法访问外部 mixin，并使用 django.conf.settings 引用外部模型。

*   这些应用程序是*自包含*的。应用程序中的任何更改很可能只会破坏该应用程序和该应用程序。其他应用程序很可能会毫发无损。即使外部应用程序出现故障，也会清楚地标记可能发生这种情况的位置。

我一直在使用这个方案来减少我的应用程序之间的耦合。我不是一个经验丰富的 Django 程序员，我有很多东西要学，所以任何反馈都是值得的。

# iphone - 在服务器 iPhone 上上传图像

> ID：11579236
> 
> 赞同：0
> 
> 时间：2012-07-20T12:19:13.440
> 
> 标签：iphone, ios, web-services

我是 iPhone 新手。我想将图像上传到服务器。我有网址

**http://lifestander.com:8080/fileupload/uploadfile.html?username=tom&password=1234&directory=ebay&filename=fantacy.jpg**

我使用以下方法上传文件，但控制台中的结果是：**{"success":"false", "message":"Authentication Failed"}**

我不明白控制台中的输出。所以请告诉我我做错了什么，或者改进我的代码。该怎么办？

谢谢。

```
-(void)uploadFile{

UIImage* theImage = [UIImage imageNamed:@"images.jpg"];
NSString* path = [[NSBundle mainBundle] pathForResource:@"images" ofType:@"jpg"];

NSString *photoUploadURLString=@"http://lifestander.com:8080/fileupload/uploadfile.html";

NSURL *url = [NSURL URLWithString: photoUploadURLString];

ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

[request setUseKeychainPersistence:YES];

// Upload an image
NSData *imageData = UIImageJPEGRepresentation(theImage,1.0);

[request addPostValue:@"tom" forKey:@"username"];
[request addPostValue:@"1234" forKey:@"password"];
[request addPostValue:@"ebay" forKey:@"directory"];

[request setData:imageData withFileName:@"images.jpg" andContentType:@"image/jpg" forKey:@"filename"];

[request setDelegate:self];
[request setDidFinishSelector:@selector(uploadRequestFinished:)];
[request setDidFailSelector:@selector(uploadRequestFailed:)];

[request startAsynchronous];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:29:12.893

我不确定这是否是代码错误，因为没有崩溃并且您会收到响应。`{"success":"false", "message":"Authentication Failed"}`表示[身份验证](http://en.wikipedia.org/wiki/Authentication)有问题。检查上传文件是否需要任何登录/密码/访问密钥，如果是，请实施。

# c# - 安装 Visual Studio 2010：错误 - VC 10.0 运行时 (x86)

> ID：11579237
> 
> 赞同：0
> 
> 时间：2012-07-20T12:19:16.680
> 
> 标签：c#, installation

*您好，在我的 Windows Xp 机器上尝试安装 Microsoft Visual Studio 2010 时出现以下错误：*以下组件无法安装 VC 10.0 Runtime (x86)

这是错误日志：

```
[05/17/12,11:26:36] VC 9.0 Runtime (x86): [2] dlmgr: CDownloadJobCompositeImpl: Download completed with hr = 0x800b0101
[05/17/12,11:26:37] VC 9.0 Runtime (x86): [2] Failed to fetch setup file in CBaseComponent::PreInstall()
[05/17/12,11:26:37] setup.exe: [2] ISetupComponent::Pre/Post/Install() failed in ISetupManager::InternalInstallManager() with HRESULT -2147467260.
[05/17/12,11:26:37] setup.exe: [2] CSetupManager::RunInstallPhase() - Call to Pre/Install/Post for InstallComponents failed
[05/17/12,11:26:37] setup.exe: [2] CSetupManager::RunInstallPhaseAndCheckResults() - RunInstallPhase() returned a NULL piActionResults
[05/17/12,11:26:37] setup.exe: [2] CSetupManager::RunInstallFromList() - RunInstallPhaseAndCheckResults failed [2]
[05/17/12,11:26:37] setup.exe: [2] ISetupManager::RunInstallLists(IP_PREINSTALL failed in ISetupManager::RunInstallFromThread()
[05/17/12,11:26:37] setup.exe: [2] ISetupManager::RunInstallFromThread() failed in ISetupManager::RunInstall() 
```

** 任何帮助，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:35:42.567

第一行的错误代码`0x800b0101`似乎表明存在证书问题，就像@Hans 所说的那样。某些 Windows 更新可能无法安装并报告相同的错误（尽管您可能还没有看到它们，因为您还没有安装 VS）。

检查[这个线程](http://social.msdn.microsoft.com/Forums/en/vssetup/thread/88da4438-9c59-411c-99c4-1df7866f24ff)。

在尝试为 Visual Studio 安装某些安全更新（来自 Windows 更新）时，我偶然发现了这个错误代码。我解决了它运行一个特定的 FixIt .msi 文件。如果线程中的建议不起作用，请告诉我，我会检查我运行的是哪个 FixIt。

# ruby-on-rails-3.1 - Rails 3.1 和缺少服务层

> ID：11579238
> 
> 赞同：0
> 
> 时间：2012-07-20T12:19:24.353
> 
> 标签：ruby-on-rails-3.1

我正在用 Rails 3.1 编写一个类似酒店的应用程序，而且我是 Rails 新手。我需要一些关于如何编写应用程序服务层中通常管理的内容的建议。

该应用程序需要一些服务来计算价格，并且这种方法必须可用于多个控制器。直到现在我把所有这些东西都放在一个控制器中，但现在我必须从那里取出它，我真的不知道如何以及在哪里。

我考虑过编写一个助手并将其包含在控制器中，但我不喜欢这个解决方案，因为助手应该只帮助在视图中渲染内容，并且它们不应该与业务层相关的任务混为一谈。

你将如何编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:40:48.413

也许您可以创建一个名为`services`

```
/app
  /controllers
  /services
    calculation_service.rb 
```

然后你像这样在你的控制器上使用它：

```
def show
  @model = Model.find(params[:id])
  @total = CalculationService.calculate_sum(@model.price, @model.subtotal)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:10:34.280

我什至不会在控制器中这样做。如果可能的话，我会将逻辑推送到您的模型中。如果多个模型都需要它，我会在您的 lib 文件夹中创建一个 mixin 并将其包含在每个模型中。

# android - 来自滑动键盘的带有 InputType 密码的 EditText

> ID：11579245
> 
> 赞同：1
> 
> 时间：2012-07-20T12:19:42.760
> 
> 标签：android, android-widget, android-edittext, android-softkeyboard, swipe

在我的应用程序中，我实用地创建了一个用户登录屏幕，其中包含 2 个用户名和密码的编辑文本。对于密码编辑文本，我正在使用以下代码片段设置 InputType。

pswdEditText.setInputType(InputType.TYPE_TEXT_VARIATION_VISIBLE_PASSWORD | TYPE_TEXT_FLAG_NO_SUGGESTIONS);

但我的问题是用户在设备设置中选择滑动键盘并打开应用程序并尝试通过滑动输入文本。如果用户滑动密码文本输入正在接受输入并显示建议而不考虑上述代码片段，这不是预期的（没有发生 facebook 应用程序）。

那么任何人都可以帮助我解决这个问题。

解决此问题的任何帮助将不胜感激。

提前致谢。

# objective-c - iOS - 自动调整单元格高度和标签高度

> ID：11579248
> 
> 赞同：0
> 
> 时间：2012-07-20T12:19:49.667
> 
> 标签：objective-c, ios

我是 iOS 编程的新手，我正在开发一个具有表格视图的应用程序。

表数据正在由 plist 文件加载。表格的一排会很长且不一致，因此我需要动态高度。

这是我到目前为止所拥有的：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSString *cellText    = @"This is a very long peice of text to show up here and here";// this will eventually be data from a plist
    UIFont *cellFont      = [UIFont fontWithName:@"Helvetica-neuve" size:21.0];
    CGSize constraintSize = CGSizeMake(280.0f, MAXFLOAT);
    CGSize labelSize      = [cellText sizeWithFont:cellFont constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];
    int buffer  = 70;
    return labelSize.height + buffer+100;

   //return 65; 

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"CustomTableCell";
    static NSString *CellNib = @"DetailViewCell";

    DetailViewCell *cell = (DetailViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:CellNib owner:self options:nil];
        cell = (DetailViewCell *)[nib objectAtIndex:0];

        cell.cellSubtitleLabel.lineBreakMode = UILineBreakModeWordWrap;
        cell.cellSubtitleLabel.numberOfLines = 0;
        cell.cellSubtitleLabel.font = [UIFont fontWithName:@"Helvetica-neuve" size:21.0];

    }   

    cell.accessoryType = UITableViewCellAccessoryNone;

    informations = [[NSArray alloc] initWithObjects:@"Title", @"Country", @"State", @"Population",  @"Info",  nil];
    subtitles = [[NSArray alloc] initWithObjects:titleString, subtitleString, stateString, populationString, @"This is a very long peice of text to show up here and here", nil];

    cell.cellTitleLabel.text = [informations objectAtIndex:indexPath.row];
    cell.cellSubtitleLabel.text = [subtitles objectAtIndex:indexPath.row];

    return (DetailViewCell *) cell; 
} 
```

我已经设法达到了高度还可以的程度。但是标签文本没有显示。我已经缩小了标签的高度。它是 23（在 Interface Builder 中设置）。如果我增加大小，它会弄乱其他单元格。我需要根据其内容更改标签的高度。

有人可以帮我解决这个问题，因为我已经花了两天的时间反复试验，但仍然没有成功。我也是一个菜鸟，所以详细解释一下；）

非常感谢

瑞安。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T07:21:05.140

我目前正在做同样的事情。这就是我所做的。

`cellForRowAtIndexPath`使用以下方法在回调中调整 UILabel 的大小`sizeToFit`：

```
[contentViewCell.myTextLabel sizeToFit]; 
```

希望这会帮助你。

# c# - 闭包和java匿名内部类

> ID：11579249
> 
> 赞同：1
> 
> 时间：2012-07-20T12:19:51.153
> 
> 标签：c#, java, closures

有没有人愿意为带有匿名内部类的闭包（使用 C# 获得）发布等效的 Java 代码？

```
 public static Func<int, int> IncrementByN()
    {
        int n = 0; // n is local to the method

        Func<int, int> increment = delegate(int x)
        {
            n++;
            return x + n;
        };

        return increment;
    }
static void Main(string[] args)
   {

        var v = IncrementByN();
        Console.WriteLine(v(5)); // output 6
        Console.WriteLine(v(6)); // output 8
    } 
```

此外，如果词法闭包可用，任何人都可以解释如何获得部分应用程序，反之亦然？对于第二个问题，C# 将不胜感激，但这是您的选择。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:50:41.000

Java 中还没有闭包。Lambda 表达式将出现在 java 8 中。但是，您尝试翻译的唯一问题是它具有状态，我认为这不是 lambda 表达式将支持的。请记住，它实际上只是一个简写，以便您可以轻松实现单一方法接口。但是，您仍然可以模拟这一点，我相信：

```
final AtomicInteger n = new AtomicInteger(0);
IncrementByN v = (int x) -> x + n.incrementAndGet();
System.out.println(v.increment(5));
System.out.println(v.increment(6)); 
```

虽然我没有测试过这段代码，它只是作为一个例子来说明可能在 java 8 中工作的内容。

想想集合 api。假设他们有这个接口：

```
public interface CollectionMapper<S,T> {
    public T map(S source);
} 
```

还有一个关于 java.util.Collection 的方法：

```
public interface Collection<K> {
  public <T> Collection<T> map(CollectionMapper<K,T> mapper);
} 
```

现在，让我们看看没有闭包：

```
Collection<Long> mapped = coll.map(new CollectionMapper<Foo,Long>() {
    public Long map(Foo foo) {
       return foo.getLong();
    }
} 
```

为什么不直接写这个：

```
Collection<Long> mapped = ...;
for (Foo foo : coll) {
    mapped.add(foo.getLong());
} 
```

更简洁对吧？

现在介绍 lambda：

```
Collection<Long> mapped = coll.map( (Foo foo) -> foo.getLong() ); 
```

看看语法有多好？你也可以链接它（我们假设有一个接口可以进行过滤，它返回布尔值以确定是否过滤掉一个值）：

```
 Collection<Long> mappedAndFiltered =
    coll.map( (Foo foo) -> foo.getLong() )
        .filter( (Long val) -> val.longValue() < 1000L ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:28:39.133

我相信这段代码是等价的（至少它产生了所需的输出）：

```
public class Test {

    static interface IncrementByN {
        int increment(int x);
    }

    public static void main(String[] args) throws InterruptedException {
        IncrementByN v = new IncrementByN() { //anonymous class
            int n = 0;

            @Override
            public int increment(int x) {
                n++;
                return x + n;
            }
        };
        System.out.println(v.increment(5)); // output 6
        System.out.println(v.increment(6)); // output 8
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T18:03:36.997

假设我们有一个通用的函数接口：

```
public interface Func<A, B> {
    B call A();
} 
```

然后我们可以这样写：

```
public class IncrementByN {

    public static Func<Integer, Integer> IncrementByN()
    {
        final int n_outer = 0; // n is local to the method

        Func<Integer, Integer> increment = new Func<Integer, Integer>() {
            int n = n_outer; // capture it into a non-final instance variable
                             // we can really just write int n = 0; here
            public Integer call(Integer x) {
                n++;
                return x + n;
            }
        };

        return increment;
    }
    public static void main(String[] args) {
        Func<Integer, Integer> v = IncrementByN();
        System.out.println(v.call(5)); // output 6
        System.out.println(v.call(6)); // output 8
    }
} 
```

一些注意事项：

`n`在您的程序中，您通过引用从封闭范围中捕获变量，并且可以从闭包中修改该变量。在 Java 中，您只能捕获`final`变量（因此只能按值捕获）。

我在这里所做的是`final`从外部捕获变量，然后将其分配给`final`匿名类内部的非实例变量。这允许将信息“传递”到闭包中，同时可以在闭包内分配它。*但是*，此信息流仅以“一种方式”起作用——`n`对闭包内部的更改不会反映在封闭范围中。这适用于本示例，因为方法中的局部变量在被闭包捕获后不再使用。

相反，如果您希望能够“双向”传递信息，即闭包也能够更改封闭范围内的内容，反之亦然，您将需要捕获可变数据结构，如数组，然后对其中的元素进行更改。那更丑陋，而且很少需要这样做。

# android - 使用 setOnItemClickListener 从列表视图中删除条目

> ID：11579254
> 
> 赞同：0
> 
> 时间：2012-07-20T12:20:02.710
> 
> 标签：android

我有一个列表视图，我希望能够在此处选择其中一个条目以将其删除。例如，我在 listview 中的条目如下所示：

约翰·史密斯

john@hotmail.com

4857394

纽约

所以我想选择这个并删除它。我找到这个集合 OnItemClickListener 是为了选择它。我有删除功能。单击此条目时，我只需要选择名称“John Smith”。我不知道我可以在函数里面写什么。

```
listContent.setOnItemClickListener(new OnItemClickListener()
{
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,long id)
    {       
        listContent.getItemAtPosition(position);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:26:52.707

```
listContent.setOnItemClickListener(new OnItemClickListener() {

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {

    listContent.getItemAtPosition(position);
    listContent.removeViewAt(position);
    adapter.notifyDatasetChanged();========> your adapter

}
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T12:27:59.103

您可以删除以下项目：

```
adapter.remove(listContent.getAdapter().getItem(arg2)); 
```

**注意**：由于您是直接从适配器对象中删除，因此您无需担心调用`notifyDataSetChanged()`方法以使更改生效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T12:35:23.980

在 ListView 上，您通过一些数据集合提供数据，列表中单个数据的索引将与屏幕中显示的相同。所以 onItemClick 方法你也会得到 int arg2 ，它表示选定的列表。您可以使用相同的索引从 List 中删除元素并在 runOnUIThread 方法中编写此删除操作，这样您就不会发现任何故障。

# javascript - 所见即所得内容中的撤消和重做 SWT 中的可编辑内容不起作用

> ID：11579255
> 
> 赞同：16
> 
> 时间：2012-07-20T12:20:05.263
> 
> 标签：javascript, html, editor, swt, undo

我正在使用 SWT 通过将`contentEditable`body 标记的属性设置为`true`.

当我执行一些命令`document.execCommand('bold')`时，它可以完美运行。但是当我尝试撤消操作时`document.execCommand('undo')`没有任何反应。我不知道我是否必须设置任何撤消管理器或做类似的事情。你能帮我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:50:29.040

这似乎是一个常见的问题，因为[谷歌搜索会发现](https://www.google.com/search?q=document.execCommand%28%27undo%27%29)。以下站点有一个很好的兼容性表和演示用于测试。

*   表：[http ://www.quirksmode.org/dom/execCommand.html](http://www.quirksmode.org/dom/execCommand.html)
*   演示：[http ://www.quirksmode.org/dom/execCommand/](http://www.quirksmode.org/dom/execCommand/)

他们在演示页面上也有以下声明：

> 撤消/重做在 IE 中不起作用。问题是右侧文本区域中的更改也添加到了撤消/重做堆栈中。最终版本不会有textarea，所以没必要解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:26:36.303

根据[这个 quirksmode table](http://www.quirksmode.org/dom/execCommand.html)，撤消/重做适用于所有主要浏览器，但它有这个注释：

> 撤消在 Safari 中有效，但如果您过于频繁地撤消/重做，它会崩溃。在 3 中解决。如果您在可编辑区域进行自己的更改，撤消/重做在 Mozilla 和 Safari 中继续工作（尽管它忽略您的自定义更改），但在 IE 和 Opera 中它停止工作。

我不知道 SWT 会如何影响这一点，但使用它可能会更好

```
document.execCommand("undo", "", null) 
```

ExecCommand 一直有很多 bug，我对 SWT 了解不多，但希望对你有所帮助。

# asp.net-mvc - 构建自定义路由（.Net MVC）的最佳实践是什么？

> ID：11579259
> 
> 赞同：1
> 
> 时间：2012-07-20T12:20:19.133
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

简短的故事是我想创建一个类似于 CMS/博客的网络应用程序。问题是它有一个页面层次结构（domain.com/x/y/z/）并且它存在几个控制器。我需要个东西

1.  处理这样的路由的最佳做法是什么？

    是预先注册数据库中存在的所有可能路径，还是最好创建一个
    获取所有内容的路由？

2.  使用 CurrentSite 和 CurrentPage 对象填充 routeData 的最佳做法是什么？我相信我想为每个请求找到正确的页面（基于层次结构和最后一个 url 段）并将这些对象添加到 routeData 以便在每个控制器中轻松获取它们？

你知道我可以从中找到一些想法的简单项目吗？

此致

# dozer - 如何在推土机（自定义转换器参数）中将字符串值列表作为“LIST”对象发送？

> ID：11579263
> 
> 赞同：0
> 
> 时间：2012-07-20T12:20:43.377
> 
> 标签：dozer

目前该列表在custom-converter-param中以“aa,bb,cc,dd”等形式传递，但参数以字符串形式传递，我们需要再次用逗号分割字符串，最后将其保存为列表加工。

有没有办法将字符串对象列表作为“List”作为参数传递？

谢谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:11:10.223

在每个自定义转换器中，属性**custom-converter-param**的值被传递给类*`parameter`*中类型*`String`*的 字段`org.dozer.DozerConverter<A, B>`，其唯一的 getter 方法契约是这样的：

> 公共字符串 getParameter()

所以不，不可能将值作为列表检索。这里最简单/最好的做法是在您自己的转换器中创建一个方法*getParameterAsList来拆分字符串值。*

# c++ - 堆栈溢出：堆栈空间中的重复临时分配？

> ID：11579266
> 
> 赞同：11
> 
> 时间：2012-07-20T12:20:52.310
> 
> 标签：c++, stack-overflow

```
struct MemBlock {

    char mem[1024];

    MemBlock operator*(const MemBlock &b) const {

        return MemBlock();
    }

} global;

void foo(int step = 0) {

    if (step == 10000)
    {
        global = global * MemBlock();
    }
    else foo(step + 1);
}

int main() {

    foo();
    return 0;
} 
```

> 程序收到信号 SIGSEGV，分段错误。0x08048510 in foo (step=4000) at t.cpp:12 12 void foo(int step = 0) {

尽管尚未调用 MemBlock() 实例，但它似乎消耗了大量的堆栈内存（检查 gdb 信息）。

而当我改用时`global = global * global`，程序正常退出。

任何人都可以解释内部机制吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-20T12:29:05.747

`MemBlock`编译器会在每次调用时为实例保留堆栈空间`foo`，而不管其中的控制流如何`foo`。这是一种常见的优化，可防止在函数内重复调整堆栈指针。相反，编译器计算所需的*最大*堆栈空间，并在进入函数时将堆栈指针调整该数量。

正如您所观察到的，这会导致丢失为您实际不使用的对象保留的堆栈空间。答案是不要那样做；如果您只在某些分支中使用一些大尺寸对象，那么将这些分支分离到它们自己的功能中。

Incidentally, this is why archaic versions of C required all function-scope variables to be declared at the top of the function; so that the compiler can easily work out how much stack space the function requires.

# java - 服务器不支持 J2EE Web 模块规范 3.0 版

> ID：11579267
> 
> 赞同：0
> 
> 时间：2012-07-20T12:20:54.647
> 
> 标签：java, jakarta-ee, jboss, jboss5.x

## 服务器不支持 J2EE Web 模块规范 3.0 版。

当我在 jboss-5.1.0.GA-jdk6 中发布我的模块时出现此错误。我已经阅读了 google 上的所有解决方案以及 stackoverflow 上的所有解决方案，但没有得到正确的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T12:27:58.060

解决方案是使用 JBoss 服务器支持的 servlet 规范版本，或者使用支持 servlet 规范 3.0 版的 JBoss 服务器版本。您正在尝试将全新版本的规范与在该规范版本甚至不存在时发布的旧服务器一起使用。

有关 JBoss 版本和 servlet 规范版本的矩阵，请参阅[https://community.jboss.org/wiki/VersionOfTomcatInJBossAS](https://community.jboss.org/wiki/VersionOfTomcatInJBossAS)。

# android - 适用于 android、iphone 和 windows phone 的通用编程语言

> ID：11579270
> 
> 赞同：4
> 
> 时间：2012-07-20T12:21:06.207
> 
> 标签：android, iphone, ios, windows-phone-7, code-reuse

嘿，我将为我的 android 应用程序编写一个算法。

现在的问题是它是一个大算法，我可能也会为 iphone 和 windows phone 开发应用程序。所以我想在任何地方重用代码。

我的问题是我应该用哪种语言编写算法以重用代码。

我做了一些研究，似乎 android 和 iphone 支持 C++，但我对 windows phone 感到困惑

> windows phone 是否支持C++语言

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:37:17.287

听起来 C++ 将随 WP Apollo 一起提供。

我会用 C++ 做，然后等着看是否有用于 WP 的 C++ 足够快。

否则，将代码重写为 C#，我认为很快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:38:23.023

*   Windows Phone 7 不支持 C++
*   Windows Phone 8 将支持 C++

也许你应该看看[MonoTouch](http://xamarin.com/monotouch/)。它允许您使用 C# 编写代码并以 Windows Phone、iOS 和 Android 为目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T12:58:43.757

不，Windows Phone 不支持 C++ - WP8 有可能会支持它，但我认为这还没有正式发布。你有几个选择，没有一个是理想的！

**MonoTouch / MonoDroid**

您可以使用 Mono 为 iOS 和 Android 使用 C# 编写应用程序，并使用用于 Windows Phone 的常规 C# 框架。这确实意味着您必须在整个应用程序中使用 Mono，而不仅仅是这个算法。

**JavaScript**

您可以用 JavaScript 编写算法，然后在每个平台的合适浏览器控件中运行它。丑陋，但可行！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-24T15:28:16.683

**WP8 没有完整的 C++ 支持**。

您不能仅使用它来开发和发布到 WP8 应用商店的非 Direct3D 应用程序。您必须/必须使用 C# 来设计您的界面，它是 XAML 并且仅与 C# 兼容。这个“你可以用 C++ 为 WP8 开发应用程序”的口号只是一个很大的营销谎言。以及WP8失败的迹象。在此处阅读我的答案以获取更多信息和资源：

[https://softwareengineering.stackexchange.com/a/177048/3375](https://softwareengineering.stackexchange.com/a/177048/3375)

# python - SQLAlchemy 0.7.8 带有参数的原始字符串查询问题

> ID：11579273
> 
> 赞同：5
> 
> 时间：2012-07-20T12:21:32.353
> 
> 标签：python, sqlalchemy, pyramid

我将 SQLAlchemy 与 Pyramid 应用程序一起使用，我需要使用“格式”参数样式。例如：

```
DBSession.execute('SELECT id FROM users WHERE email = %s;', email) 
```

这在理论上应该可行，但我得到 sqla 错误：

```
('SQL Error!', AttributeError("'list' object has no attribute 'keys'",)) 
```

即使`email`是字符串而不是列表。我尝试使用元组，但我得到了同样的错误（但不是“列表”，而是“元组”）。

我`pg8000`用作数据库驱动程序。

我还应该如何为查询提供参数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T08:27:06.580

通过使用`execute`session 的方法，参数处理由 SQLAlchemy 完成，因此您需要类似：

```
DBSession.execute('SELECT id FROM users WHERE email = :email;', {'email': email}) 
```

但是，如果您使用`execute`引擎的方法，则参数处理由底层 DB-API 完成，在这种情况下为 pg8000，例如

```
DBSession.bind.execute('SELECT id FROM users WHERE email = %s;', email) 
```

无论如何，我总是坚持使用前者，以一致的方式处理不同驱动程序/数据库的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:46:26.637

阅读[http://pybrary.net/pg8000/dbapi.html#pg8000.dbapi.CursorWrapper.execute](http://pybrary.net/pg8000/dbapi.html#pg8000.dbapi.CursorWrapper.execute)它看起来`pg8000.dbapi.paramstyle`被设置为`named`因此它期望一个看起来像这样的映射：

```
DBSession.execute('SELECT id FROM users WHERE email = %(email)s', {'email': email}) 
```

看来您想要设置`paramstyle`哪个`pyformat`看起来最灵活的选项 - 允许序列或映射（或者`format`如果不需要，也可以只是）。

# php - PHP + json 编码 + 数据表

> ID：11579275
> 
> 赞同：0
> 
> 时间：2012-07-20T12:21:34.000
> 
> 标签：php, json, datatable

我正在使用一个名为 DataTables 的 jquery 插件，它需要我返回一个 json 字符串才能呈现表格。

目前，输出的 json 看起来像这样（参见 aaData 数组）：

```
{"sEcho":0,"aaData":[[{"ID":"1","idPatient":"122342","idFacility":"3","idTreatment":"3"}]]} 
```

我想知道 { } 大括号是否实际上应该在 aaData 数组中。事实上，我认为大括号实际上是导致 JSON 解析错误的原因。

下面列出了生成它的实际代码。（`core->dbh`是一个 PDO 句柄）

```
<?php

require_once('core/Core.php');
$core = Core::get_instance();

        $sql = 'SELECT ID, idPatient, idFacility, idTreatment
                FROM Pathology WHERE idPatient = 122342';

        $stmt = $core->dbh->prepare($sql);

        $stmt->setFetchMode(PDO::FETCH_ASSOC);

        // bind parameters
        $stmt->execute();

        // prepare output for DataTables

        $data = array("sEcho" =>intval($_GET['sEcho']),
                      "aaData" =>array()
        );

        while($result = $stmt->fetchAll()) {

                $data['aaData'][] = $result;

        }

            echo json_encode($data);

?> 
```

有人可以告诉我如何删除花括号，或者 JSON 是否以另一种可能导致解析错误的方式格式不正确？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T12:27:28.937

JSON很好。您正在通过 json_encode 使用 PHP 对其进行编码，这不是问题。我的猜测是，通过这样做`$data['aaData'][] = $result;`你嵌套了两次（见双括号）你的结果和插件失败。尝试这个：`$data['aaData'] = $result;`

# css-float - 列表中的浮动表单元素

> ID：11579277
> 
> 赞同：0
> 
> 时间：2012-07-20T12:21:36.083
> 
> 标签：css-float, html-lists, forms

我正在尝试实现以下效果，这里我使用 ( ) 来表示单选按钮：

```
Y    N
( )  ( )  1\.  blah blah blah blah.
( )  ( )  2\.  blah blah blah blah
              blah blah blah.
( )  ( )  3\.  blah blah blah blah. 
```

以下小提琴接近我在 Safari 和 Chrome 上想要的，但不是 Firefox：http: [//jsfiddle.net/RKfrk/7](http://jsfiddle.net/RKfrk/7)。但在 Firefox 上，单选按钮不会向左浮动。我没试过IE。

有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T04:34:44.880

我添加了一个负边距，以便将单选按钮移动到列表编号的左侧：

```
.floatingButtons {
     width: 4em;
     float:left;
     margin-left:-4em;
 }
 .clearFloat {
     clear:left;
 }
 li {
     margin-left:2em;
 } 
```

这是小提琴：http: [//jsfiddle.net/mmertel/7mBkR/](http://jsfiddle.net/mmertel/7mBkR/)

# backbone.js - Backbone.js - 嵌套模型和多个模型集合？

> ID：11579279
> 
> 赞同：0
> 
> 时间：2012-07-20T12:21:37.893
> 
> 标签：backbone.js, backbone-relational

1.  可以在backbone.js 中有嵌套模型吗？示例：模型 A 的属性之一为模型 B

2.  一个可以存储多于一种模型类型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:39:46.260

是的，您可以将模型存储在属性中（嵌套模型）。需要注意的主要事情是嵌套模型或集合的更改事件不会传播到外部模型。

您可以在集合中使用不同的模型，但默认的 create 和 add 方法只会创建一种类型的模型，如果它们被传递属性而不是显式模型。此外，保存和获取将要求您在传入的每个模型上指定 URL 以使其正常工作。一般来说，我不会推荐它。

# ruby-on-rails - 登录后在模板结构中使用页面的命令

> ID：11579285
> 
> 赞同：0
> 
> 时间：2012-07-20T12:21:51.113
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我不得不使用 ruby​​ 来构建与 api 的交互，这一切正常。但现在试图让模板的布局正确。页面、页眉、页脚、侧边菜单和内容的每个部分都在一个单独的 rhtml 文件中。但在某些情况下，如果用户登录，我需要侧菜单页面不同。有没有办法实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:42:26.533

我同意 MurifoX 的观点，您应该确保每个不同的菜单都呈现为部分菜单，以保持代码简洁明了。

这是我的 application.html.haml 中的内容（我使用 HAML）：

```
- if user_signed_in?
  = render :partial => "layouts/signed_in_menu"
- else
  = render :partial => "layouts/menu" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:36:04.500

根据您的身份验证解决方案，您可以检查以下内容：

```
<% if @current_user %>
  ... Render menu type 1
<% else %>
  ... Render menu type 2
<% end %> 
```

这样您就可以检查您的应用程序中是否有 current_user 登录，并执行视图逻辑以显示不同类型的菜单。

# wix - 检查单击下一个按钮是否用户在文本框中输入了一个值

> ID：11579286
> 
> 赞同：0
> 
> 时间：2012-07-20T12:21:51.950
> 
> 标签：wix, wix3.5

我想知道如何验证文本框中的条目？我正在使用 wix 工具集 3.5。我的意思是我应该得到一个提示或一些消息，说你必须输入文本（我在这里有一个人的名字）并且没有它就不能继续安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:36:46.183

您需要修改您的 UI 元素，以便有一个条件 Publish 标记来确定附加到 TextBox 的属性是否已填充：

```
 <Publish Dialog="NameSettingsDlg" 
           Control="Next" 
           Property="ErrorMessage" Value="You need to fill in your name!" 
           Order="1">
      NOT NAME_PROPERTY
  </Publish>
  <Publish Dialog="NameSettingsDlg" 
           Control="Next" 
           Event="SpawnDialog" 
           Value="InvalidSettingsDlg" 
           Order="2">
      NOT NAME_PROPERTY
  </Publish>
  <Publish Dialog="NameSettingsDlg" 
           Control="Next" 
           Event="NewDialog" 
           Value="VerifyReadyDlg">
  </Publish> 
```

其中“InvalidSettingsDlg”定义为：

```
<Fragment>
    <UI>
        <Dialog Id="InvalidSettingsDlg" 
                Width="260" 
                Height="85" 
                Title="!(loc.InvalidSettingsDlg_Title)">
            <Control Id="OK" Type="PushButton" X="102" Y="57" Width="56" 
                     Height="17" Default="yes" Cancel="yes" Text="!(loc.WixUIOK)">
                <Publish Event="EndDialog" Value="Return">1</Publish>
            </Control>
            <Control Id="Text" Type="Text" X="48" Y="22" Width="194" Height="30" 
                     Text="[ErrorMessage]" />
            <Control Id="Icon" Type="Icon" X="15" Y="15" Width="24" Height="24" 
                     ToolTip="!(loc.InvalidSettingsDlgIconTooltip)" FixedSize="yes"
                     IconSize="32" Text="WixUI_Ico_Exclam" />
         </Dialog>
    </UI>
</Fragment> 
```

# jquery - 不能重复动画 - jQuery

> ID：11579287
> 
> 赞同：0
> 
> 时间：2012-07-20T12:21:53.743
> 
> 标签：jquery, jquery-plugins, css, jquery-animate, css-transitions

我无法使用以下示例重复动画（使用[jQuery Transit](http://ricostacruz.com/jquery.transit/)）

```
$("#rotateDiv2").button().click(function() {
    $('#second').transition({
        perspective: '100px',
        easing: 'snap',
        duration: '3000ms',
        rotate3d: '1, 1, 0, 360deg'
    });
}); 
```

它确实有效，只有一次有效（当然是在单击按钮时）。第二次我点击它什么都不做。谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:17:25.847

您可以在回调中重置 CSS 转换属性：

[http://jsfiddle.net/zA2ZQ/2/](http://jsfiddle.net/zA2ZQ/2/)

```
$("#rotateDiv2").button().click(function() {
    $('#second').transition({
        perspective: '100px',
        easing: 'snap',
        duration: '3000ms',
        rotate3d: '1, 1, 0, 360deg'
    }, function(){
      //reset the transform property
      $(this).css('transform', '');
    });
});​ 
```

# iphone - 如何从 UIView 中删除识别器

> ID：11579289
> 
> 赞同：0
> 
> 时间：2012-07-20T12:21:57.660
> 
> 标签：iphone, objective-c, ios, ipad

我有 UIButton 和 UIView，我在按钮上加载（如 setImage） 如何从 UIView 中删除识别器，以便我可以按下 UIButton，而不是 UIView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:27:28.547

```
for(UIGestureRecognizer *gesture in [self.view gestureRecognizers])){
           if([gesture isKindOfClass:[UITapGestureRecognizer class]){
             if (gesture.numberOfTapsRequired == 1) 
                [imageView removeGestureRecognizer:gesture];
           }
        } 
```

您可以使用此删除视图中的所有单个点击手势

# objective-c - 向多个 MVC 添加游戏功能（暂停、恢复）

> ID：11579290
> 
> 赞同：1
> 
> 时间：2012-07-20T12:22:05.450
> 
> 标签：objective-c, class, categories

我有一组这样的方法：

```
- (void)resumeGame;

- (void)resumeGameWithOverlay;

- (void)resumeGameOnLeavingBackground:(NSNotification *)notification;

- (void)pauseGame;

- (void)pauseGameOnEnteringBackground:(NSNotification *)notification;

- (void)endGame; 
```

我想做的是能够将它们放入一个单独的文件中，这样这些方法（也需要访问 MVC 的实例变量）只能编写一次，但可以在我拥有的每种不同类型的游戏中使用，即马拉松模式，计时赛。

我的第一个想法是将它们简单地添加到另一个类中，但后来我发现了`Categories`. 你会推荐哪一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:14:12.733

这是前段时间所以请见谅，但似乎委托是最好的方法，或者好老`NSNotificationCenter`

# css - 无法弄清楚这个旧的 webkit CSS3 渐变

> ID：11579293
> 
> 赞同：0
> 
> 时间：2012-07-20T12:22:21.183
> 
> 标签：css, webkit, gradient

所以，我发现这个简洁的代码在 CSS3 中有一些渐变效果，但只使用了旧的 webkit 语法。

我试图让它在其他浏览器中工作，但我不知道如何将它转换为正确的语法。

这是代码：

```
background: -webkit-gradient(linear, left top, right top,
      color-stop(0%,rgba(221,221,221,1)),
      color-stop(50%,rgba(221,221,221,0.01)),
      color-stop(100%,rgba(221,221,221,1))
); 
```

和：

```
background: -webkit-gradient(linear, left top, right bottom,
    color-stop(0%,rgba(0,0,0,.1)),
    color-stop(85%,rgba(255,255,255,0.01)),
    color-stop(100%,rgba(255,255,255,.35))
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:23:09.890

第一个是：

```
background-image: linear-gradient(left top,
                                  rgba(221,221,221,1) 0%,
                                  rgba(221,221,221,0.01) 50%,
                                  rgba(221,221,221,1) 100%
                                  ); 
```

我把第二个留给你做练习；）为了一点帮助：

[规格](http://dev.w3.org/csswg/css3-images/#linear-gradients)

[渐变工具](http://gradients.glrzad.com/)

# printing - 打印使用 displayTag 构建的目录？

> ID：11579296
> 
> 赞同：1
> 
> 时间：2012-07-20T12:22:26.843
> 
> 标签：printing, displaytag

我在我的应用程序中使用 Struts2 和显示标签。我在显示表中使用带有 partial="true" 选项的导航。

我还有一个要求是有打印选项。如果用户单击“打印”图标，则无论导航如何，整个内容都应发送所有记录。我的意思是所有记录。有可能实现这一目标吗？如果只有页面中的记录意味着。没问题我可以做到这一点。我如何发送所有打印记录？

# jquery - jQuery可拖动多个元素

> ID：11579297
> 
> 赞同：0
> 
> 时间：2012-07-20T12:22:27.877
> 
> 标签：jquery, jquery-ui

请问我怎样才能将两个红色的 div ( `.drag_sim`) 与绿色的 div ( `.drag_multi`) 一起移动。红色的 div 也是可拖动的。

小提琴：http: [//jsfiddle.net/9sNEK/14/](http://jsfiddle.net/9sNEK/14/)

**HTML**

```
<div class="drag_multi"></div>

<div class="pdrag" id="pdrag1">
    <div class="drag_sim"></div>
</div>

<div class="pdrag" id="pdrag2">
    <div class="drag_sim"></div>
</div> 
```

**JS**

```
$('.drag_multi').draggable();
$('.drag_sim').draggable(); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:27:14.940

删除波纹管CSS部分并尝试

```
.drag_multi, .pdrag, .drag_sim{
  position:absolute;
} 
```

# objective-c - 连接按钮以编程方式查看控制器类 Objective-C

> ID：11579299
> 
> 赞同：0
> 
> 时间：2012-07-20T12:22:33.907
> 
> 标签：objective-c, ios, xcode

> **可能重复：**
> [将按钮连接到 xcode 中的 TableViewController](https://stackoverflow.com/questions/10296573/connect-button-to-tableviewcontroller-in-xcode)

如何以编程方式将我的按钮连接到另一个视图控制器类提前谢谢，我需要代码我真的是初学者谢谢，这是我的按钮代码：我的 vie 控制器类名称是 year.m

```
-(void) year:(id)sender{
    NSLog(@"Year button clicked");
 } 
```

**编辑：**

这是我的编程按钮的代码

```
UIBarButtonItem *yearButton= [[UIBarButtonItem alloc] initWithTitle:@"Year" style:UIBarButtonItemStyleBordered    
 target:self action:@selector(year:)]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:58:45.620

您可以简单地添加`addTarget`方法（请参阅此处：[将操作绑定到 UI 按钮](https://stackoverflow.com/questions/545721/bind-action-to-uibutton)）。在您的情况下，它将是：

```
[yearButton addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];

//the method that gets called
-(IBAction) buttonPressed: (id) sender {
  NSLog(@"Button clicked %@", sender);
  // do something here
} 
```

但是如果你想检查按钮是否在另一个视图控制器中被按下，你必须寻找 NSNotifications （见这里：[可可通知示例](https://stackoverflow.com/questions/842737/cocoa-notification-example)）。有了这些，您可以将消息从一个班级发送到另一个班级，并对用户的输入做出反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:52:15.853

`viewDidLoad`按以下方式在方法中创建 yourButton ...

```
UIButton *yourButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[yourButton setTitle:@"YearButton" forState:UIControlStateNormal];
yourButton.frame = CGRectMake(240, 40, 75, 30);     
[yourButton addTarget:self action:@selector(year:) forControlEvents:UIControlEventTouchUpInside]; 
[self.view addSubview:yourButton]; 
```

这是您的方法代码....

```
-(void) year:(id)sender{
    NSLog(@"Year button clicked");
 } 
```

我想这会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T12:30:26.060

要以编程方式添加目标/动作对（而不是通过 Interface Builder），请查看以下方法`UIButton`：

```
addTarget:(id)target action:(SEL)action forControlEvents:(UIControlEvents)controlEvents 
```

# netbeans - 代号一构建在 netbeans 7.1 上

> ID：11579302
> 
> 赞同：3
> 
> 时间：2012-07-20T12:22:40.133
> 
> 标签：netbeans, lwuit, codenameone

一段时间以来，我一直在尝试构建一个 ios 应用程序。我做了所有的证书配置等问题是，每当我将构建从 netbeans 发送到 CN1 构建服务器时，它都会告诉我“你可能已经用完了构建”......请注意，我只做了不到 10 个其中只有 3 个是 iphone（失败）。我知道还有一个订阅，但我也知道有一个免费订阅允许几个构建。有没有办法解决这个构建问题。（见下面的输出）

```
Sending build request to the server, notice that the build might take a while to complete!
C:\TrueMobile\BeCorrect_\build.xml:82: Failed to upload to server. Its possible you ran     out of builds. Please check http://www.codenameone.com/build-server.html
BUILD FAILED (total time: 2 seconds) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:59:03.460

iOS 构建比其他平台占用更多的构建信用，因为它们占用了更多的服务器资源。需要在 Mac 上托管（这非常昂贵），并且构建本身很长，这会延迟并发构建。

[您每月](http://www.codenameone.com/pricing.html)只需 9 美元即可获得无限次构建，或者您可以等待下个月再次获得 100 个构建积分（iOS 占用 20 个，其他平台占用 1 个）。

[或者，您可以按照此处](http://www.codenameone.com/community-outreach.html)的说明免费获得无限构建。

# iphone - XCode - 更改在循环中创建的 UILabel 的标识符的最佳方法是什么

> ID：11579307
> 
> 赞同：1
> 
> 时间：2012-07-20T12:22:48.937
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

我正在循环创建标签。

我怎样才能使每个标签都有不同的标识符，以便我以后可以检索特定标签的文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:28:45.283

您需要将标签添加到字典中，并将键设置为您的 labelName，并将对象设置为您的 UILabel。

然后，每当您想访问该变量时，您都可以使用 NSDictionary 的 objectForKey:myVar 方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T12:25:34.800

Objective-C 是一种静态语言，所以你不能。您应该根据需要创建一个数组或字典来放入标签。

顺便说一句，在声明指针时不要忘记星号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T13:11:48.960

我通过设置标签的标签来做到这一点

如果您通过 for 循环执行此操作，您可以执行以下操作：

```
for(int i = 0; i < max; i++)
    [aLabel setTag:i]; 
```

# git - GIT 以不同的用户身份提交，没有电子邮件/或只有电子邮件

> ID：11579311
> 
> 赞同：148
> 
> 时间：2012-07-20T12:23:15.593
> 
> 标签：git, commit

我正在尝试以其他用户身份提交一些更改，但我没有有效的电子邮件地址，以下命令对我不起作用：

```
git commit --author="john doe" -m "some fix"
fatal: No existing author found with 'john doe' 
```

尝试仅使用电子邮件地址提交时遇到同样的问题

```
git commit --author="john@doe.com" -m "some fix"
fatal: No existing author found with 'john@doe.com' 
```

在提交命令的 GIT 手册页上，它说我可以使用

```
standard A U Thor <author@example.com> format 
```

对于 --author 选项。

这种格式在哪里定义？A 和 U 代表什么？我如何为只有用户名或只有电子邮件的不同用户提交？

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2012-07-20T12:48:38.213

[如this SO answer](https://stackoverflow.com/a/8992149/168775)中所暗示的，所需的最低作者格式是

```
Name <email> 
```

在你的情况下，这意味着你想写

```
git commit --author="Name <email>" -m "whatever" 
```

根据 Willem D'Haeseleer 的评论，如果您没有电子邮件地址，您可以使用`<>`：

```
git commit --author="Name <>" -m "whatever" 
```

[`git commit`正如您链接到的手册页](http://www.kernel.org/pub/software/scm/git/docs/git-commit.html)上所写，如果您提供的内容少于此内容，则它将用作搜索令牌来搜索以前的提交，以查找该作者的其他提交。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-07-20T12:45:57.003

具体格式为：

```
git commit --author="John Doe <john@doe.com>" -m "Impersonation is evil." 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2012-07-23T12:01:37.540

这

> *标准*AU Thor <author@example.com> 格式

似乎定义如下：（据我所知，绝对没有保证）

AU Thor =**必填用户名**

*   字符的分隔*可能*表示允许使用空格，也可能类似于首字母。
*   用户名后面必须有 1 个空格，多余的空格将被截断

<author@example.com> =**可选电子邮件地址**

*   必须始终位于 < > 符号之间。
*   电子邮件地址格式未经过验证，您几乎可以输入任何您想要的内容
*   可选，您可以使用 <> 显式省略它

如果你不使用这个确切的语法，git 将搜索现有的提交并使用包含你提供的字符串的第一个提交。

**例子：**

1.  只有用户名

    明确省略电子邮件地址：

    ```
    git commit --author="John Doe <>" -m "Impersonation is evil." 
    ```

2.  只有电子邮件

    从技术上讲，这是不可能的。但是，您可以输入电子邮件地址作为用户名并明确省略电子邮件地址。这似乎不是很有用。我认为从电子邮件地址中提取用户名然后将其用作用户名会更有意义。但如果你必须：

    ```
    git commit --author="john@doe.com <>" -m "Impersonation is evil." 
    ```

我在尝试将存储库从 mercurial 转换为 git 时遇到了这个问题。我在 msysgit 1.7.10 上测试了这些命令。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2020-03-28T10:46:52.373

为了不泄漏您的 git 个性之间的信息，该`--author`选项没有做正确的事情：它不会绕过读取调用用户的配置：

```
*** Please tell me who you are.

Run

  git config --global user.email "you@example.com"
  git config --global user.name "Your Name" 
```

这样做：

```
git -c user.name='A U Thor' -c user.email=author@example.com commit 
```

* * *

为了区分工作和私人 git 的个性，Git 2.13 支持[特定于目录的配置](https://stackoverflow.com/a/60344116)：您不再需要包装 git 并自己破解它来获得它。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-06-14T02:09:58.913

补充一下：</p>

> git commit --author="john@doe.com " -m "冒充是邪恶的。"

在某些情况下，提交仍然失败并显示以下消息：

> *** 请告诉我你是谁。
> 
> 跑
> 
> git config --global user.email "you@example.com" git config --global user.name "你的名字"
> 
> 设置您帐户的默认身份。省略 --global 以仅在此存储库中设置身份。
> 
> 致命：无法自动检测电子邮件地址（获取 xxxx）

所以只需运行“git config”，然后运行“git commit”

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-07-20T12:46:56.317

格式

```
A U Thor <author@example.com> 
```

只是意味着你应该指定

```
FirstName MiddleName LastName <email@example.com> 
```

看起来中间名和姓氏是可选的（也许电子邮件之前的部分根本没有严格的格式）。例如，试试这个：

```
git commit --author="John <john@doe.com>" -m "some fix" 
```

正如文档所说：

```
 --author=<author>
       Override the commit author. Specify an explicit author using the standard 
       A U Thor <author@example.com> format. Otherwise <author> is assumed to 
       be a pattern and is used to search for an existing commit by that author 
       (i.e. rev-list --all -i --author=<author>); the commit author is then copied 
       from the first such commit found. 
```

如果您不使用这种格式，git 会将提供的字符串视为一种模式，并尝试在其他提交的作者中找到匹配的名称。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-06-08T14:40:38.917

打开 Git Bash。

设置一个 Git 用户名：

$ git config --global user.name "name family" 确认你已经正确设置了 Git 用户名：

$ git config --global 用户名

> 姓氏

设置一个 Git 电子邮件：

$ git config --global user.email email@foo.com 确认你已经正确设置了 Git 邮箱：

$ git config --global user.email

> 电子邮件@foo.com

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-08-20T02:49:05.457

如果担心隐藏真实的电子邮件地址，另一种*选择*......如果您致力于 Github，则不需要真实的电子邮件，您可以使用`<username>@users.noreply.github.com`

无论是否使用 Github，您可能首先想要更改您的**提交**者详细信息（在 Windows 上使用`SET GIT_...`）

```
GIT_COMMITTER_NAME='username' 
GIT_COMMITTER_EMAIL='username@users.noreply.github.com' 
```

然后设置作者

```
git commit --author="username <username@users.noreply.github.com>" 
```

[https://help.github.com/articles/keeping-your-email-address-private](https://help.github.com/articles/keeping-your-email-address-private)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-01-25T08:06:50.503

这完全取决于你如何提交。

例如：

`git commit -am "Some message"`

将使用您的`~\.gitconfig`用户名。换句话说，如果您打开该文件，您应该会看到如下所示的一行：

```
[user]
    email = someemail@gmail.com 
```

那将是您要更改的电子邮件。如果您通过 Bitbucket 或 Github 等进行拉取请求，您将是您登录的任何人。

# google-chrome-devtools - Chrome 开发者工具实时编辑按钮被移除了？

> ID：11579313
> 
> 赞同：2
> 
> 时间：2012-07-20T12:23:25.387
> 
> 标签：google-chrome-devtools, web-inspector

[此页面](http://odetocode.com/blogs/scott/archive/2012/03/13/debugging-javascript-with-chrome.aspx)在 Chrome 开发人员工具中提到了“实时编辑按钮”。它看起来像一支带有省略号字符的铅笔。我想我以前看过几次，但现在找不到了。
它是否对某些脚本被禁用/隐藏，也许？还是从 Chrome 的稳定版本中删除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T16:45:37.790

在 chrome 的最后一个版本中，实时编辑模式成为唯一的模式。这就是按钮被删除的原因。

# git - git pull 导致“似乎不是 git 存储库”

> ID：11579315
> 
> 赞同：0
> 
> 时间：2012-07-20T12:23:29.227
> 
> 标签：git, azure, github

我正在尝试将[Windows Azure SDK](https://github.com/WindowsAzure/azure-sdk-for-net)的内容抓取到我的本地磁盘。现在，每当我尝试以下任一操作时，我都创建了一个文件夹，`cd`d ， run `git init`：

```
git pull WindowsAzure 
```

或者

```
git pull WindowsAzure/azure-sdk-for-net 
```

或者

```
git pull azure-sdk-for-net 
```

我总是会收到一条错误消息说`[X] does not appear to be a git repository`。

我做错了什么，如何将该项目的内容拉到我的本地仓库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T12:29:11.427

Git 还无法识别名称“WindowsAzure”，因为 git 可以使用 github 上的存储库以外的存储库。您需要先给它一个存储库的 URL。

跑：

```
git clone https://github.com/WindowsAzure/azure-sdk-for-net.git 
```

# java - 在应用程序类错误中保存数据

> ID：11579320
> 
> 赞同：2
> 
> 时间：2012-07-20T12:23:44.950
> 
> 标签：java, android

我试图将我的自定义对象列表放在应用程序类中，以便在多个活动中访问我的数据。但是有些东西不起作用，我不知道出了什么问题。

这就是我正在做的事情：

```
AssetManager assetManager = getAssets();
InputStream inputStream = null;
try {
    inputStream = assetManager.open("myJsonFile.json");
} catch (IOException e) {
    Log.e("tag", e.getMessage());
}
ObjectMapper objectMapper = new ObjectMapper();
try {

     List<JJsonResponse> jsonResponse = objectMapper.readValue(inputStream, new TypeReference<List<JJsonResponse>>() { });
     Log.i("tijdlog","einde parsing" );
     final  List<JJsonResponse> myGlobalVariable = jsonResponse;
      ((ApplicationController)getApplication()).setGlobalVariable(myGlobalVariable); 
```

其中 JJsonResponse 是一些自定义对象。没有最后一部分，一切正常。

我的 ApplicationController 类：

```
 public class ApplicationController extends Application {

    private List<JJsonResponse> venueController;

    public List<JJsonResponse> getGlobalVariable() {
        return venueController;
    }

    public void setGlobalVariable(List<JJsonResponse> globalVariable) {
        this.venueController = globalVariable;    
    }

    @Override
    public void onCreate() {

    }
} 
```

运行程序时崩溃。错误日志：

```
07-20 14:06:09.487: W/dalvikvm(6668): threadid=1: thread exiting with uncaught exception (group=0x400259f8)
07-20 14:06:09.497: E/AndroidRuntime(6668): FATAL EXCEPTION: main
07-20 14:06:09.497: E/AndroidRuntime(6668): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.jacksonrecipes.testapp/com.jacksonrecipes.testapp.Main}: java.lang.ClassCastException: android.app.Application
07-20 14:06:09.497: E/AndroidRuntime(6668):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2787)
07-20 14:06:09.497: E/AndroidRuntime(6668):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2803)
07-20 14:06:09.497: E/AndroidRuntime(6668):     at android.app.ActivityThread.access$2300(ActivityThread.java:135)
07-20 14:06:09.497: E/AndroidRuntime(6668):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2136)
07-20 14:06:09.497: E/AndroidRuntime(6668):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-20 14:06:09.497: E/AndroidRuntime(6668):     at android.os.Looper.loop(Looper.java:144)
07-20 14:06:09.497: E/AndroidRuntime(6668):     at android.app.ActivityThread.main(ActivityThread.java:4937)
07-20 14:06:09.497: E/AndroidRuntime(6668):     at java.lang.reflect.Method.invokeNative(Native Method)
07-20 14:06:09.497: E/AndroidRuntime(6668):     at java.lang.reflect.Method.invoke(Method.java:521)
07-20 14:06:09.497: E/AndroidRuntime(6668):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
07-20 14:06:09.497: E/AndroidRuntime(6668):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
07-20 14:06:09.497: E/AndroidRuntime(6668):     at dalvik.system.NativeStart.main(Native Method)
07-20 14:06:09.497: E/AndroidRuntime(6668): Caused by: java.lang.ClassCastException: android.app.Application
07-20 14:06:09.497: E/AndroidRuntime(6668):     at com.jacksonrecipes.testapp.Main.onCreate(Main.java:52)
07-20 14:06:09.497: E/AndroidRuntime(6668):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1069)
07-20 14:06:09.497: E/AndroidRuntime(6668):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2751) 
```

我将变量设为final，因为我认为它可能与此有关，但这不起作用。有谁知道未捕获的异常可能是什么以及如何解决我的问题？

编辑：忘记显示我的清单，我不知道这是否正确，所以我添加了它：

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".Main"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
<application 
    android:label="@string/app_name" 
    android:name=".ApplicationController" 
    /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T12:27:14.067

`Manifest.xml`你应该在你的 Android 项目中定义你的应用程序的名称，`ApplicationController`如下所示：

```
<application
    android:name=".ApplicationController"
...... 
```

**编辑**您在清单中提供了两个应用程序。从此更改您的清单：

```
<application
   android:icon="@drawable/ic_launcher"
   android:label="@string/app_name" >
<activity
    android:name=".Main"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
</application>
<application 
   android:label="@string/app_name" 
   android:name=".ApplicationController" 
/> 
```

对此：

```
<application
   android:icon="@drawable/ic_launcher"
   android:label="@string/app_name"
   android:name=".ApplicationController"  >
<activity
    android:name=".Main"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
</application> 
```

我想你会没事的

# c# - VS2010 中的 Crystal Reports XI - POID 出现问题并显示多个表的信息

> ID：11579326
> 
> 赞同：0
> 
> 时间：2012-07-20T12:23:49.507
> 
> 标签：c#, visual-studio-2010, crystal-reports, report

我的 Crystal Report XI for VS2010 中有 3 个表格，场景如下：

用 POID 链接在一起的 3 个表。

*   表格1
    *   数据：城市、日期、工厂名称、POID（例如 1001）
    *   每个 POID 有一个记录
*   表 2
    *   数据：阴影名称（例如蓝色）、数量（例如 123）、POID（例如 1001）
    *   每个 POID 有一个或多个记录
*   表3
    *   数据：样式编号（例如 123）、买方的采购订单编号（例如 123）、POID（例如 1001）
    *   每个 POID 有一个或多个记录

表 2 和表 3 是独立的，它们的 POID 仅依赖于表 1。当表 2 和表 3 中 POID 的记录数不同时，问题就开始了。

在将表3添加到报表之前，我将报表分组在表1 POID上，并将表2记录信息放在报表的Details部分。但是，现在我已经插入了表 3 记录，表 2 和表 3 记录不断重复。

例如：对于 POID = 1001，有 1 条表 1 记录、3 条表 2 记录和 2 条表 3 记录。因此，报告的结果是每条表 2 记录重复两次，每条表 3 记录重复三次。

我不希望他们重蹈覆辙。我希望它们像在数据库中一样显示。

我已经使用 POID 组使用了 C#、VS2010 和 SQLExpress2008 的所有表数据。

我希望这很清楚，您可以提供帮助。提前致谢。

注意：我为这个问题做了很多研究，最后，在这里问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:41:46.540

首先，我认为您误解了对此类数据库的查询的外观。如果您将联接设置为以下内容，它实际上会准确地为您提供数据库查询在视图中返回的内容，`SELECT * FROM TABLE1 CROSS JOIN TABLE2 ON TABLE1.POID = TABLE2.POID CROSS JOIN TABLE3 ON TABLE2.POID = TABLE3.POID`这意味着：如果有一个 TABLE1 记录、三个 TABLE2 记录和两个 Table3 记录，您将选择 TABLE1记录 6 次，每个 TABLE2 记录 2 次，共 6 次，每个 TABLE3 记录 3 次，共 6 次。所以，真的，你返回了 6 行，但报告中的所有内容都是 FUBAR，因为你是如何布局的。对 TABLE1 记录进行分组可能是您所做的唯一“正确”的事情。

我认为在不创建其他数据库对象的情况下解决此问题的最简单方法是子报表。希望这是有道理的，如果你愿意，我可以拼凑一张图片，但你想做的是：

1.  在您的主报表中，使用您的主数据库对象作为数据源，在 TABLE1 上进行分组，并在组页眉或页脚（您的选择）中添加两个附加部分，并完全隐藏详细信息部分。
2.  在您添加到分组的第一个小节中，添加一个仅使用 TABLE2 作为数据源的子报表，不使用分组并将您的 TABLE2 信息放在详细信息部分。如果您认为有必要，将附加页眉和摘要信息添加到报表页眉和页脚。
3.  在您添加到分组的第二个小节中，添加一个仅使用 TABLE3 作为数据源的子报表，不使用分组并将您的 TABLE3 信息放在详细信息部分。如果您认为有必要，将附加页眉和摘要信息添加到报表页眉和页脚。
4.  将任何其他信息添加到所需的页脚。

本质上它应该看起来像：

*   主报告 - 报告标题
*   主报告 - 页眉
*   主报告 - 第 1 组标题
    *   第 1 组标题 - A 部分 - 表 1 记录信息
    *   组 1 标题 - B 部分 - 子报表 1
        *   子报表 1 - 报表标题
        *   子报告 1 - 详细信息 - 表 2 记录信息
        *   子报表 1 - 报表页脚
    *   组 1 标题 - C 部分 - 子报表 2
        *   子报表 2 - 报表标题
        *   子报告 2 - 详细信息 - 表 3 记录信息
        *   子报表 2 - 报表页脚
*   主报告 - 详细信息（已隐藏）
*   主报告 - 第 1 组页脚
*   主报告 - 报告页脚
*   主报告 - 页脚

这将为每个 TABLE1 记录生成一个带有 TABLE1 标题的报告，然后是其 TABLE2 和 TABLE3 信息，而不会重复它们并使您发疯。

这是否有意义或有帮助？

# selenium - Selenium webdriver vs Sahi

> ID：11579332
> 
> 赞同：2
> 
> 时间：2012-07-20T12:24:05.250
> 
> 标签：selenium, ui-testing, sahi

对于这个问题，我参考了一些关于堆栈溢出的[博客](http://blog.sahi.co.in/2010_04_01_archive.html)和早期[帖子](https://stackoverflow.com/questions/606550/watir-vs-selenium-vs-sahi)。但这些比较与早期版本的 selenium(1.0) 有关。因为当前版本的 selenium(webdriver) 非常丰富并且还支持跨浏览器和其他功能（甚至 Watir-WebDriver 使用 selenium）.. 任何人都可以提供一些关于 sahi 与当前版本的 selenium webdriver 的基本比较分析.. 任何建议将不胜感激.. 谢谢..

# wpf - 快速过滤listBox项目wpf？

> ID：11579333
> 
> 赞同：0
> 
> 时间：2012-07-20T12:24:08.077
> 
> 标签：wpf

我有一个列表框，其中每个类至少有 1000 个项目说“数据”，它有一个“名称”属性。我在列表框上方还有一个文本框，用于根据您的输入文本过滤列表框中的项目。如何快速查找列表框中的项目。

我尝试做这样的事情：在 textBox_textChanged 事件中，我获取文本，并使用 CollectionViewSource 类过滤掉项目，但这会导致用户界面非常生涩。（我通过在我的 Data 类上获取 Name 属性并执行 string.Contains() 调用来过滤掉项目）

有没有加快搜索速度的方法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:52:28.173

我使用 LINQ 过滤数千个响应时间。

FTSwordFilter 是过滤器。当它被改变时，我在过滤列表上调用 NotifgyPropertyChanged。

```
return FTSwords.Where(ftsWrd => ftsWrd.StemStartsWith(FTSwordFilter));

public Boolean StemStartsWith(string stemStart)
    {
        return (WordStem).StartsWith(stemStart);
    } 
```

只需将 StartsWith 替换为 Contains

我还有一个使用 DamerauLevenshteinDistance 进行模糊过滤的选项

我是在后台任务上做的，但它足够快，我把它移到了前台。

我添加了 2/10 秒的延迟以允许输入多个字符。

# php - PHP - 使用 JAXL 登录 Facebook 聊天时出现问题

> ID：11579348
> 
> 赞同：0
> 
> 时间：2012-07-20T12:24:43.350
> 
> 标签：php, facebook, xmpp

我尝试使用新的 JAXL 3.0 连接到 Facebook 的聊天。他们的示例中有一个名为“echo_facebook_client.php”的示例：

```
<?php
/**
 * Jaxl (Jabber XMPP Library)
 *
 * Copyright (c) 2009-2012, Abhinav Singh <me@abhinavsingh.com>.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 * * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *
 * * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in
 * the documentation and/or other materials provided with the
 * distribution.
 *
 * * Neither the name of Abhinav Singh nor the names of his
 * contributors may be used to endorse or promote products derived
 * from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
 * FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 * COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
 * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRIC
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
 * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 *
 */

if($argc != 4) {
    echo "Usage: $argv[0] fb_user_id_or_username fb_app_key fb_access_token\n";
    exit;
}

//
// initialize JAXL object with initial config
//
require_once 'jaxl.php';
$client = new JAXL(array(
    // (required) credentials
    'jid' => $argv[1].'@chat.facebook.com',
    'fb_app_key' => $argv[2],
    'fb_access_token' => $argv[3],

    // (required) force facebook oauth
    'auth_type' => 'X-FACEBOOK-PLATFORM',

    // (optional)
    //'resource' => 'resource'
));

//
// add necessary event callbacks here
//

$client->add_cb('on_auth_success', function() {
    global $client;
    _debug("got on_auth_success cb, jid ".$client->full_jid->to_string());
    $client->set_status("available!", "dnd", 10);
});

$client->add_cb('on_auth_failure', function($reason) {
    global $client;
    $client->send_end_stream();
    _debug("got on_auth_failure cb with reason $reason");
});

$client->add_cb('on_chat_message', function($stanza) {
    global $client;

    // echo back incoming message stanza
    $stanza->to = $stanza->from;
    $stanza->from = $client->full_jid->to_string();
    $client->send($stanza);
});

$client->add_cb('on_disconnect', function() {
    _debug("got on_disconnect cb");
});

//
// finally start configured xmpp stream
//
$client->start();
echo "done\n";

?> 
```

我将 jid 值更改为我尝试与之聊天的 facebook 帐户的用户 ID，将 fb_app_key 更改为我的应用程序的应用程序 ID，将 fb_access_token 更改为我在请求 xmpp_login 权限时获得的访问令牌。

但是，当我运行脚本时，它一直告诉我“得到了 on_auth_failure cb，原因未授权”

但是什么不授权，为什么不授权，我有xmpp权限。

然后我在他们的文档页面上尝试了 Facebook 的示例代码，用于聊天 api，您可以在这里找到 developer.facebook.com/docs/chat/。

我给了它相同的凭据，它在第一次尝试时就能够登录，所以错误必须在 jaxl 端的某个地方。

我对 XMPP 协议一无所知，因此使用 JAXL 而不是像在 facebook 示例中那样自己编写我需要的函数会非常方便。

有人对为什么 JAXL 代码不运行有任何建议吗？上次更新是 8 天前，所以理论上它应该可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:24:05.187

您只需要`'force_tls' => true`作为 JAXL 构造函数配置选项传递。根据[https://developers.facebook.com/docs/chat/#jabber](https://developers.facebook.com/docs/chat/#jabber) tls 协商已强制执行 x-facebook-platform 身份验证。

来自 jaxl 组/论坛[https://groups.google.com/forum/?hl=en_US&fromgroups#!topic/jaxl/Z7z32lMqG44](https://groups.google.com/forum/?hl=en_US&fromgroups#!topic/jaxl/Z7z32lMqG44)的相关线程讨论了这个用例。

# ios - UIimageView 图像数组从一个图像淡入到下一个错误

> ID：11579354
> 
> 赞同：1
> 
> 时间：2012-07-20T12:25:00.790
> 
> 标签：ios, uiimageview, core-animation, nstimer, nsrunloop

嗨，我有一些最有效的代码。它基本上以淡入淡出的效果对数组中的图像数量进行动画处理。

基本上这一切都很好，但是我有一个**小错误**，当视图第一次加载**仅**在数组中的第一个图像时，它似乎旋转 90 度到正确的位置，然后淡入相同的图像，但是看到这样的动画很烦人。所有从图像到另一个图像的褪色都是完美的，只是上面提到的错误。如前所述，**只是在第一次加载时**。

这是代码。`images`is an `MutableArray`and both `topImageView`and `bottomImageView`both is an **ivars** and **综合**。`images`数组也是如此。

```
int topIndex = 0, bottomIndex = 1;
-(void)imageFader{

self.imageViewBottom = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 370)];
[self.view addSubview:imageViewBottom];
[imageViewBottom setAlpha:0.0];
[imageViewBottom release];

self.imageViewTop = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 370)];
[self.view addSubview:imageViewTop];
[imageViewTop setAlpha:1.0];
[imageViewTop release];

    [imageViewTop setImage:[images objectAtIndex:topIndex]];

    timer = [NSTimer timerWithTimeInterval:1.0 
                                             target:self 
                                           selector:@selector(onTimer) 
                                           userInfo:nil 
                                            repeats:YES];

    [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode];
    [timer fire];

}

-(void)onTimer{

[UIView animateWithDuration:1 animations:^{

            //set the image of the image that is not currently visible

    if (imageViewTop.alpha == 0) {
        [imageViewTop setImage:[images objectAtIndex:topIndex]];

    }
    if (imageViewBottom.alpha == 0) {
        [imageViewBottom setImage:[images objectAtIndex:bottomIndex]];

    }

    //make sure the images rotate
    [imageViewTop setAlpha:imageViewTop.alpha == 0 ? 1 : 0];
    [imageViewBottom setAlpha:imageViewBottom.alpha == 0 ? 1 : 0];

    //make sure the images play in a loop

    topIndex = topIndex < [images count]-1 ? bottomIndex+1 : 0;
    bottomIndex = bottomIndex < [images count]-1 ? bottomIndex+1 : 0;}];

} 
```

这是图像在加载到`MutableArray`动画之前如何保存到 docs 目录的方法。

```
 -(void) imagePickerController:(UIImagePickerController *) picker didFinishPickingMediaWithInfo:(NSDictionary *)info

{

    if (picker.sourceType == UIImagePickerControllerSourceTypeCamera) {

        UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"]; 
        NSMutableDictionary *metadata = [[NSMutableDictionary alloc] init];

        ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

        //Save to camera roll       
        [library writeImageToSavedPhotosAlbum:[image CGImage] orientation:(ALAssetOrientation) ALAssetOrientationRight completionBlock:^(NSURL *assetURL, NSError *error) { NSLog(@"completionBlock");

        }];

        int imageNumber = 0;
        NSFileManager *fileManager = [NSFileManager defaultManager];
        NSString *pathToFile;
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];

        do
        {
            // increment the image
            imageNumber++;

            // get the new path to the file
            pathToFile = [documentsDirectory stringByAppendingPathComponent:
                          [NSString stringWithFormat:
                           @"standingImage%d.JPG", imageNumber]];
        }
        while([fileManager fileExistsAtPath:pathToFile]);
        /* so, we loop for as long as we keep coming up with names that already exist */

        UIImage *image2 = image; // imageView is my image from camera

        //Use UIImageJPEGRepresentation to maitain image orientation!
        NSData *imageData = UIImageJPEGRepresentation(image2, 0.9);
        [imageData writeToFile:pathToFile atomically:NO];

        [self dismissModalViewControllerAnimated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:39:29.137

这种意外的方向可能是由图像的来源 - UIImagePickerController 引起的。尝试访问您在评论中提到的 JPEG 文件并检查它们的方向，然后您至少可以缩小问题的潜在原因。

# sql - sql查询逻辑

> ID：11579355
> 
> 赞同：1
> 
> 时间：2012-07-20T12:25:11.910
> 
> 标签：sql, oracle, logic, lag, analytical

我有以下数据集

> ```
>  a      b      c
>       `1`     2      3
>        3      6      9  
>        9      2      11 
> ```

如您所见，a 列的第一个值是固定的（即 1），但从第二行开始，它会获取上一条记录的 c 列的值。

b 列的值是随机的，c 列的值计算为 c = a + b

我需要编写一个 sql 查询，它将以上述格式选择此数据。我尝试使用滞后函数编写但无法实现。

请帮忙。

**编辑：** 列`b`仅存在于表中，`a and c`需要根据 的值计算`b`。

哈努曼

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T12:37:38.150

```
SQL> select a
  2       , b
  3       , c
  4    from dual
  5   model
  6         dimension by (0 i)
  7         measures (0 a, 0 b, 0 c)
  8         rules iterate (5)
  9         ( a[iteration_number] = nvl(c[iteration_number-1],1)
 10         , b[iteration_number] = ceil(dbms_random.value(0,10))
 11         , c[iteration_number] = a[iteration_number] + b[iteration_number]
 12         )
 13   order by i
 14  /

         A          B          C
---------- ---------- ----------
         1          4          5
         5          8         13
        13          8         21
        21          2         23
        23         10         33

5 rows selected. 
```

问候，
罗布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T12:32:55.870

在不知道行之间的关系的情况下，我们如何计算前一行列`a and b`与当前行的总和`a column`。我`column id and parent`在表中创建了另外两个来查找两行之间的关系。

`parent`是告诉我们关于 的列`previous row`，并且`id`是`primary key`行的。

```
create table test1 (a number ,b number ,c number ,id number ,parent number);

Insert into TEST1 (A, B, C, ID) Values (1, 2, 3, 1);
Insert into TEST1 (B, PARENT, ID) Values (6, 1, 2);
Insert into TEST1 (B, PARENT, ID) Values (4, 2, 3);

  WITH recursive (a, b, c,rn) AS
    (SELECT a,b,c,id rn
       FROM test1 
      WHERE parent IS NULL
    UNION ALL
     SELECT  (rec.a+ rec.b) a
             ,t1.b b
             ,(rec.a+ rec.b+t1.b) c
             ,t1.id rn
      FROM recursive rec,test1 t1
      WHERE t1.parent = rec.rn
    )
     SELECT a,b,c
      FROM recursive; 
```

![输出](../Images/0dfe742ddcab4cdc1af2a504b888691b.png)

1.  `WITH keyword`定义`recursive`要遵循的子查询的名称

    WITH 递归 (a, b, c,rn) AS

2.  接下来是命名子查询的第一部分

    `SELECT a,b,c,id rn FROM test1 WHERE parent IS NULL`

命名子查询是`UNION ALL`两个查询之一。这是第一个查询，定义了递归的起点。在我的 CONNECT BY 查询中，我想知道记录的开头是什么。

接下来是最令人困惑的部分：

```
SELECT  (rec.a+ rec.b) a
             ,t1.b b
             ,(rec.a+ rec.b+t1.b) c
             ,t1.id rn
  FROM recursive rec,test1 t1
  WHERE t1.parent = rec.rn 
```

这是它的工作原理：

*   WITH查询： 1.父查询执行：

    `SELECT a,b,c FROM recursive;`

    *   这会触发命名子查询的执行。2 子查询联合中的第一个查询执行，给我们一个种子行，开始递归：

    `SELECT a,b,c,id rn FROM test1 WHERE parent IS NULL`

在这种情况下，种子行将用于 id =1 且 parent 为 null。让我们从这里开始将种子行称为“新结果”，在我们尚未完成处理它们的意义上是新的。

*   子查询联合中的第二个查询执行：

    `SELECT (rec.a+ rec.b) a ,t1.b b ,(rec.a+ rec.b+t1.b) c ,t1.id rn FROM recursive rec,test1 t1 WHERE t1.parent = rec.rn`

# c# - 将 tinyint 转换为字符串

> ID：11579357
> 
> 赞同：0
> 
> 时间：2012-07-20T12:25:16.220
> 
> 标签：c#, wpf

列类型是 tinyint，我需要转换为字符串，我`Converter`用于 xaml

```
Text="{Binding confirmed,Converter={StaticResource UserConverter}}" 
```

所以

```
class UserConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            if (value != null)
            {
                var listOfInt = value as UInt32[];
                return ""+listOfInt+"";
            }
            return "";
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return DependencyProperty.UnsetValue;
        }
    } 
```

但它错了，请帮我写代码:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:29:48.960

你遇到了什么错误？

A`tinyInt`应该映射到 a `byte`，而不是 a `UInt32[]`。

如果您的结果是 tinyInt 的数组，请尝试转换为`byte[]`

# java - PHP密码学代码解释

> ID：11579365
> 
> 赞同：-1
> 
> 时间：2012-07-20T12:25:56.747
> 
> 标签：java, php, apache, cryptography, shiro

```
 public static function getEncryptedData($value){
       if(!$value){return false;}
       $text = $value;
       $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_ECB);
       $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
       $crypttext = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, _PR_ACCOUNT_ACTIVATION_SECURE_KEY_, $text, MCRYPT_MODE_ECB, $iv);
       return trim(base64_encode($crypttext)); //encode for cookie
    } 
```

我在PHP中遇到了上面的代码。
我需要了解：
1\. 它在做什么？
2\. 如何在 Java 中使用 Apache Shiro 做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:40:48.867

```
/*Sets the function with the ability to be called globally without instantiating the object. Take one value into method through classname::getEncryptedData($value)*/
public static function getEncryptedData($value){
   /*Checks to see  if value is populated and an erroneous value hasn't been passed in such as null returns false if it has*/
   if(!$value){return false;}
/* instantiated a local variable called text and populate it with the value $value*/
   $text = $value;
 /*as per the docs http://php.net/manual/en/function.mcrypt-get-iv-size.php gets the size of the iv and sets it in the var $iv_size*/
   $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_ECB);
/*Creates an initialization vector as per http://uk3.php.net/manual/en/function.mcrypt-create-iv.php*/
   $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
/*Encrypt the data $text(from $value passed it) and store it in $crypttext */
   $crypttext = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, _PR_ACCOUNT_ACTIVATION_SECURE_KEY_, $text, MCRYPT_MODE_ECB, $iv);
/*return a base64 encoded string with the whitespace trimmed from front and back*/
   return trim(base64_encode($crypttext)); //encode for cookie
} 
```

至于如何在java中做到这一点我不知道:-(

# facebook - Facebook FQL：需要来自流表的大 src url（附件 - 媒体）

> ID：11579366
> 
> 赞同：0
> 
> 时间：2012-07-20T12:25:56.403
> 
> 标签：facebook, image, stream, attachment

通过 FQL 流表通过带有附件属性的 fql 返回新闻源。附件包含媒体信息，并且在媒体中有一个包含照片 url 的 src 属性。我需要将那些照片网址更改为大图片网址..

[{ 附件：{ 媒体：[{ src：...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:02:17.917

如果媒体 src 是在 facebook 上上传的图像，那么您可以将 src 的文件名以 '_s.jpg' 结尾的文件名更改为 '_n.jpg'，它将显示上传到 facebook 的原始图像，即更大的图像图片。

您可以通过 src - 中 url 的开头来识别这些已上传到 facebook 的图像 `https://fbcdn`。无法更改外部图像以获得更大的图像。这些可以通过 url 的开头来识别 -`https://fbexternal`

希望这是有道理的！

# c - Goertzel算法在C中的实现

> ID：11579367
> 
> 赞同：14
> 
> 时间：2012-07-20T12:26:04.453
> 
> 标签：c, embedded, signal-processing, goertzel-algorithm

我正在 DSP 处理器上实现 BFSK 跳频通信系统。一些论坛成员建议使用 Goertzel 算法对特定频率的跳频进行解调。我尝试在 C 中实现 goertzel 算法。代码如下：

```
float goertzel(int numSamples,int TARGET_FREQUENCY,int SAMPLING_RATE, float* data)
{
    int     k,i;
    float   floatnumSamples;
    float   omega,sine,cosine,coeff,q0,q1,q2,result,real,imag;

    floatnumSamples = (float) numSamples;
    k = (int) (0.5 + ((floatnumSamples * TARGET_FREQUENCY) / SAMPLING_RATE));
    omega = (2.0 * M_PI * k) / floatnumSamples;
    sine = sin(omega);
    cosine = cos(omega);
    coeff = 2.0 * cosine;
    q0=0;
    q1=0;
    q2=0;

    for(i=0; i<numSamples; i++)
    {
        q0 = coeff * q1 - q2 + data[i];
        q2 = q1;
        q1 = q0;
    }
    real = (q1 - q2 * cosine);
    imag = (q2 * sine);
    result = sqrtf(real*real + imag*imag);
    return result;
} 
```

当我使用该函数计算给定数据集的特定频率的结果时，我没有得到正确的结果。但是，如果我使用相同的数据集并使用 MATLAB goertzel() 函数计算 goertzel 结果，那么我会得到完美的结果。在网上找到的一些在线教程的帮助下，我使用 C 实现了算法。如果该函数正确实现了 goertzel 算法，我只想了解你们的看法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-20T14:20:34.840

如果您说 Matlab 实现很好，因为它的结果与数据的 DFT 或 FFT 频率的结果相匹配，那么这可能是因为 Matlab 实现通过比例因子对结果进行归一化，就像 FFT 所做的那样。

更改您的代码以考虑到这一点，看看它是否会改善您的结果。请注意，为了清楚起见，我还更改了函数和结果名称以反映您的 goertzel 正在计算幅度，而不是完整的复杂结果：

```
float goertzel_mag(int numSamples,int TARGET_FREQUENCY,int SAMPLING_RATE, float* data)
{
    int     k,i;
    float   floatnumSamples;
    float   omega,sine,cosine,coeff,q0,q1,q2,magnitude,real,imag;

    float   scalingFactor = numSamples / 2.0;

    floatnumSamples = (float) numSamples;
    k = (int) (0.5 + ((floatnumSamples * TARGET_FREQUENCY) / SAMPLING_RATE));
    omega = (2.0 * M_PI * k) / floatnumSamples;
    sine = sin(omega);
    cosine = cos(omega);
    coeff = 2.0 * cosine;
    q0=0;
    q1=0;
    q2=0;

    for(i=0; i<numSamples; i++)
    {
        q0 = coeff * q1 - q2 + data[i];
        q2 = q1;
        q1 = q0;
    }

    // calculate the real and imaginary results
    // scaling appropriately
    real = (q1 - q2 * cosine) / scalingFactor;
    imag = (q2 * sine) / scalingFactor;

    magnitude = sqrtf(real*real + imag*imag);
    return magnitude;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T20:14:14.300

通常，您可以在计算中使用幅度的平方，例如用于音调检测。

Goertzel 的一些优秀示例在 Asterisk PBX DSP 代码 [Asterisk DSP 代码 (dsp.c)](http://www.asterisk.org/) 和 spandsp 库[SPANDSP DSP 库中](http://www.soft-switch.org/downloads/spandsp/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-31T11:11:45.737

考虑两个输入样本波形：

1) 幅度为 A 频率为 W 的正弦波

2）具有相同幅度和频率的余弦波A和W

Goertzel 算法应该对两个提到的输入波形产生相同的结果，但提供的代码会产生不同的返回值。我认为代码应该修改如下：

```
float goertzel_mag(int numSamples,int TARGET_FREQUENCY,int SAMPLING_RATE, float* data)
{
    int     k,i;
    float   floatnumSamples;
    float   omega,sine,cosine,coeff,q0,q1,q2,magnitude,real,imag;

    float   scalingFactor = numSamples / 2.0;

    floatnumSamples = (float) numSamples;
    k = (int) (0.5 + ((floatnumSamples * TARGET_FREQUENCY) / SAMPLING_RATE));
    omega = (2.0 * M_PI * k) / floatnumSamples;
    sine = sin(omega);
    cosine = cos(omega);
    coeff = 2.0 * cosine;
    q0=0;
    q1=0;
    q2=0;

    for(i=0; i<numSamples; i++)
    {
        q2 = q1;
        q1 = q0;
        q0 = coeff * q1 - q2 + data[i];
    }

    // calculate the real and imaginary results
    // scaling appropriately
    real = (q0 - q1 * cosine) / scalingFactor;
    imag = (-q1 * sine) / scalingFactor;

    magnitude = sqrtf(real*real + imag*imag);
    return magnitude;
} 
```

# c# - 如何在 C# 中删除多个数组的零数量的随机行？

> ID：11579369
> 
> 赞同：-2
> 
> 时间：2012-07-20T12:26:11.833
> 
> 标签：c#

如何在 C# 中删除多个数组的零数量（全部为字符串类型）的随机行？请打码！:))

例如：索引代码、颜色、数量、RetailPrice、WholeSalePrice

```
0 1002, red, 0, 150, 100
1 1003, blue, 0, 160, 100
2 1004, yellow, 3, 180, 130
3 1004, green, 6, 140, 103
4 1008, pink, 8, 200, 140
5 1008, black, 0, 200, 140
6 1008, white, 0, 200, 140
7 1008, blue, 0, 200, 140
8 1008, purple, 4, 200, 140
9 1009, light blue, 2, 280, 210
10 1000, stripe, 4, 170, 115
11 1003, white, 2, 230, 175
12  1009, white, 2, 230, 175
13  1001, white, 0, 230, 175
14  1000, black, 0, 230, 175 
```

结果：索引代码、颜色、数量、零售价格、批发价格

```
1 1004, yellow, 3, 180, 130
2 1004, green, 6, 140, 103
3 1008, pink, 8, 200, 140
4 1008, purple, 4, 200, 140
5 1009, light blue, 2, 280, 210
6 1000, stripe, 4, 170, 115
7 1003, white, 2, 230, 175
8 1009, white, 2, 230, 175 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:34:34.043

您可以尝试以下方法：

1.  创建一个列表来存储剩余的数组。
2.  遍历你的数组

    foreach (数组中的项目) { if ( item[2] != "0" ) remaining.Add(item); }

3.  返回列表（如果需要，作为数组）

    返回剩余的.ToArray();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:36:28.630

可能派上用场的技术：

*   索引您的数组，例如`var quantity = array[2]`
*   过滤你的清单
    *   林克，有人吗？
    *   for循环，复制到一个新的`List<string[]>`
    *   `yield result`发电机

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T12:36:33.180

您不能真正从数组中“删除”项目（数组具有固定大小）。

但是，您可以创建一个空的`List<string[]>`，遍历您的数组，并且仅在其计数不是时才将项目添加到列表中`0`。

有很多方法可以做到这一点。您可以使用`for`-/ `foreach`-loop 或使用[Linq（单击此处了解介绍）来完成](http://msdn.microsoft.com/en-us/library/bb397906.aspx)。`.ToArray()`在 Linq 查询的末尾（或在 a 上）使用`List`会为您提供一个数组。

我不会发布任何代码：P

# api - 使用 JSF 并应与 Mojarra 或 MyFaces 一起使用的库的 Maven 依赖项

> ID：11579372
> 
> 赞同：4
> 
> 时间：2012-07-20T12:26:30.040
> 
> 标签：api, jsf, maven, dependencies

我们有一个库，其中包含对 JSF 提供的功能的少量补充（例如额外的 ResourceHandlers）。

由于它使用 JSF 类（来自`javax.faces.*`包），它自然必须依赖 JSF API。该库被打包为一个 Maven 项目，并且依赖于`com.sun.faces:jsf-api`.

这适用于编译，也适用于使用 Mojarra 的项目。但是，如果我们在使用 MyFaces 的 JSF 应用程序中包含该库，则会出现错误，如[Exception: could not find Factory: javax.faces.context.FacesContextFactory](https://stackoverflow.com/questions/5259145/exception-could-not-find-factory-javax-faces-context-facescontextfactory)中所述。

显然，如果一个应用程序使用 MyFaces，它必须使用 myfaces-api.jar 和 myfaces-impl.jar（或相应的 Maven deps），[而*不是*jsf-api.jar 或 jsf-impl.jar](http://myfaces.apache.org/gettingstarted.html)。

这让我有点困惑。

*   为什么 Mojarra 和 MyFaces 使用不同的 API jar？两者都实现了相同的 API (JSF)，所以他们不应该使用相同的 API jars 吗？
*   我认为拥有单独的“api”和“impl”罐子的全部意义在于只有“impl”部分必须切换以使用不同的实现。我是不是误会了什么？
*   更具体地说：对于只应依赖 JSF API 的库，正确的 Maven 依赖项是什么？现在，我们依赖jsf-api，使用MyFaces的项目必须使用`<exclusions>`丢弃jsf-api并包含myfaces-api。这行得通，但肯定有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T08:36:08.980

由于某些分发/许可问题，他们可能使用不同的 API jar。我不知道确切。但是 API 是一样的，你的 FacesContextFactory 也可以在 myfaces-api jar 中找到。

我会尝试创建定义相应依赖项的配置文件（甚至两个单独的模块）。使用配置文件，您需要手动激活其中一个来切换依赖项。使用模块，两者都将被构建，但是会出现将源代码放在哪里的问题，但是可以将依赖项设置为编译，因此创建可交付成果会更容易。

可能值得在这里查看 Gradle - 我总是遇到需要采用不同依赖项集的项目的问题，并且我在那里看到了一些不错的功能。

抱歉，我也没有为这个设置找到好的解决方案。

编辑：同时思考：您可以在 SCM 中创建两个分支并合并它们之间的更改？（当然除了依赖项）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T22:17:22.087

> 为什么 Mojarra 和 MyFaces 使用不同的 API jar？两者都实现了相同的 API (JSF)，所以他们不应该使用相同的 API jars 吗？

它们是 JSF 的独立实现。JSF 是一个规范。看到[这个问题](https://stackoverflow.com/questions/4530746/mojarra-or-myfaces-jsf2-0-starter)。

> 更具体地说：对于只应依赖 JSF API 的库，正确的 Maven 依赖项是什么？现在，我们依赖jsf-api，使用MyFaces的项目必须使用丢弃jsf-api并包含myfaces-api。这行得通，但肯定有更好的方法吗？

您所说的“JSF API”是它的 Sun/Oracle 实现（Mojarra）。这些的依赖项是：

```
<dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1.2</version>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.2</version>
        </dependency> 
```

# flash - flash html 文本选项卡

> ID：11579374
> 
> 赞同：0
> 
> 时间：2012-07-20T12:26:36.610
> 
> 标签：flash, textfield, htmltext

我正在使用 textField 并为其分配 html 文本。文本中有一些`<tab>`标签，但并非在所有地方都有效。

有没有其他标签，我们可以用它来代替

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:30:54.717

您是否尝试过仅`\t`代替 HTML 标记？

# java - 在Java中，删除操作是正确的，但是catch也会被执行

> ID：11579389
> 
> 赞同：1
> 
> 时间：2012-07-20T12:27:35.060
> 
> 标签：java, swing, jdbc, jcombobox

我的概念是我必须在第一个组合框中选择一个项目。它会根据选择将一些项目添加到第二个组合框中。一旦选择了第二个组合框，然后检索一些访问表数据。

最后，当我单击 时`Delete`，必须根据两个组合框中的项目删除记录。

我正确删除了记录。但是，我的问题是，我每次都会收到一个错误对话框（我在 catch 中使用过）

> 未产生结果集

尽管删除正确发生，但命令提示符中的错误。我想知道，里面发生了什么。请帮我诊断。

```
try
{

  Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
  Connection conn=DriverManager.getConnection("jdbc:odbc:vasantham","","");
  Statement st=conn.createStatement();
  ResultSet rs=st.executeQuery("delete from try where tname='"+scb+"' and   Purpose='"+scp+"'");

  JOptionPane.showMessageDialog(null,"Your entry has been DELETED successfully!!!");

}
catch(Exception e)
{
  JOptionPane.showMessageDialog(null,"Error!Try again!");
  System.out.println(e);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T12:37:30.490

您正在使用[`st.executeQuery`](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html#executeQuery%28java.lang.String%29)which 必须与选择一起使用，因为只有选择会创建一个 ResultSet。您正在使用 UPDATE 查询，因此不会产生`ResultSet`错误。

在您的情况下，您需要使用[`executeUpdate`](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29)

```
int result = st.executeUpdate(...) 
```

结果将包含您删除（更新）的行数。

# javascript - 使用自制的 html 表单注册/登录网站

> ID：11579392
> 
> 赞同：0
> 
> 时间：2012-07-20T12:27:50.630
> 
> 标签：javascript, html

关于我之前的[问题](https://stackoverflow.com/questions/11577111/using-a-form-values-to-create-an-account-on-another-website)，我认为这不是一个好问题，尽管我得到了一些回应。我仍在努力解决这个问题，我在网上阅读了很多页面，但没有一个能帮助你完整。我想要发生的是我制作了一个表格，如下所示：

```
<form id="login" name= "myForm" method="post" action="" onsubmit="return validateForm()">
    <fieldset id="inputs">
        <input name="uname" id="username" type="text" placeholder="Username" >   
        <input name="pass" id="password" type="password" placeholder="Password" >
    </fieldset>
    <fieldset id="actions">
        <input type="submit" value="submit" onClick="Login(this.form);">
    </fieldset> 
```

我想要发生的是，当用户访问此页面时，该人可以通过输入所需的信息来创建一个新帐户（注册），在这种情况下，这只是一个用户 ID 和密码。并假设他正在注册 google 或 yahoo o 另一个主机。我该怎么做，使用给定的信息。如果有人能告诉我如何使用相同的信息（用户 ID 和密码）登录网站（帐户已经存在），那也很好，因为这样我就可以自己继续了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:37:47.543

除非您通知用户您正在这样做，否则您所做的在技术上是非法的，由于涉及的安全问题，在 JS/HTML 中这样做也是不好的做法。（将纯文本密码发送到其他窗口/框架）如果您出于正当理由这样做，我建议您使用 Java 或 C# 之类的语言来构建一个 Web 服务，您可以将用户名和散列密码传递给

从这一点开始，您可以使用调用官方 API 来合法且安全地执行此操作。这也将允许您非常轻松地检查用户是否有效等。

尽管您可能出于正当理由这样做，但它是大多数网络钓鱼诈骗的基础，所以我怀疑有人会给您 JS 中的示例代码。

除此之外，由于 Google/Yahoo/Hotmail 等网站都有 CAPTCHA，因此您将无法通过 JS 实现此目的。

# asp.net-mvc - 如何测试从控制器操作返回的 PartialViewResult 的对象模型？

> ID：11579397
> 
> 赞同：0
> 
> 时间：2012-07-20T12:27:52.803
> 
> 标签：asp.net-mvc, unit-testing, moq, ienumerable, asp.net-mvc-partialview

我想为以下控制器操作编写单元测试：

```
public ActionResult ProductList(int category)
{
    IEnumerable<Product> productList = repository.Products.Where(p => p.CategoryId == category);
    return PartialView("ProductList", productList);
} 
```

这是我的观点：

```
@model IEnumerable<POS.Domain.Entities.Product>

@foreach (var p in Model)
{
    Html.RenderPartial("_ProductSummary", p);
} 
```

我要测试的是，给定 int 值`category`，该`ProductList`操作返回 a`PartialView`中的适当值`productList`。我不确定如何测试`IEnumerable<Product> productList`.

到目前为止，这是我的单元测试：

```
[TestMethod]
public void ProductListReturnsAppropriateProducts()
{
    // Arrange
    // - create the mock repository
    Mock<IProductRepository> mock = new Mock<IProductRepository>();
    mock.Setup(m => m.Products).Returns(new Product[] {
    new Product {ProductId = 1, Name = "P1", CategoryId = 1},
    new Product {ProductId = 2, Name = "P2", CategoryId = 2},
    new Product {ProductId = 3, Name = "P3", CategoryId = 1},
    new Product {ProductId = 4, Name = "P4", CategoryId = 2},
    new Product {ProductId = 5, Name = "P5", CategoryId = 3}
    }.AsQueryable());

    // Arrange - create a controller
    ProductController controller = new ProductController(mock.Object);

    // Action
    IEnumerable<Product> result1 = (IEnumerable<Product>)controller.ProductList(1);
    //IEnumerable<Product> result2 = (IEnumerable<Product>)controller.ProductList(2); ???

    // Assert
    Assert.AreEqual(result1, 2);
    // Assert.AreEqual(result2, 2); ???
} 
```

我得到 a 是`System.InvalidCastException`因为我试图将 a 投射`PartialViewResult`到`IEnumerable`- 这就是我被卡住的地方。 **如何针对`productList`控制器中的 IEnumerable 进行测试？**

另外，不测试部分视图是否正确生成是不好的做法吗？（我假设如果`productList`值是正确的，局部视图将被适当地呈现）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:47:51.313

我找到了一个似乎涵盖了我需要它的解决方案：

```
/// <summary>
/// Tests that the returned PartialViewResult contains the appropriate products for the selected category
/// First checks that the number of products is correct
/// Then checks that the number of products selected by a specific name is correct, to ensure that the Action did not
/// return products from different categories with the same Product.Name
///</summary>
[TestMethod]
public void ProductListReturnsAppropriateProducts()
{
    // Arrange
    // - create the mock repository
    Mock<IProductRepository> mock = new Mock<IProductRepository>();
    mock.Setup(m => m.Products).Returns(new Product[] {
        new Product {ProductId = 1, Name = "P1", CategoryId = 1},
        new Product {ProductId = 2, Name = "P2", CategoryId = 2},
        new Product {ProductId = 3, Name = "P3", CategoryId = 1},
        new Product {ProductId = 4, Name = "P4", CategoryId = 2},
        new Product {ProductId = 5, Name = "P4", CategoryId = 3}
    }.AsQueryable());

    // Arrange - create a controller
    ProductController controller = new ProductController(mock.Object);

    // Action
    PartialViewResult result = (PartialViewResult) controller.ProductList(2);

    // Assert
    Assert.AreEqual(((IEnumerable<Product>)result.ViewData.Model).Count(), 2);
    Assert.IsTrue(((IEnumerable<Product>)result.ViewData.Model).Count(o => o.Name == "P4") == 1);
} 
```

我将有几个 PartialViewResult 值 - 但我开始遇到同时测试多个控制器操作结果的问题。

# asp.net-mvc-3 - 缺少使用 MVC3 设置 Web API 的参考

> ID：11579400
> 
> 赞同：0
> 
> 时间：2012-07-20T12:27:58.170
> 
> 标签：asp.net-mvc-3, asp.net-web-api, appfabric

我正在尝试按照[这些说明](http://wcf.codeplex.com/wikipage?title=Getting%20started%3a%20Building%20a%20simple%20web%20api)使用 ASP.NET Web API 和 MVC 3 进行构建，但在步骤 4 中遇到问题，添加此行：

```
routes.Add(new ServiceRoute("api/contacts", new HttpServiceHostFactory(), typeof(ContactsApi))); 
```

问题似乎在`HttpServiceHostFactory`; 我没有正确的参考。相关的命名空间是`Microsoft.ApplicationServer`，我在我的机器上根本找不到。我已经安装了 AppFabric 无济于事。知道在哪里可以找到它，为什么它没有与 Web API 一起安装？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:47:44.670

呵呵。找到了答案 - 抓住了错误的 NuGet 包。在搜索包时，“WebApi.All”从未显示，其他两个 webApi 包都显示。使用包管理器控制台并输入`Install-Package WebApi.All -Version 0.6.0`. 呜呜……没关系。

# xml - solrj xml 输出到文件中

> ID：11579402
> 
> 赞同：1
> 
> 时间：2012-07-20T12:28:01.307
> 
> 标签：xml, solr, solrj

我在 TomCat-Servlet 上设置了 Solr 服务器。在我的索引中，大约有 610.000 个包含多个字段的文档。我的 schema.xml：

```
<field name="ID" type="myText" indexed="true" stored="true" required="true" />
<field name="text" type="myText" indexed="true" stored="false" multiValued="true" />
<dynamicField name="AT*" type="text_general" indexed="true" stored="true" multiValued="true" /> 
```

为了使用给定的字符串（可能来自另一个系统）搜索索引，我创建了一个小 JavaProgram

```
class SolrjTest
{
public static void main(String[] args) throws IOException
{
SolrjTest solrj = new SolrjTest();
solrj.query(args[0]);
}
public void query(String q) throws IOException
{
CommonsHttpSolrServer server = null;
String uuid = null;
boolean flag = true;
while(flag==true)
{   
uuid = UUID.randomUUID().toString();
File f = new File("E:/dw-solr/tomcat-solr/bin/solr/data/SearchResult/"+uuid+".txt");
if(!f.exists()){
flag = false;
}
}
try
{
server = new CommonsHttpSolrServer("http://localhost:8080/solr");
}
catch(Exception e)
{
e.printStackTrace();
}
SolrQuery query = new SolrQuery();
query.setQuery(q);
FileWriter fw = new FileWriter("E:/dw-solr/tomcat-solr/bin/solr/data/SearchResult/"+uuid+".txt");
try
{
QueryResponse qr = server.query(query);
SolrDocumentList sdl = qr.getResults();

Object[] o = new Object[sdl.size()];
o = sdl.toArray();
for (int i = 0; i < o.length; i++) {
System.out.println(o[i].toString());
fw.write(o[i].toString() + "\n");
}
fw.flush();
fw.close();
System.out.println("finished");
}
catch (SolrServerException e)
{
e.printStackTrace();
}
} 
```

结果保存在文件中。问题是，数据的格式真的很奇怪。看起来像：

“SolrDocument[{ID=0000000, AT_anyName=[anyValue, multiValue, justMoreValue], AT_anyName2=[Normal,Normal, Normal], AT_mightbeanothername=[couldbealoooooooooooooooooongvalue, andanotherone, andanotherone]muchMoreStuff...大约 20 - 可能因 ID 不同而不同}]"

我想要的是这个数据的清晰的 XML 格式。所以我将它保存为 XML 文件并将其发送回另一个系统。问题是，方法 SolrDocumentList sdl = qr.getResults(); 返回如上所示的结果。正如我之前发布的那样，我有动态字段，所以事情变得非常复杂（至少对我来说：-/）。有什么解决方案，如何将格式更改为简单、清晰的 XML 格式？

非常感谢您的帮助。

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:53:23.527

[Response Writers](http://lucidworks.lucidimagination.com/display/solr/Response+Writers)用于生成不同格式的搜索响应。默认情况下，它返回 XML 响应。通过发送 HTTP 请求，您可以获得 xml 格式的响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-10T18:50:39.053

有一种方法可以从 solrj 回复中获得清晰的 XML 格式，只需使用 solrj 方法。[相关方法是来自http://lucene.apache.org/solr/5_0_0/solr-solrj/org/apache/solr/client/solrj/](http://lucene.apache.org/solr/5_0_0/solr-solrj/org/apache/solr/client/solrj/util/ClientUtils.html)的 toXML（获取字符串）或 writeXML（写入文件）方法[util/ClientUtils.html](http://lucene.apache.org/solr/5_0_0/solr-solrj/org/apache/solr/client/solrj/util/ClientUtils.html)

例如，要打印您可以执行的 XML：

```
 QueryResponse qr = solrclient.query(query);
    SolrDocumentList results = qr.getResults();

    for (int i = 0; i < results.size(); i++) {
        String xml = ClientUtils.toXML(ClientUtils.toSolrInputDocument(results.get(i)));
        System.out.println(xml);
    } 
```

# vb.net - VB.net 字典的值是由值还是引用返回？

> ID：11579407
> 
> 赞同：1
> 
> 时间：2012-07-20T12:28:23.660
> 
> 标签：vb.net, dictionary, reference, key

如果我有一本字典并且我得到一个项目，它是返回值还是引用？

```
myDictionary.Add(myKey, myDictionaryObj)
Dim obj as myObject = myDictionary.Item(myKey) 
```

obj 是否与 myDictionaryObj 具有相同的值，还是有它的引用？

它取决于初始对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:36:40.783

你会得到，你在字典里输入了什么。

如果字典的类型是引用类型（例如类），您将获得对该对象的引用，因为只有引用存储在字典中。

如果字典的类型是值类型（例如结构），您将获得对象的副本，因为完整的值存储在字典中。

# c# - mono_field_set_value 不起作用

> ID：11579417
> 
> 赞同：3
> 
> 时间：2012-07-20T12:28:52.410
> 
> 标签：c#, c, mono, interop

我正在尝试将单声道嵌入到我正在编写的应用程序中，但 mono_field_set_value 的行为不像我认为的那样。这是一个例子：

单测.c：

```
#include <mono/jit/jit.h>
#include <mono/metadata/assembly.h>
#include <mono/metadata/debug-helpers.h>
#include <stdio.h>

#define TRUE 1

int main(){
        MonoDomain *domain;
        MonoAssembly *assembly;
        MonoImage *image;
        MonoClass *klass;
        MonoObject *object;
        MonoClassField *field;
        MonoMethodDesc *desc;
        MonoMethod *method;
        int val;

        domain = mono_jit_init ("Domain");
        assembly = mono_domain_assembly_open (domain, "T.DLL");;
        image = mono_assembly_get_image(assembly);
        klass = mono_class_from_name(image, "", "T");
        mono_class_init (klass);
        object = mono_object_new (domain, klass);

        val=11;
        field = mono_class_get_field_from_name(klass,"i");
        mono_field_set_value(object,field,&val);
        //mono_field_set_value((MonoObject*)((void*)object-8),field,&val);                                                                                                                                                                                                                                                     

        printf("val = %d\n", val);

        desc = mono_method_desc_new (":Write()",TRUE);
        method = mono_method_desc_search_in_class (desc, klass);
        mono_runtime_invoke(method,object,NULL,NULL);

        return 0;
} 
```

T.cs

```
public struct T
{

  public int i;
  public void Write()
  {

    System.Console.WriteLine(i);
  }
} 
```

运行时，我期望输出：

```
val = 11
11 
```

但第二个数字（由单声道运行时打印）是随机的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T15:08:31.120

mono_runtime_invoke() 的参数不正确，它需要是未装箱的指针，因为类型 T 是一个结构。从[http://docs.go-mono.com/index.aspx?link=xhtml%3Adeploy%2Fmono-api-methods.html](http://docs.go-mono.com/index.aspx?link=xhtml%3Adeploy%2Fmono-api-methods.html)的文档：

> obj 是“this”指针，对于静态方法，它应该是 NULL，对于对象实例，它应该是 MonoObject*，对于值类型，它应该是指向值类型的指针。

# php - symfony fosuserbundle 自定义登录

> ID：11579419
> 
> 赞同：2
> 
> 时间：2012-07-20T12:28:56.830
> 
> 标签：php, symfony, fosuserbundle

我正在考虑在我的下一个项目中使用 symfony2 而不是平面 php。然而，我有点担心一些事情。其中之一是这对我来说是否是一个巨大的挑战：

我必须建立一个系统来访问后端部分以创建用户帐户。

每个客户都有一个用户帐户，可以像他们的管理员一样工作。然后，在他们的控制面板中，他们可以在公司内创建用户，并为他们设置登录名和密码。当然，我不会限制每家公司只使用其他人没有使用过的用户名，因此必须有一个选择器用于公司，一个用于主登录屏幕上的用户名，alt。他们将登录一条路线，例如 site.com/company/。

我不知道从哪里开始，也不知道创建起来会有多复杂。我已经对 symfony2 进行了一些测试，主要部分（数据库和模板）似乎正是我所需要的。

一种方法可能是使用用户组，并从我的后端设置 grouops=companies，并让公司只将用户添加到他们的组中？

还会有访问权限等。在平面 PHP 中，我只是通过访问表来控制它，`user-contentpiece`但也许 symfony 提供了一种更流畅的方式......

对我有什么启发性的评论吗？fosUserBundle 是一个不错的选择还是我应该从头开始构建？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T12:47:23.127

我想这不是 symfony2 问题或 FOSUserBundle 问题。
您可以利用 FOSUserBundle 功能并进行一些额外的控制（通过覆盖或扩展现有方法），例如在更新或删除用户之前，该经过身份验证的用户是否属于将被更新/删除的用户所在的同一公司？
此外，您可以通过添加一个额外的字段来修改 FOSUserBundle 的用户实体，该字段将是带有公司 ID 的外部键，并使这个加上用户 ID 成为用户实体的新主键。

所以，如果你可以“学习”一点 Symfony 和 FOSUserBundle，那绝对是一个不错的选择，但是从头开始构建它（如果你只需要那个功能）同样是一个不错的选择和练习

# cocoa - Carbon kUtilityWindowClass 的等效 Cocoa 窗口级别是多少？

> ID：11579420
> 
> 赞同：1
> 
> 时间：2012-07-20T12:28:57.947
> 
> 标签：cocoa, nswindow, macos-carbon

我正在开发一个可可应用程序，它可以创建普通的可可窗口和用碳窗口初始化的可可窗口。所有窗口都应该浮动在所有应用程序之上。对于可可窗，我将窗位设置为 NSTornOffMenuWindowLevel，对于碳窗，我使用 kUtilityWindowClass。两者都工作正常，窗口浮动在其他应用程序之上，但问题是碳窗和可可窗没有相同的窗口高度，因此碳窗将始终浮动在可可窗的顶部。有没有办法让两种窗口类型具有相同的窗口级别而不会丢失浮动在其他应用程序之上？我想因为 kUtilityWindowClass 似乎是唯一可以在碳中浮动其他应用程序的窗口类，我正在寻找它在可可中的等价物......感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:52:58.360

如果您查看 NSWindow.h，您会看到 Cocoa 窗口级别是根据 Core Graphics 窗口级别定义的，例如，`NSFloatingWindowLevel`定义为`kCGFloatingWindowLevel`. 如果您查看这些窗口级别在 CGWindowLevel.h 中定义的位置，其中一个选项是`kCGUtilityWindowLevel`. 那将是我的猜测，相当于`kUtilityWindowClass`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:06:32.207

具体我不知道，你可以试试。我会尝试`NSModalPanelWindowLevel`（上面的一个 `NSTornOffMenuWindowLevel`）、`NSMainMenuWindowLevel`、`NSStatusWindowLevel`和`NSPopUpMenuWindowLevel`，它们是从相对较低到最高的其他可用级别。

# java - 在eclipse中从android调用纯java代码（单独的项目）时出错

> ID：11579425
> 
> 赞同：1
> 
> 时间：2012-07-20T12:29:06.980
> 
> 标签：java, android, eclipse

我有这个简单的java代码：

```
package com.androiddesktoptest.testtest;

public class AndroidDesktopTestMain
{
    public static void main(String[] args)
    {
        callFromAndroid();
    }

    public static void callFromAndroid()
    {
        System.out.println("DESKTOP CODE CALLED FROM ANDROID");
    }
} 
```

我想像这样从Android调用它：

```
import com.androiddesktoptest.testtest.AndroidDesktopTestMain;

public void onCreate(Bundle savedInstanceState)
{
    //...
    AndroidDesktopTestMain.callFromAndroid();
} 
```

我得到`java.lang.NoClassDefFoundError`

我正在使用 Eclipse，我的项目 AndroidDesktopTest 已检查导出 AndroidDesktopTest/src。此外，eclipse 在 Android 中自动完成我的代码，因此它可以在桌面项目中正确地看到我的代码。

我做错了什么？我在以前的以前以前的项目中做过这样的事情，从这个时候开始，也许 ADT 已经改变了或者什么......

*** 更新 *** 整个错误 `07-20 14:02:56.452: E/AndroidRuntime(30233): java.lang.NoClassDefFoundError: com.androiddesktoptest.testtest.AndroidDesktopTestMain`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:31:19.710

Order & Export 并不是 Android ADT 最完善的功能。

如果您将桌面项目中的链接 src 文件夹包含到您的 Android 项目中（右键单击项目 > 构建路径 > 链接源文件夹），那么该类将被使用，就好像它属于 Android 项目一样。

我认为这样做的首选方法是创建一个 jar 文件或一个库项目，但在您拥有稳定的桌面代码之前，这些可能太麻烦而无法尝试。

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T12:47:58.863

当你运行你的安卓系统时，听起来你没有把课程转到手机上。

确保：

右键项目-属性-java构建路径-排序和导出（这里检查了吗？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:34:38.400

[这篇](http://geekswithblogs.net/cyberycon/archive/2011/05/17/using-external-libraries-with-android.aspx)关于将 Java 库包含到 Android 项目中的文章建议在链接的 Java 项目的构建路径对话框中将“JRE 系统库”替换为您的 API 级别的 android.jar。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-20T12:41:37.150

试试这个

```
new AndroidDesktopTestMain.callFromAndroid(); 
```

从静态方法调用非静态方法的唯一方法是拥有一个包含非静态方法的类的实例。根据定义，非静态方法是在某个类的实例上调用的方法，而静态方法属于类本身。

# coffeescript - 将 CoffeeScript 文件编译成一个 js 文件

> ID：11579426
> 
> 赞同：4
> 
> 时间：2012-07-20T12:29:07.980
> 
> 标签：coffeescript, playframework-2.0

我想知道是否有可能使用 2.0.2（或trunk）将我的所有`assets/*.coffee`文件编译成一个定义的（比如 app.js 和 app.min.js）文件，从而**不**使用本机编译器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-24T15:03:01.160

由于 scala coffeescript 进程目前似乎支持的唯一选项是“bare”（[http://www.playframework.com/documentation/2.0.2/AssetsCoffeeScript#options](http://www.playframework.com/documentation/2.0.2/AssetsCoffeeScript#options)），你可能必须有一个进程包装你的咖啡脚本，然后将它们放在适当的文件中。您可以将 grunt 用于该任务。和插件 grunt-contrib-coffee 来处理文件

```
coffee:
  compile:
    files:
      'app/assets/app.js': [
        'file1.coffee'
        'file2.coffee'
      ] 
```

将按顺序编译这些 src 文件并将编译后的文件放在 app/assets/app.js 中，该文件应该被 play 拾取。

grunt-contrib-coffee：[https ://github.com/gruntjs/grunt-contrib-coffee](https://github.com/gruntjs/grunt-contrib-coffee)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T17:55:01.480

您不能只编写构建脚本或使用[cakefile](http://coffeescript.org/documentation/docs/cake.html)吗？类似这样的东西：

```
fs = require 'fs'
{exec} require 'child_process'

fs.readdir 'path/to/coffee/', (err, files) ->
    concat_result = ''
    concat_file = 'path/to/concat_file.coffee'
    for file in files
        concat_result += fs.readFileSync file, 'utf8'

    concat_file = fs.writeFile concat_file, concat_result
    exec "whatever_compiler -c -o path/to/outfile #{concat_file}", (err, stdout, stderr) ->
        #handle errs 
```

# powershell - Powershell Start-Process 创建新变量

> ID：11579433
> 
> 赞同：1
> 
> 时间：2012-07-20T12:29:39.057
> 
> 标签：powershell

我正在尝试使用 Start-Process 命令来调用另一个 powershell 会话。但我想让这个新的 powershell 的窗口大小变小，所以我试图传递以下参数

```
$arguments[0] +=  "New-Variable -Name host1 -Value (Get-Host)"
$arguments[1] +=  "$aff = $host1.UI.RawUI"
$arguments[2] +=  "$wff = $aff.WindowSize"
$arguments[3] +=  "$wff.Width = 10"
$arguments[4] +=  "$wff.Height = 10"
$arguments[5] +=  "$aff.WindowSize = $wff" 
```

但它似乎不起作用。

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:01:09.403

为什么不直接隐藏新的 PowerShell？

```
Start-Process powershell -WindowStyle Hidden ... 
```

此外，PowerShell 变量不会从一个 PowerShell 会话转移到另一个衍生的会话。如果您需要这种行为，请将您的信息存储在环境变量中，例如：

```
$env:Width = '10'
$env:Height = '10' 
```

# c# - 如何在我的框架中安装新程序集？

> ID：11579438
> 
> 赞同：0
> 
> 时间：2012-07-20T12:29:52.737
> 
> 标签：c#, windows, visual-studio-2010, .net-assembly

逐步搜索方法如何在我的工具箱中安装SourceGrid 2.0，该工具箱可在网上获得。我正在使用 Visual Studio C# (2010) 提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:42:06.620

*   在 Visual Studio 中打开工具箱窗口。
*   右键单击工具箱并选择`Add Tab`
*   给新组一个有意义的名字
*   右键单击进入组并选择`Choose items...`
*   点击右下角的按钮`Browse...`
*   选择包含 UserControl 或 Component 的程序集
*   单击 FileOpenDialog 的打开按钮
*   单击“选择工具箱项目”对话框的确定​​按钮

您的新项目显示在工具箱中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:42:48.350

*   转到[http://sourcegrid.codeplex.com/releases/view/91226](http://sourcegrid.codeplex.com/releases/view/91226)

*   点击 SourceGrid_4_40_bin

*   下载 SourceGrid_4_40_bin.zip\SourceGrid_4_40_bin\SourceGrid\Release

*   将其解压缩到 \SourceGrid_4_40_bin\SourceGrid\Release 包含的文件夹中

*   然后按照此说明如何添加参考 [http://larsjacob.wordpress.com/2010/06/15/use-a-dll-library-in-visual-studio-2010/](http://larsjacob.wordpress.com/2010/06/15/use-a-dll-library-in-visual-studio-2010/)

# knockout.js - 具有计算值返回的淘汰赛总是“未定义”

> ID：11579439
> 
> 赞同：1
> 
> 时间：2012-07-20T12:29:59.133
> 
> 标签：knockout.js

我使用这段代码：

```
function Sample() {
    var self = this;
    self.category = ko.observable();
    self.categoryName = ko.computed(function () {
        var category = self.category();
        console.log(category);
        return category;
    }
}

var s = new Sample();
s.category = 0; 
```

如果我在 span 中绑定类别属性，例如：

```
<span data-bind="text: categoryName"></span> 
```

span 为 void，console.log 为类别返回“未定义”

怎么了 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:38:41.347

可观察对象是函数，因此当您设置可观察对象的值时，您需要将该值作为第一个参数传递。

所以，当你设置时`category`，你会这样做：

`s.category(0);`

# vim - ignorecase 搞乱 OS X Lion 中 vim 的视觉模式？

> ID：11579441
> 
> 赞同：0
> 
> 时间：2012-07-20T12:29:59.803
> 
> 标签：vim, osx-lion

我在 OS X Lion 中看到一些看起来像 vim 中的错误的行为。如果我设置了`ignorecase`，那么视觉模式（`v`在命令/正常模式下）会自动将光标移回行首。如果我`ignorecase`再次取消设置，视觉模式将正常工作。

当我在具有较旧 vim (7.0.162) 的 Solarix 机器上尝试完全相同`.vimrc`的操作时，一切正常。

当 MacVim (vim 7.3.390) 在终端中运行（通过符号链接`vim`到`mvim`）以及作为 Cocoa 应用程序运行时，我看到了问题。当我运行 OS X （`/usr/bin/vim`，版本 7.3）中包含的 vim 时，我也看到了问题。试图在[已知的 vim 问题列表中](http://vimdoc.sourceforge.net/htmldoc/todo.html)查找某些内容，但在那里找不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:29:05.733

事实证明，问题根本不在于 vim，而在于插件 bisect.com。当我放弃它时，一切正常。

# objective-c - 从具有 JSON 对象的 NSDictionary 打印标签文本

> ID：11579454
> 
> 赞同：1
> 
> 时间：2012-07-20T12:31:11.337
> 
> 标签：objective-c, ios, xcode, json, uilabel

我的 json 文件看起来像这样

```
[{"id":"1","category":"New Category1","title":"New Product2","description":"Please type a description1","imgurl":"http:\/\/s.wordpress.org\/about\/images\/wordpress-logo-notext-bg.png","spectitle":"Specification","specvalue":"Value"},{"id":"2","category":"Mobile","title":"Samsung","description":"Please type a description","imgurl":"http:\/\/s.wordpress.org\/about\/images\/wordpress-logo-notext-bg.png","spectitle":"Price","specvalue":"100$"}] 
```

我有 4 个标签，必须在各个标签中打印 id、类别、标题、描述。我已经成功解析了整个 json 对象并打印在一个标签中。我需要将所有具有相应类别的 json 对象显示到相应的标签。

```
NSString *labelstring =[NSString stringWithFormat:@"%@",[json objectAtIndex:0]];
label1.text=[NSString stringwithformat: objectForKey:@"id"]; 
 label2.text=[NSString stringwithformat:objectForKey:@"category"];
 label3.text=[NSString stringwithformat:objectForKey:@"title"];  
 label4.text=[NSString stringwithformat:objectForKey:@"description"]; 
```

这里 json 是 NSArray 的一个变量，具有 URL 信息和那些东西......但如果我试图获得个人价值，我无法得到它......请指导......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-01-20T06:43:06.753

```
(void)viewDidLoad
{
    [super viewDidLoad];

    NSMutableURLRequest *request=[NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://advantixcrm.com/prj/mitech/index.php/api/appconfig/Mg"]];

    [request setHTTPMethod:@"GET"];

    [request setValue:@"application/json;charset=UTF-8" forHTTPHeaderField:@"content-type"];

    NSError *err;
    NSURLResponse *response;
    NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err];

    NSDictionary *jsonArray = [NSJSONSerialization JSONObjectWithData:responseData options: NSJSONReadingMutableContainers error: &err];

    NSArray *array=[jsonArray objectForKey:@"info"];

    for (int i=0; i<[array count]; i++) {
        _label.text = [[array objectAtIndex:i]objectForKey:@"restaurant_location"]);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T12:35:39.033

你在展示你的真实代码吗？`[NSString stringwithformat:objectForKey:@"id"];`是无效的语法。你没有收到任何错误吗？

正确的代码：

```
// ??? NSString *labelstring = [NSString stringWithFormat:@"%@",[json objectAtIndex:0]];
NSDictionary *dict = [json objectAtIndex:0];
label1.text = [dict valueForKey:@"id"]; 
label2.text = [dict valueForKey:@"category"];
label3.text = [dict valueForKey:@"title"];  
label4.text = [dict valueForKey:@"description"]; 
```

* * *

**编辑：**我不知道你是否以正确的方式解析你的 JSON，所以这里也是：

```
NSData *jsonData = ...
NSArray *json = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingAllowFragments error:nil]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T12:35:48.560

如果您想以这种方式使用 json，则需要将其解码为 an`NSDictionary`然后您可以在后半部分尝试使用它：

```
label1.text = [NSString stringwithFormat:@"%@", [json objectForKey:@"id"]]; 
```

或者，如果您只需要`"id"`json 中标签下的文本，您可以执行以下操作：

```
label1.text = [json objectForKey:@"id"]; 
```

# facebook - 来自 wordpress 博客在 facebook 中共享的奇怪字符

> ID：11579457
> 
> 赞同：1
> 
> 时间：2012-07-20T12:31:25.893
> 
> 标签：facebook, wordpress, encoding, character-encoding, sharing

我有一个 wordpress 博客，每次我在 facebook 上分享一个页面，例如[http://atthepigsty.chunterings.com/2012/07/18/to-wait-or-to-trust/](http://atthepigsty.chunterings.com/2012/07/18/to-wait-or-to-trust/)我都会在文本中得到奇怪的字符。

我已经有了 utf-8 元标记，这是解决此类问题的正常建议。

有谁知道如何解决这个问题？

钽碳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:34:38.233

您的页面上没有任何 Open Graph 元标记，因此您只能听从 Facebook 从您的网站上抓取的内容。出于某种原因，FB 正在将您的逗号翻译成那些愚蠢的字符。

在 Facebook 调试器中查看您的网页的结果： [https ://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fatthepigsty.chunterings.com%2F2012%2F07%2F18% 2F等待或信任%2F](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fatthepigsty.chunterings.com%2F2012%2F07%2F18%2Fto-wait-or-to-trust%2F)

解决此问题的最简单方法是添加一个插件来为您添加这些打开的图形标签。我个人喜欢[Yoast 的 Wordpress SEO](http://wordpress.org/extend/plugins/wordpress-seo/)。官方的[Facebook 插件](http://wordpress.org/extend/plugins/facebook/)也有承诺。我将它用于它的一些其他功能，但我在我的主题中添加了代码`functions.php`以删除它的 Open Graph 标签，因为我更喜欢 WP SEO 输出的内容。

还有很多其他插件可以添加这些标签。您需要小心：由于插件功能蠕变，我曾多次使用过多的 OG 标签。每次升级后通过调试器运行您的站点，否则您将不知道发生了什么。

# cloud - 父子关系中的 SalesForce 安全问题

> ID：11579463
> 
> 赞同：0
> 
> 时间：2012-07-20T12:31:50.333
> 
> 标签：cloud, salesforce

我是销售人员框架工作的新手。但我之前一直非常活跃于 Web 开发。我在字段级别、对象级别和记录级别也做了很多练习。但我无法弄清楚如何应对这种情况。

我有一个对象酒店（复数个酒店），并且我查找了指向“与用户相关”的经理的字段。所以经理是我创建的用户。“allan”和“steve”分别是酒店“hotel-abc”和“hotel-xyz”的经理。当他们中的任何一个登录时，他们都可以看到两家酒店的记录。

但我想要的是当艾伦登录时，他应该看到“hotel-abc”记录，反之亦然。我知道现场控制杆和对象控制杆安全性在这里不适用，但记录控制杆也不适合我。因为它特定于某些硬代码条件！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:57:31.930

我假设您将酒店的共享设置设置为私人。这将从本质上隔离所有者和所有者选择与其共享记录的人的可见性。根据您的描述，我还假设“allan”和“steve”是驱动记录级别安全性的记录的所有者。

但是，如果您从自定义编码和 apex 代码查询的上下文中查看这一点，那么您将需要确保您的类被标记为“共享”，这将确保当前用户安全上下文应用于所有查询。否则，您可能会看到所有内容，因为该类可能在系统上下文中运行。

即 **当前用户上下文：**共享 SomeClass{} 的公共类

**系统上下文：**公共类不共享 SomeClass{}

# iphone - 如何获取用户的设备令牌以进行推送通知

> ID：11579464
> 
> 赞同：0
> 
> 时间：2012-07-20T12:31:52.593
> 
> 标签：iphone, ios, ipad, push-notification

我正在使用推送通知来通知用户。我已经在真机上测试成功。现在我尝试将它集成到我的应用程序中。我想知道如何获取用户的设备令牌。

我想我可以通过 http 或 ftp 将设备令牌发送到我的服务器并将它们存储在数据库中。服务器负责向所有提供令牌的设备推送通知。这是完成这项工作的正确方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:34:12.703

您可以使用以下代码打印设备令牌：

```
- (void)application:(UIApplication *)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken { 

    NSString *str = [NSString stringWithFormat:@"Device Token=%@",deviceToken];
    NSLog(str); 
} 
```

更多信息：[点击这里：Tutorial_Programming Apple Push Notification Services](http://mobiforge.com/developing/story/programming-apple-push-notification-services)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:41:56.397

是的，您需要在服务器端处理它以及`badge`您在应用程序图标旁边看到的数字。您可以使用`PHP`每次用户启动应用程序时接收令牌的文件（或您熟悉的任何文件），然后在 db.xml 中将徽章图标设置为 0。对于您发送的每个新通知，您将该字段增加 +1。希望这对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-31T07:17:11.467

如果您仍然没有获得设备令牌，请尝试输入以下代码，以便为您的设备注册推送通知。

它也适用于 ios8 或更高版本。

如果 __IPHONE_OS_VERSION_MAX_ALLOWED >= 80000

if ([UIApplication respondsToSelector:@selector(registerUserNotificationSettings:)]) { UIUserNotificationSettings *settings = [UIUserNotificationSettings settingsForTypes:UIUserNotificationTypeBadge|UIUserNotificationTypeAlert|UIUserNotificationTypeSound categories:nil]; [[UIApplication sharedApplication] registerUserNotificationSettings:settings]; [[UIApplication sharedApplication] registerForRemoteNotifications]; } else { [[UIApplication sharedApplication] registerForRemoteNotificationTypes: UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeSound];

} 别的

[[UIApplication sharedApplication] registerForRemoteNotificationTypes: UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeSound]; 万一

# java - @UniqueConstraint 超过两列

> ID：11579467
> 
> 赞同：0
> 
> 时间：2012-07-20T12:32:00.400
> 
> 标签：java, spring, hibernate, validation, constraints

在我的 Spring/hibernate 项目中，我`uniqueConstraints = {@UniqueConstraint(columnNames={"ID_A", "ID_B"})}`用来验证表中列的唯一组合。当我只有两列时，这很好用。

但是，当我想向`ID_C`约束添加第三列时，它不再起作用。

1.  `@UniqueConstraint`只允许两列吗？
2.  如果是，那么我将如何验证两列以上的唯一组合？

谢谢你的帮助，/D

**编辑：**我所说的“它不再有效”的意思是当我向表中添加新条目时不会引发异常。有两列它会抛出一个`ConstraintViolationException`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:55:55.037

将[UniqueConstraint](http://docs.oracle.com/javaee/6/api/javax/persistence/UniqueConstraint.html)单独添加到实体不会执行任何验证。如链接文档中所述，它提供了用于生成数据库模式的说明：

> 指定将唯一约束包含在为主表或辅助表生成的 DDL 中。

现在你有两个选择：

1.  让 Hibernate 生成数据库模式
2.  像往常一样使用 SQL 删除旧约束并添加新约束。

# blackberry - 如何在黑莓中发送电子邮件？

> ID：11579468
> 
> 赞同：0
> 
> 时间：2012-07-20T12:32:06.810
> 
> 标签：blackberry, blackberry-simulator, blackberry-jde

我正在开发一个应用程序，我需要从我的应用程序发送电子邮件。我想在我的应用程序中单击按钮时发送电子邮件。我执行了黑莓**“blackberrymaildemo”**给出的示例代码，但电子邮件没有从设备发送，也没有收到任何错误或异常。我执行了以下 [Blackberry - 如何使用 RIM API 教程发送电子邮件，](http://mobile-development.org/index.php/blackberry/blackberry-how-to-send-email-using-rim-api-tutorial-code-example)但不知道应用程序启动后代码是如何运行的，因为只有空白屏幕并且不知道如何通过以下代码发送电子邮件。

代码：

```
 package mypackage;

   import net.rim.device.api.ui.component.ButtonField;
   import net.rim.device.api.ui.container.MainScreen;
   import net.rim.blackberry.api.mail.Address;
   import net.rim.blackberry.api.mail.Folder;
   import net.rim.blackberry.api.mail.Message;
   import net.rim.blackberry.api.mail.MessagingException;
   import net.rim.blackberry.api.mail.Session;
   import net.rim.blackberry.api.mail.Store;
   import net.rim.blackberry.api.mail.Transport;

 public final class MyScreen extends MainScreen
 {
/**
 * Creates a new MyScreen object
 */
public MyScreen()
{        
    // Set the displayed title of the screen       
    setTitle("MyTitle");
    ButtonField btn = new ButtonField();
    btn.setLabel("Button Click");
    add(btn);

    try
    {
   Session session=Session.getDefaultInstance();
   Store store=session.getStore();

   Folder[] folders_list =store.list(Folder.SENT);
   Folder folder_sent = folders_list[0];

   Message message=new Message(folder_sent);

   message.setSubject("This is Test message");

    message.setContent("hi! this is test email from BB");

   Address recs[] = new Address[2];
   recs[0] = new Address("xxxxxx@gmail.com", "raghu b");
   recs[1] = new Address("xxxxxx@gmail.com", "b raghu");

   message.addRecipients(Message.RecipientType.TO, recs);

   Transport.send(message);

    }catch (MessagingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

  }
 } 
```

由于我是这个黑莓开发的新手，我无法获得发送电子邮件的代码。谁能帮我解决这个问题。

单击通过**电子邮件共享**按钮时，需要调用电子邮件代码，我的另一个疑问是我们能否将电子邮件或短信从黑莓模拟器发送到另一个黑莓模拟器/设备...？

提前致谢..........

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:37:06.767

试试这个代码 -

```
Address recipients[] = new Address[1]; 
Store store = Session.getDefaultInstance().getStore(); 
Folder[] folders = store.list(Folder.SENT); 
Folder sentfolder = folders[0]; 
Message msg = new Message(sentfolder); 

try 
    { 
        recipients[0]= new Address("Email id","Name"); 
        //add the recipient list to the message 
        msg.addRecipients(Message.RecipientType.TO, recipients); 
        /set a subject for the message 
        msg.setSubject("Test email"); 
        //sets the body of the message 
        msg.setContent("123456789---------------"); 
        //sets priority 
        msg.setPriority(Message.Priority.HIGH); 
        //send the message 
        Transport.send(msg); 
      } 

      catch (Exception me) 
      { 

        System.err.print(me); 
      } 
```

# jquery - 使用类似于嵌入 YouTube 播放器的东西嵌入 JQuery 插件

> ID：11579474
> 
> 赞同：0
> 
> 时间：2012-07-20T12:32:25.627
> 
> 标签：jquery, youtube, embed

我开发了一个自定义的 YouTube 播放器。与那个播放器一起，我实现了一个问答系统，它通过使用 ajax 调用 php 函数将数据保存到我的数据库中。

以下是html代码

```
<div id="player">
</div>

    <div id="commentArea">
    <div class="question ui-corner-all">
        <textarea id="comment" rows="10" cols="50" style="width: 100%"></textarea>
        <div id="btnSave" class="player-button" style="float: right">
            Send</div>
        <div style="clear: both">
        </div>
    </div>
</div> 
```

为此，我必须参考 3 个样式表和 3 个脚本文件。但我希望最终用户轻松嵌入此代码，而不是将内容放在标题中并将上面的 html 代码放在正文中。

他们是否有可能只放置一个嵌入代码，这将带来上面的 html 以及对 js 和 css 文件的引用？如果是这样，最好的方法是什么？

感谢您提前提供任何帮助

最好的问候， 阿米拉

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-20T13:03:30.713

您可以创建一个小 javascript 通过将它们添加到标题中来获取必要的文件。类似于以下内容：

```
<script type="text/javascript" src="..."></script> <!-- jQuery -->
<script type="text/javascript">
  $(document.head).append('<link rel="stylesheet" type="text/css" href="...">');
</script>
... 
```

当然，浏览器支持`<style>`页面上任何位置的标签（因此只需将标签放在页面上即可），但 HTML4 规范不允许这样做。此外，如果 jQuery 已经存在，您可能不想再次加载它，但是您必须延迟代码直到实际加载 jQuery。不知道该怎么做 -也许是`<script>`'s`load`事件？

# iphone - UIView 应该如何获取对其子项的引用？

> ID：11579475
> 
> 赞同：5
> 
> 时间：2012-07-20T12:32:41.923
> 
> 标签：iphone, cocoa-touch, ios5, uiview, children

我有一个带有根视图的 xib，它是 UIView 子类。这个视图应该如何获得对我在 Interface Builder 中声明的子视图的引用？

显然 ViewController 可以与 outlet 连接，但是 UIView 呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-20T12:45:08.997

Outlets 是 UIViewController 对象的属性，它（几乎总是）引用 UIView 对象的实例（或 UIView 的子类）。

UIViewController 有一个 UIView，当加载 UIViewController 时`initWithNibNamed:`，它就是 XIB 文件的内容。您可以在 UIViewController 中设置 outlet，然后通过拖动到列表中的“File's Owner”项或拖动到 Xcode 助手编辑器中的代码，将它们绑定到 XIB 中的各种子视图。

如果您只想使用代码，有几个选项。一种方法是根据其`tag`属性直接访问视图。例如：

```
[myView viewWithTag:42]; 
```

另一种需要考虑的方法是 UIView 有一个名为 的属性`subviews`，它是一个子视图数组。您可以遍历它们并根据需要访问视图。要区分它们，您可以根据情况做几件事。您可以在视图上设置标签，然后使用它们。

```
NSArray *subviews = myView.subviews;

for(UIView *view in subviews){
  if(tag == 42){
    // Do something with that view
  }
} 
```

或者，如果您正在寻找一种特定类型的视图，例如 UISwitch，这样的东西可能在简单的情况下起作用：

```
for(id view in subviews){
  if([view isKindOfClass:NSClassFromString(@"UISwitch")]){
    // Do something with that view, since it's a switch 

  }
} 
```

如果您使用标签，您可以在代码中设置它们，或使用 Interface Builder。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T12:40:47.913

尝试`[view viewWithTag:tagOfChildView];`

# php - php zend 路由变量

> ID：11579477
> 
> 赞同：1
> 
> 时间：2012-07-20T12:32:52.267
> 
> 标签：php, zend-framework, routes

# Zend_Route 代码问题

此代码正在运行。

```
resources.router.routes.babynameslist.route               = "baby-names/baby-boy-names-list-from/:char
resources.router.routes.babynameslist.defaults.module     = "default"
resources.router.routes.babynameslist.defaults.controller = "index"
resources.router.routes.babynameslist.defaults.action     = "babynameslist" 
```

[http://example.com/baby-names/baby-boy-names-list-from/a/](http://example.com/baby-names/baby-boy-names-list-from/a/)

但我想用这个。

```
resources.router.routes.babynameslist.route               = "baby-names/baby-boy-names-list-from-:char/"
resources.router.routes.babynameslist.defaults.module     = "default"
resources.router.routes.babynameslist.defaults.controller = "index"
resources.router.routes.babynameslist.defaults.action     = "babynameslist" 
```

它不起作用（ -:char/ ）

[http://example.com/baby-names/baby-boy-names-list-from-a/](http://example.com/baby-names/baby-boy-names-list-from-a/)

请帮助我如何制作“baby-boy-names-list-from-a”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:32:31.890

您可以考虑使用`Zend_Controller_Router_Route_Regex`.
定义如下：

```
resources.router.routes.babynameslist.type                = "Zend_Controller_Router_Route_Regex"
resources.router.routes.babynameslist.route               = "baby-names/baby-boy-names-list-from-(\w)/"
resources.router.routes.babynameslist.map.1               = "char"
resources.router.routes.babynameslist.defaults.module     = "default"
resources.router.routes.babynameslist.defaults.controller = "index"
resources.router.routes.babynameslist.defaults.action     = "babynameslist" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:36:57.563

我认为你应该将“a”传递给一个变量，并相应地调整你的脚本。我不确定，但我认为动态路由在 Zend_Route 中不起作用。

例如 ：

```
http://example.com/baby-names/baby-boy-names-list-from/a 
```

# sql - 如何从 oracle SQL 中的给定表中创建随机 25% 的样本？

> ID：11579480
> 
> 赞同：1
> 
> 时间：2012-07-20T12:33:03.593
> 
> 标签：sql, oracle, plsql

我给出了查询：

```
select dbms_random.value 
  from table; 
```

我如何获得 25% 的样品？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T12:48:06.757

select 语句允许这样做。

> sample_clause允许您指示数据库从**表**中的随机数据样本中进行选择，而不是从整个表中进行选择。
> 
> 选择样本：示例 以下查询估计订单表中的订单数：
> 
> ```
> SELECT COUNT(*) * 10 FROM orders SAMPLE (10);
> 
> COUNT(*)*10
> -----------
>          70 
> ```

看[这里](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10002.htm#i2065953)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T09:56:50.890

```
SELECT * FROM (
    SELECT temp.*, COUNT(*) OVER () count_rows
    FROM temp ORDER BY dbms_random.value) 
WHERE rownum <= 0.25 * count_rows; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T07:37:37.233

另一种方法：

```
SELECT * FROM (
  SELECT mytable.*
        ,NTILE(4) OVER (ORDER BY DBMS_RANDOM.value)
         AS quartile
  FROM mytable
  )
WHERE quartile = 1; 
```

# entity-framework-4 - 实体框架和海量 ORM 有什么区别？

> ID：11579481
> 
> 赞同：0
> 
> 时间：2012-07-20T12:33:05.183
> 
> 标签：entity-framework-4, massive

当我遇到一个叫做“Massive”的 ORM 时，我一直在研究各种 ORM。谁能告诉我Massive和Entity framework 4之间的区别。哪个更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:51:05.283

Entity Framework 来自 Microsoft，而 Massive 是第三方的轻量级 Micro-ORM。这不是好坏的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:57:42.277

从字里行间看，听起来您以前没有使用过 ORM？您的问题很难回答，因为它是将苹果与橙子进行比较。我建议选择像 EF 这样的东西并尝试一下。玩得开心！

# iphone - 尝试将 UIViewController 推送到 UITableViewController

> ID：11579484
> 
> 赞同：1
> 
> 时间：2012-07-20T12:33:21.987
> 
> 标签：iphone, objective-c, ios

我目前正在开发一个应用程序，该应用程序从烂番茄 API 中检索电影列表并将它们显示在表格中。我希望在点击一行后显示 UIViewController，以便显示详细页面。

这是我的 didSelectRowAtIndexPath 的代码。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath     *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
    //UINavigationController *navigation = [[UINavigationController alloc] initWithRootViewController:self]; // This line of code throws an exception for some reason. 
    [self.navigationController pushViewController:detailViewController animated:YES];
} 
```

可能是我很久没有睡觉了，但我一辈子都无法弄清楚我哪里错了。

PS。我正在使用弧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:40:01.550

你确定你的导航控制器已经初始化了吗？

如果不是，您在构建的地方正确地缺少这样的东西`UIViewController`：

```
MyVc = [[MyVC alloc] initWithNibName:@"MyVC" bundle:nil];
UINavigationController *navCon = [[UINavigationController alloc] initWithRootViewController:myVc];
[_window addSubview:navCon.view]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:42:01.777

在 AppDelegate.h 文件中写入这些属性

```
@property (strong, nonatomic) YourFirstViewController *yourFirstController;
@property (nonatomic, retain) UINavigationController *navigationControl; 
```

将此代码写入 AppDelegate.m 文件

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {

        self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
        self.yourFirstViewController = [[YourFirstViewController alloc] initWithNibName:@"YourFirstViewController" bundle:nil]];
        navigationController = [[UINavigationController alloc] initWithRootViewController:self.yourFirstViewController];
        [self.window addSubview:[navigationController view]];
        [self.window makeKeyAndVisible];
        return YES;
    } 
```

我想这会对你有所帮助。

# extjs - 如何禁用锁定网格中的列从 normalGrid 移动到锁定

> ID：11579487
> 
> 赞同：1
> 
> 时间：2012-07-20T12:33:34.433
> 
> 标签：extjs

我正在创建一些带有锁定列的非标准网格面板。所以我有一些锁定而不是列的网格。默认情况下，我可以移动这些列（更改它们的顺序）。因此，当渲染带有锁定列的网格面板时，它会创建lockedGrid（带有锁定列）和normalGrid（带有普通列），我可以将列从正常移动到锁定。

它工作正常，但我需要禁用将列移动到锁定网格的能力，但保留在 normalGrid 内移动列的能力。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:46:52.327

您可以使用 columnmoved 事件将列移回其原始位置吗？

```
this.getColumnModel().on('columnmoved',function(cm,oldindex,newindex) {
    cm.moveColumn(newindex,oldindex);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T07:15:11.030

所有普通列都应具有：

```
lockable: false 
```

# asp.net - 从 Asp.net MVC 访问 Web 服务

> ID：11579497
> 
> 赞同：2
> 
> 时间：2012-07-20T12:34:32.770
> 
> 标签：asp.net, asp.net-mvc, web-services, asp.net-mvc-2

我有一个`MVC2`应用程序，其中还包括一个非 MVC 部分（常规 Asp.Net 3.5 页面）。

我从非 MVC 页面调用 web 服务（不是 WCF）来填充自动完成。

MVC 部分和非 MVC 部分在我的开发人员机器上都可以正常工作。

当我在 IIS 中托管我的应用程序时，我无法访问我的网络服务中的网络方法。我检查了它返回的萤火虫

```
The controller for path '/payroll/WS/MVCArch.asmx/JqUiGetEmp' was not found or does not implement IController. ' 
```

这里我的虚拟目录名称是 Payroll。我的非 MVC 页面位于应用程序根目录下名为“RepDocs”的文件夹下。我的 Webservice 文件夹“WS”也在应用程序的根目录下。该请求是从“RepDocs”文件夹下的非 mvc 页面发送的。

为什么相同的代码适用于`VSHOST`而不适用于`IIS (XP sp3)`？我错过了什么吗？

请帮忙。

**编辑**

我已修改我的 global.asax 以排除以下路线

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
routes.IgnoreRoute("favicon.ico");
routes.IgnoreRoute("WS/{resource}.asmx/{*pathInfo}");
//routes.IgnoreRoute("{*allasmx}", new { allasmx = @".*\.asmx(/.*)?" });
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
); 
```

现在我得到这个错误

```
The HTTP verb POST used to access path '/Payroll/ws/MVCArch.asmx/JqUiGetOffice' is not allowed. 
```

我将以下内容添加到 Web.config

```
<webServices>
    <protocols>
      <add name="HttpGet"/>
      <add name="HttpPost"/>
      </protocols>
</webServices> 
```

仍然没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:53:48.303

您必须忽略 Global.asax.cs 中到 Web 服务的路由

```
routes.IgnoreRoute("{*allasmx}", new {allasmx=@".*\.asmx(/.*)?"}); 
```

# java - 如何在不使用 final 关键字的情况下避免继承到我们的类？

> ID：11579500
> 
> 赞同：-7
> 
> 时间：2012-07-20T12:34:42.093
> 
> 标签：java, class

```
class a
{
----
}
class b extends a
{

} 
```

但是我的类 a 没有继承到 b 如何

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T12:38:33.127

你的问题到底是什么？如何防止类`a`被子类化，但不产生类`a` `final`？

制作 class 的所有构造函数`a` `private`。提供一个工厂方法来创建`a`.

```
class a {
    // Private constructor
    private a() {
    }

    // Factory method
    public static a createA() {
        return new a();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T12:38:59.980

在您的类构造函数中使用以下内容：

```
if (this.getClass() != A.class) {
    throw new RuntimeException("Subclassing not allowed");
} 
```

但是使用这种方式，您将在运行时限制继承。

# css - IE + cufon 中的不透明度

> ID：11579505
> 
> 赞同：0
> 
> 时间：2012-07-20T12:34:57.150
> 
> 标签：css, internet-explorer-9, opacity, cufon

我正在尝试为网站的一部分添加一些不透明度，同时使用 cufon 作为字体。但是，它不起作用。更糟糕的是，不透明度似乎不适用于网站、图像、div、文本，它们都没有不透明度。

用于cufon：

```
.classname cufon {
    display: block;
    position: absolute;
    filter: alpha(opacity=30);
    opacity: 0.3;
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=30);
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";
} 
```

对于所有其他部分，我使用默认不透明度，因为我不需要它在 IE8 或更早版本中工作。但是，不透明度本身甚至不起作用。

```
opacity: 0.3; 
```

有人知道是什么原因造成的吗？或者有什么建议可以解决这个问题？

演示： [http ://web2.expicom.temp.enterexchange.com](http://web2.expericom.temp.enterexchange.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:36:23.013

嘿，现在习惯了`rgba`

```
.classname cufon{
background:rgba(0,0,0,.3);
} 
```

* * *

更多信息[http://css-tricks.com/rgba-browser-support/](http://css-tricks.com/rgba-browser-support/)

# java - 从 WSDL 创建 Java API

> ID：11579507
> 
> 赞同：1
> 
> 时间：2012-07-20T12:35:02.030
> 
> 标签：java, api, soap, wsdl

我想创建 java 类或使用此 WSDL 中的 API (https://secure.myclang.com/app/api/soap/public/wsdl/index.php?version=1.10) 我尝试了axis2-1.6。 2，但我没有让它工作..

有人可以帮助我，还是 WSDL 有问题？

我得到的错误：

```
 C:\Users\Gynnad\Downloads\axis2-1.5.1-bin\axis2-1.5.1\bin>wsdl2java.bat -uri 
 https://secure.myclang.com/app/api/soap/public/wsdl/index.php?version=1.10
 Using AXIS2_HOME:   C:\Users\Gynnad\Downloads\axis2-1.6.2-bin\axis2-1.6.2
 Using JAVA_HOME:    C:\Program Files (x86)\Java\jdk1.6.0_31
 Retrieving document at 'https://secure.myclang.com/app/api/soap/public/wsdl/index.php?version=1.10'.
 log4j:WARN No appenders could be found for logger     (org.apache.axis2.description.WSDL11ToAllAxisServicesBuilder).log4j:WARN Please initialize      the log4j system properly.
 Exception in thread "main" org.apache.axis2.wsdl.codegen.CodeGenerationException: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.generate(CodeGenerationEngine.java:293)
    at org.apache.axis2.wsdl.WSDL2Code.main(WSDL2Code.java:35)
    at org.apache.axis2.wsdl.WSDL2Java.main(WSDL2Java.java:24)
 Caused by: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at org.apache.axis2.wsdl.codegen.extension.SimpleDBExtension.engage(SimpleDBExtension.java:53)
    at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.generate(CodeGenerationEngine.java:246)
    ... 2 more
 Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.axis2.wsdl.codegen.extension.SimpleDBExtension.engage(SimpleDBExtension.java:50)
    ... 3 more
 Caused by: org.apache.axis2.schema.SchemaCompilationException: can not find type {http://schemas.xmlsoap.org/soap/encoding/}Array from the parent schema https://secure.myclang.com/app/api/soap/public/index.php?version=1.10
    at org.apache.axis2.schema.SchemaCompiler.copyMetaInfoHierarchy(SchemaCompiler.java:1371)
    at org.apache.axis2.schema.SchemaCompiler.processComplexContent(SchemaCompiler.java:1333)
    at org.apache.axis2.schema.SchemaCompiler.processContentModel(SchemaCompiler.java:1228)
    at org.apache.axis2.schema.SchemaCompiler.processComplexType(SchemaCompiler.java:1172)
    at org.apache.axis2.schema.SchemaCompiler.processNamedComplexSchemaType(SchemaCompiler.java:1092)
    at org.apache.axis2.schema.SchemaCompiler.processSchema(SchemaCompiler.java:1006)
    at org.apache.axis2.schema.SchemaCompiler.processElement(SchemaCompiler.java:645)
    at org.apache.axis2.schema.SchemaCompiler.processElement(SchemaCompiler.java:604)
    at org.apache.axis2.schema.SchemaCompiler.process(SchemaCompiler.java:2069)
    at org.apache.axis2.schema.SchemaCompiler.processParticle(SchemaCompiler.java:1952)
    at org.apache.axis2.schema.SchemaCompiler.processComplexType(SchemaCompiler.java:1156)
    at org.apache.axis2.schema.SchemaCompiler.processNamedComplexSchemaType(SchemaCompiler.java:1092)
    at org.apache.axis2.schema.SchemaCompiler.processSchema(SchemaCompiler.java:1006)
    at org.apache.axis2.schema.SchemaCompiler.processElement(SchemaCompiler.java:645)
    at org.apache.axis2.schema.SchemaCompiler.processElement(SchemaCompiler.java:604)
    at org.apache.axis2.schema.SchemaCompiler.process(SchemaCompiler.java:2069)
    at org.apache.axis2.schema.SchemaCompiler.processParticle(SchemaCompiler.java:1952)
    at org.apache.axis2.schema.SchemaCompiler.processComplexType(SchemaCompiler.java:1156)
    at org.apache.axis2.schema.SchemaCompiler.processAnonymousComplexSchemaType(SchemaCompiler.java:1055)
    at org.apache.axis2.schema.SchemaCompiler.processSchema(SchemaCompiler.java:1009)
    at org.apache.axis2.schema.SchemaCompiler.processElement(SchemaCompiler.java:645)
    at org.apache.axis2.schema.SchemaCompiler.processElement(SchemaCompiler.java:615)
    at org.apache.axis2.schema.SchemaCompiler.compile(SchemaCompiler.java:423)
    at org.apache.axis2.schema.SchemaCompiler.compile(SchemaCompiler.java:292)
    at org.apache.axis2.schema.ExtensionUtility.invoke(ExtensionUtility.java:102)
    ... 8 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:37:57.820

你可以试试这个：

[WSDL2JAVA](http://sourceforge.net/projects/wsdl2javawizard/)

编辑：

根据您的错误，我认为问题出在 WSDL 本身：

```
org.apache.axis2.schema.SchemaCompilationException: can not find type {http://schemas.xmlsoap.org/soap/encoding/}Array from the parent schema https://secure.myclang.com/app/api/soap/public/index.php?version=1.10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:44:33.957

你也可以试试

[Apache CXF - WSDL 到 Java](http://cxf.apache.org/docs/wsdl-to-java.html)

它也有[Maven 插件](http://cxf.apache.org/docs/maven-cxf-codegen-plugin-wsdl-to-java.html)来做同样的事情

# unit-testing - Cakephp 2.0 模拟身份验证

> ID：11579508
> 
> 赞同：5
> 
> 时间：2012-07-20T12:35:03.293
> 
> 标签：unit-testing, cakephp, mocking

我正在使用 Cake 2.2 开发一个应用程序，目前正在编写一些单元测试。模型测试工作正常，我一般对控制器测试有一些问题。

情况： - 大多数操作需要用户登录 - 有自定义组件和供应商库 - 我有所有表的固定装置

问题： - 许多操作使用“$this->Auth->user()”方法来获取用户数据 - 如果我为该操作编写测试，用户数据（显然）不存在

我的（不工作）解决方案： - 我试图模拟 auth 组件，以便它包含用户方法并始终返回一个包含用户数据的静态数组，但它返回 null，这是代码：

```
$Days = $this->generate('Days', array('components' => 'Auth'));
$Days->Auth->expects($this->once())->method('user')->will($this->returnValue(array(..userdata etc.)));
$result = $this->testAction('/days/settings'); 
```

它只是一直说没有调用该方法（尽管 Days 控制器中的设置方法只调用了一次）。模型有什么问题？嗯..

任何帮助，将不胜感激！

-edit- 正在测试的方法的代码：

```
public function myDays()
{
   $user = $this->Auth->user();
   $days = $this->Day->find('all', array('conditions' => array('user_id' => $user['id'], 'active' => 1)));
   $this->set('days', $days);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:33:01.447

也许使用：

```
$Days->Auth->staticExpects( 
```

因为 user() 是一个静态方法。

# c++ - 来自 addr2line 的错误行号

> ID：11579509
> 
> 赞同：23
> 
> 时间：2012-07-20T12:35:09.513
> 
> 标签：c++, c, callstack, backtrace, binutils

我试图在 C++ 程序的回溯中找到调用的确切行。现在我正在使用这些行（来自 backtrace 的手册页）来获取跟踪：

```
 void *bt_buffer[1000];
  char **bt_strings;
  int bt_nptrs = backtrace(bt_buffer, 1000);
  bt_strings = backtrace_symbols(bt_buffer, bt_nptrs); 
```

在 bt_strings 我找到表格的行

```
./prog() [0x402e42] 
```

现在我获取地址（十六进制字符串）并将其提供给 addr2line。这有时会导致明显错误的行号。互联网搜索使我找到了这篇[文章](http://lists.gnu.org/archive/html/bug-binutils/2006-08/msg00043.html)，其中表明

```
readelf -wl ./prog 
```

指示该行的*实际*位置，或者更确切地说，该符号已移动到当前行的行数。

**编辑：**当我编译时会发生这种情况`-g -O0`，即明确地没有优化。编译器是`gcc 4.6.3`我想念的另一个编译器标志吗？

我的问题如下：我需要自动化这个。我需要我的程序来创建回溯（完成），提取文件（完成）和行号（失败）。

我当然可以调用`readelf`并解析输出，但这并不适合，因为输出因符号而异，具体取决于具体发生的情况。有时符号的地址在一行中，而有关行偏移的信息在下一行...

总结一下：

**是否有一种优雅的方法可以在运行时从程序内部获取回溯中函数调用的确切行号？**

**编辑：**示例代码：

```
#define UNW_LOCAL_ONLY
#include <libunwind.h>
#include <execinfo.h>
#include <iostream>
#include <stdlib.h>

void show_backtrace()
{
  // get current address
  void* p = __builtin_return_address(0);
  std::cout << std::hex << p << std::endl;

  // get callee addresses
  p = __builtin_return_address(1);
  std::cout << std::hex << p << std::endl;

  p = __builtin_return_address(2);
  std::cout << std::hex << p << std::endl;
}

void show_backtrace2()
{
  void *array[10];
  size_t size;
  char **strings;
  int i;

  size = backtrace (array, 10);
  strings = backtrace_symbols ((void *const *)array, size);

  for (i = 0; i < size; i++)
    {
      std::cout << strings[i] << std::endl;
    }

  free (strings);
}

void show_backtrace3 (void)
{
  char name[256];
  unw_cursor_t cursor; unw_context_t uc;
  unw_word_t ip, sp, offp;

  unw_getcontext (&uc);
  unw_init_local (&cursor, &uc);

  while (unw_step(&cursor) > 0)
    {
      char file[256];
      int line = 0;

      name[0] = '\0';
      unw_get_proc_name (&cursor, name, 256, &offp);
      unw_get_reg (&cursor, UNW_REG_IP, &ip);
      unw_get_reg (&cursor, UNW_REG_SP, &sp);

      std::cout << std:: hex << name << " ip = " << (long) ip 
                << " , sp = " << (long) sp << std::endl;
    }
}

void dummy_function2()
{
  show_backtrace();
  show_backtrace2();
  show_backtrace3();
}

void dummy_function1()
{ 
  dummy_function2 (); 
} // line 73

int main(int argc, char **argv)
{
  dummy_function1 ();
  return 0;
} 
```

编译并运行：

```
g++ test_unwind.cc -g -O0 -lunwind  && ./a.out 
```

输出：

```
0x400edb
0x400ef0
0x400f06
./a.out() [0x400cfb]
./a.out() [0x400ee0]
./a.out() [0x400ef0]
./a.out() [0x400f06]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed) [0x7f2f044ae76d]
./a.out() [0x400b79]
_Z15dummy_function2v ip = 400ee5 , sp = 7fffdb564580
_Z15dummy_function1v ip = 400ef0 , sp = 7fffdb564590
main ip = 400f06 , sp = 7fffdb5645a0
__libc_start_main ip = 7f2f044ae76d , sp = 7fffdb5645c0
_start ip = 400b79 , sp = 7fffdb564680 
```

测试例如 0x400ef0 与 addr2line 产量

```
/path/to/code/test_unwind.cc:73 
```

这是正确的文件，但错误的行号。在实际应用中，行号可以前后相差很多行。

**编辑：**编译`-S`显示相关部分是：

```
.LCFI34:
  .cfi_def_cfa_register 6
  .loc 2 72 0
  call  _Z15dummy_function2v
  .loc 2 73 0
  popq  %rbp 
```

等显示的`addr2line`是返回地址，如后面的行所示`call`。我想获得“入口”行，即之前显示的内容！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:25:50.033

你一定能做到！[我知道一个使用libunwind](http://www.nongnu.org/libunwind/)的示例实现。请参阅此博客文章：[http ://blog.bigpixel.ro/stack-unwinding-stack-trace-with-gcc/](http://blog.bigpixel.ro/stack-unwinding-stack-trace-with-gcc/)

它归结为这段代码（从文章中直接复制）：

```
void show_backtrace (void)
{
    char name[256];
    unw_cursor_t cursor; unw_context_t uc;
    unw_word_t ip, sp, offp;

    unw_getcontext(&uc);
    unw_init_local(&cursor, &uc);

    while (unw_step(&cursor) > 0)
    {
        char file[256];
        int line = 0;

        name[0] = '\0';
        unw_get_proc_name(&cursor, name, 256, &offp);
        unw_get_reg(&cursor, UNW_REG_IP, &ip);
        unw_get_reg(&cursor, UNW_REG_SP, &sp);

        //printf ("%s ip = %lx, sp = %lx\n", name, (long) ip, (long) sp);
        getFileAndLine((long)ip, file, 256, &line);
        printf("%s in file %s line %d\n", name, file, line);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-11T05:55:54.130

这是因为在大多数体系结构中，程序计数器[指向当前执行指令之后的指令](https://stackoverflow.com/questions/24091566/why-does-the-arm-pc-register-point-to-the-instruction-after-the-next-one-to-be-e)。您仍然可以使用 addr2line，但为 x86 添加 -1 或为 aarch32 添加 -8 以获取源代码行的实际地址。向后 CPP 使用相同的想法。[https://github.com/bombela/backward-cpp/blob/master/backward.hpp](https://github.com/bombela/backward-cpp/blob/master/backward.hpp)（搜索ip_before_instruction）。我发现唯一不减去的时间是地址是发生崩溃的地方。这是有道理的，因为在调用错误处理程序（例如，为页面错误提供服务）之后，它可以继续执行错误指令。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-26T01:44:07.707

你有没有尝试过

```
__LINE__ 
```

它是一个预处理器符号，但您可以编译它。

# knockout.js - 用于敲除.js 的存根

> ID：11579510
> 
> 赞同：0
> 
> 时间：2012-07-20T12:35:10.610
> 
> 标签：knockout.js

我已经使用 knockout.js 编写了一个应用程序，并且我也想以批处理模式运行该应用程序（例如使用 node.js）。

这是一个模拟应用程序，因此交互式可视化版本绑定到 html 前端，但另外我想以批处理模式运行模拟并生成大量数据用于统计分析，所以在该模式下我想要所有的 ko代码消失，因为我不需要它并且不想产生性能开销。

可视化示例：

```
function Queue() {
  var self = this; 
  self.items = ko.observableArray();
  self.rate = ko.observable(5);
  ...
}

...
queue.rate(7); 
```

在批处理模式下相同：

```
function Queue() {
  var self = this;
  self.items = [];
  self.rate = 5;
}

...
queue.rate = 5; 
```

是否有捷径可寻？

我正在考虑为 ko 创建一个存根，以删除与订阅相关的逻辑，但也许有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:42:04.043

您当然可以使用`ko.toJS(myObject)`来获得对象的“干净”版本，但是您仍然会产生一些开销来创建最终只是展开以获得干净对象的可观察对象。

正如您所说，我的想法是为 ko 创建一个存根，如果您的目标是在两者之间共享代码，它将简单地返回传递给它的值。

# php - PHP我正在尝试拆分一串Lat Lng航点，最好的方法是什么

> ID：11579511
> 
> 赞同：0
> 
> 时间：2012-07-20T12:35:12.123
> 
> 标签：php, split

我正在使用谷歌地图 api 返回一串航点纬度/经度值。这方面的例子是：

```
(51.4409138, -2.542236799999955),(51.44766809999999, -2.544380100000012),(51.4355129, -2.5526174999999967) 
```

我的目标是产生这样的结果：

```
array (
   0 => array (0 => 51.4409138,1 => -2.542236799999955),
   1 => array (0 => 51.44766809999999,1 => -2.544380100000012),
   2 => array (0 => 51.4355129,1 => -2.5526174999999967)
) 
```

你能建议什么是最好的使用方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T12:38:03.213

```
$first = explode('),(', $coords);
foreach ($first as $result) {
    $second[] = explode(', ', trim($result, '()`');
} 
```

`$second`是你需要的。

为了您的兴趣，这里有一个单行（5.3）：

```
$desired_output = array_map(function($pair) {
                               return explode(', ', trim($pair, '()`');
                            }, explode('),(', $original_string)); 
```

# php - 应用程序重定向到另一个应用程序

> ID：11579519
> 
> 赞同：-2
> 
> 时间：2012-07-20T12:35:43.373
> 
> 标签：php, facebook

我在一个应用程序中看到了它。我希望我的应用程序在用户墙上发布信息后重定向到另一个带有应用程序的 Facebook 选项卡。我怎样才能做到？感谢您的回答。

我在这个应用程序中看到了它：http: [//www.facebook.com/pages/Zmien-Kolor-Swojego-Fejsa/438226459533001? sk=app_190322544333196](http://www.facebook.com/pages/Zmien-Kolor-Swojego-Fejsa/438226459533001?sk=app_190322544333196)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:45:18.157

使用 javascript 和类似的东西是可能的：

```
window.top.location.href = "http://some-url.com"; 
```

# android - Facebook 原生 Android 应用访问令牌

> ID：11579523
> 
> 赞同：2
> 
> 时间：2012-07-20T12:36:01.610
> 
> 标签：android, facebook, native

我们使用此链接生成了一个访问令牌： [https ://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=123456789000000&client_secret=03252f2ff1eddffe234a0dc7256abb8c](https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=123456789000000&client_secret=03252f2ff1eddffe234a0dc7256abb8c)

它给了我们一个像这样的访问令牌：AQRtositr-Km47sometextwohp-7heCCDHmKE

但是现在，当我们想在我们的原生 Facebook 应用程序中进行身份验证时，它会生成以下 AccessToken：ABBDSqE43jFSSbrS7ujvyLZClfyKDCZBhAuLXTtr9nwelj4MFwlijzejljEoNItC3lijzm3shemzq3jDFCdAZD

所以问题是如何生成本机 Facebook 应用访问令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:58:34.310

在 android 中创建一个异步请求处理程序并与 facebook graph API 进行通信。

[此](https://developers.facebook.com/docs/authentication/applications/)链接将为您提供进一步的指导

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-10T15:37:24.653

@Amit @Jan Gerlinger 没有 App AccessToken 这样的东西。请查看此链接：
[https ://developers.facebook.com/docs/facebook-login/access-tokens/](https://developers.facebook.com/docs/facebook-login/access-tokens/)

# ios - MBProgressHUD 委托 hudWasHidden 未调用

> ID：11579527
> 
> 赞同：1
> 
> 时间：2012-07-20T12:36:19.237
> 
> 标签：ios, mbprogresshud

我在我的 iPhone 应用程序中使用 MBProgressHUD。一切正常，我根据需要显示警报。但是有一个问题：我不能将`hudWasHidden`委托用于我的一个警报。我想这样做是因为我使用自定义 segue 从另一个加载视图，但我只想在警报隐藏后加载视图。我以这种方式调用警报：`[alertSentHUD hide:YES afterDelay:2.0];`并且我已将我的类设置为`MBProgressHUDDelegate`（在头文件中）。我还放入`[alertSentHUD setDelegate:self];`了我的 viewDidLoad，以捕捉有问题的`hudWasHidden`问题，我像往常一样在哪里启动我的 segue : `[self performSegueWithIdentifier:@"NewAlertToAllThreads" sender:self];`。

但似乎这从未被调用（我没有得到我想要的视图）。

有任何想法吗 ？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T21:28:44.247

每当没有消息/没有预期的动作时。这意味着有些东西是零。在调用 [alertSentHUD setDelegate:self] 之前检查 alertSentHud 是否包含 nil 。

Aso 确保在将消息隐藏传递给 MBProgressHUD 之前设置委托。我的意思是确保在设置委托后调用 [alertSentHUD hide:YES afterDelay:2.0]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T21:08:38.433

即使你把一个`NSLog()`放进`hudWasHidden:`去也不会显示？尽管如此，更多的源代码会很好地理解你的问题。您也可以尝试使用 blocks 方法：

```
[self doSomethingInBackgroundWithProgressCallback:^(float progress) {
    hud.progress = progress;
} completionCallback:^{
    [MBProgressHUD hideHUDForView:self.view animated:YES];
    [self performSegueWithIdentifier:@"NewAlertToAllThreads" sender:self];
}]; 
```

# objective-c - NSPanel 没有成为关键窗口

> ID：11579531
> 
> 赞同：0
> 
> 时间：2012-07-20T12:36:28.960
> 
> 标签：objective-c, cocoa

我有一个 NSPanel，我想将其设置为`keyWindow`它应该发布`NSWindowDidBecomeKeyNotification`，但是即使在调用该`makeKeyWindow`方法时，也不会发布通知。下面是我的代码，但我无法弄清楚它有什么问题：

```
newPanel = [[NSPanel alloc]initWithContentRect:windowRect
                                         styleMask:NSUtilityWindowMask
                                           backing:NSBackingStoreBuffered 
                                             defer:FALSE];

    [[NSNotificationCenter defaultCenter]addObserver:self 
                                            selector:@selector(test:) 
                                                name:@"NSWindowDidBecomeKeyNotification" 
                                              object:newPanel];
    // Create a slider and add to the panel
    NSSlider *slider = [[NSSlider alloc]initWithFrame:NSMakeRect(0, 0, windowRect.size.width, windowRect.size.height)];
    [[newPanel contentView]addSubview:slider];
    // Set window attributes
    [newPanel setHasShadow:TRUE];
    [newPanel setFloatingPanel:TRUE];
    [newPanel setReleasedWhenClosed:TRUE];
    [newPanel setHidesOnDeactivate:TRUE];
    [newPanel setBecomesKeyOnlyIfNeeded:NO];
    [newPanel makeKeyWindow];
    [newPanel makeFirstResponder:slider];
    [newPanel orderFront:sender]; 
```

现在，当我调用`[newPanel makeKeyWindow];`NSWindowDidBecomeKeyNotification 时，应该发布并`-(void)test:(NSNotification*)aNotification`调用它。但它没有被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:02:49.607

我将您的代码复制并粘贴到一个新项目中，它甚至没有显示面板，对您有用吗？我可以通过创建一个属性 thePanel（编译器不喜欢 newPanel 这个名称，不知道为什么）并将 thePanel 的所有引用更改为 self.thePanel 来使其工作。此外，我将 NSTitledWindowMask 添加到样式掩码参数 (styleMask:NSUtilityWindowMask | NSTitledWindowMask) 中，或者将 makeKeyWindow 命令移到 orderFront 命令之后，或者将这两个命令替换为 makeKeyAndOrderFront:self.window。

# ios - 在应用程序委托中使用 finch？

> ID：11579536
> 
> 赞同：0
> 
> 时间：2012-07-20T12:36:44.840
> 
> 标签：ios, finch

我正在完成一个 ipad 游戏，Finch 处理游戏声音似乎真的很好......我的问题是：是否可以在 Application Delegate 中实例化所有 finch 机制并从多个游戏屏幕中使用它？我的意思是在代表中准备雀的声音并从游戏屏幕启动它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:02:10.837

我不熟悉 Finch 机制，但总的来说，我只能说应用程序委托不是执行此操作的地方。我建议你做的是创建一个“SoundEngine”单例类（一旦应用程序在应用程序委托中启动，你就可以实例化它）。将此声音引擎连接到 Finch 框架并创建公共便捷方法来播放声音 - 因为这是一个 Singleton，它使用安全，可从整个应用程序访问，并且访问非常方便。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T14:44:22.053

好的，我在项目中的一个独立工作区中安装了 Finch。开始实现单例，我在下面的代码中遇到了奇怪的错误

```
#import "FinchSoundManager.h"
#import "FISoundEngine.h"
#import "FIFactory.h"

@implementation FinchSoundManager
static FinchSoundManager *sharedInstance = nil;

@synthesize soundEngine,soundFactory;

- (id)init
{
self = [super init];

if (self) {
    soundFactory = [[FIFactory alloc] init];
    [soundFactory setLogger:FILoggerNSLog];

    [self setSoundEngine:[soundFactory buildSoundEngine]];
    [soundEngine activateAudioSessionWithCategory:AVAudioSessionCategoryPlayback];
    [soundEngine openAudioDevice];

}

return self;
} 
```

1) AVAudioSessionCategoryPlayback 上的错误 -> 使用未识别的标识符 2) 在 finch 本身中：FISoundEngine: "Unknown Type Name AVAudioSession" #import "FILogger.h"

```
@interface FISoundEngine : NSObject

@property(copy) FILogger logger;
@property(readonly) BOOL isRunning;
@property(strong) AVAudioSession *audioSession;

- (BOOL) activateAudioSessionWithCategory: (NSString*) categoryName;
- (void) deactivateAudioSession;

- (BOOL) openAudioDevice;
- (void) closeAudioDevice;

@end 
```

无法理解 FISoundEngine 上的错误在哪里，因为它只是导入到我的项目中......有什么线索吗？

# jquery - 你可以在 jQuery 库中放置一个 Canvas 实例吗？

> ID：11579539
> 
> 赞同：0
> 
> 时间：2012-07-20T12:37:01.137
> 
> 标签：jquery, canvas, kineticjs

我已经使用 Canvas 和 KineticJS 制作了几个简单的粒子和游戏示例，并且我正在考虑使用像 Nivo 这样的滑块来展示它们。首先的想法是，我需要在滑块过渡时重新绘制每个画布，但我只是想知道是否有人已经尝试过这个并成功或失败，是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T23:01:32.057

尝试：

```
 var mystage = stage.toImage(config); 
```

将画布转换为图像，然后您可以转换图像。

但是，如果您希望将整个舞台保存为一个对象，您只需执行以下操作：

```
 var json = stage.toJSON(); 
```

这样可以节省您的舞台以供以后重新加载，您可以这样做：

```
 var stage = Kinetic.Node.create(json, 'container'); 
```

# jruby - 我可以在 ruby 中定义一个 Java 子类，然后在 Java 中实例化它吗？

> ID：11579542
> 
> 赞同：3
> 
> 时间：2012-07-20T12:37:16.787
> 
> 标签：jruby

我想在 Java 中定义一个超类，然后在 Ruby 中定义一个子类，然后在 Java 中创建该子类的实例。有点像这样：

```
// Java superclass
package myPkg;

public class Sup{
  public Sup(){}
  public abstract void foo(String a);
} 
```

--

```
# Ruby code
include Java
require 'jruby/core_ext'

include_class 'myPkg.Sup'

class RubySub < Java::myPkg.Sup
  def foo( a )
    puts a;
  end
end

RubySub.become_java!
RubySub 
```

--

```
// Back in Java land
Ruby runtime =  Ruby.newInstance();
IRubyObect ro = runtime.evalScriptlet(theRubyCodeAbove);
Class<Sup> clz = (Class<Sup>) JavaEmbedUtils.rubyToJava(runtime, ro, Class.class);
clz.newInstance().foo("Hey!"); 
```

我已经尝试了上面的代码，但是我从`newInstance()`调用中得到了一个 InstantiationException。我希望在运行时在 Ruby 中声明该类，因此例如运行 jrubyc 以提前将 Ruby 代码编译为 Java 类定义已经过时了。我在这里做错了什么？

我已经在调试器中运行了底部代码段，并且肯定会从调用中返回一个 RubyClass 对象`evalScriptlet()`。也许需要一个额外的步骤来将 a`RubyClass`变成 a `Class`？

* * *

更新：我有[一个线索](http://jira.codehaus.org/browse/JRUBY-6105)——如果该类是 Java 类的子类，则显然`become_java!`不起作用。有没有另一种方法可以做到这一点，或者我只是被骨头？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:26:19.563

我现在想出了一个解决方法，但它并不漂亮。

简而言之：我无法返回`RubySub.become_java!`（即`nil`，由于[JRUBY-6105](http://jira.codehaus.org/browse/JRUBY-6105)）或尝试返回`RubySub`并从 a 转换`RubyClass`为 a `Class`。

相反，我返回`RubySub.method(:new)`，它显示为`RubyMethod`。我可以调用它，它创建一个`IRubyObject`实际上是子类的实例。这可以使用`JavaEmbedUtils.rubyToJava()`. 就像我说的，它不漂亮，但它有效。

# css - RadEditor HTML 结果显示在 div CSS 冲突中

> ID：11579548
> 
> 赞同：0
> 
> 时间：2012-07-20T12:37:45.303
> 
> 标签：css, telerik, radeditor

我有来自 RadGrid 的 HTML 结果 - 例如：

雷达编辑器结果：

```
<strong>Testing</strong> 
```

在 CSS 中：

```
body
{
    margin: 0px;
    padding: 0px;
    background-color: #f1f1f1;
    color: Red;
} 
```

结果测试是红色的，我想要 RadEditor 的默认值 - 黑色文本。如何从 RadEditor 读取黑色文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:39:41.403

曾经

很重要，因为您的编辑器默认设置为黑色

```
{
color:red !important;
} 
```

# php - 在while循环中动态回显字符串

> ID：11579549
> 
> 赞同：2
> 
> 时间：2012-07-20T12:37:47.053
> 
> 标签：php

> **可能重复：**
> [什么是输出缓冲？](https://stackoverflow.com/questions/2832010/what-is-output-buffering)
> [为什么 PHP 一次发送所有内容？](https://stackoverflow.com/questions/11544714/why-does-php-send-it-all-at-once)

从列表发送电子邮件时，我想动态地回显“已发送”。我的脚本仅在完成所有操作后才会回显。如何在 while 循环中动态回显字符串？

```
$f=fopen("list.txt","r");

if($f){

    while (!feof($f)) {

        $line = fgets($f, 4096);

        $lncount++;

        $val = $lines[$lncount];

        mailsender($line,$yollayan,$sifresi,$name);

        echo "sent";

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:43:16.927

您将需要设置输出以进行缓冲。试试下面的脚本。确保切换输出的压缩以查看实时输出。

```
@apache_setenv('no-gzip', 1); 
@ini_set('zlib.output_compression', 0);
ob_implicit_flush(true);
ob_end_flush();

$f=fopen("list.txt","r");

if($f){

   while (!feof($f)) {

        $line = fgets($f, 4096);
        $lncount++;
        $val = $lines[$lncount];
        mailsender($line,$yollayan,$sifresi,$name);
        echo " sent";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:39:27.260

尝试这个

```
 echo "Sent ";
  echo str_repeat("\n",1024);
  flush(); 
```

来自 PHP 手册：

> flush() 可能无法覆盖 Web 服务器的缓冲方案，并且它对浏览器中的任何客户端缓冲都没有影响。[...]
> 
> Apache 的服务器模块（如 mod_gzip）可能会自己进行缓冲，这将导致 flush() 不会导致数据立即发送到客户端。
> 
> 甚至浏览器也可以在显示之前缓冲它的输入。例如，Netscape 会缓冲文本，直到它接收到行尾或标记的开头，并且在看到最外层表格的标记之前不会呈现表格。
> 
> 某些版本的 Microsoft Internet Explorer 仅在收到 256 字节的输出后才开始显示页面，因此您可能需要在刷新之前发送额外的空格以使这些浏览器显示页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T12:43:05.430

> 我的脚本仅在完成所有操作后才会回显。

可能确实如此 - 但您没有提供几乎足够的信息来确定是否是这种情况。

您的问题很可能与[此](https://stackoverflow.com/questions/11544714/why-does-php-send-it-all-at-once)问题重复。

如果您在 echo 之后添加一个 flush() 并从命令行运行它，您将看到进度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T12:45:01.870

您可以使用`flush();`下面的回声将其发送到浏览器：http: [//php.net/manual/en/function.flush.php](http://php.net/manual/en/function.flush.php)（阅读链接上的评论以获取更多信息）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T12:41:11.603

您看到的效果是输出缓冲。调用[flush()](http://php.net/manual/en/function.flush.php)函数来强制 php 发送挂起的输出。

请阅读在不同场景和不同服务器类型中可能出现的不同警告和可能的限制。

# java - Swing JTabbedPane 在填满时抛出 IndexOutOfBoundsException

> ID：11579556
> 
> 赞同：1
> 
> 时间：2012-07-20T12:38:14.517
> 
> 标签：java, swing, exception, jtabbedpane

我有一个包含多个组件的应用程序。其中一个是其中的`JTabbedPane`其他东西（显然）。*我仅*通过此 getter访问此窗格：

```
public JTabbedPane getPlotTabbedPane() {
    if (plotTabs == null) {
        plotTabs = new JTabbedPane();
        plotTabs.setFocusable(false);

        plotTabs.add("Measurement", getPlotPanel());
        plotTabs.add("Time", getPlotPanel().getTimePanel());
        plotTabs.add("Data", getPlotPanel().getDataPanel());
        plotTabs.add("Statistics", getPlotPanel().getStatisticsPanel());
        plotTabs.addChangeListener(new ChangeListener() {
            @Override
            public void stateChanged(ChangeEvent e) {
                getPlotPanel().refreshRenderer();
            }
        });
    }
    return plotTabs;
} 
```

所以第一次，我访问它（即当它尚未创建时），我创建它，所有其他时间，我只是返回已经创建的`JTabbedPane`. 我已经被告知这不是最好的技术（如果有人可以告诉我一个不会弄乱布局组合代码的更好的技术，我非常愿意接受建议）。

现在，这在 99% 的情况下（应用程序启动）非常有效。在 1% 中，我得到一个

```
Exception in thread "Thread-0" java.lang.ArrayIndexOutOfBoundsException: -1
    at java.util.Vector.elementAt(Vector.java:430)
    at javax.swing.JTabbedPane.getTitleAt(JTabbedPane.java:1091)
    at javax.swing.plaf.basic.BasicTabbedPaneUI$Handler.updateHtmlViews(BasicTabbedPaneUI.java:3564)
    at javax.swing.plaf.basic.BasicTabbedPaneUI$Handler.componentAdded(BasicTabbedPaneUI.java:3699)
    at java.awt.Container.processContainerEvent(Container.java:2065)
    at java.awt.Container.processEvent(Container.java:2036)
    at java.awt.Component.dispatchEventImpl(Component.java:4653)
    at java.awt.Container.dispatchEventImpl(Container.java:2097)
    at java.awt.Component.dispatchEvent(Component.java:4481)
    at java.awt.Container.addImpl(Container.java:1083)
    at javax.swing.JTabbedPane.insertTab(JTabbedPane.java:703)
    at javax.swing.JTabbedPane.addTab(JTabbedPane.java:777)
    at javax.swing.JTabbedPane.add(JTabbedPane.java:814)
    at companyname.product.gui.Tab.getPlotTabbedPane(Tab.java:386)
    at companyname.product.gui.Tab.getFullPlotPanel(Tab.java:374)
    at companyname.product.gui.Tab.initComponents(Tab.java:262)
    at companyname.product.gui.Tab.<init>(Tab.java:80) 
```

我不会在堆栈中进一步深入，但这基本上是 GUI 的创建。`Tab`是一个扩展的`JPanel`. 我无法真正弄清楚，问题出在哪里，我能做些什么来防止它。显然，我可以将 Tab.java 的第 386 行包装在 a 中`try/catch`，但这并不能解决问题，它只是解决了症状......

那么，您知道问题出在哪里，我该如何解决，或者我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:49:00.177

堆栈跟踪似乎建议您从另一个线程访问 Swing 组件，然后是事件调度线程 (EDT)。这是不允许的。

我很确定，如果您确保只从正确的线程访问 Swing 组件，您将不会再看到此异常。

更多信息可以[在 Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)教程中找到。您还可以查看[这篇文章](http://weblogs.java.net/blog/alexfromsun/archive/2006/02/debugging_swing.html)，其中包含`RepaintManager`可以帮助您检测 Swing 线程违规的文章

# javascript - 将 jquery 侦听器转换为 javascript 侦听器

> ID：11579558
> 
> 赞同：0
> 
> 时间：2012-07-20T12:38:20.577
> 
> 标签：javascript, jquery, keylistener

我有这样的代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
  $(document).ready(function(){
      var my_id = 'iddate';

      $('#'+ my_id).bind('keyup',function(e){ // Listener for key pressing in the field.
          var inputValue = document.getElementById( my_id ).value;
          // And etc...
      })
  });
</script> 
```

这里我使用了 JQuery。但问题是我不能再使用它了。可以用javascript重写吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:40:42.900

是的，您可以，例如：

```
window.onload = function() {
  var my_id = 'iddate';

  document.getElementById( my_id ).onkeyup = function(e){ // Listener for key pressing in the field.
      var inputValue = document.getElementById( my_id ).value;
      // And etc...
  };
} 
```

或通过使用[`addEventListener`](https://developer.mozilla.org/en/DOM/element.addEventListener)：

```
document.getElementById( my_id ).addEventListener('click', function(e){ // Listener for key pressing in the field.
      var inputValue = document.getElementById( my_id ).value;
      // And etc...
}, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:43:37.597

或者你也可以这样做，

```
window.onload = function(){
   var my_id = 'iddate';
      document.getElementById( my_id ).onkeyup = function(e){ // Listener for key pressing in the field.
      var inputValue = document.getElementById( my_id ).value;
     };
} 
```

# sql-server - 运行时数据库附加期间的连接问题。

> ID：11579561
> 
> 赞同：2
> 
> 时间：2012-07-20T12:38:26.980
> 
> 标签：sql-server, linq-to-sql

我在 Linq-to-SQL 连接中遇到了一些问题，我使用 Linq-to-SQL 开发了一个桌面应用程序，因为我使用了基于服务的本地数据库，并为此应用程序创建了一个设置，并将该`.mdf`文件放入我的设置项目中，现在我的问题是，当我创建设置并将其安装在其他电脑上时，它会向我显示错误，例如

> 与 SQL Server 建立连接时发生与 BA 网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）lockquote

我的连接字符串是

```
 connectionString="AttachDbFilename=|DataDirectory|\DailyExpense.mdf; 
                   Integrated Security=True;User Instance=True" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:15:51.497

您编写连接字符串的方式表明您已在目标计算机上安装了 SQL Server。您使用的格式“指示”您的应用程序尝试将您提供的 .mdf 文件附加到 sql server 的本地 RUNNING 实例。如果您想使用远程服务器，您将不得不稍微重写连接字符串以指向服务器本身。您的连接字符串应类似于以下内容：

```
data source=(MY MACHINE)\sqlexpress;initial catalog=DailyExpense;integrated security=True 
```

其中： - MY MACHINE 将是运行 sql express 实例的服务器。- sqlexpress 是 sql 实例的名称（默认为 sqlexpress）。- DailyExpense 是数据库的名称（假设数据库名称与您提供的 mdf 文件相同）。

# c# - 我们可以将 OdbcDataReader.FetchSize (= rowSize * rows) 硬编码为固定的行数吗？（Oracle 数据库提供者）

> ID：11579562
> 
> 赞同：0
> 
> 时间：2012-07-20T12:38:30.420
> 
> 标签：c#, oracle

我需要为 FetchSize 赋值。可以使用反射从数据读取器接收行大小。

但是我需要行数，我可以将其硬编码为行大小 * 100000（而不是行数）。

executedataReader 将用于多个存储过程，无法获取行数。

```
 OracleDataReader dr = command.ExecuteReader();

            Int32 rowCount = 100000; //in this case actual result will be just 20k only. will it have any issue?

            FieldInfo fi = dr.GetType().GetField("m_rowSize", BindingFlags.Instance | BindingFlags.NonPublic);

            Int32 rowSize = Convert.ToInt32(fi.GetValue(dr));

            dr.FetchSize = rowCount * rowSize;

            while (dr.Read())
            {
                string myField = (string)dr[0];
                Console.WriteLine(myField);
            } 
```

解决这个问题会有什么弊端吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:52:15.817

此处的`FetchSize`属性限制为单个“提取”分配回数据库的内存量。较小的获取大小意味着获取数据的往返次数更多，但也意味着在任何给定时间客户端上使用的内存更少。

将获取大小设置为类似的值`RowSize * n`会告诉读者一次总是获取*最多* `n`行。如果设置`n`为等于，`RowCount`则表示“一次获取整个结果集”。如果你设置`n`为一个固定的数字，你说的是“一次取我 1000（或 10000 或 25000 或其他）行”。当您调用`DataReader.Read()`时，数据读取器将尝试返回它已经获取并缓存的行。如果您要求它一次获取 100,000 行，它只需要每 100,000 次`Read()`调用与 Oracle 对话一次。

更大的获取大小将意味着更有效的网络流量，更少的数据库访问，因此在大多数情况下通常会“更快”。但是，这意味着客户端使用的内存相对较多，因此如果获取大小变得*非常大*，您可能会遇到垃圾收集和/或分页问题。随你（由你决定。

请注意，分配`FetchSize`一个不是行大小倍数的值是完全合法的，它只会导致每次提取时未使用一些剩余内存。如果您对`Command`具有不同行大小的多个存储过程使用相同的对象，则最好只设置一个较大的`FetchSize`值（以实际字节为单位）并将其用于所有内容。

# objective-c - 从单例类中的 NSDictionaies 数组访问数据并在 TableView (XCode) 中显示该数据）

> ID：11579566
> 
> 赞同：0
> 
> 时间：2012-07-20T12:38:48.593
> 
> 标签：objective-c, ios, xcode, nsarray, nsdictionary

我有一个单例类，其中包含一个 NSDictionary 数组（其中 5 个）。我需要在不同的 ViewController 中显示这些数据（我正在使用 Storyboard）。

如果我从数组中提取数据，我可以访问数据，但现在我需要从 NSDictionary 数组中提取数据。我想出了这条线：

```
cell.textLabel.text =  [[[[Singleton sharedInstance] movies]  objectAtIndex:indexPath.row] objectForKey:@"title"]; 
```

但这似乎不起作用。

有任何想法吗？我将把我的 Singleton 类和我的 TableView 类：

单例.h

```
#import <Foundation/Foundation.h>
#import "AppDelegate.h"

@interface Singleton : NSObject {

    NSDictionary *batman;
    NSDictionary *superman;

    NSArray *superheoes;

}

@property(nonatomic,retain) NSDictionary *batman;
@property(nonatomic,retain) NSDictionary *superman;

@property(nonatomic,retain) NSArray *superheroes;

+ (Singleton *) sharedInstance;
+ (AppDelegate *) sharedAppDelegate;

@end 
```

单身人士.m

```
#import "Singleton.h"

@implementation Singleton

@synthesize batman, superman;

+ (Singleton *) sharedInstance {

    //The instance of this class is store here
    static Singleton *myInstance = nil;

    // We check to see if an instance already exists
    if (nil == myInstance) {
        myInstance = [[[self class] alloc] init];
    }

    return myInstance;

}

-(id) init {

    if (self=[super init]) {

        batman = [[NSDictionary alloc] initWithObjectsAndKeys: 
                             @"name", @"Back to the Future", 
                             @"year", @"1985", nil];

        superman = [[NSDictionary alloc]initWithObjectsAndKeys:
                    @"name", @"Superman", 
                    @"year", @"1990", nil];

        superheroes = [NSArray arrayWithObjects:batman,superman, nil]; 
    }
    return self;
}

#pragma mark access to app delegate etc.
+ (AppDelegate *) sharedAppDelegate; {
    return (AppDelegate*)[[UIApplication sharedApplication] delegate];
}

@end 
```

超级英雄数据库.m

```
#import "SuperheroesDatabase.h"
#import "Singleton.h"

@interface SuperheroDatabase ()

@end

@implementation MovieDatabase

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...

    if(cell == nil) {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    }

    cell.textLabel.text =  [[[[Singleton sharedInstance] movies]  objectAtIndex:indexPath.row] objectForKey:@"name"];
    //cell.detailTextLabel.text =  [NSString stringWithFormat:@"row %i", indexPath.row];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:32:04.803

我认为您的问题是您的数组和字典没有被正确保留。尝试向`retain`您的 init 方法添加调用：

```
-(id) init {

    if (self=[super init]) {

        batman = [[[NSDictionary alloc] initWithObjectsAndKeys: 
                             @"name", @"Back to the Future", 
                             @"year", @"1985", nil] retain];

        superman = [[[NSDictionary alloc]initWithObjectsAndKeys:
                    @"name", @"Superman", 
                    @"year", @"1990", nil] retain];

        superheroes = [[NSArray arrayWithObjects:batman,superman, nil] retain]; 
    }
    return self;
} 
```

# sql - 蜂巢连接

> ID：11579575
> 
> 赞同：2
> 
> 时间：2012-07-20T12:39:08.513
> 
> 标签：sql, hadoop, cloud, hive

海我是hadoop和hive的新手。我的应用程序现在无法处理多个连接。当连接数增加（超过 4 个）时，它会变慢。任何人都可以弄清楚。代码如下。

```
public static void setupDriver(String connectURI) throws Exception {

    ObjectPool connectionPool = new GenericObjectPool(null);
    ConnectionFactory connectionFactory = new DriverManagerConnectionFactory(
            connectURI, username, password);
    @SuppressWarnings("unused")
    PoolableConnectionFactory poolableConnectionFactory = new PoolableConnectionFactory(
            connectionFactory, connectionPool, null, null, false, true);
    Class.forName(poolingDriver);
    PoolingDriver driver = (PoolingDriver) DriverManager.getDriver(poolConnection);
    driver.registerPool(poolName, connectionPool);
}

stmt = connection.createStatement();
String queryString = "select feed_date,count(feed_date) from twitter_stats where tweet like '%" + searchRequest.getWord() + "%' ";
if (null != searchRequest.getFromDate()) {
    queryString += "and feed_date >= '" + searchRequest.getFromDate() + "' ";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:18:35.180

你真的不应该使用以 % 开头的 LIKE 条件。在大多数情况下，这会导致性能问题！尝试压制它，然后告诉我们它是否能解决您的问题。

这里有一些线索：[LIKE work-around in SQL (Performance issues)](https://stackoverflow.com/questions/3691149/like-work-around-in-sql-performance-issues)，即使不处理这个主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T14:13:45.590

连接的处理取决于 Hive Metastore Server。它应该安装在强大的服务器上，或者如果您在虚拟机上工作，请尝试增加 vm 的内存或 cpu。另外，尝试查看 Hive Metastore 服务器日志，是否存在内存或性能错误。（？）或者，您可以在 CDH 5.3.x 支持的多服务器环境中使用 Hive Metastore 服务器的两个实例和上。

# java - 从同步区域调用的可重入锁和外来方法（有效的 Java 项）

> ID：11579576
> 
> 赞同：2
> 
> 时间：2012-07-20T12:39:09.623
> 
> 标签：java, java.util.concurrent

来自*Effective Java*（**第 10 章并发**）

> 假设您要从同步区域内调用外来方法，而同步区域保护的不变量暂时无效。因为 Java 编程语言中的锁是可重入的，所以这样的调用不会死锁

现在看下面的代码：

```
// Broken - invokes alien method from synchronized block!
public class ObservableSet<E> extends ForwardingSet<E> {
  public ObservableSet(Set<E> set) {
    super(set);
  }

  private final List<SetObserver<E>> observers = new ArrayList<SetObserver<E>>();

  private void notifyElementAdded(E element) {
    synchronized (observers) {
      for (SetObserver<E> observer : observers)
        observer.alienMethod(this, element);
    }
  }
} 
```

因此，考虑`SetObservers`和`ObservableSet`是两个独立编写的类，它们位于不同的包中，因此`alienMethod()`与类`SetObserver`无关`ObservableSet`。`alienMethod`现在说观察者在被调用时处于不一致的状态。那么可重入锁的问题在哪里呢？如果外星人方法也在同一个锁（即“观察者”）上同步，那么重入性只会受到质疑，但这里似乎不是这种情况，或者我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T12:42:26.797

如果`alienMethod`导致事件被触发，最终重新进入相​​同的`notifyElementAdded`方法，会发生什么？这是现实世界的危险，我被它咬过一次。

在这种特殊情况下，您**必须**制作一份安全的清单副本，然后安静地浏览它。

# c# - 获取带有附件的 Gmail 收件箱

> ID：11579578
> 
> 赞同：0
> 
> 时间：2012-07-20T12:39:15.927
> 
> 标签：c#, email, smtp, pop3

我已经尝试过这里可用的代码：[Fetch Gmail Inbox](http://www.codeproject.com/Articles/188349/Read-Gmail-Inbox-Message-in-ASP-NET)可以正常工作，但我也希望将附件下载到本地磁盘上。

有没有可能的解决方案...？

**编辑**

`Openpop.dll`是的..我已经在从这里[Accessing mail with Pop - Using C# and OpenPop](http://www.floresense.com/resc_center/?art=1407)的帮助下完成了它但我只想从收件箱中获取未读电子邮件...是否可能..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:50:44.027

我最近在一些工作项目中使用[了 Afterlogic 的 MailBee 组件。](http://www.afterlogic.com/mailbee-net/email-components)它几乎可以处理任何与 Internet 相关的电子邮件。

不过，它是一种付费产品，只能免费使用 30 天，所以不幸的是，如果您只是为自己编码，这并不是一个真正的选择。

# android - ListFragment，DialogFragment - 为什么？

> ID：11579581
> 
> 赞同：0
> 
> 时间：2012-07-20T12:39:29.803
> 
> 标签：android

[使用ListFragment](http://developer.android.com/reference/android/app/ListFragment.html)和自定义 Fragment（其中包含 ListView）元素有什么区别？

同样的问题适用于[DialogFragment](http://developer.android.com/reference/android/app/DialogFragment.html)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:46:40.223

ListFragment 具有由单个列表视图组成的默认布局。但是，如果您愿意，您可以通过从 onCreateView(LayoutInflater, ViewGroup, Bundle) 返回您自己的视图层次结构来自定义片段布局。为此，您的视图层次结构必须包含一个 ID 为“@android:id/list”的 ListView 对象（如果它在代码中，则为列表）

一个可能的重复:)

[Android - Activity 与 ListActivity](https://stackoverflow.com/questions/2032417/android-activity-vs-listactivity-which-one-should-my-activity-class-extend)

这肯定会帮助你。

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:44:50.550

ListFragment 提供了特定的 API 方法来处理列表。如果您的所有片段都需要一个 ListView，那么使用它是一种不错的方法。如果您的布局更复杂，您最好自己添加一个。

使用 ListFragment 可以更轻松地管理单个 ListView 布局。

# php - 是否可以在 PHP 中设置多个密 码？

> ID：11579586
> 
> 赞同：2
> 
> 时间：2012-07-20T12:39:51.627
> 
> 标签：php, passwords

我想创建一个简单的登录，PHP 会检查 4 个输入密码是否正确 - 有点像密码，但每个数字都会采用不同的输入形式？

这可能吗？我是 PHP 新手，所以如果你能推荐一个可以帮助我的教程，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T12:42:05.707

只需创建一个具有多个输入字段的表单。

# javascript - 将 jQuery 包含到 javascript 中并在 imacros 中使用它？

> ID：11579587
> 
> 赞同：3
> 
> 时间：2012-07-20T12:39:59.240
> 
> 标签：javascript, jquery, imacros

我想知道如何将 jQuery 库包含到 javascript 中并在 iMacros 中使用它？

它是这样的。在 .js 文件中，我将 iMacros 代码声明为变量

```
var someMacro;
someMacro ="CODE:";
someMacro +="TAB T=1 \n"; 
```

代码实际上更大，这只是一个小例子。声明变量后，我使用 iimPlay、iimSet 等命令来播放宏并在宏中设置变量。

现在如何将 jQuery 库包含在其中，以便我可以在 .js 文件中使用 jQuery 并增强我的脚本？

PS我在他们的论坛上找到了这个，但它对我没有多大帮助，因为我不明白如何使用它。这是[链接到关于 jQuery 的 iopus 论坛的链接](http://forum.iopus.com/viewtopic.php?f=11&t=8956&p=31951&hilit=jquery#p31951)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-22T14:46:39.170

我有这个解决方案：

```
function loadScriptFromURL(url) {
    var request = Components.classes['@mozilla.org/xmlextras/xmlhttprequest;1'].createInstance(Components.interfaces.nsIXMLHttpRequest),
        async = false;
    request.open('GET', url, async);
    request.send();
    if (request.status !== 200) {
        var message = 'an error occurred while loading script at url: ' + url + ', status: ' + request.status;
        iimDisplay(message);
        return false;
    }
    eval(request.response);
    return true;
}

// load JQuery
loadScriptFromURL('http://mysupersecret.blob.core.windows.net/share/jquery-2.0.3.min.js');
$ = window.$,
JQuery = window.JQuery; 
```

试图从它的官方 CDN 获取 jQuery，我遇到了 iMacros 中的“setTimeout is undefined”错误。所以我下载了 jQuery 并将*setTimeout*方法修改为*window.setTimeout*。这对我有用，所以我必须将 jQuery 放在我的在线共享位置才能从那里使用它。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-04T17:05:24.943

感谢您将此解决方案放在一起。我成功加载了 jQuery，然后创建了一个引导模式并将其附加到正文中。接下来我尝试加载 bootstrap.js 并在 modal 上调用 modal('show') 方法，但无济于事。iMacros 告诉我函数 .modal 不存在。

```
loadScriptFromURL('http://localhost.com:7001/ybswcsstub/resources/plugins/jquery-1.10.2.min.js');

$ = window.$, JQuery = window.JQuery;

$.getScript('http://localhost.com:7001/ybswcsstub/resources/plugins/bootstrap/js/bootstrap.js');

$('body').append('<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">' +
'  <div class="modal-dialog">'+
'    <div class="modal-content">'+
'      <div class="modal-header">'+
'        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>'+
'        <h4 class="modal-title" id="myModalLabel">Modal title</h4>'+
'      </div>'+
'      <div class="modal-body">'+
'        Some Modal'+
'      </div>'+
'      <div class="modal-footer">'+
'        <button type="button" class="btn btn-default"     data-dismiss="modal">Close</button>'+
'        <button type="button" class="btn btn-primary">Save changes</button>'+
'      </div>'+
'    </div>'+
'  </div>'+
'</div>');

$('#myModal').modal('show'); 
```

当我运行时，我在 iMacros TypeError 中收到以下错误：$(...).modal 不是函数，第 211 行（错误代码：-991）

任何帮助将不胜感激，因为我在这一点上有点卡住了：s

编辑：当我尝试使用 loadScriptFromURL 时，我不得不使用 $.getScript 来加载 bootstrap.js（域中的 .com 是因为 stackoverflowrestriction），但出现了错误

```
Error: Bootstrap's JavaScript requires jQuery, line 7 (Error code: -991) 
```

谢谢，马克。

# ios - UIWebView 加载但不显示内容

> ID：11579589
> 
> 赞同：0
> 
> 时间：2012-07-20T12:40:08.877
> 
> 标签：ios, uiwebview, ipod

UIWebView 成功加载内容，但不显示。UIWebView 只是白屏。但是，如果您单击此 UIWebView，它将处理您的单击。例如，**如果您单击链接应该在的位置（但实际上是空白区域），则单击处理并加载下一页并显示 OK**。

该错误是不稳定的。我只使用本地 HTML 文件（我们的主页，它在本地生成）得到它，网页内容加载正常。它发生在 20% 的情况下。但同时，它非常粘。一旦出现白屏，您可以多次重新加载此页面并看到白屏（但如果您单击隐形链接，则成功显示另一个页面）。有时它偶尔会无缘无故地出现。您可以上下“滚动”这个空白屏幕，它偶尔会加载。这个本地 HTML 有很多东西，嵌入的图像，javascripts 等，它可能是 javascript 问题，但我无法解释它是怎么回事，内容不可见，但仍然可以点击。

它发生在 iPod 真机和 iPhone 模拟器 4.3 中，但无法在 iPad 或 iPad 模拟器上重现。

我花了一整天试图解决这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:53:56.300

我解决了这个！

UIWebView 这种非常奇怪的行为是由 javascript 代码引起的。javascript就像（简化）：

```
 <script>

    function onLoad() {
       location.href='xxx://pageLoaded';
    }

    </script>

<body onload='onLoad();'> 
```

这段代码的想法是通知应用程序页面已加载的事实。在应用程序中，我捕获对 xxx://pageLoaded 的请求并取消它（在 中`shouldStartLoadWithRequest`）。因为请求取消，我没想到这里会出现任何问题。特别是，我没想到内容会变得不可见，但仍然可以点击。我在火灾和变化之间添加了计时器 ( `setTimeout`) 。它解决了这个问题。`onload``location.href`

注意：我知道`webViewDidFinishLoad`. `UIWebView`这是一个非常简单的例子，只是为了解释问题和解决方案。真正的 javascript 更复杂，它所做的事情无法通过简单的使用来实现`webViewDidFinishLoad`。

# android - 如何制作智能表格布局

> ID：11579590
> 
> 赞同：0
> 
> 时间：2012-07-20T12:40:11.860
> 
> 标签：android, android-layout

我想出了这个非常烦人的布局问题。

基本上我正在寻找的 UI 组件并不复杂，但行为需要准确。

在所有情况下，我都有 2 或 3 个文本需要水平布局。

在最好的情况下，所有这 3 个都放在一行中，因此布局不是问题。

| 文本 1 <空格> | 正文 2 | <空格> 文字3 |

但是，当我遇到 text1 需要超过 1 行的问题时，我应该为 TableLayout 设置可拉伸的第 0 列，同时 text2 可能也需要超过 1 行，因此该列也需要可拉伸，我需要结果像这样：

| text1 多行占 40% | text2 占 20% | 文本 3 多行占 40% |

当这个问题出现时，我还没有找到设置 TableLayout 收缩和拉伸列的方法。还有一个问题是 TableRow 可以包含 2 或 3 个孩子。

我用 LinearLayout 和 onGlobalLayout 进行了几个小时的测试，我计算了这些视图的占用量和调整权重，但这非常复杂并且并不总是有效，view3 上的宽度有时在 view1 很长时返回零。

我正在寻找一些从这里开始的提示，我应该在 xml 中进行布局并膨胀它们而不是以编程方式制作它们等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:06:27.320

好的，我找到了解决方案，如果只有 2 个孩子，第 0 列可收缩，第 1 列可拉伸，表行跨度为 2，如果只有 2 个孩子。

# android - Android eclipse 编辑器：无法编辑属性

> ID：11579594
> 
> 赞同：26
> 
> 时间：2012-07-20T12:40:37.800
> 
> 标签：android, eclipse

从今天早上开始，我面临着一个奇怪的、破坏生产力的问题。没有预填充属性的属性无法通过属性编辑器进行编辑。（例如边距）我需要每次都在视图和 XML 编辑器之间切换，以做出世界上最小的更改，因为我只能从 XML 更改它。

我尝试了一切（重新启动eclipse，字段中的每次点击组合等......）。真烦人。

属性编辑器：

![在此处输入图像描述](../Images/8683deb6cfe2f8b6b43c7a99c82b7be6.png)

更新：听起来像是与山狮有关的问题，所以我们必须等待 ADT 插件更新？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-11-13T09:48:25.760

与 ADT v22.3.0-887826 相同的问题

在 XML 编辑器（绿色机器人微调器）顶部重新更改当前 API 版本后修复。我选择了 API 18 而不是 19。一切正常。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-16T22:20:56.590

我刚刚在 OS X Mavericks 上的 Eclipse 中的 ADT 22.3 遇到了同样的问题。

似乎与操作系统版本无关，只需在布局编辑器中打开视图并将 Android 版本（工具栏中绿色 Android 机器人图标旁边）更改为较低版本，它应该重新渲染布局较低的 API 级别，您应该会发现它工作正常。

如果它仍然不起作用，请尝试更旧的版本并重试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-11T22:44:08.010

这是 ADT 20 中引入的新属性表的限制。

我们在 ADT 21 中对其进行了改进，如果您下载 Preview 4（昨天发布），您可以看到新的行为。这是修复：[https ://android-review.googlesource.com/#/c/42238/](https://android-review.googlesource.com/#/c/42238/)

这是 ADT 21 预览：[http ://tools.android.com/download/adt-21-preview](http://tools.android.com/download/adt-21-preview)

-- 托尔

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-04T11:15:04.720

在图形布局中切换到 Android-18（或更低版本）（绿色 Android 右上角）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-04T01:37:55.463

在[http://code.google.com/p/android/issues/detail?id=33906&q=properties%20editor&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars](http://code.google.com/p/android/issues/detail?id=33906&q=properties%20editor&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)也有一个错误报告，但还没有回复。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-05T19:20:47.423

我今天更新到山狮，我对最后一个广告也有同样的问题所以我在这里阅读

[http://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=properties%20editor&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=33906](http://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=properties%20editor&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=33906)

...这是山狮的问题

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-12-20T16:02:24.610

我从 Android SDK 管理器更新了所有包！它解决了这个问题！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-31T12:36:13.730

你用的是哪个版本的eclipse？您是否尝试过最新版本或更新 adt？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-23T23:51:05.343

像这样试试。删除 Android 4.4 (API 19).. 并关闭 eclipse 并再次打开它。

并制作 Android 应用程序项目（例如：hello）并单击属性。

今天我就是这样解决的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-04-16T12:41:22.447

在“sdk manager”（以管理员身份打开）上更新 android sdk 工具并在“安装新软件”（[https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)）上更新“android tools”（v 22.6.2 ）。

为我工作——祝你们一切顺利！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-03-14T16:04:52.037

通过关闭透视来解决您的问题（在 eclips 的 windows 选项卡中）

# javascript - facebook 墙上的 MailTo 链接（phonegap）

> ID：11579603
> 
> 赞同：0
> 
> 时间：2012-07-20T12:41:19.630
> 
> 标签：javascript, facebook, cordova, mailto

嗨，谁能告诉我如何发布 mailto：在 facebook 墙上。我从 git 下载了 facebook SDK。但我无法发布 mailTo。这是 sdk：https://github.com/davejohnson/phonegap-plugin-facebook -连接/

这是我使用的代码：

```
FB.ui({
    method: 'feed',
    name: 'I\'m using the Hackbook web app',
    caption: 'Hackbook for Mobile Web.',
    description: 'Check out Hackbook .',
        link: '<html><body><a href="mailto:vinod.amc@gmail.com"/></body></html>',
    picture: 'http://www.facebookmobileweb.com/hackbook/img/facebook_icon_large.png',
    actions: [{ name: 'Click Here', link: 'http://apps.facebook.com/mobile-start/' }],
  }, 
  function(response) {
    console.log('publishStory UI response: ', response);
  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:49:57.020

> ```
> link: '<html><body><a href="mailto:vinod.amc@gmail.com"/></body></html>' 
> ```

这不是`link`Facebook 所期望的参数——它需要一个 HTTP(S) URL。

我知道无法直接链接到电子邮件地址。所以你最好的方法是把你的电子邮件放入消息中，我会说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T12:16:34.660

请记住，从公司的角度来看，每次人们在 Facebook 之外与他人互动时，这代表了可销售的用户数据的丢失。出于这个原因，Facebook 非常努力地阻止 Facebook 之外的交流，并且禁用消息和帖子中的 mailto 链接是这项工作的一部分。

# protocols - 消息头/前缀应该多长？

> ID：11579604
> 
> 赞同：4
> 
> 时间：2012-07-20T12:41:22.453
> 
> 标签：protocols

我使用了一些协议，并编写了自己的协议。我编写了一些只有 1 个字符的消息格式来识别消息，有些则使用 4 个字符。我觉得我没有足够的经验来判断哪个更好，所以我正在寻找一个答案来描述在哪种情况下一个可能比另一个更好。

出于性能考虑，您可以想象发送 2 个字节 ( `A%1i`) 比发送 5 个字节 ( ) 更快`ABCD%1i`。但是，我注意到，在编写带有 1 字节前缀的协议时，如果您有一个错误导致您的代码无法从套接字读取足够的数据，您可能会收到垃圾数据进入您的系统。

那么 4 字节前缀的目的仅仅是为了保证您的消息是干净的吗？你牺牲的性能值得吗？你真的会牺牲任何表现吗？也许最好有 2 或 3 个字节的前缀？

我不确定这个问题是否应该特定于 TCP，或者它是否适用于所有传输协议。这方面的建议会很有趣。

**更新：**出于兴趣，我会提到 Synergy 使用 4 字节消息前缀，因此对于鼠标移动增量，标题与实际数据大小相同。有些人建议只使用 1 或 2 个字节的前缀来提高效率。我想知道这会有什么缺点？

**更新：**另外，如果您担心垃圾数据，我想知道是否只有握手真的很重要。Synergy 的握手时间很长（几个字节），那么需要 4 字节的消息前缀吗？我最近制定了一个只有 1 字节握手的协议，结果证明这是一个坏主意，因为不兼容的协议正在向系统发送错误数据（在此之后，我可能建议至少有一个长握手） .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:36:34.353

标头的目的是为了更容易解决[帧同步问题](http://en.wikipedia.org/wiki/frame_synchronization)（[串行通信中的字节对齐](https://stackoverflow.com/questions/9468615/byte-aligning-in-serial-communication)）。为了同步，接收者在数据流中寻找任何“看起来像”消息开始头的东西。如果您有*许多*不同类型的有效消息开头标头，并且它们都是 1 字节长，那么您将不可避免地得到很多“错误帧同步”——来自“看起来”开头的垃圾-of-message 标头，但不是。最好选择一些其他标头，使其“不太可能”串行数据流中的任何内容“看起来”像一个有效的消息开头标头。

无论您如何[设计数据包头](http://en.wikibooks.org/wiki/Serial_Programming/Forming_Data_Packets)，您都不可避免地会收到垃圾数据进入您的系统。无论您使用什么来处理这些其他问题（例如消息中间偶尔出现的位错误）也应该足以处理偶尔的“错误帧同步”垃圾。在某些系统中，任何坏数据都会很快被新的好数据覆盖，如果你眨眼，你可能永远看不到坏数据。[其他系统至少需要在页脚](http://en.wikibooks.org/wiki/Serial_Programming/Error_Correction_Methods)中进行某种错误检测以拒绝不良数据。然而，其他系统不仅需要检测此类错误，还需要以某种方式不断重新发送该消息——直到双方都确信已成功接收到该消息的无错误版本。

正如 Oleksi 暗示的那样，在[某些系统](http://c2.com/cgi/wiki?PowerOfPlainText)中，发送单个二进制位（100 毫秒）和发送 10 个字节（102.4 毫秒）之间的[延迟没有显着差异。](http://www.stuartcheshire.org/rants/Latency.html)因此，与使用更详细的标头的优势（更容易调试；更容易实现向后兼容和前向兼容；更容易测试效果）相比，使用微小标头的优势（减少 2.4% 的延迟！）可能不值得“孤立地”进行微小更改，而无需将双方同步升级到与旧协议完全不兼容的新协议）。

也许您可以通过以下方式获得两全其美：（a）在很少使用的消息上保留冗长、易于调试的标头，以至于微小标头的影响太小而无法衡量（我怀疑几乎所有消息） ，以及 (b) 为任何类型的消息引入“微小标题”格式，其中微小标题的效果“明显更好”或至少可测量。看起来 Synergy 协议足够灵活，可以以一种很容易与其他类型的消息头区分开来的方式添加这种“微小的头”格式。

我在笔记本电脑和几台台式机之间使用[Synergy 。](http://en.wikipedia.org/wiki/Synergy_%28software%29)我很高兴有人试图让它变得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T17:09:21.330

性能将取决于您发送的消息的内容。如果您的内容是几千字节，那么您的标头有多少字节并不重要。目前，我会选择最容易使用的方案，因为与您发送的实际数据相比，发送一个字节或四个字节之间的性能差异可以忽略不计。

# java - 如何在Java中将字符串子串到第二个点（。）？

> ID：11579605
> 
> 赞同：4
> 
> 时间：2012-07-20T12:41:35.840
> 
> 标签：java, regex, string, substring

我有一个字符串，它有许多由点 () 分隔的段，`.`如下所示：

> 代码.FIFA.buf.OT.1207.2206.idu

我只想在第二个点之前得到一个子字符串，比如`codes.FIFA`.

如何子串直到第二个点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-20T12:45:09.620

只需找到第一个点，然后从那里找到第二个点：

```
String input = "codes.FIFA.buf.OT.1207.2206.idu";
int dot1 = input.indexOf(".");
int dot2 = input.indexOf(".", dot1 + 1);
String substr = input.substring(0, dot2); 
```

当然，如果未找到点，您可能希望在其中添加错误检查。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T12:47:01.450

像这样的东西可以解决问题：

```
String[] yourArray = yourDotString.split(".");
String firstTwoSubstrings = yourArray[0] + "." + yourArray[1]; 
```

变量 firstTwoSubstrings 将包含第二个“.”之前的所有内容。请注意，如果少于两个“.”，这将导致异常。在你的字符串中。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T12:44:44.680

这似乎是最简单的解决方案：

```
String[] split = "codes.FIFA.buf.OT.1207.2206.idu".split("\\.");
System.out.println(split[0] + "." + split[1]); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-20T12:50:22.090

```
 Matcher m = Pattern.compile("^(.*?[.].*?)[.].*")
                    .matcher("codes.FIFA.buf.OT.1207.2206.idu");
 if (m.matches()) {
      return m.group(1);
 } 
```

[http://ideone.com/N6m8a](http://ideone.com/N6m8a)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-20T12:45:12.507

我只是将它分成三个部分并再次加入前两个部分：

```
String[] parts = string.split("\\.", 3);
String front = parts[0]+"."+parts[1];
String back = parts[2]; 
```

如果它可以少于两个点，或者以点开头等，这可能需要一些错误检查。

# git - “git stash save -u”没有删除一些目录

> ID：11579607
> 
> 赞同：2
> 
> 时间：2012-07-20T12:41:40.917
> 
> 标签：git, git-stash

这是我的情况：
假设我在分支 b1 工作。我写了一个文件 dir/f1\.
然后我想把 dir/f1 的代码集成到 dir/f2 中，我不再需要 f1。
出于随机原因，我想保留 f1。
我从版本控制中删除了它，但它仍然在这里，未被跟踪。
如果我切换到分支 b2，f1 会出现编译错误，因为它没有与 b2 保持同步。
所以，我决定在切换之前在 b1 中 git stash -u，这样当我完成 b2 的工作时，我可以恢复我的上下文。
它几乎可以按预期工作：清理工作目录，隐藏所有内容（跟踪和未跟踪的文件，但由于我没有使用 -a 而不是忽略的文件），我可以 git stash 将它们应用回来。
唯一的问题是某些文件已从工作目录中删除，而其他文件则没有。消息是：

```
Not removing dir/f1 
```

所以我的问题是：这种行为的原因是什么？git 如何决定在存储期间删除哪些文件，哪些不删除？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:34:20.580

这种行为似乎只有在目录`git 1.7.7.x`和何时`dir/f1`才是可能的。

`git stash -u`用于`git clean`从工作目录中删除文件。根据[git 的源代码](http://github.com/git/git/blob/master/builtin/clean.c#L168)，唯一`git clean`可以响应`Not removing dir/f1`消息的情况是何时`dir/f1`是目录。你确定`dir/f1`是文件？

从`git 1.7.8`（具体来说，使用[这个 commit](http://github.com/git/git/commit/7474b8b452f2600bd2a9e03f67b83b489aeadb37)）开始，`git stash -u`将`-d`选项传递给`git clean`，这样就不会再出现这样的问题了。

# php - $_POST 另一个属性而不是值

> ID：11579608
> 
> 赞同：-2
> 
> 时间：2012-07-20T12:41:42.417
> 
> 标签：php, post

是否可以使用 $_POST 获取其他属性的值而不是名为 value 的属性

```
example: <option value="FusRo" name="Dah"></option> 
```

通常，当我使用 $_POST['Dah'] 时，php 会抓取 FusRo（值）。

但我想获取另一个属性的值，而不是名为值的属性。我希望你明白。

如果我不能使用 $_POST 来获取其他值，我可以使用其他命令吗？

另一个例子：如果我使用

```
<option value="FusRo" name="Dah"></option> 
```

我可以用 $_POST 而不是 "Fusro" 得到 "Dah" 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T12:43:54.060

您可以将其他值放在隐藏字段中：

```
<input type="hidden" name="DahHidden" value="somethingelse" /> 
```

然后通过以下方式获取它`$_POST`：

```
$_POST['DahHidden'] 
```

如果此值必须根据 中的内容动态更改`<select>`，那么您将需要 JavaScript。

如果您想从中获取键`$_POST`（即`name`表单字段中的属性），您可以像这样迭代`$_POST`：

```
foreach( $_POST as $key => $value) 
    echo $key . ' => ' . $value; // Will print Dah => value (eventually) 
```

请注意，迭代`$_POST`可能会产生比一个表单元素更多的输出（除非`'Dah'`是您在表单中提交的唯一内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:26:47.750

唯一的办法就是使用JavaScript修改发布的数据，或者更简单的使用jQuery

那么它看起来像这样：

```
<html>
    <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.js"></script>
    </head>

    <body>
        <form name="skyrim" id="skyrim">
            <input type="text" value="FusRo" name="Dah" data-name="dhovakin" data-race="kajit" />
        <form>

        <script>
            $('#skyrim').submit(function( e ){
                data = {};
                url  = 'http://sandbox.local/testpost.php';

                e.preventDefault();

                $('input, textarea', this).each(function(){

                    var pcs   = $( this ).data();
                    var ename = $( this ).attr('name');

                    if(undefined == data[ ename ] ){
                        data[ ename ] = {};
                        data[ ename ]['_'] = $(this).val();
                    }

                    $.each(pcs, function(k, v){
                        data[ ename ][k] = v;
                    });
                });

                $.ajax({
                    url  : url
                   ,data : data
                   ,type : "POST"

                }).done(function(){

                });
            });
        </script>
    </body>
</html> 
```

`data-`上面的代码将添加以 post开头的所有属性。

上面的结果是：

```
Dah[_]      FusRo     // default value 
Dah[name]   dhovakin  // data-name
Dah[race]   kajit     // data-race 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T12:45:09.563

$_POST 只为您提供字段的名称及其对应的值，仅此而已。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T12:47:04.110

不，除了输入字段的“值”之外，您不能发布任何其他内容。你可以通过使用 javascript 来破解它。就像是

```
document.getElementById('FORM').onsubmit = function() {
document.getElementById('FIELD').value = document.getElementById('FIELD').customAttribute
} 
```

但是，如果禁用了 javascript，您的表单将提交错误的值。不是一个真正可靠的解决方案。

对我来说听起来更像是你将不得不重新定义你的价值观，我真的无法想象你为什么要改变这种行为。

# javascript - 在比较返回 false 时，在相同兄弟的 jquery 父级中

> ID：11579616
> 
> 赞同：0
> 
> 时间：2012-07-20T12:42:14.390
> 
> 标签：javascript, jquery, object, tree

我有一棵乌里树。对于每组子节点，我都有一个复选框或一个无线电控件。

我正在做的是当我选中任何复选框或收音机时，我希望所有节点都被取消选中，除了兄弟节点（如果是复选框）。所以我在这里写了我的jquery。

我的 jquery 正在为我需要帮助的一个问题工作。

它在下面：

```
if($(this).parent().parent().parent() != $(elem).parent().parent().parent()) 
```

整个小提琴都[在这里](http://jsfiddle.net/ashwyn/LSw4d/3/) 在上述情况下，当我比较相同的父母时，`false`有时我应该得到。请查看代码并帮助理解为什么它们总是返回 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:48:19.673

```
$(function(){
    $("#tree").find("input").bind("change", function(){
        setStateForAllInputControls($("#tree"), this);
    });
});

function setStateForAllInputControls(o, elem) {
    //alert($(elem).attr("name"));

    if($(elem).attr("checked") == "checked") {
        $(o).find("input").each(function(){

            //problem is in this if condition
            if($(this).parent().parent().parent().get(0) != $(elem).parent().parent().parent().get(0)) {
                $(this).removeAttr("checked");
            }
        });
        $(elem).attr("checked", "checked");
    }
} 
```

会成功的

# java - Spring RestTemplate postForObject with Header：webservice找不到我的标头参数

> ID：11579621
> 
> 赞同：30
> 
> 时间：2012-07-20T12:42:30.983
> 
> 标签：java, spring, resttemplate

我正在为 RestTemplate 苦苦挣扎。我需要将一些身份验证信息发布到休息网络服务。我可以发送请求并得到响应。但是根据响应，我的标头参数没有通过。（使用 SOAPUI 发送相同的请求可以正常工作）

这是我的代码：

```
HttpHeaders headers = new HttpHeaders();
headers.setContentType(MediaType.APPLICATION_FORM_URLENCODED);
headers.add("companyId", companyId);
headers.add("password", password);              

HttpEntity<String> request = new HttpEntity<String>(headers);

RestTemplate restTemplate = new RestTemplate();

List<HttpMessageConverter<?>> messageConverters = new  ArrayList<HttpMessageConverter<?>>();
messageConverters.add(new MappingJacksonHttpMessageConverter());           
restTemplate.setMessageConverters(messageConverters);

LoginResponse response = (LoginResponse)restTemplate.postForObject(url, request, LoginResponse.class); 
```

谁能告诉我我的 HttpEntity 或 HttpHeader 有什么问题？

谢谢你。

**解决了：**

好的，终于搞定了。

```
MultiValueMap<String, String> map = new LinkedMultiValueMap<String, String>();
map.add("companyId", companyId);
map.add("password", password);  

HttpHeaders headers = new HttpHeaders();
headers.setContentType(MediaType.APPLICATION_FORM_URLENCODED);      

HttpEntity<MultiValueMap<String, String>> request = new HttpEntity<MultiValueMap<String, String>>(map, headers);

List<HttpMessageConverter<?>> messageConverters = new ArrayList<HttpMessageConverter<?>>();
messageConverters.add(new MappingJacksonHttpMessageConverter());    
messageConverters.add(new FormHttpMessageConverter());
restTemplate.setMessageConverters(messageConverters);

LoginResponse response = (LoginResponse) restTemplate.postForObject(url, request, LoginResponse.class); 
```

因为我也很难回应，也许它对其他人有用：

```
@JsonIgnoreProperties(ignoreUnknown = true)
public class ItcLoginResponse {

    public String loginToken;

    @JsonProperty("token")
    public String getLoginToken() {
        return loginToken;
    }

    public void setLoginToken(String loginToken) {
        this.loginToken = loginToken;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T13:10:50.610

您正在设置一个标头，表明您正在发布一个表单 (APPLICATION_FORM_URLENCODED)，但随后将 companyId 和密码设置为 HTTP 标头。

我怀疑您希望这些字段出现在您的请求正文中。

您还创建了一个`HttpEntity<String>`指示您将发布包含字符串的请求正文，但您提供的是标头但没有字符串。

如果这不能帮助您解决它，也许您可​​以解释请求应该是什么样子。

# android - 如何监控android服务中的互联网连接丢失

> ID：11579623
> 
> 赞同：3
> 
> 时间：2012-07-20T12:42:43.407
> 
> 标签：android

我想编写一个android服务，当互联网连接断开时激活，并在发生这种情况时向用户显示另一个活动。我不知道如何开始编写此服务。谁能给我一个想法或更好的教程如何在Android服务中捕获连接。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:55:10.907

当 Internet 连接发生变化时，系统会发出带有[`android.net.conn.CONNECTIVITY_CHANGE`](http://developer.android.com/reference/android/net/ConnectivityManager.html#CONNECTIVITY_ACTION)意图的广播。您应该能够创建一个[广播接收器](http://developer.android.com/reference/android/content/BroadcastReceiver.html)，只要设备连接或失去连接，就会调用该接收器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:52:52.100

您必须为连接更改编写接收器。

您可以在这里查看：[Android，如何在轮询数据时处理网络变化（从 GPRS 到 Wi-fi，反之亦然）](https://stackoverflow.com/questions/5165099/android-how-to-handle-change-in-network-from-gprs-to-wi-fi-and-vice-versa-whi)

# c# - 如何使用 C# 打印 PDF

> ID：11579624
> 
> 赞同：25
> 
> 时间：2012-07-20T12:42:44.003
> 
> 标签：c#, winforms, pdf, printing

我试图解决这个问题将近 2 天。网上有很多或多或少的好解决方案，但没有一个完全适合我的任务。

## **任务：**

*   以编程方式打印 PDF
*   用固定打印机做
*   不要让用户做多个 Button_Click
*   默默地做——越多越好
*   做客户端

## **第一个解决方案：**

**使用 Forms.WebBrowser 进行操作**

如果我们安装了 Adob​​e Reader，有一个插件可以在网络浏览器中显示 PDF。使用这个解决方案，我们有一个很好的预览，并且使用 webbrowserControlName.Print() 我们可以触发控件来打印它的内容。

问题 - 我们还有一个 PrintDialog。

* * *

**使用启动参数启动 AcroRd32.exe**

下面的 CMD 命令让我们使用 Adob​​e Reader 来打印我们的 PDF。

*InsertPathTo..\AcroRd32.exe /t "C:\sample.pdf" "\printerNetwork\printerName"*

问题 - 我们需要 AcroRd32.exe 的绝对路径 | 有一个 Adob​​e Reader 窗口打开，必须打开它，直到打印任务准备好。

* * *

**使用 Windows 预设**

```
Process process = new Process();

process.StartInfo.FileName = pathToPdf; 
process.StartInfo.Verb = "printto";
process.StartInfo.Arguments = "\"" + printerName + "\""; 
process.Start();

process.WaitForInputIdle();
process.Kill(); 
```

问题 - 仍然会弹出一个 Adob​​e Reader 窗口，但打印完成后它通常会自行关闭。

解决方案 - 说服客户使用 Foxit Reader（不要使用最后两行代码）。

* * *

**将 PDF 页面转换为 Drawing.Image**

我不知道如何用代码来做，但是当我让它工作时，剩下的只是小菜一碟。Printing.PrintDocument 可以满足所有需求。

* * *

## *任何人都想从这些 PDF 中获得一些 Drawing.Image 或其他方法如何做到这一点？*

最好的问候， 马克斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-11T13:58:49.590

我能找到的最灵活、最简单、性能最好的方法是使用 GhostScript。它可以通过打印机名称直接打印到Windows打印机。

> "C:\Program Files\gs\gs9.07\bin\gswin64c.exe" -dPrinted -dBATCH -dNOPAUSE -sDEVICE=mswinpr2 -dNoCancel -sOutputFile="%printer%*打印机名称*" " *pdfdocument.pdf* "

添加这些开关以将文档缩小到 A4 页面。

> -sPAPERSIZE=a4 -dPDFFitPage

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T15:09:33.980

如果可以选择商业图书馆，您可以尝试使用[Amyuni PDF Creator。网。](http://www.amyuni.com/en/developer/pdfcreator)

**直接使用库打印：**
要打开 PDF 文件并将其发送到直接打印，您可以使用[IacDocument.Print](http://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_NET/Printing_Documents/Methods/IacDocument.Print_Method.htm)方法。C# 中的代码将如下所示：

```
// Open PDF document from file<br>
FileStream file1 = new FileStream ("test.pdf", FileMode.Open, FileAccess.Read);
IacDocument doc1 = new IacDocument (null);
doc1.Open (file1, "" );
// print document to a specified printer with no prompt
doc1.Print ("My Laser Printer", false); 
```

**导出为图像（然后在需要时打印）：**
选择 1：您可以使用[IacDocument.ExportToJPeg](http://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_NET/Amyuni_PDFCreator_IacDocument/Methods/IacDocument.ExportToJPeg_Method.htm)方法将 PDF 中的所有页面转换为可以使用 Drawing.Image 打印或显示的 JPG 图像

选择 2：您可以使用[IacDocument.DrawCurrentPage](http://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_NET/Amyuni_PDFCreator_IacDocument/Methods/IacDocument.DrawCurrentPage_Method.htm)方法和[System.Drawing.Graphics.FromImage](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.fromimage.aspx)方法将每个页面绘制到位图中。C# 中的代码应如下所示：

```
FileStream myFile = new FileStream ("test.pdf", FileMode.Open, FileAccess.Read);
IacDocument doc = new IacDocument(null);
doc.Open(myFile);
doc.CurrentPage = 1;
Image img = new Bitmap(100,100);
Graphics gph = Graphics.FromImage(img);
IntPtr hdc = gph.GetHDC();
doc.DrawCurrentPage(hdc, false);
gph.ReleaseHdc( hdc ); 
```

*免责声明：我为 Amyuni Technologies 工作*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T13:14:21.163

另一种方法是使用 .NET 中的假脱机功能将预先格式化的打印机数据发送到打印机。但不幸的是，您需要使用 win32 spooler API

您可以查看[如何使用 Visual C# .NET 将原始数据发送到打印机](http://support.microsoft.com/kb/322091)

只有当打印机本身支持 PDF 文档时，您才能使用此方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-11T18:01:04.850

我知道标签有`Windows Forms`; 但是，由于通用标题，有些人可能想知道他们是否可以在`WPF`应用程序中使用该名称空间——他们可以。

这是代码：

```
var file = File.ReadAllBytes(pdfFilePath);
var printQueue = LocalPrintServer.GetDefaultPrintQueue();

using (var job = printQueue.AddJob())
using (var stream = job.JobStream)
{
    stream.Write(file, 0, file.Length);
} 
```

现在，这个命名空间必须与`WPF`应用程序一起使用。它不能很好地与`ASP.NET`or一起使用`Windows Service`。它不应该与 一起使用`Windows Forms`，因为它有`System.Drawing.Printing`。使用上述代码打印 PDF 时没有任何问题。

请注意，如果您的打印机不支持 PDF 文件的直接打印，这将不起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T11:21:00.023

我发现使用 printto 动词的代码版本略有不同。我没有尝试过，但也许它可以帮助你：

[http://vbcity.com/forums/t/149141.aspx](http://vbcity.com/forums/t/149141.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-20T21:19:35.637

您可以使用[ghostscript](http://www.ghostscript.com/)将 PDF 转换为图像格式。

以下示例将单个 PDF 转换为 PNG 文件序列：

```
private static void ExecuteGhostscript(string input, string tempDirectory)
{
    // %d will be replaced by ghostscript with a number for each page
    string filename = Path.GetFileNameWithoutExtension(input) + "-%d.png";
    string output = Path.Combine(tempDirectory, filename);

    Process ghostscript = new Process();
    ghostscript.StartInfo.FileName = _pathToGhostscript;
    ghostscript.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;

    ghostscript.StartInfo.Arguments = string.Format(
        "-dSAFER -dBATCH -dNOPAUSE -sDEVICE=png16m -r300 -sOutputFile=\"{0}\" \"{1}\"", output, input);

    ghostscript.Start();
    ghostscript.WaitForExit();
} 
```

如果您更喜欢使用 Adob​​e Reader，您可以隐藏它的窗口：

```
process.StartInfo.WindowStyle = ProcessWindowStyle.Hidden; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-03-23T10:08:35.083

我公司提供可以[渲染和打印 PDF 文档](https://bitmiracle.com/pdf-library/draw-print-pdf.aspx)的 Docotic.Pdf 库。链接后面的文章包含有关以下主题的详细信息：

*   直接在 Windows 窗体或 WPF 应用程序中打印 PDF
*   通过中间图像打印 PDF
*   在 Graphics 上渲染 PDF

也有示例代码的链接。

我在公司工作，所以请阅读这篇文章并自己尝试建议的解决方案。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-11-17T18:55:47.733

我尝试了很多方法，最适合我的方法是从命令行启动 SumatraPDF：

```
// Launch SumatraPDF Reader to print
String arguments = "-print-to-default -silent \"" + fileName + "\"";
System.Diagnostics.Process.Start("SumatraPDF.exe", arguments); 
```

这样做有很多好处：

1.  SumatraPDF 比 Adob​​e Acrobat Reader 快得多。
2.  UI 不加载。它只是打印。
3.  您可以将 SumatraPDF 作为一个独立的应用程序使用，这样您就可以将它包含在您的应用程序中，这样您就可以使用自己的 pa。请注意，我没有阅读许可协议；您可能应该自己检查一下。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-20T12:53:40.703

使用`PrintDocument`类呢？

[http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.aspx)

您只需要传递要打印的文件的文件名（基于示例）。

高温高压

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-30T20:14:51.660

```
 Process proc = new Process();
        proc.StartInfo.FileName = @"C:\Program Files\Adobe\Acrobat 7.0\Reader\AcroRd32.exe";
        proc.StartInfo.Arguments = @"/p /h C:\Documents and Settings\brendal\Desktop\Test.pdf";
        proc.StartInfo.UseShellExecute = false;
        proc.StartInfo.CreateNoWindow = true;
        proc.Start();

        for (int i = 0; i < 5; i++)
        {
            if (!proc.HasExited)
            {
                proc.Refresh();
                Thread.Sleep(2000);
            }
            else
                break;
        }
        if (!proc.HasExited)
        {
            proc.CloseMainWindow();
        } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-01-17T05:46:44.440

如果您对完全符合您要求的商业解决方案感兴趣，那么有很多选择。[我的公司在名为Debenu Quick PDF Library](http://www.debenu.com/products/development/debenu-pdf-library/)的开发人员工具包中提供了这些选项之一。

这是一个代码示例（关键功能是[PrintOptions](http://www.debenu.com/docs/pdf_library_reference/PrintOptions.php)和[PrintDocument](http://www.debenu.com/docs/pdf_library_reference/PrintDocument.php)）：

```
/* Print a document  */

// Load a local sample file from the input folder

DPL.LoadFromFile("Test.pdf", "");

// Configure print options

iPrintOptions = DPL.PrintOptions(0, 0, "Printing Sample")

// Print the current document to the default 
// printing using the options as configured above.
// You can also specify the specific printer.

DPL.PrintDocument(DPL.GetDefaultPrinterName(), 1, 1, iPrintOptions); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-07-31T18:27:30.447

截至`July 2018`， OP 仍然没有答案。没有免费的方法可以 1) 为 2) 闭源项目静默打印您的 pdf。

1) 您当然可以使用 Adob​​e Acrobat 或 Foxit Reader 等程序

2) 免费解决方案具有 GPL（GNU 通用公共许可证）。这意味着如果将软件提供给公司以外的任何人，即使是免费的，您也必须开放源代码。

正如 OP 所说，如果您可以将 PDF 转换为 Drawing.Image，则可以使用 .NET 方法打印它。可悲的是，执行此操作的软件还需要付款或 GPL。

# asp.net - Response.write 不显示图像

> ID：11579626
> 
> 赞同：0
> 
> 时间：2012-07-20T12:42:55.963
> 
> 标签：asp.net, html

在 asp.net 中使用 Response.Write 编写 html 它不显示图像。我检查了我的图像路径代码并将其简单地放在页面中，它工作正常。为什么在使用 response.write 代码编写时不显示图像。以下是我的图像路径代码

```
<img alt="" src="<%= VirtualPathUtility.ToAbsolute("~/Content/images/txt2.png")%>" border="0"/> 
```

这是 Response.write 代码

```
<% Response.Write(valueHelp); %> 
```

ValueHelp 是一个字符串，其中包含我上面提到的图像代码。

知道为什么它不起作用吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:50:58.237

`<%= %>`将在标记（即代码的 HTML 部分）中使用，而不是在代码隐藏中使用。

我的猜测（没有看到代码）是您实际上是`<%= VirtualPathUtility.ToAbsolute("~/Content/images/txt2.png")%>`作为静态字符串的一部分发送到浏览器。

因此，它不是被服务器拾取并呈现到正确的路径中，而是简单地作为 HTML 的一部分发送到浏览器（浏览器不知道它到底意味着什么，因此它不会显示您期望的图像）。

`valueHelp`在创建字符串时尝试这样的事情

```
valueHelp = "<img alt='' src='" + VirtualPathUtility.ToAbsolute("~/Content/images/txt2.png") + "' border='0'/>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:49:10.823

尝试这个

```
<% Response.Write("<img alt='' src='" +
    VirtualPathUtility.ToAbsolute("~/Content/images/txt2.png") +
 "' border='0'/>" ); %> 
```

# java - Java 更新 SQL 数据库性能

> ID：11579630
> 
> 赞同：2
> 
> 时间：2012-07-20T12:43:08.140
> 
> 标签：java, sql, performance, jdbc

我正在使用 Java GUI 程序来更新 SQlite 数据库。我的 Gui 选项主要是带有开/关值的切换按钮。由于 Gui 的性质，更新数据库的性能需要快速，以便可以将控制权快速返回到 Gui 调用函数。

我有以下代码，每次选择切换按钮时都会运行：

```
public static void updateDCStable(String item, int value)
{
    try {
        long start = System.currentTimeMillis();
        Class.forName("org.sqlite.JDBC");
        String url = DATABASE_FILEPATH; 
        Connection conn = DriverManager.getConnection(url);

        Statement update = conn.createStatement();           
        update.execute("UPDATE DCS "
                + "SET " + item + "='" + value + "';");

        update.close();
        conn.close();

        long time_elapsed = System.currentTimeMillis() - start;
        System.out.println("Changed DCS date item " + item + " to "
                + value + " in " + time_elapsed + "(ms)");
    } catch (SQLException ex) { /* Error handling */
    } catch (ClassNotFoundException ex) { /* Error handling */
    } 
} 
```

我的 SQL 表基本上是具有几列和一行的配置信息，因此该函数获取列和更新值并相应地更新项目。该功能正常工作，它真的很慢......

使用经过的时间，我的平均更新时间约为 550 毫秒左右，最短时间为 294 毫秒，最长为 986 毫秒。有什么方法可以加快这个过程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:46:42.660

如果您使用连接池中的连接会更快。您不必在每次访问数据库时都建立和关闭连接，这会花费很多时间。

Pierre 提到的 PreparedStatements 也会有所帮助，但在数据库作业上花费的大部分时间是建立/释放数据库连接问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T12:46:54.333

使用一个主连接（初始化一次）和一个[PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)：

> SQL 语句被预编译并存储在 PreparedStatement 对象中。然后可以使用该对象多次有效地执行该语句。

```
void updateDCStable(Connection conn,String item, int value) {(...)
PreparedStatement ps = conn.prepareStatement("UPDATE DCS set "+ item +"= ?");
ps.setInt(1,value); 
```

# extjs4 - 如何从响应中加载商店而不在商店中指定网址

> ID：11579632
> 
> 赞同：0
> 
> 时间：2012-07-20T12:43:09.810
> 
> 标签：extjs4

如何从我已经拥有的响应中加载数据以及如何读取到达的响应并使用该响应数据在 extjs 中加载存储。我在这里发表了我的回复。提前致谢。

```
{"preparedSandData":[{"preparedsandId":57,"activeClay":1,"afs":1,"compactability":1,"date":"12-10-2012 12:00:00 AM","deadClay":1,"gcs":1,"loi":1,"moisture":1,"quantity":1,"shatterIndex":1,"shearStrength":1,"shift":"Morning","splittingStrength":1,"temperature":1,"time":"12-10-2012 12:00:00 AM","totalClay":1,"username":"manoj","sampleId":23},{"preparedsandId":58,"activeClay":2,"afs":2,"compactability":2,"date":"12-11-2012 12:00:00 AM","deadClay":2,"gcs":2,"loi":2,"moisture":2,"quantity":2,"shatterIndex":2,"shearStrength":2,"shift":"Morning","splittingStrength":2,"temperature":2,"time":"12-11-2012 12:00:00 AM","totalClay":2,"username":"manoj","sampleId":23},{"preparedsandId":59,"activeClay":3,"afs":3,"compactability":3,"date":"12-12-2012 12:00:00 AM","deadClay":3,"gcs":3,"loi":3,"moisture":3,"quantity":3,"shatterIndex":3,"shearStrength":3,"shift":"Morning","splittingStrength":3,"temperature":3,"time":"12-12-2012 12:00:00 AM","totalClay":3,"username":"manoj","sampleId":23},{"preparedsandId":60,"activeClay":4,"afs":4,"compactability":4,"date":"12-13-2012 12:00:00 AM","deadClay":4,"gcs":4,"loi":4,"moisture":4,"quantity":4,"shatterIndex":4,"shearStrength":4,"shift":"Morning","splittingStrength":4,"temperature":4,"time":"12-13-2012 12:00:00 AM","totalClay":4,"username":"manoj","sampleId":23},{"preparedsandId":61,"activeClay":5,"afs":5,"compactability":5,"date":"12-14-2012 12:00:00 AM","deadClay":5,"gcs":5,"loi":5,"moisture":5,"quantity":5,"shatterIndex":5,"shearStrength":5,"shift":"Morning","splittingStrength":5,"temperature":5,"time":"12-14-2012 12:00:00 AM","totalClay":5,"username":"manoj","sampleId":23},{"preparedsandId":62,"activeClay":6,"afs":6,"compactability":6,"date":"12-15-2012 12:00:00 AM","deadClay":6,"gcs":6,"loi":6,"moisture":6,"quantity":6,"shatterIndex":6,"shearStrength":6,"shift":"Morning","splittingStrength":6,"temperature":6,"time":"12-15-2012 12:00:00 AM","totalClay":6,"username":"manoj","sampleId":23},{"preparedsandId":63,"activeClay":7,"afs":7,"compactability":7,"date":"12-16-2012 12:00:00 AM","deadClay":7,"gcs":7,"loi":7,"moisture":7,"quantity":7,"shatterIndex":7,"shearStrength":7,"shift":"Morning","splittingStrength":7,"temperature":7,"time":"12-16-2012 12:00:00 AM","totalClay":7,"username":"manoj","sampleId":23},{"preparedsandId":64,"activeClay":8,"afs":8,"compactability":8,"date":"12-17-2012 12:00:00 AM","deadClay":8,"gcs":8,"loi":8,"moisture":8,"quantity":8,"shatterIndex":8,"shearStrength":8,"shift":"Morning","splittingStrength":8,"temperature":8,"time":"12-17-2012 12:00:00 AM","totalClay":8,"username":"manoj","sampleId":23},{"preparedsandId":65,"activeClay":9,"afs":9,"compactability":9,"date":"12-18-2012 12:00:00 AM","deadClay":9,"gcs":9,"loi":9,"moisture":9,"quantity":9,"shatterIndex":9,"shearStrength":9,"shift":"Morning","splittingStrength":9,"temperature":9,"time":"12-18-2012 12:00:00 AM","totalClay":9,"username":"manoj","sampleId":23},{"preparedsandId":66,"activeClay":10,"afs":10,"compactability":10,"date":"12-19-2012 12:00:00 AM","deadClay":10,"gcs":10,"loi":10,"moisture":10,"quantity":10,"shatterIndex":10,"shearStrength":10,"shift":"Morning","splittingStrength":10,"temperature":10,"time":"12-19-2012 12:00:00 AM","totalClay":10,"username":"manoj","sampleId":23},{"preparedsandId":67,"activeClay":11,"afs":11,"compactability":11,"date":"12-20-2012 12:00:00 AM","deadClay":11,"gcs":11,"loi":11,"moisture":11,"quantity":11,"shatterIndex":11,"shearStrength":11,"shift":"Morning","splittingStrength":11,"temperature":11,"time":"12-20-2012 12:00:00 AM","totalClay":11,"username":"manoj","sampleId":23},{"preparedsandId":68,"activeClay":12,"afs":12,"compactability":12,"date":"12-21-2012 12:00:00 AM","deadClay":12,"gcs":12,"loi":12,"moisture":12,"quantity":12,"shatterIndex":12,"shearStrength":12,"shift":"Morning","splittingStrength":12,"temperature":12,"time":"12-21-2012 12:00:00 AM","totalClay":12,"username":"manoj","sampleId":23},{"preparedsandId":69,"activeClay":13,"afs":13,"compactability":13,"date":"12-22-2012 12:00:00 AM","deadClay":13,"gcs":13,"loi":13,"moisture":13,"quantity":13,"shatterIndex":13,"shearStrength":13,"shift":"Morning","splittingStrength":13,"temperature":13,"time":"12-22-2012 12:00:00 AM","totalClay":13,"username":"manoj","sampleId":23},{"preparedsandId":70,"activeClay":14,"afs":14,"compactability":14,"date":"12-23-2012 12:00:00 AM","deadClay":14,"gcs":14,"loi":14,"moisture":14,"quantity":14,"shatterIndex":14,"shearStrength":14,"shift":"Morning","splittingStrength":14,"temperature":14,"time":"12-23-2012 12:00:00 AM","totalClay":14,"username":"manoj","sampleId":23},{"preparedsandId":71,"activeClay":1,"afs":1,"compactability":1,"date":"12-10-2012 12:00:00 AM","deadClay":1,"gcs":1,"loi":1,"moisture":1,"quantity":1,"shatterIndex":1,"shearStrength":1,"shift":"Morning","splittingStrength":1,"temperature":1,"time":"12-10-2012 12:00:00 AM","totalClay":1,"username":"manoj","sampleId":0},{"preparedsandId":72,"activeClay":2,"afs":2,"compactability":2,"date":"12-11-2012 12:00:00 AM","deadClay":2,"gcs":2,"loi":2,"moisture":2,"quantity":2,"shatterIndex":2,"shearStrength":2,"shift":"Morning","splittingStrength":2,"temperature":2,"time":"12-11-2012 12:00:00 AM","totalClay":2,"username":"manoj","sampleId":0},{"preparedsandId":73,"activeClay":3,"afs":3,"compactability":3,"date":"12-12-2012 12:00:00 AM","deadClay":3,"gcs":3,"loi":3,"moisture":3,"quantity":3,"shatterIndex":3,"shearStrength":3,"shift":"Morning","splittingStrength":3,"temperature":3,"time":"12-12-2012 12:00:00 AM","totalClay":3,"username":"manoj","sampleId":0},{"preparedsandId":74,"activeClay":4,"afs":4,"compactability":4,"date":"12-13-2012 12:00:00 AM","deadClay":4,"gcs":4,"loi":4,"moisture":4,"quantity":4,"shatterIndex":4,"shearStrength":4,"shift":"Morning","splittingStrength":4,"temperature":4,"time":"12-13-2012 12:00:00 AM","totalClay":4,"username":"manoj","sampleId":0},{"preparedsandId":75,"activeClay":5,"afs":5,"compactability":5,"date":"12-14-2012 12:00:00 AM","deadClay":5,"gcs":5,"loi":5,"moisture":5,"quantity":5,"shatterIndex":5,"shearStrength":5,"shift":"Morning","splittingStrength":5,"temperature":5,"time":"12-14-2012 12:00:00 AM","totalClay":5,"username":"manoj","sampleId":0},{"preparedsandId":76,"activeClay":6,"afs":6,"compactability":6,"date":"12-15-2012 12:00:00 AM","deadClay":6,"gcs":6,"loi":6,"moisture":6,"quantity":6,"shatterIndex":6,"shearStrength":6,"shift":"Morning","splittingStrength":6,"temperature":6,"time":"12-15-2012 12:00:00 AM","totalClay":6,"username":"manoj","sampleId":0},{"preparedsandId":77,"activeClay":7,"afs":7,"compactability":7,"date":"12-16-2012 12:00:00 AM","deadClay":7,"gcs":7,"loi":7,"moisture":7,"quantity":7,"shatterIndex":7,"shearStrength":7,"shift":"Morning","splittingStrength":7,"temperature":7,"time":"12-16-2012 12:00:00 AM","totalClay":7,"username":"manoj","sampleId":0},{"preparedsandId":78,"activeClay":8,"afs":8,"compactability":8,"date":"12-17-2012 12:00:00 AM","deadClay":8,"gcs":8,"loi":8,"moisture":8,"quantity":8,"shatterIndex":8,"shearStrength":8,"shift":"Morning","splittingStrength":8,"temperature":8,"time":"12-17-2012 12:00:00 AM","totalClay":8,"username":"manoj","sampleId":0},{"preparedsandId":79,"activeClay":9,"afs":9,"compactability":9,"date":"12-18-2012 12:00:00 AM","deadClay":9,"gcs":9,"loi":9,"moisture":9,"quantity":9,"shatterIndex":9,"shearStrength":9,"shift":"Morning","splittingStrength":9,"temperature":9,"time":"12-18-2012 12:00:00 AM","totalClay":9,"username":"manoj","sampleId":0},{"preparedsandId":80,"activeClay":10,"afs":10,"compactability":10,"date":"12-19-2012 12:00:00 AM","deadClay":10,"gcs":10,"loi":10,"moisture":10,"quantity":10,"shatterIndex":10,"shearStrength":10,"shift":"Morning","splittingStrength":10,"temperature":10,"time":"12-19-2012 12:00:00 AM","totalClay":10,"username":"manoj","sampleId":0},{"preparedsandId":81,"activeClay":11,"afs":11,"compactability":11,"date":"12-20-2012 12:00:00 AM","deadClay":11,"gcs":11,"loi":11,"moisture":11,"quantity":11,"shatterIndex":11,"shearStrength":11,"shift":"Morning","splittingStrength":11,"temperature":11,"time":"12-20-2012 12:00:00 AM","totalClay":11,"username":"manoj","sampleId":0},{"preparedsandId":82,"activeClay":12,"afs":12,"compactability":12,"date":"12-21-2012 12:00:00 AM","deadClay":12,"gcs":12,"loi":12,"moisture":12,"quantity":12,"shatterIndex":12,"shearStrength":12,"shift":"Morning","splittingStrength":12,"temperature":12,"time":"12-21-2012 12:00:00 AM","totalClay":12,"username":"manoj","sampleId":0},{"preparedsandId":83,"activeClay":13,"afs":13,"compactability":13,"date":"12-22-2012 12:00:00 AM","deadClay":13,"gcs":13,"loi":13,"moisture":13,"quantity":13,"shatterIndex":13,"shearStrength":13,"shift":"Morning","splittingStrength":13,"temperature":13,"time":"12-22-2012 12:00:00 AM","totalClay":13,"username":"manoj","sampleId":0},{"preparedsandId":84,"activeClay":14,"afs":14,"compactability":14,"date":"12-23-2012 12:00:00 AM","deadClay":14,"gcs":14,"loi":14,"moisture":14,"quantity":14,"shatterIndex":14,"shearStrength":14,"shift":"Morning","splittingStrength":14,"temperature":14,"time":"12-23-2012 12:00:00 AM","totalClay":14,"username":"manoj","sampleId":0}],"success":true} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:14:40.287

```
//Result being your response from the request
//you need to decode it
var response = Ext.decode(result.responseText);
var records = [];
Ext.Array.each(response.preparedSandData, function(recordData) {
    //each record needs to  be instantiated to a model  
    var record = Ext.ModelManager.create(recordData, '*ModelClass*');
    records.push(record);
});
//load all records at once
store.loadRecords(records); 
```

# jquery - 根据下拉值显示/隐藏表单元素

> ID：11579633
> 
> 赞同：1
> 
> 时间：2012-07-20T12:43:14.957
> 
> 标签：jquery

我有一个要求，我有一个表格，其中有些字段是强制性的，有些不是。我的表单中有一个下拉菜单，首先有两个条件是“显示所有字段”，另一个是“仅显示强制性字段”现在我想要做的是，当用户选择“显示所有字段”时，会显示所有字段，而当用户选择“仅显示必填字段”时，则只会显示必填字段。

```
<form:form method="POST" action="addCountry.htm" commandName="countryForm" id="countryForm">
    <table>

    <tr>
        <td>Select fields:</td>
        <td align="center">
            <select name="fields">
                <option value="non mandatory">show all fields</option>
                <option value="mandatory">show only mandatory fields</option>
            </select>
        </td>
    </tr>

        <tr>
            <td>Country Name :</td>
            <td><form:input path="countryName"/>
            </td>
        </tr>
        <tr>
            <td>Country ISD Code  :</td>
            <td><form:textarea path="countryISDCode" />
            </td>
        </tr>
        <tr>
            <td>Nationality :</td>
            <td><form:textarea path="nationality"/></td>
        </tr>

        <tr>
            <td colspan="3"><input type="submit" value="submit"/></td>
        </tr>
    </table>
</form:form> 
```

以这个表格为例，其中国家名称和国家 ISD 代码是强制性的，国籍不是强制性的。现在在下拉选择的基础上，我想显示这些字段。

问候布拉杰什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:51:36.533

您必须在您检查索引或根据该索引/值检查值时编写下拉更改事件，您将执行您想要的操作。意味着您可以根据您的要求显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:52:15.657

`non-mandatory`为每个非必填字段分配一个类。然后将事件处理程序附加到按钮以切换是否显示非必填字段：

```
$('#myButton').on('click', function() {
    $('.non-mandatory').toggle();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T12:53:58.753

你想只隐藏输入元素/控件还是整个表格行？在任何一种情况下，您都可以将 css 类应用于相应的 DOM 元素，然后绑定下拉列表的 onchange 事件以根据所选值处理隐藏和显示。

因此，如果您想隐藏整个表格行，对于每个 tr，您可以应用“强制”和“非强制”的 CSS 类，然后在您的 javascript 中，您可以执行以下操作：

```
$('#myDropdownlist').con('change', function() {
    if ($(this).val() === 'mandatory') {
        $('.nonMandatory').hide();
        $('.mandatory').show();
    } else {
        $('.nonMandatory').show();
        $('.mandatory').hide();            
    }
}); 
```

希望有帮助

# android - 在android中使用BaseActivity的不同活动中的通用标题

> ID：11579635
> 
> 赞同：18
> 
> 时间：2012-07-20T12:43:19.323
> 
> 标签：android, android-layout, extends

我想编写一次代码并在不同的活动中使用。我为此创建了一个`Base Activity class`. 不同活动中所有布局的标题也是相同的。我在`<include layout >`标签的帮助下做到了这一点。

现在问题是我的`BaseActivity`代码没有运行。我第一次尝试这个，对此并没有太多想法。

1.) BaseActivity 代码如下：

```
package com.waheguru.app;

import android.R.integer;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

import android.view.View;
import android.view.View.OnClickListener;

import android.widget.Button;
import android.widget.Toast;

public abstract class BaseActivityMenu extends Activity {
    //action id
    private static final int ID_UP     = 1;
    private static final int ID_DOWN   = 2;
    private static final int ID_SEARCH = 3;
    private static final int ID_INFO   = 4;
    private static final int ID_ERASE  = 5; 
    private static final int ID_OK     = 6;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.header);

        ActionItem nextItem     = new ActionItem(ID_DOWN, "Book", getResources().getDrawable(R.drawable.menu_down_arrow));
        ActionItem prevItem     = new ActionItem(ID_UP, "Bookmark", getResources().getDrawable(R.drawable.menu_up_arrow));
        ActionItem searchItem   = new ActionItem(ID_SEARCH, "Find", getResources().getDrawable(R.drawable.menu_search));
        ActionItem infoItem     = new ActionItem(ID_INFO, "Info", getResources().getDrawable(R.drawable.menu_info));
        ActionItem eraseItem    = new ActionItem(ID_ERASE, "Clear", getResources().getDrawable(R.drawable.menu_eraser));
        ActionItem okItem       = new ActionItem(ID_OK, "OK", getResources().getDrawable(R.drawable.menu_ok));

        //use setSticky(true) to disable QuickAction dialog being dismissed after an item is clicked
        prevItem.setSticky(true);
        nextItem.setSticky(true);

        //create QuickAction. Use QuickAction.VERTICAL or QuickAction.HORIZONTAL param to define layout 
        //orientation
        final QuickAction quickAction = new QuickAction(this, QuickAction.VERTICAL);

        //add action items into QuickAction
        quickAction.addActionItem(nextItem);
        quickAction.addActionItem(prevItem);
        quickAction.addActionItem(searchItem);
        quickAction.addActionItem(infoItem);
        quickAction.addActionItem(eraseItem);
        quickAction.addActionItem(okItem);

        //Set listener for action item clicked
        quickAction.setOnActionItemClickListener(new QuickAction.OnActionItemClickListener() {          
            public void onItemClick(QuickAction source, int pos, int actionId) {                
                ActionItem actionItem = quickAction.getActionItem(pos);

                //here we can filter which action item was clicked with pos or actionId parameter
                if (actionId == ID_SEARCH) {
                    Toast.makeText(getApplicationContext(), "Let's do some search action", Toast.LENGTH_SHORT).show();
                } else if (actionId == ID_INFO) {
                    Toast.makeText(getApplicationContext(), "I have no info this time", Toast.LENGTH_SHORT).show();
                } else {
                    Toast.makeText(getApplicationContext(), actionItem.getTitle() + " selected", Toast.LENGTH_SHORT).show();
                }
            }
        });

        //set listnener for on dismiss event, this listener will be called only if QuickAction dialog was dismissed
        //by clicking the area outside the dialog.
        quickAction.setOnDismissListener(new QuickAction.OnDismissListener() {          
            public void onDismiss() {
                Toast.makeText(getApplicationContext(), "Dismissed", Toast.LENGTH_SHORT).show();
            }
        });
        Button books=(Button)findViewById(R.id.book);
        books.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Intent intent=new Intent(ExampleActivity.this,List_of_books.class);
                startActivityForResult(intent, 0);
            }
        });
        //show on btn1
        Button btn1 = (Button) this.findViewById(R.id.menu);
        btn1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                quickAction.show(v);
            }
        });
    }
} 
```

2.) Activity 扩展了 Base Activity

```
package com.waheguru.app;

import android.app.Activity;
import android.os.Bundle;

public class ABCActivity extends BaseActivityMenu  {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home);
    }
} 
```

因此，任何人都可以在我做错了什么的地方帮助我。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-20T12:55:35.443

为此，您必须创建一个 header.xml，它将包含在您的活动的每个布局中，如下所示

header.xml

```
<RelativeLayout>
  <TextView android:id="@+id/txtHeading"
      .... />
</RelativeLayout> 
```

activity_main.xml

```
<RelativeLayout>
  <!-- include your header here -->
  <include layout="@layout/header"
     ... />

  <!-- Rest of your views -->

</RelativeLayout> 
```

基本活动

```
abstract class BaseActivity extends Activity {
  protected TextView txtHeading;
  public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
  }

  protected void setHeading(int resId) {
     if(txtHeading == null)
     txtHeading = findViewById(R.id.txtHeading);
     if(txtHeading != null)
       txtHeading.setText(resId);
  }
} 
```

主要活动

```
class MainActivity extends BaseActivity {
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
      setHeading(R.string.heading_main);
   }
} 
```

您可以在 BaseActivity 或 BaseListActivity 中放置任意数量的视图并管理常见的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T12:59:46.260

如果您正在使用活动进行继承，并且您的基本活动调用 setContentView，然后真正的活动调用 setContentView，最后一次调用将设置活动的布局。因此，如果您正在寻找所有活动都具有相同标题组件的解决方案，那么有两种方法。

1.  对于每个活动布局 xml，您都包含该组件

2.  - 你为 baseActivity 创建函数，例如 setContent(int layout_id) - 你总是用你的活动来调用它。-Baseactivity 使用标题膨胀根视图并将 layout_id 视图膨胀到该布局。- 然后使用该组件调用实际的 setContentView。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T12:59:53.657

我认为您应该使用 来实现它`Fragment`，这可能会对您有所帮助。

1 - 在 中`main.xml`，添加：

```
<fragment
    android:id="@+id/header"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    class="com.package.name.HeaderPanel" />

//remaining is same 
```

2 -`BaseActivity`其中扩展`FragmentActivity`：

```
public class BaseActivityMenu extends FragmentActivity {

    private static final String TAG = Default.class.getName() + " - ";
    private int mResLayoutId;

    public void onCreate(Bundle savedInstanceState, int resLayout){
        super.onCreate(savedInstanceState);
        setContentView(resLayout);
        mResLayoutId = resLayout;
        switch(mResLayoutId){
            // here change with your xml file
            case R.layout.home:
                // set here common control like header textview
                break;
            default:
                break;
        }
    }
} 
```

3 - 现在，您可以`Activity`使用`BaseActivity`. 这将允许`Activity`扩展`FragmentActivity`：

```
public class ABCActivity extends BaseActivityMenu {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState, R.layout.home);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T12:48:26.560

在代码中，您的基本活动被调用`ExampleActivity`，但在您的子类中，您正在扩展`BaseActivityMenu`。不知道它来自哪里。

也许改变：

```
public class ABCActivity extends BaseActivityMenu 
```

对此：

```
public class ABCActivity extends ExampleActivity 
```

此外，我建议您将基本活动 ( `ExampleActivity`)定义为**抽象**类。例如：

```
public abstract class ExampleActivity extends Activity 
```

这样做不会将您的基类定义为具体的，并且会在出现问题时更容易调试。

# linux - 从数据表中为 NIC 编写驱动程序

> ID：11579638
> 
> 赞同：1
> 
> 时间：2012-07-20T12:43:28.643
> 
> 标签：linux, driver, broadcom

我有兴趣为 Linux 的 Broadcom BCM4330 芯片编写驱动程序，但是它的数据表没有提供有关 VENDOR_ID 或 DEVICE_ID 的任何信息，也没有提供有关芯片物理地址的任何技术信息。

一个人会怎么写呢？

# asp.net-mvc-3 - MVC3 通过调用 Ajax.ActionLink 嵌套部分视图

> ID：11579642
> 
> 赞同：1
> 
> 时间：2012-07-20T12:43:42.663
> 
> 标签：asp.net-mvc-3, razor, asp.net-ajax, partial-views

我知道前面两个关于嵌套部分视图的问题，但解决方案不适用于我的设计（这可能不是最好的，但我不确定如何调整它）。

**背景**：

我收集用户的问卷回复，并将它们作为 xml 文件存储在 sql server 上。

我有一个局部视图，它加载一个包含给定用户的所有响应的表，这个局部视图用响应日期、xml 响应文档的链接、调查表名称、xml 调查表文档的链接（调查表信息来自一个不同的表）和一个 Ajax ActionLink，它重定向到解析两个相关 xml 文档以在第二个局部视图中打印出问题和答案列表（即将响应可视化为人类可读）的操作。

第一个部分视图在表格下方包含一个 div，我希望使用第二个部分视图填充 Ajax.ActionLink 的 onclick。

**问题**：

答案正确呈现，但是部分视图被加载到一个全新的页面中，没有任何样式。

这个嵌套问题的其他解决方案使用 RenderPartial() 但是我使用 return PartialView()

**代码**：

第一部分视图：

```
 <table>
        <thead>
         <tr><th>headers with other info</th>
             <th>Display(/th>
         <tr>
        </thead>
        <tbody>
         <tr><td>cells with other info</td>
             <td>@Ajax.ActionLink("View", "DisplayResponse","HealthStatus", new { respID = item.UniqueID,qVersion=item.QuestionnaireVersion, qname = item.QuestionnaireName }, new AjaxOptions { UpdateTargetId = "responseDisp" })</td>
        </tbody> 
       </table>
<div id="responseDisp"></div>    <--- **This is the div I wish to populate, does anyone know why it's not working?** 
```

DisplayResponse Action（没有解析 xml 文档的逻辑）

```
 public ActionResult DisplayResponse(Guid respID, int qVersion, String qname) {
        var allResponses = ZData.Responses;
        var response = (from r in allResponses
                        where r.UniqueID == respID
                        select r
                            ).First();
        //geting an XML questionnaire document
        var questionnaireDetails = ZodiacData.Questionnaires;
        var questionnaire = (from q in questionnaireDetails
                             where q.Name == qname && q.Version == qVersion
                             select q
                            ).First();
        //creating XMLDocument to read the questionnaire
        XmlDocument xqdoc = new XmlDocument();
        xqdoc.LoadXml(questionnaire.Xml);
        XmlElement qroot = xqdoc.DocumentElement;
        ViewBag.qroot = qroot;
        XmlDocument xrdoc = new XmlDocument();
        xrdoc.LoadXml(response.Raw);
        XmlElement rroot = xrdoc.DocumentElement;
        ViewBag.rroot = rroot;

        return PartialView("_PrintedResponse");
    } 
```

如果有任何帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:09:49.850

在 MVC3 中，`@AJax.`助手渲染常规`form`和`a`带有一些额外`data-`属性的标签。为了使魔术起作用，需要一些 Javascript，它将使用此生成`data-`的属性来进行必要的 jQuery ajax 调用。

这些 js 函数存在于，`jquery.unobtrusive-ajax.js`所以将这一行添加到您的布局或视图中，它应该可以工作：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" 
        type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:31:42.463

首先，如上所述，您必须具有对 jquery.unobtrusive-ajax.js 文件的引用，因为这将为您正确“连接”一些东西。

该答案也是对您对如何将模型传递给视图的问题的评论的回应。通过将 ViewBag 用于您的模型，您实际上使事情变得更加复杂。

通过为您的模型使用 ViewBag，您将更难发现/修复/解决拼写错误以及 Razor 助手的强大功能。ViewBag 是一个动态对象，没有编译时类型检查。你也不需要转换你的对象（更少的代码）。

首选（和最佳实践）是像这样连接起来：

1）您的控制器包含传递给 ViewModels 的 ViewModels（强类型）

控制器

```
 public ActionResult Something() {
        return View();
    }

    public ActionResult UserView() {
        UserViewModel mdoel = new UserViewModel {
            Email = "me@somewherecool.com",
            FirstName = "Your",
            SStatuses = new List<SStatus>{
                new SStatus {
                    ID = 0
                }
            }
        };
        return PartialView("_SomethingPartial", mdoel);
    } 
```

**索引（“某物”视图）**

```
@{
    ViewBag.Title = "Something";
}

<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
<h2>Something</h2>
@Ajax.ActionLink("Ajax Click", "UserView", new AjaxOptions { UpdateTargetId = "MyDivContainer", InsertionMode = InsertionMode.Replace })
<div id="MyDivContainer">
<!-- my content should be here -->
</div> 
```

**局部视图**

```
@model StackModels.UserViewModel
<div class="par">
    @Html.LabelFor(m => m.FirstName)
    <div class="field">
        @Html.TextBoxFor(m => m.FirstName)
        @Html.ValidationMessageFor(m => m.FirstName)
    </div>
</div> 
```

# amazon-ec2 - 创建 Amazon EC2 Linux 实例的映像会导致停机吗？

> ID：11579643
> 
> 赞同：3
> 
> 时间：2012-07-20T12:43:46.370
> 
> 标签：amazon-ec2, amazon-web-services

创建 Amazon EC2 Linux 实例的映像会导致停机吗？我可以对正在运行的服务器进行映像吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-21T02:44:14.827

已经正确回答了，但我想添加一些警告：

1.  *--no-reboot，不保证*：当您使用 EBS 支持的根设备创建 AMI 映像时，您可以选择`--no-reboot`，但 AWS 会对此发出警告。它不保证文件系统的完整性。如果它真的很忙，并且正在进行大量的 RW 操作，您可能会得到一个损坏的图像。

2.  *实例存储，无需重启*：创建一个实例存储支持的镜像我从来不需要重启。只需三个简单的步骤——打包镜像、上传到 S3 并注册镜像，整个过程无需重新启动。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-21T02:14:00.480

我认为**No Reboot**应该阻止映像创建重新启动。如果您是 api 用户，它还提供[参数**--no-reboot**来执行此操作](http://docs.amazonwebservices.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-CreateImage.html)。

![在此处输入图像描述](../Images/a154873bb1df67ab14fee50a008cd5cf.png)

# asp.net - XSLT - html 底部的未映射字段

> ID：11579644
> 
> 赞同：1
> 
> 时间：2012-07-20T12:43:50.513
> 
> 标签：asp.net, xslt

我有一个 XML 文档，它引用了用于 HTML 输出的 XSL 文件。

在 XSL 文件中，我`"<xsl:value-of select="fieldname" />"`在我的 XML 文件中放入了引用项目的各种标签。

但是对于我**没有映射**的项目，它们只是在 html 页面底部显示为一个长字符串？

我是否真的需要省略所有未在 XSL 文件中引用的 xml 数据项以使它们消失，或者我的 XSL 文件中是否存在解决此问题的技巧或错误？

j

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:55:36.010

**这是 XSLT 处理模型的结果**。

如果一个节点应该被处理并且 XSLT 代码中没有模板匹配它，XSLT 使用它的*内置模板。匹配文本节点的内置模板复制它。

**解决方案**：

添加这个覆盖文本节点的 XSLT 内置模板的模板：

```
<xsl:template match="text()"/> 
```

这会导致代码中没有被更具体的模板匹配的任何文本节点（并且没有用`xsl:copy-of`or复制`xsl:value-of`）被忽略（“删除”）。

# android - Android - 从多点裁剪图像

> ID：11579645
> 
> 赞同：3
> 
> 时间：2012-07-20T12:43:52.023
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我需要裁剪一个位图，但不是有一个**矩形**裁剪图像（我成功地做到了），我需要它是由坐标定义的 **任何形式。**

我正在关注这个线程的答案：从[Bitmap 中剪切一个多点多边形并将其放置在透明度上](https://stackoverflow.com/questions/8993292/cutting-a-multipoint-ploygon-out-of-bitmap-and-placing-it-on-transparency)，并尝试实现它，但不幸的是它没有剪切图像。

我按照描述做了，但似乎某处有错误。图像以矩形方式绘制。我错过了什么吗？

```
Bitmap originalBitmap=BitmapFactory.decodeResource(getResources(), R.drawable.test_image);
// Image cropped
Bitmap croppedBitmap=Bitmap.createBitmap(originalBitmap, 10, 10, 200, 200);
Canvas canvas=new Canvas(croppedBitmap);

// Create a path
Path path=new Path();
path.setFillType(FillType.INVERSE_EVEN_ODD);
path.moveTo(0, 0);
path.moveTo(0, 100);
path.moveTo(100, 0);
path.moveTo(0, 0);

// Paint with Xfermode
Paint paint=new Paint();
paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));

// Draw the path
canvas.drawPath(path, paint);

imageView.setImageBitmap(croppedBitmap); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T08:02:21.807

我非常接近解决方案。这里是：

```
compositeImageView = (ImageView) findViewById(R.id.imageView);

Bitmap bitmap1=BitmapFactory.decodeResource(getResources(), R.drawable.batman_ad);
Bitmap bitmap2=BitmapFactory.decodeResource(getResources(), R.drawable.logo);

Bitmap resultingImage=Bitmap.createBitmap(320, 480, bitmap1.getConfig());

Canvas canvas = new Canvas(resultingImage);

Paint paint = new Paint();
paint.setAntiAlias(true);
Path path=new Path();
path.lineTo(150, 0);
path.lineTo(230, 120);
path.lineTo(70, 120);
path.lineTo(150, 0);

canvas.drawPath(path, paint);

paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
canvas.drawBitmap(bitmap2, 0, 0, paint);

compositeImageView.setImageBitmap(resultingImage); 
```

# ios - UISearchBar 与 UISearchDisplayController 动画外部屏幕

> ID：11579646
> 
> 赞同：2
> 
> 时间：2012-07-20T12:43:53.343
> 
> 标签：ios, ipad, uisearchbar, uisearchdisplaycontroller

我有标准的 iPad 视图控制器，顶部有一个自定义导航栏。在 xib 文件中，我添加了一个与视图右边缘对齐的 UISearchBar。搜索栏的宽度为 320 像素。我像这样初始化一个搜索显示控制器：

```
// Search display controller
self.mySearchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:_searchBar 
                                                                                contentsController:self];
_mySearchDisplayController.delegate = self;
_mySearchDisplayController.searchResultsDataSource = self;
_mySearchDisplayController.searchResultsDelegate = self; 
```

问题是当我按下搜索栏时，栏会调整为整个视图的全宽，但保持其 x 位置。这意味着它延伸到屏幕之外。我猜这与滑入搜索栏旁边的“取消”按钮有关。如果我将搜索栏放在屏幕的最左侧，它会动画到屏幕的整个宽度，并且可以看到取消按钮。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:46:03.090

您可以`UISearchBar`在`searchDisplayControllerWillBeginSearch`方法中为您的框架设置动画以纠正其位置，如下所示：

```
- (void)searchDisplayControllerWillBeginSearch:(UISearchDisplayController *)controller
{
    // animate the search bar to the left ie. x=0
    [UIView animateWithDuration:0.25f animations:^{
        CGRect frame = controller.searchBar.frame;
        frame.origin.x = 0;
        controller.searchBar.frame = frame;
    }];
    // remove all toolbar items if you need to
    [self.toolbar setItems:nil animated:YES];
} 
```

并在完成搜索后再次对其进行动画处理：

```
- (void)searchDisplayControllerDidEndSearch:(UISearchDisplayController *)controller
{
    // animate search bar back to its previous position and size
    // in my case it was x=55, y=1
    // and reduce its width by the amount moved, again 55px
    [UIView animateWithDuration:0.25f 
                          delay:0.0f
                    // the UIViewAnimationOptionLayoutSubviews is IMPORTANT,
                    // otherwise you get no animation
                    // but some kind of snap-back movement 
                        options:UIViewAnimationOptionLayoutSubviews 
                     animations:^{
                         CGRect frame = self.toolbar.frame;
                         frame.origin.y = 1;
                         frame.origin.x = 55;
                         frame.size.width -= 55;
                         controller.searchBar.frame = frame;
                     } 
                     completion:^(BOOL finished){
                         // when finished, insert any tool bar items you had
                         [self.toolbar setItems:[NSArray arrayWithObjects: /* put your bar button items here */] animated:YES];
                     }];
} 
```

我已经回答了一个类似的问题，你可以[在这里查看](https://stackoverflow.com/a/12394703/719656)，我也放了一些图片。

您唯一需要做的就是为 iPad 调整代码。

# c# - 不应该出现的 SQLite 语法错误

> ID：11579648
> 
> 赞同：0
> 
> 时间：2012-07-20T12:44:05.270
> 
> 标签：c#, sqlite, xamarin.ios, syntax-error

在单点触控应用程序中，我使用此代码插入一个值：

```
string sql = "insert or ignore into [translation] values (\"7d8281e2-3f0d-4f51-a6bd-bf91af90dc4a\",\"113a1275-e7a0-452d-a1e1-9043c1139584\",\"1\",\"Gömlek\")";
var cmd = _repository.Execute(sql); 
```

其中存储库是扩展 SQLiteConnection 的类的实例。这个确切的语句在 RazorSql 中工作得很好。但是当我用我的代码执行它时，它给了我：

```
SQLite.SQLiteException: near ""Gömlek"": syntax error
  at SQLite.SQLite3.Prepare2 (IntPtr db, System.String query) [0x0001b] in /Users/serhat/Projects/MyApp.Mobile/trunk/MyApp.Mobile.iOSApp/Database/SQLite.cs:1564
  at SQLite.SQLiteCommand.Prepare () [0x00000] in /Users/serhat/Projects/MyApp.Mobile/trunk/MyApp.Mobile.iOSApp/Database/SQLite.cs:1000
  at SQLite.SQLiteCommand.ExecuteNonQuery () [0x00022] in /Users/serhat/Projects/MyApp.Mobile/trunk/MyApp.Mobile.iOSApp/Database/SQLite.cs:903
  at SQLite.SQLiteConnection.Execute (System.String query, System.Object[] args) [0x00040] in /Users/serhat/Projects/MyApp.Mobile/trunk/MyApp.Mobile.iOSApp/Database/SQLite.cs:299
  at MyApp.Mobile.iOSApp.LevelImporter.ImportCsv (Int32 level) [0x000f6] in /Users/serhat/Projects/MyApp.Mobile/trunk/MyApp.Mobile.iOSApp/Service/LevelImporter.cs:117
  at MyApp.Mobile.iOSApp.LevelImporter.DownloadLevel (Int32 level) [0x0002a] in /Users/serhat/Projects/MyApp.Mobile/trunk/MyApp.Mobile.iOSApp/Service/LevelImporter.cs:61
  at MyApp.Mobile.iOSApp.LevelImporter+<StartDownloading>c__AnonStorey12.<>m__2C (System.Object ) [0x00000] in /Users/serhat/Projects/MyApp.Mobile/trunk/MyApp.Mobile.iOSApp/Service/LevelImporter.cs:49 
```

并且异常实例不包含其他信息。我错过了什么？

编辑：我认为这与字母“ö”有关。当我用“o”替换它时，查询工作正常。如何使它与 unicode 字符一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:04:47.243

参数化查询解决了这个问题。

```
insert or ignore into [tablename] values (?,?,?,?,?) 
```

# python - Python 阻止 os.getcwd() 在 Windows 上使用 MKS shell 给出小写结果

> ID：11579652
> 
> 赞同：1
> 
> 时间：2012-07-20T12:44:18.877
> 
> 标签：python, mks

在 Windows 上，如果我使用 MKS 工具包外壳，`os.getcwd()`函数以小写形式返回值。但是在使用 windows cmd 时，它返回了确切的路径。

在 Python 中是否可以通过任何方式`os.getcwd()`返回确切的路径（在 Windows 上不转换为小写）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:47:52.483

您确定这种行为吗？它没有记录，似乎违反直觉，而且我无法重现它（在 Windows 7 上使用 Python 2.7.2）：

```
>>> import os
>>> print os.getcwd()
C:\Users\foofoofoo 
```

注意开头的大写字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:16:40.263

在启动 Python 并使用 os.getcwd() 之前，您可能在控制台中使用了“cd c:\your_path”。这个'c'是低还是高很重要。

# php - 在导航菜单中添加一个类

> ID：11579660
> 
> 赞同：4
> 
> 时间：2012-07-20T12:45:04.277
> 
> 标签：php, javascript, jquery

考虑到这种情况，我有以下菜单：

```
<ul>
<li><a href="index.php">Index</a></li>
<li><a href="about.php">About</a></li>
<li><a href="test.php">Test</a><li>
</ul 
```

菜单位于 header.php 中。对于每个页面（索引、关于、测试），我都有 index.php、about.php 和 test.php，所有这些文件都包含 header.php！

当我们在不同的页面上时，我需要向 li 添加一个类。所以如果我们在about.php上，应该在第二个li上添加类。

有什么办法可以处理 jQuery，或者有什么方法可以处理这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T12:51:11.603

```
<ul>
<li><a href="index.php" <?php if($_SERVER['PHP_SELF']=="/index.php") echo 'class="someclass"'; ?> >Index</a></li>
<li><a href="about.php" <?php if($_SERVER['PHP_SELF']=="/about.php") echo 'class="someclass"'; ?> >About</a></li>
<li><a href="test.php" <?php if($_SERVER['PHP_SELF']=="/test.php") echo 'class="someclass"'; ?> >Test</a><li>
</ul> 
```

这可能不是最好的方法，但它可以在服务器端完成任务。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T12:53:08.707

我在我的一个静态 HTML 网站上使用了类似的东西，您可以对其进行调整：

```
<div id="navigation">

                <?php $currentPath = $_SERVER['REQUEST_URI']; ?>
                <?php $currentClass = ' class="current"'; ?>

                <ul id="nav">
                    <li<?php if( $currentPath == "/" ) { echo $currentClass; } ?>><a href="/">Home</a></li>
                    <li<?php if( $currentPath == "/market-challenge/" ) { echo $currentClass; } ?>><a href="/market-challenge/">Market <br />Challenge</a></li>
                    <li<?php if( $currentPath == "/environmental-benefits/" ) { echo $currentClass; } ?>><a href="/environmental-benefits/">Environmental <br />Benefits</a></li>
                    <li<?php if( $currentPath == "/technology/" ) { echo $currentClass; } ?>><a href="/technology/">Technology</a></li>
                    <li<?php if( $currentPath == "/contact/" ) { echo $currentClass; } ?>><a href="/contact/">Contact</a></li>
                </ul>

            </div> 
```

享受！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T12:49:38.167

为每个 li 标签创建唯一的 id，如果使用 jquery .attr 函数，则单击链接时更改类

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T12:55:12.807

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
      jQuery('.nav li').each(function() {
      var href = jQuery(this).find('a').attr('href');
      if (href === window.location.pathname) {
      jQuery(this).addClass('active');
    }
  });

});  
</script> 
```

将“.nav li”替换为更适合您的 DOM 结构的内容。例如，如果您的包装器 div 有一类菜单，请执行以下操作：`jQuery('.menu li')`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-20T13:04:38.123

添加一个存储当前页面的会话变量（在包含头文件之前）。检查头文件中的这个值并分配类。

```
$_SESSION['currentPage'] = 'index';
$_SESSION['currentPage'] = 'about';
$_SESSION['currentPage'] = 'test'; 
```

在标题中，

```
<ul>
<li><a href="index.php" <?php if($_SESSION['currentPage']=="index") echo 'class="selected"' ?>>Index</a></li>
<li><a href="about.php" <?php if($_SESSION['currentPage']=="about") echo 'class="selected"' ?>>About</a></li>
<li><a href="test.php" <?php if($_SESSION['currentPage']=="test") echo 'class="selected"' ?>>Test</a><li>
</ul> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-20T13:07:36.620

在我看来，使用简写 if for 更简洁的代码。

```
<?php $self = $_SERVER['PHP_SELF']; ?>
<ul>
    <li><a href="index.php" <?php echo ($self == "/index.php" ? 'class="selected"' : ''); ?>>Index</a></li>
    <li><a href="about.php" <?php echo ($self == "/about.php" ? 'class="selected"' : ''); ?>>About</a></li>
    <li><a href="test.php" <?php echo ($self == "/test.php" ? 'class="selected"' : ''); ?>>Test</a></li>
</ul> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-20T13:54:09.187

对于上述问题，我已经使用 jQuery 完成了代码箱的解决方案。

**演示：** [http ://codebins.com/bin/4ldqpa4](http://codebins.com/bin/4ldqpa4)

在这里，我提到了执行上述解决方案的步骤。

1) 在 header 标签中包含最新的 jQuery.js 和 querystring-0.9.0.js javascript 文件。

2）**HTML**

```
<div id="panel">
  <ul class="menu">
    <li>
      <a href="#?page=0">
        Index
      </a>
    </li>
    <li>
      <a href="#?page=1">
        About
      </a>
    </li>
    <li>
      <a href="#?page=2">
        Test
      </a>
      <li>
    </ul>
</div> 
```

3）**CSS**

```
ul.menu{
  border:1px solid #112266;
  background:#ccc;
}
ul.menu li{
  list-style:none;
  display:inline-block;
  margin-left:10px;
  padding:0px;
  width:60px;
  text-align:center;
}
ul.menu li:hover{
  background:#343434;
}
ul.menu li a{
  padding:0px;
  color:#113399;
  text-decoration:none;
}
ul.menu li:hover a{
  color:#c6b744;
  text-decoration:underline;
}
ul.menu li.active{
  background:#343434;
}
ul.menu li.active a{
  color:#c6b744
} 
```

4）**jQuery：**

```
$(function() {
    $(".menu li").click(function() {
        setTimeout(function() {
            var page = $.QueryString("page");
            $(".menu li").removeClass("active");
            $(".menu li:eq(" + page + ")").addClass("active");
        }, 200);
    });

}); 
```

在上述解决方案中，我必须设置像 #?page= 这样的 href 链接，因为在 bin 上运行带有新页面重定向的 java 脚本是不可能的，而且我必须使用 setTimeout 函数，因为当前页面没有被重定向，只需更改其查询#?page= 在同一页上的字符串。

如果你想在你的项目中使用上述解决方案，那么将上面的 jQuery 脚本放在公共位置，以便它将在每个菜单链接上执行并将当前页面链接设置为活动类。

注意：删除 setTimeout 函数包装器，只需在其中保留代码行脚本。如下所示：

```
$(function() {
        $(".menu li").click(function() {
             var page = $.QueryString("page");
             $(".menu li").removeClass("active");
             $(".menu li:eq(" + page + ")").addClass("active");
        });
}); 
```

# c# - Inno Setup 不在 Windows 7 64bit 上安装服务

> ID：11579667
> 
> 赞同：1
> 
> 时间：2012-07-20T12:45:15.600
> 
> 标签：c#, service, inno-setup

我在 Visual Studio 2012(C#) 上写了一项服务。我希望 Inno setup 安装它。我在 Inno 中添加了这个脚本：

```
[Run]
Filename: {sys}\sc.exe; Parameters: "create ""FBA Service"" binPath=""{app}\FBA_Service.exe"""; WorkingDir: {sys}; StatusMsg: "Install Service"; Flags: ShellExec RunHidden; 
```

在 Windows 8 上，这可以正常工作。但在 Windows 7 64bit 上，它不会安装我的服务。请帮忙，我不知道怎么了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:50:09.043

您应该使用位于 .NET Framework 安装文件夹中的 installutil，

%windir%\Microsoft.NET\v2.0.**或 v4.0。*****

 *[http://msdn.microsoft.com/en-us/library/aa984379%28v=VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa984379%28v=VS.71%29.aspx)*

# operating-system - 每个程序员都应该了解哪些操作系统概念？

> ID：11579669
> 
> 赞同：18
> 
> 时间：2012-07-20T12:45:17.983
> 
> 标签：operating-system

我正在编制自学程序员必须具备的各种能力列表。

在所有科目中，操作系统是最棘手的一门，因为即使是创建一个玩具操作系统也是一项相当艰巨的任务。但是，与此同时，应用程序开发人员（可能没有正式学习过 CS）必须至少了解并希望已经实现了一些关键概念，以了解操作系统的工作原理，并成为更好的开发人员。

我有几个具体问题：

*   操作系统的哪些关键概念对于自学成才的程序员来说很重要，因此他们可以成为更好的软件开发人员（尽管从事常规应用程序开发）？
*   是否有可能以字节大小的实用片段来学习这样的主题？（即使是像编译器构造这样的主题也可以在相当低的复杂度下手动学习）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T10:30:38.103

我建议阅读**Andrew S. Tanenbaum** ( [http://en.wikipedia.org/wiki/Andrew_S._Tanenbaum](http://en.wikipedia.org/wiki/Andrew_S._Tanenbaum) ) 关于**现代操作系统**(ISBN 978-0-13-600663-3) 的书，因为一切都在那里。

但是，从书籍索引中，我们可以确定最少的关键主题：

*   流程
*   内存管理
*   文件系统
*   输入输出

开始玩这个主题的最简单方法是下载**MINIX**：

[http://www.minix3.org/](http://www.minix3.org/)

并研究代码。此操作系统的旧版本可能更容易理解。

另一个有用的资源是**Mike Saunders** *如何编写一个简单的操作系统*，它向您展示了如何用 x86 汇编语言编写和构建您的第一个操作系统：

[http://mikeos.sourceforge.net/write-your-own-os.html](http://mikeos.sourceforge.net/write-your-own-os.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T17:04:10.460

[每个操作系统设计者都必须了解Multics](http://en.wikipedia.org/wiki/Multics)背后的概念。最出色的想法之一是将巨大的虚拟内存划分为直接可读和可写的段，并提供全面的保护，并支持多处理器启动。使用 64 位指针，我们有足够的位直接寻址地球上的所有内容。这些想法来自 1960 年代但永恒的恕我直言。

这些知识的明显丧失使我们成为“太监”，现在被实例化为 Unix，然后是 Linux，以及来自 Microsoft 的同样糟糕的设计，两者都将世界组织为一个平面的进程空间和文件。不了解历史的人注定会做一些更愚蠢的事情。

尽你所能获得 Organick 关于 Multics 的书的副本，并从头到尾*阅读它*。（Elliott I. Organick，Multics 系统：对其结构的检查）。

维基百科网站有一些很好的信息；Corbato 的论文很棒。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T13:04:13.297

我相信这取决于您正在开发的应用程序类型和您正在开发的操作系统平台。例如，如果您正在开发一个网站，您不需要对操作系统了解太多。在此示例中，您需要了解有关您的网络服务器的更多信息。当您在 Windows、Linux 或 Android 或某些嵌入式系统上工作时，您需要了解不同的事情，或者有时您需要了解 API 提供的内容之外的任何内容。一般来说，开发人员或 CS 人员了解追随者总是有好处的。

1.  什么是应用程序、工具链和操作系统的责任。
2.  OS系统调用提供的进程间通信和不同的IPC机制。

操作系统是一个非常有趣的主题，但主要由理论组成，但是当您在嵌入式系统上工作时，这个理论就会发挥作用。平均而言，对于桌面应用程序，您看不到所有这些理论都适用于何处。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-02T19:20:09.063

Well that depends on the need of the developer like:-

**Point.**

Applications such as web browsers and email tools are performing an increasingly important role inmodern desktop computer systems. To fulfill this role, they should be incorporated as part of the operating system. By doing so, they can provide better performance and better integration with the rest of the system. In addition, these important applications can have the same look-and-feel as the operating system software.

**Counterpoint.**

The fundamental role of the operating system is to manage system resources such as the CPU, memory, I/O devices, etc. In addition, it’s role is to run software applications such as web browsers and email applications. By incorporating such applications into the operating system, we burden the operating system with additional functionality. Such a burdenmay result in the operating system performing a less-thansatisfactory job at managing system resources. In addition, we increase the size of the operating system thereby increasing the likelihood of system crashes and security violations.

![enter image description here](../Images/8716c18aa95ce6623a1f7ee896e2ffe7.png)

Also there are many other important points which one must understand to get a better grip of Operating System like Multithreading, Multitasking, Virtual Memory, Demand Paging, Memory Management, Processor Management, and more.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-03T16:51:10.643

我将从[每个程序员应该知道的关于内存](https://www.google.com/search?q=what%20every%20programmer%20should%20know%20about%20memory)的知识开始。（不完全是操作系统，但所有这些都是有用的信息。第 4 章介绍了虚拟内存，这是阅读您的问题时首先想到的。）

要零碎学习其余部分，请选择任何系统调用并准确了解它的作用。这通常意味着了解它操作的内核对象。

当然，细节会因操作系统而异......但您的问题的答案也是如此。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-01T17:34:28.603

好的，好的程序员应该了解的操作系统概念。实际上。除非你关心性能。如果您使用跨操作系统语言编写。没有任何。

如果你*关心*性能。

1.  用户/系统转换的成本
2.  操作系统如何处理锁定/线程/死锁以及如何最好地使用它们。
3.  虚拟内存/分页/抖动及其成本。
4.  内存分配，操作系统如何做到这一点，以及您应该如何利用它来何时 A、使用操作系统分配器（参见 1）以及何时从 os 分配和子分配。
5.  如前所述，进程创建/进程间通信。
6.  默认情况下，操作系统如何写入/读取磁盘以优化读取/写入（查看为什么数据库使用 B 树）
7.  奖金、子操作系统、缓存大小和缓存行在性能方面对您意味着什么。

但通常它会归结为操作系统为您提供的不是通用的，以及它的成本和原因，以及成本过高（过多的 cpu、过多的磁盘使用、过多的 io、过多的网络）等）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-03T18:22:48.313

简单的说：

线程和进程。

内核空间/线程与用户空间/线程（可能是一些内核级编程）

其次是进程死锁的基本概念。

此后监视器、信号量、互斥量

内存如何工作以及如何与进程和设备对话。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-03T15:24:52.567

每个自学成才的程序员和计算机科学家都应该知道 OSI 模型并且非常了解它。它有助于确定问题可能出在哪里以及在出现问题时与谁联系。范围在这里定义，许多问题可以在这里过滤掉。这是因为操作系统中的内容太多，无法简单地学习所有内容。作为一名 Web 开发人员，当问题超出此范围时，我通常在应用程序级别工作，我知道何时需要帮助。此外，许多人根本不关心他们想要尽快创建事物的某些组件。OSI 模型是人们可以找到他们的计算机热点的地方。 [http://en.wikipedia.org/wiki/OSI_model](http://en.wikipedia.org/wiki/OSI_model)

# javascript - 在哪里放置 JavaScript 警报覆盖，以便所有页面都可以在不导入 *.js 的情况下使用它？

> ID：11579671
> 
> 赞同：-2
> 
> 时间：2012-07-20T12:45:26.607
> 
> 标签：javascript, asp.net, alert

我在哪里放置 JavaScript 警报覆盖，以便所有页面都可以在不导入 JavaScript 文件的情况下使用它？

我已经覆盖了警报方法。我希望能够从任何 .aspx 页面使用它，而无需在每个单独的页面上导入它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T12:46:30.573

如果不将覆盖发送给客户端，则无法覆盖客户端代码。所以你想要的是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:06:51.360

您可以将所有 JavaScript 代码放在后面的代码中，并使用`Page.RegisterStartup`.

例如，将其放在母版页中或从所有其他页面派生的页面中。但这不是一个好主意。

# modx - 片段在 MODx 中不起作用

> ID：11579676
> 
> 赞同：1
> 
> 时间：2012-07-20T12:46:10.227
> 
> 标签：modx, modx-evolution

我的 ModX Evo 中有一个片段。问题是，在我的本地这个 Shippet 工作正常，但是当我将它上传到主机时，它只返回空白。代码是一团糟，但我需要弄清楚这一点。有什么想法吗？谢谢。

```
 <?php
$action=$_GET['action'];

switch ($action){
case('add'):_add();break;
case('view'):_view();break;
case('order'):_order();break;
case('del'):_del();break;

}
/////////////////////////////////////////////////////////////////
function _add()
{
global $modx;
session_start();
if(!session_is_registered('things')){session_register('things');}
$ar=$_SESSION['things'];
$ar_size=sizeof($ar)-1;
$break=false;
$i=0;
if($ar_size>=0)
 {
  while ($i<=$ar_size):
  $buf=$ar[$i];
   if($buf['id']==$_GET['thing']){$_SESSION['things'][$i]['count']=$buf['count']+1;$break=true;}
  $i++;
  endwhile;
 }
if($break==false){
$_SESSION['things'][($i)]=array('title' => $_GET['title'],
'id'=>$_GET['thing'],
'price'=>$_GET['price'],
'count'=>1);}
$modx->sendRedirect("/index.php?id=".$_GET['return']);

}
function _view()
{
if (!isset($_GET['zakaz'])){

session_start();
if(!session_is_registered('things')){session_register('things');}

if (isset($_GET['del']))
{
$buf=array();
$ar=$_SESSION['things'];
$ar_size=sizeof($ar)-1;
if($ar_size>=0)
 {  
  $i=0;
  while ($i<=$ar_size):   
    if(($i+1)!=$_GET['del']){$buf[sizeof($buf)]=$ar[$i];}
    $i++;
   endwhile;

}
$_SESSION['things']=$buf;

}
if (isset($_GET['delall']))
{
$_SESSION['things']=array();
}
if (isset($_GET['cn']))
{
$c=$_GET['cn'];
$ar=$_SESSION['things'];
$ar_size=sizeof($ar)-1;
if($ar_size>=0)
 {  
  $i=0;
  while ($i<=$ar_size): 
    $b=(int)$c[$i];
    if($b>0)
       {
        $ar[$i]['count']=$b;
       }else{$ar[$i]['count']=1;}
    $i++;
   endwhile;
}
$_SESSION['things']=$ar;

}

if((isset($_GET['peresh']))or(isset($_GET['del']))or(isset($_GET['delall'])))
{
global $modx;
$modx->sendRedirect("/index.php?id=10&action=view");

}
?>
<form action='index.php' method='GET'>
<input type="hidden" value="10" name="id">
<input type="hidden" name="action" value="view">
        <table border=0 cellpadding=4 cellspacing=2 width='100%'>
        <tr align='center'>
        <td align=center colspan=5 bgcolor='#c5dcf8' class='table_title'>Ваша корзина</td>
        </tr>
        <tr align='center'>
        <td bgcolor='#c5dcf8'>№&lt;/td>
        <td bgcolor='#c5dcf8' >наименование товара</td>
        <td bgcolor='#c5dcf8'><nobr>цена, руб.</nobr></td>
        <td bgcolor='#c5dcf8'>кол-во</td>
        <td bgcolor='#c5dcf8'>удалить</td>
        </tr>

<?php
$ar=$_SESSION['things'];
$ar_size=sizeof($ar)-1;
$break=false;
$i=0;
if($ar_size>=0)
 {
  $summ=0;
  while ($i<=$ar_size):
  $buf=$ar[$i];
   $i1=$i;
   $i++;
   $name=$buf['title'];
   $id=$buf['id'];
   $price=$buf['price']*$buf['count'];
   $summ=$summ+$price;
   $count=$buf['count'];
   echo"<tr><td bgcolor=\"white\" style=\"color:black;\" align=\"center\">$i</td><td bgcolor=\"white\"style=\"color:black;\" align=\"center\">
<a style=\"color:blue\" href=\"/index.php?id=$id\">$name</td><td bgcolor=\"white\"style=\"color:black;\" align=\"center\">$price</td>
<td bgcolor=\"white\" style=\"color:black;\" align=\"center\"><input type=\"edit\" name=\"cn[$i1]\" value=\"$count\"SIZE=\"4\"></td>
<td bgcolor=\"white\" style=\"color:black;\" align=\"center\"><a href=\"/index.php?id=10&action=view&del=$i\" onclick=\"return confirm('Вы согласны?')\"><font color=\"Maroon\" style=\"color:Maroon;font-weight:bold;font-size:16px;text-decoration:none;\">X</a></td></tr>";
 endwhile;
?>
<tr><td colspan="2" align="right" bgcolor="white"><b style="color:navy">Итого к оплате:</td><td style="color:blue;"bgcolor="white" align="center"><?php echo $summ; ?></td><td align="center"><input name="peresh" style="font-size:10px" type="submit" value="Пересчитать"></td><td align="center"><input style="font-size:10px" name="delall" type="submit" onclick="return confirm('Вы согласны?')" value="Удалить все">
</table><br><center><input type="submit" name="zakaz" value="Оформить заказ"></center></form>

<?php
 }
else
{
?>
<tr><td colspan="5" align="center" valign="middle" height="60" style="color:blue" bgcolor="white">Корзина пуста</td></tr>
</table></form>

<?php
}
}
else
{
//////////////////////для заказа////////////////////////

}
?>

<?php
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T09:24:15.127

您应该将所有功能放入：

如果 (!function_exists('yourfunction')) { [....]

编辑：您的代码片段在本地 modx 安装中有效吗？或者它是否像普通的 php 脚本一样工作？我不认为你可以停止/启动 php (?> 和

您可以在 Modx 中检查您的错误日志。如果它显示空白错误可能会被关闭

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T23:26:09.703

根据文档，session_register() 和 session_is_registered() 在 PHP 5.3 中已弃用，并在 PHP 5.4 中删除。我肯定会把它拿出来。

正如 OptimusCrime 所说，您不能在片段中使用`<?php`和 ；`?>`整个片段将在解析时进行评估，这样做会导致解析错误。可能会在错误日志中找到一些证据。

此外，所有对 session_start 的引用确实不应该存在 - MODX 为您处理会话，您不应该再次重新启动它们。我不确定这是否会导致问题，但如果有的话，它可以帮助清理你的代码，哪怕只是一点点；）

# django - Django：通过以模型形式查询数据库来验证数据（使用自定义清理方法）

> ID：11579678
> 
> 赞同：4
> 
> 时间：2012-07-20T12:46:10.970
> 
> 标签：django, forms, customization

我正在尝试创建一种自定义清理方法，如果一个特定数据的值已经存在并且如果是会引发错误，则该方法会在数据库中查找。我正在使用从其他类（项目）继承的类（子系统）的模型形式。当我尝试在表单中添加新系统时，我想检查系统系统是否已经存在。

我在我的视图函数中获得项目名称。

```
class SubsytemForm(forms.ModelForm):  

    class Meta:
        model = Subsystem
        exclude = ('project_name')

    def clean(self,project_name):

        cleaned_data = super(SubsytemForm, self).clean(self,project_name)
        form_subsystem_name = cleaned_data.get("subsystem_name")

        Subsystem.objects.filter(project__project_name=project_name)
        subsystem_objects=Subsystem.objects.filter(project__project_name=project_name)
        nb_subsystem = subsystem_objects.count()

        for i in range (nb_subsystem):
            if (subsystem_objects[i].subsystem_name==form_subsystem_name):
                msg = u"Subsystem already existing"
                self._errors["subsystem_name"] = self.error_class([msg])

            # These fields are no longer valid. Remove them from the
            # cleaned data.
            del cleaned_data["subsystem_name"]
        return cleaned_data 
```

我的视图功能：

```
def addform(request,project_name):
    if form.is_valid(): 
        form=form.save(commit=False)
        form.project_id=Project.objects.get(project_name=project_name).id 
        form.clean(form,project_name)
        form.save() 
```

这不起作用，我不知道该怎么做。我有错误：clean() 正好需要 2 个参数（1 个给定）

我的模型：

```
class Project(models.Model):
project_name = models.CharField("Project name", max_length=20)

Class Subsystem(models.Model):
subsystem_name = models.Charfield("Subsystem name", max_length=20)
projects = models.ForeignKey(Project) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T13:48:24.823

这段代码有很多问题。

首先，您不应该`clean`显式调用。当你调用`form.is_valid()`. 而且因为它是自动完成的，所以你不能传递额外的参数。您需要在实例化表单时传递参数，并将其保留为您的干净代码可以引用的实例变量。

其次，代码实际上只验证一个字段。所以应该用特定的`clean_fieldname`方法来完成——即`clean_subsystem_name`。这避免了`_errors`在最后处理和删除不需要的数据的需要。

第三，如果你发现自己对某事进行计数，遍历一个范围，然后使用该索引指向原始列表，那么你做错了。在 Python 中，您应该始终遍历您感兴趣的实际事物（在这种情况下为查询集）。但是，在这种情况下，无论如何这都无关紧要，因为您应该直接在数据库中查询实际名称并检查是否它存在，而不是通过检查匹配进行迭代。

所以，把它们放在一起：

```
class SubsytemForm(forms.ModelForm):  

    class Meta:
        model = Subsystem
        exclude = ('project_name')

    def __init__(self, *args, **kwargs):
        self.project_name = kwargs.pop('project_name', None)
        super(SubsystemForm, self).__init__(*args, **kwargs)

    def clean_subsystem_name(self):
        form_subsystem_name = self.cleaned_data.get("subsystem_name")

        existing = Subsystem.objects.filter(
                       project__project_name=self.project_name,
                       subsytem_name=form_subsystem_name
                   ).exists()

        if existing:
            raise forms.ValidationError(u"Subsystem already existing")

        return form_subsystem_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:33:12.497

当您执行 form=form.save(commit=False) 时，您将 Subsystem 实例存储在变量形式中，但 clean 方法在 SubsystemForm 中定义。不是吗？

# android - 单击列表项时，图像在列表视图中交换它们的行

> ID：11579690
> 
> 赞同：1
> 
> 时间：2012-07-20T12:46:44.907
> 
> 标签：android, listview, android-asynctask, imageview

我在 ListView 中使用 AsyncTask 加载图像时遇到了这个奇怪的问题。在我的 ListView 中，每一行都包含一个 ImageView 和一个 TextView。我为它点击了这个链接：

[http://android-developers.blogspot.in/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.in/2010/07/multithreading-for-performance.html)

图像已从 URL 成功下载，并填充在其受尊重的行上。但是当我滚动 ListView 或单击任何列表项时，图像只会交换它们的行。尽管 TextViews 中的文本保持在同一行上。我不明白为什么会这样。我用谷歌搜索了很多，但找不到完美的理由。请帮忙。

这是我的适配器类：

```
 private class ListAdapter extends BaseAdapter{

    private ArrayList<HashMap<String, Object>> allFriends; 
    private LayoutInflater mInflater;

    public ListAdapter(ArrayList<HashMap<String, Object>> allFriends, Context context){
        this.allFriends = allFriends;
        mInflater = LayoutInflater.from(context);
    }

    @Override
    public int getCount() {
        return allFriends.size();
    }

    @Override
    public Object getItem(int position) {
        return allFriends.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        FriendsViewHolder holder;

        if (convertView == null||!(convertView instanceof TextView)||!(convertView instanceof ImageView)) {
             convertView = mInflater.inflate(R.layout.friend_list_view, null);

             holder = new FriendsViewHolder();
             holder.friendName = (TextView) convertView.findViewById(R.id.friendName);
             holder.friendImage = (ImageView) convertView.findViewById(R.id.friendImage);                

             convertView.setTag(holder);
         }else {
             holder = (FriendsViewHolder) convertView.getTag(); 
         }

        holder.friendName.setText((String) allFriends.get(position).get(FriendsActivity.FRIENDS_NAME_KEY));

        String otherId=(String) allFriends.get(position).get(FriendsActivity.IDKEY);
        String isImage=(String) allFriends.get(position).get(FriendsActivity.IS_IMAGE_KEY);

            if(isImage.equalsIgnoreCase("true")){
                download(otherId, holder.friendImage);
            }

        return convertView;
    }
}//End of list adapter 
```

下载方法是：

```
 public void download(String otherId, ImageView imageView) {
     BitmapDownloaderTask task = new BitmapDownloaderTask(imageView);
     task.execute(otherId);
 } 
```

这里的 BitmapDownloaderTask 是下载图片的异步任务：

```
 class BitmapDownloaderTask extends AsyncTask<String, Void, Bitmap> {
        private String otherId;
        private final WeakReference<ImageView> imageViewReference;

        public BitmapDownloaderTask(ImageView imageView) {
            imageViewReference = new WeakReference<ImageView>(imageView);
        }

        @Override
        // Actual download method, run in the task thread
        protected Bitmap doInBackground(String... params) {
             // params comes from the execute() call: params[0] is the url.

             return getOtherUserImage(params[0]);
        }

        @Override
        // Once the image is downloaded, associates it to the imageView
        protected void onPostExecute(Bitmap bitmap) {
            if (isCancelled()) {
                bitmap = null;
            }

            if(bitmap!=null){
                if (imageViewReference != null) {
                    ImageView imageView = imageViewReference.get(); 
                    if(imageView != null ){
                        imageView.setImageBitmap(bitmap);
                    } 
                }
            }
        }
    } 
```

getOtherUserImage 方法是：

```
 public Bitmap getOtherUserImage(String otherUserId){

    // code to download the image goes here. It returns bitmap "bmImg".

    if(bmImg==null){
        return null;
    }else {
        bmImg = Bitmap.createScaledBitmap(bmImg,imageWidth, imageHeight, true);

        /*availableFriends.get(position).put(BITMAP_KEY, bmImg);
        runOnUiThread(new Runnable() {
            public void run() {
                adapter.notifyDataSetChanged();
            }
        });*/
        return bmImg;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:56:16.110

这篇[Android 开发者博客文章](http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html)描述了如何正确地将图像异步加载到 ListView 中，并提供了一个很棒的示例应用程序，您应该能够快速轻松地修改（我做过）以满足您的需求。

> 实际上，出于内存效率的原因，`ListView`循环使用用户滚动时显示的视图。如果一个人抛出列表，一个给定的`ImageView`对象将被多次使用。每次显示时都会`ImageView`正确触发图像下载任务，最终会更改其图像。那么问题出在哪里？与大多数并行应用程序一样，关键问题在于顺序。在我们的例子中，不能保证下载任务会按照它们开始的顺序完成。结果是最终显示在列表中的图像可能来自上一个项目，只是碰巧下载的时间更长。如果您下载的图像一劳永逸地绑定到 given ，这不是问题 `ImageViews`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:09:51.660

我认为您应该使下载图像的方法“同步”。许多线程同时运行，因此图像有可能出现在错误的位置。

# php - 如何从php服务器获取json数据到android mobile

> ID：11579693
> 
> 赞同：7
> 
> 时间：2012-07-20T12:46:59.830
> 
> 标签：php, android, json

我有一个应用程序，我想在其中将 json 数据从 php web 服务器获取到 android mobile。我所拥有的是一个 URL，点击该 URL 会给我 json 数据，例如
`{"items":[{"latitude":"420","longitude":"421"}]}`. 但我想在我的 android 手机中检索这种 json 格式，并从 json 格式中获取纬度和经度的值。

我们怎样才能在安卓手机上获得它..？

提前致谢..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T12:49:57.750

首先做 URL 连接

```
String parsedString = "";

    try {

        URL url = new URL(yourURL);
        URLConnection conn = url.openConnection();

        HttpURLConnection httpConn = (HttpURLConnection) conn;
        httpConn.setAllowUserInteraction(false);
        httpConn.setInstanceFollowRedirects(true);
        httpConn.setRequestMethod("GET");
        httpConn.connect();

        InputStream is = httpConn.getInputStream();
        parsedString = convertinputStreamToString(is);

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

JSON字符串

```
{
"result": "success",
"countryCodeList":
[
  {"countryCode":"00","countryName":"World Wide"},
  {"countryCode":"kr","countryName":"Korea"}
] 
} 
```

下面我正在获取国家/地区详细信息

```
JSONObject json = new JSONObject(jsonstring);
JSONArray nameArray = json.names();
JSONArray valArray = json.toJSONArray(nameArray);

JSONArray valArray1 = valArray.getJSONArray(1);

valArray1.toString().replace("[", "");
valArray1.toString().replace("]", "");

int len = valArray1.length();

for (int i = 0; i < valArray1.length(); i++) {

 Country country = new Country();
 JSONObject arr = valArray1.getJSONObject(i);
 country.setCountryCode(arr.getString("countryCode"));                        
 country.setCountryName(arr.getString("countryName"));
 arrCountries.add(country);
}

public static String convertinputStreamToString(InputStream ists)
        throws IOException {
    if (ists != null) {
        StringBuilder sb = new StringBuilder();
        String line;

        try {
            BufferedReader r1 = new BufferedReader(new InputStreamReader(
                    ists, "UTF-8"));
            while ((line = r1.readLine()) != null) {
                sb.append(line).append("\n");
            }
        } finally {
            ists.close();
        }
        return sb.toString();
    } else {
        return "";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:52:48.973

```
 String jsonStr = '{"menu": {' + 
        '"id": "file",' + 
        '"value": "File",' + 
        '"popup": {' + 
          '"menuitem": [' + 
            '{"value": "New", "onclick": "CreateNewDoc()"},' + 
            '{"value": "Open", "onclick": "OpenDoc()"},' + 
            '{"value": "Close", "onclick": "CloseDoc()"}' + 
          ']' + 
        '}' + 
      '}}'; 
```

该 JSON 字符串实际上来自[http://json.org/example.html](http://json.org/example.html)。对于这个给定的例子，这是我能找到的最好的一个。

现在我们已经准备好了，让我们开始使用`JSONObject`. 您将需要以下导入才能使其正常工作：`import org.json.JSONObject;`

```
JSONObject jsonObj = new JSONObject(jsonStr); 
```

实例化后，我们可以执行以下操作从 JSON 字符串中检索不同的数据 -

```
 // grabbing the menu object 
 JSONObject menu = jsonObj.getJSONObject("menu"); 

Reading  =========>  HttpResponse response = httpclient.execute(httppost); 
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) 
                {
                    sb.append(line + "\n");
                }
                is.close();
                result=sb.toString();=======>Here result is the json string

 // these 2 are strings 
 String id = menu.getString("id"); 
 String value = menu.getString("value"); 

 // the popop is another JSON object 
 JSONObject popup = menu.getJSONObject("popup"); 

 // using JSONArray to grab the menuitems from under popop 
  JSONArray menuitemArr = popupObject.getJSONArray("menuitem");  

 // lets loop through the JSONArray and get all the items 
 for (int i = 0; i < menuitemArr.length(); i++) { 
// printing the values to the logcat 
Log.v(menuitemArr.getJSONObject(i).getString("value").toString()); 
Log.v(menuitemArr.getJSONObject(i).getString("onclick").toString()); 
} 
```

一个简单的例子点击[这里](http://w3mentor.com/learn/java/android-development/android-http-services/example-of-http-get-request-using-httpclient-in-android/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T12:54:23.310

从您的 Android 客户端发送请求

```
public static JSONObject getJSONFromHttpPost(String URL) {

    try{
    // Create a new HttpClient and Post Header
    DefaultHttpClient httpclient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost(URL);
    String resultString = null;

        long t = System.currentTimeMillis();
        HttpResponse response = (HttpResponse) httpclient.execute(httpPost);
        System.out.println("HTTPResponse received in [" + (System.currentTimeMillis()-t) + "ms]");
        // Get hold of the response entity (-> the data):
        HttpEntity entity = response.getEntity();

        if (entity != null) {
            // Read the content stream
            InputStream instream = entity.getContent();

            // convert content stream to a String
            resultString= convertStreamToString(instream);
            instream.close();
            System.out.println("result String : " + resultString);
            //resultString = resultString.substring(1,resultString.length()-1); // remove wrapping "[" and "]"
            System.out.println("result String : " + resultString);
            // Transform the String into a JSONObject
            JSONObject jsonObjRecv = new JSONObject(resultString);
            // Raw DEBUG output of our received JSON object:
            System.out.println("<JSONObject>\n"+jsonObjRecv.toString()+"\n</JSONObject>");

            return jsonObjRecv;
        }
        }catch(Exception e){e.printStackTrace();}

        return null; 
```

}

这是转换字符串的函数

```
private static String convertStreamToString(InputStream is) {

    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line ="";
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

现在您所要做的就是`echo`在服务器上使用 JSON 格式的字符串

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T12:51:42.390

使用类似的东西：

```
try {
    HttpParams params = new BasicHttpParams();
    HttpConnectionParams.setSoTimeout(params, 0);
    HttpClient httpClient = new DefaultHttpClient(params);

    //prepare the HTTP GET call 
    HttpGet httpget = new HttpGet(urlString);
    //get the response entity
    HttpEntity entity = httpClient.execute(httpget).getEntity();

    if (entity != null) {
        //get the response content as a string
        String response = EntityUtils.toString(entity);
        //consume the entity
        entity.consumeContent();

        // When HttpClient instance is no longer needed, shut down the connection manager to ensure immediate deallocation of all system resources
        httpClient.getConnectionManager().shutdown();

        //return the JSON response
        JSONObject object = new JSONObject(response.trim());
        JSONArray jsonArray = object.getJSONArray("items");
        if(jsonArray != null) {
           for(int i = 0 ; i < jsonArray.length() ; i++) {
                JSONObject object1 = (JSONObject) jsonArray.get(i); 
                String latitude = object1.getString("latitude");
                String longitude = object1.getString("longitude");
           }
        } 
    }
}catch (Exception e) {
    e.printStackTrace();
} 
```

# ruby-on-rails - BCrypt::Errors::InvalidSalt: 无效盐设计

> ID：11579696
> 
> 赞同：1
> 
> 时间：2012-07-20T12:47:06.183
> 
> 标签：ruby-on-rails, devise

当我尝试创建新用户时出现此错误，如下所示

```
>> User.create(:email=>"nandosousafr@gmail.com", :password => "hello")
BCrypt::Errors::InvalidSalt: invalid salt
from /Library/Ruby/Gems/1.8/gems/bcrypt-ruby-3.0.1/lib/bcrypt.rb:56:in `hash_secret'
from /Library/Ruby/Gems/1.8/gems/bcrypt-ruby-3.0.1/lib/bcrypt.rb:161:in `create'
from /Library/Ruby/Gems/1.8/gems/devise-2.1.2/lib/devise/models/database_authenticatable.rb:110:in `password_digest'
from /Library/Ruby/Gems/1.8/gems/devise-2.1.2/lib/devise/models/database_authenticatable.rb:37:in `password='
from /Library/Ruby/Gems/1.8/gems/activerecord-3.2.2/lib/active_record/attribute_assignment.rb:85:in `send'
from /Library/Ruby/Gems/1.8/gems/activerecord-3.2.2/lib/active_record/attribute_assignment.rb:85:in `assign_attributes'
from /Library/Ruby/Gems/1.8/gems/activerecord-3.2.2/lib/active_record/attribute_assignment.rb:78:in `each'
from /Library/Ruby/Gems/1.8/gems/activerecord-3.2.2/lib/active_record/attribute_assignment.rb:78:in `assign_attributes'
from /Library/Ruby/Gems/1.8/gems/activerecord-3.2.2/lib/active_record/base.rb:495:in `initialize'
from /Library/Ruby/Gems/1.8/gems/activerecord-3.2.2/lib/active_record/persistence.rb:44:in `new'
from /Library/Ruby/Gems/1.8/gems/activerecord-3.2.2/lib/active_record/persistence.rb:44:in `create'
from (irb):3 
```

> >

宝石文件

```
require 'rbconfig'
HOST_OS = RbConfig::CONFIG['host_os']

source 'https://rubygems.org'

gem 'rails', '3.2.2'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem "compass-rails"  
  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer'
  gem 'less'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

gem 'twitter-bootstrap-rails'

gem "friendly_id", "~> 4.0.1"

gem "rest-client"

gem "haml", ">= 3.1.6"
gem "haml-rails", ">= 0.3.4", :group => :development

gem "devise", ">= 2.1.0"
gem "cancan", ">= 1.6.7"
gem "rolify", ">= 3.1.0"
gem "therubyracer", :group => :assets, :platform => :ruby
gem "simple_form"
gem "will_paginate", ">= 3.0.3"
gem "paperclip", "~> 2.7"
gem "rdiscount"
gem 'oily_png' 
```

用户.rb

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me
end 
```

我用谷歌搜索，我发现一篇文章让我把 config.encryptor = :sha1，而不是 config.encryptor = :bcrypt，但问题没有解决..

任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:15:22.627

如果您尝试重新安装`bcrypt-ruby`gem 怎么办？

```
 # Remove all versions of bcrypt-ruby
  sudo gem uninstall bcrypt-ruby

  # Install the latest version 
  sudo gem install bcrypt-ruby 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-31T09:17:35.867

重新安装 bcrypt-ruby 对我不起作用。

该错误已在**bcrypt-ruby >= 3.1.10中**[得到修复](https://github.com/codahale/bcrypt-ruby/commit/f1621d686b6c41ae4157667b3f76735cfbbc60e5)，但 Rails 3.2 锁定在**bcrypt-ruby 3.0.x**上。

 ****解决方案是：

*   移动到更新的 Rails 版本 (>=4)
*   使用旧版 Ruby (2.1.x)
*   fork[我的更改](https://github.com/yukas/rails/tree/bump-bcrypt-ruby-version-to-3-1)并自己跟上安全更新（因为目前 Rails 3.2 仅支持严重的安全更新）****

# facebook - 跟踪谁喜欢或通过 Facebook 分享的脚本

> ID：11579697
> 
> 赞同：1
> 
> 时间：2012-07-20T12:47:09.337
> 
> 标签：facebook, api, facebook-fql

我想知道是否可以通过运行脚本找到谁喜欢或分享我的网站或 Facebook 页面。显然，您必须使用 Facebook API，但我想知道它是否能够执行以下操作：

这是一种基于激励的分享/喜欢。我正在尝试创建一个会员部分，他们可以在其中共享我们的网站并在其会员帐户中获得“信用”。此外，如果他们实际单击我们页面上的“喜欢”按钮，则应将“信用”更新到他们的帐户。我需要做到这一点，这样他们就不能使用多个 Facebook 帐户来尝试获得多个积分，但是在他们单击帐户中的“喜欢”按钮后，FB Like 按钮应该消失，我相信这可以通过一些 PHP 来完成代码（如果）。

他们可以获得的第三个“信用”是他们在自己的墙上“分享”我们的页面。

我看到该过程的方式是他们执行上述操作之一，并且我们有一个每 5 分钟左右运行一次的 cron 脚本来检查我们的电子邮件/用户名数据库，以查看他们是否喜欢/共享/或喜欢页面，那么自动添加“信用”将是一个简单的过程。

这可能吗？如果是这样，有人可以指导我阅读我应该继续阅读的 FQL 部分吗？我还没有处理过 FQL，但我确信对于这样的事情不应该有太多的战斗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:47:34.887

# java - 如何在 Java Web 服务 SOAP 中注入 EJB

> ID：11579706
> 
> 赞同：0
> 
> 时间：2012-07-20T12:47:44.377
> 
> 标签：java, web-services, jakarta-ee, ejb, inject

我正在尝试用 Java 开发一个使用 EJB 的简单 Web 服务，EJB 在 jar 文件中，WebServices 在 war 文件中，两者都打包在一只耳朵里。我们在 JBOSS-AS 7.1 上使用 EjB 3.0。

**这是我的 EJB 类及其接口：**

```
@Stateless
public class TestEjb implements ITestEjb {

    public boolean authentifier(String login, String password) {
        if(login.equals("nico") && password.equals("nr"))
            return true;
        else 
            return false;
    }

}

@Local
public interface ITestEjb {
    public boolean authentifier(String login, String password);
} 
```

**这是我的*Web 服务*，它注入了*以前的 EJB*：**

```
//@Stateless
@WebService
@SOAPBinding(style = Style.RPC)
public class AuthentificationWS {
    @EJB
    private ITestEjb testEjb;

   public boolean authentifier(String login,String password) {
       return testEjb.authentifier(login, password);
   }
} 
```

部署运行良好，但是当我调用我的 Web 服务时，**EJB 始终为*空***
`(error : java.nullpointerException).`

因此，我尝试将一个添加`@Stateless`到我的 Web 服务以将其转换为 EJB，但是当我尝试通过 Web 服务客户端使用它时没有成功。

然后我尝试通过***本地 jndi 查找***访问 Ejb，如下所示，在 JBOSS 日志中获取本地 jndi url：

```
final String jndi = "java:module/TestEjb!fr.test.ITestEjb";
testEjb = (ITestEjb) new InitialContext().lookup(jndi); 
```

但它没有用。

最后我尝试使用如下的***全局 jndi url***：

```
final String jndi = "ejb:Num-ear-1.0.0-SNAPSHOT/Num-ejb-1/TestEjb!fr.test.ITestEjb"
testEjb = (ITestEjb) new InitialContext().lookup(jndi); 
```

而且效果很好！！

所以，我不明白为什么我的 web 服务无法通过注入或本地 Jndi 方式本地访问其 EJB？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:28:51.010

原因是在 JBOSS-AS 7.1 中，ejb 服务的部署和映射方式不同。如果您没有为无状态 bean 指定映射名称，则必须使用其全局名称进行查找，如下所示：ejb:Num-ear-1.0.0-SNAPSHOT/Num-ejb-1/TestEjb!fr.test .ITestEjb

您可以尝试通过以下方式添加映射名称：

```
@Stateless(name = "ejb/ar/TestEjb", mappedName = "ejb/ar/TestEjb")
public class TestEjb implements ITestEjb { 
```

在您的网络服务中：

```
@EJB(name = "ejb/ar/TestEjb", mappedName = "ejb/ar/TestEjb")
private ITestEjb testEjb; 
```

在你的 web.xml 中：

```
<ejb-local-ref>
    <ejb-ref-name>ejb/ar/TestEjb</ejb-ref-name>
    <ejb-ref-type>Session</ejb-ref-type>
    <local>yourpackage.TestEjb</local>
</ejb-local-ref> 
```

在这种情况下，我假设您将 web 服务部署为 web 模块。有关如何将 Web 服务部署为 Web 模块的参考，请查看此链接：[http ://www.mkyong.com/webservices/jax-ws/deploy-jax-ws-web-services-on-tomcat/](http://www.mkyong.com/webservices/jax-ws/deploy-jax-ws-web-services-on-tomcat/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T10:27:45.453

我之前用过： new InitialContext().lookup(java:app/domain/TestService) 转换为ear并使用：

```
@Local
@Remote
public interface Test {}

@Stateless(name="Test", mapped-name="Test")
public TestService implements Test {}

@Webservice
public MyService{
     @EJB(name="Test", mapped-name="Test")
     private Test test;
} 
```

这似乎可行，但需要在测试接口中设置@Remote ():)。Webservice 处于战争状态，域在 jar 中，两者都包含在 ear 中并部署在 Glassfish (3.1.2) 中。很遗憾我不得不使用注释@Remote，因为它都在同一个耳朵里。如果我省略 @Remote，我会在 Glassfish 中部署时出现异常：“尝试在 EJB 上设置 ejb-ref，而 EJB 未定义远程接口”。有没有办法省略 @Remote ？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-21T06:47:25.093

不带接口试试，EJB3.x中不再需要定义接口

```
@Stateless
public class TestEjb {

    public boolean authentifier(String login, String password) {
        if(login.equals("nico") && password.equals("nr"))
            return true;
        else 
            return false;
    }

} 
```

然后注入web服务如下

```
@WebService
public class AuthentificationWS {
   @EJB
   private TestEjb testEjb;

   public boolean authentifier(String login,String password) {
       return testEjb.authentifier(login, password);
   }
} 
```

# android - 如何在 android sdk 示例中管理 MapViewCompassDemo 中的叠加层

> ID：11579707
> 
> 赞同：3
> 
> 时间：2012-07-20T12:47:50.217
> 
> 标签：android, map, rotation

我正在使用 MapViewCompassDemo 示例

```
\add-ons\addon-google_apis-google_inc_-7\samples\MapsDemo\ 
```

用于根据用户方向旋转地图视图。这是有效的

如果地图没有叠加层，那就完美了。但是如果我添加叠加层来映射 ontap 不能完全工作

旋转时在标记上。任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:26:30.467

在此示例中，它仅旋转 dispatchDraw 方法。与 dispatchDraw 一起旋转

dispatchTouchEvent also.find 下面的代码也可以旋转触摸事件

```
 @Override
    public void dispatchDraw(Canvas canvas) {
        canvas.save();
        canvas.rotate(getRotation(), getWidth() / 2, getHeight() / 2);
        super.dispatchDraw(canvas);
        canvas.restore();
    }

@Override
    public boolean dispatchTouchEvent(MotionEvent event) {
        float[] coords = new float[] {
                event.getX(), event.getY()
        };
        adjustCoords(coords, getRotation());
        MotionEvent evt = MotionEvent.obtain(event.getDownTime(), event.getEventTime(), event
                .getAction(), coords[0], coords[1], event.getPressure(), event.getSize(), event
                .getMetaState(), event.getXPrecision(), event.getYPrecision(), event.getDeviceId(),
                event.getEdgeFlags());
        return super.dispatchTouchEvent(evt);
    }
    protected void adjustCoords(float[] coords, float deg) {
        float x = coords[0];
        float y = coords[1];
        int centerX = getWidth() / 2;
        int centerY = getHeight() / 2;
        // convert to radians
        float rad = (float) ((deg * Math.PI) / 180F);
        float s = (float) Math.sin(rad);
        float c = (float) Math.cos(rad);
        // translate point back to origin:
        x -= centerX;
        y -= centerY;
        // apply rotation
        float tmpX = x * c - y * s;
        float tmpY = x * s + y * c;
        x = tmpX;
        y = tmpY;
        // translate point back:
        x += centerX;
        y += centerY;
        coords[0] = x;
        coords[1] = y;
    } 
```

请参阅下面的链接

[http://evancharlton.com/thoughts/android-rotating-touch-events/](http://evancharlton.com/thoughts/android-rotating-touch-events/)

# sql - Groupby 排序和单行选择

> ID：11579709
> 
> 赞同：1
> 
> 时间：2012-07-20T12:47:57.153
> 
> 标签：sql, postgresql

立即免责声明：我认真做SQL已经有几年了，最近回来了。

给定一张桌子：

```
logical_id, instance_id, node_id, state, time_stamp
1, 1, a, starting, 1300003234
2, 1, a, up, 1300003235
**3, 1, b, starting, 1300003237**
4, 1, a, completed, 1300003239
5, 1, a, shutdown, 1300003240 
```

给定一个特定的 instance_id（例如 1），我想获取权威节点的最后一个状态记录（单行 - 以粗体突出显示），权威节点是最近进入“开始”的节点，在没有任何节点进入起始阶段，它只是要记录的最新节点。

我想我用 node_id 做一些表单 group by *(*而不是 filter) boolean (state = 'starting), time_stamp desc，但我似乎无法做到这一点，此外我认为 group by 必须在订购。

我正在使用 postgres 9.x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:58:52.837

没关系，一旦不需要 groupby，而是 ORDER BY (state='starting') desc, time_stamp desc LIMIT 1 似乎**只对单个记录有效。**最后，我选择了在 Holger 的一组中最有效的答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:03:37.840

这将检索最近的声明节点（如果存在），否则它将简单地返回最近的非起始节点。

```
SELECT U.logical_id, U.instance_id, U.node_id, U.state, U.time_stamp
FROM 
(
 SELECT M1.logical_id, M1.instance_id, M1.node_id, M1.state, M1.time_stamp, 1 AS node_type
 FROM MyTable M1
 WHERE M1.instance_id=1 AND M1.state='starting' 
 ORDER BY M1.time_stamp DESC LIMIT 1

 UNION

 SELECT M2.logical_id, M2.instance_id, M2.node_id, M2.state, M2.time_stamp, 0 AS node_type
 FROM MyTable M2
 WHERE M2.instance_id=1 
 ORDER BY M2.time_stamp DESC LIMIT 1
) AS U
ORDER BY U.node_type DESC  LIMIT 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:12:05.480

Select * from table where instance_id = 1 and time_stamp = max(time_stamp) and state = 'starting';

你试过这条路线吗？时间戳或到达其根的时间间隔很长。这可能会有所帮助，因为使用日期是人们永远不应该记住的事情之一

[http://www.postgresql.org/docs/8.2/static/functions-datetime.html](http://www.postgresql.org/docs/8.2/static/functions-datetime.html)

# javascript - 字母表中的选择

> ID：11579713
> 
> 赞同：-1
> 
> 时间：2012-07-20T12:48:04.110
> 
> 标签：javascript, html

我有一张按字母顺序排列的城市表格，还有一张按字母顺序排列的表格。我想在这个表中选择一个字母，淡出不以这个字母开头的城市，只淡出有这个首字母的城市。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:55:12.180

其实这很简单。将处理程序（一个简单函数）绑定`onclick`到字母表的行。在该函数中，从鼠标事件中获取单击的字母，遍历城市表的行并检查城市名称是否以单击的字母开头。然后，您可以显示或隐藏该行`element.style.display = "block" / "none";`

顺便说一句，在 JavaScript 中遍历表格很简单，您可以使用以下解决方案：
[如何在 javascript 中遍历表格行和单元格？](https://stackoverflow.com/questions/3065342/how-do-i-iterate-through-table-rows-and-cells-in-javascript)

我暂时不会发布任何代码，您应该先尝试自己实现一些东西。

# excel - Excel - 无法打开 https// < > 无法下载您请求的信息----如何禁用

> ID：11579714
> 
> 赞同：2
> 
> 时间：2012-07-20T12:48:03.803
> 
> 标签：excel

如何禁用“无法打开 https// ...PATH...无法下载您请求的信息”消息？当我打开一些文件时，我得到了这个。这真的很烦人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:53:35.477

我使用以下链接编辑我的消息，您将在其中找到解决方案：http: [//blogs.technet.com/b/the_microsoft_excel_support_team_blog/archive/2011/11/15/quot-cannot-download-the-information-you-requested -quot-executing-web-query-from-excel.aspx](http://blogs.technet.com/b/the_microsoft_excel_support_team_blog/archive/2011/11/15/quot-cannot-download-the-information-you-requested-quot-executing-web-query-from-excel.aspx)

不过，它与网络查询有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-26T11:31:52.863

这是一个已知问题，以下是解决该问题的步骤。
您需要编辑注册表并添加一个键
单击开始 --> 运行，键入`regedit`然后按回车键。
找到下面的注册表项，它可能是其中任何一个，具体取决于操作系统和 Office 版本

```
HKLM\SOFTWARE\Wow6432Node\Microsoft\Office\9.0\Common\Internet\ 
OR
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\9.0\Common\Internet\
OR
HKLM\SOFTWARE\Wow6432Node\Microsoft\Office\15.0\Common\Internet\ 
OR
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\15.0\Common\Internet 
```

版本号可以是 9.0、15.0、12.0 等，但**始终使用已经具有 common\internet 子项的版本号**

找到它后，请执行以下操作

1.  确保选中**Internet**子项。在**编辑**菜单上，指向**新建**，然后单击 DWORD 值。添加以下注册表值： **值名称**：ForceShellExecute
2.  双击**ForceShellExecute**，然后将**Value 数据设置为 1。**单击**OK**。
3.  在**注册表**菜单上，单击**退出**。

解决方案取自[MS kb218153](https://support.microsoft.com/en-us/kb/218153)

**PS：**原始支持 kb 文章不完整，因为它只提到 9.0，我在 Windows 7 64 位和 Office 2013 Pro 上解决了这个问题，我添加的注册表项在 HKEY_LOCAL_MACHINE\SOFTWARE\ Microsoft\Office\15.0\Common\Internet

# python - 使用 pywinauto 单击系统托盘图标（音量）

> ID：11579721
> 
> 赞同：0
> 
> 时间：2012-07-20T12:48:29.733
> 
> 标签：python

如何使用 PywinAuto 单击系统托盘图标（音量）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T11:43:54.367

在这里，您有示例如何单击第一个按钮。使用 info.text 您可以尝试找到音量按钮。

```
from pywinauto import taskbar

sti = taskbar.SystemTrayIcons.WrapperObject()

print 'Clicking ', sti.Button(0).info.text
sti.Button(0).Click() 
```

# c# - 如何在 asp.net 中将 Content-Transfer-Encoding 设置为 8 位

> ID：11579723
> 
> 赞同：0
> 
> 时间：2012-07-20T12:48:40.297
> 
> 标签：c#, asp.net, smtp

我正在使用 c# 从我的 asp.net 应用程序发送邮件。

我的代码的一部分

```
 Message.SubjectEncoding = Message.BodyEncoding = System.Text.Encoding.UTF8; 
```

这发送**charset** =utf-8 但**Content-Transfer-Encoding** :base64

我[在 C# 中使用 SmtpClient 发送电子邮件时遇到了问题，](https://stackoverflow.com/questions/1456815/problem-sending-email-with-smtpclient-in-c-sharp)但我还没有找到如何将 Content-Transfer-Encoding 设置为 8 位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:30:50.480

我知道这是一个老问题，但它是一个有趣的问题。

我在这里找到了解决方案： [https ://idevelopdotnet.wordpress.com/2009/03/04/content-transfer-encoding-systemnetmailmailmessage/](https://idevelopdotnet.wordpress.com/2009/03/04/content-transfer-encoding-systemnetmailmailmessage/)

基本上，您必须使用 AlternateViews，然后您可以设置 Content-Transfer-Encoding。虽然只有 7 位，而不是 8 位，但这对我来说已经足够了。

我不知道为什么 MS 搞得这么一团糟，但我花了好几个小时才找到正确的方法，以发送 HTML 和纯文本的方式发送它们。

# javascript - 日期选择器对所有字段使用下拉菜单 JavaScript 和 JQuery W/O Calendar

> ID：11579728
> 
> 赞同：0
> 
> 时间：2012-07-20T12:49:09.800
> 
> 标签：javascript, jquery, html, css

再会，

我正在尝试创建一个日期选择器，其中所有字段（YMD）都是下拉菜单，并自动选择月份影响在日期字段中可以选择的天数。

我不希望以任何方式显示日历。

感谢任何关于做什么的建议。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:03:59.153

这可能会有所帮助。

```
 $(function () {
            $("#monthSelect").on("change", function () {
                BindDays();
            });
            $("#yearSelect").on("change", function () {
                BindDays();
            });
            BindDays();
        });

        function BindDays() {
            var month = $("#monthSelect").val();
            var dayDropDown = $("#daySelect");
            dayDropDown.empty();
            if (month == 2) {
                for (var i = 1; i <= 28; i++) {
                    dayDropDown.append("<option value=" + i + ">" + i + "</option>");
                }
                var year = $("#yearSelect").val();
                if (parseInt(year) % 4 == 0) {
                    dayDropDown.append("<option value='29'>29</option>");
                }
            }
            else if (month == 4 || month == 6 || month == 9 || month == 11) {
                for (var i = 1; i <= 30; i++) {
                    dayDropDown.append("<option value=" + i + ">" + i + "</option>");
                }
            }
            else {
                for (var i = 1; i <= 31; i++) {
                    dayDropDown.append("<option value=" + i + ">" + i + "</option>");
                }
            }
        } 
```

[http://jsfiddle.net/zTTQY/](http://jsfiddle.net/zTTQY/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T13:55:50.447

您可以从此处下载并包含 jquery [datepicker](http://www.kelvinluck.com/assets/jquery/datePicker/v2/demo/index.html) ：- 然后在您的页面中包含以下 js

```
(function()
{

    // initialise the "Select date" link
    $('#date-pick')
        .datePicker(
            // associate the link with a date picker
            {
                createButton:false,
                startDate:(new Date()).asString(),
                endDate:'31/12/2020'
            }
        ).bind(
            // when the link is clicked display the date picker
            'click',
            function()
            {
                updateSelects($(this).dpGetSelected()[0]);
                $(this).dpDisplay();
                return false;
            }
        ).bind(
            // when a date is selected update the SELECTs
            'dateSelected',
            function(e, selectedDate, $td, state)
            {
                updateSelects(selectedDate);
            }
        ).bind(
            'dpClosed',
            function(e, selected)
            {
                updateSelects(selected[0]);
            }
        );

    var updateSelects = function (selectedDate)
    {
        var selectedDate = new Date(selectedDate);
        $('#d option[value=' + selectedDate.getDate() + ']').attr('selected', 'selected');
        $('#m option[value=' + (selectedDate.getMonth()+1) + ']').attr('selected', 'selected');
        $('#y option[value=' + (selectedDate.getFullYear()) + ']').attr('selected', 'selected');
    }
    // listen for when the selects are changed and update the picker
    $('#d, #m, #y')
        .bind(
            'change',
            function()
            {
                var d = new Date(
                            $('#y').val(),
                            $('#m').val()-1,
                            $('#d').val()
                        );
                $('#date-pick').dpSetSelected(d.asString());
            }
        );

    // default the position of the selects to today
    var today = new Date();
    updateSelects(today.getTime());

    // and update the datePicker to reflect it...
    $('#d').trigger('change');
}); 
```

这样，您的日期选择器将转换为选择框，在给定范围内只能选择未来的日期。

供参考：http: [//www.kelvinluck.com/assets/jquery/datePicker/v2/demo/datePickerIntoSelects.html](http://www.kelvinluck.com/assets/jquery/datePicker/v2/demo/datePickerIntoSelects.html)

# javascript - HTML5 Canvas 等距地图深度排序

> ID：11579729
> 
> 赞同：0
> 
> 时间：2012-07-20T12:49:12.967
> 
> 标签：javascript, html, canvas, isometric

我对等距有问题。我不知道如何命名这个“问题”，但我会向您展示一些我得到的和我需要得到的东西。

我的代码现在绘制类似：http: [//2.bp.blogspot.com/_rqhF_8E1nlA/R59d_PmoREI/AAAAAAAAAGo/3yHpmy55moc/s400/lore2.png](http://2.bp.blogspot.com/_rqhF_8E1nlA/R59d_PmoREI/AAAAAAAAAGo/3yHpmy55moc/s400/lore2.png)

但我需要画这样的东西：http: [//3.bp.blogspot.com/_rqhF_8E1nlA/R59epfmoRFI/AAAAAAAAAGw/cE_o-A0bvm0/s400/lore3.png](http://3.bp.blogspot.com/_rqhF_8E1nlA/R59epfmoRFI/AAAAAAAAAGw/cE_o-A0bvm0/s400/lore3.png)

我听说这是“深度排序”但它是什么？我如何应用到我的代码以及我在哪里可以学习这个？

我的代码：http: [//jsdo.it/keichioor/exU1](http://jsdo.it/keichioor/exU1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:54:18.683

您需要按从最远到最近的方式对精灵进行排序（因此较近的精灵会渲染在后面的精灵之上）。

所以...

```
blocks.sort(function(a, b) {
    return a.z - b.z;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:57:41.390

我想这就是你要找的，让我知道

我刚刚分叉了你的项目

[http://jsdo.it/EricRobinson/8h4E](http://jsdo.it/EricRobinson/8h4E)

# ms-access - MS Access 发送电子邮件（不是来自 Outlook 或用户的电子邮件）

> ID：11579730
> 
> 赞同：9
> 
> 时间：2012-07-20T12:49:20.453
> 
> 标签：ms-access, vba, outlook

我知道这个问题已经在各种情况下被问过几次，但我还没有找到一个明确的答案。我已经使用 Outlook 为访问应用程序实施了电子邮件，但我想摆脱这种情况。电子邮件的目的之一是在用户忘记密码时将其/或密码通过电子邮件发送给用户。他们可以选择登录屏幕的用户名，如果他们单击“忘记密码”，则会发送包含其登录信息的电子邮件（发送到与用户名关联的电子邮件地址）。

这样做的问题是电子邮件功能按原样从用户的机器发送一封带有 Outlook 的电子邮件。因此，用户将能够“忘记密码”其他用户名并查看自己的 Outlook 发件箱（已发送项目）以查看敏感信息。

有没有办法像php的邮件功能一样，从服务器发送邮件？我希望从同一电子邮件地址（即（support@company.com））发送电子邮件，而不是在安全提示后从用户的 Outlook 地址发送。如果这是不可能的，我对任何其他解决方法的想法持开放态度。

我还要补充一点，安装任何必须安装在每个潜在用户机器上的软件都是不可行的。

这可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-20T13:58:22.693

Windows 包括一个称为协作数据对象或 CDO 的对象。此对象允许您使用任何 SMTP 服务器发送电子邮件，前提是满足其他先决条件（防火墙打开、ISP 未阻止端口、在 SMTP 服务器上配置帐户、SMTP 服务器允许中继等）。

我发现的大多数示例都使用后期绑定，这是首选。在我对 XP 的测试中，如果您更喜欢使用早期绑定，正确的库引用似乎是“Microsoft CDO for Windows 2000 Library”。

重要的是要知道，任何时候发送电子邮件都必须通过（或从）某种电子邮件服务器发送。这意味着您必须通过该电子邮件服务器进行身份验证，并且通常还意味着您需要使用该电子邮件服务器上存在的“发件人”电子邮件地址发送电子邮件。

下面是一些使用后期绑定的代码：

```
Const cdoSendUsingPickup = 1
Const cdoSendUsingPort = 2
Const cdoAnonymous = 0
' Use basic (clear-text) authentication.
Const cdoBasic = 1
' Use NTLM authentication
Const cdoNTLM = 2 'NTLM

Public Sub SendEmail()
    Dim imsg As Object
    Dim iconf As Object
    Dim flds As Object
    Dim schema As String

    Set imsg = CreateObject("CDO.Message")
    Set iconf = CreateObject("CDO.Configuration")
    Set flds = iconf.Fields

    ' send one copy with SMTP server (with autentication)
    schema = "http://schemas.microsoft.com/cdo/configuration/"
    flds.Item(schema & "sendusing") = cdoSendUsingPort
    flds.Item(schema & "smtpserver") = "mail.myserver.com"
    flds.Item(schema & "smtpserverport") = 25
    flds.Item(schema & "smtpauthenticate") = cdoBasic
    flds.Item(schema & "sendusername") = "email@email.com"
    flds.Item(schema & "sendpassword") = "password"
    flds.Item(schema & "smtpusessl") = False
    flds.Update

    With imsg
        .To = "email@email.com"
        .From = "email@email.com"
        .Subject = "Test Send"
        .HTMLBody = "Test"
        '.Sender = "Sender"
        '.Organization = "My Company"
        '.ReplyTo = "address@mycompany.com"
        Set .Configuration = iconf
        .Send
    End With

    Set iconf = Nothing
    Set imsg = Nothing
    Set flds = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-20T13:43:25.023

这适用于 MS Access 2010 / Windows 7

```
sMailServer = "myISPsmtp" 'Not just any old smtp
sMailFromAddress = "me"
sMailToAddress = "me"

Set ObjMessage = CreateObject("CDO.Message")
sToAddress = sMailToAddress
sSubject = "Subject"
sBody = "MailBody"

ObjMessage.Subject = sSubject
ObjMessage.From = sMailFromAddress
ObjMessage.To = sToAddress
'ObjMessage.cc = sCCAddress
ObjMessage.TextBody = sBody
'ObjMessage.AddAttachment sMailAttachment
ObjMessage.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
ObjMessage.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = sMailServer
ObjMessage.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
ObjMessage.Configuration.Fields.Update
ObjMessage.send 
```

更多信息： http: [//msdn.microsoft.com/en-us/library/ms526318 (v=exchg.10).aspx](http://msdn.microsoft.com/en-us/library/ms526318(v=exchg.10).aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-10T18:27:51.747

我无法将此添加到评论中，因为我没有足够的声誉，所以请不要砍我。

“似乎这种方法可以让你欺骗我服务器上的任何东西。刚刚注意到有一个 addAttachment 方法。它可以只使用相对路径，比如 Excel 表吗？”

它对我有用（Access 2010、Exchange 2010）：

.AddAttachment（“这里的网址”）

[https://msdn.microsoft.com/en-us/library/ms526453(v=exchg.10).aspx](https://msdn.microsoft.com/en-us/library/ms526453(v=exchg.10).aspx) [https://msdn.microsoft.com/en-us/library/ms526983(v=exchg.10) .aspx](https://msdn.microsoft.com/en-us/library/ms526983(v=exchg.10).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-13T22:27:20.760

以下 MS-Access VBA 代码适用于 smtp.office365.com。您确实指示 smtpusessl=true，但您没有指定端口，否则您会收到错误 5.7.57。

```
Sub SMPTTest2()
Set emailObj = CreateObject("CDO.Message")

emailObj.From = "name@myaddress.com"
emailObj.To = "name@youraddress.com"
emailObj.Subject = "Test CDO"
emailObj.TextBody = "Test CDO"
'emailObj.AddAttachment "c:\windows\win.ini"

Set emailConfig = emailObj.Configuration

emailConfig.Fields("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
emailConfig.Fields("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1
emailConfig.Fields("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "smtp.office365.com"
'Exclude the following line    
'emailConfig.Fields("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 587
emailConfig.Fields("http://schemas.microsoft.com/cdo/configuration/smtpusessl") = True
emailConfig.Fields("http://schemas.microsoft.com/cdo/configuration/sendusername") = "name@myaddress.com"
emailConfig.Fields("http://schemas.microsoft.com/cdo/configuration/sendpassword") = "mypassword"
emailConfig.Fields.Update

emailObj.Send

If Err.Number = 0 Then MsgBox "Done"
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-05T09:00:38.167

在我的公司，我使用了另一种解决方案。我创建了一个带有 COM 类/对象的 C# 类库。COM 类可以在您的 Access 应用程序中实现，这样您就可以使用 C#（例如 Mailing）的所有优点，并且仍然在 Access 中使用它（调用它）。

唯一的缺点是您必须在所有使用您的访问应用程序的计算机上注册您的类库 (DLL)。我已经通过一个在 Access 应用程序启动时执行的简单 power-shell 脚本完成了这项工作。

一个基于 COM 的库的良好开端在这里：[https ://www.codeproject.com/Articles/7859/Building-COM-Objects-in-C](https://www.codeproject.com/Articles/7859/Building-COM-Objects-in-C)

如果您想了解更多有关它的信息，那么我很乐意为您提供帮助。

# batch-file - 如果从驱动器运行批处理文件，则停止它

> ID：11579731
> 
> 赞同：1
> 
> 时间：2012-07-20T12:49:25.257
> 
> 标签：batch-file

嗨，如果批处理文件是从特定驱动器运行的，我想停止它。我已经尝试过这样的事情，但它不起作用。如果有人有更好的主意，我将不胜感激。

```
if %CD%=="^.*C:\" (goto :CDrive) 
```

其中 :CDrive 是一条错误消息，表示用户正在尝试从错误的驱动器运行它。

干杯克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:51:05.850

您可以使用子字符串来检查：

```
if "%CD:~0,2%"=="C:" goto CDrive 
```

另一种选择可能是您只需明确设置您期望的驱动器：

```
pushd X: 
```

或使用完整路径而不是相对路径。

# c++ - 你能在 C++ 内联汇编中建议我更好的解决方案吗？

> ID：11579732
> 
> 赞同：2
> 
> 时间：2012-07-20T12:49:25.910
> 
> 标签：c++, optimization, assembly, inline-assembly

我正在学习汇编，并开始在 Digital-Mars C++ 编译器（英特尔 sytanx 更易于阅读）中对 SSE 和 MMX 寄存器进行实验。我已经完成了一个将 var_1 作为值并将其转换为 var_2 数字系统的程序（现在是 8 位。稍后将其扩展为 32 64 128）。程序通过两种方式做到这一点：

1.  `__asm`内联

2.  %(modulo) 运算符的常用 C++ 方式。

问题：你能告诉我更有效的使用 xmm0-7 和 mm0-7 寄存器的方法吗？你能告诉我如何用 al,ah... 8 位寄存器交换它们的确切字节吗？

与我的计算机（pentium-m centrino 2.0GHz）上的 __asm 相比，C++ 通常方式中的常用 %(modulo) 运算符非常慢。如果你能告诉我如何摆脱 __asmm 中的除法指令，它会更快。

当我运行程序时，它给了我：

```
(for the values: var_1=17,var_2=2,all loops are 200M times)

17 is 10001 in number system 2
__asm(clock)...........: 7250    <------too bad. it is 8-bit calc.
C++(clock).............: 12250   <------not very slow(var_2 is a power of 2)

(for the values: var_1=33,var_2=7,all loops are 200M times)
33 is 45 in number system 7
 __asm(clock)..........: 2875   <-------not good. it is 8-bit calc.
 C++(clock)............: 6328   <----------------really slow(var_2 is not a power of 2) 
```

第二个 C++ 代码（带有 % 运算符的那个）：///////////////////////////////// //////////////////

```
t1=clock();//reference time
for(int i=0;i<200000000;i++)
{
    y=x;
    counter=0;
    while(y>g)
    {   

        var_3[counter]=y%g;
        y/=g;
        counter++;
    }

     var_3[counter]=y%g;
}   
t2=clock();//final time 
```

_asm 代码：​​/////////////////////////////////////// ///////////////////////////////////////// ///////////

```
 __asm  // i love assembly in some parts of C++
        {

        pushf   //here does register backup
        push eax
        push ebx
        push ecx
        push edx
        push edi

            mov eax,0h      //this will be outer loop counter init to zero
            //init of medium-big registers to zero
            movd xmm0,eax    //cannot set to immediate constant: xmm0=outer loop counter 
            shufps xmm0,xmm0,0h //this makes all bits zero
            movd xmm1,eax
            movd xmm2,eax   
            shufps xmm1,xmm1,0h
            shufps xmm2,xmm2,0h
            movd xmm2,eax 
            shufps xmm3,xmm3,0h//could have made pxor xmm3,xmm3(single instruction)
            //init complete(xmm0,xmm1,xmm2,xmm3 are zero)

            movd xmm1,[var_1] //storing variable_1 to register
            movd xmm2,[var_2] //storing var_2 to register    
            lea ebx,var_3     //calculate var_3 address
            movd xmm3,ebx     //storing var_3's address to register
            for_loop:
            mov eax,0h      
            //this line is index-init to zero(digit array index)
            movd edx,xmm2
            mov cl,dl       //this is the var_1 stored in cl
            movd edx,xmm1
            mov al,dl       //this is the var_2 stored in al
            mov edx,0h
            dng:
                mov ah,00h      //preparation for a 8-bit division
                div cl          //divide

                movd ebx,xmm3   //get var_3 address
                add ebx,edx     //i couldnt find a way to multiply with 4
                add ebx,edx     //so i added 4 times ^^
                add ebx,edx     //add   
                add ebx,edx     //last adding
                //below, mov [ebx],ah is the only memory accessing instruction
                mov [ebx],ah    //(8 bit)this line is equivalent to var_3[i]=remainder

                inc edx         //i++;
                cmp al,00h      //is division zero?
            jne dng             //if no, loop again

            //here edi register has the number of digits

            movd eax,xmm0       //get the outer loop counter from medium-big register
            add eax,01h         //j++;
            movd xmm0,eax       //store the new counter to medium-big register
            cmp eax,0BEBC200h           //is j<(200,000,000) ?
            jb for_loop     //if yes, go loop again
            mov [var_3_size],edx //now we have number of digits too!
         //here does registers revert back to old values
        pop edi
        pop edx
        pop ecx
        pop ebx
        pop eax
        popf     

        } 
```

整个代码：////////////////////////////////////// ///////////////////////////////////

```
#include <iostream.h>
#include <cmath>
#include<stdlib.h>
#include<stdio.h>
#include<time.h>
int main()
    {

    srand(time(0));

    clock_t t1=clock();
    clock_t t2=clock();

    int var_1=17;  //number itself
    int var_2=2;   //number system
    int var_3[100];  //digits to be showed(maximum 100 as seen )
    int var_3_size=0;//asm block will decide what will the number of  digits be

    for(int i=0;i<100;i++)
    {
    var_3[i]=0; //here we initialize digits to zeroes
    }

    t1=clock();//reference time to take
     __asm  // i love assembly in some parts of C++
        {

        pushf   //here does register backup
        push eax
        push ebx
        push ecx
        push edx
        push edi

            mov eax,0h      //this will be outer loop counter init to zero
            //init of medium-big registers to zero
            movd xmm0,eax    //cannot set to immediate constant: xmm0=outer loop counter 
            shufps xmm0,xmm0,0h //this makes all bits zero
            movd xmm1,eax
            movd xmm2,eax   
            shufps xmm1,xmm1,0h
            shufps xmm2,xmm2,0h
            movd xmm2,eax 
            shufps xmm3,xmm3,0h
            //init complete(xmm0,xmm1,xmm2,xmm3 are zero)

            movd xmm1,[var_1] //storing variable_1 to register
            movd xmm2,[var_2] //storing var_2 to register    
            lea ebx,var_3     //calculate var_3 address
            movd xmm3,ebx     //storing var_3's address to register
            for_loop:
            mov eax,0h      
            //this line is index-init to zero(digit array index)
            movd edx,xmm2
            mov cl,dl       //this is the var_1 stored in cl
            movd edx,xmm1
            mov al,dl       //this is the var_2 stored in al
            mov edx,0h
            dng:
                mov ah,00h      //preparation for a 8-bit division
                div cl          //divide

                movd ebx,xmm3   //get var_3 address
                add ebx,edx     //i couldnt find a way to multiply with 4
                add ebx,edx     //so i added 4 times ^^
                add ebx,edx     //add   
                add ebx,edx     //last adding
                //below, mov [ebx],ah is the only memory accessing instruction
                mov [ebx],ah    //(8 bit)this line is equivalent to var_3[i]=remainder

                inc edx         //i++;
                cmp al,00h      //is division zero?
            jne dng             //if no, loop again

            //here edi register has the number of digits

            movd eax,xmm0       //get the outer loop counter from medium-big register
            add eax,01h         //j++;
            movd xmm0,eax       //store the new counter to medium-big register
            cmp eax,0BEBC200h           //is j<(200,000,000) ?
            jb for_loop     //if yes, go loop again
            mov [var_3_size],edx //now we have number of digits too!
         //here does registers revert back to old values
        pop edi
        pop edx
        pop ecx
        pop ebx
        pop eax
        popf     

        }
    t2=clock(); //finish time
    printf("\n assembly_inline(clocks): %i  for the 200 million calculations",(t2-t1)); 

        printf("\n value %i(in decimal) is: ",var_1);
for(int i=var_3_size-1;i>=0;i--)
{
    printf("%i",var_3[i]);
}
printf(" in the number system: %i \n",var_2);

//and: more readable form(end easier)
    int counter=var_3_size;
    int x=var_1;
    int g=var_2;
    int y=x;// backup
t1=clock();//reference time

for(int i=0;i<200000000;i++)
{
    y=x;
    counter=0;
    while(y>g)
    {   

        var_3[counter]=y%g;
        y/=g;
        counter++;
    }

     var_3[counter]=y%g;
}

t2=clock();//final time
printf("\n C++(clocks): %i  for the 200 million calculations",(t2-t1)); 

printf("\n value %i(in decimal) is: ",x);
for(int i=var_3_size-1;i>=0;i--)
{
    printf("%i",var_3[i]);
}
printf(" in the number system: %i \n",g);
return 0; 
```

}

编辑：这是 32 位版本

```
 void get_digits_asm()
{
    __asm
    {

        pushf       //couldnt store this in other registers 
        movd xmm0,eax//storing in xmm registers instead of pushing
        movd xmm1,ebx//
        movd xmm2,ecx//
        movd xmm3,edx//
        movd xmm4,edi//end of push backups

        mov eax,[variable_x]
        mov ebx,[number_system]
        mov ecx,0h
        mov edi,0h

        begin_loop:
        mov edx,0h
        div ebx             
        lea edi,digits  
        mov [edi+ecx*4],edx
        add ecx,01h
        cmp eax,ebx
        ja begin_loop

        mov edx,0
        div ebx
        lea edi,digits
        mov [edi+ecx*4],edx
        inc ecx
        mov [digits_total],ecx

        movd edi,xmm4//pop edi
        movd edx,xmm3//pop edx
        movd ecx,xmm2//pop ecx
        movd ebx,xmm1//pop ebx
        movd eax,xmm0//pop eax
        popf            
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:18:48.763

代码当然可以简单很多：（仿照C++版本，不包含push和pop，未测试）

```
 mov esi,200000000
_bigloop:
  mov eax,[y]
  mov ebx,[g]
  lea edi,var_3
  ; eax = y
  ; ebx = g
  ; edi = var_3
  xor ecx,ecx
  ; ecx = counter
_loop:
  xor edx,edx
  div ebx
  mov [edi+ecx*4],edx
  add ecx,1
  test eax,eax
  jnz _loop
  sub esi,1
  jnz _bigloop 
```

但是如果它比 C++ 版本更快，我会感到惊讶，事实上，如果基数是 2 的幂，它几乎肯定会更慢 - 所有理智的编译器都知道如何将除法和/或模数转换为两个成位移位和按位与。

* * *

这是一个使用 ab 8 位除法的版本。类似的警告适用，但现在除法甚至可能溢出（如果`y / g`超过 255）。

```
 mov esi,200000000
_bigloop:
  mov eax,[y]
  mov ebx,[g]
  lea edi,var_3
  ; eax = y
  ; ebx = g
  ; edi = var_3
  xor ecx,ecx
  ; ecx = counter
_loop:
  div bl
  mov [edi+ecx],ah
  add ecx,1
  and eax,0xFF
  jnz _loop
  sub esi,1
  jnz _bigloop 
```

# php - 缩小/混淆 PHP 和 Javascript 的混合

> ID：11579738
> 
> 赞同：2
> 
> 时间：2012-07-20T12:49:41.440
> 
> 标签：php, javascript, obfuscation

我的项目由两种不同类型的 javascript 组成：

1.  外部常规 .js 文件。
2.  `<script>`嵌入到 PHP 代码中的代码，javascript 的某些部分是从 PHP 生成的，例如：

`var a = <?php echo Res::a; ?>;`

现在我想混淆/缩小整个项目：外部和嵌入式 javascripts 和 PHP 本身。不幸的是，我见过的所有工具都适用于单个 .js 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:56:21.813

我认为这个问题过于具体，无法用一个通用工具来回答。

一种方法可以是在您的 Javascript 中使用占位符来替换 PHP 代码。

```
var a = PHP_SOURCE_1; 
```

使用 js 压缩器（例如 Yui Compressor [http://developer.yahoo.com/yui/compressor/](http://developer.yahoo.com/yui/compressor/) ）缩小您的 javascript，然后用原始 PHP 源代码替换占位符。

理想情况下，为了正确缩小您的 javascript 代码，您需要外部化您的嵌入式脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T07:29:48.740

> 现在我想混淆/缩小整个项目：外部和嵌入式 javascripts 和 PHP 本身。不幸的是，我见过的所有工具都适用于单个 .js 文件。

试试[VarHammer JS 混淆器](http://www.varhammer.com)

# excel - Excel整列修改

> ID：11579739
> 
> 赞同：0
> 
> 时间：2012-07-20T12:49:45.187
> 
> 标签：excel

我想修改一个 excel 文件。例如，我有一列价格不同...一个单元格的编号为 15，另一个单元格的编号为 10 等等。所以我想修改这些数字并添加数字 8加上新数字的 5%。例如，第一个数字将变为 15+8+(23*5%)，而数字 23 是 15+8 的总和。有人可以帮我一下，我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:16:24.773

LittleBobbyTables 的答案是完全正确的。但是，我有一些我想分享的偏好。

对于包含 5% 的单元格，我会有一个 NamedRange（我假设这是一个销售税率，所以我将其命名为 TaxRate，如果它是其他名称，您可以使用不同的名称）

那么我的公式将是

```
=(A1 + 8) * (1 + TaxRate) 
```

然后填写

这样，如果您更改了 TaxRate，您只需在一处更改即可。还使用 1 + TaxRate 使您的论坛更易于阅读。

编辑：很好的 Gimp，我误读了这个问题。编辑修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T12:52:57.050

假设单元格 A1 为 15，单元格 B1 为 5，将此公式放在单元格 C1 中，并根据需要向下拖动：

```
=(A1 + 8) + ((A1 + 8) * 0.05) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T21:01:36.210

不需要公式。插入`8`备用单元格，复制该单元格，选择所有要顶起的值，然后使用“添加”操作选择性粘贴。然后重复`1.05`和 Operation Multiply。

# groovy - 在 Groovy 中捕获进程输出

> ID：11579740
> 
> 赞同：18
> 
> 时间：2012-07-20T12:49:51.417
> 
> 标签：groovy

我有一个 Groovy 脚本，它通过一个目录递归查找 .png 文件，并在每个文件上调用[pngquant](http://pngquant.org/)（一个命令行实用程序）。pngquant 的输出应该打印在终端上。相关代码为：

```
def command = "pngquant -f -ext .png"

root.eachFileRecurse(groovy.io.FileType.FILES) {File file ->

    if (file.name.endsWith('.png')) { 
        println "Compressing file: $file"

        def imgCommand = "$command $file.absolutePath"

        Process pngquantCmd = imgCommand.execute()
        pngquantCmd.consumeProcessOutput(System.out, System.err)        
    }
} 
```

该脚本工作正常，但是一旦处理了所有文件，似乎 stout 仍在被重定向，因为命令提示符永远不会出现，除非我使用`Ctrl`+终止该进程`C`。我是否需要以某种方式“撤消”

```
pngquantCmd.consumeProcessOutput(System.out, System.err) 
```

还是有更好的方法将此过程的输出重定向到控制台？我想我可以简单地通过添加来解决这个问题`System.exit(0)`，但这似乎不是正确的解决方案。该问题仅发生在 Linux 上。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-20T13:09:29.897

代替

```
 pngquantCmd.consumeProcessOutput(System.out, System.err) 
```

无论进程的情况如何，这将启动几个线程来读取输出并继续前进，您应该尝试

```
 pngquantCmd.waitForProcessOutput(System.out, System.err) 
```

这将重定向流程输出，然后等待它完成，然后再继续:-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-13T17:38:44.060

你也可以做

```
Process pngquantCmd = imgCommand.execute();
def output= pngquantCmd.text;
println("Output : " + output); 
```

# android - 在android中处理来电

> ID：11579741
> 
> 赞同：0
> 
> 时间：2012-07-20T12:49:52.450
> 
> 标签：android

在我的应用程序中，我想检测来电，我想用我的自定义布局隐藏默认的来电布局，到目前为止，我已经设法获得来电的状态，但我无法隐藏默认的来电屏幕.. .below 是我的代码和我的 android 清单文件...任何帮助将不胜感激..

```
@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    Log.i("DEBUG", "on recive called");
    String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);
    String number = intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER);

    if (TelephonyManager.EXTRA_STATE_RINGING.equals(state))
    {
        abortBroadcast();
        Log.d("MPR", "Its Ringing [" + number + "]");
        //start activity
        Intent i = new Intent();
        i.setClassName("com.ezest.callerid", "com.ezest.callerid.CustomCallActivity");
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(i);
    }

    if (TelephonyManager.EXTRA_STATE_IDLE.equals(state))
    {
        Log.d("MPR", "Its Idle");
    }
    if (TelephonyManager.EXTRA_STATE_OFFHOOK.equals(state))
    {
        Log.d("MPR", "Its OffHook");
    }

} 
```

显现

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <receiver android:name="MYPhoneStateListener">
        <intent-filter android:priority="999999">
            <action android:name="android.intent.action.PHONE_STATE"></action>
        </intent-filter>
    </receiver>
    <activity
        android:label="@string/app_name"
        android:name=".CallerIDActivity" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name="CustomCallActivity">
    </activity>

</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:00:35.207

当发生定义的动作时，android操作系统会向所有定义的广播接收器发送广播以执行此动作。它根据优先级顺序完成这项工作。我可以看到你已经做到了。将该代码复制到要取消广播的位置。

```
abortBroadcast() 
```

Android 操作系统将停止向其他广播接收者广播

# javascript - 如何处理 HTML5 画布中的许多图像？

> ID：11579745
> 
> 赞同：2
> 
> 时间：2012-07-20T12:50:23.220
> 
> 标签：javascript, html, html5-canvas

我对 Html5 画布和 Javascript 非常陌生。我正在尝试这个：

```
function animate() {    
   var image1 = new Image();
   image.src = /path
   var image2 = new Image();
   image2.src = /path
   for(;;)
   {
        //change value of x and y so that it looks like moving
        context.beginPath();
        context.drawImage(<image>, x, y );
        context.closePath();
        context.fill();
   }
} 
```

## 编辑：

我`animate`每 33ms 调用一次函数：

```
if (playAnimation) {
            // Run the animation loop again in 33 milliseconds
            setTimeout(animate, 33);
        }; 
```

如果我按照这里给出的答案，我会得到图像**，**并且不会进一步移动。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T12:54:55.367

**更新**：根据问题中的新信息，您的问题（重述）是您想要

1.  等待所有图像首先加载，*然后*开始使用它们制作动画，或者
2.  开始制作动画并仅在可用时使用图像。

两者都在下面描述。

## 1.加载许多图像并仅在完成后继续

使用这种技术，我们立即加载所有图像，当最后一个加载完毕时，我们运行自定义回调。

### 演示：http: [//jsfiddle.net/3MPrT/1/](http://jsfiddle.net/3MPrT/1/)

```
// Load images and run the whenLoaded callback when all have loaded;
// The callback is passed an array of loaded Image objects.
function loadImages(paths,whenLoaded){
  var imgs=[];
  paths.forEach(function(path){
    var img = new Image;
    img.onload = function(){
      imgs.push(img);
      if (imgs.length==paths.length) whenLoaded(imgs);
    }
    img.src = path;
  });
}

var imagePaths = [...]; // array of strings
loadImages(imagePaths,function(loadedImages){
  setInterval(function(){ animateInCircle(loadedImages) }, 30);
}); 
```

## 2\. 跟踪到目前为止加载的所有图像

使用这种技术，我们立即开始制作动画，但只有在加载后才绘制图像。我们的圈子会根据目前加载的图像数量动态改变尺寸。

### 演示：http: [//jsfiddle.net/3MPrT/2/](http://jsfiddle.net/3MPrT/2/)

```
var imagePaths = [...]; // array of strings
var loadedImages = [];  // array of Image objects loaded so far

imagePaths.forEach(function(path){
  // When an image has loaded, add it to the array of loaded images
  var img = new Image;
  img.onload = function(){ loadedImages.push(img); }
  img.src = path;
});

setInterval(function(){
  // Only animate the images loaded so far
  animateInCircle(loadedImages);
}, 100); 
```

*并且，如果您希望图像旋转一圈而不是一圈移动：*

### 旋转图像：http: [//jsfiddle.net/3MPrT/7/](http://jsfiddle.net/3MPrT/7/)

```
ctx.save();
ctx.translate(cx,cy); // Center of circle
ctx.rotate( (angleOffset+(new Date)/3000) % Math.TAU );
ctx.translate(radius-img.width/2,-img.height/2);
ctx.drawImage(img,0,0);
ctx.restore(); 
```

* * *

*原始答案如下。*

通常，您必须等待每个图像加载完成：

```
function animate(){
  var img1 = new Image;
  img1.onload = function(){
    context.drawImage(img1,x1,y1);
  };
  img1.src = "/path";

  var img2 = new Image;
  img2.onload = function(){
    context.drawImage(img2,x2,y2);
  };
  img2.src = "/path";
} 
```

您可能希望通过使用对象使此代码更加干燥：

```
var imgLocs = {
  "/path1" : { x:17, y:42  },
  "/path2" : { x:99, y:131 },
  // as many as you want
};

function animate(){
  for (var path in imgLocs){
    (function(imgPath){
      var xy = imgLocs[imgPath];
      var img = new Image;
      img.onload = function(){
        context.drawImage( img, xy.x, xy.y );
      }
      img.src = imgPath;
    })(path);
  }
} 
```

# java - 强制java释放Java中的所有文件锁/句柄

> ID：11579746
> 
> 赞同：14
> 
> 时间：2012-07-20T12:50:33.437
> 
> 标签：java, file, file-locking

我的 Java 应用程序（相当多的代码）执行大量文件操作。在我的应用程序中，我需要将文件从一个位置移动到另一个位置，为此我使用`Files.move`JDK7 中的方法。

当我尝试执行此操作时，我收到一条错误消息，告诉我该文件正在使用中。我知道这是我的代码的一部分锁定了这个资源。

在调用移动/重命名文件的函数之前，如何强制我的 Java 应用程序释放所有锁？

如果这是不可能的，是否有一种简单的方法来检查我的代码的哪一部分正在锁定文件？考虑到代码量，在我的整个代码库中寻找未关闭的文件句柄将是一场噩梦。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T14:09:50.270

在调试器的帮助下，您可以查看内存中的所有对象实例（在 Netbeans 中，这将是 Windows | Debugging | Loaded Classes，然后右键单击 -> Show instances）。然后，您可以查看您拥有的所有`FileInputStream`/`FileOutputStream`实例，并识别那些指向您尝试移动的文件的实例。找到对文件的引用后，您可以看到谁仍然持有该引用。

如果没有人持有对该文件的引用，则该实例可能在没有调用的情况下被丢弃`close()`，并且该文件通常只有在垃圾回收后才会被释放。这使得以前的方法毫无用处，因为我认为调试器会自动为您收集这些流。也许您可以在流构造函数中放置一个条件断点，并告诉它仅在构造函数参数引用您的文件时才停止。

如果您找不到任何东西，作为最后的手段，您可以尝试`System.gc()`在移动操作之前拨打几个电话，看看您是否有任何改进。显然，这只是快速而肮脏的修复，给您一些时间，直到您找到实际问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T14:52:02.053

除了正确关闭流（最好在一个块内）之外的任何解决方案`try.. finally`都将是一项糟糕的工作，并且有可能使事情变得比现在更不稳定。

我知道在大型代码库中解决这个问题很痛苦。如果您不想在代码中费力，[FindBugs](http://findbugs.sourceforge.net/)擅长定位未关闭的流。有一个 Eclipse 插件，您可以将它发现的错误过滤给您感兴趣的人。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-23T08:09:44.713

File() 对象不会锁定文件，但 FileStream (FileInputStream/FileOutputStream) 会锁定它。因此，您必须为您的 Streams 编写一个 HelperClass（例如 Singleton），以记录所有 Streams。

**但是请注意，如果您的代码中有泄漏，修复错误比硬关闭所有文件要好得多。**

# c++ - gdb 找不到 clang++ 编译的源文件

> ID：11579747
> 
> 赞同：9
> 
> 时间：2012-07-20T12:50:33.767
> 
> 标签：c++, macos, gdb, clang, waf

使用 clang++ 编译我的项目时，源文件的路径显然不包含在目标代码中。这意味着 gdb 无法找到用于显示代码的源文件。对于特定情况，我可以使用 gdb 的`directory`命令来添加目录，但是我的项目有很多源目录，这很快就会变得很烦人。

当我将配置切换为使用 g++ 时，gdb 只会找到我所有的源文件。

此功能适用于 Snow Leopard 的 clang++ 2.9，但不适用于 Lion 的 clang++ 3.1。我有 XCode 4.3.2。

是否有强制在目标文件中使用完整路径的 clang 选项？我的配置可能有其他问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T06:19:46.333

我发现了这一点：在使用分层生成文件构建项目时会发生问题。如果从父目录（在我的 makefile: 中）构建了子目录，`make -w -C sub-dir`则 gdb 无法打开源文件。当更改到子目录并仅为该目录调用 make 时，gdb 会找到源。您可以通过在生成的目标文件中搜索构建路径来验证这一点。我用过`strings object-file | grep $HOME`。

我还注意到：这不是针对一个目标文件发生的：这个文件没有用 CC 编译。这个文件是用 esql 编译的。最后，esql调用CC。

这就是我尝试这种解决方法的原因：不要直接从 make 调用 clang。从 shell 脚本调用 clang。

```
$ cat ~/bin/mycc

/usr/bin/cc "$@"

$ export CC=mycc
$ make 
```

欢呼！gdb 打开源文件！

顺便说一句：替换`make -w -C sub-dir`为`(cd sub-dir;make -w)`是另一种解决方法。

# excel - Excel，如何在单元格公式中显示值而不是引用

> ID：11579748
> 
> 赞同：3
> 
> 时间：2012-07-20T12:50:34.147
> 
> 标签：excel, excel-formula

当您在 Excel 中单击一个单元格时，您会看到一个类似的公式`=A1+B1`。那是带有单元格引用的公式。我想查看带有单元格值的公式，例如：`=10+20`.

```
A1 =10           //Cell A1 has the value 10
A2 =20           //Cell A2 has the value 20
C2 =A1+B1        //Cell C2 has the value A1 + A2

D2 =10+20        //I want Excel to derive this. 
```

我不希望在单元格或任何内容中显示公式。我仍然希望 C2 显示 30。我只是想要它，以便如果我单击 C2，我可以`=10+20`在公式栏中看到。

或者，如果 C2 在显示计算的位置显示注释（因此单击 C2 将显示注释“=10+20”，这也可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T12:59:49.310

Excel 不是这样工作的。如果您在单元格中有一个公式，那么这就是将显示在公式栏中的内容。

**编辑**

但是，您可以使用 VBA（来自`Tools > Macros > Visual Basic Editor`）编写代码，用 A + B 的值更新 C 单元格的内容，如下所示：

```
Private Sub HideFormula()
    Dim lastrow As Long, r1 As Long

    ' Get the last row in the worksheet
    lastrow = ActiveSheet.Cells.SpecialCells(xlCellTypeLastCell).Row

    For r1 = 1 To lastrow

        ' If A & B aren't blank, make the formula of cell C equal to A + B.
        If Sheet1.Range("$A$" & r1).Value <> "" And _
            Sheet1.Range("$B$" & r1).Value <> "" Then

            ' In the example, C2 = A1 + B1, so offset C by one
            Sheet1.Range("$C$" & (r1 + 1)).Value = _
                "=" & Sheet1.Range("$A$" & r1).Value & "+" & _
                Sheet1.Range("$B$" & r1).Value

        End If

    Next

End Sub 
```

**编辑 2**

如果您想用公式中的值替换 C 单元格的内容，您可以使用该`.Formula`值找到其公式，然后从那里开始：

```
Private Sub ReplaceFormulaWithValues()
    Dim lastrow As Long, r1 As Long
    Dim temp As String, arTemp

    ' Get the last row in the worksheet
    lastrow = ActiveSheet.Cells.SpecialCells(xlCellTypeLastCell).Row

    For r1 = 1 To lastrow

        ' If A & B aren't blank, make the formula of cell C equal to A + B.
        If Sheet1.Range("$C$" & r1).Value <> "" Then

            ' Get the formula for the current C cell
            temp = Replace(Sheet1.Range("$C$" & r1).Formula, "=", "")

            ' Create an array by splitting the formula on the + sign
            arTemp = Split(temp, "+")

            Sheet1.Range("$C$" & r1).Value = _
                "=" & Sheet1.Range(arTemp(0)).Value & "+" & _
                Sheet1.Range(arTemp(1)).Value

        End If

    Next

End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T13:03:21.163

这是不可能的，但如果原因是您想快速识别这些值，您可以使用“跟踪先例”，它会在一张纸上向相关字段绘制箭头，而用户无需识别所有单元格和范围时间。
如果这是您的目的，也许会有所帮助...
您可以在功能区的“公式”选项卡中找到此功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-05T09:38:12.233

这是一个回答您的第一个问题的技巧：

在公式栏中，在公式内选择要查看...的值的单元格引用，例如 A1，然后按 F9。嘿 presto，计算公式中突出显示的部分：=10+A2。

仍然在编辑栏中，现在对 A2 执行相同操作，您会看到 =10+20 单元格中显示的值仍然是 30，但它不再来自 A1 和 A2，因为这些单元格中的值已经在你的公式中解决。按 ENTER 接受评估的公式。

您可以使用 F9 来评估公式的任何部分，以查看 Excel 将返回的内容（如果可以），您可以在较长的公式中执行多次以逐个检查部分。注意！您在公式栏中选择/突出显示的部分必须是一个“完整”的短语，可以评估，例如完整的括号集、公式中的所有参数等。

当较长的公式返回错误并且您想找出导致问题的部分时，这非常有用……我一直都在使用它。在数组公式等中查找单个无效值或显示范围内的值时非常有用。注意！适用长度限制...

最后，一旦您查看了公式的评估组件，请务必点击 Esc，以便公式返回到最初的状态。否则，您的公式只会变成一系列数字或字符串，而不再用作公式。如果您忘记了这一点，请撤消/Ctrl+Z 恢复您的公式。

要回答您的第二个问题：有一个 Excel 函数 N("...") 允许您在公式内部添加注释作为文本字符串，而不是在单独的注释框中。

例如：=SUM($B$2:$B$21)+N("所有 20 名销售代表的总销售额。")

=N("any text string") 总是计算为 0（使用上面的提示来确认这一点），因此添加 0 不会改变您的答案，但允许各个公式随身携带自己的小 Rem 语句。N(3) 计算为 3, ，而 N("3") 计算为 0，顺便说一句。

只是为了好玩，您可以通过将 N() 语句添加到如下公式中来保护/更改工作表： =SUM($B$2:$B$21)/N(IF($F$3="Go",1,"1" ))

其中 $F$3 （一些无害的单元格，文本颜色为白色）必须在其中输入单词“Go”以停止将公式除以 0。您可以将其除以一些随机数等，从而使结果毫无意义。 . 或者至少让某人慢下来。

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-11T17:34:15.703

您可以使用 CONCATENATE 来获得所需的结果。对于您的情况，请输入以下函数：

D2 =连接（“=”，A1，“+”，A2）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-07-01T16:20:14.387

这并不复杂。选择要评估的单元格，然后单击公式 > 评估 > 继续单击评估，直到它显示您正在查找的单元格中的值。如果公式中包含的单元格太多，那就有点麻烦了。

# android - Android C2DM 消息丢失？

> ID：11579751
> 
> 赞同：0
> 
> 时间：2012-07-20T12:50:42.403
> 
> 标签：android, android-c2dm, android-notifications

我正在使用 android C2DM 发送通知。我正在使用 C2dmSharp。我正在尝试向我的手机发送 200 条不同的通知。在服务器端，我得到了一个 id=[ID of sent message] 的 OK 响应（就像[这里](https://developers.google.com/android/c2dm/#push)记录的那样），所以我猜我的服务做得很好。但在我的手机上，我只收到一些通知……不是 200 条！好的，我知道这不是有保证的服务，但它就像 90% 的通知未发送。我做错什么了吗？实际上是否可以连续向一台设备发送 200 条消息？

如果你知道一个更好的地方问这个问题，请赐教:)

我正在使用[它](https://github.com/Redth/C2DM-Sharp/tree/master/C2dmSharp.Server)来发送通知

这是代码：

```
if (notificationService != null)
            {
                notificationService.Start();
                foreach (var itemToProcess in itemsToProcess)
                {
                    itemToProcess.NotificationDateTime = DateTime.Now;
                    mobile.SubmitChanges();

                    string deviceToken = GetCleanDeviceToken(itemToProcess.MobileDevice.PushNotificationIdentifier);
                    var extras = new NameValueCollection();
                    extras.Add("salemessage", itemToProcess.MobileDeviceNotificationText.Text);
                    extras.Add("ismultisale", "false");
                    if (itemToProcess.SaleId.HasValue) extras.Add("saleid", itemToProcess.SaleId.Value.ToString());
                    try
                    {   
                        Thread.Sleep(200);
                        notificationService.QueueMessage(deviceToken, extras, "key");
                    }
                    catch (Exception exception)
                    {
                        //logging
                    }
                }

                notificationService.Stop();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:35:54.627

因此，由于不推荐使用 C2DM，让我们使用 GCM！对于 .NET 服务器，有[https://github.com/Redth/PushSharp](https://github.com/Redth/PushSharp)

# javascript - 在javascript中将字符串转换为int时出错

> ID：11579762
> 
> 赞同：0
> 
> 时间：2012-07-20T12:51:15.933
> 
> 标签：javascript, substring

我正在尝试将数字字符串转换为数字，然后我想增加（或减少）它的值，最后它应该被写回它的原始位置（在一个跨度中）。但是当我尝试 parseInt 时，我总是得到 NaN：

```
 var like_value = "0";
    if (navigator.userAgent.indexOf("Firefox") != -1)//firefox
        like_value = document.getElementById('mySpan').innerHTML;
    else
        like_value = document.getElementById('mySpan').innerText;

    like_value = like_value.substring(1, like_value.length - 1);
    var real_number = parseInt(like_value, 10);
    real_number++;
    alert(real_number);//it displays NaN !!!
    if (navigator.userAgent.indexOf("Firefox") != -1)//firefox
        document.getElementById('mySpan').innerHTML = real_number;
    else
        like_value = document.getElementById('mySpan').innerText = real_number; 
```

我认为我的子字符串应该有问题，当然我得到了我的期望，但也许它无法正确转换为 int

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:54:29.083

尝试打印出您的 like_value 是什么。如果字符串无法转换为数字，则返回 NaN，因此您的字符串一定有问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:00:42.390

如果您`" (11)"`在子字符串操作之前有，那么您`"(11"`在删除第一个和最后一个字母后就有了。

这会解析为 NaN。

问题是字符串周围有空格或换行的原因有很多。

我建议像这样清理你的字符串：

```
var like_value = document.getElementById('mySpan').innerHTML;
like_value = like_value.replace(/[\n\r\t\(\)]/g,); // this also remove the parenthesis
var real_number = parseInt(like_value, 10); 
```

# r - 如何在不重新启动 PC 的情况下清理 R 内存？

> ID：11579765
> 
> 赞同：73
> 
> 时间：2012-07-20T12:51:28.723
> 
> 标签：r

我在 R（在 Windows 下）中运行我的代码，其中涉及大量内存数据。我试图用来`rm(list=ls())`清理内存，但似乎内存仍然被占用，我无法重新运行我的代码。我试图关闭 R 并再次重新启动 R，但它是相同的，似乎内存仍然被占用，因为当我运行它说它不能分配内存的代码时（但它第一次可以）。内存似乎只有在我重新启动 PC 后才清理干净。

有什么办法可以清理内存，这样我就可以重新运行我的代码，而无需每次都重新启动我的电脑？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-07-23T08:31:20.280

也许您可以尝试使用该功能`gc()`。调用`gc()`会导致垃圾收集发生。在删除大对象后调用可能很有用`gc()`，因为这可能会提示 R 将内存返回给操作系统。 `gc()`还返回占用内存的摘要。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2016-04-14T08:49:30.037

我遇到了与 R 相同的问题。我挖掘了一下并提出了一个解决方案，我们需要重新启动 R 会话以完全清理内存/RAM。为此，您可以在从工作区中删除所有内容后使用简单的代码。代码如下：

```
rm(list = ls())

.rs.restartR() 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-10-18T10:27:45.080

使用`ls()`函数查看哪些 R 对象正在占用空间。使用 rm("objectName") 从 R 内存中清除不再需要的对象。也看到[这个](https://stackoverflow.com/questions/8813753/what-is-the-difference-between-gc-and-rm)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-09-11T11:56:05.700

```
memory.size(max=T) # gives the amount of memory obtained by the OS
[1] 1800
memory.size(max=F) # gives the amount of memory being used
[1] 261.17 
```

用保罗的例子，

```
m = matrix(runif(10e7), 10000, 1000) 
```

现在

```
memory.size(max=F)
[1] 1024.18 
```

清理内存

```
gc()
memory.size(max=F)
[1] 184.86 
```

换句话说，现在应该再次清除内存。如果循环代码，最好在`gc()`循环的最后一行添加 a，以便在开始下一次迭代之前清除内存。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-23T09:04:37.897

Linux（Fedora 16）下的一个例子显示当 R 关闭时内存被释放：

```
$ free -m                                                                                                                                                                                                                                    
             total       used       free     shared    buffers     cached                                                                                                                                                                    
Mem:          3829       2854        974          0        344       1440                                                                                                                                                                    
-/+ buffers/cache:       1069       2759                                                                                                                                                                                                     
Swap:         4095         85       4010 
```

使用 2854 兆字节。接下来我打开一个 R 会话并创建一个大的随机数矩阵：

```
m = matrix(runif(10e7), 10000, 1000) 
```

创建矩阵时，使用 3714 MB：

```
$ free -m                                                                                                                                                                                                                                    
             total       used       free     shared    buffers     cached                                                                                                                                                                    
Mem:          3829       3714        115          0        344       1442                                                                                                                                                                    
-/+ buffers/cache:       1927       1902                                                                                                                                                                                                     
Swap:         4095         85       4010 
```

关闭 R 会话后，我很好地取回了我使用的内存（2856 MB 可用）：

```
$ free -m                                                                                                                                                                                                                                    
             total       used       free     shared    buffers     cached                                                                                                                                                                    
Mem:          3829       2856        972          0        344       1442                                                                                                                                                                    
-/+ buffers/cache:       1069       2759                                                                                                                                                                                                     
Swap:         4095         85       4010 
```

当然，您使用 Windows，但您可以在 Windows 中重复此练习，并报告在 R 中创建此大型数据集之前和之后可用内存的发展情况。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-20T10:00:44.673

只需添加此内容以供参考，以防有人需要重新启动并立即运行命令。

我使用这种方法只是为了从系统中清除 RAM。确保您已删除所有不再需要的对象。也许`gc()`也可以事先提供帮助。但是没有什么比重新启动 R 会话更能清除 RAM 了。

```
library(rstudioapi)
restartSession(command = "print('x')") 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-07-02T15:07:28.890

rm() 和 gc() 能做的只有这么多。正如 Gavin Simpson 所建议的那样，即使您释放 R 中的实际内存，Windows 通常也不会回收它，直到您关闭 R 或需要它，因为所有明显的 Windows 内存都已填满。

这通常不是问题。但是，如果您正在运行大型循环，这有时会导致长期内存碎片，这样即使您释放内存并重新启动 R - 碎片内存也可能会阻止您分配大块内存。尤其是如果在您运行 R 时为其他应用程序分配了碎片内存。rm() 和 gc() 可能会延迟不可避免的情况，但更多的 RAM 更好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-21T14:02:26.697

我发现进入我的“tmp”文件夹并删除所有挂起的 rsession 文件很有帮助。这通常会释放任何似乎“卡住”的内存。

# java - 我怎样才能让我的 cardLayout 工作？

> ID：11579768
> 
> 赞同：1
> 
> 时间：2012-07-20T12:51:59.130
> 
> 标签：java, swing, layout

我正在尝试开发一个 LARP 字符管理器，并且在我的框架内有一个面板，其中包含我想使用 CardLayout 交换的所有窗口。这是我的 ContainerPane 代码。

```
public class ContainerPane extends JPanel {
    private static final long serialVersionUID = -4799973935806714569L;
    private JPanel deckOfPanes = null;
    private PlayerManagerPane myPlayerManagerPane = null;
    private GameManagerPane myGameManagerPane= null;
    private CharacterManagerPane myCharacterManagerPane = null;

    final static String CHANGETOCHARACTERMANAGERPANE = "Character Manager";
    final static String CHANGETOPLAYERMANAGERPANE = "Player Manager";
    final static String CHANGETOGAMEMANAGERPANE = "Game Manager";

    public ContainerPane(EventListener myEventListener) {
        myPlayerManagerPane = new PlayerManagerPane(myEventListener);
        myGameManagerPane = new GameManagerPane(myEventListener);
        myCharacterManagerPane = new CharacterManagerPane(myEventListener);
        deckOfPanes= new JPanel(new CardLayout());
        deckOfPanes.add(myCharacterManagerPane,CHANGETOCHARACTERMANAGERPANE);
        deckOfPanes.add(myPlayerManagerPane,CHANGETOPLAYERMANAGERPANE);
        deckOfPanes.add(myGameManagerPane,CHANGETOGAMEMANAGERPANE);

        CardLayout cardLayout = (CardLayout) ((ContainerPane) this).getDeckOfPanes().getLayout();
        cardLayout.show(deckOfPanes,CHANGETOCHARACTERMANAGERPANE);
    }

public JPanel getDeckOfPanes() {
    return deckOfPanes;
} 
```

首先，我想构造函数的最后一行将确保当它被调用时，它会在顶部显示某张卡片。

在我的代码的其他地方，我想使用菜单栏交换卡片。这是我的 EventHandler 类的代码：

```
public void swapView(String key) {
    CardLayout cardLayout = (CardLayout) ((ContainerPane) myContainerPane).getDeckOfPanes().getLayout();
    cardLayout.show(myContainerPane.getDeckOfPanes(),key);
} 
```

这也行不通。我刚刚开始使用 Java，非常感谢您对此提供的任何帮助，我已经检查了教程和网络上的其他地方（包括堆栈溢出），据我所知，它应该可以工作。请，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T13:25:40.083

您尚未将 deckOfPanes 添加到您的 ContainerPane。添加：

```
 deckOfPanes = new JPanel(cardLayout);
    add(deckOfPanes); 
    // etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T01:04:20.660

来源（我的新博客）：http: [//goo.gl/SDHvX](http://goo.gl/SDHvX)

我在 SO 上遇到了很多答案，建议开发人员应该使用 CardLayout 在视图或面板之间切换。我知道它有效并且实施起来并不困难，但我认为这不是`CardLayout`最合适的方法。我已经为我正在调用的一个类编写了一个起点，该类`ViewSwitcher`负责在`JFrame`. 如果你拿出评论你会发现它实际上是一个非常小的类，并且很容易使用。当请求的视图尚未注册时，请随意添加 try / catch 块（即避免`NullPointerException`）

您还可以考虑向名为 View 的接口添加`onShow()`和`onHide()`方法，并将所有实例更改为`Container`to `View`。这将允许将来扩展处理视图开关 - 这`CardLayout`可能无法提供。

```
import java.awt.BorderLayout;  
import java.awt.Container;  
import java.util.HashMap;  
import javax.swing.JFrame;  

/**  
 * Used to switch views within a JFrame.  
 *  
 * @author FHMP  
 */    
public class ViewSwitcher {    

    /**  
     * Map to keep track of views according to their specified names  
     */    
    private HashMap<String, Container> views = new HashMap<>();    
    /**  
     * The host container that contains the views to be switched between  
     */    
    private Container host;    
    /**  
     * Used to keep track of the current view  
     */    
    private Container current;    

    /**  
     * Registers a view bound to a specified name  
     *   
     * @param name the name of the view  
     * @param view the view  
     */    
    public void registerView(Container view, String name) {    
        views.put(name, view);    
    }    

    /**  
     * Sets the host container that will contain the view 
     *   
     * @param host the host container  
     */    
    public void setHost(Container host) {    
        this.host = host;    
    }    

    /**  
     * Switches to the view bound to the specified name  
     *   
     * @param name the name of the view to switch to  
     */    
    public void switchTo(String name) {    
        Container view = views.get(name);    

        if(current != null){
           if(current == view) return;
           host.remove(current);   
        }  
        current = view;  

        host.add(view, BorderLayout.CENTER);    
        host.validate();    
        host.repaint(); // just to make sure      
    }    
} 
```

如果需要，它很容易适应，并且切换非常有效。在我的一个应用程序中，我为每个视图使用常量字段，而不必通过将它们加载到地图中来动态注册每个视图。此示例仅用于演示删除/添加组件而不是使用 CardLayout 的想法。你可以像这样使用它：

```
// JPanels a, b, c already initialised  
// JFrame frame is the main window  

ViewSwitcher switcher = new ViewSwitcher();  

switcher.setHost(frame);  

switcher.registerView(a, "menu");  
switcher.registerView(b, "main");  
switcher.registerView(c, "help");  

switcher.switchTo("help");  
switcher.switchTo("main"); 
```

# android - 如何更改多项选择的颜色以显示正确答案

> ID：11579779
> 
> 赞同：0
> 
> 时间：2012-07-20T12:52:32.577
> 
> 标签：android, android-layout, android-emulator

我正在做一个有 4 个选择的多项选择应用程序。如果用户（同时）按下了错误的答案，如何提示用户正确答案。这里是一个代码示例。

```
 //Question/Answer options listener
        optionOne.setOnClickListener(this);     //On First Option selection
        optionTwo.setOnClickListener(this);     //On Second Option selection
        optionThree.setOnClickListener(this);   //On Third Option selection
        optionFour.setOnClickListener(this);    //On Forth Option selection

        skip.setOnClickListener(this);          //On Question Skip      
        pause.setOnClickListener(this);         //On Game Pause
        end.setOnClickListener(this);           //On Game End

    }

    public void onClick(View v) {
        if(v.getId() == optionOne.getId()){
            onOptionSelected(optionOne.getText().toString());
        }else if(v.getId() == optionTwo.getId()){
            onOptionSelected(optionTwo.getText().toString());
        }else if(v.getId() == optionThree.getId()){
            onOptionSelected(optionThree.getText().toString());
        }else if(v.getId() == optionFour.getId()){
            onOptionSelected(optionFour.getText().toString());
        }else if(v.getId() == pause.getId()){   //True when Game is Paused 

    //When an option of a question is selected
    private void onOptionSelected(String option){
        if(!isGamePaused && !isGameEnded) { //true when game is being played
            ATriviaQuestion tTQuestion = myListOfTriviaQuestions.get(currentQuestionNumber);
            if(option.equals(tTQuestion.GetOptions().get(tTQuestion.GetAnswer() - 1))) {
                correct += 1;
                remainingTime = mySecondsPassed;
                totalPoints += remainingTime * pointsPerRemainingSecond; 
                totalPoints += pointsPerCorrectAnswer;
            }
            else{
                incorrect += 1;
                totalPoints -= pointsPerWrongAnswer;
            } 
```

我需要在这部分插入一些东西来显示正确的答案。

```
else{
    incorrect += 1;
    totalPoints -= pointsPerWrongAnswer;
    selectedOptionTxt.setBackgroundColor(Color.RED); 

Here is my .plist
<question>
<key>Question</key>
<string>What is the ....</string>
<key>Options</key>
<array>
<string>option 1</string>
<string>option 2</string>
<string>option 3</string>
<string>option 4</string>
</array>
<key>Answer</key>
<integer>2</integer>
 </question> 
```

这是另一个代码

```
public ATriviaQuestion(){
    isThisQuestionAsked = false;
    answer = -1;
    answered = "";
}

public String GetQuestion()
{ return this.question; }

public void SetQuestion(String _question)
{ this.question=_question; }

public ArrayList<String> GetOptions()
{ return this.options; }

public void SetOptions(ArrayList<String> _options)
{ this.options = _options; }

public int GetAnswer()
{ return this.answer; }

public void SetAnswer(int _answer)
{ this.answer = _answer; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:34:30.453

我能看到的最简单的方法是更改​​您的 onOptionSelected 方法以将 TextView 作为参数而不仅仅是字符串，您仍然可以在方法内部以与在方法外部相同的方式拉出字符串现在。您将获得更改背景颜色所需的参考。

```
//When an option of a question is selected
private void onOptionSelected(TextView selectedOptionTxt){
String option = selectedOptionTxt.getText().toString();

if(!isGamePaused && !isGameEnded) { //true when game is being played
    ATriviaQuestion tTQuestion = myListOfTriviaQuestions.get(currentQuestionNumber);
    if(option.equals(tTQuestion.GetOptions().get(tTQuestion.GetAnswer() - 1))) {
        correct += 1;
        remainingTime = mySecondsPassed;
        totalPoints += remainingTime * pointsPerRemainingSecond; 
        totalPoints += pointsPerCorrectAnswer;  
        selectedOptionTxt.setBackgroundColor(Color.GREEN);
    }
    else{
        incorrect += 1;
        totalPoints -= pointsPerWrongAnswer;
        selectedOptionTxt.setBackgroundColor(Color.RED); 
```

然后更改调用此方法的位置以传递整个 TextView 而不仅仅是字符串。像这样：

```
onOptionSelected(optionOne); 
```

请注意，您需要为这四个中的每一个都执行此操作，而不仅仅是我在这里展示的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:36:21.410

试试这个 ：

```
 if(v.getId() == optionOne.getId()){
            onOptionSelected(optionOne.getText().toString(),v);
        }else if(v.getId() == optionTwo.getId()){
            onOptionSelected(optionTwo.getText().toString(),v);
        }else if(v.getId() == optionThree.getId()){
            onOptionSelected(optionThree.getText().toString(),v);
        }else if(v.getId() == optionFour.getId()){
            onOptionSelected(optionFour.getText().toString(),v);
        }else if(v.getId() == pause.getId())}

    private void onOptionSelected(String option,View v){
        if(!isGamePaused && !isGameEnded) { //true when game is being played
            ATriviaQuestion tTQuestion = myListOfTriviaQuestions.get(currentQuestionNumber);
            if(option.equals(tTQuestion.GetOptions().get(tTQuestion.GetAnswer() - 1))) {
                correct += 1;
                remainingTime = mySecondsPassed;
                totalPoints += remainingTime * pointsPerRemainingSecond; 
                totalPoints += pointsPerCorrectAnswer;  
                v.setBackgroundResource(R.id.greenBackground);
            }
            else{
                incorrect += 1;
                totalPoints -= pointsPerWrongAnswer;
                v.setBackgroundResource(R.id.redBackground);

            } 
```

Where `R.id.greenBackground`- 你想在正确答案后面显示 `R.id.redBackground`的可绘制对象的 ID - 要在错误答案后面显示的可绘制对象的 ID

# tridion - 如何使用 JavaScript 获取组件和组件模板 tcm id？

> ID：11579780
> 
> 赞同：2
> 
> 时间：2012-07-20T12:52:45.900
> 
> 标签：tridion, tridion-2011

我需要从任何 Tridion 页面的 Component Presentation 选项卡中获取 Component 和 Component Template tcm id。

设想：

*   在 Tridion 的现有页面上。
*   转到“组件演示”选项卡。
*   当我单击“插入”按钮时，我想迭代组件和组件模板 tcm id 并将其显示在 JavaScript 警报框中。

我正在尝试找到确切的 javascript 文件/函数来完成此操作，但我找不到确切的文件/函数。

我正在使用 SDL Tridion 2011 SP1。

任何帮助/建议将不胜感激。

**编辑**

我有这个脚本，当我们单击“插入组件演示文稿”窗口中的“插入”按钮时，它将触发。

```
Tridion.Cme.Views.InsertCpDialog.prototype.onInsertClick = 
                    function InsertCpDialog$onInsertClick()
{
  var p = this.properties;
  var c = p.controls;
  var templateId = c.templateSelect.getValue();
  var components = c.list.getSelection().getItems();

  p.componentPresentationsAdded += components.length;

  var compId = components[components.length - 1];
  var component = $models.getItem(compId);
  if (component)
  {
    var userSettings = Tridion.UI.UserSettings.getInstance();
    if (userSettings && userSettings.isLoaded())
    {
      Tridion.UI.UserSettings.setLastSelectedLocation(
          component.getPublicationId(), $const.ItemType.COMPONENT, p.contextUri);
    }
  }

  this.fireEvent("insert", {
    components: components,
    template: templateId
  });
}; 
```

所以这里我会得到所选组件的tcm id和要插入的模板“compId”和“templateId”。现在我的问题是：如何检查此组件和模板是否已经存在于组件演示选项卡上？

如果我能够以某种方式获得页面上已经存在的所有组件和模板的 id（从我的“插入”按钮），那么我可以比较它们。但是我没有得到任何可以给我这些ID的功能。我在这里卡住了。

**编辑**

我正在尝试使用这些代码进入页面，但我无法获得正确的功能，该功能在单击插入时被触发，或者将返回那里列出的组件列表和模板 ID。

```
Extensions.Test.prototype.isEnabled = function Test$isEnabled(selection) {
  try
  {
    console.log($controls);
    var masterTabControl = $controls.getControl($("#MasterTabControl"), 
                                            "Tridion.Controls.TabControl");

    console.log(masterTabControl);
    alert("Mastercontrol - ComponentpresentationsTab");
    console.log(masterTabControl.getPage("ComponentPresentationsTab"));
    console.log("list of component presentations");
    console.log(masterTabControl.getPage("ComponentPresentationsTab").
                             getListComponentPresentations().getItems());
    console.log("list of get xml");
    console.log(masterTabControl.getPage ("ComponentPresentationsTab").
                             getListComponentPresentations().getItems().getXml);
  }
  (catch exc)
  {
  }
  return true;
} 
```

**编辑** 我使用此代码获得了 CP TAB 下列出的所有 CP Id。感谢@Frank van Puffelen

```
var p = this.properties;
var tgp = this.properties;
var c = p.controls;

var pageId = selection.getItem(0);
var masterTabControl = $controls.getControl($("#MasterTabControl"), 
                                            "Tridion.Controls.TabControl");
var compPresTab = masterTabControl.getPage("ComponentPresentationsTab");
var comPresList = p.compPresTab.getListComponentPresentations(); 
for (var i = 0; i <= myStringArray.length; i++) 
{     
  console.log(comPresList.getItems()[i].getComponentId());
  console.log(comPresList.getItems()[i].getComponentTemplateId());     
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T12:00:58.573

一旦你有了页面对话框的 Component Presentations 选项卡，你可以像这样得到 Component Presentations 的列表

```
comPresList = compPresTab.getListComponentPresentations(); 
```

您可以像这样检查 XML 格式的列表：

```
comPresList.getXml() 
```

或者，正如您似乎在代码片段中尝试的那样，您可以使用以下方式获取项目本身：

```
comPresList.getItems() 
```

这将为您提供一个对象列表，`Tridion.ContentManager.ComponentPresentation`您可以调用每个对象。`getComponentId``getComponentTemplateId`

```
comPresList.getItems()[0].getComponentId()
comPresList.getItems()[0].getComponentTemplateId() 
```

I got this information by taking [the snippet that John Winter provided you earlier](https://stackoverflow.com/questions/11446313/restrict-user-to-insert-same-component-and-template/11450424#11450424), pasting it into a Chrome JavaScript console and then doing a few text searches on the source tree (on disc) for key phrases such as `"insert"` (to find all handlers for the `insert` event) and `ComponentPresentation =` (to find the `ComponentPresentation` class).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T12:56:14.517

我在这里回答了这个问题：[限制用户插入相同的组件和模板](https://stackoverflow.com/questions/11446313/how-to-write-a-c-program-to-add-a-button/11450424#11450424)

似乎这个问题已经改变了，所以现在的答案似乎并不相关，但我相信这会帮助你弄清楚你需要做什么。

# javascript - 使用 jQuery 将 jQuery.parseXML 值转换为 HTML

> ID：11579785
> 
> 赞同：0
> 
> 时间：2012-07-20T12:53:00.017
> 
> 标签：javascript, jquery, html, xml, regex

需要将我收到的一些 XML 快速转换为 HTML。我需要淘汰 RegEx 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:01:05.673

如果 XML 包含数据结构，则使用 jQuery 模板功能。通过这种方式，您可以在 HTML 中定义每个记录/数据结构的表示。如果您使用 AngularJS 或 Knockout 等 javascript MVC 框架，除了 jQuery，您可以使用最少且可维护的代码将您的 XML 数据结构转换为 HTML。

带有 KnockoutJS 的 jQuery 模板示例[http://knockoutjs.com/documentation/template-binding.html](http://knockoutjs.com/documentation/template-binding.html)

如果 XML 包含 HTML 元素，那么您将很容易编写 XSL 并将 XML 转换为 HTML。Javascript 引擎具有 XSL 处理器，可以使用 XSL 模板将 XML 转换为 HTML

用于 XML 到 HTML 转换的客户端 XSLT 简介：http: [//www.w3schools.com/xsl/xsl_client.asp](http://www.w3schools.com/xsl/xsl_client.asp)

# jquery - jquery添加向下滚动分页以显示结果

> ID：11579786
> 
> 赞同：2
> 
> 时间：2012-07-20T12:53:01.017
> 
> 标签：jquery, django, django-pagination

目前我正在使用 django-pagination 在一页上显示有限的结果

```
...
{% autopaginate object_list 10 %}
{% for item in object_list %}
...
{{ item }}
...
{% endfor %}
...
{% paginate %}
... 
```

我需要 jquery 来做到这一点。在向下滚动页面时加载结果，例如[https://www.google.com.pk/search?hl=en&q=nature+wallpapers&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&biw=1304&bih=680&um =1&ie=UTF-8&tbm=isch&source=og&sa=N&tab=wi&authuser=0&ei=fFQJUILdN4bBtAbNhJGoCQ](https://www.google.com.pk/search?hl=en&q=nature+wallpapers&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&biw=1304&bih=680&um=1&ie=UTF-8&tbm=isch&source=og&sa=N&tab=wi&authuser=0&ei=fFQJUILdN4bBtAbNhJGoCQ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:46:03.660

您可以查看[django-endless-pagination](http://django-endless-pagination.readthedocs.org/en/latest/index.html)。这是另一个用于分页的 django 应用程序。它有[pagination-on-scroll](http://django-endless-pagination.readthedocs.org/en/latest/twitter_pagination.html#pagination-on-scroll)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:58:02.420

所以你在问如何使用 jquery 在 Django 中实现无限滚动。

有很多关于这个主题的信息，你试过谷歌吗？

[http://palewi.re/posts/2010/11/07/django-recipe-twitter-style-infinite-scroll/](http://palewi.re/posts/2010/11/07/django-recipe-twitter-style-infinite-scroll/)

# iis-7 - ColdFusion 10 升级后 IIS 7 停止工作

> ID：11579793
> 
> 赞同：1
> 
> 时间：2012-07-20T12:53:31.077
> 
> 标签：iis-7, coldfusion, installation, coldfusion-10, applicationhost

因此，在阅读了 Adob​​e 的文档后，了解从 ColdFusion 8 到 ColdFusion 10 会变得多么无缝，上周我试了一下。我像使用其他版本的语言一样完成了安装过程。最后它显示了一条消息。

> 安装成功，但有错误

在创建的日志文件中，我看到以下错误：

> 迁移错误：：检查“C:\ColdFusion8”是否是有效目录，并且是 ColdFusion MX 6 或 ColdFusionMX 7 的安装

作为记录，我的 ColdFusion 8 安装在该目录中。当我打开 Web 服务器配置工具时，它没有绑定到 IIS，即使我在安装过程中指定了“所有 IIS 站点”。当我尝试手动运行配置工具时，它无法识别 IIS。

因此，我尝试访问 IIS，却发现 IIS 不再提供网页服务，我什至无法在 IIS 中展开树来查看站点。它只是旋转。

所以我卸载了 ColdFusion 10 ......并且 IIS 仍然损坏。*在applicationhost.config*文件中仍有几个对 ColdFusion 10 的引用，必须在 IIS 响应之前将其删除。

我还没有发现任何其他人在使用 ColdFusion 时遇到过这种特殊的安装问题，所以任何建议都会非常有用。

* * *

## 更新

我从 Adob​​e 的网站重新下载了安装文件，以确保我拥有最新版本。我经历了以下。

在开始之前，我还制作了*applicationHost.config*文件的备份副本。

* * *

运行它确实安装的 64 位安装程序文件（在 Win Server 2008 64 位操作系统上），但从 ColdFusion 8 迁移失败。这次它似乎没有损坏 IIS。但我仍然收到 1 个警告和 1 个非致命错误，如下所示：

> 迁移错误：：检查“C:\ColdFusion8”是否是有效目录，并且是 ColdFusion MX 6 或 ColdFusionMX 7 的安装
> 
> 迁移错误：
> 
> 状态：警告
> 
> 附加说明：警告 - 无法从以前版本的 ColdFusion 迁移设置
> 
> 自定义操作：
> 
> com.macromedia.ia.action.MigrateColdFusionAction
> 
> 状态：错误
> 
> 附加说明：错误 - 类 com.macromedia.ia.action.MigrateColdFusionAction NonfatalInstallException null

因为我真的很想迁移我的 CF8 设置，所以我卸载了 ColdFusion 10，这就是我的 IIS 呈现此消息的时候：

> 获取 403：禁止访问被拒绝错误

恢复我的*applicationHost.config*文件将 IIS 恢复到原来的样子。

* * *

因此，剩下的选项很少，我尝试了 32 位安装程序，只是想看看会发生什么。

这次我在安装过程中收到了这个消息

> 无法配置 IIS 连接器。在 Windows 功能下的 IIS 中启用所需的选项 ASP.NET、ISAPI 扩展和 ISAPI 过滤器，然后重试。

好的……事情就是这样。我已经设置了所有这些，以及在 IIS 中启用的*CGI*甚至*IIS 6 Metabase Compatibility*，因此安装程序似乎无法识别它们。是的，我以管理员身份运行安装程序。

* * *

所以....对不起，如果那是长篇大论。有任何想法吗？

# android - 仅当我滚动到页面底部时才显示 android 底部按钮栏

> ID：11579794
> 
> 赞同：3
> 
> 时间：2012-07-20T12:53:30.937
> 
> 标签：android, android-layout, android-ui, android-view, android-button

在我正在设计的一个 android 4.1 应用程序中，我试图让我的底部栏有两个按钮是动态的，即即使我在页面顶部也不会停留在屏幕底部。我希望它仅在用户向下滚动到页面的最后时出现。现在，无论我怎么尝试，它仍然固定在屏幕底部。我真的很感激一些帮助。谢谢。

project_search_list.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" android:layout_width="fill_parent"
android:layout_height="fill_parent">

<ListView android:id="@android:id/list"
    android:layout_width="fill_parent" android:layout_height="0dip"
    android:layout_weight="1" android:drawSelectorOnTop="false"
    />

<ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom"
    android:contentDescription="@string/description"
    android:gravity="left"
    android:scaleType="fitXY" />

<TextView
    android:id="@+id/empty"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="left"
    android:text="" />

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" android:layout_height="wrap_content">

<LinearLayout android:id="@+id/footer" android:layout_width="fill_parent"
android:layout_height="wrap_content" android:orientation="horizontal"
android:layout_alignParentBottom="true" style="@android:style/ButtonBar">

<Button android:id="@+id/prev_10_results" android:layout_width="wrap_content"
    android:layout_height="wrap_content" android:layout_weight="1"
    android:text="@string/prev_10_results" />

<Button android:id="@+id/next_10_results" android:layout_width="wrap_content"
    android:layout_height="wrap_content" android:layout_weight="1"
    android:text="@string/next_10_results" />

</LinearLayout>
</ScrollView>
</LinearLayout> 
```

这是一个屏幕截图。注意到底部的按钮栏了吗？我希望它仅在我向下滚动到页面末尾时出现。

![截屏](../Images/d11168acc2d9730444805aa91a9eee50.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:07:46.807

这应该让你开始，检查 onscrollstatechanged 与 row is visible 然后采取正确的操作，如切换或动画按钮栏，如果你使用可见性消失，列表视图将发生在按钮栏之前的部分。这样你底部就没有空白空间：

```
@Override
public void onScrollStateChanged(AbsListView view, int scrollState) {

    if (scrollState == 0 && mListContent.getLastVisiblePosition() == 0
            && buttonbar.getVisibility() == View.GONE) {
        toggleButtonbar();
    } else if (mListContent.getLastVisiblePosition() != 0
            && buttonbar.getVisibility() == View.VISIBLE) {
        toggleButtonbar();
    }
} 
```

# asp.net - 在 IronSpeed 应用程序之上开发而不使用 IronSpeed？

> ID：11579795
> 
> 赞同：0
> 
> 时间：2012-07-20T12:53:34.073
> 
> 标签：asp.net, vb.net, ironspeed

我被要求对使用 IronSpeed 创建的 ASP.NET 应用程序进行维护/开发工作。现在要注意了： a) 客户不希望我使用 IronSpeed 进行进一步的工作，因为他们的许可证即将到期并且他们不想续订；b) 客户希望我与现有 UI 保持一致的外观。

原则上，这应该是可能的。但是代码看起来非常复杂且不直观（没有业务类，我看不到数据访问类等）。我觉得我可能走进了雷区。有人对这种情况有任何相关经验吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T00:39:06.333

这听起来有点奇怪。如果您只是将代码从 Iron Speed 中转储出来，您将放弃很多节省时间和易于维护的巨大好处。此外，该软件的成本相当适中。您每月只需 195 美元即可订阅，并在您不积极使用该软件时取消。

该工具确实会生成一个 n 层应用程序。您可以在此处了解有关代码模型的更多信息： [http ://www.ironspeed.com/Designer/9.1.0/WebHelp/Part_V/Code_Customization_Tutorial.htm#Code_Customization](http://www.ironspeed.com/Designer/9.1.0/WebHelp/Part_V/Code_Customization_Tutorial.htm#Code_Customization)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T23:04:06.613

是的，我在使用 IronSpeed 3.x 和 5.x 版本时有一些经验，但在当前的 9.x 版本中没有。

我发现使用 Visual Studio 维护应用程序既困难又费力，主要是因为 IronSpeed 以一种奇怪的方式使用自定义控件。鉴于订阅相对便宜，我的建议是不要这样做。但这确实取决于用于生成原始应用程序的 IronSpeed 版本。如果是 3.x 或 5.x 等旧版本，升级到 9.x 也可能是一个很大的痛苦。

# coding-style - 错误 - 消息如何

> ID：11579799
> 
> 赞同：0
> 
> 时间：2012-07-20T12:53:57.643
> 
> 标签：coding-style

我有疑问，也许它在编程中并不重要，但对我来说这很有趣。我正在编写一个解析器，现在，当他在某个地方的代码中长大时，嵌入某种警告非常重要。我的意思是，我有一个类加载器，如果你没有指定纹理的路径，解析器类将消息发送到控制台，没有指定该路径，但它的其余部分已加载。实际上我想问的是 - 是否有任何分类系统消息系统，我在哪里可以阅读它。

我的意思是资格系统消息，例如：

*   注意：olololo - 应用程序可以正常工作，但您应该注意此消息
*   注意：olololo - 可能导致程序失败的错误
*   WARNING: olololo - 未来的工作程序出现问题，无论如何都会导致错误，因此应用程序将被强制关闭。

如果从个人经验来看，我会很乐意接受任何建议）））是的，我只是在学习编程）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:01:12.920

如果您的意思是“我如何按严重性级别对日志消息进行分类”，这是[标准 Java 日志库](http://docs.oracle.com/javase/7/docs/api/java/util/logging/Level.html)使用的级别的示例：

```
SEVERE (highest value)
WARNING
INFO
CONFIG
FINE
FINER
FINEST (lowest value) 
```

或者，[sl4j](http://www.slf4j.org/api/org/apache/log4j/Level.html)

```
FATAL: designates very severe error events that will presumably lead the application to abort.
ERROR: designates error events that might still allow the application to continue running.
WARN: designates potentially harmful situations.
INFO: designates informational messages that highlight the progress of the application at coarse-grained level.
DEBUG: designates fine-grained informational events that are most useful to debug an application.
TRACE: designates finer-grained informational events than the DEBUG 
```

# c - 以二进制形式打印文件（1 和 0）

> ID：11579802
> 
> 赞同：0
> 
> 时间：2012-07-20T12:53:59.893
> 
> 标签：c, bash, hexdump

在 GZip 解码器的上下文中，我需要一个 unix 工具或 C 解决方案来以二进制形式在我的屏幕上打印我的压缩 gzip 文件。我真正需要的是能够以二进制而不是八进制、十进制或十六进制打印的 hexdump。

我很确定这个工具存在但我找不到它:-(

**编辑** 我想这样的编辑器很难找到，因为用例不能很频繁。就我而言，我的文件非常小，需要出于调试目的来搜索二进制“模式”，例如可能跨越多个字节的 10010011

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:08:02.897

```
perl -ne 'print unpack(B8,$_),$/for split//' FILE 
```

或在一行中有 8 个元素

```
perl -ne 'print unpack(B8,$_),++$i%8?" ":"\n"for split//;END{print"\n"}' 
```

没有换行符

```
perl -ne 'print unpack(B8,$_)for split//' FILE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:50:31.473

因为 Manuel 让我重新发帖，所以我完成了我上次写的评论，这里是调用：

```
od -t x1 FILE | sed 'h;x;s:^\(........\).*:\1:;x;s:^........::;s:0:0000:g;s:1:0001:g;s:2:0010:g;s:3:0011:g;s:4:0100:g;s:5:0101:g;s:6:0110:g;s:7:0111:g;s:8:1000:g;s:9:1001:g;s:a:1010:g;s:b:1011:g;s:c:1100:g;s:d:1101:g;s:e:1110:g;s:f:1111:g;H;x;s:\n::' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:53:51.527

只需编写一个小程序：

```
#include <stdio.h>

void binarywrite (unsigned char c)
{
    int i = 0;
    for (i = 0; i < 8; i++)
    {
        printf("%1d",(c>>(7-i)) & 1 );
    }
    printf(" ");
}

int main(int argc, char* argv[])
{
    char c = 0;

    if(argc >=2)
    {
        char* pfilename = argv[1];
        FILE *fp;
        fp = fopen(pfilename,"rb");
        char ch;
        while((ch = getc(fp)) != EOF)
        {
            binarywrite(ch);
        }
        fclose(fp);
    }

    return 0;
} 
```

您可以将其用作“./binarywite 文件名”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T13:25:16.920

你的编译器可以支持这个实用函数[ltoa](http://www.kev.pulo.com.au/pp/RESOURCES/cplusplus/ref/cstdlib/ltoa.html)

char *ltoa(long value, char * buffer, int radix);

这可以简化显示 radix = 2

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T13:02:03.753

从我做出的另一个答案（不幸的是，我现在找不到）我有这个功能来打印`int`二进制数字：

```
void print_bin(int n)
{
    for (int i = sizeof(n) * 8 - 1; i >= 0; i--)
        printf("%d", (int) ((n >> i) & 1));
} 
```

您可以将文件读取为整数，并使用此函数将值打印为二进制数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-20T13:30:22.120

```
od -t x1 FILE | sed 's:0:0000:g;s:1:0001:g;\
s:2:0010:g;s:3:0011;
...[replace every hex-digit up to F with the bin representation] ' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-05T09:31:26.590

xxd（通常与 vim 一起提供）可以直接转换为二进制表示：

```
xxd -b FILE 
```

为了切断输出的格式，可以附加一点 awk ，这样你就可以得到一个干净的 0 和 1 流：

```
xxd -b FILE | \
    awk '{ for (i=0; i<NF; i=i+1)
           { if ($i ~ /^[01][01][01][01][01][01][01][01]$/) printf $i }
         }; END { print "" }
    ' 
```

# clojure - Clojure：使用三个参数减少

> ID：11579804
> 
> 赞同：14
> 
> 时间：2012-07-20T12:54:18.333
> 
> 标签：clojure

`reduce`每当我必须一次处理一个项目（如reduce），累积某种结果（如reduce）但基于序列的前一个项目（不像reduce）时，我经常发现自己需要一种扩展。

例如（一个愚蠢的），如果当前项目和前一个项目都是偶数，则将累加器加 1，并减去其中一个是奇数。这只是一个愚蠢的案例，但我经常遇到这种问题。我一般做一个向量作为累加器，这样第一项是真正的聚合，第二项是前一项。这不是很优雅，当然也很冗长。

在这些情况下是否有核心功能可以提供帮助？处理此类问题最惯用的方法是什么？谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-20T13:23:43.643

`partition`救援。

```
(reduce (fn [i [a b]]
          (cond
            (and (even? a) (even? b)) (inc i)
            (and (odd? a) (odd? b))   (dec i)
            :else i))
        0 (partition 2 1 input)) 
```

或者更简洁一点：

```
(reduce (fn [i pair]
          (condp every? pair
            even? (inc i)
            odd?  (dec i)
            i))
        0 (partition 2 1 input)) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-20T18:09:52.663

对于这个特殊问题，我推荐 kotarak 的解决方案，使用分区来跟踪以前的元素。但是在一般情况下，除了reduce的最终“答案”之外，您还需要管理一些状态，您可以简单地通过一对或映射或其他方式进行reduce，最后得到累加器值。例如：

```
(defn parity [coll]
  (first (reduce (fn [[acc prev] x]
                   [(cond (and (even? prev) (even? x)) (inc acc)
                          (and (odd? prev) (odd? x)) (dec acc)
                          :else acc)
                    x])
                 [0 (first coll)], (rest coll)))) 
```

# javascript - 删除空 使用 jQuery

> ID：11579807
> 
> 赞同：0
> 
> 时间：2012-07-20T12:54:23.510
> 
> 标签：javascript, jquery

> **可能重复：**
> [使用 jQuery 删除空元素](https://stackoverflow.com/questions/1520981/remove-empty-elements-with-jquery)

我想`<li>`使用jQuery删除空。我正在尝试这样做，但我的代码没有按照我的要求工作。我的代码如下所示。

**脚本**

```
$(document).ready(function(e) {
    $('#u li').each(function() {
        if($(this).html(' ')) {
            $(this).remove();
        }
    });
}); 
```

**HTML**

```
<ul id="u">
    <li>hi</li>
    <li></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T12:57:52.037

它应该很简单：

```
$('#u li:empty').remove() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T12:55:54.713

您正在将 html 设置`<li>`为一个空格字符，而不是检查它是否为空。相反，试试这个（修剪可能是捕捉空格和换行符的好主意）：

```
if(!$.trim($(this).html())) {
    $(this).remove();
} 
```

此外，您可以使用 jQuery 的[`:empty`](http://jqapi.com/#p=empty-selector)选择器（这会检查所有子节点，包括文本节点）：

```
$('#u li:empty').remove(); 
```

但是，这不匹配具有“*不可见文本节点*”的元素，例如`<li> </li>`（一个空格）→ [jsfiddle](http://jsfiddle.net/zeYMN/1/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T12:57:11.593

```
<script>
    $(document).ready(function(e) {
        $('#u li').each(function() {
            if($(this).html().length == 0)
            {
                $(this).remove();
            }
        });
    });
</script> 
```

# linq - 为什么在 .ToList() 之后我无法访问 Count 属性

> ID：11579810
> 
> 赞同：1
> 
> 时间：2012-07-20T12:54:29.347
> 
> 标签：linq, list, ienumerable

我有这个代码：

```
var numbers = new []{ 1,2,3 };
IEnumerable<int> evenNumbers = numbers.Where(i=> i % 2 == 0); 
```

现在我把这个“集合”变成一个 List ：

```
evenNumbers = evenNumbers.ToList(); 
```

为什么现在我只能做`evenNumbers.Count()`而不能`evenNumbers.Count`？

和 ：

```
IList<int> evenNumbers = numbers.Where(i=> i % 2 == 0).ToList(); 
```

我可以。不会`evenNumbers = evenNumbers.ToList();`将 IEnumerable 物化为列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:01:50.977

对于您的编译器，evenNumbers 仍然是 IEnumerable 类型。您的编译器不知道它实际上是一个列表。如果将派生类型的对象分配给变量，则变量“evenNumbers”的类型不会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:02:15.167

`evenNumbers`变量仍在`IEnumerable<int>`赋值之后。您应该创建一个新的变量类型`IList<int>`或`List<int>`使用`Count`属性，因为它是在`IList<T>`接口中定义的。这就是你在第二个任务中所做的。

# mysql - 对多个表进行 SQL 匹配查询时的性能问题

> ID：11579811
> 
> 赞同：1
> 
> 时间：2012-07-20T12:54:36.453
> 
> 标签：mysql, sql, full-text-search, database-performance

我在运行使用 MyISAM 数据库的 SQL 查询时面临性能问题。

简而言之，我有 3 个表：
表：A（引擎 MyISAM。总记录：1847）
表：B（引擎 MyISAM。总记录：1110）
表：C（引擎 MyISAM。总记录：57867）

现在我正在运行的查询需要 623 秒才能执行，有时会发生来自服务器的连接（与 localhost 的情况相同）被中止。

以下是我正在执行的查询：

```
SELECT MATCH(A.title, A.description) AGAINST('Computer Graphic Artist') AS 'Score',
    A.code AS 'Code',
    B.cluster AS 'Cluster',
    B.pathway AS 'Pathway',
    A.title AS 'Role',
    A.description AS 'Description'
FROM B
INNER JOIN A ON B.code = A.code
INNER JOIN C ON B.code = C.code
WHERE MATCH(A.title, A.description) AGAINST('Computer Graphic Artist')
  OR MATCH(B.cluster, B.pathway, B.descripton) AGAINST('Computer Graphic Artist')
  OR MATCH(C.title) AGAINST('Computer Graphic Artist')
ORDER BY Score DESC, B.cluster ASC 
```

您也可以参考[Pastie](http://pastie.org/4289675)（如果您看不到这条 SQL）。我在适用的地方添加了 FULLTEXT 属性。

注意：表 A、B 和 C 也很少有重复记录。

请告诉我，如何优化此 SQL 以实现快速输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:45:14.510

首先要做的是确保在从每个表中查询的确切列集上都有一个 FULLTEXT 索引：

```
alter table A add fulltext index a_fti (title,description);
alter table B add fulltext index b_fti (cluster, pathway, descripton);
alter table C add fulltext index c_fti (title); 
```

然后我建议重写您的查询以使用 UNION 而不是 OR。我从 FULLTEXT 搜索中获得了更好的性能，特别是在 MySQL 中使用这种方法。

这是使用您的查询的示例：

```
select Score, Code, Cluster, Pathway, Role, Description
from
(
SELECT MATCH(A.title, A.description) AGAINST('Computer Graphic Artist') AS 'Score',
    A.code AS 'Code',
    B.cluster AS 'Cluster',
    B.pathway AS 'Pathway',
    A.title AS 'Role',
    A.description AS 'Description'
FROM B
INNER JOIN A ON B.code = A.code
INNER JOIN C ON B.code = C.code
WHERE MATCH(A.title, A.description) AGAINST('Computer Graphic Artist')
UNION
SELECT MATCH(A.title, A.description) AGAINST('Computer Graphic Artist') AS 'Score',
    A.code AS 'Code',
    B.cluster AS 'Cluster',
    B.pathway AS 'Pathway',
    A.title AS 'Role',
    A.description AS 'Description'
FROM B
INNER JOIN A ON B.code = A.code
INNER JOIN C ON B.code = C.code
WHERE MATCH(B.cluster, B.pathway, B.descripton) AGAINST('Computer Graphic Artist')
UNION
SELECT MATCH(A.title, A.description) AGAINST('Computer Graphic Artist') AS 'Score',
    A.code AS 'Code',
    B.cluster AS 'Cluster',
    B.pathway AS 'Pathway',
    A.title AS 'Role',
    A.description AS 'Description'
FROM B
INNER JOIN A ON B.code = A.code
INNER JOIN C ON B.code = C.code
WHERE MATCH(C.title) AGAINST('Computer Graphic Artist')
) as sub_query
ORDER BY Score DESC, Cluster ASC 
```

# jquery - 用于悬停背景颜色更改的 jQuery 绑定处理程序的淘汰赛在 IE8 中不起作用

> ID：11579816
> 
> 赞同：1
> 
> 时间：2012-07-20T12:55:22.623
> 
> 标签：jquery, css, internet-explorer-8, hover, knockout.js

我创建了一个自定义绑定处理程序，它可以在 Chrome 和 Firefox 中使用，但不幸的是在 IE8 中没有。它的目的是在用户将鼠标悬停在元素上时更改元素的背景颜色。当绑定到该元素的数据被“选中”时，它还会设置背景颜色（不仅仅是鼠标悬停），但如果它未被选中，则元素应返回其原始背景颜色。

在 IE8 中，元素不会返回到原始颜色（无法取消选择），[如此 jsFiddle 所示](http://jsfiddle.net/hbTtr/5/)。有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:25:19.137

好吧，这很愚蠢——我在 $e.css('background') 中使用了速记“background”而不是“background-color”。

# android - Android edittext 无法进入下一个edittext

> ID：11579820
> 
> 赞同：1
> 
> 时间：2012-07-20T12:55:36.427
> 
> 标签：android, dialog, android-edittext

我的活动中有 3 个编辑文本。如果edittext长度不等于0（第一个edittext的值将来自sqlite），则第一个edittext将设置为setFocusable（false）。所以当我开始活动时，焦点将放在第二个编辑文本上。如果我单击第一个编辑文本，则会出现一个对话框，其中包含“是”和“否”按钮。如果我单击是，它将专注于第一个编辑文本，我可以编辑该值。但是当我按下手机键盘上的回车键时，它不会将我引导到第二个编辑文本。它将停留在第一个编辑文本上。我可以转到第二个编辑文本的唯一方法是按后退按钮并单击第二个编辑文本。知道如何解决这个问题吗？

这是我的编辑文本代码：

```
if (txtBudgetText.getText().toString().length() != 0) {
        txtBudgetText.setFocusable(false);
        this.txtBudgetText = (EditText) findViewById(R.id.txtBudget);
        this.txtBudgetText.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // custom dialog
                if ((txtBudgetText.getText().toString().length() != 0) && (txtBudgetText.isFocused()==false) ) {
                    final Dialog dialog = new Dialog(context);
                    dialog.setContentView(R.layout.edit_budget);
                    dialog.setTitle("Confirmation");

                    // set the custom dialog components - text, image and
                    // button
                    TextView text = (TextView) dialog
                            .findViewById(R.id.text);
                    text.setText("Are you sure you want to edit your budget?");
                    ImageView image = (ImageView) dialog
                            .findViewById(R.id.image);
                    image.setImageResource(R.drawable.warning);

                    Button dialogYESButton = (Button) dialog
                            .findViewById(R.id.dialogButtonYes);
                    // if button is clicked, close the custom dialog
                    dialogYESButton
                            .setOnClickListener(new OnClickListener() {
                                public void onClick(View v) {
                                    EditText txtBudgetText = (EditText) findViewById(R.id.txtBudget);
                                    txtBudgetText.setFocusableInTouchMode(true);
                                    txtBudgetText.setFocusable(true);
                                    txtBudgetText.requestFocus();
                                    //txtBudgetText.setText("");
                                    dialog.dismiss();
                                }
                            });

                    Button dialogNOButton = (Button) dialog
                            .findViewById(R.id.dialogButtonNo);
                    // if button is clicked, close the custom dialog
                    dialogNOButton
                            .setOnClickListener(new OnClickListener() {
                                public void onClick(View v) {
                                    dialog.dismiss();
                                }
                            });

                    dialog.show();
                }
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:59:08.020

`txtBudgetText.setImeOptions(EditorInfo. IME_ACTION_NEXT);`在您调用后添加或通过在您的 EditText 布局声明中`findViewById`设置它在您的 layout.xml 中进行设置。`android:imeOptions="actionNext"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T14:15:51.630

试试下面的代码：

```
e1.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {

            if (e1.getText().toString().length() == 1) // size as per your
                                                        // requirement
            {
                e2.requestFocus();

            }
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {

        }
    }); 
```

# php - php中的点对点聊天应用程序

> ID：11579822
> 
> 赞同：-5
> 
> 时间：2012-07-20T12:55:50.127
> 
> 标签：php

我是 PHP 新手，我需要一些有关如何为组织开发点对点聊天的信息。我需要做什么？

我需要在哪里存储聊天信息？

您能否就此提出一些建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:58:10.297

您将聊天信息存储在 MySQL 数据库或其他数据库中。然后您的页面将使用 ajax 不断地重新加载数据。[这](http://forum.codecall.net/topic/58937-simple-chat-system-using-php-mysql-and-ajax/)是一个真正简单的。

# android - setContentView 在不同的线程中

> ID：11579823
> 
> 赞同：0
> 
> 时间：2012-07-20T12:55:52.473
> 
> 标签：android

我正在android平台上编写一个服务器客户端。如果其中一个客户端向其中一个发送消息，则首先将消息发送到服务器，然后服务器将其发送给客户端。当接收者客户端收到消息时，`setContentView`我必须打开消息屏幕。但它在不同的线程中接收消息，我将我的活动类作为参考传递。

```
Thread my = new MyThread(this); 
```

并且在线程类中我无法设置内容视图，因为给出了一个错误，比如`ViewRoot CalledFromWrongThread`我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T12:58:35.537

> UIThread 是应用程序执行的主线程。这是运行大多数应用程序代码的地方。您的所有应用程序组件（Activity、Services、ContentProviders、BroadcastReceivers）都在这个线程中创建，并且对这些应用程序的任何系统调用都在这个线程中执行。
> 
> 当你显式地生成一个新线程在后台做工作时，这段代码并不是不在 UIThread 上运行。那么如果这个后台线程需要做一些改变 UI 的事情会发生什么呢？这就是`runOnUiThread`它的用途。实际上，您应该使用 Handler（有关更多信息，请参见下面的链接）；它为这些后台线程提供了执行可以修改 UI 的代码的能力。他们通过将 UI 修改代码放入 Runnable 对象并将其传递给 RunOnUiThread 方法来实现此目的。

（有关什么是 UI 线程的更详细说明，请参阅[https://stackoverflow.com/a/3653478/448625 ）](https://stackoverflow.com/a/3653478/448625)

简而言之，这应该解决它：

```
runOnUiThread(new Runnable() {
    public void run() {
        // some code that needs to be ran in UI thread
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T13:00:32.710

```
ActivityName.this.runOnUiThread(new Runnable() {
     @Override
     public void run() {
         // set contentview here
     }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:56:22.227

```
ActivityName.this.runOnUiThread(new Runnable() {
     @Override
     public void run() {

     }
}); 
```

# android - 无法在 android/eclipse 上使用 Web 服务的值

> ID：11579826
> 
> 赞同：-1
> 
> 时间：2012-07-20T12:55:55.993
> 
> 标签：android, eclipse, web-services

现在我正在使用 android/eclipse 上的 SOAP Web 服务。它工作正常。请找到我的服务链接

“ [http://54.251.60.177/MobileWS/Student.asmx?wsdl](http://54.251.60.177/MobileWS/Student.asmx?wsdl) ”

“GetStudentInformation”，这是我正在使用的服务，其输入值为“111105009”

如果我将此值作为上述服务的输入，它只会在模拟器上显示如下图所示的结果，并公开显示这些内容。

**图像_1**

![在此处输入图像描述](../Images/6e59bae60551dd2dfc96727839e0a0c9.png)

**图像_2** ![在此处输入图像描述](../Images/ed66d81e0066a8e282361f2e19ebbcd0.png)

但这里我的问题是，上面的 image_2 显示了所有带有答案的 xml 标签，但我只需要显示我在 image_2 上提到的答案。如何实现这个概念？

**请在下面找到我的来源**

**WebMethod.java**

```
public class GetStudentInformation 
{
public String GetStudentInformation(String sStudentCode)
{
    return sStudentCode;
}    } 
```

**Demo_tabActivity.java**

```
public class Demo_tabActivity extends Activity 
{
private static String NAMESPACE = "http://tempuri.org/";
private static String METHOD_NAME = "GetStudentInformation";
private static String SOAP_ACTION = "http://tempuri.org/GetStudentInformation";
private static String URL = "http://54.251.60.177/MobileWS/Student.asmx?WSDL";

Button btnFar;
EditText txtFar;

   @Override
   public void onCreate(Bundle savedInstanceState)
   {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);

       txtFar = (EditText)findViewById(R.id.editText_in);
       btnFar = (Button)findViewById(R.id.button1);
       btnFar.setOnClickListener(new View.OnClickListener()
       {
       public void onClick(View v)
       {
         String b;

         //Initialize soap request + add parameters
         SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

         //Use this to add parameters

         request.addProperty("sStudentCode",txtFar.getText().toString());

         //Declare the version of the SOAP request

         SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

         envelope.setOutputSoapObject(request);

         envelope.dotNet = true;

         try 
         {
             HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

             //this is the actual part that will call the webservice

             androidHttpTransport.call(SOAP_ACTION, envelope);

             // Get the SoapResult from the envelope body.

             SoapPrimitive result = (SoapPrimitive)envelope.getResponse();

             if (result != null)
             {
              //Get the first property and change the label text

                b = result.toString();
                Intent myIntent = new Intent(Demo_tabActivity.this, Tabhost.class);

                myIntent.putExtra("result1", b);
                startActivity(myIntent);
             }
             else
             {
                Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_SHORT).show();
             }
         }
        catch (Exception e)
        {
           e.printStackTrace();
           }
         }
       });
   }
} 
```

**Tabhost.java**

```
public class Tabhost extends TabActivity {

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);

    String result1;

    Bundle extras = getIntent().getExtras();

    if(extras!=null)
    {
        result1 = extras.getString("result1");
    } else result1 = "Didnt work !" ;

    TabHost tabHost = getTabHost();
    TabHost.TabSpec spec;
    Intent intent;

    intent = new Intent().setClass(this, Tab_1.class);
    intent.putExtra("result1", result1);
    spec = tabHost.newTabSpec("first").setIndicator("First").setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, Tab_2.class);
    spec = tabHost.newTabSpec("second").setIndicator("Second").setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(0);
 }
 } 
```

**Tab_1.java**

```
public class Tab_1 extends Activity 
{
TextView tv1;
String result1;

/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.main2);

Bundle extras = getIntent().getExtras();
if(extras != null)
{   
    result1 = extras.getString("result1");
} 
else result1 = "didnt work";

    tv1 = (TextView)findViewById(R.id.textView_main2);
    tv1.setText(result1);

}
} 
```

**Tab_2.java**

```
public class Tab_2 extends Activity {

/** Called when the activity is first created. */   

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main3);
    }
} 
```

感谢您的宝贵帮助！...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:22:25.983

您的 Web 服务正在以`xml`格式向您返回响应。您只需要解析它并获取所需的信息。互联网上有很多例子解释了如何做到这一点。

[https://www.google.com/search?q=android+xml+parsing+example](https://www.google.com/search?q=android+xml+parsing+example)

# jquery - JQgrid：在模态初始化期间，我将如何确定正在创建的模型（添加/编辑）

> ID：11579828
> 
> 赞同：1
> 
> 时间：2012-07-20T12:56:08.847
> 
> 标签：jquery, jquery-ui, jqgrid, jqgrid-asp.net

我有一个案例，我需要根据用户是否正在编辑或添加来提供不同的源 ID。我最初的想法是使用 beforeShowForm 钩子设置隐藏字段的值，但似乎组件在调用钩子函数之前被初始化。因此，我无法确定在初始化的那个阶段正在创建什么模型。

**[一个]**

```
//initLoadNoEdit gets called... (At this point I need to know if its going to be an add/edit.)
initLoadNoEdit = function (elem) {
    if ($('#curr_action').val() == 'add') {
        createLoadNumberWidget(elem, "#Date", 'some_url');
    } else {
        createLoadNumberWidget(elem, "#modal_date", 'some_url');
    }
}

var colModel = [
        { name: 'FI_ID', index: 'FI_ID', key: true, editable: false, hidden: true, search: false },     
        { name: 'LILBP_ID', index: 'LILBP_ID', editrules: { required: true }, editoptions: { dataInit: initLoadNoEdit } }
];

//...before this gets called
var addBeforeShowOptions = function (form) {
    $('#curr_action').val('add');
}

//...or this
var editBeforeShowOptions = function (form) {
    $('#curr_action').val('edit');
} 
```

然后我尝试在网格的按钮添加/编辑单击上添加一个单击事件，我尝试了 .live()、.delegate() 和一个普通的 .click()。但没有结果，寻呼机呈现如下..

**[乙]**

```
 <td id="pager_left" align="left">
      <table cellspacing="0" cellpadding="0" border="0" class="ui-pg-table navtable" style="float:left;table-layout:auto;">
       <tbody>
        <tr>
          <td class="ui-pg-button ui-corner-all" title="Add new row" id="add_theGrid">
              <div class="ui-pg-div">
                 <span class="ui-icon ui-icon-plus"></span>
              </div>
          </td>
        </tr>
       </tbody>
      </table>
    </td> 
```

所以我尝试了类似的东西

```
 $('#add_theGrid').live('click', function () { $('#curr_action').val('add'); }); 

 //and

 $('#pager_left').delegate('#add_theGrid','click', function () { $('#curr_action').val('add'); }); 
```

话虽这么说...我不认为将值传递给变量是解决此问题的最佳方法，因为我确信我应该有一种方法可以从模态中确定它是什么类型的模态是？我只是还没有找到它。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T14:31:43.677

~~Add 和 Edit 之间的表单标题文本应该不同：~~

 ~~```
jQuery('.ui-jqdialog-title').text() 
```~~ 

~~然后您可以检查它的前面是否有“添加”或“编辑”。显然这不是一个理想的解决方案，但它是一种使用表单上已有数据的简单方法。不过，我认为这有点骇人听闻。~~

* * *

更好的解决方案是使用`jqGridAddEditBeforeInitData`之前触发的事件`dataInit`。这是[4.3.2 中新的触发事件之一](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents#list_of_triggered_events_new_in_v4.3.2)。文档有点稀疏，但是如果您查看其中的代码，`grid.formedit.js`您会看到`frmoper`传递了一个参数，该参数指示表单是处于“添加”还是“编辑”模式（我添加了换行符以使其更易于阅读）：

```
showFrm = $($t).triggerHandler(
            "jqGridAddEditBeforeInitData", 
            [$("#"+frmgr), frmoper]); 
```

根据[triggerHandler](http://api.jquery.com/triggerHandler/)的 jQuery 文档，第二个参数是额外参数的列表。然后，您可以使用[`bind`](http://api.jquery.com/bind/)添加自己的事件处理程序：

```
grid.bind('jqGridAddEditBeforeInitData', function(e, form, oper) {
    alert ("Before dataInit, operation is " + oper);
    // Your code here...
}); 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T15:19:41.463

如果您使用的是 jqGrid Navigator，您可以使用 addfunc、editfunc 和 delfunc 选项轻松完成此操作。通过这种方式，您可以为每个操作分配一个自定义函数，并且对于内联编辑，您已经知道它不是添加的，因为您是内联的。

检查： [http ://www.trirand.com/jqgridwiki/doku.php?id=wiki:navigator](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:navigator)

如果您需要示例，请发布我可以编辑的 jsfiddle。

# javascript - 如何将带有单引号的字符串转换为双引号以进行 json 解析

> ID：11579831
> 
> 赞同：4
> 
> 时间：2012-07-20T12:56:17.970
> 
> 标签：javascript, quotes, json

我有一个使用 json_encode 在 php 中编码的数组

```
 $params = array(1=>'something','2'=>'two'); 
```

当我使用 json encode 对其进行编码时，它会用双引号对其进行编码，这本身就很好，但我试图将其嵌入到锚标记中，而双引号会弄乱属性。 `<a class="btn ajax" data-method="test" data-params="{"one":"something","2":"two"}" href="#">test ajax link</a>`

显然 data-params 属性中的第二个双引号破坏了链接。

所以我所做的是将字符串转换为单引号，但我需要将其重新转换为双引号才能在 javascript 中解析；

```
 var string = {'one':'something','2':'two'} ; 
```

JSON.parse 会在那个字符串上失败，我试过了

```
 var jsonString = dataParams.replace('\'', '"'); 
```

但这似乎只转换第一个单引号然后停止。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:59:26.010

更好的方法是使用该[`htmlentities()`函数](http://php.net/manual/en/function.htmlentities.php)`"`对as进行编码`&quot;`，这意味着您可以将其插入 as `data-*`。当您使用 JavaScript 检索它时，它们会显示为`"`，这意味着您可以`JSON.parse`立即检索；

```
<a data-foo="<?php echo htmlentities(json_encode(array('demo' => 'test'))); ?>">Hey</a>
<script>alert(JSON.parse(document.getElementsByTagName("a")[0].dataset.foo).demo);</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:57:51.903

改用这个：

```
var jsonString = dataParams.replace(/'/g, '"'); 
```

# extjs4.1 - ExtJS 扩展窗口优化——正确方法

> ID：11579838
> 
> 赞同：0
> 
> 时间：2012-07-20T12:56:43.867
> 
> 标签：extjs4.1

我创建了一个扩展 Ext.window.Window 的类，它基本上允许用户输入一些具有最小长度限制的文本。检查是否满足该条件，然后解锁提交按钮。单击该按钮后，将触发自定义事件。

我的代码工作正常，但我想知道它是否正确编写。正确地说，我不是指工作，而是优化并满足 Sencha 规则。

我将不胜感激所有的意见和建议。

所以这是我的代码：

```
Ext.define("Urlopy.Components.ReasonWindow", {
        extend : 'Ext.window.Window',
        modal : true,
        width : 400,
        height : 200,
        minWidth : 400,
        minHeight : 200,
        layout : 'fit',
        initComponent : function() {
            this.addEvents('addHistoryEntry');
            this.title = 'Powód odrzucenia'
            var minimum = 20;//message minimum length
            this.form = Ext.create('Ext.form.Panel', {
                        border : false,
                        bodyPadding : 10,
                        items : [{
                                    xtype : 'textarea',
                                    id : 'myreason',
                                    allowBlank: false,
                                    minLength: minimum,
                                    hideLabel : true,
                                    enableKeyEvents: true,
                                    name : 'reason',
                                    anchor : '100% 100%',
                                    listeners: {
                                        'keypress': {
                                        fn: function(t){
                                            var v = t.getValue(), cc = v.length ? v.length : 0;
                                            if(cc>=minimum)
                                            {
                                                Ext.fly(charCount.getEl()).update('Można wysłać');
                                                sendButton.enable();
                                            } else
                                            {
                                                Ext.fly(charCount.getEl()).update('Pozostało znaków:'+(minimum-cc));
                                                sendButton.disable();
                                            }
                                        },
                                        buffer: 1
                                        }
                                    }
                                }]
                    });

            this.items = this.form;
            var sendButton = Ext.create("Ext.button.Button", {
                        text : 'Wyślij',
                        disabled : true,
                        icon : 'resources/diagona-icons/icons/16/103.png',
                        scope : this,
                        handler : function() {
                            this.fireEvent("addHistoryEntry",Ext.getCmp('myreason').getValue());
                            this.close();
                        }
                    });

            var charCount = Ext.create('Ext.toolbar.TextItem', {text: 'Pozostało: ' + minimum}); 

            this.dockedItems = [{
                        xtype : 'toolbar',
                        dock : 'bottom',
                        ui : 'footer',
                        defaults : {
                            minWidth : 100
                        },
                        //pack : 'start',
                        items : [charCount, '->', sendButton]
                    }];
            this.callParent();
        }
    }); 
```

* * *

**编辑**

如何将参数传递给我的窗口？现在我这样做是正确的：

```
var j = Ext.create("Urlopy.Components.ReasonWindow");
j.rec=rec;//j.setRecord(rec); or by adding custom function
j.on("addHistoryEntry", function(reason, rec) {
    console.log(reason);
    console.log(rec.get('Name'));
});
j.show(); 
```

当我调用 Ext.create 时，我能以某种方式传递它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:54:26.667

```
var j = Ext.create("Urlopy.Components.ReasonWindow", {
    rec : rec,
    param2 : param2Value
});

j.on("addHistoryEntry", function(reason, rec) {
    console.log(reason);
    console.log(rec.get('Name'));
});

j.show(): 
```

您可以在上面看到如何传递参数。非常简单。

快乐编码。

# wcf - 在 IIS 中使用 WAS 进行 net.tcp 绑定的性能问题

> ID：11579839
> 
> 赞同：0
> 
> 时间：2012-07-20T12:57:02.653
> 
> 标签：wcf, net.tcp

即使在最小负载下，我们也面临着托管在 IIS 中的 net.tcp 服务的问题。相同的服务也通过 HTTPS 从另一个端点公开。使用 HTTPS 的客户端可以正常工作。

环境详情：Windows 7 SP1，64 位，x64 .Net Framework 4.0 with Update

我们已经安装了此处提供的修补程序[http://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=35626](http://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=35626)

我们已经尝试了启用和禁用端口共享以及关闭 net.tcp 绑定的安全性的服务。

即使在中等负载下，服务也会停止。但是，如果我们发送单个请求，该服务将继续工作。

任何关于 web.config 或 SmSvcHost.exe.config 以使服务稳定的指针都将非常有帮助。

```
<binding closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00"
        sendTimeout="00:01:00" transactionFlow="false" transferMode="Buffered"
        transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard"
        maxBufferPoolSize="8388608" maxBufferSize="1048576" maxConnections="50"
        maxReceivedMessageSize="1048576">
    <readerQuotas maxDepth="32" maxStringContentLength="1048576"
        maxArrayLength="1048576" maxBytesPerRead="1048576" maxNameTableCharCount="1048576" />
    <security mode="Transport">
        <transport protectionLevel="None" />
    </security>
</binding> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:06:16.907

修补程序似乎已经解决了这个问题。似乎没有正确安装。重新安装它解决了这个问题。

# sql - UPDATE 上的 SQL Server 死锁

> ID：11579841
> 
> 赞同：3
> 
> 时间：2012-07-20T12:57:11.367
> 
> 标签：sql, sql-server, deadlock

我的应用程序中出现死锁问题。数据库是 SQL Server 2005，当 2 个线程尝试更新同一个表时会发生死锁。我不明白这种情况，我希望有人能帮助我。这是死锁图：

```
<deadlock-list> 
   <deadlock victim="process3a0ac58"> 
      <process-list>
         <process id="process3a0ac58" taskpriority="0" logused="5048" waitresource="KEY: 9:72057594078035968 (e100ae2e5d7f)" waittime="4750" ownerId="22329947" transactionname="user_transaction" lasttranstarted="2012-07-20T08:53:33.440" XDES="0x24b429210" lockMode="U" schedulerid="1" kpid="1428" status="suspended" spid="57" sbid="0" ecid="0" priority="0" transcount="2" lastbatchstarted="2012-07-20T08:53:34.753" lastbatchcompleted="2012-07-20T08:53:34.753" clientapp=".Net SqlClient Data Provider" hostname="VMDBSRVCRISPI" hostpid="4012" loginname="sa" isolationlevel="read uncommitted (1)" xactid="22329947" currentdb="9" lockTimeout="4294967295" clientoption1="671088672" clientoption2="128056"> 
             <executionStack> 
                 <frame procname="adhoc" line="1" stmtstart="34" sqlhandle="0x0200000008adf4202a2e77131e147fe8c50b173a5f8d5302"> UPDATE [FreeAvailability] SET Resource_id = null WHERE Resource_id = @p0 AND Id = @p1 </frame> 
                 <frame procname="unknown" line="1" sqlhandle="0x000000000000000000000000000000000000000000000000"> unknown </frame>
             </executionStack> 
             <inputbuf> (@p0 int,@p1 int)UPDATE [FreeAvailability] SET Resource_id = null WHERE Resource_id = @p0 AND Id = @p1 </inputbuf> 
         </process> 
         <process id="process3a28da8" taskpriority="0" logused="8720" waitresource="KEY: 9:72057594078035968 (d0006ab1ca37)" waittime="2734" ownerId="22329913" transactionname="user_transaction" lasttranstarted="2012-07-20T08:53:33.067" XDES="0x28dd4aa40" lockMode="U" schedulerid="4" kpid="3732" status="suspended" spid="58" sbid="0" ecid="0" priority="0" transcount="2" lastbatchstarted="2012-07-20T08:53:36.770" lastbatchcompleted="2012-07-20T08:53:36.737" clientapp=".Net SqlClient Data Provider" hostname="VMDBSRVCRISPI" hostpid="4012" loginname="sa" isolationlevel="read uncommitted (1)" xactid="22329913" currentdb="9" lockTimeout="4294967295" clientoption1="671088672" clientoption2="128056"> 
            <executionStack>
               <frame procname="adhoc" line="1" stmtstart="34" sqlhandle="0x0200000008adf4202a2e77131e147fe8c50b173a5f8d5302"> UPDATE [FreeAvailability] SET Resource_id = null WHERE Resource_id = @p0 AND Id = @p1 </frame> 
               <frame procname="unknown" line="1" sqlhandle="0x000000000000000000000000000000000000000000000000"> unknown </frame> 
            </executionStack> 
            <inputbuf> (@p0 int,@p1 int)UPDATE [FreeAvailability] SET Resource_id = null WHERE Resource_id = @p0 AND Id = @p1 </inputbuf> 
         </process> 
      </process-list> 
      <resource-list> 
        <keylock hobtid="72057594078035968" dbid="9" objectname="SDN.Napoli.dbo.FreeAvailability" indexname="PK__FreeAvailability__3939548A" id="lock4bdb180" mode="X" associatedObjectId="72057594078035968">
            <owner-list> 
               <owner id="process3a28da8" mode="X"/> 
            </owner-list> 
            <waiter-list> 
               <waiter id="process3a0ac58" mode="U" requestType="wait"/> 
            </waiter-list> 
        </keylock> 
        <keylock hobtid="72057594078035968" dbid="9" objectname="SDN.Napoli.dbo.FreeAvailability" indexname="PK__FreeAvailability__3939548A" id="lock4c25680" mode="X" associatedObjectId="72057594078035968"> 
           <owner-list> 
              <owner id="process3a0ac58" mode="X"/> 
           </owner-list> 
           <waiter-list> 
              <waiter id="process3a28da8" mode="U" requestType="wait"/> 
           </waiter-list> 
        </keylock> 
      </resource-list> 
   </deadlock> 
</deadlock-list> 
```

似乎主键上发生了死锁，但是怎么可能以及如何解决这个问题？

提前致谢

编辑：

这是表结构：

```
CREATE TABLE [dbo].[FreeAvailability](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [Date] [datetime] NULL,
    [StartTime] [datetime] NULL,
    [EndTime] [datetime] NULL,
    [BookOnlyIfRequired] [bit] NULL,
    [Free48HsBefore] [bit] NULL,
    [Private] [bit] NULL,
    [F48HBGroup] [bit] NULL,
    [Resource_id] [int] NULL,
    [Sedi_id] [int] NULL,
    [Skill_id] [int] NULL,
    [BOIRGroup_id] [int] NULL,
    [Private48HBGroup] [bit] NULL,
    [Free24HsBefore] [bit] NULL,
    [Free72HsBefore] [bit] NULL,
    [F24HBGroup] [bit] NULL,
    [F72HBGroup] [bit] NULL,
    [Private24HBGroup] [bit] NULL,
    [Private72HBGroup] [bit] NULL,
PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER TABLE [dbo].[FreeAvailability]  WITH CHECK ADD  CONSTRAINT [FK4D396931200F9F6C] FOREIGN KEY([Skill_id])
REFERENCES [dbo].[Skill] ([Id])
GO
ALTER TABLE [dbo].[FreeAvailability] CHECK CONSTRAINT [FK4D396931200F9F6C]
GO
ALTER TABLE [dbo].[FreeAvailability]  WITH CHECK ADD  CONSTRAINT [FK4D3969313F693A26] FOREIGN KEY([BOIRGroup_id])
REFERENCES [dbo].[BOIRGroup] ([Id])
GO
ALTER TABLE [dbo].[FreeAvailability] CHECK CONSTRAINT [FK4D3969313F693A26]
GO
ALTER TABLE [dbo].[FreeAvailability]  WITH CHECK ADD  CONSTRAINT [FK4D396931C92BB494] FOREIGN KEY([Resource_id])
REFERENCES [dbo].[Resource] ([Id])
GO
ALTER TABLE [dbo].[FreeAvailability] CHECK CONSTRAINT [FK4D396931C92BB494]
GO
ALTER TABLE [dbo].[FreeAvailability]  WITH CHECK ADD  CONSTRAINT [FK556546F95E61B626] FOREIGN KEY([BOIRGroup_id])
REFERENCES [dbo].[BOIRGroup] ([Id])
GO
ALTER TABLE [dbo].[FreeAvailability] CHECK CONSTRAINT [FK556546F95E61B626]
GO
ALTER TABLE [dbo].[FreeAvailability]  WITH CHECK ADD  CONSTRAINT [FK556546F95ECA95DC] FOREIGN KEY([Skill_id])
REFERENCES [dbo].[Skill] ([Id])
GO
ALTER TABLE [dbo].[FreeAvailability] CHECK CONSTRAINT [FK556546F95ECA95DC]
GO
ALTER TABLE [dbo].[FreeAvailability]  WITH CHECK ADD  CONSTRAINT [FK556546F9E6E3AAC4] FOREIGN KEY([Resource_id])
REFERENCES [dbo].[Resource] ([Id])
GO
ALTER TABLE [dbo].[FreeAvailability] CHECK CONSTRAINT [FK556546F9E6E3AAC4] 
```

我不能说 2 个线程传递的值，因为我没有记录:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T00:21:00.047

要识别此死锁中涉及的行，请运行查询

SELECT id, %%lockres%% as LockResource FROM dbo.FreeAvailability WHERE %%lockres%% IN('(e100ae2e5d7f)','(d0006ab1ca37)')

在这个死锁中，进程 process3a0ac58 在对应于资源 (e100ae2e5d7f) 的行上持有一个 X 锁，并在对应于资源 (d0006ab1ca37) 的行上等待一个 U 锁（用于 UPDATE 的读取阶段）。

同时进程 process3a28da8 在对应于资源 (d0006ab1ca37) 的行上持有 X 锁，并等待 (e100ae2e5d7f) 上的 U 锁。

死锁跟踪不会告诉您哪些语句获得了锁。我的猜测是您在同一个事务中执行多个更新。同样在这种情况下，更新以相反的顺序执行。

两个使用键级锁的独立 UPDATE 语句（由于 PK 上的 WHERE 子句）不会相互死锁。所以这应该是典型的循环死锁案例。

# r - [r] 中的采购脚本显示自 2.15.1 以来的警告

> ID：11579843
> 
> 赞同：5
> 
> 时间：2012-07-20T12:57:21.997
> 
> 标签：r, rstudio

我在新的 Mac 上安装了 R (2.15.1) 和 RStudio (0.96.316)。现在，每次我获取 R 脚本时，都会收到以下警告消息。不管剧本长什么样。在下一个案例中，我只使用了一个 cat('Hello World) 参数。

```
> source('~/Documents/R-Files/skript.r')
Hello World

Warnmeldung:
In eval.with.vis(ei, envir) :
  .Internal(eval.with.vis) should not be used and will be removed soon 
```

我总是收到与我的代码行相同数量的警告。具有四行输入的脚本会产生四个警告：

```
> source('~/Documents/R-Files/skript.r')
a Hello World
b Hello World
c Hello World
d Hello World

Warnmeldungen:
1: In eval.with.vis(ei, envir) :
  .Internal(eval.with.vis) should not be used and will be removed soon
2: In eval.with.vis(ei, envir) :
  .Internal(eval.with.vis) should not be used and will be removed soon
3: In eval.with.vis(ei, envir) :
  .Internal(eval.with.vis) should not be used and will be removed soon
4: In eval.with.vis(ei, envir) :
  .Internal(eval.with.vis) should not be used and will be removed soon 
```

但是，除了警告消息之外，R 脚本也可以正常工作。

[我在R News](http://stat.ethz.ch/R-manual/R-devel/doc/html/NEWS.html)上找到了以下信息：

> *   source() 现在使用 withVisible() 而不是 .Internal(eval.with.vis)。这有时会稍微改变回溯。

我认为这是我的问题的原因，但我不知道解决方案。如何禁用或避免警告？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T16:34:58.553

调试示例：“eval.with.vis”警告（此案例 XML 库，您的案例，任何库）

在 2.15.1 升级后的 Mac 上，我通过使用二进制搜索发现问题出在 XML 库中。

当我注释掉这个语句时： library("XML") 警告消失了。

我将此追溯到我使用 CRAN 的二进制 XML 库的事实。

当我从源重新安装库时（通过使用 R gui App 菜单选择“Packages and Data->Package Installer”并使用左上角下拉菜单并选择“CRAN（Sources）”），R 应用程序从源代码重建库。

在此之后，警告不再存在。

我建议您也确定您的哪个库正在使用“eval.with.vis”已弃用的代码，然后尝试从源代码重新编译它以确保您拥有最新版本。如果这不起作用，您可以更改源代码本身以使用当前版本“withVisible”。

我浪费了三个小时来追踪这个错误。

如果有人知道重新安装所有库的自动方法，然后手动查找导致警告的库，然后从源代码半自动重新安装有问题的库，那就太好了。

祝大家好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T21:19:18.570

我在下面的部分会话信息下发现了同样的问题，以及与 library("foreign") 相同的成功解决方案（重新安装包）。

*   R 版本 2.15.2 (2012-10-26)
*   平台：x86_64-apple-darwin9.8.0/x86_64（64位）
*   RStudio 0.97.248

感谢您提供此解决方案。

# java - 如何在不实现可序列化接口的情况下创建用户定义的可序列化类？

> ID：11579848
> 
> 赞同：-1
> 
> 时间：2012-07-20T12:57:24.843
> 
> 标签：java, class, serialization

类 Siva 实现可序列化 {

}

但是不使用 Serializable 接口如何使我们的类成为可序列化的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:05:28.757

可能如果您需要有自己的序列化逻辑，然后去实现 Externalizable 接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:00:19.997

如果可以决定不使用 Serializable，那么您将必须提供序列化/反序列化逻辑。

使用 Java API 序列化方法的唯一方法是通过 Serializable 接口。

只是出于好奇：你为什么不想要 Serializable？并不是说很难实现...

# php - 如何从url获取参数？

> ID：11579849
> 
> 赞同：1
> 
> 时间：2012-07-20T12:57:25.787
> 
> 标签：php, codeigniter

我一直在使用 Code Igniter 开发一个 PHP 页面。控制器有一些功能：

```
public function language_testing($language_code, $logout=0)
{      
      echo ($language_code);
      //come actions
} 
```

我正在尝试发送以下网址：`http://mypage.com/index.php/controller/language_testing/bg#9`

但我的函数显示的是“bg”而不是“bg#9”。请告诉我，我怎样才能得到“#”后面的内容？我非常需要它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:59:21.447

您应该发布到以下 URL 以获取出现在中的值`$logout`：

```
http://mypage.com/index.php/controller/language_testing/bg/9 
```

否则，服务器无法访问井号后的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:07:04.843

[http://au.php.net/manual/en/function.parse-url.php](http://au.php.net/manual/en/function.parse-url.php)

```
$urlComp=parse_url($yourURL);
echo $urlComp['fragment']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:03:58.147

你不能。这`#`是一个 HTML 书签，用于使用 HTML 元素上的 ID 将焦点重定向到页面周围。浏览器不会将此作为 URL 的一部分提交给服务器。

根据您的重写规则，您可能想要创建一个语义上令人愉悦的链接，like`http://site.com/path/index.php/bg/9`或 as `http://site.com/path/index.php?bg=9`（这是您的重写规则无论如何都会实现的）。

请注意，如果您`#`出于某种原因确实需要提交该标志，那么您需要`%23`在 URL 中使用它来提交它（@jth_92 击败了我）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T13:04:58.727

您需要更改函数参数，还需要为代码添加一个参数

```
public function language_testing($language, $code , $logout=0){      
  echo ($language);
  echo ($code);
  //come actions 
```

}

并像 [http://mypage.com/index.php/controller/language_testing/bg/9一样调用它](http://mypage.com/index.php/controller/language_testing/bg/9)

它将解决您的问题，然后您可以连接两个值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T13:05:17.387

# 是一个 HTML 实体，用于在锚标记中跳转到名称引用。例如：

```
<a href="#test">Jump to test on page</a>
<a name="test">Test</a> 
```

因此，它不会被解释为您的参数的一部分。您应该能够使用 bg%23 因为 %23 是散列的转义字符。

[http://mypage.com/index.php/controller/language_testing/bg%239](http://mypage.com/index.php/controller/language_testing/bg%239)

[如何在 URL 中转义哈希字符](https://stackoverflow.com/questions/5007352/how-to-escape-hash-character-in-url)

# html - 使侧边栏 div 具有固定宽度，而主要内容是流动的

> ID：11579850
> 
> 赞同：2
> 
> 时间：2012-07-20T12:57:27.817
> 
> 标签：html, css, layout

我需要我的网站的主要内容在页面的左边缘和侧边栏之间流动。但我希望侧边栏保持固定大小。

我见过一些解决方案要求侧边栏位于 DOM 中的主要内容之前，但在这种情况下**，侧边栏必须位于 HTML 中的主要内容之后**。

请看我的 jsFiddle：http: [//jsfiddle.net/kK5Ly/](http://jsfiddle.net/kK5Ly/)

现在侧边栏向左浮动，但它位于主要内容的下方。我需要它坐在主要内容旁边，同时保持主要内容的流动宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:19:18.843

试试`display: table-cell`这两个容器——见[http://jsfiddle.net/kK5Ly/9/](http://jsfiddle.net/kK5Ly/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:04:55.087

在这里我做了一个小技巧`position: absolute`，也许这就是你想要的？

[http://jsfiddle.net/kK5Ly/2/](http://jsfiddle.net/kK5Ly/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T13:17:14.130

我同意@haynar。测试时，我试图将侧边栏放在左侧，将主要内容放在右侧。确保在使用该代码时，不仅将 div 添加`position:absolute;`到侧边栏 div，而且还`margin-right:250px;`为主要内容 div 设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T14:06:57.633

我在这个堆栈溢出问题中找到了答案：

[CSS Layout 2-Column 固定流体](https://stackoverflow.com/questions/580195/css-layout-2-column-fixed-fluid?rq=1)

这就是答案：

[http://www.dynamicdrive.com/style/layouts/item/css-liquid-layout-21-fixed-fluid/](http://www.dynamicdrive.com/style/layouts/item/css-liquid-layout-21-fixed-fluid/)

显示 CSS 代码以查看它是如何完成的。

# jquery - jQuery 倒计时 Keith Wood 在 Mozilla 中不起作用

> ID：11579851
> 
> 赞同：2
> 
> 时间：2012-07-20T12:57:34.230
> 
> 标签：jquery, firefox, countdown

我在一个网站上工作，我已经安装了 Keiths Woods 的 jQuery 倒计时。它在 Chrome 上运行良好，但在 IE、Mozilla、iPad 和 iPhone 上却无法运行。倒计时一直到 2012 年 1 月 10 日。它显示 72 天、7 小时等。在其他浏览器上，它显示`NaN`天数、`NaN`小时数等。

我有以下 HTML：

```
<html>
<head>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="jquery.countdown.min.js"></script>
    <script type="text/javascript" src="scripts.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="jquery.countdown.css" media="screen" />
</head>
<body>
    <div class="body">
        <div class="countdown"></div>
        <div class="logo"></div>
    </div>
</body>
</html> 
```

里面`scripts.js`我有：

```
$(document).ready(function(){
    var date = new Date('10.1.2012'); 
    $('.countdown').countdown({until: date , format: 'DHMS'}); 
}); 
```

有什么问题`jquery.countdown.min.js`？我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:06:59.290

尝试取消限制`D`to `d`：

```
$('.countdown').countdown({until: date , format: 'dHMS'}); 
```

因为在[插件的主页上也是](http://keith-wood.name/countdown.html)如此：

```
$(selector).countdown({until: liftoffTime, format: 'dHM'}); 
```

编辑：更改为以下内容，[它在 Safari 中对我有用](http://jsfiddle.net/Calavoow/jZSAq/3/)：

```
var date = new Date(2012, 10-1, 1); 
```

在 Chrome 以外的浏览器中，字符串的解析可能出错了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T04:45:10.187

检查你的日期。如果你的约会对象是前任。“02-23-2012 23:22:22”将其更改为“02/23/2012 23:22:22”

使用正斜杠，否则 iphone Mozilla 会抱怨

# c++ - 隐式声明的默认构造函数

> ID：11579853
> 
> 赞同：2
> 
> 时间：2012-07-20T12:57:41.590
> 
> 标签：c++, c++11

我对以下陈述感到困惑。

从规范：

> 在隐式定义一个类的隐式声明的默认构造函数之前，其基类及其非静态数据成员的所有隐式声明的默认构造函数都应已隐式定义。

我的理解是：

> 隐式声明的默认构造函数是在创建对象时隐式定义的。

上面的说法是什么意思？如果基类包含显式默认构造函数，那么派生类不能有隐式默认构造函数吗？请澄清，如果有人提供一段示例代码可能会很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T13:02:29.027

该语句意味着当编译器必须为隐式声明的默认构造函数提供定义时（即当这种构造函数是*odr-used*时），**在**定义当前构造函数之前，编译器必须确保所有成员都可以默认构造，并且为此它可能需要隐式定义成员的任何隐式声明的默认构造函数。

例如：

```
struct A { int x; };    
struct B { A a; };      // [1]
int main() {
   B b;                 // [2]
} 
```

`b`[2] 中变量的定义是隐式声明的构造函数 for的*odr-use*`B`，但在编译器隐式定义 之前`B::B()`，因为它有`A`[1] 中声明的类型的成员，所以需要隐式定义`A::A()`。原因是它`B::B()`会在它的初始化列表中*使用 odr 。* `A::A()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T13:00:56.500

假设您有类`Base`和`Derived`（从基派生）。

让我们假设它们都隐式声明了默认构造函数。当您创建`Derived`类对象时，将发生以下情况。*首先*`Base`，将为该类定义隐式声明的默认构造函数。*之后*，类的隐式声明的构造函数也会发生同样的情况`Derived`。

这完全有道理，因为当您创建类的对象时，首先调用`Derived`该类的构造函数`Base`。如果到那时还没有定义，那么，很可能会发生一些不好的事情。

相同的事情适用于任何具有此类构造函数的类成员：它们是在定义类自己的构造函数之前定义的。

# c# - 如何专注于sitecore中的选项卡？

> ID：11579858
> 
> 赞同：0
> 
> 时间：2012-07-20T12:57:58.240
> 
> 标签：c#, c#-4.0, sitecore, sitecore6

我有 2 个选项卡作为带有一个链接的 Sitecore.Web.UI.WebControls.Link。现在当页面打开时，我想关注第一个。我写了这段代码，但似乎它只达到了第 0 个索引 2 次。所以我将两个选项卡都作为选定项目。这是代码：

```
protected void rptTab_ItemBound(Object sender, RepeaterItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {
            Item i = e.Item.DataItem as Item;
            Link hlTabLink;
            HtmlControl liHTML;
            liHTML = e.Item.FindControl("liTabTest") as HtmlControl;
            hlTabLink = e.Item.FindControl("hlTabLink") as Link;
            hlTabLink.Target = Sitecore.Links.LinkManager.GetItemUrl(i);
            hlTabLink.DataSource = i.Paths.FullPath;
            hlTabLink.Field = "Title";
            String liContainerId;
            switch (hlTabLink.TabIndex) //Switch case statements for the tab navigation. 
            {
                case 0:
                    liContainerId = "tab-label TabbedPanelsTabSelected";
                    liHTML.Attributes.Add("class", liContainerId);                   
                    break;
                case 1:
                    liContainerId = "tab-label TabbedPanelsTabSelected";
                    hlTabLink.CssClass = "tab-label TabbedPanelsTabSelected";
                    break;
                case 2:
                    liContainerId = "tab-label last";
                    hlTabLink.Attributes.Add("class", liContainerId);
                    break;
            }

        } 
```

案例 0 击中 2 次。如您所见，选项卡位于转发器中。这是它的标记：

```
 <asp:Repeater ID="rptTab" runat="server" OnItemDataBound="rptTab_ItemBound">
            <ItemTemplate>
                <li id= "liTabTest" runat = "server">
                    <a>
                        <sc:Link ID = "hlTabLink" Field = "scTabLink" runat ="server"></sc:Link>
                    </a>
                </li>
            </ItemTemplate>
       </asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T03:38:25.517

听起来 TabIndex 还没有填充，可能是由于数据绑定在 dom 更新之前完成。事件序列和更新等很容易出现问题。否则，也许 TabIndex 永远不会被填充？

您是否在稍后阶段检查了该属性？

最后，当所有项目都绑定时，是否还有另一个可以触发的事件？使用您当前的代码，您必须将第 n 个项目硬编码为最后一个项目（示例中的 2 个），当您稍后添加另一个项目时很容易忘记这一点。如果您能找到这样的事件，您可以通过索引 for 循环遍历项目，并且让所有项目都知道长度是多少，这意味着您不必对该值进行硬编码。

# java - 将鼠标侦听器添加到 java swt 图像

> ID：11579862
> 
> 赞同：2
> 
> 时间：2012-07-20T12:58:08.120
> 
> 标签：java, eclipse, image, swt, listener

好的，所以我创建了这样的图像：

```
Image deleteImage = new Image(viewer.getTable().getDisplay(),
                        Provider.PATH_TO_DELETE_ICON); 
```

如何添加鼠标侦听器以便我知道何时单击图像？

这是我的标签提供程序类：

```
private class MyLabelProvider extends LabelProvider implements
            ITableLabelProvider {

        @Override
        public Image getColumnImage(Object element, int columnIndex) {
            if (columnIndex == 3) {
                Image deleteImage = new Image(viewer.getTable().getDisplay(),
                        Provider.PATH_TO_DELETE_ICON);
                return deleteImage;
            }
            if (columnIndex == 4) {
                Image editImage = new Image(viewer.getTable().getDisplay(),
                        Provider.PATH_TO_EDIT_ICON);
                return editImage;
            } else
                return null;
        }

        public String getColumnText(Object element, int index) {
            Provider provider = (Provider) element;
            switch (index) {
            case 0:
                return Integer.toString(provider.getId());
            case 1:
                return provider.getName();
            case 2:
                return provider.getBulstat();
            default:
                return "";
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T13:03:22.413

您可以创建一个`Label`，将您的图像设置在它上面

```
label.setImage(deleteImage) 
```

之后，您可以执行以下操作：

```
label.addMouseListener(new MouseListener() {

        @Override
        public void mouseUp(MouseEvent arg0) {
            System.out.println("Click");
        }

        @Override
        public void mouseDown(MouseEvent arg0) {

        }

        @Override
        public void mouseDoubleClick(MouseEvent arg0) {
        }
    }); 
```

# sas - 在当前观察中读取下一个观察值

> ID：11579865
> 
> 赞同：7
> 
> 时间：2012-07-20T12:58:09.700
> 
> 标签：sas

我有一个名为“输入”的数据集，其中包含以下观察结果

ID 工资
10 1000
20 2000
30 3000
40 4000

我需要一个具有以下观察结果的输出数据集

ID 工资 Next_row_Salary
10 1000 2000
20 2000 3000
30 3000 4000
40 4000 null

注意：场景是下一个观察的薪水应该是列 Next_Row_salary 的当前观察值。如果没有下一个观察值，则 Next_Row_salary 列的当前观察值应为“null”。

请帮助我为这种情况创建一个 sas 代码。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-20T13:20:07.533

有几种方法可以实现这一点，这就是我的做法。

```
data have;
   input ID Salary;
   cards;
10 1000
20 2000
30 3000
40 4000
;
run;

data want;
   recno=_n_+1;
   set have end=last;
   if not last 
           then set have (keep=salary rename=(salary=next_row_salary)) point=recno;
      else call missing(next_row_salary);
run; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T13:16:49.057

在数据步骤中没有直接的方法可以做到这一点。您可以使用两种方法：

**选项1：反向排序，使用滞后功能**

```
proc sort data=your_dataset;
 by descending id;
run;

data your_dataset;
 set your_dataset;
 next_row_salary = lag(salary);
run;

proc sort; by id; run; 
```

**选项 2：使用`proc expand`**

```
proc expand data=your_dataset method=none;
 by id;
 convert salary = next_row_salary / transformout=(lead 1);
run; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T04:23:15.217

此代码来自 SAS-L 上的 Paul Dorfman，它也可以通过一次数据传递来完成您正在寻找的事情

```
Data Salary;
input id salary;
Datalines;
10 1000
20 2000
30 3000
40 4000
;
Run;

data need ;
retain id salary;
set salary (rename=(id = origid salary=next_salary)) end=end ;
if _n_ > 1 then output;
salary = next_salary;
id = origid;
if not end then return;
call missing(next_salary);
output;
drop origid;
run ; 
```

# grails - Groovy-Create 声明对象类型的实例

> ID：11579867
> 
> 赞同：0
> 
> 时间：2012-07-20T12:58:10.953
> 
> 标签：grails, groovy

我有一堂课

```
Class LifeCycle{

  Activity  obtainPo
  Activity  bookTicket

}

Class Activity{
   String name
   string actor
} 
```

**客观的**

`Activity`在类中声明类型的对象时，`Lifecycle`应创建活动类的新实例，其中名称 = 参数名称（即，obtainPo 和 bookTocket 等），如

`new Activity('obtainPo')` 演员可以为空

如何在 groovy 和 grails 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:29:34.143

如果在实例化 LifeCycle 类对象并确保在构造函数中设置 LifeCycle 的其他属性（如果有）时发生这种情况，这样的事情应该可以工作。

```
class LifeCycle{

  Activity obtainPo, bookTicket
  def anotherParameter

   LifeCycle(){
    //set another parameters first
      anotherParameter = "something"

    this.getProperties().each{
       if(!it.value){
         this.setProperty(it.key, new Activity(name:it.key))
       }
    }
   }
} 
```

# sql - 给定结束日期和工作时间 PL/SQL 计算的开始日期

> ID：11579871
> 
> 赞同：0
> 
> 时间：2012-07-20T12:58:28.163
> 
> 标签：sql, oracle, datetime, plsql

使用 Oracle PL/SQL 我需要使用截止日期和完成任务所需的工作时间来计算任务的开始日期。

给定 2012 年 7 月 24 日 17:00 作为截止日期和 20 小时作为完成任务所需的时间，并使用上午 8 点至下午 5 点的工作时间（1 小时午餐 - 所以每天最多 8 小时）我需要在 PL 中弄清楚/SQL 开始日期/时间是什么...应该在 2012 年 7 月 22 日 13:00 出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:13:09.407

以下代码可能是一个起点：

```
function task_start_date(
  p_due_date date,
  p_working_hours number
) return date
is
  l_start_date date;
begin
  -- Subtract full days
  l_start_date := p_due_date - trunc(p_working_hours / 8);
  -- Subtract remaining hours
  l_start_date := l_start_date - mod(p_working_hours, 8) / 24;
  -- Fix date if the due date is before 8AM
  if to_number(to_char(l_start_date, 'HH24')) < 8 then
    l_start_date := l_start_date - 15 / 24;
  end if;
  return l_start_date;
end task_start_date; 
```

请注意，该函数并未始终考虑午餐时间。您需要准确定义午餐时间并相应地调整功能。

# css - 修复了溢出隐藏和 CSS3 动画丢失的位置

> ID：11579872
> 
> 赞同：4
> 
> 时间：2012-07-20T12:58:29.697
> 
> 标签：css, webkit, css-position, css-animations

继[CSS3 动画在页面滚动时打破固定定位](https://stackoverflow.com/questions/11563612/css3-animations-breaking-fixed-positioning-when-page-scrolled)之后，我创建了一个[测试用例](http://jsfiddle.net/C95nq/)（仅限 webkit）。代码也在下面复制。

我想要的是一个固定的标题和相对定位的内容。内容相对定位的原因是因为段落内部有一些元素是绝对定位的；虽然我在这个例子中省略了它们。

当然，添加`position:relative`到`<p>`（没有 a `z-index`）会导致内容堆叠在不希望的标题顶部。即如果CSS只是

```
#header {
  background-color:#f00;
  height:50px;
  width:100px;
  position:fixed;
}

p {
  width:100px;
  padding-top:50px;
  position:relative;
} 
```

然后文本在标题上可见。所以我们`z-index:1`在标题中添加一个来解决这个问题。但是，这仍然没有解决旋转图像溢出标题的问题。我会认为一个简单`overflow:hidden`的标题会起作用。似乎直到页面滚动，*固定*标题也滚动。

它似乎是 and 的存在`z:index`，`overflow:hidden`虽然`auto`and`scroll`也破坏了布局，我想知道**为什么？**

`z-index:1`我**可以**在标题上使用 a而不是在标题`z-index:-1`上，`<p>`但这仍然不能解释为什么`z:index`,`overflow`和 CSS3 动画的组合会导致固定标题滚动。

最后（当然）删除可怕的旋转动画使标题按预期固定。请注意，我永远不会在页面上显示该动画，它只是为了突出问题:-)

显示问题的代码（仅适用于 webkit 浏览器）

### HTML

```
<div id="header">
  <div id="spinner"></div>
</div>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit essecillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.<br/>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit essecillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p> 
```

### CSS

```
body, p {
  margin:0;
}

#header {
  background-color:#f00;
  height:50px;
  width:100px;
  position:fixed;
  z-index:1;
  overflow:hidden;
}

#spinner {
  background:url(http://lorempixel.com/40/40/abstract/1/);
  height:44px;
  width:44px;
  margin:2px 0 0 2px;
  -webkit-animation: spin 2s infinite linear;
}

@-webkit-keyframes spin {
  0% {-webkit-transform:rotate(0deg)}
  50% {-webkit-transform:rotate(720deg)}
  100%{-webkit-transform:rotate(1440deg)}
}

p {
  width:100px;
  padding-top:50px;
  position:relative;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-20T13:07:22.810

尝试添加：

```
-webkit-transform: translate3d(0, 0, 0);
transform : translate3d(0, 0, 0); 
```

到页面上的固定元素。它的动画似乎需要被告知它们应该存在于哪个透视图中，将 3d 设置为 0 将意味着 2d。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:55:47.430

这当然是一个奇怪的行为，可能是一个 webkit 错误，但我设法通过嵌套一个额外的 div 解决了这个问题。

**HTML**

```
<div id="header">
    <div id="fix">
        <div id="spinner"></div>
    </div>
</div> 
```

**CSS**

```
#header {
  background-color:#f00;
  height:50px;
  width:100px;
  position:fixed;
  z-index:1;
}
#fix{
  height:100%;
  overflow:hidden;
} 
```

看看这个 jsfiddle：http: [//jsfiddle.net/C95nq/23/](http://jsfiddle.net/C95nq/23/)

无论出于何种原因，属性组合都会中断，但**将溢出：隐藏到它自己的 div 似乎可以解决问题。**

# oracle - 删除oracle中的重复列

> ID：11579875
> 
> 赞同：1
> 
> 时间：2012-07-20T12:58:38.817
> 
> 标签：oracle, oracle11g

我有一个有 4 列和数千条记录的表。我想删除基于三列重复的行（比如 col1、col2、col3）。我必须根据标准删除行，例如

```
1) found a row which has col1 and col2 equal and
2) in those duplicate record i have to delete those rows on which col3 is null- keep  one row
  (if no other record with combination of col1 and col2 doesn't have not null col3) 

col1 col2 col3
---- ---- ----
1    1    null
1    1    null
1    2    null
1    2    1
1    2    1
1    2    null
1    2    2
1    2    3 
```

在此示例中，我想删除 1 或 2。3、4、5、6 中有重复的列，其中一些第三列不为空，我只想保留第三列不为空的一行（如果第三列也等于只保留一行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:24:01.460

假设您有如下所示的数据：

```
col1 col2 col3
---- ---- ----
1 1 无
1 1 无
1 2 无
1 2 1
1 2 2
1 2 3
1 2 无

```

可以删除前两行，因为`col1`和`col2`匹配，并且`col3`两者都为空？如果没有，这是我的sql：

```
DELETE FROM table_name A
WHERE  exists (
  SELECT 1
  FROM table_name B
  WHERE A.col1 = B.col1
  AND   A.col2 = B.col2
  AND   B.col3 is not null)
AND A.col3 is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:07:19.083

```
DELETE FROM table_name A WHERE ROWID > (SELECT min(rowid) FROM table_name B
WHERE A.clmn1 = B.clmn1 AND A.clmn2 = B.clmn2 AND A.clmn3 is NULL AND b.clmn3 is NULL); 
```

检查这个..评论是否有任何错误。

# mysql - 狮身人面像在 group by 中有两个参数

> ID：11579878
> 
> 赞同：0
> 
> 时间：2012-07-20T12:58:46.380
> 
> 标签：mysql, linux, sphinx

我如何在 Sphinx 中对多个属性进行 GROUP BY

```
 sphinx.conf

    sql_attr_uint     = brand_id
    sql_attr_uint     = resource_id
    sql_attr_uint     = is_truck
    sql_attr_uint     = kind 
```

例子：

```
 SELECT 
            * 
    FROM 
            some_table
    GROUP BY 
            brand_id, resource_id 
```

斯芬克斯告诉我：

```
 SQLSTATE[42000]: Syntax error or access violation: 1064 sphinxql: syntax error, unexpected ',', expecting $end near ', resource_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:49:48.743

创建虚拟属性。例如。

```
SELECT 
        *, (brand_id*100000)+resource_id as myint
FROM 
        some_table
GROUP BY 
        myint 
```

只需使 100000 大于您的最高 resource_id

# iphone - iOS 导入自签名自建 CA 证书

> ID：11579879
> 
> 赞同：2
> 
> 时间：2012-07-20T12:58:50.200
> 
> 标签：iphone, validation, certificate, x509, trust

我已将自签名 X509 证书导入我的 iPhone，只需通过电子邮件将 certificate.pem 发送给它并将其安装在设备上。现在我想在我的 iOS 应用程序中验证必须使用上述证书签名的特定证书。基本上，导入的证书充当 CA 的根证书。

导入的证书是否存储在钥匙串中？

如何基于导入的证书以编程方式验证另一个证书？（第二个证书只有由之前导入的CA证书签名才有效）

有没有人对这些场景有一些经验？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T14:07:03.123

1）是的 - 它位于您的钥匙串中。

2）您使用 trust 验证它`SecTrustCreateWithCertificates()`，`SecTrustEvaluate()`针对所有证书或仅针对您自己的证书。

3）如果您针对大量证书进行了验证，您可以选择在钥匙串中查找您自己的证书；获取 DER；计算其 SHA1 并将其与代码中硬编码的 SHA1 进行比较。

代码如下所示。

```
NSMutableArray *serverChain = -- array with what you want to check
NSMutableArray *trustedCertRefs = <your-hardcoded-certs>;

SecTrustRef noHostTrustRef = NULL;
OSErr status = SecTrustCreateWithCertificates((__bridge CFArrayRef)serverChain,
                                 SecPolicyCreateSSL(NO, nil), &noHostTrustRef);

if (status != noErr) {
    NSLog(@"SecTrustCreateWithCertificates failed: %hd", status);
    [[challenge sender] cancelAuthenticationChallenge:challenge];
}

status = SecTrustSetAnchorCertificates(noHostTrustRef,
                         (__bridge CFArrayRef)trustedCertRefs);
if (status != noErr) {
    NSLog(@"SecTrustSetAnchorCertificates failed: %hd", status);
    [[challenge sender] cancelAuthenticationChallenge:challenge];
}

status = SecTrustEvaluate(noHostTrustRef, &result);
if (status != noErr) {
    NSLog(@"SecTrustEvaluate failed: %hd", status);
    [[challenge sender] cancelAuthenticationChallenge:challenge];
}
CFRelease(noHostTrustRef);

/* From SecTrust.h:
 *
 * SecTrustResultType results have two dimensions.  They specify both whether 
 * evaluation suceeded and whether this is because of a user decision.  
 *
 * In practice the commonly expected result is kSecTrustResultUnspecified,
 * which indicates a positive result that wasn't decided by the user.  
 *
 * The common failure is kSecTrustResultRecoverableTrustFailure, which means a
 * negative result.  kSecTrustResultProceed and kSecTrustResultDeny are the
 * positive and negative result respectively when decided by the user.  User
 *  decisions are persisted through the use of SecTrustCopyExceptions() and
 * SecTrustSetExceptions().  Finally kSecTrustResultFatalTrustFailure is a
 * negative result that should not be circumvented.  In fact only in the case
 * of kSecTrustResultRecoverableTrustFailure should a user ever be asked.
 */
switch (result) {
    case kSecTrustResultProceed: // 1
    case kSecTrustResultConfirm: // 2
    case kSecTrustResultUnspecified: // 4
        return YES
        break;
    case kSecTrustResultRecoverableTrustFailure:  // 5
    case kSecTrustResultDeny: // 3
    case kSecTrustResultFatalTrustFailure: // 6
    case kSecTrustResultOtherError: // 7
    case kSecTrustResultInvalid: // 0
    default:
        return NO:
        break;
}
[[challenge sender] cancelAuthenticationChallenge:challenge]; 
```

或者，如果您获得了信任链，例如从已经针对钥匙串（并因此针对您的证书）进行验证的网络堆栈中，那么您可以提取证书；对他们做一个 `SecCertificateCopyData()`；然后 SHA1 将`NSData`其与您的硬编码 sha1 进行比较，以确保它完全针对那个进行验证。

# servlets - JMeter - 如何在帖子数据中添加字符串作为消息正文？

> ID：11579880
> 
> 赞同：0
> 
> 时间：2012-07-20T12:58:50.627
> 
> 标签：servlets, jmeter

我创建了一个可以接受来自移动设备的发布请求的 servlet。
字符串作为流发送到 servlet，servlet 将接受来自请求的 inputStream。

如何将这些字符串作为 servlet 中的 post body 消息数据发送？当我尝试在 JMeter 的 http 请求采样器中输入这些字符串作为参数中没有名称的值时，servlet request.getInputStream() 似乎没有得到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T19:37:07.350

从 jmeter 2.6 开始，您可以使用 post body 模式使用标准 http 采样器执行此操作：

看：

*   [http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:12:24.940

您可以尝试[HTTP Raw Request](http://code.google.com/p/jmeter-plugins/wiki/RawRequest)自定义 jmeter-plugin。

# ubuntu - 从 Thunderbird 的本地 IMAP 存储中检索电子邮件

> ID：11579882
> 
> 赞同：-1
> 
> 时间：2012-07-20T12:58:53.670
> 
> 标签：ubuntu, imap, thunderbird

我购买了一个域名并设置了 2 个与该域名相关联的电子邮件地址。我过去曾经使用过 Ubuntu 发行版。在它上面，我使用 Thunderbird 作为邮件客户端，连接到 IMAP 服务器。

我有一些个人问题，现在我回来了，我希望收到过去发送给我的所有电子邮件。

我仍在使用 Ubuntu。我有我的 IMAP 服务器地址、电子邮件帐户和密码。我只能检索一些电子邮件（大约 700 封），但我丢失了几封。

Thunderbird 是否在本地存储电子邮件？如果是这样，在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:21:46.203

如果邮件设置为同步，则有一个本地副本。如果 imap 服务器上的副本被删除，本地副本也会被删除，但如果您再也没有连接到 imap 服务器，则该副本可能仍然存在。文件位于配置文件文件夹下

```
~/.thunderbird/<Profile name>/ 
```

或使用 Debian/Ubuntu：

```
~/.mozilla-thunderbird/<Profile name>. 
```

[http://kb.mozillazine.org/Profile_folder_-_Thunderbird#Linux_and_Unix](http://kb.mozillazine.org/Profile_folder_-_Thunderbird#Linux_and_Unix)

# c# - 将 .Net Framework 4.0 添加到安装项目中

> ID：11579883
> 
> 赞同：5
> 
> 时间：2012-07-20T12:58:58.257
> 
> 标签：c#

> **可能重复：**
> [为 C# 应用程序制作安装程序，并将 .NET Framework 安装程序包含到安装程序中](https://stackoverflow.com/questions/6090913/make-an-installation-program-for-c-sharp-applications-and-include-net-framework)

我有 Windows 应用程序到 .net 框架 4.0，我想将 .net 框架 4.0 添加到安装文件中..

我已经使用先决条件添加了它，但是当我开始下载它时，它需要互联网连接。文件大约 250 MB

是否有可能当我开始安装应用程序时，它也会自动安装 .net 框架？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T13:11:34.340

如果您使用的是 Visual Studio 安装程序安装项目，请转到 Setup Projects Properties 并单击 Prerequisites 按钮，然后您需要选择所需的框架（[3.5 无法开箱即用，请参阅第 2.3.1.1 节](http://download.microsoft.com/download/A/2/8/A2807F78-C861-4B66-9B31-9205C3F22252/VS2008SP1Readme.htm)）。然后你选择`Download prerequisites from the same location as my application`。这将包括框架作为您的安装程序的一部分。

![在此处输入图像描述](../Images/02c4ef62b2c9fbbb24b95b92b3497e2e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:04:16.900

是的，您可以通过在您自己的设置中添加 .net 框架设置并在客户端计算机上未安装 .net 设置时通过进程启动 .net 框架设置。

# java - 带有 Spring Security 的 Apache/mod_jk

> ID：11579889
> 
> 赞同：1
> 
> 时间：2012-07-20T12:59:17.000
> 
> 标签：java, url-rewriting, spring-security, apache2, mod-jk

我在将 mod_jk 与 Spring Security 一起使用时遇到了一些问题，这些问题已经在以前的项目中工作过，但我现在似乎无法让它工作。

当我的网络应用程序位于时，我使用 JBoss（但也可以很容易地使用 Tomcat）遇到了一个相当典型的情况，`http://hostname/myapp`并且我希望它对浏览器隐藏，这样所有访问都将是`http://hostname`

在 Apache 中，我有一些规则：-

```
# Remove double "myapp" in url
RewriteRule ^/myapp/(.*) /$1

# Check to see if content can be served locally - rewrite back if not
RewriteCond /dir/to/static/content -f
RewriteRule ^/(.*) /myapp/$1 [PT]

JkMount /myapp/* loadbalancer 
```

我已将 Spring Security 剥离为尽可能简单：

```
<security:http auto-config="true">
<security:intercept-url pattern="/**" access="ROLE_USER" />
</security:http> 
```

在我的 web.xml

```
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
<url-pattern>/*</url-pattern>
 </filter-mapping> 
```

问题是，如果没有 Spring 安全性（即删除 springSecurityFilterChain），这可以正常工作，但是包含它我会遇到类似的问题

```
Reason: Authentication method not supported: GET 
```

当我尝试登录时。

我的问题是：

1.  这是需要配置的 Spring Security 问题，还是我的 Apache 不正确？
2.  有没有人有一个可以与我分享的工作配置！

我已经为此苦苦挣扎了几个小时，阅读了很多帖子，但我没有设法让它发挥作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T07:47:58.120

回答我自己的问题，以便将来可能帮助其他人。我不得不切换到 mod_proxy 而不是 mod_jk。

我的设置看起来像这样

```
<Proxy>
   Order deny,allow
   Allow from all
</Proxy>

RewriteCond /dir/to/static/content/%{REQUEST_FILENAME} !-f
RewriteRule ^/(.*) ajp://127.0.0.1:8009/myapp/$1 [P]
ProxyPassReverse /  http://myurl/myapp/
ProxyPassReverseCookiePath /myapp / 
```

我的弹簧安全文件

```
<security:http auto-config="false" use-expressions="true" disable-url-rewriting="true">
   <security:intercept-url pattern="/app/login" access="permitAll" />
   <security:intercept-url pattern="/app/**" access="hasAnyRole('ROLE_USER', 'ROLE_ADMIN')" />
   <security:form-login
    login-page="/app/login"
    authentication-failure-url="/app/login?f=1"
    default-target-url="/app/map"/>
   <security:logout logout-url="/app/logout"/>
 </security:http> 
```

我认为关键是 ProxyPassReverseCookiePath 语句。

# nosql - 关于 Memcached 和 NOSQL 的一些问题

> ID：11579892
> 
> 赞同：1
> 
> 时间：2012-07-20T12:59:23.280
> 
> 标签：nosql, memcached

像许多其他人一样，我正在考虑将 NOSQL 数据库用于新项目。有几个菜鸟问题：

1.  如果一个应用程序使用像 MongoDB 或 CouchDB 这样的 NOSQL 数据库，它是否还应该使用 memcached，或者将 memcached 添加到应用程序中没有任何好处？

2.  NOSQL 数据库是否提供像 MS SQL Server Management Studio 这样的管理 UI，允许创建/管理表和查询/查看数据？

3.  对于 Memcached，我们是否可以像在 .Net Cache 中一样设置 Database Expiration 依赖项，以便在 SQL 中更新记录时，缓存项自动过期？

谢谢

# php - 使用哪个tinyMCE包？

> ID：11579894
> 
> 赞同：2
> 
> 时间：2012-07-20T12:59:26.607
> 
> 标签：php, tinymce, version

我想使用 tinyMCE 向前端添加内容。我有一个下载最新版本[tinyMCE的链接](http://www.tinymce.com/download/download.php)

但是我很困惑在 TinyMCE 3.5.5 开发包和 TinyMCE 3.5.5 之间进行选择。

请让我知道哪个适合实施。我正在使用带有 symfony 1.0 框架的 php 5.2。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T13:16:02.470

导航到官方 tinymce 下载页面，您将获得 3 个不同版本的 tinymce：

*   TinyMCE 3.5.5 常规包
*   TinyMCE 3.5.5 jQuery 包
*   TinyMCE 3.5.5 开发包

第一个是常规生产使用的包。如果您不希望对现有核心文件进行任何更改或添加任何自定义插件，这将非常有用。

第二个称为“jQuery 包”。这允许开发人员将 tinymce 编辑器实例视为 jQuery 对象并使用类似 jQuery 风格的操作。（我强烈建议大家不要使用这个包，因为它是一个麻烦的来源，并且由于对象创建开销而在键盘输入处理时速度很慢）。

最后一个是开发人员包。这个包含常规构建，可以以相同的方式使用。通过包含`tiny_mce_dev.js`而不是常规`tiny_mce.js`的非缩小的 tinymce 文件，例如类和插件，正在加载，并且可以更轻松地进行调试。如果下载者计划编写自己的插件或开发/使用非常复杂的 tinymce 配置设置，则使用此包是一个不错的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T13:06:21.047

选择哪一个并不重要，两者完全相同。唯一的区别是 TinyMCE Developer 版本将允许您对源代码（即 javascript）进行更改。

几年来，我一直在使用 TinyMCE 来定制内容管理系统，但我从来没有觉得有必要或有理由编辑源代码。

**结论：**常规版本 3.5.5 几乎可以肯定足够好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T13:00:45.720

使用任何一个。

开发包只是给你一堆额外的东西，包括脚本的非缩小版本。

# javascript - 使用 JavaScript 读取远程 PDF 文件

> ID：11579895
> 
> 赞同：0
> 
> 时间：2012-07-20T12:59:35.447
> 
> 标签：javascript, ios, pdf, cordova

我正在开发一个 iphone 应用程序，该应用程序将从网络服务器上的文件夹中读取 pdf 文件。我制作了读取 PDF 文件的应用程序部分，一切都很好，现在我正试图弄清楚如何从 http://www.blabla.com/pdf 加载所有 pdf 文件，所以每次我上传新的 pdf 时，应用程序会自动加载它。

这是可能的吗，有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:01:07.763

这只能通过启用目录索引或使用诸如 PHP 之类的服务器端语言来读取该文件夹的内容并输出文件名来完成。

# sql-server - SQL Server 2008 + VB6 限制存储过程访问

> ID：11579896
> 
> 赞同：0
> 
> 时间：2012-07-20T12:59:45.150
> 
> 标签：sql-server, stored-procedures, vb6

有没有办法可以限制可以同时访问或运行存储过程的计算机数量？

例如，我在 10 个不同的位置安装了一个应用程序。我只希望五个位置能够运行存储过程。如果他们尝试访问 sp，其他五个将收到通知。

谢谢。

# erlang - tsung ts_config_server 无法在主机上启动 newbeam（原因：超时）正在中止

> ID：11579920
> 
> 赞同：1
> 
> 时间：2012-07-20T13:00:59.590
> 
> 标签：erlang, timeout, load-testing, tsung, beam

我目前正在对 Amazon 的 EC2 服务进行分布式负载测试，并且一直在努力遵循所有文档/论坛/支持，以了解如何使事情正常进行，但不幸的是，我发现自己被困在了这一点上。任何相关的 IRC 中都没有人能够回答这个问题......

这是我所看到的：

如果我只是在控制器本身上运行它，我可以让 Tsung 完美地工作，但有以下选项：

```
FROM tsung.xml
 <client host="tester0" weight="8" maxusers="10000" cpu="4"/> 
```

此外 - 它适用于更高/更低的 CPU 值。

我也可以很容易地使用它在本地工作：

```
use_controller_vm="true" 
```

但这现在对我没有用，因为我无法获得我想要的吞吐量。

为了让事情正常进行，我安装了 ssh 密钥。我已经打开了这些服务器上的所有端口 [0 - 65535]，并且拥有完全相同版本的 Tsung、Erlang，而且服务器上的所有内容实际上都是相同的（它们是彼此的图像）。

Tsung 版本 1.4.2 Erlang R15B01 Ubuntu 12.04LTS 相同的 EC2 安全组（所有端口都打开 - TCP 和 UPD 且没有 iptables 或 SELinux）相同的 EC2 可用区

当我确实启动 tsung 时，仅当按上述方式发送到 tester0 并且 ts_config_server 使用以下命令启动 newbeam 时，它才能工作：

```
ts_config_server:(6:<0.84.0>) starting newbeam on host tester0 with Args " -rsh ssh -detached -setcookie  tsung   -smp disable    +A 16 +P 250000  -kernel inet_dist_listen_min 64000  -kernel inet_dist_listen_max 65500  -boot /usr/lib/erlang//lib/tsung-1.4.2/priv/tsung -boot_var TSUNGPATH /usr/lib/erlang/ -pa /usr/lib/erlang//lib/tsung-1.4.2/ebin -pa /usr/lib/erlang//lib/tsung_controller-1.4.2/ebin +K true  -tsung debug_level 7 -tsung log_file ts_encoded_47home_47ubuntu_47_46tsung_47log_4720120719_451751" 
```

但是，每当我尝试使用任何远程服务器运行它时，整个测试都会失败并且我得到零用户：

```
<client host="tester1" weight="8" maxusers="10000" cpu="1"/>

ts_config_server:(6:<0.84.0>) starting newbeam on host tester1 with Args " -rsh ssh -detached -setcookie  tsung   -smp disable    +A 16 +P 250000  -kernel inet_dist_listen_min 64000  -kernel inet_dist_listen_max 65500  -boot /usr/lib/erlang//lib/tsung-1.4.2/priv/tsung -boot_var TSUNGPATH /usr/lib/erlang/ -pa /usr/lib/erlang//lib/tsung-1.4.2/ebin -pa /usr/lib/erlang//lib/tsung_controller-1.4.2/ebin +K true  -tsung debug_level 7 -tsung log_file ts_encoded_47home_47ubuntu_47_46tsung_47log_4720120719_451924" 
```

但是，当我尝试使用两个客户端运行它时（即，如下所示）：

```
<client host="tester0" weight="8" maxusers="10000" cpu="1"/>
<client host="tester1" weight="8" maxusers="10000" cpu="1"/> 
```

我再次让零用户开始访问我的网络服务器。我不知道为什么，这对我来说根本不直观。

```
ts_config_server:(6:<0.84.0>) starting newbeam on host tester1 with Args " -rsh ssh -detached -setcookie  tsung   -smp disable    +A 16 +P 250000  -kernel inet_dist_listen_min 64000  -kernel inet_dist_listen_max 65500  -boot /usr/lib/erlang//lib/tsung-1.4.2/priv/tsung -boot_var TSUNGPATH /usr/lib/erlang/ -pa /usr/lib/erlang//lib/tsung-1.4.2/ebin -pa /usr/lib/erlang//lib/tsung_controller-1.4.2/ebin +K true  -tsung debug_level 7 -tsung log_file ts_encoded_47home_47ubuntu_47_46tsung_47log_4720120719_451751"
ts_config_server:(6:<0.85.0>) starting newbeam on host tester0 with Args " -rsh ssh -detached -setcookie  tsung   -smp disable    +A 16 +P 250000  -kernel inet_dist_listen_min 64000  -kernel inet_dist_listen_max 65500  -boot /usr/lib/erlang//lib/tsung-1.4.2/priv/tsung -boot_var TSUNGPATH /usr/lib/erlang/ -pa /usr/lib/erlang//lib/tsung-1.4.2/ebin -pa /usr/lib/erlang//lib/tsung_controller-1.4.2/ebin +K true  -tsung debug_level 7 -tsung log_file ts_encoded_47home_47ubuntu_47_46tsung_47log_4720120719_451751" 
```

我确实注意到的一件事是，在传递给 slave:start 的所有参数中，只有一个不存在，即 -boot 指令后面的那个：

```
/usr/lib/erlang//lib/tsung-1.4.2/priv/tsung 
```

相反，在该目录中，我只有以下文件：

```
:~$ ls /usr/lib/erlang//lib/tsung-1.4.2/priv
tsung.boot                    tsung_controller.rel     tsung_recorder.boot         tsung_recorder.script
tsung_controller.boot         tsung_controller.script  tsung_recorder_load.boot    tsung.rel
tsung_controller_load.boot    tsung_load.boot          tsung_recorder_load.script  tsung.script
tsung_controller_load.script  tsung_load.script        tsung_recorder.rel 
```

我实际上尝试的最后一件事是记录我尝试从属时发生的 ssh 会话：启动，但我没有得到任何结果。我通过运行来做到这一点：

```
erl -rsh ssh -sname tsung -r ssh_log_me 
```

ssh_log_me 在哪里：

```
#!/bin/sh

echo "$0" "$@" > /tmp/my-ssh.log
ssh -v "$@"  2>&1 | tee -a /tmp/my-ssh.log 
```

但是我运行时没有输出：

```
(tsung@tester0)1> slave:start_link(tester1, tsung, " -rsh ssh -detached -setcookie  tsung   -smp disable    +A 16 +P 250000  -kernel inet_dist_listen_min 64000  -kernel inet_dist_listen_max 65500  -boot /usr/lib/erlang//lib/tsung-1.4.2/priv/tsung -boot_var TSUNGPATH /usr/lib/erlang/ -pa /usr/lib/erlang//lib/tsung-1.4.2/ebin -pa /usr/lib/erlang//lib/tsung_controller-1.4.2/ebin +K true  -tsung debug_level 7 -tsung log_file ts_encoded_47home_47ubuntu_47_46tsung_47log_4720120719_451751").
{error,timeout} 
```

我查看了 erlang 的 -boot 指令和实际的 erlang 代码（用于 ts_config_server），但此时我有点迷茫，可能只是遗漏了最后一条信息。

我请你看看我的 xml 文件：http: [//pastebin.com/2MEbL6gd](http://pastebin.com/2MEbL6gd)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:36:18.960

我使用 git 的最新版本重新编译并且它工作了 --- 奇怪的是它不适用于我安装的 deb 包......

向您展示-不确定时从源代码编译！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-21T21:53:23.017

确保禁用 ssh 密钥验证 ~/.ssh/config Host * StrictHostKeyChecking no UserKnownHostsFile=/dev/null

确保所有端口都可以跨控制器和工作节点访问。如果它在云中，请确保防火墙或安全组允许所有端口。3.Erlang，Tsung必须有相同的版本。

4.确保所有机器都可以互相访问

5.运行erlang测试

erl -rsh ssh -name subbu -setcookie tsung Erlang R16B03-1 (erts-5.10.4) [source] [64-bit] [smp:2:2] [async-threads:10] [hipe] [kernel-poll ：错误的]

Eshell V5.10.4（使用 ^G 中止）(daya@ip-10-0-100-224.ec2.internal)1> slave:start("worker1.com",bar,"-setcookie tsung")。

警告：将“worker1,10.0.100.225”（ECDSA）永久添加到已知主机列表中。{好吧，酒吧@worker1}

从控制器运行此测试到所有工作节点。

您应该能够毫无问题地运行测试。

祝你好运！

副部

# c# - UserState 使用 WebClient 和 TaskAsync 从 Async CTP 下载

> ID：11579928
> 
> 赞同：0
> 
> 时间：2012-07-20T13:01:21.630
> 
> 标签：c#, asynchronous, webclient, async-ctp

我目前正在使用 Async CTP，需要将此代码转换为可以使用 Task.WhenAll() 的代码。

到目前为止，我所做的是使用 UserState 对象并将我的标识符 (AID) 放入其中，然后在完成的事件中使用它。

但是 wc.DownloadFileTaskAsync 方法没有 UserState 的重载。我能做些什么？

```
for (int i = 0; i < SortedRecommendations.Count; i++)
{
    string tempfilepath = filepath + SortedRecommendations[i].Aid + ".jpg";

    if (File.Exists(tempfilepath))
        continue;

    WebClient wc = new WebClient();
    wc.DownloadFileCompleted += (s, e) =>
        {
            var q = SortedRecommendations.Where(x => x.Aid == (int)e.UserState);
            if (q.Count() > 0)
                q.First().Image = tempfilepath;
        };
    wc.DownloadFileAsync(new Uri(SortedRecommendations[i].Image.Replace("t.jpg", ".jpg")), tempfilepath, SortedRecommendations[i].Aid);
} 
```

这基本上是我想出的，但是我在 y.Aid == SortedRecommendations[i].Aid 得到了一个超出范围的异常，因为我现在显然是在下载开始时的其他东西。我看到的唯一其他可能性是使用类似 TaskEx.Run( () => { // 同步下载数据 }; 但我不喜欢这种方法。

```
for (int i = 0; i < SortedRecommendations.Count; i++)
{
    string tempfilepath = filepath + SortedRecommendations[i].Aid + ".jpg";

    if (File.Exists(tempfilepath))
        continue;

    WebClient wc = new WebClient();
    wc.DownloadFileCompleted += (s, e) =>
    {
        var q = SortedRecommendations.Where(x => x.Aid == SortedRecommendations[i].Aid);
        if (q.Count() > 0)
            q.First().Image = tempfilepath;

    };
    tasks.Add(wc.DownloadFileTaskAsync(new Uri(SortedRecommendations[i].Image.Replace("t.jpg", ".jpg")), tempfilepath));
}

await TaskEx.WhenAll(tasks);
//Everything finished 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:24:16.567

首先，我认为你不应该将你的逻辑建立在 ids 上（除非你真的必须这样做）。您应该使用对`SortedRecommendations`集合中对象的引用。

现在，如果你想一次只下载一个文件，你可以简单地使用`await`：

```
for (int i = 0; i < SortedRecommendations.Count; i++)
{
    string tempfilepath = filepath + SortedRecommendations[i].Aid + ".jpg";

    if (File.Exists(tempfilepath))
        continue;

    WebClient wc = new WebClient();
    var recommendation = SortedRecommendations[i];
    await wc.DownloadFileTaskAsync(new Uri(recommendation.Image.Replace("t.jpg", ".jpg")), tempfilepath);
    recommendation.Image = tempfilepath;
} 
```

但是，如果您想同时开始所有下载，就像您的`DownloadFileAsync()`代码一样，您可以使用`ContinueWith()`。而且您不需要用户状态，这就是闭包的用途：

```
for (int i = 0; i < SortedRecommendations.Count; i++)
{
    string tempfilepath = filepath + SortedRecommendations[i].Aid + ".jpg";

    if (File.Exists(tempfilepath))
        continue;

    WebClient wc = new WebClient();
    var recommendation = SortedRecommendations[i];
    var downloadTask = wc.DownloadFileTaskAsync(new Uri(recommendation.Image.Replace("t.jpg", ".jpg")), tempfilepath);
    var continuation = downloadTask.ContinueWith(t => recommendation.Image = tempfilepath);
    tasks.Add(continuation);
}

await Task.WhenAll(tasks); 
```

最好的解决方案可能是一次下载有限数量的文件，而不是一个或全部。这样做更复杂，一种解决方案是使用带有set`ActionBlock`的 TPL Dataflow 。`MaxDegreeOfParallelism`

# python - 将列表与字典键错误python进行比较

> ID：11579930
> 
> 赞同：0
> 
> 时间：2012-07-20T13:01:31.003
> 
> 标签：python, list, dictionary

我正在遍历一个列表并将每个元素与 2 个字典进行比较。列表元素是字典中的键。有些元素在 2 个字典中，有些在一个字典中，有些在一个字典中。

```
for i in range(0,len(mylist)-1):
    if mylist[i] == mydict[mylist[i]]:
        print 'in dict 1'
    elif mylist[i] == mydict2[mylist[i]]:
        print 'in dict 2'
    else: print 'not in dictionaries' 
```

我的问题是它没有通过第一个`elif`语句。如果在 2 个字典中找不到列表元素，则会打印一个键错误。我无法理解它，因为我在代码的另一部分中有另一个循环，与此非常相似并且可以完美运行。如果一个键不在字典中，我希望`else`打印该语句。不是关键错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T13:06:03.563

正如 mgilson 所说，问题 1 是 = 是赋值， == 是相等。但是，即使您对问题进行了编辑，如果您要查找某个键是否在字典中，您应该使用 in 运算符，而不是 equals。换句话说，形式`if key in dict:`. 所以：

```
for key in mylist:
    if key in mydict1:
        print 'Key %s in dict 1' % key
    elif key in mydict2:
        print 'Key %s in dict 2' % key
    else:
        print 'Key %s not in dictionaries' % key 
```

您可以进一步抽象它以使用函数处理任意一组 dicts，如果从长远来看这会有所帮助（尽管对于少数 dicts，如 2，您可能更好地使用上述硬编码检查）：

```
def print_keys_from_list_in_dicts(key_list, dict_list):
    indexed_dict_list = enumerate(dict_list)
    for key in key_list:
        found_in_list = []
        for index, dict in indexed_dict_list:
            if key in dict:
                found_in_list.append(index)
        print 'Key %s found in dicts %s.' % (key, found_in_list)

print_keys_from_list_in_dicts(mylist, [mydict1, mydict2]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T13:08:05.823

您可以像这样检查字典中的键：

```
if mylist[i] in mydict: 
```

此外，如果您有一个包含 10 个项目的列表，`range(0,len(mylist)-1)`则将返回`[0,1,2,3,4,5,6,7,8]` ，因此在任何情况下都可能不会考虑列表中的最后一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:03:38.693

您可以使用`get`字典的方法。

```
if mylist[i] == mydict.get(mylist[i],nonsense_value):
   ... 
```

如果`nonsense_value`未给出，则默认为`None`which 可能对您的目的来说已经足够废话了。但是，这并没有真正意义，因为它检查字典值是否与键相同。

您可能只是想检查键是否在字典中，您应该使用以下成语：

```
if mylist[i] in mydict:
   print "in dict 1"
... 
```

# iphone - iPhone 开发 - Origin 和 bounds 有什么区别？

> ID：11579931
> 
> 赞同：1
> 
> 时间：2012-07-20T13:01:34.037
> 
> 标签：iphone, ios, xcode, cocoa-touch

iPhone 开发 - Origin 和 bounds 有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:05:28.930

原点是视图开始的位置，例如 0,0 表示视图位于屏幕的左上角。

边界是屏幕的大小和原点。因此，如果大小为 10、10 且原点为 0、0，则视图位于屏幕的左上角，大小为 10 像素 x 10 像素。

编辑1：更多细节

Bounds 是一个 CGRect（[文档](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGGeometry/Reference/reference.html#//apple_ref/doc/c_ref/CGRect)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T13:05:38.463

首先，the`bounds`和`frame`of a view 是很相似的东西，但又不一样。描述`frame`了`origin`（位置/位置）和`size`它的父视图坐标系中的视图。`bounds`描述它们在视图的坐标系中。这就是为什么通常`origin`是`bounds`(0, 0) 和大小是相同的。

因此，要回答您的问题，视图的`origin`(a `CGPoint`) 和`size`(a `CGSize`) 在其自己的坐标系中构成它的`bounds`(a `CGRect`)。

# python - 小时增量时间错误

> ID：11579932
> 
> 赞同：0
> 
> 时间：2012-07-20T13:01:35.357
> 
> 标签：python, datetime

```
now = datetime.now()
d1 = datetime(now.year, now.month, now.day, now.hour, now.minute, 0)

if now.minute in xrange(46, 60):
    res = 0
    print now.hour
    print now.hour+1
    d1 = d1 + timedelta(hours=now.hour+1)
    print d1 
```

`now.hour`打印，例如，15。显示第二行，`16`但`d1`添加 timedelta 后变为：`2012-07-21 07:57:00`。这个日期是第二天早上 7 点。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:05:58.400

您创建一个值为 16 小时的 timedelta，然后将其添加到 d1。d1（如果已经是 15 小时）加上 16 小时将是第二天的 7 小时。

你没有说你想要达到的目标，但如果你试图增加一小时，那么你应该使用`d1 = d1 + timedelta(hours=1);`

# html - 包裹在锚标签中的 img 标签不可点击

> ID：11579933
> 
> 赞同：1
> 
> 时间：2012-07-20T13:01:37.820
> 
> 标签：html, css

看看我的网站 -> [mangtolo](http://mangtolo.com/)。当您单击大评论按钮的图像（正好在图像上）时，它不会带您到任何地方。但是当您单击周围的`a`标签背景时，链接会起作用。

如何使其可点击（img 标签），以便将我带到评论页面？它应该是可点击的，但我的 html 或 CSS 的结构不允许吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:09:54.560

`<div id="fblikebutton">`相对定位并呈现在评论按钮的顶部。添加一个`background-color`，您会看到它阻止了评论按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:14:17.987

如果您将 #fblikebutton 的 CSS 从

```
/* line 344 in home.css (according to Firebug) */
padding-left: 100px; 
```

到：

```
margin-left: 100px; 
```

它将解决您的问题（即 Facebook 喜欢按钮位于该评论之上）

# jquery - ajax 成功调用 element.click() 失败

> ID：11579938
> 
> 赞同：0
> 
> 时间：2012-07-20T13:01:58.893
> 
> 标签：jquery, ajax, jsf, mobile

我在单个 js 文件中使用此 ajax 调用，并将其导入我正在使用的 jsf 页面中。

我在 Chrome 中调试这部分，我在 $("#close").click(); 之前设置了一个断点。然后我在控制台中输入这个，它会出现元素的html代码，但它不会点击那个按钮，请帮忙，我的代码有什么问题？谢谢你。

```
function doLogin(username, password) {
$.ajax({
    "type" : "post",
    "url" : "com.micros.hcp.mobile.ajax.common.AjaxMSMLoginDialog.ajax",
    data : {
        "username" : username,
        "password" : password
    },
    dataType : "text",
    async: false,
    error : function(msg) {
        alert(msg);
        $.mobile.hidePageLoadingMsg();
        notification("Login failed.");
    },
    success : function(data) {
        data = String(data).trim();
        if (data == "login_success") {
            alert($("#close").attr("id")); // make sure I can get the element
            $("#close").click();
        } else {
            addErrorMessage(data);
        }
    }
});
} 
```

下面是我输入 $("close").click(); 时在 chrome 控制台中显示的结果；在断点处。在 Ajax 调用之后，如果我在控制台中运行它，它就可以工作。

```
$("#close").click();
[
<a href=​"#" id=​"close" data-role=​"button" data-rel=​"back" style=​"display:​ none;​ " data-          corners=​"true" data-shadow=​"true" data-iconshadow=​"true" data-wrapperels=​"span" data-theme=​"c" class=​"ui-btn ui-btn-up-c ui-shadow ui-btn-corner-all" data-transition=​"slideup" data-    direction=​"reverse">​…​&lt;/a>​
] 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-20T13:11:28.987

定义一个JS函数：

```
function clicked(){
    alert('clicked');
} 
```

将`onclick`属性添加到您的`<a></a>`元素

```
<a href=​"#" id=​"close" data-role=​"button" data-rel=​"back" style=​"display:​ none;​ " data-          corners=​"true" data-shadow=​"true" data-iconshadow=​"true" data-wrapperels=​"span" data-theme=​"c" class=​"ui-btn ui-btn-up-c ui-shadow ui-btn-corner-all" data-transition=​"slideup" data-    direction=​"reverse" onclick="clicked()">​…​&lt;/a>​ 
```

然后它会用这个触发你的自定义函数“

```
$('#close').click(); 
```

# osgi - 使用 camel-jpa 和 JTA 事务时出现异常“无法提交：事务标记为回滚”

> ID：11579941
> 
> 赞同：1
> 
> 时间：2012-07-20T13:02:11.487
> 
> 标签：osgi, apache-camel

我目前正在编写一个教程，以在 Karaf 上展示 camel-jpa 以及 JTA Transactions。我使用以下路线：

from("jpa://net.lr.tutorial.karaf.camel.jpa2jms.model.Person").id("jpa2jms") .transacted() .marshal(df) .bean(new ExceptionDecider()) .to （“jms：人”）；

所以我通过在 ExceptionDecider 中抛出异常来检查事务是否有效。当我这样做时，我得到以下异常：

[https://gist.github.com/3150591](https://gist.github.com/3150591)

任何想法我做错了什么？我怀疑这可能是我设置事务管理器的方式。你可以在 github 上找到我的整个项目： [https ://github.com/cschneider/Karaf-Tutorial/tree/master/cameljpa/jpa2jms](https://github.com/cschneider/Karaf-Tutorial/tree/master/cameljpa/jpa2jms)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-27T13:55:33.443

当事务在异常处理程序中被标记但异常被吞下时，就会发生这种情况。通常，此类异常应该冒泡并导致整个事务回滚。

如果异常被吞下，那么骆驼会在最后尝试提交，从而导致上述异常。

# javascript - 将 json 发送到（不是 REST）WCF 服务

> ID：11579943
> 
> 赞同：1
> 
> 时间：2012-07-20T13:02:26.013
> 
> 标签：javascript, .net, json, wcf

我需要一个 javascript，它将对象作为 json 发送到 WCF 服务以保存它。我有 javascript：

```
 <script>
      $(document).ready(function(){

                    $("#submitButton").click(function() {

console.info("executing submitButton click");
TestJSon();
 );
      });
       </script>
        <button type="button" id="submitButton">Save</button>
        <script>
            var varType;
            var varUrl;
            var varData;
            var varContentType;
            var varDataType;
            var varProcessData;          
            //Generic function to call AXMX/WCF  Service        
            function CallService() 
            {
            console.log('called CallService')
                    $.ajax({
                        type        : varType, //GET or POST or PUT or DELETE verb
                        url         : varUrl, // Location of the service
                        data        : varData, //Data sent to server
                        contentType : varContentType, // content type sent to server
                        dataType    : varDataType, //Expected data format from server
                        processdata : varProcessData, //True or False
                        success     : function(msg) {//On Successfull service call
                        ServiceSucceeded(msg);                    
                        },
                        error: ServiceFailed// When Service call fails
                    });
        }

        function ServiceSucceeded(result) {//When service call is sucessful
       alert('Service call succeded');
             varType=null;varUrl = null;varData = null;varContentType = null;varDataType = null;varProcessData = null;     
        }
        function ServiceFailed(result) {
            alert('Service call failed: ' + result.status + '' + result.statusText);
            varType = null; varUrl = null; varData = null; varContentType = null; varDataType = null; varProcessData = null;     
        }

        function TestJSon() {
                varType = "POST";
            varUrl = "http://localhost:56616/bebc179a-3a96-4934-88df-df1ca17da8b1/CountryDataService.svc/SaveObject";
            varData = { player: {'Name': '1' }};
            varContentType = "application/json; charset=utf-8";
            varDataType = "json";
            varProcessData = true;
            CallService();

        }
</script> 
```

此脚本应使用此 WCF 方法：

```
 public void SaveObject(Player player)
        {
             var input = player;
            File.WriteAllText(@"c:\Temp\" + "index.html", input.Name, Encoding.UTF8);
            return player;
        } 
```

在服务接口上是：

```
[OperationContract]
        [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Json)]
        void SaveObject(Player player); 
```

球员等级：

```
[DataContract(Name = "Player")]
    public class Player
    {
        private string _name;
        [DataMember]
        public string Name { get { return _name; } set { _name = value; } }     

    } 
```

在配置中我有：

```
<services>
 <service name="MyCompany.Services.CountryDataService" behaviorConfiguration="CountryProvinceBehavior" >
    <endpoint address="" binding="webHttpBinding" contract="MyCompany.Services.ICountryDataService" behaviorConfiguration="CountryProvinceBehavior"/>
  </service> 
```

```
 <behaviors>     
      <endpointBehaviors>
        <behavior name="CountryProvinceBehavior">
          <webHttp/>
        </behavior>
      </endpointBehaviors> 
      <serviceBehaviors>
        <behavior name="CountryProvinceBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>          
      </serviceBehaviors>
    </behaviors>     
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer> 
```

最重要的是 - 结果：方法 ServiceFailed 已被代码 0 和 statusText - NoTransport 也没有流量（Fiddler 告诉我）服务的地址没问题，因为当我将 json 更改为 jsonp ServiceFailed 时也被击中代码 200 和 statusText - 成功。

还有一个交通：

要求

```
GET http://localhost:56616/bebc179a-3a96-4934-88df-df1ca17da8b1/CountryDataService.svc/SaveObject?callback=jQuery1710486683341013641_1342788918981&player%5BName%5D=1&_=1342788921786 HTTP/1.1
Accept: application/javascript, */*;q=0.8
Accept-Language: en-US
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Accept-Encoding: gzip, deflate
Connection: Keep-Alive
Host: localhost:56616 
```

回复

```
HTTP/1.1 404 Not Found
Content-Length: 1565
Content-Type: text/html; charset=UTF-8
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Fri, 20 Jul 2012 12:55:21 GMT

<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Service</title>
    <style>BODY { color: #000000; background-color: white; font-family: Verdana; margin-left: 0px; margin-top: 0px; } #content { margin-left: 30px; font-size: .70em; padding-bottom: 2em; } A:link { color: #336699; font-weight: bold; text-decoration: underline; } A:visited { color: #6699cc; font-weight: bold; text-decoration: underline; } A:active { color: #336699; font-weight: bold; text-decoration: underline; } .heading1 { background-color: #003366; border-bottom: #336699 6px solid; color: #ffffff; font-family: Tahoma; font-size: 26px; font-weight: normal;margin: 0em 0em 10px -20px; padding-bottom: 8px; padding-left: 30px;padding-top: 16px;} pre { font-size:small; background-color: #e5e5cc; padding: 5px; font-family: Courier New; margin-top: 0px; border: 1px #f0f0e0 solid; white-space: pre-wrap; white-space: -pre-wrap; word-wrap: break-word; } table { border-collapse: collapse; border-spacing: 0px; font-family: Verdana;} table th { border-right: 2px white solid; border-bottom: 2px white solid; font-weight: bold; background-color: #cecf9c;} table td { border-right: 2px white solid; border-bottom: 2px white solid; background-color: #e5e5cc;}</style>
  </head>
  <body>
    <div id="content">
      <p class="heading1">Service</p>
      <p>Endpoint not found.</p>
    </div>
  </body>
</html> 
```

因此，我需要帮助将这个 Player 对象保存在我的 WCF 服务中。我正在使用 Wk8 和 .net 4.0

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T13:59:32.663

让我们一步一步地做这件事，这样你就可以有一个起点。

1.  创建一个新的空 ASP.NET 应用程序
2.  添加模型类

    ```
    [DataContract]
    public class Player
    {
        [DataMember]
        public string Name { get; set; }
    } 
    ```

3.  服务合同：

    ```
    [ServiceContract]
    public interface ICountryDataService
    {
        [OperationContract]
        [WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.WrappedRequest)]
        void SaveObject(Player player);
    } 
    ```

4.  和一个实现：

    ```
    public class CountryDataService : ICountryDataService
    {
        public void SaveObject(Player player)
        {
        }
    } 
    ```

5.  添加 .svc 端点 ( `CountryDataService.svc`)：

    ```
    <%@ ServiceHost 
        Language="C#" 
        Debug="true" 
        Service="MyService.CountryDataService" 
    %> 
    ```

6.  修改 web.config：

    ```
    <system.serviceModel>
        <behaviors>
          <endpointBehaviors>
            <behavior name="CountryProvinceBehavior">
              <webHttp/>
            </behavior>
          </endpointBehaviors>          
            <serviceBehaviors>
                <behavior name="">
                    <serviceMetadata httpGetEnabled="true" />
                    <serviceDebug includeExceptionDetailInFaults="false" />
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <services>
            <service name="MyService.CountryDataService">
              <endpoint 
                address="" 
                binding="webHttpBinding" 
                contract="MyService.ICountryDataService" 
                behaviorConfiguration="CountryProvinceBehavior" />
            </service>          
        </services>
        <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    </system.serviceModel> 
    ```

7.  添加`index.htm`消费：

    ```
    <!DOCTYPE html>
    <html>
    <head>
        <title></title>
    </head>
    <body>
        <script type="text/javascript" src=" http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript">
            $.ajax({
                url: 'countrydataservice.svc/saveobject',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify({ player: { Name: 'foo bar'} }),
                success: function (result) {

                }
            });
        </script>
    </body>
    </html> 
    ```

* * *

更新：

这是我的示例解决方案的链接：[http ://www.filedropper.com/myservice](http://www.filedropper.com/myservice)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:12:09.627

看起来您在端点行为中有错误的元素。尝试在您的配置中替换`<webHttp/>`为。`<enableWebSCript/>`

```
 <endpointBehaviors>
    <behavior name="CountryProvinceBehavior">
      <enableWebScript/>
    </behavior>
  </endpointBehaviors> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T22:13:30.613

当您设置端点行为配置以使用`<enableWebScript />`WCF 为您生成 JavaScript 代理端点时。因此，您可以更简单地使用它。

**Web.config 文件**

```
<system.serviceModel>
<services>
  <service name="Service.TestService">
    <endpoint address="" contract="Service.ITestService" binding="webHttpBinding" behaviorConfiguration="web"/>
  </service>
</services>

<behaviors>
  <serviceBehaviors>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" />
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="web">
      <enableWebScript />
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

**服务合约**

```
[ServiceContract(Name = "TestService", Namespace = "Service")]
public interface ITestService
{
    [OperationContract]
    [WebInvoke(ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
    int GetSum(int a, int b);
} 
```

例如，您的服务托管在 上`localhost/TestService.svc`，那么要获取 JavaScript 代理类代码，您应该转到 url`localhost/TestService.svc/js`

**JS代理类的使用方法**

```
var proxy = new Service.TestService(); 
proxy.GetSum(1, 2, function(response) { alert('Result: ' + response); }, function(response) { alert('Error'); }, proxy); 
```

有关更多信息，请查看[http://msdn.microsoft.com/en-us/library/bb412167.aspx](http://msdn.microsoft.com/en-us/library/bb412167.aspx)

# mysql - 仅在 MYSQL DATEDIFF 中显示小时数

> ID：11579946
> 
> 赞同：48
> 
> 时间：2012-07-20T13:02:36.947
> 
> 标签：mysql, sql, datediff

我已经忙了几个小时了，但我无法让它工作。

```
SQL

SELECT DATEDIFF(end_time, start_time) as `difference` FROM timeattendance WHERE timeattendance_id = '1484'

start_time =   2012-01-01   12:00:00
end_time =     2012-01-02   13:00:00 
```

时差为 25（小时）。但我得到的输出是 1（天）。

如何获得 25 小时作为输出？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-07-20T13:07:27.803

使用[TIMESTAMPDIFF](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_timestampdiff)怎么样？

```
SELECT TIMESTAMPDIFF(HOUR, start_time, end_time) 
           as `difference` FROM timeattendance WHERE timeattendance_id = '1484' 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-20T13:09:46.930

您最好使用 TIMEDIFF 而不是 DATEDIFF，因为 DATEDIFF 在比较之前会将所有时间转换为日期。执行 TIMEDIFF 后，您可以使用 HOUR 函数获取小时数。

```
SELECT HOUR(TIMEDIFF(end_time, start_time)) as `difference`; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-20T13:11:23.450

您可以使用 TIMEDIFF 和 HOUR 函数来提取小时。

```
SELECT HOUR(TIMEDIFF(end_time, start_time)) as `difference` FROM timeattendance WHERE timeattendance_id = '1484' 
```

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff)
[http://dev.mysql.com/doc/refman/5.5/en/date-and -time-functions.html#function_hour](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_hour)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-20T13:07:34.653

如 MySQL[参考](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff)中所述，`DATEDIFF`只需要几天的时间。

如果两个日期都在 1970 年之后，您可以减去时间戳：

```
SELECT ( UNIX_TIMESTAMP("2012-01-02 13:00:00") - 
         UNIX_TIMESTAMP("2012-01-01 12:00:00") ) / 3600 ... 
```

或者：

```
SELECT TIMEDIFF ( "2012-01-02 13:00:00", "2012-01-01 12:00:00") / 3600 ... 
```

# java - Google Guice，如何在注入类之前和之后注入资源

> ID：11579947
> 
> 赞同：2
> 
> 时间：2012-07-20T13:02:40.353
> 
> 标签：java, dependency-injection, guice

我有以下情况：

类 ServiceCaller：

```
public class ServiceCaller{
    private Service service;
    public void initialize(List<String> params){
        //get the params from list and set to String objects
        service = new Service(param1,param2);
    }
} 
```

课堂服务：

```
public class Service{
    SomeClass classe;
    public Service(String param1,String param2){
        //call methods to do stuffs with params
        classe = new SomeClass();
    }
} 
```

我的应用程序有一个框架，它读取 .properties 并调用 ServiceCaller 类，并在构造后初始化和填充 ServiceCaller 中的参数。Service 类，只需使用参数，并实例化 SomeClass 类。

我正在尝试将所有这些都传递给 Google Guice，而我的课程是这样的：

类服务调用者：

```
public class ServiceCaller{
    private final Service service;

    @Inject
    public ServiceCaller(Service service){
        this.service = service;
    }
    public initialize(List<String> params){
        //set params to objects...
    }
} 
```

和班级服务：

```
public class Service{
    private final SomeClass classe;

    @Inject
    public Service(SomeClass classe, String param1,String param2){
        //call methods to do stuffs with params
        this.classe = classe;
    }
} 
```

这是我的疑问：我怎么能做到这一点？

1 - 在 ServiceCaller 中，注入的构造函数在 initMethod 之前被调用，这样他还没有参数。我认为这会在 Service 类中生成一个 nullPointer。我如何接收字符串参数？

2 - 我如何在 ServiceCaller 类中注入服务类？他需要调用 init，挂载带有参数的 Service 类，并且仅在此时将 Service（已经带有参数）注入到 ServiceCaller。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:14:46.153

真的是`ServiceCaller`配置的工作`Service`吗？如果是这样，那么这种情况并不适合依赖注入。就像现在一样创建`Service`。`new`

但`ServiceCaller`创建`Service`. 相反，您应该将参数直接注入`Service`到配置它，然后将配置`Service`注入到`ServiceCaller`.

现在，如果问题是参数来自`ServiceCaller`，但`SomeClass`需要注入，那么`ServiceCaller`Guice 和 Guice 都无法自己完成这项工作。我建议你拆分构造：创建一个`ServiceFactory`可以注入的`SomeClass`，然后注入`ServiceCaller`，然后提供一个接受参数的工厂方法。就像是：

```
ServiceCaller {
    private final ServiceFactory serviceFactory;
    private Service service;

    @Inject
    public ServiceCaller(ServiceFactory serviceFactory) {
        this.serviceFactory = serviceFactory;
    }

    public void initialize(List<String> params) {
        service = serviceFactory.create(params.get(0), params.get(1));
    }
}

class Service {
    private final SomeClass classe;

    public Service(SomeClass classe, String param1, String param2) {
        //call methods to do stuffs with params
        this.classe = classe;
    }
}

class ServiceFactory {
    private final SomeClass classe;

    @Inject
    public ServiceFactory(SomeClass classe) {
        this.classe = classe;
    }

    public Service create(String param1, String param2) {
        return new Service(classe, param1, param2);
    }
} 
```

# c# - 以 DataContracts 作为参数的 WCF 多服务 C#

> ID：11579950
> 
> 赞同：1
> 
> 时间：2012-07-20T13:02:52.833
> 
> 标签：c#, .net, wcf, datacontract

我有多个`DataContracts`相同数量的 WCF 服务来管理每个服务的方法。我有一个特定的`[DataContract]`调用`User`，我在所有其他服务中用作参数，例如：`ListCompany(User, CompanyId)`.

当一个服务引用 WCF 服务时，Company`[DataContract] User`与`Company.User`原来的`User`. 有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:27:35.690

## 逻辑上相同的 DataContract，用于多个服务

您可能正在使用*Add Service Reference...*菜单选项以通常的方式为 WCF 服务客户端添加服务引用。当您这样做时，`Reference.cs`将为每个服务生成一个文件，并且每个服务将具有不同的命名空间。但是，由于您要跨服务共享合同，因此您需要单击“**添加服务引用**”对话框上的“高级...”按钮，并确保选中*引用的程序集中的重用类型，*并（最简单）确保*在所有引用的程序集中重用类型*被检查。

现在，如果您实际上没有对包含这些`[DataContract]`类的程序集的正常项目或程序集引用，这将不起作用。所以，添加这些引用。如果这些类混合到您的服务器端实现中，您将需要将它们移动到它们自己的程序集中并在客户端和服务器上引用它们。

## 逻辑不同的 DataContract，用于 Multilpe 服务

如果您确实有两种不同类型的用户（即两种不同的合同），其中一个合同用于一个服务客户端，一个合同用于另一个服务客户端，则应确保未选中引用程序集中的重用类型，并确保每个服务引用都在不同的命名空间中。

另一种方法是在声明它们时为它们使用不同的名称：

```
[DataContract(Name = "User"]
public class User { ... }

[DataContract(Name = "CompanyUser")]
public class User { .... } 
```

上面的代码假设每个`User`类都在不同的服务器端命名空间中，也可能在不同的程序集中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:45:27.490

我建议您应该寻找一种更好的方法来使用添加服务引用的 WCF 服务。这篇黄金文章描述了如何在所有解决方案之间共享数据合约，并通过使用 Chanel 工厂来使用它们，而无需 VS 为您生成大量代码。 [http://www.netfxharmonics.com/2008/11/understanding-wcf-services-in-silverlight-2](http://www.netfxharmonics.com/2008/11/understanding-wcf-services-in-silverlight-2)

可能看起来很多东西，但它充满了非常有用的技巧，包括*没有魔法*的服务访问，如下所示：

> 现在我们可以将注意力转向客户端应用程序。首先，让我先提醒大家不要在 Visual Studio 中使用“添加服务引用”来创建神奇的服务客户端。代码非常冗长，难以管理，编辑很容易被覆盖，并且几乎总是被用作不实际学习 WCF 的借口。没有什么比仅仅因为他们知道如何使用鼠标而不得不与了解产品的人打交道更糟糕的了。Juval Lowy 在他所有的书籍和演讲中，反复告诉人们避免使用这个有缺陷的功能是有原因的。幸运的是，作为专业人士，我们有能力了解如何在没有魔法的情况下做事。
> 
> 正如我已经多次提到的，WCF 依赖于 ABC 的概念。我们已经了解了如何通过创建指定地址、绑定和协定的端点来配置 WCF 主机。事实证明，这也是客户端所需要的。对于 .NET 和 Silverlight，您可以在通道工厂中将地址和绑定与合同合并以创建通道。这不仅仅是花哨的概念架构师所说的，这正是您的代码的样子（非常好的架构的标志！）下面是我的意思的 .NET 版本：

```
BasicHttpBinding basicHttpBinding = new BasicHttpBinding();
    EndpointAddress endpointAddress = new EndpointAddress("http://localhost:1003/Person.svc");
    IPersonService personService = new ChannelFactory<IPersonService>(basicHttpBinding, endpointAddress).CreateChannel();
    //+
    Person person = personService.GetPersonData("F488D20B-FC27-4631-9FB9-83AF616AB5A6"); 
```

非常值得一读。

# ffmpeg - 使用 FFMPEG 在特定点向视频添加多个音频文件

> ID：11579952
> 
> 赞同：3
> 
> 时间：2012-07-20T13:02:58.677
> 
> 标签：ffmpeg

我正在尝试使用 FFmpeg 从一系列图像和各种音频文件中创建视频。虽然使用以下命令创建包含图像序列的视频是没有问题的：

```
ffmpeg -f image2 -i image%d.jpg video.mpg 
```

我还没有找到一种方法来将特定点的音频文件添加到生成的视频中。是否可以执行以下操作：

```
ffmpeg -f image2 -i image%d.jpg -i audio1.mp3 AT 10s -i audio2.mp3 AT 15s video.mpg 
```

任何帮助深表感谢！

编辑：

在我的情况下，解决方案是按照 blahdiblah 在以下答案中的建议使用 sox 。您首先必须创建一个空的音频文件作为起点：

```
sox -n -r 44100 -c 2 silence.wav trim 0.0 20.0 
```

这会生成一个 20 秒的空 WAV 文件。之后，您可以将空文件与其他音频文件混合。

```
sox -m silence.wav "|sox sound1.mp3 -p pad 0" "|sox sound2.mp3 -p pad 2" out.wav 
```

最终音频文件的持续时间为 20 秒，并在开头播放 sound1.mp3，在 2 秒后播放 sound2.mp3。要将图像序列与音频文件结合起来，我们可以使用 FFmpeg。

```
ffmpeg -i video_%05d.png -i out.wav -r 25 out.mp4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:38:34.847

有关添加带有一些偏移的单个音频输入，请参阅[此问题。](https://stackoverflow.com/q/7426179/85950)[`-itsoffset`那里提到](http://roundup.libav.org/issue359)的错误仍然存​​在，但在某些情况下它确实有效，请参阅用户的评论。

如果它适用于您的情况，那将是理想的：

```
ffmpeg -i in%d.jpg -itsoffset 10 -i audio1.mp3 -itsoffset 15 -i audio2.mp3 out.mpg 
```

如果没有，您应该能够将所有音频文件与[sox](http://sox.sourceforge.net/sox.html)组合，覆盖或插入静音以产生正确的偏移量，然后将其用作 FFmpeg 的输入。不那么方便，但保证可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:17:24.407

我能想到的一种方法是首先在整个视频期间创建音频文件，然后将音频与视频文件混合

# java - Java中空引用上的静态字段

> ID：11579953
> 
> 赞同：119
> 
> 时间：2012-07-20T13:03:03.480
> 
> 标签：java, static

`static`Java 中的成员（`static`字段或`static`方法）与其各自的类相关联，而不是与此类的对象相关联。以下代码尝试访问`null`引用上的静态字段。

```
public class Main
{
    private static final int value = 10;

    public Main getNull()
    {
        return null;
    }

    public static void main(String[] args)
    {
        Main main=new Main();
        System.out.println("value = "+main.getNull().value);
    }
} 
```

虽然`main.getNull()`返回`null`，但它可以工作并显示`value = 10`。这段代码是如何工作的？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-07-20T13:06:18.130

[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#d5e24400)中指定了该行为：

> 空引用可用于访问类（静态）变量而不会导致异常。

更详细地说，[静态字段评估](http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.11.1-200-A)，例如`Primary.staticField`如下工作（强调我的） - 在你的情况下，`Primary = main.getNull()`：

> *   对 Primary 表达式求值，并**丢弃结果**。[...]
> *   如果该字段是非空白最终字段，则**结果是作为主表达式类型的类或接口中指定类变量的值。**[...]

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-20T13:05:32.263

因为，正如您所说，静态字段与实例无关。

从实例引用访问静态字段的能力（正如您所做的那样）只是一种语法糖，没有其他含义。
您的代码编译为

```
main.getNull(); 
Main.value 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T13:10:14.480

1.  使用类名访问`static`成员是合法的，但没有写到不能`static`使用对象引用变量访问成员。所以它在这里工作。

2.  `null`允许对象引用变量访问类`static`变量，而不会在编译或运行时引发异常。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-20T09:52:52.010

当您在编译时访问带有对象的静态变量或方法时，它会转换为类名。例如：

```
Main main = null;
System.out.println(main.value); 
```

它将打印静态变量值的值，因为在编译时它将被转换为

```
System.out.println(Main.value); 
```

证明：

下载反编译器并将您的 .class 文件反编译为 .java 文件，您可以看到所有静态方法或变量引用的对象名称自动替换为类名称。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-26T14:39:48.680

静态变量和方法总是属于类。因此，当我们创建任何对象时，只有非静态变量和方法与对象一起进入堆，但静态驻留在类的方法区域中。这就是为什么当我们尝试访问静态变量或方法时，它会转换为类名点变量或方法名。

请参阅以下链接以获取更多详细信息。

[http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)

# c# - 在 PdfTable 中找不到文本

> ID：11579956
> 
> 赞同：0
> 
> 时间：2012-07-20T13:03:13.887
> 
> 标签：c#, itextsharp, pdfptable

```
BaseFont Vn_Helvetica = BaseFont.CreateFont(@"C:\Windows\Fonts\arial.ttf", 
"Identity-H", BaseFont.EMBEDDED);
Font fontNormal = new Font(Vn_Helvetica, 12, Font.NORMAL);
foreach (var t in htmlarraylist)
                {

 if (t is PdfPTable)
                    {
                        var countColumn= ((PdfPTable)t).NumberOfColumns;//is 7
                        var countRows = ((PdfPTable)t).Rows;//is 10 
```

//我想为所有文本设置 normalFont 但 defaultCell.Phrase 始终为空

```
((PdfPTable)t).DefaultCell.Phrase = new Phrase() { Font = fontNormal }; 
```

//如何在pdfptable中查找文本来设置字体？

```
 }
                   document.Add(t); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:15:51.053

You are trying to set the font on the phrase for the default cell of the table. You need to set this for all cells on the table:

```
 // t is a PdfPTable
        foreach(var row in t.Rows)
        {
            foreach(var cell in row.GetCells())
            {
                if(cell.Phrase != null)
                {
                    cell.Phrase.Font = fontNormal;
                }
            }
        } 
```

# ajax - jQuery 移动对话框中的 Ajax 请求

> ID：11579957
> 
> 赞同：0
> 
> 时间：2012-07-20T13:03:15.903
> 
> 标签：ajax, jquery, jquery-mobile, dialog

我有个问题...

我正在处理一个对话框，其中有两个按钮与两个不同的操作相关联。单击按钮时，我希望有两个 Ajax 请求。我尝试了各种javascript脚本，但它不起作用......

我假设在对话框的页面中我没有包含 jquery 移动脚本（在指南中说如果通过链接 [data-rel] 将对话框称为对话框，则对话框不需要指向脚本的链接）

**似乎没有加载内部对话框外部javascript代码......** 这是一个问题......

你认为最好用一个简单的链接（没有 data-rel 和 data-ajax=false）调用对话框，并用 data-role=dialog 替换 data-role=page（我的意思是在对话框页面内）。

谢谢

此致

卢卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:26:44.180

我通过 Jquery 移动论坛找到了解决方案...

问题在于，对于对话框，javascript 代码必须写在页面 div 内，而不是在正文的末尾（javascript 代码的经典位置）。所以你的代码将被加载并且可以工作......

# algorithm - 将任何命题公式转换为 CNF 格式的复杂性

> ID：11579963
> 
> 赞同：6
> 
> 时间：2012-07-20T13:03:29.707
> 
> 标签：algorithm, math, logic, discrete-mathematics

将任何命题公式转换为 CNF 格式的复杂性是多少？这是一个NP完全问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T15:58:20.547

将一般格式良好的公式转换为**等效**CNF 的标准算法具有*指数运行时间*，因为[在最坏的情况下，n 子句 WFF 等效于 2^n 子句 CNF](http://en.wikipedia.org/wiki/Conjunctive_normal_form#Conversion_into_CNF)。

但是，您可以*在多项式时间内*将任意布尔公式转换为**不严格等价的 CNF，但仅当布尔公式可满足时才可满足**。这是用于证明 3CNF 是 NP 完全的标准归约，假设更一般的 SAT 是 NP 完全的。见[这里](https://cstheory.stackexchange.com/a/1414)。

# iphone - cocos2d中如何推送场景并传递参数

> ID：11579967
> 
> 赞同：4
> 
> 时间：2012-07-20T13:03:41.833
> 
> 标签：iphone, ios, cocos2d-iphone, cclayer

我想知道是否有办法在 cocos2d 2.0 中推送场景并将一些参数传递给这个推送的场景，例如，我知道要推送一个场景我使用这个：

```
[[CCDirector sharedDirector] pushScene:[HelloWorldLayer scene]]; 
```

这推动了helloworldlayer，这是一个简单的层：

```
// HelloWorldLayer
@interface HelloWorldLayer : CCLayer
{
}

// returns a CCScene that contains the HelloWorldLayer as the only child
+(CCScene *) scene;

@end 
```

但我想向该层传递一些参数，所以当层被推送时，我可以使用我传递的参数。

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T13:30:47.593

你可以做类似的事情`+(CCScene *) sceneWithParameter:(ParameterType)parameter;`而不是`+(CCScene *) scene;`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T14:00:06.560

首先，您必须创建一个使用参数调用的方法，如下所示

**HelloWorldLayer.h**

```
@interface HelloWorldLayer : CCLayer
{
}
+(CCScene *)sceneWithParam:(id)parameter;

@end 
```

**HelloWorldLayer.m**

```
@implementation HelloWorldLayer

+(CCScene *)sceneWithParam:(id)parameter
{
    [[parameter retain]doSomething];
    CCScene * scene = [CCScene node];
    HelloWorldLayer *layer = [HelloWorldLayer node];
    [scene addChild: layer];
    return scene;
}

-(id) init
{
    if(self = [super init])
    {

    }
    return [super init];
}

// All your methods goes here as usual

@end 
```

然后你通过调用来推送它

```
[[CCDirector sharedDirector] pushScene:[HelloWorldLayer sceneWithParam:obj]]; 
```

现在这可能还不够，如果您需要图层中的参数，您将需要对图层执行相同的操作。使用该方法创建initmethod，然后将其进一步传递给sceneWithParam：方法中的图层。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:19:20.763

通过全局变量或外部对象（可从“推送器”和. 访问。`HelloWorldLayer`甚至您可以通过`userData`.`HelloWorldLayer`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-06T18:54:05.920

Johnathan 和 Kreiri 的答案效果很好，但您不能也只是将属性添加到您的推送场景并设置它们吗？所以代码看起来像这样（在浏览器中输入，您可能需要调整）：

```
HelloLayer *hello = [HelloLayer scene];
hello.param1 = someValue;
hello.param2 = someOtherValue;
hello.param3 = yetAnotherValue;
[[CCDirector sharedDirector] pushScene: hello]; 
```

当然，在 HelloLayer.h 中，您可以定义如下内容：

```
@property (strong, nonatomic) NSString *param1;
@property (readwrite) BOOL *param2;
@property (strong, nonatomic) NSNumber *param3; 
```

# ios - ios NSPredicate 创建时崩溃

> ID：11579974
> 
> 赞同：0
> 
> 时间：2012-07-20T13:04:06.617
> 
> 标签：ios, crash, nsstring, nspredicate, nsfetchrequest

我正在使用这段代码从核心数据中获取一些东西：

```
NSFetchRequest *req = [[NSFetchRequest alloc] initWithEntityName:@"Friend"];

NSString *predicateString = [NSString stringWithFormat:
                             @"identifier == %@", [[friendInfo objectForKey:@"id"] stringFromMD5]];
NSPredicate *predicate = [NSPredicate predicateWithFormat:predicateString];
req.predicate = predicate;

req.fetchLimit = 1;
NSError *requestError = nil;
NSArray *tmp = [self.managedObjectContext executeFetchRequest:req error:&requestError]; 
```

但它崩溃了

```
NSString *predicateString = [NSString stringWithFormat:
                                 @"identifier == %@", [[friendInfo objectForKey:@"id"] stringFromMD5]]; 
```

如果我删除 stringFromMD5 方法调用，它可以工作。

```
NSString *predicateString = [NSString stringWithFormat:
                                     @"identifier == %@", [friendInfo objectForKey:@"id"]]; 
```

知道为什么吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:16:29.797

请尝试以下方法，它可能会很好用：

```
NSPredicate *_predicate = [NSPredicate predicateWithFormat:@"%K == %@", @"identifier", [[friendInfo objectForKey:@"id"] stringFromMD5]]; 
```

# jquery - ASP.NET WebForms/jQuery：按钮上的 jQuery .click 事件可防止按钮的服务器端 OnClick 事件触发

> ID：11579978
> 
> 赞同：2
> 
> 时间：2012-07-20T13:04:22.817
> 
> 标签：jquery, asp.net, events, webforms

我试图在单击按钮后立即禁用它以防止双击。以下Javascript可以完成这项工作：

```
$(document).ready(function () {
    $("#<%=cmTest.ClientID %>").click(function () {
        $(this).attr("disabled", "disabled");
    });
}); 
```

这是我的按钮：

```
<asp:Button ID="cmTest" Text="Test" runat="server" /> 
```

这是我的VB：

```
Private Sub cmTest_Click(sender As Object, e As System.EventArgs) Handles cmTest.Click

    Threading.Thread.Sleep(5000)

End Sub 
```

每当将 jQuery .click 事件分配给按钮时，客户端功能都会起作用，但服务器端事件永远不会运行。当我删除 jQuery 时，服务器端事件会执行。这几乎就像我分配`onclick=javascript:DisableButton();return false;`给按钮本身一样。有没有办法将该 Javascript 分配给按钮，同时还允许触发服务器端事件？

**编辑：**所以它并不*完全*像分配`return false;`给按钮，因为页面仍然回发。这样做`return false;`实际上取消了按钮的提交，这不是这里发生的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:38:11.133

您还可以将可见性设置为 false。它与禁用按钮不太一样，但它具有功能，并且不会遇到无法单击禁用按钮的问题。

您甚至可以将其替换为加载图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:16:17.160

禁用的表单元素不包含在帖子中。

因此，您的事件会在元素作为请求发送之前禁用该元素，从而将其隐藏在 ASP.Net 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T13:16:50.377

它不会执行，因为您禁用了该按钮。而不是禁用，您可能应该更改按钮的外观和感觉（应用不同的 CSS），以便用户感觉它已被禁用。将会话变量设置为某个值作为按钮单击事件的第一行。并且每次检查它是否已经设置，然后不要执行代码。因此，您可以防止双重提交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T13:12:08.883

将以下内容添加到您的表单元素

```
onsubmit="$(':submit').attr('disabled', 'true');" 
```

如果您有超过 1 个提交按钮，则必须使其更加明确。

# youtube - 如何一次禁用对我的 2000 个 Youtube 视频的评论（不是一个一个）？

> ID：11579979
> 
> 赞同：1
> 
> 时间：2012-07-20T13:04:24.400
> 
> 标签：youtube, youtube-api

我有 2000 个 Youtube 视频，我想禁用所有这些视频的评论。当然，我不想一个一个地做，我想一次做。

类似于：Get-AllMyVideos| 设置评论关闭；）

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:46:03.053

进入您的“视频管理器”并勾选您要禁用评论的所有视频旁边的框，然后单击所有视频顶部的操作，然后单击评论，这将允许您禁用勾选的所有评论您选择的视频。:) 这困扰了我好几个小时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:49:29.960

如果要选择所有视频，操作旁边有一个复选框，可以选择页面上的所有视频以加快流程

# iphone - RestKit 应用程序因 [NSPathStore2 stringByAppendingQueryParameters:] 崩溃：无法识别的选择器消息

> ID：11579996
> 
> 赞同：1
> 
> 时间：2012-07-20T13:05:43.110
> 
> 标签：iphone, ios, ios5, restkit

我是 RestKit 的新手，我正在使用 RKObjectMapping 调用服务，但它崩溃了，错误日志是

```
2012-07-20 18:31:58.319 SampleRest[6589:207] -[NSPathStore2 stringByAppendingQueryParameters:]: unrecognized selector sent to instance 0x6d74c20 
```

这是我写的代码：

```
-(void) callService {
RKObjectMapping *rk = [RKObjectMapping mappingForClass:[vo class]];
[rk mapKeyPath:@"id" toAttribute:@"primaryKey"];
[rk mapKeyPath:@"opposing_team_name" toAttribute:@"opp_team_name"];
RKObjectManager *rkManager = [RKObjectManager objectManagerWithBaseURLString: @"http://hercules.softwaytechnologies.com/sportsapp_v3.0"];
[rkManager loadObjectsAtResourcePath:@"/event_games/get?application_id=1" delegate:self]; 
```

}

请帮忙，我做错了吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T10:12:28.563

我遇到了同样的问题，发现添加**RestKit**的过程很痛苦，因此很混乱。我注意到链接器标志`-ObjC`，虽然我知道我设置了它，但不再应用于我的目标！一旦我将其他链接器标志设置为`-ObjC -all_load`一切都很好。

**所以我的建议是仔细检查并再次检查！**

我遇到的其他问题是在哪里物理添加**RestKit的源文件。**我没有按照说明将其添加为我的 repo 的子项目，因为我正在使用`Mercurial`并发现它只是搞砸了。最终，我发现将原始`RestKit`文件夹的全部内容复制到包含我的解决方案的基本文件夹中是可行的。我看起来有点乱——尽管当你将`RestKit`proj 文件放入`xCode`其中时，所有文件都整齐地排列在其文件夹中。 *（如果有人可以建议一种更好的方法 - 这行得通！ - 我想知道，谢谢）*

# interface - GhostDoc - 更新派生类注释

> ID：11579999
> 
> 赞同：0
> 
> 时间：2012-07-20T13:05:46.977
> 
> 标签：interface, comments, derived-class, xml-comments, ghostdoc

我有一个`ISomeInterface`带有完整 xml 注释的接口 ()，以及一些带有匹配 xml 注释的派生类。

如果我更改界面中的注释，是否可以使用 GhostDoc（或任何其他工具）更新所有派生类中的注释？

我很欣赏这在某些情况下可能会导致不需要的更改，但在这种情况下我并不担心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T16:16:36.517

是的，您可以使用 GhostDoc v4.0 Beta 的 Re-Document 命令——它将重新创建 XML 文档，同时保留您的自定义标签。

让我知道这是否有帮助。

谢谢！