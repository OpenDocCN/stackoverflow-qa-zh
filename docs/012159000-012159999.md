# StackOverflow 问答 12159000-12159999

# java - 关于testng的一些问题

> ID：12159008
> 
> 赞同：0
> 
> 时间：2012-08-28T12:14:48.540
> 
> 标签：java

1.  我无法从控制台执行输入。

    ```
     @Test
            public static void abcde1() throws Exception
             {
                 Run1 run123=new run1();

                 ApplicationContext context = new ClassPathXmlApplicationContext(
                    "test-beans.xml");
       ServiceClient serviceClient = (ServiceClien)context.getBean("customer");
                 System.out.println(serviceClient);
                 run123.setup(serviceClient);//setup belongs to another class
             } 
    ```

    2.这个函数属于另一个Run1。（BufferRead只在那里定义，它以System.in作为输入。

    ```
     public void setup(ServiceClient serviceClient) throws Exception {

         System.out.println("enter some ");     

        System.out.println("Enter the UserName the user wants to login With");
    String userName = bufferRead.readLine();
    System.out.println(userName);
        } 
    ```

在程序中我通过引用 testng.xml 来调用这个测试

```
 <suiteXmlFiles>
           <suiteXmlFile>testng.xml</suiteXmlFile>
      </suiteXmlFiles> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:40:36.797

我使用 Eclipse Indigo 测试了以下内容：

```
 @Test
    public void tests() throws Exception {    
        System.out.println("Please enter the text");
        BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
        reader.readLine();
    } 
```

它工作正常。运行测试时只需选择控制台，输入您的输入文本并按回车键。

# java - 实施定期行动的正确方法

> ID：12159012
> 
> 赞同：2
> 
> 时间：2012-08-28T12:15:00.833
> 
> 标签：java, android, service, scheduled-tasks, task

我需要每 10 秒从 Android 的服务器发送和获取一些东西。在这里，在 StackOverflow 和文档中，我发现了几十种实现它的方法（我尝试过的所有东西都可以完成这项工作），但似乎到处有人说这种方式有问题。

我尝试循环`AsyncTask`直到它被取消（即直到活动被杀死），我发现这不是一个好的解决方案。在此之前我尝试了常规`Threads`，然后我发现它会消耗很多电池。

现在我已经使用`Runnable`and 和 ScheduledExecutorService 的`scheduleAtFixedRate`函数完成了它，类似于这里提出的代码： [How to run an async task for every x mins in android?](https://stackoverflow.com/questions/6207362/how-to-run-an-async-task-afor-every-x-mins-in-android) . 不用说，它有效。但是，如果我的活动在后台，例如用户正在接听来电，它会起作用吗？

最后，我不知道在Android手机上最合适的方法是什么。

提前Tnx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:19:29.987

使用`Handler`它有各种方法，如`postDelayed(Runnable r, long delayMillis),postAtTime(Runnable r, Object token, long uptimeMillis)`等。

```
Handler mHandler =  new Handler() {
    public void handleMessage(Message msg) {

      //Start runnable here.
    }
   };

mHandler.sendMessageDelayed(msg, delayMillis) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:23:11.547

如果即使您的应用程序当前未运行，您也需要执行计划任务，建议您使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)和[BroadcastReceivers 。](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

否则，文档建议使用[Handlers](http://developer.android.com/reference/android/os/Handler.html)。

正如 AmitD 问题的评论中所讨论的那样。如果任务需要在后台运行，您可以在处理程序回调中使用 AsyncTask 来实现此目的。

```
final Handler handler = new Handler() {
  public void handlerMessage(Message msg) {
    new AsyncTask<TaskParameterType,Integer,TaskResultType>() {
      protected TaskResultType doInBackground(TaskParameterType... taskParameters) {
        // Perform background task - runs asynchronously
      }
      protected void onProgressUpdate(Integer... progress) {
        // update the UI with progress (in response to call to publishProgress())
        // - runs on UI thread
      }
      protected void onPostExecute(TaskResultType result) {
        // update the UI with completion - runs on UI thread
      }
    }.execute(taskParameterObject);
  }
};
handler.postMessageDelayed(msg, delayMillis); 
```

对于重复执行，文档还提到[ScheduledThreadPoolExecutor](http://developer.android.com/reference/java/util/concurrent/ScheduledThreadPoolExecutor.html)作为一个选项（这似乎优于[java.util.Timer](http://developer.android.com/reference/java/util/Timer.html)，主要是由于额外的灵活性）。

```
final Handler handler = new Handler() {
  public void handlerMessage(Message msg) {
    // update the UI - runs on the UI thread
  }
};
ScheduledThreadPoolExecutor exec = new ScheduledThreadPoolExecutor(1);
ScheduledFuture f = exec.scheduleWithFixedDelay(new Runnable() {
    public void run() {
      // perform background task - runs on a background thread
      handler.sendMessage(msg); // trigger UI update
    }
  }, 0, 10, TimeUnit.SECONDS); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T12:28:52.183

执行重复任务很大程度上取决于任务的艰巨性/处理。UI 是否会阻止您的任务。如果是这样，那么您可以将 AsyncTask 与 Handler 和 TimerTask 结合使用。

在您的活动 onCreate 或任何通用函数中：

```
final Handler handler = new Handler();
    timer = new Timer();
        doAsynchronousTask = new TimerTask() {
           @Override
           public void run() {
            // TODO Auto-generated method stub
            handler.post(new Runnable() {
                 public void run() {
                try {
                 // Instantiate the AsyncTask here and call the execute method

                } catch (Exception e) {
                    e.printStackTrace();
                }

          }
        });
    timer.schedule(doAsynchronousTask,0,UPDATE_FREQUENCY)
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T12:17:25.157

我想我会使用这个`Timer`类：http `TimerTask`: [//developer.android.com/reference/java/util/Timer.html](http://developer.android.com/reference/java/util/Timer.html)

# ruby-on-rails - Rails 根资源 JSON

> ID：12159020
> 
> 赞同：1
> 
> 时间：2012-08-28T12:15:35.757
> 
> 标签：ruby-on-rails, ruby, json, rest, routes

我有点问题。导航到我的网站时，我想`posts`成为默认资源（这是一个博客：）

`www.example.com/ #=> posts#index`

`www.example.com/15 #=> posts#show`

等等。但是，我希望能够打开一个可以在我的投资组合中使用的 API。我可以使用该`respond_to format.json`块来允许这样做：

`www.example.com/15.json`

但我不知道如何将索引操作输出为 json。以下是我目前的路线：

```
resources :posts, :path => '' 
```

如何使用 JSON 扩展访问索引操作？对不起，如果这没有任何意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:45:27.173

您的意思是：如何在浏览器的地址栏中编写一个 url 以获取 JSON 格式的索引？

只需保留您的根索引路径，`posts#index` **但**允许 API 调用`/posts/all.json`（当然，您必须`all`自己编写操作代码） - 您还可以为`api.example.com`API 调用使用额外的子域，并只为它们返回 JSON 格式的输出，[就像 Dailymile](http://www.dailymile.com/api/documentation#entries)正在做的那样。

另外：我认为 API 最好有一个*线索词*，而`/posts/<what I want from posts>`不是空白索引`/`- 旧的，好的说法是*好的函数名是最好的函数文档*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T12:45:58.407

首先，你不需要`:path => ''`零件。为了使帖子索引成为您的根路由，只需执行`root to: "posts#index"`（使用新的哈希语法）。

为了在您的索引操作中呈现一组帖子，只需`respond_to`在您的控制器操作中执行块，如下所示：

```
def index
  @posts = Post.all
  respond_to do |format|
    format.html # render index.html
    format.json { render @posts }
  end
end 
```

为了通过 json 访问这个索引操作，只需`.json`作为格式传递。您还可以在路由中定义默认格式，如下所示：

```
resources :posts, defaults: { format: :json } 
```

# version-control - 依赖注入配置是否应该受版本控制？

> ID：12159029
> 
> 赞同：1
> 
> 时间：2012-08-28T12:15:58.330
> 
> 标签：version-control, dependency-injection

我目前有四个 XML 文件，用于根据我的应用程序运行的环境构建我的依赖注入容器。

*   `base.xml`是我的默认配置，作为以下基础：
    *   `dev.xml`其中包含适用于我们本地 vagrant 开发环境的覆盖
    *   `staging.xml`其中包含适用于测试/陈述环境的覆盖
    *   `production.xml`其中包含生产服务器的覆盖

我不完全确定这些文件是否应该与应用程序代码一起受到版本控制。所有敏感数据都存储在 CVS 忽略的配置文件中，因此泄露敏感数据不是问题。而是我不完全确定在我的应用程序运行的每个环境下都有一个受版本控制的 xml 文件是要走的路。

例如，我们正在考虑将登台和测试服务器拆分为这意味着需要为新服务器创建一个额外的 .xml 配置文件。如果将来我们想在不同的系统（操作系统、Web 服务器、数据库……）上进行测试，这可能意味着我们应该为每个要测试的系统创建一个 .xml 文件。

我只是偏执狂还是在这件事上的普遍共识是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T12:20:25.550

我不明白您为什么不将不同环境的配置文件置于源代码控制之下。我认为将配置文件保存在源代码管理中通常是一种很好的做法，这样您就不会依赖于驻留在某人系统或网络共享驱动器上的文件。另外，如果您需要恢复到旧版本或在突然一切中断时检查某些东西的历史记录，那么拥有源代码控制历史记录是您可靠的朋友。

我认为对这些文件进行源代码控制最符合您的利益，即使它们从未更改过。

# android - ListView 上的 setOnItemClickListener 没有触发

> ID：12159043
> 
> 赞同：3
> 
> 时间：2012-08-28T12:16:47.280
> 
> 标签：android, listview, actionlistener, onclicklistener, onitemclicklistener

我得到了我的 SD 卡的文件列表，并在 listView 中显示它，就像在自定义适配器的帮助下一样：

```
adapter = new ArrayAdapter<Item>(this,
            R.layout.file_manager, R.id.checkedTextItem,
            fileList) 
            {
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // creates view
            LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View view = inflater.inflate(R.layout.check_item, null);

            CheckedTextView textView = (CheckedTextView) view
                    .findViewById(R.id.checkedTextItem);

            // put the image on the text view
            textView.setCompoundDrawablesWithIntrinsicBounds(
                    fileList[position].icon, 0, 0, 0);

            textView.setTextColor(Color.WHITE);
            textView.setText(fileList[position].file);
            if(fileList[position].icon == R.drawable.directory_icon)
                textView.setCheckMarkDrawable(null);

            // add margin between image and text (support various screen
            // densities)
            int dp5 = (int) (5 * getResources().getDisplayMetrics().density + 0.5f);
            textView.setCompoundDrawablePadding(dp5);

            return view;

        }
    }; 
```

我想实现 setonitemclicklistener 或类似的东西来监听检测项目的点击事件。我在 Activity 中的 onCreate() 方法：

```
 public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
     setContentView(R.layout.file_manager);
    lv = (ListView)findViewById(R.id.fileManagerList);
    loadFileList();
    file_list = findViewById(R.id.filesList);
    lv.setAdapter(adapter);

    lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
          public void onItemClick(AdapterView<?> myAdapter, View myView, int myItemInt, long mylng) {
            //String selectedFromList = (lv.getItemAtPosition(myItemInt).toString());
            Toast toast = Toast.makeText(getApplicationContext(), "Hello world!", Toast.LENGTH_LONG);
            toast.show();
          }                 
    });

} 
```

我的活动 xml：

```
 <?xml version="1.0" encoding="UTF-8"?>

 <RelativeLayout

              xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/fileManager"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:orientation="vertical"
               >
    <ListView

        android:background="#000000"
        android:focusable="false"
        android:id="@+id/fileManagerList"
        android:layout_width="fill_parent" 
         android:layout_above="@+id/closecalmlayout"      
        android:layout_height="wrap_content" >
    </ListView>

         <LinearLayout
            android:id="@+id/closecalmlayout"
            android:layout_alignParentBottom="true"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:weightSum="1.0" >

              <Button
                  android:id="@+id/btnOk"
                  android:layout_width="fill_parent"
                  android:layout_height="fill_parent" 
                  android:layout_marginLeft="5dip"
                  android:layout_marginTop="5dip"
                  android:layout_weight=".50"
                  android:text="Attach files"
                  />

              <Button
                  android:id="@+id/btnCancel"
                    android:layout_width="fill_parent"
                  android:layout_height="fill_parent" 
                  android:layout_marginLeft="5dip"
                  android:layout_marginRight="5dip"
                  android:layout_marginTop="5dip"
                  android:layout_weight=".50"
                  android:text="Do not attach"
                   />

            </LinearLayout>
</RelativeLayout> 
```

还有我的 CheckedTextView 活动

```
 <?xml version="1.0" encoding="UTF-8"?>
    <LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp">

      <CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android" 
             android:id="@+id/checkedTextItem" 
             android:layout_width="fill_parent" 
             android:layout_height="wrap_content" 
             android:gravity="center_vertical" 
             android:checkMark="?android:attr/listChoiceIndicatorMultiple"
             android:textColor="#000000"
             android:focusable="false"
             android:paddingLeft="10dip" 
             android:paddingRight="6dip" 
             android:typeface="sans" android:textSize="16dip"/> 

</LinearLayout> 
```

但是当我点击项目时，什么也没有发生。我尝试在 onResume() 方法中设置 setOnItemClickListener，但效果相同。我也试过 onclicklistener - 同样的效果。它的原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T12:24:37.193

在我看来，某些视图正在从您的列表视图中获取焦点，当您知道它是哪个视图时，`android:focusable="false"`在您的 xml 中使用该视图，它应该可以解决问题。

我尝试了您的代码并且正在调用 onItemClicked，这是我的 getView()：

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;
        if(view == null){
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = vi.inflate(R.layout.row, null);
        }

        CheckedTextView textView = (CheckedTextView) view.findViewById(R.id.checked);
        textView.setText("Hello"); //test, you can do whatever you want with this

        int dp5 = (int) (5 * getResources().getDisplayMetrics().density + 0.5f);
        textView.setCompoundDrawablePadding(dp5);

        return view;
    } 
```

我如何设置适配器（MyAdapter）：

```
MyAdapter adapter = new MyAdapter(this, 0, arrayList);
lv.setAdapter(adapter);
lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            // TODO Auto-generated method stub
            Toast.makeText(PlayingAroundActivity.this, "Hello", Toast.LENGTH_LONG).show();
        }                 
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:10:14.483

> 从列表视图中获取所选项目。

```
 lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
          public void onItemClick(AdapterView<?> myAdapter, View myView, int myItemInt, long mylng) {
            //String selectedFromList = (lv.getItemAtPosition(myItemInt).toString());
            Toast toast = Toast.makeText(getApplicationContext(), "Hello world!"+fileList(myItemInt), Toast.LENGTH_LONG);
            toast.show();
          }                 
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-23T07:51:56.483

@Override public boolean areAllItemsEnabled() { return **true** ; //如果使用 ListAdapter 则返回 true }

```
@Override
public boolean isEnabled(int position) {
    return **true**;  //return True  if using ListAdapter
} 
```

# visual-studio-2010 - 您必须在管理员的上下文中运行 Visual Studio

> ID：12159044
> 
> 赞同：2
> 
> 时间：2012-08-28T12:16:47.060
> 
> 标签：visual-studio-2010, iis, windows-7

尽管 Visual Studio 以管理员身份运行，但当我尝试重新加载配置为使用 IIS 的 Web 应用程序时，我不断收到“您必须在管理员的上下文中运行 Visual Studio”。

有什么想法或事情我可以检查吗？

***我自己找到了解决这个问题的方法：***

在调查了 EventLog 之后，我发现我的 VS 安装已损坏。幸运的是我还没有安装 SP1。安装 SP1 修复了我的安装，从而解决了这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T13:04:45.107

首先，试试这个：

1-转到 C:\Program Files (x86)\Common Files\Microsoft shared\MSEnv

2-找到文件VSLauncher.exe

3-右键单击它，选择属性，然后选择兼容性选项卡

4-选中以管理员身份运行此程序的框

如果这不起作用，请卸载 IIS 并重新启动。然后像这样重新安装IIS：

`Start > Control Panel > Programs and Features > Turn Windows features on or off`

取消选择 IIS 下的所有内容。重启。重新安装 IIS（您无需重新启动）。以管理员身份运行 VS 2010。那时应该工作。

# asp.net - Application_BeginRequest() 方法中的依赖项注册

> ID：12159052
> 
> 赞同：3
> 
> 时间：2012-08-28T12:17:01.607
> 
> 标签：asp.net, .net, dependency-injection, unity-container, ioc-container

写下面的代码这样正常吗：

```
protected void Application_BeginRequest()
{
    var container = new UnityContainer()
        .RegisterType<IUnitOfWork, MyEntities>()

    HttpContext.Current.Items["container"] = container;

    ServiceLocator.SetLocatorProvider(
        () => new UnityServiceLocator(container));
}

protected void Application_EndRequest()
{
    var container = HttpContext.Current.Items["container"] 
        as UnityContainer;

    if (container != null)
    {
        container.Dispose();
    }
} 
```

或者为每个请求注册依赖项是一种不好的做法？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T12:36:51.543

> *注意：以下建议适用于所有 IoC 框架，并不特定于 Unity。*

**TLDR**：不要这样做。注册一次容器`Application_Start`并调用`ServiceLocator.SetLocatorProvider`一次。

将依赖项注册为具有“每个请求”或“每个 Web 请求”的生命周期是很好的。然而，为每个 Web 请求创建一个新的容器实例是一种***非常糟糕的***做法。

容器针对解析实例（而不是注册）进行了优化，这通常意味着当第一次（从容器）请求类型时，会在后台进行一些动态代码生成。注册和代码生成和编译过程可能非常耗时，并且在每个 Web 请求上创建一个新的容器实例，将再次触发完整的注册和代码生成过程。这需要时间，生成许多临时对象（要收集更多垃圾），并生成至少在该容器实例的生命周期内必须缓存的新代码。

此外，拥有多个容器实例使得进行其他优化变得困难，例如注册范围比每个 Web 请求更大的实例。在您的情况下，将类型注册为“单例”实际上意味着“每个 Web 请求”，因为该类型在该容器实例的上下文中是单例的。或者即使不考虑性能，为了使某些类型正常工作，您需要比“每个 Web 请求”更长的生命周期（例如每个应用程序域一个实例），这更难配置。

您可能可以这样做，即使每个请求都使用一个容器，但您的代码将更难维护。

容器本身是线程安全的，因此从这个意义上说，每个请求都不需要容器实例。

在您的情况下，情况更糟，因为您的代码中有一个**竞争条件**，一个**并发错误**，因为您更改了`ServiceLocator`每个请求。将`ServiceLocator`注册的委托存储在私有静态字段中，这意味着它可以从所有线程访问。换句话说，您正在通过 Web 请求共享容器实例。在开发过程中您可能不会注意到，因为当时您将有一个 Web 请求，但是当您有代码调用时`ServiceLocator.Current`，它会在生产中失败。以以下非常可能的场景为例，其中请求 1 启动并设置服务定位器。之后，请求 2 启动并使用它自己的容器实例覆盖服务定位器。之后，请求 1 中的代码调用`ServiceLocator.Current`现在返回第二个请求的容器。有时（如果幸运的话）你会得到一个`ObjectDisposedException`. 如果一个线程释放了另一个线程仍在（不正确地）使用的容器，就会发生这种情况。但是，有时会解析属于不同 Web 请求的类型（在多个线程上使用不安全的实例），这显然很糟糕，并会导致各种奇怪和不正确的行为。例如，当您返回 LINQ to SQL`DataContext`或实体框架`ObjectContext`实例时。这些类通常应该根据 Web 请求进行配置，并且[不能由多个线程共享](https://stackoverflow.com/a/5324377/264697)。

# oracle - 使用总和、组和子查询获取上次活动

> ID：12159053
> 
> 赞同：1
> 
> 时间：2012-08-28T12:17:07.057
> 
> 标签：oracle, logic, subquery

任何机构都可以帮助我吗？我想从我的表中查询，目的是显示哪些员工正在销售超过 100 件。我已经完成了那个查询和工作，

**但是当我想显示每个员工**（销售超过 100 件商品）的最后一次销售时，问题就出现了

我有表 TBL_SALES 之类的

```
no   employee_id   name          pieces   sl_time
---|-------------|-------------|--------|----------
1  |     1       | bungdito    | 60     | 2012-03-29 22:20
2  |     1       | bungdito    | 40     | 2012-03-05 18:00
3  |     1       | bungdito    | 50     | 2012-02-18 08:00
4  |     2       | addheat     | 120    | 2012-02-12 09:30
5  |     3       | angga       | 20     | 2012-01-18 10:45
6  |     4       | dimas       | 50     | 2012-01-01 08:30 
```

当我使用这样的查询时

```
select * from 
( 
  select EMPLOYEE_ID, NAME, sum(PIECES) PIECES from 
  ( 
    select EMPLOYEE_ID, NAME, PIECES
    from DB_SCHEMA.TBL_SALES 
  )  
  group by EMPLOYEE_ID, NAME
) where PIECES > 100 
```

我有**这个正确的结果**

```
 employee_id   name          pieces 
-------------|-------------|--------
     1       | bungdito    | 150    
     2       | addheat     | 120 
```

**上面的结果是正确的**，

但**我需要**的是**每个员工最后一次交易时间的完整**

我试过查询**但仍然不正确**

```
select * from 
( 
  select EMPLOYEE_ID, NAME, sum(PIECES) PIECES, SL_TIME

  ( 
    select EMPLOYEE_ID, NAME, PIECES,(select max(WAKTU) SL_TIME from DB_USER.TR_PELANGGARAN where TB_SALES.EMPLOYEE_ID = EMPLOYEE_ID from TB_SALES) SL_TIME
    from DB_SCHEMA.TBL_SALES 
  )  
  group by EMPLOYEE_ID, NAME, SL_TIME
) where PIECES > 100 
```

使用该查询**我仍然有错误的结果**（请参阅 bungdito 和 addheat 之间的 sl_time 相同），例如：

```
 employee_id   name          pieces   sl_time
   -------------|-------------|--------|----------
        1       | bungdito    | 150    | 2012-03-29 22:20
        2       | addheat     | 120    | 2012-03-29 22:20 
```

我需要的是这样的：

```
employee_id   name          pieces   sl_time
-------------|-------------|--------|----------
     1       | bungdito    | 150    | 2012-03-29 22:20
     2       | addheat     | 120    | 2012-02-12 09:30 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:29:52.803

```
select * 
from 
( 
  select EMPLOYEE_ID, NAME, sl_time
        , sum(PIECES)  over(partition by EMPLOYEE_ID)  SUM_PIECES 
        , max(sl_time) over(partition by EMPLOYEE_ID)  last_sl_time
  from       
    DB_SCHEMA.TBL_SALES 
) 
where SUM_PIECES > 100
and    last_sl_time = sl_time
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:35:39.637

试试这个：

```
 select EMPLOYEE_ID, NAME, sum(PIECES) PIECES, MAX(SL_TIME)
  from DB_SCHEMA.TBL_SALES   
  group by EMPLOYEE_ID, NAME
  having sum(PIECES) > 100 
```

# c - 如何在给定程序中打印评论？

> ID：12159055
> 
> 赞同：2
> 
> 时间：2012-08-28T12:17:10.737
> 
> 标签：c

我想将评论打印到要在控制台中打印的给定程序？

是否有任何功能和任何自己的逻辑来打印程序中的评论？

例如

```
 int main()
 {
   /* this is a comment */
 } 
```

上面的程序只有一个评论我想通过某种逻辑或任何功能将此评论打印到控制台，如果在 C 中有的话？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T12:19:40.803

您需要编写一个程序来读取 c 源文件，并识别和打印这些文件中的注释。

```
#include <stdio.h>

void read_until_char (FILE *f, char c) {
   // read file until c is found 
}

void read_until_char_into (FILE *f, char c, char *buf) {
   // read file until c is found
   // also write each char read into buffer 
}

void print_comments(const char *filename) {
  FILE *f = fopen(filename, "r");
  char buffer[2048];
  int c;
  if (f) {
    while (!feof(f)) {
      read_until_char(f, '/');
      c = fgetc(f);
      if (c == '*') {
        while (!feof(f)) { 
          read_until_char_into(f, '*', buffer);
          if ((c=fgetc(f)) == '/') { 
            // print buffer 
            break;
          } else if (c == '*') { 
            // consider what to do if c is *
          }
        }
      } else if (c == '/') {
         read_until_char_into(f, '\n', buffer);
         // print buffer
      }
    }
    fclose(f);
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T12:24:58.483

无法访问其自己的源代码的已编译 C 程序将无法打印注释。注释被 C 预处理器删除，编译器甚至看不到。换句话说，一旦程序可执行，注释文本将不可用。

这就是为什么您的方法必须以某种方式直接处理源代码的原因，您不能在运行时为程序本身执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T14:00:15.547

也许你可以颠倒你的问题。为什么不使用字符串（可以打印）作为注释？评论的重点是

*   他们可以保存非常自由格式的文本。
*   人类可以在查看源代码时阅读它。

字符串文字具有这两个特征。

因此

```
void a_function()
{
    docstring = "This string is a comment. Blah blah.";
    printf("DOC %s", docstring);
} 
```

（Python 有一个[非常相似的约定](http://www.python.org/dev/peps/pep-0257/)，这就是我得到名称“docstring”的地方）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T12:23:00.907

[这](http://amit.chakradeo.net/files/xscc.awk.txt)是一个 awk 脚本，可以从源代码文件中提取注释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T12:28:41.497

Refer to [How can I delete all /* */ comments from a C source file?](https://stackoverflow.com/questions/1714530/how-can-i-delete-all-comments-from-a-c-source-file) and then make a diff between the generated file and the original file.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T14:14:44.703

我对这个问题很困惑，如果你想打印每条评论，为什么不直接使用字符串而不是评论呢？或两者？为什么需要打印程序的注释？只是想知道，因为我不确定你在这里想要做什么，也许有更好的方法来实现你想要做的事情。

不`printf("/*foo*/");`工作还是什么？或者你是想让这个自动化吗？

如果是后者，那么您将需要让您的程序解析您的源文件并搜索注释（除非有其他更简单的神奇方法）。

我建议您只是逐个字符地读取 C 文件，直到遇到 a`/*`并开始用每个字符填充一个数组，直到下一次出现`*/`.

如果由于某种原因您遇到的问题是前者，并且由于某种原因您不能使用`printf`我编写的用于制作评论字符串的函数打印评论（非常没有意义，因为我 99% 确定您可以使用`printf("/*foo*/")`.

```
int printcomment(const char *comment)
{
    char *commentln, open[] = "/*", close[] = "*/";
    if(!(commentln = malloc(strlen(comment) + 5))) return 0;
    strcat(commentln, open);
    strcat(commentln, comment);
    strcat(commentln, close);
    printf("%s", commentln);
    free(commentln);
    return 1;
} 
```

祝你好运。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-28T12:42:54.727

这是一种程序，称为`Quine`

C 示例：

```
main(){char *c="main(){char *c=%c%s%c;printf(c,34,c,34);}";printf(c,3
4,c,34);} 
```

[http://en.wikipedia.org/wiki/Quine_(计算)](http://en.wikipedia.org/wiki/Quine_%28computing%29)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-20T07:56:31.477

此代码可以处理单行注释。

```
 while((scanf("%c",&s[i]))!=EOF)
        {
            b[i]=s[i];
           if(s[i]=='\n')
            {
                for(j=k; j<=i; j++)
                {
                    if(s[j]=='/')
                    {
                        if(s[j+1]=='/')
                        {
                            temp=1;

                        }
                        else if(s[j+1]=='*')
                        {
                            for(j=j+2; j<=i; j++)
                            {
                                if(s[j]=='*')
                                {
                                    if(s[j+1]=='/')
                                    {
                                        temp=1;
                                    }
                                }
                            }
                        }
                        printf("%c",s[j]);
                        k=j;
                    }
                }
                printf("===");
                if(temp==1)
                {

                    printf("This Line has been commented :( \n");
                    temp=0;
                }
                else
                {
                    printf("this line is  code :) \n");
                }
            }

            i++;

        }
        return 0;
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-09T17:00:29.110

这是一个提取单行和多行注释的 Java 版本（未彻底测试）。

```
public void showComments(String fileName) {
    StringBuffer sb = new StringBuffer();
    FileReader br = null;
    try {
        br = new FileReader(fileName);

        int ch = -1;
        boolean singleLineComment = false;
        boolean multiLineComment = false;
        char prev = (char)ch;
        while ((ch = br.read()) != -1) {
            if (ch == '/' && prev == ch && !singleLineComment) {
                singleLineComment = true;
            } else if (ch == '*' && prev == '/' && !multiLineComment) {
                multiLineComment = true;
            } else if (ch == '\n' && singleLineComment) {
                System.out.println(sb.toString());
                singleLineComment = false;
                sb = new StringBuffer();
            } else if (ch == '/' && prev == '*' && multiLineComment) {
                System.out.println(sb.toString());
                multiLineComment = false;
                sb = new StringBuffer();
            } else if (multiLineComment || singleLineComment) {
                sb.append((char)ch);
            }
            prev = (char)ch;
        }

    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-03-20T09:19:49.747

试试这个代码！

**代码 ：**

```
#include <stdio.h>
int main()
{

   char comment[25] ="/* this is a comment */";
   printf("%s",comment);
    return 0;
} 
```

**输出 ：**

/* 这是一条评论 */

# java - Spring LDAP 示例

> ID：12159056
> 
> 赞同：1
> 
> 时间：2012-08-28T12:17:16.043
> 
> 标签：java, spring, grails, spring-security

我正在使用一个使用 springs 的 java web 应用程序。在登录到我的应用程序之前，我需要对用户进行身份验证。我需要使用 LDAP。我用谷歌搜索了它，但没有得到合适的样本。因为我是 Java 新手，所以无法完成完整的 1 个代码周期。下面是我得到的示例配置文件。但是在哪里使用它以及如何使用它？我从名为 ADExplorer 的软件中获得了我的 ADS 详细信息。任何人都可以指导我如何做到这一点的持续流程吗？

```
// LDAP config
grails.plugins.springsecurity.ldap.context.managerDn = '10010101'
grails.plugins.springsecurity.ldap.context.managerPassword ='Temppass@123'
grails.plugins.springsecurity.ldap.context.server = 'ldap://DOMAIN.com:3268/'
grails.plugins.springsecurity.ldap.authorities.ignorePartialResultException = true // typically needed for Active Directory
grails.plugins.springsecurity.ldap.search.base = 'DC=DOMAIN,DC=com'
grails.plugins.springsecurity.ldap.search.filter="sAMAccountName={0}" // for Active Directory you need this
grails.plugins.springsecurity.ldap.search.searchSubtree = true
grails.plugins.springsecurity.ldap.auth.hideUserNotFoundExceptions = false
grails.plugins.springsecurity.ldap.search.attributesToReturn = ['mail', 'displayName','employeeID'] // extra attributes you want returned; see below for custom classes that access this data
grails.plugins.springsecurity.providerNames = ['ldapAuthProvider', 'anonymousAuthenticationProvider'] // specify this when you want to skip attempting to load from db and only use LDAP

// role-specific LDAP config grails.plugins.springsecurity.ldap.useRememberMe = false 
grails.plugins.springsecurity.ldap.authorities.retrieveGroupRoles = false

grails.plugin.quartz2.autoStartup = true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:27:16.100

看起来你正在使用 grails，你可以使用[ldap 插件](http://www.grails.org/LDAP+Plugin)

# google-app-engine - Google 应用引擎网站的多个域 - 每个域的分析

> ID：12159060
> 
> 赞同：0
> 
> 时间：2012-08-28T12:17:36.670
> 
> 标签：google-app-engine, dns, google-analytics

Ok, so basically I am testing out a new marketing idea for the company I work for, buying 10 or so domains with key search words relating to the business (e.g carservice.com carmot.com hondaservice.com) and linking them all to one site, hosted on google app engine. I have got this bit to work but I now want to get google analytics to show how many people clicked on each domain so I know if its worth renewing. If no one visits it, its not worth paying for. Is there a way I can send each domain to a different page hosted on the same app engine account? that way I could send it to a page which has a analytic code unique to the domain and then redirect it to the main site.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T03:16:09.487

假设您正在动态生成页面，您可以检查域的请求 URL 并在页面中插入适当的 Google Analytics 令牌，然后再提供它。

# java - JScrollPane 滚动问题

> ID：12159069
> 
> 赞同：-1
> 
> 时间：2012-08-28T12:18:10.487
> 
> 标签：java, swing, layout, jscrollpane

我创建了一个具有`JScrollPane`. 但是，`JScrollPane`似乎没有做应该做的事情。尽管组件的大小比`JScrollPane`.

从我的程序中生成一个 SSCCE 会让人头疼，所以我只会给你整个程序，并带有重要位置的注释标记。（重要和重要结束）评论中的任何内容都不应影响问题。

启动程序时，单击对话框中的文件>新建，然后单击确定。这将绘制有问题的 GUI。

PS这里只有高度很重要，宽度方面一切正常。

```
package core;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Locale;
import java.util.Properties;
import java.util.ResourceBundle;

import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.ButtonGroup;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JScrollPane;
import javax.swing.KeyStroke;

//IMPORTANT!
@SuppressWarnings("serial")
class Page extends JPanel
{
public int content;

public Page(JPanel panel, int index)
{
    setMaximumSize(new Dimension(794, 1123));
    setAlignmentX(Component.CENTER_ALIGNMENT);
    setBackground(Color.WHITE);

    panel.add(this, index);

    content = 0;
}
}
/END OF IMPORTANT!

public class Main
{

public static Properties config;
public static Locale currentLocale;
public static ResourceBundle lang;

public static JFrame mWindow;

public static JMenuBar menu;
public static JMenu menuFile, menuEdit;
public static JMenuItem itmNew, itmClose, itmLoad, itmSave, itmSaveAs, itmExit, itmCut, itmCopy, itmPaste, itmProperties; 

public static JDialog newDoc;
public static JLabel newDocText1, newDocText2;
public static JRadioButton questions, list;
public static ButtonGroup newDocButtons;
public static JButton newDocOk;
public static Boolean firstSegment;

public static JPanel workspace;
public static JScrollPane scroll;
public static ArrayList<Page> pages;

//IGNORE WHOLE METHOD, HAS NOTHING TO DO WITH THE PROBLEM
public static void newDocumentForm()
{
    //new document dialog
    mWindow.setEnabled(false);

    newDoc = new JDialog(mWindow, lang.getString("newDoc"));
    newDoc.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
    newDoc.addWindowListener(new WindowListener ()
    {
        public void windowActivated(WindowEvent arg0) {}
        public void windowClosing(WindowEvent arg0)
        {
            mWindow.toFront();

            newDocText1 = null;
            newDocText2 = null;
            questions = null;
            list = null;
            newDocButtons = null;
            newDocOk = null;
            newDoc.dispose();

            mWindow.setEnabled(true);               
        }

        public void windowClosed(WindowEvent arg0) {}
        public void windowDeactivated(WindowEvent arg0) {}
        public void windowDeiconified(WindowEvent arg0) {}
        public void windowIconified(WindowEvent arg0) {}
        public void windowOpened(WindowEvent arg0) {}   
    });

    newDoc.setSize(400, 200);
    newDoc.setLocationRelativeTo(null);
    newDoc.setResizable(false);
    newDoc.setLayout(null);
    newDoc.setVisible(true);

    newDocText1 = new JLabel(lang.getString("newDocText1"));
    newDocText1.setBounds(5, 0, 400, 20);

    newDocText2 = new JLabel(lang.getString("newDocText2"));
    newDocText2.setBounds(5, 20, 400, 20);

    newDoc.add(newDocText1);
    newDoc.add(newDocText2);

    firstSegment = true;

    questions = new JRadioButton(lang.getString("questions"));
    questions.setSelected(true);
    questions.setFocusPainted(false);
    questions.setBounds(10, 60, 400, 20);
    questions.addActionListener(new ActionListener()
    {
        public void actionPerformed(ActionEvent arg0)
        {
            firstSegment = true;
        }
    });

    list = new JRadioButton(lang.getString("list"));
    list.setFocusPainted(false);
    list.setBounds(10, 80, 400, 20);
    list.addActionListener(new ActionListener()
    {
        public void actionPerformed(ActionEvent arg0)
        {
            firstSegment = false;
        }
    });

    newDoc.add(questions);
    newDoc.add(list);

    newDocButtons = new ButtonGroup();
    newDocButtons.add(questions);
    newDocButtons.add(list);

    newDocOk = new JButton(lang.getString("ok"));
    newDocOk.addKeyListener(new KeyListener()
    {
        public void keyPressed(KeyEvent e)
        {
            if (e.getKeyCode() == KeyEvent.VK_ENTER)
            {
                newDocOk.doClick();
            }
        }

        public void keyReleased(KeyEvent e) {}
        public void keyTyped(KeyEvent e) {}
    });

    newDocOk.setFocusPainted(false);
    newDocOk.setBounds(160, 120, 80, 40);
    newDocOk.setMnemonic(KeyEvent.VK_ACCEPT);
    newDocOk.addActionListener(new ActionListener()
    {
        public void actionPerformed(ActionEvent arg0)
        {
            createNewDocument();
        }
    });

    newDoc.add(newDocOk);
    newDocOk.requestFocus();
}

public static void createNewDocument()
{
    //dispose of new document dialog
    mWindow.toFront();

    newDocText1 = null;
    newDocText2 = null;
    questions = null;
    list = null;
    newDocButtons = null;
    newDocOk = null;
    newDoc.dispose();

    mWindow.setEnabled(true);

            //IMPORTANT!
    //create document display               
    workspace = new JPanel();
    workspace.setLayout(new BoxLayout(workspace, BoxLayout.PAGE_AXIS));
    workspace.add(new Box.Filler(new Dimension(0, 40), new Dimension(0, 40), new Dimension(0, 40)));
    workspace.setBackground(Color.BLACK);

    scroll = new JScrollPane(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
    scroll.getVerticalScrollBar().setUnitIncrement(20);
    scroll.setViewportView(workspace);

    pages = new ArrayList<Page>();

    @SuppressWarnings("unused")
    Page p = new Page(workspace, 1);

    mWindow.add(scroll, BorderLayout.CENTER);
    mWindow.repaint();
    mWindow.validate();
}
    //END OF IMPORTANT

public static void main(String[] args) throws FileNotFoundException, IOException
{   
    //load properties
    config = new Properties();
    config.load(new FileInputStream("src\\config.properties"));

    //load language
    currentLocale = new Locale(config.getProperty("language"), config.getProperty("country"));
    lang = ResourceBundle.getBundle("language", currentLocale);

            //IMPORTANT!
    //create main window
    mWindow = new JFrame(lang.getString("title"));
    mWindow.setSize(1000, 800);
    mWindow.setMinimumSize(new Dimension(1000, 800));
    mWindow.setLocationRelativeTo(null);
    mWindow.setLayout(new BorderLayout());
    mWindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    mWindow.setVisible(true);
            //END OF IMPORTANT

    //create menu bar
    menu = new JMenuBar();

    menuFile = new JMenu(lang.getString("file"));
    menuEdit = new JMenu(lang.getString("edit"));

    itmNew = new JMenuItem(lang.getString("new"));
    itmNew.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_N, ActionEvent.CTRL_MASK));
    itmNew.addActionListener(new ActionListener()
    {
        public void actionPerformed(ActionEvent e)
        {
            newDocumentForm();
        }
    });

    itmClose = new JMenuItem(lang.getString("close"));
    itmClose.setActionCommand("Close");
    itmClose.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_W, ActionEvent.CTRL_MASK));

    itmLoad = new JMenuItem(lang.getString("load"));
    itmLoad.setActionCommand("Load");
    itmLoad.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_L, ActionEvent.CTRL_MASK));

    itmSave = new JMenuItem(lang.getString("save"));
    itmSave.setActionCommand("Save");
    itmSave.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_S, ActionEvent.CTRL_MASK));

    itmSaveAs = new JMenuItem(lang.getString("saveAs"));
    itmSaveAs.setActionCommand("SaveAs");
    itmExit = new JMenuItem(lang.getString("exit"));
    itmExit.addActionListener(new ActionListener()
    {
        public void actionPerformed(ActionEvent e)
        {
            //Add confirmation window!
            System.exit(0);
        }
    });

    itmCut = new JMenuItem(lang.getString("cut"));
    itmCut.setActionCommand("Cut");
    itmCut.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_X, ActionEvent.CTRL_MASK));

    itmCopy = new JMenuItem(lang.getString("copy"));
    itmCopy.setActionCommand("Copy");
    itmCopy.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_C, ActionEvent.CTRL_MASK));

    itmPaste = new JMenuItem(lang.getString("paste"));
    itmPaste.setActionCommand("Paste");
    itmPaste.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_V, ActionEvent.CTRL_MASK));

    itmProperties = new JMenuItem(lang.getString("properties"));
    itmProperties.setActionCommand("properties");
    itmProperties.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_P, ActionEvent.CTRL_MASK));

    menuFile.add(itmNew);
    menuFile.add(itmClose);
    menuFile.addSeparator();
    menuFile.add(itmLoad);
    menuFile.addSeparator();
    menuFile.add(itmSave);
    menuFile.add(itmSaveAs);
    menuFile.addSeparator();
    menuFile.add(itmExit);

    menuEdit.add(itmCut);
    menuEdit.add(itmCopy);
    menuEdit.add(itmPaste);
    menuEdit.addSeparator();
    menuEdit.add(itmProperties);

    menu.add(menuFile);
    menu.add(menuEdit);

    //create actionListener for menus

    mWindow.add(menu, BorderLayout.NORTH);

    mWindow.repaint();
    mWindow.validate();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:32:36.067

`JScollPane`您在检查[首选尺寸](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)时设置视口面板的最大尺寸。

```
setPreferredSize(new Dimension(794, 1123)); 
```

# javascript - 检查日期是否是周末 javascript

> ID：12159070
> 
> 赞同：0
> 
> 时间：2012-08-28T12:18:16.670
> 
> 标签：javascript, date, weekend

> **可能重复：**
> [如何在javascript中确定日期是否为周末](https://stackoverflow.com/questions/3551795/how-to-determine-if-date-is-weekend-in-javascript)

如果日期是否是周末，我正在尝试为 checkinf onload 做一些事情，我写了这段代码。

```
<script type="text/javascript">
function getdate()
{
    var items = new Array();
    var itemCount = document.getElementsByClassName("date");

    for(var i = 0; i < itemCount.length; i++)
    {
        items[i] = document.getElementById("date" + (i+1)).value;
    }

    return items;
}
</script> 
```

该脚本将在加载时执行，但我不知道如何检查日期是否是周末我想做的是如果日期是星期六或星期日将其更改为星期一。

我已经使用 php 做一个数组并更改它，但使用 php 不适合此操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T12:24:23.057

简单地;

```
 var yourDate = new Date('2012-08-26');
            if(yourDate.getDay() === 6){
               //saturday
            }
          if(yourDate.getDay() === 0){ 
              //sunday
            }

   // if date is in 28-08-2012 format
     var date = '26-08-2012';
     yourDate = new Date(date.split('-')[2],date.split('-')[1],date.split('-')[0]);
         if(yourDate.getDay() === 6){
               //saturday
            }
          if(yourDate.getDay() === 0){ 
              //sunday
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T12:22:59.573

解析日期，然后使用[`getDay()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getDay)：

```
for (var i = 0; i < itemCount.length; i++) {
    items[i] = document.getElementById("date" + (i+1)).value;
    var itemDtParts = item[i].split("-");
    var itemDt = new Date(itemDtParts[2], itemDtParts[1] - 1, itemDtParts[0]);
    if (itemDt.getDay() == 6 || itemDt.getDay() == 0) {
      // weekend
    }
} 
```

# windows-phone-7 - 带参数的 WP7 导航

> ID：12159071
> 
> 赞同：0
> 
> 时间：2012-08-28T12:18:18.383
> 
> 标签：windows-phone-7

我有 3 页 P1、P2 和 P3 的应用程序。

当应用程序从 P2 导航到 P1 时，它会传递一个参数。

在 P1 上，我得到了参数值，并显示了一个消息框。

这是完美的工作，以下情况是问题：

P2 -> P1，应用程序显示消息，P1->P3，P3->P1 使用后退按钮，应用程序再次使用 P2 的参数值显示消息，但不应显示任何消息。

这是P1的代码：

```
 protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);
        String payment = "";
        if (NavigationContext.QueryString.TryGetValue("payment", out payment)) {

            if (payment == "no")
            {
                MessageBox.Show("Your payment failed!.",
               "Error", MessageBoxButton.OK);
            }
        }
    } 
```

这是 P2 的代码：

```
NavigationService.Navigate(new Uri("/MainPage.xaml?payment=no", UriKind.Relative)); 
```

P3 不传递任何参数

为什么应用程序在从 P3 导航到 P1 时显示消息有什么问题？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:35:25.273

您可以尝试在第一次使用 NavigationContext 后删除键/值对

```
if (NavigationContext.QueryString.TryGetValue("payment", out payment)) {
    if (payment == "no")
        {
            MessageBox.Show("Your payment failed!.",
           "Error", MessageBoxButton.OK);
        }
        NavigationContext.QueryString.Remove("payment");
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:27:29.970

Override the `OnNavigatedTo` event on your P1 and check if the back button was used like this:

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)  
{  
    base.OnNavigatedTo(e);  

    //if the page transition is occurred by pressing back button.  
    if (e.NavigationMode == System.Windows.Navigation.NavigationMode.Back)  
    {  
        //do or do not do something  
    }  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:55:51.557

试试这个，我希望它有效。

```
String _oldUrl;
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
     String url = e.Uri.OriginalString;
     if(url!=_oldUrl)
     {
          //do work here

          _oldUrl = url;
     }
} 
```

# javascript - 防止用户在字段中粘贴

> ID：12159072
> 
> 赞同：0
> 
> 时间：2012-08-28T12:18:18.803
> 
> 标签：javascript

我想阻止用户将任何内容粘贴到我的输入字段中。

这是我尝试过的：

```
onpaste="event.returnValue=false;" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:24:50.750

```
<input type="text" onPaste="return false;"> 
```

# wpf - 在 DataTemplate DataType 中使用命名空间

> ID：12159076
> 
> 赞同：3
> 
> 时间：2012-08-28T12:18:40.023
> 
> 标签：wpf, xaml, data-binding, namespaces, datatemplate

我正在尝试使用 ListBox 和 ItemsSource 属性显示来自 YouTube 的视频列表。

我现在所拥有的工作（下），但现在我需要格式化我的数据。

```
<ListBox Name="lbVideos" ItemsSource="{Binding Source={StaticResource listOfVideos}}"/> 
```

为此，我使用的是 DataTemplate，但问题是类型是 Google.YouTube.Video。

```
<Application x:Class="YouTube_Notifier.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Startup="AppStartup"
    xmlns:src="clr-namespace:YouTube_Notifier" 
    xmlns:System="clr-namespace:System;assembly=mscorlib">
    <Application.Resources>
        <DataTemplate DataType="{x:Type src:Google:YouTube:Video}">
        </DataTemplate>
    </Application.Resources>
</Application> 
```

上面的代码导致我收到错误“找不到类型'src：Google.YouTube.Video'。”

我要问的是如何在 DataTemplate 中使用命名空间？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T12:23:05.257

包含您的类型的命名空间需要已经映射到您的`xmlns`属性中，即

```
xmlns:src="clr-namespace:YouTube_Notifier.Google.YouTube" 
```

```
{x:Type src:Video} 
```

另请参阅[命名空间映射参考](http://msdn.microsoft.com/en-us/library/ms747086.aspx)和...的[参考`x:Type`](http://msdn.microsoft.com/en-us/library/ms753322.aspx)

# android - 异步任务不工作

> ID：12159077
> 
> 赞同：0
> 
> 时间：2012-08-28T12:18:40.743
> 
> 标签：android, class, android-activity, android-asynctask

我有启动活动，应该从 url 下载数据并解析它并将其传递给主要活动，在下载时我创建了带有徽标的布局和在 webview 中加载的旋转 gif，但是当我启动应用程序时什么也没发生，它不会启动主要活动这里是代码

```
public class Init extends Activity {

static final String DEFAULT_URL = "http://api.androidhive.info/music/music.xml";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.init);

    WebView loader = (WebView) findViewById(R.id.loader);
    loader.loadUrl("file:///android_asset/index.html");

    new LoadingTask().execute(DEFAULT_URL);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public class LoadingTask extends AsyncTask<String, String, String>{
    XMLParser parser = new XMLParser();
    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub
        String URL = params[0];
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
         // getting DOM element
        return xml;
    }

    protected void onPostExecute(String result){
        Intent startApp = new Intent("com.example.androidhive.HOME");
        startApp.putExtra("xmlstring", result);
        //finish();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:21:55.900

添加

```
startactivity(startApp); 
```

在 post 执行以进行下一个活动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:22:37.163

你错过了线路，

```
startactivity(startApp); 
```

就像是，

```
Intent startApp = new Intent("com.example.androidhive.HOME");
startApp.putExtra("xmlstring", result);
startactivity(startApp); 
```

# ruby-on-rails - Heroku/rails：发送大量邮件时出现错误 302

> ID：12159078
> 
> 赞同：1
> 
> 时间：2012-08-28T12:18:40.357
> 
> 标签：ruby-on-rails, email, heroku, timeout

我有一封发送邮件给每个用户发送一封电子邮件的所有用户。

该功能有效，但我在网络应用程序上收到一条丑陋的错误消息。在我得到的日志上

```
2012-08-28T12:08:03+00:00 heroku[router]: Error H12 (Request timeout) -> POST afternoon-spring-6294.herokuapp.com/welcome/wall dyno=web.1 queue= wait= service=30000ms status=503 bytes=0
[...]
Sent mail to xxxx@xxxxx.xxxx (1708ms)
2012-08-28T12:08:31+00:00 app[web.1]: Redirected to http://afternoon-spring-6294.herokuapp.com/
2012-08-28T12:08:31+00:00 app[web.1]: Completed 302 Found in 58114ms (ActiveRecord: 8.9ms) 
```

是否有解决方法（仅由 33 封电子邮件触发）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:48:54.107

Heroku [reaps all process that run longer than 30s](https://devcenter.heroku.com/articles/request-timeout), which means almost any batch email through something like mailgun or sendgrid will get killed with the H12 error.

There's a couple of basic ways to handle, but all involve making things more asynchronous. Heroku [worker processes](https://devcenter.heroku.com/articles/scheduler) can run indefinitely -- or at least FAR longer than 30s.

The traditional option is to use a [queue](https://devcenter.heroku.com/articles/background-jobs-queueing) -- [delayed_job](https://devcenter.heroku.com/articles/delayed-job) is dead simple and only needs a database to back it. Resque is also cool but requires Redis to be added to the mix. There are also MANY more sophisticated options but delayed_job is dead simple. Railscasts is probably your friend here to figure out how to do it.

Another option is to use a worker process to handle the email tasks directly. For example, you can use a worker to send email in batches every X minutes using a rake task. This is sort of queue without all the overhead. Let's say you need to send a batch of invitations, you write invitations with an unsent status to a table, then have a rake task pop the first one off and send it, repeat until done. You'd be basically reimplementing a simple queue but might feel more comfortable.

Personally I'd put in delayed_job until I needed something more powerful.

# triggers - 当触发器仍在运行时如何忽略触发器

> ID：12159082
> 
> 赞同：0
> 
> 时间：2012-08-28T12:18:50.097
> 
> 标签：triggers, sql-server-2008-r2

**问题：**

我想在插入表时编写触发器，我必须进行检查并向特定用户发送电子邮件。为此，我正在考虑使用将一些值插入另一个**QUEUE 表**的触发器。**然后QUEUE 表**中的触发器将获取前 x 个电子邮件并发送它们并循环直到所有记录完成。因此，一旦调用了触发器，就可以在触发器工作时插入**QUEUE 表**。因此，触发器将等待并且每次插入到 QUEUE 表中并且在当前运行的触发器完成之后。

**问题：**

是我的做法是正确的。如果有更好的方法可以有人帮助我。如果触发器一次又一次地触发，这是否是设计问题。有没有办法在触发器运行时忽略触发器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:26:13.207

我在这里可以建议的是，

1.在主表上创建一个触发器，当新记录插入主表时，将记录插入另一个表（QUEUE表）。

2.现在创建一个存储过程，它将从队列表中选择前 X 行并发送电子邮件。

3.现在创建一个sql作业，它将定期执行上面创建的sproc。

4.在 sproc 中，您可以在发送电子邮件后进行处理，您可以从 QUEUE 表中删除这些记录，也可以对它们进行处理。

# selenium - Css 路径很奇怪并且无法正常工作

> ID：12159088
> 
> 赞同：0
> 
> 时间：2012-08-28T12:19:11.270
> 
> 标签：selenium, webdriver, selenium-webdriver, selenium-ide

我正在尝试自动单击“tweet”按钮，该按钮是 iframe 元素的一部分。

我尝试使用 css 路径、xpath，但它们不工作。

css 路径就像 html.regular body.hcount div#widget div.btn-o a#b.btn span#l.label

我也试过xpath，但它不工作。

Selenium ide 为其提供“1”值，webdriver 无法使用。

请提出一些方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:21:28.123

您需要切换到 iframe 元素

```
driver.switchTo().frame(driver.findElement(By.id("frameId")));
//do your stuff
driver.switchTo().defaultContent(); 
```

如果这不是问题，请提供更多信息。

# java - 使用 Hibernate + RMI “没有会话或会话已关闭”

> ID：12159091
> 
> 赞同：0
> 
> 时间：2012-08-28T12:19:16.967
> 
> 标签：java, hibernate, session, rmi, visual-paradigm

我正在使用我需要使用的 Visual Paradigm 开发一个 Java 项目。Visual Paradigm 正在使用 Hibernate。在我添加 Genady RMI 之前，我的项目运行良好。我还需要使用 RMI。

在服务器端，我有 MainDb，它管理对数据库的所有查询，在客户端，我有实现 RMI Remote 的 UserWindow 和 AdminWindow 类。这两个类通过RMI获取对象MainDb。

当我运行服务器和客户端时，我遇到了与延迟初始化相关的异常，错误为“没有会话或会话已关闭”：

```
failed to lazily initialize a collection of role: dcl.UsuarioRegistrado.ORM_TieneVideosFavoritos, no session or session was closed. 
```

据我所知，Hibernate 使用的是不同的会话，从该会话中创建了 dcl.UsuarioRegistrado 对象。问题是我没有管理会话，因为 PersistentManager 类只提供 getSession()。PersistentManager 类是 VisualParadigm 提供的用于管理 Hibernate 的类。

我尝试将所有实体配置为lazy="false"，但结果更糟，因为某些实体的属性未正确加载。例如，一个对象“Topic”被加载，字符串属性“TopicName”为空。

那么，我能做些什么来保持相同的会话呢？

在此先感谢，我很抱歉，但我的英语很差。我很难用英语解释这种情况，所以再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:34:06.217

这是一个常见的问题。当您在实体中有一个集合时，Hibernate 将在实例中注入一个“Hibernate-aware”集合。因此，您得到的不是列表，而是记住当前会话的内容（“当前”=加载实体的会话）。

原因是 session == 数据库事务。如果 Hibernate 将使用新会话加载相关实体，那么您可能会看到新行、更新行，或者您可能会收到错误，因为行已被删除，而这些行在您加载父实体时仍然存在。这将是一团糟。

为了确保不会发生这种情况，Hibernate 将使用原始会话来加载所有相关实体。但是代码的工作方式通常不同。一方面，您加载实体。会话已关闭。然后，在一个完全不相关的部分中，您尝试加载子项 -> 错误。

有三种解决方案：

1.  禁用延迟加载。这通常不起作用（加载太多，太慢）。但它不应该导致错误；您的代码中可能潜伏着一个错误。

2.  加载实体时，从每个集合中获取第一个实体。这将正确初始化集合。这里的好处是您可以在代码中决定何时加载相关实例以及何时使用依赖 Hibernate 进行延迟加载。

    您也可以只加载您需要的那些关系；所以这通常可以解决上一点的问题。*缺点是您需要提前*知道其他代码将如何使用您的实体。这通常很难，甚至是不可能的。

3.  [您可以使用Session.refresh()](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#refresh%28java.lang.Object%29)创建一个新会话并将现有对象“附加”到此新会话。请注意，您需要在这里小心；如果你混合刷新和旧对象，你会得到错误。

# out-of-memory - Documentum 内存不足错误

> ID：12159094
> 
> 赞同：1
> 
> 时间：2012-08-28T12:19:21.450
> 
> 标签：out-of-memory, documentum

我的工作场所 documentum java 方法服务器最近遇到了内存不足的问题。

环顾互联网，有人认为这是一个已知问题，引用如下：“它是与 CompleteHTTPMessageTimeout 相关的 WLS 7.0 SP7（CR300032 和 CR196369）的一个已知问题。WebLogic Server 在响应慢速客户端时间歇性关闭连接。如果您有支持合同，您可以打开服务请求并获取 CR 的补丁和详细信息”

我在下面附上了一段日志：

由于堆栈溢出的空间限制，这只是整个日志的一部分

```
####<24/08/2012 10:10:34 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[ACTIVE] ExecuteThread: '36' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767034921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:34 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[ACTIVE] ExecuteThread: '36' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767034921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:34 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[ACTIVE] ExecuteThread: '36' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767034921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:34 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[ACTIVE] ExecuteThread: '36' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767034921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:34 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[ACTIVE] ExecuteThread: '36' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767034921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:34 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[ACTIVE] ExecuteThread: '36' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767034921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:34 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[ACTIVE] ExecuteThread: '36' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767034921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:40 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[ACTIVE] ExecuteThread: '42' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767040921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:40 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[ACTIVE] ExecuteThread: '42' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767040921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:40 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[ACTIVE] ExecuteThread: '42' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767040921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:40 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[ACTIVE] ExecuteThread: '42' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767040921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:40 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[ACTIVE] ExecuteThread: '42' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767040921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:40 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[ACTIVE] ExecuteThread: '42' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767040921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:40 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[ACTIVE] ExecuteThread: '42' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767040921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:40 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[ACTIVE] ExecuteThread: '42' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767040921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:46 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[STANDBY] ExecuteThread: '123' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767046921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:46 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[STANDBY] ExecuteThread: '123' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767046921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:46 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[STANDBY] ExecuteThread: '123' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767046921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:46 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[STANDBY] ExecuteThread: '123' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767046921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:46 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[STANDBY] ExecuteThread: '123' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767046921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:46 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[STANDBY] ExecuteThread: '123' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767046921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:46 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[STANDBY] ExecuteThread: '123' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767046921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:46 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[STANDBY] ExecuteThread: '123' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767046921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:46 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[STANDBY] ExecuteThread: '123' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767046921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:46 AM EST> <Info> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[STANDBY] ExecuteThread: '123' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767046921> <BEA-101366> <The server could not send the HTTP message during the configured timeout value. The socket has been closed.> 
####<24/08/2012 10:10:51 AM EST> <Critical> <WorkManager> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <weblogic.timers.TimerThread> <<WLS Kernel>> <> <> <1345767051421> <BEA-002911> <WorkManager weblogic.kernel.System failed to schedule a request due to java.lang.OutOfMemoryError: unable to create new native thread
java.lang.OutOfMemoryError: unable to create new native thread
    at java.lang.Thread.start0(Native Method)
    at java.lang.Thread.start(Thread.java:574)
    at weblogic.work.RequestManager.createThreadAndExecute(RequestManager.java:271)
    at weblogic.work.RequestManager.executeIt(RequestManager.java:245)
    at weblogic.work.ServerWorkManagerImpl.schedule(ServerWorkManagerImpl.java:142)
    at weblogic.timers.internal.TimerManagerImpl.execute(TimerManagerImpl.java:631)
    at weblogic.timers.internal.TimerThread$Thread.run(TimerThread.java:270)
> 
####<24/08/2012 10:15:33 AM EST> <Info> <Server> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[STANDBY] ExecuteThread: '125' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345767333437> <BEA-002634> <The server "adminServer" disconnected from this server.> 
####<24/08/2012 10:42:56 AM EST> <Error> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[ACTIVE] ExecuteThread: '108' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345768976609> <BEA-101017> <[weblogic.servlet.internal.WebAppServletContext@af2a50 - appName: 'acs', name: '/ACS', context-path: '/ACS'] Root cause of ServletException.
java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:168)
    at weblogic.servlet.internal.PostInputStream.read(PostInputStream.java:138)
    at weblogic.servlet.internal.ServletInputStreamImpl.read(ServletInputStreamImpl.java:199)
    at com.documentum.acs.sdi.ACS.getPostUrlQuery(ACS.java:246)
    at com.documentum.acs.sdi.ACS.doPost(ACS.java:72)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:763)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:225)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:127)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:283)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:175)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3214)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:1983)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:1890)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1344)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:181)
> 
####<24/08/2012 10:42:56 AM EST> <Error> <HTTP> <b1knoxp0028> <DctmServer_MethodServer_B1KNOXP0028> <[ACTIVE] ExecuteThread: '67' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345768976640> <BEA-101017> <[weblogic.servlet.internal.WebAppServletContext@af2a50 - appName: 'acs', name: '/ACS', context-path: '/ACS'] Root cause of ServletException.
java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:168)
    at weblogic.servlet.internal.PostInputStream.read(PostInputStream.java:138)
    at weblogic.servlet.internal.ServletInputStreamImpl.read(ServletInputStreamImpl.java:199)
    at com.documentum.acs.sdi.ACS.getPostUrlQuery(ACS.java:246)
    at com.documentum.acs.sdi.ACS.doPost(ACS.java:72)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:763)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:225)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:127)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:283)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:175)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3214)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:1983)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:1890)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1344)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:181) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:19:07.577

似乎您的 JVM 响应或接受请求的时间过长，这导致了问题。

我相信您可以增加超时值（我不知道在 BEA 中的哪个位置执行此操作）以使进程有更多时间完成并增加服务使用的内存量。如果它不起作用，您的服务可能正在泄漏内存。

当然，这是一种解决方法，如果该工具出现错误，则必须对其进行修补。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:11:09.583

如果您怀疑应用程序或 WLS 代码中存在内存泄漏，您可以尝试[Plumbr](http://plumbr.eu)。它有相当不错的业绩记录。

# windows - 将更新的 OpenGL 与 MinGW 一起使用

> ID：12159109
> 
> 赞同：2
> 
> 时间：2012-08-28T12:19:55.313
> 
> 标签：windows, opengl, mingw

我正在尝试编译链接到 OpenGL 的代码。它最初是为 Linux 开发的，所以对于 Windows (7)，我使用 MinGW 进行编译。

MinGW 包括 OpenGL 头文件和包含 Windows 库 (`opengl32.dll`和`glu32.dll`) 的库，但是代码包含对较新 OpenGL 功能的调用，并且编译失败。用最新的 Mesa3d 替换 MinGW 的标头（Mesa3d 的标头的旧版本，支持 OpenGL 1.1）取得了一些成功。它将编译，但链接失败，因为库仍然缺少符号（将编译器直接指向 Windows OpenGL 库没有区别）。我已经确认图形硬件（Nvidia 560M）支持最新的 OpenGL 标准（事实上，它可以在同一台机器上的 Linux 上运行）。

我尝试安装 Nvidia 的 SDK，但它们仅在最新版本中包含 Direct3d（不是选项），并且不再提供旧版本（确实支持 OpenGL）供下载。

我是否以正确的方式进行此操作，并且确实需要 Nvidia 的 SDK，或者我应该做些什么来链接正确的库？

编辑：链接到的特别缺少的功能是`glBufferData`, `glMapBuffer`, `glUnmapBuffer`, `glBindBuffer`, `glGenBuffer`, 和`glDeleteBuffer`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:34:35.683

您需要的是一个 OpenGL 加载库，您应该在 Linux 和 Windows 上都使用它。这将确保您获得您感兴趣的平台所需的所有功能。

[有几个你可以选择](https://www.khronos.org/opengl/wiki/OpenGL_Loading_Library)，每个都有自己的长处和短处。

# iphone - 以横向模式启动图像

> ID：12159115
> 
> 赞同：1
> 
> 时间：2012-08-28T12:20:12.953
> 
> 标签：iphone

我正在为 iphone 构建一个游戏，它只处于横向模式。我想在 xcode 中添加启动图像，但我没有加载图像。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:23:30.510

使用 Photoshop 或其他图像编辑软件将图像更改为横向模式。我的意思是旋转图像并保存并使用它。在 XCode 中没有其他方法可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:41:08.200

这是我为使启动图像在横向模式应用程序中工作所做的工作：

我在 Pixelamtor 中打开图像并将其旋转 90 度。这使图像成为 320x480。您显然可以在 Photoshop 或其他图像编辑程序中执行相同的过程。然后我将图像命名为 Default.png 并将其拖到 xcode 中。对您的 Default@2x.png 启动图像执行相同的步骤，该图像应为 640x960。

就是这样。

我遇到的问题是我打开了 iphone 模拟器启动图像没有出现。但是，当我通过 iphone 运行它时，出现了启动图像。我认为这是 iphone 模拟器中的一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:27:52.447

[Apple 在Advanced App Tricks](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)中告诉您如何执行此操作，我认为这有点愚蠢，因为这似乎是一个常见问题。向下滚动到“以横向模式启动”，它说：

> *   将 UIInterfaceOrientation 键添加到应用的 Info.plist 文件中，并将该键的值设置为 UIInterfaceOrientationLandscapeLeft 或 UIInterfaceOrientationLandscapeRight。
> *   以横向模式布置您的视图，并确保其自动调整大小选项设置正确。
> *   覆盖您的视图控制器的 shouldAutorotateToInterfaceOrientation: 方法并为左或右横向方向返回 YES，对于纵向方向返回 NO。

第一个是让操作系统识别您想要在横向启动的原因。它定位状态栏并告诉所有视图控制器如何在启动时定位它们的视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T12:32:32.403

**编辑**参考[Apple 为 iPhone 和 iPad 应用程序提供的自动定向支持](http://developer.apple.com/library/ios/#qa/qa1588/_index.html)

**仅限 iPhone 的应用程序：**

仅限 iPhone 的应用程序可能只有一个启动图像。它应该是 PNG 格式，尺寸为 320 x 480 像素。将启动图像文件命名为 Default.png。

对于 iPhone 4 高分辨率，您可以包含额外的启动图像。它应该是 PNG 格式，尺寸为 640 x 960 像素。将其命名为 Default@2x.png。如果您的应用在 iPhone 4 上运行，iOS 将获取此图像。

**注意：**如果您的应用程序没有在 iPhone 4 上运行，并且您同时提供了 Default.png 和 Default@2x.png，iOS 将自动选择 Default.png 作为启动图像。

**仅限 iPad 的应用程序：**

以 PNG 格式为每个支持的方向创建启动图像。每个启动图像必须为 1024 x 748 像素（横向）或 768 x 1004 像素（纵向）。

默认启动图像文件：

```
Default-PortraitUpsideDown.png - upside-down portrait version.

Default-LandscapeLeft.png - left-oriented landscape version.

Default-LandscapeRight.png - right-oriented landscape version.

Default-Portrait.png - generic portrait version.

Default-Landscape.png - generic landscape version.

Default.png - default portrait launch. Its usage is strongly discouraged, use more specific launch images instead. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T12:33:31.440

根据我的理解，您想要添加应用程序启动时显示的启动图像。

然后您只需将所需图像命名为“default.png & default@2x.png 并将这些图像添加到项目中。然后在项目导航器中转到项目>摘要向下滚动您将看到启动图像右键单击并在此处添加这些图像。 全部做完

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-06T16:41:17.543

我的横向应用程序遇到了同样的错误。然后我再次从头开始使用我原来的 iOS 6 项目，突然它工作并在 iOS 7 (XCode 5) 上显示了启动屏幕。似乎 XCode 5 很容易让您感到困惑，从而使您的项目损坏，因此您必须再次从 iOS 6 重新启动并非常小心。我想我知道我做错了什么来破坏我的项目，所以它只会显示一个黑色的启动屏幕：我选择了项目并在“启动图像”部分内的“常规”选项卡下单击文件夹按钮并玩弄有点，“手动”添加图像文件等。不要那样做！即使您稍后将其更改回来（正如我也尝试过的那样），您的项目已损坏 - 似乎 - 并且您无法再让它工作以显示启动屏幕（至少在顶层，

所以重新启动并按如下方式修复它，这对我有用：

1) 保留 iOS 6 项目的备份

2) 在 XCode 5 中打开您的项目

3) 将丢失的文件（例如 Default-568h@2x 或任何其他丢失的文件）添加到您的项目中，方法是将它们拖放到项目导航器中。然后 XCode 会自动找到它并为您完成工作。

或者，如果您拥有所有文件，但 XCode 告诉您其中一个启动图像的图像纵横比错误（不是 640x1136 像素...），请执行以下操作：

1) 关闭 XCode

2) 修复启动图像的纵横比

3）打开XCode和你的项目，就是这样。XCode 正在检查您的启动图像，发现宽高比正常，一切顺利。不需要更多的工作。

Dont mess around in your project under the "General" tab... and probably also dont mess around in the plist. Do it as above and it should work (it worked for me).

Bottom line: I think the problems only occurs, if you manually try to change your launch images in your project which corrupts your project easily and gives you black launch images. If you let XCode make the work as I described above, your app will work as it should and show the launch image.

# java - oozie 抛出错误 java.lang.IncompatibleClassChangeError: 找到接口 org.apache.hadoop.mapreduce.Counter，但应使用类

> ID：12159116
> 
> 赞同：0
> 
> 时间：2012-08-28T12:20:13.320
> 
> 标签：java, oozie

我编写了一个 mapreduce 类，当我执行该 mapreduce 代码时，我在其中使用了一个计数器，我收到了这个错误

```
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.Counter, but class was expected
    at MyProg.run(Unknown Source)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:84)
    at MyProg.main(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.oozie.action.hadoop.LauncherMapper.map(LauncherMapper.java:454)
    at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:393)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:327)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:270)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1232)
    at org.apache.hadoop.mapred.Child.main(Child.java:264) 
```

谁能建议我为什么会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T06:32:56.023

看起来 Oozie 与您拥有的 Hadoop 版本与构建 Oozie 的版本之间存在版本冲突。看看这个（已解决的）hadoop 票：[https ://issues.apache.org/jira/browse/MAPREDUCE-3697](https://issues.apache.org/jira/browse/MAPREDUCE-3697)

您可以尝试运行该票证中的几个补丁。

# sql - 具有多个连接的 SQL 删除

> ID：12159118
> 
> 赞同：0
> 
> 时间：2012-08-28T12:20:23.730
> 
> 标签：sql, sql-server-2008

我有一些需要帮助的具有挑战性的删除语句。我正在尝试在同一个表上删除多个具有多个连接的重复记录。

这是我的数据示例

### versionid(PK) FileID(FK) 版本 DeleteDate DeleteIndicator

```
 1              1         1      12/01/2003        1
   2              1         1      12/02/2003        1 
   3              1         1         null           0
   4              2         2      01/02/2004        1
   5              2         2      01/03/2005        1
   6              2         2      01/03/2006        1 
```

我需要删除的数据是由 FileId 和 DeleteDate 小于 04/01/2011 且 DeleteIndicator 为 = 1 的版本匹配的所有重复数据。但是，我需要将最高版本 ID 保留在重复数据之外相同的 FileId 和版本

删除后我会剩下这个：

### versionid(PK) FileID(FK) 版本 DeleteDate DeleteIndicator

```
 2              1         1      12/02/2003        1 
  3              1         1         null           0
  6              2         2      01/03/2006        1 
```

我有一个带有多个连接的选择，可以为我提供上述记录。我只是不知道如何将其变成删除语句。这是我的选择声明。

```
SELECT  t.VersionID ,
    t.FileID ,
    t.version ,
    COUNT(*) ,
    t.DeleteDate ,
    t.DeleteIndicator
FROM    tblFileVersions t
    JOIN ( SELECT   VersionID ,
                    FileID ,
                    MAX(VersionID) AS MaxVersion ,
                    DeleteDate ,
                    DeleteIndicator
           FROM     tblFileVersions
           GROUP BY VersionID ,
                    FileID ,
                    DeleteDate ,
                    DeleteIndicator
         ) x ON t.FileID = x.FileID
WHERE   t.DeleteDate < '2011/04/01'
    AND t.DeleteIndicator = 1
    AND t.VersionID < MaxVersion
GROUP BY t.VersionID ,
    t.FileID ,
    t.version ,
    t.DeleteDate ,
    t.DeleteIndicator ,
    Version
HAVING  COUNT(*) > 1 
```

我需要做的就是把我拥有的东西变成一个删除语句。抱歉，如果我的文本格式全部搞砸了，这是我第一次在这里发帖。任何帮助将非常感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:30:09.670

最简单的方法来做到这一点：

```
DELETE FROM tblFileVersions 
WHERE VersionID NOT IN (SELECT  t.VersionID
FROM    tblFileVersions t
    JOIN ( SELECT   VersionID ,
                    FileID ,
                    MAX(VersionID) AS MaxVersion ,
                    DeleteDate ,
                    DeleteIndicator
           FROM     tblFileVersions
           GROUP BY VersionID ,
                    FileID ,
                    DeleteDate ,
                    DeleteIndicator
         ) x ON t.FileID = x.FileID
WHERE   t.DeleteDate < '2011/04/01'
    AND t.DeleteIndicator = 1
    AND t.VersionID < MaxVersion
GROUP BY t.VersionID ,
    t.FileID ,
    t.version ,
    t.DeleteDate ,
    t.DeleteIndicator ,
    Version
HAVING  COUNT(*) > 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:30:01.777

只需将您的查询用作子查询，但只选择一个 PK 字段 versionID：

```
Delete from tblFileVersions where 
versionid NOT IN (select t.VersionID from tblFileVersions t Join...CONTINUE YOUR QUERY HERE......) 
```

# iphone - 与IOS配合使用的POS系统

> ID：12159122
> 
> 赞同：0
> 
> 时间：2012-08-28T12:20:56.477
> 
> 标签：iphone, ios, printers

我正在开发一个 IOS 5 应用程序来下食品订单，这个订单会进入一个不断监控新订单的电子邮件收件箱。但是我正在寻找一个更好的解决方案我正在考虑将这个应用程序链接到一个 POS 系统来打印订单之后是从 iphone 应用程序发送的。我想知道是否有人开发了与 POS 系统集成的应用程序或将在线订单直接发送到打印机的方法？任何帮助将不胜感激。

我现在拥有的：一个 IOS 5 应用程序，它从 iphone 下订单，然后向收件箱发送一封电子邮件，然后手动打印出来，然后将其传递给厨房工作人员。

我想改进的地方：从应用程序中，我想与 REST 服务或中间的任何进程进行通信，然后希望在安装在厨房的 POS 打印机中打印出该订单/收据，而无需监控电子邮件收件箱并打印手动发送电子邮件。

资源：小型 POS 系统，带有 2 台打印机 1 台在厨房 1 台在厨房（用于购票）和互联网连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:58:14.383

要连接到 POS，您必须查阅该特定 POS 系统的文档或支持。每一个都是不同的。有些提供导入数据的机制，有些则不提供。

但是，对于打印，您应该能够获得支持 AirPrint 的打印机，并打印任何内容。有关介绍性信息，请参阅此文档。

此外，还有一个关于 AirPrint 的 WWDC 视频。

[http://support.apple.com/kb/HT4356?viewlocale=en_US&locale=en_US](http://support.apple.com/kb/HT4356?viewlocale=en_US&locale=en_US)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:50:08.483

到目前为止我做了什么：

*   在 iPad 上运行的现金登记程序

*   通过 RS232 连接到 linux pc 的收据打印机 (Nixdorf ND 210)

*   linux pc 上的一个小守护进程（C 程序），通过 WLAN 从 ipad 接收端口 7919 上的 HTTP POST 请求。请求很简单，返回打印机状态（就绪、缺纸、错误……）和打印数据，包括 ä 的转换。＆欧元; 等到代码页 437 等效项。

我想知道你是否可以使用类似的设置。

# wpf - 设置 wpf/caliburn.micro 应用程序的大小，同时允许内容随主窗口调整大小。

> ID：12159124
> 
> 赞同：6
> 
> 时间：2012-08-28T12:21:00.267
> 
> 标签：wpf, caliburn.micro

我不知道如何在允许内容随主窗口调整大小的同时控制应用程序的大小。这是一个 WPF 应用程序，我使用的是 Caliburn Micro（首先是 ViewModel），我所有的视图都是 UserControls。

我希望主视图 UserControl（基本上是一个包含具有自己的视图模型的其他用户控件的网格）来拉伸并填充整个应用程序主窗口区域。所以我在主视图上将 Horizo​​ntalAlignment 和 VerticalAlignment 设置为 Stretch。但这不能按我的意愿工作。

如果我将主视图上的高度和宽度设置为某个值，那么这允许我控制应用程序主窗口的大小，但视图将是固定大小并且不会随主窗口调整大小。

如果我将主视图上的高度和宽度设置为自动，则应用程序窗口大小将调整为主视图的大小，而不是相反。

我想要的是应用程序窗口的内容（该窗口是由 Caliburn.Micro 自动创建的主视图）伸展以填充应用程序窗口，我以某种方式设置的大小我无法弄清楚如何做。

希望你能帮忙，我卡住了！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-04-02T15:23:53.893

我意识到这个问题已经很老了，可能是指 Caliburn.Micro v1，但以防万一像我这样的其他人出现，这里是 Caliburn.Micro v2 的解决方案。

在您的 Bootstrapper`OnStartup`函数中，您只需要设置`Width`,`Height`并`SizeToContent.Manual`设置到`DisplayRootViewFor`函数中，如下所示：

```
protected override void OnStartup(object sender, StartupEventArgs e)
{
   var settings = new Dictionary<string, object>
   {
       { "SizeToContent", SizeToContent.Manual },
       { "Height" , 600  },
       { "Width"  , 1024 },
   };

   DisplayRootViewFor<IShell>(settings);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:57:47.873

删除您为子控件设置的高度和宽度并使用 UIElement.CliptoBounds 属性并将其设置为 True。

[http://msdn.microsoft.com/en-us/library/system.windows.uielement.cliptobounds.aspx](http://msdn.microsoft.com/en-us/library/system.windows.uielement.cliptobounds.aspx)

# java - 什么是CAS认证？

> ID：12159125
> 
> 赞同：2
> 
> 时间：2012-08-28T12:21:03.523
> 
> 标签：java, cas

什么是CAS认证？

任何人都可以提供一些关于用 Java 实现的 CAS 身份验证的教程或示例吗？

实际上我想要一个例子，我可以使用过滤器和一个特定的 servlet 来处理 CAS 身份验证。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-09-01T06:57:20.017

CAS 是一个免费的开源项目，由名为 JASIG 的非营利组织赞助。它用于向系统验证用户身份（通常通过用户名/密码）并提供其他功能。JASIG 免费提供此软件供其他组织/公司/个人/等在自己的服务器上配置和部署。在其服务器上部署 CAS 的组织负责支持其本地实例。

有关分步过程，请通过链接

[https://wiki.jasig.org/display/CASUM/Demo](https://wiki.jasig.org/display/CASUM/Demo)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T16:38:17.260

CAS（中央身份验证服务）来自耶鲁大学的 CS 部门，现在是一个 JA-SIG 项目

在他们的 wiki 上有一个很好的文档示例，显示了在使用的过滤器

[https://wiki.jasig.org/display/CASC/Using+CAS+with+Java](https://wiki.jasig.org/display/CASC/Using+CAS+with+Java)

# php - 邮戳 PHP 演示错误

> ID：12159126
> 
> 赞同：0
> 
> 时间：2012-08-28T12:21:09.380
> 
> 标签：php, email

我正在使用邮戳入站电子邮件功能构建一个 PHP 脚本 - 演示 PHP 代码为我抛出了各种错误。我从演示页面几乎逐字复制了代码，但 \ 似乎导致了 PHP 错误。[演示代码主页在这里](https://github.com/jjaffeux/postmark-inbound-php)

我正在使用的代码：

```
require_once '/postmark/Autoloader.php';
\Postmark\Autoloader::register();

// this file should be the target of the callback you set in your postmark account
$inbound = new \Postmark\Inbound(file_get_contents('php://input')); 
```

错误：

解析错误：语法错误，第 10 行 /home/path/page.api.email.php 中的意外 T_STRING

第 10 行是：\Postmark\Autoloader::register();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:29:58.983

听起来您可能没有运行 PHP >= 5.3 -[命名空间](http://www.php.net/manual/en/language.namespaces.rationale.php)(\Postmark\Autoloader) 仅在 >= 5.3 中受支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-14T12:28:56.947

尝试这个：

```
require_once '../postmark/Autoloader.php';
\Postmark\Autoloader::register();

// this file should be the target of the callback you set in your postmark account
$inbound = new \Postmark\Inbound(file_get_contents('php://input')); 
```

# mysql - 没有子查询的过滤计数和总计数

> ID：12159128
> 
> 赞同：7
> 
> 时间：2012-08-28T12:21:13.483
> 
> 标签：mysql, sql, count

假设我有一个这样的表：

```
ID     Result
-------------
 1  ,  'pass'
 2  ,  'pass'
 3  ,  'fail'
 4  ,  'fail'
 5  ,  'fail'
 6 ,   'fail' 
```

有什么简单的方法可以找到`COUNT WHERE result = 'fail' AND total COUNT`。

预期输出：

```
FailCount    TotalCount
-----------------------
    4            6 
```

是的，我们可以使用这样的子查询来做到这一点：

```
SELECT 
(SELECT COUNT(result) FROM t WHERE result='fail') AS FAILCount
, COUNT(result)
AS TotalCount FROM t; 
```

但是有没有办法这样做：

```
SELECT COUNT(WHERE Result='fail') , COUNT(Result) FROM ... 
```

[我正在尝试这个小提琴。](http://sqlfiddle.com/#!2/18571/12)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-28T12:22:34.730

**ANSI SQL**

```
SELECT 
   SUM(CASE WHEN Result='fail' THEN 1 ELSE 0 END) , 
   COUNT(*) FROM ... 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!2/18571/3)

**MySQL 特定**（如 eggyal 所指）

```
SELECT 
       SUM(Result='fail') , 
       COUNT(*) FROM ... 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!2/18571/5)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T12:36:50.533

是的，我们也可以这样使用：

```
SELECT 
   COUNT(CASE WHEN Result='fail' THEN 1 ELSE NULL END) , 
   COUNT(*) FROM ... 
```

[看到这个 SQLFiddle](http://sqlfiddle.com/#!2/18571/11)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:25:00.267

```
SELECT 
   SUM(CASE WHEN Result='fail' THEN 1 ELSE 0 END) as FailCount, 
   COUNT(Result) as TotalCount FROM table_name 
```

# android - 如何记住在 SearchView 中输入的文本？

> ID：12159134
> 
> 赞同：1
> 
> 时间：2012-08-28T12:21:34.183
> 
> 标签：android, searchview

在 SearchView 中键入一些文本并关闭键盘后，在 SearchView 中删除了文本，我想保留键入的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:25:56.867

使用 getText() 方法并检索文本。或者，您可以使用 OnTextChanged 事件侦听器在键入文本时检索它。

# php - php数组获取特定值的位置

> ID：12159136
> 
> 赞同：2
> 
> 时间：2012-08-28T12:21:46.127
> 
> 标签：php, arrays, position

我有一个数组，我想获得一个特定值的位置

例子：

```
$my_array = array(0,2,5,3,7,4,5,2,1,6,9); 
```

我的搜索是*5**号*，数组中5 号的位置是（ *2*和*6*）

如果我调用该`array_search`函数，则始终返回数组中的第一个位置*2*。

反正有没有获得两个或更多特定价值的职位？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T12:25:25.837

将[array_keys](http://tr.php.net/manual/en/function.array-keys.php)与可选的搜索参数一起使用，它应该返回所有的键。

`$matches = array_keys($my_array, 5);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T12:25:36.800

看看[array_keys](http://www.php.net/manual/en/function.array-keys.php)第二个参数。您可以获得仅匹配的密钥`$search_value`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T12:34:23.300

```
 $result = array();
  foreach ($array as $key => $value)
   {
      $result[$value] =implode(',',array_keys($array,$value))

  }
  echo '<pre>';
print_r($result); 
```

它会给你一个数组，其中值作为键，它们的出现作为用逗号分隔的值

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T12:24:09.533

只需遍历数组：

```
/* Searches $haystack for $needle.
   Returns an array of keys for $needle if found,
   otherwise an empty array */
function array_multi_search($needle, $haystack) {
  $result = array();
  foreach ($haystack as $key => $value)
    if ($value === $needle)
      $result[] = $key;
  return $result;
} 
```

# c# - Azure Table InsertOrMerge Upsert：可以动态创建要合并的对象吗？

> ID：12159137
> 
> 赞同：2
> 
> 时间：2012-08-28T12:21:48.443
> 
> 标签：c#, datacontext, azure-storage, azure-table-storage, upsert

我需要将属性的动态列表合并到已保存在 Azure 表中的内容中。根据我的研究，用“插入或合并”“upsert”是正确的方法。

*   如何让 C# 语言允许保存动态属性列表？

*   原始 XML 编辑是完成此任务的唯一方法吗？

* * *

[有关 Upsert 和 InsertOrMerge 的更多信息，请点击此处](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/09/15/windows-azure-tables-introducing-upsert-and-query-projection.aspx)

* * *

关于我的特定问题的更多详细信息

我正在使用一个`Entity`对象来跟踪本质上是一个长度为 N 的数组，其中 N < 240（255 是 Azure Table 中可用的最大属性数）。数组中的每个位置都对应一个属性名称，如下所示：

```
 /* Note: Each number is prefixed by "a" since properties can't start with a number and I like it when all properties have the same length */

public class MyFatEntity
{

public string A01 {get;set;}

public string A02 {get;set;}

// ..

public string A10 {get;set;}

// ..

public string AF0 {get;set;}

} 
```

我需要能够将字符串与数组的任何特定位置进行匹配。我计划对此使用投影。

我预见到的一个问题是，如果我创建一个具有 240 个属性的大型胖对象，那么我正在消耗存储带宽并产生不需要存在的低效率。

更不用说这些额外的属性，即使为空，也将计入我的最大实体大小。这是不希望的，因为内在开销意味着我将有更少的空间来保存更长记录的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T00:04:35.853

我编写了一个开源客户端 Lucifure Stash，可在 CodePlex 和 NuGet 上使用，它允许您将数组持久保存到 Azure 表存储，每列一个数组元素。

Lucifure Stash 还通过字典支持动态属性，非常适合“插入合并”。( [CodePlex](http://lucifurestash.codeplex.com/) )

它不支持查询单个数组元素的能力。请注意，除非查询受到严格的分区和/或行键范围的约束，否则对非键元素的查询可能效率低下。

# iis - DotLESS IIS7 不工作：LESS 没有被渲染

> ID：12159156
> 
> 赞同：1
> 
> 时间：2012-08-28T12:23:45.610
> 
> 标签：iis, less, dotless

我已经从 dotlesscss.org 下载了我的 dotless 核心 dll，并完成了在项目中正确使用 less 所需的所有步骤。

正如他们在主页中解释的那样，我已经包含了对 .dll 的引用。

我就像他们推荐的那样将 httpHandler 添加到 webconfig 文件中

```
<add type="dotless.Core.LessCssHttpHandler,dotless.Core" validate="false" path="*.LESS" verb="*" /> 
```

**我还创建了一个 configSection，发现如果它不是配置的第一个子项，它将返回 500 INTERNAL ERROR。（太棒了）**

并将设置添加为节点的子节点，它似乎是假设的。

我的 less 文件中包含在母版页中的所有样式都没有被加载。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T00:50:54.067

我遇到了同样的问题。对我有用的是将以下 web.config 设置放在 system.webServer 下，而不是 .less 网站在 system.web 下显示的建议设置：

```
<system.webServer>
  <handlers>
    <add name="dotless" path="*.LESS" verb="*" type="dotless.Core.LessCssHttpHandler,dotless.Core" resourceType="File" preCondition=""/>
  </handlers>
  <validation validateIntegratedModeConfiguration="false"/>
</system.webServer> 
```

资料来源：[http ://cyrilgupta.com/?p=520](http://cyrilgupta.com/?p=520)

如果您还没有这样做，您还需要在 IIS 中为 .less 文件添加 MIME 类型，我认为 dotlesscss.org 的说明中没有列出。

# algorithm - 生存概率

> ID：12159159
> 
> 赞同：4
> 
> 时间：2012-08-28T12:23:53.790
> 
> 标签：algorithm, math, recursion

有一个用矩阵表示的岛。你在岛上的某个位置`(x,y)`。如果你跳`n`时间，你能活下来的概率是多少？生存意味着`n`跳跃后你必须在岛上。

我的解决方案：我申请`flood fill algorithm`了允许在各个方向（即 N、W、E、S）移动并检查在`n`跳跃之前我是否离开岛然后增加 `failure`计数器，否则增加`success`计数器。

在迭代所有可能的路径之后，答案是（（成功）/（成功+失败））。这需要指数级的时间。

我的问题是我们可以通过使用动态编程或任何其他编程技术在多项式时间内解决这个问题吗？如果是，您能告诉我该技术背后的概念吗？

编辑：我的代码

```
#include<iostream>

using namespace std;

double probability_of_survival(int n, int m, int x, int y, int jumps) {
    int success = 0;
    int failure = 0;
    probability_of_survival_utility_func(n, m, x, y, 0, jumps, &sucess, &failure);
    return (double)((success)/(failure+success));
}

void probability_of_survival_utility_func(int n, int m, int x, int y, int jump_made, int jumps, int *success, int *failure) {
    if(x > m || x < 0 || y > n || y < 0) { (*failure)++; return;}
    if(jump_made == jumps) { (*success)++; return;}
    probability_of_survival_utility_func(n, m, x+1, y, jump_made++, jumps, success, failure);
    probability_of_survival_utility_func(n, m, x, y+1, jump_made++, jumps, success, failure);
    probability_of_survival_utility_func(n, m, x-1, y, jump_made++, jumps, success, failure);
    probability_of_survival_utility_func(n, m, x, y-1, jump_made++, jumps, success, failure);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T15:19:16.833

马尔可夫矩阵巧妙地描述了这个问题。通过以下方式将问题转换为图形。将矩阵的行映射到坐标上，也就是说，对于每个可能的`(x,y) -> i`. 建立一个对称邻接矩阵`A`，使得`(i,j)=1`当且仅当站点`(x1,y1)->i, (x2,y2)->j`连接时。所有死亡地点都将映射到单个地点并具有这样的属性`A[i,i]=1`，`A[i,j!=i]=0`即它是一个吸附状态。行归一化矩阵。`p=[0,0,0,...,1,...,0,0]`使用一个对应于起始位置的起始向量，取乘积：

```
 (A**k) . p 
```

并对实时站点求和，这将为您提供生存概率。为了分析，这里的注`n`数是，岛上活着的站点的数量。复杂性被巧妙地限制了，最昂贵的操作是矩阵求幂`A**k`。天真地这可以在 中完成`O(n**3 * k)`，但我怀疑您可以首先对矩阵进行对角化，代价是`O(n**3)`特征值并取幂。

# 视觉示例：

一个岛，有一个红色的起点和它的邻接矩阵：

![在此处输入图像描述](../Images/a6c89aad18973f5e93cc79b643b98824.png)

作为步骤函数的计算生存概率：

![在此处输入图像描述](../Images/6e0da2978398d34ed9634d5d601ec8cc.png)

# Python实现：

```
from numpy import *

# Define an example island
L = zeros((6,6),dtype=int)
L[1,1:2] = 1
L[2,1:4] = 1
L[3,1:5] = 1
L[4,2:4] = 1

# Identify alive sites
alive = zip(*where(L))
N = len(alive)

# Map the entries onto an index for easy access
ID = dict(zip(alive, range(N)))

# Create adj. matrix, the final index is the dead site
def connect(x, horz, vert):
    s = (x[0]+horz, x[1]+vert)
    if s not in ID: A[ID[x], N] += 1
    else          : A[ID[x], ID[s]] += 1

A = zeros((N+1,N+1))
for x in alive:
    connect(x,  1, 0)
    connect(x, -1, 0)
    connect(x,  0, 1)
    connect(x,  0,-1)

# Define the dead site as adsorbing, and row normalize
A[N,N] = 1
A /= A.sum(axis=1)[:,newaxis]

# Define the initial state
inital = (3,2)
p0 = zeros(N+1)
p0[ID[inital]] = 1

# Compute survival prob. as a function of steps
steps = 20
A2 = A.copy()
S = zeros(steps)
for t in xrange(steps):
    S[t] = 1-dot(A2.T,p0)[-1]
    A2   = dot(A2, A)

# Plot results
import pylab as plt
plt.subplot(121)
LSHOW = L.copy()
LSHOW[inital] = 2
plt.imshow(LSHOW,interpolation='nearest')
plt.subplot(122)
plt.imshow(A,interpolation='nearest')
plt.figure()
plt.plot(range(steps), S,'ro--')
plt.show() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T12:39:13.557

```
f(x,y,0) = 0     if (x,y) is not in the island
           1     otherwise

f(x,y,i) = 0     if (x,y) is not in the island
           otherwise: 1/4 * f(x+1,y,i-1) + 
                      1/4 * f(x-1,y,i-1) + 
                      1/4 * f(x,y+1,i-1) + 
                      1/4 * f(x,y-1,i-1) 
```

使用动态编程，您可以创建`2n+1 x 2n+1 x n+1`3 维数组，并根据此公式填充它，从 开始`i=0`并一直到`i=n`。

最后你的解决方案在`f(0,0,n)`数组中。（请记住在您的坐标中将原始 (x,y) 设置为 (0,0)，并进行必要的调整）。

复杂性是`O(n^3)`- 矩阵的大小。

请注意，这个解决方案是[pseudo-polynomial](http://en.wikipedia.org/wiki/Pseudo-polynomial_time)，所以如果任何未来的答案表明这个问题是 NP-Hard （不知道是否是） - 它并不矛盾。

PS 对于实际实现 - 如果您需要*准确的*答案 - 在使用双精度数字时要非常小心 - 特别是对于大量步骤，因为携带的数字错误可能会变得很重要。

# sql-server - sql：根据计算列分组？

> ID：12159162
> 
> 赞同：1
> 
> 时间：2012-08-28T12:24:21.243
> 
> 标签：sql-server, tsql, select, group-by

我有这些数据显示按年份分组的综合报告。我使用的是一个简单的 `GROUP BY YEAR(BookingDate)`子句，一切正常。但我想要的是财政年度（`1 April`至`31 May`）而不是正常的日历年，那么我该怎么做呢？查询是..

```
SELECT 
    CONVERT(VARCHAR(25), c.Duration) AS Duration, 
    COALESCE(c.totalbookings, 0) AS totalbookings
FROM
    (SELECT 
               YEAR(bookingdate) AS Duration, 
               COUNT(*) AS totalbookings 
           FROM 
               entbookings
            WHERE BranchId=@Branchid
           GROUP BY YEAR(bookingdate)
    ) AS c 
LEFT OUTER JOIN 
    (SELECT 
               Duration, 
               SUM(totalitems) 'bkdqty'
           FROM 
               [yrItemWISeTotalQty] (@BranchId) AS BkdQty
           GROUP BY Duration
    ) AS d 
ON c.Duration = d.Duration 
```

被`yrItemWISeTotalQty`定义为

```
CREATE FUNCTION [dbo].[yrItemWiseTotalQty]
(
@BrachId VARCHAR(MAX)
) 

RETURNS TABLE AS
    RETURN
SELECT 
    YEAR(EntBookings.BookingDate) AS Duration, 
    Sum(dbo.EntBookings.ItemCost) AS totalcost,
WHERE   EntBookings.BranchId = @BrachId
GROUP BY Year(EntBookings.BookingDate) 
```

同样，我使用`GROUP BY Year()`它的工作效果很好，但我需要对其进行修改以采用 fy ie（4 月 1 日至 3 月 31 日）。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:36:10.840

试试这个：

```
SELECT 
    case when month(EntBookings.BookingDate) <4
         then YEAR(EntBookings.BookingDate)-1
         else YEAR(EntBookings.BookingDate) end  AS Duration, 
    Sum(dbo.EntBookings.ItemCost) AS totalcost
WHERE   EntBookings.BranchId = @BrachId
GROUP BY case when month(EntBookings.BookingDate) <4 
         then YEAR(EntBookings.BookingDate)-1 
         else YEAR(EntBookings.BookingDate) end as [year] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:06:37.277

定义一个 SQL 函数
`getFinancialYear(Data[TimeStamp] )`
来返回财政年度编号并使用它来分组和。
IE

```
...
GROUP BY getFinancialYear(BookingDate)
... 
```

# asp.net - 在 ASP.NET MVC4 应用程序中重新路由 API

> ID：12159167
> 
> 赞同：0
> 
> 时间：2012-08-28T12:24:46.133
> 
> 标签：asp.net, rest, routing, asp.net-mvc-4, asp.net-web-api

我编写了一个 API，它使用标准 HTTP Post、Get、Put 和 Delete 属性以及 VS 2012 配置的路由

```
routes.MapHttpRoute(
name: "DefaultApi",
routeTemplate: "api/{controller}/{id}",
defaults: new { id = RouteParameter.Optional } 
```

现在我已经开始使用 HTML5 和 JavaScript 开发我的网站，并且发现 Delete 和 Put 在任何浏览器中都不是支持方法。我需要将我的 Delete 更改为 Post 以及 Puts。

为此，我需要执行以下任一操作，并且我正在寻找“最佳实践”建议：1.) 创建另一个带有添加参数的 Post 方法以指定它是删除

```
//This is really my delete method
public virtual HttpResponseMessage Post(TEntity entity, bool delete) 
```

2.）更改路由以使用操作名称，然后将我的 Post 方法命名为“删除”，这将更有意义

```
//New Routing
routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

//More meaningful post method
[HttpPost]
public virtual HttpResponseMessage Post(TEntity entity){} 
```

请注意，我希望外部用户能够绑定到 API，这就是为什么我正在寻找最佳实践建议的原因。API 路由中有 {action} 是否常见？

提前致谢

编辑：

使用 Ajax，我在我的 API 中点击了我的 Delete 方法，但是我的“字符串 id”参数为空。我尝试了两种方法在我的 JavaScript 中执行这个 ajax 请求。两者都在以下相同的方法中：

```
 function AjaxReq() {
        $.ajax({
            url: 'http://localhost:49482/api/pallets/',
            type: 'delete',
            data: { id: 12 },
            success: function (response) { alert("Success") },
            error: function (response) { alert("Failed:" + response) }
        });
    }

    function httpRequest() {
        var request = new XMLHttpRequest();
        request.open("delete", "http://localhost:49482/api/pallets/", true);
        request.send("id=12");
        alert(request.responseText);
    } 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:33:49.270

你到底是什么意思：

> Delete 和 Put 不是任何浏览器中的支持方法

确实，该`form`元素仅支持 POST 和 GET（尽管有基于隧道的解决方法），但是当您使用 RESTful API 时，您通常通过 JavaScript（例如使用`$.ajax`）发出 XMLHttpRequest，并且 XMLHttpRequest 支持 GET、POST , PUT 和 DELETE 在所有主要浏览器中。

回到您的确切问题，重新配置路由以使用操作名称并为您的操作提供有意义的名称的方法更加清晰。

**关于编辑的更新**

DELETE 方法请求源服务器删除由 URI 标识的资源。实际上，这意味着您应该将 Id 放入 URL（jQuery 仅对 GET 方法自动执行此操作）：

```
function AjaxReq() {
    $.ajax({
        url: 'http://localhost:49482/api/pallets/12',
        type: 'delete',
        success: function (response) { alert("Success") },
        error: function (response) { alert("Failed:" + response) }
    });
}

function httpRequest() {
    var request = new XMLHttpRequest();
    request.open("delete", "http://localhost:49482/api/pallets/12", true);
    request.send();
    alert(request.responseText);
} 
```

这应该适用于默认路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:13:26.787

HTML 规范与 HTTP 规范是分开的。HTML 仅支持 POST 和 GET。您需要使用 AJAX 调用其他方法，例如 HEAD、OPTIONS、DELETE、PUT、PATCH...

# php - 在 MySQL 中插入或复制表

> ID：12159168
> 
> 赞同：2
> 
> 时间：2012-08-28T12:24:46.630
> 
> 标签：php, mysql, database

我想实现更新数据：我有产品和数量......如果产品已经在数据库中，我需要使用旧数量加上新数量来更新数量示例：我已经有 3 个苹果，我想再插入2个苹果。结果应该是 productname=apple 和 quantity=5。对不起我的英语不好，希望能解决我的问题。

```
INSERT INTO table1 (productname, quantity) VALUES (’apple’, ‘2’)
ON DUPLICATE KEY UPDATE ptoductname; // <-- not sure 
```

请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T12:27:26.940

# jquery - jquery nestedSortable 如何从 _isAllowed 访问当前元素 className

> ID：12159172
> 
> 赞同：1
> 
> 时间：2012-08-28T12:24:57.817
> 
> 标签：jquery, nested-sortable

我需要扩展 jquery.nestedSortable 以在 _isAllowed 中添加一些事件，并看到在该函数中，现在支持访问 parentItem、级别和级别，但我一直在努力访问当前项目。我需要检查当前项目 li className。

# ruby-on-rails - 红布和铁轨

> ID：12159174
> 
> 赞同：0
> 
> 时间：2012-08-28T12:25:01.030
> 
> 标签：ruby-on-rails, redcloth

我想使用 RedCloth gem，我安装它，在我的 gemfile 中我放 -> gem 'RedCloth' 在我的 show.html.erb 我放 ->

```
<%= RedCloth.new(@post.text).to_html %> 
```

我看到了简单的 html 语法，而不是我使用的

```
<%= raw RedCloth.new(@post.text).to_html %> 
```

它工作完美，它不安全
@post.text -> 某些用户放置

当我输入时，`<script> alert('!!!') </script>`我看到了“！！！” 处于警戒状态

如何安全使用 RedCloth（或推荐其他宝石）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:56:28.687

sanitize gem [https://github.com/rgrove/sanitize/](https://github.com/rgrove/sanitize/)是仅将某些 html 元素列入白名单并阻止其他元素（例如）的可靠选择

# dependency-injection - 在 Guice 中配置多个注入

> ID：12159181
> 
> 赞同：0
> 
> 时间：2012-08-28T12:25:26.223
> 
> 标签：dependency-injection, guice

在 Guice，我有一个类“面板”和一个类“控制器”。两者是相互关联的。控制器有 3 个子类（比如 A、B 和 C）。我想为程序员提供一种简单的方法来获取 Panel 实例，其中注入了 3 个控制器之一，具体取决于他们的需要。

例如，在特定的代码点，程序员可能希望获得一个注入了 ControllerA 的 Panel 实例，但在不同的地方，他可能需要带有 ControllerB 的 Panel。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:58:56.623

您可以使用绑定注释让用户指定他们想要的： [http ://code.google.com/p/google-guice/wiki/BindingAnnotations](http://code.google.com/p/google-guice/wiki/BindingAnnotations)

您将像这样创建注释：

```
import com.google.inject.BindingAnnotation;
import java.lang.annotation.Target;
import java.lang.annotation.Retention;
import static java.lang.annotation.RetentionPolicy.RUNTIME;
import static java.lang.annotation.ElementType.PARAMETER;
import static java.lang.annotation.ElementType.FIELD;
import static java.lang.annotation.ElementType.METHOD;

@BindingAnnotation @Target({ FIELD, PARAMETER, METHOD }) @Retention(RUNTIME)
public @interface WithClassA{}
@BindingAnnotation @Target({ FIELD, PARAMETER, METHOD }) @Retention(RUNTIME)
public @interface WithClassB{}
... 
```

然后你的用户的构造函数看起来像

```
@Inject
public MyConstructor(@WithClassA Panel thePanel) {...} 
```

然后，当您进行绑定时，您将使用 .annotatedWith：

```
bind(Panel.class)
    .annotatedWith(WithClassA.class)
    .toProvider(ProviderThatReturnsPanelConstructedWithA.class);
bind(Panel.class)
    .annotatedWith(WithClassB.class)
    .toProvider(ProviderThatReturnsPanelConstructedWithB.class); 
```

以防万一，这里是关于如何设置提供者的文档：[http ://code.google.com/p/google-guice/wiki/ProviderBindings](http://code.google.com/p/google-guice/wiki/ProviderBindings)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T22:26:05.403

我想出了一个可能的解决方案：Guice 允许您绑定到提供程序实例，而不仅仅是一个类。因此，您可以只创建一个带有一个参数的构造函数的提供者，然后像这样绑定它：

> bind(Panel.class).annotatedWith(WithClassA.class).toProvider(new MyProvider("a"))

构造函数的参数类型可以是任何其他类型，例如枚举甚至注释，传入相同的 WithClassA.class。

这是保存提供者的好方法。缺点是您的提供程序中不会有依赖注入，但在这种情况下，这是我可以忍受的。

# groovy - 如何使用 Groovy XmlParser 提供动态 xpath 以从 xml 中获取数据？

> ID：12159187
> 
> 赞同：0
> 
> 时间：2012-08-28T12:26:00.137
> 
> 标签：groovy

我有这个 xml，我需要在其中获取 CPU 信息，但`CPU"1"`数字部分的标签可能会改变。我怎样才能给出一个 xpath 以便它像直到一样动态地描绘数字部分`n`？

我的 XML 内容

```
<CLIENT>
<SYSTEM>
<CPU1 NUMBER="2" SPEED="2300 MHz" Vendor="Advanced Micro Devices" BRAND="AMD Opteron(tm) Processor 6134"></CPU1>
<CPU2 NUMBER="3" SPEED="2300 MHz" Vendor="Advanced Micro Devices" BRAND="AMD Opteron(tm) Processor 6134"></CPU2>
</SYSTEM>
</CLIENT> 
```

目前我得到类似下面的xml从给定的代码生成的

```
<client>
<system>
<cpuinfo>
  <cpu Name="AMD Opteron(tm) Processor 6134" L2CacheSize="NA" MaxClockSpeed="2300 MHz" LoadPercentage="NA"/>
</cpuinfo>  
</system>
</client> 
```

我的代码

```
@XStreamAlias("cpu")
class cpu{
    @XStreamAsAttribute
    String Name
    @XStreamAsAttribute
    String L2CacheSize
    @XStreamAsAttribute
    String MaxClockSpeed
    @XStreamAsAttribute
    String LoadPercentage

    public cpu(String name, String l2CacheSize, String maxClockSpeed,String loadPercentage) {
        super();
        Name = name;
        L2CacheSize = l2CacheSize;
        MaxClockSpeed = maxClockSpeed;
        LoadPercentage = loadPercentage;
    }

}

@XStreamAlias("system")
public class WindowsSystem extends CSMSystem{
    List<cpu> cpuinfo   

    public WindowsSystem(CSMConfig config, String fileContent){
        super(config)

        cpuinfo = new ArrayList<cpu>()
        WindowsHelper wh=new WindowsHelper(fileContent)
        cpuinfo=wh.getCpuInfo(cpuinfo)
    }   
}

class WindowsHelper {
    private def root
    private List<cpu> cpuinfo

    WindowsHelper(String fileContents)
    {
        root=new XmlParser(false,false).parseText(fileContents)
    }   
    def getCpuInfo(List<cpu> cpuinfo)
    {
        try{
            def cpusize="${root.SYSTEM.CPU1.size()}"
            if(cpusize>0){
                root.SYSTEM.CPU1.each{
                    cpuinfo.add(new cpu(it.@BRAND,"NA",it.@SPEED,"NA"))
                }
                return cpuinfo
            }
            else{
                cpuinfo.add(new cpu("NA","NA","NA","NA"))
                return cpuinfo
            }
        }
        catch(Exception e){
            println "getCpuInfo "+e
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:31:54.707

我认为您应该以这样的方式重写 WindowsHelper 类的 getCpuInfo() 方法：

```
def getCpuInfo(List<cpu> cpuinfo)
{
    try {
        def cpusize=root.SYSTEM[0].children().size()            
        if (cpusize > 0) {
            root.SYSTEM[0].children().each { node ->
                if (node.name() ==~ /(?i)cpu\d+/) {
                    cpuinfo.add(new cpu(node.@BRAND, "NA", node.@SPEED, "NA"))
                }
            }
        } 

        if (!cpuinfo) {
            cpuinfo.add(new cpu("NA","NA","NA","NA"))                
        }

        return cpuinfo

    } catch(Exception e) {
        println "getCpuInfo "+e
    }
} 
```

# jquery - TinyMCE setActive to false advImage 插件

> ID：12159188
> 
> 赞同：1
> 
> 时间：2012-08-28T12:26:01.980
> 
> 标签：jquery, tinymce

我有一个自定义 youtube 插件，可以将**图像**添加到我的 tinyMCE 编辑器中，并在服务器端被嵌入或其他代码替换。

剩下的唯一一件事是当我在编辑器中选择图像时，advImage 图标和我的插件图标都设置为活动状态。我想将 advimage 设置为非活动。我试过这样的东西：

```
 cm.setActive('image', false); 
```

感谢[Thariama](https://stackoverflow.com/users/346063/thariama)（见下面的答案）我知道正确的名字应该是`'image'`。这是从我的 youtube 插件`editor_plugin.js`文件中调用的，在控制台中，我可以看到在选择图像时执行代码并且`image`是正确的目标。

如何将图像插件设置为非活动？

有关更多信息，请参阅 Thariama 答案下方的评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:42:20.077

我将演示在 html 按钮（代码插件）上停用按钮/控件的正确方法

```
var cm = tinymce.get('my_editor_id').controlManager;
cm.get('code').setActive(0); // get the control named 'code' 
```

要找出可用的控件，您可以将其记录到控制台

```
console.log(cm.controls); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T12:42:29.200

在此之后，我让它暂时搁置了一段时间，因为它不在我的优先级列表中。现在它是我列表中的最后一件事，并且由于使用了 tinyMCE 和它的代码，我很快找到了解决方案。

我认为我需要转到根目录：editor_template.js。这是图像被设置为活动的，所以我需要改变它。

我的 youtube 图像（现在也是 vimeo）有一个 alt 属性来告诉我它是 youtube 还是 vimeo 视频。现在我还需要禁用其中一个插件。

我把它放在这段代码之后的第 1117 行（它为所有 img 标签设置了活动状态。

```
p = getParent('IMG');
if (c = cm.get('image'))
    c.setActive(!co && !!p && n.className.indexOf('mceItem') == -1); 
```

我的代码：

```
if(ed.selection.getNode())
            if(ed.selection.getNode().getAttribute('alt') === 'videoYoutube' || ed.selection.getNode().getAttribute('alt') === 'videoVimeo') // Get the current selection in the editor and compare
            {
                cm.setDisabled('image', true); // Change disable state
                cm.setActive('image', false); // Change active state state
            }
            else
            {
                cm.setDisabled('image', false);
            }
            if(ed.selection.getNode().getAttribute('alt') === 'videoYoutube')
            {
                cm.setDisabled('addvimeo', true);
            }
            else if(ed.selection.getNode().getAttribute('alt') === 'videoVimeo')
            {
                cm.setDisabled('addyoutube', true);
            }
            else
            {
                cm.setDisabled('addvimeo', false);
                cm.setDisabled('addyoutube', false);
            } 
```

# asp.net - HttpWebRequest 的奇怪缓存问题

> ID：12159190
> 
> 赞同：0
> 
> 时间：2012-08-28T12:26:08.783
> 
> 标签：asp.net, httpwebrequest

我们有一个 Web 应用程序，它调用外部搜索提供程序的 url 来加载搜索结果。每次我们的页面被点击时，它都可以传入一个当前页码。此页码包含在发送给第 3 方的 url 中。我注意到，虽然他们报告了 45 页的结果，但如果我转到包含他们结果的一个页面，然后尝试导航到另一个包含其他结果的页面，则会加载来自第一页的相同结果。

我尝试设置我的 HttpWebRequest 对象以禁用缓存，但我尝试过的一切似乎都不起作用。而且，考虑到由于页码每次 url 都会发生变化，我不认为这真的是一个缓存问题。但这就是有趣的地方。

如果我复制我在代码中检索的 url 并将其粘贴到 chrome 中，它会加载正确的结果。然后我刷新 Web 应用程序页面，它现在也加载了该页面的结果。这对我来说毫无意义。该代码在本地运行，但由于它在 asp.net 中运行，因此它没有使用 chrome 来创建 Web 请求，那么为什么会发生这种情况呢？

这是我调用 url 并返回结果的代码。

```
public static string FetchPage(string url)
{
    //Specify the encoding
    Encoding enc = System.Text.Encoding.GetEncoding(1252);

    HttpWebRequest.DefaultCachePolicy = new HttpRequestCachePolicy(HttpRequestCacheLevel.Default); ;

    //Create the http request
    var request = (HttpWebRequest)WebRequest.Create(url);
    request.CachePolicy = new HttpRequestCachePolicy(HttpRequestCacheLevel.NoCacheNoStore);

    //Create the http response from the http request
    var httpWebResponse = (HttpWebResponse)request.GetResponse();

    //Get the response stream
    var responseStream = new StreamReader(httpWebResponse.GetResponseStream(), enc);

    //Read the response stream
    string htmlStream = responseStream.ReadToEnd();

    //Close the web response
    httpWebResponse.Close();

    //Close the response stream
    responseStream.Close();

    return htmlStream;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-28T20:09:23.127

请尝试以下几行以在两者中设置 no-cache`HttpWebRequest`和`WebResponse`

**请求**

```
Request.Headers.Set(HttpRequestHeader.CacheControl, "max-age=0, no-cache, no-store");
Request.CachePolicy = new System.Net.Cache.RequestCachePolicy(System.Net.Cache.RequestCacheLevel.NoCacheNoStore); 
```

**响应**

```
Response.Headers.Add(HttpRequestHeader.CacheControl, "no-cache"); 
```

# flash - 在 ColdFusion 9 中使用 Flash 表单时出现 JavaScript 错误

> ID：12159196
> 
> 赞同：38
> 
> 时间：2012-08-28T12:26:21.893
> 
> 标签：flash, coldfusion, coldfusion-9

我在 ColdFusion 9 上遇到了在 ColdFusion 8 下完美运行的 Flash 表单的问题。在浏览器中查看 Flash 表单时，表单元素本身正确显示，但每个字段的数据未在输入元素中呈现，并且提交表单时不存在。当页面加载时，我收到一个错误：

```
964024021.mxml.cfswf:1 ReferenceError: Can't find variable: updateHiddenValue 
```

该函数`updateHiddenValue`是在 中定义的函数`/CFIDE/scripts/cfform.js`，它正在加载到页面中。如果我使用控制台并直接运行该功能，它运行没有问题：

![在此处输入图像描述](../Images/cc6a2b9f8e9e512715938c4bdc41bab0.png)

为了弄清楚为什么会发生这种情况，我启动了 Charles 并观察了对服务器的请求。正如您在下面的屏幕截图中所见，.js 文件收到 200 个响应，表明它们很好，但`cfswf`请求出现“连接关闭”错误，然后是 200 个请求。这些`cfswf`请求显然是正确完成的，否则我根本看不到 Flash 表单。

![在此处输入图像描述](../Images/cdeff1a0c621c9cdeb6427d89607aa0b.png)

所以我需要弄清楚为什么我会收到这些`.js`错误，这样我才能让这个 flash 表单正常工作。我只能假设错误来自事物的闪存方面或通过 Flash Remoting（？），我只是不知道如何调试这个问题并让事情向前发展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T22:23:04.367

我在开发一个应用程序时发生了同样的错误。您可能会在此之前声明一些其他脚本，这会带来冲突。评论所有其他人，然后重试。解决了我的这个打了一个试用的方法。我评论了所有运行我的应用程序的脚本，它成功了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:26:14.243

引用的脚本标签`cfform.js`可能在引用 swf 的对象标签之后加载。检查顺序通过浏览器查看源来验证。`mm.cfg`与[Vizzy](http://code.google.com/p/flash-tracer/wiki/Troubleshooting)和[调试播放器](http://helpx.adobe.com/flash-player/kb/archived-flash-player-versions.html#main-pars_text_5)一起使用可查看 Flash 端发生的事件。以下是一些可能有助于排除故障的其他资源：

*   [在 Flash 表单中使用 ActionScript](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec10372-7ff0.html)
*   [cfajaxproxy](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-79f9.html)
*   [cfajaxproxy 和 head 标签](http://www.thefaberfamily.org/search-smith/2012/03/coldfusion-cfajaxproxy-and-the-head-tag/)
*   [从自定义 javascript 函数调用 cfform 验证](http://cookbooks.adobe.com/post_Calling_cfform_validation_from_custom_javascript_f-16276.html)

# objective-c - 如何使用另一个类中的变量显示在我的下一个故事板场景中

> ID：12159199
> 
> 赞同：0
> 
> 时间：2012-08-28T12:26:25.803
> 
> 标签：objective-c, ios, xcode

我想这已经被问过，但我找不到可以用来回答我的问题并让它工作的东西。所以，这就是我所拥有的。在一次课堂上，我有以下内容：

```
IBOutlet UILabel *totalAmountLabel; 
```

我还设置了以下总分：

```
@property (nonatomic, strong) NSString *finalTotal; 
```

所以我已经在一个班级中将我的金额设置为那个字符串，但是我在另一个班级中究竟如何得到它呢？我假设我导入了我的类，但是一旦我这样做了，我要输入什么来获取这个变量？我将如何声明我的类的一个实例来获取这个变量，即使那样，我是否可以访问它？或者我是否要通过为我完成的 getter 和 setter - 如果是这样，我怎么知道它们叫什么？

我希望这是有道理的，在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T12:37:28.703

> 我假设我导入了我的类，但是一旦我这样做了，我要输入什么来获取这个变量？

不幸的是，它并不是那么简单：您需要一个对象实例来设置它的实例变量。不管你是否通过属性，你都需要一个实例。

获取该实例的方式因类的交互方式而异。由于您使用的是 ARC 和`IBOutlet`s，我假设它们`totalAmountLabel`位于您使用 segue 打开的视图控制器中。在这种情况下，您需要在起始控制器的 .m 文件中导入目标控制器的标头，并添加以下代码：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"goToMyNextController"]) {
    // Change the ID to match the one that you are using ^^^^^^^^^
    MyNextViewController *nvc = [segue destinationViewController];
    [nvc.totalAmountLabel setTitle:finalTotal forState:UIControlStateNormal];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:42:41.477

你可以使用**NsUser 默认**

**用你的关键字设置你的对象**

```
[[NSUserDefaults standardUserDefaults]setObject:@"Ajay" forKey:@"name"]; 
```

**而不是在您项目的任何地方获取该对象**

```
 NSString *name = [[NSUserDefaults standardUserDefaults]objectForKey:@"name"]; 
```

# objective-c - CFPropertyListCreateDeepCopy 无法处理包含 NSNull 的数组/字典

> ID：12159205
> 
> 赞同：5
> 
> 时间：2012-08-28T12:27:18.253
> 
> 标签：objective-c, nsmutablearray, nsmutabledictionary, core-foundation

由于某种原因，此示例代码有效：

```
NSArray *immutable = @[ @"a", @"b", @"c" ];
NSMutableArray *mutable = (__bridge  id)CFPropertyListCreateDeepCopy(kCFAllocatorDefault, (__bridge  CFArrayRef)immutable, kCFPropertyListMutableContainers); 
```

并且此代码`nil`作为转换的结果产生：

```
NSArray *immutable = @[ @"a", [NSNull null], @"c" ];
NSMutableArray *mutable = (__bridge  id)CFPropertyListCreateDeepCopy(kCFAllocatorDefault, (__bridge  CFArrayRef)immutable, kCFPropertyListMutableContainers); 
```

我试图找到`NSNull`使用此功能时不允许提及的任何内容。我怀疑它与方法检查属性是否可变的方式有关，但我不能用事实来支持这一点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T19:38:57.253

正如苹果开发者论坛的好心人指出的那样，问题在于属性列表结构对它可以使用的数据类型相当严格。`NSNull`不是允许的之一。

来自[苹果文档](https://developer.apple.com/library/ios/#documentation/CoreFoundation/Conceptual/CFPropertyLists/Articles/StructureAndContents.html#//apple_ref/doc/uid/20001171-CJBEJBHH)：

> 属性列表由基本核心基础类型`CFString`、`CFNumber`、`CFBoolean`、`CFDate`和构成`CFData`。

# c# - C# 将构造函数参数绑定到实例变量

> ID：12159206
> 
> 赞同：8
> 
> 时间：2012-08-28T12:27:22.423
> 
> 标签：c#, constructor

非常常见的场景：我有一个包含多个实例变量的类和一个接受多个参数的构造函数。我可以以某种方式将一个绑定到另一个吗？将所有参数分配给实例变量非常冗长，并且是约定优于配置原则可能（并且应该）涵盖的情况之一。我的示例代码如下所示：

```
public class myClass
{    
    private object param1;
    private object param2;
    private object param3;
    private object param4;

    public myClass(object param1, object param2, object param3, object param4)
    {
        this.param1 = param1;
        this.param2 = param2;
        this.param3 = param3;
        this.param4 = param4;
    }
} 
```

有没有一种**简单**的方法可以摆脱这种情况并让 C# 自动发挥它的魔力？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T12:35:39.920

C# 语言中没有任何内容涵盖这一点，不。虽然工具可以为您生成代码，但它们不一定会保持最新，您最终仍会看到代码存在且可见。在某些情况下，您可能*会*使用反射来执行此操作，例如：

```
public MyClass(object param1, object param2, object param3, object param4)
{
    Helpers.PopulateFromConstructor(this, param1, param2, param3, param4);
} 
```

...您需要以与参数相同的顺序指定值，并保持名称与字段等相同。当字段为`readonly`.

就我个人而言，我只是接受它-如果需要，可以使用工具生成代码，否则就忍受它。

请注意，您可能希望在设置字段时进行验证，尤其是在 nullity 附近。所以你的构造函数体*实际上*可能会像这样结束：

```
public myClass(object param1, object param2, object param3, object param4)
{
    this.param1 = Preconditions.CheckNotNull(param1);
    this.param2 = param2;
    this.param3 = Preconditions.CheckNotNull(param3);
    this.param4 = param4;
} 
```

（当然，对于一个合适`Preconditions`的课程。我在 Java 代码中无缘无故地从 Guava 中汲取了这个想法，因为我在日常编码中使用它。这也是我们在[Noda Time](http://noda-time.googlecode.com)中使用的方法。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T12:39:30.157

“......可能（并且应该）被约定优于配置的原则所涵盖......”

“约定优于配置”通常适用于 API 或框架，例如 MVC 或实体框架，而不适用于语言本身。API 通常是一种集中的、可重用的、最重要的是*简化*功能的抽象。在这种情况下，口授约定有助于在不影响功能的情况下推动结构。

但是，编程语言并非如此。相比之下，该语言是广泛的、低级的和复杂的。它应该在不削弱语言价值的情况下尽可能少地限制其用户。假设这样一个广泛的“公约”将是非常规范的。除此之外，编译器假设具有给定名称的参数*必须始终*分配给具有相似名称的私有字段是很危险的。

一方面，您的约定并不是唯一常用的。例如，一种常见的编码风格建议使用下划线引导的私有字段 ( `_param1`)，您的约定可能会错过。除了这些赋值之外，构造函数可能还有其他逻辑，在这种情况下，您的约定太简单了：“约定驱动”的代码应该在任何其他构造函数逻辑之前还是之后执行？

最重要的是，如何覆盖这样的约定？如果在构造函数中，你要`param1`以其他方式消费，你仍然执行约定吗？如果在构造函数中为 分配不同的值`this.param1`怎么办？您的约定应该发生在用户添加的代码之前还是之后？

即使是这些简短的问题——许多人将有非常不同但同样有效的答案——也足以表明这样的约定并不像看起来那样明显，也不容易定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T12:45:50.653

虽然有很多插件可以做这种事情 - 值得注意的是，如果您 VS2010+ 的本机功能可以在不存在匹配的构造函数时从模型调用生成构造函数，您可以使用简单的键盘快捷键为您完成工作.

即，如果我是一个存根类：

```
class MyClass{

} 
```

然后在某处的方法中，我写了这样的东西：

```
object p1, p2, p3;
//...  (get values for p1-3)
var a = new MyClass(p1, p2, p3); 
```

当这样的构造函数不存在时，会出现一个小帮助按钮。如果你点击它，或者按下`ALT+SHIFT+F10`（默认）你会得到一个菜单，其中一个选项是生成一个存根构造函数，然后它将更改`MyClass`代码如下：

```
class MyClass
{
    private object p1;
    private object p2;
    private object p3;

    public MyClass(object p1, object p2, object p3)
    {
        // TODO: Complete member initialization
        this.p1 = p1;
        this.p2 = p2;
        this.p3 = p3;
    }

} 
```

# android - Android Camera Activity 类 - 实现 SurfaceView - 问题

> ID：12159207
> 
> 赞同：0
> 
> 时间：2012-08-28T12:27:22.657
> 
> 标签：android, android-camera

我正在尝试使用 SurfaceView 类创建相机活动类，但它给了我错误。

这是我的错误日志猫

```
08-28 12:21:11.558: E/AndroidRuntime(989): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.cameraapp/com.example.cameraapp.CameraSurfaceView}: java.lang.InstantiationException: com.example.cameraapp.CameraSurfaceView
08-28 12:21:11.558: E/AndroidRuntime(989):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
08-28 12:21:11.558: E/AndroidRuntime(989):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-28 12:21:11.558: E/AndroidRuntime(989):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-28 12:21:11.558: E/AndroidRuntime(989):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-28 12:21:11.558: E/AndroidRuntime(989):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-28 12:21:11.558: E/AndroidRuntime(989):  at android.os.Looper.loop(Looper.java:123)
08-28 12:21:11.558: E/AndroidRuntime(989):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-28 12:21:11.558: E/AndroidRuntime(989):  at java.lang.reflect.Method.invokeNative(Native Method)
08-28 12:21:11.558: E/AndroidRuntime(989):  at java.lang.reflect.Method.invoke(Method.java:507)
08-28 12:21:11.558: E/AndroidRuntime(989):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-28 12:21:11.558: E/AndroidRuntime(989):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-28 12:21:11.558: E/AndroidRuntime(989):  at dalvik.system.NativeStart.main(Native Method)
08-28 12:21:11.558: E/AndroidRuntime(989): Caused by: java.lang.InstantiationException: com.example.cameraapp.CameraSurfaceView
08-28 12:21:11.558: E/AndroidRuntime(989):  at java.lang.Class.newInstanceImpl(Native Method)
08-28 12:21:11.558: E/AndroidRuntime(989):  at java.lang.Class.newInstance(Class.java:1409)
08-28 12:21:11.558: E/AndroidRuntime(989):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
08-28 12:21:11.558: E/AndroidRuntime(989):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
08-28 12:21:11.558: E/AndroidRuntime(989):  ... 11 more 
```

这是我的 CameraSurfaceActivity ：

```
package com.example.cameraapp;

import java.io.IOException;

import android.content.Context;
import android.view.SurfaceView;
import android.view.SurfaceHolder;
import android.hardware.Camera;

public class CameraSurfaceView extends SurfaceView implements SurfaceHolder.Callback
{
        private SurfaceHolder holder;
        private Camera camera;

        public CameraSurfaceView(Context context) 
        {
                super(context);

                //Initiate the Surface Holder properly
                this.holder = this.getHolder();
                this.holder.addCallback(this);
                this.holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        }

        public void surfaceCreated(SurfaceHolder holder) 
        {
                try
                {
                        //Open the Camera in preview mode
                        this.camera = Camera.open();
                        this.camera.setPreviewDisplay(this.holder);
                }
                catch(IOException ioe)
                {
                        ioe.printStackTrace(System.out);
                }
        }

        public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) 
        {
                // Now that the size is known, set up the camera parameters and begin
                // the preview.
                Camera.Parameters parameters = camera.getParameters();
                parameters.setPreviewSize(width, height);
                camera.setParameters(parameters);
                camera.startPreview();
        }

        public void surfaceDestroyed(SurfaceHolder holder) 
        {
                // Surface will be destroyed when replaced with a new screen
                //Always make sure to release the Camera instance
                camera.stopPreview();
                camera.release();
                camera = null;
        }

        public Camera getCamera()
        {
                return this.camera;
        }
} 
```

在 Manifest 中，我也定义了权限，

```
 android:targetSdkVersion="15" />
    <uses-feature android:name="android.hardware.camera" />
<uses-permission android:name="android.permission.CAMERA" /> 
```

现在，请指导我寻找可能的解决方案

谢谢

舒迈拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:33:13.663

错误发生在`camera.setParameters(width, height);`.

查看此主题：[Android 2.2 中的相机崩溃](https://stackoverflow.com/questions/3935193/camera-crashes-in-android-2-2)

> 获得最佳相机尺寸后需要设置相机的预览尺寸。以下是修复的详细信息和代码 - [http://code.google.com/p/android/issues/detail?id=7909](http://code.google.com/p/android/issues/detail?id=7909)

# jquery - Is there an event just before the radio button is about the be checked

> ID：12159212
> 
> 赞同：4
> 
> 时间：2012-08-28T12:27:47.177
> 
> 标签：jquery

This is the part of the code for one of the radio buttons:

```
$("#new").click(function(){
    if( $('#new').is(':checked') )
        $.jGrowl("You already have this option selected!", life: 1500});
    else
        changeOption(1);
}); 
```

Now, I understand that the `else` part will never run, because the radio button will be already checked on click event. What I'm wondering is, is there an event which would let me capture the state of the radio button (which is about to be clicked) and therefor determine if he is not yet clicked, and if so change the option to this newly selected one.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T12:38:58.003

将初始值存储在数据属性中，并将其用于更改：

```
$.each($("input[type='radio']"), function(i,e) {
    $(e).data('check', e.checked);
});

$("#new").on('click keyup', function(){
    if( $(this).data('check') ) {
        alert("You already have this option selected!");
    }else{
        alert("This option is unselected");
    }
    $(this).data('check', this.checked);
});​ 
```

[**小提琴**](http://jsfiddle.net/SCF5K/2/)

甚至适用于键盘事件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T13:09:42.533

请改用 mouseup 事件。

```
$("#new").mouseup(function(){
    if( $('#new').is(':checked') )
        $.jGrowl("You already have this option selected!", life: 1500});
    else
        changeOption(1);
}); 
```

[小提琴](http://jsfiddle.net/joplomacedo/SCF5K/)。

**编辑**
即使 mouseup 事件有效，使用 mousedown 事件似乎更合乎逻辑。[这是那个小提琴](http://jsfiddle.net/joplomacedo/SCF5K/3/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T12:31:11.197

mousedown 事件应该可以工作。它在单击元素时触发，在释放鼠标按钮之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T12:36:33.277

如果它可能未被选中，为什么不直接取消选中它？

```
$("#new").click(function(){
    if( $('#new').is(':checked') ){
        $.jGrowl("You already have this option selected!", life: 1500});
        $('#new').attr('checked', false);
    } else {
        changeOption(1);
        $('#new').attr('checked', true);
    }
}); 
```

# java - RFID based reading and writing in JAVA

> ID：12159215
> 
> 赞同：5
> 
> 时间：2012-08-28T12:27:57.300
> 
> 标签：java, rfid

I have to make a RFID based attendance system where i have to write into the database once reading from the tag and finding out which student it is.My query is how do i take input from the RFID tag.Does the input buffer classes of JAVA provided are enough for the input and output or do i have to take a different approach.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T17:04:54.510

您可以为此使用 Java Communications API。我正在做同样的事情，java comm api 和 rxtx 非常适合这个。我为此编写了一个程序。干得好：

```
import java.io.*;

import java.util.*;

import javax.comm.*;

public class SimpleRead implements Runnable, SerialPortEventListener {
    static CommPortIdentifier portId;
    static Enumeration portList;

    InputStream inputStream;
    SerialPort serialPort;
    Thread readThread;

    public static void main(String[] args) {
        portList = CommPortIdentifier.getPortIdentifiers();

        while (portList.hasMoreElements()) {
            portId = (CommPortIdentifier) portList.nextElement();
            if (portId.getPortType() == CommPortIdentifier.PORT_SERIAL) {
                 if (portId.getName().equals("COM13")) {
            //                if (portId.getName().equals("/dev/term/a")) {
                    SimpleRead reader = new SimpleRead();
                 }
            }
        }
    }

    public SimpleRead() {
        try {
            serialPort = (SerialPort) portId.open("SimpleReadApp", 2000);
        } catch (PortInUseException e) {System.out.println(e);}
        try {
            inputStream = serialPort.getInputStream();
        } catch (IOException e) {System.out.println(e);}
        try {
            serialPort.addEventListener(this);
        } catch (TooManyListenersException e) {
            System.out.println(e);
        }
        serialPort.notifyOnDataAvailable(true);
        try {
            serialPort.setSerialPortParams(9600, SerialPort.DATABITS_8, SerialPort.STOPBITS_1, SerialPort.PARITY_NONE);
        } catch (UnsupportedCommOperationException e) {
            System.out.println(e);
        }
        readThread = new Thread(this);
        readThread.start();
    }

    public void run() {
        try {
            Thread.sleep(20000);
        } catch (InterruptedException e) {System.out.println(e);}
    }

    public void serialEvent(SerialPortEvent event) {
        switch(event.getEventType()) {
            case SerialPortEvent.BI:
            case SerialPortEvent.OE:
            case SerialPortEvent.FE:
            case SerialPortEvent.PE:
            case SerialPortEvent.CD:
            case SerialPortEvent.CTS:
            case SerialPortEvent.DSR:
            case SerialPortEvent.RI:
            case SerialPortEvent.OUTPUT_BUFFER_EMPTY:
            break;
            case SerialPortEvent.DATA_AVAILABLE:
            byte[] readBuffer = new byte[20];

            try {
                while (inputStream.available() > 0) {
                    int numBytes = inputStream.read(readBuffer);
                }
                System.out.print(new String(readBuffer));
            } catch (IOException e) {System.out.println(e);}
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-09T07:08:51.483

It has been a last years since I worked with RFID (ThinkMagic reader) and Java but every reader I used at the time had its own proprietary API. The JAR was only accessible with the purchase of the reader. Times may have changed, may be open source readers / implementations but check out the vendor site for your current make and model. The APIs are very straightforward once you have access to them.

# c# - how to use Local resource file in client side

> ID：12159216
> 
> 赞同：1
> 
> 时间：2012-08-28T12:27:58.563
> 
> 标签：c#, asp.net

In my application I want to use a local resource file string on client side without any jquery and javascript etc.

Currently I'm using code behind but would like to use in client side

```
awec.Text= Localization.GetString("ReqLodgeName.Text", LocalResourceFile); 
```

like this. How do I use this resource file on client side for ASP control like

```
<asp:Label Id="awec" runat="server" Text='I want to access here' /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:34:17.720

假设您在 App_LocalResources 文件夹中的 LocalResourceFile 中有值为“我想在此处访问”的键“ReqLodgeName.Text”，然后您可以`meta:resourcekey attribute:`在标签中使用如下来检索文本：

```
<asp:Label id="awec" runat="server" meta:resourcekey="ReqLodgeName" Text='I want to access here' /> 
```

或者可以使用不同的语法显式本地化，而不是`meta:resourcekey`：

```
<asp:Label id="awec" Text="<%$ Resources:WebResources, ReqLodgeName %>" /> 
```

其中`WebResources`是包含 App_GlobalResources 文件夹中资源的 resx 文件的名称，并且`ReqLodgeName`是包含文本“我想在此处访问”的键名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T08:55:09.833

您可以使用以下内容。在后面的代码中添加公共方法：

```
public string MethodName(string RequiredResourceker)
{
    //return resource depending on RequiredResourceker parameter
} 
```

修改您的客户端控件如下：

```
Text="<%=MethodName("RequiredKey") %>" 
```

# php - PHP在验证失败后保留用户的文件上传路径

> ID：12159218
> 
> 赞同：1
> 
> 时间：2012-08-28T12:28:13.000
> 
> 标签：php, forms, validation, file-upload, filepath

我想问是否可以保留用户的上传路径，他从他的计算机中选择哪个文件将被上传，如路径“C:\Users\User1\Desktop\1.jpg”，我想学习的原因关于这一点是在他使用 php 提交表单后，当他验证失败时，我希望他不要重新选择它..

摘要：如果用户在其他字段的验证中失败，我如何以用户的形式保存路径：C:\Users\User1\Desktop\1.jpg

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T12:30:32.213

这不可能。浏览器只发送文件名，而不是完整路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:01:30.140

**最初的想法**

我只是发布这个，以防你想做一些疯狂的事情，为什么我不使用 javascript 或 JS 库来获取路径？

毕竟它是一个 DOM 元素。

那么浏览器是你的敌人！！为什么？出于安全原因，浏览器进行了安全重组，就像您猜到的那样，不要公开本地文件结构。

**问题** 您将如何处理文件路径？服务器端的文件路径如何方便？

哼，让我想想……还在想……

我能想到的唯一目的是在尝试黑客攻击之前进行发现。

字段验证可以是一个诚实的答案，但您可以通过创建一个使用 AJAX 将数据提交到服务器的表单来避免这种情况。

**什么？？**

是的，先生，使用 ajax 将数据作为帖子提交，验证它并向浏览器发送一条消息，说明表单是否已成功提交。

使用 ajax，当数据提交到服务器时，您不会离开页面

# android - 如何在 Android 中将音频文件添加到图像中

> ID：12159229
> 
> 赞同：0
> 
> 时间：2012-08-28T12:28:53.843
> 
> 标签：android, android-audiomanager, android-image

我想将音频文件添加到图像中。因此，当有人得到该图像时，他可以从中提取声音。我认为我们可以在图像标题中添加额外的数据。但我不知道如何在 Android 中进行这种标头处理。你能指导我吗...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:42:01.363

使用下面的代码，您可以在 Android 中向 JPEG 标头添加一个小注释。它仅适用于 JPEG。

```
final static String EXIF_TAG = "UserComment";

public static boolean setComment(String imagePath, String comment) {    
        try {
            ExifInterface exif = new ExifInterface(imagePath);
            exif.setAttribute(EXIF_TAG, comment);
            exif.saveAttributes();               
        } catch (IOException e) {
            e.printStackTrace();                
        }
        return true;

    } 
```

但问题是您不能将音频文件放在那里，因为数据流太大而无法放入标题中。

# php - 不可用时如何解决静态::调用？

> ID：12159230
> 
> 赞同：3
> 
> 时间：2012-08-28T12:28:55.560
> 
> 标签：php, static, late-static-binding

我的服务器上有一个 php 5.2（无法更新），它在`static::routin()`调用时会出错。如何解决？无论如何，有没有办法检测这种类型的呼叫是否可用，以便添加智能呼叫机制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:31:57.750

后期静态绑定仅适用于 PHP 5.3。要在 5.2 版中获得被调用的类名，您必须使用变通方法。

[从手册](http://php.net/lsb)：

```
As of PHP 5.3.0, PHP implements a feature called late static bindings which can be used to reference the called class in a context of static inheritance. 
```

[这里存在一种解决方法](http://il.php.net/lsb#100611)。

# jquery - 页面滚动上的动画元素

> ID：12159233
> 
> 赞同：1
> 
> 时间：2012-08-28T12:29:00.473
> 
> 标签：jquery, animation, scroll

好吧，我不确定我是否给出了合适的标题。其实我想要一个类似于[这个](https://victoriabeckham.landrover.com/INT)的效果。

有人可以建议我一个库/插件来实现相同或任何可以帮助我开始的东西吗？即使这样也会有很大帮助！显然，我不是要求直接的代码，只是正确的方向继续前进。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:33:45.850

也许这会帮助你：

[http://johnpolacek.github.com/scrollorama/](http://johnpolacek.github.com/scrollorama/)

[http://f6design.com/journal/2011/08/06/build-a-parallax-scrolling-website-interface-with-jquery-and-css/](http://f6design.com/journal/2011/08/06/build-a-parallax-scrolling-website-interface-with-jquery-and-css/)

# objective-c - How to keep a strong reference around?

> ID：12159235
> 
> 赞同：1
> 
> 时间：2012-08-28T12:29:02.263
> 
> 标签：objective-c, ios, cocoa-touch, automatic-ref-counting

I am wrapping AVAudioPlayer with a very simple class that allows me to specify and url and immediately play it and then call a completion block, like this:

```
[AudioPlayer playAudioWithURL:url
                  completionBlock:^{
                      //finished playing
                  }]; 
```

Reason why I wrote this is because it's very easy, simple. No need to implement delegate, etc...Problem is, this won't work. Doing this in a function will obviously allocate it on stack and it will be de-allocated soon, causing the sound to stop playing.

So, what's the best way to implement this kind of wrapper, to keep a reference around until the sound is finished playing? Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:37:46.220

You should not have any problem. What makes you think that it "will obviously allocate it on stack and it will be de-allocated soon"? Have you tried it? You obviously don't have a good understanding of how memory management in Objective-C works.

In your implementation of `playAudioWithURL:urlcompletionBlock:`, you will inevitably have some kind of asynchronous dispatch. This dispatch will inevitably have to retain your audio player object, in order to have it play stuff. So no, it won't get deallocated, unless you are doing something wrong.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T12:40:56.223

我不确定这将如何使用 ARC，因为您无法真正管理保留/释放周期。我已经使用包装器做了类似的事情`UIAlertView`，而我所做的——当然不使用 ARC——只是在方法`[self retain]`期间调用包装器类`show`，然后在调用委托方法时在包装器上，调用`completionBlock`and then `[self release]`。这保证了（只要您遵循保留/释放规则！）包装类将至少在调用回调之前保持活动状态，并且在通常情况下，一旦完成工作，包装器就会自行自杀。同样，由于您无法使用 ARC 管理保留周期，我不确定这是否可行。

您的替代方法可能是研究简单的子类`AVAudioPlayer`化或创建它的类别版本，将委托设置为自身。这可能能够让它存活足够长的时间，让它持续到完整的声音播放——尽管我对 ARC 的工作原理有点模糊。

祝你好运！

# mysql - 包含 LEFT JOIN 的查询中的 mysql 计数行挂起服务器

> ID：12159236
> 
> 赞同：0
> 
> 时间：2012-08-28T12:29:03.633
> 
> 标签：mysql, join, count, left-join, freeze

我有两张桌子。表`people`有 16500 行，`visits`有 17000 行。我的查询包含 LEFT JOIN 因为我必须链接`visits`到`people`. 我知道，如果有人记录没有访问记录，那么这些访问列将为 NULL。

这个简单的查询就像一个魅力。

```
SELECT * FROM people LEFT JOIN visits ON people.id = visits.id_people; 
```

但是**当我尝试计算**返回的行数时，**MySQL 会挂起**（或计数）30 多秒或**直到我杀死它**。这在生产环境中是不可接受的。

以下是我尝试使用的不同方法来计算结果行，但它们都具有相同的悬挂结果。

```
SELECT COUNT(*) FROM people LEFT JOIN visits ON people.id = visits.id_people;

SELECT SQL_CALC_FOUND_ROWS * FROM people LEFT JOIN visits ON people.id = visits.id_people;
SELECT FOUND_ROWS(); 
```

奇怪的是，这些方法在小型测试表（5 行和 5 行）上运行良好。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:51:30.177

如果您正在创建一个新的 MySQL 表，您可以使用 INDEX 术语指定要索引的列。索引是您可以在 MySQL 表上启用以提高性能的额外内容
[http://www.databasejournal.com/features/mysql/ article.php/1382791/Optimizing-MySQL-Queries-and-Indexes.htm](http://www.databasejournal.com/features/mysql/article.php/1382791/Optimizing-MySQL-Queries-and-Indexes.htm)
[http://www.tutorialspoint.com/mysql/mysql-indexes.htm](http://www.tutorialspoint.com/mysql/mysql-indexes.htm)查看这个它给了你很多想法..

干杯

# c - Printing a long long int as int outputs negative value

> ID：12159240
> 
> 赞同：-2
> 
> 时间：2012-08-28T12:29:22.883
> 
> 标签：c, casting, int, printf

Why does this simple C program print `-2147483648`?

```
#include <stdio.h>

int main(){
    printf("%i", (int)2147483648);
    return 0;
} 
```

Of course if I don't cast it and use `%lld` as the format specifier I get the expected output.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:31:40.437

`int`2147483647 是您平台上的最大值。

2147483648 == 0x80000000 与 -2147483648 具有相同的二进制表示，这就是你得到这个结果的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T12:30:25.627

将整数转换为较小的有符号类型时，如果值不能在新类型中表示，则行为是实现定义的：

> 6.3.1.3
> 
> 当整数类型的值转换为_Bool以外的其他整数类型时，如果该值可以用新类型表示，则保持不变。
> 
> [...]
> 
> 否则，新类型是有符号的，值不能在其中表示；结果要么是实现定义的，要么是产生实现定义的信号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:33:08.203

在 32 位二进制补码系统上，最大值`int`通常为：

```
2147483647 
```

所以

```
2147483648 
```

是一个`long`值。

当值不适合有符号类型时，将值转换为有符号类型是实现定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T12:31:30.620

当您转换为 时`int`，您（至少在您当前的平台上）转换为 32 位有符号数字。可以存储在该空间中的最大正值是 2147483647。当您添加 1 时，您将翻转到最大的负值，即输出。

当您使用 时`long long int`，我相信最小宽度是 64 位。您可以轻松地将值 2147483648 保存在该空间中，因此输出与您预期的一样。

# sql - Validation Error in Query yields no error, MS Access 2003 macro

> ID：12159241
> 
> 赞同：2
> 
> 时间：2012-08-28T12:29:25.240
> 
> 标签：sql, ms-access, vba, ms-access-2003

I've inherited a script that runs and inserts records from one database into another database.

Everything appeared to be working fine until a few days ago when people complained that a record wasn't being pulled from one system to the other system.

I looked at the macro which was set to run with a scheduled task on Windows Server 2003\. The macro sends it's logged output to SQL Server, and so I went there and looked for the appropriate log statements which read that one employee had been inserted into the database. However, when going to the other system, the employee that was reportedly transferred and inserted, was not there.

Upon further inspection pulled just the fields that were being selected from the one database, to the insert statement which added them to the other database.

When I tried to insert these values manually I received an SQL error that the fields were not allowed to be NULL or a zero length string. However, despite error checking in the script,

```
Function SomeFunc
   On Error GoTo The_Err

   DoCmd.SetWarnings False ' This statement seems a bit suspect to me...maybe fields being
                           ' null or a zero length are just warnings?  Seems wrong because
                           ' I don't want a warning when my record will not be inserted, 
                           ' I want an error.

   ....

   DoCmd.OpenQuery "qryAddNewEmp_S1toS2", acViewNormal, acAdd ' This is the statement that
                                                              ' selects from the one db
                                                              ' and inserts into the other db

...

The_Exit:

    Exit Function

The_Err:
    ' MsgBox Error$ ' You can turn this on and off.
    dmsg = "Error AUCP"
    RunCheck dmsg, errArea, 0, 0
    DoCmd.SetWarnings True
    Resume The_Exit

End Function 
```

Are the warnings turned off from `DoCmd.SetWarnings False` preventing the errors from being logged? Also should I just be doing the validation in the code instead, checking each of the values? It doesn't seem right to me, it seems like that's something that should be the responsibility of the database, since the database has that built in.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:31:45.553

而不是`DoCmd.OpenQuery`，使用这样的方法......

```
Dim db As DAO.Database
Set db = CurrentDb
db.Execute "qryAddNewEmp_S1toS2", dbFailOnError
Set db = Nothing 
```

那么您将没有理由`SetWarnings`关闭 ( `False`)。您的`INSERT`错误处理程序代码将捕获失败，并将记录错误（假设`RunCheck`是进行日志记录的自定义过程）。

# facebook - facebook发布动作但没有重定向

> ID：12159243
> 
> 赞同：0
> 
> 时间：2012-08-28T12:29:25.663
> 
> 标签：facebook, facebook-graph-api, facebook-social-plugins

我网站上的操作流程是：

*   用户在任何网站上都能找到他们想要的东西
*   他们单击一个浏览器按钮，该按钮打开一个包含我网站内容的 iframe，并允许用户将他们正在查看的项目添加到列表中
*   （此时我的系统会向数据库添加详细信息）
*   然后用户点击关闭 iframe 并继续做他们原来的事情

当用户选择添加内容时，我还想将操作发布到 Facebook 时间线

我使用下面的代码，它应该可以正常工作，但是，一旦它完成了任务，它就会重定向到一个预定的 url - 名为 $my_url

问题是我希望这个动作发布能够无缝地发生，因为我的用户打开了一个 iframe 弹出窗口，此时显示“ *****已成功添加到您的列表中”

那么我可以停止它重定向并使其只是后台操作吗？我无法重定向到用户已经在查看的内容，这是一个想法，因为您必须拥有 fb 应用程序中的 url

这是我正在使用的代码

```
$app_id = "_APP_ID_";
$app_secret = "_SECRET";
$my_url = "http://*******.com/pages/add.html";
$og_url = "http://*******.com/pages/view?id=$new_id";

$code = $_REQUEST["code"];

if(empty($code)) {
$dialog_url = "http://www.facebook.com/dialog/oauth?client_id="
. $app_id . "&redirect_uri=" . urlencode($my_url) 
. &scope=email,user_birthday,friends_birthday,user_likes,friends_likes,publish_stream";

echo("<script>top.location.href='" . $dialog_url . "'</script>");
                }

$token_url="https://graph.facebook.com/oauth/access_token?client_id="
. $app_id . "&redirect_uri=" . urlencode($my_url)
. "&client_secret=" . $app_secret
. "&code=" . $code;

$access_token = file_get_contents($token_url);

// remove the @expires
$params = null;
parse_str($access_token, $params);
$access_token_updated = $params['access_token'];

$post_data = "wish=" . $og_url . "&access_token=" . $access_token_updated;

// setup the curl
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, 'https://graph.facebook.com/me/*******:add');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);

// execute the curl
$result = curl_exec ($ch);
if(curl_error($ch))
{
//echo 'error:' . curl_error($ch) . "<br/>";
}
curl_close ($ch); 
```

还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T16:35:09.327

这就是我所做的...

更改 OP 中的所有代码并用此替换，一切正常：

```
include 'path_to/facebook.php';

$facebook = new Facebook(array(
'appId'=>'__APPID__',
'secret'=>'__SECRET__',
'cookie'=>true
));

if(!$facebook->getUser())
{
$url = $facebook->getLoginUrl(array('scope'=>'email,publish_actions'));
echo "<script> top.location=\"".$url."\"; </script>";
exit(0);
}

$params = array("OBJECT_NAME"=>"http://*****.com/view?id=$new_id","access_token"=>$facebook->getAccessToken());

$out = $facebook->api('/me/NAMESPACE:ACTION_NAME','post',$params); 
```

# jquery - RegExp Wildcard Selector

> ID：12159248
> 
> 赞同：1
> 
> 时间：2012-08-28T12:29:55.533
> 
> 标签：jquery, jquery-selectors

I got divs with IDs like that:

```
<div id="drop_12_213_1">
<div id="drop_12_213_2">
<div id="drop_12_213_3">
<div id="drop_13_213_4"> 
```

The only thing I know is `drop` and the `last number`(e.g. 1).

How can I select it whit jQuery?

`$('div[id^=drop_*_*_1]')` is not working?

What am I doing wrong?

TIA frgtv10

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:49:30.090

jQuery doesn't support regular expressions as selectors by default. There are some [filters](http://james.padolsey.com/javascript/regex-selector-for-jquery/) that could do that.

What you can do instead is use the [jQuery `filter()`](http://api.jquery.com/filter/) method.

```
$('div').filter(function() {
    return this.id.match(/^drop_\d+_\d+_1$/);
}).html("match"); 
```

This will basically check all the `div`s in your document and use the filter() method to see if it should match or not. I imagine this will not be the fastest way of doing, you could try to restrict the search as much as possible (e.g. `$('div', container_of_divs)`), but by the looks of what you're trying to parse, it seems result is more important than speed.

As a note, your regular expression is wrong too.

`drop_*_*_1` translates to something like:

*   `drop` followed by
*   `_` zero or more times,
*   `_` zero or more times,
*   `_1`

Which would match something like `drop_1` or `drop__1` or `drop___`...`_1`.

Links:

*   jsFiddle where I tried your sample: [http://jsfiddle.net/3fXke/](http://jsfiddle.net/3fXke/)
*   similar question on stackoverflow: [jQuery selector regular expressions](https://stackoverflow.com/questions/190253/jquery-selector-regular-expressions)

# java - 用 jquery 调用 vaadin 应用程序表单 php

> ID：12159255
> 
> 赞同：0
> 
> 时间：2012-08-28T12:30:26.283
> 
> 标签：java, javascript, jquery, vaadin

> **可能重复： Access** [-Control-Allow-Origin 不允许](https://stackoverflow.com/questions/10143093/origin-is-not-allowed-by-access-control-allow-origin)
> [访问控制允许 Origin 不允许Origin](https://stackoverflow.com/questions/9327218/access-control-allow-origin-not-allowed-by)

我使用此代码从 PHP 页面调用 vaadin 应用程序：

```
$.get(
    "http://192.168.10.106:8080/FTTBManager/?restartApplication",
    { activate: "1", username: "Ahmed1.Hiwa@gold" }, 
    function(result) {
        alert ("Result Was : " +result);
        $('#divout').html(result); 
    }, 
    "text" 
) 
```

但我收到以下错误：

> Access-Control-Allow-Origin 不允许 Origin localhost。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:36:32.623

同源策略不允许您向另一个域/端口/协议发出 ajax 请求，
并且 vaadin 应用程序不应该像那样工作
您可以尝试使用 iframe 将 vaadin 应用程序嵌入到您的 php 页面中

[你可以试试这个小提琴](http://jsfiddle.net/SPLHe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:36:35.990

/FTTBManager/ url 是 php 页面添加

```
header('Access-Control-Allow-Origin: *'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:35:50.740

您似乎正在尝试从与从 (localhost) 加载页面的服务器不同的服务器 (192.168.10.106:8080) 访问 URL。这称为跨域请求，并被大多数现代浏览器阻止。如果要允许此请求，目标服务器 (192.168.10.106:8080) 必须在其 HTTP 标头中提供此信息。

有关详细信息，请参阅[http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

请注意，即使目标服务器具有 CORS 标头，Internet Explorer 8 似乎也会阻止从本地主机到非本地主机的任何请求。因此，您可能希望在非本地主机服务器或不同浏览器中测试相同的内容。

# mysql - 从 3 个表中获取数据并显示漂亮的表

> ID：12159257
> 
> 赞同：0
> 
> 时间：2012-08-28T12:30:29.417
> 
> 标签：mysql, sql, pivot

我有 3 个表：用户、房间、room_access。在 users 中是：user1, user2, user3 在房间里：room1 room2 roomN（我有大约 10 个房间） room_access (room,uid): room1, 1; 房间2,1；房间N,1; 房间2,3；房间1,3；

所以。用户 3 可以访问房间 1，用户 2 可以访问房间等。在管理区域中，我想显示：![我需要它](../Images/35f21b34e07c777e80825d64bfb6c518.png)

基本上，表格房间内容显示表格标题，表格用户内容显示表格行。也许有办法可以在单个查询中选择所有数据？检查符号在哪里，我想在那里放置复选框。所以。我不知道怎么做那张桌子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:08:59.470

本质上，您正在尝试通过`PIVOT`. MySQL 没有`PIVOT`函数，因此您可以使用聚合函数和`CASE`语句的组合。如果您提前知道您将拥有的房间数量，您可以使用：

```
select u.uname,
  max(case when r.rname = 'room 1' then 'y' else 'n' end) room1,
  max(case when r.rname = 'room 2' then 'y' else 'n' end) room2,
  max(case when r.rname = 'room 3' then 'y' else 'n' end) room3
from users u
left join room_access ra
  on u.uid = ra.userid
left join rooms r
  on ra.roomid = r.rid
group by u.uname 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/c2622/3)

但是如果您有未知数量的房间，那么您可以使用[准备好的语句来创建动态版本](http://buysql.com/mysql/14-how-to-automate-pivot-tables.html)

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(CASE WHEN rname = ''',
      rname,
      ''' THEN ''Y'' ELSE ''N'' END) AS ',
      replace(rname, ' ', '')
    )
  ) INTO @sql
FROM rooms;

SET @sql = CONCAT('SELECT u.uname, ', @sql, ' 
                  from users u
                  left join room_access ra
                    on u.uid = ra.userid
                  left join rooms r
                    on ra.roomid = r.rid
                  group by u.uname');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/c2622/7)

# git - 在 git 中更新 master 分支

> ID：12159265
> 
> 赞同：0
> 
> 时间：2012-08-28T12:31:11.570
> 
> 标签：git

我是 git 新手，并且正在熟悉基本命令。

假设我克隆了某个项目的主分支，并在分支中进行了一些更改，并且我已将这些更改提交到该分支。如何使用当前分支更新相应的主分支？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:34:55.833

如果您的意思是“如何更新远程 git 存储库上的主分支？” 这是使用[git push](http://www.kernel.org/pub/software/scm/git/docs/git-push.html)完成的。

```
% git push origin master 
```

当然，这假设您的本地分支也被命名为“master”。

如果您的意思是“如何使用我在本地存储库中的单独分支上提交的更改来更新我的本地主分支？” 这是使用[git merge完成的](http://www.kernel.org/pub/software/scm/git/docs/git-merge.html)

```
% git checkout master
% git merge my-other-branch 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T12:36:29.147

```
git checkout master_branch
git merge fixed_branch 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:37:22.837

1\. 您将该本地分支推送到远程，例如**git push origin local_branch_name**。2\. 然后将您推送的分支合并到您的主分支（在结帐到主分支后），例如**git merge local_branch_name**

注意：local_branch_name 是您创建的分支，如沙箱等...

# javascript - 在jquery中对时间数组进行排序

> ID：12159272
> 
> 赞同：1
> 
> 时间：2012-08-28T12:31:33.037
> 
> 标签：javascript, jquery

想要对表单数组进行排序 ["01:00 am","06:00 pm" ,"12:00 pm","03:00 am","12:00 am"]

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:56:57.057

```
var times = ['01:00 am', '06:00 pm', '12:00 pm', '03:00 am', '12:00 am'];

times.sort(function (a, b) {
  return new Date('1970/01/01 ' + a) - new Date('1970/01/01 ' + b);
});

console.log(times); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:40:16.443

看看 Underscore.js SortBy 怎么样？ [http://underscorejs.org/#sortBy](http://underscorejs.org/#sortBy)

# wpf - WPF FlowDocumentPageViewer

> ID：12159275
> 
> 赞同：1
> 
> 时间：2012-08-28T12:31:51.170
> 
> 标签：wpf, flowdocument, documentpaginator

我有`DocumentPaginator`（包括页眉和页脚）的自定义实现，我想在`FlowDocumentPageViewer.`

我该怎么做？我试图在我的自定义 DocumentPaginator 中实现**IDocumentPaginatorSource**，但 FlowDocumentPageViewer 抛出异常：`"FlowDocumentPageViewer supports only FlowDocument as content."`

# android - 从 Titanium Appcelerator 中的地图中删除注释

> ID：12159277
> 
> 赞同：0
> 
> 时间：2012-08-28T12:31:55.037
> 
> 标签：android, titanium, smartphone, appcelerator-mobile

我使用 Titanium Appcelerator 制作了一个基于地图的应用程序。我在地图上显示用户的当前位置。我还有一个文本框，我在其中获取用户所需的位置，以便在地图上显示它。为了在地图上显示特定位置，我使用了注释并且工作正常。问题是，当文本框的值发生变化时，会在地图上创建另一个注释。我想要做的是，我想在放置新注释之前清除以前的注释。我的 app.js 文件如下所示：

## 应用程序.js：

```
//create the window
var win1 = Titanium.UI.createWindow({
title:'Exercise Tracker',
backgroundColor: '#000'
});
//goto location label
var location_label = Titanium.UI.createLabel({
left:'10',
top:'20',
text:'Go to: ',
font:{fontSize:20}
})
//goto location textbox
var location_textbox= Titanium.UI.createTextField({
top: '15',
left: '85',
width: '300',
height: '50',

})
//go button
var btnGo=Ti.UI.createButton(

    {           
        top:'15',
        left:'420',
        width:'50',
        height:'50',
        title:"Go"
    })

//create our mapview
var mapview = Titanium.Map.createView({
top: 110,
height: 'auto',
width: 'auto',
mapType: Titanium.Map.STANDARD_TYPE,
region: {latitude: 51.50015,
longitude:-0.12623,
latitudeDelta:0.5,
longitudeDelta:0.5},
animate: true,
regionFit: true,
userLocation: true,

});
// to get values from both the textbox      
btnGo.addEventListener('click', function (e){
//var addr=location_textbox.value;

var addr="";
addr = location_textbox.value;
annote(addr);
});

// to refrsh the page on click textbox  
location_textbox.addEventListener('click', function (e){

});

//--------------------------annotations--------------------------------
//var addr = 'Howrah';
function annote(addr)
{
var addr_fw=addr; 
Titanium.Geolocation.forwardGeocoder(addr,function(evt) {
var objLocationAnnotation = Titanium.Map.createAnnotation({
    latitude: evt.latitude,
    longitude: evt.longitude,
    title: addr_fw
});
mapview.addAnnotation(objLocationAnnotation);
});
} 
//--------------------------annotations--------------------------------
//add the map to the window
win1.add(mapview);
//set the distance filter
Titanium.Geolocation.distanceFilter = 10;

Titanium.Geolocation.getCurrentPosition(function(e)
{
if (e.error)
{
//if mapping location doesn't work, show an alert
alert('Sorry, but it seems geo location is not available on your device!');
return;
}
//get the properties from Titanium.GeoLocation
var longitude = e.coords.longitude;
var latitude = e.coords.latitude;
var altitude = e.coords.altitude;
var heading = e.coords.heading;
var accuracy = e.coords.accuracy;
var speed = e.coords.speed;
var timestamp = e.coords.timestamp;
var altitudeAccuracy = e.coords.altitudeAccuracy;
//apply the lat and lon properties to our mapview
mapview.region = {latitude: latitude,
longitude: longitude,
latitudeDelta:0.5,
longitudeDelta:0.5
};
});
//finally, open the window
win1.open();
//adding display properties to the main window      
win1.add(location_label);
win1.add(location_textbox);
win1.add(btnGo); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T13:09:07.453

使用 mapView.removeAnnotation `String/Titanium.Map.Annotation annotation`

它从地图中删除现有注释。

从此处阅读文档以获取更多详细信息。

[http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Map.View-method-removeAnnotation](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Map.View-method-removeAnnotation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T11:38:26.347

改变

```
mapview.addAnnotation(objLocationAnnotation); 
```

到

```
mapview.annotations = [objLocationAnnotation]; 
```

这将清除地图视图上的所有注释并将它们设置为一个新注释的新数组。

# jquery - .appendTo() 在 IE7/8 中被忽略

> ID：12159278
> 
> 赞同：0
> 
> 时间：2012-08-28T12:31:55.990
> 
> 标签：jquery, html, internet-explorer, append

我正在做一个 appendTo

```
$('<div id="lightbox"></div>').hide().appendTo('body').css('width', getWidth()); 
```

这适用于除 ie7 和 8 之外的所有其他浏览器。它不是 z-index 或 .hide() 或我已删除的 css。

它只是忽略了附加。有什么变通的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:53:36.013

我试过下面的代码`IE8`工作得很好。所以在 IE 上没有问题。请确保那是什么`getWidth()`以及它返回的正确值。

```
$('<div id="lightbox">Hi There</div>').appendTo('body').css('width', 800); 
```

**编辑 1**这对我来说也很好用`IE`。

```
function getWidth() {
    return 800;
}

$('<div id="lightbox">Hi There</div>').appendTo('body').css('width', getWidth()); 
```

# bash - 编写 bash 脚本以接受来自所有可能方向的参数和输入的最简单方法是什么（类似于 sort -k1 -r）？

> ID：12159280
> 
> 赞同：3
> 
> 时间：2012-08-28T12:32:02.140
> 
> 标签：bash, stdin, command-line-arguments

我想编写一个 bash 脚本，它可以处理类似于许多内置 bash 命令的参数和输入。比如像sort一样，它可以处理

```
sort -k 1 -r input.txt
sort input.txt -k 1 -r
cat input.txt | sort -k 1 -r
sort -k 1 -r < input.txt
sort -k 1 -r <(cat input.txt) 
```

我希望我的脚本能够以类似的方式处理参数和输入

```
myscript.sh -i 3 -b 4 input.txt
myscript.sh input.txt -i 3 -b 4
cat input.txt | myscript.sh -i 3 -b 4
myscript.sh -i 3 -b 4 < input.txt
myscript.sh -i 3 -b 4 <(cat input.txt) 
```

到目前为止，我只使用了“read”和“getopts”中的一些功能，并且认为如果我自己尝试这样做可能会出现问题。

为了让我更清楚地陈述我的问题，让 input.text 的内容为

```
aaa
bbb
ccc 
```

我想使用参数 i 和 b 中的值来做一些事情，但我将在这个例子中打印出来。我想要的样本输出是

```
i : 3
b : 4
aaa
bbb
ccc 
```

编写代码来处理上述示例命令以给出此输出的最佳方法是什么？

下面是从@chepner 的三明治思想中得到的代码，这是迄今为止最好的。

```
#!/bin/bash -l
die () {
    echo >&2 "[exception] $@"
    exit 1
}

#parse param
while getopts "i:b:" OPTION; do
  case "$OPTION" in
    i)
      i="$OPTARG"
      ;;
    b)
      b="$OPTARG"
      ;;
    *)
      die "unrecognized option"
      ;;
  esac
done

if [ -e tmpfile ] 
then 
    rm tmpfile 
fi

shift $(($OPTIND - 1))
echo "i : "$i
echo "b : "$b
cat $1 > tmpfile

if read -t 0; then
    cat >> tmpfile
fi

cat tmpfile 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T13:11:10.523

**执行摘要：**您可以`read -t 0`用来测试标准输入上是否有可用的输入。它将以状态 0 退出，数据在标准输入上立即可用（通过管道或重定向文件），如果没有，则为 1（例如，仍然连接到键盘）。然后，您可以根据是否需要从标准输入中读取来分支脚本。

```
if read -t 0; then
    # Do one thing
else
    # Do something else
fi 
```

* * *

对我来说，棘手的部分是编写脚本，这样如果你不向它传递任何东西，它就不会阻止读取标准输入。

这似乎有效；欢迎改进。首先，在标准输入上消费所有内容；然后处理作为参数给出的文件。

```
# The first call to read only succeeds when there is input
# available on standard input. It does not actually consume
# a line, though.
if read -t 0; then
    # Read standard input normally
    while read line; do
        echo $line
    done
fi

# I'll assume you populate an array called input files
# while processing your arguments
for file in "${inputfiles[@]"; do 
    cat $file
done 
```

这是一个毫无意义的包装器，`sort`只是演示了另一种将标准输入与其他输入文件相结合的方法：

```
if read -t 0; then
    cat | sort fileA fileB
else
    sort fileA file B
fi 
```

一个稍微有用的命令可能是`sandwich`，它在命令行上给出的两个文件之间输出其标准输入（如果有的话）。

```
#!/bin/bash

cat "$1"    # Output the first file
read -t 0 && cat # Pass through the standard input, if there is any
cat "$2"    # Output the second file

# cat "$1" - "$2" is almost the same, but requires standard input. 
```

一些电话`sandwich`可能是

```
$ sandwich header.txt footer.txt
$ sandwich header.txt footer.txt < body.txt
$ cat chapter1.txt chapter2.txt | sandwich <(echo "My header") <(echo "My footer") 
```

这不太行，所以还有改进的余地......

```
$ cat - | sandwich header.txt footer.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:03:26.237

```
cat input.txt | command
command < input.txt
command <(cat input.txt) 
```

从应用程序的角度来看，这三个是相同的，shell 执行重定向。应用程序只需读取标准输入。

```
command input.txt
cat input.txt | command 
```

这些仅在您处理的文件中有所不同，第一个是`input.txt`，第二个是标准输入，您可以使用它`-`，大多数 unix 命令都支持它。

```
# echo "X" | cat -
X 
```

所以你设置了默认值：`filename=-`，如果你读取文件名选项，你会覆盖这个变量。

# iphone - 在 xmpp 文件传输中配置代理（扩展 EXP-0065）

> ID：12159282
> 
> 赞同：1
> 
> 时间：2012-08-28T12:32:04.163
> 
> 标签：iphone, xmpp, openfire, xmppframework

```
 Server: testXyz  <br>
 Senderjid:user1@testXyz <br>
 Receiverjid:user2@testXyz

 RECV: 
 <iq xmlns="jabber:client" id="C8B91358-179B-4883-9EEC-A251D99E9AB5" to="user1@testXyz" from="user2@testXyz/Spark 2.6.3" type="error">
 <query xmlns="http://jabber.org/protocol/bytestreams" sid="C8B91358-179B-4883-9EEC-A251D99E9AB5" mode="tcp">
 <streamhost jid="proxy.Server" host="172.16.3.73" port="7777"/>
 </query><error code="406" type="MODIFY">
 <not-acceptable xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/>` 
```

我已经设置
`[TURNSocket setProxyCandidates:[NSArray arrayWithObjects:Server,nil]];`

从堆栈溢出的答案之一，我知道在 OpenFire 上，我需要使用系统属性设置代理的 ip `xmpp.proxy.externalip`。但是我已经在我的一台本地网络机器上安装了 open fire。那么，这里这个属性
的值应该是 多少？`xmpp.proxy.externalip`

以下已经尝试作为 'xmpp.proxy.externalip' 的值
1\. PC 的 IP（ipconfig 命令显示的本地 ip）
2\. myip 网站显示的 IP。

任何帮助，将不胜感激。

# c# - excel导入数据类型不正确的数据表

> ID：12159283
> 
> 赞同：0
> 
> 时间：2012-08-28T12:32:05.010
> 
> 标签：c#

我有一个要导入 DataTable 的 excel 文档。价格列有一个小数点后四位的数字，例如 1234.2300。在进行导入时，我看到列类型是 int32，并且我丢失了前导零，例如 1234.23。我想在导入时保留零。如何更改 DataTable 的 DataType ？

```
oConn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;data source=" + SavedFile + ";Extended Properties=Excel 12.0;");

                foreach (string sheet in sheets)
                {
                    if (!string.IsNullOrEmpty(sheet))
                    {
                        string query = string.Format("Select * from [{0}$]", sheet);
                        OleDbDataAdapter cmd = new OleDbDataAdapter(query, oConn);

                        oDS.Locale = CultureInfo.CurrentCulture;
                        cmd.Fill(oDS);
                        cmd = null;
                    }
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:38:26.343

通过右键单击列标题并选择“格式化单元格”并在新菜单中选择“文本”来更改 Excel 中的列类型。
完成此操作后，它将以字符串形式返回数字，因此将保留尾随零。

# javascript - 用于将大黑点 (•) 插入 html 文本区域的 Javascript 按钮

> ID：12159286
> 
> 赞同：1
> 
> 时间：2012-08-28T12:32:17.283
> 
> 标签：javascript, utf-8, textarea, special-characters, text-editor

我有一个`textarea`a`html form`并且我想要一个按钮来添加一个大黑点字符 (•)（这叫做子弹吗？）到这个`textarea`. 有可能`javascript`吗？

它也必须是一个`UTF8`字符。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T12:35:10.257

只需访问元素并将其附加到值。

```
<input
     type="button" 
     onclick="document.getElementById('myTextArea').value += '•'" 
     value="Add •"> 
```

观看[现场演示](http://jsfiddle.net/vtbMS/)。

为了简单起见，我没有编写[不显眼的 JS](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)。对于生产系统，您应该这样做。

> 它还需要是 UTF8 字符。

浏览器通常使用它们收到页面的编码提交表单。如果您希望返回 UTF-8 数据，请将您的页面作为 UTF-8 提供。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-11-28T07:57:56.423

您可以使用 html 实体作为`&bull;`

# matlab - matlab 的 k 均值是否会重新计算种子的集群成员？

> ID：12159288
> 
> 赞同：0
> 
> 时间：2012-08-28T12:32:25.430
> 
> 标签：matlab, statistics, cluster-analysis, k-means, unsupervised-learning

我无法找到`matlab's k-mean`有关种子的详细信息。如果 matlab 的 k-mean 重新计算 的集群分配`Xs seeds`，它是`data set X`矩阵的子集。

或者这些种子仅用于初始居中位置，在 k-means 集群分配阶段不考虑？

我想`semi-supervised clustering by seeds`通过 Sugato Basu et.al 这可能是一个幼稚的问题，但你的回答会让这种困惑更加清晰。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:18:02.137

您是否检查了文档：`doc kmeans`？他们在那里使用术语*初始簇质心位置*来指代种子。

特别是，查看用于指定种子的名为*start的参数和**replicates*参数。另请参阅*算法*部分，其中讨论了该过程的两个阶段（批量更新和在线更新）。最后，也许最好的一点是，您可以使用 直接查看代码`edit kmeans`，并使用调试器单步执行。

我不清楚你的问题到底是什么，但从上面我会回答，种子是根据“开始”参数计算一次，然后是批量更新和在线更新。根据 'replicates' 参数重复此操作。

我不知道“种子半监督聚类”是什么，但我很确定它不支持开箱即用。

# sed - 在模式之间每四行添加两行 - SED

> ID：12159289
> 
> 赞同：3
> 
> 时间：2012-08-28T12:32:27.063
> 
> 标签：sed

我需要一些关于 Sed 的帮助。我在 Windows 和 Mac OSX 上使用它。我需要 Sed 添加一个

```
</tr>
<tr> 
```

每4行，第一次`<tr>`找到后，就停止做`</tr>`

我只是找不到这样做的方法。每个文件最多有 20 个表，所以我需要自动执行...

从此改变

```
<div class="titulo"> TERMINAL CAPAO DA IMBUIA</div>
<div class="dataedia">
Válido a partir de: 30/07/2012 - 
DIA ÚTIL</div>
<table>
<tr>
<td>05:50</td>
<td>05:58</td>
<td>06:04</td>
<td>06:08</td>
<td>06:12</td>
<td>06:15</td>
<td>06:17</td>
<td>06:20</td>
<td>06:22</td>
<td>06:25</td>
<td>06:27</td>
<td>06:30</td>
<td>06:32</td>
<td>06:35</td>
<td>06:37</td>
<td>06:39</td>
<td>06:42</td>
<td>06:44</td>
<td>06:47</td>
<td>06:49</td>
<td>06:52</td>
<td>06:54</td>
<td>06:57</td>
<td>06:59</td>
<td>07:01</td>
<td>07:04</td>
<td>07:06</td>
<td>07:09</td>
<td>07:11</td>
<td>07:14</td>
<td>07:16</td>
<td>07:18</td>
<td>07:21</td>
<td>07:23</td>
<td>07:26</td>
<td>07:28</td>
<td>07:31</td>
<td>07:33</td>
<td>07:36</td>
<td>07:38</td>
</tr>
</table>
</div> 
```

对此

```
<div class="titulo"> TERMINAL CAPAO DA IMBUIA</div>
<div class="dataedia">
Válido a partir de: 30/07/2012 - 
DIA ÚTIL</div>
<table>
<tr>
<td>05:50</td>
<td>05:58</td>
<td>06:04</td>
<td>06:08</td>
</tr>
<tr>
<td>06:12</td>
<td>06:15</td>
<td>06:17</td>
<td>06:20</td>
</tr>
<tr>
<td>06:22</td>
<td>06:25</td>
<td>06:27</td>
<td>06:30</td>
</tr>
<tr>
<td>06:32</td>
<td>06:35</td>
<td>06:37</td>
<td>06:39</td>
</tr>
<tr>
<td>06:42</td>
<td>06:44</td>
<td>06:47</td>
<td>06:49</td>
</tr>
<tr>
<td>06:52</td>
<td>06:54</td>
<td>06:57</td>
<td>06:59</td>
</tr>
<tr>
<td>07:01</td>
<td>07:04</td>
<td>07:06</td>
<td>07:09</td>
</tr>
<tr>
<td>07:11</td>
<td>07:14</td>
<td>07:16</td>
<td>07:18</td>
</tr>
<tr>
<td>07:21</td>
<td>07:23</td>
<td>07:26</td>
<td>07:28</td>
</tr>
<tr>
<td>07:31</td>
<td>07:33</td>
<td>07:36</td>
<td>07:38</td>
</tr>
</table>
</div> 
```

有可能`sed`吗？如果没有，我应该使用什么工具？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:54:20.893

我不喜欢使用`sed`处理 HTML 代码的想法。说，试试这个：

内容`script.sed`：

```
## For every line between '<tr>' and '</tr>' do ...
/<tr>/,/<\/tr>/ {

    ## Omit range edges.
    /<\/\?tr>/ b;

    ## Append '<td>...</td>' to Hold Space (HS).
    H;  

    ## Get HS to Pattern Space (PS) to work with it.
    x;  

    ## If there are at least four newline characters means that exists four
    ## '<td>' tags too, so add a '<tr>' before them and a '</tr>' after them,
    ## print, and delete them (already processed).
    /\(\n[^\n]*\)\{4\}/ {
        s/^\(\n\)/<tr>\1/;
        s/$/\n<\/tr>/;
        p   
        s/^.*$//;
    }   

    ## Save the '<td>'s to HS again and read next line.
    x;  
    b;  
}

## Print all lines out of the range.
p; 
```

假设`infile`使用问题中发布的数据，运行如下脚本：

```
sed -nf script.sed infile 
```

这会产生：

```
<div class="titulo"> TERMINAL CAPAO DA IMBUIA</div>
<div class="dataedia">
Válido a partir de: 30/07/2012 - 
DIA ÚTIL</div>
<table>
<tr>
<td>05:50</td>
<td>05:58</td>
<td>06:04</td>
<td>06:08</td>
</tr>
<tr>
<td>06:12</td>
<td>06:15</td>
<td>06:17</td>
<td>06:20</td>
</tr>
<tr>
<td>06:22</td>
<td>06:25</td>
<td>06:27</td>
<td>06:30</td>
</tr>
<tr>
<td>06:32</td>
<td>06:35</td>
<td>06:37</td>
<td>06:39</td>
</tr>
<tr>
<td>06:42</td>
<td>06:44</td>
<td>06:47</td>
<td>06:49</td>
</tr>
<tr>
<td>06:52</td>
<td>06:54</td>
<td>06:57</td>
<td>06:59</td>
</tr>
<tr>
<td>07:01</td>
<td>07:04</td>
<td>07:06</td>
<td>07:09</td>
</tr>
<tr>
<td>07:11</td>
<td>07:14</td>
<td>07:16</td>
<td>07:18</td>
</tr>
<tr>
<td>07:21</td>
<td>07:23</td>
<td>07:26</td>
<td>07:28</td>
</tr>
<tr>
<td>07:31</td>
<td>07:33</td>
<td>07:36</td>
<td>07:38</td>
</tr>
</table>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:49:03.200

尝试`awk`

```
awk '{print}; /<td>/ && ++i==4 {print "</tr>\n<tr>"; i=0}' file 
```

*   打印行
*   如果是`<td>`则增加`i`
*   如果`i`是`4`打印`</tr><tr>`并重置`i`

* * *

使用给定输入进行测试会返回所需的输出，唯一的“问题”是额外`<tr></tr>`出现在列表末尾。这是可以修复的，但我在这里的时间不多了。当我回来时，如果您认为需要，我可以研究一下。

*...结果文件末尾的一部分*

```
<td>07:26</td>
<td>07:28</td>
</tr>
<tr>
<td>07:31</td>
<td>07:33</td>
<td>07:36</td>
<td>07:38</td>
</tr>
<tr>             <-- extra <tr></tr> here
</tr>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T12:58:34.803

您可以尝试使用正则表达式。您可以测试以下表达式： http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)

捕捉表达式：

```
?</td>.<td>.*?</td>.<td>.*?</td>.<td>.*?</td>)(?!.</tr>) 
```

替换表达式：

```
$1\n</tr>\n<tr> 
```

检查标志：

```
global, ignorecase, dotall 
```

结果：

```
<table>
<tr>
<td>05:50</td>
<td>05:58</td>
<td>06:04</td>
<td>06:08</td>
</tr>
<tr>
<td>06:12</td>
<td>06:15</td>
<td>06:17</td>
<td>06:20</td>
</tr>
<tr>
<td>06:22</td>
<td>06:25</td>
<td>06:27</td>
<td>06:30</td>
</tr>
<tr>
<td>06:32</td>
<td>06:35</td>
<td>06:37</td>
<td>06:39</td>
</tr>
<tr>
<td>06:42</td>
<td>06:44</td>
<td>06:47</td>
<td>06:49</td>
</tr>
<tr>
<td>06:52</td>
<td>06:54</td>
<td>06:57</td>
<td>06:59</td>
</tr>
<tr>
<td>07:01</td>
<td>07:04</td>
<td>07:06</td>
<td>07:09</td>
</tr>
<tr>
<td>07:11</td>
<td>07:14</td>
<td>07:16</td>
<td>07:18</td>
</tr>
<tr>
<td>07:21</td>
<td>07:23</td>
<td>07:26</td>
<td>07:28</td>
</tr>
<tr>
<td>07:31</td>
<td>07:33</td>
<td>07:36</td>
<td>07:38</td>
</tr>
</table>
</div> 
```

您可以使用 Notepad++ 之类的编辑器一次对多个文件进行批量替换（语法会略有不同）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T13:04:50.240

Perl解决方案，仍然使用正则表达式而不是解析HTML：

```
perl -pe '
    undef $inside if m{</tr>};
    if ($inside and ($. % 4) == $tr_line) {
        print "</tr>\n<tr>\n";
    }
    $inside = 1 if defined $tr_line;
    $tr_line = ($. + 1) % 4 if /<tr>/;
    ' file 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T13:14:56.600

```
sed '\!<td>!,\!</table!{N;N;N;i\
</tr>\
<tr>
}' input_file 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T21:58:23.473

使用[xsh](http://p3rl.org/XML/XSH2)：

```
open :F html file ;                                                   # Open as html.
while //table/tr[count(td)>4] wrap :U position()=8 tr //table/tr/td ; # Wrap four td's into a tr.
xmove :r //table/tr/tr before .. ;                                    # Unwrap the extra tr.
remove //table/tr[last()] ;                                           # Remove the extra tr. 
```

# mysql - 合并来自不同列的计算以获得平均值

> ID：12159296
> 
> 赞同：0
> 
> 时间：2012-08-28T12:32:50.920
> 
> 标签：mysql, zend-framework, join, zend-db-table

我想计算表中每辆车的平均油耗。我有一个`spendforfuel`带有`IdCar`, `Odometer`,`Quantity`字段的表。里程表字段是当前里程。数量是当前里程和上次检测到的里程之间消耗的升数。

这是我的公式：

```
100 / ( (MAX(Odometer) - MIN(Odometer)) / (SUM(Quantity) - FIRST(Quantity) ) ) 
```

这是我所做的：

```
$q = $this->db->select()
                ->from(array('s1' => 'spendforfuel'), array('fuel_consumption' => '100 / ( s2.odometer_sum / ( s3.quantity_sum - s4.first_quantity ) )'))
                ->joinLeft(array('s2' => 'spendforfuel'), 's2.IdCar = s1.IdCar', array('odometer_sum' => 'MAX(s2.Odometer) - MIN(s2.Odometer)'))
                ->joinLeft(array('s3' => 'spendforfuel'), 's3.IdCar = s1.IdCar', array('quantity_sum' => 'SUM(s3.Quantity)'))
                ->joinLeft(array('s4' => 'spendforfuel'), 's4.IdCar = s1.IdCar', array('first_quantity' => 's4.Quantity'))
                ->where('s4.Odometer > ?', 0)
                ->limit('1 ASC')
                ->group('s1.CarId')
                ->where('s1.CarId = ?', 76); 
```

我不确定我是否必须使用连接。有任何想法吗？

# c++ - 虚函数 c++

> ID：12159297
> 
> 赞同：0
> 
> 时间：2012-08-28T12:32:55.583
> 
> 标签：c++, polymorphism

嗨，我有 1 个关于 C++ 虚函数的问题...

```
class base{
 public :
    base()  { a=5;}
    int a;
    virtual void print()=0;
    int get(){return a;}
    int get_var(){ a=5;  return a;}
};  

int main(void){
    base *p;
    cout <<"Get Call - No assign\n";
    cout <<"Value is :: "<<p->get()<<endl;
    cout <<"Get Call - assign value\n";
    cout <<"Value is :: "<<p->get_var()<<endl;
    return 0;
} 
```

它的 o/p 是 :: Get Call - No assign Value 是 :: 5 Segmentation Fault

我不明白这种行为？
我能想到的一个原因是——因为基础是抽象类，即没有完整的实现，所以当我做 a=5 时它会崩溃。
但在第一次通话中，我也在使用一个，所以为什么它没有在那里崩溃
请帮助....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:35:47.767

**根本原因：**

您的指针`p`不指向任何有效对象，因此当您通过调用其上的成员函数来解除对它的引用时会 发生崩溃（实际上它是一个***未定义的行为）。***

当您声明一个指针仅指向任何随机地址时，您有责任使其指向一个有效对象，以便能够对指针执行任何有意义的操作。

**解决方案：**

你需要：

```
base *p = new base; 
```

或者

```
base obj;
base *p = &obj; 
```

要使上述任何一个工作，`base`必须是非抽象类。在您的示例`base`中是一个抽象类（*具有至少一个纯虚函数*的类），对于这样的类，您不能创建它的任何对象（*调用它的构造函数*）。
因此，要解决这个问题，您需要创建一个派生自抽象类的派生类`base`，然后为派生类实现纯虚函数`print()`，从而使派生类成为具体类而不是抽象类。然后你可以查看工作中的动态调度（*我猜那是你的目标*）

```
class Derived:public base
{
    public:
        virtual void print()
        {
            //Do some prints
        }
};

int main()
{
    Derived obj;
    Base *ptr = &obj;

    //or

    Base *ptr2 = new Derived;

    //.....Rest of your program as is
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T12:36:25.787

您没有初始化`base *p;`，因此在其上调用方法是未定义的行为（在您的情况下是段错误）。

另一方面，由于它`base`是一个抽象类，因此无法对其进行初始化。您必须提供在派生类`print`中`base`或派生类中的定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T12:38:18.413

> 我能想到的一个原因是——因为基础是抽象类，即没有完整的实现，所以当我做 a=5 时它会崩溃。

不，崩溃是由取消引用未初始化的指针`p`（技术上未定义的行为）引起的。作为`base`抽象，没有办法创建它的实例：

```
base b;             // Illegal
base* p = new base; // Illegal 
```

并且发布的代码中没有派生的具体类。`base`您需要从纯虚函数派生和实现`print()`。类中的[析构函数`base`也应该是`virtual`](http://www.parashift.com/c++-faq-lite/virtual-dtors.html).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T12:38:26.587

`p`是一个未初始化的指针。所以用它做几乎任何事情都是未定义的行为。

而“为什么不早点崩溃”的答案通常是“运气”（好坏，取决于你的看法）。具有未定义行为的程序可以做任何事情：似乎可以工作、崩溃、让你的鼠标爆炸等等。

# c# - 在没有 tnsname.ora 的情况下连接到 Oracle

> ID：12159298
> 
> 赞同：1
> 
> 时间：2012-08-28T12:32:56.923
> 
> 标签：c#, .net, oracle

我需要从我的 .Net 应用程序连接到 oracle。

我正在考虑使用[ODP.NET](http://www.oracle.com/technetwork/topics/dotnet/whatsnew/index.html)

有没有办法在不依赖`tnsnames.ora`文件的情况下连接到 Oracle？我问的原因是因为我将有数百个不同的连接，我不想依赖那个文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T12:37:42.510

是的，如果您使用包含`tnsname.ora`.

* * *

假设您的 tnsname 条目如下所示：

```
 YourTnsName =  
  (DESCRIPTION =  
    (ADDRESS_LIST =  
      (ADDRESS = (PROTOCOL = TCP)(HOST = YourHost)(PORT = 1521))  
    )  
    (CONNECT_DATA =  
      (SID  = YourSid)  
    )  
  ) 
```

而不是`YourTnsName`在连接字符串中使用，你可以这样写：

```
var constr = new OracleConnectionStringBuilder()
             {
                DataSource = @"(DESCRIPTION =(ADDRESS_LIST =(ADDRESS = (PROTOCOL = TCP)(HOST = YourHost)(PORT = 1521)))(CONNECT_DATA =(SID  = YourSid)))",
                UserID = "userid",
                Password = "password",
             }.ConnectionString;

using (var con = new OracleConnection(constr))
{ 
    ... 
} 
```

因此不需要进入`tnsname.ora`。

# asp.net-mvc-3 - 在一个视图上提交具有多个字段集的按钮

> ID：12159299
> 
> 赞同：0
> 
> 时间：2012-08-28T12:32:57.120
> 
> 标签：asp.net-mvc-3, submit, http-post, fieldset

我有一个最终目标是成为用户创建表单的视图。它的结构如下：

```
<fieldset>
@Html.DropDownList("first dropdown")
</fieldset>

<fieldset id="exists">
@Html.DropDownList("seconddropdown")
@Html.DropDownList("third dropdown")
@Html.DropDownList("fourth dropdown")
<input type="submit" value="Create User"/>
</fieldset>

<fieldset id="new">
@Html.DropDownList("dropdown")
@Html.DropDownList("dropdown")
@Html.DropDownList("dropdown")
<input type="submit" value="Create User"/>
</fieldset>

<script>
//script here shows and hides fieldsets depending on value chosen in first dropdown
</script> 
```

根据在第一个下拉列表中选择的值，将显示 fieldset 存在或 fieldset new。他们都以不同的方式与数据库交互，所以我真的需要能够为每个单独处理提交操作。我尝试在每个字段集中创建一个提交，但控制器操作从未被命中。

我显然错过了 MVC 提交按钮的标记，所以任何人都可以帮助我理解这些工作是如何工作的，以及如何在一个视图上创建多个（和单独的）提交可能性。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:40:32.543

您可以有两个表单，每个表单都发布到不同的操作...然后提交将仅提交该表单中的表单值...

例如

```
@using (Html.BeginForm("Login", "Account", FormMethod.Post))
{
    <fieldset id="exists">
@Html.DropDownList("seconddropdown")
@Html.DropDownList("third dropdown")
@Html.DropDownList("fourth dropdown")
<input type="submit" value="Log in"/>
</fieldset>
}

@using (Html.BeginForm("Create", "Account", FormMethod.Post))
{
<fieldset id="new">
@Html.DropDownList("dropdown")
@Html.DropDownList("dropdown")
@Html.DropDownList("dropdown")
<input type="submit" value="Create"/>
</fieldset>
} 
```

# javascript - 使用从 W3C Geolocation 返回的位置

> ID：12159304
> 
> 赞同：1
> 
> 时间：2012-08-28T12:33:08.190
> 
> 标签：javascript, geolocation, w3c-geolocation

FindMyLocation 定义如下：

```
function FindMyLocation(callback) {
if (navigator.geolocation) {

    var locationMarker = null;
    if (locationMarker) {
        return;
    }
    navigator.geolocation.getCurrentPosition(
        function(position){
           pos = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
           map.setCenter(new google.maps.LatLng(position.coords.latitude,position.coords.longitude));
           addMarker(
            position.coords.latitude,
            position.coords.longitude,
            "You are here"
            );
            setTimeout(function(window) {
                callback.call(pos);
            }, 1000);
        },
        function (geoPositionError) {
        switch (geoPositionError.code) {
            case 0:
                alert('An unknown error occurred, sorry');
                break;
            case 1:
                alert('Permission to use Geolocation was denied');
                break;
            case 2:
                alert('Couldn\'t find you...');
                break;
            case 3:
                alert('The Geolocation request took too long and timed out');
                break;
            default:
        }
    },
     timeoutCallback, 10, {maximumAge:60000, timeout:50000, enableHighAccuracy:true}
    );

var positionTimer = navigator.geolocation.watchPosition(
    function( position ){
        updateMarker(
            locationMarker,
            position.coords.latitude,
            position.coords.longitude,
            "Updated / Accurate Position"
        );
    }
);
setTimeout(
    function(){
        // Clear the position watcher.
        navigator.geolocation.clearWatch( positionTimer );
    },
    (1000 * 60 * 5)
);

} else {
    alert("Your phone browser doesn't support geolocation.");
}
}
function timeoutCallback(){
   alert('Hi there! we are trying to locate you but you have not answered the security    question yet.\n\nPlease choose "Share My Location" to enable us to find you.');
 } 
```

我的主页中运行了这段代码：

```
FindMyLocation(function() {
 myPos = this;
}); 
```

当我在回调中 console.log myPos 时，我看到了该值。但是，我希望能够在此回调之外使用 myPos 来进行距离计算。现在，它不会工作。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:56:44.610

```
 <script lang="JavaScript" type="text/javascript">
                        $.post(window.baseUrl + 'includes/tagmap.php', 
                              { name:"<?php echo $value->business_name; ?>",
                                x: "<?php echo $value->x; ?>", 
                                y: "<?php echo $value->y; ?>",
                                action:"populate"}, function(data){
                                    var locdata = $.parseJSON(data);        
                                    function ShowMyLocation() {
                                        FindMyLocation(function(myPos) {
                                            myPos = this;                                                                                                                                     addMarker(locdata.x,locdata.y,locdata.name);
                                        })
                                        FindMyLocation();
                                    }
                                    ShowMyLocation();                                  
                              });                                  
                    </script> 
```

# android - 在 Android 原生 ndk 中记录变量的值

> ID：12159316
> 
> 赞同：53
> 
> 时间：2012-08-28T12:34:00.340
> 
> 标签：android, c++, debugging, logging, android-ndk

我在 Android NDK 中使用*C++*设置日志记录。

我可以像这样向 logcat 打印一条消息：

```
__android_log_write(ANDROID_LOG_INFO, "tag here", "message here"); 
```

现在假设我有一个名为*testint*的整数。如何打印这个 int 的值？

像这样的东西打印地址，但我想要这个值。*我在C++*中没有找到任何关于如何执行此操作的内容。谢谢你的帮助！

```
__android_log_print(ANDROID_LOG_INFO, "sometag", "%p", *test); 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-11-21T02:10:33.880

这是我见过的最简洁的方式：

```
#include <android/log.h>

#define  LOG_TAG    "someTag"

#define  LOGE(...)  __android_log_print(ANDROID_LOG_ERROR,LOG_TAG,__VA_ARGS__)
#define  LOGW(...)  __android_log_print(ANDROID_LOG_WARN,LOG_TAG,__VA_ARGS__)
#define  LOGD(...)  __android_log_print(ANDROID_LOG_DEBUG,LOG_TAG,__VA_ARGS__)
#define  LOGI(...)  __android_log_print(ANDROID_LOG_INFO,LOG_TAG,__VA_ARGS__)

...

// Now you can log very simply like this:
int foo = 42;
LOGD( "This is a number from JNI: %d", foo ); 
```

此外，请确保链接到 Android.mk 中的日志库：

```
LOCAL_LDLIBS    := -llog 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-08-28T12:39:21.760

您可以使用`__android_log_print`which 使用类似`sprintf`- 的语法将数据格式化为字符串。

```
__android_log_print(ANDROID_LOG_INFO, "sometag", "test int = %d", testInt); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-08-28T12:46:59.880

利用您可用的可变参数日志打印功能。对于我自己的代码，我提供了一个 LogInfo() 函数以使其变得简单。当然，这里有几个选项可供您使用。

```
void LogInfo(const char *sTag, const char *fmt, ...)
{
  va_list ap;
  va_start(ap, fmt);
  __android_log_vprint(ANDROID_LOG_INFO, sTag, fmt, ap);
  va_end(ap);
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-08-29T07:03:35.790

__android_log_print() 采用格式字符串和变量参数列表。您要打印出带符号整数的格式说明符是“%d”。所以像这样的东西就是你想要的：

```
int foo = 42;
__android_log_print(ANDROID_LOG_INFO, "SomeTag", "foo is %d", foo); 
```

有关格式字符串的更多信息，您可以查看[sprintf 手册](http://linux.die.net/man/3/sprintf)。

# android - 控制在 Android 上启动的应用程序

> ID：12159317
> 
> 赞同：0
> 
> 时间：2012-08-28T12:34:00.287
> 
> 标签：android, password-protection

我想构建一个 Android 应用程序，通过某种保护机制（例如密码）保护特定应用程序。我在互联网上搜索如何实现在 Android 上控制应用程序启动，但我找不到答案。

我希望在特定的应用程序启动时，用户可以查看他需要输入的内容，例如一些密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:10:20.603

您可以有一个要求用户名密码等的启动活动。通过将其与数据库匹配，您可以启动新活动，或者您可以在不匹配时关闭应用程序。

# iphone - 真的很奇怪“[UIAccessibilityBundle setWhatever:]：无法识别的选择器发送到实例 0xnnnnnnn”

> ID：12159319
> 
> 赞同：1
> 
> 时间：2012-08-28T12:34:01.280
> 
> 标签：iphone, objective-c, ios, xcode, llvm

所以，我对我的应用程序中发生的一个非常奇怪的崩溃感到困惑。

**背景**：我有一个类*CustomButton*覆盖*UIButton*。简而言之，界面如下所示：

```
@interface CustomButton : UIButton
@property (nonatomic, getter = isLoading) BOOL loading;
@end 
```

执行：

```
@implementation CustomButton
@synthesize loading = loading_;

- (id)init {
if ((self = [UIButton buttonWithType:UIButtonTypeCustom])) {
    [self setTitle:NSLocalizedString(@"My Button", nil) forState:UIControlStateNormal];
    [[self titleLabel] setShadowColor:[UIColor blackColor]];
    [[self titleLabel] setShadowOffset:CGSizeMake(0, -1)];

    [self setContentEdgeInsets:UIEdgeInsetsMake(0, 77, 0, 30)];

    UIImage *backgroundImage = [[UIImage imageNamed:@"back.png"] stretchableImageWithLeftCapWidth:77 topCapHeight:0];
    UIImage *highlightedBackgroundImage = [[UIImage imageNamed:@"back_highlighted.png"] stretchableImageWithLeftCapWidth:77 topCapHeight:0];
    [self setBackgroundImage:backgroundImage forState:UIControlStateNormal];
    [self setBackgroundImage:highlightedBackgroundImage forState:UIControlStateHighlighted];

    [self sizeToFit];
    }

    return self;
}

- (void)setLoading:(BOOL)loading {

    if (loading_ != loading) {
       // Do fancy things
    }
}
@end 
```

**问题**：我试图在一个类中使用按钮，所以我有属性等等：

```
...
@property(nonatomic, strong) CustomButton *customButton;
...
@syntesize customButton = customButton_;
...
- (void)aMethod {
  self.customButton.loading = YES;
}
... 
```

当然，该按钮已初始化。然后，在执行语句**self.bookButton.loading = YES**时，我收到此错误

```
 2012-08-28 12:54:25.091 MyApp[9465:15803] -[UIAccessibilityBundle
 setLoading:]: unrecognized selector sent to instance 0x8650cc0
 2012-08-28 12:54:25.091 MyApp[9465:15803] *** Terminating app due
 to uncaught exception 'NSInvalidArgumentException', reason:
 '-[UIAccessibilityBundle setLoading:]: unrecognized selector sent to
 instance 0x8650cc0'
 *** First throw call stack: (0x1ead022 0x203ecd6 0x1eaecbd 0x1e13ed0 0x1e13cb2 0x26bf5 0x257ce 0xfa938f 0xfa96a4 0xfa99a7 0xfb8aea
 0x11600be 0x11603c7 0x1160436 0xf10e49 0xf10f34 0xc5bcaac 0xe04b54
 0x272e509 0x1de4803 0x1de3d84 0x1de3c9b 0x27887d8 0x278888a 0xee0626
 0x14cce 0x27b5 0x1) terminate called throwing an exception 
```

老实说，我不知道要寻找什么。这要么是非常愚蠢的事情，要么是非常微妙的事情。当然，我已经在 google/stackoverflow 上进行了搜索，但没有找到答案。据我所知，当对象不“理解”发送的消息时，通常会发生该错误，但情况并非如此。我什至没有收到编译器的警告。

如果您甚至对我可以寻找的内容有所了解，或者您想了解更多详细信息，请告诉我，谢谢。

**编辑**：忘记指定我正在使用 ARC。

**更新**：在下面的答案中，*菲利普米尔斯*说这可能是一个过早的内存释放问题。这是一个很好的观点，但 Instrument 没有找到任何僵尸。此外，我在 crashy 语句之前放置了一个日志，在那里我尝试打印有关 CustomButton 对象的信息以及与 UIButton 相关的一些内容，例如标题。一切看起来都很好。标题是我设置的那个，框架在那里等等......所以我相信这个对象（一个实际的 UIButton）存在并且它也是预期的那个。唯一的事情就是搞砸了一切的“加载”属性。

**解决方案**：**init**方法是问题的根源。它不是初始化按钮子类的实例，而是初始化 UIButton 的实例。因此，因此，找不到“加载”属性。用**initWithFrame**替换**init**并使用标准过程覆盖初始化程序，一切都很好。但是，仍然是一个谜，我将**UIAccessibilityBundle**作为错误的根源而不是**UIButton**的原因。

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:39:23.183

几乎可以肯定该按钮被过早释放并且其地址被重新用于`UIAccessibilityBundle`对象。尝试打开僵尸（或运行 Instruments 来寻找僵尸），如果内存管理问题不明显，您应该会看到更好的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:42:10.450

尝试

```
@interface CustomButton : UIButton
@property (nonatomic, assign) BOOL loading;
@end 
```

和

```
@implementation CustomButton
@synthesize loading = _loading;

- (id)init {
     ....
  }

- (void)setLoading:(BOOL)loading {

    if (self.loading != loading) {
       // Do fancy things
    }
}
@end 
```

对于所有其他加载实例，请使用 self.loading。

在没有看到代码的其他部分的情况下，这是我最好的猜测。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T12:43:46.763

你`(CustomButton *)`在你的应用程序中投射任何东西吗？仔细检查转换 - 您可能错误地转换了不是 a 的东西`CustomButton`并将结果存储在`customButton`属性中。******

# actionscript-3 - 减少可调整大小的 Flex LabelItemRenderer 中的生命周期验证调用

> ID：12159320
> 
> 赞同：0
> 
> 时间：2012-08-28T12:34:05.000
> 
> 标签：actionscript-3, apache-flex, air, flex4, itemrenderer

我对该`LabelItemRenderer`类进行了子类化，以便为我的移动应用程序中的火花列表创建一个可扩展的渲染器。

当用户选择一个项目时，渲染器的大小会增加，并显示额外的数据。渲染器基本上是这样的（我这里去掉了无关紧要的部分，所以这基本上是伪代码）。

```
public class PositionsGridRenderer extends LabelItemRenderer
{
    public function PositionsGridRenderer() {
        super();
        addEventListener(MouseEvent.CLICK, expandHandler);
    }

    protected override function createChildren():void {
        super.createChildren();

        _dg = new DataGroup();
        _dg.visible = false;
        addChild(_dg);
    }

    private function expandHandler(event:Event):void {
        if(_gridVisible) {
            if(!_detailClicked) {
                _dg.visible = false;
                _gridVisible = false;
            }
            _detailClicked = false;
        } else {
            _dg.visible = true;
            _gridVisible = true;
        }
    }

    public override function set data(value:Object):void {
        if(!value) return;

        super.data = value;

        var pos:Position = data as Position;

        label = pos.positionName;
        _dg.dataProvider = pos.positionSymbols;
    }

    protected override function measure():void {
        !_gridVisible ? measuredHeight = 30 : measuredHeight = 30 + getElementPreferredHeight(_dg);
        this.height = measuredHeight;
    }

    protected override function layoutContents(unscaledWidth:Number, unscaledHeight:Number):void {
        setElementSize(labelDisplay, unscaledWidth, 30);
        setElementPosition(labelDisplay, 10,10);
        if(_gridVisible) {
            setElementSize(_dg, unscaledWidth, getElementPreferredHeight(_dg));
            setElementPosition(_dg, 0, 30);

        } else {
            setElementSize(_dg, unscaledWidth, 0);
        }

        invalidateSize();
    }
} 
```

}

按预期工作，我只是想知道是否有办法减少这个渲染器在我扩展它时所做的验证调用量。如果点击展开，则`layoutContents`和`measure`函数都会按以下顺序调用3次：layoutcontents -> measure, layoutcontens -> measure, layoutcontents -> measure。

我会理解它们被调用一次，因为我使大小无效，但三次似乎很奇怪。有谁知道为什么会发生这种情况，或者甚至可能如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:33:35.387

真正的问题是为什么组件要经历三个完整的渲染器周期？经过一番讨论，这就是我们遇到的：

1.  第一次触发无效循环是当鼠标按下时，或者可能发生触摸开始事件。这会将组件置于悬停状态；这会导致组件发生视觉变化。
2.  第二次触发无效循环是在选择项目时。这会使渲染器处于关闭状态；导致绘制不同的视觉指示器。
3.  第三个无效循环是由组件自己的代码引起的；当 layoutContents() 调用 invalidatesize()

# php - Zend_Validate_Callback 覆盖 self::INVALID_VALUE 消息

> ID：12159323
> 
> 赞同：1
> 
> 时间：2012-08-28T12:34:08.563
> 
> 标签：php, validation, zend-framework, zend-validate

我写了这段代码，效果很好。我唯一无法更改的是默认回调错误消息“const INVALID_VALUE = 'callbackValue';” 在 Zend_Validate_Callback 中。

```
$validators['ip'][] = array('Ip');
$validators['ip'][] = array('Callback', array('callback' => array($this->_ip, 'ipUnique')));
$filters = array('*' => 'StringTrim');
$input = new Zend_Filter_Input($filters, $validators, $_POST);
$input->setOptions(array('presence' => 'required')); 

if($input->isValid()){
    // all okay
}
else{
    return $input->getMessages();
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T16:18:01.720

在查看 ZF 源代码后找到了我的问题的答案，你不能在基于数组的结构中覆盖它的消息，选项“消息”在 Zend_Validate_Callback 的构造函数中丢失了。Zend_Validate_Abstract 有一个公共方法“setMessages”，它可以很好地覆盖回调错误消息。

最终代码：

```
$callbackValidator = new Zend_Validate_Callback(array($this->_ip, 'ipUnique'));
$callbackValidator->setMessages(array(Zend_Validate_Callback::INVALID_VALUE => "'%value%' is not a unique IP address"));

$validators['ip'][] = array('Ip');
$validators['ip'][] = $callbackValidator;
$filters = array('*' => 'StringTrim');
$input = new Zend_Filter_Input($filters, $validators, $_POST);
$input->setOptions(array('presence' => 'required')); 

if($input->isValid()){
    // all okay
}
else{
    return $input->getMessages();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:42:02.397

该类看起来像这样，您只能从源代码中更改 const 值。如果您想`Zend_Validate_Callback`更改它，请在代码中找到并更改它。

```
class Zend_Validate_Callback extends Zend_Validate_Abstract implements Zend_Validate_Interface{
/* Constants */

const INVALID_CALLBACK="callbackInvalid"; <-- here you change the value
const INVALID_VALUE="callbackValue"; <-- here you change the value
/* Public methods defined in class */

public function __construct (string|array $callback=null)
public function getCallback ( )
public function setCallback (string|array $callback)
public function getOptions ( )
public function setOptions (mixed $options)
public function isValid (mixed $value)
/* Public methods inherited from class Zend_Validate_Abstract */

public function getMessages ( )
public function getMessageVariables ( )
public function getMessageTemplates ( )
public function setMessage (string $messageString, string $messageKey=null)
public function setMessages (Array $messages)
public function __get (string $property)
public function getErrors ( )
public function setObscureValue (bool $flag)
public function getObscureValue ( )
public function setTranslator (Zend_Translate|Zend_Translate_Adapter|null $translator=null)
public function getTranslator ( )
public function hasTranslator ( )
public static function setDefaultTranslator (Zend_Translate|Zend_Translate_Adapter|null $translator=null)
public static function getDefaultTranslator ( )
public static function hasDefaultTranslator ( )
public function setDisableTranslator (bool $flag)
public function translatorIsDisabled ( )
public static function getMessageLength ( )
public static function setMessageLength (integer $length=-1)
} 
```

在这里阅读更多[http://zfdoc.hafees.com/class/Zend_Validate_Callback.html#class,Zend_Validate_Callback](http://zfdoc.hafees.com/class/Zend_Validate_Callback.html#class,Zend_Validate_Callback)

# facebook - 获取页面的 facebook 身份验证

> ID：12159324
> 
> 赞同：0
> 
> 时间：2012-08-28T12:34:15.807
> 
> 标签：facebook, authentication

我正在尝试使用[https://graph.facebook.com/175119619168907/posts?access_token=access_token](https://graph.facebook.com/175119619168907/posts?access_token=access_token)使用 Facebook 的开放图来捕捉某个页面的帖子。

我想知道我是否必须为访问我页面的每个用户创建一个新令牌，然后他需要将我的应用程序添加到他的应用程序列表中？或者我可以创建一个不会过期并且我可以用于所有登录用户的令牌吗？这里没有安全问题，因为用户只能阅读帖子而不能写/评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:52:03.727

我发现了您必须使用以下网址创建应用令牌的解决方案：

```
GET https://graph.facebook.com/oauth/access_token?
            client_id=YOUR_APP_ID
           &client_secret=YOUR_APP_SECRET
           &grant_type=client_credentials 
```

此令牌不会过期

# bash - 是否有任何工具可以检查 bash 语法

> ID：12159325
> 
> 赞同：0
> 
> 时间：2012-08-28T12:34:16.480
> 
> 标签：bash

有没有可以检查我的 bash 语法的工具（win 就可以了），我正在学习 bash 中的脚本，所以如果有任何类型错误，我需要任何能够检查我的脚本的工具。

纳克斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T12:39:27.500

请参阅以下`-n`参数`bash`：

> 读取命令但不执行它们。这可用于检查 shell 脚本的语法错误。交互式 shell 会忽略这一点。

# python - 一起使用多处理和线程的竞争条件

> ID：12159328
> 
> 赞同：3
> 
> 时间：2012-08-28T12:34:19.803
> 
> 标签：python, multithreading, multiprocessing

我编写了示例程序。它创建 8 个线程并在每个线程中生成进程

```
import threading
from multiprocessing import Process

def fast_function():
    pass

def thread_function():
    process_number = 1
    print 'start %s processes' % process_number
    for i in range(process_number):
        p = Process(target=fast_function, args=())
        p.start()
        p.join()

def main():
    threads_number = 8
    print 'start %s threads' % threads_number
    threads = [threading.Thread(target=thread_function, args=()) 
            for i in range(threads_number)]

    for thread in threads:
        thread.start()

    for thread in threads:
        thread.join() 
```

它崩溃了，有几个像这样的例外

```
Exception in thread Thread-3:
Traceback (most recent call last):
  File "/usr/lib/python2.6/threading.py", line 532, in __bootstrap_inner
    self.run()
  File "/usr/lib/python2.6/threading.py", line 484, in run
    self.__target(*self.__args, **self.__kwargs)
  File "./repeat_multiprocessing_bug.py", line 15, in thread_function
    p.start()
  File "/usr/lib/python2.6/multiprocessing/process.py", line 99, in start
    _cleanup()
  File "/usr/lib/python2.6/multiprocessing/process.py", line 53, in _cleanup
    if p._popen.poll() is not None:
  File "/usr/lib/python2.6/multiprocessing/forking.py", line 106, in poll
    pid, sts = os.waitpid(self.pid, flag)
OSError: [Errno 10] No child processes 
```

Python 版本 2.6.5。有人可以解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:15:38.270

多处理模块在 2.6.5 中存在线程安全问题。您最好的选择是更新到更新的 Python，或者将此补丁添加到 2.6.5：[http ://hg.python.org/cpython/rev/41aef062d529/](http://hg.python.org/cpython/rev/41aef062d529/)

该错误在以下链接中进行了更详细的描述：

*   [http://bugs.python.org/issue11891](http://bugs.python.org/issue11891)
*   [http://bugs.python.org/issue1731717](http://bugs.python.org/issue1731717)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:49:07.847

您可能正在尝试从交互式解释器中运行它。尝试将代码写入文件并将其作为 python 脚本运行，它可以在我的机器上运行...

[请参阅Python 多处理文档](http://docs.python.org/library/multiprocessing.html)中的说明和示例。

# wcf - 无意中将 SOAP 主体粘贴在 SOAP 标头中，试图使用 WCF 客户端访问 WSE 服务

> ID：12159334
> 
> 赞同：0
> 
> 时间：2012-08-28T12:34:42.390
> 
> 标签：wcf, soap, wse, soapheader

我正在尝试使用 WCF 访问 WSE 安全 Web 服务。为此，我需要生成的 SOAP 标头应包含用户名、密码、随机数和创建日期……这是我用来访问相同服务的一个肥皂 UI 标头示例……

```
 <soap:Header>
      <wsse:Security soap:mustUnderstand="true" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <wsse:UsernameToken wsu:Id="UsernameToken-2" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
            <wsse:Username>----------</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">----------</wsse:Password>
            <wsse:Nonce EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">Hozef94FFwOhuiF5QixaMQ==</wsse:Nonce>
            <wsu:Created>2012-08-21T13:26:03.642Z</wsu:Created>
         </wsse:UsernameToken>
      </wsse:Security>
   </soap:Header> 
```

现在我找到了一个非常有用的教程。 [有用的教程](http://blog.benpowell.co.uk/2010/11/supporting-ws-i-basic-profile-password.html)

我已经成功地实现了它......但是我现在将 SOAP 主体粘贴到肥皂头中，并且没有生成随机数。

```
<s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope">
    <s:Header>
        <VsDebuggerCausalityData xmlns="http://schemas.microsoft.com/vstudio/diagnostics/servicemodelsink">uIDPo9VZylDHg5JMgjsNnWLhATkAAAAA+YtOxHdh0Uqd4a64raX/nIzYz20mPHlBv4Wk5S8d5PsACQAA</VsDebuggerCausalityData>
        <wsse:Security s:mustUnderstand="0" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
            <UsernameToken xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
                <Username>------------</Username>
                <Password>************</Password>
            </UsernameToken>
        </wsse:Security>
        <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
            <GetOrganizations xmlns="http://------------------------/businessobjects/messaging/">
                <personId xmlns="">0</personId>
                <typeId xmlns="">
                    <int>1</int>
                    <int>2</int>
                    <int>3</int>
                    <int>4</int>
                </typeId>
            </GetOrganizations>
        </s:Body>
    </s:Header>
</s:Envelope> 
```

不知道它为什么这样做。我完全按照教程进行操作。我的存储库得到了一切......

```
using (DistListServiceReference.DistributionListClient dlc = new DistListServiceReference.DistributionListClient())
            {
                try
                {
                    PasswordDigestBehavior behavior = new PasswordDigestBehavior("********", "********");                            
                    dlc.Endpoint.Behaviors.Add(behavior);

                    GetDistributionLists gdl = new GetDistributionLists();

                    gdl.PersonID = 0;

                    GetDistributionListsResponse gdlr = new GetDistributionListsResponse();

                    gdlr = dlc.GetDistributionLists(gdl);
                    return gdlr;
                }
                catch (Exception e)
                {
                    dlc.Abort();
                    return null;
                }
            } 
```

我的密码DigentInspector

```
public object BeforeSendRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel)
        {
            // Use the WSE 3.0 security token class
            UsernameToken token = new UsernameToken(this.Username, this.Password, PasswordOption.SendPlainText);
            WseHeader header = new WseHeader(this.Username, this.Password);

            // Serialize the token to XML
            XmlElement securityToken = token.GetXml(new XmlDocument());           

            MessageHeader securityHeader = MessageHeader.CreateHeader("Security", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#UsernameToken", securityToken, false);
            request.Headers.Add(header);

            // complete
            return Convert.DBNull;
        } 
```

我如何应用客户行为

```
public void ApplyClientBehavior(ServiceEndpoint endpoint, System.ServiceModel.Dispatcher.ClientRuntime clientRuntime)
        {
            clientRuntime.MessageInspectors.Add(new PasswordDigestMessageInspector(this.Username, this.Password));
        } 
```

一切都在那里。我没有看到身体被注入头部的位置。任何机构有任何想法？

**更新：调试** 我正在查看注入到肥皂消息中的实际标头，这就是我所看到的...

```
{<wsse:Security s:mustUnderstand="0" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <UsernameToken xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
    <Username>**********</Username>
    <Password>************</Password>
  </UsernameToken>} System.ServiceModel.Channels.MessageHeaderInfo {TestDistListApplication.Repository.WseHeader} 
```

只是看看，没有随机数，我可以以编程方式构建它，但我不确定这是否是个好主意。特别是因为在securityToken中已经有一个nonce和一个创建日期......不知道为什么它们没有出现在标题中......

```
<wsse:Username xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">MedTrak_Dev</wsse:Username>
<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">uncJUN132012</wsse:Password>
<wsse:Nonce xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">mvy9nUfF+rnT3oTasDBqxg==</wsse:Nonce>
<wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">2012-08-28T13:30:42Z</wsu:Created> 
```

我停止了调试器，我正在观察这两个变量。什么可能导致标头没有这些东西而 WSEHeader 有它们？看起来我将不得不调试它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:01:23.480

如果不自己运行您的代码，理解为什么我的示例在您的场景中不起作用有点棘手。但是，为了调试它，我会尝试以下操作：

在这一行设置断点：

```
XmlElement securityToken = token.GetXml(new XmlDocument()); 
```

在单步执行此行之后，查看 securityToken XML 的样子。正是这个 XML 被注入到安全头中。没有比这更复杂的了。如果需要，您可以手动创建此 XML。我使用了 WSE 3.0 类，因为我不想自己手动编写 XML 代码。

我还注意到您的安全令牌定义与我的略有不同。我的例子是：

```
MessageHeader securityHeader = MessageHeader.CreateHeader("Security", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd", securityToken, false); 
```

你的：

```
MessageHeader securityHeader = MessageHeader.CreateHeader("Security", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#UsernameToken", securityToken, false); 
```

命名空间不同。这有什么原因吗？

如果未命中从上述步骤添加的断点，则表明该行为实际上并未被应用。在这种情况下，您可能需要仔细检查您的配置以确保该行为正确应用于客户端。或者（如我的示例所示）您可以在发送消息之前以编程方式添加自定义行为。

我建议任何处理 WCF 问题的人，他们首先打开详细日志记录并使用 fiddler 来查看实际发生的情况。

# android - Gif 在自定义列表视图中没有动画

> ID：12159336
> 
> 赞同：6
> 
> 时间：2012-08-28T12:34:54.617
> 
> 标签：android, android-layout, android-listview, android-imageview, animated-gif

![在此处输入图像描述](../Images/02979fea6f2eab01928a01668ba80308.png)

我想在我的自定义列表视图中显示动画 GIF 图像。我的 GIF 图像在 Web 服务 url 中获取。GIF 图像显示但没有动画。

```
public class NewsScreenAdapter extends BaseAdapter {

    LayoutInflater inflater;
    public GifDecoderView webview1;
    public static  viewholder holder;
    View view = null;
    public static Context context;
    public ImageLoader IL;
    public String imgUrl;
    public static String addurl;    
    public Activity activity;
    String image;
    public static Date parsed;
    public static String ac, cat_id;

    public NewsScreenAdapter(Activity a) {
        // TODO Auto-generated constructor stub

        context = a.getApplicationContext();
        this.activity = a;       
        inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        IL = new ImageLoader(activity.getApplicationContext());   
     }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        // return NewsScreenActivity.arrayList_header.size();

        return NewsScreenActivity.TotalDataArray.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public int getItemViewType(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public int getViewTypeCount() {
        // TODO Auto-generated method stub
        return NewsScreenActivity.TotalDataArray.size();
    }
    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        View vi = convertView;

            holder = new viewholder();

            vi = inflater.inflate(R.layout.newsscren_row, null);
            holder.news_header_title = (TextView) vi.findViewById(R.id.header_title);
            holder.ll_data = (LinearLayout) vi.findViewById(R.id.data);

            vi.setTag(holder);

        holder.news_header_title.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                cat_id = NewsScreenActivity.arrayList_header.get(position);
                ac = ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray.get(position)).catId;

                activity.startActivity(new Intent(activity,CategoryActivity.class).putExtra("id", ac));

            }
        });

        holder.ll_data.removeAllViews();

        int storyLenght = ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray.get(position)).storyArr.size();

        Log.d("Adapter ", " story Lenght " + storyLenght); 

        for (int i = 0; i < storyLenght; i++) {

            view = LayoutInflater.from(activity).inflate(R.layout.sub_row, null);

            holder.short_text = (TextView) view.findViewById(R.id.short_text);
            holder.image = (ImageView) view.findViewById(R.id.image);
            holder.des = (TextView) view.findViewById(R.id.des);
            holder.date_time = (TextView) view.findViewById(R.id.date_time);
            holder.llAdd = (LinearLayout) view.findViewById(R.id.llAdd);
            holder.imgAdd = (ImageView) view.findViewById(R.id.imgAdd);

            try {
                holder.image.setTag(NewsScreenActivity.arrayList_image.get(i));
                IL.DisplayImage(
                        ((NewsScreenActivity.ImagesData) ((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                                .get(position)).storyArr.get(i)).imageArr.get(0)).smallurl, activity, holder.image);

                notifyDataSetChanged();

            } catch (Exception e) {
                // TODO: handle exception
            }

            holder.short_text.setText(((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                            .get(position)).storyArr.get(i)).title);
            holder.des.setText(((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                            .get(position)).storyArr.get(i)).description);

            String st = ((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                    .get(position)).storyArr.get(i)).date;
            parsed = new Date(Long.parseLong(st.substring(6, st.length() - 2)));

            SimpleDateFormat sdf = new SimpleDateFormat("MMM dd,yyyy hh:mmaa");
            System.out.println(sdf.format(parsed));
            String concat = sdf.format(parsed);
            String data = concat;
            String half1 = data.substring(0, 11);
            Log.e("1st date", "" + half1);

            SimpleDateFormat display_date = new SimpleDateFormat("dd.MM.yyyy");
            Date d_date = new Date();
            String dis_date = display_date.format(parsed);

            String half2 = data.substring(11, 19);
            Log.e("2st time", "" + half2);      

            SimpleDateFormat currentdate = new SimpleDateFormat("MMM dd,yyyy");
            Date currunt = new Date();
            String day = currentdate.format(currunt);
            if (half1.equalsIgnoreCase(day) == true) {
                holder.date_time.setText(half2);
                Log.v("if condition", "" + half2);
            } else {
                half1 = dis_date;
                holder.date_time.setText(half1);
                Log.v("else condition", "" + half1);
            }
            Log.e("currunt time", "" + day); 

            holder.news_header_title.setText(((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                            .get(position)).catDisplay);

            if (!((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                    .get(position)).storyArr.get(i)).advertising
                    .equalsIgnoreCase("null")) {

                 holder.short_text.setVisibility(view.GONE);
                 holder.date_time.setVisibility(view.GONE);
                 holder.des.setVisibility(view.GONE);

                imgUrl = ((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                        .get(position)).storyArr.get(i)).adData.imageurl;

                // TODO Auto-generated method stub
                addurl = ((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray
                        .get(position)).storyArr.get(i)).adData.targeturl;

                //-----------------GIF Image view ------------

                holder.imgAdd.setImageBitmap(IL.getBitmap(imgUrl));

                /* InputStream is = null;
                    try {
                        is = (InputStream) new URL(imgUrl).getContent();

                  webview1 = new GifDecoderView(context, is);           
                  activity.setContentView(webview1);                                            

                    } catch (Exception e) {
                        return null;
                    }*/

                holder.imgAdd.setOnClickListener(new OnClickListener() {                    
                    @Override
                    public void onClick(View v) {                       

                        activity.startActivity(new Intent(activity, AdvertismentActivity.class));

                    }
                });             
                Log.i("---", "---------" + imgUrl);
                holder.llAdd.setVisibility(View.VISIBLE);
              }

            holder.ll_data.addView(view);               
            Log.i("Set Tag", position+"OK"+i);
            view.setTag(position+"OK"+i);

            view.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    String tag = (String) v.getTag();
                    String[] arr = tag.split("OK");
                    int p = Integer.parseInt(arr[0]);
                    int i = Integer.parseInt(arr[1]);
                    Log.i("Pos and I", p + "   " + i );

                    String str = ((NewsScreenActivity.StoryData) ((NewsScreenActivity.MainData) NewsScreenActivity.TotalDataArray .get(p)).storyArr.get(i)).storyid;

                    Log.i("Pos and I and STR", p + "   " + i + "   "  + str);
                    Intent intent = new Intent(context,ShowFullDescriprion.class);
                    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    intent.putExtra("id", str);
                    intent.putExtra("cat", p);
                    intent.putExtra("pos",i);
                    context.startActivity(intent);
                }
            });
        }
        return vi;
    }

    public static String getDate(long milliSeconds, String dateFormat) {
        // Create a DateFormatter object for displaying date in specified
        // format.
        DateFormat formatter = new SimpleDateFormat(dateFormat);

        // Create a calendar object that will convert the date and time value in
        // milliseconds to date.
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(milliSeconds);
        return formatter.format(calendar.getTime());         
    }    
    public static class viewholder {

        TextView news_header_title, short_text, des, date_time;
        LinearLayout ll_data, llAdd;
        public ImageView image, imgAdd;

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T13:35:08.560

您可以使用能够解码 gif 的[Android Movie类。](http://developer.android.com/reference/android/graphics/Movie.html)

```
Movie.decodeStream(InputStream is); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T12:30:56.673

使用`WebView`而不是 ImageView 和`loadUrl`WebView。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T13:16:40.213

您必须为此使用 gif 解码器类并将其设置在 inflact 视图中，以便您可以在单个活动或屏幕中设置两个视图。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-13T14:42:35.400

使用[Glide 图像加载库](https://github.com/bumptech/glide)，它内置了对 GIF 的支持，并且语法与加载 JPEG 文件相同：

```
Glide.with(this).load("http://.../anim.gif").into(imageView); 
```

有关更多信息，请参阅[wiki](https://github.com/bumptech/glide/wiki#whats-new-in-30)并运行[Gihpy 示例](https://github.com/bumptech/glide#samples)以感到惊讶 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T07:35:38.307

```
//-----------------GIF Image view ------------

holder.imgAdd.getSettings().setJavaScriptEnabled(true);

holder.imgAdd.setWebChromeClient(new WebChromeClient() {
    public void onProgressChanged(WebView view, int progress)
    {
        activity.setTitle("Loading...");
        activity.setProgress(progress * 100);

        if(progress == 100)
            activity.setTitle(R.string.app_name);
    }
});

holder.imgAdd.setWebViewClient(new WebViewClient() {
    @Override
    public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)
    {
        // Handle the error
    }
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url)
    {
        view.loadUrl(url);
        return true;
    }
});

            holder.imgAdd.loadUrl(imgUrl); 
```

# java - 在外部存储中写入文件会导致 android 应用程序崩溃

> ID：12159339
> 
> 赞同：0
> 
> 时间：2012-08-28T12:35:03.927
> 
> 标签：java, android, android-sdcard

我知道这里有一些关于此的问题，但我仍然找不到答案。我需要在外部存储中写一些文本，但是这段代码会使应用程序崩溃。请注意，String dane 就是这个文本。

```
 void zapis2 (String dane){
        Context myContext = getApplicationContext();
        File file = new File(myContext.getExternalFilesDir(null), "state.txt");
        try {

             FileOutputStream os = new FileOutputStream(file, true); 
             OutputStreamWriter out = new OutputStreamWriter(os);
                 out.write(dane);
             out.close();}catch (IOException e) {
                }
    } 
```

你有什么想法吗。我当然在 android manifest 中添加了权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:48:13.077

`Contect.getExternalFilesDir(..)`仅从[API8](https://developer.android.com/reference/android/content/Context.html#getExternalFilesDir%28java.lang.String%29)可用，如果您在早期版本上运行/部署，它将崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:43:09.837

尝试这个：

```
File root = android.os.Environment.getExternalStorageDirectory();
File dir = new File (root.getAbsolutePath() + "/foldername");
dir.mkdirs();
File file = new File(dir, "filename.txt");

try {
    FileOutputStream f = new FileOutputStream(file);
    PrintWriter pw = new PrintWriter(f);
    pw.println(dane); //your string which you want to store
    pw.flush();
    pw.close();
    f.close();
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

希望这可以帮助！

# powershell - 如何获取远程计算机的磁盘容量和可用空间

> ID：12159341
> 
> 赞同：139
> 
> 时间：2012-08-28T12:35:04.933
> 
> 标签：powershell, scripting, powershell-2.0

我有这个单行：

```
get-WmiObject win32_logicaldisk -Computername remotecomputer 
```

输出是这样的：

```
DeviceID     : A:
DriveType    : 2
ProviderName :
FreeSpace    :
Size         :
VolumeName   :

DeviceID     : C:
DriveType    : 3
ProviderName :
FreeSpace    : 20116508672
Size         : 42842714112
VolumeName   :

DeviceID     : D:
DriveType    : 5
ProviderName :
FreeSpace    :
Size         :
VolumeName   : 
```

我如何获得`Freespace`and `Size`of `DeviceID` `C:`？我只需要提取这两个值而不需要其他信息。我已经用`Select`cmdlet 试过了，但是没有效果。

**编辑：** 我只需要提取数值并将它们存储在变量中。

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2015-05-01T17:48:10.883

更简单的解决方案：

```
Get-PSDrive C | Select-Object Used,Free 
```

和远程计算机（需要`Powershell Remoting`）

```
Invoke-Command -ComputerName SRV2 {Get-PSDrive C} | Select-Object PSComputerName,Used,Free 
```

* * *

## 回答 #2

> 赞同：152
> 
> 时间：2012-08-28T12:42:46.193

```
$disk = Get-WmiObject Win32_LogicalDisk -ComputerName remotecomputer -Filter "DeviceID='C:'" |
Select-Object Size,FreeSpace

$disk.Size
$disk.FreeSpace 
```

要仅提取值并将它们分配给变量：

```
$disk = Get-WmiObject Win32_LogicalDisk -ComputerName remotecomputer -Filter "DeviceID='C:'" |
Foreach-Object {$_.Size,$_.FreeSpace} 
```

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2018-02-23T18:41:13.340

只有一个命令简单又干净，但这仅适用于本地磁盘

```
Get-PSDrive 
```

[![在此处输入图像描述](../Images/27ca8e535383f1b24502a28d6ea30649.png)](https://i.stack.imgur.com/t3EcM.jpg)

您仍然可以通过执行 Enter-PSSession -Computername ServerName 在远程服务器上使用此命令，然后运行 ​​Get-PSDrive 它将提取数据，就像您从服务器运行它一样。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-06-15T19:11:36.127

不久前，我创建了一个 PowerShell 高级函数（脚本 cmdlet），它允许您查询多台计算机。

该函数的代码略多于 100 行，因此您可以在此处找到它：[PowerShell 版本的 df 命令](http://binarynature.blogspot.com/2010/04/powershell-version-of-df-command.html)

查看**用法**部分的示例。以下使用示例查询一组远程计算机（来自 PowerShell 管道的输入）并以表格格式显示输出，并以人类可读的形式显示数值：

```
PS> $cred = Get-Credential -Credential 'example\administrator'
PS> 'db01','dc01','sp01' | Get-DiskFree -Credential $cred -Format | Format-Table -GroupBy Name -AutoSize

   Name: DB01

Name Vol Size  Used  Avail Use% FS   Type
---- --- ----  ----  ----- ---- --   ----
DB01 C:  39.9G 15.6G 24.3G   39 NTFS Local Fixed Disk
DB01 D:  4.1G  4.1G  0B     100 CDFS CD-ROM Disc

   Name: DC01

Name Vol Size  Used  Avail Use% FS   Type
---- --- ----  ----  ----- ---- --   ----
DC01 C:  39.9G 16.9G 23G     42 NTFS Local Fixed Disk
DC01 D:  3.3G  3.3G  0B     100 CDFS CD-ROM Disc
DC01 Z:  59.7G 16.3G 43.4G   27 NTFS Network Connection

   Name: SP01

Name Vol Size   Used   Avail Use% FS   Type
---- --- ----   ----   ----- ---- --   ----
SP01 C:  39.9G  20G    19.9G   50 NTFS Local Fixed Disk
SP01 D:  722.8M 722.8M 0B     100 UDF  CD-ROM Disc 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-09-17T21:19:03.427

另一种方法是将字符串转换为 WMI 对象：

```
$size = ([wmi]"\\remotecomputer\root\cimv2:Win32_logicalDisk.DeviceID='c:'").Size
$free = ([wmi]"\\remotecomputer\root\cimv2:Win32_logicalDisk.DeviceID='c:'").FreeSpace 
```

如果您想要不同的单位，您也可以将结果除以 1GB 或 1MB：

```
$disk = ([wmi]"\\remotecomputer\root\cimv2:Win32_logicalDisk.DeviceID='c:'")
"Remotecomputer C: has {0:#.0} GB free of {1:#.0} GB Total" -f ($disk.FreeSpace/1GB),($disk.Size/1GB) | write-output 
```

输出是：`Remotecomputer C: has 252.7 GB free of 298.0 GB Total`

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2016-02-02T16:24:47.610

我在其他建议中遇到了两个问题

**1)**

**2）**

**访问被拒绝**

不受这些问题影响的替代方法是将**GetDiskFreeSpaceEx**与 UNC 路径一起使用：

```
function getDiskSpaceInfoUNC($p_UNCpath, $p_unit = 1tb, $p_format = '{0:N1}')
{
    # unit, one of --> 1kb, 1mb, 1gb, 1tb, 1pb
    $l_typeDefinition = @' 
        [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)] 
        [return: MarshalAs(UnmanagedType.Bool)] 
        public static extern bool GetDiskFreeSpaceEx(string lpDirectoryName, 
            out ulong lpFreeBytesAvailable, 
            out ulong lpTotalNumberOfBytes, 
            out ulong lpTotalNumberOfFreeBytes); 
'@
    $l_type = Add-Type -MemberDefinition $l_typeDefinition -Name Win32Utils -Namespace GetDiskFreeSpaceEx -PassThru

    $freeBytesAvailable     = New-Object System.UInt64 # differs from totalNumberOfFreeBytes when per-user disk quotas are in place
    $totalNumberOfBytes     = New-Object System.UInt64
    $totalNumberOfFreeBytes = New-Object System.UInt64

    $l_result = $l_type::GetDiskFreeSpaceEx($p_UNCpath,([ref]$freeBytesAvailable),([ref]$totalNumberOfBytes),([ref]$totalNumberOfFreeBytes)) 

    $totalBytes     = if($l_result) { $totalNumberOfBytes    /$p_unit } else { '' }
    $totalFreeBytes = if($l_result) { $totalNumberOfFreeBytes/$p_unit } else { '' }

    New-Object PSObject -Property @{
        Success   = $l_result
        Path      = $p_UNCpath
        Total     = $p_format -f $totalBytes
        Free      = $p_format -f $totalFreeBytes
    } 
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-12-28T02:10:19.540

命令行：

```
powershell gwmi Win32_LogicalDisk -ComputerName remotecomputer -Filter "DriveType=3" ^|
select Name, FileSystem,FreeSpace,BlockSize,Size ^| % {$_.BlockSize=
(($_.FreeSpace)/($_.Size))*100;$_.FreeSpace=($_.FreeSpace/1GB);$_.Size=($_.Size/1GB);$_}
^| Format-Table Name, @{n='FS';e={$_.FileSystem}},@{n='Free, Gb';e={'{0:N2}'-f
$_.FreeSpace}}, @{n='Free,%';e={'{0:N2}'-f $_.BlockSize}},@{n='Capacity ,Gb';e={'{0:N3}'
-f $_.Size}} -AutoSize 
```

输出：

```
Name FS   Free, Gb Free,% Capacity ,Gb

---- --   -------- ------ ------------

C:   NTFS 16,64    3,57   465,752

D:   NTFS 43,63    9,37   465,759

I:   NTFS 437,59   94,02  465,418

N:   NTFS 5,59     0,40   1 397,263

O:   NTFS 8,55     0,96   886,453

P:   NTFS 5,72     0,59   976,562 
```

命令行：

```
wmic logicaldisk where DriveType="3" get caption, VolumeName, VolumeSerialNumber, Size, FileSystem, FreeSpace 
```

出去：

```
Caption  FileSystem  FreeSpace     Size           VolumeName  VolumeSerialNumber

C:       NTFS        17864343552   500096991232   S01         EC641C36

D:       NTFS        46842589184   500104687616   VM1         CAF2C258

I:       NTFS        469853536256  499738734592   V8          6267CDCC

N:       NTFS        5998840832    1500299264512  Vm-1500     003169D1

O:       NTFS        9182349312    951821143552   DT01        A8FC194C

P:       NTFS        6147043840    1048575144448  DT02        B80A0F40 
```

命令行：

```
wmic logicaldisk where Caption="C:" get caption, VolumeName, VolumeSerialNumber, Size, FileSystem, FreeSpace 
```

出去：

```
Caption  FileSystem  FreeSpace    Size          VolumeName  VolumeSerialNumber

C:       NTFS        17864327168  500096991232  S01         EC641C36

command-line:

dir C:\ /A:DS | find "free"

out:
               4 Dir(s)  17 864 318 976 bytes free

dir C:\ /A:DS /-C | find "free"

out:
               4 Dir(s)     17864318976 bytes free 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-04-04T17:57:36.060

```
Get-PSDrive C | Select-Object @{ E={$_.Used/1GB}; L='Used' }, @{ E={$_.Free/1GB}; L='Free' } 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-08-07T16:40:30.343

刚刚找到[Get-Volume](https://docs.microsoft.com/en-us/powershell/module/storage/get-volume?view=win10-ps)命令，它返回`SizeRemaining`，因此可以使用类似的东西`(Get-Volume -DriveLetter C).SizeRemaining / (1e+9)`来查看磁盘 C 的剩余 Gb。似乎比`Get-WmiObject Win32_LogicalDisk`.

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-05-07T17:49:38.417

```
PS> Get-CimInstance -ComputerName bobPC win32_logicaldisk | where caption -eq "C:" | foreach-object {write " $($_.caption) $('{0:N2}' -f ($_.Size/1gb)) GB total, $('{0:N2}' -f ($_.FreeSpace/1gb)) GB free "}  
C: 117.99 GB total, 16.72 GB free 

PS> 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-10-04T05:46:24.853

我知道你可以从[这里下载的 psExec 工具](https://technet.microsoft.com/en-us/sysinternals/pxexec.aspx)

工具包中有一个 psinfo.exe。powershell/cmd中基本用法如下。

[![在此处输入图像描述](../Images/bedc55499a2a3b5b0f0ea7fe956a2021.png)](https://i.stack.imgur.com/LanuL.png)

但是，您可以有很多选择

用法：psinfo [[\computer[,computer[,..] | @file [-u 用户 [-p psswd]]] [-h] [-s] [-d] [-c [-t 分隔符]] [过滤器]

\computer 在远程计算机或指定的计算机上执行命令。如果省略计算机名称，则命令在本地系统上运行，并且如果指定通配符 (\*)，则命令在当前域中的所有计算机上运行。

```
@file   Run the command on each computer listed in the text file specified.
-u  Specifies optional user name for login to remote computer.
-p  Specifies optional password for user name. If you omit this you will be prompted to enter a hidden password.
-h  Show list of installed hotfixes.
-s  Show list of installed applications.
-d  Show disk volume information.
-c  Print in CSV format.
-t  The default delimiter for the -c option is a comma, but can be overriden with the specified character. 
```

filter Psinfo 将只显示与过滤器匹配的字段的数据。例如，“psinfo 服务”仅列出服务包字段。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-05-14T00:46:57.273

在 PowerShell 上：

```
"FreeSpace C:  " + [math]::Round((Get-Volume -DriveLetter C).SizeRemaining / 1Gb) + " GB" 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-06-15T13:58:57.287

**我使用Enter-PSsession pcName**远程进入计算机， 然后输入**Get-PSDrive**

这将列出所有已使用和剩余的驱动器和空间。如果您需要查看所有格式化的信息，请将其通过管道传输到 FL，如下所示：**Get-PSdrive | 佛罗里达州 ***

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-11-05T22:41:39.427

PowerShell 乐趣

```
Get-WmiObject win32_logicaldisk -Computername <ServerName> -Credential $(get-credential) | Select DeviceID,VolumeName,FreeSpace,Size | where {$_.DeviceID -eq "C:"} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-08-31T14:19:44.483

如果要检查多个驱动器号和/或在本地和网络驱动器之间进行筛选，可以使用 PowerShell 来利用[Win32_LogicalDisk WMI](https://msdn.microsoft.com/en-us/library/aa394173(v=vs.85).aspx)类。这是一个简单的例子：

```
$localVolumes = Get-WMIObject win32_volume;

foreach ($vol in $localVolumes) {
  if ($vol.DriveLetter -ne $null ) {
    $d = $vol.DriveLetter[0];
    if ($vol.DriveType -eq 3) {
      Write-Host ("Drive " + $d + " is a Local Drive");
    }
    elseif ($vol.DriveType -eq 4) {
      Write-Host ("Drive" + $d + " is a Network Drive");
    }
    else {
      // ... and so on
    }

    $drive = Get-PSDrive $d;
    Write-Host ("Used space on drive " + $d + ": " + $drive.Used + " bytes. `r`n");
    Write-Host ("Free space on drive " + $d + ": " + $drive.Free + " bytes. `r`n");
  }
} 
```

我使用上述技术创建了一个 Powershell 脚本，该脚本检查所有驱动器并在它们低于用户定义的配额时发送电子邮件警报。你可以从我博客上的[这篇文章中得到它。](http://www.ryadel.com/en/runninglow-free-powershell-script-check-low-disk-space-send-email-alert/)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-03-01T14:24:40.617

我创建了这个简单的函数来帮助我。这使我的调用更容易阅读，因为内联了[Get-WmiObject](https://technet.microsoft.com/en-us/library/hh849824.aspx)、[Where-Object](http://technet.microsoft.com/en-us/library/hh849715.aspx)语句等。

```
function GetDiskSizeInfo($drive) {
    $diskReport = Get-WmiObject Win32_logicaldisk
    $drive = $diskReport | Where-Object { $_.DeviceID -eq $drive}

    $result = @{
        Size = $drive.Size
        FreeSpace = $drive.Freespace
    }
    return $result
}

$diskspace = GetDiskSizeInfo "C:"
write-host $diskspace.FreeSpace " " $diskspace.Size 
```

# android - 为 TextView 设置大写

> ID：12159342
> 
> 赞同：56
> 
> 时间：2012-08-28T12:35:09.033
> 
> 标签：android, android-layout

我有文本视图。我想以大写模式显示文本。有大写的属性吗？只是我在 strings.xml 中有文本，我需要在几个地方使用该行作为小写和大写。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-10-02T04:01:18.377

在布局 XML 中，您可以设置**[`android:textAllCaps`](https://developer.android.com/reference/android/widget/TextView.html#attr_android:textAllCaps)**属性`TextView`：

```
<TextView android:textAllCaps="true"></TextView> 
```

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2012-08-28T12:37:15.447

`String`将文本设置为`TextView`as时使用类方法

```
tv.setText(strings.toUpperCase()); 
```

请查看[此](https://stackoverflow.com/q/3286343/593709)帖子以进行详细讨论。

**编辑：**这是在 API 14 之前回答的。正如这里提到的其他答案，`textView.isAllCaps = true`它的 java 方法是从`TextView`. 请使用那些。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-10-02T05:44:31.517

以编程方式`textView.setAllCaps(false)`将其用于原样和用于 XML 布局`textView.setAllCaps(true)`的大写 `android:textAllCaps="true"`

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-07-09T08:26:42.877

科特林：

```
textView.isAllCaps = true 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-08-28T12:46:26.697

对于 XML 方法，您不想使用它，`android:capitalize`因为它是在文本输入期间使用的。相反，使用[textAllCaps](http://developer.android.com/reference/android/widget/TextView.html#attr_android:textAllCaps "文本全部大写")。如果您的字符串被声明为小写，那么在每个 TextView 的基础上在大写和小写之间切换非常简单。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-08-10T09:54:19.783

用它

```
<TextView android:textAllCaps="true"></TextView> 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-08-28T12:36:29.533

我相信没有这样的属性，但你可以使用

```
textView.setText(text.toUpperCase()); 
```

也发现了这个，虽然我自己从未测试过

```
android:capitalize="characters" 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-08-28T12:42:45.343

尝试这个。

**大写**

```
textView.setText(getResources().getString(R.string.app_name).toUpperCase()); 
```

**小写**

```
textView.setText(getResources().getString(R.string.app_name).toLowerCase()); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-08-10T13:07:40.883

在布局文件中设置 android:textAllCaps="true"。

编辑：如果您使用的是 kotlin，请使用 .capliatlized() 方法 [https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/capitalize.html](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.text/capitalize.html)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-08-28T12:43:17.187

您可以创建从 TextView 派生的自定义视图并覆盖 setText 方法以大写。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-07-16T08:17:56.273

您可以在 android xml 文件中轻松做到这一点。您应该将此行添加到 TextView。

```
 <TextView 
      android:textAllCaps="true"/> 
```

如果你想在代码中这样做，你可以这样做：

```
 textView.setText(strings.toUpperCase()); 
```

# search-engine - 如何在搜索引擎中隐藏网站

> ID：12159349
> 
> 赞同：5
> 
> 时间：2012-08-28T12:35:16.403
> 
> 标签：search-engine

我正在开发一个网站，我想为客户主持开发工作，以便他可以批准，但我不希望该网站被搜索引擎找到。

我该如何隐藏它？

我听说要添加 robots.txt ？

有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T12:38:52.417

你可以在[维基百科](http://en.wikipedia.org/wiki/Robots_exclusion_standard)上找到它：

```
User-agent: *
Disallow: / 
```

将其放入您的 robots.txt 文件中，该文件位于您的网络服务器的顶级目录中，如此处[所述](http://www.robotstxt.org/robotstxt.html)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-28T12:39:36.270

是的，您可以使用 robots.txt。查看本指南[http://www.robotstxt.org/robotstxt.html](http://www.robotstxt.org/robotstxt.html)。

从整个服务器中排除所有机器人。

```
User-agent: *
Disallow: / 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-28T12:41:04.320

如果您不放置网站的公共链接，搜索引擎将不会轻易找到它。但是，在某些时候，如果很多人讨论该网站，那里肯定会有一个链接。

Robots.txt 将有助于所有合法的搜索引擎，例如 Google。但是，如果有人意外找到该 url 或者它被留在浏览器历史记录中，这将无济于事。

最可靠的方法是在网站上输入密码： [http ://www.elated.com/articles/password-protecting-your-pages-with-htaccess/](http://www.elated.com/articles/password-protecting-your-pages-with-htaccess/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-28T12:40:26.410

当我需要隐藏开发中的文件夹或站点时，我使用robot.txt。 [http://www.robotstxt.org/robotstxt.html](http://www.robotstxt.org/robotstxt.html) 我认为它最适合您的需要。

# iphone - 照片库作为另一个视图的子视图（在分段控制下。）

> ID：12159361
> 
> 赞同：0
> 
> 时间：2012-08-28T12:36:18.570
> 
> 标签：iphone, objective-c, ios, uiimagepickercontroller

我在我的一个视图上有一个段控制器，现在在我想添加的段控制器的第 0 个索引上`UIImagePickerController`（用于向用户显示相册视图），方法是添加为子视图而不是添加`ModalViewController`。

图像选择器控制器出现，但它没有导航以显示内部图像。当我选择显示图像计数的行时，它只显示一个空白表视图。

所以我的问题是这是否可以实现，或者我必须将它呈现为模态视图控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:08:19.030

这是我用来缩放 imagePicker 的一些代码，其中涉及将其视图添加到 Application Delegate 的窗口中 - 不太一样，但至少它表明您不必使用 ModalViewController 来呈现它，我相信它可以很容易适应 -

```
-(void)presentCameraWithDelegate:(id)theDelegate {

    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    [self setImagePickerController:imagePicker];

    imagePicker.delegate = theDelegate;
    imagePicker.mediaTypes = [NSArray arrayWithObjects:(NSString *)kUTTypeImage, nil];
    imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
    imagePicker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;

    UIView *controllerView = imagePickerController.view;

    controllerView.alpha = 0.0;
    controllerView.transform = CGAffineTransformMakeScale(0.5, 0.5);

    [[[[UIApplication sharedApplication] delegate] window] addSubview:controllerView];

    [UIView animateWithDuration:0.3
                      delay:0.0
                    options:UIViewAnimationOptionCurveLinear
                 animations:^{
                     controllerView.transform = CGAffineTransformMakeScale(1.0, 1.0);
                     controllerView.alpha = 1.0;
                 }
                 completion:nil
     ];

    [imagePicker release];

} 
```

对不起所有多余的代码！希望能帮助到你。

# heroku - Heroku - 自定义子域

> ID：12159369
> 
> 赞同：3
> 
> 时间：2012-08-28T12:36:40.083
> 
> 标签：heroku, dns, subdomain

我的客户想将他的 Heroku 应用程序指向他当前网站的子域（比如说`example.com`和`subdm.example.com`）。

Heroku 提供了很好的示例，如何设置从 Heroku 应用程序指向自定义域 - [https://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains)

但是如何从 Heroku 应用程序指向自定义 SUBDOMAIN？

我应该设置`heroku domains:add subd.example.com`吗？

我宁愿寻求建议，因为我不想搞砸客户的网站和设置......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T03:21:39.260

你做对了，别忘了用你的 DNS 添加 CNAME 记录。

# c# - 尝试创建自定义错误警报

> ID：12159372
> 
> 赞同：0
> 
> 时间：2012-08-28T12:36:51.513
> 
> 标签：c#, asp.net, error-handling

我尝试创建自己的自定义错误页面。（没有原创）基本上，当自定义错误页面被点击时，它将获取错误的 url，并且该人的用户名已登录并向我发送一封简短的 smtp 电子邮件。它实际上工作得很好，但它在我测试的页面上疯狂地收到这些电子邮件，我看不出有什么问题。我想尝试获取有关为什么调用此自定义错误页面的一些信息，以便我可以尝试解决问题。

任何人都可以有任何建议，以便我可以增强此页面以提供更多信息。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        string url = HttpContext.Current.Request.Url.AbsoluteUri;
        string DATETIME = DateTime.Now.ToString();
        string UserName = HttpContext.Current.User.Identity.Name.ToString();

        string fileName = Server.MapPath("_TextFiles/error.txt");
        string mailBody = File.ReadAllText(fileName);

        mailBody = mailBody.Replace("##url##", url);
        mailBody = mailBody.Replace("##DATETIME##", DATETIME);
        mailBody = mailBody.Replace("##UserName##", UserName);

        MailMessage myMessage = new MailMessage();
        myMessage.Subject = "Response from ";
        myMessage.Body = mailBody;

        myMessage.From = new MailAddress("*******n.com", "******");
        myMessage.To.Add(new MailAddress("*********.com", "******"));

        SmtpClient mySmtpClient = new SmtpClient();
        mySmtpClient.Send(myMessage);

    } 
```

文本文件，所以你不会混淆。

```
Hello,

Response from Error.aspx

An error occured on page ##url##

at ##DATETIME##

Username: ##UserName## 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T18:39:50.820

我的网站有相同的基本设置，但你需要稍微改变你的方法。如果您从错误页面发送电子邮件，则该异常不再可用。这就是我所做的...

我扩展了`System.Web.UI.Page`类并`OnError`使用以下方法覆盖了该方法：

```
protected override void OnError(EventArgs e)
{
    base.OnError(e);

    System.Exception ex = Server.GetLastError();
    Log.LogError("Error in Supr.CMS.Types.SuprPage", ex, Log.LogLevel.HandledExceptionFatal);
} 
```

我现在将它用作所有页面的基类，并且我会收到有关所有错误的完整详细信息的通知。我包括异常消息和堆栈跟踪以及一些用户信息（包括 IP 地址和 UserAgent）、cookie 集合、会话集合、表单集合和缓存集合，以便我尽可能了解用户遇到错误时站点的状态（有点太多在这里发布）。

另一个注意事项...很多错误是由机器人生成的，并且拥有诸如 IP 和 UserAgent 之类的信息可以让我将其分解并增强我的请求阻止。

# symfony - 为什么 `dump` 函数在 twig 文件中不存在？

> ID：12159373
> 
> 赞同：6
> 
> 时间：2012-08-28T12:36:54.730
> 
> 标签：symfony, twig

我不知道为什么它显示此错误

```
The function "dump" does not exist in twig file 
```

虽然我已经写在`config.yml`文件中：

```
services:
product_store.twig.extension.debug:
    class: Twig_Extension_Debug
    tags:
         - { name: 'twig.extension' } 
```

在树枝文件中，我尝试转储：

```
{{ dump(product) }} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-25T18:08:54.500

来自 lifo 的答案鼓励您使用该[`debug`](http://twig.sensiolabs.org/doc/extensions/debug.html)标签，但该`debug`标签`{% debug product %}`在 Twig 1.5 中已被弃用并替换为[`dump`](http://twig.sensiolabs.org/doc/functions/dump.html)function `{{ dump(product) }}`。

从 Symfony 标准版 2.0.9 开始启用的正确扩展是`Twig_Extension_Debug`并且应该被添加到，`app/config/config_dev.yml`因此它只在开发环境中加载：

```
services:
    twig.extension.debug:
        class: Twig_Extension_Debug
        tags: [{ name: 'twig.extension' }] 
```

然后，您应该能够`{{ dump(product) }}`在您的模板中使用。

如果问题仍然存在，您可以尝试以下方法：

1.  用于`php app/console container:debug twig.extension.debug --env=dev`确保依赖注入容器正确获取您的服务定义。

    ```
    [container] Information for service twig.extension.debug

    Service Id       twig.extension.debug
    Class            Twig_Extension_Debug
    Tags
        - twig.extension                 ()
    Scope            container
    Public           yes
    Synthetic        no
    Required File    - 
    ```

2.  打开为您的开发环境编译的依赖注入容器类并搜索`Twig_Extension_Debug`以查看是否已定义任何其他服务来使用它。该文件位于`app/cache/dev/appDevDebugProjectContainer.php`

3.  确保参数`%kernel.debug%`为真。

4.  确保您使用的是 Twig 1.5 或更高版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T13:44:59.267

首先，“转储”实际上不是命令，而是“调试”。其次，您的配置语法有点混乱。它应该看起来像这样：

```
services:
    twig.extension.debug:
        class: Twig_Extensions_Extension_Debug
        tags:
            - { name: twig.extension } 
```

然后你可以像这样在你的模板中使用它：`{% debug var %}`--**注意 {%%} 大括号。调试在 {{}} 大括号内不起作用，因为它是一个 TAG 而不是 FUNCTION。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T15:44:07.627

可能是这个原因：

你把

```
services:
  product_store.twig.extension.debug:
  class:        Twig_Extension_Debug
  tags:
     - { name: 'twig.extension' } 
```

它应该在您的边界的 config.yml 中：

```
nameOfTheBoundle/Resources/config/config.yml 
```

而不是在项目的 config.yml 中：

```
app/config/config.yml 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-21T12:09:40.730

接受的答案对我不起作用。我所要做的就是在 AppKernel 中启用 DebugBundle（仅在开发/测试环境中）：

```
$bundles[] = new Symfony\Bundle\DebugBundle\DebugBundle(); 
```

就是这样。无需注册任何服务。

# javascript - 选择 Javascript 中的值

> ID：12159378
> 
> 赞同：1
> 
> 时间：2012-08-28T12:37:19.427
> 
> 标签：javascript

我有这个 SELECT 元素，我想将当前 url 更新为所选项目的 URL&number=VALUE。

但是，我不知道如何捕捉价值。

```
<select name="prside" onchange="document.location.href = document.location.href + '&number=' + VALUE>
    <option>Annoncer pr. side</option>
    <option value="5">5</option>
    <option value="10">10</option>
    <option value="20>20</option>
    <option value="40">40</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:41:49.727

看看这个：http: [//jsfiddle.net/CdHPa/](http://jsfiddle.net/CdHPa/)

你应该使用 this.value 而不是 VALUE

除了价值 20 之外，还有一个缺失的“

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:48:45.030

您可以在 onchange 事件上调用 javascript 函数，然后将值传递给 url，例如，

```
<select name="prside" id="prside" onchange="return changeURL();>
   <option>Annoncer pr. side</option>
   <option value="5">5</option>
   <option value="10">10</option>
   <option value="20>20</option>
   <option value="40">40</option>
</select>

<script type="text/javascript">
function changeURL(){
var value = document.getElementById("prside").value;
window.location.href = www.myurl.com?value="+value";}
</script> 
```

希望这会有所帮助，但请检查语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:41:28.230

将其替换`<select name="prside" onchange="document.location.href = document.location.href + '&number=' + VALUE>` 为`<select name="prside" id="someid" onchange="somefunction();">`

在哪里

```
function somefunction(){
    var VALUE = document.getElementById("someid").value;
    document.location.href = document.location.href + '&number=' + VALUE
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T12:42:59.767

试试这个代码...

```
<select name="prside" onchange="document.location.href = document.location.href + '&number=' + this.value">
    <option>Annoncer pr. side</option>
    <option value="5">5</option>
    <option value="10">10</option>
    <option value="20>20</option>
    <option value="40">40</option>
</select> 
```

# jquery - jquery-countdown 插件，改变高度和宽度

> ID：12159393
> 
> 赞同：-1
> 
> 时间：2012-08-28T12:38:20.670
> 
> 标签：jquery, countdowntimer

我正在使用[这个插件](http://reflejo.github.com/jquery-countdown/)作为倒计时时钟

它很棒，但我需要它更小，当我调整代码和 PNG 的高度和宽度时，一切都会被抛弃。我将高度和宽度更改为最初创建的相同比例：

```
digitWidth: 67,
digitHeight: 90, 
```

变成：

```
digitWidth: 30,
digitHeight: 41, 
```

并将PNG更改为30px的宽度。还有什么我可以做的，这样当我改变尺寸时数字就不会全部搞砸了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:47:17.663

保持你的

```
digitWidth:30px,
digitHeight:40.15px 
```

在你通过函数初始化计数器之后

```
.countdown({}); 
```

添加这一行

```
$('.cntDigit').each(function(i,v){$(v).css('background-size','30px')}) 
```

有问题`background-size`

# batch-file - 每运行 X 次执行批处理文件

> ID：12159399
> 
> 赞同：2
> 
> 时间：2012-08-28T12:38:44.597
> 
> 标签：batch-file

我有一个批处理文件，我想在 Windows 关机时运行（通过 GPO 关机脚本执行），但我只希望它在一定数量的系统关机后运行，而不是在每次关机时运行。这是因为它的作用会导致关闭过程延迟，我想减少中断。

我唯一能想到的是构建一些逻辑来检查计算机关闭了多少次以及在超过定义的阈值后执行批处理文件，但是有人有一个如何做到这一点的例子吗？我搜索了但只找到了如何每 x 个周期或时间运行一个脚本的示例，而不是每 x 运行一次。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:06:35.663

您可以在每次关闭时调用批处理文件，并在顶部包含以下内容以在未达到关闭阈值时中止。

```
@echo off

::Test if the shutdown threshold has been met. Exit if it hasn't
setlocal
set /a "threshold=5, cnt=1"
set shutdownCountFile="C:\SomePath\shutdownCount.txt"
if exist %shutdownCountFile% for /f "usebackq" %%A in (%shutdownCountFile%) do set /a cnt=%%A+1
if %cnt% geq %threshold% (
  2>nul del %shutdownCountFile%
  endlocal
) else (
  >%shutdownCountFile% echo %cnt%
  exit /b
)

:: Your batch process goes here 
```

您还可以使用注册表项而不是文件来跟踪关闭次数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T15:16:26.543

```
@ECHO OFF
SET LIMIT=4
SET SAVEFILE="COUNT.TXT"
SETLOCAL ENABLEDELAYEDEXPANSION

REM Get the current count or start a new file if it does not exist.
IF EXIST %SAVEFILE% GOTO READFILE
ECHO 0 >%SAVEFILE%
:READFILE
SET /P COUNT= <%SAVEFILE%

REM Increment the save file value by one.
FOR %%B IN ( "%SAVEFILE%" ) DO (
  CALL :ADD_ONE
)
ECHO %COUNT% >%SAVEFILE%
GOTO CHECK_VALUE
:ADD_ONE
SET /A COUNT+=1
GOTO :EOF

REM Conditionally reset the counter and do something.
:CHECK_VALUE
IF %COUNT% LSS %LIMIT% EXIT /B
DEL %SAVEFILE% 2>NUL

ECHO Do your stuff here... 
```

# ruby-on-rails - 我应该使用“rake spec”还是“rspec”（不能让“rake spec”工作）？

> ID：12159402
> 
> 赞同：12
> 
> 时间：2012-08-28T12:38:53.870
> 
> 标签：ruby-on-rails, rspec, rake

我在 Rails 3.2 上，我正在使用 rspec (2.11.1)。当我使用“rake spec”运行我的测试套件时，我遇到了失败。当我用“rspec”运行它时，一切都通过了。我已经看到其他关于这个问题的提及，但没有任何明确的解释可以解释正在发生的事情以及最佳实践是什么。

如果我执行“rake spec”或“rake tmp:clear && rake spec”，我的测试将失败。

如果我执行“rspec”或“rspec spec”或“rake db:test:prepare && rspec”，我的测试将通过。

我认为唯一的区别是 rake 执行了“db:test:prepare”，但如果我在运行 rspec 之前手动执行此操作，我的测试就会通过，所以这不可能是全部。

在做了一些阅读之后，我改变了我的 Gemfile。以前我按照“The RSpec Book”（p328）进行了设置，其中描述了将 rspec gem 放入“group :development, :test”块中。在阅读了其他一些 SO 帖子后，我删除了 ":development" 并做了一个捆绑。现在“rake spec”什么都不做。“rspec”仍然像以前一样工作。

很困惑...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T22:54:24.490

尝试运行`RAILS_ENV=test rake spec`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-23T17:22:01.237

根据 rspec-rails github，将 rspec-rails gem 放入 Gemfile 的开发和测试组。这是因为 test rake 任务在切换到测试环境之前首先加载开发环境。

```
group :development, :test do
  gem 'rspec-rails'
end 
```

此外，如果您使用 Gemfile，请使用“bundle exec rake spec”来运行所有规范。要运行单个规范文件，请使用“bundle exec rake rspec path/to/spec_file”。使用“bundle exec”可确保您使用的是通过 Gemfile 安装的正确 rake 命令，而不是系统 rake 命令。

参考：[https ://github.com/rails/rails/issues/8591](https://github.com/rails/rails/issues/8591)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T21:49:19.440

这是为我解决的问题。我也能跑`rake spec RAILS_ENV=test` 我的 Gemfile 是这样的

```
group :developmet do
    gem 'rspec-rails','2.9.0'
...
end
group :test do
    gem 'rspec-rails','2.9.0'
...
end 
```

我把它改成了这个，为测试和开发做了一个块，并将它放在开发状态*之前。*我还确保我的数据库迁移已全部进入测试数据库。`db:migrate RAILS_ENV=test`

```
group :development,:test do
    gem 'rspec-rails','2.9.0'
        ...
end
group :development do
     ...
end 
```

# android - 并行执行多个 AsyncTask

> ID：12159403
> 
> 赞同：31
> 
> 时间：2012-08-28T12:38:56.020
> 
> 标签：android, parallel-processing, android-asynctask

我正在使用 Android SDK 4.0.3 API15，我想并行运行多个 AsyncTasks。我从网络服务器获取我的数据并实时动画（10 fps）。但根据用户操作，我还需要向 Web 服务器发送一些数据。发生这种情况时，我的动画会暂停一小段时间（发送数据进入队列并获取数据等待它完成），因此我无法捕捉实时。

这个[答案](https://stackoverflow.com/a/4072832/1465931 "回答")很好解释，但我无法让它发挥作用。因此，任何帮助将不胜感激。

我想我需要使用这个功能来实现：

```
AsyncTask.executeOnExecutor(Executor exec, Params... params) 
```

但是我不能将执行器作为参数传递，也无法实例化执行器。这是我的 AsyncTask 类：

```
public class GetPlayers extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {

        Thread.currentThread().setPriority(Thread.MAX_PRIORITY);

        rawData="";
        for (String url : urls) {
            DefaultHttpClient client = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);
            try {
                HttpResponse execute = client.execute(httpGet);
                InputStream content = execute.getEntity().getContent();

                BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
                if((rawData = buffer.readLine()) == null){
                    rawData = "error";
                }

            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        return rawData; 
    }

    @Override
    protected void onPostExecute(String result) {
        manipulate();
    }
} 
```

我像这样执行它：

```
GetPlayers task = new GetPlayers();
requestString = "web adress is here...";
task.execute(new String[] { requestString }); 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-28T13:19:29.607

我就是这样做的：

```
if( Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ) {
    new MyAsyncTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
} else {
    new MyAsyncTask().execute();
} 
```

`MyAsyncTask`常规 AsyncTask 子类在哪里。或者你可以将这一切包装在帮助类中：

```
class TaskHelper {

    public static <P, T extends AsyncTask<P, ?, ?>> void execute(T task) {
        execute(task, (P[]) null);
    }

    @SuppressLint("NewApi")
    public static <P, T extends AsyncTask<P, ?, ?>> void execute(T task, P... params) {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, params);
        } else {
            task.execute(params);
        }
    }
} 
```

然后做：

```
TaskHelper.execute( new MyTask() ); 
```

或者

```
TaskHelper.execute( new MyTask(), args ); 
```

或者

```
TaskHelper.execute( new MyTask(constructorParams), args ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-03T13:02:28.077

这个问题发生在我身上，当我在 AndroidStudio 中使用 Android 2.3 将我的应用程序从 Intelliy 更新到 sdk 25 时，只需一点改变 (executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, string1, ...); ) 即可完美运行。我有一个 AsyncTask 在服务中运行以供下载，并创建 AsyncTasks 以在无服务中上传。

# internet-explorer - 类似于 IE 的转换

> ID：12159406
> 
> 赞同：3
> 
> 时间：2012-08-28T12:39:01.013
> 
> 标签：internet-explorer, css, cross-browser, css-transitions

我知道 IE10 支持过渡，但是我可以在旧版本的 IE 上做类似的事情吗，我想要的只是一个框在它悬停时慢慢向上移动，我让它在所有其他网络浏览器上工作。感谢下面的代码

```
 .boxslider:hover{
    margin:37px 0 0 0;
    transition: margin 0.7s;
    -moz-transition: margin 0.7s; /* Firefox 4 */
    -webkit-transition: margin 0.7s; /* Safari and Chrome */
    -o-transition: margin 0.7s; /* Opera */
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T18:14:30.293

您可以使用 Modernizr.js 来了解当前浏览器是否支持 CSS 过渡：http: [//modernizr.com/](http://modernizr.com/)

如果不支持它们，则加载带有一些 jQuery 回退的 JavaScript 文件（将动画函数作为回调的事件处理程序）。

```
Modernizr.load({
  test: Modernizr.csstransitions,
  nope: 'IE-transitions-fallback.js'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T22:57:02.957

看看这个，它有点像 html5shiv，但对于 css3。

[http://code.google.com/p/css3shiv/](http://code.google.com/p/css3shiv/)

这也显示了完成工作的 microsoft-only css。我的建议是，如果您使用这种方法，您应该制作一个仅 ms 的样式表并使用条件 ie 语句加载它，因为正如[文章](http://coding.smashingmagazine.com/2010/04/28/css3-solutions-for-internet-explorer/)所述，仅 ms 的 css 不会验证，因为它不是 css。

[这是另一篇文章，其中包含更多提示。](http://www.amicontech.com/blog/css3-compatibility-with-all-browsers-including-ie/)

# c# - 静态类没有构造函数

> ID：12159409
> 
> 赞同：-1
> 
> 时间：2012-08-28T12:39:09.703
> 
> 标签：c#, serialization

我有这样的课：

```
public static class Extras
{
    static Extras()
    {

    }

    public static string SerializeObject<T>(this T toSerialize)
    {
        XmlSerializer xmlSerializer = new XmlSerializer(toSerialize.GetType());
        StringWriter textWriter = new StringWriter();

        xmlSerializer.Serialize(textWriter, toSerialize);
        return textWriter.ToString();
    }
} 
```

它用于序列化一个对象，它在它自己的类库中。

当我在我的主 MVC 项目中引用该类时，我从编译器收到以下消息：

```
Type'ReablementExtras.Extras' has no constructors. 
```

请有人能告诉我小小的心灵为什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:44:07.173

不能实例化静态类。您只能通过类名调用方法或属性：

```
var s = Extras.SerializeObject<int>(3); // OK

Extras e = new Extras(); // not OK
e.SerializeObject<int>(3); // not OK 
```

这种写法叫做`Extension Method`。您还可以调用该方法，就好像它是任何类型的类成员一样：

```
MyClass c = new MyClass();
var s = c.SerializeObject(); 
```

如果您`SerializeObject`在智能感知列表中看不到 ，则需要添加一条`using`语句，在您的情况下：

```
using ReablementExtras; 
```

您看到“无构造函数”错误的原因是此构造函数是静态的。不能直接调用静态构造函数，但框架会在您访问此类的第一个方法或属性之前调用它们。

静态构造函数也不能有访问修饰符（公共、私有等），也不能有任何参数。

# c++ - 如何使用 coreAudio 将标准化浮点值数组写入 AIFF？

> ID：12159418
> 
> 赞同：1
> 
> 时间：2012-08-28T12:39:29.010
> 
> 标签：c++, xcode, audio, core-audio, audiotoolbox

我已经尝试过以下代码，但在执行时会给出“fmt？” 错误告诉我“此文件类型不支持数据格式”。不幸的是，如果要写入 AIFF，我在任何地方都找不到说明应如何设置 AudioStreamBasicDescription 的参考。

我已经用谷歌搜索了这个问题并阅读了我能找到的所有文档，但无济于事。以前有人做过这种事情吗？任何想法我做错了什么？

```
//  This path is just for testing
char * filePath = "/Users/user/Desktop/reverb.aiff";

//  This value will actually be set by earlier code depending on how many mics are defined    
int channels = 1;

CFURLRef audioFileURL = CFURLCreateFromFileSystemRepresentation(NULL,
                                                                (const UInt8 *)filePath,
                                                                strlen(filePath),
                                                                false);

AudioStreamBasicDescription audioFileDescription = {0};
audioFileDescription.mFormatID         = kAudioFormatLinearPCM;
audioFileDescription.mFormatFlags      = kLinearPCMFormatFlagIsFloat | kLinearPCMFormatFlagIsBigEndian;
audioFileDescription.mBitsPerChannel   = sizeof(float) * 8;
audioFileDescription.mChannelsPerFrame = channels;
audioFileDescription.mBytesPerFrame    = (audioFileDescription.mBitsPerChannel / 8) * audioFileDescription.mChannelsPerFrame;
audioFileDescription.mFramesPerPacket  = 1;
audioFileDescription.mBytesPerPacket   = audioFileDescription.mBytesPerFrame * audioFileDescription.mFramesPerPacket;

AudioFileID audioFileID = 0;

OSStatus createFileStatus = AudioFileCreateWithURL(audioFileURL,
                                                   kAudioFileAIFFType,
                                                   &audioFileDescription,
                                                   kAudioFileFlags_EraseFile,
                                                   &audioFileID);

if (createFileStatus != 0) {
    cout << "Error creating output file" << endl;
    cout << "Error code: " << createFileStatus << ", ";

    //  hacky way of converting number back to kinda-readable enum code
    char chars[5];
    for (int i = 3; i >= 0; i--) {
        chars[i] = (char)createFileStatus;
        createFileStatus = createFileStatus >> 8;
    }
    char[4] = '\0';
    cout << chars << endl;
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T02:16:03.540

AIFF 类型不支持浮点数据，您需要创建一个 AIFF-C 文件。所以当你打电话时`AudioFileCreateWithURL`你使用`kAudioFileAIFCType`.

Big Endian 和 float 互不兼容，不要指定 bigEndian。

# ember.js - Ember 选择视图不适用于最新版本的 ember

> ID：12159419
> 
> 赞同：0
> 
> 时间：2012-08-28T12:39:34.850
> 
> 标签：ember.js

我有一个使用 ember 版本 ember-0.9.5.js 的 Ember 选择视图的工作示例

并且相同的示例不适用于最新版本的 Ember

[http://jsfiddle.net/k9Gp9/](http://jsfiddle.net/k9Gp9/)

## 非常感谢使第二个示例工作的任何帮助

稍后添加......在回答完问题后......

我用选择列表创建了另一个示例。我正在尝试遵循控制器负责填充模型并将其绑定到视图的 MVC 模式。

[http://jsfiddle.net/C7eY5/](http://jsfiddle.net/C7eY5/)

我无法让选择或选择值正常工作。与前面示例的唯一区别是控制器从 Em.Controller 扩展，并且绑定属性的名称不是默认的“内容”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:02:28.400

第二个小提琴仍然包含 0.9.5——我[将其更新](http://jsfiddle.net/pauldechov/k9Gp9/1/)为包含[ember-1.0.pre.js](https://github.com/downloads/emberjs/ember.js/ember-1.0.pre.js)和[把手](https://github.com/downloads/wycats/handlebars.js/handlebars-1.0.0.beta.6.js)（这是 ember 所必需但不再与 ember 捆绑在一起的），现在它就像第一个示例一样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-14T06:14:09.500

我在示例 2 中更新了您的代码。

[这是小提琴的链接](http://jsfiddle.net/C7eY5/6/)

```
{{view Ember.Select
     contentBinding="rvalues"
     selectionBinding="rvalue"
     optionLabelPath="content.name"
     optionValuePath="content.value"
     prompt="Pick a RValue:"
     id="emberEnhanced"}} 
```

# objective-c - 从照片库中获取图像多次显示错误

> ID：12159420
> 
> 赞同：0
> 
> 时间：2012-08-28T12:39:34.397
> 
> 标签：objective-c, ios5, uiimagepickercontroller

在我的 iPhone 应用程序中，当我使用 UIImagePickerControllerSourceTypePhotoLibrary 作为源类型时，打开它 5 次后，我得到：

```
<Error>: More than maximum 5 filtered album lists trying to register. This will fail. 
```

在我的控制台中。而且选择的图像也消失了。

if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]==YES) {

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
imagePicker.delegate = self;    
imagePicker.allowsEditing = YES;
imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
[self presentModalViewController:imagePicker animated:YES];
[imagePicker release]; 
} 
```

在方法中：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

我解雇了modalviewController。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:48:04.350

它与创建多个 UIImagePickerControllers 有关。您一次只提供一个图像选择器控制器，所以也许您应该在第一次调用您的 grabImage 时创建一个，然后重用它，而不是每次都创建一个新的。

参考[这个](https://stackoverflow.com/questions/10159056/xcode-error-with-more-than-5-uiimages)和[这个](https://stackoverflow.com/questions/7167373/iphone-more-than-maximum-5-filtered-album-lists-trying-to-register-this-will)还有[这个](https://stackoverflow.com/questions/7689119/ios-5-gm-error-more-than-maximum-5-filtered-album-lists-trying-to-register)链接

# postgresql - 如何列出所有活动会话的所有准备好的语句？

> ID：12159422
> 
> 赞同：9
> 
> 时间：2012-08-28T12:39:40.560
> 
> 标签：postgresql, prepared-statement, postgresql-9.1, database-administration

我知道有一种方法可以通过从`pg_prepared_statements`表中选择所有行来列出当前会话的所有准备好的语句，但是有没有办法查看**所有活动会话**的所有准备好的语句？我想我正在寻找类似管理员功能的东西，但我在文档中找不到类似的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T13:19:39.353

没有。AFAIK 准备好的语句是后端本地的；其他后端只是不知道它们存在。您需要修改服务器以添加额外的进程间通信，以允许一个后端向其他后端询问准备好的语句。

后端最初似乎共享相同的`pg_prepared_statements`表存储，如：

```
SELECT relfilenode FROM pg_class WHERE  relname = 'pg_prepared_statements'; 
```

从不同的后端返回相同的 relfilenode。我很惊讶，因为我认为准备好的语句在磁盘上没有存在。如果它们在磁盘上，我想您可以使用[pageinspect contrib 模块](http://www.postgresql.org/docs/current/static/pageinspect.html)中的函数来读取原始元组或表页。能见度是个问题；你怎么知道什么与死/终止的后端相关，什么是有效的？

我试过了，发现这`pg_prepared_statements`实际上是一个视图：

```
regress=# SELECT * FROM heap_page_items(get_raw_page('pg_prepared_statements', 1));
ERROR:  cannot get raw page from view "pg_prepared_statements" 
```

特别是对该`pg_prepared_statement()`功能的看法。所以没有什么可以检查的。它是内部的后端。

这似乎是其中之一“......但你为什么要这样做？” 问题，这通常表明有人在询问他们为实际问题设想的*解决方案，而不是询问他们的实际问题。*

所以：你为什么想要那个？你要解决的真正问题是什么？

# ruby-on-rails - 如何使用 rails api 对用户进行身份验证？

> ID：12159431
> 
> 赞同：0
> 
> 时间：2012-08-28T12:40:10.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api

我想开发一个简单的 api 供 iPhone 使用。我必须从身份验证过程开始，即在电话中用户必须输入用户名和密码，然后 api 必须检查它是否是有效用户并编写成功消息，否则必须发送失败消息。那么我该怎么做呢？

我看过例如，但我找不到从头开始的好教程。所以请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:16:20.310

如果您只想进行身份验证，rails 3 引入了 has_secure_password 方法。

到你的 gemfile gem 'bcrypt-ruby', '~> 3.0.0'

这个 gem 会加密你的密码。

您的数据库应该有 password_digest 列而不是密码。相应地创建迁移。

has_secure_password 增加了一些方法，比如认证。即你可以使用：

```
user.authenticate("secret_password") 
```

[http://apidock.com/rails/ActiveModel/SecurePassword/ClassMethods/has_secure_password](http://apidock.com/rails/ActiveModel/SecurePassword/ClassMethods/has_secure_password)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:45:56.143

你可以使用 devise gem 实现细节可以在[https://github.com/plataformatec/devise找到](https://github.com/plataformatec/devise)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T00:27:43.467

观看此 RailsCast，它将为您提供有关身份验证的很多见解。所以你应该使用用户名和密码来使用基本身份验证

[http://railscasts.com/episodes/352-securing-an-api](http://railscasts.com/episodes/352-securing-an-api)

# c# - 在表单应用程序中多次运行或启动后台工作程序

> ID：12159437
> 
> 赞同：1
> 
> 时间：2012-08-28T12:40:32.183
> 
> 标签：c#, backgroundworker

我想在完成后再次运行我的后台工作人员..就像

backgroundWorker1.do 工作，然后后台工作人员完成，然后再次运行后台 worker1.do 工作......怎么做......请注意，我必须一次又一次地运行许多后台工作......谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:45:13.603

您可以`RunWorkerAsync()`在`RunWorkerCompleted`事件处理程序中添加调用

```
 bw.RunWorkerCompleted += bw_RunWorkerCompleted;

    void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        ((BackgroundWorker)sender).RunWorkerAsync();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:12:35.777

如果您使用的是 .NET 4.0 或 .NET 4.5，则可以使用[Tasks](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)而不是 BackgroundWorker：

```
// Here your long running operation
private int LongRunningOperation()
{
   Thread.Sleep(1000);
   return 42;
}

// This operation will be called for processing tasks results
private void ProcessTaskResults(Task t)
{
   // We'll call this method in UI thread, so Invoke/BeginInvoke
   // is not required
   this.textBox.Text = t.Result;

}

// Starting long running operation
private void StartAsyncOperation()
{
   // Starting long running operation using Task.Factory
   // instead of background worker.
   var task = Task.Factory.StartNew(LongRunningOperation);   

   // Subscribing to tasks continuation that calls
   // when our long running operation finished
   task.ContinueWith(t =>
   {
      ProcessTaskResults(t);
      StartOperation();
   // Marking to execute this continuation in the UI thread!
   }, TaskScheduler.FromSynchronizationContext);
}

// somewhere inside you form's code, like btn_Click:
StartAsyncOperation(); 
```

在处理长时间运行的操作时，基于任务的异步是一种更好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:43:47.490

也许您可以创建一个具有相同属性的新 Backgroundworker，或者您只需在完成时调用 backgroundworker1.doWork()。

# qt - Qt - 在 QWidget 中滚动文本

> ID：12159443
> 
> 赞同：2
> 
> 时间：2012-08-28T12:40:48.343
> 
> 标签：qt, text, scroll, qwidget

我是 Qt 的新手。现在我正在学习**在 QWidget 中滚动文本**。当我的***文本大小小于小部件***时，文本应该只滚动一次，直到它到达末尾（文本从右向左移动）。一旦它到达左端，它应该再次从右端开始。请帮助我做到这一点...提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:55:50.693

```
*Here is my Coding....*

**ScrollText.h**

#ifndef SCROLLTEXT_H
#define SCROLLTEXT_H

#include <QWidget>
#include <QStaticText>
#include <QTimer>

class ScrollText : public QWidget
{
    Q_OBJECT
    Q_PROPERTY(QString text READ text WRITE setText)
    Q_PROPERTY(QString separator READ separator WRITE setSeparator)

public:
    explicit ScrollText(QWidget *parent = 0);

public slots:
    QString text() const;
    void setText(QString text);

    QString separator() const;
    void setSeparator(QString separator);

protected:
    void paintEvent(QPaintEvent *);

private:
    void updateText();
    QString _text;
    QString _separator;
    QStaticText staticText;
    int singleTextWidth;
    QSize wholeTextSize;
    int leftMargin;
    int scrollPos;
    QImage buffer;
    QTimer timer;

private slots:
    virtual void timer_timeout();
};

#endif // SCROLLTEXT_H

**ScrollText.cpp**

#include "Widget.h"
#include <QPainter>
#include <QDebug>

ScrollText::ScrollText(QWidget *parent) :
    QWidget(parent), scrollPos(0)
{
    staticText.setTextFormat(Qt::PlainText);
    setFixedHeight(fontMetrics().height());
    leftMargin = width();
    setSeparator("   ");
    connect(&timer, SIGNAL(timeout()), this, SLOT(timer_timeout()));
    timer.setInterval(30);
}

QString ScrollText::text() const
{
    return _text;
}

void ScrollText::setText(QString text)
{
    _text = text;
    updateText();
    update();
}

QString ScrollText::separator() const
{
    return _separator;
}

void ScrollText::setSeparator(QString separator)
{
    _separator = separator;
    updateText();
    update();
}

void ScrollText::updateText()
{
    singleTextWidth =  fontMetrics().width(_text);
    timer.start();
    scrollPos = 0;
    staticText.setText(_text + _separator);
    staticText.prepare(QTransform(), font());
    wholeTextSize = QSize(fontMetrics().width(staticText.text()), fontMetrics().height());
    timer.stop();
}

void ScrollText::paintEvent(QPaintEvent*)
{
    QPainter painter(this);
    buffer = QImage(size(), QImage::Format_ARGB32_Premultiplied);

    buffer.fill(qRgba(0, 0 ,0, 0));
    QPainter pb(&buffer);
    pb.setPen(painter.pen());
    pb.setFont(painter.font());

    int x = qMin(-scrollPos, 0)+ leftMargin + (leftMargin/2);

    if(x < width())
    {
        pb.drawStaticText(QPointF(x, (height() - wholeTextSize.height()) / 2) + QPoint(0,0), staticText);
        x +=  wholeTextSize.width();

        if(x < 0)
        {
            scrollPos = 0;
        }

        painter.drawImage(0, 0, buffer);
    }
}

void ScrollText::timer_timeout()
{
    scrollPos = (scrollPos+ 2);
    update();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:33:45.123

我可以想到两种方法来做到这一点，简单的方法和困难的方法。

*简单的方法：*

将 a`QLabel`放入 a`QScrollArea`并滚动周围的区域，可以由 a 控制`QTimer`。

*艰辛的道路：*

创建一个自定义`QWidget`滚动其`paintEvent`. 这样做的好处是可以更好地控制渲染，并可能降低资源使用率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T00:44:26.013

所以，这个问题有点令人困惑。听起来您需要更多关于如何设置从右到左自动换行的信息？

如果是这种情况，请使用 QLabel，将其 QWidget::layoutDirection 属性设置为 RightToLeft 而不是默认的 LeftToRight，并将其 QLabel::wordWrap 属性设置为 True。

# java - java getLocalHost() UnknownHostException /etc/hosts 文件与 linux api 不同？

> ID：12159444
> 
> 赞同：2
> 
> 时间：2012-08-28T12:40:51.217
> 
> 标签：java, linux

我有两台 redhat 6.3 机器，两台 /etc/hosts 都没有变化（即我没有为它们添加 IP 地址）。在我的机器上可以正常运行 getLocalhost 并返回主机名 a.domain.com。另一个因 UnknownHostException 而失败。

以前，我总是将 ip 添加到 /etc/hosts，但我想知道为什么这台机器不需要它。两台机器上的 /etc/nsswitch.conf 都有“hosts: files dns”，所以两台机器上的文件都是一样的。

/etc/sysconfig/network-scripts/ifcfg-eth0 脚本有很大的不同。得到 UnknownHostException 的节点是这样的

```
DEVICE="eth0"
BOOTPROTO="static"
NM_CONTROLLED="yes"
ONBOOT="yes"
TYPE="Ethernet"
IPADDR=10.10.1.5
PREFIX=23 
```

有效的有这样的东西......

```
DEVICE="eth0"
HWADDR="AA:AA:AA:AA:3F:A8"
NM_CONTROLLED="yes"
ONBOOT=yes
TYPE=Ethernet
BOOTPROTO=none
DEFROUTE=yes
IPV4_FAILURE_FATAL=yes
IPV6INIT=no
NAME="System eth0"
IPADDR=10.10.1.2
PREFIX=23
GATEWAY=10.10.1.1
DNS1=10.20.100.100
DNS2=10.20.100.101
DOMAIN="domain.com sub.domain.com" 
```

这可能是原因吗？或者我可以查看哪些其他文件以了解为什么这不起作用？我假设 java 正在对机器进行一些 linux getLocalHost api 调用以获取主机名。

谢谢，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:51:20.280

啊，我偶然发现了不同之处。在我的 /etc/sysconfig/network 文件中，我在工作机器上有 FQDN，但在另一台机器上，我只有主机名“b”，因此将其更改为“b.domain.com”解决了问题，但我没有根本不需要修改我的 /etc/hosts 文件！！！！

院长

# apache - Apache mod rewrite，DirectorySlash Off root fix（查看索引）

> ID：12159449
> 
> 赞同：0
> 
> 时间：2012-08-28T12:41:06.007
> 
> 标签：apache, .htaccess, mod-rewrite

我很不幸被困在这里。我为干净的 url 做了一个 htaccess 重定向。但是每当我有一个对应于现有目录的路径时，就会添加一个反斜杠，这非常烦人并且在我的脚本中产生错误。

所以我将 DirectorySlash 选项更改为 Off，它完美地解决了我的问题。是的，我知道安全警告和停用的索引。

现在我的大问题如下：如果输入的网站路径没有尾部斜杠，我无法重定向到我的 index.php，因为 REQUEST_URI 是空的。

所以，“www.my-website.com/”可以工作，但“www.my-website.com”不行。

我心想“好吧，我只会检测 REQUEST 是否为空”。什么都没发生。或者可能只为子文件夹关闭目录斜线？经过数小时的搜索，我发现以下方法确实有效，但这意味着我必须努力编写 url，这确实不是最佳的

```
Options +FollowSymlinks
RewriteEngine on
  #prevent from weird bug if path is a directory
DirectorySlash Off

  # add the trailing slash to root directory
  # THIS IS WHERE I NEED A VARIABLE PATH THAT I DON'T NEED TO CHANGE MANUALY
RedirectMatch ^/?([^\.\/]+)$ http://my-fixed-url.com/$1/

  # Don't show directory indexes (the listing of files)
Options -Indexes -MultiViews

  # as long is it isn't an existing file
RewriteCond %{REQUEST_FILENAME} !-f

  # Then redirect to index.php with the param "path" set to the url
RewriteRule ^([a-zA-Z0-9\_\-\/\.]+)$ index.php?path=$1 [QSA] 
```

任何帮助都深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:34:41.473

只需将 , 更改`+`为`*`也匹配此“空”网址。所以：

```
RewriteRule ^([a-zA-Z0-9\_\-\/\.]*)$ index.php?path=$1 [QSA] 
```

# c# - 如何在 wpf 的 PasswordBbox 中找到光标位置？

> ID：12159454
> 
> 赞同：0
> 
> 时间：2012-08-28T12:41:36.827
> 
> 标签：c#, wpf, passwordbox

![在此处输入图像描述](../Images/6de808e01ea6c2f6eecb2941c6039f39.png)

在上图中，光标在 PasswordBox 中的三个文本值后闪烁。现在我想找到光标当前闪烁的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:59:51.270

PasswordBox 不公开任何获取/设置克拉位置的方法。

它可能具有您可以通过反射访问的非公共属性（请参阅此[相关问题](https://stackoverflow.com/questions/990311/how-can-i-set-the-caret-position-to-a-specific-index-in-passwordbox-in-wpf "相关问题")），但绝对没有“正确”的方法可以做到这一点。

# xaml - Windows 8 应用程序：找不到字符串

> ID：12159455
> 
> 赞同：2
> 
> 时间：2012-08-28T12:41:37.583
> 
> 标签：xaml, windows-8, microsoft-metro

我正在使用 XAML 和 C# 开发 Windows 8 应用程序。我创建了一个用于存储本地化字符串的资源字典。

在按原样使用“ < String > ”标签时，编译器会识别它，但会说它不受支持。

在我当前的配置中：

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:s="using:System">

    <s:String x:Key="start">Start</s:String>
    <s:String x:Key="pause">Pause</s:String>
    <s:String x:Key="stop">Stop</s:String>

    <s:String x:Key="deleteSelected">Delete Selected</s:String>

    <s:String x:Key="timer">Timer</s:String>
    <s:String x:Key="timers">Timers</s:String>
    <s:String x:Key="stopper">Stopper</s:String>
    <s:String x:Key="stoppers">Stoppers</s:String>
    <s:String x:Key="alarmClock">Alarm Clock</s:String>
    <s:String x:Key="alarmClocks">Alarm Clocks</s:String>

    <s:String x:Key="recordLap">Record Lap</s:String>
</ResourceDictionary> 
```

这是调试输出：

```
'TimeLord.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'TimeLord.exe' (Managed (v4.0.30319)): Loaded 'C:\Users\Gilad Naaman\documents\visual studio 2012\Projects\TimeLord\TimeLord\bin\Debug\AppX\TimeLord.exe', Symbols loaded.
'TimeLord.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Runtime\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Runtime.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'TimeLord.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\system32\WinMetadata\Windows.UI.Xaml.winmd', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'TimeLord.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Runtime.InteropServices.WindowsRuntime\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Runtime.InteropServices.WindowsRuntime.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'TimeLord.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\system32\WinMetadata\Windows.ApplicationModel.winmd', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'TimeLord.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Collections\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Collections.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'TimeLord.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.ObjectModel\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.ObjectModel.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'TimeLord.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System\v4.0_4.0.0.0__b77a5c561934e089\System.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'TimeLord.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\system32\WinMetadata\Windows.Foundation.winmd', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'TimeLord.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Runtime.WindowsRuntime.UI.Xaml\v4.0_4.0.0.0__b77a5c561934e089\System.Runtime.WindowsRuntime.UI.Xaml.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'TimeLord.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Runtime.WindowsRuntime\v4.0_4.0.0.0__b77a5c561934e089\System.Runtime.WindowsRuntime.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
A first chance exception of type 'Windows.UI.Xaml.Markup.XamlParseException' occurred in TimeLord.exe
WinRT information: The type 'String' was not found. [Line: 13 Position: 44]
An exception of type 'Windows.UI.Xaml.Markup.XamlParseException' occurred in TimeLord.exe but was not handled in user code
WinRT information: The type 'String' was not found. [Line: 13 Position: 44]
Additional information: Unspecified error
'TimeLord.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.Debugger.Runtime\11.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.Debugger.Runtime.DLL'
'TimeLord.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Configuration\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Configuration.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'TimeLord.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Xml\v4.0_4.0.0.0__b77a5c561934e089\System.Xml.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
A first chance exception of type 'System.Exception' occurred in TimeLord.exe
'TimeLord.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Diagnostics.Debug\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Diagnostics.Debug.dll'
The program '[4992] TimeLord.exe: Program Trace' has exited with code 0 (0x0).
The program '[4992] TimeLord.exe: Managed (v4.0.30319)' has exited with code -1073741189 (0xc000027b).
Activation of the Windows Store app 'f109d0b0-d566-47cd-9551-2969e7b4abab_capbppsrwz44p!App' failed with error 'Windows was unable to communicate with the target application.  This usually indicates that the target application's process aborted. More information may be available in the Debug pane of the Output window (Debug->Windows->Output)'. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T13:34:05.853

改用这个：

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

     <x:String x:Key="start">Start</x:String> 
```

请参阅[MSDN 上的此示例](http://msdn.microsoft.com/en-us/library/windows/apps/hh986965.aspx)

# c# - 根据属性值在c#中查找函数

> ID：12159459
> 
> 赞同：2
> 
> 时间：2012-08-28T12:41:57.473
> 
> 标签：c#, linq, reflection

我想通过一些适配器，基于属性值访问一个类的功能。所有函数都具有相同的原型
，我想这样做的方式是声明这样的字典：

```
Dictionary<key_values, Delegate_of_Functions> 
```

其中`key_values`包含标识函数的值的类，并且`Delegate_of_Functions`是函数类型的委托。

现在，我尝试执行以下操作：

```
Functions = new Dictionary<string, function>();

var a = from Fun in typeof(TheFunctionsContainer).GetMethods()
        where Fun.GetCustomAttributes(typeof(The_Attribute), true).Length != 0
        select Fun;

foreach (var c in a)
{
  Functions.Add(
    c.GetCustomAttributes(true).OfType<The_Attribute>().First().key,
    new function(c)); // this line dose not compile
} 
```

我的问题是：

*   如何让未编译的行编译？
*   有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:58:51.663

鉴于这`function`是一个代表

```
delegate void function(); 
```

您可以使用[`Delegate.CreateDelegate`](http://msdn.microsoft.com/de-de/library/system.delegate.createdelegate.aspx)创建委托的方法

```
var Functions = new Dictionary<string, function>();

var a = typeof(TheFunctionsContainer).GetMethods().Where(f => f.GetCustomAttributes(typeof(The_Attribute), true).Any());

foreach (var c in a)
{
    Functions.Add(
      c.GetCustomAttributes(true).OfType<The_Attribute>().First().key,
      (function)Delegate.CreateDelegate(typeof(function), c)); 
} 
```

如果要在实例上执行非静态方法，则必须提供您希望方法调用的实例[`Delegate.CreateDelegate`](http://msdn.microsoft.com/de-de/library/system.delegate.createdelegate.aspx)：

```
(function)Delegate.CreateDelegate(typeof(function), yourInstance, c) 
```

或者只是看 svicks 评论:-)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T12:57:01.203

一种直接的方法是在您找到的[`Invoke`方法](http://msdn.microsoft.com/en-us/library/a89hcwhh.aspx)上调用该方法。您可以在添加到您的字典中的匿名代表中执行此操作。

你说你所有的函数都有相同的*原型*（在 C# 中通常称为*签名*），但由于你没有指出签名是什么，我将简单地假设一个 void 方法，它接受一个字符串和一个整数（由在我下面的`Action<string, int>`示例代码中）。我相信您可以更改代码以使其适合您:-)

中的每个元素`a`，即循环中的`c`每个元素，都是类型：`foreach`[`MethodInfo`](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.aspx)

```
var Function = new Dictionary<string, Action<string, int>>();

// your code for discovering the suitable functions and filling a

foreach (var c in a) {
    Functions.Add(c.GetCustomAttributes(true).OfType<The_Attribute>().First().key,
      (s, i) => {
          c.Invoke(null, new object[] { s, i });
      });
} 
```

不过，在向该字典添加任何内容之前，您可能需要检查该`MethodInfo`实例是否表明该方法*确实*具有所需的签名。否则，有人可能有意或无意地使用该属性标记具有不同签名的方法，并且调用`Invoke`将失败。

# parameters - tcl - 如何保存进入 proc 的所有参数以供以后重用？

> ID：12159463
> 
> 赞同：2
> 
> 时间：2012-08-28T12:42:02.463
> 
> 标签：parameters, tcl, procedure

我正在使用形成数据包内容的函数 (A)。该函数接受任意数量的参数。我希望实现另一个功能（B），形成由（A）形成的最后一个数据包。我希望通过在我上次使用 (A) 的相同参数上运行 (A) 来做到这一点。诀窍是（A）使用类似的东西接受未知数量的参数

```
proc example {first {second ""} args} 
```

有没有什么简单的方法可以快速保存所有参数，然后稍后再次使用相同的参数调用 (A)？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T13:45:16.563

最简单的方法是在运行时`A`创建`B`，借助以下工具非常简单`info level 0`：

```
proc A {p q {r ...} args} {
    # Make B which will call us *exactly* as we've just been called
    proc B {} [list uplevel 1 [info level 0]]
    # ... continue with normal processing ...
} 
```

对此有一些警告（例如，如果您正在使用别名进行繁重的处理或复杂的跨命名空间工作），但对于大多数代码——尤其是你想要的那种东西——这并不是什么大问题。

* * *

^(在 8.6 中，`proc B {} [list tailcall {*}[info level 0]]`改为使用。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:09:16.700

好吧，您可以使用全局数组来存储参数：

```
proc printArguments {first {second ""} args} {
global params
set params(first) $first
set params(second) $second
set params(args) $args
}
%
%
% printArguments 1 2 3 4 5
3 4 5
%
% parray params
params(args)   = 3 4 5
params(first)  = 1
params(second) = 2 
```

# .net - FileVersionInfo 在 Win2008 R2 中不起作用

> ID：12159467
> 
> 赞同：0
> 
> 时间：2012-08-28T12:42:11.413
> 
> 标签：.net, windows-server-2008-r2

我正在尝试在我的 Windows Server 2008 R2 64 位（不是 SP1）上使用以下代码。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Xml;
using System.Diagnostics;
using System.IO;

namespace TestWrite
{
class Program
{
    static void Main(string[] args)
    {

        try
        {

        FileVersionInfo myFileVersionInfo = FileVersionInfo.GetVersionInfo(@"C:\Windows\system32\Notepad.exe");

             Console.WriteLine( "File: " + myFileVersionInfo.FileDescription + '\n' + "Version number: " + myFileVersionInfo.FileVersion);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
        }
        Console.ReadLine();   
    }
}
} 
```

我收到此错误消息：System.DllNotFoundException：无法加载 DLL 'version.dll'：系统找不到指定的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:05:12.573

请务必检查以下内容：

*   该`System.Diagnostics`库通过执行此代码来工作

    ```
    EventLog[] eventLogs = EventLog.GetEventLogs();
    foreach (EventLog e in eventLogs) {
        Console.WriteLine("{0}:", e.LogDisplayName);
    } 
    ```

*   就像[David W](https://stackoverflow.com/users/1345535/david-w)指出的那样，检查解决方案平台（`Any CPU`或`x86`通过`Solution Configuration Manager`）

*   是否`.NET Framework 4.0`正确安装？或者尝试重新安装。

# android - 仅在三星 Galaxy S3 上出现“OutOfMemory”异常

> ID：12159475
> 
> 赞同：5
> 
> 时间：2012-08-28T12:42:38.183
> 
> 标签：android, crash, out-of-memory, galaxy, heap-size

三星 Galaxy S3 在我的应用程序上几乎立即使用 32mb 堆大小，而在几乎任何其他 android 设备上它从 +- 5mb 开始（在 logcat 中看到这一点，如果需要，可以从两个不同的设备发送屏幕截图）。认为这是我的应用程序仅在 Galaxy s3 上因“OutOfMemory”异常而崩溃的原因，在 Galaxy Y Duos 和 Pocket 上完美运行。

任何有关为什么会发生这种情况的帮助/建议将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T13:11:00.110

正如 mario 所说，问题在于 s3 分辨率高于其他模型，因此图像尺寸更大，因此内存消耗也更大。

虽然值得一提的是，S3 似乎有一点最大堆大小来解决它的分辨率，因为我也遇到过内存不足的问题，但对于其他具有相同分辨率但堆限制更高的设备却没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-25T11:23:32.643

在大多数情况下，OOM 不是加载位图或类似的，但主要是基于 GPU 阅读此[链接](https://stackoverflow.com/a/8748565/3514144)和此链接[也](https://stackoverflow.com/a/4919382/3514144)只是[查看此解决方案以解决由 OOM 引起的各种情况](https://stackoverflow.com/a/10408877/3514144)

在我的情况下，我已经替换了试图从中加载的图像可绘制对象，可以使用 drawable-nodpi

在我的应用程序中，drawable-hdpi 拥有该应用程序的所有图像。在大多数设备上，没有问题。在 S3 上，该应用程序将占用 2 倍的内存，然后遇到内存不足的问题。

我刚刚创建了与 drawable-hdpi 文件夹具有相同内容的 drawable-xhdpi 文件夹并在 S3 上运行它。立即注意到内存占用是 1/2，并且没有内存不足的问题。

# image - 使低分辨率图像更大尺寸

> ID：12159480
> 
> 赞同：3
> 
> 时间：2012-08-28T12:42:46.757
> 
> 标签：image, testing, image-processing, automated-tests

有一个 380x380 分辨率的 png 图像，大小为 980 位。我需要的是相同的分辨率和扩展图像，但大小超过 1Mb。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T13:38:19.103

PNG是一种无损压缩格式。如果您的图像是全白的，它会压缩到非常小的尺寸。

您应该用随机像素填充图像。但即便如此，您将获得的最大大小将是 600 kB（每像素 380 * 380 * 4 字节）。

PNG 格式还允许在文件后附加任何数据，因此您可以在文件末尾添加 1 MB 的零。

# asp.net - ASP.NET Webgarden 共享静态对象

> ID：12159482
> 
> 赞同：0
> 
> 时间：2012-08-28T12:42:52.753
> 
> 标签：asp.net, singleton, xmpp, shared, web-garden

我有一个需要使用 jabber-net 对象向客户端发送 XMPP 消息的 web 服务。

（它用于处理打印：当 web 服务需要打印某些东西时，我将 XMPP 消息发送到在插入打印机的特定机器上运行的 Windows 窗体客户端，带有打印作业类型和 URL，然后客户端下载数据并将其发送到打印机。此通信通道还将用于其他 POS 功能，例如打开抽屉、与芯片和引脚设备通信等，因此打印替代方案将无济于事）。

我有一个包含 jabber-net 对象实例的静态对象，它登录到 XMPP 服务器，然后可用于发送消息。

这工作正常单线程。当我将 web 服务转换为 web 园以便它可以在多个线程上工作时，似乎每个线程都有自己的 jabber-net 对象实例，所以他们都试图登录到 XMPP 服务器一次作为同一用户，这意味着他们不断被踢出。

问题：有没有办法在网络花园中的所有线程之间共享一个活动对象（可能处理事件，而不是序列化对象，而不仅仅是数据），如果是这样，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:52:46.597

网络花园基本上是微型网络农场，应该这样对待 - 寻找网络农场涉及的解决方案，这些相同的解决方案将适用于您的案例。

我被会话和网络花园所吸引，最终切换到进程外会话提供程序（我使用了基于 memcached 的提供程序，但 SQL Server 提供程序可以工作）。您可以做类似的事情，并拥有一个共享提供者，每个线程都可以从中请求对象。

不过，这不会解决您的事件问题 - 我怀疑这是否可以通过这种方式解决，并且您可能必须切换到消息传递系统（例如 msmq），所有消息都由单个进程处理。

# wordpress - Wordpress 将标题导航列表项更改为 div

> ID：12159486
> 
> 赞同：6
> 
> 时间：2012-08-28T12:43:03.540
> 
> 标签：wordpress

我想将每个 ul,li 标签更改为 wordpress header.wp_nav_menu() 的 div 标签总是返回 ul,li。这是我想要更改的。

```
<ul>
  <li>Home</li>
  <li>Services</li>
  <li>Products</li>
</ul> 
```

这必须是这样的变化。

```
<div>
  <div>Home</div>
  <div>Services</div>
  <div>Products</div>
</div> 
```

请帮我。谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-28T14:17:08.763

你需要一个自定义的walker来做到这一点，[**这个由**](https://wordpress.stackexchange.com/questions/14037/menu-items-description-custom-walker-for-wp-nav-menu/14039#14039)[**toscho**](https://wordpress.stackexchange.com/users/73/toscho)回答的修改版本，只需将这个类粘贴到你的`functions.php`

```
class Description_Walker extends Walker_Nav_Menu
{
    function start_el(&$output, $item, $depth, $args)
    {
        $classes = empty($item->classes) ? array () : (array) $item->classes;
        $class_names = join(' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item ) );
        !empty ( $class_names ) and $class_names = ' class="'. esc_attr( $class_names ) . '"';
        $output .= "<div id='menu-item-$item->ID' $class_names>";
        $attributes  = '';
        !empty( $item->attr_title ) and $attributes .= ' title="'  . esc_attr( $item->attr_title ) .'"';
        !empty( $item->target ) and $attributes .= ' target="' . esc_attr( $item->target     ) .'"';
        !empty( $item->xfn ) and $attributes .= ' rel="'    . esc_attr( $item->xfn        ) .'"';
        !empty( $item->url ) and $attributes .= ' href="'   . esc_attr( $item->url        ) .'"';
        $title = apply_filters( 'the_title', $item->title, $item->ID );
        $item_output = $args->before
        . "<a $attributes>"
        . $args->link_before
        . $title
        . '</a></div>'
        . $args->link_after
        . $args->after;
        $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
    }
} 
```

`wp_nav_menu`像`header.php`下面这样打电话

```
wp_nav_menu(
    array (
        'menu' => 'main-menu',
        'container' => 'div', // parent container 
        'container_id' => 'my_nav', //parent container ID
        'depth' => 1,
        'items_wrap' => '%3$s', // removes ul
    'walker' => new Description_Walker // custom walker to replace li with div
    )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-24T17:45:42.063

```
<ul class="navbar-nav mx-auto">
        <li class="nav-item dropdown active dropdown-slide">
          <a class="nav-link" href="#"  data-toggle="dropdown">Home
            <span>/</span>
          </a>
          <!-- Dropdown list -->
          <div class="dropdown-menu">
            <a class="dropdown-item" href="index.html">Homepage</a>
            <a class="dropdown-item" href="homepage-two.html">Homepage 2</a>
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="speakers.html">Speakers
            <span>/</span>
          </a>
        </li>
        <li class="nav-item dropdown dropdown-slide">
          <a class="nav-link" href="#" data-toggle="dropdown">Pages<span>/</span></a>
            <!-- Dropdown list -->
            <div class="dropdown-menu">
              <a class="dropdown-item" href="about-us.html">About Us</a>
              <a class="dropdown-item" href="single-speaker.html">Single Speaker</a>
              <a class="dropdown-item" href="gallery.html">Gallery</a>
              <a class="dropdown-item" href="gallery-two.html">Gallery-02</a>
              <a class="dropdown-item" href="testimonial.html">Testimonial</a>
              <a class="dropdown-item" href="pricing.html">Pricing</a>
              <a class="dropdown-item" href="FAQ.html">FAQ</a>
              <a class="dropdown-item" href="404.html">404</a>
            </div>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="schedule.html">Schedule<span>/</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="sponsors.html">Sponsors<span>/</span></a>
        </li>
        <li class="nav-item dropdown dropdown-slide">
          <a class="nav-link" href="#"  data-toggle="dropdown">News
            <span>/</span>
          </a>
          <!-- Dropdown list -->
          <div class="dropdown-menu">
            <a class="dropdown-item" href="news.html">News without sidebar</a>
            <a class="dropdown-item" href="news-right-sidebar.html">News with right sidebar</a>
            <a class="dropdown-item" href="news-left-sidebar.html">News with left sidebar</a>
            <a class="dropdown-item" href="news-single.html">News Single</a>
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="contact.html">Contact</a>
        </li>
      </ul> 
```

# windows - MSP 与 MSI 封装。哪个用于补丁？

> ID：12159487
> 
> 赞同：12
> 
> 时间：2012-08-28T12:43:05.770
> 
> 标签：windows, wix, package, windows-installer, msi-patch

目前我正在开发一个使用 MSI 包部署的项目。要修补程序，我们只需部署另一个与 MSP 相对的 MSI 安装程序包。这是解决此问题的有效/高效方法，还是我们应该部署 MSP 补丁包？我有过 MSI 但没有 MSP 的经验。我还将如何创建 MSP 补丁？我在互联网上搜寻，似乎找不到任何东西。

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-29T22:06:04.837

**修补非常复杂且难以使用，如果您不遵循正确的 MSI 做法，则非常不可靠。**

我只在必要时使用它，以实现无法以任何其他方式提供的修复。这方面的一个**示例**是，如果**产品的卸载顺序被破坏**，导致卸载没有完成而是进入回滚状态。然后我**用一个小的升级补丁**来修复已安装产品中的错误，然后卸载它。我以这种方式制作的大部分补丁都是使用**Wise Package Studio 制作**的——而且效果很好。

我还使用补丁来为已发布的产品提供**非常小的修复。**通常只有一个或两个带有一些**紧急修补程序**的文件。任何复杂的软件版本都可能在主要发布几周后迫切需要这样的补丁，因为在野外发现了紧急问题并且需要快速修复。这是为了防止最终用户进行大量下载。在这些情况下，我总是启用“**包含整个文件**”，以防止众所周知容易出错的位级修补。

许多人希望使用修补程序向 QA 测试人员提供**每日小幅更新。****算了**。除非您的测试人员在海外，否则不值得冒险，当然也不值得付出努力，而且几乎不会节省任何时间。如果您确实需要为 QA 测试人员打补丁，请不要使用位级别的补丁，因为如果他们在安装文件夹中弄乱了，这将失败 - 优秀的 QA 测试人员可能会这样做。

如果您需要为已发布的产品打补丁，请确保充分利用任何可用的 QA 测试人员，并让他们在不同平台上运行补丁，从不同版本、不同语言升级等……这非常困难做对。不针对过多的先前版本使用补丁也是不可取的，因为这往往会使事情迅速复杂化。

总体：请记住，[**修补程序是为修补程序设计的**](https://stackoverflow.com/a/23450821/129130)。如果您正在研究为您的产品使用修补程序，链接的文章可能值得一读。它有点混乱，但描述了几个 MSI 修补障碍。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-28T12:49:19.507

选择实际上取决于您，尽管 MSP 提供较小的文件大小，这对于大型项目可能是有利的。特别是，[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/aa370578%28VS.85%29.aspx)说：

> 通过提供 Windows Installer 补丁而不是更新产品的完整安装包来服务应用程序可能具有优势。补丁可以包含整个文件或仅包含更新部分文件所需的文件位。这可以让用户下载一个比整个产品的安装包小很多的升级补丁。使用补丁的更新可以通过升级保留应用程序的用户定制。

[此页面](http://murrayon.net/2008/03/creating-patch-installers.html)提供了有关使用该`MSIMSP`实用程序在给定新旧 MSI 软件包的情况下生成 MSP 补丁文件的建议。

# c# - asp.net 按钮不会触发其 OnClick 事件

> ID：12159492
> 
> 赞同：0
> 
> 时间：2012-08-28T12:43:22.847
> 
> 标签：c#, .net, visual-studio-2010

我认为这个解决起来相当简单，因为我记得以前遇到过这个问题，但不记得我做了什么......

我决定取消一个特定的 asp.net 页面，并将它的一些控件合并到另一个现有页面（几个文本框和 2 个按钮），复制并粘贴它们并添加代码隐藏。

由于这样做，我修改后的页面上的任何按钮都不会触发它们的 OnClick 事件，因此我尝试添加一个新按钮，但这也不会触发。

这些按钮的实际代码隐藏很简单 - 保存记录，response.redirect 之类的东西。

有任何想法吗？

谢谢

按钮标记

```
<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Save" 
                Width="91px" /> 
```

代码隐藏

```
protected void Button1_Click(object sender, EventArgs e)
    {

        helper hl = new helper();
        hl.UpdateComplaint(txtCaseNo.Text, Forename.Text, Surname.Text, txtActionProgress.Text,            
 Response.Redirect("Complaint.aspx");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:49:10.860

您可以尝试以下几件事。没有保证，但也许是朝着正确的方向推进:)

打开 Visual Studio 和相关的 ASP.NET 页面。在设计器中，单击控件，然后转到“属性”框，然后查找 OnClick 事件。如果它是空白的，请单击该框并从可用的下拉列表中选择要附加的事件处理程序。如果列表中没有事件，只需双击查看 Visual Studio 是否只会为您创建默认事件处理程序，然后将前一个 onClick 处理程序中的代码粘贴到该新方法中。

希望有帮助。

**编辑**根据后来的评论，建议从不同的 ASP.NET 页面完整复制和粘贴代码隐藏可能会创建与新页面上标记的 CodeFile 或 Inherits 指令不匹配的部分类声明，这可能会导致各种奇怪的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:54:31.363

不`OnClick="Button1_Click"`区分大小写吗？您是否尝试在事件处理程序中设置断点，以查看它是否触发？这可能是一个`Page_Load`问题吗？你做事没有

```
if (!Page.IsPostBack) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:46:46.123

因为您在专门的 OnClick 事件后面的代码中定义了您的委托

您必须复制此代码

```
Button.Click += ..... 
```

您可以在 aspx 视图或后面的代码中关联此委托，对于您在代码后面制作的情况，您不会复制

如果您进行复制粘贴，请验证您的 aspx 代码文件

# jquery - 将 Aloha 编辑器添加到 Django Admin，jQuery 兼容性问题随之而来

> ID：12159494
> 
> 赞同：1
> 
> 时间：2012-08-28T12:43:33.720
> 
> 标签：jquery, django-admin, aloha-editor

我正在用 Django 写个人博客，并希望将 Aloha Editor 包含到管理面板中。我一直按照说明进行操作，但失败了。然后我尝试了其他方法，包括将更新版本的 jQuery（而不是 Django 的 1.4.2）放入我的`/static/admin/js`. 似乎 jQuery 在需要时不可用（在`document.ready`），但在以后的任何时候，通过 django.jQuery 从控制台启用 Aloha 工作...

```
>>> django.jQuery('.vLargeTextField').aloha() //works
>>> $('.vLargeTextField').aloha() // does not work; jQuery 1.7.2 loaded by Aloha 
```

我的**模板/管理员/base_site.html**（*相关块*）：

```
{% block extrastyle %}
<link href="/static/admin/local-lib/alohaeditor-0.21.3/aloha/css/aloha.css" rel="stylesheet" type="text/css" />
{% endblock %}

{% block extrahead %}
<script type="text/javascript" src="http://requirejs.org/docs/release/2.0.6/minified    /require.js"></script>
<script src="/static/admin/local-lib/alohaeditor-0.21.3/aloha/lib/aloha.js"
data-aloha-plugins="common/ui,
        common/format,
        common/list,
        common/link,
        common/highlighteditables">
</script>
<script type="text/javascript">
Aloha.ready( function() {
  Aloha.jQuery('.vLargeTextArea').aloha();
});
</script>
{% endblock %} 
```

*中断包括：表格内联现在不稳定，可折叠字段集现在与 jQuery 1.4.2 有一点不同的行为。

## 编辑

似乎将 Aloha 插入管理面板的唯一真正方法是将最后一个脚本放在`blockbots`(!!!) 块中，该块在标准 Django 管理包含项下呈现。此外，必须使用 Aloha 提供的 jQuery 来与 Aloha 一起使用，因为我放入的 1.8`/static/admin`将无法使用。对于 Django 的管理员，我恢复到提供的 1.4.2。但是，出现了新问题：Aloha 的工具提示在页面底部堆积，并且不会消失。此外，控制台充满了错误。有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T00:25:34.137

您可以尝试为 aloha 使用预构建的 django 集成包： [https](https://pypi.python.org/pypi/django-aloha-edit) ://pypi.python.org/pypi/django-aloha-edit ，

然后使用 HTMLField，或者简单地使用 AlohaWidget 并指定后端。HTMLField 进行了重要的清理工作，但如果您只是从受信任用户的后端进行编辑，则没有必要，您只需覆盖后端中的小部件即可。

```
formfield_overrides = {
    models.TextField: {'widget': AlohaWidget(attrs={'style':'width:100%;max-width:800px;height:80ex;'})},
} 
```

这样做的好处是，自动包含所需的 js 资源 - 包括仅用于 Aloha 的 jQuery 版本。（这两个版本可以独立行动。）

# asp.net-mvc - 上传大文件：是否需要恢复选项？

> ID：12159495
> 
> 赞同：1
> 
> 时间：2012-08-28T12:43:35.083
> 
> 标签：asp.net-mvc, file-upload, large-files, swfupload

在我的 MVC 项目中，我必须让用户上传大型视频文件（大小 > 1 GB）。使用 Flash 或 Silverlight 有很多不错的选择。

由于文件很大，**上传过程可能会**在两者之间停止。因此，我们有这些设计问题：

1.  上传插件是否必须支持**暂停/恢复**选项？我实际上不需要暂停功能，但是当用户重新启动进程时，上传将从停止的地方恢复。
2.  用户是否必须留在上传页面上，或者在整个上传过程中保持打开并继续在其他页面上？
3.  牢记这两点，作为上传插件，您有什么建议？

编辑：（删除了一些小限制。）

更清楚：

> 当传输停止时，swf-upload、SilverLight Uploader 等的行为如何？用户应该从头开始吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:34:29.487

Firstly let me re-confirm that uploading files of that size via `http` is not the best idea.

In case it is a must, I recommend using the `webdav api` and a handler code like in [this one](http://www.webdavsystem.com/client/programming/upload/resumable_upload).

# git - 我可以将子模块标记为默认使用与主分支不同的分支吗

> ID：12159496
> 
> 赞同：1
> 
> 时间：2012-08-28T12:43:35.960
> 
> 标签：git, git-branch, git-submodules, git-clone

我有一个 repo 的 fork 作为子模块，并且我已经分离了分支（即拉请求 BTW），我希望我的 repo 使用该功能分支作为子模块的默认值，以便克隆我的 repo 的人将使用该功能分支。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:48:57.070

我不这么认为：有一个子模块来记录要重用的特定提交。

克隆您的存储库的其他用户将在同一提交 SHA1 （[在分离的 HEAD 模式下](https://stackoverflow.com/questions/3965676/why-did-git-detach-my-head/3965714#3965714)）更新该子模块，他们不会看到分支。
这是解释的：

*   “ [Git 子模块：指定一个分支/标签](https://stackoverflow.com/questions/1777854/git-submodules-specify-a-branch-tag)”。
*   “ [git 子模块究竟是如何工作的](https://stackoverflow.com/questions/12078365/how-exactly-does-git-submodule-work/12078816#12078816)”
*   “[如何使带有分离 HEAD 的子模块连接到实际的 HEAD？](https://stackoverflow.com/questions/8642668/how-to-make-submodule-with-detached-head-to-be-attached-to-actual-head/8644339#8644339) ”

更新后，用户可以进入该子模块，签出一个分支并将其链接到该子模块的相应远程仓库的远程跟踪分支，如果他/她愿意的话。
但是一旦修改完成，该分支将不会成为父 repo 记录的子模块信息的一部分。

# linux - 在 Ubuntu 12.04 中使用 USB 转串口 - 缺少 /dev/ttyUSB0

> ID：12159503
> 
> 赞同：2
> 
> 时间：2012-08-28T12:44:14.673
> 
> 标签：linux, serial-port, tty, usbserial

我正在尝试将 USB 串行适配器连接到 Ubuntu 12.04（在 VM 上）。出于某种原因，它没有 /dev 条目。我尝试了来自不同制造商的几个适配器 - 没有成功。

另外，我有一个 10.04 VM，我在其上连接适配器，它立即出现在 /dev/ttyUSB0

我不是一个非常熟练的linux用户。我需要安装某种驱动程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:23:30.683

我会在再次连接时断开它并拖尾系统日志。我有一个类似于 /dev/ttyACM0 的 USB 转串口设备（我想。我现在正在工作），所以寻找 /dev/ttyA*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T16:12:29.470

当我插入/移除USB时，dmesg没有改变，导致我发现udev（我认为）被冻结了。

重新启动系统修复它。（明显地）

抱歉浪费了网络空间

# java - 如何遍历包含与对象相同类型的子对象的对象？

> ID：12159504
> 
> 赞同：0
> 
> 时间：2012-08-28T12:44:22.577
> 
> 标签：java, xml, arrays, iteration, object-model

好吧，我已经达到了世纪的头脑，坐了几个小时思考这个。我将在这里快速添加一个示例：

```
public class AdUnitSizes {

protected String environmentType;
@XmlElement(name = "size")
protected List<Size> sizes;
protected List<Companions> companions; 
```

现在基本上，如果我将其构建为 XML 文件，它会假设表示类似这样的内容（注意，Companions 的类型为 AdUnitSize[]）

```
 <adUnitSizes>
    <size>
        <width>800</width>
        <height>600</height>
        <isAspectRatio>true</isAspectRatio>
    </size>
    <environmentType>BROWSER</environmentType>
    <companions>  <!--adunitsize[]-->
        <size>
            <width>800</width>
            <height>600</height>
            <isAspectRatio>true</isAspectRatio>
        </size>
        <environmentType>BROWSER</environmentType>
        <companions>
            <size>
                <width>800</width>
                <height>600</height>
                <isAspectRatio>true</isAspectRatio>
            </size>
            <environmentType>BROWSER</environmentType>
            <companions>...</companions>    
        </companions>               
    </companions>
</adUnitSizes> 
```

现在，正如我试图指出的，AdUnitSizes 包含 3 个字段。尺寸、EnvironmentTypes 和 Companions。我现在尝试在 java 中做的事情，使用我创建的对象包装器（第一个示例）是遍历每个子 Companions 对象，以及他们的子 Companions 对象，直到迭代无法继续（在我们的系统中不太可能） Companions 的深度会超过 3 个级别，但无论如何我都需要满足这一点）

这是我尝试过的：

```
 AdUnitSize[] adUnitSizeArray = adUnit.getAdUnitSizes();
    if(adUnitSizeArray != null){
        List<AdUnitSizes> adUnitSizesList = adUnitWrapper.getAdUnitSizes();
        for(int i = 0; i < adUnitSizeArray.length; i++){
            AdUnitSizes adUnitSizes = new AdUnitSizes();

            aem.adservices.google.dfp6.om.Size size = new aem.adservices.google.dfp6.om.Size(); //Name clash with Google Size Class
            size.setHeight(adUnitSizeArray[i].getSize().getHeight());
            size.setWidth(adUnitSizeArray[i].getSize().getWidth());
            size.setIsAspectRatio(adUnitSizeArray[i].getSize().getIsAspectRatio());
            adUnitSizes.getSizes().add(size);

            adUnitSizes.setEnvironmentType(adUnitSizeArray[i].getEnvironmentType().getValue());

            List<Companions> companionsList = adUnitSizes.getCompanions();
            //Need to iterate through all of adUnitSizeArray's Companions, and its companions children and so forth
        }
    } 
```

有任何想法吗？我接近这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:57:33.897

我不确定你在用 companyList 做什么，但正如戴夫所说，这是一个简单的递归练习，所以你可以这样做：

```
 //(...)
    List<Companions> companionsList = adUnitSizes.getCompanions();
    iterateOverCompanions(companionsList);
}

private void iterateOverCompanions(List<Companions> companionsList) {
    for(Companions companion : companionsList) {
        //Do stuff with companion
        List<Companions> anotherCompanionList = companion.getCompanionsList();
        if (anotherCompanionList  != null && anotherCompanionList.size()>0) {
            iterateOverCompanions(anotherCompanionList);
        }
    }
} 
```

编辑：如果您需要传递一些东西来填充，您可以将它们作为参数传递，例如：

```
iterateOverCompanions(List<Companions> companionsList, Size size, AnotherStuff stuff) 
```

或将其设置为成员变量，如果可以的话。

# java-me - J2ME：诺基亚 SDK 中的 HttpConnection 未立即关闭

> ID：12159510
> 
> 赞同：1
> 
> 时间：2012-08-28T12:44:45.973
> 
> 标签：java-me, nokia, httpconnection

我试图用 RequestProperty "Connection", "close" 制作 HttpConnection

并请求在 conn.getResponseCode() 上等待很长时间；. 我尝试在另一个线程中关闭连接。

但是连接不会立即关闭，关闭连接需要 2 到 3 分钟。关于这个问题的任何解决方案请帮助..

CLDC Oracle Java(TM) Platform Micro Edition SDK 3.0.5 中的连接立即关闭

但是诺基亚 SDK 2.0 需要时间

谢谢

# assembly - 我们如何取消引用汇编代码 (MIPS) 中的指针？

> ID：12159511
> 
> 赞同：2
> 
> 时间：2012-08-28T12:44:46.590
> 
> 标签：assembly, mips

我看到了[这个问题](https://stackoverflow.com/questions/5752401/simple-c-function-to-mips-instructions?rq=1)，我想知道我们如何取消引用指向 int 的指针？
这是代码：

```
int load(int *ptr) 
{
    return *ptr;
} 
```

现在，我知道 $a0 包含指针。这就是我们需要返回的整数地址。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T22:45:18.833

在 MIPS 中，您取消引用包含在寄存器 $a0 中的指针，如下所示：

```
LW $v0, 0($a0)
JR $ra 
```

# php - 从sql表中选择随机行时如何防止选择已删除的ID

> ID：12159512
> 
> 赞同：0
> 
> 时间：2012-08-28T12:44:48.540
> 
> 标签：php, mysql, sql, database

我想通过它们的唯一 ID 从产品数据库中选择随机行。我每页需要 3-4 个随机产品...

我就是这样开始的

```
$offset_result = mysql_query( " SELECT FLOOR(RAND() * COUNT(*)) AS `offset` FROM `products` ");
$offset_row = mysql_fetch_object( $offset_result ); 
$offset = $offset_row->offset;
$result = mysql_query( " SELECT * FROM `products` WHERE id = $offset LIMIT 1" );
$n=mysql_num_rows($result);

if ($n>0){
    while($row = mysql_fetch_array($result)){ 
        $id = $row["id"];
        $cod_produs = $row["cod_produs"];
        $nume_produs = $row["nume_produs"];
        $titlul_paginii = $row["titlul_paginii"];
        $nume_intermediar = str_replace (" ", "-", $nume_produs);
        $nou_nume_produs = strtolower($nume_intermediar);
        $detalii = $row["detalii"];
        $seo_descriere = $row["seo_descriere"];
        $materiale = $row["materiale"];
        $numere = $row["numere"];
        $pret = $row["pret"];
        $categorie = $row["categorie"];
        $subcategorie = $row["subcategorie"];
        $data_adaugare = strftime("%b %d, %Y", strtotime($row["data_adaugare"]));

    }

echo ("The id of the product is ".$id." and his name is ".$nume_produs);

    };
  ?> 
```

问题是我的代码返回了我随着时间的推移删除的 id ......我如何防止这样做？

以及如何一次返回 3 或 4 个唯一 ID，并愿意接受更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:47:25.690

通常的方法是：

```
SELECT * FROM `table` ORDER BY RAND() LIMIT 0,1; 
```

您可以阅读[从 MySQL 数据库表中选择随机记录的说明。](http://akinas.com/pages/en/blog/mysql_random_row/)

对于您的代码：

```
mysql_query( " SELECT * FROM `products` ORDER BY RAND() LIMIT 0,3" ); 
```

**编辑到期的 OP 评论**

然后，您可以获得数据的子集。修改您的代码：

```
$offset_result = mysql_query( "SELECT FLOOR(MAX(id) * RAND() - 1000) AS `offset` 
                               FROM `products` ");
$offset_row = mysql_fetch_object( $offset_result ); 
$offset = $offset_row->offset;
$result = mysql_query( " SELECT * FROM `products` 
                         WHERE id between $offset and $offset + 1000
                         ORDER BY RAND() 
                         LIMIT 0,3" ); 
```

快速的解决方案是获取 3 个随机 ID：

```
$randoms_id = '-1';
for($i=0;$i<3;$i++) {

  $id_result = mysql_query( " SELECT id FROM `products` 
                              WHERE id >= 
                                  (SELECT FLOOR( MAX(id) * RAND()) 
                                   FROM `products` ) 
                              ORDER BY id LIMIT 1;");
  $id_row = mysql_fetch_object( $id_result ); 
  $id = $id_row->id;

  $randoms_id = $randoms_id . ',' . $id;
}
$result = mysql_query( " SELECT * FROM `products` 
                         WHERE id in ($randoms_id);") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:05:16.997

您的脚本中有错误，请执行以下操作：

```
$offset_result = mysql_query("SELECT FLOOR(RAND() * COUNT(*)) AS offset FROM `products`");
$offset_row = mysql_fetch_object($offset_result); 
$offset = $offset_row->offset;
$result = mysql_query("SELECT * FROM `products` LIMIT $offset, 1");
$n=mysql_num_rows($result); 
```

但这只会返回一条记录。您可以获得连续的记录，或者您必须多次运行它。

```
$offset_result = mysql_query("SELECT COUNT(*) AS total FROM `products`");
$offset_row = mysql_fetch_object($offset_result); 

$total = (($offset_row->total) - 1);
$range_arr = range(0, $total);
shuffle($range_arr);
$off_1 = $range_arr[0];
$off_2 = $range_arr[1];
$off_3 = $range_arr[2];

$result = mysql_query(" (SELECT * FROM `products` LIMIT $off_1, 1)
                        UNION
                        (SELECT * FROM `products` LIMIT $off_2, 1)
                        UNION
                        (SELECT * FROM `products` LIMIT $off_3, 1)");
$n=mysql_num_rows($result); 
```

# excel - Excel 97-2003 的正确“XlFileFormat”枚举是什么

> ID：12159513
> 
> 赞同：8
> 
> 时间：2012-08-28T12:44:50.740
> 
> 标签：excel, vba, interop

关于 Excel VBA 互操作，`XlFileFormat`保存 Excel 97-2003 电子表格的正确枚举是什么？

官方 MSDN 文档在[这里，](http://msdn.microsoft.com/en-us/library/office/bb241279%28v=office.12%29.aspx)但我无法通过阅读这篇文章来弄清楚正确的选择是什么。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-28T13:49:00.613

Excel 97 是第 8 版。直到并包括 Excel 2003 在内的后续版本有非常小的变化。直到 Excel 2007 版本 12。这就是为什么您会看到枚举中缺少 xlExcel9 到 11。

所以你会想要 xlExcel8 这里。

# html - 输入宽度为 100% - 20px

> ID：12159517
> 
> 赞同：0
> 
> 时间：2012-08-28T12:45:05.163
> 
> 标签：html, css, yui

我知道这是不可能的，但我想知道是否有其他方法可以达到这种效果。

如果您查看下面的 jsfiddle，您会看到输入是容器的 94% 并且居中，这可以正常工作，但我真正想要的是输入在每一侧都有 10px 的边距。

[http://jsfiddle.net/brendan_rice/4ugxk/13/](http://jsfiddle.net/brendan_rice/4ugxk/13/)

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:57:47.807

试试这个[http://jsfiddle.net/hRrVv/](http://jsfiddle.net/hRrVv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:49:14.967

从您的DIV 中删除**宽度。**`.bottom`像这样写：

```
.bottom{
    position: absolute;
    bottom: 0px;
    background-color: red;
    left: 10px;
    right:10px;
    text-align: center;
} 
```

检查这个：[小提琴](http://jsfiddle.net/4ugxk/29/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T12:49:27.683

如果可以的话，可以试试类似[http://jsfiddle.net/4ugxk/24/](http://jsfiddle.net/4ugxk/24/)

```
.bottom{
  position: absolute;
  bottom: 0;
  left:0; right:0;
  margin-left:10px;
  margin-right:10px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T12:51:12.440

您可以在输入元素周围放置一个环绕跨度（或 div），并使用它来应用您想要的边距。您需要从标准输入框中删除默认样式（填充、边框等），并按照您希望输入出现的样式设置此包装元素的样式。

见：http: [//jsfiddle.net/4ugxk/43/](http://jsfiddle.net/4ugxk/43/)

# c - 为什么 strcpy 会触发错误？

> ID：12159521
> 
> 赞同：2
> 
> 时间：2012-08-28T12:45:37.033
> 
> 标签：c

如果不使用复制字符串，程序可以正常工作`strcpy`，但我想知道原因是什么？

```
#include <stdio.h>
#include <string.h>

int main ()
{

    int mat;
    char test1[20]={"Hex"} ;
    char test2[20]={"agonal"} ;

    strcpy(test1,"Diagonal"); // the print outputs the concatenated test if strcpy is commented out

    //printf("a=%c\nb=%c\n",test1[0],test1[1]);

    printf("Concatenated test=%s", strcat(test1, test2));

    return 0;
}

ERROR MESSAGE

*** buffer overflow detected ***: ./prog terminated
      ======= Backtrace: =========
      /lib/libc.so.6(__fortify_fail+0x48)[0xb75b6ae8]
      /lib/libc.so.6[0xb75b4b30]
      /lib/libc.so.6[0xb75b3dcd]
     ./prog(__gxx_personality_v0+0x14d)[0x804858d]
     ./prog(__gxx_personality_v0+0x31)[0x8048471]
      ======= Memory map: ======== 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T12:47:07.347

`strcat`电话是失败的。您没有足够的空间`test1`来存储`"Diagonal"`and的连接`"agonal"`。

如果你做得`test1`足够大，它应该可以工作：

```
char test1[40]={"Hex"} ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T12:48:07.300

`strcat`调用溢出目标缓冲区。

PS您刚刚将`test1`大小增加到20，现在应该可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:49:35.333

离开这个 strcpy 将导致您将*Hex*与*Diagonal*连接并尝试将其存储在 10 个元素的数组中。*HexDiagonal*的长度是...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T17:58:48.220

还记得一件事……当使用 strcpy 时……然后它用 NULL CHARACTER 将源复制*到*目标*……*这就是为什么目标应该有足够的内存……

# hyperion - 汇率表存储在 essbase 的什么位置？

> ID：12159523
> 
> 赞同：0
> 
> 时间：2012-08-28T12:45:39.217
> 
> 标签：hyperion, essbase, currency-exchange-rates

我是 hyperion 规划的新手，做一些货币转换和汇率表​​的任务。我在计划中创建了货币转换应用程序，并在计划中创建了一个汇率表。两者都存储在计划类型（数据库）中。

我将刷新应用程序和数据库，然后在 essbase 中可以看到应用程序和一些脚本，但是我看不到我在 Planning 中创建的汇率表。那么你能告诉我这个汇率表存储在哪里或在 essbase（EAS 控制台）中查看吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:52:22.327

干得好：

编辑汇率表： [http ://docs.oracle.com/cd/E17236_01/epm.1112/hp_admin_11122/ed_exchg_rt_tbl.html](http://docs.oracle.com/cd/E17236_01/epm.1112/hp_admin_11122/ed_exchg_rt_tbl.html)

这适用于系统 11。您可能使用的是早期版本。

# android - MyLocationOverlay 没有调用 onProviderDisabled

> ID：12159524
> 
> 赞同：0
> 
> 时间：2012-08-28T12:45:42.773
> 
> 标签：android, google-maps, gps

这是我的代码，行为有点奇怪：

```
locationOverlay = new MyLocationOverlay(this, map) {
    @Override
    public void onLocationChanged(Location location) {
        super.onLocationChanged(location);
        updatePosition(locationOverlay.getMyLocation());
    }

    @Override
    public void onProviderDisabled(String provider) {
        if(provider.equals(LocationManager.GPS_PROVIDER))
            showNoGPSWarning();
    }
}; 
```

`showNoGPSWarning`显示一个对话框，询问是否应启用 GPS（像[这样](https://stackoverflow.com/a/843716/1218500)）。
一切都很好，除非我在禁用 GPS 的情况下启动活动并在`showNoGPSWarning()`对话框中按“否”。然后我的应用程序根本不听 GPS 变化。

如果我打开它，什么都不会发生。Google 地图 API 不会尝试获取 GPS 信号。如果我将其关闭，`onProviderDisabled()`则不会再发生任何事情，不会被调用。
正如我所说，这是发生的唯一方法，如果我在对话框中按“是”，它就会起作用。
那么我的对话框如何影响我的应用程序的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:33:16.790

当您按下是/否时，再次尝试请求位置更新，如下所示。希望能帮助到你。

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000L, 2000.0f, myLocationListener); 
```

# java - 使用 Spring LDAP 对用户进行身份验证时出现异常

> ID：12159525
> 
> 赞同：2
> 
> 时间：2012-08-28T12:45:42.807
> 
> 标签：java, spring, ldap, spring-ldap

在验证用户身份时出现以下异常：

```
Exception in thread "main" org.springframework.ldap.PartialResultException: Unprocessed Continuation Reference(s); nested exception is javax.naming.PartialResultException: Unprocessed Continuation Reference(s); remaining name '/'
    at org.springframework.ldap.support.LdapUtils.convertLdapException(LdapUtils.java:205) 
```

认证方法：

```
public boolean authenticate(String userName, String password) {
        AndFilter filter = new AndFilter();
        filter.and(new EqualsFilter("objectclass", "person")).and(
                new EqualsFilter("sAMAccountName", userName));
        return ldapTemplate.authenticate(DistinguishedName.EMPTY_PATH, filter
                .toString(), password);
    } 
```

应用程序上下文.xml

```
<bean id="contextSource"
        class="org.springframework.ldap.core.support.LdapContextSource">
        <property name="url" value="ldap://10.10.10.10:389" />
        <property name="base" value="DC=lab2,DC=ins" />
        <property name="userDn" value="CN=Ldap Bind,OU=Service Accounts,OU=TECH,DC=lab2,DC=ins" />
        <property name="password" value="secret" />
    </bean>
    <bean id="ldapTemplate" class="org.springframework.ldap.core.LdapTemplate">
        <constructor-arg ref="contextSource" />
    </bean>
    <bean id="ldapContact"
        class="ldap.ContactLDAP ">
        <property name="ldapTemplate" ref="ldapTemplate" />
    </bean> 
```

测试类：

```
Resource r = new ClassPathResource("applicationContext.xml");
        BeanFactory factory = new XmlBeanFactory(r);
        ContactLDAP contact = (ContactLDAP) factory.getBean("ldapContact"); 

        System.out.println(contact.authenticate("username", "secret")); 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:32:06.833

尝试通过设置来关注推荐`java.naming.referral=follow`。

# cordova - 在 PhoneGap/Sencha Touch 中加载外部 Web 服务

> ID：12159534
> 
> 赞同：0
> 
> 时间：2012-08-28T12:46:01.443
> 
> 标签：cordova, sencha-touch

我一直在尝试在我的 Sencha Touch 2 应用程序（将使用 PhoneGap Build 构建）中加载外部 Web 服务，但我似乎无法让它工作。我正在使用[W3Schools 示例 Web 服务](http://www.w3schools.com/webservices/ws_example.asp)作为测试。我读过PhoneGap 可以做到这一点，因为它使用`file:///`协议，但我没有运气加载Web 服务。

这是`Ext.Ajax.request`我正在打的电话：

```
Ext.Ajax.request({
    url: 'http://www.w3schools.com/webservices/tempconvert.asmx/CelsiusToFahrenheit',
    method: 'POST',
    xmlData: {
        Celsius: "25.0"
    },

    success: function(response) {
        container.setHtml(container.getHtml() + '<br/>Ext.Ajax.request succeeded');
    },
    failure: function(response) {
        container.setHtml(container.getHtml() + '<br/>Ext.Ajax.request failed');
    }
}); 
```

不过，我似乎总是收到失败的消息。在我的`config.xml`中，我确实有访问标签：

```
<access origin = "*" subdomains="true"/> 
```

我使用PhoneGap 2.0.0 作为PhoneGap 版本使用PhoneGap 构建，并在我的Android 手机2.1 版本上进行了测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T05:08:24.613

由于您使用的是phonegap，因此您需要允许来自phonegap 的跨域请求。这适用于 jQuery-Mobile 和 PhoneGap，但对于 Sencha-Touch 应该是相同的。

您还是否在清单文件中授予了访问 Internet 的权限。

[解决方案](https://stackoverflow.com/questions/12164136/load-jquery-mobile-page-from-different-domain/12171043#12171043)

# ruby - 有没有比 Rspec 的 `should_receive` 更少干扰的替代方法？

> ID：12159536
> 
> 赞同：43
> 
> 时间：2012-08-28T12:46:16.153
> 
> 标签：ruby, rspec

在编写 Rspec 测试时，我经常对`should_receive`. 我想知道是否有不那么侵入性的选择。

例如：

```
describe "making a cake" do
  it "should use some other methods" do
    @baker.should_receive(:make_batter)
    @baker.make_cake
  end
end 
```

调用`should_receive`是一个很好的描述，但它破坏了我的代码，因为`should_receive`通过屏蔽原始方法来工作，并且除非实际返回一些击球手`make_cake`，否则无法继续。`make_batter`所以我把它改成这样：

```
@baker.should_receive(:make_batter).and_return(@batter) 
```

这很丑，因为：

*   **看起来**我正在测试`make_batter`是否正确返回，但**实际上**`@batter`我是在强制伪造版本的返回。**`make_batter`**
***   它迫使我单独设置`@batter`*   如果`make_batter`有任何重要的副作用（我想可能是代码味道），我也必须让这些发生。**

 **我希望这`should_receive(:make_batter)`将验证方法调用并将**其传递给原始方法**。如果我想存根它的行为以进行更好的隔离测试，我会明确地这样做：`@baker.stub(:make_batter).and_return(@batter)`.

`should_receive`有没有办法在不阻止原始方法调用的情况下做类似的事情？我的问题是糟糕设计的征兆吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-02-04T19:12:28.650

看起来更好的 API 委托给 Myron Marston 提到的原始方法实际上已添加到[rspec-mocks v2.12.0](http://github.com/rspec/rspec-mocks/compare/v2.11.3...v2.12.0)

*   [将`and_call_original`哪些委托添加到原始方法。](https://github.com/rspec/rspec-mocks/commit/2ab27764bdcadac77534e5a9a5937c3d3bece422)

因此，现在您可以在“想要设置消息期望而不干扰对象如何响应消息”的任何时候简单地执行此操作：

```
@baker.should_receive(:make_batter).and_call_original 
```

感谢您添加此内容，迈伦。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-28T14:16:42.853

您可以`should_receive`像这样运行原始方法：

```
@baker.should_receive(:make_batter, &@baker.method(:make_batter)) 
```

两者都`should_receive`支持`stub`传递块实现（即在调用方法时进行评估）。`&@baker.method(:make_batter)`获取原始方法对象的句柄，并将其作为块实现传递。

FWIW，我们希望提供一个更好的 API 来委托给原始方法（请参阅[此问题](https://github.com/rspec/rspec-mocks/issues/23)），但很难在不破坏向后兼容性的情况下添加该功能。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-28T13:56:35.147

您遇到此问题是`should_receive`因为您正在测试该`make_cake`方法的实现细节。在编写测试时，您应该只关注行为而不是一系列内部方法调用。否则，稍后重构您的代码也会导致对所有测试的大量重构。

当你想单独测试你的类时，Mocks 和 Stubs 会派上用场。在编写单元测试时，您的测试对象应该与任何其他对象隔离。当您同时处理多个对象时，两者都充当替身。在这种情况下，您可以`should_receive`通过调用方法来确保您的测试主体正确地将某些任务委托给另一个对象。**

# c# - WebBrowser 控件具有奇怪的状态

> ID：12159538
> 
> 赞同：0
> 
> 时间：2012-08-28T12:46:25.227
> 
> 标签：c#, .net

> **可能重复：**
> [如何在 C# 中使用 WebBrowser 控件 DocumentCompleted 事件？](https://stackoverflow.com/questions/840813/how-to-use-webbrowser-control-documentcompleted-event-in-c)

有人可以告诉我为什么 DocumentCompleted 事件发生 3 次？？？

我怎么知道该文件真的已经被下载了？

（我用一些页面来测试有很多 jQuery。）

谢谢！

```
var webBrowser1 = new WebBrowser
                {
                    Padding = new Padding(0),
                    Margin = new Padding(0),
                    Dock = DockStyle.Fill,
                    Url = url,
                    TabStop = false,
                    ScriptErrorsSuppressed = true,
                    IsWebBrowserContextMenuEnabled = false
                };
                webBrowser1.Navigated +=  (d1,d2) => 
                {
                    Debug.WriteLine("Navigated " + DateTime.Now.TimeOfDay.ToString());
                };
                webBrowser1.DocumentCompleted += (d1, d2) => 
                {
                    Debug.WriteLine("DocumentCompleted " + DateTime.Now.TimeOfDay.ToString());                
                };

                form.Controls.Add(webBrowser1);
                form.Show(); 
```

日志：

导航09：40：40.1807403导航09：40：44.7270004 documentCompleted 09：40：44.7300005导航09：40：40：46.5791063 documentCompemed Commpleted 09：40：40：40：40：46.5821065 Naimbiged 09：40.40.40.40.11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111卡库蒂克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:00:16.137

我在这里找到了一个好方法

[如何在 C# 中使用 WebBrowser 控件 DocumentCompleted 事件？](https://stackoverflow.com/questions/840813/how-to-use-webbrowser-control-documentcompleted-event-in-c)

```
 webBrowser1.DocumentCompleted += (d1, d2) => 
                {

                    string urlCurrent = d2.Url.ToString();
                    var browser = (WebBrowser)d1;

                    if (!(urlCurrent.StartsWith("http://") || urlCurrent.StartsWith("https://")))
                    {
                        // in AJAX     
                    }
                    if (d2.Url.AbsolutePath != browser.Url.AbsolutePath)
                    {
                        // IFRAME           
                    }
                    else
                    {
                        // REAL DOCUMENT COMPLETE

                        Debug.WriteLine("DocumentCompleted " + DateTime.Now.TimeOfDay.ToString());
                    }

                }; 
```

# wpf - Dispatcher.Invoke() 使用中的随机计时

> ID：12159541
> 
> 赞同：0
> 
> 时间：2012-08-28T12:46:36.370
> 
> 标签：wpf, invoke, dispatcher

首先，对不起我的英语不好。

我必须几乎实时地绘制一条曲线。为此，我使用： - 一个用于堆栈点的线程 - 一个用于取消堆栈点的线程 - 以及对我来说是一种黑盒的“图形线程”，我只能通过带有**Invoke方法的窗口****调度**程序来访问它。

 **当我记录调用 Dispatcher.Invoke 的开始和结束之间的时间时，我看到提前期为 3 到 110 毫秒。在有效绘图方法的开始和结束之间，我看到前置时间从 3 到 55 毫秒？！！？我不明白我怎么能浪费这么多时间，为什么我的时间如此随机，以及我如何才能快速而直接地做到这一点。（就像我使用堆栈一样，由于这些巨大的时间，堆栈经常溢出，导致应用程序崩溃： S)

UnStack线程循环：

```
while (exRunningFlag)
{
    lock (myLock)
    {                        
        while ( stackingListPoint.Count > 0)
        {
           LOG
           this.Dispatcher.Invoke(new Action(() =>
                    {
                        LOG                                   
                            graph.AddPoint(this.stackingListPoint.Dequeue());                                        
                        LOG
                    }), System.Windows.Threading.DispatcherPriority.Send);
                    LOG                                
            }
        }
    }                    
    Thread.Sleep(3);
}

public void AddPoint(System.Windows.Point pt)//Data
{            
    int resNeedResize = needResize(pt);   
// ------ rare case, only when need to redraw all curves. This is not relative to my weird delay
    if (resNeedResize != 0)
    {
        ReDraw(resNeedResize);
        return;
    }
// ----
    currentPt = ConversionDataPtToGraphPt(pt);
    if ((lastPt.X != -1) && (lastPt.Y != -1))
    {     
            g = CreateGraphics();                   
            g.DrawLine(pen_Courbe, lastPt, currentPt);
            g.Flush(); 
    }
    lastPt = currentPt;
    ListPointCollection.Last().Add(pt);
} 
```

感谢您能给我带来的任何帮助，或者如果您看到我错过了一些相关的东西：S。

PS：对不起那些已经看到法语帖子的人：p

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T08:21:45.430

作为替代策略：一次绘制所有线段，然后在可见性或不透明度上为每个线段添加动画。下面的代码绘制了一条虚线，一次一段。动画将提供比自己进行线程更好的计时行为。

```
for (int i = 0; i < 5; i++)
{
    Line l = new Line();
    l.X1 = i*50;
    l.Y1 = 50;
    l.X2 = i*50+40;
    l.Y2 = 50;
    l.Stroke = new SolidColorBrush(Colors.Black);
    l.StrokeThickness = 3;

    // All lines are drawn right away, just not visible. The animations fade them 
    // in one by one.
    l.Opacity = 0;
    DoubleAnimationUsingKeyFrames opanim = new DoubleAnimationUsingKeyFrames();
    opanim.KeyFrames.Add(new LinearDoubleKeyFrame(0 , TimeSpan.Zero));
    opanim.KeyFrames.Add(new LinearDoubleKeyFrame(0, TimeSpan.FromSeconds(i + 1)));
    opanim.KeyFrames.Add(new LinearDoubleKeyFrame(1, TimeSpan.FromSeconds(i + 2)));

    l.BeginAnimation(Line.OpacityProperty, opanim);

    MyCanvas.Children.Add(l);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:18:40.107

切换线程涉及开销，它不是免费操作，并且可能有些不可预测。这完全取决于操作系统如何分配时间片。你必须确保你的代码足够可靠来处理这个问题。

请记住：Windows 不是实时操作系统。**

# android - 为什么在包含移动设备的 android 4.1 操作系统中不显示 toast 消息

> ID：12159546
> 
> 赞同：8
> 
> 时间：2012-08-28T12:46:58.450
> 
> 标签：android, toast, android-4.2-jelly-bean

我在 android 4.1 手机中看不到 toast 消息。直到昨天，我才能够看到 toast 消息。从今天开始，只有我看不到该消息。请帮我。

```
Toast.makeText(getApplicationContext(), "hi", Toast.LENGTH_SHORT).show(); 
```

我也尝试过自定义吐司消息而不是吐司消息。但仍然无法正常工作。

**自定义吐司：**

```
LayoutInflater inflater=getLayoutInflater(); 
View layout = inflater.inflate(R.layout.toast_layout,(ViewGroup) findViewById(R.id.toast_layout_root)); 
TextView text = (TextView) layout.findViewById(R.id.text); 
text.setText("Please fill Name"); 
Toast toast = new Toast(getApplicationContext()); 
toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
toast.setDuration(Toast.LENGTH_LONG); 
toast.setView(layout); 
toast.show(); 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-05T08:30:45.990

在 Android 4.1 中，Toast 没有与我一起显示，因为在我的应用程序设置中选中了显示通知。我只是去设置->管理应用程序->[我的应用程序]并打开显示通知和 Toasts 开始出现。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-28T12:53:52.407

更改为此并再次检查。

```
if(first_name.length() == 0) 
{ 
    Toast.makeText(NameOfYourActivity.this, "Please fill Name", Toast.LENGTH_SHORT).show(); 
    Utilities.writeIntoLog("Please fill Name"); 
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-24T08:30:15.423

只需在此处发布谷歌代码链接。

自 Jelly Bean 以来，用户可以通过“应用详细信息”设置禁用给定应用的通知。

一个非常糟糕且不需要的副作用是，一旦禁用通知，Toast 消息也会被禁用，即使用户正在运行应用程序！

您鼓励在您的设计指南中使用 Toast，但如果用户有可能删除它们，谁会想要使用它，特别是如果烤消息是显示给用户的重要反馈...

我知道至少可以在应用程序处于后台时禁用 Toast，但如果它是前台 Activity 则不会。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-29T04:10:28.467

Toast 在所有 Android 版本中都运行良好。您的代码中可能存在几个问题，例如

1.  你的上下文没有错
2.  您试图在后台线程而不是工作线程中显示 toast。

**编辑** 在您的自定义吐司中，不要在布局充气器中设置父级，例如使用如下

```
View layout = inflater.inflate(R.layout.toast_layout,null); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-04T09:11:28.360

我有同样的问题。当我在 UI 线程上调用代码时，问题为我解决了

```
public void showToastMessage(final String msg) {

    runOnUiThread(new Runnable() {
        @Override
        public void run() {
            Toast.makeText(BaseActivity.this, msg, Toast.LENGTH_LONG).show();
        }
    });
} 
```

# css - css没有跨页面排列

> ID：12159548
> 
> 赞同：0
> 
> 时间：2012-08-28T12:47:05.060
> 
> 标签：css

我无法让第二个 ul 与两个 p 标签和第一个 ul 在同一行开始。它位于右下角，我需要它在页面上排成一行。css 在 html 中，以便在修复问题时易于使用

```
<p style="display:inline;float:left;margin-left:20px;">
    <strong>New Features</strong></p>
<ul style="display:inline-block;margin-left:20px;">
    <li>Distributor area for all ordering, logisitics and planning</li>
    <li>Customer area for usage stats, equipment monitoring and<br /> savings calculators</li>
    <li>Full history for quarterly filings, investor updates and<br /> press releases</li>
</ul>
<p style="display:inline;float:right;margin-right:400px;">
    <strong>This site is best viewed in</strong></p>
<ul style="display:block;float:right;margin-right:15px;">
    <li>FireFox 3.6.13</li>
    <li>Safari 4.0.5 &amp; 5.0.2</li>
    <li>Google Chrome 9.0.597.86 Beta</li>
    <li>Internet Explorer 9</li>
</ul> 
```

# asp.net - 问题加载字体

> ID：12159551
> 
> 赞同：0
> 
> 时间：2012-08-28T12:47:09.333
> 
> 标签：asp.net, css, fonts

我使用了这个脚本，但它只适用于“Opera”。

```
<script type="text/javascript" src="http://fast.fonts.com/jsapi/xxxx-xxxx-xxxx-xxxx-xxxx.js"></script> 
```

它不适用于其他浏览器。我试过这个脚本；

```
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type=“text/javascript”&gt;
  WebFont.load({
    monotype: {
      projectId: ‘xxxxx-xxxxx-xxxxx-xxxxx-xxxxx’
    }
  });
</script> 
```

我尝试了这个 css 块；

```
@font-face {
    font-family: "Helvetica";
    src: url(http://fast.fonts.com/jsapi/xxxxx-xxxxx-xxxxx-xxxxx-xxxxx.js) format("truetype");
} 
```

它仍然不起作用。你有什么想法？我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:57:22.437

也许你需要定义这个字体的所有格式？

```
@font-face {
    font-family: 'Some Font';
    src: url('../fonts/webfont-webfont.eot');
    src: url('../fonts/webfont-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/webfont-webfont.woff') format('woff'),
         url('../fonts/webfont-webfont.ttf') format('truetype'),
         url('../fonts/webfont-webfont.svg#TechniczneTTEFNRegular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

# ios - 需要三次 XCode4 代码签名？

> ID：12159555
> 
> 赞同：0
> 
> 时间：2012-08-28T12:47:30.237
> 
> 标签：ios, xcode4, ios-provisioning, provisioning-profile

当我进行临时构建时，我需要在临时的目标设置中设置配置文件，临时的项目设置，最后当它构建并准备好分发时，我点击新的组织者弹出“分发”并需要再次设置临时配置文件。

我想我在这里缺少一些理解，为什么我需要设置此配置文件 3 次？不是只有一个地方可以输入（比如在组织者/分发按钮阶段）吗？

如果这确实是这个过程，任何人都可以解释为什么需要 3 次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:41:08.967

首先，目标设置将覆盖项目设置。构建设置类似于 CSS 向下级联，您可以通过在查看目标的构建设置时启用“级别”选项更清楚地看到这一点：

![在此处输入图像描述](../Images/d271074d5f18937b67c05e2eaf73b94e.png)

绿色突出显示的框显示最终解析设置的来源。因此，在上面的屏幕截图中，您可以看到代码签名取自目标设置。项目级别的值被忽略/覆盖。

通常，您希望避免这些多级设置，因为它可能会令人困惑并且您有多余的信息。

您的调试标识应该几乎总是在“自动配置文件选择器”组下设置为“iPhone Developer”，并且应该在项目级别定义（因为它对于所有目标都是相同的）。您可以通过选择目标设置中的条目并点击删除来在​​目标级别删除此设置。绿色突出显示现在应该出现在项目级别：

![在此处输入图像描述](../Images/f33041e2588b7e9f04f964f294ca89be.png)

对于您的发布和临时配置，您可能*确实*希望在目标级别选择特定的签名身份，因为理论上您可以在一个项目中拥有多个具有不同设置的应用程序目标。在项目级别，最好选择通用的“iPhone Distribution”（自动配置文件选择器）选项，然后将其覆盖。

当您在命令行上构建应用程序或从 Xcode 存档应用程序时，应用程序将使用这些设置构建和签名，并嵌入适当的配置文件。

如果您从管理器中选择“分发”选项，则此归档应用程序可能会完全退出，这就是再次提示您提供配置文件的原因。这意味着第三方开发人员可以为您开发应用程序，使用他们自己的签名信息将其存档，发送给您，然后您可以使用自己的私钥和应用商店的配置文件退出。

应该可以跳过这个最后的辞职阶段，但我猜过去有太多人犯了错误，所以 Xcode 只是接管并为你重新做所有事情。

# objective-c - 如何自定义 UITextField

> ID：12159559
> 
> 赞同：-1
> 
> 时间：2012-08-28T12:47:45.880
> 
> 标签：objective-c, ios, cocoa-touch

在我的应用程序中，我想更改`UITextField`. 我希望它看起来像一个矩形。IE 如何避免 a 的圆边`UITextField`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:51:35.573

在 Inspector 中，您可以更改边框样式：

![在此处输入图像描述](../Images/ff4396fc9f0155436a8e08612a070b95.png)

如果你想要一些花哨的东西，你也可以改变背景图片：

![在此处输入图像描述](../Images/e141434577fe0a356abf2145a5ce9cb2.png)

如果您不使用 Interface Builder，您可以在`viewDidLoad`.

# mysql - 在 JBoss 启动时填充 hibernate/jpa MySql 数据源

> ID：12159560
> 
> 赞同：1
> 
> 时间：2012-08-28T12:47:46.707
> 
> 标签：mysql, hibernate, jakarta-ee, jpa, jboss

换句话说，让 JBoss 在启动时立即运行 SQL 脚本文件或 bean。

当我重新启动我的应用程序时，我想在每次重新构建数据库时重新填充我的数据库。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:08:11.837

根据 JBoss 版本（Java EE 6 中引入了 Singleton），您可以使用带有[Startup注释的](http://docs.oracle.com/javaee/6/api/javax/ejb/Startup.html)[Singleton](http://docs.oracle.com/javaee/6/api/javax/ejb/Singleton.html) bean，并在[@PostConstruct](http://docs.oracle.com/javaee/6/api/javax/annotation/PostConstruct.html)方法中执行这些操作。

如下所示：

```
import javax.annotation.PostConstruct;
import javax.ejb.Singleton;
import javax.ejb.Startup;

@Singleton
@Startup
public class Initializer {
    @PostConstruct
    public void populate() {
        //initialize database here
    }
} 
```

根据规范，Singleton bean 为每个 JVM 实例化一次 - 因此在集群中使用会带来惊喜。

# javascript - jQuery 双对象构造函数 - 例如 $($(this))

> ID：12159562
> 
> 赞同：4
> 
> 时间：2012-08-28T12:47:55.067
> 
> 标签：javascript, jquery

假设您有以下代码：

```
function name() {
    $(this).css('background', 'red');
}

$('selector1').click(name);

$('selector2').click(function () {
    name.call($(this).parent());
}); 
```

现在，当通过单击“selector1”调用该函数时`this`是一个 HTML 对象和`$(this)`一个 jQuery 对象，但如果通过单击“selector2”调用该函数`this`已经是一个 jQuery 对象，那是`$(this)`什么？

我知道我可以做一些事情`name.call($(this).parent()[0]);`来获取一个 HTML 对象，但我的问题是当你做类似的事情时会发生什么`$($(this))`or `$($('selector'))`？这样做的结果是什么，最无能为力的是，使用这种结构有什么害处吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T12:49:06.563

`$(this)`when `this`is already a jQuery object 创建 jQuery 对象的副本。

来自[jQuery 文档](http://api.jquery.com/jQuery/)：

> ## 克隆 jQuery 对象
> 
> 将 jQuery 对象传递给`$()`函数时，会创建对象的克隆。这个新的 jQuery 对象引用了与初始对象相同的 DOM 元素。

# mysql - 表很大时mysql查询不使用索引

> ID：12159563
> 
> 赞同：3
> 
> 时间：2012-08-28T12:48:01.783
> 
> 标签：mysql, indexing

我有一张桌子：

```
CREATE TABLE `p` (  
`id` bigint(20) unsigned NOT NULL,  
`rtime` datetime NOT NULL,  
`d` int(10) NOT NULL,  
`n` int(10) NOT NULL,  
PRIMARY KEY (`rtime`,`id`,`d`) USING BTREE  
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

我有一个疑问：

```
select id, d, sum(n) from p where  rtime between '2012-08-25' and date(now()) group by id, d; 
```

我在一个小表（2 条记录）上对此查询运行解释，它告诉我它将使用我的 PK：

```
id  | select_type  | table | type   | possible_keys key  | key     | key_len | ref  | rows | Extra
1   | SIMPLE       | p     | range  | PRIMARY            | PRIMARY | 8       | NULL | 1    | Using where; Using temporary; Using filesort 
```

但是当我在同一张表上使用相同的查询时——只是这次它很大（3.5亿条记录）——它更喜欢遍历所有记录并忽略我的键

```
id  | select_type  | table  | type | possible_keys  | key  | key_len | ref  | rows      | Extra
1   | SIMPLE       | p      | ALL  | PRIMARY        | NULL | NULL    | NULL | 355465280 | Using where; Using temporary; Using filesort 
```

显然，这非常慢..有人可以帮忙吗？

编辑：这个简单的查询也需要大量时间：

```
select count(*) from propagation_delay where  rtime > '2012-08-28'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:57:11.800

您的查询：

```
...WHERE rtime between '2012-08-25' and date(now()) group by id, d; 
```

使用 rtime，并按 id 和 d 分组。至少您应该按`rtime`. 您可能还想尝试`rtime, id, d, n`按此顺序进行索引，但是当您这样做时，您会看到您的索引将包含或多或少与您的表相同的数据。

优化器可能会进行一些计算并得出结论，使用索引并不值得。

我会`rtime`单独留下一个索引。真正的关键是有多少记录匹配`WHERE`- 如果它们只是几个，阅读索引并在表中跳来跳去很方便。如果它们是多个，则最好顺序扫描整个表，从而节省来回读取。

> 查询从这 3.5 亿中获得了很大一部分——我会说几百万

好吧，那么很可能快速从索引中提取半万条记录，然后从主表中来回穿梭恢复那半万条记录的累积成本，超过打开主表的成本，并在此过程中对所有 350M 记录进行分组和汇总。

在这种情况下，*如果*您总是（或大部分时间）在 上运行聚合查询`rtime`，并且该表是一个累积（历史）表，并且每对夫妇`(id, d)`每天看到几个条目，您可能会考虑创建一个*按日期聚合的*辅助表。即，在（比方说）午夜，您运行查询并

```
INSERT INTO aggregate_table
    SELECT DATE(@yesterday) AS rtime, id, d, sum(n) AS n
    FROM main_table WHERE DATE(rtime) = @yesterday GROUP BY id, d; 
```

中的数据`aggregate_table`只有每对`(id, d)`持有`n`当天总和的夫妇有一个条目；该表按比例缩小，查询速度更快。这假设您的数量相对较少，`(id, d)`并且它们中的每一个每天都会在主表中生成大量行。

每对每分钟记录一次，聚合应该可以将速度提高三个数量级以上（相反，如果您每天两次使用大量不同的传感器，那么好处将可以忽略不计）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:29:54.463

在您的第二个查询中，日期范围将返回太多行，以至于 MySQL 决定不使用索引。它这样做是因为`n`不包含在索引中。非覆盖索引仍然是查找，并且进行大量查找比扫描表要慢。

为了利用索引，您需要减少选定行的数量，或者包含`n`在索引中以获得完整的“覆盖”索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T15:27:01.950

您可能让 MySQL 使用带有[Index Hint Syntax](http://dev.mysql.com/doc/refman/5.6/en/index-hints.html)的某个索引。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-28T12:57:02.923

只是一个预感，在后面有点经验，尝试将引擎从 MyISAM 更改为 InnoDB。MyISAM 在许多录音和其他错误方面存在一些问题，而 InnoDB 现在更好了。此外，从 MySQL 5.5 开始，默认引擎是 InnoDB：[http ://dev.mysql.com/doc/refman/5.5/en/innodb-default-se.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-default-se.html)

# java - 在 Java 中使用轮询不好吗？

> ID：12159564
> 
> 赞同：32
> 
> 时间：2012-08-28T12:48:03.037
> 
> 标签：java, multithreading

我有几个`ArrayLists`作为数据队列工作。每个队列都链接到一个单独的*线程*，该线程检查其中是否`ArrayList`有一些数据。

```
 while (array.size == 0) {
    // nothing
 }

 // do stuff with one element of the array
 // remove element from array
 // and call the loop again 
```

我在嵌入式系统编程中做过类似的事情，但是在 Java 中使用它是否安全？担心的是通过非常快速地迭代该while循环来浪费过程功率。

它可以通过添加`Thread.sleep(100)`并每 100 毫秒检查一次来解决，但又一次 - 响应时间较慢。

问题是 - 我是否需要添加睡眠或者我不应该担心这一点？

关于更安全/更好的系统来检查数组中的新数据有什么建议吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-28T12:52:21.720

ArrayList 不是线程安全的集合，因此如果一个线程将数据添加到您的列表中，而另一个线程尝试从同一个列表中检索数据，您无法保证另一个线程会看到添加的元素。

并且像您描述的那样忙于等待会不必要地消耗cpu资源。

既然您似乎需要一个队列，为什么不使用一个，例如[`ArrayBlockingQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ArrayBlockingQueue.html). 它有一个[`take`方法](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ArrayBlockingQueue.html#take%28%29)可以阻塞，而不消耗 CPU 周期，直到一个项目被添加到队列中。它是线程安全的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-28T12:51:10.233

除非您需要等待的时间非常短，从而使上下文切换过于昂贵，否则我不会使用旋转。它肯定会无缘无故地浪费 CPU 周期。

您应该使用`wait/notify`或其他一些信号机制来暂停线程并仅在必要时唤醒它。

对于更高级的结构，生产者-消费者模式有专门的数据结构，比如[BlockingQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/BlockingQueue.html)（选择一个实现）：

> 一个队列，它还支持在检索元素时等待队列变为非空，并在存储元素时等待队列中的空间变为可用的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T13:10:06.077

`java.lang.ArrayList`根本不是线程安全的。出于排队目的，最好使用`BlockingQueue`. 如果队列为空，它会阻塞线程调用而不消耗 cpu。您可以根据需要使用`ArrayBlockingQueue`or`LinkedBlockingQueue`或其他队列实现。

即使您可以使用它来实现它，`wait and notifyAll`但始终建议使用`BlockingQueue`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T12:52:52.737

使用 java 5 中发布的阻塞队列之类的东西怎么样。我认为现在建议使用这种方法，而不是等待/通知，这可能会变得非常复杂。我已经使用它并且效果很好。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/BlockingQueue.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/BlockingQueue.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T13:14:33.320

除了使用 ArrayList，您还可以使用 Concurrent 集合，例如 ArrayBlockingQueue

```
ArrayBlockingQueue<YourObject> theQueue;
while(true) {
  YourObject o = theQueue.take();
 //process your object
} 
```

在另一个地方，你填满你的队列，你只需做一个

```
theQueue.add(theElement); 
```

等待对象的线程将“休眠”直到有一个元素。add 方法将唤醒消费线程。

您可以在此处阅读有关此类的更多信息：http: [//docs.oracle.com/javase/6/docs/api/java/util/concurrent/ArrayBlockingQueue.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ArrayBlockingQueue.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T12:53:16.760

如果没有睡眠，您的线程将尽可能快地循环并访问 ArrayList，可能大多数时候没有任何结果。

我建议实施侦听器/观察者模式。如果可以的话，让填充 ArrayList 的生产者通知适当的线程进行更改。因此，您将从轮询行为转变为推送行为。

不确定这在您的架构中是否可行，但需要对您的系统进行进一步解释。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-10T06:31:58.100

**什么是轮询，它有什么问题？**

反复测试条件直到它变为真的过程称为轮询。

轮询通常是在循环的帮助下实现的，以检查特定条件是否为真。如果属实，则采取某些行动。这会浪费许多 CPU 周期并使实现效率低下。例如，在一个经典的排队问题中，一个线程正在生产数据，而另一个线程正在使用它。

**Java多线程如何解决这个问题？**

为了避免轮询，Java 使用了三种方法，`wait()`即`notify()`和`notifyAll()`。

所有这些方法都属于`Object`最终类，因此所有类都有它们。它们只能在同步块中使用。

**wait()** - 它告诉调用线程放弃锁并进入睡眠状态，直到其他线程进入同一个监视器并调用`notify()`.

**notify()** - 它唤醒一个调用`wait()`同一对象的单个线程。需要注意的是，调用`notify()`实际上并没有放弃对资源的锁定。

**notifyAll()** - 它唤醒所有调用`wait()`同一个对象的线程。

`ArrayList`不是线程安全的集合。使用`ArrayBlockingQueue`.

[类 ArrayBlockingQueue](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ArrayBlockingQueue.html)

# c# - 在 Web 服务请求中共享信息

> ID：12159566
> 
> 赞同：0
> 
> 时间：2012-08-28T12:48:05.280
> 
> 标签：c#, asp.net, multithreading, wcf, logging

我们有一个解决方案，我们使用 WCF 客户端消息检查器从 http 标头中读取关联 ID（和其他值）。

然后我们将此值存储在 System.ServiceModel.OperationContext.Current.IncomingMessageProperties 中。

OperationContext.Current 是当前线程的执行上下文。

但是，根据 Jon Skeet 对这个问题的回答：[IIS 中的请求会在单个线程上运行吗？](https://stackoverflow.com/questions/1643987/will-a-request-in-iis-run-on-a-single-thread) asp.net 请求将在线程之间跳转。

这正是我们正在经历的，即在请求执行期间相关 id 会发生变化。

有没有什么地方可以存储来自 http 请求的值，以便可以在堆栈的较低位置访问它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T08:55:09.377

我已经使用该`System.Web.HttpContext.Current.Items`集合来存储我们在 MessageInspector 中获取的值，例如

```
 public void AfterReceiveReply(ref Message reply, object correlationState)
    {
        var httpResponse =
            reply.Properties[HttpResponseMessageProperty.Name] 
                   as HttpResponseMessageProperty;

        if (httpResponse != null)
        {
            string cookie = httpResponse.Headers[HttpResponseHeader.SetCookie];

            if (!string.IsNullOrEmpty(cookie))
            {
                System.Web.HttpContext.Current.Items.Add("MyCookies", cookie);
            }
        }
    } 
```

在堆栈的其他地方，可以使用相同的键从 Items 集合中获取值。

有关更多详细信息，请查看 Scott Hanselman 的这篇[文章](http://www.hanselman.com/blog/ATaleOfTwoTechniquesTheThreadStaticAttributeAndSystemWebHttpContextCurrentItems.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-10T23:32:07.890

这对我有用

```
 var headers =OperationContext.Current.IncomingMessageProperties["httpRequest"];
        var apiToken = ((HttpRequestMessageProperty)headers).Headers["apiKey"]; 
```

# c# - 在 Web 服务中调用 WebMethod 方法：它进行了“异步”调用？

> ID：12159567
> 
> 赞同：0
> 
> 时间：2012-08-28T12:48:06.487
> 
> 标签：c#, .net, web-services, asynchronous

我的 WebService ( `.asmx`)上有这个方法

```
[WebMethod(EnableSession = true)]
public string Test(string IDPagina)
{
   return "Hello"
} 
```

现在，如果从 WebService 中的另一个方法：

```
[WebMethod(EnableSession = true)]
public string Edit(string IDPagina)
{
   return Test("1234");
} 
```

它直接`Test()`从同一个“类”中“调用”，还是会对自己进行“异步”调用？（建立新的肥皂连接等）。

只是好奇...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:50:08.543

它将像任何其他函数一样直接调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T12:50:58.080

就像类中的任何其他方法一样，它将直接调用而无需肥皂连接

# wix - 如何防止在通过 Wix 卸载 msi 期间删除预先存在的 GAC 条目

> ID：12159573
> 
> 赞同：0
> 
> 时间：2012-08-28T12:48:25.837
> 
> 标签：wix, windows-installer, gac

我有一个 wix 脚本，其中放置了一些不同应用程序常用的共享 Dll。如果 dll 已经被另一个 msi 注册，没有问题，除非所有使用它的 msi 都卸载，否则它不会被删除。但在我的情况下，这些条目是手动注册到 GAC 的，因此它们不会绑定到任何 msi。它们在卸载过程中被删除，我不希望这样。您如何告诉 msi 包在卸载后保留任何预先存在的 gac 条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:57:42.250

基本上按照[这个](http://support.microsoft.com/kb/905238/en-us)如果你安排`RemoveExistingProducts`得太早，GAC 项目将被删除。也许稍后再尝试`RemoveExistingProducts`，看看是否有帮助。没试过这个只是看到你的问题并正在阅读那篇文章。:)

# grails - 如何将选择选项值绑定到类的属性？

> ID：12159575
> 
> 赞同：0
> 
> 时间：2012-08-28T12:48:28.613
> 
> 标签：grails, select, bind, option

是否可以将选项的值绑定到类的属性？如果是，请问如何？我的不工作。我搜索的所有示例都使用带有自己的对象/类或枚举的列表，但我不想使用列表/类或枚举，因为它只包含 2 个项目。

```
 <td >
               <select id="selectById" name="selectBy" size="1" >
                 <option value="1"  ${searchCriteria.isByUser!= null? false: true}  >by Employee</option>
                  <option value="1"  ${searchCriteria.isByUser!= null? true: false}  >by User</option>
               </select>
           </td> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:55:48.810

域类中的属性名称应与 select 中的 name 属性相同。

领域

```
class Book{
    String author
} 
```

html

```
<select name="author"><option value="Tom">Tom<option/><option value="Peter">Peter</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:00:44.373

看起来您正在尝试从选择框中选择的对象中获取值，这应该可以，但是如果您要使用超过 2 个选项，您可以开始查看[g:select](http://grails.org/doc/2.1.0/ref/Tags/select.html)因为它有一些帮助写起来容易一些。

我不确定 searchCriteria.isByUser 中的实际内容，它看起来像是一个 int 但如果它是一个布尔值，则需要调整下面的语句。

```
 <td>
    <select id="selectById" name="selectBy" size="1" >
      <option value="0"  ${(searchCriteria.isByUser == 0) ? 'SELECTED':''}  >by Employee</option>
      <option value="1"  ${(searchCriteria.isByUser == 1) ? 'SELECTED':''}  >by User</option>
    </select>
  </td> 
```

# javascript - 使用 jquery-ui 对话框的 MVC3 Ajax 链接确认对话框

> ID：12159577
> 
> 赞同：0
> 
> 时间：2012-08-28T12:48:35.260
> 
> 标签：javascript, ajax, asp.net-mvc-3, jquery-ui

我最近一直在学习 MVC 3，我找到了两种从列表视图中删除记录的解决方案。但是我想要它们的组件，但是我对 javascript 知识的缺乏使这变得非常困难。

我有这两个删除链接：

```
@Html.ActionLink("Delete", "Delete", 
    new { id = item.ID }, new { @class = "delete-link" }) |
@Ajax.ActionLink("Delete Ajax", "Delete", "MyController",
    new {id = item.ID},
    new AjaxOptions {
        HttpMethod = "POST",
        OnBegin = "return ConfirmDone()",
        OnSuccess = "deleteConfirmation"
    }) 
```

第一个使用以下 javascript 删除记录：

```
<script>
    $(function () {
        var deleteLinkObj;
        // delete Link
        $('.delete-link').click(function () {
            deleteLinkObj = $(this);  
            $('#delete-dialog').dialog('open');
            return false; 
        });

        //definition of the delete dialog.
        $('#delete-dialog').dialog({
            autoOpen: false, width: 400, resizable: false, modal: true, 
            buttons: {
                "Continue": function () {
                    $.post(deleteLinkObj[0].href, function (data) 
                    {  
                        var rowId = "#myTableItem-id-" + data.id;
                        $('.myTable').find(rowId).hide('slow');
                    });

                    $(this).dialog("close");
                },
                "Cancel": function () {
                    $(this).dialog("close");
                }
            }
        });
    });
</script> 
```

第二个链接使用此脚本函数进行确认：

```
<script>
    function ConfirmDone() {
        return confirm("Are you sure you want delete this item?");
    }
</script> 
```

现在这两种解决方案都可以正常工作，但是我更喜欢第二个链接的编码，但我喜欢 jquery-ui 在第一个链接中生成的确认框。所以我想把它们混合在一起。

我认为我需要做的是当`Ajax.ActionLink`调用时`ConfirmDone()`我需要显示一个 jquery 对话框，就像我对第一个链接所做的那样。但是我不确定如何生成它并允许此对话框根据按下的按钮返回真或假。

任何帮助将非常感激。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:24:22.257

经过几个小时的尝试，我想出了一个解决方案：

我的链接更改为：

```
@Ajax.ActionLink("Delete", "Delete", "StruContractUser",
     new { id = item.UserID },
     new AjaxOptions {
         HttpMethod = "Delete",
         OnBegin = "JSONDeleteFile_OnBegin",
         OnComplete = "notify"
     },
new { @class = "delete-link" }) 
```

`OnBegin`它使用以下选项调用此函数：

```
<script type="text/javascript">
    function JSONDeleteFile_OnBegin(context) {
        return false; 
    }
</script> 
```

# javascript - 如何在异步函数与延迟 jquery 之间同步

> ID：12159582
> 
> 赞同：2
> 
> 时间：2012-08-28T12:48:51.830
> 
> 标签：javascript

我有两个函数，我想在它们之间同步第一个函数是异步函数。只有当我从第一个函数得到结果时，我才想调用第二个函数，我尝试了这段代码

```
 $.when(update().then(function (data) {
       alert(1);
        $.when(func1(),func2()).then( function(dataFunc1,dataFunc2) {});
         });

  update : function(){

            var dfd = $.Deferred();
             d3.json("test.json", function(json) {  
                    var data = createData()
                    dfd.resolve(data);
                    return dfd.promise();
        }}; 
```

调用更新的问题，然后调用 d3,json 并且不执行 d3,json 的逻辑，因为它是异步函数，然后引发警报（1）。

我认为只有当更新功能完成并且我将获得来自 d3.json 的数据时，才会发出警报（1）。

我错过了什么 ？我还阅读了关于 reslove 和 promise 的内容，是否仅在需要传递参数时才需要使用 reslove ？什么时候需要使用 promise？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T13:03:02.533

我对你的函数进行了存根，修复了一些语法错误，它工作正常：

```
$.when(update()).then(function (updateData) {
    console.log(updateData);

    $.when(func1(),func2())
    .then(function(dataFunc1, dataFunc2) {
        console.log(dataFunc1 + ' ' + dataFunc2);        
    });
}); 
```

[http://jsfiddle.net/RBS5V/](http://jsfiddle.net/RBS5V/)

最明显的问题是第一行的语法错误：

```
$.when(update()).then(function (data) {
//             ^ missing closing parenthesis 
```

此外，您需要在任何回调之外返回您的承诺：

```
update: function(){
    var dfd = $.Deferred();

    d3.json("test.json", function(json) {
        var data = createData()
        dfd.resolve(data);
        // dont return a promise here
    }};

    // return it out here
    return dfd.promise();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:53:53.187

我不确定你做错了什么，你的代码看起来有语法错误。

我对其进行了重组：

```
$.when((function () {
    var dfd = $.Deferred();
    d3.json("test.json", function(json) {
        var data = createData()
        dfd.resolve(data);
    });
    return dfd.promise();
}())).then(function (data) {
    alert(1);
    $.when(func1(),func2()).then( function(dataFunc1,dataFunc2) {
        alert(2);
    });
}); 
```

这应该有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T10:53:38.907

您的问题是由于 d3.json() 调用的异步性质，即函数调用后的行执行不是等待完成 d3.json() 函数。您可以使用延迟方法解决此问题。使用延迟并尝试在 json 调用后暂停执行几秒钟..

# asp.net - 如何在 ASP.NET 中使用带有文本框的 Server.HtmlEncode？

> ID：12159585
> 
> 赞同：0
> 
> 时间：2012-08-28T12:48:58.300
> 
> 标签：asp.net, textbox

当我在文本框中输入像“”这样的值时，它会引发以下错误。 ![在此处输入图像描述](../Images/e9448d1aa5e6705e78d1a2825ef8bb24.png)

有人告诉我使用 Server.HTMLencode/Server.HTMLdcode。但我不知道如何将它与文本框一起使用。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:51:46.620

您必须在文本框中传递特殊字符，例如 < 或 > ...

您可以将 ValidateRequest 调整为 false 以进行授权，您可以在页面上进行调整

```
<%@ Page validateRequest="false" %> 
```

链接：[http ://www.asp.net/whitepapers/request-validation](http://www.asp.net/whitepapers/request-validation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:52:01.193

如果要允许这些值，请添加`ValidateRequest="false"`到`<%@ page`声明中

请注意，这确实使您更容易受到潜在的 XSS 攻击等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:07:55.220

如果您使用 .NET 4.5，您可以将 requestValidationMode 设置为 4.5：

```
<httpRuntime requestValidationMode="4.5" /> 
```

然后访问表单字段数据的未经验证的查询字符串：

```
Request.Unvalidated.Form["name"]; 
```

然后您可以对字符串进行 html 解码以防止 XSS，我建议为此使用 AntiXSS 库（它在 ASP.NET 4.5 中烘焙）。

# javascript - 将 jquery-ui 窗口的父元素设置为另一个元素

> ID：12159587
> 
> 赞同：1
> 
> 时间：2012-08-28T12:49:05.417
> 
> 标签：javascript, jquery, css, jquery-ui, jquery-ui-dialog

我创建了一个标准的 jquery-ui 对话框`$("#element").dialog();`，我试图找到将它包含在另一个元素的范围内的最佳方式。

我试图避免只使用 javascript 并重新定位它，因为我希望能够将它移动到容器的边界之外，并且容器能够使用滚动`#container {overflow:auto;}`

这是一种情况：http: [//jsfiddle.net/Z4xAA/](http://jsfiddle.net/Z4xAA/) - 我试图将#myDialog包含在#dialogContainer的范围内

我试过这样做[将](https://stackoverflow.com/questions/2596833/how-to-move-child-element-from-one-parent-to-another-using-jquery "相关问题")dialog.parent 移动到容器元素 - 但无济于事。

知道我会怎么做吗？

编辑：我在玩小提琴，发现如果我自己通过 webkit 调试器将对话框移动到容器元素中，它的行为就如所愿。现在只需以编程方式执行此操作即可。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:55:05.690

使用 .append() 正确移动元素。在容器对话框的 .parent() 上执行此操作会产生所需的结果。

```
$("#dialogContainer").append($("#myDialog").parent()); 
```

[在http://jsfiddle.net/Z4xAA/7/](http://jsfiddle.net/Z4xAA/7/)更新小提琴

之后需要做的就是重新定位对话框（如果需要将其停止在元素顶部上方）。

# c - 如何从自身内部获取指向程序特定可执行文件部分的指针？（也许带有诽谤）

> ID：12159595
> 
> 赞同：1
> 
> 时间：2012-08-28T12:49:17.423
> 
> 标签：c, linux, assembly, elf

我在 Linux 环境中，我需要制作一个程序来检索放置在其可执行文件的某个部分中的一些数据。那么，如何从自身内部获取指向程序部分（按其名称）的指针？

我知道可以使用`elf_getdata()`将部分的索引作为参数传递给 get 和`Elf_Data`struct ，并且该结构的字段之一是`d_buf`，它是指向实际数据的指针。但是，该`elf_getdata()`函数似乎将部分数据从文件复制到内存，这不是我想要的。我想要一个指向在加载时已加载到内存中的数据的指针。

所以，伙计们，有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T21:01:47.577

实际上，使用`libelf`struct `Elf64_Shdr`（对于 64 位系统）可以获得指向节的指针，因为该`sh_addr`字段确实指向将在运行时加载节的实际地址。因此，它可以用作指针。这样，甚至不需要使用该`elf_getdata()`函数来检索`Elf_Data`结构。

由于我想要做的是一个可以链接其他目标文件的库，因此我的代码可能具有打开可执行文件本身以利用某些`libelf`功能的功能，以便它可以从主文件部分读取数据，如如下：

```
// A global variable which stores the executable file name
extern const char *__progname;

void retrieve_data() {
  int fd;       // File descriptor for the executable ELF file
  char *section_name, path[384];
  size_t shstrndx;

  Elf *e;           // ELF struct
  Elf_Scn *scn;     // Section index struct
  Elf64_Shdr *shdr;     // Section struct

  // Create the full path of the executable
  getcwd(path, 255);
  strcat(path, "/");
  strncat(path, __progname, 127);

  if (elf_version(EV_CURRENT) == EV_NONE)
    errx(EXIT_FAILURE, "ELF library iinitialization failed: %s", elf_errmsg(-1));

  if ((fd = open(path, O_RDONLY, 0)) < 0)
    err(EXIT_FAILURE, "open \"%s\" failed", path);

  if ((e = elf_begin(fd, ELF_C_READ, NULL)) == NULL)
    errx(EXIT_FAILURE, "elf_begin() failed: %s.", elf_errmsg(-1));

  // Retrieve the section index of the ELF section containing the string table of section names
  if (elf_getshdrstrndx(e, &shstrndx) != 0)
    errx(EXIT_FAILURE, "elf_getshdrstrndx() failed: %s.", elf_errmsg(-1));

  scn = NULL;

  // Loop over all sections in the ELF object
  while ((scn = elf_nextscn(e, scn)) != NULL) {
    // Given a Elf Scn pointer, retrieve the associated section header
    if ((shdr = elf64_getshdr(scn)) != shdr)
      errx(EXIT_FAILURE, "getshdr() failed: %s.", elf_errmsg(-1));

    // Retrieve the name of the section
    if ((section_name = elf_strptr(e, shstrndx, shdr->sh_name)) == NULL)
      errx(EXIT_FAILURE, "elf_strptr() failed: %s.", elf_errmsg(-1));

    // If the section is the one we want... (in my case, it is one of the main file sections)
    if (!strcmp(section_name, "Section name")) {
      // We can use the section adress as a pointer, since it corresponds to the actual
      // adress where the section is placed in the virtual memory
      struct data_t * section_data = (struct data_t *) shdr->sh_addr;

      // Do whatever we want

      // End the loop (if we only need this section)
      break;
    }
  }

  elf_end(e);
  close(fd);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T13:29:14.457

ELF 标头不一定映射到内存中，因此依赖它可能有点冒险。这是一种不需要任何 API 的方法：

1.  声明两个符号，表示相关部分的开始和结束。
2.  用于`__attribute__ ((section ("")))`将它们放在具有已知名称的部分中
3.  使用自定义链接器脚本，将您需要的部分放在两个变量的部分之间。

或者，您可以使用[链接器生成的符号](http://sourceware.org/binutils/docs/ld/Output-Section-LMA.html)，就像[_etext/_edata/_end 一样](http://www.kernel.org/doc/man-pages/online/pages/man3/end.3.html)。

# java - 为什么我们在 Java 中为子对象分配父引用？

> ID：12159601
> 
> 赞同：104
> 
> 时间：2012-08-28T12:49:31.040
> 
> 标签：java, oop, inheritance, casting, upcasting

我在问一个非常简单的问题，但我对此有点困惑。

假设我有一堂课`Parent`：

```
public class Parent {

    int name;
} 
```

还有另一堂课`Child`：

```
public class Child extends Parent{

    int salary;
} 
```

最后是我的 Main.java 类

```
public class Main {

    public static void main(String[] args)
    {
        Parent parent = new Child();
        parent.name= "abcd";
    }
} 
```

如果我制作一个像这样的子对象

```
Child child = new Child(): 
```

然后`child`对象可以访问这两个`name and salary`变量。

我的问题是：

```
Parent parent = new Child(); 
```

只允许访问`name`Parent 类的变量。那么这条线的确切用途是什么？

```
 Parent parent = new Child(); 
```

而且当它使用动态多态性时，为什么在这样做之后无法访问子类的变量

```
Parent parent = new Child(); 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-08-28T12:59:42.387

首先，澄清一下术语：我们将一个`Child`对象分配给一个类型为 的变量`Parent`。`Parent`是对碰巧是 a 的子类型的对象的`Parent`引用`Child`。

它仅在更复杂的示例中有用。想象一下，您添加`getEmployeeDetails`到类 Parent：

```
public String getEmployeeDetails() {
    return "Name: " + name;
} 
```

我们可以重写该方法`Child`以提供更多详细信息：

```
@Override
public String getEmployeeDetails() {
    return "Name: " + name + " Salary: " + salary;
} 
```

现在您可以编写一行代码来获取任何可用的详细信息，无论对象是 a`Parent`还是`Child`：

```
parent.getEmployeeDetails(); 
```

以下代码：

```
Parent parent = new Parent();
parent.name = 1;
Child child = new Child();
child.name = 2;
child.salary = 2000;
Parent[] employees = new Parent[] { parent, child };
for (Parent employee : employees) {
    employee.getEmployeeDetails();
} 
```

将导致输出：

```
Name: 1
Name: 2 Salary: 2000 
```

我们使用 a`Child`作为`Parent`. 它具有该类独有的特殊行为`Child`，但是当我们调用时，`getEmployeeDetails()`我们可以忽略差异并专注于如何`Parent`和`Child`相似。这称为[子类型多态性](http://en.wikipedia.org/wiki/Subtype_polymorphism)。

您更新的问题询问为什么当对象存储在引用中`Child.salary`时无法访问。答案是“多态性”和“静态类型”的交集。因为 Java 在编译时是静态类型的，所以您可以从编译器中获得某些保证，但您不得不遵守规则作为交换，否则代码将无法编译。在这里，相关保证是子类型（例如）的每个实例都可以用作其超类型（例如）的实例。例如，您可以保证当您访问或方法或字段定义在任何可以分配给类型变量的非空对象上时`Child``Parent``Child``Parent``employee.getEmployeeDetails``employee.name``employee``Parent`. 为了保证这一点，编译器`Parent`在决定您可以访问什么时只考虑该静态类型（基本上是变量引用的类型）。因此，您无法访问在对象的运行时类型上定义的任何成员，`Child`.

当您真正想将 a`Child`用作 a时，`Parent`这是一个易于使用的限制，您的代码将可用于`Parent`及其所有子类型。如果这不可接受，请指定引用的类型`Child`。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-06-30T00:49:21.367

当您编译程序时，基类的引用变量会获取内存，编译器会检查该类中的所有方法。所以它检查所有基类方法，但不检查子类方法。现在在运行时创建对象时，只有选中的方法才能运行。如果函数运行的子类中的方法被覆盖。子类的其他函数没有运行，因为编译器在编译时没有识别它们。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-08-28T12:57:30.020

它允许您通过公共父接口访问所有子类。这有利于运行所有子类上可用的通用操作。需要一个更好的例子：

```
public class Shape
{
  private int x, y;
  public void draw();
}

public class Rectangle extends Shape
{ 
  public void draw();
  public void doRectangleAction();
} 
```

现在，如果您有：

```
List<Shape> myShapes = new ArrayList<Shape>(); 
```

您可以将列表中的每个项目引用为形状，您不必担心它是矩形还是其他类型，例如圆形。你可以一视同仁；你可以画出所有这些。你不能调用 doRectangleAction 因为你不知道 Shape 是否真的是一个矩形。

这是您在以通用方式处理对象和专门处理对象之间进行的交易。

真的，我认为您需要阅读有关 OOP 的更多信息。一本好书应该会有所帮助：[http ://www.amazon.com/Design-Patterns-Explained-Perspective-Object-Oriented/dp/0201715945](https://rads.stackoverflow.com/amzn/click/com/0201715945)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-08-28T12:55:57.903

如果您将父类型分配给子类，则表示您同意使用父类的共同特征。

它使您可以自由地从不同的子类实现中抽象出来。结果限制了您使用父功能。

但是，这种类型的分配称为向上转换。

```
Parent parent = new Child(); 
```

反之则是垂头丧气。

```
Child child = (Child)parent; 
```

因此，如果您创建实例`Child`并将其向下转换为`Parent`您可以使用该类型属性`name`。如果您创建实例，`Parent`您可以执行与前一个案例相同的操作，但您不能使用`salary`，因为`Parent`. 返回上一个可以使用的情况，`salary`但前提是向下转换为`Child`.

[还有更详细的解释](http://forum.codecall.net/topic/50451-upcasting-downcasting)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-08-28T13:03:57.463

这很简单。

```
Parent parent = new Child(); 
```

在这种情况下，对象的类型是`Parent`。Ant`Parent`只有一个属性。是`name`。

```
Child child = new Child(); 
```

在这种情况下，对象的类型是`Child`. Ant`Child`有两个属性。他们是`name`和 `salary`。

事实上，不需要在声明时立即初始化非最终字段。通常这是在运行时完成的，因为您通常无法确切知道您需要什么实现。例如，假设您有一个以类`Transport`为开头的类层次结构。和三个子类`Car`：`Helicopter`和`Boat`。还有另一个类`Tour`有 field `Transport`。那是：

```
class Tour {
   Transport transport;
} 
```

只要用户没有预订旅行并且没有选择特定类型的交通工具，您就不能初始化此字段。这是第一个。

其次，假设所有这些类都必须有一个方法`go()`但具有不同的实现。您可以在超类中默认定义一个基本实现，`Transport`并在每个子类中拥有唯一的实现。通过这种初始化`Transport tran; tran = new Car();`，您可以调用该方法`tran.go()`并获得结果，而无需担心具体的实现。它会从特定的子类调用被覆盖的方法。

此外，您可以在使用超类实例的任何地方使用子类实例。例如，您想提供租用交通工具的机会。如果不使用多态，则必须为每种情况编写很多方法：`rentCar(Car car)`，`rentBoat(Boat boat)`等等。同时多态性允许您创建一种通用方法`rent(Transport transport)`。你可以传入它的任何子类的对象`Transport`。此外，如果随着时间的推移你的逻辑会增加，你需要在层次结构中创建另一个类？使用多态性时，您不需要更改任何内容。只需扩展类`Transport`并将您的新类传递给方法：

```
public class Airplane extends Transport {
    //implementation
} 
```

和`rent(new Airplane())`。在`new Airplane().go()`第二种情况下。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-28T12:57:44.507

当您有多个实现时，就会发生这种情况。让我解释。假设您有几种排序算法，并且您想在运行时选择一个来实现，或者您想给其他人添加他的实现的能力。为了解决这个问题，您通常会创建一个抽象类（Parent）并有不同的实现（Child）。如果你写：

```
Child c = new Child(); 
```

你将你的实现绑定到 Child 类，你不能再改变它了。否则，如果您使用：

```
Parent p = new Child(); 
```

只要 Child 扩展 Parent，您以后就可以在不修改代码的情况下对其进行更改。

使用接口也可以完成同样的事情：Parent 不再是一个类，而是一个 java 接口。

一般来说，您可以在 DAO 模式中使用此方法，在这种模式中您希望拥有多个依赖于数据库的实现。你可以看看 FactoryPatter 或 AbstractFactory Pattern。希望这可以帮到你。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-04-05T15:17:48.467

我知道这是一个非常古老的线程，但我曾经遇到过同样的疑问。

所以这个概念`Parent parent = new Child();`与java中的早期绑定和后期绑定有关。

私有、静态和最终方法的绑定发生在编译时，因为它们不能被覆盖，正常的方法调用和重载方法是早期绑定的示例。

考虑这个例子：

```
class Vehicle
{
    int value = 100;
    void start() {
        System.out.println("Vehicle Started");
    }

    static void stop() {
        System.out.println("Vehicle Stopped");
    }
}

class Car extends Vehicle {

    int value = 1000;

    @Override
    void start() {
        System.out.println("Car Started");
    }

    static void stop() {
        System.out.println("Car Stopped");
    }

    public static void main(String args[]) {

        // Car extends Vehicle
        Vehicle vehicle = new Car();
        System.out.println(vehicle.value);
        vehicle.start();
        vehicle.stop();
    }
} 
```

输出：100

汽车启动

车辆停止

发生这种情况是因为`stop()`它是一种静态方法并且不能被覆盖。所以绑定`stop()`发生在编译时并且`start()`是非静态的在子类中被覆盖。因此，有关对象类型的信息仅在运行时可用（后期绑定），因此`start()`调用 Car 类的方法。

同样在此代码中`vehicle.value`，我们`100`将其作为输出，因为变量初始化不属于后期绑定。***方法覆盖是 java 支持运行时多态性的方式之一***。

*   当通过超类引用调用被覆盖的方法时，Java 会根据调用发生时引用的对象的类型来确定要执行该方法的哪个版本（超类/子类）。因此，该确定是在运行时做出的。
*   在运行时，它取决于被引用对象的类型（而不是引用变量的类型），它决定了将执行哪个版本的覆盖方法

我希望这能回答`Parent parent = new Child();`重要的地方以及为什么您无法使用上述参考访问子类变量。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-28T12:57:41.620

假设您想要一组 Parent 类的实例，以及一组扩展 Parent 的子类 Child1、Child2、Child3。在某些情况下，您只对更通用的父类实现感兴趣，而不关心子类引入的*更具体的东西。*

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-01-29T02:40:49.607

我认为以上所有解释对于面向对象编程 (OOP) 的新手来说都过于技术化了。几年前，我花了一些时间来解决这个问题（作为 Jr Java 开发人员），我真的不明白为什么我们使用父类或接口来隐藏我们实际上在幕后调用的实际类。

1.  直接原因是隐藏复杂性，以便调用者不需要经常更改（用外行的话来说是被黑客入侵和劫持）。这很有意义，特别是如果您的目标是避免产生错误。而且您修改代码的次数越多，您就越有可能让其中一些代码爬到您身上。另一方面，如果您只是扩展代码，那么您将不太可能出现错误，因为您一次只专注于一件事，而您的旧代码不会更改或仅更改一点。想象一下，您有一个简单的应用程序，允许医疗行业的员工创建个人资料。为简单起见，我们假设我们只有全科医生、外科医生和护士（当然，实际上还有很多更具体的职业）。对于每个职业，您想存储一些一般信息和一些特定于该专业人士的信息。例如，Surgeon 可能具有像 firstName、lastName、yearsOfExperience 这样的一般字段作为一般字段，但也有特定字段，例如存储在列表实例变量中的专业化，如内容类似于“骨外科”、“眼科手术”等的列表。护士不会有任何这些，但可能会列出他们熟悉的程序，全科医生会有自己的细节。因此，你如何保存一个细节的配置文件。但是，您不希望 ProfileManager 类知道这些差异，因为随着应用程序扩展其功能以涵盖更多医学专业，例如物理治疗师、心脏病学家、肿瘤学家等，它们将不可避免地随着时间而改变和增加。你想要你的 ProfileManger 做的只是说 save()，不管它正在保存谁的配置文件。因此，通常的做法是将其隐藏在接口、抽象类或父类后面（如果您计划允许创建普通医疗员工）。在这种情况下，让我们选择一个 Parent 类并将其命名为 MedicalEmployee。在幕后，它可以引用任何上述扩展它的特定类。当 ProfileManager 调用 myMedicalEmployee.save() 时， save() 方法将被多态（多结构）解析为最初用于创建配置文件的正确类类型，例如 Nurse 并在其中调用 save() 方法班级。或父类（如果您计划允许创建普通医疗员工）。在这种情况下，让我们选择一个 Parent 类并将其命名为 MedicalEmployee。在幕后，它可以引用任何上述扩展它的特定类。当 ProfileManager 调用 myMedicalEmployee.save() 时， save() 方法将被多态（多结构）解析为最初用于创建配置文件的正确类类型，例如 Nurse 并在其中调用 save() 方法班级。或父类（如果您计划允许创建普通医疗员工）。在这种情况下，让我们选择一个 Parent 类并将其命名为 MedicalEmployee。在幕后，它可以引用任何上述扩展它的特定类。当 ProfileManager 调用 myMedicalEmployee.save() 时， save() 方法将被多态（多结构）解析为最初用于创建配置文件的正确类类型，例如 Nurse 并在其中调用 save() 方法班级。

2.  在许多情况下，您并不真正知道在运行时需要什么实现。从上面的示例中，您不知道全科医生、外科医生或护士是否会创建个人资料。但是，您知道，无论如何，您都需要在完成后保存该配置文件。MedicalEmployee.profile() 正是这样做的。它被每种特定类型的 MedicalEmployee（全科医生、外科医生、护士）复制（覆盖）

3.  上面 (1) 和 (2) 的结果是您现在可以添加新的医学专业，在每个新类中实现 save()，从而覆盖 MedicalEmployee 中的 save() 方法，并且您不必修改 ProfileManager全部。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-12-03T13:37:25.003

例如我们有一个

```
class Employee

{

int getsalary()

{return 0;}

String getDesignation()

{

return “default”;

}

}

class Manager extends Employee

{

int getsalary()

{

return 20000;

}

String getDesignation()

{

return “Manager”

}

}

class SoftwareEngineer extends Employee

{

int getsalary()

{

return 20000;

}

String getDesignation()

{

return “Manager”

}

} 
```

现在，如果您想设置或获取所有员工（即软件工程师、经理等）的薪水和职位

我们将获取一个 Employee 数组并调用方法 getsalary(),getDesignation

```
Employee arr[]=new Employee[10];

arr[1]=new SoftwareEngieneer();

arr[2]=new Manager();

arr[n]=…….

for(int i;i>arr.length;i++)

{

System.out.println(arr[i].getDesignation+””+arr[i].getSalary())

} 
```

现在它是一种松散耦合，因为您可以拥有不同类型的员工，例如：软件工程师、经理、hr、pantryEmployee 等

因此您可以将对象提供给父引用，而不管不同的员工对象

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2012-08-28T12:51:58.957

您将 parent 声明为 Parent，因此 java 将仅提供 Parent 类的方法和属性。

```
Child child = new Child(); 
```

应该管用。或者

```
Parent child = new Child();
((Child)child).salary = 1; 
```

# git - git push 时连接被中止异常

> ID：12159602
> 
> 赞同：0
> 
> 时间：2012-08-28T12:49:31.423
> 
> 标签：git

为什么我们会得到“连接被中止”异常......致命：远程端意外挂断致命：远程端意外挂断。

整个会议内容如下：

```
vamshi.krishna@-KRISHNA /c/Project Repo/diameter (springdevelopment) $ git push origin springdevelopment 
vamshi.krishna@svn..local's password: 
Counting objects: 11, done. 
Delta compression using up to 4 threads. 
Compressing objects: 100% (6/6), done. 
Writing objects: 100% (9/9), 3.06 KiB, done. 
Total 9 (delta 0), reused 0 (delta 0) 
Read from remote host svn..local: The connection was aborted fatal: The remote end hung up unexpectedly fatal: The remote end hung up unexpectedly. 
```

是连接问题吗？权限问题？

如何解决？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:53:30.357

**您需要使用git pull origin remore_branch_name**更新当前分支。

# objective-c - 在这个字符串编号方法中，每次调用它时我都必须分配吗？

> ID：12159603
> 
> 赞同：0
> 
> 时间：2012-08-28T12:49:34.447
> 
> 标签：objective-c, xcode4, nsstring, alloc

使用此论坛中的其他答案，我制作了此类方法来判断字符串是否为数字。它工作正常，但每次调用它时我都必须分配初始化吗？毕竟，如果这不是 XCode4，那会构成内存泄漏，不是吗？注意，我使用的是 XCode4，它具有自动引用计数器，可以防止这种情况发生。

我希望做类似的事情

```
if this is not alloc-initted then alloc-init 
```

但似乎无法让它工作。

目前的方法

```
+ (BOOL)isThisANumber:(NSString *)candidate{

NSNumberFormatter *fmtr = [[NSNumberFormatter alloc] init];
[fmtr setNumberStyle:NSNumberFormatterDecimalStyle];
NSNumber *myNumber = [fmtr numberFromString:candidate];
if ( myNumber== nil) {
    return NO;
    } 
else{
    return YES;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:54:17.477

如果线程安全不是问题，您可以随时执行以下操作：

```
static NSNumberFormatter *fmtr;
if (fmtr==nil)
{
    fmtr=[[NSNumberFormatter alloc] init];
    [fmtr setNumberStyle:NSNumberFormatterDecimalStyle];
}
NSNumber *myNumber = [fmtr numberFromString:candidate];
if ( myNumber== nil) {
    return NO;
} 
else{
    return YES;
} 
```

顺便说一句，您的原始代码会泄漏内存:-) 每次调用它都会分配一个新的格式化程序，并且永远不会释放它。

# java - 如何从 Android 上的 https url 获取 xml？

> ID：12159606
> 
> 赞同：2
> 
> 时间：2012-08-28T12:49:38.867
> 
> 标签：java, android, xml

我正在查看一些带有教程的页面，以了解如何从 url 获取 XML 并在手机上显示其中的数据，但我只找到了 http 连接。

我需要从 url 获取数据，但我无法使用 http 连接到服务器 我需要使用 https

```
try {

            DefaultHttpClient httpClient = new DefaultHttpClient();

            HttpPost httpPost = new HttpPost("https:...");

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            line = EntityUtils.toString(httpEntity);

            line = con.getResponseMessage();
            //con.getResponseMessage();
        } catch (UnsupportedEncodingException e) {
            line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
        } catch (MalformedURLException e) {
            line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
        } catch (IOException e) {
            line = "<results status=\"error\"><msg>Can't connect to server</msg></results>";
        } 
```

如何更改此片段以使用 https？有没有从 https 获取 xml 的教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:01:33.993

我找到了使用此页面通过 https 连接到服务器并获取 XML 的解决方案：https: [//secure.mcafee.com/us/resources/white-papers/wp-defeating-ssl-cert-validation.pdf](https://secure.mcafee.com/us/resources/white-papers/wp-defeating-ssl-cert-validation.pdf) 这很有帮助。

# backend - StatsD 的后端

> ID：12159614
> 
> 赞同：3
> 
> 时间：2012-08-28T12:50:21.933
> 
> 标签：backend, statsd

我听说我们可以为 StatsD 创建自己的后端。
是否可以？？如果是，请指导我如何完成。
谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T12:33:16.337

这确实是可能的。您可以在 github.com 上的 statsd 项目中找到 3 个[后端](https://github.com/etsy/statsd/tree/master/backends)[的](https://github.com/etsy/statsd/tree/master/backends)示例。

```
 https://github.com/etsy/statsd/tree/master/backends 
```

至于如何做到这一点，最好的选择是阅读这 3 个示例，因为这实际上取决于您希望将数据发送到哪里，以了解如何为 statsd 编写后端。

在示例中，有两个示例通过远程套接字发送数据，一个示例将输出写入文件（控制台）。

# c# - 与私有访问修饰符相反

> ID：12159623
> 
> 赞同：2
> 
> 时间：2012-08-28T12:51:11.440
> 
> 标签：c#, access-modifiers

是否有可能创建一个声明它的类实际上无法访问的成员？只有派生类才能访问该成员。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T12:59:21.787

您要寻找的最接近的是`protected`，它只能由声明它的类及其派生类访问。见这里：http: [//msdn.microsoft.com/en-us/library/ms173121.aspx](http://msdn.microsoft.com/en-us/library/ms173121.aspx)

除非你指的是一个`abstract`类，它不能被实例化并且可以包含没有代码的方法声明：http: [//msdn.microsoft.com/en-us/library/sf985hc5 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/sf985hc5(v=vs.71).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T12:52:21.220

不，那是做不到的。最少访问修饰符是`private`在类内部可访问但在外部不可访问

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T12:53:05.147

不，在 C# 中没有办法做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T13:31:11.810

如果您真的想这样做，您可以使用不允许任何更改的集合创建一个属性 - 所以不是真的无法访问，但会限制功能。但是，这可能表明需要重新设计以决定是否有更好的方法。

# structuremap - 结构映射自动注册仅适用于调用程序集中的类型

> ID：12159628
> 
> 赞同：0
> 
> 时间：2012-08-28T12:51:22.890
> 
> 标签：structuremap

我正在尝试让自动注册适用于添加到扫描操作的程序集。目前仅注册当前程序集中的类型 - 添加到扫描中的任何类型都不会自动注册（我必须手动添加它们）。

我知道程序集正在被拉入，因为我在程序集中有一个 Registry 类，其中包含正在注册的 LogService 类型。

是否有一些我缺少的开关或其他简单的原因导致这不起作用？

我正在使用版本 2.6.4.1

## 谢谢你的帮助

这是我的扫描。我希望自动注册包含 LogService 的程序集中的所有类型：

```
scan =>
{
scan.TheCallingAssembly();
scan.AssemblyContainingType< LogService >();
scan.LookForRegistries();
scan.WithDefaultConventions();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:53:57.843

您可以`Assembly`使用`IAssemblyScanner`. 文档位于[http://docs.structuremap.net/ScanningAssemblies.htm](http://docs.structuremap.net/ScanningAssemblies.htm)

**更新** 看来您的想法是正确的。您缺少的部分是您注册每个先前加载的程序集的地方。`AppDomain`您可以使用 ,从 中获取这些`AppDomain.CurrentDomain.GetAssemblies()`。您应该能够毫无困难地弄清楚其余部分

# jboss - 更改 JBoss AS7 会话 ID 格式

> ID：12159634
> 
> 赞同：0
> 
> 时间：2012-08-28T12:51:38.940
> 
> 标签：jboss

我刚刚安装了 JBoss AS7，我看到会话 id 格式发生了变化。例如 D9PL+U9MOZ6hee1Qqm1bsh6M.node01

我可以更改格式以匹配旧格式（字母数字（char32））吗？例如BF8452E2C7D3822017116A56E61FCBD0

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:35:09.670

您使用什么配置文件运行 AS7？例如，standalone-ha.xml 启用了 mod_cluster 子系统，并附加了节点标识 (node01)。但是，我可能没有正确回答您的问题...

# macos - NSOpenglContext 资源，不正确的渲染

> ID：12159636
> 
> 赞同：1
> 
> 时间：2012-08-28T12:51:45.140
> 
> 标签：macos, opengl, nsopenglview

我无法让 NSOpenGLContext 正常工作。我有一个静态对象（3D 引擎）来处理所有 opengl 的东西、资源、vbos 等。

对于可可版本，我创建了一个像这样的 NSOpenGLContext：

```
- (BOOL) CreateContext
{
    [NSOpenGLContext clearCurrentContext];

    NSOpenGLPixelFormatAttribute attributes [] =
    {
    NSOpenGLPFAWindow,
    NSOpenGLPFADoubleBuffer,
    NSOpenGLPFAAccelerated,         // If present, this attribute indicates that only hardware-accelerated renderers are considered.
    NSOpenGLPFAPixelBuffer,         // If present, this attribute indicates that rendering to a pixel buffer is enabled.
    NSOpenGLPFAColorSize, 32,
    NSOpenGLPFADepthSize, 24,
    NSOpenGLPFAStencilSize, 8,
    (NSOpenGLPixelFormatAttribute)nil
    };

    NSOpenGLPixelFormat* pixelFormat = [[NSOpenGLPixelFormat alloc] initWithAttributes:attributes];
    NSOpenGLContext* pContext =  [[NSOpenGLContext alloc] initWithFormat: pixelFormat shareContext:nil];

    if (pContext)
    {
        [pContext makeCurrentContext];
        m_pOGLContext = pContext;

        // Vertical Sync
        GLint vblSynch = 0; // disable vsync
        [pContext setValues:&vblSynch forParameter:NSOpenGLCPSwapInterval];

        glFrontFace(GL_CW);

        // Set the clear Color
        glClearColor(0, 0, 0, 0);

        [pixelFormat release];
        return true;
    }

    [pixelFormat release];

    return false;
} 
```

引擎初始化后，我创建了一个 NSView。创建 NSView 后，在 prepareOpenGL 函数中，我只需将 NSOpenGLContext 成员设置为引擎中的当前 NSOpenGLContext ：

```
- (void) prepareOpenGL
{
    m_pOGLContext = [NSOpenGLContext currentContext];
    return;
} 
```

然后，在 NSView 的函数 lockFocus 中，我为上下文设置了视图：

```
- (void)lockFocus
{   
    [super lockFocus];

    if ([m_pOGLContext view] != self)
    {
        [m_pOGLContext setView:self];
    }

    [m_pOGLContext makeCurrentContext];
} 
```

现在，在绘制时我无法获取要绘制的资源，我只有很多缓冲区工件。

我尝试使用共享选项为 NSView 创建第二个上下文，但结果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:54:59.523

不确定，我也是初学者，但我认为格式错误，应该是：

```
NSOpenGLPixelFormatAttribute attributes [] =
{
NSOpenGLPFAWindow,
NSOpenGLPFADoubleBuffer,
NSOpenGLPFAAccelerated,         // If present, this attribute indicates that only hardware-accelerated renderers are considered.
NSOpenGLPFAPixelBuffer,         // If present, this attribute indicates that rendering to a pixel buffer is enabled.
NSOpenGLPFAColorSize, 
NSOpenGLPFADepthSize, 
NSOpenGLPFAStencilSize, 
32,24,8,
(NSOpenGLPixelFormatAttribute)nil
}; 
```

# java - 是否可以将 3 个 .properties 文件合并为一个 .properties 文件？

> ID：12159641
> 
> 赞同：0
> 
> 时间：2012-08-28T12:51:53.207
> 
> 标签：java

我有一个应用程序的 3 个 .properties 文件。每个文件都用于开发、测试和生产环境。将这三个文件合并为一个文件是否可能（并且实用）？怎么做到呢？还是最好将每个文件保存在自己的环境中？这是代码。

```
enter code here
lock-timeout=7200000
usesLogin=true
uses-hardlocks=false
use-nested-roles=1

# Password Change URL for VSRD, VSRT and VSRP (in that order)
#pwchange-url=https://iteodova-md.dev.fema.net/va-npsc/pwchange/default.asp
#pwchange-url=https://iteodova-md.dev.fema.net/va-npsc/pwchange_tdl/default.asp
 pwchange-url=https://iteodova-md.fema.net/va-npsc/pwchange/default.asp

# Database Connectivity and User Session Management

jdbc-driverClassName=oracle.jdbc.driver.OracleDriver
#jdbc-url=jdbc:oracle:thin:@wnli3d3.fema.net:1521:vsrd
#jdbc-url=jdbc:oracle:thin:@wnli3d2.fema.net:1521:vsrt
#jdbc-url=jdbc:oracle:thin:@mwli3d1.fema.net:1521:vsrp
 jdbc-url=jdbc:oracle:thin:@wnli3d4.fema.net:1521:vsrp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:54:50.730

您可以使用Apache 的[Commons Configuration](http://commons.apache.org/configuration/howto_properties.html)。

例如：

```
CompositeConfiguration config = new CompositeConfiguration();
config.addConfiguration(new PropertiesConfiguration("color.properties");
config.addConfiguration(new PropertiesConfiguration("application.properties")); 
```

或者包括在这个例子中：

```
# usergui.properties

include = colors.properties
include = sizes.properties 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:09:10.743

最好将属性保存在单独的文件中（即用于测试、登台、生产等）。它们之间的切换可以通过运行带有 -D 选项的 java 来完成：

```
java -DpropertiesType=test ... 
```

属性重载和合并在[Spring 框架](http://www.springsource.org/spring-framework)中有效地完成。

你可以看看[这个](http://www.mkyong.com/spring/spring-propertyplaceholderconfigurer-example/)例子。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:02:42.033

我同意最好将属性保存在单独的文件中的想法。如果您使用环境变量或配置文件（如果您使用的是 Spring），则可以将文件物理地分隔到它们自己的目录中，例如“src/main/resources”。然后，您只需要根据您的环境变量或配置文件设置读取正确的内容。如何执行此操作取决于 Java 堆栈的具体情况。例如，使用 Spring 和 Java Config，您可以：

```
@Configuration
public class MyMainConfig {

    public MyMainConfig() {
        super();
    }

    @Configuration
    @Profile("dev")
    @PropertySource({ "classpath:/dev/myPropertyFileName.properties" })
    static class Dev
    {   }

    @Configuration
    @Profile("test")
    @PropertySource({ "classpath:/test/myPropertyFileName.properties" })
    static class Test
    {  }

    @Configuration
    @Profile("prod")
    @PropertySource({ "classpath:/prod/myPropertyFileName.properties" })
    static class Prod
    {    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T13:06:20.950

您可以通过这种方式将属性与资格一起使用。

在以下代码中，您可以拥有

```
key=value 
```

作为默认值，就像你现在做的那样

```
key.ENVIRON=value 
```

如果它需要针对该环境有所不同。

如您所见，代码非常短，可以轻松比较不同的配置，因为它们都在一个地方。

如果您有一个复杂的系统，您可以使用 ENVIRON.TYPE.INSTANCE 扩展这种方法。

```
public class EnvironProperties extends Properties {
    private final String environ;

    public EnvironProperties(String environ) {
        this.environ = environ;
    }

    @Override
    public String getProperty(String key) {
        String property = super.getProperty(key + "." + environ);
        return property == null ? super.getProperty(key) : property;
    }

    public String getEnviron() {
        return environ;
    }

    public static void main(String... args) throws IOException {
        String properties = "lock-timeout=7200000\n" +
                "usesLogin=true\n" +
                "uses-hardlocks=false\n" +
                "use-nested-roles=1\n" +
                "\n" +
                "# Password Change URL for VSRD, VSRT and VSRP (in that order)\n" +
                "pwchange-url=https://iteodova-md.dev.fema.net/va-npsc/pwchange/default.asp\n" +
                "pwchange-url.PROD=https://iteodova-md.fema.net/va-npsc/pwchange/default.asp\n" +
                "\n" +
                "# Database Connectivity and User Session Management\n" +
                "\n" +
                "jdbc-driverClassName=oracle.jdbc.driver.OracleDriver\n" +
                "jdbc-url.TEST=jdbc:oracle:thin:@wnli3d3.fema.net:1521:vsrd\n" +
                "jdbc-url.DEV=jdbc:oracle:thin:@wnli3d2.fema.net:1521:vsrt\n" +
                "jdbc-url.PROD=jdbc:oracle:thin:@mwli3d1.fema.net:1521:vsrp\n" +
                "jdbc-url=jdbc:oracle:thin:@wnli3d4.fema.net:1521:vsrp";

        EnvironProperties dev = new EnvironProperties("DEV");
        EnvironProperties test = new EnvironProperties("TEST");
        EnvironProperties prod = new EnvironProperties("PROD");

        for (EnvironProperties ep : new EnvironProperties[]{dev, test, prod}) {
            System.out.println("[" + ep.getEnviron() + "]");
            ep.load(new StringReader(properties));
            for (String prop : "uses-hardlocks,pwchange-url,jdbc-url".split(","))
                System.out.println(prop + "= " + ep.getProperty(prop));
        }
    }
} 
```

# javascript - Canvas.toDataUrl("image/png") 无法正常工作

> ID：12159642
> 
> 赞同：0
> 
> 时间：2012-08-28T12:51:56.493
> 
> 标签：javascript, html, html5-canvas

我正在画布上绘制图像。之后我做 canvas.toDataUrl("image/png"); 但这并不顺利。这是jsfiddle的链接！

[http://jsfiddle.net/QcS4u/34/](http://jsfiddle.net/QcS4u/34/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:55:35.260

将来自另一个域的图像加载到画布后，您将无法使用`toDataUrl`，因为它会打开一个安全漏洞（来自其他域的信息泄露）。

看看[为什么这个 toDataURL 行是一个安全错误？](https://stackoverflow.com/questions/7279438/why-is-this-todataurl-line-a-security-error).

# c# - XDocument.Parse 向节点添加命名空间

> ID：12159647
> 
> 赞同：1
> 
> 时间：2012-08-28T12:52:05.060
> 
> 标签：c#, .net-3.5, linq-to-xml, kml

我正在使用 Linq to XML 解析 XML 文本。返回的 XDocument 将所有这些命名空间添加到我的每个节点，并且无法找到后代，或者至少，我对“Placemark”的搜索不起作用，很可能是因为 kml:Placemark 不适合搜索。

当我在单元测试中使用基本的 XML 文件对此进行测试时，它运行良好。我猜 XML 声明部分没有所有的命名空间。

如何在不添加所有命名空间的情况下解析 XML 文本？

解析：

```
 XDocument document = XDocument.Parse(text);
    var polygonNodes = document.Descendants("Polygon"); // yields no nodes, even though there are descendants with this. 
```

**原始文件**

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
<Document>
    <name>poly1_philmont.kml</name>
    <Style id="s_ylw-pushpin_hl">
        <IconStyle>
            <scale>1.3</scale>
            <Icon>
                <href>http://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png</href>
            </Icon>
            <hotSpot x="20" y="2" xunits="pixels" yunits="pixels"/>
        </IconStyle>
        <LineStyle>
            <color>ff0000aa</color>
        </LineStyle>
        <PolyStyle>
            <color>33ffaa00</color>
        </PolyStyle>
    </Style>
... </kml> 
```

**用 XDocument（根节点）解析**

```
<kml:kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
  <kml:Document>
    <kml:name>poly1_philmont.kml</kml:name>
    <kml:Style id="s_ylw-pushpin_hl">
      <kml:IconStyle>
        <kml:scale>1.3</kml:scale>
        <kml:Icon>
          <kml:href>http://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png</kml:href>
        </kml:Icon>
        <kml:hotSpot x="20" y="2" xunits="pixels" yunits="pixels" />
      </kml:IconStyle>
      <kml:LineStyle>
        <kml:color>ff0000aa</kml:color>
      </kml:LineStyle>
      <kml:PolyStyle>
        <kml:color>33ffaa00</kml:color>
      </kml:PolyStyle>
    </kml:Style>
...
</kml:kml> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:34:13.170

我认为您遇到了 LINQ to XML 数据模型的缺点，它不会在其模型中存储元素或属性名称的前缀部分，而是仅存储命名空间声明属性（例如`xmlns="..."`and `xmlns:pf="..."`），然后在序列化对象时树标记它试图推断元素和属性的前缀。在您的示例中，命名空间`http://www.opengis.net/kml/2.2`被定义了两次，一次作为默认命名空间使用`xmlns="http://www.opengis.net/kml/2.2"`，一次使用前缀`kml`( `xmlns:kml="http://www.opengis.net/kml/2.2"`)。在这种情况下，推断元素名称前缀的尝试被破坏了，看起来实现将最后一个声明考虑在内

```
 string xml = @"<foo xmlns=""http://example.com/ns1"" xmlns:pf=""http://example.com/ns1""/>";

    XDocument doc = XDocument.Parse(xml);

    doc.Save(Console.Out); 
```

输出

```
<pf:foo xmlns="http://example.com/ns1" xmlns:pf="http://example.com/ns1" /> 
```

尽管

```
 string xml = @"<foo xmlns:pf=""http://example.com/ns1"" xmlns=""http://example.com/ns1""/>";

    XDocument doc = XDocument.Parse(xml);

    doc.Save(Console.Out); 
```

输出

```
<foo xmlns:pf="http://example.com/ns1" xmlns="http://example.com/ns1" /> 
```

因此，除非您在创建输入时控制名称空间声明的顺序，否则您的输入 XML 与同一名称空间的两个名称空间声明可能不会与 XDocument 或 XElement 往返。

然而，只要元素位于命名空间中，使用 LINQ to XML 使用`Descendants`or`Elements`或`Element`方法访问它们的正确方法是使用`XNamespace`a 与 a的串联`string`来构造一个`XName`eg

```
XNamespace ns = doc.Root.Namespace;
IEnumerable<XElement> fooElements = doc.Descendants(ns + "foo"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:56:31.220

用这个

```
XNamespace kmlNS = "http://www.opengis.net/kml/2.2";
XDocument document = XDocument.Parse(text);
var polygonNodes = document.Descendants(kmlNS+"Polygon"); 
```

# port - 两个端口具有相同的 PID

> ID：12159649
> 
> 赞同：0
> 
> 时间：2012-08-28T12:52:10.413
> 
> 标签：port, pid

我对 Java 很陌生，我的问题可能听起来很愚蠢。我在端口 8080 上有 Jboss，在端口 1521 上有 OracleXETNListener。当我检查命令提示符时，我看到两个端口都使用相同的进程 ID，即 2908。这可能是一种情况吗？此外，当我在 Jboss 上运行我的应用程序时，它会给出端口已在使用中的错误。

```
Active Connections

  Proto  Local Address          Foreign Address        State           PID
  TCP    0.0.0.0:135            LR89PT1Y:0             LISTENING       1000
  TCP    0.0.0.0:371            LR89PT1Y:0             LISTENING       3916
  TCP    0.0.0.0:445            LR89PT1Y:0             LISTENING       4
  TCP    0.0.0.0:1521           LR89PT1Y:0             LISTENING       2908
  TCP    0.0.0.0:3389           LR89PT1Y:0             LISTENING       1544
  TCP    0.0.0.0:4445           LR89PT1Y:0             LISTENING       2112
  TCP    0.0.0.0:49152          LR89PT1Y:0             LISTENING       600
  TCP    0.0.0.0:49153          LR89PT1Y:0             LISTENING       564
  TCP    0.0.0.0:49154          LR89PT1Y:0             LISTENING       680
  TCP    0.0.0.0:49155          LR89PT1Y:0             LISTENING       984
  TCP    0.0.0.0:54570          LR89PT1Y:0             LISTENING       2872
  TCP    0.0.0.0:54587          LR89PT1Y:0             LISTENING       672
  TCP    0.0.0.0:57065          LR89PT1Y:0             LISTENING       3040
  TCP    10.119.52.86:1521      LPDMW01HN4D3BS:54571   ESTABLISHED     2908
  TCP    10.119.52.86:54571     LPDMW01HN4D3BS:1521    ESTABLISHED     2872
  TCP    10.119.52.86:57493     sindprmpsp04:microsoft-ds  ESTABLISHED     4
  TCP    10.119.52.86:64337     d050876bc02:http       CLOSE_WAIT      1444
  TCP    10.119.64.250:139      LR89PT1Y:0             LISTENING       4
  TCP    10.119.64.250:56423    SPTCDI002:59530        ESTABLISHED     7328
  TCP    10.119.64.250:56425    SPTCDI002:59535        ESTABLISHED     7328
  TCP    10.119.64.250:56426    169.77.61.253:5061     ESTABLISHED     4872
  TCP    10.119.64.250:56427    SPTCDI002:59530        ESTABLISHED     7328
  TCP    10.119.64.250:56448    SINDWINP40:microsoft-ds  ESTABLISHED     4
  TCP    10.119.64.250:56460    inprlcfl11:microsoft-ds  ESTABLISHED     4
  TCP    10.119.64.250:56489    inprbcfl01:microsoft-ds  ESTABLISHED     4
  TCP    10.119.64.250:56550    itrhkdcep2:8000        ESTABLISHED     2068
  TCP    10.119.64.250:56663    vsipe0vl134:http       CLOSE_WAIT      4776
  TCP    10.119.64.250:56664    vsipe0vl134:http       CLOSE_WAIT      4776
  TCP    10.119.64.250:56665    vsipe0vl134:http       CLOSE_WAIT      4776
  TCP    10.119.64.250:56696    LR89PT1Y:56697         ESTABLISHED     2872
  TCP    10.119.64.250:56697    LR89PT1Y:56696         ESTABLISHED     2908
  TCP    10.119.64.250:56934    sdecdc1na06:microsoft-ds  ESTABLISHED     4
  TCP    10.119.64.250:56940    gsc-prod:44527         ESTABLISHED     4676
  TCP    10.119.64.250:57018    SINDWINP37:microsoft-ds  ESTABLISHED     4
  TCP    10.119.64.250:57035    169.77.211.185:8443    ESTABLISHED     7220
  TCP    10.119.64.250:57038    169.77.211.185:8443    ESTABLISHED     7220
  TCP    10.119.64.250:57046    169.77.235.249:8443    TIME_WAIT       0
  TCP    10.119.64.250:57047    169.77.235.249:8443    TIME_WAIT       0
  TCP    10.119.64.250:57051    169.77.235.249:8443    TIME_WAIT       0
  TCP    10.119.64.250:57057    169.77.235.249:8443    ESTABLISHED     9832
  TCP    10.119.64.250:57058    169.77.235.249:8443    ESTABLISHED     9832
  TCP    10.119.64.250:57060    169.77.235.249:8443    ESTABLISHED     9832
  TCP    10.119.64.250:57061    169.77.235.249:8443    ESTABLISHED     7536
  TCP    10.119.64.250:57063    proxybc270park:http    TIME_WAIT       0
  TCP    10.119.64.250:57064    LR89PT1Y:57050         TIME_WAIT       0
  TCP    10.119.64.250:59542    SPTCMX005:55813        ESTABLISHED     7328
  TCP    10.119.64.250:59544    SPTCDI001:59530        ESTABLISHED     4872
  TCP    10.119.64.250:63268    SPTCDI002:59535        ESTABLISHED     4872
  TCP    127.0.0.1:5152         LR89PT1Y:0             LISTENING       2440
  TCP    127.0.0.1:8080         LR89PT1Y:0             LISTENING       2908
  TCP    127.0.0.1:54568        LR89PT1Y:0             LISTENING       2908
  TCP    127.0.0.1:62522        LR89PT1Y:0             LISTENING       1508 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:18:10.523

It seems OracleXETNSListener also use port 8080, so process id is for the listener. When JBoss try to start it can't bind to the 8080 port.

To change the OracleXETNSListenr port follow these instructions: [http://hodentekhelp.blogspot.be/2008/08/my-oracle-10g-xe-is-on-port-8080-can-i.html](http://hodentekhelp.blogspot.be/2008/08/my-oracle-10g-xe-is-on-port-8080-can-i.html)

# android - android Widget中的动态布局

> ID：12159650
> 
> 赞同：1
> 
> 时间：2012-08-28T12:52:12.963
> 
> 标签：android, dynamic, widget, scrollview, appwidgetprovider

是否可以在 AppWidgetProvider 中创建动态布局？我只找到了使用 XML 创建小部件的教程，但不可能以这种方式创建视图..

我想像这样在行中绘制图像：http: [//imgur.com/7j18q](http://imgur.com/7j18q) 并添加一个水平滚动。是否可以 ？

问候 ！

**编辑：（这是我到目前为止所拥有的......但我仍然不知道如何添加这些图像）**

```
@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    // TODO Auto-generated method stub
    super.onUpdate(context, appWidgetManager, appWidgetIds);
    final int N = appWidgetIds.length;
    for(int i = 0; i<N; i++){
        int awID = appWidgetIds[i];
        RemoteViews v = new RemoteViews(context.getPackageName(), R.layout.about);
        try
        {
            j = 1;
            Set<User> users = LFMRestConnection.getFriendsNowListening(user, 1440);;
            for (User u : users) {
                album_pic = loadBitmap(u.getImageURL().getImageURL(ImageURL.Size.LARGE));
                resized_a_p = android.graphics.Bitmap.createScaledBitmap(album_pic, (50), (50), true);
            //URLS
                url_to_enter[j]=u.getLastTrack().getArtistName();
                track_to_enter[j]=u.getLastTrack().getTrackName();
            //profile picture
                user_pic = loadBitmap(u.getImageURL().getImageURL(ImageURL.Size.LARGE));
                resized_u_p = android.graphics.Bitmap.createScaledBitmap(user_pic, (25), (25), true);
                j++; 
            }
        }
        catch(Exception e)
        {
            //startActivity(i);
            System.out.println("widget error");     
        }
        appWidgetManager.updateAppWidget(awID, v);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:01:03.283

在你的xml布局中创建一个Horizo​​ntalScrollView，在里面放一个水平的LinearLayout，并通过设置id属性给***布局一个ID***

```
android:id="@+id/imageScrollLayout" 
```

然后，在您的活动的 onCreate 中，找到布局对象

```
LinearLayout imageScrollLayout = (LinearLayout)findViewById(R.id.imageScrollLayout); 
```

要动态地将新的 ImageViews 添加到布局中，请使用

```
ImageView newImageView=new ImageView();

//set the ImageView image with one of the following:
newImageView.setImageBitmap(bm);
newImageView.setImageDrawable(drawable);
newImageView.setImageResource(resId);

//add the new ImageView to your layout
imageScrollLayout.addView(newImageView); 
```

ImageView 的所有 xml 设置都可以在代码中访问，只需在设置图像后设置它们。Google Android 文档非常适合查找所有相关方法。此外，如果您在 Activity 的 onCreate 方法之外的任何地方添加图像，请记住将 imageScrollLayout 设置为 Activity 中的字段，而不是在 onCreate 方法中的本地字段，以便您可以在任何地方访问它。

**编辑：**要在 AppWidgetProvider 中实现这一点，您需要覆盖 onUpdate 方法。每当系统请求更新小部件时，都会调用此方法。如果确实需要更改小部件的 RemoteViews，则需要创建一组新视图，并将它们附加到小部件使用

```
appWidgetManager.updateAppWidget(componentName, remoteViews) 
```

其中 appWidgetManager 是提供给 onUpdate 方法的参数。在 onAppWidgetOptionsChanged() 方法中需要实现类似的过程。要提供 remoteViews 参数，请使用代码中的布局文件膨胀，以达到以下效果

```
LayoutInflater myInflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);  
final View myRootLayout = myInflater .inflate(R.layout.myLayout, null); 
```

之后就可以正常使用了

```
myRootLayout.findViewById(R.id.myView); 
```

找到您的布局并将 ImageViews 添加到其中。

毕竟，我怀疑Horizo​​ntalScrollView 不支持作为RemoteView，因此很难实现您想要的水平滚动。这可能是 Google 的设计决定，因为 AppWidget 中的水平滚动不能很好地与主屏幕之间的水平滚动配合使用。也许使用左右边缘按钮来显示新的图像页面？

# mysql - MYSQL/PHP 批量更新

> ID：12159654
> 
> 赞同：2
> 
> 时间：2012-08-28T12:52:30.067
> 
> 标签：mysql, batch-file, updates

我想为记录创建一个批量删除和/或更新屏幕，类似于 iphone 让您批量删除短信的方式。换句话说，当您单击编辑时，它会在所有记录旁边显示一个复选框，然后您可以单击一个按钮删除它们或更改值。

我发现了以下语法来插入一堆行：

```
insert into tbl (...) values (...) (...) (...) ... 
```

似乎还有一种批量删除的方法：

```
delete from tbl where id IN (1,2,3) 
```

有没有办法批量更新？

我想我可以只收集记录的 ID 号数组，然后根据按下的按钮运行删除或更新查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T12:54:15.300

您可以使用与查询`WHERE`相同的条件`DELETE`：

```
UPDATE tbl SET col1='...', col2='...' WHERE id IN (1,2,3) 
```

[看到这个*SQLFiddle*](http://sqlfiddle.com/#!2/00b24/1)

# spring-security - ExtJS Spring security 3.1 返回 JSON true 或 false

> ID：12159657
> 
> 赞同：0
> 
> 时间：2012-08-28T12:52:56.120
> 
> 标签：spring-security, extjs4.1

我正在使用带有 ExtJS 作为前端的 Spring security 3.1。这是我的 security-config.xml 文件。

```
<security:http auto-config="true" use-expressions="true">
    <security:intercept-url pattern="/login.html" access="permitAll()" />
    <security:intercept-url pattern="/**.html" access="isAuthenticated()" />
    <security:form-login login-page="/login.html"
        authentication-failure-url="/login.html"
        default-target-url="/index.html" always-use-default-target="true"/>
    <security:logout/>

</security:http> 
```

我的 ExtJS 4.0 登录控制器。

```
doLogin: function(formItem) {
    var loadingMask = new Ext.LoadMask(Ext.getBody(), {msg:"Logging in..."});
    loadingMask.show();
    var lp = formItem.up('loginpanel');
    var form = lp.getForm();
    console.log(form);
    form.submit({
        clientValidation: true,
        method: 'POST',
        url: "j_spring_security_check",
        /*
        params: {
            newStatus: 'delivered'
        },
        */

        success: function() {
            loadingMask.destroy();
            window.location = '/index.html';
            Ext.Msg.alert('Success', action.result.msg);
        },

        failure: function(form, action) {
            form.reset();
            loadingMask.destroy();
            switch (action.failureType) {
                case Ext.form.action.Action.CLIENT_INVALID:
                    Ext.Msg.alert('Failure', 'Form fields may not be submitted with invalid values');
                    break;
                case Ext.form.action.Action.CONNECT_FAILURE:
                    Ext.Msg.alert('Failure', 'Ajax communication failed');
                    break;
                case Ext.form.action.Action.SERVER_INVALID:
                   Ext.Msg.alert('Failure', action.result.msg);
            }
        }
    }); 
```

我的 Spring 登录控制器。

```
public class LoginController {

private static final Logger logger = LoggerFactory.getLogger(LoginController.class);

@RequestMapping(value = "/login.html", method = RequestMethod.GET)
public String login(Model model, @RequestParam(required=false) String message) {
    model.addAttribute("message", message);
    return "login";
} 
```

现在，如果我单击登录按钮表单，它会重定向到 index.html，但 ExtJs 中的 index.html 需要 JSON 字符串 true 或 false，它会抛出 JSON 错误。

```
Uncaught You're trying to decode an invalid JSON String: 
```

我知道 AuthenticationProcessingFilter 已被删除。现在我需要通过登录控制器返回成功的真字符串。任何帮助，将不胜感激 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T18:39:45.950

Yes`AuthenticationProcessingFilter`已被删除，但现在存在`UsernamePasswordAuthenticationFilter`。你可以按照[这个](http://javajeedevelopment.blogspot.mx/2011/02/integrating-spring-security-3-with.html)。

# sap - 稳定性问题 SAP BO 4.0

> ID：12159660
> 
> 赞同：-1
> 
> 时间：2012-08-28T12:52:57.673
> 
> 标签：sap, business-objects

我正在为我们的 BI 实施评估 SAP BO 4.0。我一直在探索 SAP BO 网络智能。我曾经担心的是在创建报告时，它经常会中断。从 Excel 电子表格中引入数据并与现有 Universe 合并的新功能无法按预期工作。你们有没有遇到过同样的问题？来自工作和部署最新版本的人的任何见解都可能非常有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:54:17.830

我们也有同样的问题。在 XI 3.1 中轻而易举的报表是在 SAP BI 4 中创建的噩梦。

该产品仅在 SP4 上接近稳定。不实施 SP5 我们在此版本的安全模型中存在更严重的问题。

如果要保留现有客户群，SAP 确实需要认真开始专注于软件的稳定性。

# wcf - svcutil 的替代命令行工具

> ID：12159661
> 
> 赞同：1
> 
> 时间：2012-08-28T12:52:58.307
> 
> 标签：wcf, command-line, wsdl, svcutil.exe

我们使用 svcutil.exe 从 WSDL 生成。对于我们的一些 WSDL 文档，其中包含到其他 wsdl 文档的导入标记，我们在生成代码时遇到了问题。我花了很多时间来解决这个问题，但我没有找到任何解决这个问题的方法。

```
<import namespace="http://example.com/stockquote/definitions"
       location="http://example.com/stockquote/stockquote.wsdl"/> 
```

从包含导入标记的 WSDL 生成代码会出现错误：

```
Error: Cannot import wsdl:binding Detail: Cannot find definition for htt p://example.com/stockquote/definitions:StockQuotePortType. Service Description with namespace htt p://example.com/stockquote/definitions is missing. Parameter name: name XPath to Error Source: //wsdl:definitions[@targetNamespace='http://example.com/stockquote/service']/wsdl:binding[@name='StockQuoteSoapBinding'] 
```

此示例直接取自 [W3.org 站点导入示例](http://www.w3.org/TR/wsdl#_style)

在 Visual Studio 中使用“添加服务引用”时，一切都完美无缺。我放弃搜索为什么它不想与 svcutil.exe 一起工作我不想再花时间寻找解决方案，而只是寻找替代工具。

是否有任何替代工具 svcutil ？我们需要一个可以从 WSDL 生成代码的命令行工具

# github - 创建一个提交，保存它，不要推送它而不是创建更多的提交，推送它们而不是推送第一个提交

> ID：12159662
> 
> 赞同：1
> 
> 时间：2012-08-28T12:53:00.183
> 
> 标签：github, commit

如果我想保存一个提交`commit-1`但不想推送它，然后在几次提交之后，我也推送了，那么我想推送它`commit-1`怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:02:30.500

您想在推送之前重新排序本地提交吗？

您可以使用`git rebase --interactive`. 不过，请务必阅读有关使用此功能的陷阱。正确使用它非常强大。

# iphone - - [NSUserDefaults 同步] iOS 上的性能问题

> ID：12159663
> 
> 赞同：4
> 
> 时间：2012-08-28T12:53:01.860
> 
> 标签：iphone, ios, performance, nsuserdefaults

> **可能重复：**
> [NSUserDefaults 同步的最佳实践](https://stackoverflow.com/questions/5600859/best-practice-for-nsuserdefaults-synchronize)

我调用`-[NSUserDefault setIntegerValue:1 forKey:differentKeys];` 了大约 50 次，每次使用不同的键，然后调用`-[NSUserDefault synchronize];`

这会对性能产生影响吗？多少次会对性能产生影响？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T13:00:12.127

将`synchronize`其视为提交更改命令，因此如果您不需要每次将值设置为默认值时都调用它。如果您`NSUserDefaults`同时进行大量更改，那么您可能只需要`synchronize`在最后调用一次。这完全取决于您的具体需求。

此外，这方面的性能差异也会因存储的数据量、频率和设备的功能而异。总的来说，我建议`synchronize`尽可能少打电话。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T12:59:23.777

它会对性能产生很小的影响。也许不是你注意到的东西。但是，最好只调用`-[NSUserDefaults synchronize];`一次，在所有 set 方法调用结束时调用，因为它会将所有更改保存到文件中，而不是在每次更改之后。

# c - 睡觉的理发师给僵局

> ID：12159665
> 
> 赞同：1
> 
> 时间：2012-08-28T12:53:08.053
> 
> 标签：c, multithreading, deadlock

我写了睡眠理发师问题的代码，看起来很奇怪......代码如下..

```
#include<stdlib.h>
#include<stdio.h>
#include<pthread.h>

#define MAX_C 10
int a[MAX_C], head=0, tail=0, tmp, tb, tc, count=1;
pthread_mutex_t B;
double time_slot[]={0.125,0.5,0.75,1.00,1.25,1.50,1.75,2.00};

void wait(int a)
{
    clock_t g=clock();
    while(((float)(clock()-g))/CLOCKS_PER_SEC != time_slot[a]);
}

void barber()
{
    printf("barber started\n");
    while(1) {
        tmp=0;
        while(head==tail) {
            printf("b\n");
        }
        tb=rand()%8;
        printf("tail:%d\n", tail);
        tail=(tail+1)%MAX_C;
        wait(tb);
    }
}

void customer()
{       
    printf("customers started\n");
    while(1) {
        wait(rand()%8);
        while((head+1)%MAX_C == tail) {
            printf("c\n");
        }
        a[head]=count-1;
        printf("head:%d\n", head);
        head=(head+1)%MAX_C;
    }
}

int main(int argc, char* argv[])
{
    pthread_t b,c;

    pthread_mutex_init(&B, NULL);
    pthread_create(&c, NULL, (void*)&customer, NULL);
    pthread_create(&b, NULL, (void*)&barber, NULL);

    pthread_join(b, NULL);
    pthread_join(c, NULL);  
    exit(0);
} 
```

问题是当缓冲区已满时......理发师正在等待客户......但客户根本没有执行！（它既没有等待也没有填充缓冲区）......因为客户while循环是不执行...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T06:42:37.917

正如 Daneil Fischer 所说......我有一个错误`while(((float)(clock()-g))/CLOCKS_PER_SEC != time_slot[a]);`应该用

> `while(((float)(clock()-g))/CLOCKS_PER_SEC <= time_slot[a]);`

但它仍然很奇怪，时钟值的这种“丢失”仅在整个缓冲区被填满后才发生......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-27T23:18:43.760

执行器使用 CPU 的信号量有问题

请查看您是否很好地使用了信号量。不要忘记#include

```
#include <unistd.h>
#include <stdlib.h>

#include <pthread.h>
#include <semaphore.h>

// The maximum number of customer threads.
#define MAX_CUSTOMERS 25
</b>

void *customer(void *number) {
    int num = *(int *)number;

    // Leave for the shop and take some random amount of
    // time to arrive.
    printf("Customer %d leaving for barber shop.\n", num);
    randwait(5);
    printf("Customer %d arrived at barber shop.\n", num);

    // Wait for space to open up in the waiting room...
    sem_wait(&waitingRoom);
    printf("Customer %d entering waiting room.\n", num);

    // Wait for the barber chair to become free.
    sem_wait(&barberChair);

    // The chair is free so give up your spot in the
    // waiting room.
    sem_post(&waitingRoom);

    // Wake up the barber...
    printf("Customer %d waking the barber.\n", num);
    sem_post(&barberPillow);

    // Wait for the barber to finish cutting your hair.
    sem_wait(&seatBelt);

    // Give up the chair.
    sem_post(&barberChair);
    printf("Customer %d leaving barber shop.\n", num);
}

void *barber(void *junk) {
    // While there are still customers to be serviced...
    // Our barber is omnicient and can tell if there are 
    // customers still on the way to his shop.
    while (!allDone) {

    // Sleep until someone arrives and wakes you..
    printf("The barber is sleeping\n");
    sem_wait(&barberPillow);

    // Skip this stuff at the end...
    if (!allDone) {

        // Take a random amount of time to cut the
        // customer's hair.
        printf("The barber is cutting hair\n");
        randwait(3);
        printf("The barber has finished cutting hair.\n");

        // Release the customer when done cutting...
        sem_post(&seatBelt);
    }
    else {
        printf("The barber is going home for the day.\n");
    }
    }
} 
```

# ruby-on-rails - Rails/Cocoon：link_to_add_association 到父级的父级

> ID：12159666
> 
> 赞同：1
> 
> 时间：2012-08-28T12:53:08.017
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form, cocoon-gem

Rails 的 Cocoon gem 允许动态添加/删除嵌套表单字段。

我们可以`data-association-insertion-node`用来指定需要添加字段的 jQuery 选择器。

我的问题是我在 HTML 表中使用带有 2 级嵌套字段的 Cocoon，对于第二级，目标节点必须是链接的父节点的父节点（无法指定 id，因为父节点也是动态嵌套字段......必须是相对的）。

Cocoon 的文档解释说默认情况下`data-association-insertion-node`接受任何 jQuery 选择器、`this`（链接本身）或链接的父级。但我没有看到任何方法来指定链接的父级的父级......或者我可以通过 jQuery 选择器到达父级，但我从未见过......

# sql - SQL，添加图像字段/颜色字段

> ID：12159668
> 
> 赞同：0
> 
> 时间：2012-08-28T12:53:24.873
> 
> 标签：sql, sql-server, ironspeed

目前我有一个适用的 CASE 声明；

黑色、红色、黄色、绿色

作为基于某些标准的表中各种记录的**文本。**

但是我想知道是否有一种方法可以实际为字段着色（或应用图像）？

快速搜索后，似乎没有太多文档，我不确定从哪里开始。

**编辑**

抱歉，我的 UI 是通过 Iron-Speed 实现的，我是否应该尝试从那里对其进行格式化？

但是，标准是在服务器端指定的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:56:43.460

使用 SQL Server Management Studio 查看数据时，无法执行条件格式设置。

您可以将数据导入 Excel（或类似的）并在那里着色。

# php - wordpress menu_order 不工作

> ID：12159670
> 
> 赞同：2
> 
> 时间：2012-08-28T12:53:26.463
> 
> 标签：php, wordpress

我不知道 menu_order 有什么问题，但帖子没有按我的意愿显示。这就是我的意思

我的博客中有 3 篇文章。这是 db 的样子

```
id ..... menu_order
56 ..... 2
59 ..... 5
65 ..... 3 
```

index.php（我的自定义主题）

我只想显示图像所以这是我使用的代码

```
<?php while ( have_posts() ) : the_post(); 
     $images = get_children(
                            array( 'post_parent'    => $post->ID, 
                                   'post_type'      => 'attachment', 
                                   'post_mime_type' => 'image', 
                                   'orderby'        => 'menu_order', 
                                   'order'          => 'DESC', 
                                   'numberposts' => 999 ) 
                                );
     if( $images ) 
         {
            $total_images = count( $images );
                $image = array_shift( $images );
                echo wp_get_attachment_image($image->ID, 'full', 0, array('id' => 'photo'));
         }

    endwhile; // end of the loop. 
    ?> 
```

问题是帖子按 id 65,59,56 的顺序显示，而不是我预期的 59,65,56

这有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-18T03:33:37.843

使用以下代码。它会解决你的问题

'sort_column' => 'menu_order'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-22T14:12:54.583

似乎这`menu_order`不是你想的那样，例如。您在站点自定义菜单上选择的顺序。相反，它是您在编写每个页面时设置的顺序......这也不是我想要的，所以我提出了这个解决方案：

sort_column=menu_order 仅根据页面的书面顺序而不是您在视图 > 菜单（已翻译）中设置的顺序对页面进行排序，如果您愿意，可以这样做：

```
 $children = get_pages('child_of='. $topID); 

    // 'sort_column=menu_order' <-- only sorts by post order in writing mode (page > edit) not the menu order set in view > menus
    // wp_nav_menu has what we need, let's sort it the same way.
    $options = array(
        'container' =>  '',
        'echo'      =>  false,

    );                      
    $nav = wp_nav_menu($options);       
    $nav = strip_tags($nav);        
    $nav = str_replace("\r", '', $nav);
    $nav = explode("\n", $nav);
    //print_r($nav);
    $newChildren = array();
    foreach ($nav as $item) {
        $item = trim($item);
        $run = true;
        for ($c = 0; $c < count($children) && run; $c++) {              
            $child = $children[$c];
            if (strcmp($child->post_title, $item) == 0 && !in_array($child, $newChildren)) {
                $newChildren[] = $child;                    
                $run = false;
            }
        }

        // Adding the children the nav_menu is lacking, not sure why not all sub-children 
        //  are added to the first child here..(works but don't know why :/)
        if ($run == true) {
            for ($c = 0; $c < count($children) && run; $c++) {              
                $child = $children[$c];     
                if (!in_array($child, $newChildren)) {
                    $newChildren[] = $child;
                }
            }           
        }
    }
    $children = $newChildren; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T12:57:34.447

我会改用`get_posts()`相同的参数。见[这里](http://codex.wordpress.org/Function_Reference/get_posts)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-25T15:24:40.347

当您填充菜单时，添加`sort_column=menu_order`：

```
 <ul class="main-nav">

    <?php wp_list_pages('&title_li=&depth=2&sort_column=menu_order'); ?>

 </ul> 
```

# iphone - 如何将空值分配给 NSData 而不是 NULL 值？

> ID：12159673
> 
> 赞同：5
> 
> 时间：2012-08-28T12:53:31.353
> 
> 标签：iphone, objective-c, ios, nsdata

如何将空值分配给 NSData 而不是 NULL 值？

我不想分配 null 或 nil。我想要空值，不像下面的代码。

```
NSData* variable = NULL; // not even assigning to nil
NSData* variable = nil; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-28T12:55:01.413

```
NSData *variable = [[NSData alloc] init];
// don't forget to release if not using ARC. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T13:06:15.297

```
NSData *data = [[NSData alloc] init]; 
```

# exception-handling - 处理多个 web.xml 中的定义

> ID：12159677
> 
> 赞同：3
> 
> 时间：2012-08-28T12:53:48.973
> 
> 标签：exception-handling, error-handling, struts, web.xml

在我的 web.xml 上，我有这个：

```
 <error-page>  
       <exception-type>java.lang.Throwable</exception-type>  
       <location>/error.do</location>   
 </error-page>  
 <error-page>  
       <exception-type>org.apache.struts.chain.commands.UnauthorizedActionException</exception-type>  
       <location>/unauthorized.do</location>  
  </error-page> 
```

问题是：当我有一个 UnauthorizedActionException 时，被调用的动作是“error.do”（Throwable 动作）。如果我评论 Throwable，当我有 UnauthorizedActionException 时，动作是好的，但是当我放置 throwable 时，它​​会发生错误的动作。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:18:01.560

`UnauthorizedActionException`继承自，`java.lang.Throwable`因此由您的第一个错误页面定义处理它是有效的。

尝试将定义重新排序为...

```
 <error-page>  
       <exception-type>org.apache.struts.chain.commands.UnauthorizedActionException</exception-type>  
       <location>/unauthorized.do</location>  
  </error-page> 
 <error-page>  
       <exception-type>java.lang.Throwable</exception-type>  
       <location>/error.do</location>   
 </error-page> 
```

**[编辑]**关注您的评论

然后我建议从你的 web.xml 中删除这些条目，并[在你的 struts-config.xml 中配置你的异常处理程序](http://struts.apache.org/2.2.3/docs/exception-configuration.html)。您可能会在全局范围内定义异常处理程序。像这样的东西...

```
<global-results>
    <result name="login" type="redirect">/Login.action</result>
    <result name="Exception">/Exception.jsp</result>
    <result name="UnauthorizedActionException">/UnauthorizedActionException.jsp</result>
</global-results>

<global-exception-mappings>
    <exception-mapping exception="org.apache.struts.chain.commands.UnauthorizedActionException" result="UnauthorizedActionException"/>
    <exception-mapping exception="java.lang.Exception" result="Exception"/>
</global-exception-mappings> 
```

# svn - 詹金斯 + SVN + PKCS12 + HTTPS

> ID：12159680
> 
> 赞同：1
> 
> 时间：2012-08-28T12:53:54.163
> 
> 标签：svn, https, hudson, jenkins, pkcs#12

SVN + PKCS12 + HTTPS 的使用有问题。当我想将 SVN 存储库添加到 Jenkins 模板时，出现错误。SVN 客户端似乎不支持这种身份验证方式。首先，我使用 Jenkins 1.467 在 Debian 工作站上检查这是否可行，并且确实可行。我为此使用了相同的证书。其次，我在我的服务器上尝试了相同版本和其他版本的 Jenkins，但没有任何结果。现在的问题是：我是 Jenkins 中的一个错误，还是我完全做错了什么？

```
Environment:
Ubuntu 12.04 Server
Jenkins 1.478 
```

堆栈跟踪：

```
Aug 28, 2012 2:35:19 PM hudson.scm.SubversionSCM$DescriptorImpl doCheckRemote
INFO: Failed to access subversion repository https://<xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx>/trunk
org.tmatesoft.svn.core.SVNCancelException: svn: E200015: OPTIONS /xxxxxxxxxxxxxxxxxxxx/trunk failed
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:300)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:289)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:277)
        at org.tmatesoft.svn.core.internal.io.dav.DAVConnection.performHttpRequest(DAVConnection.java:696)
        at org.tmatesoft.svn.core.internal.io.dav.DAVConnection.exchangeCapabilities(DAVConnection.java:619)
        at org.tmatesoft.svn.core.internal.io.dav.DAVConnection.open(DAVConnection.java:103)
        at org.tmatesoft.svn.core.internal.io.dav.DAVRepository.openConnection(DAVRepository.java:1018)
        at org.tmatesoft.svn.core.internal.io.dav.DAVRepository.testConnection(DAVRepository.java:99)
        at hudson.scm.SubversionSCM$DescriptorImpl.checkRepositoryPath(SubversionSCM.java:2067)
        at hudson.scm.SubversionSCM$DescriptorImpl.doCheckRemote(SubversionSCM.java:2001)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.kohsuke.stapler.Function$InstanceFunction.invoke(Function.java:288)
        at org.kohsuke.stapler.Function.bindAndInvoke(Function.java:151)
        at org.kohsuke.stapler.Function.bindAndInvokeAndServeResponse(Function.java:90)
        at org.kohsuke.stapler.MetaClass$1.doDispatch(MetaClass.java:111)
        at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)
        at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:574)
        at org.kohsuke.stapler.Stapler.invoke(Stapler.java:659)
        at org.kohsuke.stapler.MetaClass$6.doDispatch(MetaClass.java:241)
        at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)
        at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:574)
        at org.kohsuke.stapler.Stapler.invoke(Stapler.java:659)
        at org.kohsuke.stapler.MetaClass$6.doDispatch(MetaClass.java:241)
        at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)
        at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:574)
        at org.kohsuke.stapler.Stapler.invoke(Stapler.java:659)
        at org.kohsuke.stapler.Stapler.invoke(Stapler.java:488)
        at org.kohsuke.stapler.Stapler.service(Stapler.java:162)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:45)
        at winstone.ServletConfiguration.execute(ServletConfiguration.java:248)
        at winstone.RequestDispatcher.forward(RequestDispatcher.java:333)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:376)
        at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:95)
        at hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:87)
        at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
        at hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:47)
        at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)
        at hudson.security.UnwrapSecurityExceptionFilter.doFilter(UnwrapSecurityExceptionFilter.java:51)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:166)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.providers.anonymous.AnonymousProcessingFilter.doFilter(AnonymousProcessingFilter.java:125)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.rememberme.RememberMeProcessingFilter.doFilter(RememberMeProcessingFilter.java:142)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.AbstractProcessingFilter.doFilter(AbstractProcessingFilter.java:271)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.basicauth.BasicProcessingFilter.doFilter(BasicProcessingFilter.java:173)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at jenkins.security.ApiTokenFilter.doFilter(ApiTokenFilter.java:63)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.context.HttpSessionContextIntegrationFilter.doFilter(HttpSessionContextIntegrationFilter.java:249)
        at hudson.security.HttpSessionContextIntegrationFilter2.doFilter(HttpSessionContextIntegrationFilter2.java:66)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)
        at hudson.security.HudsonFilter.doFilter(HudsonFilter.java:164)
        at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
        at org.kohsuke.stapler.compression.CompressionFilter.doFilter(CompressionFilter.java:50)
        at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
        at hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)
        at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
        at winstone.RequestDispatcher.forward(RequestDispatcher.java:331)
        at winstone.RequestHandlerThread.processRequest(RequestHandlerThread.java:215)
        at winstone.RequestHandlerThread.run(RequestHandlerThread.java:138)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at winstone.BoundedExecutorService$1.run(BoundedExecutorService.java:77)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:679)
Caused by: org.tmatesoft.svn.core.SVNCancelException: svn: E200015: No credential to try. Authentication failed
        at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.cancel(SVNErrorManager.java:37)
        at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.cancel(SVNErrorManager.java:32)
        at org.tmatesoft.svn.core.internal.wc.DefaultSVNAuthenticationManager.getFirstAuthentication(DefaultSVNAuthenticationManager.java:185)
        at hudson.scm.FilterSVNAuthenticationManager.getFirstAuthentication(FilterSVNAuthenticationManager.java:35)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPSSLKeyManager.initialize(HTTPSSLKeyManager.java:423)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPSSLKeyManager.initializeNoException(HTTPSSLKeyManager.java:406)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPSSLKeyManager.chooseClientAlias(HTTPSSLKeyManager.java:302)
        at sun.security.ssl.AbstractWrapper.chooseClientAlias(SSLContextImpl.java:282)
        at sun.security.ssl.ClientHandshaker.serverHelloDone(ClientHandshaker.java:629)
        at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:228)
        at sun.security.ssl.Handshaker.processLoop(Handshaker.java:609)
        at sun.security.ssl.Handshaker.process_record(Handshaker.java:545)
        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:945)
        at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1190)
        at sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:657)
        at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:108)
        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.sendData(HTTPConnection.java:238)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPRequest.dispatch(HTTPRequest.java:168)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection._request(HTTPConnection.java:385)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:298)
        ... 79 more
Caused by: svn: E200015: No credential to try. Authentication failed
        at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:208)
        at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:154)
        at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:97)
        ... 101 more
Aug 28, 2012 2:35:19 PM hudson.scm.SubversionSCM$DescriptorImpl doCheckRevisionPropertiesSupported
INFO: Failed to access subversion repository https://<subxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx>/trunk
org.tmatesoft.svn.core.SVNCancelException: svn: E200015: OPTIONS /sxxxxxxxxxxxxxxxxxxxxxxxxxxx/trunk failed
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:300)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:289)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:277)
        at org.tmatesoft.svn.core.internal.io.dav.DAVConnection.performHttpRequest(DAVConnection.java:696)
        at org.tmatesoft.svn.core.internal.io.dav.DAVConnection.exchangeCapabilities(DAVConnection.java:619)
        at org.tmatesoft.svn.core.internal.io.dav.DAVConnection.open(DAVConnection.java:103)
        at org.tmatesoft.svn.core.internal.io.dav.DAVRepository.openConnection(DAVRepository.java:1018)
        at org.tmatesoft.svn.core.internal.io.dav.DAVRepository.testConnection(DAVRepository.java:99)
        at hudson.scm.SubversionSCM$DescriptorImpl.checkRepositoryPath(SubversionSCM.java:2067)
        at hudson.scm.SubversionSCM$DescriptorImpl.doCheckRevisionPropertiesSupported(SubversionSCM.java:2202)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.kohsuke.stapler.Function$InstanceFunction.invoke(Function.java:288)
        at org.kohsuke.stapler.Function.bindAndInvoke(Function.java:151)
        at org.kohsuke.stapler.Function.bindAndInvokeAndServeResponse(Function.java:90)
        at org.kohsuke.stapler.MetaClass$1.doDispatch(MetaClass.java:111)
        at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)
        at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:574)
        at org.kohsuke.stapler.Stapler.invoke(Stapler.java:659)
        at org.kohsuke.stapler.MetaClass$6.doDispatch(MetaClass.java:241)
        at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)
        at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:574)
        at org.kohsuke.stapler.Stapler.invoke(Stapler.java:659)
        at org.kohsuke.stapler.MetaClass$6.doDispatch(MetaClass.java:241)
        at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)
        at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:574)
        at org.kohsuke.stapler.Stapler.invoke(Stapler.java:659)
        at org.kohsuke.stapler.Stapler.invoke(Stapler.java:488)
        at org.kohsuke.stapler.Stapler.service(Stapler.java:162)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:45)
        at winstone.ServletConfiguration.execute(ServletConfiguration.java:248)
        at winstone.RequestDispatcher.forward(RequestDispatcher.java:333)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:376)
        at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:95)
        at hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:87)
        at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
        at hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:47)
        at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)
        at hudson.security.UnwrapSecurityExceptionFilter.doFilter(UnwrapSecurityExceptionFilter.java:51)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:166)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.providers.anonymous.AnonymousProcessingFilter.doFilter(AnonymousProcessingFilter.java:125)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.rememberme.RememberMeProcessingFilter.doFilter(RememberMeProcessingFilter.java:142)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.AbstractProcessingFilter.doFilter(AbstractProcessingFilter.java:271)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.basicauth.BasicProcessingFilter.doFilter(BasicProcessingFilter.java:173)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at jenkins.security.ApiTokenFilter.doFilter(ApiTokenFilter.java:63)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.context.HttpSessionContextIntegrationFilter.doFilter(HttpSessionContextIntegrationFilter.java:249)
        at hudson.security.HttpSessionContextIntegrationFilter2.doFilter(HttpSessionContextIntegrationFilter2.java:66)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)
        at hudson.security.HudsonFilter.doFilter(HudsonFilter.java:164)
        at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
        at org.kohsuke.stapler.compression.CompressionFilter.doFilter(CompressionFilter.java:50)
        at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
        at hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)
        at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
        at winstone.RequestDispatcher.forward(RequestDispatcher.java:331)
        at winstone.RequestHandlerThread.processRequest(RequestHandlerThread.java:215)
        at winstone.RequestHandlerThread.run(RequestHandlerThread.java:138)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at winstone.BoundedExecutorService$1.run(BoundedExecutorService.java:77)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:679)
Caused by: org.tmatesoft.svn.core.SVNCancelException: svn: E200015: No credential to try. Authentication failed
        at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.cancel(SVNErrorManager.java:37)
        at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.cancel(SVNErrorManager.java:32)
        at org.tmatesoft.svn.core.internal.wc.DefaultSVNAuthenticationManager.getFirstAuthentication(DefaultSVNAuthenticationManager.java:185)
        at hudson.scm.FilterSVNAuthenticationManager.getFirstAuthentication(FilterSVNAuthenticationManager.java:35)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPSSLKeyManager.initialize(HTTPSSLKeyManager.java:423)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPSSLKeyManager.initializeNoException(HTTPSSLKeyManager.java:406)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPSSLKeyManager.chooseClientAlias(HTTPSSLKeyManager.java:302)
        at sun.security.ssl.AbstractWrapper.chooseClientAlias(SSLContextImpl.java:282)
        at sun.security.ssl.ClientHandshaker.serverHelloDone(ClientHandshaker.java:629)
        at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:228)
        at sun.security.ssl.Handshaker.processLoop(Handshaker.java:609)
        at sun.security.ssl.Handshaker.process_record(Handshaker.java:545)
        at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:945)
        at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1190)
        at sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:657)
        at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:108)
        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82)
        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:140)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.sendData(HTTPConnection.java:238)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPRequest.dispatch(HTTPRequest.java:168)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection._request(HTTPConnection.java:385)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:298)
        ... 79 more
Caused by: svn: E200015: No credential to try. Authentication failed
        at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:208)
        at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:154)
        at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:97)
        ... 101 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:02:03.393

我解决了问题...

在我的 Ubuntu 12.04 发行版中，Jenkins 默认使用 OpenJDK。现在我安装了 Oracle Java（此处为手册：http: [//www.devsniper.com/ubuntu-12-04-install-sun-jdk-6-7/](http://www.devsniper.com/ubuntu-12-04-install-sun-jdk-6-7/)）。使用自签名证书时，这里有一本手册可以帮助您克服在 Java 密钥库中添加 SSC 的困难：[http ://www.erikzaadi.com/2011/09/09/connecting-jenkins-to-self -签名认证服务器/](http://www.erikzaadi.com/2011/09/09/connecting-jenkins-to-self-signed-certificated-servers/)

我希望对其他人有所帮助！

# linq - Linq：EntityCollection.Contains() 不起作用的地方

> ID：12159682
> 
> 赞同：1
> 
> 时间：2012-08-28T12:54:00.923
> 
> 标签：linq, c#-4.0

我对 LINQ 有一点问题

我有一个“资源”的 EntityCollection 每个“资源”都有一个“应用程序”的 EntityCollection

我现在需要为特定的“应用程序”找到“资源”

我首先找到给定的应用程序：

```
Application application = (from app in db.ApplicationSet
                           where app.Id == appId
                           select app).First(); 
```

这给了我“应用程序”

然后我尝试找到这个“应用程序”的应用程序：

```
var res = from rs in db.ResourceSet
          where rs.Applications.Contains(application)
          select rs; 
```

这在 VS 中被接受，但是当我运行它调试时，“结果视图”返回一个

"System.SystemException = {"无法创建类型为“Application_Configuration_Management.Models.Application”的常量值。此上下文仅支持原始类型（'例如 Int32、String 和 Guid'）。"}"

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:57:29.433

您的 LINQ2SQL 或 EF 提供程序抱怨它无法翻译`application`在列表上下文中使用的查询`IN`。在您的情况下，将搜索应用程序然后搜索其资源之一替换为按应用程序 ID 搜索资源可能会更好：

```
var res = from rs in db.ResourceSet
    where rs.Applications.Any(a => a.Id == appId)
    select rs; 
```

# python - django1.4，在哪里创建app比较好

> ID：12159690
> 
> 赞同：0
> 
> 时间：2012-08-28T12:54:22.197
> 
> 标签：python, django

> **可能重复：**
> [我应该在哪里创建 django 1.4 中的 django 应用程序？](https://stackoverflow.com/questions/10888388/where-should-i-create-django-apps-in-django-1-4)

在 Django 版本`1.4`中，结构发生了变化，`manage.py`进入了顶层。使用django网站中的教程，项目名称为mysite，结构如下：

```
mysite/
manage.py
mysite/
    __init__.py
    settings.py
    urls.py
    wsgi.py 
```

我想创建一个应用程序。在教程中，它将应用程序放在 manage.py 旁边，因此该应用程序也在顶层，就像这样：

```
mysite/
manage.py
mysite/
    __init__.py
    settings.py
    urls.py
    wsgi.py
polls/
    __init__.py
    models.py
    tests.py
    views.py 
```

所以：

1.  如果我在第二级创建应用程序（就在 settings.py 旁边），有什么不同？

2.  如果我在顶层创建应用程序，并且有一些静态文件，`mysite`那么`polls`所有都应该使用，那么将`static/`目录放在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:57:47.753

Django 改变了项目布局以结束可怕的`myproject.myapp.something`导入时代。当您将这些类型的导入分散在您的代码库中时，您将无法移动任何东西或在另一个项目中重新使用该应用程序。新的布局（与项目处于同一级别的应用程序）使导入是应用程序相关的，而不是项目相关的，大大简化了事情。

唯一应该放在代码根目录中的是您的应用程序目录、项目目录和 manage.py。项目范围内的任何内容（设置、模板、静态文件等）都应该放在项目目录中。

也就是说，`STATIC_ROOT`应该指向`myproject/static`，但您不应手动创建该目录，也不应手动将任何内容放入其中。绑定到特定应用程序的静态文件应该放在该应用程序的`static`目录中。任何项目范围的静态文件都应该放在一个完全不同的目录中（与`STATIC_ROOT`or不同`MEDIA_ROOT`）。然后将该目录添加到 中`STATICFILES_DIRS`，因此 Django 将在开发和运行`collectstatic`管理命令时将其包含在内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T12:57:25.867

您可以使用模板来启动项目，如下所示：

```
https://github.com/goinnn/django-base-template 
```

在这些模板中，应用程序的位置已经定义

# javascript - 有了字段的名称，如何使用空白数据初始化对象的未定义字段？

> ID：12159691
> 
> 赞同：0
> 
> 时间：2012-08-28T12:54:22.047
> 
> 标签：javascript, initialization, undefined, field

在 Javascript 中，我有一个字符串数组，代表对象字段的所有可能名称。

```
var fields = ["name", "age", "address"]; 
```

服务器的响应是一个对象数组，可能包含也可能不包含 fields 中的所有**字段**。

```
var response = [
  {"name" : "Tom"}, {"name" : "Jenny", "age" : 25}, ...
]; 
```

我需要用空字符串或其他内容填充所有缺少的字段，以便不再有未定义的字段（我不能在服务器上执行此操作）。

到目前为止我有这个

```
jQuery(fields).each(function(fieldKey, field){

  jQuery(response).each(function(resultKey, result){

    if (result[field] == undefined) result[field] = "";

  });

}); 
```

**有没有更好更有效的方法？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:17:38.137

用于`typeof`检查变量是否存在。

```
jQuery(fields).each(function(fieldKey, field){
  //fieldKey: index (number); field: array item (string)

  jQuery(response).each(function(resultKey, result){
    //resultKey: index (number); result: array item (object)

    if (typeof result[field] == 'undefined') result[field] = "";

  });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:19:28.480

无需使用 jQuery。以下代码假定存在响应对象。

```
var fields = ["name", "age", "address"],
    i, j;

// for each response object, check the fields
for (i = 0; i < response.length; i++) {
    // for each field look if it is present in current response object
    for (j = 0; j < fields.length; j++) {
        // if not present, create with empty string
        if (typeof response[i][fields[j]] === 'undefined') {
            response[i][fields[j]] = '';
        }
    }
} 
```

# javascript - 提交评论不适用于新添加的帖子

> ID：12159697
> 
> 赞同：4
> 
> 时间：2012-08-28T12:54:33.227
> 
> 标签：javascript, jquery, html

我有帖子添加功能，可以添加帖子并且您可以评论帖子，问题是评论在现有帖子上工作正常，但是当您添加新帖子并评论新添加的帖子时，它不起作用。这是我有的[http://jsfiddle.net/testtracker/Nh2NQ/](http://jsfiddle.net/testtracker/Nh2NQ/)
首先检查评论在现有帖子上是否正常，然后添加帖子，现在尝试评论新添加的帖子..它不起作用.. .这里有什么问题。请帮忙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:59:12.887

试试这个：http: [//jsfiddle.net/Nh2NQ/5/](http://jsfiddle.net/Nh2NQ/5/)

我改变了这条线

```
$('.comment_entry form').submit(function (e) {

}); 
```

进入

```
$('body').on('submit', '.comment_entry form', function (e) {
    ...
}); 
```

因此，使用事件委托，您还可以将提交处理程序附加到动态插入的`form`元素。随意更改`body`与您的元素分层“更接近”的其他一些常见父级

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T12:59:39.470

这只会向在评估选择器时找到的元素添加一个侦听器：

```
$('.comment_entry form').submit( ... 
```

此时您的新表单不存在，因此没有注册任何侦听器。

改为使用实时委托：

```
$('#posts').on('submit', '.comment_entry form', function(e) { ... }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-24T18:51:43.947

JQuery 在页面加载时将事件绑定到元素，这就是为什么在新添加的元素上没有触发事件时，因为没有事件绑定到它们。

这肯定会在任何情况下工作

```
$('#posts').on('submit', '.comment_entry form', function(e) {
         code to add comment.....
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T12:58:36.027

这是因为 jQuery 在您的元素存在之前初始化了提交事件。当您添加 new`.comment_entry form`时，jQuery 不知道它，并且 submit 事件未绑定到此特定元素。

[此链接可能对您有所帮助](https://stackoverflow.com/questions/203198/jquery-event-binding-on-dynamically-created-elements)。

# c# - 只读静态字段初始化的线程安全

> ID：12159698
> 
> 赞同：24
> 
> 时间：2012-08-28T12:54:34.833
> 
> 标签：c#, multithreading, thread-safety

如果一个人像这样创建一个只读静态成员：

```
public sealed class MyClass
{
    public readonly static MyClass Instance = new MyClass();
} 
```

我们知道，如果某个线程第一次访问 MyClass，静态构造函数将初始化 MyClass.Instance 字段。但是，如果多个线程都同时访问 MyClass（即静态字段的初始化是否线程安全），是否会创建单个实例（在本例中为 MyClass）？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-28T13:04:04.210

.NET CLR 确保静态初始化始终是线程安全的。不管有多少线程在访问它，以什么顺序访问它，它总是会被初始化一次。

您的代码似乎显示出单例模式开始的迹象。
基本上，如果您想在初始化类之前运行自定义代码，那么您需要自己确保线程安全。
[这是一个](http://csharpindepth.com/Articles/General/Singleton.aspx)您需要使自定义代码线程安全的示例。但是静态初始化部分始终是线程安全的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-28T12:56:58.910

C#语言规范保证类初始化是线程安全的，因此只会`MyClass`创建一个实例。从那时起，您必须自己确保线程安全。这是一个 MSDN 参考：

[http://msdn.microsoft.com/en-us/library/aa645612.aspx](http://msdn.microsoft.com/en-us/library/aa645612.aspx)

# android - metaio sdk (openGL) 刹车字体和图像渲染

> ID：12159699
> 
> 赞同：4
> 
> 时间：2012-08-28T12:54:38.110
> 
> 标签：android, text, fonts, render, augmented-reality

我有 2 个活动，活动 A 显示了很多信息（文本视图和图像），活动 B 从活动 A 开始，活动 B 是[Hello Augmented World](http://docs.metaio.com/bin/view/Main/HelloAugmentedWorldExample)教程活动，我使用 metaio 的增强现实引擎。关闭活动B并恢复活动A时出现问题，大部分字体（字符）呈现为块并且图像全为黑色。这只发生在杀死活动 B 后恢复活动 A 时。我发现了一个类似[的帖子](http://forum.unity3d.com/threads/117173-Font-rendering-problem-on-Android-only-GUI.Label%28%29)，但它对我一点帮助都没有。我无法弄清楚问题是什么，以及从哪里开始调试。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:08:49.247

我发现了问题所在，增强现实活动`setTexture`从错误的线程 () 调用了一个方法 () `not OpenGL thread`，这导致渲染管道崩溃。

# c# - 以单声道发出 KeyPress

> ID：12159700
> 
> 赞同：0
> 
> 时间：2012-08-28T12:54:39.670
> 
> 标签：c#, mono, gtk, sendkeys

问题：点击`button1`发送`"a"`键到主窗口。我该怎么做？（请举例）

```
using System;  
using Gtk;  
namespace pressevent
{   
class MainClass 
{       
   public static void Main(string[] args)       
   {
            Application.Init();
            MainWindow win = new MainWindow();
            win.KeyPressEvent += delegate(object o, KeyPressEventArgs a) {
                if(a.Event.Key == Gdk.Key.a)
                    Console.WriteLine("Key pressed");
                else
                    Console.WriteLine("Key not pressed");
            }; 
            Button btn1 = win.getButton1();
            btn1.Pressed += (sender, e) => 
            { 
                Console.WriteLine("Button1 pressed"); 
                                // Here code that send "a" key to MainWindow
            };
            win.Show(); Application.Run(); 
}}} 
```

谢谢。PS：对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:43:47.887

你的设计是错误的。如果`Button1`按下它，它必须调用一个`MainWindow`有一个参数的方法：`"a"`你的问题。

在主窗口中，事件 click 调用相同的方法。

一般来说，不要把逻辑放在你的处理程序中。它们只是包含逻辑的方法的入口点或调度程序。

```
Application.Init();

MainWindow win = new MainWindow();
win.KeyPressEvent += (sender, e) =>
{
    win.MethodWithLogic(e.Event.Key);
}; 

Button btn1 = win.getButton1();
btn1.Pressed += (sender, e) => 
{ 
    Console.WriteLine("Button1 pressed"); 
    win.MethodWithLogic(Gdk.Key.a);
};

win.Show(); 
Application.Run(); 
```

此外，在 MainWindow 类中（或通过继承，创建自己的）

```
public void MethodWithLogic(Gdk.Key key)
{
  if(key == Gdk.Key.a)
      Console.WriteLine("Key pressed");
  else
      Console.WriteLine("Key not pressed");
} 
```

（未经测试，但你明白了）

# php - 如何使用 codeigniter 修复 ckeditor

> ID：12159701
> 
> 赞同：2
> 
> 时间：2012-08-28T12:54:42.860
> 
> 标签：php, ckeditor

我希望在我的网站中添加 ck 编辑器，我想从后端插入数据。我认为 ck 编辑器最适合这个。我搜索了很多关于这个但未能实现。**请让我知道如何在 codeigniter 中执行此操作。**

**我对使用它感到非常困惑。有人说它会实现`<textfield>` ，有些人正在使用助手和控制器。请指导我实现这一点。一步一步的回答将不胜感激。**

我在我看来尝试了这段代码：

```
<?php

include_once  (BASEPATH.'ckeditor/ckeditor.php');

$ckeditor = new CKEditor();
$ckeditor->basePath = '/ckeditor/';
$ckeditor->config['filebrowserBrowseUrl'] = '/ckfinder/ckfinder.html';
$ckeditor->config['filebrowserImageBrowseUrl'] = '/ckfinder/ckfinder.html?type=Images';
$ckeditor->config['filebrowserFlashBrowseUrl'] = '/ckfinder/ckfinder.html?type=Flash';
$ckeditor->config['filebrowserUploadUrl'] = '/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Files';
$ckeditor->config['filebrowserImageUploadUrl'] = '/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Images';
$ckeditor->config['filebrowserFlashUploadUrl'] = '/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Flash';
$ckeditor->editor('CKEditor1');

?> 
```

并包括 js ：

```
<script type="text/javascript" src="<?php echo base_url(); ?>assets/admin/ckeditor/ckeditor.js"></script> 
```

但是这个加载js的url失败了。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:30:39.050

要在 codeignitor 中安装 ck 编辑器，您只需按照以下步骤操作：- 1.将 ck 编辑器文件夹放入 assets（或您想要的位置）中。并给出 js 文件的正确路径。2.现在在您的视图部分中只包含这样的js文件：

```
<script type="text/javascript" src="<?php echo base_url(); ?>assets/admin/ckeditor/ckeditor.js"></script> 
```

3.现在在同一个文件上放这个代码：-

```
<textarea class="ckeditor" name="editor1"></textarea> 
```

4.现在您可以在浏览器上看到编辑器了。

# javascript - 信号量、run_once 装饰器或类似的东西

> ID：12159705
> 
> 赞同：1
> 
> 时间：2012-08-28T12:54:59.060
> 
> 标签：javascript, jquery

在某些地方，我们必须只运行一个函数实例。

这段代码对我有用：

```
function example() { 
    var that = this; 
    if(that.running) { 
       return false; 
    }
    that.running = true; 
    $.get(url, {}, function (data) {
         that.running = false; 
    }); 
} 
```

我们如何改进它，使其更可重用？

**UPD**这是基于 Frits van Campen 回答的解决方案：

```
function make_run_once(callback) {
    callback.running = false;
    return function () {
        if(callback.running) {
            return false;
        }
        callback.running = true;
        deferred = $.Deferred();
        deferred.done(function () {
            callback.running = false;
        });
        callback(deferred);  // pass deferred to callback so it can resolve at it's own leisure
    };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:49:32.397

您可能希望为此使用[jQuery 的 `Deferred' 功能](http://api.jquery.com/category/deferred-object/)：

```
function decorate(fn) {
    var deferred;
    return function(){
        if (!deferred) {
            deferred = new jQuery.Deferred;
            fn(deferred.resolve); // pass in the callback
        }
        return deferred;
    };
} 
```

装饰函数将始终返回相同的 Deferred 对象，该对象将通过原始函数的回调解决 - 在第一次调用时开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:00:59.710

像这样的东西？

```
function make_run_once(callback) {
    var deferred = false;
    return function () {
        if (false === deferred) {
            return;
        } else {
            deferred = $.Deferred();
            deferred.done(function () {
                deferred = false;
            });
            callback(deferred);  // pass deferred to callback so it can resolve at it's own leisure
        }
    };
}

var once = make_run_once(function (deferred) {
    // do stuff, possible ajax stuff
    setTimeout(function () {
        deferred.resolve();  // resolve at some point so it become unblocked again
    }, 100);
});
once(); // run
once(); // block
once(); // block
once(); // block
setTimeout(once, 500);  // run 
```

那些“替换”其他请求的请求呢，你有吗？就像自动完成功能一样。您需要对其进行修改才能使其正常工作。与其忽略新请求，不如保留最新请求并在最后一个请求完成时触发它。

# magento - 简单产品比可配置产品有什么优势吗

> ID：12159707
> 
> 赞同：1
> 
> 时间：2012-08-28T12:55:04.230
> 
> 标签：magento

我需要为客户将许多产品导入 Magento。

我不确定将类型设置为简单或可配置。在当前状态下，所有产品都是简单的。但我预计客户将需要一些产品成为“可配置”。

因此，我计划将所有产品导入为可配置的。我的问题是，只使用可配置产品有什么缺点？Simple 产品有什么优势吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:17:37.900

如果您有不同的颜色或尺寸（或其他可配置选项），您需要为每种组合（小/红、中/红、小/黑、中/黑等）创建简单的产品，您可以在可配置的产品屏幕，关联的产品选项卡。如果你的产品没有任何选择，它应该只是一个简单的产品。

作为参考，这里有一个详细说明每种产品类型用途的页面：http: [//www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/catalog_product/producttype](http://www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/catalog_product/producttype)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:39:38.370

我还建议将 Magmi 用于大型 Magento 导入。[http://sourceforge.net/projects/magmi/](http://sourceforge.net/projects/magmi/) 你甚至可以让它自动创建你的可配置产品，它比 magentos 标准导入快得多。就像在几秒钟而不是几小时内完成 1000 种产品一样。

我公司有SKU101LG、SKU101MD、SKU101XL（均为简单产品）

因此，SKU101 是我的可配置产品，上面的 sku 是它的“子代”，或者 magento 根据它们的尺寸属性将它们称为“关联产品”。（您必须在 CATALOG > ATTRIBUTES 下创建大小或颜色等属性）

Ipad 是一个简单的产品。带有颜色选项的 Ipad 是可配置的，并且有两个 OTHER skus（每种颜色的简单 skus）与之关联。

# ios - 将我的信息与分享工具包分享到 twitter

> ID：12159708
> 
> 赞同：0
> 
> 时间：2012-08-28T12:55:11.773
> 
> 标签：ios, twitter, sharekit

我在我的项目中导入了sharekit库并编写了以下代码

```
SHKItem *item = [SHKItem text:@"sample message"];
SHKTwitter* twt = [[SHKTwitter alloc] init];
[twt setItem:item];
[twt share]; 
```

或者

```
SHKItem *item = [SHKItem text:@"sample message"];
[SHKTwitter shareItem:item]; 
```

如您所知，出现第一个身份验证窗口。当我输入我的用户名和密码时，我想分享文本。但它重定向了我的重定向网址并且窗口不会自动关闭

# cuda - cuda——内存不足（线程和块问题）——地址越界

> ID：12159709
> 
> 赞同：0
> 
> 时间：2012-08-28T12:55:16.363
> 
> 标签：cuda, pycuda

我正在使用 63 个寄存器/线程，所以（最多 32768 个）我可以使用大约 520 个线程。在这个例子中我现在使用 512 个线程。

（并行性在全局 computeEHfields 函数函数内的函数“computeEvec”中。）问题是：

1）下面的内存检查错误。

2）当我使用 numPointsRp>2000 时，它显示“内存不足”，但是（如果我没有做错）我计算全局内存并且没关系。

**- - - - - - - - - - - - - - - -更新 - - - - - - - - - ---------**

我用 cuda-memcheck 运行程序，它给了我（仅当 numPointsRs>numPointsRp 时）：

> ========= 大小为 4 的无效**全局**读取
> 
> ========= 在 computeEHfields 中的 0x00000428
> 
> ========= 块 (0,0,0) 中的线程 (2,0,0)
> 
> ========= 地址 0x4001076e0 超出范围
> 
> ========= ========= 大小为 4 的无效**全局**读取
> 
> ========= 在 computeEHfields 中的 0x00000428
> 
> ========= 块 (0,0,0) 中的线程 (1,0,0)
> 
> ========= 地址 0x4001076e0 超出范围
> 
> ========= ========= 大小为 4 的无效**全局**读取
> 
> ========= 在 computeEHfields 中的 0x00000428
> 
> ========= 块 (0,0,0) 中的线程 (0,0,0)
> 
> ========= 地址 0x4001076e0 超出范围
> 
> 错误摘要：160 个错误

**- - - - - -编辑 - - - - - - - - - - - - - -**

此外，有时（如果我只使用线程而不使用块（我没有测试它的块））如果例如我有 numPointsRs=1000 和 numPointsRp=100 然后更改 numPointsRp=200 然后再次更改 numPointsRp= 100 我不接受第一个结果！

```
import pycuda.gpuarray as gpuarray
import pycuda.autoinit
from pycuda.compiler import SourceModule
import numpy as np
import cmath
import pycuda.driver as drv

Rs=np.zeros((numPointsRs,3)).astype(np.float32)
for k in range (numPointsRs): 
    Rs[k]=[0,k,0]

Rp=np.zeros((numPointsRp,3)).astype(np.float32)
for k in range (numPointsRp): 
    Rp[k]=[1+k,0,0]

#---- Initialization and passing(allocate memory and transfer data) to GPU -------------------------
Rs_gpu=gpuarray.to_gpu(Rs)
Rp_gpu=gpuarray.to_gpu(Rp)

J_gpu=gpuarray.to_gpu(np.ones((numPointsRs,3)).astype(np.complex64))
M_gpu=gpuarray.to_gpu(np.ones((numPointsRs,3)).astype(np.complex64))

Evec_gpu=gpuarray.to_gpu(np.zeros((numPointsRp,3)).astype(np.complex64))
Hvec_gpu=gpuarray.to_gpu(np.zeros((numPointsRp,3)).astype(np.complex64))
All_gpu=gpuarray.to_gpu(np.ones(numPointsRp).astype(np.complex64))

mod =SourceModule("""
#include <pycuda-complex.hpp>
#include <cmath>
#include <vector>
#define RowRsSize %(numrs)d
#define RowRpSize %(numrp)d

typedef  pycuda::complex<float> cmplx;
extern "C"{

    __device__ void computeEvec(float Rs_mat[][3], int numPointsRs,   
         cmplx J[][3],
         cmplx M[][3],
         float *Rp,
         cmplx kp, 
         cmplx eta,
         cmplx *Evec,
         cmplx *Hvec, cmplx *All)

{

    while (c<numPointsRs){
        ...         
                c++;

                }     
        }

__global__  void computeEHfields(float *Rs_mat_, int numPointsRs,   
        float *Rp_mat_, int numPointsRp,    
    cmplx *J_,
    cmplx *M_,
    cmplx  kp, 
    cmplx  eta,
    cmplx E[][3],
    cmplx H[][3], cmplx *All )
    {
        float Rs_mat[RowRsSize][3];
        float Rp_mat[RowRpSize][3];

        cmplx J[RowRsSize][3];
        cmplx M[RowRsSize][3];

    int k=threadIdx.x+blockIdx.x*blockDim.x;

      while (k<numPointsRp)  
     {

        computeEvec( Rs_mat, numPointsRs,  J, M, Rp_mat[k], kp, eta, E[k], H[k], All );
        k+=blockDim.x*gridDim.x;

    }

}
}

"""% { "numrs":numPointsRs, "numrp":numPointsRp},no_extern_c=1)

func = mod.get_function("computeEHfields")

func(Rs_gpu,np.int32(numPointsRs),Rp_gpu,np.int32(numPointsRp),J_gpu, M_gpu, np.complex64(kp), np.complex64(eta),Evec_gpu,Hvec_gpu, All_gpu, block=(128,1,1),grid=(200,1))

print(" \n")

#----- get data back from GPU-----
Rs=Rs_gpu.get()
Rp=Rp_gpu.get()
J=J_gpu.get()
M=M_gpu.get()
Evec=Evec_gpu.get()
Hvec=Hvec_gpu.get()
All=All_gpu.get() 
```

--------------------GPU型号---------------------------- --------------------

```
Device 0: "GeForce GTX 560"
  CUDA Driver Version / Runtime Version          4.20 / 4.10
  CUDA Capability Major/Minor version number:    2.1
  Total amount of global memory:                 1024 MBytes (1073283072 bytes)
  ( 0) Multiprocessors x (48) CUDA Cores/MP:     0 CUDA Cores   //CUDA Cores    336 => 7 MP and 48 Cores/MP 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:14:01.190

> 使用 R=1000 然后
> 
> 块=R/2,1,1 和网格=1,1 一切正常
> 
> 如果我尝试 R=10000 并且
> 
> block=R/20,1,1 和 grid=20,1 ，然后它显示“内存不足”

我对 pycuda 不熟悉，也没有深入阅读您的代码。但是你有更多的块和更多的线程，所以它会

*   本地内存（可能是内核的堆栈，它是**按线程**分配的），

*   共享内存（按块分配），或

*   基于`grid`或分配的全局内存`gridDim`。

您可以减少堆栈大小调用

```
cudeDeviceSetLimit(cudaLimitStackSize, N)); 
```

（代码用于 C 运行时 API，但 pycuda 等价物不应该太难找到）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T20:03:47.423

> 当我使用 numPointsRp>2000 时，它显示“内存不足”

现在我们有一些真实的代码可以使用，让我们编译它看看会发生什么。使用`RowRsSize=2000`和`RowRpSize=200`编译 CUDA 4.2 工具链，我得到：

```
nvcc -arch=sm_21 -Xcompiler="-D RowRsSize=2000 -D RowRpSize=200" -Xptxas="-v" -c -I./ kivekset.cu 
ptxas info    : Compiling entry function '_Z15computeEHfieldsPfiS_iPN6pycuda7complexIfEES3_S2_S2_PA3_S2_S5_S3_' for 'sm_21'
ptxas info    : Function properties for _Z15computeEHfieldsPfiS_iPN6pycuda7complexIfEES3_S2_S2_PA3_S2_S5_S3_
    122432 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads
ptxas info    : Used 57 registers, 84 bytes cmem[0], 168 bytes cmem[2], 76 bytes cmem[16] 
```

关键数字是每个线程 57 个寄存器和 122432 字节堆栈帧。占用计算器建议，一个 512 个线程的块每个 SM 最多有 1 个块，而你的 GPU 有 7 个 SM。在您使用 pyCUDA 为输入和输出分配一个字节的内存之前，这总共提供了 122432 * 512 * 7 = 438796288 字节的堆栈帧（本地内存）来运行您的内核。在具有 1Gb 内存的 GPU 上，不难想象内存不足。您的内核具有*巨大的*本地内存占用。开始考虑减少它的方法。

* * *

正如我在评论中指出的那样，绝对不清楚为什么*每个线程都*需要此内核代码中输入数据的完整副本。它会导致巨大的本地内存占用，并且似乎完全没有理由以这种方式编写代码。我怀疑您可以将内核修改为以下内容：

```
typedef  pycuda::complex<float> cmplx;
typedef float fp3[3];
typedef cmplx cp3[3];

__global__  
void computeEHfields2(
        float *Rs_mat_, int numPointsRs,
        float *Rp_mat_, int numPointsRp,
        cmplx *J_,
        cmplx *M_,
        cmplx  kp, 
        cmplx  eta,
        cmplx E[][3],
        cmplx H[][3], 
        cmplx *All )
{

    fp3 * Rs_mat = (fp3 *)Rs_mat_;
    cp3 * J = (cp3 *)J_;
    cp3 * M = (cp3 *)M_;

    int k=threadIdx.x+blockIdx.x*blockDim.x;
    while (k<numPointsRp)  
    {
        fp3 * Rp_mat = (fp3 *)(Rp_mat_+k);
        computeEvec2( Rs_mat, numPointsRs, J, M, *Rp_mat, kp, eta, E[k], H[k], All );
        k+=blockDim.x*gridDim.x;
    }
} 
```

以及它调用的主要 __device__ 函数是这样的：

```
__device__ void computeEvec2(
        fp3 Rs_mat[], int numPointsRs,   
        cp3 J[],
        cp3 M[],
        fp3   Rp,
        cmplx kp, 
        cmplx eta,
        cmplx *Evec,
        cmplx *Hvec, 
        cmplx *All)
{
 ....
} 
```

并消除线程本地内存的*每个字节*，而完全不改变计算代码的功能。

# ruby - 用于验证和解析 "1,a|2,b|3,c" 字符串的 ruby 正则表达式

> ID：12159710
> 
> 赞同：-2
> 
> 时间：2012-08-28T12:55:21.400
> 
> 标签：ruby, regex

我正在搜索一个验证以下字符串格式“1,a|2,b|3,c”的正则表达式。

我也想解析这个字符串并提取出数字和字符。

任何人都可以知道什么是最好的正则表达式。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:57:05.180

试试这个表达式：[http ://regex101.com/r/qI7kW9](http://regex101.com/r/qI7kW9)

`/(\d),([a-z])(?:\||$)/gi`

第一个捕获组将保存数字，第二个将保存字母。如果您要捕获多个角色，请使用以下命令：

`/(\d+),([a-z]+)(?:\||$)/gi`

# android - 如何在同一个项目中启动第二个 Phonegap 活动？

> ID：12159711
> 
> 赞同：0
> 
> 时间：2012-08-28T12:55:27.600
> 
> 标签：android, cordova

在我的 phonegap 项目中，我有两个活动，Mainactivity 和 Secondactivity，我为 Mainactivity 编写了一个插件来使用 Intent 启动 Secondactivity。我总是失败并得到一些错误日志：

```
08-28 12:11:07.298: W/webcore(924): java.lang.Throwable: EventHub.removeMessages(int what = 107) is not supported before the WebViewCore is set up.
08-28 12:11:07.298: W/webcore(924):     at android.webkit.WebViewCore$EventHub.removeMessages(WebViewCore.java:1683)
08-28 12:11:07.298: W/webcore(924):     at android.webkit.WebViewCore$EventHub.access$7900(WebViewCore.java:926)
08-28 12:11:07.298: W/webcore(924):     at android.webkit.WebViewCore.removeMessages(WebViewCore.java:1795)
08-28 12:11:07.298: W/webcore(924):     at android.webkit.WebView.sendOurVisibleRect(WebView.java:2917)
08-28 12:11:07.298: W/webcore(924):     at android.webkit.ZoomManager.setZoomScale(ZoomManager.java:593)
08-28 12:11:07.298: W/webcore(924):     at android.webkit.ZoomManager.access$1700(ZoomManager.java:49)
08-28 12:11:07.298: W/webcore(924):     at android.webkit.ZoomManager$PostScale.run(ZoomManager.java:984)
08-28 12:11:07.298: W/webcore(924):     at android.os.Handler.handleCallback(Handler.java:605)
08-28 12:11:07.298: W/webcore(924):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-28 12:11:07.298: W/webcore(924):     at android.os.Looper.loop(Looper.java:137)
08-28 12:11:07.298: W/webcore(924):     at android.app.ActivityThread.main(ActivityThread.java:4424)
08-28 12:11:07.298: W/webcore(924):     at java.lang.reflect.Method.invokeNative(Native Method)
08-28 12:11:07.298: W/webcore(924):     at java.lang.reflect.Method.invoke(Method.java:511)
08-28 12:11:07.298: W/webcore(924):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-28 12:11:07.298: W/webcore(924):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-28 12:11:07.298: W/webcore(924):     at dalvik.system.NativeStart.main(Native Method)
08-28 12:12:06.738: E/CordovaWebView(924): CordovaWebView: TIMEOUT ERROR! 
```

并得到：

```
CordovaWebViewClient.onReceivedError: Error code=-6 Description=The connection to the server was unsuccessful. URL=file:///android_asset/www//Second.html 
```

如果我使用 codorva 1.8.1 我得到：

```
08-28 15:13:03.020: W/webcore(29758): java.lang.Throwable: EventHub.removeMessages(int what = 107) is not supported before the WebViewCore is set up.
08-28 15:13:22.850: W/webview(29758): java.lang.Throwable: Warning: A WebView method was called on thread 'Thread-7765'. All WebView methods must be called on the UI thread. Future versions of WebView may not support use on other threads. 
```

这是我的 SecondActivity 代码：

```
public class Secondactivity extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.init();
        super.setIntegerProperty("loadUrlTimeoutValue", 60000); 
        super.loadUrl("file:///android_asset/www//Second.html");
    }
} 
```

我的 Mainactivity 还扩展了 DroidGap。

谁能给我一些提示？

===============================================我用startActivityForResult替换了startActivity ，这行得通！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:04:56.423

您必须打开 second.html 的 index.html 文件，并在 index.html 文件中管理第二个活动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:58:32.497

更改此行。

```
 super.loadUrl("file:///android_asset/www/Second.html"); 
```

这里有错误`//Second.html`

# php - PHP - 允许用户设置 Cookie

> ID：12159720
> 
> 赞同：0
> 
> 时间：2012-08-28T12:55:54.713
> 
> 标签：php, cookies

例如，我想允许用户通过文本表单设置变量`$name`，然后我想在他们填写表单后设置一个 cookie，因此 cookie 设置为`$name`.

所以如果在文本表单中，用户设置`$name = 'John';`

然后我希望将 cookie 设置为`setcookie ("name", "John")`;

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:00:47.250

以下代码

```
setcookie('name',$_GET['name']); 
```

应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:16:58.013

```
 $name  = $_REQUEST['name'];  
   if(!isset($_COOKIE['name']))    
   {
    setcookie('name',$name,0);//The cookie will expire at the end of the session 
   } 
```

# c# - Gridview绑定到数据表编辑下拉列表C#

> ID：12159721
> 
> 赞同：2
> 
> 时间：2012-08-28T12:55:55.297
> 
> 标签：c#, gridview, drop-down-menu

我有一个绑定到 DataTable 的 GridView，当您选择编辑时，我可以获得要更改的值。但是，一个字段必须是下拉列表而不是文本框。这是我到目前为止的代码。

```
protected void griditems_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {               
            DataTable dt = (DataTable)Session["table"];
            //Update the values.
            GridViewRow row = griditems.Rows[e.RowIndex];
            dt.Rows[row.DataItemIndex]["Part"] = ((TextBox)(row.Cells[1].Controls[0])).Text.ToUpper();
            dt.Rows[row.DataItemIndex]["Quantity"] = ((TextBox)(row.Cells[2].Controls[0])).Text;
            dt.Rows[row.DataItemIndex]["Ship-To"] = ((TextBox)(row.Cells[3].Controls[0])).Text.ToUpper();
            dt.Rows[row.DataItemIndex]["Requested Date"] = ((TextBox)(row.Cells[4].Controls[0])).Text;
             //dt.Rows[row.DataItemIndex]["Shipping Method"] = ((TextBox)(row.Cells[5].Controls[0])).Text;

            DropDownList cmbType = (DropDownList)griditems.Rows[e.RowIndex].FindControl("Shipping Method");

            griditems.EditIndex = -1;
            BindData();
        }
    } 
```

当我取消注释运输方式为文本框的行时，它就像它所说的那样，是一个文本框，而不是一个下拉列表。我尝试将其更改为 DropDownList ，但没有成功。

在.aspx 文件中：

```
<asp:GridView ID="griditems" runat="server" 
        onrowdeleting="griditems_RowDeleting" onrowediting="griditems_RowEditing"
        onrowupdating="griditems_RowUpdating" AllowPaging="True" onpageindexchanging="griditems_PageIndexChanging" 
        onrowcancelingedit="griditems_RowCancelingEdit" ViewStateMode="Enabled" Caption="Order Details" 
        AutoGenerateDeleteButton="True" AutoGenerateEditButton="True" 
        onrowdatabound="griditems_RowDataBound" >            
        <EditRowStyle BackColor="#FF9900" BorderStyle="Double" /></asp:GridView> 
```

并在生成表时：

```
public void CreateTable()
    {
        DataTable table = new DataTable();
        if (Session["table"] != null) 
            table = (DataTable)Session["table"]; 
        else 
        {
            table.Columns.Add("Part", typeof(string));
            table.Columns.Add("Quantity", typeof(Int32));
            table.Columns.Add("Ship-To", typeof(string));
            table.Columns.Add("Requested Date", typeof(string));
            table.Columns.Add("Shipping Method", typeof(string));
        }

        DataRow row = table.NewRow();
        row["Part"] = part;
        row["Quantity"] = qty;
        row["Ship-To"] = shipto;
        row["Requested Date"] = reqdate;
        row["Shipping Method"] = shipmthd;
        table.Rows.Add(row);

        Session["table"] = table;
        griditems.DataSource = table.DefaultView;
        griditems.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:25:17.513

尝试dis：

**Default.aspx：（** *最佳实践使用 GridView 中的模板字段）*

```
 <asp:GridView ID="gvshipping" runat="server" AutoGenerateColumns="False" 
            onrowcancelingedit="gvshipping_RowCancelingEdit" 
            onrowdatabound="gvshipping_RowDataBound" 
            onrowediting="gvshipping_RowEditing" CellPadding="4" ForeColor="#333333" 
            GridLines="None">
        <AlternatingRowStyle BackColor="White" />
        <Columns>
            <asp:TemplateField HeaderText="Part">
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("part") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" Text='<%# Bind("part") %>' runat="server"></asp:TextBox>
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Quatity">
                <ItemTemplate>
                    <asp:Label ID="lblqty" runat="server"  Text='<%# Bind("quantity") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtqty" runat="server" Text='<%# Bind("quantity") %>'></asp:TextBox>
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Ship to">
                <ItemTemplate>
                    <asp:Label ID="lblshipto" runat="server" Text='<%# Bind("ShipTo") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtshipto" runat="server" Text='<%# Bind("ShipTo") %>'></asp:TextBox>
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Post date">
                <ItemTemplate>
                    <asp:Label ID="lblpostdate"  runat="server" Text='<%# Bind("RequestedDate")%>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtpostdate" Text='<%# Bind("RequestedDate")%>' runat="server"></asp:TextBox>
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Shipping Method">
                <ItemTemplate>
                    <asp:Label ID="lblshipmethod" runat="server" Text='<%# Bind("ShippingMethod")%>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:DropDownList ID="DropDownList1" runat="server">
                    </asp:DropDownList>
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField ShowHeader="False">
                <ItemTemplate>

                    <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" 
                        CommandName="Edit" Text="Edit"></asp:LinkButton>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" 
                        CommandName="Update" Text="Update"></asp:LinkButton>
                    &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                        CommandName="Cancel" Text="Cancel"></asp:LinkButton>
                </EditItemTemplate>
            </asp:TemplateField>
        </Columns>
        <EditRowStyle BackColor="#7C6F57" />
        <FooterStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#666666" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#E3EAEB" />
        <SelectedRowStyle BackColor="#C5BBAF" Font-Bold="True" ForeColor="#333333" />
        <SortedAscendingCellStyle BackColor="#F8FAFA" />
        <SortedAscendingHeaderStyle BackColor="#246B61" />
        <SortedDescendingCellStyle BackColor="#D4DFE1" />
        <SortedDescendingHeaderStyle BackColor="#15524A" />
    </asp:GridView> 
```

**代码背后：**

```
protected void Page_Load(object sender, EventArgs e)
{
   if(!Page.IsPostBack)
   {
      gvBind();
   }
 }

 public void gvBind()
  {
     DataTable dt = createTable();
     Session["tb"] = dt;
     gvshipping.DataSource = Session["tb"];
     gvshipping.DataBind();
  }

  protected void gvshipping_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            if ((e.Row.RowState & DataControlRowState.Edit) > 0)
            {
                DropDownList dpshipmethod = (DropDownList)e.Row.FindControl("DropDownList1");
                //bind dropdownlist
                DataTable dt = shipingmethodTable();
                dpshipmethod.DataSource = dt;
                dpshipmethod.DataTextField = "ShippingMethod";
                dpshipmethod.DataValueField = "Id";
                dpshipmethod.DataBind();
                DataRowView dr = e.Row.DataItem as DataRowView;
                dpshipmethod.SelectedItem.Text = dr["ShippingMethod"].ToString();

            }
        }
    }

 protected void gvshipping_RowEditing(object sender, GridViewEditEventArgs e)
{
      gvshipping.EditIndex = e.NewEditIndex;
      vBind();
 }

 protected void gvshipping_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
 {
   gvshipping.EditIndex = -1;
    gvBind();
 }

    public DataTable createTable()
    {
        DataTable dt = new DataTable();
        dt.Columns.Add("Part", typeof(string));
        dt.Columns.Add("Quantity", typeof(Int32));
        dt.Columns.Add("ShipTo", typeof(string));
        dt.Columns.Add("RequestedDate", typeof(string));
        dt.Columns.Add("ShippingMethod", typeof(string));

        string date= DateTime.Now.ToShortDateString();
        DataRow row = dt.NewRow();
        row["Part"] = "Anchor";
        row["Quantity"] = "10";
        row["ShipTo"] = "blah";
        row["RequestedDate"] = date;
        row["ShippingMethod"] = "Charge by subtotal";
        dt.Rows.Add(row);

        DataRow row1 = dt.NewRow();
        row1["Part"] = "blade";
        row1["Quantity"] = "88";
        row1["ShipTo"] = "blah";
        row1["RequestedDate"] = date;
        row1["ShippingMethod"] = "Charge by quantity";
        dt.Rows.Add(row1);

        DataRow row2 = dt.NewRow();
        row2["Part"] = "cabin";
        row2["Quantity"] = "4";
        row2["ShipTo"] = "blah";
        row2["RequestedDate"] = date;
        row2["ShippingMethod"] = "Charge by subtotal";
        dt.Rows.Add(row2);

        DataRow row3 = dt.NewRow();
        row3["Part"] = "cockpit";
        row3["Quantity"] = "11";
        row3["ShipTo"] = "blah";
        row3["RequestedDate"] = date;
        row3["ShippingMethod"] = "Charge by weight";
        dt.Rows.Add(row3);

        DataRow row4 = dt.NewRow();
        row4["Part"] = "jack";
        row4["Quantity"] = "45";
        row4["ShipTo"] = "blah";
        row4["RequestedDate"] = date;
        row4["ShippingMethod"] = "Charge by weight";
        dt.Rows.Add(row4);

        DataRow row5 = dt.NewRow();
        row5["Part"] = "cabin";
        row5["Quantity"] = "67";
        row5["ShipTo"] = "blah";
        row5["RequestedDate"] = date;
        row5["ShippingMethod"] = "Charge by weight";
        dt.Rows.Add(row5);

        DataRow row6 = dt.NewRow();
        row6["Part"] = "blade";
        row6["Quantity"] = "4";
        row6["ShipTo"] = "blah";
        row6["RequestedDate"] = date;
        row6["ShippingMethod"] = "Charge by weight";
        dt.Rows.Add(row6);
        return dt;
    }

    public DataTable shipingmethodTable()
    {
        DataTable dtshipingmethod = new DataTable();
        dtshipingmethod.Columns.Add("Id", typeof(Int32));
        dtshipingmethod.Columns.Add("ShippingMethod", typeof(string));

        DataRow row = dtshipingmethod.NewRow();
        row["Id"] = 1;
        row["ShippingMethod"] = "Charge by subtotal";
        dtshipingmethod.Rows.Add(row);

        DataRow row1 = dtshipingmethod.NewRow();
        row1["Id"] = 2;
        row1["ShippingMethod"] = "Charge by weight";
        dtshipingmethod.Rows.Add(row1);

        DataRow row2 = dtshipingmethod.NewRow();
        row2["Id"] = 3;
        row2["ShippingMethod"] = "Charge by quantity";
        dtshipingmethod.Rows.Add(row2);

        return dtshipingmethod;

    } 
```

**截屏：**

![在此处输入图像描述](../Images/715799f9401d6ddf2cea39799e1a724d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:04:42.080

你可以在这个的帮助下继续：

```
dt.Rows[row.DataItemIndex]["Shipping Method"] = ((DropDownList)row.FindControl("DropdownList1")).SelectedItem; 
```

**编辑：**

```
dt.Rows[row.DataItemIndex]["Shipping Method"] = ((DropDownList)
(row.Cells[5].Controls[0])).SelectedItem.ToString(); 
```

# android - 禁用 PopupWindow 的方法 showAsDropDown 的滚动

> ID：12159725
> 
> 赞同：0
> 
> 时间：2012-08-28T12:56:02.657
> 
> 标签：android, popupwindow

我需要将 PopupWindow 放在 Layout 上的屏幕外位置。我使用 showAsDropDown 但它滚动布局。如何禁用 showAsDropDown 的滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:59:23.557

尝试在 onCreate() 中使用 Popup Window 方法。它会成功的。当您的活动开始时，弹出窗口就会启动..

看看这个 URL [http://developer.android.com/reference/android/widget/PopupWindow.html](http://developer.android.com/reference/android/widget/PopupWindow.html)

# cross-compiling - 使用 fcntl.h 的 ARM 交叉编译错误：错误：未在此范围内声明“关闭”

> ID：12159732
> 
> 赞同：14
> 
> 时间：2012-08-28T12:56:37.283
> 
> 标签：cross-compiling

我正在使用树莓派（ARM）交叉编译（主机：x86 linux）

```
arm-bcm2708hardfp-linux-gnueabi-g++ 
```

当我选择 g++ 时，一切正常并编译。但是当交叉编译时我得到：

```
 error: 'close' was not declared in this scope 
```

这是简化的源代码

```
#include <iostream>
#include <fcntl.h>

using namespace std;
int fd;

int main() {
    cout << "!!!Hello World!!!" << endl; // prints !!!Hello World!!!
    close(fd);
    return 0;
} 
```

任何的想法？我忘了包括smth吗？我正在使用 Eclipse 作为 IDE。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-10T18:28:31.453

我相信它就像这样简单：`close`在 中声明`<unistd.h>`，而不是`<fcntl.h>`。要找出哪个头文件声明了一个符号，您应该始终首先查看手册页。

```
#include <iostream>
#include <unistd.h>  // problem solved! it compiles!

using namespace std;
int fd;

int main() {
    cout << "!!!Hello World!!!" << endl; // prints !!!Hello World!!!
    close(fd);  // but explicitly closing fd 0 (stdin) is not a good idea anyway
    return 0;
} 
```

# ios - MPMoviePlayerController 隐藏音量滑块

> ID：12159735
> 
> 赞同：0
> 
> 时间：2012-08-28T12:56:43.577
> 
> 标签：ios, object, mpmovieplayercontroller

我想知道是否有人知道在全屏模式下播放视频时隐藏音量滑块但保留标准控件（如播放/暂停、上一个/下一个等）的方法

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:06:31.340

只是一个建议，完全未经测试:)

```
for (UIView *view in [volumeSlider subviews]) {
      if ([[view isKindOfClass:[MPVolumeSlider class]]) {
        [view setHidden:YES];
  }
} 
```

# scala - 在 Scala 中嵌入 XML（和其他语言？）

> ID：12159738
> 
> 赞同：9
> 
> 时间：2012-08-28T12:56:47.590
> 
> 标签：scala, dsl

我想知道该`scala.xml`库是如何实现的，以从 XML 中获取`Elem`-instance。

所以我可以写：

```
val xml = {
  <myxml>
    Some wired text withoud "'s or code like
    import x
    x.func()
    It's like a normal sting in triple-quotes.
  </myxml>
}

xml.text

String = 
 "
    Some text wired withoud "'s or code like
    import x
    x.func()
    It's like a normal sting in triple-quotes.
  " 
```

查看源代码并没有让我了解这是如何实现的。“XML 检测”是（硬）scala 语言功能还是内部 DSL？因为我想像这样构建自己的东西：

```
var x = LatexCode {
  \sqrt{\frac{a}{b}}
}

x.toString

"\sqrt{\frac{a}{b}}" 
```

或者

```
var y = PythonCode {
  >>> import something
  >>> something.func()
}

y.toString
"""import something ..."""

y.execute  // e.g. passed to python as python-script 
```

或者

```
object o extends PythonCode {
  import x
  x.y()
}

o.toString

"""import x....""" 
```

我想避免使用诸如`PythonCode { """import ...""" }`“DSL”之类的东西。而在 Scala 中，XML 被神奇地传输到了一个`scala.xml`-Class；与`Symbol`我可以得到的相同`val a = 'symoblname`，但在源代码中不知道这是如何实现的。

我怎样才能对自己做这样的事情，最好是作为内部 DSL？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T13:01:53.300

XML 是 Scala 语言特性 (*) - 请参阅[SLS](http://www.scala-lang.org/docu/files/ScalaReference.pdf)的第**1.5**节。

但是，我认为[字符串插值](http://docs.scala-lang.org/sips/pending/string-interpolation.html)将在 2.10 中出现，这至少允许您定义自己的 DSL：

```
val someLatex = latex"""\sqrt{\frac{a}{b}}}""" 
```

这是一个实验性功能，在 SIP 中得到了更充分的解释，但[多产的 Daniel Sobral 也在博客中提到了这一点](http://dcsobral.blogspot.co.uk/2012/01/string-interpolation-on-scala-210.html)。这一点（当然）是可以在编译时检查 String 中*代码*的正确性（嗯，尽可能使用无类型语言:-)，您的 IDE 甚至可以帮助您编写它（嗯，尽可能使用无类型语言:-()

(*) -*鉴于实施的许多缺点，我们可能预计这种情况在未来会发生变化。我的理解是字符串插值和反xml的组合可能是一种真正的方式*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T13:24:59.557

它是一个 XML 文字，就像`"foo"`一个字符串文字、`42`一个整数文字、`12.34`一个浮点文字、`'foo`一个符号文字、`(foo) => foo + 1`一个函数文字等等。

Scala 的字面量比其他语言少（例如，它没有数组字面量或正则表达式字面量），但它*确实*有 XML 字面量。

请注意，在 Scala 2.10 中，通过允许您使用s拦截和重新解释它们，字符串文字变得更加强大*。*`StringContext`这些更强大的字符串文字将允许您实现所有片段，*包括*XML，而无需单独的语言支持。XML 文字很可能会在该语言的未来版本中被删除。

# c - Linux驱动开发：PCI和PCIe驱动的区别？

> ID：12159739
> 
> 赞同：12
> 
> 时间：2012-08-28T12:56:54.320
> 
> 标签：c, linux, linux-device-driver

我正在为 Linux 2.6.36 编写 PCI 驱动程序。

这是我的代码。我的问题是，如果我想将此驱动程序用于 PCIe 设备，是否必须进行一些修改？

```
#include <linux/fs.h>
#include <linux/module.h>
#include <linux/init.h>
#include <linux/pci.h>
#include <linux/interrupt.h>
#include <asm-generic/signal.h>
#undef debug

// ATTENTION copied from /uboot_for_mpc/arch/powerpc/include/asm/signal.h
// Maybe it don't work with that
//____________________________________________________________
#define SA_INTERRUPT    0x20000000 /* dummy -- ignored */
#define SA_SHIRQ        0x04000000
//____________________________________________________________

#define pci_module_init pci_register_driver // function is obsoleted

// Hardware specific part
#define MY_VENDOR_ID 0x5333
#define MY_DEVICE_ID 0x8e40
#define MAJOR_NR     240
#define DRIVER_NAME  "PCI-Driver"

static unsigned long ioport=0L, iolen=0L, memstart=0L, memlen=0L,flag0,flag1,flag2,temp=0L;

// private_data
struct _instance_data {

    int counter; // just as a example (5-27)

    // other instance specific data
};

// Interrupt Service Routine
static irqreturn_t pci_isr( int irq, void *dev_id, struct pt_regs *regs )
{
    return IRQ_HANDLED;
}

// Check if this driver is for the new device
static int device_init(struct pci_dev *dev,
        const struct pci_device_id *id)
{
    int err=0;  // temp variable

    #ifdef debug

    flag0=pci_resource_flags(dev, 0 );
    flag1=pci_resource_flags(dev, 1 );
    flag2=pci_resource_flags(dev, 2 );
    printk("DEBUG: FLAGS0 = %u\n",flag0);
    printk("DEBUG: FLAGS1 = %u\n",flag1);
    printk("DEBUG: FLAGS2 = %u\n",flag2);

    /*
     * The following sequence checks if the resource is in the
     * IO / Storage / Interrupt / DMA address space
     * and prints the result in the dmesg log
     */
    if(pci_resource_flags(dev,0) & IORESOURCE_IO)
    {
        // Ressource is in the IO address space
        printk("DEBUG: IORESOURCE_IO\n");
    }
    else if (pci_resource_flags(dev,0) & IORESOURCE_MEM)
    {
        // Resource is in the Storage address space
        printk("DEBUG: IORESOURCE_MEM\n");
    }
    else if (pci_resource_flags(dev,0) & IORESOURCE_IRQ)
    {
        // Resource is in the IRQ address space
        printk("DEBUG: IORESOURCE_IRQ\n");
    }
    else if (pci_resource_flags(dev,0) & IORESOURCE_DMA)
    {
        // Resource is in the DMA address space
        printk("DEBUG: IORESOURCE_DMA\n");
    }
    else
    {
        printk("DEBUG: NOTHING\n");
    }

    #endif /* debug */

    // allocate memory_region
    memstart = pci_resource_start( dev, 0 );
    memlen = pci_resource_len( dev, 0 );
    if( request_mem_region( memstart, memlen, dev->dev.kobj.name )==NULL ) {
        printk(KERN_ERR "Memory address conflict for device \"%s\"\n",
                dev->dev.kobj.name);
        return -EIO;
    }
    // allocate a interrupt
    if(request_irq(dev->irq,pci_isr,SA_INTERRUPT|SA_SHIRQ,
            "pci_drv",dev)) {
        printk( KERN_ERR "pci_drv: IRQ %d not free.\n", dev->irq );
    }
    else
    {
        err=pci_enable_device( dev );
        if(err==0)      // enable device successful
        {
            return 0;
        }
        else        // enable device not successful
        {
            return err;
        }

    }
    // cleanup_mem
    release_mem_region( memstart, memlen );
    return -EIO;
}
// Function for deinitialization of the device
static void device_deinit( struct pci_dev *pdev )
{
    free_irq( pdev->irq, pdev );
    if( memstart )
        release_mem_region( memstart, memlen );
}

static struct file_operations pci_fops;

static struct pci_device_id pci_drv_tbl[] __devinitdata = {
    {       MY_VENDOR_ID,           // manufacturer identifier
        MY_DEVICE_ID,           // device identifier
        PCI_ANY_ID,             // subsystem manufacturer identifier
        PCI_ANY_ID,             // subsystem device identifier
        0,                      // device class
        0,                      // mask for device class
        0 },                    // driver specific data
        { 0, }
};

static int driver_open( struct inode *geraetedatei, struct file *instance )
{
    struct _instance_data *iptr;

    iptr = (struct _instance_data *)kmalloc(sizeof(struct _instance_data),
            GFP_KERNEL);
    if( iptr==0 ) {
        printk("not enough kernel mem\n");
        return -ENOMEM;
    }
    /* replace the following line with your instructions  */
    iptr->counter= strlen("Hello World\n")+1;    // just as a example (5-27)

    instance->private_data = (void *)iptr;
    return 0;
}

static void driver_close( struct file *instance )
{
    if( instance->private_data )
        kfree( instance->private_data );
}

static struct pci_driver pci_drv = {
    .name= "pci_drv",
            .id_table= pci_drv_tbl,
            .probe= device_init,
            .remove= device_deinit,
};

static int __init pci_drv_init(void)
{    // register the driver by the OS
    if(register_chrdev(MAJOR_NR, DRIVER_NAME, &pci_fops)==0) {
        if(pci_module_init(&pci_drv) == 0 ) // register by the subsystem
            return 0;
        unregister_chrdev(MAJOR_NR,DRIVER_NAME); // unregister if no subsystem support
    }
    return -EIO;
}

static void __exit pci_drv_exit(void)
{
    pci_unregister_driver( &pci_drv );
    unregister_chrdev(MAJOR_NR,DRIVER_NAME);
}

module_init(pci_drv_init);
module_exit(pci_drv_exit);

MODULE_LICENSE("GPL"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T12:48:34.307

从软件的角度来看，PCI 和 PCI Express 设备本质上是相同的。PCIe 设备具有相同的配置空间、BAR，并且（通常）支持相同的 PCI INTx 中断。

示例 #1：Windows XP 没有关于 PCIe 的特殊知识，但在 PCIe 系统上运行良好。

示例 #2：我的公司提供 PCI 和 PCIe 版本的外围板，它们使用相同的 Windows/Linux 驱动程序包。驱动程序不“知道”两个板之间的区别。

但是：PCIe 设备经常利用“高级”功能，如[MSI](http://en.wikipedia.org/wiki/Message_Signaled_Interrupts)、热插拔、扩展配置空间等。其中许多功能存在于传统 PCI 上，但未被使用。如果这是您正在设计的设备，是否实现这些高级功能取决于您。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T13:55:06.027

据我记忆，对于我写的设备驱动，PCI设备和PCIe设备没有区别。我的设备驱动程序使用与您相同类型的调用：`chrdev`、`pci_resource`、`irq`和`mem_region`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-09T07:22:53.747

PCIe 是具有更高速度和功能的高级版本。所有标准的基本功能保持不变。驱动程序注册和提供处理程序是相同的，因为所有 PCI 驱动程序都注册到同一个 Linux PCI 子系统。

# android - whatsapp 在 android 上使用 c2dm aka GCM 吗？

> ID：12159748
> 
> 赞同：6
> 
> 时间：2012-08-28T12:57:07.817
> 
> 标签：android, android-service, android-c2dm

我一直认为 WhatsApp 使用 c2dm 进行消息传递。但是当我看到正在运行的应用程序时，MessageService 总是在运行。您无需运行服务即可接收 c2dm。

为什么要让服务一直运行？

Facebook 更奇怪他们有 3 个服务在运行。其中之一是用于上传。他们开始偷我的照片了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:41:17.187

就像缓存的后台进程说的那样 - 这是一个旧的应用程序进程，正在保留以提高速度，以防再次需要它。我想，同样的事情发生在服务上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:45:14.503

WhatsApp 使用 XMPP 之类的东西

> WhatsApp 使用开放标准可扩展消息传递和存在协议 (XMPP) 的定制版本。

见：[http ://en.wikipedia.org/wiki/WhatsApp](http://en.wikipedia.org/wiki/WhatsApp)

我自己将 GCM 用于 Android 的聊天应用程序。如果设备长时间闲置，它仍然无法正常工作。

# hadoop - 如何检查 hadoop 是否适合工作，

> ID：12159751
> 
> 赞同：0
> 
> 时间：2012-08-28T12:57:16.963
> 
> 标签：hadoop

我有一份工作（处理 4 GB 的数据），我检查了 CPU 使用率和内存使用率，它们都低于 10%。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:30:36.757

你的工作很可能不需要更多。您可以尝试使用 TeraSort（包含在示例 jar 中）对集群进行压力测试，如果您的节点仍在以非常低的使用量运行，则可能是您的配置有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:11:04.107

Hadoop 附带 Benchmark 实用程序来验证 Hadoop 集群设置。

检查 Hadoop TestDFSIO。

# asp.net - 如何增加asp.net用户的登录时间？

> ID：12159752
> 
> 赞同：1
> 
> 时间：2012-08-28T12:57:16.877
> 
> 标签：asp.net, authentication, asp.net-membership

我希望用户登录，直到用户关闭浏览器窗口或专门注销。如何做到这一点？我应该使用 UserIsOnlineTimeWindow 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:04:01.607

使用javascript“保持活力”机制。

您将不得不使用 javascript setInterval 来继续向您的服务器发出 ajax 请求。

只要浏览器打开，这将使会话保持活动状态。

请注意，这是一个安全风险，通常最好通过在一定时间后清除间隔来停止发出这些请求。

通过将会话超时设置为非常大的数字来延长会话超时对于大量用户来说不会很好地扩展

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:04:20.100

您可以在 web.config 中设置会话超时...其中 525601 分钟（1 年）的最大有效值 - 默认为 20 分钟

```
<system.web> 
<sessionState timeout="20" /> 
<system.web> 
```

# javascript - 使用 IIS 7.5 时 IE9 渲染缓慢（但不使用文件协议）

> ID：12159755
> 
> 赞同：2
> 
> 时间：2012-08-28T12:57:26.837
> 
> 标签：javascript, html, css, internet-explorer-9, iis-7.5

我目前在使用 ie9 时遇到了一个奇怪的问题，（32 位）我正在尝试显示一个页面（有很多表格、图像、css 和 js）

当我使用 http 协议显示页面时，如果我尝试使用文件协议 (file://) 显示完全相同的页面，页面现在需要大约 4 秒来呈现/显示，页面显示不到一秒我也尝试过chrome 浏览器在不到一秒的时间内以两种协议显示页面

我使用 iis 7.5 作为本地网络服务器

我已经为那些使用 ie9 (f12) 开发工具中的网络选项的人计时

这是使用 http 时显示的屏幕截图：

![在此处输入图像描述](../Images/490b6235402f48af1f083856374044e2.png) ![在此处输入图像描述](../Images/045d30d34cf60228e49d0b6d6f35a46c.png)

我想知道为什么页面需要这么长时间才能准备好

提前致谢 ;）

# android - mupdf库集成错误

> ID：12159759
> 
> 赞同：6
> 
> 时间：2012-08-28T12:57:30.433
> 
> 标签：android, android-ndk, mupdf

我正在做一个项目，我必须处理 pdf 视图。我正在尝试将 mupdf 库集成到我的项目中，但出现如下所述的错误。我已按照自述文件中提到的所有步骤进行操作。请帮我解决这个错误。

```
Compile thumb : mupdf <= mupdf.c

jni/mupdf.c:10:18: fatal error: fitz.h: No such file or directory
compilation terminated.
make: *** [obj/local/armeabi/objs-debug/mupdf/mupdf.o] Error 1 
```

我的 Android.mk 文件

```
 LOCAL_PATH := $(call my-dir)
TOP_LOCAL_PATH := $(LOCAL_PATH)

MUPDF_ROOT := $(call my-dir)

include $(TOP_LOCAL_PATH)/Core.mk
include $(TOP_LOCAL_PATH)/ThirdParty.mk

include $(CLEAR_VARS)

LOCAL_C_INCLUDES := \
    $(MUPDF_ROOT)/draw \
    $(MUPDF_ROOT)/fitz \
    $(MUPDF_ROOT)/mupdf
LOCAL_CFLAGS :=
LOCAL_MODULE    := mupdf
LOCAL_SRC_FILES := mupdf.c
LOCAL_STATIC_LIBRARIES := mupdfcore mupdfthirdparty

LOCAL_LDLIBS    := -lm -llog -ljnigraphics

include $(BUILD_SHARED_LIBRARY) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T10:42:18.730

这就是我在 MuPDF 中取得成功的方式。

下载ndk并解压。下载cygwin并解压。下载 mupdf 源文件和第三方文件。

提取源和第三方提取文件添加到这里。

使用 cygwin 转到项目目录。

在 Eclipse 中打开项目并将其添加到 application.mk

```
 NDK_TOOLCHAIN_VERSION=4.4.3 
```

在 cygwin 中使用此命令制作头文件

```
javah -jni -classpath bin/classes/ -d jni/ com.artifex.mupdf.MuPDFActivity 
```

使用 cd .. 并返回 MupdfSource 提取目录并执行

```
 make 
```

然后错误来了。使用

```
make NOX11=yes 
```

转到cygwin中的项目目录（android文件夹）和

```
ndk-build 
```

这就是你得到的所有 .so 文件

运行项目。

对不起英语不好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:07:06.533

您必须使用 Cygwin运行**make命令。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:19:52.867

请按照[以下](https://stackoverflow.com/a/10071012/1289716)步骤

还要注意**自述**文件的步骤

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T14:18:01.417

替换`MUPDF_ROOT := $(call my-dir)`为`MUPDF_ROOT := ..`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T15:51:02.267

您应该调用**./scripts/build-native.sh**（对于 Windows 使用 cygwin），然后运行`ndk-build`

# gtk - PyGtk：如何对与 CellRendererCombo 关联的列表存储中的项目进行排序

> ID：12159765
> 
> 赞同：3
> 
> 时间：2012-08-28T12:57:46.043
> 
> 标签：gtk, pygtk

如何对附加到 CellRendererCombo 的 ListStore 中的项目进行排序

```
cellrenderer_combo = gtk.CellRendererCombo()
...
liststore = gtk.ListStore(str)
    item_list = ["Item1", "Item2", "Item3", "Item4", "Item5", "Item6"]
    for item in item_list:
        liststore.append([item])

self.cellrenderer_combo.set_property("model", self.liststore) 
```

如何按降序对 Liststore 中的“项目”进行排序？？？

提前致谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T00:39:14.357

如果项目不会更改，则只需在将它们添加到列表存储之前对其进行排序：

```
item_list = ['These', 'items', 'are', 'not', 'going', 'to', 'change']
item_list.sort(reverse=True) 
```

如果项目要更改并且您希望它们在组合框中保持排序，则使用[gtk.TreeModelSort](http://www.pygtk.org/docs/pygtk/class-gtktreemodelsort.html)：

```
sorted = gtk.TreeModelSort(liststore)
self.cellrenderer_combo.props.model = self.liststore 
```

# javascript - Chromium 内联样式不允许正确查看

> ID：12159771
> 
> 赞同：0
> 
> 时间：2012-08-28T12:57:54.417
> 
> 标签：javascript, css, chromium

当包含如下样式时，我看不到等等。

```
 <a data-toggle="sth" style="float:left">blah blah</a> 
```

我也在下面尝试过，但它给出了不需要的结果

```
<a data-toggle="sth" style="float:'left'">blah blah</a> 
```

在 chrome 和 firefox 中，它按预期运行。

我正在使用 javascript 库和 jquery，我不知道它们是否是问题所在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:59:48.423

```
<a data-toggle="sth" style="float:left;">blah blah</a> 
```

# ruby - 在没有实际浏览器窗口的情况下自动化浏览器？

> ID：12159772
> 
> 赞同：1
> 
> 时间：2012-08-28T12:58:02.783
> 
> 标签：ruby, capybara, mechanize, watir

我需要做一个自动脚本来填充两个文本字段并单击网页上的一个按钮，并将所有生成的文本存储到一个字符串变量中。

我知道如何使用 Watir 执行此操作，但问题是该脚本将在 Windows 服务器上运行（没有连接物理监视器）。

所以这需要某种没有实际浏览器窗口的“模拟浏览器”......我以前从未做过这样的事情，但在谷歌搜索之后，我认为 Ruby 宝石“机械化”或“水豚”可能能够做到这一点。

但是因为我对水豚或机械化都没有任何经验，所以我在这里寻求一点帮助......

这是我正在尝试做的，用 Watir 代码编写的。如果有人能告诉我如何用“机械化”或“水豚”做同样的事情，我将不胜感激。或者，如果有其他方法可以做到这一点，欢迎所有建议：

```
require "watir"
ie = Watir::Browser.new
ie.goto "http://www.vero.fi/vere/Tarkistus/VeronumeronTarkistus.aspx/"
ie.text_field(:id, "tbNimi").set "John Smith"
ie.text_field(:id, "tbVerotunnus").set "123456789012"
ie.button(:id, "btnHae").click
info = ie.text 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:30:50.387

您也可以使用[Celerity](http://celerity.rubyforge.org/)。它使用 Watir API 驱动无头浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T16:42:17.233

**Selenium**可以帮助 Selenium 服务器运行和 Firefox 在无头状态下运行

我基本上在[这里写了一篇文章](http://paramitech.com/2011/03/selenium-in-headless-with-xvfb-under-ruby/)

希望这有帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-28T16:36:58.890

我为此使用[PhantomJS （使用 Capybara 驱动程序](http://phantomjs.org/)[poltergeist](https://github.com/jonleighton/poltergeist)）。它运行一个无头 WebKit（Safari 和 Chrome 的浏览器引擎），Capybara 告诉它该做什么。这是我发现的这个概念的最简单的设置实现。

代码看起来像：

```
visit "http://www.vero.fi/vere/Tarkistus/VeronumeronTarkistus.aspx/"
fill_in "tbNimi", :with => "John Smith"
fill_in "tbVerotunnus", :with => "123456789012"
click_on "btnHae"
info = page.html 
```

# api - 创建与亚马逊 ASIN 编号的链接以通过用户设置链接正确的国家/地区（例如 amazon.com、.co.uk、.jp）？

> ID：12159775
> 
> 赞同：4
> 
> 时间：2012-08-28T12:58:13.127
> 
> 标签：api, redirect, amazon, product

我有一个数据库，想**将亚马逊产品与他们的 asin 链接起来**。

例如 iPhone 4S 的 B005UEF678 将是

```
amazon.com/dp/B005UEF678 in the US,
but amazon.de/dp/B005UEF678 in germany. 
```

实际上我不知道哪个 URL 是正确的，因为用户可能来自任何国家？

你将如何解决这个问题？

应用程序接口？在用户语言中切换大小写？

谢谢你

顺便说一句，我使用 PHP。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T20:30:05.517

有一个名为 asin.info的[ASIN 短 URL服务。](http://asin.info)您可以通过 Amazonlink 或使用以下语法轻松生成 URL：

```
http://asin.info/a/{asincode} 
```

它将用户重定向到正确国家的产品。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T03:19:24.610

我使用斯蒂芬莫利的[IPToAmazon](http://code.stephenmorley.org/php/mapping-visitor-ip-addresses-to-amazon-sites/)。它是一个 php 脚本，可根据 IP 或其他标准创建指向国际亚马逊商店的链接（您可以对其进行配置）。

# java - EL中bean的动态选择

> ID：12159777
> 
> 赞同：3
> 
> 时间：2012-08-28T12:58:17.713
> 
> 标签：java, jsf, el

有没有办法在运行时而不是设计时指定 EL 中使用的托管 bean？例如 ，根据调用代码的 JSF 页面`actionListener="#{myBean.method}"`，该`myBean`部分可以具有不同的值（条件是使用的任何对象而不是 myBean 都是从实现“方法”的公共父级派生的）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T13:07:23.007

如果您事先知道 bean 范围并且事先已经创建了 bean，那么是的，可以使用以下语法：

```
actionListener="#{requestScope[beanName].method}" 
```

其中`#{requestScope}`表示请求范围映射（相同的映射可用于视图、会话和应用程序范围）并`#{beanName}`表示保存托管 bean 名称的变量。

如果您事先不知道 bean 范围和/或未事先创建 bean，那么您需要创建一个执行 EL 的实用程序函数[`Application#evaluateExpressionGet()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/Application.html#evaluateExpressionGet%28javax.faces.context.FacesContext,%20java.lang.String,%20java.lang.Class%29)，以便可以使用如下方式：

```
actionListener="#{util:getBean(beanName).method}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-20T13:54:59.697

如果您的问题是指为具有公共元素的多个子类生成一组页面，您也可以使用页面组合来实现此目的。

例如，如果 Resident 和 Nonresident 是 Person 子类的托管 bean：

例如。在'non-resident.xhtml'

```
<ui:define name="body">
    <ui:param name="Controller" value="#{NonResident}"/>
    <ui:include src="anyone.xhtml"/>
</ui:define> 
```

并在“resident.xhtml”中

```
<ui:define name="body">
    <ui:param name="Controller" value="#{Resident}"/>
    <ui:include src="anyone.xhtml"/>
</ui:define> 
```

然后'anyone.xhtml'可以使用'Controller'作为bean名称来定义公共元素。

这种方法还使您能够消除重复的页面定义。

# javascript - 使用 TSQL 来“缩小”javascript 代码？

> ID：12159778
> 
> 赞同：0
> 
> 时间：2012-08-28T12:58:18.013
> 
> 标签：javascript, tsql, minify

这似乎是一个不寻常的请求，但有人有 T-SQL (MSSQL2008) 代码来“缩小”javascript 代码吗？

我有一个 MVC 站点，它使用一系列存储的过程来生成 *.js 文件的内容，最好在 SP 构建 javascript 之后，它可以使用 UDF/SP 来“缩小”它。我考虑过创建第二个包含缩小版本的 SP 集，但这将是维护的噩梦（将当前构建 javascript 代码的 10 个 SP 加倍）。

我不知道用于缩小的逻辑是否足够简单以至于 SP/UDF 可以做到，如果幸运的话，有人已经编写了它并愿意分享:)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T19:23:55.893

我不认为使用 SP 缩小 javascript 是一个好主意。我猜你最终会得到一些非常复杂的东西。我知道的最简单的压缩器是[jsmin](https://github.com/douglascrockford/JSMin/blob/master/jsmin.c)，它仍然是 300 行 C。

另一种方法可能是将缩小代理用作 Web 服务器。我猜想使用 nodejs 和 uglifyjs 想出一些东西是相当快的（不到 20 行代码）。

# .net - 找不到 Interop.Word

> ID：12159780
> 
> 赞同：0
> 
> 时间：2012-08-28T12:58:28.780
> 
> 标签：.net, office-interop, .net-assembly

我最近收到了一个项目，目前无法启动它。问题是没有`Interop.Word`组装。我试图包括`Microsoft.Office.Interop.Word`，但解决方案没有建立。`Interop.Word`我在我的电脑中找不到该程序集。我怎样才能找到它或它附带什么软件？

PS。我所有的搜索尝试都重定向到`Microsoft.Office.Interop.Word`. 我的操作系统是 Win 7 x64 Home Premium，安装了 MS Office 2010 俄语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:01:36.147

该`Interop.Word`程序集是一个自动生成的围绕 COM DLL 的包装器。您需要重新创建它：删除旧引用，转到“添加引用”，选择 COM 选项卡并选择 Microsoft Word 组件。

# c# - 如何将字段/成员添加到 aspnet_user 表/对象？

> ID：12159788
> 
> 赞同：0
> 
> 时间：2012-08-28T12:59:03.667
> 
> 标签：c#, asp.net, visual-studio-2010

在这个问题之后 - [aspnet_Membership IP address](https://stackoverflow.com/questions/4898022/aspnet-membership-ip-address)，我希望添加更多关于我的用户的字段和数据（比如说电话号码、年龄和最喜欢的冰淇淋口味......）。为此，我需要使用多个字段，因此，注释字段是不够的。

是否可以将列添加到 aspnet_Users 或 aspnet_Membership 表并将注册表中输入的值绑定到这些列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:00:57.203

请改用[ASP.NET 配置文件提供程序](http://msdn.microsoft.com/en-us/library/014bec1k%28v=vs.100%29.aspx)。在那里您可以添加您想要的内容（例如用户的图片、自定义起始页或他的电话号码）。

这是推荐阅读：[http ://www.4guysfromrolla.com/articles/101106-1.aspx](http://www.4guysfromrolla.com/articles/101106-1.aspx)

`StartPage`这是我的 web.config 中的一个示例，它为使用 a调用的每个用户使用了一个附加属性，该属性`SqlProfileProvider`会自动将其保存在 SQL-Server 中：

```
<profile defaultProvider="AspNetSqlProfileProvider">
  <providers>
    <clear/>
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ErpConnectionString" applicationName="/ERP"/>
  </providers>
  <properties>
    <add name="Startpage"/>
  </properties>
</profile> 
```

他登录后，我正在阅读此用户设置：

```
if (User.Identity.IsAuthenticated)
{
    String startPage = HttpContext.Current.Profile.GetPropertyValue("Startpage") as string;
    if (!string.IsNullOrWhiteSpace(startPage))
    {
        Response.Redirect(startPage);
    }
} 
```

您可以通过以下方式保存该值：

```
HttpContext.Current.Profile.SetPropertyValue("Startpage", startPage);
HttpContext.Current.Profile.Save(); 
```

# asp.net - c#asp.net中关于GridView和DataSource的字符串操作

> ID：12159789
> 
> 赞同：0
> 
> 时间：2012-08-28T12:59:05.773
> 
> 标签：asp.net, c#-4.0, data-binding, gridview

C# -- ASP.Net -- Webforms

我有一个数据库**X** (Column1 - PrimaryKey)

```
`[Column1(int)] -- [Column2(string)]`

          `[12] -- [ab]`

          `[34] -- [cd]`

          `[56] -- [xy]`

          `[78] -- [ac]` 
```

我有另一个数据库**Y** (Column1 - PrimaryKey)

```
`[Column1(int)] -- [Column2(string)]`

          `[A1] -- [12,34,56]` 
```

我有一个 GridView 说 GV ，我在其中显示来自数据库**Y的****A1**的 column2 ：

 **作为

-- 编辑 -- 删除 --`ab`

-- 编辑 -- 删除 --`cd`

-- 编辑 -- 删除 --`xy`

每行都有**编辑**和**删除**选项，

在每次**编辑**时，我需要更新数据库**y**中的**字符串** 。`[12,34,56]``[A1]`

 **假设我正在编辑 GridView **ab**的第一行作为**ac**映射到数据库**X**中的第 4 行。我的结果应该`[78,34,56]`在`[A1]`数据库**Y**中。

抱歉，如果帖子重复..****

# c# - 检测ajax提交

> ID：12159790
> 
> 赞同：0
> 
> 时间：2012-08-28T12:59:10.783
> 
> 标签：c#, javascript, asp.net, ajax

仅当使用 ajax 提交页面时，我才需要运行特定的 javascript 函数。我尝试了以下方法：

```
ScriptManager.RegisterOnSubmitStatement(Page, Page.GetType(), 
    "scriptName", "MyFunction();"); 
```

但它似乎也在正常的回传中运行。我也尝试用控件替换`Page`对象，`UpdatePanel`但没有任何区别。

javascript函数内部是否有可能`MyFunction()`检测它是ajax还是正常提交​​？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:15:46.673

你可以利用 Sys.WebForm.PageRequestManager 两个事件

1) add_initializeRequest --> 当一个ajax回发被启动时

2) add_endRequest --> 当 ajax 回发完成时。

PageRequestManager 还提供了一个函数“get_isInAsyncPostBack()”，它告诉页面是否仍在进行现有的 ajax 回发。

例子：

```
Sys.WebForms.PageRequestManager.getInstance().add_initializeRequest(function () {

 var prm = Sys.WebForms.PageRequestManager.getInstance();

 // Only one async request at a time
 if (prm.get_isInAsyncPostBack()) {
 prm.abortPostBack();
 }

 //Call the function or process you want to perform on ajax request begin
 });

 Sys.WebForms.PageRequestManager.getInstance().add_endRequest(function () {
  //Call the fucntion or process you want to perform on ajax request end
 }); 
```

有任何问题，欢迎提问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:28:11.890

这段代码解决了这个问题。感谢@user1341446 为我指明了正确的方向。

在提交时注册 javascript 函数：

```
ScriptManager.RegisterOnSubmitStatement(Page, Page.GetType(), 
    "scriptName", "MyFunction();"); 
```

在函数内部检测 ajax 是否提交：

```
function MyFunction()
{
  var isAjaxSubmit = false;
  if (typeof (Sys) != "undefined")
    isAjaxSubmit = 
       Sys.WebForms.PageRequestManager.getInstance()._postBackSettings.async;
} 
```

# javascript - 单击外部日期选择器时，.blur() 不会触发

> ID：12159794
> 
> 赞同：0
> 
> 时间：2012-08-28T12:59:19.987
> 
> 标签：javascript, jquery, internet-explorer-9, onblur

我有`.blur()`四个文本输入的事件，其中附加了 datepicker 和 timepicker。当我“选项卡”到下一个控件时，它工作正常，但是当我点击外面的某个地方时，事件不会触发。我做错了什么，还是`.blur()`事件有问题？

事件的 JavasSript 代码：

```
 $(".calcTimespan").blur(function () {
        $.ajax({
            type: "GET",
            url: '@Url.Action("CalculateTimespan")',
            data: {
                "franDatum": $("#Dyk_FranDatum").val(),
                "franTid": $("#Dyk_FranTid").val(),
                "tillDatum": $("#Dyk_TillDatum").val(),
                "tillTid": $("#Dyk_TillTid").val()
            },
            dataType: 'html',
            cache: false,
            success: function (data) {
                if (data != "FAIL")
                    $("#Dyk_DyktidMinuter").val(data);
            },
            error: function (jqXHR, textStatus, errorThrown) {
                alert("Ett fel inträffade vid hämtning av dykning!");
            }
        });
    }); 
```

的HTML：

```
 <div>
        <label for="Fr_n_datum">Fr&#229;n datum</label>
        <label style="margin-left: 40px;">Tid</label>
        <br />
        <input class="halv datumpicker calcTimespan" id="Dyk_FranDatum" name="Dyk.FranDatum" type="text" value="" />
        <input class="halv tidpicker calcTimespan" id="Dyk_FranTid" name="Dyk.FranTid" type="text" value="" />
    </div>
    <br />

    <div>
        <label for="Till_datum">Till datum</label>
        <label style="margin-left: 50px;">Tid</label>
        <br />
        <input class="halv datumpicker calcTimespan" id="Dyk_TillDatum" name="Dyk.TillDatum" type="text" value="" />
        <input class="halv tidpicker calcTimespan" id="Dyk_TillTid" name="Dyk.TillTid" type="text" value="" />
    </div>
    <br />

    <div>
        <label for="Dyktim__min_">Dyktim (min)</label>
        <label style="margin-left: 33px;">Pris per minut</label>
        <br />
        <input class="halv" id="Dyk_DyktidMinuter" name="Dyk_DyktidMinuter" type="text" value="" />
        <input class="halv" id="Dyk_Pris" name="Dyk.Pris" type="text" value="" />
    </div> 
```

我只针对 IE9。

**编辑** 似乎这些事件运行良好。问题是，当我在日期选择器中单击以选择日期时，已经在日期上按下鼠标，事件被触发，即使输入文本中的组件尚未设置该值！

Now, I have to find a way to either get the "mouse down"-date or delay the event to when it's actually set in the input-text.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T08:20:25.177

The issue I was actually having was this: [jqueryUI datepicker fires input's blur before passing date, avoid/workaround?](https://stackoverflow.com/questions/1814292/jqueryui-datepicker-fires-inputs-blur-before-passing-date-avoid-workaround)

I used a variant of Purells answer to solve my problem.

Thanks for all support. It was the help in this question that led me to the real problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:12:20.617

There seem to be issues with IE9 and the blur event not firing consistently, try binding the elements with [focusout](http://api.jquery.com/focusout/) instead.

# jquery - youtube视频结束后执行Javascript函数

> ID：12159798
> 
> 赞同：3
> 
> 时间：2012-08-28T12:59:30.370
> 
> 标签：jquery, youtube

我正在通过 youtube API 加载一个 youtube 视频，因为我想在视频结束时执行一行 jQuery。出于某种原因，我的代码将无法执行，有人能指出我正确的方向吗...

首先我嵌入 iFrame

```
 <iframe id="player" class="blo" width="219" height="207" src="http://www.youtube.com/embed/qNL81Khx_UE?enablejsapi" frameborder="0" allowfullscreen></iframe> 
```

然后我创建 API 脚本

```
<script type="text/javascript">
          // 2\. This code loads the IFrame Player API code asynchronously.
          var tag = document.createElement('script');
          tag.src = "http://www.youtube.com/player_api";
          var firstScriptTag = document.getElementsByTagName('script')[0];
          firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

          // 3\. This function creates an <iframe> (and YouTube player)
          //    after the API code downloads.
          var player;
          function onYouTubePlayerAPIReady() {
            player = new YT.Player('player', {
              height: '390',
              width: '640',
              videoId: 'qNL81Khx_UE',
              events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
              }
            });
          }
          </script> 
```

然后我做一个函数

```
<script type="text/javascript">
 var myPlayerState;
  function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.PLAYING && !done) {
      alert('Something Happened');
    }
    myPlayerState = event.data;
     }

if (myPlayerState == 1){
alert('Something Happened');
} 
```

谁能让我知道我做错了什么？

谢谢！

# c# - Windows 8 Metro 应用程序中的 RotateTransform Webview

> ID：12159804
> 
> 赞同：0
> 
> 时间：2012-08-28T12:59:42.463
> 
> 标签：c#, microsoft-metro, visual-studio-2012

我在单击按钮时使用 RotateTransform 在 Windows 8 Metro Apps 中旋转 Webview 控件时遇到问题。

```
RotateTransform rt = new RotateTransform();
        rt.CenterX = webView.Width / 2;
        rt.CenterY = webView.Height / 2;
        rt.Angle = 90;
        webView.RenderTransform = rt; 
```

如您所见，我将 Webview 旋转 90 度，但 Webview 没有旋转。

请参考： [http ://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/d25bb7bd-d7ac-4e15-a4ee-882bf21464da](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/d25bb7bd-d7ac-4e15-a4ee-882bf21464da)

任何帮助/解决方案/原因对我有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T01:41:11.760

WebViews 是特殊的，不能在 XAML 应用程序中旋转。这是因为 WebView 是 Internet Explorer 的一个实例，它是一个 ActiveX 组件（可能仍以这种方式托管），不能以与 XAML 内容相同的方式旋转。WebViews 总是与设备的旋转对齐。对于它的价值，WPF 有类似的设计限制。

根据您要完成的任务，基于 HTML 的 Win8 应用程序可能是更好的选择，因为您可以使用 CSS3 转换来旋转 HTML 内容。或者，您可以在 XAML 应用程序中旋转浏览器内部的内容，只要您不需要直角（0、90、180、270）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-10T10:32:17.800

从 Windows 8.1 开始，WebView 应该能够旋转。

```
<WebView x:Name="WebView1" RenderTransformOrigin="0.5,0.5">
<WebView.RenderTransform>
    <CompositeTransform Rotation="30" ScaleX="1" ScaleY="1" SkewX="15" SkewY="0" />
</WebView.RenderTransform> 
```

请参阅：[Windows 8.1 中 WebView 的新增功能](https://blogs.windows.com/buildingapps/2013/07/17/whats-new-in-webview-in-windows-8-1/ "Windows 8.1 中 WebView 的新增功能")

# scala - 有像 Clojurescript 这样的 Scala 吗？又名集成 Scala 单页应用程序

> ID：12159811
> 
> 赞同：7
> 
> 时间：2012-08-28T13:00:02.097
> 
> 标签：scala, groovy, clojure, clojurescript, single-page-application

所以**[ClojureScript One](http://clojurescriptone.com/index.html)**看起来相当不可思议！您可以使用您的 REPL 实时更新[SPA](http://en.wikipedia.org/wiki/Single-page_application)。

因此，在没有 REPL 的 Java 中，这样的事情是相当不可能的，但在像 Groovy 或 Scala 这样的东西中似乎很有可能。我有点像 Lisp 的偏执狂（我真的不应该这样，但哦，好吧），想知道是否有像 Clojurescript 这样的 Scala 或 Groovy？

**更新：** 理论上它看起来可以将 Scala/Groovy 包裹在 Java 的**[ItsNat](http://itsnat.sourceforge.net/index.php?_page=overview)**周围。但是我对那个项目有些怀疑，因为它自 2011 年以来就没有更新过（他们也有他们最丑陋的网站……就像他们试图让它变得丑陋一样）。许可证也相当严格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-16T16:42:14.537

试试[http://www.scala-js.org/](http://www.scala-js.org/)一个 Scala 到 JavaScript 的编译器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T13:59:33.413

有[js-scala](https://github.com/js-scala/js-scala "js-scala")，但目前似乎还处于试验阶段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T06:54:20.023

ItsNat 已经退出稳定阶段，这就是它处于非活动状态的原因。当然，可以利用新功能和更多浏览器支持和测试，但到目前为止，我们在 ItsNat 方面的体验非常好。我们从版本 0.7 开始就使用 ItsNat，并且遇到了非常 (2) 个问题，这也是非常罕见的问题。

如果您想要工作示例，我很乐意向您展示我们的项目是开源的 :-)

适用于 SEO 和 SPI。

[演示](http://www.innowhere.com/itsnat/feashow_servlet?itsnat_doc_name=feashow.main)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T13:46:13.627

如果您正在寻找 SPA [scala-gwt](http://scalagwt.github.com/)。或者您正在寻找 scala-to-javascript 编译器？

# c# - 使用 Visual Studio 2012 在 C# 中 LINQ to Microsoft SQL 2000

> ID：12159812
> 
> 赞同：1
> 
> 时间：2012-08-28T13:00:03.733
> 
> 标签：c#, asp.net, sql-server-2000, datacontext

是否可以使用 Visual Studio 2012 创建 DataContext 以连接到 Microsoft SQL Server 2000？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:16:53.293

1.  希望这些信息有帮助：

> 对 SQL Server 2000 的主流支持于 2008 年 4 月 8 日结束。Visual Studio 2010 仅支持 SQL Server 2005 和 SQL Server 2008/2008 R2。为了继续使用 SQL Server 2000，您可以使用 Visual Studio 的任何早期版本。
> 
> ODBC 连接仍处于启用状态，因为 ODBC 与版本无关。您会发现许多功能都对 ODBC 连接禁用。

[见源](http://social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/37d137be-f119-4d49-bddf-99f398328096/)

* * *

[Microsoft 表示](http://msdn.microsoft.com/en-us/library/bb399342.aspx)，某些功能（例如 Take 和 Skip）在用于针对 SQL Server 2000 的查询时有一定的限制，这意味着它可以工作但有限制。

也检查[这个链接](http://forums.asp.net/t/1295232.aspx/1)。

# css - 试图从样式中删除某些 CSS 元素

> ID：12159817
> 
> 赞同：1
> 
> 时间：2012-08-28T13:00:16.170
> 
> 标签：css, regex

我正在尝试从 html style="" 属性中删除一些元素。

```
<div style="color: red; background: #000; position: fixed; top:0; left: 0;">Hey</div> 
```

我想剪切这个 HTML，这样它将删除位置元素和背景元素。

例子：

```
<div style="color: red; top:0; left: 0;">Hey</div> 
```

我怎么能在正则表达式上做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T13:08:08.327

一个简单的正则表达式可以是：

```
/background:.*?;|position:.*?;/ 
```

如果您只想检查标签中的样式属性，请尝试以下 PHP 测试代码：

```
<?php
$str = '<div style="color: red; background: #000; position: fixed; top:0; left: 0;">Hey</div>';
echo preg_replace('/(<.*?style=.*?)background:.*?;|position:.*?;(.*?")/','$1$2',$str);
?> 
```

当属性没有分号（唯一属性，最后一个属性）时，您还要求匹配大小写。为了匹配没有分号的情况，我们应该假设它是唯一的属性或者是最后一个。在这两种情况下，我们都会使用以下正则表达式：

```
position:[^;]*?("|')
background:[^;]*?("|') 
```

基本上，我要求匹配关键字`position:`或`background:`后跟**除**分号以外的任何字符，重复零次或多次，直到找到引号（单引号或双引号）。

这涵盖了我们称为“没有分号”的情况。

以下代码应该适用于所有情况，它没有经过优化，只是为了清晰和示例。它由一系列调用组成：

```
$str = preg_replace('/(<.*?style.*?)(position:[^;]*?)("|\')/','$1$3',$str);
$str = preg_replace('/(<.*?style.*?)(background:[^;]*?)("|\')/','$1$3',$str);
$str = preg_replace('/(<.*?style.*?)(position:.*?;)(.*?")/','$1$3',$str);
$str = preg_replace('/(<.*?style.*?)(background:.*?;)(.*?")/','$1$3',$str);
echo $str; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:07:53.473

尝试类似的东西（虽然未经测试，所以不太确定表达式是否正确，尽管它应该给你足够的引导来解决剩下的问题）

```
<?php

$pattern = array();
$replacement = array();

$pattern[0] = '/position: [a-zA-Z]+;/';
$pattern[1] = '/background: #[a-zA-Z0-9]+;/';

$replacement[0] = '';
$replacement[1] = '';

$input_html = '<div style="color: red; background: #000; position: fixed; top:0; left: 0;">Hey</div>';

echo preg_replace($pattern, $replacement, $input_html);

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:09:28.280

像这样的东西应该工作：

```
$tag = '<div style="color: red; background: #000; position: fixed; top:0; left: 0;">Hey</div>';

$tag = preg_replace('/background:\s?#[0-9a-zA-Z]{3,6};\s?/', '', $tag); 
```

这仅适用于背景属性，然后您将为颜色属性执行另一个操作。

```
$tag = preg_replace('/position:\s?[a-zA-Z];\s?/', '', $tag); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T13:22:46.760

将来，您可以尝试使用[Chirpy - VS Add In 处理 Js、Css、DotLess 和 T4 文件](http://chirpy.codeplex.com/)或类似应用程序，尝试使用谷歌搜索 CSS 组合/压缩，它们会重新组合所有重复的选择器和东西。

我还建议使用链接的 css 文件，这样你可以更好地组织你的课程

# sql - 在 SQL 中以 mm-mm-yyyy 编写日期的最佳方法是什么

> ID：12159818
> 
> 赞同：0
> 
> 时间：2012-08-28T13:00:23.787
> 
> 标签：sql, database, date, select

我想以以下格式从 SQL 返回日期 2011-12-DEC、2012-01-JAN、2012-02-FEB、2012-03-MAR 等...

目前我有以下代码，但不认为它是最好的。它也不会在月份前返回 0（即 8 而不是 08）

```
print CONVERT(VARCHAR(20), DATEPART(yyyy,GETDATE())) + '-'+ CONVERT(VARCHAR(20), DATEPART(mm,GETDATE())) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:08:19.653

对于 Oracle，使用 TO_CHAR 和日期格式。例如

```
SELECT TO_CHAR(SYSDATE, 'YYYY-DD-MON') FROM DUAL 
```

有多种可能的日期格式字符串请参见[此处](http://ss64.com/ora/syntax-fmt.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:12:36.347

如果你真的想要 yyyy-mm-mmm 那么你可以像这样得到它（对于 SQL 服务器）：

```
select  substring(convert(nvarchar, getdate(), 120), 1, 7) 
        + '-' + 
        substring(upper(datename(mm, getdate())), 1, 3) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T13:11:36.667

对于 SQL Server，类似这样

```
 select convert(varchar(8), getdate(),120)
      + convert(varchar(3),datename(month,getdate())) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T13:05:12.977

好吧，您应该使用格式化程序（例如 AS [DD/MM/YYYY] ）。所有这些都在此处列出，包括您对“月份”命名的要求 [http://www.sql-server-helper.com/tips/date-formats.aspx](http://www.sql-server-helper.com/tips/date-formats.aspx)

```
SELECT SUBSTRING(CONVERT(VARCHAR(11), GETDATE(), 113), 4, 8) AS [Mon-YYYY] 
```

会给你 Apr-2006

随意转动它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T13:03:01.463

`DATE_FORMAT`根据您的 RDMS，考虑一个函数等。

# css - 文本：背景颜色相同大小

> ID：12159820
> 
> 赞同：0
> 
> 时间：2012-08-28T13:00:39.190
> 
> 标签：css, background, html

我的网站[http://maximearchambault.com](http://maximearchambault.com)

我希望我的 3 个部分、商业、个人项目和信息/联系人具有相同的颜色背景大小。蓝色需要为 180 像素。

```
/* section title */
#index span.section_title,
#index span.section_title a {  color: #000000; font-weight: bold; background: #00FFFF; } 
```

这位于我的 style.css 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:08:34.313

试试这个

```
#index ul.section {
  font-size: 10px;
  margin-bottom: 1em;
  border: 1px solid #636363;
  background: cyan;
  width: 180px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:03:43.353

颜色没有大小。如果您想执行某些措施，请分别使用`width`（或`height`），即`width: 180px;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:05:03.070

在您的样式 css 的第 75 行 -

```
#index span.section_title, #index span.section_title a {

color: black;
font-weight: bold;
background: cyan;
width: 180px; //add this
display: block; ///add this
} 
```

您可能只想将其添加到跨度中，在这种情况下添加新规则 -

```
#index span.section_title {
        width: 180px; //add this
        display: block; ///add this
} 
```

# asp.net-mvc-3 - MVC3中highcharts中如何将数据绑定到Linechart？

> ID：12159821
> 
> 赞同：0
> 
> 时间：2012-08-28T13:00:41.703
> 
> 标签：asp.net-mvc-3, highcharts, linechart

> **可能重复：**
> [如何将数据绑定到 MVC3 中 highcharts 中的折线图？](https://stackoverflow.com/questions/12177198/how-to-bind-data-to-line-chart-in-highcharts-in-mvc3)

我的实体框架中有两个过程..以及将数据作为json返回的方法..我如何在我的单一方法中调用这两个过程，我必须将这两个过程作为单个json对象返回......并且在我的 jquery 中将此数据返回到我的 .$getJson 方法...任何人都可以告诉我如何执行此操作，并且返回的数据应该绑定到 highcharts 的 Linechart 作为两条单独的行可以告诉我如何实现这一点

```
 public ActionResult LoggedBugs()
    {
        return View();  
    }

    public JsonResult CreatedBugs()
    {
        int year;
        int month;
        int projectid;
        year=2012;
        month=8;
        projectid=16;
        var loggedbugs = db.ExecuteStoreQuery<LoggedBugs>("LoggedBugs @Year,@Month,@ProjectID", new SqlParameter("@Year", year), new SqlParameter("@Month", month), new SqlParameter("@ProjectID", projectid)).ToList();
        var ClosedBugs= db.ExecuteStoreQuery<ClosedBugs>("ClosedBugs @Year,@Month,@ProjectID", new SqlParameter("@Year", year), new SqlParameter("@Month", month), new SqlParameter("@ProjectID", projectid)).ToList();
        return Json(loggedbugs, JsonRequestBehavior.AllowGet);
    } 
```

我想将loggedbugs和Closedbugs作为json对象返回到我的视图中，从那里我必须将此数据绑定到Linechart...这里loggedbugs应该有一行而Closedbugs应该有另一行......在这里期待帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:08:38.837

与 MVC 应用程序中的往常一样，首先定义一个视图模型，该模型将包含您的视图所需的信息（在您的情况下，这将是已记录和已关闭的错误列表）：

```
public class BugsViewModel
{
    public string IEnumerable<LoggedBugs> LoggedBugs { get; set; }
    public string IEnumerable<ClosedBugs> ClosedBugs { get; set; }
} 
```

然后让您的控制器操作填充将传递给视图的视图模型：

```
public ActionResult CreatedBugs()
{
    var year = 2012;
    var month = 8;
    var projectid = 16;
    var loggedbugs = db.ExecuteStoreQuery<LoggedBugs>("LoggedBugs @Year,@Month,@ProjectID", new SqlParameter("@Year", year), new SqlParameter("@Month", month), new SqlParameter("@ProjectID", projectid)).ToList();
    var closedBugs = db.ExecuteStoreQuery<ClosedBugs>("ClosedBugs @Year,@Month,@ProjectID", new SqlParameter("@Year", year), new SqlParameter("@Month", month), new SqlParameter("@ProjectID", projectid)).ToList();
    var model = new BugsViewModel
    {
        LoggedBugs = loggedBugs,
        ClosedBugs = closedBug
    };
    return Json(model, JsonRequestBehavior.AllowGet);
} 
```

# asp.net - GridView RowDataBound 事件处理程序找不到 GridView 单元格内容

> ID：12159825
> 
> 赞同：0
> 
> 时间：2012-08-28T13:00:48.923
> 
> 标签：asp.net, gridview, rowdatabound

我有以下内容`GridView`，其中`DataSource`包括`List<T>`：

```
<asp:GridView ID="gvDownloads" UseAccessibleHeader="False"
              AutoGenerateColumns="False" runat="server" PageSize="10" AllowPaging="true" 
              CellPadding="4" CellSpacing="1" GridLines="None" DataKeyNames="productid">
             <EmptyDataTemplate>
                No licenses found 
             </EmptyDataTemplate>
             <Columns>
                <asp:TemplateField HeaderText="Id" >
                   <ItemTemplate>
                       <%# Eval("ProductId")%>
                   </ItemTemplate>
                </asp:TemplateField> 
                <asp:TemplateField HeaderText="Product Name">
                   <ItemTemplate>
                       <%# Eval("ProductName")%>
                   </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Stock Code">
                   <ItemTemplate>
                       <%# Eval("StockCode")%>
                   </ItemTemplate>
                </asp:TemplateField>
            </Columns>
</asp:GridView> 
```

哪个正确渲染并具有正确的值。

现在，我想动态修改**StockCode**字段，为此我在我的代码后面：

```
Sub gvDownloads_RowDataBound(ByVal sender As Object, ByVal e As GridViewRowEventArgs) Handles gvDownlads.RowDataBound

    If e.Row.RowType = DataControlRowType.DataRow Then

         e.Row.Cells(2).Text = StockCodeConverter.Convert(e.Row.Cells(2).Text)

    End If
End Sub 
```

**但是StockCode**对应的数据单元格是空的。现在我尝试调试，由于某种原因，代码只找到了标题行的值。其他行的值为`string.Empty`or &nsbp。它可能依赖于列表作为数据源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:19:04.987

改用 ASP.NET 控件，例如[`Labels`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.label.aspx)：

```
If e.Row.RowType = DataControlRowType.DataRow Then
     Dim lblStockCode = DirectCast(e.Row.FindControl("lblStockCode"), Label)
    lblStockCode.Text = StockCodeConverter.Convert(lblStockCode.Text)
End If 
```

在 aspx 上：

```
<asp:TemplateField HeaderText="Stock Code">
    <ItemTemplate>
        <asp:Label Id="LblStockCode" runat="server" Text='<%# Eval("StockCode") %>'></asp:label>
    </ItemTemplate>
</asp:TemplateField> 
```

您甚至可以省略`Eval`on aspx 并`Text`在代码隐藏中完全设置属性：

```
If e.Row.RowType = DataControlRowType.DataRow Then
     Dim row = DirectCast(e.Row.DataItem, DataRowView)
     Dim lblStockCode = DirectCast(e.Row.FindControl("lblStockCode"), Label)
    lblStockCode.Text = StockCodeConverter.Convert(row["StockCode"].ToString)
End If 
```

**编辑**：如果你想保留你的文本并且你可以在单元格中转换第一个控件，这是在只有文本时`TemplateField`自动生成的，并使用它的属性。[`DataBoundLiteralControl`](http://msdn.microsoft.com/en-us/library/system.web.ui.databoundliteralcontrol.aspx)`Text`

```
Dim StockCode = DirectCast(e.Row.Cells(2).Controls(0), DataBoundLiteralControl).Text 
```

但在我看来，这会降低您的代码的可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:26:56.493

我认为在 GridView RowDataBound 事件中，因为绑定仍在进行中，您没有获得任何价值...我建议您使用“DataRowView”

```
DataRowView drv = (DataRowView)e.Row.DataItem;
e.Row.Cells(2).Text = drv["StockCode"].ToString(); 
```

# categories - 如何在opencart中显示从子类别到父类别的产品？

> ID：12159827
> 
> 赞同：10
> 
> 时间：2012-08-28T13:00:50.797
> 
> 标签：categories, product, opencart

我正在尝试找到解决方案，但仍然没有运气。我想显示从子类别到父类别的所有产品。

我正在使用 Opencart 1.5.3.1

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-24T23:33:16.683

看完源码后，我明白了：

在 catalog/controller/product/category.php （或任何你调用函数 model_catalog_product->getProducts 的地方）你必须添加`filter_sub_category = true`：

```
$data = array(
    'filter_category_id' => $top_category,
    'filter_sub_category' => true,
    'sort'               => $sort,
    'order'              => $order,
    'start'              => ($page - 1) * $limit,
    'limit'              => $limit
);

$product_total = $this->model_catalog_product->getTotalProducts($data); 
```

如果您使用的是更高版本，请确保检查其他答案；）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-19T19:37:08.110

另一种解决方案，而不是直接修改核心文件，是使用[vQmod](http://code.google.com/p/vqmod/)为您修改文件。这样，当您升级到新版本时，您不必重新安装您所做的任何自定义修改。

以下是您在 vQmod 中用于完成此操作的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<modification>
    <id>Display products in sub-categories while browsing a parent category</id>
    <version>1.0.0</version>
    <vqmver>2.4.0</vqmver>
    <author>Jay Williams - jay@myd3.com</author>
    <file name="catalog/controller/product/category.php">
        <operation>
            <search position="after"><![CDATA['filter_category_id' => $category_id,]]></search>
            <add><![CDATA['filter_sub_category' => true,]]></add>
        </operation>
    </file>
</modification> 
```

来源：[https ://gist.github.com/jaywilliams/8044763](https://gist.github.com/jaywilliams/8044763)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-11T08:38:31.430

目录/控制器/产品/category.php

对于 Opencart 版本 2.1.0.2，Ignacio 的解决方案也可以正常工作：

> `$data (of version 1.5.x)`现在被称为
> 
> `$filter_data (line #169)`

然后只需添加该行

'filter_sub_category' => 真，

第 170 行 ( `'filter_category_id' => $category_id,`)之后

谢谢伊格纳西奥！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-17T01:06:37.973

vqmod 方法是最好的并且很容易工作。只需添加该文件和anything.xml 并将其放在vqmod > xml

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-16T03:41:42.967

只需提供更多信息，最新版本使用 OpenCart 自己的 vqmod 功能“ocmod”。它可以通过那里以相同的方式工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-18T12:45:43.460

对于 Opencart 3.x：./catalog/controller/product/category.php

寻找：

```
'filter_category_id' => $category_id, 
```

之后添加：

```
'filter_sub_category' => true, 
```

**更改文件后，转到“修改”和“清除”和“更新”按钮单击**

# python - 在运行 Python 的 selenium webdriver 时传递参数

> ID：12159830
> 
> 赞同：1
> 
> 时间：2012-08-28T13:00:59.780
> 
> 标签：python, selenium, arguments, webdriver

我正在为我的 python 测试用例使用 selenium python webdriver。我有一个 Python 脚本 NowSpots_Traffic.py，我试图从 Ubuntu 终端运行它（类似于 Windows 中的命令提示符）

python /home/vijay/Projects/SeleniumScripts/NowSpots_Traffic.py 塞缪尔分泌

其中 samuel 和 secrete 是我需要传递给我的 python 脚本 NowSpots_Traffic.py 的两个参数

我按照[使用 Selenium 2 和 WebDriver 在 Python 中运行测试](http://simeonvisser.com/2/running-tests-in-python-with-selenium-2-and-webdriver/) 部分“多个浏览器和多个平台”中的说明进行操作。

但我收到以下错误消息

```
Traceback (most recent call last):
  File "/home/vijay/Projects/SeleniumScripts/NowSpots_Traffic.py", line 43, in <module>
    unittest.main()
  File "/usr/lib/python2.7/unittest/main.py", line 94, in __init__
    self.parseArgs(argv)
  File "/usr/lib/python2.7/unittest/main.py", line 152, in parseArgs
    self.createTests()
  File "/usr/lib/python2.7/unittest/main.py", line 161, in createTests
    self.module)
  File "/usr/lib/python2.7/unittest/loader.py", line 128, in loadTestsFromNames
    suites = [self.loadTestsFromName(name, module) for name in names]
  File "/usr/lib/python2.7/unittest/loader.py", line 100, in loadTestsFromName
    parent, obj = obj, getattr(obj, part)
AttributeError: 'module' object has no attribute 'samuel' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:08:49.180

Unittest.main() 函数使用您传入的参数来确定要运行的测试用例。见这里：[测试发现](http://docs.python.org/library/unittest#test-discovery)

如果您的脚本还需要参数，您需要在调用之前从 sys.argv 中删除它们

```
unittest.main() 
```

# jquery - 使用带有 jquery 的弹出窗口

> ID：12159833
> 
> 赞同：0
> 
> 时间：2012-08-28T13:01:09.907
> 
> 标签：jquery, asp.net-mvc-3

我在弹出窗口的下拉菜单中单击特定选项时显示一个弹出窗口我正在使用文本框和单击保存按钮时的保存按钮文本框的值已保存到数据库中

现在我想在下拉列表中显示当前添加选项。我无法在下拉列表中显示它。

我正在使用以下代码

```
 var myselect = $('Select');
                var othercountry = getValue1("txtCountry");
                $.each(othercountry, function (val, text) {
                    othercountry.append($('<option></option>').val(val).html(text));

                }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:14:38.453

```
var option = $('<option />');
$('#select').append(option);

option.val('valueToAdd').html('visibleText'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:09:08.857

我已经为你做了一个演示，我认为你所要求的......让我知道。

[http://jsfiddle.net/AZ5Sm/44/](http://jsfiddle.net/AZ5Sm/44/)

# java - 如何以编程方式自定义 Eclipse 透视图？

> ID：12159834
> 
> 赞同：6
> 
> 时间：2012-08-28T13:01:11.183
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp, rcp

当我右键单击透视并选择自定义以获取此窗口时，我想做出与我相同的行为

![在此处输入图像描述](../Images/46b41b5ee6c55a36d9c50c59be11ba72.png)

我只想以编程方式为我的视角自定义菜单和工具栏。

实际上，我只想在我的视角中删除大多数菜单和工具栏，并在我更改为任何其他视角时让它们再次出现你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:16:11.953

[本](http://esalagea.wordpress.com/2011/08/12/eclipse-rcp-customize-the-toolbar-and-menus-for-a-given-perspective-contributions-using-java-code/)指南展示了如何基于当前视角以编程方式自定义工具栏，并提示菜单的解决方案非常相似。

此外，您的屏幕截图中的 UI 代码可[在此处](http://git.eclipse.org/c/platform/eclipse.platform.ui.git/tree/bundles/org.eclipse.ui.workbench/Eclipse%20UI/org/eclipse/ui/internal/dialogs/CustomizePerspectiveDialog.java)获得，并且可能包含一些有关如何操作的有用提示。

# jquery - 是否可以在 jquery 的 css() 的括号内使用 CSS 类？

> ID：12159840
> 
> 赞同：4
> 
> 时间：2012-08-28T13:01:30.710
> 
> 标签：jquery, css, css-selectors

我正在尝试动态设置元素的 CSS。我可以在 JQuery 的 css() 的括号内使用 CSS 类吗？

我查看了[http://api.jquery.com/css/](http://api.jquery.com/css/)但在上面找不到任何东西。

要清楚，而不是使用多个 CSS 项执行以下操作：

```
 $("div").css("background-color":"yellow", "color":"blue"); 
```

我希望能够按照以下方式做一些事情：

```
 $("div").css('.abc'); 
```

（其中 'abc' 是样式表中包含多条 CSS 行的类）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T13:02:34.390

我不认为你可以。但你可以使用：

`$("div").addClass("abc");`

[.addClass()](http://api.jquery.com/addClass/)

这是您可以在 jquery 中使用的所有类属性：[这里](http://api.jquery.com/category/manipulation/class-attribute/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T13:02:50.640

为什么不使用[`.addClass('abc')`](http://api.jquery.com/addClass/)？有一整套[相关功能](http://api.jquery.com/category/manipulation/class-attribute/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T13:03:23.907

使用[addClass](http://api.jquery.com/addClass/)方法向对象添加一个类。

```
$("div").addClass("abc"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-28T13:03:45.827

是的，您可以很容易地做到这一点，但不能使用`.css`. 你会想要使用`.addClass`.

它看起来像这样：

```
$('div').addClass('abc'); 
```

请注意，您只需要类名，而不是`.`之前的类名。

还有一个`removeClass`，令人惊讶的是，它删除了一个类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T13:04:22.283

我不确定您要做什么，但是：

*   `$('div').addClass('abc')`您可以使用或将类添加到 div`$('div').attr('class','abc')`
*   您可以使用该类设置样式`$('.abc').css(...)`
*   您可以使用该类为 div 设置样式`$('div.abc').css(...)`

# iphone - 我应该使用哪个启动图像？

> ID：12159844
> 
> 赞同：1
> 
> 时间：2012-08-28T13:01:49.407
> 
> 标签：iphone

我正在为 iphone 构建一个游戏，主窗口在背景中显示一个描述游戏的图像，我还有一些其他的图像层，例如“开始新游戏”、“选项”和“帮助”等按钮。

启动图像应该只是描述游戏的背景图像而没有额外的图像层，还是应该是包括其他层的图像，即开始新游戏、选项和帮助？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:09:09.077

启动图像应该给人一种应用程序启动速度非常快的错觉。因此，在您的情况下，更好的形象是您的提案的混合体。

您应该拥有描述游戏的背景图像，其中包含额外的图像层，而按钮内没有文本（开始新游戏等）。如果您包含文本，用户可能会认为您的应用程序已加载并会点击它。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:09:17.280

所有关于启动图像的 Apple 指南都可以[在此处找到](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html)（向下滚动到“启动图像”部分）。根据示例显示和观察其他 Apple 应用程序，似乎约定是显示按钮而不是表格视图数据。

可能由您决定哪个看起来更好。我在应用商店中看到许多应用完全忽略了所有这些你不应该做的事情：

> *   “应用程序入口体验”，例如闪屏
> *   关于窗口
> *   品牌元素，除非它们是应用程序首屏的静态部分

所以我认为这对于 App Store 的接受度并不那么重要，但对于用户体验来说却非常重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T13:11:42.960

可以在[此处](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)找到涵盖发射图像的位。下面是 Apple 提供的示例启动图像（左）。

他们的文档特别关注本地化，因此最好不要使用文本并提供仅具有视图背景镶边的图像。

![在此处输入图像描述](../Images/bcc897290625883bd0fa145ac33ed0dc.png)

# javascript - 用 mocha 测试异步函数

> ID：12159846
> 
> 赞同：31
> 
> 时间：2012-08-28T13:01:54.070
> 
> 标签：javascript, node.js, testing, tdd, mocha.js

我想测试一个在 node.js 中运行并向 http api 发出简单请求的异步 javascript 函数：

```
const HOST = 'localhost';
const PORT = 80;

http = require('http');

var options = {
    host: HOST,
    port: PORT,
    path: '/api/getUser/?userCookieId=26cf7a34c0b91335fbb701f35d118c4c32566bce',
    method: 'GET'
};
doRequest(options, myCallback);

function doRequest(options, callback) {

    var protocol = options.port == 443 ? https : http;
    var req = protocol.request(options, function(res) {

        var output = '';
        res.setEncoding('utf8');

        res.on('data', function(chunk) {
            console.log(chunk);
            output += chunk;
        });

        res.on('error', function(err) {
            throw err;
        });

        res.on('end', function() {
            var dataRes = JSON.parse(output);
            if(res.statusCode != 200) {
                throw new Error('error: ' + res.statusCode);
            } else {
                try {
                    callback(dataRes);                        
                } catch(err) {
                    throw err;
                }
            }
        });

    });

    req.on('error', function(err) {
        throw err;
    });

    req.end();

}

function myCallback(dataRes) {
    console.log(dataRes);
} 
```

执行此代码有效，响应将按预期显示。

如果我在 mocha 测试中执行此请求，则不会执行请求：

```
describe('api', function() {
    it('should load a user', function() {
        assert.doesNotThrow(function() {
            doRequest(options, myCallback, function(err) {
                if (err) throw err;
                done();
            });
        });
        assert.equal(res, '{Object ... }');
    });
}); 
```

问题是，之后没有代码：

```
var req = protocol.request(options, function(res) { 
```

甚至不会执行简单的 console.log。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-25T09:46:18.183

您必须将回调指定`done`为提供给 mocha 的函数的参数 - 在本例中为`it()`函数。像这样：

```
describe('api', function() {
    it('should load a user', function(done) { // added "done" as parameter
        assert.doesNotThrow(function() {
            doRequest(options, function(res) {
                assert.equal(res, '{Object ... }'); // will not fail assert.doesNotThrow
                done(); // call "done()" the parameter
            }, function(err) {
                if (err) throw err; // will fail the assert.doesNotThrow
                done(); // call "done()" the parameter
            });
        });
    });
}); 
```

此外， 的签名`doRequest(options, callback)`指定了两个参数，但是当您在测试中调用它时，您提供了三个。

摩卡大概是找不到方法了`doRequest(arg1,arg2,arg3)`。

它没有提供一些错误输出吗？也许您可以更改 mocha 选项以获取更多信息。

**编辑 ：**

andho 是对的，第二个断言将被并行调用，`assert.doesNotThrow`而它只应在成功回调中调用。

我已经修复了示例代码。

**编辑2：**

或者，为了简化错误处理（参见 Dan M. 的评论）：

```
describe('api', function() {
    it('should load a user', function(done) { // added "done" as parameter
        assert.doesNotThrow(function() {
            doRequest(options, function(res) {
                assert.equal(res, '{Object ... }'); // will not fail assert.doesNotThrow
                done(); // call "done()" the parameter
            }, done);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-14T15:12:50.087

如果您有一个不支持回调的异步函数，或者如果您认为使用不必要的回调是……不必要的，那么您也可以将测试转换为异步测试。

代替：

```
it('should be able to do something', function () {}); 
```

只需这样做：

```
it('should be able to do something', async function () {});
                                     ^^^^^ 
```

现在您可以`await`异步函数：

```
it('should be able to do something', async function () {
  this.timeout(40000);

  var result = await someComplexFunction();

  assert.isBelow(result, 3);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-25T08:00:18.560

我在我的项目中为 http 客户端做了一个非常相似的测试。我把代码贴在这里，希望有用。这是客户端（我的 nodejs 服务器使用 express，我使用 promise 进行错误处理）：

```
var http = require('http');
var querystring = require('querystring');

module.exports = {
  get: function(action, params, res, callback) {
    doPromiseRequest(action, querystring.stringify(params), callback, 'GET', 'application/json')
      .then((response) => callback(response))
      .catch((error) => {
        res.status(500);
        res.render('error', {layout: false, message: error.message, code: 500});
      });
  },
}

function doPromiseRequest(action, params, callback, method, contentType) {
    var options = {
      hostname: 'localhost',
      port: 3000,
      path: '/api/v1/' + action.toString(),
      method: method,
      headers: {
        'Content-Type': contentType,
        'Content-Length': Buffer.byteLength(params)
      }
    };

    return new Promise( (resolve, reject) => {

      var req = http.request(options, 
        function(response) {
          response.setEncoding('utf8');

          var data = '';
          response.on('data', function(chunk) {
            data += chunk;
          });

          response.on('end', function() {
            var parsedResponse;

            try {
              parsedResponse = JSON.parse(data);
            } catch(err) {
              reject({message: `Invalid response from hurricane for ${action}`});
              return;
            }

            if (parsedResponse.error)
              reject(parsedResponse.error);
            else
              resolve(parsedResponse);
          });

          response.on('error', function(err){
            console.log(err.message);
            reject(err);
          });
        });

      req.on('error', function(err) {
        console.log(err);
        reject({message: err.message});
      });

      req.write(params);
      req.end(); 
    });    
} 
```

这是测试：

```
var http = require('http');
var expect = require('chai').expect;
var sinon = require('sinon');
var PassThrough = require('stream').PassThrough;

describe('Hurricane Client tests', function() {
  before(function() {
    this.request = sinon.stub(http, 'request');
  });

  after(function() {
    http.request.restore();
  });

  it('should convert get result to object', function(done) {
    var expected = { hello: 'world' };
    var response = new PassThrough();
    response.statusCode = 200;
    response.headers = {}
    response.write(JSON.stringify(expected));
    response.end();

    var request = new PassThrough();

    this.request.callsArgWith(1, response).returns(request);

    client.get('any', {}, null, function(result) {
      expect(result).to.eql(expected);
      done();
    });
  });
}); 
```

# ios - 对于 iOS 项目，我应该在 Delphi XE2 中使用什么 XML 解析器？

> ID：12159849
> 
> 赞同：3
> 
> 时间：2012-08-28T13:01:58.437
> 
> 标签：ios, xml, windows, delphi, parsing

我找不到兼容的解析器，它可以在 Delphi XE2 中的 Windows 上使用，并且在将 Firemonkey iOS App 导出到 Mac OS 上的 Xcode 之后。什么解析器与 iOS 兼容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:06:40.840

我相信[NativeXML](http://www.simdesign.nl/nativexml.html)与 Windows、Mac 和 iOS 兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T14:01:38.787

Jedi CodeLibrary 具有内置的 XML 引擎。他们也将 FreePascal 作为他们的目标。

据报道，还有一种纯帕斯卡实现：[http](http://gurin.tomsknet.ru/delphixml.html) ://gurin.tomsknet.ru/delphixml.html ，页面底部的下载链接

通常，您最好去 FreePascal 论坛并在那里询问与 Delphi 兼容的 XML 库。

# android - 为什么这个图像切换代码有内存泄漏？

> ID：12159852
> 
> 赞同：1
> 
> 时间：2012-08-28T13:02:08.327
> 
> 标签：android, memory-leaks, imageview

我正在编写一个简单的 android 应用程序，它使用`ImageView`来显示图像。单击按钮时，它将根据当前图像生成一个新的位图，并替换旧的位图。

我使用的图像不大：**220 x 213**。

但是在模拟器中，当我**第五**次点击按钮时，会抛出一个错误：

```
 java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

我读过一些文章：

1.  [java.lang.OutOfMemoryError：位图大小超出 VM 预算 - Android](https://stackoverflow.com/questions/1949066/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget-android)
2.  [http://androidactivity.wordpress.com/2011/09/24/solution-for-outofmemoryerror-bitmap-size-exceeds-vm-budget/](http://androidactivity.wordpress.com/2011/09/24/solution-for-outofmemoryerror-bitmap-size-exceeds-vm-budget/)
3.  [http://android-developers.blogspot.de/2009/01/avoiding-memory-leaks.html](http://android-developers.blogspot.de/2009/01/avoiding-memory-leaks.html)

但仍然无法解决我的问题。

我的代码是：

```
public class MyActivity extends Activity {
    private Bitmap image;
    private ImageView imageView;
    private Button button;

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        this.button = (Button) findViewById(R.id.button);
        this.imageView = (ImageView) findViewById(R.id.image);

        this.image = BitmapFactory.decodeResource(getResources(), R.drawable.m0);
        this.imageView.setImageBitmap(image);

        this.button.setOnClickListener(new View.OnClickListener() {
            private int current = 0;

            @Override
            public void onClick(View view) {
                Bitmap toRemove = image;
                Matrix matrix = new Matrix();
                matrix.setRotate(30, 0.5f, 0.5f);
                image = Bitmap.createBitmap(image, 0, 0, image.getWidth(), image.getHeight(), matrix, true);
                imageView.setImageBitmap(image);

                if (toRemove != null) {
                    toRemove.recycle();
                }
            }
        });
    }
} 
```

你可以看到我`toRemove.recycle()`在删除图像上调用了。不过好像没什么效果。

* * *

更新：

由于该错误仅在我第 5 次（不是第一次）单击按钮时发生，我们可以看到图像大小没有问题。在我的代码中，我尝试在生成新图像后释放旧图像，所以我认为旧图像没有正确释放。

我已经调用`toRemove.recycle()`了，这是发布图像的正确方法吗？还是我应该用别的东西？

* * *

最后：

埃米尔是对的。我添加了一些代码来记录大小，您可以看到它每次都在增加：

```
08-28 13:49:21.162: INFO/image size before(2238): 330 x 320
08-28 13:49:21.232: INFO/image size after(2238): 446 x 442
08-28 13:49:31.732: INFO/image size before(2238): 446 x 442
08-28 13:49:31.832: INFO/image size after(2238): 607 x 606
08-28 13:49:34.622: INFO/image size before(2238): 607 x 606
08-28 13:49:34.772: INFO/image size after(2238): 829 x 828
08-28 13:49:37.153: INFO/image size before(2238): 829 x 828
08-28 13:49:37.393: INFO/image size after(2238): 1132 x 1132 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T14:04:13.917

我不太确定 Bitmap.createBitmap() 是如何工作的，但考虑到错误与“位图大小”有关

```
java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

我会假设图像的大小随着每次点击而增加。因此在第 5 次点击时发生错误。

我建议尺寸增加与旋转矩阵有关。旋转图像时，它似乎没有将旋转后的图像裁剪为图像的宽度和高度，而是增加了图像的大小。

您将不得不尝试一些替代方法来在您想要的 w/h 范围内操纵旋转。

这个问题的答案（两下）显示了如果您愿意，如何裁剪旋转的图像。 [Android：如何在中心点旋转位图](https://stackoverflow.com/questions/4166917/android-how-to-rotate-a-bitmap-on-a-center-point)

```
RectF rectF = new RectF(0, 0, source.getWidth(), source.getHeight());
matrix.mapRect(rectF); 
```

# objective-c - 修复 NSString 中的 unicode 字符

> ID：12159853
> 
> 赞同：1
> 
> 时间：2012-08-28T13:02:22.450
> 
> 标签：objective-c, ios, nsstring, character

我从 Google Directions API 收到一个字符串响应，其中包含应该表示不同语言字符的字符。类似于 ∆ß¬≥，类似于这些类型的字符。我认为这些字符是葡萄牙语，但无论如何我的字符串包含这样的内容：

\U00e3o

（我不确定这些是零还是'O'）

我不确定这些字符的技术术语是什么，但我怎样才能在我的字符串中修复它们以便它们正确打印。

谢谢

更新：

我已经用正确的术语“unicode”更新了我的问题标题。

我检查了几个问题：

[NSString Unicode 显示](https://stackoverflow.com/questions/6839287/nsstring-unicode-display)

[在 iPhone 上检测 NSString 中的 Unicode 字符](https://stackoverflow.com/questions/1706633/detect-unicode-characters-in-nsstring-on-iphone)

[iOS HTML Unicode 到 NSString？](https://stackoverflow.com/questions/7602693/ios-html-unicode-to-nsstring)

还有其他几个。我遵循了答案，但 unicode 字符不固定。

更新：

这是我从 GDirection 获取响应的代码。

形成请求并获得响应：

```
 AFHTTPClient *_httpClient = [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:@"http://maps.googleapis.com/"]];

    [_httpClient registerHTTPOperationClass: [AFJSONRequestOperation class]];

    [_httpClient setDefaultHeader:@"Accept" value:@"application/json"];

    NSMutableDictionary *parameters = [[NSMutableDictionary alloc] init];

    [parameters setObject:[NSString stringWithFormat:@"%f,%f", location.coordinate.latitude, location.coordinate.longitude] forKey:@"origin"];

    [parameters setObject:[NSString stringWithFormat:@"%f,%f", location2.coordinate.latitude, location2.coordinate.longitude] forKey:@"destination"];

    [parameters setObject:@"false" forKey:@"sensor"];

    [parameters setObject:@"driving" forKey:@"mode"];

    [parameters setObject:@"metric" forKey: @"units"];

    NSMutableURLRequest *request = [_httpClient requestWithMethod:@"GET" path: @"maps/api/directions/json" parameters:parameters];

    request.cachePolicy = NSURLRequestReloadIgnoringLocalCacheData;

    AFHTTPRequestOperation *operation = [_httpClient HTTPRequestOperationWithRequest:request success:^(AFHTTPRequestOperation *operation, id responseObject) {

        NSInteger statusCode = operation.response.statusCode;

        if (statusCode == 200) {

            [self parseResponse:responseObject];

        } else {

        }

    } failure:^(AFHTTPRequestOperation *operation, NSError *error) { }];

    [_httpClient enqueueHTTPRequestOperation:operation];
} 
```

从响应对象中检索信息：

```
- (void)parseResponse:(NSDictionary *)response {

NSString *status = [response objectForKey: @"status"];

if (![status isEqualToString: @"OK"]) {

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:[NSString stringWithFormat: @"Google Directions Response Status: %@", status] delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];

    [alert show];
}
else {

NSArray *routes = [response objectForKey:@"routes"];

NSDictionary *routePath = [routes lastObject];

if (routePath) {

    NSString *overviewPolyline = [[routePath objectForKey: @"overview_polyline"] objectForKey:@"points"];

    legs = [routePath valueForKey: @"legs"];

    if (legs) { 
```

/* 方向集 =============================================== ==================================================== =================================*/

```
 directionOverview = [[NSMutableDictionary alloc] init];

        NSString *legsDis = [NSString stringWithFormat: @"%@", [[legs valueForKey: @"distance"] valueForKey: @"text"]];

        NSString *kmDistance = [self cutStringToPreference: legsDis];

        if (kmDistance) {

            [directionOverview setObject:kmDistance forKey: @"distance"];

            milesLabel.text = kmDistance;

            milesLabel.font = [UIFont fontWithName:@"interstate" size: 20.0];
        }

        NSString *durationText = [NSString stringWithFormat: @"%@", [[legs valueForKey: @"duration"] valueForKey: @"text"]];

        durationText = [self cutStringToPreference: durationText];

        if (durationText) {

            [directionOverview setObject:durationText forKey: @"duration"];
        }                
            NSString *startAddress = [NSString stringWithFormat: @"%@", [legs valueForKey: @"start_address"]];

            startAddress = [self cutStringToPreference: startAddress];

            NSString *endAddress = [NSString stringWithFormat: @"%@", [legs valueForKey: @"end_address"]];

            endAddress = [self cutStringToPreference: endAddress];

            [directionOverview setObject:startAddress forKey: @"origin"];
            [directionOverview setObject:endAddress forKey: @"destination"];

        NSArray *steps = [legs valueForKey: @"steps"];

        if (steps) {

            instructionArray = [[NSMutableArray alloc] init];
            durationArray = [[NSMutableArray alloc] init];
            distanceArray = [[NSMutableArray alloc] init];

            int number = [[[steps lastObject] valueForKey: @"html_instructions"] count];

            for (int i = 1; i <= number; ++i) {

                    NSString *instruction = [[[steps lastObject] valueForKey: @"html_instructions"] objectAtIndex: i-1];

                    instruction = [self cutStringToPreference: instruction];

                    instruction = [self flattenHTML: instruction];

                    instruction = [self stringByDecodingHTMLEntitiesInString: instruction];

                    [instructionArray addObject: instruction];

                    NSString *distance = [[[[steps lastObject] valueForKey: @"distance"] objectAtIndex: i-1] valueForKey: @"text"];

                    [distanceArray addObject: distance];

                    NSString *duration = [[[[steps lastObject] valueForKey: @"duration"] objectAtIndex: i-1] valueForKey: @"text"];

                    [durationArray addObject: duration];

        }
    }
}

    _path = [self decodePolyLine:overviewPolyline];

    NSInteger numberOfSteps = _path.count;

    CLLocationCoordinate2D coordinates[numberOfSteps];
    for (NSInteger index = 0; index < numberOfSteps; index++) {
        CLLocation *location = [_path objectAtIndex:index];
        CLLocationCoordinate2D coordinate = location.coordinate;

        coordinates[index] = coordinate;
    }

    polyLine = [MKPolyline polylineWithCoordinates:coordinates count:numberOfSteps];
    [self.mapView addOverlay:polyLine];
}

}

} 
```

在标签中显示文本：

```
 NSString *overviewAddressText = [NSString stringWithFormat: @"%@ to %@", [directionOverview objectForKey: @"origin"], [directionOverview objectForKey: @"destination"]];

    overviewAddress.text = overviewAddressText; 
```

更新：

[标签图像](https://i.stack.imgur.com/oE7LE.png)

如您所见，在标签中，文本包含这种子字符串：`S/U00e3o`，这是一个包含不受支持的字符的单词。我该如何解决这个问题，以便 unicode 变成这样：São

# eclipse - Eclipse 中的 V8 调试器：逻辑，还是最奇怪的错误？

> ID：12159854
> 
> 赞同：4
> 
> 时间：2012-08-28T13:02:23.490
> 
> 标签：eclipse, node.js, v8, javascript-debugger

我正在编写一个**Node.js**应用程序，其中我使用字符串转换的整数作为键（例如“62616324573”）用数据填充**对象。**对象总是将键**{key:}存储为字符串，这与 javascript****数组**及其**[index]**的工作方式相比是理想的：

数组定义了一百万次`undefined`，定义索引之间的每个索引一次。

但是，我发现我无法正确调试我的新对象，因为`Variables`面板中`Eclipse`显示`Failed to read variables`. 在内部，它们似乎工作正常。

采取以下代码：

```
var util = require('util');
util.debug('Run this with --debug-brk=port, and press Resume (F8) to break at the breakpoint below.');

var debugMe = {
    "1000000000" : {
//  "2011743958" : {
        "some" : 1234,
        "random" : true,
        "data" : undefined
    },
//  "1000000001" : {
//  "8302611133" : {
    "3302611133" : {
        "some" : 12345678,
        "random" : false,
        "data" : null
    }
};

util.debug(JSON.stringify(debugMe)); // Look, it prints fine in all cases. This is internal javascript code.
util.debug('...');
util.inspect(debugMe); // And now it doesn't. This is V8 debugging code.

var breakpoint_here = true; // Set breakpoint here!

// hohoho 
```

设置断点`breakpoint_here`并使用即时中断调试器运行它，例如`node --debug-brk=5858 debugtest.js`. 按下`resume`以从第 1 行跳转到断点。转到您的`Variables`面板并尝试检查`debugMe`：面板将崩溃。

使用 10..00 和 10..01 再试一次。没问题。除了，从它的写入方式来看，这些数字似乎被解析为数组索引（！）。

```
debugMe ->
  [1000000000] -> [Object]
  [1000000001] -> [Object] 
```

现在试试 10..10 和 83..02。突然间，83..33 是普通的`JSON key`而不是数组索引，但 10..00 仍然是数组索引。（？）

```
debugMe ->
  8302611133 ->  [Object]
  [1000000000] -> [Object] 
```

现在尝试 10..00 和 33..33，`Variables`窗口将再次崩溃。这是我所期望的：

```
debugMe ->
  1000000000 -> [Object]
  3302611133 -> [Object] 
```

这就是我**猜测**正在发生的事情，尽管在调试仍然合作的对象时您实际上看不到它：

```
debugMe ->
  [1000000000] -> [Object]
  [1000000001] -> undefined
  // (...) // debugger memory fills up
  [3302611132] -> undefined
  [3302611133] -> [Object] 
```

我猜测的问题是这种情况下的数字都是数组索引并且差异太大，因为调试器会记住 2302611133 次`undefined`，这个问题应该只在`array`使用而不是 JSON时存在`object`。

*   为什么有些数字作为键（字符串）而另一些作为索引？
*   为什么某些索引组合在调试器中起作用，而另一些则不起作用？
*   在我不知道的情况下，“百万次未定义”问题是否也发生在对象上？

让我回顾一下：

*   字符串转换整数“int”的微小差异似乎工作正常，但在调试器中它们变成 [indices]
*   密钥中高达约十亿的巨大差异不起作用，`Variables`窗口崩溃。没有控制台输出。
*   更大的差异再次起作用，但有些成为[索引]，而另一些则保持“关键”。

因为我必须进行手动崩溃测试，所以我花了很长时间才发现问题出在数字上，而不是对象本身的内容上。很难想象问题只影响调试器而不影响应用程序本身，因为它是相同的 (V8) 引擎。我希望有人能指出我遗漏的所有事实和变量。

-更新-

似乎没有人知道这件事。未知的逻辑，也不是已知的错误。我在 Eclipse WDT[提交了一个错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=388346)，尽管我不确定这是行为的根源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:34:38.583

虽然当您的节点应用程序使用大量基于整数的查找时，它可能会引入很多小的重写，但**最简单的解决方法**是引入`potatoesalad`您的代码。

例如

```
var debugMe = {
    "potatoesalad1000000000" : {},
    "potatoesalad3302611133" : {}
}; 
```

现在调试器按预期工作，您至少可以在我们等待知识渊博的人解释此现象时调试您的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:55:00.847

在这里提问，

简而言之：
**这是一个错误**。`potatoesalad`用作解决方法。（见其他答案）

更长：

缺乏回应让我相信没有逻辑，这实际上是一个错误。

起初，我并不清楚错误的来源（Eclipse/WDT/Node/V8），所以我[在 Eclipse](https://bugs.eclipse.org/bugs/show_bug.cgi?id=388346)提交了错误报告。

这个错误原来是`not_eclipse`，所以我在 Chrome 开发工具项目中[重新提交了错误报告。](http://code.google.com/p/chromedevtools/issues/detail?id=75)

这个错误被接受，结果是两个错误：
[问题 76](http://code.google.com/p/chromedevtools/issues/detail?id=76)和
[问题 77](http://code.google.com/p/chromedevtools/issues/detail?id=77)。

# c# - Metro app 在游戏中举办活动

> ID：12159855
> 
> 赞同：0
> 
> 时间：2012-08-28T13:02:23.797
> 
> 标签：c#, events, microsoft-metro, 2d-games

我制作了一个用户导航角色的游戏。由于它是为 PC 和平板电脑（使用 Win8）设计的，因此有两种选择。

1）使用键盘（`Key_Down`和`Key_Up`事件）

2）使用触摸和按住（`Tapped`和`Holding`事件）

不幸的是，事件存在问题`Holding`，因为它会在很*长*一段时间后（我认为是 1 秒）引发。我不得不在那里使用*long*这个词，因为它在游戏中确实是一个很长的时间段。

现在，我需要一个更好的解决方案。游戏中有一个屏幕操纵杆，由四个代表箭头的图像组合而成。**如何通过长按箭头图像使玩家的角色立即连续移动？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:04:03.543

我正在使用 javascript 进行 Metro 应用程序开发，并且我正在使用 MSPointerDown/MSPointerUp 几乎相同。也许它在 c# 中很相似？这个[链接](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj150606.aspx)可以帮助吗？

# python - phemail.py - 没有属性“编码”

> ID：12159856
> 
> 赞同：-2
> 
> 时间：2012-08-28T13:02:24.787
> 
> 标签：python, beautifulsoup

```
root@bt:~# ./phemail.py -g0@*******.com
Gathering emails from domain: ******.com
Traceback (most recent call last):
  File "./phemail.py", line 206, in <module>
  gatherEmails(domain[0],domain[1],p)
  File "./phemail.py", line 51, in gatherEmails
  namesurname = re.sub(' -.*','',a.text.encode('utf8'))
AttributeError: 'NoneType' object has no attribute 'encode' 
```

为什么是 a.text NoneType 类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:36:59.113

`a.text`has no value ( `None`)初始化变量
的行可能有问题。`a`

顺便说一句，我不建议以 root 身份做事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:07:22.197

作为解释，该脚本正在使用 Google 搜索 LinkedIn 的索引页面，特别是出现用户姓名的页面（而不是公司简介、工作、讨论等）。由于目标公司名称和可能是该公司的标准电子邮件格式是已知的（并在脚本的 args 中指定），因此搜索似乎会查找所有提及该公司的 LI 个人资料页面结果，提取名称并生成 e - 来自名称的邮件地址。它不是在抓取电子邮件地址，甚至不是域名——它是在抓取名称。

它实际上表明对 LI 如何使公共配置文件对搜索引擎可见（或对大量垃圾结果的容忍度）缺乏了解，因为您的结果将充满“目录”页面，而不是配置文件。

但除了该战略错误之外，您还使用了错误的脚本 - Google 不支持每个字符的通配符 - 通配符主要表示一个或多个单词可能介于两者之间（或之后/之前 - 但它在两者之间效果最好）换句话说。不过，通配符的行为有点棘手，并且没有完全记录在所有情况下。因此，即使后来没有失败，您的输出也会是出现在非常通用的“站点：”LinkedIn 搜索中的前一百个名称（没有任何公司/域信息）。不确定这对任何人有什么用处？

至于为什么脚本在该特定行上失败，您正在遍历 BeautifulSoup.findAll 调用的输出，以获取搜索结果项的 a-tags。在这种情况下，a.text 的值和类型为“None”，这会导致错误，因为 None 没有 encode() 方法。BeautifulSoup 有很多很棒的快捷方式，但它们可能会让人难以追溯以查找错误。findAll 的结果是一组标签，标签的默认值是像 findAll 一样，所以我认为 a.text 就像在交互循环的单个标签上调用 findAll('text') 。我不能确定为什么这不起作用——我在这台机器上没有 BeautifulSoup——但你应该可以玩一下，看看哪里出了问题。

在相关部分：

```
user_agent = 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.7) Gecko/2009021910 Firefox/3.0.7'
headers={'User-Agent':user_agent,}
p = 10

def gatherEmails(l,domain,p):
    print "Gathering emails from domain: "+domain
    emails = []
    for i in range(0,p):
        url = "http://www.google.co.uk/search?hl=en&safe=off&q=site:linkedin.com/pub+"+re.sub('\..*','',domain)+"&start="+str(i)+"0"
        request=urllib2.Request(url,None,headers)
        response = urllib2.urlopen(request)
        data = response.read()
        html = BeautifulSoup(data)
        for a in html.findAll('a',attrs={'class':'l'}):
            namesurname = re.sub(' -.*','',a.text.encode('utf8'))
            firstname = re.sub(' ([a-zA-Z])+','',namesurname).lower()
            surname = re.sub('([a-zA-Z])+ ','',namesurname).lower()
            sys.stdout.write("\r%d%%" %((100*(i+1))/p))
            sys.stdout.flush()
            if firstname != surname and not re.search('\W',firstname) and not re.search('\W',surname):                
                if l == '0' : # 1- firstname.surname@example.com
                    emails.append(firstname+" "+surname) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T22:05:59.643

您使用的是 3.0.8 之前的 Beautiful Soup 版本。升级以获取 .text、.getText(separator) 和（在 Beautiful Soup 4 中）.get_text(separator)。

# c# - c# WPF WebBrowser

> ID：12159859
> 
> 赞同：0
> 
> 时间：2012-08-28T13:02:35.240
> 
> 标签：c#, wpf, facebook

我正在尝试进行简单的 Facebook 登录。我有一个新窗口，我在其中放置 a`System.Windows.Controls.WebBrowser`然后将其导航到

> [https://www.facebook.com/dialog/oauth?client_id=YOUR_APP_ID&redirect_uri=https://www.facebook.com/connect/login_success.html&response_type=token](https://www.facebook.com/dialog/oauth?client_id=YOUR_APP_ID&redirect_uri=https://www.facebook.com/connect/login_success.html&response_type=token)

但是在我登录后它会将我重定向到

> [https://www.facebook.com/connect/login_success.html](https://www.facebook.com/connect/login_success.html)

我应该有令牌但`System.Windows.Controls.WebBrowser`控制 Source 属性没有给我完整的 URL，给我

`https://www.facebook.com/connect/login_success.html`代替`https://www.facebook.com/connect/login_success.html#access_token=THE_TOKEN&expires_in=7180`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:14:54.607

看看这个[答案（MSDN）](http://social.msdn.microsoft.com/Forums/en/wpf/thread/ffdf22f8-0df4-4ce4-bdee-632e4cbb5fbb) 我想它会解决你的问题！你会需要：

```
<Window x:Class="WpfApplicationTest.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms"
        xmlns:wfi="clr-namespace:System.Windows.Forms.Integration;assembly=WindowsFormsIntegration"
        Title="Window2" Height="300" Width="300">
     <StackPanel>
        <wfi:WindowsFormsHost>
            <wf:WebBrowser Navigated="WebBrowser_Navigated" x:Name="wfwb"/>
        </wfi:WindowsFormsHost>
     </StackPanel>
</Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T18:33:43.073

只需为 c# 添加对 facebook.dll 的引用并制作 webbrowser.Navigated 事件 - 对我有用

```
private void m_WebBrowser_Navigated(object sender, NavigationEventArgs e)
    {
        Uri url = e.Uri;
        FacebookOAuthResult result;
        dynamic fb = new FacebookClient();

        if (fb.TryParseOAuthCallbackUrl(url, out result))
        {
            if (result.IsSuccess)
            {
                AccessToken = result.AccessToken;
                Window window = Window.GetWindow(this);
                window.Close();                    
            }
            else
            {
                var errorDescription = result.ErrorDescription;
                var errorReason = result.ErrorReason;
            }
        }
    } 
```

# asp.net-mvc - 下拉列表为空

> ID：12159860
> 
> 赞同：-2
> 
> 时间：2012-08-28T13:02:35.723
> 
> 标签：asp.net-mvc, html-select

我希望 DropDownList 助手生成一个具有特定 ID 名称的空下拉列表，以便我使用 JQuery 后者将一些数据放入其中。我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:11:02.850

你可以做一个自定义助手

```
public static IHtmlString EmptyDropDownList(this HtmlHelper helper, string id)
{
   return MvcHtmlString.Create(string.Format("<select id=\"{0}\"></select>", id));
} 
```

用法 ：

```
@Html.EmptyDropDownList("test") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:09:53.223

DropDownList 是一个 ListControl。它的项目成员也是控件。如果通过前端向它添加值，服务器将检测到对 ViewState 的篡改。

如果您想从前端添加值，请使用旧的 html`<select>`

# delphi - 使用 IdTCPClient 和 IdTCPServer 发送和接收 TMemoryStream

> ID：12159868
> 
> 赞同：4
> 
> 时间：2012-08-28T13:03:04.010
> 
> 标签：delphi, tcp, indy

我在 XE2 中找到了 Remy Lebeau 的 IdTCP 组件聊天演示，我想玩一下它。（可以在[这里](https://forums.embarcadero.com/thread.jspa?threadID=65247&tstart=105)找到）我想使用这些组件发送图片，最好的方法似乎是使用 TMemoryStream。如果我发送字符串，则连接工作正常，字符串传输成功，但是当我将其更改为 Stream 时，它不起作用。这是代码：

**服务器**

```
procedure TMainForm.IdTCPServerExecute(AContext: TIdContext);
var rcvdMsg: string;
  ms:TMemoryStream;
begin
// This commented code is working, it receives and sends strings.
//  rcvdMsg:=AContext.Connection.IOHandler.ReadLn;
//  LogMessage('<ServerExec> '+rcvdMsg);
//
//  TResponseSync.SendResponse(AContext, rcvdMsg);
  try
    ms:=TMemoryStream.Create;
    AContext.Connection.IOHandler.ReadStream(ms);

    ms.SaveToFile('c:\networked.bmp');
  except
    LogMessage('Failed to receive',clred);
  end;
end; 
```

**客户**

```
procedure TfrmMain.Button1Click(Sender: TObject);
var ms: TMemoryStream;
    bmp: TBitmap;
    pic: TPicture;
    s: string;
begin
  // Again, this code is working for sending strings.
  // s:=edMsg.Text;
  // Client.IOHandler.WriteLn(s);
  ms:=TMemoryStream.Create;

  pic:=TPicture.Create;
  pic.LoadFromFile('c:\Back.png');

  bmp:=TBitmap.Create;
  bmp.Width:=pic.Width;
  bmp.Height:=pic.Height;
  bmp.Canvas.Draw(0,0,pic.Graphic);

  bmp.SaveToStream(ms);
  ms.Position:=0;
  Client.IOHandler.Write(ms);
  ms.Free;
end; 
```

当我尝试从客户端发送流时，不会发生任何可观察到的事情（OnExecute 中的断点不会触发）。但是，当关闭程序时（发送 MemoryStream 之后），会发生两件事：

*   如果首先关闭客户端，则只有这样`except`才能处理该部分（日志显示“接收失败”错误。但是，即使我在 try-except 块的第一行放置了一个断点，它也会以某种方式被跳过并且仅显示错误）。
*   如果首先关闭服务器，IDE 不会从*debug*变回，客户端不会将其状态更改为*断开连接*（就像服务器断开连接时通常所做的那样），并且在客户端也关闭后，来自客户端的访问冲突错误服务器应用程序出现。我想这意味着服务器的一个线程仍在运行并维护连接。但无论我给它多少时间，它都无法完成接收 MemoryStream 的任务。

注意：服务器使用`IdSchedulerOfThreadDefault`and `IdAntiFreeze`，如果这很重要的话。

由于我找不到任何可靠的帮助来改进 Indy 10（这一切似乎都适用于旧的 Indy 10，甚至是 Indy 9），我希望你能告诉我哪里出了问题。谢谢

* * *

**- 回答 -**

**服务器**

```
procedure TMainForm.IdTCPServerExecute(AContext: TIdContext);
var size: integer;
    ms:TMemoryStream;
begin
  try
    ms:=TMemoryStream.Create;
    size:=AContext.Connection.IOHandler.ReadLongInt;
    AContext.Connection.IOHandler.ReadStream(ms, size);

    ms.SaveToFile('c:\networked.bmp');
  except
    LogMessage('Failed to receive',clred);
  end;
end; 
```

**客户**

```
procedure TfrmMain.Button1Click(Sender: TObject);
var ms: TMemoryStream;
    bmp: TBitmap;
    pic: TPicture;
begin
  ms:=TMemoryStream.Create;

  pic:=TPicture.Create;
  pic.LoadFromFile('c:\Back.png');

  bmp:=TBitmap.Create;
  bmp.Width:=pic.Width;
  bmp.Height:=pic.Height;
  bmp.Canvas.Draw(0,0,pic.Graphic);

  bmp.SaveToStream(ms);
  ms.Position:=0;
  Client.IOHandler.Write(ms, 0, True);
  ms.Free;
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T14:18:23.303

只需使用正确的参数：

```
.IOHandler.Write(ms, 0, true); //true ... indicates WriteByteCount

.IOHandler.ReadStream(ms, -1); //-1 ... use ByteCount 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T14:01:13.127

预先发送流的大小，以便服务器知道它必须读取多少字节。

服务器：

```
procedure TMainForm.IdTCPServerExecute(AContext: TIdContext);
var rcvdMsg: string;
  ms:TMemoryStream;
  size : integer;
begin
// This commented code is working, it receives and sends strings.
//  rcvdMsg:=AContext.Connection.IOHandler.ReadLn;
//  LogMessage('<ServerExec> '+rcvdMsg);
//
//  TResponseSync.SendResponse(AContext, rcvdMsg);
  try
    ms:=TMemoryStream.Create;
    try 
     size := AContext.Connection.IOHandler.ReadLongint; 
     AContext.Connection.IOHandler.ReadStream(ms, size, false);
     ms.SaveToFile('c:\networked.bmp');
    finally
     ms.Free;
    end;        
  except
    LogMessage('Failed to receive',clred);
  end;
end; 
```

客户端（固定资源处理）

```
procedure TfrmMain.Button1Click(Sender: TObject);
var ms: TMemoryStream;
    bmp: TBitmap;
    pic: TPicture;
    s: string;
begin
  // Again, this code is working for sending strings.
  // s:=edMsg.Text;
  // Client.IOHandler.WriteLn(s);
  ms:=TMemoryStream.Create;
  pic:=TPicture.Create;
  bmp:=TBitmap.Create;
  try
   pic.LoadFromFile('c:\Back.png');   
   bmp.Width:=pic.Width;
   bmp.Height:=pic.Height;
   bmp.Canvas.Draw(0,0,pic.Graphic);
   bmp.SaveToStream(ms);
   ms.Position:=0;
   Client.IOHandler.Write(ms.Size);
   Client.IOHandler.Write(ms);
  finally
   ms.Free;
   bmp.Free;
   pic.Free;
  end;
end; 
```

# java - 休眠不插入父母

> ID：12159869
> 
> 赞同：0
> 
> 时间：2012-08-28T13:03:04.520
> 
> 标签：java, hibernate, hibernate-mapping

我有两个休眠的映射类：

**SETTLEMENT_MODEL_GROUP**（父级）：

```
@Entity
@Table(name = "MODEL_GROUP")
public class SettlementModelGroup
{

//omitted some not fields

@OneToMany( fetch = FetchType.LAZY, mappedBy = "modelGroup" )
private List<SettlementModel> settlementModels;

} 
```

**SETTLEMENT_MODEL**孩子：

```
@Entity
@Table(name = "MODEL")
public class SettlementModel
{

//omitted some not fields

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "MODEL_GROUP_ID", insertable = false, updatable = false, nullable = false)
private SettlementModelGroup modelGroup;

} 
```

现在我正在对数据库进行简单的插入：

```
 SettlementModel model = new SettlementModel();
  SettlementModelGroup settlementModelGroup = modelManager.getModelGroup( modelGroupId );

  //setting other fields for model
  model.setModelGroup( settlementModelGroup );

  sessionFactory.getCurrentSession().save( model ); 
```

给我：

```
SQL Error: 1400, SQLState: 23000
ORA-01400: cannot insetr NULL into ("MYSCHEMA"."MODEL"."MODEL_GROUP_ID") 
```

为什么休眠不插入父 ID，尽管它存在并被创建？即使在标准输出上给出它也会返回正确的 ID ...

此外，我无法`insertable = false, updatable = false`从**SettlementModel**中删除，因为它在部署期间给了我休眠错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:12:45.230

添加以从父级中`@OneToMany` `cascade = CascadeType.ALL`
删除`nullable = false`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:16:12.200

尝试使用`cascade = CascadeType.ALL`到 hbm 文件中，您在其中定义了 oneToMany 关系

# java - Click() 方法并不总是有效

> ID：12159874
> 
> 赞同：36
> 
> 时间：2012-08-28T13:03:27.380
> 
> 标签：java, selenium, webdriver

我在 Selenium WebDriver 中的测试有问题。`Click`当程序尝试单击按钮时，该事件并不总是有效。在一项测试中一切正常，在其他测试中则不然。

每个测试都从一页开始。首先，用户必须从`select`组件中选择一个选项，然后用户单击一个按钮。

我想知道为什么一次一切正常，而当我第二次运行测试时却不行？

下面是找到并点击按钮的源代码：

```
public void clickContinueBtn() {    
    webElement = driver.findElement(By.xpath("//div[@class='btn magenta_s']/a/span"));
    webElement.click(); 
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-03T10:30:38.810

我遇到了类似的问题。click 方法在其他页面上起作用，然后在特定页面上根本不起作用。

竞争条件导致了问题：

1.  HTML 内容在禁用按钮的情况下呈现。
2.  selenium web 驱动程序脚本在触发 javascript [onload](http://www.w3schools.com/jsref/event_onload.asp)事件之前*执行（或完成执行）*。所以`button.click`会发生在禁用的元素上。什么都不会发生。
3.  然后 javascript onload 事件将触发*（或完成执行）*并且 javascript 将启用该按钮。
4.  我查看了该页面，无法弄清楚为什么我的代码不起作用，因为该按钮在检查时似乎已启用，并且如果我手动单击该按钮，它就起作用了。

一旦我发现这是一个时间问题，我在这里找到了解决方案：[如何让 Selenium Web Driver 等待一个元素可以访问，而不仅仅是存在？](https://stackoverflow.com/questions/9161773/how-can-i-get-selenium-web-driver-to-wait-for-an-element-to-be-accessible-not-j)

用 Ruby 解释解决方案：

```
//This will not return the button until it is enabled.
button = driver.find_element(:xpath,  "//button[@id='myButtonId' and not(@disabled)]")
button.click 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-28T13:23:28.527

您也可以尝试使用基于 Javascript 的替代方法进行点击。代码如下：

```
WebElement element = driver.findElement(By.id("something"));
JavascriptExecutor executor = (JavascriptExecutor)driver;
executor.executeScript("arguments[0].click();", element); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-03-14T13:01:26.137

很多时候它发生是因为浏览器兼容性（主要是在 firefox 上）。所以尝试使用“WebElement.sendKeys(Keys.ENTER);” 代码而不是“webElement.click();”

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-02T14:02:33.023

你确定没有时间问题吗？在找到元素之前创建一个断点并查看您的代码是否运行良好。如果存在时间问题，请在单击按钮之前使用显式等待。另请注意，在实际单击按钮之前，该按钮应该是可单击的（元素必须可见且已启用）。

具有显式等待的解决方案可能如下所示：

```
By by = By.xpath("//div[@class='btn magenta_s']/a/span");
WebDriverWait w = new WebDriverWait(driver, timeout);
WebElement element = w.waitUntil(ExpectedConditions.elementToBeClickable(by);
element.click(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-12-01T06:36:00.850

试试下面的代码有时你故意将注意力转移到你的元素上

```
WebElement element = driver.findElement("yourElement");
        Actions builder = new Actions(driver);
        builder.moveToElement(element).click(element);
        builder.perform(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-30T19:37:28.387

几天前我遇到了类似的问题，我在我的特殊情况下找到了解决方案。===使用 Selenium Webdriver，我想单击“第一个链接”的链接，这将在页面上加载内容。

下面是结构与我的情况类似的部分代码：

```
<li class="first-link">
    <a class="common-style" href="javascript:;" style="padding-left: 15px; padding-right: 15px;">First Link</a>
</li> 
```

===结果是应该找到并单击 Web 元素，但切换到 UI，没有发生任何事情，也没有引发错误（未找到元素，元素未准备好单击，元素禁用等）。

在尝试了几种不同的方法通过（xpath和css，没有尝试通过id尝试，因为在我的情况下没有唯一的id）之后，我能够通过css访问并单击带有Selenium webdriver的元素，具有以下值: `li.first-link a`. 但是，当我尝试使用以下值通过 xpath 访问时，这是在 Firefox 中“找到”但单击没有工作：`.//li[a/text()='First Link']`。

问题是一个轻微的 xpath 语法问题，来自 Firefox 的萤火虫根本没有报告，实际上它找到了链接。

我像这样更改了大括号顺序：`.//li/a[text()='First Link']` 现在它按预期工作，找到并单击了第一个链接，并触发了加载页面的 javascript 代码。

我的发现是： * 这不是时间问题，因此不会发生这种情况，因为您尝试单击未准备好的元素。否则我们已经通过明确的 Selenium 等待解决了这个问题......

*   问题不在于找到元素并且没有触发javascript。您可以尝试直接执行 javascript 代码并手动触发事件，然后看看这不起作用。
*   此问题发生在 Firefox 22 上，可能适用于该浏览器的旧版本。如果这适用于 IE 或 Chrome，我无法提供信息。问题本身是，即使 xpath firefox 上存在语法冲突也不会引发异常，这让您认为您的代码没有任何问题，但确实存在。
*   这是 Firefox 的意外未处理行为。我发现了一个错误报告： [http ://code.google.com/p/selenium/issues/detail?id=4757](http://code.google.com/p/selenium/issues/detail?id=4757)

解决方案建议：验证您的 html 结构，您的 xpath，尝试查找语法问题，找到访问元素的不同方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-31T01:11:08.763

查看您的 xpath，您尚未确定按钮，而是指向其中存在按钮的 span 标签。Selenium 点击 span 而不是按钮。这就是 click() 不起作用的原因。请使用 ID 或名称（如果可用）或更改 xpath 以包含按钮标签。如果您可以发布 html，那么创建 xpath 将很容易。click() 对我来说效果很好，我在一个项目中使用这种方法已经一年多了，而且每次都能正常工作......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-30T13:07:24.640

您可以尝试使用 JavaScriptExecutor 或 Action 类。

```
//JSExecutor
WebElement element = driver.findElement(By.xpath("xpathofyourelement"));
JavascriptExecutor jsExecutor = (JavascriptExecutor)driver;
jsExecutor.executeScript("arguments[0].scrollIntoView();", element);
jsExecutor.executeScript("arguments[0].click();", element);

//Action Class
WebElement element = driver.findElement(By.xpath("xpathofyourelement"));
Actions builder = new Actions(driver);
builder.moveToElement(element).click(element);
builder.perform(); 
```

干杯..！！

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-08-28T13:17:45.890

造成这种情况的一个可能原因是`click()`方法无法`click`在每个元素上分派事件。

因此，您可以`click`在尝试单击的元素上显式触发事件。

# dependency-injection - 服务定位器和依赖注入之间的实际区别是什么？

> ID：12159875
> 
> 赞同：0
> 
> 时间：2012-08-28T13:03:28.367
> 
> 标签：dependency-injection, inversion-of-control, service-locator

我正在经历之前的讨论，其中详细讨论了服务定位器和依赖注入器之间的区别，但我仍然无法理解。我可以在没有任何代码的情况下获得一般响应吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:26:14.377

此代码示例应用了[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)原则：

```
public class UserService : IUserService
{
    private IUserRepository repository;

    // Constructor taking dependencies
    public UserService(IUserRepository repository)
    {
        this.repository = repository;
    }
} 
```

此代码示例使用[服务定位器](http://en.wikipedia.org/wiki/Service_locator_pattern)模式：

```
public class UserService : IUserService
{
    private IUserRepository repository;

    public UserService()
    {
        this.repository = ObjectFactory.GetInstance<IUserRepository>();
    }
} 
```

这是服务定位器模式的一个实现：

```
public class UserService : IUserService
{
    private IUserRepository repository;

    public UserService(Container container)
    {
        this.repository = container.GetInstance<IUserRepository>();
    }
} 
```

甚至这是服务定位器模式的一个实现：

```
public class UserService : IUserService
{
    private IUserRepository repository;

    public UserService(IServiceLocator locator)
    {
        this.repository = locator.GetInstance<IUserRepository>();
    }
} 
```

不同之处在于，使用依赖注入，您将消费者需要的所有依赖注入到消费者中（但仅此而已）。注入它的理想方式是通过构造函数。

使用服务定位器，您可以从某个共享源请求依赖项。在第一个示例中，这是静态`ObjectFactory`类，而在第二个示例中，这`Container`是注入构造函数的实例。最后一个代码片段仍然是服务定位器模式的实现，尽管容器本身是使用依赖注入来注入的。

您应该使用依赖注入而不是服务定位器的重要原因。[这篇文章很好地解释了它](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T14:33:08.210

如果您使用服务定位器，通常意味着您明确要求某个对象为您创建另一个对象，这通常被认为是一种反模式。依赖注入则相反。

假设你有一个名为 Warrior 的类，它有一个武器。使用服务定位器，您可以在 Warrior 的构造函数中向服务定位器请求武器。
使用依赖注入，Weapon 将被注入到 Warrior 的构造函数中，而无需您明确要求它。

# jquery - 这个 jquery 数组有什么问题

> ID：12159876
> 
> 赞同：1
> 
> 时间：2012-08-28T13:03:29.367
> 
> 标签：jquery, arrays, json

可能是一些非常简单的事情，但我无法理解。我有以下命令。这将返回一个 json 数组。

```
var zz = fm.request({
                    data : {cmd : 'url', target : hash},
            preventFail : true,
            options: {async: true},

        })

        alert (zz.cmd); // or alert (zz.url);//  tried every combination I can think of. Must be something wrong with the way I am calling it. 
```

这将输出以下 json。

```
{"url":"https:\/\/test.com\/s\/tx74i3t9cet49xi\/vlc-record-2009-10-03-06h26m55s-http___79.125.42.98_film4_ls_auth%3D2e2fd32b2d221ce406085c03ec01722f-.ts","debug":{"connector":"php","phpver":"5.3.15","time":1.9966609477997,"memory":"4852Kb \/ 3932Kb \/ 128M","upload":"","volumes":[{"id":"l1_","name":"localfilesystem","mimeDetect":"finfo","imgLib":"gd"},{"id":"d2_","name":"dropbox","mimeDetect":"finfo","imgLib":"gd"}],"mountErrors":[]}} 
```

我只需要提醒网址。我越来越不确定，或者什么都没有。

发布请求。

```
cmd         url
target    d2_LzY4NV9DbGllbnRCdWdzXzIueGxzeA
Source   cmd=url&target=d2_LzY4NV9DbGllbnRCdWdzXzIueGxzeA 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:24:21.783

选项哈希后的额外逗号。您可以在 www.jsonlint.org 加上 @Ray 发布的内容验证您的 JSON 数据/哈希

```
{
"data": {
    "cmd": "url",
    "target": "hash"
},
"preventFail": true,
"options": {
    "async": true
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:05:54.240

它应该是`alert(zz.data.cmd)`

# ruby - 状态改变时的红宝石回调

> ID：12159884
> 
> 赞同：4
> 
> 时间：2012-08-28T13:04:15.217
> 
> 标签：ruby, clojure

有没有办法在 ruby​​ 中提供与clojure 中的[add-watch](http://clojuredocs.org/clojure_core/clojure.core/add-watch)类似的功能？我正在寻找一种方法将块/proc/lambda 注册为数据结构上的回调，比如哈希，并在哈希状态发生变化时被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:22:24.953

是的，您可以在 Ruby 中执行此操作，但您需要自己构建基础架构或找到一个库来执行此操作。

由于[Ruby 的“鸭子”类型](http://rubysource.com/making-ruby-quack%E2%80%94why-we-love-duck-typing/)，一个期望 Hash 实例的方法可以被赋予一个看起来、感觉和听起来都像哈希的类实例。接收方法可以将对象视为哈希，一切都会好起来的。

**同时**，您的其他软件将知道它确实是一个`ObservableHash`（或您决定如何称呼它）。并且您将注册您的回调更改方法等。

这是一篇[博客文章](http://pullmonkey.com/2008/01/06/convert-a-ruby-hash-into-a-class-object/)，可帮助您开始创建`ObservableHash`.

最后一个提示：一定要实现*所有*的 Hash 方法。这样接收它的其他方法将无法区分 observable_hash 和 hash 之间的区别。

我的理解是，Rails 的`ActionController#params`“哈希”实际上是一个看起来像哈希（但实际上不是）的类实例。查找它的来源以检查它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:12:07.903

如果这是您所追求的，那么这里有一些面向方面编程的示例：

*   [水族馆](http://aquarium.rubyforge.org/)
*   [纵横比](https://github.com/gcao/aspector)

# iphone - 如何使用 Adob e Flash CS5 在 iPhone 中运行 .swf 文件？

> ID：12159888
> 
> 赞同：-1
> 
> 时间：2012-08-28T13:04:30.497
> 
> 标签：iphone, flash, ios5, flash-cs5

我只有 5 个 .swf 文件，由 Flash Professional CS5 创建。没有 .xml 和 .fla 文件。我从我的团队成员那里得到它。现在我想在 iPhone 中运行那个 .swf 文件。我怎么能在设备中运行它..？我是否需要使用反编译器转换该 .swf 文件，或者是否有任何其他解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:28:19.127

如果它只是简单的动画，那么您可能会幸运地使用 Google 的 Swiffy 工具，该工具可以将 swf 文件转换为可在 iPhone 上运行的 html/svg。

[https://www.google.com/doubleclick/studio/swiffy/](https://www.google.com/doubleclick/studio/swiffy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:47:45.310

iOS 中不支持 Flash。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:00:51.393

不，iOS 不支持 Flash。替代方案您可以在服务器端将 .swf 文件转换为 HTML(5) 并播放。

# android - 在选择其他项目时显示第一项文本的微调器

> ID：12159889
> 
> 赞同：2
> 
> 时间：2012-08-28T13:04:34.257
> 
> 标签：android, spinner, onresume

我有一个 Spinner，它由 onResume() 方法中的 SimpleCursorAdapter 填充。选择也在 onResume: 中设置`spinner.setSelection(x)`。

当我转到另一个活动然后返回此活动时，微调器显示第一个项目的文本，而不是所选项目的文本。

我该如何解决？

**编辑：**这是我的代码：

```
@Override
public void onResume(){
    super.onResume();
    fillSpinner();
}

private void fillSpinner() {
    Db = new DbAdapter(this);
    Db.open();
    final Cursor cursor = Db.getCats(true,true);
    startManagingCursor(cursor);

    String[] from = new String[]{DbAdapter.KEY_NAME};
    int[] to = new int[]{android.R.id.text1};

    SimpleCursorAdapter adapter =
            new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, cursor, from, to);

    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    spinner.setAdapter(adapter);

    spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
            cursor.moveToPosition(pos);
            spinnerval = cursor.getInt(cursor.getColumnIndexOrThrow(DbAdapter._ID));
            Log.d("spinnerval", spinnerval+"");
        }
        public void onNothingSelected(AdapterView<?> parent) {
        }
    });

    spinner.setSelection(0);
    int now = hour*60*60+minute*60;
    Log.d("fillSpinner","now="+now+" / "+now/60.0/60.0);
    cursor.moveToFirst();
    while(cursor.moveToNext()){
        int s = cursor.getInt(cursor.getColumnIndexOrThrow(DbAdapter.KEY_START));
        int e = cursor.getInt(cursor.getColumnIndexOrThrow(DbAdapter.KEY_END));
        if(e<s){
            if(now>s){
                e+=24*60*60;
            }
            else{ 
                s-=24*60*60;
            }               
        }
        if(s<=now&&e>now){
            spinner.setSelection(cursor.getPosition());
        }
    }

    Db.close();

    spinner.invalidate();

} 
```

**EDIT2：**截图：

![在此处输入图像描述](../Images/d0368f9c2e8c3b998115d96085dc55e9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:53:11.840

更改`spinner.setSelection(cursor.getPosition())`为`spinner.setSelection(cursor.getPosition(),true)`成功了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:11:50.553

我也解决了同样的问题。这是我的建议：

在 fillSpinner() 的开头添加

int spinnerDefault = 0;

接下来在设置微调器之前添加更改选择的逻辑。使用它来更改 spinnerDefault 变量。

然后在该行之后：

spinner.setAdapter（适配器）；

添加：

spinner.setSelection(spinnerDefault);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:24:02.290

你已经设置**了 spinner.setSelection(0);**

所以它会默认显示第一项。

# javascript - 更改字体大小时调整 UIWebview 的框架大小

> ID：12159907
> 
> 赞同：2
> 
> 时间：2012-08-28T13:05:40.900
> 
> 标签：javascript, ios, uiwebview, resize

我有一个 UIWebview 我想更改字体大小。为此，我只需使用 javascript ：

```
NSString *jsString = [NSString stringWithFormat:@"document.body.style.webkitTextSizeAdjust= '%d%%'",50];
    [t_webview stringByEvaluatingJavaScriptFromString:jsString]; 
```

问题是当我将字体大小设置为 50% 时，uiwebview 的内容下方有一个很大的空白区域。

我试图通过运行以下 js 将我的 webview 调整为适合实际内容大小的高度，但它总是返回 100% 文本的高度，而不是 50% 和实际的高度：

```
NSLog(@"font size: %i%%",theHeightIWant);
    NSString* t_height = [t_webview stringByEvaluatingJavaScriptFromString:@"document.body.offsetHeight"];
    NSLog(@"height before: %@",t_height);

    NSString *jsString = [NSString stringWithFormat:@"document.body.style.webkitTextSizeAdjust= '%d%%'",theHeightIWant];
    [t_webview stringByEvaluatingJavaScriptFromString:jsString];

    t_height = [t_webview stringByEvaluatingJavaScriptFromString:@"document.body.offsetHeight"];
    NSLog(@"height after: %@",t_height); 
```

---- 日志 ------

```
font size: 95%
height before: 932
height after: 932
font size: 90%
height before: 932
height after: 932
font size: 85%
height before: 932
height after: 932 
```

我也尝试使用 document.documentElement.scrollHeight 而不是 document.body.offsetHeight 但这也不起作用。

谁能帮我？谢谢。

编辑：这是我将 html 加载到 webview 的方式：

```
NSString* t_html = [NSString stringWithFormat:@"<html><body>%@</body></html>",t_htmlPharmaco];
    [webview loadHTMLString:t_html baseURL:[[NSBundle mainBundle] bundleURL]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:57:28.337

我不确定这是否适用于 UIWebView。但在 iOS 中，所有控件（据我所知）在设置内容之前都会设置其高度属性。

话虽这么说，我会在设置 webview 内的内容之前尝试调整字体大小，或者我会按照你的操作方式渲染 webview，然后当 webview 被正确创建时，然后获取它的实例来调整高度。

如果您是否想`UIWebView`在更改内容大小的同时保持大小不变​​，还会出现另一个问题？（如果是这样，请使用@jcesar 的答案）。但是，如果您要更改大小，`UIWebView`则需要更改 webview 大小

# php - 将 Zend_Auth 存储后端 $_SESSION 更改为 Memcached

> ID：12159908
> 
> 赞同：20
> 
> 时间：2012-08-28T13:05:44.640
> 
> 标签：php, zend-framework, zend-auth, zend-session

我正在尝试更改 Zend_Auth 的会话后端。但是没能成功。在我的 bootstrap.php 中；

```
 $oBackend = new Zend_Cache_Backend_Libmemcached(
        array(
            'servers' => $servers,
            'compression' => false
    ) );

    // configure caching frontend strategy
    $oFrontend = new Zend_Cache_Core(
        array(
            'caching' => true,
            'automatic_serialization' => true
        ) );

    // build a caching object
    $cache = Zend_Cache::factory( $oFrontend, $oBackend );

    $saveHandler = new \Application\Auth\Adapter\Memcached();
    $saveHandler->setCacher($cache);

    \Zend_Session::setSaveHandler($saveHandler); 
```

它成功地保存了 Memcache 的值，没有问题。我测试它；

```
 $namespace = new Zend_Session_Namespace();
    $namespace->name = "Fatih"; 
```

在其他控制器中；

```
 $ns = new Zend_Session_Namespace();
    var_dump($ns->name); 
```

没关系，但我在 Memcache 中看不到 Zend_Auth 值。但是，如果我`var_dump($_SESSION)` 能看到它；

```
["Zend_Auth"]=> array(1) { ["storage"]=> object(Application_Security_Auth_Storage)#66 (1) { ["_user":protected]=> object(Application_Security_Auth_User)#84 (4) { ["id":protected]=> object(MongoId)#87 (1) { ["$id"]=> string(24) "4fcca6b8c863c79d33000004" } ["username":protected]=> string(5) "admin" ["role":protected]=> string(5) "admin" ["fullname":protected]=> NULL } } } 
```

在这里你可以看到我的登录方法；

```
public function login($username, $password)
{
    if ($username == "" || $password == "")
        return false;

    $adapter = new \Application_Security_Auth_Adapter();

    $adapter->setIdentity($username);
    $adapter->setCredential($password);

    $auth = \Zend_Auth::getInstance();
    $result = $auth->authenticate($adapter);

    return $result->isValid();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-15T12:59:48.950

我认为这是最简单的方法，它会为你工作

亲爱的使用这个类的 Zend 框架的会话。

使用 Zend\Session\Container；

然后执行以下程序以从 Seesions 中获取值。

```
 $user_session = new Container('user_login');
    $loginUser = $user_session->login_user['user_type']; 
```

$user_session->login_user 在这个变量中我存储所有用户相关信息的数组，如用户类型、用户电子邮件、用户 ID 等......然后我在每个页面上获取这个会话值......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-16T20:23:20.490

我不知道这是否有任何帮助，但是 Zend_auth 会自动创建存储事物，您可以使用它从任何地方访问它

```
$session = new Zend_Session_Namespace('Zend_Auth');
$session->storage->//here goes your property like user id password etc 
```

现在，如果您使用 Zend_Auth，它将使用 Zend_Auth_Storage_Session 默认值“Zend_Auth”作为 Zend_Session_Namespace。现在要更改使用的名称空间，请修改 Zend_Auth_Storage_Session 中的默认值，否则如果您想缓存此信息或将其存储在其他地方，您可以随时访问它并将其移动到您想要的位置。

现在我希望我能帮上忙，但我对内存缓存一无所知

# jquery - IE8 本地存储中的特殊字符问题

> ID：12159909
> 
> 赞同：0
> 
> 时间：2012-08-28T13:05:49.607
> 
> 标签：jquery, html, character-encoding, internet-explorer-8

我编写了一个 jQuery 代码，它调用服务、获取数据并将其存储在本地存储中。在特定事件上，数据会显示在页面中。

我只在 IE8+ 浏览器上遇到中文字符的问题。IE 无法从缓存中读取中文数据，并显示方框代替“首选语言已更新首选语言已更新”。相同的代码在 chrome 和 FF 等其他浏览器上按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:42:06.823

如果您看到方形框，则很可能这是字体问题，而不是字符级别的问题。也就是说，IE 可能正确识别字符但无法呈现它们。

所以这可能取决于显示字符的上下文，尤其是适用的字体设置。通常情况下，IE 8 和更新版本可以显示中文字符，但字体设置可能会阻止这一点。此外，某些 Windows 安装可能缺少任何支持中文字符的字体。

我建议您首先测试字符串在没有字体设置的页面上显示为静态内容时是否在 IE 上正确显示。

# javascript - 什么是依赖于 css 的 javascript 的一个很好的例子？

> ID：12159911
> 
> 赞同：-1
> 
> 时间：2012-08-28T13:05:55.940
> 
> 标签：javascript, performance

对于页面加载速度优化，Google 建议样式和脚本的顺序应该是 CSS 第一，JavaScript 第二。
我明白这是一个很好的做法。

但是在文档中，它说“如果 JS 代码不依赖于 CSS 文件，您可以将 CSS 文件移到 JS 文件之前。如果 JS 代码确实依赖于外部文件中包含的 CSS - 例如，样式这是您在 JS 代码中写入文档所需的输出 - 这是不可能的。”

我无法为后者想出一个具体的例子。

什么是“您在 JS 代码中写入文档所需的输出样式”的一个很好的例子？

文件在[这里](http://developers.google.com/speed/docs/best-practices/rtt#PutStylesBeforeScripts)

编辑：我的目的是找出 JavaScript 绝对需要放在 CSS 文件之前的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:12:19.483

一些简单的例子是，如果您的 JavaScript 需要由 CSS 样式化的特定 HTML 元素的尺寸。

在这种情况下，样式表中的 CSS 应该应用于元素，然后再通过`getComputedStyle()`.

此处的示例可能是为灵活宽度的表格定义粘性表格标题，其中标题的宽度在渲染主体后根据主体的宽度进行设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:07:11.787

我想当你有这样的事情时？

```
$("#someDiv").addClass("my_css_transition"); 
```

通常最好的做法是通过 CSS 使用 add/removeClass 在 JavaScript 中进行所有样式更改，而不是直接使用 JavaScript 设置样式属性。这使您的 JavaScript 依赖于您的 CSS。例如，CSS 可以定义过渡，如 fadeIn 或 slideIn。如果这些需要在页面加载时触发，您需要在 JavaScript 添加类之前加载 CSS。

* * *

尽管这是来自 Google 的合理建议，但要知道这是超级先进的东西。如果您有一个普通的 CMS 或 Wordpress 网站，您不必担心这一点。如果您是 Google、Yahoo 或 Facebook，那么是的，您应该担心它。

# python - Python matplotlib/pylab - 3D 地毯图

> ID：12159912
> 
> 赞同：4
> 
> 时间：2012-08-28T13:06:03.850
> 
> 标签：python, 3d, plot, matplotlib

我想用 Python Pylab 或 matplotlib绘制一个**3D地毯图。**我用地毯图解释我的意思：

我在 X，Y 网格上有点。这些点附加了一个高程，但也有一个来自有限集合的整数。一个常见的 3D 绘图使可视化浮雕成为可能。高程沿 Z，我们可以可视化由其沿 Z 轴的坐标 X，Y 确定的点的高程。或者，我为海拔绘制热图。这是一个二维图，由 X,Y 确定的每个像素都有一个颜色，它是高度的函数，红色表示顶点，蓝色表示底部。我对这些数据进行了一些聚类，聚类后，对于每个像素，我有两个信息：高程和标签（整数）。我可以绘制一个 2D 地图，每个像素都用它的标签着色，这给了我聚类结果。

现在，我想在同一个 3D 图上绘制这两个信息。Z坐标应该是高程，表面上的点应该用它的“集群颜色”着色。这就是我所说的 3D 地毯图（如果术语听起来不正确，请告诉我）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:12:59.230

您的“集群颜色”是网格的 X、Y、Z 值的一组条件。如果您可以将这些设置为（`True/False`值的）掩码，则将颜色映射到它们上很简单。我给出了一个任意条件集的示例，您可以根据自己的需要进行调整。代码改编自[http://matplotlib.sourceforge.net/mpl_toolkits/mplot3d/tutorial.html](http://matplotlib.sourceforge.net/mpl_toolkits/mplot3d/tutorial.html)：

```
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
import numpy as np

# Some sample data
x_side = np.arange(-5, 5, 0.04)
y_side = np.arange(-5, 5, 0.04)
X, Y = np.meshgrid(x_side,y_side)

# Fake mountains
Z = np.exp(-(X**2+Y**2)) + 2*np.exp(-((X-2)**2+Y**2)) 

# Assign colors based off some user-defined condition
COLORS = np.empty(X.shape, dtype=str)
COLORS[:,:] = 'b'
COLORS[(Z>.1) * (Z<.3)] = 'r'
COLORS[Z>.3] = 'g'
COLORS[X+Y < -1] = 'k'

# 3D surface plot
fig = plt.figure()
ax = fig.gca(projection='3d')
surf = ax.plot_surface(X, Y, Z, facecolors=COLORS, rstride=1, cstride=1,
        linewidth=0)
plt.show() 
```

![在此处输入图像描述](../Images/d4997e0c3516e02ba8f2a9302fc39a97.png)

# java - 使用 && 运算符时出错

> ID：12159913
> 
> 赞同：-6
> 
> 时间：2012-08-28T13:06:10.727
> 
> 标签：java

```
public boolean isRight() {
    if(xposition == ( (oposition-1) && (oposition != (12 && 8 && 4))) {
        return true;
    } else {
       return false;
    }
} 
```

“xposition”和“oposition”在程序运行期间被赋值。

错误在于`(12 && 8 && 4)` 我需要确保“oposition”的值不等于 12 和 8 和 4。

我不知道这里有什么问题。请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T13:07:28.323

> 我不知道这里有什么问题。

逻辑。您希望`(12 && 8 && 4)`评估什么？（提示：是`true`）

你认为这`oposition != (12 && 8 && 4)`意味着`opposition`与那些价值观不同吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T13:08:41.240

也许正确的逻辑是：

```
if(xposition == ( (oposition-1) && (oposition != 12 && oposition != 8 && oposition != 4) ) ) 
```

如果你有很多数字：

```
int[] numbers = { 
    12, 8, 4, 13, 2, 7
};
boolean validation = true;
for (int i : numbers) {
    if (oposition == i) {
        validation = false;
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T13:10:43.350

虽然我不知道您的错误消息，但问题可能是您正在将`xposition`（看起来像一个数字）与`operator&&`括号内的结果进行比较。

稍后您还尝试与看起来没有`oposition`用的结果进行比较`(12 && 8 && 4)`，即使语言允许它也是如此。

注意括号。

可能你的意思是这样的：

```
if (xposition == opposition-1
    && opposition != 12
    && opposition != 8
    && opposition != 4)
{
    // ...  
} 
```

当有很多条件时，缩进会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T13:11:12.080

这里的问题是您将布尔语句与（潜在的）int 值进行比较。我认为你需要的是：

```
if((xposition == oposition-1) &&
        (oposition != 12 && oposition != 8 && oposition != 4))) 
```

声明 12 && 8 && 4 没有意义。您*必须*将每个单独的数字与您的变量进行比较。

# iphone - 在片段着色器中将透明纹理覆盖在另一个上时出现黑色边框

> ID：12159915
> 
> 赞同：0
> 
> 时间：2012-08-28T13:06:19.887
> 
> 标签：iphone, opengl-es, opengl-es-2.0, glsl

我的场景由一个平面组成，我用两个纹理对其进行着色。第一个，最底部的纹理是来自 iPhone 相机的实心图像，第二个图像是一种取景器，我需要覆盖在相机输入上（具有透明度）。我在透明纹理中的实体边界处出现了这些黑色暗线。

![实体周围的黑色边框](../Images/f21be7c1373b2ce83180928757d3f82b.png)

我一直在对此进行一些研究，并了解到该工件是插值与预乘 alpha 相结合的结果。由于 XCode 将所有 PNG 图像自动转换为预乘 png，并且我编写的加载图像的代码也尊重预乘 alpha 上下文，所以我有点卡在确切问题所在的位置。

我尝试了以下解决方案：

*   确保 alpha 值为 0 的像素的 rgb 值也设置为 0
*   关闭 xcode 的自动 png 压缩，使其保留我提供的纹理
*   摆弄片段着色器以避免 mix() 调用
*   创建位图上下文时更改了 AlphaInfo 值

重要提示：我没有使用 glBlendFunc()，我将两个纹理一起提供给 1 个片段着色器并尝试将它们混合在一起。所以通过这个 gl-call 的解决方案不会让我更进一步。

这是我用来加载透明纹理的代码：

```
shared_ptr<ImageData> IOSFileSystem::loadImageFile(string path, bool flip) const
{
    cout << path << endl;
    // Result
    shared_ptr<ImageData> result = shared_ptr<ImageData>();

    // Convert cpp string to nsstring
    NSString *convertedPathString = [NSString stringWithCString:path.c_str() encoding:[NSString defaultCStringEncoding]];
    NSString *fullPath = [NSString stringWithFormat:@"%@%@", [[NSBundle mainBundle] resourcePath], convertedPathString];

    // Check if file exists
    if([[NSFileManager defaultManager] fileExistsAtPath:fullPath isDirectory:NO])
    {
        // Load image
        UIImage *image = [[[UIImage alloc] initWithContentsOfFile:fullPath] autorelease];
        CGImageRef imageRef = image.CGImage;

        // Allocate memory for the image
        size_t width = CGImageGetWidth(imageRef);
        size_t height = CGImageGetHeight(imageRef);
        GLubyte *spriteData = (GLubyte*) calloc(width * height * 4, sizeof(GLubyte));

        // Create drawing context
        CGContextRef context = CGBitmapContextCreate(spriteData, width, height, 8, width * 4, CGImageGetColorSpace(imageRef), kCGImageAlphaPremultipliedLast);

        // Flip for OpenGL coord system
        if(flip)
        {
            CGContextTranslateCTM(context, 0, image.size.height);
            CGContextScaleCTM(context, 1.0, -1.0);
        }

        // Draw & release
        CGContextDrawImage(context, CGRectMake(0.0, 0.0, width, height), imageRef);
        CGContextRelease(context);

        // Put result in shared ptr
        // Don't free() the spritedata because our shared pointer will take care of that
        // Since the shared pointer doesn't know how to free "calloc" data, we have to teach it how: &std::free
        shared_ptr<GLubyte> spriteDataPtr = shared_ptr<GLubyte>(spriteData, &std::free);
        result = shared_ptr<ImageData>(new ImageData(path, width, height, spriteDataPtr));
    }
    else
    {
        cout << "IOSFileSystem::loadImageFile -> File does not exist at path.\nPath: " + path;
        exit(1);
    }

    return result;
} 
```

这是我在纹理上设置像素的方法：

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, 
    GL_RGBA, GL_UNSIGNED_BYTE, pixels); 
```

这是片段着色器的精简版本：

```
void main(void)
{
    lowp vec4 camera = texture2D(texture0, destinationTexCoord);
    lowp vec4 viewfinder = texture2D(texture1, destinationTexCoord);

    lowp vec4 result = mix(camera, viewfinder, viewfinder.a);

    gl_FragColor = result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:52:43.507

这可能是因为`premultiplied alpha`在 PNG 图像中。尝试修改混合模式：

```
glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA); // instead of (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:52:09.963

`glBlendFunc`通过调查呼叫的工作方式，我找到了解决问题的方法。我使用[这个编辑器](http://www.andersriggelsen.dk/glblendfunc.php)来检查使用什么公式与`GL_ONE`和混合`GL_ONE_MINUS_SRC_ALPHA`。

这导致了以下片段着色器代码：

```
lowp vec4 camera = texture2D(texture0, destinationTexCoord);
lowp vec4 viewfinder = texture2D(texture1, destinationTexCoord);

lowp vec4 result = viewfinder + camera * vec4(1.0 - viewfinder.a); 
```

# php - 如何从电子邮件表单的“发件人”字段中删除服务器？

> ID：12159917
> 
> 赞同：0
> 
> 时间：2012-08-28T13:06:19.810
> 
> 标签：php, forms, email

我创建了一个基本表单。

当用户填写并发送表单时，在我客户的电子邮件收件箱中，它来自我的服务器名称。

我一直在查看可以编辑它的代码，但我更像是设计师而不是程序员。

我应该寻找什么？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:11:14.267

您只能先为接收器设置一个“显示”的名称。如果接收者查看消息头，他仍然会看到来源（您的服务器）。

这是通常的片段（参见 $headers）

```
<?php
$to      = 'nobody@example.com';
$subject = 'the subject';
$message = 'hello';
$headers = 'From: webmaster@example.com' . "\r\n" .
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:11:16.953

在您的 PHP 函数中，您需要在标题中设置“From”

```
mail("me@domain.com" "Subject", "Body", "From: sender@domain.com"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:13:54.393

```
mail ( string $to , string $subject , string $message [, string $additional_headers [, string $additional_parameters ]] ) 
```

在附加标题中，您可以添加`From`标题，例如：

```
mail("user@domain.com", "Test", "message", "From: user@domain.com BCC:friend@domain.com") 
```

此外，如果我的记忆没有失败，您可以更改默认`From`标题。`php.ini`

# java - IntelliJ Idea 和 Netbeans 如何构建 java 项目？

> ID：12159918
> 
> 赞同：3
> 
> 时间：2012-08-28T13:06:21.760
> 
> 标签：java, maven, netbeans, ant, intellij-idea

IntelliJ Idea 和 Netbeans 如何构建 java 项目？他们使用 Ant 或 Maven 还是他们自己的构建工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:21:05.283

netbeans 正在使用 ant [http://hg.netbeans.org/main/file/](http://hg.netbeans.org/main/file/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-11T04:11:03.300

构建工具是从源代码自动创建可执行应用程序的程序（例如 .apk 用于 android 应用程序）。构建将代码编译、链接和打包成可用或可执行的形式。netbeans 中使用的默认构建工具是“ant”

# wampserver - 错误禁止 WampServer

> ID：12159921
> 
> 赞同：5
> 
> 时间：2012-08-28T13:06:29.653
> 
> 标签：wampserver

我在 Windows 8 中安装了 wamp 64bit ；安装后我的图标是橙色但是，我单击表单服务 apache > 安装服务 \ 并且**Apache 可以运行**（将颜色更改为**绿色**）

但`localhost/`在我的浏览器中打开后，显示此错误：

```
Forbidden 

You don't have permission to access / on this server. enter code here 
```

* * *

但是从**127.0.0.1 开始运行得很好** `(from localhost not working)`

我的窗户是`microsoft windows 8`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T20:25:54.050

在谷歌上找到了这个问题。

对于 Windows 8，随着 Erfan Safarpoor 的响应；确保将“Allow from 127.0.0.1”更改为“Allow from 127.0.0.1 ::1”，并将“Listen 80”更改为“Listen 0.0.0.0:80”——这将解决在 localhost 和phpmyadmin。:3

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-28T14:28:41.190

我从 httpd.conf 中删除这一行 apache **Deny from all**

在我改变之前：

```
<Directory "c:/wamp/apps/phpmyadmin3.4.5/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
    Order Deny,Allow
    Deny from all
    Allow from all
</Directory> 
```

在我改变之后：

```
<Directory "c:/wamp/apps/phpmyadmin3.4.5/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
    Order Deny,Allow
    Allow from all
</Directory> 
```

**我的问题就这样解决了**

好时光 :D

# css - 孩子在 Safari 中突破父圆角

> ID：12159923
> 
> 赞同：0
> 
> 时间：2012-08-28T13:06:34.053
> 
> 标签：css, mobile-safari, rounded-corners

这是我的问题：我想使用圆角使父 div 圆形，并且我希望该元素的子元素（具有彩色背景）保持正方形，但我不希望正方形的角指向外部圆的父母。这在大多数浏览器中并不难修复，我只是将 overflow:hidden 添加到 parent 和*viola*。但是，在 Safari 中，该修复不起作用 - 子项的方角指向圆形父项。所以我的问题是，有没有办法让父母的圆角影响Safari中的孩子？

有两种明显的解决方法，但在这种情况下它们都不适用：

*   孩子必须填满父母的整个空间，因此向父母添加填充（如此处所述[）](https://stackoverflow.com/questions/5277403/rounded-corners-in-parent-div-not-effecting-child-divs)不是一种选择。
*   我也不能为孩子添加圆角，因为孩子是由 javascript 调整大小并用作状态指示器，因此需要是方形的。

这是我的代码的 jsFiddle：http: [//jsfiddle.net/henrikandersson/4Lnbt/](http://jsfiddle.net/henrikandersson/4Lnbt/)

这是 Chrome（左）和 Safari（右）中的结果：

![在此处输入图像描述](../Images/93e983d083ba2eac828642d140f164b8.png)![在此处输入图像描述](../Images/1fda9cd7d527c2e20dcf8615622f5f0f.png)

**更新：**我在 OS X 和 Windows 中运行 Safari 5.1.7，结果相同。

# asp.net-mvc - VB ASP .NET MVC 自定义成员资格提供程序

> ID：12159926
> 
> 赞同：0
> 
> 时间：2012-08-28T13:06:54.707
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, asp.net-membership

我发现的所有示例都在 C# 中，如果是 VB，我需要一个。如何将下面的代码转换为继承所有 Membership 提供程序功能？

```
Imports System.Data.Entity
Imports MyBlog

Namespace MyBlog

    Public Class EmployeeController
        Inherits System.Web.Mvc.Controller

        Private db As EmployeeDbContext = New EmployeeDbContext

        '
        ' GET: /Employee/LogOn

        Public Function LogOn() As ActionResult
            Return View()
        End Function

    End Class

End Namespace 
```

这是我是否阅读过[自定义成员资格](https://stackoverflow.com/questions/5496779/custom-membership-or-not)的文章，[为 ASP.NET MVC 实现自定义登录](https://stackoverflow.com/questions/1641779/implementing-custom-login-for-asp-net-mvc)。我似乎不能在 VB 中继承多个类（不经常使用继承或实现或接口）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T13:15:32.803

您需要编写一个继承自[MembershipProvider](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.aspx)的类并覆盖您感兴趣的方法：

```
Public Class MyCustomMembershipProvider
    Inherits System.Web.Security.MembershipProvider

    Public Overrides Property ApplicationName As String
        Get

        End Get
        Set(value As String)

        End Set
    End Property

    Public Overrides Function ChangePassword(username As String, oldPassword As String, newPassword As String) As Boolean

    End Function

    Public Overrides Function ChangePasswordQuestionAndAnswer(username As String, password As String, newPasswordQuestion As String, newPasswordAnswer As String) As Boolean

    End Function

    Public Overrides Function CreateUser(username As String, password As String, email As String, passwordQuestion As String, passwordAnswer As String, isApproved As Boolean, providerUserKey As Object, ByRef status As System.Web.Security.MembershipCreateStatus) As System.Web.Security.MembershipUser

    End Function

    Public Overrides Function DeleteUser(username As String, deleteAllRelatedData As Boolean) As Boolean

    End Function

    Public Overrides ReadOnly Property EnablePasswordReset As Boolean
        Get

        End Get
    End Property

    Public Overrides ReadOnly Property EnablePasswordRetrieval As Boolean
        Get

        End Get
    End Property

    Public Overrides Function FindUsersByEmail(emailToMatch As String, pageIndex As Integer, pageSize As Integer, ByRef totalRecords As Integer) As System.Web.Security.MembershipUserCollection

    End Function

    Public Overrides Function FindUsersByName(usernameToMatch As String, pageIndex As Integer, pageSize As Integer, ByRef totalRecords As Integer) As System.Web.Security.MembershipUserCollection

    End Function

    Public Overrides Function GetAllUsers(pageIndex As Integer, pageSize As Integer, ByRef totalRecords As Integer) As System.Web.Security.MembershipUserCollection

    End Function

    Public Overrides Function GetNumberOfUsersOnline() As Integer

    End Function

    Public Overrides Function GetPassword(username As String, answer As String) As String

    End Function

    Public Overloads Overrides Function GetUser(providerUserKey As Object, userIsOnline As Boolean) As System.Web.Security.MembershipUser

    End Function

    Public Overloads Overrides Function GetUser(username As String, userIsOnline As Boolean) As System.Web.Security.MembershipUser

    End Function

    Public Overrides Function GetUserNameByEmail(email As String) As String

    End Function

    Public Overrides ReadOnly Property MaxInvalidPasswordAttempts As Integer
        Get

        End Get
    End Property

    Public Overrides ReadOnly Property MinRequiredNonAlphanumericCharacters As Integer
        Get

        End Get
    End Property

    Public Overrides ReadOnly Property MinRequiredPasswordLength As Integer
        Get

        End Get
    End Property

    Public Overrides ReadOnly Property PasswordAttemptWindow As Integer
        Get

        End Get
    End Property

    Public Overrides ReadOnly Property PasswordFormat As System.Web.Security.MembershipPasswordFormat
        Get

        End Get
    End Property

    Public Overrides ReadOnly Property PasswordStrengthRegularExpression As String
        Get

        End Get
    End Property

    Public Overrides ReadOnly Property RequiresQuestionAndAnswer As Boolean
        Get

        End Get
    End Property

    Public Overrides ReadOnly Property RequiresUniqueEmail As Boolean
        Get

        End Get
    End Property

    Public Overrides Function ResetPassword(username As String, answer As String) As String

    End Function

    Public Overrides Function UnlockUser(userName As String) As Boolean

    End Function

    Public Overrides Sub UpdateUser(user As System.Web.Security.MembershipUser)

    End Sub

    Public Overrides Function ValidateUser(username As String, password As String) As Boolean

    End Function
End Class 
```

然后在 web.config 中注册您的自定义提供程序：

```
<membership defaultProvider="MyMembership">
    <providers>
        <clear />
        <add 
            name="MyMembership" 
            type="MvcApplication1.MyCustomMembershipProvider, MvcApplication1" enablePasswordRetrieval="false" 
        />
    </providers>
</membership> 
```

现在从您的控制器中，您只需使用`Membership`该类。例如，在`LogOn`您创建项目时由默认模板生成的操作中，您绝对不需要更改任何内容：

```
<HttpPost()> _
Public Function LogOn(ByVal model As LogOnModel, ByVal returnUrl As String) As ActionResult
    If ModelState.IsValid Then
        If Membership.ValidateUser(model.UserName, model.Password) Then
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe)
            If Url.IsLocalUrl(returnUrl) AndAlso returnUrl.Length > 1 AndAlso returnUrl.StartsWith("/") _
               AndAlso Not returnUrl.StartsWith("//") AndAlso Not returnUrl.StartsWith("/\\") Then
                Return Redirect(returnUrl)
            Else
                Return RedirectToAction("Index", "Home")
            End If
        Else
            ModelState.AddModelError("", "The user name or password provided is incorrect.")
        End If
    End If

    ' If we got this far, something failed, redisplay form
    Return View(model)
End Function 
```

现在，所有调用都`Membership`将使用您在 web.config 中注册的自定义成员资格提供程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:15:24.603

我有一个更简单的解决方案。使用 nuget 安装`griffin.mvccontrib`. 然后像这样创建一个新类：

```
public class MyAccountRepository implements IAccountRepository
end class 
```

按下`CTRL+.`界面，导入正确的命名空间。按下`CTRL+.`类名以获取所有方法及其描述。

然后只需使用您的`EmployeeDBContext`.

通过这样做，您可以保留其他所有内容（使用标准 Internet MVC 模板）

说明：http: [//blog.gauffin.org/2011/09/a-more-structured-membershipprovider/](http://blog.gauffin.org/2011/09/a-more-structured-membershipprovider/)

# php - 获取未知名称的 SimpleXML 节点值

> ID：12159927
> 
> 赞同：0
> 
> 时间：2012-08-28T13:07:02.723
> 
> 标签：php, simplexml

我正在使用带有 PHP 库的基于云的联系人管理系统 API，当我在搜索联系人时使用 print_r($xml)（在查看源代码中）时，它会返回以下代码：

```
SimpleXMLElement Object
(
[id12345] => SimpleXMLElement Object
    (
        [id] => 12345
        [name] => Bob Smith
        [parentid] => 51214064
        [parentcn] => EGCTeam
        [flagged] => SimpleXMLElement Object
            (
            )

        [created] => 2012-08-24T18:39:22+00:00
        [viewed] => 2012-08-28T10:39:49+00:00
        [updated] => 2012-08-28T10:41:05+00:00
    )

[count] => 1
[status] => success
) 
```

通常我会使用此代码来访问“名称”字段：

```
$contactName = $xml->id12345->name 
```

但是由于第一个节点包含我不知道的 ID，我如何访问联系人的值？我试过这个：

```
$contactName = $xml->children()->name 
```

但它没有用（出来空白）。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:14:39.307

您可以使用`SimpleXMLElement::getName` [函数](http://www.php.net/manual/en/simplexmlelement.getname.php "功能")获取 SimpleXML 元素的名称，并通过获取 id 后面的字符串从名称中解析 id。

例如（如果 $response 是 SimpleXML 元素）：

```
foreach ($response->children() as $child)
{
    $name = $child->getName();
    $id = substr($name, 2);
    // Do stuff here with id or access node by $name //
} 
```

# java - 在单元测试中使用多少个线程？

> ID：12159932
> 
> 赞同：2
> 
> 时间：2012-08-28T13:07:12.680
> 
> 标签：java, multithreading, unit-testing

我正在对线程安全类进行单元测试。我从不同的线程调用它的方法，以确保它们都收到相同的结果（简而言之）。这就是我决定使用多少线程的方式：

```
int threads = Runtime.getRuntime().availableProcessors() * 4; 
```

这是一个好习惯吗？我应该使用多少？越多越好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T13:13:36.657

我通常运行 3 组测试：

*   一个线程检查单线程环境中的正确行为
*   处理器数量 + 1（或任何典型的应用程序设置）
*   许多线程（比如 1000 个）来增加上下文切换和争用

对于多线程测试，我尝试最大化交错，通常通过使用 CountDownLatch 同步任务的开始，以便所有线程或多或少同时启动它们的任务。

我还尝试在测试期间避免额外的同步（例如，通过使用线程安全结构来存储一些结果），因为它可能会人为地“重新同步”测试代码 - 需要根据具体情况进行评估。

[JCiP](http://www.amazon.co.uk/Java-Concurrency-Practice-Brian-Goetz/dp/0321349601/ref=sr_1_1?ie=UTF8&qid=1346159895&sr=8-1)的第 12 章是高效多线程测试的一个很好的灵感来源（即提供了许多引发并发错误的提示）。

最后，正如@PeterLawrey 所指出的，您不能保证您的代码在测试中是线程安全的，您只能尝试增加发现并发错误的机会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:12:36.750

这取决于线程执行了多少 IO。对于 CPU 密集型任务，每 1 个内核 1 个线程很好，但如果您正在等待 IO 任务，例如数据库读/写操作、文件操作 - 将数量增加到每个内核 2 个或更多线程是安全的。只需测量性能，您将获得测试的最佳价值 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:22:23.810

线程问题通常很少出现，所以想法是，你越强调它，你就越会带出竞争条件、争用问题等。

所以 4 * #processors 可能不会给你非常有意义的结果。事实上，它甚至可能会让你产生一种一切正常的错觉。

您应该估计在生产中实际上将同时运行多少线程，然后大大超出该数量。

# powershell - 为什么 Powershell 现在总是以管理员身份运行？

> ID：12159935
> 
> 赞同：5
> 
> 时间：2012-08-28T13:07:18.250
> 
> 标签：powershell, windows-7, administrator

我正在运行 Windows 7，并且最近安装了更新，因此我可以使用 Powershell 3.0。这个过程很顺利，我已经使用 Powershell 3 大约一个月了。我注意到的一件事是，现在每次运行 Powershell 时，它都会以提升的权限运行。我没有右键单击并以管理员身份运行，我只是进行正常的左键单击。当我从“开始”菜单运行，或者当它固定到任务栏或者我启动它时，就会发生这种情况。Powershell 2从未发生过这种情况。我没有做任何特别的事情来让它始终以管理员身份运行，因为我不想总是以管理员身份运行。有人对我可以检查的事情有任何建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T13:42:34.917

如果您在 Powershell 快捷方式的属性中设置（在 Advanced 下）并将其设置为以管理员身份运行，它将始终以管理员模式运行。看看是否是这种情况，如果是，请删除设置。

![在此处输入图像描述](../Images/9d6bb9fc50f7bdd334c7e4985afa54e1.png)

（请注意，如果固定相同的快捷方式，从固定的应用程序打开时也会看到相同的效果，正如您所体验的那样）

# ajax - 当我们单击添加按钮时，将数据动态添加到列表框中

> ID：12159938
> 
> 赞同：0
> 
> 时间：2012-08-28T13:07:24.537
> 
> 标签：ajax, spring, hibernate, jsp

我们的应用程序中的 Hibernate 和 Spring 标签和 jstl 标签。我附上了屏幕截图。

第一个列表框当我选择电子邮件并单击添加时，我正在从数据库中加载角色电子邮件 ID，所选电子邮件应动态添加到第二个列表框。当我想删除时，应该动态删除。请帮帮我，我对开发这些东西很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:22:37.903

要将一个项目从一个列表动态“移动”到另一个列表（我认为这意味着不向服务器发送请求），您需要一些 java 脚本。

谷歌的“jQuery Pick List”

*   [http://code.google.com/p/jquery-ui-picklist/](http://code.google.com/p/jquery-ui-picklist/)
*   [http://gsgd.co.uk/sandbox/jquery/picklists/](http://gsgd.co.uk/sandbox/jquery/picklists/)

# perl - Plack::Builder 得到职位

> ID：12159948
> 
> 赞同：1
> 
> 时间：2012-08-28T13:07:58.063
> 
> 标签：perl, plack, psgi

有没有办法在特定方法（GET 或 POST）的构建器部分中指定，但不能同时指定两者？我的构建器部分示例。

```
my $main_app=builder
{
    mount "/" => builder{$app;};
}; 
```

它处理 get 和 post 请求，如何禁用 GET 请求的处理？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:11:55.263

Plack::Builder 不提供基于 HTTP 方法路由请求的本机方式。编写处理特定方法的中间件应该非常简单。例如像

```
my $post_app = ...;

my $main = builder {
    enable sub {
        my $app = shift;
        sub {
            my $env = shift;

            if ($env->{REQUEST_METHOD} eq "POST") {
                return $post_app->($env);
            }

            return $app->($env);
        }
    };

    ....;
}; 
```

基于 om PSGI 的现有框架可能会为基于 om HTTP 方法的路由请求提供更好的替代方案。例如，使用 Dancer 看起来很容易。

# apache - Rails 3.2 预编译资产 404 错误

> ID：12159949
> 
> 赞同：1
> 
> 时间：2012-08-28T13:08:01.333
> 
> 标签：apache, nginx, ruby-on-rails-3.2, asset-pipeline

我在生产中遇到 Rails 3.2 和资产管道问题。

我的环境：

*   通过 capistrano 部署
*   虚拟机
*   REE/乘客
*   导轨 3.2.7
*   阿帕奇/Plesk 11

这个问题是我所有的资产都编译得很好，并且在共享/资产/的服务器上，有一个从公共/资产指向那里的符号链接。但是我的应用程序中没有样式或 JS，直接导航到资产文件我得到“404 Not Found”和“nginx”

我再次在 apache 服务器上，并且我已经成功地将这个应用程序部署在子域上，没有任何问题。该服务器是 plesk 9/apache 但没有 RVM。我是 Plesk 11 的新手，从未使用过 nginx，所以我的第一个想法是这就是问题所在。

但我现在也不愿意排除 RVM。有人有想法么？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T13:51:42.270

您需要将资产添加为 nginx 服务器块中的位置

```
location ~ ^/(assets)/  {
root /your/root/path/domain.com/current/public;
gzip_static on; # to serve pre-gzipped version
expires max;
add_header  Cache-Control public;
} 
```

# javascript - 查看正在重定向的文件源

> ID：12159957
> 
> 赞同：5
> 
> 时间：2012-08-28T13:08:25.437
> 
> 标签：javascript, jquery, google-chrome

当我单击 URL 时，正在使用重定向`window.location`

我正在尝试查看此 html 文件背后的代码，但由于它正在重定向，我无法查看它。如何查看重定向文件的源代码？我可以强制浏览器不执行 javascript 代码而是查看它吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T13:11:23.600

您可以从命令行在页面 URL 上**curl**或**wget**

```
curl http://page/ 
```

Curl 不解释 javascript，因此您将获得准确的 HTTP 响应！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-28T13:11:50.447

转到**查看源：http://your-url-here/**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:11:39.210

您是否尝试过[通过 telnet 请求页面](http://support.microsoft.com/kb/279466)？

```
telnet www.serverhost.com 80
GET /directory/file.html 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-14T17:36:32.910

尝试这个：

1.  在浏览器上打开一个新标签
2.  打开检查器 (F12) > 网络选项卡
3.  检查“保留日志”
4.  将要检查的 url 粘贴到地址栏中，然后按 Enter
5.  在“网络”选项卡中，您可以看到所有调用的资源以及“原始”页面（您可以按字符串过滤以便轻松找到它）
6.  点击原页面；在右侧您可以看到该页面的预览

# networking - 生成树协议如何在 L2 层提供路径冗余？

> ID：12159958
> 
> 赞同：0
> 
> 时间：2012-08-28T13:08:28.737
> 
> 标签：networking, spanning-tree

我有一个与生成树协议有关的非常基本的问题，它如何在路径中提供冗余这是我在某处读到的关于 STP 的内容，但我认为它禁用了 Network Redundancy 。

小伙伴们你们怎么看？

“请注意，确保这个问题属于 SO”，如果不是，则忽略它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:57:59.113

生成树协议采用带有循环的图并将其减少为最小生成树，您是正确的，它取出了多余的线。但是，如果启用了这些线路，网络将中断并且无法运行。如果没有 STP，第 2 层 802.1 网络将盲目转发流量，您会得到一个无限转发循环，进而导致网络崩溃。但是，使用 STP，您的网络中可以有环路，但 STP 会禁用它们**，直到**由于拓扑结构的变化而重建树。这意味着如果您有一个运行生成树的网络，并且一些链接出现故障，那么您还有其他链接会出现，因此您有冗余并且您的网络不会崩溃。

TRILL 是一种无需关闭链接即可提供的新协议。因此，它提供了您正在谈论的多路径冗余。

# php - PHP正则表达式获取四位数字

> ID：12159959
> 
> 赞同：-3
> 
> 时间：2012-08-28T13:08:29.980
> 
> 标签：php, regex

我有一个字符串：**The_3454_WITH_DAE[2011][RUS][HDVDRip]**，我想得到 [] 括号之间的四位数字，而不是 3454，请帮助我并提供正则表达式的 php 示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:10:09.823

您必须转义方括号才能匹配它们

```
\[([\d]{4})\] 
```

演示[http://codepad.viper-7.com/J4Rnkt](http://codepad.viper-7.com/J4Rnkt)

```
preg_match_all(
    '/
        \[           # match any opening square bracket
        ([\d]{4})    # capture the four digits within
        \]           # followed by a closing square bracket
    /x', 
    'The_3454_WITH_DAE[2011][RUS][HDVDRip]',
    $matches
);

print_r($matches); 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] => [2011]
        )

    [1] => Array
        (
            [0] => 2011
        )
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:10:48.140

```
preg_match("/(?<=\[)\d{4}(?=\])/", $subject, $matches); 
```

如果用方括号括起来，将匹配四位数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T13:11:54.973

以下正则表达式应该可以解决问题

```
$str = 'The_3454_WITH_DAE[2011][RUS][HDVDRip]';
preg_match('/\[([0-9]+)\]/', $str, $matches); 
```

# android - Android 进度对话框未显示在 AsyncTask 中

> ID：12159960
> 
> 赞同：4
> 
> 时间：2012-08-28T13:08:32.307
> 
> 标签：android, android-asynctask, progressdialog

有人请检查我的代码。我的进度对话框刚刚出现并在我看到它之前很快就消失了。它假设在下载过程中显示一个进度对话框。但是我的进度对话框在我的图像加载之前就消失了。

```
public class SingleImageViewActivity  extends SherlockActivity {

        // XML node keys
    static final String KEY_TITLE = "title";
    static final String KEY_ARTIST = "artist";  
    static final String KEY_THUMB_URL = "thumb_url";
    static final String KEY_BIG_URL = "big_url";
    private ProgressDialog pDialog;
    String title;
    String artist;
    //String image_url;
    String big_image_url;
    ImageView view;
    Intent intent;
    Context context;
    ShareActionProvider mShareActionProvider;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.single_view_item);
            getSupportActionBar().setDisplayHomeAsUpEnabled(true);
            //checkInternetConnection();

            new loadSingleView().execute();
            view = (ImageView) findViewById(R.id.single_image);    

        }

    public class loadSingleView extends AsyncTask<String, String, String> {

            @Override
            protected void onPreExecute() {
                super.onPreExecute();
                pDialog = new ProgressDialog(SingleImageViewActivity.this);
                pDialog.setTitle("Connect to Server");
                pDialog.setMessage("This process can take a few seconds to a few minutes, depending on your Internet Connection Speed.");
                pDialog.setIndeterminate(false);
                pDialog.setCancelable(false);
                pDialog.show();
            }
            @Override
            protected String doInBackground(String... args) {
                // updating UI from Background Thread

                Intent in = getIntent();

                //image_url = in.getStringExtra(KEY_THUMB_URL);
                big_image_url = in.getStringExtra(KEY_BIG_URL);
                title = in.getStringExtra(KEY_TITLE);
                artist = in.getStringExtra(KEY_ARTIST);

                SingleViewImageLoader imgLoader = new SingleViewImageLoader(getApplicationContext());

                imgLoader.DisplayImage(big_image_url, view);
                return null;

                        }
            @Override       
            protected void onPostExecute(String args) {
                // dismiss the dialog after getting all products
                 TextView lblName = (TextView) findViewById(R.id.name_title);
                    TextView lblCost = (TextView) findViewById(R.id.name_artist);

                    lblName.setText(title);
                    lblCost.setText(artist);

                    ActionBar ab = getSupportActionBar();
                    ab.setTitle(title);
                    ab.setSubtitle(artist);

                pDialog.dismiss();

            }

    } 
```

SingleViewImageLoader.class

```
public class SingleViewImageLoader {

    MemoryCache memoryCache=new MemoryCache();
    FileCache fileCache;
    private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());
    ExecutorService executorService; 

    public SingleViewImageLoader(Context context){
        fileCache=new FileCache(context);
        executorService=Executors.newFixedThreadPool(5);
    }

   final int stub_id = R.drawable.no_image;
    public void DisplayImage(String url, ImageView imageView)
    {
        imageViews.put(imageView, url);
        Bitmap bitmap=memoryCache.get(url);
        if(bitmap!=null)
            imageView.setImageBitmap(bitmap);
        else
        {
            queuePhoto(url, imageView);
            imageView.setImageResource(stub_id);

        }
    }

    private void queuePhoto(String url, ImageView imageView)
    {
        PhotoToLoad p=new PhotoToLoad(url, imageView);
        executorService.submit(new PhotosLoader(p));
    }

    private Bitmap getBitmap(String url) 
    {
        File f=fileCache.getFile(url);

        //from SD cache
        Bitmap b = decodeFile(f);
        if(b!=null)
            return b;

        //from web
        try {
            Bitmap bitmap=null;
            URL imageUrl = new URL(url);
            HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            conn.setInstanceFollowRedirects(true);
            InputStream is=conn.getInputStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();
            bitmap = decodeFile(f);
            return bitmap;
        } catch (Exception ex){
           ex.printStackTrace();
           return null;
        }
    }

    //decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f){
        try {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE=500;
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {}
        return null;
    }

    //Task for the queue
    private class PhotoToLoad
    {
        public String url;
        public ImageView imageView;
        public PhotoToLoad(String u, ImageView i){
            url=u; 
            imageView=i;
        }
    }

    class PhotosLoader implements Runnable {
        PhotoToLoad photoToLoad;
        PhotosLoader(PhotoToLoad photoToLoad){
            this.photoToLoad=photoToLoad;
        }

        @Override
        public void run() {
            if(imageViewReused(photoToLoad))
                return;
            Bitmap bmp=getBitmap(photoToLoad.url);
            memoryCache.put(photoToLoad.url, bmp);
            if(imageViewReused(photoToLoad))
                return;
            BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad);
            Activity a=(Activity)photoToLoad.imageView.getContext();
            a.runOnUiThread(bd);
        }
    }

    boolean imageViewReused(PhotoToLoad photoToLoad){
        String tag=imageViews.get(photoToLoad.imageView);
        if(tag==null || !tag.equals(photoToLoad.url))
            return true;
        return false;
    }

    //Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable
    {
        Bitmap bitmap;
        PhotoToLoad photoToLoad;
        public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
        public void run()
        {
            if(imageViewReused(photoToLoad))
                return;

            if(bitmap!=null)
                photoToLoad.imageView.setImageBitmap(bitmap);
          else
              photoToLoad.imageView.setImageResource(stub_id);

        }
    }

    public void clearCache() {
        memoryCache.clear();
        fileCache.clear();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T13:11:53.020

它因为 Image Loader 类也使用线程来显示图像，所以它在后台运行并且你的 onPostExecute() 方法被调用并关闭进度对话框。

# objective-c - isKindOfClass 意外返回 NO

> ID：12159961
> 
> 赞同：18
> 
> 时间：2012-08-28T13:08:33.143
> 
> 标签：objective-c, cocoa

我的一个单元测试失败了，原因是我没有预料到的。似乎调用`isKindOfClass`返回 NO，但是当我调试并逐步执行时，似乎没有理由这样做。

代码是：

```
if ([self.detailItem isKindOfClass:[MovieInfo class]]) {
    [self configureViewForMovie];
} 
```

我逐步浏览了代码并做了：

```
po self.detailItem 
```

显示：

```
(id) $1 = 0x0ea8f390 <MovieInfo: 0xea8f390> 
```

那么，我错过了什么，为什么在这种情况下 if 语句会返回 false ？

编辑：

这是 DetailItem 的设置器：

```
- (void)setDetailItem:(id)newDetailItem
{
    if (_detailItem != newDetailItem) {
        NSLog(@"%@", [newDetailItem class]);
        _detailItem = newDetailItem;

        // Update the view.
        [self configureView];
    }

    if (self.masterPopoverController != nil) {
        [self.masterPopoverController dismissPopoverAnimated:YES];
    } 
} 
```

它是来自 Master Detail 模板的模板代码。

单元测试在 setUp 中创建一个 MovieInfo：

```
movie = [[MovieInfo alloc] initWithMovieName:@"Movie" movieID:1]; 
```

并将其设置在测试中

```
controller.detailItem = movie; 
```

此外，我在以下位置添加了一个参数断言`setDetailItem`：

```
NSParameterAssert([newDetailItem isKindOfClass:[MovieInfo class]] || [newDetailItem isKindOfClass:[PersonInfo class]] || newDetailItem == nil); 
```

这个断言也失败了。

我在断言调用上方放置了两个日志语句：

```
NSLog(@"%@", [newDetailItem class]);
NSLog(@"%@", newDetailItem); 
```

哪个显示：

```
2012-08-28 08:31:37.574 Popcorn[8006:c07] MovieInfo
2012-08-28 08:31:38.253 Popcorn[8006:c07] <MovieInfo: 0x6daac50> 
```

再编辑：

我`isKindOfClass`在单元测试中设置它之前添加了检查，一个通过。

```
if ([movie isKindOfClass:[MovieInfo class]]) {
    NSLog(@"Yep"); //This passes and prints out
}
controller.detailItem = movie; //calls into the setter and fails. 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-28T14:13:43.680

这是因为被测类“DetailViewController”不在测试目标中。我本来希望这会以不同的方式表现出来（链接器错误或其他东西），但显然，它只会导致奇怪的行为。将 DetailViewController 添加到测试目标解决了这些问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T13:13:22.687

我怀疑存在竞争条件，或者 Debug 和 Release 配置之间存在差异。这些将导致调试器和常规运行时之间的差异。

首先，确保`self.detailItem`不是`nil`. 这是此类问题的最常见原因。然后尝试使用日志记录而不是调试器来调试它。如果您确实有竞争条件，那么您也可以考虑使用`printf()`而不是`NSLog()`. `printf()`是进行多线程日志记录的一种对性能影响较小的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-06T16:57:39.943

我在写的图书馆里也遇到了同样的问题。有趣的是，它在我的 iOS 测试目标上运行良好，但在 Mac 测试目标上却失败了（有趣！）。

我认为这个问题与类声明中的不匹配有关。该库正在使用 .h 声明，但单元测试正在查看内部声明。

用一个例子更容易解释：

```
/*
 * ClassA.h
 */
@interface ClassA () : NSObject

@property (nonatomic, strong, readonly) NSString *someValue1;
@property (nonatomic, strong, readonly) NSString *someValue2;
@property (nonatomic, strong, readonly) NSString *someValue3;

@end 
```

添加到 .m 中的属性列表

```
/*
 * ClassA.m
 */
@interface ClassA () : NSObject

@property (nonatomic, strong, readwrite) NSString *someValue2;
@property (nonatomic, strong, readwrite) NSDate *date;
@property (nonatomic, strong, readwrite) NSDateFormatter *dateFormatter;

@end

@implementation 
// implementation
@end 
```

现在，由于单元测试目标的编译源设置为包含 ClassA.m，因此`isKindOfClass:`将返回 no，但`po`命令和`NSStringFromClass([ClassA class])`在调试器中运行时将返回您期望的值。

我知道这是一篇旧帖子，但我希望这是有用的，可以节省很多时间。我花了将近一个小时试图解决这个问题！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-04T13:04:43.970

如果您想始终将所有源文件添加到所有测试目标，MarkPowell 的回答绝对有帮助。

但是，如果您将应用程序作为测试目标的目标依赖项（如果您的测试目标中只有测试源文件，而不是项目源文件），那么您遇到的问题与我相同：您的一个类应该在 App 目标中，而不是在测试目标中（在我的情况下，它是一个测试助手类！）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-16T05:05:44.507

正如@stefreak 所提到的，在标准单元测试配置中，被测对象不应包含在单元测试目标中。在这种情况下，如果您确实在测试目标中包含被测对象，则在构建时将以下类型的消息写入日志：

```
Class foo is implemented in both <.app path> and <.xctest path>. One of the two will be used. Which one is undefined. 
```

[正如这里](https://stackoverflow.com/questions/6149673/class-foo-is-implemented-in-both-myapp-and-myapptestcase-one-of-the-two-will-be/8131524#8131524)提到的，您不应该在两个目标中都包含被测对象。仅将对象放在一个目标中将阻止意外行为`isKindOfClass:`。

此外，我的一位同事发现您需要确保为“运行”构建关闭单元测试。在应用程序的方案下，选择“构建”，然后查看单元测试目标，应该取消选择“运行”。

如果您使用 Swift 进行开发，那么您`@testable import MyModule`的单元测试文件的顶部应该有一个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T13:24:44.020

可以`self.detailItem`吗`nil`？的结果`-isKindOfClass:`将是`NO`在那种情况下。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-14T23:13:04.717

同样的情况也发生在我身上。我最终做了如下比较：

```
[self.detailItem class]  == [ETTWallpaper class] 
```

自从

```
[[self.detailItem class] isKindOfClass:[ETTWallpaper class]] 
```

没有工作，并且总是返回 NO，尽管确定它必须返回 YES

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-04T11:21:06.983

我认为目前 Xcode 7.0 中存在一个错误。我有同样的问题，并检查了所有 CUT 都包含在测试目标中，但我有一个在代码中返回`NO`到`-[isKindOfClass:]`，但在调试器中返回 YES。这发生在模拟器和物理设备中。

我最终检查`-[respondsToSelector:]`了我班级的签名。不完美，但可以让我通过。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-15T07:34:23.707

`SomeClass`使用 CocoaPods 1.0（在Pod 库中的位置）运行单元测试时，我遇到了同样的问题

我收到以下警告消息：

```
Class SomeClass is implemented in both </path/to/myapp> and </path/to/myapptest>. One of the two will be used. Which one is undefined. 
```

我的解决方案是将 Podfile 更新为：

```
target "MyApp" do
  pod 'xxx'
  pod 'yyy'

  target "MyApp-Tests" do
      inherit! :search_paths
  end
end 
```

参考资料： [https ://github.com/CocoaPods/CocoaPods/issues/4626](https://github.com/CocoaPods/CocoaPods/issues/4626)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-07-25T20:14:26.763

[在此链接](https://danschwartz.wordpress.com/2015/03/25/obj-iskindofclasssomeentity-class-is-true-failed-obj-is-supposed-to-be-someentity-but-is-actually-someentity/)中找到了解决方案：

> 我的 SomeEntity 类包含在测试目标中。构建测试目标还包括作为依赖项的主应用程序，其中还包括 SomeEntity。这显然让 Xcode 相信有两种不同的类型。
> 
> 从测试目标中删除 SomeEntity ，一切都通过了！

# database - 从 RDMS 中提取大型列表的数据的最有效方法是什么？

> ID：12159963
> 
> 赞同：0
> 
> 时间：2012-08-28T13:08:35.110
> 
> 标签：database, performance

我正在开发一个包含数千个项目的系统，这些项目必须呈现给用户以供选择。每个行项目显示包含大量数据和选项/链接，并且必须从数据库中的许多表中读取以呈现行上的所有信息和链接。并且有数千行。

所以很明显我们过滤或分页或以某种方式限制结果数据集，因为当用户只选择一个时，我们真的不需要在页面上显示 4000 个项目。

假设我们分页。我在这里看到的问题是，例如，为了显示第 3 页，我们必须知道每页有多少项目，然后以某种方式制作一个只检索一页的 3 页的 sql。记住要显示的列表可以是按许多数据列中的任何一个进行排序，所以在我看来，我们必须从数据库中要求返回整个结果集，然后在程序中只选择我们想要的第 3 页中的项目，因为没有办法说在 SQL 中，按 x、y、z 的顺序从 select blah blah blah order 中给我第 30-40 行。

然后是获取数据的问题。我可以一次性完成所有我需要的数据，然后挑选我返回的第 30-40 行，但这是我要丢弃的大部分数据库工作。

所以相反，也许我做一个传递来获取标识符列表，然后我制作另一个更复杂的 sql 来通过某个行标识符上的 IN 子句获取这 10 行所需的所有数据（最好在 PK 中） . 为一页做两遍听起来是一个非常缓慢的想法。我还发现我要求数据库做的工作越多，我的 DBA 就越生我的气。所以理想的做法是在应用服务器上转储尽可能多的工作，但这当然意味着通过网络将大量数据从数据库拉到应用服务器，这也是一个缓慢的解决方案。

那么这是更好的方法吗？还是有另一种更好的范式？

现在假设我们正在过滤。用户有一些他们可以选择的过滤条件。我们遇到了同样的问题，用户可以删除所有过滤器，然后我最终会从数据库中加载 4000 个真正的数据密集型行，这几乎需要我进行分页。

这里的目标是在被迫从大量表中读取大量数据以便能够呈现一页信息的同时获得类似谷歌的快速页面时间。

随着时间的推移，我开始意识到谷歌所做的并不那么复杂。我的意思是搜索页面的结果集具有相当有限的数据集。我不怀疑他们如何获取这些数据非常复杂，但是任何给定的搜索结果都不是由那么多信息组成的。

我的问题是我正在显示的页面上的每一行都有很多信息，并且我受到所有数据分布在一堆表和数据库中的限制。

因此，虽然我意识到我拥有的基础设施永远无法实现类似谷歌的响应时间，但从数据库中呈现页面数据价值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:57:46.247

实际上，有一种方法可以让数据库说“从我的查询中给我第 30-40 行”。您正在寻找的是`LIMIT`和`OFFSET`。这可能是最好的解决方案——它让数据库做它最擅长的事情。

[LIMIT 和 OFFSET 的文档](http://www.sql.org/sql-database/postgresql/manual/queries-limit.html)。

此外，听起来您处于考虑缓存的完美位置。您有一组极其昂贵的查询，但它们似乎并没有迅速改变——使用 Memcached 之类的东西来保留查询结果的副本可能很有用。

# wpf - 在 WPF 样式中触发多个条件的正确方法是什么

> ID：12159973
> 
> 赞同：15
> 
> 时间：2012-08-28T13:09:04.557
> 
> 标签：wpf, xaml, triggers, styles, multidatatrigger

我的 WPF 应用程序中有一个`DataGrid`控件。我有一个`DataGridRow`运行良好的类的默认自定义样式。但是，对于这一`DataGrid`特定屏幕上的这一特定，我需要不同的自定义样式。

每行中的项目都有一个`bool`属性，当设置时，我想用不同的前景色和背景色显示该行。However, when the row is selected AND when that property is set, I want a different foreground and background color to show that it's selected AND the property is set to true.

这是我尝试过的：

```
<Style TargetType="DataGridRow" x:Key="CameraStyle">
    <Setter Property="Foreground" Value="{DynamicResource TextForeground}" />
    <Setter Property="Background" Value="{DynamicResource DataBackground}" />
    <Style.Triggers>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Property="IsSelected" Value="False" />
                <Condition Binding="{Binding Path=IsInLiveMode}" Value="True" />
            </MultiDataTrigger.Conditions>
            <Setter Property="Foreground" Value="Red" />
            <Setter Property="Background" Value="Yellow" />
        </MultiDataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Property="IsSelected" Value="True" />
                <Condition Binding="{Binding Path=IsInLiveMode}" Value="True" />
            </MultiDataTrigger.Conditions>
            <Setter Property="Background"  Value="DarkOrange" />
            <Setter Property="BorderBrush" Value="{DynamicResource DataBorder}" />
            <Setter Property="Foreground"  Value="DarkRed" />
        </MultiDataTrigger>
    </Style.Triggers>
</Style> 
```

这给了我一个“绑定必须为非空”错误，我认为这是因为`Binding`MultiDataTrigger 中的第一个条件没有属性。

在 XAML 中编写此代码的正确方法是什么？

编辑：

在尝试了 nemesv 和 Rachel 的答案后，代码现在可以编译并运行。但是，我为 IsSelected = true 和 IsInLiveMode = true 案例选择的颜色没有显示出来。这是我现在拥有的：

```
 <Style TargetType="DataGridRow" x:Key="CameraStyle">
        <Setter Property="Background" Value="{DynamicResource DataBackground}" />
        <Setter Property="Foreground" Value="{DynamicResource TextForeground}" />
        <Style.Triggers>
            <MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                    <Condition Binding="{Binding Path=IsSelected, RelativeSource={RelativeSource Self}}" Value="False" />
                    <Condition Binding="{Binding Path=IsInLiveMode}" Value="True" />
                </MultiDataTrigger.Conditions>
                <Setter Property="Background" Value="Yellow" />
                <Setter Property="Foreground" Value="Red" />
            </MultiDataTrigger>
            <MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                    <Condition Binding="{Binding Path=IsSelected, RelativeSource={RelativeSource Self}}" Value="True" />
                    <Condition Binding="{Binding Path=IsInLiveMode}" Value="False" />
                </MultiDataTrigger.Conditions>
                <Setter Property="Background"  Value="{DynamicResource DataBackgroundSelected}" />
                <Setter Property="BorderBrush" Value="{DynamicResource DataBorder}" />
                <Setter Property="Foreground"  Value="{DynamicResource DataForegroundSelected}" />
            </MultiDataTrigger>
            <MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                    <Condition Binding="{Binding Path=IsSelected, RelativeSource={RelativeSource Self}}" Value="True" />
                    <Condition Binding="{Binding Path=IsInLiveMode}" Value="True" />
                </MultiDataTrigger.Conditions>
                <Setter Property="Background"  Value="DarkOrange" />
                <Setter Property="BorderBrush" Value="{DynamicResource DataBorder}" />
                <Setter Property="Foreground"  Value="DarkRed" />
            </MultiDataTrigger>
        </Style.Triggers>
    </Style> 
```

关于为什么有问题的案例不起作用的任何想法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-28T13:16:13.513

您关于缺少绑定的假设是正确的。

从 MSDN [MultiDataTrigger.Conditions](http://msdn.microsoft.com/en-us/library/system.windows.multidatatrigger.conditions.aspx)：

> 对于 MultiDataTrigger，集合中的每个条件**都必须设置 Binding 和 Value**属性。

您可以使用[RelativeSource Self](http://msdn.microsoft.com/en-us/library/dd553635%28v=vs.95%29.aspx)在绑定中引用自己来解决此问题：

```
<MultiDataTrigger.Conditions>
    <Condition Binding="{Binding RelativeSource={RelativeSource Self},
         Path=IsSelected}" Value="True" />
    <Condition Binding="{Binding Path=IsInLiveMode}" Value="True" />
</MultiDataTrigger.Conditions> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-28T13:16:23.083

您正在使用 a `MultiDataTrigger`，它仍然是 a`DataTrigger`并且需要绑定

切换到`Property="IsSelected"`_`Condition`

```
<Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" 
           Value="True" /> 
```

# android - android通过ssh连接到远程机器

> ID：12159976
> 
> 赞同：0
> 
> 时间：2012-08-28T13:09:10.370
> 
> 标签：android, android-layout, android-intent, android-widget

从 android 我如何像在 ubuntu 中一样连接到服务器并通过 ssh 而不是通过命令模式查看其上的文件。

同样在这里，我不是在寻找要使用的应用程序，而是让库来执行此操作

从命令行我知道我可以使用应用程序 connectbot [Connectbot](http://code.google.com/p/connectbot/)但我想登录到远程机器并在设备上的文件浏览器上查看文件。是否有任何与此相关的链接请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T09:30:23.437

您可以使用[http://www.pitman.co.za/projects/jssh/](http://www.pitman.co.za/projects/jssh/)或[http://www.jcraft.com/jsch/](http://www.jcraft.com/jsch/)

# c++ - 位对齐任何位长度字节对齐缓冲区的访问

> ID：12159984
> 
> 赞同：0
> 
> 时间：2012-08-28T13:09:34.313
> 
> 标签：c++, c

对于嵌入式系统（小 Endian ARM，语言 C - 即使我在这里用于测试目的 C++），我编写了附加的代码。我必须发送和接收不同的配置数据，位对齐和给定的位长度。使用 field_conf_t 对我必须发送/接收的每个变量执行配置，例如：

```
typedef struct field_conf_t { ... }; // see below

typedef struct {
    field_conf_t    a;
    field_conf_t    b;
    field_conf_t    c;
} tx_fields_conf_t;

const tx_fields_conf_t tx_fields_conf = {
    { 0, 8  },      // a - offset/length
    { 28, 12 },     // b - offset/length
    { 56, 8  }      // c - offset/length
}; 
```

我遇到的问题是，我对单个 Bit-Ops 有很多想法，测试失败了。

这里的代码：

```
#include <stdint.h>

#define BOOST_TEST_MODULE BitFieldTest
#include <boost/test/unit_test.hpp>

typedef uint8_t     uint8;
typedef uint16_t    uint16;
typedef uint32_t    uint32;
typedef unsigned long long uint64;

typedef struct {
    uint8   offset;     // [0-63]
    uint8   length;     // [1-32]
} field_conf_t;

typedef struct {
    field_conf_t    a;
    field_conf_t    b;
    field_conf_t    c;
} tx_fields_conf_t;

typedef union {
    uint8   buf[8];
    uint64  contents;
} msg_t;

void set_value(msg_t* const msg, const field_conf_t* const field, uint32 value)
{
    const uint32 mask = (1 << field->length) - 1;
    msg->contents    &= ~(mask          << field->offset);  // clear old contens
    msg->contents    |=  (value & mask) << field->offset;   // set new contens
}

uint32 get_value(const msg_t* const msg, const field_conf_t* const field)
{
    const uint32 mask = (1 << field->length) - 1;

    uint64 value = (msg->contents >> field->offset);
    value       &= mask;

    return (uint32)value;
}

// ########################################################################
struct TestFixture {
    TestFixture() : a(0xAA), b(0xBBB), c(0xCC) {
        conf.a.offset =  0; conf.a.length = 8;
        conf.b.offset = 25; conf.b.length = 12;
        conf.c.offset = 56; conf.a.length = 8;
    }
    uint32 a, b, c;
    msg_t msg;
    tx_fields_conf_t conf;
};

BOOST_FIXTURE_TEST_SUITE(MsgBitfieldTest, TestFixture);

BOOST_AUTO_TEST_CASE(Test_01)
{
    set_value(&msg, &conf.a, a);
    BOOST_CHECK(get_value(&msg, &conf.a) == a);

    set_value(&msg, &conf.b, b);
    BOOST_CHECK(get_value(&msg, &conf.a) == a);
    BOOST_CHECK(get_value(&msg, &conf.b) == b);

    set_value(&msg, &conf.c, c);
    BOOST_CHECK(get_value(&msg, &conf.a) == a);
    BOOST_CHECK(get_value(&msg, &conf.b) == b);
    BOOST_CHECK(get_value(&msg, &conf.c) == c);
}

BOOST_AUTO_TEST_SUITE_END(); 
```

和测试运行输出

```
Running 1 test case...
d:/work/bugee/test/can_msg/msg_bitsfields/msg_bitsfields/main.cpp(65): error in
"Test_01": check get_value(&msg, &conf.b) == b failed
d:/work/bugee/test/can_msg/msg_bitsfields/msg_bitsfields/main.cpp(69): error in
"Test_01": check get_value(&msg, &conf.b) == b failed
d:/work/bugee/test/can_msg/msg_bitsfields/msg_bitsfields/main.cpp(70): error in
"Test_01": check get_value(&msg, &conf.c) == c failed

*** 3 failures detected in test suite "BitFieldTest" 
```

缓冲区大小始终为 8 字节；我很高兴我可以在这里使用 64 位 long long；在我在字节对齐操作上也失败之前（每个字节上的掩码和位操作）。注意，该值不能大于 int32 /uint32。我也知道 C 位域。它们太慢了，我需要一个用于嵌入式系统的快速解决方案（还有其他耗时的任务）。

我也对具有 lsb/msb 32 位甚至 8 字节切片快速解决方案的解决方案感兴趣，但我认为由于编译器的原因，使用 64 位数据类型的性能更高。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:17:14.273

在您的第一个代码块中您有以下事实是否有任何问题：

```
const tx_fields_conf_t tx_fields_conf = {
    { 0, 8  },      // a - offset/length
    { 28, 12 },     // b - offset/length -- note the 28 here as the offset
    { 56, 8  }      // c - offset/length
}; 
```

但稍后在您的应用程序中，您有：

```
struct TestFixture {
    TestFixture() : a(0xAA), b(0xBBB), c(0xCC) {
        conf.a.offset =  0; conf.a.length = 8;
        conf.b.offset = 25; conf.b.length = 12;  // offset is *25* here, not 28 as above. Poss. problem?
        conf.c.offset = 56; conf.a.length = 8;
    }
    uint32 a, b, c;
    msg_t msg;
    tx_fields_conf_t conf;
}; 
```

任何机会这是一个重要的差异？也许什么都没有，但我确实注意到了......我想我会指出它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:20:59.887

问题是在`set_value`

```
const uint32 mask = (1 << field->length) - 1;
msg->contents    &= ~(mask          << field->offset);  // clear old contens
msg->contents    |=  (value & mask) << field->offset;   // set new contens 
```

`mask << field->offset`是一个 32 位值，因此当`field->offset + field->length >= 32`. 更改`mask`为 64 位应该可以将位移作为 64 位操作执行：

```
const uint64 mask = (1 << field->length) - 1; 
```

# ant - 通过 Netbeans 使用 Ant 脚本问题构建

> ID：12159987
> 
> 赞同：0
> 
> 时间：2012-08-28T13:09:50.010
> 
> 标签：ant, netbeans6.8

我试图通过 shell 运行 ANT，而不在 NetBeans IDE 中导入我的项目。它抛出以下错误：

> /trunk/nbproject/build-impl.xml:377：未设置 libs.CopyLibs.classpath 属性。此属性必须指向 org-netbeans-modules-java-j2seproject-copylibstask.jar 文件，该文件是 NetBeans IDE 安装的一部分，通常位于 /java/ant/extra 文件夹。在 IDE 中打开项目并确保 CopyLibs 库存在或手动设置属性。例如像这样：ant -Dlibs.CopyLibs.classpath=a/path/to/org-netbeans-modules-java-j2seproject-copylibstask.jar

是因为我的构建是特定于 NetBeans 的还是其他原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:55:30.420

您是否尝试过按照错误消息建议的方式运行 ANT？将**libs.CopyLibs.classpath**属性设置为指向丢失的 jar 文件？

这里的问题是 Netbeqns 生成的 ANT 构建被设计为在 IDE 中运行。从命令行运行时，您需要确保设置了相同的环境属性。

# 更新

要使用环境变量，您可以尝试以下操作：

```
<property environment="env"/>
<property name="libs.CopyLibs.classpath" value="${env.COPY_LIBS_CLASSPATH}"/> 
```

# .net - .NET 中的异步 WMI 事件处理

> ID：12159989
> 
> 赞同：4
> 
> 时间：2012-08-28T13:09:53.833
> 
> 标签：.net, asynchronous, permissions, wmi, remote-process

我正在尝试使用 WMI 远程运行一些进程并等待进程完成。目前，事件观察器是半同步的`WaitForNextEvent`，它也有一个超时，以防程序发生某些事情。这一切运作良好。我尝试将其修改为异步事件处理，但在启动事件观察程序时出现访问被拒绝错误。现在这没什么大不了的，因为我可以坚持使用半同步方法，但有一个例外。

如果由于某种原因，在程序执行过程中机器重新启动、冻结或失去网络连接，`WaitForNextEvent`则不会抛出超时异常，而是无限期地阻塞线程（我将它放在那里 10 分钟没有答案，超时为 30 秒）。我的问题是：有谁知道是否可以以特定方式设置事件观察器以便无论连接如何都超时，或者设置客户端以便访问异步权限。通常，第一个是首选，但第二个也是一种选择。

```
ManagementEventWatcher w = new ManagementEventWatcher(managementScope,
    new WqlEventQuery(
        "select * from Win32_ProcessStopTrace where ProcessId=" + ProcessId));

w.Options.Timeout = new TimeSpan(0, 0, 0, 30);

var ev = w.WaitForNextEvent(); 
```

我想知道 ManagementeventWatcher 是否有一些选项可以返回或超时，而不管连接如何，或者是否可以使用异步方法来捕获事件。

## 解决方案

```
ManagementEventWatcher w = new ManagementEventWatcher(managementScope,
    new WqlEventQuery(
        "select * from Win32_ProcessStopTrace where ProcessId=" + ProcessId));

w.Options.Timeout = new TimeSpan(0, 0, 0, 0, 1);
DateTime start = DateTime.Now;
while (Status == StatusNotStarted) //default status(just strings)
{
    try
    {
        var ev = w.WaitForNextEvent();
        ReturnCode = (uint)ev.Properties["ExitStatus"].Value;
        Status = (ReturnCode == 0) ? StatusOk : StatusFailed;
    }
    catch (ManagementException ex)
    {
        if (!ex.Message.Contains("Timed out"))
        {
            throw ex;
        }
        try
        {
            Ping p = new Ping();
            PingReply reply = p.Send(MachineIP);
            if (reply.Status != IPStatus.Success)
            {
                Status = StatusFailed;
            }
            else
            {
                DateTime end = DateTime.Now;
                TimeSpan duration = end - start;
                if (duration.TotalMilliseconds > Timeout)
                {
                    Status = StatusFailed;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-20T22:48:07.393

这个答案描述了一种实现非阻塞 WaitForNextEvent() 的方法

[https://social.msdn.microsoft.com/Forums/vstudio/en-US/c2b6a2f4-eb84-4bbb-acdb-bbef4b0611e6/nonblocking-managementeventwatcherwaitfornextevent?forum=csharpgeneral](https://social.msdn.microsoft.com/Forums/vstudio/en-US/c2b6a2f4-eb84-4bbb-acdb-bbef4b0611e6/nonblocking-managementeventwatcherwaitfornextevent?forum=csharpgeneral)

希望这可以帮助

# adobe - 首次在 livecycle 过程中呈现表单时出错

> ID：12159991
> 
> 赞同：0
> 
> 时间：2012-08-28T13:10:05.010
> 
> 标签：adobe, livecycle, livecycle-designer

目前我们更改了 adobe 服务器的环境。

现在，当我有时调用服务时，我们遇到了问题。它引发以下错误

```
com.adobe.livecycle.formsservice.exception.RenderFormException: java.lang.IllegalStateException: Connection to failed service.
    at com.adobe.formServer.FormServer.renderForm(FormServer.java:234)
    at com.adobe.formServer.FormServer.renderForm(FormServer.java:282)
    at com.adobe.formServer.docservice.FormsDocService.renderForm(FormsDocService.java:556)
    at com.adobe.formServer.docservice.FormsDocService.renderForm(FormsDocService.java:470)
    at com.adobe.formServer.docservice.FormsDocService.renderPDFFormCommonCaller(FormsDocService.java:166)
    at com.adobe.formServer.docservice.FormsDocService.renderPDFForm2(FormsDocService.java:139) 
```

但在第二次点击它工作得很好..请帮帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:18:52.807

由于 PermSize 问题，此问题重现。

要解决这个问题 ：-

请在 PATH 中设置 -Xms256m -Xmx1792m -XX:MaxPermSize=512m。

转到服务器控制台-->服务器-->托管服务器-->服务器启动并在参数中设置 -Xms256m -Xmx1792m -XX:MaxPermSize=512m。

# javascript - 手动过滤电子邮件。Javascript

> ID：12159993
> 
> 赞同：0
> 
> 时间：2012-08-28T13:10:09.003
> 
> 标签：javascript, email, filter, email-validation

我是 javascript 和其他东西的新手。我通过浏览得到了这个过滤器。

它说：

```
function checkemail(emailtotest) {
    var testemail;
    var filter = /^([\w-\'\+]+(?:\.[\w-\'\+]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;
    if (filter.test(emailtotest)) {
        testemail = true;
    }
    else {
        testemail = false;
    }
    return (testemail);
} 
```

我想问并希望了解的是，什么是 "/^([\w-\'+]+(?:.[\w-\'+]+) *)@((?:[ \w-]+.)* \w[\w-]{0,66}).([az]{2,6}(?:.[az]{2})?)$/i" 是什么意思？

有没有 javascript 大师愿意帮助这个新手？

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:14:11.820

`/some-magical-stuff/[modifiers]`是[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)的语法。另一种语法是`new RegExp("some-magical-stuff", "[modifiers]")`. 它在功能上是等效的。至于正则表达式是什么意思，一旦学习了正则表达式就不难理解了。

# c# - GridView 排序和分页

> ID：12159996
> 
> 赞同：2
> 
> 时间：2012-08-28T13:10:16.217
> 
> 标签：c#, asp.net, sorting, gridview, pagination

我想在我的页面上显示简单的 gridview 并为其提供排序和分页功能。单独排序和分页工作正常，但两者的组合却不行。例如，如果我对第一列进行降序排序，然后转到第二页，那么我会看到默认排序（升序）的第二页数据。

我严重依赖这个问题的代码：[GridView 排序：SortDirection always Ascending](https://stackoverflow.com/questions/250037/gridview-sorting-sortdirection-always-ascending)，但问题仍然存在。另外 - 似乎我必须更改我的代码，以便使用 Session 对象而不是 ViewState，还必须弄清楚这一点......

我的代码经过简化，只有两列：

aspx：

```
<asp:GridView ID="dgvView" runat="server" AutoGenerateColumns="false" AllowPaging="true"
    PageSize="10" AllowSorting="True" OnPageIndexChanging="DgvViewPageIndexChanging" OnSorting="OnSort">
    <Columns>
        <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name">
            <ItemStyle />
        </asp:BoundField>
        <asp:BoundField DataField="BirthDate" HeaderText="Birth date" DataFormatString="{0:dd.MM.yyyy}"
            SortExpression="BirthDate">
            <ItemStyle />
        </asp:BoundField>
    </Columns>
</asp:GridView> 
```

和代码隐藏：

```
public partial class TestPage :Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            DisplayData();
        }
    }

    private void DisplayData()
    {
        Session["TableView"] = GetUsers();
        dgvView.DataSource = Session["TableView"];
        dgvView.DataBind();
    }

    protected void DgvViewPageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        dgvView.PageIndex = e.NewPageIndex;
        DisplayData();
    }

    private List<MyUser> GetUsers()
    {
        var users = new List<MyUser>();
        for (int i = 0; i < 100; i++)
        {
            users.Add(new MyUser("Name" + i.ToString().PadLeft(2, '0'), new DateTime(2000, 1, 1).AddDays(i)));
        }
        return users;
    }

    private class MyUser
    {
        public string Name { get; private set; }
        public DateTime BirthDate { get; private set; }

        public MyUser(string name, DateTime birthDate)
        {
            Name = name;
            BirthDate = birthDate;
        }
    }

    protected void OnSort(object sender, GridViewSortEventArgs e)
    {
        Func<MyUser, object> f;
        if (e.SortExpression == "Name") f = u => u.Name;
        else f = u => u.BirthDate;

        dgvView.DataSource = Sort((List<MyUser>)Session["TableView"], f, GetSortDirection(e.SortExpression));
        dgvView.DataBind();
    }

    private List<MyUser> Sort<T>(IEnumerable<MyUser> user, Func<MyUser, T> f, SortDirection sortDirection)
    {
        if (sortDirection == SortDirection.Ascending) return user.OrderBy(f).ToList();
        return user.OrderByDescending(f).ToList();
    }

    private SortDirection GetSortDirection(string column)
    {
        string sessionVariable = "TableSort" + column;
        SortDirection sortDirection;

        if (Session[sessionVariable] == null)
        {
            sortDirection = SortDirection.Ascending;
        }
        else if ((SortDirection)Session[sessionVariable] == SortDirection.Ascending)
        {
            sortDirection = SortDirection.Descending;
        }
        else
        {
            sortDirection = SortDirection.Ascending;
        }

        Session[sessionVariable] = sortDirection;
        return sortDirection;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:13:49.417

您必须使用 ViewState 才能持久化您的数据

```
public string SortVariable
{
     get
     {
        if(ViewState["YourKey"] == null)
            return string.Empty;
        return (string)ViewState["YourKey"];
      }
     set 
     {
         ViewState["YourKey"] = value;
     }
} 
```

使用此解决方案，当您更改页面时，您可以在排序之前在视图状态中获得索引排序。

当您触发 SortCommand 时，您必须设置所描述的视图状态的值

你不需要 Session 因为你在同一个页面，你不需要导航

```
 protected void OnSort(object sender, GridViewSortEventArgs e)
    {

        //Here you set your value SortVariable
        SortVariable = e.SortExpression;
        ...
    } 
```

并在显示数据中

您创建数据视图和排序处理

```
private void DisplayData()
    {
            //GetSortVariable
            //before   bind with dataview you sort
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:42:25.137

问题在

```
protected void DgvViewPageIndexChanging(object sender, GridViewPageEventArgs e)
{
    dgvView.PageIndex = e.NewPageIndex;
    DisplayData();
} 
```

`DisplayData()`调用该方法时，您将网格与未排序的全新数据绑定。

保存你的排序参数`Viewstate`（会话对此无用）

如果您使用`Asp.Net 4`为什么不使用数据[表](http://www.jqgrid.com/)或[jQGrid](http://www.datatables.net)？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T20:50:14.170

我在其他两个答案的帮助下解决了这个问题。

我的解决方案：

```
public partial class TestPage1 : Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            ViewState["Data"] = MyUser.GetUsers();
            ViewState["SortExpression"] = "Name";
            DisplayData("Name", SortDirection.Ascending);
        }
    }

    private void DisplayData(string sortExpression, SortDirection sortDirection)
    {
        Func<MyUser, object> f;
        if (sortExpression == "Name") f = u => u.Name;
        else f = u => u.BirthDate;

        if (sortDirection == SortDirection.Ascending)
        {
            dgvView.DataSource = ((IEnumerable<MyUser>)ViewState["Data"]).OrderBy(f).ToList();
        }
        else
        {
            dgvView.DataSource = ((IEnumerable<MyUser>)ViewState["Data"]).OrderByDescending(f).ToList();
        }

        dgvView.DataBind();
    }

    protected void DgvViewPageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        dgvView.PageIndex = e.NewPageIndex;

        string sortExpression = ViewState["SortExpression"].ToString();
        DisplayData(sortExpression, GetDefaultSortDirection(sortExpression));
    }

    protected void OnSort(object sender, GridViewSortEventArgs e)
    {
        ViewState["SortExpression"] = e.SortExpression;
        ViewState[e.SortExpression] = GetReverseSortDirection(e.SortExpression);
        DisplayData(e.SortExpression, (SortDirection)ViewState[e.SortExpression]);
    }

    private SortDirection GetDefaultSortDirection(string sortExpression)
    {
        if (ViewState[sortExpression] == null)
        {
            ViewState[sortExpression] = SortDirection.Ascending;
        }

        return (SortDirection)ViewState[sortExpression];
    }

    private SortDirection GetReverseSortDirection(string sortExpression)
    {
        if (ViewState[sortExpression] == null)
        {
            ViewState[sortExpression] = SortDirection.Descending;
        }
        else
        {
            ViewState[sortExpression] = (SortDirection) ViewState[sortExpression] == SortDirection.Descending ? SortDirection.Ascending : SortDirection.Descending;
        }

        return (SortDirection)ViewState[sortExpression];
    }
} 
```

# osx-lion - Xcode 项目编辑器：下拉列表成为输入文本（使用 Xcode 4.4.1）

> ID：12159998
> 
> 赞同：1
> 
> 时间：2012-08-28T13:10:17.920
> 
> 标签：osx-lion, xcode4.4

我试图弄清楚为什么下拉列表成为 Xcode 项目编辑器的所有可编辑字段中的输入文本（我在 Lion 10.7.4 上使用 Xcode 4.4.1）。

这个问题正在影响我创建的所有项目，即使在卸载并重新安装 Xcode 后它仍然存在。在其他电脑上打开同样的项目是可以的。

例如，iOS 部署目标选择现在是一个简单的输入文本，而不是下拉列表。

这个问题很烦人，尤其是因为它很难设置代码签名配置。