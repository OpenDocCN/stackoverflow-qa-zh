# StackOverflow 问答 000853000-000853999

# iis - AUTH_USER 和 REMOTE_USER cgi 变量之间的区别

> ID：853006
> 
> 赞同：6
> 
> 时间：2009-05-12T14:14:04.930
> 
> 标签：iis, coldfusion, railo, openbd

文档对此并不完全清楚-这些变量之间有区别吗？至少在 IIS 上它们看起来是相同的，但如果它在其他服务器下可能不同，我不想依赖它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-12T14:58:43.107

根据 Adob​​e ColdFusion 文档，它们是相同的。

[http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Expressions_8.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Expressions_8.html)

看openbd源码，remote_user和auth_user映射到同一个key，所以返回同一个值。

查看 railo 源代码，我不太了解发生了什么，但它似乎正在设置 remote_user，我不确定是否在任何地方设置了 auth_user。

如果您正在设计一个与coldfusion、railo 和openbd 兼容的应用程序，使用remote_user 似乎更安全。也许其他人可以发表评论，因为我没有花时间深入调查就无法完全理解代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-01-09T22:03:41.097

REMOTE_USER 和 AUTH_USER 在 Adob​​eCF/IIS 中是相同的，但在 Adob​​eCF/Apache 中不同。使用 Adob​​eCF/Apache 时，AUTH_USER 将为空。

因此最好使用 REMOTE_USER 变量进行编码。如果您发现自己正在编写在 Apache 中引用 AUTH_USER 的代码，有一种方法可以让 Apache 使用 mod_rewrite 填充该变量。这将导致 Apache 将 REMOTE_USER 复制到 AUTH_USER 中：

RewriteCond %{REMOTE_USER} (. *) RewriteRule 上的 RewriteEngine。*- [E=AUTH_USER:%1]

这里有更多信息：http: [//www.stillnetstudios.com/copying-env-variables-in-apache/](http://www.stillnetstudios.com/copying-env-variables-in-apache/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-12T14:24:51.897

我相当确定 REMOTE_USER 是标准的 CGI 变量。

根据此页面，它们是相同的：http: [//livedocs.adobe.com/coldfusion/6/CFML_Reference/Expressions5.htm](http://livedocs.adobe.com/coldfusion/6/CFML_Reference/Expressions5.htm)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-15T23:09:05.447

为了安全起见，请坚持使用 REMOTE_USER，因为它是 CGI/1.0 规范中定义的（在此处找到[http://www.ietf.org/rfc/rfc3875](http://www.ietf.org/rfc/rfc3875)）

AUTH_USER 似乎随着时间的推移潜入

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-12T17:12:34.260

根据我的经验，CGI 变量往往会在 Web 服务器（Apache、IIS、JRun 等）之间甚至在它们的版本之间有所不同。当基于 CGI 变量时，唯一安全的选择是检查您的开发、舞台、生产（等）服务器上显示的值。

# c++ - 根据最小和查找数组的元素

> ID：853007
> 
> 赞同：4
> 
> 时间：2009-05-12T14:14:19.063
> 
> 标签：c++, arrays, sum, subset-sum

我用 C++ 编写了一个循环来给我 6 个随机数并将它们存储在一个数组中。我想做的是对数组的元素求和，直到我得到一个大于数字“x”的值，但我想这样做而不必添加所有元素。目标是找到总和为 x 值的第一个元素。

例如，数组是`[1,2,3,4,5,6]`，和`x = 6`，所以我要寻找的是元素`[1,2,3]`。

我查看了标准库并尝试使用“valarray”中的 sum 函数，但这只是给出了所有元素的总和。任何关于如何成功编码的想法将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-12T14:21:54.367

编写一个进行加法的函子。

```
#include <algorithm>
struct SumToo
{
     SumToo(int val):m_val(val),m_sum(0) {}
     int m_val;
     int m_sum;

     bool operator()(int next)
     {
         m_sum += next;
         return m_sum >= m_val;
     }
 };

 int main()
 {
       int data[] = {1,2,3,4,5,6};

       int* find = std::find_if(data,data+6,SumToo(6));
 } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-12T14:18:24.483

我假设您只想要数组中的第一个 X 元素，直到它们的总和达到或超过阈值（那里的问题有点模糊）。

如果是这样，如果没有您自己的循环，我不知道该怎么做：

```
int sum = 0;
int i = 0;
for( ; i < len; ++i ) {
    sum += array[i];
    if( sum >= 6 ) {
        break;
    }
} 
```

现在“i”包含总和达到或超过阈值的索引。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-13T10:03:43.500

避免建议将 find_if 与有状态谓词一起使用的答案。有状态的谓词是危险的，因为 STL 算法假定复制谓词是安全的。在这种情况下，如果对谓词进行复制，则每个谓词将具有不同的“运行总计”，并且不一定对所有值或以正确的顺序起作用。

尤其要避免将其谓词的 operator() 成员实现为 const 成员函数但将其成员标记为可变的解决方案，因为这会让您误以为它不是有状态的谓词，这是不好的。

我建议使用简单循环查找答案的答案之一，或者使用累加器的答案，因为这是最正确的方法（即使代码看起来有点笨拙。

请注意，警告可能不适用于 C 数组和 find_if；我只是不希望您知道有状态谓词是解决问题的正确方法，因为您最终可能会在将来危险的情况下使用不正确的解决方案。

参考：C++ 编码标准：101 条规则、指南和最佳实践，第 87 条

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-12T15:53:20.067

从*x*中逐个减去数字，直到达到 0 或更低。

没有添加，如你所愿:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-12T19:54:20.347

这是一个更通用的版本：

```
#include <iostream>
#include <algorithm>

// return an iterator _Last such that sum 
// of all elements in the range [_First, _Last)
// satisfies the predicate Func
template<class InIt,
class Ty,
class Fn> inline
InIt accumulate_if(InIt First, InIt Last, Ty Val, Fn Func)
{   
    for (; Func(Val) && First != Last; ++First)
        Val = Val + *First;
    return (First);
}

int main() {
    int num[] = {1, 2, 3, 4, 5, 6};
    int *last = accumulate_if(num, num + sizeof num / sizeof num[ 0 ], 
                              0, std::bind2nd(std::less<int>(), 6));
    std::copy(num, last, std::ostream_iterator<int>(std::cout, "\n"));
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-12T14:21:03.200

好吧，我会使用矢量

```
T addUntil(T array[],size_t len,T thres){
    vector<T> vec = vector_from_array(array,len)
    T sum;
    for (size_t i=0;i< vec.size(),sum<thresh;i++){
          sum+= vec[i];
    }
    return sum;
} 
```

T 需要定义 operator+ 和 operator<。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-12T14:23:41.463

会是这样的：

```
struct StopAtValue{
  StopAtValue(int sum) : m_sum(sum), m_accumulated(0){}
  bool operator()(int val){
    m_accumulated += val;
    return m_accumulated >= sum;
  }
  int m_sum;
  int m_accumulated;
}

int* pos = std::find_if(&array[0], &array[n], StopAtValue(6)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-13T09:53:16.247

希望这有效：

```
/* Returns an index i, given array valarray[0,1..n] and number x where i is an index to valarry such that sum over j of valarray[j] for j = 0 to i > x */
int getFirstSum(int *valarray, int n, int x)
{
   int i = 0;
   int sum = x;
   while(sum > x && i < n)
   {
      i++;
      sum -= valarray[i];
   }
   return i;
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-05-12T14:29:39.780

您可以将 std::find_if() 与保持运行总数的函子一起使用，并且仅当您找到使您处于或超过顶部的元素时，才从函子返回 true。

例如：

```
#include <cstdlib>
#include <algorithm>
#include <functional>
#include <iostream>
#include <string>
using namespace std;

// functor returns true when the running total >= findVal
struct running_total : public unary_function<int, bool>
{
    running_total(int findVal) : findVal_(findVal), runningTtl_(0) {};
    bool operator()(int rhs) const
    {
        runningTtl_ += rhs;
        if( runningTtl_ >= findVal_ )
            return true;
        else
            return false;
    }
private:
    mutable int runningTtl_;
    const int findVal_;
};

int main()
{

    int nums[] = {1, 2, 3, 4, 5, 6};
    size_t count = sizeof(nums)/sizeof(nums[0]);

    const int scanTtl = 6;  // running total to scan to
    int * pos = find_if(&nums[0], &nums[0]+count, running_total(scanTtl));

    cout << "Elements Totaling " << scanTtl << " : ";
    copy(&nums[0], pos+1, ostream_iterator<int>(cout, ", "));

    return 0;
} 
```

# asp-classic - 经典 ASP 页面中的间歇性“除以零”错误

> ID：853008
> 
> 赞同：1
> 
> 时间：2009-05-12T14:14:21.187
> 
> 标签：asp-classic, vbscript, iis-6, windows-server-2003, divide-by-zero

这是一个奇怪的问题。在 Windows Server 2000 上运行良好的 Web 应用程序在 Windows Server 2003 R2 上遇到间歇性错误。间歇性是指我自己和 2 名测试人员可以在浏览 Web 应用程序后 5 分钟内找到错误。

错误总是“除以零” - 800a000b

它失败的最常见的代码行是包含文件。该行是：

```
Response.ExpiresAbsolute = Now() - 10 
```

一旦我将其更改为：

```
Response.Expires = 0 
```

我再也无法在该页面上看到错误了。但是，然后我开始在其他页面上收到错误。到目前为止，我有以下代码行报告错误：

```
nSearchPos = CLng((nLBound + nUBound) / 2) 
```

和

```
next 
```

我目前正在创建 Windows Server 2003 的“R1”实例，以查看是否可以在此服务器上重现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T14:30:42.680

如果你谷歌这个，你会看到很多人有类似的问题。我不确定我有一个好的答案，但这...

[http://blogs.msdn.com/dougste/archive/2008/11/12/random-and-unexpected-exception-flt-divide-by-zero-and-exception-flt-invalid-operation.aspx](http://blogs.msdn.com/dougste/archive/2008/11/12/random-and-unexpected-exception-flt-divide-by-zero-and-exception-flt-invalid-operation.aspx)

...有一些原因背后为什么会出现问题。您是否运行了可能导致问题的第 3 方组件？

# flash - Google Maps Flash API 禁止 MouseEvent 在其标记上冒泡

> ID：853010
> 
> 赞同：2
> 
> 时间：2009-05-12T14:14:36.927
> 
> 标签：flash, actionscript-3, google-maps, event-handling, mouseevent

默认情况下，Google Maps Flash API 会取消在其标记上发生的所有鼠标事件的冒泡（至少可拖动）。但是在 MapMouseEvent 构造函数中，我看到它有一个参数“气泡？” 所以我猜他们可以用来冒泡鼠标事件？有没有办法打开鼠标事件的冒泡？

```
var __marker = new Marker(new LatLng(20, 20), 
    new MarkerOptions({
            draggable: true,
            tooltip:'Drag me'
        }));
    __map.addOverlay(__marker); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-20T21:34:53.470

抱歉，我还没有在 Flash 中测试过新的 Google Maps API。据我记得，您可以将侦听器分配给标记，因此如果默认情况下禁用冒泡，理论上您需要做的就是为您拥有的所有标记侦听您想要的事件以及何时触发事件侦听器使用该处理程序中所需的所有数据调度您自己的自定义事件，并将冒泡设置为 true。

例如

```
//assuming SomeGoogleMarkerEvent is a Google Marker Event :)
//and CustomMarkerEvent is a subclass of Event (or another subclass of it )

function markerHandler(event:SomeGoogleMarkerEvent):void{
var customEvent:CustomMarkerEvent = new CustomMarkerEvent();
customEvent.marker = event.target;
dispatchEvent(customEvent,true);
} 
```

我在[dispatchEvent](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/events/EventDispatcher.html#dispatchEvent())调用中设置为 true 的第二个参数是冒泡。但请记住，只有 DisplayObjects 的事件会冒泡。有很多关于事件调度的[资源](http://www.adobe.com/devnet/actionscript/articles/event_handling_as3_03.html)，但我很容易忘记 DisplayObjects 和冒泡。

希望能帮助到你！

# google-analytics - Google Analytics 统计的网站访问者人数不到一半

> ID：853011
> 
> 赞同：0
> 
> 时间：2009-05-12T14:14:44.693
> 
> 标签：google-analytics

谷歌分析让我很困惑。

我一直觉得我的电子商务网站的 Google Analytics 访问者数量太少。今天我仔细看了看。

上周末，周六网站上有大约 8 个订单（来自不同客户），周日有 9 个订单。然而，谷歌分析在周六和周日都只显示了 3 位访客。

以下熟悉的代码片段位于网站的主模板中，每次点击都会调用该模板。

```
<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    try {
        var pageTracker = _gat._getTracker("UA-xxxxxxx-1");
        pageTracker._trackPageview();
    } catch(err) {}
</script> 
```

是的，我正在过滤（排除）一些固定 IP 地址，但仅限于我自己的站点。

我知道无法计算禁用 Javascript 的访问者，但我不相信这可以解释它。

这是怎么回事，这正常吗？有谁知道为什么一半以上的访客没有被计算在内？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T14:38:08.640

这应该在您的内容的顶部。

```
<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script> 
```

这应该在您的内容的底部：

```
<script type="text/javascript">
    try {
            var pageTracker = _gat._getTracker("UA-xxxxxxx-1");
            pageTracker._trackPageview();
    } catch(err) {}
</script> 
```

如果你这样做了，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T14:34:52.283

在阅读[这个 StackOverflow 问题](https://stackoverflow.com/questions/852892/load-google-analytics-from-jquery-document-ready)时，我注意到我已经更改了脚本块：

```
<script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
        try {
                var pageTracker = _gat._getTracker("UA-xxxxxxx-1");
                pageTracker._trackPageview();
        } catch(err) {}
</script> 
```

根据谷歌的说法，这应该分为两部分：

```
<script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
        try {
                var pageTracker = _gat._getTracker("UA-xxxxxxx-1");
                pageTracker._trackPageview();
        } catch(err) {}
</script> 
```

我已将其更改为推荐的格式，正在等待接下来几天会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T16:10:36.717

您可以设置另一个配置文件来收集未过滤的数据并将报告与过滤后的配置文件进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T14:23:19.170

我在我的许多网站上都使用了 Google Analytics，到目前为止还没有遇到过这个问题。您可以在此处查看 google 支持页面。您是否还检查过您的站点是否配置为使用[正确的时区](https://www.google.com/support/googleanalytics/bin/answer.py?answer=55512&hl=en_US)？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T14:32:52.240

> 我知道无法计算禁用 Javascript 的访问者，但我不相信这可以解释它。

您查看过服务器的访问日志吗？将他们与 Google Analytics（分析）结合起来，看看哪些访问者没有被计算在内？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-08T17:20:55.200

我编写了自己的访客计数器（连同 IP、reoslution、http 用户代理和其他信息的记录）。计数器由 javascript 启动。

我在 3 个不同的网站上使用了它，几个月后我得出结论，谷歌分析正在减少实际访问者数量的很大一部分（15% 到 40%）。

也许它与 addblock 浏览器插件有关？

# linq-to-sql - LINQ to SQL 和带空格的列别名

> ID：853016
> 
> 赞同：10
> 
> 时间：2009-05-12T14:16:43.163
> 
> 标签：linq-to-sql

对 Linq 来说还是有点新意。这让我发疯了。我想给一个列加上别名，别名应该有一个空格。

这工作正常：

```
Dim q = From tmp in t.Table Select iDate = tmp.iDate 
```

但是，我希望这个工作

```
Dim q = From tmp in t.Table Select "Some Alias With Space" = tmp.iDate 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T14:21:00.657

首先，别名不能有空格，就像任何变量名都不能有空格一样。我的问题是为什么你想要/需要在你的名字中有一个空格？我敢肯定，有更好的方法可以实现您想要实现的目标，而无需尝试制定不良命名约定的不良做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-10-11T15:25:44.453

使用方括号在**LinqToSql**中使用别名，例如

```
[Some Alias With Space] = tmp.iDate 
```

如果这不起作用，则删除空格并使用`[]`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-11-23T21:00:20.843

在一个或多个列之前使用简单别名：

```
var x = from data in mdc.Accounts
select new
{
    data.AccountName,
    Total = data.CashAndEquivalent + data.MarginBalance
};

//Total is the alias 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-30T11:21:43.850

**通过使用数据表**

```
DataTable dt = (from x in obj.GetAllReqVSTFs()
                select new
                    {
                        VSTF_id = x.VSTF_id,
                        x.Description,
                        x.PM1,
                        x.PM2,
                        x.Analyst_Status,
                        x.Overall_Status,
                        x.Planed_Analyst_End_Date
                    }).Take(5).ToList().ToDataTable();
foreach (DataColumn c in dt.Columns)
{
    c.ColumnName = c.ColumnName.Replace("_", " ");
}

gvBurntHours.DataSource = dt;
gvBurntHours.DataBind(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T14:19:13.750

据我所知，您不能这样做，因为列别名必须是有效的 C# 标识符，并且它们不允许空格。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-03T16:04:42.350

如果您需要它来将数据绑定到gridview，[这个](https://forums.asp.net/t/1331413.aspx?How%20can%20I%20create%20a%20space%20in%20my%20column%20name%20with%20LINQ%20)例子可以工作：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        using (var db = new MyDataContextDataContext())
        {
            var bl2 = (from b in db.Table1 
                          select new{b.AttendanceDate, Course = b.CourseCode + " - " + b.CourseSection, b.CourseName, TeacherName = b.StaffLastName + ", " + b.StaffFirstName}
                          );

            grd.DataSource = bl2;
            grd.DataBind();  
        }
    }

        protected void grd_RowCreated(object sender, GridViewRowEventArgs e)
        {
            if (e.Row.RowType == DataControlRowType.Header){
                e.Row.Cells[0].Text = "Attendance Date";
                e.Row.Cells[1].Text = "Course Code and Section";
                e.Row.Cells[2].Text = "Course Name";
                e.Row.Cells[3].Text = "Teacher Name";

            }
        }

        <asp:GridView ID="grd" class="table table-striped" runat="server" OnRowCreated="grd_RowCreated">
            <EmptyDataTemplate>
                None
            </EmptyDataTemplate>
        </asp:GridView> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-05-12T14:22:27.003

你不能，对不起。地狱，如果您将名称中带有空格的表带入 Linq，它将自动用下划线替换空格。

除了不可能之外，这是一个极其糟糕的主意。写 Access 的人应该被枪杀。

# java - 将字符串中的单个字符转换为小写

> ID：853017
> 
> 赞同：14
> 
> 时间：2009-05-12T14:17:01.397
> 
> 标签：java

我喜欢从 getter 方法中“猜测”属性名称。所以'getSomeAttribute' 应转换为'someAttribute'。

通常我会做类似的事情

```
String attributeName = Character.toLowerCase(methodName.indexOf(3)) 
                       + methodName.substring(4); 
```

很丑，对吧？我通常将其隐藏在一种方法中，但是有人知道更好的解决方案吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-12T14:23:14.007

我认为你的解决方案很好。我认为没有更简单的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-12T14:20:22.250

Commons Lang的[uncapitalize](http://commons.apache.org/lang/api-release/org/apache/commons/lang/StringUtils.html#uncapitalize(java.lang.String))方法会帮助你，但我认为你的解决方案并不那么粗糙。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-12T14:22:20.483

[uncapitalize](http://commons.apache.org/lang/api-release/org/apache/commons/lang/StringUtils.html#uncapitalize(java.lang.String)) from [commons lang](http://commons.apache.org/lang/)会这样做：

```
String attributeName = StringUtils.uncapitalize(methodName.substring(3)); 
```

我需要很多 commons lang，但如果你不喜欢那个额外的 jar，你可以复制该方法。正如你在其中看到的，他们像你一样做：

```
public static String uncapitalize(String str) {
    int strLen;
    if (str == null || (strLen = str.length()) == 0) {
        return str;
    }
    return new StringBuffer(strLen)
        .append(Character.toLowerCase(str.charAt(0)))
        .append(str.substring(1))
        .toString();
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-12T14:28:16.070

看看[JavaBeans API](http://java.sun.com/javase/6/docs/api/java/beans/package-summary.html)：

```
BeanInfo info = Introspector.getBeanInfo(bean
       .getClass(), Object.class);
for (PropertyDescriptor propertyDesc : info
       .getPropertyDescriptors()) {
  String name = propertyDesc.getName();
} 
```

另请参阅[去资本化](http://java.sun.com/javase/6/docs/api/java/beans/Introspector.html#decapitalize(java.lang.String))。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-12T18:47:25.383

值得记住的是；

*   并非所有 getXXX 方法都是 getter，例如 double getSqrt(double x)、void getup()。
*   返回布尔值、以 is 开头且不带参数的方法可以是 getter，例如 boolean isActive()。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-21T04:48:36.527

给定一个字符缓冲区，您可以应用以下代码：

```
int i = 0;
for(char x : buffer) {
    buffer[i] = Character.toLowerCase(x);
    i++;
} 
```

测试和功能:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-12T14:22:26.787

在我看来很好。是的，它看起来很冗长，但请考虑您正在尝试做什么，以及如果其他程序员试图理解这段代码试图做什么，他们会怎么想。如果有的话，我会通过添加您正在做的事情（从 getter 方法猜测属性名称）作为评论来延长它。

# c# - 具有返回值类型推断的委托 (C#)

> ID：853018
> 
> 赞同：4
> 
> 时间：2009-05-12T14:17:14.363
> 
> 标签：c#, .net, delegates, type-inference

我对代表还很陌生，我一直在使用 Steven John Metsker 的“C# 中的设计模式”一书中描述的基于代表的数据访问层（一本优秀的读物！）。它像这样定义数据访问委托：

```
public delegate object BorrowReader(IDataReader reader); 
```

使用它的结果是如下代码之一：

```
var result = Foo.Bar(new BorrowReader(DoFooBarMagic));
var result = Foo.Bar(DoFooBarMagic); 
```

但是，由于委托的返回类型是“object”，因此您需要强制转换以获取方法（本例中的“DoFooBarMagic”）真正返回的任何内容。因此，如果“DoFooBarMagic”返回 List，您需要执行以下操作：

```
var result = Foo.Bar(DoFooBarMagic) as List<string>; 
```

我想要的是能够跳过强制转换并从委托方法的返回类型中推断出委托的返回类型。我的想法是也许有一种方法可以使用 Type 参数来推断返回类型。类似于其中之一：

```
public delegate T BorrowReader<T>(IDataReader reader);
List<string> result = Foo.Bar(new BorrowReader(DoFooBarMagic)); 
//Look, Ma, no cast!
var result2 = Foo.Bar(DoFooBarMagic); 
```

从委托方法的返回类型推断返回的类型，但这似乎不起作用。相反，您必须这样做：

```
public delegate T BorrowReader<T>(IDataReader reader);
var result = Foo.Bar(new BorrowReader<List<string>>(DoFooBarMagic)); 
```

这似乎比演员阵容更好。

那么有没有办法从委托方法的返回类型推断委托的返回类型呢？

**编辑添加：** 如果需要，我可以更改 Foo.Bar 的签名。当前的签名基本上是这样的：

```
public static T Bar<T>(string sprocName,
                       DbParameter[] params, 
                       BorrowReader<T> borrower); 
```

注意：该签名是当前状态的结果，它使用了这个委托定义：

```
public delegate T BorrowReader<T>(IDataReader reader); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T14:33:24.080

怎么样：

```
public static T Bar2<T>(Func<IDataReader,T> func) where T : class
{
    BorrowReader borrower = new BorrowReader(func);
    return (T) Foo.Bar(borrower);
} 
```

我知道它仍然在做演员，这很丑陋，但它应该可以工作。（我原本以为你可以从 隐式转换中逃脱`func`，但显然不是。至少在 C# 4.0 之前不会。）

当然，如果您可以将签名更改`Foo.Bar`为通用的，那您就笑了...

编辑：回答评论：如果方法的签名被更改为采用通用委托，例如

```
public static T Bar<T>(Func<IDataReader, T> func) 
```

那么调用代码*几乎*可以是：

```
var result = Foo.Bar(DoFooBarMagic); 
```

不幸的是，类型推断不适用于方法组，因此您必须使用：

```
Func<IDataReader, List<string>> func = DoFooBarMagic;
var result = Foo.Bar(func); 
```

或（更好，如果效率*稍低）*

```
var result = Foo.Bar(reader => DoFooBarMagic(reader)); 
```

所以你是对的 - 这个答案并没有让 OP 完全符合要求，但大概它已经足够接近得到接受了。希望此编辑有助于解释其余部分:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T14:23:26.067

这很难看，但您可以使用 out 参数。从我的枚举解析器：

```
public static T Parse<T>(string value)
{
    // return a value of type T
}

public static void Parse<T>(string value, out T eValue)
{
    // do something and set the out parameter
}

// now can be called via either
SomeEnum blah = Enums.Parse<SomeEnum>("blah");

// OR
SomeEnum blah;
Enums.Parse("blah", out blah); 
```

第二个会推断类型，但就像我说的，它很难看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T14:25:05.640

不使用泛型。类型推断是一个编译时事件。一种解决方案是在您发布时拥有一个通用委托。通用委托会比强制转换更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T14:25:19.337

我不认为有办法解决它。至少不是你提议的方式。主要问题是，由于它必须在编译时进行推断，如果您没有明确的返回类型，那么编译器实际上无法推断返回类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T23:02:51.770

```
// if BorrowReader is generic...
public delegate T BorrowReader<T>(IDataReader reader);

public class Foo
{
    // ... and Foo.Bar() is also generic
    public static T Bar<T>(BorrowReader<T> borrower) { ... }

    public void SomeMethod()
    {
        // this does *not* work (compiler needs more help)
        var result1 = Foo.Bar(DoFooBarMagic);

        // but instead of this (which works)
        var result2 = Foo.Bar(new BorrowReader<List<string>>(DoFooBarMagic));

        // you can do this (also works)
        // which emits the same IL, anyway
        var result3 = Foo.Bar<List<string>>(DoFooBarMagic);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-01-26T17:11:08.280

我希望 F# 可以做到这一点。我不是专家，但 F# 确实使用返回类型类型推断（[MSDN 上的详细信息](http://msdn.microsoft.com/en-us/library/dd233180.aspx)）。

# java - JTable 滚动到指定的行索引

> ID：853020
> 
> 赞同：51
> 
> 时间：2009-05-12T14:18:16.403
> 
> 标签：java, swing, jtable, jscrollpane

我有一个 JTable，它`JScrollPane.`在运行时根据我的应用程序中发生的事件添加到表中。当向表中添加新行时，我想让 scoll 窗格滚动到表的底部。

对于 JLists 有`[ensureIndexIsVisible][1]()`强制列表中的特定索引可见。我正在寻找相同的东西，但要寻找 JTable。看起来我可能必须手动移动滚动窗格上的滚动视图，但我认为必须有一种更简单的方法。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2011-06-03T15:20:27.017

很简单，JTable 也有 scrollRectToVisible 方法。如果你愿意，如果添加了新记录，你可以尝试这样的方法使滚动窗格转到底部：

```
jTable1.getSelectionModel().setSelectionInterval(i, i);
jTable1.scrollRectToVisible(new Rectangle(jTable1.getCellRect(i, 0, true))); 
```

***我***最后添加的记录在哪里。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2009-05-12T14:24:31.367

请参阅此示例：[http ://www.exampledepot.com/egs/javax.swing.table/Vis.html](http://www.exampledepot.com/egs/javax.swing.table/Vis.html)

更新：该链接现已过时，这里是代码（来自[http://smi-protege.stanford.edu/repos/protege/protege-core/trunk/src/edu/stanford/smi/protege/util/ComponentUtilities.爪哇](http://smi-protege.stanford.edu/repos/protege/protege-core/trunk/src/edu/stanford/smi/protege/util/ComponentUtilities.java))

```
public static void scrollToVisible(JTable table, int rowIndex, int vColIndex) {
        if (!(table.getParent() instanceof JViewport)) {
            return;
        }
        JViewport viewport = (JViewport)table.getParent();

        // This rectangle is relative to the table where the
        // northwest corner of cell (0,0) is always (0,0).
        Rectangle rect = table.getCellRect(rowIndex, vColIndex, true);

        // The location of the viewport relative to the table
        Point pt = viewport.getViewPosition();

        // Translate the cell location so that it is relative
        // to the view, assuming the northwest corner of the
        // view is (0,0)
        rect.setLocation(rect.x-pt.x, rect.y-pt.y);

        table.scrollRectToVisible(rect);

        // Scroll the area into view
        //viewport.scrollRectToVisible(rect);
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-12T14:27:02.300

JList 在内部使用[scrollRectToVisible](http://java.sun.com/j2se/1.4.2/docs/api/javax/swing/JComponent.html#scrollRectToVisible(java.awt.Rectangle))并指定要滚动到的坐标。我认为您将不得不为 JTable 重新编码类似的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T11:51:50.407

第一个答案效果很好，但所选行位于表格底部。所以我创建了这个修改版本：

```
private void scrollToVisible(int rowIndex, int vColIndex ) {
        JTable table = getTablePanel().getTable();
        if (!(table.getParent() instanceof JViewport)) {
            return;
        }
        if (table.getRowCount()<1){
            return;
        }
        JViewport viewport = (JViewport)table.getParent();
        // view dimension
        Dimension dim = viewport.getExtentSize();
        // cell dimension
        Dimension dimOne = new Dimension(0,0);

        // This rectangle is relative to the table where the
        // northwest corner of cell (0,0) is always (0,0).
        Rectangle rect = table.getCellRect(rowIndex, vColIndex, true);
        Rectangle rectOne;
        if (rowIndex+1<table.getRowCount()) {
            if (vColIndex+1<table.getColumnCount())
                vColIndex++;
            rectOne = table.getCellRect(rowIndex+1, vColIndex, true);
            dimOne.width=rectOne.x-rect.x;
            dimOne.height=rectOne.y-rect.y;
        }

        // '+ veiw dimension - cell dimension' to set first selected row on the top

        rect.setLocation(rect.x+dim.width-dimOne.width, rect.y+dim.height-dimOne.height);

        table.scrollRectToVisible(rect);
    } 
```

现在选定的行位于表格的顶部。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-20T22:17:25.237

在我看来，设置视口位置而不是滚动表格要容易得多。以下是我的代码。

```
public void scrollCellToView(int rowIndex, int vColIndex) {
    if (!(this.getParent() instanceof JViewport)) {
        return;
    }
    JViewport viewport = (JViewport) this.getParent();
    Rectangle rect = this.getCellRect(rowIndex, vColIndex, true);
    Rectangle viewRect = viewport.getViewRect();

    int x = viewRect.x;
    int y = viewRect.y;

    if (rect.x >= viewRect.x && rect.x <= (viewRect.x + viewRect.width - rect.width)){

    } else if (rect.x < viewRect.x){
        x = rect.x;
    } else if (rect.x > (viewRect.x + viewRect.width - rect.width)) {
        x = rect.x - viewRect.width + rect.width;
    }

    if (rect.y >= viewRect.y && rect.y <= (viewRect.y + viewRect.height - rect.height)){

    } else if (rect.y < viewRect.y){
        y = rect.y;
    } else if (rect.y > (viewRect.y + viewRect.height - rect.height)){
        y = rect.y - viewRect.height + rect.height;
    }

    viewport.setViewPosition(new Point(x,y));
} 
```

# python - 如何在 Python 列表中找到项目的位置？

> ID：853023
> 
> 赞同：5
> 
> 时间：2009-05-12T14:18:36.730
> 
> 标签：python

我想在列表列表中查找特定项目的位置。它应该返回一个元组列表，其中每个元组代表该项目的特定实例的索引。例如：

```
list = [['1', '2', '4', '6'], ['7', '0', '1', '4']]
getPosition('1')  #returns [(0, 0), (1, 2)]
and getPosition('7') #returns [(1,0)] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-12T15:19:58.047

如果你想要的东西

*   查找重复项和
*   处理嵌套列表（...的列表列表）

您可以执行以下操作：

```
def get_positions(xs, item):
    if isinstance(xs, list):
        for i, it in enumerate(xs):
            for pos in get_positions(it, item):
                yield (i,) + pos
    elif xs == item:
        yield () 
```

测试这个：

```
>>> xs = [['1', '2', '4', '6'],
...       ['7', '0', '1', '4'],
...       [ [ '0', '1', '1'], ['1']]
...       ]
>>> print list(get_positions(xs, '1'))
[(0, 0), (1, 2), (2, 0, 1), (2, 0, 2), (2, 1, 0)] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-12T14:23:36.923

对于子列表和给定项目的列表，看起来您希望返回每对所在的对列表（子列表的索引，子列表中项目的索引）。您可以使用[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)和 Python 的内置[`enumerate()`](http://docs.python.org/library/functions.html#enumerate)函数来做到这一点：

```
def getPosition(list, item):
    return [(i, sublist.index(item)) for i, sublist in enumerate(list)] 
```

**编辑：**见上面/下面@scribble 的回答。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-14T00:55:28.003

```
def getPosition(list, item):
    return [(i, sublist.index(item)) for i, sublist in enumerate(list) 
                                                      if item in sublist] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-12T14:21:07.613

```
def get_positions(xs, target):
    return [(i,e.index(target)) for i,e in enumerate(xs)] 
```

这是一个很好的起点。大概您有某种课程，例如

```
class SomeClass:
    def __init__(self):
        self.xs = [['1','2','4','6'], ['7','0','1','4']]

    def get_positions(self, target):
        return [(i,e.index(target)) for i,e in enumerate(self.xs)] 
```

在这种情况下会让你说

```
model = SomeClass()
model.get_position(1)    # returns [(0,0), (1,2)] 
```

请注意，在这两种情况下，如果您的目标不在您的每个子列表中，您都会遇到异常。该问题未指定这是否是所需的行为。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-12T14:51:49.550

如果您不想在项目不在列表中的情况下出现异常，请尝试此操作。也可以作为发电机，因为它们很酷且用途广泛。

```
xs = [['1', '2', '4', '6'], ['7', '0', '1', '4']]
def get_positions(xs, item):
    for i, xt in enumerate( xs ):
        try: # trying beats checking
            yield (i, xt.index(item))
        except ValueError: 
            pass

print list(get_positions(xs, '1'))
print list(get_positions(xs, '6'))

# Edit for fun: The one-line version, without try:

get_positions2 = lambda xs,item: ((i,xt.index(item)) for  i, xt in enumerate(xs) if item in xt)

print list(get_positions2(xs, '1'))
print list(get_positions2(xs, '6')) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-13T02:39:12.413

这是另一种不使用生成器的直接方法。

```
def getPosition(lists,item):
    positions = []
    for i,li in enumerate(lists):
        j = -1
        try:
            while True:
                j = li.index(item,j+1)
                positions.append((i,j))
        except ValueError:
            pass
    return positions

l = [['1', '2', '4', '6'], ['7', '0', '1', '4']]
getPosition(l,'1')  #returns [(0, 0), (1, 2)]
getPosition(l,'9') # returns []

l = [['1', '1', '1', '1'], ['7', '0', '1', '4']]
getPosition(l,'1')  #returns [(0, 0), (0, 1), (0,2), (0,3), (1,2)] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-12T15:39:48.500

不久前，我为 python 编写了一个库来进行列表匹配，这非常符合要求。它使用标记 ?、+ 和 * 作为通配符，其中 ? 表示单个原子，+ 是非贪婪的一个或多个，* 是贪婪的一个或多个。例如：

```
from matching import match

match(['?', 2, 3, '*'], [1, 2, 3, 4, 5])
=> [1, [4, 5]]

match([1, 2, 3], [1, 2, 4])
=> MatchError: broken at 4

match([1, [2, 3, '*']], [1, [2, 3, 4]])
=> [[4]]

match([1, [2, 3, '*']], [1, [2, 3, 4]], True)
=> [1, 2, 3, [4]] 
```

在这里下载：[http ://www.artfulcode.net/wp-content/uploads/2008/12/matching.zip](http://www.artfulcode.net/wp-content/uploads/2008/12/matching.zip)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-12T23:26:22.917

这是一个没有 try..except 的版本，返回一个迭代器和

```
[['1', '1', '1', '1'], ['7', '0', '4']] 
```

返回

```
[(0, 0), (0, 1), (0, 2), (0, 3)] 

def getPosition1(l, val):
  for row_nb, r in enumerate(l):
      for col_nb in (x for x in xrange(len(r)) if r[x] == val):
         yield row_nb, col_nb 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-13T01:29:19.390

最紧张也可能是最慢的方法是：

```
 >>> value = '1'
    >>> l = [['1', '2', '3', '4'], ['3', '4', '5', '1']]
    >>> m = []
    >>> for i in range(len(l)):
    ...  for j in range(len(l[i])):
    ...   if l[i][j] == value:
    ...    m.append((i,j))
    ...
    >>> m
    [(0, 0), (1, 3)] 
```

# apache-flex - 如何防止从 PopUpButton 打开的画布在失去焦点时关闭？

> ID：853027
> 
> 赞同：0
> 
> 时间：2009-05-12T14:19:24.140
> 
> 标签：apache-flex, validation, alert

我有一个弹出按钮，用于启动包含用户可以提交的表单的画布。我正在验证此表单并在验证失败时显示警报。一旦用户在警报上单击“确定”，从 PopUpButton 启动的画布就会失去焦点并自动关闭（其默认行为）。PopUpButton._closeOnActivity 是私有的。非常感谢任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T20:13:42.280

使用 PopUpManager 和普通按钮手动弹出某些内容，而不是使用 PopUpButton。然后，您可以在需要时打开和关闭它，并避免默认行为。

```
var canvas:Canvas = new Canvas();
PopUpManager.addPopUp(canvas, this);
PopUpManager.centerPopUp(canvas);
PopUpManager.removePopUp(canvas); 
```

# facebook - 脸书提要

> ID：853037
> 
> 赞同：0
> 
> 时间：2009-05-12T14:21:21.373
> 
> 标签：facebook, feed

我正在尝试在 facebook 用户提要上发布一些内容，然后将用户重定向到另一个页面，但似乎该页面只是不断重新加载而没有任何发送用户提要的提示。

```
FB.Connect.showFeedDialog(1111111, null, null, null, null, null, redirectTo(), null, null);
function redirectTo()
{
     window.top.location = "/mywebsite";
} 
```

如果我只是用 id 调用节目提要，它可以正常工作。

```
 FB.Connect.showFeedDialog(1111111, null, null, null, null, null, redirectTo(), null, null); 
```

任何知道为什么第一行代码不断在不定式循环中重新加载页面的人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T14:28:24.043

注册回调函数时，您希望将引用传递给函数，而不是实际调用该函数。从第一行的 redirectTo 中删除括号：

```
FB.Connect.showFeedDialog(1111111, null, null, null, null, null, redirectTo, null, null);
function redirectTo(){
     window.top.location = "/mywebsite";
} 
```

# visual-studio - 在 Visual Studio 中重新打开上次关闭的选项卡

> ID：853038
> 
> 赞同：155
> 
> 时间：2009-05-12T14:21:41.047
> 
> 标签：visual-studio

有没有办法重新打开 Visual Studio 中最后一个关闭的选项卡？类似于FireFox和Chrome中的`Ctrl`++ ？`Shift``t`

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2014-02-07T08:44:10.713

这不完全是等价的，但它可能会有所帮助，所以我会提到它。

实际上有一种更简单的方法，即向后导航（`Ctrl`+ `-`）。即使文件已关闭，VS 也会在新选项卡中打开文件。当然，这仅在您关闭选项卡后立即打开关闭的选项卡时有用（即，如果您没有在其他任何地方进行太多导航）。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2014-09-24T18:03:20.270

还要考虑**`Alt`+ `F`，`Alt`+`F`**。

（`Alt`按住它，现在按住它，然后再按`F`一次`F`）。

这将打开`Recent Files`菜单。在那里，您可以使用箭头键选择一个文件并按 Enter 键打开它，或者只使用鼠标。

[![在此处输入图像描述](https://i.stack.imgur.com/djZSb.png)](https://i.stack.imgur.com/djZSb.png)

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2009-05-12T14:30:49.203

您可以使用+ +使用[Visual Studio 电源命令](https://marketplace.visualstudio.com/items?itemName=VisualStudioPlatformTeam.PowerCommandsforVisualStudio)`Ctrl``Shift``Z`

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2009-05-12T14:30:49.997

如果您使用的是 VS 2008，[PowerCommands](http://code.msdn.microsoft.com/PowerCommands)提供了一个“撤消关闭”窗格，其中包含您最近关闭的文档，或者像大卫所说的那样，检查文件菜单。不过，PowerCommands 不限制它显示的文件数量。

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2009-05-12T14:28:01.813

我不知道如何打开最后一个关闭的选项卡，但您可以通过文件菜单打开最近的文件，最上面的文件应该是您最近关闭的选项卡。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2011-10-13T01:51:32.033

在 VS 2010“Visual Studio 2010 的 PowerCommands”中

[http://visualstudiogallery.msdn.microsoft.com/e5f41ad9-4edc-4912-bca3-91147db95b99/](http://visualstudiogallery.msdn.microsoft.com/e5f41ad9-4edc-4912-bca3-91147db95b99/)

添加命令“撤消关闭”

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-12-10T12:45:05.177

`Ctrl`您实际上可以通过按+来执行此操作（至少在 Visual Studio 2019 中）`T`，`R`这会打开一个显示最后打开的窗口的小窗口。

[来源](https://www.meziantou.net/visual-studio-tips-and-tricks-open-recently-closed-files.htm)

正如[NotAPro 指出的](https://stackoverflow.com/questions/853038/reopen-last-closed-tab-in-visual-studio#comment117053815_59267558)，我提到的组合似乎已更改为`Ctrl`+ `1`, `Ctrl`+`R`

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-05-07T07:44:43.140

在 Visual Studio 2020 中，您可以使用与*Reopen Closed Editor*关联的`Shift`++ 。这应该做你所期望的。`Ctrl``T`

 *# objective-c - 没有 .xcodeproj 目录的项目，如何打开？

> ID：853045
> 
> 赞同：4
> 
> 时间：2009-05-12T14:22:20.560
> 
> 标签：objective-c, cocoa, xcode

我发现了一些缺少 .xcodeproj 目录层次结构的开源项目，大部分是较旧的。似乎所有其他重要文件都在那里。

奇怪的是，我想知道这些项目是如何通过 Xcode 访问的？我想编译它们，破坏它们，修复它们等等。有没有办法打开这些更多的遗留项目？

这是一个开源 Freecell 项目的内容：

```
$ find . -type f  
./.DS_Store  
./Card.h  
./Card.m
./Cards/bonded.png
./Cards/large-bonded.png
./Cards/unedited-bonded.png
./CardView.h
./CardView.m
./Dutch.lproj/Credits.html
./Dutch.lproj/Help/Freecell.html
./Dutch.lproj/Help/game.html
./Dutch.lproj/Help/game.jpg
./Dutch.lproj/Help/game.png
./Dutch.lproj/Help/Help idx
./Dutch.lproj/Help/history.html
./Dutch.lproj/Help/history.jpg
./Dutch.lproj/Help/history.png
./Dutch.lproj/Help/links.html
./Dutch.lproj/Help/logo.png
./Dutch.lproj/Help/logos.png
./Dutch.lproj/Help/move-end.jpg
./Dutch.lproj/Help/move-end.png
./Dutch.lproj/Help/move-start.jpg
./Dutch.lproj/Help/move-start.png
./Dutch.lproj/Help/play.html
./Dutch.lproj/Help/preferences.html
./Dutch.lproj/Help/preferences.jpg
./Dutch.lproj/Help/preferences.png
./Dutch.lproj/Help/tips.html
./Dutch.lproj/InfoPlist.strings
./Dutch.lproj/Localizable.strings
./Dutch.lproj/MainMenu.nib/classes.nib
./Dutch.lproj/MainMenu.nib/Freecell.tiff
./Dutch.lproj/MainMenu.nib/info.nib
./Dutch.lproj/MainMenu.nib/objects.nib
./English.lproj/Credits.html
./English.lproj/Help/Freecell.html
./English.lproj/Help/game.html
./English.lproj/Help/game.png
./English.lproj/Help/Help idx
./English.lproj/Help/history.html
./English.lproj/Help/history.png
./English.lproj/Help/links.html
./English.lproj/Help/logo.png
./English.lproj/Help/logos.png
./English.lproj/Help/move-end.png
./English.lproj/Help/move-start.png
./English.lproj/Help/play.html
./English.lproj/Help/preferences.html
./English.lproj/Help/preferences.png
./English.lproj/Help/tips.html
./English.lproj/InfoPlist.strings
./English.lproj/Localizable.strings
./English.lproj/MainMenu.nib/classes.nib
./English.lproj/MainMenu.nib/info.nib
./English.lproj/MainMenu.nib/keyedobjects.nib
./Finnish.lproj/Credits.html
./Finnish.lproj/Help/Freecell.html
./Finnish.lproj/Help/game.html
./Finnish.lproj/Help/game.png
./Finnish.lproj/Help/Help idx
./Finnish.lproj/Help/history.html
./Finnish.lproj/Help/history.png
./Finnish.lproj/Help/links.html
./Finnish.lproj/Help/logo.png
./Finnish.lproj/Help/logos.png
./Finnish.lproj/Help/move-end.png
./Finnish.lproj/Help/move-start.png
./Finnish.lproj/Help/play.html
./Finnish.lproj/Help/preferences.html
./Finnish.lproj/Help/preferences.png
./Finnish.lproj/Help/tips.html
./Finnish.lproj/InfoPlist.strings
./Finnish.lproj/Localizable.strings
./Finnish.lproj/MainMenu.nib/classes.nib
./Finnish.lproj/MainMenu.nib/info.nib
./Finnish.lproj/MainMenu.nib/keyedobjects.nib
./Freecell.icns
./Freecell.pbproj/alisdair.mode1
./Freecell.pbproj/alisdair.pbxuser
./Freecell.pbproj/project.pbxproj
./Freecell_Prefix.h
./French.lproj/.typeAttributes.dict
./French.lproj/Credits.html
./French.lproj/Help/Freecell.html
./French.lproj/Help/game.html
./French.lproj/Help/game.png
./French.lproj/Help/Help idx
./French.lproj/Help/history.html
./French.lproj/Help/history.png
./French.lproj/Help/links.html
./French.lproj/Help/logo.png
./French.lproj/Help/logos.png
./French.lproj/Help/move-end.png
./French.lproj/Help/move-start.png
./French.lproj/Help/play.html
./French.lproj/Help/preferences.html
./French.lproj/Help/preferences.png
./French.lproj/Help/tips.html
./French.lproj/InfoPlist.strings
./French.lproj/Localizable.strings
./French.lproj/MainMenu.nib/classes.nib
./French.lproj/MainMenu.nib/info.nib
./French.lproj/MainMenu.nib/objects.nib
./Game.h
./Game.m
./GameController.h
./GameController.m
./GameView.h
./GameView.m
./History.h
./History.m
./HistoryController.h
./HistoryController.m
./Japanese.lproj/Credits.html
./Japanese.lproj/Credits.rtf
./Japanese.lproj/Help/Freecell.html
./Japanese.lproj/Help/game.html
./Japanese.lproj/Help/game.png
./Japanese.lproj/Help/Help idx
./Japanese.lproj/Help/history.html
./Japanese.lproj/Help/history.png
./Japanese.lproj/Help/links.html
./Japanese.lproj/Help/logo.png
./Japanese.lproj/Help/logos.png
./Japanese.lproj/Help/move-end.png
./Japanese.lproj/Help/move-start.png
./Japanese.lproj/Help/play.html
./Japanese.lproj/Help/preferences.html
./Japanese.lproj/Help/preferences.png
./Japanese.lproj/Help/tips.html
./Japanese.lproj/InfoPlist.strings
./Japanese.lproj/Localizable.strings
./Japanese.lproj/MainMenu.nib/classes.nib
./Japanese.lproj/MainMenu.nib/Freecell.tiff
./Japanese.lproj/MainMenu.nib/info.nib
./Japanese.lproj/MainMenu.nib/objects.nib
./Licence.rtf
./main.m
./PreferencesController.h
./PreferencesController.m
./Result.h
./Result.m
./Spanish.lproj/Credits.html
./Spanish.lproj/Credits.rtf
./Spanish.lproj/Help/Freecell.html
./Spanish.lproj/Help/game.html
./Spanish.lproj/Help/game.png
./Spanish.lproj/Help/Help idx
./Spanish.lproj/Help/history.html
./Spanish.lproj/Help/history.png
./Spanish.lproj/Help/links.html
./Spanish.lproj/Help/logo.png
./Spanish.lproj/Help/logos.png
./Spanish.lproj/Help/move-end.png
./Spanish.lproj/Help/move-start.png
./Spanish.lproj/Help/play.html
./Spanish.lproj/Help/preferences.html
./Spanish.lproj/Help/preferences.png
./Spanish.lproj/Help/tips.html
./Spanish.lproj/InfoPlist.strings
./Spanish.lproj/Localizable.strings
./Spanish.lproj/MainMenu.nib/classes.nib
./Spanish.lproj/MainMenu.nib/Freecell.tiff
./Spanish.lproj/MainMenu.nib/info.nib
./Spanish.lproj/MainMenu.nib/objects.nib
./Table.h
./Table.m
./TableLocation.h
./TableLocation.m
./TableMove.h
./TableMove.m
./vccRand.c
./vccRand.h 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-12T14:27:41.843

它是使用 Project Builder 创建的，它是 Apple（以及之前的 NeXT）提供的 IDE，最终更名为 Xcode。项目文件是 Freecell.pbproj，你应该可以很容易地将它导入 Xcode。

从理论上讲，您应该能够使用 File->Open 并指向 .pbproj 包装器；然后 Xcode 可能会要求升级项目，这通常涉及创建一个新的 .xcodeproj 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-14T14:25:55.250

我建议另一种方法（它帮助了我，也许它也会帮助某人）。方法如下（假设您安装了 Xcode3.0）：
1) 将 .pbproj 重命名为 .xcode
2) 使用 muCommander ( [http://www.mucommander.com/index.php#download](http://www.mucommander.com/index.php#download) ) 导航到 .xcode 文件夹. 在文件夹中，您将找到 3 个文件。*.mode1、*.pdxuser、*.pbxproj（其中 * 是某个用户名）。
3) 现在将 *.mode1 和 *.pbxuser 用户名替换为您的
（例如 johndow.mode1 到 myusername.mode1）
4) 之后将 .mode1 替换为 .mode1v3 （例如 myusername.mode1 到 myusername.mode1v3 ）
5 ) 选择 myusername.pbxproj 并点击 View[F3] 按钮（位于 mnCommander 屏幕的左下角）并找到以下行（最上面的行）：
存档版本 = 1；
类 = {
};
对象版本 = 39;
objects = {
将 39 替换为 44（数量取决于安装的 Xcode 版本；您可以通过创建一个新项目并在 *.pbxproj 中找到相同的行来找到您的）。关闭并保存已编辑的文档。
就这样！现在尝试使用 Xcode 打开项目。

一些可选步骤。必须在您使用 Xcode 打开和关闭项目后（完成上一节后）。
6）仍然在同一个文档中向下滚动并找到以下行：
CFBundleShortVersionString
0.5.0
CFBundleSignature
????
CFBundleVersion
0.5.0
将 0.5.0 替换为 1.0.23 或从 1.0.0 开始的任何其他数字。该编号对应于您的产品版本。
7) 现在找到以下行：
OSBundleLibraries

com.apple.iokit.IOPCIFamily
1.4
com.apple.iokit.IOStorageFamily
1.3
com.apple.kernel.iokit
1.1
将每个 anynumber 替换为系统上安装的版本号。您可以通过在终端中输入“ kextfind -bundle-id com.apple.iokit.IOPCIFamily ”（其中 com.apple... ***是您要查找的键）并按 Enter 来查找版本。
你会得到这样的东西：
/System/Library/Extensions/IOPCIFamily.kext
现在复制你在 muCommander 位置栏中得到的行。选择 version.plist 并点击 View[F3] 按钮。在以下位置找到号码：
CFBundleVersion
2.6
这个号码就是您一直在寻找的号码。
8）找到“ MODULE_VERSION = 0.5; ”行（必须有几个实例）。将 0.5 替换为 1.0，其中 0.5 是 0.5.0 (1.0.23) 的前两位
9) 找到“compatibilityVersion = "Xcode 2.5";”这一行，将“2.5”替换为“3.0”（即Xcode版本）
结尾。

# command-line - 是否可以设置 grep（从命令行）以突出显示匹配的行部分？

> ID：853048
> 
> 赞同：4
> 
> 时间：2009-05-12T14:22:27.707
> 
> 标签：command-line, cygwin, grep

我正在通过 cygwin 从命令行使用 grep。我想知道是否有任何方法可以突出显示与正则表达式匹配的每一行的部分。我看到的最接近的是 -o 选项，但它只输出匹配区域，我想看到整行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-12T14:30:23.463

[看看](http://www.debian-administration.org/article/grep_highlighting_matches_in_color)[--color](http://www.gnu.org/software/grep/doc/grep_3.html#IDX48)（或--color [）](http://www.gnu.org/software/grep/doc/grep_3.html#IDX48)选项，例如

```
grep --color POST access_log 
```

默认情况下，这使用“自动”模式，该模式仅在输出到终端时包含颜色代码，但在您将输出管道输出到其他地方时不包含颜色代码。如果您希望将颜色输出到标准输出以外的其他内容，请使用 --color=always

有关更改颜色并使 grep 默认使用此选项的方法，请参阅[链接文章。](http://www.debian-administration.org/article/grep_highlighting_matches_in_color)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-12T14:28:28.723

试试 --color 开关。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-12T23:02:54.110

您可能想尝试[ack 工具](http://betterthangrep.com/)。它默认突出显示，iirc。

实际上，默认情况下它会做很多有用的事情。有些人喜欢它，我希望你也会。

# asp.net-mvc - ASP.NET MVC Spark 视图引擎

> ID：853050
> 
> 赞同：13
> 
> 时间：2009-05-12T14:22:55.363
> 
> 标签：asp.net-mvc, spark-view-engine

为 ASP.NET MVC 项目使用 Spark 视图引擎的优点（积极方面）。为什么它比默认视图引擎更好？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-12T14:35:30.347

关于 Spark View 引擎的一件重要的事情是它的语法与 HTML 语法非常相似，这样您的视图将是干净的，并且您将避免 WebForms 视图引擎中的“标签汤”。这是一个例子：

**火花：**

```
<viewdata products="IEnumerable[[Product]]"/>
<ul if="products.Any()">
  <li each="var p in products">${p.Name}</li>
</ul>
<else>
  <p>No products available</p>
</else> 
```

**网络表单：**

```
<%var products = (IEnumerable<Product>)ViewData["products"] %>
<% if (products.Any()) %>
<ul>
<% foreach (var p in products) { %>
<li><%=p.Name %></li>
</ul>
<%} }  %>
<% else { %>
      <p>No products available</p>
<% }%> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-12T14:35:57.007

它避免了您经常看到的 HTML 标签汤。考虑 Spark：

```
<ul>
  <li each='var p in ViewData.Model.Products'>
    ${p.Name}
  </li>  
</ul> 
```

与经典的 html 标签汤变体相反：

```
<ul>
  <% foreach(var p in ViewData.Model.Products) { %>
  <li>
    <%= p.Name %>
  </li>
  <% } %>
</ul> 
```

Spark 语法更加简洁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-09-17T20:35:56.717

我真的很喜欢绑定功能。

[http://sparkviewengine.com/documentation/bindings](http://sparkviewengine.com/documentation/bindings)

您可以在绑定中指定某些内容并在您的视图中使用漂亮的 xml 标记。

我们为我们在视图中使用的所有 html 助手提供了绑定，例如。 `<textbox for=""/>` `<dropdown for="" items=""/>`等等等等……

# .net - COM 对象池和 .NET Web 服务

> ID：853067
> 
> 赞同：0
> 
> 时间：2009-05-12T14:25:40.710
> 
> 标签：.net, web-services, com+, object-pooling

我有一个需要从 .NET Web 服务访问的 COM 对象。

我知道整个 STA/MTA 的事情——所以我的 COM 对象将被转换为 MTA 并且没有全局状态（虽然本身不​​是多线程的）。

如果我将它设置为 COM+ 服务器，并指定一个对象池，这是否意味着对于每个 Web 服务线程，它将使用不同的 COM 对象实例？而且不排队？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T14:36:04.027

这取决于几件事。

如果您对池中的对象数量设置了上限，并且在 Web 服务客户端中保持对象引用处于活动状态，并且您不使用 JIT 或在方法调用中不设置 Done 标志，它们将一旦达到池限制就排队。

如果您确实使用 JIT 并通过调用 SetComplete 或使用方法上的 AutoComplete 属性来设置 Done 标志，则 COM+ 组件将被停用并在方法返回时放回池中。除非并发执行的方法数达到最大池限制，否则新方法调用将永远不需要等待。

# java - Java中的所见即所得文本编辑器

> ID：853071
> 
> 赞同：48
> 
> 时间：2009-05-12T14:26:27.900
> 
> 标签：java, editor, wysiwyg

我想在这里收集所有用于 Java 的 WYSIWYG 文本编辑器。

条目的一些规则：

*   必须有项目/产品的链接
*   您必须说明它是开源的还是商业的
*   是否可以扩展编辑器（添加新功能，如“以紫色为中心的数独”）？那是简单的还是复杂的？
*   它是否具有许多功能（花哨的字符和段落样式以及在同一文档中对多种语言进行在线拼写检查）或仅具有基本功能（粗体、斜体、无下划线）？
*   列出重要的依赖项（它是否在带有 Swing 的裸 Java 上运行？SWT？MacOS？）
*   你的个人意见

此列表应有助于开发人员确定选择哪个编辑器。我不是在寻找“最好的”，而是更多的是“那里有什么”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-15T13:21:03.257

[**RSyntaxTextArea**](http://fifesoft.com/rsyntaxtextarea/)

我已经使用过这个组件并且效果很好。它是 LGPL，它基于 javax.swing.text 包 (javax.swing.text.EditorKit)。由于它是一个 Swing 组件，它可以通过几行代码集成到您的应用程序中：

```
RSyntaxTextArea textArea = new RSyntaxTextArea();
textArea.setSyntaxEditingStyle(SyntaxConstants.SYNTAX_STYLE_JAVA);
RTextScrollPane sp = new RTextScrollPane(textArea); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-12-16T21:31:43.093

**JWebEngine**

我推荐[JWebEngine](http://inetsoftware.de/support/news/jwebengine-a-pure-java-html-renderer)。它是我所知道的唯一通过 ACID1 浏览器测试和 mail-acid 测试的。大多数其他 Java HTML 编辑器都基于 javax.swing.text.html.HTMLDocument 并且具有所有相同的错误。HTMLDocument 对 CSS 的支持很差。JWebEngine 对使用 CSS 查看 HTML 有很好的支持。

*   [链接到网站](http://inetsoftware.de/support/news/jwebengine-a-pure-java-html-renderer)。也有在线示例。
*   商业许可证
*   扩展非常简单。供应商将它用于许多不同的东西，如编辑器、HTML 打印引擎、显示自定义占位符等。类的可见性没有问题，如 Sun HTMDocument。
*   它基于 javax.swing.text.JEditorPane 或 javax.swing.text.JTextPane，您可以将它与拼写检查器 JOrtho 等第三方工具一起使用。
*   它是纯 Java，可在 Java SE 5 或更高版本的所有平台上运行。它也可以在未签名的小程序中运行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-01-18T17:56:20.393

我的应用程序需要同样的东西，做了一项研究，发现另外两个产品[EKit](http://www.hexidec.com/ekit.php)和[Metaphase Editor](http://www.metaphaseeditor.com)，基于 Charles Bell 的[`HTMLDocumentEditor`](http://www.artima.com/forums/flat.jsp?forum=1&thread=1276)，都在 LGPL 许可下并且看起来不错。

但我没有测试它们。这些天我们将看到我们选择什么。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-12T14:41:47.883

### [OpenOffice](http://www.openoffice.org/)的作家

可以使用[OOoBean](http://wiki.services.openoffice.org/wiki/Documentation/DevGuide/JavaBean/The_OOoBean_by_Example)嵌入到 Java 中。[原始代码在 Swing 下运行，但您也可以使用 AWT/SWT 桥（示例代码](https://stackoverflow.com/questions/81671/is-there-an-rtf-display-widget-in-swt/269138#269138)）使其在 SWT 下运行。

该项目是开源的（[LGPL](http://www.openoffice.org/licenses/lgpl_license.html)）。代码依赖于操作系统，但有适用于所有主要操作系统的版本（项目网站支持 Windows、Linux、MacOS 和 Solaris，但您也可以下载源代码并为其他人编译）。

由于底层产品是一个成熟的办公应用程序，它提供了您可能想要的所有功能（花哨的样式、不同语言的在线拼写检查、嵌入图片、在图片周围流动文本，等等）。

缺点是您必须安装 OpenOffice；事实上，编辑器不是 Java 的一部分，但它是一个远程进程，只呈现在 Java 应用程序的窗口中。这意味着启动时间非常明显，性能可能会很慢。处理有时也很“奇怪”。需要一些配置来消除额外的边框和不需要的文档分页。

因此，编辑器不能真正从 Java 扩展。您要么必须用 C++ 编写代码，要么使用 OOo 自己的内置语言。您可以做的是您可以在文档中注册侦听器，并且您可以完全访问文档的底层模型。通过这种方式，您可以深入了解重要部分并修改行为，但这通常感觉就像在进行锁孔手术。

我的结论：如果 OO 具有您需要的功能，这可能是获得您需要的最简单的方法。如果您需要大量定制，您将与框架的默认设置进行上游战斗。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-14T19:47:35.613

### [简单的 HTML](http://www.lightdev.com/page/3.htm)

*   它的 GPL
*   不知道扩展它有多容易
*   不支持拼写检查，但有表格、列表。
*   基于 Swing，需要 Java 1.4 和可选的 Java Help
*   我没有将它用作程序员 - 就​​像最终用户一样，它有一些怪癖 - 就像没有多级列表或表格不太好但没关系。
*   另外，它为您提供 HTML，因此很容易将处理结果嵌入到其他组件中。
*   现在在[SourceForge](http://sourceforge.net/projects/simplyhtml/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-28T17:13:11.057

*   这是链接：[JRichTextEditor](https://github.com/hoesterholt/JRichTextEditor)
*   它是开源的（LGPL）。
*   你可以用它做任何你想做的事。只需从 github 克隆它。它是可扩展的。
*   它具有相当多的功能，但欢迎进行增强。它是一个摇摆组件，依赖于 iText 2.1.7（仍然是 LGPL）和其他库（例如 xerces）。一个显着的特点是可以添加任何类别的标记点/范围。可用于超链接或其他任何东西。在库中还有一个帮助应用程序。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-10-18T22:25:59.963

**docx4all**

docx4all 是用于 docx 文件的跨平台所见即所得编辑器，使用 Java Swing 和 JavaFX Script。作为小程序或应用程序运行。见[http://dev.plutext.org/trac/docx4all/wiki/FeatureSet](http://dev.plutext.org/trac/docx4all/wiki/FeatureSet)

开源还是商业？见[http://dev.plutext.org/forums/viewtopic.php?f=7&t=209](http://dev.plutext.org/forums/viewtopic.php?f=7&t=209)

需要 Java 6。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-09-16T13:38:43.330

使用 HTML WYSIWYG 编辑器和[SWT 浏览器组件](http://www.eclipse.org/swt/)（[参见示例代码片段](http://www.eclipse.org/swt/snippets/)）。选项：

*   [SWT 作曲家](http://sourceforge.net/projects/swt-composer/)
*   [EPF 富文本](http://www.eclipse.org/epf/composer_javadoc/org/eclipse/epf/richtext/RichText.html)
*   [richhtml4eclipse](http://www.richclient2.eu/richhtml4eclipse/)（基于[TinyMCE](http://tinymce.moxiecode.com/index.php)）
*   [用于呈现 TinyMCE 所见即所得编辑器的 SWT 浏览器小部件](http://www.jumbabox.com/2008/05/java-wysiwyg-editor-in-swt-using-tnymce/)

临：

*   由于 HTML 有很多选择
*   支持 HTML 作为本机格式（因此当您需要将文档保存在某处或修改它们时不会出现异常问题，这与本机 Word 格式不同）。
*   使用字体、颜色、图像很简单，因为您不必自己管理资源。浏览器组件将为您完成

反对：

*   该解决方案取决于平台。使用richhtml4eclipse 进行的测试显示了在 Windows XP (IE) 和 Mac OSX (Safari) 上的不同行为
*   如果出现问题，用户将不得不切换到 HTML 代码视图并自行修复。
*   祝内容辅助、代码完成、拼写检查、折叠或注释好运。
*   添加特殊功能将迫使您通过非常简单的 API 进行锁孔手术
*   对于许多这样的编辑器，性能并不是那么好，尤其是对于大型文档。
*   取决于 SWT。

资料来源：[Lösungen für einen SWT 富文本编辑器](http://www.ludwigscity.de/agilesWissen/wordpress/2008/12/17/losungen-fur-einen-swt-rich-text-editor/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-09-16T13:48:11.153

[富文本查看器](https://code.google.com/a/eclipselabs.org/p/richtext/)

临：

*   提供拼写检查、代码完成、撤消/重做、自动缩进和您期望的大多数其他功能（[请参阅此处](https://code.google.com/a/eclipselabs.org/p/richtext/)）

反对：

*   取决于[SWT](http://www.eclipse.org/swt/)
*   不支持表格

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-26T07:57:10.747

Eclipse 项目复活[了 Vex (Visual Editor for XML)](http://wiki.eclipse.org/Vex)

从维基页面：

*   Vex 利用了许多构成 Eclipse Java IDE 的成熟插件，例如**CVS**界面、**文档搜索**和**书签**工具以及可搜索的**帮助系统**。
*   Eclipse 平台实现了一个复杂的插件架构，允许**使用第三方或自定义的内部插件来扩展 Vex。**
*   Vex 可**用于许多平台的原生外观和感觉**，包括 Windows、Linux/GTK 和 Macintosh OS-X/Carbon。
*   使用 Eclipse IDE 的 Java 开发人员可以将 Vex 作为插件安装到他们的 IDE 中，从而可以轻松**地使用 Vex 维护软件文档或其他 XML 文件**。
*   Vex 可重用：Vex 编辑器小部件可作为纯 Java、跨平台组件使用绑定 SWT。开发人员可以**重复使用这个小部件**，例如作为 RCP 应用程序。

1.0 版已于 2012 年发布，1.1 版计划于 2013 年发布。

[用户指南](http://wiki.eclipse.org/Vex/UserGuide)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-05-18T12:48:39.403

看看[JWord](http://www.pilotltd.com/index_en.jsp?pagenum=90004)

*   是商业的
*   很多功能（表格、分页、H/F、列布局、wmf、svg、复制粘贴、RTF、ODT、HTML 导出）
*   免版税
*   纯 Java-Swing (1.6)
*   可扩展（基于 Swing Text API）

# asp.net - asp.net 2.0站点下的asp.net 3.5虚拟目录

> ID：853074
> 
> 赞同：0
> 
> 时间：2009-05-12T14:27:29.317
> 
> 标签：asp.net, iis

我目前有一个 ASP.net 2.0 站点，其中有多个 ASP.Net 1.1 站点作为虚拟目录在 2.0 主站点下运行。虽然这会在从 2.0 站点到 1.1 站点的 web.config 条目继承方面产生一些问题，但我们已经能够配置所有站点以使其正常工作。但是，我们现在正准备将 1.1 站点迁移到 3.5。不幸的是，由于我无法控制官僚主义，我们还不能升级 2.0 主站点。我想确保简单地将子虚拟目录升级到 3.5 不会有任何问题。

我最初的猜测是这会很好，因为 3.5 使用与 2.0 相同的运行时，但是，我想知道 3.5 中的 web.config 项目是否有任何可能与 2.0 项目冲突的主要差异。

有没有人有任何见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T14:49:36.950

我们这样做了，正如所指出的，它主要是 web.config 中的继承（特别是如果您使用 AJAXControl 工具包，因为 3.5 和 2.0 是不同的版本）。一旦你解决了这些问题，网站应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T14:46:28.733

我认为没有任何重大差异会导致您出现问题，因为 ASP.NET 3.5 网站仅被指示为 2.0 网站，并且我相信它将是读取 web.config 的 2.0 运行时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-02T13:15:09.250

您还应该注意，您不能在 IIS 应用程序池中混合使用 .NET 版本。因此，您不能为 .NET 1.1 和 .NET 2.0+ Web 应用程序使用相同的应用程序池。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-20T23:03:58.450

如果可能的话，您应该在登台服务器上设置相同的情况，测试迁移，记录每个步骤以及您为使工作正常而采取的故障排除步骤（如果有的话）。那你就不用猜了。:)

# java - JPA 地图 映射

> ID：853076
> 
> 赞同：30
> 
> 时间：2009-05-12T14:27:37.103
> 
> 标签：java, hibernate, mapping, persistence

如何在不使用 Hibernate 的类的情况下在 JPA 中映射 Map？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-25T06:45:21.770

尽管 Subhendu Mahanta 给出的答案是正确的。但`@CollectionOfElements`已弃用。您可以`@ElementCollection`改用：

```
@ElementCollection
@JoinTable(name="ATTRIBUTE_VALUE_RANGE", joinColumns=@JoinColumn(name="ID"))
@MapKeyColumn (name="RANGE_ID")
@Column(name="VALUE")
private Map<String, String> attributeValueRange = new HashMap<String, String>(); 
```

无需为该`Map`字段创建单独的实体类。它会自动完成。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-05-20T16:08:49.380

以下内容不适合您吗？

```
@ManyToMany(cascade = CascadeType.ALL)
Map<String,EntityType> entitytMap = new HashMap<String, EntityType>(); 
```

`EntityType`可以是任何实体类型，包括`String`.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2011-02-02T09:45:50.727

假设我有一个名为 Book 的实体，它有一个章节地图：

```
import java.io.Serializable;
import java.util.Map;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.JoinTable;    
import org.hibernate.annotations.CollectionOfElements;
import org.hibernate.annotations.MapKey;
@Entity
public class Book implements Serializable{
@Column(name="BOOK_ID")
@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private Long bookId;    

@CollectionOfElements(targetElement=java.lang.String.class)
@JoinTable(name="BOOK_CHAPTER",
        joinColumns=@JoinColumn(name="BOOK_ID"))
@MapKey (columns=@Column(name="CHAPTER_KEY"))
@Column(name="CHAPTER")
private Map<String,String> chapters;
public Long getBookId() {
    return bookId;
}
public void setBookId(Long bookId) {
    this.bookId = bookId;
}
public Map<String,String> getChapters() {
    return chapters;
}
public void setChapters(Map<String,String> chapters) {
    this.chapters = chapters;
}               

} 
```

这个对我有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-26T15:36:59.397

一个工作示例：

```
@ElementCollection(fetch=FetchType.EAGER)
@CollectionTable(name = "TABLENAME")
@MapKeyColumn(name = "KEY")
@Column(name = "VALUE")
public Map<String, String> getMap() {
    return _map;
} 
```

# .net - 在 VB.NET 2008 的单元测试中使用 Lambda 和 Rhino.Mocks

> ID：853080
> 
> 赞同：2
> 
> 时间：2009-05-12T14:28:11.953
> 
> 标签：.net, vb.net, unit-testing, lambda, rhino-mocks

我正在尝试创建一个类似于我在 C# 中所做的单元测试，但在 vb 中的 lambdas 中遇到了困难。

基本上我正在尝试模拟一个类，然后创建一个存根并返回。在 C# 中，我会做类似的事情；

```
MockedPersonRepository
     .Stub(x => x.Find(id))
     .Return(person) 
```

但是在visual basic中，我正在尝试做类似的事情，但无法弄清楚语法

```
 MockedPersonRepository.Stub(Function... argh!!! 
```

任何有关如何重现上述内容的建议将不胜感激！

亲切的问候， 多姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T14:31:29.373

我通常展示的一个简单示例（因为我也是 VB 开发人员）如下：（由于 VB 中的某些奇怪原因，您需要将其拉出到另一个不返回任何内容的函数中）

```
 <TestMethod()> _
  Public Sub Should_Call_Into_Repository_For_GetAllUsers()
    Dim Repository As IUserRepository = MockRepository.GenerateStub(Of IUserRepository)()
    Dim Service As IUserService = New UserService(Repository)

    Service.GetAllUserCollection()

    Repository.AssertWasCalled(Function(x) Wrap_GetAllUserCollection(x))
  End Sub

Function Wrap_GetAllUserCollection(ByVal Repository As IUserRepository) As Object
    Repository.GetAllUserCollection()

    Return Nothing
  End Function 
```

以上是基于交互的测试，下面可能更接近您在当前示例中寻找的内容

```
Dim StubUserObject As New User(1, "9999", "jdoe", "John", "Doe", 1)

    UserService.Stub(Function(x) x.GetUserByID(1)).[Return](StubUserObject) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T14:32:27.047

像这样的东西会起作用吗？

```
MockedPersonRepository_
    .Stub(Function(x) x.Find(id))_
    .[Return](person) 
```

# sql - 如何更改数据集单元格格式

> ID：853092
> 
> 赞同：0
> 
> 时间：2009-05-12T14:30:59.310
> 
> 标签：sql, sql-server, sql-server-2005

如果我使用此查询创建一个表（查看 Table1），但 VisitingGap 列的格式不正确。我使用 cast 方法来给出格式。但不能正常工作。我需要

### 表2

```
 declare @date1 nvarchar(100) , @date2 nvarchar(100) , @countgap int,@count int 
set @date1='2009-05-12'
set @date2 = '2009-05-13'
set @countgap = 30
set @count=48

CREATE TABLE #Temp (VisitingCount int, [Time] int, [Date] datetime )
DECLARE @DateNow DATETIME,@i int,@Time int, @Date datetime
set @DateNow='00:00'  
set @i=1;  
while(@i<@count)  
    begin  
        set @DateNow = DATEADD(minute, @countgap, @DateNow)
        set @Time = (datepart(hour,@DateNow)*60+datepart(minute,@DateNow))/@countgap 
        set @Date = CONVERT(VARCHAR(5),@DateNow, 108)
        insert into #Temp(VisitingCount,[Time],[Date]) values(0,@Time,@Date )
        set @i=@i+1
    end

select 
Sum(VisitingCount) as VisitingCount, [Time], 
Cast([Time]*@countgap/60 as nvarchar(50)) +':'+Cast( [Time]*@countgap%60 as nvarchar(50))
from (
  select 0 as VisitingCount, [Time] from #Temp
  Union All
    select count(page) as VisitingCount, 
    (datepart(hour,Date)*60+datepart(minute,Date))/@countgap as [Time] 
    from scr_SecuristLog
    where Date between @date1 and @date2
    GROUP BY (datepart(hour,Date)*60+datepart(minute,Date))/@countgap
  ) X
group by [Time]
order by  2 asc
```

* * *

### 表格1 ：

* * *

```
 .

.

.

VCount  Time    VisitingGap

0   1   0:30

0   2   1:0

0   3   1:30

0   4   2:0

0   5   2:30

0   6   3:0

0   7   3:30

0   8   4:0

0   9   4:30

0   10  5:0

.

.

. 
```

* * *

### 表2：我需要下表！！！！

* * *

```
 .

.

.

VCount  Time    VisitingGap

0   1   00:30

0   2   01:00

0   3   01:30

0   4   02:00

0   5   02:30

0   6   03:00

0   7   03:30

0   8   04:00

0   9   04:30

0   10  05:00

.

.

. 
```

### 请看！我认为投射方法有问题

Cast([Time]*@countgap/60 as nvarchar(50)) +':'+Cast( [Time]*@countgap%60 as nvarchar.........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T15:46:24.790

不要将数字转换为字符串，而是尝试转换为日期并将日期转换为字符串：

```
CONVERT(CHAR(5), DATEADD(mi, [Time], '1900-01-01'), 108) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T15:21:43.537

在 while 循环中，你的答案就在眼前：

`CONVERT(VARCHAR(5),@DateNow, 108)`

将 @DateNow 替换为 [Date] 即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T21:15:58.777

真是一团糟。使用辅助数字表（避免循环）并以这种方式处理您的插槽分组。另请注意，您使用 between 可能会出现问题，这就是为什么我总是使用 >= 和 < 构造。

```
/*
-- DROP Numbers table if it exists
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[Numbers]') AND type in (N'U'))
DROP TABLE [dbo].[Numbers]
GO
-- Now re-create it and fill it with sequential numbers starting at 1
SELECT TOP 10000 IDENTITY(INT,1,1) AS Num
INTO dbo.Numbers
FROM master.INFORMATION_SCHEMA.COLUMNS i1
CROSS JOIN master.INFORMATION_SCHEMA.COLUMNS i2;
GO
-- Add a primary key/clustered index to the numbers table
ALTER TABLE dbo.Numbers
ADD CONSTRAINT PK_Numbers PRIMARY KEY CLUSTERED (Num);
GO
*/

CREATE TABLE #Log (
     page varchar(255) NOT NULL
    ,date datetime NOT NULL
    )

INSERT  INTO #Log
VALUES  (
         'page1'
        ,'2009-05-12 08:30'
        )
INSERT  INTO #Log
VALUES  (
         'page1'
        ,'2009-05-12 08:35'
        )
INSERT  INTO #Log
VALUES  (
         'page2'
        ,'2009-05-12 07:30'
        )
INSERT  INTO #Log
VALUES  (
         'page2'
        ,'2009-05-12 09:35'
        )

DECLARE @date1 datetime
   ,@date2 datetime
   ,@countgap int
   ,@count int 
SET @date1 = '2009-05-12'
SET @date2 = '2009-05-13'
SET @countgap = 30
SET @count = (24 * 60) / @countgap

;
WITH    LogX
          AS (
              SELECT    *
                       ,DATEADD(DAY, -DATEDIFF(DAY, 0, date), date) AS time
              FROM      #Log
              WHERE date >= @date1 AND date < DATEADD(DAY, 1, @date2)
             ),
        Slots
          AS (
              SELECT    Num
                       ,DATEADD(MINUTE, (Num - 1) * @countgap, 0) AS SlotStart
                       ,DATEADD(MINUTE, Num * @countgap, 0) AS SlotEnd
              FROM      Numbers
              WHERE     Num <= @count
             )
    SELECT  Num, CONVERT(varchar(5), SlotEnd, 108) AS [Time], COUNT(page) AS VistingCount
    FROM    Slots
    LEFT JOIN LogX
            ON LogX.TIME >= Slots.SlotStart
               AND LogX.TIME < Slots.SlotEnd
    GROUP BY Num, SlotEnd

DROP TABLE #Log 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-12T14:40:33.020

当您进行数学运算时，您会丢失前导零，这将在您形成字符串时将它们添加回来

**编辑**

```
original code-->           Cast([Time]*@countgap/60 as nvarchar(50))    +':'+           Cast( [Time]*@countgap%60 as nvarchar(50))
changed code--->RIGHT('00'+Cast([Time]*@countgap/60 as varchar(2)  ),2) +':'+RIGHT('00'+Cast( [Time]*@countgap%60 as varchar(2)  ),2) 
```

# asp.net-mvc - 什么是 ASP.Net MVC 视图引擎？

> ID：853097
> 
> 赞同：15
> 
> 时间：2009-05-12T14:32:35.737
> 
> 标签：asp.net-mvc, viewengine

**关于 ASP.Net MVC 中的视图引擎**以及关于使用“自定义”而不是“默认”引擎的SO 存在很多问题。对于我作为一个业余程序员来说，“视图引擎”这个词是新的，我一直无法理解它的含义。所以，我的问题是：

1.  什么是视图引擎？

2.  视图引擎是做什么的，它在 MVC 模式中扮演什么角色？（与 1...密切相关）

3.  程序员希望通过切换到不同的视图引擎来更改/避免的默认视图引擎的主要特征/属性是什么？

4.  当开发人员选择使用与标准不同的视图引擎时，他们所追求的其他常见视图引擎的主要好处是什么？（我已经多次看到“Spark View Engine”这个名字，我敢打赌还有其他人）。

5.  什么时候（在什么情况下）我想开发自己的视图引擎？

在那里，我想这就是我想问的（现在）。给我查看引擎 101！=)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T15:07:53.557

“视图引擎”将视图呈现为 html、xml 或创建它以发出的任何内容类型。在“MVC”中，它将是视图 (V) 的一个方面。

不同的视图引擎有不同的语法等来管理渲染。使用另一个视图引擎的决定很可能是特定于项目/程序员的。在某些情况下，他们可能会看到默认视图引擎的实际或感知限制；在其他情况下，它可能只是不同的设计目标或重点。

就 Spark 而言，它们的重点是比默认视图引擎更简洁，并尽可能保持类似 HTML 的语法，而不是陷入 ASP.NET 脚本块。

作为最终用户，您可能永远不会想要创建自己的视图引擎。;) 这不是一项可以掉以轻心的任务，您可能最终会重新实现现有视图引擎中已经存在的功能。

**编辑**

> 好的。那么 View.aspx 文件是 View Engine 的一部分，还是 View Engine 是一组帮助选择应呈现的 View.aspx（或其他类型的响应）的类？它是如何工作的？

MVC 模式告诉您模型、视图和控制器将是独立的“事物”。在 ASP.NET MVC 中，默认视图引擎使用现有的 ASP.NET 框架，其中包括母版页、ASPX 文件等。Spark 做了类似的事情，但它是一个不同的引擎，所以它的工作方式并不完全相同。所以在一般意义上，视图文件不是特定于引擎的，但特定文件、它们在磁盘上的布局和它们的内容*是*特定于视图引擎的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T15:12:38.310

除了想要完全替换视图引擎（例如 Spark）之外，您还可以制作自己的视图引擎，只是为了对默认视图引擎的行为进行小幅更改。您可以通过创建一个从默认引擎继承并覆盖某些行为的新视图引擎来做到这一点。

一个常见的例子是调整视图引擎在硬盘上查找 .aspx 文件的位置。例如，您可能希望创建一个视图引擎，该引擎会根据用户是否在移动设备上自动切换使用哪个 view.aspx 文件。

请参阅[使用 ASP.NET MVC 的移动网站和移动浏览器定义文件](http://www.hanselman.com/blog/MixMobileWebSitesWithASPNETMVCAndTheMobileBrowserDefinitionFile.aspx)，以获得一个非常好的示例实现。

**更新：**

Scott 刚刚发布了一个[更新的 ViewEngine 实现](http://www.hanselman.com/blog/ABetterASPNETMVCMobileDeviceCapabilitiesViewEngine.aspx)，与上面链接的初始实现相比，它具有重要的改进。

# .net - 在 .NET 中创建电子邮件

> ID：853100
> 
> 赞同：3
> 
> 时间：2009-05-12T14:33:01.443
> 
> 标签：.net, email, outlook

我希望能够创建带有附件的电子邮件，但不发送。电子邮件应在 Outlook 中打开，用户可以在其中发送自己。

我一直在使用 Mailto: 命令来打开新邮件，但是，Outlook 客户端似乎不支持使用 Mailto: 命令添加附件。

我不想使用 COM 来执行此操作。

有谁知道实现这一目标的方法？我认为没有 COM 可能无法实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-12T14:35:37.943

如果你想在 Outlook 中打开邮件，那么我很确定你*需要使用 COM*。您是否有任何特殊原因要与 Outlook 交互，而不是使用 SMTP 和`System.Net.Mail`命名空间自动发送？

**编辑：**顺便说一句，您似乎可以使用*mailto*链接指定附件。例子：

```
mailto:foo@bar.com?subject=foo&body=bar&attachment="C:/foo/bar.txt" 
```

你用 Outlook 试过这个吗？但是，我仍然推荐使用 COM，因为它可以让您更好地控制您可以对 Outlook 和邮件消息执行的操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-12T14:38:58.890

我能想到的解决 COM（或 VSTO）的唯一方法是使用 Outlook 的命令行选项。使用您可以使用**[此答案](https://stackoverflow.com/questions/248569/starting-outlook-and-having-an-email-pre-populated-from-command-line/248598#248598)**中描述的选项（由[VonC](https://stackoverflow.com/users/6309/vonc)`Process.Start` ）启动 Outlook ：

> 打开一封新邮件：
> 
> ```
>  outlook.exe /c ipm.note 
> ```
> 
> 打开一封新邮件并填充发件人：
> 
> ```
>  outlook.exe /c ipm.note /m someone@example.com 
> ```
> 
> 打开带有附件的新邮件：
> 
> ```
>  outlook.exe /c ipm.note /a filename 
> ```
> 
> 组合：
> 
> ```
>  outlook.exe /c ipm.note /m someone@example.com&subject=test%20subject&body=test%20body 
> ```

您可以从以下注册表项中检索 Outlook 的安装文件夹：

展望 2007：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\12.0\Outlook\InstallRoot 
```

展望 2003：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\11.0\Outlook\InstallRoot 
```

展望XP：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\10.0\Outlook\InstallRoot 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T14:35:46.040

您已经在那里回答了自己 - 您可以通过 COM（通过主互操作程序集）来完成，也可以直接通过 SMTP 发送（根本不会触及用户的电子邮件客户端）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T14:37:15.290

我不确定您是否可以将其链接到 Outlook（我猜您必须使用 MAPI），但 System.Net.Mail 很棒。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T14:40:16.080

您还可以将消息保存到文件夹而不是仅通过配置 smtp 设置发送

```
<system.net>
<mailSettings>
  <smtp deliveryMethod="SpecifiedPickupDirectory">
    <specifiedPickupDirectory pickupDirectoryLocation="c:\pickup-smtp\"/>        
  </smtp>
</mailSettings> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-09T18:39:20.010

简单的：

```
using Microsoft.Office.Interop.Outlook;

private void CreateMailItem()
{
    Outlook.MailItem mailItem = (Outlook.MailItem)
        this.CreateItem(Outlook.OlItemType.olMailItem);
    mailItem.Subject = "This is the subject";
    mailItem.To = Environment.UserName + "@example.com";
    mailItem.Body = "This is the message.";
    mailItem.Importance = Outlook.OlImportance.olImportanceLow;
    mailItem.Display(false);
} 
```

# asp.net-mvc - LinqtoXML 解析 RSS 内容：编码

> ID：853133
> 
> 赞同：2
> 
> 时间：2009-05-12T14:38:25.957
> 
> 标签：asp.net-mvc, linq-to-xml

我正在尝试使用 Linq to XML 解析 RSS 提要，如下所示：

```
 XNamespace slashNamespace = "http://purl.org/rss/1.0/modules/slash/"; 
        XDocument rssFeed = XDocument.Load(@"http://blog.daimokuchart.com/index.php/feed/");

        var posts = from item in rssFeed.Descendants("item")
                    select new RSSData {
                        Title = item.Element("title").Value,
                        Published = DateTime.Parse(item.Element("pubDate").Value),
                        Url = item.Element("link").Value,
                        Content = item.Element("content:encoded").Value
                    }; 
```

然而; 内容有问题：编码项目我收到此错误**“'：'字符，十六进制值 0x3A，不能包含在名称中。”**

我怎么解析这个 item 元素？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-12T14:57:34.437

```
XNamespace nsContent = "http://purl.org/rss/1.0/modules/content/";

// ...

Content = item.Element(nsContent + "encoded").Value

// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T15:16:20.317

解析 RSS 提要有一种更简单的方法：[SyndicationFeed](http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.syndicationfeed.aspx)类

更多细节[在这里](http://www.thomaslevesque.com/2009/02/13/build-an-rss-reader-in-5-minutes/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T06:45:17.940

嗨，我使用 Linqtoxml 并成功解析 Rss 提要，尝试下面的代码

```
public apheadlines()
        {
            InitializeComponent();
            InitializeComponent();
            WebClient downloader = new WebClient();
            Uri rssurl = new Uri("http://ibnlive.in.com/ibnrss/rss/southcinema/telugunews.xml", UriKind.Absolute);
            downloader.DownloadStringCompleted += new DownloadStringCompletedEventHandler(downloads);
            downloader.DownloadStringAsync(rssurl);
        }

 private void downloads(object sender, DownloadStringCompletedEventArgs e)
        {
            if (e.Result == null)
            {
                MessageBox.Show("Error in download");
            }
            var Rss = from rss in XElement.Parse(e.Result).Descendants("item")
                      select new Data
                      {
                          Titles = rss.Element("title").Value.ToUpper(),
                          pubDate = rss.Element("pubDate").Value.Substring(0, 17)

                      };

            listBox1.ItemsSource = Rss;

        } 
```

# c# - 将分隔符添加到要显示的项目列表中

> ID：853137
> 
> 赞同：3
> 
> 时间：2009-05-12T14:38:47.487
> 
> 标签：c#, algorithm

我有一个项目列表，我希望在 C# 中显示它们之间的分隔符。使用普通的迭代器，我会在开头或结尾添加一个额外的分隔符：

```
string[] sa = {"one", "two", "three", "four"};
string ns = "";
foreach(string s in sa)
{
    ns += s + " * ";
}
// ns has a trailing *:
// one * two * three * four * 
```

现在我可以使用这样的 for 循环来解决这个问题：

```
ns = "";
for(int i=0; i<sa.Length; i++)
{
    ns += sa[i];
    if(i != sa.Length-1)
        ns += " * ";
}
// this works:
// one * two * three * four 
```

尽管第二种解决方案有效，但它看起来并不优雅。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-12T14:41:25.157

您需要内置[`String.Join`](http://msdn.microsoft.com/en-us/library/system.string.join.aspx)方法：

```
string ns = string.Join(" * ", sa); 
```

如果你想对其他集合类型做同样的事情，那么如果你首先使用 LINQ 的方法`String.Join`创建一个数组，你仍然可以使用：[`ToArray`](http://msdn.microsoft.com/en-us/library/bb298736.aspx)

```
string ns = string.Join(" * ", test.ToArray()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T17:06:25.283

除了优雅之外，您可能还需要考虑跨类型而不是 String 的速度和可重用性。为了优雅，我建议使用扩展方法来抽象出细节，以便常见用法看起来像：

```
ns = sa.Join(" * "); 
```

为了提高速度，请考虑以下变体测试，包括其他回答问题的人提出的一些解决方案：

```
public void Test_variants()
{
    const string item = "a";
    const int numberOfTimes = 100000;
    const string delimiter = ", ";
    string[] items = new List<string>(Enumerable.Repeat(item, numberOfTimes)).ToArray();
    string expected = String.Join(delimiter, items);

    Time(StringJoin, items, delimiter, expected);
    Time(Aggregate, items, delimiter, expected);
    Time(CheckForEndInsideLoop_String, items, delimiter, expected);
    Time(CheckForBeginningInsideLoop_String, items, delimiter, expected);
    Time(RemoveFinalDelimiter_String, items, delimiter, expected);
    Time(CheckForEndInsideLoop_StringBuilder, items, delimiter, expected);
    Time(RemoveFinalDelimiter_StringBuilder, items, delimiter, expected);
}

private static void Time(Func<string[], string, string> func, string[] items, string delimiter, string expected)
{
    Stopwatch stopwatch = new Stopwatch();
    stopwatch.Start();
    string result = func(items, delimiter);
    stopwatch.Stop();
    bool isValid = result == expected;
    Console.WriteLine("{0}\t{1}\t{2}", stopwatch.Elapsed, isValid, func.Method.Name);
}

private static string CheckForEndInsideLoop_String(string[] items, string delimiter)
{
    string result = "";
    for (int i = 0; i < items.Length; i++)
    {
        result += items[i];
        if (i != items.Length - 1)
        {
            result += delimiter;
        }
    }
    return result;
}

private static string RemoveFinalDelimiter_String(string[] items, string delimiter)
{
    string result = "";
    for (int i = 0; i < items.Length; i++)
    {
        result += items[i] + delimiter;
    }
    return result.Substring(0, result.Length - delimiter.Length);
}

private static string CheckForBeginningInsideLoop_String(string[] items, string delimiter)
{
    string result = "";
    foreach (string s in items)
    {
        if (result.Length != 0)
        {
            result += delimiter;
        }
        result += s;
    }
    return result;
}

private static string CheckForEndInsideLoop_StringBuilder(string[] items, string delimiter)
{
    StringBuilder result = new StringBuilder();
    for (int i = 0; i < items.Length; i++)
    {
        result.Append(items[i]);
        if (i != items.Length - 1)
        {
            result.Append(delimiter);
        }
    }
    return result.ToString();
}

private static string RemoveFinalDelimiter_StringBuilder(string[] items, string delimiter)
{
    StringBuilder result = new StringBuilder();
    for (int i = 0; i < items.Length; i++)
    {
        result.Append(items[i]);
        result.Append(delimiter);
    }
    result.Length = result.Length - delimiter.Length;
    return result.ToString();
}

private static string StringJoin(string[] items, string delimiter)
{
    return String.Join(delimiter, items);
}

private static string Aggregate(string[] items, string delimiter)
{
    return items.Aggregate((c, s) => c + delimiter + s);
} 
```

我的盒子上的结果如下：

```
00:00:00.0027745 真正的字符串连接
00:00:24.5523967 真正的聚合
00:00:47.8091632 True CheckForEndInsideLoop_String
00:00:47.4682981 真正的 CheckForBeginningInsideLoop_String
00:00:23.7972864 True RemoveFinalDelimiter_String
00:00:00.0076439 真正的 CheckForEndInsideLoop_StringBuilder
00:00:00.0052803 True RemoveFinalDelimiter_StringBuilder

```

这意味着，如果您只使用字符串数组，最好的选择是 String.Join，紧随其后的是 StringBuilder 变体。请注意，在使用字符串时检查循环内的最后一项会比使用 StringBuilder 时产生更大的差异。当要分隔的项目列表很小时，基于字符串的实现的性能也有很大提高。我将 numberOfItems 设置为 10 进行了相同的测试，并收到以下结果：

```
00:00:00.0001788 真正的字符串连接
00:00:00.0014983 真正的聚合
00:00:00.0001666 True CheckForEndInsideLoop_String
00:00:00.0002202 True CheckForBeginningInsideLoop_String
00:00:00.0002061 True RemoveFinalDelimiter_String
00:00:00.0002663 True CheckForEndInsideLoop_StringBuilder
00:00:00.0002278 True RemoveFinalDelimiter_StringBuilder

```

您可能要考虑的下一件事是可重用性。如果您想从由分隔符分隔的整数列表构建字符串，则 String.Join 仅在您对每个整数运行 .ToString() 并创建字符串数组后才可以选择（因为 String.Join 无法对 IEnumerable 进行操作<字符串>）。

因此，总而言之，您可以考虑使用以下几行的扩展方法来获得优雅、速度和可重用性的良好组合：

```
public static string Join<T>([CanBeNull] this IEnumerable<T> items, [CanBeNull] string delimiter)
{
    StringBuilder result = new StringBuilder();
    if (items != null && items.Any())
    {
        delimiter = delimiter ?? "";
        foreach (T item in items)
        {
            result.Append(item);
            result.Append(delimiter);
        }
        result.Length = result.Length - delimiter.Length;
    }
    return result.ToString();
} 
```

用法：

```
ns = sa.Join(" * "); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T14:44:16.537

这种方法的优点是您可以在任何类型的序列上使用它，而不仅仅是字符串数组。

```
var ns = sa.Aggregate( (c, s) => c + " * " + s); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T14:48:47.357

我更喜欢卢克的解决方案。

```
string ns = string.Join(" * ", sa); 
```

或者，如果您的集合不可索引而只是可枚举，您也可以这样做：

```
string ns = "";
foreach(string s in sa)
{
    if (ns.Length != 0)
    {
        ns += " * ";
    }

    ns += s;
} 
```

这就像您的第二个示例，但它将测试放在循环的开头，并且不太可能像您的第二个示例中那样遇到一次性错误。数组显然是可索引的，但在某些情况下，您会得到不可索引的容器（即 System.Collections.Generic.Dictionary<T,K>.Values），而您会想要这样的东西。

# algorithm - 最好的聚类算法？（简单解释）

> ID：853139
> 
> 赞同：19
> 
> 时间：2009-05-12T14:38:50.077
> 
> 标签：algorithm, text, cluster-analysis, data-mining, text-mining

想象以下问题：

*   您有一个包含大约 20,000 条文本的数据库，表中名为“articles”
*   您想使用聚类算法连接相关文章，以便一起显示相关文章
*   该算法应该进行平面聚类（不是分层的）
*   相关文章应插入“相关”表中
*   聚类算法应根据文本判断两篇或多篇文章是否相关
*   我想用 PHP 编写代码，但使用伪代码或其他编程语言的示例也可以

我用函数 check() 编写了初稿，如果两个输入文章相关，则给出“true”，否则给出“false”。其余的代码（从数据库中选择文章，选择要比较的文章，插入相关的文章）也是完整的。也许您也可以改进其余部分。但对我来说重要的要点是函数 check()。因此，如果您可以发布一些改进或完全不同的方法，那就太好了。

**方法 1**

```
<?php
$zeit = time();
function check($str1, $str2){
    $minprozent = 60;
    similar_text($str1, $str2, $prozent);
    $prozent = sprintf("%01.2f", $prozent);
    if ($prozent > $minprozent) {
        return TRUE;
    }
    else {
        return FALSE;
    }
}
$sql1 = "SELECT id, text FROM articles ORDER BY RAND() LIMIT 0, 20";
$sql2 = mysql_query($sql1);
while ($sql3 = mysql_fetch_assoc($sql2)) {
    $rel1 = "SELECT id, text, MATCH (text) AGAINST ('".$sql3['text']."') AS score FROM articles WHERE MATCH (text) AGAINST ('".$sql3['text']."') AND id NOT LIKE ".$sql3['id']." LIMIT 0, 20";
    $rel2 = mysql_query($rel1);
    $rel2a = mysql_num_rows($rel2);
    if ($rel2a > 0) {
        while ($rel3 = mysql_fetch_assoc($rel2)) {
            if (check($sql3['text'], $rel3['text']) == TRUE) {
                $id_a = $sql3['id'];
                $id_b = $rel3['id'];
                $rein1 = "INSERT INTO related (article1, article2) VALUES ('".$id_a."', '".$id_b."')";
                $rein2 = mysql_query($rein1);
                $rein3 = "INSERT INTO related (article1, article2) VALUES ('".$id_b."', '".$id_a."')";
                $rein4 = mysql_query($rein3);
            }
        }
    }
}
?> 
```

**方法 2 [仅检查（）]**

```
<?php
function square($number) {
    $square = pow($number, 2);
    return $square;
}
function check($text1, $text2) {
    $words_sub = text_splitter($text2); // splits the text into single words
    $words = text_splitter($text1); // splits the text into single words
    // document 1 start
    $document1 = array();
    foreach ($words as $word) {
        if (in_array($word, $words)) {
            if (isset($document1[$word])) { $document1[$word]++; } else { $document1[$word] = 1; }
        }
    }
    $rating1 = 0;
    foreach ($document1 as $temp) {
        $rating1 = $rating1+square($temp);
    }
    $rating1 = sqrt($rating1);
    // document 1 end
    // document 2 start
    $document2 = array();
    foreach ($words_sub as $word_sub) {
        if (in_array($word_sub, $words)) {
            if (isset($document2[$word_sub])) { $document2[$word_sub]++; } else { $document2[$word_sub] = 1; }
        }
    }
    $rating2 = 0;
    foreach ($document2 as $temp) {
        $rating2 = $rating2+square($temp);
    }
    $rating2 = sqrt($rating2);
    // document 2 end
    $skalarprodukt = 0;
    for ($m=0; $m<count($words)-1; $m++) {
        $skalarprodukt = $skalarprodukt+(array_shift($document1)*array_shift($document2));
    }
    if (($rating1*$rating2) == 0) { continue; }
    $kosinusmass = $skalarprodukt/($rating1*$rating2);
    if ($kosinusmass < 0.7) {
        return FALSE;
    }
    else {
        return TRUE;
    }
}
?> 
```

我还想说，我知道有很多聚类算法，但是在每个站点上只有数学描述，这对我来说有点难以理解。所以（伪）代码中的编码示例会很棒。

我希望你能帮助我。提前致谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-12T15:29:55.097

我所知道的对文本数据执行此操作的最标准方法是使用“词袋”技术。

首先，为每篇文章创建一个单词的“直方图”。假设在所有文章之间，它们之间只有 500 个唯一词。那么这个直方图将是一个大小为 500 的向量（数组，列表，随便），其中数据是每个单词在文章中出现的次数。因此，如果向量中的第一个点代表单词“asked”，并且该单词在文章中出现 5 次，则 vector[0] 将是 5：

```
for word in article.text
    article.histogram[indexLookup[word]]++ 
```

现在，要比较任何两篇文章，这非常简单。我们简单地将两个向量相乘：

```
def check(articleA, articleB)
    rtn = 0
    for a,b in zip(articleA.histogram, articleB.histogram)
        rtn += a*b
    return rtn > threshold 
```

（很抱歉使用 python 而不是 PHP，我的 PHP 生锈了，使用 zip 更容易）

这是基本思想。注意阈值是半任意的；您可能希望找到一种对直方图的点积进行归一化的好方法（这几乎必须在某处考虑文章长度）并决定您认为“相关”的内容。

此外，您不应该只将每个单词都放入直方图中。一般来说，您会希望包含那些使用频率不高的那些：不是在每篇文章中，也不是在只有一篇文章中。这为您节省了一些直方图开销，并增加了关系的价值。

顺便说一下，[这里更详细地描述了这种技术](http://en.wikipedia.org/wiki/Vector_space_model)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-02T10:42:27.027

也许**集群在**这里是错误的策略？

如果要显示*相似*的文章，**请****改用*相似度搜索***。

对于文本文章，这是很好理解的。只需将您的文章插入 Lucene 等文本搜索数据库，然后使用您当前的文章作为搜索查询。在 Lucene 中，有一个[**名为的查询`MoreLikeThis`**](http://lucene.apache.org/core/5_1_0/queries/org/apache/lucene/queries/mlt/MoreLikeThis.html)正是执行此操作：查找相似文章。

集群是错误的工具，因为（特别是根据您的要求），*每篇*文章都必须放入某个集群；并且集群中的每个对象的相关项目都是相同的。如果数据库中存在异常值（很可能是这种情况），它们可能会破坏您的聚类。此外，*集群可能非常大*。没有大小限制，聚类算法可能会决定将一半的数据集放入同一个聚类中。因此，您的数据库中的每篇文章都有 10000 篇相关文章。使用相似度搜索，您只需获取每个文档的前 10 个相似项！

最后但同样重要的是：忘记使用 PHP 进行集群。它不是为此而设计的，性能也不够好。但是您可能可以很好地从 PHP 访问 lucene 索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-13T08:17:22.177

我相信您需要对集群做出一些设计决策，并从那里继续：

1.  为什么要对文本进行聚类？是否要一起显示相关文档？您想通过集群探索您的文档语料库吗？
2.  因此，您想要[平面](http://nlp.stanford.edu/IR-book/html/htmledition/flat-clustering-1.html)聚类还是[层次](http://www.resample.com/xlminer/help/HClst/HClst_intro.htm)聚类？
3.  现在我们有两个维度的复杂性问题：首先，您从文本中创建的特征的数量和类型 - 单个单词可能数以万计。你可能想尝试一些[特征选择](http://en.wikipedia.org/wiki/Feature_selection)——比如在忽略[停用词后取 N 个信息量最大的词，或者出现次数最多的 N 个词](http://en.wikipedia.org/wiki/Stop_words)。
4.  其次，您希望最大限度地减少测量文档之间相似性的次数。正如 bubaker 正确指出的那样，检查所有文档对之间的相似性可能太多了。如果聚类成少量的簇就足够了，你可以考虑[K-means clustering](http://home.dei.polimi.it/matteucc/Clustering/tutorial_html/kmeans.html)，它基本上是：选择一个初始的 K 个文档作为簇中心，将每个文档分配到最近的簇，通过查找文档向量均值重新计算簇中心，以及迭代。每次迭代只需花费 K* 数量的文档。我相信还有一些启发式方法可以减少层次聚类所需的计算数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T17:26:47.513

`similar_text`方法 #1 中调用的函数是什么样的？我认为您所指的不是聚类，而是相似性度量。我无法真正改进 White Walloun 的 :-) 直方图方法——这是一个值得阅读的有趣问题。

无论您如何实现`check()`，您都必须使用它进行至少 200M 的比较（一半`20000^2`）。“相关”文章的截断可能会限制您在数据库中存储的内容，但似乎过于随意而无法捕捉所有有用的文本聚类，

我的方法是修改`check()`以返回“相似性”指标（`$prozent`或`rtn`）。将`20K x 20K`矩阵写入文件并使用外部程序执行聚类以识别每篇文章的最近邻居，您可以将其加载到`related`表中。我会在其中进行聚类`R`- 有一个很好的[教程](http://www.stanford.edu/~mjockers/cgi-bin/drupal/node/25)，用于在`R`从`php`.

# csv - 制表符分隔文本转换为带边框的表格格式

> ID：853140
> 
> 赞同：0
> 
> 时间：2009-05-12T14:38:55.440
> 
> 标签：csv, file-format, tabular

我需要将制表符分隔文本文件转换为表格格式，如下所示

文件内容

```
ID<TAB>WorkId<TAB>Date
0<TAB>W-1230699600000<TAB>2008-12-31
1<TAB>W-1233378000000<TAB>2009-01-31 
```

需要成为

```
+--------+-----------------+-------------+
| ID     | WorkId          | Date        |
+--------+-----------------+-------------+
| 0      | W-1230699600000 | 2008-12-31  |
| 1      | W-1233378000000 | 2009-01-31  |
+--------+-----------------+-------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T14:41:04.610

我最终使用 awk 来做到这一点。这就是我所做的。

```
cat /tmp/1.txt | awk -F'\t' '
BEGIN {
    fieldSize=5;

    for (i=1; i < fieldSize; i++) {
    fLength[i]=0;
    }
}
{
    for (i=1; i <= fieldSize; i++) {
    if (fLength[i] < length($i)) {
            fLength[i] = length($i)
        }

    }
    line[NR]=$0
}
END {
    for (i=1; i <= NR; i++) {
        split(line[i], values, "\t")
        format="| "
        arguments=""
        seperator="+"
        for (j=1; j <= fieldSize; j++) {
        format=format"%-"fLength[j]"s | "
            for (c=0; c <= fLength[j]; c++) seperator=seperator"-"
            seperator=seperator"-+"
            arguments=arguments" \""values[j]"\""
        }

    if (i == 1) print seperator;

        printCommand="printf \""format"\n\" "arguments
        system(printCommand)

    if (i == 1) print seperator;
    }
    print seperator;

}
' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T07:55:22.070

使用 Perl 的格式化程序：

```
#!/usr/bin/perl
open(MYFILE, ">myfile.txt") or die "File does not exist!";

my $id, $workid, $date;

print MYFILE
"+-----+----------+---------------+\n" .
"|ID   |WorkId    |Date           |\n" .
"+-----+----------+---------------+\n";

format MYFILE =
|@<<<<|@<<<<<<<<<|@<<<<<<<<<<<<<<|
 $id    $workid     $date
+-----+----------+---------------+
.

while(<>)
{
  next if (m/^ID/);
  ($id,$workid,$date) = split(/\t/);
  write MYFILE;
} 
```

# svn - TortoiseSvn 中的灰色 Vee 图标是什么意思？

> ID：853158
> 
> 赞同：5
> 
> 时间：2009-05-12T14:43:35.167
> 
> 标签：svn, tortoisesvn, icons

XSL 文件旁边有一个灰色的复选框或“vee”图标。它与出现在版本化文件旁边的通常的“绿色 vee”相同。

这是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T14:46:17.953

来自[TortoiseSVN 帮助](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-wcstatus.html)：

![](https://tortoisesvn.net/docs/release/TortoiseSVN_en/images/ReadOnlyIcon.png)

> 如果你在一个文件上设置了 svn:needs-lock 属性，Subversion 会将该文件设为只读，直到你获得对该文件的锁定。此类文件具有此叠加层，表明您必须先获得锁定才能编辑该文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T14:46:21.167

如果“Vee”是指复选标记。然后灰色复选标记表示该文件被标记为只读。

你可以在 Tortoise SVN 设置中看到所有的图标覆盖。

```
 Right Click Explorer
> Tortoise SVN
> Setttings
> Icon Overlay
> Icon Set 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T14:46:28.843

从帮助：

> Needs Lock 覆盖用于指示文件何时设置了 svn:needs-lock 属性。对于使用 Subversion 1.4.0 和更高版本创建的工作副本，svn:needs-lock 状态由 Subversion 本地缓存，用于确定何时显示此覆盖。对于 1.4.x 之前格式的工作副本，当文件处于只读状态时，TortoiseSVN 会显示此覆盖。请注意，当您更新工作副本时，Subversion 会自动升级它们，尽管 svn:needs-lock 属性的缓存可能在文件本身更新之前不会发生。

# java - JList 有延迟加载实现吗？

> ID：853168
> 
> 赞同：4
> 
> 时间：2009-05-12T14:46:55.863
> 
> 标签：java, swing, jlist

有没有办法用 Swing 的 JList 实现延迟加载？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-12T14:53:45.117

在某种程度上，是的。如果尚未加载，您可以创建一个[`ListModel`](http://java.sun.com/javase/6/docs/api/javax/swing/ListModel.html)使用该方法加载正确值的自定义。[`getElementAt(int index)`](http://java.sun.com/javase/6/docs/api/javax/swing/ListModel.html#getElementAt(int))请参阅 Javadocs 中的示例[`JList`](http://java.sun.com/javase/6/docs/api/javax/swing/JList.html)：

```
// This list model has about 2^16 elements.  Enjoy scrolling.

ListModel bigData = new AbstractListModel() {
    public int getSize() { return Short.MAX_VALUE; }
    public Object getElementAt(int index) { return "Index " + index; }
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-03-28T09:55:03.680

我解决了。我错过了 JList API 文档顶部讨论的解决方案。

在我在另一个关于这个主题的答案中发布的示例源代码中，在创建 JList 后添加这一行（和评论）：

```
 // Tell JList to test rendered size using this one value rather
  // than every item in ListModel. (Much faster initialization)
  myList.setPrototypeCellValue("Index " + Short.MAX_VALUE); 
```

问题在于，默认情况下，JList 正在访问整个 ListModel 中的每个项目，以便在运行时确定必要的显示大小。上面添加的行覆盖了该默认值，并告诉 JList 只检查一个传递的值。该值充当用于调整 JList 显示大小的模板（原型）。

看：

[http://java.sun.com/javase/6/docs/api/javax/swing/JList.html#prototype_example](http://java.sun.com/javase/6/docs/api/javax/swing/JList.html#prototype_example)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-12T20:33:54.180

只是添加到另一个答案中，当您创建自己的实现时`ListModel`，在加载要调用的数据时：

```
fireIntervalAdded(Object source,int index0, int index1) 
```

假设您正在将数据增量加载到列表中。这将导致将`JList`其用作模型的更新。

请参阅[Javadoc 了解 fireIntervalAdded](http://java.sun.com/javase/6/docs/api/javax/swing/AbstractListModel.html#fireIntervalAdded(java.lang.Object,%20int,%20int))

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-03-28T09:19:59.410

不正确。上面的 JList 不是延迟加载的。

Swing 坚持访问整个 ListModel 中的每个项目，同时将其显示在屏幕上。此外，在访问所有项目之后，Swing 会重新访问屏幕上可见的前 n 个项目（在视口中，而不是下方的屏幕外）。

运行这个简单的“TestJList”类来证明它。每次执行“getElementAt”时，我都会调用 println。您可以清楚地看到 Swing 为 ListModel 中的每个项目调用该方法。

这发生在我运行 Mac OS X 10.6.2 和 Java 的 MacBook 一体机上：

> “1.6.0_17”Java(TM) SE 运行时环境（内部版本 1.6.0_17-b04-248-10M3025） Java HotSpot(TM) 64 位服务器 VM（内部版本 14.3-b01-101，混合模式）

```
import javax.swing.*;

/**
 *  This example proves that a JList is NOT lazily-loaded.
 */
public class TestJList {
    private static void createAndShowGUI() {
        //Create and set up the window.
        JFrame frame = new JFrame("HelloWorldSwing");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create an artificial ListModel. 
        ListModel bigData =
            new AbstractListModel() {
                public int getSize() {
                    // return Short.MAX_VALUE;  // Try this if you have a long while to waste.
                    return 10;
                }

                public Object getElementAt(int index) {
                    System.out.println("Executing 'getElementAt' # " + index);
                    return "Index " + index;
                }
            };

        // Create a JList.
        JList myList = new JList(bigData);

        // Add the JList to the frame.
        frame.getContentPane().add(myList);

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(
            new Runnable() {
                public void run() {
                    createAndShowGUI();
                }
            });
    }
} 
```

运行该代码，您将看到：

```
Executing 'getElementAt' # 0
Executing 'getElementAt' # 1
Executing 'getElementAt' # 2
Executing 'getElementAt' # 3
Executing 'getElementAt' # 4
Executing 'getElementAt' # 5
Executing 'getElementAt' # 6
Executing 'getElementAt' # 7
Executing 'getElementAt' # 8
Executing 'getElementAt' # 9
Executing 'getElementAt' # 0
Executing 'getElementAt' # 1
Executing 'getElementAt' # 2
Executing 'getElementAt' # 3
Executing 'getElementAt' # 4
Executing 'getElementAt' # 5
Executing 'getElementAt' # 6
Executing 'getElementAt' # 7
Executing 'getElementAt' # 8
Executing 'getElementAt' # 9 
```

-鳍-

# database - 用于数据库模式检索的现有 T4 数据库助手

> ID：853173
> 
> 赞同：1
> 
> 时间：2009-05-12T14:47:30.463
> 
> 标签：database, t4

您知道任何可以为我提供基本 DB 模式方法和属性（、、、等）的 T4`GetTables`模板`GetColumns`吗`MapSqlTypesToClr`？

我知道检索这些信息很容易，但是围绕它有很多额外的辅助函数，那么为什么要重新发明轮子呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-02-03T18:37:31.627

你可能已经知道了，但我会在这里留下一个可能的解决方案。

SubSonic 3 使用 T4 进行代码生成，它的 db inspector 对你来说应该绰绰有余。看看：[http ://subsonicproject.com/](http://subsonicproject.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-03-04T15:50:32.170

这是一个 T4 模板，它将架构转储到 ac# 静态类库，可以执行您想要完成的操作： [codepaste.net 片段](http://codepaste.net/b1geac)

我无法在此处粘贴代码，因为语法荧光笔不喜欢 T4 标记（谁喜欢？）。

这将允许您像这样获取列名：

```
string columnName= dbSchema.Tables.Products.Columns.QuantityPerUnit.ColumnName; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-27T16:51:21.570

不确定 T4 的位置在哪里，但您可以尝试[Wizardby](http://code.google.com/p/octalforty-wizardby)：它可以执行数据库模式逆向工程并返回一个包含所有表和列的漂亮[Schema对象。](http://code.google.com/p/octalforty-wizardby/source/browse/trunk/src/octalforty.Wizardby.Core/SemanticModel/Schema.cs)至于将`DbType`s 映射到 CLR 类型，您需要一个适当的`IDbTypeMapper`（我认为[SqlServer2005TypeMapper](http://code.google.com/p/octalforty-wizardby/source/browse/trunk/src/octalforty.Wizardby.Db/SqlServer2005/SqlServer2005TypeMapper.cs)会这样做）。

# winforms - 网格绑定到对象的属性

> ID：853174
> 
> 赞同：0
> 
> 时间：2009-05-12T14:47:54.753
> 
> 标签：winforms

我有一个绑定到对象的第三方网格。每列都绑定到对象的一个​​属性。现在，我从网格中获取选定的行并转换为对象，例如：

```
var item = myGrid.ActiveRow.ListObject as Bench; 
item.RequestedBy = WindowsIdentity.GetCurrent().Name; 
_controller.Process(item); 
```

问题是，一旦 item.RequestedBy 属性发生更改，网格就会在列中显示用户名。这是因为该行绑定到一个对象。一旦分配了值，我该怎么做才能不在列中显示用户名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T20:46:29.600

假设您的第三方的 ListObject 类实现了[ICloneable](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx)接口（它应该实现），一个建议是[克隆](http://msdn.microsoft.com/en-us/library/system.icloneable.clone.aspx)对象，这样您就不会使用相同的引用。

```
var item = myGrid.ActiveRow.ListObject.Clone() as Bench; 
item.RequestedBy = WindowsIdentity.GetCurrent().Name; 
_controller.Process(item); 
```

如果 ListObject 类中没有 Clone 方法，您可以在 Bench 类中实现它。

# c# - Visual Studio 2008 和 2008 SP1 插件：使用 EnvDTE90 和 EnvDTE90a

> ID：853175
> 
> 赞同：1
> 
> 时间：2009-05-12T14:48:14.330
> 
> 标签：c#, visual-studio-2008, add-in, breakpoints, visual-studio-addins

有谁知道在 Visual Studio 2008（[EnvDTE90](http://msdn.microsoft.com/en-us/library/bb513943.aspx)）和 Visual Studio 2008 SP1（[EnvDTE90a](http://msdn.microsoft.com/en-us/library/envdte90a.aspx)）中执行此操作的等效项？

```
 //this is code for Visual Studio 2005, works great
    EnvDTE80.DTE2 dte2 = (EnvDTE80.DTE2)System.Runtime.InteropServices.Marshal.
    GetActiveObject("VisualStudio.DTE.8.0");

    foreach (EnvDTE80.Breakpoint2 bp in dte2.Debugger.Breakpoints)
    {
         //do some things
    } 
```

我已经进行了正常的谷歌搜索并找到了各种东西，但没有一个有效。

[EnvDTE90.Debugger3](http://msdn.microsoft.com/en-us/library/bb513943.aspx)似乎只有在主动调试时才有效。我想随时访问断点？

注意：请不要发送指向应该可以工作的现有代码示例的链接。我已经尝试了所有我能找到的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-13T03:00:08.267

VS2005 代码 (EnvDTE80) 也应该与 VS2008 一起正常工作。EnvDTE90 只是添加了一些新功能，但基础仍然需要 EnvDTE80 和 EnvDTE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T01:24:06.623

我终于得到了一些代码工作。KristoferA 的回答部分正确，因为可以使用相同的 API，但代码无法逐字运行。这就是我让它工作的方式：

```
EnvDTE80.DTE2 dte2 = (EnvDTE80.DTE2)System.Runtime.InteropServices.Marshal.
GetActiveObject("VisualStudio.DTE.9.0");

foreach (EnvDTE80.Breakpoint2 bp in dte2.Debugger.Breakpoints)
{
     //do some things
} 
```

# macros - OpenOffice.org：宏帮助

> ID：853176
> 
> 赞同：0
> 
> 时间：2009-05-12T14:48:27.403
> 
> 标签：macros, openoffice.org, calc

在 OOo 计算中

我需要使用分配给按钮的宏将一列（仅**值，而不是格式）从一张表复制到另一张表（在同一个工作表中）。**

我浏览了一下，但没有发现任何重要的东西:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T15:25:43.577

好的，我可以建立答案并开始学习 OOo Basic，直到现在我才设法避免；-)

我按原样给它。

```
Sub UpdateThisWeek

Dim Doc As Object
Dim ThisWeek As Object
Dim Steering As Object
Dim Source As Object
Dim Target As Object
Dim Week as Integer

Doc = ThisComponent
ThisWeek = Doc.Sheets.getByName("This week")
Steering = Doc.Sheets.getByName("Steering")
Week = Steering.getCellByPosition(6,4).Value
Source = ThisWeek.getCellRangeByName("H12:H206")
Target = Steering.getCellRangeByName("M12:AU206").getCellRangeByPosition(Week-19,0,Week-19,194)

Dim i, s
For i = 0 To 194
    s = Source.getCellByPosition(0, i).Value
    If s > 0 Then
        Target.getCellByPosition(0, i).Value = s
    Else
        Target.getCellByPosition(0, i).String = ""
    End If
Next i

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T18:50:22.360

要回答原始问题：

使用数据数组，这在大范围的单元格上会明显更快

```
Source = ThisWeek.getCellRangeByName("H12:H206")
source_data = Source.getDataArray()

Target = Steering.getCellRangeByName("M12:AU206").setDataArray(source_data()) 
```

# windows - 用于确定路径是相对还是绝对的 Win32 API？

> ID：853177
> 
> 赞同：11
> 
> 时间：2009-05-12T14:48:40.587
> 
> 标签：windows, winapi, path

是否有一个 win32 函数可以告诉我路径是相对的还是绝对的？

谢谢，

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-12T14:49:39.740

[PathIsRelative()](http://msdn.microsoft.com/en-us/library/bb773660(VS.85).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-07-21T14:29:03.290

正如 jeffamaphone 所说：您可以使用 Shlwapi 函数[PathIsRelative()](http://msdn.microsoft.com/en-us/library/bb773660%28VS.85%29.aspx)来确定给定路径是相对的还是绝对的。

但我想我要补充一点，您可以使用 _fullpath() 轻松地将相对路径转换为绝对路径，并使用 [PathRelativePathTo()](https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/fullpath-wfullpath)[从](http://msdn.microsoft.com/en-us/library/bb773740%28v=VS.85%29.aspx)绝对路径转换为相对路径。

希望这可以帮助！

# windows-mobile - 如何以编程方式从 IPAQ 掌上电脑获取 cellID

> ID：853183
> 
> 赞同：0
> 
> 时间：2009-05-12T14:49:56.497
> 
> 标签：windows-mobile, mobile, pocketpc, cellid

我正在尝试在 HP IPAQ 614c 上获取 CellID 和 Lac。我试过使用 RIL 接口，但没有运气 RIL_GetCellTowerInfo 返回 E_NOTIMPL。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-12T19:48:13.833

如果 RIL 没有提供信息，那么我认为你不走运。我相信 RIL 是 WM 用来与无线电硬件对话的最低级别。

您将让它尝试查找 HP 提供的库以获取信息，或者您必须弄清楚如何直接与无线电硬件对话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-11T20:18:54.213

您可以使用此库获取单元 ID (LAC + CID) 作为通知：

[http://teksoftco.com/index.php?section=press&cat=2009#090611](http://teksoftco.com/index.php?section=press&cat=2009#090611)

它带有 C#、C++ 和 VB 示例。

读取 CellID 的简单应用如下所示：

# python - Django ORM：选择相关集

> ID：853184
> 
> 赞同：22
> 
> 时间：2009-05-12T14:50:25.323
> 
> 标签：python, django, orm

假设我有 2 个模型：

```
class Poll(models.Model):
    category = models.CharField(u"Category", max_length = 64)
    [...]

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    [...] 
```

给定一个 Poll 对象，我可以查询它的选择：

```
poll.choice_set.all() 
```

但是，是否有一个实用函数可以从一组 Poll 中查询所有选项？

实际上，我正在寻找类似以下的东西（不支持，我也不寻求它是如何实现的）：

```
polls = Poll.objects.filter(category = 'foo').select_related('choice_set')
for poll in polls:
    print poll.choice_set.all() # this shouldn't perform a SQL query at each iteration 
```

我做了一个（丑陋的）函数来帮助我实现这一目标：

```
def qbind(objects, target_name, model, field_name):
    objects = list(objects)
    objects_dict = dict([(object.id, object) for object in objects])
    for foreign in model.objects.filter(**{field_name + '__in': objects_dict.keys()}):
        id = getattr(foreign, field_name + '_id')
        if id in objects_dict:
            object = objects_dict[id]
            if hasattr(object, target_name):
                getattr(object, target_name).append(foreign)
            else:
                setattr(object, target_name, [foreign])
    return objects 
```

使用如下：

```
polls = Poll.objects.filter(category = 'foo')
polls = qbind(polls, 'choices', Choice, 'poll')
# Now, each object in polls have a 'choices' member with the list of choices.
# This was achieved with 2 SQL queries only. 
```

Django已经提供了一些更简单的东西吗？或者至少，一个片段以更好的方式做同样的事情。

你通常如何处理这个问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-07T10:56:21.833

时间过去了，现在 Django 1.4 中引入了[prefetch_related()](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#prefetch-related) QuerySet 函数，可以使用此功能。此功能有效地执行建议`qbind`功能所执行的操作。IE。执行了两个查询，连接发生在 Python 领域，但现在由 ORM 处理。

原来的查询请求现在变成：

```
polls = Poll.objects.filter(category = 'foo').prefetch_related('choice_set') 
```

如以下代码示例所示，`polls`QuerySet 可用于获取所有`Choice`对象，`Poll`而无需任何进一步的数据库命中：

```
for poll in polls:
    for choice in poll.choice_set:
        print choice 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-05-12T15:00:07.503

我想你的意思是，“我想要一组民意调查的所有选择。” 如果是这样，试试这个：

```
polls = Poll.objects.filter(category='foo')
choices = Choice.objects.filter(poll__in=polls) 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-05-12T18:11:29.560

**更新**：从 Django 1.4 开始，这个特性是内置的：见[prefetch_related](https://docs.djangoproject.com/en/stable/ref/models/querysets/#prefetch-related)。

第一个答案：不要浪费时间编写类似 qbind 的东西，除非您已经编写了一个工作应用程序，对其进行分析，并证明 N 次查询实际上是您的数据库和负载场景的性能问题。

但也许你已经做到了。所以第二个答案： qbind() 可以完成您需要做的事情，但是如果将其打包在自定义 QuerySet 子类中，并附带一个返回自定义 QuerySet 实例的 Manager 子类，则它会更加惯用。理想情况下，您甚至可以使它们通用且可重用于任何反向关系。然后你可以做类似的事情：

```
Poll.objects.filter(category='foo').fetch_reverse_relations('choices_set') 
```

有关 Manager/QuerySet 技术的示例，请参阅[此代码段](http://www.djangosnippets.org/snippets/1079/)，它解决了类似的问题，但针对通用外键的情况，而不是反向关系。将 qbind() 函数的内容与那里显示的结构结合起来，为您的问题提供一个非常好的解决方案并不难。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T15:34:56.557

我认为您要尝试做的是子数据的“急切加载”一词-这意味着您正在为每个轮询加载子列表（choice_set），但所有这些都在对数据库的第一次查询中，因此您没有稍后进行一堆查询。

如果这是正确的，那么您正在寻找的是“select_related” - 请参阅[https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related)

我注意到您尝试了“select_related”，但没有奏效。你可以尝试做'select_related'然后过滤。那可能会解决它。

* * *

更新：这不起作用，请参阅下面的评论。

# php - 如何在 innerhtml 中使用 ajax 和 php 更新 mysql 数据库

> ID：853185
> 
> 赞同：4
> 
> 时间：2009-05-12T14:51:07.803
> 
> 标签：php, mysql, database, ajax

如何在不刷新页面的情况下使用 ajax 和 php 更新 mysql 数据库

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-12T14:59:14.213

这是一个[很好的例子](http://www.w3schools.com/PHP/php_ajax_database.asp)，它显示了一个`SELECT`语句，但它应该是直截了当的，并且很容易将脚本更新为您需要的内容。

**示例页面中的 HTML：**

```
<html>
    <head>
        <script src="selectuser.js"></script>
    </head>
    <body>

        <form> 
            Select a User:
            <select name="users" onchange="showUser(this.value)">
                <option value="1">Peter Griffin</option>
                <option value="2">Lois Griffin</option>
                <option value="3">Glenn Quagmire</option>
                <option value="4">Joseph Swanson</option>
            </select>
        </form>

        <p>
        <div id="txtHint"><b>User info will be listed here.</b></div>
    </p>

</body>
</html> 
```

**脚本：**

```
var xmlHttp;

function showUser(str)
{ 
    xmlHttp=GetXmlHttpObject();
    if (xmlHttp==null)
    {
        alert ("Browser does not support HTTP Request");
        return;
    }
    var url="getuser.php";
    url=url+"?q="+str;
    url=url+"&sid="+Math.random();
    xmlHttp.onreadystatechange=stateChanged;
    xmlHttp.open("GET",url,true);
    xmlHttp.send(null);
}

function stateChanged() 
{ 
    if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete")
    { 
        document.getElementById("txtHint").innerHTML=xmlHttp.responseText;
    } 
}

function GetXmlHttpObject()
{
    var xmlHttp=null;
    try
    {
        // Firefox, Opera 8.0+, Safari
        xmlHttp=new XMLHttpRequest();
    }
    catch (e)
    {
        //Internet Explorer
        try
        {
            xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
        }
        catch (e)
        {
            xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
    }
    return xmlHttp;
} 
```

**Ajax 调用的 PHP：**

```
<?php
$q = $_GET["q"];

$con = mysql_connect('localhost', 'peter', 'abc123');
if (!$con) {
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("ajax_demo", $con);

$sql = "SELECT * FROM user WHERE id = '" . $q . "'";

$result = mysql_query($sql);

echo "<table border='1'>
    <tr>
    <th>Firstname</th>
    <th>Lastname</th>
    <th>Age</th>
    <th>Hometown</th>
    <th>Job</th>
    </tr>";

while ($row = mysql_fetch_array($result)) {
    echo "<tr>";
    echo "<td>" . $row['FirstName'] . "</td>";
    echo "<td>" . $row['LastName'] . "</td>";
    echo "<td>" . $row['Age'] . "</td>";
    echo "<td>" . $row['Hometown'] . "</td>";
    echo "<td>" . $row['Job'] . "</td>";
    echo "</tr>";
}
echo "</table>";

mysql_close($con);

?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-12T15:00:27.100

您可以使用[JQuery](http://docs.jquery.com/Ajax/jQuery.ajax#options)库并执行类似的操作

```
$.ajax({
   type: "POST",
   url: "some.php",
   data: "name=John&location=Boston",
   success: function(msg){
     alert( "Data Saved: " + msg );
   }
 }); 
```

在你的 some.php 文件中有这样的东西：

```
<?php

$name = $_POST['name'];
$location = $_POST['location'];

$query("your insert query");

$result = mysql_query($query);

?> 
```

?>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T14:59:20.377

[http://www.w3schools.com/PHP/php_ajax_database.asp](http://www.w3schools.com/PHP/php_ajax_database.asp)很好地解释了它。

# linq - linq edmx 中的表别名

> ID：853192
> 
> 赞同：0
> 
> 时间：2009-05-12T14:52:07.787
> 
> 标签：linq

我正在尝试使用存储过程复制一些简单的东西。

我有一组这样的表： acem__main
acem__child
beta__main
beta_child
xyz__main
xyz__child

在我的 edmx 中，我通过主键/辅助键链接了 acem_main 和 acem_child。

但是，根据谁登录，我想使用acem、beta 或xyz 的数据。

我无法想象如何将它融入 linq - 有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-12T17:33:03.760

创建一个返回 IEnumerable 并将用户作为参数的方法。在该方法中，为acem、beta 或xyz 创建三个Linq 查询，并从对应于给定用户的查询中返回结果。

# linux - 从用户空间重启 Linux 机器

> ID：853194
> 
> 赞同：0
> 
> 时间：2009-05-12T14:52:38.097
> 
> 标签：linux, reboot

我需要从用户空间进程重新启动 Linux 机器。我希望有以下行为：

1.  同步文件系统
2.  不要试图优雅地停止进程，转到运行级别 5/6 等，因为我认为事情很糟糕并且会失败

这些要求可以一起实现吗？

我打算在 proc/sysrq-trigger 中写一个“b”。有没有更好的办法？（不，那不会给我同步。）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T15:04:51.380

我假设你有root。

*   sysrq-trigger 很好，你只需要先回显 's' 几次，这是一个“紧急同步”。
*   您还可以查看 shutdown(8) 的“-n”选项。这是做你想做的事的罐头方法。它只是发送 SIGTERM、SIGKILL、同步并关闭或重新启动（-h 或 -r 选项。）

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T15:05:00.490

好吧，执行sync(1)，kill -1，再次同步，kill -9 -1，sync，poweroff -f。

我猜这应该可以解决问题！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T05:20:36.107

这直接来自 sys/reboot.h ：

```
#ifndef _SYS_REBOOT_H
#define _SYS_REBOOT_H   1

#include <features.h>

/* Perform a hard reset now.  */
#define RB_AUTOBOOT     0x01234567

/* Halt the system.  */
#define RB_HALT_SYSTEM  0xcdef0123

/* Enable reboot using Ctrl-Alt-Delete keystroke.  */
#define RB_ENABLE_CAD   0x89abcdef

/* Disable reboot using Ctrl-Alt-Delete keystroke.  */
#define RB_DISABLE_CAD  0

/* Stop system and switch power off if possible.  */
#define RB_POWER_OFF    0x4321fedc

__BEGIN_DECLS

/* Reboot or halt the system.  */
extern int reboot (int __howto) __THROW;

__END_DECLS

#endif  /* _SYS_REBOOT_H */ 
```

我相信 RB_HALT_SYSTEM 会处理所有 sync() 等。我通常自己做，最后用 RB_AUTOBOOT 触发重启。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T05:24:37.490

在普通发行版上，最简单的方法是：

```
system("/sbin/reboot -f"); 
```

这将同步所有文件系统，然后立即重新启动。请注意 sysrq b 不会同步。

# javascript - Firefox 的 Flash 外部接口问题

> ID：853195
> 
> 赞同：1
> 
> 时间：2009-05-12T14:52:41.810
> 
> 标签：javascript, flash, actionscript-3, externalinterface

我很难让 ExternalInterface 在 Firefox 上工作。我正在尝试从 javascript 调用 AS3 函数。SWF 设置了正确的回调，它在 IE 中工作。

我正在使用 AC_RunActiveContent.js 将 swf 嵌入到我的页面中。但是，我已经对其进行了修改，以将 ID 添加到对象/嵌入标签中。下面是分别为 IE 和 Firefox 生成的 object 和 embed 标签。

```
 <object codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="400" height="400" align="middle" id="jpeg_encoder2" name="jpeg_encoder3" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" >
    <param name="movie" value="/jpeg_encoder/jpeg_encoder3.swf" /> 
    <param name="quality" value="high" /> 
    <param name="play" value="true" /> 
    <param name="loop" value="true" /> 
    <param name="scale" value="showall" /> 
    <param name="wmode" value="window" /> 
    <param name="devicefont" value="false" /> 
    <param name="bgcolor" value="#ffffff" /> 
    <param name="menu" value="false" /> 
    <param name="allowFullScreen" value="false" /> 
    <param name="allowScriptAccess" value="always" /> 
</object>

<embed 
    width="400" 
    height="400" 
    src="/jpeg_encoder/jpeg_encoder3.swf" 
    quality="high" 
    pluginspage="http://www.macromedia.com/go/getflashplayer" 
    align="middle" 
    play="true" 
    loop="true" 
    scale="showall" 
    wmode="window" 
    devicefont="false" 
    id="jpeg_encoder2" 
    bgcolor="#ffffff" 
    name="jpeg_encoder3" 
    menu="false" 
    allowFullScreen="false" 
    allowScriptAccess="always" 
    type="application/x-shockwave-flash" > 
</embed> 
```

我正在调用这样的函数......

```
<script>
try {
    document.getElementById('jpeg_encoder2').processImage(z);
} catch (e) { alert(e.message); }
</script> 
```

在 Firefox 中，我收到一条错误消息“ `document.getElementById("jpeg_encoder2").processImage is not a function`”

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T08:44:45.310

嗯，您是否使用 addCallback 向 Javascript 公开了您的 actionscript 函数？

[关于 addCallback 的 Adob​​e 文档](http://livedocs.adobe.com/flash/8/main/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Parts&file=00002201.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-01-18T13:37:24.510

下面是如何将 Flash 影片放置在 html 页面中的示例。这部电影是一部非常简单的电影，开头有一个停止动作。影片显示在下面的测试运行主题下。这个特定的 html 代码是由 FlashMX 的 Publish 命令自动生成的。请注意，Flash 影片文件是 simplemovie.swf；Flash 自动分配了一个 id 和一个名称以匹配电影文件名（减去 .swf 扩展名）。实际上，name 和 id 可以是任何东西（但不要使用公开的名称，特别是不要以数字开头），只要它没有被同一页面中的任何其他元素使用。

``codebase="http://download.macromedia.com/pub/shockwave/cabs/flash`/swflash.cab#version=6,0,0,0"` ` WIDTH="150" HEIGHT="75" id="simplmovie" ALIGN=""> `` quality=medium` ` swliveconnect="true" ` bgcolor=#FFFFFF WIDTH="150" HEIGHT="75" ` name="simplmovie" ` ALIGN ="" `TYPE="application/x-shockwave-flash" `PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer">

 `flash 文件中有一个播放函数，以下函数将调用该函数：

```
函数 testEval(stringToEval)
{
  var 电影=eval(stringToEval);
  如果（电影）
  {
    if (movie.PercentLoaded())
    {
      if (movie.PercentLoaded()==100)
      {
        电影.Play();
      }
      别的
      {
        alert("电影还在加载中，请稍后再试");
      }
    }
    别的
    {
      alert("找到电影对象-但无法发送命令");
    }
  }
  别的
  {
    alert("找不到电影对象");
  }
}

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-03-15T20:11:38.683

看到这个[帖子](https://stackoverflow.com/questions/2229358/why-cant-i-get-javascript-to-talk-to-actionscript/5280740#5280740)。

您想要一个更像这样的 JS 函数来检索 Flash 对象（而不是 getElemById）：

```
function thisMovie(movieName) {
  if(navigator.appName.indexOf("Microsoft") != -1) {
    return window[movieName];
  } else {
    return document[movieName];
  }
}; 
```

并确保在加载文档之前不要调用此函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-13T15:17:54.140

尝试在**对象**和**嵌入**标签中使用相同的 id。我记得一个浏览器使用一个标签，另一个浏览器使用另一个……不知道哪个是哪个。前段时间我有同样的问题。

我通过修改Flash 附带的[示例代码来解决问题。](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/external/ExternalInterface.html#includeExamplesSummary)确保它有效，然后将其剥离并调整以供我使用。

在示例中，请注意**对象**标签的**id**设置为“ExternalInterfaceExample”，然后**嵌入**标签的**名称**参数也设置为“ExternalInterfaceExample”。我想这可能是你的线索。

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-05-05T23:23:41.747

在您尝试调用它们之前，您的 swf 是否可见（在页面上）？如果没有，请阅读：[swf-not-initializing-until-visible](https://stackoverflow.com/questions/2768777/flash-swf-not-initializing-until-visible-can-i-force-them-to-initialize)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-08-25T05:46:29.443

试试这两件事：

首先，尝试像这样从 Javascript 调用函数：

```
var swf;
if(navigator.appName.indexOf("Microsoft") != -1) {
    swf = window["jpeg_encoder2"];
} else {
    swf = document["jpeg_encoder2"];
}
if(typeof(swf) == "undefined") swf = document.getElementById("jpeg_encoder2");

swf.processImage(z); 
```

其次，我发现 Firefox 中的 ExternalInterface 调用似乎只适用于嵌入标签，而不适用于对象标签。如果您只使用嵌入标签，看看您是否可以让它工作。（现在，我不清楚您发布的 HTML/Javascript 组合是否会访问对象或嵌入元素。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-04-25T09:09:58.923

If instead of using AC_RunActiveContent.js to embed your flash movie you use swfobject there is a easy build-in way of doing that.

```
<head>
 <script type="text/javascript" src="swfobject.js"></script>

 <script type="text/javascript">
 try {
      swfobject.getObjectById('jpeg_encoder2').processImage(z); 
      } catch (e) { alert(e.message); }
 </script>
</head> 
```

If you are not using swfObject you could just copy and paste *swfobject.getObjectById* straight in to your code:

```
<script type="text/javascript">

function getObjectById(objectIdStr) {
        var r = null;
        var o = getElementById(objectIdStr);
        if (o && o.nodeName == "OBJECT") {
            if (typeof o.SetVariable != UNDEF) {
                r = o;
            }
            else {
                var n = o.getElementsByTagName(OBJECT)[0];
                if (n) {
                    r = n;
                }
            }
        }
        return r;

getObjectById('jpeg_encoder2').processImage(z); //call your method 
</script> 
```

# audio - 可靠且可扩展的实时音频流解决方案？

> ID：853196
> 
> 赞同：1
> 
> 时间：2009-05-12T14:52:53.387
> 
> 标签：audio, streaming, live, audio-streaming

我想知道您是否可以分享您关于实时音频流（运行在线广播电台）的想法/资源。我不得不承认，我是这个主题的新手，所以请原谅我缺乏细节。

最推荐的平台/软件设置是什么？

基于个人经验的意见将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T23:22:42.953

比较靠谱的是：

*   [大喊大叫](http://www.shoutcast.com/)
*   [冰播2](http://www.icecast.org/)

如果您尝试在运行时切换简介文件，Shoutcast 可能会不时崩溃。请参阅[icecast2 与shoutcast 的性能比较](http://www.icecast.org/loadtest.php)。有许多易于使用的工具，例如 sc_trans 或 winamp 的 DSP 广播插件，您可以轻松配置这些工具以在这些服务器上开始流式传输您自己的广播。请参阅[此处](http://shoutcast.com/download)并大致浏览该主题，有很多关于如何启动自己的收音机的指南。

Icecast2 和 Shoutcast 都可以毫无问题地为数千个客户提供服务（我多年来一直在高负载的生产环境中使用它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T14:57:16.653

[Shoutcast](http://www.shoutcast.com/)一直对我很有效。我知道其他一些人也使用它。可靠且快速。

# .net - 使用 .Net 检查文件系统容量的最佳方法是什么？

> ID：853202
> 
> 赞同：4
> 
> 时间：2009-05-12T14:54:20.277
> 
> 标签：.net, filesystems

.Net 中确保路径作为存储文件容量的最佳方法是什么。在下载之前，我需要确保有文件空间，因为源不允许再次下载文件。我查看了 System.IO.DriveInfo 但这不适用于 UNC 路径。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-12T14:57:48.070

这是从[该页面](http://www.dev102.com/2008/10/29/how-to-get-free-disk-space-and-other-wmi-stuff-net/)获取的一个简短函数，它显示了如何使用 WMI 获取任何驱动器（本地或网络/UNC）的可用空间。

```
private static ulong GetFreeDiskSpaceInBytes(string drive)
{
    ManagementObject disk =
        new ManagementObject("win32_logicaldisk.deviceid=\"" + drive + ":\"");
    disk.Get();
    return (ulong)disk["FreeSpace"];
} 
```

如果您有 Win32 API 解决方案，则可以按照[此 MSDN 帮助页面](http://support.microsoft.com/kb/202455)`GetDiskFreeSpaceEx`的建议使用该功能。它似乎也支持本地和网络驱动器名称。

```
Private Declare Function GetDiskFreeSpaceEx Lib "kernel32" _
    Alias "GetDiskFreeSpaceExA" (ByVal lpDirectoryName As String, _
    lpFreeBytesAvailableToCaller As Currency, _
    lpTotalNumberOfBytes As Currency, _
    lpTotalNumberOfFreeBytes As Currency) As Long

Private Sub Form_Click()
    Dim Status As Long
    Dim TotalBytes As Currency
    Dim FreeBytes As Currency
    Dim BytesAvailableToCaller As Currency

    Status = GetDiskFreeSpaceEx(Text1.Text, BytesAvailableToCaller, _
      TotalBytes, FreeBytes)
    If Status <> 0 Then
        MsgBox Format(TotalBytes * 10000, "#,##0"), , "Total Bytes"
        MsgBox Format(FreeBytes * 10000, "#,##0"), , "Free Bytes"
        MsgBox Format(BytesAvailableToCaller * 10000, "#,##0"), , _
          "Bytes Available To Caller"
    End If
End Sub 
```

如果您在将其转换为 C# 时遇到问题，请告诉我。

我不得不在这里推荐 WMI 解决方案，它是完全管理的（除了更少的行），但任何一个都应该做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T14:58:04.077

我确信您可以使用 WMI 获得所需的答案，这通常是一个很好的起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T15:00:05.650

查看磁盘是否可以存储文件的唯一可靠方法是在磁盘上实际创建一个该大小的文件。

即使磁盘信息表明有足够的空间，由于碎片整理，您很少能使用 100% 的可用磁盘空间。

# asp.net - UpdatePanel 初始调用

> ID：853207
> 
> 赞同：0
> 
> 时间：2009-05-12T14:55:58.463
> 
> 标签：asp.net, javascript

我在 asp.net 页面中使用 UpdatePaenl。它有一个按钮来触发它。按下按钮时，我可以显示“正在加载”。这是我的问题：我需要它在第一次调用页面时显示“正在加载”，而不仅仅是在按下按钮时。

我想当页面首次加载时，JavaScript 将用于触发 UpdatePanel。

任何想法都非常感谢。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T16:20:28.057

您应该能够在 javascript 中通过设置在页面加载后触发的事件来执行此操作：

```
// Define the pg_Loaded() function as the handler for the PageLoaded event
Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(pg_Loaded);

var blnFirstPageVisit = true;

function pg_Loaded() 
{
    if (blnFirstPageVisit == true) 
    {
        // Display loading animation
        fnToggleLoading();

        // Trigger button postback event
        <asp:literal runat="server" id="ltlExecute" />

        // Prevent this from firing a second time after the postback completes
        blnFirstPageVisit = false;
    }
} 
```

在 ASP 中设置文字如下：

```
ltlExecute.Text = ClientScript.GetPostBackEventReference(btnExecute, "") 
```

MSDN 上有更多信息：http: [//msdn.microsoft.com/en-us/library/bb311028.aspx](http://msdn.microsoft.com/en-us/library/bb311028.aspx)

# sql - 我可以让这更快吗？

> ID：853211
> 
> 赞同：0
> 
> 时间：2009-05-12T14:57:05.060
> 
> 标签：sql, sql-server-2005, performance

好吧，我有一系列运行我们内部开发的数据仓库解决方案的 sps。虽然在大多数情况下它运行得很好，但有一个存储过程运行得非常慢。执行平均需要大约 30 分钟。我确切地知道瓶颈在哪里，我只是不知道如何解决它。

基本上，存储过程所做的是创建一系列可变临时表并插入到这些表中。那里没问题。然后它加入临时表并插入到另一个临时表中，两次（第二个有点不同）。

这是连接表并插入临时表的语句，并且是永远需要的部分。任何帮助将不胜感激。

```
; with Requested as
(
    select distinct 
        PONUMBER as PONumber, 
        min(REQSTDBY) as RequestedBy
    from dw.POP10110
    where REQSTDBY <>''
    group by PONUMBER
)
insert into @tblTableA
(
    PONumber, 
    ReceiptNumber,
    ReceiptLineNumber, 
    VendorID, 
    POType, 
    QuantityShipped, 
    QuantityInvoiced,
    ItemNumber, 
    ItemDescription, 
    UofM, 
    UnitCost, 
    ExtendedCost, 
    SiteID,
    ProjectNumber, 
    AccountID, 
    RequestedBy, 
    GLPostDate, 
    VendorName, 
    CostCategoryID
) 

select 
    a.PONUMBER, 
    a.POPRCTNM, 
    a.RCPTLNNM, 
    a.VENDORID, 
    a.POPTYPE, 
    a.QTYSHPPD, 
    a.QTYINVCD,
    b.ITEMNMBR,
    b.ITEMDESC,
    b.UOFM,
    b.UNITCOST,
    b.EXTDCOST,
    b.LOCNCODE,
    b.ProjNum,
    case i.CostCategoryID 
        when 'MISC' then isnull(i.AccountID,'N/A')

        else 
            case j.CostCategoryID 
                when 'MISC' then 
                    isnull(j.AccountID,'N/A')

                else 
                    isnull(c.PurchaseAccount,'N/A') 
            end
    end as AccountID,
    d.RequestedBy,
    coalesce(e.GLPOSTDT, f.GLPOSTDT, '') as GLPostDate,
    coalesce(e.VENDNAME, f.VENDNAME, '') as VENDNAME,
    case i.CostCategoryID when 'MISC' then i.CostCategoryID else 
        case j.CostCategoryID when 'MISC' then j.CostCategoryID else coalesce(g.CostCategoryID, h.CostCategoryID, '') end
    end as CostCategoryID

from dw.POP10500 a
    inner join dw.POP30310 b
        on a.PONUMBER=b.PONUMBER
            and a.POPRCTNM=b.POPRCTNM
            and a.RCPTLNNM=b.RCPTLNNM
    left outer join @gl00100 c
        on b.INVINDX=c.ActID
    left outer join Requested d
        on b.PONUMBER = d.PONumber
    left outer join dw.POP30300 e
        on b.POPRCTNM=e.POPRCTNM
    left outer join dw.POP10300 f
        on b.POPRCTNM=f.POPRCTNM
    left outer join @pop31310 g
        on b.POPRCTNM=g.ReceiptNumber
    left outer join @pop11310 h
        on b.POPRCTNM=h.ReceiptNumber
    left outer join @pop30390 i
        on a.POPRCTNM=i.ReceiptNumber
    left outer join @pop10390 j
        on a.POPRCTNM=j.ReceiptNumber 
```

据我所知，适当的索引已经到位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T15:01:19.093

您的临时表/表变量中有多少行？

看起来您正在使用表变量，但如果它们有很多行，请考虑改用临时表（名称以 # 开头的表）。您可以为这些表添加额外的索引，而表变量只能有一个聚集索引。

即将您的表变量
@pop31310、@pop11310、@pop30390、@pop10390
转换为临时表，并在 ReceiptNumber 列上为每个变量指定一个索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T15:04:22.910

警告：我的大部分经验是使用 Oracle，而不是 SQLServer，但我相信答案是成立的。

通常，您希望最小化连接中的表数量，因为优化器必须处理排列，并且容易混淆。对于数据仓库式查询，我会在单个连接中查找不超过三个表，并分段构建查询。

另一个明显的问题：这些临时表是否被索引？如果不是，那么您将不得不对它们进行相对低效的全行连接（如果支持，则进行表扫描或哈希连接）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T15:06:21.440

在您的变量表（以 @ 开头的那些）中，可能没有索引。

唯一可以添加到变量表的索引是聚集索引主键。

这会按 OrderID 对变量表进行物理排序。

```
DECLARE @Orders TABLE
(
  OrderID int PRIMARY KEY,
  CustomerID int
  OrderDate datetime
) 
```

这会按 CustomerID 对 @Orders 表进行物理排序，并使用 OrderID 打破平局。现在适合加入 CustomerID。

```
DECLARE @Orders TABLE
(
  OrderID int,
  CustomerID int
  OrderDate datetime,
  PRIMARY KEY(CustomerID, OrderID)
) 
```

另外 - 请注意，变量表在优化时缺少统计信息。优化器将始终将它们视为具有 0 行，并在其他连接类型可能更合适时使用嵌套循环连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T18:43:13.923

向一些表和索引添加了统计信息，并将时间从 25 分钟缩短到 9 分钟。

# c# - 如何命名一个既代表大小又代表位置的结构？

> ID：853219
> 
> 赞同：2
> 
> 时间：2009-05-12T14:58:42.907
> 
> 标签：c#, data-structures, naming-conventions, size, position

我有一个名为 WaveSize 的结构来表示样本量或时间量，但我也使用此结构来表示波中的位置或偏移量。

虽然用 Vector2d 类型表示坐标系中的大小和位置很常见，但我无法找到一个足够抽象的好名称来表示波长和波位置/偏移量。

我觉得奇怪的是看到类似的东西：

```
public WaveSize Size { get; }
public WaveSize Offset { get; } 
```

我宁愿想出一个好名字，也不愿创建空类或使用“使用”。

任何建议将不胜感激。提前致谢。

编辑：正如 Reed Copsey 和 Marc Gravel 所建议的，拥有两个不同的类很有意义，因为它们是两个不同的概念，因此，代码中的任何相似之处都应该被视为仅仅是巧合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T15:05:55.823

您可以将其与 winforms`Point`和`Size`结构进行比较……他们决定即使它们相似，也要将它们分开。它在代数意义上是有意义的：

```
Point - Point = Size
Point + Size = Point
Size + Size = Size
Point + Piont = ???? error (no defined operator) 
```

ETC

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T15:14:25.233

我将有两个单独的结构，并使它们之间的转换变得容易。

您试图在这里表示两个概念，一个是位置，一个是大小。由于这是两个概念上不同的想法，我将它们设为两个结构。

我也同意[Marc Gravell](https://stackoverflow.com/questions/853219/how-to-name-a-struct-that-represents-both-a-size-and-a-position/853256#853256)关于 BCL 的 Point/Size 结构的回答。我认为他们是一个很好的榜样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T15:04:07.403

波向量？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T15:01:42.963

你能有一个简单地称为 Wave 的结构，然后 size 和 offset 将适合更通用的名称吗？我希望你还没有 Wave 结构 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T15:04:18.837

“偏移”的通常名称不是相移吗？

我可能会选择 WaveProperties，真的。

# html - 在框架中提交表单后如何使浏览器滚动到顶部

> ID：853220
> 
> 赞同：3
> 
> 时间：2009-05-12T14:58:43.107
> 
> 标签：html, iframe

我有一个带有 iframe 的页面。在 iframe 中是针对该框架的表单。提交按钮在底部附近，但结果页面很短并且显示在顶部。因此，当用户点击提交时，表单会消失，但他们看不到结果，因为它们向下滚动得太远了。

我希望重新调整视图，而不是仅仅在结果页面中放置一堆空白。当用户点击提交时，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T15:05:11.910

试试这个：

```
<form onsubmit="parent.scrollTo(0, 0); return true"> ... 
```

我不知道跨浏览器的兼容性如何。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T15:43:28.337

您可以使用**jquery**做到这一点：

[http://www.learningjquery.com/2007/09/animated-scrolling-with-jquery-12](http://www.learningjquery.com/2007/09/animated-scrolling-with-jquery-12)

**原型**：

```
$(element).scrollTo(); 
```

[http://www.prototypejs.org/api/element/scrollto](http://www.prototypejs.org/api/element/scrollto)

您只需要访问 iframe 中的元素。

希望有帮助

编辑：因为它是库，您将避免跨浏览器/兼容性问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T15:05:52.937

在表单提交上调用如下 javascript 函数：

```
function ScrollTop(){
        if (document.all){
        document.body.scrollLeft = 0;
        document.body.scrollTop = 0;
        }
    else{
        window.pageXOffset = 0;
        window.pageYOffset = 0;
        }
} 
```

# delphi - 自由格式报告工具

> ID：853229
> 
> 赞同：3
> 
> 时间：2009-05-12T15:00:25.180
> 
> 标签：delphi, reporting, rdbms, freeform

我正在寻找**免费的表格**报告工具。

免费/开源是首选。

它应该在没有数据源的情况下工作，并且应该能够在页面上的任何位置打印。

我需要这个，因为我使用的是一个古老但速度非常快的半 RDBMS，它不支持我迄今为止看到的所有报告引擎所要求的数据集、数据源等概念。

它只有 2 个 DLL，带有一些针对各种语言的声明模块。

实际上，我在过去 6 年中一直在使用 ComponentOne 的 VS View，并且对此非常满意。我通常在需要打印时使用这个组件，即使在 Delphi 中也是如此。

但是对于这个特别的项目，我的老板不允许我使用任何 ActiveX，所以我在 VCL 中寻找一个好的和稳定的免费软件解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T15:52:47.667

我会看看[快速报告](http://fast-report.com/en/)。是的，它确实支持数据集，但还有一种“构建自己的”方法，方法是在表单上放置一个组件并分配写入 3 个事件（获取字段值、下一条记录、位于文件末尾）。我已经多次将这种方法与“非”数据感知数据的快速报告一起使用，没有任何问题。我相信他们有一个开源的[旧版本，但最新版本的](http://fast-report.com/en/download/free-report-download.html)[成本](http://fast-report.com/en/buy/fast-report-4-order.html)是合理的，而且他们确实有一个你可以玩的试用版。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-13T00:33:32.760

尝试报告管理器 [http://reportman.sourceforge.net/](http://reportman.sourceforge.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T15:16:24.310

我们使用类似的数据库，最近开始使用[List & Label](http://www.combit.net/en/)。它有粗糙的边缘，但通常效果很好。它的核心是一堆 DLL，但不需要注册。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T16:12:38.523

根据您在自由格式报告工具中寻找的内容，我已成功使用[WP Tools Reporter 插件](http://www.wptools.com/products/wpreporter/rtfreporting.htm)来生成报告。我从各个位置提供数据（它当然也可以做数据库），您可以确定是否输出部分等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-13T06:38:00.793

另一种选择是使用您自己的 TDataset 或 OLEDB 驱动程序。显然OLEDB驱动更通用，可以在Delphi之外使用。两者实际上在简单的层面上都相当容易做到（尽管如果需要可以变得更加复杂）。

编写自己的 OLEDB 驱动程序[的起点是 techvanguards optk 站点。](http://www.techvanguards.com/products/optk/). 这是一个免费的源代码工具包，可供下载。虽然自 D5 以来没有更新，但我使用 Delphi 2006 编写了一个简单的提供程序，并且通过一些黑客攻击，您应该能够使其适用于 Delphi 2009。

我找不到有关创建您自己的自定义 TDataset 的教程的在线参考，但我曾经按照“使用 Delphi 3 - 特别版”中的说明进行操作，因此如果您可以在网络上找到该教程的副本，它有一个关于创建的章节自定义 TDatasets。（编辑：根据评论，这是一个很好的[链接](http://gexperts.com/articles/customds.asp)

首先尝试 OLEDB 驱动程序路由，然后您可以使用标准的 delphi TDataset。

# soap - ColdFusion 中用于 WSDL 的 XSD

> ID：853239
> 
> 赞同：1
> 
> 时间：2009-05-12T15:02:56.640
> 
> 标签：soap, coldfusion, xsd, wsdl, cfc

如何从 ColdFusion 中生成的 WSDL 生成 XSD？我不确定 XSD 如何用于创建 SOAP 存根，但有人需要它，所以我需要找到一种方法来生成它。我尝试为此使用一些在线工具，但它显示“内联定义”。

希望有人知道如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T17:17:20.040

生成的 WSDL 文档包含一个 XSD 属性：

```
xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
```

（以上来自 Adob​​e ColdFusion 8）

要为所讨论的 WSDL 找到合适的 XSD（如果 Adob​​e CF、Railo、OpenBD 或其版本之间存在差异），只需在 WSDL 中搜索“xsd”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-01-16T22:12:00.767

我不确定 WSDL 的 XSD 是否真的是您正在寻找的。您在问题中指出，这样做的目的实际上是生成存根。在这种情况下，有用的信息将是描述参数和/或服务响应的 XSD，我无法告诉您如何自动生成。

根据客户端系统的平台，我建议您查看以下工具之一：

*   [WSDL 2 Java](http://cxf.apache.org/docs/wsdl-to-java.html)
*   [wsdl.exe (.NET)](http://msdn.microsoft.com/en-us/library/7h3ystb6%28v=vs.80%29.aspx)

# php - IE历史

> ID：853241
> 
> 赞同：1
> 
> 时间：2009-05-12T15:03:11.727
> 
> 标签：php, internet-explorer, caching

我使用 mysql 数据库生成了一些 png 图表和 excel 文件。我在我的 web 应用程序中将图表显示为图像，但有时 IE 用户无法访问文件的最新版本，因为 IE 不断向他们显示以前加载的数据（图表和 excel 文件）

如何防止这种情况发生？在客户端可以做什么？

我的网络应用程序是用 PHP 编写的。我应该使用什么方法来强制 IE 加载新文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-12T15:10:17.797

您可以使用的另一种方法是将唯一的查询字符串添加到您正在显示的图像中。在图像处理程序上，您可以忽略查询字符串中实际传递的数据，但 IE 会将具有不同查询字符串的 URL 视为唯一的，因此需要重新加载每个 URL，而不使用缓存版本。

例如，改变：

```
<img src="mychart.png> 
```

到：

```
<img src="mychart.png?timestamp=0512200911090000"> 
```

会让你避免 IE 缓存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T15:05:04.467

```
<HTML><HEAD>
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="Expires" CONTENT="-1">
</HEAD><BODY>
</BODY>
</HTML> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-12T15:10:37.533

HTML 元可以工作，但使用 PHP 标头更有效且更正确（[看这里](http://www.sitepoint.com/article/php-anthology-2-5-caching/)）。这篇文章也涵盖了缓存可下载/非 html 文件。

缓存可以在 PHP 中通过以下方式之一完成（在流式传输图像内容**之前**使用标头）：

```
<?php 
    header('Expires: Mon, 26 Jul 1997 05:00:00 GMT'); 
    header('Pragma: no-cache'); 
?> 
```

或者

```
 <?php 
     header('Expires: Mon, 26 Jul 1997 05:00:00 GMT'); 
     header('Cache-Control: no-store, no-cache, must-revalidate'); 
     header('Cache-Control: post-check=0, pre-check=0', FALSE); 
     header('Pragma: no-cache'); 
 ?> 
```

# java - 在 Java 中创建一个 Cabinet 文件

> ID：853244
> 
> 赞同：3
> 
> 时间：2009-05-12T15:03:47.327
> 
> 标签：java

有谁知道一个库可以用纯Java创建一个cabinet文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-07-20T23:29:56.810

我写了一个java应用程序来做到这一点（纯java实现）。它不支持压缩，所以它基本上只是将文件打包在一起并将柜头添加到系统中。做起来并不复杂，花了我大约一天的时间把它搞砸了。

不太确定实现压缩会有多复杂，但我认为这不会那么简单。网上有很多关于cabinet 文件格式结构的信息。

编辑：现在在 github 上可用：[https ://github.com/grahamrb/CabinetMaker](https://github.com/grahamrb/CabinetMaker)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T01:47:53.097

首先，您可以使用 Java 的 DeflaterOutputStream 进行 Deflate 压缩，这是受支持的 cab 压缩方案之一。

哦 whaddaya 知道...我找到了一个：[cablib](http://sourceforge.net/projects/cablib)（但它自 2006 年以来就没有开发）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T15:15:57.990

据我所知，您只能使用Microsoft的[CABAC 实用程序创建 .cab 文件。](http://support.microsoft.com/default.aspx/kb/310618)所以没有“纯java”实现。

你可以这样称呼：

```
CABARC n myArchive.cab *.* 
```

使用[Runtime.getRuntime().exec()](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Runtime.html#exec(java.lang.String))创建 myArchive.cab。

# python - 如何迁移类似于 Ruby on Rails 迁移的 Django 模型？

> ID：853248
> 
> 赞同：6
> 
> 时间：2009-05-12T15:04:24.097
> 
> 标签：python, django, migration

Django 有许多开源项目来解决框架最显着的[缺失特性](http://code.djangoproject.com/wiki/SchemaEvolution)之一：模型“进化”。[Ruby on Rails 对迁移](http://api.rubyonrails.org/classes/ActiveRecord/Migration.html)有本机支持，但我很好奇是否有人可以推荐以下 Django“进化”项目之一：

*   [南](http://south.aeracode.org/)
*   [django-进化](http://code.google.com/p/django-evolution/)
*   [移民](http://code.google.com/p/dmigrations/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-12T15:46:14.010

南方拥有最多的蒸汽。dmigrations 是太基本的国际海事组织。django-evolution 如果你碰过它外面的数据库，它就会尖叫。

到目前为止，南方是最有力的竞争者。随着模型冻结和自动迁移，它已经走了很长一段路。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-12T18:00:30.080

South 和 django-evolution 无疑是最好的选择。根据我的经验，South 的模型冻结和自动提示仍然非常脆弱（django-evolution 的提示在边缘情况下更加强大），但 django-evolution 的发展似乎自去年夏天以来大多停滞不前。如果我现在开始，我可能会选择南方，主要是因为这个原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-12-13T22:28:40.167

看完这篇，不到 1 小时，我就从“对数据模型演化一无所知”到“使用南方管理模型迁移”。South 的文档非常出色，让我在创纪录的时间内跟上了进度。没有看过提到的其他工具，我完全推荐它。

更新：自从大约一个月前发布这个答案以来，我经历了几次数据模型审查，从简单的字段重命名到用新表完全替换一些表。South 无法以完全自动化的方式完成所有操作（例如，重命名看起来像删除和添加），但文档会引导您顺利完成手动步骤。

我将把南方带入任何未来的项目。很棒的工具！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T18:08:12.843

我是开发 dmigrations 团队的一员 - 但我会全心全意地推荐 South。它更加成熟，正在积极开发中，并且具有一些杀手级功能，例如 ORM 冻结（如果您尝试在迁移中使用 ORM 代码，然后更改您的模型，那么您将陷入痛苦的世界）。

# iphone - 配置文件与应用程序标识符不匹配

> ID：853253
> 
> 赞同：14
> 
> 时间：2009-05-12T15:05:34.217
> 
> 标签：iphone, xcode, code-signing

我刚刚为应用程序 ID 49776ZQRBG.com.gfeed.ride 创建了一个 AdHoc 分发配置文件我在 info.plist 中设置了 Bundle ID，但是项目设置中的这个配置文件是灰色的并且状态

“配置文件与应用程序标识符‘49776ZQRBG.com.gfeed.ride’不匹配”

如果我在 XCode 中查看管理器中的配置文件，它会为我提供与我的 plist 中相同的 App Identifier。

还有什么我想念的吗？应用程序标识符与捆绑标识符不同吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-12T15:51:06.607

通常你会使用“com.gfeed.ride”作为你的标识符，XCode 会自动处理“49776ZQRBG”部分。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-12T15:41:14.767

当我得到这个错误时，这是​​我错过并纠正的。

1.  检查您是否创建并配置了 Entitlements.plist 文件。
2.  检查 info.plist 并确保您的应用程序名称正确。

最好只是通过苹果上的 iPhone 开发网站上的说明进行操作。您创建配置文件的同一位置。

编辑：在本网站的另一篇文章中遇到此问题。这是一个比我有时间输入的更完整说明的链接。

[http://furbo.org/2008/08/06/beta-testing-on-iphone-20/](http://furbo.org/2008/08/06/beta-testing-on-iphone-20/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-01-21T22:07:16.367

这是 Apple 的错误，当您通过管理器自动添加设备时会出现。解决方案：永远不要通过管理器添加设备。

# visual-studio - 如何在 VS2008/TFS 中关闭“静默”结帐

> ID：853257
> 
> 赞同：1
> 
> 时间：2009-05-12T15:05:56.277
> 
> 标签：visual-studio, tfs, visual-sourcesafe, vcs-checkout

我经常注意到我已签出文件以进行我不打算进行的编辑。这不可能是一件好事。我可以让它提示我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T15:11:56.890

你当然可以。

在 VS 2008 中，转到工具/选项以获取选项对话框。

在选项树中选择源代码控制/环境。

将签入项目设置从自动签出更改为“提示签出”。

# c# - 数据绑定到 WPF 中的文本框

> ID：853259
> 
> 赞同：2
> 
> 时间：2009-05-12T15:06:39.520
> 
> 标签：c#, wpf, data-binding, textbox

我对 WPF 中的数据绑定完全陌生，我正在尝试将对象属性绑定到文本框。我的对象是

```
public class TestObj
{
    private m_Limit;

    public string Limit
    {
       get 
        {
         return m_Limit;
        }
        set
        {
          m_Limit = value;
        }
    } 
```

我的 XAML 看起来像

```
<Window x:Class="NECSHarness2.UpdateJobParameters"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:tools="clr-namespace:ManagementObjects;assembly=Core"
DataContext="{Binding RelativeSource={RelativeSource Self}}"
Title="Update Job Parameters" Height="320" Width="460">
<Grid>
    <TextBox Text ="{Binding Path = Limit, Mode = TwoWay}" Height="20" HorizontalAlignment="Right" Margin="0,48,29,0" Name="textBox3" VerticalAlignment="Top" Width="161" />
   </Grid> 
```

现在，显然我没有在任何地方设置源，我很困惑。我让它与列表视图一起使用，但现在我很难过。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-12T15:11:55.313

您需要设置 DataContext。在后面的代码中：

```
textBox3.DataContext = instanceOfTestObj; 
```

或使用对象数据提供者

```
 <Window.Resources>
    <src:TestObj x:Key="theData" Limit="Wibble" />
  </Window.Resources>

  <TextBox Text="{Binding Source={StaticResource theData}..../> 
```

[这里](http://www.wrox.com/WileyCDA/Section/Windows-Presentation-Foundation-WPF-Data-Binding-with-C-2005.id-305562.html)有一个关于数据绑定的更深入的很好的介绍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T15:12:36.360

如果未指定绑定的 Source、RelativeSource 或 ElementName，则 Binding 使用控件的 DataContext。DataContext 通过可视树从上部元素（例如窗口）传递到下部元素（在您的情况下为 TextBox）。

因此 WPF 将在您的 Window 类中搜索 Limit 属性（因为您已将窗口的 DataContext 绑定到窗口本身）。

此外，您可能想阅读有关 WPF 中 DataBinding 的基础知识：http: [//msdn.microsoft.com/en-us/library/ms750612.aspx](http://msdn.microsoft.com/en-us/library/ms750612.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-12T15:14:40.583

为了让 TwoWay 绑定起作用，您的对象还必须实现 INotifyPropertyChanged

[http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T15:12:43.830

除非另有说明，否则绑定的源始终是控件的 DataContext。您必须将表单的 DataContext 设置为 TestObj 实例

# iphone - 将 plist utf-8 值读取为 utf-16

> ID：853262
> 
> 赞同：2
> 
> 时间：2009-05-12T15:07:22.810
> 
> 标签：iphone, objective-c, unicode, utf-8, utf-16

我正在开发一个需要显示上标和下标的 iphone 应用程序。我正在使用选择器从 plist 中读取数据，但 unicode 值没有在选择器视图中正确显示。无法识别下标和上标。我假设这是由于 plist 编码为 utf-8，所以问题是如何将 plist 字符串编码从 utf-8 转换为 utf-16 ？

稍微详细一点：

如果我这样做，它至少在文本字段中正确显示：

NSString *等式 = @"x\u00B2 + y\u00B2 = z\u00B2"

但是，如果我在 plist 中定义相同的字符串并尝试将其读入并将其分配给字符串并将其显示在pickerview 上，它只会显示编码而不是上标。

@Matt：感谢您的建议，Unicode 被转义为 \u00B2 => \u00B2。谷歌搜索“plists 中的转义值”没有返回有用的结果，而且我无法使用键盘 cmd-ctrl-shift-+ 工作。任何进一步的建议将不胜感激！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T00:02:55.190

\u 变体仅在呈现给 C 编译器时才有效。对于 UTF-8，如果您真的想键入字符代码而不是简单地键入它们（字符调色板的伴侣是键盘查看器，它会在您按下修饰键时更新，以便您可以通过这种方式搜索特定字符），然后您必须使用 XML 实体，即`&#x00B2;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T17:04:44.747

经过大约一天的试验后，我偶然使用了 OS X 字符调色板。这工作得很好，虽然有点乏味....我仍然想发现如何将代码作为文本嵌入到 plist 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-04-24T18:34:51.553

似乎不适用于更长的 unicode

> `&#x2233E;`

plist的标题：

```
<?xml version="1.0" encoding="UTF-8"?>
     2 <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
     3 <plist version="1.0"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-13T01:33:29.453

Plist 文件会自动嵌入自己的编码。IE：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

这意味着无论它们是 UTF-8、UTF-16 还是其他，它们都将被正确加载。

如果您在从 plist 加载时遇到问题，那一定是其他问题。尝试使用：

```
NSLog(@"%@", [[[NSDictionary alloc] initWithContentsOfFile:@"/path/to/plist"] autorelease]); 
```

输出整个 plist 作为查找问题的起点。

如果您对编码感到好奇，可以通过在 Xcode 中打开为文本文件来更改它们（在文件树中右键单击并选择打开为...），然后使用 View->Text->File Encoding 菜单进行更改文件编码（您需要修复 XML 编码以匹配）。

# sorting - MDX 查询中的排序和分页（MS 分析服务）

> ID：853263
> 
> 赞同：0
> 
> 时间：2009-05-12T15:07:39.207
> 
> 标签：sorting, paging, olap, mdx, cube

我构建了一个 MDX 查询，以从 OLAP Cube 中检索特定文章。基本上，它返回由特定制造商生产的特定文章类别节点下的文章：

```
SELECT NON EMPTY
(
    Hierarchize
    (
        {
            DrilldownLevel
            (
                {
                    [T DAT Article].[Ar ID].[All]
                }
            )
        }       
    ) 

)

DIMENSION PROPERTIES PARENT_UNIQUE_NAME,
[T DAT Article].[Ar ID].[Ar ID].[Ar Key],
[T DAT Article].[Ar ID].[Ar ID].[Ar LongName] 
ON COLUMNS 
FROM [Catalog_2009]

WHERE 
(
    [T DAT Structure].[St St ID FK].&[193066], -- specific article-category node
    [T DAT Firm].[Fi ID].&[86] -- specific manufacturer
) 

CELL PROPERTIES VALUE, FORMAT_STRING, LANGUAGE, BACK_COLOR, FORE_COLOR, FONT_FLAGS 
```

现在我想增强这个查询以支持分页和排序。意思是我可以提供：

*   页面索引（如 0）
*   页面大小（如 30）
*   排序列（如 Ar LongName）
*   排序方向（如升序）

我应该采取什么方法？我查看了[Subset](http://technet.microsoft.com/en-us/library/ms144767.aspx) and [order](http://msdn.microsoft.com/de-de/library/ms145587.aspx)子句。但是那些基本上限制了查询“层次化”部分的结果，这意味着它们切断了层次结构而不是最终结果。

谁能给我一个提示如何让分页和排序工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-19T11:23:12.990

在 MDX 中排序是一件很痛苦的事情，或者至少我一直是这么认为的。如果您的查询在行上只有一个维度，在列上只有一个维度，它将使生活变得更加简单。

ORDER 关键字可以应用于一个集合，您只需给它一个要排序的数字，并告诉它使用 ASC 或 DESC 的方式。

ASC 或 DESC 问题变得令人困惑，因为您也可以指定 BASC 或 BDESC。“B”表示“中断”，它表示您是否希望行（或列）在其层次结构组中进行排序，或者您是否希望在排序时完全打破层次结构，并对行进行完全重新排序。

这是一个简单的例子

```
ORDER({[Time].[Month].members}, [Measures].[Gross Sales], BASC) 
```

这意味着您要按总销售额值的升序列出所有月份。您正在打破层次结构，以便月份不会在其父年份中保持分组，并且可以通过排序操作完全混合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-06T18:58:47.937

看看下面的例子

我已按销售额降序列出产品

```
select 
{[Measures].[Internet Sales Amount]}on 0,
order ({[Product].[Product].[Product]},
[Measures].[Internet Sales Amount],desc
)on 1 
from 
[Adventure Works] 
```

结果

[![在此处输入图像描述](https://i.stack.imgur.com/mVVmt.png)](https://i.stack.imgur.com/mVVmt.png)

现在让我们分页。我正在创建一个 10 行页面，第 1 页是

```
select 
{[Measures].[Internet Sales Amount]}
on 0,
subset(
order 
(
{
[Product].[Product].[Product]
},[Measures].[Internet Sales Amount],desc
)
,0,10)
on 1 

from 
[Adventure Works] 
```

结果

[![在此处输入图像描述](https://i.stack.imgur.com/dhUqj.png)](https://i.stack.imgur.com/dhUqj.png)

现在第 2 页

```
select 
{[Measures].[Internet Sales Amount]}
on 0,
subset(
order 
(
{
[Product].[Product].[Product]
},[Measures].[Internet Sales Amount],desc
)
,10,10)
on 1 

from 
[Adventure Works] 
```

结果

[![在此处输入图像描述](https://i.stack.imgur.com/V8xRP.png)](https://i.stack.imgur.com/V8xRP.png)

# json - 使用 JSON 作为存储/传输格式的数据库

> ID：853265
> 
> 赞同：27
> 
> 时间：2009-05-12T15:07:55.023
> 
> 标签：json, mongodb, couchdb, dbslayer, database

有多少数据库系统使用 JSON 进行存储或传输？我知道：

*   [沙发数据库](http://couchdb.apache.org/)
*   [MongoDB](http://www.mongodb.org/display/DOCS/Home)
*   [DBSlayer](http://code.nytimes.com/projects/dbslayer)

我记得我在 SO 用户的个人资料中看到了另一个供应商。该系统使用他们所谓的二进制 JSON，但我不记得产品的名称。

最近，似乎越来越多的 DB 项目将 JSON 用于持久存储。其中一些甚至将 HTTP 作为传输层。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-13T18:00:59.757

Persevere 是另一个加载了 JSON 的数据库：

[http://www.persvr.org/](http://www.persvr.org/)

主要传输是 JSON HTTP/REST

数据存储为 JSON

它有一个本机 JS/JSON 客户端，可直接从浏览器运行。

如果你想要一个模式，那么它是使用 JSON 定义的

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-07-27T17:42:25.773

MongoDb 是使用二进制 JSON 存储格式的数据库。我不知道是否还有另一个面向文档的。其他大多数是键值存储，只能基于一个键检索对象。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-05T08:45:09.963

这是一个非权威列表。

*   [沙发数据库](http://couchdb.apache.org/)
*   [舰队数据库](http://fleetdb.org/)
*   [MongoDB](http://www.mongodb.org/)
*   [东方数据库](http://www.orientdb.org/)
*   [阿帕奇卡桑德拉](http://cassandra.apache.org/)
*   [雷迪斯](http://redis.io/)
*   [乌鸦数据库](http://ravendb.net/)

资料来源：[维基百科 - 面向文档的数据库](http://en.wikipedia.org/wiki/Document-oriented_database)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-23T03:55:48.610

postgresql 最近添加了一个 json 数据类型

[postgre json 数据类型](http://wiki.postgresql.org/wiki/What%27s_new_in_PostgreSQL_9.2#JSON_datatype)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-03T12:35:48.443

MongoDB 不使用 JSON，而是使用 BSON。

[RethinkDB](http://www.rethinkdb.com)是一个面向文档的数据库，具有 JSON 数据模型，支持分片和复制

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-07-19T18:07:01.213

看看芭蕉的Riak。它与 CouchDB 有许多共同点：基于 Erlang、Javascript MapReduce API、HTTP 传输、JSON 文档格式和多主机复制。它的目标并不像 CouchDB 那样简单（CouchDB 更“有主见”），但它们为您提供了很多选项来调整 CAP 参数以满足您的应用程序的需求，每次写入。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-03-08T01:30:08.827

如果您想将 JSON 文档存储在 AppEngine 的数据存储中，您可以查看 Ubud-db，[https:](https://bitbucket.org/f94os/ubud-db/wiki) //bitbucket.org/f94os/ubud-db/wiki Ubud-db 是 AppEngine 上的文档存储，带有 REST- JSON API。

# security - GlassFish 管理控制台（端口 4848）是否安全？

> ID：853266
> 
> 赞同：5
> 
> 时间：2009-05-12T15:08:04.493
> 
> 标签：security, console, glassfish, admin

了解仅限于 SSL 的安全 Internet 连接后，我对 GlassFish 管理控制台的安全性表示怀疑。正常的安全 HTTP 连接使用 http **s** ://domain/ URL，但在 GlassFish 中[http://domain:4848/](http://domain:4848/)用于登录管理控制台。使用该管理端口时，浏览器和服务器之间是否进行了某种加密，或者所有这些通信都是不安全的，对可能的黑客来说是赤裸裸的？

GlassFish 文档指导如何使用管理控制台，但我没有发现任何关于此安全问题的提及。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-12T19:28:01.060

可以在 Admin console -> Configurations -> HTTP Service -> HTTP Listeners -> admin-listener 中为 Admin console 启用 SSL（负责监听 4848 端口）

有一个默认未启用的安全复选框选项。启用后，管理控制台将强制使用 SSL。例如 http://domain:4848/ 重定向到[https://domain:4848/](https://domain:4848/)

..不完全确定是否只是检查管理员侦听器的安全选项是否成功，因为保存更改控制台冻结了。之后，我还在 GlassFish 的 config/asadminenv.conf 中更改了 AS_ADMIN_SECURE=true。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-03-08T09:57:54.923

我不知道这是否是 Glassfish v3.1 独有的功能，但您可以通过运行以下命令在控制台管理员上打开 SSL

```
asadmin enable-secure-admin 
```

正如这里所描述的那样[http://blogs.oracle.com/quinn/entry/securing_adminstration_in_glassfish_server1](http://blogs.oracle.com/quinn/entry/securing_adminstration_in_glassfish_server1)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-02T19:06:59.100

如果您有一个安装脚本以便能够一次又一次地可靠地安装您的开发/生产环境，您可能希望使用以下行在该脚本中设置相应的 glassfish 属性：

```
asadmin set --port 4848 --user admin --passwordfile password-file.txt server.http-service.http-listener.admin-listener.security-enabled=true 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-03-07T09:38:46.167

重新启动服务器后，“检查管理员侦听器的安全选项”正在工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T15:17:16.290

如果它使用 SSL，您将作为**https** ://domain:4848/访问它

您可以通过从浏览器的菜单中选择“页面信息”来查看更多信息。如果您通过`https`URL 访问该页面，您应该会在浏览器窗口的某处看到一个小锁图标，并且该图标应该是可点击的。

# asp.net - Css & Asp:按钮冲突

> ID：853268
> 
> 赞同：0
> 
> 时间：2009-05-12T15:08:33.480
> 
> 标签：asp.net, css, aspbutton

我正在处理网页，有时我需要禁用 asp:button。

此页面使用具有以下类的 css 文件：

```
.pagerLinkDisabled
{
    display: none;
} 
```

因此，每次我将按钮设置为禁用时，.net 都会使用它进行渲染，`class="pagerLinkDisabled"`并且不会显示该按钮...

在页面加载时，我尝试了这个：

```
myButton.Enabled=false;
myButton.Style.Add("display","static"); 
```

如何在不更改 css 文件的情况下解决此问题？

谢谢 ：）

**编辑**：

澄清：

*   该按钮正在呈现，但当启用设置为 false 时，框架会将 class="pagerLinkDisabled" 添加到输入标记。

*   此类是在我无法更改的 css 文件中定义的。

**编辑2：**

我的按钮定义如下：

```
<asp:Button runat="server" ID="myButton" Text="mytext" Enabled="false" /> 
```

正在呈现的 html 是：

```
<input type="submit" name="ctl00$ContentPlaceHolder$ctl00$myButton" value="mytext" id="ctl00_ContentPlaceHolder_ctl00_myButton" class="pagerLinkDisabled" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T15:11:52.147

我不确定，但在页面加载时尝试：

```
myButton.Visible = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T15:14:18.103

为什么不直接更改按钮上的类名？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T15:14:34.203

你有没有尝试过这样的事情：

```
myButton.Attributes.Add("Style","display:block !important"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T15:25:43.530

你不能只编辑**HTML 源代码**以使按钮不使用该类吗？

还是它在 HTML 中的更高级别定义？例如在 BODY 标签处。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-12T16:39:41.070

**编辑**这对我有用。

```
myButton.Style["display"] = "block !important";
myButton.Style["disabled"] = "disabled"; 
```

# excel - 使用 VBA 隐藏 Excel 工作表

> ID：853270
> 
> 赞同：35
> 
> 时间：2009-05-12T15:09:34.070
> 
> 标签：excel, vba, ms-office

我有一个包含三张纸的 Excel 电子表格。其中一张表包含其他一张表的公式。

是否有一种编程方式来隐藏包含这些公式的工作表？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2009-05-12T15:16:01.843

要从 UI 中隐藏，请使用“格式”>“工作表”>“隐藏”

要以编程方式隐藏，请使用对象的`Visible`属性`Worksheet`。如果您以编程方式执行此操作，您可以将工作表设置为“非常隐藏”，这意味着它不能通过 UI 取消隐藏。

```
ActiveWorkbook.Sheets("Name").Visible = xlSheetVeryHidden 
' or xlSheetHidden or xlSheetVisible 
```

您还可以通过 VBA IDE ( `ALT+F11`) 中工作表的属性窗格设置 Visible 属性。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-05-12T15:17:50.953

您可以使用 VBA 宏以编程方式执行此操作。您可以使工作表*隐藏*或*非常隐藏*：

```
Sub HideSheet()

    Dim sheet As Worksheet

    Set sheet = ActiveSheet

    ' this hides the sheet but users will be able 
    ' to unhide it using the Excel UI
    sheet.Visible = xlSheetHidden

    ' this hides the sheet so that it can only be made visible using VBA
    sheet.Visible = xlSheetVeryHidden

End Sub 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-04-23T18:52:51.743

只是想为给出的答案添加更多细节。你也可以使用

```
sheet.Visible = False 
```

隐藏和

```
sheet.Visible = True 
```

取消隐藏。

[资源](http://msdn.microsoft.com/en-us/library/office/ff197786.aspx)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-20T15:20:46.450

只要工作表处于活动状态，这可以在一行中完成：

```
ActiveSheet.Visible = xlSheetHidden 
```

但是，您可能不想这样做，特别是如果您使用任何“选择”操作或使用更多 ActiveSheet 操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-15T10:16:29.207

我想回答你的问题，因为有多种方法——这里我将讨论广泛使用的代码。

所以，为了隐藏工作表：

```
Sub try()
    Worksheets("Sheet1").Visible = xlSheetHidden
End Sub 
```

如果您想学习所有方法，还有其他方法[点击这里](http://excelvbaautomation.com/hide-unhide-worksheet/)

# asp.net - 调用 window.open 打开一个窗口，然后它突然被最小化

> ID：853272
> 
> 赞同：1
> 
> 时间：2009-05-12T15:10:27.953
> 
> 标签：asp.net, javascript, html, window

我打了一个电话`window.open`，打开了所需的 URL，但是没有我的交互，窗口突然被最小化了。

为什么是这样？

**更新：**在事件（asp.net） 上打开了窗口，`onclick`然后我注入了 HTML。使用了一个链接按钮控件，现在当我将它转换为一个时`asp:button`，它并没有最小化。你能解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T12:14:44.043

也许您可以尝试添加尺寸属性，示例[here](http://www.w3schools.com/HTMLDOM/met_win_open.asp)。

# fxcop - 阻止 FxCop 访问 GotDotNet

> ID：853275
> 
> 赞同：1
> 
> 时间：2009-05-12T15:11:13.427
> 
> 标签：fxcop

我正在运行 FxCop，但它在错误代码 16777217 上失败。[快速谷歌搜索](http://social.msdn.microsoft.com/Forums/en-US/vstscode/thread/ff0e0580-8c81-4557-983e-95ef9e30dbd7)显示这是因为 FxCop 试图访问 gotdotnet.com 上的网站。

我从命令行使用 FxCop（实际上包含在 MsBuild 社区任务中）。如何使其无法从命令行访问 gotdotnet 站点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T14:57:28.430

您正在运行哪个版本的 FxCop？当前版本（1.36）是在 gotdotnet 关闭后发布的，因此不应再引用该站点。您目前可以在[此处找到下载](http://www.microsoft.com/Downloads/details.aspx?familyid=9AEAA970-F281-4FB0-ABA1-D59D7ED09772&displaylang=en)

# visual-studio-2005 - Visual Studio，如何输出构建时间？

> ID：853277
> 
> 赞同：2
> 
> 时间：2009-05-12T15:11:38.107
> 
> 标签：visual-studio-2005, compiler-construction, time, build, switch-statement

我正在使用visual studio 2005。我记得在我的脑海中，有一种方法可以输出构建给定项目所花费的时间。

谁能记得那个开关是什么？

谢谢丰富

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-12T15:12:31.100

工具 -> 选项 -> 项目和解决方案 -> VC++ 项目设置 -> 构建时序

应该管用。

编辑：我的错，那就是 VS2008 :(

在 2005 年，您可以通过从工具 -> 选项 -> 项目和解决方案 -> 构建和运行将 MSBuild 输出详细程度更改为详细或诊断来获得构建时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-06-01T08:27:40.660

您可以使用 Visual Studio 宏来显示构建解决方案所需的确切时间。看看这个答案： [Awesome Visual Studio Macros](https://stackoverflow.com/questions/523220/awesome-visual-studio-macros/2112181#2112181)

# debugging - SQL Compact Edition 的奇怪异常

> ID：853285
> 
> 赞同：1
> 
> 时间：2009-05-12T15:12:34.113
> 
> 标签：debugging, exception, deployment, sql-server-ce

我已经在一台新机器上部署了我的应用程序，我已经安装了 Compact Edition Runtime，但遇到了一个奇怪的异常。我无法在网上找到任何关于此的信息，以及解决它的方法。

也许你遇到过？

这是一个例外：

> 类型：System.Data.SqlServerCe.SqlCeException，System.Data.SqlServerCe，版本=3.5.1.0，文化=中性，PublicKeyToken=89845dcd8080cc91
> 
> 消息：此机器上未安装指定的语言环境。确保安装适当的语言包。[LCID = 1037]
> 
> 来源：SQL Server Compact ADO.NET 数据提供程序错误：System.Data.SqlServerCe.SqlCeErrorCollection HResult：-2147467259 NativeError：25130 数据：System.Collections.ListDictionaryInternal

谢谢，爱丽儿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-12T15:16:10.270

它在抱怨语言环境。您个人资料中的网站表明您来自意大利。您是否可以在英文机器上安装意大利语版本，反之亦然？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T15:16:22.170

似乎与希伯来语本地化有关。LCID 1037 是希伯来语语言环境标识符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T15:35:28.817

好吧，解决它的是安装对从左到右语言的支持。但这仍然让我感到困惑，这是什么原因。我们在应用程序或数据库中都没有使用此类语言。我需要调查一下。

# c# - Crystal Reports 不显示任何数据

> ID：853292
> 
> 赞同：0
> 
> 时间：2009-05-12T15:13:29.913
> 
> 标签：c#, visual-studio-2008, .net-3.5, crystal-reports

所以我在我的应用程序中使用了这个 SQL Server，我决定向用户显示水晶报表。我对水晶报表一点经验都没有，但是这个项目给了我一个很好的学习机会。

现在，我的数据源已经设置好了，在过去的几个月里我一直在使用它们来完成这个项目。但是，当我使用 Crystal Report 的向导创建报表并包含数据时，我没有得到任何数据输出。我得到标签，但没有来自数据库的实际数据。当我转到报告的预览时，我看到了一个示例，它看起来正确，但是没有显示任何数据。

我也尝试创建一个图表，但它甚至没有出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T15:17:16.070

你在链接表吗？根据我的经验，99% 的情况下，当我使用 Crystal 没有得到任何数据时，都是因为一个时髦的链接。还要检查对象在报告的哪个部分（标题、详细信息等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T16:26:43.270

我有时会遇到麻烦，因为当默认为内连接时我需要左连接。

# windows - 通过网络控制 Windows 服务？

> ID：853293
> 
> 赞同：0
> 
> 时间：2009-05-12T15:13:53.080
> 
> 标签：windows, service, controls

我一直在考虑一个软件，并想知道它是否存在......在谷歌上的快速侦察表明它不存在。

这是我们的问题，我们有许多在不同国际地点运行的全球服务。我们需要全局控制这些服务，例如全局反弹（每个周末都会发生的事情）。这涉及远程登录每个框并重新启动，然后等待服务启动。它需要和年龄。

我认为必须存在一款软件，它允许您通过 Web 服务登录并通过一个网站从所有位置控制服务。更重要的是，您可以安排重新启动（因此无需用户干预）。

现在我可以写这个了....但是肯定有人已经写过了....或者它是某些 Windows 附加组件的一部分？

有任何想法吗？

干杯丰富

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-12T15:15:39.317

您可以使用 Powershell 脚本和 WMI 来启动/停止服务...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T15:29:49.670

你不能使用[**sc**](http://technet.microsoft.com/en-us/library/cc754599(WS.10).aspx)命令吗？它可以让您控制远程服务，并且已经内置在操作系统中，例如：

```
sc \\servername stop "servicename"
sc \\servername start "servicename" 
```

另一种选择是 Mark Russinovich 的[**PSService**工具](http://technet.microsoft.com/en-us/sysinternals/bb897542.aspx)。

# asp.net - 如何让我的 .ASHX 访问 ConfigurationManager.ConnectionStrings？

> ID：853294
> 
> 赞同：2
> 
> 时间：2009-05-12T15:14:00.180
> 
> 标签：asp.net, web-config, ashx, configurationmanager

我已经包含了其他页面使用它的相同文件，但由于某种原因它只是没有找到它。我如何包括对它的访问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-06-08T18:33:05.363

正如您在评论中所说，您需要确保具有处理程序的项目具有对程序`System.Configuration`集的引用。您还可以添加一个`using`指令以使命名空间更易于使用。

使用 using 指令 ​​( `using System.Configuration`)

```
ConfigurationManager.ConnectionStrings["Name"] 
```

# regex - 使用 Erlang 正则表达式删除空格

> ID：853296
> 
> 赞同：1
> 
> 时间：2009-05-12T15:14:13.110
> 
> 标签：regex, erlang

我想删除所有空格，即制表符/空格/换行符。

```
T = {xmlelement,"presence",
                                         [{"xml:lang","en"}],
                                         [{xmlcdata,<<"\n">>},
                                          {xmlelement,"priority",[],
                                              [{xmlcdata,<<"5">>}]},
                                          {xmlcdata,<<"\n">>},
                                          {xmlelement,"c",
                                              [{"xmlns",
                                                "http://jabber.org/protocol/caps"},
                                               {"node","http://psi-im.org/caps"},
                                               {"ver","0.12.1"},
                                               {"ext","cs ep-notify html"}],
                                              []},
                                          {xmlcdata,<<"\n">>}]}. 
```

我尝试了以下方法，但它不起作用：

```
trim_whitespace(Input) ->
re:replace(Input, "(\r\n)*", ""). 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T15:21:44.533

如果要删除字符串中的所有内容，则需要将全局选项传递给 re:replace()。您也只是使用该正则表达式替换换行符。调用应该如下所示：

```
trim_whitespace(Input) -> re:replace(Input, "\\s+", "", [global]). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T19:53:27.357

我遇到了同样的问题……来这里分享我更高效的工作：

```
trim(Subject) ->
  {match, [[Trimmed]|_]} = re:run(Subject, "^\\s*([^\\s]*(?:.*[^\\s]+)?)\\s*$", 
    [{capture, all_but_first, binary}, global, dollar_endonly, unicode, dotall]),
  Trimmed. 
```

这个想法非常相似。正则表达式更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T22:54:24.950

您问题中的所有空格都在 cdata 部分中-为什么不将它们从元组中过滤掉呢？

```
remove_cdata(List) when is_list(List) ->
    remove_list_cdata(List);
remove_cdata({xmlelement, Name, Attrs, Els}) ->
    {xmlelement, Name, remove_cdata(Attrs), remove_cdata(Els)}.

remove_list_cdata([]) ->
    [];
remove_list_cdata([{xmlcdata,_}|Rest]) ->
    remove_list_cdata(Rest);
remove_list_cdata([E = {xmlelement,_,_,_}|Rest]) ->
    [remove_cdata(E) | remove_list_cdata(Rest)];
remove_list_cdata([Item | Rest]) ->
    [Item | remove_list_cdata(Rest)].

remove_cdata(T) =:= 
    {xmlelement,"presence",
     [{"xml:lang","en"}],
     [{xmlelement,"priority",[],[]},
      {xmlelement,"c",
       [{"xmlns","http://jabber.org/protocol/caps"},
        {"node","http://psi-im.org/caps"},
        {"ver","0.12.1"},
        {"ext","cs ep-notify html"}],
       []}]} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-21T18:41:01.550

***re:replace***很棘手，请记住：

```
Eshell V5.9.3.1  (abort with ^G)
1> re:replace("0 1  2    3 4 5 6 7 8 9", " ", "", [global, {return, list}]).
"0123456789"
2> re:replace("0 1  2    3 4 5 6 7 8 9", " ", "", [{return, list}]).
"01  2    3 4 5 6 7 8 9"
3> re:replace("0 1  2    3 4 5 6 7 8 9", " ", "").
[<<"0">>,[]|<<"1  2    3 4 5 6 7 8 9">>] 
```

# asp.net - 需要 DataList 中的 Eval 帮助

> ID：853299
> 
> 赞同：2
> 
> 时间：2009-05-12T15:14:30.177
> 
> 标签：asp.net, data-binding

这应该很简单，我主要将其归咎于我没有使用 DataLists、Repeaters 等的经验。

我有一个 DataList 控件，用于显示购物车中的商品。我使用 Eval("ColumnName") 绑定不同的控件，一切都很好，直到我到达价格列。

我的目标是像这样渲染它：

> ## 项目总成本
> 
> 20.00 美元（每个 5.00 美元）

我正在尝试使用表格单元格内的两个 ASP 标签控件来完成此操作：

```
<asp:Label ID="lblTotalItemCost" runat="server" Text='<%# Eval("TotalItemCost") %>'>
</asp:Label>
<br />
<asp:Label ID="lblPrice" runat="server" Text='(<%# Eval("Price")%> each)' >
</asp:Label> 
```

不幸的是，它将列渲染为：

> ## 项目总成本
> 
> $20.00（<%# Eval("Price")%> 每个）

我尝试了其他几种方法，但它们最终给了我“服务器标签格式不正确”的错误。我很确定这应该很简单，但我现在很难过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T16:09:18.840

试试这个：

```
Text='<%#"(" + Eval("Price").ToString() + " each)"%>' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:47:47.730

您是否尝试过使用格式字符串？我知道这在 C# 中有效，尚未在 VB.NET 中测试过

```
<asp:Label ID="lblPrice" runat="server" Text='<%# Eval("Price", "({0} each)"%>' /> 
```

# iphone - 我需要通知协议吗？

> ID：853300
> 
> 赞同：0
> 
> 时间：2009-05-12T15:14:32.940
> 
> 标签：iphone, protocols, nsurlconnection, nsnotifications

我有使用 NSURLConnection 的 classDownload。我想将所有 NSURLConnection 事件保留在 classDownload 中。ClassA 想使用classDownload 的同时也接收connectionDidFinishLoading 等通知，在classDownload 中称为Finish。如何从 classDownload 获取通知到 ClassA？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T15:26:56.100

假设`classDownload`是 的委托`NSURLConnection`，您可以在`NSNotificationCenter`调用委托方法时用于广播事件。然后，在 中`classA`，订阅`classDownload`使用中的事件`addObserver:`。如果您需要任何说明或代码片段，请告诉我。

**编辑**

要直接回答标题中的问题，不，您不需要协议来订阅使用`NSNotificationCenter`.

# asp.net - IIS 在我的 ASP.NET MVC 应用程序之外抛出 404 错误

> ID：853302
> 
> 赞同：1
> 
> 时间：2009-05-12T15:14:38.757
> 
> 标签：asp.net, asp.net-mvc, iis, iis-7, error-handling

我已经用新的 ASP.NET MVC 网站替换了旧的 PHP 网站。旧的页面地址不再起作用。我希望每个 301（永久移动）重定向到特定的新地址。

但是，IIS 7 似乎在它们到达我的应用程序之前拦截了许多此类请求。我想在我的 Global.asax 文件的 Application_Error() 方法中处理错误日志记录和重定向，而不是让 IIS 提供通用错误页面。

我必须如何修改 IIS 才能允许这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T15:21:46.000

我认为 MVC 不会将此视为错误（即不会引发异常），而是它根本不匹配任何路由，因此让 IIS 像往常一样处理 404。为了在代码中处理这个问题，我会在路由列表的末尾添加一个通配符路由。

全球.asax.vb…

```
routes.MapRoute( _
    "FileNotFound", _
    "{*key}", _
    New With {.controller = "FileNotFound", _
              .action = "Http404"} _
) 
```

FileNotFoundController.vb…

```
Function Http404(ByVal key As String) As ActionResult
    Dim RedirectId As Guid
    Select Case key
        Case "someold/path/andfile.php"
            RedirectId = New Guid("68215c26-0abe-4789-968e-0187683409b6")
        Case Else
            RedirectId = Guid.Empty
    End Select
    If Not RedirectId = Guid.Empty Then
        Response.StatusCode = Net.HttpStatusCode.MovedPermanently
        Response.RedirectLocation = Url.RouteUrl("SomeOtherRoute", New With {.id = RedirectId})
    Else
        Throw New Exception("Unable to resolve route.")
    End If
    Return Nothing
End Function 
```

这将让您查看预期的 URL 并决定将其重定向到哪个目标 URL。

或者，您可以实现自定义 404 处理程序页面并直接在 IIS 中进行设置。在该页面/控制器的代码中，您可以查看预期的 URL 并根据需要进行重定向。

# c++ - Windows 卷设备检测失败，直到重新启动。从未失败过

> ID：853304
> 
> 赞同：0
> 
> 时间：2009-05-12T15:14:55.060
> 
> 标签：c++, winapi, usb, device, detect

我有代码可以将 USB 闪存驱动器的连接检测为卷。这段代码一直运行良好，但最近一位工程师的机器开始出现故障，直到重新启动后才再次正常运行。

该项目使用 Qt 4.5.0，但这应该与这个问题不太相关。

我注册通知如下

```
// Register for device connect notification
DEV_BROADCAST_DEVICEINTERFACE devInt;
ZeroMemory( &devInt, sizeof(devInt) );
devInt.dbcc_size = sizeof(DEV_BROADCAST_DEVICEINTERFACE);
devInt.dbcc_devicetype = DBT_DEVTYP_DEVICEINTERFACE;
devInt.dbcc_classguid = GUID_DEVINTERFACE_VOLUME;

m_hDeviceNotify =
    RegisterDeviceNotification( winId(), &devInt, DEVICE_NOTIFY_WINDOW_HANDLE ); 
```

然后处理程序过滤 WM_DEVICECHANGE 消息。

```
if (message->message == WM_DEVICECHANGE)
{
    switch (message->wParam)
    {
    case DBT_DEVICEARRIVAL:
        HandleVolumeArrival( message );
        break;

    case DBT_DEVICEREMOVECOMPLETE:
        HandleVolumeRemoval( message );
        break;

    default:
        break;
    }

    *result = TRUE;
} // end if 
```

到达消息处理程序然后按如下方式处理消息：

void HandleVolumeArrival( MSG *message ) { if(message->lParam == 0) { qDebug() << "lParam 在设备到达时为 0"; 返回; } // 万一

```
PDEV_BROADCAST_HDR pHdr = (PDEV_BROADCAST_HDR) message->lParam;
if(pHdr->dbch_devicetype == DBT_DEVTYP_VOLUME)
{
    PDEV_BROADCAST_VOLUME pVol = (PDEV_BROADCAST_VOLUME) pHdr;

    // Handling of the volume is performed here
} // end if 
```

} // 结束 HandleVolumeArrival

检查卷类型的设备类型时出现问题：

```
pHdr->dbch_devicetype == DBT_DEVTYP_VOLUME 
```

当它失败时，设备类型被报告为`DBT_DEVTYP_DEVICEINTERFACE`.

尝试了多个 USB 驱动器，但都遇到了同样的问题。

有没有人见过这样的事情？你知道什么可能导致它或为什么问题会在系统重新启动时消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T19:15:53.287

我的猜测是无论如何你都会看到`DBT_DEVTYP_DEVICEINTERFACE`正常情况。USB 设备是自描述的。USB 设备可以有任何“接口”，其中每个接口都是设备的一个特性。我的猜测是，当连接 USB 时，`DBT_DEVTYP_DEVICEINTERFAC`每个 USB 设备接口都会得到一个“E”，以便 USB 设备驱动程序可以说他们可以处理该 USB 接口。我假设 USB 大容量存储驱动程序的 USB 设备驱动程序将通过安装卷来处理此消息，然后您会收到`DBT_DEVTYP_VOLUME`消息。

我猜大容量存储接口驱动程序无法正常工作（或已崩溃）并且没有处理`DBT_DEVTYP_DEVICEINTERFACE`. 除非您开始经常看到它，否则我认为您不应该费心处理这种情况。

# c# - ASP .NET 环境中的依赖注入和物理路径 - 如何？

> ID：853306
> 
> 赞同：2
> 
> 时间：2009-05-12T15:14:55.810
> 
> 标签：c#, asp.net, dependency-injection, castle-windsor

我有一个使用 Castle Windsor 依赖注入的网站。

我需要使用需要知道文件路径的组件。我想将配置文件中的路径指定为相对于网站根目录的虚拟路径，所以我会这样做：

```
<component id="configuration.documentLoader"  type="SomeModule.XmlDocumentLoader, SomeModile">
    <parameters>
        <FileName>/documents/file.dat</FileName>
    </parameters>
</component> 
```

但是，我使用的组件期望路径是完整的物理路径，所以上面的例子会失败。在配置文件中写入完整路径不是一种选择。

你会如何解决这个问题？

我正在考虑添加另一个可以进行翻译的组件，并让我当前的组件依赖于该组件。这是矫枉过正吗？有没有更优雅的方法来解决这个问题而不改变已经存在的组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T20:09:22.007

```
IContributeComponentModelConstruction 
```

您可以使用它将相对路径切换为绝对路径。

# eclipse - 如何让 Eclipse 在非标准位置查找和使用基于 gcc 的工具链

> ID：853307
> 
> 赞同：5
> 
> 时间：2009-05-12T15:14:56.213
> 
> 标签：eclipse, gcc, embedded, cross-compiling, toolchain

我试图让 Eclipse 与基于 GCC 的 ARM 交叉编译器一起工作。

如何配置 eclipse 以将新工具链添加到其工具链列表中？

工具链为Raisonance分布式GCC工具链：C:\Program Files\Raisonance\Ride\arm-gcc\bin\arm-none-eabi-gcc.exe

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T20:07:32.803

这是一个 pdf 的链接，描述了如何为 ARM 和 eclipse 设置交叉编译器工具链。

[http://www.sparkfun.com/tutorial/ARM/ARM_Cross_Development_with_Eclipse.pdf](http://www.sparkfun.com/tutorial/ARM/ARM_Cross_Development_with_Eclipse.pdf)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T04:25:51.880

确保命令是您的 PATH。安装[GNU ARM Eclipse Plug-in](http://sourceforge.net/apps/mediawiki/gnuarmeclipse/index.php?title=Main_Page)，然后您可以从列表中选择工具链。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-07-19T11:45:27.107

需要明确的是，Raisonance 的 Ride 使用 CodeSourcery 工具链。有很多关于如何在 Eclipse 中使用它的教程（至少对于 Helios）。上次我检查时（去年），我的 Ride7 使用了 2008 CodeSourcery 编译器，尽管现在最新版本是 2011.03。

# .net - 我可以使用哪些事件来通知控件它的一部分已离开屏幕的可视区域？

> ID：853308
> 
> 赞同：0
> 
> 时间：2009-05-12T15:15:00.567
> 
> 标签：.net, graphics, gdi+

我有一个 userControl 我正在做一些绘画，当控件移动到屏幕边缘，或者移动到 Vista 任务栏与其重叠时，屏幕边缘/任务栏边缘被绘制到控件，留下丑陋控件的可绘制区域上的线条。

检测这一点并在控件上调用 Invalidate 的最佳方法是什么？“Moved”和“LocationChanged”事件显然是处理控件在其父容器内的移动，而不是屏幕位置的变化。我相信当控件被 Windows XP 中的另一个窗口重叠时也会发生同样的事情，但我还没有测试过。在这种情况下，同样的问题也适用。

我目前正在直接绘制控件的 Graphics 对象，我认为这是问题的根源。作为回避这个问题的尝试，绘制到控件的 BackGroundImage 会更好吗？

注意：这是对先前措辞非常糟糕的问题的重大改写。我觉得开始一个新问题是应该做的事情，而不是试图修复我写的废话。

编辑：事实证明，任务栏没有引起问题，只是屏幕底部边缘。我曾以为任务栏也引起了问题，但看起来我错了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T16:00:14.050

是的，您可以绘制控件的背景以提供无错觉问题的绘图。

您是要在图形对象的**剪切区域**（*Clip Rectangle*）上绘制还是使用它的整个表面？我认为每当另一个窗口或对象隐藏另一个对象时，窗口都会向它发送重绘消息，并通过它传递需要重绘的区域（剪辑矩形）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T08:10:28.723

在对发生的错误进行屏幕截图时，很明显问题在于我正在绘制由 Paint 事件的 ClipRectangle 描述的区域，而不是由控件本身的 ClipRectangle 描述的区域。

Paint 事件的 ClipRectangle 描述了由单个 Movement 事件显示的区域，它不描述 Control 边界的区域。我只是碰巧将控件移动得足够快，以至于很明显整个控件都被拉入了显示的空间。我更改了代码以绘制到与控件大小相对应的区域，并且一切正常。

另一个PEBKAC问题。哦，好吧，至少找到了错误。

# java - 哪个开源 Python 或 Java 库提供了一种在 ESRI Shapefile 上绘制圆圈的简单方法？

> ID：853311
> 
> 赞同：2
> 
> 时间：2009-05-12T15:15:35.527
> 
> 标签：java, python, arcgis, shapefile, esri

我需要编写一个软件来创建一个带有各种圆圈或圆周的 shapefile。创建的 shapefile 应该可以被 ESRI ArcMap 读取。

我需要一个库，可以让我在其中添加圆或圆弧。

该库可以用于 Python 或 Java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T15:31:04.877

如果您查看[OpenMap](http://openmap.bbn.com/)，则可以使用 Java 中的那组库编写一些代码来完成您的要求。

我不知道它是否可以通过一次调用来实现，但 OpenMap 中肯定有代码可以[生成圆和弧](http://openmap.bbn.com/doc/api/com/bbn/openmap/geo/package-summary.html)，并且它也有可以读取 shapefile 的代码。[导出形状文件](http://openmap.bbn.com/doc/api/com/bbn/openmap/dataAccess/shape/output/package-summary.html)的跳转不应该太大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-07-29T20:58:36.533

Matt Perry 在 Tissot Indicatrix 中的 shapefile 中创建了一个简短而有趣的示例[- 检查地图投影的失真](http://www.perrygeo.net/wordpress/?p=4)。帖子中未列出如何安装先决条件 gdal/ogr；为此，请参阅Windows 上的[OSGeo4W](http://trac.osgeo.org/osgeo4w/wiki)或`apt-get install gdal python-gdal`ubuntu linux 上的简单程序。

# vb.net - 合并单元格的内容在分页符之外被截断

> ID：853313
> 
> 赞同：0
> 
> 时间：2009-05-12T15:15:42.140
> 
> 标签：vb.net, excel, merge, printing, vba

我有一个 vb .net 程序，它使用命名范围将信息导出到 Excel 工作簿的某些字段。其中一个命名范围是注释部分，如果它超出分页符，则会被截断（不可见也不打印）。我正在寻找一种动态创建新命名范围以适应***所有***笔记文本的方法。

其他一些信息：

*   命名范围是 A2:L36 中的合并单元格，启用了文本换行

*   A 列宽 31 个单位

*   B 到 L 列的宽度为 8.38 个单位

*   所有行的高度均为 15.75 个单位

*   我不想打印空白页、调整字体大小、禁用文本换行、让最终用户进行任何重新格式化，也不想更改单元格的大小，因为我尝试了这些方法但没有成功。

*   使用 Excel 2007

请帮忙！

提前谢谢！~8th

* * *

*原谅我的无知，我还是个n00b*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T16:05:05.980

再次感谢 Lunatik 的回复。在看到您最近的帖子之前，我能够想出一个可以接受的解决方法。这不是最优雅的解决方案，但它最适合我想要完成的事情。我希望这对将来的其他人有用。

```
Dim sNotes As String = g_strProgram.sNotes
Dim iStartIndex, iEndIndex As Integer
Dim iRow As Integer = 0

If (sNotes.Length > 0) Then
   g_frmMain.ucAdditionalInfo.txtNotes.Text = sNotes
   Do
      iRow += 1
      oWorkSheet.Range("A" & iRow + 1 & ":L" & iRow + 1).Merge()
      iStartIndex = IIf(iRow = 1, 0, iEndIndex + 1)

      If (g_frmMain.ucAdditionalInfo.txtNotes.GetFirstCharIndexFromLine(iRow) >= 0) Then
         iEndIndex = g_frmMain.ucAdditionalInfo.txtNotes.GetFirstCharIndexFromLine(iRow) - 1
      Else
         iEndIndex = g_strProgram.sNotes.Length - 1
      End If

      oWorkSheet.Range("ProgramNote").Offset(iRow, 0).Value = g_strProgram.sNotes.Substring(iStartIndex, iEndIndex - iStartIndex).TrimEnd(vbCrLf)
   Loop While (iEndIndex < g_strProgram.sNotes.Length - 1)
Else
       oWorkSheet.Visible = Excel.XlSheetVisibility.xlSheetHidden
End If 
```

如果有人在阅读本文时需要对上述任何内容进行澄清，请不要犹豫，在这里发布问题！~8th

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T15:19:53.577

啊！合并单元格是撒旦的工作，应该不惜一切代价避免。即使他们的存在被认为是良性的，他们也可以用微妙而狡猾的方式破坏原本健全的工作表。

您没有提到文本是垂直还是水平切断？

您可能应该将该[`AutoFit`方法](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.autofit(office.11).aspx)视为一种强制文本保留在打印区域内的方法。这将调整单元格的大小，使文本适合您选择的字体大小，并且由于打印区域由单元格边框定义，这应确保所有文本在打印后仍然可见。

如果这不起作用，那么在不删除合并的单元格的情况下可能很难确定。它们是绝对必要的吗？

我现在正在开发与您类似的工作表模板，并且单元格可以调整自身大小以适应最多 911 个字符的各种字符串，仅使用正常的自动调整。

# c++ - 关键部分总是更快吗？

> ID：853316
> 
> 赞同：23
> 
> 时间：2009-05-12T15:16:04.560
> 
> 标签：c++, winapi, synchronization, critical-section

我正在调试一个多线程应用程序，发现`CRITICAL_SECTION`. 我发现`LockSemaphore`CRITICAL_SECTION 的数据成员很有趣。

它看起来像是`LockSemaphore`一个自动重置事件（不是顾名思义的信号量），操作系统在第一次等待`Critcal Section`被其他线程锁定的线程时静默创建此事件。

现在，我想知道关键部分总是更快吗？事件是一个内核对象，每个关键部分对象都与事件对象相关联，那么`Critical Section`与其他内核对象（如 Mutex）相比，如何更快？此外，内部事件对象实际上如何影响关键部分的性能？

这是 的结构`CRITICAL_SECTION`：

```
struct RTL_CRITICAL_SECTION
{
    PRTL_CRITICAL_SECTION_DEBUG DebugInfo;
    LONG LockCount;
    LONG RecursionCount;
    HANDLE OwningThread;
    HANDLE LockSemaphore;
    ULONG_PTR SpinCount;
}; 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-05-12T16:12:04.983

当他们说一个临界区“快”时，他们的意思是“当它还没有被另一个线程锁定时，获得一个很便宜”。

[请注意，如果它*已经*被另一个线程锁定，那么它有多快并不重要。]

它快速的原因是，在进入内核之前，它`InterlockedIncrement`在其中一个`LONG`字段（可能在`LockCount`字段上）上使用等效项，如果它成功，那么它认为在没有进入内核的情况下获得了锁。

我认为该`InterlockedIncrement`API 在用户模式下作为“LOCK INC”操作码实现......换句话说，您可以获得一个无争议的关键部分，而无需对内核进行任何环转换。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2009-05-12T15:53:37.947

在性能工作中，很少有东西属于“总是”类别:) 如果您自己使用其他原语实现类似于 OS 关键部分的东西，那么在大多数情况下可能会更慢。

回答您的问题的最佳方法是使用性能测量。操作系统对象的执行方式*很大程度上*取决于场景。例如，如果争用率低，关键部分通常被认为是“快速”的。如果锁定时间小于自旋计数时间，它们也被认为是快速的。

要确定的最重要的事情是关键部分的争用是否是应用程序中的第一级限制因素。如果没有，那么只需正常使用关键部分并处理应用程序的主要瓶颈（或瓶颈）。

如果临界区性能很关键，那么您可以考虑以下事项。

1.  仔细设置“热”关键部分的自旋锁计数。如果性能是最重要的，那么这里的工作是值得的。请记住，虽然自旋锁确实避免了用户模式到内核的转换，但它以惊人的速度消耗 CPU 时间——在自旋时，没有其他任何东西可以使用该 CPU 时间。如果一个锁被持有足够长的时间，那么旋转线程将实际阻塞，释放那个 CPU 来做其他工作。
2.  如果您有读/写模式，请考虑使用[Slim Reader/Writer (SRW) 锁](http://msdn.microsoft.com/en-us/library/aa904937(VS.85).aspx)。这里的缺点是它们仅适用于 Vista 和 Windows Server 2008 及更高版本的产品。
3.  您可以在临界区中使用[条件变量](http://msdn.microsoft.com/en-us/library/ms682052(VS.85).aspx)来最小化轮询和争用，仅在需要时唤醒线程。同样，这些在 Vista 和 Windows Server 2008 及更高版本的产品上受支持。
4.  考虑使用[互锁单链表](http://msdn.microsoft.com/en-us/library/ms684121(VS.85).aspx)(SLIST) - 这些是高效且“无锁”的。更好的是，它们在 XP 和 Windows Server 2003 及更高版本的产品上得到支持。
5.  检查您的代码 - 您可以通过重构一些代码并使用互锁操作或 SLIST 进行同步和通信来打破“热”锁。

总而言之 - 具有锁争用的调优方案可能具有挑战性（但很有趣！）工作。专注于测量您的应用程序性能并了解您的热门路径在哪里。[Windows 性能工具包](http://msdn.microsoft.com/en-us/library/cc305187.aspx)中的 xperf 工具是您的朋友 :) 我们刚刚发布了适用于 Windows 7 和 .NET Framework 3.5 SP1 的 Microsoft Windows SDK 4.5 版（[此处为 ISO，此处](http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=6db1f17f-5f1e-4e54-a331-c32285cdde0c)为[Web 安装程序](http://www.microsoft.com/downloads/details.aspx?familyid=F75F2CA8-C1E4-4801-9281-2F5F28F12DBD&displaylang=en)）。[您可以在此处](http://social.msdn.microsoft.com/Forums/en-US/wptk_v4/threads)找到 xperf 工具的论坛。V4.5 完全支持 Win7、Vista、Windows Server 2008 - 所有版本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-12T16:38:56.967

CriticalSections 更快，但[InterlockedIncrement](http://msdn.microsoft.com/en-us/library/ms683614(VS.85).aspx) / [InterlockedDecrement](http://msdn.microsoft.com/en-us/library/ms683580(VS.85).aspx)更多。请参阅此实现使用示例[LightweightLock 完整副本](https://stackoverflow.com/a/4205717/47733)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-12T15:28:52.493

CriticalSections 将旋转一会儿（几毫秒）并继续检查锁是否空闲。在自旋计数“超时”后，它将回退到内核事件。因此，在锁的持有者迅速离开的情况下，您永远不必进行昂贵的内核代码转换。

编辑：在我的代码中发现了一些注释：显然 MS 堆管理器使用 4000 的自旋计数（整数增量，而不是 ms）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-13T22:18:33.877

这是一种看待它的方法：

如果没有争用，那么与进入互斥锁的内核模式相比，自旋锁真的很快。

当存在争用时，CriticalSection 比直接使用 Mutex 稍微贵一些（因为检测自旋锁状态需要额外的工作）。

所以它归结为一个加权平均值，其中权重取决于你的调用模式的细节。话虽如此，如果您几乎没有争论，那么关键部分就是大胜利。另一方面，如果您一直有很多争用，那么您将比直接使用 Mutex 付出很小的代价。但在这种情况下，通过切换到互斥锁获得的收益很小，因此最好尝试减少争用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-06T09:20:48.630

临界区比互斥锁快，因为临界区不是内核对象。这是当前进程的全局内存的一部分。互斥锁实际上驻留在内核中，互斥对象的创建需要内核切换，但在临界区的情况下不需要。即使临界区很快，当线程进入等待状态时，在使用临界区时也会有内核切换。这是因为线程调度发生在内核端。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-23T10:17:20.753

根据我的经验和实验，与实施`CRITICAL_SECTION`相比，速度非常慢`pthreads`。

在将相同代码与 pthread 实现进行比较时，当锁定/解锁的数量很大时，极端意味着切换线程的**速度要慢 10 倍左右。**

因此，我再也不会使用临界区；pthreads 也可以在 MS Windows 上使用，性能噩梦终于结束了。

# java - GWT：明白了

> ID：853321
> 
> 赞同：9
> 
> 时间：2009-05-12T15:16:58.503
> 
> 标签：java, swing, gwt

我的团队正在着手其第一个 GWT 项目。我们在 Swing 应用程序方面相当强大，我们几乎所有的工作都涉及重要的 Swing GUI。

然而，这是我们第一次离开桌面和网络，项目要求我们使用 GWT。该项目本身非常简单，我们唯一不知道的是将 Swing UI 替换为 GWT UI。

我们应该注意哪些陷阱？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-12T15:30:04.083

我能想到几个：

*   一切都是异步的。好吧，无论如何，任何面向服务的东西。虽然 Swing 有时通过 SwingWorkers 之类的类似行为，但 Swing 通过 EDT（事件调度线程）从根本上是同步的。可能需要一点时间来适应；
*   你正处于一个被称为 CSS 和跨浏览器兼容性的伤害世界。虽然 GWT 确实掩盖了浏览器之间的许多差异，但它肯定不会掩盖所有这些差异，您可以像在普通网站中一样花费数小时在 GWT 中寻找一行像素的来源；
*   Swing 的资源比 GWT 少得多；
*   您只能在客户端使用某些类。曾经总是给我带来问题的一个是 BigDecimal；
*   您对小部件的选择要有限得多。无论您做什么，都要避免像瘟疫一样的 ExtGWT。Daryls 就像泛型领域的 Jeffrey Dahmer；
*   确保使用 GWT 1.6；
*   GWT 的编译时间简直太可怕了。
*   如果您只是进行客户端更改（即您没有更改任何服务接口），则无需重新构建即可看到这些更改。只需在托管浏览器中刷新；
*   对于不更改接口的服务器端代码更改，请确保您有一个 Ant 或 Maven 任务来重建和重新部署您的类，而无需进行 GWT 重建；
*   您可以将托管浏览器指向托管服务器以外的其他东西并使用它进行调试；和
*   确保您的机器有大量 RAM。如果分配给我的某些应用程序的 IDE 内存不足，并且这些应用程序不是很大的应用程序，那么它会出现内存不足的错误。我真的会推荐 2gigs 系统 RAM 绝对最小值，最好是 3 或更多。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-12T15:19:59.623

**不使用[GIN](http://code.google.com/p/google-gin/)和[Guice](http://code.google.com/p/google-guice/)。**依赖注入非常非常有用。GIN（GWT 的 Guice）的文档记录不是很好，但值得花时间投资让它工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-12T15:52:33.423

为了扩展 Cletus 所说的“某些类”，您在 GWT 客户端上没有完整的 JRE。（请记住，GWT Java 客户端代码被转换为 JavaScript。）这意味着第三方 Java API 通常无法在客户端工作。它们需要为 GWT 移植。一次编写，到处运行。有关此限制的更多信息，请参见[此处](http://code.google.com/webtoolkit/doc/1.6/RefJreEmulation.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-12T15:28:26.537

不同的浏览器具有完全不同的性能特征，因此您必须针对不同的浏览器进行测试，即使 GWT 针对浏览器差异生成 Javascript 变通方法。

在某些浏览器中创建 DOM 元素可能非常慢。如果您有经常更改的大型表（数十行），如果您只是删除所有行并重新创建它们，浏览器可能会变得无响应。当从服务器获取新内容时，我们必须编写一个差异算法来有效地更新表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-13T00:33:19.283

其中大部分仍然与您想要做的事情 100% 相关：

[最大的 GWT 陷阱？](https://stackoverflow.com/questions/99866/biggest-gwt-pitfalls/99977)

为了专门解决 Swing -> GWT 转换，有一个简单的规则：

*   GWT 不是 Swing，并且要构建一个好的应用程序，您总是必须在某种程度上知道您正在创建的小部件将产生什么样的 HTML，并且您将不得不时不时地陷入困境并修改一些行为甚至用 javascript 或 HTML 编写一些自定义部分。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-13T00:35:43.533

要记住的一个主要问题是测试。使用 junit 测试 Swing 应用程序主要是直截了当的，但为了在 gwt 应用程序上获得这种覆盖率，您需要扩大您的武器库。

1.  Straight junit - 这适用于不引用任何 gwt 运行时的模型类/实用程序。只需像普通的 junit 一样编写和运行测试，只需确保 gwt 不会尝试将测试代码编译到模块中。你不能总是考虑你的课程来获得这种覆盖率，但是当你可以的时候，它会很棒而且很快。
2.  GWTTestCase / junit - 这是一个特殊的 TestCase 子类（junit3 风格），它将为测试运行引导一些 gwt 运行时。以我的经验，获得良好的覆盖率太难了，而且速度太慢而无法使用。阅读[此](http://groups.google.com/group/Google-Web-Toolkit/browse_thread/thread/3363ce593af91ff8/5a5505086e38cf50?lnk=gst&q=gwttestcase#5a5505086e38cf50)内容以了解有关该主题的更多信息。
3.  Selenium - 这将使您在浏览器中获得覆盖（并且是我个人最喜欢的方法）。如果您使用 java selenium-rc 并将其与 jetty 结合起来为您的被测应用程序提供服务，您甚至可以模拟 rpc 调用来全面测试您的 ui。您还可以在所有主要浏览器中运行测试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-08-05T13:32:05.347

即使有 4 gigs 的 RAM，您在编译应用程序时也会遇到问题（在 GWT 1.6 和更早版本上）。我无法在工作中使用 Maven/whatever 编译我们的（相当大的）应用程序。托管模式工作正常，但似乎没有设置（将 vm 内存限制提高到 2 gigs 等）可以解决这个问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-12T15:43:10.100

我遇到了一个问题，试图通过嵌套集合填充表不起作用，大概是因为编译器不理解它（问题[@GWT list](http://code.google.com/p/google-web-toolkit/issues/detail?id=2267&can=4)）。请注意，这是大约一年前的事情，因此可能不再如此。

第二个问题（同样是一年前，所以可能不再是这种情况了）是不支持在具有 64 位 JVM 的 64 位机器上编译，所以我最终需要一个单独的 32 位 jvm 并包装一个为 GWT 编译设置专门引用的 ant 任务。

# svn - 如何确定谁使用 SVN 锁定了文件？

> ID：853328
> 
> 赞同：18
> 
> 时间：2009-05-12T15:18:01.997
> 
> 标签：svn, tortoisesvn

我们使用的是 SVN 服务器 1.4（我认为），客户端是命令行客户端或 TortoiseSVN。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-05-12T15:31:41.553

用于`svn status --show-updates`发现文件上的锁定。在以下示例中，Sally 发现 raisin.jpg 上有一个锁。

```
$ whoami
sally

$ svn status --show-updates
M              23   bar.c
M    O         32   raisin.jpg
       *       72   foo.h
Status against revision:     105 
```

一旦你知道了锁，你就可以用它`svn -info`来发现是谁设置了锁。请注意下面的“锁定所有者”：

```
$ svn info http://svn.example.com/repos/project/raisin.jpg
Path: raisin.jpg
Name: raisin.jpg
URL: http://svn.example.com/repos/project/raisin.jpg
Repository UUID: edb2f264-5ef2-0310-a47a-87b0ce17a8ec
Revision: 105
Node Kind: file
Last Changed Author: sally
Last Changed Rev: 32
Last Changed Date: 2005-01-25 12:43:04 -0600 (Tue, 25 Jan 2005)
Lock Token: opaquelocktoken:fc2b4dee-98f9-0310-abf3-653ff3226e6b
Lock Owner: harry
Lock Created: 2005-02-16 13:29:18 -0500 (Wed, 16 Feb 2005)
Lock Comment (1 line):
Need to make a quick tweak to this image. 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-05-12T15:30:02.553

使用 TortoiseSVN 的 repo-browser 功能，有一个锁定列显示锁定文件的用户。

右键单击本地工作副本-> TortoiseSVN-> repo-browser。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2009-05-12T15:29:37.970

命令行客户端使用命令“svn info”显示锁拥有者。

在 TortoiseSVN 中，您可以在“属性”上下文菜单（选项卡“subversion”）中看到锁定所有者。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-10T09:46:09.850

检查步骤：

1.  右键单击要确定锁定的文件/文件夹

2.  转到 TortoiseSVN 选项 >> 回购浏览器

3.  将打开一个新窗口，您将获得一个表格视图

4.  表中的锁列会显示谁拥有锁

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-05-25T05:24:03.753

1.  右键单击文件，选择 TortoiseSVN，然后检查修改
2.  单击检查存储库
3.  向右滚动以查看锁定列

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-07T09:19:36.330

以下 Python 脚本显示了所有锁以及谁拥有它们：

```
#!/usr/bin/python
# coding=UTF-8

# This tool shows who owns the locks in a subversion repository

import sys
import subprocess

if len(sys.argv) > 1:
    p = subprocess.Popen(['svn', 'status', '-u', sys.argv[1]], bufsize=1, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
else:
    p = subprocess.Popen(['svn', 'status', '-u'], bufsize=1, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)

(so, se) = p.communicate() # start command

lines = [x[21:].strip() for x in so.split('\n') if len(x) > 5 and x[5] == 'K']

for line in lines:
    p = subprocess.Popen(['svn', 'info', line], bufsize=1, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    (so, se) = p.communicate()
    details = [x[12:].strip() for x in so.split('\n') if x.startswith('Lock Owner')][0]
    print '[%s] (%s)' % (details, line) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-04T10:46:58.787

我也有这个关于*.aux 文件的问题。在我的情况下，解决方案/问题是不允许有深度大于 1 的子目录。如果要使用它，则 tmp 文件夹中的子目录必须存在。例如--> src--> 介绍-->introduction.tex 需要--> tmp--> 介绍-->introduction.aux* ****** *** ** *******

 **带下划线的目录必须存在。因此，在颠覆管理的情况下，还要提交 tmp 文件夹中的目录结构（没有 *.aux）文件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-12T15:26:18.973

检查[红皮书](http://svnbook.red-bean.com/en/1.2/svn.advanced.locking.html)部分“发现锁”。我相信它包含了答案。

# c# - 测试 .NET 中缺少必填字段的 Web 服务

> ID：853329
> 
> 赞同：1
> 
> 时间：2009-05-12T15:18:17.380
> 
> 标签：c#, .net, web-services, unit-testing

我当前工作的一部分涉及使用外部 Web 服务，为此我生成了客户端代理代码（使用 WSDL.exe 工具）。

我需要测试 Web 服务是否正确处理缺少必填字段的情况。例如，姓氏和名字是强制性的——如果调用中没有它们，则应该返回一个 SOAP 故障块。

正如您可能已经猜到的那样，在使用自动生成的代理代码时，我无法从我的 Web 服务调用中排除任何必填字段，因为编译时会检查架构。

我所做的是使用 HttpWebRequest 和 HttpWebResponse 向 Web 服务发送/接收手动格式化的 SOAP 信封。这可行，但由于服务返回 500 HTTP 状态代码，客户端上引发异常并且响应（包含我需要的 SOAP 故障块）为空。基本上我需要返回流来获取错误数据，这样我才能完成我的单元测试。我知道正在返回正确的数据，因为我可以在我的 Fiddler 跟踪中看到它，但我无法在我的代码中得到它。

这是我为手动调用所做的，更改了名称以保护无辜者：

```
private INVALID_POST = "<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
    "<soap:Envelope ...rest of SOAP envelope contents...";

private void DoInvalidRequestTest()
{
    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create("https://myserviceurl.svc");
    request.Method = "POST";
    request.Headers.Add("SOAPAction",
        "\"https://myserviceurl.svc/CreateTestThing\"");
    request.ContentType = "text/xml; charset=utf-8";
    request.ContentLength = INVALID_POST.Length;
    request.KeepAlive = true;

    using (StreamWriter writer = new StreamWriter(request.GetRequestStream()))
    {
        writer.Write(invalidPost);
    }

    try
    {
        // The following line will raise an exception because of the 500 code returned
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        if (response.StatusCode == HttpStatusCode.OK)
        {
            using (StreamReader reader = new StreamReader(response.GetResponseStream()))
            {
                string reply = reader.ReadToEnd();
            }
        }
    }
    catch (Exception ex)
    {
        ... My exception handling code ...
    }
} 
```

请注意，我没有使用 WCF，只使用 WSE 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T15:32:53.283

编写自己的 SoapHttpClientProtocol 并使用 SoapExtensions 怎么样？

```
 [WebServiceBinding()]
    public class WebService
    : System.Web.Services.Protocols.SoapHttpClientProtocol
    {
        [SoapTrace]
        public object[] MethodTest(string param1, string param2)
        {
            object[] result = this.Invoke("MethodTest", new object[] { param1, param2 });
            return (object[])result[0];
        }
    } 
```

# java - 哈希码与 SHA-1

> ID：853332
> 
> 赞同：9
> 
> 时间：2009-05-12T15:19:42.463
> 
> 标签：java, hashcode

我想比较一些代表树的大对象并缓存***一些东西***，以避免每次将新对象与已经存在的对象进行比较......

问题是什么是最好的？（性能和碰撞之间的妥协......）。

一方面，我有一个基于各种字段值的常规 hashCode 函数（遵循[有效 Java](http://java.sun.com/developer/Books/effectivejava/)的第 3 章。但我无法评估这种方法所带来的潜在冲突。

另一方面，我有来自标准 java 发行版的 MessageDigest 方法和 SHA-1 算法。我认为它不会有效率，但我可能会有更少的碰撞。我对吗 ？在我的情况下这是一个正确的解决方案还是我完全错了？

问题是我不知道物体的大小。另请注意，计算的值不会在 HashTable 中使用。

谢谢...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-12T15:39:21.730

请参阅以下内容：

*   [http://www.javapractices.com/topic/TopicAction.do?Id=28](http://www.javapractices.com/topic/TopicAction.do?Id=28)
*   [https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode--](https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode--)
*   [http://www.ibm.com/developerworks/java/library/j-jtp05273.html](http://www.ibm.com/developerworks/java/library/j-jtp05273.html)

请记住以下几点：

*   一个对象可能不相等，但具有相同的哈希码
*   您的碰撞可能性取决于您遇到的对象数量。
*   哈希码的有用程度取决于您如何实施检查

通常，您可以根据预期对象的数量和可能的散列数（最大散列值）来确定发生冲突的可能性。有关详细说明，请参阅[http://en.wikipedia.org/wiki/Birthday_paradox](http://en.wikipedia.org/wiki/Birthday_paradox)。

亲自？Java 对象（实例化的类）< 10,000？哈希码。代表文件/blob/大量数据？SHA-1。我在我的数据库中使用 SHA-1 散列来防止人们对同一个文件进行多次 ETL 工作。然后，我在第二级再次使用 SHA-1 散列，以防止人们在多个文件中对同一部分进行 ETL（例如，不同的文件但相同的顺序显示两次）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-12T15:27:56.723

就个人而言，我会使用`hashCode()`对象，直到证明任何可能的冲突都是实际问题，以避免抢先优化您可能实际上没有的问题。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-12T15:40:35.953

由于[生日问题，](http://en.wikipedia.org/wiki/Birthday_problem)碰撞的可能性取决于您正在处理的项目数量。

SHA-1 的 160 位空间是如此之大，以至于我怀疑您是否有足够的项目来查看碰撞。

在您拥有超过 50,000 个项目之前，32 位空间不`hashCode()`应该有大量的冲突。但是，这取决于使用良好的哈希算法。

为了应用像 SHA-1 这样的加密摘要，您需要将图形转换为字节串，这可能计算量很大，并且可能很复杂。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-12T16:08:37.767

通常对于重复文件/数据检测，MD5 是速度和碰撞机会之间的良好折衷。如果有人故意制作文件来欺骗您的程序（它有点容易受到碰撞攻击），则 MD5 是不合适的。但是，如果您只是担心偶然发生冲突，那么它的 128 位宽度目前实际上总是足够的。

SHA-1 和 SHA-256 为您提供了一些针对故意碰撞攻击的保护（理论上但没有已知的 SHA-1 实际攻击；对于密钥数据，几乎不值得超过 160 位哈希码宽度）。SHA-1 的速度大约是 MD5 的一半。

当然，如果您使用 MD5，性能可能不会成为太大的问题。但这显然取决于数据的大小。您可能对我整理的有关Java[中安全散列函数性能的一些信息感兴趣。](http://www.javamex.com/tutorials/cryptography/hash_functions_algorithms.shtml)

如果您确实需要更快的东西并且您只处理几百万条数据，那么另一个需要考虑的选项是 Numerical Recipes 作者提出的 64 位哈希算法。

Java's standard hashCode() implementation (of, say, String) is probably not suitable: aside from any issues about the quality of the hash, its 32-bit width means that you'll expect a collision after just 16,000 items or so.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-12T15:40:29.557

我赞同 matt b 的说法“在需要优化之前不要优化”。

但是，如果您决定以后需要的不仅仅是哈希码...我使用消息摘要（在我的情况下为 MD5）来“唯一”识别从 RSS 提要下载的各种项目，所以我最终没有得到相同的当我一遍又一遍地轮询时，项目在列表中出现了很多次。这些通常是小帖子，因此可以快速计算摘要。根据我的经验，它非常有效并且运作良好。

由于它们通常是一种对输入数据中非常小的变化做出强烈反应的方法，因此您肯定不太可能与 MD5 或 SHA-1 发生冲突。

# python - MySQL 对不在类 GPL 许可下的 Python 的支持

> ID：853337
> 
> 赞同：4
> 
> 时间：2009-05-12T15:20:10.090
> 
> 标签：python, mysql, open-source, gpl

我在 MySQL 上使用 Python/Django。我目前正在使用GNU GPL 许可下的[MySQLdb 。](http://sourceforge.net/projects/mysql-python)有没有类似 GPL 许可的具有“类似”功能的库？

澄清：

*   我还不知道是否要分发我的源代码或为我的应用程序收费。我所知道的是，我不希望通过选择 MySQL 和 Python 来为我做出这些决定。
*   我目前正在使用 Django 构建一个 Web 应用程序，我认为这个问题无关紧要，因为我没有“分发”任何东西，但我正在编写的 Python 代码可能可以作为桌面应用程序分发，这就是GPL 开始困扰我。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T15:27:19.893

我相信 MySQLdb 在 GPL 或 Python 许可下是双重许可的。Python 许可证允许您分发没有源代码的二进制文件。源代码分发中的自述文件说：

```
License
-------
GPL or the original license based on Python 1.5.2's license. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-12T15:30:00.247

您似乎误解了 GPL。（免责声明：我不是律师）

*   您可以为您的应用程序收费，即使它是根据 GPL 许可的。GPL 允许你出售你的代码。
*   即使您的代码在 GPL 下获得许可，您也不必分发任何东西。
*   无论如何，如果不分发源代码，您就无法可靠地分发 python 代码。
*   mysqldb 是双重许可的。您可以选择 python 的许可证或 GPL 许可证。

编辑：为了澄清第 2 点，因为有些人感到困惑：您不必分发任何东西，但是如果您确实分发了某些东西，则必须分发它的源代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-15T15:28:54.157

必须自己检查一下，这里有很多误导和错误的信息。

简短的版本：你不能。

MySQLdb1 - 或 python-mysqldb - 包在 GPL 下获得许可。

早期版本有一个关于可选使用 python 许可证的条款，但这从来都不是有效的。该项目包括一个 _mysql.c 文件，该文件具有专有 GPL2 或更高版本的版权声明和许可证。只要该文件存在，您就受到 GPL 的约束，即使文档中简要说明了其他内容。

mariadb 客户端库以 LGPL 形式提供，您可以链接到它而不是 mysql 客户端库 (GPL)，但这无关紧要，只要项目本身是 GPL。

由于官方 MariaDB 文档/站点指向上述模块，看起来 MariaDB 的 LGPL 根本无法帮助 Python 用户。

如果有 Python 的备用 MariaDB/MySQL 客户端库，那将是另一回事......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-21T12:36:22.453

很多......嗯......这里有误导性的答案。

如果 python-MySQLdb 与 Oracle 的客户端库（截至目前 (2014-02) 为 GPL）链接，那么 python-MySQLdb 以及使用它的应用程序将被 GPL 覆盖——这将与桌面应用程序相关分发案例。

python-MySQLdb 1.2.5 确实与 mariadb-native-client 1.0.0（即 LGPL）构建并链接。在这种情况下，使用 python-MySQLdb 的“基于 Python 1.5.2 许可证的原始许可证”可以启用桌面应用程序的仅二进制分发（在这种情况下，可能需要单独分发 mariadb-native-client 的源，如果它是动态链接的）。

# asp.net-mvc - User.Identity.Name 有多强？

> ID：853338
> 
> 赞同：2
> 
> 时间：2009-05-12T15:21:11.167
> 
> 标签：asp.net-mvc, ntlm

我正在编写一个使用 NTLM 身份验证的 ASP.Net MVC 应用程序，因此用户无需注册该站点。如果我禁用了匿名访问，我可以使用 User.Identity.Name 作为数据库中的所有权键。我想做的是能够发出搜索，例如

```
from station in db.stations where station.user == username select *; 
```

这足以可靠地知道用户是谁，或者是否有一个讨厌的用户可以欺骗名称字符串并获得他们不应该访问的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T15:40:55.720

该名称是从会话中填写的，因此攻击者必须欺骗会话 cookie 以劫持用户的会话并获得访问权限。ASP.NET 会话 cookie 被加密以帮助防止这种情况发生，但您绝对应该让会话过期，以便坚定的攻击者无法花费无限时间试图破坏加密。将 cookie 设置为 httpOnly 还有助于防止浏览器中的恶意脚本访问 cookie。

这是保护 ASP.NET 2.0 网站的最佳实践的[参考。](http://msdn.microsoft.com/en-us/library/ms998249.aspx)其中大部分仍然适用，但可能需要转换为 MVC。

# linux - Linux (CentsOS 5) 的 Aptana 安装问题

> ID：853339
> 
> 赞同：2
> 
> 时间：2009-05-12T15:21:20.993
> 
> 标签：linux, aptana, centos5

在我安装 Aptana 之后（安装目录： /usr/share/aptana ）

我不断收到这样的错误：

> 发生 SWT 错误，建议您退出工作台。随后的错误可能会发生并在没有警告的情况下终止工作台。有关详细信息，请参阅 .log 文件。

查看日志我看到了这个：

> !MESSAGE 没有更多句柄（java.lang.UnsatisfiedLinkError: /root/.Aptana/Aptana Studio/configuration/org.eclipse.osgi/bundles/72/1/.cp/libswt-mozilla-gtk-3236.so: libxpcom.所以：无法打开共享对象文件：没有这样的文件或目录）
> 
> ```
> !STACK 0
> 
> org.eclipse.swt.SWTError: No more handles 
> ```
> 
> （java.lang.UnsatisfiedLinkError：/root/.Aptana/Aptana Studio/configuration/org.eclipse.osgi/bundles/72/1/.cp/libswt-mozilla-gtk-3236.so：libxpcom.so：无法打开共享目标文件：没有这样的文件或目录）

好吧，在论坛和其他网站搜索了大约一个小时后，人们建议我安装这些软件包。

```
* yum install gtk2-devel
* yum install xulrunner
* yum install libstdc*
* yum install gtk2*
* yum install libswt3-gtk2*
* yum install compat-libstdc++-33 
```

我已经安装了一些，我不知道它们是否真的需要，但它们是给你的。

毕竟还是不行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T15:19:48.767

Ubuntu 12.04 似乎没有开箱即用的 libgtkembedmoz.so 文件。

您可以安装 kompozer 并使用它。

```
sudo apt-get install kompozer

export MOZILLA_FIVE_HOME=/usr/lib/kompozer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:04:31.083

我使用了在桌面上创建启动器应用程序并下载

*   百胜安装 gtk2-devel
*   百胜安装 xulrunner
*   百胜安装 libstdc*
*   百胜安装 gtk2*
*   百胜安装 libswt3-gtk2*
*   百胜安装 compat-libstdc++-33

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T15:22:13.957

我遇到了 [这个帖子](http://support.aptana.com/asap/browse/STU-1565)。在帖子中，您需要下载一个名为[aptana.sh](http://support.aptana.com/asap/secure/attachment/10969/aptana.sh)的文件。

如果文件不可用，这里是代码：

```
/*************** START OF FILE **************/

#!/bin/bash

# Set path for the Mozilla SWT binding

MOZILLA_FIVE_HOME=${MOZILLA_FIVE_HOME%*/}
if false && [ -n "$MOZILLA_FIVE_HOME" -a -e $MOZILLA_FIVE_HOME/libgtkembedmoz.so ]; then
:
elif [ -e /usr/lib/mozilla/libgtkembedmoz.so ]; then
export MOZILLA_FIVE_HOME=/usr/lib/mozilla
elif [ -e /usr/lib/firefox/libgtkembedmoz.so ]; then
export MOZILLA_FIVE_HOME=/usr/lib/firefox
elif [ -e /usr/lib/xulrunner/libgtkembedmoz.so ]; then
export MOZILLA_FIVE_HOME=/usr/lib/xulrunner
elif [ -e /usr/lib/mozilla-firefox/libgtkembedmoz.so ]; then
export MOZILLA_FIVE_HOME=/usr/lib/mozilla-firefox
elif [ -e /usr/lib/mozilla/libgtkembedmoz.so ]; then
export MOZILLA_FIVE_HOME=/usr/lib/mozilla
else
$DIALOGW \
--title="Integrated browser support not working" \
--text="This Eclipse build doesn't have support for the integrated browser."
[ $? -eq 0 ] || exit 1
fi
# libraries from the mozilla choosen take precedence
LD_LIBRARY_PATH=$MOZILLA_FIVE_HOME${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}

# Do the actual launch of Aptana Studio
exec ./AptanaStudio

/*************** END OF FILE **************/ 
```

仍然没有工作，所以我决定看看它试图调用的文件是否存在。文件名的命令在：

找到 libgtkembedmoz.so

它找到了，所以我将条件添加到脚本中，现在效果很好，是的！

`elif [ -e /usr/lib/esc-1.0.0/xulrunner/libgtkembedmoz.so ]; then export MOZILLA_FIVE_HOME=/usr/lib/esc-1.0.0/xulrunner`

让我知道可能有帮助的任何其他发现。

谢谢，--菲尔

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T15:23:56.667

好的，经过大量挖掘后，我发现 Aptana 需要 libgtkembedmoz.so 才能运行（Aptana 团队请修复此问题，请在下一个版本中包含该文件！！！）。

解决方法：

那么 xulrunner（新版本）不包括 libgtkembedmoz.so 文件。因此，经过大量谷歌搜索后，我发现 Thunderbird 确​​实如此。所以我 YUM 安装了 Thunderbird 并去检查文件 libgtkembedmoz.so 是否存在。（顺便说一句：CentOS 5 上的雷鸟版本 2.0.0.18）。是的，它就在那里。

所以我有一个寻找 libgtkembedmoz.so 文件的脚本

```
#!/bin/bash

# Set path for the Mozilla SWT binding
MOZILLA_FIVE_HOME=${MOZILLA_FIVE_HOME%*/}
if false && [ -n "$MOZILLA_FIVE_HOME" -a -e $MOZILLA_FIVE_HOME/libgtkembedmoz.so ]; then
:
elif [ -e /usr/lib/mozilla/libgtkembedmoz.so ]; then
export MOZILLA_FIVE_HOME=/usr/lib/mozilla
elif [ -e /usr/lib/firefox/libgtkembedmoz.so ]; then
export MOZILLA_FIVE_HOME=/usr/lib/firefox
elif [ -e /usr/lib/xulrunner/libgtkembedmoz.so ]; then
export MOZILLA_FIVE_HOME=/usr/lib/xulrunner
elif [ -e /usr/lib/esc-1.0.0/xulrunner/libgtkembedmoz.so ]; then
export MOZILLA_FIVE_HOME=/usr/lib/esc-1.0.0/xulrunner
elif [ -e /usr/lib/mozilla-firefox/libgtkembedmoz.so ]; then
export MOZILLA_FIVE_HOME=/usr/lib/mozilla-firefox
elif [ -e /usr/lib/mozilla/libgtkembedmoz.so ]; then
export MOZILLA_FIVE_HOME=/usr/lib/mozilla
elif [ -e /usr/lib/thunderbird-2.0.0.18/libgtkembedmoz.so ]; then
export MOZILLA_FIVE_HOME=/usr/lib/thunderbird-2.0.0.18
else
$DIALOGW \
--title="Integrated browser support not working" \
--text="This Eclipse build doesn't have support for the integrated browser."
[ $? -eq 0 ] || exit 1
fi

# libraries from the mozilla choosen take precedence
LD_LIBRARY_PATH=$MOZILLA_FIVE_HOME${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}

# Do the actual launch of Aptana Studio
exec ./AptanaStudio 
```

使其可执行（chmod 755 scriptname）并运行。

笔记：

只需检查以确保您拥有正确版本的程序和/或路径有效。

`[user@machine]# ls /usr/lib/thunderbird-2.0.0.18/libgtkembedmoz.so /usr/lib/thunderbird-2.0.0.18/libgtkembedmoz.so`

因此，如果您有 thunerbird 2.0.0.14，请同时在脚本中进行更改。

希望这有帮助;-)

# c# - 未加入 Microsoft Active Directory 中的域时如何使用 c# 对 ldap 进行身份验证

> ID：853349
> 
> 赞同：3
> 
> 时间：2009-05-12T15:24:34.733
> 
> 标签：c#, .net, .net-2.0, ldap

由于某种原因，当计算机未加入域时，ldap 和目录服务不起作用。来自 .net 的错误消息是域不可用。有谁知道需要做什么？

基础的...

```
 domainAndUsername = domain + @"\" + username;
 entry = new DirectoryEntry(_path, domainAndUsername, pwd);
 entry.AuthenticationType = FindAuthTypeMicrosoft(authType); 
```

...尝试将 testdomain.com 提供给上面的代码时，在本地登录到机器时似乎不起作用。

即使我可以毫无问题地 ping testdomain.com。有什么不同或问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T15:33:10.397

这段代码过去对我有用（尽管我承认我现在无法测试它）：

```
DirectoryEntry entry = new DirectoryEntry("LDAP://server-name/DC=domainContext,DC=com");
entry.Username = @"DOMAIN\account";
entry.Password = "...";
DirectorySearcher searcher = new DirectorySearcher(entry);
searcher.Filter = "(&(objectClass=user)(sn=Jones))";
SearchResultCollection results = searcher.FindAll(); 
```

最困难的部分（无论如何对我来说）是弄清楚“连接字符串”的细节。我通常依靠[ADSI Edit](http://www.google.com/search?q=adsi+edit)和[AD Explorer](http://technet.microsoft.com/en-us/sysinternals/bb963907.aspx)来帮助我找出正确的值是什么。[Softerra LDAP 浏览器](http://www.ldapbrowser.com/)- 免费版本有点旧，v2.6 并隐藏在他们的下载部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T15:31:51.913

目录服务依赖于 ActiveDirectory。因此，您需要将机器添加到域或显式提供域控制器。请注意，域并不意味着来自域名系统的域名。这意味着一个 ActiveDirectory 域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T19:39:32.537

我将 _path 留空。对不起我自己的问题。

# image - Flex Image 源事件，如何知道何时收到新源？

> ID：853356
> 
> 赞同：1
> 
> 时间：2009-05-12T15:26:22.997
> 
> 标签：image, actionscript-3, events

我有一个简单的 Image 组件，我在创建时动态更改它的源。

```
myimg.source = "http://foo/bar.jpg" 
```

如何知道图像何时加载和接收，以便检查其宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-13T08:36:50.537

如果你正在使用 flex：在你的图像组件上设置一个渲染事件：

```
<mx:Image id="theImage" render="yourFunction(event)"/> 
```

在脚本字段中：

```
private function yourFunction(evt:Event){
var theWidth= (evt.target as Image).width;
} 
```

当显示列表即将更新和呈现时，当调度任何显示对象时调用渲染事件。

闪存（AS3.0）：

```
//constructor function
public function CustomDisplayObject() {
theImage.addEventListener(Event.RENDER, renderHandler);
}

private function renderHandler(evt:Event):void {
var theWidth:int = evt.width;
} 
```

（仅在 flex 中测试）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T15:36:03.903

您应该能够将事件侦听器添加到 images [event.creationComplete](http://livedocs.adobe.com/flex/3/langref/mx/core/UIComponent.html#event:creationComplete)事件以了解何时完成加载。或者也许是[event.progress](http://livedocs.adobe.com/flex/3/langref/mx/controls/SWFLoader.html#event:progress)。我会看一下Image 控件上的[继承事件，看看哪些有效。](http://livedocs.adobe.com/flex/3/langref/mx/controls/Image.html#eventSummary)

# c# - ADO.Net 插入强类型行而不将数据集加载到内存

> ID：853360
> 
> 赞同：1
> 
> 时间：2009-05-12T15:27:21.623
> 
> 标签：c#, ado.net

有没有办法在不填充数据集或指定列的情况下使用 ADO.Net 插入行？我的数据集可能很大，所以我不想加载它们只是为了添加一行。我知道我可以使用适配器插入并指定列，但我需要对许多表执行此操作，因此我不想创建自定义代码来处理每个不同的表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T15:30:42.820

使用如下查询将表加载到 ADO.NET 数据集中：

```
select * from myTable where (1=0) 
```

这将为您提供一个零行数据集。

然后将您的行添加到数据集并让适配器为您保存它。

# regex - RegEx - 在日志文件中查找电子邮件

> ID：853362
> 
> 赞同：1
> 
> 时间：2009-05-12T15:28:02.887
> 
> 标签：regex, parsing

我正在寻找一个正则表达式，它将测试与字符串的匹配，例如：

mxtreme1.log:May 12 07:00:00 10.1.1.175 postfix/cleanup[48145]: C2C9FFA730: fullname=, **sender= *LOGINNAME* @company.com** , from=LOGINNAME@company.com, recip=LOGINNAME@company.com,先验=，as_score=0，as_strategy=M，代码=W，动作=FFFFFFFFFFFTFFFFFFFFFF，分析=F000FFF000TTT000F000TFT000000TTSS3000059900033-F1F-FF00000000F000FFF000000000000F1FFF000F000

其中粗体的整个部分是匹配的，但 LOGINNAME 可以是任意数量的随机字符。

任何帮助将不胜感激，谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T15:30:51.680

那将是这样的：

```
发件人=[^@]+@company\.com
```

（您明确指出只有*LOGINNAME*部分是可变的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T15:46:30.127

为了测试上述所有解决方案，我个人喜欢使用“正则表达式教练”

只需在谷歌上搜索那个字符串，它是一个对我很有帮助的免费软件。

PS：我不拥有产品或构建它的团队，也没有任何既得利益。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T15:30:17.203

我很确定逗号在电子邮件地址中是无效的，所以只要它之后总是有逗号，你应该能够得到它：

```
/(sender=[^,]+?),/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T15:37:08.660

这是根据[RFC2822的电子邮件地址的](http://www.faqs.org/rfcs/rfc2822.html)[正则表达式](http://ex-parrot.com/~pdw/Mail-RFC822-Address.html)。

它非常长，但电子邮件地址可能比您预期的要复杂。

只需为其添加前缀`/sender\s*=\s*/`即可仅获取发件人电子邮件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T15:40:38.717

你可以试试这个：

```
^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$ 
```

但是请查看[这篇文章](http://www.regular-expressions.info/email.html)以了解为什么 RegEx 和电子邮件地址存在问题。

这也添加了SENDER =：

```
^[\w]+=[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$ 
```

# .net - 当单个用户注销时，其他用户似乎丢失了 AuthTicket

> ID：853364
> 
> 赞同：1
> 
> 时间：2009-05-12T15:28:12.807
> 
> 标签：.net, forms-authentication

我们正在运行一个 .NET 2.0 Web 应用程序。我们的一个客户遇到了一个问题，当两个不同的用户在两台不同的机器上登录应用程序并且一个用户注销时，另一个用户似乎丢失了其 AuthTicket（没有显示任何内容，页面看起来只是损坏）。他们必须注销并重新登录才能继续使用该应用程序。正如您所想象的那样，这对他们来说非常令人沮丧，他们希望尽快得到答案。

我们在实验室中重新创建了他们的设置并尝试重现该问题，但我们不能。此外，这个问题已经在其他网站上看到过，但在某个时候已经“自行修复”，尽管似乎没有人能解释如何。

这对我来说似乎是某种配置问题，尤其是当我们可以使用相同的硬件运行相同的版本并且看不到它时。然而，到目前为止我所做的测试和研究并没有产生任何结果。唯一的半有用信息是检查 AppPools 是否设置为在使用过多内存或其他情况时进行回收。

有人有想法么？

如果这有帮助，这是用于身份验证的 web.config 条目：

```
<authentication mode="Forms">
    <forms name=".EyeQCookie" loginUrl="Login.aspx" protection="All" timeout="30"   path="/" slidingExpiration="true">
    </forms>
</authentication> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-06T15:00:54.333

AuthTickets 没有问题，尽管它的行为与它完全一样。问题在于缓存以及我们如何使用/存储值（更具体地说是剥皮——>我们有点落后于时代）。

# apache-flex - 任意数量的带有个人数据的匿名加载程序处理程序？

> ID：853365
> 
> 赞同：0
> 
> 时间：2009-05-12T15:28:25.193
> 
> 标签：apache-flex, actionscript-3, actionscript, event-handling, anonymous-function

我需要在 AIR 应用程序中加载任意数量的文件。

我想遍历一个 File 对象数组，并为每个人的 File.url 创建和启动 Loaders。

当它们完成后（事件 COMPLETED 或 IOErrorEvent.IO_ERROR），我想将它们的数据填充到某个地方。如果他们失败了，我想进行异常报告。我找不到从事件侦听器中引用 File 对象的任何方法（当然不是 IO_ERROR）

最好的方法是为每个将文件信息“硬编码”到其中的启动器创建单独的事件处理程序。至少，我可以将函数本身用作字典的索引：

```
foo（fileToLoad：文件）：无效
{
    var theCompletedHandler : 函数 =
    {
        var theFile : File = completedHandlerLookup[?????? 这个功能？？？？？？];
        var theData : ImageData =
            new ImageData(theFile.url, (_loader.content as Bitmap).bitmapData);

        // 对数据做一些事情

        删除完成的HandlerLookup[?????? 这个功能？？？？？？];
        删除 errorHandlerLookup.findByValue(theFile); // [原文如此]
    }

    var theErrorHandler : 函数 =
    {
        var theFile : File = errorHandlerLookup[?????? 这个功能？？？？？？];

        // 报告错误

        删除errorHandlerLookup[?????? 这个功能？？？？？？];
        删除完成的HandlerLookup.findByValue(theFile); // [原文如此]
    }

    completedHandlerLookup[theCompletedHandler] = theCompletedHandler;
    errorHandlerLookup[theCompletedHandler] = theErrorHandler;

    var theLoader : Loader = new Loader();
    theLoader.addEventListener(Event.COMPLETE, theCompletedHandler);
    theLoader.addEventListener(IOErrorEvent.IO_ERROR, theErrorHandler);
    theLoader.load(new URLRequest(fileToLoad.url));

```

我可以使用 event.currentTget 并将 Loader 实例用作索引吗？那会有什么奇怪的依赖吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T16:25:17.300

您可以使用 event.currentTarget 作为索引查找，*只要*您清除所有引用，您应该没有问题。但是请注意，加载程序事件侦听器已添加到 loader.contentLoaderInfo，因此将通过 e.currentTarget.loader 访问加载程序。

另外值得一提的是，针对这种情况的一种更简单的方法是构建一个基于队列的系统，因此它一次只加载一个文件。例如将所有文件存储在一个数组中。然后在 COMPLETE 或 IO_ERROR 上，您将处理当前文件，然后开始下一个文件。这在资源方面会更好（只有一个加载器），并避免垃圾收集问题。

我也有点好奇你为什么是匿名函数？从垃圾收集的角度来看，它们不是很好，实际上使这种情况复杂化。这是要求吗？

编辑：这是基于队列的系统如何解决此问题的粗略（且不完整）示例。

```
var loader:Loader;
var queue:Array;

function addFile(file:File):void
{
     queue.push(file);
}

function handleLoadedAsset(e:Event):void 
{
    var currentFile:File= queue[0];
    //do whatever
    stepQueueForward();
}

function handleFailedAssetLoad(e:IOErrorEvent):void 
{
    var currentFile:File = queue[0];
    //clean up
    stepQueueForward();
}

function stepQueueForward():void
{
    queue.splice(0, 1);
    var nextFile:File = queue[0];
    loader.load(new URLRequest(nextFile.url));
} 
```

# c++ - C++0x 中 C++ 枚举的基础类型

> ID：853368
> 
> 赞同：27
> 
> 时间：2009-05-12T15:29:03.133
> 
> 标签：c++, enums, c++11

我一直在尝试阅读一些 C++ 标准，以了解枚举的工作原理。实际上比我最初想象的要多。

`int`对于范围枚举，除非使用 enum-base 子句另行指定（它可以是任何整数类型），否则基础类型很明显。

```
enum class color { red, green, blue};  // these are int 
```

对于无范围的枚举，似乎基础类型可以是任何可以工作的整数类型，并且它不会大于 int，除非它需要。

```
enum color { red, green, blue};  // underlying type may vary 
```

由于无范围枚举的底层类型没有标准化，那么处理序列化枚举实例的最佳方法是什么？到目前为止，我一直`int`在写入时转换为，然后在读取时序列化为一个`int`并在开关中设置我的`enum`变量，但这似乎有点笨拙。有没有更好的办法？

```
enum color { red, green, blue };
color c = red;
// to serialize
archive << (int)c;
// to deserialize
int i;
archive >> i;
switch(i) {
  case 0: c = red; break;
  case 1: c = green; break;
  case 2: c = blue; break;
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-12T15:32:27.433

*enum 类*是[C++0x](http://en.wikipedia.org/wiki/C++0x#Strongly_typed_enumerations)的一个特性，它在 C++03 中不存在。

> 在标准 C++ 中，枚举不是类型安全的。它们实际上是整数，即使枚举类型不同。这允许在不同枚举类型的两个枚举值之间进行比较。C++03 提供的唯一安全性是整数或一种枚举类型的值不会隐式转换为另一种枚举类型。此外，不能明确指定底层整数类型，即整数的大小；它是实现定义的。最后，枚举值的范围是封闭范围。因此，两个单独的枚举不可能具有匹配的成员名称。C++0x 将允许对没有这些问题的枚举进行特殊分类。这是使用枚举类声明表示的

示例（来自维基百科文章）：

```
enum Enum1;                   //Illegal in C++ and C++0x; no size is explicitly specified.
enum Enum2 : unsigned int;    //Legal in C++0x.
enum class Enum3;             //Legal in C++0x, because enum class declarations have a default type of "int".
enum class Enum4: unsigned int; //Legal C++0x.
enum Enum2 : unsigned short;  //Illegal in C++0x, because Enum2 was previously declared with a different type. 
```

至于序列化部分（我认为这不是原始问题的一部分），我更喜欢创建一个帮助类，将枚举项转换为等效的字符串（并返回），因为名称通常比它们的整数值更稳定表示，因为枚举项可以（有时是）重新排序而不改变代码行为。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-12T17:04:01.497

我决定创建一个新答案，因为我的旧答案太乱了。不管怎样，我只想说一些关于 C++11 的事情，你可以在其中使用这个获得枚举的底层类型：

```
std::underlying_type_t<E> 
```

并且为了兴趣，重载解决的想法。但请按照@lothar 的建议使用名称来存储枚举。

重载决议源于这样一个事实：从枚举到 int、unsigned int、long、unsigned long 中的第一个可以表示其基础类型的所有值。转换为任何其他整数类型的排名较低，重载决议不喜欢它。

```
char (& f(int) )[1];
char (& f(unsigned int) )[2];

char (& f(long) )[3];
char (& f(unsigned long) )[4];

char const* names[] = { 
    "int", "unsigned int", 
    "long", "unsigned long"
};

enum a { A = INT_MIN };
enum b { B = UINT_MAX };
enum c { C = LONG_MIN };
enum d { D = ULONG_MAX };

template<typename T> void print_underlying() {
    std::cout << names[sizeof(f(T()))-1] << std::endl;
}

int main() { 
    print_underlying<a>();
    print_underlying<b>();
    print_underlying<c>();
    print_underlying<d>();
} 
```

它在这里打印这个：

```
int
unsigned int
int
unsigned int 
```

这个序列化问题并不是特别感兴趣（因为序列化的数据的大小不是恒定宽度，当枚举及其底层类型发生变化时，这可能会导致问题），但找出存储类型通常很有趣整个枚举。干杯!

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-12T16:23:24.700

我还没有读过任何 C++0x 的东西，所以我无法对此发表评论。

至于序列化，在读回枚举时不需要开关 - 只需将其转换为枚举类型即可。

但是，我在写入流时不会强制转换。这是因为我经常喜欢为枚举写一个 operator<<，这样我就可以捕捉到正在写入的错误值，或者我可以决定写出一个字符串来代替。

```
enum color { red, green, blue };
color c = red;

// to serialize
archive << c;    // Removed cast

// to deserialize
int i;
archive >> i;
c = (color)i;    // Removed switch 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-11T19:02:40.380

```
#include <type_traits>

enum a { bla1, bla2 };
typedef typename std::underlying_type<a>::type underlying_type;

if (std::is_same<underlying_type, int>::value)
  std::cout << "It's an int!" << endl;
else if (std::is_same<underlying_type, unsigned int>::value)
  std::cout << "It's an uint!" << endl; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-12T15:47:36.787

至于`enum class color`：这是 C++/CLI (C++ .NET) 还是未来的 C++0x 代码？

对于序列化，您可以获取枚举的大小`sizeof(color)`以了解要复制多少字节。

# python - 使用 Python 读取 Microsoft Access 数据库需要什么？

> ID：853370
> 
> 赞同：34
> 
> 时间：2009-05-12T15:29:23.850
> 
> 标签：python, linux, ms-access, python-module

如何在 Python 中访问 Microsoft Access 数据库？用 SQL 吗？

我更喜欢适用于 Linux 的解决方案，但我也可以适应 Windows。

我只需要读取权限。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-14T02:56:02.763

在 Linux 上，MDBTools 是您目前唯一的机会。^([[争议]](https://stackoverflow.com/questions/853370/#comment53931912_15400363))

在 Windows 上，您可以使用 pypyodbc 处理 mdb 文件。

创建 Access mdb 文件：

```
import pypyodbc
pypyodbc.win_create_mdb( "D:\\Your_MDB_file_path.mdb" ) 
```

这是一个完全演示 pypyodbc 的访问支持功能[的 Hello World 脚本。](https://code.google.com/p/pypyodbc/wiki/pypyodbc_for_access_mdb_file)

免责声明：我是 pypyodbc 的开发者。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-05-12T22:33:26.733

我已经使用[PYODBC成功连接到](https://pypi.python.org/pypi/pyodbc/)**Windows 上**的 MS Access db 。安装很简单，使用也很简单，您只需要设置正确的连接字符串（列表中给出了 MS Access 的连接字符串），然后您就可以使用示例了。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-05-12T15:39:23.023

[pyodbc](http://code.google.com/p/pyodbc/)怎么样？[这个 SO question](https://stackoverflow.com/questions/827502/pyodbc-and-microsoft-access-inconsistent-results-from-simple-query)演示了可以使用它来读取 MS Access。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-05-13T02:32:10.383

你有一些听起来不错的解决方案。另一个可能比您想要的更接近“金属”的是 MDB Tools。

[MDB Tools](http://sourceforge.net/projects/mdbtools/)是一组开放源代码库和实用程序，可方便地从 MS Access 数据库（mdb 文件）导出数据，而无需使用 Microsoft DLL。因此非 Windows 操作系统可以读取数据。或者，换句话说，他们正在对 MDB 文件的布局进行逆向工程。

另请注意，我怀疑他们是否已经开始处理 ACCDB 文件，并且可能不会对该功能提出太多要求。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-06-07T11:01:31.820

在 Ubuntu 12.04 上，这是我为使其正常工作所做的。

安装pyodbc：

```
$ sudo apt-get install python-pyodbc 
```

继续安装一些额外的驱动程序：

```
$ sudo apt-get install mdbtools libmdbodbc1 
```

制作一个连接到数据库并显示所有表的小测试程序：

```
import os
import pyodbc

db_path = os.path.join("path", "toyour", "db.mdb")
odbc_connection_str = 'DRIVER={MDBTools};DBQ=%s;' % (db_path)
connection = pyodbc.connect(odbc_connection_str)
cursor = connection.cursor()

query = "SELECT * FROM MSysObjects WHERE Type=1 AND Flags=0"
cursor.execute(query)
rows = cursor.fetchall()
for row in rows:
    print row 
```

我希望它有所帮助。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-08-09T20:48:15.407

老问题，但我想我会为 Windows 发布一个 pypyodbc 替代建议：ADO。事实证明，通过 COM 使用现代（而不是老式的 ODBC）驱动程序访问 Access 数据库、Excel 电子表格和其他任何东西真的很容易。

查看以下文章：

*   [http://www.mayukhbose.com/python/ado/index.php](http://www.mayukhbose.com/python/ado/index.php)
*   [http://www.markcarter.me.uk/computing/python/ado.html](http://www.markcarter.me.uk/computing/python/ado.html)
*   [http://www.ecp.cc/ado_examples.shtml](http://www.ecp.cc/ado_examples.shtml)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-09-10T20:06:12.237

就个人而言，即使经过多次尝试，我也无法让 MDB 工具（以及相关的 ODBC 工具，如 unixODBC）在 Linux 下与 Python 或 PHP 一起正常工作。[我只是在这里](https://stackoverflow.com/a/24096474/2144390)尝试了这个问题的另一个答案中的说明，我得到的只是“分段错误（核心转储）”。

但是，我确实获得了[UCanAccess](http://ucanaccess.sourceforge.net/site.html) JDBC 驱动程序来从 Jython 或 CPython+JayDeBeApi 读取 Linux 上的 .mdb 和 .accdb 文件。有关如何在 Ubuntu 14.04 LTS 下进行设置的详细说明，请参阅我的其他[答案](https://stackoverflow.com/a/25614063/2144390)。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-12-07T10:10:10.673

**将 Access 数据库读取为 pandas 数据框 (Windows)。**

这是一个非常快速和简单的解决方案，我已经成功地用于较小的数据库。

您可以通过永久链接到 Excel 并保存该文件来读取 Access 数据库（需要单击几下），链接在这里：

[https://support.office.com/en-gb/article/Connect-an-Access-database-to-your-workbook-a3d6500c-4bec-40ce-8cdf-fb4edb723525](https://support.office.com/en-gb/article/Connect-an-Access-database-to-your-workbook-a3d6500c-4bec-40ce-8cdf-fb4edb723525)

然后，您可以简单地将该 Excel 文件读取为 pandas 数据框。

因此，例如，将链接的 Excel 文件保存为位置 \FileStore\subfolder1\subfolder 中的“link_to_master.xlsx”。

在 python 中运行以下命令：

```
import pandas as pd
import os
os.chdir('\\\\FileStore\\subfolder1\\subfolder') #sets the folder location
df = pd.read_excel('link_to_master.xlsx') # reads the Excel file
df 
```

如果您正在重新访问您的 python 脚本，请考虑链接刷新的频率。即 Excel 和 Access 之间的链接是静态的。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-12T16:51:52.623

最有可能的是，您会想要使用像[SQLAlchemy](http://www.sqlalchemy.org/)这样的优秀框架来访问您的数据，或者至少，我会推荐它。[对 Access 的支持](http://www.sqlalchemy.org/trac/wiki/DatabaseNotes#MicrosoftAccess)是“实验性的”，但我记得使用它没有太多问题。它本身在后台使用[pyodbc](http://code.google.com/p/pyodbc/)连接到 Access dbs，因此它应该可以在 windows、linux、os x 等环境下工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-10T19:12:11.033

如果您有空闲时间，可以尝试修复和更新这个通过本机 COM32 客户端 API 读取 MS-Access DB 的 python 类：[Microsoft Access 的提取和操作类](http://code.activestate.com/recipes/528868-extraction-and-manipulation-class-for-microsoft-ac/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-12T22:00:41.620

如果您使用[EQL Data](http://eqldata.com/)将数据库同步到 Web ，那么您可以使用 JSON 或 YAML 查询您的 Access 表的内容：http: [//eqldata.com/kb/1002](http://eqldata.com/kb/1002)。

那篇文章是关于 PHP 的，但它在 Python 中也同样适用。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-11-29T12:15:10.313

我在 Windows 下将 Python 连接到 MS Access 的方式是使用这种方式：[Connect to MS Access with Python](http://www.manejandodatos.es/2014/9/connect-ms-access-python)。或许你能在Win 7上找到一些麻烦，所以我找到了一个解决方案：[Solving a connection between MS Access and Python on Windows 7](http://www.manejandodatos.es/2014/9/solving-connection-ms-access-python-windows-7)

我没试过在Linux下连接！

# macros - 如何使宏“原子”

> ID：853372
> 
> 赞同：0
> 
> 时间：2009-05-12T15:29:43.880
> 
> 标签：macros, openoffice.org, atomic

IOW 如何在执行宏时使 OOo 的撤消/重做正常工作？

这与我之前的问题有关：[#853176](https://stackoverflow.com/questions/853176/openoffice-org-macro-help)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T20:34:08.253

您可以与 UndoManager 对话，`enterUndoContext()`在宏开始时调用，然后`leaveUndoContext()`在结束时调用。例如：

```
Dim undo As Object
undo = ThisComponent.UndoManager
undo.enterUndoContext("MyAtomicTest")
...
[YOUR COMPLEX OPERATIONS HERE]
...
undo.leaveUndoContext 
```

这将创建一个原子撤消操作，对用户显示为“MyAtomicTest”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T21:49:01.623

对于我们当中喜欢使用 JavaScript 编写 OOo 宏的人来说，这里有一个*应该可以*工作的最小片段（它已经过测试，但我将这段代码从更大的上下文中分离出来）：

```
importClass( Packages.com.sun.star.document.XUndoManager );
importClass( Packages.com.sun.star.document.XUndoManagerSupplier );
var doc           = XSCRIPTCONTEXT.getDocument();
var undo_manager  = UnoRuntime.queryInterface(XUndoManagerSupplier, doc).getUndoManager();
undo_manager.enterUndoContext( 'your descriptive title here' ); 
// get stuff done
undo_manager.leaveUndoContext(); 
```

# asp.net - Gridview 模板字段的父行引用？

> ID：853379
> 
> 赞同：0
> 
> 时间：2009-05-12T15:30:36.720
> 
> 标签：asp.net, gridview

我想知道如何从属于 gridview 的模板字段内的子对象上的事件中引用该行。

[编辑：显然我错了，父母不为空，奇怪的东西，就是这样。]

问题是，有一个复选框表示与用户与 ID 的关系相关的布尔状态。我必须手动更新该信息，方法是删除目标行或插入它，具体取决于复选框状态。

我可以很容易地获得用户名，也可以通过函数获得实际状态。

那么，如何从该事件中获取我的 gridview 引用的行中的 ID？

我绝对需要这些信息，我不能使用暗示修改数据库或用于做我打算做的事情的方法的解决方法。我绝对必须使用复选框和那个事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-12T16:06:54.773

似乎我可以使用的最简单的解决方案是在 ID 上添加一个隐藏字段绑定并引用它，而不是深入到深奥的引用中。它变成了 FindControl 的简单问题。

像 (myChkBox.Parent.FindControl("myHiddenField") as HiddenField).Value

也许没有它应该的那么性感，但我想它仍然有效。

# c# - 使用正则表达式从 html 链接获取“标题”属性

> ID：853388
> 
> 赞同：0
> 
> 时间：2009-05-12T15:32:49.897
> 
> 标签：c#, .net, html, regex

我有以下正则表达式来匹配从我们的自定义 cms 生成的页面上的所有链接标签

```
<a\s+((?:(?:\w+\s*=\s*)(?:\w+|"[^"]*"|'[^']*'))*?\s*href\s*=\s*(?<url>\w+|"[^"]*"|'[^']*')(?:(?:\s+\w+\s*=\s*)(?:\w+|"[^"]*"|'[^']*'))*?)>.+?</a> 
```

我们正在使用 c# 循环遍历所有匹配项，并在呈现页面内容之前向每个链接（用于跟踪软件）添加一个 onclick 事件。我需要解析链接并向 onclick 函数添加一个参数，即“链接名称”。

我打算修改正则表达式以获得以下子组

*   链接的title属性
*   如果链接包含图像标签，则获取图像的替代文本
*   链接的文本

然后我可以检查每个子组的匹配以获取链接的相关名称。

我将如何修改上述正则表达式来做到这一点，或者我可以使用 c# 代码实现相同的想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T15:37:17.660

正则表达式根本不擅长解析 HTML（请参阅[您能否提供一些示例，说明为什么用正则表达式解析 XML 和 HTML 很困难？](https://stackoverflow.com/questions/701166)为什么）。您需要的是一个 HTML 解析器。请参阅[您能否提供一个使用您最喜欢的解析器解析 HTML 的示例？](https://stackoverflow.com/questions/773340)对于使用各种解析器的示例。

特别是您可能对[HTMLAgilityPack 答案](https://stackoverflow.com/questions/773340/can-you-provide-an-example-of-parsing-html-with-your-favorite-parser/773769#773769)感兴趣。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T15:41:43.770

试试这个：

```
Regex reg = new Regex("<a[^>]*?title=\"([^\"]*?\"[^>]*?>"); 
```

几个陷阱：

*   这将匹配区分大小写，您可能需要调整它
*   这期望标题属性既存在又被引用
    *   当然，如果 title 属性不存在，你可能不想要匹配吗？

要提取，请使用组集合：

```
reg.Match("<a href=\"#\" title=\"Hello\">Howdy</a>").Groups[1].Value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T16:40:40.263

感谢混沌。Owens 向我介绍了 HtmlAgilityPack 库，它很棒。最后我用它来解决我的问题，如下所示。我会毫不犹豫地向其他人推荐这个图书馆。

```
 HtmlDocument htmldoc = new HtmlDocument();
    htmldoc.LoadHtml(content);
    HtmlNodeCollection linkNodes = htmldoc.DocumentNode.SelectNodes("//a[@href]");
    if (linkNodes != null)
    {
        foreach (HtmlNode linkNode in linkNodes)
        {
            string linkTitle = linkNode.GetAttributeValue("title", string.Empty);
            //If no title attribute exists check for an image alt tag
            if (linkTitle == string.Empty)
            {
                HtmlNode imageNode = linkNode.SelectSingleNode("img[@alt]");
                if (imageNode != null)
                {
                    linkTitle = imageNode.GetAttributeValue("alt", string.Empty);
                }
            }
            //If no image alt tag check for span with text
            if (linkTitle == string.Empty)
            {
                HtmlNode spanNode = linkNode.SelectSingleNode("span");
                if (spanNode != null)
                {
                    linkTitle = spanNode.InnerText;
                }
            }

            if (linkTitle == string.Empty)
            {
                if (!linkNode.HasChildNodes)
                {
                    linkTitle = linkNode.InnerText;
                }
            }

        }
    } 
```

# asp.net - 更新表单后保持对 ajax 更新面板的关注

> ID：853390
> 
> 赞同：2
> 
> 时间：2009-05-12T15:32:58.057
> 
> 标签：asp.net, javascript, updatepanel, tabbing

我有一个表单视图，旨在在每次更改 text_changed 事件或下拉列表时更新其数据源。在每个 text_changed 事件和其他控件的等效事件上，我调用 formView.UpdateItem 方法，这会导致表单从我已经向下切换到的控件失去焦点。

我尝试实现[此方法](http://couldbedone.blogspot.com/2007/08/restoring-lost-focus-in-update-panel.html)，但在第二次尝试选择控件后出现未知的运行时错误。

我不禁想到还有另一种方法可以解决这个问题。

你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T15:59:29.417

对于这样的事情，我经常使用 javascript 将值存储在 asp:Hidden 控件 (input type="hidden") 中，然后添加一个 pageLoad 函数（在 javascript 中）来解析该字段，然后设置焦点。这样，焦点控件的 id 通过回发保持不变。

像这样的东西（伪代码）：

```
<input type="hidden" id="focusHolder" />

function onSubmit (registered via ClientScript.RegisterOnSubmitStatemnet) {
grab the target and stash id in #focusHolder
}

function pageLoad() {
$get($get('focusHolder').value).focus();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:09:01.240

您也可以在服务器端执行此操作。下面是一个如何将焦点放在导致异步回发的控件上的示例：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
        {
            if (ScriptManager.GetCurrent(Page).IsInAsyncPostBack)
            {
                string IDPostbackCtrl = GetAsyncPostBackControlID(Page, Page.Request);
                ScriptManager.GetCurrent(Page).SetFocus(IDPostbackCtrl);
            }
        }
    }

    public string GetAsyncPostBackControlID(Page page, HttpRequest request)
    {
        string smUniqueId = ScriptManager.GetCurrent(page).UniqueID;
        string smFieldValue = request.Form[smUniqueId];

        if (!String.IsNullOrEmpty(smFieldValue) && smFieldValue.Contains('|'))
            return smFieldValue.Split('|')[1];

        return String.Empty;
    } 
```

# android - T-Mobile G1 (MSM7200) 显存

> ID：853393
> 
> 赞同：0
> 
> 时间：2009-05-12T15:33:43.250
> 
> 标签：android, memory, opengl-es

我正在尝试查找有关 T-Mobile G1 上可用 GPU（用于 OpenGL）内存的一些信息。

这款手机内置 MSM7200 高通芯片和 ATI Imageon GPU。

不幸的是，我无法挖掘任何有关 GPU 内存使用细节的信息。

纹理总共有多少可用内存？内存是否与 CPU 内存共享？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-14T13:13:02.013

关于实际内存大小 - 没有新信息。但我确实发现 GPU 和 CPU 的内存单元是分开的。希望它可以帮助某人...

# python - 备用换行符？Python

> ID：853398
> 
> 赞同：0
> 
> 时间：2009-05-12T15:35:10.580
> 
> 标签：python

我正在寻找一种仅用一个字符表示 '\n' 的方法。我正在编写一个使用字典“加密”文本的程序。因为每个字符都在字典中表示，所以当我的程序到达字符串中的 '\n' 时遇到问题，但将其读取为 '\' 'n' 。是否有替代方式来表示换行符，即只有一个字符？这是我下面的代码，如果某些缩进搞砸了，对不起。我不完全明白如何在这个窗口中输入代码。:)

```
##################################
#This program will take an input and encrypt it or decrypt it
#A cipher is used to transform the text, which can either be
#input or from a text file.
#The cipher can be any letter a-z, as well as most commonly used special characters
#numbers and spaces are not allowed.
#For the text, a-z, most special characters, space, and new line may be used.
#no numbers can be encrypted.
##################################

#These three dictionaries are used during the encryption process.
keyDict={'a': 17,'b': 3,'c':16,'d':26,'e':6,'f':19,'g':10,'h':12,
         'i':22,'j':8,'k': 11,'l':2,'m':18,'n':9,'o':23,'p':7,
         'q':5,'r': 20,'s': 1,'t': 24,'u':13,'v':25,'w':21,'x':15,
         'y':4,'z': 14, ' ':42, '.':0,'!': 27, '@': 34, '#': 35, '%': 37,
         '$': 36, "'": 33,'&': 39, '*': 40, ',': 29, '.': 30, '~': 41, ';': 31,
         ':': 32, '?': 28, '^': 38}

refDict2={' ': 43,  'a': 1, 'c': 3, 'b': 2, 'e': 5, 'd': 4, 'g': 7, 'f': 6, 'i': 9,
         'h': 8, 'k': 11, 'j': 10, 'm': 13, 'l': 12, 'o': 15, 'n': 14, 'q': 17,'\n': 42,
         'p': 16, 's': 19, 'r': 18, 'u': 21, 't': 20, 'w': 23, 'v': 22, 'y': 25,
         'x': 24, 'z': 26, ' ':0, '!': 27, '@': 34, '#': 35, '%': 37, '$': 36, "'": 33,
          '&': 39, '*': 40, ',': 29, '.': 30, '~': 41, ';': 31, ':': 32, '?': 28, '^': 38}

refDict={0: ' ', 1: 'a', 2: 'b', 3: 'c', 4: 'd', 5: 'e', 6: 'f', 7: 'g', 8: 'h', 9: 'i',
         10: 'j', 11: 'k', 12: 'l', 13: 'm', 14: 'n', 15: 'o', 16: 'p', 17: 'q', 42:'\n',
         18: 'r', 19: 's', 20: 't', 21: 'u', 22: 'v', 23: 'w', 24: 'x', 25: 'y', 26: 'z', 43:' ',
         32: ':', 33: "'", 34: '@', 35: '#', 36: '$', 37: '%', 38: '^', 39: '&', 40: '*',
         41: '~', 27: '!', 28: '?', 29: ',', 30: '.', 31: ';'}

#switch1 reverses a list. It is its own inverse, so we don't need an unswitch function. 
def switch1(l):
    return l[::-1]

#switch2 takes a list as input and moves every fourth entry to the front
#so switch2([a,b,c,d,e,f,g]) returns ([a,e,b,c,d,f,g])
#unswitch2 undoes this, so unswitch2([a,e,c,d,f,g]) returns [a,b,c,d,e,f,g]

def switch2(l):
    List4 = []
    ListNot4 = []
    for i in range(0,len(l)):
        if i%4 == 0:
            List4.append(l[i])
        else:
            ListNot4.append(l[i])
    return List4+ListNot4

def unswitch2(l):
    num4 = len(l)/4 + 1
    fixedList = l[num4:]
    for i in range (0,num4):
        fixedList.insert(4*i,l[i])
    return fixedList

#switch3 takes a list as input and returns a list with the first half moved to the end.
#so switch3([a,b,c,d,e,f]) returns [d,e,f,a,b,c]
#for lists of odd length, switch3 puts the separation closer to the beginning of the list, so the
#middle entry becomes the first entry.
#For example, switch3([a,b,c,d,e,f,g]) returns [d,e,f,g,a,b,c]

def switch3(l):
    return l[len(l)/2:] + l[:len(l)/2]

def unswitch3(l):
    if len(l)%2==0:
        return switch3(l)
    else:
        return l[len(l)/2+1:] + l[:len(l)/2+1]

##################################
#This is the Crypt function.
##################################
def Crypt(text, cipher):
    counter=0
    text=text.lower()
    cipher=cipher.lower()
    keyValue=[]
    textValue=[]
    newValue=[]
    newString=''
    for letter in cipher:
        keyValue.append(keyDict[letter])

    for letter in text:
        textValue.append(refDict2[letter])

    for num in textValue:
        newValue.append(num+keyValue[counter%len(keyValue)])
        counter+=1

    newValue = switch1(newValue)
    newValue = switch2(newValue)
    newValue = switch3(newValue)

    for num in newValue:
        newString+=refDict[num%43]

    return newString

##################################
#This is the Decrypt function
##################################
def Decrypt(encryptedText, cipher):
    counter=0
    cipher=cipher.lower()
    keyValue=[]
    textValue=[]
    finalValue=[]
    finalString=''

    for letter in encryptedText:
        textValue.append(refDict2[letter])

    textValue = unswitch3(textValue)
    textValue = unswitch2(textValue)
    textValue = switch1(textValue)

    for letter in cipher:
        keyValue.append(keyDict[letter])

    for num in textValue:
        finalValue.append((num-keyValue[counter%len(keyValue)])%43)
        counter+=1

    for num in finalValue:
        finalString+=refDict[num]

    return finalString

##################################
#This is the user interface.
##################################

choice=raw_input('Would you like to: 1)Encrypt or 2)Decrypt?  Pick 1 or 2: ')

if choice=='1':
    textType=raw_input("Would you like to: 1)encrypt a text file or 2) input the text to be encrypted? Pick 1 or 2: ")

    if textType=='1':
        cryptName=raw_input( 'Please enter the name of the text file you would like to encrypt(eg. text.txt): ')
        newName=raw_input('Please name the file in which the encrypted text will be stored(eg. secret.txt):' )
        cipher=raw_input("Now enter your personal encryption key(eg. secret code):" )

        cryptFile=open(cryptName, 'r')
        newFile=open(newName, 'w')
        print >> newFile, Crypt(cryptFile.read(),cipher)
        cryptFile.close()
        newFile.close()
        print "Ok, all done!"
    elif textType=='2':
        inputText=raw_input('Ok, please input the text you would like to encrypt(eg. computers rock!): ')
        cipher=raw_input("Now enter your personal encryption key (eg. ultra secret code): ")
        if inputText=='': print 'Oops, no text was entered! Try again!'
        else:
            print Crypt(inputText, cipher)
    else:
        print 'Try again!'

elif choice=='2':
    textType=raw_input("Would you like to:1)decrypt a text file or 2) input the text to be decrypted? Pick 1 or 2: ")
    if textType=='1':
        decryptName=raw_input( 'Please enter the name of the text file you would like to decrypt(eg. text.txt): ')
        newName2=raw_input('Please name the file in which the decrypted text will be stored(eg. secret.txt):' )
        cipher=raw_input("Now enter the encryption key that was used to encrypt the file(eg. secret code):" )
        #Text decrypt
        decryptFile=open(decryptName, 'r')
        newFile2=open(newName2, 'w')
        print>> newFile2, Decrypt(decryptFile.read(),cipher)
        #other stuff
        #textTodecrypt=decryptFile.read()
        #newFile2.writelines(Decrypt(textTodecrypt, cipher))

        decryptFile.close()
        newFile2.close()
        print "Ok, all done!"

    elif textType=='2':
        inputText=raw_input('Ok, please input the text you would like to decrypt(eg. dig&ak:do): ')
        cipher=raw_input("Now enter the encryption key that was used to encrypt the text (eg. ultra secret code): ")
        if inputText=='': print 'Oops, no text was entered! Try again!'
        else:
            print Decrypt(inputText, cipher)

print "Have a nice day!"

#there is an issue with the newline character 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-12T15:38:21.043

'\n' 是一个字符。它是一个换行符，只是换行符的表示。

请以可读的方式重新表述您的问题。

[编辑] 我想我知道你的问题是什么。我运行了你的程序，它工作得很好。您可能正在尝试从命令行将 '\n' 传递给您的程序。那不管用！

你看，如果你给 raw_input() 这个字符串：`line1\nline2`它会转义`\n`并变成`\\n`这样：`'line1\\nline2'`

因此，一个快速的 hacky 解决方法是查找 '\\n' 并将其替换为 '\n'：

```
text.replace('\\n', '\n') 
```

我不喜欢这个。但它会为你工作。

更好的方法是读取多行，如下所示：

```
input = raw_input('Please type in something: ')
lines = [input]
while input:
    input = raw_input()
    lines.append(input)

text = '\n'.join(lines)

print text 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-12T15:56:59.953

我认为问题是如果要解密的文本中有 \n ，它会中断：

```
KeyError: \

module body   in untitled at line 166
function Crypt    in untitled at line 94 
```

基本上，`raw_input()`返回一个包含两个字符`\`和`n`- 的字符串，因此您没有映射`\`错误。

最简单的解决方案就是`\n`用`\n`转义序列替换文字字符

```
def Crypt(text, cipher):
    text.replace(r"\n", "\n")
    ... 
```

原始字符串`r"\n"`创建一个包含文字字符的字符串，`\`后跟`n`（与doing 相同`"\\n"`）。

在常规字符串`"\n"`中，它被视为换行符的转义序列。所以上面的代码块用`\n`换行符替换了文本。

您可能必须在映射中定义“\n”的`keyDict`映射。

另一种解决方案是使用分割文本`text.split(r"\n")`并分别处理每一行。或者正如其他人所建议的那样，使用[`ord()`](http://docs.python.org/library/functions.html#ord)每个字符并处理数字，而不是制作自己的数字映射。

> `ord(c)` 给定一个长度为 1 的字符串，当参数是 unicode 对象时，返回一个表示字符的 Unicode 代码点的整数，或者当参数是 8 位字符串时，返回字节的值。例如，`ord('a')`返回整数 97，`ord(u'\u2020')`返回 8224。这`chr()`对于 8 位字符串和`unichr()`unicode 对象是相反的。

正如文档解释的那样，[`chr()`](http://docs.python.org/library/functions.html#chr)相反，会将数字转换回 ASCII 或 Unicode 字符：

> `chr(i)` 返回一个字符的字符串，其 ASCII 码是整数 i。例如，`chr(97)`返回字符串 'a'。这是 的倒数`ord()`。参数必须在 [0..255] 范围内，包括在内；如果 i 超出该范围，将引发 ValueError。

基本上你会做..

```
def Crypt(text, cipher):
    keyvalue = [ord(x) for x in cipher)
    textvalue = [ord(x) for x in text] 
```

..而不是两个for循环（[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)基本上与制作列表相同，循环遍历文本或密码中的每个字符，每次都附加到列表中）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-12T15:40:18.497

我猜你真正的问题不在于将 \n 读取为 '\' 'n' - 在内部，Python 应该自动将 \n 转换为单个字符。

我的猜测是真正的问题是你的换行符实际上可能是两个字符——回车符（'\r'）和换行符（'\n'）。除了 \n 之外，尝试处理 \r，我想知道这是否不会让您的问题消失。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-12T15:44:14.530

换行符是单个字符。

```
>>> a = '\n'
>>> print len(a)
1
>>> a = '\n\n\n'
>>> a[1]
'\n'
>>> len(a)
3
>>> len(a[0])
1 
```

所以你误解了你的问题是什么。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-12T15:46:22.747

我是 Python 新手，但可以通过使用**ord**和**chr**函数将字符更改为 ASCII 值，反之亦然，从而简化您正在做的事情。这是[Python 中内置函数文档](http://docs.python.org/library/functions.html)的链接。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-12T15:41:53.580

您可能应该利用数字的数值来执行加密，并避免那些无论如何都会因非 ascii 文本而失败的大数据结构。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-26T19:05:06.900

用相应的 ASCII 字符替换通常的转义符的一种简单而快速的方法是使用以下`str.decode`方法：

```
>>> s = r'This string has\tsome\nescapes'
>>> s
'This string has\\tsome\\nescapes'
>>> s.decode('string-escape')
'This string has\tsome\nescapes'
>>> print s
This string has\tsome\nescapes
>>> print s.decode('string-escape')
This string has some
escapes 
```

# svn - Subversion 状态符号“~”是什么意思？

> ID：853405
> 
> 赞同：113
> 
> 时间：2009-05-12T15:36:49.503
> 
> 标签：svn, xcode, status

当我执行`svn status`.

这是在 XCode 中编辑后项目的输出。

```
svn status
M      build/Currency_Converter.build/Currency_Converter.pbxindex/imports.pbxbtree
M      build/Currency_Converter.build/Currency_Converter.pbxindex/pbxindex.header
M      build/Currency_Converter.build/Currency_Converter.pbxindex/symbols0.pbxsymbols
~      build/Currency_Converter.build/Currency_Converter.pbxindex/strings.pbxstrings
M      main.m
//more changed files 
```

知道这意味着什么吗？似乎无法在谷歌或任何 svn 备忘单上找到它。

有趣的是，我只编辑了 main.m，但是有很多修改过的文件。我不知道为什么会这样。有人对使用 SVN 和 XCode 有任何提示吗？我应该只将我的源文件置于版本控制之下吗？

**编辑：**由已经在版本控制下的文件被另一种类型的文件替换引起的。在这种情况下，strings.pbxstrings 曾经是一个文件，现在变成了一个目录。故事的寓意是不要将您的构建文件夹放入版本控制中。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2009-05-12T15:38:08.157

[SVN 书](http://svnbook.red-bean.com/en/1.8/svn.ref.svn.c.status.html)说：

> 项目被版本化为一种对象（文件、目录、链接），但已被不同类型的对象替换。

所以也许它最初是一个文件，但是你把它改成了一个目录，或者类似的东西？

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2011-11-09T06:13:12.953

这是我所做的：

如果文件夹是测试

1.  mv 测试测试1
2.  svn 删除测试
3.  mv Test1 测试

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-05-12T15:39:58.560

从

```
svn help status 
```

'~' 版本化的项目被不同类型的项目阻碍

我只看到文件权限已更改且 svn 对它没有执行访问权限的地方，我相信。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-06-06T13:09:48.197

```
svn delete --keep-local x
svn commit -m "del x"
svn add x
svn commit -m "blah" 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2009-09-04T16:33:07.040

解决此问题的最简单方法是备份，然后删除具有此状态的文件夹或文件，然后执行“svn up”：它不一定是由文件替换的文件夹，可能只是 .svn 文件夹丢失或损坏.

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2010-12-30T01:06:55.527

当您删除文件夹中的 .svn 文件夹时（例如，当您删除一个目录，然后再次创建相同的目录时），或者当您将目录替换为符号链接或具有相同名称的文件时，可能会发生这种情况.

假设它是一个名为 a-folder 的文件夹，您可以通过在父文件夹中发出以下命令来解决此问题：

```
$ find a-folder -type d -name '.svn' -print0 | xargs -0 rm -Rf
$ svn up --force .
svn: Directory 'logs/.svn' containing working copy admin area is missing
$ svn up --force .
E    a-folder
...
Updated to revision n. 
```

然后是 svn 添加/删除并再次提交更改的问题

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-01-04T22:03:19.193

有一个类似的问题，SVN 抱怨锁。这是我们所做的：

*   备份了文件
*   使用 rm -r (linux) 删除了有问题的目录
*   在目录上运行**svn** cleanup
*   在目录上运行**svn up** --force

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-05-24T20:49:15.337

我只想分享这是在 Joomla 中安装扩展时经常遇到的问题。扩展是通过 CMS 安装的，并且归 apache 所有，没有组写入。通常下一步是将文件添加到 SVN，但如果您不 sudo 或更改文件权限，则 SVN 在无法写入 .svn 目录时会失败。这是简单的解决方案。

```
mv foo foo-bak
svn up foo
svn revert foo

# just for good measure. Foo should not show up in the two following commands.
ls | grep foo
svn st | grep foo

mv foo-bak foo
svn add foo 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-11-09T14:58:11.477

这也可能是 Windows 下的符号链接问题。当您将符号链接提交到 SVN 并在 Windows 下检查它时，链接将更改为常规文件，这也报告为 ~。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-05-17T10:25:57.747

我在升级（例如）Joomla!、Wordpress 或 Drupal 下的模块时经常遇到这种情况。有时 .svn 目录会被升级过程删除。

```
# rename updated directory
mv foo foo.new

# restore the old directory
svn up foo

# merge / update the old directory with new items
# notice that the above command will preserve the obsolete files
# so you should do a diff -r in order to remove them
cp -r foo.new/* foo

# Add files commit, etc
svn add foo/*
svn delete foo/xx
svn commit -m "updated module" 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-07-08T10:19:30.120

```
~ versioned item obstructed by some item of a different kind
    Second column: Modifications of a file's or directory's properties 
```

# python - 奇怪的蟒蛇行为

> ID：853407
> 
> 赞同：7
> 
> 时间：2009-05-12T15:36:58.083
> 
> 标签：python, ipython

我很无聊，正在玩 ipython 控制台，遇到了以下我不太明白的行为

```
In [1]: 2**2
Out[1]: 4

In [2]: 2**2**2
Out[2]: 16

In [3]: 2**2**2**2
Out[3]: 65536

In [4]: 2**2**2**2**2 
```

[4] 的答案*不是*4294967296L，这是一个很长的数字，但我真的不知道为什么。

该号码可以在这里找到：http: [//pastie.org/475714](http://pastie.org/475714)

（Ubuntu 8.10、python 2.5.2、ipython 0.8.4）
（Mac OS X 10.5.6、Python 2.5.1）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-12T15:42:53.783

Python 在数学幂运算上从右到左。例如，IN[2] 正在做：

2**(4) = 16

IN[3] = 2 **2** 2 **2 = 2** 2**(4) = 2**16 = 65536

如果要从左到右计算，则需要括号。OUT[4] 没有输出你想要的答案的原因是因为这个数字是天文数字，Python 无法打印出来。

2^65536 = 非常巨大

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-12T15:44:27.243

** 运算符的优先级使评估从右到左进行（而不是预期的从左到右）。换句话说：

```
2**2**2**2 == (2**(2**(2**2))) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-12T15:45:34.213

这是因为 Python 中的优先顺序导致该等式从右到左进行计算。

```
>>> 2**2
4
>>> 2**2**2
16
>>> 2**(2**2)
16
>>> 2**2**2**2
65536
>>> 2**2**(2**2)
65536
>>> 2**(2**(2**2))
65536
>>> 2**2**2**2**2
57896044618658097711785492504343953926634992332820282019728792003956564819968L
>>> 2**2**2**(2**2)
57896044618658097711785492504343953926634992332820282019728792003956564819968L
>>> 2**2**(2**(2**2))
57896044618658097711785492504343953926634992332820282019728792003956564819968L
>>> 2**(2**(2**(2**2)))
57896044618658097711785492504343953926634992332820282019728792003956564819968L
>>> 2**255
57896044618658097711785492504343953926634992332820282019728792003956564819968L 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-12T20:15:14.070

正如其他答案已经说过的那样，这是因为`**`从右到左评估。这是[文档链接](http://docs.python.org/reference/expressions.html#summary)，其中描述了所有优先级。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-12T15:46:16.757

从右到左评估，让我们看一下 Python 为获得这些答案所经历的步骤：

```
2**2
4

2**(2**2)
2**(4)
16

2**(2**(2**2))
2**(2**(4))
2**(16)
65536

2**(2**(2**(2**2)))
2**(2**(2**(4)))
2**(2**(16))
2**(65536)
2.0035299304068464649790723515603e+19728 
```

# sql - 如何使用 SQL 查找表中的第一列和第一行

> ID：853409
> 
> 赞同：2
> 
> 时间：2009-05-12T15:37:13.010
> 
> 标签：sql, mysql, database, oracle

我被问到这个问题，但无法得出答案。

有没有办法在表格的第一行和第一列找到条目？

（在矩阵表示法中，这将是`[1,1]th`位置）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-12T15:40:00.213

简而言之：关系表不是矩阵。

在关系世界中，`1'st row`仅当您在数据集上定义某些顺序时才有意义。没有“隐式第一记录”这样的东西。

假设您根据第一列的值对行进行排序，那就是：

```
SELECT  column1
FROM    table
ORDER BY
        column1
LIMIT 1 
```

另请注意，表中不同的列属于不同的`domains`.

`relation`拥有表的目的是在这些之间定义一些`domains`，这就是为什么整个事情被称为“关系数据库”，而表本身有时也被称为“关系”。

列顺序在关系表中也没有特殊含义。

假设您总是按名称引用列。

如果替换列的顺序会影响查询的结果，则认为这是一个糟糕的设计。

`SELECT *`有和之类的东西`ORDER BY 1`，但通常应该避免使用它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T20:48:37.013

有很多与问题的“第一行”部分相关的良好反馈。但就“第一列”而言，您可以尝试以下选项之一：

1.  您可以使用数据库数据字典来获取表的第一列。例如，在 Oracle 中，查询将是：

    > ```
    > select column_name  
    > from   user_tab_columns 
    > where  table_name='YOUR_TABLE_NAME' 
    > and    column_id=1 
    > ```

2.  如果您使用 JDBC 或其他一些数据库访问 API，则这些 API 中的大多数都允许您这样做`"select *"`，然后您可以通过访问结果集的零（或第一个）元素来获取第一列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T15:42:03.190

从概念上讲，SQL 表是无序的。您需要指定要排序的列，以便“第一行”的想法有意义。

如果您的 DBMS 支持 LIMIT，这很容易。

```
SELECT * FROM table ORDER BY column LIMIT 1 
```

否则，您可以使用 TOP，但如果您的 order by column 顶部项目的值重复，您可能会得到比您要求的更多的行（取决于您的 DBMS，在 MS-SQL 中，除非您指定 WITH，否则它不会这样做领带）。

```
SELECT TOP 1 * FROM Table ORDER BY column 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T15:43:54.793

关系表没有定义的行顺序，因此没有第一行。您当然可以使用`LIMIT`数据库提供的任何等效项从查询中选择第一个结果。

当您在没有有序游标的情况下运行查询时，一些使用 ISAM 类型表的数据库似乎会返回一致的行顺序，但删除和插入很容易改变这种情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T15:41:34.690

```
Select top 1 Column1
From MyTable
Order by Column1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-12T17:10:16.120

如果您要查找输入到表中的第一条记录，那么您需要在创建表时设置一个 DateEntered 字段，然后您可以通过搜索最早的日期来找到第一条记录。如果您有身份字段，则对身份字段进行排序是获取较早记录的一种方法，但您不能真正保证创建 ID 1 的事务确实比生成 ID 2 的事务更早插入到表中。您只知道该事务先开始，不先完成。使用日期字段是真正确定的唯一方法。多年来，我学会了为这些东西设计，你以后不能查询你一开始没有存储的信息。

# c# - 如何创建自定义 DataGridViewCell

> ID：853414
> 
> 赞同：1
> 
> 时间：2009-05-12T15:37:39.110
> 
> 标签：c#, winforms, datagridview

我正在研究一个网格视图，它将显示其中包含一些控件的单元格。例如，一个单元格将有三个或四个标签，可能还有一个颜色选择器。这些标签的值可以是数据绑定的。

我假设我需要创建一个自定义 DataGridViewCell 但我很难找到讨论这种类型的自定义单元格的文档。大多数示例演示了如何使用其他类型的 DataGridViewCell（如 DataGridViewImageCell）来扩展 DataGridViewCell。

有没有人有从 DataGridViewCell 派生的自定义单元格类的示例？

这是我试图在paint.Net中绘制这个单元格的可怕尝试。希望在你笑完之后，你会对我正在尝试构建的自定义单元有所了解。[替代文字 http://lh3.ggpht.com/_UxHcYyy8tU8/SgmTd1MqUOI/AAAAAAAAAnU/lO2bE7-gvpg/s800/DataGridViewCell.png](http://lh3.ggpht.com/_UxHcYyy8tU8/SgmTd1MqUOI/AAAAAAAAAnU/lO2bE7-gvpg/s800/DataGridViewCell.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T14:18:06.660

我想了更多，我发现我的方法是错误的。DataGridView 对在编辑模式下添加用户控件有很好的支持，但我正在创建的视图旨在始终是交互式的，并且可能不适合 DataGridView。

我想出的解决方案是使用 TableLayoutPanel。这个控件对我来说非常有用，因为你可以很好地控制它的呈现方式，并且很容易在其中嵌套控件。

也许我提出的问题需要稍微调整一下，因为我排除的解决方案解决了我的问题，但并没有真正回答问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T17:56:03.707

如果单元格视图布局是静态的，则在单元格中托管用户控件可能是合适的。

# python - 我应该如何存储从 Django 调用的长时间运行的进程的状态？

> ID：853421
> 
> 赞同：5
> 
> 时间：2009-05-12T15:39:05.520
> 
> 标签：python, django, asynchronous, amazon-s3, pyro

我正在开发一个允许用户上传文件的 Django 应用程序。[在将它们发送到Amazon S3](http://aws.amazon.com/s3/)之前，我需要对这些文件执行一些服务器端处理。在阅读了对[这个问题](https://stackoverflow.com/questions/219329/django-fastcgi-how-to-manage-a-long-running-process)的回复和[这篇博文之后](http://iraniweb.com/blog/?p=56)，我决定处理这个问题的最佳方式是让我的视图处理程序调用[Pyro](http://pyro.sourceforge.net/)远程对象上的一个方法来异步执行处理，然后立即向客户端返回一个 Http 200 . 我有这个原型，它似乎运行良好，但是，我还想存储处理状态，以便客户端可以轮询应用程序以查看文件是否已被处理并上传到 S3。

我可以很容易地处理轮询，但我不确定存储进程状态的适当位置。它需要可由 Pyro 进程写入，并且可由我的轮询视图读取。

*   我很犹豫是否将列添加到数据库中以获取实际上应该只持续 30 到 60 秒的数据。
*   我考虑过使用 Django 的[低级缓存 API](http://docs.djangoproject.com/en/dev/topics/cache/#the-low-level-cache-api)并使用文件 id 作为键，但是，我不相信这真的是缓存框架的设计目的，我不确定可能会出现什么不可预见的问题这条路线。
*   最后，我考虑过将状态存储在 Pyro 对象中进行处理，但看起来我仍然需要添加一个布尔“processing_complete”数据库列，以便视图知道是否从 Pyro 对象查询状态。

当然，从数据库中解耦状态也存在一些数据完整性问题（如果服务器出现故障并且所有这些数据都在内存中会发生什么？）。我想知道更多经验丰富的 Web 应用程序开发人员将如何处理这种有状态的处理。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T16:12:37.977

我们通过在数据库中有一个“请求”表来做到这一点。

当上传到达时，我们创建上传的 File 对象，并创建一个 Request。

我们启动后台批处理器。

我们返回一个 200“我们正在处理它”页面——它显示了请求及其状态。

我们的批处理器使用 Django ORM。完成后，它会更新 Request 对象。我们可以（但不能）发送电子邮件通知。大多数情况下，我们只是更新状态，以便用户可以再次登录并看到处理已完成。

* * *

批处理服务器架构说明。

它是一个在端口上等待批处理请求的 WSGI 服务器。请求是一个带有 ID 号的 REST POST；批处理器在数据库中查找并处理它。

服务器由我们的 REST 接口自动启动。如果它没有运行，我们生成它。这使得用户事务看起来很慢，但是，哦，好吧。它不应该崩溃。

此外，我们有一个简单的 crontab 来检查它是否正在运行。最多在“你还活着吗？”之间下降30分钟。检查。我们没有正式的启动脚本（我们在 Apache 下使用 mod_wsgi 运行），但我们可以创建一个“重新启动”脚本，该脚本会触及 WSGI 文件，然后对执行健康检查的 URL 执行 POST（并启动批处理器）。

当批处理服务器启动时，可能有未处理的请求，它从未获得过 POST。因此，默认启动是将所有工作从请求队列中拉出——假设它可能遗漏了一些东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-12-14T07:06:12.197

我知道这是一个老问题，但即使过了这么久，有人可能会发现我的答案很有用，所以就这样吧。

您当然可以将数据库用作队列，但也有专门为此目的开发的解决方案。

[AMQP](http://www.amqp.org/)就是为此而生的。与[Celery](http://ask.github.com/celery/introduction.html)或[Carrot以及](http://github.com/ask/carrot)[RabbitMQ](http://www.rabbitmq.com/)或[ZeroMQ](http://www.zeromq.org/)等代理服务器一起使用。

这就是我们在最新项目中使用的，并且效果很好。

对于您的问题，Celery 和 RabbitMQ 似乎是最合适的。RabbitMQ 提供消息的持久性，Celery 提供简单的轮询视图以检查并行运行的进程的状态。

您可能还对[octopy](http://code.google.com/p/octopy/)感兴趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T18:13:47.187

因此，这是您需要的作业队列。对于您的情况，我绝对会使用数据库来保存状态，即使这些状态是短暂的。听起来这将满足您的所有要求，并且实施起来并不难，因为您已经拥有了所有可用的移动部件。保持简单，除非你*需要*更复杂的东西。

如果您需要更强大或更复杂的东西，我会看类似[Gearman](http://www.gearman.org)的东西。

# asp.net - ASP.NET RewritePath 未按预期工作/浏览器中的 URL 更改

> ID：853440
> 
> 赞同：3
> 
> 时间：2009-05-12T15:41:17.450
> 
> 标签：asp.net, wcf, rest

当我尝试在 ASP.NET 中重写 URL 时，我发现用户浏览器上的 URL 发生了变化。我正在使用 WCF REST 服务，并且我想更改您访问 URL 的方式。请参阅下面的代码示例。

我有一个拦截请求的 HttpModule。

```
public class FormatModule : IHttpModule
{
    #region IHttpModule Members

    public void Dispose()
    {
        throw new NotImplementedException();
    }

    public void Init(HttpApplication application)
    {
        application.BeginRequest += new EventHandler(application_BeginRequest);
    }

    void application_BeginRequest(object sender, EventArgs e)
    {
        HttpContext context = HttpContext.Current;
        if (context.Request.RawUrl.Contains(".pox")) 
            context.RewritePath("~/Lab1Service.svc?format=pox", false);
        else if (context.Request.RawUrl.Contains(".json")) 
            context.RewritePath("~/Lab1Service.svc?format=json", false);
    }

    #endregion
} 
```

当用户在浏览器中访问 URL 时，就会出现问题。

[http://localhost/Lab1Service.svc.pox](http://localhost/Lab1Service.svc.pox)，而不是浏览器中的 URL 更改为[http://localhost/Lab1Service.svc?format=pox](http://localhost/Lab1Service.svc?format=pox)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-08-26T21:35:54.840

更有可能 IIS 管道没有通过 ASP.NET 管道路由所有 URL。因此，它会看到 .pox 或 .svc 扩展名，然后将其传递给通用的静态文件处理程序。

您的“修复”实际上隐藏了扩展，因此它通过完整的 .NET 管道进行路由。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T19:24:12.203

我解决了这个问题。看来，如果您在 .svc 扩展名之后不包含尾随反斜杠，则 URL REDIRECTS 而不是 REWRITING。

这是我的原创

```
context.RewritePath("~/Lab1Service.svc?format=pox", false);
```

这是更正的版本（注意 .svc 后的正斜杠）

```
context.RewritePath("~/Lab1Service.svc/?format=pox", false);
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T15:56:33.340

我在我的重写器中使用另一个上下文，也许问题出在这个

```
public void Init(HttpApplication context){application = context;} 
```

初始化 HttpApplication 上下文，然后重写路径

```
application.Context.RewritePath(rewritedUrl, Config.RebasePath); 
```

# wcf - 带有流的 WCF 块数据

> ID：853448
> 
> 赞同：3
> 
> 时间：2009-05-12T15:42:52.957
> 
> 标签：wcf, asynchronous, chunking

嗨，我需要将块数据从 WCF 服务传递给客户端。我有一个包含 1600 万条记录的表，因此，当客户端从该表请求数据时，我打开该表的数据读取器并序列化并将每条记录发送给客户端，这是我的方法签名..

```
public AsyncResult FindAsync(AsyncRequest request) 
```

其中 AsyncResult 和 AsyncRequest 是 MessageContract，AsyncResult 中有一个流。问题是当客户端调用metod时我的函数不会返回，直到所有数据都没有写入服务器的流中......是否可以改变这种行为或者我必须使用回调？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T15:49:47.610

是的，您可以进行[流式传输](http://msdn.microsoft.com/en-us/library/ms731913.aspx)。查看[idesign.net 上的“流式传输”示例](http://idesign.net/idesign/DesktopDefault.aspx?tabindex=5&tabid=11#Operations)。我相信它显示了您想要做的事情的一个例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-14T06:34:16.113

我在这里找到了很好的解决方案 [http://weblogs.asp.net/cibrax/archive/2008/06/10/streaming-large-content-with-wcf-and-deferred-execution.aspx#6288340](http://weblogs.asp.net/cibrax/archive/2008/06/10/streaming-large-content-with-wcf-and-deferred-execution.aspx#6288340)

# php - 从 Wikipedia 获取信息 - 如何获取 HTML 表单？

> ID：853450
> 
> 赞同：2
> 
> 时间：2009-05-12T15:42:56.777
> 
> 标签：php, zend-framework, wikipedia

我正在使用 curl 从维基百科检索信息。到目前为止，我已经成功地检索了基本的文本信息，但我真的很想用 HTML 检索它。

这是我的代码：

```
$s = curl_init();       

$url = 'http://boss.yahooapis.com/ysearch/web/v1/site:en.wikipedia.org+'.$article_name.'?appid=myID';
curl_setopt($s,CURLOPT_URL, $url);
curl_setopt($s,CURLOPT_HEADER,false);
curl_setopt($s,CURLOPT_RETURNTRANSFER,1);

$rs = curl_exec($s);

$rs = Zend_Json::decode($rs);

$rs = ($rs['ysearchresponse']['resultset_web']);

$rs = array_shift($rs);
$article= str_replace('http://en.wikipedia.org/wiki/', '', $rs['url']);

$url = 'http://en.wikipedia.org/w/api.php?';
$url.='format=json';
$url.=sprintf('&action=query&titles=%s&rvprop=content&prop=revisions&redirects=1', $article);

curl_setopt($s,CURLOPT_URL, $url);
curl_setopt($s,CURLOPT_HEADER,false);
curl_setopt($s,CURLOPT_RETURNTRANSFER,1);

$rs = curl_exec($s);
//curl_close( $s );
$rs = Zend_Json::decode($rs);

$rs = array_pop(array_pop(array_pop($rs)));
$rs = array_shift($rs['revisions']);
$articleText = $rs['*']; 
```

但是，以这种方式检索的文本不足以显示:(它都是这种格式

> '''Aix-les-Bains''' 是 [[Savoie]] [[Departments of France|department]] 中 [[Rhône-Alpes]] [[regions] 中的 [[Communes of France|commune]]法国|地区]]在东南部[[法国]]。
> 
> 它位于 [[Lac du Bourget]] 附近，{{convert|9|km|mi|abbr=on}} 位于 [[Chambéry]] 以北的铁路旁。
> 
> ==History== ''Aix'' 源自 [[Latin]] ''Aquae''（字面意思是“水域”；''cf'' [[Aix-la-Chapelle]] (Aachen) 或 [[Aix -en-Provence]]），而艾克斯在[[罗马帝国]]期间是一个浴池，甚至在它被改名为“Aquae Gratianae”以纪念在不远处被暗杀的[[Emperor Gratian]]之前，在 [[里昂]]，在 [[383]]。许多罗马遗迹幸存下来。[[图片：IMG 0109 Lake Promenade.jpg|thumb|left|Lac du Bourget Promenade]]

如何获取维基百科文章的 HTML？

* * *

**更新：**谢谢，但我对这里有点陌生，现在我正在尝试运行 xpath 查询 [尽管是第一次]，但似乎无法获得任何结果。我实际上需要在这里知道几件事。

1.  我如何只请求文章的一部分？
2.  如何获取所请求文章的 HTML。

我浏览了来自维基百科的关于数据挖掘的这个[url](http://www.slideshare.net/neilcrosby/mining-wikipedia-for-awesome-data-presentation) - 它提出了一个想法，即使用检索到的维基百科文本作为参数向 wikipedia api 发出第二个请求，这将检索 html - 尽管到目前为止它似乎还没有工作:( -我不想把整篇文章当作一团乱七八糟的 html 来抓取并转储它。基本上我的应用程序所做的是你在地图上有一些位置和城市大头针指向 - 你点击城市标记，它会请求通过 ajax 显示城市的详细信息在相邻的 div 中。我希望从维基百科动态获取这些信息。我会担心稍后处理特定城市不存在的文章，只需要确保它在这一点上工作。

有谁知道一个很好的工作示例，它可以完成我正在寻找的工作，即阅读和解析维基百科文章的选定部分。

* * *

根据提供的 url - 它说我应该将 wikitext 发布到 wikipedia api 位置，以便它返回解析的 html。问题是，如果我发布信息，我没有得到任何响应，而是一个我被拒绝访问的错误 - 但是，如果我尝试将 wikitext 包含为 GET，它会毫无问题地解析。但是当我有太多文本需要解析时，它当然会失败。

这是维基百科api的问题吗？因为我已经破解了两天了，一点运气都没有:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T16:54:59.780

最简单的解决方案可能是抓取页面本身（例如[http://en.wikipedia.org/wiki/Combination](http://en.wikipedia.org/wiki/Combination)），然后提取 的内容`<div id="content">`，可能使用 xpath 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T15:50:30.633

据我了解，当页面被请求时，Wikipedia 软件会将 Wiki 标记转换为 HTML。因此，使用您当前的方法，您需要处理结果。

[Mediawiki API](http://www.mediawiki.org/wiki/API)是一个很好的起点。您还可以使用[http://pear.php.net/package/Text_Wiki](http://pear.php.net/package/Text_Wiki)来格式化通过 cURL 检索到的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T15:53:17.323

尝试查看相关维基百科文章的[可打印版本](http://en.wikipedia.org/w/index.php?title=Aix-les-Bains&printable=yes)。

换句话说，更改源代码的这一行：

```
$url.=sprintf('&action=query&titles=%s&rvprop=content&prop=revisions&redirects=1', $article); 
```

类似于：

```
$url.=sprintf('&action=query&titles=%s&printable=yes&redirects=1', $article); 
```

免责声明：尚未测试，这只是对您的 API 可能如何工作的猜测。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T15:55:03.123

我使用了一个 PEAR Wiki Filter，它做得非常好。

[文字维基](http://pear.php.net/package/Text_Wiki)

菲尔

# linux - find 命令的“exec”功能可以在后台启动程序吗？

> ID：853451
> 
> 赞同：2
> 
> 时间：2009-05-12T15:42:57.730
> 
> 标签：linux, bash, unix

我想做类似的事情：

```
find . -iname "*Advanced*Linux*Program*" -exec kpdf {} & \; 
```

可能的？还有其他可比的方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-12T15:59:04.207

首先，它不会像您键入的那样工作，因为 shell 会将其解释为

```
find . -iname "*Advanced*Linux*Program*" -exec kpdf {} &
\; 
```

这是在后台无效`find`运行，后跟一个不存在的命令。

即使转义它也不起作用，因为`find -exec`实际上是`exec`s 给出的参数列表，而不是把它给一个 shell（这是实际处理`&`背景的东西）。

一旦你知道这**是**问题所在，你所要做的就是启动一个 shell 来给这些命令：

```
find . -iname "*Advanced*Linux*Program*" -exec sh -c '"$0" "$@" &' kpdf {} \; 
```

* * *

另一方面，鉴于您正在尝试做的事情，我会建议其中一个

```
find ... -exec kfmclient exec {} \;  # KDE
find ... -exec gnome-open {} \;      # Gnome
find ... -exec xdg-open {} \;        # any modern desktop 
```

这将在与您的桌面环境关联的默认程序中打开文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-14T14:22:49.357

如果您的目标只是不必关闭一个 pdf 即可查看下一个，而不是在单独的实例中显示每个 pdf，您可以尝试

```
find . -iname "*Advanced*Linux*Program*" -exec kpdf {} \+ & 
```

使用 plussed 变体，-exec 像 xargs 一样构建命令行，因此找到的所有文件都将交给同一个 kpdf 实例。最后的 & 会影响整个查找。发现大量文件后，由于命令行太长，它可能仍会分批打开它们，但就系统上的资源消耗而言，这甚至可能是一件好事。;)

kpdf 必须能够在命令行上获取文件列表才能使其工作，因为我自己不使用它我不知道这一点。

# c# - 在 C# Visual Studio 2005 中将复选框动态添加到 dataGrid

> ID：853458
> 
> 赞同：0
> 
> 时间：2009-05-12T15:44:05.247
> 
> 标签：c#, asp.net

我有一个dataGrid（不是dataGridView），我需要在第一列动态添加复选框。我怎样才能做到这一点。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-12T16:22:47.180

以下使用 GridView 进行操作，我相信 DataGrid 也是如此。

只需添加一个模板列。（您可以在源代码中或通过 GUI 执行此操作）。然后在 ItemTemplate 中添加一个 checkbod：

```
 <Columns>
        <asp:TemplateField>
            <HeaderTemplate>
                Retry
            </HeaderTemplate>
            <ItemTemplate>
                <asp:CheckBox ID="CheckBox1" runat="server" />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns> 
```

附言。如果您使用的是 2.0+，可能需要考虑放入 GridView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T16:42:15.433

如果数据网格已经有列，我不相信您可以将它们动态添加到第一列，因为它只会使用 Add 方法将新列附加到数据网格，使其成为最后一列：

```
CheckBoxColumn checkCol = new CheckBoxColumn();
DataGrid1.Columns.Add(checkCol); 
```

但要动态添加它们，您可以按照 CodeProject 中的这些步骤[将 CheckBox 列添加到 DataGrid](http://www.codeproject.com/KB/webforms/datagridcheckbox.aspx)

**或者**

如果您仍然希望它们在第一列中的外观，那么您可以在客户端代码中创建它们并将它们的可见属性设置为 false，当您在后面的代码中满足条件时，将属性设置为 true，这给出它是动态创建的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T02:44:58.423

在为 DataGrid 的每一行触发的 ItemDataBound 事件中，您可以动态地将控件添加到第一个单元格。更容易使用 TemplateColumn，但如果您想按照您的要求动态地执行它，这就是我的做法。

```
private void DataGrid1_ItemDataBound(object sender, 
                 System.Web.UI.WebControls.DataGridItemEventArgs e) 
{
    if ((e.Item.ItemType == ListItemType.AlternatingItem) || 
                 (e.Item.ItemType == ListItemType.Item)) 
    {
        CheckBox chk = new Checkbox();
        e.Item.Cells[0].Controls.Add(chk);
    } 
```

# ios - 以编程方式从 iPhone 检索运营商名称

> ID：853467
> 
> 赞同：48
> 
> 时间：2009-05-12T15:46:06.070
> 
> 标签：ios, networking, core-telephony, carrier

有没有办法以编程方式了解 iPhone 上的手机运营商？

我正在寻找 iPhone 连接的运营商名称。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2010-10-16T07:51:14.153

在 iOS 4 中，CoreTelephony 框架是可用的，这是获取运营商名称的片段：

```
CTTelephonyNetworkInfo *netinfo = [[CTTelephonyNetworkInfo alloc] init];
CTCarrier *carrier = [netinfo subscriberCellularProvider];
NSLog(@"Carrier Name: %@", [carrier carrierName]);
[netinfo release]; 
```

链接到 CoreTelephony 并包含在您的标题中：

```
#import <CoreTelephony/CTTelephonyNetworkInfo.h>
#import <CoreTelephony/CTCarrier.h> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2011-05-19T13:09:04.153

只是在这里做个说明..我在不同的 SIM 上测试了这个 API，似乎 iPhone 锁定的运营商的名称返回了 [carrer carrierName]！

我在 2 部 iPhone 上进行了测试，一部被锁定，另一部未锁定，对于锁定的一部，无论 SIM 提供商如何，它都会在我每次运行我的测试应用程序时返回它被锁定的运营商的名称。但是请注意，跨国公司确实发生了变化！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-13T13:23:24.673

对于 swift 用户，您可以尝试以下操作：

```
import CoreTelephony

static var carrierName:String? {
    let networkInfo = CTTelephonyNetworkInfo()
    let carrier = networkInfo.subscriberCellularProvider
    return carrier?.carrierName
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-12T17:45:41.583

没有用于获取运营商名称的公共 API。如果您不需要在 App Store 上发布，您可以考虑使用私有 api。

[`VVCarrierParameters.h`](http://ericasadun.com/iPhoneDocs220/_v_v_carrier_parameters_8h-source.html)在 VisualVoiceMail 包中似乎有一个`carrierServiceName`可能是您需要的类方法。将该标题放在您的项目中并调用`[VVCarrierParameters carrierServiceName]`.

*请注意，如果您这样做，您的应用很可能会被拒绝*。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-01T16:34:34.097

*在开发[Alpha](https://github.com/legoless/Alpha)时，我遇到了同样的问题。该项目本身不仅限于使用公共 API，所以首先我尝试了 @Jason Harwig 的解决方案。因为我无法让它工作，我想到了另一种选择。*

**我的解决方案使用私有 API 来访问状态栏中显示`_serviceString`的标签 ( ) 的 ivar 。`UIStatusBarServiceItemView`**

它依赖于具有载体值的状态栏，只需要`UIKit`工作。

```
- (NSString *)carrierName
{
    UIView* statusBar = [self statusBar];

    UIView* statusBarForegroundView = nil;

    for (UIView* view in statusBar.subviews)
    {
        if ([view isKindOfClass:NSClassFromString(@"UIStatusBarForegroundView")])
        {
            statusBarForegroundView = view;
            break;
        }
    }

    UIView* statusBarServiceItem = nil;

    for (UIView* view in statusBarForegroundView.subviews)
    {
        if ([view isKindOfClass:NSClassFromString(@"UIStatusBarServiceItemView")])
        {
            statusBarServiceItem = view;
            break;
        }
    }

    if (statusBarServiceItem)
    {
        id value = [statusBarServiceItem valueForKey:@"_serviceString"];

        if ([value isKindOfClass:[NSString class]])
        {
            return (NSString *)value;
        }
    }

    return @"Unavailable";
}

- (UIView *)statusBar
{
    NSString *statusBarString = [NSString stringWithFormat:@"%@ar", @"_statusB"];
    return [[UIApplication sharedApplication] valueForKey:statusBarString];
} 
```

我只使用状态栏可见的应用程序测试了该方法。它返回与状态栏中显示的字符串相同的字符串，因此即使在漫游时也能正常工作。

*这种方法不是 App Store 安全的。*

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-30T08:56:09.337

如果 Core Telephony 返回“运营商”，则从状态栏中获取**运营商名称**

```
func getCarrierName() -> String? {

    var carrierName: String?

    let typeName: (Any) -> String = { String(describing: type(of: $0)) }

    let statusBar = UIApplication.shared.value(forKey: "_statusBar") as! UIView

    for statusBarForegroundView in statusBar.subviews {
        if typeName(statusBarForegroundView) == "UIStatusBarForegroundView" {
            for statusBarItem in statusBarForegroundView.subviews {
                if typeName(statusBarItem) == "UIStatusBarServiceItemView" {
                    carrierName = (statusBarItem.value(forKey: "_serviceString") as! String)
                }
            }
        }
    }
    return carrierName
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-07T11:05:18.803

对于 Swift 和 ios 12.0 < 执行以下操作：

导入核心电话

```
static var carrierName:String? {
    CTTelephonyNetworkInfo().serviceSubscriberCellularProviders?.first?.value.carrierName ?? ""
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-08-19T12:49:04.110

[https://developer.apple.com/iphone/prerelease/library/documentation/NetworkingInternet/Reference/CTCarrier/Reference/Reference.html#//apple_ref/doc/uid/TP40009596-CH1-DontLinkElementID_3](https://developer.apple.com/iphone/prerelease/library/documentation/NetworkingInternet/Reference/CTCarrier/Reference/Reference.html#//apple_ref/doc/uid/TP40009596-CH1-DontLinkElementID_3)

有这样一种方式，但它仅在 iOS 4 上可用，因此您将无法在以前的版本上使用它。这也可能会破坏您的向后兼容性。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-02T09:43:06.350

当您打印运营商的输出时？.description

这是你看到的：

[\"0000000100000001\": CTCarrier (0x2803a1980) {\n\t运营商名称：[Vodafone]\n\t移动国家代码：[214]\n\t移动网络代码：[01]\n\tISO国家代码：[es ]\n\t允许 VOIP？[是]\n}\n]

格式化（\n 和 \t）：

```
[\"0000000100000001\": CTCarrier (0x2803a1980) {
    Carrier name: [Vodafone]
    Mobile Country Code: [214]
    Mobile Network Code:[01]
    ISO Country Code:[es]
    Allows VOIP? [YES]
}
] 
```

所以从状态栏中获取运营商名称是一个不错的选择（至少对我来说）

我的意思是“codethemall”用户的回答。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-19T15:55:59.647

更重要的评论。只需添加有关以下内容的[文档](https://developer.apple.com/documentation/coretelephony/ctcarrier/1620313-carriername)`carrierName`：

> 运营商提供此字符串，对其进行格式化以呈现给用户。*如果用户正在漫游*，该值不会改变；它始终代表用户拥有帐户的提供商。
> 
> 如果您为运营商配置设备，然后*移除*SIM 卡，此属性将保留运营商的名称。如果您随后安装 *新*SIM 卡，其运营商名称将替换此属性的先前值。
> 
> *如果用户从未*为设备配置运营商，则此属性的值为 nil 。

# php - 如何使 Kohana 网站可移植？

> ID：853470
> 
> 赞同：0
> 
> 时间：2009-05-12T15:46:18.020
> 
> 标签：php, kohana

我刚刚用[Kohana PHP](http://kohanaphp.com/)编写了一个在线门户。

它在我的 PC 上运行良好，但当我尝试将它托管在另一台服务器上时，“BONK！”，它显示时没有显示产品图片。

我什至不知道发生了什么事。

我应该遵循哪些规则来使我的 Kohana 应用程序可移植？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-11-17T02:11:49.343

我正在使用 Kohana 开发一些网站，这里有一些技巧可以确保网站是可移植的，因为我可以将文件从我的开发环境上传到服务器并让它们运行而无需修改任何事物：

1.  使用相同的目录结构。例如，在我的情况下，我将 Kohana 核心文件夹放入本地磁盘和`<drive><somepath>/apps/kohana/system/`服务器上。同样，我将本地 XAMPP htdocs 设置为遵循. 这样我上传到服务器时就不必修改了。**使用相对路径**。`<drive><somepath>/apps/kohana/modules/``/apps/kohana/system/``/apps/kohana/modules/``<drive><somepath>/public_html/``/public_html``index.php`

***   就像 kfederov 建议的那样，`url::base()`在模板中使用所有 src=".." 。我这样做的方法是`$this->template->baseurl = url::base();`在我的 Controller_Template 中分配（我使用的是 Kohana 3，但方法与 Kohana 2.x 几乎相同）并`{$baseurl}`在 Smarty 模板中使用（我强烈建议使用 Smarty 模板系统——你可以找到Kohana 论坛中的模块）。

    *   在开发环境和服务器环境中使用相同的数据库名称、用户名和密码，这样我就不必修改了`config/database.php`，很明显。

    *   如果您在同一主机上托管多个具有不同域的网站，显然您不能将`/public_html`其用作除一个网站之外的所有网站的文档根目录。您很可能必须将这些非主域配置为指向不同的文件夹，例如在我的情况下，我将它们放在`/hosted/*/`文件夹中并相应地配置我的服务器 cPanel。要在本地环境中复制此设置，您需要使用 localhost 子域，这需要您相应地修改`httpd.conf`您的 HOSTS 文件，如下所示：

    1.  中添加虚拟主机`httpd.conf`。例如：

        > ```
        > <VirtualHost *:80>
        >   DocumentRoot /path/to/hosted/coolwebsite
        >   ServerName coolwebsite.localhost
        > </VirtualHost> 
        > ```

    2.  添加到您的 HOSTS 文件（`C:\WINDOWS\system32\drivers\etc\hosts`如果在 Windows 下）：

        > ```
        > 127.0.0.1     coolwebsite.localhost 
        > ```

    3.  现在，您可以`http://coolwebsite.localhost/`在本地运行的 Web 服务器上访问您的开发环境中的网站。** 

 **希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T16:36:41.213

请务必更新您的 .htaccess、index.php 中的值，或许还有配置文件中的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-09T05:36:09.280

1.  检查您的`.htaccess`和`bootstrap.php`文件以获取正确的站点路径。

2.  确保您`URL::base()`在`src="..."`.

# c# - 编码列表的最简单方法是什么 转换成纯字符串并将其解码回来？

> ID：853475
> 
> 赞同：6
> 
> 时间：2009-05-12T15:47:16.943
> 
> 标签：c#, serialization

我想我已经遇到过这个要求十几次了。但我永远找不到令人满意的解决方案。例如，有一个字符串集合，我想通过一个只允许纯字符串的通道序列化（到磁盘或通过网络）。我几乎总是最终使用带有荒谬分隔符的“拆分”和“加入”，例如

> “:::==--==::::”。

像这样：

```
public static string encode(System.Collections.Generic.List<string> data)
{
    return string.Join(" :::==--==::: ", data.ToArray());
}
public static string[] decode(string encoded)
{
    return encoded.Split(new string[] { " :::==--==::: " }, StringSplitOptions.None);
} 
```

但是这个简单的解决方案显然有一些缺陷。该字符串不能包含分隔符字符串。因此，编码的字符串不能再重新编码。

AFAIK，综合解决方案应该涉及在编码时转义分隔符和在解码时取消转义。虽然问题听起来很简单，但我相信完整的解决方案可能需要大量代码。我想知道是否有什么技巧可以让我用很少的代码行来构建编码器和解码器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T16:11:03.610

添加`using`对 System.Web 的引用，然后：

```
public static string Encode(IEnumerable<string> strings)
{
    return string.Join("&", strings.Select(s => HttpUtility.UrlEncode(s)).ToArray());
}

public static IEnumerable<string> Decode(string list)
{
    return list.Split('&').Select(s => HttpUtility.UrlDecode(s));
} 
```

大多数语言都有一对执行 Url“百分比”编码的实用函数，这是在这种情况下重用的理想选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-12T15:51:23.067

您可以使用 List<> 上的 .ToArray 属性，然后序列化 Array - 然后可以将其转储到磁盘或网络，并在另一端通过反序列化进行重组。

没有太多代码，您可以使用已经在 .net 框架中测试和编码的序列化技术。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-12T15:52:03.423

您可能想查看 CSV 文件的格式。

*   转义分隔符的所有实例，例如字符串中的 "
*   将列表中的每个项目包装在“项目”中
*   使用简单的分隔符加入，例如

我不相信有解决这个问题的灵丹妙药。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-12T15:54:40.767

这是一种可能适合的老派技术-

通过将每个 string[] 的宽度存储为每行中的固定宽度前缀来进行序列化。

所以

```
 string[0]="abc"
 string[1]="defg"
 string[2]=" :::==--==::: " 
```

变成

```
0003abc0004defg0014 :::==--==::: 
```

...前缀的大小足以满足字符串的最大长度

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-12T15:52:37.417

您可以使用 XmlDocument 来处理序列化。这将为您处理编码。

```
public static string encode(System.Collections.Generic.List<string> data)
{
    var xml = new XmlDocument();
    xml.AppendChild(xml.CreateElement("data"));
    foreach (var item in data)
    {
        var xmlItem = (XmlElement)xml.DocumentElement.AppendChild(xml.CreateElement("item"));
        xmlItem.InnerText = item;
    }
    return xml.OuterXml;
}

public static string[] decode(string encoded)
{
    var items = new System.Collections.Generic.List<string>();
    var xml = new XmlDocument();
    xml.LoadXml(encoded);
    foreach (XmlElement xmlItem in xml.SelectNodes("/data/item"))
        items.Add(xmlItem.InnerText);
    return items.ToArray();
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-12T16:12:37.820

我只会在每个字符串前面加上它的长度和一个表示长度结束的终止符。

```
美国广播公司
定义
希克
xyz
546
4.X

```

变成

**3：** abc **4：** defg **4：** hijk **3：** xyz **3：** 546 **3：** 4.X

完全没有限制或限制，非常简单。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-12T16:22:42.483

[Json.NET](http://james.newtonking.com/projects/json-net.aspx)是一种非常简单的方法来序列化您可以想象的任何对象。JSON 使事情变得紧凑，并且比 XML 更快。

```
List<string> foo = new List<string>() { "1", "2" };
string output = JsonConvert.SerializeObject(foo);
List<string> fooToo = (List<string>)JsonConvert.DeserializeObject(output, typeof(List<string>)); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-15T10:33:43.737

如果您愿意使用 2 个字符长的分隔符，它可以做得更简单：

在java代码中：

```
StringBuilder builder = new StringBuilder();

for(String s : list) {
  if(builder.length() != 0) {
    builder.append("||");
  }
  builder.append(s.replace("|", "|p"));
} 
```

然后回来：

```
for(String item : encodedList.split("||")) {
  list.add(item.replace("|p", "|"));
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-12T16:11:12.690

您不需要手动执行此操作。正如其他答案所指出的那样，有很多内置或其他方式来序列化/反序列化。

但是，如果您确实决定自己完成这项工作，则不需要*那么*多代码：

```
public static string CreateDelimitedString(IEnumerable<string> items)
{
    StringBuilder sb = new StringBuilder();

    foreach (string item in items)
    {
        sb.Append(item.Replace("\\", "\\\\").Replace(",", "\\,"));
        sb.Append(",");
    }

    return (sb.Length > 0) ? sb.ToString(0, sb.Length - 1) : string.Empty;
} 
```

这将用逗号 ( `,`) 分隔项目。任何现有的逗号都将使用反斜杠 ( `\`) 进行转义，并且任何现有的反斜杠也将被转义。

```
public static IEnumerable<string> GetItemsFromDelimitedString(string s)
{
    bool escaped = false;
    StringBuilder sb = new StringBuilder();

    foreach (char c in s)
    {
        if ((c == '\\') && !escaped)
        {
            escaped = true;
        }
        else if ((c == ',') && !escaped)
        {
            yield return sb.ToString();
            sb.Length = 0;
        }
        else
        {
            sb.Append(c);
            escaped = false;
        }
    }

    yield return sb.ToString();
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-12T15:52:36.107

为什么不使用[Xstream](http://xstream.codehaus.org/)来序列化它，而不是重新发明自己的序列化格式？

它非常简单：

```
new XStream().toXML(yourobject) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-12T16:00:42.113

在您的文件中包含**System.Linq**库并将您的函数更改为：

```
 public static string encode(System.Collections.Generic.List<string> data, out string delimiter)
    {
        delimiter = ":";
        while(data.Contains(delimiter)) delimiter += ":";
        return string.Join(delimiter, data.ToArray());
    }
    public static string[] decode(string encoded, string delimiter)
    {
        return encoded.Split(new string[] { delimiter }, StringSplitOptions.None);
    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-12T16:11:34.423

那里有大量的文本标记语言，任何一种都可以*使用*

考虑到您的输入的简单性，许多功能将变得微不足道，这完全取决于如何：

1.  人类可读你想要编码
2.  对 api 变化有弹性，它应该是
3.  解析它有多容易
4.  为它编写或获取解析器是多么容易。

如果最后一个是最重要的，那么只需使用 MS 为您提供的现有 xml 库：

```
class TrivialStringEncoder
{
    private readonly XmlSerializer ser = new XmlSerializer(typeof(string[]));

    public string Encode(IEnumerable<string> input)
    {
        using (var s = new StringWriter())
        {
            ser.Serialize(s, input.ToArray());
            return s.ToString();
        }       
    }

    public IEnumerable<string> Decode(string input)
    {
        using (var s = new StringReader(input))
        {
            return (string[])ser.Deserialize(s);            
        }       
    }

    public static void Main(string[] args)
    {
        var encoded = Encode(args);
        Console.WriteLine(encoded);
        var decoded = Decode(encoded);
        foreach(var x in decoded)
            Console.WriteLine(x);
    }
} 
```

在你得到的输入“A”、“<”、“>”上运行（编辑格式化）：

```
<?xml version="1.0" encoding="utf-16"?>
<ArrayOfString 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <string>A</string>
  <string>&lt;</string>
  <string>&gt;</string>
</ArrayOfString>
A
<
> 
```

冗长、缓慢但*极其*简单，不需要额外的库

# python - 我可以通过字典值/条目和键来运行吗

> ID：853483
> 
> 赞同：1
> 
> 时间：2009-05-12T15:50:15.987
> 
> 标签：python, function, dictionary

我正在编写一个函数，并打算使用字典键及其值作为参数。例如：

```
testDict={'x':2,'xS':4}

def newFunct(key,testDict['key']):
    newvalue=key+str(testDict['key'])
    return newValue

for key in testDict:
    newValue=newFunct(key,testDict[key])
    print newValue 
```

我在输入分号后点击返回按钮时收到 SyntaxError: invalid syntax。我猜这告诉我我不能以那种形式传递字典值。大概我可以定义一个新变量

```
for key in testDict:
    xdixt=testDict[key]
    newValue=newFunct(key,xdixt) 
```

并使用 xdixt 定义函数

但我希望我缺少一些技巧。我用谷歌搜索并找到了一些关于解包字典的参考，但这似乎不起作用。

这个 Python 的东西真的很酷。我的问题是因为我试图使用我存储在字典中的一些值来创建一个新目录。根据我从斯蒂芬的回答中读到的材料，我想知道如何概括我学到的信息。我的目录名称有五个不同的部分，每个部分都是处理来自 myDict 的值的结果。创建目录名称的表达式变得太复杂了，在我看来太复杂而难以阅读。所以我想知道我是否可以使用相同的方法将这些片段放入一个列表中，然后在创建目录名称时解压缩它们并且它起作用了！

```
def createDirectory(myKey,**myDict): 
   pathList=[]
   pathList.append(myDict['subKey1'])
   pathList.append(myDict['subKey2'].lstrip('0'))
   pathList.append(myDict['subKey3'])
   etc  
   myPath=os.path.join(*myList)
   os.makedirs(myPath)
   return(myPath) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-12T15:53:30.787

这是你想要的吗？

```
def func(**kwargs):
    for key, value in kwargs.items():
        pass # Do something

func(**myDict) # Call func with the given dict as key/value parameters 
```

（有关关键字参数的更多信息，请参阅[文档](http://docs.python.org/tutorial/controlflow.html#keyword-arguments)。其中的键`myDict`必须是字符串。）

* * *

**编辑**：您编辑了您的问题以包括以下内容：

> 我认为 myDict 前面的 ** 符号指示函数期待字典并解包键（第一个 *）和值，第二个 *

这是不正确的。要了解正在发生的事情，您必须考虑以下事项：

*   一个函数可以有多个*形式参数*（在这种情况下）`a`：`b`

```
def f1(a, b): 通过
```

*   我们可以将*位置参数*传递给这样的函数（就像在大多数其他语言中一样）：

```
f1(2, 3)
```

*   我们还可以传递*关键字参数*：

```
f1(a=2, b=3)
```

*   我们也可以混合使用这些，*但位置参数必须放在第一位*：

```
f1(2, b=3)
f1(a=2, 3) # SyntaxError: non-keyword arg after keyword arg
```

*   有一种方法可以让函数接受任意数量的位置参数，它可以作为元组访问（`args`在这种情况下）：

```
def f2(*args): 断言 isinstance(args, tuple)
```

*   现在我们可以`f2`使用单独指定的参数调用，或者使用一个列表，其内容首先需要被*解包*，使用类似于用于的符号的语法`*args`：

```
f2(2, 3)
f2(*[2, 3])
```

*   同样，可以接受任意数量的关键字参数：

```
def f3(**kwargs): 通过
```

*   请注意，`f3` *它不*要求 type 的单个参数`dict`。这是它所期望的调用类型：

```
f3(a=2, b=3)
f3(**{'a': 2, 'b': 3})
```

*   的所有参数`f3`必须命名为：

```
f3(2, 3) # TypeError: f3() 正好接受 0 个参数（给定 2 个）
```

将所有这些放在一起，并记住位置参数必须放在第一位，我们可能有：

```
>>> def f4(a, b, *args, **kwargs):
...     print('%r, %r' % (args, kwargs))
... 
>>> f4(2, 3)
(), {}
>>> f4(2, 3, 4, 5)
(4, 5), {}
>>> f4(2, 3, x=4, y=5)
(), {'y': 5, 'x': 4}
>>> f4(2, 3, 4, 5, x=6, y=7)
(4, 5), {'y': 7, 'x': 6}
>>> f4(2, *[3, 4, 5], **{'x': 6, 'y': 7})
(4, 5), {'y': 7, 'x': 6} 
```

特别注意以下两个错误：

```
>>> f4(2)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: f4() takes at least 2 arguments (1 given)
>>> f4(2, 3, a=4)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: f4() got multiple values for keyword argument 'a' 
```

第二个错误应该可以帮助您解释这种行为：

```
>>> f4(**{'foo': 0, 'a': 2, 'b': 3, 'c': 4})
(), {'c': 4, 'foo': 0} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T18:30:57.220

不知道我们为什么要引入 kwargs，这比那简单得多。您说您是 Python 新手，我认为您在这里只需要一些 Python 基础知识。

```
def newFunct(key,testDict['key']): 
```

应该：

```
def newFunct(key, val): 
```

没有理由在第二个参数上使用任何特殊语法来表明它来自字典。它只是一个参数，您只是碰巧将字典项中的值传递给它。

此外，一旦它在函数中，也没有理由以特殊方式对待它。在这一点上，它只是一个值。意思就是：

```
newvalue=key+str(testDict[key]) 
```

现在可以是：

```
newvalue=key+str(val) 
```

因此，当您这样称呼它时（就像您所做的那样）：

```
newValue=newFunct(key,testDict[key]) 
```

testDict[key] 解析为 'key' 处的值，它在函数中变为“val”。

* * *

另一种方式，如果你认为它适合任何原因（这只是很高兴知道的事情），你可以这样定义函数：

```
def newFunct(key, testDict): 
```

同样，第二个参数只是一个参数，所以我们使用相同的语法，但现在我们期望它是一个 dict，所以我们应该像使用它一样使用它：

```
newvalue=key+str(testDict[key]) 
```

（注意：在这种情况下，不要在 'key' 周围加上引号。我们指的是名为 'key' 的变量，而不是名为 'key' 的键）。当你调用这个函数时，它看起来像这样：

```
newValue=newFunct(key,testDict) 
```

因此，与您只是从字典中传递一个变量的第一种情况不同，这次您将对整个字典的引用传递给函数。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T15:53:19.460

你为什么不这样做：

```
[k + str(v) for k, v in test_dict.iteritems()] 
```

或者对于 py3k：

```
[k + str(v) for k, v in test_dict.items()] 
```

**编辑**

```
def f(k, v):
    print(k, v)      # or do something much more complicated

for k, v in testDict.items():
    f(k, v) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T20:38:54.017

从您的描述来看， testDict 似乎是某种与函数相关的全局变量。如果是这种情况 - 为什么你甚至需要将它传递给函数？

而不是您的代码：

```
testDict={'x':2,'xS':4}

def newFunct(key,testDict[key]):
    newvalue=key+str(testDict[key])
    return newValue

for key in testDict:
    newValue=newFunct(key,testDict[key])
    print newValue 
```

您可以简单地使用：

```
testDict={'x':2,'xS':4}

def newFunct(key):
    newvalue=key+str(testDict[key])
    return newValue

for key in testDict:
    newValue=newFunct(key)
    print newValue 
```

如果 testDict 不打算在全局范围内（这是有道理的......），我建议简单地为字典传递一个名称，而不是在这种情况下“乱搞”可变长度参数列表：

```
testDict={'x':2,'xS':4}

def newFunct(key,dictionary):
    newvalue=key+str(dictionary[key])
    return newValue

for key in testDict:
    newValue=newFunct(key,testDict)
    print newValue 
```

# .net - WPF：如何在画布中安装拇指行为？

> ID：853491
> 
> 赞同：0
> 
> 时间：2009-05-12T15:51:18.933
> 
> 标签：.net, wpf, canvas, controltemplate

我想要一个支持 DragDelta 事件的画布。我对如何做到这一点的第一个想法是制作一个包含拇指的 ControlTemplate。但我不知道如何正确地做到这一点。如何更改下面的 XAML 以使其编译，以及安装 DragDelta 事件处理程序的正确方法是什么？

```
<UserControl.Resources>
    <ControlTemplate x:Key="Transparent">
        <Rectangle Fill="Transparent"/>
    </ControlTemplate>
    <ControlTemplate x:Key="ThumbCanvas" TargetType="{x:Type Canvas}">
        <Grid>
            <Thumb x:Name="CanvasThumb" Template="{StaticResource Transparent}" DragDelta="CanvasThumb_DragDelta"/>
            <ContentPresenter Content="{TemplateBinding Content}"/>
            <!--error MC3011: Cannot find the static member 'ContentProperty' on the type 'Canvas'.-->
        </Grid>
    </ControlTemplate>
</UserControl.Resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T15:59:52.460

任何面板派生控件都没有模板属性，因为它们没有可见组件。

您可以在 UserControl 中使用 Thumb 控件，就像您正在做的那样，只需根据 Thumb 的增量调整 UserControl 的高度/宽度。为了使这项工作正常，您需要获取相对于用户控件父级的鼠标位置，否则将无法正常工作。即：e.GetLocation(this.Parent);

您可能也应该调整该拇指上的高度/宽度。将光标也设置在它上面是个好主意。

# ant - 我们如何使用 wsejbdeploy ant 任务生成 ibm-ejb-jar-bnd.xmi 文件

> ID：853493
> 
> 赞同：0
> 
> 时间：2009-05-12T15:51:26.840
> 
> 标签：ant

是否可以使用 wsejbdeploy ant 任务生成 ibm-ejb-jar-bnd.xmi 文件？我们如何使用 maven 生成相同的内容？尝试使用 was6-maven-plugin 但它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T16:17:33.893

您应该能够使用[wsDefaultBindings](http://publib.boulder.ibm.com/infocenter/wasinfo/v6r0/topic/com.ibm.websphere.javadoc.doc/public_html/api/com/ibm/websphere/ant/tasks/package-summary.html)任务来执行此操作（[用法应该类似于这些示例 WAS 6.1 Ant 脚本](http://illegalargumentexception.blogspot.com/2008/08/ant-automated-deployment-to-websphere.html)）。

我没有尝试使用 Maven 自动执行此操作，但我怀疑诊断问题需要比“它不起作用”更多的信息。

# oracle - 表连接效率问题

> ID：853495
> 
> 赞同：3
> 
> 时间：2009-05-12T15:52:24.967
> 
> 标签：oracle, performance

跨表连接时（如下例所示），连接表或连接仅包含所需列的子查询之间是否存在效率差异？

也就是说，这两张表的效率有区别吗？

```
SELECT result
  FROM result_tbl
  JOIN test_tbl                    USING (test_id)
  JOIN sample_tbl                  USING (sample_id)
  JOIN (SELECT request_id
          FROM request_tbl
         WHERE request_status='A') USING(request_id) 
```

对比

```
SELECT result
  FROM (SELECT result,  test_id   FROM result_tbl)
  JOIN (SELECT test_id, sample_id FROM test_tbl)   USING(test_id)
  JOIN (SELECT sample_id          FROM sample_tbl) USING(sample_id)
  JOIN (SELECT request_id
          FROM request_tbl
         WHERE request_status='A')                 USING(request_id) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-12T19:45:15.353

唯一确定的方法是在打开跟踪的情况下运行两者，然后查看跟踪文件。但很可能它们会被同等对待：优化器会将所有内联视图合并到主语句中，并提出相同的查询计划。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-12T16:15:14.743

没关系。实际上可能更糟，因为您正在从通常最了解的优化器手中夺走控制权。

但是，请记住，如果您正在执行 JOIN 并且仅包含其中一个表中的列，那么将其重写为一系列 EXISTS 语句通常会更好——因为这就是您真正的意思。JOIN（有一些例外）将连接匹配的行，这对优化器来说需要做更多的工作。

例如

```
SELECT t1.id1
  FROM table1 t1
 INNER JOIN table2 ON something = something 
```

应该几乎总是

```
SELECT id1
  FROM table1 t1
 WHERE EXISTS( SELECT *
                 FROM table2
                WHERE something = something ) 
```

对于简单的查询，优化器可以将查询计划减少为相同的查询计划。在您的 DBMS 上查看。

这也是代码异味，可能应该更改：

JOIN (SELECT request_id FROM request_tbl WHERE request_status='A')

至

```
SELECT result
  FROM request
 WHERE EXISTS(...)
   AND request_status = 'A' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-25T02:40:02.437

没有不同。

你可以通过在这两个语句上运行 EXPLAIN PLAN 来判断——Oracle 知道你想要的只是“结果”列，所以它只做最少的必要数据来获取它需要的数据——你应该发现这些计划是相同的。

Oracle 优化器有时会“实现”子查询（即运行子查询并将结果保存在内存中以供以后重用），但这种情况很少见，并且仅在优化器认为这将导致性能提高时才会发生；无论如何，无论您是否在子查询中指定了列，Oracle 都会执行此“实现”。

显然，如果存储“结果”列的唯一位置是块中（连同其余数据），Oracle 必须访问这些块 - 但它只会保留相关信息（“结果”列和其他相关信息）处理查询时内存中的列，例如“test_id”）。

# c# - 如何覆盖 Response.Redirect 以防止端口随之而来

> ID：853513
> 
> 赞同：4
> 
> 时间：2009-05-12T15:54:12.623
> 
> 标签：c#, asp.net, windows, iis, response.redirect

我有一个场景，我的负载均衡器将端口 80 从外部转换为本地端口 801。当涉及到服务器时，服务器显然会看到端口 801，并且在 Response.Redirect 中它会尝试将端口 801 注入到它重定向到的 URL 中，但这不是我想要的解决方案。

我在想的是： 1.覆盖 Response.Redirect 以便我从中删除端口。2\. 在 web.config 中进行某种配置以忽略该端口。3\. 解决这个问题的最讨厌的方法是改变整个应用程序使用完整的 URL 里面的 Response.Redirect 这是一个很大的痛苦。

这个问题有好的解决方案吗？

环境：Windows Vista、Windows 2003 Server、Windows 2008 Server IIS 6、IIS 7 ASP.NET C# & VB.NET

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-26T13:27:27.817

行，

我自己得到了答案。我希望这个解决方案对其他人也有用。

嗯，答案在 web.config 中。在下面

```
<system.web>
<httpRuntime useFullyQualifiedRedirectUrl="false" maxRequestLength="2526" requestLengthDiskThreshold="2526"/>
</system.web> 
```

其中重要的部分是以下错误。

```
useFullyQualifiedRedirectUrl="false" 
```

默认情况下是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T15:57:54.833

您需要它作为重定向，还是只使用 Server.Transfer()？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T16:05:08.597

将其重定向到原始主机名，以便它通过负载平衡器，没有任何明确的端口。重定向以编程方式构建（或可以构建），因此您应该能够避免该问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-07T21:53:44.043

我的应用程序有直接操作`HttpContext.Current.Response.RedirectLocation`. 它正在引用`HttpContext.Current.Request.Url.Authority`，其中包括端口信息。

我查看了所有请求属性，但我找不到任何显示直接在地址栏中指定的端口与通过负载均衡器指定的端口之间存在差异的任何内容。

这个应用程序从来不需要重定向到一个非标准的端口，所以我替换了`Authority`不`DnsSafeHost`包含端口信息的引用。

# iphone - 在 iPhone 上更改 Tabbar 的颜色

> ID：853517
> 
> 赞同：2
> 
> 时间：2009-05-12T15:54:36.353
> 
> 标签：iphone, uitabbarcontroller

我们的设计师想要改变默认 UITabBar 的颜色。他们当然会。

他们希望背景为绿色，图标突出显示为白色，而不是黑色/蓝色的默认配色方案。

有人有任何经验或建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-12T16:02:18.150

您必须继承 UITabBarController 并实现自定义绘图。

看看这个 SO 问题。 [更改 UITabBar 的色调/背景颜色](https://stackoverflow.com/questions/571028/changing-tint-background-color-of-uitabbar)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2011-10-18T06:44:25.383

自 iOS5 发布以来，您现在可以使用属性**tintColor**。IE：

```
tabBar.tintColor = [UIColor greenColor]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T09:36:28.150

我试过这个，它对我有用！！！

```
[self.TabBarController.tabBar setTintColor:[UIColor colorWithRed:0.1294 green:0.5686 blue:0.8353 alpha:1.0]];

[self.TabBarController.tabBar setTintColor:[UIColor "YOUR COLOR"]; 
```

希望对你也有帮助！！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-10-05T20:09:00.620

iOS 5.0 修复了这个问题，但解决方案是在保密协议下。在您的文档中查找 UITabBar 以获得一种简单的方法来做您想做的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T16:07:05.350

当心。如果你的应用要提交到应用商店，如果你修改了他们规定的配色方案，Apple 可能会拒绝它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-03-10T08:46:08.637

这里有一个有用的链接：http: [//duivesteyn.net/2010/01/16/iphone-custom-tabbar-background-image/](http://duivesteyn.net/2010/01/16/iphone-custom-tabbar-background-image/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-08-31T09:10:01.803

This can be done with a little [private API hacking](https://stackoverflow.com/questions/1355480/preventing-a-uitabbar-from-applying-a-gradient-to-its-icon-images/1356560#1356560).

# c# - C#/winforms 布局：具有锚点右侧或底部的元素消失在父容器下

> ID：853522
> 
> 赞同：0
> 
> 时间：2009-05-12T15:55:28.833
> 
> 标签：c#, winforms

有时，当我希望将 winforms 控件也停靠在父容器（通常是 UserControl）的右侧或底部时，它的边框会延伸到父容器的右侧或底部边框之外，因此它的一部分不再可见。即使锚点设置为正确。

这仅在应用程序运行时发生。只要我在设计器视图中，一切看起来都很好。

例如，我所做的只是将控件的“Anchor”属性设置为“Right”。

有没有办法避免这种情况？

在此屏幕截图中，您可以看到组框“过渡”延伸到其父级延伸到右侧。

[http://www.deviantsart.com/upload/08ffe2f5e7f4d33044840e68e0619152.png](http://www.deviantsart.com/upload/08ffe2f5e7f4d33044840e68e0619152.png)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T15:54:35.553

检查您的父 (UserControl) 停靠和锚属性。在我看来，它们尚未设置，并且 UserControl 而不是 UserControl 中的项目超出了边界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-24T18:53:23.143

如果您使用 Anchor，则不能使用 Dock（反之亦然）。

> Anchor 和 Dock 属性是互斥的。一次只能设置一个，最后一个设置优先。

我会检查您的控件的父级是否实际上是您认为的控件（它可能是它的父级:-)）。还要检查`Margin`控件上的`Padding`属性和父控件上的属性。然后检查`AutoSize`属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-23T19:46:16.610

也许锚定很好，但问题在于渲染。您是否尝试过在容器控件中调用 Invalidate()？我记得很久以前使用自定义控件发生了类似的事情。我通过强制重新绘制控件来解决它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T16:51:53.263

我不确定你在说什么。你能改写句子吗？

如果您说当您调整父窗口的大小时，您希望控件也调整大小，那么您就在正确的轨道上。您应该更改锚点，以便控件锚定到左、上、右和下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T16:58:50.227

如果你想停靠在右边，固定高度：anchor:=top,right 如果你想停靠在右下角：anchor:=bottom,right

您要停靠在哪个父容器中？控件在父级内部吗？如果不是，那么它可以在它的顶部调整大小（因为它实际上不是一个孩子）。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-05-19T15:49:22.497

您可能不得不弄乱控件的 z 顺序。

# c# - 使用 LINQ 从列表中删除元素

> ID：853526
> 
> 赞同：728
> 
> 时间：2009-05-12T15:56:24.570
> 
> 标签：c#, .net, linq, list

假设我有 LINQ 查询，例如：

```
var authors = from x in authorsList
              where x.firstname == "Bob"
              select x; 
```

鉴于它`authorsList`的类型`List<Author>`，我如何删除查询返回的`Author`元素？`authorsList``authors`

或者，换一种说法，我怎样才能从 中删除所有与 Bob 相同的名字`authorsList`？

注意：这是出于问题目的的简化示例。

* * *

## 回答 #1

> 赞同：1258
> 
> 时间：2009-05-12T16:01:39.680

好吧，首先排除它们会更容易：

```
authorsList = authorsList.Where(x => x.FirstName != "Bob").ToList(); 
```

但是，这只会更改的值，`authorsList`而不是从以前的集合中删除作者。或者，您可以使用[`RemoveAll`](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)：

```
authorsList.RemoveAll(x => x.FirstName == "Bob"); 
```

如果你真的需要基于另一个集合来做，我会使用 HashSet、RemoveAll 和 Contains：

```
var setToRemove = new HashSet<Author>(authors);
authorsList.RemoveAll(x => setToRemove.Contains(x)); 
```

* * *

## 回答 #2

> 赞同：154
> 
> 时间：2009-05-12T16:03:27.413

最好使用[List<T>.RemoveAll](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)来完成此操作。

```
authorsList.RemoveAll((x) => x.firstname == "Bob"); 
```

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2010-11-19T13:54:15.730

如果你真的需要删除项目，那么 except() 呢？
您可以根据新列表删除，或通过嵌套 Linq 即时删除。

```
var authorsList = new List<Author>()
{
    new Author{ Firstname = "Bob", Lastname = "Smith" },
    new Author{ Firstname = "Fred", Lastname = "Jones" },
    new Author{ Firstname = "Brian", Lastname = "Brains" },
    new Author{ Firstname = "Billy", Lastname = "TheKid" }
};

var authors = authorsList.Where(a => a.Firstname == "Bob");
authorsList = authorsList.Except(authors).ToList();
authorsList = authorsList.Except(authorsList.Where(a=>a.Firstname=="Billy")).ToList(); 
```

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2009-05-12T16:02:43.640

您不能使用标准 LINQ 运算符执行此操作，因为 LINQ 提供查询，而不是更新支持。

但是您可以生成一个新列表并替换旧列表。

```
var authorsList = GetAuthorList();

authorsList = authorsList.Where(a => a.FirstName != "Bob").ToList(); 
```

`authors`或者您可以在第二遍中删除所有项目。

```
var authorsList = GetAuthorList();

var authors = authorsList.Where(a => a.FirstName == "Bob").ToList();

foreach (var author in authors)
{
    authorList.Remove(author);
} 
```

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2009-05-12T16:06:06.803

简单的解决方案：

```
static void Main()
{
    List<string> myList = new List<string> { "Jason", "Bob", "Frank", "Bob" };
    myList.RemoveAll(x => x == "Bob");

    foreach (string s in myList)
    {
        //
    }
} 
```

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2014-03-26T16:38:44.693

`RemoveAll`我想知道， and`Except`和 using 的优点之间是否有任何区别`HashSet`，所以我做了快速的性能检查:)

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;

namespace ListRemoveTest
{
    class Program
    {
        private static Random random = new Random( (int)DateTime.Now.Ticks );

        static void Main( string[] args )
        {
            Console.WriteLine( "Be patient, generating data..." );

            List<string> list = new List<string>();
            List<string> toRemove = new List<string>();
            for( int x=0; x < 1000000; x++ )
            {
                string randString = RandomString( random.Next( 100 ) );
                list.Add( randString );
                if( random.Next( 1000 ) == 0 )
                    toRemove.Insert( 0, randString );
            }

            List<string> l1 = new List<string>( list );
            List<string> l2 = new List<string>( list );
            List<string> l3 = new List<string>( list );
            List<string> l4 = new List<string>( list );

            Console.WriteLine( "Be patient, testing..." );

            Stopwatch sw1 = Stopwatch.StartNew();
            l1.RemoveAll( toRemove.Contains );
            sw1.Stop();

            Stopwatch sw2 = Stopwatch.StartNew();
            l2.RemoveAll( new HashSet<string>( toRemove ).Contains );
            sw2.Stop();

            Stopwatch sw3 = Stopwatch.StartNew();
            l3 = l3.Except( toRemove ).ToList();
            sw3.Stop();

            Stopwatch sw4 = Stopwatch.StartNew();
            l4 = l4.Except( new HashSet<string>( toRemove ) ).ToList();
            sw3.Stop();

            Console.WriteLine( "L1.Len = {0}, Time taken: {1}ms", l1.Count, sw1.Elapsed.TotalMilliseconds );
            Console.WriteLine( "L2.Len = {0}, Time taken: {1}ms", l1.Count, sw2.Elapsed.TotalMilliseconds );
            Console.WriteLine( "L3.Len = {0}, Time taken: {1}ms", l1.Count, sw3.Elapsed.TotalMilliseconds );
            Console.WriteLine( "L4.Len = {0}, Time taken: {1}ms", l1.Count, sw3.Elapsed.TotalMilliseconds );

            Console.ReadKey();
        }

        private static string RandomString( int size )
        {
            StringBuilder builder = new StringBuilder();
            char ch;
            for( int i = 0; i < size; i++ )
            {
                ch = Convert.ToChar( Convert.ToInt32( Math.Floor( 26 * random.NextDouble() + 65 ) ) );
                builder.Append( ch );
            }

            return builder.ToString();
        }
    }
} 
```

结果如下：

```
Be patient, generating data...
Be patient, testing...
L1.Len = 985263, Time taken: 13411.8648ms
L2.Len = 985263, Time taken: 76.4042ms
L3.Len = 985263, Time taken: 340.6933ms
L4.Len = 985263, Time taken: 340.6933ms 
```

正如我们所看到的，在这种情况下最好的选择是使用**`RemoveAll(HashSet)`**

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-04-26T09:52:07.920

这是一个非常古老的问题，但我找到了一种非常简单的方法：

```
authorsList = authorsList.Except(authors).ToList(); 
```

请注意，由于返回变量`authorsList`是 a `List<T>`，因此必须将`IEnumerable<T>`返回的 by转换为 a 。`Except()``List<T>`

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2010-09-07T12:02:46.383

您可以通过两种方式删除

```
var output = from x in authorsList
             where x.firstname != "Bob"
             select x; 
```

或者

```
var authors = from x in authorsList
              where x.firstname == "Bob"
              select x;

var output = from x in authorsList
             where !authors.Contains(x) 
             select x; 
```

我有同样的问题，如果你想根据你的 where 条件进行简单的输出，那么第一个解决方案会更好。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2013-09-30T21:15:16.320

假设它`authorsToRemove`包含`IEnumerable<T>`您要从中删除的元素`authorsList`。

然后这是完成OP要求的删除任务的另一种非常简单的方法：

```
authorsList.RemoveAll(authorsToRemove.Contains); 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2009-05-12T16:41:12.453

我想你可以做这样的事情

```
 authorsList = (from a in authorsList
                  where !authors.Contains(a)
                  select a).ToList(); 
```

尽管我认为已经给出的解决方案以更易读的方式解决了问题。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2016-08-25T18:19:09.293

下面是从列表中删除元素的示例。

```
 List<int> items = new List<int>() { 2, 2, 3, 4, 2, 7, 3,3,3};

 var result = items.Remove(2);//Remove the first ocurence of matched elements and returns boolean value
 var result1 = items.RemoveAll(lst => lst == 3);// Remove all the matched elements and returns count of removed element
 items.RemoveAt(3);//Removes the elements at the specified index 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2009-05-12T16:03:48.303

LINQ 起源于函数式编程，它强调对象的不变性，因此它不提供就地更新原始列表的内置方法。

关于不变性的注意事项（取自另一个 SO 答案）：

[这是来自Wikipedia](https://en.wikipedia.org/wiki/Immutable_object)的不变性的定义。

> 在面向对象和函数式编程中，不可变对象是其状态在创建后无法修改的对象。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-01-28T05:36:21.113

我认为您只需将作者列表中的项目分配到新列表即可生效。

```
//assume oldAuthor is the old list
Author newAuthorList = (select x from oldAuthor where x.firstname!="Bob" select x).ToList();
oldAuthor = newAuthorList;
newAuthorList = null; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-06-15T13:48:45.350

为了保持代码流畅（如果代码优化不是至关重要的），您需要在列表上做一些进一步的操作：

```
authorsList = authorsList.Where(x => x.FirstName != "Bob").<do_some_further_Linq>; 
```

或者

```
authorsList = authorsList.Where(x => !setToRemove.Contains(x)).<do_some_further_Linq>; 
```

# c# - 安装 VS 2008 教授

> ID：853528
> 
> 赞同：0
> 
> 时间：2009-05-12T15:56:35.663
> 
> 标签：c#, visual-studio

我已经在我的盒子里安装了 VisualStudio Express C#。现在我要安装 VS Prof。不确定我是否必须先卸载 VS Express，或者我可以在我的盒子里同时运行这两个。

我认为两者是有区别的。express 版本不支持一些 sln 选项，例如一组项目的虚拟文件夹。因此，我更愿意同时保留两者。关于这个更新有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T15:58:21.387

两者都可以在同一个盒子上运行而不会出现问题。照常安装即可。

是的，两者之间存在差异。

[Visual Studio 版本表。](http://msdn.microsoft.com/en-us/library/zcbsd3cz(VS.80).aspx)

# ruby-on-rails - 使用 Phusion Passenger 和 Rails 时初始服务器启动缓慢

> ID：853532
> 
> 赞同：87
> 
> 时间：2009-05-12T15:57:19.327
> 
> 标签：ruby-on-rails, deployment, passenger, phusion

为了赶上 Phusion Passenger 的潮流，我们为小型 Rails 应用程序设置了一个登台服务器来测试。

到目前为止，它使用起来非常好，它使安装/配置和部署应用程序变得轻而易举。问题是我们使用的网站并不经常受到攻击，而且它似乎在后台关闭了服务器。这意味着当有人访问该站点时，他们需要等待很长时间才能启动新服务器来处理请求。我们通读了文档，尝试了很多不同的设置（智能/智能 lv2 模式、passengeridletime 等），但仍然没有找到真正的解决方案。

翻遍谷歌搜索结果后，我们真的找不到有用的信息。目前，我们有一个 cron 作业，它经常发出请求以保持服务器运行。

是否还有其他人遇到此问题，您对修复有什么建议吗？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2009-05-12T16:11:47.667

发生的事情是您的 Application 和/或 ApplicationSpawners 由于超时而关闭。要处理您的新请求，Passenger 必须启动您的应用程序的新副本，这可能需要几秒钟，即使在快速机器上也是如此。要解决此问题，您可以使用一些 Apache 配置选项来保持应用程序处于活动状态。

以下是我在服务器上所做的具体操作。PassengerSpawnMethod 和PassengerMaxPreloaderIdleTime 是在您的情况下最重要的配置选项。

```
# Speeds up spawn time tremendously -- if your app is compatible. 
# RMagick seems to be incompatible with smart spawning
# Older versions of Passenger called this RailsSpawnMethod
PassengerSpawnMethod smart

# Keep the application instances alive longer. Default is 300 (seconds)
PassengerPoolIdleTime 1000

# Keep the spawners alive, which speeds up spawning a new Application
# listener after a period of inactivity at the expense of memory.
# Older versions of Passenger called this RailsAppSpawnerIdleTime
PassengerMaxPreloaderIdleTime 0

# Just in case you're leaking memory, restart a listener 
# after processing 5000 requests
PassengerMaxRequests 5000 
```

通过使用“智能”生成模式并关闭PassengerMaxPreloaderIdleTime，Passenger 将始终在内存中保留一份应用程序副本（在启动Apache 后的第一个请求之后）。将从该副本中编辑单个`Application`侦听`fork`器，这是一种超级便宜的操作。它发生得如此之快，以至于您无法判断您的应用程序是否必须生成侦听器。

如果您的应用程序与智能生成不兼容，我建议您保持较大的 PassengerPoolIdleTime 并定期使用 curl 和 cronjob 或 monit 或其他方式访问您的站点，以确保侦听器保持活跃。

[乘客用户指南](http://www.modrails.com/documentation.html)是这些和更多配置选项的绝佳参考。

**编辑**：如果您的应用与智能生成不兼容，有一些非常好的**新选项**

```
# Automatically hit your site when apache starts, so that you don't have to wait
# for the first request for passenger to "spin up" your application. This even
# helps when you have smart spawning enabled. 
PassengerPreStart http://myexample.com/
PassengerPreStart http://myexample2.com:3500/

# the minimum number of application instances that must be kept around whenever 
# the application is first accessed or after passenger cleans up idle instances
# With this option, 3 application instances will ALWAYS be available after the
# first request, even after passenger cleans up idle ones
PassengerMinInstances 3 
```

因此，如果您结合PassengerPreStart 和PassengerMinInstances，Passenger 将在apache 加载后立即启动3 个实例，并且始终保持至少3 个实例启动，因此您的用户很少（如果有的话）会看到延迟。

或者，如果您已经使用智能生成（推荐）`PassengerMaxPreloaderIdleTime 0`，您可以添加`PassengerPreStart`以获得立即启动的额外好处。

非常感谢[phusion.nl](http://www.phusion.nl/)的英雄们！

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2010-02-24T20:24:20.007

万一有任何 nginx 服务器用户偶然发现这个问题，“PassengerMaxRequests”和“PassengerStatThrottleRate”指令都不会转换为 nginx。但是其他人会这样做：

```
rails_spawn_method smart;
rails_app_spawner_idle_time 0;
rails_framework_spawner_idle_time 0;
passenger_pool_idle_time 1000; 
```

！

EDIT`rails_spawn_method`在乘客 3 中已弃用，而是使用

```
passenger_spawn_method smart; 
```

到目前为止，其他一切都很好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-02-15T23:07:32.133

您还可以使用PassengerMinInstances：

[http://www.modrails.com/documentation/Users%20guide%20Apache.html#PassengerMinInstances](http://www.modrails.com/documentation/Users%20guide%20Apache.html#PassengerMinInstances)

这可以与PassengerPreStart 结合使用

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-13T07:25:25.427

关于：

```
# Additionally keep a copy of the Rails framework in memory. If you're 
# using multiple apps on the same version of Rails, this will speed up
# the creation of new RailsAppSpawners. This isn't necessary if you're
# only running one or 2 applications, or if your applications use
# different versions of Rails.
RailsFrameworkSpawnerIdleTime 0 
```

只是要添加一些东西，可能会有用。

当前版本中的默认生成方法是“smart-lv2”，它会跳过框架生成器，因此设置框架生成器超时无论如何都不会生效，除非您将生成方法显式设置为“智能”。

来源： [http ://groups.google.com/group/phusion-passenger/browse_thread/thread/c21b8d17cdb073fd?pli=1](http://groups.google.com/group/phusion-passenger/browse_thread/thread/c21b8d17cdb073fd?pli=1)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-12T21:04:12.900

如果您的主机是共享服务器，就像我的一样，您无法更改设置并被 cron 作业困住。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-03-13T14:18:36.730

我也遇到了这个问题，但我无法更改乘客设置，因为我没有对该文件的写权限。我找到了一个工具 ( [http://www.wekkars.com](http://www.wekkars.com) ) 可以让我的应用程序快速响应。也许这也可以成为您的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-12-15T11:30:02.943

检查乘客的版本。它是`<string>`旧版本的 RailsS​​pawnMethod。

如果是这样（如果我没记错的话），在所有配置指令中用 Rails 替换乘客或查找旧乘客文档以获取更多详细信息

# c# - C#中弹出窗口上的Aero Glass边框

> ID：853533
> 
> 赞同：5
> 
> 时间：2009-05-12T15:57:36.287
> 
> 标签：c#, popup, border, aero

我想创建这样的弹出窗口（固定大小）：

[![弹出窗口](https://i.stack.imgur.com/RMdfF.png)](https://i.stack.imgur.com/RMdfF.png)

在我使用 C# 的应用程序中。我已经查看了 NativeWindow，但我不确定这是否是正确的方法。我希望一个窗口的行为与 Windows 7 中的音量控制或“连接到”窗口完全相同。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T16:02:12.533

使用 WinForms，创建一个表单并设置以下内容：

```
Text = "";
FormBorderStyle = Sizable;
ControlBox = false;
MaximizeBox = false;
MinimizeBox = false;
ShowIcon = false; 
```

**编辑：**

这确实要求窗口相当大，但你可以稍微作弊。将 MinimumSize 和 MaximumSize 设置为所需的大小。这将阻止用户调整大小。

正如 Jeff 建议的那样，您也可以在 CreateParams 中执行此操作：

```
protected override CreateParams CreateParams
{
    get
    {
        CreateParams cp = base.CreateParams;
        unchecked
        {
            cp.Style |= (int)0x80000000;    // WS_POPUP
            cp.Style |= 0x40000;            // WS_THICKFRAME
        }
        return cp;
    }
} 
```

然而，在这两种情况下，当您将鼠标悬停在边缘上时，您仍然会看到一个大小调整光标。我不确定如何防止这种情况发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T16:01:11.833

在您的 CreateParams 中指定 WS_POPUP 和 WS_THICKFRAME。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-22T06:33:15.087

我能够做到这一点：

```
if (m.Msg == 0x84 /* WM_NCHITTEST */) {
    m.Result = (IntPtr)1;
    return;
}
base.WndProc(ref m); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-04T14:54:25.913

防止在边框上调整大小的光标句柄`WM_NCHITTEST`和当超出边框时返回`HTBORDER`。

# sql - SQL 在 Oracle 中搜索对象，包括存储过程

> ID：853547
> 
> 赞同：33
> 
> 时间：2009-05-12T16:01:03.893
> 
> 标签：sql, oracle, search, full-text-search

我需要编写一些 sql 来查询 Oracle 数据库中的所有对象。不幸的是，我们被允许使用的工具没有内置此功能。基本上，我需要搜索所有表、过程、触发器、视图，以及所有内容。

我知道如何搜索对象名称。但我需要搜索对象的内容。即 SELECT * FROM DBA_OBJECTS WHERE object_name = '%search string%';

谢谢，格伦

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-05-12T16:18:05.003

我不确定我是否完全理解这个问题，但如果您想在数据库中搜索特定搜索字符串的对象，请尝试：

```
SELECT owner, name, type, line, text 
FROM dba_source
WHERE instr(UPPER(text), UPPER(:srch_str)) > 0; 
```

如果您需要更多信息，您可以从那里查找对象/行号。

对于视图，您可以使用：

```
SELECT *
FROM dba_views
WHERE instr(UPPER(text_vc), UPPER(:srch_str)) > 0 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-05-12T16:17:17.157

我不确定我是否理解你，但要查询你的触发器、过程、包和函数的源代码，你可以尝试使用“user_source”表。

```
select * from user_source 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-10-24T08:08:02.823

我会使用 DBA_SOURCE （如果您可以访问它），因为如果您需要的对象不属于您登录的架构，您将看不到它。

如果您需要了解包中的函数和 Procs，请尝试以下操作：

```
select * from all_source
 where type = 'PACKAGE'
   and (upper(text) like '%FUNCTION%' or upper(text) like '%PROCEDURE%')
   and owner != 'SYS'; 
```

最后一行防止返回所有 sys 内容（DBMS_ 等）。如果您只想要自己的架构内容，这将在 user_source 中工作。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-04-03T12:17:38.520

我在尝试查找使用某个表的所有程序时遇到了这个问题

如本文所述，Oracle SQL Developer 提供了此功能：[https ://www.thatjeffsmith.com/archive/2012/09/search-and-browse-database-objects-with-oracle-sql-developer/](https://www.thatjeffsmith.com/archive/2012/09/search-and-browse-database-objects-with-oracle-sql-developer/)

从视图菜单中，选择查找数据库对象。选择一个数据库连接。输入表的名称。在对象类型中，只保留函数、过程和包。在代码部分，检查所有源代码行。

[![在此处输入图像描述](https://i.stack.imgur.com/2Ft4U.png)](https://i.stack.imgur.com/2Ft4U.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-03-09T14:56:44.503

ALL_SOURCE 描述当前用户可访问的存储对象的文本源。

这是解决方案之一

```
select * from ALL_SOURCE where text like '%some string%'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-09T06:45:08.093

在 Oracle 11g 中，如果您想在整个数据库或过程中搜索任何文本，可以使用下面提到的查询：

select * from user_source WHERE UPPER(text) LIKE '%YOUR SAGE%'

# java - 用于替换 Java 中的列表成员的迭代器？

> ID：853549
> 
> 赞同：37
> 
> 时间：2009-05-12T16:01:16.920
> 
> 标签：java, list, iterator

嗯... Java`Iterator<T>`有`remove()`方法但没有`replace(T replacement)`方法。

有没有一种有效的方法来替换列表中的选定项目？我可以使用 for 循环调用 get(i) 和 set(i)，这对于 ArrayList 来说很好，但对于链表来说会很糟糕。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2009-05-12T16:04:54.713

[`ListIterator.set`](http://java.sun.com/javase/6/docs/api/java/util/ListIterator.html#set(E))由[`List.listIterator()`](http://java.sun.com/javase/6/docs/api/java/util/List.html#listIterator())或返回[`List.listIterator(int)`](http://java.sun.com/javase/6/docs/api/java/util/List.html#listIterator(int))

（对于迭代器`set`来说没有任何意义。）`Set`

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-05-12T16:05:10.813

你需要 a[`ListIterator`](http://java.sun.com/javase/6/docs/api/java/util/ListIterator.html)而不是`Iterator`([`listIterator()`](http://java.sun.com/javase/6/docs/api/java/util/List.html#listIterator())给你一个)。然后使用[`set`](http://java.sun.com/javase/6/docs/api/java/util/ListIterator.html#set(E))方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-28T06:58:37.797

[`List.replaceAll(UnaryOperator<E> operator)`](https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/util/List.html#replaceAll(java.util.function.UnaryOperator))从 Java 8 开始也有。

这可能比使用 a `ListIterator`（默认实现所做的）效率更高或更低，具体取决于您使用的列表类型以及需要替换多少元素，因为它可以被覆盖以提供更好的性能，但您不能缩短循环它并退出部分（除非你抛出异常）。

某些列表（如`CopyOnWriteArrayList`）不支持使用 a 进行修改，`ListIterator`但支持`replaceAll`。

另一个优点是`replaceAll`使用 lambda 编写可能比使用带有迭代器的 for 循环更短。

# video - MPEG 的比特率是多少？

> ID：853550
> 
> 赞同：1
> 
> 时间：2009-05-12T16:01:34.470
> 
> 标签：video, encoding, mpeg, bitrate

我可以期望 MPEG 编码器为 160x120“质量良好”的网络摄像头流生成什么比特率（大约）？

编码需要多少 CPU？解码？

有没有更好的编码格式用于此目的？（就比特率或 CPU 而言）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T16:11:39.150

`256 KBps``QSIF`中的( `160x120`, `25 fps`)就足够了`MPEG2`。

任何现代`CPU`（自`Pentium IV`）都可以对其进行实时编码和解码。

有硬件解决方案（如`Compro VideoMate` `H900`和`E800`系列）`100$`，`8`每个`PC`.

使用它们，您可以`8`立即获得全尺寸流，更不用说`QSIF`.

`MPEG4`在带宽方面可能会产生更好的结果，但它对通道中的数据包丢失更敏感。

至于声音，如果您需要电话质量，您可以使用`aLaw`或`uLaw`编解码器，这需要`64 kbps`每个通道，即使对于`Casio`计算器也不是问题。

# java - Spring MVC - 表单映射

> ID：853552
> 
> 赞同：2
> 
> 时间：2009-05-12T16:01:43.237
> 
> 标签：java, spring, spring-mvc

可能在这里遗漏了一些完全明显的东西，但是这里有。我从 Spring MVC 开始。我有一个表单控制器来处理对 /share/edit.html 的入站请求。当我从浏览器点击此 url 时，我收到以下错误：

```
 The requested resource (/inbox/share/share/edit) is not available. 
```

这是我的 applicationContext-mvc.xml：

```
 <bean id="publicUrlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping" >
        <property name="mappings" >
            <value>
                /share/edit.html=shareFormController
                /share/list.html=shareController
                /share/view.html=shareController
                /folders.json=foldersController
                /studies.json=studiesController
            </value>
        </property>
    </bean>

<bean id="internalPathMethodNameResolver" class="org.springframework.web.servlet.mvc.multiaction.InternalPathMethodNameResolver" />

<bean id="shareFormController" class="com.lifeimage.lila.controller.ShareFormController" />
<bean id="shareController" class="com.lifeimage.lila.controller.ShareController" >
    <property name="methodNameResolver" ref="internalPathMethodNameResolver" />
</bean> 
```

和我的表单控制器：

```
public class ShareFormController extends SimpleFormController {

    public ShareFormController() {
        setCommandClass( Share.class );
    }

    @Override
    protected ModelAndView onSubmit(HttpServletRequest request, HttpServletResponse response, Object command, BindException errors)
            throws Exception {

        //controller impl...

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T16:14:25.760

你应该看看你的视图解析器。确保它按照您认为的那样解析控制器中的逻辑名称。看起来它正在解析的名称当前不存在

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T13:16:18.727

我想我已经解决了这个问题。有两个问题：

1) SimpleFormController 的实现需要表单和成功视图；我没有在这里配置。由于这是 AJAX 客户端的服务器方法，我添加了一个 Spring-JSON 视图，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

http://www.springframework.org/schema/beans/spring-beans-2.5.xsd" default-lazy-init="false" default-autowire="no" default-dependency-check="none">

```
<bean name="jsonView" class="org.springframework.web.servlet.view.json.JsonView">
        <property name="jsonErrors">
            <list>
                    <ref bean="statusError" />
                    <ref bean="modelflagError" />
            </list>
    </property>
</bean>

<bean name="statusError" 
      class="org.springframework.web.servlet.view.json.error.HttpStatusError">
      <property name="errorCode"><value>311</value></property>
</bean>
<bean name="modelflagError" 
      class="org.springframework.web.servlet.view.json.error.ModelFlagError">
      <property name="name"><value>failure</value></property>
      <property name="value"><value>true</value></property>
</bean> 
```

可用于所有返回 JSON 的控制器。

2) 我从 SimpleURLHandlerMapping 切换到 ControllerClassNameHandlerMapping 并依赖 Spring 命名约定 (controllerClassName/method.html)，从而解决了路由问题。可能不是一个长期的解决方案，但让我完成了任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T16:09:28.200

你检查你的日志输出了吗？Spring MVC 的输出通常非常冗长。

此外，您发布的 URL ( `/inbox/share/share/edit`) 似乎与您正在配置的 URL ( ) 不匹配`/share/edit.html`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-08-03T17:26:44.163

@jordan002 当我看到你必须跳起来完成任务时，我觉得有义务分享一个非常强大的 Java MVC 框架，它需要更少的配置。该框架称为 Induction，查看文章 Induction vs. Spring MVC，[http://www.inductionframework.org/induction-vs-spring-mvc.html](http://www.inductionframework.org/induction-vs-spring-mvc.html)

# c# - 警告 MSB3391： 不包含任何可以为 COM 互操作取消注册的类型

> ID：853553
> 
> 赞同：11
> 
> 时间：2009-05-12T16:01:44.673
> 
> 标签：c#, visual-studio, com-interop, typelib, comvisible

我使用 VS2005 制作了一个简单的 C# DLL（这是一个更大项目的一部分）。我需要通过 VBA 代码在 Excel 中使用 DLL，因此我在程序集上使用 COM Interop。我正在**尝试使构建过程自动生成必要的 TLB 文件**，这样我就不需要在每次构建后转到命令行并使用 regasm。

我的问题是，虽然 DLL 编译和构建很好，但它不会生成 TLB 文件。相反，标题中的错误会在输出框中打印出来。

*通过转到 VS2005 -> Build -> Output -> Check "Register for COM interop"*中的项目属性，我已经获得了其他 DLL 来构建 TLB 文件。*我还在AssemblyInfo.cs 中*有[assembly: ComVisible(true)] 。

以下是问题 DLL 的源代码以及它为返回类型引用的 DLL 的摘要：

```
using System;
using System.IO;
using System.Runtime.InteropServices;
using SymbolTable;

namespace ProblemLibrary
{
    public class Foo
    {    
        public Foo(string filename)
        {
            ...
        }

        // method to read a text file into a SymbolTable
        public SymbolTable BuildDataSet(string[] selected)
        {
            ...
        }
    }
} 
```

这里是 SymbolTable.dll 的摘要。它拥有 ProblemLibrary 使用的返回类型。

```
using System;
using System.Collections.Generic;

namespace SymbolTable
{
    public class SymbolTable
    {
        readonly Dictionary<SymbolInfoStub, string> _symbols = new Dictionary<SymbolInfoStub, string>();

       /*methods that interact with Dictionary snipped*/
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-12T19:10:33.850

1.  你需要有没有任何参数的ctor。
2.  您应该在类周围有[GuidAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.guidattribute.aspx)和[ProgIdAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.progidattribute.aspx)。
3.  最好将程序集标记为 ComVisible(false) 并明确标记需要导出的类。
4.  为您的类使用接口。
5.  确保您在程序集级别中有 GuidAttribute。

    ```
    [Guid("<PUT-GUID-HERE-1>")]
    [ComVisible(true)]
    interface IFoo
    {
        void DoFoo();
    }

    [Guid("<PUT-GUID-HERE-2>")]
    [ComVisible(true)]
    [ProgId("ProgId.Foo")]
    class Foo : IFoo
    {
        public void DoFoo()
        {
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-12T18:43:00.960

在 AssemblyInfo.cs 文件中，确保您具有以下内容：

```
// Setting ComVisible to false makes the types in this assembly not visible 
// to COM components.  If you need to access a type in this assembly from 
// COM, set the ComVisible attribute to true on that type.
[assembly: ComVisible(true)] 
```

**更新：**

阅读：[如何在 Excel VBA 中使用 .NET 对象？](https://stackoverflow.com/questions/179452/how-can-i-make-use-of-net-objects-from-within-excel-vba)

链接到： [http ://richnewman.wordpress.com/2007/04/15/a-beginner%E2%80%99s-guide-to-calling-a-net-library-from-excel/](http://richnewman.wordpress.com/2007/04/15/a-beginner%E2%80%99s-guide-to-calling-a-net-library-from-excel/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-03-02T23:28:28.837

我看到了类似的问题。我收到如下错误：

> 警告 MSB3391：不包含任何可以为 COM 互操作取消注册的类型。

我遵守了所有规则（ComVisible 等），但没有任何效果。

**解决方案：**我必须在默认构造函数中放入一些东西，这样它就不会被优化掉。当我有东西的那一刻，注册完成，没有任何消息，并且该组件在注册表中可见。

**有趣的注释：**我的一个朋友设法在他的机器上注册了原始的 DLL 空的默认构造函数（64 位 Windows-7，VS2008-Professional，就像我的一样）。然而，他的 REGASM.EXE 是：

> C:\Windows\Microsoft.NET\Framework64\v2.0.50727\regasm.exe

而我的是：

> C:\Windows\Microsoft.NET\Framework64\v4.0.30319\RegAsm.exe

因此，.NET 框架的版本之间可能存在一些差异——也许更高版本的优化太多，而 REGASM 没有考虑到这一点。

# c++ - 将 TinyXml 用于 C++ 时，我需要清理哪些内存管理？

> ID：853559
> 
> 赞同：5
> 
> 时间：2009-05-12T16:02:55.357
> 
> 标签：c++, memory-management, tinyxml

我正在使用[TinyXml](http://www.grinninglizard.com/tinyxmldocs/index.html)执行以下操作：

```
TiXmlDocument doc;
TiXmlDeclaration* decl = new TiXmlDeclaration( "1.0", "", "" );
TiXmlElement* main = new TiXmlElement("main");

TiXmlElement* header = new TiXmlElement("header");
header->SetAttribute("attribute","somevalue");
main->LinkEndChild(header);

// ... Add many more TiXmlElment* to other elements all within "main" element

doc.LinkEndChild(decl);
doc.LinkEndChild(main);

// ... do stuff with doc

// Now I am done with my doc. What memory management happens here? 
```

在我的程序执行结束时，是否会在超出范围`TiXmlElement*`时清理所有内容？`doc`我需要自己遍历文档树并释放所有内存吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-12T16:38:10.760

的[文档是`LinkEndChild`](http://www.grinninglizard.com/tinyxmldocs/classTiXmlNode.html#a27)这样说的：

> 注意：要添加的节点通过指针传递，此后将由 tinyXml 拥有（和删除）。这种方法是有效的并且避免了额外的副本，但应该小心使用，因为它使用与其他插入函数不同的内存模型。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-12T16:25:46.613

**你分配的任何东西*都不会*`new`被自动清理***——你（或至少，某人）需要打电话`delete header;`等等。*

 *我说“某人”是因为对象可能会取得这些`TiXmlDocument`对象**的所有权**并自行清理它们——知道这一点的唯一方法是查看 TinyXML 的文档。

如果它没有所有权，你最好只在堆栈上声明本地对象：

```
TiXmlDeclaration decl( "1.0", "", "" );    // etc. 
```

如果您需要对象在函数结束后仍然存在，使用共享指针会更安全，例如[Boost 的`shared_ptr`](http://www.boost.org/doc/libs/1_38_0/libs/smart_ptr/shared_ptr.htm).

# jsp - Struts ognl 表达式来评估表达式的结果

> ID：853569
> 
> 赞同：3
> 
> 时间：2009-05-12T16:05:03.590
> 
> 标签：jsp, struts2, ognl

这将有点难以解释。我正在尝试编写一个标签来组件化一堆地址字段，但是我在计算 ognl 表达式时遇到了麻烦。

预期用途：

member.address 映射到一个 Address 对象（没什么好说的）。

我的标签（最简单的版本）：

```
<%@taglib prefix="s" uri="/struts-tags" %>
<%@attribute name="name" required="true" rtexprvalue="true" type="java.lang.String" %>
<s:push value="%{#attr.name}">
    Address line 1:
    <s:property value="line1"/>
</s:push> 
```

我认为问题在于`<s:push value="%{#attr.name}"/>`实际上并没有将 member.address 的结果推送到堆栈上，而只是推送了一个值为“member.address”的字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T16:18:08.780

更多的研究和长时间盯着[ognl 文档](http://www.opensymphony.com/ognl/html/LanguageGuide/expressionEvaluation.html)的结果如下：

```
<%@taglib prefix="s" uri="/struts-tags" %>
<%@attribute name="name" required="true" rtexprvalue="true" type="java.lang.String" %>
<s:push value="%{(#attr.name)(#attr)}">
   Address line 1:
   <s:property value="line1"/>
</s:push> 
```

似乎可以解决问题。

# asp.net-mvc - 和 ASP.Net MVC 中的 NTLM

> ID：853572
> 
> 赞同：3
> 
> 时间：2009-05-12T16:05:13.263
> 
> 标签：asp.net-mvc

如果我禁用 MVC 站点的匿名浏览并且只允许 NTLM 身份验证用户访问，我假设任何页面都简单地用

```
[Authorize] 
```

属性将通过，所以如果我只想允许用户有限访问网站的某些部分，我需要将它们添加到 AD 组并使用它来应用过滤器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-14T12:55:07.413

[Authorize] 默认只查找 IsAuthenticated 标志。所以是的，在没有额外参数的情况下应用 [Authorize] 将允许所有登录用户。

要进行限制，您可以使用角色/组（不是 OU）。它将检查 IsInRole（来自 IPrincipal）。

# ssis - 布尔到字符 CAST 的 SSIS 派生列表达式

> ID：853574
> 
> 赞同：0
> 
> 时间：2009-05-12T16:05:50.967
> 
> 标签：ssis, char, boolean, expression, casting

我在 SSIS 派生列中的表达式有点挣扎。

我的源字段是 BOOLEAN 数据类型。它的目标字段是 SQL CHAR 数据类型。

** 请注意，我没有设计任何一种模式。如果我有办法，数据类型会匹配。不幸的是，这不是我的情况！

我发现了一个将 CHAR 转换为 BOOL 的 .NET 正则表达式的好例子。这与我想要完成的完全相反：

```
[valToTranslate] == "Y" ? (DT_BOOL)1 : [valToTranslate] == "N" ? (DT_BOOL)0 : NULL(DT_BOOL) 
```

我试图实现这个表达式的反向公式，但没有成功。这是我失败的尝试：

```
[valToTranslate] == 0 ? (DT_WSTR,1)"N" : [valToTranslate] == 1 ? (DT_WSTR,1)"Y" : "N"(DT_WSTR) 
```

我不确定 CAST to (DT_WSTR,1) 对于 CHAR SQL 数据类型字段是否正确？我应该改用 (DT_STR,1) 吗？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T16:13:46.307

你有没有试过一个简单的

```
[valToTranslate] ? "Y" : "N" 
```

这应该可行 - 如果默认情况下假定它们是 WSTR，您可能需要将 Y 和 N 转换为 DT_STR。

# c# - 将海量 CSV 文件上传到 SQL Server 数据库

> ID：853576
> 
> 赞同：7
> 
> 时间：2009-05-12T16:06:32.403
> 
> 标签：c#, .net, sql-server, .net-2.0, csv

我需要将大量（16GB，65+ 百万条记录）CSV 文件上传到 SQL Server 2005 数据库中的单个表中。有没有人对最好的方法有任何指示？

**细节**

我目前正在使用 C# 控制台应用程序（.NET 框架 2.0）将导入文件拆分为 50000 条记录的文件，然后处理每个文件。我使用 SqlBulkCopy 类以 5000 个批次将记录从控制台应用程序上传到数据库中。拆分文件大约需要 30 分钟，上传整个数据集（65+ 百万条记录）大约需要 4.5 小时。生成的文件大小和批量上传大小都是配置​​设置，我正在研究增加两者的值以提高性能。为了运行该应用程序，我们使用具有 16GB RAM 的四核服务器。该服务器也是数据库服务器。

**更新**

鉴于到目前为止的答案，请注意在导入之前：

*   数据库表被截断，所有索引和约束都被删除。
*   数据库被缩小，并且磁盘空间被回收。

导入完成后：

*   重新创建索引

如果您能提出任何不同的方法，或者我们可以改进现有导入应用程序的方法，我将不胜感激。谢谢。

**相关问题**

以下问题可能对处理此问题的其他人有用：

*   [将数百万条记录从平面文件插入 SQL Server 2005 的潜在陷阱](https://stackoverflow.com/questions/141556/potential-pitfalls-of-inserting-millions-of-records-into-sql-server-2005-from-fla)

**解决方案**

我调查了更改批处理大小和拆分文件大小的影响，发现 500 条记录的批处理和 200,000 条记录的拆分文件最适合我的应用程序。使用`SqlBulkCopyOptions.TableLock`也有帮助。有关详细信息，请参阅此[问题](https://stackoverflow.com/questions/779690/what-is-the-recommended-batch-size-for-sqlbulkcopy/869202#869202)的答案。

我还研究了使用 SSIS DTS 包和`BULK INSERT`SQL 脚本。SSIS 包看起来更快，但没有让我能够记录无效记录等`BULK INSERT`。SQL 脚本虽然比 SSIS 包慢，但比 C# 应用程序快得多。它确实允许我记录错误等，因此，我接受`BULK INSERT`来自[ConcernedOfTunbridgeWells](https://stackoverflow.com/users/15401/concernedoftunbridgewells)的答案作为解决方案。我知道这可能不是每个面临此问题的人的最佳答案，但它解决了我的直接问题。

感谢所有回复的人。

问候， MagicAndi

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-12T16:16:17.643

`BULK INSERT`从 DBMS 本身运行，从服务器上的目录（或安装在其上）读取由 bcp 控制文件描述的文件。编写一个应用程序，将文件拆分为更小的块，将它们放在适当的目录中，执行一个包装器，该包装器执行一系列`BULK INSERTS`. 如有必要，您可以并行运行多个线程。

这可能与批量加载一样快。此外，如果批量加载文件中有合适的分区键可用，请将临时表放在分区方案上。

此外，如果您要批量加载到具有聚集索引的表中，请确保数据按与索引相同的顺序排序。合并排序是您处理大型数据集的朋友。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T16:23:05.883

您是否尝试过 SSIS（SQL Server 集成服务）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-12T16:10:12.647

您已经在使用的[SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)类将是您最好的选择。您可以从这里在您的 c# 代码中做的最好的事情是对您的特定系统和数据进行试验，以查看哪种批量大小最有效。但你已经在这样做了。

除了客户端代码之外，您还可以对服务器做一些事情来使导入更有效地运行：

*   在开始导入之前尝试将表和数据库大小设置为足以容纳整个集合的大小。您不想在此过程中依赖自动增长。

*   根据数据的排序方式和表中的任何索引，您可能会更好地删除与导入记录的顺序不匹配的任何索引，然后在导入后重新创建它们。

*   最后，尝试并行运行它是很诱人的，几个线程同时进行批量插入。然而，最大的瓶颈几乎可以肯定是磁盘性能。您可以对物理服务器做的任何改进（新磁盘、SAN 等）都会有更多帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-12T17:22:43.243

您也许可以保存拆分文件的步骤，如下所示：

*   实例化 IDataReader 以从输入 CSV 文件中读取值。有几种方法可以做到这一点：最简单的可能是使用 Microsoft OleDb Jet 驱动程序。如果您需要更多信息，请在 Google 上搜索 - 例如，[此 StackOverflow 问题](https://stackoverflow.com/questions/115658/when-reading-a-csv-file-using-a-datareader-and-the-oledb-jet-data-provider-how-c)中有一些信息。

    [另一种方法是使用类似于www.csvreader.com](http://www.csvreader.com/)使用的技术。

*   实例化一个 SqlBulkCopy 对象，将 BatchSize 和 BulkCopyTimeout 属性设置为适当的值。

*   将 IDataReader 传递给 SqlBulkCopy.WriteToServer 方法。

我已经成功地将这种技术用于大文件，但没有你的那么大。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-13T07:53:11.967

请参阅[此](http://weblogs.sqlteam.com/mladenp/articles/10631.aspx)和[此](http://weblogs.sqlteam.com/mladenp/archive/2006/07/22/10742.aspx)博客文章进行比较。似乎最好的选择是使用 BulkInsert 并将 TABLOCK 选项设置为 true。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-12T16:10:53.330

您是否尝试过在 Sql Server 中使用[Bulk Insert 方法？](http://msdn.microsoft.com/en-us/library/ms188365.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-12T16:21:41.440

最近，我也不得不上传/导入很多东西（构建了一个 PHP 脚本）。

我决定对它们进行记录处理。

当然，这需要更长的时间，但对我来说，以下几点很重要： - 轻松暂停进程 - 更好的调试

这只是一个提示。

问候， 本尼迪克特

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-12T16:24:37.177

`BULK INSERT`可能已经是最快的方式了。您可以通过在稍后插入和重新建立索引和约束时删除索引和约束来获得额外的性能。最大的性能影响来自聚集索引。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-12T16:24:37.660

您是否为此尝试过 SQL Server 集成服务？处理这么大的文本文件可能会更好

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-12T16:24:46.630

只是为了检查，如果您要插入的表上没有索引，您的插入会更快。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-15T15:41:08.770

我的情况是：在使用 BLUK 插入 sql 的 SQL 服务器上创建 SSIS 包，在数据库中创建存储过程以可以从 T-SQL 代码运行该包

之后，使用 FTP 将用于 bluk 插入的文件发送到 SQL 服务器，并使用 SSIS 包使用infg 存储过程调用

# .net - WPF：在动态创建的控件上按名称从 EventTrigger 触发元素上的动画

> ID：853577
> 
> 赞同：3
> 
> 时间：2009-05-12T16:06:52.667
> 
> 标签：.net, wpf, xaml, event-triggers

我在 ItemsControl 的 DataTemplate 中有一个 Grid，所以这个网格会有很多副本。我想在网格上单击鼠标以触发 DataTemplate 之外的元素的情节提要。例如，我想为 Window 中其他地方存在的命名元素的 Transform 属性设置动画。

假设我的 DataTemplate 看起来像这样：

```
 <DataTemplate x:Key="myDataTemplate">
        <Grid>
            <Grid.Triggers>
                <EventTrigger RoutedEvent="UIElement.MouseLeftButtonUp">
                    <BeginStoryboard>
                        <Storyboard Storyboard.TargetName="myRectangle">
                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[1].(TranslateTransform.X)"
                                                 To="10" Duration="0:0:0.2" />
                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[1].(TranslateTransform.Y)"
                                                 To="10" Duration="0:0:0.2" />
                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)"
                                                 To="1" Duration="0:0:0.5" />
                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)"
                                                 BeginTime="0:0:0.5" To="1" Duration="0:0:0.5" />
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Grid.Triggers>
        </Grid>
    </DataTemplate> 
```

在我窗口的某个地方，我有一个看起来像这样的矩形：

```
 <Rectangle x:Name="myRectangle" Height="400" Width="400">
        <Rectangle.RenderTransform>
            <TransformGroup>
                <ScaleTransform ScaleX="0" ScaleY="0" />
                <TranslateTransform />
            </TransformGroup>
        </Rectangle.RenderTransform>
    </Rectangle> 
```

当 MouseLeftButtonUp 事件触发时，我得到以下异常：

在“System.Windows.Controls.Grid”的名称范围内找不到“myRectangle”名称。

有没有办法告诉故事板在哪里寻找这个名字的元素？我对仅 xaml 的解决方案（如果存在）特别感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T16:08:29.053

只要您尝试绑定的 xaml 元素是父元素，就可以通过使用 RelativeSource 绑定的 FindAncestor 模式在不同的名称范围（即数据模板外部）中查找 xaml 元素。绑定代码如下所示：

```
{Binding Path="myRectangle", RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Rectangle}}} 
```

故事板中的名称绑定可能完全是另一种动物，但也许您可以使用它。

# asp.net - 如何在 ASP.NET 中确定站点用户是唯一用户还是返回用户？

> ID：853579
> 
> 赞同：0
> 
> 时间：2009-05-12T16:07:00.763
> 
> 标签：asp.net, statistics, ip-address, web-statistics

单个用户在访问站点时可以在一段时间内显示为多个唯一用户。在内部，用户的 IP 地址是静态的，但在网络上，用户是由 ISP 路由器的 IP 地址代表的，不是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T16:13:13.310

您不能保证用户的 IP 地址是唯一的。

公司可能在防火墙/代理后面运行，因此所有请求都来自该单个 IP。

可能您最好的选择是在用户浏览网站时将 cookie 放到用户浏览器中，然后在后续访问时检查该 cookie 的存在。

但是即使这样也不能保证你，因为没有什么可以阻止用户在浏览器中清除他们的 cookie，或者从 IE 访问一次，下次从 Firefox 访问。

简而言之，没有保证的方法......但是有一些方法可以做出很好的猜测

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T16:13:25.370

对于访问您网站的每个客户，为他分配一个唯一 ID 并将其存储在 cookie 中。然后在每次访问您的网站时检查该 cookie，如果它丢失则设置它。然后，您可以按唯一 ID 记录客户端使用情况。

通常，您从客户端看到的 IP 地址是客户端的 ISP 为他提供的 IP 地址。这些通常是动态的。代理和路由器后面的客户端将共享 IP 地址。无论哪种方式，为每个客户端分配一个唯一的 cookie 都可以避免这些问题。

它不适用于禁用 cookie 的客户端。您必须默认使用这些 IP 地址，并冒着数据不正确的风险。或者您可以不登录此类用户，在这种情况下您的数据将不完整。没有可靠的方法来唯一区分每个用户，因此您只需要选择哪种方法对您的网站最有意义。

# php - php中的倒数日显示

> ID：853585
> 
> 赞同：1
> 
> 时间：2009-05-12T16:08:50.930
> 
> 标签：php, datetime, date, strtotime

我想显示特定日期缺少的天数。换句话说，我想显示如下内容：

> X 天去参加盛大的活动

使用 PHP 和服务器时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-12T16:14:19.627

```
<?php

    $event_date = '2010-01-01 00:00:00';
    $event_time = strtotime($event_date);
    $diff = $event_time - time();
    echo floor($diff/(24*60*60)).' days to go for the great event';

?> 
```

**注意**：我完全不考虑任何*时*区问题，因此，请务必阅读与使用 PHP`datetime`函数相关的时区问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T16:20:07.310

如果我有 15 名代表，jakemcgraw 的回答会得到我的投票。:)

不过，您可能想要使用 mktime() 而不是 strtotime()。

# wpf - Silverlight 按钮样式

> ID：853586
> 
> 赞同：0
> 
> 时间：2009-05-12T16:09:13.223
> 
> 标签：wpf, silverlight, blend

我正在尝试使用 silverlight 的新样式，并创建了一个新的按钮皮肤，其中包含一个边框和一个文本块。想知道当按钮的 content(text) 属性改变时是否有办法改变文本块的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T17:42:55.193

绑定看起来像这样：

```
<TextBlock Text="{TemplateBinding Content}"/> 
```

问题是当我尝试将内容设置为文本以外的内容时：

```
 <Button>
        <Button.Content>
            <Rectangle Fill="#FFB51111"/>
        </Button.Content>
    </Button> 
```

在这种情况下，使用 ContentPresenter 会更好。它使用相同的绑定表达式，但可以显示的不仅仅是文本。但这一切都取决于你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T16:32:45.870

我真的不明白你想做什么。通常，您会在按钮内容中包含这样的 TextBlock。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T13:41:41.770

在模板中使用 ContentPresenter 而不是 TextBlock。

# winforms - 为 WinForm 应用程序添加一些吸引眼球的免费库？

> ID：853590
> 
> 赞同：2
> 
> 时间：2009-05-12T16:09:43.160
> 
> 标签：winforms

我想为一些灰色的 WinForm 应用程序增添趣味。免费 WinForm 库的任何建议。

我在[http://www.codeproject.com/KB/buttons/aquabutton.aspx看到了 AquaButtons](http://www.codeproject.com/KB/buttons/aquabutton.aspx)

我正在寻找更多功能的免费库，这些库可以向窗格、标题栏、工具栏等添加类似的按钮、颜色渐变。

此外，如果您知道网络上的示例应用程序看起来很漂亮，也许是 WPF'ish、WinForm 应用程序，我可以从中获得一些想法，那就太好了。（我不打算将 WPF 控件放在 WinForm 应用程序中）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T16:18:27.797

[氪金](http://www.componentfactory.com/)控制很不错

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-14T07:08:16.047

[asend.net](http://ascendnet.codeplex.com/)是一个不错的简单控件工具包。而且它们都是免费的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-27T17:50:48.270

即使它是一个旧的病后遮阳篷:)

所以截至目前有：（据我所知）

1.  [材质皮肤](https://github.com/IgnaceMaes/MaterialSkin)- C# 的材质设计
2.  [Metro Framework](https://github.com/thielj/MetroFramework) - 添加 Metro 风格的控件
3.  [LimitlessUI](https://github.com/WithoutCaps/LimitlessUI) - 真正由 urs 制作......添加了易于使用的简单控件的小库

# java - 以编程方式将网站放入新的 Word 文件中......在 Java 中

> ID：853600
> 
> 赞同：3
> 
> 时间：2009-05-12T16:11:27.993
> 
> 标签：java, url, ms-word

是否可以以编程方式将网页内容放入 Word 文件中？

更复杂的是，我想在 Java 中执行这些步骤（如果必须使用 JNI）。

以下是我想以编程方式执行的步骤，然后是我今天手动执行的方式：

1.  提供带有 URL 的方法*（手动：在 Firefox 中打开页面）*
2.  复制该 URL 的内容*（手动：Ctrl-A 全选）*
3.  创建一个新的 Word 文档*（手动：打开 Microsoft Word）*
4.  将 URL 的内容粘贴到 Word 中*（手动：Ctrl-V 粘贴）*
5.  保存 Word 文件*（手动：保存 Word 文件）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T16:18:12.960

恕我直言，您可以更好地使用 HTTP 下载文件，然后使用[Apache POI](http://poi.apache.org/hwpf/index.html)创建一个新的 word 文件并将 HTTP 流复制到 word 文件中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T16:20:37.073

[HTMLUnit](http://htmlunit.sourceforge.net/)可用于以编程方式打开页面（必要时伪装成 Firefox），[Apache POI](http://poi.apache.org/)可用于创建 Microsoft Word 文件（Word 97 格式）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T16:30:16.043

[本文](http://blogs.msdn.com/dotnetinterop/archive/2005/03/29/java-and-ms-word.aspx)介绍了一种在 Java 中操作 MS-Word doc 文件的方法，仅使用字符串替换或 XSLT。

至于抓取 URL 的内容，这是任务中较简单的部分，您可以通过一些非常简单的事情来完成。

```
import java.net.URL;
import java.net.URLConnection;
import java.io.InputStreamReader;
import java.io.BufferedReader;

public class util
{

  public String HttpGet(String urlString)
  {
    String resultData= null;
    try
    {
      URL url = new URL(urlString);
      URLConnection conn = url.openConnection();
      conn.connect();

      BufferedReader br = new BufferedReader(new InputStreamReader(conn.getInputStream()));
      String line = null;
      java.lang.StringBuffer sb1= new java.lang.StringBuffer();
      while ( (line = br.readLine()) != null)
        sb1.append(line);

      resultData= sb.toString();
      mStatus= "gotprice";

    } 
    catch (java.lang.Throwable e)
    {
      e.printStackTrace();
    }
    return resultData;
  }

} 
```

# web-services - 安全 Web 服务：基于 HTTPS 的 REST 与 SOAP + WS-Security。哪个更好？

> ID：853620
> 
> 赞同：183
> 
> 时间：2009-05-12T16:14:07.070
> 
> 标签：web-services, security, rest, soap

我无论如何都不是安全专家，但我喜欢创建 REST 风格的 Web 服务。

在创建需要确保其传输的数据安全的新服务时。我们已经就哪种方法更安全进行了辩论——REST 与 HTTPS 或 SOAP WS 与 WS-Security。

我的印象是我们可以对所有的 Web 服务调用使用 HTTPS，而且这种方法是安全的。我的看法是，“如果 HTTPS 对银行和金融网站来说足够好，那对我来说就足够好了”。再说一次，我不是这个领域的专家，但我认为这些人已经对这个问题进行了相当多的思考并且对 HTTPS 很满意。

一位同事不同意并说 SOAP 和 WS-Security 是唯一的出路。

网络似乎无处不在。

也许这里的社区可以权衡每个人的利弊？谢谢！

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2009-05-12T16:44:58.953

HTTPS 保护了通过网络传输消息的安全，并为客户端提供了有关服务器身份的一些保证。这对您的银行或在线股票经纪人来说很重要。他们对验证客户端的兴趣不在于计算机的身份，而在于您的身份。因此，卡号、用户名、密码等用于对您进行身份验证。然后通常会采取一些预防措施来确保提交的内容没有被篡改，但总的来说，会话​​中发生的任何事情都被视为由您发起。

WS-Security 提供从消息创建到消息使用的机密性和完整性保护。因此，不是确保通信内容只能由正确的服务器读取，而是确保它只能由服务器上的正确进程读取。而不是假设安全发起的会话中的所有通信都来自经过身份验证的用户，每个通信都必须签名。

这里有一个涉及裸体摩托车手的有趣解释：

[https://docs.microsoft.com/archive/blogs/vbertocci/end-to-end-security-or-why-you-shouldnt-drive-your-motorcycle-naked](https://docs.microsoft.com/archive/blogs/vbertocci/end-to-end-security-or-why-you-shouldnt-drive-your-motorcycle-naked)

因此 WS-Security 提供了比 HTTPS 更多的保护，而 SOAP 提供了比 REST 更丰富的 API。我的观点是，除非您真的需要额外的功能或保护，否则您应该跳过 SOAP 和 WS-Security 的开销。我知道这有点逃避，但是关于实际上有多少保护是合理的（不仅仅是建造什么很酷）需要由那些熟悉这个问题的人来决定。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2011-08-28T01:55:40.070

REST 安全性依赖于传输，而 SOAP 安全性则不是。

REST 从底层传输继承安全措施，而 SOAP 通过 WS-Security 定义自己的安全措施。

当我们谈论 REST 时，通过 HTTP - 应用 HTTP 的所有安全措施都被继承，这被称为传输级安全性。

传输级别的安全性，仅在您的信息在线时保护您的信息 - 一旦它离开线路，信息就不再受到保护。

但是，对于 WS-Security，它的消息级安全性 - 即使消息离开传输通道，它仍然会受到保护。此外 - 使用消息级别的安全性，您可以部分加密消息 [不是整个消息，而是只加密您想要的部分] - 但使用传输级别的安全性，您无法做到这一点。

WS-Security 具有身份验证、完整性、机密性和不可否认性措施，而 SSL 不支持不可否认性 [使用 2-legged OAuth]。

在性能方面，SSL 比 WS-Security 快得多。

谢谢...

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2009-05-12T16:29:34.813

从技术上讲，您的措辞方式都不正确，因为 SOAP 方法的通信不安全，而 REST 方法没有说明任何关于验证合法用户的内容。

HTTPS 可防止攻击者[窃听](http://en.wikipedia.org/wiki/Eavesdropping)两个系统之间的通信。它还验证主机系统（服务器）实际上是用户打算访问的主机系统。

WS-Security 防止未经授权的应用程序（用户）访问系统。

如果 RESTful 系统具有验证用户身份的方法，并且具有 WS-Security 的 SOAP 应用程序使用 HTTPS，那么两者实际上都是安全的。这只是呈现和访问数据的一种不同方式。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2009-05-12T16:25:13.510

请参阅[维基](http://en.wikipedia.org/wiki/WS-Security)文章：

> 在点对点情况下，机密性和数据完整性也可以通过使用传输层安全性 (TLS) 来强制 Web 服务，例如通过 https 发送消息。
> 
> 然而，WS-Security 解决了维护消息完整性和机密性的更广泛问题，直到消息从始发节点发送后，提供所谓的端到端安全性。

那是：

*   HTTPS 是一种传输层（点对点）安全机制
*   WS-Security 是一种应用层（端到端）安全机制。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2009-07-04T07:39:53.307

正如您所说，REST 对银行来说已经足够好了，所以对您来说应该已经足够好了。

安全性有两个主要方面：1）加密和2）身份。

在 SSL/HTTPS 中传输提供了在线加密。但是您还需要确保两台服务器都可以确认他们知道他们在与谁交谈。这可以通过 SSL 客户端证书、共享机密等。

我确信有人可以证明 SOAP “更安全”，但可能没有任何重要意义。裸体摩托车手的比喻很可爱，但如果准确则意味着整个互联网都是不安全的。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2009-05-13T03:25:30.760

我还没有添加评论所需的代表，否则我只会将其添加到贝尔的回答中。我认为贝尔在总结这两种方法的顶级优缺点方面做得非常好。您可能需要考虑的其他一些因素：

1）您的客户端和您的服务之间的请求是否需要通过需要访问有效负载的中介？如果是这样，那么 WS-Security 可能更合适。

2) 实际上可以使用 SSL 向服务器提供关于客户端身份的保证，使用称为相互身份验证的功能。但是，由于配置的复杂性，这在一些非常专业的场景之外并没有太多用处。所以贝尔是对的，WS-Sec 更适合这里。

3) 通常，由于证书管理问题，SSL 的设置和维护（即使在更简单的配置中）有点困难。拥有知道如何为您的平台执行此操作的人将是一大优势。

4) 如果您可能需要进行某种形式的凭证映射或身份联合，那么 WS-Sec 可能值得付出这些开销。并不是说你不能用 REST 做到这一点，你只是有更少的结构来帮助你。

5) 将所有 WS-Security goop 放到事物客户端的正确位置可能比您想象的更痛苦。

最后，尽管它确实取决于很多我们不太可能知道的事情。对于大多数情况，我会说任何一种方法都“足够安全”，因此这不应该是主要的决定因素。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2012-06-07T07:32:44.460

```
Brace yourself, here there's another coming :-) 
```

今天我不得不向我的女朋友解释 WS-Security 与 HTTPS 的表达能力之间的区别。她是一名计算机科学家，因此即使她不了解所有的 XML 庞然大物，她也能理解（可能比我更好）加密或签名的含义。然而，我想要一个强烈的形象，这可以让她真正理解事物的用途，而不是它们是如何实现的（后来出现了，她没有逃避它:-)）。

所以它是这样的。假设您赤身裸体，您必须将摩托车开到某个目的地。在 (A) 的情况下，你穿过一条透明的隧道：你唯一不会因猥亵行为而被捕的希望是没有人在看。这并不是你能想出的最安全的策略……（注意那家伙额头上的汗水:-)）。这等同于明确的 POST，当我说“等效”时，我的意思是。在 (B) 的情况下，你的情况更好。隧道是不透明的，所以只要您进入其中，您的公共记录就是安全的。然而，这仍然不是最好的情况。您仍然必须离开家并到达隧道入口，一旦走出隧道，您可能必须下车并走到某个地方……这适用于 HTTPS。真的，您的消息在跨越最大的鸿沟时是安全的：但是一旦您将其传递到另一端，您就真的不知道它必须经过多少阶段才能到达处理数据的真正点。当然，所有这些阶段都可以使用不同于 HTTP 的东西：例如，一个经典的 MSMQ 缓冲无法立即提供服务的请求。如果有人在预处理过程中潜伏您的数据，会发生什么？嗯。（把这个“嗯”读成墨菲斯在句子“你认为你呼吸的是空气吗？”结尾处所说的那个）。这个比喻中的完整解决方案 (c) 非常简单：给自己穿一些该死的衣服，尤其是骑摩托车时戴上头盔！！！因此，您可以安全地四处走动，而不必依赖环境的不透明性。希望这个比喻很清楚：衣服随你而去，不管是什么意思或周围的基础设施，就像消息级别的安全一样。此外，您可以决定遮盖一部分但透露另一部分（您可以根据个人情况这样做：机场安检可以脱掉您的夹克和鞋子，而您的医生可能有更高的访问权限），但请记住，短袖衬衫是即使您为自己的二头肌感到自豪，也是不好的做法：-)（最好是马球或 T 恤）。

我很高兴地说她明白了！不得不说，衣服的比喻很厉害：我很想用它来介绍政策的概念（迪斯科俱乐部不让你穿运动鞋；你不能穿着内衣去银行取钱，虽然这是在冲浪时保持平衡时完全可以接受的外观；等等）但我认为一个下午就足够了 ;-)

建筑 - WS, Wild Ideas

礼貌： http: [//blogs.msdn.com/b/vbertocci/archive/2005/04/25/end-to-end-security-or-why-you-shouldn-t-drive-your-motorcycle-naked。 aspx](http://blogs.msdn.com/b/vbertocci/archive/2005/04/25/end-to-end-security-or-why-you-shouldn-t-drive-your-motorcycle-naked.aspx)

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2012-11-07T18:59:55.860

我每天都在这个领域工作，所以我想总结一下对此的好评，以结束这个问题：

SSL (HTTP/s) 只是一层确保：

1.  连接到的服务器提供证明其身份的证书（尽管这可以通过 DNS 中毒进行欺骗）。
2.  通信层是加密的（没有窃听）。

WS-Security 和相关标准/实现使用 PKI：

1.  证明客户的身份。
2.  证明消息未在传输过程中被修改 (MITM)。
3.  允许服务器对客户端进行身份验证/授权。

最后一点对于服务请求很重要，因为客户端（调用者）的身份对于了解他们是否应该被授权从服务接收此类数据至关重要。标准 SSL 是单向（服务器）身份验证，并且不识别客户端。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2009-05-14T08:46:52.860

答案实际上取决于您的具体要求。

例如，您是否需要保护您的网络消息或不需要机密性，而您只需要验证终端方并确保消息完整性？如果是这种情况——而且通常是 Web 服务——HTTPS 可能是错误的锤子。

但是 - 根据我的经验 - 不要忽视您正在构建的系统的复杂性。不仅 HTTPS 更容易正确部署，而且依赖于传输层安全性的应用程序更容易调试（通过纯 HTTP）。

祝你好运。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2012-04-08T18:50:08.450

REST Over HTTPS 应该是一种安全的方法，只要 API 提供者实现对服务器端的授权。在 Web 应用程序的情况下，我们所做的是通过 HTTPS 和一些身份验证/授权访问 Web 应用程序，传统上 Web 应用程序没有安全问题，那么 Restful API 也可以毫无问题地解决安全问题！

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2012-02-28T20:59:46.243

如果您的 RESTFul 调用来回发送嵌入在 HTTP 请求的 Html 正文中的 XML 消息，您应该能够在使用任何安全功能的同时在 XML 消息中获得 WS-Security 的所有好处，例如 XML 加密、证书等可从 http 获得，例如 SSL/TLS 加密。

# ruby-on-rails - 开发人员在 Ruby on Rails 或 Grails 上的工作效率更高吗？

> ID：853624
> 
> 赞同：4
> 
> 时间：2009-05-12T16:15:58.470
> 
> 标签：ruby-on-rails, grails

鉴于 Ruby on Rails (RoR) 和 Grails 都可以在 JVM（Java 虚拟机）上运行，哪种语言和框架可以使同样有能力和经验的开发人员提高生产力，大致可以提高多少百分比？（即，以相同的努力提供更多的业务功能）

我知道 Java 开发人员更容易过渡到 Grails。而且我意识到 Grails 开发人员可以使用整个 Java 库。我的问题是关于开发人员在使用标准应用程序服务器（WAS、Weblogic、JBOSS、TOMCAT 等）在 Linux 上的 JVM 上运行的环境中的生产力。注意：JRuby 将用于使 RoR 在 JVM 上运行。

我会向那些使用 ROR 和 Grails 完成重要 Web 应用程序开发的人寻求答案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-13T00:20:01.237

如果您正在寻找的只是[75% 的答案](http://lbrandy.com/blog/2009/05/the-75-answer/)：grails

尽管我的主要 Rails 经验大约在一年半前结束（在 rails 2.x 发布之前），但我在这两个平台上都进行了重大开发。

自 grails 0.5 以来，我一直在积极参与 grails 的开发。

答案实际上更多地取决于可用于该项目的开发人员和基础设施。如果您希望部署到标准的 Java 应用程序容器（如 Tomcat），我认为 Grails 是更好的选择。如果你想用杂种/机架/磅/等做点什么。挑选铁轨。

如果有适合您的业务问题的特定宝石/罐子，那显然会影响您的决定。

对我来说选择 Grails 并不是因为我认为它更擅长解决各种问题，而是因为我更喜欢 grails 开发者社区，[我更喜欢 groovy 语言](https://stackoverflow.com/questions/288074/groovy-advantages-over-jython-or-jruby/289269#289269)。

我还发现 grails 比 ruby​​/rails 更容易卖给我工作过的地方。这里有更多的 Java 商店，他们实现这种转变并不是一个飞跃。

这是个人喜好，我很容易看到其他人走另一条路。

Rails 有很多事情要做，而且我认为那里的测试驱动开发故事要好得多（尽管我正在[努力解决这个问题](http://naleid.com/blog/2009/04/14/grails-build-test-data-01-plugin-released/)）。

# c# - 通过 set 访问器通过其容器的 get 访问器为属性分配值是一件坏事吗？

> ID：853638
> 
> 赞同：2
> 
> 时间：2009-05-12T16:20:54.140
> 
> 标签：c#, oop, properties

考虑以下代码：

```
class Program
{
    static void Main(string[] args)
    {
        Department deathStar = new Department { Name = "Death Star" };

        Console.WriteLine("The manager of {0} is {1}.", deathStar.Name, deathStar.Manager.FullName);

        deathStar.Manager.FirstName = "Lord";

        Console.WriteLine("The manager of {0} is {1}.", deathStar.Name, deathStar.Manager.FullName);

        Console.ReadLine();
    }
}

public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }

    public string FullName
    {
        get
        {
            return this.FirstName + " " + this.LastName;
        }
    }
}

public class Department
{
    public string Name { get; set; }

    public Person Manager { get; private set; }

    public Department()
    {
        this.Manager = new Person { FirstName = "Darth", LastName = "Vader" };
    }
} 
```

产生以下输出：

> ```
> The manager of Death Star is Darth Vader.
> The manager of Death Star is Lord Vader. 
> ```

即使我不能将 Manager 更改为 Person 的不同或新实例（私有集访问器），我也可以更改它的属性（具有公共集访问器）。

那么，通过 set 访问器通过其容器的 get 访问器为属性分配值是一件坏事吗？换句话说，这是代码异味吗？

**编辑：**

这只是一个示例来说明一个观点。仅为此示例创建人员和部门。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T16:28:20.480

不一定。

例如，查看 SqlCommand 对象的参数集合。您可以更改集合中的项目，但不能将新的参数集合分配给命令对象。

以您的示例为例，如果您有一个维护 Person 对象的 UI，并且您需要更改人员的名字，那么更改人员的名字是完全有效的，不理会姓氏和 PersonId 字段，然后使用 PersonId 更新数据库表场地。

对我来说一切都很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T19:10:14.910

是的，这是代码异味。

虽然这似乎是一种相当无害的做法，但公共属性会将您的类的字段暴露给任意更改，并创建对实现细节的不必要的依赖。您也可以使用结构。*（我也不是暗示结构不好。过程编程与 OOP 一样有用。这完全取决于要解决的问题）*封装的重点是对类的依赖项隐藏实现细节。相反，您应该公开允许依赖类修改内部数据而无需知道其实现的抽象接口。考虑以下示例：

```
public interface Vehicle {
    double FuelTankCapacityInGallons{get;}
    double GallonsOfGasoline{get;}
}

public interface Vehicle {
    double getPercentFuelRemaining();
} 
```

两个界面都会为您提供剩余的汽油量。第一个通过具体术语，第二个通过抽象。如果油箱的大小发生变化，或者您需要实现欧洲汽车，第一个示例将需要同时更改车辆和使用它的任何类别。而第二个只需要更改车辆实现。

我使用的示例来自Robert C. Martin所著的*Clean Code - A Handbook of Agile Software Craftsmanship 一书。*

我也会查找[得墨忒耳法则](http://en.wikipedia.org/wiki/Law_of_Demeter)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T16:29:59.260

我会说这条线：

```
deathStar.Manager.FirstName = "Lord"; 
```

它的意图非常清楚，所以它不会打扰我。

困扰我的是Manager上的私人设置。

这意味着一旦创建了一个部门，它的经理就永远不能改变。

作为现实的模型，这是一个大时代的气味。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T18:46:20.627

这是“坏事”吗？本质上不是。这是否表明您应该重新检查您的课程设计？是的。为什么创建`Department`修改`Person`对象的东西？你应该实现一个`ChangeManager`方法`Department`吗？也许，也许不是。但这是一个值得问的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T19:22:28.603

只要 Person 不是 struct 就不是问题：如果是，则 Manager 属性将返回 Person 的副本，并且您将在该副本上设置 FirstName 属性，而不是在部门的经理上。但无论如何，如果你试图这样做，编译器会尖叫......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-14T06:22:30.523

这是 OOP 纯度的问题。
并非所有代码都应该是纯 OOP。这是项目复杂性、涉及的程序员数量、可维护性等问题。
您的示例非常简单，这就是为什么您可以阅读这么多意见的原因
。有时很难用简单的示例来说明 OOP 的优势。

无论如何，我的想法是：
它闻起来。
真正困扰我的代码行是

```
deathStar.Manager.FirstName = "Lord"; 
```

它可以很容易地变成类似的东西

```
deathStar.Manager.Address.City.Name = "Paris" 
```

因此，在一行代码中，您会看到 4 个正在使用的类！这是一个非常强的假设，即所有 4 个类的耦合保持不变。换句话说，它使类保持高度耦合。
您可以通过使用接口而不是具体类来解决此问题，并且您可以采用“告诉不要问”指南（[雅虎搜索](http://search.yahoo.com/search?p=%22tell+don%27t+ask%22+oop&fr=yfp-t-501&toggle=1&cop=mss&ei=UTF-8)；是的，雅虎）。
[这是一个很好的 PDF](http://oreilly.com/catalog/bfljava/chapter/ch03.pdf)，讨论了 OOP 和重构（在 Java 中，但这些想法很容易理解），请参阅“传递耦合”部分。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-05-12T16:34:38.707

我认为这是人们如此吹捧函数式语言的原因之一——没有“副作用”。我认为这在技术上没有任何问题，但它会使维护变得非常困难。套用侏罗纪公园的话说，“......只是因为你可以做某事，并不意味着你应该做！”

# iphone - 将 google 的 turn by turn 指令嵌入 iPhone 应用程序是否违反条款和服务？

> ID：853647
> 
> 赞同：2
> 
> 时间：2009-05-12T16:23:29.973
> 
> 标签：iphone

我正在尝试将 Google 的指示嵌入到 iphone 应用程序中，除了添加 UIWebView 之外，似乎没有一种直接的方式来逐个提取数据（特别是 JSON 数据）。

我想知道这是否是违反服务条款的问题，还是只是尚未针对 iphone 实施的问题。

我已经在 Flash 中看到了 Google 的方向数据导入和样式，但除了链接到 Google 地图 iphone 应用程序之外，我没有看到任何与地图相关的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T16:47:29.230

来自[谷歌地图使用条款](http://www.google.com/intl/en_us/help/terms_maps.html)

> 2：**使用限制。** 除非您事先获得 Google（或，如适用，特定内容的提供者）的书面授权，否则您不得：
> 
> (a) 通过产品中提供的技术或方式以外的任何技术或方式，或通过谷歌可能指定的其他明确授权方式（例如通过谷歌地图/谷歌地球 API）访问或使用产品或任何内容；
> 
> (b) 复制、翻译、修改或制作内容或其任何部分的衍生作品；
> 
> (c) 重新分发、再许可、出租、发布、出售、转让、租赁、营销、转让或以其他方式将产品或内容提供给第三方；
> 
> (d) 反向工程、反编译或以其他方式试图提取服务或其任何部分的源代码，除非适用法律明确允许或要求这样做；
> 
> (e) 以使您或任何其他人能够访问任何内容的大量下载或批量馈送的方式使用产品，包括但不限于数字纬度或经度坐标、图像和可见地图数据；
> 
> (f) 删除、隐藏或以任何方式更改产品或内容中出现的任何警告、通知（包括但不限于任何版权或其他所有权通知）或链接；或者
> 
> **(g) 将服务或内容与任何产品、系统或应用程序一起用于 (i) 实时导航或路线引导，包括但不限于与您的位置同步的逐向路线引导用户的传感器设备；(ii) 用于自动或自主控制车辆行为的任何系统或功能。**

我不知道您的应用程序的细节，但我认为第 2.g 条很容易遇到问题。

# django - Django - 处理视图中的列表列表

> ID：853648
> 
> 赞同：1
> 
> 时间：2009-05-12T16:23:38.210
> 
> 标签：django

我在模型中有一个函数，它返回一个列表列表 - [[a1,a2],[b1,b2]]。我将它传递给视图。但是，我如何访问每个值。我想显示 a1,a2 ,b1 和 b2 分开。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T17:07:44.487

```
{% for item in mylist %}
  {{item.0}}<br />
  {{item.1}}
{% endfor %} 
```

应该显示

```
a1
a2
b1
b2 
```

# php - 在 Zend 框架中创建非常简单的命名路由，使用它的 MVC

> ID：853649
> 
> 赞同：0
> 
> 时间：2009-05-12T16:24:26.740
> 
> 标签：php, zend-framework

我刚刚使用 Zend 框架及其 MVC 构建了一个非常基本的站点。（实际上，目前我什至没有使用模型，到目前为止，它只是用于静态信息的控制器/视图）。

当我开始玩弄表单时，我意识到在 Zend_Form 的示例中他们使用了类似这样的东西，这设置了表单的操作：

```
$form->setAction('/user/login') 
```

其中包含 URL。我知道 Zend 框架有路由并且可以命名它们，但我似乎无法从手册中掌握如何为某些控制器/动作创建简单的路由，以便我可以执行以下操作：

```
$form->setAction($named_route)
// or 
$form->setAction('named_route') 
```

我希望我的问题很清楚。我无法找到任何重复的问题，但如果你发现一个并指出它，我不会介意。

资源链接与示例一样好，因此如果您知道某处有不错的博客文章，请不要浪费您的时间。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T19:28:49.483

**参考：** [http](http://framework.zend.com/manual/en/zend.controller.router.html#zend.controller.router.routes.standard) ://framework.zend.com/manual/en/zend.controller.router.html#zend.controller.router.routes.standard - 寻找“12.5.7.1\. Zend_Controller_Router_Route”以获得更清晰的解释。

这不是最好的方法，但我有一个工作示例。欢迎指正。在看到[Shorten Zend Framework Route Definitions](https://stackoverflow.com/questions/794126/shorten-zend-framework-route-definitions)之后，我同意命名路由应该放在它们自己的配置中（我使用 Django，命名的 Views/URLs 通常是分开的） - 但在这里我只是要在我的引导程序中定义路由。

所以，在 Bootstrap.php 中，当然，在 Bootstrap 类中，我创建了一个将自动运行的函数，如下所示：

```
public function _initRoutes()
{
    $frontController = Zend_Controller_Front::getInstance();
    $route = new Zend_Controller_Router_Route(
        'login/', // The URL, after the baseUrl, with no params.
        array(
            'controller' => 'login', // The controller to point to.
            'action'     => 'index'  // The action to point to, in said Controller.
        )
    );
    $frontController->getRouter()->addRoute('loginpage', $route);
} 
```

在上面的示例中，“loginpage”将是“命名路由”的名称。

所以，在我的 LoginController 内部，（在构建表单的函数中）而不是做

```
$form->setAction('/blah/login') 
```

我检索命名路由的 URL 并将其传入，如下所示：

```
$form_action_url = $this->view->Url(array(), 'loginpage', true);
// -- SNIP --
$form->setAction($form_action_url) // ... 
```

这可能毫无意义和错误，但目前似乎有效。当 Zend Framework 自动将 URL 处理为 /Controller/View(Action)/ 时，我想要一个命名 URL 的原因是因为我对这种事情很感兴趣。我一直在使用 Django，其中的 URL 是预定义的，我喜欢这种方式。

开箱即用的 Zend Framework MVC url 非常好。

随意添加注释和更正它应该如何工作！

# ruby-on-rails - RAILS_ENV 和 rails 2.3.2

> ID：853662
> 
> 赞同：4
> 
> 时间：2009-05-12T16:27:45.737
> 
> 标签：ruby-on-rails

我注意到在 rails 2.3.2 中没有更多选项来设置您正在使用的 rails 环境。所以我不能再在 environment.rb 中设置它了吗？还有其他方法可以设置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T16:45:05.567

`RAILS_ENV=production rake db:migrate`

你到底想跑什么？轨道发电机？耙子任务？杂种？我不确定这实际上是 Rails 问题。

免责声明：但是，我没有使用 2.3.2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T16:48:19.243

也许你的意思是在`config/environment.rb`？

我有 90% 的把握，如果需要，您可以在此处添加该行。**我错了**，请参阅下面的副总裁评论。（测试并确认）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-09-15T07:39:49.743

我正在使用应该类似于 2.3.2 的 rails 2.3.5，terry lorber 是对的，

RAILS_ENV=xyz 是使用从命令行指定的 RAILS_ENV 启动 rails 东西的确切方法。

这样你就可以在你的不同环境中使用rake、script/console script/runner script/server等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T16:33:29.690

我认为这是一个命令行参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-06-29T14:34:16.107

在 config/environments/production.rb 或 development.rb 或您正在运行的任何其他模式中定义，例如 stage.rb，而不是在 config/environment.rb 中编写/定义

我正在使用它，它服务于我的目的。不要使用关键字RAILS_ENV（我没有尝试过）我在生产环境文件中使用APP_MODE =“Production”，在开发文件中使用APP_MODE =“Development”。

然后您可以在您的应用程序中使用它来检测您处于哪种模式。

希望，我回答这个问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-03T06:55:27.547

如果您想在开发中运行应用程序，

```
ruby script/server 
```

要在生产中运行，

```
ruby script/server -e production 
```

# c# - 是否可以在 datagridview 中切换行和列？

> ID：853663
> 
> 赞同：9
> 
> 时间：2009-05-12T16:27:52.540
> 
> 标签：c#, winforms, datagridview

我在 DataTable 中有 10 条数据记录，其中包含 3 个字段“Foo”、“Bar”和“Baz”。

如果我将它连接到 DataGridView 中，我会看到 10 行和 3 列，并且列标题显示字段的名称。

我想知道反转行和列是多么容易，以便使用相同的数据我最终得到 3 行和 10 列，字段名称显示在行标题中。

* * *

我可以手动做一些事情，比如覆盖 OnPaint 方法并将字段名称直接绘制到行标题单元格中，但我正在寻找更自动化的东西。

同样，建议手动交换值，但除非我将所有值都设为字符串，否则这是行不通的。数据表中的 3 列 - 类型为 int、float 和 string 的 Foo、Bar 和 Baz 不会转置。

即使我管理了所有这些手动更改，我的数据网格也有 CheckBox 列、ComboBox 列 - 不存在这样的行对应项 - 没有 CheckBox 行或 ComboBox 行。我目前只需要告诉编译器“添加一个 ComboBoxColumn”我必须重新编写，以便每个单元格都是单独生成的。

理想情况下，我想要一个 TransposableDataGridView，它公开了 DataGridView 的所有功能，并带有一个额外的 bool 属性“Transposed”。这样我就可以让我的所有代码保持原样——除了网格的类型之外，我不需要更改任何内容。

如果不存在这样的东西，我可能只需要去写它。（应该只需要我一年左右的时间！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T19:13:08.760

您可以创建新的 DataTable，添加适当数量的列，然后将值从一个表复制到另一个表，只需交换行和列。

我不认为您可以像设置列标题一样设置行标题（或者至少我不知道如何），因此您可以将字段名称放在单独的列中。

```
DataTable oldTable = new DataTable();

...

DataTable newTable = new DataTable();

newTable.Columns.Add("Field Name");
for (int i = 0; i < oldTable.Rows.Count; i++)
    newTable.Columns.Add();

for (int i = 0; i < oldTable.Columns.Count; i++)
{
    DataRow newRow = newTable.NewRow();

    newRow[0] = oldTable.Columns[i].Caption;
    for (int j = 0; j < oldTable.Rows.Count; j++)
        newRow[j+1] = oldTable.Rows[j][i];
    newTable.Rows.Add(newRow);
}

dataGridView.DataSource = newTable; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-08-05T13:08:39.297

我使用**Developer Express Vertical Grid** .. 这就像你想要一个旋转的网格。它还允许每行使用不同的编辑器。

[链接到垂直网格产品页面](http://www.devexpress.com/Products/NET/Controls/WinForms/Vertical_Grid/features-layoutoptions.xml)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T17:09:15.530

您可以通过以编程方式添加所需的列数（例如，增加 7 列以达到 10）然后以编程方式将 row、col 与 col、row 交换来做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-11T14:35:49.900

将 LayoutTransform 应用于 DataGrid：

```
<DataGrid Name = "reverseThis">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Top" Binding="{Binding Path=Top}"/>
        <DataGridTextColumn Header="Middle" Binding="{Binding Path=Middle}"/>
        <DataGridTextColumn Header="Bottom" Binding="{Binding Path=Bottom}"/>
    </DataGrid.Columns>
    <DataGrid.LayoutTransform>
        <TransformGroup>
            <RotateTransform Angle="-90"/>
            <ScaleTransform ScaleX="1" ScaleY="-1" />
        </TransformGroup>
    </DataGrid.LayoutTransform> 
```

您还需要反转列标题：

```
<DataGrid.ColumnHeaderStyle>
    <Style TargetType="{x:Type DataGridColumnHeader}"
                                   BasedOn="{StaticResource {x:Type DataGridColumnHeader}}">
        <Setter Property="LayoutTransform">
            <Setter.Value>
                <TransformGroup>
                    <RotateTransform Angle="-90"/>
                    <ScaleTransform ScaleX="1" ScaleY="-1" />
                </TransformGroup>
            </Setter.Value>
        </Setter>
        <Setter Property="FontWeight" Value="Bold"></Setter>
    </Style>
</DataGrid.ColumnHeaderStyle> 
```

和单元格，否则它们会镜像和旋转：

```
 <DataGrid.CellStyle>
        <Style TargetType="DataGridCell" >
            <Setter Property="LayoutTransform">
                <Setter.Value>
                    <TransformGroup>
                        <RotateTransform Angle="-90"/>
                        <ScaleTransform ScaleX="1" ScaleY="-1" />
                    </TransformGroup>
                </Setter.Value>
            </Setter>
        </Style>
    </DataGrid.CellStyle>

</DataGrid> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-25T12:18:57.280

在我的情况下，还需要为新表的所有列添加名称。我写了一个函数来生成一个这样的转置表：

```
static public DataTable Transpose(DataTable inputTable, List<string> newColumnNames)
{
    DataTable outputTable = new DataTable();

    ///You should also verify if newColumnsNames.Count matches inputTable number of row

    //Creates the columns, using the provided column names.
    foreach (var newColumnName in newColumnNames)
    {
        outputTable.Columns.Add(newColumnName, typeof(string));
    }

    foreach (DataColumn inputColumn in inputTable.Columns)
    {
        //For each old column we generate a row in the new table
        DataRow newRow = outputTable.NewRow();

        //Looks in the former header row to fill in the first column
        newRow[0] = inputColumn.ColumnName.ToString();

        int counter = 1;
        foreach (DataRow row in inputTable.Rows)
        {
            newRow[counter] = row[inputColumn.ColumnName].ToString();
            counter++;
        }
        outputTable.Rows.Add(newRow);
    }

    return outputTable;

} 
```

# javascript - xml 到 json 映射挑战

> ID：853665
> 
> 赞同：8
> 
> 时间：2009-05-12T16:28:24.143
> 
> 标签：javascript, xml, json, mapping, format-conversion

乍一看，我认为在 javascript 中使用 xml 数据就像找到一个 xml-to-json 库并将我的 xml 转换为 javascript 对象树一样简单。

但是，现在我意识到可以在 xml 中创建不直接映射到 json 的结构。

具体来说，这个：

```
<parentNode>
    <fooNode>data1</fooNode>
    <barNode>data2</barNode>
    <fooNode>data3</fooNode>
</parentNode> 
```

我发现的 xml-to-json 工具将以前的转换成这样的：

```
{
parentnode:{
    foonode:[
        'data1',
        'data3'
    ],
    barnode:'data2'
} 
```

}

其中，子节点的顺序发生了变化。我需要保留我的子节点的顺序。任何人都有任何比它更优雅的解决方案

a) 放弃自动转换的想法，只设计自己的 javascript 对象结构并编写代码来处理这个特定的 xml 模式

或者

b) 完全放弃任何转换的想法，将我的 xml 数据保留为 xml 文档，然后我将遍历该文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-06T12:43:35.037

There are established mappings from XML to JSON with limitations (see *[Converting Between XML and JSON](http://www.xml.com/pub/a/2006/05/31/converting-between-xml-and-json.html)*) and mappings from JSON to XML (see JSONx as [defined here](https://datatracker.ietf.org/doc/html/draft-rsalz-jsonx-00) and [conversion rules by IBM](http://publib.boulder.ibm.com/infocenter/wsdatap/v3r8m1/index.jsp?topic=%2Fxi50%2Fconvertingbetweenjsonandjsonx06.htm)). A mapping from XML to JSON that preserves order, however, has not been defined yet. To fully capture all aspects of XML, one should express the [XML Infoset](http://www.w3.org/TR/xml-infoset/) in JSON. if you only care about XML elements (no processing instructions, etc.), I'd choose this structure:

```
[
  "parentNode",
  { } /* attributes */
  [ 
    [ "fooNode", { }, [ "data1" ] ]
    [ "fooNode", { }, [ "data2" ] ]
    [ "fooNode", { }, [ "data3" ] ]
  ]
] 
```

I implemented the same mapping as mapping between XML and Perl data structures that are just like JSON with [XML::Struct](https://metacpan.org/pod/XML::Struct#DESCRIPTION). The structure further corresponds to the abstract data model of [MicroXML](http://www.w3.org/community/microxml/), a simplified subset of XML.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T16:33:14.463

如果您经常需要相同的元素名称并且您关心排序，那么使用 XML 可能会更好。您期望使用 JSON 有什么好处？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T16:36:06.643

为什么不试试：

```
{ parentNode: [
  ["fooNode", "data1"],
  ["barNode", "data2"],
  ["fooNode", "data3"] ]
} 
```

我认为它或多或少会解决问题。

是的，我认为如果它不够灵活，你应该放弃自动转换；相反，您可能会寻找使此类映射变得微不足道的 API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-05T05:20:03.423

我最近设计了这个：

（只是一个思想实验）

```
var someTinyInfosetSample = {
  "doctype": "html",
  "$": [
    { "": "html" },
    [ { "": "head" },
       [ { "": "title" }, "Document title" ]
    ],
    [ { "": "body" },
      [ { "": "h1" }, "Header 1" ],
      [ { "": "p", "class": "content" },
        "Paragraph... (line 1)", [ { "": "br" } ],
        "... continued (line 2)"
      ]
    ]
  ] }; 
```

（在[https://jsfiddle.net/YSharpLanguage/dzq4fe39](https://jsfiddle.net/YSharpLanguage/dzq4fe39)）

快速理由：

XML 元素是唯一的节点类型（除了文档根），它接受混合内容（文本节点和/或其他元素、评论、PI，并定义其子节点的顺序；因此使用 JSON 数组（子索引）从 1 开始，而不是从 0 开始，因为保留索引 0 来携带节点类型（元素）信息；但是可以注意到 XPath 节点集也使用从 1 开始的索引，顺便说一句）；

XML 属性名称/值映射不需要对键（属性名称）进行任何排序。它们的所有者元素，仅在该元素节点处具有唯一性；因此在容器数组的索引 0 处使用 JSON 对象（对应于所有者元素）；

最后，毕竟，虽然 "" 是对象值中完全有效的 JSON 键，但 XML 元素或属性也不能有空名称……因此使用 "" 作为特殊的常规键, 提供元素名称。

下面是使用我的小型“JSLT”（在[https://jsfiddle.net/YSharpLanguage/c7usrpsL/10](https://jsfiddle.net/YSharpLanguage/c7usrpsL/10)）将其转换为 HTML 所需的内容：

```
var tinyInfosetJSLT = { $: [
  [ [ function/*Root*/(node) { return node.$; } ],
      function(root) { return Per(this).map(root.$); }
  ],
  [ [ function/*Element*/(node) { return { }.toString.call(node) === "[object Array]"; } ],
      function(element) {
        var children = (element.length > 1 ? element.slice(1) : null),
            startTag = element[0],
            nodeName = startTag[""],
            self = this;
        return children ?
               Per("\r\n<{stag}>{content}</{etag}>\r\n").map
               ({
                 stag: Per(this).map(startTag),
                 etag: nodeName,
                 content: Per(children).map(function(child) { return Per(self).map(child); }).join("")
               })
               :
               Per("<{stag}/>").map({ stag: Per(this).map(startTag) });
      }
  ],
  [ [ function/*StartTag*/(node) { return node[""]; } ],
      function(startTag) {
        var tag = [ startTag[""] ];
        for (var attribute in startTag) {
          if (attribute !== "") {
            tag.push
            (
              Per("{name}=\"{value}\"").
              map({ name: attribute, value: startTag[attribute].replace('"', "&quot;") })
            );
          }
        }
        return tag.join(" ");
      }
  ],
  [ [ function/*Text*/(node) { return typeof node === "string"; } ],
      function(text) {
        return text.
               replace("\t", "&x09;").
               replace("\n", "&x0A;").
               replace("\r", "&x0D;");
      }
  ]
] }; 
```

（参见[https://jsfiddle.net/YSharpLanguage/dzq4fe39/1](https://jsfiddle.net/YSharpLanguage/dzq4fe39/1)）

在哪里，

```
Per(tinyInfosetJSLT).map(someTinyInfosetSample) 
```

产生（作为字符串）：

```
<html>
<head>
<title>Document title</title>
</head>

<body>
<h1>Header 1</h1>

<p class="content">Paragraph... (line 1)<br/>... continued (line 2)</p>
</body>
</html> 
```

（但上面的转换也可以很容易地适应使用 DOM 节点工厂，并构建一个实际的 DOM 文档，而不是构建一个字符串）

'HTH，

# grammar - First & Follow Sets 检查简单语法

> ID：853670
> 
> 赞同：3
> 
> 时间：2009-05-12T16:29:22.910
> 
> 标签：grammar

这是我在课堂测验中遇到的几个问题，只是想验证它们的正确性。语法：

```
S -> ABC
A -> df | epsilon
B -> f | epsilon
C -> g | epsilon 
```

1.) B 的跟随集包含 g 和 epsilon (T/F)？Ans: F. Follow 集合中没有 epsilon，对吗？（只有 $ aka 输入结束）

2.) 第一组 S 包含 d、f、g 和 epsilon (T/F)？Ans: T. 我说错了，因为我认为 First(S) = First(A)，g 不是其中的一部分。谁是正确的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T17:08:07.123

1.  你是对的。如果涉及到 epsilon，它将被计入 First 集合，而不是 Follow 集合。如果生产可以结束字符串，则 $ 进入 Follow 集合，而不是 epsilon。
2.  测验是正确的。产生式 S 确实可以以 d、f 和 g 中的任何一个开头，也可以以空字符串开头。考虑输入字符串 g。它匹配S，对吗？A满足空串，B满足空串，C满足g。由于 A、B 和 C 都满足，因此 S 满足。S消耗的第一个字符是g，所以g必须在First(S)中。

# c# - 是否可以更改 Resharper 4.5 在 aspx/ascx 文件中格式化代码的方式？

> ID：853671
> 
> 赞同：1
> 
> 时间：2009-05-12T16:29:25.827
> 
> 标签：c#, resharper

我发现自己经常按 ctrl-z 来撤消模板中发生的自动格式化。例如，Resharper 想像这样格式化一个 foreach 循环：

```
<%
  foreach (var product in Model.Items)
  { %>
      <li><%= product.Name %></li>
<% } %> 
```

这在 c# 代码文件中很好，但在模板中看起来很乱。我更喜欢这样格式化

```
<% foreach (var product in Model.Items) { %>
    <li><%= product.Name %></li>
<% } %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T16:44:52.323

打开 Visual Studio 转到 Resharper > 选项... > 语言 > C# > 格式化样式 > 大括号布局 > 其他

更改为“行尾（无空格）”

请注意，这也会影响您的 C#。

您不能为您的 aspx 页面指定不同的代码样式有点烦人，因为您通常确实想要不同的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T16:42:59.050

Resharper 不允许您创建自定义格式。您只能更改选项下的预定义格式。我四处寻找，没有看到 <% %> 格式化选项。对不起 ：（

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T12:30:05.100

从 ReSharper 7.1（目前在 EAP）开始，可以选择在 ASP 和 Razor 中使用 K&R 样式，同时继续将 BSD 用于 C#。锐化 | 选项 -> 代码编辑 | ASP.NET | 编辑器和格式 -> 覆盖 C# 的大括号样式以始终使用“行尾（K&R 样式）”

# css - 比较和合理化 CSS - 不是基于文件或差异

> ID：853674
> 
> 赞同：6
> 
> 时间：2009-05-12T16:29:56.543
> 
> 标签：css, semantic-diff

我正在处理几个单独的 asp.net 应用程序，并将它们组合起来。

一个问题是合理化两个应用程序之间的 CSS - app1 有两个 css 文件，而 app2 有大约 8 个。两个应用程序之间的大部分 CSS 是相同的，但也存在一些差异。我正在寻找一种工具来比较每个应用程序的所有元素，并显示缺少的内容、不同之处等。理想情况下，输出将是 3 个文件：Common、app1 和 app2，但如果它我不会那么挑剔可以告诉我这两个应用程序之间的区别。

这样的工具存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-12-22T12:22:03.233

如果你讨厌下载工具，这里有一个 css 比较器的在线版本[http://www.alanhart.co.uk/tools/compare-css.php](http://www.alanhart.co.uk/tools/compare-css.php)

它提供了两个文件之间的 css 类文件的比较

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T16:41:13.187

我不知道为这个特定目的量身定制的独立工具。有[一个名为“CSS Comparer”的 PHP 类](http://www.phpclasses.org/browse/package/4638.html)，但我不知道它是多么容易使用。该页面上的屏幕截图看起来很有希望。

就个人而言，我可能只是将所有文件连接在一起，这样每个应用程序都有一个文件，然后对它们运行差异。为了使它更容易，您可以通过[CSSTidy](http://csstidy.sourceforge.net/)之类的东西运行这两个文件，或者通过搜索/替换和排序进行一些富有想象力的文件处理。这可以在两个文件中以相同的顺序获得所有声明，因此差异会更清晰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T16:51:22.907

将所有这些文件合并到一个文件中，并通过 CSS 优化器或压缩器运行它。优化器应该看到所有重复的选择器并将它们清除掉。

我推荐 YUI 的压缩器，但也有很多基于 Web 的压缩器/优化器可用。[这是一个](http://floele.flyspray.org/csstidy//css_optimiser.php)又[一个](http://www.cssdrive.com/index.php/main/csscompressor/)。YMMV 与他们一起，但一个好的谷歌搜索可以出现更多。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-12T16:37:33.210

通常我会推荐[diff](http://www.gnu.org/software/diffutils/)。由于您明确写道您正在寻找“不基于差异”的东西，也许您可​​以描述为什么 diff 对您没有帮助。

然后其他人可能会提出不同的建议。

# sql - 如何避免 Sql 查询超时

> ID：853676
> 
> 赞同：27
> 
> 时间：2009-05-12T16:30:04.267
> 
> 标签：sql, sql-server

我对 SQL 视图具有 RO 访问权限。下面的这个查询超时。如何避免这种情况？

```
select  
  count(distinct Status)  
from 
  [MyTable]  with (NOLOCK)
where 
  MemberType=6 
```

我得到的错误信息是：

> 消息 121，级别 20，状态 0，行 0
> 
> 从服务器接收结果时发生传输级错误（提供者：TCP 提供者，错误：0 - 信号量超时期限已过期。）

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-05-12T16:33:38.053

您的查询可能没问题。“信号量超时期限已过期”是网络错误，而不是 SQL Server 超时。

您和 SQL Server 之间显然存在某种网络问题。

编辑：但是，显然查询在给出网络错误之前运行了 15-20 分钟。那是一个很长的时间，所以可能网络错误可能与执行时间长有关。底层视图的优化可能会有所帮助。

如果您的示例中的 [MyTable] 是一个视图，您可以发布视图定义以便我们进行优化吗？

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-12T19:36:41.093

尽管显然存在某种网络不稳定或某些干扰您的连接（可能需要 15 分钟，您可能会越过 NAT 边界或网络中的某些东西正在丢弃会话），但我认为您想要这样一个简单的？）查询在任何预期的时间（如 1 秒）内很好地返回。

我会与您的 DBA 交谈，并在 MemberType、Status 的基础表上创建一个索引。如果没有单个基础表或者这些表更复杂并且由视图或 UDF 创建，并且您正在运行 SQL Server 2005 或更高版本，请让他考虑为视图编制索引（基本上以索引方式实现视图）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-12T16:32:06.667

您可以在 MemberType 上放置一个索引。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-12T16:46:54.800

请检查您的 Windows 系统事件日志中是否有任何专门针对“事件源：Dhcp”的错误。这很可能是与 DHCP 相关的网络错误。地址租用时间到期左右。它不应该是与 SQL Server 或查询本身相关的问题。

只需在互联网上搜索“信号量超时期限已过期”，您就会得到很多建议，这些建议可能是您问题的解决方案。不幸的是，似乎没有解决这个问题*的方法。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-12T16:33:04.217

您是否在 Status 列和 MemberType 列上定义了索引？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-12T19:25:34.667

你有多少记录？表上有索引吗？试试这个：

```
;with a as (
select distinct Status
from MyTable
where MemberType=6
)
select count(Status)
from a 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-06T22:19:25.690

我的团队在长时间运行的 SSIS 包中间歇性地遇到这些问题。自从 Windows 服务器修补以来，这种情况一直在发生。

我们的 SSIS 和 SQL 服务器位于不同的 VM 服务器上。

与我们的 Wintel 服务器团队合作，我们重新启动了两台服务器，目前，问题似乎已经消失。

工程师说他们不确定问题是他们同时更新的补丁还是新的 VMTools。我们现在将进行监控，如果超时问题再次出现，他们将首先尝试回滚 VMXNET3 驱动程序，然后如果这不起作用，请移除 June Rollup 补丁。

所以对我们来说，这个问题与我们的 SQL 查询无关（我们正在加载数十亿新行，所以它必须长时间运行）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-07T06:52:48.247

这是因为另一个 sql server 实例正在运行。所以你需要先杀死然后你才能登录到SQL Server。

为此，**请转到任务管理器并杀死或结束 SQL Server 服务的任务，然后转到 Services.msc 并启动 SQL Server 服务。**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-23T12:55:54.660

虽然我很想把问题归咎于我的问题——我的查询遇到了同样的错误，这个错误要大得多并且涉及很多循环——在网络上，我认为情况并非如此。

不幸的是，事情并没有那么简单。查询在出现该错误之前运行了 3 个多小时，如果它只是 SSMS 中的一个查询和 SQL Server 上的一个作业，它显然会同时崩溃（还没有查看详细信息，所以不确定它是否是同一个错误；不过，绝对是同一个地方）。

所以以防万一有人来这里有类似的问题，这个线程： [https ://www.sqlservercentral.com/Forums/569962/The-semaphore-timeout-period-has-expired](https://www.sqlservercentral.com/Forums/569962/The-semaphore-timeout-period-has-expired)

表明它同样可能是硬件问题或实际超时。

就每个循环所需的时间而言，我的循环并不均匀（它们取决于给定月份的销售水平），所以好的月份需要大约 20 分钟来计算（查询看起来是 4 年）。

这样，我完全有可能需要优化我的查询。我什至会说这很可能，因为我所做的一些更改包括新表，它们是堆......所以在进入 VM 配置和硬件测试之前，又一轮索引我的数据。

意识到这是一个老问题：我使用的是 SQL Server 2012 SE，SSMS 是 2018 Beta，而运行 SQL Server 的 VM 独占使用 132GB 的 RAM（总共 30%）、8 个内核和 2TB 的 SSD SAN。

# asp.net-mvc - 用户权限的 MVC Web 应用程序数据库驱动菜单

> ID：853681
> 
> 赞同：3
> 
> 时间：2009-05-12T16:32:24.107
> 
> 标签：asp.net-mvc, web-applications, menu

我们将把旧版 Windows 应用程序移植到垂直市场的大型 Web 应用程序中。看着MVC。每个实现可能有 50 到 5000 个用户。看着在母版页中放置导航。该应用程序将包含 200 到 300 个菜单项，从而产生超过 500 个视图。我们希望根据每个用户的应用程序权限显示一个修剪后的导航菜单。用户可能只看到 20 个项目，或全部可用。

我见过的大多数帖子都建议通过视图数据将导航项传递到母版页，该视图数据建立在基本控制器类中。我明白这一点。

潜在的 10 到 1000 名用户中的每一个都将拥有一组不同的权限。

有没有人有任何解决方案可以避免访问数据库以获取从基本控制器继承的每个控制器请求的用户菜单项？

是否有适用于每个用户的缓存方案？

导航是否应该在框架中处理（不是我的选择）？

这只是我们将为这种导航方法付出的代价吗？

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T20:18:14.783

一些想法：

1.）您可以让您的导航栏 html 来自 Html.RenderAction（MVC 期货）并在其上使用输出缓存。

2.）您可以为每个用户生成导航栏的 html，然后将其保存到数据库并在他们的用户权限更改时重新生成。因此，您需要做的就是根据每个用户记录从数据库中提取 html。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T17:23:44.040

您可以从[缓存 linq 查询](http://petemontgomery.wordpress.com/2008/08/07/caching-the-results-of-linq-queries/)开始，这将是在 DB 层解决此问题的好方法。

在 MVC 中使用动作过滤器执行此操作也不会太难。

一年前我在 PHP 中实现了类似的东西，但总体思路是一样的。首先，您需要为每个菜单配置分配一个唯一的 ID。这样当用户 A 和用户 X 请求相同的菜单配置时，它会解析到相同的缓存文件。

第一次需要为用户加载菜单时，它会从数据库中加载并传递给用户。同时，它被保存到一个缓存文件中，其名称中有唯一的 id。在后续请求中，操作过滤器可以从缓存文件中加载数据（如果存在）并绕过数据库。

# apache-flex - Flex 3 ASDocs 库问题

> ID：853683
> 
> 赞同：1
> 
> 时间：2009-05-12T16:32:26.417
> 
> 标签：apache-flex, asdoc

我们一直在尝试针对 Flex 3 库项目编译 ASDocs。我们的问题是 ASDocs 拒绝识别在库中创建和使用的任何自定义 mxml 组件。

例如，如果我们的库中有一个自定义的 mxml AdvancedButton 控件，并且我们尝试在库中的另一个 mxml 类中使用它，ASDocs 编译器会在父类文件上出错，并显示“错误：找不到类型或未找到类型”一个编译时常量：AdvancedButton”。

如果我们尝试扩展我们的自定义组件，也会发生错误。因此，如果我们的库包含扩展 Button 的 AdvancedButton 和扩展 AdvancedButton 的 ExtraAdvancedButton，则 ASDocs 将“无法找到指定的基类 'AdvancedButton for component class 'ExtraAdvancedButton'”。

另一方面，如果 AdvancedButton 是从外部库中引用的，我们不会得到错误。

如果文件是 .as 而不是 .mxml，这似乎不是问题。然而，在我们的例子中，我们嵌套了基于 degrafa 的组件。

想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-06-08T14:14:17.783

我花了好几个小时试图为我的 Flex 项目生成 ASDocs，并且不断收到与无法找到基类 x/y/z 相关的错误。最后我发现这是因为我没有告诉 ASDoc Flex SWC 文件的位置：

```
(For me) C:\Program Files\Adobe\Flex Builder 3 Plug-in\sdks\3.4.0\frameworks\libs 
```

将此路径包含在附加`-library-path`参数中，您应该会发现它停止了有关找不到基类的任何错误。

这听起来类似于上面描述的原始问题，即缺少指向这些自定义组件所在位置的链接。确保包含包含这些自定义组件 .as 文件的基本目录

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-09-28T15:51:24.023

我最近遇到了同样的问题。对我来说，诀窍是将 -source-path "src" 添加到 asdoc 编译器参数中。

这是对我有用的 asdoc 命令：

```
c:\work\prg\Flex>"c:\Program Files\Adobe\Flex Builder 3 Plug-in\sdks\3.3.0\bin\asdoc.exe" -doc-sources "src" -main-title "PRG documentation" -output "c:\work\prg\Flex\docs" -source-path "c:\work\XmlMappingAS3\src" -source-path "assets\css" -source-path "c:\Program Files\Adobe\Flex Builder 3 Plug-in\sdks\3.3.0\frameworks\projects\framework\src" -source-path "c:\Program Files\Adobe\Flex Builder 3 Plug-in\sdks\3.3.0\frameworks\projects\rpc\src" -external-library-path "c:\work\commonLibraries\Flex\as3commons-reflect-1.0.0.swc" -external-library-path "c:\work\commonLibraries\Flex\Cairngorm.swc" -external-library-path "c:\work\commonLibraries\Flex\spring-actionscript.swc" -external-library-path "c:\work\commonLibraries\Flex\xpath-as3-1.0.0.swc" -external-library-path "c:\work\commonLibraries\Flex\as3corelib.swc" -external-library-path "c:\work\commonLibraries\Flex\as3reflect.swc" -source-path "src" 
```

此外，使用 FlashDevelop ActionScript 文档生成器（实际上就是我使用的）是一个很大的帮助。如果您在 Windows 环境中将 FlashDevelop 安装到“c:\Program Files\FlashDevelop”，则文档生成器位于“c:\Program Files\FlashDevelop\Tools\asdocgen\ASDocGen.exe”。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-01T06:51:33.317

您是否使用 asdoc 的[-library-path](http://livedocs.adobe.com/flex/3/html/help.html?content=asdoc_9.html)参数？
但是等等，你说如果它是从外部库引用的，你就不会出错——所以你已经在使用库路径了，对吧？

Flex 3 ASDoc 根本不记录 mxml。所以你可能会得到 flex 4 sdk 并尝试使用它附带的 asdoc。

# css - CSS - 嵌套 DIV：清除子样式

> ID：853684
> 
> 赞同：2
> 
> 时间：2009-05-12T16:32:37.523
> 
> 标签：css

我敢肯定，由于 CSS 的性质和级联，这是否可能，但无论如何我都会尝试。

我正在创建一个条款和条件框，其中将包含用户将选择的一些关键元素。由于 T&C 将具有表单组件（单选按钮、复选框）。我真的不想经历将它放入 IFrame 并以这种方式获取用户输入的麻烦。

我想使用添加了溢出：自动属性的 a，我可以创建一个带有 T&C 的滚动框，并让用户以这种方式选择他们的选项。

好吧，因为 T&C 有一些标记会直接受到网站 CSS 的影响，所以我需要想办法让这个 div 不使用网站的主要 CSS。

这是一些与我正在尝试的方法类似的示例代码：

```
<html>
<head>
    <style>
        div
        {
            border: solid 1px #000;
        }
        div small
        {
            font-size: 17pt;
        }
    </style>
</head>
<body>
    <div style="overflow: auto; width: 500px; height: 300px;">
        <small>This is small text</small>
        <div>
            <small>This is small text</small> 
            Lorem ipsum dolor sit amet, consectetur adipiscing
            elit. Donec vulputate mi sed nisl blandit sed porttitor massa fringilla.
        </div>
    </div>
</body>
</html> 
```

这样做的结果是一个带有一些文本的漂亮小黑框，然后是一个带有更多文本的子框，这里的关键项是包含在`<small/>`.

有没有办法让某个 div 下的任何东西不继承 CSS？也许我需要对此采取完全不同的方法。

想法？想法？建议？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T16:37:55.783

不要直接使用标签名称，而是保留两组类（“内部”和“外部”）并使用它们。

所以你可以有一个`div.inner`定义，一个`div.outer`定义，然后分别处理它们。但是`inner`，必须明确撤消设置`outer`。

就像是

```
<div class="outer">
  <div class="outer">Some content. <small>Small text.</small></div>
  <div class="inner container">
     <small>Blah blah blah</small>
     More content
  </div>
</div> 
```

在你的 CSS 中定义你需要的任何东西，

```
div.outer {
   border: 1px solid black;
}
div.outer small {
   font: 17pt;
}
div.inner {
   border: none;
}
div.inner small {
   font: 15pt;
}
div.container {
   overflow: auto;
   width: 500px;
   height: 300px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T16:42:41.843

不要认为有办法不继承css。我认为唯一的方法是明确“重置”其父母设置的所有样式。有关默认属性的列表，请参见例如[http://meyerweb.com/eric/thoughts/2007/05/01/reset-reloaded/](http://meyerweb.com/eric/thoughts/2007/05/01/reset-reloaded/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T17:37:00.740

作为第二点，没有办法从本质上阻止样式的级联，毕竟是级联定义了 CSS。因此，您只能使用Welbog 建议的`.inner`and方法。`.outer`

因此，您只需像往常一样定义主文档的样式。但是，要覆盖 T&C div 下相同元素的这些样式，您必须明确覆盖/重新样式。您可以使用两个样式表来保持清晰度，但您必须记住，在`t_and_c.css`每个声明的前面显式地使用封闭 div 的 id，例如：

```
#t&c p {...}

#t&c a:link,
#t&c a:visited {...} 
```

# sharepoint - Sharepoint 博客：启用/禁用有关帖子字段值的评论

> ID：853691
> 
> 赞同：0
> 
> 时间：2009-05-12T16:34:17.550
> 
> 标签：sharepoint, comments, blogs

我需要启用/禁用有关帖子列表中新字段值的帖子评论。我不知道该怎么做...有什么想法吗？

为什么转换为 XSLT 时会出错？是否可以获得查询字符串来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-13T10:34:46.973

我认为您无法使用标准博客组件获得那种级别的控制。不过，使用 CKSEBE 应该相当容易实现。

在标准博客中我能想到的最简单的方法是使用 jQuery 来隐藏评论表单——这样你只需要获取出现在页面某处的字段的值。

# java - “标准”Java DateBuilder 实现？

> ID：853697
> 
> 赞同：1
> 
> 时间：2009-05-12T16:36:09.920
> 
> 标签：java, date

在我自己构建一个 DateBuilder 之前，我想知道是否有一个“标准”Java 实现。我查看了 java API 和 Apache Commons，似乎找不到参考。

我正在寻找可以实现如下接口的简单东西：

```
Date date = new DateBuilder().month(2).year(1).build(); 
```

哪里`date`是 2010 年 7 月 12 日（假设今天是 5 月 12 日）。

另外，请不要提及 Joda Time。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T16:41:01.690

不，但是您可以使用 Calendar 对象完成相同的操作（只是不能在单行/链式方法调用中）：

```
//assuming your use case is "add 1 year and 2 months to the current date/time"
Calendar cal = Calendar.getInstance()
cal.clear();
cal.add(Calendar.MONTH, 2);
cal.add(Calendar.YEAR, 1); 
```

将自己包装在 Builder 模式中`Calendar.add()`应该是微不足道的。`Calendar.set()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T16:43:11.843

谷歌代码搜索出现了[这个](http://www.google.com/codesearch/p?hl=en#g7Y8u8uY_lw/trunk/common/java/org.jitterbit.util/src/org/jitterbit/util/time/DateBuilder.java&q=datebuilder)

有什么用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-13T01:40:24.630

你可以等待[JSR-310](https://jsr-310.dev.java.net/)。这将是未来实施时的标准！

# c - 如何通过引用函数来传递数组？

> ID：853698
> 
> 赞同：4
> 
> 时间：2009-05-12T16:36:13.523
> 
> 标签：c, objective-c, arrays

我有一个函数，它传递了一个数组指针来修改数组中的内容：

*   (void) arrayFunction:(Byte[])targetarray { // 对 targetarray 做一些事情 }

这是一个字节类型的数组，但我认为我没有把正确的东西放在圆括号中。它应该是什么而不是（Byte []）？可能有几个不同大小的数组传递给这个函数

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-12T16:39:15.203

如果它是一个普通的旧数组，我会这样做：

```
(void)arrayFunction:(Byte*)targetarray 
```

或者，更“OO-ish”，使用 NSData 而不是字节数组：

```
(void)arrayFunction:(NSData*)targetarray 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T16:59:43.283

看起来您正在使用普通的 C 数组。请记住，数组指针只是指向数组中第一个元素的指针。您不会将“整个数组”作为引用传递，您只需传递索引 0 处的指针。

如果要传递数组，则应将参数定义为指针 , `Byte*`，因为这就是传递简单 C 数组时的真正含义。

# c# - 如何将泛型类型约束为必须具有接受某些参数的构造函数？

> ID：853703
> 
> 赞同：17
> 
> 时间：2009-05-12T16:38:06.343
> 
> 标签：c#, generics, constraints

我有一个包装泛型类，旨在与一组类型一起使用。这些类型由实用程序生成，并且都派生自基类 ClientBase。虽然 ClientBase 只有一个默认构造函数，但所有生成的类型都有默认构造函数，并且构造函数将字符串作为参数。在包装类的构造函数中，我使用带有字符串的构造函数实例化该类型的实例。这是一个示例代码：

```
public class ClientBase
{ }

public class GenericProxy<T>
    where T: ClientBase, new()
{
    T _proxy;

    public GenericProxy(string configName)
    {
        _proxy = new T(configName);    
    }
} 
```

此代码无法编译，因为不保证类型 T 具有接受字符串的构造函数。有没有办法在泛型类上定义一个约束来强制类型 T 必须有一个带字符串的构造函数？如果这是不可能的，有什么好的选择来处理这种情况？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-12T16:40:00.273

这是不可能的。我希望看到[“静态接口”](http://codeblog.jonskeet.uk/2008/08/29/lessons-learned-from-protocol-buffers-part-4-static-interfaces)来处理这个问题，但不要指望它们很快......

备择方案：

*   指定一个委托作为 T 的工厂
*   指定另一个接口作为 T 的工厂
*   在 T 本身上指定一个接口用于初始化（并添加一个约束以`T`实现该接口）

前两个真的是等价的。基本上你会改变你的代理类是这样的：

```
public class GenericProxy<T>
    where T: ClientBase, new()
{
    string _configName;
    T _proxy;
    Func<string, T> _factory;

    public GenericProxy(Func<string, T> factory, string configName)
    {
        _configName = configName;
        _factory = factory;
        RefreshProxy();
    }

    void RefreshProxy() // As an example; suppose we need to do this later too
    {
        _proxy = _factory(_configName);
    }
} 
```

（我假设您稍后会想要创建更多实例 - 否则您不妨将 T 的实例传递给构造函数。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-12T16:39:41.707

不幸的是，您尝试做的事情是不可能的。

[MSDN 关于类型约束的文章](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-21T23:47:16.157

这并不能回答您的实际问题，限制方法，但为了完整起见，这里是您如何使用反射在运行时执行您所要求的操作：

```
private T  Get<T>(string id)
    {
    var  constructor = typeof(T).GetConstructor(new Type[] { typeof(X), typeof(Y) });
    if (constructor == null)  throw new InvalidOperationException("The type submitted, " + typeof(T).Name + ", does not support the expected constructor (X, Y).");

    var  data = GetData(id);
    return (T)constructor.Invoke(new object[] { data.x, data.y });
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T19:15:37.727

正如 Jon 所指出的，对此没有内置支持 - 但顺便说一句，您可以使用`Expression`. 可以在[MiscUtil](http://www.yoda.arachsys.com/csharp/miscutil/) (in `MiscUtil.Linq.Extensions.TypeExt`) 中找到执行此操作的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-18T11:19:32.150

这是基于@JonSkeet 答案的完整工作示例：

```
using System;
using System.Collections.Generic;

namespace GenericProxy
{
    class Program
    {
        static void Main()
        {
            GenericProxy<ClientBase> proxy = new GenericProxy<ClientBase>(ClientBase.Factory, "cream");

            Console.WriteLine(proxy.Proxy.ConfigName); // test to see it working
        }
    }

    public class ClientBase
    {
        static public ClientBase Factory(string configName)
        {
            return new ClientBase(configName);
        }

        // default constructor as required by new() constraint
        public ClientBase() { }

        // constructor that takes arguments
        public ClientBase(string configName) { _configName = configName; }

        // simple method to demonstrate working example
        public string ConfigName
        {
            get { return "ice " + _configName; }
        }

        private string _configName;
    }

    public class GenericProxy<T>
        where T : ClientBase, new()
    {
        public GenericProxy(Func<string, T> factory, string configName)
        {
            Proxy = factory(configName);
        }

        public T Proxy { get; private set; }
    }
} 
```

期望看到以下输出：`ice cream`

# wpf - 在 WPF 中，您可以将 ListView（不是 DataGrid）绑定到 Matrix（Cross-Tab）数据集吗？

> ID：853710
> 
> 赞同：1
> 
> 时间：2009-05-12T16:39:31.647
> 
> 标签：wpf, listview, reporting, crosstab

是否可以在 WPF 中将 ListView（不是 DataGrid）绑定到事先未知列的矩阵（跨表）数据集？

以 Northwind 数据库为例：下面的简单查询将返回一个众所周知的数据集，该数据集可以轻松绑定到列表视图：

```
SELECT  Year(o.OrderDate) AS [Year], Month(o.OrderDate) AS [Month], 
COUNT(o.OrderID) AS [NumOrders]
FROM Orders o 
GROUP BY Year(o.OrderDate), Month(o.OrderDate)
ORDER BY 1, 2 
```

[![替代文字](https://i.stack.imgur.com/xnBvr.png)](https://i.stack.imgur.com/xnBvr.png)

为了生成更有意义的报告，我们可能会运行上述查询的结果集（在报告程序中）以生成如下所示的内容：

```
SELECT  [Year], 
SUM(CASE [Month] WHEN 1 Then NumOrders ELSE 0 END) AS 'Jan',
SUM(CASE [Month] WHEN 2 Then NumOrders ELSE 0 END) AS 'Feb',
SUM(CASE [Month] WHEN 3 Then NumOrders ELSE 0 END) AS 'Mar',
SUM(CASE [Month] WHEN 4 Then NumOrders ELSE 0 END) AS 'Apr',
SUM(CASE [Month] WHEN 5 Then NumOrders ELSE 0 END) AS 'May',
SUM(CASE [Month] WHEN 6 Then NumOrders ELSE 0 END) AS 'Jun',
SUM(CASE [Month] WHEN 7 Then NumOrders ELSE 0 END) AS 'Jul',
SUM(CASE [Month] WHEN 8 Then NumOrders ELSE 0 END) AS 'Aug',
SUM(CASE [Month] WHEN 9 Then NumOrders ELSE 0 END) AS 'Sep',
SUM(CASE [Month] WHEN 10 Then NumOrders ELSE 0 END) AS 'Oct',
SUM(CASE [Month] WHEN 11 Then NumOrders ELSE 0 END) AS 'Nov',
SUM(CASE [Month] WHEN 12 Then NumOrders ELSE 0 END) AS 'Dec'
FROM
( 
SELECT  Year(o.OrderDate) AS [Year], Month(o.OrderDate) AS [Month], 
COUNT(o.OrderID) AS [NumOrders]
FROM Orders o 
GROUP BY Year(o.OrderDate), Month(o.OrderDate)
)t0
GROUP BY [Year] 
```

结果是这样的：

[![替代文字](https://i.stack.imgur.com/uBcy9.png)](https://i.stack.imgur.com/uBcy9.png)

我的问题是，是否可以将此最终结果绑定到 WPF 中的 ListView 或 Flowdocument 而无需事先了解结果列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T17:32:04.180

您可以以编程方式为 ListView 生成 GridViewColumns 并将绑定应用到它。循环遍历 DataSet 中的列，并将相应的 GridViewColumn 添加到 ListView 中。

```
var gridView = (GridView)list.View;
foreach(var col in table.Columns) {
   gridView.Columns.Add(new GridViewColumn{
      Header=col.ColumnName, 
      DisplayMemberBinding=new Binding(col.ColumnName)});
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T06:07:02.677

您可以使用附加属性将列动态添加到 ListView。查看**CodeProject**上的这篇文章，它准确地解释了......

[WPF DynamicListView - 绑定到 DataMatrix](http://www.codeproject.com/KB/WPF/WPF_DynamicListView.aspx)

# asp.net - 用相同的值填充多个文字

> ID：853716
> 
> 赞同：3
> 
> 时间：2009-05-12T16:40:27.823
> 
> 标签：asp.net, controls, literals

我在一个页面上有多个文字。例如，

```
<asp:Literal id="Label1" runat="server" /> 
```

我在一页上大约有 10 个，并且想用相同的值填充它们。有没有一种好方法可以在不引用每个控件的 id 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-12T16:43:31.267

创建一个公共属性来保存您要显示的值并在 aspx 中使用

```
<%= propertyName %> 
```

任何你想显示值的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T16:46:58.217

如果您正在使用资源文件，则可以将所有 10 个资源文件的 meta:resourcekey 属性设置为相同的值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-12T16:41:57.913

我看到它完成的唯一方法是使 id 成为一个可循环的名称（例如 Label1 - Label10）并循环引用 id。但是我们并没有为不同的解决方案而努力！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-12T16:47:15.893

文字是位于单个容器（例如，面板）中还是散落在页面上？如果它们位于不包含太多其他不相关控件的单个容器中，那么它就像循环遍历容器的控件集合一样简单。

是的，我很清楚 Page 也是一个容器，但是循环访问 Page 中的所有控件几乎总是非常低效的。我根本不会推荐它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-12T16:51:07.430

您的标签是如何命名的。如果他们有像 Label1 - Label10 这样的通用命名约定，那么您可以这样做

```
for(int i = 1; i <= 10; i++)
{
    Literal l = Page.FindControl(string.Format("Label{0}", i)) as Literal
    if(l != null)
        l.Text = "Whatever";
} 
```

如果它们的名称不同，您可以将标签名称粘贴在一个数组中并循环遍历该数组，而不是使用 10 个显式`.Text =`语句。例如

```
string [] litNames = new string [] { "litFirst", "otherLit", "someOtherVar" }

foreach(string s in litNames)
{
    Literal l = Page.FindControl(s) as Literal
    if(l != null)
        l.Text = "Whatever";
} 
```

# asp.net-mvc - 我是否需要将会员服务与 NTLM 一起使用

> ID：853717
> 
> 赞同：1
> 
> 时间：2009-05-12T16:40:48.023
> 
> 标签：asp.net-mvc, ntlm

如果我有一个用户只能通过 NTLM 身份验证帐户访问的 ASP.Net MVC 应用程序，我是否需要使用 ASP.Net 会员服务并发出 cookie？

还是我这根棍子的一端完全错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T16:49:12.427

您永远不必使用 asp.net 会员提供程序，它只是一个选项。如果您需要做的只是对用户进行身份验证，NTML 本身就可以正常工作。如果您需要使用用户的身份在站点上进行进一步的授权或个性化，则需要使用某种用户管理，但不一定是会员提供者，您可以自己编写或自己编写。无论您使用的是 mvc 还是 web-forms，我都没有任何区别。

# linux - 哪些情况可能会导致 Linux 上的 fork() 或 system() 调用失败？

> ID：853725
> 
> 赞同：7
> 
> 时间：2009-05-12T16:42:56.710
> 
> 标签：linux, process, system, fork

以及如何找出其中任何一个是否正在发生，并导致 fork() 或 system() 返回错误？换句话说，如果 fork() 或 system() 返回错误，我可以检查 Linux 中的哪些内容来诊断为什么会发生该特定错误？

例如：

*   只是内存不足（导致 errno ENOMEM） - 使用“免费”等检查内存使用情况。
*   内核内存不足，无法复制父进程的页表和其他记帐信息（导致 errno EAGAIN）
*   是否有全局进程限制？（也导致errno EAGAIN？）
*   是否有每个用户的进程限制？我怎样才能知道它是什么？
*   ...？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-12T16:46:06.707

> 怎样才能知道它们中的任何一个是否正在发生？

如果结果（返回值）为 -1，则检查*errno值*

从 Linux 的手册页：

> 返回值
> 成功时，在父进程中返回子进程的 PID，在子进程中返回 0。失败时，在父进程中返回 -1，不创建子进程，并适当设置 errno。
> 
> 错误
> EAGAIN
> fork() 无法分配足够的内存来复制父级的页表并为子级分配任务结构。
> EAGAIN
> 由于遇到调用者的 RLIMIT_NPROC 资源限制，因此无法创建新进程。要超过此限制，进程必须具有 CAP_SYS_ADMIN 或 CAP_SYS_RESOURCE 功能。
> 由于内存紧张， ENOMEM
> fork() 未能分配必要的内核结构。
> 
> 符合 SVr4、4.3BSD、POSIX.1-2001。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T16:54:27.487

/etc/security/limits.conf 中的 nproc 可以限制每个用户的进程数。

您可以通过检查 fork 的返回来检查失败。0 表示你在子进程中，正数是子进程的 pid 表示你在父进程中，负数表示分叉失败。当 fork 失败时，它会设置外部变量 errno。您可以使用 errno.h 中的函数来检查它。我通常只使用 perror 将错误（附加一些文本）打印到 stderr。

```
#include <stdio.h>
#include <errno.h>
#include <unistd.h>

int main(int argc, char** argv) {
    pid_t pid;

    pid = fork();
    if (pid == -1) {
        perror("Could not fork: ");
        return 1;
    } else if (pid == 0) {
        printf("in child\n");
        return 0;
    };

    printf("in parent, child is %d\n", pid);

    return 0;
} 
```

# linux - 如何查找或计算 Linux 进程的页表大小和其他内核记帐？

> ID：853736
> 
> 赞同：7
> 
> 时间：2009-05-12T16:45:50.200
> 
> 标签：linux, memory, process, operating-system

如何找出 Linux 进程的页表以及任何其他可变大小的进程记帐有多大？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T21:17:29.843

从 Linux 2.6.10 开始，单个进程的页表使用的内存量已通过`/proc/<pid>/status`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-12T17:23:40.980

如果您真的对页表感兴趣，请执行

```
$ cat /proc/meminfo | grep PageTables
PageTables:      24496 kB 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T18:06:33.610

嗯，回到 Ye Olden Tymes，我们曾经调用 nlist(3) 来获取我们感兴趣的数据的系统地址，然后打开 /dev/kmem，寻找地址，然后读取数据。不确定这是否适用于 Linux，但可能值得输入“man 3 nlist”并查看返回的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T17:15:49.370

不确定 Linux，但大多数 UNIX 变体都[`sysctl(3)`](http://www.freebsd.org/cgi/man.cgi?query=sysctl&sektion=3)为此目的提供。还有[`sysctl(8)`](http://www.freebsd.org/cgi/man.cgi?query=sysctl&sektion=8)命令行实用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-25T20:34:51.233

你应该描述你的问题，而不是询问细节。如果您分叉太多（尤其是对于具有大地址空间的进程），那么所有类型的事情都会出错（包括内存不足），恕我直言，达到最大页表大小不是一个现实的问题。

Thad 说，我也有兴趣阅读 Linux 中的进程页表共享。

然而，作为一个简单的经验法则，您可以假设每个进程在页表中占用一个与其虚拟大小相等的共享，例如每页 6 个字节。因此，例如，如果您有一个具有 8GB SGA 和 500 个进程共享它的 Oracle 数据库，则每个进程将使用 14MB 页面表，这导致 7GB 页面表+8GB SGA。（样本编号来自[http://kevinclosson.wordpress.com/2009/07/25/little-things-doth-crabby-make-%E2%80%93-part-ix-sometimes-you-have-to-really -really-want-your-hugepages/](http://kevinclosson.wordpress.com/2009/07/25/little-things-doth-crabby-make-%E2%80%93-part-ix-sometimes-you-have-to-really-really-want-your-hugepages/) )

# asp.net-mvc - 如何从控制器关闭 ASP.NET MVC 页面？

> ID：853738
> 
> 赞同：22
> 
> 时间：2009-05-12T16:46:15.037
> 
> 标签：asp.net-mvc, model-view-controller

我有一个 ASP.NET MVC 应用程序，它在新的浏览器窗口中打开一个“请求”视图。当用户提交表单时，我希望关闭窗口。保存请求信息后，我的 RequestController 代码在关闭窗口时应该是什么样子？我不确定控制器操作应该返回什么。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-05-12T16:50:13.080

您可以返回具有以下 javascript 的视图（或者您可以返回 JavaScript 结果），但我更喜欢前者。

```
public ActionResult SubmitForm()
{
    return View("Close");
} 
```

查看关闭：

```
<body>
    <script type="text/javascript">
        window.close();
    </script>
</body> 
```

这是一种直接在控制器中执行此操作的方法，但我建议不要这样做

```
public ActionResult SubmitForm()
{
    return JavaScript("window.close();");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T09:40:30.250

像这样：

```
[HttpPost]
public ActionResult MyController(Model model)
{
    //do stuff
    ViewBag.Processed = true;
    return View();
} 
```

风景：

```
<%if(null!=ViewBag.Processed && (bool)ViewBag.Processed == true){%>
<script>
    window.close();
</script>
<%}%> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-12T16:50:17.510

听起来您可以返回一个几乎为空的视图模板，该模板只是在标题中包含一些运行“window.close()”的 javascript。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-29T19:32:33.543

这对我有用：

```
[HttpGet]
public ActionResult Done()
{
    return Content(@"<body>
                       <script type='text/javascript'>
                         window.close();
                       </script>
                     </body> ");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-09T17:25:10.733

您可以通过以下代码关闭：

```
return Content(@"<script>window.close();</script>", "text/html"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-13T15:13:02.743

这对我关闭窗口很有用。

控制器：

```
 return PartialView("_LoginSuccessPartial"); 
```

看法：

```
<script>
   var loginwindow = $("#loginWindow").data("kendoWindow");
   loginwindow.close();
</script> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-11-01T07:17:39.487

使用它，您可以像这样关闭窗口：

```
return Content("&lt;script language='javascript'>window.close();&lt;/script>"); 
```

# mysql - 在 Plesk 控制面板的单个域中可以创建多少个 MySQL 数据库？

> ID：853739
> 
> 赞同：-1
> 
> 时间：2009-05-12T16:46:49.917
> 
> 标签：mysql, plesk

你对这个问题有什么经验吗？我的 plesk 控制面板中的单个域中目前有 1900 个 MySQL 数据库，我想知道我的 MySQL 服务器是否由于系统中的大量数据库而过载或停止服务。

你有什么建议吗？顺便说一下，每个数据库都是为我服务中的用户服务的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T16:57:38.903

MySQL 本身对您可以拥有的数据库数量没有任何限制，我怀疑 Plesk 也会这样做，我确信它只会显示 MySQL 服务器上存在的所有数据库。

但是，您的主机可能有一个限制（您必须向他们询问），或者如果您开始获取**大量**数据库，您实际上可能会遇到文件系统限制。正如[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/create-database.html)所说，每个数据库都存储为一个目录，因此您可以假设达到文件系统允许的子目录数量的上限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-13T16:10:37.690

我在基于 alinux 的 plesk 集群（一个 db 一个 Web 服务器）上运行了超过 5000 个数据库，并且运行良好，尽管由于文件数量巨大，我不得不增加打开文件的限制。我不能再运行 mysql 调优入门了，我可以，但需要大约 4 小时

# javascript - 如何使用 jQuery 进行带命名空间的 XML 解析

> ID：853740
> 
> 赞同：84
> 
> 时间：2009-05-12T16:46:50.090
> 
> 标签：javascript, jquery, xml, namespaces, xsd

我是 jQuery 新手，想解析一个 XML 文档。

我能够使用默认命名空间解析常规 XML，但使用 XML，例如：

```
<xml xmlns:s="uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns:rs="urn:schemas-microsoft-com:rowset" xmlns:z="#RowsetSchema">
   <s:Schema id="RowsetSchema">
     <s:ElementType name="row" content="eltOnly" rs:CommandTimeout="30">
       <s:AttributeType name="ows_ID" rs:name="ID" rs:number="1">
        <s:datatype dt:type="i4" dt:maxLength="4" />
      </s:AttributeType>
       <s:AttributeType name="ows_DocIcon" rs:name="Type" rs:number="2">
        <s:datatype dt:type="string" dt:maxLength="512" />
      </s:AttributeType>
       <s:AttributeType name="ows_LinkTitle" rs:name="Title" rs:number="3">
        <s:datatype dt:type="string" dt:maxLength="512" />
      </s:AttributeType>
       <s:AttributeType name="ows_ServiceCategory" rs:name="Service Category" rs:number="4">
        <s:datatype dt:type="string" dt:maxLength="512" />
      </s:AttributeType>
    </s:ElementType>
  </s:Schema>
   <rs:data>
    <z:row ows_ID="2" ows_LinkTitle="Sample Data 1" />
    <z:row ows_ID="3" ows_LinkTitle="Sample Data 2" />
    <z:row ows_ID="4" ows_LinkTitle="Sample Data 3" />
  </rs:data>
</xml> 
```

我真正想要的是`<z:row>`.

到目前为止，我一直在使用：

```
$.get(xmlPath, {}, function(xml) {
    $("rs:data", xml).find("z:row").each(function(i) {
        alert("found zrow");
    });
}, "xml"); 
```

真的没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2009-05-13T14:31:44.780

我得到了它。

原来它需要`\\`转义冒号。

```
$.get(xmlPath, {}, function(xml) {
    $("rs\\:data", xml).find("z\\:row").each(function(i) {
        alert("found zrow");
    });
}, "xml"); 
```

正如里奇所指出的：

更好的解决方案不需要转义并且适用于所有“现代”浏览器：

```
.find("[nodeName=z:row]") 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-05-07T20:02:36.600

我花了几个小时阅读有关插件和各种解决方案的文章，但没有运气。

ArnisAndy 发布了一个 jQuery 讨论的链接，其中提供了这个答案，我可以确认这在 Chrome(v18.0)、FireFox(v11.0)、IE(v9.08) 和 Safari (v5.1.5) 中对我有用) 使用 jQuery (v1.7.2)。

我正在尝试抓取内容名为 <content:encoded> 的 WordPress 提要，这对我有用：

```
content: $this.find("content\\:encoded, encoded").text() 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2011-03-12T01:16:41.627

如果您使用的是 jquery 1.5，则必须在节点选择器属性值周围添加引号以使其工作：

```
.find('[nodeName="z:row"]') 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2009-12-14T16:24:59.757

尽管上面的答案似乎是正确的，但它在 webkit 浏览器（Safari、Chrome）中不起作用。我认为更好的解决方案是：

```
.find("[nodeName=z:myRow, myRow]") 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2011-07-25T03:35:55.303

如果有人需要在**没有 jQuery**的情况下执行此操作，只需使用普通的 Javascript 和**Google Chrome (webkit)**，这是我经过大量研究和测试后发现的唯一方法。

> `parentNode.getElementsByTagNameNS("*", "name");`

这将用于检索以下节点：`<prefix:name>`. 如您所见，前缀或命名空间被省略，它会匹配具有不同命名空间的元素，只要标签名称为`name`. 但希望这对你来说不是问题。

**这些都不适合我**（我正在开发一个谷歌浏览器扩展）：

`getElementsByTagNameNS("prefix", "name")`

`getElementsByTagName("prefix:name")`

`getElementsByTagName("prefix\\:name")`

`getElementsByTagName("name")`

***编辑***：经过一段时间的睡眠，**我找到了一个可行的解决方法**:)这个函数返回第一个匹配完整的节点`nodeName`，例如`<prefix:name>`：

```
// Helper function for nodes names that include a prefix and a colon, such as "<yt:rating>"
function getElementByNodeName(parentNode, nodeName)
{   
    var colonIndex = nodeName.indexOf(":");
    var tag = nodeName.substr(colonIndex + 1);
    var nodes = parentNode.getElementsByTagNameNS("*", tag);
    for (var i = 0; i < nodes.length; i++)
    {
        if (nodes[i].nodeName == nodeName) return nodes[i]
    }
    return undefined;
} 
```

如果您需要返回所有匹配的元素，可以轻松修改它。希望能帮助到你！

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2013-07-22T16:56:01.803

上述解决方案都不能很好地工作。我发现了这一点，并在速度方面得到了改进。只需添加这个，就像一个魅力：

```
$.fn.filterNode = function(name) {
    return this.find('*').filter(function() {
       return this.nodeName === name;
    });
}; 
```

用法：

```
var ineedthatelementwiththepsuedo = $('someparentelement').filterNode('dc:creator'); 
```

来源： http: [//www.steveworkman.com/html5-2/javascript/2011/improving-javascript-xml-node-finding-performance-by-2000/](http://www.steveworkman.com/html5-2/javascript/2011/improving-javascript-xml-node-finding-performance-by-2000/)

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2011-12-14T20:47:36.237

"\\" 转义不是万无一失的，而且很简单

```
.find('[nodeName="z:row"]') 
```

自 Jquery 1.7 起，方法似乎已被破坏。我在这里使用过滤器功能找到了 1.7 的解决方案：[提高 Javascript XML 节点查找性能](http://www.steveworkman.com/html5-2/javascript/2011/improving-javascript-xml-node-finding-performance-by-2000/)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-03-26T21:23:13.950

值得注意的是，从 jQuery 1.7 开始，一些用于查找命名空间元素的变通方法存在问题。有关更多信息，请参阅这些链接：

*   [jQuery Bug Ticket 指出缺乏跨浏览器支持 .find('[nodeName="z:row"]')](http://bugs.jquery.com/ticket/10377)
*   [带有一些性能测试的建议插件解决方法。](http://www.steveworkman.com/html5-2/javascript/2011/improving-javascript-xml-node-finding-performance-by-2000/)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-05-04T21:31:42.687

在评论中找到解决方案：[Parsing XML with namespaces using jQuery $().find](https://stackoverflow.com/questions/128580/parsing-xml-with-namespaces-using-jquery-find?rq=1#comment11181500_128598)

> 在冒号后使用节点名称的后半部分对我有用。使用**.find("lat")**而不是**.find("geo\:lat")**它对我有用。

* * *

我的设置：

*   铬 42
*   jQuery 2.1.3

示例 XML（来自 Google Contacts API 的片段）：

```
<entry>
  <id>http://www.google.com/m8/feeds/contacts/mstefanow%40gmail.com/base/0</id>
  <gd:email rel="http://schemas.google.com/g/2005#other" address="email@example.com" primary="true"/>
</entry> 
```

解析代码：

```
var xmlDoc = $.parseXML( xml );
var $xml = $( xmlDoc );
var $emailNode = $xml.find( "email" );
$("#email").html($emailNode.attr("address")); 
```

## Plnkr：[http ://plnkr.co/edit/l8VzyDq1NHtn5qC9zTjf?p=preview](http://plnkr.co/edit/l8VzyDq1NHtn5qC9zTjf?p=preview)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-07-25T23:44:26.140

jQuery 1.7 不适用于以下内容：

```
$(xml).find("[nodeName=a:IndexField2]") 
```

我确实在 Chrome、Firefox 和 IE 中工作的一种解决方案是使用在 IE 中工作的选择器和在 Chrome 中工作的选择器，基于一种方式在 IE 中工作而另一种在 Chrome 中工作的事实：

```
$(xml).find('a\\\\:IndexField2, IndexField2') 
```

在 IE 中，这会返回使用命名空间的节点（Firefox 和 IE 需要命名空间），而在 Chrome 中，选择器会根据非命名空间选择器返回节点。我没有在 Safari 中测试过，但它应该可以工作，因为它可以在 Chrome 中工作。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-11-09T16:25:55.887

我的解决方案（因为我使用 Php 代理）是替换 : namespace by _ ... 所以没有更多的命名空间问题 ;-)

把事情简单化 ！

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-03-13T21:50:27.117

原始答案：[jQuery XML 解析如何获取元素属性](https://stackoverflow.com/questions/4825920/jquery-xml-parsing-how-to-get-element-attribute/15397052#15397052)

这是如何在 Chrome 中成功获取值的示例。

```
 item.description = jQuery(this).find("[nodeName=itunes\\:summary]").eq(0).text(); 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-02-23T10:07:58.737

截至 2016 年初，对我来说，以下语法适用于 jQuery 1.12.0：

*   IE 11（11.0.9600.18204，更新 11.0.28，KB3134815）：`.find("z\\:row")`
*   火狐 44.0.2：`.find("z\\:row")`
*   铬 44.0.2403.89m：`.find("row")`

该语法`.find("[nodeName=z:row]")`在上述任何浏览器中都不起作用。我发现无法在 Chrome 中应用命名空间。

综上所述，以下语法适用于上述所有浏览器：`.find("row,z\\:row")`

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-04-24T21:20:53.297

如上所述，当前浏览器/jQuery 版本的上述解决方案存在问题 - 由于大小写问题，建议的插件不能完全工作（`nodeName`作为属性，有时全大写）。因此，我编写了以下快速函数：

```
$.findNS = function (o, nodeName)
{
    return o.children().filter(function ()
    {
        if (this.nodeName)
            return this.nodeName.toUpperCase() == nodeName.toUpperCase();
        else
            return false;
    });
}; 
```

示例用法：

```
$.findNS($(xml), 'x:row'); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-04-23T09:41:06.957

内容： `$this.find("content\\:encoded, encoded").text()`

是完美的解决方案...

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-06-22T16:54:37.760

jQuery有一个插件[*jquery-xmlns*](https://github.com/rfk/jquery-xmlns)可以在选择器中使用命名空间。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-05-12T21:59:20.530

我还没有看到任何关于使用 JQuery 解析 XML 的文档。JQuery 通常使用 Browser dom 来浏览 HTML 文档，我不相信它会读取 html 本身。

您可能应该查看 JavaScript 本身中内置的 XML 处理。

[http://www.webreference.com/programming/javascript/definitive2/](http://www.webreference.com/programming/javascript/definitive2/)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-06-08T17:59:22.697

只是用空字符串替换了命名空间。对我来说很好。跨浏览器测试解决方案：Firefox、IE、Chrome

我的任务是通过 Sharepoint EXCEL REST API 读取和解析 EXCEL 文件。XML 响应包含带有“x:”命名空间的标签。

我决定用空字符串替换 XML 中的命名空间。以这种方式工作： 1\. 从 XML-response 中获取感兴趣的节点 2\. 将所选节点 XML-Response (Document) 转换为 String 2\. 用空字符串替换命名空间 3\. 将字符串转换回 XML-Document

请参阅此处的代码大纲-->

```
function processXMLResponse)(xData)
{
  var xml = TOOLS.convertXMLToString("", "",$(xData).find("entry content")[0]);
  xml = xml.replace(/x:/g, "");            // replace all occurences of namespace
  xData =  TOOLS.createXMLDocument(xml);   // convert string back to XML
} 
```

对于 XML 到字符串的转换，请在此处找到解决方案： [http ://www.sencha.com/forum/showthread.php?34553-Convert-DOM-XML-Document-to-string](http://www.sencha.com/forum/showthread.php?34553-Convert-DOM-XML-Document-to-string)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-01-23T04:19:24.080

或者，您可以在项目中使用[fast-xml-parser](https://cdnjs.com/libraries/fast-xml-parser)，并将 XML 数据转换为 JS/JSON 对象。然后您可以将其用作对象属性。它不使用 JQuery 或其他库，但可以解决您的目的。

```
var xmlData = '<xml xmlns:s="uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882" xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" xmlns:rs="urn:schemas-microsoft-com:rowset" xmlns:z="#RowsetSchema">'
+'   <s:Schema id="RowsetSchema">'
+'     <s:ElementType name="row" content="eltOnly" rs:CommandTimeout="30">'
+'       <s:AttributeType name="ows_ID" rs:name="ID" rs:number="1">'
+'        <s:datatype dt:type="i4" dt:maxLength="4" />'
+'      </s:AttributeType>'
+'       <s:AttributeType name="ows_DocIcon" rs:name="Type" rs:number="2">'
+'        <s:datatype dt:type="string" dt:maxLength="512" />'
+'      </s:AttributeType>'
+'       <s:AttributeType name="ows_LinkTitle" rs:name="Title" rs:number="3">'
+'        <s:datatype dt:type="string" dt:maxLength="512" />'
+'      </s:AttributeType>'
+'       <s:AttributeType name="ows_ServiceCategory" rs:name="Service Category" rs:number="4">'
+'        <s:datatype dt:type="string" dt:maxLength="512" />'
+'      </s:AttributeType>'
+'    </s:ElementType>'
+'  </s:Schema>'
+'   <rs:data>'
+'    <z:row ows_ID="2" ows_LinkTitle="Sample Data 1" />'
+'    <z:row ows_ID="3" ows_LinkTitle="Sample Data 2" />'
+'    <z:row ows_ID="4" ows_LinkTitle="Sample Data 3" />'
+'  </rs:data>'
+'</xml>'

var jsObj = parser.parse(xmlData,{attrPrefix:"",ignoreTextNodeAttr: false});
document.write(JSON.stringify(jsObj.xml["rs:data"]["z:row"][0],null,4) + "<br>");
document.write(JSON.stringify(jsObj.xml["rs:data"]["z:row"][1],null,4) + "<br>");
document.write(JSON.stringify(jsObj.xml["rs:data"]["z:row"][2],null,4) + "<br>");
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/fast-xml-parser/2.9.2/parser.min.js"></script>
```

您可以在解析为 js/json 对象时忽略命名空间。在这种情况下，您可以直接访问 as `jsObj.xml.data.row`。

```
for(var i=0; i< jsObj.xml.data.row.length; i++){
  console.log(jsObj.xml.data.row[i]);
} 
```

**免责声明**：我创建了 fast-xml-parser。

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2013-07-18T14:02:16.387

对于 Webkit 浏览器，您可以省略冒号。`<media:content>`例如，要在 RSS 提要中查找，您可以这样做：

```
$(this).find("content"); 
```

# java - jUnit - 如何断言调用了继承的方法？

> ID：853745
> 
> 赞同：2
> 
> 时间：2009-05-12T16:47:26.797
> 
> 标签：java, inheritance, junit, jmock

假设您有一些想要扩展的第三方**库类，只需为其添加便利方法（例如，您可以使用默认参数调用继承的方法）。**

使用 jUnit/jMock，是否可以编写一个断言/模拟期望来测试是否调用了正确的继承方法？

例如，像这样：

```
class SomeClass extends SomeLibraryClass {
    public String method(String code) {
         return method(code, null, Locale.default());
    }
} 
```

我如何断言`method`正在被调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T16:53:25.867

您可以在单元测试中创建一个进一步的子类，它实际上告诉您：

```
public class MyTest {
    boolean methodCalled = false;

    @Test
    public void testMySubclass(){
          TestSomeClass testSomeClass = new TestSomeClass();
          // Invoke method on testSomeclass ...
          assertTrue( methodCalled);

    }  
    class TestSomeClass extends SomeClass{
        public String method(String code){
              methodCalled = true;
        } 
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T17:09:43.983

单元测试更有助于验证给定方法的功能，而不是断言覆盖率。更关心调用什么方法的单元测试比他们应该知道的更多地了解他们正在测试的类，更不用说会让读者感到困惑。

[Cobertura](http://cobertura.sf.net)或[EMMA](http://emma.sf.net)等覆盖工具会告诉您是否正确覆盖了代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-12-17T13:21:17.937

在这种情况下只编写集成测试可能确实更好，但如果你真的想要一个单元测试，你可以像在任何其他情况下一样轻松地拥有它：

```
public class SomeClassTest
{
    @Test
    public void testMethod()
    {
        final String code = "test";

        new Expectations()
        {
            SomeLibraryClass mock;

            {
                mock.method(code, null, (Locale) any);
            }
        };

        new SomeClass().method(code);
    }
} 
```

此测试使用 JMockit 模拟 API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-05T11:56:01.057

没有更具体的例子很难说，但我猜这应该是一个集成测试——一起测试整个包——而不是单元测试。有时，单元测试可能过于细化。

# mediawiki - 在 MediaWiki 中有没有办法强制一组页面具有特定的皮肤？

> ID：853749
> 
> 赞同：1
> 
> 时间：2009-05-12T16:49:08.167
> 
> 标签：mediawiki, skin

我热衷于这样做的原因是我们有一个运行良好的 wiki，但我想*在 wiki*中存储内部应用程序的帮助页面，并直接从应用程序链接到这些页面。虽然我们不会担心人们在查看 wiki 其余部分的页面时看到非文章内容（即帮助页面），但从应用程序查看时它会被简化，我认为如果我这样做是理想的给它一个我会设计的简化皮肤。

我已经发现 URL 可以添加**useskin=**（例如，在用户首选项页面中的预览皮肤页面中所做的那样），但是点击链接会将您恢复为正常选择的皮肤。

有没有办法调整皮肤，让所有的链接都包含useskin=？（我认为这可能有问题，因为您似乎需要完整的页面名称才能使 usekin 工作（例如**..../w/index.php?title=blah....&useskin=cologneblue**而不是短 URL） .

如果这不是一个聪明的方法，我可以考虑不同的方法（我运行 wiki 所在的盒子，也许可以创建一个不同的 wiki，尽管这可能有缺点，例如需要组合用户表和除非我重新编码，否则这可能仍然会选择用户喜欢的皮肤）。

任何明智的建议都非常感激！让我知道您是否需要更多信息，或者我是否需要澄清关于我的目标的任何观点。

[我确实在 MediaWiki.org Support Desk 页面上提交了这个，但没有得到回应......我希望我的问题没有*那么*糟糕！！]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-13T17:00:01.760

您可以将所有内容放在它自己的命名空间中，然后使用此扩展为该命名空间设置外观（我已经使用它，它运行良好）：

[http://www.mediawiki.org/wiki/Extension:SkinPerNamespace](http://www.mediawiki.org/wiki/Extension:SkinPerNamespace)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T21:02:17.613

为什么不将默认皮肤更改为您想要的皮肤？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-14T15:11:28.630

如果您不想将它们全部锁定在一个命名空间中，您还可以使用[SkinPerPage 扩展](http://www.mediawiki.org/wiki/Extension:SkinPerPage "皮肤每页")来单独标记页面。

# jquery - jQuery：使用选择器更优雅的 if/else

> ID：853754
> 
> 赞同：4
> 
> 时间：2009-05-12T16:50:25.623
> 
> 标签：jquery

我经常吐出这种类型的代码：

```
if ($(this).val() == 'X') {
    $('#something').show();
}
else {
    $('#something').hide();
} 
```

我不喜欢让 $('#something') 出现两次。有没有更优雅的表达方式？

[更新] 我的问题措辞很糟糕 - 我正在寻找一个通用的解决方案，而不仅仅是显示/隐藏（因此切换）。对于基于条件对选定元素采取不同操作的一般情况，是否有更优雅的构造？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-12T16:55:31.447

### [`toggle()`](http://docs.jquery.com/Effects/toggle#switch)

> 根据开关切换显示每个匹配元素集（true 显示所有元素，false 隐藏所有元素）。
> 
> 如果开关为真，切换使它们隐藏（使用隐藏方法）。如果开关为假，toggle 使它们显示（使用 show 方法）。

```
var result = ($(this).val() != 'X');
$('#something').toggle(result); 
```

或更短

```
$('#something').toggle('X' != $(this).val()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-12T17:02:52.233

对于没有'#something'出现两次的一般问题，我会说两次更易读。否则，您将得到以下结果：

```
$('#something')[$(this).val()=='X'?'show':'hide'](); 
```

# python - 我需要 PyISAPIe 在 IIS6 上运行 Django 吗？

> ID：853755
> 
> 赞同：0
> 
> 时间：2009-05-12T16:50:46.057
> 
> 标签：python, django, iis-6, pyisapie

似乎所有的道路都导致不得不使用[PyISAPIe](http://pypi.python.org/pypi/PyISAPIe/1.0.130)让[Django](http://www.djangoproject.com/)在 IIS6 上运行。这对我们来说是个问题，因为您似乎[需要为每个 PyISAPIe/Django 实例设置单独的应用程序池，](http://groups.google.com/group/pyisapie/web/multiple-instances-of-django-on-iis-with-pyisapie?hl=en)这是我们不希望这样做的。

有没有人有任何建议/指导，或者可以分享他们的经验（特别是在共享的 Windows 托管环境中）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T17:56:49.223

无论您使用什么扩展，都需要单独的应用程序池。这是因为应用程序池将处理程序 DLL 拆分为不同的 w3wp.exe 进程实例。您可能想知道为什么这是必要的：

查看 Django 的模块设置：`os.environ["DJANGO_SETTINGS_MODULE"]`. 这就是进程的环境，因此如果您为一个 ISAPI 处理程序更改它，然后在同一个应用程序池中更改另一个处理程序，它们都指向新的`DJANGO_SETTINGS_MODULE`.

这没有任何有意义的理由，所以请随意说服 Django 开发人员他们不需要这样做 :)

有几种方法可以绕过它，但没有什么比单独的应用程序池更干净。

不幸的是，isapi-wsgi 无法解决 Django 问题，我建议您继续使用 PyISAPIe（免责声明：我是开发人员！;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T09:05:52.657

Django 在任何 WSGI 基础设施上都能很好地运行（很像任何其他现代 Python Web 应用程序框架），并且有多种方法可以在 IIS 上运行 WSGI，例如参见[http://code.google.com/p/isapi-wsgi/](http://code.google.com/p/isapi-wsgi/)。

# linux - 如何从终端启动命令，使终端不是父级？

> ID：853757
> 
> 赞同：25
> 
> 时间：2009-05-12T16:51:14.153
> 
> 标签：linux, command-line, terminal

让我们以命令“example-command”为例。

1.  我打开终端
2.  `example-command`我在终端中写入，然后`example-command`执行。
3.  现在，如果我关闭终端，`example-command`也会被杀死。
4.  我现在尝试使用“ `example-command &`”，但行为相同。

如何执行命令，以便在关闭终端时不会终止命令？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-05-12T16:58:32.503

有两种方法，结果相同。

1.  `nohup`启动程序时使用。例如，`nohup example-command`。你可以后台正常使用它；它会在您退出后继续运行。
2.  或者，[正如@alamar 指出的那样](https://stackoverflow.com/a/853763/292408)，如果您使用 bash 作为您的 shell，您可以使用该`disown`命令。不幸的是，据我所知，`disown`它是特定于 bash 的；如果您使用其他 shell，例如`tcsh`，您可能会被限制为上述`nohup`形式。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-12T17:54:53.880

请先搜索类似问题。

除了上面列出的方法之外，您还可以执行以下操作：

```
setsid command_name 
```

例如：

```
setsid xclock 
```

谢谢

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-12T16:51:52.640

在 Zsh（不是 bash）中，您可以：

```
example-command &; disown {pid} 
```

要不就

```
example-command &; disown 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-12T17:37:43.533

您也可以考虑使用[screen](http://www.manpagez.com/man/1/screen/ "屏幕")命令。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-12T17:00:37.820

nohup 示例命令

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-12T17:03:12.683

您还可以使用[“at”或“batch”命令](http://man.he.net/?topic=at&section=all)并为其指定当前时间。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-12T17:04:56.800

disown 是一个内置的 bash。您可以为您的命令创建一个包装器 shellscript，例如

```
#!/bin/bash
$1 &
P=`which $1`
disown `pidof ${P}` 
```

不是最强大的脚本（无论如何），但可能会帮助您前进。例如：

```
$./launch_script.sh myProgram 
```

如果您正在编辑程序，您也可以在程序的源代码中执行此操作。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2009-05-12T18:56:12.623

运行：示例命令

按：Control-Z

运行：bg

# asp.net - 需要有关 ASP.Net 兼容 HTML->PDF 库的建议

> ID：853759
> 
> 赞同：2
> 
> 时间：2009-05-12T16:51:24.200
> 
> 标签：asp.net, html, pdf

我正在寻找一个将 HTML 转换为 PDF 的库，包括样式。我希望它能够接受 URL 作为选项，但如果需要，HTML 可以作为流/字节数组传入，所有样式都在单个文件/缓冲区中。我正在使用 C#/ASP.Net 3.5。我完全控制了服务器机器（我可以作为服务运行，等等......）但是，我不能要求用户登录，所以请不要应用程序级别或打印驱动程序类型的解决方案。

我知道有像 PDFSharp 这样的免费解决方案，但这些仍然需要您正确格式化输出。我希望库生成与源输入几乎相同的输出，该库不提供（或者至少，我相信它不提供，如果我错了，请纠正我）。

我也知道有许多商业产品可用。其中一些是几千美元，这超出了我目前对该功能的预算。有一个图书馆[ABCPDF](http://www.websupergoo.com/abcpdf-1.htm)似乎完全可以做我想做的事，而且价格我可以负担得起。也就是说，他们网站上缺乏专业性/润色让我有点警惕。

如果您有 ABCpdf 的经验，或者可以推荐一个类似的库（价格特征明智），我将不胜感激。

编辑：谢谢大家的回答。听起来像 abcPDF 或 aspPDF 是要走的路，而且都在预算之内。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-12T16:56:16.767

我使用并强烈推荐 ABCPDF 来满足您的需求。我用它来 pdf 复杂的 html 报告（嵌套表格和大量 css 和图表）。将它指向一个 url 效果很好。

作为奖励，它支持内部分页：避免使用 css。

早在我写经典的 asp 时，我就使用了他们的 ABCUpload 产品，这也很棒。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-12T17:16:02.133

不是推荐，但是......

远离 iTextSharp for HTML -> PDF。它是我当前雇主允许的唯一“批准”的 PDF 生成库。我们花了无数时间尝试将 HTML 转换为 PDF ......这不是它的好处。iTextSharp 非常适合 PDF 版本的表单

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-12T17:06:49.497

我过去使用过 ABCPDF，它的价格非常好。

我也不得不使用他们的支持，他们非常迅速地处理了一个极其模糊的问题。良好的沟通和周转时间。我认为从我提交票证到找到并解决解决方案的时间是 2 天。

它们在许可方面也很容易使用，因为我们不得不购买不再可用的旧许可（这样现有产品就不需要重新测试）。

在选择 ABCPDF 之前，我们尝试了 2 或 3 个开源产品，但没有一个产品具有我们满意的灵活性或支持水平。

这是我评论过的正在寻找类似产品的线程的链接： [Generate HTML To PDF Control for the .NET application](https://stackoverflow.com/questions/708464/generate-html-to-pdf-control-for-the-net-application)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T16:58:39.930

我们使用 ExpertPDF 的 HtmlToPdf 转换器，非常不错。我们公司有旧的许可证，但增加了许多新功能。使用 CSS 非常简单。

[http://www.html-to-pdf.net/](http://www.html-to-pdf.net/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-12T17:00:54.170

ASPPDF 支持 HTML 到 PDF，包括样式表。

[http://www.asppdf.com/index.html](http://www.asppdf.com/index.html)

但是，商业。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-12T17:03:03.137

我使用的是来自 Persist Software 的[aspPDF](http://www.asppdf.com/)，它非常适合我的项目。这是非常令人印象深刻的，并且从 ASP 开始就得到了一家开发 ASP 组件的公司的支持。

您可以在以下位置查看非常好的现场演示：[http ://www.asppdf.com/livedemo.html](http://www.asppdf.com/)

# c# - C#中的常量字典

> ID：853761
> 
> 赞同：9
> 
> 时间：2009-05-12T16:51:39.520
> 
> 标签：c#, .net, dictionary, immutability, readonly

我在 C# 中有一个包含字典的类，只要包含它的类存在，我想创建它并确保从该字典中添加、编辑或删除任何内容。

readonly 并没有真正帮助，一旦我测试并看到我可以在之后添加项目。例如，我创建了一个示例：

```
public class DictContainer
{
    private readonly Dictionary<int, int> myDictionary;

    public DictContainer()
    {
        myDictionary = GetDictionary();
    }

    private Dictionary<int, int> GetDictionary()
    {
        Dictionary<int, int> myDictionary = new Dictionary<int, int>();

        myDictionary.Add(1, 2);
        myDictionary.Add(2, 4);
        myDictionary.Add(3, 6);

        return myDictionary;
    }

    public void Add(int key, int value)
    {
        myDictionary.Add(key, value);
    }

} 
```

我希望 Add 方法不起作用。如果可能的话，我希望它甚至不编译。有什么建议么？

实际上，我很担心它是开放给很多人更改的代码。因此，即使我隐藏了 Add 方法，也有可能有人“无辜地”创建一个添加密钥或删除另一个密钥的方法。我希望人们查看并知道他们不应该以任何方式更改字典。就像我使用 const 变量一样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-12T16:56:09.107

完全隐藏字典。只需在 DictContainer 类上提供一个从字典中检索项目的 get 方法。

```
public class DictContainer
{
    private readonly Dictionary<int, int> myDictionary;

    public DictContainer()
    {
        myDictionary = GetDictionary();
    }

    private Dictionary<int, int> GetDictionary()
    {
        Dictionary<int, int> myDictionary = new Dictionary<int, int>();

        myDictionary.Add(1, 2);
        myDictionary.Add(2, 4);
        myDictionary.Add(3, 6);

        return myDictionary;
    }

    public this[int key]
    {
        return myDictionary[key];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T16:56:05.723

不要定义`Add`方法。

保持`myDictionary`变量私有并公开一个 Getter/Indexer，以便只能从该类外部读取它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T16:56:48.000

没有内置的方法可以做到这一点，请考虑使用[包装类。](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T17:17:00.400

```
interface IReadOnlyDic<Key, Value>
{
    void Add(Key key, Value value);
}
class ReadOnlyDic<Key, Value> : Dictionary<Key, Value>, IReadOnlyDic<Key, Value>
{
    public new void Add(Key key, Value value)
    {
        //throw an exception or do nothing
    }
    #region IReadOnlyDic<Key,Value> Members

    void IReadOnlyDic<Key, Value>.Add(Key key, Value value)
    {
        base.Add(key, value);
    }

    #endregion
} 
```

添加自定义项目；

```
 IReadOnlyDic<int, int> dict = myDictInstance as IReadOnlyDic<int, int>;
    if (dict != null)
        dict.Add(1, 155); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T17:21:07.617

这是另一种方式

```
class ReadOnlyDic<Key, Value> : Dictionary<Key, Value>
{
    private bool _locked = false;

    public new void Add(Key key, Value value)
    {
        if (!_locked)
        {
            base.Add(key, value);
        }
        else
        {
            throw new ReadOnlyException();
        }
    }
    public void Lock()
    {
        _locked = true;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-11T21:52:18.187

仅供参考，现在它内置于 .net 4.5。

[http://msdn.microsoft.com/en-us/library/gg712875(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/gg712875(v=vs.110).aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-01T15:10:04.577

类似于[尼尔的回答](https://stackoverflow.com/a/853776)：

完全隐藏字典。只需在 DictContainer 类上提供一个从字典中检索项目的 get 方法。如果你想使用 [] 覆盖你需要 getter settter 方法（至少任何一个 get/set）

```
public class DictContainer
{
    private readonly Dictionary<int, int> myDictionary;

    public DictContainer()
    {
        myDictionary = GetDictionary();
    }

    private Dictionary<int, int> GetDictionary()
    {
        Dictionary<int, int> myDictionary = new Dictionary<int, int>();

        myDictionary.Add(1, 2);
        myDictionary.Add(2, 4);
        myDictionary.Add(3, 6);

        return myDictionary;
    }

    public this[int key]
    {
        get => myDictionary[key];
    }
} 
```

# php - HTML 登录表单返回错误

> ID：853770
> 
> 赞同：0
> 
> 时间：2009-05-12T16:54:30.310
> 
> 标签：php, html

我的任务是清理我公司几年前建立的网站上的一些错误。我想在我在这里发布的代码前加上我没有编写它的警告，而且我知道它不是一个非常安全的登录系统，但我只是被指派修复手头的错误。

问题：当用户登录时，提交表单后，页面似乎已刷新，要求他们重新输入凭据。没有报告登录错误。到目前为止，我只能在 Firefox 和 Safari 中复制这个问题。成功登录后，如果要注销并重新登录，一切似乎都正常。就在您最初启动浏览器并尝试第一次登录之后。我也在不同的 Mac/Windows PC 上复制了这个。

这是基本的登录页面 HTML。我正在删减任何不必要的内容，但如果需要可以提供更多代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
...

<body>
            <form name="login" method="post" id="mainform" action="clogin.php">
                 <label for="username">Username:</label>
                 <input type="text" id="username" name="username"><br />
                 <label for="password">Password:</label>
                 <input type="password" id="password" name="password"><br />
                 <input type="submit" name="Submit" class="button" style="float:right;" value="Login">                
            </form>
</body> 
```

这是 PHP，也为胖而修剪：

```
<?php
$db = mysql_connect('***', '***', '***') or die("Couldn't connect to the database."); 
mysql_select_db('***') or die("Couldn't select the database"); 

$result = mysql_query("SELECT count(id) FROM merchants WHERE passw='$_POST[password]' AND usern='$_POST[username]'") or die("Couldn't query the user-database."); 
$num = mysql_result($result, 0); 

if (!$num) { 

// When the query didn't return anything, 
// display the login form. 

$message = "Login Failed: Incorrect username or password";

header('Location: login.php?message='.$message);

} else { 

// Start the login session 
session_start(); 

// All output text below this line will be displayed 
// to the users that are authenticated. Since no text 
// has been output yet, you could also use redirect 
// the user to the next page using the header() function. 
header('Location: merchants/index.php'); 
} 
```

有人知道我应该从哪里开始寻找吗？我的第一个想法是，也许表单实际上并没有完全提交？我怎么知道这是否正在发生？任何提示或指针都会很棒。我个人找不到可能导致此问题的“代码”问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T17:08:03.363

抵制大喊“SQL 注入攻击！！！！1111”的冲动，正如您所说，它确实看起来好像表单没有正确提交。

**几个想法：**

在查询数据库之前，您是否以某种方式在代码中检查了表单已提交？如果是这样，这个值肯定会被发布吗？

我之前在 Firefox / Safari 中遇到过这个问题，当时我有一个`<button type="submit">`标签来提交表单而没有为该按钮分配值 - IE (<8) 对此很好，但其他浏览器肯定不是。

将以下代码放入您的提交页面，以查看提交的确切内容：

```
die('<pre>'.print_r($_POST,true).'</pre>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T17:03:56.113

获取Firefox的[篡改数据插件。](http://tamperdata.mozdev.org/index.html)它可以让您查看表单发布和服务器返回的响应。还有其他插件可以做同样的事情，或者如果您还需要在 IE 中查看相同的数据，您可以获取[Fiddler](http://www.fiddler2.com/fiddler2/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T17:05:22.727

如果不是选择`COUNT(id)`你，而是选择`*`并替换`mysql_result`for `mysql_num_rows`，错误是否仍然发生？

```
$result = mysql_query("SELECT * FROM merchants WHERE passw='$_POST[password]' AND usern='$_POST[username]'") or die("Couldn't query the user-database."); 
$num = mysql_num_rows($result); 

if ($num < 1) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T17:24:11.713

让我们在这里重写一下，看看它是如何工作的：

```
<?php
$db = mysql_connect('***', '***', '***') or die("Couldn't connect to the db."); 
mysql_select_db('***') or die("Couldn't select the db"); 

$result = mysql_query("SELECT id FROM merchants WHERE passw='%s' AND usern='%s'",
                      mysql_real_escape_string($_POST['username']),
                      mysql_real_escape_string($_POST['password'])) 
      or die("Couldn't query the user table."); 

if (mysql_num_rows($result) != 0) {
     $user = mysql_fetch_assoc($result);
     $userId = $user['id'];

     // Destroy any old session data from before for a fresh session
     session_destroy();
     session_start(); 

     header('Location: merchants/index.php'); 
     exit();
} else {
    $message = "Login Failed: Incorrect username or password";

    header('Location: login.php?message='.$message);
    exit();
}
?> 
```

试一试。在标头中设置位置以确保不再执行代码后，抛出一个 exit() 总是好的。

当您使用它时，您可能希望在会话数组中设置错误消息并将其发回，而不是通过查询字符串：

```
...
} else {
    $message = "Login Failed: Incorrect username or password";
    $_SESSION['login_error'] = $message;
    header('Location: login.php');
    exit();
} 
```

然后只需在您的登录页面上访问 $_SESSION['login_message'] 即可显示任何错误。

如果这不能让您工作，请在 $_POST 数组上尝试一些[var_dump()](http://us2.php.net/var_dump)以查看您的表单中的内容。

# ruby-on-rails - 如何在 Rails 中向序列化为 JSON 的 ActiveRecord 记录添加额外数据？

> ID：853784
> 
> 赞同：3
> 
> 时间：2009-05-12T16:58:08.947
> 
> 标签：ruby-on-rails, json, serialization

我通过一个返回 JSON 的简单 API 公开一些资源。我想注入每个资源的路径，这样消费者就不需要构造它们。所需输出的示例，例如`User.all.to_json`：

```
users: [
  {user: {
    id: 1,
    name: 'Zaphod',
    url: 'http://domain.com/users/1.json'
  }},
  {user: {
    id: 2,
    name: 'Baron Munchausen',
    url: 'http://domain.com/users/2.json'
  }}
]; 
```

为了生成 URL，我想继续使用帮助程序而不是用这种信息污染模型。有没有办法做到这一点？还是我最好将其放入模型中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T20:05:50.403

如果你有一个想要包含在 json 序列化中的模型方法，你可以使用内置的[to_json](http://api.rubyonrails.org/classes/ActiveRecord/Serialization.html#M001826)调用和`:methods`参数：

```
class Range
   def url
     # generate url
     ...
    end
end

Range.find(:first).to_json(:methods => :url) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T17:21:50.297

你检查过这个吗：http: [//json.rubyforge.org/](http://json.rubyforge.org/)？

```
class Range
  def to_json(*a)
    {
      'json_class'   => self.class.name,
      'data'         => [ first, last, exclude_end? ]
    }.to_json(*a)
  end

  def self.json_create(o)
    new(*o['data'])
  end
end 
```

# c# - 从xml读取属性

> ID：853793
> 
> 赞同：3
> 
> 时间：2009-05-12T17:01:00.427
> 
> 标签：c#, asp.net, xml, xml-attribute

有人可以帮我从这个xml结构中使用c#读取带有asp.net的属性ows_AZPersonnummer吗

```
<listitems 
  xmlns:s="uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882" 
  xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" 
  xmlns:rs="urn:schemas-microsoft-com:rowset"
  xmlns:z="#RowsetSchema"
  xmlns="http://schemas.microsoft.com/sharepoint/soap/">
<rs:data ItemCount="1">
   <z:row 
      ows_AZNamnUppdragsansvarig="Peter" 
      ows_AZTypAvUtbetalning="Arvode till privatperson" 
      ows_AZPersonnummer="196202081276"
      ows_AZPlusgiro="5456436534"
      ows_MetaInfo="1;#"
      ows__ModerationStatus="0"
      ows__Level="1" ows_ID="1"
      ows_owshiddenversion="6"
      ows_UniqueId="1;#{11E4AD4C-7931-46D8-80BB-7E482C605990}"
      ows_FSObjType="1;#0"
      ows_Created="2009-04-15T08:29:32Z"
      ows_FileRef="1;#uppdragsavtal/Lists/Uppdragsavtal/1_.000" 
    />
</rs:data>
</listitems> 
```

并获得价值 196202081276。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T17:09:31.207

在一个对象中打开它`XmlDocument`，然后使用`SelectNode`带有以下 XPath 的函数：

```
//*[local-name() = 'row']/@ows_AZPersonnummer 
```

基本上，这会查找每个名为“row”的元素，而不考虑深度和命名空间，并返回`ows_AZPersonnummer`它的属性。应该有助于避免您可能遇到的任何命名空间问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-12T17:18:46.137

[XmlNamespaceManager](http://msdn.microsoft.com/en-us/library/system.xml.xmlnamespacemanager.aspx)是你的朋友：

```
string xml = "..."; //your xml here
XmlDocument doc = new XmlDocument();
doc.LoadXml(xml);

XmlNamespaceManager nsm = new XmlNamespaceManager(new NameTable());
nsm.AddNamespace("z", "#RowsetSchema");

XmlNode n = doc.DocumentElement
               .SelectSingleNode("//@ows_AZPersonnummer", nsm);
Console.WriteLine(n.Value); 
```

您还可以使用 LINQ to XML：

```
XDocument xd = XDocument.Parse(xml);
XNamespace xns = "#RowsetSchema";
string result1 = xd.Descendants(xns + "row")
            .First()
            .Attribute("ows_AZPersonnummer")
            .Value;
// Or...

string result2 =
    (from el in xd.Descendants(xns + "row")
     select el).First().Attribute("ows_AZPersonnummer").Value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T17:05:37.453

我会说您需要一个 XML 解析器，我认为这很常见。这看起来像一个简单的 XML 结构，所以处理代码应该不会太难。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T17:16:09.683

使用 <%# Eval("path to attribute") %> 但你需要加载的xml有一个DataSource。

否则，您可以使用 XmlTextReader 加载它。这是一个[例子](http://www.dotnetspider.com/resources/22541-Read-XML.aspx)。

# c# - 提高 AJAX 自动完成性能

> ID：853794
> 
> 赞同：0
> 
> 时间：2009-05-12T17:01:17.523
> 
> 标签：c#, asp.net, ajax, asp.net-ajax

我的 sql server 2005 数据库中有一个美国城市/州列表表，其中包含一百万条记录。我的 Web 应用程序页面有使用 AJAX 自动完成功能的位置文本框。当用户输入 3 个字符时，我需要显示完整的城市/州。例如：输入 bos.. 输出：Boston,MA

目前，就性能而言，此功能非常缓慢。我该如何改进它？

谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T17:16:04.143

您检查过数据库上的索引吗？如果您的查询格式正确，并且您的表上有正确的索引，您可以查询一个 500 万行的数据库并在不到一秒的时间内获得结果。我建议查看您是否在 City 上有一个索引，并在索引中添加了 State 列。这样，当您按城市查询时，它将从索引中返回城市和州。

如果您在 sql management studio 中运行查询并按 ctrl-m，您可以在查询中看到执行计划。如果您看到诸如表扫描或索引扫描之类的内容，那么您的表上的索引错误。您想确保您的结果具有索引搜索，这意味着您的查询正在通过数据库中的正确页面来查找您的数据。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T17:29:39.753

我的猜测是您遇到的问题不是数据库本身（尽管您应该检查它是否存在索引问题），而是从数据库中检索信息所需的时间，将其放入适当的对象等.，并将其发送到浏览器。如果是这种情况，没有一些实际工作就没有很多选择。

1.  您可以在 Web 服务器上缓存经常访问的信息。如果您知道有很多经常访问的城市，您可以将它们预先存储起来，然后检查数据库是否用户正在查找的内容不在系统中。当用户键入内容并且我们需要在列表中找到它时， 我们使用[前缀树来存储信息。](http://en.wikipedia.org/wiki/Trie)

2.  您可以在用户开始输入后立即开始从数据库中提取信息，然后在您从用户那里获得更多信息后将完整的结果集配对。这有点棘手，因为您必须在请求之间将信息存储在内存中（因此，如果用户键入“B”，则开始检索并将其存储在会话中。当用户完成键入“BOS”时初始查询的结果集暂时在内存中，您可以循环并提取与最终请求匹配的子集）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-06-17T21:24:30.697

使用父子下拉菜单

# mysql - 在 Django 中加载固定装置时出现内容类型问题

> ID：853796
> 
> 赞同：117
> 
> 时间：2009-05-12T17:02:15.337
> 
> 标签：mysql, django, django-models, fixtures, mysql-error-1062

由于内容类型冲突，我无法将 Django 固定装置加载到我的 MySQL 数据库中。首先，我尝试仅从我的应用程序中转储数据，如下所示：

```
./manage.py dumpdata escola > fixture.json 
```

但我一直缺少外键问题，因为我的应用程序“escola”使用来自其他应用程序的表。我一直在添加其他应用程序，直到我做到这一点：

```
./manage.py dumpdata contenttypes auth escola > fixture.json 
```

现在问题是当我尝试将数据加载为测试夹具时出现以下约束违规：

```
IntegrityError: (1062, "Duplicate entry 'escola-t23aluno' for key 2") 
```

问题似乎在于 Django 试图动态地重新创建具有不同主键值的内容类型，这些主键值与夹具中的主键值冲突。这似乎与此处记录的错误相同：http: [//code.djangoproject.com/ticket/7052](http://code.djangoproject.com/ticket/7052)

问题是推荐的解决方法是转储我已经在做的内容类型应用程序！？是什么赋予了？如果有什么不同，我确实有一些自定义模型权限，如此处所述：http: [//docs.djangoproject.com/en/dev/ref/models/options/#permissions](http://docs.djangoproject.com/en/dev/ref/models/options/#permissions)

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2010-11-02T08:17:01.017

`manage.py dumpdata --natural`将使用更持久的外键表示。在 django 中，它们被称为“自然键”。例如：

*   `Permission.codename`用于支持`Permission.id`
*   `User.username`用于支持`User.id`

阅读更多：[“序列化 django 对象”中的自然键部分](http://docs.djangoproject.com/en/dev/topics/serialization/#natural-keys)

其他一些有用的论点`dumpdata`：

*   `--indent=4`使其具有人类可读性。
*   `-e sessions`排除会话数据
*   `-e admin`排除管理站点上的管理操作历史记录
*   `-e contenttypes -e auth.Permission`排除每次在`syncdb`. 只能将它与它一起使用`--natural`，否则您最终可能会得到错误对齐的 id 编号。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2017-05-05T12:41:37.797

这里的答案都是旧的......截至2017年，最好的答案是：

```
manage.py dumpdata --natural-foreign --natural-primary -e contenttypes -e auth.Permission --indent 4 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2009-05-13T00:58:27.540

是的，这真的很烦人。有一段时间，我通过在加载夹具之前对 contenttypes 应用程序执行“manage.py reset”来解决它（以摆脱与转储版本不同的自动生成的 contenttypes 数据）。那行得通，但最终我厌倦了麻烦并完全放弃了固定装置，转而支持直接的 SQL 转储（当然，这样你就失去了数据库的可移植性）。

**更新**- 最好的答案是使用`--natural`标志 to `dumpdata`，如下面的答案所述。当我写这个答案时，那个标志还不存在。

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2010-05-30T03:03:37.773

创建夹具时尝试跳过内容类型：

```
./manage.py dumpdata --exclude contenttypes > fixture.json 
```

它在单元测试的类似情况下对我有用，您对内容类型的洞察力真的很有帮助！

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2016-11-12T00:33:33.597

我没有使用 MySQL，而是将一些数据从实时服务器导入 sqlite。在执行之前清除`contenttypes`应用程序数据`loaddata`就可以了：

```
from django.contrib.contenttypes.models import ContentType
ContentType.objects.all().delete()
quit() 
```

接着

```
python manage.py loaddata data.json 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2010-10-04T13:41:44.497

我已经在我的测试用例中解决了这个问题，方法是在加载我的转储文件之前从单元测试中重置 contenttypes 应用程序。卡尔已经使用该`manage.py`命令提出了这个建议，而我只使用该`call_command`方法做同样的事情：

```
>>> from django.core import management
>>> management.call_command("flush", verbosity=0, interactive=False)
>>> management.call_command("reset", "contenttypes", verbosity=0, interactive=False)
>>> management.call_command("loaddata", "full_test_data.json", verbosity=0) 
```

我的`full_test_data.json`夹具包含与其余测试数据相对应的内容类型应用转储。通过在加载之前重置应用程序，它可以防止重复键`IntegrityError`。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2018-12-07T04:02:06.690

您需要使用自然键来表示任何外键和多对多关系。此外，排除应用程序中的表格和应用程序中的`session`表格可能是个好主意。`sessions``logentry``admin`

**姜戈 1.7+**

```
python manage.py dumpdata --natural-foreign --exclude contenttypes --exclude auth.permission --exclude admin.logentry --exclude sessions.session --indent 4 > fixture.json 
```

**姜戈 <1.7**

```
python manage.py dumpdata --natural --exclude contenttypes --exclude auth.permission --exclude admin.logentry --exclude sessions.session --indent 4 > fixture.json 
```

根据[Django 文档](https://docs.djangoproject.com/en/1.8/ref/django-admin/)，`--natural`在 1.7 版中已弃用，因此`--natural-foreign`应使用该选项。

您还可以省略此对象的序列化数据中的主键，因为它可以在反序列化期间通过传递`--natural-primary`标志来计算。

```
python manage.py dumpdata --natural-foreign --natural-primary --exclude contenttypes --exclude auth.permission --exclude admin.logentry --exclude sessions.session --indent 4 > fixture.json 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-06-21T01:51:20.313

```
python manage.py dumpdata --natural-primary --exclude=contenttypes --exclude=auth.Permission --exclude=admin.logentry --exclude=sessions.session --indent 4 > initial_data.json 
```

这对我有用。在这里，我排除了除实际模型之外的所有内容。

*   如果您看到除您创建的模型之外的任何其他模型，您可以安全地排除这些模型。这种方法的一个缺点是您在日志数据和身份验证数据上松散了。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-01-25T10:27:35.907

```
./manage.py dumpdata app.Model --natural-foreign 
```

将改变

```
 "content_type": 123 
```

至

```
 "content_type": [
    "app_label",
    "model"
  ], 
```

夹具`TestCase`现在可以工作

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2011-10-14T14:14:50.553

真的，真的很烦人..我每次都被这个咬伤。

我尝试使用 --exclude contenttypes 和 --natural 转储数据，但我总是遇到问题..

最适合我的方法是`truncate table django_content_type;`在 syncdb 之后执行一个然后加载数据。

当然，对于 initial_data.json 自动加载，你是个失败者。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-09-05T10:20:31.093

**Django 2.2.5**

```
python manage.py dumpdata --exclude=contenttypes > datadump.json 
```

它帮助了我

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2011-10-06T22:42:50.677

我将给出我刚刚想出的另一个可能的答案。也许它会帮助OP，也许它会帮助其他人。

我有一个多对多关系表。它有一个主键和其他表的两个外键。我发现，如果我在夹具中有一个条目，其两个外键与表中已有的另一个具有*不同*pk 的条目相同，它将失败。M2M 关系表对两个外键具有“唯一性”。

因此，如果 M2M 关系正在中断，请查看它添加的外键，查看您的数据库以查看该对 FK 是否已列在不同的 PK 下。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-07-31T13:28:03.787

我尝试了上面的所有方法，对我没有任何作用。我必须排除完整的身份验证模型并且工作正常。

```
python manage.py dumpdata --natural-primary --exclude=contenttypes --exclude=auth --exclude=admin.logentry --exclude=sessions.session --indent 4 > live.json 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-07-05T14:28:35.177

我以前有时也遇到过类似的错误。事实证明，我试图在创建必要的表之前加载固定装置。所以我做了：

```
$ python manage.py makemigrations
$ python manage.py migrate
$ python manage.py loaddata fixtures/initial_data.json 
```

它就像一个魅力

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-02-05T23:19:22.267

在我的例子中，我已经从`auth`( `./manage.py dumpddata auth > fixtures/auth.json`) 中转储了数据，以便将夹具用于测试目的。

开发继续进行，我删除了我定义的大部分模型`models.py`，这就是我开始看到这个烦人的问题的时候。

我的解决方案是再次重新生成 auth.json 夹具。这个已经删除了很多`auth.permission`与我拥有的旧模型相关的条目。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-01-07T19:23:48.103

我已经通过添加我的测试 setUp 和 tearDown 来解决这个问题

```
from django.core import management 
```

=====

```
def setUp(self):
    management.call_command("loaddata", "all-data.yaml", verbosity=0)
    super(login_page_test, self).setUp()

def tearDown(self):
    management.call_command("flush", verbosity=0, interactive=False)
    super(login_page_test, self).setUp() 
```

# c++ - 以编程方式从 Mac OS X 获取处理器详细信息

> ID：853798
> 
> 赞同：10
> 
> 时间：2009-05-12T17:03:02.217
> 
> 标签：c++, macos, hardware

我在 Mac OS X 上运行的应用程序需要检索有关它正在运行的机器的详细信息以报告系统信息。我需要的其中一项是有关计算机中安装的处理器的详细信息。

我的代码目前可以工作，但远非理想的解决方案，事实上我认为它是一个糟糕的解决方案，但我没有找到更好的解决方案。

我目前报告的信息以及经过一些格式化后的信息如下所示：

> 处理器：Intel Core 2 Duo 2.1 GHz，Family 6 Model 23 Stepping 6

我获得的所有信息都是通过从 popen() 调用的命令行实用程序。处理器描述的可读部分取自“system_profiler”命令输出，系列、型号和步进值取自“sysctl”命令。

这些命令行实用程序必须从某个地方获取信息。 **我想知道是否有可用的编程接口来获取相同的信息？**

* * *

有关的：

*   [Mac上如何获取显示驱动版本？](https://stackoverflow.com/questions/821133/how-can-display-driver-version-be-obtained-on-the-mac)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2010-08-04T22:27:16.467

Use `sysctlbyname` rather than `sysctl`, e.g.

```
#include <stdio.h>
#include <stdint.h>
#include <sys/types.h>
#include <sys/sysctl.h>

uint64_t get_cpu_freq(void)
{
    uint64_t freq = 0;
    size_t size = sizeof(freq);

    if (sysctlbyname("hw.cpufrequency", &freq, &size, NULL, 0) < 0)
    {
        perror("sysctl");
    }
    return freq;
} 
```

You can get a list of the names that can be passed to `systctlbyname` by looking at the output of `sysctl -a` from the command line.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-13T19:37:24.217

您需要查看 IOKit API。IORegistryExplorer 应用程序（标准 devtools 安装的一部分）将帮助您找到您要查找的内容。

例如，在我的 MacBook Pro 上，在 IORegistryExplorer 中，我从窗口左上角的下拉菜单中选择“IODeviceTree”，我可以在下面的树视图中看到两个 CPU。选择其中任何一个都会得到以下信息：

[IORegistryExplorer 截图 http://blog.alanquatermain.net/images/IORegistryExplorer-CPUs.png](http://blog.alanquatermain.net/images/IORegistryExplorer-CPUs.png)

'bus-frequency' 和 'clock-frequency' 和 'timebase-frequency' 都是数据对象中的 32 位整数包装器，因此必须进行字节交换才能在此处解释（小端 i386 机器字），并且可以工作输出到以下值：

*   总线频率：1064000000 Hz => 1.064 GHz
*   时钟频率：2530000000 Hz => 2.53 GHz
*   时基频率：1000000000 HZ => 1.0 GHz

但是，如果您通过 IOKit 阅读这些内容，您将返回一个 CFDataRef，并且可以像这样将字节复制到您自己的 uint32_t 中：

```
uint32_t bus_frequency = 0;
CFDataGetBytes( theData, (UInt8 *) &bus_frequency, sizeof(uint32_t) ); 
```

接下来，您可以使用`NXArchInfo()`include 获得的调用来获取处理器信息`<mach-o/arch.h>`。这将返回一个包含 cpu 类型和子类型代码以及 C 字符串名称和描述的结构。如果这不包括步进 ID，那么我能想到的唯一方法（在我的脑海中）是通过 CPUID 指令。创建一个 .s 和 .h 文件，并输入以下代码：

.s 文件：

```
#ifdef __i386__ || __x86_64__

.macro ENTRY
    .text
    .private_extern $0
    .align  4, 0x90
$0:
.endmacro

// __private_extern__ unsigned long GetCPUSteppingID( void )
ENTRY _GetCPUSteppingID
    push        %ebp                // store existing frame pointer
    mov         %esp,%ebp           // make a new frame pointer from stack pointer
#if __x86_64__
    push        %rbx
#endif
    push        %ebx                // we save %ebx because the cpuid instruction
                                    // will overwrite it, and it's expected
                                    // to be unchanged in the caller after
                                    // calling another function
    movl        $1,%eax             // fetch cpu info
    cpuid                           // stepping-id is in low 4 bits of %edx now
    and         $0x0000000f,%edx    // clear out everything we don't want
#if __x86_64__
    mov         %edx,%rax           // %rax is 64-bit arch result register
#else
    mov         %edx,%eax           // %eax is 32-bit arch result register
#endif
    pop         %ebx                // restore saved value of %ebx
#if __x86_64__
    pop         %rbx                // restore saved value of %rbx
#endif
    leave                           // restores prior stack frame from %ebp
    ret                             // returns to caller

#endif // __i386__ || __x86_64__ 
```

.h 文件：

```
#ifndef __GET_STEPPING_ID__
#define __GET_STEPPING_ID__

/* unsigned long is register-sized on both 32-bit and 64-bit OS X */
__private_extern__ unsigned long GetSteppingID( void );

#endif /* __GET_STEPPING_ID__ */ 
```

请注意，我不确定上面的 x86_64 位；理论上，我在那里输入的内容将确保相同的代码编译为 64 位，并且在这种情况下将返回一个 64 位的值。它还将保存/恢复 %rbx 寄存器，即 %ebx 寄存器的 64 位版本。*从理论上讲*，这将涵盖所有基础。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-12T17:10:06.197

[`sysctl(3)`](http://developer.apple.com/documentation/Darwin/Reference/ManPages/man3/sysctl.3.html#//apple_ref/doc/man/3/sysctl)可能是一个很好的起点。你可能想要选择器定义的东西`CTL_HW`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-03T21:30:19.100

[Paul R](https://stackoverflow.com/a/3410366/2535529)方法的变体

```
#include <iostream>
#include <stdio.h>
#include <stdint.h>
#include <sys/types.h>
#include <sys/sysctl.h>

void show_cpu_info(void)
{
    char buffer[1024];
    size_t size=sizeof(buffer);
    if (sysctlbyname("machdep.cpu.brand_string", &buffer, &size, NULL, 0) < 0) {
        perror("sysctl");
    }
    std::cout << buffer << '\n';
} 
```

会直接显示类似`Intel(R) Core(TM)2 Duo CPU L9400 @ 1.86GHz`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-05-13T11:03:52.343

如果您特别想要 CPU 信息，请使用 cpuid（在 C __asm cpuid 中）指令。它提供了 CPU 的所有可能信息，包括其系列、型号、公司、内核数量等。主要所有 API 都使用此指令来检索 CPU 信息。您可以在 Web 上获取有关 CPUID 的详细信息，包括示例代码和教程。

# c# - 从 xml 文件中获取标题列表

> ID：853801
> 
> 赞同：0
> 
> 时间：2009-05-12T17:03:32.513
> 
> 标签：c#, xml, linq

我正在尝试从名为“bugs”的文件夹中获取 xml 文件的标题。

我的代码：

```
 public virtual List<IBug> FillBugs()
    {
        string folder = xmlStorageLocation + "bugs" + Path.DirectorySeparatorChar;

        List<IBug> bugs = new List<IBug>();

        foreach (string file in Directory.GetFiles(folder, "*.xml", SearchOption.TopDirectoryOnly))
        {
            var q = from b in bugs
                    select new IBug
                    {
                        Title = b.Title,
                        Id = b.Id,
                    };

            return q.ToList();
        }

        return bugs;
    } 
```

但是我没有从文件夹“bugs”中的所有 xml 文件中获取标题。

* * *

最大的问题是让eatch文件单串而不是串[]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T17:08:11.270

您编写的代码没有任何意义。也许你的意思更像这样：

```
public virtual List<IBug> FillBugs()
{
    // is this actually correct or did you mix up the concatenation order?
    // either way, I suggest Path.Combine() instead

    string folder = xmlStorageLocation + "bugs" + Path.DirectorySeparatorChar;

    List<IBug> bugs = new List<IBug>();

    foreach (string file in Directory.GetFiles(folder, "*.xml",
        SearchOption.TopDirectoryOnly))
    {
        // i guess IBug is not actually an interface even though it starts 
        // with "I" since you made one in your code

        bugs.Add(new IBug {
            Title = file, Id = 0 /* don't know where you get an ID */ });
    }

    return bugs;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T17:06:57.577

“from b in bugs”从一个空列表中选择。您需要在 foreach 循环开始时从文件中初始化错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T17:05:23.507

您是否需要在 xmlStorageLocation 和“错误”之间添加反斜杠 (Path.DirectorySeparatorChar)？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T17:09:02.753

您不会`file`在任何地方使用循环 - 这是正确的还是您错过了将其推送到集合中？

# javascript - jQuery / Javascript 替换 在与 %20 的锚链接中

> ID：853804
> 
> 赞同：9
> 
> 时间：2009-05-12T17:04:08.720
> 
> 标签：javascript, jquery, html, replace

我是 jQuery 新手，我正在尝试编写一些代码来浏览页面并重写锚链接 href 属性，以便删除空格并用 %20 替换。

到目前为止，我有：

```
$(".row a").each(function(){
  $(this).attr("href").replace(/\s/g,"%20");
}); 
```

我已经尝试了一些变体，但没有运气。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-12T17:19:15.060

您最好使用本机 javascript[`encodeURI`](http://www.w3schools.com/jsref/jsref_encodeURI.asp)函数。

```
$(".row a").each(function(){
  $(this).attr( 'href', encodeURI( $(this).attr("href") ) );
}); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-05-12T17:07:27.340

您的方法是正确的，但是一旦替换它，您就会忘记设置新值。试试这个：

```
$(".row a").each( function() {
   this.href = this.href.replace(/\s/g,"%20");
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-12T17:08:10.507

您必须设置属性值 ( [`attr(key, value)`](http://docs.jquery.com/Attributes/attr))，在您的代码中您只是读取它的值：

```
$(".row a").each(function(){
  $(this).attr('href', $(this).attr("href").replace(/\s/g,"%20"));
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-07-09T10:14:01.113

@Naresh是的，有一种方法，请参见以下示例：

编码后解码 URI：

* * *

```
<script type="text/javascript">

var uri="my test.asp?name=ståle&car=saab";
document.write(encodeURI(uri)+ "<br />");
document.write(decodeURI(uri));

</script> 
```

* * *

上面代码的输出将是：

* * *

```
my%20test.asp?name=st%C3%A5le&car=saab
my test.asp?name=ståle&car=saab 
```

* * *

欲了解更多详情，请访问[此处](http://www.w3schools.com/jsref/jsref_decodeURI.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-07-01T09:45:07.850

您可以像这样替换`""`：

```
$(document).ready(function () {
    $("#content a").each(function (){
        $(this).attr('href', $(this).attr("href").replace("%20",""));
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-06-15T02:13:18.653

我知道这已经很晚了，但我发现这种`unescape()`方法也很有效......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-03T17:52:44.743

在 ES2021 中使用 replaceAll()

```
 $(".row a").each( function() {
        this.href = this.href.replaceAll('',"%20");
    }); 
```

# c++ - 在 Windows 上使用 C++ 锁定文件

> ID：853805
> 
> 赞同：6
> 
> 时间：2009-05-12T17:04:28.173
> 
> 标签：c++, windows, file

我有一个从文件写入/读取的程序，我想为我的应用程序的其他实例锁定文件。我该怎么做（在 C++ Visual Studio 2003 中）？我尝试使用 _locking() 但我自己在尝试读/写时也无法访问文件（在同一实例中）。我知道 LockFile() 有一个选项，但不知道如何正确设置它。请帮我。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-12T17:10:02.737

您可以简单地使用 Win32 API [CreateFile](http://msdn.microsoft.com/en-us/library/aa363858(VS.85).aspx)，然后指定不共享权限。这将确保没有其他进程可以访问该文件。

dwShareMode DWORD 指定您想要的共享类型，例如 GENERIC_READ。如果您指定 0，则表示不应授予任何共享权限。

例子：

```
HANDLE hFile = CreateFile(_T("c:\\file.txt"), GENERIC_READ, 0, NULL, OPEN_EXISTING, 0, NULL); 
```

* * *

如果您只想锁定文件的某个部分，您可以使用[LockFile](http://msdn.microsoft.com/en-us/library/aa365202(VS.85).aspx)或[LockFileEx](http://msdn.microsoft.com/en-us/library/aa365203(VS.85).aspx)。

例子：

```
 //Lock the first 1024 bytes
 BOOL bLocked = LockFile(hFile, 0, 0, 1024, 0); 
```

* * *

[如需锁定其他平台，请参阅我的帖子](https://stackoverflow.com/questions/575328/fcntl-lockf-which-is-better-to-use-for-file-locking/575349#575349)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T17:12:16.193

您需要 LockFileEx() （独占文件锁定）。查看Secure Programming Cookbook for C and C++ 中的[讨论](http://books.google.com/books?id=aL3P3eJdiREC&pg=PA59&lpg=PA59&dq=c%2B%2B+file+lock+windows&source=bl&ots=SRnwwluNIn&sig=LnWMJOo-RWUKuErSuKiNTL87nls&hl=en&ei=_awJSputOJ_wswOQzo3XCA&sa=X&oi=book_result&ct=result&resnum=8#PPA59,M1)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T08:21:40.243

在网上搜索了一段时间，我没有找到任何好的例子。

这是对 CreateFile 的两次调用，目的是在进程的生命周期内锁定文件......我将它与 CLimitSingleInstance 一起使用，该[CLimitSingleInstance](http://support.microsoft.com/kb/243953)将 CreateMutex 用于全局命名互斥锁。

对 CreateFile 的第一次调用尝试打开它，第二次调用会在必要时创建它。我有更彻底的实施。我在 Qt 中实现了它，因此 qCritical() 而不是 std::cout 和 QDir::tempPath() 而不是其他方式。

```
class SingleInstance
{
protected:
    DWORD  m_dwLastError;
    HANDLE m_hFile;
public:
    SingleInstance(const char *strMutexName) {  }

    bool attemptToLockTempFile()
    {
      QString lockFile = QDir::tempPath() + "/My.exe.lock";
      m_hFile = CreateFileA(lockFile.toLocal8Bit().data(), GENERIC_READ, 0, 
                                NULL, OPEN_EXISTING, 0, NULL);
      DWORD dwLastError = GetLastError();
      if(m_hFile != NULL && m_hFile != INVALID_HANDLE_VALUE)
      {
          return true;
      }
      else
      {
          if(dwLastError == ERROR_FILE_NOT_FOUND )
          {
              m_hFile = CreateFileA(lockFile.toLocal8Bit().data(), GENERIC_READ, 
                                        0, NULL, CREATE_NEW, 0, NULL);
              dwLastError = GetLastError();

              if(m_hFile != NULL && m_hFile != INVALID_HANDLE_VALUE)
              {
                  return true;
              }
              else if(dwLastError == ERROR_SHARING_VIOLATION)
              {
                  qCritical() << "Sharing Violation on My.exe.lock";
              }
              else
              {
                  qCritical() << "Error reading" << "My.exe.lock" << "-" << dwLastError;
              }
          }
          else if(dwLastError == ERROR_SHARING_VIOLATION)
          {
              qCritical() << "Sharing Violation on My.exe.lock";
          }
          else
          {
              qCritical() << "Unable to obtain file lock -" << dwLastError;
          }
          return false;
      }
    }

    ~SingleInstance()
    {
        if ( m_hFile != NULL && m_hFile != INVALID_HANDLE_VALUE)
        {
            ::CloseHandle(m_hFile); //Do as late as possible.
            m_hFile = NULL;
        }
    }
} 
```

这是您的主要功能顶部的内容：

```
SingleInstance g_SingleInstanceObj(globalId_QA);

// Makes sure that the program doesn't run if there is another 
// instance already running
if (g_SingleInstanceObj.IsAnotherInstanceRunning())
{
    return 0;
} 
```

# java - 带有更改检测的 Java Web 应用程序文件加载器

> ID：853807
> 
> 赞同：-1
> 
> 时间：2009-05-12T17:05:00.497
> 
> 标签：java, web-applications, frameworks

是否有任何工具/框架可用于从 Java Web 应用程序中加载和自动重新加载任意文件？

（我想避免自己写——我知道怎么写）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2009-05-12T17:48:58.803

我知道[JCAPS](http://www.sun.com/software/javaenterprisesystem/javacaps/index.jsp)在其文件 JCD 中具有此功能。

# php - 如何使用 PHP 创建随机字符串？

> ID：853813
> 
> 赞同：57
> 
> 时间：2009-05-12T17:06:35.750
> 
> 标签：php, string, random

我知道 PHP 中的 rand 函数会生成随机整数，但是生成随机字符串的最佳方法是什么，例如：

**原始字符串，9 个字符**

```
$string = 'abcdefghi'; 
```

**示例随机字符串限制为 6 个字符**

```
$string = 'ibfeca'; 
```

更新：我发现了大量这些类型的函数，基本上我试图理解每个步骤背后的逻辑。

更新：该函数应根据需要生成任意数量的字符。

如果您回复，请评论部分。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2009-05-12T17:19:11.957

如果要允许字符重复出现，可以使用此函数：

```
function randString($length, $charset='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789')
{
    $str = '';
    $count = strlen($charset);
    while ($length--) {
        $str .= $charset[mt_rand(0, $count-1)];
    }
    return $str;
} 
```

基本算法是生成 < *length > 乘以 0 到 <**字符数*> - 1之间的随机数，我们将其用作索引来从我们的集合中选择一个字符并将这些字符连接起来。0 和 <*字符数*> - 1 边界表示`$charset`字符串的边界，因为第一个字符用 寻址，`$charset[0]`最后一个字符用 寻址`$charset[count($charset) - 1]`。

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2009-05-12T17:26:09.620

好吧，您没有澄清我在评论中提出的所有问题，但我假设您想要一个函数，该函数可以返回一串“可能”字符和一段字符串。为清楚起见，按照要求进行了彻底的评论，使用了比我通常更多的变量：

```
function get_random_string($valid_chars, $length)
{
    // start with an empty random string
    $random_string = "";

    // count the number of chars in the valid chars string so we know how many choices we have
    $num_valid_chars = strlen($valid_chars);

    // repeat the steps until we've created a string of the right length
    for ($i = 0; $i < $length; $i++)
    {
        // pick a random number from 1 up to the number of valid chars
        $random_pick = mt_rand(1, $num_valid_chars);

        // take the random character out of the string of valid chars
        // subtract 1 from $random_pick because strings are indexed starting at 0, and we started picking at 1
        $random_char = $valid_chars[$random_pick-1];

        // add the randomly-chosen char onto the end of our string so far
        $random_string .= $random_char;
    }

    // return our finished random string
    return $random_string;
} 
```

要使用您的示例数据调用此函数，您可以这样称呼它：

```
$original_string = 'abcdefghi';
$random_string = get_random_string($original_string, 6); 
```

请注意，此函数不检查传递给它的有效字符的唯一性。例如，如果您使用有效的 chars 字符串调用它，`'AAAB'`则为每个字母选择 A 作为 B 的可能性会高出三倍。这可能被视为错误或功能，具体取决于您的需要。

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2012-06-21T14:36:32.257

我的最爱：

```
 echo substr(md5(rand()), 0, 7); 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2015-04-21T21:47:47.190

所以，让我先说**USE A LIBRARY**。许多存在：

*   [随机兼容](https://github.com/ircmaxell/random_compat)
*   [随机库](https://github.com/ircmaxell/randomlib)
*   [安全多工具](https://github.com/padraic/SecurityMultiTool)

问题的核心是该页面中的几乎每个答案都容易受到攻击。`mt_rand()`, `rand()`,`lcg_value()`并且`uniqid()`都[容易受到攻击](http://phpsecurity.readthedocs.org/en/latest/Insufficient-Entropy-For-Random-Values.html#attacking-php-s-random-number-generators)。

一个好的系统会`/dev/urandom`从文件系统中使用，或者`mcrypt_create_iv()`(with `MCRYPT_DEV_URANDOM`) or `openssl_pseudo_random_bytes()`. 以上所有内容都可以。PHP 7[将带有两个新函数](https://wiki.php.net/rfc/easy_userland_csprng) `random_bytes($len)`，`random_int($min, $max)`它们也很安全。

请注意，这些函数中的大多数（除了`random_int()`）返回“原始字符串”，这意味着它们可以包含来自`0 - 255`. 如果你想要一个可打印的字符串，我建议通过`base64_encode()`.

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2009-05-12T17:12:49.250

```
function generate_random_string($name_length = 8) {
    $alpha_numeric = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
    return substr(str_shuffle(str_repeat($alpha_numeric, $name_length)), 0, $name_length);
} 
```

根据[mzhang](https://stackoverflow.com/users/873865/mzhang)在下面的评论中的好建议更新了代码。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-08-11T13:53:16.037

**@taskamiski 出色答案的更好和更新版本：**

更好的版本，使用`mt_rand()`而不是`rand()`：

```
echo md5(mt_rand()); // 32 char string = 128bit 
```

更好的是，对于更长的字符串，使用`hash()`允许选择散列算法的函数：

```
echo hash('sha256', mt_rand()); // 64 char string
echo hash('sha512', mt_rand()); // 128 char string 
```

如果您想将结果缩减为 50 个字符，请执行以下操作：

```
echo substr(hash('sha256', mt_rand()), 0, 50); // 50 char string 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-05-12T17:22:25.990

最后加入字符应该比重复的字符串连接更有效。

编辑#1：添加了避免字符重复的选项。

编辑#2：如果选择了 $norepeat 并且 $len 大于要从中选择的字符集，则抛出异常以避免进入无限循环。

编辑＃3：使用数组键在选择$ norepeat时存储挑选的随机字符，因为关联数组密钥查找比线性搜索数组更快。

```
function rand_str($len, $norepeat = true)
{
    $chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    $max = strlen($chars) - 1;

    if ($norepeat && len > $max + 1) {
        throw new Exception("Non repetitive random string can't be longer than charset");
    }

    $rand_chars = array();

    while ($len) {
        $picked = $chars[mt_rand(0, $max)];

        if ($norepeat) {
            if (!array_key_exists($picked, $rand_chars)) {
                $rand_chars[$picked] = true;
                $len--;
            }
        }
        else {
            $rand_chars[] = $picked;
            $len--;
        }
    }

    return implode('', $norepeat ? array_keys($rand_chars) : $rand_chars);   
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-10-19T06:04:32.343

这将生成随机字符串

```
function generateRandomString($length=10) {
    $original_string = array_merge(range(0,9), range('a','z'), range('A', 'Z'));
    $original_string = implode("", $original_string);
    return substr(str_shuffle($original_string), 0, $length);
}
echo generateRandomString(6); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-03-30T04:03:08.523

这方面的大部分内容已经讨论过了，但我建议稍微更新一下：如果您将此用于零售用途，我会避免使用域 ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789

而是使用： ABCDEFGHJKMNPQRSTUVWXY3456789

当然，你最终得到的字符要少得多，但它节省了很多麻烦，因为客户不能将 0 误认为 O，或将 1 误认为 l 或 2 误认为 Z。此外，你可以对输入进行 UPPER，然后客户可以输入大写或小写字母——这有时也会令人困惑，因为它们看起来很相似。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-08-20T07:44:16.307

我想我也会在这里添加我的贡献。

```
function random_string($length) {
    $bytes_1 = openssl_random_pseudo_bytes($length);
    $hex_1 = bin2hex($bytes_1);
    $random_numbers = substr(sha1(rand()), 0, $length);
    $bytes_2 = openssl_random_pseudo_bytes($length);
    $hex_2 = bin2hex($bytes_2);
    $combined_chars = $hex_1 . $random_numbers . $hex_2;
    $chars_crypted = hash('sha512', $combined_chars);

    return $chars_crypted;
} 
```

谢谢

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-09-30T16:08:23.653

你需要一个随机字符串做什么？

这将用于远程类似于密码的任何东西吗？

如果你的随机字符串需要*任何*安全属性，你应该使用 PHP 7 的`random_int()`函数而不是这个线程中所有不安全的`mt_rand()`答案。

```
/**
 * Generate a random string
 * 
 * @link https://paragonie.com/b/JvICXzh_jhLyt4y3
 *
 * @param int $length - How long should our random string be?
 * @param string $charset - A string of all possible characters to choose from
 * @return string
 */
function random_str($length = 32, $charset = 'abcdefghijklmnopqrstuvwxyz')
{
    // Type checks:
    if (!is_numeric($length)) {
        throw new InvalidArgumentException(
            'random_str - Argument 1 - expected an integer'
        );
    }
    if (!is_string($charset)) {
        throw new InvalidArgumentException(
            'random_str - Argument 2 - expected a string'
        );
    }

    if ($length < 1) {
        // Just return an empty string. Any value < 1 is meaningless.
        return '';
    }
    // This is the maximum index for all of the characters in the string $charset
    $charset_max = strlen($charset) - 1;
    if ($charset_max < 1) {
        // Avoid letting users do: random_str($int, 'a'); -> 'aaaaa...'
        throw new LogicException(
            'random_str - Argument 2 - expected a string at least 2 characters long'
        );
    }
    // Now that we have good data, this is the meat of our function:
    $random_str = '';
    for ($i = 0; $i < $length; ++$i) {
        $r = random_int(0, $charset_max);
        $random_str .= $charset[$r];
    }
    return $random_str;
} 
```

如果您还没有使用 PHP 7（可能是这种情况，因为在撰写本文时它还没有发布），那么您需要[paragonie/random_compat](https://github.com/paragonie/random_compat)`random_bytes()`，它是`random_int()`PHP 5 项目的用户态实现。

**对于安全上下文，请*始终*使用`random_int()`, not `rand()`,`mt_rand()`等。**请参阅[ircmaxell 的答案](https://stackoverflow.com/a/29783745/2224584)。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-11-23T05:43:40.217

[建立在https://stackoverflow.com/a/853898/533426](https://stackoverflow.com/a/853898/533426)之上

但使用 php 7 加密安全随机函数和小写和大写字母

```
function random($length = 8){
            $valid_chars ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

            // start with an empty random string
            $random_string = "";

            // count the number of chars in the valid chars string so we know how many choices we have
            $num_valid_chars = strlen($valid_chars);

            // repeat the steps until we've created a string of the right length
            for ($i = 0; $i < $length; $i++)
            {
                // pick a random number from 1 up to the number of valid chars
                $random_pick = random_int(1, $num_valid_chars);

                // take the random character out of the string of valid chars
                // subtract 1 from $random_pick because strings are indexed starting at 0, and we started picking at 1
                $random_char = $valid_chars[$random_pick-1];

                // add the randomly-chosen char onto the end of our string so far
                $random_string .= $random_char;
            }

            // return our finished random string
            return $random_string;
    }

//example output XjdXHakZ, yBG8hpZG, L6jg4FpK 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-01-17T20:51:51.493

```
// @author http://codeascraft.etsy.com/2012/07/19/better-random-numbers-in-php-using-devurandom/                                                
function devurandom_rand($min = 0, $max = 0x7FFFFFFF)
{
    $diff = $max - $min;
    if ($diff < 0 || $diff > 0x7FFFFFFF) {
        throw new RuntimeException('Bad range');
    }
    $bytes = mcrypt_create_iv(4, MCRYPT_DEV_URANDOM);
    if ($bytes === false || strlen($bytes) != 4) {
        throw new RuntimeException('Unable to get 4 bytes');
    }
    $ary = unpack('Nint', $bytes);
    $val = $ary['int'] & 0x7FFFFFFF; // 32-bit safe                           
    $fp = (float) $val / 2147483647.0; // convert to [0,1]                          
    return round($fp * $diff) + $min;
}

function build_token($length = 60, $characters_map = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789') {
    $map_length = mb_strlen($characters_map)-1;
    $token = '';
    while ($length--) {
        $token .= mb_substr($characters_map, devurandom_rand(0,$map_length),1);
    }
    return $token;
} 
```

这仅适用于 PHP 编译的 UNIX 环境`mcrypt`。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-12T17:15:44.427

您想通过原始字母的随机排列来创建密码吗？它应该只包含独特的字符吗？

用于`rand`按索引选择随机字母。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-03-10T08:48:48.940

这是一个老问题，但我想尝试发布我的解决方案......我总是使用这个函数来生成自定义随机字母数字字符串......

```
<?php
  function random_alphanumeric($length) {
    $chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ12345689';
    $my_string = '';
    for ($i = 0; $i < $length; $i++) {
      $pos = mt_rand(0, strlen($chars) -1);
      $my_string .= substr($chars, $pos, 1);
    }
    return $my_string;
  }
  $test = random_alphanumeric(50); // 50 characters
  echo $test;
?> 
```

测试：UFOruSSTCPIqxTRIIMTRkqjOGidcVlhYaS9gtwttxglheVugFM

如果您需要两个或更多独特的字符串，您可以使用此技巧...

```
$string_1 = random_alphanumeric(50);
$string_2 = random_alphanumeric(50);
while ($string_1 == $string_2) {
  $string_1 = random_alphanumeric(50);
  $string_2 = random_alphanumeric(50);
  if ($string_1 != $string_2) {
     break;
  }
}
echo $string_1;
echo "<br>\n";
echo $string_2; 
```

$string_1: tMYicqLCHEvENwYbMUUVGTfkROxKIekEB2YXx5FHyVByp3mlJO

$string_2: XdMNJYpMlFRKFDlF6GhVn6jsBVNQ1BCCevj8yK2niFOgpDI2MU

我希望这会有所帮助。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-05-21T13:58:47.907

```
echo substr(bin2hex(random_bytes(14)), 0, $length); 
```

此代码获取一个随机字节，将其从二进制转换为十六进制，然后获取此十六进制字符串的子字符串，只要您放入 $length 变量

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-09-16T22:49:04.857

试试这个

够简单！

```
function RandomFromCharset($charset,$length) 
{

$characters = $charset; // your existing charset / defined string
    $charactersLength = strlen($characters);
    $random_from_charset = '';
    for ($i = 0; $i < $length; $i++) 
    {
        $random_from_charset.= $characters[rand(0, $charactersLength - 1)];
    }

return random_from_charset;
} 
```

调用函数如下

```
RandomFromCharset($charset,$length); 
```

其中**$length**将是您想要生成的随机字符串的长度（这也可以在函数 as 中预定义`RandomFromCharset(charset,$length=10)`），而**$charset**将是您想要限制字符的现有字符串。

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2009-05-12T18:01:37.143

您可以创建一个字符数组，然后使用 rand() 从数组中选择一个字母并将其添加到字符串中。

```
$letters = array( [0] => 'a' [1] => 'b' [2] => 'c' [3] => 'd' ... [25] = 'z');

$lengthOfString = 10;
$str = '';

while( $lengthOfString-- )
{
   $str .= $letters[rand(0,25)];
}
echo $str; 
```

*请注意，这确实允许重复字符

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2012-04-26T23:40:38.567

这建立在[Gumbo 解决方案](https://stackoverflow.com/a/853870/404699)的基础上，添加了列出要在基本字符集中跳过的字符集的功能。随机字符串选择`$base_charset`不出现在 中的字符`$skip_charset`。

```
/* Make a random string of length using characters from $charset, excluding $skip_chars.
 * @param length (integer) length of return value
 * @param skip_chars (string) characters to be excluded from $charset
 * @param charset (string) characters of posibilities for characters in return val
 * @return (string) random string of length $length    */
function rand_string(
        $length, 
        $skip_charset = '', 
        $base_charset='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'){
  $skip_len = strlen($skip_charset);
  for ($i = 0; $i<$skip_len; $i++){
    $base_charset = str_replace($skip_charset[$i], '', $base_charset);
  }
  cvar_dump($base_charset, '$base_charset after replace');
  $str = '';
  $count = strlen($base_charset);
  while ($length--) {
    $str .= $base_charset[mt_rand(0, $count - 1)];
  }
  return $str;
} 
```

以下是一些使用示例。前两个示例使用 的默认值`$base_charset`。最后一个示例明确定义`$base_charset`.

```
echo rand_string(15, 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz');
//  470620078953298
echo rand_string(8, 'abcdefghijklmnopqrstuvwxyz0123456789');
//  UKLIHOTFSUZMFPU
echo rand_string(15, 'def', 'abcdef');
//  cbcbbccbabccaba 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2013-02-04T21:05:46.077

好吧，我一直在寻找解决方案，并且我使用了 @Chad Birch 的解决方案与 @Gumbo 的解决方案合并。这就是我想出的：

```
function get_random_string($length, $valid_chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456790!·$%&/()=?¿¡',.-;:+*`+´ç")
{
    $random_string = "";
    $num_valid_chars = strlen($valid_chars);
    for ($i = 0; $i < $length; $i++, $random_string .= $valid_chars[mt_rand(1, $num_valid_chars)-1]);
    return $random_string;
} 
```

我认为评论几乎没有必要，因为我用来建立这个答案的答案已经被彻底评论过。干杯!

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2015-02-04T11:45:45.703

如果您不关心时间、内存或 cpu 效率，并且您的系统可以处理它，为什么不试试这个算法呢？！

```
function randStr($len, $charset = 'abcdABCD0123') {
    $out = '';
    $str = array();

    for ($i = 0; $i < PHP_INT_MAX; $i++) {
        $str[$i] = $charset;

        shuffle($str);
        $charset .= implode($charset, $str);
        $charset = str_shuffle($charset);
    }

    $str = array_flip($str);
    $str = array_keys($str);

    for ($i = 0; $i < PHP_INT_MAX; $i++) {
        shuffle($str);
    }

    $str = implode('', $str);

    for ($i = 0; $i < strlen($str); $i++) {
        $index = mt_rand(1, strlen($str));
        $out .= $str[$index - 1];
    }

    for ($i = 0; $i < PHP_INT_MAX; $i++) {
        $out = str_shuffle($out);
    }

    return substr($out, 0, $len);
} 
```

如果它使用递归，也许这会更好读，但我不确定 PHP 是否使用尾递归......

# wpf - 枚举 ListBoxItem 的子元素

> ID：853816
> 
> 赞同：2
> 
> 时间：2009-05-12T17:07:21.007
> 
> 标签：wpf, datatemplate, listboxitem

实际的视觉效果由 DataTemplate 决定。在运行时，如何遍历 ListBoxItem 的所有可视元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T17:12:08.177

假设您引用`ListBoxItem`了列表中的其中一个，您可以使用[VisualTreeHelper](http://msdn.microsoft.com/en-us/library/system.windows.media.visualtreehelper.aspx)类来枚举它的可视化树。

否则，如果您有对 中显示的项目之一的引用`ListBox`，请尝试调用[ItemContainerGenerator.ContainerFromItem()](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemcontainergenerator.containerfromitem.aspx)关闭`ListBox`（请注意，必须显示该项目才能使其工作，因为`ListBox`通常只保留在内存中可见的项目）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T17:14:29.593

撇开你需要这样做的原因....

我认为您需要[VisualTreeHelper](http://msdn.microsoft.com/en-us/library/system.windows.media.visualtreehelper.aspx)类。

# objective-c - 我的应用程序如何检测到另一个应用程序窗口的更改？

> ID：853833
> 
> 赞同：17
> 
> 时间：2009-05-12T17:10:25.777
> 
> 标签：objective-c, cocoa, macos

在 Mac 上的 Cocoa 中，我想检测属于另一个应用程序的窗口何时被移动、调整大小或重新绘制。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2009-05-12T17:38:09.430

您需要使用位于 ApplicationServices 框架内的可访问性 API，它们是纯 C 语言。例如：

首先创建一个应用程序对象：

```
AXUIElementRef app = AXUIElementCreateApplication( targetApplicationProcessID ); 
```

然后你从这里得到窗口。您可以请求窗口列表并枚举，或者您可以获得最前面的窗口（在 AXAttributeConstants.h 中查找您将使用的所有属性名称）。

```
AXUIElementRef frontWindow = NULL;
AXError err = AXUIElementCopyAttributeValue( app, kAXMainWindowAttribute, &frontWindow );
if ( err != kAXErrorSuccess )
    // it failed -- maybe no main window (yet) 
```

现在，当此窗口的属性发生更改时，您可以通过 C 回调函数请求通知。这是一个四步过程：

首先你需要一个回调函数来接收通知：

```
void MyAXObserverCallback( AXObserverRef observer, AXUIElementRef element,
                           CFStringRef notificationName, void * contextData )
{
    // handle the notification appropriately
    // when using ObjC, your contextData might be an object, therefore you can do:
    SomeObject * obj = (SomeObject *) contextData;
    // now do something with obj
} 
```

接下来，您需要一个 AXObserverRef，它管理回调例程。这需要您在上面创建“app”元素时使用的相同进程 ID：

```
AXObserverRef observer = NULL;
AXError err = AXObserverCreate( applicationProcessID, MyObserverCallback, &observer );
if ( err != kAXErrorSuccess )
    // handle the error 
```

得到你的观察者后，下一步是请求通知某些事情。有关完整列表，请参阅 AXNotificationConstants.h，但对于窗口更改，您可能只需要以下两个：

```
AXObserverAddNotification( observer, frontWindow, kAXMovedNotification, self );
AXObserverAddNotification( observer, frontWindow, kAXResizedNotification, self ); 
```

请注意，最后一个参数将假定的“self”对象作为 contextData 传递。这不会被保留，所以`AXObserverRemoveNotification`当这个对象消失时调用是很重要的。

获得观察者并添加通知请求后，您现在希望将观察者附加到您的运行循环，以便您可以以异步方式（或实际上）发送这些通知：

```
CFRunLoopAddSource( [[NSRunLoop currentRunLoop] getCFRunLoop],
                    AXObserverGetRunLoopSource(observer),
                    kCFRunLoopDefaultMode ); 
```

`AXUIElementRef`s 是 CoreFoundation 风格的对象，所以你需要用`CFRelease()`它来干净地处理它们。例如，为了清洁，您将`CFRelease(app)`在获得 frontWindow 元素后使用，因为您将不再需要该应用程序。

关于 Garbage-Collection 的注释：要将 AXUIElementRef 保留为成员变量，请像这样声明它：

```
__strong AXUIElementRef frontWindow; 
```

这指示垃圾收集器跟踪对它的引用。分配它时，为了与 GC 和非 GC 兼容，请使用以下命令：

```
frontWindow = (AXUIElementRef) CFMakeCollectable( CFRetain(theElement) ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T17:36:06.187

进一步研究出现了“石英显示服务”

我需要的有趣功能是 CGRegisterScreenRefreshCallback。

# blackberry - 黑莓技术规范

> ID：853834
> 
> 赞同：2
> 
> 时间：2009-05-12T17:10:36.137
> 
> 标签：blackberry, signal-processing

我在查找 BlackBerry 技术规格时遇到问题，而且他们的网站一团糟。他们也没有我可以用来轻松联系他们的号码。

这不完全是一个编码问题，但 BlackBerry 音频 API 是什么样的，我在哪里可以获得有关音频的技术规范？具体来说，我试图通过 3.5 毫米插孔上的麦克风输入来了解有关音频输入的更多信息。

不幸的是，在继续之前，我需要知道诸如采样率、数据宽度等之类的东西。

指向正确资源的方向，或者如果您知道自己的头顶，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T21:55:31.537

我完全同意，黑莓网站是个迷宫！

[您可以在此处](http://www.blackberry.com/developers/docs/4.3.0api/)找到 API 。

我不确定 BlackBerry 的音频方面，但请查看[BlackBerry 支持论坛](http://supportforums.blackberry.com/rim/board?board.id=java_dev)，因为那里有一些为 RIM 工作的人。

[这个帖子](http://supportforums.blackberry.com/rim/board/message?board.id=java_dev&message.id=32304)怎么样？

对不起，我帮不了更多。

# apache-flex - 如何在使用 AddChild 构建的 TextInput 上设置焦点属性？

> ID：853835
> 
> 赞同：0
> 
> 时间：2009-05-12T17:11:00.970
> 
> 标签：apache-flex, flex3, mxml

我有以下 MXML：

```
<mx:State name="myState">
    <mx:AddChild relativeTo="{myhbox}" position="after">
        <mx:Box verticalAlign="middle" horizontalAlign="center" width="100%" height="100%">
            <mx:Form id="myForm" width="479" verticalScrollPolicy="off" horizontalScrollPolicy="off">
                <mx:FormItem label="My Label:" fontWeight="bold" id="myLabel" direction="vertical">
                    <mx:TextInput id="myTextInput" width="282" />
                        <mx:HBox>
                            <mx:Button label="Go" click="go();" id="goButton" />
                        </mx:HBox>
                </mx:FormItem>
            </mx:Form>
        </mx:Box>
    </mx:AddChild>
</mx:State> 
```

如何使用 <mx:SetProperty/> 将焦点设置在 TextInput 字段上？我尝试了以下方法，但它只会导致该字段被突出显示——光标不会出现在 TextInput 中：

```
<mx:SetProperty target="{stage}" name="focus" value="{myTextInput}"/> 
```

长话短说，我希望光标出现在该字段中。

**更新**：我想通了。请参阅评论以获取解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T20:18:26.343

我尽量避免使用 AddChild 状态标签。通常最好将所有这些都放在一个组件中，并在您希望它显示时使用 SetProperty 设置可见和 includeInLayout。

您始终可以覆盖自定义组件中的可见性以将焦点设置到该字段。或者创建一个自定义设置器而不是做同样的事情

```
public function set show(value:Boolean):void
{
  visible = true;
  includeInLayout = true;
  if (value)
  myFunctionThatSetsTheFocus();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-05-07T21:30:54.070

将“creationComplete”添加到 TextInput 并让它调用一个在 TextInput 上设置焦点的方法

# asp.net - ASP.NET 中的静态变量

> ID：853837
> 
> 赞同：3
> 
> 时间：2009-05-12T17:11:40.237
> 
> 标签：asp.net

有[一篇文章](http://support.microsoft.com/kb/312607#4)建议将 ASP.NET 应用程序状态存储在*HttpApplication*类的静态成员中（在 Global.asax.cs 中）。

**将应用程序状态存储在其他类**的静态成员中怎么样？

我尝试这样做，似乎可以存在这些变量的多个实例（每个 AppDomain 一个实例？）。是真的吗？我们应该总是只使用*Application*类的静态字段吗？还是没关系？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T17:13:43.167

它工作得很好，并且比`Application`在许多情况下要好（例如，它是强类型的）。只要确保您了解线程和锁定问题。

作为个人经验，我设法`static`在几个网站的一个类中缓存了 ASP.NET 应用程序的配置信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T17:20:36.680

如果您所做的不仅仅是在 Web 应用程序中读取静态变量，那么您可能会遇到静态变量的大问题。Asp.net 是一个多线程环境。应用程序集合在 Get 或 Set 期间为您锁定。如果您使用静态变量，则没有锁定到位。

我建议使用 web.config 将所有只读变量存储在它自己的部分中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T17:16:15.423

> 是真的吗？我们应该总是只使用 Application 类的静态字段吗？

是的。用户特定的数据（会话数据）不应该放在这里。

您站点的所有用户都在同一个应用程序实例中，因此将共享相同的静态变量。例如，它绝对不是会话的好替代品。

# text - 如何从 Sphinx 结果中返回特定字段？

> ID：853842
> 
> 赞同：2
> 
> 时间：2009-05-12T17:12:22.777
> 
> 标签：text, indexing, sphinx

假设我正在索引一张书籍表。他们有标题，作者，描述等。

我想在所有字段中进行搜索并返回包含我的搜索词的书籍的标题。我可以进行搜索并从 Sphinx 返回 book_id (doc_id)，这样我就可以自己查找它们，但如果 Sphinx 只给我标题，这样我就不必再访问数据库了，这真是太棒了。我可以让 Sphinx 向我返回不同的属性，但是让我无法获得文本字段。

这可能吗？如果是这样，你怎么做？

[更新] 今天发现这个：[http ://www.sphinxsearch.com/faq.html#row-storage](http://www.sphinxsearch.com/faq.html#row-storage)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T10:06:26.240

有一些技巧。[正如我之前](https://stackoverflow.com/a/11984803/1057209)回答的那样，您可以将想要获取的这些列添加到**attr**条目中，然后您可以从 sphinx 的结果中选择值。

可能对你有帮助:D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:01:23.810

如果文本字段中有少量数据，则可以使用 Sphinx 字符串属性。

```
sql_attr_string 
```

但是，它有一些限制，例如：

> 字符串属性可以存储附加到每个文档的任意字符串。每个值有 4 MB 的固定大小限制。此外，searchd 当前会将所有值缓存在 RAM 中，这是一个额外的隐式限制。

因此，在其中存储大量数据并不是一个好主意，因为所有属性都存储在 RAM 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T20:50:36.213

讨厌这么快就扼杀这个想法，但这是不可能的。Sphinx 不返回有关字段值的任何信息，甚至不返回与查询匹配的字段。

再详细一点……Sphinx 通常会将*所有*属性值加载到内存中，这可能就是为什么可以为每个结果返回它们的原因。可能是字段以不可逆编码存储，因此无法转换回正常值？不过，这是在黑暗中刺伤。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-11-23T21:17:03.170

在这方面已经取得了一些进展。现在，如果您使用[SphinxSE](http://www.sphinxsearch.com/docs/current.html#sphinxse)，您可以将您搜索的 SphinxSE 表加入到生成索引的表中，并以这种方式获取您的标题。

# perl - 在 Perl 中将分组的十六进制字符转换为位串

> ID：853845
> 
> 赞同：4
> 
> 时间：2009-05-12T17:12:48.080
> 
> 标签：perl, endianness, pack, bitstring

我有一些 256 个十六进制字符的字符串，它们代表一系列位标志，我正在尝试将它们转换回位字符串，以便我可以使用`&`、`|`等来操作它们`vec`。十六进制字符串被写入整数范围的大端组，这样一组 8 个字节`"76543210"`应该转换为 bitstring `"\x10\x32\x54\x76"`，即最低 8 位是`00001000`。

问题是`pack`''`h`格式一次只处理一个字节的输入，而不是 8 个字节，因此直接使用它的结果不会按正确的顺序排列。目前我正在这样做：

```
my $bits = pack("h*", join("", map { scalar reverse $_ } unpack("(A8)*", $hex))); 
```

这有效，但感觉很hackish。好像应该有更干净的方法，但我的`pack`-fu不是很强。有没有更好的方法来做这个翻译？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-12T18:15:03.283

```
my $hex = "7654321076543210";  # can be as long as needed
my $bits = pack("V*", unpack("N*", pack("H*", $hex)));
print unpack("H*", $bits);  #: 1032547610325476 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T18:05:10.010

使用[hex](http://perldoc.perl.org/functions/hex.html)函数将十六进制字符串转换为 Perl 的数字内部表示，进行按位运算，然后使用[sprintf](http://perldoc.perl.org/functions/sprintf.html)将其转换回十六进制字符串：

```
#!/usr/bin/perl

use strict;
use warnings;

my $hex = "76543210";
my $num = hex $hex;

$num &= 0xFFFF00FF; # Turn off the third byte

my $new_hex = sprintf("%08x", $num);

print "It was $hex and is now $new_hex.\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T19:59:01.913

考虑使用出色的[Bit::Vector](http://search.cpan.org/perldoc?Bit::Vector)。

# .net - 动态枚举.Net中属性的值

> ID：853848
> 
> 赞同：1
> 
> 时间：2009-05-12T17:13:04.353
> 
> 标签：.net, enumeration, propertygrid

您知道 TreeView 控件的 ImageList 属性如何列出窗体上的所有 ImageList 吗？我需要类似的东西，但有一个字符串列表。它类似于枚举，但在运行时定义，对象在 PropertyGrid 中公开属性。

因此，对于像 { "foo", "bar", "grill" } 这样的字符串列表，该属性应该列出这些，但是如果该字符串列表被更改（例如，添加一个“bbq”项），该属性应该枚举 { "foo", "bar", "grill", *"bbq"* } 代替。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T17:29:34.857

如果它只是您需要的字符串列表，请查看编写您自己的[`TypeConverter`](http://msdn.microsoft.com/en-us/library/system.componentmodel.typeconverter.aspx). 您需要覆盖该`GetStandardValues`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T17:26:48.480

CodeProject 上的这篇[文章](http://www.codeproject.com/KB/cpp/dropdownproperties.aspx)解释了如何编写自定义[`TypeConverter`](http://msdn.microsoft.com/en-us/library/system.componentmodel.typeconverter.aspx)或[`UITypeEditor`](http://msdn.microsoft.com/en-us/library/system.drawing.design.uitypeeditor.aspx).

# c# - 如果选择子节点，则在父节点上添加 CSS 类

> ID：853860
> 
> 赞同：0
> 
> 时间：2009-05-12T17:16:30.697
> 
> 标签：c#, asp.net, xml

我有一个从 XML 文档创建无序列表的递归方法。为了检查我定位在哪个节点上，我使用查询字符串来匹配 XML 文档中的 URL。

如果我位于其子节点上，我需要在父节点上添加“当前”类。

像这样：

```
    菜单项 1
    MenuItem 2 [当前类别]
         MenuItem 3 [class current]（选定节点）
    菜单项 4

```

我的 XML 文档是这样的：

```
<MenuItem Name="MenuItem 1" Url="MenuItem1.aspx"/>
<MenuItem Name="MenuItem 2" Url="MenuItem2.aspx">
    <MenuItem Name="MenuItem 3" Url="MenuItem3.aspx" />
</MenuItem>
<MenuItem Name="MenuItem4" Url="MenuItem4.asp" /> 
```

我当前的代码如下所示：

```
foreach (XmlNode item in menuitems)
{
    if (HttpContext.Current.Request.Url.AbsolutePath.ToLower() == item.Attributes["Url"].Value.ToLower())
    {
        writer.AddAttribute(HtmlTextWriterAttribute.Class, "current");
    }
    writer.RenderBeginTag(HtmlTextWriterTag.Li);
    // And so on...
} 
```

所以我需要某种函数来找到这个节点并在那个节点上放置一个类。

如果您需要更多代码、信息或其他任何东西 - 请说出来！:-)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T19:17:48.940

这不是一个特别优雅的解决方案，但如果我正确理解了问题，您可以创建一个方法来检查是否选择了子节点：

```
private static bool IsChildSelected(XmlNode item)
{
    foreach(XmlNode child in item.ChildNodes)
    {
        if(HttpContext.Current.Request.Url.AbsolutePath.ToLower() == child.Attributes["Url"].Value.ToLower())
        {
            return true;
        }
    }
    return false;
} 
```

并在遍历节点时检查它：

```
foreach(XmlNode item in menuitems)
{
    if(HttpContext.Current.Request.Url.AbsolutePath.ToLower() == item.Attributes["Url"].Value.ToLower()
        || IsChildSelected(item))
    {
        writer.AddAttribute(HtmlTextWriterAttribute.Class, "current");
    }
    writer.RenderBeginTag(HtmlTextWriterTag.Li);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T19:26:23.497

我尝试创建一个小型单元测试来展示我的想法。基本上你得到了当前选择的节点，然后你递归地遍历它的父节点。

```
private bool IsParentOf(XmlNode parentNode, XmlNode node)
    {
        if (node.ParentNode == null) return false;
        return node.ParentNode == parentNode || IsParentOf(parentNode, node.ParentNode);
    }
    [TestMethod]
    public void TestMethod1()
    {
        string xml =
                @"
            <MenuItem Name=""MenuItem 1"" Url=""MenuItem1.aspx""/>
            <MenuItem Name=""MenuItem 2"" Url=""MenuItem2.aspx"">
                <MenuItem Name=""MenuItem 3"" Url=""MenuItem3.aspx"" />
            </MenuItem>
            <MenuItem Name=""MenuItem4"" Url=""MenuItem4.asp"" />";
        string url = "MenuItem3.aspx";

        XmlDocument doc = new XmlDocument();
        doc.LoadXml("<MenuItems>" + xml + "</MenuItems>");
        var xPathFormat = "//MenuItem[@Url='{0}']";
        var currentNode = doc.SelectSingleNode(string.Format(xPathFormat, url));

        var menuItem1 = doc.SelectSingleNode(string.Format(xPathFormat, "MenuItem1.aspx"));
        Assert.IsFalse(IsParentOf(menuItem1, currentNode));

        var menuItem2 = doc.SelectSingleNode(string.Format(xPathFormat, "MenuItem2.aspx"));
        Assert.IsTrue(IsParentOf(menuItem2, currentNode));

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T19:58:22.693

感谢您的回答。但我解决了我自己的问题。你们的努力得到了支持。

这是我的解决方案：

```
System.Collections.Hashtable ht = new System.Collections.Hashtable();
ht.Add("Url", HttpContext.Current.Request.Url.AbsolutePath.ToLower());

XmlNode currentpage = Core.FindChildNode(item, "MenuItem", ht);

if (HttpContext.Current.Request.RawUrl.ToLower() == item.Attributes["Url"].Value.ToLower() || currentpage != null)
{
     writer.AddAttribute(HtmlTextWriterAttribute.Class, "current");
} 
```

这是我的 FindChildNode 方法

```
public static XmlNode FindChildNode(XmlNode parent, string name, System.Collections.Hashtable keyvaluecollection)
    {
        if (parent.NodeType != XmlNodeType.Element) return null;
        XmlElement el = (XmlElement)parent;

        XmlNodeList nodes = el.GetElementsByTagName(name);
        foreach (XmlNode node in nodes)
        {
            if (node.NodeType == XmlNodeType.Element)
            {
                bool found = false;
                foreach (string key in keyvaluecollection.Keys)
                {
                    if (node.Attributes[key] != null && node.Attributes[key].Value == (string)keyvaluecollection[key])
                    {
                        found = true;
                    }
                    else
                    {
                        found = false;
                        break;
                    }
                }
                if (found) return node;
            }
        }
        return null;
    } 
```

似乎像魅力一样工作！:-)

# security - 如何防止用户在 Team Explorer 中看到整个团队项目列表？

> ID：853861
> 
> 赞同：2
> 
> 时间：2009-05-12T17:16:44.627
> 
> 标签：security, configuration, tfs

我有一个用户可以访问我办公室团队基础服务器上的一个项目。当他们查看源代码控制时，他们只能看到该单个项目的源代码（这是正确的）。我遇到的问题是，当他们将项目添加到团队资源管理器时，他们会从服务器获取整个项目列表。有没有办法阻止用户看到整个项目列表？我已经尝试向用户授予尽可能少的访问权限，但他们仍然可以看到整个项目列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-06T23:09:13.813

默认情况下，Valid Users 组中的每个人都获得了对整个服务器的 GENERIC_READ 权限。您需要从服务器级别删除用户的 GENERIC_READ 权限，并且仅在项目级别授予它。

与版本控制权限不同，服务器范围和项目范围的权限由 TfsSecurity.exe 实用程序设置：http: [//msdn.microsoft.com/en-us/library/ms252504.aspx](http://msdn.microsoft.com/en-us/library/ms252504.aspx) 您也可以从团队资源管理器执行此操作，但具体步骤我忘了。

# jquery - 使用选择器在表格单元格中查找 div

> ID：853867
> 
> 赞同：0
> 
> 时间：2009-05-12T17:18:02.987
> 
> 标签：jquery, image, selector

如果可能的话，我需要一点帮助，因为我找不到带有选择器的图像的源属性

我之前已经使用`$(this).children('someclass')`过，我试图定位的那个在同一个表格单元格中，旁边是另一个`div`

```
$(".reg_info_body").hide();
$(".reg_info").toggle(function(){
    $(this).children(".reg_info_body").slideDown(100);

    var $bb = $(this).parent().next(".img_uitklapbaar").attr("src");
    alert("source img: " + $bb); // for testing

    }, function(){
        $(this).children(".reg_info_body").slideUp(300);
    }
); 
```

```
<tr class="reg_rij">
  <td width="20%"><div class="reg_form_label">Voornaam:</div></td>
  <td width="12%" class="reg_info" > <input type="text" class="reg_invoer" name="voornaam" 
    size="20" maxlength="20" value="<?php if (isset($trimmed['voornaam'])) echo $trimmed['voornaam']; ?>" /></td>
  <td width="4%" class="reg_info">?*</td>
  <td width="64%" class="reg_info"><div class="reg_info_body"><h4>? -: Voornaam [verplicht]</h4><p>
    Vul hier uw voornaam in</p></div>
    <div align="right"><img  class="img_uitklapbaar" src="../images/expand_icon.gif" width="16" height="16" /></div></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-12T18:49:01.090

也许，我也稍微改了一下，但并不完全准确

```
var $bb = $(this).parent().find(".img_uitklapbaar").attr("src"); 
```

我将暂时保留我之前的发现，[请参阅示例](http://www.woonbel.nl/registraties/registratie.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T22:14:26.903

您还可以查看[兄弟姐妹](http://docs.jquery.com/Traversing/siblings#expr)方法。也可能对你有用。

# apache-flex - mx:文本在 mx:List 内换行

> ID：853868
> 
> 赞同：0
> 
> 时间：2009-05-12T17:18:44.343
> 
> 标签：apache-flex, flex3

我有一个 mx:Text 标记，其中包含一些我想在列表中显示的文本。代码如下。

```
<mx:List id="projectList"
        width="100%"
        height="100%"
                         dataProvider="{project.projectRequirements}"
                         borderThickness="0">
                    <mx:itemRenderer>
                        <mx:Component>
                            <mx:HBox height="100%"
                                     minHeight="20"
                                     paddingBottom="0"
                                     paddingLeft="0"
                                     paddingRight="0"
                                     paddingTop="0"
                                     width="100%"
                                     horizontalScrollPolicy="off"
                                     verticalScrollPolicy="off">
                                <mx:Text width="100%"
                                         fontSize="12"
                                         text="{data.requirement.requirementText}"/>
                            </mx:HBox>
                        </mx:Component>
                    </mx:itemRenderer>
                </mx:List> 
```

如果我手动将 mx:HBox 的高度设置为我知道允许多行的高度，那么文本将换行。我真的希望列表中的每个组件可以是不同的高度，由文本量决定。有些文本是 1 行，有些是 4 或 5 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T20:25:13.027

List 有一个 variableRowHeight 属性，默认设置为 false。将其设置为 true，然后确保您的渲染器没有指定高度（因此改为测量）。

您不需要将组件包装在 HBox 中，它可以直接扩展 Text。

# c# - 如何删除 MenuStrip 子菜单边距？

> ID：853873
> 
> 赞同：18
> 
> 时间：2009-05-12T17:19:32.593
> 
> 标签：c#, menustrip

您知道如何删除 MenuStri 中子菜单的边距（可能是左右图像和复选框的边距）吗？在[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms229638.aspx)中，解释了如何从上下文菜单中删除它。据说我应该在 MenuStrip 中以相同的方式执行此操作，但 MenuStrip 没有 ShowImageMargin 或 ShowCheckMargin。也许我错过了一些东西。你能帮我吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-12-07T15:32:35.437

非常相似，但不是使用“ContextMenuStrip”（在您的[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms229638.aspx)中使用），您必须使用“ **ToolStripDropDownMenu** ”。这边走：

```
((ToolStripDropDownMenu)noMargins.DropDown).ShowImageMargin = false; 
```

例如，如果您想从名为“menuStrip1”的菜单栏中删除所有图像边距，请将以下代码添加到表单初始化例程中：

```
// Removing image margins (space for icons on left) from menubar items:
foreach (ToolStripMenuItem menuItem in menuStrip1.Items)
    ((ToolStripDropDownMenu)menuItem.DropDown).ShowImageMargin = false; 
```

# encryption - 手卷密钥共享

> ID：853876
> 
> 赞同：0
> 
> 时间：2009-05-12T17:20:52.967
> 
> 标签：encryption

**取景信息**

> 我正在旅行，无法访问我的纸质文件，也没有可用的电话设置，也无法轻松访问打印机或传真机。是的，我可以找个网吧，把东西打印出来再传真。但我希望找到一个更简单但仍然安全的解决方案，它只依赖于我有网络连接，而另一端的人没有密码学复杂。当然，在其他情况下，传真或邮寄东西会更容易。
> 
> 是的，我知道有问题的文件不是很有趣。是的，我知道我可能是中间人，我的抵押贷款人发来的电子邮件原则上可能被欺骗了。我并没有尝试发布新的密钥签名算法。只是想弄清楚我可以以 MacGuyver 式的精神制作的最佳、简单的临时解决方案是什么。

**问题**

我想将文件安全地发送给我的抵押贷款人以申请再融资。普通人不知道公共厕所的公钥加密。该怎么办？

我做了什么？

在我控制的网络服务器上为他创建一个帐户。在 https 目录中，虽然这可能是矫枉过正。通过电子邮件向他发送 url 和如何生成密码的说明（结合这个词和你的电话号码之类的东西）。他去那个位置并检索作为第二个密码的文件。他给我发电子邮件说他已经获得并复制了密码。我登录到网络服务器，检查访问日志，除了我和他之外，没有人访问过密码文件。然后我删除该文件，为他的帐户分配其中包含的密码，然后重新启动 Apache。然后我将文档 scp 到一个新的 url，由我知道只有他和我见过的新密码保护。除非我被 rootkitted 并且有人更改了我的日志，但在这种情况下，我会以很多不同的方式搞砸。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-12T17:24:44.130

我会在他的办公室停下来并放下文件...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-12T17:48:26.043

以下是最合乎逻辑的简单选项：

1.  传真它。
2.  把它放在他的办公室。
3.  通过记录交付快递。

如果软件确实是您想要追求的选择，在这种情况下似乎并没有真正有用，并且比必要的复杂得多，那么最简单的解决方案可能是最好的：

1.  设置一个具有身份验证的 HTTPS 服务器，通过电子邮件将地址和用户名从不同的电子邮件帐户发送到不同的电子邮件帐户，给他打电话并给他密码，让他登录到您的 HTTPS 服务器并通过 SSL 下载文档。这使服务器地址、用户名和密码保持独立，这意味着有人必须花费相当长的时间才能获取所有三部分信息。所以除非你试图挫败中央情报局或国家安全局……我认为可以肯定地说，他们并不太关心你的抵押贷款申请，你会没事的。

如果*我*是抵押贷款的人，而你想让我付出所有这些努力只是为了从你那里拿到一份文件，我可能会告诉你，你已经离开了你的摇杆，然后传真或带来它，或者我会下次我在您所在的地区时，请拿起它。

您*可以*做的是将其打印出来，撕碎，然后将每三个条带放在一个密封袋中，并用不同的快递员进行编号，以便在另一端轻松重建。如果他丢失了任何位，他可以通过电子邮件告诉您他丢失了哪些位，您可以撕碎另一个副本并使用单独的快递发送丢失的位。

不用说，我认为你过度设计了一个不必要的解决方案......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-12T17:26:02.133

我有点困惑。我猜抵押贷款的人也是。

你为什么不直接给他打电话，给他一个密码？

或者，既然您了解 PKI，为什么不获取证书，给他发送一封签名的 S/MIME 电子邮件，并要求他将带有他选择的密码的加密消息发回给您？大多数邮件客户端都支持开箱即用的 S/MIME，这很容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T17:29:54.560

我不太明白你的问题是什么。

> 普通人不知道公共厕所的公钥加密。该怎么办？

您想在没有公钥密码学或 Diffie-Hellman 等高等数学技术的情况下进行安全的密钥交换吗？

只需告诉他密码/与他会面或使用加密电子邮件（例如 enigmail）

# email - 为您的时事通讯实施退订链接的最佳方式是什么？

> ID：853877
> 
> 赞同：11
> 
> 时间：2009-05-12T17:20:54.573
> 
> 标签：email, newsletter, unsubscribe

我在想我创建了一个停用代码，将其与他们的用户 ID 一起放在取消订阅链接中。然后，当我的时事通讯的收件人单击该链接时，我可以查看他们的用户 ID 并查看停用代码是否匹配。

这听起来像是最好的方法吗？

还有哪些方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T21:04:32.557

从最终用户的角度来看，单击取消订阅非常棒。

但是，使用 hash(id + secret) 是不安全的，因为聪明的攻击者可以非常快速地“暴力破解”秘密，然后通过简单地增加 ID 来取消订阅数据库中的每个用户。

在服务器上保持“半机密”ID 并在取消订阅时使用电子邮件地址查找用户会更加安全。这样，成功的取消订阅需要将电子邮件地址与正确的 ID 配对。您可以通过为每个用户保存一个真正的密钥并使用它而不是 ID 来使这一点更加安全。如果发布了电子邮件 + ID 对，这尤其必要。

因此，例如，您的取消订阅链接将如下所示：

```
http://mydomain.com/unsubscribe?email={$email}&hash={$hash} 
```

在 PHP 中生成 $hash 的服务器端函数如下所示：

```
<?php
function unsubscribeHash($id, $email) {
    $hashSecret = 'Fz!Fx~36N66>io3B-vlPDshdRxos8JjCd4+Ld-s2^ca{19Q/5u';
    return sha1($id . $email . $hashSecret);
}
?> 
```

然后，要完成退订，您将通过电子邮件查找用户，并验证

`$_GET['hash'] == unsubscribeHash($user_id, $_GET['email'])`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-12T17:27:09.307

您可以只使用散列算法来保护用户 ID（这样没有人可以使用讨厌的循环注销您的所有数据库）。

你最终会得到两个参数：userID 和 hash。

优点是您不需要存储停用代码和用户 ID 之间的任何映射。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-12T17:22:38.503

从用户的角度来看，不要求用户输入电子邮件地址来取消订阅。将所有信息嵌入链接（如您所描述的）的方法要好得多。

# vb6 - In 如何验证我的 .Manifest 文件是否有效？

> ID：853888
> 
> 赞同：0
> 
> 时间：2009-05-12T17:23:41.370
> 
> 标签：vb6, manifest, regfreecom

我正在将 VB6 应用程序转换为使用 Manifest 进行 Reg Free 部署。

我使用 Make My Manifest 创建了一个清单，但是当我运行应用程序时出现错误（如下）。

我想确保我的清单不是无效的。（我打开它，除了一些不可打印的字符外，它看起来还不错，这对于 XML 格式的文件来说似乎很奇怪。

**---------------------------- C:\Bungalow\tutor\tutor.exe

## 此应用程序无法启动，因为应用程序配置不正确。重新安装应用程序可能会解决此问题。

好的**

摘自包含不可打印字符的清单

```
<file name="THREED32.OCX">
    <typelib tlbid="{0BA686C6-F7D3-101A-993E-0000C0EF6F5E}" version="1.0" flags="control" helpdir="" />
    <comClass clsid="{0BA686AA-F7D3-101A-993E-0000C0EF6F5E}" tlbid="{0BA686C6-F7D3-101A-993E-0000C0EF6F5E}" progid="Threed.SSCheck" description="A three-dimensional check box.               ***\ 1     ª8! DOCUME~1  D   ï¾1×°¬:÷   D o c u m e n t s   a n d   S e t t i n g s   ***   " /> 
```

我删除了所有不可打印的字符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T20:55:26.283

如果您使用的是 Vista/Server08，请在运行应用程序之前从提升的提示符中使用 sxstrace.exe 命令行工具；它可能会为您提供更多信息。

此外，查看 Windows 事件日志，那里报告了清单解析失败。

我还建议在这个问题中添加“regfreecom”标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T21:45:40.663

[这是 MSDN文章中](http://msdn.microsoft.com/en-us/library/ms973913.aspx)有关无注册 COM的[故障排除](http://msdn.microsoft.com/en-us/library/ms973913.aspx#rfacomwalk_topic10)部分的摘录。正如 Eugene 的回答，它建议查看 Windows Server 中的事件日志（也许使用[Virtual PC](http://www.microsoft.com/windows/virtual-pc/default.aspx)？）。

> 首先让...您的客户使用已注册的服务器；然后注销服务器并验证您的错误消息是否符合您的预期；最后......制作和部署清单文件。这样，您的故障排除工作......将仅限于清单文件的结构（以及如果您选择这样做，则正确嵌入程序集清单）。
> 
> 在解决免注册 COM 问题时，**Windows Server 2003 上的事件查看器**是您的好朋友……在系统事件日志中查找来自 COM 服务器的事件。我不建议您查看 Windows XP 事件日志……它总是包含一条消息……这无助于识别问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T23:10:59.807

我不知道这是否是您的问题，但如果您将清单包含在 res 文件中，我相信它的大小必须完全可被 4 个字节整除（不要问我为什么）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-06T23:07:47.973

您可能想要检查您是否没有链接到使用不同版本的 Visual Studio 编译的库中。（假设您正在使用该库）

在我将应用程序从 VS2005 移动到 VS2008 之后，我遇到了与此非常相似的问题......同样的错误消息...... 错误是因为它链接在一个单独的解决方案中构建的库中，我没有移动到 VS2008。发布版本运行良好，但调试版本遇到此错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-20T20:52:08.967

从 0.6.7 版开始，Make My Manifest 可以更好地处理“奇数”字符和符号的转义。此版本与 0.6.6 相比只有少量更改，因此更新不会给大多数人带来任何问题。

新版本也应该更好地处理大的 COM 接口版本号。这应该有助于难以管理接口二进制兼容性（或忽略兼容性）的程序员。

# jsp - jsp分页问题

> ID：853890
> 
> 赞同：1
> 
> 时间：2009-05-12T17:23:55.210
> 
> 标签：jsp

我正在使用 redy 制作的分页标签。B 但它给了我一个空指针异常的错误。第一页显示正确。但是当我单击下一步时，它会给出错误

```
<%@ taglib uri="http://jsptags.com/tags/navigation/pager" prefix="pg" %>
<%

 Iterator i = null;
 Set <Tutorials> tutorials = (Set <Tutorials> ) request.getAttribute("tut_lst");
 request.setAttribute("tut_lst",tutorials);

  i =  tutorials.iterator();  // error occurs here

%>

 <pg:pager>
      <pg:param name="keywords"/>
<%

       while(i.hasNext())
       {
           Tutorials t = (Tutorials)i.next();

 %>
          <pg:item>

            <BR> <a href ="down?tid=<%out.println(t.getUploadid() );%> ">        <%out.println(t.getFilename()); %> </a></td>

        </pg:item>
<%

          }

%>

 <pg:index>

    <pg:first>
      <a href="<%= pageUrl %>">[ (<%= pageNumber %>) |&lt; Previous ]</a>
    </pg:first>

    <pg:prev>
      <a href="<%= pageUrl %>">[ (<%= pageNumber %>) &lt;&lt; Previous ]</a>
    </pg:prev>

    <pg:pages>
       <a href="<%= pageUrl %>"><%= pageNumber %></a>
    </pg:pages>

    <pg:next>
      <a href="<%= pageUrl %>">[ Next &gt;&gt; (<%= pageNumber %>) ]</a>
    </pg:next>

    <pg:last>
      <a href="<%= pageUrl %>">[ Last &gt;| (<%= pageNumber %>) ]</a>
    </pg:last>

  </pg:index>
</pg:pager> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T17:32:37.410

看起来新请求没有获得 tut_lst 属性。

你得到一个空指针异常吗？

编辑：通常在会话范围内设置一个属性。你有理由不想这样做吗？

# iphone - 如何在 iPhone 上的 Objective C 中显示按 GPS 位置排序的下拉信息

> ID：853893
> 
> 赞同：2
> 
> 时间：2009-05-12T17:24:36.657
> 
> 标签：iphone

有没有一种简单的方法可以通过“最接近当前位置”在 iPhone 上显示排序的下拉列表？

即，如果我有一个带有 GPS 位置的城市列表，我可以快速对下拉列表进行排序，以按离你最近的顺序显示城市选择吗？

这会很快吗？还是我必须在后台进行预排序（在您选择下拉菜单之前）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T18:14:26.890

您可以使用 sortedArrayUsing... 消息之一对数组进行排序到您的位置数组。

假设您的每个位置都使用 CLLocation 表示，您可以使用 CLLocation 的 'getDistanceFrom:' 并将当前位置作为参数作为排序的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T17:50:22.107

如果可以的话，似乎您想在后台执行此操作。毕竟，大多数时候，它的顺序是一样的（除非城市真的很近，而且你经常旅行，我想）。

如果您确实需要在显示时对它们进行排序，您可能可以立即对几千个点进行排序。对于许多应用程序，将纬度和经度视为直角坐标可能就足够了。计算实际距离并不难，但它的计算量将是排序的许多倍。

哦，如果你在 NSArray 中有数据点，请查看 sortedArrayUsingSelector: 和 sortedArrayUsingFunction:context:

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T18:13:23.053

取决于您在数据库中拥有的城市数量。如果它很多，那么您可能需要使用预修剪技术来限制搜索范围，例如使用预先计算的“区域”或将搜索限制为“大小 X 或更大的城市”等。由于城市不会移动人口和规模不会突然改变，想想如何尽可能多地进行预先计算。

另一种常见的技术是有一个单独的“附近”表格，其中包含从一个城市到附近城市的距离。所以你所要做的就是找到一个离你当前位置最近的城市，然后只显示离那个城市最近的*城市*。

另一个值得效仿的技巧是 UITableView，它按需提取信息，因此在任何给定时间，只需要计算可见单元格的数量。因此，与其获取附近每个城市的数据，不如尝试将视图限制在第一个屏幕上可见的 5-6 范围内，如果您允许滚动，则在用户上下导航时获取其余部分。

在相关说明中，这里是计算地理点之间距离的公式列表：[http ://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

# c# - 实现一个通过 SSL 使用 WebServices 的 C# 客户端？

> ID：853896
> 
> 赞同：14
> 
> 时间：2009-05-12T17:25:43.863
> 
> 标签：c#, visual-studio, web-services, ssl, console-application

因此，我已将 ServiceReference 添加到 C# 控制台应用程序中，该应用程序调用从 Oracle 公开的 Web 服务。

我已经完成了所有设置，当它不使用 SSL (http) 时它就像桃子一样工作。我现在正在尝试使用 SSL 进行设置，但在将其添加到服务引用（甚至是 Web 引用）时遇到了问题。例如，当我尝试将其添加到 Visual Studio 中时，服务公开的 URL (https) 没有返回适当的 Web 方法。

> 底层连接已关闭：发送时发生意外错误。从传输流接收到意外的 EOF 或 0 字节。元数据包含无法解析的引用：“ [https://srs204.mywebsite.ca:7776/SomeDirectory/MyWebService?WSDL](https://srs204.mywebsite.ca:7776/SomeDirectory/MyWebService?WSDL) ”

我遇到的另一个难题是关于证书管理和部署。我有大约 1000 个外部客户端站点需要使用这个小实用程序，并且他们需要在适当的证书存储中安装证书才能连接到 Web 服务。不确定处理此问题的最佳方法。他们需要在根存储中吗？

我在网上花了好几个小时查看各种选项，但在任何地方都找不到一个好的干净答案。

总而言之，我在这里有几个问题：

1) 有人有一些关于在 Visual Studio 中设置使用 SSL 的 Web 服务的好链接吗？

2) 我应该如何注册证书？它应该存在于哪个商店？我可以只使用 CertMgr 之类的东西来注册它吗？

必须有一本好书/教程/任何可以向我展示设置此类内容的常见良好实践的东西。我只是似乎找不到它！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-05-22T13:20:03.307

嗯，我已经想通了。我花了比我想谈论的时间更长的时间，但我想分享我的解决方案，因为看到标准是我的一个巨大的烦恼。“哦，我修好了！谢谢！” 让每个人都关注实际发生的事情的帖子。

所以。

根本问题是，默认情况下，Visual Studio 2008 使用 TLS 进行 SSL 握手，而我尝试连接的基于 Oracle/Java 的 Web 服务使用的是 SSL3。

在 Visual Studio 2008 中使用“添加服务引用...”时，您[无法指定](http://social.msdn.microsoft.com/Forums/en-US/asmxandxml/thread/37c376a3-f50c-4b57-a1df-83dc43fcddbf)服务点管理器的安全协议应为 SSL3。

除非。

您获取一个静态 WSDL 文档并[使用 wsdl.exe 生成一个代理类](http://gsraj.tripod.com/dotnet/webservices/webservice_csharp_client.html)。

```
wsdl /l:CS /protocol:SOAP /namespace:MyNamespace MyWebService.wsdl 
```

然后您可以使用[C Sharp 编译器](http://msdn.microsoft.com/en-us/library/1700bbwd(VS.80).aspx)将该代理类转换为库 (.dll) 并将其添加到您的 .Net 项目“参考”中。

```
csc /t:library /r:System.Web.Services.dll /r:System.Xml.dll MyWebService.cs 
```

此时，您还需要确保在“参考”中也包含 System.Web.Services。

现在您应该能够调用您的 Web 服务，而不会在代码中出现问题。为了使它**工作**，您需要在实例化服务之前添加一行神奇的代码。

```
// We're using SSL here and not TLS. Without this line, nothing workie.
ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3; 
```

好的，所以我对自己印象深刻，因为我的开发箱上的测试很棒。然后我部署到另一个客户端盒子，由于权限/权限问题它不会再次连接。对我来说，这闻起来像证书（不管它们闻起来像什么）。为了解决这个问题，我[使用 certmgr.exe](http://msdn.microsoft.com/en-us/library/aa388161(VS.85).aspx)将站点的证书注册到本地计算机上的受信任根。

```
certmgr -add -c "c:\someDir\yourCert.cer" -s -r localMachine root 
```

这使我可以将证书分发到我们的客户站点并为用户自动安装它。对于像这样的自动证书注册，我仍然不确定不同版本的 Windows 将如何“安全友好”，但到目前为止它工作得很好。

希望这个答案可以帮助一些人。也感谢吹镖在这方面的所有帮助并提供了一些见解。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T13:26:09.207

听起来 Web 服务正在使用自签名证书。坦率地说，这不是最好的方法。

假设您是一个大型组织并且它是内部的，您可以设置自己的受信任的证书颁发机构，这对于[Active Directory](http://www.microsoft.com/windowsserver2003/technologies/pki/default.mspx)尤其容易。托管 Oracle 服务的服务器可以从该 CA 请求证书，您可以使用 AD 策略通过将内部 CA 的根证书放置在机器存储的受信任根中来信任它。这将消除手动信任或接受 Web 服务上的证书的需要。

如果客户端机器是外部的，那么您将不得不让公开服务的人从 Verisign、Thawte、GeoTrust 等知名 CA 之一购买“真实”证书，或者作为安装包的一部分公共证书并将其安装到每台机器上机器级别的受信任的根证书颁发机构中。这有问题，例如无法撤销证书，但会删除提示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-29T18:26:07.300

垫，

我也有这样的问题，我有办法避免使用 certmgr.exe 将证书添加到远程计算机上的受信任根。

```
X509Store store;
store = new X509Store("ROOT", StoreLocation.LocalMachine);
store.Open(OpenFlags.ReadWrite);
store.Add(certificate); 
```

可以像这样创建“证书对象”：

```
X509Certificate2 certificate = new X509Certificate2("Give certificate location path here"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-11-22T20:21:12.477

感谢这个伟大的提示，快速浏览了你的东西，你有很多好主意。这是我要补充的一点——我正在弄清楚 webMethods 和（惊喜！）它与您连接到的 Oracle 应用服务器（SSL3 而不是 TLS）有相同的问题。你的方法效果很好，这是我的附录。

给定静态类“Factory”，提供这两个方便的花花公子项目：

```
/// <summary>
/// Used when dispatching code from the Factory (for example, SSL3 calls)
/// </summary>
/// <param name="flag">Make this guy have values for debugging support</param>
public delegate void CodeDispatcher(ref string flag);

/// <summary>
/// Run code in SSL3 -- this is not thread safe. All connections executed while this
/// context is active are set with this flag. Need to research how to avoid this...
/// </summary>
/// <param name="flag">Debugging context on exception</param>
/// <param name="dispatcher">Dispatching code</param>
public static void DispatchInSsl3(ref string flag, CodeDispatcher dispatcher)
{
  var resetServicePoint = false;
  var origSecurityProtocol = System.Net.ServicePointManager.SecurityProtocol;
  try
  {
    System.Net.ServicePointManager.SecurityProtocol = System.Net.SecurityProtocolType.Ssl3;
    resetServicePoint = true;
    dispatcher(ref flag);
  }
  finally
  {
    if (resetServicePoint)
    {
      try { System.Net.ServicePointManager.SecurityProtocol = origSecurityProtocol; }
      catch { }
    }
  }
} 
```

然后消费这些东西（毫无疑问，你已经猜到了，但无论如何都要在这里放一个鼓）：

```
 var readings = new ArchG2.Portal.wmArchG201_Svc_fireWmdReading.wmdReading[] {
      new ArchG2.Portal.wmArchG201_Svc_fireWmdReading.wmdReading() {
        attrID = 1, created = DateTime.Now.AddDays(-1), reading = 17.34, userID = 2
      },
      new ArchG2.Portal.wmArchG201_Svc_fireWmdReading.wmdReading() {
        attrID = 2, created = DateTime.Now.AddDays(-2), reading = 99.76, userID = 3
      },
      new ArchG2.Portal.wmArchG201_Svc_fireWmdReading.wmdReading() {
        attrID = 3, created = DateTime.Now.AddDays(-5), reading = 82.17, userID = 4
      }
    };
    ArchG2.Portal.Utils.wmArchG201.Factory.DispatchInSsl3(ref flag, (ref string flag_inner) =>
    {
      // creates the binding, endpoint, etc. programatically to avoid mucking with
      // SharePoint web.config.
      var wsFireWmdReading = ArchG2.Portal.Utils.wmArchG201.Factory.Get_fireWmdReading(ref flag_inner, LH, Context);
      wsFireWmdReading.fireWmdReading(readings);
    }); 
```

这就是诀窍——当我有更多时间时，我将解决线程问题（或不解决）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-01-24T19:27:39.093

由于我没有评论的声誉，我想提一下 Mat Nadrofsky 的强制 SSL3 的答案和代码示例也是类似以下错误的解决方案

> [向https://xxxx/whatever](https://xxxx/whatever)发出 HTTP 请求时出错。这可能是由于在 HTTPS 情况下未使用 HTTP.SYS 正确配置服务器证书。这也可能是由于客户端和服务器之间的安全绑定不匹配造成的。

只需使用

```
// We're using SSL here and not TLS. Without this line, nothing workie.
ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3; 
```

正如马特所说。在 HTTPS 中使用 SAP NetWeaver PI 服务器进行了测试。谢谢！

# asp.net - 回发时有没有办法清除查询字符串参数？

> ID：853899
> 
> 赞同：11
> 
> 时间：2009-05-12T17:26:40.523
> 
> 标签：asp.net, postback, query-string, postbackurl

我有一个有时会与一些查询字符串参数相关联的表单。问题是当我回发表单时，查询字符串参数仍然存在。我设置它的方式并不是真正的问题，但我只是不喜欢它在那里，如果您需要按特定顺序检查输入，可能会看到它是一个问题。

有没有办法以一种简单、干净的方式清除该查询字符串参数？我知道我可以更改按钮上的 PostBackURL，但这似乎不太有效。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-12T17:28:21.690

不，我还没有看到没有重定向的方法来清除它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-12T19:10:31.523

我想你已经回答了你自己的问题。使用 PostBackURL 属性。

```
<asp:Button PostBackUrl='<%# Request.ServerVariables["URL"] %>' runat="server" Text="Submit" /> 
```

或者类似的东西

```
foreach (Control ctrl in Page.Controls)
{
    if (ctrl is Button)
    {
        ((Button)ctrl).PostBackUrl = Request.ServerVariables["URL"];
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-12T17:38:40.863

把它放在你的页面底部？

```
<script language="javascript" type="text/javascript">
    document.forms[0].action = window.location.pathname;
</script> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-06-02T10:08:51.000

我遇到了同样的问题。

我使用以下代码块解决了它：

```
private void ClearQueryString()
{
    PropertyInfo isreadonly = typeof(System.Collections.Specialized.NameValueCollection).GetProperty("IsReadOnly", BindingFlags.Instance | BindingFlags.NonPublic);
    isreadonly.SetValue(this.Request.QueryString, false, null);
    this.Request.QueryString.Remove("Action");
    this.Request.QueryString.Remove("param1");
    this.Request.QueryString.Remove("paramN");
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-12T17:30:36.727

在某些情况下，您可以使用该`Server.Transfer()`方法，该方法有一个重载，允许您指定是否应保留查询字符串和表单数据。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-12T20:20:51.253

我假设你不能依赖 Page.IsPostBack 出于某种原因？

如果您正在做的是服务器端，那么在您的方法（Page_Load、OnInit 等）中添加对 IsPostBack 的检查很简单，并且仅在它不是回发（即初始请求）时才处理查询字符串。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2010-01-20T15:22:46.157

我刚刚遇到了同样的问题，在网上搜索了一番后，我发现了这个片段：

```
public void ClearQueryStrings()
{
    string clientCommand = string.Format(
      "document.forms[\"{0}\"].action = \"{1}\";",
         this.Form.Name, Request.Url.Segments[Request.Url.Segments.Length - 1]);

    ClientScript.RegisterStartupScript(this.GetType(), "qr", clientCommand, true);
} 
```

处理完原始查询字符串参数后，我在 Page_Load 中调用 ClearQueryStrings()。当页面回发时，参数就消失了。

[原始文章在这里。](http://www.nomoreasp.net/2007/10/30/clear-querystrings-in-aspnet/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-18T16:07:20.643

```
using System.Collections;
using System.Reflection; 
```

使用以下代码清除查询字符串参数。

```
// To clear Query string value
PropertyInfo isreadonly = typeof(System.Collections.Specialized.NameValueCollection).GetProperty("IsReadOnly", BindingFlags.Instance | BindingFlags.NonPublic);

// make collection editable
isreadonly.SetValue(this.Request.QueryString, false, null);

// remove
this.Request.QueryString.Remove("YourQueryStringParameter"); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-06-23T19:57:42.157

此方法不是您所说的重定向，但它肯定会删除查询字符串。只需将此行添加到 JavaScript 代码的末尾：

```
window.location.search = ""; 
```

或者

将此添加到 HTML 页面的末尾：

```
<script type="text/javascript">
    window.location.search = "";
</script> 
```

根据您插入代码的位置，擦除查询字符串的时间会发生变化。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-03-21T07:49:12.910

```
PropertyInfo isreadonly = typeof(System.Collections.Specialized.NameValueCollection).GetProperty("IsReadOnly", BindingFlags.Instance | BindingFlags.NonPublic);
    // make collection editable
isreadonly.SetValue(this.Request.QueryString, false, null);
     // remove

this.Request.QueryString.Remove("status"); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-05-17T10:27:08.583

你可以试试`Response.Redirect(Request.CurrentExecutionFilePath());` 它对我有用。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-05-25T19:30:09.813

执行 javascript 代码时，它将清除 url

```
<script language="javascript" type="text/javascript">
   var urlWithoutParams = location.protocol + "//" + location.host + location.pathname;

    function clearCurrentURL(){
        window.history.replaceState({}, document.title, urlWithoutParams);
    }
</script> 
```

# activex - ActiveX 冻结 IE

> ID：853902
> 
> 赞同：1
> 
> 时间：2009-05-12T17:26:58.260
> 
> 标签：activex

我创建了一个 activeX 控件来执行一些操作，这大约需要 1 分钟。在此操作期间，IE 完全冻结。有没有办法调用activeX控件让IE不死机？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T17:32:19.767

在任何 ActiveX 主机中都会遇到同样的问题，而不仅仅是 IE。如果您不想阻塞 UI 线程，那么您需要更改 ActiveX 控件以在辅助线程上完成其工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-02-01T08:25:58.433

我的 activeX 遇到了类似的问题，它冻结了 IE。我设法通过让我的 activeX 控件在客户端上创建新线程来解决问题。即使线程正在执行它的工作，activeX 也会返回它的完成并解除对 UI 的阻塞。

棘手的部分是知道线程何时完成。您可以通过在您的 activeX 中有一个布尔属性来发现，当线程完成时您将其设置为 true。在 javascript 中，您可以继续调用该属性，直到其设置为 true。

Javascript：

```
var myActiveXObject = new ActiveXObject("myActiveX");

function startWork()
{
    myActiveXObject.startWork();

    setTimeout(checkIsDone(), 1000);
}

function checkIsDone()
{
    if(myActiveXObject.checkIsDone())
        workComplete();
    else
        setTimeout(checkIsDone(), 1000);
} 
```

活动X：

```
private bool blnIsDone;

[ComVisible(true)]
public void startWork()
{
   blnIsDone = false;

   Thread myThread = new Thread(delegate()
   {
       ThreadedWork();
   });

   myThread.Start();
}

private ThreadedWork()
{
    //Do work

    blnIsDone = true;
}

[ComVisible(true)]
public bool checkIsDone()
{
   return blnIsDone;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T17:29:23.280

这是处理 IE 的线程问题，所以我认为没有任何方法可以做到这一点。

# javascript - 计算 Javascript 库加载时间

> ID：853908
> 
> 赞同：0
> 
> 时间：2009-05-12T17:29:20.987
> 
> 标签：javascript

我正在尝试比较几个 Javascript 库的性能。尽管测量事务时间有助于确定库的工作性能，但它并没有考虑下载和启动各个库所需的时间。我正在寻找有关确定加载时间的最佳方法的建议，而不是使用诸如 firebug 等工具。我希望能够设置一个受控环境，在该环境中，一个页面可以被加载 n 次，同时捕获开始和结束时间。是否应该将 Javascript 库内容包含在页面中而不是作为包含文件，还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T03:19:52.190

在开始之前阅读 John Resig 关于[JavaScript 基准质量](http://ejohn.org/blog/javascript-benchmark-quality/)的这篇文章可能会对您有所帮助。

之后，我建议您可以尝试从您的服务器请求 javascript，获取并计时需要多长时间`eval(responseJS);`。这样，您只需计算库加载所需的时间，而不是加上从服务器下载所需的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T17:51:45.507

这些库应该始终是一个外部文件，通过脚本标签包含在它们自己或站点的脚本中。缩小和打包的文件将具有较小的附件。通过 CDN 交付也是最佳选择，因为 CDN 会将其缓存。许多流行的框架都可以通过 Google 的 CDN 获得。

您不仅要考虑库，还要考虑使用库的应用程序。库中 JS 的质量（通常）是一流的，但是进入这些库的代码质量如何，甚至可能不是由库作者开发的插件代码。您还必须查看正在使用的浏览器。尽管我们讨厌它，但这些跨浏览器库中的大多数都针对 Internet Explorer 的最佳性能进行了优化，因为它保留了 85% 以上的市场份额。

任何库的性能确实是一种权衡。决定什么是可接受的，以便让您的应用程序执行您想做的任何事情。

# iis - IIS 服务器名称更改

> ID：853910
> 
> 赞同：1
> 
> 时间：2009-05-12T17:29:25.840
> 
> 标签：iis, iis-5

我有一个对 *.MyCompany 有效的证书。**com**。这对我的开发和测试服务器来说很好，因为这些计算机的 URL 的第一部分就是这样结束的。

我想在我的计算机上对此进行测试，但证书不正确，因为我的计算机默认为 url MyComputer.MyCompany。**净**。

有没有办法伪造 IIS 以认为我的计算机是 .MyCompany。**com**还是我在测试这个时运气不好？

谢谢， 瓦卡诺

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T17:34:39.683

您可以编辑您的主机文件并添加一个条目以将[http://you.yourcompany.com](http://you.yourcompany.com)指向您的本地 IP 或 127.0.0.1

使用文本编辑器编辑 c:\Windows\System32\drivers\etc\hosts。

保存它，您应该可以使用新的假名称访问您自己的 IIS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T17:35:37.310

您应该能够编辑 IIS 网站的主机头值以接受 *.Mycompany.com。要使 DNS 解析并正常工作，您可能需要在 Windows 主机文件中添加一个条目——mycomputer.mycompany.com 127.0.0.1。这将让您在本地进行测试。

另一种选择是使用自签名证书进行本地开发。

# c# - 如何返回集合的只读副本

> ID：853911
> 
> 赞同：13
> 
> 时间：2009-05-12T17:29:31.610
> 
> 标签：c#, collections, properties, readonly

我有一个包含集合的类。我想提供一个返回集合内容的方法或属性。如果调用类可以修改单个对象是可以的，但我不希望它们从实际集合中添加或删除对象。我一直在将所有对象复制到一个新列表中，但现在我想我可以将列表返回为 IEnumerable<>。

在下面的简化示例中，GetListC 是返回集合的只读版本的最佳方式吗？

```
public class MyClass
{
    private List<string> mylist;

    public MyClass()
    {
        mylist = new List<string>();
    }

    public void Add(string toAdd)
    {
        mylist.Add(toAdd);
    }

    //Returns the list directly 
    public List<String> GetListA 
    { 
        get
            {
            return mylist;
            }
    }

    //returns a copy of the list
    public List<String> GetListB
    {
        get
        {
            List<string> returnList = new List<string>();

            foreach (string st in this.mylist)
            {
                returnList.Add(st);
            }
            return returnList;
        }
    }

    //Returns the list as IEnumerable
    public IEnumerable<string> GetListC
    {
        get 
        {
            return this.mylist.AsEnumerable<String>();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-05-12T17:31:50.233

您可以使用[`List(T).AsReadOnly()`](http://msdn.microsoft.com/en-us/library/e78dcd75.aspx)：

```
return this.mylist.AsReadOnly() 
```

这将返回一个[`ReadOnlyCollection`](http://msdn.microsoft.com/en-us/library/ms132474.aspx).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T17:31:41.250

只需使用 ReadOnlyCollection 类，从 .NET 2.0 开始就支持它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T17:36:45.173

使用通用 ReadOnlyCollection 类 ( `Collection.AsReadOnly()`)。它不会复制任何在基础集合更改时可能会产生一些奇怪结果的对象。

```
 var foo = new List<int> { 3, 1, 2 };
        var bar = foo.AsReadOnly();

        foreach (var x in bar) Console.WriteLine(x);

        foo.Sort();

        foreach (var x in bar) Console.WriteLine(x); 
```

但是，如果您不想要副本，那是最好的解决方案。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-05-12T17:42:00.297

我更喜欢返回 IEnumerable，但您不需要强制转换。做就是了

```
public IEnumerable<string> StringList { get { return myList; } 
```

`List<string>`是一个`IEnumerable<string>`

# html - div 底部和它所在的 div 之间没有空格

> ID：853917
> 
> 赞同：1
> 
> 时间：2009-05-12T17:30:56.400
> 
> 标签：html, css, internet-explorer-6

我在一个 div 中有一个 div，在 IE6 中查看网页时，它不显示 div class="video-tour" 底部和 div class="content-body" 底部之间的间距

这是它在 IE6 中的样子：http: [//i42.tinypic.com/20zs7s7.png](http://i42.tinypic.com/20zs7s7.png)

这是在 Safari 中正确显示的样子：http: [//i44.tinypic.com/2h69de1.png](http://i44.tinypic.com/2h69de1.png)

.video-tour 的 css <-- 如您所见，有多个视频被分成不同的盒子，它们的宽度为 31%

```
.video-tour {
    float:left;
    width:31%;
    border:1px solid #fdbe2f;
    background-color:#ffc;
    text-align:center;
    padding:3px;
    overflow:auto;
    margin:6px;
}

.video-tour img {
    border:1px solid #fdbe2f;
    padding:3px;
} 
```

.video-tour 所在的 .content-body 的 CSS

```
.content-body {
    padding:10px 15px;
    font-size:.8em;
    font-family:arial;
    overflow:auto;
} 
```

关于为什么 IE6 底部没有间距和其他浏览器中的间距的任何帮助都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-12T17:35:19.573

尝试在 video-tour 之后在底部添加一个具有 clear: both 风格的 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T17:33:56.190

我相信这是因为你需要清除浮动。

你可以尝试放置一个

```
<div style="width: 100%; overflow: hidden;"><!-- floats go here --></div> 
```

围绕整个内容进行视频导览。

# javascript - 使用 j2me 开发 Web 应用程序

> ID：853924
> 
> 赞同：0
> 
> 时间：2009-05-12T17:32:05.897
> 
> 标签：javascript, web-applications, java-me

我想使用 j2me 的主要原因是它的主要优点之一是它可以通过各种 API 访问手机的资源。但是，由于较新的手机具有 Safari、Opera 和 Windows IE 等 Web 浏览器，因此构建 Web 应用程序将是有利的，这样用户就不必将某些软件下载到他们的手机上。有没有一种方法可以构建一个 Web 应用程序，该应用程序还可以获取有关手机的资源信息？或者也许已经将 j2me 转换为 Javascript（如果可能的话）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-13T11:42:29.657

The webkit engine on recent Series60 phones has been given access to at least some phone resources.

Nokai calls it Web Runtime or WRT.

[http://www.forum.nokia.com/Resources_and_Information/Documentation/](http://www.forum.nokia.com/Resources_and_Information/Documentation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T17:42:04.010

您可以创建一个发送短信的链接，但除此之外，据我所知，没有用于从浏览器访问手机内部的跨平台 API。

所以，如果你必须访问手机的资源，你就必须编写一个真正的应用程序。

# java - Set.removeAll() 下面使用哪个方法：equals 还是 compareTo？

> ID：853926
> 
> 赞同：4
> 
> 时间：2009-05-12T17:32:21.263
> 
> 标签：java, map, set

考虑代码：

```
class A {

  private int i;

  boolean equals( Object t) {
      if (this == t)
          return true;
      if (!( t instanceof A))
          return false;
      if (this.i == t.i);
  }

}

Map<String,A> orig;
Map<String,B> dup; 
```

我正在尝试这样做

```
orig.entrySet().removeAll(dup.entrySet()); 
```

我看到调用了equals方法；这总是正确的，还是可能会改为调用 compareTo？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T17:33:49.467

是的，它调用`equals()`. `compareTo()`只有在`Set` *知道*它包含`Comparable`对象时才能使用（例如，排序集可能会这样做）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-12T17:39:44.137

这取决于实施。

例如， a`HashSet`将使用`hashCode`and `equals`。A`TreeSet`可能会使用`compareTo`. 最终，只要您的类型表现得当，这无关紧要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T18:33:57.170

TreeSet 使用 compareTo，试试这个：

```
public class A {

    private int i;

    A(int i) {
        this.i = i;
    }

    @Override
    public boolean equals(Object t) {
        if (this == t)
            return true;
        if (!( t instanceof A))
            return false;
        return (this.i == ((A)t).i);
    }

    public static void main(String[] args) {
        List<A> remove = Arrays.asList(new A(123), new A(789));
        Set<A> set = new TreeSet<A>(new Comparator<A>() {
            @Override
            public int compare(A o1, A o2) {
                return o1.i - o2.i;  
                // return 0; // everything get removed
            }
        });
        set.add(new A(123));
        set.add(new A(456));
        set.add(new A(789));
        set.add(new A(999));

        set.removeAll(remove);
        for (A a : set) {
            System.out.println(a.i);
        }
        System.out.println("done");
    }
} 
```

使 Comparator 始终返回 0，所有内容都将被删除！如果不使用 Comparator 而是实现 Comparable，也会发生同样的情况。

TreeSet 基于在 getEntry 中使用 compareTo 的 TreeMap。
在 TreeSet 的 Javadoc 中，您可以（最终）阅读：

> ... Set 接口是根据 equals 操作定义的，但**TreeSet 实例使用其 compareTo**（或 compare）方法执行所有元素比较...

[]]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-08T07:50:50.840

[http://java.sun.com/j2se/1.5.0/docs/api/java/util/Collection.html](http://java.sun.com/j2se/1.5.0/docs/api/java/util/Collection.html)

“实现可以自由地实现优化，从而避免调用 equals，例如，首先比较两个元素的哈希码。”

很可能会使用 equals，但考虑到上面的陈述，您不能完全依赖 equals() 被调用。请记住，无论何时重写 equals()，重写 hashCode() 总是一个好主意。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T18:12:02.027

我看不出在哪里使用 compareTo；Map 接口的 remove() 的 javadoc 说“更正式地说，如果此映射包含从键 k 到值 v 的映射，使得 (key==null ? k==null : key.equals(k))，则该映射已移除。” 而对于 Set 接口，它类似地表示“更正式地说，如果集合包含这样的元素，则删除元素 e 使得 (o==null ? e==null : o.equals(e))。”

请注意，removeAll() 的 javadoc 没有说明它是如何操作的，这意味着，正如其他人所说，它是一个实现细节。

在 Sun 的 Java 中，根据 Bloch 在其 Effective Java 中的说法（如果我没记错的话），它会遍历集合并调用 remove()，但他强调您绝不能假设它总是这样做的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-12T17:40:51.110

一些`Set`实现依赖于`hashCode`（例如`HashSet`）。这就是为什么`hashCode`当你覆盖时你也应该总是覆盖`equals`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-12T17:43:59.310

我知道的 Java 库中唯一不会这样做的实现是[IdentityHashMap](http://java.sun.com/javase/6/docs/api/java/util/IdentityHashMap.html)。[例如， TreeMap](http://java.sun.com/javase/6/docs/api/java/util/TreeMap.html)没有合适的`Comparator`.

# c# - 泛型模型绑定和 BindAttribute

> ID：853929
> 
> 赞同：0
> 
> 时间：2009-05-12T17:32:48.453
> 
> 标签：c#, asp.net-mvc

我遇到了 asp.net mvc 中的 bind 属性的问题。我有一个看起来像这样的自定义 ViewModel：

```
public interface IUserView<TUser> where TUser : User
{
    TUser User { get; set; }
    string Email { get; set; }
    string ConfirmEmail { get; set; }
    string Password { get; set; }
    string ConfirmPassword { get; set; }
}
public class EditUserView<TUser> : IUserView<TUser> where TUser : User
{
    public virtual TUser User { get; set; }

    [ValidateRegExp(RegexConstants.Email, "Invalid Email.")]
    [ValidateNonEmpty("email is required.")]
    public virtual string Email { get; set; }

    [ValidateSameAs("Email", "confirmation email does not match.")]
    public virtual string ConfirmEmail { get; set; }

    public virtual string Password { get; set; }

    [ValidateSameAs("Password", "confirmation password does not match.")]
    public virtual string ConfirmPassword { get; set; }
} 
```

以及提交它的方法，如下所示：

```
public ActionResult SubmitProfile([Bind(Exclude="IsSystemAdmin")]EditUserView<Admin> iuserview) 
```

如果你看一下上面的方法，你会注意到带有'Exclude="IsSystemAdmin"'的绑定属性。管理模型有一个名为“IsSystemAdmin”的布尔属性，可以提升他们的权限级别。现在很明显，我不希望管理员仅仅通过发回该字段的真实值就能够使自己成为系统管理员。

我在排除属性中尝试了“IsSystemAdmin”和“User.IsSystemAdmin”，但它们都没有阻止 IsSystemAdmin 变量的更新。有没有办法让绑定属性在这种情况下工作，或者这是默认模型绑定器中的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-08T14:39:39.037

您是否尝试过在 TUser 类本身上使用 Bind 属性

```
[Bind(Exclude = "IsSysAdmin")]
public class TUser 
{

} 
```

我认为由于此属性的重要性，您永远不会希望它由模型绑定器设置，因此类上的绑定将是可以的。您很可能通过在操作上显式设置标志来将管理员增加到系统管理员。

我非常警惕直接从表单帖子绑定任何模型类。我只有通过另一个服务层才能在我的存储库层中为绑定和更新模型类提供特定的表单类。

# c# - 与实体框架的关联继承

> ID：853931
> 
> 赞同：0
> 
> 时间：2009-05-12T17:33:13.570
> 
> 标签：c#, entity-framework

例如考虑我的以下数据库模型。

*   用户表（ID，用户名）
*   TextContentTable（Id、名称、描述、CreatedByUserId、ModifiedByUserId、TextContent）
*   ImageContentTable(Id, 名称, 描述, CreatedByUserId, ModifiedByUserId, ImageContent)

我想创建以下对象模型。但它甚至可能吗？例如：

*   基本实体（ID）
*   DescriptiveEntity（名称，描述）：BaseEntity
*   TrackedEntity ( **CreatedBy** , **ModifiedBy** ) : DescriptiveEntity
*   用户（用户名）：BaseEntity
*   文本内容（文本）：TrackedEntity
*   图像内容（图像）：TrackedEntity

我希望您理解我的符号，但是是否可以将关联（以粗体标记）映射到单个表 TextContentTable 和 ImageContentTable？

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-13T12:24:01.023

我不确定这种方法对于实体框架的当前发布版本是否是一个好主意。当 TextContent 等类型从 BaseEntity 等类型继承时，它必须具有与基本类型相同的实体集。使用问题中概述的策略，您的应用程序中的所有实体都将具有相同的实体集。我不确定那是你想要的。

但是，您可以通过接口获得几乎相同的效果。例如，您可以有一个接口 IEntity，它公开一个 id 属性。另一个接口 ITrackedEntity 可以公开 CreatedBy 和 ModifiedBy。等等。

这并不理想，但对我们目前来说已经绰绰有余了。我们实际上通过 T4 模板使用 codegen 来实现这些。

实体框架的下一个版本可能具有使这种继承模式更易于实现而无需单个实体集的功能。

# php - 我应该在这里使用委托吗？

> ID：853934
> 
> 赞同：0
> 
> 时间：2009-05-12T17:34:22.837
> 
> 标签：php, logging, error-handling

我目前有两个类层次结构：一个用于处理错误，另一个用于记录错误。

我想知道

1) 将错误处理委托给与错误处理程序分开的类是否有利

和

2）我所拥有的是否是一个好的设计。

**这是我所拥有的：**

```
class ErrorHandler {
  public __construct(ErrorLogger $ErrorLogger) {
    ...
    $this->setErrorPageURL('/error.php');
  }

  public function setErrorPageURL($errorPageURL);

  public function handle() {
    ...
    $this->ErrorLogger->log($errorNumber, $errorMessage, $errorFile, $errorLine);
    header("Location: $this->errorPageURL");
  }
}

class ErrorLogger {
  abstract protected function log($errorNumber, $errorMessage, $errorFile, $errorLine);

  // Overridable.
  protected function getExtraLogMessage() {
    return null;
  }
}

class EmailerErrorLogger extends ErrorLogger {
  public function __construct($toEmailAddress, $fromEmailAddress) {
    ...
  }

  protected function log($errorNumber, $errorMessage, $errorFile, $errorLine) {
    // collect error information and various pieces of information
    mail(...);
  }
}

register_shutdown_function(array(new ErrorHandler(new EmailerErrorLogger()), 'handle')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T17:49:56.400

我认为这种结构是有道理的，因为您的错误处理程序必须执行某些其他工作，而不仅仅是记录错误。

记录器自己可以实现[责任链模式](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)

# html - 如何将其从 table 标签转换为 div 标签

> ID：853942
> 
> 赞同：1
> 
> 时间：2009-05-12T17:36:07.700
> 
> 标签：html

我有一个非常简单的表格，出于示例目的，我想将其转换为 div。我对此没有运气。

这是我的页面：http: [//jsbin.com/equfo](http://jsbin.com/equfo)

基本上我想将它转换为 div 因为我厌倦了像这样的表格，我希望按钮显示在手边的表格中间。但因为我使用标签。中间永远不是 TABLE 的中间，而是 TD 标签的中间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T17:52:17.533

你想解决这个特殊问题还是学习 CSS 定位？

如果您只是想要一个快速的解决方案，Dave 已经一针见血了。如果您想了解更多信息，您可能会比从这些教程开始做得更糟：

[http://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

[http://www.brainjar.com/css/positioning/](http://www.brainjar.com/css/positioning/)

中间管上有很多类似的东西。还有一些专门用于形成布局的：

[http://www.webcredible.co.uk/user-friendly-resources/css/css-forms.shtml](http://www.webcredible.co.uk/user-friendly-resources/css/css-forms.shtml)

[http://designshack.co.uk/articles/10-css-form-examples](http://designshack.co.uk/articles/10-css-form-examples)

它并没有那么复杂，但它比这里容易描述的要多。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T17:44:41.167

您只需要`<TD colspan="2">`按钮，它将位于表格的中心。如果表中有更多列，请适当增加 colspan。

用 DIV 显示它；

```
<div class="searchTable">
  <span>Enter SSN</span>
  <div class="odd">
     <span class="label">Enter Social Security <u>N</u>umber</b></span>
     <input type="text" id="SearchFormerTenant_ssn1"/>-
     <input type="text" id="SearchFormerTenant_ssn1"/>-
     <input type="text" id="SearchFormerTenant_ssn1"/>
  </div>
  <div class="even" style="width: 100%; text-align:center;">
    <input type="submit" id="SearchFormerTenant_0" value="Get Information"/>
  </div>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-12T17:39:39.053

尽管这更适合于 div，但一个简单的替代方法是将按钮移出表格并仅 text-align: 在其自己的 div 中居中。

# iphone - MPMoviePlayer 方向

> ID：853944
> 
> 赞同：0
> 
> 时间：2009-05-12T17:36:17.530
> 
> 标签：iphone, objective-c

我正在使用 MPMoviePlayer 通过 URL 播放 MP3 音频。但是当它播放时，它会翻转为横向布局，我希望它保持纵向布局。

有任何想法吗？

谢谢，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-12T17:51:39.110

不幸的是，电影播放器​​只能在横向播放电影。您必须将旋转到 480x320 而不是 320x480 的电影重新编码。播放电影后，它会更改状态栏的方向，因此您需要将其翻转回来[`setStatusBarOrientation:animated:`](http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/UIApplication/setStatusBarOrientation:animated:)：

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait animated:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-12T22:16:16.247

您可以使用丑陋的 hack 并将其放置在 UIWebView 中，但此功能确实应该在 MPMoviePlayer 中。

# jquery - $(document).ready 在 ajax 回调后的 ascx 页面中

> ID：853955
> 
> 赞同：5
> 
> 时间：2009-05-12T17:39:22.703
> 
> 标签：jquery, asp.net-mvc, ajax, user-controls, actionlink

我的这个设置有点问题，我有一个`.ascx`文件列表，它们在控制器本身的计算方面都做了不同的任务。因此，在我的`.aspx`页面上，我单击一个，这将根据我单击的项目`Ajax.ActionLink()`呈现该特定文件。`.ascx`其中`.ascx`有 1-3 个事件将触发其中 2 个是`onclick`events，1 个是`onload`. 这些`onclick`事件更容易使用，因为我可以像这样直接在控件事件中对其进行硬编码，`onclick="$("#toggleMe3").slideToggle("slow");"`并且`onload`必须在`.ascx`加载时运行我正在`$(document).ready(function(){});`调用中测试它，这在`.aspx`页面中可以正常工作，但只要我尝试将其添加到`.aspx`页面没有加载，它是理想的，但我不知道为什么不。事实上，如果我直接插入到`.ascx`页面中，脚本标签中的任何内容都不起作用，它们只有在硬编码到控件的事件中时才起作用，至少其中一些；并且不要开火`onload`。`onprerender`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T18:53:19.323

我在通过 XHR 加载的部分中使用 $(document).ready 取得了成功。您通过 XHR 加载的视图是否会引发 JavaScript 异常？或者它们是否包含格式错误的 HTML？

我通常在我通过 Ajax 加载的部分底部有我的 $(document).ready 方法，比如......

```
<script type="text/javascript">
$(document).ready(function(){ callMyFunction(); });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T19:13:45.437

我很难理解你的问题......但它就在这里。

如果您使用 AJAX 调用加载日期，$(document).ready() 事件将不会触发——因为页面已经加载。您现在只是在加载更多数据。

如果您已经知道控件会出现什么，请预加载 JavaScript，但不要仅使用 click 事件处理程序进行绑定，而是使用实时处理程序。

所以

```
$("#myControl").click(....); 
```

变成

```
 $("#myControl").live("click", ....); 
```

抱歉，如果这不是您要找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-03-29T16:54:36.740

在 $(document).ready 中指定的部分回发脚本未执行后，我遇到了同样的问题。我在这里找到了解决方案[MSDN - PageRequestManager Class](http://msdn.microsoft.com/en-us/library/bb311028.aspx)

看起来像添加如下脚本可以解决问题

```
<script type="text/javascript">
  Sys.WebForms.PageRequestManager.getInstance().add_endRequest(myReadyFunction);
</script> 
```

# java - FreeBSD 上的 GWT 1.6.4？

> ID：853959
> 
> 赞同：1
> 
> 时间：2009-05-12T17:39:52.967
> 
> 标签：java, maven-2, gwt, freebsd

有人在 FreeBSD 上运行 GWT 1.6.4 吗？我们的构建服务器是一个 FreeBSD 机器，当我们尝试编译时会出现以下情况：

```
# An unexpected error has been detected by Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x0000000800d0c724, pid=4749[thread 34370233088 also had an error], tid=0xa02d80

#
# Java VM: Diablo Java HotSpot(TM) 64-Bit Server VM (10.0-b23 mixed mode bsd-amd64)
# Problematic frame:
# V  [libjvm.so+0x20c724]
#
# An error report file with more information is saved as:
# /usr/home/username/reporting/hs_err_pid4749.log
#
# Please submit bug reports to freebsd-java@FreeBSD.org
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug. 
```

有趣的是，Maven 似乎包含`gwt-dev-1.6.4-linux.jar`在类路径中，大概是因为没有适用于 FreeBSD 的版本；我不知道这是否相关。我们只是在尝试编译，而不是使用托管模式，所以我认为实际上不需要任何本机库。这曾经对我们使用 GWT 1.5 很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T23:46:22.973

如果您在 Google 上搜索该框架 (libjvm.so+0x20c724)，您会在 freebsd-java 列表中找到一些[相关](http://lists.freebsd.org/pipermail/freebsd-java/2009-March/008016.html)的最新[线程。](http://lists.freebsd.org/pipermail/freebsd-java/2009-April/008047.html)

看起来问题可能与 IPv6 有关？提出的解决方案是将 -Djava.net.preferIPv6Addresses=false -Djava.net.preferIPv4Stack=true 添加到配置中。

看到 FreeBSD 的 java 构建系统是不寻常的。该平台上没有太多的灵活性或对 Java 的支持。您的产品是否也部署在 FreeBSD 上？如果上面的解决方案不起作用，您可能必须更密切地与 freebsd-java 社区接触，或者考虑尝试另一个平台进行构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-21T11:55:25.927

我们似乎通过使用 JDK5 来编译我们基于 GWT 的代码来避开这个问题。不是一个完美的解决方案，而是一种解决方法。

# c# - C# 新表单永远不会获得焦点

> ID：853960
> 
> 赞同：0
> 
> 时间：2009-05-12T17:40:41.203
> 
> 标签：c#, forms, focus

我一直在尝试编写一个带有自己的选项窗口的小应用程序。当我尝试启动窗口时，我似乎永远无法将注意力集中在新表单上。这不是一个 mdi 表单，而只是当用户从菜单中选择一个选项时我创建的一个新表单。需要注意的是，Form.Show 是 return false，这意味着新表单永远不会获得焦点。

我尝试了多种加载表单的方法，但都失败了：

**从来电表格：**

```
ServerForm SF = new ServerForm(ref DataLoader, false);
SF.Show();
SF.Focus();
// Fails 
```

**在表单本身内部：**

```
this.Show();
this.BringToFront();
this.Activate();
this.TopMost = true;
// Fails 
```

**将表格设置为可选：**

```
this.SetStyle(System.Windows.Forms.ControlStyles.Selectable, true);
...
ServerForm SF = new ServerForm(ref DataLoader, false);
SF.Show();
SF.Focus();
// Fails 
```

**使用旧 API：**

```
[System.Runtime.InteropServices.DllImport("user32.dll")]
private static extern int ShowWindow(IntPtr handle, int nCmdShow);    
ServerForm SF = new ServerForm(ref DataLoader, false);
ShowWindow(SF.Handle, 3);
SF.Show();
SF.Focus();
// Fails 
```

**传递父母**

```
ServerForm SF = new ServerForm(ref DataLoader, false);
SF.Show(this);
SF.Focus();
// Fails 
```

在所有这些情况下，表单都会显示出来，但生成的表单仍会将焦点放在新表单上。即使在创建新表单之前禁用旧表单也会发生这种情况。

有什么建议么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-12-29T16:20:51.283

这是因为`Form.canFocus()`表单加载时为假。`Form.Activate()`在`Form.Shown`活动中使用。就这样。

```
private void ServerForm_Shown(object sender, EventArgs e)
{
    this.Activate();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-08-11T12:35:22.943

将`TopMost`表单属性设置为 true。然后

在 program.cs 中：

```
var formLogin = new frmLogin();
formLogin.ShowDialog();

if (formLogin.DialogResult == DialogResult.Yes)
{
        Application.Run(new frmMain());
} 
```

在表单登录中：

```
[DllImport("user32")]
public static extern int SetForegroundWindow(IntPtr hwnd);         

...

private void frmLogin_Shown(object sender, EventArgs e)
{
  SetForegroundWindow(this.Handle);
}

private void frmLogin_Deactivate(object sender, EventArgs e)
{
    TopMost = false;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-03T08:13:46.130

我解决了这个问题（感谢[@Joel Coehoorn](https://stackoverflow.com/a/1463479/505893)）：

```
form.WindowState = FormWindowState.Minimized;
form.Shown += delegate(Object sender, EventArgs e) {
    ((Form)sender).WindowState = FormWindowState.Normal;
};
form.ShowDialog(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T17:54:51.493

请记住，winforms 应用程序中只允许一个用户界面线程。

调用*后，*您是否在父表单上操作任何内容`Form.Show()`？这可能会导致父窗体再次聚焦。

删除您曾经尝试集中注意力、激活表单并仅依靠调用`Form.Show()`. 这应该足以加载表单并专注于它。如果有的话，在您的菜单项处理程序中。致电后将所有内容注释掉`Show()`，看看是否有效。向后工作以查看导致您的父表单重新聚焦的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T18:30:29.983

这似乎有效。首先，我创建新表单：

```
private void changeDefaultServerToolStripMenuItem_Click(object sender, EventArgs e)
{
    this.Enabled = false;
    ServerForm SF = new ServerForm(ref DataLoader, true);
} 
```

然后在新表单的构造函数中，我执行以下操作：

```
this.BringToFront();
this.CenterToParent();
this.TopMost = true;
this.ShowDialog(); 
```

显然 Form.Show 和 Form.ShowDialog 之间存在某种幕后差异。不太确定它是什么，我只能认为它与以某种方式设置活动父母有关。在调用构造函数之后添加代码似乎不会将焦点重新归还给父表单。这是不应该的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-12-09T10:41:48.427

试着打电话`ShowDialog(this)`。当我遇到同样的问题时，它对我有帮助。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-05-12T17:44:52.257

您是否尝试过设置正确的父窗口[`Form.Show()`](http://msdn.microsoft.com/en-us/library/szcefbbd.aspx)？

例如：

```
using(ServerForm SF = new ServerForm(ref DataLoader, false)) // if ServerForm is IDisposable
{
    SF.Show(this);
} 
```

## 编辑：

有一些事情不在你的问题范围内。您拥有的窗口是 TopMost 窗口吗？

# css - 使用 CSS 规则的文件类型图标

> ID：853962
> 
> 赞同：1
> 
> 时间：2009-05-12T17:41:15.367
> 
> 标签：css, history, icons

我正在使用[这种](http://web-kreation.com/index.php/html-css/add-file-type-icons-next-to-your-links-with-css)方法在我的网络应用程序中指向文件的每个链接附近显示一个图标。

为了避免 IE 历史缓存问题，我将链接显示为

```
<a href="path/to/the/file.xls?timestamp=0234562">FileName.xls</a>.
```

在这种情况下，css 规则不起作用。

你知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-12T17:51:29.453

您可能使用的选择器`a[href$='.xls']`仅在与 HREF 值的结尾匹配时才适用。改为使用`a[href*=.xls]`。

[选择器级别 3](http://www.w3.org/TR/css3-selectors/#attribute-substrings)的摘录：

> ```
> [att*=val] 
> ```
> 
> 表示具有属性的元素，该`att`属性的值至少包含子字符串“val”的一个实例。如果 "val" 是空字符串，则选择器不代表任何内容。

**编辑**

如果您可以控制 .htaccess 文件，则可以确保避免缓存问题，因此您可以使用原始样式表规则。有关更多详细信息，请参阅[使用 Apache 和 .htaccess](http://www.askapache.com/htaccess/apache-speed-cache-control.html)的缓存控制标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T17:56:30.600

问题是与锚属性`a[href$='.xls']`的结尾相匹配`href`，但是您要附加时间戳，因此该 href 的结尾实际上是时间戳。

为避免缓存问题，您可以使用代理处理下载；也就是说，使用触发文件下载的脚本。在 PHP 中，它很容易通过 readfile() 函数和发送无缓存标头来实现，例如：

```
<a href="download.php?file=spreadsheet.xls">spreadsheet.xls</a> 
```

但是由于我不知道您使用的是哪种编程语言，所以我不能多说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-05-24T05:21:13.050

邓肯，我知道这已经得到回答，但只是为了您的评论，这里有一个适合您的功能。我认为它几乎直接来自 PHP 手册或某处的其他示例。我在一个处理其他事情（如检查文件权限、上传等）的类中有这个。根据您的需要进行修改。

```
public function downloadFile($filename)
{

    // $this->dir is obviously the place where you've got your files
    $filepath = $this->dir . '/' . $filename;
    // make sure file exists
    if(!is_file($filepath))
    {
        header('HTTP/1.0 404 Not Found');
        return 0;
    }
    $fsize=filesize($filepath);

    //set mime-type
    $mimetype = '';
    // mime type is not set, get from server settings
    if (function_exists('finfo_file'))
    {
        $finfo = finfo_open(FILEINFO_MIME); // return mime type
        $mimetype = finfo_file($finfo, $filepath);
        finfo_close($finfo);
    }
    if ($mimetype == '')
    {
        $mimetype = "application/force-download";
    }

    // replace some characters so the downloaded filename is cool
    $fname = preg_replace('/\//', '', $filename);
    // set headers
    header("Pragma: public");
    header("Expires: 0");
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("Cache-Control: public");
    header("Content-Description: File Transfer");
    header("Content-Type: $mimetype");
    header("Content-Disposition: attachment; filename=\"$fname\"");
    header("Content-Transfer-Encoding: binary");
    header("Content-Length: " . $fsize);

    // download
    $file = @fopen($filepath,"rb");
    if ($file)
    {
        while(!feof($file))
        {
            print(fread($file, 1024*8));
            flush();
            if (connection_status()!=0)
            {
                @fclose($file);
                die(); // not so sure if this best... :P
            }
        }
        @fclose($file);
    }
} 
```

# javascript - 如何将图像从客户端插入到编辑器中？

> ID：853964
> 
> 赞同：0
> 
> 时间：2009-05-12T17:41:36.303
> 
> 标签：javascript, css, editor

就像一个“插入”菜单，通过它使用 JavaScript 将图像插入编辑器，我根本不知道解决方案是什么，

应该分两步：

1.  让用户选择一张图片（这应该可以通过 来实现`input type=file`）。

2.  将选择的图像插入到编辑上下文中（不知道如何实现）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-12T17:52:13.320

如果不将图像上传到您的服务器，您将无法实现此目的，因为您在文本区域内的唯一参考是公共网站（即不是用户硬盘驱动器）。

我建议检查[IMCE](http://ufku.com/drupal/imce/demo)；这就是我使用的。

它允许用户上传图像。与[TinyMCE](http://tinymce.moxiecode.com/)等漂亮的 WYGIWYS 编辑器一起，它就像一个魅力。

# apache-flex - Flex：创建模板应用程序？

> ID：853966
> 
> 赞同：0
> 
> 时间：2009-05-12T17:41:47.003
> 
> 标签：apache-flex

每当我在 Flex builder 中开始一个新项目时，我总是必须去添加我所有的项目构建路径，调整编译器设置等。有没有一种方法可以让我在完成所有这些后创建一个模板，然后从模板中单击新建？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-12T20:09:48.010

不，但我可以想到一两个解决方法。尝试将现有项目导入新位置，然后删除不需要的项目。

更好的是，您可以制作一个包含您想要的所有设置的“模板”项目。然后，每当您想创建一个新项目时，创建一个，然后在命令行上或使用 Finder（或资源管理器），从模板项目中复制项目文件，确保正确更新名称。控制它的文件是：.flexProperties、.actionScriptProperties、.settings/ 和 .project，我相信。它们位于任何 FB 项目的根文件夹中。

# macos - 在 Parallels 中将共享映射到驱动器号

> ID：853985
> 
> 赞同：0
> 
> 时间：2009-05-12T17:48:46.807
> 
> 标签：macos, parallels

因为 Parallels 将 localhost 命名为“.psf”，所以我在 Parallels 中使用 Visual Studio 时遇到问题（出现“无效 URI：无法传递主机名”错误）。我知道我必须以某种方式将文件夹映射到 Parallels 中的驱动器号。有人可以描述我如何做到这一点的确切步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-16T08:43:48.797

首先，如果您还没有，您需要告诉 Parallels 您想与 Windows 共享 OS X 中的哪个文件夹。为此，请转到“虚拟机”菜单并选择“配置...”。从那里转到“共享文件夹”部分并添加一个新的用户定义共享。

返回 Windows，打开我的电脑并在工具栏中查找名为“映射网络驱动器”的按钮。它会弹出一个对话框，让您选择共享文件夹的驱动器号和路径。只需点击“浏览”按钮并导航到共享，比手动输入更容易。

点击完成按钮，您应该已经准备就绪。

# c# - 是否有一种简单的方法来附加 lambda 并重用 lambda 名称以创建我的 Linq where 条件？

> ID：853990
> 
> 赞同：4
> 
> 时间：2009-05-12T17:50:05.477
> 
> 标签：c#, .net, linq, linq-to-sql, lambda

我有一个用户控件，它接受一个 Func，然后将其提供给 IQueryable 的 Linq“Where”扩展方法。这个想法是，从调用代码中，我可以传入所需的搜索函数。

我想动态构建这个搜索功能：

```
Func<Order, bool> func == a => true;
if (txtName.Text.Length > 0) {
  //add it to the function
  func = a => func(a) && a.Name.StartsWith(txtName.Text);
}
if (txtType.Text.Length > 0) {
  //add it to the function
  func = a => func(a) && a.Type == txtType.Text;
}
..... etc ..... 
```

这种方法的问题在于，由于我重用了名称“func”，它创建了一个递归函数。

有没有一种简单的方法来构建这样的表达式树以制作动态 where 子句（在没有预先设置 IQueryable 并反复调用“Where”的情况下）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T17:54:30.727

只需将当前 lambda 保存在临时变量中以防止递归。

```
var tempFunc = func;
func = a => tempFunc(a) && ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T19:06:34.853

如果你想做一个“and”组合，首选的选择是使用多个“where”子句：

```
IQueryable<Order> query = ...
if (!string.IsNullOrEmpty(txtName.Text.Length)) {
  //add it to the function
  query = query.Where(a => a.Name.StartsWith(txtName.Text));
}
if (!string.IsNullOrEmpty(txtType.Text.Length)) {
  //add it to the function
  query = query.Where(a => a.Type == txtType.Text);
} 
```

您可以使用表达式构建（AndAlso、Invoke 等）做更复杂的事情，但这对于“and”组合不是必需的。

如果你真的需要组合表达式，那么方法取决于实现。LINQ-to-SQL 和 LINQ-to-Objects 支持 Expression.Invoke，允许：

```
static Expression<Func<T, bool>> OrElse<T>(
    this Expression<Func<T, bool>> lhs,
    Expression<Func<T, bool>> rhs)
{
    var row = Expression.Parameter(typeof(T), "row");
    var body = Expression.OrElse(
        Expression.Invoke(lhs, row),
        Expression.Invoke(rhs, row));
    return Expression.Lambda<Func<T, bool>>(body, row);
}
static Expression<Func<T, bool>> AndAlso<T>(
    this Expression<Func<T, bool>> lhs,
    Expression<Func<T, bool>> rhs)
{
    var row = Expression.Parameter(typeof(T), "row");
    var body = Expression.AndAlso(
        Expression.Invoke(lhs, row),
        Expression.Invoke(rhs, row));
    return Expression.Lambda<Func<T, bool>>(body, row);
} 
```

但是，对于实体框架，您通常需要将表达式拆开并重新构建，这*并不*容易。因此，为什么通常最好使用`Queryable.Where`(for "and") 和`Queryable.Concat`(for "or")。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-12T18:03:18.077

如果您要在 LinqToSQL 或任何其他动态表达式树解析器中使用它，您将要使用[PredicateBuilder](http://www.albahari.com/nutshell/predicatebuilder.aspx)！！！

**除此以外：**

此扩展方法将防止递归：

```
 public static Func<T, bool> And<T>(this Func<T, bool> f1, Func<T, bool> f2)
    {
        return a => f1(a) && f2(a);
    }

    public static Func<T, bool> Or<T>(this Func<T, bool> f1, Func<T, bool> f2)
    {
        return a => f1(a) || f2(a);
    } 
```

像这样使用它：

```
Func<Order, bool> func == a => true;
if (txtName.Text.Length > 0) {
  //add it to the function
  func.And(a => a.Name.StartsWith(txtName.Text));
}
if (txtType.Text.Length > 0) {
  //add it to the function
  func.And(a => a.Type == txtType.Text);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T18:27:01.267

我正在这样做……我正在使用表达式，因为 Func 是编译后的代码，`Expression<Func<YourObect, boo>>`可以转换为 C# 或 TSql 或其他任何东西……我刚刚看到有几个人推荐使用表达式而不是 func。

在您的搜索页面上，您将实现如下代码：

```
SearchCritera<Customer> crit = new SearchCriteria<Customer>();

if (txtName.Text.Length > 0) {
  //add it to the function
  crit.Add(a.Name.StartsWith(txtName.Text));
}

if (txtType.Text.Length > 0) {
  //add it to the function
  crit.Add(a.Type == txtType.Text));
} 
```

SearchCriteria 对象看起来像这样......

```
public class SearchCritera<TEntity>
    {
        private List<Expression<Func<TEntity, bool>>> _Criteria = new List<Expression<Func<TEntity, bool>>>();

        public void Add(Expression<Func<TEntity, bool>> predicate)
        {
            _Criteria.Add(predicate);
        }

        // This is where your list of Expression get built into a single Expression 
        // to use in your Where clause
        public Expression<Func<TEntity, bool>> BuildWhereExpression()
        {
            Expression<Func<TEntity, bool>> result = default(Expression<Func<TEntity, bool>>);
            ParameterExpression parameter = Expression.Parameter(typeof(TEntity), "entity");
            Expression previous = _Criteria[0];

            for (int i = 1; i < _Criteria.Count; i++)
            {
                previous = Expression.And(previous, _Criteria[i]);
            }

            result = Expression.Lambda<Func<TEntity, bool>>(previous, parameter);

            return result;
        }
    } 
```

然后从你的 Where 子句中你可以做到这一点......

```
public List<Customer> FindAllCustomers(SearchCriteria criteria)
{
   return LinqToSqlDataContext.Customers.Where(SearchCriteria.BuildWhereExpression()).ToList();
} 
```

这是我第一次编写代码，您可能需要为您的目的进行一些更改，我知道它可以编译，但是当我真正去做时，我会对其进行单元测试，但这是我一直在折腾的想法在我的脑子里...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-12T19:16:11.623

```
Dictionary<Func<bool>, Expression<Func<Order, bool>>> filters =
  new Dictionary<Func<bool>, Expression<Func<Order, bool>>>();
// add a name filter
filters.Add(
  () => txtName.Text.Length > 0,
  a => a.Name.StartsWith(txtName.Text)
);
// add a type filter
filters.Add(
  () => txtType.Text.Length > 0,
  a => a.Type == txtType.Text
); 
```

...

```
var query = dc.Orders.AsQueryable();

foreach( var filter in filters
  .Where(kvp => kvp.Key())
  .Select(kvp => kvp.Value) )
{
  var inScopeFilter = filter;
  query = query.Where(inScopeFilter);
} 
```

# java - 在 SQL Server 中插入 JDBC 时自动生成密钥

> ID：853993
> 
> 赞同：5
> 
> 时间：2009-05-12T17:50:38.097
> 
> 标签：java, sql-server, database, jdbc, rdbms

是否有一种通用的跨 RDMS 方式可以在 JDBC 插入上自动生成密钥？例如，如果我有一个带有主键、id 和 int 值的表：

```
create table test (
  id int not null,
  myNum int null
) 
```

并做一个插入

```
PreparedStatement statement = connection.prepareStatement("insert into test(myNum) values(?)", Statement.RETURN_GENERATED_KEYS);
statement.setInt(1, 555);
statement.executeUpdate();
        statement.close(); 
```

我得到一个 java.sql.SQLException：无法将值 NULL 插入到列“id”中。

我有一种感觉，这完全依赖于 RDMS。我们正在使用 SQL Server 2005，我已经设置

```
CONSTRAINT [PK_test] PRIMARY KEY CLUSTERED 
(
    [id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON, FILLFACTOR = 1) ON [PRIMARY] 
```

在表中没有运气。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-12T18:56:50.737

这完全取决于数据库。有两个主要选项：1 - 允许在主键定义旁边使用自动递增关键字的 DBMS 和 2 - 提供序列生成器的 DBMS（然后您可以使用它为 PK 生成新值，例如通过编写“插入前”触发器，在完成插入之前自动在列中插入新值）。

据我所知：

1.  Firebird 使用序列
2.  DB2 允许将列定义为“GENERATED BY DEFAULT AS IDENTITY”；
3.  Interbase 使用序列（称为生成器）
4.  MySQL 有“AUTO_INCREMENT”子句
5.  Oracle 使用序列
6.  PostgreSQL 使用序列
7.  SQLServer 具有“IDENTITY(1,1)”子句

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T17:55:58.963

您需要在测试表中设置 id 列以自动创建身份。在 SQL Server 的情况下，您需要`IDENTITY()`在 ID 列上设置属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-12T18:02:04.007

这取决于数据库。Oracle 需要创建一个 SEQUENCE 并且在 MySQL 上您只需将该列设置为自动增量。

你总是可以使用休眠。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-12T17:53:10.013

据我所知，它依赖于数据库。插入时间戳也是如此；有些会在您插入空值时插入当前时间。*****`*