# StackOverflow 问答 11625000-11625999

# r - ggplot2：用一组相似的颜色绘制离散因子

> ID：11625005
> 
> 赞同：4
> 
> 时间：2012-07-24T06:02:58.633
> 
> 标签：r, plot, ggplot2

在绘制它们时，我试图提出一种一致的方式来表示我的数据集中的每个因素。因此，例如，每次绘制涉及词性的图形时，我都可以将“词性”的级别用不同的蓝色阴影表示：

```
eg.dat <- data.frame(rt=c(530, 540, 555), 
                     part.of.speech=c("Verb", "Noun", "Both")
                     )

ggplot(eg.dat, aes(part.of.speech, rt, fill=part.of.speech)) +
  geom_bar(stat="identity", colour="black") +
  scale_fill_manual(values=c("cyan", "blue", "darkblue")) 
```

![手动指定颜色](../Images/720de6637e7e993b84b3ef1364a6adf6.png)

然而，为每个因素想出像这样花哨的颜色名称是很困难的，所以我一直在寻找更自动的解决方案。一种相当老套的解决方法是使用`alpha`：

```
ggplot(eg.dat, aes(part.of.speech, rt, alpha=part.of.speech)) +
  geom_bar(stat="identity", colour="black", fill="blue") +
  scale_alpha_discrete(range=c(0.4, 1)) 
```

![使用阿尔法](../Images/98efe380674cb075ceb145f37558dabd.png)

但我一直想知道是否有更简单的方法来选择这样的短范围相似颜色。中的`scale_colour_gradient`类型函数`ggplot2`不适用于这些离散因素，而且从`rainbow`or中获取自定义颜色似乎并不容易`heat.colors`。理想的函数是这样的： `shades(n, central_colour="blue")`，返回`n`颜色值。对实现这一目标的最佳方法有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T06:25:26.220

`scale_fill_discrete`或者`scale_fill_hue`会这样做。您可以定义`h`,`c`和`l`（色相、色度和亮度）。查看`?hcl`更多详细信息

例如。

```
ggplot(eg.dat, aes(part.of.speech, rt, fill=part.of.speech)) +
     geom_bar(stat="identity", colour="black") +
     scale_fill_discrete( h =c(220,260)) 
```

![在此处输入图像描述](../Images/a25a91085ee4a18153b6ad29a91f8d3e.png)

`scale_fill_hue`将给出相同的结果（在这种情况下）。

您还可以使用`scale_fill_brewer`which 使用该`RColorBrewer`包并提供对[colorbrewer](http://colorbrewer2.org/)调色板的访问权限

```
ggplot(eg.dat, aes(part.of.speech, rt, fill=part.of.speech)) +
     geom_bar(stat="identity", colour="black") +
     scale_fill_brewer(palette = 'Blues') 
```

![在此处输入图像描述](../Images/a2461af4e7577221c467f020498ffa17.png)

# iphone - 在 UIButton 上添加 Longpress 手势和 Click 事件

> ID：11625009
> 
> 赞同：3
> 
> 时间：2012-07-24T06:03:37.260
> 
> 标签：iphone, ipad, uibutton, uigesturerecognizer, long-press

我是 iPhone 新手。

我想向我的 Button 添加长按手势和单击事件，这可能吗？

当我将这两个事件都添加到按钮然后长按时，我的点击事件被触发（点击时我导航到一个新页面），但我的长按事件永远不会被触发。

这是我的代码片段：

```
button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(xpos, ypos, 120,130);
[button setBackgroundImage:[UIImage imageNamed:@"ibook2.png"] forState:UIControlStateNormal];
[button setTitle:[NSString stringWithFormat:@"32"]];
[button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
[button addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchDown];

LongPress = [[UILongPressGestureRecognizer alloc] init];
[LongPress addTarget:self action:@selector(longPressDetected:)];
LongPress.delegate = (id<UIGestureRecognizerDelegate>)self;
[button addGestureRecognizer:LongPress];
[LongPress release];

[self.view addSubview:button]; 
```

如何添加这两个事件？

**任何帮助将不胜感激。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T06:08:28.843

如下更改该行，

```
 [button addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

如果您使用 touchdown 事件，您的 click 事件将在您触摸按钮后立即触发。TouchupInside 触发 touchup 动作。

要获得标题，

```
 - (void)longPressDetected:(UIGestureRecognizer *)gestureRecognizer
{
    UIButton *button = (UIButton *)[gestureRecognizer view];
    NSLog(@"%@",[button titleForState:UIControlStateNormal]);
} 
```

# ffmpeg - 使用 ffmpeg 从网络摄像头录制声音

> ID：11625020
> 
> 赞同：4
> 
> 时间：2012-07-24T06:04:50.430
> 
> 标签：ffmpeg, webcam, audio-recording

使用`ffmpeg arecord -L`，我能够将我的 Logitech USB 网络摄像头识别为：

```
hw:CARD=U0x46d0x821,DEV=0
    USB Device 0x46d:0x821, USB Audio
    Direct hardware device without any conversions
plughw:CARD=U0x46d0x821,DEV=0
    USB Device 0x46d:0x821, USB Audio
    Hardware device with all software conversions 
```

当我进入时`/dev/snd/by-id`，网络摄像头被描述为：

```
usb-046d_0821_6813BFD0-00 -> ../controlC1 
```

我知道在 ffmpeg 中使用声音设备的命令是

```
ffmpeg -f alsa -i $ALSA_DEVICE_NAME.. 
```

我努力了

```
ffmpeg -f alsa -i "hw:CARD=U0x46d0x821,DEV=0" 
```

和

```
ffmpeg -f alsa  -i "plughw:CARD=U0x46d0x821,DEV=0" 
```

在这两种情况下，我都会收到相同的错误消息：

```
ALSA lib pcm.c:2208:(snd_pcm_open_noupdate) Unknown PCM hw=CARD=U0x46d0x821,DEV=0
[alsa @ 0x9c96580] cannot open audio device hw=CARD=U0x46d0x821,DEV=0 (No such file or directory)
hw:CARD=U0x46d0x821,DEV=0: Input/output error 
```

我也试过：

```
ffmpeg -f alsa -i "usb-046d_0821_6813BFD0-00" 
```

和

```
ffmpeg -f alsa -i "usb-046d_0821_6813BFD0-00,DEV=0" 
```

并且仍然收到错误消息

您能否帮助制定正确的命令格式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:13:43.983

我终于可以在 ffmpeg 下使用网络摄像头的声音部分了。正确的做法是不要将硬件值括在引号中。不要用引号将硬件括起来：

```
ffmpeg -f alsa -i plughw:CARD=U0x46d0x821,DEV=0 
```

代替：

```
ffmpeg -f alsa -i "plughw:CARD=U0x46d0x821,DEV=0" 
```

我希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:07:11.927

也许这有效：

```
ffmpeg -f alsa -r 16000 -i hw:2,0 -f video4linux2 -s 800x600 -i /dev/video0 -r 30 -f avi -vcodec mpeg4 -vtag xvid -sameq -acodec libmp3lame -ab 96k output.avi 
```

[资源](http://www.commandlinefu.com/commands/view/3495/record-audio-and-video-from-webcam-using-ffmpeg)

# events - symfony2 中的事件监听器和订阅者有什么区别

> ID：11625025
> 
> 赞同：7
> 
> 时间：2012-07-24T06:04:57.857
> 
> 标签：events, symfony, doctrine

我对事件订阅者感到困惑。

我知道事件侦听器会等待发生某些事情，如果发生这种情况，它们就会执行该函数。

但是事件订阅者做了什么。

有人可以用通俗的语言解释一下吗？

# iphone - iOS 帮助：UITableViewCell 类的自定义设计未显示在 UITableView 中

> ID：11625027
> 
> 赞同：1
> 
> 时间：2012-07-24T06:05:00.483
> 
> 标签：iphone, objective-c, ios, ios5, ios4

我为 UITableViewCell 编写了一个名为 TaskCell 的类，并设计了一个 .xib 文件并将文件的所有者连接到自定义类。然后在 View Controller 类中我想加载自定义设计，但它没有显示。这是带有表格视图的视图控制器的代码：

ShowTaskViewController.h 文件：

```
@interface ShowTaskViewController : UIViewController <UITableViewDataSource,UITableViewDelegate>
{
    //Database object
    sqlite3 *taskeeDB;
    NSString *databasePath; 
}
@end 
```

ShowTaskViewController.m 文件，在索引路径方法中包含用于行的单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell"; 
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    //Get data for cell
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    Task *taskObj1 = (Task *)[appDelegate.taskArray objectAtIndex:indexPath.row];
    NSString *sName = [[NSString alloc] initWithFormat:@"%@",taskObj1.name];
    NSString *sLoc = [[NSString alloc] initWithFormat:@"%@",taskObj1.location];
    NSString *sTime = [[NSString alloc] initWithFormat:@"%@",taskObj1.time];
    NSString *sDate = [[NSString alloc] initWithFormat:@"%@",taskObj1.date];

    //Configure cell if null
    if (cell == nil) {
        //I have written a custom init method to take parameters and assign label text values
        cell = [[TaskCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier name:sName location:sLoc time:sTime date:sDate];
    }
return cell;
} 
```

如果出列单元格列表中的单元格为空，我将分配新的单元格对象，其中 TaskCell 是自定义 UITableViewCell 类。我在做正确的过程吗？

显示我尝试按以下方式创建单元格？

```
if (cell == nil){
    NSArray *objects = [[NSBundle mainBundle] loadNibNamed:@"TaskCell" owner:self options:nil];
    for (id currentObjects in objects  ) { 
        if ([currentObjects isKindOfClass:[UITableViewCell class]]) {
            cell = (TaskCell*) currentObjects;
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:10:52.513

我想以下更改会对您有所帮助！

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {

    static NSString *CellIdentifier = @"Cell"; 
    TaskCell *cell = (TaskCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    //Get data for cell
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    Task *taskObj1 = (Task *)[appDelegate.taskArray objectAtIndex:indexPath.row];
    NSString *sName = [[NSString alloc] initWithFormat:@"%@",taskObj1.name];
    NSString *sLoc = [[NSString alloc] initWithFormat:@"%@",taskObj1.location];
    NSString *sTime = [[NSString alloc] initWithFormat:@"%@",taskObj1.time];
    NSString *sDate = [[NSString alloc] initWithFormat:@"%@",taskObj1.date];

    //Configure cell if null
    if (cell == nil) {
        //I have written a custom init method to take parameters and assign label text values
        cell = [[TaskCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier name:sName location:sLoc time:sTime date:sDate];
    }
return cell;
} 
```

# java - 如何在java中检查字符串变量是否包含负值

> ID：11625029
> 
> 赞同：1
> 
> 时间：2012-07-24T06:05:01.723
> 
> 标签：java

我需要对字符串变量设置负值约束。例如：--

```
string zeroval = "0.0000"
String x = "";
if (x==null) || (x.equals(zeroval)) { // code which checks if string x has 0 or null value
              x = "--"                // replace it by --
} 
```

同样，我想添加另一段代码来检查字符串 x 是否包含任何负值（例如：）`"-0.025"`并将其替换为 -- 上面的字符串 x 不应包含空/零/负值

请帮忙

注意：-为了添加负值检查将字符串转换为浮点数，因为我不能使用模式匹配技术，例如：- x.equals("-")

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T06:08:16.010

您的输入数据是否总是包含有效数字？如果是这样，您可以使用：

```
 BigDecimal number = new BigDecimal(text);
 if (number.compareTo(BigDecimal.ZERO) <= 0) {
     text = "--";
 } 
```

这将验证它确实*是*一个数字以及执行检查。此外：

*   它处理 0 的其他表示，例如“0.00”、“0”、“+0”
*   它用于`BigDecimal`避免二进制浮点表示中的异常（例如，一个非常小的正值被视为 0）。不太可能成为问题，但基本上你*有*十进制数据，所以你不妨这样解析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:07:38.630

使用包装类将其转换为整数或双精度。

```
String number="12.3434"
if(Double.parseDouble(number)<0)
//do stuff here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:08:15.480

您可以检查字符串是否以“-”开头：

```
if (x==null) || (x.equals(zeroval) || x.startsWith("-")) {
  x = "--";
} 
```

我不禁觉得您使用字符串来表示数字数据是不明智的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T06:08:31.247

您可以使用[`Double.parseDouble(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29)或[`Float.parseFloat (String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Float.html#parseFloat%28java.lang.String%29)。这些方法将帮助您分别获得 a`double`或 a `float`。

在此之后，您可以轻松检查该值是否为负。

# python - sqlalchemy 不删除错误行

> ID：11625030
> 
> 赞同：0
> 
> 时间：2012-07-24T06:05:07.057
> 
> 标签：python, postgresql, sqlalchemy

我使用 sqlalchemy 编写了以下函数（我的底层数据库是 PostgreSQL 8.4）。我有以下架构：

```
CREATE TABLE temporary_data_key (
                        id                          SERIAL PRIMARY KEY,
                        key                         VARCHAR(36) NOT NULL
                        );
CREATE UNIQUE INDEX idxu_temp_data_nm ON temporary_data_key (key);

CREATE TABLE temporary_data (
                        key_id                      INTEGER REFERENCES temporary_data_key(id) ON UPDATE CASCADE ON DELETE RESTRICT NOT NULL,
                        id_value                    INTEGER CHECK (id_value > 0) NOT NULL
                        ); 
```

如果发生错误，我希望该函数能够自行清理（即删除temporary_table_key 表中生成的键） - 由于某种原因，发生异常时不会清除该表。

这是功能：

```
def storeIdsInTemporaryTable(dbinfo, id_list):
    conn = dbinfo['db_connection']
    metadata = dbinfo['metadata']
    tableinfo = Table('temporary_data', metadata, autoload=True)
    datarows = []

    temp_dbinfo = {'db_connection': conn, 'table': tableinfo, 'datarows': datarows }

    guid = genutils.getGUID()

    sql = "INSERT INTO temporary_data_key (key) VALUES ('{0}') RETURNING id".format(guid)
    key_id = executeSQLonDbConnection(temp_dbinfo, sql, return_field='id')

    for id_value in id_list:
        datarows.append( { 'key_id': key_id, 'id_value': id_value } )

    try:
        insertToDb(temp_dbinfo)
    except Exception as e:
        print 'ERROR:',e
        guid = None # to indicate an error occured
        if key_id:
            conn.execute("DELETE FROM temporary_data_key WHERE key='{0}'".format(key_id))

    return guid 
```

任何人都可以发现为什么该函数没有清理temporary_data 键作为异常处理的一部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:33:27.697

我找到了解决方案。

最后一行应该是：

```
if key_id:
    conn.execute("DELETE FROM temporary_data_key WHERE key='{0}'".format(guid)) 
```

# dart - 是否可以将命令行参数传递给 spawnUri() 的新隔离

> ID：11625031
> 
> 赞同：4
> 
> 时间：2012-07-24T06:05:07.757
> 
> 标签：dart, dart-isolates

使用 spawnUri() 启动新的隔离时，是否可以将命令行参数传递给新的隔离？

例如：命令行：

```
dart.exe app.dart "Hello World" 
```

在 app.dart

```
#import("dart:isolate");
main() {
  var options = new Options();
  print(options.arguments);    // prints ["Hello World"]
  spawnUri("other.dart");
} 
```

在其他.dart

```
main() {
  var options = new Options();
  print(options.arguments);   // prints [] when spawned from app.dart.
                              // Is it possible to supply 
                              // Options from another isolate?
} 
```

虽然我可以通过它的 SendPort 将数据传递到 other.dart，但我想要的具体用途是使用另一个尚未通过 recievePort 回调创建的 dart 应用程序（例如 pub.dart 或任何其他命令行应用程序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:20:47.507

您的示例未*使用*当前稳定的 SDK调用`print(options.arguments);`other.dart 。

 *然而

```
spanUri("other.dart"); 
```

产生一个 Uri。*那么，如果您可以通过以下方式找到参数/值*对，如何`spawnUri("other.dart?param=value#orViaHash");`尝试？

 *```
print(options.executable);
print(options.script); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T20:01:09.787

据我所知，目前的答案是否定的，并且很难通过消息传递来模拟，因为这些选项在 main() 中不可用。

我认为这里有两个很好的功能要求。一个是能够在 spawn() 上传递选项，以便脚本可以从根隔离或衍生隔离运行相同的。

另一个可用于实现第一个功能的功能是一种在调用 main() 之前传递由库处理的消息的方法，以便 main() 所依赖的对象可以使用来自生成隔离的数据进行初始化。**

# database - 从依赖表或独立表中选择值？

> ID：11625034
> 
> 赞同：-1
> 
> 时间：2012-07-24T06:05:24.390
> 
> 标签：database, primary-key

我有三个表 Employee 表、employeeDependents 表和 Medicare 表。我要进行的程序是为雇员或其家属提供医疗服务。现在我想将雇员或家属的主键放在医疗保险表中。

我的问题是如何从两个表中获取一个值？从员工到员工依赖是一对多的关系。

希望你能理解。

以下是几张照片的链接 [https://www.facebook.com/media/set/?set=a.3811558138512.2159864.1564273389&type=1&l=a2c0c07671&subject=DataBase](https://www.facebook.com/media/set/?set=a.3811558138512.2159864.1564273389&type=1&l=a2c0c07671&subject=DataBase)堆栈溢出问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T07:00:40.127

看起来您想将 Emp 表和 EmpDep 表与单个表 Medicare 连接起来。您是否将任何离散 id 分配给 EmpDependents？如果是这样，那么在笏标准？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:13:41.177

我正在猜测：

1) 员工有一个 ID（例如“employee#”），

2）员工家属也有一个（唯一的）ID，以及员工的外键#

3) “Medicare”有一个 ID，可能还有一列表明患者是雇员还是雇员的家属

问：从“medicare”表中给定员工的医疗记录，您能否成功链接回员工表？

问：“医疗保险”表中的员工家属究竟是如何“知道”的？

问：这是家庭作业吗？

# c# - DataTable OnRowChanged 事件引发两次？

> ID：11625038
> 
> 赞同：0
> 
> 时间：2012-07-24T06:05:36.203
> 
> 标签：c#, events, datatable

我想在使用 SqlDataAdapter 填充数据时收听 RowChanged 事件。它有效，但是尽管数据没有改变，但事件还是引发了两次。有人可以解释一下为什么吗？我能做些什么才能只加注一次？

```
class Program
{
    static void Main(string[] args)
    {
        string connectionString = "myConnectionString";

        var dataTable = new DataTable();

        dataTable.RowChanged += new DataRowChangeEventHandler(OnDataTableRowChanged);

        using (var sqlCon = new SqlConnection(connectionString))
        {
            SqlDataAdapter adapter = new SqlDataAdapter();

            adapter.SelectCommand = new SqlCommand("select * from TableX", sqlCon);

            adapter.Fill(dataTable);
        }

        dataTable.RowChanged -= new DataRowChangeEventHandler(OnDataTableRowChanged);
    }

    static void OnDataTableRowChanged(object sender, DataRowChangeEventArgs e)
    {
        var table = (DataTable)sender;

        Console.WriteLine("line: " + e.Row[0] + ", RowCount: " + table.Rows.Count);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:23:02.617

它将为 ADD 触发两次，为 COMMIT 触发一次。

检查 e.Action 它会给你它被解雇的行动

# ios - facebook SBjsonparser 泄漏

> ID：11625039
> 
> 赞同：1
> 
> 时间：2012-07-24T06:05:49.190
> 
> 标签：ios, facebook, json

所以让你了解正在发生的事情的最好方法可能是向你展示这个

[http://img.photobucket.com/albums/v246/homojedi/Screenshot2012-07-24at135229.png](http://img.photobucket.com/albums/v246/homojedi/Screenshot2012-07-24at135229.png)

奇怪的是，我没有参与，因为这是 facebook ios SDK 正在调用所有这些 SBJson 解析器的东西，因为我不知道它的存在，直到我进行内存泄漏测试，因为我的应用程序告诉我它有内存警告1级或2级。

您可能需要一些代码，因为您可能会感到困惑，而我将大多数代码简化为这个，它似乎仍然会发生

```
-(void)OnLoad
{
_permissions = [[NSArray arrayWithObjects:@"read_stream", @"publish_stream", nil] retain];

if( _facebook == nil )
{
    _facebook = [[Facebook alloc] initWithAppId:@"359953307393080" andDelegate:self];
}

[self CheckForPreviousAccessToken];

if(_isConnected)
{
    [_facebook requestWithGraphPath:@"me" andDelegate:self];
    [_facebook requestWithGraphPath:@"me/friends?fields=installed" andDelegate:self];
    [_facebook requestWithGraphPath:@"me/friends" andDelegate:self];

}
}

- (BOOL) CheckForPreviousAccessToken
{
_isConnected = NO;

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

if( [defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"] )
{
    _facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
    _facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];

    if(![_facebook isSessionValid])
    {
        [_facebook authorize:nil];
        _isConnected = NO;
    }
    else 
    {
        _isConnected = YES;
    }
}

return _isConnected;
} 
```

任何人都知道是什么导致了这些大量泄漏？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:40:12.060

通过魔法和/或巫术，这个小问题已经不复存在，最奇怪的是我没有明确地试图纠正它……我只是在做一些一般性的泄漏修补，我一定是像现在这样严重地泄漏了一些东西不再出现在泄漏仪器中......我很抱歉，我应该尝试立即修复泄漏，而不是让它们代替集成更多功能。

# android - 框架集在 android 4.0 webview 中不起作用

> ID：11625041
> 
> 赞同：2
> 
> 时间：2012-07-24T06:06:00.570
> 
> 标签：android, android-webview, android-browser

我想在一个网页中使用两个 html，所以我选择在 html 中实现框架集。它在除 android4.0 之外的所有 android 版本中都能正常工作。如果我在默认浏览器中的 html 文件工作正常，但在 webview 中只加载一个帧而不是另一个帧，即第一帧被第二帧覆盖，所以它看起来只有第二帧正在加载。

这是我在 webview 中加载 html 的代码。

```
 WebView web=new WebView(this);
 String url="<html><frameset cols=\"25%,25%\" FRAMEBORDER=NO FRAMESPACING=0 BORDER=0><frame src=\"file:///android_asset/preview.html"
          +"\" /><frame src=\"file:///android_asset/preview.html\" /> </frameset></html>";

web.loadDataWithBaseURL("file:/"+baseurl+"/",url, "text/html", "utf-8",""); 
```

我不知道为什么它在 android4.0 中不支持 android webview 是否不接受 4.0 中的框架？如果有人知道请帮助我..

# android - android中的库来创建电子邮件客户端

> ID：11625046
> 
> 赞同：0
> 
> 时间：2012-07-24T06:06:10.043
> 
> 标签：android, email-client

android中是否有任何库来创建电子邮件客户端？我在网上搜索过，但我看到每个人都建议使用 java 邮件库。我是 android 新手，只是想问一下 android 中是否有任何库，或者我应该使用 java 邮件库。

# javascript - 如何获取html页面中所有p和h标签的值，不包括所有其他标签

> ID：11625048
> 
> 赞同：2
> 
> 时间：2012-07-24T06:06:22.010
> 
> 标签：javascript, android, html

我正在尝试将 HTML 页面加载到我的应用程序中。我只想显示 HTML 页面的内容。请帮助我使用 javascript 函数，我可以在其中循环所有**p**标签并获取标签的内容以在**TextView**`<p>`中显示为字符串。

 **```
<html><body>" +
        "<h1>First</h1><p>text text text</p>" +
        "<h1>Second</h1>more text" +
         <p>text text text</p>
           <p>text text text</p>
          <p>text text text</p>
        "</body></html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T06:26:34.403

如果您不想使用 jQuery，请执行以下操作：

```
var paragraphs = document.getElementsByTagName("p");
for(var i = 0; i < paragraphs.length; i++)
{
    alert(paragraphs[i].innerHTML);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T06:38:21.813

要通过分隔选择器查找，您可以在 jQuery 中用逗号编写它们

```
$("p, :header").each(function(index, element){ 
   console.info($(element).html());  
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T06:14:48.507

这里一行 jquery 脚本就可以了。`$("body p").text()`

如果你想得到每`<p>`行，你也可以这样做

```
$("body").children("p").each(function(e,v){
    alert($(v).text());
});​ 
```**

# java - Java中的协方差和重载

> ID：11625049
> 
> 赞同：34
> 
> 时间：2012-07-24T06:06:23.470
> 
> 标签：java, overloading, covariance

```
class A {
   boolean f(A a) { return true; }
}
class B extends A {
   boolean f(A a) { return false; } // override A.f(A)
   boolean f(B b) { return true; }  // overload A.f
}

void f() {  
   A a = new A();
   A ab = new B();
   B b = new B();
   ab.f(a); ab.f(ab); ab.f(b); //(1) false, false, *false*
   b.f(a); b.f(ab); b.f(b);    //(2) false, false, true
} 
```

你能解释一下第一行最后一个错误的输出，为什么它不是真的？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-24T06:12:03.950

> 你能解释一下第一行最后一个错误的输出，为什么它不是真的？

的编译时类型`ab`是`A`，因此编译器（执行重载解析）确定唯一有效的方法签名是`f(A a)`，所以它调用它。

在*执行*时，该方法签名被执行为`B.f(A a)`因为`B`覆盖它。

永远记住，*签名*是在编译时选择的（重载），但*实现*是在执行时选择的（覆盖）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:13:18.877

嗯..因为你调用的是 A 的类型。所以你只能调用 f(A a) 的版本。在 B 中返回 false。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T06:14:53.573

由于您使用的是 A 的对象类型，因此您只能调用 f(AA)。因为 B 覆盖它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-04T08:12:34.160

> 你能解释一下第一行最后一个错误的输出，为什么它不是真的？

否则认为：-

尝试在 B 类下面评论（覆盖代码）

```
boolean f(A a) { return false; } // override A.f(A) 
```

并在此方法中在 A 类中添加 syso -->`boolean f(A a){....}`

然后你会看到，`ab.f(A a)`或者`ab.f(B b)`只会调用`f(A a)`A 类的方法。

> 因为 ab 是 A 型。

另请注意 - 您也无法从对象 ab 调用 B 类的任何方法。

希望这能进一步澄清上述精彩答案。

最后，您现在可能会寻求这个 -->[为什么我们在 Java 中为子对象分配父引用？](https://stackoverflow.com/questions/12159601/why-do-we-assign-a-parent-reference-to-the-child-object-in-java)

# php - 站点地图页面和 Sitemap.xml 文件中的站点地图树是否必须针对 seo 进行交叉检查

> ID：11625056
> 
> 赞同：0
> 
> 时间：2012-07-24T06:07:29.027
> 
> 标签：php, seo, sitemap

站点中的站点地图页面和我们与网站文件一起添加的sitemap.xml应该相同吗？

站点地图页面是否应该描述 sitemap.xml 中的所有内容？

我想为我网站中的所有页面创建站点地图页面。该网站包含近 500 个页面和一个 PHP Smarty 模板系统。我在哪里可以找到 SEO 友好的 PHP 站点地图生成脚本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:08:31.100

> 站点地图页面是否应该描述 sitemap.xml 中的所有内容？

不，xml 地图适用于搜索引擎，而不适用于您的网站用户。在某些情况下，它还包含部分页面，并链接到页面以帮助搜索引擎对站点进行索引

html 地图供用户使用，应包含指向您网站中大多数主要类别和重要页面的相关链接。

PHP 的站点地图生成脚本可以在关于站点地图的 google wiki 页面上找到，网址为[http://code.google.com/p/sitemap-generators/wiki/SitemapGenerators](http://code.google.com/p/sitemap-generators/wiki/SitemapGenerators)

# c# - Redgate SQL Connect 和静态数据

> ID：11625060
> 
> 赞同：0
> 
> 时间：2012-07-24T06:07:42.393
> 
> 标签：c#, sql-server, redgate

我`Redgate SQL Connect`在 C# 中使用并希望激活我的 SQL Connect 项目的数据文件夹来定义静态表。我能怎么做？

编辑：静态表是具有静态数据的表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:28:47.273

SQL Connect 当前不支持源控制静态数据。已经意识到需要实施它，您可以在此处将您的声音添加到列表中：[http ://redgate.uservoice.com/forums/140800/suggestions/2450911](http://redgate.uservoice.com/forums/140800/suggestions/2450911)

SQL Source Control 是一个 SSMS 插件，支持静态数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:00:12.513

布赖恩是对的。目前尚不支持此功能，但会在适当的时候提供。您可以使用 SQL Source Control 添加静态数据。要部署静态数据更改，您可以将 SQL 数据比较与 SQL Source Control 和 SQL Connect 分开使用。

# python - 无法使用 os.remove 删除文件夹（WindowsError：[错误 5] 访问被拒绝：'c:/temp/New Folder'）

> ID：11625062
> 
> 赞同：26
> 
> 时间：2012-07-24T06:08:06.453
> 
> 标签：python, windowserror

我正在处理一个测试用例，我为此创建了一些子目录。但是，我似乎不再有权删除它们。我的 UA 是管理员帐户 (Windows XP)。

我第一次尝试：

```
folder="c:/temp/" 
for dir in os.listdir(folder): 
    os.remove(folder+dir) 
```

接着

```
folder="c:/temp/" 
os.remove(folder+"New Folder") 
```

因为我确定“新文件夹”是空的。但是，在所有情况下，我都会得到：

```
Traceback (most recent call last): 
  File "<string>", line 3, in <module> 
WindowsError: [Error 5] Access is denied: 'c:/temp/New Folder' 
```

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-24T06:18:50.797

`os.remove`需要一个**文件路径**，`OSError`如果 path 是一个**目录**则引发。

尝试`os.rmdir(folder+'New Folder')`

这将：

> 移除（删除）目录路径。仅在目录为空时有效，否则会引发 OSError。

使用以下方法制作路径也更安全**`os.path.join`**：

```
os.path.join("c:\\", "temp", "new folder") 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-24T06:47:26.880

尝试内置的shutil模块

```
shutil.rmtree(folder+"New Folder") 
```

这会递归地删除一个目录，即使它有内容。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-05-06T08:30:07.333

对于 Python 3.6，文件权限模式应为 0o777：

```
os.chmod(filePath, 0o777)
os.remove(filePath) 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-11-08T16:24:48.700

`os.remove()`仅适用于文件。它不适用于目录。根据[文档](http://docs.python.org/2/library/os#os.remove)：

> os.remove(path) 移除（删除）文件路径。如果 path 是目录，则会引发 OSError；请参阅下面的 rmdir() 以删除目录。这与下面记录的 unlink() 函数相同。在 Windows 上，尝试删除正在使用的文件会引发异常；在 Unix 上，目录条目被删除，但分配给文件的存储空间在原始文件不再使用之前不可用。

用于[`os.removedirs()`](http://docs.python.org/2/library/os#os.removedirs)目录

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-07-24T06:54:52.133

你可以使用 Shutil 模块删除目录及其子文件夹

```
import os
import shutil

for dir in os.listdir(folder):
    shutil.rmtree(os.path.join(folder,dir)) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-04-28T13:50:25.203

如果要删除文件夹，可以使用

```
os.rmdir(path) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-01-30T23:55:25.093

使用`os.rmdir`而不是`os.remove`删除文件夹

```
os.rmdir("d:\\test") 
```

它将从`d:\\`目录中删除测试文件夹

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-09-18T09:33:40.443

如果它是一个目录，那么只需使用：

```
os.rmdir("path") 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-18T05:56:16.520

您无法删除文件夹的原因是因为要删除 C: 驱动器中的子文件夹，您需要管理员权限 在 python 中调用管理员权限或执行以下 hack

使用以下 shell 命令创建一个简单的 .bat 文件

```
del /q "C:\Temp\*"

FOR /D %%p IN ("C:\temp\*.*") DO rmdir "%%p" /s /q 
```

将其保存为 file.bat 并从您的 python 文件中调用此 bat 文件

Bat 文件将处理从 C: 驱动器中删除子文件夹

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-19T11:15:09.280

文件处于只读模式，因此通过`os.chmod()`函数更改文件权限，然后尝试使用`os.remove()`.

前任：

将文件权限更改为`0777`然后删除该文件。

```
os.chmod(filePath, 0777)
os.remove(filePath) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-06-23T13:44:39.287

**无法使用 os.remove 删除文件夹**

```
import os

if os.path.exists("demofile.txt"):
  os.remove("demofile.txt")
else:
  print("The file does not exist") 
```

# ruby-on-rails - 如何使用范围过滤 active_admin 中的多对多关联

> ID：11625066
> 
> 赞同：1
> 
> 时间：2012-07-24T06:08:27.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3, scope, associations, activeadmin

我只想在我的索引页面中添加范围，这样我就可以过滤`legal_cases`哪些`specific role`包含在他们的角色关联中，Role 和 LegalCase 有我尝试过的多对多关联

```
ActiveAdmin.register LegalCase do
  scope :film_maker, joins(:roles).where('roles.name = ?', "Film Maker")
end 
```

但我收到了这个错误

```
undefined method `joins' for #<ActiveAdmin::ResourceDSL:0x9ca28f4> 
```

任何帮助请我应该在这里使用什么而不是加入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-28T06:50:23.297

我有一个类似的案例，我在我的应用程序中这样做

```
ActiveAdmin.register Restaurant do
  scope("All"){|scope| scope.order("created_at desc")}

    Cuisine.all.each do |c|
      scope(c.name) { |scope| scope.joins(:cuisines).where("cuisines.id=?",c.id)}
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T18:14:08.420

为您正在过滤的模型添加范围，例如

```
class LegalCase < ActiveRecord::Base

  ...

  scope :film_makers, -> { joins(:roles).where(roles: { name: 'Film Maker' }) }
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T04:31:10.200

我用过这样的

```
ActiveAdmin.register LegalCase do

  controller do
    def scoped_collection
      end_of_association_chain.joins("left join users on users.id = bookings.user_id").select('bookings.*, users.*').order('users.name asc')
    end
  end
end 
```

# iphone - 摇动动作夹在其他视图中？

> ID：11625068
> 
> 赞同：0
> 
> 时间：2012-07-24T06:08:33.300
> 
> 标签：iphone, view, uinavigationcontroller, accelerometer, pushviewcontroller

我有一个简单的应用程序，它包含 2 个视图。顶视图有一个加速度计代表。当用户在屏幕上显示顶视图时摇晃时。然后调用 pushviewcontroller 并出现子视图。问题是当子视图出现时，我摇晃它，它仍然捕捉到摇晃动作并导致我出错。所以帮助我。提前致谢。

```
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {
const float violence = 1.2;
static BOOL beenhere;
BOOL shake = FALSE;

if (beenhere) return;
beenhere = TRUE;

if (acceleration.x > violence || acceleration.x < (-1* violence))
    shake = TRUE;
if (acceleration.y > violence || acceleration.y < (-1* violence))
    shake = TRUE;
if (acceleration.z > violence || acceleration.z < (-1* violence))
    shake = TRUE;
if (shake) {
    [self playSound:@"suzu"];

    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"noVib"] == NO) {
        AudioServicesPlaySystemSound(kSystemSoundID_Vibrate);
    }
    [[UIAccelerometer sharedAccelerometer] setDelegate:nil];
    [self presentModalViewController:mMoviePlayer animated:YES];
    [self play]; 
} 
```

当调用播放方法并且视频播放完毕时，将调用 pushviewcontroller 并出现子视图

下面是一个处理所有电影播放器​​内容的类。

```
- (void) initPlayer{
if (mMoviePlayer != nil){
    [mMoviePlayer release];
}

mMoviePlayer = [[MoviePlayerViewController alloc] initWithContentURL:[self createURL]];
[[NSNotificationCenter defaultCenter] removeObserver:mMoviePlayer 
                                                name:MPMoviePlayerPlaybackDidFinishNotification object:mMoviePlayer.moviePlayer];
[mMoviePlayer.moviePlayer setShouldAutoplay:NO];
mMoviePlayer.moviePlayer.backgroundView.backgroundColor = [UIColor blackColor];
mMoviePlayer.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
mMoviePlayer.moviePlayer.controlStyle = MPMovieControlStyleNone;

[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(moviePlayBackDidFinish:) 
                                             name:MPMoviePlayerPlaybackDidFinishNotification 
                                           object:mMoviePlayer.moviePlayer];

[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(moviePreloadDidFinish:) 
                                             name:MPMoviePlayerLoadStateDidChangeNotification 
                                           object:mMoviePlayer.moviePlayer];

- (void) moviePlayBackDidFinish:(NSNotification*)notification 
```

{

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:NO];        
[[NSNotificationCenter defaultCenter] removeObserver:self
                                                name:MPMoviePlayerPlaybackDidFinishNotification
                                              object:mMoviePlayer.moviePlayer];
[self dismissModalViewControllerAnimated:YES];
[mMoviePlayer release];
mMoviePlayer = nil;
[self toNext]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:13:22.707

我首先想到的是跟踪 mMoviePlayer 是否被推送。

```
if (shake && mPlayerPushed) {
    [self playSound:@"suzu"];

    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"noVib"] == NO) {
        AudioServicesPlaySystemSound(kSystemSoundID_Vibrate);
    }
    [[UIAccelerometer sharedAccelerometer] setDelegate:nil];
    [self presentModalViewController:mMoviePlayer animated:YES];
    [self play]; 
    mPlayerPushed = YES;
} 
```

在调用dismissModalViewControllerAnimated:YES 之后的moviePlayBackDidFinish 方法中，您应该将mPlayerPushed 设置为NO。

或者您可以使用属性模态视图控制器来查看是否显示模态视图。这我还没有测试过，但它应该可以工作。

> modalViewController：活动模态视图的控制器——即临时显示在接收者管理的视图之上的视图。（只读）

```
@property(nonatomic, readonly) UIViewController *modalViewController 
```

因此，您将拥有的不是 bool mPlayerPushed：

```
if(shake && something.modalviewController == nil){ present mMoviePlayer } 
```

# mysql - 如果列的默认 NULL 值更改为某个值，则 MySQL 触发器不会执行

> ID：11625069
> 
> 赞同：1
> 
> 时间：2012-07-24T06:08:33.447
> 
> 标签：mysql

这是我编写的 MYSQL 触发器：

```
DELIMITER //
CREATE TRIGGER updtrigger BEFORE UPDATE ON myTable
    FOR EACH ROW
    BEGIN
    IF (OLD.column IS NOT NULL AND NEW.column IS NOT NULL AND NEW.column != OLD.column) THEN 
        SET NEW.col_updated_on = NOW();
    END IF;
END //
DELIMITER ; 
```

如果`column`有一个值（比如“电影”），我更新它以获得新值“电影，音乐”，触发器被执行并且`col_updated_on`应该具有当前时间戳。

但是，当`column`为 NULL 并且我更新它以获取新值“电影”时，该`col_updated_on`列仍将显示旧时间戳。

请让我知道我必须做些什么改变来检查这种情况。

提前感谢您的回复。

我有另一个问题。下面的伪可能吗？

这是我的两张表 -
`myTable`(id, someId, col_updated_on); `myOtherTable`(id, col1, col2);

`myTable``myOtherTable`.someId 与.id具有一对一关系

我想在.col1 和.col2 更新时更新`myTable`.col_updated_on 。我该怎么做呢？我应该使用“更新前”还是“更新后”？`myOtherTable``myOtherTable`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T06:13:17.200

使用[`NULL`-safe 相等运算符](http://dev.mysql.com/doc/en/comparison-operators.html#operator_equal-to)：

```
IF NOT OLD.column <=> NEW.column THEN 
```

但是，请注意 MySQL 的[`TIMESTAMP`](http://dev.mysql.com/doc/en/datetime.html)数据类型可以（并且默认情况下会）在记录更新时[自动更新，因此不需要这样的触发器。](http://dev.mysql.com/doc/en/timestamp-initialization.html)

而且，您*真的*不应该将多个项目存储在 MySQL 等关系数据库中的分隔字符串中。阅读[数据库设计](http://r937.com/relational.html)，尤其是一对多关系：如果有一个单独的表会更好，其中每条记录将一个标识符（键）从现有（外部）表链接到单个项目；然后根据查询的需要将[这些](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)表连接在一起。

# bash - 输出变量？（重击）

> ID：11625078
> 
> 赞同：0
> 
> 时间：2012-07-24T06:10:02.883
> 
> 标签：bash

我正在尝试将变量放入放入文件的行中。

代码如下所示：

```
echo "cd ~/Desktop/BukkitServer/" >> start.command
echo "java -Xms$ramM -Xmx$ramM -jar CraftBukkit.jar" >> start.command
chmod +x start.command 
```

看看我是如何把 $ram 放在第二行的？它最终成为

```
java -XmsM -XmxM -jar CraftBukkit.jar 
```

我如何让它把任何 $ram 放在适当的位置？

谢谢 ：）

编辑：

`echo 'java -Xms{$ram}M -Xmx{$ram}M -jar craftbukkit.jar' >> start.command`

生产`java -Xms{$ram}M -Xmx{$ram}M -jar craftbukkit.jar`

`echo "java -Xms{$ram}M -Xmx{$ram}M -jar craftbukkit.jar" >> start.command`

生产`java -Xms{120}M -Xmx{120}M -jar craftbukkit.jar`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T06:15:17.353

`$`用于标记变量。使用您的命令，您告诉 echo 将`java -Xms`其后跟文件中`$ramM`变量的内容。

您必须为变量定义一个值

```
ram=128
echo "java -Xms${ram}M" 
```

会产生

```
java -Xms128M 
```

请注意，您必须使用方括号`{}`来分隔变量名，否则 shell 将不知道您的变量在哪里结束。

如果要输入文字`$`，则必须使用单引号（shell 不会解释字符串的内容）。

```
echo 'java -Xms$ramM' 
```

生产

```
java -Xms$ramM 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:16:55.757

将您的第二行更改为：

`echo 'java -Xms'$ram'M -Xmx'$ram'M -jar CraftBukkit.jar' >> start.command`

# c# - 如何将 VC++ 代码转换为 C#？

> ID：11625083
> 
> 赞同：0
> 
> 时间：2012-07-24T06:10:16.947
> 
> 标签：c#, visual-c++, c#-4.0, c#-3.0

我有 VC++ 代码，但我想将其转换为 C#。我尝试使用不同的软件，但它不会将 VC++ 的某些功能转换为 C#。我该怎么做？或者有什么方法可以直接在 c# 中使用 VC++ 代码？

例如这是 VC++ 方法，我想将其转换为 c#

```
 void init_gf (int poly)
  {

int m,b,p,v;

   // Return storage from previous setup

 if (log)

{

      free (log);

      free (alog);

      free (rspoly);

      rspoly = NULL;
   }

   // Find the top bit, and hence the symbol size

   for (b = 1, m = 0; b <= poly; b <<= 1)

      m++;

   b >>= 1;

   m--;

   gfpoly = poly;

   symsize = m;

   // Calculate the log/alog tables

   logmod = (1 << m) - 1;

   log = (int *) malloc (sizeof (int) * (logmod + 1));

   alog = (int *) malloc (sizeof (int) * logmod);

   for (p = 1, v = 0; v < logmod; v++)

   {

      alog[v] = p;

      log[p] = v;

      p <<= 1;

      if (p & b)

         p ^= poly;

   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:16:56.460

你不能只是自动转换它。

转换纯逻辑可能是可能的，但 C++ 和 C# 使用完全不同的库。C++ 使用 C 运行时、MFC 等，而 C# 使用 .NET BCL。您至少需要学习 C++ 代码使用的类和方法的 .NET 等效项。

例如，您可以改用数组来转换 malloc 调用：
`(int*) malloc (sizeof (int) * logmod);`-->`new int[logmod]();`

如果代码很多，您可以考虑使用 C++/CLI 并创建一个混合模式库，方法是将 C++ 代码保持原样并公开充当代理的托管类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:33:35.317

> 有没有办法直接在 C# 中使用 VC++ 代码？

C++/CLI 应用程序由 .NET 管理，如果是这种情况，那么您只需在 C# 项目中添加对项目或 dll 的引用并正常使用它

如果它是本机非托管代码，您可以使用 C# 或 C++/CLI 为其创建一个包装器，或者您可以使用 P/Invoke 直接调用它。

**编辑：**
插入符号运算符我错了，有点匆忙回答，对此感到抱歉！删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:16:25.023

您有以下选项

1.  仅将未自动转换为手动移植到 C# 的部分代码
2.  将 VC++ 代码设为 COM 可见并使用 .NET 中的 COM 互操作
3.  用 C# 完全重写组件并使用 VC++ 代码仅引用应用程序逻辑。

可能会发生转换后的代码包含不安全操作并且需要使用不安全标志进行编译的情况。我建议您通过查看自动转换的代码和手头的要求来决定是否值得使用自动转换器进行转换。

# android - 取消 ASyncTask

> ID：11625089
> 
> 赞同：4
> 
> 时间：2012-07-24T06:10:40.643
> 
> 标签：android

完成时可以`AsyncTask`取消`onPostExecute()`吗？

还是任务一旦`doInBackground()`完成就不能再取消了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T06:18:49.813

据我了解，任务仅在`doInBackground()`状态下运行，`onPostExecute()`意味着任务已完成且无法取消。

`cancel()`尝试取消此任务的执行。如果任务已完成、已被取消或由于其他原因无法取消，则此尝试将失败。如果成功，并且在调用取消时此任务尚未启动，则此任务不应该运行。如果任务已经开始，则该`mayInterruptIfRunning`参数确定是否应该中断执行该任务的线程以尝试停止该任务。

调用此方法将导致返回`onCancelled(Object)`后在 UI 线程上调用。`doInBackground(Object[])`调用此方法可确保`onPostExecute(Object)`永远不会调用该方法。调用此方法后，应`isCancelled()`定期检查 from的返回值，`doInBackground(Object[])`以尽早完成任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:21:13.530

覆盖`onCanceled()`方法，请看下面的示例代码：

```
private class UpdateTask extends AsyncTask<Void, Void, Void> {

    private boolean running = true;

    @Override
    protected void onCancelled() {
        running = false;
    }

    @Override
    protected void onProgressUpdate(Void... values) {
        super.onProgressUpdate(values);
        onUpdate();
    }

    @Override
    protected Void doInBackground(Void... params) {
         while(running) {
             publishProgress();
         }
         return null;
    }
 } 
```

# shell - 如何在以下脚本中设置 CPATH 的值。该脚本无法识别以下脚本第二行中的类路径。

> ID：11625092
> 
> 赞同：0
> 
> 时间：2012-07-24T06:10:52.153
> 
> 标签：shell, classpath, ksh

我必须执行以下脚本

```
export CPATH="cpath=.:/mdcode/mtrxmdsb2/WaferChecks/bin/WaferChecksFile.jar"
/sail/lpp/IBM/Java/1.6.0/jre/bin/java \
    -classpath "$CPATH" com/ibm/md/waferchecks/ReadPasswordMain $1 $2 $3 
```

该脚本接受 3 个参数。但是当我从 cmd 提示符运行脚本时，我收到以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com.ibm.md.wafercheck
s.ReadPasswordMain
Caused by: java.lang.ClassNotFoundException: com.ibm.md.waferchecks.ReadPassword
Main
        at java.net.URLClassLoader.findClass(URLClassLoader.java:421)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:652)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:346)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:618)
Could not find the main class: com/ibm/md/waferchecks/ReadPasswordMain.  Program
 will exit. 
```

我知道这是未正确设置类路径变量的问题。我猜我在某处的语法错了。任何人都可以请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:11:47.303

```
export CPATH=".:/mdcode/mtrxmdsb2/WaferChecks/bin/WaferChecksFile.jar" 
```

此外，您不必将 shell 变量放在引号中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:31:30.650

`export CPATH=`从分配行中删除。这迫使 java 查找名称为 .`cpath=.`而不是`.`.

```
#! /bin/bash
jarfile=/mdcode/mtrxmdsb2/WaferChecks/bin/WaferChecksFile.jar
cpath=.:${jarfile?} 
```

您不需要`export`, 因为您将 $cpath 作为参数传递给`java` `-classpath`选项。

* * *

*顺便说一句，您可以在调用 java 之前执行一些检查，以使用以下行消除一些微不足道的错误：*

```
(< ${jarfile?}) || exit # abort on missing or unreadable file[*] 
```

*   `${path:?}` *如果路径变量为空或未定义，则中止*
*   `( < file ) || exit` *是对打开文件进行读取的能力的最小测试。*

*（这是 bash、ksh93 和 zsh 的常用习语。）*

* * *

最终的脚本就变成了：

```
#! /bin/bash
jarfile=/mdcode/mtrxmdsb2/WaferChecks/bin/WaferChecksFile.jar
cpath=.:${jarfile?}
(< ${jarfile?}) || exit

/sail/lpp/IBM/Java/1.6.0/jre/bin/java \
    -classpath "${cpath?}"  \
    com/ibm/md/waferchecks/ReadPasswordMain $1 $2 $3 
```

# java - 如何克隆 JPA 实体

> ID：11625096
> 
> 赞同：55
> 
> 时间：2012-07-24T06:11:04.380
> 
> 标签：java, jpa, orm, entity, clone

我有一个 JPA 实体已经保存在数据库中。
我想要一份它的副本（具有不同的 id），并修改了一些字段。

最简单的方法是什么？像：

*   将它的`@Id`字段设置为`null`并坚持它会起作用吗？
*   我是否必须为实体创建一个克隆方法（复制除 之外的所有字段`@Id`）？
*   有没有其他方法（比如使用克隆框架）？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-24T06:13:54.407

使用`EntityManager.detach`. 它使 bean 不再链接到 EntityManager。然后将 Id 设置为新的 Id（如果是自动的，则为 null），更改您需要的字段并保留。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-07-19T12:44:05.000

使用 EclipseLink 时，您可以使用非常方便的 CopyGroup-Feature：

[http://wiki.eclipse.org/EclipseLink/Examples/JPA/AttributeGroup#CopyGroup](http://wiki.eclipse.org/EclipseLink/Examples/JPA/AttributeGroup#CopyGroup)

一个很大的优点是，它也无需太多的摆弄就可以正确地克隆私有关系。

这是我的代码，用它私有的@OneToMany-relationship 克隆一个播放列表只需几行代码：

```
public Playlist cloneEntity( EntityManager em ) {
    CopyGroup group = new CopyGroup();
    group.setShouldResetPrimaryKey( true );
    Playlist copy = (Playlist)em.unwrap( JpaEntityManager.class ).copy( this, group );
    return copy;
} 
```

确保使用persist() 保存这个新对象，merge() 不起作用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-09-06T04:59:27.893

您最好使用复制构造函数并准确控制需要克隆的属性。

因此，如果您有这样的`Post`实体：

```
@Entity(name = "Post")
@Table(name = "post")
public class Post {

    @Id
    @GeneratedValue
    private Long id;

    private String title;

    @OneToMany(
        mappedBy = "post",
        cascade = CascadeType.ALL, 
        orphanRemoval = true
    )
    private List<PostComment> comments = new ArrayList<>();

    @OneToOne(
        mappedBy = "post",
        cascade = CascadeType.ALL, 
        orphanRemoval = true, 
        fetch = FetchType.LAZY
    )
    private PostDetails details;

    @ManyToMany
    @JoinTable(
        name = "post_tag",
        joinColumns = @JoinColumn(
            name = "post_id"
        ),
        inverseJoinColumns = @JoinColumn(
            name = "tag_id"
        )
    )
    private Set<Tag> tags = new HashSet<>();

    //Getters and setters omitted for brevity

    public void addComment(
            PostComment comment) {
        comments.add(comment);
        comment.setPost(this);
    }

    public void addDetails(
            PostDetails details) {
        this.details = details;
        details.setPost(this);
    }

    public void removeDetails() {
        this.details.setPost(null);
        this.details = null;
    }
} 
```

`comments`复制 a`Post`并将其用作新模板时克隆 没有意义：

```
Post post = entityManager.createQuery(
    "select p " +
    "from Post p " +
    "join fetch p.details " +
    "join fetch p.tags " +
    "where p.title = :title", Post.class)
.setParameter(
    "title", 
    "High-Performance Java Persistence, 1st edition"
)
.getSingleResult();

Post postClone = new Post(post);
postClone.setTitle(
    postClone.getTitle().replace("1st", "2nd")
);
entityManager.persist(postClone); 
```

您需要添加到`Post`实体的是[`copy constructor`](https://vladmihalcea.com/clone-duplicate-entity-jpa-hibernate/)：

```
/**
 * Needed by Hibernate when hydrating the entity 
 * from the JDBC ResultSet
 */
private Post() {}

public Post(Post post) {
    this.title = post.title;

    addDetails(
        new PostDetails(post.details)
    );

    tags.addAll(post.getTags());
} 
```

这是解决实体克隆/复制问题的最佳方法。任何其他试图使该过程完全自动化的方法都忽略了并非所有属性都值得复制这一点。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-09T09:26:33.027

我今天面临同样的问题：我在数据库中有一个实体，我想：

*   从数据库中获取
*   更改其属性值之一
*   创建它的克隆
*   只修改克隆的一些属性
*   在数据库中持久化克隆

我成功地执行了以下步骤：

```
@PersistenceContext(unitName = "...")
private EntityManager entityManager;

public void findUpdateCloneAndModify(int myEntityId) {
  // retrieve entity from database
  MyEntity myEntity = entityManager.find(MyEntity.class, myEntityId);
  // modify the entity
  myEntity.setAnAttribute(newValue);
  // update modification in database
  myEntity = entityManager.merge(myEntity);
  // detach entity to use it as a new entity (clone)
  entityManager.detach(myEntity);
  myEntity.setId(0);
  // modify detached entity
  myEntity.setAnotherAttribute(otherValue);
  // persist modified clone in database
  myEntity = entityManager.merge(myEntity);
} 
```

**备注**：如果我使用'persist'而不是'merge'，最后一步（克隆持久性）不起作用，即使我在调试模式下注意到克隆ID在'persist'命令后已更改！

我仍然面临的问题是我的第一个实体在分离之前没有被修改。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-04T09:28:32.697

您可以使用像 Orika 这样的映射框架。[http://orika-mapper.github.io/orika-docs/](http://orika-mapper.github.io/orika-docs/) Orika 是一个 Java bean 映射框架，它递归地将数据从一个对象复制到另一个对象。它易于配置并提供各种灵活性。

这是我在项目中使用它的方式：添加了一个依赖：

```
 <dependency>
      <groupId>ma.glasnost.orika</groupId>
      <artifactId>orika-core</artifactId>
      <version>1.4.6</version>
</dependency> 
```

然后在代码中使用如下：

```
MapperFactory mapperFactory = new DefaultMapperFactory.Builder().build();
MapperFacade mapper=mapperFactory.getMapperFacade();
User mappedUser = mapper.map(oldUser, User.class); 
```

如果您有许多需要此类克隆的用例，这可能会有所帮助。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-04-19T07:25:19.227

如已接受答案的评论中所述，detatch 将忽略对托管实体的未刷新更改。如果您使用的是弹簧，您还有另一个选择是使用`org.springframework.beans.BeanUtils`

在这里你有`BeanUtils.copyProperties(Object source, Object target)`。这将允许您在不篡改 entityManager 的情况下进行浅拷贝。

**编辑：** 来自 api doc 的引用：“此方法旨在执行属性的“浅复制”，因此不会复制复杂的属性（例如，嵌套的属性）。”

[这篇](https://www.javaworld.com/article/2077578/learn-java/java-tip-76--an-alternative-to-the-deep-copy-technique.html)博文可能会告诉您有关深度复制 Java 对象的更多信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-19T08:12:31.377

我只是尝试将 id 设置为 null 并且它有效

```
address.setId(null);
address = addrRepo.save(address); 
```

将 id 设置为 null 使它保存到具有新 id 的新记录中，因为我自动生成了它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-30T20:32:38.123

ModelMapper 库可用于此目的。

```
public MyEntity clone(MyEntity myInstance) {
    MyEntity newInstance = new MyEntity();
    new ModelMapper().map(myInstance, newInstance);
    return newInstance;
} 
```

只需添加 Maven 依赖项

```
<dependency>
    <groupId>org.modelmapper</groupId>
    <artifactId>modelmapper</artifactId>
    <version>2.3.2</version>
</dependency> 
```

# ruby-on-rails - Ruby On Rails 教程 - Gravatar 注入文本而非图像

> ID：11625098
> 
> 赞同：0
> 
> 时间：2012-07-24T06:11:10.570
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

**问：我怎样才能在不过多破解教程代码的情况下解决这个问题？我想减少远离教程代码。**

我正在阅读 Michael Hartl 的在线 Ruby on Rails 教程。在第 7 章中，我们开始使用 Gravatar 插件引入个人资料照片。（这似乎与 Rails 3 不兼容——但这不是问题。）

我已经让插件工作了，但是我的 Rails 应用程序没有显示 Gravatar 图像。它显示一个文本字符串。即，它将 Gravatar 代码作为文本而不是 html 标签注入。

而不是在文件中显示以下内容：

```
<img class="gravatar" alt="" width="52" height="52" src="http://www.gravatar.com/avatar/b58996c504c5638798eb6b511e6f49af?rating=PG&amp;size=52" /> 
```

它显示了这一点（显示文本，而不是图像）：

```
&lt;img class=&quot;gravatar&quot; alt=&quot;&quot; width=&quot;52&quot; height=&quot;52&quot; src=&quot;http://www.gravatar.com/avatar/b58996c504c5638798eb6b511e6f49af?rating=PG&amp;amp;size=52&quot; /&gt; 
```

我的视图文件包含：

```
<%= gravatar_for user, size: 52 %> 
```

Gravatar 插件包含 (gravatar.rb)：

```
def gravatar(email, options={})
  src = h(gravatar_url(email, options))
  options = DEFAULT_OPTIONS.merge(options)
  [:class, :alt, :size].each { |opt| options[opt] = h(options[opt]) }
  "<img class=\"#{options[:class]}\" alt=\"#{options[:alt]}\" width=\"#{options[:size]}\" height=\"#{options[:size]}\" src=\"#{src}\" />"
end 
```

其他信息：

我正在开发一个运行 Rails 3.2 的 Windows 7 机器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:33:23.400

使用以下方法告诉 Rails HTML 是可信的（因此不应转义）[`html_safe`](http://apidock.com/rails/String/html_safe)：

```
def gravatar_for email, options={}
  # ...
  "<img class=\"#{options[:class]}\" ... />".html_safe
end 
```

背景：http: [//yehudakatz.com/2010/02/01/safebuffers-and-rails-3-0/](http://yehudakatz.com/2010/02/01/safebuffers-and-rails-3-0/)

顺便说一句，您可以并且可能应该通过使用 Rails 的内置[`image_tag`](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-image_tag)帮助程序来巧妙地完全回避这个问题，它具有摆脱那个长而丑陋的硬编码字符串的额外效果：

```
def gravatar_for email, options={}
  options = DEFAULT_OPTIONS.merge options
  options[:size] = "%{size}x%{size}" % options  # image_tag expects e.g. "48x48"

  image_tag gravatar_url(email, options), options
end 
```

（不要让它让`"..." % options`你失望——它基本上是 . 的[简写](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-25) [`sprintf`](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-sprintf)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:35:58.553

尝试

```
<%= raw gravatar_for(user, size: 52) %> 
```

自 rails 3 以来的默认行为是在使用`<%= ... %>`;时转义 HTML `raw`禁用此行为。

[更多细节](http://yehudakatz.com/2010/02/01/safebuffers-and-rails-3-0/)

# jsoup - jsoup 在它给我“未处理的内容类型”之前下载整个文件

> ID：11625099
> 
> 赞同：1
> 
> 时间：2012-07-24T06:11:13.560
> 
> 标签：jsoup

当给定一个 pdf 文件（以及很可能是其他文件）时，JSoup 会下载整个文件，然后再查看内容类型并发现它无法解析它。

有什么方法可以阻止下载 pdf 文件本身，所以它在读取 http 标头后立即抛出“未处理的内容类型”异常？

我当前的代码如下所示：

```
 connection = Jsoup.connect(uri.toString());
        Document doc=connection.get(); 
```

我能想到的唯一解决方案是自己阅读标题，然后是用户 parseBodyFragment 但如果我还需要计算正确的字符集，这似乎需要做很多工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:29:25.210

是的，下载 1.6.4-Pending 解决了这个问题。

# asp.net - 如何使用列分隔符“/”和行分隔符“|”将数据集导出到记事本 使用asp.net？

> ID：11625106
> 
> 赞同：0
> 
> 时间：2012-07-24T06:11:49.243
> 
> 标签：asp.net

需要将数据集数据存储到带有列分隔符“/”和行分隔符“|”的文本文件中 使用 asp.net

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T06:18:27.010

循环遍历数据集中的表并为每个表：

*   创建一个字符串生成器，
*   遍历所有行，
*   循环遍历行中的列。
*   将数据和列分隔符写入字符串，最后一列除外
*   写行分隔符。

你完成了。

调用字符串生成器`ToString()`方法，您将获得输出。

# php - Yii - 打印表格内容

> ID：11625108
> 
> 赞同：0
> 
> 时间：2012-07-24T06:11:55.757
> 
> 标签：php, yii

在我的单页中，我有 2 个表。第一个表是基本信息表。在其他情况下，我将列出要订购的列表。我只想打印第二张桌子。怎么做。

它不是基本打印，使用打印按钮我想单独打印第二个表格的内容。

这是代码，我能够打印第二个表格，但没有应用 css 并且它没有在屏幕上打印。

```
<script language="javascript">
    function printDiv(divName) {
       var printContents = document.getElementById(divName).innerHTML;
       var originalContents = document.body.innerHTML;

       document.body.innerHTML = printContents;

       window.print();

       document.body.innerHTML = originalContents;
    }
</script> 
<table width="100%" class="ticketpopup"  id='first'>
<tr>
    <td class='label-column' width="100">Address1</td>
    <td class='value-column' width="200" ><?echo $Address1?></td>
    <td class='label-column' width="100">Address2</td>
    <td class='value-column' width="200"><?echo $Address2?></td>
</tr>
<tr>
    <td class='label-column' width="100">Suburb</td>
    <td class='value-column' width="200" ><?echo $Suburb?></td>
    <td class='label-column' width="100">State</td>
    <td class='value-column' width="200"><?echo $State?></td>
</tr>
<tr>
    <td class='label-column' width="100">Postcode</td>
    <td class='value-column' width="200" ><?echo $Postcode?></td>
    <td class='label-column' width="100">Telephone1</td>
    <td class='value-column' width="200"><?echo $Telephone1?></td>
</tr>
<tr>
    <td class='label-column' width="100">FAX    </td>
    <td class='value-column' width="200" ><?echo $FAX?></td>
    <td class='label-column' width="100">ISPCode</td>
    <td class='value-column' width="200"><?echo $ISPCode?></td>
</tr>

<tr>
    <td class='label-column' width="100">Email</td>
    <td class='value-column' width="200" ><?echo $Email?></td>
    <td class='label-column' width="100">PosSoftware</td>
    <td class='value-column' width="200"><?echo $PosSoftware?></td>
</tr>
</table>
<table id="second">
<?  
for ($i=0;$i<10;$i++)
{ 
      print "<tr><td class='label-column' width='100'>Item Name</td>
             <td class='value-column' width='200'><?echo $value[$i];?></td>";
}
?>
</table>

<a href="javascript:void(printDiv('second'));">Print</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:21:04.000

您可以尝试使用 jQuery：

```
// You can use var w = window.open('blank.html', 'print'); 
var w = window.open('about:blank', 'print'); 
// Copy your second table
$(w.document.body).html('<table>'+$('#second').html()+'</table>');
w.print(); 
```

# python - 强制 GAE 在部署时更新所有文件

> ID：11625109
> 
> 赞同：0
> 
> 时间：2012-07-24T06:11:57.670
> 
> 标签：python, google-app-engine

有没有办法强制 GAE 上传和更新所有文件，即使它认为它不需要任何更新？
澄清 - 如果我进行快速的背靠背更新，我会发现某些确实被修改过的文件拒绝在线更新。除了分配版本号强制更新，很痛苦，还有别的办法吗？

编辑 - 我指的是 javascript 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:43:43.027

这些文件**确实**会更新，您看不到更新，因为缓存发生在长链的某些地方。为了获得最新的文件，使用 slug 加载文件（例如[http://myapp.com/scripts/script.js](http://myapp.com/scripts/script.js) ? **slug**）并在每次部署应用程序时更新 slug。

# java - Netbeans 运行多模块 Maven 项目

> ID：11625112
> 
> 赞同：3
> 
> 时间：2012-07-24T06:12:04.433
> 
> 标签：java, maven, netbeans-7

我最近尝试使用 NetBeans，但我不明白它如何处理 Maven 多模块项目。

我的项目有相当复杂的模块结构，当我们处理它时（我们主要使用 IntelliJ 社区版），我们不想打开它的所有模块（约 50 个模块），因为加载项目需要几个小时，而是我们'已经创建了一个'工作区'模块：一个`pom.xml`具有包装类型 pom 的文件夹并定义了我想要加载的模块。

假设它定义了模块 A、B、C。

我们在模块 A 中有我们的`main`方法（我们不使用任何类型的容器），它是一个低级基础设施模块。

作为运行时依赖，我们需要 A、B、C。但 A 并不真正依赖于 B、C，而是 B 和 C 依赖于 A（就 Maven 依赖而言）。

所以我们创建了另一个模块，我们称之为 runner，我们在其中定义所有依赖项。我们的工作区`pom.xml`有运行器的模块声明，所以为了从 IntelliJ 运行项目，我们在模块 A 中运行方法 main 时使用“模块运行器的类路径”。

现在，如何使用最新的 Netbeans (7.1.2) 实现相同的效果？

我知道这个问题是一种新手的风格，但我在没有运气的情况下挣扎了很多时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:02:11.743

只是在同一个问题上苦苦挣扎——从 Netbeans wiki 中列出的内容来看，似乎每个模块都代表它自己的 Netbeans 项目，而其他所有内容都将用项目依赖项来表示。见[http://wiki.netbeans.org/MavenBestPractices](http://wiki.netbeans.org/MavenBestPractices)

> 具有模块的项目称为多模块或聚合器项目。模块是这个 POM 列出的项目，并作为一个组执行。NetBeans 中的 Maven 项目将这些模块列为“必需项目”。因此，您只会获得为 Maven 项目填充的所需项目列表，这些项目具有定义了模块的“pom”包装。

# android - 带角的布局背景和可绘制的子布局

> ID：11625114
> 
> 赞同：0
> 
> 时间：2012-07-24T06:12:09.067
> 
> 标签：android, android-layout

任何人都知道如何处理以下问题：

我有一个像灰色边框一样的`Layout`背景，然后我将边框添加到`Layout.`drawable``padding``width`

孩子`Layout`有`drawable`代表 a 的背景`selector`，当按下时它的深灰色（见图），当没有按下时，它的颜色更亮一点。

如何去掉图片中的那个锐边，我不能给 child 添加边距`Layout`，因为按下状态必须完全填充 child `Layout`。

![角落问题](../Images/5dee9a978fd6399e6838d0165b418b67.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T04:32:55.077

似乎这里唯一的解决方案是添加边距并吸住它，或者将背景可绘制对象也调整为圆角。

# oracle11g - 无法分配 x 字节的共享内存

> ID：11625115
> 
> 赞同：0
> 
> 时间：2012-07-24T06:12:16.507
> 
> 标签：oracle11g, oracle-xe, datapump

当我尝试备份我的 oracle 数据库时，出现以下错误。

```
UDE-04031: operation generated ORACLE error 4031
ORA-04031: unable to allocate 16 bytes of shared memory ("shared pool","SELECT j
ob_id FROM v$datapum...","SQLA","tmp")
ORA-06512: at "SYS.KUPV$FT_INT", line 2904
ORA-06512: at "SYS.KUPC$QUE_INT", line 572
ORA-25254: time-out in LISTEN while waiting for a message
ORA-06512: at "SYS.DBMS_DATAPUMP", line 3326
ORA-06512: at "SYS.DBMS_DATAPUMP", line 4551
ORA-06512: at line 1 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:51:33.543

SGA 的共享池部分内存不足。

由于您似乎使用 XE 11g，我假设您使用的是自动内存管理。所以我会首先尝试增加初始化参数`MEMORY_TARGET`（`MEMORY_MAX_TARGET`如果超过 new `MEMORY_TARGET`）。

请注意，您在 XE 中被限制为最大 1GB（请参阅[http://docs.oracle.com/cd/E17781_01/install.112/e18802/toc.htm#BABHJHHC](http://docs.oracle.com/cd/E17781_01/install.112/e18802/toc.htm#BABHJHHC)）。

要更改它以 SYS 身份执行：`alter system set MEMORY_TARGET=1GB;`

要使用附加参数更改`MEMORY_MAX_TARGET`执行`scope=pfile`，您将不得不重新启动实例。

如果这没有帮助（已设置最大 1GB）：部分禁用 AMM 并将初始化参数设置`shared_pool_size`为 250MB（或更多）以扩大共享池（以其他组件为代价，缓冲区缓存，...）并尝试再次。

在 SGA 使用中查看当前分配给池的内存

```
select nvl(pool,name) pool
      ,sum(bytes)/1024/1024 MB 
  from v$sgastat 
 group by nvl(pool,name)
; 
```

如果共享池已经是最大的并且您已经处于 1GB 的限制，`memory_target`那么我担心您对 XE 不走运，应该考虑标准版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-26T09:36:24.880

跟随**GWu 回答**，

这是为**Oracle Express 11.2**节省了我一天的命令（当然您可以更改参数值）

```
ALTER SYSTEM SET MEMORY_MAX_TARGET=1000m SCOPE=SPFILE;

ALTER SYSTEM SET MEMORY_TARGET=1000m SCOPE=SPFILE;

SHUTDOWN IMMEDIATE

STARTUP 
```

# objective-c - 将 NSDictionary 内容转换为 NSData

> ID：11625116
> 
> 赞同：0
> 
> 时间：2012-07-24T06:12:17.787
> 
> 标签：objective-c, nsmutablearray, nsdictionary, nskeyedarchiver

我有一个`NSDictionary`包含字节的（我从 sqlite 中查询得到的）。这是一个示例：

`Rects = "<62706c69 73743030 d4010203 04050824 25542474 6f705824 6f626a65 63747358 24766572 73696f6e 59246172 63686976...`

我想使用 转换它`NSKeyedUnarchiver`，但是正确的方法是什么？

这就是我所做的：

```
NSData *data = [rectDict objectForKey:@"Rects"];
NSArray *rectArray = [NSKeyedUnarchiver unarchivedObjectWithData:data]; 
```

但这会返回*NULL*。我将如何做到这一点？

**注意：**我用作`NSArray`unarchiver 因为要取消归档的数据是一个包含自定义对象的数组。

**更新：** 为了澄清，字典包含归档对象。整个字典**没有**存档，只有内容。这就是我想要得到的。

# jquery - 如何应用 jquery 客户端验证

> ID：11625121
> 
> 赞同：0
> 
> 时间：2012-07-24T06:12:57.073
> 
> 标签：jquery, struts2, client-side-validation

下面是我用来提交表单的代码。问题是我无法应用 jquery 客户端验证。请帮助我使用必要的 jquery 来做同样的事情。提前致谢

```
<s:form name="add" method="post" id="formId" theme="simple">
    <s:textfield name="server.title" cssClass="input_text_lrg" id="Title"/>
    <s:textfield name="server.name" cssClass="input_text" id="Name"/>
    <s:url id="SAVE_ADD" action="save" namespace="/"/>
    <sj:submit name="submit" value="Save" cssClass="input_button" labelposition="left" href="% {SAVE_ADD}" targets="results" />
</s:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:07:38.840

如果您正在寻找 jquery 客户端验证，我建议您访问[此站点](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。这个过程非常简单。

# wcf - 如何将 WCF 用于 Web 应用程序

> ID：11625123
> 
> 赞同：0
> 
> 时间：2012-07-24T06:13:06.850
> 
> 标签：wcf

我需要在我的 Web 应用程序中使用 WCF 服务。我是 wcf 的新手。我创建了服务并在我的 Web 应用程序中添加了服务引用。

它在端点地址中显示 http:localhost。

```
endpoint address="http://localhost:52123/GeneralService1.svc" 
```

我很困惑使用本地主机访问 web 中的 wcf。

有什么方法可以与 wcf 通信/如何启用连接。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:20:03.263

您可以在部署时将 web.config 文件中的此地址修改为 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:38:56.080

WCF 终结点有其 ABC。

A - 地址 B - 绑定 C - 合约

```
<endpoint  address="" binding="wsHttpBinding" contract="WcfService2.IService1"> 
```

您可以通过将部署服务器的 URL 放置在生产环境中托管服务的位置来更改地址。

阅读此内容以了解 WCF 端点[ABC的更多详细信息](http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/abc-of-an-endpoint-in-wcf/)

# struts2 - Struts 2 和 Freemarker 主题滚轮

> ID：11625126
> 
> 赞同：0
> 
> 时间：2012-07-24T06:13:20.487
> 
> 标签：struts2, themes, freemarker

我有一个 struts.xml

`<constant name="struts.ui.theme" value="black" /> <constant name="struts.ui.templateDir" value="template" />`

* * *

但是，如果我更改 `<constant name="struts.ui.theme" value="black" />`为 `<constant name="struts.ui.theme" value="white" />`我正在获取白色主题，我想知道如何在选择框的 onchange 事件表单中更改此设置..？

我已经解决了，但我无法得到这个..如果你想要更多的澄清，我会给它请在你关闭之前让我知道

# java - 为什么 Hibernate 执行 JNDI 查找？

> ID：11625131
> 
> 赞同：3
> 
> 时间：2012-07-24T06:13:42.080
> 
> 标签：java, hibernate, jndi

我有以下配置文件 -

```
<hibernate-configuration>
 <session-factory name="HibernateSessionFactory">
  <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
  <property name="hibernate.connection.password">mysql</property>
  <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/test</property>
  <property name="hibernate.connection.username">root</property>
  <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
  <property name="hibernate.show_sql">true</property>
  <mapping resource="com/kshitiz/Game.hbm.xml"/>
 </session-factory>
</hibernate-configuration> 
```

这是我构建会话工厂的代码 -

```
public static void main(String[] args) {
        Configuration config = new Configuration().configure("hibernate.cfg.xml");
        sf = config.buildSessionFactory();
    } 
```

我得到了这个例外 -

```
javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial
    at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:645)
    at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288)
    at javax.naming.InitialContext.getURLOrDefaultInitCtx(InitialContext.java:325)
    at javax.naming.InitialContext.getNameParser(InitialContext.java:480)
    at org.hibernate.util.NamingHelper.bind(NamingHelper.java:75)
    at org.hibernate.impl.SessionFactoryObjectFactory.addInstance(SessionFactoryObjectFactory.java:113)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:378)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1385)
    at com.kshitiz.Main.main(Main.java:11) 
```

编辑：

```
<hibernate-mapping>
    <class name="com.kshitiz.Game" table="GAME">
        <id name="id" type="int">
            <column name="ID" />
            <generator class="assigned" />
        </id>
        <property name="name" type="java.lang.String">
            <column name="NAME" />
        </property>
        <property name="date" type="java.util.Date">
            <column name="DATE" />
        </property>
    </class>
</hibernate-mapping> 
```

我的问题 -**为什么当我没有在我的项目中配置任何此类内容时，Hibernate 会尝试执行 JNDI 查找？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T07:13:36.103

它实际上并不是因为查找而失败，而是因为它试图绑定到 JNDI。这样做是因为这里：

```
<session-factory name="HibernateSessionFactory"> 
```

您给出会话工厂的名称 Hibernate 尝试将会话工厂绑定到 JNDI。很可能您没有为 Java SE 应用程序配置 JNDI，因此不需要 name 属性。只需省略它：

```
<session-factory> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T06:49:20.547

我猜问题出在 hibernate.cfg.xml 文件中。

试试这个配置。

```
 <session-factory name="java:/hibernate/SessionFactory">
   <property name="session_factory_name">java:hibernate/SessionFactory</property>
   <!-- Add your configurations -->
</session-factory> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:28:37.520

`at com.kshitiz.Main.main(Main.java:11)`

我想问题出在这里......

你能重新看看是否有没有类名的java文件吗？还是没有映射到您的`Game.hbm.xml`?

并不是说 Hibernate 总是会执行 JNDI 查找。它仅在指定时发生。

# iphone - 在单独的 iOS 线程上延迟执行

> ID：11625134
> 
> 赞同：0
> 
> 时间：2012-07-24T06:13:49.703
> 
> 标签：iphone, ios, multithreading

在我的应用程序中，我需要处理一组数据并仅在互联网连接可用时将其发送到服务器。我需要在单独的线程上执行此任务，因此应用程序的正常执行不会中断。

我创建了一个名为的类`ProcessQueue`，它遍历数组并将其发送到服务器。

我需要在 ApplicationDidBecomeActive 事件上执行此任务，延迟几秒钟，但在单独的线程上。

我尝试了以下操作，但选择器没有被调用。（我正在尝试在`ProcessQueue`课堂内设置断点）。

```
dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    [self performSelector:@selector(processTheQueue) withObject:nil afterDelay:5];
    dispatch_async( dispatch_get_main_queue(), ^{

    });
});

- (void) processTheQueue
{

    QueueProcessor *process = [[QueueProcessor alloc] init];
    [process processQueue];

} 
```

我也尝试在`[process processQueue]' method instead of`dispatch_async` 中使用 performSelector 但不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T13:13:14.287

试试这个..

```
 double delayInSeconds = 2.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        // code to be executed on main thread.If you want to run in another thread, create other queue
        [self repeateThreadForSpecificInterval];
    }); 
```

# objective-c - 单元格图像的 UIViewContentModeScale 模式在单元格被触摸后静默变化（突出显示）

> ID：11625138
> 
> 赞同：5
> 
> 时间：2012-07-24T06:13:59.517
> 
> 标签：objective-c, ios, uiimageview

编辑：

我通过创建自定义单元格解决了这个问题。（但是，还有其他[问题](https://stackoverflow.com/questions/11788197/dequeuereusablecellwithidentifier-always-return-non-nil)。）但是为什么默认单元格不起作用仍然是一个谜......

Cory 的回答并没有解决问题，但`clipsToBounds`确实很重要，我感谢他的持续帮助。所以我给了他赏金，但不接受他的答案作为答案。答案还在风中......

=================================

我将`UIViewContentModeScale`单元格图像的模式设置为`AspectFill`（左图）并且图像正确显示（填充图像视图但保持纵横比）。但是，触摸并按住单元格后，图像会发生变化：imageView 的 frame 和 contentViewMode 会发生变化。（见下左图的第一个单元格）

这确实是有线的，我可以相信诸如基本的事情可能会出错，所以一定有一些我错过了的东西。

环境：Xcode 4.3 iOS5.1 模拟器和设备。 ![在此处输入图像描述](../Images/d3b528bbfb3ada429e23ea72cc687bb0.png)

更新：

我使用情节提要的检查器设置 UIViewContentMode 。

顺便说一句，我使用了 SDWebImage/UIImageView+WebCache.h。

更新2：

我在代码中明确设置了内容模式，但问题仍然存在。[cell.imageView setContentMode:UIViewContentModeScaleAspectFill];

更新4：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"AlbumCell"];

    if(cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"AlbumCell"];

    }
    //[cell.imageView setContentMode:UIViewContentModeScaleAspectFill];
    //[cell.imageView setClipsToBounds:YES];
    [self configureCell:cell atIndexPath:indexPath];
    return cell;
}
- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    Album *album = [self.fetchedResultsController objectAtIndexPath:indexPath];
    cell.textLabel.text = [album.title description];    
    cell.detailTextLabel.text = [self.userVisiableDateFormatter stringFromDate:album.releaseDate];

    //[cell.imageView setContentMode:UIViewContentModeScaleAspectFill];
    [cell.imageView setImageWithURL:[NSURL URLWithString:album.coverThumbnailUrl]
                placeholderImage:[self placeHolderImage]];

} 
```

![在此处输入图像描述](../Images/cbbe8f8da64915658ca34e880e779a64.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T18:04:39.117

我能够找到可能是问题的几个不同的事情。

首先它尝试设置 clipsToBounds 属性：

```
img1.contentMode = UIViewContentModeScaleAspectFill; 
img1.clipsToBounds = YES; 
```

第二个是：

您看不到这些模式之间差异的原因是 UITableViewCell 自动调整其图像视图的大小以适应图像的纵横比。只有当视图的纵横比与图像的不同时，内容模式才会发挥作用。

在您的自定义 UITableViewCell 类中覆盖 layoutSubviews 或自己创建一个图像视图（不要使用表格视图单元格提供的那个）。

编辑1：

查看您的代码后，问题可能在于您如何处理单元配置。指针可能会在不应该被释放的时候被释放。尝试以下 2 个选项：

选项 1：保留当前将配置传递给新方法的方法。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"AlbumCell"];

    if(cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"AlbumCell"];

    }

    return [self configureCell:cell atIndexPath:indexPath];
}

- (UITableViewCell*)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell* returnCell = cell;

    Album *album = [self.fetchedResultsController objectAtIndexPath:indexPath];
    returnCell.textLabel.text = [album.title description];    
    returnCell.detailTextLabel.text = [self.userVisiableDateFormatter stringFromDate:album.releaseDate];

    [returnCell.imageView setContentMode:UIViewContentModeScaleAspectFill];
    [returnCell.imageView setClipsToBounds:YES];

    [returnCell.imageView setImageWithURL:[NSURL URLWithString:album.coverThumbnailUrl]
                placeholderImage:[self placeHolderImage]];

    return returnCell;
} 
```

选项 2：（我的建议）在委托方法中配置单元格。可以在这里执行此操作，这不是坏习惯。这是用于配置单元的委托方法。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"AlbumCell"];

    if(cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"AlbumCell"];

    }

    Album *album = [self.fetchedResultsController objectAtIndexPath:indexPath];
    cell.textLabel.text = [album.title description];    
    cell.detailTextLabel.text = [self.userVisiableDateFormatter stringFromDate:album.releaseDate];

    [cell.imageView setContentMode:UIViewContentModeScaleAspectFill];
    [cell.imageView setClipsToBounds:YES];

    [cell.imageView setImageWithURL:[NSURL URLWithString:album.coverThumbnailUrl]
                placeholderImage:[self placeHolderImage]];

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T06:17:37.360

可能是您需要设置自动调整大小（或支柱和弹簧，如果您已经学习了该术语）。

在一个应用程序中，我有一个自定义单元格，左侧的图像与您的类似，我的自动调整大小设置如下图所示：

![在此处输入图像描述](../Images/235fe5e0e9ad58002aaffc748408e415.png)

请注意，我已将其设置为使单元格框架内的尺寸保持不变，并且命令顶部、底部和左侧尺寸以每边有那么多间隙的方式拥抱这些边缘。

除此之外，我相信你是对的，aspectFill 是该设置的选择。clipToBounds 真的不重要；只有当该视图是另一个视图的子视图时，才需要它应该出现在它的大小大于它是子视图的视图的位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T08:06:53.790

也为突出显示的状态设置相同的图像。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-23T23:14:50.890

对于具有子类 UIImageView 属性的子类 UITableViewCell，我遇到了类似的问题。将此属性的名称从“imageView”更改为其他名称为我解决了这个问题。

# jquery - 使用 jQuery 进行单页应用程序开发的更好做法是什么？

> ID：11625141
> 
> 赞同：1
> 
> 时间：2012-07-24T06:14:34.767
> 
> 标签：jquery, ajax, single-page-application

我对 jQuery 很陌生，我需要使用 jQuery ajax 做一个单页应用程序。当我在互联网上搜索时，我看到了用于 SPA 开发的不同类型的 JavaScript 框架，具有不同的视角。

我最喜欢为客户端开发使用结构化模型，因为我的系统将处理许多视图和对象。

我恳请有关单页应用程序开发的现有优化架构的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:24:27.457

创建 SPA 时，迄今为止的最佳实践是使用 MVC 方法构建 JavaScript 客户端。有大量的 JavaScript SPA 框架，比如

*   [骨干](http://backbonejs.org)
*   [脊柱](http://spinejs.com/)
*   [EmberJS](http://emberjs.com/)
*   [JavaScriptMVC](http://javascriptmvc.com)
*   [AngularJS](http://angularjs.org/)
*   ...

......只是提到一些

[Addy Osmani](http://addyosmani.com)（与其他人一起）创建了一个简单的 TODO 应用程序，展示了不同的框架。所以我能建议你的最好的方法是去[todomvc.com](http://todomvc.com)看看哪一个最适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:24:47.053

当我每天都使用 Jquery 时，非常重要的是让你的 Javascript 结构非常清晰。最后你在这里处理的是 Javascript，而不是 Java 或任何结构化语言。

我所做的很简单，我不确定它是否会帮助你......你可以用 MVC 的心态来解决这个问题：

模型 - 视图 - 控制器

所以这个单页应用程序可以让 jquery 包括：

然后在它下面你玷污我们的模型你的视图你的控制器。

您可能需要更长的时间才能理解它，但从长远来看，相信我会赢得您的胜利，您可以在这里找到更多信息：[http ://welcome.totheinter.net/tutorials/model-view-controller-in-jquery/](http://welcome.totheinter.net/tutorials/model-view-controller-in-jquery/)

* * *

您可以采用的另一种方法确实更容易但不干净，创建一个您将用于您的项目的库并从中调用函数。

# php - 字谜查找程序 php mysql

> ID：11625142
> 
> 赞同：1
> 
> 时间：2012-07-24T06:14:39.657
> 
> 标签：php, mysql, anagram

我正在尝试在 php mysql 中为 anagram finder 编写一个程序。我在数据库中有一个字典，它只有一个名为“word”的字段，它包含 500000 行。

通过使用 php，我尝试从数据库中一个一个地提取单词。在得到一个单词后，我创建了 2 个 for 循环，它执行逐个字符的比较。

例如..让输入词是'abcdef'..

考虑我正在从数据库中获取“fade”这个词..

我正在编写一个循环并检查单词淡入淡出是否在 abcdef 中。如果是，我正在打印这个单词。如果不是，我将从数据库中获取下一个单词。

我写了代码..但我得到一个空页面作为输出..请帮助..

我还有一个问题。有没有其他方法可以在不使用逐字符比较的情况下找到单词的子字符串？

例如：如果我的输入是 fedcba .. 我将其排序为 abcdef .. 并且字典单词是 fade 并且我将其排序为 adef .. 是任何函数来查找 adef 是否是 abcdef 的子字符串..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T06:17:42.933

您必须编写自己的用户定义函数来获取排序的字母字符串：

```
CREATE FUNCTION fn_sort_string(arg_word VARCHAR(255)) RETURNS VARCHAR(255)
BEGIN
    DROP TEMPORARY TABLE IF EXISTS temp;
    CREATE TEMPORARY TABLE temp(letter CHAR(1));

    SET @var_counter = 0;
    SET @var_len = LENGTH(arg_word);

    WHILE(@var_counter < @var_len)
    DO
        INSERT INTO temp VALUES (SUBSTRING(arg_word, @var_counter, 1));
        SET @var_counter = @var_counter + 1;
    END WHILE;

    SELECT GROUP_CONCAT(DISTINCT letter ORDER BY letter SEPARATOR '')
    INTO @var_sort_word
    FROM temp;

    DROP TEMPORARY TABLE IF EXISTS temp;

    RETURN IFNULL(@var_sort_word, "");
END; 
```

以下查询将在已排序的字典单词中找到已排序的输入单词：

```
SELECT * 
FROM dictionary 
WHERE fn_sort_string(input_word) LIKE CONCAT('%',fn_sort_string(word),'%'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:19:50.720

忘记检查 PHP 中的每个单词。这是 CPU 的噩梦！

在表格中添加第二列，并按字母顺序拼写单词。例如：

```
Word : AlphaWord
Test : estt 
```

然后你可以简单地运行这样的查询：

```
select word from table 1 where AlphaWord = (select AlphaWord from table1 where word='$yourWord') order by word asc; 
```

编辑：如果您不想在其他单词中匹配单词，您可以在 AlphaWord 列上弹出全文搜索索引，然后使用[Match()... against()](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html#function_match)语法，这将非常快速地返回匹配项。但是，由于此运算符仅允许将通配符放在搜索字符串的末尾，因此它不会`machete->aceehmt`与`ache->aceh`. 话虽如此，老实说，您实际上无法在正常搜索中添加与它们匹配的通配符。

# c# - WPF MVVM 中的动态 TabControl

> ID：11625143
> 
> 赞同：2
> 
> 时间：2012-07-24T06:14:45.603
> 
> 标签：c#, wpf, xaml, tabcontrol, tabitem

几周前我开始使用 WPF（在 C# 中），现在我需要一些高级使用 tabcontrol 的帮助。

首先，我使用 MVVM（模型视图视图模型）模式来设计我的应用程序，并且我有一个约束，即尽量不在代码隐藏文件中添加代码（即初始化 xaml 文件）。

现在我的问题是在我的主窗口视图（窗口）中动态创建新的 tabItems，当我单击一个按钮（例如“新选项卡”按钮）时，它会显示我的详细视图（页面）的一个实例。

我在网上发现了很多关于动态创建 tabitem 的东西，但通常在文件后面的代码中进行了修改。我虽然使用绑定，但我不知道如何使用绑定到这种东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T06:20:54.347

MVVM 将帮助您。

为您的 MainWindow 视图创建一个 ViewModel。在那里你可以有一个 DetailViewModels 的集合。只需在此处使用`ObservableCollection`DetailViewModels 即可。

在您的视图中，将 的 绑定`ItemsSource`到`TabControl`该集合。

您的 AddTab 按钮可以有一个命令绑定。该命令可以是`ICommand` 在 MainWindowViewModel 中发布的派生类。按下按钮然后在 MainWindow ViewModel 中结束，添加另一个 DetailViewModel 并以这种方式更新 View。

在这里查看这个关于 MVVM 的优秀视频教程：[Jason Dollinger on MVVM](http://blog.lab49.com/archives/2650)

他通过 Main 和 Detail ViewModel 和命令的示例解释了如何做到这一点。

他在视频中开发的源代码可在此处获得：[Lab49 上的源代码](http://blog.lab49.com/archives/2689)

或许更容易创建一个仅由`TabControl`. 然后将 的 设置`DataContext`为`TabControl`那个 TabControlViewModel 。将您的 MainWindowViewModel 中的 TabControlViewModel 作为公共属性发布，以完成此操作。

您的代码隐藏将是空的，除了一些 InitializeComponent 可能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T06:34:20.367

Sacha Barber 撰写的关于 MVVM 的大量文章包含可下载的应用程序，他在其中公开了使用选项卡控件创建动态视图的方式[。](http://www.codeproject.com/Articles/38030/WPF-If-Carlsberg-did-MVVM-Frameworks-Part-1-of-n)您可以下载文章附带的演示应用程序，以了解如何使用动态选项卡控件。例子：

您需要在哪里绑定代表选项卡内容数据模型的工作区集合，以及是否需要为选项卡添加属性，例如可关闭与否、禁用与否、名称等。这可以是您的 ViewModelBase。创建您的选项卡项目模板以支持您的视图模型。

```
<TabControl x:Name="tabControl"
                 IsSynchronizedWithCurrentItem="True" 
                 ItemsSource="{Binding Path=Workspaces}" 
                 Template="{StaticResource DynamicTabControlTemplate}">         
</TabControl> 
```

例如像这样初始化工作空间的集合

> 工作区 = 新的 ObservableCollection();

并且在您将新项目添加到集合选项卡控件后，也会更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T06:17:44.573

您可以绑定到表示选项卡项集合的`ItemsSource`a 的属性。`TabControl`然后你可以从你的 ViewModel 操作集合。

# ios - Phonegap iOS 检索设备语言

> ID：11625152
> 
> 赞同：4
> 
> 时间：2012-07-24T06:15:37.980
> 
> 标签：ios, cordova

我正在做一个 Phonegap 混合应用程序，我必须检索设备语言，例如：“IT”、“EN”。对此有何建议？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-24T07:09:37.123

关于你的问题，答案是：

```
 var lang = navigator.language.split("-");
 var current_lang = (lang[0]);
 alert( "current_lang: " + current_lang ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-07T03:54:37.633

Cordova 中有（现在）Globalization API 来检索此类信息（您还可以获取日期、货币等信息）：

```
globalization.getPreferredLanguage
globalization.getLocaleName
globalization.dateToString
globalization.stringToDate
globalization.getDatePattern
globalization.getDateNames
globalization.isDayLightSavingsTime
globalization.getFirstDayOfWeek
globalization.numberToString
globalization.stringToNumber
globalization.getNumberPattern
globalization.getCurrencyPattern 
```

请参阅[http://docs.phonegap.com/en/3.3.0/cordova_globalization_globalization.md.html#Globalization](http://docs.phonegap.com/en/3.3.0/cordova_globalization_globalization.md.html#Globalization)

# iphone - iOs后台线程中的函数调用

> ID：11625154
> 
> 赞同：1
> 
> 时间：2012-07-24T06:15:44.157
> 
> 标签：iphone, multithreading, background-process, dispatch, uiprogressbar

在我的 iPhone 应用程序中，我有一个按钮，单击按钮我调用 Web 服务并获取一些链接，之后我需要下载这些链接中的文件。单击按钮会弹出一个视图，单击“确定”按钮将替换为进度条，并显示下载进度。下载完成后，进度条将再次被按钮替换。我在这里遇到的问题是，如果互联网连接速度很慢，UI 将被阻止，并且“确定”按钮将保持按下模式，直到它完全从服务器获取详细信息，然后才会出现进度条。我想在单击 OK 按钮后立即显示进度条，它不应该锁定 UI。我使用了以下方法：

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 
                                             (unsigned long)NULL), ^(void) {
        [self download];
    }); 
```

在这种情况下，UI 没有锁定，但是进度条没有出现。我用

```
 [self performSelectorInBackground:@selector(download) withObject:nil]; 
```

在这种情况下，UI 没有阻止，但它会显示下载按钮，直到它从服务器获取详细信息。只有这样它才会显示进度条。

以及下载的代码流程：

```
- (void)download{
   //Creating a custom progressview
    myprogressView = [[CustomProgressView alloc]initWithFrame:CGRectMake(25, 138, 100, 28)];
    [cell.contentView addSubview:myprogressView];
    [cell bringSubviewToFront:myprogressView];

    //Calling the methods for getting the details from the server

    //after some internal process, start download
    [self.myQueue go];
} 
```

请分享你的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T06:25:56.047

尽量不要在任何后台线程中更改 UI。所有与 UI 相关的任务都应在主线程上执行。。您可以调用委托方法来更新 UI 数据一进来...

在这里，我可以看到您正在后台线程中执行与 UI 相关的任务……原因是 UIKit 不是线程安全的……：/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:22:43.763

首先将您的按钮替换为进度视图。然后开始下载。我的意思是说，在按钮按下事件中更改 UI 然后调用你的`[self.myQueue go];`

# android - 我如何格式化解析并传递给editText的数字？

> ID：11625155
> 
> 赞同：2
> 
> 时间：2012-07-24T06:15:52.090
> 
> 标签：android, parsing, exception, formatting, android-edittext

我在 editText 中格式化数字时遇到问题。我希望用户能够以正整数或负整数（5 或 -5）的形式输入一个数字，并将其格式化为十进制 (.05)。目前，它的格式为 .05.0 而不是 .05，我不知道为什么。此外，如果用户输入错误的文本或将字段留空，我想将 editText 设置为“0”。但是，我得到了一个错误。非常感谢任何帮助。

```
public void checkPremium(){
     double number = Double.parseDouble(premium.getText().toString());
     if(premium.getText().toString().equals(".")||premium.getText().toString().equals("-.")||premium.getText().toString().equals("")){
         premium.setText("0");
     }else if(number >= 1 || number < 10){
         premium.setText(".0"+number);
     }else if(number >= 10){
         premium.setText("."+number);
     }else if(number <= -1 || number > -10){
         premium.setText(".0"+Math.abs(number));
     }else if(number <= -10){
         premium.setText("."+Math.abs(number));
     }else if(number <1 || number >0){
           //Do Nothing
         }       
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:29:09.537

Double 解析器将“.0”添加到您的号码中。你最好添加你的字符串而不是你解析的双精度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:55:08.587

如果您不想在 edittext 字段中出现任何其他错误字符或空格，最好使用 try 和 catch 块

这是代码，希望您会发现它有用。

```
 try{
                 number = Double.parseDouble(premium.getText().toString());

                 if(number >= 1 || number < 10){
                     premium.setText(String.valueOf(.01*number));
                 }else if(number >= 10){
                     premium.setText(String.valueOf(.1*number));
                 }else if(number <= -1 || number > -10){
                     premium.setText(String.valueOf(0.01*Math.abs(number)));
                 }else if(number <= -10){
                     premium.setText(String.valueOf(0.1*Math.abs(number)));
                 }else if(number <1 || number >0){
                       //Do Nothing
                 }

             }catch(Exception e)
             {
                 premium.setText("0");
             } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:32:49.307

使用十进制格式化程序或字符串说明符。检查以下答案。： [如何在 Android 中打印带两位小数的双精度数？](https://stackoverflow.com/questions/8065114/how-to-print-a-double-with-only-two-decimals-in-android)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T07:44:14.027

更简单的代码是：

```
Double number = Double.parseDouble(premium.getText().toString());
if (number.isInfinite() || number.isNan()) number = 0F;
premium.setText(String.format("%.2f", Math.abs(number)/100); 
```

希望这可以帮助...

# ruby-on-rails - 重定向到该页面后，JQuery Mobile 为另一个页面执行 SilentScroll

> ID：11625160
> 
> 赞同：0
> 
> 时间：2012-07-24T06:16:17.850
> 
> 标签：ruby-on-rails, jquery-mobile, scroll

如何在单击标题上的按钮（在每个页面上）后滚动到想要查看的页面上的部分，而不是在自动滚动到另一个页面上的那个部分之后重定向到另一个页面......？

我已经这样做了，但是只有当我在那个页面上有想要的部分时才有效，但是如果我在另一个页面上，它不能只重定向到那个页面但不能滚动）Tq

这是我的代码：

```
jQuery(document).ready(function() {
    $("div[data-role*='page']").live('pageshow', function(event, ui){
        $('a.logo_print').click(function(event){
            setTimeout(function(){
                $.mobile.silentScroll($("#how_to_print").offset().top);
            },100);
        });
    }); 
```

任何想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:48:36.233

我建议您将 SecondPage 上的 SectionName 作为 QueryString 参数传递。

```
<a href="#page2&val=val1">link</a> 
```

在`pageShow`方法中；您可以提取 QueryString 参数并`silentScroll`在上面的示例代码中使用。

您可以从中获取点击的 URL`ui.prevPage.context.URL`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:52:51.110

只需将时间从 100 更改为 1000 或 1500，更喜欢 1500 以便在任何设备上工作...... :) 非常感谢

```
 $('a.logo_print').click(function(event){
            setTimeout(function(){
                $.mobile.silentScroll($("#how_to_print").offset().top);
            },1000);
        }); 
```

# c# - c# hello world 没有编译

> ID：11625164
> 
> 赞同：-1
> 
> 时间：2012-07-24T06:16:28.367
> 
> 标签：c#, compiler-errors, mono, osx-snow-leopard

感谢您阅读我的问题。我对 C# 和 mono 非常非常陌生。我想为 .Net 学习 C#，但由于我有 Mac 并且没有 Windows，我无法下载 Visual Studio Express 等。我听说过 mono 并安装了它，但这些说明对我来说很难遵循，而且不是确定我是否还没有下载所有内容，是否将内容存储在错误的位置，或者什么，但我无法编译一个简单的 Hello World。

我下载然后安装了 MonoFramework-MDK-2.10.9_11.macos10.xamarin.x86

```
My-MacBook-Pro:~$ gmcs --version
Mono C# compiler version 2.10.9.0

My-MacBook-Pro:~$ mono --version
Mono JIT compiler version 2.10.9 (tarball Mon May  7 20:25:51 EDT 2012)
Copyright (C) 2002-2011 Novell, Inc, Xamarin, Inc and Contributors. www.mono-project.com
    TLS:           normal
    SIGSEGV:       normal
    Notification:  kqueue
    Architecture:  x86
    Disabled:      none
    Misc:          debugger softdebug 
    LLVM:          yes(2.9svn-mono)
    GC:            Included Boehm (with typed GC) 
```

为了测试安装，我按照[http://www.mono-project.com/Mono_Basics上的 Hello World 说明进行操作](http://www.mono-project.com/Mono_Basics)

然后我得到了82个错误！

这是我在终端 bash 窗口中输入的内容：

```
My-MacBook-Pro:~$ gmcs hello.cs
hello.cs(1,0): error CS1525: Unexpected symbol `{'
hello.cs(1,5): error CS1009: Unrecognized escape sequence `\c'
hello.cs(1,5): error CS1009: Unrecognized escape sequence `\c'
hello.cs(3,2): error CS1009: Unrecognized escape sequence `\c'
hello.cs(3,12): error CS1009: Unrecognized escape sequence `\g'
hello.cs(3,12): error CS1009: Unrecognized escape sequence `\g'
hello.cs(3,34): error CS1009: Unrecognized escape sequence `\g'
hello.cs(3,34): error CS1009: Unrecognized escape sequence `\g'
hello.cs(3,52): error CS1009: Unrecognized escape sequence `\g'
hello.cs(3,52): error CS1009: Unrecognized escape sequence `\g'
hello.cs(3,74): error CS1009: Unrecognized escape sequence `\g'
hello.cs(3,74): error CS1009: Unrecognized escape sequence `\g'
hello.cs(4,2): error CS1009: Unrecognized escape sequence `\g'
hello.cs(4,2): error CS1009: Unrecognized escape sequence `\g'
hello.cs(4,23): error CS1009: Unrecognized escape sequence `\g'
hello.cs(4,23): error CS1009: Unrecognized escape sequence `\g'
hello.cs(4,42): error CS1009: Unrecognized escape sequence `\g'
hello.cs(4,42): error CS1009: Unrecognized escape sequence `\g'
hello.cs(4,62): error CS1009: Unrecognized escape sequence `\g'
hello.cs(4,62): error CS1009: Unrecognized escape sequence `\g'
hello.cs(5,1): error CS1009: Unrecognized escape sequence `\m'
hello.cs(5,1): error CS1009: Unrecognized escape sequence `\m'
hello.cs(5,1): error CS1009: Unrecognized escape sequence `\m'
hello.cs(5,1): error CS1009: Unrecognized escape sequence `\m'
hello.cs(5,1): error CS1009: Unrecognized escape sequence `\m'
hello.cs(6,1): error CS1009: Unrecognized escape sequence `\d'
hello.cs(7,1): error CS1009: Unrecognized escape sequence `\p'
hello.cs(7,1): error CS1009: Unrecognized escape sequence `\p'
hello.cs(7,1): error CS1009: Unrecognized escape sequence `\p'
hello.cs(7,1): error CS1009: Unrecognized escape sequence `\p'
hello.cs(9,10): error CS1009: Unrecognized escape sequence `\c'
hello.cs(9,14): error CS1009: Unrecognized escape sequence `\c'
hello.cs(10,7): error CS1009: Unrecognized escape sequence `\c'
hello.cs(10,6): error CS1525: Unexpected symbol `cf4'
hello.cs(10,12): error CS1009: Unrecognized escape sequence `\c'
hello.cs(10,16): error CS1009: Unrecognized escape sequence `\c'
hello.cs(10,26): error CS1009: Unrecognized escape sequence `\c'
hello.cs(10,30): error CS1009: Unrecognized escape sequence `\
'
hello.cs(10,30): error CS1009: Unrecognized escape sequence `\
'
hello.cs(10,33): error CS1012: Too many characters in character literal
hello.cs(12,6): error CS1009: Unrecognized escape sequence `\c'
hello.cs(13,2): error CS1525: Unexpected symbol `
                                                 10'
hello.cs(13,7): error CS1009: Unrecognized escape sequence `\c'
hello.cs(14,6): error CS1009: Unrecognized escape sequence `\c'
hello.cs(15,7): error CS1009: Unrecognized escape sequence `\c'
hello.cs(15,6): error CS1525: Unexpected symbol `cf4'
hello.cs(15,12): error CS1009: Unrecognized escape sequence `\
'
hello.cs(15,12): error CS1009: Unrecognized escape sequence `\
'
hello.cs(15,26): error CS1009: Unrecognized escape sequence `\{'
hello.cs(15,26): error CS1009: Unrecognized escape sequence `\{'
hello.cs(15,31): error CS1009: Unrecognized escape sequence `\
'
hello.cs(16,6): error CS1009: Unrecognized escape sequence `\c'
hello.cs(17,2): error CS1525: Unexpected symbol `
                                                 10'
hello.cs(17,7): error CS1009: Unrecognized escape sequence `\c'
hello.cs(18,6): error CS1009: Unrecognized escape sequence `\c'
hello.cs(19,2): error CS1525: Unexpected symbol `
                                                 10'
hello.cs(19,7): error CS1009: Unrecognized escape sequence `\c'
hello.cs(20,6): error CS1009: Unrecognized escape sequence `\c'
hello.cs(21,7): error CS1009: Unrecognized escape sequence `\c'
hello.cs(21,17): error CS1009: Unrecognized escape sequence `\c'
hello.cs(21,23): error CS1009: Unrecognized escape sequence `\c'
hello.cs(21,27): error CS1009: Unrecognized escape sequence `\
'
hello.cs(21,33): error CS1009: Unrecognized escape sequence `\c'
hello.cs(21,37): error CS1009: Unrecognized escape sequence `\{'
hello.cs(21,37): error CS1009: Unrecognized escape sequence `\{'
hello.cs(21,42): error CS1009: Unrecognized escape sequence `\
'
hello.cs(21,57): error CS1009: Unrecognized escape sequence `\c'
hello.cs(21,68): error CS1009: Unrecognized escape sequence `\c'
hello.cs(21,72): error CS1009: Unrecognized escape sequence `\c'
hello.cs(21,85): error CS1009: Unrecognized escape sequence `\c'
hello.cs(21,90): error CS1009: Unrecognized escape sequence `\c'
hello.cs(21,112): error CS1009: Unrecognized escape sequence `\c'
hello.cs(21,118): error CS1009: Unrecognized escape sequence `\c'
hello.cs(21,122): error CS1009: Unrecognized escape sequence `\
'
hello.cs(21,129): error CS1009: Unrecognized escape sequence `\c'
hello.cs(21,133): error CS1009: Unrecognized escape sequence `\}'
hello.cs(21,133): error CS1009: Unrecognized escape sequence `\}'
hello.cs(21,138): error CS1009: Unrecognized escape sequence `\
'
hello.cs(21,138): error CS1009: Unrecognized escape sequence `\
'
hello.cs(21,141): error CS1012: Too many characters in character literal
hello.cs(22,1): error CS1009: Unrecognized escape sequence `\c'
hello.cs(22,5): error CS1009: Unrecognized escape sequence `\}'
Compilation failed: 82 error(s), 0 warnings 
```

这是我的 hello.cs 文件包含的内容：

```
using System;

public class HelloWorld
{
    static public void Main ()
    {
        Console.WriteLine ("Hello Mono World");
    }

} 
```

我将[http://www.mono-project.com/Mono_Basics](http://www.mono-project.com/Mono_Basics)提供的内容复制并粘贴到 TextEdit 中，并将文件创建为 .rtf，然后将扩展名更改为 .cs

有人能告诉我我做了什么（或没做什么）来制造这个烂摊子吗？谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-24T06:30:23.640

> 我将[http://www.mono-project.com/Mono_Basics](http://www.mono-project.com/Mono_Basics)提供的内容复制并粘贴到 TextEdit 中，并将文件创建为 .rtf，然后将扩展名更改为 .cs

是的，不要那样做。将其创建为纯文本文件。RTF 不是纯文本。在 RTF 查看器/编辑器中显示时，它可能*看起来*像纯文本，但您所做的*基本上*与在 Word 中创建文件，然后期望`gmcs`读取 Word 文档相同。

它必须是纯文本文件，其内容如示例中所示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T06:32:32.777

我认为这是问题所在：

```
as an .rtf then changed the extension to .cs 
```

尝试在一些基本的文本编辑器中编辑 cs 文件。

# .htaccess - 在一个应用程序中使用 slim 和 codeigniter 进行路由？

> ID：11625167
> 
> 赞同：0
> 
> 时间：2012-07-24T06:16:36.723
> 
> 标签：.htaccess, codeigniter, slim

我在我的应用程序中遇到了路由问题。我的文件夹结构如下：

*   应用
*   css
*   图片
*   js
*   svc // Slim 应用程序文件夹
*   索引.php
*   .htaccess

如果我调用一条纤细的路线[http://www.mydomain.de/svc/hello/world](http://www.mydomain.de/svc/hello/world)我会从 codeigniter 收到 404 错误。我在根目录中的 htaccess 如下所示：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?$1 [L] 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:41:14.297

我认为您只需要`RewriteRule`在当前请求之前添加另一个来处理`^svc`请求，如果不匹配则回退到 codeigniter 的前端控制器（从[源代码](https://github.com/codeguy/Slim/blob/master/.htaccess)中提取的苗条重写）

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^svc svc/index.php [L,QSA]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1 [L] 
```

# java - 在 wicket 框架中刷新 AjaxButton 的 onSubmit 内的整个表单

> ID：11625169
> 
> 赞同：0
> 
> 时间：2012-07-24T06:16:43.883
> 
> 标签：java, user-interface, wicket

我想刷新 AjaxButton 的 onSubmit(AjaxRequestTarget target, Form form) 上的整个表单。这怎么可能做任何评论。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T06:34:45.467

在表单构造函数中，或者在添加表单之前，将表单设置为输出标记 id：

```
form.setOutputMarkupId(true); 
```

然后`onSubmit`将您的表单添加到`target`.

```
target.add(form); 
```

# javascript - javascript/jquery - 对象无法迭代

> ID：11625170
> 
> 赞同：0
> 
> 时间：2012-07-24T06:16:51.607
> 
> 标签：javascript, jquery

所以，我从一个 php 页面中得到了一个对象，它吐出我拥有的 JSON。当我将全局变量设置为等于我从中创建的对象，然后尝试使用 for(key in obj) 循环获取数据时，它似乎不起作用。

如果我用随机 $.post 之类的东西包围 for 循环，它就可以工作。我很困惑为什么会发生这种情况。

这是我的代码：

```
var myObj1 = new Object;

$(document).ready(function() {
$.post('namenums.php', {num : 1}, function(data) {
    var temp = $.parseJSON(data);
    for(var key in temp) {
        myObj1[key] = temp[key]['firstname'] + ' ' + temp[key]['lastname'];
    }
});

getStuff();
thing();
});

function thing() {
    for(var key in myObj1) {
        console.log(key);
    }
} 
```

现在，如果我将我的 thing() 函数更改为这样的东西，它就可以工作了。

```
function thing() {
        $.post('random.php', function(data) {
    for(var key in myObj1) {
        console.log(key);
    }
        });
} 
```

那么，有人可以解释为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:21:24.293

当然。在第一个示例中，`thing()`当文档准备好时被调用——不一定是在由 发起的 AJAX 调用`$.post`完成之后。在第二个示例中，在 AJAX 请求结束、完成并返回结果之前，您不会尝试记录任何内容。

您可以通过将调用移至`thing()`提供给的回调内部来修复第一个示例`$.post`：

```
$(document).ready(function() {
  $.post('namenums.php', {num : 1}, function(data) {
    var temp = $.parseJSON(data);
    for(var key in temp) {
      myObj1[key] = temp[key]['firstname'] + ' ' + temp[key]['lastname'];
    }
    thing();
  });

  getStuff();
}); 
```

# android - 为我的应用程序指定最大 sqlite db 大小。如何处理数据库完全异常

> ID：11625174
> 
> 赞同：21
> 
> 时间：2012-07-24T06:17:06.340
> 
> 标签：android, sqlite, android-sqlite

我在一次采访中被问到如何为我们的 android 应用程序设置 sqlite db 的最大大小。当达到最大尺寸时我们如何处理？

**编辑**：Marina Lynn 在下面的回答似乎可以接受这个问题。但是当数据库大小接近我们指定的限制时，是否会触发某种侦听器？（或类似的东西）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-01T18:27:03.223

首先，设置`.setMaximumSize()`上一个答案中提到的最大数据库大小使用。

[`SQLiteFullException`](http://developer.android.com/reference/android/database/sqlite/SQLiteFullException.html)其次，如果数据库文件增长大于最大页数 * 页面大小，Android 会抛出异常。`SQLiteFullException`是一个`RuntimeException`。如果您想处理它并发送相关响应，您将执行以下操作：

```
try {
     getContentResolver().update(myEntity.CONTENT_URI, values, where, null);
} catch (SQLiteFullException e) {
    Log.w(TAG, "Exception when updating ...", e);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-24T06:50:16.287

尽管除了可用存储之外，数据库的大小没有限制，但您可以将数据库的最大大小设置为`SQLiteDatabase.setMaximumSize()`. 如果达到限制，则必须缩小数据库。或者，您可以将数据库从内部存储器移动到外部存储，可能有更多可用空间并增加数据库最大大小。但是繁重的数据库会导致糟糕的用户体验，因此第二个选择是理论上的。请记住，我们是在移动环境中，而不是在专用的数据库服务器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-19T09:21:25.997

请考虑到它`SQLiteFullException`不仅会在您的数据库达到其自身限制时抛出，而且在文件存储中没有可用空间的情况下也会抛出。如果要处理 SQLiteFull 异常，还需要检查设备上的可用空间。如果设备上的空间不足，您需要告诉用户从未使用的数据中清除设备。

# c# - 我们如何在 System.Web.HttpContext.Current.Response.WriteFile() 中写入空白文件

> ID：11625176
> 
> 赞同：0
> 
> 时间：2012-07-24T06:17:27.253
> 
> 标签：c#, asp.net

我们如何在 C# 响应对象中编写一个空白文件？

我想写一个路径根本不存在的文件。

```
System.Web.HttpContext.Current.Response.WriteFile("blank.txt") 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T06:29:14.447

查看*为非空*文件发送了哪些标头，然后自己简单地写出相同的标头（当然，更改内容长度）但没有数据。

（我假设`WriteFile` *确实会*在文件名等周围填写一些标题。如果没有，那就更简单了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:22:45.120

你不能。您可以做的是，创建一个空文件并将其命名为“blank.txt”并将其保存在您的解决方案中。

我能知道写空白文件的原因吗？这不等于不写任何回应吗？

**更新**

基于 Jon 的想法，您甚至可以简单地编写 HTTP 标头

```
Response.ContentType = "text/plain";
Response.AppendHeader("Content-Disposition", "attachment;filename= errorLog.txt");
Response.AddHeader("content-length","0");
Response.Flush();

Response.End(); 
```

**更新 2**

如果已经有errorLog.txt文件，直接使用Response.WriteFile

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:33:22.817

你可以这样做。

```
 byte[] buffer = new byte[1];
        Response.Clear();
        Response.ContentType = "text/plain";
        Response.OutputStream.Write(buffer, 0, buffer.Length);
        Response.AddHeader("Content-Disposition", "attachment;filename=blank.txt");
        Response.End(); 
```

# iphone - 一键显示多个视频

> ID：11625180
> 
> 赞同：0
> 
> 时间：2012-07-24T06:17:46.787
> 
> 标签：iphone, objective-c, video, xcode4.3

从我可以选择我想要的章节的页面中，选择章节后，它将显示描述页面。在导航栏中，有一个返回按钮和一个视频按钮。

对于我选择的每个不同章节，正在显示的视频都需要不同。但是我如何从视频按钮显示 10 个不同的视频？

TableView 和章节描述是从数据库中检索的，视频只是存储在 Xcode 中的一个文件夹中。

目前，从我按下视频的任何章节中，视频都会显示相同。我正在使用的代码是这样的：

```
-(IBAction)playvideo {

NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                     pathForResource:@"example" ofType:@"mp4"]];

MPMoviePlayerViewController *playercontroller = [[MPMoviePlayerViewController alloc] 
                                                 initWithContentURL:url];

[self presentMoviePlayerViewControllerAnimated:playercontroller];

playercontroller.moviePlayer.movieSourceType = MPMovieSourceTypeFile;

[playercontroller.moviePlayer play];

playercontroller = nil;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:04:46.627

您不认为在您的数据库中也应该存储相应视频的信息（可能是文件名）吗？

# ros - ROS框架安装及示例

> ID：11625181
> 
> 赞同：5
> 
> 时间：2012-07-24T06:18:00.860
> 
> 标签：ros

我使用什么程序来使用 ROS 框架进行编程，我可以使用 Visual Studio 吗？

我是 ROS 的新手，任何教程或教程程序都将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T22:52:10.743

用于 ROS 开发的最常见的 IDE 是 Eclipse。更多信息请参见 ROS Wiki 上的 IDE 页面：[http ://www.ros.org/wiki/IDEs](http://www.ros.org/wiki/IDEs)

如果您遵循[ROS 教程](http://www.ros.org/wiki/ROS/Tutorials)，您会发现 ROS 只是用 C 或 python 编程，因此任何适用于这些语言的 IDE 都适用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:30:27.430

Qt Creator 也可以是 C++ 的不错选择。它具有对 CMake 的本机支持，因此不需要额外的插件或类似的东西。只需打开一个 CMakeLists.txt 文件，在您不介意的某个地方选择一个构建目录（毕竟您将使用 rosmake），运行 CMake 就可以了。自动完成和重构工作。只需确保您从终端运行 qtcreator，以便它获取 ROS 特定的环境变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-07T13:05:39.637

正如 pgorczak 指出的那样，QTCreator 是一个不错的选择。如果您打算使用 catkin 包而不是 ros 包（rosbuild），我建议您使用[QTCreator 2.7.2](http://download.qt-project.org/official_releases/qtcreator/2.7/2.7.2/)。这是我测试过的最新和最后一个工作版本，它适用于 catkin 工作区和包。新的 QTCreate 版本会导致 catkin 文件系统出现一些问题。

我建议你开始使用 catkin，因为新版本的 ros 不支持 rosbuild。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-15T16:27:04.850

我只想在这里添加一个后续，ROS 最常见的 IDE 及其各自的配置在以下[ROS IDE wiki 页面](http://wiki.ros.org/IDEs)中。此外，ROS 是基于 Linux 的框架，因此没有可用的 Visual Studio。您可能会使用 Eclipse（需要非常好的配置）或 QT（我更喜欢这个，直接使用并且对于为 ROS 包创建 QT GUI 很有用，如果您需要它！）

干杯，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-13T01:18:14.057

我正在使用jetbrains的Clion。如果您对环境设置以及所有与环境变量和资源有关的事情都没有经验，我不建议您这样做。最重要的是始终使用源设置文件打开 Clion。这可能有点难，但在我看来，jetbrains ide 是值得的

# android - 在 Android 中重置应用程序

> ID：11625183
> 
> 赞同：0
> 
> 时间：2012-07-24T06:18:16.193
> 
> 标签：android, android-layout, android-intent

我的应用程序中有四个活动。当我进行第三次活动时，我按下了主页按钮。然后我重新启动了我的应用程序。它不显示第一个活动，而是显示第三个活动。当我按下主页按钮时，请帮助我重置应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:30:38.423

将您当前的活动编号覆盖`onPause`/`onStop`保存到 SharedPreferences 或 Bundle 中。阅读`onResume`并相应地打开活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:31:17.747

如果您不希望您的活动在最近任务中，您应该`excludeFromRecent = "true"`在清单文件中的活动声明中使用标签，如下所示

```
 <activity android:name=".ActivityName" 
            android:excludeFromRecents="true"
         /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:34:47.440

如果您只想在回家时杀死您的应用程序，以便每次您可以`finish()`在`onStop`and`onPause`方法中调用时它都会重新启动。主页按钮的默认行为是简单地停止活动而不是退出它，因此再次导航到您的应用程序实际上只是从您离开的地方恢复。

# playframework - 查询多方时如何获取一侧对象值？

> ID：11625184
> 
> 赞同：0
> 
> 时间：2012-07-24T06:18:25.317
> 
> 标签：playframework, many-to-one, ebean

我使用 play framework 做 web sample excise 并遇到与 manyToOne 相关的问题。
我的对象关系如下：

```
@Entity 
@Table(name="account")  
public class User extends Model{  

    @Id  
    @Constraints.Required  
    @Formats.NonEmpty  
    @MinLength(4)  
    public String name;  

    @Constraints.Required  
    @Email  
    public String email;  
    public User(String username, String email) {
        this.name       = username;
        this.email      = email;
    }
}
@Entity 
@Table(name="note")  
public class Note  extends Model{  
    @Id  
    public Long id;  

    @Constraints.Required  
    public String title;  

    @Required  
    @ManyToOne  
    public User user;  

    public static Model.Finder<Long,Note> find = new Model.Finder<Long, Note>(Long.class, Note.class);  
    public Note(User author,String title,) {
        this.user           = author;
        this.title          = title;
    /**  
    * Retrieve the user's note  
    */  
    public static List<Note> findByUser(User user) {  
        return find.where().eq("user", user).findList();  
    }  
    ××this test is at another junit test case ××
    @Test  
    public void createNotes()  {  
        User bob = new User("bob","bob@gmail.com");  
        bob.save();  
        Note  note1= new Note(bob, "My notes");  
        note1.save();  
        List<Note> bobNotes = Note.findByUser(bob);  
        Assert.assertEquals(1, bobNotes .size());  
        Note firstNote = bobNotes .get(0);  
        assertNotNull(firstNote);  
        assertEquals(bob, firstNote.user);  
        assertEquals("My notes", firstNote.title);  
        assertEquals("bob", firstNote.user.name);  
        assertEquals("bob@gmail.com", firstNote.user.email);  
    } 
```

我的问题是：`assertEquals("bob", firstNote.user.name)`通过但`assertEquals("bob@gmail.com", firstNote.user.email);`失败并显示`firstNote.user.email`为空。

如何获取用户的其他字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:10:30.030

改变`findByUser`方法如下，问题就消失了：

```
/**  
 * Retrieve the user's note  
 */  
public static List<Note> findByUser(User user) {  
    return find.join("user").where().eq("user", user).findList();  
} 
```

# jquery - 请解释 .toggleClass() API 中的“开关”？

> ID：11625186
> 
> 赞同：2
> 
> 时间：2012-07-24T06:18:32.763
> 
> 标签：jquery

[这](http://api.jquery.com/toggleClass/)是 Jquery 库的 .toggleClass() 方法的 API。我不确定如何实现开关部分。开关部分是否应该产生布尔值，如果是，那么它是否已实现？

所以如果代码是：

```
`$('selector').toggleClass('class-to-be-toggled' , ($(this).hasClass('white')))` 
```

并且`($(this).hasClass('white'))`评估为真，然后`.toggleClass()`将执行，如果它评估为假，那么`.toggleClass()`将不执行？

还是我误解了`switch`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T06:20:51.387

开关布尔值确定是添加还是删除类。如果 switch 参数为 true，则添加该类，如果为 false，则删除该类。

直接来自 jQuery 文档：

```
.toggleClass( className, switch )  

className - One or more class names (separated by spaces) 
    to be toggled for each element in the matched set. 
switch - A Boolean (not just truthy/falsy) value to determine 
    whether the class should be added or removed. 
```

[jQuery doc 页面](http://api.jquery.com/toggleClass/)上甚至还有一个代码示例，显示了 switch 参数的使用。

如果根本没有传递 switch 布尔值，则如果该类尚不存在，则将添加该类，如果存在则将其删除（因此它将被切换）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T06:24:49.793

如果您省略该参数，则将根据当前不是的类添加或删除该类。如果传递参数，则将根据参数添加或删除类，而不管元素的当前状态。

例如，这个：

```
$(':checkbox').click(function() {
    $(this).parent().toggleClass('selected', $(this).is(':checked'));
}); 
```

几乎只是写作的简写：

```
$(':checkbox').click(function() {
    if($(this).is(':checked')) {
        $(this).parent().addClass('selected');
    } else {
        $(this).parent().removeClass('selected');
    }
}); 
```

你可能会反对，大多数时候你会很好地逃脱

```
$(':checkbox').click(function() {
    $(this).parent().toggleClass('selected');
}); 
```

很可能是这种情况，但是如果除了检查复选框之外的任何*其他*操作可能会干扰`selected`课程，那么如果您不传递指定您想要的参数，那么您的切换将面临不同步的风险去做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-01T20:05:04.877

.toggleClass() 的第二个参数是三态参数。

*   `$x.toggleClass('c', true)`**添加**类_`c`
*   `$x.toggleClass('c', false)`**删除**类_`c`
*   `$x.toggleClass('c')`**反转**是否`c`存在（如果存在则添加，如果不存在则删除）

    `$x.toggleClass('class', undefined)`也反转

第四种选择没有记录在[.toggleClass()](http://api.jquery.com/toggleclass/)中，但它[保证](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters#Description)可以工作，因为[这就是可选函数参数的工作方式](https://stackoverflow.com/a/8356945/673991)。

jQuery 源代码中的区别似乎是`typeof switch == 'boolean'`. `Boolean(0)`顺便说一句，这也将`false`删除该课程。除了省略 switch 参数外，您似乎还可以通过`null`或`42`获取一些反转切换操作。[但当然，您不应该在未记录](https://www.xkcd.com/1305/)的功能上进行编码。`undefined`如果您想**明确切换**，我建议您通过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T06:23:03.387

如果您的第二个参数（开关）为真，则添加该类，如果为假则将其删除

# c - C - 何时使用指针算法，何时使用数组索引？

> ID：11625194
> 
> 赞同：18
> 
> 时间：2012-07-24T06:18:51.077
> 
> 标签：c, arrays, pointers

在 C 语言中，什么时候最好使用其中一个而不是另一个？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-24T06:21:55.290

这实际上是风格和编码约定的问题，因为在 C`p[i]`中被*定义*为与`*(p+i)`where`p`是指针和`i`整数索引相同。AFAIK 你甚至可以写`i[p]`，但这很丑陋。

这在 C++ 中并不总是正确的（它赋予了您定义`operator []`等的能力......）。

我个人不喜欢手工编码`&p[i]` ，更喜欢`p+i`这种情况。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-24T06:29:31.320

这通常取决于具体情况。我认为没有经验法则。

在某些情况下，数组索引更好。例如，当您分配了一个数组时

```
char* ptr = malloc(SIZE); 
```

并且您需要`ptr`不更改的值，因为您想稍后释放它，然后您可以使用索引。

或者，如果您将指针作为函数参数

```
void func(char* ptr) 
```

并且您需要遍历数组，然后您可以增加指针本身，并且您不需要创建一个新变量来用作索引。

但是，在大多数情况下，这取决于您自己的喜好。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-24T07:03:31.090

“数组索引”只是包装“指针算法”的语法糖。它纯粹是装饰性的，只是另一种表示法，这意味着使用一个或另一个将是个人喜好问题。

通常隐藏在您所问问题背后的真正问题是何时使用随机访问以及何时使用顺序访问（“指针算术”意味着指针的顺序递增/递减不超过 1）。答案是：尽可能使用顺序访问，仅在必须时使用随机访问。

只要性能不受影响，依靠最小的需求集来实现算法总是一个更好的主意。随机访问是比顺序访问更强的要求，这意味着应在合理可能的情况下避免前者。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T07:04:45.527

在性能方面，最好使用指针算法（至少禁用编译器优化），因为在迭代数组时，您不必增加单独的变量。另见 K&R 第 97 页（第二版）。

否则，这只是编码风格的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T06:55:07.530

当编译时不知道数据结构的大小时，指针很有用。例如，当您不知道字符串的长度是多少，或者您期望有多少个整数等时。在这种情况下，指针可以根据需要动态分配内存。

另一方面，数组降低了灵活性。

但是，除了这种差异之外，还有更多。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-12-08T09:45:16.680

根据 MISRA C++ 2008（规则 5-0-15）：数组索引应是指针算术的唯一形式。

但这条规则有一个例外：

递增/递减运算符可用于由指向数组的指针实现的迭代器

```
template < typename IterType > 
uint8_t sum_values ( IterType iter, IterType end ) 
{ 
    uint8_t result = 0;
    while ( iter != end ) 
    { 
        result += *iter; 
        ++iter;              // Compliant by exception 
    }
    return result; 
}
void my_fn ( uint8_t * p1, uint8_t p2[ ] ) 
{ 
    uint8_t index = 0; 
    uint8_t * p3; 
    uint8_t * p4;
    *p1 = 0; 
    ++index; 
    index = index + 5;
    p1      = p1 + 5;     // Non-compliant – pointer increment 
    p1[ 5 ] = 0;          // Non-compliant – p1 was not declared as array 
    p3      = &p1[ 5 ];   // Non-compliant – p1 was not declared as array
    p2[ 0 ]     = 0; 
    p2[ index ] = 0;          // Compliant 
    p4          = &p2[ 5 ];   // Compliant 
}
uint8_t a1[ 16 ]; 
uint8_t a2[ 16 ];
my_fn ( a1, a2 ); 
my_fn ( &a1[ 4 ], &a2[ 4 ] );
uint8_t a[ 10 ]; 
uint8_t * p;
p          = a; 
*( p + 5 ) = 0;   // Non-compliant 
p[ 5 ]     = 0;   // Compliant
sum_values ( &a1[ 0 ], &a1[ 16 ] ); 
```

# iphone - 如何在方法中传递 Char 数组

> ID：11625195
> 
> 赞同：1
> 
> 时间：2012-07-24T06:19:20.190
> 
> 标签：iphone, objective-c, methods, char

任何人都可以帮助我在尝试时将 char 数组传递给方法，它只是复制一个索引值，所以

```
char c1[]={0x01};  
char c2[]={0x02};
char c3[]={0x03};
char *c[3];
c[0] = c1;
c[1] = c2;
c[2] = c3;//if i pass this char array to the below method only c[0] is copied 
 char* arrrr =[self mountLVparams:NULL :c :code_ward_arr];    
 //my method being this
-(char *)mountLVparams:(signed char *)initData :(char *)obj :(signed char *)codeWard 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:42:54.547

c 是指向指针的指针。你的方法签名应该像`-(char *)mountLVparams:(signed char *)initData :(char **)obj :(signed char *)codeWard`

```
char c1[]={0x01};  
char c2[]={0x02};
char c3[]={0x03};
char *c[3];
c[0] = c1;
c[1] = c2;
c[2] = c3;//if i pass this char array to the below method only c[0] is copied 
 char* arrrr =[self mountLVparams:NULL :c :code_ward_arr];     

-(char *)mountLVparams:(signed char *)initData :(char **)obj :(signed char *)codeWard
{
    int i;
    for(i=0;i<3;++i)
        printf("%d----%c", i,*obj[i]);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:07:10.113

我有一种解决方案，方法是将数组传递给您的函数，然后创建 char *

```
 const char c1[]={0x01};  
    NSString *s1 = [[NSString alloc] initWithCString:c1 encoding:NSUTF8StringEncoding]; //convert into string 

    const char c2[]={0x02};
    NSString *s2 = [[NSString alloc] initWithCString:c2 encoding:NSUTF8StringEncoding]; //convert into string 

    const char c3[]={0x03};
    NSString *s3 = [[NSString alloc] initWithCString:c3 encoding:NSUTF8StringEncoding]; //convert into string 

    NSArray *arr = [NSArray arrayWithObjects:s1,s2,s3,nil]; // adding all strings 
    [s1 release];
    [s2 release];
    [s3 release]; 
```

现在函数将是这样的，你将通过 arr(NSArray)：

```
-(char *)mountLVparams:(signed char *)initData :(NSArray *)arrChars :(signed char *)codeWard
{

int count = [arrChars count];
char *cargs = (char *) malloc(sizeof(char) * (count + 1));
//cargs is a pointer to 4 pointers to char

int i;
for(i = 0; i < count; i++) {
    NSString *s = [arrChars objectAtIndex:i];//get a NSString
    const char *cstr = [s cStringUsingEncoding:NSUTF8StringEncoding];//get cstring
    int len = strlen(cstr);//get its length
    char *cstr_copy = (char *) malloc(sizeof(char) * (len + 1));//allocate memory, + 1 for ending '\0'
    strcpy(cstr_copy, cstr);//make a copy
    cargs[i] = cstr_copy;//put the point in cargs
}
cargs[i] = NULL;
NSLog(@"%c | %c| %c ",cargs[0],cargs[1],cargs[2]);
return cargs;
} 
```

从字符串数组创建 char 的功劳归于 @yehnan 遵循 [Objective-c nsarray 到 c 数组](https://stackoverflow.com/questions/3091251/objective-c-nsarray-to-c-array)

像这样使用：

```
 char *cs = [self mountLVparams:(your arguments here and pass array here)];
    NSLog(@"%c | %c | %c",cs[0],cs[1],cs[2]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T09:32:42.137

也许，您会寻找以下内容，您可以在其中将`NSString`具有所需内容的对象作为参数传递：

```
NSString *_string = [NSString stringWithString:@"\x01\x02\x03"];
[self yourMethod:_string]; 
```

和里面`-yourMethod:`

```
- (void)yourMethod:(NSString *)stringWithChars {
    char _ch = [stringWithChars characterAtIndex:1]; // it gives back you an unsigned short but in this case you can use this value as char without any problem
    NSLog(@"chat at index #1 : %d, %c", _ch, _ch); // or do whatever you'd like to do.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T06:42:07.293

参数`c`是指向你的字符数组的指针。指针将指向数组的第一个地址，因此默认为`c[0]`。

您可以将其作为 NSstring 传递。`[NSString stringWithFormat:%s,c]`.

# php - IE中codeigniter中的文件上传：不允许您尝试上传的文件类型

> ID：11625198
> 
> 赞同：1
> 
> 时间：2012-07-24T06:19:38.083
> 
> 标签：php, codeigniter, internet-explorer, file-upload

我正在使用 codeigniter 和 jQuery 表单插件。

我正在尝试上传文件，但它不适用于 IE。

请检查我的控制器：

```
 if($fileCount >0)

    {

    //there are some files

    //configure upload

    $config['upload_path'] = 'crm_data/crm_customer_data';

    $config['allowed_types'] = 'zip|rar|doc|pdf|gif|jpg|jpeg|docx';

    $config["max_size"] = 2048;

    $config['encrypt_name'] = true;

    //loading upload

    $this->load->library("upload");

    $this->upload->initialize($config);

if($this->upload->do_upload("attach"))

        {

        $l = $this->upload->data();

        $logs["attachment"] =  $l["file_name"];

        }

    else

    {

    //some errors on upload                             exit(json_encode(array("status"=>FALSE,"reason"=>$this->upload->display_errors())));

    } 
```

这是html

```
<input type="file" id="attach" name="attach" /> 
```

它在除 IE 之外的其他浏览器中运行良好。

看到回复。

```
var_dump($_FILES)

array
  'attach' => 
    array
      'name' => string 'invoice_record_and_list.zip' (length=31)
      'type' => string '' (length=0)
      'tmp_name' => string 'C:\wamp\tmp\phpF467.tmp' (length=23)
      'error' => int 0
      'size' => int 1467474 
```

在 IE 中，我收到以下错误。

> 不允许您尝试上传的文件类型。

编辑：

我注意到 IE 上的 var_dump 给了我一个`""`for`type`但在 FF 我得到了`'type' => string 'application/x-zip-compressed' (length=28)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:05:36.753

这可能会有所帮助。

IE 不发送您的“zip”的 mime 类型（例如：）`'type' => string`。所以只需在您的 config/memi.ph 中附加一个带有类似文件类型的空值。

`'zip' => array('application/x-zip', 'application/zip', 'application/x-zip-compressed',"")`

# android - 尝试在 Android 中实现微调器时出现空指针异常

> ID：11625203
> 
> 赞同：0
> 
> 时间：2012-07-24T06:20:15.523
> 
> 标签：android, nullpointerexception, spinner

```
static final String[] Build_Options = new String[]
    {"A","B","C"};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    MapView mapView = (MapView) findViewById(R.id.Mapp);
    mapView.setBuiltInZoomControls(true);

      //InputStream is = mydbconnect();
   // InputStream is2 =mydbconnect2();

   // JSONArray jArray = getJSONobj(is);
   // JSONArray jArray2 = getJSONobj(is2); => Not relevant to this part of the code.

    Button alert = (Button) findViewById(R.id.button1);

    Spinner spinner = (Spinner) findViewById(R.id.spinner1);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(HelloGoogleMap.this, android.R.layout.simple_spinner_item, Build_Options);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    System.out.println("YESS!!!!!!");

    //ArrayAdapter<String> adapter = new ArrayAdapter<String>(HelloGoogleMap.this,android.R.layout.simple_spinner_item,List <String> spinnerArray);

    System.out.println("TEST");
    spinner.setAdapter(adapter);
    System.out.println("PASS"); 
```

* * *

返回的错误如下：

```
07-24 06:13:01.607: D/dalvikvm(959): GC freed 3589 objects / 247552 bytes in 117ms
07-24 06:13:02.577: D/dalvikvm(959): GC freed 2994 objects / 200040 bytes in 107ms
07-24 06:13:03.277: D/dalvikvm(959): GC freed 3838 objects / 262184 bytes in 144ms
07-24 06:13:03.346: I/System.out(959): YESS!!!!!!
07-24 06:13:03.357: I/System.out(959): NOOOOO!!!!
07-24 06:13:03.357: D/AndroidRuntime(959): Shutting down VM
07-24 06:13:03.357: W/dalvikvm(959): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
07-24 06:13:03.357: E/AndroidRuntime(959): Uncaught handler: thread main exiting due to uncaught exception
07-24 06:13:03.376: E/AndroidRuntime(959): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.hellogooglemap/com.example.hellogooglemap.HelloGoogleMap}: java.lang.NullPointerException
07-24 06:13:03.376: E/AndroidRuntime(959):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
07-24 06:13:03.376: E/AndroidRuntime(959):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
07-24 06:13:03.376: E/AndroidRuntime(959):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
07-24 06:13:03.376: E/AndroidRuntime(959):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
07-24 06:13:03.376: E/AndroidRuntime(959):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-24 06:13:03.376: E/AndroidRuntime(959):  at android.os.Looper.loop(Looper.java:123)
07-24 06:13:03.376: E/AndroidRuntime(959):  at android.app.ActivityThread.main(ActivityThread.java:4363)
07-24 06:13:03.376: E/AndroidRuntime(959):  at java.lang.reflect.Method.invokeNative(Native Method)
07-24 06:13:03.376: E/AndroidRuntime(959):  at java.lang.reflect.Method.invoke(Method.java:521)
07-24 06:13:03.376: E/AndroidRuntime(959):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-24 06:13:03.376: E/AndroidRuntime(959):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-24 06:13:03.376: E/AndroidRuntime(959):  at dalvik.system.NativeStart.main(Native Method)
07-24 06:13:03.376: E/AndroidRuntime(959): Caused by: java.lang.NullPointerException
07-24 06:13:03.376: E/AndroidRuntime(959):  at com.example.hellogooglemap.HelloGoogleMap.onCreate(HelloGoogleMap.java:85)
07-24 06:13:03.376: E/AndroidRuntime(959):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-24 06:13:03.376: E/AndroidRuntime(959):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
07-24 06:13:03.376: E/AndroidRuntime(959):  ... 11 more
07-24 06:13:03.406: I/dalvikvm(959): threadid=7: reacting to signal 3
07-24 06:13:03.477: I/dalvikvm(959): Wrote stack trace to '/data/anr/traces.txt'
07-24 06:18:03.446: I/Process(959): Sending signal. PID: 959 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:23:38.690

85号线是哪条线？

可能您的`spinner`为空，请检查视图 ID。

# php - Wordpress 3 最新博客文章按从左到右而不是从右到左的顺序排列

> ID：11625205
> 
> 赞同：0
> 
> 时间：2012-07-24T06:20:28.973
> 
> 标签：php, wordpress

我有以下代码来显示 3 个最新的博客文章。目前，博客文章从右到左显示，而不是从左到右显示。

```
<?php $counter = 3;
   $recentPosts = new WP_Query();
   $recentPosts->query("showposts=3");

?>
<?php while ($recentPosts->have_posts()) : $recentPosts->the_post(); ?>
<div class="box<?php echo $counter--; ?>"> 
```

如何让最新的博客首先出现？首先，我的意思是在左边而不是在右边。感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:30:32.027

```
$recentPosts->query("showposts=3&order=DESC"); 
```

阅读[此](http://codex.wordpress.org/Class_Reference/WP_Query)内容以获取有关查询的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:34:20.520

只需编辑

```
$recentPosts->query("showposts=3, order=DESC"); 
```

# java - 维护以前搜索的历史记录

> ID：11625206
> 
> 赞同：2
> 
> 时间：2012-07-24T06:20:32.243
> 
> 标签：java, mysql

我正在做一个项目，客户可以在其中找到离他最近的地方，他可以购买一些特定的产品。他通过发送短信请求服务。

在这里，我需要维护其他客户之前搜索的历史记录，并使用此历史记录有效地回复当前客户。

是否有任何有效的方法来维护历史记录，并且它也需要更新。我正在使用 Java 和 MySQL。有没有办法在这里使用知识库概念？如果是，如何将知识库应用到我们的系统中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:28:45.057

您可以创建一个包含以下字段的记录表（在数据库、内存缓存等中）：（请求、响应、时间戳），并在进行完整搜索之前检查此表。当您更改主数据库中的任何内容时，所有链接的记录都应从此临时表中重命名。需要时，您可以从历史记录中删除记录。

# c# - 在 WPF 中安全地访问 UI（主）线程

> ID：11625208
> 
> 赞同：110
> 
> 时间：2012-07-24T06:20:49.457
> 
> 标签：c#, .net, wpf, multithreading, datagrid

我有一个应用程序，每次我正在观看的日志文件以下列方式更新（附加新文本）时更新我的​​数据网格：

```
private void DGAddRow(string name, FunctionType ft)
    {
                ASCIIEncoding ascii = new ASCIIEncoding();

    CommDGDataSource ds = new CommDGDataSource();

    int position = 0;
    string[] data_split = ft.Data.Split(' ');
    foreach (AttributeType at in ft.Types)
    {
        if (at.IsAddress)
        {

            ds.Source = HexString2Ascii(data_split[position]);
            ds.Destination = HexString2Ascii(data_split[position+1]);
            break;
        }
        else
        {
            position += at.Size;
        }
    }
    ds.Protocol = name;
    ds.Number = rowCount;
    ds.Data = ft.Data;
    ds.Time = ft.Time;

    dataGridRows.Add(ds); 

    rowCount++;
    }
    ...
    private void FileSystemWatcher()
    {
        FileSystemWatcher watcher = new FileSystemWatcher(Environment.CurrentDirectory);
        watcher.Filter = syslogPath;
        watcher.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite
            | NotifyFilters.FileName | NotifyFilters.DirectoryName;
        watcher.Changed += new FileSystemEventHandler(watcher_Changed);
        watcher.EnableRaisingEvents = true;
    }

    private void watcher_Changed(object sender, FileSystemEventArgs e)
    {
        if (File.Exists(syslogPath))
        {
            string line = GetLine(syslogPath,currentLine);
            foreach (CommRuleParser crp in crpList)
            {
                FunctionType ft = new FunctionType();
                if (crp.ParseLine(line, out ft))
                {
                    DGAddRow(crp.Protocol, ft);
                }
            }
            currentLine++;
        }
        else
            MessageBox.Show(UIConstant.COMM_SYSLOG_NON_EXIST_WARNING);
    } 
```

当为 FileWatcher 引发事件时，因为它创建了一个单独的线程，当我尝试运行 dataGridRows.Add(ds); 要添加新行，程序只会在调试模式下崩溃而没有任何警告。

在 Winforms 中，这很容易通过使用 Invoke 函数解决，但我不确定如何在 WPF 中解决这个问题。

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2012-07-24T06:24:59.893

您可以使用

[`Dispatcher.Invoke(Delegate, object[])`](http://msdn.microsoft.com/en-us/library/cc647509.aspx)

在`Application`'s（或任何`UIElement`'s）调度程序上。

例如，您可以像这样使用它：

```
Application.Current.Dispatcher.Invoke(new Action(() => { /* Your code here */ })); 
```

或者

```
someControl.Dispatcher.Invoke(new Action(() => { /* Your code here */ })); 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-07-24T06:31:33.220

最好的方法是`SynchronizationContext`从 UI 线程获取并使用它。此类抽象了对其他线程的编组调用，并使测试更容易（与`Dispatcher`直接使用 WPF 相比）。例如：

```
class MyViewModel
{
    private readonly SynchronizationContext _syncContext;

    public MyViewModel()
    {
        // we assume this ctor is called from the UI thread!
        _syncContext = SynchronizationContext.Current;
    }

    // ...

    private void watcher_Changed(object sender, FileSystemEventArgs e)
    {
         _syncContext.Post(o => DGAddRow(crp.Protocol, ft), null);
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-01T07:24:04.803

使用[[Dispatcher.Invoke(DispatcherPriority, Delegate)]](https://msdn.microsoft.com/en-us/library/ms591593(v=vs.110).aspx)从另一个线程或后台更改 UI。

**步骤 1**。使用以下命名空间

```
using System.Windows;
using System.Threading;
using System.Windows.Threading; 
```

**步骤 2**。将以下行放在您需要更新 UI 的位置

```
Application.Current.Dispatcher.Invoke(DispatcherPriority.Background, new ThreadStart(delegate
{
    //Update UI here
})); 
```

> **句法**
> 
> ```
> [BrowsableAttribute(false)]
> public object Invoke(
>   DispatcherPriority priority,
>   Delegate method
> ) 
> ```
> 
> **参数**
> 
> `priority`
> 
> 类型：`System.Windows.Threading.DispatcherPriority`
> 
> 调用指定方法的优先级，相对于 Dispatcher 事件队列中的其他挂起操作。
> 
> `method`
> 
> 类型：`System.Delegate`
> 
> 不带参数的方法的委托，该委托被推送到 Dispatcher 事件队列。
> 
> **返回值**
> 
> 类型：`System.Object`
> 
> 被调用的委托的返回值；如果委托没有返回值，则返回 null。
> 
> **版本信息**
> 
> 自 .NET Framework 3.0 起可用

# javascript - 取消绑定/绑定单击 jquery 选择框插件

> ID：11625209
> 
> 赞同：0
> 
> 时间：2012-07-24T06:20:50.220
> 
> 标签：javascript, jquery

我正在使用 jquery 插件来自定义选择框。我的问题是我想绑定/取消绑定单击将显示下拉列表的箭头按钮。

我已经上传了我的小提琴 - [http://jsfiddle.net/P6PeV/1/](http://jsfiddle.net/P6PeV/1/) 所以基本上点击“取消绑定”它应该从组件中删除控件，点击“绑定”它应该绑定控件。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:52:54.897

为了正确地做到这一点，我会稍微修改插件。这个小提琴显示了我建议的主要内容：http: [//jsfiddle.net/P6PeV/5/](http://jsfiddle.net/P6PeV/5/)

正如您所看到的，它解绑很好，不幸的是，hte 插件的编写方式很难正确重新绑定（我只是触发显示/隐藏）。

我建议对插件的更改是：

```
replacement.find('.' + settings.className + '-moreButton').click(function(){
      if($(this_).attr('disabled') != 'disabled') { // <============= THIS LINE
        var thisMoreButton = jQuery(this);
        var otherLists = jQuery('.' + settings.className + '-list')
            .not(thisMoreButton.siblings('.' + settings.className + '-list'));
        hideList( otherLists );
        var thisList = thisMoreButton.siblings('.' + settings.className + '-list');

        if(thisList.filter(":visible").length > 0) {
            hideList( thisList );
        }else{
            showList( thisList );
        }
      } //<======== END IF 
```

然后你不需要解绑任何东西..只需：

```
$('#unbind').click(function() {
    $("#selectbox1").attr('disabled','disabled');
})
$('#bind').click(function() {
    $("#selectbox1").removeAttr('disabled');
}) 
```

# iphone - 使用滑块拇指移动标签

> ID：11625213
> 
> 赞同：2
> 
> 时间：2012-07-24T06:20:54.447
> 
> 标签：iphone, objective-c, sdk

有没有办法通过滑块拇指的移动来移动标签（显示滑块的值）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T06:32:13.797

是的，请参阅[此示例](https://github.com/elc/ELCSlider)。
这里，它是一个带有 CGRect 的 UIPopoverController。每当滑块值发生变化时，您都可以使用该 CGRect 给您的 UILabel 框架。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-03-17T02:39:50.860

使用这个库。它允许将自定义视图放在拇指上。

[https://github.com/Hitesh136/HASlider](https://github.com/Hitesh136/HASlider)

# c++ - 我如何检测我的局域网连接是否在 C++ 中关闭/启动

> ID：11625214
> 
> 赞同：2
> 
> 时间：2012-07-24T06:20:56.647
> 
> 标签：c++, qt, visual-studio-2008

我有一台带有 2 个局域网端口的电脑，将其中一个用于通信目的，想知道我的软件是否可以检测局域网连接是否启动/关闭并在我的软件 gui 上显示状态。语言是C++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:16:51.543

在 Qt`QNetworkInterface::flags()`中返回一组描述接口的标志。其中有`QNetworkInterface::IsUp`. 您还可以检查`QNetworkInterface::IsLoopBack`

# mysql - 带有 mysql 的 Aptana 用于 RoR

> ID：11625216
> 
> 赞同：0
> 
> 时间：2012-07-24T06:21:21.780
> 
> 标签：mysql, ruby-on-rails, aptana3, ubuntu-12.04

我在我的 Ubuntu 系统中安装了 mysql，并且我有用于 RoR 的 Aptana，如何将 mysql 与 aptana 集成到我的 RoR 应用程序中。他们有什么插件或我必须做的事情，或者我能做什么..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:25:16.890

您需要在`config/database.yml`. Rails 会在您启动它时查看该文件并根据您的环境连接到它。

有关 database.yml 通常看起来如何的示例，请参[见此](http://code.google.com/p/bibapp/source/browse/trunk/config/database.yml.example?r=1007)。另请注意，在 Rails 3 及以上版本上，mysql 适配器实际上是 mysql2（在大多数情况下）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:00:54.930

您必须使用此命令创建应用程序。

rails new app_name -d mysql

现在您必须在 database.yml 文件中提供数据库凭据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:40:12.460

您必须使用以下命令安装 mysql 或 mysql2 gem：
`gem install mysql2`
在 Gemfile 中添加以下代码：
`gem 'mysql2'`
然后安装 bundle，并设置 config/database.yml 文件如下：测试和生产的设置相同。使用以下命令创建数据库：并使用以下命令迁移数据库它可能会工作..
`development: adapter: mysql2
database: sblog_development
username: root
password: root_password
host: 127.0.0.1`

`rake db:create`
`rake db:migrate`

# hbase - 从 hbase 读取数据并插入 postgres

> ID：11625221
> 
> 赞同：0
> 
> 时间：2012-07-24T06:21:31.843
> 
> 标签：hbase

我正在使用 HBase 存储数据，但后来为了满足我的要求，我想将数据从 HBase 导出到 RDBM，如 mysql 或 postgres。我该怎么做？我通过这种方式尝试过，但找不到解决方案。请帮我。

这是我的示例代码：

```
/** my HbaseRawDataReader class **/

public class HbaseRawDataReader {

    List<KeyValue> list = new ArrayList<KeyValue>();

    static Configuration config = HBaseConfiguration.create();

   public RadarTrack insertDBvo=new RadarTrack();// pojo class

    public static void main(String args[])

    {

        HbaseRawDataReader hr=new HbaseRawDataReader();

    //  hr.getAllRecord(key, value);

    }

    public  void getAllRecord () {

                try{

                //  This instantiates an HTable object that connects you to the table trackrecord_table

                         HTable table = new HTable(config, "trackrecord_table");

                         Scan s = new Scan();

                         s.addColumn(Bytes.toBytes("radar"), Bytes.toBytes("IpAdderss"));

                         s.addColumn(Bytes.toBytes("radar"), Bytes.toBytes("Trackid"));

                         s.addColumn(Bytes.toBytes("radar"), Bytes.toBytes("Latitude"));

                         s.addColumn(Bytes.toBytes("radar"), Bytes.toBytes("Longitude"));

                         s.addColumn(Bytes.toBytes("radar"), Bytes.toBytes("Velocity"));

                         s.addColumn(Bytes.toBytes("radar"), Bytes.toBytes("Course"));

                         ResultScanner rs = table.getScanner(s);

                         for(Result r:rs){

                             for(KeyValue vo : r.raw()){

//                              System.out.print(new String(vo.getRow()) + " ");

//                              System.out.print(new String(vo.getFamily()) + ":");

//                              System.out.print(new String(vo.getQualifier()) + " ");

//                              System.out.print(vo.getTimestamp() + " ");

//                              System.out.println(new String(vo.getValue()));

                                String IPAddress =  vo.getQualifier().toString();

                                String track_ID =  vo.getQualifier().toString();

                                String latitude =  vo.getQualifier().toString();

                                String longitude =  vo.getQualifier().toString();

                                String sog =  vo.getQualifier().toString();

                                String cog =  vo.getQualifier().toString();

                                insertDBvo.setDirection(Double.parseDouble(cog));

                                insertDBvo.setIpAddress(IPAddress);

                                insertDBvo.setLatitude(latitude);

                                insertDBvo.setLongitude(longitude);

                                insertDBvo.setVelocity(Double.parseDouble(sog));

                                insertDBvo.setTrackId(Integer.parseInt(track_ID));

                                CsdssDAOImpl.getInstance().insertToDB(insertDBvo); 

                             }

                         }

                } catch (IOException e){

                        e.printStackTrace();

                    }

    }

}

/** for postgres connection***/
public class ConnectionUtil {

    static Properties properties = new Properties();

    static Connection  connection = null;

    public static Connection getConncection() {

        if(null==connection){

//      if(properties.isEmpty()){

            try {

                properties.load(ConnectionUtil.class.getClassLoader()

                        .getResourceAsStream("radar.properties"));

            } catch (IOException e) {

                e.printStackTrace();

            }

//      }

        String driverName = properties.getProperty("drivers");

        String url = properties.getProperty("url");

        String userName = properties.getProperty("userName");

        String password = properties.getProperty("password");

    //  Connection connection = null;

        try {

            // DriverManager

            // driverManager=(DriverManager)Class.forName(properties.getProperty("driverName")).newInstance();

            Class.forName(driverName);

            connection = DriverManager.getConnection(url, userName, password);

        } catch (ClassNotFoundException e) {

            e.printStackTrace();

        } catch (SQLException e) {

            e.printStackTrace();

        }

        }

        return connection;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:58:17.873

尝试这样的事情

```
HTable table = new HTable(config, "trackrecord_table");
Scan s = new Scan();
ResultScanner rs = table.getScanner(s);

for(Result r : rs) {
    NavigableMap<byte[], byte[]> familyMap = r.getFamilyMap(Bytes.toBytes("radar");
    String ipAdress = Bytes.toString(familyMap.get(Bytes.toBytes("IpAdderss")));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T06:12:45.250

使用 sqoop 将数据从 HBase 移动到数据库。

# python - 在将 xml 文件提供给解析器之前如何忽略 xml 标记中的特殊字符

> ID：11625224
> 
> 赞同：1
> 
> 时间：2012-07-24T06:21:52.527
> 
> 标签：python, xml

嗨，目前我正在使用`xml.sax.handler`解析 xml 文件。

下面是我的**file.xml**代码：

```
<?xml version="1.0" encoding="utf-8"?>
<sturp>
  <gear>
   <UL>
   <LI><I>Free Private Housing or a Generous Housing Allowance</I></LI>
   <LI><I>$50K in Free Life Insurance coverage</I></LI>
   </UL>
   <P style="MARGIN: 0in 0in 0pt" class="MsoNormal"><FONT size="3"><SPAN style="FONT-FAMILY: Symbol; COLOR: black; mso-ascii-font-family: 'Times New Roman'">�&lt;/SPAN><SPAN style="COLOR: black"><FONT face="Times New Roman"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>Position will manage 24 ED Rooms with 24/7 accountability<o:p></o:p></FONT></SPAN></FONT></P>
   <DIV>&nbsp;</DIV>
  </gear> 
</sturp> 
```

下面是我的代码

```
xmlFilePath = 'user/documents/file.xml'

try:
    parser = xml.sax.make_parser( )
    handler = FeedHandler( conn, clientSiteId, clientId, documentElementName, jobElementName )
    handler.setMapping( mapping )
    parser.setContentHandler(handler)
    parser.setEntityResolver(handler)

    parser.parse(open(xmlFilePath))

except (xml.sax.SAXParseException), e:
        print "*** PARSER error: %s" % e 
```

**输出：**

```
*** PARSER error: user/documents/file.xml:8:150: not well-formed <invalid token>
*** PARSER error: user/documents/file.xml:9:1: not well-formed <invalid token> 
```

实际上给我的源 xml 文件不是有效的 xml 格式，但我需要解析它。如何`&nbsp;`在将其提供给上述代码中的解析器之前从 xml 文件中忽略和 �（也应该转义所有错误和无效的 xml 标记）。

提前致谢........

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:07:14.210

如果您只是想`&[a-z]+;`从输入中替换实体，则可以使用下面我的破解解决方案。但请注意，如果您希望解析器正常工作，您仍然应该为解析器提供一个有效的 xml 文件。

```
import os, re 
```

对于解析器：

```
def ignore_open( p ):
  temf = 'temp_file'
  with open(temf,'wt') as temp:
    o = open(p,'r')
    temp.write(re.sub("\&[^\;]+;",'', o.read()))
  rs = open(temf)
  os.unlink(temf)
  return rs 
```

结果

```
>>> parser.parse(ignore_open(xmlFilePath)) 
```

未经测试的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T09:24:11.687

你说你正在解析 XML 文件，但你错了。您正在解析非 XML 文件。XML 解析器被设计用来解析 XML，如果你给他们非 XML，他们会抱怨的。

如果您希望您的系统以非 XML 格式处理消息，那么首先要做的是放弃从系统描述中提及 XML 以及使用 XML 工具进行解析的所有想法。您不必在系统中使用 XML，但是使用几乎是 XML 但不完全是 XML 的东西绝对没有意义。

另一种方法是更改​​生成这些消息的程序，以便生成正确格式的 XML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T07:28:23.083

当您的文件有效时，XML 最有意义。

这*不是*一个有效的 XML 文件，您的解析器可以正确停止。例如`&nbsp;` *必须定义*的实体如。所以**你的文件应该有一个文档类型**。这不仅仅是为了好玩，而且文档类型实际上定义了实体等。

如果您想要一个尽力而为的健壮和宽容的解析器，我建议您查看`beautifulsoup`. 它可以解析大多数 HTML 和类似 XML 的文件，而不需要完全定义所有内容。那时它仍然不是有效的 XML，但它可用于例如用户弄乱您的数据文件的情况。

**从文件中删除字符是一种 HACK，迟早会中断。**我不建议这样做。

# magento - 如何在 magento 中添加评论有用的投票系统？

> ID：11625227
> 
> 赞同：1
> 
> 时间：2012-07-24T06:21:54.977
> 
> 标签：magento, voting-system, review

我想在 magento 评论系统中添加一个竖起大拇指/不喜欢的系统，但不知道从哪里开始。控制审查的文件是什么，我将如何扩展它以满足我的需要？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:48:17.550

Magento Connect 上有一个扩展，[它](http://www.magentocommerce.com/magento-connect/detailed-review-6492.html)具有类似的（实际上我猜只是措辞不同）功能。您可以安装/下载它并检查源代码。[你可以在这里](http://mage-workshop.com/sony-vaio-vgn-txn27n-b-11-1-notebook-pc.html)查看演示。注意“这篇评论有帮助吗？” 在审查块的底部。

# ruby - gem 二进制文件可以自带标签补全吗？

> ID：11625229
> 
> 赞同：3
> 
> 时间：2012-07-24T06:22:30.060
> 
> 标签：ruby, bash, shell, rubygems

我开发了一个包含可执行脚本（rubygems 术语中的[应用程序文件）的 gem。](http://docs.rubygems.org/read/chapter/20#bindir)调用时，我想完成给定目录（不是当前工作目录）中的文件名，如下所示：

```
foo edit my<tab> 
```

扩展为：

```
foo edit myfile 
```

我能做的是包含一个安装 shell 完成的脚本。如果这是唯一的解决方案——很好。但我想知道是否有一种方法可以让用户从额外的步骤中解放出来，并直接在我的 gem 中包含完成。

那么：有没有办法让 gem 自带 tab 补全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:56:10.763

当您键入命令以启动脚本时，您的脚本尚未运行。它不能在自己的参数仍在输入时干预它们的处理。如果可能，您可以让该`gem`文件安装一个 bash 完成文件并修改用户的`~/.bashrc`文件以在安装过程中加载它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:28:20.620

看看 Ruby 的[Abbrev](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/abbrev/rdoc/Abbrev.html)模块。（About.com 也有一些[有用的信息](http://ruby.about.com/od/advancedruby/ss/Calculating-Abbreviations.htm)。）

从文档：

```
计算给定字符串集的唯一缩写集。

需要'缩写'
需要'pp'

pp Abbrev::abbrev(['ruby', 'rules']).sort
生成：

[[“擦”，“红宝石”]，
 [“红宝石”，“红宝石”]，
 [“规则”，“规则”]，
 [“规则”，“规则”]，
 [“规则”，“规则”]]
还向类 Array 添加了一个缩写方法。

```

我会读取目录，将文件和子目录传递给 Abbrev，然后将结果转换为哈希。观看用户键入。如果他们按下`Tab`查看他们输入的内容是否与哈希中的键匹配。如果它确实他们键入的内容是唯一的，并且可以解析为该元素的值。

这是如何将 Abbrev 的输出转换为哈希的方法：

```
irb(main):009:0> hash = Hash[%w[ruby rules].abbrev]
=> {"rub"=>"ruby", "rule"=>"rules", "rul"=>"rules", "ruby"=>"ruby", "rules"=>"rules"} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-16T23:42:34.107

虽然[chepner](https://stackoverflow.com/users/1126841/chepner)得出了安装是不可避免的正确结论，但我建议看看其他一些项目是如何解决这个问题的。

* * *

Travis CI *travis* gem 提供在第一次执行时安装完成。它将完成脚本保存到*~/.travis/travis.sh*然后将以下内容附加到*.bashrc*：

```
# added by travis gem
[ -f ~/.travis/travis.sh ] && source ~/.travis/travis.sh 
```

* * *

前面的例子有点侵入性。有关更自由放任的方法，请参阅 Python 的`pip`（类似于 Ruby 的`gem`）。它有一个隐藏的完成选项，可以将 bash 或 zsh 完成脚本打印到标准输出。由用户决定如何获取它。

`pip completion --bash`输出以下内容：

```
# pip bash completion start
_pip_completion()
{
    COMPREPLY=( $( COMP_WORDS="${COMP_WORDS[*]}" \
                   COMP_CWORD=$COMP_CWORD \
                   PIP_AUTO_COMPLETE=1 $1 ) )
}
complete -o default -F _pip_completion pip
# pip bash completion end 
```

在一个有点不同但相关的注释上……如果你看一下前面提到的完成脚本，你会注意到它做了一些相当奇怪的事情。它使用第三个选项，而不是使用完成的静态列表（必须经常更新并且容易出现不准确）或通过解析帮助消息（通常慢得令人无法接受）动态生成完成。它直接传递命令行状态`pip`以使其生成完成。

* * *

Perhaps the most relevant, but also the grandest approach would be to create a global completion script for Ruby gems. The user simply has to install the one global completion gem (there is no getting around this) and then completions are immediately available for any other gems. As far as I know, no one has implemented this in Ruby. For a Python implementation, see [argcomplete](https://argcomplete.readthedocs.org/en/latest/#activating-global-completion).

Installation is as follows:

```
pip install argcomplete
activate-global-python-argcomplete --dest=/path/to/bash_completion.d 
```

Scripts are easily adapted. It is then essentially a one-liner to pass your parser object to argcomplete.

# javascript - Qunit 不可见的功能

> ID：11625233
> 
> 赞同：2
> 
> 时间：2012-07-24T06:22:44.307
> 
> 标签：javascript, function, global-variables, qunit

大家好，我是 JavaScript 新手，正在使用 Quint 框架对我的函数进行单元测试。但我遇到了一个问题，需要专家的帮助

这是我的问题

我有一个像这样的名为 calc.js 的文件

```
var calc; // global variable
(function(){
  calc = (function(){
        function calc(container, options) {
           this._container = container;
           this._jq_container = $(container);
           this._options = options || {};
           this.setupDefaults();

        }
        calc.prototype.setupDefaults = function() {
           var _self = this;
          _self._options.type = _self._options.type ? _self._options.type : 'add';
        };
        calc.prototype.add = function (val1, val2) { 
            return val1 + val2;
        };
        calc.prototype.sub = function (val1, val2) { 
            return val1 - val2;
        }; 
  return calc;
  })();
  $.fn.calc = function(options){
    this.each(function(){
      return new calc(this, options);
    });
  };
})(); 
```

现在我有一个 qunit 的 html 文件，像这样

```
<!DOCTYPE html>  
<html>  
<head>  
    <title>QUnit Test Suite</title>  
        <link rel="stylesheet" href="qunit/qunit.css">
    <script src="qunit/qunit.js"></script>
        <script src="http://code.jquery.com/jquery-1.7.2.js" type="text/javascript"></script>
    <script type="test/javascript" src="calc.js"></script>   
 <script>
  $(document).ready(function(){

test('add function test', function() { 

 equal(calc.add(2,4),"6" ,"function working correctly");
 /*I have also tried to access add function using some other method but alway got an error*/
});

});
</script>
</head>  
<body>  
    <h1 id="qunit-header">QUnit Test Suite</h1>  
    <h2 id="qunit-banner"></h2>  
    <div id="qunit-testrunner-toolbar"></div>  
    <h2 id="qunit-userAgent"></h2>  
    <ol id="qunit-tests"></ol>  
</body>  
</html> 
```

我的 html 和 calc.js 都在同一个文件中当我运行这个文件时，我得到一个错误，即 calc 没有定义

我不明白为什么我将 calc 设为全局。我也尝试过使用`window.calc = calc`，但都是徒劳的，谁能指导我如何在我的html测试文件中访问这些功能任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:41:27.553

我在 jsfiddle.net 中运行了您的代码块，但您的函数调用`calc.add(2,4);`没有运行。

我将调用更改为`calc.prototype.add(2,4)`，我可以按预期调用您的函数。我建议您将其添加`.prototype`到您的 QUnit 测试中？

# telerik - Kendo DatePicker 无法验证自定义日期格式

> ID：11625237
> 
> 赞同：21
> 
> 时间：2012-07-24T06:22:59.890
> 
> 标签：telerik, asp.net-mvc-4, kendo-ui

我正在使用 Kendo DatePicker 编辑在我的 ASP.NET MVC 4 项目的 Kendo Grid 中显示的日期字段。为了让用于日期字段的 DatePicker 使用自定义日期格式字符串，我将`Date.cshtml`文件夹下的文件更新`EditorTemplates`为以下内容：

```
@(Html.Kendo().DatePickerFor(m => m).Format("dd/MM/yyyy")) 
```

通过这样做，我设法让 DatePicker 显示我想要的格式。但是，它无法通过手动键入或从弹出日历中选择输入的某些日期进行验证。

经过进一步调查，我可以说 DatePicker 正在根据`M/d/Y`格式验证日期。这个假设是基于我的基础，即 2012 年 12 月 1 日是有效日期，而 2012 年 13 月 1 日不是。

我还尝试添加`.ParseFormat("dd/MM/yyyy")`到 DatePicker 声明的末尾，`Date.cshtml`但它没有解决任何问题。所以我会说这绝对是一个错误，我稍后会向 Telerik 报告。

但就目前而言，我正在寻找一种解决方法来使其正常工作。我发现我可以`kendo.ui.validator.rules.mvcdate`在 Javascript 中重写以拥有自己的验证功能。虽然这在 Chrome 中运行良好，但它在 IE9 中不起作用。

那么，有什么想法可以让 DatePicker 接受`dd/MM/yyyy`输入格式吗？提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-25T08:33:26.297

在内部，ASP.NET MVC 的日期验证规则（不显眼的客户端验证）使用[kendo.parseDate(string)](http://docs.kendoui.com/getting-started/framework/globalization/dateparsing)方法，如果未定义格式/s，则该方法在内部将使用[预定义的日期模式。](http://docs.kendoui.com/getting-started/framework/globalization/definecultureinfo)我想在您的情况下，默认文化是“en-US”，这就是验证失败的原因，因为“dd/MM/yyyy”格式的日期被认为是无效的。一种可能的解决方案是覆盖日期验证规则（如您所做的那样）并使用特定格式解析字符串。另一个选项是为页面设置差异文化设置。[例如，“de-DE”文化的短日期格式是“dd/MM/yyyy”。](http://demos.kendoui.com/web/globalization/index.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-04-09T09:33:20.903

我使用这种方法，它工作正常..

在您的页面中添加这两行..

```
<script src="@Url.Content("~/Scripts/jquery.validate.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")"></script> 
```

然后覆盖jQuery日期验证方法..

```
<script>
    $(document).ready(function () {
        kendo.culture("en-MY"); //your culture
        $.validator.addMethod('date',
           function (value, element) {
               return this.optional(element) || kendo.parseDate(value)
           });
    });
</script> 
```

同时在我的`Web.config`我有这个...

```
<system.web>
    <globalization uiCulture="en-MY" culture="en-MY"></globalization>
</system.web> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-19T13:25:12.423

```
 [DataType(DataType.Date)]
  [DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode = true)]
  [Required(ErrorMessage = "Pick a date from Kendo Date Picker")]
   public DateTime mydate{ get; set; }

    @(Html.Kendo().DatePickerFor(m=>m.mydate)
                .Name("MyDate")
                .Format("dd/MM/yyyy")
                 .ParseFormats(new string[] {"dd/MM/yyyy"})) 
```

/*添加脚本 document.ready 函数*/

```
 $(document).ready(function () { kendo.culture("en-GB");

         $.validator.methods['date'] = function (value, element) {
    var check = false;
    var re = /^\d{1,2}\/\d{1,2}\/\d{4}$/;
    if (re.test(value)) {

        var adata = value.split('/');
        var dd = parseInt(adata[0], 10);

        var mm = parseInt(adata[1], 10);
        var yyyy = parseInt(adata[2], 10);
        var xdata = new Date(yyyy, (mm - 1), dd);

        if ((xdata.getFullYear() == yyyy) && (xdata.getMonth() == (mm - 1)) && 
            (xdata.getDate() == dd)) {

            check = true;
        }
        else {
            alert(value);
            check = false;
        }

    } else
        check = false;
    return this.optional(element) || check;
} 
```

});

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T16:17:09.497

我更改了日期验证规则：

```
$.validator.methods.date = function (value, element) {
    return this.optional(element) || /^\d\d?-\w\w\w-\d\d\d\d/.test(value);
}; 
```

我的格式与您的略有不同，但您应该可以修改它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-08T07:29:25.457

[我在这里](https://stackoverflow.com/questions/27802711/kendo-gantt-mvc-is-parsing-dates-on-us-calendar-im-in-the-uk)使用甘特图组件时遇到了同样的问题。Telerik 支持通过将我推荐到[此处](http://docs.telerik.com/kendo-ui/aspnet-mvc/globalization)，使我处于正确的位置。

我的关键遗漏是我没有在我的 _Layout.vbhtml 文件中包含以下内容：

```
<script>
kendo.culture("en-GB");
</script> 
```

一旦包含（连同我的 JS 包中的适当 kendo.culture 脚本），助手就开始按预期运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-04T01:48:23.120

简单的答案是不要使用自定义日期格式。只需始终明确执行 .Format("MM/dd/yyyy") 并且不要使用 "dd/MM/yyyy" （"yyyy-MM-dd" 或 "MMM d, yyyy" 可能没问题）。并在控制面板或 Web.config 中将您的 Web 服务器设置为使用美国区域设置。

现在解释问题以及如何实际使 dd/MM/yyyy 工作：

剑道日期验证使用默认的剑道文化日期格式 kendo.culture().calendar.patterns.d（和 .t 表示时间）。如果您直接设置它或应用不同的文化，则会设置验证的日期格式。它使用 kendo.parseDate 所以像“MMM d, yyyy”这样的东西会很好，但是如果 d > 12 并且正在使用默认的美国文化，像“dd/MM/yyyy”这样的东西将无法验证（请参阅 kendo Globalization demo 了解如何切换文化）。

发生这种情况的原因是因为 DatePicker.Format(...) 略有损坏。这是 kendo.aspnetmvc.js 中的一个错误，它提供了一个替代日期验证功能，它忽略 DatePicker 格式，只使用当前文化日期格式运行 parseDate。这是固定的javascript：

```
 date: function(input) {
        var dp = input.data("kendoDatePicker") || input.data("kendoDateTimePicker");
        if (dp != undefined) {
            return input.val() === "" || kendo.parseDate(input.val(), dp.options.format) !== null;
        }

        return input.val() === "" || kendo.parseDate(input.val()) !== null;
    }, 
```

此外，在 kendo.validator.js/kendo.web.js 中的日期验证器函数中存在一个小错误，这使得 Internet Explorer 中网格上的日期验证总是失败。

此外，确保您的网络服务器全球化设置为美国以匹配剑道文化（在 Web.config 或 Windows 区域控制面板中）。Firefox 发布 MM/dd/yyyy 并且网络服务器需要匹配它。此外，如果您未明确指定 DatePicker.Format，则 Web 服务器区域日期格式将应用于所有客户端浏览器。因此，如果您的 Web 服务器在 Windows 的控制面板中设置了加拿大/英国日期格式，则 kendo 网格 DatePickers 默认为 dd/MM/yyyy，然后在验证中出错，并且当 firefox 发布到 Web 服务器时再次出错（firefox 发布下的 kendo 默认文化MM/dd/yyyy 因此，如果您的 Web 服务器需要 dd/MM/yyyy，mvc 日期绑定失败）。

注意：如果您更喜欢使用非 mvc 日期验证器：删除 data-val-date 属性。添加：数据类型=\"日期\" 数据格式=\"dd/MM/yyyy h:mm:ss tt\"。我相信这是不可能使用 html 帮助程序的。您必须直接指定 html 和 javascript。

注意：由于缺少“data-val-date”属性，非网格 DatePickers 似乎没有验证。

另外：“请记住，KendoUI 首先使用 parseFormats 选项来解析日期，然后将其转换为格式选项，最后运行验证。这就是为什么我在验证中使用 yyyy-MM-dd 而不是 ["MM/dd/yyyy", " dd/MM/yyyy"]。" -[如何使用剑道验证器验证日期格式为 yyyy-MM-dd？](https://stackoverflow.com/questions/14127305/how-to-validate-a-date-is-in-the-format-yyyy-mm-dd-using-kendo-validator)

Web.config 的全球化行：

```
<globalization requestEncoding="utf-8" responseEncoding="utf-8" culture="en-US" uiCulture="en-US" /> 
```

# vim - Vim：撤消 imap 后恢复光标位置

> ID：11625244
> 
> 赞同：2
> 
> 时间：2012-07-24T06:23:53.103
> 
> 标签：vim, undo, cursor-position

我已经`IMAP`从 修改了函数`vim-latex`，因此可以通过将最终返回行更改为来`LookupCharacter`撤消

```
return a:char . "^Gu\<bs>" . bs . IMAP_PutTextWithMovement(rhs, phs, phe) 
```

现在要直接从插入模式撤消，我在我的中有这个映射`.vimrc`：

```
imap <Undo> <Esc>ui 
```

我使用的是[Neo2 键盘布局](http://www.neo-layout.org)，所以第 4 层有一个撤消键。

现在这工作得很好，但问题是当我在行尾使用它时，光标放在最后一个字符*之前。*要在没有 的情况下对其进行测试`vim-latex`，您可以这样做

```
:imap a a^Gu\<bs>test 
```

在一行的中间和末尾键入“b”，然后通过快捷方式或手动按 执行撤消`<Esc>ui`。

那么有没有办法让`vim`跳转回到正确的光标位置？

我[在 wikia](http://vim.wikia.com/wiki/Restore_the_cursor_position_after_undoing_text_change_made_by_a_script)中看到了一个给出想法的条目，但我不知道如何通过`imap`映射来实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:58:40.090

光标移动是由于`i`在映射结束时不加选择地使用。通常，一个人通过临时执行正常模式命令

```
imap <Undo> <C-\><C-o>u 
```

但是在您的情况下，当撤消修改缓冲区时，这可能并非在所有情况下都有效。

# codeigniter - 如何在 Codeigniter 的我自己的控制器中生成 API 密钥

> ID：11625250
> 
> 赞同：2
> 
> 时间：2012-07-24T06:24:16.180
> 
> 标签：codeigniter, rest, key

只想提一下，我真的是 API 开发（概念、结构、最佳实践）的新手，我对它一点也不熟悉，所以如果你发现它，请原谅我可怜的愚蠢问题，我正在使用 Phil Sturgeon 的 REST API 服务器、Curl 库和 REST API 客户端是我的代码：

在我的控制器应用程序/控制器/make_key

```
function index(){
      $this->load->library('rest');
      $this->load->library('curl');
      $this->rest->put('https://www.myapplication.com/apifolder/key/X-API-KEY/FOO');
    } 
```

- 完全没有反应

其中 apifolder/key 是我的 key.php 的位置（来自 Phil Sturgeon 的默认示例）：

请注意，我也通过地址栏尝试过：

[https://www.myapplication.com/apifolder/key/X-API-KEY/FOO](https://www.myapplication.com/apifolder/key/X-API-KEY/FOO) - 返回 ({"status":false,"error":"Invalid API Key."})

[https://www.myapplication.com/apifolder/key?X-API-KEY=FOO](https://www.myapplication.com/apifolder/key?X-API-KEY=FOO) - 返回 ({"status":false,"error":"Unknown method."})

并尝试了更多查询，但似乎没有一个有效，我唯一的问题是......

如何使这个 key.php 工作？对于这样一个简单的问题，我深表歉意，先谢谢你了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T13:14:27.077

请参阅我自己的问题的自我接受的答案...菲尔斯文档不提供此信息。我不得不自己钻进图书馆。

> 我最终发现 403 被禁止是因为我没有提供 api 密钥来生成密钥。
> 有点模棱两可，因为菲尔的文档没有说明在生成密钥之前需要现有的 api 密钥。我只是创建了一个数据库中的表中的伪造键并在调用时引用了该键`/key/index?X-API-KEY=boguskey`

[CodeIgniter REST API 库 Ajax PUT 抛出 403 Forbidden](https://stackoverflow.com/questions/9133256/codeigniter-rest-api-library-ajax-put-throwing-403-forbidden)

# android - 滚动android gridview阻止用户交互

> ID：11625256
> 
> 赞同：0
> 
> 时间：2012-07-24T06:24:39.210
> 
> 标签：android, scroll, android-gridview

我在滚动视图中放置了一个网格视图。

1.  当应用程序启动时，gridview 中会显示 12 个项目（第 1 页）。
2.  当用户滚动并到达滚动末尾时，通过 web 服务获取下一页的下 12 个项目，并将其添加到初始项目数组中。
3.  调用 gridview 适配器的 notifydatasetchanged 并且动态设置 gridview 的高度。

但问题在于第 3 点。这会阻止用户交互 1-2 秒。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:27:47.833

您是否尝试过在线程中执行更新？

```
runOnUiThread(new Runnable() {
public void run() {     
//Update the grid view and set height. 
```

# html - 在网页中成对对齐元素

> ID：11625259
> 
> 赞同：0
> 
> 时间：2012-07-24T06:24:47.383
> 
> 标签：html, css, asp.net-mvc-3

我正在编写一个 MVC3 页面，并且旁边有带有单选按钮的图像。我希望每个单选按钮与其图像在同一行，但不是每行一个图像，我希望它流经多行，但成对。我尝试将两者包装在一个 div 和 display:inline-block 中，除了单选按钮在我的图像上方，而不是在它旁边。空白：nowrap；可以，但是每行只放一张图片（我可以用 a 来做到这一点
）。

这是代码，FWIW：

```
@foreach (xxx.Image im in Model.Images)
{
   <div style="white-space: nowrap;">
         @Html.RadioButtonFor(m => m.EmailImage, im.Id, Model.EmailImage == im.Id ? new { Checked = "checked" } : null)
         <a href="/preview/@im.Url&amp;h=251&amp;w=600" target="_blank">             
         <img height="41" width="97" src="@im.ThumbUrl"/></a>
   </div>
} 
```

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:20:04.873

以下示例似乎有效：[jsfiddle](http://jsfiddle.net/VSj8M/)。

**HTML：**

```
<div class="left">
    <input type="radio" value="check" />
    <a href="www.google.com">google</a>
    <img src="http://placehold.it/41x97"></img>    
</div>
<div class="left">
    <input type="radio" value="check" />
    <a href="www.google.com">google</a>
    <img src="http://placehold.it/41x97"></img>    
</div>
<div class="left">
    <input type="radio" value="check" />
    <a href="www.google.com">google</a>
    <img src="http://placehold.it/41x97"></img>    
</div>​ 
```

**CSS：**

```
.left
{
    float:left;    
}

.left a, .left input, .left img
{
   display:inline-block;   
   vertical-align:middle;     
} 
```

# android - 更新到 android v20 后，Ant 无法构建签名的 apk

> ID：11625262
> 
> 赞同：5
> 
> 时间：2012-07-24T06:24:54.917
> 
> 标签：android, ant, android-4.2-jelly-bean

将 android 和 eclipse 工具升级到 v20 后发生了相当多的奇怪错误

通过 Ant 构建在创建签名的 apk 时停止工作并出现以下错误

```
 BUILD FAILED
 C:\Programs\Android\tools\ant\build.xml:1097: The following error occurred while executing this line:
 C:\Programs\Android\tools\ant\build.xml:1109: Cannot recover key 
```

知道在升级到 android JB 组件时会发生什么变化，如何纠正？

我很感激任何帮助...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T22:33:44.543

我们遇到了同样的问题，我们有解决方案，但没有真正的解释！

我们现有的构建在属性文件中有以下内容：

*   key.store=COMPANY_NAME-key.keystore
*   key.alias=COMPANY_NAME
*   key.store.password=KEY_STORE_PASSWORD
*   key.alias.password=KEY_ALIAS_PASSWORD

但这已经停止工作 - 但是当我们更改 key.alias.password 以匹配它正在工作的商店密码时，例如：

*   key.store=COMPANY_NAME-key.keystore
*   key.alias=COMPANY_NAME
*   key.store.password=KEY_STORE_PASSWORD
*   key.alias.password=KEY_STORE_PASSWORD

别名不知道为什么，也许有人把蚂蚁库搞砸了？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T16:08:40.053

我在这个话题上只花了大约 5 小时......这一切都归结为密码后面的空格。

显然在以前的版本中它正在修剪密码，而在当前版本中它没有。

因此，确保行尾没有空格可能会有所不同。这为我们解决了问题 - 无需使用 JDK7（尽管无论如何它似乎构建和工作都很好，至少来自 ant）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-28T12:10:16.697

当心错误消息：

错误`key.store.password`导致：

> 密钥库被篡改或密码不正确：密码验证失败

而错误`key.alias.password`会导致：

> 无法恢复密钥

对于只检查商店密码`keytool -v -list mykeystore.keystore`并且从未验证过 alias.password 的人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T18:49:47.217

在 SDK v20 之前，我使用 bash 脚本构建了一个项目，输入密码如下：

**build_v1.sh**

```
ant release
p@ssw0rd
p@ssw0rd 
```

在 v20 中它失败了，因为密码未被接受。它似乎与行尾字符有关，但我不确定。为了防止构建过程要求输入密码，您可以将密码属性添加到 ant.properties 文件中：

**蚂蚁属性**

```
key.store=company-key.keystore
key.alias=company
key.store.password=p@ssw0rd
key.alias.password=p@ssw0rd 
```

对于我的特定项目，伪造的密钥库密码保存在 ant.properties 中，我在构建时将其替换为发布密钥库密码：

**build_v2.sh**

```
keyPass=p@ssw0rd
sed -i "s|key.store.password=.*|key.store.password=${keyPass}|g" ant.properties
sed -i "s|key.alias.password=.*|key.alias.password=${keyPass}|g" ant.properties
ant release 
```

这允许我们的发布密钥库密码隐藏在其他地方。祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T22:52:39.590

看起来你的调试密钥没有被 ant 看到。

# windows - 我无法在 Windows Server 2008 R2 上安装 Lync 2010

> ID：11625263
> 
> 赞同：0
> 
> 时间：2012-07-24T06:24:55.927
> 
> 标签：windows, windows-server-2008, lync, lync-2010

我仍在尝试在 VM Windows Server 2008 上安装 Microsoft Lync。但它总是在“准备第一个标准版服务器”时失败。错误信息是这样的。“检查先决条件 SqlExpressRtc .. 安装...失败代码 -2068578304”。

有人知道如何解决吗？我尝试在谷歌上搜索，但仍然失败。我也尝试卸载我的 sql server，仍然失败.. :D

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:10:27.270

此问题是因为您尝试在域控制器上安装 SQLServer 2008 Express Edition 先决条件，并且 Lync Server 安装程序始终尝试使用 NT AUTHORITY\NetworkService 帐户安装 SQL Server Express 以启动服务，而这在域控制器。

您需要手动执行安装 SQL Server 2008 Express 版本的语句，但更改 SYSTEM 帐户（或域帐户）的 NetworkService 帐户......将是这样的：

**"C:\ProgramData\Microsoft\Lync Server\Deployment\cache\4.0.7577.0\SQLEXPR_x64.exe" /ACTION=Install /FEATURES=SQLEngine,Tools /INSTANCENAME=RTC /TCPENABLED=1 /SQLSVCACCOUNT="NT AUTHORITY\SYSTEM" /SQLSYSADMINACCOUNTS="Builtin\Administrators" /BROWSERSVCSTARTUPTYPE="自动" /AGTSVCACCOUNT="NT AUTHORITY\NetworkService" /SQLSVCSTARTUPTYPE=自动**

# c++ - C++ 为什么在传递类指针时调用析构函数？

> ID：11625267
> 
> 赞同：1
> 
> 时间：2012-07-24T06:25:15.553
> 
> 标签：c++, class, memory, pointers, destructor

```
int main(){
   //Node is some template class
   Node<int>* head = new Node<int>[5];

   for(int ii = 0; ii < 5; ii++)
   {
      head[ii].set_Data(ii);
      head[ii].set_Link(head + (ii + 1));
      if(ii == 4)
      {
        head[ii].set_Link(NULL);
      }
   }
   delete [] head;
 }

template<typename T>
void Node<T>::set_Link(Node* Node_Address)
{
    Link = Node_Address;
}

template<typename T>
Node<T>::~Node()
{
    delete Link;
    cout << "Destructor" << endl;
} 
```

我现在正在学习链表。我不明白为什么我的析构函数被调用 15 次而 cout 语句被打印 15 次。如果我摆脱声明

```
head[ii].set_Link(head + (ii + 1)); 
```

析构函数只被调用了 5 次，这是有道理的，因为创建了 5 个类。为什么在我使用成员函数 set_Link() 时调用析构函数，而我只传递一个指针，而不是一个类。甚至没有调用复制构造函数。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T06:32:35.110

你这里有UB。析构函数被多次调用。`delete [] head;`调用数组中每个对象的析构函数。析构函数又通过调用链接对象的析构函数`delete Link;`。

总共调用了 5 + 4 + 3 + 2 + 1 = 15 次析构函数。主要是在已经被破坏的物体上。

通常，您不会为链表的元素创建数组。相反，创建这样的列表：

```
Node<int>* head = new Node<int>(); 
Node<int>* node = head;
for(int ii = 0; ii < 5; ii++) 
{ 
  node->set_Data(ii); 
  if(ii == 4) 
  { 
    node.set_Link(NULL); 
  }
  else
  {
    Node<int>* next = new Node<int>();
    node->set_Link(next);
    node = next;
  }
} 
delete head; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:33:49.577

在链表节点析构函数中，您不想删除指向的下一个节点。这将级联删除所有尾节点。您可以通过首先将指针设置为 NULL 来防止它发生，但这只是可维护性的噩梦，并且会产生很多像这样的细微错误。

注意：“为什么在我使用成员函数 set_Link() 时调用了析构函数” - 它没有被调用，并且通过添加一些额外的跟踪消息很容易验证这一点。所有的析构函数调用都源自那个`delete []`调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T06:37:21.227

五个节点的完整数组是通过 new 创建的，没关系。但是您传递的指针指向`set_Link()`此内存块内的某个位置，因此（a）堆管理器不知道在您的析构函数调用时如何处理它们，`delete Link;`并且（b）即使它知道，它们也会被多次删除五个对象你要互相删除。

注意：您只需要`delete`通过`new`.

# asp.net-mvc-3 - MVC3 的人员选择器

> ID：11625270
> 
> 赞同：3
> 
> 时间：2012-07-24T06:25:32.060
> 
> 标签：asp.net-mvc-3, active-directory, peoplepicker

我正在为 MVC3 应用程序寻找类似于 SharePoint 的人员选取器控件。

您能否建议是否有任何此类控件可用？

在 MVC3 中从 AD 中挑选人员的最佳方法是什么？

要求：在其中一个视图上，我需要从 AD 中选择一个用户。

我在考虑 People Picker 的控制方式。

谢谢阿伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:31:42.887

我知道这已经很老了，所以我怀疑你仍然需要回答这个问题，但也许它对其他人有用。

就在上周，我不得不为我们建立一个这样的控件。它基本上是两个主要部分，一个接受部分文本并返回建议列表的 JSON 服务和 HTML/CSS/jQuery+UI 控件。

该服务非常简单，因此我们将在此处跳过。

我正在网络端[写一篇](http://vikingerik.wordpress.com/2013/02/10/html-user-picker-using-jquery-ui-part-1/)文章，但基本上我们用一些自定义 CSS 包装了 jQuery 自动完成功能，以进行类似于 GMail 中地址行的输入。这是通过将容器 div 设置为看起来像一个长输入字段来完成的。实际的输入字段在该容器内，并且被设置为基本上不可见。在容器中单击会将焦点移至输入框。选择建议的名称后，我创建一个新容器以在“隐藏”自动完成输入之前插入，该输入包含用户名和一个隐藏输入，其中包含我们希望在提交表单时发送的值。我必须在自动完成上做一些其他的重载才能让它始终如一地行动，但基本上这就是它的全部。

该控件查看容器的数据输入名称属性，以确定在每个用户选择创建隐藏输入时将隐藏输入设置为什么“名称”。提交表单时，默认模型绑定器会将特定选择器的所有用户（因为您可以在页面上拥有多个用户）滚动到值的字符串数组中 - 假设您的模型具有与输入使用的名称相同的字符串数组属性控件 - 然后我们可以在服务器端进行处理。

到目前为止，最困难的部分是找出正确的 HTML + CSS 以获得正确的外观和感觉。我不是一个非常强大的 UI 人，所以这花了我很长时间，并且仍然落在 Chrome 中，这似乎在输入框周围添加了一个重音，即使使用（或因为？）使其融入父控件的样式。

就我们的目的而言，它在上周运行良好。

**更新**：现在在[GitHub 上](https://github.com/ErikNoren/entitypicker)有一个[Demo](http://htmlpreview.github.com/?https://github.com/ErikNoren/entitypicker/blob/master/entitypickerdemo.html)。

# sql - SQL IN 逗号分隔参数与内部查询

> ID：11625275
> 
> 赞同：0
> 
> 时间：2012-07-24T06:26:14.293
> 
> 标签：sql, performance

我知道 SQL IN 子句中有 1000 个项目的限制。目前，我在`IN`选择查询的“”子句中使用逗号分隔的项目字符串，我想更改它。

所以，我发现[了 this](https://stackoverflow.com/questions/4722220/sql-in-clause-1000-item-limit)，它声明使用其中一个`JOIN`或在其内部传递一个查询`IN`。

应该首选哪一个？

编辑（另一个问题）：

`IN`在“”子句中传递查询和在“ ”子句中传递逗号分隔的参数有什么区别`IN`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:44:53.137

数据库优化器将以相同的方式执行这两个变体。您可以使用看起来更好的那个。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:49:00.023

当您在“In 子句”中放置查询时，数据库需要首先计算此查询，然后根据结果计算“主查询”。如果您将值放在“In 子句”中，则数据库需要计算附加查询。

作为在 in 子句中加入查询的关注点，数据库会将它们优化为相同。

# perl - 间歇性第一次迭代失败但第二次迭代通过

> ID：11625276
> 
> 赞同：4
> 
> 时间：2012-07-24T06:26:16.880
> 
> 标签：perl, bash, ssh

相同的命令在第一次迭代中失败，但在第二次迭代中通过。有时它会在两个迭代中传递。`$ssh`是 的对象`Net::SSH::Expect`。知道这种奇怪的行为吗？

```
$ssh = Net::SSH::Expect->new(
                    host => "$host",
                    password => "$pass",
                    user => "$id",
                    raw_pty => 1,
                    timeout => 50
                    ); 
```

代码片段：

```
&Test("Create exports on Sonas------ No Kerberos");
$no_of_exports=2;
my $fs = "/ibm/gpfs0/";
while($no_of_exports)
{
    my $share_name = &get_share_name();
    my $path="$fs" . "$share_name";

    $cmd="ssh mgmt001st001 mkexport $share_name $path --nfs 'client002\\\\(rw,no_root_squash\\)'";
    print "CMD: $cmd";
    $out=$ssh->exec("$cmd");
    print $out;
    --$no_of_exports;
} 
```

输出：

```
Test 02 : Create exports on *Sonas*------ No Kerberos

CMD: ssh mgmt001st001 mkexport kas41535108 /ibm/gpfs0/kas41535108 --nfs 'client002\\     (rw,no_root_squash\)'

--nfs 'client002\\(xport kas41535108 /ibm/gpfs0/kas41535108 
> rw,no_root_squash\)'
 bash: -c: line 0: syntax error near unexpected token `('
 bash: -c: line 0: `mkexport kas41535108 /ibm/gpfs0/kas41535108 --nfs client002\\('
 [root@ganesha36 ~]# 
 [root@ganesha36 ~]# 
CMD: ssh mgmt001st001 mkexport kas219760489 /ibm/gpfs0/kas219760489 --nfs 'client002\\  (rw,no_root_squash\)'
89 --nfs 'client002\xport kas219760489 /ibm/gpfs0/kas2197604 
> \(rw,no_root_squash\)'
EFSSG0019I The export kas219760489 has been successfully created.
EFSSG1000I The command completed successfully. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-21T03:55:27.640

错误信息就在那里。Bash 令人窒息，因为`(`令牌出乎意料。您需要在有四个反斜杠的地方再添加两个反斜杠

```
$cmd="ssh mgmt001st001 mkexport $share_name $path --nfs 'client002\\\\(rw,no_root_squash\\)'"; 
```

变成

```
$cmd="ssh mgmt001st001 mkexport $share_name $path --nfs 'client002\\\\\\(rw,no_root_squash\\)'"; 
```

# jquery - 我们可以将 div id 传递给锚标签吗？

> ID：11625277
> 
> 赞同：-2
> 
> 时间：2012-07-24T06:26:29.060
> 
> 标签：jquery, html

在这段代码中，我使用三个链接（锚点）作为选项卡，如果我们单击该链接，它应该阻止默认值。我应该在超链接中传递 div id（a href='#'）。

```
<div class="wrap">

<section class="container-main">

  <div class="container"> 
      <div  style="width: 100%; margin-top: 15px; height: 25px;">
          <?php echo 'Welcome &nbsp <b>'.$firstname.'</b> <br/>';?>
      </div>
<div id="slideMenu" class="closed">
    <div class="content">
<a href="../Patient/view_allergy.php"><img  src="../images/allergy1.png" width="252" height="33" border="0"/></a>
<a href="../Patient/view_medications.php"><img  src="../images/medicationsbutton.png" alt="" width="252" height="35" border="0"/></a>
<a href="../Patient/viewsocialhistory.php"><img  src="../images/socialhistorybutton.png" width="252" height="35" border="0"/></a>

    </div>
<a style="top:100px; right: -42px;" href="#" class="toggleBtn" id="toggleLink"></a></div>
 <style>
#slideMenu.closed{
    left:-300px;
}

#slideMenu{
    position:fixed;
    left:0;
    top:150px;
    width:300px;
    height:300px;
    border:5px solid #416888;
    border-left:0px;
    background-color:#FFFFFF;
    z-index:20;
}

#slideMenu a.toggleBtn{
    position:absolute;
    right:0;
    top:0;
    outline:none;
    display:block;
    height:87px;
    width:27px;
    border-width:1px 1px 1px 0px;
    margin:0;
    padding:0 5px 0;
    color:#000;
    text-decoration:none;
    font:12px/25px Verdana, Arial, Helvetica, sans-serif;
    background:url(images/arrow.gif) no-repeat;
    z-index:20;
}

#slideMenu a.toggleBtnHighlight{
    position:absolute;
    right:0;
    top:0;
    outline:none;
    display:block;
    height:87px;
    width:27px;
    border-width:1px 1px 1px 0px;
    margin:0;
    padding:0 5px 0;
    color:#000;
    text-decoration:none;
    font:12px/25px Verdana, Arial, Helvetica, sans-serif;
    background:url(images/arrow.gif) no-repeat 0px -88px;
    z-index:20;
}

.content{
    padding:5px;
    z-index:20;
}
</style>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/sidein_menu.js"></script> 
  <script type='text/javascript' src='js/jquery-1.4.2.js'></script>
  <script type="text/javascript" src="js/jquery-ui.js"></script>

      <link rel="stylesheet" type="text/css"   href="css/jquery-ui.css">

  <style type='text/css'>

  </style>

<script type="text/javascript">
$(document).load(function(){
    alert("hi");
    $("#allergy_tab").click(function(e){
        e.preventDefault()
        if($("#title").val=='select allergy')
        {
            alert("select food allergy");
        }
    })
})
</script>

<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){

$("#tabs").tabs();
$("#allergy_tab").click(function() {

    if($("#title").val()=='select food allergy')
        {
            alert("select food allergy");
        }
    else if($("#e_allergy").val()=='select environmental allergy')
        {
            alert("select environmental allergy");
        }

        else if($("#m_allergy").val()=='select metal allergy')
        {
            alert("select metal allergy");
        }

        else {
    var selected = $("#tabs").tabs("option", "selected");
    $("#tabs").tabs("option", "selected", selected + 1);
        }
});

$("#tab_allergy2").click(function(event) {

    event.preventDefault();
    if($("#title").val()=='select food allergy')
        {
            alert("select food allergy");
        }
    /*else if($("#e_allergy").val()=='select environmental allergy')
        {
            alert("select environmental allergy");
        }

        else if($("#m_allergy").val()=='select metal allergy')
        {
            alert("select metal allergy");
        }*/

    /*  
        else {
    var selected = $("#tabs").tabs("option", "selected");
    $("#tabs").tabs("option", "selected", selected + 1);
        }*/

            else {
    var selected = $("#tabs").tabs("option", "selected");
    $("#tabs").tabs("option", "selected", selected + 1);
        }
});
$("#nexttab2").click(function() {
    alert("yews");
    if($("#frequency").val()=='Please select frequency')
        {
            alert("select frequency");
        }
    else if($("#e_allergy").val()=='select environmental allergy')
        {
            alert("select environmental allergy");
        }

        else if($("#m_allergy").val()=='select metal allergy')
        {
            alert("select metal allergy");
        }

        else {
    var selected = $("#tabs").tabs("option", "selected");
    $("#tabs").tabs("option", "selected", selected + 1);
        }
});

});

//]]>  

</script>
  <script type='text/javascript' src='js/jquery-1.4.2.js'></script>
  <script type="text/javascript" src="js/jquery-ui.js"></script>

      <link rel="stylesheet" type="text/css"   href="css/jquery-ui.css">

  <style type='text/css'>

  </style>

  <div id="tabs">
        <ul>
            <li><a href="#fragment-1" id="tab_allergy1"><span>Allergy</span></a></li>
            <li><a href="#fragment-2" id="tab_allergy2"><span>Medication</span></a></li>
            <li><a href="#fragment-3"><span>Social History</span></a></li>
        </ul>

        <div id="fragment-1">
            <p><form name="allergy" action="insert_allergies.php" method="post" id="allergy">

     <div id="allergybox" >
        <div id="allergypage1" >

        <div id="allergypage2">        <div id="allergycolor">Food Allergy </div><br>

<select name="food" id="title" class="required">
    <option value="select food allergy">select food allergy</option>
<option value="Eggs">Eggs</option>
<option value="Milk">Milk</option>
<option value="Peanuts">Peanuts</option>
<option value="Fish">Fish</option>
<option value="Shellfish (shrimp, crab, lobster)">Shellfish (shrimp, crab, lobster)</option>
<option value="Soy">Soy</option>
<option value="Tree nuts">Tree nuts</option>
<option value="Wheat">Wheat</option>
<option value="Other gluten-containing food">Other gluten-containing food</option>
<option value="Peanuts">Peanuts</option>
<option value="Tree nuts">Tree nuts</option>
<option value="Corn products">Corn products</option>
<option value="Celery">Celery</option>
<option value="Red meat">Red meat</option>
<option value="Apples">Apples</option>
<option value="Peaches">Peaches</option>
<option value="Strawberries">Strawberries</option>
<option value="Pears">Pears</option>
<option value="Sesame Seeds">Sesame Seeds</option>
<option value="Poppy Seeds">Poppy Seeds</option>
<option value="none">None</option>
<option value="Other" onclick="showOther();">Other</option>
</select>   

  <input type="text" id="otherTitle" name="food1"style="display:none;" />

  </div>

<div id="allergypage3"> <div id="allergycolor">Environmental Allergy </div><br>
 <select name="environment" id="e_allergy" class="required">

<option value="select environmental allergy">select environmental allergy</option>
<option value="Mildew">Mildew</option>
<option value="Molds">Molds</option>
<option value="Dust">Dust</option>
<option value="Fungus spores">Fungus spores</option>
<option value="Food particles">Food particles</option>
<option value="Chemicals & Dyes">Chemicals & Dyes</option>
<option value="Mites">Mites</option>
<option value="Pollen - Tree, Grass, Weed">Pollen - Tree, Grass, Weed</option>
<option value="Animal dander">Animal dander</option>
<option value="Dry skin flakes">Dry skin flakes</option>
<option value="Insect's (cockroaches)">Insect's (cockroaches)</option>
<option value="Insect bites">Insect bites</option>
<option value="Poison ivy or/and other irritating plants">Poison ivy or/and other irritating plants</option>
<option value="Parasites (such as lice)">Parasites (such as lice)</option>
<option value="Soaps and detergents">Soaps and detergents</option>
<option value="Cosmetics">Cosmetics</option>
<option value="Certain foods (especially spicy foods)">Certain foods (especially spicy foods)</option>
<option value="Smoking or Second-hand smoke">Smoking or Second-hand smoke</option>
<option value="Pollution">Pollution</option>
<option value="none">None</option>
<option value="Other" onclick="showOther();">Other</option>
</select>
  <input type="text" name="environment1" id="otherTitle1" style="display:none;" /></div>
<div id="allergypage4"> <div id="allergycolor">Metal Allergy </div>  <br>

<select name="metal" id="m_allergy" class="required">

<option value="select metal allergy">select metal allergy</option>
<option value="Nickel">Nickel</option>
<option value="14K Gold (Nickel part)">14K Gold (Nickel part)</option>
<option value="Platinum">Platinum</option>
<option value="Titanium">Titanium</option>
<option value="Dental Amalgams (silver-colored filling)">Dental Amalgams (silver-colored filling)</option>
<option value="Cobalt">Cobalt</option>
<option value="Chromate">Chromate</option>
<option value="none">None</option>
<option value="Other" onclick="showOther();">Other</option>
</select>
  <input type="text" id="otherTitle2" name="metal1" style="display:none;" /></div>

<script src="js/scripts.js" type="text/javascript"></script>
<div id="allergypage4"> <div id="allergycolor">None </div>  <br>

<select name="metal" id="m_allergy" class="required">

<option value="select metal allergy">select metal allergy</option>
<option value="Nickel">Nickel</option>
<option value="14K Gold (Nickel part)">14K Gold (Nickel part)</option>
<option value="Platinum">Platinum</option>
<option value="Titanium">Titanium</option>
<option value="Dental Amalgams (silver-colored filling)">Dental Amalgams (silver-colored filling)</option>
<option value="Cobalt">Cobalt</option>
<option value="Chromate">Chromate</option>
<option value="none">None</option>
<option value="Other" onclick="showOther();">Other</option>
</select>
  <input type="text" id="otherTitle2" name="metal1" style="display:none;" /></div>
<div id="allergypage4">        <div id="viewallergycolor">
Medication Allergy</div><div class="allergymedicalsearch"><input name="medications" type="text" id="medaller"  size="55" />    
  </div>       <div class="suggestionsBox" id="suggestions" style="display: none;">
        <!--<img src="upArrow.png" style="position: relative; top: -18px; left: 30px;" alt="upArrow" />-->
        <div class="suggestionList" id="autoSuggestionsList"></div>
    </div>
<div id="buttonboxs">
  <div id="save1"><input type="image" src="../images/s1.png" name="save" /></div></div></div></div></div></form></p>
           <br>

 <div style="float:right;"> <a class="nexttab"  style="color:#000;" id="allergy_tab">Next Tab</a></div>
        </div>

        <div id="fragment-2">
<form name="medications" method="post" action="insert_medication.php" >
          <div id="medicalbox">   <div id="medicalboxtitle">Find your Medication:<div class="medicalsearch">
          <input name="search" type="text" id="search" size="75"/>
          <!--<input name="search" type="text" id="search" onblur="fill();"  onkeyup="lookup(this.value);" size="75" />-->
 <input type="button"name="search" id="button" value="Select"/>   </div>       
          </div><div class="suggestionsBox" id="suggestions" style="display: none;">
        <!--<img src="upArrow.png" style="position: relative; top: -18px; left: 30px;" alt="upArrow" />-->
        <div class="suggestionList" id="autoSuggestionsList"></div>
    </div> 

<div class="medicalselected">
        <div id="medicalboxtitle">  Confirm Selection &nbsp; &nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;<input name="med_sel" type="text" id="med_sel" size="75" /><br/></div></div><br>
<br>
<br><br>
<br>
<br>

        <div class="medicalheading"> Instructions :</div><br/><br>
<br>

<div id="medicalbox1"> Frequency :
 <select name="frequency" id="frequency">
         <option value="Please select frequency">Please select frequency</option>
         <option value="Once a day">Once a day </option>
         <option value="2 times a day">2 times a day</option>
         <option value="3 times a day">3 times a day</option>
         <option value="4 times a day ">4 times a day </option>
         <option value="Once every 4 hrs">Once every 4 hrs</option>
         <option value="Once every 6 hrs">Once every 6 hrs</option>
         <option value="Once every 8 hrs">Once every 8 hrs</option>
         <option value="Once every 12 hrs">Once every 12 hrs</option>
         <option value="Once every  24 hrs">Once every  24 hrs</option>
         <option value="Once a week">Once a week</option>
         <option value="Once every 2 weeks">Once every 2 weeks</option>
         <option value="Once every 3 weeks ">Once every 3 weeks </option>
         <option value="Once a month">Once a month</option>
         <option value="Once every alternate day">Once every alternate day</option>
         <option value="Before meals in AM">Before meals in AM</option>
         <option value="After meals in AM">After meals in AM</option>
         <option value="Before meals in PM">Before meals in PM</option>
         <option value="After meals in PM">After meals in PM</option>
         <option value="Before going to bed">Before going to bed</option>
         </select>
         </div>
         <div id="medicalbox2">Route &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

<select name="route" >
         <option value="">Please Select oral </option>
         <option value="Oral">Oral</option>
         <option value="Intravenous">Intravenous</option>
         <option value="Intramuscular">Intramuscular</option>
         <option value="Sub-cutaneous">Sub-cutaneous</option>
         <option value="Per Rectal">Per Rectal</option>
         <option value="Inhalation">Inhalation</option>
         </select><br/></div>
<div id="medicalbox3"> Dose/Units&nbsp;&nbsp;
 <input name="dose" type="text" size="12" />&nbsp;&nbsp;<select name="dose1" >

         <option value="mg">mg</option>
         <option value="mcg">mcg</option>
         <option value="gm">gm</option>
         <option value="ml">ml</option>
         <option value="units">units</option>
         </select></div>
         <br>

<div id="medicalbox4"> 
Start Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input  id="startdate"  type="text" name="startdate"  /><div style="color:#990000; font-size:12px; font-weight:bold; width:200px; float:right;">yyyy-mm-dd</div></div>
<div id="medicalbox5"> 
End Date&nbsp;&nbsp;&nbsp;
<input  id="enddate" type="text" name="enddate"  /><div style="color:#990000; font-size:12px; font-weight:bold"><div style="color:#990000; font-size:12px; font-weight:bold; width:200px; float:right;">yyyy-mm-dd</div></div>
         <div id="medicalbutton"> <div id="save"><input type="image" src="../images/s1.png" name="save" /></div>
         </div>
         </form>

 </div></div><div style="float:left;">
<div  style="width:630px; float:left;">
     <a class="prttab" href="#" style="color:#000;" >Prive Tab</a>    </div>
 <div style="width:100px;float:right;">
   <a class="nexttab" href="#" style="color:#000;" id="nexttab2">Next Tab</a>        </div>
 </div></div>

        <div id="fragment-3">
          <div id="socialhistoryforms"><div id="socialboxtitle">Social History</div><br>
<br>
<div id="socialq1" ><div id="socialquestion"><b>Do you smoke?</b></div>
<br>
<div id="sociala1">

            <input type="radio" name="smoke" id="smoke_y" value="yes" onclick="return fun1();"/> Yes
             <input type="radio" name="smoke" id="smoke_n" value="no" onclick="return fun1();"/>  no </br></br>

        <div id="hidden" style="display:none;" >  <label > If yes </label>Enter year started<span><input type="text" name="year_started_smoke"  id="year_start" style="display:none" />&nbsp;&nbsp;&nbsp;
       Enter year stopped <input type="text" name="year_stopped_smoke"  id="year_stop" style="display:none" /></span> </div> 
             </br>
         <div id="hidden1" style="display:none"> <label >If presently smokingEnter no of cigarates per day</label ><span> <input type="text" name="present_smoking" style="display:none" id="present_smoking"   size="35" /></span></div>

</div></div>
<div id="socialq1" ><div id="socialquestion"> <b> Do you consume alcohol?</b> </div>
<br>
<div id="sociala1">

            <input type="radio" name="alcohol" id="alcohol_y" value="yes" onclick="return fun1();"/> Yes
             <input type="radio" name="alcohol" id="alcohol_n" value="no" onclick="return fun1();"/>  no </br></br>

     <div id="hidden3" style="display:none;">     If yes Enter year started <input type="text" name="year_started_alcohol"  id="year_start_alcohol" style="display:none"/>
             Enter year stopped<input type="text" name="year_stopped_alcohol"  id="year_stop_alcohol" style="display:none" value=""/></br></br>
            Select <select name="quantity" id="quantity" style="display:none">
             <option value="">select quantity</option>
             <option value="one glasses per day">one glasses per day</option>
             <option value="two glasses per day">two glasses per day</option>
             <option value="three glasses per day">three glasses per day</option>
              <option value="more than three glassesw per day ">more than three glasses per day </option></br>
           </select></div>

</div></div>
<div id="socialq1" ><div id="socialquestion"><b>Do you abuse any substance/drugs?</b></div>
<br>

<div id="sociala1">

 <input type="radio" name="substance" id="substance_y" value="yes" onclick="return fun1();"/> Yes
   <input type="radio" name="substance" id="substance_n" value="no" onclick="return fun1();"/>  no </br></br>

              <div id="hidden4" style="display:none;"> If yes Enter the type of substance abuse<input type="text" name="substance_abuse"  id="substance_abuse" style="display:none"  size="35"/></div>

</div></div>

<div id="socialq1" ><b>Sexual History</b><span style="font-size:13px"> (please provide accurate details, all your medical information will be kept strictly confidential)</span>
  <div id="socialquestion"><br></div>

<div id="sociala1">

Are you a homo Sexual <input type="radio" name="homo_sexual" id="homo_sexual_y" value="yes" onclick="return fun1();"/> Yes
   <input type="radio" name="homo_sexual" id="homo_sexual_n" value="no" onclick="return fun1();"/>  no </br></br>

   Do you use any contracepective device <input type="text" name="contracepective" id="contracepective"  /> </br></br>

  Do you have multiple sexual partners <input type="radio" name="multiple_patners" id="multiple_patners_y" value="yes" onclick="return fun1();"/> Yes
   <input type="radio" name="multiple_patners" id="multiple_patners_n" value="no" onclick="return fun1();"/>  no </br></br>

  Have you ever had any sexualy transmitted disease <input type="radio" name="transmitted_disease" id="transmitted_disease_y" value="yes" onclick="return fun1();"/> Yes
   <input type="radio" name="transmitted_disease" id="transmitted_disease_n" value="no" onclick="return fun1();"/>  no </br></br>

   <input type="submit" value="submit" name="submit">

</div></div></div>
           **<a class="prttab" href="#">Prive Tab</a>** 
```

这是我面临困难的地方。我希望它以我指定的条件重定向

```
</div></section> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:43:36.060

你是这个意思吗？

```
$(document).ready(function(){
    $('a[href="#"]').click(function(){
        event.preventDefault();
    });
}​);​ 
```

# ios - 如何使用 osx/iOS 本机安全框架创建 PKCS12 blob？

> ID：11625280
> 
> 赞同：2
> 
> 时间：2012-07-24T06:26:52.777
> 
> 标签：ios, macos, ssl, cryptography, commoncrypto

是否有机会使用[安全框架](http://developer.apple.com/library/ios/#documentation/Security/Reference/certifkeytrustservices/Reference/reference.html#//apple_ref/doc/uid/TP30000157)在 mac/ios 上**不使用 openssl**来生成 PKCS12 (.p12) blob ？

我是否必须自己组合 X509、CA 和 RSA 密钥，或者该框架是否支持任何更高级别的 api？

我真的找不到办法做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:59:50.260

我没有尝试过，但是`SecKeychainItemExport`在[Keychain Services](https://developer.apple.com/library/mac/#documentation/security/Reference/keychainservices/Reference/reference.html)中，使用 with`kSecFormatPKCS12`应该可以让您获得 PKCS#12 blob（假设您的私钥和证书已经在钥匙串中）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-21T15:22:17.443

有一些可用的在线选项，例如[Mobundler.com](http://mobundler.com)，它允许您在没有 Mac 或 OpenSSL 的情况下创建 p12 包。

# opengl - 关于VBO的几个问题

> ID：11625282
> 
> 赞同：0
> 
> 时间：2012-07-24T06:26:57.223
> 
> 标签：opengl

我了解 VBO 本质上是存储在显卡上的内存，而不是每次都需要发送数据。

我的问题：

1.  我听说 VBO 只支持一种纹理。这是总共一个纹理还是每​​个渲染调用只有一个纹理？我必须渲染多个 BSP 区域，它们通常每个区域有 3-4 个纹理。我可以简单地创建 VBO 并使用不同的纹理调用 drawelements 4 次。这对性能有何影响？

2.  是否有最大数量的 VBO？我计划将一个附加到 BSP 的每个区域。在某些级别，我可以有 200-3000 个区域。是否有可能将 3000 个小型 VBO 连接到这些不同的区域？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T06:34:42.447

您可以拥有的纹理数量不取决于 VBO 的数量。

您可以在一个渲染过程中使用的纹理数量取决于您拥有的纹理单元的数量。至少有两个，但通常你有更多。

据我所知，VBO 的数量没有限制，它只取决于显卡 RAM 的大小。

但是使用更少的 VBO 会更有效。

# android - Android 上的蓝牙 - 是否可以同时连接到多个蓝牙设备？

> ID：11625284
> 
> 赞同：1
> 
> 时间：2012-07-24T06:27:13.703
> 
> 标签：android

我正在尝试同时连接到 1 个以上的蓝牙设备，但出现下一个错误：

```
java.io.IOException: Host is down 
```

在我第二次尝试连接时：

```
 private final BluetoothSocket mmSocket;
  mmSocket.connect(); 
```

是否可以同时连接多个蓝牙设备？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T06:29:13.883

是的，通常在一个（所谓的）微微网中最多可以存在 8 个设备。基本上一个主设备可以与多达 7 个其他设备通信。这就是指定蓝牙协议的方式。

# php - IPN 未从贝宝沙盒接收

> ID：11625285
> 
> 赞同：1
> 
> 时间：2012-07-24T06:27:22.120
> 
> 标签：php, html, paypal, sandbox

我开发了一个使用贝宝作为支付选项的在线交易网站。paypal 端的结帐和购物车计算正在运行，但我没有收到来自 paypal 沙箱的任何 IPN 消息。

```
<form name="paypal_form" action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="rm" value="2" />
<input type="hidden" name="cmd" value="_cart" />
<input type="hidden" name="upload" value="1" />
<input type="hidden" name="invoice" value="1234" />
<input type="hidden" name="business" value="merchant@domain.com" />
<input type="hidden" name="return" value="http://domain.com/success" />
<input type="hidden" name="cancel_return" value="http://domain.com/cancel" />
<input type="hidden" name="notify_url" value="http://domain.com/notify">
<input type="hidden" name="item_name_1" value="First item"/>
<input type="hidden" name="amount_1" value="6.00"/>
<input type="hidden" name="quantity_1" value="1"/>
<input type="hidden" name="shipping_1" value="5.00"/>
<input type="hidden" name="currency_code" value="EUR"/>
</form> 
```

商家贝宝账户中的概览页面显示交易已完成。当我点击交易详情时，它显示错误 3004。

此外，IPN 历史页面不显示任何 IPN 记录。它说“在过去 24 小时内没有找到记录”。

我该如何解决这个问题？

感谢和问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:04:20.033

可能是 PayPal 错误 - 请参阅：[https ://www.x.com/developers/paypal/forums/instant-payment-notifications-ipn-payment-data-transfer-pdt/ipn-failing-hasn-t-been-改变了？页面=0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C1](https://www.x.com/developers/paypal/forums/instant-payment-notifications-ipn-payment-data-transfer-pdt/ipn-failing-hasn-t-been-changed?page=0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C1)

上面链接中最重要的消息是 PayPal 回复：7 月 18 日：“我发现您在沙盒中遇到的 IPN 问题是由 PayPal 系统的一些技术问题引起的。我们的工程师目前正在努力研究解决这个问题。” 和 7 月 19 日：“我们知道这个问题，我们的工程师目前正在研究解决方案。不幸的是，我不能给你一个确切的时间框架，什么时候完成，但是这应该会在接下来的几天内解决。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:49:13.627

确保您的 ipn 实际上是世界可访问的（而不是在 localhost 或专用网络下）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:14:54.370

如果您在 localhost 上尝试此操作，它将无法正常工作。IPN 只是在现场工作。你是说你没有从贝宝沙箱收到消息？如果您在沙盒上工作，为什么要保留实际 paypal 表单的操作 url？

# xml - 为 Access 导入 (XSLT 1.0) 对定义明确的平面 XML 进行分组

> ID：11625288
> 
> 赞同：0
> 
> 时间：2012-07-24T06:27:27.613
> 
> 标签：xml, ms-access, xslt, grouping, xslt-1.0

我有一个来自我们本地会计系统的输出，它由一个信封标签和一个重复的字段序列组成，但没有分组。我以前没有 XSL 方面的经验，但一直在尝试为此寻找解决方案，并找到了适用于 XSLT 2.0 的解决方案。不幸的是，Access 2007 似乎只接受 XSLT 1.0 转换。

您能帮我找到一个有效的 XSLT 1.0 解决方案吗？

这是原始平面 XML 中的两条记录：

```
<ENVELOPE>
  <DBCFIXED>  <DBCDATE>1-Apr-2011</DBCDATE>
    <DBCPARTY></DBCPARTY>
  </DBCFIXED>
  <DBCVCHTYPE>Stock Journal</DBCVCHTYPE>
  <DBCVCHNO>1</DBCVCHNO>
  <DBCVCHREF></DBCVCHREF>
  <DBCSTNO></DBCSTNO>
  <DBCSERVICETAXNO></DBCSERVICETAXNO>
  <DBCPANNO></DBCPANNO>
  <DBCCSTNO></DBCCSTNO>
  <DBCNARR>Opening balance transfar</DBCNARR>
  <DBCQTY>0.000 Kg</DBCQTY>
  <DBCRATE></DBCRATE>
  <DBCAMOUNT></DBCAMOUNT>
  <DBCADDLCOST></DBCADDLCOST>
  <DBCGROSSAMT></DBCGROSSAMT>
  <DBCLEDAMT></DBCLEDAMT>
  <DBCFIXED>  <DBCDATE></DBCDATE>
    <DBCPARTY>ME KN YARN BL 1</DBCPARTY>
  </DBCFIXED>
  <DBCVCHTYPE></DBCVCHTYPE>
  <DBCVCHNO></DBCVCHNO>
  <DBCVCHREF></DBCVCHREF>
  <DBCSTNO></DBCSTNO>
  <DBCSERVICETAXNO></DBCSERVICETAXNO>
  <DBCPANNO></DBCPANNO>
  <DBCCSTNO></DBCCSTNO>
  <DBCNARR></DBCNARR>
  <DBCQTY>0.150 Kg</DBCQTY>
  <DBCRATE>566.00/Kg</DBCRATE>
  <DBCAMOUNT>-84.90</DBCAMOUNT>
  <DBCADDLCOST></DBCADDLCOST>
  <DBCGROSSAMT></DBCGROSSAMT>
  <DBCLEDAMT></DBCLEDAMT>
</ENVELOPE> 
```

对于导入 Access，我需要将数据分组到以 DBCFIXED 开头的记录，直到下一个 DBCFIXED。就像是：

```
<InventoryDaybook>
  <record>
    <DBCFIXED>  
      <DBCDATE>1-Apr-2011</DBCDATE>
      <DBCPARTY/>
    </DBCFIXED>
    <DBCVCHTYPE>Stock Journal</DBCVCHTYPE>
    <...></...>
  </record>
  <record>
    <...></...>
  </record>
/<InventoryDaybook> 
```

有效的 XSLT 2.0 代码是

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:template match="/*">
  <InventoryDaybook>
    <xsl:for-each-group select="*" group-starting-with="DBCFIXED">
      <record>
        <xsl:copy-of select="current-group()"/>
      </record>
    </xsl:for-each-group>
  </InventoryDaybook>
</xsl:template>
</xsl:stylesheet> 
```

使用 XSL 可以完成的工作令人惊讶，但我的知识似乎太少了。提前感谢您的帮助和理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:31:03.790

祝贺蒂姆第一个正确的解决方案。虽然 Tim 是绝对正确的，但我只是想提请 OP 的注意，XSLT 1.0 group-starting-with 有两种一般形式的解决方案 - 一种是头节点从密钥中排除（如 Tim 的情况），另一个包含头节点（如下所示）。我不确定哪个更好。也许 Dimitre 可以告诉我们。

因此，出于兴趣，这里是另一种形式，其中包括键中的头节点。

## 包含在键中的头节点形式

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="records" match="ENVELOPE/*" use="generate-id(
            (preceding-sibling::DBCFIXED|self::DBCFIXED)[last()])" />

   <xsl:template match="/ENVELOPE">
      <InventoryDaybook>
         <xsl:apply-templates select="DBCFIXED" mode="group-head" />
      </InventoryDaybook>
   </xsl:template>

   <xsl:template match="DBCFIXED" mode="group-head">
      <record>
         <xsl:apply-templates select="key('records', generate-id())" />
      </record>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

## 非常轻微的优势

1.  键匹配条件更简单。
2.  头节点的模板中少了一行。
3.  头节点通过应用模板而不是直接复制。如果您做的不仅仅是直接复制，这可能会有所帮助。

## 非常轻微的缺点

1.  键使用属性更复杂
2.  必须添加模式来区分头节点的分组和它的下游处理。虽然在方式上，这也是一个优势，因为模式指示符改进了自我记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:54:58.300

这可以通过**xsl:key**在 XSLT1.0 中实现，它匹配非 DBCFIXED 元素，并使用前面的第一个 DBCFIXED 元素作为键

```
<xsl:key 
    name="records" 
    match="ENVELOPE/*[not(self::DBCFIXED)]" 
    use="generate-id(preceding-sibling::DBCFIXED[1])" /> 
```

然后，当您匹配单个**DBCFIXED**元素时，您可以轻松查找构成记录的关联元素

```
<xsl:apply-templates select="key('records', generate-id())" /> 
```

这是完整的 XLST

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="records" match="ENVELOPE/*[not(self::DBCFIXED)]" use="generate-id(preceding-sibling::DBCFIXED[1])" />
   <xsl:template match="/ENVELOPE">
      <InventoryDaybook>
         <xsl:apply-templates select="DBCFIXED" />
      </InventoryDaybook>
   </xsl:template>

   <xsl:template match="DBCFIXED">
      <record>
         <xsl:copy-of select="." />
         <xsl:apply-templates select="key('records', generate-id())" />
      </record>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于输入 XML 时，输出以下内容

```
<InventoryDaybook>
   <record>
      <DBCFIXED>
         <DBCDATE>1-Apr-2011</DBCDATE>
         <DBCPARTY/>
      </DBCFIXED>
      <DBCVCHTYPE>Stock Journal</DBCVCHTYPE>
      <DBCVCHNO>1</DBCVCHNO>
      <DBCVCHREF/>
      <DBCSTNO/>
      <DBCSERVICETAXNO/>
      <DBCPANNO/>
      <DBCCSTNO/>
      <DBCNARR>Opening balance transfar</DBCNARR>
      <DBCQTY>0.000 Kg</DBCQTY>
      <DBCRATE/>
      <DBCAMOUNT/>
      <DBCADDLCOST/>
      <DBCGROSSAMT/>
      <DBCLEDAMT/>
   </record>
   <record>
      <DBCFIXED>
         <DBCDATE/>
         <DBCPARTY>ME KN YARN BL 1</DBCPARTY>
      </DBCFIXED>
      <DBCVCHTYPE/>
      <DBCVCHNO/>
      <DBCVCHREF/>
      <DBCSTNO/>
      <DBCSERVICETAXNO/>
      <DBCPANNO/>
      <DBCCSTNO/>
      <DBCNARR/>
      <DBCQTY>0.150 Kg</DBCQTY>
      <DBCRATE>566.00/Kg</DBCRATE>
      <DBCAMOUNT>-84.90</DBCAMOUNT>
      <DBCADDLCOST/>
      <DBCGROSSAMT/>
      <DBCLEDAMT/>
   </record>
</InventoryDaybook> 
```

# android - 如何更改搜索栏的颜色

> ID：11625290
> 
> 赞同：2
> 
> 时间：2012-07-24T06:27:37.067
> 
> 标签：android, seekbar

我需要一个搜索栏，哪个颜色需要这个

![在此处输入图像描述](../Images/43fca4c6645bca6d855e9959e4fe4fff.png)

我在drawable中制作了一个xml文件，它的渐变设置如下

```
 <layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

 <item android:id="@android:id/background">
     <shape>
        <corners android:radius="5dip" />

        <gradient
            android:angle="270"
            android:centerColor="#808080"
            android:centerY="0.75"
            android:endColor="#808080"
            android:startColor="#808080" />
    </shape>
</item>
<item android:id="@android:id/secondaryProgress">
    <clip>
        <shape>
            <corners android:radius="2dip" />

            <gradient
                android:angle="270"
                android:centerColor="#09488D"
                android:centerY="0.75"
                android:endColor="#09488D"
                android:startColor="#09488D" />
        </shape>
    </clip>
</item>
<item android:id="@android:id/progress">
    <clip>
        <shape>
            <corners android:radius="5dip" />

            <gradient
                android:angle="270"
                android:centerColor="#09488D"
                android:centerY="0.75"
                android:endColor="#09488D"
                android:startColor="#09488D" />
        </shape>
    </clip>
 </item>

</layer-list> 
```

然后这个xml在seekbar的背景中使用它但是颜色没有改变:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T06:39:50.453

将其包含在搜索栏中：

```
 <SeekBar 
                android:progressDrawable="@drawable/progress"
                android:thumb="@drawable/thumb"/> 
```

其中progress.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@android:id/background" 
    android:drawable="@drawable/background_fill" />

<item android:id="@android:id/progress">
    <clip android:drawable="@drawable/progress_fill" />
</item>
</layer-list> 
```

和拇指.xml：

```
<?xml version="1.0" encoding="utf-8"?>    
<selector xmlns:android="http://schemas.android.com/apk/res/android">
   <item android:drawable="@drawable/thumb_fill" />
</selector> 
```

您也可以参考此链接 - [http://www.mokasocial.com/2011/02/create-a-custom-styled-ui-slider-seekbar-in-android/](http://www.mokasocial.com/2011/02/create-a-custom-styled-ui-slider-seekbar-in-android/)和[http://www.anddev.org/ seekbar_progressbar_customizing-t6083.html](http://www.anddev.org/seekbar_progressbar_customizing-t6083.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:46:02.790

如果你想改变进度的颜色，你必须为你的progressDrawable 提供一个9patch drawable。

您可以在 android-sdk/platforms/(the-api-your-app-is-targeting)/data/res/drawable/scrubber_primary_holo.9 中找到当前使用的那个
（用于 api 15）

我发现最简单的方法是简单地打开该图像，编辑颜色，将图像保存为 9patch 图像并放入您的应用程序 /drawable 文件夹。

# android - 外键的 Db 约束

> ID：11625293
> 
> 赞同：1
> 
> 时间：2012-07-24T06:27:59.800
> 
> 标签：android, ormlite

我的帐户实体中有一个订单列表。出于这个原因，我的订单实体有一个返回其父订单的外键。在先保存其父帐户之前，防止保存订单的最佳方法是什么。我不希望没有帐户的数据库中存在任何订单。为了更好地解释这是我的订单类

```
@DatabaseTable
public class Order{

    private static final long serialVersionUID = 1L;

    @DatabaseField(id = true)
    private long id;

    @DatabaseField(foreign = true)
    private Account account;

} 
```

这是我的帐户类

```
@DatabaseTable
public class Account {
    private static final long serialVersionUID = 1L;

    @DatabaseField(id = true)
    private int id;

    @ForeignCollectionField
    private ForeignCollection<Order> orders;

    public ForeignCollection<Order> getOrders() {
        return orders;
    }

    public void setOrders(ForeignCollection<Order> orders) {
        this.orders = orders;
    }
} 
```

问题是我可以在没有设置帐户的情况下保存订单。有没有办法通过在订单的帐户字段中设置一些属性来防止这种情况？我省略了一些代码，但我知道上述关系正常，因为当我在每个订单中设置帐户字段 = A1 时，我可以检索给定帐户 A1 的订单 Or1、Or2、Or3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:21:16.410

抱歉延迟回复。有几件事可以在这里尝试。

您的`account`字段`Order`应该必须`canBeNull = false`确保该字段已被分配。

```
@DatabaseField(foreign = true, canBeNull = false)
private Account account; 
```

`Order`如果您尝试在没有集合的情况下插入您的，这将引发异常`Account`。但是，您可以使用尚未插入数据库的*文件*来设置`account`文件。解决该问题的一种方法是使该字段成为一个对象（与原始对象相反），因此如果尚未设置它就可以了。`Account`*`Account.id``Integer``int``null`*

 *```
// this is an Integer object so it is null if it has not been set
@DatabaseField(id = true)
private Integer id; 
```

然后，如果该`Account.id`字段尚未设置，如果您创建一个`Order`with that ，它将引发异常`Account`。顺便说一句，听起来您可能想要`@DatabaseField(generatedId = true)`，但该`Integer`领域也适用于此。

最后，如果您尝试创建who 的字段是或字段为 0 ，您还可以重写您的`orderDao.create(...)`方法以引发异常。`Order``account``null``account.id`

```
// we have a custom DAO for this class
@DatabaseTable(daoClass = MyOrderDao.class)
public static class Order {
        ...
}

public static class MyOrderDao extends BaseDaoImpl<Order, Integer> {
    public MyOrderDao(ConnectionSource connectionSource) throws SQLException {
        super(connectionSource, Order.class);
    }

    @Override
    public int create(Order order) throws SQLException {
        if (order.account == null) {
            throw new SQLException("Order's account field is null");
        }
        if (order.account.id == 0) {
            throw new SQLException("Order's account field has a 0 id");
        }
        return super.create(order);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:33:57.217

我正在粘贴测试数据库应用程序的整个源代码。这应该可以解决您的问题。

我有一个活动类，它将为您提供用于下订单的 UI 和支持的 xml 文件，以及一个用于执行数据库操作的 DbHandler 类。

这是活动代码。

```
package com.test;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.database.sqlite.SQLiteConstraintException;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class TestActivity extends Activity implements OnClickListener{

    private EditText accountId = null;
    private EditText orderNumber = null;
    private Button submit = null;

    private DBHandler dbHandler = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        setupUiElementProperties();
        dbHandler = new DBHandler(this);
    }

    private void setupUiElementProperties() {

        accountId = (EditText)findViewById(R.id.accountEditText);
        orderNumber = (EditText)findViewById(R.id.orderNoEditText);
        submit = (Button)findViewById(R.id.submit);
        submit.setOnClickListener(this);
    }

    public void onClick(View v) {

        try {

            dbHandler.placeOrder(Integer.parseInt(accountId.getText().toString().trim()), 
                    Integer.parseInt(orderNumber.getText().toString().trim()));

            showAlert("ORDER PLACED SUCCESSFULLY");
            System.out.println("DONE..");
        }catch (SQLiteConstraintException ex) {

            System.out.println("SQLITE EXCEPTIOn: " + ex.getMessage());

            showAlert("THIS ACCOUNT DOES NOT EXISTS");
        }catch (Exception e) {

            System.out.println("Exceptionn: " + e.getMessage());
        }
    }

    private void showAlert(String message) {

        new AlertDialog.Builder(TestActivity.this)
        .setTitle("Alert")
        .setMessage(message)
        .setPositiveButton("ok", new DialogInterface.OnClickListener(){
            public void onClick(DialogInterface dlg, int sumthin) {}
        })
        .show();
    }
} 
```

这是 main.xml 的 xml 代码

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/accountEditText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_margin="10dp"
        android:layout_toRightOf="@+id/accountNoLabel" android:inputType="number">

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/accountNoLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/accountEditText"
        android:layout_alignBottom="@+id/accountEditText"
        android:layout_alignParentLeft="true"
        android:text="Account Id" android:layout_marginLeft="5dp"/>

    <EditText
        android:id="@+id/orderNoEditText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/accountEditText"
        android:layout_alignRight="@+id/accountEditText"
        android:layout_below="@+id/accountEditText" android:inputType="number"/>

    <TextView
        android:id="@+id/orderLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/orderNoEditText"
        android:layout_alignBottom="@+id/orderNoEditText"
        android:layout_alignLeft="@+id/accountNoLabel"
        android:text="Order No" />

    <Button
        android:id="@+id/submit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="Submit" />

</RelativeLayout> 
```

最后是 DbHandler 类

```
package com.test;

import android.content.ContentValues;
import android.content.Context;
import android.database.sqlite.SQLiteConstraintException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DBHandler extends SQLiteOpenHelper {

    private SQLiteDatabase sqliteDatabaseInstance_ = null;

    public DBHandler(Context context){

        super(context, "TESTDATABASE.db", null, 1);
        sqliteDatabaseInstance_ = getWritableDatabase();
        sqliteDatabaseInstance_.execSQL("PRAGMA foreign_keys = ON;");
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        try {

            db.execSQL("CREATE TABLE ACCOUNT (accountId INTEGER PRIMARY KEY, name TEXT)");
            insertAccount(1234, "xyz", db);
            db.execSQL("CREATE TABLE ORDER_DETAILS (orderNo INTEGER, accountId INTEGER," +
                    "FOREIGN KEY (accountId) REFERENCES ACCOUNT(accountId))");
        }catch (SQLiteConstraintException sqliteConstraintException) {

            System.out.println("sqliteConstraintException: " + sqliteConstraintException.getMessage());
        }catch (Exception e) {

            System.out.println("Exception in DBHandler.onCreate: "+e.getMessage());
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {}

    public void placeOrder(int accountNo, int orderNo) throws SQLiteConstraintException{

        ContentValues cv = new ContentValues();
        cv.put("accountId", accountNo);
        cv.put("orderNo", orderNo);
        sqliteDatabaseInstance_.insertOrThrow("ORDER_DETAILS", null, cv);
    }

    private void insertAccount(int accId, String accountHolderName, SQLiteDatabase db) {

        ContentValues cv = new ContentValues();
        System.out.println("db: " + db);
        System.out.println("accountId: " + accId) ;
        System.out.println("accountHolderName: " + accountHolderName);
        cv.put("accountId", accId);
        cv.put("name", accountHolderName);
        db.insertOrThrow("ACCOUNT", null, cv);
    }
} 
```

实际上，您不会手动添加订单号（ORDER_DETAILS 表）。该字段必须自动递增并输入数据库。

我在 DbHandler 中添加了 insertAccount()，因为“Account”表没有任何条目。使用这种方法，我正在添加一个帐户 ID 为“1234”的帐户。

这应该是你的输出：

方案 1 帐号：1234 订单号：453412

当帐户 ID 1234 存在于 ACCOUNT 表中时，此条目将被插入到数据库中，并显示成功更新警报。

方案 2 帐户 2343 订单号：14523

由于外键约束失败，此条目将不被接受。因此，您会收到“此帐户不存在”的警报。

我的数据库可能与您需要的不同，但我希望这足以帮助您。

使用 SQLITEBROWSER 查看数据。

你的数据库文件应该在.........

转到文件资源管理器 -----> 数据 ------> 数据 ------> com.test -----> TESTDATA.db

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T09:55:00.457

@user965895：我没有看到你标记了 ormlite。我对此一无所知。我建议的代码是用于 SQLite 的。Android 带有内置的轻量级数据库 SQLite，您可以使用它。*

# jquery - 使用 PhoneGap / jQuery mobile 将数据发送到本地网络上的 TCP 服务器

> ID：11625298
> 
> 赞同：1
> 
> 时间：2012-07-24T06:28:24.583
> 
> 标签：jquery, cordova, tcp

我想将此字符串“ABC”发送到本地网络上的 TCP 服务器，并且地址和端口可用。我想用 phonegap 或 jquery mobile 做到这一点。

有什么帮助吗？

或者，我必须用 PHP 做一个代理，这个 PHP 将处理数据发送活动？

-安娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T02:30:35.900

jQuery/PhoneGap 本身不支持 TCP 协议。为 jQuery 使用 HTTP 代理，或为 PhoneGap 使用本机插件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T02:38:57.960

尝试这样的事情？

```
var req = new XMLHttpRequest();

req.open("get", url, true);
req.send(null);
req.onerror = function () {
    alert("Error");
    console.log("ERROR");
};
req.onResult = new function() {
    alert("Success");
    console.log("SUCCESS");
}; 
```

# c# - DevExpress GridControl 排序列表

> ID：11625305
> 
> 赞同：0
> 
> 时间：2012-07-24T06:28:48.347
> 
> 标签：c#, wpf, devexpress, gridcontrol

如何获取已排序的 gridControl 中的项目列表？

我需要创建一个只有值的新列表，按 GridControl 排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T11:58:04.723

可能不是最优雅的解决方案，但可以在 devexpress 网站上找到，因为我有一段时间遇到了同样的问题：

gridcontrol 的主gridview 有一个属性DataRowCount，所以你可以这样做；

```
List<DataRow> dataRows = new List<DataRow>();
for (int i = 0; i < gridView1.DataRowCount; i++) {
    DataRow row = gridView1.GetDataRow(i);
    dataRows.Add(row);
} 
```

然后你可以做任何事情，或者在使用列标题将其添加到集合之前从行中选择一个值：

```
object result = gridview1.GetDataRow(i)["ID"]; 
```

# php - 如何为用于 php rest api 的 sql 查询提供更好的抽象？

> ID：11625306
> 
> 赞同：0
> 
> 时间：2012-07-24T06:28:50.317
> 
> 标签：php, mysql, pdo

我已经使用`php pdo`. 但是每个查询都分散在各个类中。我如何提供一个抽象来更好地使用它；或者在 php 文件中使用 sql 查询的最佳实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:46:58.213

如果您对 PDO 提供的抽象不满意，为什么不尝试一些新的东西，一个 ORM？我更喜欢doctrine ORM，它让生活变得如此简单，它提供了大量的功能，加上它采用MVC方法，让我更容易维护我的代码，doctrine可以为你自动生成类并映射把它放到桌子上。加上一些功能，如自动检测表之间的关系、可时间戳行为、迁移、软删除，使其更加刺激。入门并不难，我发现文档是了解用法的最有用资源，因为它们通过示例解释了所有内容。

您可以在该网站获得更多信息：http: [//www.doctrine-project.org/](http://www.doctrine-project.org/)

PS：还有其他的ORM，如Propel、Red Bean等。

如果你正在寻找一个轻量级的 ORM，你可以看看 NotOrm，这里是教程的链接

[http://phpmaster.com/database-interaction-made-easy-with-notorm/?utm_source=dlvr.it&utm_medium=facebook&utm_campaign=database-interaction-made-easy-with-notorm](http://phpmaster.com/database-interaction-made-easy-with-notorm/?utm_source=dlvr.it&utm_medium=facebook&utm_campaign=database-interaction-made-easy-with-notorm)

这可能会帮助您入门。

# c# - IronPython 托管缓存导入的模块？

> ID：11625321
> 
> 赞同：0
> 
> 时间：2012-07-24T06:29:47.430
> 
> 标签：c#, .net, ironpython

我将 IronPython 嵌入到我的应用程序中。一切正常，但我发现当我使用`CreateScriptSourceFromFile`执行文件时，IronPython 似乎缓存了其他导入的模块。

例如我有另一个文件`foo.py`：

```
foo = 'foo' 
```

我使用 IronPython 托管 API 来执行`bar.py`：

```
from foo import foo
print foo 
```

如果我在`bar.py`不退出主机应用程序的情况下对 then 进行更改，我可以看到我所做的更改生效。但是，如果我进行编辑`foo.py`，那么我必须重新启动我的应用程序才能看到更改。我已经`Debug`在选项中启用了，但它没有帮助。

请指教。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T16:34:11.947

是的，导入的模块由 ScriptEngine 实例缓存。如果要自动重新加载缓存的模块，则必须创建一个新的引擎实例。目前没有办法禁用它并总是重新加载模块。

禁用缓存行为的选项不是一个坏主意。[打开一个问题](http://ironpython.codeplex.com/WorkItem/Create)，以便它在雷达上。当然，补丁更好。

# css - 2 个 div 之间的 div 宽度 100%

> ID：11625322
> 
> 赞同：3
> 
> 时间：2012-07-24T06:29:49.090
> 
> 标签：css, html

在我的页面上，我有这样的 div 结构。

- 身体上有 2 个 div。第一个 20% 宽度，第二个 80% 宽度。- 在第一个 div 旁边有 3 个 div。第一个向左浮动：11px 宽度，第三个向右浮动：22px 宽度。我想将第 2 个 div 放在第 1 个和第 3 个 div 之间，覆盖 100% 的剩余宽度。

我不能像这样制作第二个 div。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T06:39:15.890

像这样写：

**HTML**

```
<div class="firstdiv">
    <div class="first">1</div>
    <div class="third">3</div>
    <div class="second">2</div>
</div>
<div class="secdiv">80%</div> 
```

**CSS**

```
.firstdiv{
    width:20%;
    float:left;
    background:red;
    }
    .secdiv{
     overflow:hidden;
     background:green;
    }

.first{
    float:left;
    width:11px;
    background:yellow;
}
.third{
    float:right;
    width:22px;
    background:pink;
}
.second{
    overflow:hidden;
    background:blue;
} 
```

检查这个[小提琴](http://jsfiddle.net/SB7dn/4/)

# drupal - 在 drupal 7 中挂钩基本页面

> ID：11625323
> 
> 赞同：0
> 
> 时间：2012-07-24T06:30:00.633
> 
> 标签：drupal, drupal-7, hook

我在 drupal 7 中有几个基本页面，命名为，联系人。我尝试制作 page--about 并设置样式，但它不起作用。关于如何强制挂钩基本页面的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:56:26.583

在您的主题模板文件中，您可以获得模板建议。这是你可以检查没有任何奇怪的事情发生。以下将转储模板的建议。

您需要使用以下内容：

```
function YOURTHEME_process_page(&$vars) {
    var_dump($vars['theme_hook_suggestions']);
    dsm($vars['theme_hook_suggestions']); //if you have Devel
} 
```

您应该安装 Devel 模块，这对主题化有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:03:39.910

首先确保为您的内容类型使用正确的机器名称。转到内容类型并从那里复制它。

将 node.tpl.php 文件复制`root/modules/nodes/`到主题的模板目录。

`node.tpl.php`将文件重命名为`node--MACHINE_NAME.tpl.php`.

清除中的缓存`admin/performance/`。**这个很重要。**

# php - 有麻烦有重写不重写某事

> ID：11625324
> 
> 赞同：0
> 
> 时间：2012-07-24T06:30:16.600
> 
> 标签：php, regex, .htaccess, mod-rewrite, rewrite

我进行了重写，将字符串 , 重写`site.com/foo`为`site.com/?loc=foo.php`. 它工作正常，但是当我输入时，它`site.com/foo.php`不是重写为，而是重写为除没有 CSS 之外`site.com/?loc=foo.php.php`显示的其他内容。`site.com/?loc=foo.php`我希望它重写为`site.com/?loc=foo.php.php`.

我有一个`index.php`读取`$loc`并包含`foo.php`.

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)$ ?loc=$1.php 
```

疑难解答：

我回应`$loc`了`index.php`，根本没有任何反馈。然后我回应`$loc`并`foo.php`发现`$loc`没有声明。`site.com/foo.php`这导致在上面的代码中由于某种原因没有被重写的结论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:49:41.663

您拥有的脚本应该可以正常工作。这是我测试过的。

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)$ ?loc=$1.php 
```

这表示：

1）您在 .htaccess 中有另一个参数会干扰。注释掉（用#）除上述之外的任何行。然后将它们一个一个（或尽可能少）拉回来，直到找到罪魁祸首。

2) loc.php 实际存在。-f 表示“如果文件不存在”

3) 当您生成 $loc 时，您出于某种原因排除了该变量。您可以通过将顶部添加到 index.php 文件来进行检查。第一行向您展示了 get（应该是 'lol'=>'loc.php.php'），第二行向您展示了所有正在进行的会议：

```
<?php
  print_r($_GET);
  echo '<br><br>';
  print_r($_SERVER);
?> 
```

# iphone - 每当调用 didEnterForeground 时，将特定的 ViewController 设为默认值

> ID：11625325
> 
> 赞同：0
> 
> 时间：2012-07-24T06:30:20.507
> 
> 标签：iphone, objective-c, cocoa-touch, uiviewcontroller, uiapplicationdelegate

每当用户从任何 ViewController 离开时，我都想显示特定的 ViewController，比如说 defaultViewController。

所以在 didEnterForeground 我添加了这段代码，

```
self.DefaultViewController = [[DefaultViewController alloc] initWithNibName:@"DefaultViewController" bundle:nil];
self.window.rootViewController = _defaultViewController;
[self.window makeKeyAndVisible]; 
```

这很好用，但我想确保我所做的是正确的。这是否会导致任何内存问题？因为我没有打扰最后在 didEnterForeGround 中使用的 ViewController。

请 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:56:26.853

让我们来解决一般情况。

您添加一个带有一些 HomeViewController 的导航控制器。然后导航到其他 viewController、Tab Bar Controller 或其他任何东西。现在每当用户关闭应用程序时。您想要的是，在启动时，我们应该向他显示 HomeViewController。

现在，如果你有一个导航控制器处理导航（它可能被隐藏），你总是可以弹出到导航控制器堆栈上可用的任何视图控制器。这样就很容易了。

# oracle10g - oracle查询中缺少逗号错误

> ID：11625329
> 
> 赞同：3
> 
> 时间：2012-07-24T06:30:32.450
> 
> 标签：oracle10g

在数据库中插入一行时出现错误。

错误：ORA-00917：缺少逗号

但是我的查询中没有缺少逗号。以下是查询：

插入客户（NEED_BY_DATE）值（'|| 'to_date('|| ''''|| v_in_need_by_date|| ''''|| ','|| ''''|| 'MM-DD-YYYY' || ''''|| ')'|| ');

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:50:28.330

to_date: 之前的引号和管道`... VALUES('|| 'to_date...`不应该存在，`||`用于连接字符串并且 ' 不是字符串。同样的事情还在继续。

我相信你想要这样的东西：
`INSERT INTO Customer (NEED_BY_DATE) VALUES(to_date(v_in_need_by_date));`

# android - HTML.fromHtml 换行符消失

> ID：11625330
> 
> 赞同：11
> 
> 时间：2012-07-24T06:30:36.877
> 
> 标签：android, html, formatting, textview, android-edittext

我正在从 EditText 框中获取跨区文本，并使用 HTML.toHtml 将其转换为 HTML 标记字符串。这工作正常。我已经验证该字符串是正确的并且`<br>`在适当的位置包含 a 。但是，当我必须将标记字符串转换回跨区文本以使用 HTML.fromHtml 填充 TextView 或 EditText 时，第一段末尾的`<br>`（或多个如果存在）消失了。这意味着如果用户输入带有多个换行符的文本并希望保留该格式，它就会丢失。

我附上了一张图片来帮助说明这一点。第一个 EditText 是用户输入，它下面的 TextView 是它上面的 EditText 的 HTML.tohtml 结果，它下面的 EditText 使用 HTML.fromHtml 填充它上面的 TextView 中的字符串。如您所见，换行符已消失，多余的行也已消失。此外，当第二个编辑文本的跨区文本通过 HTML.toHtml 运行时，它现在会生成一个不同的 HTML 标记字符串。

![在此处输入图像描述](../Images/70ac1a14db0816d1410ae3dce0697cfd.png)

我希望能够从第一个 EditText 中获取 HTML 标记的 String 并填充其他 TextViews 或 EditTexts 而不会丢失换行符和格式。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T07:35:41.600

我也有这个问题，我找不到简单的“转换”或类似的解决方案。请注意一些重要的事情，当用户按下“回车”时，java 会产生特殊字符`\n`，但在 HTML 中没有这样的换行格式。它是`<br />`.

所以我所做的就是用`CharSequence`另一种 HTML 格式替换纯文本中的一些特定 s。就我而言，只有“输入”字符，所以它不是那么混乱。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-07T06:46:12.330

当我尝试将 editText 内容保存/恢复到 db 时，我遇到了类似的问题。问题出在 Html.toHtml 中，它以某种方式跳过了线刹车：

```
 String src = "<p dir=\"ltr\">First line</p><p dir=\"ltr\">Second<br/><br/><br/></p><p dir=\"ltr\">Third</p>";
    EditText editText = new EditText(getContext());
    // All line brakes are correct after this
    editText.setText(new SpannedString(Html.fromHtml(src))); 
    String result = Html.toHtml(editText.getText()); // Here breaks are lost
    // Output :<p dir="ltr">First line</p><p dir="ltr">Second<br></p><p dir="ltr">Third</p> 
```

我通过使用自定义 toHtml 函数来序列化跨区文本解决了这个问题，并将所有 '\n' 替换为 "< br/>:

```
 public class HtmlParser {
        public static String toHtml(Spannable text) {
            final SpannableStringBuilder ssBuilder = new SpannableStringBuilder(text);
            int start, end;

            // Replace Style spans with <b></b> or <i></i>
            StyleSpan[] styleSpans = ssBuilder.getSpans(0, text.length(), StyleSpan.class);
            for (int i = styleSpans.length - 1; i >= 0; i--) {
                StyleSpan span = styleSpans[i];
                start = ssBuilder.getSpanStart(span);
                end = ssBuilder.getSpanEnd(span);
                ssBuilder.removeSpan(span);
                if (span.getStyle() == Typeface.BOLD) {
                    ssBuilder.insert(start, "<b>");
                    ssBuilder.insert(end + 3, "</b>");
                } else if (span.getStyle() == Typeface.ITALIC) {
                    ssBuilder.insert(start, "<i>");
                    ssBuilder.insert(end + 3, "</i>");
                }
            }

            // Replace underline spans with <u></u>
            UnderlineSpan[] underSpans = ssBuilder.getSpans(0, ssBuilder.length(), UnderlineSpan.class);
            for (int i = underSpans.length - 1; i >= 0; i--) {
                UnderlineSpan span = underSpans[i];
                start = ssBuilder.getSpanStart(span);
                end = ssBuilder.getSpanEnd(span);
                ssBuilder.removeSpan(span);
                ssBuilder.insert(start, "<u>");
                ssBuilder.insert(end + 3, "</u>");
            }
            replace(ssBuilder, '\n', "<br/>");

            return ssBuilder.toString();
        }

        private static void replace(SpannableStringBuilder b, char oldChar, String newStr) {
            for (int i = b.length() - 1; i >= 0; i--) {
                if (b.charAt(i) == oldChar) {
                    b.replace(i, i + 1, newStr);
                }
            }
        }
} 
```

事实证明，这种方式比默认的 Html.toHtml() 快了大约 4 倍：我做了一个大约 20 页和 200 个跨度的基准测试：

```
 Editable ed = editText.getText(); // Here is a Tao Te Ching :)
    String result = "";
    DebugHelper.startMeasure("Custom");
    for (int i = 0; i < 10; i++) {
        result = HtmlParserHelper.toHtml(ed);
    }
    DebugHelper.stopMeasure("Custom"); // 19 ms

    DebugHelper.startMeasure("Def");
    for (int i = 0; i < 10; i++) {
        result = Html.toHtml(ed);
    }
    DebugHelper.stopMeasure("Def"); // 85 ms 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-02T07:53:15.523

替换 /n => < br>< br>

例子

<p>嗨</p> <p>j</p>

至：

<p>嗨</p><br><br><p>j</p>

# asp.net - 根据角色阻止访问文件夹

> ID：11625332
> 
> 赞同：1
> 
> 时间：2012-07-24T06:30:43.100
> 
> 标签：asp.net, .net, web-config

我有一个名为 admin 的子文件夹。我只想将其保护给具有 ADMIN 角色的用户。我怎么做。我创建了一个新的 web.config 并将其放在该文件夹中。以下是我的网络配置。

```
<configuration>
  <appSettings/>
  <connectionStrings/>
  <system.web>
    <authorization>
      <allow roles="ADMIN"/>
    </authorization>
  </system.web>
</configuration> 
```

但是所有经过身份验证的用户都可以访问它。如何保护该文件夹内容。

**编辑**

身份验证在父文件夹中完成，用户和管理员使用相同的登录名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T06:46:40.557

尝试这个：

```
<configuration>
  <appSettings/>
  <connectionStrings/>
  <system.web>
    <authorization>
      <allow roles="ADMIN"/>
      <deny users="*"/>
    </authorization>
  </system.web>
</configuration> 
```

# asp.net - ASP.NET 验证在回发时发生

> ID：11625336
> 
> 赞同：1
> 
> 时间：2012-07-24T06:30:56.450
> 
> 标签：asp.net, validation, postback

我在标准 ASP.NET 页面上有一个带有一些输入控件的表单。我使用验证控件来验证服务器上的输入。

我注意到有几篇文章描述了在验证失败时会阻止回发这一事实的问题。我的问题恰恰相反，即永远不会阻止回发，但是每次回发发生时都会发生验证，这意味着每次用户更改输入字段中的值时表单都会被涂上红色文本（即使他很清楚他没有填写表格！）。

该论坛上的其他文章认为这种行为是有意的。显然，用户不想担心在按下“提交”之前告诉他他做错了什么的信息。 那么如何将控件配置为仅在按下提交按钮时显示验证摘要，而不是在任何回发时显示验证摘要？

注意：我只在按下提交按钮时调用 Page.IsValid - 没有别的地方。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T06:41:54.953

尝试将 validationgroup 属性添加到所有验证器和要进行验证的按钮。查看更多： http: [//msdn.microsoft.com/en-us/library/ms227424.aspx](http://msdn.microsoft.com/en-us/library/ms227424.aspx) 示例：

```
 <asp:TextBox ID="TextBox1" Runat="server" ValidationGroup="First"></asp:TextBox>
    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" Runat="server" ValidationGroup="First"
    ErrorMessage="TextBox1 should not be blank" ControlToValidate="TextBox1">

    </asp:RequiredFieldValidator>
    <asp:Button ID="Submit1" Runat="server" ValidationGroup="First" Text="Submit 1" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T07:06:02.027

您只需为在单击按钮时需要验证的所有控件提供**相同的验证组属性。**此外，您的按钮必须具有相同的验证组并将按钮的**Causevalidation**属性设置为 true。这应该可以避免您回发。谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T23:08:01.913

验证组将本地化 ValidationSummary 显示区域，通常在物理上靠近其关联的数据字段。与值更改时的自动回发无关。

我会检查您的验证器是否启用了客户端脚本。如果不是，则只有服务器可以验证数据 - 需要对任何值更改进行回发。

PS：在简单的表单上，我从不使用验证组，因为所有报告的错误都可以在默认组下累积，并一起显示相关消息。在复杂的表格上，我可能会创建几个组以使错误在物理上接近有问题的数据。无论您的分组如何，*所有*验证方法都将运行 - 并报告给指定组内的相关验证摘要（如果提供）。 从微软**编辑这个：**

> 要以编程方式进行验证，您可以调用采用 validationGroup 参数的 Validate 方法重载来强制仅对该验证组进行验证。请注意，当您调用 Validate 方法时，IsValid 属性会反映到目前为止已验证的所有组的有效性。这可能包括作为回发结果验证的组和以编程方式验证的组。如果任一组中的任何控件无效，则 IsValid 属性返回 false。

[http://msdn.microsoft.com/en-us/library/vstudio/ms227424(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms227424(v=vs.100).aspx)

GROUPS 与回发无关。他可能有一个设置了自动回发或关闭脚本的控件。

# jquery - 选择标签宽度的 IE 8 问题：选项文本被截断

> ID：11625342
> 
> 赞同：0
> 
> 时间：2012-07-24T06:31:40.960
> 
> 标签：jquery, html, css, internet-explorer-8

> **可能重复：**
> [IE 中的下拉列表宽度](https://stackoverflow.com/questions/73960/dropdownlist-width-in-ie)

根据我的 UI 布局，我已将选择标签宽度设置为固定值，但我的选项太长（太宽），因此它们在 IE8 中被截断。其他浏览器显示正确的输出。请建议解决IE8问题的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:51:09.423

我认为一种解决方案是为所有选项定义“标题”属性的值

# c# - DevExpress GridControl 行号

> ID：11625344
> 
> 赞同：1
> 
> 时间：2012-07-24T06:31:53.540
> 
> 标签：c#, wpf, devexpress, gridcontrol

如何用行号制作列？适用于默认 WPF dataGrid 的解决方案不适用于 DevExpress...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T08:34:59.340

您需要向您的 gridview 添加一个 unboundcolumn，您可以从设计器或代码中执行此操作。

```
var col = gridView1.Columns.Add();
col.FieldName = "counter";
col.Visible = true;
col.UnboundType = DevExpress.Data.UnboundColumnType.Integer;
gridView1.CustomUnboundColumnData += gridView1_CustomUnboundColumnData;

void gridView1_CustomUnboundColumnData(object sender, DevExpress.XtraGrid.Views.Base.CustomColumnDataEventArgs e)
{
    if (e.IsGetData)
        e.Value = e.ListSourceRowIndex+1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T15:01:35.383

将列标题设置为“#”，然后将此事件添加到 gridView1

```
 private void gridView1_CustomColumnDisplayText(object sender, DevExpress.XtraGrid.Views.Base.CustomColumnDisplayTextEventArgs e)
    {
        if (e.Column.Caption == "#")
        {
            e.DisplayText = (e.RowHandle + 1).ToString();
        }
    } 
```

# .htaccess - 如何在新的 drupal 站点中使用旧的 URL

> ID：11625348
> 
> 赞同：1
> 
> 时间：2012-07-24T06:32:12.583
> 
> 标签：.htaccess, drupal, url-rewriting, drupal-7

我正在将一个 asp 站点迁移到 drupal。现有站点节点 URL 为

```
story.asp?sectioncode=1&storycode=49667&c=1 
```

要在 drupal 站点中使用相同的 URL，我在 URL 别名中添加 URL。当我单击它显示为的任何文章时

```
story.asp%3Fsectioncode%3D1%26storycode%3D49667%26c%3D1 
```

在浏览器中。如何`%3D,%26,%3F`从 URL 中删除，当我在浏览器中复制并粘贴旧 URL 时，它不会将我重定向到实际页面，给出`404`未找到的页面。有人可以帮助我如何管理我的旧 URL在新站点中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T08:19:57.220

您不应该输入诸如`story.asp?sectioncode=1&storycode=49667&c=1`URL 别名之类的内容。

有更好的方法来做到这一点。尝试安装[重定向模块](http://drupal.org/project/redirect)并将新的 301 重定向规则添加`story.asp?sectioncode=1&storycode=49667&c=1`到新节点的 URL`node/1`中。

因此，无论任何用户/搜索引擎访问什么`story.asp?sectioncode=1&storycode=49667&c=1`，它们都会被重定向到`node/1`. 或您为 301 重定向规则提供的任何路径。

希望这有助于...穆罕默德。

# testing - 什么是测试工具？

> ID：11625351
> 
> 赞同：70
> 
> 时间：2012-07-24T06:32:22.073
> 
> 标签：testing, automation

我在理解测试`harness`和自动化测试中的测试用例、测试脚本等相关常用术语方面遇到了一些困难。

所以这就是我到目前为止得到的：

> 自动化测试是使用特殊的软件（被测试的软件除外）来控制测试的执行并将实际结果与预期结果进行比较。它还涉及设置测试先决条件。这种测试最适合经常进行的测试。

现在，我在*测试工具*方面遇到了一些问题。我读到它由*测试用例*、*输入文件*、*输出文件*和*测试脚本组成的**测试套件*组成。现在我的问题是测试用例和测试脚本有什么区别？

 ***您如何使用该软件来测试验收单元测试 (AUT) 的不同功能？我还遇到了一些术语，例如*套件大师*和*案例代理*。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-07-24T09:52:08.933

那里有几个广泛的问题，将根据我的经验尝试回答。

[**将测试工具**](http://en.wikipedia.org/wiki/Test_harness)想象成一个“推动者”，它实际上完成了所有工作：(1)使用 (2)**测试库****执行测试**和 (3)**生成报告**。这将要求您的测试脚本旨在处理不同的 (4)**测试数据**和 (5)**测试场景**。本质上，当测试工具到位并准备好先决条件数据（又名*数据准备*）时，应该能够单击一个按钮或运行一个命令来执行所有测试并生成报告。

 *******测试工具很可能是使上述所有事情发生的不同事物的集合。如果您在开发应用程序时编写单元测试，那将是测试工具的一部分。您还将对应用程序的功能进行其他测试，例如：用户登录站点、查看收藏夹窗格、最近的消息和通知。然后你添加一个“运行器”，它会遍历你所有的“**测试脚本**”并运行它们*（而不是你必须一次执行一个测试）*。如果感觉测试工具更像是一个概念集合而不是单个软件，那么您就正确理解了这一点:-)

> 现在我的问题是测试用例和测试脚本有什么区别？

简单但不完全正确的答案：**测试用例**定义了测试目标、描述、前提条件、步骤（描述性或特定性）、预期结果。然后，**测试脚本**将是您执行该测试的实际自动化脚本。那是在自动化环境中。它会改变。很多。

像 ISTQB 这样的认证定义为**测试场景**在一些公司和国家通常被称为**测试用例。**在其他情况下，当提到手动测试时（当详细给出步骤但不是自动化工具的一部分时），测试用例会被测试脚本翻转。其他人说测试脚本完全意味着自动化测试。另一方面，人们也可以争辩说，多个测试用例可以组合在一个测试脚本中，反之亦然。那么这就引出了一个问题，**测试程序**如何适应？

一个[测试开发](http://en.wikipedia.org/wiki/Software_testing#A_sample_testing_cycle)阶段可以有：*“测试程序、测试场景、测试用例、测试数据集、测试脚本在测试软件中使用。”*

如果您假设**>（大于/集合）**关系，您将如何关联这些关系？修辞问题-根据您的工作地点，客户是谁等而有所不同。最好的办法是与您的同事/客户一起定义它，并**就对术语的理解而不是定义达成一致**。我目前使用测试脚本 = 自动化脚本，基于预先存在的手动测试用例或测试场景。

> 另外，您如何使用该软件来测试 AUT 的不同功能？

你编写不同的测试来测试不同的东西。每个测试都会执行某些操作并检查 AUT 的输出是否符合您的预期 - `If displayed_value == expected_value`。例如，**输入文件**可用于为测试用户名和密码的测试列表提供数据。或者使用不同的数据运行相同的测试 - 使用不同的消息以不同的用户身份登录，等等。

看看[RobotFramework](https://github.com/robotframework/robotframework)和[Selenium](http://seleniumhq.org/)。与 Selenium 库相结合的机器人框架测试（以文本或 html 文件编写）将允许您编写测试特定内容的自动化测试……例如主页验证。您将编写一个单独的测试以确保用户可以看到他/她的所有消息。另一个测试清除通知。等等。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-03T05:54:28.297

**测试工具**：由执行测试所需的存根和驱动程序组成的测试环境。

测试工具和存根将用于复制缺失的项目（尚未包含在测试或外部系统中的组件）。通常，当执行多个模块或组件的小规模集成测试时，有必要设计或即兴创作方法和工具以将测试数据获取到被测组件。这通常称为测试工具。由于需要了解构建测试工具所需的技术细节，因此该测试几乎总是由开发团队完成。

测试工具可以通过模拟测试对象将在其中运行的环境来促进组件或系统部分的测试。这可能是因为该环境的其他组件尚不可用并被存根和/或驱动程序替换，或者只是为了提供可预测和可控的环境，在该环境中任何故障都可以定位到被测对象。这些通常是由开发人员生成的定制程序，以帮助测试过程。如果在成熟的组织中使用它们，这些工具很可能会被视为“测试资产”并受版本控制和配置管理的约束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-19T12:04:09.160

**测试工具**包含编译和运行测试所需的所有信息。这包括测试用例、被测源文件、存根和目标部署端口 (TDP) 配置设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-15T01:15:58.430

测试工具是在单元、模块、应用程序或系统级别测试软件所需的所有项目的集合，并提供执行测试的机制。输入数据、测试参数、测试用例、测试脚本、预期输出数据、测试工具和测试结果报告等每一项都是测试工具的一部分。**********

# gcc - Ubuntu上的pycrypto给出编译器错误

> ID：11625352
> 
> 赞同：17
> 
> 时间：2012-07-24T06:32:28.597
> 
> 标签：gcc, ubuntu, pycrypto

我正在尝试使用 Python 2.7.3 在[Ubuntu 10.04](https://en.wikipedia.org/wiki/List_of_Ubuntu_releases#Ubuntu_10.04_LTS_.28Lucid_Lynx.29) (Lucid Lynx) 上安装 pycrypto2.6。

我遇到以下错误：

```
running build
running build_py
running build_ext
running build_configure
checking for gcc... no
checking for cc... no
checking for cl.exe... no
configure: error: in `/home/pratibha/Desktop/pycrypto-2.6':
configure: error: no acceptable C compiler found in $PATH
See `config.log' for more details
Traceback (most recent call last):
File "setup.py", line 456, in <module>
core.setup(**kw)
File "/usr/local/lib/python2.7/distutils/core.py", line 152, in setup
dist.run_commands()
File "/usr/local/lib/python2.7/distutils/dist.py", line 953, in run_commands
self.run_command(cmd)
File "/usr/local/lib/python2.7/distutils/dist.py", line 972, in run_command
cmd_obj.run()
File "/usr/local/lib/python2.7/distutils/command/build.py", line 127, in run
self.run_command(cmd_name)
File "/usr/local/lib/python2.7/distutils/cmd.py", line 326, in run_command
self.distribution.run_command(command)
File "/usr/local/lib/python2.7/distutils/dist.py", line 972, in run_command
cmd_obj.run()
File "setup.py", line 251, in run
self.run_command(cmd_name)
File "/usr/local/lib/python2.7/distutils/cmd.py", line 326, in run_command
self.distribution.run_command(command)
File "/usr/local/lib/python2.7/distutils/dist.py", line 972, in run_command
cmd_obj.run()
File "setup.py", line 278, in run
raise RuntimeError("autoconf error")
RuntimeError: autoconf error 
```

我检查了软件中心，并且在我的系统上安装了 GCC，但是“which gcc”命令没有返回任何路径。

我通过创建符号链接得到它：

```
ln -s /usr/bin/gcc-4.4 /usr/bin/gcc 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-03-27T10:52:24.663

在共享主机（Webfaction）上安装 pycrypto 时，我遇到了类似的错误消息。解决方案是在安装时更改临时目录：

```
TMPDIR=~/tmp pip install pycrypto 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-18T15:42:08.540

我有一个类似的问题，但就我而言，事实证明我根本没有`gcc`安装。

所以一个简单`sudo apt-get install gcc`的伎俩。

如果您已安装它，但`which gcc`没有返回任何路径，请转到`/usr/bin/`并查找`gcc`. 然后创建一个符号链接，如下所示：

```
ln -s /usr/bin/gcc-<version-number> /usr/bin/gcc 
```

当然，您替换`<version-number>`为适当的版本号。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-02-27T01:44:55.193

我遇到了同样的问题，尝试安装 gcc 的上述步骤没有帮助。

一旦我安装了 python-dev 包，一切都编译得很好。

`sudo apt-get install python-dev`

# ios - 在返回时存储 Sqlite 数据库中的值

> ID：11625355
> 
> 赞同：-1
> 
> 时间：2012-07-24T06:32:37.037
> 
> 标签：ios, sqlite

因此，当我直接在 sqlite 中执行查询时，它会按我期望的顺序返回值。但是当我在我的 iOS 应用程序上显示它时，它会按升序对值进行排序，这是我不希望发生的。谁能帮我解决这个问题？！

提前致谢！！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:37:27.813

您的查询是否有“order by”语句？也许这种方式可以让您控制获得所需的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:42:29.853

你想要达到的目标不应该是一个问题：

1.  进行 SQL 查询：如果您希望对结果进行排序，它可能看起来像这个`select columname from yourtable order by asc`asc 将按字母顺序对结果进行排序

2.  逐行读取 SQL 查询的结果。这是一些代码片段：

    ```
    NSString *SQLQuery  = @"your SQL query here" 

    // The SQL statement that you plan on executing against the database 
    const char *sql =  [SQLQuery UTF8String];

    // The SQLite statement object that will hold your result set 
    sqlite3_stmt *statement;

    // Prepare the statement to compile the SQL query into byte-code
    int sqlResult = sqlite3_prepare_v2(database, sql, -1, &statement, NULL);

    if (sqlResult== SQLITE_OK) {

        while (sqlite3_step(statement) == SQLITE_ROW) {

        // feed the result in a mutable array here
        // e.g [yourmutablearray addObj: yourObj];

        }

        // Finalize the statement to release its resources
        sqlite3_finalize(statement);
    }
    else // catch up any possible issue here
    {
        NSLog(@"Problem excuting SQL statement on the Database:"); 
        NSLog(@"%d",sqlResult);
    } 
    ```

# php - 如何使用 .htaccess 修改 Phil Sturgeon 的 CodeIgniter REST 库的功能，以便可以在 URL 中传递对象 ID？

> ID：11625356
> 
> 赞同：0
> 
> 时间：2012-07-24T06:32:37.167
> 
> 标签：php, .htaccess, codeigniter, rest

我正在为 CodeIgniter 使用 Phil Sturgeon 的 REST 服务器，并希望修改功能以便支持以下 URL：

```
http://api.example.com/users
http://api.example.com/users/1 
```

分别获取用户列表和单个用户，而不是它支持的那些：

```
http://api.example.com/users
http://api.example.com/users?id=1 
```

我在他的博客上读到[，这应该可以使用 mod_rewrite](http://philsturgeon.co.uk/blog/2010/04/tiny-rest-framework)，但无法按预期工作。

默认的 CodeIgniter .htaccess 如下所示：

```
RewriteEngine on

RewriteCond $1 !^(index\.php|css|images|js|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

我已经尝试添加自己的规则来尝试实现此功能。这是我希望正常工作的一个。它被放置在 RewriteEngine 激活之后和 CodeIgniter 规则之前。

```
RewriteRule ^users/([0-9+]) /users?id=$1 [NC] 
```

我认为这将级联到下一个规则，该规则将通过 CodeIgniter 路由，然后点击正确的`users.php`控制器，然后是`index_get`方法（由 REST 服务器重新映射）。

相反，我收到一个“未知方法”错误 - 似乎 CodeIgniter 试图将用户整数用作函数，例如`users/12`它试图`12()`在`users.php`.

有谁知道这里出了什么问题，或者可以推荐解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:28:47.287

CodeIgniter 使用前端控制器模式并支持干净的 URL。这意味着它应该能够以您想要的方式透明地获取和路由请求。您应该能够设置您的 Web 服务器以将所有请求路由到 CodeIgniter`index.php`并修改它的配置文件以适应。

编辑您的`system/application/config/config.php`文件并设置 index_page 变量：`$config['index_page'] = '';`. 然后，在 Apache 中编辑您的`.htaccess`文件或虚拟主机配置文件以使用以下内容：

```
# Turn on the rewriting engine.
RewriteEngine On
# Default rewrite base to /
RewriteBase /

# Rewrite if the request URI begins with "system":
RewriteCond %{REQUEST_FILENAME} ^system
RewriteRule ^(.*)$ index.php/$1 [NC,L]

# Or if it points at a file or directory that does not exist:
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# Also rewrite it to the front controller.
RewriteRule ^(.*)$ index.php/$1 [NC,L] 
```

**编辑：**查看作者本人的[这个答案](https://stackoverflow.com/a/7306530/695546)，他说 CodeIgniter 应该默认选择查询字符串或 URI 段样式。

**编辑2：**啊，我明白你的意思了。您不希望将查询变量名称作为 URI 段。您可以通过修改路由文件来解决此问题，以便它将所有查询发送到该控制器上的单个方法。

# raphael - 我们如何更改 Raphael JS 中元素的锚点？

> ID：11625358
> 
> 赞同：2
> 
> 时间：2012-07-24T06:32:51.283
> 
> 标签：raphael

有一个选项可以更改文本的锚点。元素也有类似的东西吗？...到目前为止，我正在通过一些非常烦人的数学计算来修复。

# c# - 在 stimulreport 中显示数据库图像

> ID：11625359
> 
> 赞同：3
> 
> 时间：2012-07-24T06:32:56.987
> 
> 标签：c#, stimulsoft

我在 Stimulreport 的帮助下制作了一份报告，并希望在我的报告中显示来自数据库的图像。

图像为 byte[] 格式。

我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:08:11.313

您可以在 Image 组件的 ImageData 属性中使用以下表达式：

```
{StiImageHelper.GetImageFromObject(your_byte_array)} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T13:08:06.860

我有一个测试表，如：

[![在此处输入图像描述](../Images/aad73904f9f856b5b812b81e04e5f310.png)](https://i.stack.imgur.com/acDjk.jpg)

和一个测试 stimulsoft 报告，如：

[![在此处输入图像描述](../Images/220d98479dbd7cd448b7a09e8791c1a2.png)](https://i.stack.imgur.com/YD6Yq.jpg)

下面的代码是我如何将图片从 sql server 发送到 stimulsoft 并制作报告的 pdf 文件：

```
protected void btnPrint_Click(object sender, EventArgs e)
    {
        SqlCommand myCommand = new SqlCommand("SELECT * FROM Product_Pipe_QR", new SqlConnection("my connection string"));
        SqlDataAdapter dataAdapter = new SqlDataAdapter(myCommand);
        DataSet dataSet = new DataSet("QR");
        dataAdapter.Fill(dataSet);

        StiReport stiReport = new StiReport();
        string path = "~/Report/Product/QR.mrt";
        stiReport.Load(Server.MapPath(path));

        stiReport.RegData(dataSet);

        stiReport.Render();

        if (!Directory.Exists(Server.MapPath("~/Report/PDF")))
            Directory.CreateDirectory(Server.MapPath("~/Report/PDF"));
        string ReportFileName = "Pipe_Report.pdf";
        stiReport.ExportDocument(StiExportFormat.Pdf, ReportFileName);
        FileStream file = File.Open(ReportFileName, FileMode.Open);
        Response.Clear();
        Response.AddHeader("Content-Disposition", "attachment; filename=" + ReportFileName);
        Response.AddHeader("Content-Length", file.Length.ToString());
        Response.ContentType = "application/pdf";
        file.Close();
        Response.WriteFile(ReportFileName);
    } 
```

在stimulsoft 字典中和`UniqueSerial`在数据库中都是.`QRImage``string``QRImage``image type`

# jsf-2 - 我从两页调用了一个函数。一个页面可以工作，另一个页面不能正常工作

> ID：11625360
> 
> 赞同：0
> 
> 时间：2012-07-24T06:32:57.253
> 
> 标签：jsf-2, managed-bean

在索引中包含树页面（列表、视图、编辑）并使用相同的命令拖曳页面（列表和视图）。当我 List.xhtml 页面的查看或编辑按钮单击并打开它时；但是 View.xhtml 页面的编辑按钮单击然后显示在流动的按摩中：

```
Unable to find matching navigation case with from-view-id '/index.xhtml' for action '#{instituteController.viewEdit}' with outcome 'null' 
```

.

我想要查看页面的编辑按钮单击以编辑页面打开到索引页面。List.xhtml 代码：

```
<h:commandButton action="#{instituteController.prepareView}" value="#{bundle.ListInstituteViewLink}">
   <f:ajax execute="@form" render="@form"/>
</h:commandButton>

<h:commandButton action="#{instituteController.prepareEdit}" value="#{bundle.ListInstituteEditLink}">
    <f:ajax execute="@form" render="@form"/>
</h:commandButton> 
```

查看.xhtml代码

```
 <h:commandButton action="#{instituteController.viewEdit}" value="#{bundle.ListInstituteEditLink}">
 <f:ajax execute="@form" render="@form"/>
</h:commandButton> 
```

InstituteController.java 代码：

```
 public String prepareEdit() {
    current = (Institute) getItems().getRowData();
    selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
    return "index";
}
 public String viewEdit() {

          return "null";
} 
```

如果我返回 "index" ；这个命令不起作用。再次显示此代码：

```
 public String viewEdit() {

          return "index";
          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:57:41.300

你的错误在这里：

```
public String viewEdit() {
    // ...
    return "null";
} 
```

您正在返回一个`String`值为`"null"`. 这和字面意思不一样 `null`。

相应地修复它：

```
public String viewEdit() {
    // ...
    return null;
} 
```

或者什么都不返回：

```
public void viewEdit() {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:52:52.547

因为您返回“null”，所以写在您的异常中。如果您想留在同一页面或您想去的页面的名称，则返回空字符串。

# php - 选择 District 时 PHP 从数据库中填充数据

> ID：11625365
> 
> 赞同：0
> 
> 时间：2012-07-24T06:33:47.020
> 
> 标签：php, javascript, mysql, database

请改为关注此帖子 检查我的以下帖子 请 [链接多项选择](https://stackoverflow.com/questions/11712199/chained-multiple-selects)

我有这个代码，用户在其中选择特定的医生类别，然后选择他想要查看的地区。状态后他需要点击车站（在选定的地区）医生>>地区>>车站

```
Here is the code 
<html>
<body>
<form action="process.php" method="post">
<select name="cat">
<?php
$sql="select distinct Category from doctors order by Category asc";
$query=mysql_query($sql);

while($row=mysql_fetch_array($query))
{
echo "<option value='{$row[Category]}'>{$row[Category]}</option>";
}
?>
</select>
<select name="station">
<?php
$sql_1="select distinct Station from doctors order by Station asc";
$query_1=mysql_query($sql_1);

while($row=mysql_fetch_array($query_1))
{

echo "<option value=".$row[Station].">".$row[Station]."</option>";
}
?>
</select>
<input name="C" type="submit" />
</form>
</body>
</html> 
```

进程.php

```
$mySqlStm ="SELECT Name FROM doctors WHERE Category='$myValue' and Station='$myStation'";

$result2 = mysql_query($mySqlStm) or die("Error:mysql_error()"); 

if(mysql_num_rows($result2) == 0){ 
echo("<br/>no records found"); 
} 
ELSE 
{ 
echo "<table border='1'>"; 

//ECHO THE RECORDS FETCHED
while($row = mysql_fetch_array($result2)) 
{ 
echo "<tr>"; 
//echo "<td>" . $row['Station'] . "</td>"; 
echo "<td>" . $row['Name'] . "</td>" ; 
//echo "<td>" . $row['Phone 1'] . "</td>"; 
//echo "<td>" . $row['Mobile'] . "</td>"; 

} 
```

I want the station category to be auto filled when district is selected and When a category of doctor is selected, the district has to be auto filled.

我该怎么做？我更喜欢 Javascript，因为我对此有所了解。另外，我将所有数据都放在一个数据库中，看起来像这样

类别 | 车站 | 区 | 姓名 | 资质等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:37:40.707

Ajax + jQuery 将在几行代码中为您做到这一点。

教程在这里：[Ajax+jQuery 教程](http://www.w3schools.com/jquery/jquery_ajax.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:41:36.467

州和城市的阿贾克斯

从这里你可以得到医生名单的想法

[一旦这是一个很好的例子，请检查它](http://roshanbh.com.np/2008/01/populate-triple-drop-down-list-change-options-value-from-database-using-ajax-and-php.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:54:31.527

国家、州和城市的演示在[这里](http://www.vinaykumard.co.cc "动态下拉")

代码在[这里](https://github.com/vinaykumard/Dynamic-Dropdown-)

以你的方式定制它..

您可以将 findCity.php 中的代码更改为 Process.php 和 js/location.js 中的代码：

```
$.ajax({
    type: "GET",
    url: "findCity.php",
    data: strURL,
    cache: false,
    success: function(d){
    $('#citydiv').show().html(d);
    }
}); 
```

`#citydiv`是将更改为您在 Process.php 中获得的结果的部分

# windows-phone - Windows Phone 本地数据库更改监听器

> ID：11625368
> 
> 赞同：1
> 
> 时间：2012-07-24T06:33:54.110
> 
> 标签：windows-phone, isolatedstorage

我是 Windows Phone 开发的新手并面临一个问题。我希望我的应用程序充当本地数据库中所做任何更改的侦听器。如果应用程序正在运行并且在数据库中进行了任何更改（例如通过后台代理），则应立即通知前台应用程序。

有什么方法可以在我的前台应用程序中注册某种事件，当本地数据库发生任何变化时触发该事件？

# eclipse - JUnit：按方法和/或按类和/或按项目执行？

> ID：11625371
> 
> 赞同：1
> 
> 时间：2012-07-24T06:34:01.473
> 
> 标签：eclipse, unit-testing, maven, junit, jenkins

我们通常会在 Eclipse 中编写大量测试并频繁执行它们。此外，我们使用 Maven 和后来的 Jenkins，它也运行测试。我们时不时会遇到这样一种情况，即我们是否同时测试每个测试方法、整个测试类或整个包（这意味着测试突然变红）都会有所不同。

考虑已经初始化的静态字段，无意中继续运行的作业，测试方法以相当随机的顺序执行，......换句话说，有很多情况下测试*可能*会相互干扰。显然，我们努力以一种方式编写方法，使上述所有内容都无关紧要/发生，并且无论情况如何，一切都是绿色的。

我不知道上述产品实际上是如何运行测试的，但似乎启动了 JVM，然后完成了所有选定的测试（方法、类或项目），然后 JVM 关闭。我还没有看到允许我以所有三种可能的方式自动运行测试的选项。

我现在的问题是：

*   你如何解决？
*   你真的认为这是一个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:24:43.753

测试不应相互依赖，也不应影响其他测试。如果您遇到测试失败的情况 - 您应该找到原因并消除它。

我只有一次遇到需要为每个测试分叉 JVM 的情况。这可以通过使用[maven-surefire-plugin的](http://maven.apache.org/plugins/maven-surefire-plugin)[forkMode](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#forkMode)属性来完成。

# sql-server-2008 - SQL Server 2008 查询插入错误

> ID：11625374
> 
> 赞同：0
> 
> 时间：2012-07-24T06:34:14.127
> 
> 标签：sql-server-2008

```
insert into salary(name, basic) 
values('EEE', 20000), ('FFF', 25000) 
```

错误：

> 'FFF' 附近的语法不正确。

`name`column 是 type `varchar`，`basic`columns 是 type `int`。

我正在使用 SQL Server 2008

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T06:38:40.290

我能够使用您正在使用的相同查询成功地创建表和插入。

[http://sqlfiddle.com/#!3/a09da/1](http://sqlfiddle.com/#!3/a09da/1)

```
CREATE table salary(name varchar(20),[basic] int);

insert into salary(name,[basic]) 
values('EEE',20000), 
('FFF',25000);

SELECT * from salary; 
```

阅读此内容以[使用一个查询插入多个。](http://blog.sqlauthority.com/2008/07/02/sql-server-2008-insert-multiple-records-using-one-insert-statement-use-of-row-constructor/)

注意：正如 Leslie Davies 指出的，这种使用一个插入查询插入多条记录的语法仅适用于 MS SQL Server 2008。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:37:21.243

试试这个

```
insert into salary(name, basic) values('EEE', 20000); 
```

# android - 创建一个多屏安卓应用

> ID：11625378
> 
> 赞同：2
> 
> 时间：2012-07-24T06:34:25.600
> 
> 标签：android, android-layout

我正在开发一个 Android 2.3.3 应用程序，该应用程序可以在每个 android 手机或平板设备上运行，并且只支持**Portrait**。

阅读[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html#testing)我看到一张有很多屏幕尺寸和密度的表格。

**我需要多少布局？每个屏幕尺寸和密度一个？**

我想我只需要四个：一个用于小型、普通、大型和 x-large。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:15:04.653

我创建了一个工具，允许您缩放/调整平板电脑和小屏幕设备的布局，并在此处发表了一篇关于它的博客文章：http: [//onemanmobile.blogspot.com/2012/04/how-to-scale-your- android-layouts-to.html](http://onemanmobile.blogspot.com/2012/04/how-to-scale-your-android-layouts-to.html)

基本上，如果您希望您的应用程序适合所有设备和平板电脑，那么以 dp 单位为一种尺寸定义布局是不够的，因为有四种不同的“密度桶”。

此工具将允许您的布局转换为从默认基线拟合这些密度桶。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:41:31.573

你基本上需要四个。但是，如果您希望您的应用程序根据*不同的屏幕尺寸* **和** *不同的方向*表现不同，您应该使用：

```
/layout-port         > for medium layout portrait
/layout-land         > for medium layout landscape
/layout-xlarge-port  > for xlarge layout portrait
/layout-xlarge-land  > for xlarge layout landscape 
```

等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T06:54:24.090

从您提供的链接：

```
By default, Android resizes your application layout to fit the current device screen. 
In most cases, this works fine. 
```

因此，一般规则是在布局 xml 中使用与密度无关的像素（倾角）来定义尺寸，其余部分由操作系统处理。这样做您就拥有适用于所有设备范围的唯一布局。

制作单独的布局并不是很常见的做法。只有当您有无法拉伸的图像时，这才是真正推荐的方式。在这种情况下，根据屏幕的大小和密度拆分图形无论如何都可以解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T06:56:35.660

一种布局足以满足大密度的设备，如果您还想实现 x-large 屏幕尺寸的布局，那么您需要制作另一种布局，只需按照 ldpi 、 mpdi 和 hdpi 获取图像，将它们放置在相关文件夹中，使用适当的布局权重创建布局为背景提供完整大小，例如填充父级和按钮的确切大小

喜欢

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bg"
    android:gravity="center"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/bar"
        android:orientation="horizontal" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:orientation="horizontal" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight=".55"
                android:gravity="left|center"
                android:orientation="vertical" >

                <Button
                    android:id="@+id/goBack"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_margin="2dp"
                    android:background="@drawable/back_btn" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight=".25"
                android:gravity="center"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Forget Paaword"
                android:textColor="#ffffff"
                    android:textSize="18dp"
                    android:textStyle="italic" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight=".55"
                android:gravity="right|center"
                android:orientation="vertical" >

                <Button
                    android:id="@+id/hombutton"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_margin="2dp"
                    android:background="@drawable/home1" />
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight=".2"
        android:gravity="right|center"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight=".5"
            android:gravity="right|center"
            android:orientation="horizontal" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight=".5"
                android:text="User Name"
                android:textColor="#ffffff" />

            <EditText
                android:id="@+id/usernametext"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight=".5" android:imeOptions="actionDone">

                <requestFocus />
            </EditText>
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight=".5"
            android:gravity="right|center"
            android:orientation="horizontal" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight=".5"
                android:text="Email Id"
                android:textColor="#ffffff" />

            <EditText
                android:id="@+id/emailtextfp"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight=".5"
                android:inputType="textEmailSubject" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight=".5"
            android:gravity="center"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/loginbuttonfp"
                android:layout_width="75dp"
                android:layout_height="28dp"
                android:layout_margin="5dp"
                android:background="@drawable/btn" android:text="Ok" android:textColor="#ffffff"/>

            <Button
                android:id="@+id/cancelbutton"
                android:layout_width="75dp"
                android:layout_height="28dp"
                android:layout_margin="5dp"
                android:background="@drawable/btn" android:text="Cancel" android:textColor="#ffffff"/>
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

# z3 - 如何用 Z3 隐藏变量

> ID：11625388
> 
> 赞同：5
> 
> 时间：2012-07-24T06:35:16.903
> 
> 标签：z3, smt

说我有

```
t1<x and x<t2 
```

是否可以隐藏变量 x 以便 `t1<t2` 在 Z3 中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T11:27:12.700

您可以使用量词消除来做到这一点。这是一个例子：

```
(declare-const t1 Int)
(declare-const t2 Int)

(elim-quantifiers (exists ((x Int)) (and (< t1 x) (< x t2)))) 
```

您可以在线尝试此示例：[http ://rise4fun.com/Z3/kp0X](http://rise4fun.com/Z3/kp0X)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-28T20:31:05.713

使用Redlog的Redlog的可能解决方案：

![在此处输入图像描述](../Images/05ff7a79af877f7512b1aa3cd7d352a3.png)

# java - 获取 JSON 弹出窗口以保存或打开对话框而不是实际内容？

> ID：11625389
> 
> 赞同：1
> 
> 时间：2012-07-24T06:35:20.803
> 
> 标签：java, jquery, json, struts2, struts-config

**我的问题**： json 字符串作为文件返回。当我调用 getJSONResult 操作时，它会给我一个包含 json 字符串的文件，我可以打开或下载该文件。

我认为这是一个配置问题，但我找不到它。如果有人可以帮助我，我会很高兴，谢谢大家！

我有一个带有提交的打开表单，它使用操作和执行方法来获取数据。然后，我可以让 jquery 工作的唯一方法是放置一个只返回“成功”的操作和执行方法，然后我通过第三个操作进入我的 jquery 网格。

struts.xml

```
<struts>
   <package name="live" namespace="/live" extends="struts-default,json-default">
      <action name="gridAction" class="core.action.AdminAction"> 
         <result name="success" type="json"></result> 
         <result name="error">/live/YYY.jsp</result> 
      </action>
   </package>
</struts> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T19:15:30.463

我假设您使用的是 Internet Explorer，因为我从来没有遇到过 Google Chrome 的这个问题（甚至还有一个插件可以很好地格式化它：[https ://chrome.google.com/webstore/detail/ chklaanhfefbnpoihckbnefhakgolnmc](https://chrome.google.com/webstore/detail/chklaanhfefbnpoihckbnefhakgolnmc) )

环顾四周，如果您确实使用的是 IE，我提出了两个页面，它们为您的问题提供了相同的解决方案：

[在 Internet Explorer 中查看 JSON](http://www.codeproject.com/Tips/216175/View-JSON-in-Internet-Explorer)

[如何说服 IE 简单地显示 application/json 而不是提供下载？](https://stackoverflow.com/questions/2483771/how-can-i-convince-ie-to-simply-display-application-json-rather-than-offer-to-do)

解决方案的主要要点在这里：

需要在 IE 中查看 JSON 响应？

1.  打开记事本并粘贴以下内容：

    ```
    Windows Registry Editor Version 5.00;
    ; Tell IE 7,8,9 to open JSON documents in the browser on Windows XP and later.
    ; 25336920-03F9-11cf-8FD0-00AA00686F13 is the CLSID for the "Browse in place" .
    ;
    [HKEY_CLASSES_ROOT\MIME\Database\Content Type\application/json]
    "CLSID"="{25336920-03F9-11cf-8FD0-00AA00686F13}"
    "Encoding"=hex:08,00,00,00
    [HKEY_CLASSES_ROOT\MIME\Database\Content Type\text/json]
    "CLSID"="{25336920-03F9-11cf-8FD0-00AA00686F13}"
    "Encoding"=hex:08,00,00,00 
    ```

2.  将文档另存为 IE-Json.reg，然后运行它。注意：这已经在 Windows XP 和 Windows 7 上使用 IE 7、8、9 进行了测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T06:15:18.140

没有问题（即struts2问题），这是因为您正在使用chrome并调用一个返回json结果而不使用ajax的操作。有些浏览器只会为您个人提供下载对话框，我真的很喜欢 chrome 在浏览器窗口中显示 json 字符串而不会大惊小怪......它非常适合调试。

**更新**：*我没有看 IE 的第一个屏幕截图，你在哪里获得下载对话框*。

为了防止这种情况...我假设您希望异步调用该操作，并且由于您提到使用 jquery（在您的评论中），您可能应该查看[jQuery.getJSON()](http://api.jquery.com/jQuery.getJSON/)

如果此解决方案对您来说不够，请发布您用于视图的代码，因为问题就在那里。

# plugins - 未调用 Joomla 插件

> ID：11625392
> 
> 赞同：2
> 
> 时间：2012-07-24T06:35:40.507
> 
> 标签：plugins, joomla, joomla1.5

这是我第一次尝试创建 Joomla 插件，我需要一些帮助才能使其正常工作。该插件非常简单，我想捕获 HTTP_REFERER，检查请求是否来自 Google 有机或付费结果，将数据传递给会话 var，然后将其与联系表单中的值一起提交。（我的表单中有一个隐藏字段，它获取会话 var 值）。我使用 RSForms 来创建我的表单，仅供参考。

一开始，我将以下代码硬编码到站点根目录的 index.php 中，它运行良好。现在，我正在尝试制作一个合适的插件，但是在加载页面时我无法启动它。我已经尝试了所有的系统方法，仍然无法让它运行。

这是我的代码：

```
defined( '_JEXEC' ) or die( 'Restricted access' );

jimport( 'joomla.plugin.plugin' );

class plgSystemRsformsGoogleReferer extends JPlugin
{

    public function plgSystemRsformsGoogleReferer( &$subject, $config )
    {
        parent::__construct( $subject, $config );
    }

    function onAfterRender()
    {
        $session = & JFactory::getSession();
        if (!$session->get('referrer', $origref, 'extref')) //If does not exist
        {
          $origref = $_SERVER['HTTP_REFERER'];
          $session->set('referrer', $origref, 'extref');
          $q =  search_engine_query_string($session->get('referrer', $origref, 'extref'));

          if(stristr($origref, 'aclk')) { // if referer is a google adwords link as opposed to an organic link
              $type = ', paid link';
          } else {
              $type = ', organic result';
          }

        $ginfo = $q.$type;
        $session->set('referrer', $ginfo, 'extref');  

        }

        function search_engine_query_string($url = false) {
            if(!$url && !$url = isset($_SERVER['HTTP_REFERER']) ? $_SERVER['HTTP_REFERER'] : false) {
                return '';
            }

            $parts_url = parse_url($url);
            $query = isset($parts_url['query']) ? $parts_url['query'] : (isset($parts_url['fragment']) ? $parts_url['fragment'] : '');
            if(!$query) {
                return '';
            }
            parse_str($query, $parts_query);
            return isset($parts_query['q']) ? $parts_query['q'] : (isset($parts_query['p']) ? $parts_query['p'] : '');
        }
    }
} 
```

这是我用于插件安装的清单 xml（安装工作正常）：

```
<?xml version="1.0" encoding="utf-8"?>
<install version="1.5" type="plugin" group="system" method="upgrade">
    <name>RSForm Google Referer v1.1</name>
    <author>Me</author>
    <creationDate>July 2012</creationDate>
    <copyright>(C) 2004-2012 www.mysite.com</copyright>
    <license>Commercial</license>
    <authorEmail>info@mysite.com</authorEmail>
    <authorUrl>www.mysite.com</authorUrl>
    <version>1.1</version>
    <description><![CDATA[Track visitor's search terms and and attaches the information to the RSForm! Pro Forms emails when sent.]]></description>
    <files>
        <filename plugin="rsform_google_referer">rsform_google_referer.php</filename>
    </files>
</install> 
```

我觉得我很接近，但我无法让它运行，任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-21T01:04:17.897

班级名称错误。它需要匹配插件文件夹的名称和插件文件的名称。它应该是：

```
class plgSystemRsform_Google_Referer extends JPlugin 
```

那`Rsform`不是`Rsforms`和下划线。

# python - 从 MySQL 快速更新 Cassandra

> ID：11625393
> 
> 赞同：0
> 
> 时间：2012-07-24T06:35:41.853
> 
> 标签：python, mysql, cassandra, database-migration

我希望从 MySQL 数据库更新我的 Cassandra 数据库。

目前，此过程大约需要 8 小时。我遵循的过程是：

```
Make all possible queries in MySQL, update the data received into Cassandra 
```

ps：有什么更好更快的方法来做到这一点？（我不想使用 Hive）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:57:13.610

可能您可以搜索有关使用[Apache Sqoop](http://sqoop.apache.org/)的信息。Datastax 支持使用它。[http://www.datastax.com/docs/datastax_enterprise2.0/sqoop/sqoop_help](http://www.datastax.com/docs/datastax_enterprise2.0/sqoop/sqoop_help)

> Apache Sqoop 是一种工具，旨在有效地在 Apache Hadoop 和结构化数据存储（如关系数据库）之间传输批量数据。

# c# - C#：AppDomain UnhandledException 错误

> ID：11625394
> 
> 赞同：1
> 
> 时间：2012-07-24T06:35:42.970
> 
> 标签：c#, appdomain, serializable, unhandled-exception

我创建了一个 AppDomain 并订阅了事件**UnhandledException**

```
AppDomain sandbox1 = AppDomain.CreateDomain("SandBox1");
sandbox1.UnhandledException += 
    new UnhandledExceptionEventHandler(sandbox1_UnhandledException); 
```

当我的代码单步执行 UnhandledException 订阅时，它提示错误**“在程序集 'MainUI，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null' 中的类型 'MainUI.MainWindowViewModel' 未标记为可序列化。”**

**编辑：** 所以我将 Serializable 放在我的 MainWindowViewModel 类上，但它仍然通过了。当我运行应用程序时，同样的错误是**“在程序集 'MainUI，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null' 中键入 'MainUI.MainWindowViewModel' 未标记为可序列化。”** . 请帮忙。谢谢

```
[SecurityPermission(SecurityAction.Demand, 
                    Flags = SecurityPermissionFlag.AllFlags)] 
public class MainWindowViewModel : ViewModelBase
{......} 
```

**编辑**

```
public MainWindowViewModel()
{
    AppDomain current = AppDomain.CurrentDomain;
    current.UnhandledException += 
        new UnhandledExceptionEventHandler(current_UnhandledException);
} 
```

我的问题是，如果我有 2 个 appdomain 孩子，我怎么知道这个异常来自哪个孩子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T06:46:10.550

这绝对不是这样做的方法。

您收到错误的原因是该类型试图跨越 appdomain 边界并且未能这样做，因为它不是可序列化的或可远程处理的对象。这也是你不希望发生的事情。

作为一种解决方案，您应该在您的沙盒应用程序域中订阅该事件。

在该处理程序中，您可以通过您选择的一些远程接口/服务将异常信息传输到“主”应用程序域。

# vb.net - 我可以在 vb.net 中获得一个随机按钮闪烁吗？

> ID：11625395
> 
> 赞同：0
> 
> 时间：2012-07-24T06:35:47.667
> 
> 标签：vb.net, events, button, random

我正在创建一个游戏，您必须按特定顺序单击按钮。我希望按钮在开始时按顺序闪烁，以便玩家可以查看序列并记住它..在每一轮中，按钮都会被分配新值，因此顺序会发生变化，

我希望能够使任何按钮闪烁，这意味着我希望能够使用按钮（i）而不是写按钮1（如果可能的话）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:46:09.747

您可以将所有应该闪烁的按钮放入一个列表中，然后创建一个随机数，并使用该随机数来获取该索引处的按钮。

```
Dim buttons = new Button() {button1, button2, button3} 'Put buttons into list

Dim r = new Random()
Dim seq_length = 3 'Let three buttons blink

For i = 0 To seq_length
    Dim index = r.Next(0, buttons.Count()) 'Get random index
    LetButtonBlink(buttons(index)) 'Use this index to select a button
Next 
```

# jquery - Jquery DOM 导航选择父属性

> ID：11625397
> 
> 赞同：0
> 
> 时间：2012-07-24T06:35:50.253
> 
> 标签：jquery, html

有没有更好的方法来做到这一点：

```
partId = $(this).parent().parent().attr('data-partid') ; 
```

我有一些将行输出到页面上的东西，每一行都包含输入字段。

当用户在输入字段上键入时，它会通过 ajax 将输入保存到数据库中。

为了确保将信息保存到正确的行，我需要发送存储在 div 中的行 ID：

```
<div id="buyingRow0" data-partid="43293">... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:44:48.907

更清洁的方法是执行以下操作：

```
partId = $(this).closest('div[data-partid]').data('partid'); 
```

但我不确定它是否更有效。它甚至可能更慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:47:39.557

你可以使用`closest()`：

```
var partId = $(this).closest('div').attr('data-partid') ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:53:29.653

如果您的目标 div 有一个 ID（并且您正确使用了 ID 属性），则意味着它是页面上唯一的一个。

```
$('#buyingRow0').data('partid'); 
```

似乎在这里最有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T07:12:41.737

`$(this).parent().parent()`正好说两个节点。`.closest()`如果您不想过于依赖 DOM 结构，使用as the rest 建议确实很好。

如果`data-partid`是您添加到许多标签的通用属性，那么为您关注的行添加另一个布尔指示符也可能很好，例如。，因此您可以在该节点内`data-buying-row`拥有其他标签。`data-partid`

```
<div id="buyingRow0" data-partid="43293" data-buying-row>
  ...
</div> 
```

在这种情况下，您将遍历该购买行：

```
$(this).closest('div[data-buying-row]').data('partid'); 
```

# javascript - 如何使用 onstart 和 oncomplete 创建 jquery 函数

> ID：11625402
> 
> 赞同：3
> 
> 时间：2012-07-24T06:36:20.753
> 
> 标签：javascript, jquery

我正在尝试创建自己的 jquery 函数，我知道如何添加选项但不知道如何添加“onStart”或“onComplete”功能。

这是我到目前为止所知道的：

```
jQuery.somefunctionname = function (options) {
var settings = {},
    defaults = {
        'someoption': 'somevalue',
        'someoption2': 'somevalue2',
        'someoption3': 'somevalue3'
    }
settings = $.extend({}, defaults, options);

    //do something functional
    alert("hey i'm a function");
} 
```

但是如果我希望用户能够在我的函数之前（onStart）和之后（onComplete）添加他们自己的代码，我应该编写什么代码？

用户应该能够这样写：

```
$.somefunctionname({
   'someoption' : 'a',
   'someoption2' : 'b',
   'someoption3' : 'c',

   'onStart' : function() {
      //whatever user want when my function started
   },
   'onComplete' : function() {
      //whatever user want when my function ended
   } }); 
```

谢谢 ;）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T06:43:13.853

在您的函数中，执行以下操作：

```
jQuery.somefunctionname = function (options) {
   if (typeof options.onStart === "function")
      options.onStart.call(this);

   // other function code here

   if (typeof options.onComplete === "function")
      options.onComplete();
      // OR
      options.onComplete.call(this);
      // OR
      options.onComplete.apply(this, argsArrayIfDesired);
      // etc.
}; 
```

也就是说，如果属性是在其中定义的`options`并且实际上是一个函数，则在适当的位置调用它。如果需要，请指定使用的设置`this`，`.call()`并`.apply()`包括任何参数。根据需要与您的`settings`对象集成或不集成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T06:40:26.350

只需为这些设置设置一个默认值[`jQuery.noop`](http://api.jquery.com/jQuery.noop/)，然后您就可以知道将该设置的值作为函数调用是安全的，使用[`apply()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)或类似的。

例如

```
jQuery.somefunctionname = function (options) {
var settings = {},
    defaults = {
        'someoption': 'somevalue',
        'someoption2': 'somevalue2',
        'someoption3': 'somevalue3',
        'onStart': jQuery.noop,
        'onComplete': jQuery.noop
    }
settings = $.extend({}, defaults, options);

    settings.onStart.apply(this);

    //do something functional
    alert("hey i'm a function");

    settings.onComplete.apply(this);
} 
```

# c# - 创建表时，我们如何在我的休眠映射中拥有索引？

> ID：11625405
> 
> 赞同：-1
> 
> 时间：2012-07-24T06:36:35.657
> 
> 标签：c#, nhibernate, indexing, mapping

我的数据库中有一个表，我使用 NHibernate 作为数据访问层。现在我想修改我的 NHibernate 映射以在我的数据库上创建索引。可能吗？

请注意，我不想从我的模型创建我的表，并且我的表已创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:41:24.973

我不确定它的当前状态，但 Ayende 在他的博客上写了一些关于它的内容：http: [//nhibernate.hibernatingrhinos.com/14/create-and-update-database-schema](http://nhibernate.hibernatingrhinos.com/14/create-and-update-database-schema)

虽然我没有任何经验，因为我们使用我们自己定制的数据库迁移工具，但也许它适合你？

# android - 在Android中为ListView设置onItemClick监听器

> ID：11625408
> 
> 赞同：3
> 
> 时间：2012-07-24T06:37:02.690
> 
> 标签：android, listview

我正在尝试`OnItemClickListener`在 Android 中为我的 ListView 设置一个，但我无法让它工作。

这是我到目前为止所拥有的：

```
public class MenuFragment extends SherlockFragment
{
    ArrayList<Item> items = new ArrayList<Item>();

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState)
    {

    ListView list = (ListView)view.findViewById(R.id.list_mainmenu);

    // some code here where i add items to an ArrayList...

    // Then i add the ArrayList to an EntryAdapter
    EntryAdapter adapter = new EntryAdapter(this.getActivity().getBaseContext(), items);

    list.setAdapter(adapter);
    list.setClickable(true);

    list.setOnItemClickListener(AdapterView.OnItemClickListener()) {
        // ...
    }
} 
```

但这给了我一个错误`OnItemClickListener()`：

> 未为 AdapterView 类型定义 OnItemClickListener() 方法。

所以我的问题是，如何`OnItemClickListener`在我的 ListView 上设置一个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T06:40:48.650

检查此代码

```
 listView.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view,int position, long id) {
            // When clicked, show a toast with the TextView text
            Toast.makeText(getApplicationContext(),
            ((TextView) view).getText(), Toast.LENGTH_SHORT).show();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T06:42:55.917

确保您已导入正确的包：

```
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T06:41:56.540

尝试这个

```
list.setOnItemClickListener(new AdapterView.OnItemClickListener()) {
    // ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-22T06:05:29.600

try this one

```
 listView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {

        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T06:41:22.847

您**应该实现一个 customAdapter**以对您的 listView 进行更多控制，[这](http://www.mkyong.com/android/android-listview-example/)是访问此链接后的链接，您应该能够执行所需的操作。或者您可以使用此代码快速完成您需要的操作。

```
listView.setOnItemClickListener(new OnItemClickListener() {
@Override
public void onItemClick(AdapterView<?> arg0, View view, int arg2,long itemID) {

}
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T06:48:10.453

尝试这个：

```
list.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
        // ...
    }
}); 
```

# python - 将向量添加到数组

> ID：11625412
> 
> 赞同：3
> 
> 时间：2012-07-24T06:37:27.360
> 
> 标签：python, numpy

一个非常愚蠢的问题，但我想不出正确的方法..

1.  A 是 2 × 2 矩阵，B 是 2 × 1 矩阵。
2.  在 10 次迭代循环中，B_new=A*B。B_new 是 2 乘 1。
3.  每次迭代后将 B_new 保存到输出矩阵 B_final。所以最后，B_final 是 2 乘 10。

但是，我在循环中将 B 添加到 B_new 时遇到问题。下面是我的代码，谁能给我一些建议？

```
import numpy as np
a=np.ones(shape=(2,2))
b=np.ones(shape=(2,1))     
c_final=np.zeros(shape=(2,10)) 

for i in range(0,10):
    c=np.dot(a,b)
    b=c
    c_final[:,i]=c 
```

这是错误消息：

```
 c_final[:,i]=c
ValueError: output operand requires a reduction, but reduction is not enabled 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T06:47:41.160

您看到的错误是因为当 numpy 广播`c_final[:,i]`并`np.dot(a,b)`一起生成一个形状为 的数组时`(2,2)`，`c_final[:,i]`由于它的形状为`(2,1)`. 我认为如果你只是在解释器中使用它会更清楚：

```
>>> import numpy as np
>>> a = np.ones((2,2))
>>> b = np.ones((2,1))
>>> c_final = np.zeros((2,10))
>>> np.dot(a,b)
array([[ 2.],
       [ 2.]])
>>> np.dot(a,b).shape
(2, 1)
>>> c_final[:,0]
array([ 0.,  0.])
>>> c_final[:,0].shape
(2,)
>>> np.broadcast(c_final[:,0],np.dot(a,b)).shape
(2, 2) 
```

解决这个问题的方法是`np.dot(a,b)`通过使用`np.squeeze`或类似的东西来展平，这样当它们一起广播时，它们会产生一个 2 元素数组。例如：

```
>>> c_final[:,0] = np.dot(a,b).squeeze() 
```

您并不是唯一一个发现错误消息没有帮助的人。大约一年前，有人为此提出了[投诉。](http://projects.scipy.org/numpy/ticket/1934)

# php - 为什么 PDO 不显示任何结果？

> ID：11625413
> 
> 赞同：1
> 
> 时间：2012-07-24T06:37:32.940
> 
> 标签：php, mysql, pdo, fetch

我在我的 PHP 应用程序中使用了 PDO。但我的功能有问题`fetch()`。每当我计算 的结果时`fetch()`，它都会告诉我结果集中有一些东西。但是当我想向他们展示时，它没有什么可展示的。

```
try
{ 
    $sql = "SELECT id,salt FROM tbl_admin WHERE username = ? AND password = ? LIMIT 1";
    $q = $db->prepare($sql);
    $q->execute(array($username,$password));
    $rows = $q->columnCount();

    if ($rows > 0)
    {
        $r = $q->fetch(PDO::FETCH_BOTH);
        echo(count($r).'<br />'); // Prints 1
        print_r($r); // Nothing to print ...
        die();
    }
    else
    {
        die('error');
    }
}
catch(PDOException $e)
{
    echo $e->getMessage();
} 
```

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T06:41:51.943

您正在计算列数，而不是行数。

`$rows = $q->columnCount();`

这应该是

`$rows = $q->rowCount();`

* * *

也就是说，`rowCount`适用于 UPDATE、INSERT 或 DELETE 查询。所以这不是这里的问题。

首先还应该检查是否`$q->execute`返回真或假。

其次，您应该检查是否`$q->fetch`返回真或假。

给定您的代码

```
$r = $q->fetch(PDO::FETCH_BOTH);
echo(count($r).'<br />'); // Prints 1 
```

试试下面的。

```
echo(count(false)); 
```

你会注意到这也输出 1。

所以解决方案是，您需要`$q->fetch`在假设它返回有效行之前检查它的返回值。

# javascript - 如何在 HTML5 网站中创建二维码阅读器？

> ID：11625415
> 
> 赞同：63
> 
> 时间：2012-07-24T06:37:39.537
> 
> 标签：javascript, html, qr-code

我正在寻找在我的基于 HTML5 的网页中创建 QR 码阅读器的可能性。我做了一些谷歌搜索，所有链接都指向移动应用程序。

请帮助我了解如何使用 HTML5 和 JavaScript 读取包含 url 的 QR 码，然后将浏览器重定向到该 URL。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-25T10:00:14.947

JavaScript 解码器并不多。

[在http://www.webqr.com/index.html](http://www.webqr.com/index.html)有一个

最简单的方法是在您的服务器上运行[ZXing](http://code.google.com/p/zxing/)或类似的。然后，您可以发布图像并在响应中获取解码结果。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-08-11T15:36:05.753

Lazarsoft 的 jsqrcode 库现在仅使用 HTML5 即可完美运行，即`getUserMedia`(WebRTC)。你可以[在 GitHub 上找到它](https://github.com/LazarSoft/jsqrcode)。

我还发现了一个非常简单的叉子。只需一个文件（加上 jQuery）和一个方法调用：请参阅[GitHub 上的 html5-qrcode](https://github.com/dwa012/html5-qrcode)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-09T15:05:33.930

[他们在http://www.webqr.com/index.html](http://www.webqr.com/index.html)上展示的阅读器 就像一个魅力，但从字面上看，你需要网页上的那个，github 版本真的很难让它工作，但是，这是可能的。最好的方法是对网页上显示的示例进行逆向工程。

然而，要编辑并充分发挥它的潜力，并不是那么容易。在某个时候，我可能会发布经过精简的逆向工程 QR 阅读器，但与此同时，破解代码也有一些乐趣。

快乐编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T19:38:19.360

The algorithm that drives [http://www.webqr.com](http://www.webqr.com) is a JavaScript implementation of [https://github.com/LazarSoft/jsqrcode](https://github.com/LazarSoft/jsqrcode). I haven't tried how reliable it is yet, but that's certainly the easier plug-and-play solution (client- or server-side) out of the two.

# windows - USB linux gadget 零驱动与 Windows 主机通信

> ID：11625419
> 
> 赞同：4
> 
> 时间：2012-07-24T06:37:59.777
> 
> 标签：windows, linux, usb

我需要在 Windows 7 主机和 Linux 设备之间设置 USB 通信以进行数据传输。我能够在设备上编译 Linux 内核以在内核中包含 Gadget Zero 驱动程序（不是作为可加载模块 - Linux 版本 3.0.15）。我的项目有一些要求，这也解释了我为什么选择小工具零：

1) 在 Windows 7 主机上，必须使用内核模式驱动程序通过 USB 连接进行通信，以发送和接收批量数据。（速度不重要，一次不是很多数据）。

2）在linux设备上，除了通过USB链路轻松发送和接收数据外，对USB端没有要求。接收到的数据最终将被“解组”以调用另一个内核模块中的函数（以及那些打包并发送回主机的响应）。

3）多个linux设备将连接到主机，因此需要简单的方法来枚举连接的设备并与它们通信。

因此，由于要求，我决定不使用 Gadget Serial。我在 Win 7 主机的内核模式 (KMDF) 中通过虚拟 COM 端口发送和接收数据时遇到严重问题。WinUSB似乎不想打开我连接的设备（我在VS2012中使用模板中的KMDF windows USB驱动程序）另外，linux端的小工具串行驱动程序，我找不到接收和发送数据的功能。此外，由于某种原因，linux 设备上任何接收到的数据似乎都会回显给主机。（为了测试这一点，我在 Windows 中编写了一个简单的用户模式应用程序，这对我的项目来说是一个禁忌）。

小工具零，在 linux 端看起来要简单得多。我可以将 USB 线插入 Win7 主机，然后我可以让设备出现在设备管理器中。但是，我再次遇到通过链接进行通信的问题。小工具零有 2 个批量端点，所以这应该不是问题。肯定有人使用零配件使 Windows 主机和 linux 设备之间的数据通信成为可能？使用 Gadget Zero，应该很容易枚举连接的 linux 设备并与它们通信。

诀窍是将 Windows 端通信保持在内核模式。有人可以用零配件、Windows 7 KMDF 和一些示例源代码为我指明正确的方向吗？我很难相信以前没有人这样做过，因为我的互联网搜索结果并不多。（主要是使用 Gadget Serial 的用户模式解决方案）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-10T11:13:37.833

所以你正在编写一个 Win32 驱动程序，你想在其中与你的 linuxed usb 通信？我没有写太多的win32内核代码，但我相信我在文档中看到了很大一部分，说“这就是你制作usb驱动程序的方式”......就是这样。换句话说，在内核模式下，您可以访问完整的内核 USB 层。您不需要现有的驱动程序或诸如此类的东西。

在 linux 端，您可以在不同的运行模式下使用串行小工具。只有默认的运行模式，将它自己注册为 VCP。还有一种更基本的模式：

```
modprobe g_serial use_acm=0 
```

给它您自己的供应商 ID，您就可以附加您自己的自定义 win32 驱动程序。“多个 linux 设备”将由 Windows 处理。（将启动您的驱动程序的多个实例。）

顺便说一句，您看到的回声很可能是终端功能。（uarts 上的终端模式会回显。）连接时必须禁用它。现在你已经完成了，你还必须禁用 xon/xoff、esc 字符等。（标准遗留垃圾。）

还有一件事。我不确定小工具零是否真的将数据发送到线上。它用于测试小工具框架。（虽然我可能弄错了。）

无论如何，你几年前就已经解决了这个问题。我很高兴知道你想出了什么。

# ajax - valuems fileuploader 在 IE 9 下使用 spring 不起作用

> ID：11625424
> 
> 赞同：1
> 
> 时间：2012-07-24T06:38:15.073
> 
> 标签：ajax, jsp, spring-mvc, file-upload

我正在使用spring MVC进行文件上传，它在firefox和chrome中工作正常，但在IE中它显示上传失败..下面是我的jsp页面，我包含fileuploader函数。

```
<div id="file-uploader-demo1" style="float: left;padding-top: 10px"></div>      

</div>

 <script>        
    function createUploader(){            
        var uploader = new qq.FileUploader ({
            element: document.getElementById('file-uploader-demo1'),
            action: '/Flas_ _/commu-____/insertFile;jsessionid=${sessionId}',
            headers: {'Content-type':'multipart/form-data'},
            multipleFileUpload: false,
            debug: true
        });           
    }
    window.onload = createUploader;     
</script> 
```

这是我的 jsp 页面，其中 iam 包括 FileUploader.js 文件，动作标签调用我各自的控制器，如下所示..

```
 @RequestMapping(value = "/insertFile", method = RequestMethod.POST)
public String fileUpload(@RequestParam("qqfile") String filename1,ModelMap map, 
        HttpServletRequest request,HttpServletResponse response) throws IOException {

    PrintWriter writer = null;
    InputStream is = null;
    FileOutputStream fos = null;

      try {
            writer = response.getWriter();
        } catch (IOException ex) {
            //log(OctetStreamReader.class.getName() + "has thrown an exception: " + ex.getMessage());
        }
      String filename =  request.getHeader("X-File-Name");
      this.setFILEUPLOAD(filename);
      try {
            is = request.getInputStream();
            fos = new FileOutputStream(new File("F:/images/" + filename));
            IOUtils.copy(is, fos);
            response.setStatus(response.SC_OK);
            writer.print("{success: true}");
        } catch (FileNotFoundException ex) {
            response.setStatus(response.SC_INTERNAL_SERVER_ERROR);
            writer.print("{success: false}");
          //  log(OctetStreamReader.class.getName() + "has thrown an exception: " + ex.getMessage());
        }catch (IOException ex) {
            response.setStatus(response.SC_INTERNAL_SERVER_ERROR);
            writer.print("{success: false}");
           // log(OctetStreamReader.class.getName() + "has thrown an exception: " + ex.getMessage());
        }  finally {
            try {
                fos.close();
                is.close();
            } catch (IOException ignored) {
            }
        }
      writer.flush();
        writer.close();

    return "do-nothing";
} 
```

尽管在 CHROME 和 FIREFOX 中它的工作正常，我将文件存储在语言环境驱动器中。但它在 IE 9 中不起作用。我应该怎么做我没有得到。

dis有什么解决办法吗？请帮助谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:43:11.603

我通过实现两个控制器方法解决了另一个问题（在 IE 中工作，而不是在 FF 中工作）。我没有发送带有 JavaScript 上传器配置的 explizit 标头。

一种方法（对于 IE）有额外的 RequestMapping-Options： `headers = { "content-type=multipart/form-data" }`

IE 的 RequestParam 是一个`MultipartFile`. 从中您将获得文件名和内容。IE 使用的普通分段上传的请求正文不仅仅包含文件内容，就像使用 Firefox 的 ajax 上传一样。它还具有文件名和边界等多部分信息。`MultipartFile`可以为您处理。

据我所知，必须进行一些常规设置才能使您的 webapp 处理多部分文件上传。但这是另一个问题。

# c++ - C++ 在这种情况下如何使用 strtok

> ID：11625426
> 
> 赞同：-1
> 
> 时间：2012-07-24T06:38:29.070
> 
> 标签：c++, linux

我正在尝试拆分以下内容，我需要通过函数 strtok 拆分它并且我想获得值 1.2597，请注意 Down 是一个可以更改的动态词。我知道在这种情况下，我可以使用空格作为分隔符，并获得作为货币的值 [1]，但我该如何处理它。

CCY 1.2597 下跌 0.0021(0.16%) 14:32 SGT [44]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:49:49.063

这应该这样做：

```
char *first = strtok(string, ' ');
char *second = strtok(0, ' '); 
```

如果要将数字转换为 a`float`或`double`也可以使用`sscanf`：

```
char tmp[5];
float number;
sscanf(string, "%s %f", tmp, &number); 
```

或者只是`sscanf`在您获得的数字令牌上使用`strtok`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:25:57.800

您可以使用[Boost.Regex](http://www.boost.org/doc/libs/1_50_0/libs/regex/doc/html/index.html)轻松安全地完成此任务：

```
// use a regular expression to extract the value
std::string str("CCY 1.2597 Down 0.0021(0.16%) 14:32 SGT [44]");
boost::regex exp("CCY (\\d+\\.\\d+)");
boost::match_results<std::string::const_iterator> match;
boost::regex_search(str, match, exp);
std::string match_str(res[1].first, res[1].second)

// convert the match string to a float
float f = boost::lexical_cast<float>(match_str);
std::cout << f << std::endl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:27:08.907

对该函数的一系列调用将 str 拆分为标记，这些标记是由作为定界符一部分的任何字符分隔的连续字符序列。

例子：

```
char str[] = "now # is the time for all # good men to come to the # aid of their country";
char delims[] = "#";
char *result = NULL;
result = strtok( str, delims );
while( result != NULL ) {
    printf( "result is \"%s\"\n", result );
    result = strtok( NULL, delims );
} 
```

输出：

```
result is "now "
result is " is the time for all "
result is " good men to come to the "
result is " aid of their country" 
```

# visual-c++ - 链接：致命错误 LNK1104：无法打开 .exe

> ID：11625427
> 
> 赞同：1
> 
> 时间：2012-07-24T06:38:32.723
> 
> 标签：visual-c++, windows-7

我的问题不是这个的重复[，](https://stackoverflow.com/questions/3906404/link-fatal-error-lnk1104-cannot-open-file-d-myproj-exe)实际上它是同一个问题的扩展，这是代码片段，因此发生错误，

```
BOOL CMyApp::InitInstance() {
   m_pMainWnd = new CMainWindow;
   m_pMainWnd->ShowWindow(SW_NORMAL);
   m_pMainWnd->UpdateWindow();
   return TRUE;
} 
```

所以，当我使用`m_pMainWnd->ShowWindow(SW_NORMAL);`prgoram 运行时没有任何错误，窗口以正常大小打开，我可以看到输出，但是当我这样做时，`m_pMainWnd->ShowWindow(SW_MAX);`即使程序运行没有错误，我也看不到输出窗口，当我尝试重建时， VC抛出一个错误说

> 链接：致命错误 LNK1104：无法打开 .exe

我也关注了这个问题的一些答案，这个[问题](https://stackoverflow.com/questions/3906404/link-fatal-error-lnk1104-cannot-open-file-d-myproj-exe)的第一个答案表明

> 您可能尚未关闭输出。关闭输出，清理并重建文件。您现在可能可以运行该文件。

这是非常正确的，但我要做的是注销我的计算机并再次登录以终止输出过程，我必须这样做，因为我既找不到打开的应用程序窗口，也看不到任何程序在“任务管理器”的应用程序选项卡中运行。我什至按照第二个答案说

> 您必须将应用程序体验设置为手动启动（您可以通过在Windows 7开始菜单中搜索服务，然后找到应用程序体验并单击属性来完成）。

除了当我到达那里时，我发现应用程序已经手动启动，问题仍然存在。除了解决方案，我想知道的是为什么程序在我写的时候不显示输出`m_pMainWnd->ShowWindow(SW_MAX);`

如果有帮助，我正在使用 VC++ 6.0 并且我的操作系统是 Windows-7 Professional 32 位

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T06:46:17.157

`SW_MAX``SW_FORCEMINIMIZE`与文档所述相同

> 最小化一个窗口，即使拥有该窗口的线程没有响应。只有在最小化来自不同线程的窗口时才应使用此标志。

它实际上最小化了窗口并且应用程序仍然在任务栏中运行。我在Win7机器上检查过。

如果您的目标是以最大化状态显示窗口，请 `SW_SHOWMAXIMIZED`改为使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T02:33:36.120

由于更改，VC++ 6.0 调试器在 Windows 7 下无法正常工作。
当您尝试从调试器中终止进程时，该进程无法正确结束并卡住。

有关详细信息，请参阅以下主题。

[如何在 Windows 7 x64 上使用 Visual C++ 6 进行调试？](https://stackoverflow.com/questions/2110759/how-to-debug-with-visual-c-6-on-windows-7-x64)

# iphone - 无法在 WebViews ScrollView 上为 UIButton 设置高度和宽度

> ID：11625429
> 
> 赞同：1
> 
> 时间：2012-07-24T06:38:45.890
> 
> 标签：iphone, ios, webview, uibutton

我在 WebView 的滚动视图上有一个 UIButton，类型为 RoundRect。当我尝试设置它的高度时它不起作用。

我尝试过使用以下代码：

```
CGRect  buttonFrame = CGRectMake(15.0, 89.0, 295.0, 40.0);
[btnHideStatus setBounds:buttonFrame];

[webView.scrollView addSubView:btnHideStatus]; 
```

有人可以解释为什么高度和宽度没有改变吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:18:30.237

你试过`setFrame :`方法吗？？

```
[btnHideStatus setFrame:buttonFrame]; 
```

# mysql - mysql 日志记录触发器，查找更改的列

> ID：11625439
> 
> 赞同：7
> 
> 时间：2012-07-24T06:39:51.997
> 
> 标签：mysql, logging, triggers

我正在编写一个触发器来跟踪表中发生的所有更改。不幸的是，该表有 150 多列，我想避免在代码中编写每一列（例如 new.col1、new.col2 ....），因此我在“更新触发器后”中编写了以下查询

```
INSERT INTO logs SELECT *, NOW() FROM abc WHERE abc.id = NEW.Id; 
```

由于更新查询中未更改的数据重复，此想法导致了多个问题。

简而言之，我想动态找出哪些列是更新查询的一部分，如果不可能，是否有办法遍历“新”行的所有列，以便我可以动态比较 old.@colName == new .@colName?

我已经看过 [Oracle PL/SQL: Loop Over Trigger Columns Dynamicly](https://stackoverflow.com/questions/786733/oracle-pl-sql-loop-over-trigger-columns-dynamically) , [How to determine if anything changed in update trigger in t-sql](https://stackoverflow.com/questions/10550277/how-to-determine-if-anything-changed-in-update-trigger-in-t-sql)和[MySQL UPDATE trigger: INSERTing the values of the columns that actually changed](https://stackoverflow.com/questions/6927508/mysql-update-trigger-inserting-the-values-of-the-columns-that-actually-changed)。

最后一个链接是我所需要的，只有一个区别，我不想在下面的语句中硬编码列名，因为我要为其编写类似触发器的所有表中有超过 100 多个列！

```
IF NEW.column1 <> OLD.column1 THEN INSERT INTO... END IF; IF NEW.column2 <> OLD.column2 THEN INSERT INTO... END IF 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T16:38:53.320

今天早上我一直在做一些研究，看起来我遇到了很多和你一样的搜索结果。最终，在我看来，没有办法遍历所有表列并引用相应的旧/新值。我正在明确检查每一列，然后记录：

```
IF (NEW.fld1 <> OLD.fld1) OR (NEW.fld1 IS NOT NULL AND OLD.fld1 IS NULL) OR (NEW.fld1 IS NULL AND OLD.fld1 IS NOT NULL) THEN
 INSERT INTO `fld_audit` (`table`, `fldname`, `oldval`, `newval`)
 VALUES ("tblname", "fld1", OLD.fld1, NEW.fld1); 
END IF; 

IF (NEW.fld2 <> OLD.fld2) OR (NEW.fld2 IS NOT NULL AND OLD.fld2 IS NULL) OR (NEW.fld2 IS NULL AND OLD.fld2 IS NOT NULL) THEN
 INSERT INTO `fld_audit` (`table`, `fldname`, `oldval`, `newval`)
 VALUES ("tblname", "fld2", OLD.fld2, NEW.fld2); 
END IF; ... 
```

[我在这里](https://stackoverflow.com/questions/10885165/is-it-possible-to-pass-the-new-and-the-old-tables-from-a-trigger-into-a-procedur)找到了另一种解决方案的暗示。理论上，您可以有 3 个分隔列表，一个用于列名，一个用于旧 val，一个用于新 val。您必须明确引用旧的和新的 val，但这将是一行（更易于维护或复制/粘贴以在其他表上实现），然后您可以循环。所以在伪代码中它看起来像这样：

```
fields_array = concat_ws(",", "fld1", "fld2");
old_vals_array = concat_ws(",", OLD.fld1, OLD.fld2);
new_vals_array = concat_ws(",", NEW.fld1, NEW.fld2);

foreach fields_array as key => field_name
     INSERT INTO `fld_audit` (`table`, `fldname`, `oldval`, `newval`)
     VALUES ("tblname", field_name, old_vals_array[key], vew_vals_array[key]); 
```

我没有想太多。您可能需要调用存储过程而不是设置变量。但这可能值得研究。我已经在触发器上花费了足够的时间。不确定我是否可以（向我的老板）验证一个更优雅的解决方案的试错时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-19T14:09:11.657

正如 ingratiatednerd 已经建议的那样，您可以使用 CONCAT_WS 从所有必需的值中创建字符串并创建一个比较语句。

也许以下内容对某人有用：

```
DECLARE old_concat, new_concat text;
SET old_concat = CONCAT_WS(',', OLD.fld1, OLD.fld2, ...);
SET new_concat = CONCAT_WS(',', NEW.fld1, NEW.fld2, ...); 

IF old_concat <> new_concat
THEN
   INSERT STATEMENT
END IF; 
```

# c# - 在 ASP.NET 中，如何仅为 TTF 文件添加 CORS 标头？

> ID：11625440
> 
> 赞同：8
> 
> 时间：2012-07-24T06:40:10.490
> 
> 标签：c#, asp.net, font-face, cors

我有一个带有 iframe 的页面，它显示了一个外部页面。外部页面配置为从我的服务器下载 CSS 文件。

在 CSS 中，我添加了一个`@font-face`选择器：

```
@font-face {
    font-family: "Special Font";
    src: url("<%= Request.Url.GetLeftPart(UriPartial.Authority) + "/fonts/specialfont.ttf" %>");
} 
```

这会在 Chrome 中很好地下载并显示字体，但在 Firefox 中，它会下载字体，但拒绝使用它。做一点研究表明这个问题是一个跨域策略问题。这里提到的解决方案之一：

[http://enable-cors.org/](http://enable-cors.org/)

是启用CORS标头。但是，它提供的解决方案是站点范围的：

```
<?xml version="1.0" encoding="utf-8"?>
    <configuration>
        <system.webServer>
            <httpProtocol>
                <customHeaders>
                    <add name="Access-Control-Allow-Origin" value="*" />
                </customHeaders>
            </httpProtocol>
        </system.webServer>
</configuration> 
```

而我只想为`.TTF`文件启用它。有没有办法通过使用 HttpHandler 或其他方法来做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-10-30T22:45:27.567

您可以通过使用 web.config 中的[`location`元素](http://msdn.microsoft.com/en-us/library/vstudio/b6x6shw7%28v=vs.100%29.aspx)将配置规则限制到特定目录或文件来实现类似的目的。例如：

```
<configuration>
  <location path="fonts/specialfont.ttf">
    <system.webServer>
       <httpProtocol>
          <customHeaders>
             <add name="Access-Control-Allow-Origin" value="*" />
          </customHeaders>
       </httpProtocol>
    </system.webServer>
  </location>
</configuration> 
```

尽管您可能希望为所有字体启用 CORS，例如`<location path="fonts">`.

[这个问题](https://stackoverflow.com/q/2195266/2821583)的答案有几个例子`location`。

# dbpedia - 从实时 dbpedia 转储生成不同的数据集

> ID：11625442
> 
> 赞同：4
> 
> 时间：2012-07-24T06:40:13.047
> 
> 标签：dbpedia

[我正在玩dbpedia 下载页面上](http://wiki.dbpedia.org/Downloads37)提供的不同数据集，发现它有点过时了。

[然后我从dbpedia live](http://live.dbpedia.org/dumps/) site下载了最新的转储。当我提取 6 月 30 日的文件时，我只得到了一个 37GB 的 .nt 文件。

我想从最新的转储中获取不同的数据集（例如下载页面上可用的不同 .nt 文件）。是否有脚本或流程可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T16:23:15.147

**解决方案1：**

您可以使用 dbpedia 实时提取器。[https://github.com/dbpedia/extraction-framework](https://github.com/dbpedia/extraction-framework)。您需要配置适当的提取器（例如：信息框属性提取器、抽象提取器等）。它将下载最新的维基百科转储并生成 dbpedia 数据集。

您可能需要进行一些代码更改才能仅获取所需的数据。我的一位同事为德国数据集做了这个。为此，您仍然需要大量磁盘空间。

**解决方案2（我不知道是否真的可能。）：**

对数据集上的所需属性执行 grep。您需要知道要获取的属性的确切 URI。

例如：获取所有主页：bzgrep ' [http://xmlns.com/foaf/0.1/homepage](http://xmlns.com/foaf/0.1/homepage) ' dbpedia_2013_03_04.nt.bz2 >homepages.nt

它将为您提供所有带有主页的 N-triple。您可以将其加载到 rdf 存储中。

# c#-4.0 - SecurityAction.RequestMinimum 在 .Net 4.0 中已过时

> ID：11625447
> 
> 赞同：16
> 
> 时间：2012-07-24T06:40:29.690
> 
> 标签：c#-4.0, .net, .net-security

最近，我们的 .Net 客户端 libaray 正在升级以针对 Net 4.0 进行编译。将目标框架更改为 4.0 后，应用程序出现了一些编译错误。

在`AssemblyInfo.cs`：

`[assembly: SecurityPermission(SecurityAction.RequestMinimum, Execution = true)]`

> 错误 7 警告为错误：“System.Security.Permissions.SecurityAction.RequestMinimum”已过时：“程序集级别声明性安全性已过时，默认情况下 CLR 不再强制执行。请参阅[http://go.microsoft.com/ fwlink/?LinkID=155570](http://go.microsoft.com/fwlink/?LinkID=155570)了解更多信息。"' `

在 .Net 4.0 中，它表明：`SecurityAction.RequestMinimum`已过时，我们将所有警告视为错误。

我应该用它做什么？- 只需将其删除（这会产生一些意想不到的影响吗？例如，当在 IIS 中使用 dll 时）或更改为其他值？我不熟悉.Net，尤其是它的安全机制。

任何人都可以在这方面提供帮助吗？感谢您的任何建议和评论：）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-24T06:46:06.830

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.security.permissions.securityaction.aspx)：

> 在 .NET Framework 版本 4 中，已删除用于强制执行 Deny、RequestMinimum、RequestOptional 和 RequestRefuse 权限请求的运行时支持。这些请求不应在基于 .NET Framework 4 或更高版本的代码中使用。

因此，只需将其删除。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T22:12:08.333

一些搜索让我在这里找到了一个类似的 VB.net rdlc 错误（所以是的，我知道这个问题被标记为 C#）。我没有使用有问题的代码，但我确实发现一个杂散的下划线导致了这个错误，例如：在一个文本框表达式中你可能不小心输入了：

```
"This is a " & _
"test" 
```

认为你在一些代码后面，但是这会产生与上面列出的相同的错误，一旦删除，错误就消失了。

# content-management-system - Yii 中的动态 SEO 友好 URL

> ID：11625448
> 
> 赞同：1
> 
> 时间：2012-07-24T06:40:47.520
> 
> 标签：content-management-system, yii, seo

我想在 yii 中使用自定义动态 seo 友好的 url。

我读了各种各样的文章，他们都说同样的话。

这是我到目前为止设法找到的，它不适合我的需要：

```
 'urlManager'=>array(
        'urlFormat'=>'path',
        'rules'=>array(
            '<controller:\w+>/<id:\d+>'=>'<controller>/view',
            '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>'=>'<controller>/<action>', 
```

或者

```
array(
     '<_c:(post|comment)>/<id:\d+>/<_a:(create|update|delete)>'=>'<_c>/<_a>',
     '<_c:(post|comment)>/<id:\d+>'=>'<_c>/view',
     '<_c:(post|comment)>s/*'=>'<_c>/list',
) 
```

我不需要像这样的网址：domain.com/a/b/c/d

我需要：domain.com/here-goes-the-article-title-ACTION-ID

我需要一个可以识别文章标题的表达式。

这就是我的一个网址的样子：[http://www.linkbook.ro/concurs-castiga-o-invitatie-de-trei-zile-de-festival-la-bestfest-2012-detailsU-2-882。 html](http://www.linkbook.ro/concurs-castiga-o-invitatie-de-trei-zile-de-festival-la-bestfest-2012-detailsU-2-882.html)

其中 concurs-castiga-o-invitatie-de-trei-zile-de-festival-la-bestfest-2012 是文章标题

detailsU是动作

2 是数据库ID

882是文章ID

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:10:31.667

让我将我的评论表述为答案。你仍然需要自己实现一些东西，但这应该让你开始：

```
class MyRule extends CBaseUrlRule
{
  public function parseUrl($oManager, $oRequest, $sPathInfo, $sRawPathInfo)
  {
    // Extract database Id and article Id from $sPathInfo and perhaps put it in $_REQUEST
    if ("url isn't SEO thingy")
      return FALSE:        
    return 'articles/index';
  }

  public function createUrl($oManager, $sRoute, $aParameters, $sAmpersand)
  {
     if ("i have an SEO item to show")
       return "/however you want to assemble your URL"; 
     return FALSE; 
  }
} 
```

上面的示例假设您通过文章控制器（操作索引）路由所有内容。

添加到配置是将以下内容添加到您的规则中：

```
'urlManager'=>array(
        'urlFormat'=>'path',
        'rules'=>array(
            array('class' => 'MyRule'),
            '<controller:\w+>/<id:\d+>'=>'<controller>/view',
            '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>'=>'<controller>/<action>', 
```

# c++ - 用于扩展数学程序的 C++ 或 Python？

> ID：11625450
> 
> 赞同：2
> 
> 时间：2012-07-24T06:41:11.130
> 
> 标签：c++, python, math

我正在争论是否将 C++ 或 Python 用于主要基于数学的程序。

两者都有很棒的数学库，但是对于复杂的数学，哪种语言通常更快？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T06:47:32.403

您还可以考虑混合方法。Python 通常更容易和更快地开发，特别是对于用户界面、输入/输出等。

对于某些数学运算，C++ 肯定会更快（尽管如果您的问题可以用向量运算或线性代数来表述，那么 numpy 提供了一个非常有效的向量运算的 Python 接口）。

Python 很容易用 Cython、Swig、Boost Python 等进行扩展，因此一种策略是用 Python 编写程序的所有簿记类型部分，并用 C++ 编写计算代码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-24T06:42:50.180

我想可以肯定地说 C++ 更快。仅仅因为它是一种编译语言，这意味着只有您的代码在运行，而不是像 python 那样的解释器。

不过，可以使用 python 编写非常快的代码，而使用 C++ 编写非常慢的代码。所以你必须用任何语言明智地编程！

另一个优点是 C++ 是类型安全的，这将帮助你编写你真正想要的东西。

在某些情况下，一个缺点是 C++ 是类型安全的，这将导致设计开销。例如，您必须考虑（可能是漫长而艰难的）函数和类接口。

我喜欢 python 有很多原因。所以不要理解这是对python的请求。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-24T06:59:24.100

这完全取决于更快是“更快地执行”还是“更快地开发”。总体而言，python 的开发速度更快，c++ 的执行速度更快。对于使用整数（算术），它具有全精度整数，它有很多外部工具（numpy，pylab ...）我的建议是先去 python，如果你有性能问题，然后切换到 cpp（或使用以混合方法从 python 中用 cpp 编写的外部库）

没有好的答案，这完全取决于你想在研究/微积分方面做什么

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T06:58:51.543

毫无疑问，C++ 将更快地进行密集的数值计算。但是，那里有很多预先存在的库（用 C/C++/Haskell 等编写），带有 Python 包装器——利用 Python 的便利性并让现有的库承担负载会更方便。

一个综合系统是[http://www.sagemath.org](http://www.sagemath.org)，一个相当有趣的链接是它在[http://sagemath.org/links-components.html](http://sagemath.org/links-components.html)上使用的组件。

根据我的经验，`numpy`一个系统通常足以应付大多数事情。`scipy``pandas`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T06:51:41.027

使用你更喜欢的那个（你应该更喜欢 python :)）。

在任何一种情况下，任何数学密集型计算都应由现有库执行 - 这些库不依赖于语言（通常 BLAS / LAPACK 用于执行实际数学）。如果您选择使用 python，请使用[numpy](http://numpy.scipy.org/) 进行计算。

编辑：从您的评论来看，您似乎非常关心程序的速度。确定高级 pythonic 代码浪费了多少时间的唯一方法是分析您的程序（例如，将 ipython 与 run -p 一起使用）。

在大多数情况下，你会发现高级的东西大约占用了总运行时间的 10%，因此从 python 切换到 C++ 只会将这 10% 提高一些因素，总运行时间可能会增加 5% .

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T11:38:01.567

我真诚地怀疑 Google 和斯坦福不知道 C++。

“通常更快”不仅仅是语言。算法可以决定解决方案的成败，无论它是用什么语言编写的。用 C++ 编写的一个糟糕的选择，如果选择更好的算法，就会被 Java 或 Python 击败。

例如，内存中的单 CPU 线性代数库将通过正确完成的并行化版本打开大门。

尽管有时间步稳定性限制，隐式算法实际上可能比显式算法慢，因为后者不必反转矩阵。这通常适用于双曲偏微分方程。

你不应该关心“通常更快”。你应该深入研究你试图解决的问题以及用于解决它的算法。这样你会比盲目的语言选择做得更好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-16T02:10:52.197

我会选择在 Java 平台上运行的 Python。这种方法在[DataMelt 程序](http://jwork.org/dmelt/)中实现。从 Python 调用 Java 库的算法会更快，因为 JVM 会为您优化代码。

# iphone - 如何在应用程序iphone的后台调用方法？

> ID：11625452
> 
> 赞同：1
> 
> 时间：2012-07-24T06:41:20.163
> 
> 标签：iphone, objective-c

我必须从后台调用 sendRequest 方法。如果 sendRequest 工作完成，那么我必须在 iphone 中调用启动画面。我正在这样做，但这在 dispatch_async 中无法正常工作。我调用这个 CheckForUpdatesModal 类从后台获取所有值，然后调用视图控制器。但是如果我放断点并显示，那么它只调用 sendrequest 方法。它没有调用这个方法

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection pleasehelp me here what is wrong some give me this ans to follow dispatch and my xcode version is4.2
    - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { 

                                      [BaseModalcopyDatabaseIfNeeded];
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{ 
            NSLog(@"pradeep"); // Here you can define your code to execute in  background.}); 

            CheckForUpdatesModal *CFUM = [[CheckForUpdatesModal alloc]init];
            [CFUM sendRequest];
            [CFUM release];

        });

             self.SSView = [[[SplashScreenView alloc] initWithNibName:@"SplashScreenView" bundle:nil] autorelease];          
            self.window.rootViewController = SSView;
           [self.window makeKeyAndVisible];
           return YES;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:01:45.487

尝试这个 ：-

```
 dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

 dispatch_async(queue, ^{
        CheckForUpdatesModal *CFUM = [[CheckForUpdatesModal alloc]init];
        [CFUM sendRequest];
        [CFUM release];

    dispatch_sync(dispatch_get_main_queue(), ^{
       //SHOW UR SPLASH SCREEN HERE
    });
}); 
```

# mysql - 我可以使用 Netbeans 复制 MySQL 数据库吗

> ID：11625454
> 
> 赞同：-4
> 
> 时间：2012-07-24T06:41:25.723
> 
> 标签：mysql, netbeans, database-replication

我想知道是否有任何方法可以`MySQL`通过在 中编写 java 代码来复制数据库`Netbeans`，因为我们可以复制`MySQL`表。请给建议..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:32:42.313

Netbeans 是一个 IDE，用于从 java、c/c++ 到 php 的各种语言。

回答你的问题。为什么不？

您可以创建一个 Java 客户端来生成与主从服务器的两个 MySQL 连接。编写您自己的复制逻辑或数据同步逻辑，牢记数据完整性。

这是您的决定，但行业依赖于 MySQL 本身附带的复制功能。 [http://dev.mysql.com/doc/refman/5.0/en/replication.html](http://dev.mysql.com/doc/refman/5.0/en/replication.html)

# sql - INTERSECT 没有按我的预期行事

> ID：11625455
> 
> 赞同：0
> 
> 时间：2012-07-24T06:41:31.460
> 
> 标签：sql, h2

我不确定这是否是我对 SQL 或 h2 相对缺乏经验的症状。我有一个名为 的视图，`VIEW_TRANSACTION_LEGS_DATA`我需要以各种方式对其进行搜索。因此，例如，我有：

```
SELECT HEAD_ID FROM VIEW_TRANSACTION_LEGS_DATA WHERE AMOUNT > 1000 
```

我也有：

```
SELECT * FROM  
(SELECT HEAD_ID FROM VIEW_TRANSACTION_LEGS_DATA WHERE AMOUNT > 1000)  
INTERSECT  
(SELECT HEAD_ID FROM VIEW_TRANSACTION_LEGS_DATA WHERE AMOUNT < 2000) 
```

不幸的是，这并没有像我预期的那样工作！应该只返回 3 行，而我返回 57 行。

（请注意，上面是我的代码实际所说的简化版本；请不要建议我使用 BETWEEN 组合 INTERSECTed 行，因为这不适用于其余代码。）

我确定我的问题是典型的 SQL 新手类型问题，但我根本看不到它！可以请好心人指出我正确的方向吗？

# php - 将 phpgrid 与 codeigniter 集成

> ID：11625458
> 
> 赞同：2
> 
> 时间：2012-07-24T06:41:39.103
> 
> 标签：php, codeigniter

我试图将[phpgrid](http://phpgrid.com) 与我的 codeigniter 程序集成。

我需要一些关于如何使用库函数的说明。

我已将 phpgrid 文件添加到应用程序/库路径中，并且已使用`$this->load->library('phpGrid');`

下面是 phpgrid conf.php 文件中的代码。

```
<?php
// mysql example
define('DB_HOSTNAME','localhost'); // database host name
define('DB_USERNAME', 'admin');     // database user name
define('DB_PASSWORD', 'pop3'); // database password
define('DB_NAME', xtra); // database name     
define('DB_TYPE', 'mysql');  // database type
define('DB_CHARSET','utf8'); // ex: utf8(for mysql),AL32UTF8 (for oracle), leave blank to use the default charset

define('SERVER_ROOT', '/grid');

/******** DO NOT MODIFY ***********/
require_once('phpGrid.php');     
/**********************************/
?> 
```

有人可以帮我如何将define和require_once文件引用到我的库路径吗？

或者有没有其他方法可以将 phpgrid 文件包含到我的 CI 项目中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T08:29:32.633

我刚刚查看了 PHPgrid 源文件，它们似乎是加密的，所以你可以在多大程度上与 Codeigniters MVC 框架完全“集成”。

要使用这样的外部库，我通常会这样做：

在根目录中存储一个单独的 config.php 文件（看起来像 PHPgrid 文件），该文件定义了 db 连接常量。

然后在您的 Codeigniter config/database.php 文件中要求它，并使用常量来设置 Codeigniter 设置。所以你的 Codeigniter database.php 看起来像：

```
require_once('config.php');

$db['default']['hostname'] = DB_HOSTNAME;

$db['default']['username'] = DB_USERNAME;

$db['default']['password'] = DB_PASSWORD;

$db['default']['database'] = DB_NAME; 
```

您不想到处存储数据库连接详细信息。

然后在 phpgrid/conf.php 文件的顶部包含 config.php，并以相同的方式使用常量填充详细信息，显然其他 phpgrid 常量也是如此。

将所有 PHPgrid 文件放在应用程序/库的子目录中。现在在您的应用程序/库文件中创建一个新文件，该文件名为 ci_phpgrid.php，并在其中创建一个新类，如下所示：

```
<?php
require_once('phpgrid/conf.php');

class CI_phpgrid {

    public function example_method($val = '')
    {
        $dg = new C_DataGrid("SELECT * FROM Orders", $val, "Orders");
        return $dg;
    }
} 
```

您现在可以使用它与 php 网格进行通信，保持原始文件不变。

在您的控制器中，您只需执行以下操作：

```
$this->load->library('ci_phpgrid');
$data['phpgrid'] = $this->ci_phpgrid->example_method(3)

$this->load->view('home_page',$data); 
```

然后在视图中，您可以使用以下命令显示表格：

```
$phpgrid->display() 
```

正如我所提到的，我没有使用 PHPgrid，您需要包含所有相关的 JS 进行排序等，但这通常是您想要在 CI 中处理外部库的方式。

# javascript - 抓取网页内容时获取javascript函数的结果

> ID：11625459
> 
> 赞同：0
> 
> 时间：2012-07-24T06:41:43.620
> 
> 标签：javascript, asp.net, html, c#-4.0, html-parsing

是否可以提取网页中java脚本中使用的变量的值。我需要在网页中获取存储在 javascript 函数中的 url。在网页中，使用调用该函数`<a href`，

当我们单击该超链接时，将调用 java 脚本函数并返回 url。
下面是代码，

`<a class="dld" OnClick="download_file();" href="javascript:">&nbsp;</a>`

脚本函数是

```
function download_file() {
    var summaryFlag     = 0;
        if(document.getElementById("frmincludefile").checked){
    summaryFlag=1; }
    url = '/filedatabase/file_process_request.html?mru=53616c7465645f5f3f24b8f4a86301eb202e67fbb679df4356e24fee9d7a17a099010eb5acf5985c&type=doc';
    url += '&sum='+summaryFlag+'&logo=0&xcode=xtritiuminx&serve_txt=0&folderid=';
    document.location   = url;
} 
```

如何获取 url 变量的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T12:11:44.757

我无法获得 java 脚本函数的结果，但现在我正在使用 `webBrowser1.Document.InvokeScript("download_file");` 通过调用 java 脚本来调用 javascript，我可以下载文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:30:42.663

您可以使用上层范围内的变量来执行此操作。在下面的示例中，我使用全局变量（不好的做法）来保存`localUrl`重定向函数的值：

```
var url = '';

function redirect() {
  var googleRadio = document.getElementById('google');
  if (googleRadio.checked) {
    localUrl = 'http://google.com';
    url = localUrl;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:48:31.713

将`URL`var 值设置为任意`hidden field`

例如

```
document.getElementById("hidden_field_name").value = url; 
```

# javascript - 如何离线使用 HighChart？

> ID：11625461
> 
> 赞同：1
> 
> 时间：2012-07-24T06:41:48.633
> 
> 标签：javascript, highcharts

我下载了 highchart javascript 并使用这些脚本创建了一个示例图表。如果系统在线或不在线，则显示此图表。

谢谢提前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T06:45:47.067

可能，如果您按照 Highcharts 网页中的说明进行操作，您将获得类似以下内容：

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script> 
```

如果您将[jquery 库](http://jquery.com/download/)下载到您的计算机中，您将能够离线使用 highcharts。

# javascript - 用于匹配的正则表达式， 后跟一个新行和一个数字

> ID：11625475
> 
> 赞同：0
> 
> 时间：2012-07-24T06:43:22.500
> 
> 标签：javascript, regex

`<br />`如果在段落内我后面跟着换行符和数字，我想用 javascript 分割一个段落。

以下是该段落的示例：

```
aaaaaa aaaaa aaaaa aaaaa aaaa <br />
1   bbbb bbbbb bbbbb bbbb bbb <br />
2   cccc ccccc ccccc cccc ccc <br />
*   dddd ddddd ddddd dddd ddd <br /> 
```

我想有一个里面有3个元素的数组：

```
1\.  aaaaaa aaaaa aaaaa aaaaa aaaa <br />
2\.  1   bbbb bbbbb bbbbb bbbb bbb <br />
3\.  2   cccc ccccc ccccc cccc ccc <br />
    *   dddd ddddd ddddd dddd ddd <br /> 
```

我试过这个：

```
<br \/>\d 
```

但这不起作用，因为我猜是换行符。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:51:13.790

## 您应该尝试[http://txt2re.com/](http://txt2re.com/)获取正则表达式。它非常好，会非常帮助你生成正则表达式。

```
("aaaaaa aaaaa aaaaa aaaaa aaaa <br />\r\n\
1   bbbbbbbbbbb <br />\r\n\
2   cccc ccccc ccccc cccc ccc <br />\r\n\
3   dddd ddddd ddddd dddd ddd <br />")
    .split(/\s*([\d|\*]+.+<br[^>]*>)[\r|\n|\r\n]\s*/gmi) 
                                      // criteria filtering
    .join('\r\n')                     // removing the last empty element (2nd) after split
    .replace(/\r\n\r\n/gmi,'\r\n')    // remove double line breaks
    .split(/\r\n/);                   // split again 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T07:01:14.817

假设字符串存储在一个名为 的变量`str`中，以下应该可以工作：

```
str.split(/<br \/>$[\s\S]^(?=\d+)/m) 
```

我用过：

*   多行模式 ( `/m`)，允许 $ 匹配一行的结尾，而 ^ 匹配下一行的开头。
*   一个匹配任何字符的 javascript 正则表达式技巧，包括换行符：`[\s\S]`，详见[此处](http://www.regular-expressions.info/javascript.html)。
*   一个[积极的前瞻](http://www.regular-expressions.info/lookaround.html#lookahead)，以确保新行后面的东西是一个数字：`(?=\d+)`。但是，它不包含在匹配中，因此不会从字符串中删除数字。

**编辑：**这将从`<br />`列表中除最后一个元素之外的所有元素中删除 s 。由于我现在想不出更好的方法，您可以使用以下方法重新添加它们：

```
var parts = str.split(/<br \/>$[\s\S]^(?=\d+)/m);
var final = [];
for (var i = 0; i < parts.length - 1; i++) {
    final.push(parts[i] + '<br />');
}
final.push(parts[parts.length - 1]); 
```

不理想，但似乎对我有用。

# iphone - UITableViewCell 中的取消选择器

> ID：11625478
> 
> 赞同：0
> 
> 时间：2012-07-24T06:43:35.810
> 
> 标签：iphone, ipad

我有这样的场景，我在 TableViewCell 中使用选择器，如下所示，当我单击视图中的后退按钮时，我想取消该选择器，并将字典作为对象发送到 Selector

我的代码如下

**在头文件中**

```
 NSMutableDictionary* photoDict;
 NSMutableDictionary* dictImages; 
```

**在 .M 文件中**

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if(cell==nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:cellIdentifier];
        [[NSBundle mainBundle]loadNibNamed:@"MyCellNib" owner:self options:Nil];
        cell = detailChainObj;
    }

    NSString* avatarURL =@"image_Url"; //Any url of image for cell.
    NSString *key =[[NSString alloc] initWithFormat:@"Key%d%d",indexPath.section,indexPath.row];

    dictImages = [NSDictionary dictionaryWithObjectsAndKeys:imageViewCell,@"Img",imgURL,@"imgURL",key,@"key", nil];
    [self performSelectorInBackground:@selector(DownloadLinkzImageOfUser:) withObject:dictImages];

    if([photoDic valueForKey:keyAvt])
    {
        NSData* data = (NSData*)[photoDic valueForKey:key];
        imageViewCell.image = [UIImage imageWithData:data];
    }
    else
    {
        [self performSelectorInBackground:@selector(DownloadImagesForCell:) withObject:dictImages];
    }
}

//

-(void)DownloadImagesForCell:(NSDictionary *)result
{
    UIImageView* img = (UIImageView*)[result objectForKey:@"Img"];
    NSString* urlAvt = [result valueForKey:@"imgURL"];
    if([urlAvt isEqualToString:@"No Image"])
    {
       img.image = [UIImage imageNamed:@"noimg.png"];
    }
    else
    {
       NSData* data = [NSData dataWithContentsOfURL:[NSURL URLWithString:imgURL]];
       img.image = [UIImage imageWithData:data];
       [photoDic setValue:data forKey:[NSString stringWithFormat:@"%@",[result valueForKey:@"key"]]];
    }
 } 
```

现在我想在按下后退按钮时取消这个选择器

请记住，我已经使用过

```
[NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(DownloadImagesForCell:) object:dictImages]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:01:09.107

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html)

我猜这个方法只适用于 performSelector:withObject:afterDelay:。

# java - JDBC持久层？

> ID：11625481
> 
> 赞同：-3
> 
> 时间：2012-07-24T06:43:44.490
> 
> 标签：java, jsp, jsf, jdbc

我环顾四周，找不到任何好的例子或方法来制作 JDBC 持久层。我会使用框架，但我没有时间修复错误等。

那么，我应该如何在仅使用 JDBC 的 JSP/JSF 系统中创建持久层？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T06:48:11.163

是什么让您认为您必须修复框架中的错误？看看 Spring，尤其是它的[JDBCTemplate](http://static.springsource.org/spring/docs/3.0.x/reference/jdbc.html)。它会大大减轻 jdbc-pain 的痛苦，我不希望你在那里找到 (m) 任何错误。

# mysql - 通过对其他字段中的值进行数学操作来创建新字段

> ID：11625482
> 
> 赞同：0
> 
> 时间：2012-07-24T06:43:47.783
> 
> 标签：mysql

这里有点新手。我目前正在研究一个列出不同汽车详细信息的 MySQL 表。我需要一个由其他三个字段的信息组成的新字段。所以我有“加速度”、“速度”和“制动”，它们都包含两位数的整数，这些整数平均到另一个我想称之为“平均”的字段。

逻辑是“加速”+“速度”+“制动”/3

我似乎无法找出正确的语法来做到这一点。我确实需要将其作为一个字段，因为我需要将这些值显示在其他查询中。我知道 SELECT 查询可以获得我需要的结果值，但是如何将这些值传递到该表上的永久字段？

提前感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:48:15.750

1.  首先，您需要更改表模式以定义新列：

    ```
    ALTER TABLE my_table ADD COLUMN Average FLOAT; 
    ```

2.  接下来，更新表以设置值：

    ```
    UPDATE my_table SET Average = (Acceleration + Speed + Braking) / 3; 
    ```

3.  考虑如何正确设置`Average`新插入/更新的数据。也许使用触发器：

    ```
    CREATE TRIGGER calc_average_ins AFTER INSERT ON my_table FOR EACH ROW
    SET NEW.Average = (NEW.Acceleration + NEW.Speed + NEW.Braking) / 3;

    CREATE TRIGGER calc_average_upd AFTER UPDATE ON my_table FOR EACH ROW
    SET NEW.Average = (NEW.Acceleration + NEW.Speed + NEW.Braking) / 3; 
    ```

您可能需要考虑改为在[视图](http://dev.mysql.com/doc/en/views.html)中引入此列，以便根据需要即时创建平均值，从而防止它与基础数据值不同步（但请注意，您不再获得具有缓存的值）：

```
CREATE VIEW my_view AS
SELECT *, (Acceleration + Speed + Braking) / 3 AS Average FROM my_table; 
```

最后，请注意，您的平均值在现实世界中没有物理意义（它的单位是什么？）：更有意义的指标可能更适合您的需求，也可能不更适合您的需求。

# iphone - 将数组插入表格视图

> ID：11625483
> 
> 赞同：0
> 
> 时间：2012-07-24T06:43:54.397
> 
> 标签：iphone, objective-c, ios, uitableview, xcode4.3

我在将数组插入表视图时遇到问题。我有一个数组，我将它存储在`alDescArray`.

这是`alDescArray = ( "Block1", "Block2", "Block3" )`通过 NSLog 打印的位置。该表没有显示任何错误时我的代码的哪一部分？

```
- (void)viewDidLoad
{
    NSArray *BusRoute = alightDesc;
    int i;
    int count = [BusRoute count];
    for (i = 0; i < count; i++)
    {   
        NSDictionary *dic = [BusRoute objectAtIndex: i];
        NSDictionary *STEPS = [dic valueForKey:@"STEPS"];            
        alDescArray = [STEPS valueForKey:@"AlightDesc"];
   }
    [super viewDidLoad];
} 
```

这是tableview的代码

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
return [alDescArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    cell.textLabel.text = [alDescArray objectAtIndex:indexPath.row];    
    return cell;
} 
```

请帮忙谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:04:51.573

显然您的 tableview 的委托/数据源未设置。

。H

```
YourClassName : ParentClass <UITableViewDelegate, UITableViewDataSource> 
```

.m

```
- (void)viewDidLoad
{
    yourTableView.delegate = self;
    yourTableView.dataSource = self;
    NSArray *BusRoute = alightDesc;
    int i;
    int count = [BusRoute count];
    for (i = 0; i < count; i++)
    {   
        NSDictionary *dic = [BusRoute objectAtIndex: i];
        NSDictionary *STEPS = [dic valueForKey:@"STEPS"];            
        alDescArray = [STEPS valueForKey:@"AlightDesc"];
    }
    [super viewDidLoad];
} 
```

# iphone - ARC的内存管理，奇怪的行为

> ID：11625494
> 
> 赞同：0
> 
> 时间：2012-07-24T06:45:35.390
> 
> 标签：iphone, ios, ipad, automatic-ref-counting

我声明了一个全局对象：

```
YViewController * yViewController 
```

在应用程序启动时，我正在调用：

```
[self methodOne]; 
```

该方法这样做：

```
-(void)methodOne
{
 yViewController = [[YViewController alloc] initWithNibName:@"YViewController" bundle:nil];
 self.window.rootViewController=yViewController;
} 
```

当在 YViewController 中单击一个按钮时，我正在调用：

```
[self methodTwo]; 
```

该方法这样做：

```
-(void)methodTwo
{
  XViewController * xViewController = [[XViewController alloc] initWithImage:myImage];
  self.window.rootViewController=xViewController;
} 
```

当点击后退按钮时，`XViewController`我正在调用`[self methodOne];`它导航回`YViewController`.

问题是，当我使用 ARC 时，我无法刷新/释放`xViewController`对象。此外，在检查仪器时，当我在和`XViewController`之间来回敲击时，记忆会不断增加。`XViewController``YViewController`

在这种情况下，如何使用 ARC 管理内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:10:50.600

如果 XViewController 的源是开放的，我会调整它以配合导航。无论如何 ..

好吧，基本上你每次都在创建一个新的 ViewController 对象，这就是导致内存堆积的原因。

你应该有'XViewController * xViewController'和'YViewController * yViewController'作为类变量，你的方法应该是这样的，例如。

查看对象是否存在，如果存在，则不要再次分配它。

```
-(void)methodTwo
{
 if(xViewController == nil)
 {
   xViewController = [[XViewController alloc] initWithImage:myImage];
 }
  self.window.rootViewController=xViewController;

} 
```

# java - Java EE 应用程序的浏览器替代品？

> ID：11625495
> 
> 赞同：0
> 
> 时间：2012-07-24T06:45:37.260
> 
> 标签：java, swing, jakarta-ee

我的客户想要一个 Java EE 应用程序服务器，但不想使用 Web 浏览器访问它。他们不想让“网页”看起来像一个独立的客户端。

我真的不知道该怎么做，甚至不知道谷歌。

我正在考虑定义一个对 Web 服务做出反应的 Swing 客户端，但我真的不知道这是否是最好的方法。

我不想要像 RIA 这样的东西。

我想我的问题是“如何在 Web 浏览器之外构建 Java EE 客户端？”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T06:50:34.710

GlassFish 允许使用 Java WebStart 启动一个厚实的“应用程序客户端”，当在客户端上运行时，它可以轻松访问服务器内部的 EJB 等各种事物。

这可能是您的客户想要的？

[http://netbeans.org/kb/docs/javaee/entappclient.html](http://netbeans.org/kb/docs/javaee/entappclient.html)

[http://java.sun.com/developer/technicalArticles/J2EE/jws-glassfish/part2.html](http://java.sun.com/developer/technicalArticles/J2EE/jws-glassfish/part2.html)

我发现 Glassfish 3.1 服务器非常易于用作 Windows 和 Linux 上的部署平台。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T06:56:08.577

这并不罕见。定义您的服务接口并公开为`EJB`'s. 通过 Swing、Eclipse RCP (http://wiki.eclipse.org/index.php/Rich_Client_Platform) 或其他 RCP 技术创建您的客户端 (GUI)。您的客户端（可能在多个工作站上运行）将通过 EJB 客户端接口与集中式服务进行通信。

请参阅[http://java.sun.com/developer/technicalArticles/J2EE/appclient/](http://java.sun.com/developer/technicalArticles/J2EE/appclient/)

# optimization - 将具有多个应用程序页面的 Chrome 扩展程序移植到 Firefox

> ID：11625510
> 
> 赞同：2
> 
> 时间：2012-07-24T06:46:51.657
> 
> 标签：optimization, google-chrome-extension, firefox-addon, firefox-addon-sdk, porting

# 铬合金

我有一个 Chrome 扩展程序，它的行为类似于一个 Web 应用程序（除了使用 chrome.* API 和跨域请求），它具有多个 html 页面，这些页面都使用*background.html*与 NPAPI 插件进行通信。

扩展的结构（从扩展的根开始）如下：

*   背景.html
*   plugin/ (NPAPI 插件包)
*   前端/
    *   main.html
    *   foo.html
    *   bar.html
    *   ..

background.html 在扩展安装时加载并加载 NPAPI 插件，无限期运行（直到浏览器关闭或扩展被停用/删除）。

单击扩展的工具栏按钮后，将打开**main.html**，它提供了一个 UI 导航来访问其他页面 foo.html 和 bar.html。

这些页面中的任何一个都`chrome.extension.getBackgroundPage()`用于调用 NPAPI 插件的方法并同步接收响应。

* * *

# 火狐

关于背景 NPAPI 插件，这已经在[我的上一个问题中](https://stackoverflow.com/questions/11573825/embedding-npapi-plugin-in-background-using-just-firefox-addon-sdk)得到了回答。

从当前插件 sdk 中可用的选项来看，Firefox 将消息传递限制为 JSON 可序列化值，因此我不能再直接调用 NPAPI 插件方法（通过传递插件的返回值来解决）。

剩下的问题涉及前端应用程序页面，这些页面是本地的并且应该是受信任的脚本。我已经尝试将它们加载为*Panels*，但 Panels 似乎不适合完整的 UI 页面，而是适合小的信息片段。

**有没有办法在不以编程方式在每个页面中注入 page-mod contentscript 的情况下加载这些页面？**（这也需要在页面导航时注入一个新脚本）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T02:30:23.770

使用[CSSOM](http://www.quirksmode.org/dom/w3c_css.html#change)和[数据 URI](http://blog.kotowicz.net/2011/10/sad-state-of-dom-security-or-how-we-all.html)以编程方式加载页面：

```
var foo = btoa("<script>x=new XMLHttpRequest();x.open(\u0022GET\u0022,\u0022http://xssme.html5sec.org/xssme2/\u0022,true);x.onload=function() { alert(x.responseText.match(/document.cookie = '(.*?)'/)[1])};x.send(null);</script>")

var bar = atob(foo);

var baz ='data:text/html;' + foo;

var stylesheet = document.styleSheets[0].cssRules;

stylesheet.insertRule("body { background-image: url( " + baz + " ); }", stylesheet.length - 1); 
```

**参考**

*   [数据 URI 转换器](http://datauriconverter.appspot.com/#dataurlmaker)

*   [NPM：datauri 包](https://www.npmjs.com/package/datauri)

# c# - 如果调用包含在另一个类的使用中，则在未涉及的类中检测

> ID：11625512
> 
> 赞同：1
> 
> 时间：2012-07-24T06:46:58.220
> 
> 标签：c#, design-patterns, singleton, using

*首先，对于这个困难的问题标题感到抱歉，但我想不出更好的了。如果有人知道更好的描述，我很乐意更改标题！:)*

**假设我有以下两个类的代码：**

```
using(new Wrapper())
{
    Inner.Do();
}

public class Wrapper : IDisposable
{
    public static Wrapper Instance { get; set; }
    public Wrapper()
    {
        Instance = this;
    }

    public void Dispose()
    {
        Instance = null;
    }
}
public static class Inner
{
    public static Do()
    {
        if (Wrapper.Instance == null)
        { /* no using */ }
        else
        { /* with using */ }
    }
} 
```

上面的代码按预期工作，我能够检测我的代码是否包含在 using 语句中。

不幸的是，静态实例变量是我能想到的实现上述目标的最佳方式，但它肯定不是最好的情况。假设两个线程在“同一”时间执行上述代码。一个线程会覆盖另一个线程的实例，从而导致异常行为和竞争条件。

**问题：**

任何人都可以指导我找到我仍然能够执行上述操作但不使用静态实例变量的解决方案吗？

提前致谢！

**回答**

由于这只是对新事物的测试，因此我现在使用 ThreadStaticAttribute。但正如 Marc Gravell 所说，如果正在进行异步操作，请不要使用它。

有关用法，请参阅 Kris Vandermotten 的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T06:51:27.810

就我个人而言，我会简单地建议：不需要这样做。你是对的，没有神奇的方法可以做到这一点。线程问题可以通过 处理`[ThreadStatic]`，但是当涉及多个线程时，例如`async`. 如果可能的话，我会说：找到一个不需要检测不相关`using`块的不同实现策略。同样，您的代码将难以检测 和 之间的区别`using`：

```
new Wrapper(); // note this doesn't dispose cleanly
Inner.Do(); 
```

一些静态实例的另一个问题是您还需要考虑多个嵌套块；将需要一个`Stack<Wrapper>`，或者您可以缓存以前的值以将其设置回一次性对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:59:37.830

您需要使用 ThreadStatic 属性标记支持 Instance 属性的字段，如下所示：

```
[ThreadStatic]
private static Wrapper instance;

public static Wrapper Instance
{
    get { return instance; }
} 
```

另请参阅[http://msdn.microsoft.com/en-us/library/system.threadstaticattribute.aspx](http://msdn.microsoft.com/en-us/library/system.threadstaticattribute.aspx)

您可能还必须处理重入（即嵌套使用）。

# mysql - 重用自动增量 ID

> ID：11625513
> 
> 赞同：1
> 
> 时间：2012-07-24T06:47:03.423
> 
> 标签：mysql

我想重用正在删除的 AUTO INCREMENT ID。我正在使用 MySQL 数据库。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:58:01.897

```
SELECT id + 1 FROM TableName t1 WHERE NOT EXISTS (SELECT 1 FROM TableName t2 WHERE t2.id = t1.id + 1) limit 0,1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:06:18.077

发现可以用这个

```
SELECT Auto_increment FROM information_schema.tables WHERE table_name='tableName'  AND table_schema = 'dataBaseName'; 
```

# javascript - 在 ko subscribe 方法中访问订阅变量的“名称”

> ID：11625516
> 
> 赞同：1
> 
> 时间：2012-07-24T06:47:22.607
> 
> 标签：javascript, knockout.js, knockout-2.0

我知道我可以访问订阅变量的 newValue 但我如何访问它的名称：

```
for ( var i = 0; i < carSelects.length; i++) {
    var carId = $(carSelects[i]).attr('carId');
    self["cars_" + carId + "_selected"] = ko.observableArray();
    self["cars_" + carId + "_selected"].subscribe(function(newValue) {
       // here i want to access the name of the subsribed variable 
       // i.e. "cars_" + carId + "_selected"
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T06:51:56.060

试试这样：

```
for ( var i = 0; i < carSelects.length; i++) {
   var carId = $(carSelects[i]).attr('carId');
   (function(name){
       self[name] = ko.observableArray();
       self[name].subscribe(function(newValue) {
           alert(name);
       });
   })("cars_" + carId + "_selected");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T23:26:55.213

This is a hack, but you can obtain the name of the subscribed variable via the `event.srcElement` and get the value of the element's "data-bind" attribute, like below:

```
var id= $.trim(event.srcElement.attributes["data-bind"].value.split(':')[1]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T06:59:15.570

作为解决方案，您可以分配具有所需属性的类而不是 ko.observableArray();

例如你有课

```
function CarClass(carId, changeCallback) {
   this.carId = carId;
   this.array = ko.observableArray();
   var self = this;

   self.array..subscribe(function(newValue) { 
      changeCallback(self.carId, newValue);
   });
} 
```

然后在更改功能中获取汽车ID：

```
for ( var i = 0; i < carSelects.length; i++) {
    var carId = $(carSelects[i]).attr('carId');
    self["cars_" + carId + "_selected"] = new CarClass(carId, function(carId, newValue) {

    });

} 
```

# javascript - 使用 Node.js 和 Express 发布时如何访问请求正文？

> ID：11625519
> 
> 赞同：249
> 
> 时间：2012-07-24T06:47:28.210
> 
> 标签：javascript, node.js, express

我有以下 Node.js 代码：

```
var express = require('express');
var app = express.createServer(express.logger());
app.use(express.bodyParser());

app.post('/', function(request, response) {
    response.write(request.body.user);
    response.end();
}); 
```

现在，如果我发布类似的内容：

```
curl -d user=Someone -H Accept:application/json --url http://localhost:5000 
```

我得到`Someone`了预期。现在，如果我想获得完整的请求正文怎么办？我尝试这样做`response.write(request.body)`，但 Node.js 抛出一个异常，说“*第一个参数必须是一个字符串或缓冲区*”，然后进入一个“无限循环”，异常说“*发送后无法设置标题。* ”；即使我做了`var reqBody = request.body;`然后写，这也是真的`response.write(reqBody)`。

这里有什么问题？

另外，我可以不使用就获取原始请求`express.bodyParser()`吗？

* * *

## 回答 #1

> 赞同：328
> 
> 时间：2018-04-20T14:19:58.823

从**express v4.16**开始，不需要任何额外的模块，只需使用内置的[JSON 中间件](https://expressjs.com/en/api.html#express.json)：

```
app.use(express.json()) 
```

像这样：

```
const express = require('express')

app.use(express.json())    // <==== parse request body as JSON

app.listen(8080)

app.post('/test', (req, res) => {
  res.json({requestBody: req.body})  // <==== req.body will be a parsed JSON object
}) 
```

注意 -`body-parser`这取决于它，[已经包含](https://www.npmjs.com/package/express?activeTab=dependencies)在 express 中。

也不要忘记发送标题`Content-Type: application/json`

* * *

## 回答 #2

> 赞同：197
> 
> 时间：2012-07-24T13:14:20.610

### Express 4.0 及以上版本：

`$ npm install --save body-parser`

然后在您的节点应用程序中：

```
const bodyParser = require('body-parser');
app.use(bodyParser); 
```

* * *

### Express 3.0 及以下版本：

尝试在您的 cURL 调用中传递它：

`--header "Content-Type: application/json"`

并确保您的数据采用 JSON 格式：

`{"user":"someone"}`

此外，您可以在 node.js 代码中使用 console.dir 来查看对象内的数据，如下例所示：

```
var express = require('express');
var app = express.createServer();

app.use(express.bodyParser());

app.post('/', function(req, res){
    console.dir(req.body);
    res.send("test");
}); 

app.listen(3000); 
```

这个其他问题也可能有帮助：[How to receive JSON in express node.js POST request?](https://stackoverflow.com/questions/8742982/how-to-receive-json-in-express-node-js-post-request)

如果您不想使用 bodyParser，请查看其他问题：[https ://stackoverflow.com/a/9920700/446681](https://stackoverflow.com/a/9920700/446681)

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2015-04-24T03:18:40.147

从 Express 4 开始，以下代码似乎可以解决问题。请注意，您需要`body-parser`使用`npm`.

```
var express = require('express');
var bodyParser = require('body-parser');
var app = express();
app.use(bodyParser.urlencoded({ extended: false }));

app.listen(8888);

app.post('/update', function(req, res) {
    console.log(req.body); // the posted data
}); 
```

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2019-08-01T10:09:31.300

对于 2019 年，您无需安装`body-parser`.

您可以使用：

```
var express = require('express');
var app = express();
app.use(express.json())
app.use(express.urlencoded({extended: true}))
app.listen(8888);
app.post('/update', function(req, res) {
    console.log(req.body); // the posted data
}); 
```

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2017-05-10T10:11:11.043

```
var express = require('express');
var bodyParser = require('body-parser');
var app = express();
app.use(bodyParser.urlencoded({ extended: false }));
app.use(bodyParser.json())

var port = 9000;

app.post('/post/data', function(req, res) {
    console.log('receiving data...');
    console.log('body is ',req.body);
    res.send(req.body);
});

// start the server
app.listen(port);
console.log('Server started! At http://localhost:' + port); 
```

这将对您有所帮助。我假设您正在以 json 格式发送正文。

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2021-03-26T15:45:34.333

你不应该使用`body-parser`它已被弃用。试试这个

```
const express = require('express')
const app = express()

app.use(express.json()) //Notice express.json middleware
```

该`app.use()`函数用于在指定的路径上挂载指定的中间件函数。它主要用于为您的应用程序设置中间件。

现在要访问正文，只需执行以下操作

```
app.post('/', (req, res) => {
  console.log(req.body)
})
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2018-07-10T16:24:06.840

这也可以在没有`body-parser`依赖关系的情况下实现，在请求结束时收听`request:data`并`request:end`返回响应，请参阅下面的代码示例。参考：[https ://nodejs.org/en/docs/guides/anatomy-of-an-http-transaction/#request-body](https://nodejs.org/en/docs/guides/anatomy-of-an-http-transaction/#request-body)

```
var express = require('express');
var app = express.createServer(express.logger());

app.post('/', function(request, response) {

    // push the data to body
    var body = [];
    request.on('data', (chunk) => {
      body.push(chunk);
    }).on('end', () => {
      // on end of data, perform necessary action
      body = Buffer.concat(body).toString();
      response.write(request.body.user);
      response.end();
    });
}); 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-08-31T18:37:02.530

就我而言，我错过了**设置标题**：

`"Content-Type: application/json"`

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-07-24T13:15:25.947

尝试这个：

```
response.write(JSON.stringify(request.body)); 
```

这将获取`bodyParser`为您创建的对象并将其转换回字符串并将其写入响应。如果您想要确切的请求正文（具有相同的空格等），您将需要之前附加到请求的侦听器`data`并`end`逐块构建字符串，如您在[来自 connect 的 json 解析源代码](https://github.com/senchalabs/connect/blob/master/lib/middleware/json.js#L50)中所见。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-02-27T08:13:08.530

如果您懒得阅读大量的帖子数据。您可以简单地粘贴以下行来读取 json。

下面是 TypeScript 的类似内容，也可以用于 JS。

**应用程序.ts**

```
 import bodyParser from "body-parser";
 // support application/json type post data
 this.app.use(bodyParser.json());
 // support application/x-www-form-urlencoded post data
 this.app.use(bodyParser.urlencoded({ extended: false })); 
```

在您接收 POST 调用的任何控制器之一中，如下所示

**用户控制器.ts**

```
 public async POSTUser(_req: Request, _res: Response) {
   try {
          const onRecord = <UserModel>_req.body;
           /* Your business logic */
           _res.status(201).send("User Created");
        }
    else{
           _res.status(500).send("Server error");
           }        
   }; 
```

> _req.body 应该将您的 json 数据解析为您的 TS 模型。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-12-18T11:32:58.847

我对 JS 和 ES 完全陌生，但似乎对我有用的是：

```
JSON.stringify(req.body) 
```

让我知道它是否有任何问题！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-07-24T10:53:57.120

您声称“尝试过”的内容正是您在使用 curl 调用时“按预期”工作的代码中所写的内容。

您遇到的错误似乎与您向我们展示的任何代码都无关。

如果您想获取原始请求，请`request`为`data`and`end`事件设置处理程序（当然，删除对 的任何调用`express.bodyParser()`）。请注意，`data`事件将以块的形式发生，除非您为`data`事件设置编码，否则这些块将是缓冲区，而不是字符串。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-05-10T03:24:10.410

通过以下命令安装 Body Parser

```
$ npm install --save body-parser 
```

配置正文解析器

```
const bodyParser = require('body-parser');
app.use(bodyParser);
app.use(bodyParser.json()); //Make sure u have added this line
app.use(bodyParser.urlencoded({ extended: false })); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-10-18T10:58:45.453

接受的答案仅适用于与 JSON 格式兼容的正文。通常，可以使用以下方式访问主体

```
app.use(
  Express.raw({
    inflate: true,
    limit: '50mb',
    type: () => true, // this matches all content types
  })
); 
```

喜欢张贴[在这里](https://stackoverflow.com/a/69227838/2801669)。具有类型并且可以转换为所需的格式`req.body`。`Buffer`

例如通过以下方式转换为字符串：

```
let body = req.body.toString() 
```

或通过以下方式进入 JSON：

```
let body = req.body.toJSON(); 
```

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2016-09-09T04:32:20.000

您使用以下代码记录发布数据：

```
router.post("/users",function(req,res){
    res.send(JSON.stringify(req.body, null, 4));
}); 
```

# android - ListView 错误无法启动活动 ComponentInfo

> ID：11625520
> 
> 赞同：1
> 
> 时间：2012-07-24T06:47:31.087
> 
> 标签：android, listview

每件事似乎都是正确的，但无法找出错误的原因.. 我关注了这个[博客](http://www.vogella.com/articles/AndroidListView/article.html)。定义行的布局并在适配器中使用它

包 com.joshclemm.android.tabs；

```
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class ArchivedAudio_List extends ListActivity {
    static final String[] audiovalue = new String[] { "C by balguruswamy",
            "C++ by kanitkar", "java By Dr.kanitkar", ".net by Dr. joshi",
            "Sociology by Dr.Sarnaik", "Physoclgy by Dr.Batra" };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setListAdapter(new ArrayAdapter<String>(ArchivedAudio_List.this,
                R.layout.listview_with_img, R.id.label, audiovalue));
        ListView archiveaudio_listview = (ListView) findViewById(R.id.archiveaudio_list_listview);

        archiveaudio_listview.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                // TODO Auto-generated method stub
                Toast.makeText(getApplicationContext(),
                        ((TextView) arg1).getText() + "clicked",
                        Toast.LENGTH_LONG).show();
                startActivity(new Intent(getApplicationContext(),
                        ArchiveAudio.class));

            }
        });

    }
} 
```

listview_with_img.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

   <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="20px" >
    </TextView>

   <ImageView
        android:id="@+id/icon"
        android:layout_width="22px"
        android:layout_height="22px"
        android:layout_marginLeft="4px"
        android:layout_marginRight="10px"
        android:layout_marginTop="4px"
        android:src="@drawable/play" >
    </ImageView>
</LinearLayout> 
```

这是错误日志

```
07-24 06:35:07.809: E/AndroidRuntime(564): FATAL EXCEPTION: main
07-24 06:35:07.809: E/AndroidRuntime(564): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.joshclemm.android.tabs/com.joshclemm.android.tabs.CustomTabActivity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.joshclemm.android.tabs/com.joshclemm.android.tabs.ArchivedAudio_List}: java.lang.NullPointerException
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.os.Looper.loop(Looper.java:137)
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.app.ActivityThread.main(ActivityThread.java:4340)
07-24 06:35:07.809: E/AndroidRuntime(564):  at java.lang.reflect.Method.invokeNative(Native Method)
07-24 06:35:07.809: E/AndroidRuntime(564):  at java.lang.reflect.Method.invoke(Method.java:511)
07-24 06:35:07.809: E/AndroidRuntime(564):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-24 06:35:07.809: E/AndroidRuntime(564):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-24 06:35:07.809: E/AndroidRuntime(564):  at dalvik.system.NativeStart.main(Native Method)
07-24 06:35:07.809: E/AndroidRuntime(564): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.joshclemm.android.tabs/com.joshclemm.android.tabs.ArchivedAudio_List}: java.lang.NullPointerException
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:1796)
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:682)
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.widget.TabHost.setCurrentTab(TabHost.java:346)
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.widget.TabHost.addTab(TabHost.java:236)
07-24 06:35:07.809: E/AndroidRuntime(564):  at com.joshclemm.android.tabs.CustomTabActivity.onCreate(CustomTabActivity.java:42)
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.app.Activity.performCreate(Activity.java:4465)
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
07-24 06:35:07.809: E/AndroidRuntime(564):  ... 11 more
07-24 06:35:07.809: E/AndroidRuntime(564): Caused by: java.lang.NullPointerException
07-24 06:35:07.809: E/AndroidRuntime(564):  at com.joshclemm.android.tabs.ArchivedAudio_List.onCreate(ArchivedAudio_List.java:28)
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.app.Activity.performCreate(Activity.java:4465)
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-24 06:35:07.809: E/AndroidRuntime(564):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
07-24 06:35:07.809: E/AndroidRuntime(564):  ... 21 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:52:05.650

您正在使用 ListActivity 所以不要使用

```
ListView archiveaudio_listview = (ListView) findViewById(R.id.archiveaudio_list_listview); 
```

像这样使用它

```
ListView archiveaudio_listview = getListView(); 
```

检查[这个](http://www.mkyong.com/android/android-listview-example/)和[这个](http://www.higherpass.com/Android/Tutorials/Creating-Lists-Using-The-Android-Listactivity/)

而不是 onitemclick 你可以使用它。

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {

    //get selected items
    String selectedValue = (String) getListAdapter().getItem(position);
    Toast.makeText(this, selectedValue, Toast.LENGTH_SHORT).show();

} 
```

# scala - 如何使用 SBT 下载用户提供的 Scala 版本？

> ID：11625523
> 
> 赞同：2
> 
> 时间：2012-07-24T06:47:34.077
> 
> 标签：scala, dependencies, version, sbt, sbt-android-plugin

我正在尝试编写一个新类，同时扩展 Jan Berkel 的 Android 插件，我想使用它提供将整个 scala 库推送到有根手机的功能。

到目前为止，我的代码使用了您已经下载到计算机上的本地版本的 Scala，但是，如果它不存在，我希望能够下载一个版本的 Scala。

这是代码的相关部分：

```
def makePermission(version: String) {  
    val home = JSystem.getProperty("user.home")
    val scalaFolder = new JFile(home + "/.sbt/boot/scala-" + version)

    if (!scalaFolder.exists) {
        // TODO: Try to download the Scala version in "version"
    }

    val permission = new JFile(scalaFolder, "scala-library.xml")

    if (scalaFolder.exists && !permission.exists) {
        val writer = new PrintWriter(permission)
        writer.println("<?xml version=\"1.0\" encoding=\"utf-8\"?>")
        writer.println("")
        writer.println("<permissions>")
        writer.println("    <library")
        writer.println("        name=\"scala-library-" + version + "\"")
        writer.println("        file=\"/system/framework/scala-library-" + version + "\"")
        writer.println("    />")
        writer.println("</permissions>")
        writer.close
    }
} 
```

例如，像这样调用我的函数：
`makePermission("2.9.1")`将看到我有 Scala 2.9.1 并在`scala-2.9.1`文件夹中创建 scala-library.xml。

这样做：
`makePermission("2.8.1")`会看到我没有 Scala 2.8.1，下载它并在`scala-2.8.1`文件夹中创建 scala-library.xml。

但是，这样做：
`makePermission("3.0.0")`会看到我没有 Scala 3.0.0，尝试下载它但看到它不存在并跳过其余部分。

我很困惑如何做这`TODO`部分，所以任何帮助表示赞赏。:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T17:51:30.267

> 我正在尝试在扩展 Jan Berkel 的 Android 插件的同时编写一个新类

这听起来像 sbt 0.7，但我们假设您使用的是 sbt 0.12。你可以依靠 sbt 本身来获取任何已发布的 Scala 版本：

```
> ++2.10.2 
```

然后你可以通过查看 来获取 scala-library.jar `fullClasspath in Runtime`。从外壳来看，它是：

```
> show runtime:full-classpath
[info] List(Attributed(~/foo/app/target/scala-2.9.2/classes), Attributed(~/foo/library/target/scala-2.9.2/classes), Attributed(/~/foo/.sbt/0.12.0/boot/scala-2.9.2/lib/scala-library.jar)) 
```

创建一个依赖于的任务`fullClasspath in Runtime`，并在其中提取 scala-library.jar 的完整路径。

# php - 调用未定义的函数 objectsIntoArray() -PHP

> ID：11625526
> 
> 赞同：0
> 
> 时间：2012-07-24T06:47:41.450
> 
> 标签：php, xml, xml-parsing

我正在尝试`objectsIntoArray()`使用 PHP 将 xml 解析为数组，但出现错误`Call to undefined function objectsIntoArray()`。

请任何人帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T06:55:08.390

~~SimpleXML Extension 丢失、未安装，或者您的 PHP 版本或 SimpleXML 版本错误。~~

~~*   检查`phpinfo()`并检查[http://www.php.net/manual/en/simplexml.installation.php](http://www.php.net/manual/en/simplexml.installation.php)~~
2.  ~~邮政编码~~

所以`objectsIntoArray()`它只是一个手工制作的功能。它不是内置在 php 中的，因此您必须手动包含它。

```
<?php 

    function objectsIntoArray($arrObjData, $arrSkipIndices = array()){
        $arrData = array();
        if (is_object($arrObjData)) 
            $arrObjData = get_object_vars($arrObjData);

        if (is_array($arrObjData)) 
            foreach ($arrObjData as $index => $value) {
                if(is_object($value) || is_array($value)) 
                    $value = objectsIntoArray($value, $arrSkipIndices); 

                if(in_array($index, $arrSkipIndices)) 
                     continue;

                $arrData[$index] = $value;
            }

        return $arrData;
    }

    $xmlString = "
        <html>
            <head>
                <link blabla='whargarbl' />
            </head>
        </html>
    "; 
    $xmlObject = simplexml_load_string($xmlString); 
    $arrayXml = objectsIntoArray($xmlObject);
    die(var_dump($arrayXml));
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:54:16.960

`objectsIntoArray()`不是 PHP 中的标准内置函数，因此如果您没有自己编写它，那么它确实是未定义的。

如果您已经编写了它，那么您可能没有包含包含该函数的适当文件。

我注意到有人在 SimpleXML 类的 PHP 手册页的注释中发布了一个同名函数——请参阅[http://php.net/manual/en/book.simplexml.php](http://php.net/manual/en/book.simplexml.php)并搜索`objectsIntoArray`. 如果这是您正在寻找的功能，您可以直接从这里复制+粘贴并使用它。

# php - Auth 组件，除用户以外的控制器

> ID：11625527
> 
> 赞同：0
> 
> 时间：2012-07-24T06:48:00.423
> 
> 标签：php, cakephp, cakephp-1.2

我没有用户表。我有一张客户表。似乎 Cakephp Auth 无法识别除 User 之外的任何其他表。有没有办法绕过这个错误？

如果我尝试使用`$this->Auth->User('role')`- 它工作得很好。但是我所有的身份验证凭据都在 Customer 表下。请帮忙。

我在下面收到此错误

```
Fatal error: Call to undefined method AuthComponent::Customer() in
/Applications/MAMP/htdocs/development03/app/app_controller.php on line 56 
```

编码：

```
function beforeFilter() {
    $this->set('admin', $this->_isAdmin());
}

function _isAdmin() {
    $admin = FALSE;
    if ($this->Auth->Customer('role') == 'admin') {
        $admin = TRUE;
    }
    return $admin;  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:32:55.270

假设您想要管理员表，其中**用户名**是字段**电子邮件**，**密码**是字段**密码**：

在您的 AppController.php 中：

```
public $components = array('Session',
        'Auth' => array('authenticate' => array('Form' => array( 'userModel' => 'Administrator',
                                                         'fields' => array(
                                                                              'username' => 'email',
                                                                              'password' => 'password'
                                                                              )
                                                            )
                                            ),
                'authorize' => array('Controller'),
                'loginAction' => array('controller' => 'administrators', 'action' => 'login'),
                'loginRedirect' => array('controller' => 'Home', 'action' => 'index'),
                'logoutRedirect' => array('controller' => 'Home', 'action' => 'index'),
          ),             
    ); 
```

在 AppController.php 中也添加这个：

```
public function isAuthorized($user){
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:56:24.700

你将不得不使用`userModel => ModelName`财产。您的 AppController 应如下所示：

```
class AppController extends Controller
{    
    public $components = array(
        'Auth' => array('authenticate' => array('Form' => array('userModel' =>'Customer', 
                                                                'fields' => array('username' => 'USER_LOGINNAME', 'password' => 'USER_PASSWORD'
                                                                             )
                                                            )
                                            )
                    )
);
 /*...... Your code ............*/
} 
```

[此链接](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#configuring-authentication-handlers)可能会帮助您解决错误。

# android - 在android中的活动之间导航

> ID：11625528
> 
> 赞同：3
> 
> 时间：2012-07-24T06:48:03.693
> 
> 标签：android

有人可以告诉我以下是如何工作的：在应用程序中有类似标题的标题。因此，您可以向下滚动屏幕以查看其所有信息，然后将其扔到左侧并查看另一个屏幕，例如消息。vk.com 的这个功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:11:29.090

听起来您所追求的是[ListFragment](http://developer.android.com/reference/android/app/ListFragment.html)和与[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)一起使用的[Fragment](http://developer.android.com/guide/components/fragments.html)。ViewPager 为您提供左右滑动的功能，而 Fragment 类是一种非常好的实现方式，因为它们是可重用的并且可以放置在不同的活动中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:54:41.307

你试过使用[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)吗？您可以在 Play 商店应用程序中看到它的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T06:55:16.160

您需要使用 ViewPager 类。我的建议 - 使用片段。

# file - 如何从分隔类型文件中的特定行打印特定字段

> ID：11625533
> 
> 赞同：7
> 
> 时间：2012-07-24T06:48:15.173
> 
> 标签：file, bash, shell, csv, awk

我有一个排序的分隔类型文件，我想在特定行中提取特定字段。

**这是我的输入文件：`somefile.csv`**

```
efevfe,132143,27092011080210,howdy,hoodie
adfasdfs,14321,27092011081847,howdy,hoodie
gerg,7659876,27092011084604,howdy,hoodie
asdjkfhlsdf,7690876,27092011084688,howdy,hoodie
alfhlskjhdf,6548,27092011092413,howdy,hoodie
gerg,769,27092011092415,howdy,hoodie
badfa,124314,27092011092416,howdy,hoodie
gfevgreg,1213421,27092011155906,howdy,hoodie 
```

我想提取`27092011084688`（来自**第 4 行**，**第 3 列**的值）。

我用过`awk 'NR==4'`，但它给了我整个第 4 行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T06:50:33.423

非常坦率的：

```
awk -F',' 'NR == 4 { print $3 }' somefile.csv 
```

用作`,`字段分隔符，取记录号 4 并在 中打印字段 3 `somefile.csv`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T06:50:21.763

```
$ sed -n "4p" somefile.csv | cut -d, -f3 
```

**编辑**

这是什么？

*   `-n`正常输出匝数
*   `4p`打印第 4 行
*   `-d,`用作`cut`分隔`,`符
*   `-f3`打印`cut`第三个字段

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T06:51:08.543

一种使用方式`awk`：

```
awk -F, 'NR==4 { print $3 }' file.txt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T06:51:58.853

使用以下内容：

```
awk -F ',' 'NR==4 {print $3}' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T09:17:29.980

`perl`在 csv 文件的第 4 行打印元素 3 的替代方法：

```
perl -F, -lane 'print $F[2] if $. == 4' somefile.csv 
```

# javascript - 从 ajaxed 页面获取 js 变量

> ID：11625540
> 
> 赞同：0
> 
> 时间：2012-07-24T06:48:39.203
> 
> 标签：javascript, jquery, ajax

我的问题是这样的，如果我有一个页面说 index.HTML 有一些脚本，就像......

```
<script type="text/JavaScript">
$(document).ready(function() {
    Var buttonBox = {};
})
</script> 
```

显然需要更多，我试图让这个简单。然后我使用 ajax 从数据库中检索一些数据并填写 div 的内容，但是在我的返回页面中我有另一个脚本标签，比如......

```
<script type="text/JavaScript">
$(function() {
    buttonBox.start = "some variable or string";
})
</script> 
```

连同 HTML 内容。为什么 buttonBox.start 在 index.HTML 主页面中不可用？有没有办法让它可用？将我的服务器页面的输出格式化为一个巨大的 json 对象，然后通过它进行解析以设置每个需要的变量以及 HTML 内容是实现这一目标的最佳/唯一方法吗？

感谢您的帮助，如果您需要更多信息，我很乐意提供，为了方便起见，我只是将其缩小。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T06:54:12.197

您可以将 buttonBox 添加到窗口并使其`global`：

```
$(document).ready(function() {
     window.buttonBox = {};
});

$(function() {
    window.buttonBox.start = "some variable or string";
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:03:30.903

对于每个标签中的每个函数，如果该函数不是全局的，则不能重用。要使函数成为全局函数，您应该使用 window. 此外，您可以将此函数放入外部文件并加载

# wcf - WCF 客户端，AllowCookies 并清除任何当前 cookie？

> ID：11625542
> 
> 赞同：0
> 
> 时间：2012-07-24T06:49:27.283
> 
> 标签：wcf, cookies, forms-authentication

我有一个 WPF 客户端，它使用 WCF 调用 IIS 中托管的服务。我的 WCF 客户端具有 AllowCookies='true' 以便 IIS 正在使用的表单身份验证 cookie 自动与每个 WCF 调用一起来回传递。这一切都很好。

但是我需要能够清除我的 WCF 客户端正在缓存的任何表单身份验证 cookie，以便我的下一个请求不会经过身份验证。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:36:11.293

~~在 wcf 客户端上，您可以访问~~

 ~~```
 HttpContext.Current.Request 
```~~ 

现在这个 Request 对象包含 cookie。您可以遍历 cookie 集合并删除您需要的那个。

> foreach(var cookie in request.Cookies) { // }

~~[代码项目](http://www.codeproject.com/Articles/190806/Send-Cookies-When-Making-WCF-Service-Calls)中的一篇优秀文章，解释了 WCF 客户端上的 cookie 管理~~

**更新**

HttpContext 仅在服务器端可用，因此 Phil 指出我之前的答案不正确。

正确的方法会很笨拙，因为您已经掌握了 HttpRequest 本身

```
MyWebServiceClient client = new MyWebServiceClient();

using ( new OperationContextScope( client.InnerChannel ) )
{
    HttpRequestMessageProperty request = new HttpRequestMessageProperty();
    //get the instance of your AuthCookie and make it blank
    request.Headers["AuthCookie"] = "";

    OperationContext.Current.OutgoingMessageProperties[
        HttpRequestMessageProperty.Name] = request;

    client.InvokeSomeMethod();
} 
```

[在这里](http://netpl.blogspot.co.uk/2011/11/managing-cookies-in-wcf-client.html)找到了这个例子

# php - PHP mail() 在窗口中不起作用？

> ID：11625545
> 
> 赞同：1
> 
> 时间：2012-07-24T06:49:33.380
> 
> 标签：php, window, wamp, phpmailer, sendmail.exe

我有一个简单的 PHP 文件，它将使用 mail() 发送电子邮件。我在 Window 服务器机器中使用 WAMP 服务器。但是，当我尝试运行代码时，它返回错误，我试图以此链接 [http://www.php.net/manual/en/ref.mail.php#77499中给出的方式解决错误](http://www.php.net/manual/en/ref.mail.php#77499)

但是，它仍然不起作用，系统响应以下错误消息：

```
Warning: mail(): &quot;sendmail_from&quot; not set in php.ini or custom &quot;From:&quot; header missing in C:\wamp\www\NFC\notification.php on line 56 
```

所以想问一下链接中提供的方法是否正确，如果不正确，那我该如何解决问题并成功发送电子邮件。
下面是我的 php 文件中的代码，我正在尝试向自己发送一封电子邮件，但正在打印“失败”

```
$subject = "Simple mail";
$message = "This is a test mail";
$from = "me@test.com";
$header = "Form: ".$from;

if(mail($from, $subject, $message, $header))
   print "success<br>";
else 
   print "fail<br>"; 
```

我只是按照上面链接的方式，所以这里是php.ini

```
[mail function]
; For Win32 only.
; SMTP = 

; For Win32 only.
; sendmail_from = 

; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
; sendmail_path = "C:\wamp\sendmail\sendmail.exe -t"

; Force the addition of the specified parameters to be passed as extra parameters
; to the sendmail binary. These parameters will always replace the value of
; the 5th parameter to mail(), even in safe mode.
; mail.force_extra_parameters = 
```

下面是 sendmail.ini：

```
[sendmail]

; you must change mail.mydomain.com to your smtp server,
; or to IIS's "pickup" directory.  (generally C:\Inetpub\mailroot\Pickup)
; emails delivered via IIS's pickup directory cause sendmail to
; run quicker, but you won't get error messages back to the calling
; application.

smtp_server=mail.test.com

; smtp port (normally 25)

smtp_port=25

; SMTPS (SSL) support
;   auto = use SSL for port 465, otherwise try to use TLS
;   ssl  = alway use SSL
;   tls  = always use TLS
;   none = never try to use SSL

smtp_ssl=auto

; the default domain for this server will be read from the registry
; this will be appended to email addresses when one isn't provided
; if you want to override the value in the registry, uncomment and modify

;default_domain=test.com

; log smtp errors to error.log (defaults to same directory as sendmail.exe)
; uncomment to enable logging

error_logfile=error.log

; create debug log as debug.log (defaults to same directory as sendmail.exe)
; uncomment to enable debugging

;debug_logfile=debug.log

; if your smtp server requires authentication, modify the following two lines

auth_username=
auth_password=

; if your smtp server uses pop3 before smtp authentication, modify the 
; following three lines.  do not enable unless it is required.

pop3_server=mail.test.com
pop3_username=me@test.com
pop3_password=abcdef

; force the sender to always be the following email address
; this will only affect the "MAIL FROM" command, it won't modify 
; the "From: " header of the message content

force_sender=me@test.com

; force the sender to always be the following email address
; this will only affect the "RCTP TO" command, it won't modify 
; the "To: " header of the message content

force_recipient=

; sendmail will use your hostname and your default_domain in the ehlo/helo
; smtp greeting.  you can manually set the ehlo/helo name if required

hostname= 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:00:53.823

首先，正如信息消息所说，您必须确保在发送电子邮件时具有“发件人：”标题。

那么，您确定您的邮件服务器在端口 25 上正常运行吗？您可以使用`netstat`命令对此进行测试。

如果你只是想测试邮件，你也可以试试这个： [http ://www.toolheap.com/test-mail-server-tool/](http://www.toolheap.com/test-mail-server-tool/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-24T06:56:56.940

尝试这个

```
<?php
$to      = 'nobody@example.com';
$subject = 'the subject';
$message = 'hello';
$headers = 'From: webmaster@example.com' . "\r\n" .
   'Reply-To: webmaster@example.com' . "\r\n" .
   'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers); 
```

?>

# ios - Sharekit Facebook - “授权时出错”

> ID：11625549
> 
> 赞同：0
> 
> 时间：2012-07-24T06:49:44.220
> 
> 标签：ios, xcode, facebook, sharekit

更新：

这是 Facebook 设置的问题。我刚刚删除了 iOS 应用程序设置，一切正常。

* * *

我已经用我的 iOS 应用程序实现了 ShareKit，没有任何问题。遵循安装的所有步骤，包括 Facebook 的 SSO 部分。

当按下分享按钮时，我可以发送电子邮件或推文。Facebook曾经工作过，现在它停止了。我第一次授权该应用程序并且能够共享。然后我从 Facebook 删除了授权，当按下 Sharekit 上的按钮时，它显示“保存到 Facebook”，切换到 Facebook 应用程序，然后返回我的应用程序并显示“授权时出错”消息。

我尝试使用两个不同的 Facebook 帐户。知道在哪里寻找问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:48:08.600

不幸的是，Nate Weiner 的原始 ShareKit 并没有经常更新。也许你应该看看 ShareKit 2.0。我在我的应用程序中集成它没有任何问题。至少 Twitter 和 Facebook 没有问题，这就是我目前使用的全部。

# javascript - 当通过jQuery调整容器位置时，JS拖动滑块停止工作

> ID：11625551
> 
> 赞同：0
> 
> 时间：2012-07-24T06:49:51.517
> 
> 标签：javascript, jquery

我正在使用基于 JS 的 Drag Slider [DragDealer](http://code.ovidiu.ch/dragdealer/)。滑块 div 放置在使用 jQuery 运行的内容滑块中。只要其父 div 未设置动画以向左移动 200 像素，拖动滑块就可以工作。

小提琴：http: [//jsfiddle.net/gentrobot/9b5Xg/3/](http://jsfiddle.net/gentrobot/9b5Xg/3/)

**HTML：**

```
<div style="position:relative;width:400px;height:100px;overflow:hidden;">
    <div id="1" style="width:200px;float:left;position:absolute;left:0px;">
        Test
    </div>
    <div id="2" style="width:200px;float:left;position:absolute;left:200px;">
       <!-- Drag Slider div starts -->
        <div id="my-slider" class="dragdealer">
            <div class="red-bar handle">drag me</div>
        </div>
       <!-- Drag Slider div ends -->
    </div>
</div>
<a href="#" id="clk">Click to slide</a> 
```

**jQuery**（Dragdealer 的 JS 除外）：

```
$('#clk').click(function(){
    $('#1').animate({left:'-200px'});
    $('#2').animate({left:'0px'});
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:15:01.797

如果您将它向右拖动足够长的时间，它就可以工作，它曾经是以前的位置。

但是，您可以指定一个重新初始化事物的回调参数。

```
$('#2').animate({left:'0px'}, function(){
    new Dragdealer('my-slider'); 
}); 
```

通常，您应该再次附加元素以避免多次使用相同的侦听器。这受插件编写方式的影响，但你可以这样做只是为了站在同一边。

```
$('#2').animate({left:'0px'}, function(){
    var t = $(this);
    var random_placeholder = $('<div></div>').insertBefore(t);
    $(this).insertAfter(random_placeholder);
    random_placeholder.remove(); 
    new Dragdealer('my-slider'); 
}); 
```

# c# - 没有时间部分的日期时间比较？

> ID：11625554
> 
> 赞同：5
> 
> 时间：2012-07-24T06:50:12.250
> 
> 标签：c#, .net, linq, datetime, date-comparison

我写了这段代码。但我想忽略时间，我只想比较一天。

```
from s in sayac_okumalari
where s.okuma_tarihi == startDate && s.sayac_id == sayac_id
group s by new { date = new DateTime(((DateTime)s.okuma_tarihi).Year, ((DateTime)s.okuma_tarihi).Month, ((DateTime)s.okuma_tarihi).Day, ((DateTime)s.okuma_tarihi).Hour, 1, 1) } into g
select new
{
     okuma_tarihi = g.Key.date,
     T1 = g.Sum(x => x.toplam_kullanim_T1),
     T2 = g.Sum(x => x.toplam_kullanim_T2),
     T3 = g.Sum(x => x.toplam_kullanim_T3)
}; 
```

例如：

```
25.02.1987 == 25.02.1987 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-24T06:51:42.823

使用`s.okuma_tarihi.Value.Date == startDate.Date`. 这应该允许您仅比较 Date 组件。

**更新**从评论中的讨论看起来用户正在使用 NullableType。因此更新了 NullableType 的解决方案。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-24T06:52:20.873

使用`Date`DateTime 的属性。例如，

```
var date= DateTime.Now.Date; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T07:11:43.703

因为您可以转换`s.okuma_tarihi`为 DateTime，所以我认为您可以这样做：

```
var sonuc = from s in sayac_okumalari
        where (DateTime)s.okuma_tarihi.Date == startDate.Date && s.sayac_id == sayac_id
        group s by new { date = new DateTime(((DateTime)s.okuma_tarihi).Year, ((DateTime)s.okuma_tarihi).Month, ((DateTime)s.okuma_tarihi).Day, ((DateTime)s.okuma_tarihi).Hour, 1, 1) } into g
        select new
        {
             okuma_tarihi = g.Key.date,
             T1 = g.Sum(x => x.toplam_kullanim_T1),
             T2 = g.Sum(x => x.toplam_kullanim_T2),
             T3 = g.Sum(x => x.toplam_kullanim_T3)
        }; 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-03T20:10:09.723

尝试在 DateTime 对象上使用 Date 属性将是一个很好的简单解决方案。

```
string AdmissionDate = "10/15/2017" // mm/dd/yyyy
string DepartureDate = "10/14/2017" // mm/dd/yyyy

if (Convert.ToDateTime(AdmissionDate).Date > Convert.ToDateTime(DepartureDate).Date)
{
    // Validation: Admission Date can not be greater than Departure Date... 
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-07-11T03:01:04.707

**试试这个...**

```
 try
        {
         DateTime Date1= DateTime.ParseExact(txtBox1.Text,"dd/MM/yyyy",null);
         DateTime Date2 = DateTime.ParseExact(txtBox2.Text, "dd/MM/yyyy", null);

          if (Date1 > Date2) 
          {
           //........
          }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        } 
```

# android - 如何在 xml 中显示数学幂值

> ID：11625557
> 
> 赞同：2
> 
> 时间：2012-07-24T06:50:23.527
> 
> 标签：android, xml

我有一个正在解析和显示值的 xml。

```
<question>
    The frequency of tuning fork is 1000 Hz and velocity of sound in air 300 ms-1.The distance travelled by sound while the fork executes 500 oscillations is
</question> 
```

如您所见，300 ms 的幂 -1 是精确值。但是在解析时不显示。

我也需要显示`10^8 as (10 to the power 8 )`

如何显示这些值。Itried 包括 ASCII 代码，但它不起作用。

请提前帮助和感谢。

# java - java中的Inet6Address类：全局IPv6地址验证

> ID：11625558
> 
> 赞同：3
> 
> 时间：2012-07-24T06:50:25.777
> 
> 标签：java, ipv6

由于 InetAddress 没有方法来确定给定的 IPv6 地址是否是全局地址，我可以假设给定的 IPv6 地址是全局的，如果它不是站点本地和链接本地？

```
Inet6Address addr = new Inet6Address(str);
boolean isGlobal = !addr.isSiteLocalAddress && !addr.isLinkLocalAddress; 
```

这是真的 ？我可以安全地使用它吗？或者有没有其他更好的方法来确定给定的 IPv6 地址是全局地址？

# grails - 打开同一个网页，但内容不同

> ID：11625563
> 
> 赞同：0
> 
> 时间：2012-07-24T06:50:42.147
> 
> 标签：grails

我正在开发一个通过服务器提供的 webapp。它的索引显示了一些商店交易，其中包含所有这些交易和 ID。在 .gsp 中，我有以下代码：

```
<div id="content">
<g:each in='${promos}' var='promo'>
<div id="up_box"></div>
<div class="deal_container">
    <div class="images_container"><img src="${createLink(action:'showImage',controller:'image',id:promo.fotoPrincipal.id)}" width="120" height="105" />

    </div>

    <g:link controller='promotion' action='openPromo' params="[promoid:promo.id]">

   <div class="oferta">${promo.name}</div>
   </g:link>
    <g:link controller='promotion' action='openPromo' params="[promoid:promo.id]">
    <div class="flecha">
     </div>
    </g:link>

</div> 
```

这意味着，当我单击其中一个链接时，它将打开一个如下所示的网址：

```
app/promotion/openPromo/3 
```

如果单击了 ID 为“3”的交易。我有一个“一般”交易详情页面。我希望该页面始终加载，并根据用户单击的交易动态地完成其详细信息。我怎样才能做到这一点？

我不知道我的解释是否清楚，如果我还没有，请询​​问。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:22:54.543

这两个链接都将由 中的`openPromo`操作处理，并将作为促销的`PromotionController`传递。`id``promoid`

然后，您可以加载适当的促销以及您希望用户查看的任何其他相关优惠，并将这些优惠提供给视图。例如：

```
class PromotionController {

  def openPromo() {
    Promo promo = Promo.get(params.promoid)

    // Load any other relevant data or offers

   render (view:'openPromo', model:[promo:promo, <any other model data here>]
  }
} 
```

然后，您可以在`gsp`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:14:17.497

您可以将一般信息添加到模板中，然后像这样从控制器渲染它

```
// render a template to the response for the specified model
def theShining = new Book(title: 'The Shining', author: 'Stephen King')
render(template: "book", model: [book: theShining]) 
```

您在 Grails 文档的此链接中获得了有关渲染的更多信息。

[http://grails.org/doc/latest/ref/Controllers/render.html](http://grails.org/doc/latest/ref/Controllers/render.html)

这很容易做到，您可以像第一个那样添加一个 createLink 调用将呈现该模板的操作。

希望它有所帮助；）祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:37:48.923

在问了我的同事之后，我这样做了：

```
def openPromo() {
    Promotion promo = Promotion.get(params.promoid)
    [promo:promo]
} 
```

几乎你所说的大卫，但没有渲染，如果我命名`openPromo`我的 gsp。

谢谢！

# java - JSF 表达式语言的代码风格指南

> ID：11625564
> 
> 赞同：2
> 
> 时间：2012-07-24T06:50:44.243
> 
> 标签：java, jsf, coding-style, el, code-standards

是否有用于格式化 JSF 表达式语言的任何代码约定/标准或建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:29:10.020

你应该尝试使用[Java2Html](http://www.java2html.de/)代码美化器。它也可以与eclipse一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:32:17.493

我想 HTML 约定也可以应用于 JSF EL，或者至少我正在这样做。只需缩进并很好地组织您的代码；IDE 的自动缩进功能也应该可以帮助您：NetBeans中的++和Eclipse 中的`Alt`+ 。`Shift``F``Ctrl``I`

# android - 在 Android 中打开相机时音频播放停止？

> ID：11625565
> 
> 赞同：0
> 
> 时间：2012-07-24T06:50:48.303
> 
> 标签：android, audio, android-ndk, android-camera

我正在开发一个需要音频/视频聊天的应用程序...我的问题是当我开始捕获视频时，音频播放完全停止。

**技术说明** 我使用 AudioTrack 类和 AudioTrack.OnPlaybackPositionUpdateListener 进行音频播放。我使用 Camera 和 Camera.PreviewCallBack 进行视频录制。

现在只要相机启动，AudioTrack 类的回调就会停止工作。我能做些什么来处理这个问题？我有 HTC 的设备，它有 Android2.2。

**编辑** 由于我无法在此处发布完整代码...（我无权访问视频模块的代码），因此我在此处列出了该场景：-

1.  音频聊天已经开始，音频正在播放，这意味着 onPeriodicNotification() 被正确调用。

公共无效开始（）{

```
 bufferSize = AudioTrack.getMinBufferSize(sampleRateInHz, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_16BIT);

    if (bufferSize != AudioTrack.ERROR_BAD_VALUE && bufferSize != AudioTrack.ERROR) {
        audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC, this.sampleRateInHz, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_16BIT,
                this.bufferSize, AudioTrack.MODE_STREAM);
        if (audioTrack != null && audioTrack.getState() == AudioTrack.STATE_INITIALIZED) {
            Log.i(LOG_TAG, "Audio Track instance created buffer Size : " + this.bufferSize);

            audioTrack.setPositionNotificationPeriod(320);
            audioTrack.setPlaybackPositionUpdateListener(this);

            // init All the jitter variables
            initVariables();
            // short[] tempBuf = shortBuffer;//new short[bufferSize / 2];
            audioTrack.write(shortBuffer, 0, shortBuffer.length);
            audioTrack.write(shortBuffer, 0, shortBuffer.length);
            audioTrack.write(shortBuffer, 0, shortBuffer.length);
            audioTrack.write(shortBuffer, 0, shortBuffer.length);
            audioTrack.write(shortBuffer, 0, shortBuffer.length);
            audioTrack.write(shortBuffer, 0, shortBuffer.length);
            // start playback of the audioTrack
            audioTrack.play();

        } else {
            Log.e(LOG_TAG, "Unble to create AudioTrack instance");
        }
    } else {
        Log.e(LOG_TAG, "Unable to get the minimum buffer size");
    }
}

@Override
    public void onPeriodicNotification(AudioTrack track) {
        try {
            fillAudio(shortBuffer);
            track.write(shortBuffer, 0, Constants.FRAME_SIZE / 2);
        } catch (NullPointerException nex) {
            nex.printStackTrace();
            Log.e(LOG_TAG, "Null Pointer inside periodic notification");
        }} 
```

fillAudio() 是一个填充缓冲区的函数...

1.  用户点击获取摄像头的视频聊天按钮`Camera.open()`，设置参数，回调，稍后使用`camera.startPreview()`..启动回调

OnTouchListener cameraSurfaceOnTouch = new OnTouchListener() { int x = 0; 整数 y = 0; int dx = 0；int dy = 0; 布尔移动=假；

```
 @Override
    public boolean onTouch(View v, MotionEvent event) {
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            x = (int) event.getX();
            y = (int) event.getY();
            dx = (int) event.getX() - v.getLeft();
            dy = (int) event.getY() - v.getTop();
            moving = true;

            return true;
        case MotionEvent.ACTION_MOVE:
            if (moving) {
                x = (int) event.getX() - dx;
                y = (int) event.getY() - dy;

                x = Math.max(x, 0);
                x = Math.min(x, getWindowManager().getDefaultDisplay().getWidth() - v.getWidth());

                y = Math.max(y, 0);
                y = Math.min(y, getWindowManager().getDefaultDisplay().getHeight() - v.getHeight());

                v.layout(x, y, x + v.getWidth(), y + v.getHeight());
            }
            return true;
        case MotionEvent.ACTION_UP:
            x = (int) event.getX() - dx;
            y = (int) event.getY() - dy;

            x = Math.max(x, 0);
            x = Math.min(x, getWindowManager().getDefaultDisplay().getWidth() - v.getWidth());

            y = Math.max(y, 0);
            y = Math.min(y, getWindowManager().getDefaultDisplay().getHeight() - v.getHeight());

            // v.layout(x ,y,x + v.getMeasuredWidth() , y
            // +v.getMeasuredHeight());
            moving = false;
            return true;
        }
        // v.invalidate();
        return false;
    }
};

Callback videoPlayerCallBack = new Callback() {
    public void surfaceDestroyed(SurfaceHolder holder) {
        stopCapturerVideo();
        if (converterID != -1 && x264Wrapper != null) {
            x264Wrapper.destroyVideoFormate(converterID);
            converterID = -1;
        }
    }
private void startCapturerVideo() {
        if (m_CameraStatus == false) {
            this.m_CameraStatus = this.videoCapturer.startCamera();
        }
        synchronized (this.m_videoCapturerBufferList) {
            this.m_videoCapturerBufferList.clear();
        }

        byte[] tmp = new byte[10];
        tmp[0] = Constants.VIDEO_SESSION_STARTED;

        short width = 160;
        short height = 120;

        byte[] mIndex = CommonMethods.toByteArray(session.getSelfMeetingIndex());
        byte[] aWidth = CommonMethods.toByteArray(width);
        byte[] aHeight = CommonMethods.toByteArray(height);

        tmp[1] = mIndex[0];
        tmp[2] = mIndex[1];

        tmp[3] = aWidth[0];
        tmp[4] = aWidth[1];

        tmp[5] = aHeight[0];
        tmp[6] = aHeight[1];

        tmp[7] = 0;
        session.add(tmp, 8, 3);

        aWidth = null;
        aHeight = null;
        tmp = null;

        this.stopThread = false;
        this.encodeAndSendThread = new Thread(encodeAndSendRun);
        this.encodeAndSendThread.start();
        this.videoCapturer.startCaptureringVideo();

    }
   public boolean startCaptureringVideo() {
        boolean cameraStatus = true;
        Log.e(LOG_TAG,"startCaptureringVideo called ");
        if(this.mCamera != null)
        {
            try {
//              this.mCamera.setPreviewDisplay(this.videoCaptureViewHolder);
                this.mCamera.startPreview();
                } 
            catch (Throwable e) {
                cameraStatus = false;
                mCamera.release();
                mCamera = null;

                }
        }
        else
        {
            cameraStatus =false;
        }
        return cameraStatus;
    } 
```

1.  `onPeriodicNotification()`即使我停止并释放相机，在第 2 步之后也不会再次调用。

这可能是什么原因，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-25T15:30:23.183

查看 AudioManager 的`onAudioFocusChange`回调：

```
@Override
public void onAudioFocusChange(int focusChange) {
    if (focusChange == AudioManager.AUDIOFOCUS_LOSS_TRANSIENT) {
        //this audio focus change is made when you use the camera
    }
} 
```

当音频焦点改变时，也许你正在暂停音频，检查一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:44:12.277

我在 2 或 3 秒后停止了相机视频录制声音的类似问题。我意外地发现它是在 Android 手机 HTC Desire Z / HTC G2 aka Vision 中的应用程序部分的开发人员选项中的 Android 选项中使用的，我打开了“不保留活动”，并描述了用户离开后立即销毁每个活动。当我禁用它时，然后在重新启动视频后记录了所有音频。检查自己，也许您已启用该选项并将其禁用，因此不会关闭任何应用程序。无论如何，某些进程都会关闭，因为它获得了一些状态，这意味着它没有处于活动状态，并且该选项使杀死所有内容都没有活动。

# php - 从相同的类属性语法调用类方法？PHP

> ID：11625567
> 
> 赞同：0
> 
> 时间：2012-07-24T06:51:06.163
> 
> 标签：php, oop

在 php 中从这里读取

[http://docs.php.net/manual/en/migration54.new-features.php](http://docs.php.net/manual/en/migration54.new-features.php)

它说，

> 添加了对实例化的类成员访问，例如 (new Foo)->bar()。

我有一个类并像下面这样调用它的方法（因为我不能做上面所说的！！），

```
$router = new RouterCore();
$method = $router->method;
$controller = new $router->controller();
$controller->$method(); 
```

当类名和方法名都作为另一个类的属性存在时，执行上述操作的语法是什么？我已经尝试过以下内容；

```
$router = new RouterCore();
new ($router->controller())->$router->method(); // no go
new $router->controller()->$router->method(); // no go
new ($router->controller()->$router->method()); // no go 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:55:24.817

您没有遵循文档中的语法。

`new ($router->controller())->$router->method();`

不一样

`(new $router->controller())->$router->method();`

在第一个实例中，您尝试`new`对 的结果执行`method()`，但是第二个实例从结果创建一个新对象，`controller()`然后调用它的方法。

即使这样`$router`也不会成为控制器的属性，您需要先评估`$router->method()`，然后将其用作方法名称。

我怀疑你真正想要的是

`(new $router->controller())->{$router->method()}();`

# android - 将 google-api-java-client 库与 android 一起使用时，转换为 Dalvik 格式失败并出现错误 1

> ID：11625574
> 
> 赞同：1
> 
> 时间：2012-07-24T06:51:15.737
> 
> 标签：android, json, google-places-api, java, google-client

我正在关注一个[示例](http://ddewaele.blogspot.in/2011/05/introducing-google-places-api.html)来了解 google-api-java-client 库。我已经下载了 jars 并将它们添加到我的项目中的 libs 文件夹中。在编译期间，没有错误，但是当我运行项目时，我收到以下错误消息：

```
Dx trouble processing "javax/transaction/HeuristicCommitException.class":
Ill-advised or mistaken usage of a core class (java.* or javax.*)
when not building a core library.

This is often due to inadvertently including a core library file
in your application's project, when using an IDE (such as
Eclipse). If you are sure you're not intentionally defining a
core class, then this is the most likely explanation of what's
going on.

However, you might actually be trying to define a class in a core
namespace, the source of which you may have taken, for example,
from a non-Android virtual machine project. This will most
assuredly not work. At a minimum, it jeopardizes the
compatibility of your app with future versions of the platform.
It is also often of questionable legality.

If you really intend to build a core library -- which is only
appropriate as part of creating a full virtual machine
distribution, as opposed to compiling an application -- then use
the "--core-library" option to suppress this error message.

If you go ahead and use "--core-library" but are in fact
building an application, then be forewarned that your application
will still fail to build or run, at some point. Please be
prepared for angry customers who find, for example, that your
application ceases to function once they upgrade their operating
system. You will be to blame for this problem.

If you are legitimately using some code that happens to be in a
core package, then the easiest safe alternative you have is to
repackage that code. That is, move the classes in question into
your own package namespace. This means that they will never be in
conflict with core system classes. JarJar is a tool that may help
you in this endeavor. If you find that you cannot do this, then
that is an indication that the path you are on will ultimately
lead to pain, suffering, grief, and lamentation.

[2012-07-24 12:12:12 - CurrentLocationMapDemo] Dx 1 error; aborting
[2012-07-24 12:12:12 - CurrentLocationMapDemo] Conversion to Dalvik format failed with error 1 
```

我在 SO 上尝试了其他链接，但徒劳无功。

**我尝试过的事情：**

1.  从我的工作区中删除项目。
2.  以干净模式重新启动eclipse。
3.  再次导入项目。
4.  确保构建路径中仅存在 android XX 和 Android 依赖项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:13:35.570

在尝试了很多东西之后，我明白了。最初，我所做的是，我添加了所有的 jar 文件（那些我也不需要的）。另外，我没有添加`libs-sources`文件夹。在删除不需要的 jar 文件并添加`libs-sources`文件夹时它起作用了。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:11:06.787

这个错误有很多可能的原因：

*   双重依赖
*   前卫问题
*   ...在这里查看许多不同的“解决方案”：

[外部 JAR 上的“转换为 Dalvik 格式失败，错误 1”](https://stackoverflow.com/questions/2680827/conversion-to-dalvik-format-failed-with-error-1-on-external-jar)

但您可以尝试查看一个 android 示例： [https ://github.com/tuthan/Google-Place-Api-Demo](https://github.com/tuthan/Google-Place-Api-Demo)

hth

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-30T09:08:45.473

`HeuristicCommitException`在`transaction-api-1.1.jar`

`QName`在`xpp3-1.1.4c.jar`

取下这两个罐子，事情就会过去。

# objective-c - 读/写文件头

> ID：11625576
> 
> 赞同：2
> 
> 时间：2012-07-24T06:51:22.367
> 
> 标签：objective-c, ios, c, file-io, header

我正在尝试编辑文件的文件头。但是，如果我从文件（NSData）中获取字节，我将看不到或不知道标头从哪里开始以及有效负载从哪里开始。因此，当我想添加签名或其他内容时，这是不可能的。

有人可以指出我正确的方向吗？

iOS 中的文件头是什么样的？我也找不到统一的标题格式，这使得它更难阅读。

摘要：我想知道标题的开始和结束位置。我想编辑这个标题。我想知道文件头的结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:00:51.803

iOS 中的文件头看起来像任何其他操作系统中的文件头。它可以是你想要的任何东西，也可以是你想要的长或短。如果你希望它是可变长度的，那么一种方法是用一个*幻数*（它实际上是一个四字母 UTF-8 字符串，意味着重要的东西）开始它，然后可能是一个 32 位的标头长度，编码为 little -endian（因为 iOS 和 OSX 是 little-endian），然后是您需要编码的任何内容。

有关当前存在哪些文件头的示例，请查看[`file`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/file.1.html)命令并查看`/usr/share/file/magic/`. 它通常使用文件头来确定文件的类型。

# php - 用户朋友墙上的墙帖（供稿）未正确显示

> ID：11625579
> 
> 赞同：0
> 
> 时间：2012-07-24T06:51:30.590
> 
> 标签：php, facebook, facebook-php-sdk

我制作了一个 Facebook 选项卡，该选项卡发布在用户的朋友墙上（供稿）。

使用以下代码：

```
$facebook->api
                (
                    '/'.$sendTo.'/feed/',
                    'post',
                    array('access_token' => $facebook->access_token,
                    'message' => ''.$send_service ,
                    'name' => 'She\'s got ****\'s Skin!',
                    'description' => ''.$nam1.' has nominated you to be a Pond\'s girl :)  Do return the favor :) ',                    
                    'picture' => 'http://www.mydomain.com/fb_tabs/ponds/rec/images/ponds.png',
                    'link' => 'https://www.facebook.com/mypage/app_[app_id]',
                    'auto_publish' => false,
                    'target_id' => '$tag'
                    ) 
```

它正在按照我的意愿显示帖子。这是示例： [查看图像](http://windchimes.co.in/fb_tabs/sank_test/wallpost/images/img1.png)

请忽略图片中的蓝色框。

**但在过去的两天里，它的通讯是这样的：** [查看图片](http://windchimes.co.in/fb_tabs/sank_test/wallpost/images/img2.png)

谁能让我知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:14:02.817

好吧，你不必担心它，因为 facebook 有时也会改变它的布局，所以它看起来像那样。

你不能在那做任何事情，因为事情不在你的手中。

希望能帮助到你。

# android - 滑动抽屉内容与视图重叠

> ID：11625580
> 
> 赞同：1
> 
> 时间：2012-07-24T06:51:30.747
> 
> 标签：android

当我点击处理程序时，滑动抽屉被调出，但它的内容是透明的，我可以看到内容和列表视图。列表视图没有隐藏。

这是我的布局 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/lvq"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </ListView>

    <SlidingDrawer
        android:id="@+id/slidingDrawer1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignBottom="@+id/lvq"
        android:layout_alignTop="@+id/lvq"
        android:content="@+id/content"
        android:handle="@+id/handle" >

        <Button
            android:id="@+id/handle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="History" />

        <LinearLayout
            android:id="@+id/content"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >
        </LinearLayout>
    </SlidingDrawer>

</RelativeLayout> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T06:57:17.923

将您的 SlidingDrawer 放在您的 ListView 下方。

```
android:layout_below="@id/lvq" 
```

# wcf - 一旦在 WCF 服务中重新打开，如何将获取数据返回给客户端应用程序

> ID：11625581
> 
> 赞同：0
> 
> 时间：2012-07-24T06:51:30.047
> 
> 标签：wcf, notifications, duplex, wcf-callbacks, icallbackeventhandler

如果应用程序在从 WCF Duplex 服务获取数据之前关闭，我打算序列化该消息并保留在 WCF 服务托管服务器中。一旦应用程序重新打开，我想通知用户有一条消息在等待。我怎样才能做到这一点？

据我所知，一旦应用程序关闭，服务就会取消订阅用户。那么我需要数据库机制来实现这一点吗？

在此先感谢 Manjunath

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:46:45.080

当消息在客户端完成时，尝试添加一些写回数据库布尔字段的代码。如果应用程序关闭，则不会命中代码，否则将设置标志。然后，您可以使用它为用户创建警报。

# c# - 有没有人有使用 betfair api 的 c# 代码？

> ID：11625586
> 
> 赞同：6
> 
> 时间：2012-07-24T06:51:52.150
> 
> 标签：c#, betfair

我正在创建 ac# windows 应用程序以使用 betfair 交换网络服务显示当前的体育市场价格，我使用了

> getmarketpricescompressed()

方法返回一个价格字符串，如下所示：

```
106093239~GBP~ACTIVE~0~1~~true~5.0~1343114432333~~N:7337~1~6992.56~2.16~~~false~~~~|2.16~1036.19~L~1~2.14~97.18~L~2~2.12~5.0~L~3~|2.18~467.36~B~1~2.2~34.12~B~2~2.22~162.03~B~3~:414464~2~102181.96~1.86~~~false~~~~|1.85~2900.33~L~1~1.84~1831.59~L~2~1.83~1593.73~L~3~|1.86~58.83~B~1~1.87~1171.77~B~2~1.88~169.15~B~3~ 
```

我不知道如何正确解压缩这个字符串，现在我正在使用这个代码：

```
GetMarketPricesCompressedReq price_req1 = new GetMarketPricesCompressedReq();
            price_req1.header = header2;
            price_req1.marketId = marketid_temp;
            price_req1.currencyCode = "GBP";
            GetMarketPricesCompressedResp price_resp = new GetMarketPricesCompressedResp();
            price_resp = bfg2.getMarketPricesCompressed(price_req1);
            //MessageBox.Show(price_resp.errorCode.ToString());
            //richTextBox1.Text = "";
            //richTextBox1.Text = price_resp.marketPrices;
            string prices = price_resp.marketPrices;
            richTextBox1.Text = price_resp.marketPrices;
            string[] ab1 = prices.Split('|');
            string[] temp = ab1[1].Split('~');
            textBox3.Text = temp[0];
            textBox4.Text = temp[4];
            textBox5.Text = temp[8];
            temp = ab1[2].Split('~');
            textBox6.Text = temp[0];
            textBox7.Text = temp[4];
            textBox8.Text = temp[8];
            temp = ab1[3].Split('~');
            textBox9.Text = temp[0];
            textBox10.Text = temp[4];
            textBox11.Text = temp[8];
            temp = ab1[4].Split('~');
            textBox12.Text = temp[0];
            textBox13.Text = temp[4];
            textBox14.Text = temp[8];
            if (ab1.Length >5)
            {
                temp = ab1[5].Split('~');
                textBox15.Text = temp[0];
                textBox16.Text = temp[4];
                textBox17.Text = temp[8];
                temp = ab1[6].Split('~');
                textBox18.Text = temp[0];
                textBox19.Text = temp[4];
                textBox20.Text = temp[8];
            } 
```

它适用于一些匹配项，但我观察到其他一些匹配项的字符串更改，因此会产生异常，any1 可以帮助我使用正确的代码来解压这个字符串，我已经用谷歌搜索它并找到了一个 vb 代码，它不是很有用，

顺便说一句，我想以这样的方式排列数据：

![在此处输入图像描述](../Images/ae24b5a57e0a1eb9fca2d73bc91677bf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:34:03.690

考虑以下：

```
a|b|c|d 
```

在此，您有四个块。但不一定只有四个。可以是两个，也可以是六个。

尝试通过迭代你得到的字符串数组来解决它

```
string[] ab1 = prices.Split('|'); 
```

就像是

```
foreach(var stringChunk in ab1)
{
    string[] temp = stringChunk.Split('~');
    // use the strings here as you please
} 
```

考虑使用更动态的方法来呈现数据，使用基于行的重复控件而不是静态文本框。=)

此处提供了压缩数据的完整文档：[https ://docs.developer.betfair.com/betfair/#!page=00008360-MC.00008307-MC](https://docs.developer.betfair.com/betfair/#!page=00008360-MC.00008307-MC)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T08:02:51.880

只是猜测，我认为数据是这样组织的

首先分隔`:`然后`|`我们得到

> 106093239~GBP~ACTIVE~0~1~~true~5.0~1343114432333~~N
> 
> 7337~1~6992.56~2.16~假~~~~
> 2.16~1036.19~L~1~2.14~97.18~L~2~2.12~5.0~L~3~ 2.18~467.36~B~1~2.2~34.12 ~B~2~2.22~162.03~B~3~
> 
> 414464~2~102181.96~1.86~false~~~~ 1.85~2900.33~L~1~1.84~1831.59~L~2~1.83~1593.73~L~3~1.86~58.83~B~1~1.87~1171.77 ~B~2~1.88~169.15~B~3~

我认为第一行显然是一个标题，第一个数字可能是市场 ID。同样，每个后续部分的第一部分是行标识符。`~`由类似的东西分隔

> (SelectionId)7337 (Order)1 (TotalMatched?)6992.56 (EvenPoint)2.16 (???)false

我认为价格行由 4 元组分隔`~`，就像这样

> (Price)2.16 (MatchAvailable)1036.19 (Type)L (Order)1
> (Price)2.14 (MatchAvailable)0097.18 (Type)L (Order)2
> (Price)2.12 (MatchAvailable)0005.00 (Type)L (Order)3

例如。

为了测试我的猜测，我必须与他们网站上的 BetFair 渲染进行比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T10:37:08.140

我自己将 vb 代码转换为 c#，如果有人觉得它有用，我将其发布在这里：

```
using Microsoft.VisualBasic;
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using System.Diagnostics;

namespace stock
{
    class UnpackMarketPricesCompressed : stock.BFExchangeService.MarketPrices
{
        //The substitute code for "\:"
    private const string ColonCode = "&%^@";

    //Unpack the string
    public UnpackMarketPricesCompressed(string MarketPrices)
    {
        string[] Mprices = null;
        string[] Part = null;
        string[] Field = null;
        int n = 0;

        Mprices = MarketPrices.Replace("\\:", ColonCode).Split(':');
        //Split header and runner data
        Field = Mprices[0].Replace("\\~", "-").Split('~');
        //Split market data fields
        marketId = Convert.ToInt32(Field[0]);
        //Assign the market data
        currencyCode = Field[1];
        marketStatus = (stock.BFExchangeService.MarketStatusEnum)Enum.Parse(typeof(stock.BFExchangeService.MarketStatusEnum), Field[2], true);
        delay = Convert.ToInt32(Field[3]);
        numberOfWinners = Convert.ToInt32(Field[4]);
        marketInfo = Field[5].Replace(ColonCode, ":");
        discountAllowed = (Field[6].ToLower() == "true");
        marketBaseRate = float.Parse(Field[7]);
        lastRefresh = long.Parse(Field[8]);
        removedRunners = Field[9].Replace(ColonCode, ":");
        bspMarket = (Field[10] == "Y");

        n = Mprices.Length - 1;
         // ERROR: Not supported in C#: ReDimStatement

        //For each runner
        for (int i = 0; i <= n; i++) 
        {
            Part = Mprices[i + 1].Split('|');
            //Split runner string into 3 parts
            Field = Part[0].Split('~');
            //Split runner data fields
             runnerPrices[i] = new stock.BFExchangeService.RunnerPrices();
            var _with1 = runnerPrices[i];
            //Assign the runner data
            _with1.selectionId = Convert.ToInt32(Field[0]);
            _with1.sortOrder = Convert.ToInt32(Field[1]);
            _with1.totalAmountMatched = Convert.ToDouble(Field[2]);
            _with1.lastPriceMatched = Convert.ToDouble(Field[3]);
            _with1.handicap = Convert.ToDouble(Field[4]);
            _with1.reductionFactor = Convert.ToDouble(Field[5]);
            _with1.vacant = (Field[6].ToLower() == "true");
            _with1.farBSP = Convert.ToDouble(Field[7]);
            _with1.nearBSP = Convert.ToDouble(Field[8]);
            _with1.actualBSP = Convert.ToDouble(Field[9]);
            _with1.bestPricesToBack = Prices(Part[1]);
            _with1.bestPricesToLay = Prices(Part[2]);
        }
    }

    private stock.BFExchangeService.Price[] Prices(string PriceString)
    {
        string[] Field = null;
        stock.BFExchangeService.Price[] Price = null;
        int k = 0;
        int m = 0;

        Field = PriceString.Split('~');
        //Split price fields
        m = (Field.Length / 4) - 1;
        //m = number of prices - 1 
         // ERROR: Not supported in C#: ReDimStatement

        for (int i = 0; i <= m; i++) 
        {
            Price[i] = new stock.BFExchangeService.Price();
            var _with2 = Price[i];
            _with2.price = Convert.ToInt32(Field[k + 0]);
            //Assign price data
            _with2.amountAvailable = Convert.ToInt32(Field[k + 1]);
            _with2.betType = (stock.BFExchangeService.BetTypeEnum)Enum.Parse(typeof(stock.BFExchangeService.BetTypeEnum), Field[k + 2], true);
            _with2.depth = Convert.ToInt32(Field[k + 3]);
            k += 4;
        }
        return Price;
        //Return the array of prices
    }

    }
} 
```

# android - 错误 --- 未知铬错误 -6

> ID：11625591
> 
> 赞同：1
> 
> 时间：2012-07-24T06:52:17.703
> 
> 标签：android, eclipse, jquery-mobile, cordova

我正在使用 phonegap 和 jquery mobile for android 构建一个应用程序。我收到一个错误未知铬错误 -6...

我没有得到确切的错误来源 - 但我在执行下面的代码时遇到了错误

获取列表.js

```
$(document).ready(
function() {
    $('#getList').css({ 'color' : 'red' });

    $("#getList").live('tap',function() {
        $.ajax
        ({
        url:'/home/rads-infi/workspace/jsonobject.json',

            type : 'GET',
            data : {'category' : 'bollywood'},
            success : function(jsonObj) {
                    alert("success");
                    alert(jsonObj);
                    var sony_result = $.parseJSON(jsonObj);
                     alert(sony_result);

                      // $('#content-list').html(sony_result[0].active_at_date);
            /*$('#content-list ul').append(
                '<li id="' + sony_result[0].title
                    + '">"' + sony_result[0].title
                + '"</li>');
                               */
                            },
            error : function() {
                 alert("error");
                }
            });

        });
    }); 
```

getList1.html

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"                  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

  <html xmlns="http://www.w3.org/1999/xhtml">
       <head>
           <title>demo</title>
            <meta http-equiv="Content-Type"
                content=" application/xhtml+xml; charset=UTF-8" />

            <meta name="viewport" content="width=screen.width; user-scalable=no" />
            <meta http-equiv="Content-type" content="text/html; />

             <link rel=" 
            stylesheet" href="android-asset/www/media.css" type="text/css" />

            <link rel="stylesheet" href="jquery.mobile/jquery.mobile-1.0.1.min.css" />
          <script src="jquery.mobile/jquery-1.7.2.min"></script>
        <script src="jquery.mobile/jquery.mobile-1.0.1.min.js"></script>
            <script type="text/javascript" src="cordova-1.9.0.js"></script>
          <script type="text/javascript" src="getplaylist.js"></script>
       </head>
       <body>

<div data-role="page" id="page-home" class="ui-page">
    <div data-role="header" data-nobackbtn="true" class="ui-header"
        data-theme="c">
        <img alt="logo" src="/android_asset/top_logo.png" height="36"
            class="align-right"> <img alt="logo"
            src="/android_asset/sony_music.png" class="align-left"> 
    </div>
    <!-- /header -->

    <div data-role="content" id="content-manual" data-theme="a">
    <!--    <div data-role="navbar">
            <ul>
                <li><a data-icon="home">Home</a>
                    <li><a data-icon="search">Contacts</a>
                        <li><a data-icon="info">Events</a>
                            <li><a data-icon="grid">News</a>
            </ul>
        </div> -->
        <div>
            <div data-role="button" id="getList">Get List</div>

        </div>

        <!-- /grid-a -->

    </div>

    <div data-role="content" id="content-list" data-theme="a">
        <ul>
        </ul>
    </div>

    <!-- /content-manual -->
</div>
<!-- /page --> 
```

# iphone - NSURLConnection 泄漏

> ID：11625594
> 
> 赞同：1
> 
> 时间：2012-07-24T06:52:21.260
> 
> 标签：iphone, objective-c

今天我遇到了一个小问题，我想知道泄漏的原因。这是代码

```
[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

这工作正常没问题。

现在我只是想知道这个分配的内存/对象会发生什么，因为没有人释放它。因此，根据本能，我在像这样分配时放置了自动释放：

```
[[[[NSURLConnection alloc] initWithRequest:request delegate:self] autorelease]; 
```

这给了我一个错误并崩溃“[NSURLConnectionInternalConnection _withConnectionDisconnectFromConnection]：发送到已释放实例的消息”

只是想知道背后的概念和原因。

编辑：我没有使用 ARC。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:03:08.237

我认为你不能在这里使用自动释放来更好地管理内存请在连接委托方法中释放连接对象

```
 - (void)connectionDidFinishLoading:(NSURLConnection *)connection;
 {
     [connection release];
 } 
```

因此，当您的连接完成时，它将释放连接对象，或者您也可以在 viewDidUnload 中释放它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:59:16.583

[NSURLConnectionInternalConnection _withConnectionDisconnectFromConnection]

这是在自动释放池释放您的 NSURLConnection 连接对象后调用的。最好的方法应该是，在完成获取数据后，对变量进行引用并释放它。（可能在 viewDidUnload: 中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:02:20.337

您可以使用此方法进行更好的内存管理 **NSURLConnection *connection=[NSURLConnection connectionWithRequest:urlRequest delegate:self];**

上面的connectionWithRequest方法是类方法，它自己管理内存，你不需要释放它。据我所知，在分配连接对象 objc 运行时将对象添加到自动释放池，然后将其他委托方法发送到已释放的实例。

# c# - 读取文本文件的最后一行

> ID：11625595
> 
> 赞同：36
> 
> 时间：2012-07-24T06:52:33.850
> 
> 标签：c#, file, file-read

我需要知道如何读取文本文件的最后一行。我需要找到该行，然后将其处理到 SQL 数据库中……
我一直在阅读并在网上搜索，但我正在努力寻找正确的方法来做到这一点。IE：

1.  查找文件的最后一行。
2.  处理文件的最后一行。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-07-24T06:57:38.937

有两种方法：简单而低效，或者极其复杂但高效。复杂的版本假定一个理智的编码。

除非您的文件*太大*以至于您真的无法阅读全部内容，否则我只会使用：

```
var lastLine = File.ReadLines("file.txt").Last(); 
```

请注意，这使用[`File.ReadLines`](http://msdn.microsoft.com/en-us/library/dd383503.aspx)，*而不是* [`File.ReadAllLines`](http://msdn.microsoft.com/en-us/library/system.io.file.readalllines.aspx)。如果您使用的是 .NET 3.5 或更早版本，则需要使用`File.ReadAllLines`或编写自己的代码 -一次性`ReadAllLines`将*整个*文件读入内存，同时`ReadLines`将其流式传输。

否则，复杂的方法是使用类似于[this](https://stackoverflow.com/questions/452902/how-to-read-a-text-file-reversely-with-iterator-in-c-sharp)的代码。它尝试从文件末尾向后读取，处理诸如 UTF-8 多字节字符之类的脏乱。这并不令人愉快。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-24T07:00:24.447

第一部分：

```
File.ReadAllLines(@"c:\some\path\file.txt").Last(); 
```

或者

```
File.ReadLines(@"c:\some\path\file.txt").Last(); 
```

ReadLines 是首选。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-24T07:00:10.700

我会简单地结合[`File.ReadLines(path)`](http://msdn.microsoft.com/en-us/library/dd383503.aspx)和[`Enumerable.Last`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.last.aspx)：

```
String last = File.ReadLines(@"C:\file.txt").Last(); 
```

它流式传输行并且不会将所有行加载到内存中`File.ReadAllLines`。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-10-15T04:25:17.187

```
string m = "";
StreamReader r = new StreamReader("file_path");
while (r.EndOfStream == false)
{
    m = r.ReadLine();
}
Console.WriteLine("{0}\n", m);
r.Close(); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-06-12T14:37:33.707

注意：所有这些代码都假定为 UTF-8。如果您需要支持使用像 Unicode 这样的双宽字符的代码页，那么您需要在换行符之前和/或之后对字符添加额外的检查，以确保它确实是换行符。

这个问题的主要用例之一是抓取日志文件的末尾。不幸的是，当日志文件达到兆字节时，其他答案就惨死了。想象一下，在一个微小的单核 VPS 上每次调用都运行每一行......哎呀。

UTF-8 的好处在于，当您点击 '\n' 字符时，您不必担心任何相关字节，因为在 UTF8-8 中任何高位清除的字节都只是一个 ASCII 字符。很方便！

您可以使用“[如何使用 C# 中的迭代器反向读取文本文件](https://stackoverflow.com/questions/452902/how-to-read-a-text-file-reversely-with-iterator-in-c-sharp)”中的解决方案，但请注意代码相当复杂。如果您只需要一个简单的 UTF-8 行尾，那么此解决方案将非常有效，即使在大型日志文件上也能表现出色。

如果您一次监视大量文件并在 C# 中使用 FileSystemWatcher 之类的东西，那么这种性能提升将非常重要。我在廉价的单 CPU Linux VPS 上使用非常相似的代码来监控登录失败，并将 ip 地址放入我的 MIT 许可项目[https://github.com/DigitalRuby/IPBan](https://github.com/DigitalRuby/IPBan)的防火墙中，使用[https://github.com/ DigitalRuby/IPBan/blob/master/IPBanCore/Core/Utility/LogFileScanner.cs](https://github.com/DigitalRuby/IPBan/blob/master/IPBanCore/Core/Utility/LogFileScanner.cs)（一次处理多个新行）。

当您的 SSH 端口面向公众时，您会惊讶于 auth.log 的大小。如果你经常阅读几十个甚至几百个文件，你会很高兴你没有使用`File.ReadAllLines().Last();`

由于这只是一页代码，因此在简单和非常快速之间取得了很好的平衡。

C#代码...

```
/// <summary>
/// Utility class to read last line from a utf-8 text file in a performance sensitive way. The code does not handle a case where more than one line is written at once.
/// </summary>
public static class UTF8FileUtilities
{
    /// <summary>
    /// Read the last line from the file. This method assumes that each write to the file will be terminated with a new line char ('\n')
    /// </summary>
    /// <param name="path">Path of the file to read</param>
    /// <returns>The last line or null if a line could not be read (empty file or partial line write in progress)</returns>
    /// <exception cref="Exception">Opening or reading from file fails</exception>
    public static string ReadLastLine(string path)
    {
        // open read only, we don't want any chance of writing data
        using (System.IO.Stream fs = System.IO.File.OpenRead(path))
        {
            // check for empty file
            if (fs.Length == 0)
            {
                return null;
            }

            // start at end of file
            fs.Position = fs.Length - 1;

            // the file must end with a '\n' char, if not a partial line write is in progress
            int byteFromFile = fs.ReadByte();
            if (byteFromFile != '\n')
            {
                // partial line write in progress, do not return the line yet
                return null;
            }

            // move back to the new line byte - the loop will decrement position again to get to the byte before it
            fs.Position--;

            // while we have not yet reached start of file, read bytes backwards until '\n' byte is hit
            while (fs.Position > 0)
            {
                fs.Position--;
                byteFromFile = fs.ReadByte();
                if (byteFromFile < 0)
                {
                    // the only way this should happen is if someone truncates the file out from underneath us while we are reading backwards
                    throw new System.IO.IOException("Error reading from file at " + path);
                }
                else if (byteFromFile == '\n')
                {
                    // we found the new line, break out, fs.Position is one after the '\n' char
                    break;
                }
                fs.Position--;
            }

            // fs.Position will be right after the '\n' char or position 0 if no '\n' char
            byte[] bytes = new System.IO.BinaryReader(fs).ReadBytes((int)(fs.Length - fs.Position));
            return System.Text.Encoding.UTF8.GetString(bytes);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-11-05T17:38:31.880

```
string last = File.ReadLines(@"C:\file.txt").Last();
string lastsymbol = last[last.Count - 1]; 
```

# javascript - 在 Chrome 扩展中打开默认电子邮件客户端时，“正文”为空

> ID：11625598
> 
> 赞同：1
> 
> 时间：2012-07-24T06:52:38.267
> 
> 标签：javascript, google-chrome, google-chrome-extension, email-client

我正在创建一个 chrome 扩展，其中一些内容应在单击按钮时作为电子邮件发送。我正在尝试使用以下代码调用默认电子邮件客户端：

```
function sendlist(tabs) 
{

  var contents = '';
  for (var i = 0; i < tabs.length; i++) 
  {
        if(!tabs[i].pinned)
      contents += tabs[i].url + '\n\n\n';
  }
    var link = "mailto:?&body="+contents;
    alert(link);
    chrome.tabs.create({url: link});

} 
```

变量“链接”的内容需要作为电子邮件正文发送。**强文本**如果我使用`'chrome.tabs.create({url:link});` 它，它将调用默认的电子邮件客户端，但正文部分将为空。**

有没有办法打开默认的电子邮件客户端说“Outlook”并在该电子邮件的正文部分获取“链接”的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:22:47.070

问题是由于邮件标题格式错误造成的。正确的语法是：

```
var link = "mailto:?body="+escape(contents); 
```

使用该`escape()`功能正确格式化所需内容。另外，我删除`&`了正文标题之前的内容。

# ios - 在 ios 设备中为 html5 应用程序安装 https 证书

> ID：11625603
> 
> 赞同：1
> 
> 时间：2012-07-24T06:52:57.370
> 
> 标签：ios, ajax, html, ssl, https

请指导在 ios 设备中为 html5 应用程序安装 https 证书。使用将通过来自 html5 应用程序的 ajax 调用。

# google-apps-script - 谷歌可视化不适用于 appscript html 服务

> ID：11625604
> 
> 赞同：5
> 
> 时间：2012-07-24T06:53:01.097
> 
> 标签：google-apps-script, google-visualization, google-sites, google-caja

我想将 appscript htmlservice 与 appscript 一起使用，html 服务似乎工作但可视化不起作用。这是供参考的代码。代码.GS：

```
// Script-as-app template.
function doGet() {
return HtmlService.createHtmlOutputFromFile('html_visualization');
} 
```

html_visualization.html

```
 <html>
<head>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>    
  <script type="text/javascript">

   google.load('visualization', '1.0', {'packages':['corechart']});
   google.setOnLoadCallback(drawChart);
   function drawChart() {

   var data = new google.visualization.DataTable();     
      data.addColumn('string', 'Topping');     
        data.addColumn('number', 'Slices');
         data.addRows([          
        ['Mushrooms', 3],
         ['Onions', 1],
         ['Olives', 1],
         ['Zucchini', 1],
         ['Pepperoni', 2]
         ]);
         var options = {'title':'How Much Pizza I Ate Last Night','width':400, 'height':300};
          var chart = new google.visualization.PieChart(document.getElementById ('chart_div') );        
           chart.draw(data, options);
     }

       </script> 

  </head>
  <body>
    <div id="chart_div"></div>
    Hello World
  </body>

       </html> 
```

发布时出现 Hello world 但没有图表迹象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T08:07:20.183

HtmlService 使用 Caja 从您的 HTML 页面中过滤不安全的 Javascript、CSS 和 html，然后将过滤后的内容呈现给浏览器。当我在 Caja 游乐场测试您的代码时，它显示了相同的行为，所以这是 Caja 的问题，而不是 Htmlservice。[您可以在Caja Payground](http://caja.appspot.com)测试您的 Html 文件

测试 HTML 文件的步骤

1.  将您的 HTML 文件代码复制到[Caja Playground的“源”选项卡](http://caja.appspot.com)
2.  点击 Cajole 按钮
3.  一段时间后，渲染结果选项卡将显示结果

[您可以在Caja 问题跟踪器](http://code.google.com/p/google-caja/issues/list)中报告此问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T12:40:21.920

Waqar 是正确的，但可视化支持即将到来。

# javascript - 在 Metro 应用程序中获取窗口尺寸

> ID：11625608
> 
> 赞同：1
> 
> 时间：2012-07-24T06:53:22.593
> 
> 标签：javascript, windows-8, microsoft-metro

如何在 Windows 8 Metro 应用程序中获取窗口的尺寸？

我想用画布元素填充屏幕，目前我的`default.js`文件看起来像这样

```
// ... some autogenerated code ...
app.onactivated = function (args) {
    if (args.detail.kind === activation.ActivationKind.launch) {
    // ... some autogenerated code ...

    var canvas = document.getElementById("myCanvas");
    var context = canvas.getContext("2d");

    canvas.width  = 600;  // I want to set width and height here so that
    canvas.height = 800;  // canvas fills the entire screen/window.
};
// ... more autogenerated code ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:34:44.400

要获得大小，您需要：

```
window.outerWidth
window.outerHeight 
```

*这将返回已*应用比例因子的逻辑大小。

请注意，您还想监听 View State Changes，并且当您进入/离开捕捉、填充、完整模式时，以确保您的 UI 适应新的窗口大小。

具体来说，您需要使用 CSS 媒体查询匹配：

```
var snappedNotification = matchMedia("all and (-ms-view-state: snapped)");
snappedNotification.addEventListener(mySnappedFunction); 
```

或者监听window.resize，使用当前视图状态查看当前视图：

```
var currentViewState = Windows.UI.ViewManagement.ApplicationView.value; 
```

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.applicationviewstate.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.applicationviewstate.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T07:39:38.860

可以通过以下方式获得物理尺寸：

```
var displayInformation = Windows.Graphics.Display.DisplayInformation.getForCurrentView();
var scale = displayInformation.resolutionScale;
var height = Math.ceil(window.outerHeight * scale / 100);
var width = Math.ceil(window.outerWidth * scale / 100);

var physicalWidth = width / displayInformation.rawDpiX; // in inches
var physicalHeight = height / displayInformation.rawDpiY; // in inches
var physicalSize = Math.floor(Math.sqrt(Math.pow(physicalWidth, 2) + Math.pow(physicalHeight, 2)) * 10) / 10; // in inches 
```

我已经在几种屏幕尺寸上尝试过，并且在大多数情况下，physicalSize 是准确的，有时会出现 0.1" 错误。

我希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:04:45.070

以下 JavaScript 代码应该可以工作：

```
var height = $('#bodyTag').outerHeight(true);

var width = $('#bodyTag').outerWidth(true); 
```

`resolutionScale`如果您想根据比例调整画布大小，也可以使用枚举：

```
var resolutionScale = Windows.Graphics.Display.DisplayProperties.resolutionScale; 
```

# php - 编辑图片的exif数据

> ID：11625610
> 
> 赞同：1
> 
> 时间：2012-07-24T06:53:32.713
> 
> 标签：php, exif

> **可能重复：**
> [如何将 exif 数据添加到图像中？](https://stackoverflow.com/questions/229446/how-do-i-add-exif-data-to-an-image)

有谁知道用于编辑图像的 exif 数据的 php 代码或脚本。？

不是“查看 exif 数据”“编辑 exif 数据”

# c - 如何使用 clearsilver 库获取真实的客户端 IP

> ID：11625612
> 
> 赞同：2
> 
> 时间：2012-07-24T06:53:48.733
> 
> 标签：c, apache, ip

我使用 clearsilver 库来编写 CGI。在我的 Apache 之前，我使用 Haproxy。我可以使用以下命令在 apache 日志中输出真实用户 ip：

> LogFormat "%h %l %u %t \"%r\" %>s %b \"%{X-Forwarded-For}i\"" common

但是我几乎测试了所有东西，例如：`HTTP.XForwardedFor`，`HTTP_X_FORWARDED_FOR`等等以从 hdf 获取真实的 ip，但它们似乎都不对。我怎么才能得到它？从哪个键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:35:58.090

你试过`getenv("HTTP_X_FORWARDED_FOR")`吗？从[cgi.c](http://code.google.com/p/clearsilver/source/browse/trunk/cgi/cgi.c)判断，clearsilver 不会复制 X-Forwarded-For 标头，但您仍然应该能够将它从[apache 放置它](https://stackoverflow.com/questions/4949276/how-to-fetch-http-headers-in-perl-when-using-cgi)的环境中取出。

# c# - 动态gridview的rowheadercell中的图像

> ID：11625613
> 
> 赞同：1
> 
> 时间：2012-07-24T06:53:50.403
> 
> 标签：c#

我希望有人可以提供帮助。在我的软件中，我有 dynamic `Data Grid Views`，它们在制作时都共享通用的 grd 名称。每个都放入动态选项卡中。一切正常，但我想将图像添加到`Grid Row Header`. 这里有非动态网格视图的示例，但不是动态的，所以我改编并使用了以下代码：

```
private void grd_RowPostPaint(object sender, DataGridViewRowPostPaintEventArgs e)
{
    if (e.InheritedRowStyle.BackColor == Color.Gold)
    {
        Bitmap myBitmap = new Bitmap(imageList1.Images[0]);
        Icon myIcon = Icon.FromHandle(myBitmap.GetHicon());

        Graphics graphics = e.Graphics;

        //Set Image dimension - Users choice
        int iconHeight = 16;
        int iconWidth = 32;

        //Set x/y position - As the center of the RowHeaderCell
        int xPosition = ((e.RowBounds.Height * 2) - iconWidth) / 2;
        int yPosition = ((e.RowBounds.Y + (e.RowIndex * e.RowBounds.Height) - iconHeight) / 2)+ e.RowBounds.Height + 1;

        Rectangle rectangle = new Rectangle(xPosition, yPosition, iconWidth, iconHeight);
        graphics.DrawIcon(myIcon, rectangle);

    }
    else if (e.InheritedRowStyle.BackColor == Color.PowderBlue)
    {
        Bitmap myBitmap = new Bitmap(imageList1.Images[1]);
        Icon myIcon = Icon.FromHandle(myBitmap.GetHicon());

        Graphics graphics = e.Graphics;

        //Set Image dimension - Users choice
        int iconHeight = 16;
        int iconWidth = 16;

        //Set x/y position - As the center of the RowHeaderCell
        int xPosition = ((e.RowBounds.Height * 2) - iconWidth) / 2;
        int yPosition = ((e.RowBounds.Y + (e.RowIndex * e.RowBounds.Height) - iconHeight) / 2) + e.RowBounds.Height + 1;

        Rectangle rectangle = new Rectangle(xPosition, yPosition, iconWidth, iconHeight);
        graphics.DrawIcon(myIcon, rectangle);
    }
    else if (e.InheritedRowStyle.BackColor == Color.YellowGreen)
    {
        //Convert the image to icon, inorder to load it in the row header column
        Bitmap myBitmap = new Bitmap(imageList1.Images[2]);
        Icon myIcon = Icon.FromHandle(myBitmap.GetHicon());

        Graphics graphics = e.Graphics;

        //Set Image dimension - Users choice
        int iconHeight = 16;
        int iconWidth = 16;

        //Set x/y position - As the center of the RowHeaderCell
        int xPosition = ((e.RowBounds.Height *2) - iconWidth) / 2;
        int yPosition = ((e.RowBounds.Y + (e.RowIndex * e.RowBounds.Height) - iconHeight) / 2) + e.RowBounds.Height + 1;

        Rectangle rectangle = new Rectangle(xPosition, yPosition, iconWidth, iconHeight);
        graphics.DrawIcon(myIcon, rectangle);

    }
    else if (e.InheritedRowStyle.BackColor == Color.White)
    {
        //Convert the image to icon, inorder to load it in the row header column
        Bitmap myBitmap = new Bitmap(imageList1.Images[3]);
        Icon myIcon = Icon.FromHandle(myBitmap.GetHicon());

        Graphics graphics = e.Graphics;

        //Set Image dimension - Users choice
        int iconHeight = 16;
        int iconWidth = 16;

        //Set x/y position - As the center of the RowHeaderCell
        int xPosition = ((e.RowBounds.Height * 2) - iconHeight) / 2;
        int yPosition = ((e.RowBounds.Y + (e.RowIndex * e.RowBounds.Height) - iconHeight) / 2) + e.RowBounds.Height + 1;

        Rectangle rectangle = new Rectangle(xPosition, yPosition, iconWidth, iconHeight);
        graphics.DrawIcon(myIcon, rectangle);

    }

} 
```

在搜索完成并将数据发送到网格后，我正在代码中的某个位置调用此代码：

```
grd.RowPostPaint += new System.Windows.Forms.DataGridViewRowPostPaintEventHandler(this.grd_RowPostPaint); 
```

但是有一个问题，当软件运行最大化时，图像显示正常，当它以任何大小运行时，除了它们显示的唯一时间是在鼠标悬停时（不是这样编码的，它只是那样发生），当我滚动它们时它们消失在网格的底部......任何想法我做错了什么（我不是一个有很多经验的编码器......请善待）。

# java - 获取枚举 .values()[] 或创建枚举数组？

> ID：11625615
> 
> 赞同：4
> 
> 时间：2012-07-24T06:53:56.550
> 
> 标签：java, enums

我必须使用开关来获取枚举的值。枚举是这个：

```
public enum Compass {      NORTH, SOUTH, EAST, WEST;      } 
```

我这样做了（在枚举之外的另一个类中）：

```
Compass.values()[0].name() 
```

但是这本书说这样做的方法是：

```
Compass[] comp = {  Compass.NORTH, Compass. SOUTH, Compass.EAST, Compass.WEST  }
comp[0].name(); 
```

他们中的任何一个都比另一个更好吗？我的意思是，创建枚举“对象”或其他东西更稳定吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T06:58:49.183

如果您执行`Compass.values();`返回值的顺序将是它们在 Enum 类中写入的顺序。如果您的代码依赖于数组内容的顺序，最好像您的示例一样创建自己的数组，并在需要时控制顺序。

如果您只想获取此枚举的特定值，例如 NORTH，您可以只编写`Compass.NORTH.name();`而不是使用数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T07:00:00.117

要直接获取枚举值之一的名称，而不使用数组，可以这样做：

```
Compass.NORTH.name(); 
```

返回的数组`Compass.values()`按照枚举的声明顺序，因此单独创建数组没有任何好处，除非您不喜欢声明的顺序（并且无法更改）或者您担心其他人会更改顺序（例如插入一个新值）并破坏您的代码。

但是，通常，您希望避免重复，因为这意味着要维护两件事而不是一件事，而且事情很容易不同步。如果有人添加了 NORTH_EAST、SOUTH_WEST 等，您必须记住更新您的数组以适应这些值，或者发现您的代码在某些情况下可能不起作用。

# jquery - 花哨的盒子ajax php登录示例不起作用

> ID：11625616
> 
> 赞同：1
> 
> 时间：2012-07-24T06:54:00.610
> 
> 标签：jquery, html, ajax, fancybox

尝试登录表单**示例（编号 5）**：

[花式盒子](http://fancybox.net/blog/)

它似乎不起作用，单击以验证数据时它只是重新加载页面。据我了解，ajax 应该避免这种事情。

任何澄清将不胜感激，我相信这是一个相对简单的问题。

我实际上只是复制并粘贴了代码。“mail.php”目前并没有真正做任何事情，但首先我希望触发“#login_error”，当#login_name 和#login_pass 的长度小于1 时应该发生这种情况。就目前而言，页面刚刚刷新。

尽管如此，参考代码：js -

```
 $(document).ready(function() {

$("#tip5").fancybox({
    'scrolling'     : 'no',
    'titleShow'     : false,
    'onClosed'      : function() {
        $("#login_error").hide();
    }
});

$("#login_form").bind("submit", function() {

    if ($("#login_name").val().length < 1 || $("#login_pass").val().length < 1) {
        $("#login_error").show();
        $.fancybox.resize();
        return false;
    }

    $.fancybox.showActivity();

    $.ajax({
        type        : "POST",
        cache   : false,
        url     : "mail.php",
        data        : $(this).serializeArray(),
        success: function(data) {
            $.fancybox(data);
        }
    });

    return false;
});

    }); 
```

html -

```
 <a id="tip5" href="#login_form">test</a>

<div style="display:none">
    <form id="login_form" method="post" action="">
                <p id="login_error">Please, enter data</p>
            <p>
                <label for="login_name">Login: </label>
                <input type="text" id="login_name" name="login_name" size="30" />
            </p>
            <p>
                <label for="login_pass">Password: </label>
                <input type="password" id="login_pass" name="login_pass" size="30" />
            </p>
            <p>
                <input type="submit" value="Login" />
            </p>
            <p>
                <em>Leave empty so see resizing</em>
            </p>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:31:37.503

您必须按以下顺序添加文件

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" ></script>
<script type="text/javascript" src="./fancybox/jquery.mousewheel-3.0.4.pack.js"></script>
<script type="text/javascript" src="./fancybox/jquery.fancybox-1.3.4.pack.js"></script> 
```

否则你的代码是正确的

# xml - QML 中的错误 XPST0003

> ID：11625619
> 
> 赞同：1
> 
> 时间：2012-07-24T06:54:13.793
> 
> 标签：xml, qt, qml

我正在尝试将 xmlrpc 调用 wordpress 的结果解析为 xmllistmodel。模型在这里：

```
XmlListModel {
        id: dataModel
        query: "/methodResponse/params/param/value/array/data/value/"
        XmlRole {name: "postId"; query:"struct/member[1]/value/int/number()"; isKey: true}
        XmlRole {name: "title"; query: "struct/member[6]/value/string()"}
} 
```

这是xml数据：

```
<methodResponse>
    <params>
        <param>
            <value>
                <array>
                    <data>
                        <value>
                            <struct>
                                <member><name>ID</name><value><int>358</int></value></member>
                                <member><name>post_author</name><value><string>3</string></value></member>
                                <member><name>post_date</name><value><string>2008-09-05 00:27:25</string></value></member>
                                <member><name>post_date_gmt</name><value><string>2008-09-05 07:27:25</string></value></member>
                                <member><name>post_content</name><value><string>Some content</string></value></member>
                                <member><name>post_title</name><value><string>Readability Test</string></value></member>
                            </struct>
                        </value>
                        <value>
                            <struct>
                                <member><name>ID</name><value><int>188</int></value></member>
                                <member><name>post_author</name><value><string>3</string></value></member>
                                <member><name>post_date</name><value><string>2008-09-04 23:02:20</string></value></member>
                                <member><name>post_date_gmt</name><value><string>2008-09-05 06:02:20</string></value></member>
                                <member><name>post_content</name><value><string>Some content</string></value></member>
                                <member><name>post_title</name><value><string>Layout Test</string></value></member>
                            </struct>
                        </value>
                    </data>
                </array>
            </value>
        </param>
    </params>
</methodResponse> 
```

那么问题是什么，以及导致这些错误的原因是什么：

```
Error XPST0003 in file:///usr/bin/qmlviewer, at line 1, column 62: syntax error, unexpected end of file
Error XPST0003 in file:///usr/bin/qmlviewer, at line 2, column 40: syntax error, unexpected ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:19:22.907

我不知道 WordPress，但它可能会抱怨，因为：

```
query: "/methodResponse/params/param/value/array/data/value/" 
```

不是有效的 XPath 表达式。不应有尾部斜杠。

# c# - 运行时来自类的属性和名称

> ID：11625624
> 
> 赞同：2
> 
> 时间：2012-07-24T06:54:23.680
> 
> 标签：c#, reflection

我有一堂课

```
public class ProjectTask
{
    public ProjectTask();

    [XmlElement("task_creator_id")]
    public string task_creator_id { get; set; }
    [XmlElement("task_owner_id")]
    public string task_owner_id { get; set; }
    [XmlElement("task_owner_location")]
    public TaskOwnerLocation task_owner_location { get; set; }
    [XmlElement("task_owner_type")]
    public string task_owner_type { get; set; }
    [XmlElement("task_type_description")]
    public string task_type_description { get; set; }
    [XmlElement("task_type_id")]
    public string task_type_id { get; set; }
    [XmlElement("task_type_name")]
    public string task_type_name { get; set; }
} 
```

xml 将在运行时反序列化为此。

有没有办法获取字段名称和值？

使用反射我可以得到这样的属性名称：

```
PropertyInfo[] projectAttributes = typeof(ProjectTask).GetProperties(); 
```

可以应用 foreach 循环来获取属性

```
foreach(PropertyInfo taskName in projectAttributes)
       {
           Console.WriteLine(taskName.Name);
       } 
```

但是如何打印属性和值？像 task_creator_id = 1

其中 task_Id 是属性之一，运行时的值为 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:20:10.737

您可以使用您的`PropertyInfo`对象来做到这一点：

```
var propertyName = MyPropertyInfoObject.Name;
var propertyValue = MyPropertyInfoObject.GetValue(myObject, null); 
```

foreach 循环使您可以访问您的类型的所有属性，您还可以拥有一个知道其名称的特定属性，如下所示：

```
var MyPropertyInfoObject = myType.GetProperty("propertyName"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:56:49.793

利用 `taskName.GetValue(yourObject,null)`

where`yourObject`应该是`ProjectTask`. 例如，

```
ProjectTask yourObject = (ProjectTask)xmlSerializer.Deserialize(stream)

var propDict = typeof(ProjectTask)
                  .GetProperties()
                  .ToDictionary(p => p.Name, p => p.GetValue(yourObject, null)); 
```

# emacs - Emacs 对 D 语言的支持

> ID：11625627
> 
> 赞同：7
> 
> 时间：2012-07-24T06:54:31.290
> 
> 标签：emacs, d

google了一阵子，可惜发现d的emacs模式很久没有更新了。对于有经验的 D 程序员，你使用哪种 emacs 模式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T15:35:11.727

我一直在使用 Dejan 提到的 d-mode.el 很长时间，发现它已经足够了。如果您找到根据您的需要改进它的方法，如果您让我知道，我将不胜感激，以便我可以将它们回滚到可下载的版本中。谢谢！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T07:33:18.583

[您将在此页面](http://prowiki.org/wiki4d/wiki.cgi?EditorSupport/EmacsEditor)上找到（几乎）所有“EMACS 作为 D 编辑器”的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T07:53:48.913

我收集了最初由 William Baxter 编写的 Emacs D-Mode 的所有变体，并在 Launchpad 上创建了一个 Bazaar 分支，请参阅[https://code.launchpad.net/emacs-d-mode](https://code.launchpad.net/emacs-d-mode)。众所周知，这适用于 Emacs 24 和 Emacs 23。使用 DVCS 管理此代码似乎比依赖 wiki 上的代码和补丁更明智！

# drupal - Drupal 以编程方式为节点设置术语

> ID：11625630
> 
> 赞同：4
> 
> 时间：2012-07-24T06:54:42.620
> 
> 标签：drupal, drupal-6, drupal-taxonomy

我想更新系统中的一些节点并更新附加到它们的特定分类法。我需要以编程方式完成这项工作。我有节点 ID 和术语 ID，并希望将此术语附加到此特定节点。这里应该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T13:32:04.267

获取节点：

```
$node = node_load($X); // $X is node ID. 
```

要附加一个术语 ID - 请注意这在 D7 中非常不同：

```
$node->taxonomy[$tid] = taxonomy_get_term($tid); // $tid is attaching term ID. 
```

添加修订：

```
$node->revision = 1; 
$node->log = "Programatically attached taxonomy term."; 
```

保存节点 - 如果节点是新的：

```
node_submit($node);
node_save($node); 
```

或者，如果节点是现有节点，则保存节点：

```
node_save($node); 
```

* * *

在 Drupal 7 中，术语作为普通字段项附加，因此 field_first_name[0] 表示该字段的第一次出现。不要将该功能与术语混淆。您可以添加任意数量的术语。

更新：感谢[kliker](https://stackoverflow.com/users/3963647/kliker)的[编辑](https://stackoverflow.com/review/suggested-edits/5590924)，不幸的是被拒绝了。看来[我](https://meta.stackoverflow.com/a/251338/784877)必须自己编辑帖子才能让他改成这个答案。

# java - 抽象类中的私有构造函数

> ID：11625635
> 
> 赞同：15
> 
> 时间：2012-07-24T06:54:54.710
> 
> 标签：java, class, constructor, private, abstract

在 Java 中，在抽象类中使用私有构造函数的目的是什么？

在评论中我得到了这个问题，我很好奇，在什么情况下我们需要以这种方式使用构造函数？

我认为它可以与抽象类中的另一个构造函数配对使用，但这非常微不足道。它还可以用于构造超出抽象类的静态内部类。

也许有更优雅的用法？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-24T07:34:27.450

如果`private`构造函数是类的**唯一**构造函数，那么原因很明确：防止子类化。某些类仅用作静态字段/方法的持有者，并且不希望被实例化或子类化。请注意，`abstract`在这种情况下，修饰符是多余的——不管有没有它，都不可能实例化。正如@JB Nizet 在下面指出的那样，`abstract`修饰符也是不好的做法，因为它向班级的客户发送了错误的信号。该类实际上应该是`final`.

还有另一个用例，虽然非常罕见：您可以拥有一个`abstract class`仅**包含其自己的子类**作为嵌套类的`private`构造函数。这个习惯用法确保那些嵌套类是**唯一的子类**。事实上，Java 中的 s 就是使用这个习语。****`enum`****

 ****如果周围还有其他构造函数，那么构造函数实际上并没有什么特别之处`private`。`abstract`就像在任何其他课程中一样，它可以在课程中使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T07:00:37.900

我唯一能想到的就是重用其他（受保护的）构造函数共享的公共代码。然后他们可以在第一行调用私有构造函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T07:08:13.683

有时，默认的无参数构造函数被设为私有，并提供另一个接受参数的构造函数。然后，此构造函数可能会调用其他私有构造函数。这会强制实现提供这些参数，这可能会确保始终初始化某些变量，尽管这不是常见的做法（根据我的经验）。如果这是要求，你最好检查你的变量并抛出一个`IllegalArgumentExeption`，解释为什么需要初始化变量。

如果您创建一个*只有*私有构造函数的抽象类，那么该类实际上是无用的，因为永远无法创建任何实例。如果打算创建一个只有静态方法的实用程序类（如包`Math`中的类`java.lang`），则可以接受私有构造函数，但是应该将类标记为 final，因为将类标记为抽象意味着该类将被扩展。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T07:17:53.757

1.  如前所述，用作通用的、仅供内部使用的构造函数。

2.  抽象或非抽象，在仅包含静态公共方法 [辅助方法] 的类上声明私有默认构造函数以防止实例化该类的情况并不少见。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T07:00:15.257

没有其他优雅的用途是可能的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-28T10:06:53.117

抽象类中的私有构造函数也可以用于`sealed`类的目的（如 Scala 或 Kotlin 等）。由于您仍然可以从抽象类中提供子类，但外人无法扩展/实现（正如@Marko Topolnik 回答的那样）。

看起来我们将`sealed interface`更加干净地支持这一点。见[https://openjdk.java.net/jeps/8222777](https://openjdk.java.net/jeps/8222777)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-19T13:24:43.763

只有私有构造函数的最终类是单例和多例使用的设计。

只有私有构造函数的抽象类是我见过的防止类被实例化的唯一方法。我已经看到它用于创建实用程序类（只有静态方法和/或成员）。

至于设置用户期望，我看到[https://docs.oracle.com/javase/tutorial/java/IandI/abstract.html](https://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)声明“抽象类不能被实例化，但它们**可以**被子类化。” 我注意到它并没有说明它们被分类的任何意图。

然而，我还注意到，查看一些 Java 源代码，我发现使用了以下设计（它们都不是只有私有构造函数的抽象类）：

*   具有私有构造函数的最终实用程序类
    *   [http://developer.classpath.org/doc/java/lang/Math-source.html](http://developer.classpath.org/doc/java/lang/Math-source.html)
    *   [http://developer.classpath.org/doc/java/lang/System-source.html](http://developer.classpath.org/doc/java/lang/System-source.html)
*   具有抛出异常的私有构造函数的最终实用程序类
    *   [http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/Objects.java](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/Objects.java)
*   既不是具有私有构造函数的抽象实用程序类也不是最终实用程序类
    *   [http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/ArrayPrefixHelpers.java](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/ArrayPrefixHelpers.java)
    *   [http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/Arrays.java](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/Arrays.java)
    *   [https://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/Collections.java](https://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/Collections.java)
    *   [http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/FormattableFlags.java](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/FormattableFlags.java)
*   看起来像一个实用程序，但显然可以实例化（没有私有构造函数）
    *   [http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/ArraysParallelSortHelpers.java](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/ArraysParallelSortHelpers.java)****

# php - INR 货币中的 Prestashop 错误

> ID：11625641
> 
> 赞同：1
> 
> 时间：2012-07-24T06:55:41.557
> 
> 标签：php, open-source, shopping-cart, prestashop

我刚刚了解到 Prestashop 中的一个错误，即当我选择默认网站货币为 INR（印度卢比）时，价格显示为用逗号代替点 (.)。

这是截图[http://i.imgur.com/wb8FG.jpg](http://i.imgur.com/wb8FG.jpg)
我用红色箭头和圆圈显示了这个错误。

还有一件事，交叉的旧价格低于当前价格。但它说减价。

我怎样才能消除这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:33:04.837

这不是错误。但它可以从管理部分更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-14T15:15:30.973

这不是错误。您可以从管理员本地化 > 货币中进行配置 ![在此处输入图像描述](../Images/9f61615ad78b78ec16d4fd67d6975d7b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-19T14:47:23.593

您可以从后台进行配置，在选项卡付款>>货币中，选择要更改的货币，您将拥有“格式”字段

编辑：在新版本中（即：我测试过的 1.6.0.9）它在 Localization > Currencies

# ruby-on-rails - 在资产管道中导入 sass 文件的正确语法

> ID：11625643
> 
> 赞同：2
> 
> 时间：2012-07-24T06:55:52.547
> 
> 标签：ruby-on-rails, asset-pipeline

我有 application.scss 看起来完全像这样

```
[code]
/*
*/
@import "compass";
@import "compass/blah/blah";
@import "welcome";
[/code] 
```

欢迎文件通过 erb <%= blah %> 使用 compass mixins 和asset_path 助手。所以我认为命名文件本身的正确方法是

```
"welcome.css.sass.erb" 
```

我将它包含在 application.scss 中

@import "欢迎";

但这只会迫使rails因“出现问题”而中断，并且开发日志中没有提供任何线索。

如果我将欢迎文件名更改为

欢迎.css.erb

但不更改 @import 声明一切都很好。

谁能解释为什么会这样？正确的方法不应该是前一种使用scss、指南针和asset_path吗？

application.scss 语法有问题吗？

随着后来的扩展，我在为生产进行预编译时遇到了问题，我相信这个问题是一切的核心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:47:11.513

安装[`compass-rails`](https://github.com/Compass/compass-rails/)和[`sass-rails`](https://github.com/rails/sass-rails/)宝石：

```
group :assets do
  gem 'sass-rails' # if running rails 3.1 or greater
  gem 'compass-rails'
end 
```

你可以在没有 ERB 的情况下直接在 Sass中使用提供的[资产助手：](https://github.com/rails/sass-rails/#features)

```
.container
  background: url(image_path("background.png")) 0 0 no-repeat 
```

# forms - 如果不可见，symfony 表单字段是否初始化为 null

> ID：11625645
> 
> 赞同：1
> 
> 时间：2012-07-24T06:55:58.903
> 
> 标签：forms, symfony, doctrine-orm

我在表单上的字段很少，例如`name`, `description`, `timestamp`。现在在表单中，我只显示名称和描述，但不显示时间戳。

```
public function __construct()
{
    $this->setTimestamp(new \DateTime());
} 
```

现在在我的数据库中，它是空的。

要么学说没有执行构造函数，要么这些字段在表单中显示时设置为 null。即使我没有展示它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:18:56.883

您需要将时间戳字段放入您的 FormType。

如果您不需要显示它，只需隐藏该字段并设置默认值即可。

像这样的东西：

```
$builder->add('timestamp', 'hidden', array(
    'data' => new \DateTime(),
)); 
```

不要忘记`{{form_rest(form)}}`在树枝模板的末尾发送所有隐藏字段。

# asp.net - ASP.NET Web App 的配置文件提供程序 - 自动连接属性

> ID：11625647
> 
> 赞同：1
> 
> 时间：2012-07-24T06:56:05.563
> 
> 标签：asp.net, web-applications, asp.net-profiles

在 ASP.NET 网站中，可以通过对 Web.Config 部分的一些简短添加来将自动神奇的连接属性添加到用户配置文件中。

例如，像这样的一些 XML。

```
<profile>
  <providers>
    <clear/>
    <add name="AspNetSqlProfileProvider" connectionStringName="LocalSqlServer" applicationName="/" type="System.Web.Profile.SqlProfileProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
  </providers>
  <properties>
    <add name="Name" allowAnonymous="true"/>
    <add name="VisitedOn" type="System.DateTime" allowAnonymous="true"/>
  </properties>
</profile> 
```

你最终将有能力做到这一点。无需声明任何进一步的代码。

```
Profile.Name = "Some Test Value";
Profile.VisitedOn = DateTime.Now;
Profile.Save(); 
```

我试图在 ASP.NET Web 应用程序中复制此功能，但似乎找不到基本配置文件声明，更不用说自定义属性了。

然而，我发现它`System.Web.Profile.DefaultProfile.Properties`确实包含我在 Web.Config 中定义的自定义声明属性。

那么我可能哪里出错了？在网络应用程序中获取自动连接属性的过程是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:13:49.053

这些属性是在第一个请求到达时在 ASP.NET Web 应用程序的编译期间创建的。

参考：[IIS 5.0 和 6.0 的 ASP.NET 应用程序生命周期概述](http://msdn.microsoft.com/en-us/library/ms178473.aspx)

> 在 Web.config 文件中定义的配置文件属性 如果在应用程序的 Web.config 文件中定义了配置文件属性，则会生成一个包含配置文件对象的程序集。

您可以通过编写自定义[BuildProvider](http://msdn.microsoft.com/en-us/library/system.web.compilation.buildprovider)并注册它来挂钩此编译。此构建提供程序可用于生成自动连接属性。

# perl - 嵌套while循环来计算多个目的地的距离

> ID：11625649
> 
> 赞同：5
> 
> 时间：2012-07-24T06:56:12.163
> 
> 标签：perl, geolocation, while-loop

好吧，我现在搞砸了。我想使用严格和警告创建一个合适的脚本（对我来说仍然是一个挑战；）。但现在我完全迷路了。我一直在看这么多的例子，我完全糊涂了。我正在尝试使用纬度/经度计算两点之间的距离。我想我已经用 gis::distance 覆盖了那部分。但问题是我试图找到彼此相距 5000 米以内的目的地。（如果目的地相同，则跳过）。因此，当它找到一个距离另一个目的地 5000m 以内的目的地时，我希望它把它放在第一个文件中的最后一个元素之后。

两个输入文件是相同的，这是它们的外观。这两个文件都有大约 45k 行。

```
Europe;3;France;23;Parijs;42545;48,856555;2,350976
Europe;3;France;23;Parisot;84459;44,264381;1,857827
Europe;3;France;23;Parlan;11337;44,828976;2,172435
Europe;3;France;23;Parnac;35670;46,4533;1,4425
Europe;3;France;23;Parnans;22065;45,1097;5,1456 
```

假设这些目的地中的 2 个彼此靠近，我试图像这样输出它：

```
Europe;3;France;23;Parijs;42545;48,856555;2,350976;Parlan;11337;200
Europe;3;France;23;Parisot;84459;44,264381;1,857827;
Europe;3;France;23;Parlan;11337;44,828976;2,172435;
Europe;3;France;23;Parnac;35670;46,4533;1,4425;Parisot;84459;2000;Parnans;22065;350
Europe;3;France;23;Parnans;22065;45,1097;5,1456; 
```

实际结果当然会匹配超过 2 个。在输出文件中添加匹配的目的地、目的地 id 和计算的距离。每个目的地可能有多个匹配项。Pff 这真的很难解释哈哈。正如我所说，我正在使用 strict&warnings 并将错误缩小到最低限度，但仍不完全。这些是错误：

```
Global symbol "$infile1" requires explicit package name at E:\etc.pl line 17.
Execution of E:\etc.pl aborted due to compilation errors. 
```

这是我到目前为止的代码。我的声明也没有正面或反面。

有人能帮我吗？（也许这不是最有效的方法，但现在它可以帮助我更多地理解 perl，一步一步）

```
use strict;
use warnings;
use GIS::Distance::Lite qw(distance);

my $inputfile1 = shift || die "Give input!\n";
my $inputfile2 = shift || die "Give more input!\n";
my $outputfile = shift || die "Give output!\n";

open my $INFILE1, '<', $inputfile1  or die "In use/Not found :$!\n";
open my $INFILE2, '<', $inputfile2  or die "In use/Not found :$!\n";
open my $OUTFILE, '>', $outputfile  or die "In use/Not found :$!\n";

my $maxdist = 5000;
my $mindist = 0.0001;

while ( my @infile1 ){ 
    my @elements = split(";",$infile1);

    my $lat1 = $elements[6];
    my $lon1 = $elements[7];

    $lat1 =~ s/,/./g;
    $lon1 =~ s/,/./g;

    seek my $infile2, 0, 0;

    print "1\. $lat1\n";
    print "2\. $lon1\n";

    while ( my @infile2 ){
        my @loopelements = split(";",$infile2);

        my $lat2 = $loopelements[6];
        my $lon2 = $loopelements[7];

        $lat2 =~ s/,/./g;
        $lon2 =~ s/,/./g;

        print "3\. $lat1\n";
        print "4\. $lon1\n";

        my $distance = distance($lat1, $lon1 => $lat2, $lon2);      # Afstand berekenen tussen latlon1 and latlon2

        print "5\. $distance\n";

        my $afstand = sprintf("%.4f",$distance);

        print "6\. $afstand\n";

        if (($afstand < $maxdist) and (!($elements[4] == $loopelements[4]))){ 
            push (@elements, $afstand,$loopelements[4],$loopelements[5]);
            print "7\. $afstand\n";
            } else {
                next;
                }
        }

  @elements = join(";",@elements);  # add ';' to all elements
  print OUTFILE "@elements";
  #if ($i == 10) {last;}
  }
close(INFILE1);
close(INFILE2);
close(OUTFILE); 
```

- - - - - - - - 编辑 - - - - - - -

嗯，我又来了。我一直在查看您更新的代码，这是我的一个非常激烈的版本哈哈。老实说，我只懂了一半。它仍然很有帮助；全部！我决定通过您的改进坚持我的原始脚本设计，但它仍然无法正常工作。如果您不介意，我有几个问题：

我在剧本中做了一些调整。第一个是它现在跳过带有零的纬度，因为这会产生无用的结果。在同一行中，它还会跳过空单元格，这也是无用的。我已经为两个 infiles 做了这个。

哦，在我说元素[4]的地方我提到了元素[5]，所以它是数字。所以我把 ne 换成了 != 如果我没记错的话。但我认为我再次创建了一个无限循环，因为它没有循环通过第二个文件。我知道我可能看起来很固执，但我想先了解我的原始脚本，并在我运行我的脚本后立即开始处理你的版本。我认为搜索功能无法正常工作。这是现在的脚本。

```
use strict;
use warnings;
use GIS::Distance::Lite qw(distance);

my $inputfile1 = shift || die "Give input!\n";
my $inputfile2 = shift || die "Give more input!\n";
my $outputfile = shift || die "Give output!\n";

open my $INFILE1, '<', $inputfile1  or die "In use/Not found :$!\n";
open my $INFILE2, '<', $inputfile2  or die "In use/Not found :$!\n";
open my $OUTFILE, '>', $outputfile  or die "In use/Not found :$!\n";

my $maxdist = 3000;
my $mindist = 0.0001;

while (my $infile1 = <$INFILE1> ){
  chomp $infile1;
  my @elements = split(";",$infile1);

  print "1\. $elements[6]\n";
  print "2\. $elements[7]\n";

  my $lat1 = $elements[6];
  my $lon1 = $elements[7];

if ((($lat1 and $lon1) ne '0') and (!($lat1 and $lon1) eq "")){
        $lat1 =~ s/,/./;
        $lon1 =~ s/,/./;
        print "lat1: $lat1\n";
        print "lon1: $lon1\n";  
        } else {
            next;
            }

  print "3\. $lat1\n";
  print "4\. $lon1\n";

  seek $INFILE2, 0, 0;

  while ( my $infile2 = <$INFILE2> ){
    chomp $infile2;
    my @loopelements = split(";",$infile2);

print "5\. $elements[6]\n";
print "6\. $elements[7]\n";

    my $lat2 = $loopelements[6];
    my $lon2 = $loopelements[7];

if ((($lat2 and $lon2) ne '0') and (!($lat2 and $lon2) eq "")){
        $lat2 =~ s/,/./;
        $lon2 =~ s/,/./;
        print "lat2: $lat1\n";
        print "lon2: $lon1\n";  
        } else {
            next;
            }

my $distance = distance($lat1, $lon1 => $lat2, $lon2);      # Afstand berekenen tussen latlon1 and latlon2

print "7\. $distance\n";

my $afstand = sprintf("%.4f",$distance);

print "8\. $afstand\n";

if ($afstand < $maxdist && $elements[4] != $loopelements[4]){ 
  push (@elements, $afstand, $loopelements[4],$loopelements[5]);
  print "9\. $afstand\n";
    } else {
        next;
        }
  }
print $OUTFILE join(";",@elements), "\n";
}

close($INFILE1);
close($INFILE2);
close($OUTFILE); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T07:36:34.347

你已经很好了。让我们看一下您的错误消息。

> 全局符号 "$infile1" 需要在 E:\etc.pl 第 17 行显示包名。

这个很简单。在 Perl 中，所有[变量名](http://perldoc.perl.org/perlvar.html#The-Syntax-of-Variable-Names)都区分大小写。在顶部，您创建了一个[词法](http://perldoc.perl.org/functions/my.html)变量 `$INFILE1`。稍后我将详细讨论词汇。

```
open my $INFILE1, '<', $inputfile1  or die "In use/Not found :$!\n"; 
```

在这里，您可以将其全部大写，这没关系。如果它可以帮助您记住它是一个词法文件句柄（文件句柄曾经是全局的并且命名为`INFILE1`），那么您可以这样做。**但**稍后（在第 17 行）您使用`$infile1`.

```
my @elements = split(";",$infile1); 
```

您尚未声明该变量（使用`my`），因此会引发此错误。但这还不是全部。

我相信您正在尝试从该文件句柄中读取。但这不起作用。我将逐步解释这一点。- 事实上，你已经建立了一个无限循环，但你还没有意识到它。

```
 while ( my @infile1 ){ 
```

这个`while`循环不会停止。曾经。`@infile1`with的声明`my`总是返回一个真值，因为它总是有效的。所以你永远不会打破循环。

*   我猜您正在尝试逐行读取文件。那么让我们看看我们如何做到这一点：

    ```
    while (my $infile1 = <$INFILE1> ){ 
      my @elements = split(";",$infile1); 
    ```

    您需要像这样从文件中读取。`while`现在，只要文件句柄返回一行，循环头部中的赋值就会为真。一旦它在文件的末尾，它将返回`undef`，从而结束循环。耶。还要注意你 `$infile1`在下一行的`split`now 是如何正确的。

    您还需要添加[`chomp`](http://p3rl.org/chomp)到组合中，因为文件末尾有换行符：

    ```
    while (my $infile1 = <$INFILE1> ){ 
      chomp $infile1;
      my @elements = split(";",$infile1); 
    ```

*   接下来是`seek`线。这看起来像您想从头开始读取第一个文件的每一行的第二个文件。这在某种程度上是有道理的，但效率很低。我稍后再谈。你确实需要改变`my`。您不必在此处创建新变量。另外，请使用正确的名称：

    ```
    seek $INFILE2, 0, 0; 
    ```

*   让我们修复第二个`while`循环：

    ```
    while (my $infile2 = <$INFILE2>){
      chomp $infile2;
      my @loopelements = split(";",$infile2); 
    ```

*   我注意到的下一件事是在第 42 行：

    ```
    my $distance = distance($lat1, $lon1 => $lat2, $lon2); 
    ```

    别担心，这里没有任何问题。我只想指出，这`=>`是另一种写逗号 ( `,`) 的方式。它有时被称为*胖逗号*，它使阅读更容易，例如哈希分配。

*   在第 50 行中，您已经知道了距离。

    ```
    if (($afstand < $maxdist) and (!($elements[4] == $loopelements[4]))){ 
    ```

    [`and`](http://perldoc.perl.org/perlop.html#Logical-And)通常用于进行错误检查。请参阅 perldoc 了解原因。你应该[`&&`](http://perldoc.perl.org/perlop.html#C-style-Logical-And)改用。因为它具有更高的优先级，所以可以省略括号。您还可以更改`!($a == $b)`构造以使用[`!=`](http://perldoc.perl.org/perlop.html#Equality-Operators)运算符。**但**由于它包含城市名称，而且这是一个字符串而不是数字，因此您需要使用`ne`，它与`eq`. 所以这一行现在变成了：

    ```
    if ($afstand < $maxdist && $elements[4] ne $loopelements[4]){ 
    ```

    读起来好多了，不是吗？

*   在第 58 行中，您`join`将数组`@elements`分配给它自己。这很奇怪。它将用一个只有一个元素的新数组替换该数组 - 连接的字符串。让我们把这条线留到下一个项目符号，然后再看它。

*   在第 59 行，您有一个`print`语句，但您现在使用的是一个`OUTFILE`从未创建过的全局文件句柄。相反，您需要从顶部使用您的词法文件句柄，`$OUTFILE`. 如果我们现在将`join`上一行的 from 直接添加到 print 语句中，并`\n`在末尾添加一个换行符，则该行变为：

    ```
    print $OUTFILE join(";",@elements), "\n"; 
    ```

*   现在只剩下最后一部分：您需要关闭文件句柄，但您再次使用全局句柄。改用你的词汇：

    ```
    close($INFILE1);
    close($INFILE2);
    close($OUTFILE); 
    ```

现在完整的代码如下所示：

```
use strict;
use warnings;
use GIS::Distance::Lite qw(distance);

my $inputfile1 = shift || die "Give input!\n";
my $inputfile2 = shift || die "Give more input!\n";
my $outputfile = shift || die "Give output!\n";

open my $INFILE1, '<', $inputfile1  or die "In use/Not found :$!\n";
open my $INFILE2, '<', $inputfile2  or die "In use/Not found :$!\n";
open my $OUTFILE, '>', $outputfile  or die "In use/Not found :$!\n";

my $maxdist = 5000;
my $mindist = 0.0001;

while (my $infile1 = <$INFILE1> ){
  chomp $infile1;
  my @elements = split(";",$infile1);

  my $lat1 = $elements[6];
  my $lon1 = $elements[7];

  $lat1 =~ s/,/./g;
  $lon1 =~ s/,/./g;

  print "1\. $lat1\n";
  print "2\. $lon1\n";

  seek $INFILE2, 0, 0;

  while ( my $infile2 = <$INFILE2> ){
    chomp $infile2;
    my @loopelements = split(";",$infile2);

    my $lat2 = $loopelements[6];
    my $lon2 = $loopelements[7];

    $lat2 =~ s/,/./g;
    $lon2 =~ s/,/./g;

    print "3\. $lat1\n";
    print "4\. $lon1\n";

    my $distance = distance($lat1, $lon1 => $lat2, $lon2);      # Afstand berekenen tussen latlon1 and latlon2

    print "5\. $distance\n";

    my $afstand = sprintf("%.4f",$distance);

    print "6\. $afstand\n";

    if ($afstand < $maxdist && $elements[4] ne $loopelements[4]){ 
      push (@elements, $afstand,$loopelements[4],$loopelements[5]);
      print "7\. $afstand\n";
    } else {
      next;
    }
  }

  print $OUTFILE join(";",@elements), "\n";
}

close($INFILE1);
close($INFILE2);
close($OUTFILE); 
```

* * *

现在看看你的算法的工作方式：首先读取完整的第二个文件，然后在每次迭代中与第一个文件进行比较会更有效。这样，您只需读取文件一次。

```
use strict;
use warnings;
use GIS::Distance::Lite qw(distance);
use feature qw(say);

my $inputfile1 = shift || die "first file missing";
my $inputfile2 = shift || die "second file missing";
my $outputfile = shift || die "output file missing!";

# Read the second file first
my @file2; # save the lines of INFILE2 as array refs
open my $INFILE2, '<', $inputfile2  or die "In use/Not found :$!";
while ( my $infile2 = <$INFILE2> ){ 
  chomp $infile2;
  my @loopelements = split(/;/, $infile2);

  $loopelements[6] =~ y/,/./;
  $loopelements[7] =~ y/,/./;

  push @file2, \@loopelements;
}
close($INFILE2);

open my $INFILE1, '<', $inputfile1  or die "In use/Not found :$!";
open my $OUTFILE, '>', $outputfile  or die "In use/Not found :$!";

my $maxdist = 5000;
my $mindist = 0.0001;

while (my $infile1 = <$INFILE1> ){
  chomp $infile1;
  my @elements = split(";",$infile1);

  my $lat1 = $elements[6];
  my $lon1 = $elements[7];

  $lat1 =~ y/,/./;
  $lon1 =~ y/,/./;

  say "1\. $lat1";
  say "2\. $lon1";

  FILE2: foreach my $loopelements ( @file2 ){
    my ($lat2, $lon2) = @$loopelements[6, 7];

    say "3\. $lat2";
    say "4\. $lon2";

    my $distance = distance($lat1, $lon1 => $lat2, $lon2);      # Afstand berekenen tussen latlon1 and latlon2

    say "5\. $distance";

    my $afstand = sprintf("%.4f",$distance);

    say "6\. $afstand";

    if ($afstand < $maxdist && $elements[4] ne $$loopelements[4]){ 
      push (@elements, $afstand, $$loopelements[4], $$loopelements[5]);
      say "7\. $afstand";
    } else {
      next FILE2;
    }
  }

  say $OUTFILE join(";",@elements);
}

close($INFILE1);
close($OUTFILE); 
```

现在，让我们看看我改变了什么。

*   首先，我添加`use feature qw(say)`到顶部。[`say`](http://perldoc.perl.org/functions/say.html)与 相同`print`，但增加了一个新行。这样可以节省一些打字。另请参阅[`feature`](http://perldoc.perl.org/feature.html#The-%27say%27-feature)以获取更多信息。
*   我从所有`die`语句中删除了“\n”字符。如果你在那里放一个新行，它会从输出中删除行号。如果这是有意的，请忽略此建议。这是[Perldoc](http://perldoc.perl.org/functions/die.html)对此的看法：

    > 如果 LIST 的最后一个元素没有以换行符结尾，则还会打印当前脚本行号和输入行号（如果有），并提供换行符。

*   最重要的部分是我对算法所做的更改。我将`while`第二个文件的循环移到另一个`while`循环之外，到程序的顶部。该文件被吞入数组`@file2`中。每个元素都包含一个数组 ref，其中包含该行的字段。逗号已更改为句号。

    我将[`s///`](http://perldoc.perl.org/functions/s.html)替换运算符更改为[`y///`](http://perldoc.perl.org/functions/y.html)（短[`tr///`](http://perldoc.perl.org/functions/tr.html)）音译运算符。因为你只改变一个标志，这就足够了。它也更快。即使您将正则表达式替换留在其中，您也不需要`/g`修饰符，因为浮点数只有一个逗号，因此不必进行多次替换。

    现在所有这些事情只为file2完成一次。当完成 40k+ 次时，这可以节省大量的计算时间。

*   我更改了错误消息的措辞，以便更好地理解它们。那是偏好。你不必那样做。

*   我将第二个更改`while`为`foreach`循环以迭代新`@file2`数组的元素。为了清楚起见，我确实留下了`$lat2`and `$lon2`vars。您可以省略这些，并直接使用 array(ref) 元素。在作业中，我使用了一个[数组切片](http://perldoc.perl.org/perldata.html#Slices)将其放入一行。

*   由于`$loopelements`replaces并且它是一个数组 ref，因此我们需要使用now`@loopelements`访问存储在其中的数据。`$$loopelements[$index]`

我希望这可以帮助您理解为什么我做出了某些改进。

请记住，在 Perl 中有不止一种方法可以做到这一点——这是一件好事。很少有*正确的方法*，但通向目标的方法往往很多。有些比其他的更有效，而其他的有时更容易维护。诀窍是在这两种情况之间找到适当的平衡。

* * *

**更新：**

这是我使用的输入文件。您将需要它们来比较结果。

*文件 1.csv*：

```
Europe;3;France;23;Parijs;42545;48,856555;2,350976
Europe;3;France;23;Parisot;84459;44,264381;1,857827
Europe;3;France;23;Parlan;11337;44,828976;2,172435
Europe;3;France;23;Parnac;35670;46,4533;1,4425
Europe;3;France;23;Parnans;22065;45,1097;5,1456 
```

*文件 2.csv*：

```
Europe;3;France;23;Parlan;11337;44,828976;2,172435
Europe;3;France;23;Parnac;35670;46,4533;1,4425
Europe;3;France;23;Parnans;22065;45,1097;5,1456
Europe;3;France;23;Parijs;42545;48,856555;2,350976
Europe;3;France;23;Parisot;84459;44,264381;1,857827 
```

# php - 从动态生成的列表中在 PHP 网页之间传递数据

> ID：11625654
> 
> 赞同：1
> 
> 时间：2012-07-24T06:56:24.473
> 
> 标签：php, javascript, jquery

我有一个 PHP 代码，它在如下表单中生成一个动态列表，请注意该列表是从数据库动态构建的：

```
echo '<form name="List" action="checkList.php" method="post">';
while($rows=mysqli_fetch_array($sql))
{
echo "<input type='password' name='code' id='code'>";
echo "<input type='hidden' name='SessionID' id='SessionID' value='$rows[0]' />";
echo "<input type='submit' value='Take Survey'>";
} 
```

我需要的是当他单击该行的按钮到另一个页面时发布与用户选择相对应的数据。如果我们将超链接与查询字符串一起使用，则不会有问题，因为我将使用 GET 请求从其他页面接收数据，并且超链接在显示给用户时将是静态的。我还需要从文本框中获取用户输入，这只能通过 POST 请求来实现。

只需从另一个页面（checkList.php）我需要这些数据进行进一步处理：

```
$SessionID=$_POST['SessionID'];
$Code=$_POST['code']; 
```

因为我有一个生成字段的 while 循环，所以我总是从数据库中接收最后一个条目，而不是与用户从 LIST 中选择的行（行）相对应的那个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:28:36.543

我不确定这是否正确

```
echo '<form name="List" method="post">';
while($rows=mysqli_fetch_array($result))
{
echo "<input type='password' name='code' id='code'>";
echo "<input type='button' value='Take Survey' onclick=show($rows[0])>";
echo "<br>";
} 
```

和 javascript

```
<script>
function show(id)
{
alert(id);
window.location="checkList.php?id="+id;
}
</script> 
```

在 checkList.php 上

```
$id=$_GET['id'];
echo $id; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T08:19:38.130

我将建议您清理变量的名称，以便您的代码至少可以告诉我们它应该做什么。很少有人查看您的代码并且在尝试查看您要完成的工作时遇到很多麻烦：P，特别是当您需要帮助时；]。我将尝试一些事情，并希望它可以让你做你想做的事情更容易理解，也许能让你得到答案。

尽量不要在脚本中不必要地回显大量 HTML 是很好的，所以首先我要从不需要的地方删除回显。

其次，我将使用一个 mysql 函数，它返回一个更容易处理的结果。 `$user = mysqli_fetch_assoc($sql)`

第三，我不知道有名字的表单是否真的对 php 的后端或前端有任何作用，所以我只是要删除一些你漂浮在周围的额外外壳，它们要么是无效的 HTML，要么只是没有当您向我们展示时，不要为您尝试做的事情增加任何价值。

是的，我们“注意到”您正在从数据库构建一些东西，因为代码看起来确实如此 =P。

我也很遗憾看到其他答案没有关于编码风格或任何关于回显这样的 html 的建议:(。

```
<?php while($user = mysqli_fetch_assoc($sql)): ?>
<form action="checkList.php" method="post">
    <input type='password' name='code' value='<?php echo $user['code'] ?>' />
    <input type='hidden' name='SessionID'  value='<?php echo $user['id'] //Whatever you named the field that goes here ?>' />
    <input type='submit' value='Take Survey' />
</form>
<?php endwhile; ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T07:15:15.267

您可以在 checkList.php 中检查 $_POST['code'] 是否存在，如果存在则检索将从数据库生成的 $_POST['SessionID']。但有一件事，如果您在一个表单中包含所有隐藏字段，它们都将被发送，因此您需要考虑如何纠正它 - 可能为每个隐藏字段、提交按钮和其他 POST 字段设置单独的表单。之后，您将能够以您需要的方式获取数据 - $SessionID=$_POST['SessionID']; 我想这是解决这个问题的最简单方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T07:20:27.053

你可以尝试这样的事情：

```
while($rows=mysqli_fetch_array($sql))
{
$index = 1;
echo "<input type='password' name='code' id='code'>";
//Attach $index with SessionID
echo "<input type='hidden' name='SessionID_$index' id='SessionID' value='$rows[0]' />";
echo "<input type='submit' value='Take Survey'>";
} 
```

在 checkList.php 上

```
 <?php 
  $num = explode('_', $_POST['SessionID']);
  $num = $num[1];
  //in $num you will get the number of row where you can perform action

 ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T07:57:31.887

```
$form = 1;
while($rows=mysqli_fetch_array($sql))
{

echo '<form name="List_$form" action="checkList.php" method="post">';
echo "<input type='password' name='code' id='code_$form'>";
echo "<input type='hidden' name='SessionID' id='SessionID_$form' value='$rows[0]' />";
echo "<input type='submit' value='Take Survey'>";
echo '</form>';
$form++;
} 
```

# apache - WAMP 限制日志文件大小

> ID：11625657
> 
> 赞同：2
> 
> 时间：2012-07-24T06:56:47.297
> 
> 标签：apache, logging, wamp, error-log, access-log

wamp 中是否有任何功能可以将访问和错误日​​志限制为 20 MB？即它应该在 20 MB 之后被截断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:01:53.797

通常（在 linux 上）日志由另一个系统管理（例如日志轮换），不是 apache 自己管理它们 - 如果你理解法语[，有人做了 logrotate.bat 并在 wampserver 论坛上共享它](http://forum.wampserver.com/read.php?1,73910)- 因此你可以使用也记录Windows的旋转系统

希望这可以帮助

# c# - 还记得用户在 cookie 中选择 TimeZoneInfo，从 C# 中使用的属性吗？

> ID：11625661
> 
> 赞同：4
> 
> 时间：2012-07-24T06:57:05.910
> 
> 标签：c#, asp.net, timezone

我有一个 DropDownList 控件，其中填充了来自调用的 TimeZones：

```
ReadOnlyCollection<TimeZoneInfo> tzCollection;
tzCollection = TimeZoneInfo.GetSystemTimeZones(); 
```

现在我想添加一个选项来记住持久 cookie 中以前的用户选择，但我不知道要使用哪个参数：我想使用与 GMT/UTC 的时间偏移，但可能有几个时区在具有相同偏移量的列表中。并且使用 TimeZoneInfo.Id 属性对我来说似乎也很糟糕，因为它由诸如“太平洋标准时间”之类的描述性字符串表示，这可能会给本地化带来问题（如果是外语）。

所以有什么建议我应该用什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T06:58:59.140

`TimeZoneInfo.Id`正是要使用的价值。然后，您可以使用[`TimeZoneInfo.FindSystemTimeZoneById`](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.findsystemtimezonebyid.aspx).

尽管它*看起来*像一个可本地化的字符串，但实际上并非如此 - 我*相信*无论您使用哪种文化，您都会得到相同的结果。（说实话还不清楚——我发现很难说服任何属性在测试程序中给出非英语结果。）

# ruby-on-rails - 在 Heroku 上运行 delay_job 工作者？

> ID：11625662
> 
> 赞同：16
> 
> 时间：2012-07-24T06:57:14.270
> 
> 标签：ruby-on-rails, heroku, terminal, delayed-job

所以现在我有一个延迟作业的实现，它可以在我的本地开发环境中完美运行。为了在我的机器上启动worker，我只是运行`rake jobs:work`它并且它运行良好。

为了让delayed_job 在heroku 上工作，我一直在使用几乎相同的命令：`heroku run rake jobs:work`. 该解决方案有效，无需我为 Heroku 的工作人员成本支付任何费用，但我必须保持命令提示符窗口打开，否则 delay_job 工作人员会在我关闭它时停止。即使我关闭命令窗口，是否有一个命令可以永久保持这个 delay_job 工作人员工作？还是有另一种更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-25T04:42:50.047

我推荐使用[无用 gem](https://github.com/lostboy/workless)在 heroku 上运行延迟的工作。我现在使用它 - 它非常适合我，零麻烦和零成本。

我还使用[了hirefireapp](http://hirefireapp.com/)，它可以更好地控制扩展工人。这需要花费，但成本低于单个 heroku 工人（超过一个月）。我现在不用这个，但是用过，效果很好。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-24T10:31:40.440

添加

```
worker: rake jobs:work 
```

到你的`Procfile`.

**编辑：**

即使您从控制台运行它，您也可以“购买”工人测功机，但 Heroku 具有每秒计费。所以你不用付钱，因为你有 750 小时的免费时间，而在最坏的情况下，一个月有 744 小时，所以你有 6 小时的免费时间用于额外的测功机、调度程序任务等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T10:29:02.780

我还没有亲自尝试过，但你可能会觉得`nohup`有用。即使您关闭了终端窗口，它也允许您的进程运行。链接： http: [//linux.101hacks.com/unix/nohup-command/](http://linux.101hacks.com/unix/nohup-command/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-21T02:01:05.583

使用 heroku 控制台让工人进入工作岗位只会为工作创建一个临时的测功机。要保持作业在没有 cli 的情况下运行，您需要按照@Lucaksz 的建议将该命令放入 Procfile 中。

部署后，您还需要缩放 dyno 形成，因为 heroku 需要知道应该将多少 dyno 放入进程类型，如下所示： **heroku ps:scale worker=1**

可以在此处阅读更多详细信息[https://devcenter.heroku.com/articles/scaling](https://devcenter.heroku.com/articles/scaling)

# jboss - JBoss AS 7 每 15 分钟停止一次

> ID：11625665
> 
> 赞同：1
> 
> 时间：2012-07-24T06:57:21.280
> 
> 标签：jboss, jboss7.x

JBoss AS 7 每 15 分钟停止一次。

请告诉我这个配置在哪里，以便我可以删除它。我希望服务器运行，直到我用`./stopserver.sh`它来停止它。

如果我从命令提示符运行服务器并在保持空闲 1 小时后执行事务，则只有第一次命中失败并出现以下错误：

{03:37:31,526 INFO [stdout] (http--0.0.0.0-8080-1) 上面执行 03:38:26,073 错误 [stderr] (http--0.0.0.0-8080-1) java.sql。 SQLException：Io 异常：操作超时 03:38:26,074 错误 [stderr] (http--0.0.0.0-8080-1) 在 oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112) 03:38： 26,075 错误 [stderr] (http--0.0.0.0-8080-1) 在 oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:146) 03:38:26,075 错误 [stderr] (http--0.0.0.0 -8080-1) 在 oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:255) 03:38:26,076 错误 [stderr] (http--0.0.0.0-8080-1) 在 oracle.jdbc.driver。 T4CCallableStatement.executeForRows(T4CCallableStatement.java:976) 03:38:26,077 错误 [stderr] (http--0.0.0.0-8080-1) 在 oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1168)}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T03:45:08.063

服务器因超时而停止，因此我们需要在standalone.xml 中添加“deployment-timeout”，如下所示：

`<subsystem xmlns="urn:jboss:domain:deployment-scanner:1.1"> <deployment-scanner path="deployments" relative-to="jboss.server.base.dir" scan-interval="5000" deployment-timeout="1200"/> </subsystem>`

# eclipse - Datanucleus Maven 插件

> ID：11625666
> 
> 赞同：8
> 
> 时间：2012-07-24T06:57:36.047
> 
> 标签：eclipse, maven

如何使用 Eclipse maven 项目解决此问题：

> 生命周期配置未涵盖插件执行：org.datanucleus:maven-datanucleus-plugin:3.1.0-m3:enhance (execution: default, phase: compile) pom.xml /DatanucleusJPA line 218 Maven Project Build Lifecycle Mapping Problem

Eclipse M2 Eclipse 插件可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-10T22:28:12.607

**前言：**

*我想这根本不是**Datanucleus**特有的，而是**Eclipse Maven 插件的一个特性**。**如果在命令行**(Linux) 或 Cygwin [[1]](http://cygwin.com) (Windows)上运行，您所尝试的一切显然都有效。这里的问题是 Eclipse m2 插件需要更多信息才能正常工作并发挥作用，这就是问题所在，这就是你问的原因。*

**可能的解决方案：**

就像评论中已经指出的那样，每个细节都可以从给定的链接中找到[[2]](http://wiki.eclipse.org/M2E_plugin_execution_not_covered) M2E 站点，并且要点出现在对同一问题的一个问题[[3]](https://stackoverflow.com/questions/6352208/how-to-solve-plugin-execution-not-covered-by-lifecycle-configuration-for-sprin)的答案中。我从其中一个答案中摘录了这个片段：

```
<action>
    <execute />
</action> 
```

这些行应该没问题，添加到`<plugin-executions>`项目元素内的最后一个元素内`pom.xml`。我不是魔术师，我只能使用谷歌，所以如果没有给出有问题的代码/pom 内容，我建议你遵循 Datanucleus 自己的说明[[4]](http://www.datanucleus.org/products/accessplatform_3_1/enhancer.html)并有类似的东西：

```
<plugins>
    <plugin>
        <groupId>org.datanucleus</groupId>
        <artifactId>maven-datanucleus-plugin</artifactId>
        <version>3.1.0-m3</version>
        <configuration>
            <log4jConfiguration>${basedir}/log4j.properties</log4jConfiguration>
            <verbose>true</verbose>
        </configuration>
        <executions>
            <execution>
                <phase>process-classes</phase>
                <goals>
                    <goal>enhance</goal>
                </goals>
            </execution>
        </executions>
    </plugin>
</plugins> 
```

..好吧，它只是`<executions>`，但把它放在那里。

**边注：**

*有趣的是，在使用谷歌搜索问题时，这个问题已经被我投票了，我选择的答案是不同的，看起来像这样：*

```
<build>
    <pluginManagement>
        <plugins>
             <plugin> ... </plugin>
             <plugin> ... </plugin>
              ....
         </plugins>
    </pluginManagement>
</build> 
```

*..诀窍是将那`<pluginmanagement>`部分添加到 xml 中。我只记得从 SVN 获取了我的项目的新副本，之后我就不再使用那个技巧了。也许这个问题是老问题，或者我公司里有人犯了这个把戏。无论如何，也值得测试。*

**回答问题：**

不是，不是直接使用插件，而是调整`pom.xml`文件。

**我的消息来源：**

[1] [http://cygwin.com](http://cygwin.com) - 在 Windows 上运行 Linux 命令。
[2] [http://wiki.eclipse.org/M2E_plugin_execution_not_covered](http://wiki.eclipse.org/M2E_plugin_execution_not_covered) - 在评论中建议
[3][如何解决 Spring Data Maven 构建的“生命周期配置未涵盖的插件执行”](https://stackoverflow.com/questions/6352208/how-to-solve-plugin-execution-not-covered-by-lifecycle-configuration-for-sprin) - 包括报价行

# html - 如何使用 HTML5 将各种设备与浏览器集成？

> ID：11625669
> 
> 赞同：1
> 
> 时间：2012-07-24T06:57:54.350
> 
> 标签：html, mobile, integration

我正在开发一种 POS 应用程序，现在的要求是将各种设备与应用程序集成，如相机、磁卡读卡器、打印机等。任何人都可以分享如何使用 HTML5 将各种设备与使用构建的应用程序集成的链接HTML5。?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:08:33.253

没有用于相机、读卡器或您提到的其他硬件设备的 HTML5 API。最好的选择可能是使用诸如[PhoneGap](http://phonegap.com)之类的技术创建一个“混合”应用程序。

PhoneGap 在原生包装器中执行您的 HTML5 应用程序。这允许它通过 JavaScript API 向您的代码公开硬件功能。

# ios - 从应用商店安装新版本后的 iOS 应用行为

> ID：11625670
> 
> 赞同：6
> 
> 时间：2012-07-24T06:57:59.823
> 
> 标签：ios, version, behavior

我从应用商店在 iPhone 中安装了一个 iOS 应用，现在，如果我在应用商店有相同应用的更新版本 1.1，并且我从旧版本 1.0 中收到某种信息警报（新版本可用... ）。

如果我单击 alertview 的 ok 按钮，它会将我重定向到浏览器中的新应用程序链接。然后我下载我的新版本。

请提供以下问题的答案：

1.  它会取代旧版本吗？
2.  它会替换文档路径上的 sqlite 和 image 文件夹吗？（两个版本都有同名的 sqlite 文件，比如 abc.sqlite1.0 和相同的文件夹名称，比如 imagesToBeCopied）
3.  它会为同一实体附加带有新行的 sqlite 实体行吗？
4.  如何从应用商店再次安装 1.0 版？有没有可能得到它？

请提供您宝贵的答案，这可以帮助我找到一些解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:42:48.400

> 1.会取代旧版本吗？

是的，应用程序包将被新的替换

> 2.会不会替换文档路径上的sqlite和image文件夹？（两个版本都有同名的 sqlite 文件，比如 abc.sqlite1.0 和相同的文件夹名称，比如 imagesToBeCopied）

不，文档目录不受更新过程的影响。如果您的代码中有更新文档目录的过程，它们仍然会运行，但如果没有任何更改，它与您的应用程序的正常启动没有什么不同 - 例如，如果您检查并在需要时复制，从捆绑包到文档目录，这只会在目标文件不存在时发生。

> 3.它会在sqlite实体行中附加同一实体的新行吗？

这与更新过程无关。如果您想在更新过程中修改数据，您将在新版本的首次启动代码中专门编写此内容。

> 4.如何从应用商店重新安装1.0版本？有没有可能得到它？

不，更新版本取代了应用商店中的旧版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:43:27.710

尽我所知...

1.  是的，新版本的应用程序将替换旧版本。
2.  是的，假设您的路径没有跨版本更改，它将替换您的 sqlite 文件。如果您想处理这种情况，您有责任在较新版本的应用程序中包含逻辑以检查 sqlite 文件的存在并相应地覆盖或修改它。
3.  不，对 sqlite 文件的所有修改都需要由新版本手动完成（参见 #2）。
4.  截至目前，无法通过应用商店执行此操作。一次只能放置任何应用程序的一个版本进行“销售”。您将不得不通过其他方式来做到这一点（例如 testflightapp.com [for adhocs for devs]）。

# android - 适用于 Android 2.1 的 Flurry SDK？

> ID：11625672
> 
> 赞同：2
> 
> 时间：2012-07-24T06:58:01.107
> 
> 标签：android, flurry

是否有适用于 Android 2.1 的 Flurry SDK 版本？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T07:08:50.463

是的，Flurry SDK 适用于 Android 2.1。你需要做的是跟随。在这里注册：[www.flurry.com](http://www.flurry.com)

在此之后，您必须创建一个新项目，而不是执行以下步骤：

1.  将 FlurryAgent.jar 添加到应用程序的类路径中

    *   如果您使用的是 Eclipse，请修改您的 Java 构建路径，然后选择 Add External JAR... 或使用 Gradle + Jcenter`compile 'com.flurry.android:analytics:6.2.0'`
    *   如果您直接使用 SDK 工具，请将其放入您的 libs 文件夹中，然后 ant 任务会拾取它。
2.  配置 AndroidManifest.xml

所需权限：

```
android.permission.INTERNET 
```

需要将分析数据发送回 Flurry 服务器可选权限：

```
android.permission.ACCESS_COARSE_LOCATION or android.permission.ACCESS_FINE_LOCATION 
```

如果您的应用程序具有位置权限，分析将跟踪您的应用程序的使用位置。没有这个，只有国家级的位置信息可用。即使您的应用程序有权限，也要禁用详细的位置报告，调用`FlurryAgent.setReportLocation(false) before calling FlurryAgent.onStartSession()`并且不会发送详细的位置信息。在清单中指定 versionName 属性以在该版本名称下报告数据。

3.添加对onStartSession和onEndSession的调用

插入对`FlurryAgent.onStartSession(Context, String`) 的调用，向其传递对 Context 对象（例如 Activity 或 Service）的引用，以及应用程序的 API 密钥 [YOURAPIKEYRIGHTHERE]。我们建议在您的应用程序中使用每个 Activity 的 onStart 方法，并将 Activity（或 Service）本身作为 Context 对象传递 - 不建议传递全局 Application 上下文。

```
public void onStart()
{
   super.onStart();
   FlurryAgent.onStartSession(this, "YOURAPIKEYRIGHTHERE");
   // your code
} 
```

`FlurryAgent.onEndSession(Context)`在会话完成时插入呼叫。我们建议在您的应用程序中使用每个 Activity 的 onStop 方法。确保为每次调用 onStartSession 匹配对 onEndSession 的调用，传入用于调用 onStartSession 的相同 Context 对象

```
public void onStop()
{
   super.onStop();
   FlurryAgent.onEndSession(this);
   // your code
} 
```

只要有任何 Context 调用了 onStartSession 但没有调用 onEndSession，会话就会继续。此外，如果一个新的 Context 在最后一个 Context 调用 onEndSession 的 10 秒内调用了 onStartSession，那么会话将被恢复，而不是创建一个新的会话。会话长度、使用频率、事件和错误将继续作为同一会话的一部分进行跟踪。这确保了当用户在您的应用程序中从一个 Activity 转换到另一个 Activity 时，他们不会为每个 Activity 跟踪单独的会话，而是会有一个跨越多个 Activity 的单个会话。如果要跟踪 Activity 使用情况，我们建议使用 onEvent，如下所述。如果您希望更改可以恢复会话的窗口，请`FlurryAgent.setContinueSessionMillis(long milliseconds)`在第一次调用之前调用`FlurryAgent.onStartSession`。

如果您希望更改可以恢复会话的窗口，请`FlurryAgent.setContinueSessionMillis(long milliseconds)`在第一次调用之前调用`FlurryAgent.onStartSession`。

我希望我能帮助你！

祝你有美好的一天！

苹果浏览器

# sql - SQL 更新数据集中的位置

> ID：11625673
> 
> 赞同：11
> 
> 时间：2012-07-24T06:58:16.717
> 
> 标签：sql, arrays, sql-server-2008, where

```
+------------------+
| id1 | id2 | bool |
+------------------+
|  1  |  1  |  F   |
|  1  |  2  |  F   |
|  2  |  1  |  F   |
+------------------+

UPDATE table_name
SET bool = T
WHERE (id1, id2) IN ((1,1),(2,1)) --Need work here 
```

所以基本上我想选择（id1，id2）=（value1，value2）的条件。类似于下面的语句：

```
WHERE id1 = value1 AND id2 = value2 
```

但是在数组中的一组值中。这可能吗？

提前致谢

编辑：我使用的是 SQL Server 2008。如果不太清楚，我很抱歉。我试图把它作为一个存储过程并从服务中调用它。输入将是某种数组（可变大小），并找到与一行中的两个 ID 的匹配项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T11:17:06.550

这是在 MSSql 中执行此操作的方法。您只需要从 Id1 和 Id2 生成一个值（在此示例中为 VARCHAR）。在这种情况下，您可以使用设置了值的 IN 语句。此外，如果在这些字段中允许它们，您应该考虑 id1 和 id2 中的 NULL（只需添加：）`and id1 is not null and id2 is not null`。

```
UPDATE table_name
SET bool = T
WHERE convert(varchar(20),id1)+','+convert(varchar(20),id2) in ('1,1','2,1') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T07:07:53.143

实现这一目标的一个想法是利用临时表

```
Create Table #Temp
(
  id1 int,
  id2 int
)
insert into #Temp values(1,1)
insert into #Temp values(1,2)
insert into #Temp values(2,1)
insert into #Temp values(2,2)

--update data
UPDATE 
table_name 
SET bool = T 
from table_name T1   
inner join #Temp T2 
on T1.Id1= T2.Id1
and T1.Id2= T2.Id2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:12:39.947

试试这个 - SQL Server 2008 版本。

```
create table mytable
(
id1 int,
id2 int,
bool char(1)
);

insert INTO mytable VALUES(1,1,'F');
insert INTO mytable VALUES(1,2,'F');
insert INTO mytable VALUES(2,1,'F');

SELECT * FROM mytable;

update mytable 
set bool='T'
WHERE exists (SELECT id1,id2 from mytable tb2
where mytable.id1 = 1 AND mytable.id2 = 1
or mytable.id1 = 2 AND mytable.id2 = 1);

SELECT * from mytable; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T08:58:20.487

您可以将值列表作为 XML 发送到存储过程。将 XML 解压缩到表变量并用于`exists`查找应更新的行。

```
create procedure YourSP
  @XMLParam xml
as

declare @T table(id1 int, id2 int)

insert into @T(id1, id2)
select T.N.value('id1[1]', 'int'),
       T.N.value('id2[1]', 'int')
from @XMLParam.nodes('/Row') as T(N)

update table_name
set bool = 'T'
where exists (select *
              from @T as T
              where T.id1 = table_name.id1 and
                    T.id2 = table_name.id2) 
```

像这样调用：

```
exec YourSP '<Row>
               <id1>1</id1>
               <id2>1</id2>
             </Row>
             <Row>
               <id1>2</id1>
               <id2>1</id2>
             </Row>' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T07:26:51.400

此查询在 oracle 中有效...

```
UPDATE table_name 
SET BOOL = T 
WHERE (id1, id2) IN (SELECT 1,1 FROM DUAL UNION SELECT 2,1  FROM DUAL); 
```

你的数据库是哪个？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-26T00:30:23.037

你从根本上想做什么？为什么这是你选择这样做的方式？看来您对基于集合的逻辑的理解有些模糊。其他海报提供的每个答案都是有效的并且会起作用，但可能不是最适合您的目的。此处理是否针对现有数据集？它是数据加载或插入过程的一部分吗？您列出的每个 ID 字段都有自己的唯一值范围。根据您的示例，您*真正*想要做的是在 ID2 = 1 时更新 bool 值

```
UPDATE table_name SET Bool = 'T'
WHERE Id2 = 1 
```

您更有可能想要开发一个基于某些数据规则设置 Bool 值的逻辑 - 例如，如果 Id2 小于或等于 Id1。案例陈述在这里有效：

```
UPDATE table_name SET Bool = CASE WHEN Id1 > Id2 THEN 'T' ELSE 'F' END 
```

当您处理大量数据时，这比在 WHERE 子句中为您插入的每个值的变体写入 AND/OR 规则要高效得多。

将 WHERE 视为过滤器，而不是实现 if/then 类型逻辑的地方。

在小型数据插入中（您可以手动在表字段中键入值，或者从某种 Web 表单事务中逐个事务插入），最简单的方法可能是手动设置您认为合适的值，或者将其构建到程序部分您的系统并将验证规则应用于表。

如果您想编写一个执行此操作的存储过程，您可以为 ID 值创建变量并将这些变量链接到将外部信息传输到数据库系统的任何系统。（我假设您已经创建了表结构）；

```
CREATE PROCEDURE table_name_insert
@Id1 Int NOT NULL,
@Id2 Int NOT NULL

-- If you want to execute the logic outside of the DB environment
-- (perhaps as part of an SSIS package) then you will want to add this
-- variable and pass it in explicitly.

, @Bool bit NOT NULL 

AS

DECLARE @sql nvarchar(4000)

SET @sql = '
INSERT INTO table_name (ID1, ID2, Bool)
SELECT @Id1, @Id2, [Case Logic or Variable Value for Bool]
' EXEC sp_executeSQL @sql 
```

这个过程可以由您的程序调用，您可以将可能从数组生成的变量传递给它。还有一些方法可以将值直接导入适当的列，然后在插入后代码中执行 Bool 逻辑。“硬编码”处理每个案例的 WHERE 语句效率低下，并且是一个坏习惯。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-24T07:07:10.527

如果你使用 SQL Server 试试这个

```
 UPDATE table_name
     SET bool = T
     WHERE (convert(varchar 20, id1) + '-' + convert(varchar 20 , id2)) 
      IN (convert(varchar 20 , value1) + '-' + convert(varchar 20 , value2),
        convert(varchar 20 , value3) + '-' + convert(varchar 20 , value4)); 
```

如果您使用的是 oracle，请尝试此操作

```
 UPDATE table_name
     SET bool = T
       WHERE (id1 || '-' || id2) IN (value1 || '-' || value2) 
```

如果我们有多个要匹配的值，通常我们使用 in 子句。假设你 (id1 = value1 and id2 =value2) and (id1 = value3 and id2 =value4)

```
 UPDATE table_name
     SET bool = T
     WHERE (id1 || '-' || id2) IN (value1 || '-' || value2, value3 || '-' || value4) 
```

# java - 在java中处理异常并继续进程而不终止

> ID：11625678
> 
> 赞同：2
> 
> 时间：2012-07-24T06:58:39.993
> 
> 标签：java, xml, xml-parsing

我正在研究java，我读取了大量的XML文件并将它们插入ORACLE数据库但是在插入时我得到了异常，然后我的程序终止而不处理剩余的记录，任何人都可以帮助我摆脱这种情况，我想要读取文件，直到它们在发生异常时在没有终止程序的情况下完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:08:49.677

```
for (File f : myFileArray) { //Or whatever you have
   try {
       // your code which might throw exception
   } catch ( <Your exception name here> e) {
       System.err.println("File failed: " + f.getAbsoultePath() );
       continue; //if more code follows the try catch block, otherwise omit it
   }
} 
```

由于您没有为您的实际操作提供任何代码片段，因此我尝试猜测。

正如评论所暗示的，您使用 try/catch-Blocks 来处理 Java 中的异常。

一个很好的教程是恕我直言

[http://chortle.ccsu.edu/java5/index.html](http://chortle.ccsu.edu/java5/index.html)

第 80 和 81 章。

# objective-c - 多个 CALayers 动画 - 填充模式

> ID：11625679
> 
> 赞同：6
> 
> 时间：2012-07-24T06:58:42.247
> 
> 标签：objective-c, core-animation

我将屏幕分成小块，然后为每个块设置动画以执行过渡：

```
 for (int x=0; x<number_of_x_splits; x++) {

    for (int y=0; y<number_of_y_splits; y++) {

        CGSize splitSize = CGSizeMake(screenBounds.width / number_of_x_splits, screenBounds.height / number_of_y_splits);

        CATransformLayer *transformLayer = [CATransformLayer layer];
        [transformLayer setFrame:CGRectMake(splitSize.width * x, splitSize.height * y, splitSize.width, splitSize.height)];
        [transformLayer setPosition:CGPointMake((splitSize.width * x) + splitSize.width / 2, (splitSize.height * y) + splitSize.height / 2)];

        ... adding some sublayers to transformLayer...

        CABasicAnimation *rotate = [CABasicAnimation animationWithKeyPath:@"transform.rotation.y"];
        [rotate setDuration:5.0];
        [rotate setFromValue:[NSNumber numberWithFloat:0]];
        [rotate setToValue:[NSNumber numberWithFloat:M_PI]];
        [rotate setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
        [rotate setTimeOffset:(1 / (number_of_x_splits + number_of_y_splits)) * (x+y)];
        [rotate setFillMode:kCAFillModeForwards];
        [rotate setRemovedOnCompletion:NO];
        [transformLayer addAnimation:rotate forKey:@"transform.rotation.y"];

    }
} 
```

问题是只有链中的最后一个 CALayer 保持在最终位置。我还尝试设置 CALayer 最终转换值：

```
[transformLayer setTransform:CATransform3DMakeRotation(M_PI, 0, 1, 0)]; 
```

我想这与在循环中创建另一个 CALayer 实例重置前一层的属性有关。

有人对如何补救这种情况有建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T07:03:33.057

`timeOffset`不是您要使用的属性，它实际上会在动画开始的时间点发生变化，而不是延迟开始。相反，您应该设置`beginTime`动画的。

请记住，开始时间应该是`CACurrentMediaTime() + yourDelay`

* * *

timeOffset 和 beginTime 之间的区别可以这样说明。我知道我以前看过这个插图，只是找不到。

```
Normal animation    | 12345678 |
Begin time          |     12345678 |
Time offset         | 5678     | 
```

# java - 使休眠生成没有@OneToOne @OneToMany 等的外键约束

> ID：11625683
> 
> 赞同：1
> 
> 时间：2012-07-24T06:58:51.057
> 
> 标签：java, hibernate

假设我有两个实体：

```
@Entity
public class A {
   @Basic
   public UUID getBId();
}

@Entity
public class B {
   @Id
   public UUID getId();
} 
```

实体 A 将 bId 保存在表 A 的列之一中。我想让hibernate生成外键约束（从A到B），但我真的不想明确关系（实体B以这种方式链接到大量实体，其中大部分很少使用，我非常希望避免开销）

# php - Pikachoose 画廊 Fancybox：如果我只想要一张图片上的精美盒子

> ID：11625689
> 
> 赞同：0
> 
> 时间：2012-07-24T06:59:06.157
> 
> 标签：php, jquery

我正在使用 Pikachoose 图片库。我想在一张图片上打开一个花式框，我想在其中显示一个 youtube 视频。我已经使用过这段代码

```
$(document).ready(function (){
    var a = function(self){
       self.anchor.fancybox();
    };
    $("#pikame").PikaChoose({buildFinished:a});
}); 
```

但是这段代码为滑块中的所有图像添加了幻想框。如何仅将精美的框添加到一张图像？提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:12:46.340

您的代码应如下所示：

```
$(document).ready(function (){
     var a = $('#pikame li').first().find('a:first').fancybox();
     // or try using the following line
     // var a = $("a.various").fancybox(); 
     $('#pikame').PikaChoose({buildFinished:a});
}); 
```

# qt4 - 在 Qt 中使用 Signals & slots 时出现错误

> ID：11625691
> 
> 赞同：0
> 
> 时间：2012-07-24T06:59:08.627
> 
> 标签：qt4

错误是：`error: no matching function for call to 'QObject::connect(MainWindow*, const char*, MainWindow*, const char*)' In second() member function the slot progress() is not matching with the definition.`

所以任何人都可以解决这个问题。

```
#include <QtCore/QCoreApplication>
#include<QFuture>
#include<QtConcurrentMap>
#include<QtCore>
#include<QString>
int i =0;

namespace Ui {
    class MainWindow;
}

class MainWindow
{
  Q_OBJECT
public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

signals:
    void finished();

public slots:
    void progress(const QString& status);

public:
    void search();
    void second();

};

void MainWindow::progress(const QString& status)
{
    printf("progress bar %d is finished", i);
    i++;
}
void MainWindow::search()
{
    QFuture<void> future=QtConcurrent::run(this,&MainWindow::second);
}
void MainWindow::finished()
{
    printf("signal got finished");
}

void MainWindow::second()
{
    MainWindow n,o;
    QObject::connect(&n,SIGNAL(finished()),&o,
                     SLOT(progress(const QString&)));
    o.progress("hello");
}

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    MainWindow mi;
    mi.search();
    return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:07:52.033

首先，您的类必须（不一定直接）从`QObject`类继承（参见[文档](http://doc.qt.nokia.com/4.7/qobject.html#Q_OBJECT)）。
此外，在您`main()`的`show()`小部件
中，您的`connect()`调用将在运行时失败，因为`Q_SIGNAL`并且`Q_SLOT`必须具有相同的参数集。如果您需要区分信号（添加附加参数），请考虑使用`QSignalMapper`class. 查看[文档](http://doc.qt.nokia.com/4.7/qsignalmapper.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:16:59.660

您没有从 QObject 交付的类继承。我猜你的 MainWindow 必须是 QMainWindow 交付的类

# php - PHP LDAP；密码输入错误或未提供域名时不出现密码提示

> ID：11625694
> 
> 赞同：0
> 
> 时间：2012-07-24T06:59:17.217
> 
> 标签：php

我正在尝试实现 PHP-LDAP 身份验证来验证和验证用户。我正在使用以下代码。但是，如果输入的密码不正确或没有提供用户名的域名（以用户名@域或域\用户名的形式），则不会出现密码提示。它总是显示“授权失败”。如果用户提供正确的用户名@域和密码，他们可以登录。代码：

```
session_start();

if (strlen(@$_SERVER['PHP_AUTH_USER']) == 0 || strlen(@$_SERVER['PHP_AUTH_PW']) == 0) {
    header('WWW-Authenticate: Basic realm="test"');
    header('HTTP/1.0 401 Unauthorized');
    echo '<h1>Authorization required</h1>';
    exit;
} else {
    $ldaprdn = $_SERVER['PHP_AUTH_USER'];
    $ldappass = $_SERVER['PHP_AUTH_PW'];
    $ldap_server = 'ldap_server_add';
    $ldapconn = ldap_connect("ldap_server_add") or die("Could not connect to ".$ldap_server." server.");
    $ldapbind = @ldap_bind($ldapconn, $ldaprdn, $ldappass);

    if ($ldapbind) {
        if (strrchr($_SERVER['PHP_AUTH_USER'], '@') || strrchr($_SERVER['PHP_AUTH_USER'], '\\')) {
            if (strrchr($_SERVER['PHP_AUTH_USER'], '@')) {
                $t = explode('@', $_SERVER['PHP_AUTH_USER']);
                $_SESSION['userid'] = $t[0];
            } else {
                $t = explode('\\', $_SERVER['PHP_AUTH_USER']);
                $_SESSION['userid'] = $t[1];
            }
        }
    } else {
        echo "<h1>Authorization failed</h1>";
    }
} 
```

我无法弄清楚问题所在。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:27:26.007

得到了解决方案，只是一个简单的技巧，并将上面的代码更改为以下：

```
session_start();

function authenticate() {
    header('WWW-Authenticate: Basic realm="test"');
    header('HTTP/1.0 401 Unauthorized');
    echo '<h1>Authorization required</h1>';
    exit;
}

if (strlen(@$_SERVER['PHP_AUTH_USER']) == 0 || strlen(@$_SERVER['PHP_AUTH_PW']) == 0) {
    authenticate();
} else {
    $ldaprdn = $_SERVER['PHP_AUTH_USER'];
    $ldappass = $_SERVER['PHP_AUTH_PW'];
    $ldap_server = 'ldap_server_add';
    $ldapconn = ldap_connect("ldap_server_add") or die("Could not connect to ".$ldap_server." server.");
    $ldapbind = @ldap_bind($ldapconn, $ldaprdn, $ldappass);

    if ($ldapbind) {
        if (strrchr($_SERVER['PHP_AUTH_USER'], '@') || strrchr($_SERVER['PHP_AUTH_USER'], '\\')) {
            if (strrchr($_SERVER['PHP_AUTH_USER'], '@')) {
                $t = explode('@', $_SERVER['PHP_AUTH_USER']);
                $_SESSION['userid'] = $t[0];
            } else {
                $t = explode('\\', $_SERVER['PHP_AUTH_USER']);
                $_SESSION['userid'] = $t[1];
            }
        }
    } else {
        authenticate();
    }
} 
```

# authentication - Rabbitmq 认证失败

> ID：11625695
> 
> 赞同：1
> 
> 时间：2012-07-24T06:59:20.467
> 
> 标签：authentication, erlang, rabbitmq

我尝试用 erlang amqp 客户端连接到 rabbitmq 服务器。

我制作了连接参数：

```
AMQP_Param = #amqp_params_network{
            host = <<"localhost">>,
                username = <<"guest">>
                password = <<"123456">>,
                port = 5672
                virtual_host = test_virtual_host
                heartbeat = 5
            }, 
```

现在我运行 rabbitmq 服务器并尝试连接到它：

```
amqp_connection:start(AMQP_Param) 
```

但我得到了错误：

```
{error,auth_failure} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:07:13.073

您是否使用 RabbitMQ 的默认访客用户？如果是这样，我认为密码应该是客人。

# java - jTable单元格不改变

> ID：11625699
> 
> 赞同：1
> 
> 时间：2012-07-24T06:59:46.550
> 
> 标签：java, swing, jtable, tablemodel

我正在使用 java 和 mySQL 制作数据库管理系统。我使用 jTable 作为数据库的接口。

虽然帖子看起来有点长，但对于有经验的人来说，问题不会那么复杂（我猜）。

这是我的问题。选择一个单元格后，我可以输入值，（没有问题）。但是在输入值之后，当我单击其他一些单元格时，输入的值消失了，它又回到了 null。

想不通原因。我对 jTables 没有太多经验。但我认为问题出在表模型上。

这是我的表模型

```
import Templates.TableEntry;
import java.util.LinkedList;
import javax.swing.table.AbstractTableModel;

public class myTableModel extends AbstractTableModel {

public static final int DATE_INDEX = 0;
public static final int ORDERNO_INDEX = 1;
public static final int ROOT_INDEX = 2;
public static final int HIDDEN_INDEX = 3;
public String[] columnnames;
public LinkedList<TableEntry> entryList;

public myTableModel(String[] columnNames) {
    this.columnnames = columnNames;
    entryList = new LinkedList<TableEntry>();
}

@Override
public String getColumnName(int column) {
    return columnnames[column];
}

@Override
public boolean isCellEditable(int row, int column) {
    if (column == HIDDEN_INDEX) {
        return false;
    } else {
        return true;
    }
}

@Override
public Class getColumnClass(int column) {
    return String.class;
}

@Override
public String getValueAt(int row, int column) {
    TableEntry record = entryList.get(row);
    switch (column) {
        case DATE_INDEX:
            return record.date;
        case ORDERNO_INDEX:
            return record.jobOdrerNo;
        case ROOT_INDEX:
            return record.rootCardNos;
        default:
            return null;
    }
}

public void setValueAt(String value, int row, int column) {
    TableEntry record = entryList.get(row);
    switch (column) {
        case DATE_INDEX:
            record.date = value;
            break;
        case ORDERNO_INDEX:
            record.jobOdrerNo = value;
            break;
        case ROOT_INDEX:
            record.rootCardNos = value;
            break;
        default:
            System.out.println("invalid index");
    }
    updateTable(row, column);
}

public void updateTable(int row, int column) {
    fireTableCellUpdated(row, column);
}

@Override
public int getRowCount() {
    return entryList.size();
}

@Override
public int getColumnCount() {
    return columnnames.length;
}

public boolean hasEmptyRow() {
    if (entryList.size() == 0) {
        return false;
    }
    TableEntry entry = entryList.get(entryList.size() - 1);
    if ("".equals(entry.date)) {
        return true;
    } else {
        return false;

    }
}

public void addEmptyRow() {
    entryList.add(new TableEntry());
    fireTableRowsInserted(entryList.size() - 1, entryList.size() - 1);
}

public void deleteRow(int i) {
    if (i != 0) {
        entryList.remove(i);
        fireTableRowsDeleted(i - 1, i + 1);
    }
} 
```

}

对不起，长度。但为了完整起见，我发布了整个代码。大多数部分可以忽略不计。

TableEntry 是一个简单的类。

```
package Templates;

public class TableEntry {

public String date;
public String jobOdrerNo;
public String rootCardNos;
public String yardRootCard;
public String MCISO_NO;
public String service_maintenance_breakdown;
public String jobNo;
public String machineName;
public String fault;
public String problematicPart;
public String person;
public String action;
public String startTime;
public String finishedTime;
public String durationOfRepair;
public String spareParts;
public String itemCode;
public String no;
public String value;
public String totalCost;
public String remark;
public String breakdownAndSolution; 
```

}

希望我已经提供了所有的细节。这对我来说是一个真正的错误。任何帮助表示赞赏。提前谢谢..！

（如果需要任何澄清，请告诉我.. 很难发布整个项目。它有点大.. :D）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:45:30.570

您的代码中有一个小错误。下次小心点。。

在 tablemodel 的方法“setValueAt(---)”中，您输入了错误的参数。您试图覆盖“AbstractTableModel”类的方法。原来的方法是，

```
public void setValueAt(Object aValue, int rowIndex, int columnIndex){
} 
```

但是你已经把你的方法写成，

```
public void setValueAt(String value, int row, int column) {
...//method body
} 
```

因此，它不会覆盖预期的功能。每次更改单元格时，tablemodel 都会调用原始的“setValueAt(...)”函数。但是由于它没有被覆盖，它什么也不做（你必须覆盖它，原始方法没有主体）。

希望这可以帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:24:19.693

您可以使用 defaultTableModal 进行正常使用。它扩展了 abstractTableModal 并为经常使用的需求提供方法。先试试看，如果不够，那就去开发自己的类吧……

# tridion - 如何将项目从一个出版物移动到另一个出版物

> ID：11625700
> 
> 赞同：1
> 
> 时间：2012-07-24T06:59:46.747
> 
> 标签：tridion, tridion-2011

根据条件，我需要将项目（组件/页面）从当前出版物移动到指定的出版物。

任何人都可以建议我对此的方法。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T07:31:26.017

不幸的是，UI 不支持跨出版物移动项目，API 也不直接支持。但是你仍然有两种可能来实现这一点。

1.  使用 Content Porter 导出您的项目并将它们导入您需要的出版物中。您可以按照 Content Porter 文档中的说明更改出版物的映射，或者我通常所做的只是将您希望项目进入的出版物重命名为与项目来源相同的名称（您将不得不暂时更改原始出版物的名称，导入后您可以再次更改所有内容）。

2.  使用 API 在您选择的出版物中创建一个新项目，然后复制项目的内容以移入其中。完成后，您可以使用 API 删除您的原始项目。根据您在此移动操作中的蓝图方案，您可能需要先重命名原始项目，然后才能创建新项目以防止命名冲突（以防您在蓝图层次结构中向上移动它）。

这两种可能性的唯一缺点是您的项目将获得一个新的 URI。当您需要跨出版物移动项目时，无法保留项目的现有 URI。这也意味着您可能必须使用原始项目更新所有项目，以便他们使用您的新项目。如果需要，您很可能会考虑第二个选项。

# spring-mvc - 如何从Java程序调用calabash xml

> ID：11625701
> 
> 赞同：1
> 
> 时间：2012-07-24T06:59:50.620
> 
> 标签：spring-mvc, xproc

我尝试使用 spring 和 xslt 建立一个基于 Web 的应用程序。因为我总是以流水线方式使用 xslt，所以我想使用葫芦。是否有可能从 Java 调用葫芦？我阅读了[http://xmlcalabash.com](http://xmlcalabash.com)上的文档，但只有一个描述如何从命令行使用它。我也厌倦了在 githup 上找到一些 javadoc，但没有成功。显然，有带有 main() 方法的 Main 类，我可以将命令行参数作为字符串数组提供......

我想知道是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:12:37.697

我最近也研究了这个。我采取了一种务实的方法，调用 Main.run()，并传入一个从 (File)Properties 对象生成的字符串数组。它不允许将文件输入作为流或源传递，但是它们必须驻留在文件系统中。

可能有更好的方法。例如，您可以查看[http://expath.org/](http://expath.org/)。应该有那个项目的来源。webapp 模块（以前称为 servlex？）似乎提供了 XMLCalabash 集成。

！

# javascript - Phonegap 代码 401 中的文件传输

> ID：11625710
> 
> 赞同：0
> 
> 时间：2012-07-24T07:00:39.890
> 
> 标签：javascript, cordova

嘿，我正在使用 Phonegap 的 FileTransfer。我收到一个 401 代码 3 错误（未经授权）httprequest。

我对 FT 方法的实现：

```
 var ft = new FileTransfer();
    ft.download(startUrl + filename, dlPath, function(e){
        console.log("Successful download of "+e.fullPath);
        renderPicture(e.fullPath);
    }, onError); 
```

请求/响应：

```
07-24 08:58:12.750: D/CordovaLog(3744): {"target":"file:///mnt/sdcard/dk.test.html5Generic/","source":"http://mobilitycms.test.dk:9090/content/picture/menu/showroom","http_status":401,"code":3} 
```

如果您需要测试您需要删除的路径：9090 我有它，因为我在内部网络上。

任何帮助将不胜感激，以消除此错误：-P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:21:37.417

问题是我忘记将我的科尔多瓦 xml 下的 url 添加为白名单：

```
Android: project - res - xml - cordova.xml 
```

# android - 从 GCM 获取数据到 android 设备

> ID：11625711
> 
> 赞同：1
> 
> 时间：2012-07-24T07:00:49.667
> 
> 标签：android, google-cloud-messaging

有没有办法从“gcm 通知”中获取数据。这是我用 gcm 发送的 json 字符串的一部分：“data”：{“state”：“deliver”}}。在这里，我使用 php curl 请求发送数据。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T07:27:39.783

GCM 以 JSON 格式发送数据。您需要解析 JSON 对象以获取您发送的数据。以下代码适用于我：

```
 public void onMessage(Context context, Intent intent)
  {
    String action = intent.getAction();
    if ("com.google.android.c2dm.intent.RECEIVE".equals(action)) {          
        message = intent.getStringExtra("data"); 
        String s=message.toString();
        parse_json_add(s);
    }
  } 
```

然后解析 JSON ：

```
private void parse_json_add(String text) {
    if (text!= null) 
    { 
         JSONObject temp=new JSONObject(text);
         value=temp.get("state").toString();    
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T07:10:09.940

每当消息到达时，它将调用 OnMessage() 方法

你必须重写这个方法

```
@Override
    protected void onMessage(Context arg0, Intent arg1) {
        // TODO Auto-generated method stub
        Log.d("onMessage",arg1.getExtras().getString("state"));
          } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T07:03:55.853

您可以使用以下代码获取数据。有关更多信息，请查看[处理接收的数据](http://developer.android.com/guide/google/gcm/gcm.html#received_data)。

```
String state = intent.getStringExtra("state"); 
```

# c++ - 指针位移？

> ID：11625717
> 
> 赞同：0
> 
> 时间：2012-07-24T07:01:30.960
> 
> 标签：c++, assembly

我有以下代码

```
void PacketEncrypt(Packet* packet, int sizeofpacket)
{
    int* pointer;
    pointer = ((int*)packet+sizeofpacket)-2;
    (int)*pointer = packet->PacketSize^0x1A3C;
    packet->Type += 0x0FFF7;
} 
```

问题是当我调试它时编译器将其设置为：

```
0041585E   8B45 0C          MOV EAX,DWORD PTR SS:[EBP+C]
00415861   8B4D 08          MOV ECX,DWORD PTR SS:[EBP+8]
00415864   8D5481 F8        LEA EDX,DWORD PTR DS:[ECX+EAX*4-8] 
```

但我真正想要的是：

```
0041585E   8B45 0C          MOV EAX,DWORD PTR SS:[EBP+C]
00415861   8B4D 08          MOV ECX,DWORD PTR SS:[EBP+8]
00415864   8D5481 F8        LEA EDX,DWORD PTR DS:[ECX+EAX-2] 
```

我是 C++ 的新手，所以你能帮我解决我做错了什么，或者为什么编译器要添加标量 *4？谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T07:04:40.567

C++ 使用指针类型进行指针运算。`ptr+2`是 2 个*元素*，而不是过去的两个字节`ptr`。如果`sizeof(*ptr)==4`，这两个元素是 8 个字节，`ptr+2`因此将指向 8 个字节过去`ptr`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T07:04:08.117

`int`指针`4 bytes`在您的机器上的大小为 ，只能按`4*n`字节移动。如果您需要通过强制转换来移动指针`2 bytes`，`char`因为`sizeof(char) = 1`

```
char *ptr = (char*)otherPtr;
ptr += 2; //shift by 2 bytes

int *ptr = (int*)otherPtr;
ptr += 2; //shift by 8 bytes. (2 * sizeof(int)) 
```

**编辑**

`(short*)pointer = something.`- 你不能分配给`rvalue`. 我想你的意思是：

```
pointer = (char*) something 
```

或者，如果您需要`short`指针：

```
short *someOtherPointer = something 
```

# html - 如何在 html5 中为 SWF 格式使用播放和暂停？

> ID：11625724
> 
> 赞同：1
> 
> 时间：2012-07-24T07:02:15.130
> 
> 标签：html, html5-video, shockwave

我有一个`SWF`文件。我需要该 UI 的播放和暂停按钮。我尝试使用`<video>`标签，但它不起作用。

```
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" width="899" height="199" id="tech" align="middle">
  <param name="allowScriptAccess" value="sameDomain" />
  <param name="movie" value="ApparelVideo.swf" />
  <param name="quality" value="high" />
  <embed src="ApparelVideo.swf" quality="high" width="899" height="199" name="tech" align="middle" allowScriptAccess="sameDomain" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />
</object> 
```

**注意：** 播放和暂停应该是onclick功能，就像加载网页后onclick要播放的视频一样，它必须在第二个onclick上停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:43:44.150

您不能使用 HTML5 视频播放 SWF 文件，因为 Flash 不是受支持的视频编解码器之一（嗯，它甚至不是视频编解码器）。

[HTML5 视频](https://en.wikipedia.org/wiki/HTML5_video)旨在播放视频而不使用供应商特定的插件——这是播放 Flash 对象所必需的。

在过去的十年中，创造了无数的 Flash 视频播放器，并且可以在网上找到。

# google-app-engine - 简单的 App Engine 查询无效

> ID：11625725
> 
> 赞同：0
> 
> 时间：2012-07-24T07:02:19.343
> 
> 标签：google-app-engine, gql, gqlquery

通过这个看似微不足道的 GQL 查询，我得到了一个“无效的 GQL 查询字符串”：

```
SELECT * FROM Event WHERE firstPlayer='glowingEthers' OR secondPlayer='glowingEthers' 
```

删除 OR 子句后，对于任一属性，它都可以正常工作。Event 表的这些属性是互斥的（没有事件将 firstPlayer 和 secondPlayer 设置为同一个玩家）。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:51:38.477

GQL 没有`OR`运算符（如此[处](https://developers.google.com/appengine/docs/python/datastore/gqlreference)所述）。由于您已声明结果集是互斥的，因此您应该执行两个查询（一个用于 firstPlayer，一个用于 secondPlayer）并自己加入它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:04:13.503

也许这会有所帮助（只知道 mySQL）......

```
SELECT * 
FROM Event 
WHERE 1 
AND (firstPlayer='glowingEthers' OR secondPlayer='glowingEthers') 
```

# operating-system - 虚拟内存？

> ID：11625729
> 
> 赞同：7
> 
> 时间：2012-07-24T07:02:34.070
> 
> 标签：operating-system, virtual-memory

我对这些问题感到非常困惑。

1.  在 32 位处理器上，每个进程都有 4 GB 的虚拟内存。但是，如果每个进程都有 4gb 的空间，那么如果有 100 个进程正在运行，这将是每一个巨大的空间——这大于交换区域。有人可以解释一下吗？我很迷茫。

2.  操作系统如何为进程分配内存？假设一个进程有`a = malloc(2)`。谁将把这块内存分配给进程？操作系统会将这些 2 字节内存分配给进程吗？
    （我们访问 a[2] 它会产生分割错误）。

3.  进程的不同部分（代码、数据、堆栈、堆）在主内存或辅助内存中的位置。

请给我一些好的链接，以便我也可以理解虚拟内存及其整个机制，因为我找到的链接并没有完全解释虚拟内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:06:02.523

1.  谁在乎虚拟内存是大于还是小于交换区？这有什么区别？（例如，如果您以只读方式映射 2GB 文件，该文件使用 2GB 虚拟内存，但不需要交换空间，只需要少量物理内存。）

2.  操作系统只是扩展进程的虚拟内存空间。这只是更改会计分录。在尝试修改地址空间的内容之前，不需要物理内存。（实际上，该进程可能会自己执行此操作，仅在需要更大的块时才要求操作系统扩展其虚拟内存空间。）

3.  它们保留在物理内存中（假设它们一开始就出错了），直到操作系统选择将它们移动到其他地方或丢弃它们。如果它们被移到别处或被丢弃，它们会在通过页面错误访问时被调回或重新创建。（操作系统将物理内存作为宝贵的资源进行管理，按照它认为最好的方式授予它。）

顺便说一句，在大多数 32 位操作系统上，操作系统本身占用 1GB 或 2GB 的虚拟内存空间，进程真正可用的只有 2GB 或 3GB。在 64 位操作系统上，操作系统不占用任何空间，因此完整的 4GB 可用于 32 位进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T13:18:12.030

1) 每个进程有 4gb 的虚拟内存空间，但不需要一次全部分配。操作系统向[MMU](http://en.wikipedia.org/wiki/Memory_management_unit)指定物理内存的哪些部分映射到其虚拟空间，哪些部分根本不映射。访问未映射的部分会导致处理器出现故障，操作系统通常会产生段错误。还有一个“不存在”的标记，它告诉处理器内存区域不在物理内存空间中，而是在交换空间中，因此处理器发生故障，操作系统将页面交换回物理内存，然后恢复它停止的过程。要描述一个进程页表，您只需要几个字节的内存，因此 100 个进程在实际请求之前不会使用那么多内存。

2）内存分配算法很多。通常操作系统一次只分配大块内存，因此对 malloc() 的调用有时只会导致对操作系统的调用，但大多数时候是 C 标准库实现细节处理微管理。不能保证超出数组范围的访问会产生 seg 错误，因为它可能是之前 malloc'ed 的不同数组的一部分，或者是标准库为将来跟踪的可用空间的一部分分配，因此不会出现段错误。然而，像 valgrind 这样的调试工具可以检测到此类错误。

3）每个段的具体位置取决于操作系统，但对于通用和可移植的代码，无需知道。

有关所有这些主题的更多信息，请查阅[osdev](http://wiki.osdev.org/Expanded_Main_Page) wiki，特别是关于[分页](http://wiki.osdev.org/Paging)和[内存分配](http://wiki.osdev.org/Memory_Allocation)的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:10:05.300

第一：32bit表示32bit。没有更多的位来寻址更多的内存空间。多处理器系统不是新发明。使用 32 位，您只能处理 4gigs 空间。有一些解决方法，例如 PAE [http://en.wikipedia.org/wiki/Physical_Address_Extension](http://en.wikipedia.org/wiki/Physical_Address_Extension)。

第二和第三..我不太确定今天它是如何工作的。但是看看[http://en.wikipedia.org/wiki/Virtual_memory](http://en.wikipedia.org/wiki/Virtual_memory)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T07:17:55.297

您的一个严重误解是虚拟内存和内存之间的区别。从进程 POV 来看，没有区别，进程只访问内存，而操作系统负责在物理 (RAM) 和虚拟内存之间交换部分数据。

1）一个进程的地址空间可以达到4GB并不意味着每个进程都分配了4GB。操作系统根据需要为它们分配内存。

2) 操作系统以块为单位提供内存 (*1)。当您执行 malloc 时，管理程序内存的 malloc 函数在内部获取**进程内存**中所需的空间并返回指针（可能在进程中他们向操作系统请求额外的内存，但这不是必需的）。

3）从一开始，这是一个操作系统问题。每个操作系统都可以决定他们对哪些部分进行虚拟化，哪些部分不进行虚拟化，其中涉及减少交换次数的复杂策略。

*1 请注意，我谈论的是内存，而不是 VM。应用程序不知道其内存的哪些部分是虚拟的或物理的，它对它们是透明的。

# mp3 - 在我的网站上播放 mp3

> ID：11625730
> 
> 赞同：2
> 
> 时间：2012-07-24T07:02:34.360
> 
> 标签：mp3, media-player

所以我想知道在我的网站上播放 mp3 的最佳方式是什么......

我有点希望它能够像 iTunes 方法一样运行和显示 - 一个简单的播放和停止按钮。像这样：

![在此处输入图像描述](../Images/20a1b38ba047848b3fe9754c2551e1d1.png)

我该怎么做？我真的不想嵌入播放器。

谢谢您的帮助！添加到书签

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T07:19:22.623

最简单的方法是使用：

```
<embed height="50px" width="100px" src="song.mp3" /> 
```

但这在大多数情况下也会显示一个可见的玩家。

另一种方法是使用 HTML5 中的音频标签（旧版浏览器不支持）：

```
<audio id="audio">
    <source src="song.ogg" type="audio/ogg" />
    <source src="song.mp3" type="audio/mp3" />
</audio> 
```

（这里使用 2 个来源，因为大多数浏览器要么支持 ogg 要么支持 mp3。但通常不是两者都支持）

显示的标签将在您的页面上生成一个可控（不可见）的音频元素。然后，您可以使用 JavaScript 通过自定义按钮控制音频元素，例如：

```
<button onClick="document.getElementById('audio').play()">Play</button>
<button onClick="document.getElementById('audio').pause()">Pause</button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T07:15:15.940

你提到 - 简单的播放和停止按钮，但 HTML5 有暂停和播放按钮。试一试。

```
<audio controls="controls">
<source src="song.ogg" type="audio/ogg" />
<source src="song.mp3" type="audio/mpeg" />
Your browser does not support the audio element.
</audio> 
```

不使用嵌入播放器，很难编写整个播放器。看看
[Jplayer](http://jplayer.org/)

# visual-studio-2010 - 我可以在 Visual Studio 中一次为类中的所有方法设置断点吗？

> ID：11625732
> 
> 赞同：42
> 
> 时间：2012-07-24T07:03:03.303
> 
> 标签：visual-studio-2010, debugging, breakpoints

我在一个类中有 40-50 个方法，我想为所有方法添加断点。我可以一次为所有这些添加断点吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-22T14:55:51.513

这里描述了一个无插件的方法： [How to set a breakpoint on a C++ class in the Visual Studio Debugger](https://docs.microsoft.com/en-us/archive/blogs/habibh/class-breakpoint-how-to-set-a-breakpoint-on-a-c-class-in-the-visual-studio-debugger)

简而言之，您可以通过按 Ctrl+K、B 并在`ClassName::*`函数字段中输入来调出“新断点”对话框。在 Visual Studio 2017 中，您需要在字段中包含命名空间，如`NamespaceName::ClassName::*`. 然后，您可以在断点窗口中禁用其中的一些。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-12T14:44:49.307

这是您的宏，但是在 1000 多个函数上设置断点需要一段时间……而且它会减慢 Visual Studio！

```
Sub BreakAtEveryFunction()
    For Each project In DTE.Solution.Projects
        SetBreakpointOnEveryFunction(project)
    Next project
End Sub

' Macro editor
Sub SetBreakpointOnEveryFunction(ByVal project As Project)
    Dim cm = project.CodeModel

    ' Look for all the namespaces and classes in the 
    ' project.
    Dim list As List(Of CodeFunction)
    list = New List(Of CodeFunction)
    Dim ce As CodeElement
    For Each ce In cm.CodeElements
        If (TypeOf ce Is CodeNamespace) Or (TypeOf ce Is CodeClass) Then
            ' Determine whether that namespace or class 
            ' contains other classes.
            GetClass(ce, list)
        End If
    Next

    For Each cf As CodeFunction In list

        DTE.Debugger.Breakpoints.Add(cf.FullName)
    Next

End Sub

Sub GetClass(ByVal ct As CodeElement, ByRef list As List(Of CodeFunction))

    ' Determine whether there are nested namespaces or classes that 
    ' might contain other classes.
    Dim aspace As CodeNamespace
    Dim ce As CodeElement
    Dim cn As CodeNamespace
    Dim cc As CodeClass
    Dim elements As CodeElements
    If (TypeOf ct Is CodeNamespace) Then
        cn = CType(ct, CodeNamespace)
        elements = cn.Members
    Else
        cc = CType(ct, CodeClass)
        elements = cc.Members
    End If
    Try
        For Each ce In elements
            If (TypeOf ce Is CodeNamespace) Or (TypeOf ce Is CodeClass) Then
                GetClass(ce, list)
            End If
            If (TypeOf ce Is CodeFunction) Then
                list.Add(ce)
            End If
        Next
    Catch
    End Try
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T07:58:22.883

您可以尝试一个[类断点加载项](http://weblogs.asp.net/uruit/archive/2011/08/04/visual-studio-2010-addin-setting-a-class-breakpoint.aspx)，或者您可以使用[替换表达式](http://msdn.microsoft.com/en-us/library/2k3te2cs.aspx)[`__debugbreak()`](http://msdn.microsoft.com/en-us/library/f408b4et.aspx)在每个方法的开头添加一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-07T10:07:22.797

由于某种原因，接受的答案对我不起作用。而且我认为我的解决方法不适用于 Visual Studio 2010。但我使用[Visual Studio 扩展的宏](https://blogs.msdn.microsoft.com/visualstudio/2016/05/11/macros-extension-open-sourced-in-visual-studio-2015/)和我的 Visual Studio 2015 来做到这一点。

脚步：

1.  为方法的左大括号找到 ( `Ctrl`+ `F`) 正确的缩进。通常是 8 个空格（或 2 个制表符等，具体取决于您可能所做的设置）。
2.  用一个左大括号附加它`{`。
3.  在前面加上`\r\n`以确保它不匹配任何嵌套的大括号。现在它可能看起来像`\r\n {`. 此外，打开正则表达式搜索（通过按`*`搜索对话框上的 ）。
4.  开始录制宏。
5.  按`F3`再按`F9`以添加断点。这为使用该技巧找到的第一个方法添加了一个断点。
6.  停止录制宏。根据您可能拥有的方法数量播放它。
7.  注意：当你到达终点时要注意。否则它将从顶部重新开始，并开始删除您刚刚添加的断点。

让我知道有任何混淆。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-24T12:37:56.553

如果您使用 vim (vsvim)，您可以相当容易地操作断点。这里有些例子。

在每一行中断：{Escape}qq:vsc Debug.ToggleBreakpoint{Enter}jq100@q

打破每种方法：

{Escape}qq:vsc Edit.NextMethod{Enter}:vsc Debug.ToggleBreakpoint{Enter}jq100@q

用适当数量的行/方法替换 100。

示例： [https ://imgur.com/SFhlEr7](https://imgur.com/SFhlEr7)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-04-22T17:11:18.337

单击“调试”选项卡并选择“全部调试”。然后调用您要调试的方法/控制器/函数并使用调试器逐步完成它（不要继续，除非您设置了断点）。

# php - 从数据库中添加或减去 onclick

> ID：11625737
> 
> 赞同：0
> 
> 时间：2012-07-24T07:03:21.570
> 
> 标签：php, ajax, jquery-mobile

我想从加或减*数据库*中*加减*`onClick()`一。 **`Button`**

 **我的代码

```
$.ajax({
        type:'POST',
        dataType: 'json',
        url:'storage.php',
        data:{search: $("#s_inven").val()},
        success:function(rows){

            for (var i = 0, len = rows.length; i < len; i++) {

                $('#inven').append('<tr><td>'+ rows[i].G_Name +'</td><td>'+
                        '<button data-icon="plus" data-iconpos="notext" id="'+ 
                        rows[i].Id + 'plus" value="'+ rows[i].Id + '">+</button>' +
                        '</td><td>'+ '<label id="">'+ rows[i].quant +'</label></td><td>'+ 
                        '<button data-icon="minus" data-iconpos="notext" id="'+
                        rows[i].G_Name +'minus" value="'+ rows[i].G_Name +
                        '">-</button>' +'</td></tr>'        
            }
    ); 
```

当用户单击*添加* `Button`时，我想 `rows[i].quant`将`rows[i].quant+1`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:19:01.987

像这样的东西：

```
$.ajax({
    type:'POST',
    dataType: 'json',
    url:'storage.php',
    data:{search: $("#s_inven").val()},
    success:function(rows){

        for (var i = 0, len = rows.length; i < len; i++) {

            $('#inven').append('<tr><td>'+ rows[i].G_Name +'</td><td>'+
                    '<button data-icon="plus" data-iconpos="notext" id="'+ 
                    rows[i].Id + 'plus" value="' + rows[i].Id + '" onclick="addVal(' + rows[i].Id + ')">+</button>' +
                    '</td><td>'+ '<label id="quant' + rows[i].Id + '">'+ rows[i].quant +'</label></td><td>'+ 
                    '<button data-icon="minus" data-iconpos="notext" id="'+
                    rows[i].G_Name +'minus" value="'+ rows[i].G_Name +
                    '">-</button>' +'</td></tr>'        
        }
);

function addVal(id)
{
    var labelId = 'quant' + id;
    var label = document.getElementById(labelId);
    if (label)
    {
        var oldVal = label.innerHTML;
        var newVal = parseInt(oldVal) + 1;
        label.innerHTML = newVal;
        // + ajax call to update the db
    }
} 
```**

# asp.net-mvc - 如何在 MSVWD2010 Express c# 的 viewbag 中更改 int

> ID：11625738
> 
> 赞同：0
> 
> 时间：2012-07-24T07:03:22.073
> 
> 标签：asp.net-mvc

不确定我是否正确地问这个问题。

我有一个 @Viewbag.Items 我想在其中处理。即当7然后'blah'或当'8'然后'blah2'

这是我想更改为 char 的 int。就像在 MSSQL 中的一个案例

```
 @foreach (var item in @ViewBag.Items)
    {
       <tr> 
            <td>@item.Item_Id</td>
            <td>@item.NAME</td>
            <td>@item.DOCUMENTSTATUS</td>
       </tr> 
```

int 可以是 1,7,8 或 null

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:38:17.720

你是说“开关”吗？

假设您的控制器可能是这样的？

```
public ActionResult Index() {
    int?[] values = new int?[] { 1, 7, 8, null };
    ViewBag.Items = values;

    return View();
} 
```

而您的观点，您可以切换（如 sql 案例）以更改为其他一些值。

```
<table border="0" cellpadding="0" cellspacing="0">
    @foreach (var item in ViewBag.Items) {
        <tr>
            @switch (item as int?) {
                case 1:
                <td>I'm 1</td>
                    break;
                case 7:
                <td>I'm 7</td>
                    break;
                case 8:
                <td>I'm 8</td>
                    break;
                case null:
                <td>I'm null</td>
                    break;
            }
        </tr>
    }
</table> 
```

# git - Git删除名称中带有空格的文件

> ID：11625746
> 
> 赞同：8
> 
> 时间：2012-07-24T07:04:18.483
> 
> 标签：git

我添加了一个文件并提交了`webpageone fresh.rhtml`. 我在名字中留了一个空格。当我尝试删除它时，使用：

```
git rm -f /webpageone fresh.rhtml 
```

我收到此错误：

```
pathspec '/webpageone' did not match any files. 
```

我尝试删除另一个文件并且它起作用了......所以问题是间距。我怎样才能删除这个？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-24T07:08:13.143

这是一个 shell 问题，而不是一个 git 问题。你需要逃离这个空间。这应该有效：

```
git rm -f /webpageone\ fresh.rhtml 
```

我想这也应该有效：

```
git rm -f "/webpageone fresh.rhtml" 
```

# asp.net - 调试时出错

> ID：11625753
> 
> 赞同：0
> 
> 时间：2012-07-24T07:04:50.170
> 
> 标签：asp.net

这个错误是什么意思？'Admin_ManageInvtry。' 不是属性“继承”的有效值。我已经查看了代码，删除并重做页面，但仍然得到同样的错误。有人可以告诉我为什么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:08:53.787

您必须`Inherits`在代码隐藏中使用部分类的名称设置属性值。

例如，这是代码隐藏中的代码

```
public partial class Sample : System.Web.UI.Page{ ...} 
```

并且 .aspx 标记必须是，

```
<%@ Page Language="C#" .... Inherits="Sample" %> 
```

# java - 如何删除jtable中的所有行？

> ID：11625755
> 
> 赞同：2
> 
> 时间：2012-07-24T07:04:51.340
> 
> 标签：java, swing, jtable, actionlistener, selectionmodel

我有一个带有列表选择侦听器的 jtable 我可以动态地将新行添加到我的表中，当我选择行时，选定的行内容将出现在文本框中我可以编辑和删除数据，对于我的应用程序我存储了表数据到 xml 文件中，当我添加新行时，将成功添加到表中。但是当我选择一行并且更新意味着表没有得到更新（这里我调用加载表（））。（但更新的值在 xml 文件中正确更改）这是我创建表的示例代码*

```
 ListSelectionModel selectionModel;
    JTable table1;
    model = new DefaultTableModel();
    table = new JTable(model);       table.setRowHeight(20);
    selectionModel = table.getSelectionModel();                  
    selectionModel.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

 selectionModel.addListSelectionListener(new ListSelectionListener() {
        public void valueChanged(ListSelectionEvent e) {

            stxtBox.setText("");
            ptxtBox.setText("");
            ntxtBox.setText("");

            if (!e.getValueIsAdjusting()) {

             model1 = table.getSelectionModel();
                int lead = model1.getLeadSelectionIndex();
                int columns = table.getColumnCount();
                String sip = "";
                String sport = "";
                String snoq = "";
                for (int col = 0; col < columns; col++) {
                    Object o = table.getValueAt(lead, col);

                    if (col == 0) {
                        sip += o.toString();
                        stxtBox.setText(sip);
                        selectedip = sip;

                    } else if (col == 1) {

                        sport += o.toString();
                        ptxtBox.setText(sport);
                        selectedport = sport;
                    } else {

                        snoq += o.toString();
                        ntxtBox.setText(snoq);
                    }
                    selectedreq = snoq;

                }

            }table.clearSelection();
        }
    }); 
```

我像这样加载表格内容

```
 int rowCount=0;

            File file = new File("serverconfig.xml");

            if (file.exists())

            {

                System.out.print("in load");
                int e = table.getRowCount();

                if(e> 0)
                {

                while (table.getRowCount() > 0) {
                    ((DefaultTableModel) table.getModel()).removeRow(0);
                }

                }

//here i will load table content from my xml file (that's working fine) 
```

问题是当我更新我的表格内容时，我会调用 loadtable() 函数，每次我都会收到这个错误

```
java.lang.ArrayIndexOutOfBoundsException: 1 >= 1
    at java.util.Vector.elementAt(Unknown Source)
    at javax.swing.table.DefaultTableModel.getValueAt(Unknown Source)
    at javax.swing.JTable.getValueAt(Unknown Source)
    at Testsample$18.valueChanged(Testsample.java:1810)
    at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
    at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
    at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
    at javax.swing.DefaultListSelectionModel.insertIndexInterval(Unknown Source)
    at javax.swing.JTable.tableRowsInserted(Unknown Source)
    at javax.swing.JTable.tableChanged(Unknown Source)
    at javax.swing.table.AbstractTableModel.fireTableChanged(Unknown Source)
    at javax.swing.table.AbstractTableModel.fireTableRowsInserted(Unknown Source)
    at javax.swing.table.DefaultTableModel.insertRow(Unknown Source)
    at javax.swing.table.DefaultTableModel.addRow(Unknown Source)
    at javax.swing.table.DefaultTableModel.addRow(Unknown Source)
    at Testsample.loadtable(Testsample.java:577)
    at Testsample$10.actionPerformed(Testsample.java:1551)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T08:38:17.380

老故事：如果有实现目标的高级 API，永远不要使用低级 API。或者可能是一个相关的故事：一遍又一遍地阅读 api 文档 :-)

对于 DefaultTableModel，删除所有行的高级 api 是：

```
model.setRowCount(0); 
```

**编辑**

查看您的堆栈跟踪，该错误不是由删除引起的，而是由访问新添加的行引起的。我的（随机，没有看到更多或您的代码:-)猜测将是 rowIndex`lead`在

```
Object o = table.getValueAt(lead, col); 
```

您必须检查它是否有效，可能是负数（无前导）或仍然是旧的（添加前的索引）请注意，选择状态是由于在 tableModel 中添加/删除数据而更新的（以及用户交互）这里的重要规则是确保在模型更改后更新表的内部，然后再访问客户端代码中的任何状态。您可以通过将其包装在 invokeLater 中来做到这一点：

```
void updateTextBox() {
    if (selectionModel.getLeadSelectionIndex() >= table.getRowCount() ||
        selectionModel.getLeadSelectionIndex() < 0) return;
    .... // update text panel here
}

public void valueChanged(...) {
    if (e.getValueIsAdjusting()) return;
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
           updateTextBox();
        }
    }));
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-24T07:32:15.080

例如

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import javax.swing.table.*;

public class RemoveAddRows extends JFrame {

    private static final long serialVersionUID = 1L;
    private Object[] columnNames = {"Type", "Company", "Shares", "Price"};
    private Object[][] data = {
        {"Buy", "IBM", new Integer(1000), new Double(80.50)},
        {"Sell", "MicroSoft", new Integer(2000), new Double(6.25)},
        {"Sell", "Apple", new Integer(3000), new Double(7.35)},
        {"Buy", "Nortel", new Integer(4000), new Double(20.00)}
    };
    private JTable table;
    private DefaultTableModel model;

    public RemoveAddRows() {

        model = new DefaultTableModel(data, columnNames) {

            private static final long serialVersionUID = 1L;

            @Override
            public Class getColumnClass(int column) {
                return getValueAt(0, column).getClass();
            }
        };
        table = new JTable(model) {

            private static final long serialVersionUID = 1L;

            @Override
            public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
                Component c = super.prepareRenderer(renderer, row, column);
                int firstRow = 0;
                int lastRow = table.getRowCount() - 1;
                int width = 0;
                if (row == lastRow) {
                    ((JComponent) c).setBackground(Color.red);
                } else if (row == firstRow) {
                    ((JComponent) c).setBackground(Color.blue);
                } else {
                    ((JComponent) c).setBackground(table.getBackground());
                }
                /*if (!isRowSelected(row)) {
                String type = (String) getModel().getValueAt(row, 0);
                c.setBackground("Buy".equals(type) ? Color.GREEN : Color.YELLOW);
                }
                if (isRowSelected(row) && isColumnSelected(column)) {
                ((JComponent) c).setBorder(new LineBorder(Color.red));
                }*/
                return c;
            }
        };
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane);
        JButton button1 = new JButton("Remove all rows");
        button1.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent arg0) {
                if (model.getRowCount() > 0) {
                    for (int i = model.getRowCount() - 1; i > -1; i--) {
                        model.removeRow(i);
                    }
                }
                System.out.println("model.getRowCount() --->" + model.getRowCount());
            }
        });
        JButton button2 = new JButton("Add new rows");
        button2.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent arg0) {
                Object[] data0 = {"Buy", "IBM", new Integer(1000), new Double(80.50)};
                model.addRow(data0);
                Object[] data1 = {"Sell", "MicroSoft", new Integer(2000), new Double(6.25)};
                model.addRow(data1);
                Object[] data2 = {"Sell", "Apple", new Integer(3000), new Double(7.35)};
                model.addRow(data2);
                Object[] data3 = {"Buy", "Nortel", new Integer(4000), new Double(20.00)};
                model.addRow(data3);
                System.out.println("model.getRowCount() --->" + model.getRowCount());
            }
        });
        JPanel southPanel = new JPanel();
        southPanel.add(button1);
        southPanel.add(button2);
        add(southPanel, BorderLayout.SOUTH);
    }

    public static void main(String[] args) {
        RemoveAddRows frame = new RemoveAddRows();
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:50:49.583

这将完成任务

```
DefaultTableModel dm = (DefaultTableModel)table.getModel();
dm.getDataVector().removeAllElements();
dm.fireTableDataChanged(); 
```

为此，您需要创建这样的表

```
String[] columnNames = {"First Name",
            "Last Name",
            "Sport",
            "# of Years",
            "Vegetarian"};

Object[][] data = {
{"Kathy", "Smith",
"Snowboarding", new Integer(5), new Boolean(false)},
{"John", "Doe",
"Rowing", new Integer(3), new Boolean(true)},
};

JTable jTable = new JTable();
jTable.setModel(new DefaultTableModel(data,columnNames)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T16:07:52.197

这很容易：只需这样做：

```
DefaultTableModel model = (DefaultTableModel)table.getModel();

while(model.getRowCount() > 0){
   for(int i = 0 ; i < model.getRowCount();i++){
      model.removeRow(i);
   }
} 
```

# c# - 使用 linq 查询将列与列进行比较

> ID：11625757
> 
> 赞同：0
> 
> 时间：2012-07-24T07:04:54.453
> 
> 标签：c#, linq, linq-to-entities

我遇到了一个我目前陷入困境的问题。例子：

```
EmployeeShiftID |     ShiftTime_Start     |     hiftTime_Stop     |     Name     | Emp_Start | Emp_Stop
                |(linked with foreign key)|    (linked with FK)   |              |           |
    1           |       0000              |         1000          |      Ken     |    0000   |    1000 
```

这些数据显示在数据网格视图中，外键链接。并且 Shift start 和 stop 也匹配 Emp_Start 和 stop。问题是当我更新 Emp_start 和 stop 时，ShiftTime_Start 和 stop 不与 Emp_Start 和 Stop 比较，并且在我尝试将 Emp_Start 和 stop 更改为 0430 和 2100 时保持为 0000 和 1000。

我保存在数据库中的时间类型是字符串而不是“时间”类型。任何人都可以帮助我吗？我将展示我为它所做的任何代码。

```
private void btnUpdate_Click(object sender, EventArgs e)
{
    using (testEntities Setupctx = new testEntities())
    {
        int ID = Int32.Parse(lblID.Text);
        var ESquery = (from es in Setupctx.employeeshifts
                       where es.EmployeeShiftID == ID
                       select es).First();

        ESquery.StartTime = txtStart.Text;
        ESquery.EndTime = txtStop.Text;
        ESquery.Date = txtDate.Text;
        Setupctx.SaveChanges();
        txtStart.Text = "";
        txtStop.Text = "";
        txtDate.Text = "";
        this.Edit_Employee_Shift_Load(null, EventArgs.Empty);
        MessageBox.Show("Employee's Shift Has Been Updated.");
    }
}

private void LoadAllEditEmpShift()
{
    using (testEntities Setupctx = new testEntities())
    {
        BindingSource BS = new BindingSource();
        var Viewemp = from ES in Setupctx.employeeshifts
                      join shifthour sh in Setupctx.shifthours on ES.ShiftHourID equals sh.idShiftHours
                      select new
                      {
                          ES.EmployeeShiftID,
                          ShiftHour_Start = sh.shiftTiming_start,
                          ShiftHour_Stop = sh.shiftTiming_stop,
                          ES.EmployeeName,
                          ES.StartTime,
                          ES.EndTime,
                          ES.Date
                      };

        BS.DataSource = Viewemp;
        dgvEmpShift.DataSource = BS;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:39:43.150

我认为它应该是这样的：

```
private void btnUpdate_Click(object sender, EventArgs e)
{
    using (testEntities Setupctx = new testEntities())
    {
        int ID = Int32.Parse(lblID.Text);
        var ESquery = (from es in Setupctx.employeeshifts
                       where es.EmployeeShiftID == ID
                       select es).First();
        var SHquery = (from sh in Setupctx.shifthours where sh.idShiftHours == ESQuery.ShiftHourID 
                      select sh).First();

        ESquery.StartTime = txtStart.Text;
        ESquery.EndTime = txtStop.Text;
        ESquery.Date = txtDate.Text;
        SHquery.shiftTiming_start = ESquery.StartTime;
        SHquery.shiftTiming_stop = ESquery.EndTime;
        Setupctx.SaveChanges();
        txtStart.Text = "";
        txtStop.Text = "";
        txtDate.Text = "";
        this.Edit_Employee_Shift_Load(null, EventArgs.Empty);
        MessageBox.Show("Employee's Shift Has Been Updated.");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:59:01.810

您应该在 btnUpdate_Click 方法中隐式更新 shifthours 对象的属性。

# c++ - 如何正确安装 libcurl 并将其链接到 c++ 程序？

> ID：11625759
> 
> 赞同：4
> 
> 时间：2012-07-24T07:04:59.327
> 
> 标签：c++, libcurl

我一直在尝试让 C++ 程序使用 libcurl，但无法弄清楚。在 C++ 中开发时，我通常使用 Visual Studio，但这个项目使用 vi 一个 ssh 会话到使用 VI 和 g++ 的 centos 机器。我已经运行了 yum install curl、yum install libcurl、yuminstall curl-devel 和 yum install libcurl-devel，但仍然无法编译程序。

API 上的文档非常好，我可以找到正确安装 libcurl 后如何使用它的信息，但是安装它被证明是一件痛苦的事情。

代码是：

```
#include<iostream>
#include<string>
#include<curl/curl.h>
using namespace std;

string data; //will hold the urls contents

size_t writeCallback(char* buf, size_t size, size_t nmemb, void* up)
{ //callback must have this declaration
    //buf is a pointer to the data that curl has for us
    //size*nmemb is the size of the buffer

    for (int c = 0; c<size*nmemb; c++)
    {
        data.push_back(buf[c]);
    }
    return size*nmemb; //tell curl how many bytes we handled
}

int main(void) {

 CURL* curl;

    curl_global_init(CURL_GLOBAL_ALL);
    curl=curl_easy_init();

    curl_easy_setopt(curl, CURLOPT_URL, "https://domain.com");
    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, &writeCallback);
    curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L);
    curl_easy_setopt(curl, CURLOPT_USERPWD, "username:password");

    curl_easy_perform(curl);

    cout << endl << data << endl;
    cin.get();

    curl_easy_cleanup(curl);
    curl_global_cleanup();

    return 0;
} 
```

尝试编译时出现以下错误：

```
/tmp/ccfeybih.o: In function `main':
helloworld.cpp:(.text+0x72): undefined reference to `curl_global_init'
helloworld.cpp:(.text+0x77): undefined reference to `curl_easy_init'
helloworld.cpp:(.text+0x96): undefined reference to `curl_easy_setopt'
helloworld.cpp:(.text+0xb1): undefined reference to `curl_easy_setopt'
helloworld.cpp:(.text+0xcc): undefined reference to `curl_easy_setopt'
helloworld.cpp:(.text+0xe7): undefined reference to `curl_easy_setopt'
helloworld.cpp:(.text+0xf3): undefined reference to `curl_easy_perform'
helloworld.cpp:(.text+0x132): undefined reference to `curl_easy_cleanup'
helloworld.cpp:(.text+0x137): undefined reference to `curl_global_cleanup'
collect2: ld returned 1 exit status 
```

我找不到从这里去的地方。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T07:29:32.677

您收到的错误是链接器错误。链接器无法找到 curl 库。您需要指定链接器在链接时搜索适当库的路径。

在这种情况下（如果您在标准 lib 目录中安装了 lib curl，例如 /usr/lib、r /usr/local/lib），则以下内容应该可以工作：

g++ you_file_name.cpp -lcurl

否则，您必须指定可以找到库的目录的路径。例如：

g++ -L/curl/lib/dir -lcurl you_file_name.cpp。

当有多个库要链接时，这些事情会变得复杂，因此最好使用[CMake](http://www.cmake.org/)等构建系统来协助管理包含目录/库路径和其他各种事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T07:34:06.467

针对 libcurl 构建的正确方法是使用`pkg-config`（与许多现代软件包一样）。如果是直接`g++`调用，那将是：

```
g++ $(pkg-config --cflags libcurl) helloworld.cpp $(pkg-config --libs libcurl) 
```

这将自动处理库和头文件不在系统包含/库目录中的非常见（但仍然正确）的 libcurl 安装。如果没有 pkg​​-config，您将需要始终自己找出正确的路径。

* * *

如果您开始使用自动工具，您将使用 in `configure.ac`：

```
PKG_CHECK_MODULES([CURL], [libcurl]) 
```

然后在`Makefile.am`：

```
helloworld_CPPFLAGS = $(CURL_CFLAGS)
helloworld_LIBS = $(CURL_LIBS) 
```

# c - 将多态函数作为参数传递给 C 中的另一个函数

> ID：11625760
> 
> 赞同：1
> 
> 时间：2012-07-24T07:05:03.643
> 
> 标签：c, parameter-passing, parametric-polymorphism

关于这个问题，我只在 C 中工作。

我有两个函数原型：

`int pkg_permserver(const char *service, const char *protocol, int backlog, void (*errlog) (char *msg))`

`int pkg_permserver_ip(const char *ipOrHostname, const char *service, const char *protocol, int backlog, void (*errlog)(char *msg))`

和以下代码段：

```
int test_permserv(char *port) {
    int return_val;
    int num_port;
    char *chr_port;
    int nr_test_passed=0;
    chr_port = (char *) bu_malloc(8 * sizeof( char), "port string");

    printf("TESTING  PKG_PERMSERVER.....\n PORT PARAMETER TEST: \n");

    printf("TESTING VALID PORT...\n");
    return_val = pkg_permserver(port ,"tcp", 0, 0);
    display(return_val,1,&nr_test_passed);

    printf("TESTING INVALID PORT...\n");
    num_port = -1;
    sprintf(chr_port, "%d", num_port);
    return_val = pkg_permserver(chr_port ,"tcp", 0, 0);
    display(return_val,0,&nr_test_passed);
} 
```

我正在编写一个测试单元。我需要为函数的每个参数测试每种情况（有效/无效）。

我无法修改上述功能。pkg_permserver 和 pkg_permserver_ip 有完全相同的参数，除了 pkg_permserver_ip 有另外的 IpOrHostname。

如果我要编写另一个函数“test_permserver_ip”，我不想复制 - 粘贴来自 test_permserver 的部分（因为参数相同）。

我想到的是类似 int test_permserver(char * port, int which_function);

我想避免为 test_permserver_ip 复制相同的代码（对于与 test_permserver 相同的参数） pkg_permserver_ip 的测试函数尚未编写。

这是上述两个函数的代码：

```
int pkg_permserver(const char *service, const char *protocol, int backlog, void (*errlog) (char *msg))
{
    struct in_addr iface;
    iface.s_addr = INADDR_ANY;
    return _pkg_permserver_impl(iface, service, protocol, backlog, errlog);
}

int
pkg_permserver_ip(const char *ipOrHostname, const char *service, const char *protocol, int backlog, void (*errlog)(char *msg))
{
    struct hostent* host;
    struct in_addr iface;
    /* if ipOrHostname starts with a number, it's an IP */
    if (ipOrHostname) {
    if (ipOrHostname[0] >= '0' && ipOrHostname[0] <= '9') {
        iface.s_addr = inet_addr(ipOrHostname);
    } else {
        /* XXX gethostbyname is deprecated on Windows */
        host = gethostbyname(ipOrHostname);
        iface = *(struct in_addr*)host->h_addr;
    }
    return _pkg_permserver_impl(iface, service, protocol, backlog, errlog);
    } else {
    _pkg_perror(errlog, "pkg: ipOrHostname cannot be NULL");
    return -1;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:21:33.357

正如 ATaylor 所说，只需从两个函数中提取共同的东西并得到类似的东西

```
int common_stuff_for_permserver(... all common params ...)
{
  ....
}

int pkg_permserver(...)
{
      /// nothing to add here
      return common_stuff_for_permserver( ... all params ... );
}

int pkg_permserver_ip(...)
{
      /// check for errors from common stuff
      if(!common_stuff_for_permserver( ... all params ... )) { return 0; }

      /// ip-specific stuff
      ...
} 
```

如果您不知道如何提取公共部分，请为这两个函数发布更多代码，我们会考虑一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:21:29.067

强制转换函数指针是绝对禁止的。请改用接受指向结构的指针的中间函数类型。或者以 union-type-tag 作为第一个成员的 union 参数。

中间函数（每个“真实”函数一个）只需从结构中提取正确的参数并将它们传递给正确的函数。

# ssis - 如何为 2 个包重用同一组代码

> ID：11625762
> 
> 赞同：1
> 
> 时间：2012-07-24T07:05:12.833
> 
> 标签：ssis

我有 2 个 ssis 包，它们使用相同的查询（对 package1 和 package2 的查询略有不同），并给出了 2 个提取**sample1.csv 和 sample2.csv**。

我不想使用两个包，而是只想使用单个包来并行获取这种情况下的提取。

通过运行单一作业，我想一次提取 sample1.csv 和 sample2.csv。

在我的两个包中，我都在执行 sql 任务中使用了临时表，因此在数据流任务中，我采用了脚本组件来获取列名和数据。

我附上了示例查询结果输出![Package1 输出提取](../Images/6bb762288bd6c378e4473fee9681259f.png)

![Package2 输出提取](../Images/fd7d71cd829db56a5413cbc919c2330b.png)

图一显示了我在 package1 中使用的查询结果。图 2 显示了我在 package2 中使用的查询结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:59:30.537

我也有类似的情况。解决方法如下：

1.  在 SQL Server 中创建一个表（“运行”），其中包含一个 ID 列、一个查询列和一个目标列
2.  每次“运行”（即每个现有包）创建一条记录，在 Query 列中使用不同的查询
3.  使用 Execute SQL Task 创建父包以查询 Run 表，返回所有必需的查询并将输出放入对象变量中
4.  为每个枚举器添加一个循环遍历返回的记录，将 Query 列映射到 Query 变量，将 Destination 列映射到 Destination 变量
5.  在 for each 枚举器中，添加一个执行包任务，指向您现有的“子”包
6.  在子包中，添加另一个 Query 变量并设置包配置以获取 Parent 的 Query 变量。对目的地做同样的事情
7.  修改子包中的数据源以使用来自变量的 sql 命令并将其指向 Query 变量
8.  修改子包目标中使用的文件管理器，以使用使用目标变量构建文件路径/名称的表达式

请注意，这仅适用于每个查询返回完全相同数量的具有相同数据类型和数据长度的列。如果没有，您将收到各种元数据错误。

可以通过在 SQL Server 数据库中创建存储过程或用户定义的函数来集中查询，并在 Run 表中存储粒度参数来改进上述情况。

# html - html5画布内的画布

> ID：11625767
> 
> 赞同：10
> 
> 时间：2012-07-24T07:05:56.983
> 
> 标签：html, canvas

我们可以在现有的画布中放置一个画布吗？如果可以，请帮助在 html5 中进行。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-24T13:18:44.947

有两种可能的方式来解释您的问题。一个是你的意思是实际上嵌套`canvas`元素本身，如下所示：

```
<canvas id="outer">
    <canvas id="inner"></canvas>
</canvas> 
```

这是合法的（根据[validator.nu](http://validator.nu/)）但毫无意义。元素内的内容`canvas`用于后备。使用元素内部内容的唯一方法`canvas`是浏览器不支持`canvas`，在这种情况下，`canvas`无论如何都不会看到内部元素。

解释您的问题的另一种可能方法是您能否在另一个画布上显示显示在一个画布上的图像。这很简单，一个`canvas`元素可以用作 的第一个参数`context.drawImage()`。如果你有两个`canvas`元素：

```
<canvas id="c1" width="200" height="200"></canvas>
<canvas id="c2" width="200" height="200"></canvas> 
```

然后[这个脚本（使用jQuery）](http://jsfiddle.net/robertc/mGbFS/)将在第一个上绘制`canvas`，然后将它作为图像添加四次到第二个`canvas`：

```
var c1 = $('#c1');
var ctx1 = c1[0].getContext('2d');

ctx1.fillRect(50,50,100,100);

var c2 = $('#c2');
var ctx2 = c2[0].getContext('2d');

ctx2.drawImage(c1[0],0,0,100,100);
ctx2.drawImage(c1[0],100,0,100,100);
ctx2.drawImage(c1[0],0,100,100,100);
ctx2.drawImage(c1[0],100,100,100,100); 
```

但再说一遍，你为什么要这样做？[您可以只使用一个](http://jsfiddle.net/robertc/szX4f/)`canvas`复制上面第二个的图像：

```
var c1 = $('#c1');
var ctx1 = c1[0].getContext('2d');

ctx1.fillRect(25,25,50,50);
ctx1.fillRect(125,25,50,50);
ctx1.fillRect(25,125,50,50);
ctx1.fillRect(125,125,50,50); 
```

总而言之：是的，这是可能的，但在简单使用中并不是真正需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-27T16:14:09.330

将一个画布嵌套在另一个画布中是绝对没有意义的。如果浏览`canvas`器不支持`canvas`. 所以，就按照 robertc 说的做：
`<canvas id="background">fallbacks/polyfills go in here...</canvas> <canvas id="foreground">.. or here, but not other canvases.</canvas>`

# javascript - struts的验证器框架和javascript哪个更好

> ID：11625768
> 
> 赞同：1
> 
> 时间：2012-07-24T07:06:01.217
> 
> 标签：javascript, struts2

使用 javascript 的客户端验证或使用 struts 验证器框架的服务器端验证更安全和更有利的是什么..??? 我正在开发电子商务应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:15:15.790

你不能比较两者，因为它们都有不同的范围和用例

我强烈建议同时使用两者，客户端验证更多地以用户为中心，并向用户显示一些一般错误，但不为用户输入提供深层次的数据检查。

在触发任何有助于保持数据一致性的业务逻辑之前，请继续进行服务器端验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:57:07.300

Based on `What is more secure and advantageous`, i will suggest you use `JSR 303` bean validation. You annotate your entities or beans with annotations like `@NotNull` etc and use this [Hibernate Validator plugin for Struts 2](http://code.google.com/p/full-hibernate-plugin-for-struts2/). You can now replace the `validation` interceptor with the interceptor this plugin provides. This is both advantageous in terms of not repeating yourself and not dealing with numerous validation xml files.

# spring - 用于 Web 应用程序根的 Spring MVC 拦截器映射

> ID：11625771
> 
> 赞同：4
> 
> 时间：2012-07-24T07:06:05.093
> 
> 标签：spring, jakarta-ee, spring-mvc

我在我的应用程序上下文中配置了一个拦截器，我想映射到 Web 应用程序的根目录（“/”）。

```
<mvc:interceptors>
    <bean class="com.example.SslInterceptor" />
    <mvc:interceptor>
        <mvc:mapping path="/" />
        <mvc:mapping path="/login" />
        <bean class="com.example.SslInterceptor" />
    </mvc:interceptor>
</mvc:interceptors> 
```

但是，虽然拦截器是为“/login”调用的，但它不是为“/”调用的。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T08:52:53.147

请更改 servlet 配置 xml 文件中的拦截器配置，如下所示：

```
<mvc:annotation-driven/>
<mvc:default-servlet-handler/>

<mvc:interceptors>
  <mvc:interceptor>
    <mvc:mapping path="/**"/>
    <bean class="de.scrappy.web.TestInterceptor"/>
  </mvc:interceptor>
</mvc:interceptors> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T10:40:08.410

你真的只想映射根路径还是你的意思是'/ *'？无论如何，以下配置适用于我使用 Spring 3.1.1，DispatcherServlet 映射到 web.xml 中的根 ('/')：

```
<mvc:annotation-driven/>
<mvc:default-servlet-handler/>

<mvc:interceptors>
  <mvc:interceptor>
    <mvc:mapping path="/"/>
    <bean class="de.scrappy.web.TestInterceptor"/>
  </mvc:interceptor>
</mvc:interceptors> 
```

您使用的是哪个版本的 Spring 以及 Spring 的 DispatcherServlet 是如何映射的？并注意`TestInterceptor`implements `HandlerInterceptor`，我不知道是否`WebRequestInterceptors`有不同的处理方式。

# php - 用 PHP 开发 iPhone/Android 应用程序的任何资源

> ID：11625772
> 
> 赞同：0
> 
> 时间：2012-07-24T07:06:14.987
> 
> 标签：php, android, iphone, mobile-application

所以我刚刚完成了一个使用 Instagram API 完全用 PHP 构建的网站......我想为 iPhone 和 Android 创建一个应用程序。

我的问题：有没有一种简单的方法可以用 PHP 为 iPhone 或 Android 设备开发应用程序？我知道它们是使用 Java 开发的，但我对 Java 不太了解……我更喜欢 PHP，有人有这方面的经验吗？

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:09:25.003

我不认为使用 PHP 开发应用程序来进行 iOS/Android 应用程序开发是不可能的，但您可以使用 HTML5、CSS3、Javascript。可用的跨浏览器移动应用程序开发平台很少，下面是其中几个的链接。

[http://www.appcelerator.com/](http://www.appcelerator.com/)

[http://www.phonegap.com/](http://www.phonegap.com/)

[http://www.coronalabs.com/](http://www.coronalabs.com/)

[http://www.kendoui.c​​om/](http://www.kendoui.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:07:51.910

发现最好的方法是使用webView：

[http://developer.android.com/guide/webapps/webview.html](http://developer.android.com/guide/webapps/webview.html)

[http://www.mkyong.com/android/android-webview-example/](http://www.mkyong.com/android/android-webview-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-12T09:56:03.767

您可以使用 android SL4A 库在 android 中进行 php 开发。 [http://phpforandroid.net/doku.php?do=export_odt&id=start](http://phpforandroid.net/doku.php?do=export_odt&id=start)

# c# - 如何从 linq 获取 toTraceString() 到实体查询？

> ID：11625774
> 
> 赞同：6
> 
> 时间：2012-07-24T07:06:22.003
> 
> 标签：c#, .net, entity-framework, linq-to-entities

```
dynamic traceFile =  Environment.GetFolderPath(Environment.SpecialFolder.Desktop) + "\\EntityFrameworkTrace.log";                
var CurrentStock = (from s in DBViews.StockStatus
                    where s.ProductID != 10
                    orderby s.ProductName
                    select new
                    {
                        s.ProductID,
                        s.ProductName,
                        CurrentStock = s.TotalStocked - s.TotalSold,
                        s.CurrentSellingRate,
                        CashValue = (s.TotalStocked - s.TotalSold) * s.CurrentSellingRate,
                        s.LastStocked,
                        s.LastCostPrice,
                        s.LastQtyStocked
                    }).ToList();

File.AppendAllText(traceFile, CurrentStock.toTraceString());   
return CurrentStock.ToList(); 
```

如何在以下行中从 CurrentStock 获取 toTraceString() ？它没有得到解决

```
File.AppendAllText(traceFile,  CurrentStock.toTraceString()); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T07:37:14.050

你不能因为你已经调用`ToList`了 - 它不是一个 Linq-to-Entities 查询，而只是一个`List`实例。

尝试这个：

```
var CurrentStock = (from s in DBViews.StockStatus
                    where s.ProductID != 10
                    orderby s.ProductName
                    select new
                    {
                        s.ProductID,
                        s.ProductName,
                        CurrentStock = s.TotalStocked - s.TotalSold,
                        s.CurrentSellingRate,
                        CashValue = (s.TotalStocked - s.TotalSold) * s.CurrentSellingRate,
                        s.LastStocked,
                        s.LastCostPrice,
                        s.LastQtyStocked
                    }); // No ToList here!

File.AppendAllText(traceFile, ((ObjectQuery)CurrentStock).ToTraceString());   
return CurrentStock.ToList(); 
```

顺便提一句。你为什么用`dynamic`而不是`string`？动态类型仅适用于有意义的特殊情况 - 情况并非如此。

# makefile - 在 makefile 中自动生成配方延续

> ID：11625775
> 
> 赞同：0
> 
> 时间：2012-07-24T07:06:42.653
> 
> 标签：makefile, gnu-make

我想在执行配方时生成一个文件，该文件在文件的单独行中列出变量的每个单词。这是规则的开始。$(OBJ_LIST) 中的每个单词都应该放入 make_temp。注意：$(OBJ_LIST) 是 .o 文件的列表。注意：使用 > 表示 .RECIPEPREFIX。

```
$(MDIR)zzz.exe: $(OBJ_LIST)
>  if exist make_temp del make_temp 
```

如果我把这 3 行放在下面，那么文件将包含文件中的前 3 个单词。

```
>  echo $(word 1,$+) >> make_temp
>  echo $(word 2,$+) >> make_temp
>  echo $(word 3,$+) >> make_temp 
```

我曾尝试使用 foreach 和 eval 来做到这一点。

```
>  $(foreach obj,$+,$(eval > echo $(obj) >> make_temp)) 
```

这会出现错误 makefile.min:473: *** recipe 在第一个目标之前开始。停止。这与我将带有 > 的行放在前面没有规则起始语法的行上时会出现相同的错误。因此，这似乎不会继续我想要做的当前食谱列表。

如何使 foreach 和 eval 继续当前的配方列表和/或使用替代方法生成文件列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T01:02:09.097

我已经解决了这个问题。

```
make_temp: makefile.min
>  $(shell if exist make_temp del make_temp)
>  $(foreach obj,$(OBJ_LIST),$(shell echo $(obj) >> make_temp)) 
```

如果我不将 if 语句放在 shell 中，它将在 foreach 循环由于未知原因执行后执行，因此文件被删除。

生成这个文件需要很长时间，因此我只在 makefile 更改时才生成它。

我忘了提到我在 Windows 上执行此操作。我认为 Eldar Abusalimov 的第一个解决方案在 Windows 中没有等效形式。我将第二个解决方案转换为 Windows，如下所示。

```
make_temp : $(OBJ_LIST)
>  for %%a in $(OBJ_LIST) do echo %a 
```

这在我的情况下不起作用，因为 $(OBJ_LIST) 超过 8192 个字符，这是 Windows 中 cmd.exe 的限制。这就是为什么我要生成这个文件；因为我不能直接使用 $(OBJ_LIST) 。

谢谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:38:48.967

你有没有尝试过

```
$(foreach obj,$+,$(shell echo $(obj) >> make_temp)) 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T16:11:17.737

用于以`foreach`形式构造配方`{echo o1; echo o2; ...} > make_temp`：

```
make_temp : $(OBJ_LIST)
>   { $(foreach o,$+,echo '$o';) } > $@ 
```

或者，使用 shell 工具：

```
make_temp : $(OBJ_LIST)
>   for o in $+ do echo $$o; done > $@ 
```

# mysql - MySQL 使用 Pow() 处理表数据

> ID：11625776
> 
> 赞同：1
> 
> 时间：2012-07-24T07:06:49.947
> 
> 标签：mysql

我需要在名为`prize` Fields 的表中有 3 列：`Event_id`, `Place`,`Place`

我需要找到奖金的平方根除以 2，四舍五入到整数，然后将其显示在`New_Money`与其他 3 列 ( `Event_id`, `Place`, `Money`) 一起调用的列中，而无需将数据实际存储`New_Money`在表中。哦，我还要用电源功能。

我开始测试：

```
SELECT ROUND(money*money/2) AS New_Money
FROM prize; 
```

这给了我一个名为`New_Money`正确数据的列，但没有其他列。我不知道如何让其他列显示在同一个字符串中，而且这`Pow()`无论如何都没有使用该函数。

我测试过：

```
 SELECT pow(money,money) AS New_Money
 FROM prize; 
```

但是给出了一个错误，5分钟后仍在“获取”....

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:16:26.347

您以错误的方式使用 POW。尝试这个

```
SELECT  Event_id, Place, Money,pow(money,2)/2 AS New_Money FROM prize; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:13:04.997

你试过这个吗？

```
SELECT Event_id, Place, Money,ROUND(money*money/2) AS New_Money FROM prize; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:15:02.513

POW 使用错误。这是您应该使用的查询

```
SELECT Event_id, Place, Money, ROUND(POW(money, 2)/2) as New_Money
FROM prize; 
```

上面的查询利用了 POW 和对 maney 平方除以 2 后的结果。

希望能帮助到你...

[POW 函数的 MySQl 文档](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_pow)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-29T04:45:00.400

他们是[SQRT](http://www.tutorialspoint.com/mysql/mysql-sqrt-function.htm)函数可`mysql`用于查找平方根，因此您可以通过以下方式轻松找到结果：

```
SELECT  Event_id, Place, Money,ROUND(SQRT(money)/2) AS New_Money FROM prize; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-10-29T04:32:53.307

我可以建议你最好的一个：。

```
SELECT *, ROUND(POW(money, 2)/2) AS new_money FROM prize; 
```

为我工作。

# r - 使用 R 处理日志文件

> ID：11625781
> 
> 赞同：0
> 
> 时间：2012-07-24T07:07:18.983
> 
> 标签：r, logging, time-series

我刚刚发现了 R，它似乎是获取网络服务器日志文件统计信息的理想工具。我已经研究了几个库，比如`zoo`and `plyr`，但它们都没有提供一个直接的解决方案来聚合带时间戳的数据。

是否有任何 R lib 或教程或文档专注于分析日志文件之类的数据？哪个强调在切片中聚合时间？

可能的用例：

*   每天平均请求时间
*   每天每个会话的平均请求数
*   本周收到最慢的请求
*   ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:24:18.130

这种处理时间戳数据的问题实际上很常见。因为您的问题含糊不清，所以我的回答仅限于一些指针。有关聚合时间序列的示例，请参见（顺便说一句，这些都是我自己的答案）：

*   [如何使用 CSV 时间数据在 R 中创建直方图？](https://stackoverflow.com/questions/8602472/how-to-create-histogram-in-r-with-csv-time-data/8602955#8602955)
*   [如何在 R 中获得“每月事件”条形图](https://stackoverflow.com/questions/8892303/how-to-get-a-events-per-month-bar-plot-in-r/8894014#8894014)

这些答案都使用相同的策略，结合`plyr`and`ggplot2`包。这应该让你开始。请注意，这些只是我自己在几分钟内找到的答案。可能还有很多东西要找，特别是如果您正在寻找更具体的问题。

# php - 为提交的一组值一个一个输出结果

> ID：11625793
> 
> 赞同：0
> 
> 时间：2012-07-24T07:08:13.943
> 
> 标签：php, ajax

在我的 php 主页中，我有一个包含大约 10 到 60 个字段的表单。当我将其提交到“process.php”页面时，它将一一处理每个字段并输出结果。但这将输出整个结果。我想要做的是，使用 ajax 提交数据并一一收集输出并将其一一显示给用户。

我已经阅读了 jquery get、post 和 ajax 方法。但是我如何从 php 页面中逐一回显输出，并且每个都由 ajax 收集并一一显示给用户？

我知道我可以一个一个地进行 ajax 调用（发送一个字段并获得响应，然后将其显示给用户并发送下一个字段，依此类推）。但我不想那样做。我想一键发送所有字段并一一显示输出。

此 process.php 使用 API（使用 curl）。所以可能需要几秒钟的延迟。

可能吗 ？

更多细节：

```
$fields = $_POST['flds'];
foreach($fields as $f)
{
  // do cURL operation - API

  // print output
} 
```

所以输出将是：

```
output of field1
.....
output of field2
.....
output of field3
.....
etc.. 
```

即，首先它将显示：

```
output of field1 
```

几秒钟后：

```
output of field1
output of field2 
```

就像这样。我不想发送一个字段并获得输出，然后是第二个字段，然后是输出，等等。但我想发送整个字段并一个接一个地获得输出。

可能吗 ？

类似：[flush() 在 PHP 中不显示输出？](https://stackoverflow.com/questions/4190203/flush-not-displaying-output-in-php)

我尝试测试的内容：

```
<?php
@apache_setenv('no-gzip', 1);
@ini_set('zlib.output_compression', 0);

$i = 10;
while($i>0)
{
    echo $i . '<br />';
    flush();
    sleep(1);
    $i--;
}
?> 
```

但不工作。页面看起来像是加载了几秒钟，最后输出了整个数字。

问这个问题的原因是，这个 api 一次执行需要 4-11 秒或更长时间！所以超过 50 个字段大约需要 10 分钟。即使延长脚本用户的最大执行时间也必须等待该空白屏幕这么长时间！

# clickonce - ClickOnce 的新手。输入什么作为安装文件夹 URL？

> ID：11625795
> 
> 赞同：0
> 
> 时间：2012-07-24T07:08:45.903
> 
> 标签：clickonce

我将 ClickOnce 添加到我的应用程序中。我有一个 ftp 服务器，我想在其中发布我的应用程序。我也有一个网站，下载应该在那里。将本网站输入到安装文件夹 URL 有什么用？

此外，发布后我应该提供哪些内容可供下载？安装程序.exe？还是“.application”文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:34:59.823

我想到了。因此，如果发布文件夹有类似[ftp://xxx.xxx.xxx.xxx/App/](ftp://xxx.xxx.xxx.xxx/App/)之类的内容，则安装 URL 需要一个 http:// 页面。

# xml - 在 sopaUI 中使用 Groovy 脚本 - 将 XML Holder 的内容复制到另一个（尝试 CLONE SOAP 请求测试步骤）

> ID：11625796
> 
> 赞同：0
> 
> 时间：2012-07-24T07:08:47.957
> 
> 标签：xml, groovy, soapui

我是 groovy 脚本的新手，并寻求您的帮助以找到我目前面临的问题的解决方案。

我的要求是，在基于测试数据输入的每次迭代中，我必须从 SoapRequest 中删除一个或多个特定节点。为了实现这一点，我创建了两个相同的 SOAP 请求 - 原始和修改。

使用 groovy 脚本，我试图在每次迭代后使用原始soap请求的内容恢复修改后的soap请求的内容。（迭代 1 - 要删除的节点是，并且在第二次迭代中要删除的节点是保留 - 这是使用原始内容恢复请求的原因）。换句话说，想要克隆soap请求，以便可以对克隆的请求执行删除节点操作，保持原始请求不变。

以下是我的 TestSuite 下的测试步骤。

数据源原始 (SoapRequest) Groovy 脚本。修改（SoapRequest）

**肥皂请求（原始）**

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:idm="http://vedaxml.com/vxml2/idmatrix-v2-0.xsd">
   <soapenv:Header/>
   <soapenv:Body>
      <idm:request>
         <idm:dataset-searches>
            <idm:profile-name></idm:profile-name>
         </idm:dataset-searches>
         <idm:individual-name>
            <idm:family-name>ABC</idm:family-name>
            <idm:first-given-name>DEF</idm:first-given-name>
         </idm:individual-name>
         <idm:date-of-birth>1985-12-12</idm:date-of-birth>
      </idm:request>
   </soapenv:Body>
</soapenv:Envelope> 
```

**我的 Groovy 脚本如下**

```
def grUtils = new com.eviware.soapui.support.GroovyUtils(context)
def ReqHolder2 = grUtils.getXmlHolder("Modified#Request")

ReqHolder2.removeDomNodes("//idm:request")
ReqHolder2.updateProperty()

ReqHolder2 ["//soapenv:Body"] = context.expand( '${Original#Request#//idm:request}' )
ReqHolder2.updateProperty() 
```

当我执行上述 groovy 脚本时，修改后的请求将使用原始请求中的内容进行更新，但使用 CDATA 和对架构的引用。

**SoapRequest（修改）**

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:idm="http://vedaxml.com/vxml2/idmatrix-v2-0.xsd">
   <soapenv:Header/>
   <soapenv:Body>***<![CDATA[<idm:request xmlns:idm="http://vedaxml.com/vxml2/idmatrix-v2-0.xsd">***
         <idm:dataset-searches>
            <idm:profile-name/>
         </idm:dataset-searches>
         <idm:individual-name>
            <idm:family-name>ABC</idm:family-name>
            <idm:first-given-name>DEF</idm:first-given-name>
         </idm:individual-name>
         <idm:date-of-birth>1985-12-12</idm:date-of-birth>
      </idm:request>**]]>**</soapenv:Body>
</soapenv:Envelope> 
```

如果有人可以帮助我，我将不胜感激。另外，我很高兴知道/学习 groovy 中实现此要求的其他替代方法。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:20:08.130

考虑阅读 Groovy [XmlSlurper](http://groovy.codehaus.org/Reading+XML+using+Groovy%27s+XmlSlurper)和[XmlParser](http://groovy.codehaus.org/Reading+XML+using+Groovy%27s+XmlParser)。它们实现起来非常简单，您可以将它们用于您的 xml 操作。但是，对于您的特定要求，使用 XmlParser 会更有意义。

这是一个不同的问题和[我的回答](https://stackoverflow.com/questions/11620465/properly-iterating-through-xml-with-namespaces-in-groovy/11625202#11625202)，只是为了帮助您了解 XMLParser 的工作原理

而且由于您的问题更多是关于删除节点，而不是关于访问/验证它们。这是关于使用 XMlParser 删除节点的[另一个问题。](https://stackoverflow.com/questions/7201111/really-deleting-nodes-in-xmlparser-object-groovy)

# asp.net-mvc-3 - 如何在 MVC3 中获取用户名到资源名？

> ID：11625802
> 
> 赞同：1
> 
> 时间：2012-07-24T07:09:06.803
> 
> 标签：asp.net-mvc-3, c#-4.0

我有桌子

```
Resource

ResourceId |  ResourceName |username   | password     
  1        |   raghu       |   aaaa    |  ******
  2        |   anil        |   bbbb    |  ******          

BugHistory

BugHisoryId | FixedByID  | AssignedByID
   1        |    2       |    1
   2        |    1       |    2 
```

谁的登录名同名用户名来获取资源名称。 `FixedByIdforeign key(FixedById) reference Resource(ResourceId)`

**我的控制器代码**

```
public ActionResult BugHistory(BugTracker_DataHelper bugdatahelepr, string loginname, string EmployeName)
{
    Session["UserName"] = "aaaa";
    loginname = Session["UserName"].ToString();
    //bugdatahelepr.Username = loginname.ToString();
    //var username = bugdatahelepr.Username;

    SqlConnection connection = new SqlConnection(@"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=MvcBugTracker;Data Source=SSDEV6\SQLEXPRESS");
    connection.Open();
    SqlCommand cmd = new SqlCommand("select ResourceName from Resources where UserName =" + loginname, connection);       

    SqlDataReader dr = cmd.ExecuteReader();

    if (dr.Read())
    {
        bugdatahelepr.FixedByID = Convert.ToInt16(dr["ResourceName"]);
        //updatemodel.ProjectId = Convert.ToInt16(dr["ProjectId"]);
    }
    else
    {
        dr.Close();
    }
    dr.Close();
    connection.Close();

    //ViewBag.BugHistoryId = new SelectList(ToStatusDropdown(), "BugHistoryId", "ToStatus");
    //ViewData.AssignedToID=new SelectList()

    return View();
} 
```

**我的查看代码**

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<Gridview_BugTracker.Models.BugTracker_DataHelper>" %>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>BugHistory</title>
</head>
<body>
    <div>

     <%: ViewBag.Title = "BugHistory"%>
     <% using (Html.BeginForm())
     { %>      
      <%:Html.ValidationSummary(true)%>      

        <fieldset>
        <legend>BugHistory</legend>

       <div class="editor-label">
           <%:Html.LabelFor(model => model.FixedByID)%>
        </div>
        <div class="editor-field">
            <%:Html.LabelFor(model => model.FixedByID)%>
            <%:Html.ValidationMessageFor(model => model.FixedByID)%>
        </div>
        <div class="editor-label">
       <%:Html.LabelFor(model => Model.Resolution)%>
     </div>
     <div class="editor-field">
       <%:Html.EditorFor(model => model.Resolution)%>
       <%:Html.ValidationMessageFor(model => model.Resolution)%>
     </div>
       <%: Html.DropDownList("BugHistoryId", (SelectList)ViewBag.BugHistoryId, "--Select Project--")%>
       <%: Html.ValidationMessage("BugHistoryId")%>
       </fieldset> 

       <% }%> 
        <form action="AssignProject.aspx" method="post">  
            <p> <input type="submit" value="insert" /></p> 
             </form>           

    </div>
</body>
</html> 
```

**我收到错误**

`Invalid column name 'aaaa'. Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.`

```
Exception Details: System.Data.SqlClient.SqlException: Invalid column name 'raghu'.

Source Error: 

Line 270:            SqlCommand cmd = new SqlCommand("select ResourceName from Resources where UserName =" + loginname, connection);       
Line 271:          
Line 272:            SqlDataReader dr = cmd.ExecuteReader();
Line 273:            
Line 274:            if (dr.Read())

Source File:     C:\Raghu\Gridview_BugTracker\Gridview_BugTracker\Controllers\ProjectsController.cs    Line: 272 
```

当我登录页面时，用户名 aaaa 获取资源名称。谁能帮我这样做？

```
IN veiw page i Diplay like this

FixedBYID -----------raghu <---Lable in disabale

AssignedBY ID-------- anil <----dropdownlist in disable 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:28:29.003

您应该在此代码中改进几件事。首先，总是（我的意思是总是）将连接和数据读取器包装在一个`using`语句中。

其次，**不要**连接字符串来构建 SQL 查询。这将使您面临 SQL 插入攻击。相反，您应该使用参数。

现在，对于您看到的错误。您只需将用户名附加到查询中，这将使您的查询如下所示：

```
select ResourceName from Resources where UserName =aaaa 
```

用户名没有被引用，这意味着数据库服务器将尝试查找名为“aaaa”的列。这正是您看到的错误消息。

您的数据访问代码应如下所示：

```
using( var connection = new SqlConnection(@".... your connection string here ...") )
{
  connection.Open();

  var cmd = new SqlCommand("select ResourceName from Resources where UserName =@username", connection);       
  cmd.Parameters.Add( name, DbType.String ).Value = loginName;

  using( var reader = cmd.ExecuteReader() )
  {
    if (dr.Read())
    {
        // read your data here
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:31:58.560

您收到错误是因为：

*   你没有使用引号 - 在 sql 字符串常量需要包含在 ''
*   你做错了：你应该使用参数而不是连接字符串

# mysql - 几百万条记录后，mysql插入索引表需要很长时间

> ID：11625804
> 
> 赞同：2
> 
> 时间：2012-07-24T07:09:11.493
> 
> 标签：mysql, performance, myisam, load-data-infile

我有一张这样的桌子

```
CREATE TABLE IF NOT EXISTS `dnddata` (
  `numbers` varchar(10) NOT NULL,
  `opstype` char(1) NOT NULL,
  PRIMARY KEY (`numbers`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1
/*!50100 PARTITION BY KEY (numbers)
PARTITIONS 25 */; 
```

我必须插入 3 亿条记录。我每次使用`load data in file`csv 文件插入 1000 万条记录。

第一次插入 1000 万条记录需要将近 5 分钟。时间每次都在逐渐增加。在 3000 万条记录之后，它停止插入，并且使用 100% 服务器没有响应的内存。

在我的`my.cnf`文件设置下方

```
bulk_insert_buffer_size = 100M
key_buffer = 100M
sort_buffer_size = 50M
read_buffer = 50M 
```

我正在使用具有 2 G 内存的 cpu。

3000 万条记录的详细信息

```
 Space usage
Type    Usage
Data    545.3   MiB
Index   694.8   MiB
Total   1,240.1 MiB

MySQL client version: 5.5.14 
```

如果没有索引，它会在 50 秒内插入罚款 1000 万。

请告诉我需要更改什么样的设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:13:26.447

尝试：

```
ALTER TABLE dnddata DISABLE KEYS;

LOAD DATA INFILE...

ALTER TABLE dnddata ENABLE KEYS; 
```

还将 my.cnf 配置为：

```
key_buffer_size = 1G
sort_buffer_size = 4M
read_buffer_size = 1M
read_rnd_buffer_size = 1M
join_buffer_size = 2M
bulk_insert_buffer_size = 32M
myisam_sort_buffer_size = 256M 
```

修改 MySQL 配置文件后重启 MySQL 服务器。

下面的公式可能会帮助您正确配置参数：

```
key_buffer_size + (read_buffer_size + sort_buffer_size) * max_connections = K bytes of memory (< 2GB) 
```

你真的需要数字作为varchar（10）吗？将其设为 char(10) 或 int 将有助于提高性能。

在 varchar 列上创建 PRIMARY KEY 是开销，因此您可以在不需要时将其删除。

# python - 如何在提供给 python 中的 xml.sax 解析器之前从 xml 文件中删除特殊字符和 & 标记（无效的 xml 标记）

> ID：11625808
> 
> 赞同：2
> 
> 时间：2012-07-24T07:09:36.017
> 
> 标签：python, xml, sax

目前我正在使用 xml.sax 解析器来解析 xml 文件

假设我有以下代码

```
filepath = 'users/file.xml'

try:
    parser = xml.sax.make_parser( )
    parser.parse(open(filepath))

except (xml.sax.SAXParseException), e:
        print "*** PARSER error: %s" % e 
```

**文件.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<tag1>
  <tag2>
<P style="MARGIN: 0in 0in 0pt" class="MsoNormal"><FONT size="3"><SPAN style="FONT-FAMILY: Symbol; COLOR: black; mso-ascii-font-family: 'Times New Roman'">�&lt;/SPAN><SPAN style="COLOR: black"><FONT face="Times New Roman"><SPAN style="mso-spacerun: yes">&nbsp; </SPAN>Position will manage 24 ED Rooms with 24/7 accountability<o:p></o:p></FONT></SPAN></FONT></P>
   <DIV>&nbsp;</DIV>
   </tag2>
</tag1> 
```

当解析器到达 & in div 标签时，它会停止执行并显示以下错误

```
*** PARSER error: users/file.xml:5:1: not well-formed <invalid token> 
```

如何在从 xml 文件提供给解析器之前删除或转义所有无效的 xml 标记，是否有任何功能可以转义 & 和特殊字符形成 xml 标签，否则我们需要遍历他的 xml 文件并删除每个无效标记? 但不知道该怎么做。任何人都可以分享这样做的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:15:58.540

不要试图修复坏的 XML。首先修复创建错误 XML 的过程。你还没有告诉我们是什么程序写了这些东西。XML 的全部意义在于它是一个标准，只有当人们真正遵守该标准时，您才能从中受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T10:15:52.653

这不是修复响应的好习惯。在 android 中无法解析特殊字符。

您需要更改特殊字符..

# java - 在 Tomcat 7 中部署 JAX-WS webapp

> ID：11625809
> 
> 赞同：2
> 
> 时间：2012-07-24T07:09:44.487
> 
> 标签：java, web-services, jax-ws, tomcat7, jax-ws-customization

我正在开发简单的 JAX-WS 网络服务。我正在使用 ANT 构建脚本创建 WAR 文件。该文件在部署到 Tomcat 7 服务器时，抛出以下异常，并出现如下部署错误。

JAXB 2.1 API 是从引导类加载器加载的，但是这个 RI（来自 jar:file:/D:/DreamSoln/Server/apache-tomcat-7.0.29/webapps/WebserviceDemo/WEB-INF/lib/jaxb-impl. jar!/com/sun/xml/bind/v2/model/impl/ModelBuilder.class) 需要 2.2 API。使用认可的目录机制将 jaxb-api.jar 放置在引导类加载器中。

我安装了 JDK 1.6，我尝试了认可机制，即​​我创建了 lib/endorsed 目录并在其中复制了 jaxb-api.jar 和 jaxws-api.jar。但它仍然不起作用。

我需要从我的网络应用程序的 WEB-INF/lib 中删除 jaxb-api.jar 和 jaxws-api.jar 吗？

还需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:04:36.333

我认为您没有正确认可tomcat lib。该文件夹`lib/endorsed`在以前版本的 tomcat 中使用过（如果我没记错的话，就像 Tomcat 5.5），但在新版本（Tomcat 6 及更高版本）中，认可的库通常位于`<TOMCAT_HOME>/endorsed`（如果不存在，则必须创建它）。

实际上，tomcat 使用系统属性`java.endorsed.dirs`来定义背书的文件夹位置。所以请在你的tomcat安装中检查这个值。

如何检查这个？在应用程序中的任何 servlet/listener 中打印此属性。

**使用上下文侦听器的**示例（受此**[博客](http://sajidmoinuddin.wordpress.com/2010/07/31/troubleshooting-tomcat-deployment-problem-for-jaxws-2-2-application-the-sherlock-holmes-way/)启发）**

 **```
public class WebappLoadListener implements ServletContextListener {

    public void contextDestroyed(ServletContextEvent arg0) {
    }

    public void contextInitialized(ServletContextEvent arg0) {
        System.out.println("\n\n\n ENDORSED DIR: " +System.getProperty("java.endorsed.dirs"));      
    }
} 
```

希望有帮助，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:16:31.707

是的，一旦它们位于认可的目录中，您就应该从 webapp 中删除它们。

如果您尝试使用 Tomcat 的 Java EE 版本，[TomEE Plus](http://tomee.apache.org)已经集成了 JAX-WS 支持，并且 JAXB 2.2 在认可的目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T12:48:00.393

Tomcat 7 不支持开箱即用的 JAX-WS。要在 Tomcat 上启用 JAX-WS，您需要

1.  在Tomcat的库中至少包含“catalina-ws.jar”（不一定在“认可”下！）。

“catalina-ws.jar”应该作为“Tomcat extras”下载，它不包含在 TC7 的默认下载存档中。

1.  在您的 Web 应用程序库中包含“JAX-WS RI”库。

只需尝试谷歌“下一个里程碑：Tomcat 和 JBoss 上的 JAX-WS Web 服务”，您将找到有关此主题的更多信息。

（但是对于像 JBoss 7 这样的 Java EE 容器，所有的库都已经存在了。）**

# javascript - 拒绝绝对无效的电子邮件地址的最不坏的正则表达式是什么？

> ID：11625810
> 
> 赞同：7
> 
> 时间：2012-07-24T07:09:49.413
> 
> 标签：javascript, jquery, regex, email-validation

> **可能重复：**
> [在 Javascript 中验证电子邮件地址？](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)

我知道仅使用正则表达式无法验证电子邮件地址，但我认为我应该能够拒绝一些明显无效的电子邮件地址，以帮助友好的用户错误地输入不同的内容，例如他们的姓名或密码。电子邮件地址字段。因此，我不想拒绝任何有效的电子邮件地址，而是希望仅使用正则表达式来拒绝尽可能多的无效电子邮件格式。但我想任何 javascript/jquery/... 也可以。

这是我到目前为止所拥有的：

```
^.+@.+\..+$ 
```

是的，没有用于真正验证的正则表达式，但应该有一些用于拒绝。不，这不会阻止任何人输入虚假地址。是的，您仍然需要发送确认电子邮件来验证真实性。

上面的正则表达式将从 javascript 中使用。

--

在 .NET 中，我会改为让 .NET 使用验证电子邮件格式

```
 try
    {
      var mailAddress = new MailAddress(possibleMailAddress);
    } 
```

如果没问题，检查域部分的 DNS 记录，看看是否有电子邮件服务器。只有当 DNS 记录清楚地表明没有电子邮件服务器或者没有这样的域时，电子邮件地址才会被拒绝。然后缓存一些结果，以加快未来的查找速度。

不过，我必须发送确认电子邮件以进行验证...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T12:09:46.923

官方标准[RFC 2822](https://www.rfc-editor.org/rfc/rfc2822#section-3.4.1)描述了使用此正则表达式的有效电子邮件地址的语法：

```
(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\]) 
```

# javascript - 使用 javascript 输出样式通知

> ID：11625811
> 
> 赞同：1
> 
> 时间：2012-07-24T07:09:52.970
> 
> 标签：javascript, jquery

我有 javascript 片段：

```
<div id="store_stock_display"><p>Stock: <span class="store_product_stock"></span></p></div>
<script type="text/javascript">
    $(function() {
        $('.store_product_stock').change(function() {
            if ($(this).text() == '0') {
                $('#store_stock_display').show();
                $(this).text('OUT OF STOCK');
            } else if ($(this).text() == '') {$('#store_stock_display').hide();} else {$('#store_stock_display').show();}
        });
    });
</script> 
```

如果我的产品缺货，它会显示库存水平（例如：10、100...），如果我的产品目前缺货，它会显示缺货。

我想通知将样式设置为：

```
<font style="color:red; font-weight:bold;">OUT OF STOCK</font>
or
<div class="abc">OUT OF STOCK</div> 
```

请帮帮我，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:15:11.197

你可以使用`addClass()`：

```
.abc {
    color:red; 
    font-weight:bold
} 
```

```
 if ($(this).text() == '0') {
      $('#store_stock_display').show();
      $(this).addClass('abc').text('OUT OF STOCK')
 } 
```

> W3C：HTML 与 CSS 的分离使得维护站点、跨页面共享样式表以及针对不同环境定制页面变得更加容易。这被称为结构（或：内容）与表示的分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:15:22.207

如果您的逻辑完美，您可以使用：

```
$(this).css({'color': 'red', 'font-weight' : 'bold'}); 
```

在添加文本后添加此行。

# jquery - 如何更改数据表columfilter插件（日期过滤器）中的日期格式？

> ID：11625812
> 
> 赞同：0
> 
> 时间：2012-07-24T07:09:56.653
> 
> 标签：jquery

我正在使用数据表列过滤器插件：

```
It has default date filter as this format:-24/07/2012
But I have to filter the data in this format:-24-07-2012..?? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:36:07.980

您可以设置[自己的渲染器](http://datatables.net/usage/columns#fnRender)：

在`aoColumns`日期列中添加自定义渲染回调，例如（未经测试）：

```
fnRender: function (oObj) {
    var oDate = new Date(oObj.aData[0]);
    return '<div class="date">' + oDate.getDate() + '-' + oDate.getMonth() + '-' + oDate.getFullYear() + '<div>';
} 
```

另请参阅[此示例](http://datatables.net/examples/advanced_init/column_render.html)。

# iphone - iphone 应用程序问题照片库和用户访问

> ID：11625813
> 
> 赞同：0
> 
> 时间：2012-07-24T07:09:57.440
> 
> 标签：iphone, ios, cocoa-touch

我想我需要做一个简单的问题...

我知道你们中的大多数人会否决我，但无论如何我都要冒险。有时谷歌对我没有多大帮助，所以我在这里。

我只需要一个简单的逻辑指南。我需要创建一个数据库，其中列出了一些事件名称，并且每个事件都通过特定的密码和用户名访问。

一旦访问，应该有这个图片库，例如：

```
Event 1- Username/Pass- gallery
Event 2- Username/Pass- gallery
Event 3- Username/Pass- gallery 
```

你能告诉我如何继续这个的逻辑吗？我从一个 php/mysql 脚本开始，然后我传递给 xml，然后传递给 json，我很困惑。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:17:11.110

我假设，数据库是远程的。

设计一个事件数据库。

然后让用户选择一些事件，一旦他这样做，验证他/她。

一旦通过身份验证，您需要显示图像。如果它们存储在本地，则发送图像名称，解析并显示它们。如果它完全是远程的，请发送图像的 url。

# html - 在网页标题中添加连字符

> ID：11625816
> 
> 赞同：0
> 
> 时间：2012-07-24T07:10:06.177
> 
> 标签：html

我想在网页标题中添加连字符，例如

```
<head><title>Project Name - Module Name</head></title> 
```

但是我在所有浏览器中都得到了这个问号。 ![在此处输入图像描述](../Images/a4e0737356f21c9921c51caab6ea9d37.png)

我该如何输入连字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:23:28.467

菱形中看起来像白色问号的符号是 REPLACEMENT CHARACTER，表示字符级数据错误：数据包含不代表所应用字符编码中的任何字符的字节或字节序列。例如，windows-1252 编码的破折号“-”在声明为 UTF-8 编码的数据中。

真正的解决方案是修复编码不匹配，但这需要更多有关情况的信息。

一个快速的解决方法是将字符（可能是“-”）更改为`&ndash;`，它独立于字符编码工作。将其更改为连字符“-”将是对当前情况的改进，但英语标点符号规则对连字符和破折号进行了区分：连字符永远不会显得孤立，周围有空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T07:13:31.820

看起来您插入的“连字符”字符不是真正的连字符（ASCII 代码 45），而是看起来相似的字符之一。您是否偶然从 MSWord 中粘贴了标题？尝试在文本编辑器（例如记事本）中输入连字符并将其复制/粘贴到您的 HTML 源代码中。

有关标题中带有连字符的页面的工作示例，请查看此页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T07:11:50.167

您是否真的在源代码中输入了连字符？当您从 Word 或 Outlook 等程序复制和粘贴时，似乎会发生这种情况。也尝试用其中一个实体（从最短到最长）替换破折号`&#45;`，`&#150;`或者`&#151;`尽管第一个实际上只是一个破折号。请参阅[此处](http://www.nationalfinder.com/html/char-asc.htm)了解更多信息。

你用的是什么文本编辑器？它可能会导致问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T07:15:37.867

采用

**-**

这是连字符的 HTML 代码

像这样

```
<title>Project Name &#45; Module Name</head></title> 
```

如果需要，您可以从[此处获取更多代码](http://www.ascii.cl/htmlcodes.htm)

# windows-phone-7 - 按钮宽度相对于其 contentpresenters 宽度

> ID：11625817
> 
> 赞同：0
> 
> 时间：2012-07-24T07:10:06.170
> 
> 标签：windows-phone-7, silverlight-4.0

嗨，我有一个按钮样式，可以像这样重新模板样式

```
<Style x:Name="NoStyleButton" TargetType="Button">    
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate>
                    <ContentPresenter  x:Name="ContentPresenterInButton"/>
            </ControlTemplate>
        </Setter.Value>
    </Setter> 
```

问题是我希望按钮的宽度与按钮内的内容相同。如果我在堆栈面板中放置具有这种样式的按钮，则按钮宽度与堆栈面板相同，当按钮内的内容很少（想想小文本块）时，这会导致问题，即使用户点击按钮，也可以按下按钮按钮内的 TextBlock。

我以为你可以做类似的事情

```
<Setter Property="Width" Value="{Binding ActualWidth, ElementName=ContentPresenterInButton}"/> 
```

但这不起作用。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:37:40.530

问题是 StackPanel 决定了您的 Button 宽度，而不是内容。您可以设置按钮水平对齐方式，使其不会拉伸以填充可用宽度：

```
<StackPanel Orientation="Vertical">
  <Button HorizontalAlignment="Left">foo</Button>
  <Button>bar</Button>
</StackPanel> 
```

![在此处输入图像描述](../Images/b7b5248c6e686a89c6f7d827df9f2996.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-12T16:49:16.127

尝试：

```
<Button HorizontalAlignment="Stretch">Text</Button> 
```

# java - 从数据库java休眠中检索对象时，构造函数中的东西是否也被调用

> ID：11625819
> 
> 赞同：-2
> 
> 时间：2012-07-24T07:10:20.810
> 
> 标签：java, spring, hibernate

我想知道如果我的构造函数中有这个：

```
public class Foo {
    private final String param1;
    private final String param2;

    foo() { this.param1 = "param1";  }     
} 
```

现在我想知道，如果我从数据库中检索对象，那么是否调用了相同的构造函数，或者它只在第一次发生

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T07:13:22.700

是的，Hibernate 为它创建和填充的每个实体实例调用无参数构造函数。不过，您上面的代码不是 Java 代码。

# android - 无法保存画布数据

> ID：11625820
> 
> 赞同：0
> 
> 时间：2012-07-24T07:10:24.057
> 
> 标签：android, canvas

> 07-24 12:36:23.742: W/System.err(10386): java.io.IOException: 权限被拒绝 07-24 12:36:23.750: W/System.err(10386): 在 java.io.File .createNewFileImpl(Native Method) 07-24 12:36:23.750: W/System.err(10386): at java.io.File.createNewFile(File.java:1257) 07-24 12:36:23.750: W/ System.err(10386): 在 com.android.SignaturePage.FileWrite(SignaturePage.java:414) 07-24 12:36:23.750: W/System.err(10386): 在 com.android.SignaturePage$2.onClick( SignaturePage.java:132) 07-24 12:36:23.750: W/System.err(10386): 在 android.view.View.performClick(View.java:2485) 07-24 12:36:23.750: W/ System.err(10386): 在 android.view.View$PerformClick.run(View.java:9080) 07-24 12:36:23.750: W/System.err(10386): 在 android.os.Handler.handleCallback (Handler.java:587) 07-24 12:36:23.750: W/System.err(10386): 在 android.os.Handler。dispatchMessage(Handler.java:92) 07-24 12:36:23.750: W/System.err(10386): 在 android.os.Looper.loop(Looper.java:130) 07-24 12:36:23.750: W/System.err(10386): 在 android.app.ActivityThread.main(ActivityThread.java:3687) 07-24 12:36:23.750: W/System.err(10386): 在 java.lang.reflect.Method .invokeNative(Native Method) 07-24 12:36:23.750: W/System.err(10386): at java.lang.reflect.Method.invoke(Method.java:507) 07-24 12:36:23.750: W/System.err(10386): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867) 07-24 12:36:23.750: W/System.err(10386): 在 com .android.internal.os.ZygoteInit.main(ZygoteInit.java:625) 07-24 12:36:23.750: W/System.err(10386): at dalvik.system.NativeStart.main(Native Method)Looper.loop(Looper.java:130) 07-24 12:36:23.750: W/System.err(10386): 在 android.app.ActivityThread.main(ActivityThread.java:3687) 07-24 12:36: 23.750: W/System.err(10386): 在 java.lang.reflect.Method.invokeNative(Native Method) 07-24 12:36:23.750: W/System.err(10386): 在 java.lang.reflect。 Method.invoke(Method.java:507) 07-24 12:36:23.750: W/System.err(10386): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867) 07 -24 12:36:23.750: W/System.err(10386): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625) 07-24 12:36:23.750: W/System.err （10386）：在 dalvik.system.NativeStart.main（本机方法）Looper.loop(Looper.java:130) 07-24 12:36:23.750: W/System.err(10386): 在 android.app.ActivityThread.main(ActivityThread.java:3687) 07-24 12:36: 23.750: W/System.err(10386): 在 java.lang.reflect.Method.invokeNative(Native Method) 07-24 12:36:23.750: W/System.err(10386): 在 java.lang.reflect。 Method.invoke(Method.java:507) 07-24 12:36:23.750: W/System.err(10386): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867) 07 -24 12:36:23.750: W/System.err(10386): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625) 07-24 12:36:23.750: W/System.err （10386）：在 dalvik.system.NativeStart.main（本机方法）在 java.lang.reflect.Method.invokeNative(Native Method) 07-24 12:36:23.750: W/System.err(10386): 在 java.lang.reflect.Method.invoke(Method.java:507) 07 -24 12:36:23.750: W/System.err(10386): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867) 07-24 12:36:23.750: W/System .err(10386): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625) 07-24 12:36:23.750: W/System.err(10386): 在 dalvik.system.NativeStart。主要（本机方法）在 java.lang.reflect.Method.invokeNative(Native Method) 07-24 12:36:23.750: W/System.err(10386): 在 java.lang.reflect.Method.invoke(Method.java:507) 07 -24 12:36:23.750: W/System.err(10386): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867) 07-24 12:36:23.750: W/System .err(10386): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625) 07-24 12:36:23.750: W/System.err(10386): 在 dalvik.system.NativeStart。主要（本机方法）ZygoteInit.main（ZygoteInit.java:625）07-24 12:36:23.750：W/System.err（10386）：在 dalvik.system.NativeStart.main（本机方法）ZygoteInit.main（ZygoteInit.java:625）07-24 12:36:23.750：W/System.err（10386）：在 dalvik.system.NativeStart.main（本机方法）

**我收到错误的代码片段**

```
public  void FileWrite(File aPath,String aBody)
{
    try 
    {
        //System.out.println("@@@@ Inside Try FileWrite @@@@");
        Log.e("BEFORE FILE","BEFORE FILE");
        aPath.createNewFile();
        Log.e("AFTER FILE","BEFORE AFTER");
        PrintWriter out1 = new PrintWriter(aPath);
        out1.write(aBody);  
        //System.out.println (aBody.trim());
        out1.flush();
        out1.close();
    }
    catch (IOException ioe)
    {
        //System.out.println("@@@@ Inside Catch FileWrite @@@@"); 
        ioe.printStackTrace();
    }
} 
```

清单文件具有以下权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

请帮助我解决问题。 `aPath.createNewFile();` 是发生错误的行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:23:27.100

```
 File SignSave=new File("data/data/com.myapp.android.creditcardreader/SignConfirmation"); 
```

1.  通常访问此路径需要 root 权限
2.  您忘记了`/`数据中的第一个： `File("/data/...);`

编辑：

您应该将文件存储在`sdcard`. 您可以通过这种方式访问​​根目录`sdcard`：

```
File root = Environment.getExternalStorageDirectory()
File aPath = new File (root, "confirmation");
aPath.createNewFile(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:29:15.080

添加`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>`到您的清单中，它应该可以工作。

# database - 如果数据不断变化，你会缓存什么？（以推特为例）

> ID：11625822
> 
> 赞同：20
> 
> 时间：2012-07-24T07:10:26.067
> 
> 标签：database, caching, memcached, redis

我一直在研究缓存（主要是 redis 和 memcached），并且很难弄清楚当您的数据不断变化时在哪里使用缓存。

以 Twitter 为例（请阅读[让 Twitter 速度提高 10000%](http://highscalability.com/scaling-twitter-making-twitter-10000-percent-faster/)）。当大部分数据库记录不断变化时，您（或他们）将如何缓存他们的数据？

假设 Twitter 有这些模型：`User`, `Tweet`, `Follow`, `Favorite`.

有人可能会发布一条一天被转发一次的推文，而另一条一天被转发一千次的推文。对于那 1000 次转推，由于`24 * 60 == 1440`一天中大约有几分钟，这意味着推文几乎每分钟都会更新（比如说它也有 440 个收藏夹）。跟关注一个人一样，charlie sheen 甚至[在 1 天内就吸引了 100 万 Twitter 关注者](http://www.forbes.com/sites/markpasetsky/2011/03/02/charlie-sheen-attracts-one-million-twitter-followers-in-one-day/)。在这些情况下缓存似乎不值得，但可能只是因为我还没有达到那个水平。

还要说，平均 Twitter 追随者每天至少发一次推文/关注/收藏。这意味着在幼稚的 intro-rails 模式案例中，用户表每天至少更新一次（`tweet_count`等）。这种情况对于缓存用户配置文件很有意义。

但是对于上面的 1000x 推文和 100 万关注者的例子，在缓存数据方面有哪些推荐的做法？

具体来说（假设 memcached 或 redis，并使用纯 JSON API（无页面/片段缓存））：

*   您是否缓存单个推文/记录？
*   或者你是否通过分页缓存记录块（例如`20`每个的redis列表）？
*   或者您是否将记录单独缓存在页面中（查看单个推文与 JSON 提要）？
*   或者你是否为每个不同的场景缓存推文列表：家庭时间线推文、用户推文、用户最喜欢的推文等？还是以上所有？
*   或者您是否将数据分解为“最易变（最新）”到“最近几天”到“旧”块，其中“旧”数据以更长的到期日期或离散的分页列表或其他方式缓存？而且最新的记录根本没有被缓存。（即，如果数据像推文一样是时间相关的，如果您的旧记录知道它不会有太大变化，您是否会以不同的方式对待它？）

我不明白的是数据更改的比例与是否应该缓存它（并处理缓存到期的复杂性）的比率。似乎 Twitter 可能正在缓存不同的用户推文提要和*每个用户*的主页推文，但是每次收藏/推文/转发时使缓存无效意味着更新所有这些缓存项（以及可能缓存的记录列表），在某些时候，这似乎意味着使缓存无效会适得其反。

对于像这样变化很大的数据缓存的推荐策略是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T18:26:03.213

并不是说 Twitter 是这样做的（尽管我很确定它是相关的），但是：我最近熟悉了**CQRS** + **Event Sourcing**。（[http://martinfowler.com/bliki/CQRS.html](http://martinfowler.com/bliki/CQRS.html) + [http://martinfowler.com/eaaDev/EventSourcing.html](http://martinfowler.com/eaaDev/EventSourcing.html)）。

基本上：读取和写入在应用程序和持久性级别 (CQRS) 上完全分离，并且对系统的每次写入都作为可以订阅的事件进行处理（事件源）。它还有更多功能（例如能够重放整个事件流，这对于以后实现新功能非常有用），但这是相关部分。

在此之后，一般做法是每当负责人（即：它将事件投射到新的读取模型）接收到它订阅的事件类型的新事件时，`Read Model`都会重新创建（想想内存缓存）`Projector`.

在这种情况下，一个事件可以是 TweetHandled ，它将由所有订阅者处理，其中 a `RecentTweetsPerUserProjector`、`TimelinePerUserProjector`等以更新它们各自的 ReadModel。

结果是最终一致且不需要任何失效的 ReadModel 集合，即：更新的写入和结果事件是更新 ReadModel 开始的触发器。

我同意最终，Charlie Sheen 的读取模型会更新很多（尽管这种更新可能非常有效），因此缓存优势可能非常低。但是，查看普通用户每时间单位的平均帖子，情况就完全不同了。

DDD / CQRS / 事件源领域的一些有影响力的人：Greg Young、Udi Dahan。

这些概念非常“深刻”，所以不要指望在一个小时内完全理解它（至少我没有）。也许这个最近关于相关概念的思维导图也很有用：http: [//www.mindmeister.com/de/181195534/cqrs-ddd-links](http://www.mindmeister.com/de/181195534/cqrs-ddd-links)

是的，我对此很感兴趣，如果你还没有注意到的话:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T16:57:06.560

我不起眼的 2 美分：Redis 允许您对其数据结构进行操作，这意味着您可以比每次都接触关系数据库更快地进行内存操作。

因此，可以更改“缓存”，使其不会像您期望的那样失效。

在我的项目中，我定期将 500K 记录加载到排序集，然后仅通过对它们进行范围查询来运行统计报告，这使报告执行时间平均低于 2 秒。

# iphone - Iphone，核心情节：字符串日期时间到 INT

> ID：11625825
> 
> 赞同：0
> 
> 时间：2012-07-24T07:10:50.467
> 
> 标签：iphone, objective-c, core-plot

我正在使用 Core-Plot Chart 制作 iphone 应用程序，但 core-plot 使用 x、y 轴作为数字，并且我想使用 x 轴作为 DateTime，我已经阅读了这样做的方法，但是我该如何转换将 String DateTime 转换为 int 数字，以便在 core-plot 中使用它。

例子：

> 2012-07-16 10:20:25

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:43:28.997

假设您有一个 NSDates 数组按升序排列为“日期”。现在，我们将从它创建 NSTimeIntervals 'xValues' 数组。

```
NSDate * lastDate = [dates objectAtIndex:0]; // first date
for (NSDate * todaysDate in dates)          
    NSTimeInterval lastDiff = [lastDate timeIntervalSinceNow]; // time Interval since first date
    NSTimeInterval todaysDiff = [todaysDate timeIntervalSinceNow];// time Interval since current date
    NSTimeInterval dateDiff = todaysDiff - lastDiff; // actual difference 
    [xValues addObject:[NSString stringWithFormat:@"%f",dateDiff ]];
} 
```

现在一旦你有了这个数组，在你的核心绘图代码中，你正在创建 X 轴，做这样的事情。设置x轴的'labelFormatter'如下

```
CPXYAxis *x = axisSet.xAxis;
x.majorIntervalLength = your call;
x.orthogonalCoordinateDecimal = your call;
x.minorTicksPerInterval = 5;
NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setDateFormat:@"MM/dd/YYYY"]; // you can have your date format
dateFormatter.dateStyle = kCFDateFormatterShortStyle;
CPTimeFormatter *timeFormatter = [[[CPTimeFormatter alloc] initWithDateFormatter:dateFormatter] autorelease];
timeFormatter.referenceDate = some reference date;
x.labelFormatter = timeFormatter; 
```

# android - 在android mapview中绘制填充形状

> ID：11625826
> 
> 赞同：1
> 
> 时间：2012-07-24T07:10:57.963
> 
> 标签：android, android-mapview, android-canvas

下面显示了在 google my place 中绘制的可以导出到 xml 文件的形状。我打算做的是绘制形状并将其填充到地图视图中。图片如下

![在此处输入图像描述](../Images/bc633ea6ae43109482aa73e9b7d82899.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T23:46:57.450

我做了类似的事情，但在我的情况下这些区域重叠，所以我需要：

```
canvas.clipPath(path, Op.DIFFERENCE); 
```

如果您想要 xml 或 kml 输入，只需解析/加载您想要的并将其转换为 GeoPoints，就像我对 Loc 对象所做的那样。

```
import java.util.*;

import android.graphics.*;
import android.graphics.Paint.Style;
import android.graphics.Region.Op;
import android.os.Bundle;

import com.google.android.maps.*;

public class ShapeOverlayTest extends MapActivity {
    private MapView m_map;

    @Override
    public void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        m_map = (MapView) findViewById(R.id.mapview);
        m_map.displayZoomControls(true);
        m_map.setBuiltInZoomControls(true);
    }

    @Override
    protected void onStart() {
        super.onStart();

        Loc[][] areas = {
            {
            new Loc(51.51695436113811, -0.28686325139653757),
            new Loc(51.5268179962453, -0.28118722558738923),
            new Loc(51.526498459594215, -0.27779666308279755),
            new Loc(51.52521530775356, -0.26943974607777654),
            new Loc(51.52292555645698, -0.25813738590178786),
            new Loc(51.52054465991048, -0.2498381618983569),
            new Loc(51.51012230470141, -0.24509233633017083),
            new Loc(51.50884762913046, -0.24465130560570497),
            new Loc(51.50732063336974, -0.2441767643132881),
            new Loc(51.50431624597833, -0.24473900326760137),
            new Loc(51.49756328092904, -0.2714528238165076),
            new Loc(51.50092541797557, -0.28360267232347336),
            new Loc(51.50205958485736, -0.28490018935582045),
            new Loc(51.50488447379555, -0.28681164237730944)
            },
            {
            new Loc(51.50368617913765, -0.25313579464343156),
            new Loc(51.51978611305675, -0.24842567405905958),
            new Loc(51.51039382684418, -0.24460628015366626),
            new Loc(51.508792552597576, -0.24397604687682156),
            new Loc(51.50713008309719, -0.24346350415674722),
            new Loc(51.502411013302684, -0.2508501075008919),
            new Loc(51.502377240039664, -0.25160073203846817),
            new Loc(51.50274364303565, -0.25204783703705536)
            },
            {
            new Loc(51.49924084955314, -0.2858705706471945),
            new Loc(51.50212820259818, -0.2791479893522646),
            new Loc(51.49724510427319, -0.27427453152961206),
            new Loc(51.49429724502515, -0.2799184038304611),
            new Loc(51.494270969987404, -0.28180678948730314)
            }
        };
        String[] areaNames = { "W3 Ealing", "W3 Hammersmith & Fulham", "W3 Hounslow" };

        // for (Map.Entry<String, List<Loc>> area : m_areas.entrySet()) {
        // // to have much less points and make sure they are in order
        // // the demo data already has these properties
        // // http://en.wikipedia.org/wiki/Gift_wrapping_algorithm#Pseudocode
        // area.setValue(Algo.convexHull(area.getValue()));
        // }

        Map<String, List<GeoPoint>> areaMap = new HashMap<String, List<GeoPoint>>();
        for (int i = 0; i < areaNames.length; i++) {
            List<GeoPoint> points = new ArrayList<GeoPoint>();
            for (int j = 0; j < areas[i].length; j++) {
                points.add(areas[i][j].toGeoPoint());
            }
            areaMap.put(areaNames[i], points);
        }
        m_map.getOverlays().add(new AreasOverlay(areaMap));

        // TODO determine location better, e.g. averaging area points
        GeoPoint center = new GeoPoint(51509704, -270710);
        m_map.getController().setCenter(center);
        m_map.getController().setZoom(15);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    static class Loc {
        private double  m_lat;
        private double  m_lon;

        public Loc(final double lat, final double lon) {
            m_lat = lat;
            m_lon = lon;
        }

        public GeoPoint toGeoPoint() {
            return new GeoPoint((int) (m_lat * 1e6), (int) (m_lon * 1e6));
        }
    };

    static class AreasOverlay extends Overlay {
        private final Map<String, List<GeoPoint>> m_areas;
        private final Paint m_paintFill;
        private final Paint m_paintStroke;
        private static final int ALPHA = 0x30ffffff; // 48 out of 255 transparent
        private static final int[] COLORS =
        { Color.YELLOW, Color.MAGENTA, Color.CYAN, Color.RED, Color.GREEN, Color.BLUE };
        static {
            for (int i = 0; i < AreasOverlay.COLORS.length; i++) {
                AreasOverlay.COLORS[i] &= AreasOverlay.ALPHA;
            }
        }

        public AreasOverlay(final Map<String, List<GeoPoint>> areaMap) {
            m_areas = areaMap;

            // prepare paints
            m_paintFill = new Paint();
            m_paintFill.setStyle(Paint.Style.FILL);
            m_paintStroke = new Paint(Paint.ANTI_ALIAS_FLAG);
            m_paintStroke.setStyle(Style.STROKE);
            m_paintStroke.setAntiAlias(true);
            m_paintStroke.setStrokeWidth(3);
        }

        @Override
        public void draw(final Canvas canvas, final MapView mapView, final boolean shadow) {
            super.draw(canvas, mapView, shadow);
            if (shadow) {
                return;
            }
            Projection projection = mapView.getProjection();

            List<Path> areaPaths = getPaths(projection, m_areas);
            drawPaths(canvas, areaPaths);
        }

        private List<Path> getPaths(final Projection projection, final Map<String, List<GeoPoint>> areas) {
            List<Path> areaPaths = new ArrayList<Path>(areas.size());
            for (Map.Entry<String, List<GeoPoint>> entry : areas.entrySet()) {
                List<GeoPoint> sourceList = entry.getValue();
                Path path = new Path();
                path.setFillType(Path.FillType.EVEN_ODD);
                Iterator<GeoPoint> it = sourceList.iterator();
                Point point = nextDrawPoint(projection, it);
                path.moveTo(point.x, point.y);
                while (it.hasNext()) {
                    point = nextDrawPoint(projection, it);
                    path.lineTo(point.x, point.y);
                }
                path.close();
                areaPaths.add(path);
            }
            return areaPaths;
        }

        /**
         * <ul>
         * <li>Draw with different colors.
         * <li>Draw strokes first for them to be always visible.
         * <li>Draw fills next with each removing from the drawable area.
         * </ul>
         */
        private void drawPaths(final Canvas canvas, final List<Path> areaPaths) {
            int currentColorIndex;

            currentColorIndex = 0;
            for (Path path : areaPaths) {
                int currentColor = AreasOverlay.COLORS[currentColorIndex++];
                currentColorIndex %= AreasOverlay.COLORS.length;
                m_paintStroke.setColor(currentColor & 0xff7f7f7f); // make it darker by clearing the high bit
                canvas.drawPath(path, m_paintStroke);
            }
            currentColorIndex = 0;
            for (Path path : areaPaths) {
                int currentColor = AreasOverlay.COLORS[currentColorIndex++];
                currentColorIndex %= AreasOverlay.COLORS.length;
                m_paintFill.setColor(currentColor);
                canvas.drawPath(path, m_paintFill);
                canvas.clipPath(path, Op.DIFFERENCE); // don't allow to draw over each other
            }
        }

        private Point nextDrawPoint(final Projection projection, final Iterator<GeoPoint> it) {
            GeoPoint geo = it.next();
            Point p = new Point();
            projection.toPixels(geo, p);
            return p;
        }
    }
} 
```

# javascript - Joomla 2.5 中前端的 Javascript 存储

> ID：11625827
> 
> 赞同：0
> 
> 时间：2012-07-24T07:10:58.917
> 
> 标签：javascript, joomla, storage

任何人都知道我们在哪里存储 joomla 组件前端的 Javascript。Joomla 从默认路径搜索 javascript，例如 [http://joomla.com/index.php/file.js] 即使我已经设置了路径但无法设置在 index.php 之前我想知道在 Joomla 2.5 中 index.php 之后我将在哪里存储 javascript。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:25:42.320

首先，需要从组件本身调用 javascript 文件，您可以将文件存储在任何位置。

大多数人会从views/tmpl 文件夹中的default.php 调用javascript 文件。

要调用它，您可以使用以下代码：

```
$document =& JFactory::getDocument();
$document->addScript(JURI::root() . 'components/com_your_component/assets/javascript.js'); 
```

希望这可以帮助

# iphone - 抑制 MFMailComposeViewController 中的“保存草稿”按钮

> ID：11625832
> 
> 赞同：0
> 
> 时间：2012-07-24T07:11:22.387
> 
> 标签：iphone, button, mfmailcomposeviewcontroller

我在 iphone 应用程序中使用 MFMailComposeViewController，它工作正常。

当我按下“取消”按钮时，会提示带有“删除草稿”（红色）、“保存草稿”（白色）和“取消”（黑色）选项的操作表。

我有两个问题：

1.  是否可以取消“保存草稿”按钮？我以编程方式控制信息流，如果将邮件推入“草稿”文件夹，则可能会失去控制。
2.  是否可以更改出现按钮的颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:23:56.240

这是不可行的，因为它的功能是默认的 MFMailCompose 类。所以你不能改变它。

您只能更改导航栏和按钮的色调颜色

```
MFMailComposeViewController *controller = [[MFMailComposeViewController alloc] init];
[[controller navigationBar] setTintColor:[UIColor colorWithRed:0.36 green:0.09 blue:0.39 alpha:1.00]]; 
```

# android - 按下主页时如何重新输入相同的活动？

> ID：11625833
> 
> 赞同：0
> 
> 时间：2012-07-24T07:11:27.493
> 
> 标签：android, android-activity

我的应用程序在堆栈 A->B->C 上有 3 个活动

如果你按 home 并在 1 小时后重新进入应用程序，则会启动另一个 A 实例，因此堆栈是 A->B->C。

我想要的是，当用户重新进入应用程序时，他们会重新进入他们之前参与的相同活动。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:18:52.853

尝试将此属性添加到您的**根活动**的清单条目中（即：您的示例中的活动 A）：

```
android:alwaysRetainTaskState="true" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:20:10.777

Android 会自动终止（销毁）活动以节省内存，但您要求的功能可以通过保存最后显示在[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)中的活动的标志来实现。然后您可以在每次启动 Activity A 时运行检查，如果 B 是要显示的，只需启动 B。（onCreate 即）在 A、B 和 C 之间切换时要小心。

# terminal - 通过终端打开 GitX 以用于放置在当前路径的 repo

> ID：11625836
> 
> 赞同：9
> 
> 时间：2012-07-24T07:11:35.533
> 
> 标签：terminal, gitx

我通常通过终端命令启动 gitx

```
$ gitx 
```

通常，当我在 /path/to/repo 作为终端中的 pwd 时，gitx 正在打开该 repos 日志。我不知道这是更新还是我更改了某些设置，但是从一段时间以来，当我点击命令时，gitx 打开空白。我google了一下，没找到。如何让 gitx 打开目录的 repo，我在那一刻？

谢谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2015-01-12T12:15:28.143

GitX 中有一个菜单选项。

```
GitX / Enable Terminal Usage… 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-23T12:11:49.743

打开终端，导航到站点目录并在提示符下键入：

```
$ open -a GitX . 
```

**- - 编辑 - -**

要使此更改永久生效，请打开您的本地`.bashrc`文件：

```
$ vi ~/.bashrc 
```

在任何你喜欢的地方添加以下别名：

```
alias gitx='open -a GitX .' 
```

保存并退出，然后重新加载配置文件：

```
$ source ~/.bashrc 
```

全部完成 :) 现在您应该可以输入`gitx`repo 目录（在终端中），瞧，希望对您有所帮助。

# haskell - 无可辩驳的模式不会在递归中泄漏内存，但为什么呢？

> ID：11625840
> 
> 赞同：14
> 
> 时间：2012-07-24T07:11:49.460
> 
> 标签：haskell, ghc, lazy-evaluation, accumulator, space-leak

下面`mapAndSum`代码块中的函数结合了`map`and `sum`（别介意`sum`在主函数中应用了另一个，它只是为了使输出紧凑）。是惰性计算的`map`，而`sum`是使用累加参数计算的。这个想法是，`map`可以在内存中没有完整列表的情况下使用结果，并且（仅）之后`sum`可以“免费”使用。main 函数表明我们在调用`mapAndSum`. 让我解释一下这个问题。

根据 Haskell 标准，无可辩驳的模式示例`let (xs, s) = mapAndSum ... in print xs >> print s`被翻译成

```
(\ v ->    print (case v of { (xs, s) -> xs })
        >> print (case v of { (xs, s) -> s }))
$ mapAndSum ... 
```

因此，两个`print`调用都携带对整个对的引用，这导致整个列表被保存在内存中。

我们（我的同事 Toni Dietze 和我）使用明确的`case`声明（比较“bad”与“good2”）解决了这个问题。顺便说一句，发现这一点花了我们相当多的时间..！

现在，我们不明白的是两个方面：

*   为什么`mapAndSum`首先工作？它还使用了一种无可辩驳的模式，因此它也应该将整个列表保存在内存中，但显然不是。并且将 the 转换`let`为 a`case`会使函数表现得完全不懒惰（以至于堆栈溢出；没有双关语的意思）。

    我们查看了 GHC 生成的“核心”代码，但据我们所知，它实际上包含与上述相同的翻译`let`。所以这里没有线索，而是更多的混乱。

*   为什么会“坏”？关闭优化时工作，但打开时不工作？

关于我们的实际应用的一个评论：我们希望实现一个大文本文件的流处理（格式转换），同时还积累一些值，然后写入一个单独的文件。如前所述，我们成功了，但两个问题仍然存在，答案可能会提高我们对 GHC 的理解，以应对即将到来的任务和问题。

谢谢！

```
{-# LANGUAGE BangPatterns #-}

-- Tested with The Glorious Glasgow Haskell Compilation System, version 7.4.2.

module Main where

import Control.Arrow (first)
import Data.List (foldl')
import System.Environment (getArgs)

mapAndSum :: Num a => (a -> b) -> [a] -> ([b], a)
mapAndSum f = go 0
  where go !s (x : xs) = let (xs', s') = go (s + x) xs in (f x : xs', s')
                       -- ^ I have no idea why it works here. (TD)
        go !s []       = ([], s)

main :: IO ()
main = do
  let foo  = mapAndSum (^ (2 :: Integer)) [1 .. 1000000 :: Integer]
  let sum' = foldl' (+) 0
  args <- getArgs
  case args of
    ["bad" ]  -> let (xs, s) = foo in print (sum xs) >> print s
    ["bad?"]  -> print $ first sum' $ foo
              -- ^ Without ghc's optimizer, this version is as memory
              -- efficient as the “good” versions
              -- With optimization “bad?” is as bad as “bad”. Why? (TD)
    ["good1"] -> print $ first' sum' $ foo
                   where first' g (x, y) = (g x, y)
    ["good2"] -> case foo of
                    (xs, s) -> print (sum' xs) >> print s
    ["good3"] -> (\ (xs, s) -> print (sum' xs) >> print s) $ foo
    _ -> error "Sorry, I do not understand." 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-24T08:10:41.600

让我首先回答为什么`mapAndSome`可以很好地工作：你看到的（很可能）是 Philip Wadler 在“<a href="http://homepages.inf.ed.ac.uk/wadler /topics/garbage-collection.html" rel="noreferrer">使用垃圾收集器修复一些空间泄漏”。简短摘要：如果垃圾收集器看到表单的 thunk`fst x`并且`x`已经对元组构造函数进行了评估，例如`(y,z)`，它将替换`fst x`为，如果没有在其他任何地方引用它`y`可能会释放。`z`

在您的代码中`s'`，一旦将结果`go`评估为元组并经过一轮 GC，将不会保留对元组的引用，而是会被累积的参数替换。

现在让我们通过研究核心来看看其他模式。`foo`绑定编译为：

```
foo_r2eT :: ([Type.Integer], Type.Integer)

foo_r2eT =
  case $wgo_r2eP mapAndSum1 lvl2_r2eS
  of _ { (# ww1_s2d7, ww2_s2d8 #) ->
  (ww1_s2d7, ww2_s2d8)
  } 
```

这是`"bad"`案例中的代码（`lvl18_r2fd`“坏”）：

```
case eqString ds_dyA lvl18_r2fd of _ {
  False -> $wa_s2da new_s_a14o;
  True ->
    case ds1_dyB of _ {
      [] ->
        case Handle.Text.hPutStr2
               Handle.FD.stdout lvl17_r2fc True new_s_a14o
        of _ { (# new_s1_X15h, _ #) ->
        Handle.Text.hPutStr2
          Handle.FD.stdout lvl16_r2fb True new_s1_X15h
        };
      : ipv_sIs ipv1_sIt -> $wa_s2da new_s_a14o
    } 
```

我们可以看到打印了模块级别的两个值，`lvl17_r2fc`并且`lvl16_r2fb`，这是它们的代码：

```
lvl17_r2fc :: String
[GblId]
lvl17_r2fc =
  case foo_r2eT of _ { (xs_Xqp, s_Xq9) ->
  $w$cshowsPrec
    0
    (Data.List.sum_sum' xs_Xqp Data.List.genericDrop2)
    ([] @ Char)
  }

lvl16_r2fb :: String
[GblId]
lvl16_r2fb =
  case foo_r2eT of _ { (xs_apS, s_Xqp) ->
  $w$cshowsPrec 0 s_Xqp ([] @ Char)
  } 
```

为什么它们绑定在模块级别，而不是在表达式内部？这是*惰性提升*的效果，这是另一种增加共享的优化，因此有时会对空间性能产生不利影响。有关此效果的另一种情况，请参见[GHC 票 719](http://hackage.haskell.org/trac/ghc/ticket/917)。

所以发生的情况是对要评估的`lvl17_r2fc`原因`foo`的评估，并且左条目懒惰地打印。不幸的是，`lvl16_r2fb`仍然存在并保留了完整的元组。并且因为垃圾收集器（似乎）没有看到这是一个选择器重击，所以 Wadler 的优化没有发挥作用。

相反，这里是`"good1"`aka的代码`lvl8_r2f1`：

```
 case eqString ds_dyA lvl8_r2f1 of _ {
              False -> $wa2_s2dI w3_s2cF;
              True ->
                case ds1_dyB of _ {
                  [] ->
                    Handle.Text.hPutStr2
                      Handle.FD.stdout lvl7_r2f0 True w3_s2cF;
                  : ipv_sHg ipv1_sHh -> $wa2_s2dI w3_s2cF
                }
            } } in 
```

其中打印的值是这个字符串：

```
lvl7_r2f0 :: String
[GblId]
lvl7_r2f0 =
  case foo_r2eT of _ { (x_af6, y_af7) ->
  show_tuple
    (:
       @ ShowS
       (let {
          w2_a2bY [Dmd=Just L] :: Type.Integer

          w2_a2bY = lgo_r2eU mapAndSum1 x_af6 } in
        \ (w3_a2bZ :: String) ->
          $w$cshowsPrec 0 w2_a2bY w3_a2bZ)
       (:
          @ ShowS
          (\ (w2_a2bZ :: String) ->
             $w$cshowsPrec 0 y_af7 w2_a2bZ)
          ([] @ ShowS)))
    ([] @ Char)
  } 
```

如您所见，元组仅被拆开一次，并且两个值都被使用。所以没有什么是指整个元组，它可以被垃圾收集。`"good2"`和类似`"good3"`。

现在来`"bad?"`：在未优化的情况下，我们得到以下代码：

```
 case eqString ds_dyA (unpackCString# "bad?")
                 of _ {
                   False -> fail2_dyN realWorld#;
                   True ->
                     case ds1_dyB of _ {
                       [] ->
                         $
                           @ (Type.Integer, Type.Integer)
                           @ (IO ())
                           (System.IO.print
                              @ (Type.Integer, Type.Integer) $dShow_rzk)
                           ($
                              @ ([Type.Integer], Type.Integer)
                              @ (Type.Integer, Type.Integer)
                              (Control.Arrow.first
                                 @ (->)
                                 Control.Arrow.$fArrow(->)
                                 @ [Type.Integer]
                                 @ Type.Integer
                                 @ Type.Integer
                                 sum'_rzm)
                              foo_rzl);
                       : ipv_szd ipv1_sze -> fail2_dyN realWorld#
                     }
                 } } in 
```

via的[实现](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/Control-Arrow.html#line-133)使用可反驳的模式，因此会生成垃圾收集器可以很好地处理的那种选择器thunk。`first``***`

在优化的情况下，事情有点分散，但无论如何这里是相关代码（最后一个值是正在打印的那个）：

```
w_r2f2 :: Type.Integer

w_r2f2 =
  case foo_r2eT of _ { (x_aI1, y_aI2) ->
  lgo_r2eU mapAndSum1 x_aI1
  }

lvl9_r2f3 :: String -> String
[GblId, Arity=1]
lvl9_r2f3 =
  \ (w2_a2bZ :: String) ->
    $w$cshowsPrec 0 w_r2f2 w2_a2bZ

w1_r2f4 :: Type.Integer

w1_r2f4 = case foo_r2eT of _ { (x_aI6, y_aI7) -> y_aI7 }

lvl10_r2f5 :: String -> String
[GblId, Arity=1]
lvl10_r2f5 =
  \ (w2_a2bZ :: String) ->
    $w$cshowsPrec 0 w1_r2f4 w2_a2bZ

lvl11_r2f6 :: [ShowS]
[GblId]
lvl11_r2f6 =
  :
    @ ShowS lvl10_r2f5 ([] @ ShowS)

lvl12_r2f7 :: [ShowS]
[GblId]
lvl12_r2f7 = : @ ShowS lvl9_r2f3 lvl11_r2f6

lvl13_r2f8 :: ShowS
[GblId]
lvl13_r2f8 = show_tuple lvl12_r2f7

lvl14_r2f9 :: String
[GblId]
lvl14_r2f9 = lvl13_r2f8 ([] @ Char) 
```

的使用`first`已内联。我们看到对 的两次调用`case foo_r2eT`，因此这很容易导致空间泄漏，尽管`w1_rf24`看起来像一个选择器（所以我希望运行时应用 Wadler 的优化）。也许它不适用于静态 thunk？事实上，如果[评论](http://hackage.haskell.org/trac/ghc/wiki/Commentary/Rts/Storage/HeapObjects#Selectorthunks)是最新的，则只讨论动态分配的选择器 thunk。因此，如果您`foo`不是模块级值（或者更确切地说是惰性提升为一个），而是依赖于某些输入，`w1_rf24`则可能是动态分配的，因此有资格获得特殊处理。但是无论如何，代码可能看起来非常不同。

# xml - 带有 Tcl/Tk 的 XML 查看器

> ID：11625843
> 
> 赞同：0
> 
> 时间：2012-07-24T07:11:53.827
> 
> 标签：xml, tree, tcl

是否有在 Tcl/Tk（最好是 8.4）中实现的任何 XML 树查看器？我正在寻找类似于[http://xmlgrid.net/](http://xmlgrid.net/)的东西- 一种读取 XMl 的工具，将其显示为树并允许我获取每个节点的 XPath。我不需要编辑功能，只需要查看。谢谢，约拉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:44:05.270

starDOM[查看](http://wiki.tcl.tk/12550)器/编辑器是一个很好的起点（源代码在那个 wiki 页面中）。它需要[tDOM](http://tdom.github.com/)包作为其 DOM 实现（无论如何我都建议这样做；tDOM 是一个非常好的 DOM 实现）。

# sitecore - Sitecore 服务器端逻辑

> ID：11625844
> 
> 赞同：0
> 
> 时间：2012-07-24T07:11:54.170
> 
> 标签：sitecore, sitecore6

我是 Sitecore 的新手，并被要求用一些新功能扩展公司现有的网站。

我一直在互联网上阅读很多内容并查看现在的网站。但是我似乎找不到在服务器端添加逻辑的位置。类似于您在 POST 发生时对 PHP 代码所做的事情。

我需要这个有多种原因：生成 pdf、发送电子邮件、从 Excel 表中提取数据......

仅供参考：我们使用的是 Sitecore 版本 6.x

感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:51:29.513

非常广泛的问题，所以答案将非常广泛。

基本上，您要么使用 Page_Load 方法（并检查 IsPostBack），要么调用您自己的 on 方法，该方法在生命周期的“结束”时运行（简化）。

但这是基本的 Asp.Net 东西，并不是 Sitecore 特定的东西。Sitecore 唯一需要注意的是布局/子布局等是否被缓存，因为这是输出缓存，回发只会返回与以前相同的 html。

如果我要执行从当前页面生成 af pdf 之类的操作，我会使用 GET 并仅链接到同一页面，但查询字符串中的某些内容会命中另一个设备，从而执行 PDF 渲染。例如。/news/2012/news1.aspx?pdf=1

浏览器在返回按钮和使用 POST 更改数据方面更好地处理 GET（请参阅[http://www.w3.org/2001/tag/doc/whenToUseGet-20040321#checklist](http://www.w3.org/2001/tag/doc/whenToUseGet-20040321#checklist)）

但正如我所说，我听起来更像是你需要研究的是标准的 Asp.Net

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T13:01:17.093

在寻求扩展我以前从未见过的 Sitecore 构建时，我通常会遵循的基本流程如下：

1.  在面向公众的网站上找到需要扩展的页面。查看 URL 以获取路径。
2.  以管理员身份登录到 sitecore 并访问内容编辑器。
3.  使用 URL 路径查找与页面匹配的内容项。（注意：有时 URL 与路径不匹配，因此您可能需要使用预览模式，然后使用页面编辑器中的“编辑项目”按钮跳转到内容编辑器）
4.  在内容项的“内容”窗格中，我将展开“快速信息”部分并单击“模板”链接，将我带到作为内容项基础的模板。
5.  展开树中现在选择的模板以查看其子级。在大多数构建中应该有一个名为“__Standard Values”的孩子。
6.  选择“__标准值”节点。这是应用默认值的地方。
7.  选择标准值节点后，打开菜单中的“演示”功能区。
8.  按功能区“布局”按钮组中的“详细信息”按钮。
9.  显示一个对话框。这列出了当前分配给模板演示的所有控件。

从这里，您可以做一些事情。您可以选择编辑现有控件之一，也可以添加自己的控件。如果您正在编辑现有的，您将需要查看子布局/渲染并找出其在您的解决方案中的路径，并在 .NET 解决方案中修改匹配的 ASCX。如果您已经创建了自己的子布局，则需要确保在 Sitecore 数据库中定义了一个子布局以匹配您的代码，然后将该子布局添加到页面的控件列表中。

# jquery - 试图在每个语句中获取 this 的父级

> ID：11625845
> 
> 赞同：1
> 
> 时间：2012-07-24T07:12:00.463
> 
> 标签：jquery, if-statement, parent, each

在 if 和 each 语句中使用 parent 可能是一个简单的问题

我有一些看起来像的 html：

```
<li><span class="image"><img src="img1.jpg"></span></li>
<li><span class="image"><img src="img2.jpg"></span></li>
<li><span class="image"><img src=""></span></li>
<li><span class="image"><img src=""></span></li> 
```

使用我的 JQuery，我在每个语句中有一个 if 语句，如下所示：

```
$(".image").each(function() { 
    var $imgsrc = $(this).find("img").attr("src").length;

    if($imgsrc < 1) {
        $('.image').parent().addClass('nodisplay');
    }    
}); 
```

我希望将类“nodisplay”添加到`<li>`其图像没有 src 的类中。

问题是上面的代码会影响所有`<li>`的。如果我用它替换`$('.image')`它`$('this')`根本不起作用。

我也试过`closest('li')`而不是`parent()`无济于事。

任何建议将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:15:03.870

试试这个：

```
$('li').has(".image img[src='']").addClass('nodisplay'); 
```

[现场演示](http://jsfiddle.net/Lr9s9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T07:14:22.130

你应该写作`$(this)`而不是`$('this')`

# java - 将 java bean 属性名称存储为常量并检查它们的一致性

> ID：11625847
> 
> 赞同：1
> 
> 时间：2012-07-24T07:12:18.807
> 
> 标签：java, properties, javabeans

Apache Wicket、Hibernate Criteria API 和其他 java 库使用属性名称作为字符串来访问模型数据。例如：

```
new PropertyModel(address, "street"); 
```

这定义了一个模型，该模型支持通过调用 address.getStreet() 方法从地址对象中读取“街道”属性。

一个问题是这样的字符串文字很不方便，并且在 Java 等静态类型语言中看起来不自然。您可以在属性名称中打错字，例如“stret”，您只会注意到这行代码何时执行。其他不便之处在于，自动重构会破坏您的代码，因为此字符串文字“street”与代码中表示的 Address 类的 street 属性之间没有直接联系。

解决此问题的一种方法是在模型类中使用常量：

```
class Address {
    public static final String P_STREET = "street";
... 
```

所有属性名称将在一个地方。此外，可以通过检查生成的 .class 文件或在应用程序启动时使用反射 API 在代码运行之前检查它们是否正确。所以我的第一个问题是，如果我使用这种方法，是否有任何工具可用于执行此检查并查找所有错误？最好与 maven 集成，因此此检查将成为构建过程的一部分。

第二个问题是解决这个问题的其他方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:55:28.797

我认为这是自定义注释处理的一个很好的用例（[链接到 JDK api](http://docs.oracle.com/javase/6/docs/api/javax/annotation/processing/package-summary.html)）。您可以使用它在编译时检查带注释的类的内容是否正确；或者您可以使用它动态地将所需字段添加到类中。[Project Lombok](http://projectlombok.org/)可以让您了解什么是可能的。

# windows-phone-7.1 - 如何删除 Windows Phone 7 中的点击处理程序？

> ID：11625849
> 
> 赞同：0
> 
> 时间：2012-07-24T07:12:23.607
> 
> 标签：windows-phone-7.1

在一个页面中，有一个图像控件。当单击该图像时，我正在显示大图像。在某些情况下，我不想显示。为此，我正在尝试删除单击处理程序事件。请告诉我如何删除图像鼠标输入wp中的点击事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:34:17.123

您可以使用`-=`运算符从事件中删除事件处理程序。

删除从 a 的事件调用的事件处理程序`OnTap_Handler`的`Tap`示例`Image`。

```
Image.Tap -= OnTap_Handler; 
```

# ajax - 我如何激活通过单击菜单栏上的菜单项打开的最后打开的选项卡？

> ID：11625855
> 
> 赞同：1
> 
> 时间：2012-07-24T07:12:48.110
> 
> 标签：ajax, jsf-2, primefaces

我创建了一个 Web 应用程序。这里我使用 prime-face tab 和 ajax。当我单击菜单栏上的菜单项时，它会打开一个新选项卡。但激活第一个打开的选项卡。我想激活最后打开的选项卡。我的代码在这里：

**用于菜单栏和输出选项卡**

```
<h:form id="menu">                
            <p:menubar autoDisplay="true">
               <p:submenu id="student" label="Student">       
                    <p:menuitem id="studentAdmission" value="Student Admission" action="#{ajaxBean.editAction}" ajax="true" update=":outputForm">
                        <f:setPropertyActionListener target="#{ajaxBean.action}" value="StudentAdmission" />
                    </p:menuitem>
                    <p:menuitem id="studentList" value="Student Profile" action="#{ajaxBean.editAction}" ajax="true" update=":outputForm">
                        <f:setPropertyActionListener target="#{ajaxBean.action}" value="StudentProfile" />
                    </p:menuitem>                        
                </p:submenu>
                <p:submenu id="registration" label="Registration">
                    <p:menuitem id="registrationAdd" value="Subject Registration" action="#{ajaxBean.editAction}" ajax="true"  update=":outputForm">
                        <f:setPropertyActionListener target="#{ajaxBean.action}" value="SubjectRegistration"/>                                 
                    </p:menuitem>
                    <p:menuitem id="registrationList" value="List of Registration" action="#{ajaxBean.editAction}" ajax="true" update=":outputForm">
                        <f:setPropertyActionListener target="#{ajaxBean.action}" value="RegistrationList" />
                    </p:menuitem>                        
                </p:submenu>
            </p:menubar>
        </h:form>       
        <h:form id="outputForm">
            <p:tabView id="outputTab">
                <p:ajax event="tabClose" listener="#{ajaxBean.closeTab}"/>
                <c:forEach items="#{ajaxBean.chcekItem}" var="item" varStatus="loop">
                    <p:tab id="#{item}" title="#{item}" closable="true">                            
                        <ui:include src="#{bundle[item]}"/>   

                    </p:tab>
                </c:forEach>
            </p:tabView>
        </h:form> 
```

**ajaxBean.java**

```
package com.ajax;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import org.primefaces.event.TabCloseEvent;

/**
 *
 * @author DELL
 */
@ManagedBean(name = "ajaxBean")
@SessionScoped
public class AjaxBean implements Serializable {

public AjaxBean() {
}
private boolean input;
private List<String> chcekItem = new ArrayList<String>();

public void setAction(String action) {
    input = true;
    if (getChcekItem().isEmpty()) {
        getChcekItem().add(action);
        System.out.println("The item " + action + " is Successfully Added to array");
    } else {

        for (String abce : getChcekItem()) {
            if (abce.equals(action)) {
                System.out.println(abce + "=" + action);
                input = false;
                //We can jump out of the loop here since we already found a matching value
                break;
            }
        }

        if (input) {
            getChcekItem().add(action);
            System.out.println("The item " + action + " is Successfully Added to array");
        } else {
            System.out.println("The item " + action + " is Exist");
        }
    }

}
private String close;

public void closeTab(TabCloseEvent closeAction) {
    close = closeAction.getTab().getId();
    for (String abce : getChcekItem()) {
        if (abce.equals(close)) {
            System.out.println(close + " is remove from Array");
            getChcekItem().remove(abce);
            //We can jump out of the loop here since we already found a matching value
            break;
        }
    }
}

public String editAction() {
    return null;
}

/**
 * @return the arrJavaTechnologies
 */
/**
 * @return the chcekItem
 */
public List<String> getChcekItem() {
    return chcekItem;
}

/**
 * @param chcekItem the chcekItem to set
 */
public void setChcekItem(ArrayList<String> chcekItem) {
    this.chcekItem = chcekItem;
}

/**
 * @return the input
 */
public boolean isInput() {
    return input;
}

/**
 * @param input the input to set
 */
public void setInput(boolean input) {
    this.input = input;
}
 /**
 * @return the menuaction
 */ 
```

}

**项目.java**

```
package com.ajax;

public class Item {

public Item() {
}
private String value;

public Item(String value) {
    this.value = value;
}

public void setValue(String value) {
    this.value = value;
}

public String getValue() {
    return value;
}
} 
```

**MenuManagedBean.java**

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
  */
package com.ajax;

import java.util.ArrayList;
import java.util.Iterator;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

/**
 *
 * @author DELL
 */
@ManagedBean(name = "menuManagedBean")
@SessionScoped
public class MenuManagedBean {

/** Creates a new instance of MenuManagedBean */
public MenuManagedBean() {
}

private String menuItems;
private ArrayList<String> menuId=new ArrayList<String>();

public void tabGenerate(String event){
    this.menuItems=event;
    getMenuId().add(event);

    Iterator iterator=getMenuId().iterator();
    while(iterator.hasNext()){
        System.out.println("Items : " +iterator.next());
    }
}

/**
 * @return the menuId
 */
public ArrayList<String> getMenuId() {
    return menuId;
}

/**
 * @param menuId the menuId to set
 */
public void setMenuId(ArrayList<String> menuId) {
    this.menuId = menuId;
}
} 
```

请在这个主题上帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T06:05:06.663

您在 jsf 页面中添加流动命令：

```
 <p:tabView id="outputTab" activeIndex="#{ajaxBean.count}"> 
```

ajaxBean.java 流的变化：

```
 @ManagedBean(name = "ajaxBean")
  @SessionScoped
  public class AjaxBean implements Serializable {

  public AjaxBean() {
  }
  private boolean input;
  private List<String> chcekItem = new ArrayList<String>();
  private int count;

  public void setAction(String action) {
  input = true;
  if (getChcekItem().isEmpty()) {
    count++;
    getChcekItem().add(action);
    System.out.println("The item " + action + " is Successfully Added to array");
  } else {

    for (String abce : getChcekItem()) {
        if (abce.equals(action)) {
            System.out.println(abce + "=" + action);
            input = false;
            //We can jump out of the loop here since we already found a matching value
            break;
        }
    }

    if (input) {
        count++;
        getChcekItem().add(action);
        System.out.println("The item " + action + " is Successfully Added to array");
    } else {
        System.out.println("The item " + action + " is Exist");
    }
    }

   }
    private String close;

   public void closeTab(TabCloseEvent closeAction) {
  close = closeAction.getTab().getId();
  for (String abce : getChcekItem()) {
    if (abce.equals(close)) {
        count--;
        System.out.println(close + " is remove from Array");
        getChcekItem().remove(abce);

        //We can jump out of the loop here since we already found a matching value
        break;
      }
      }  
      }

     public String editAction() {
           return null;
                    }

        public List<String> getChcekItem() {
           return chcekItem;
           }

       public void setChcekItem(ArrayList<String> chcekItem) {
           this.chcekItem = chcekItem;
          }

       public boolean isInput() {
            return input;
          }

       public void setInput(boolean input) {
                this.input = input;
         }

       public int getCount() {
           return count-1;
        }

      public void setCount(int count) {
       this.count = count;
      }

     } 
```

# css - 在选择器外应用 CSS

> ID：11625856
> 
> 赞同：0
> 
> 时间：2012-07-24T07:12:51.880
> 
> 标签：css

我想让我的错误选择框的边框在 div.wwctrl 之外变成红色。问题是它没有使用高级 css 选择器改变它的颜色。我想使用 css 而不是 javascript 来实现这一点。这可能吗？谢谢你。

```
<div class="wwctrl">
    <select id="error" name="summaryData.type"></select>
</div>

.wwctrl {
    position: relative;
    border: 1px solid blue;
}

select {
    border: 1px solid pink;
}

select#error + div {
    position: absolute;
    z-index: -1;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: yellow;
}
​ 
```

[示例代码 - JFIDDLE](http://jsfiddle.net/s6LbB/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:36:01.980

当然，你可以用 CSS 做到这一点。

最重要的是：ID ( `#`) 只允许在整个文档中的一个元素上使用，因此如果要将标识符应用于多个元素，则必须使用类 ( `.`)！

您只需在外面声明选择框的边框`wwctrl`。

```
select.error{
  border:1px solid red;
} 
```

现在，您使用更具体的选择器覆盖此选择器，以用于内部的错误框`wwctrl`：

```
.wwctrl select.error{
   border-color:pink;
} 
```

因为该规则更具体，它会覆盖之前的规则。

```
<div class="wwctrl">
  <!-- has a pink border -->
  <select class="error" disabled="disabled"><!--...options...--></select>
  <select><!--...options...--></select>
</div>
<!-- outside wwctrl - has a red border -->
<select class="error" disabled="disabled"><!--...options...--></select> 
```

**[您修改后的示例](http://jsfiddle.net/poikl/s6LbB/3/)**

# java - 实时视频流转换

> ID：11625858
> 
> 赞同：0
> 
> 时间：2012-07-24T07:12:59.630
> 
> 标签：java, video-streaming, ip-camera

我能够通过 jframe 和小程序从我的 ip 摄像头显示实时流，我需要将此 mpg 流转换为 mp4 格式，以便我可以在 html5 视频标签中显示它..任何人都可以建议如何做到这一点，视频应该是仍然没有任何时间延迟......观看流媒体的另一件事我正在点击相机的公共IP，这就是我捕捉视频的方式，如果大量人正在观看视频，是否会对效率产生影响同时..请建议...提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:13:55.940

首先，要知道您不能使用常规 MP4 视频格式进行直播。“渐进式下载” MP4 文件在文件开头有一个索引，在您完成对整个电影的编码之前无法写入该索引。MP4 有一个变体，它可以单独索引每一小块视频，但 HTML5 浏览器并不广泛支持它。

我可以建议几个选项：

1.  使用 FLASH 而不是 HTML5 并将视频转换为 FLV。但是，我不知道有一个 Java 工具可以进行这种转换。
2.  使用 HTTP 直播并设置专用的流媒体服务器进行转码。有很多服务器软件可以做到这一点，例如 Wowza 服务器、Adobe FMS，甚至微软的 Expression Encoder+IIS。您还可以找到适用于该服务器的 SaaS 解决方案以及此类服务器的 EC2 映像。

# sql - SQL 使用 where 子句连接

> ID：11625868
> 
> 赞同：-1
> 
> 时间：2012-07-24T07:13:36.307
> 
> 标签：sql, join

有两个表 - 一个包含员工详细信息，另一个包含订单详细信息。

如何查找在特定日期未下订单的员工姓名？

我正在使用左外连接，我的代码是这样的

```
SELECT 
    emp.FirstName+' '+emp.LastName AS 'FullName', emp.employeeid 
FROM Employee emp
    INNER JOIN Orders oON emp.EmployeeID=o.EmployeeID
WHERE 
    o.OrderDate NOT IN  (SELECT o.OrderDate FROm Orders o WHERE o.OrderDate='4/4/1997')
GROUP BY 
    emp.FirstName+' '+emp.LastName, emp.employeeid 
```

但问题是它会占用列表中的所有人员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:26:57.930

```
SELECT emp.FirstName+' '+emp.LastName AS 'FullName', emp.employeeid 
FROM Employee emp LEFT JOIN Orders o 
ON emp.EmployeeID=o.EmployeeID And o.OrderDate='4/4/1997'
where o.EmployeeID is null 
GROUP BY emp.FirstName+' '+emp.LastName, emp.employeeid 
```

试试这个。应该管用。并评论答案，因为我无法在本地测试它......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T07:20:03.073

一种方法是使用不存在

```
SELECT  
    emp.FirstName+' '+emp.LastName AS 'FullName', emp.employeeid  
FROM Employee emp 
where not exists
    (select * from Orders o ON where emp.EmployeeID=o.EmployeeID 
        and  o.OrderDate='4/4/1997' 
    ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:16:31.203

```
SELECT FirstName + ' ' + LastName AS 'FullName', 
       employeeid 
FROM Employee
where EmployeeID not in (select EmployeeID 
                         from Orders 
                         where OrderDate = '1997-04-04') 
```

# linux - 设置终端选项卡标题的键盘快捷键

> ID：11625869
> 
> 赞同：2
> 
> 时间：2012-07-24T07:13:37.280
> 
> 标签：linux, terminal, keyboard-shortcuts

我喜欢在不使用鼠标的情况下在 linux 中工作，因此我想知道是否有任何方法可以设置键盘快捷键来设置终端选项卡标题。

感谢您的关注。问候，海克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:15:54.150

1.  这不是一个编程问题。
2.  是的，大多数终端都可以使用适当的转义序列。不过，这取决于您使用的终端模拟器。

# php - 使用 ghost 脚本将 JPG 转换为 TIFF

> ID：11625873
> 
> 赞同：2
> 
> 时间：2012-07-24T07:13:51.877
> 
> 标签：php, linux, codeigniter

我正在尝试使用幽灵脚本将图像从 .jpg 转换为 .tiff。我已经执行了以下命令来做到这一点。

```
gs -q -dNOPAUSE -dBATCH -dSAFER -sDEVICE=tiffg3 -sOutputFile=sip.tiff -f sipchat.jpg 
```

但我收到了这个错误。

```
Error: /undefined in �����Exif
Operand stack:

Execution stack:
   %interp_exit   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--   --nostringval--   --nostringval--   false   1   %stopped_push   1894   1   3   %oparray_pop   1893   1   3   %oparray_pop   1877   1   3   %oparray_pop   1771   1   3   %oparray_pop   --nostringval--   %errorexec_pop   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--
Dictionary stack:
   --dict:1155/1684(ro)(G)--   --dict:0/20(G)--   --dict:77/200(L)--
Current allocation mode is local
Current file position is 11
GPL Ghostscript 9.04: Unrecoverable error, exit code 1 
```

我的命令有什么问题？任何建议和指导将不胜感激。我必须使用幽灵脚本转换我的图像，因为如果我使用的是由其他工具转换的图像，则不被接受。
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:28:15.887

你为什么不直接使用 ImageMagick...？

```
convert rose.jpg rose.tiff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-07T00:07:18.027

旧事，但无论如何。

我正在寻找一种将 JPG 转换为 Tesseract 的 TIFF 的方法，并偶然发现了这一点。

不能帮助自己，但你为什么要问“你为什么不只使用 imagemagick”？

AFAIK，imagemagick 在下面的某个地方使用 gs ......但无论如何，问题是关于 ghostscript，而不是 ImageMagick。

# jquery - 如何逐行查找div中的字符数？

> ID：11625874
> 
> 赞同：2
> 
> 时间：2012-07-24T07:13:56.990
> 
> 标签：jquery

这是解释它的图像

![格线](../Images/4947e8019c311c71e1091fe4be6b5e99.png)

```
<div id="tshirt">
    <div id="text-wrapper">
        <p id="tshirtover">Nothing is impossible unless we try it</p>
    </div>
</div> 
```

有没有办法找到第一行的长度？

我尝试了下面的 jQuery 函数。它给出了字符串的整个长度。

```
$("#tshirtover").text().length; 
```

但我只需要找到第一行。有可能得到它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T07:23:16.370

我能想到的唯一方法是创建空 div（具有固定宽度），然后开始逐字符填充文本，使用计数器存储已放置的字符数并观察 div 的高度，一旦高度发生变化，就意味着新行刚刚开始。

# vb.net - 检查连接字符串中的服务器名称是否存在

> ID：11625876
> 
> 赞同：0
> 
> 时间：2012-07-24T07:14:04.777
> 
> 标签：vb.net, string, connection

我已经完成了一个程序，在该程序中，我将在运行时将服务器名称传递给连接字符串。我需要检查服务器名称是否有效。

帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:45:12.407

尝试使用 SqlDataSourceEnumerator.Instance.GetDataSources() 方法来获取可用 SQL 服务器的列表。（参见 MSDN：http: [//msdn.microsoft.com/en-us/library/system.data.sql.sqldatasourceenumerator.getdatasources.aspx](http://msdn.microsoft.com/en-us/library/system.data.sql.sqldatasourceenumerator.getdatasources.aspx)）

或者，您可能希望在 Try..Catch 块中连接到服务器并检查连接状态是否为“打开”。

# apache - 在 CentOS 中制作 apache 服务器？（WAMP 中“Put Online”的 Linux 替代方案）

> ID：11625881
> 
> 赞同：0
> 
> 时间：2012-07-24T07:14:18.963
> 
> 标签：apache

序言：我想让我的网站在我的电脑上运行（只是为了一些测试）。在 Windows 中，我只需单击托盘中的 WAMP 图标，它就会给我一个“在线”选项，这意味着互联网上的任何人都可以访问该网站，只要我给他们链接（其中包含我的 ip）

当前情况：我已切换到 CentOS，但找不到使其在线的选项。我认为 httpd.exe 中会有一个开关，例如 /etc/init.d/httpd restart 但我无法通过谷歌找到正确的答案。帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:25:35.073

首先确保给出以下内容：

I) 在你的 httpd.conf 中寻找：

> #听12.34.56.78:80
> 听 80

确保 Listen 80 处于活动状态（或您要使用的端口）

II) 如果端口 80 可以自由连接，请检查您的 IPTABLES 或防火墙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:51:05.700

一个问题，本地你的服务器工作吗？

如果是这样，请查看[iptables 和端口 80 的小概述](http://www.cyberciti.biz/faq/howto-rhel-linux-open-port-using-iptables/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T05:03:52.213

您必须是超级用户才能完成它。

打开文件 /etc/sysconfig/iptables：

```
vi /etc/sysconfig/iptables 
```

这是标准程序附加以下行并保存

```
-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT 
```

但是这对我不起作用，所以我删除了其中包含“REJECT”的行并且它起作用了

不要忘记重启 iptables 服务

```
service iptables restart 
```

感谢唐纳德123

# php - Cakephp URL 参数

> ID：11625890
> 
> 赞同：0
> 
> 时间：2012-07-24T07:15:00.190
> 
> 标签：php, cakephp, routes, cakephp-2.0, cakephp-2.1

我有一个 Cakephp 2.1 应用程序。

我的函数被声明：

```
public function ajaxOfferingDelete($descipline_name = -1, $field_id = -1)
{
    $this->layout = 'empty';

    //output code
    echo 'hello';
} 
```

在 URL 中输入这个可以正常工作：

```
localhost/lessonshark/teachers/ajaxOfferingDelete/ 
```

上面的输出你好，但底部什么也没给我：

```
 localhost/lessonshark/teachers/ajaxOfferingDelete/1/137 
```

为什么会这样？它以前工作过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:27:39.077

您是否创建了“空”布局？如果你这样做了，你必须在其中：

```
<?php echo $this->fetch('content'); ?> 
```

# sql-server - 在 SQL Server 中创建用户后无法登录

> ID：11625899
> 
> 赞同：87
> 
> 时间：2012-07-24T07:15:15.697
> 
> 标签：sql-server

我的问题是创建用户后无法登录 SQL Server。用户创建成功，因为新用户列在安全/登录下。

这个问题怎么解决？？？

> 用户“sims”登录失败。用户未与受信任的 SQL Server 连接关联。（Microsoft SQL Server，错误：18452）

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-07-24T09:18:10.913

SQL Server 未配置为允许混合身份验证。以下是修复的步骤：

1.  右键单击对象资源管理器根目录下的 SQL Server 实例，
2.  单击属性。
3.  从左侧窗格中选择安全性。
4.  选择 SQL Server 和 Windows 身份验证模式单选按钮，然后
5.  单击确定。
6.  打开服务并重新启动 SQL 服务 (SQLEXPRESS) Windows 服务。

* * *

## 回答 #2

> 赞同：137
> 
> 时间：2012-07-24T07:36:03.727

尝试将您的身份验证模式设置为`mixed mode`. 您的服务器可能不接受使用 sql server 帐户登录。

1.  打开属性
2.  转到“安全”
3.  选择“SQL Server 和 Windows 身份验证模式”

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2014-09-11T10:54:24.543

右键单击服务器查看属性...

![在此处输入图像描述](../Images/db5f615a7099ee66704e8d75b6528ed0.png)特性

# python - ValueError：时间数据“2012-07-19 08:24:00”与格式“%Y-%m-%d H:M:S”不匹配

> ID：11625902
> 
> 赞同：0
> 
> 时间：2012-07-24T07:15:20.173
> 
> 标签：python

我认为这是一个奇怪的错误，我在 Python 中解析一个日期时间字符串，我相信我使用了正确的字符串格式，但我得到了错误：

ValueError：时间数据“2012-07-19 08:24:00”与格式“%Y-%m-%d H:M:S”不匹配

这是控制台会话日志：

```
>>> s='2012-07-19 08:24:00'
>>> import datetime as dt
>>> dt.datetime.strptime(s, '%Y-%m-%d H:M:S')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.6/_strptime.py", line 325, in _strptime
    (data_string, format))
ValueError: time data '2012-07-19 08:24:00' does not match format '%Y-%m-%d H:M:S' 
```

为什么会引发 ValueError 异常 - 指定格式与字符串匹配？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T07:16:57.617

用这个：

```
dt.datetime.strptime(s, '%Y-%m-%d %H:%M:%S') 
```

# c++ - C++ 字符串到固定大小的字符数组可能吗？

> ID：11625904
> 
> 赞同：2
> 
> 时间：2012-07-24T07:15:28.130
> 
> 标签：c++, string, std, cstring

嗨，我有以下代码：

```
char msg[10000];
string mystr = "hello"; 
```

我想将 mystr 放入 msg。有没有办法做到这一点？我尝试了各种方法，但不断得到：

```
incompatible types in assignment of 'const char*' to char [10000]' 
```

我试过：

```
msg = mystr.c_str(); 
```

和

```
msg = (char[10000])mystr; 
```

无济于事。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T07:17:38.317

你可以试试[`std::copy`](http://en.cppreference.com/w/cpp/algorithm/copy)这个。就像是：

```
std::copy(mystr.begin(), mystr.end(), msg); 
```

我会避免使用 C++ 中的和之`C`类的字符串函数。`mempcy``strcpy`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T07:17:42.357

看一下[string::copy](http://www.cplusplus.com/reference/string/string/copy/) - 它需要一个字符串并将其放入数组中。

在您的情况下，它将是：

```
std::size_t length = mystr.copy(msg,10000);
msg[length]='\0'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T07:20:31.860

使用 std::string 的复制成员函数：

```
size_t len = mystr.copy(msg, (sizeof msg)-1);
msg[len] = 0; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T07:21:06.323

```
char msg[10000];
string mystr = "hello";

strcpy(msg, mystr.c_str());
cout<<msg; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T07:17:06.647

C 中的字符串赋值是不同的。您必须将字节复制到目标字符串中。

`memcpy_s(msg, 1000, mystr.c_str(), mystr.length()) // safe windows version`

`memcpy(msg, mystr.c_str(), mystr.length()) // unix version`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T07:18:47.407

使用 strcpy 函数： [http ://www.cplusplus.com/reference/clibrary/cstring/strncpy/](http://www.cplusplus.com/reference/clibrary/cstring/strncpy/)

```
strncpy(msg, mystr.c_str(), sizeof msg / sizeof msg[0]);
msg[sizeof msg / sizeof msg[0] - 1] = 0; // null-terminate in case of truncation 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-24T07:41:15.223

编译器有时会为数组类型生成不稳定的错误消息。

这是将以前的答案汇总到粘贴和编译程序中。

```
#include <string>
#include <iostream>

#if 1

int main(int argc, char **argv)
{
    using std::cout;
    using std::endl;

    char msg[1000] = {0};    // initialize to 0 here since we're printing below
                            // the <type> <array-name>[<size>] = {0} just fills a POD struct or an array with 0s

    std::string mystr = "hello";

    // if, at some point, you have things changing "mystr"
    // you'll need to make sure that it will fit in msg[]

    cout << "Before strcpy: \"" << msg << "\"" << endl;

    // I'll just finish the statement in mystr...
    mystr += " world!";

    if(mystr.length() < sizeof(msg)){
        strcpy(
            msg,            // <- put in here until we find a '\0'
            mystr.c_str()    // <- take from here (which could be a temporary buffer)
            );
    }

    //MSC will complain about strcpy being unsafe
    //
    // you can use the below instead (if you really feel the need to), which is
    // the MS-specific equivalent to the above.
    /*
        strcpy_s(
            msg,            // <- put in here until we find a '\0' or the size limit is reached
            sizeof(msg),    // <- don't put any more than this many chars in msg
            mystr.c_str()    // <- take from here
            );
    */

    cout << "After strcpy: \"" << msg << "\"" << endl;

    return 0;
}

#else

// Similarly, using wchar_t (a usually non-byte-sized character type)
//
// note where the divisions occurr

int main(int argc, char **argv)
{
    using std::wcout;
    using std::endl;

    wchar_t msg[1000] = {0};
    std::wstring mystr = L"hello";

    wcout << "Before strcpy: \"" << msg << "\"" << endl;

    mystr += L" world";

    if(mystr.length() < (sizeof(msg)/sizeof(wchar_t))){
        // mystr wil fit!
        wcscpy(
            msg,            // <- put in here until we find a '\0'
            mystr.c_str()    // <- take from here (which could be a temporary buffer)
            );
    }

    // Similar to the char case in the first preprocessor block
    /*
        wcscpy_s(
            msg,                            // <- put in here until we find a '\0' or the size limit is reached
            sizeof(msg)/sizeof(wchar_t),    // <- don't put any more than this many wchar_ts in msg
            mystr.c_str()                    // <- take from here
            );
    */

    wcout << "After strcpy: \"" << msg << "\"" << endl;

    return 0;
}

#endif 
```

我将留给您阅读有关所有相关功能的文档。

# ios - 如何通过 openfire 插件获取实时比分？

> ID：11625907
> 
> 赞同：0
> 
> 时间：2012-07-24T07:15:31.197
> 
> 标签：ios, xmpp

我想创建一个新插件，它将实时分数发送到 xmpp iOS 客户端。

我已经为它创建了一个新插件和一个服务，但不知道如何将实时分数从 openfire 服务器发送到 xmpp iOS 客户端。

请给我一些建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:09:14.000

一种方法是使用多聊天。您可以为每场比赛创建一个房间。任何希望收到实时比分（或任何相关内容）的人都会加入房间。你有一个机器人将分数发送到房间里，房间里的每个人都会得到它。您还可以将房间配置为仅限访客且匿名。见[XEP-0045](http://xmpp.org/extensions/xep-0045.html)

另一种方法是使用 pubsub。同样，每场比赛都是一个节点。用户订阅节点。见[XEP-0060](http://xmpp.org/extensions/xep-0060.html)

我不确定其他 XMPP 服务器，但 IFAIK MUC 和 pubsub 受 openfire[支持](http://www.igniterealtime.org/projects/openfire/)。

# html - 使用 html css 绘制图表的通用滑动手势

> ID：11625913
> 
> 赞同：0
> 
> 时间：2012-07-24T07:16:04.113
> 
> 标签：html, css, charts, swipe

我已经创建了一些图表，我想添加滑动手势，就像每当用户滑动时，必须更改图表。我在 div 中创建了图表。我只想添加那些 div 而不是图像。我进行了搜索，但我只找到了那些没有很好记录的图像。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:19:09.540

对于这个问题，我建议使用类似 Flexislider 的东西来实现你的图表：

[http://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/)

# c# - 将 JSON 之类的字符串从 C# 发送到 javascript

> ID：11625917
> 
> 赞同：6
> 
> 时间：2012-07-24T07:16:28.847
> 
> 标签：c#, javascript, string, object

我有一些`JavaScript`这样的代码：

```
slider.setPhotos([
    { "src": "image1", "name": "n1" },
    { "src": "image2", "name": "n2" },
    { "src": "image3", "name": "n3" }
    ]); 
```

我想设置`src`和`name`from的值`C#`。

假设值是这样的`C#`：

```
var images = new string[] {"/images/a1.jpg", "/images/a2.jpg", "/images/a3.jpg"};

var names = new string[] {"First", "Second", "Third"}; 
```

如何将这些值设置到`JavaScript`代码中（即在 C# 代码中的页面加载方法中）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T07:28:36.540

在服务器上，您需要将数据序列化为 JSON，然后您可以使用隐藏输入字段之类的东西将其作为 HTML 写入响应。

例如，您可以使用[NewtonSoft](http://james.newtonking.com/projects/json-net.aspx) JSON 库来序列化 JSON（它内置在[ASP MVC 4](http://aspnet.codeplex.com/wikipage?title=ASP.NET%20MVC%204%20RoadMap)中，但是使用 Nuget 很容易安装）

```
string json = Newtonsoft.Json.JsonConvert.SerializeObject(images); 
```

然后将 json 渲染成 HTML（有很多方法可以做到这一点），例如

```
Response.Write(string.Concat("<input id='data' type='hidden' value='", json, "' />"); 
```

或者

```
HiddenField jsonField = new HiddenField
{
    ID = "data"
};
jsonField.Value = json;
this.Controls.Add(jsonField); 
```

甚至直接编写为脚本，无需在客户端解析（我仍然倾向于使用 HTML 方法来避免回发/更新面板的任何问题导致脚本被多次执行）

```
Response.Write(string.Concat("<script type='text/javascript'> var images = ", json, ";</script>"); 
```

然后，在客户端上，您可以从 HTML 中读取此 JSON 并对其进行解析。在现代浏览器中，这是内置的，或者您可以使用 JSON2 之类的[内容进行 polyfill](https://www.google.com.au/search?sugexp=chrome,mod=10&sourceid=chrome&ie=UTF-8&q=json2)

例如

```
var field = document.getElenentById('data');
var images = JSON.parse(field.value); 
```

然后，您可以访问作为 Javascript 对象的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T07:29:17.470

假设`images`和`names`长度相同你可以使用这个

```
StringBuilder str = new StringBuilder();

var images = new string[] {"/images/a1.jpg", "/images/a2.jpg", "/images/a3.jpg"};
var names = new string[] {"First", "Second", "Third"};

str.AppendLine("slider.setPhotos([");
for(int i=0; i< images.Length; i++)
{
   str.AppendLine("{ \"src\": "+ images[i] +", \"name\": "+ names[i] +" }");
   str.AppendLine( (i==images.Length-1 ? "]);":","));
}

Page.ClientScript.RegisterClientScriptBlock(
               this.GetType(), "Key007", str.ToString(), true); 
```

此代码将在您的页面加载时插入一个脚本块，之后您可以在客户端代码的任何位置使用该脚本块。

# c# - .net C# ajax 工具包自动完成功能不起作用

> ID：11625921
> 
> 赞同：0
> 
> 时间：2012-07-24T07:16:35.713
> 
> 标签：c#, autocomplete

```
[System.Web.Services.WebMethodAttribute(), System.Web.Script.Services.ScriptMethodAttribute()]
public static string[] GetCompletionList(string prefixText, int count, string contextKey)
{
    string sql = "SELECT Firstname, Lastname FROM [Patient] Where Firstname like @prefixText or Lastname like @prefixText2";
    SqlDataAdapter da = new SqlDataAdapter(sql, ConfigurationManager.ConnectionStrings["healthcareConnectionString1"].ToString());
    da.SelectCommand.Parameters.Add("@prefixText", SqlDbType.VarChar, 50).Value = "%" + prefixText + "%";
    da.SelectCommand.Parameters.Add("@prefixText2", SqlDbType.VarChar, 50).Value = "%" + prefixText + "%";
    DataTable dt = new DataTable();
    da.Fill(dt);
    string[] items = new string[dt.Rows.Count];
    int i = 0;
    foreach (DataRow dr in dt.Rows)
    {
        items.SetValue(dr["Firstname"].ToString() + " " + dr["Lastname"].ToString(), i);
        i++;
    }
    return items;
} 
```

在 Default.aspx 中

```
<asp:ToolkitScriptManager 
        ID="ToolkitScriptManager1" runat="server" EnablePageMethods="true">
<asp:TextBox ID="TextBox1" runat="server" Width="199px"></asp:TextBox>
<asp:AutoCompleteExtender ID="AutoCompleteExtender1" TargetControlID="TextBox1" 
        runat="server" ServiceMethod="GetCompletionList" ServicePath="WebService.asmx" MinimumPrefixLength="1"   UseContextKey="True">
</asp:AutoCompleteExtender> 
```

我使用上面的代码进行自动完成，但它不会工作建议的数据没有出现。我的代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:28:10.123

您的 AutoComplete 扩展器控件看起来不错，但我没有使用它（我`<cc1:AutoCompleteExtender>`在我的项目中使用了 gr8）。此外，服务方法也可以..只需检查您是否按照正确的步骤添加它的参考..

# php - preg_match() 给出未知修饰符 '$'

> ID：11625922
> 
> 赞同：1
> 
> 时间：2012-07-24T07:16:37.273
> 
> 标签：php, preg-match, modifier

我有以下代码

```
function redireectIfNeeded(){
$url = $_SERVER["REQUEST_URI"];
if(preg_match("/\.php/$", $url))
    header("Location: ".preg_replace("/\.php/",$url));
} 
```

这给了我以下错误。

```
[24-Jul-2012 19:14:18] PHP Warning:  preg_match() [<a href='function.preg-match'>function.preg-match</a>]: Unknown modifier '$' in ../dbc.php on line 223 
```

我知道我在某个地方需要一个分隔符，但我尝试过的任何方法都不起作用。谁能让我知道我需要做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T07:18:12.270

您必须在 / 之前设置 $

```
if(preg_match("/\.php$/", $url))
    header("Location: ".preg_replace("/\.php/",$url));
} 
```

在定界符之后，您可以使用修饰符（s、m 或 i）

# python - 我们可以使用外部函数在python中访问其外部函数范围之外的内部函数吗？

> ID：11625923
> 
> 赞同：5
> 
> 时间：2012-07-24T07:16:46.163
> 
> 标签：python, function, scope

**只是出于好奇，我想知道这一点。**
我知道内部函数的范围仅限于外部函数体，但仍然有任何方法可以让我们在其范围之外访问内部函数变量或在外部调用内部函数它的范围？

```
In [7]: def main():
   ...:     def sub():
   ...:         a=5
   ...:         print a
   ...:         

In [8]: main()

In [9]: main.sub()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
/home/dubizzle/webapps/django/dubizzle/<ipython-input-9-3920726955bd> in <module>()
----> 1 main.sub()

AttributeError: 'function' object has no attribute 'sub'

In [10]: 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T07:33:07.240

```
>>> def main():
...     def sub():
...         a=5
...         print a
... 
>>> main.__code__.co_consts
(None, <code object sub at 0x2111ad0, file "<stdin>", line 2>)
>>> exec main.__code__.co_consts[1]
5 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T07:28:25.020

如果您将内部函数作为值返回，则可以

```
>>> def main():
...     def sub():
...         a = 5
...         print a
...     return sub
...
>>> inner = main()
>>> inner()
5 
```

或者您可以将其作为属性附加到 main （函数毕竟是对象）：

```
>>> def main():
...     def sub():
...         a = 5
...         print a
...     main.mysub = sub
...
>>> main()
>>> main.mysub()
5 
```

但是您最好记录下您这样做的充分理由，因为它几乎肯定会让任何阅读您的代码的人感到惊讶:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T07:29:17.110

不，你不能。内部函数不是外部函数的属性。

内部函数仅在其`def`语句执行后（外部函数执行时）才存在，并且在函数退出时停止存在。

当然，您可以`return`使用内部功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T07:46:15.140

函数只是 Python 中的另一个对象，可以进行自省。

您可以在运行时获取外部函数体并对其进行解析/评估以使该函数在当前命名空间中可用。

```
>>> import inspect
>>> def outer():
        def inner():
            print "hello!"
>>> inspect.getsourcelines(outer)
([u'def outer():\n', u'    def inner():\n', u'        print "hello!"\n'], 1) 
```

与调用 outer.inner() 并不是一回事，但如果您没有使内部函数在外部函数范围之外显式可用，我想这是唯一的可能性。

例如，一个非常幼稚的 eval 尝试可能是：

```
>>> exec('\n'.join([ line[4:] for line in inspect.getsourcelines(outer)[0][1:] ]))
>>> inner()
hello! 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T07:34:09.423

内部函数只是一个局部变量，与其他任何变量一样，因此适用相同的规则。如果你想访问它，你必须返回它。

# c++ - 在 C++ 中通过命名管道传递结构的 char*

> ID：11625924
> 
> 赞同：1
> 
> 时间：2012-07-24T07:16:47.273
> 
> 标签：c++, pipe

我正在尝试通过命名管道传递结构，但在接收端，我无法获得`char *`放置在内部的“地址”数据`structure`。通过使用`WriteFile()`，`ReadFile()` 以下是要求：

1.  传递一个驻留在结构中的 char 指针。
2.  并希望通过网络在系统之间进行通信

谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:28:40.147

您不能在系统之间移动指针。您的结构字段应具有：

1）固定大小的字符数组：

```
struct {
  /* ... */
  char data[256]; 
}; 
```

2）结构末尾的可变大小数据：

```
struct {
  /* ... */
  size_t size;
  char data[0]; // data follows...
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:31:21.150

您必须在任一端对结构进行序列化/反序列化。如果您使用的是 C 和 C++（我不记得 ReadFile/WriteFile 使用这两种语言中的任何一种），它们本身不支持序列化结构，您必须编写代码才能做到这一点。

因此

```
struct { int a; int b; char *c; } s;
fwrite(pipe, &s.a, sizeof(a));
fwrite(pipe, &s.b, sizeof(a));
int c = strlen(s.c);
fwrite(pipe, &c, sizeof(c));
fwrite(pipe, s.c, c); 
```

注意：这不是一个好的、可移植的和可靠的方法。这只是一种方法。

# java - 关于可伸缩性的 EJB 3 性能

> ID：11625925
> 
> 赞同：-1
> 
> 时间：2012-07-24T07:16:55.837
> 
> 标签：java, performance, migration, ejb-3.0, scalability

我们计划将我们的应用程序从 EJB 2 迁移到 EJB 3。我了解使用 EJB 3 对轻量级组件、DI 和其他所有方面的好处，但我不确定用户方面的可伸缩性

EJB 3 在可伸缩性方面是否比 EJB 2 有任何优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:29:59.750

Ejb3 或 Ejb2.1 是规范 (API)。实施由供应商 (Jboss,Weblogic...) 完成。从规范的角度来看，关于“可扩展性”，2.1 到 3 之间没有区别。在同一 ejb 容器供应商下从 2.1 迁移到 3 不应该影响性能或可扩展性，因为很可能在幕后实现了相同的

# xcode - XCode：未检测到我的 .h 文件

> ID：11625927
> 
> 赞同：0
> 
> 时间：2012-07-24T07:17:00.710
> 
> 标签：xcode, ios5, header

我想分享一些截图来很好地解释我的问题。 ![在此处输入图像描述](../Images/88c56ac77a966e30bb871f409a9177db.png)

![在此处输入图像描述](../Images/0b42f24c175f7d89fb7a691d2da010d1.png)

正如您在图像左侧看到的那样，BookCell.h 文件存在，当我使用#import 时，它会自动得到建议。但事实是我根本无法使用它。BookCell.m 没有找到 BookCell.h，即使在第二个屏幕截图中也可以看到，我已将其导入到另一个类文件中，但也无法找到它！有什么问题？

我尝试重新打开 XCode，甚至重新启动了我的 mac。我非常需要你的帮助。

**编辑** 这里是 BookCell.h 文件：

```
//
//  BookCell.h
//  BookShelf
//
//  Created by ManGoes Mobile on 24/7/12.
//  Copyright 2012 __MyCompanyName__. All rights reserved.
//

#import "ArticleCell.h"
#import "ArticleTitleLabel.h"
#import "MainViewDelegate.h"
#import "ControlVariables.h"
@interface BookCell : ArticleCell
//This image name will be needed once we want to retain the represented Article object by this.
@property (strong,nonatomic) NSString *imageName;
@property (strong,nonatomic) UITableViewCell *parentCell;
@property CGPoint locationInCell;
-(BookCell *)BookCell;
//delegates
@property (nonatomic,assign) id<MainViewDelegate> delegate;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:06:31.673

如何右键单击 .h 文件并删除引用，然后再次将其添加到项目中？

# c# - 如何遍历通用列表 每 3 个项目分组

> ID：11625938
> 
> 赞同：2
> 
> 时间：2012-07-24T07:17:51.543
> 
> 标签：c#, asp.net, generics

我想遍历 MemberProfiles 的通用列表：

```
List<MemberProfile> jobseekers 
```

，并将项目分组到一个`<div class='group'>`标签中。每个 `<div class="group">` 应该包含 3 个这样的求职者：

```
<div class="group">
    <div class="jobseeker">
        ...data jobseeker
    </div>
</div> 
```

我在通用列表上尝试了不同的方法，比如 .skip() 和 .take() 但我没有成功实现这个场景。

我的代码如下所示：

```
foreach (MemberProfile jobseekerProfile in Jobseekers)
{
    if (jobseekerProfile != null)
    {
        Label lblJobseeker = new Label();
        StringBuilder sbJobseeker = new StringBuilder();
        sbJobseeker.Append(string.Format("<p><strong>{0}&nbsp;{1}</strong><br />", jobseekerProfile.FirstName, jobseekerProfile.LastName));
        XPathNodeIterator preValues = library.GetPreValues(1362);
        preValues.MoveNext();
        XPathNodeIterator iterator2 = preValues.Current.SelectChildren("preValue", "");
        while (iterator2.MoveNext())
        {
            if (jobseekerProfile.JobType == iterator2.Current.GetAttribute("id", ""))
            {
                sbJobseeker.Append(string.Format("looking for a {0}<br />", iterator2.Current.Value));
            }
        }
        XPathNodeIterator iterator3 = library.GetPreValues(1363);
        iterator3.MoveNext();
        XPathNodeIterator iterator4 = iterator3.Current.SelectChildren("preValue", "");
        StringBuilder sbJobExperience = new StringBuilder();
        string[] strJobExperience = jobseekerProfile.JobExperience.Split(new char[] { ',' });
        int counter = 1;
        while (iterator4.MoveNext())
        {
            if (jobseekerProfile.JobExperience.Contains(iterator4.Current.GetAttribute("id", "")))
            {
                if (counter != strJobExperience.Count<string>())
                {
                    sbJobExperience.Append(string.Format("{0}, ", iterator4.Current.Value));
                    counter++;
                }
                else
                {
                    sbJobExperience.Append(string.Format("{0}", iterator4.Current.Value));
                }
            }
        }
        sbJobseeker.Append(string.Format("Fields of experience: {0}<br />", sbJobExperience.ToString()));
        sbJobseeker.Append(string.Format("Years of experience: {0}<br />", jobseekerProfile.YearsExperience));
        sbJobseeker.Append(string.Format("Country: {0}<br />", jobseekerProfile.Country));
        sbJobseeker.Append(string.Format("<form name='frmSelect' action='/selectjobcandidate.aspx' method='post'><input type='hidden' name='username' value='{0}' /><input type='submit' value='select candidate' /></form>", jobseekerProfile.UserName));
        lblJobseeker.Text = sbJobseeker.ToString();
        phListJobseekers.Controls.Add(lblJobseeker);
    }
} 
```

有人可以让我走上正确的轨道来实现这个场景吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-24T07:31:08.937

```
for (var i = 0; i < Jobseekers.Count; i += 3)
{
    foreach (MemberProfile jobseekerProfile in Jobseekers.Skip(i).Take(3))
    {

    }
} 
```

这就是你所追求的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T07:31:05.883

既然你似乎想用 linq 来做，我们开始吧：

```
var tagged = Jobseekers.Select((x, i) => new { x, i });
var grouped = tagged.ToLookup(t => (t.i - 1) / 3, t => t.x);

foreach (var group in grouped)
{
    Console.WriteLine("Group:");
    foreach (var item in group)
    {
        Console.WriteLine(item);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:30:15.267

从以下答案：[Split List into Sublists with LINQ](https://stackoverflow.com/questions/419019/split-list-into-sublists-with-linq)

```
public static List<List<MemberProfile>> Split(List<MemberProfile> source)
{
    return  source
        .Select((x, i) => new { Index = i, Value = x })
        .GroupBy(x => x.Index / 3)
        .Select(x => x.Select(v => v.Value).ToList())
        .ToList();
} 
```

也可以查看其他答案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T07:32:11.543

您的问题并不完全清楚，但您似乎希望将`jobseekers`列表分成每组 3 个元素，然后对每组 3 个元素执行一些操作以获取一些 HTML 片段，因此输出是一系列 HTML 片段.

让我们假设它`jobseekers`总是有 3 个元素的倍数。如果它并不总是有 3 个元素，则此解决方案将保留最后一个组以及其余元素，您可以通过删除任何少于 3 个元素的组来过滤掉该组（即`Where`紧随`GroupBy`. 使用 LINQ：

```
IEnumerable<string> htmlSnippets = jobseekers
    .Zip(Enumerable.Range(0, jobseekers.Count), Tuple.Create)
    .GroupBy(tup => tup.Item2 / 3)
    .Select(GenerateHtmlString);
string combinedHtmlString = string.Join(string.Empty, htmlSnippets);

public string GenerateHtmlString(IEnumerable<MemberProfile> profiles)
{
    return string.Format(@"<div class=""jobseeker"">{0}</div>",
        // The question doesn't specify how the 3 jobseekers are rendered in HTML
        );
} 
```

# android - NullPointerException 让我发疯

> ID：11625942
> 
> 赞同：-4
> 
> 时间：2012-07-24T07:17:56.523
> 
> 标签：android, nullpointerexception

编写一个 UPnP 控制点应用程序。但是我不断收到一个空指针异常：这里的第一段代码是导致 npe 的原因。粗体表示对 createAbsoluteURL 的调用。其余的是不同类 (URIUtil) 中的方法，持有对 createAbsoluteURL/URI 的不同调用

```
content = new MediaStoreContent(
                    context,
                    **new URLBuilder() {
                        public String getURL(DIDLObject object) {
                            return URIUtil.createAbsoluteURL(
                                    addy,
                                    getHttpServerService().getLocalPort(),
                                    URI.create("/" + object.getId())
                            ).toString();
                        }**

                        public String getObjectId(String urlPath) {
                            return urlPath.substring(1); // Cut the slash
                        }
                    }
            );

public static URL createAbsoluteURL(InetAddress address, int localStreamPort, URI relativeOrNot) throws IllegalArgumentException {
        try {
            if (address instanceof Inet6Address) {
                return createAbsoluteURL(new URL("http://[" + address.getHostAddress() + "]:" + localStreamPort), relativeOrNot);
            } else if (address instanceof Inet4Address) {
                return createAbsoluteURL(new URL("http://" + address.getHostAddress() + ":" + localStreamPort), relativeOrNot);
            } else {
                throw new IllegalArgumentException("InetAddress is neither IPv4 nor IPv6: " + address);
            }
        } catch (Exception ex) {
            throw new IllegalArgumentException("Address, port, and URI can not be converted to URL", ex);
        }
    }

public static URL createAbsoluteURL(URL base, URI relativeOrNot) throws IllegalArgumentException {

        if (base == null && !relativeOrNot.isAbsolute()) {
            throw new IllegalArgumentException("Base URL is null and given URI is not absolute");
        } else if (base == null && relativeOrNot.isAbsolute()) {
            try {
                return relativeOrNot.toURL();
            } catch (Exception ex) {
                throw new IllegalArgumentException("Base URL was null and given URI can't be converted to URL");
            }
        } else {
            try {
                assert base != null;
                URI baseURI = base.toURI();
                URI absoluteURI = createAbsoluteURI(baseURI, relativeOrNot);
                return absoluteURI.toURL();
            } catch (Exception ex) {
                throw new IllegalArgumentException(
                        "Base URL is not an URI, or can't create absolute URI (null?), " +
                                "or absolute URI can not be converted to URL", ex);
            }
        }
    }

 public static URI createAbsoluteURI(URI base, URI relativeOrNot) throws IllegalArgumentException {
            if (base == null && !relativeOrNot.isAbsolute()) {
                throw new IllegalArgumentException("Base URI is null and given URI is not absolute");
            } else if (base == null && relativeOrNot.isAbsolute()) {
                return relativeOrNot;
            } else {
                assert base != null;
                // If the given base URI has no path we give it a root path
                if (base.getPath().length() == 0) {
                    try {
                        base = new URI(base.getScheme(), base.getAuthority(), "/", base.getQuery(), base.getFragment());
                    } catch (Exception ex) {
                        throw new IllegalArgumentException(ex);
                    }
                }
                return base.resolve(relativeOrNot);
            }
        } 
```

这是我的日志：

```
E/AndroidRuntime( 9824): Caused by: java.lang.NullPointerException
E/AndroidRuntime( 9824):        at org.teleal.cling.android.browser.MediaServerS
erviceImpl$ContentHttpServerConnection.<init>(MediaServerServiceImpl.java:159)
E/AndroidRuntime( 9824):        at org.teleal.cling.android.browser.MediaServerS
erviceImpl.onCreate(MediaServerServiceImpl.java:72)
E/AndroidRuntime( 9824):        at android.app.ActivityThread.handleCreateServic
e(ActivityThread.java:2959)
E/AndroidRuntime( 9824):        ... 10 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:28:55.660

至少有两件事可能为空，并导致您突出显示的部分出现 NPE：

*   `getHttpServerService()`
*   `object`

你确定你的对象在调用该方法之前已经初始化了吗？

# c# - GetResponse 和 GetRequestStream silverlight

> ID：11625946
> 
> 赞同：1
> 
> 时间：2012-07-24T07:18:22.440
> 
> 标签：c#, asp.net, silverlight, web-services, rest

出于某种原因，我无法使用`GetRequestStream`或`GetResponse`在 Silverlight 中出现下划线：S 不确定要使用什么？我正在尝试连接到我的网络服务，这是我得到错误的地方，

```
string uri = "http://localhost:8002/Service/Customer";
StringBuilder sb = new StringBuilder();
sb.Append("<Customer>");
sb.AppendLine("<FirstName>" + this.textBox1.Text + "</FirstName>");
sb.AppendLine("<LastName>" + this.textBox2.Text + "</LastName>");
sb.AppendLine("</Customer>");
string NewCustomer = sb.ToString();
byte[] arr = Encoding.UTF8.GetBytes(NewCustomer );
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(uri);
req.Method = "POST";
req.ContentType = "application/xml";
req.ContentLength = arr.Length;
Stream reqStrm = req.GetRequestStream();// error here GetRequestStream
reqStrm.Write(arr, 0, arr.Length);
reqStrm.Close();
HttpWebResponse resp = (HttpWebResponse)req.GetResponse(); //error here GetRequestStream
MessageBox.Show("Staff Creation: Status " + resp.StatusDescription);
reqStrm.Close();
resp.Close(); 
```

有人有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:40:30.753

Silverlight 仅支持异步网络访问。Silverlight中没有同步`GetRequestStream`和`GetResponse`方法。您将需要使用异步方法`BeginGetRequestStream`/`EndGetRequestStream`和`BeginGetResponse`/ `EndGetResponse`。

更重要的是，您需要了解如何在一般情况下异步执行操作。例如，某些东西会调用您上面的代码，并期望在它完成后会发生某些更改。在不真实的异步世界中，代码会很快返回，稍后会发生一些事情。

# c# - 对动态对象使用显式接口实现

> ID：11625947
> 
> 赞同：3
> 
> 时间：2012-07-24T07:18:41.660
> 
> 标签：c#, dynamic, explicit-implementation

我正在试验接口的显式实现。这是用在当前上下文中无效的方法来剥离智能感知。使用[/practical-applications-of-the-adaptive-interface-pattern-the-fluent-builder-context/](http://mattdavey.me/2012/03/08/practical-applications-of-the-adaptive-interface-pattern-the-fluent-builder-context/)作为参考。为了证明它们是不可调用的，我想我可以使用 dynamic 关键字，因为这样至少我的代码可以编译。它可以编译，但不能按预期工作。动态变量可以访问类方法，但不能访问显式实现的接口方法。

```
public interface IAmInterface
{
    void Explicit();
    void Implicit();
}

public class Implementation : IAmInterface
{
    void IAmInterface.Explicit()
    {
    }

    public void Implicit()
    {
    }
    public static Implementation BeginBuild()
    {
        return new Implementation();
    }
} 
```

这里有 3 个测试来证明我的观点

```
[Test]
public void TestWorksAsExpected() //Pass
{
    var o = Implementation.BeginBuild();
    o.Implicit();
}

[Test]
public void TestDoesNotWorkWithExplicitImplementation() //Fails
{
    dynamic o = Implementation.BeginBuild();
    o.Explicit();
}

[Test]
public void ButWorksForImplicitImplementation() //Pass
{
    dynamic o = Implementation.BeginBuild();
    o.Implicit();
} 
```

有人愿意解释一下原因吗？我想要这个功能的一个例子是证明我不能在 TennisGame 中添加两个以上的玩家。

```
dynamic o = TennisGame.BeginBuild().With("Player A").Versus("Player B");
o.Versus("Player C"); //Should fail. It does, but for another reason 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T07:45:53.427

> 动态变量可以访问类方法，但不能访问显式实现的接口方法。

对，那是正确的。`dynamic`可以访问可以访问的常规成员（基于上下文等，通常意味着“公共”）。但是，即使在常规 C# 中，调用显式接口实现的**唯一方法是将对象强制转换为接口。**动态的情况仍然如此。

隐式交互实现也是常规类 API 的一部分，因此它们对于常规 c# 和`dynamic`.

基本上：不，`dynamic`不能也不会访问显式接口实现。

要么转换为接口，要么使用*接口类型*（不是对象类型）的反射。

# firefox - 本机 dll 模块与此版本的 Firefox 不兼容

> ID：11625951
> 
> 赞同：1
> 
> 时间：2012-07-24T07:19:16.153
> 
> 标签：firefox, xpcom

我已经使用 Gecko/XULRunner v12（适用于 v12）在 CPP 中创建了一个 XPCOM DLL，但是当我使用 v13 或 v14 的 firefox 运行它时，我收到以下错误：

```
-Native module at path '...\PowerFoxDll.dll' is incompatible with this version of Firefox, has version 12, expected 14 
```

XPCOM DLL XULRunner SDK 是否可能不向后兼容？？？

有没有办法解决它？我正在寻找一种不需要为每个新版本重新编译代码的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:34:10.620

不幸的是，你是对的。原生 XPCOM 插件和浏览器之间没有向后（和向前）兼容性。您必须使用相应版本的 XULRunner SDK 为每个新版本的 Firefox 编译代码。因此，如果您想要一个最新的解决方案，您必须每六周更新一次源代码。只有一种方法可以制作稳定的工作解决方案 - 使用 JavaScript。Google 'js-ctypes' - 这个解决方案允许将本机 dll 中的代码直接用于 Firefox JavaScript 扩展。

# java - 使用之前工作的间接 JNDI 未找到本地 EJB Bean

> ID：11625954
> 
> 赞同：0
> 
> 时间：2012-07-24T07:19:26.043
> 
> 标签：java, jakarta-ee, ejb, jndi, ejb-2.x

我在多模块 Maven 应用程序的单独模块中使用 EJB 2.1。我正在使用间接 JNDI（即使用 java:comp/env/ 没怎么用）。我也是第一次使用 EJB 2.1。但是由于这只是一个本地简单的 EJB 所以问题不大。关于它的奇怪之处在于它正在工作，但突然没有改变任何与之相关的部分，它现在已经停止工作，我得到了 NameNotFoundException。事情在正常工作时正确完成。我很确定。首先我的代码，

**ejb-jar.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<ejb-jar id="ejb-jar_ID" version="2.1" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/ejb-jar_2_1.xsd">
    <display-name>sr-g0a-ejb</display-name>
    <enterprise-beans>
        <session id="CreateAclService">
            <ejb-name>CreateAclService</ejb-name>
            <local-home>com.sre.g0a.CreateAclServiceLocalHome</local-home>
            <local>com.sre.g0a.CreateAclServiceLocal</local>
            <ejb-class>com.sre.g0a.CreateAclServiceBean</ejb-class>
            <session-type>Stateless</session-type>
            <transaction-type>Container</transaction-type>
            <security-identity>
                <description></description>
                <run-as>
                    <description></description>
                    <role-name>ACL_TECH_USER</role-name>
                </run-as>
            </security-identity>
        </session>
    </enterprise-beans>
    <assembly-descriptor>
        <security-role>
            <description>
            ACL_TECH_USER</description>
            <role-name>ACL_TECH_USER</role-name>
        </security-role>
        <method-permission>
            <role-name>ACL_TECH_USER</role-name>
            <method>
                <ejb-name>CreateAclService</ejb-name>
                <method-intf>Local</method-intf>
                <method-name>createAclRole</method-name>
                <method-params>
                    <method-param>com.sre.edms.bsc.types.EDMSAcl</method-param>
                    <method-param>com.sre.edms.bsc.ids.EDMSDocumentID</method-param>
                </method-params>
            </method>
        </method-permission>
        <container-transaction>
            <method>
                <ejb-name>CreateAclService</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>NotSupported</trans-attribute>
        </container-transaction>
    </assembly-descriptor>
</ejb-jar> 
```

**我正在访问 EJB 方法**的 Web 模块（在服务器上）的片段。****

 **```
 Hashtable<String, String> hashTable = new Hashtable<String, String>();
    hashTable.put(Context.INITIAL_CONTEXT_FACTORY,
    "com.ibm.websphere.naming.WsnInitialContextFactory");
    //hashTable.put(Context.PROVIDER_URL, "corbaloc:iiop:localhost:9080");
    Context initialContext;
    try {
        initialContext = new InitialContext(hashTable);
        CreateAclServiceLocalHome home = (CreateAclServiceLocalHome) initialContext
        .lookup("java:comp/env/ejb/CreateAclService");
        //.lookup("ejblocal:ejb/CreateAclServiceLocal");
        CreateAclServiceLocal service = home.create();
        eDMSAcl = service.createAclRole(eDMSAcl, edmsDocumentID);
    } catch (NamingException ne) {
        LOGGER.log(Level.WARNING, "NamingException Occured", ne);
        throw new GEMException("Failed to create ACL. NamingException Occured");
    } catch (CreateException ce) {
        LOGGER.log(Level.WARNING, "CreateException Occured", ce);
        throw new GEMException("Failed to create ACL");
    } catch (BscServiceException be) {
        LOGGER.log(Level.WARNING, "BscServiceException Occured", be);
        throw new GEMException("Failed to create ACL");
    } 
```

**我的 web.xml中显示 ejb-ref 标记的**片段****

 **```
<ejb-local-ref id="EJBLocalRef_1343037878938">
    <description>
    </description>
    <ejb-ref-name>ejb/CreateAclService</ejb-ref-name>
    <ejb-ref-type>Session</ejb-ref-type>
    <local-home>com.sre.g0a.CreateAclServiceLocalHome</local-home>
    <local>com.sre.g0a.CreateAclServiceLocal</local>
    <ejb-link>sr-g0a-ejb.jar#CreateAclService</ejb-link>
</ejb-local-ref> 
```

现在我的异常的堆栈跟踪（NamingNotFoundException）

```
[7/24/12 12:34:26:629 IST] 00001720 GEMEBesUtil   W   NamingException Occured
                                 com.ibm.websphere.naming.CannotInstantiateObjectException: A NameNotFoundException occurred on an indirect lookup on the name java:comp/env/ejb/CreateAclService. The name java:comp/env/ejb/CreateAclService maps to a JNDI name in deployment descriptor bindings for the application performing the JNDI lookup. Make sure that the JNDI name mapping in the deployment descriptor binding is correct. If the JNDI name mapping is correct, make sure the target resource can be resolved with the specified name relative to the default initial context.  [Root exception is javax.naming.NameNotFoundException: Name ejb not found in context "ejblocal:".]
    at com.ibm.ws.naming.util.Helpers.processSerializedObjectForLookupExt(Helpers.java:1081)
    at com.ibm.ws.naming.urlbase.UrlContextHelper.processBoundObjectForLookup(UrlContextHelper.java:181)
    at com.ibm.ws.naming.java.javaURLContextRoot.processBoundObjectForLookup(javaURLContextRoot.java:850)
    at com.ibm.ws.naming.urlbase.UrlContextImpl.lookupExt(UrlContextImpl.java:1454)
    at com.ibm.ws.naming.java.javaURLContextImpl.lookupExt(javaURLContextImpl.java:477)
    at com.ibm.ws.naming.java.javaURLContextRoot.lookupExt(javaURLContextRoot.java:485)
    at com.ibm.ws.naming.java.javaURLContextRoot.lookup(javaURLContextRoot.java:370)
    at org.apache.aries.jndi.DelegateContext.lookup(DelegateContext.java:161)
    at javax.naming.InitialContext.lookup(InitialContext.java:436)
    at com.sre.g0a.server.util.GEMEBesUtil.createEDMSAcl(GEMEBesUtil.java:250)
    at com.sre.g0a.server.util.GEMEBesUtil.formSrGemDocForCreation(GEMEBesUtil.java:180)
    at com.sre.g0a.server.services.ImportComponentServiceImpl.createDocument(ImportComponentServiceImpl.java:65)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:551)
    at com.sre.g0a.server.integration.GWTSpringController.processCall(GWTSpringController.java:57)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:595)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1188)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:763)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:454)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1020)
    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3703)
    at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:304)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:962)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1662)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
    at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1659)
Caused by: javax.naming.NameNotFoundException: Name ejb not found in context "ejblocal:".
    at com.ibm.ws.naming.ipbase.NameSpace.getParentCtxInternal(NameSpace.java:1969)
    at com.ibm.ws.naming.ipbase.NameSpace.retrieveBinding(NameSpace.java:1376)
    at com.ibm.ws.naming.ipbase.NameSpace.lookupInternal(NameSpace.java:1219)
    at com.ibm.ws.naming.ipbase.NameSpace.lookup(NameSpace.java:1141)
    at com.ibm.ws.naming.urlbase.UrlContextImpl.lookupExt(UrlContextImpl.java:1436)
    at com.ibm.ws.naming.jndicos.CNContextImpl.lookupExt(CNContextImpl.java:1425)
    at com.ibm.ws.naming.jndicos.CNContextImpl.lookupExt(CNContextImpl.java:1475)
    at com.ibm.ws.naming.util.IndirectJndiLookupObjectFactory$1.run(IndirectJndiLookupObjectFactory.java:373)
    at com.ibm.ws.security.util.AccessController.doPrivileged(AccessController.java:118)
    at com.ibm.ws.naming.util.IndirectJndiLookupObjectFactory.getObjectInstanceExt(IndirectJndiLookupObjectFactory.java:223)
    at com.ibm.ws.naming.util.Helpers.processSerializedObjectForLookupExt(Helpers.java:990)
    ... 44 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:09:49.113

问题是 binding.xmi 文件没有被包含在内。包括它，它起作用了。****

# jquery - Jquery访问表格单元格中的div

> ID：11625957
> 
> 赞同：0
> 
> 时间：2012-07-24T07:19:45.167
> 
> 标签：jquery

我正在尝试通过悬停在表格行上的类访问第一个 div；

这是我的html：

```
<table id='search_job_results_table'>
<tbody>
<tr>
<td><div style='position:relative'><div class='search_job_tooltip'>blah blah</div></div></td>
</tr>
</tbody>
</table> 
```

我尝试过以下方法：

```
$(function () {
    $('table#search_jobs_result_table tbody tr').mouseover(function () {
        $(this).children().next('div.search_job_tooltip').css('display', 'block');
    });
}); 
```

悬停工作部分有效，因为我可以在那里唤醒警报并触发它，但不能设置该 div 的 css。由于某种原因，我总是陷入困境，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:25:55.980

你不能使用 .next() 因为 div 是孩子所以使用这个

```
$(function () {
    $('table#search_jobs_result_table tbody tr').mouseover(function () {
        $(this).find('div.search_job_tooltip').first().css('display', 'block');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:27:59.463

你可以使用`find()`方法，而不是`.css('display', 'block');`你可以使用`show()`方法。

```
$(function () {
    $('#search_jobs_result_table tr').mouseover(function () {
        $(this).find('.search_job_tooltip:first').show()
    });
}); 
```

# ios - 在 ipad 应用程序中的 UIWebview 中启动链接时，我们可以获得任何结果或反馈吗

> ID：11625958
> 
> 赞同：0
> 
> 时间：2012-07-24T07:19:49.893
> 
> 标签：ios, ipad, url, uiwebview, safari

我开发了一个 ipad 应用程序，在这种情况下，用户点击一个重定向到登录页面 (UIWebView) 的按钮，用户输入他的凭据，网页点击进行验证的服务器，浏览器返回一个提要返回字符串（授权）。

问题：是否有规定应用程序知道反馈字符串/数据？据我所知，一旦 webView 启动，我们的应用程序就没有关于 Webview 事件的信息。

我不想在我的应用程序中实现服务，因为服务提供商说网页会在成功登录后将用户重定向到应用程序。这可能在桌面上是可能的，但在 ipad 应用程序中，bowser/Webview 可以重定向回应用程序登录后，我需要在我的应用程序中使用反馈字符串。有人可以建议我如何实现相同的功能。如果我出错了，请纠正我......

TNQ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:27:26.450

您可以从 UIWebView 调用 Objective-C 方法。您可以通过在 shouldStartLoadWithRequest: 方法中捕获自定义 url 来做到这一点。更多细节在[这里](http://blog.techno-barje.fr/post/2010/10/06/UIWebView-secrets-part3-How-to-properly-call-ObjectiveC-from-Javascript/)。

# css - Css链接在Firefox中不起作用

> ID：11625960
> 
> 赞同：0
> 
> 时间：2012-07-24T07:19:52.673
> 
> 标签：css, firefox, google-chrome, browser

我有一个非常烦人的问题。我已经使用 CSS 对我的网站进行了设计，它似乎在 Google Chrome 和 IE 中运行良好，但 CSS 设计并非全部在 Firefox 中运行。可能是什么问题，我尝试了很多东西仍然无法正常工作。由于不允许新用户发布图像。我无法用屏幕截图解释。

我在 Index.php 中的代码

```
 <!Doctype html>
     <html lang="en">
     <title>Online Voting RTC</title>
     <head>

     <link type="text/css" rel="stylesheet"  href="css\style.css">
     <script type="text/javascript" src="js\create_text_box.js">
     </script>

     </head>
     <body>
     <div id="wapper">
        <!-- Define Header -->
        <?php include("header.php"); ?>
        <!-- End Header -->

        <!-- Main content area -->
        <?php include("maincontent.php");?>
        <!-- End of Main content area -->

        <!-- Left Sidebar -->
        <?php include("sidebar.php");?>
        <!-- End Left Sidebar -->

        <!-- Footer -->
        <?php include("footer.php");?>
        <!-- End of Footer -->
     </div>
     </body>
     </html> 
```

这是CSS部分

```
 body {
background: #ffffff;
margin: 0;
padding: 0;
}

#wrapper {
    width: 100%;
    height: 100px;
    margin: 0;
    padding: 0;
    border: 0;
    float: left;
    background: #dddddd;
}

#header {
width: 100%;
height: 100px;
margin: 0;
padding: 0;
border: 0;
float: left;
background: #403cf7;
}

.logo {
    float:left;
    position:relative;
    left:20px;
    top:20px;
}

.pagetitle {
    float:left;
    position:relative;
    left:550px;
    top:20px;
}
 .usermenu {
    float:right;
    position:relative;
    right:20px;
    top:20px;
 }

 #sidebar {
width: 20%;
height: 600px;
margin: 0;
padding: 0;
border: 0;
float: left;
background: #ffff99;
text-align: center;
  }

 #maincontent {
width: 80%;
height: 600px;
margin: 0;
padding: 0;
border: 0;
float: right;
background: #95dff8;
}

#footer {
width: 100%;
height: 70px;
margin: 0;
padding: 0;
    border: 0;
    float: left;
    background: #272727;
}

/*-----------------------------------------CSS for navigation    Menu------------------------*/
  #navMenu{
color:#d4d3d3;
font-family:Geneva;
float:left;

 }

  #navMenu ul li a{

text-decoration:none;
color:#989694;
}

 #navMenu ul li a:hover{
color:#f46322;
}

 #navMenu ul{
padding:0;
 margin:0;
margin-left:25px;
list-style:none;
position:relative;
left:20px;
top:20px;
 }
/*----------------------------------------------------------------------------------------*/ 
```

如果有人能在这种情况下帮助我，我将不胜感激。实际上我正在检查浏览器兼容性，我遇到了这个问题。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:28:13.237

URL 中不允许使用字符“\”（反斜杠）；将其更改为“/”（正斜杠）。一些浏览器将不正确的“\”隐式转换为“/”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-30T02:48:24.453

尝试删除 type="text/css"。

您的代码应如下所示：

```
<link rel="stylesheet" href="css/style.css"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:36:04.227

你需要关闭你的链接标签

```
<link type="text/css" rel="stylesheet"  href="css/style.css" /> 
```

如果您的 css 文件夹不在您网站的路由目录中，您最好使用

```
<link type="text/css" rel="stylesheet"  href="/css/style.css" /> 
```

因为如果您将页面移动到不同的文件夹，这仍然有效。

您还需要在 HEAD 元素中移动您的标题标签以使 HTML 有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-21T23:32:57.307

我也有这个问题。一旦我从容器类中删除了 -1 的 z-index。链接再次开始工作。

# tridion - 如何覆盖标准方法的初始化

> ID：11625962
> 
> 赞同：-1
> 
> 时间：2012-07-24T07:19:59.833
> 
> 标签：tridion, tridion-2011

我们可以像这样在我们的javascript中使用标准的'InsertCpDialog$initialize()'，这样我就可以在它初始化后调用其他函数。我使用了下面的代码，但它不起作用。:(

```
Type.registerNamespace("Extensions");
Extensions.InsertCpDialog.prototype.initialize  = function InsertCpDialog$initialize()
{
alert('hi  inside insert');
var p = this.properties;
if(window.document.nameProp == "Name" || window.document.title == "Name") {

    var browserName=navigator.appName; // Get the Browser Name

    if(browserName=="Microsoft Internet Explorer") // For IE
    {
    alert('hi inside IE');
//window.onload=init(); // Call init function in IE
    }
    else
    {
    if (document.addEventListener) // For Firefox
    {
    alert('hi inside firefox');    
//document.addEventListener("DOMContentLoaded", init(), false); // Call init function in Firefox
    }
}
}
} 
```

原始（标准）一个是这样的：

```
Type.registerNamespace ("Tridion.Cme.Views");  
Tridion.Cme.Views.InsertCpDialog = function InsertCpDialog()
{
Type.enableInterface(this, "Tridion.Cme.Views.InsertCpDialog");
this.addInterface("Tridion.Cme.Views.DashboardBase");
};

Tridion.Cme.Views.InsertCpDialog.prototype.initialize = function InsertCpDialog$initialize()
{
} 
```

**编辑**

嗨，坦率地说，谢谢，但我已经在我的代码中使用相同的东西来获取在 CP 选项卡下的页面上列出的组件和模板列表。

```
function getbtn() {
//alert('inside getbtn');
var sbtn = document.getElementById ("buttonComponentInsert");
$evt.addEventHandler(sbtn , "click", getListofCPBtnClick);
} 

function getListofCPBtnClick(e) {
//code will go here    
} 
```

**我的问题是：** 我需要从**插入 CP 窗口**中获取选定的组件和模板 ID。之前我能够通过更改 CME 扩展标准代码来获得它，但我不打算这样做，所以首先我试图初始化从我的 javascript 代码中“插入 CP 窗口”。我可以为该窗口创建事件处理程序，但我的问题是如何初始化它，以便在它初始化后我可以调用任何函数。如果我不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:09:25.600

您的脚本是否已加载到对话框中？

如果没有，阿尔伯特在这里展示了如何做到这一点：http: [//albertromkes.com/2012/01/30/tridion-gui-extensions-how-to-load-a-javascript-without-showing-a-gui-element /](http://albertromkes.com/2012/01/30/tridion-gui-extensions-how-to-load-a-javascript-without-showing-a-gui-element/)

然后，他还展示了如何监听事件以完成与您正在尝试做的事情类似的事情。

# android - 如何在 Android 模拟器中模拟陀螺仪

> ID：11625969
> 
> 赞同：10
> 
> 时间：2012-07-24T07:20:13.797
> 
> 标签：android, emulation, gyroscope

我正在尝试研究与陀螺仪相关的东西。我的手机没有内置陀螺仪。有没有办法在模拟器中包含陀螺仪功能，至少让模拟器设置为它的行为就像它有一个真正的陀螺仪一样？

ps 我不需要从陀螺仪中读取任何值，我只是想让模拟器认为它有一个。

我已经彻底搜索过，我发现的只是：[http ://code.google.com/p/openintents/wiki/SensorSimulator](http://code.google.com/p/openintents/wiki/SensorSimulator)

但这不会让模拟器感觉它有一个内置的陀螺仪，而是在模拟器中运行一个应用程序并从“SensorSimulator”中模拟的传感器获取读数。

任何信息都会有帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-11-08T09:17:14.233

[![在此处输入图像描述](../Images/6f1edc0d17487ee6120d4bab1727c6de.png)](https://i.stack.imgur.com/Tflpc.gif)

[与Android Studio 3.0](https://android-developers.googleblog.com/2017/05/android-studio-3-0-canary1.html)一起推出的 Android Emulator可以模拟一系列可能满足您的用例的旋转传感器。我们在 Android Emulator v26.1.0 中特别添加了[陀螺仪。](https://android.googlesource.com/platform/external/qemu/+log/emu-master-dev/android/android-emu/android/hw-sensors.h)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-13T05:07:33.837

Android Studio 3.0 的模拟器新支持陀螺仪，于 2017 年 5 月 17 日[发布到金丝雀频道](https://android-developers.googleblog.com/2017/05/android-studio-3-0-canary1.html)。请注意，（截至今天）Android Studio 2.3.3 是最新的官方（即“稳定”）版本。 [这是您如何设置](https://developer.android.com/studio/preview/install-preview.html)Android Studio的预览版，它可以与正式版同时存在。请注意，开箱即用的模拟器将不起作用，因为它不是最新的版本： [![在此处输入图像描述](../Images/c91e07a28b712e9f5b966c5c3e54dd1b.png)](https://i.stack.imgur.com/FiFO3.png)

您需要按照后一个链接中的“更改更新频道”步骤：选择**文件 > 其他设置 > 默认设置**并从 Canary 频道更新： [![在此处输入图像描述](../Images/9b409dbb3e54065905249d7f18e011d9.png)](https://i.stack.imgur.com/DYGQC.png) 请注意，在使用 Android 7+（又名 API 26）运行虚拟设备时*确实*显示模拟器的虚拟传感器（在扩展控制内）中的陀螺仪输出，它不会（至少）将该输出发送到虚拟设备；要在移动手机时实际看到示例应用程序中的环境移动，我必须使用 Android 7.1.1 (API 25)。

*（感谢@jamal-eason 的提示！）*

**以前（2017 年 6 月 12 日）：**

截至撰写本文时，Android Emulator 的***发布版本***（Android Studio 2.3.3 中）不*提供*陀螺仪支持。

虽然@Nesski 引用的文档表明了这一点，但我提供以下证据：

Android SDK 的[虚拟现实入门演示](https://developers.google.com/vr/android/get-started)是一款名为*寻宝*游戏。 这是在手机上播放时的[样子。](https://www.youtube.com/watch?v=p7l-2qpix7c)请注意，当玩家环顾四周时，相机会移动。

在与 Google Daydream 兼容的[少数设备](https://vr.google.com/daydream/smartphonevr/phones/)中——因为它们包含一个内部陀螺仪——Android Studio 的 AVD 管理器只提供其中两个：Pixel 和 Pixel XL。我为每部手机下载了两个虚拟设备，以便可以在每个设备上运行最新的两个 Android 版本（7.1.1 和 8.0）：

[![我在模拟器中测试的虚拟设备](../Images/c7b2841bbd97b0e7e71700e0b4e54ca2.png)](https://i.stack.imgur.com/nxTB5.png)

我在模拟器中运行了每个设备，得到了类似的结果：按`CTRL + SHIFT + C`（在 Windows 上）调出[Extended Controls](https://developer.android.com/studio/run/emulator.html#tasks)，您将能够测试手机的虚拟传感器：

[![在此处输入图像描述](../Images/0f4060961c4c859c5aa0e6518ccca42d.png)](https://i.stack.imgur.com/Yn1wL.png)

使用其旋转控件，您会注意到虽然有加速度计输出、磁力计输出和旋转输出，*但没有陀螺仪输出*。 **您可以像环顾四周一样旋转手机，但游戏的相机视图不会随着手机的移动而改变。**

虽然这个悲惨的现实是不幸的，但我确实希望并期待 Android 能够在未来为模拟器添加陀螺仪支持，因为更多的开发人员加入了 Google Daydream 虚拟现实的潮流。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-28T14:19:24.360

我认为模拟器中没有任何陀螺仪支持。

[source.android.com 的 Sensors 文档](https://source.android.com/devices/sensors/sensor-types.html#gyroscope)状态

> 陀螺仪无法基于磁力计和加速度计进行仿真，因为这会导致其局部一致性和响应性降低。它必须基于通常的陀螺仪芯片。

我正在研究类似的东西，所以我正在阅读要收集哪些数据以及不收集哪些数据。

# extjs - ext.direct 网格分页不起作用

> ID：11625970
> 
> 赞同：0
> 
> 时间：2012-07-24T07:20:15.237
> 
> 标签：extjs, grid, paging

我现在挣扎了几天，但没有成功。我没有通过我的网格进行分页，尽管分页栏显示了页面的数量和数量。这里有一些代码片段：

模型：

```
Ext.define('TBS', {
    extend: 'Ext.data.Model',proxy: {
        type: 'direct',
        api: {
            create:        QueryDatabase.createRecord,
            read:        QueryDatabase.getResults,
            update:        QueryDatabase.updateRecords,
            destroy:    QueryDatabase.destroyRecord
        },
        simpleSortMode: true
    }... 
```

店铺：

```
var store = Ext.create('Ext.data.Store', {
    model: 'TBS',
    autoLoad: true, 
    autoDestroy: true,
    pageSize: 20, 
    remoteSort: false,   
    sortOnLoad: true,
    sorters: { property: 'StartDate', direction : 'DESC' }... 
```

和网格：

```
var grid = Ext.create('Ext.grid.Panel', {...
    dockedItems: [{
        xtype: 'pagingtoolbar',
        dock: 'bottom',
        store: store,
        pageSize: 20, 
        displayInfo: true,
        displayMsg: 'Total: {2}',
        items: ['-',{
            xtype: 'button',
            iconCls: 'clean',
            text: 'Clear All Filter',
            handler: function () {
                //console.log(Ext.encode(grid.filters.getFilterData()));
                grid.filters.clearFilters();
                store.clearFilter();
            } 
        }]
    }] 
```

我正在使用 ExtJs 4.0.7

任何提示都非常感谢。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:56:20.787

What does your server return? It's up to your server to return the appropriate amount of records. For example, if it's loading page one, your server should only return the first 20 records. If it's loading page 2, it should only return records 21-40.

# android - 进程被杀死后重新启动Android应用程序

> ID：11625973
> 
> 赞同：15
> 
> 时间：2012-07-24T07:20:34.100
> 
> 标签：android, android-activity

当我的应用程序空闲时，Android 会终止该进程。如果用户在一段时间后重新打开应用程序，则只会创建顶部的 Activity - 这对我来说是个问题，因为该 Activity 依赖于其他对象的初始化（这些对象现在已被销毁）。

在这种情况下，我想做的是重新启动应用程序。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T07:26:03.863

只需确定您`Application`在之前被 Android 销毁后正在启动，您可以通过在自定义`Application`类中保留一个变量来执行此操作，并`true`在您的应用程序初始化后将其设置为。因此，当应用程序重新启动时，此标志为 false，然后只需`Intent`启动您的主要`Activity`指定`FLAG_ACTIVITY_CLEAR_TOP`：

```
Intent reLaunchMain=new Intent(this,MainActivity.class);
reLaunchMain.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(reLaunchMain); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T06:08:49.803

我想这个答案只适合你。

完成进度后调用这个

```
 finish();
        Intent intent = new Intent(this, sameactivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:24:10.083

您可能应该考虑将此类对象存储在应用程序的[`Application`](http://developer.android.com/reference/android/app/Application.html)类实现中。

如果这些对象包含需要更持久的状态，则应将此类对象的状态保存在每个 Activity 的`onPause()`方法中，保存到数据库、SharedPreferences 或远程。

# c# - 如何根据 numericupdown 值实时更改计时器间隔？

> ID：11625976
> 
> 赞同：8
> 
> 时间：2012-07-24T07:21:07.273
> 
> 标签：c#

我在里面有 Timer3 滴答事件，我将 timer3 间隔设置为 numericupdown 值：

```
private void timer3_Tick(object sender, EventArgs e)
        {
            try
            {
                Image iOLd = this.pictureBox1.Image;
                Image img = Image.FromFile(_files[_indx].FullName);
                trackBar1.Value = _indx;
                label23.Text = _files[_indx].Name;
                this.pictureBox1.Image = img;

                if (iOLd != null)
                    iOLd.Dispose();
                _indx++;

                if (_indx >= _files.Count)
                {
                    _indx = 0;
                    trackBar1.Value = 0;
                }
                timer3.Interval = Convert.ToInt32(numericUpDown1.Value); 
            }
            catch
            {

            }
        } 
```

我也在 numericupdown valuechanged 事件中做到了：

```
private void numericUpDown1_ValueChanged(object sender, EventArgs e)
        {
            timer3.Interval = Convert.ToInt32(numericUpDown1.Value);
        } 
```

问题是，例如，我在程序运行时将 numericupdown 值设置为 10000，并且它的移动速度非常慢，然后我立即将值设置为 1，因此当我将其更改为 1 时，timer3 间隔就会生效，它正在等待另一个周期10000 的值，则 timer3 间隔充当值 1。

我想要做的是，当我将 numericupdown 从 10000 更改为 1 时，它会立即更改，而不是等待另一轮 10000 值。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-24T07:26:04.713

假设您使用的是 Windows.Forms.Timer，那么您需要在更改间隔之前停止 Timer，然后重新启动它。

```
timer3.Stop();
timer3.Interval = Convert.ToInt32(numericUpDown1.Value); 
timer3.Start(); 
```

来自 MSDN

> 在您通过调用 Stop 禁用 Timer 后调用 Start 将导致 Timer 重新启动中断的间隔。如果您的 Timer 设置为 5000 毫秒间隔，并且您在大约 3000 毫秒时调用 Stop，则调用 Start 将导致 Timer 在引发 Tick 事件之前等待 5000 毫秒。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T07:24:23.917

您必须停止计时器，设置间隔，然后重新启动它。

```
timer3.Enabled = false;
timer3.Interval = ...;
timer3.Enabled = true; 
```

.NET 框架中有几个计时器实现，因此如果您使用的计时器与我在此处使用的不同计时器 (System.Timers.Timer)，您必须调用 Stop() 和 Start() 方法，而不是设置 Enabled。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:26:45.187

停止计时器，设置间隔，然后重新启动计时器。我希望它会工作

# ldap - 消息后 Ldap 启动停止

> ID：11625977
> 
> 赞同：0
> 
> 时间：2012-07-24T07:21:28.740
> 
> 标签：ldap

我正在尝试开始 slapd。当我输入以下命令时：

```
/usr2/dap/libexec/slapd \
   -f /usr2/dap/etc/openldap/slapd.conf \
   -h "ldap://localhost:9011" \
   -l local4 \
   -d 256 \ 
```

我收到消息“开始拍打”。它在此命令后停止。我不确定我的 sldap 是否已启动并正在运行。请帮我解决一下这个。

```
500e8937 slapd starting
500e8937 daemon: added 5r listener=0
500e8937 daemon: added 7r listener=82f0cb8
500e8937 daemon: select: listen=7 active_threads=0 tvp=NULL
500e8937 daemon: activity on 1 descriptor
500e8937 daemon: waked
500e8937 daemon: select: listen=7 active_threads=0 tvp=NULL 
```

它停在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:44:33.000

使用`ldapsearch`命令行工具确定服务器是否正在运行。例如，使用旧版 OpenLDAP 命令行工具：

```
ldapsearch -xLLL -H ldap://localhost:9011 -b "" -s base "(&)" + 
```

此命令将从[根 DSE](http://www.ldapguru.info/ldap/the-root-dse.html)检索操作属性。

编辑：`-xLLL`为简单的 LDIF 输出添加并强制使用简单的 BIND 而不是默认的 SASL。

# php - 使用 PHP 设置 jQuery DatePicker minDate

> ID：11625987
> 
> 赞同：0
> 
> 时间：2012-07-24T07:22:07.440
> 
> 标签：php, jquery, datepicker

我有以下代码来设置 DatePicker 的 minDate 但它不起作用。

```
$( "#arrival_date" ).datepicker('option','minDate',<?php echo $checkin ?>);
$( "#arrival_date" ).datepicker(); 
```

例如，如果 $checkin 的值为“7/29/2012”，则用户不能选择小于“7/29/2012”的日期。

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T07:29:02.243

这是一个工作示例：http: [//jsfiddle.net/ZTnr5/1/](http://jsfiddle.net/ZTnr5/1/)

您必须在设置选项之前定义日期选择器，并且必须引用日期字符串。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-24T07:28:19.423

试试看：

```
<?php $date = new DateTime($checkin); ?>
$( "#arrival_date" ).datepicker('option','minDate', new Date(<?php echo $date->format('Y'); ?>, <?php echo $date->format('m'); ?>, <?php echo $date->format('d'); ?>)); 
```

# git - git checkout-index 仅用于提交的文件

> ID：11625989
> 
> 赞同：1
> 
> 时间：2012-07-24T07:22:16.883
> 
> 标签：git

我目前正在使用以下命令导出 git 存储库：

`git checkout-index -f --prefix=$TARGET_PATH/ $GIT_REPO_PATH/*`

实际行为：导出发生在添加到索引的所有文件上。

期望的行为：导出所有不仅添加了，而且也提交了的文件。

我尝试使用`--stage`-option，但已提交和未提交文件的阶段为 0（我不得不说，我还不了解阶段编号。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T10:51:57.680

您不能在一个命令中执行此操作，您必须先将提交树中的文件加载到索引中。幸运的是，您不必使用您使用的普通索引：

```
$ export GIT_INDEX_FILE=.git/tmp-index
$ git read-tree HEAD && git checkout-index --prefix=/path/dir/ -f -a
$ rm "$GIT_INDEX_FILE" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:31:56.597

解决这个问题的一个简单、天真的解决方案是使用`git archive`. 它将从 git 历史中提取一棵树并将其写入标准输出。管道通过 tar 允许您将文件写入磁盘上的特定目录。

```
# HEAD to use latest committed version
git archive HEAD | tar x -C"/path/to/dir" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-26T17:56:46.250

我认为`git --work-tree=<path/to/wherever> checkout <HEAD/branch/hash> -- .`做你想要的。它将在（由 指定的路径）中创建（存在于指定提交中的每个文件）的副本`--work-tree`。

# android - 每行带有 RadioGroup 的 ListView

> ID：11625990
> 
> 赞同：2
> 
> 时间：2012-07-24T07:22:20.223
> 
> 标签：android, android-listview, textview, radio-group

![在此处输入图像描述](../Images/315f3044372c707fc794347788a54daa.png)

上面显示的是我的带有 TextViews 和 RadioGroup 的自定义列表视图。根据项目状态是“待处理”还是“已服务”，我更新待处理的项目-TextView（红色，在顶部）。一切都按预期工作，我能够在滚动时保留 RadioGroup 选择。

但是，当我滚动时，待处理的 Items TextView 不会保留其值。每当列表滚动时它就会改变。这是我的 getView 方法。

```
public View getView(final int position, View convertView, ViewGroup parent) 
{
    System.out.println(" --- position ---"+position+" --- isChecked[position] --- "+isChecked[position]);

    ViewHolder viewHolder = null;
    if(convertView == null)
    {

        convertView = layoutInflater.inflate(R.layout.order_status_listview_row, null);
        viewHolder = new ViewHolder();
        convertView.setTag(viewHolder);
    }
    else
    {
        viewHolder = (ViewHolder)convertView.getTag();
        convertView.setTag(viewHolder);
    }

    viewHolder.itemName = (TextView)convertView.findViewById(R.id.textview_order_status_item_name);
    viewHolder.itemQuantity = (TextView)convertView.findViewById(R.id.textview_order_status_item_quantity);
    viewHolder.radioGroup = (RadioGroup)convertView.findViewById(R.id.radiogroup_order_status_dialog);

//      isUserChanged[position] = false;
    viewHolder.radioGroup.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() 
    {           
        public void onCheckedChanged(RadioGroup group, int checkedId) 
        {
 //             if(isUserChanged[position])
            {
                switch(checkedId) 
                {
                    case R.id.radiobutton_served:
                         System.out.println(" --- radiobutton_served ---"+" position "+position+" isChecked[position] "+isChecked[position]);
                         count--;
 //                          countView.setText(DataHelper.getAppropriateCountValue(count));
                         isChecked[position] = true;
                         break;

                    case R.id.radiobutton_pending:
                         System.out.println(" --- radiobutton_pending ---"+" position "+position+" isChecked[position] "+isChecked[position]);
                         isChecked[position] = false;
                         count++;
 //                          countView.setText(DataHelper.getAppropriateCountValue(count));
                         break;             
                }
                countView.setText(DataHelper.getAppropriateCountValue(count));

            }
 //             isUserChanged[position] = false;
        }
    });

    viewHolder.radioGroup.setOnClickListener(new OnClickListener() 
    {
        public void onClick(View view) 
        {
 //             isUserChanged[position] = true;
        }
    }); 

    viewHolder.itemName.setText(orderList.get(position).getDishName());
    viewHolder.itemQuantity.setText(orderList.get(position).getDishQuantity());

    // change selection state for item checked when selection for radioButton changes
    if(isChecked[position])
        viewHolder.radioGroup.check(R.id.radiobutton_served);
    else
        viewHolder.radioGroup.check(R.id.radiobutton_pending);

    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T08:09:40.567

Dya，我做了一个小例子。

我的`Activity`包含 a`TextView`和 a `ListView`。ListView 填充了 20 个对象 (RowObject)，它们有自己的布局 (row.xml)。该代码非常简单，因此您可以毫无问题地阅读和理解它。

**activity_main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/mTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="0" />

    <ListView
        android:id="@+id/mListView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/mTextView" >
    </ListView>

</RelativeLayout> 
```

**行.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RadioGroup
        android:id="@+id/mRadioGroup"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <RadioButton
            android:id="@+id/mRadio1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="radio1" />

        <RadioButton
            android:id="@+id/mRadio2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="radio2" />
    </RadioGroup>

</LinearLayout> 
```

**行对象**

```
public class RowObject {

    private int ID;
    private boolean firstChecked; // else second checked

    public RowObject(int iD, boolean firstChecked) {
        super();
        ID = iD;
        this.firstChecked = firstChecked;
    }

    public boolean isFirstChecked() {
        return firstChecked;
    }

    public void setFirstChecked(boolean firstChecked) {
        this.firstChecked = firstChecked;
    }
} 
```

**主要活动**

```
public class MainActivity extends Activity {

    private TextView mCountTextView;
    private ArrayList<RowObject> mSource;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mSource = new ArrayList<RowObject>();
        for (int i = 0; i < 20; i++) {
            mSource.add(new RowObject(i, false));
        }

        mCountTextView = (TextView) findViewById(R.id.mTextView);

        ListView mListView = (ListView) findViewById(R.id.mListView);
        mListView.setAdapter(new RadioButtonAdapter(getApplicationContext(), mSource));
    }

    private class RadioButtonAdapter extends ArrayAdapter<RowObject> {

        class ViewHolder {
            RadioGroup rbGroup;
            RadioButton btn1;
            RadioButton btn2;
        }

        private LayoutInflater mInflater;

        public RadioButtonAdapter(Context context, ArrayList<RowObject> mSource) {
            super(context, R.layout.row, mSource);
            mInflater = LayoutInflater.from(context);
        }

        public View getView(final int position, View convertView, ViewGroup parent) {
            ViewHolder holder;

            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.row, null);

                holder = new ViewHolder();
                holder.rbGroup = (RadioGroup) convertView.findViewById(R.id.mRadioGroup);
                holder.btn1 = (RadioButton) convertView.findViewById(R.id.mRadio1);

                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }

            holder.rbGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                public void onCheckedChanged(RadioGroup group, int checkedId) {
                    switch (checkedId) {
                    case R.id.mRadio1:
                        mSource.get(position).setFirstChecked(true);
                        break;

                    case R.id.mRadio2:
                        mSource.get(position).setFirstChecked(false);
                        break;
                    }
                    mCountTextView.setText("There are " + getNumberOfFirstCheckedViews() + " first buttons selected");
                }
            });

            if (mSource.get(position).isFirstChecked()) {
                holder.btn1.setChecked(true);
                holder.btn2.setChecked(false);
            } else {
                holder.btn1.setChecked(false);
                holder.btn2.setChecked(true);
            }

            return convertView;
        }

        private int getNumberOfFirstCheckedViews() {
            int count = 0;
            for (RowObject object : mSource) {
                if (object.isFirstChecked()) {
                    count++;
                }
            }
            return count;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T07:42:47.357

我想我明白了。每当您滚动时，您都可以使用您的更改值或单选按钮

```
if(isChecked[position])
    viewHolder.radioGroup.check(R.id.radiobutton_served);
else
    viewHolder.radioGroup.check(R.id.radiobutton_pending); 
```

但是你在调用之前设置了一个监听器。所以每次都会调用监听器。

试试这个：

```
viewHolder.radioGroup.setOnCheckedChangeListener(null);

if(isChecked[position])
    viewHolder.radioGroup.check(R.id.radiobutton_served);
else
    viewHolder.radioGroup.check(R.id.radiobutton_pending);

viewHolder.radioGroup.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() 
    {           
        public void onCheckedChanged(RadioGroup group, int checkedId) 
        {
 //             if(isUserChanged[position])
            {
                switch(checkedId) 
                {
                    case R.id.radiobutton_served:
                         System.out.println(" --- radiobutton_served ---"+" position "+position+" isChecked[position] "+isChecked[position]);
                         count--;
 //                          countView.setText(DataHelper.getAppropriateCountValue(count));
                         isChecked[position] = true;
                         break;

                    case R.id.radiobutton_pending:
                         System.out.println(" --- radiobutton_pending ---"+" position "+position+" isChecked[position] "+isChecked[position]);
                         isChecked[position] = false;
                         count++;
 //                          countView.setText(DataHelper.getAppropriateCountValue(count));
                         break;             
                }
                countView.setText(DataHelper.getAppropriateCountValue(count));

            }
 //             isUserChanged[position] = false;
        }
    }); 
```

希望这会帮助你。

# perl - 如何关闭打印对话框？

> ID：11625992
> 
> 赞同：2
> 
> 时间：2012-07-24T07:22:27.977
> 
> 标签：perl, modal-dialog

我搜索了不同的模块来关闭打印对话框，但我没有任何可以在所有平台上工作的东西。

谁能帮助我了解 Perl 模块，这些模块将检查已打开的打印对话框并通过代码关闭它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:25:36.190

也许这个模块可以帮助你：

[http://metacpan.org/pod/Win32::GuiTest](http://metacpan.org/pod/Win32%3a%3aGuiTest)

如果没有，只需搜索一些通用的“win gui 测试”或“win32 ui 自动化”模块。

...这作为“最后的帮助”：[http](http://www.autohotkey.com/) : //www.autohotkey.com/ 当我在自动化编译时需要关闭编译器的模式对话框时，我使用了它。

在 Linux 上，您可以使用

wmctrl - [http://tomas.styblo.name/wmctrl/](http://tomas.styblo.name/wmctrl/)

用于控制几种窗口管理器

# java - 覆盖受保护的方法

> ID：11625998
> 
> 赞同：13
> 
> 时间：2012-07-24T07:23:11.597
> 
> 标签：java

我是 Java 新手，我有一个非常基本的问题。

我在同一个包下有 2 个父类。`Animal`抽象类和`Machine`类。

现在，`Animal`抽象类有一个受保护的方法。我知道如果类在同一个包下，则可以访问受保护的方法。

我可以在我的`Machine`类中访问该受保护方法，问题是.. 是否可以覆盖该受保护方法？不扩展`Animal`类。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-24T07:26:50.677

*   protected - 可以被子类覆盖，无论它们是否在同一个包中
*   默认（无访问修饰符）- 只有在两个类都在同一个包中时才能访问或覆盖

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-24T07:27:06.023

您只能通过扩展覆盖方法。

如果您愿意，可以使用匿名子类覆盖受保护的方法。例如

```
public class Animal {

    protected String getSound() {
        return "(Silence)";
    }

    public void speak() {
        System.out.println(getSound());
    }
} 
```

在另一个班级：

```
public static void main(String ... args) {

    Animal dog = new Animal() {

        @Override
        protected String getSound() {
            return "Woof!";
        }   
    }

    dog.speak();
} 
```

将输出：

```
Woof! 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T07:31:52.133

**不**，覆盖意味着从父类继承行为，如果不扩展类是不可能的。

```
public class PClass
{
    protected boolean methodA()
    {
        return true;
    }
}

public class CClass  extends PClass
{
    protected boolean methodA()
    {
        return false;
    }
} 
```

运行下面的代码来测试它

```
public static void main(String[] args) 
{

    PClass pc = new CClass();
    System.out.println(pc.methodA());

} 
```

`O/p=false`

在这里，我们覆盖了`methodA`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T07:53:20.280

**protected** 只能由其他包中的子类访问。同一个包中的类也可以访问受保护的字段、方法和构造函数，即使它们不是受保护成员类的子类。

**Override ：** 子类中具有相同签名的实例方法。

**你的问题的答案：**
但如果你不想`extends` `Animal class`在你的`Machine class`那么它不会覆盖它只是你自己班级的正常功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T07:46:41.333

根据定义覆盖说..

*子类中具有相同签名（名称，加上其参数的编号和类型）和返回类型作为超类中的实例方法的实例方法会覆盖超类的方法。*

因此，如果您不扩展超类，则 AFAIK 就无法覆盖该方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-24T07:28:04.967

为了覆盖一个方法，您必须扩展该类。这就是覆盖的意思：拥有一个与超类具有相同签名的方法。