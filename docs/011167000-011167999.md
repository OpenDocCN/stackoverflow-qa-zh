# StackOverflow 问答 11167000-11167999

# python - Python 多处理 EOF

> ID：11167003
> 
> 赞同：1
> 
> 时间：2012-06-23T05:03:10.803
> 
> 标签：python, python-2.7, multiprocessing

所以我遇到了一个非常奇怪的错误。我正在为一个*非常*基本的 TCP 服务器制作一个基本的小 GUI，但是当我生成该进程时，它返回以下回溯：

```
Exception in Tkinter callback
Traceback (most recent call last):
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 1410, in __call__
    return self.func(*args)
  File "C:\Users\username\Desktop\localssh\serverv2.py", line 48, in start_server
    process.start()
  File "C:\Python27\lib\multiprocessing\process.py", line 130, in start
    self._popen = Popen(self)
  File "C:\Python27\lib\multiprocessing\forking.py", line 271, in __init__
    dump(process_obj, to_child, HIGHEST_PROTOCOL)
  File "C:\Python27\lib\multiprocessing\forking.py", line 193, in dump
    ForkingPickler(file, protocol).dump(obj)
  File "C:\Python27\lib\pickle.py", line 224, in dump
    self.save(obj)
  File "C:\Python27\lib\pickle.py", line 331, in save
    self.save_reduce(obj=obj, *rv)
  File "C:\Python27\lib\pickle.py", line 419, in save_reduce
    save(state)
  File "C:\Python27\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Python27\lib\pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "C:\Python27\lib\pickle.py", line 681, in _batch_setitems
    save(v)
  File "C:\Python27\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Python27\lib\multiprocessing\forking.py", line 66, in dispatcher
    self.save_reduce(obj=obj, *rv)
  File "C:\Python27\lib\pickle.py", line 401, in save_reduce
    save(args)
  File "C:\Python27\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Python27\lib\pickle.py", line 548, in save_tuple
    save(element)
  File "C:\Python27\lib\pickle.py", line 331, in save
    self.save_reduce(obj=obj, *rv)
  File "C:\Python27\lib\pickle.py", line 419, in save_reduce
    save(state)
  File "C:\Python27\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Python27\lib\pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "C:\Python27\lib\pickle.py", line 681, in _batch_setitems
    save(v)
  File "C:\Python27\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Python27\lib\pickle.py", line 725, in save_inst
    save(stuff)
  File "C:\Python27\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Python27\lib\pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "C:\Python27\lib\pickle.py", line 681, in _batch_setitems
    save(v)
  File "C:\Python27\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Python27\lib\pickle.py", line 725, in save_inst
    save(stuff)
  File "C:\Python27\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Python27\lib\pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "C:\Python27\lib\pickle.py", line 681, in _batch_setitems
    save(v)
  File "C:\Python27\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Python27\lib\pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "C:\Python27\lib\pickle.py", line 681, in _batch_setitems
    save(v)
  File "C:\Python27\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Python27\lib\pickle.py", line 725, in save_inst
    save(stuff)
  File "C:\Python27\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Python27\lib\pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "C:\Python27\lib\pickle.py", line 681, in _batch_setitems
    save(v)
  File "C:\Python27\lib\pickle.py", line 313, in save
    (t.__name__, obj))
PicklingError: Can't pickle 'tkapp' object: <tkapp object at 0x02A4C4F0> 
```

我的代码如下：

```
import SocketServer
import multiprocessing
from Tkinter import *

class MyTCPHandler(SocketServer.BaseRequestHandler):
    """
    The RequestHandler class for our server.

    It is instantiated once per connection to the server, and must
    override the handle() method to implement communication to the
    client.
    """

    def handle(self):
        # self.request is the TCP socket connected to the client
        self.data = self.request.recv(1024).strip()
        print "{} wrote:".format(self.client_address[0])+str(self.data)
        #print self.data
        # just send back the same data, but upper-cased
        self.request.sendall(self.data.upper())

class Application(object):
    def __init__(self):
        self.root=Tk()
        self.root.resizable(FALSE,FALSE)
        self.root.geometry('500x500')
        self.root.title("Server GUI")
    def set_widgets(self):
        self.start_server_button=Button(self.root,text="Start Server",command=self.start_server)
        self.end_server_button=Button(self.root,text="Stop Server",command=self.stop_server)
        self.logger=Text(self.root,width=50)
    def grid_widgets(self):
        self.start_server_button.grid(row=1,column=0)
        self.end_server_button.grid(row=2,column=0)
        self.logger.grid(row=0,column=0)
    def configure(self):
        pass
    def run(self):
        self.set_widgets()
        self.grid_widgets()
        self.configure()
        self.root.mainloop()
    def start_server(self):
        self.logger.insert(END,"Starting process for client.")
        process=multiprocessing.Process(target=self.start_serving)
        process.start()
    def start_serving(self):
        HOST, PORT = "localhost", 9999
        self.server = SocketServer.TCPServer((HOST, PORT), MyTCPHandler)
        self.server.serve_forever()
    def stop_server(self):
        self.server.shutdown()
if __name__ == "__main__":
    Application().run() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T05:14:09.247

我不完全确定这是否会解决您的问题，但是，[另一个 stackoverflow 问题](https://stackoverflow.com/questions/5972445/problem-with-pickle-and-tkinter)可能有您正在寻找的答案。看来您需要将该`__getstate__()`方法添加到`Application`类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T05:22:26.590

`PicklingError: Can't pickle 'tkapp' object: <tkapp object at 0x02A4C4F0>`看起来您可能正在尝试将对象共享/发送到子流程，尽管隐含地，基本上`multiprocessing`默认情况下模块遵循`no share`方法，这意味着所有对象都被复制并发送到子流程，目标是更容易和更安全`true`的多线程系统，但以牺牲性能为代价。

Python 使用该`pickle`模块来序列化对象，因此，如果你不能序列化它，你就不能将它发送到子进程，还有第二个要求，该函数必须是可导入的，即：

```
def start_server(self):
    self.logger.insert(END,"Starting process for client.")
    process=multiprocessing.Process(target=self.start_serving)
    process.start() 
```

是一个成员函数，它实际上是不可导入的，多处理试图序列化它的所有成员变量，其中大部分无法序列化，尽管这是一种预感。

你可以试试这个，放在课外。

```
def start_serving():
    HOST, PORT = "localhost", 9999
    server = SocketServer.TCPServer((HOST, PORT), MyTCPHandler)
    server.serve_forever() 
```

假设您不需要任何进程间通信，如果需要，您可以使用多处理模块中的队列。

这就是您启动子流程的方式。

```
 def start_server(self):
    self.logger.insert(END,"Starting process for client.")
    self.process = multiprocessing.Process(target=start_serving) # make sure you keep a reference of the process.
    self.process.start() 
```

然后你可以杀死子进程。

```
def stop_server(self):
    self.process.terminate()

if __name__ == "__main__":
    Application().run() 
```

尽管我建议您使用`ThreadingMixIn`而不是手动创建子进程，但由于 GIL 而进程执行，我不确定它是否使用`thread`或`process`实际上`thread`并未在多核机器上运行。我已经测试过了，不幸的是你不能杀死子进程，`serve_forever`似乎正在阻塞......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-09T09:04:48.597

我遇到了同样的问题：

```
p=multiprocessing.Process(target=self.targetMethod) 
```

我将其更改为：

```
p=multiprocessing.Process(target=self.targetMethod()) 
```

我不再收到 EOF 错误。我不明白这里到底发生了什么。为时已晚，但希望它对某人有所帮助。

# php - jqplot - 如何在图例中显示标签及其值？

> ID：11167006
> 
> 赞同：2
> 
> 时间：2012-06-23T05:03:59.327
> 
> 标签：php, jquery, jqplot

是否可以在图例中显示标签及其值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T08:39:55.060

You can do it and more in `jqPlot`:

1.  Easiest: Set `labels` element of `legend` to an array of Strings that will be displayed in your legend, [shown here](http://jsfiddle.net/Boro/NYewy/39/).
2.  Do it yourself, as it is shown in the sample, [attached to this answer](https://stackoverflow.com/a/10428650/613495). There I used `$.jqplot.postDrawHooks` to act when graph is finished, since I also needed to do some customization of the legend labels, so I went all the way (i.e. I didn't set the `labels` element).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-27T12:00:51.820

```
<script src="JqPloatChart/plugins/jqplot.pointLabels.js"></script>
seriesDefaults: {renderer: $.jqplot.BarRenderer,pointLabels: { show: true },rendererOptions: {showDataLabels: true,}}, 
```

# android - Android：如何设置通过单击每个不同按钮选择的当前选项卡？

> ID：11167009
> 
> 赞同：1
> 
> 时间：2012-06-23T05:04:11.073
> 
> 标签：android, tabs

我有一个应用程序，其中第一页有三个按钮（例如 A、B、C 按钮）。当我单击这三个按钮中的任何一个时，它们将导航到相同的 tabActivity 页面。默认情况下，第一个选项卡被选中。但我想要的是，当我单击 A 按钮时，应该选择第一个选项卡。当我单击 B 按钮时，应该选择第二个选项卡。当我单击 C 按钮时，应该选择第三个选项卡。我不知道该怎么做。谁可以帮我这个事？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T06:11:14.270

尝试这个，

点击按钮 A

```
tabHost.setCurrentTab(0); 
```

点击按钮 B

```
tabHost.setCurrentTab(1); 
```

点击按钮 C

```
tabHost.setCurrentTab(2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T05:23:14.750

在你的活动课上试试这个，在我的应用程序中工作得很好。

```
Resources res = getResources(); // Resource object to get Drawables
        TabHost tabHost = getTabHost();  // The activity TabHost
        TabHost.TabSpec spec;  // Resusable TabSpec for each tab 
        Intent intent;  // Reusable Intent for each tab

            // Create an Intent to launch an Activity for the tab (to be reused) 
           intent = new Intent().setClass(this, ArtistsActivity.class);
            // Initialize a TabSpec for each tab and add it to the TabHost
            spec = tabHost.newTabSpec("artists").setIndicator("Artists",
                              res.getDrawable(R.drawable.ic_tab_artists))
                          .setContent(intent);
            tabHost.addTab(spec);

            // Do the same for the other tabs 
           intent = new Intent().setClass(this, AlbumsActivity.class); 
           spec = tabHost.newTabSpec("albums").setIndicator("Albums", 
                             res.getDrawable(R.drawable.ic_tab_albums))
                          .setContent(intent);
            tabHost.addTab(spec);

            intent = new Intent().setClass(this, SongsActivity.class);
            spec = tabHost.newTabSpec("songs").setIndicator("Songs",
                              res.getDrawable(R.drawable.ic_tab_songs)).setContent(intent);
            tabHost.addTab(spec);   
        } 
```

希望对你有帮助

# jquery - jquery 在 Windows Server 2003 R2 中无法按预期工作

> ID：11167011
> 
> 赞同：1
> 
> 时间：2012-06-23T05:04:29.680
> 
> 标签：jquery, asp.net

我在我的 asp.net 网站中使用 jquery。它在我的本地系统中运行良好。但是当我在服务器上发布它时它不起作用。我的jQuery代码如下，

```
 $("#<%=btnSubmit.ClientID %>").click(function (ev) {
    ev.preventDefault();
    $(this).attr("disabled", true);
    if ($("#<%=ddlLetterType.ClientID %>").val() == "-1") {
        alert("Please select a letter.");
        $("#<%=ddlLetterType.ClientID %>").focus();
        $("#<%=btnSubmit.ClientID %>").attr("disabled", false);
        return false;
    } else if ($("#<%=ddlLetterType.ClientID %>").val() == "1") {
        if ($("#<%=ddlEmbassyCountry.ClientID %>").val() == "-1") {
            alert("Please select an Embassy Country.");
            $("#<%=ddlEmbassyCountry.ClientID %>").focus();
            $("#<%=btnSubmit.ClientID %>").attr("disabled", false);
            return false;
        } else if ($("#<%=ddlTravelCountry.ClientID %>").val() == "-1") {
            alert("Please select a Travel Country.");
            $("#<%=ddlTravelCountry.ClientID %>").focus();
            $("#<%=btnSubmit.ClientID %>").attr("disabled", false);
            return false;
        } else if ($("#<%=txtEmbassyAddress.ClientID %>").val() == "") {
            alert("Please enter embassy address.");
            $("#<%=txtEmbassyAddress.ClientID %>").focus();
            $("#<%=btnSubmit.ClientID %>").attr("disabled", false);
            return false;
        } else if ($("#<%=txtPassportNo.ClientID %>").val() == "") {
            alert("Please enter passport no.");
            $("#<%=txtPassportNo.ClientID %>").focus();
            $("#<%=btnSubmit.ClientID %>").attr("disabled", false);
            return false;
        } else if ($("#<%=txtPlaceOfMeeting.ClientID %>").val() == "") {
            alert("Please enter place of meeting.");
            $("#<%=txtPlaceOfMeeting.ClientID %>").focus();
            $("#<%=btnSubmit.ClientID %>").attr("disabled", false);
            return false;
        } else if ($("#<%=txtStartDate.ClientID %>").val() == "") {
            alert("Please enter start date.");
            $("#<%=txtStartDate.ClientID %>").focus();
            $("#<%=btnSubmit.ClientID %>").attr("disabled", false);
            return false;
        } else if ($("#<%=txtEndDate.ClientID %>").val() == "") {
            alert("Please enter end date.");
            $("#<%=txtEndDate.ClientID %>").focus();
            $("#<%=btnSubmit.ClientID %>").attr("disabled", false);
            return false;
        } else {
            var parameter = {
                request_no: $("#<%=lblRequestNo.ClientID %>").text(),
                initiator_user_id: $("#<%=hInitiatorUserId.ClientID %>").val(),
                initiatingDate: $("#<%=lblRequestdate.ClientID %>").text(),
                embassy_country_id: $("#<%=ddlEmbassyCountry.ClientID %>").val(),
                embassy_address: $("#<%=txtEmbassyAddress.ClientID %>").val(),
                nationality: $("#<%=lblNationality.ClientID %>").text(),
                passport_no: $("#<%=txtPassportNo.ClientID %>").val(),
                company: $("#<%=lblCompanyName.ClientID %>").text(),
                designation: $("#<%=lblDesignation.ClientID %>").text(),
                joining_date: $("#<%=lblJoiningDate.ClientID %>").text(),
                travel_country_id: $("#<%=ddlTravelCountry.ClientID %>").val(),
                place_of_meeting: $("#<%=txtPlaceOfMeeting.ClientID %>").val(),
                travel_start_date: $("#<%=txtStartDate.ClientID %>").val(),
                travel_end_date: $("#<%=txtEndDate.ClientID %>").val(),
                letter_filename: $("#<%=lblRequestNo.ClientID %>").text() + "_business_letter",
                status: '2',
                hr_letter_type_id: $("#<%=ddlLetterType.ClientID %>").val()
            };
            $.ajax({
                type: "POST",
                url: "<%=ResolveUrl("~/HRLetterService.asmx") %>/RegisterHRLetterBusinessData",
                data: JSON.stringify(parameter),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    __doPostBack('<%=btnSubmit.ClientID.Replace("_", "$") %>', '');
                },
                error: function (msg) {
                    alert("Error in saving the request. Please contact your administrator by sending the screen shot to unify.admin@unilever.com");
                    $(this).attr("disabled", false);
                    return false;
                }
            });
        }
        }
.
.
.
. 
```

我没有发布所有代码，因为代码很好并且没有错误。但唯一的问题是 if 语句。if 和 else if 语句被执行，但 else 部分没有被执行。可能是什么问题？请你帮助我好吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T05:09:56.953

您的代码未包含在`ready`事件回调中。如果您的代码按原样放置在 head 中，它将在 html 存在之前触发，并且永远不会绑定到它正在寻找的元素，因为它们还不存在。

```
 $(function(){ // shorthand for $(document).ready(){

       /* html exists, run your code here*/

   }) 
```

如果这不能解决问题，请使用浏览器控制台检查抛出的错误

# c# - 我应该使用列表吗？

> ID：11167014
> 
> 赞同：3
> 
> 时间：2012-06-23T05:04:43.010
> 
> 标签：c#, asp.net, arrays, list, multidimensional-array

所以目前我有一个多维数组

```
string[,] items = new string[100, 4]; 
```

然后我收集所需的输入以将它们放入数组中，然后将它们显示在列表框中

```
items[itemcount, 0] = id;
items[itemcount, 1] = newprice;
items[itemcount, 2] = quant;
items[itemcount, 3] = desc;

listBox1.Items.Add(items[itemcount, 0] + "\t" + items[itemcount, 3] + "\t " + items[itemcount, 2] + "\t " + items[itemcount, 1]);
listBox1.SelectedIndex = listBox1.Items.Count - 1; 
```

因此，如果他们想从列表框中选择一个项目，用户可以删除该项目。当谈到删除一个项目时，我意识到数组不合适。那么我应该创建 4 个不同的列表并使用 list.Remove 方法来删​​除它们，还是有更好的方法让我不必处理 4 个不同的事情，而且用户使用 WinXP 运行较旧的计算机，我是否需要担心4 个不同列表的性能？有没有诸如多维列表之类的东西？

感谢您的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T05:09:56.737

您正在尝试重新发明一个类的实例列表。就像是

```
class Item {
  public int Id {get;set;}
  public double Price {get;set;}
  public double Quantity {get;set;}
  public string Description {get;set;}
}

var myItems = new List<Item>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T05:07:40.420

凭借您将使用的大量数据，您真的不应该看到任何性能问题。

任何类型的 Collection，无论是`List<T>`, `Dictionary<T, T>`,`IEnumerable<T>`还是任何你想使用的，它都会为你提供比数组更多的功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T05:13:52.493

看起来您有一种复杂类型，应该将其放入列表中。不确定名称是否正确，但这样的东西看起来像你想要的。

```
public class InventoryEntry
{
    public string Id {get;set;}
    public double NewPrice {get;set;}
    public int Quantity {get;set;}
    public string Description {get;set;}

    public override ToString()
    { 
           //return your specially formatted string here
    }
}
var items = new List<InventoryEntry>();
//add some items
//add them to your listbox
//etc... 
```

# java - Java：如何搜索和匹配较大图像的图像区域？

> ID：11167016
> 
> 赞同：0
> 
> 时间：2012-06-23T05:05:24.047
> 
> 标签：java, computer-vision

有什么 java 库可以让我搜索图片的给定区域？例如，我想在更大的图片中搜索特定图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T05:30:25.230

您可以考虑查看[imagej](http://rsbweb.nih.gov/ij/docs/concepts.html)的库来处理图像。[这个 stackoverflow 问题](https://stackoverflow.com/questions/3501811/what-is-the-best-open-source-pure-java-computer-vision-library)也有一些关于您可以使用的其他库的很好的链接。

为了解决在更大图像中搜索图像部分的实际问题，我建议您查看几个资源：[一篇关于基于区域的图像相似性搜索](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.103.1099&rep=rep1&type=pdf)、[聚类分析](http://en.wikipedia.org/wiki/Cluster_analysis)的论文，以及[另一篇关于高效基于区域的图像检索的文章](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.91.1369&rep=rep1&type=pdf)。

我找不到已经填补这个空白的 Java 库，所以你可能不得不自己动手。

# android - 使用 AlarmManager/BroadcastReceiver 在 Android 中每周一重复闹钟

> ID：11167025
> 
> 赞同：7
> 
> 时间：2012-06-23T05:06:26.910
> 
> 标签：android, broadcastreceiver, alarmmanager, android-alarms, repeatingalarm

我想在每周一上午 09:00 和下午 05:00 重复我的任务。我为此使用了以下代码，但我无法重复该任务。

**活动代码：**

```
public class AndroidScheduledActivity extends Activity {
    /** Called when the activity is first created. */
    int id = 115;
    Intent myIntent;
    PendingIntent pendingIntent;
    AlarmManager alarmManager;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button buttonStart = (Button)findViewById(R.id.start);

        myIntent = new Intent(getBaseContext(), MyScheduledReceiver.class);
        myIntent.putExtra("id", id);
        pendingIntent = PendingIntent.getBroadcast(getBaseContext(), id, myIntent, 0);

        alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

        buttonStart.setOnClickListener(new Button.OnClickListener(){
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                setForMonday();
                finish();
            }});
    }

    public void setForMonday() {
        Calendar calendar = Calendar.getInstance();

        calendar.set(Calendar.DAY_OF_WEEK,2);
        calendar.set(Calendar.HOUR,09);
        calendar.set(Calendar.MINUTE, 00);
        calendar.set(Calendar.SECOND, 0);
        calendar.set(Calendar.MILLISECOND, 0);
        System.out.println("Old is set@ :== " + calendar.getTime());

        long interval = calendar.getTimeInMillis() + 604800000L;
        System.out.println("Next Millis = " + interval);
        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), interval, pendingIntent);
    }
} 
```

**注意：我根据 86400000 * 7 = 604800000 计算区间；**

**接收者：**

```
public class MyScheduledReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        System.out.println("Receiver");
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-23T07:15:45.900

删除区间变量并使用以下内容代替它。

```
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),AlarmManager.INTERVAL_DAY * 7, pendingIntent); 
```

# javascript - 检查 DOM 中是否存在现有的 jQuery 对象（不是选择器）

> ID：11167030
> 
> 赞同：2
> 
> 时间：2012-06-23T05:07:50.673
> 
> 标签：javascript, jquery, dom

**例子：**

```
var $doesNotYetExistInTheDOM = $('<span/>'); // create new jQuery element
                                             // outside of the DOM
var $doesExistInTheDOM = $('span');  // selected element from the DOM 
```

有没有办法检查**DOM中是否存在****jQuery**选定对象？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T05:08:40.440

试试这个：

```
$('span').length // if exists it return > 0 or 0 
```

如果你想使用任何特定的检查`id`或`class`然后尝试：

```
$('span.some').length 
```

或者

```
$('span#some').length 
```

**使用你的变量：**

```
var $doesNotYetExistInTheDOM = $('<span/>');

$(document,$doesNotYetExistInTheDOM).length

var $doesExistInTheDOM = $('span'); 

$(document,$doesExistInTheDOM ).length 
```

jQuery 有一个方法称为**[`.size()`](http://api.jquery.com/size/)**（但`.length`首选）

**采用：**

```
$('span.some').size()

$('span#some').size()

var $doesNotYetExistInTheDOM = $('<span/>');

$(document,$doesNotYetExistInTheDOM).size() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T05:11:36.083

您可以通过尝试在文档中找到它来检查：

```
!!$(document).find($doesNotYetExistInTheDOM).length // false
!!$(document).find($doesExistInTheDOM).length // true 
```**

# android - 为什么 imageView 需要将上下文传递给它？

> ID：11167032
> 
> 赞同：0
> 
> 时间：2012-06-23T05:08:06.240
> 
> 标签：android, gridview, android-imageview, android-context

我正在尝试遵循有关构建 GridView 布局的教程，但是我看到上下文被传递给图像适配器，我不想复制代码或只是在不知道为什么要完成的情况下重新键入它，所以我想知道它为什么被传递。我对它是关于应用程序或其环境的信息有基本的了解。

```
import android.content.Context;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;

public class ImageAdapter extends BaseAdapter {
private Context mContext;

// Keep all Images in array
public Integer[] mThumbIds = {
        R.drawable.pic_1, R.drawable.pic_2,
        R.drawable.pic_3, R.drawable.pic_4,
        R.drawable.pic_5, R.drawable.pic_6,
        R.drawable.pic_7, R.drawable.pic_8,
        R.drawable.pic_9, R.drawable.pic_10,
        R.drawable.pic_11, R.drawable.pic_12,
        R.drawable.pic_13, R.drawable.pic_14,
        R.drawable.pic_15
};

// Constructor
public ImageAdapter(Context c){
    mContext = c;
}

@Override
public int getCount() {
    return mThumbIds.length;
}

@Override
public Object getItem(int position) {
    return mThumbIds[position];
}

@Override
public long getItemId(int position) {
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView = new ImageView(mContext);
    imageView.setImageResource(mThumbIds[position]);
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(70, 70));
    return imageView;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T05:17:33.803

ImageAdapter 将上下文存储在其构造函数中的 mContext 中，因为 ImageView 构造函数稍后需要它在自己的构造函数中。ImageView 和所有视图一样，需要一个上下文，通过它可以访问当前的主题、资源等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T05:28:28.113

检查此链接以获取更多信息[上下文信息](https://stackoverflow.com/questions/3183787/why-is-context-used-in-this-piece-of-code)以获取详细信息为什么它用于不同目的如果想查看上下文类[上下文类也请检查此链接](http://www.devdaily.com/java/jwarehouse/android/core/java/android/content/Context.java.shtml)

# jquery - 如何使用 SlideJS 显示连续的图像幻灯片链？

> ID：11167033
> 
> 赞同：0
> 
> 时间：2012-06-23T05:08:37.520
> 
> 标签：jquery, css, slider

我在我的网站上使用 SlidesJS (http://slidesjs.com/) 作为 JavaScript 图像滑块。如何更改 CSS 或 JavaScript 以允许图像同时显示在彼此的左侧和右侧？正如您在默认的 SlidesJS 图像滑块中看到的那样，一次只显示一张图像；但是，我希望同时显示多张幻灯片（主中心图像的左侧和右侧），类似于此站点的操作方式：http://www.reedandbarton.com/ 和此站点：[http ://www.freundevonfreunden.com/](http://www.freundevonfreunden.com/)

如果 SlidesJS 是不可能通过改变来实现这样的功能的，推荐一个 JavaScript 滑块可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T05:39:51.587

绝对有可能。

看到这个小提琴：http: [//jsfiddle.net/yFcch/](http://jsfiddle.net/yFcch/)

根据需要修改代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T05:24:04.390

查看您提供给网站的页面示例正在使用[easyslider](http://cssglobe.com/post/4004/easy-slider-15-the-easiest-jquery-plugin-for-sliding)查看该页面上的选项，您应该能够实现您想要的。

示例页面选项可以在[这里看到](http://www.freundevonfreunden.com/wp-content/themes/fvonf/js/script.js)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-23T07:02:41.473

我想你想要这样的东西。我相信它会帮助你：

[https://dl.dropbox.com/u/19982181/easyslider1.7.zip](https://dl.dropbox.com/u/19982181/easyslider1.7.zip)

# visual-studio-2008 - 如何将 ws2tcpip.h 和 ws2def.h 包含到 Visual C++ 2008 项目中？

> ID：11167041
> 
> 赞同：0
> 
> 时间：2012-06-23T05:09:48.563
> 
> 标签：visual-studio-2008, visual-c++, network-programming, winsock, winsock2

我是 Visual C++ 的新手。我在 Windows XP 中安装了 Visual C++ 2008 Express Edition（带有 SP1）。我正在尝试编译一个开源 Visual C++ 项目。

我已经`.vcproj`在 VC++ 2008 Express 中打开了这个项目。当我使用 Build > Rebuild Solution 时，它显示以下输出：

```
3 error(s)
========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ========== 
```

以下是3个错误：

```
error C3861: 'IN6_IS_ADDR_MULTICAST': identifier not found

error C2065: 'IPPROTO_IPV6' : undeclared identifier

error C2065: 'IPPROTO_IPV6' : undeclared identifier 
```

我已经在谷歌上搜索了很长时间。我发现这些标识符在以下文件中可用：

*   `ws2tcpip.h`

*   `ws2def.h`

*   `winsock2.h`

如果我没记错的话，Windows 开发人员使用这些文件进行网络/套接字编程。它应该在 Windows 的某个地方可用。

`error C2065: undeclared identifier`我可以知道和有什么区别`error C3861: identifier not found`吗？

如何包含`ws2tcpip.h`并`ws2def.h`进入 Visual C++ 2008 项目？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:29:39.987

就像#在适当的文件中包含这些标题一样简单吗？

```
#include <winsock2.h>
#include <ws2tcpip.h> 
```

请注意，winsock2.h 必须在 ws2tcpip.h*之前*被#included ，否则您将收到诸如“ip_mreq::imr_multiaddr 使用未定义的 struc in_addr”和“字节不是 in6_addr::__unnamed 的成员”之类的编译错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-02T02:20:25.760

> [WIN32_LEAN_AND_MEAN 宏可防止 Winsock.h 包含在 Windows.h 标头中。](https://msdn.microsoft.com/en-us/library/windows/desktop/ms737629(v=vs.85).aspx)

```
#ifndef WIN32_LEAN_AND_MEAN
#define WIN32_LEAN_AND_MEAN
#endif 
```

或添加项目 - 指令 WIN32_LEAN_AND_MEAN

# iphone - Pickerview：如何将 2 个单独的代码合并到 1 个地方？

> ID：11167048
> 
> 赞同：0
> 
> 时间：2012-06-23T05:10:48.717
> 
> 标签：iphone, ios5, xcode4.3

如何把这段代码放在下面？

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    NSString *year = [dateYear objectAtIndex:[picker selectedRowInComponent:0]];
    NSString *month = [dateMonth objectAtIndex:[picker selectedRowInComponent:1]];
    NSString *day = [dateDay objectAtIndex:[picker selectedRowInComponent:2]];
    labelDate1.text = [year stringByAppendingFormat:@" : %@ : %@", month, day];
} 
```

到这里？

```
- (IBAction)setDateBtn1:(id)sender {
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    viewPicker.frame = CGRectMake(0, 0, 320, 460);
    [UIView commitAnimations];
} 
```

我的问题是，我有两个用于 labelDate1 的按钮 setDateBtn1 和用于 labelDate2 的 setDateBtn2，这两个按钮都调用一个 pickerView 来获取显示在每个标签上的输入数据。选择日期后，它只出现在 labelDate1 中，无论我调用什么按钮我的pickerview，但我想要的是 labelDate1 的 setDateBtn1 和 labelDate2 的 setDateBtn2。我希望你能理解我的英语。对于任何帮助，非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T05:29:25.523

您需要有一个属性来保存“活动”标签。当按下按钮 1 时，将此属性设置为标签 1。当按下按钮 2 时，将其设置为标签 2。

然后，在上面显示的选择器视图委托方法中，更新活动标签，而不是像现在那样总是更新标签 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T05:28:58.533

如果我正确理解您的问题，您有一个选择器方法，但有两个按钮（或标签），其中任何一个都可以调出您的选择器。在选择器中选择某些东西应该设置 label1 或 label2。

所以... 这是您利用选择器视图的 " `tag`" 属性的机会。

调出选择器时，将“ `viewPicker.tag`”设置为“ `1`”（用于标签 1）和“ `2`”，如果标签 2 的按钮调出选择器。

然后，在您的 " `didSelectRow`" 函数中，您将知道您正在为哪个标签进行挑选。你可以这样做：

```
if(pickerView.tag == 1)
    labelDate1.text = [year stringByAppendingFormat:@" : %@ : %@", month, day];
else
    labelDate2.text = [year stringByAppendingFormat:@" : %@ : %@", month, day]; 
```

希望我能很好地解释这一点，让你继续前进。

# javascript - 我如何从一些文本子节点访问特定文本 使用 javascript？

> ID：11167049
> 
> 赞同：1
> 
> 时间：2012-06-23T05:11:20.400
> 
> 标签：javascript, regex

```
<html>
<head></head>
<body>
<div class="mtb-desc">
    some contentsome contentsome contentsome  contentsome contentsome contentsome contentsome content.

    some contentsome contentsome contentsome entsome contentsome contentsome contentsome contentsome.

    NO : 212122Name is Jone</div>
<span class="mtb-price">
<label Class="mtb-ofr"><b class="lb1"></b>WWWW</label></span>
<script>
var eg1 = document.querySelectorAll('.mtb-desc')[0].childNodes[0].split(null)[1].nodeValue;
var eg2 = document.querySelectorAll('.mtb-ofr')[0].childNodes[1].nodeValue = eg1;
alert(eg2);
</script>
</body>
</html> 
```

在上面的代码中，我想用文本 Name is Jone 替换 WWWW。那么我如何从该文本节点访问“Name is Jone”文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T05:35:31.773

要匹配结尾的非数字文本并将其插入 WWWW 所在的位置，请执行以下操作：

```
var content = document.querySelectorAll('.mtb-desc')[0].innerText;
var insertion = content.match(/[^0-9]+$/)[0];
document.querySelectorAll('.mtb-ofr')[0].innerText = insertion; 
```

# android - 如何在移动设备上运行应用程序时查看目录日志

> ID：11167053
> 
> 赞同：0
> 
> 时间：2012-06-23T05:11:50.947
> 
> 标签：android, android-logcat

我有一个在移动设备上经过最佳测试的应用程序，但我也喜欢查看 catlog 输出。在移动设备上运行时如何查看目录日志？

编辑：对不起，我不清楚。你知道当你在桌面模拟器上运行应用程序时，eclipse 会输出 logcat 的输出吗？但是当我在移动设备上运行我的应用程序时，我希望看到 logcat 的输出，以便更好地测试它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T05:36:29.393

```
in case if you want to see on eclipse : 

Make the debug mode true in manifest. (before making built)
Attach the device in to cumputer using USB cable .
Install the driver (if needed ) 
see the device in the DDMS device section(if not found then restart adb)
click on the device name in device section 
```

# django - 在将 facebook-connect 与 django 集成时卡住了

> ID：11167054
> 
> 赞同：1
> 
> 时间：2012-06-23T05:11:52.900
> 
> 标签：django, facebook

我正在使用[https://github.com/ryanmark/django-facebookconnect](https://github.com/ryanmark/django-facebookconnect)将 facebook-connect 与我的 django 支持的网站一起使用。但是，我被困在不同的地方。我无法获得我的朋友列表、他们的信息和许多其他东西。

有没有人成功地实现了 facebook-connect ？或者您会推荐另一个第三方 facebook-connect 应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T03:22:32.910

最后我有一个很好的解决方案。感谢 Nitzan Tomer，我有一个工作的 facebook 应用程序。 [http://github.com/ryanmark/django_facebook_oauth](http://github.com/ryanmark/django_facebook_oauth)

# mysql - 如果我似乎需要将一个表的列名存储在另一个表中，我是否应该重新考虑我的数据库设计？

> ID：11167057
> 
> 赞同：4
> 
> 时间：2012-06-23T05:12:21.263
> 
> 标签：mysql, database, database-design

我对数据库设计非常陌生，并且我从客户那里得到了相当高的订单，他们的数据中有一些非常复杂的关系。我正在尝试做的是根据客户的条件编写推荐产品的逻辑。但是，根据各种其他数据位的值，需要应用一些有趣的过滤器。例如，某些产品仅适用于 {men|women}，因此根据 say 的值`customers.customer_gender`不推荐该产品。

当然，我可以在 PHP 中完成这一切，但如果我可以在数据库中表示它并让它们成为它的表单接口，那就更好了。这样他们就可以在添加新产品时自定义和修改这些关系，而无需重新雇用我来自定义代码！那么，我的问题是缺乏经验。我不清楚我应该如何在表格中表示这些信息。

**编辑1——尝试一个例子**

假设您有以下表格：

顾客

```
id   name      gender
--   ----      ------
 1   Bob       male
 2   Mary      female
 3   Steve     male 
```

健康）状况

```
id    name
--    ----
 1    Headaches
 2    Allergies
 3    Low Energy 
```

产品

```
id    name              description
--    ----              -----------
 1    Product A         anti-allergy
 2    Product B         energy booster
 3    Product C         pain reliever 
```

以及一些使用外键定义它们之间关系的进一步表，例如在什么条件下推荐什么产品（连接产品 id 和条件 id 的两列表），以及什么客户有什么条件。

现在，例如，我有一些只能推荐给男性的产品。或仅适用于对咖啡因不敏感的人。或者谁有某种严重程度的某种条件（其中严重程度是表中连接客户和条件的附加列，包含 1-3 的 int 值）。如何在纯数据库表中表示这些类型的关系（“为条件 Y 推荐产品 X，表达式 Z 除外”）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T12:43:18.073

你可以用这样的模型解决这个问题：

![ERD](../Images/9bec290b1ac32a6ca392acc15f6173c5.png)

有两个关键要素可以帮助您解决设计问题。

1.  有表格来指示产品何时适用以及产品何时不适用的规则。

2.  在`CONDITION`表格中包括任何可能涉及赞成或反对规则的情况。

例如：“有子宫”的患者禁用伟哥。

`CONDITION_SEVERITY`意味着患者有这种情况，它还允许您记录您需要使用的任何等级的分数，以说明病情有多严重。`INDICATIONS`您可以在和表中使用类似的严重性分数`CONTRAINDICATIONS`来表示产品仅在条件*至少如此糟糕时适用，或者如果条件**如此糟糕或更糟*则不应使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T05:25:44.747

您的标题的答案是肯定的**，**这永远不是必需的。如果您想制作一个可扩展的条件列表，您可以在静态表结构中定义它。考虑这样的事情。

1.  客户表：id、name 等

2.  产品表：id、product_name 等

3.  属性表：id、年龄、性别等

4.  *属性值表：id、attribute_id（指向属性*的外键链接）、值

5.  客户属性表：id、customer_id（FK to *customers*）、attribute_id（FK to *attributes*）

6.  推荐表：id、attribute_id（FK to *attributes*）、attribute_value_id（FK to *attribute values*）、product_id（FK to *products*）

这里#6 将是你推荐引擎的核心，将给定的属性链接到给定的产品。

这只是一个示例，但我的意思是，您可以创建一个干净的、完全可扩展的静态数据库结构；无需求助于动态表和列名之类的疯狂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T05:26:04.943

考虑这个设计：

**表**

*   用户（用户 ID PK）
*   药物（MedicationID PK）
*   症状（症状 ID PK）
*   严重性（SeverityID PK）
*   治疗（TreatmentID PK）

**示例数据**

用户

```
UserID    Username          
1         john.smith   
2         jane.doe
3         bob.jones 
```

药物

```
MedicationID    Name
1               Tylenol
2               Excedrin
3               Morphine
4               Midol
5               Tums
6               Pepto
7               Anzemet 
```

症状

```
SymptomID   Name          
1           Headache        
2           Cramps   
3           Vomiting       
4           Dizziness 
```

严重性

```
SeverityID   Name 
1            Feels bad
2            Feels really bad
3            I want to die 
```

治疗

```
TreatmentID  SymptomID    SeverityID   MedicationID
1            1            1            1
2            1            2            2
3            1            3            3
4            2            1            1
5            2            2            4
6            2            3            2
7            3            1            5
8            3            2            6
9            3            3            7 
```

使用上面的数据`User`可以进来说，我头疼（`SymptomID of 1`），严重程度为`2`。那会建议吃药`Excedrin`。

治疗表可以根据症状和严重程度建议药物。

```
SELECT m.Name AS MedicationName
      ,sy.Name AS SymptomName
      ,sev.Description AS SeverityDescription
FROM Treatments AS t
INNER JOIN Medication AS m
  ON t.MedicationID = m.MedicationID
INNER JOIN Symptoms AS sy
  ON t.SymptomID = sy.SymptomID
INNER JOIN Severity AS sev 
 ON t.SeverityID AS sev.SeverityID 
```

# c# - xna 在执行期间删除图形窗口

> ID：11167059
> 
> 赞同：-1
> 
> 时间：2012-06-23T05:12:39.980
> 
> 标签：c#, xna

由于我不会为我的应用程序使用图形，我想知道如何删除在执行期间总是出现的 xna 窗口。我试图注释掉与图形相关的所有内容，但仍然会弹出窗口。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T10:38:52.833

XNA`Game`类，事实上，整个`Microsoft.Xna.Framework.Game.dll`程序集在 XNA 中是可选的。***要不***使用它，您可以：

1) 删除您的游戏类（项目中的类派生自`Game`）和在`Program.cs`. 将其替换为您要使用的任何接口代码。`Microsoft.Xna.Framework.Game.dll`如果您不使用其中的任何内容，则可以删除对的引用。

或者

2）创建所需类型的新项目。然后将对所需 XNA 程序集的引用添加到该项目。请注意，此项目将无法直接包含 XNA 内容项目参考（您可以使用“XNA 游戏库”项目作为中间人）。

请注意，`Game`在 XNA 中不使用很多东西是行不通的，除非您自己实现一些`Game`通常提供的服务。例如，没有 - 就不能使用任何与图形相关的东西（例如：）`Texture2D`，`GraphicsDevice`因此您必须自己创建一个。

您还需要`FrameworkDispatcher.Update()`定期调用（通常`Game`每帧调用一次）以正常工作 - 特别是音频播放。

# php - CURLOPT_FOLLOWLOCATION 错误

> ID：11167061
> 
> 赞同：1
> 
> 时间：2012-06-23T05:13:04.867
> 
> 标签：php, curl

我正在 php 中执行 curl 发布过程以获取响应页面内容。我得到这个错误

警告：curl_setopt() [function.curl-setopt]: CURLOPT_FOLLOWLOCATION 在安全模式下无法激活或在第 58 行的 /var/www/domain/httpdocs/housesearch.php 中设置了 open_basedir

通过在 htaccess 文件中添加以下代码，我遵循了几条指令，例如 htaccess 修改

```
php_flag safe_mode off
php_flag open_basedir off
php_value open_basedir none 
```

但我又遇到了同样的错误。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:30:27.243

这是我在 PHP.Net 手册中读到的最好的评论之一。它解释了为什么会出现问题，但不一定是为什么。

当您使用 php_flag 或 php_value 更改设置时，您不会更改 PHP 核心的设置，而是在运行时更改设置。因此，某些设置无法被第 3 方 API 或扩展检测或解码。

您需要对`php.ini`文件进行硬更改，删除`open_basedir`指令或使用上面链接中包含的第 3 方功能。

# c++ - 为什么这不能作为成员函数中的默认参数传递？

> ID：11167062
> 
> 赞同：7
> 
> 时间：2012-06-23T05:13:08.893
> 
> 标签：c++

我试图将长度的当前值作为默认参数作为函数参数传递。但编译器显示错误

> “'this' 不能在这种情况下使用”

谁能告诉我我犯了什么错误。?

```
class A
{

    private:
    int length;
    public:
    A();
    void display(int l=this->length)
    {
        cout<<"the length is "<<l<<endl;
    }

};

int main()
{

    A a;
    a.display();    
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-23T05:18:07.067

您的成员函数：

```
void display(int l=this->length) 
```

在概念上等价于：

```
void display(A * this, int l=this->length); //translated by the compiler 
```

这意味着，您在表达式中使用了一个参数，该参数是 C++ 中不允许的其他参数的默认参数，如 §8.3.6/9 (C++03) 所述，

> 每次调用函数时都会评估默认参数。*函数参数的求值顺序未指定*。**因此，函数的参数不应在默认参数表达式中使用**，即使它们没有被评估。

请注意，C++ 不允许这样做：

```
int f(int a, int b = a); //illegal : §8.3.6/9 
```

* * *

解决方案是添加一个不带参数的重载：

```
void display()
{
    display(length); //call the other one!
} 
```

如果您不想再添加一个函数，请为参数*选择一个不可能的默认值*。例如，由于它描述的*长度*永远不会是负数，那么您可以选择`-1`作为默认值，并且您可以将您的函数实现为：

```
void display(int l = -1)
{
      if ( l <= -1 ) 
           l = length; //use it as default value!
      //start using l 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T05:20:05.973

您可以改为用户重载和转发。

```
class A
{
    private:
    int length;
    public:
    A();

    void display()
    {
        display(this->length);
    }

    void display(int l)
    {
        cout<<"the length is "<<l<<endl;
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T05:18:08.530

在编译时，没有对象，所以没有 this。

如果成员函数可以访问属性本身，为什么要将对象的属性之一作为默认值传递给成员函数？

# jquery - jQuery反弹没有触发

> ID：11167063
> 
> 赞同：1
> 
> 时间：2012-06-23T05:13:48.577
> 
> 标签：jquery, bounce

这是hy头底部的样子：

```
$('#hello').mouseenter(function() {
$(this).effect("bounce", { times:1, distance:10 }, 800);
}); 
```

我正在链接到 jQuery 1.7.2 和 jQuery UI 1.8。我没有收到任何错误，但是当我将鼠标悬停在#hello div 上时，什么也没有发生。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T05:24:41.017

你的 jQuery 代码看起来不错，所以很可能你错过了这个`document ready`块

所以添加`doc ready`处理程序

```
$(function() {

    $('#hello').mouseenter(function() {
        $(this).effect("bounce", {
            times: 1,
            distance: 30
        }, 800);
    });   
});​ 
```

它将确保代码在`DOM`准备好时触发。

如果你只是`$("#hello").mouseenter(...)`不使用 any ，那么当DOM 中还`doc ready block`没有任何元素时，这段代码就有可能运行。`id hello`所以`$("#hello")`将返回一个空集并且`mouseenter`绑定将不起作用。

一个示例标记，如果没有它就无法工作`doc ready block`，

```
.
.
.
<script type="text/javascript">
    $("#hello").mouseenter(....);
</script>
.
.
.
.
<div id="hello">Blah Blah....</div> 
```

作为浏览器，按顺序解释标记，一遇到js代码就会执行。而当它在这里执行 JS 块时，它还没有解析`<div id="hello">`标签，因为它出现在 JS 块之后，所以它们当时不在 DOM 中。

所以对于上述情况`$("#hello")`是空的，因此事件绑定将不起作用。因此，将所有 JS 代码放在`document ready`块中总是安全的，例如

```
$(function){
   // put all your JS code here
}); 
```

阅读更多[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

# r - ggplot2中的白色填充

> ID：11167067
> 
> 赞同：0
> 
> 时间：2012-06-23T05:14:59.667
> 
> 标签：r, ggplot2

我不知道如何为这个 ggplot2 图表获得白色填充。

```
set.seed(12345)
Row <- rep(x = 1:4, times = 3)
Col <- rep(x = 1:3, each = 4)
Trt <- c("A", "B", "A", "C", "D", "B", "C", "D", "A", "C", "B", "B")
Y   <- rnorm(n = 12, mean = 0, sd = 1)
Y2 <-  paste(Trt, round(Y, 3), sep = "=")
Y3 <- rep(x = 1, times = 12)

dat <- data.frame(Row, Col, Trt, Y, Y2, Y3)

library(ggplot2)

p <- ggplot(data =  dat, aes(x = Row, y = Col)) +
      geom_tile(aes(fill = Y3, colour = "white"), colour = "black") +
      geom_text(aes(label = Trt, colour = Trt),  vjust = -1) +
      geom_text(aes(label = round(Y, 3), colour = Trt), vjust = 1)+
      labs(x = NULL,y = NULL) +
      opts(axis.ticks = theme_blank(), axis.text.x = theme_blank(), axis.text.y = theme_blank()) +
      opts(legend.position="none")

p 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T05:38:50.603

相信你想要`geom_tile(colour='black', fill='white')`。

# regex - 使用 Notepad++ 是否有示例代码的正则表达式快捷方式？

> ID：11167070
> 
> 赞同：1
> 
> 时间：2012-06-23T05:15:35.370
> 
> 标签：regex, expression, notepad++, shortcut

在 Notepad++ 中使用正则表达式并查找与以下两个数据示例中的模式匹配的数据行，除了我提供的表达式之外，我还可以使用更短或更有效的表达式吗？

上升 0640 设置 1933 (:) 12h 52m 58s - 2m 06s 106

上升 0640 设置 1931 (:) 12h 50m 51s - 2m 07s 106

上升 [0-9][0-9][0-9][0-9] 设置 [0-9][0-9][0-9][0-9] (:) [0-9] [0-9]h [0-9][0-9]m [0-9][0-9]s - [0-9]m [0-9][0-9]s [0-9 ][0-9][0-9]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T05:27:51.407

您可以继续从您提供的原始正则表达式中缩短它。

这是第一次压缩：

```
rise \d{4}\sset\s\d{4}\s\(:\)\s\d{2}h\s\d{2}m\s\d{2}s\s-\s\dm\s\d{1,}s\s\d{1,} 
```

我知道这可以进一步缩短，但为了解释：

```
\d{4} --- Matches 4 digits
\s    --- Matches space
\d{2}[h,m,s]+ --- Matches 2digits followed by h, m, s
\d{1,} --- matches one or more of the digit pattern 
```

由于 Notepad++ 不支持 \d{4}

```
rise \d+\sset\s\d+\s\(:\)\s[\d,\s,h,m,s]+-\s\dm\s\d+s\s\d+ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T05:27:58.703

如果它类似于常规正则表达式，那么这里有一个与您的正则表达式等效的较短版本：`rise \d{4} set \d{4} \(:\) \d\dh \d\dm \d\ds - \dm \d\ds \d{3}` 您忘记转义括号。

[您可以在这个非常方便的网站上](http://regexpal.com/)测试各种正则表达式模式

当然，它可以缩短，但你很可能会受到准确性的影响，如果你有很多数据，你可能会得到误报。为简洁而失去准确性的快速示例是`rise \d{4} set \d{4} \(:\) [0-9hms -]+? \d{3}`.

这取决于您的数据集以及是否要牺牲可读性。`[a-z0-9 ]+? \(:\) [0-9hms -]+? \d{3}` 尽管您确实在允许的范围内推动它，但这仍然匹配。

决定权在你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T05:30:31.513

我不使用记事本++，但假设它使用正确的正则表达式，这有效：

```
rise \d{4} set \d{4} \(:\) \d{2}h \d{2}m \d{2}s - \dm \d{2}s \d{3} 
```

不过，您实际上并不需要匹配“(:)”，所以这会更简单一些：

```
rise \d{4} set \d{4}.*\d{2}h \d{2}m \d{2}s - \dm \d{2}s \d{3} 
```

或者，如果您想捕获匹配的数字以进行反向引用（\1、\2 等），请在数字周围使用括号：

```
rise (\d{4}) set (\d{4}).*(\d{2})h (\d{2})m (\d{2})s - (\d)m (\d{2})s (\d{3}) 
```

如果你真的信任你的数据，你可以用“*”接受任意数量的数字：

```
rise (\d*) set (\d*) .* (\d*)h (\d*)m (\d*)s - (\d*)m (\d*)s (\d*) 
```

（请注意，在最后一个示例中，我将空格放回“。*”，否则“。* ”将匹配直到“h”的数字。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T06:55:46.420

感谢所有的反馈，我知道我要求一种更短或更有效的方式来编写代码，但是在使用它之后，我真正想要的是一个可以处理单位数和两位数时间单位的表达式。所以下面是我想出的，它适用于我提供的数据，但再次......谢谢！

上升\s[0-9]+\sset\s[0-9]+\s\(\:\)\s[0-9]+h\s[0-9]+m\s[0- 9]+s\s-\s[0-9]+m\s[0-9]+s\s[0-9]+

上升 0640 设置 1933 (:) 12h 52m 58s - 2m 06s 106

上升 640 集 1931 (:) 12h 50m 1s - 2m 07s 3

上升 0640 设置 1931 (:) 12h 50m 51s - 2m 07s 99

上升 0640 设置 1931 (:) 12h 9m 51s - 2m 07s 106

上升 0640 设置 931 (:) 9h 50m 51s - 2m 07s 106

# c++ - 在 C++ 中创建 XML 表

> ID：11167073
> 
> 赞同：0
> 
> 时间：2012-06-23T05:16:20.917
> 
> 标签：c++, xml, binaryfiles, xmltable

我用 C++（GNU 编译器）创建了一个包含 100,000 条员工记录的二进制文件。现在我需要使用 c++ 创建包含 100,000 条员工记录的 XML 表。但我不知道如何使用 C++ 代码创建 XML 表。是否有任何示例代码或教程可用于执行此程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T05:55:26.223

这是简单的人为示例

```
#include <iostream>
#include <vector>
#include <string>

class Employee
{
   public:
      Employee(const std::string &firstname, const std::string &lastname, int salary)
         :firstname_(firstname), lastname_(lastname), salary_(salary)
      {
      }
      friend std::ostream &operator<<(std::ostream &os, const Employee &rhs)
      {
         rhs.print(os);
         return os;
      }
   private:
      void print(std::ostream &os) const
      {
         os << "<employee>";
         os << "<firstname>" << firstname_ << "</firstname>";
         os << "<lastname>" << lastname_ << "</lastname>";
         os << "<salary>" << salary_ << "</salary>";
         os << "</employee>\n";
      }
      std::string firstname_;
      std::string lastname_;
      int salary_;
};

int main(int argc, char *argv[])
{
   std::vector<Employee> staff;

   staff.push_back(Employee("Peter", "Griffin", 10000));
   staff.push_back(Employee("Lois", "Griffin", 20000));
   staff.push_back(Employee("Chris", "Griffin", 30000));
   staff.push_back(Employee("Meg", "Griffin", 40000));
   staff.push_back(Employee("Stewie", "Griffin", 50000));
   staff.push_back(Employee("Brian", "Griffin", 60000));

   std::cout << "<staff>\n";
   for(std::vector<Employee>::const_iterator i=staff.begin(),end=staff.end(); i!=end; ++i)
   {
      std::cout << (*i);
   }
   std::cout << "</staff>\n";

   return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-17T15:28:50.360

我建议使用 XML 序列化库将数据写入自定义 XML 格式。

例如，MIT 许可的开源 C++ 库[libstudxml](http://codesynthesis.com/projects/libstudxml/)既提供了低级 API

```
void start_element (const std::string& name);
void end_element ();
void start_attribute (const std::string& name);
void end_attribute ();
void characters (const std::string& value); 
```

和高级 API

```
template <typename T>
  void element (const T& value);
template <typename T>
  void characters (const T& value);
template <typename T>
  void attribute (const std::string& name,
      const T& value); 
```

libstudxml[文档](http://codesynthesis.com/projects/libstudxml/doc/intro.xhtml)提到它的序列化源代码起源于一个用于 XML 序列化的小型 C 库，称为**Genx**（也是 MIT 许可的）。

# php - Hovercard 无法与悬停功能一起正常工作。有任何想法吗？

> ID：11167076
> 
> 赞同：1
> 
> 时间：2012-06-23T05:16:56.243
> 
> 标签：php, jquery, json, hover

我正在使用 Hovercard，它与以下代码完美配合：

```
$.getJSON("userjson.php"
    function(result){
        $('.user').hovercard({
            showCustomCard: true, 
            customCardJSON: result,
            openOnLeft: true
        });
    }); 
```

在上面的代码中，我只是获取当前使用 cookie 登录的用户数据库中存储的信息：

```
$username = $_COOKIE['username'];

$user_select = mysql_query("SELECT * FROM users WHERE username='$username'",$con);
$user_array = mysql_fetch_array($user_select);

$user = array(
    'name' => "<p style=\"text-align:left; text-decoration:underline;\">".$user_array['username']."</p>",
    'bio' => "<p style=\"text-align:left\"><br>".$user_array['bio']."</p>",
    'image' => "/pictures/users/".$user_array['propic']
);

echo json_encode($user); 
```

但是，我想将当前登录用户的用户信息替换为将鼠标悬停在名称上的用户：

```
$('.user').hover(function() {
    var obj = $(this);
$.getJSON("userjson.php",{name: obj.text()},
        function(result){
            obj.hovercard({
                showCustomCard: true, 
                customCardJSON: result,
                openOnLeft: true
            });
    });
}); 
```

这确实有效（在某种程度上）。我必须将鼠标悬停在名称上一次，然后再次显示它，然后当我将鼠标移开时它不会消失..

这是我拍摄的 2 个视频，以便您真正了解我在说什么：

使用登录用户的工作代码：[http ://www.youtube.com/watch?v=FrWmOE-r8AA](http://www.youtube.com/watch?v=FrWmOE-r8AA)

使用悬停用户名的代码无效：[http ://www.youtube.com/watch?v=E9ksekpBnv0](http://www.youtube.com/watch?v=E9ksekpBnv0)

我需要帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T05:28:46.953

悬停卡不应在悬停时添加，而是最初添加。

```
$.each($(".user"), function() {
    var element = $(this);
    $.getJSON("userjson.php", {name: $(element).text()}, function(resp) {
        $(element).hovercard({
            showCustomCard: true, 
            customCardJSON: resp,
            openOnLeft: true
        });
    });
}); 
```

# javascript - 在 Node.js 中处理 Coffeescript 代码

> ID：11167078
> 
> 赞同：2
> 
> 时间：2012-06-23T05:17:26.283
> 
> 标签：javascript, node.js, coffeescript

如何将咖啡脚本代码直接处理成 node.js 中的 javascript？

也许我可以使用 child_process.exec/spawn/fork 的咖啡编译器，但有直接的方法吗？就像加载一个库（当它与 npm 一起安装时随咖啡包一起提供）并将代码传递给它，直接返回编译后的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T05:27:20.707

您可以做`npm install coffee-script`，然后只需 put`var coffee = require('coffee-script');`即可访问`coffee.compile`将执行您想要的功能的功能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-23T05:23:16.100

你看过[快递](http://expressjs.com/guide.html#template-engines)吗？它也支持coffeekup模板引擎。

# javascript - 检测父 div 中子 div 的类，然后将 class 或 id 添加到父 div

> ID：11167085
> 
> 赞同：0
> 
> 时间：2012-06-23T05:18:48.807
> 
> 标签：javascript, jquery

**好的，我知道如何在jQuery**中添加类以及检测 div 的类，但是现在我想在父 div 中获取子类的类名，然后将类或 id 添加到包含子类的父 div分区。

**例子：**

```
<div>
    <div class="childdiv">this is the child divident</div>
</div> 
```

在获取或检测到 div 子类之后，将类或 id 添加到父 div（在我的情况下，我使用`class`）..

**输出应该是：**

```
<div class='parentclasshasbeenadded'>
    <div class="childdiv">this is the childdiv</div>
</div> 
```

这只是一个实验，一旦成功，我将把它应用到我实际的大爆炸项目中，请帮助我，在此先感谢。

**PS：**我愿意接受任何建议、建议和想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T05:21:51.580

你也可以做

```
$('div :has(".childdiv")').addClass('parentclasshasbeenadded'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T05:20:23.020

```
$('.childdiv').parent().addClass('parentclasshasbeenadded'); 
```

以上将添加`class=parentclasshasbeenadded`到`parent``.childdiv`

并添加`id`：

```
$('.childdiv').parent().attr('id', 'someid'); 
```

要检测类是否存在，您需要使用[`hasClass()`](http://api.jquery.com/hasClass/)

```
$('div').children().each(function() {
  if($(this).hasClass('childdiv')) {

    // to add class
    $(this).parent().addClass('parentclasshasbeenadded');

    // to add id
    $(this).parent().attr('id', 'someid');
  }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T05:21:18.617

```
if($(this).children().hasClass("childdiv")) {
    $(this).addClass("Thaparentclasshasbeenadded")
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-19T14:21:53.107

这可能有助于解决问题。

```
$('.parent .child')[0]{
//there is
} 
```

# android - PerspectiveCamera 3d 图形教程 libgdx

> ID：11167086
> 
> 赞同：1
> 
> 时间：2012-06-23T05:18:52.643
> 
> 标签：android, android-emulator, libgdx

有谁知道没有被弃用的 PrespectiveCamera 的任何好的教程。任何与 3d 图形相关的东西实际上都会很棒..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:43:38.650

看看[现代 3D 图形编程](http://www.arcsynthesis.org/gltut/)。

# php - 关于常规任务

> ID：11167087
> 
> 赞同：0
> 
> 时间：2012-06-23T05:19:07.300
> 
> 标签：php, mysql, linux

我正在使用 cent OS 服务器和 Mysql 数据库。我有一项任务每天都会执行，以从一张大桌子到一张小桌子生成一些有用的信息。哪种技术适用于我。我的服务器运行具有 php 支持的 apache 服务器。我应该使用 php 来完成这项任务吗？还是有其他技术更适合我的要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T05:20:31.297

cron 工作：[http ://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T09:28:55.173

如果您是服务器管理员，您可以轻松使用 php，一个简单的 shell 脚本（实际上是 shell 脚本中的 sql 脚本）。如果您不是管理员，那么您必须专注于传统方式，除非

# php - 如何删除 php 中列出的文件？

> ID：11167094
> 
> 赞同：1
> 
> 时间：2012-06-23T05:20:34.820
> 
> 标签：php

如何使用 PHP 删除所有列出的文件？`unlink`如代码所示，它显示文件夹中的所有文件，每个文件旁边都有一个“删除”按钮......但是当单击“删除”按钮时，如何使用该功能删除特定文件？

```
function Deletion()
{
    $files1 = scandir('upload/');
    $ignore = array( 'cgi-bin', '.', '..');
    foreach ($files1 as $file1) 
    {
        if(!in_array($file1, $ignore)) 
        {
            echo '<div>
                   <img src="upload/' . $file1 . '" height="50px" width="50px" />
                   <input type="button" value="Delete" name="del"/><br>
                   <a href="upload/'.$loca.'/'.$file1.'" target="_BLANK"
                     style=" font-size:12px; color:#333;"><p >'.$file1.'</p></a>
                  </div>';         
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T05:24:35.600

单击按钮时，您需要在服务器端执行操作。使用 AJAX 以文件名作为参数向服务器上的页面发出 GET 请求，然后在 GET 参数上运行 unlink。我通常向 AJAX 初学者推荐 jQuery。

JavaScript：

```
jQuery.post("delete.php", {file: "dont-want.php"}) 
```

PHP：

```
unlink($_POST["file"]) 
```

# javascript - 运行功能 onclick 禁用复选框

> ID：11167104
> 
> 赞同：2
> 
> 时间：2012-06-23T05:23:31.670
> 
> 标签：javascript, jquery

我有一个复选框，我不希望用户直接访问。我希望他们接受一些条款。为此，我希望他们能够单击禁用的复选框，该复选框会打开包含条款的迷你弹出窗口（不选中该框），以便读者可以阅读并接受它们。一旦他们接受它们，弹出窗口将关闭并且复选框将被选中。我遇到的问题是我无法确定在禁用复选框的单击上运行功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T05:31:44.477

处理对禁用元素的点击确实很棘手......但我认为这无论如何都不是理想的用户体验。如果一个复选框被禁用，一些用户会看到它，甚至不愿意尝试点击它。*相反，请考虑使用preventDefault*拦截点击事件并将其用于您自己的目的。

```
<input type='checkbox' id="cb" name="cb" />

$(document).ready(function() {
    $("#cb").click(function(e) {
        // cancel click event so that checkbox remains unchecked
        e.preventDefault();

        // display popup here, then manually check the checkbox if needed
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T06:59:40.800

```
$('#chk').click(function () {
            if (confirm('Accept')) {
                $(this).attr('checked', 'checked');
            }
            else {
                 $(this).attr('checked', false); }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T05:36:25.303

禁用的复选框可能无法正确处理点击事件并显示为“禁用”。

但是，你可以试试这个：

*   向复选框添加一个属性以存储是否显示弹出窗口（例如 data-popup="0"）
*   处理复选框上的 onclick 事件
*   如果显示了弹出窗口（data-popup="1"），只需返回 true 以允许使用它来检查它
*   如果未显示弹出窗口（data-popup="0" ），则阻止默认行为，设置 data-popup="1" 并显示带有条款和条件的弹出窗口

根据弹出窗口的设计，另一个改进可能是在该弹出窗口中添加一个新复选框，当用户阅读条款和条件时，他可以直接从弹出窗口中接受条款和条件。如果这样做，您需要处理弹出窗口中复选框上的单击事件，并自动检查页面上的复选框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T05:40:42.270

@dbaseman

这是我的代码。看看。在这里，我在 div 上收到警报，但在复选框上没有。

```
<html>
<head>
<script type="text/javascript" src="jQuery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
 $("#checkbox, #hello").click(function(){

       alert("hello");
    });
});
</script>
</head>

<body>
<div id="checkbox">
    <p> hello</p>
<input type="checkbox" id="hello" disabled="disabled"  />
</div> 
</body>
</html> 
```

# xpath - 查找具有与上下文元素相关的标准的直接兄弟姐妹

> ID：11167105
> 
> 赞同：1
> 
> 时间：2012-06-23T05:23:50.597
> 
> 标签：xpath

我有 XML 结构。**执行 XPath 的上下文是具有类属性“ac”的元素之一。**帮助我编写 XPath 以查找具有属性类“ac1”的**上下文元素的所有直接兄弟。**例如，如果执行上下文是具有类属性“ac”的第二个元素，则结果应该包含两个（而不是三个）具有类属性“ac1”的直接元素。

谢谢你。

```
<container>
<item class="ac"/>
<item class="ac1"/>
<item class="ac1"/>
<item class="ac1"/>
<item class="ac"/>
<item class="ac1"/>
<item class="ac1"/>
<item class="ac2"/>
<item class="ac1"/>
<item class="ac"/>
<item class="ac1"/>
<item class="ac1"/>
<item class="ac1"/>
</container> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:58:44.797

**I. 在 XPath 1.0 中，对两个节点集的交集使用 Kayessian 方法：**

```
$ns1[count(.|$ns2) = count($ns2)] 
```

这将选择两个节点集`$ns1`和的交集`$ns2`。

**替换为**：

**`$ns1`与**：

```
/*/*[@class='ac'][1]/following-sibling::*[@class='ac1'] 
```

**并`$ns2`与**：

```
/*/*[@class='ac'][2]
        /following-sibling::*[not(@class='ac1')][3]
                                  /preceding-sibling::* 
```

**生成的 XPath 表达式为**：

```
 /*/*[@class='ac'][4]
         /following-sibling::*[@class='ac1']
           [count(.
                 |
                  /*/*[@class='ac'][5]
                       /following-sibling::*[not(@class='ac1')][6]
                                              /preceding-sibling::*
                  )
           =
            count(/*/*[@class='ac'][7]
                       /following-sibling::*[not(@class='ac1')][8]
                                              /preceding-sibling::*
                  )
         ] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:variable name="ns1" select=
  "/*/*[@class='ac'][9]/following-sibling::*[@class='ac1']"/>

 <xsl:variable name="ns2" select=
  "/*/*[@class='ac'][10]
        /following-sibling::*[not(@class='ac1')][11]
                                  /preceding-sibling::*"/>

 <xsl:template match="/">
   <xsl:copy-of select=
   "$ns1[count(.|$ns2) = count($ns2)]"/>
=========
   <xsl:copy-of select=
   "/*/*[@class='ac'][12]
         /following-sibling::*[@class='ac1']
           [count(.
                 |
                  /*/*[@class='ac'][13]
                       /following-sibling::*[not(@class='ac1')][14]
                                              /preceding-sibling::*
                  )
           =
            count(/*/*[@class='ac'][15]
                       /following-sibling::*[not(@class='ac1')][16]
                                              /preceding-sibling::*
                  )
         ]
   "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<container>
    <item class="ac"/>
    <item class="ac1"/>
    <item class="ac1"/>
    <item class="ac1"/>
    <item class="ac"/>
    <item class="ac1"/>
    <item class="ac1"/>
    <item class="ac2"/>
    <item class="ac1"/>
    <item class="ac"/>
    <item class="ac1"/>
    <item class="ac1"/>
    <item class="ac1"/>
</container> 
```

**评估两个 XPath 表达式（一个带有变量，另一个带有替换的变量），并且每个选择的节点都被复制到输出**：

```
<item class="ac1"/>
<item class="ac1"/>
=========
   <item class="ac1"/>
<item class="ac1"/> 
```

* * *

**二、XPath 2.0 解决方案**：

只需将标准 XPath 2.0**[`intersect`](http://www.w3.org/TR/xpath-functions/#func-intersect)**运算符与相同的两个节点集一起使用。

或者，可以使用标准运算符**[`<<`](http://www.w3.org/TR/xpath-functions/#func-node-before)**and **[`>>`](http://www.w3.org/TR/xpath-functions/#func-node-after)**。

# iphone - 在对象类型中找不到属性

> ID：11167107
> 
> 赞同：0
> 
> 时间：2012-06-23T05:24:07.460
> 
> 标签：iphone, objective-c, xcode

我正在开发一个使用表格视图和详细视图的简单核心数据应用程序。我收到错误消息，指出在对象类型 ChildrenTVC 中找不到属性 managedObjectContext。问题是它确实存在。我已经清理了项目并删除了派生数据。一定有其他事情发生。下面是对象头的代码：

```
@interface ChildrenTVC : CoreDataTableViewController <AddChildTVCDelegate>

@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (strong, nonatomic) NSFetchedResultsController *fetchedResultsController;

@end 
```

和实现文件的代码：

```
#import "ChildrenTVC.h"

@implementation ChildrenTVC

@synthesize managedObjectContext = _managedObjectContext;
@synthesize fetchedResultsController = _fetchedResultsController; 
```

这是错误注册的应用程序委托文件：

```
#import "AppDelegate.h"
#import "ChildrenTVC.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize managedObjectContext = __managedObjectContext;
@synthesize managedObjectModel = __managedObjectModel;
@synthesize persistentStoreCoordinator = __persistentStoreCoordinator;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:       ( NSDictionary *)launchOptions
{
// Override point for customization after application launch.
UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
ChildrenTVC *controller = (ChildrenTVC *)navigationController.topViewController;
controller.managedObjectContext = self.managedObjectContext;
return YES;
} 
```

错误出现在 controller.managedObjectContext 中。其中很多是样板代码，因此没有太多内容。我只是无法弄清楚为什么它没有看到托管对象上下文的属性。该属性在代码中。

更新：

我最终完全重新创建了文件。我不确定当文件更改时哪些引用仍然存在，但有些东西指向了错误的文件。我必须清空垃圾箱才能使新文件正常工作。不过，它现在似乎可以工作了。我所做的所有研究最终都揭示了 Xcode 中无法解释的一些事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:51:58.053

我通过完全重新创建头文件解决了这个问题，但我从来没有真正理解它为什么会发生。当时我不明白的是我对应用程序所做的更改的影响。真正的问题是导入头文件的顺序问题。我在两个实现文件中更改了#import，导致编译器无法读取其中一个头文件。我可以看到代码在那里，但是编译器无法读取代码，因为它没有导入它。这让位于我收到的错误。我的解决方案只是扭转了我所做的改变。只需删除应用程序委托上的视图控制器头文件的#import 即可更轻松地解决此问题。我最近对此进行了测试，这是正确的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T05:29:39.867

您正在键入 navigationController.topViewController，但我认为它实际上不是一个。试试这个

```
ChildrenTVC *controller = [[ChildrenTVC alloc] init];
NSArray *vcArray = NSArray *vcArray = [NSArray arrayWithObject:controller]:
[self.window.rootViewController setViewControllers:vcArray animated:NO]; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-23T07:07:47.040

如果您对 ChildrenTVC.h 进行以下更改，会发生什么

```
@interface ChildrenTVC : CoreDataTableViewController <AddChildTVCDelegate>
{
    NSManagedObjectContext *managedObjectContext;
    NSFetchedResultsController *fetchedResultsController;
}
@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (strong, nonatomic) NSFetchedResultsController *fetchedResultsController;

@end 
```

# sql - SQL Server 2008，错误：948 附加数据库时出现版本错误？

> ID：11167113
> 
> 赞同：-1
> 
> 时间：2012-06-23T05:25:42.203
> 
> 标签：sql, sql-server, sql-server-2008

昨天我在我的笔记本电脑（Windows 7 64 位）上安装了 SQL Server 2008，我需要将一个附加`.mdf`到服务器，但是当我尝试这样做时，我收到了这个错误：

> 服务器“prince/sqlexpress”的附加数据库失败（Microsoft.SqlServer.smo）
> 
> 附加信息：1.执行 Transact Sql 语句或批处理时发生异常 (Microsoft.SqlServer.connectioninfo)
> 
> 2.无法打开物理文件操作系统错误5：“5（访问被拒绝。）”。（Microsoft SQL Server，错误：5120）

在互联网的帮助下，我找到了一些解决方案。

> 1.以管理员身份启动SQL Server管理器（右键单击程序，选择“以管理员身份启动”）：

但我仍然遇到同样的错误。

该`.mdf`文件确实有权限，所以我搬到了外部驱动器（pendrive，因为我的系统只有`C:\`驱动器，但我没有分区）。

然后我得到另一个错误，

> 为服务器“Prince\SQLEXPRESS”附加数据库失败。
> (Microsoft.SqlServer.Smo) 附加信息：
> 
> 执行 Transact-SQL 语句或批处理时发生异常。(Microsoft.SqlServer.ConnectionInfo)
> 
> 无法打开数据库“Databasename”，因为它是版本 655。此服务器支持版本 611 和更早版本。不支持降级路径。无法打开新数据库“数据库名称”。CREATE DATABASE 已中止。（Microsoft SQL Server，错误：948）

我使用查询 -

> “选择@@版本；”

我得到的输出为

> “Microsoft SQL Server 2005 - 9.00.3042.00 (Intel X86) Feb 9 2007 22:47:07 版权所有 (c) 1988-2005 Microsoft Corporation Express Edition on Windows NT 6.1 (Build 7600:)”

我该怎么办？但是我安装了 SQL Server 2008。我该如何改变它？如何解决此错误，请帮助解决此问题，如果您有任何解决方案，请发布。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T08:09:10.310

消息很清楚：数据库 MDF 文件是版本**655**。您的服务器理解版本**611**。这意味着，尽管您声称相反，您已连接到 SQL Server 2005。安装 SQL Server 2008，连接到它，并附加您的数据库。请在安装过程中注意您选择的实例名称，并确保连接到该实例。您现在还可以检查您安装了哪些实例，查看您的系统上有哪些服务。`MSSQLSERVER`将是默认实例，`MSSQL$<instancename>`将是命名实例。使用任何 SCM 查询工具来查看您安装了哪些服务，例如。[`sc.exe`](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/sc.mspx?mfr=true).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T03:37:53.687

Microsoft SQL Server Management Studio 需要管理员权限才能在 Windows 7 中附加数据库。如果直接执行，则会收到错误 5120。使用鼠标右键并选择以管理员身份执行来修复此正在执行的 Management Studio 图标。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T17:07:01.150

最后我解决了我的问题，

停止 SQLEXPRESS 服务并卸载所有与 SQL Server 2005 相关的组件。然后打开注册表编辑器转到 HKEY_LOCAL_MACHINE--SOFTWARE--MICROSOFT--MICROSOFT SQL SERVER-删除文件夹 90。然后再次重新安装 SQL Server 2008 并创建新实例适用于 2008 服务器。现在它的工作，我可以附加 mdf 文件。

# matlab - 同一图上的多个图

> ID：11167115
> 
> 赞同：2
> 
> 时间：2012-06-23T05:25:51.720
> 
> 标签：matlab, plot

```
x = [0.35, 0.65, 0.8, 1]
y1 = [0.1, 0.21, 0.29, 0.35]
y2 = [0.11, 0.26, 0.28, 0.39]
y3 = [0.1, 0.2, 0.28, 0.36]
y4 = [0.1, 0.25, 0.31, 0.37] 
```

我需要在同一张图上绘制所有这些数据，这样就有一个 x 轴和两个 y 轴，一个在左边，一个在右边。y 轴的间隔为`0.1:0.1:0.4`，x轴的间隔为`0:0.1:1`。

我试过了`plotyy`：

```
[ax, h1, h2] = plotyy(x, y2, x, y4);
hold on
[bx, h3, h4] = plotyy(x, y3, x, y1); 
```

但其中一个向量没有绘制在同一张图上。当您运行此程序并使用图形上的 PAN 选项时，您会发现仅绘制了 3 条曲线，而第 4^条曲线绘制在另一个图形上。当我检查图例时，U 只得到 3 条曲线，而不是 4 条。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T05:53:33.723

像这样的东西怎么样：

```
plot(x, [y1(:) y2(:) y3(:) y4(:)])
legend({'y1' 'y2' 'y3' 'y4'}, 'Location','NorthWest')
set(gca, 'XLim',[0 1], 'YLim',[0.1 0.4]) 
```

![截屏](../Images/39baeaeec107e6b93408777f8c7ca2a3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T13:27:35.713

跳过`hold`并使用

```
[ax, h1, h2] = plotyy(x, [y2;y3], x, [y4;y1]); 
```

**编辑：** 这是一种 hack，因为它不支持 x 不同的数据集。也就是说`y2`，`y3`应该为相同的`x`. `y4`和也是如此`y1`。

# multithreading - Background Thread 和 Join 将使线程成为前台线程

> ID：11167118
> 
> 赞同：0
> 
> 时间：2012-06-23T05:26:00.200
> 
> 标签：multithreading

如果我有一个后台线程并且让 Join 等待完成后台线程，那么这是否意味着它将像前台线程一样工作，如果没有，那么有什么区别。

```
Thread worker = new Thread(() => Console.ReadLine());
            worker.IsBackground = true ;
            worker.Start();  
            worker.Join(); 
```

我可以说上面的代码将像前台线程一样工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T05:59:51.400

这取决于您所说的“像前台线程一样工作”是什么意思。该线程仍然与主线程分开 - 例如它不能在 Forms 应用程序中执行 GUI 工作 - 但您的主线程将在 Join 处暂停，直到后台线程完成。

# android - 我想使用 Google Java Api Client 在 netbeans 上设置 android 项目？

> ID：11167122
> 
> 赞同：3
> 
> 时间：2012-06-23T05:26:09.877
> 
> 标签：android, netbeans-7, google-api-java-client

我是 Android 新手，我想在 Netbeans 中使用 Google Java Api Client 开发一个小型应用程序，我已经使用 swing 在 JAVA 上开发了它，它工作正常。

我的 netbeans 已准备好为 Android 工作，但我不知道如何设置 android 项目以使用 Google Java API 客户端。

有人可以为我提供使用 Google Java Api Client 设置 Android 项目的详细教程吗？

我不确定是否需要对[此处](http://code.google.com/p/google-api-java-client/downloads/list)下载的 google java api 客户端库进行额外处理。

我的 Android 设置在 Netbeans 上运行正常。

有人可以给我一个详细的解释吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:46:29.077

将您想要使用的库中的 JAR 文件放入您的 android 项目的 lib 文件夹中，您将能够使用它，并且它也将被捆绑到 .apk 中。我假设您有一个 android 项目（使用 nbandroid 插件。我不确定用于 android 开发的 maven 原型）。

-拉迪姆

# views - couchdb 视图，用于在数组字段中搜索作为键数组传入的值

> ID：11167125
> 
> 赞同：6
> 
> 时间：2012-06-23T05:26:35.747
> 
> 标签：views, couchdb

我在 couchdb 中有一些文档，它们的字段是不同关联文档的 id 数组：

```
{
  associatedAssets: ["4c67f6241f4a0efb7dc2abc24a004dfe",  "270fd4508a1222a1e2a27cbe7f002d9z"]
} 
```

我想编写一个视图，让我传入一个本身就是一个 id 数组的键，然后返回其相关资产字段包含一个或多个通过键数组传入的 id 的文档，例如

```
$.ajax({
  url: "/db/_design/design_doc/_view/summaryByAssociatedAssets",
  type: "post",
  data: JSON.stringify({keys: ["4c67f6241f4a0efb7dc2abc24a004dfe", "6c67f6241f4a0efb7dc2abc24a004dfd"]}),
  dataType: "json",
    contentType: "application/json",
})
.done(function(resp){
  console.log(resp[0]);
}); 
```

将返回其 associatedAssets 数组包含一个或多个键“4c67f6241f4a0efb7dc2abc24a004dfe”、“6c67f6241f4a0efb7dc2abc24a004dfd”的文档。

我无法访问我视图中的密钥，所以我不确定我是否可以这样做？有没有更好的方法来实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T07:29:37.740

您的视图只需要为每个`associatedAssets`元素生成一个输出行，如下所示：

```
function(doc) {
  if( doc.associatedAssets ) {
    for( var i=0, l=doc.associatedAssets.length; i<l; i++) {
      emit( doc.associatedAssets[i], doc );
    }
  }
} 
```

然后您需要调整您的调用，以便最终将该`keys`数组作为查询字符串参数传递，该参数将仅返回视图中与该数组中的键匹配的行。

总而言之 - 假设最近的 CouchDB 版本，最佳实践是在您的 with 中替换`doc`然后`emit`在`{ _id: doc._id }`您`include_docs=true`的查询中使用，这样您的视图索引就不会（不必要地）被完整的文档填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T06:25:10.983

在视图代码中，您可以访问文档本身的任何内容，但无法访问您传入的任何参数。

您可以使用为您正在执行的特定查询生成的临时视图。

您也可以改用 ElasticSearch。ElasticSearch 具有更丰富的查询 DSL，因为这就是 ElasticSearch 的全部意义所在。CouchDB River 允许您自动索引 CouchDB 中的所有文档。

使用 ElasticSearch，您可以只搜索其相关资产包含您传入的列表中的任何元素的任何文档。

# ruby-on-rails - 用于 Sinatra (Ruby) 的 Rails 风格的 Rake 任务

> ID：11167127
> 
> 赞同：1
> 
> 时间：2012-06-23T05:26:52.560
> 
> 标签：ruby-on-rails, ruby, rake, sinatra

我似乎找不到任何人在 Sinatra 应用程序中使用 Rails 风格的 rake 任务的宝石或示例。我想清理我的迁移文件夹，并希望执行类似此处解释的操作：[何时（如果）合并 ActiveRecord 迁移？](https://stackoverflow.com/questions/1486514/when-if-to-consolidate-activerecord-migrations)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:03:36.890

### 为什么 Sinatra 没有“开箱即用”做你想做的事

Sinatra 不像 Ruby on Rails 那样是一个多层框架。具体来说，虽然您当然可以将数据库层添加到 Sinatra 应用程序，但它不支持“开箱即用”的 ActiveRecord 或 Rails 迁移。

如果您正在寻找标准的 Rails rake 任务和迁移支持，为什么不直接使用 Rails？Sinatra 很棒，但它不是 Rails 的替代品。

### 所以你想要以数据库为中心的 Rake 任务......

如果您的数据库连接来自 gem，请查看 gem 的项目是否具有 Rakefile，您可以将其重新用于您的应用程序。例如，[sinatra-activerecord gem](https://github.com/janko-m/sinatra-activerecord)提供了将相关 Rake 任务添加到 Rakefile 的说明。

如果您推出了自己的数据库连接，那么您可能还必须推出自己的 Rake 任务。[Rake](http://rake.rubyforge.org/)的文档很丰富，并且这些功能应该允许您自动执行所需的任务。

# javascript - 如何在 iPhone 的 UIWebview 中获取所选文本的位置编号

> ID：11167141
> 
> 赞同：1
> 
> 时间：2012-06-23T05:28:29.640
> 
> 标签：javascript, iphone

任何人都可以帮助我如何在 iPhone 的网络视图中获取所选文本的位置。例如 ：

神是伟大的。我们应该祈祷上帝。

如果用户选择了很好，那么会有一个警告说选择了第三个单词。如果用户选择祈祷，则会有警报说选择了第 6 个单词。

# java - 如何将中间包含逗号的句子分成Java部分？

> ID：11167144
> 
> 赞同：1
> 
> 时间：2012-06-23T05:28:50.970
> 
> 标签：java, string, text

我怎样才能将一个句子分成`"He and his brother, are playing football."`几个部分`"He"`，如`"He and"`，、、、、、、、、、`"and his"`和。是否可以通过使用Java来做到这一点？`"his brother"``"brother, "``", are"``"brother playing"``"playing football"``"football."``"."`

```
String[] words = "He and his brother , are playing football .".split("\\s+");
System.out.println(words[0]);
    for (int i = 0, l = words.length; i + 1 < l; i++){
    System.out.println(words[i] + " " + words[i + 1]);  
}
String s = words[words.length-1];       
System.out.println(s.charAt(s.length() - 1)); 
```

这是我做的代码问题是“，”里面的句子必须与单词 like `"brother,"`must put 分开，因为这`"brother ,"`只会起作用。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:06:20.903

改变这个：

```
String[] words = "He and his brother , are playing football .".split("\\s+"); 
```

至：

```
String[] words = "He and his brother , are playing football .".split("[\\s+,]"); 
```

这将处理`,`，也就是说，您不会得到`brother,`，而是只会得到`brother`。它也会在出现逗号时分裂。

# node.js - 更改 openshift 上节点的默认启动器 js ( server.js)

> ID：11167148
> 
> 赞同：0
> 
> 时间：2012-06-23T05:29:23.260
> 
> 标签：node.js, openshift

如何更改 openshift 上节点的默认启动脚本的名称？默认启动脚本是 server.js。

我在[openshift 论坛](https://openshift.redhat.com/community/blogs/nodejs-on-openshift-you-bet-your-javascript)上看到了一个帖子，但是我很难理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:57:25.040

查看 package.json 文件，您应该会看到：

```
 "main": "server.js" 
```

# java - 在java中结合for循环和sql

> ID：11167150
> 
> 赞同：0
> 
> 时间：2012-06-23T05:29:30.593
> 
> 标签：java, sql

我有 2 个输入日期：`myStartDate`和`myEndDate`一个`TEST_TABLE`带有列的表

```
TEST_ID, TEST_USER,TEST_START, TEST_END 
```

我需要检查 myStartDate 和 myEndDate 之间的日期范围是否在 TEST_TABLE 中有相应的记录。我还需要确保不检索重复记录。

这是我到目前为止的逻辑示例：

假设，

```
myStartDate=06/06/2012;myEndDate=06/09/2012
int diff = myEndDate - myStartDate; //In this case = 3

String myQuery = "SELECT * FROM TEST_TABLE WHERE"+ myStartDate +"BETWEEN TEST_START AND TEST_END OR "+ (myStartDate +1) +" BETWEEN TEST_START AND TEST_END OR"+ (myStartDate+2)+"BETWEEN TEST_START AND TEST_END OR"+(myStartDate+3)+"BETWEEN TEST_START AND TEST_END";

List <TestTableData> myList = new List();
//Exceute query & save results into myList using add method 
```

想知道是否有任何方法可以使用`for loop`java 代码中的 a 来测试 myStartDate 和 myEndDate 之间的日期范围，而不是上面使用的方法`myQuery`。此外，我怎样才能避免重复。

Java新手，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:09:00.860

使用 a`ResultSet`迭代输出，如下面的代码。

```
while (res.next()) {
        String col1= res.getString("col1");
        String col2 = res.getString("col2");

      } 
```

如果您使用`Array`implementation ，它不允许重复元素，因此无需检查一个。

但是如果您必须使用列表 then ，您可以使用以下代码删除任何重复的元素。

```
public static void removeDuplicates(List list)
  {
    Set set = new HashSet();
    List newList = new ArrayList();
    for (Iterator iter = list.iterator(); iter.hasNext(); ) {
      Object element = iter.next();
      if (set.add(element))
        newList.add(element);
    }
    list.clear();
    list.addAll(newList);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T21:54:52.420

我认为您要问的是一些关于如何读取数据库以及如何在 java 中处理日期的一般性问题。下面我会给你一些示例代码。但我建议您查看 java 数据库教程[http://docs.oracle.com/javase/tutorial/jdbc/index.html](http://docs.oracle.com/javase/tutorial/jdbc/index.html)和 java.util.Date api 文档[http://docs.oracle.com/javase/ 1.5.0/docs/api/java/sql/Date.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/sql/Date.html)了解更多信息。

以下是一些示例代码，专门演示如何实现您的问题：

```
 // get the input dates
    // they are hard coded in this example
    // but would probably normally be passed in
    String startDateStr = "2/3/03";
    String endDateStr = "3/1/03";

    // unfortunately, there are 2 "Date" classes in this code and you need to differentiate
    // java.util.Date is the standard java class for manipulating dates
    // java.sql.Date is used to handle dates in the database
    // name conflicts like this are rare in Java
    SimpleDateFormat dateFmt = new SimpleDateFormat("M/d/yy");
    java.util.Date myStartDate = dateFmt.parse(startDateStr);
    java.util.Date myEndDate = dateFmt.parse(endDateStr);

    // conneect to the database
    // I am using mysql and its driver class is "com.mysql.jdbc.Driver"
    // if using a different database, you would use its driver instead
    // make sure the jar containing the driver is in your classpath (library list)
    // you also have to know the url string that connects to your database
    Class.forName("com.mysql.jdbc.Driver").newInstance(); // loads the driver
    Connection dbConn = DriverManager.getConnection(
       "jdbc:mysql://localhost/testdb", "(db user)", "(db password)"
    );

    // get the database rows from the db table
    // my table is named "testtable"
    // my columns are named "DateStart" and "DateEnd"
    Statement st = dbConn.createStatement();
    String sqlStr = "Select * from testtable";
    ResultSet rs = st.executeQuery(sqlStr);

    // loop through the rows until you find a row with the right date range
    boolean foundRange = false;
    while (rs.next()) {
        java.util.Date dbStartDate = rs.getDate("DateStart");
        java.util.Date dbEndDate = rs.getDate("DateEnd");
        if (myStartDate.before(dbStartDate)) continue;
        if (myEndDate.after(dbEndDate)) continue;
        foundRange = true;
        break;
    }

    if (foundRange) {
        // code that executes when range is found in db
    } else {
        // code that executes if range not found in db
    }

    dbConn.close(); 
```

希望这可以帮助您入门。

# azure - 在 Azure 上托管符合 PCI 的应用

> ID：11167152
> 
> 赞同：8
> 
> 时间：2012-06-23T05:30:14.260
> 
> 标签：azure, credit-card, pci-compliance

我想在 Windows Azure 上托管一个应用程序，该应用程序存储按月付费购买订阅的用户的信用卡信息。我只需要尽可能安全地存储卡数据（加密、加盐、经常更新数据库密码、使用 HTTPS 等等）

我相信我需要符合 PCI 才能存储此类信息。我的问题是 Azure 可以让我实现这一目标吗？我有哪些选择？Azure 上的应用程序可以处理信用卡付款吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T05:38:29.607

Windows Azure 当前不符合 PCI 标准。（可能在未来，但不是现在——路线图）

**编辑：** Azure 现在符合 1 级标准：windowsazure.com/en-us/support/trust-center/compliance

Windows Azure 有一个信任中心页面，解释了所有关于它的安全性和合规性（我建议你在这里阅读更多关于 Azure 有什么和没有什么）[https://www.windowsazure.com/en-us/support/trust -中央/](https://www.windowsazure.com/en-us/support/trust-center/)

您可以选择构建 Azure 应用程序，但让第 3 方（符合 PCI 标准）为您处理实际的信用卡处理，从而降低您在 Azure 上出现非 PCI 投诉应用程序的风险。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-17T01:44:16.003

截至今天，Azure 符合 PCI DSS 1 级标准。

[http://blogs.msdn.com/b/windowsazure/archive/2014/01/16/announcing-pci-dss-compliance-and-expanded-iso-certification-for-windows-azure-general-availability-of- windows-azure-hyper-v-recovery-manager-and-other-updates-to-windows-azure.aspx](http://blogs.msdn.com/b/windowsazure/archive/2014/01/16/announcing-pci-dss-compliance-and-expanded-iso-certification-for-windows-azure-general-availability-of-windows-azure-hyper-v-recovery-manager-and-other-updates-to-windows-azure.aspx)

[https://www.windowsazure.com/en-us/support/trust-center/compliance/](https://www.windowsazure.com/en-us/support/trust-center/compliance/)

我对 PCI 合规性的理解意味着您现在可以在 Azure 上构建应用程序，并且应该能够让它们获得 PCI 认证。仅仅构建一个应用程序并将其托管在 Azure 中并不能保证合规性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-23T12:30:03.243

现在它是合规的。您可以访问[Windows Asure 合规性页面](http://www.windowsazure.com/en-us/support/trust-center/compliance/)了解详细信息，还可以下载 Windows Azure 客户 PCI 指南。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-20T21:39:27.950

它在广义上是合规的。尝试使用 webapps 和 DB 构建一个应用程序，它们相互通信，而不是使用公共 IP 空间。以下是 PCI-DSS 中的一些问题。

1.2 构建防火墙和路由器配置，限制不受信任的网络与持卡人数据环境中的任何系统组件之间的连接

1.2.1 将入站和出站流量限制为持卡人数据环境所需的流量，并明确拒绝所有其他流量。

1.3.3 不允许互联网与持卡人数据环境之间的任何直接入站或出站流量连接。

1.3.5 应评估从持卡人数据环境出站的所有流量，以确保其遵循既定的授权规则。应检查连接以将流量限制为仅经过授权的通信（例如通过限制源/目标地址/端口和/或阻止内容）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-16T17:34:53.810

Windows Azure PCI 合规性证明 (AoC) 未列出客户实际可以购买的任何服务。AoC 认证以下服务：

Azure 核心服务、Azure 平台服务、Azure 目录服务、数据处理、基础结构、操作。

...但是这些服务（至少按名称）不能“购买”。

我整理了以下博客文章，关于为什么像我这样具有多年 PCI DSS 审计经验的 QSA 对 Azure 存在问题：

[https://www.2-sec.com/2015/11/19/is-microsoft-azure-pci-dss-compliant-lessons-in-due-diligence/](https://www.2-sec.com/2015/11/19/is-microsoft-azure-pci-dss-compliant-lessons-in-due-diligence/)

Tim Holman，QSA，2 秒...

# r - R：在 glm() 的逻辑回归中预测 (0,1)

> ID：11167154
> 
> 赞同：2
> 
> 时间：2012-06-23T05:30:25.527
> 
> 标签：r, statistics

我正在尝试在二进制 logit 模型中模拟“假设”情况。我正在估计通过考试的概率，考虑到考试的难度（1=最简单，5=最难），并以性别为对照。（数据在[这里](http://dl.dropbox.com/u/1791181/bayesglm.csv)）。对学生进行的测试通常很难（数据中的“HIGH”）。由此我们可以估计测试难度对通过可能性的影响：

```
model = glm(PASS ~ as.factor(SEX) + as.factor(HIGH), family=binomial(link="logit"), data=df)
summary(model) 
```

我们还可以得到预测的通过概率：

```
predict.high = predict(model, type="response") 
```

问题是，如果改为给出“LOW”测试怎么办？要获得新的概率，我们可以这样做：

```
newdata = rename.vars(subset(df, select=c(-HIGH)), 'LOW','HIGH')
predict.low = predict(model, newdata=newdata, type="response") 
```

但是我怎么知道在这种情况下会有多少额外的学生通过呢？`glm()`我没看到有明显的开关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T14:58:58.617

我还没有尝试挖掘出我根据 Gelman 和 Hill (2006) 编写的预测代码，我似乎记得使用过模拟。我仍然打算这样做。在我有限的经验中，您的问题的一个方面似乎是独一无二的，那就是我习惯于预测一个单一的观察结果（在这种情况下，一个学生参加一个测试）。但是，您似乎想要预测两组预测之间的差异。换句话说，如果给定一组 5 门简单的考试而不是一组 5 门难的考试，您想预测有多少学生将通过。

我不确定 Gelman 和 Hill (2006) 是否涵盖了这一点。你似乎也想用一种常客的方法来做到这一点。

我在想，如果您可以预测单个观察结果，以便您对每个观察结果都有一个置信区间，那么也许您可以估计每个组内通过的加权平均概率并减去两个加权平均值。delta 方法可用于估计加权平均值及其差异的置信区间。

预测观测值之间的协方差可能必须假定为 0 才能实施该方法。

如果假设协方差 0 不令人满意，那么贝叶斯方法可能会更好。同样，我只熟悉预测单个观察值。使用贝叶斯方法，我通过包含自变量而不是因变量来预测单个观察结果，以便预测观察结果。我想您可以预测同一贝叶斯运行中的每个观察结果（预测每个学生的高和低）。每组通过测试的加权平均值和加权平均值的差异是派生参数，我怀疑可以直接包含在贝叶斯逻辑回归的代码中。然后，您将对通过每组测试的概率以及通过每组测试的概率差异进行点估计和方差估计。

我意识到，到目前为止，这个答案比预期的更具对话性。我只是在制定策略来尝试，而没有时间尝试实施这些策略。提供所有 R 和 WinBUGS 代码来实现这两种建议的策略可能需要我几天时间。（可以从 R 中调用 WinBUGS 或 OpenBUGS。）我将在此过程中将代码附加到此答案中。如果有人认为我提出的策略和/或即将发布的代码不正确，我希望他们随时指出我的错误并提供更正。

编辑

下面是生成假数据并使用常客和贝叶斯方法分析该数据的代码。我还没有添加代码来实现上述预测的想法。我会在接下来的 1-2 天内尝试添加贝叶斯预测代码。我只使用了三个测试而不是五个。通过下面的代码编写方式，您可以将学生人数 n 更改为任何可分为 6 个相等整数的非零数。

```
# Bayesian_logistic_regression_June2012.r
# June 24, 2012

library(R2WinBUGS)
library(arm)
library(BRugs)

set.seed(3234)

# create fake data for n students and three tests

n <- 1200

# create factors for n/6 students in each of 6 categories

gender <- c(rep(0, (n/2)), rep(1, (n/2)))
test2  <- c(rep(0, (n/6)), rep(1, (n/6)), rep(0, (n/6)),
            rep(0, (n/6)), rep(1, (n/6)), rep(0, (n/6)))
test3  <- c(rep(0, (n/6)), rep(0, (n/6)), rep(1, (n/6)),
            rep(0, (n/6)), rep(0, (n/6)), rep(1, (n/6)))

# assign slopes to factors

B0      <-  0.4
Bgender <- -0.2
Btest2  <-  0.6
Btest3  <-  1.2

# estimate probability of passing test

p.pass <- (     exp(B0 + Bgender * gender + 
                         Btest2  * test2  + 
                         Btest3  * test3) /
           (1 + exp(B0 + Bgender * gender +
                         Btest2  * test2  + 
                         Btest3  * test3)))

# identify which students passed their test, 0 = fail, 1 = pass

passed   <- rep(0, n)
r.passed <- runif(n,0,1)
passed[r.passed <= p.pass] = 1

# use frequentist approach in R to estimate probability
# of passing test

m.freq <- glm(passed ~ as.factor(gender) +
                       as.factor(test2)  +
                       as.factor(test3)  , 
                       family = binomial)
summary(m.freq)

# predict(m.freq, type = "response")

# use OpenBUGS to analyze same data set

# Define model

sink("Bayesian.logistic.regression.txt")
cat("
model {

# Priors

 alpha ~ dnorm(0,0.01)
 bgender ~ dnorm(0,0.01)
 btest2 ~ dnorm(0,0.01)
 btest3 ~ dnorm(0,0.01)

# Likelihood

 for (i in 1:n) {
    passed[i] ~ dbin(p[i], 1)
    logit(p[i]) <- (alpha + bgender * gender[i] +
                            btest2  * test2[i]  +
                            btest3  * test3[i])
 }

# Derived parameters

 p.g.t1 <- exp(alpha) / (1 + exp(alpha))
 p.b.t1 <- exp(alpha + bgender) / (1 + exp(alpha + bgender))

 p.g.t2 <- (    exp(alpha +           btest2) / 
           (1 + exp(alpha +           btest2)))
 p.b.t2 <- (    exp(alpha + bgender + btest2) / 
           (1 + exp(alpha + bgender + btest2)))

 p.g.t3 <- (    exp(alpha +           btest3) / 
           (1 + exp(alpha +           btest3)))
 p.b.t3 <- (    exp(alpha + bgender + btest3) / 
           (1 + exp(alpha + bgender + btest3)))

}

", fill = TRUE)
sink()

my.data <- list(passed = passed, 
                gender = gender,
                test2  = test2,
                test3  = test3, 
                n      = length(passed))

# Inits function

inits <- function(){ list(alpha   = rlnorm(1), 
                          bgender = rlnorm(1),
                          btest2  = rlnorm(1),
                          btest3  = rlnorm(1)) }

# Parameters to estimate

params <- c("alpha", "bgender", "btest2", "btest3", 
            "p.g.t1", "p.b.t1", "p.g.t2", "p.b.t2",
            "p.g.t3", "p.b.t3")

# MCMC settings

nc <- 3
ni <- 2000
nb <- 500
nt <- 2

# Start Gibbs sampling

out <- bugs(data = my.data, inits = inits,
parameters.to.save = params, 
"c:/users/Mark W Miller/documents/Bayesian.logistic.regression.txt",
program = 'OpenBUGS', 
n.thin = nt, n.chains = nc, 
n.burnin = nb, n.iter = ni, debug = TRUE)

print(out, dig = 5) 
```

在我尝试实施加权平均预测方法之前，我想说服自己它可能有效。因此，我编写了以下代码，这似乎表明它可能：

```
# specify number of girls taking each test and
# number of boys taking each test

g.t1 <- rep(0,400)
b.t1 <- rep(0,120)
g.t2 <- rep(0,1200)
b.t2 <- rep(0,50)
g.t3 <- rep(0,1000)
b.t3 <- rep(0,2000)

# specify probability of individuals in each of the
# 6 groups passing their test

p.g1.t1 <- 0.40
p.b1.t1 <- 0.30
p.g1.t2 <- 0.60
p.b1.t2 <- 0.50
p.g1.t3 <- 0.80
p.b1.t3 <- 0.70

# identify which individuals in each group passed their test

g.t1[1:(p.g1.t1 * length(g.t1))] = 1
sum(g.t1)

b.t1[1:(p.b1.t1 * length(b.t1))] = 1
sum(b.t1)

g.t2[1:(p.g1.t2 * length(g.t2))] = 1
sum(g.t2)

b.t2[1:(p.b1.t2 * length(b.t2))] = 1
sum(b.t2)

g.t3[1:(p.g1.t3 * length(g.t3))] = 1
sum(g.t3)

b.t3[1:(p.b1.t3 * length(b.t3))] = 1
sum(b.t3)

# determine the weighted average probability of passing
# on test day for all individuals as a class

wt.ave.p <- ((p.g1.t1 * length(g.t1) + p.b1.t1 * length(b.t1) +
 p.g1.t2 * length(g.t2) + p.b1.t2 * length(b.t2) +
 p.g1.t3 * length(g.t3) + p.b1.t3 * length(b.t3) ) / 

 (length(g.t1) + length(b.t1) + length(g.t2) + 
  length(b.t2) + length(g.t3) + length(b.t3)))

wt.ave.p

# determine the expected number of individuals passing
# their test in the class as a whole

exp.num.pass <- wt.ave.p *  (length(g.t1) + length(b.t1) +
                             length(g.t2) + length(b.t2) +
                             length(g.t3) + length(b.t3))
exp.num.pass

# determine the number of individuals passing

num.passing <- (sum(g.t1) + sum(b.t1) + 
                sum(g.t2) + sum(b.t2) + 
                sum(g.t3) + sum(b.t3) )
num.passing

# the expected number of students passing, exp.num.pass,
# should equal the observed number of students passing,
# num.passing regardless of the number of students in each
# group and regardless of the probability of passing a 
# given test, within rounding error

identical(round(exp.num.pass), round(num.passing)) 
```

希望在接下来的几天里，我可以尝试将预测代码添加到上述贝叶斯代码中。

编辑 - 2012 年 6 月 27 日

我没有忘记这件事。相反，我遇到了几个问题：

1.  使用逻辑回归可以预测：a）给定组中的学生通过考试的概率 p 和 b）给定学生参加考试的结果（0 或 1）。然后对所有的 0 和 1 进行平均。我不确定要使用其中的哪一个。预测 p 的点估计和 SD 与已知测试结果的估计 p 相同。预测的 0 和 1 的平均值的点估计略有不同，平均 0 和 1 的 SD 要大得多。我相信我想要 b，预测的 0 和 1 的平均值。但是，我正在尝试检查各种网站和书籍以确定。Collett (1991) 有一个不使用计算机代码的工作示例，

2.  由于有很多派生参数，该程序需要很长时间才能运行。

3.  显然 OpenBUGS 经常崩溃，我相信，即使没有预测代码。我不确定这是因为我做错了什么，还是因为最近版本的 R 的变化或最近版本的 R 包的变化，或者可能是因为我试图用 64 位 R 或其他东西运行代码别的。

我会尽快发布预测代码，但上述所有问题都让我放慢了速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T21:03:05.820

您可以轻松地使用这种方法找到一个截止点：

```
cutoff <- runif(length(predicted_probabilities)) 
```

这是基于 Metropolis-Hastings 的确定性决策。

# command-line - 使用 makefile 中的选项调用外部命令

> ID：11167159
> 
> 赞同：0
> 
> 时间：2012-06-23T05:31:10.893
> 
> 标签：command-line, makefile, echo, arduino

我有一个[用于编译 Arduino 程序的 makefile](https://github.com/sudar/Arduino-Makefile/)。

我需要根据一些逻辑在一些文件的开头添加一些文本。我为此使用*echo*命令。

```
ECHO    = echo 
```

后来在文件中，我有很多地方像

```
$(OBJDIR)/%.cpp: %.pde
    $(ECHO) '#if ARDUINO >= 100\n    #include "Arduino.h"\n#else\n    #include "WProgram.h"\n#endif' > $@ 
```

效果很好。

最近，一些用户抱怨 echo 命令在某些 linux 发行版中无法正常工作，我不得不在 echo 命令中添加 '-e' 选项。

所以我将声明命令的第一行更改为

```
ECHO    = echo -e 
```

这不起作用，因为 makefile 将 -e 视为文本的一部分，而不是选项的一部分。

**编辑**：

我没有收到任何错误，但文本 -e 也附加到我正在创建的文件中。

有没有办法将 -e 声明为选项而不是文本的一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T06:50:13.063

您很可能会看到行为差异，因为`echo`在某些 shell 的某些版本中是 shell 内置命令。然后这是复杂的，因为 make 有时只使用 shell 来调用命令——如果可能的话，它会更喜欢直接调用命令。因此，有时，在某些系统上，您并没有调用`echo`您认为的命令。

通过设置你可能会有更好的运气

```
ECHO = /bin/echo -e 
```

它将显式调用外部`echo`命令，即使 shell 具有内置版本。这样你应该得到一致的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T06:02:29.160

如果得到`/bin/sh: 1: -e: not found`错误它与您的外壳有关，而不是 makefile.else，请输入您的错误。当然，如果你得到错误。

# selenium - selenium webdriver 无法识别 Web 元素

> ID：11167160
> 
> 赞同：0
> 
> 时间：2012-06-23T05:31:21.437
> 
> 标签：selenium, webdriver, testng

我正在使用 selenium webdriver 和 testNG。似乎 selenium webdriver 无法识别元素。这可能是什么原因。我试图通过 xpath/css/id/link 识别元素，但没有任何效果。我无法理解到底发生了什么。有人可以请指导。我也在使用隐式等待命令。

# javascript - 在 Javascript/jQuery 中的循环结束时添加延迟

> ID：11167162
> 
> 赞同：2
> 
> 时间：2012-06-23T05:32:07.940
> 
> 标签：javascript, jquery, settimeout

*我想在 likeMe() 循环完成后添加 5 秒的延迟。完成后，我想触发点击 Facebook 的注销按钮。*

当谈到 javascript 语义时，我很愚蠢；因此我不知道如何触发这些？考虑到这一点，循环结束后我将在何处/如何添加此效果：

我通常`.promise().done()`习惯在循环之后执行最后的步骤，但我不知道如何将它`$.delay(5000).promise().done( $('input[value="Log Out"]').click());`放在 javascript 中。

背景：使用 arudino、processing 和 &greasemonkey jQuery 创建装置艺术作品。

完整的脚本：

```
unsafeWindow.likeMe = likeMe;
function likeMe() 
{   

        input = document.getElementsByTagName("input");
        for(i = 0; i < input.length; i++) 
        {
            myID = input[i].getAttribute("data-profileid");
            if(myID != null && myID.indexOf("342584172457437") >= 0)
                input[i].click();
        }
        $.delay(5000).promise().done( $('input[value="Log Out"]').click()); 
        // this is wrong but yeah i have no clue where or how to put it on here.

}

$(window).load(function(){

    var isCtrl = false;
    document.onkeyup=function(e) {
        if(e.which == 17) isCtrl=false;
    }
    document.onkeydown=function(e){
        if(e.which == 17) isCtrl=true;
        if(e.which == 46 && isCtrl == true) {
            likeMe()

            return false;
        }
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T05:38:44.973

你可以使用[`setTimeout`](https://developer.mozilla.org/en/DOM/window.setTimeout)喜欢

```
function likeMe() 
{   

    input = document.getElementsByTagName("input");
    for(i = 0; i < input.length; i++) 
        {
            myID = input[i].getAttribute("data-profileid");
            if(myID != null && myID.indexOf("342584172457437") >= 0)
            input[i].click();
        }

   setTimeout(function() {
        $('input[value="Log Out"]').click();
   }, 5000);

} 
```

或里面之`onkeydown`类的

```
document.onkeydown=function(e){
        if(e.which == 17) isCtrl=true;
        if(e.which == 46 && isCtrl == true) {
            likeMe();
            setTimeout(function() {
               $('input[value="Log Out"]').click();
            }, 5000); 
            return false;
        }
    } 
```

但不能同时在两者中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T05:36:12.057

像这样使用`setTimeout()`：

```
setTimeout(function() {
    $('input[value="Log Out"]').click();
}, 5000); 
```

在五秒钟内执行一个功能。

# redirect - Wordpress 将子目录重定向到子域

> ID：11167164
> 
> 赞同：0
> 
> 时间：2012-06-22T22:30:13.853
> 
> 标签：redirect

我们刚刚将 WPML 站点从 example.com/fr 迁移到 fr.example.com。

我想保留所有链接汁，所以我试图重定向所有链接

www.example.com/fr/mylink -> fr.example.com/mylink/

这是我现在拥有的，但它不起作用：

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^([^.:]+\.)*example\.com/fr\.?(:[0-9]*)?$ [NC]
RewriteRule ^(.*)$ http://fr.example.com/$1 [R=301,L]

RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

该网站仍然可以正常工作，但重定向不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:46:29.537

尝试通过 FTP 访问网站并尝试将代码添加到您的 wp-config.php 文件中

```
define('WP_HOME', 'http://www.example.com');
define('WP_SITEURL', 'http://www.example.com/wordpress'); 
```

这对我有用。在您的网站上尝试一下。

# c# - 在c#中根据XY坐标显示.TIF图像的像素值

> ID：11167171
> 
> 赞同：0
> 
> 时间：2012-06-23T05:33:55.347
> 
> 标签：c#

我有麻烦了。如何在 C# 中使用位图类读取 1MB .tif 文件，并且必须根据 XY 坐标显示此 .tif 图像的像素值。我搜索了谷歌很多，但还没有找到任何答案。

```
string imgPath;
            imgPath = @"C:\Documents and Settings\shree\Desktop\2012.06.09.15.35.42.2320.tif";

            Bitmap img;
            img = new Bitmap(imgPath, true);

            MessageBox.Show(Here i have to show pixel value of this .tif image on the basis of X Y coordinates.); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T05:43:48.157

试试这个

```
string imgPath;
imgPath = @"C:\Documents and Settings\shree\Desktop\2012.06.09.15.35.42.2320.tif";

Bitmap img;
img = new Bitmap(imgPath, true);

Color pixelColor = img.GetPixel(50, 50); // 50, 50 or any "VALID" pixel in your bitmap 
```

欲了解更多信息，请[点击此处](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.getpixel)

# c# - 使用 c# direcshow.net 从当前渲染的视频中获取图像帧

> ID：11167172
> 
> 赞同：0
> 
> 时间：2012-06-23T05:34:01.500
> 
> 标签：c#, winforms, directshow

我的winform中有一个面板，它在选择时播放视频，在播放视频时，我需要从中抓取帧，这是在单击按钮后，并且抓取的帧应该用文件名保存。我做了很多关于实现这一点的研究，

最初，我尝试为该特定面板提供屏幕截图功能并将其显示在图片框中。1.“copyfromscreen()” 2.使用系统消息。3.drawtobitmap() -control specific ，所有这些都没有那么好，我对结果不满意。

后来我意识到在 directshow Ibasicvideo.getcurrentimage() 中有一种方法可以从渲染视频中获取当前帧。我一直在互联网上搜索一个很好的工作示例，但没有成功，我真的需要帮助，

任何在单独的图片框中显示视频当前图像的解决方案都是可观的。提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T06:49:12.133

使用此帖子中的链接查看`VMR9Snapper`示例：[从网络摄像头 c# 中拍照](https://stackoverflow.com/questions/7887910/take-picture-from-webcam-c-sharp)

```
int hr = windowlessCtrl.GetCurrentImage(out currentImage);
DsError.ThrowExceptionForHR(hr);

if (currentImage != IntPtr.Zero)
{
  BitmapInfoHeader structure = new BitmapInfoHeader();
  Marshal.PtrToStructure(currentImage, structure);

  bmp = new Bitmap(structure.Width, structure.Height, (structure.BitCount / 8) * structure.Width, System.Drawing.Imaging.PixelFormat.Format32bppArgb, new IntPtr(currentImage.ToInt64() + 40));
  bmp.RotateFlip(RotateFlipType.RotateNoneFlipY);

  if (saveFileDialog.ShowDialog() == DialogResult.OK)
  {
    bmp.Save(saveFileDialog.FileName.ToString(), System.Drawing.Imaging.ImageFormat.Jpeg);
  }
} 
```

# android - 如何使用 Android 的 API 将中文消息写入 NDEF 消息？

> ID：11167173
> 
> 赞同：0
> 
> 时间：2012-06-23T05:34:02.997
> 
> 标签：android, ndef

现在，我有一个谷歌 Nexus 和 Android 4.0.4 平台。如何将中文消息写入
NFC 卡，如何写入和读取 NDEF 消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:21:30.073

创建一条 NDEF 消息，其中包含一条知名类型文本的 NDEF 记录（请参阅[http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#well-known-text](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#well-known-text)）。如果是中文文本，您可以相应地设置语言字段（例如“zh-cn”、“zh-hk”、“zh-tw”或“zh-sg”）和文本编码希望您使用（UTF-8 或 UTF-16）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T08:20:18.720

您可以通过将语言环境设置为中文来编写中文文本记录。我建议您阅读[此](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html)内容，并在将来询问其他人之前搜索互联网。

# entity-framework - 如果 edmx 文件在另一个项目中，实体 SQL 不起作用

> ID：11167175
> 
> 赞同：0
> 
> 时间：2012-06-23T05:34:14.620
> 
> 标签：entity-framework, entity-sql

我正在尝试使用 Enitity SQL 来查询数据，但是如果 edmx 文件在另一个项目中，则会抛出异常。下面是我的测试步骤。

1.  创建一个类库项目并向其中添加一个 edmx 文件，从数据库创建。

2.  创建一个控制台应用程序，添加要引用的类库项目并将 app.config 文件复制到该项目中。

3.  编写如下代码

    ```
    using (NorthwindEntities context = new NorthwindEntities())
    {
        string queryString = @"SELECT VALUE cus 
                               FROM NorthwindEntities.Customers AS cus 
                               WHERE cus.ID > 10";
        ObjectQuery<Customers> cusQuery = 
            context.CreateQuery<Customers>(queryString);
        List<Customers> cusList = cusQuery.ToList();
    } 
    ```

当我运行控制台应用程序项目时，抛出异常：“'ID' 不是当前加载的架构中的'NorthwindModel.Customers' 类型的成员。”

似乎架构没有加载到项目中，有人有想法吗？附加问题：在这个查询中，我选择了这个类型的所有属性，如果我只选择了部分属性，如何返回一个匿名类型的ObjectQuery？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:55:39.073

这不是 EF 问题。

您已经手动编写了 SQL 语句，您没有使用 EDMX 文件中的表定义。

如果您尝试在 SQL Server 的查询提示中执行 SQL 语句，您会看到它也在那里失败。

尝试这样的事情：

```
var cus = from customers in context.Customers select customers;
var cusList = cus.ToList(); 
```

# c# - JSON 不能反序列化为对象，需要数组吗？

> ID：11167179
> 
> 赞同：3
> 
> 时间：2012-06-23T05:36:13.667
> 
> 标签：c#, json, windows-phone-7, windows-phone-7.1, windows-phone

我正在尝试获取传入的 JSON 项目并将它们绑定到列表框项目，但 Visual Studio 告诉我我需要做一个数组而不是对象？我从来没有这样做过......有人知道怎么做吗？

我的根对象：

```
public class RootObject
{
    public string url { get; set; }
    public string display { get; set; }
    public List<string> genetics { get; set; }
    public List<string> price { get; set; }
    public List<string> brandMaker { get; set; }
    public string form { get; set; }
    public string dosornos { get; set; }
    public string qty { get; set; }
    public string mfg { get; set; }
    public string mobURI { get; set; }
} 
```

注意：Genetics、Price、BrandMaker 实际上只返回一个值，如下所示：

```
"genetics": [
    "typeophere"
],
"price": [
    "$1400"
], 
```

JSON 文件/请求基本结果：

```
 [
{
    "url": "N/A",
    "display": "",
    "genetics": [
        "microogiz"
    ],
    "price": [
        "96.016"
    ],
    "brandMaker": [
        "Oshi Kunti Multikashi, Osaka, JP"
    ],
    "form": "tangent",
    "dosornos": "n/a",
    "qty": "88G",
    "mfg": "SelfMade Industries, USA Dist.",
    "mobURI": "n/a"
} 
```

]

我的原始代码：

```
// Get JSON via WEB
string ProviderURI = goURI;
webClient webClient = new WebClient();
webClient.DownloadStringCompleted += new  
    DownloadStringCompletedEventHandler(webClient_DownloadStringCompleted);
webClient.DownloadStringAsync(new Uri(ProviderURI));

void webClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    if (e.Error != null)
    {
        return;
    }

    var deserializedJSON = JsonConvert.DeserializeObject<RootObject>(e.Result);
    lstBoxResults.ItemsSource = deserializedJSON; // or deserializedJSON.url.ToString();
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-23T06:25:48.787

好的，您提到遗传学和价格是数组，但返回的 JSON 仅包含一项。RootObject 的其余部分是简单的字符串属性。

由于您没有发布原始 JSON 示例。让我展示一个精简的版本，以保持简单和简短。

```
{
    "url": "http://www.stackoverflow.com",
    "display": "This is a test",
    "genetics": [
        "typeophere"
    ],
    "price": [
        "$1400"
    ],
    "form": "a form"
} 
```

现在我们可以修剪 RootObject 类类型。我为我的属性使用了 Pascal 大小写，并将它们归因于 JSON.NET 属性以帮助反序列化/序列化。

```
[JsonObject(MemberSerialization = MemberSerialization.OptIn)]
public class RootObject
{
    [JsonProperty(PropertyName = "url")]
    public string Url { get; set; }

    [JsonProperty(PropertyName = "display")]
    public string Display { get; set; }

    [JsonProperty(PropertyName = "genetics")]
    public List<string> Genetics { get; set; }

    [JsonProperty(PropertyName = "price")]
    public List<string> Price { get; set; }

    [JsonProperty(PropertyName = "form")]
    public string Form { get; set; }
} 
```

由于我不知道您调用的 Web 服务，我只是将此 JSON 存储在一个文本文件中。将其标记为嵌入式资源并从那里读取。

```
string json;
var resource = Application.GetResourceStream(new Uri("json.txt", UriKind.Relative));
using (var reader = new StreamReader(resource.Stream))
{
    json = reader.ReadToEnd();
} 
```

只需将此部分替换为您的 WebClient 调用即可获取您的 JSON 数据。

现在我们可以将 JSON 反序列化为 RootObject 实例。

```
var rootObject = JsonConvert.DeserializeObject<RootObject>(json); 
```

像宣传的那样工作。现在您需要将它绑定到 ListBox 控件。如果将鼠标悬停在 ListBox 实例的 ItemSource 属性上，您会看到工具提示提到您可以将其绑定到集合。好吧，单个 rootObject 不是一个集合。不能直接绑定。

```
lstBoxResults.ItemsSource = rootObject; 
```

这将不起作用。您不能将 RootObject 实例转换为 System.Collections.IEnumerable。这是 ItemsSource 所期望的。

轻松修复。让我们创建一个集合。

```
lstBoxResults.ItemsSource = new List<RootObject> { rootObject }; 
```

这是假设您的 JSON 数据仅返回一个 rootObject。您的 ListBox 中只会出现一项。

现在让我们假设您的 JSON 数据返回一个 RootObjects 数组。例如，一个名为“items”的数组包含一个 RootItem 的集合。

```
{
    "items": [
    {
    "url": "http://www.stackoverflow.com",
    "display": "This is a test",
    "genetics": [ "typeophere" ],
    "price": [ "$1400" ],
    "form": "a form"        
    },
    {
    "url": "https://github.com/geersch",
    "display": "This is another test",
    "genetics": [ "typeophere" ],
    "price": [ "$2000" ],
    "form": "another form"
    }]
} 
```

反序列化这同样容易。使用 JSON.NET 获取 RootObjects 的集合。

```
var data = JObject.Parse(json)["items"]; 
```

现在反序列化为一个集合（IEnumerable）。

```
var rootObjects = JsonConvert.DeserializeObject<IEnumerable<RootObject>>(data.ToString()); 
```

由于您现在已经拥有一个 RootObject 集合，因此无需自己创建一个。您可以直接将其绑定到 ListBox。

```
lstBoxResults.ItemsSource = rootObjects; 
```

似乎您收到的 JSON 数据无效。就在解析它之前，请确保您对其进行了修改，以便您拥有一个有效的 JSON 对象。

例如：

```
json = json.Substring(json.IndexOf("[") + 1);
json = json.Substring(0, json.LastIndexOf("]"));
var rootObjects = JsonConvert.DeserializeObject<RootObject>(json); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-23T11:00:05.377

尝试这个

```
RootObject rootObject;

if (json.startsWith("["))
{
  rootObject = JsonConvert.DeserializeObject<List<RootObject>>(json)[0];
}
else
{
  rootObject = JsonConvert.DeserializeObject<RootObject>(json);
} 
```

# c# - 具有等待异步和任务的多线程 HttpListener

> ID：11167183
> 
> 赞同：31
> 
> 时间：2012-06-23T05:36:50.310
> 
> 标签：c#, task, async-await

这会是多线程的可扩展 HttpListener 的一个很好的例子吗？

这是例如一个真正的 IIS 将如何做到的吗？

```
public class Program
{
    private static readonly HttpListener Listener = new HttpListener();

    public static void Main()
    {
        Listener.Prefixes.Add("http://+:80/");
        Listener.Start();
        Listen();
        Console.WriteLine("Listening...");
        Console.WriteLine("Press any key to exit...");
        Console.ReadKey();
    }

    private static async void Listen()
    {
        while (true)
        {
            var context = await Listener.GetContextAsync();
            Console.WriteLine("Client connected");
            Task.Factory.StartNew(() => ProcessRequest(context));
        }

        Listener.Close();
    }

    private static void ProcessRequest(HttpListenerContext context)
    {
        System.Threading.Thread.Sleep(10*1000);
        Console.WriteLine("Response");
    }
} 
```

我正在专门寻找一种不依赖 IIS 的可扩展解决方案。而是仅在 http.sys （这是 httplistener 类）上 - 不依赖 iIS 的原因是因为 govt。我工作的区域需要极小的攻击表面积。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-24T00:34:01.020

我在[https://github.com/JamesDunne/Aardwolf](https://github.com/JamesDunne/Aardwolf)做了类似的事情，并对此做了一些广泛的测试。

有关核心事件循环的实现，请参阅[https://github.com/JamesDunne/aardwolf/blob/master/Aardwolf/HttpAsyncHost.cs#L107](https://github.com/JamesDunne/aardwolf/blob/master/Aardwolf/HttpAsyncHost.cs#L107)中的代码。

我发现使用 a`Semaphore`来控制有多少并发`GetContextAsync`请求处于活动状态是最好的方法。本质上，主循环继续运行，直到信号量由于达到计数而阻塞线程。然后将有 N 个并发的“连接接受”活动。每次接受连接时，都会释放信号量，并且可以有新的请求代替它。

信号量的初始和最大计数值需要一些微调，具体取决于您期望接收的负载。这是您期望的并发连接数与客户期望的平均响应时间之间的微妙平衡。较高的值意味着可以保持更多的连接，但平均响应时间要慢得多；更少的连接将被拒绝。较低的值意味着可以保持较少的连接，但平均响应时间要快得多；更多的连接将被拒绝。

我通过实验（在我的硬件上）发现，周围`128`的值允许服务器以可接受的响应时间处理大量并发连接（最多 1,024 个）。使用您自己的硬件进行测试并相应地调整您的参数。

我还发现单个 WCAT 实例本身不喜欢处理超过 1,024 个连接。因此，如果您对负载测试很认真，请对您的服务器使用多台带有 WCAT 的客户端计算机，并确保通过快速网络（例如 10 GbE）进行测试，并且您的操作系统的限制不会减慢您的速度。请务必在 Windows Server SKU 上进行测试，因为默认情况下桌面 SKU 受到限制。

**简介：** 如何编写连接接受循环对服务器的可伸缩性至关重要。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T22:52:18.373

从技术上讲，你是对的。为了使其可扩展，您可能希望同时运行多个 GetContextAsync（性能测试需要确切知道有多少，但“每个核心几个”可能是正确的答案）。

然后很自然地，正如评论所指出的那样；不使用 IIS 意味着您需要非常认真地对待 IIS 为您“免费”提供的很多东西的安全性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-08T20:21:08.897

我知道我在这方面迟到了，但我在 NuGet 上发布了一个库（来源在这里[https://github.com/jchristn/WatsonWebserver ），它封装了一个异步网络服务器。](https://github.com/jchristn/WatsonWebserver)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-05-20T05:19:17.040

这是使用取消令牌干净地关闭侦听器的模式：

```
try
{
    while (active)
    {
        Task<HttpListenerContext> listenTask = httpListener.GetContextAsync();
        listenTask.Wait(myCancelToken.Token);
        HttpListenerContext listenerContext = listenTask.Result;
        // Do something with listenerContext in a seperate thread or task..
    }
}
catch (System.OperationCanceledException)
{
    // This is expected!
}
httpListener.Close(); 
```

请注意，这应该在自己的线程或任务中执行，以防止阻塞其他代码。

# c# - 使用 asp.net 在网络上打开共享文件夹文件时出现问题

> ID：11167186
> 
> 赞同：0
> 
> 时间：2012-06-23T05:37:52.957
> 
> 标签：c#, asp.net, iis, iis-6

我使用 asp.net 开发了一个应用程序，它应该打开放置在网络上的共享文件夹中的文件，当我在本地运行该应用程序时它可以完美运行（这意味着它会打开我单击的任何文件），但是在托管之后IIS当我浏览应用程序时，它会获取共享文件夹中文件的路径但无法打开任何文件，有人可以在这方面帮助我吗？

我也使用了模拟和所有这些步骤，但没有一个解决我的问题:(

寻求您的及时帮助

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T05:42:24.193

网络服务器代码不应该具有广泛的开放访问权限。这将是一个安全漏洞。它通常以具有最低权限的用户身份运行，仅限于几个目录。

# iphone - 无法将手势识别器应用于导航栏

> ID：11167188
> 
> 赞同：4
> 
> 时间：2012-06-23T05:38:21.543
> 
> 标签：iphone, ios, uinavigationbar

在我的 iPad 应用程序中，我在屏幕上有多个视图。

我想要做的是将双击手势识别器应用于导航栏。但是我没有成功，但是当相同的手势识别器应用于该视图时，它可以工作。

这是我正在使用的代码：

```
// Create gesture recognizer, notice the selector method
UITapGestureRecognizer *oneFingerTwoTaps = 
[[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(oneFingerTwoTaps)] autorelease];

// Set required taps and number of touches
[oneFingerTwoTaps setNumberOfTapsRequired:2];
[oneFingerTwoTaps setNumberOfTouchesRequired:1];

[self.view addGestureRecognizer:oneFingerTwoTaps]; 
```

这在视图上有效，但是完成后：

```
[self.navigationController.navigationBar addGestureRecognizer:oneFingerTwoTaps] 
```

不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-14T07:14:34.807

对于其他查看此内容的人，这是一种更简单的方法。

```
[self.navigationController.view addGestureRecognizer:oneFingerTwoTaps]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T05:46:39.013

为此，您需要继承 UINavigationBar，覆盖其中的 init 按钮并在那里添加您的手势识别器。

因此，假设您创建了一个名为“CustomNavigationBar”的子类 - 在您的 m 文件中，您将有一个像这样的 init 方法：

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    if ((self = [super initWithCoder:aDecoder])) 
    {
        UISwipeGestureRecognizer *swipeRight;
        swipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(didSwipeRight:)];
        [swipeRight setDirection:UISwipeGestureRecognizerDirectionRight];
        [swipeRight setNumberOfTouchesRequired:1];
        [swipeRight setEnabled:YES];
        [self addGestureRecognizer:swipeRight];
    }
    return self;
} 
```

然后，您需要在界面构建器中将导航栏的类名设置为您的子类的名称。

![在此处输入图像描述](../Images/ea8fb8a44220bc19c9fe6e4d63c23054.png)

此外，将委托协议添加到导航栏以侦听手势结束时发送的方法也很方便。例如 - 在上述向右滑动的情况下：

```
@protocol CustomNavigationbarDelegate <NSObject>
    - (void)customNavBarDidFinishSwipeRight;
@end 
```

然后在 m 文件中 - 在手势识别方法（无论你做什么）上，你都可以触发这个委托方法。

希望这可以帮助

# javascript - Javascript 节点列表返回的长度无效

> ID：11167198
> 
> 赞同：0
> 
> 时间：2012-06-23T05:40:05.910
> 
> 标签：javascript, webkit

我已经找到了我一直遇到的一个 Javascript 问题，这个问题可以在这段代码中看到，在页面加载后运行：

```
var btns = document.getElementsByTagName('button');
console.log(btns);
divs = document.getElementsByTagName("div");
console.log(btns.length);
console.log(btns); 
```

*当*此代码工作时（并且不显示空白数组 []），它会在控制台中显示按钮数组，然后是 0，然后是按钮数组。这怎么会返回错误的长度值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:46:46.753

我测试了这段代码：

```
<button>bt1</button><div>www</div>
<button>bt_2</button>
<script type="text/javascript">
var btns = document.getElementsByTagName('button');
console.log(btns);
divs = document.getElementsByTagName("div");
console.log(btns.length);
console.log(btns)
</script> 
```

它正确显示：

```
[button, button]
2
[button, button] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:37:47.520

看起来将其设置为 DOMContentLoaded 事件解决了这个问题。

```
document.addEventListener("DOMContentLoaded", function () {...}, false) 
```

似乎是设置加载代码的正确事件。

# fonts - 如何在 Monotouch 中创建字体？

> ID：11167199
> 
> 赞同：2
> 
> 时间：2012-06-23T05:40:23.110
> 
> 标签：fonts, xamarin.ios

如何在 Monotouch 中创建字体？

我想指定字体系列、大小和样式（例如，Courier、粗体、25）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T14:33:33.777

如果我有一个`UIButton`名字`_woot`：

`_woot.Font = UIFont.FromName ("Courier-Bold", 25);`

如果您能找出字体名称，请使用以下代码将它们全部打印出来：

```
 string fonts = "--------------------------------------\n";
            var fontFamilies = new List<String> (UIFont.FamilyNames);
            fontFamilies.Sort ();
            foreach (var familyName in fontFamilies) {
                foreach (var fontName in UIFont.FontNamesForFamilyName (familyName)) {
                    fonts += familyName;
                    fonts += "\t";
                    fonts += fontName;
                    fonts += "\n";
                }
                fonts += "--------------------------------------\n";
            }
            Console.WriteLine (fonts); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T13:12:41.867

在代码中，使用[UIFont](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIFont_Class/Reference/Reference.html)类。或者使用 Interface Builder 来完成。这些是 Apple 文档——没有很多使用字体的 MT 特定示例，尽管[这](http://docs.xamarin.com/ios/recipes/Standard_Controls/Fonts/Enumerate_Fonts?highlight=uifont)可能很有用。

# asp.net-mvc-3 - 在 asp.net mvc 3 razor 视图中使用 other 而不是 @Html.DisplayFor

> ID：11167200
> 
> 赞同：3
> 
> 时间：2012-06-23T05:40:23.727
> 
> 标签：asp.net-mvc-3, entity-framework-4, razor

我是asp.net mvc3的新手。由于 asp.net mvc3 中使用的约定，修改单个代码确实令人困惑和困难。我试图以**1999 年 9 月 5 日**的格式仅显示 BirthDate 的日期，而不是显示日期和时间。在 Edit.cshtml 中很好，日期选择器用于选择日期，值保存在仅日期的数据库中。但是，我有**Date**数据类型的 BirthDate 列而不是 DateTime ，并且 `@Html.DisplayFor(model => model.BirthDate);`在**Details.cshtml**中使用时显示日期和时间。在谷歌搜索时，我发现并实现了以下代码，用于以期望格式显示日期：

```
@Model.BirthDate.ToString("dd MMM YYYY"); 
```

和

```
@Html.DisplayFor(model => model.BirthDate.ToString("dd MMM YYYY")); 
```

它给出了错误，没有重载方法需要 1 个参数。此外，我可以像这样使用：

```
[DisplayFormat(DataFormatString = "{0:dd MMM yyyy}")]
pubilc DateTime BirthDate { get; set } 
```

从那以后，我对实体框架使用了模型优先方法。在我的场景中，我应该在哪里实现以上 DisplayFormat 属性或者在 Details.csthml 中以正确方式显示日期的剃刀语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:54:33.333

好的，我知道我正在回复 8 个月前发布的问题，但我唯一的目的是，这可能对其他人将来引用这个问题有用。
我也不是 MVC 的代言人，我也遇到了类似的问题，我只需要显示日期而不是时间，并且以下对我有用。

而不是`@Html.DisplayFor()`. 使用`<span>`
So，对于所提到的情况，它将是这样的：

```
<span>@String.Format("{0:D}", model.BirthDate)</span>

Output: Sunday, September 05, 1999 
```

不，需要添加额外的类/文件进行格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T05:46:24.933

第三种方法是我认为最好的方法 cos

1.  您的演示模型正在处理 UI 的所有方面，并且您的视图没有不必要和冗余的格式代码，尤其是在您重用该属性时。
2.  启用单元测试
3.  如果您重用模型，则在不同页面之间保持一致。

您还可以编写一个帮助方法来格式化日期并在所有演示/视图模型中一致地使用它。

```
public string FormattedDate(this DateTime dateTime)
{
  return dateTime.ToString("dd MMM YYYY");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T05:52:43.580

我喜欢使用一种*装饰器*模式来处理这种事情。假设您的模型类称为*MyModel*。然后像这样定义一个包装类：

```
public class MyModelDecorator 
{
    public MyModel BaseItem { get; set; }

    [DisplayFormat(DataFormatString = "{0:dd MMM yyyy}")]
    public DateTime BirthDate { get; set; }

    public MyModelDecorator(MyModel baseItem)
    {
        BaseItem = baseItem;
    }
} 
```

然后在您的视图中，您可以引用基本模型属性或装饰属性。

```
@Html.DisplayFor(m => m.BirthDate)
@Html.DisplayFor(m => m.BaseItem.SomeOtherProperty) 
```

如果有比这个更好的解决方案，那么我真的很想听听......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-22T15:20:02.097

对于任何 ASPX 用户 sumbad 的回答都有帮助，但这就是你的做法：

```
<%=Html.Enconde(String.Format("{0:D}", item.yourDate))%> 
```

希望这可以帮助某人。

# android - 在 Android 中使用 ProgressBar 从 AmazonS3 下载视频

> ID：11167204
> 
> 赞同：0
> 
> 时间：2012-06-23T05:40:41.360
> 
> 标签：android

在这里，我开发了一个应用程序，它可以从中下载大尺寸的视频`AmazonS3Bundle`，`HorizontalProgressBar`但是当我通过按主页键进入主屏幕时，当我回到应用程序的下载屏幕时，我的下载从开始重新开始。

即使我转到任何其他应用程序，我也希望我的应用程序继续在后台下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T06:14:43.423

那是因为您的 Activity 的 onCreate() 每次都会被调用，并且下载任务会再次开始。

你应该做一个`Service`类来执行下载任务，因此无论应用程序的状态如何，它都会在后台继续执行。

检查这两个例子：[**第一个**](http://android-ed.blogspot.in/2011/04/creating-and-using-service.html)和[**第二个**](http://www.java2s.com/Code/Android/Network/FileDownloadService.htm)链接

# algorithm - 用户名唯一性验证 - 设计方法

> ID：11167213
> 
> 赞同：3
> 
> 时间：2012-06-23T05:43:02.883
> 
> 标签：algorithm, hash

这是一个一般的设计问题 - 我想在用户输入值和制表符时验证用户名字段的唯一性。我进行 Ajax 验证并从服务器获得响应。这都是非常标准的。现在，如果我有一个巨大的用户数据库怎么办？如何处理这种情况？我想找出 1.5 亿个用户名中是否存在用户名“foozbarz”？

1.  数据库查询没有问题[编辑] - 读取用户名数据库一次并填充缓存/哈希以更快地查找（澄清**Emil Vikström**的观点）
2.  在内存数据库中也无济于事
3.  保留一个内存散列（或缓存/内存缓存）来存储所有用户名 - 用户名可以很容易地散列并且查找速度非常快。但是这样做有一些问题：散列的大小——我们可以优化以减小散列大小吗？湾。哈希/缓存刷新频率（我们验证时​​可能会添加用户）
4.  根据某些条件对用户名表进行分片（例如：表 username_1 中的 AB 等） -**感谢 piotrek**的建议

或者，还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T10:55:15.367

为什么不简单地对数据进行分区？如果您有/计划拥有超过 1.5 亿用户，我假设您有/将有预算。如果您刚刚开始（有 2k 个用户），则使用传统的方式在数据库上进行简单的索引搜索。当您有这么多用户以至于您**观察到**性能问题并**测量**这是因为您的数据库（而不是例如 www 服务器）时，您只需放置另一个数据库。在第一个上，您将拥有名称从 a 到 m 的用户，并在另一个上休息。您可以选择其他标准，例如哈希，以使数据平衡。当您需要更多时，您将添加更多数据库。但是如果你现在没有这么多用户，我建议你不要做任何过早的优化。有很多事情可能会成为这种数据量的瓶颈

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T06:01:17.547

您最有可能在存储取名的地方进行某种散列处理是正确的，显然，没有散列处理意味着它是免费的。

您不应该做的是依赖该验证。在用户按下注册和用户检查姓名是否空闲之间可能有很多时间。

公平地说，您在这里只有一个问题，那就是您是否真的需要担心您是否会获得 1.5 亿用户。可扩展性通常是一个问题，但除非这种情况发生在一夜之间，否则您可能可以在此之前更换更好的解决方案。

其次，您担心两个用户都得到一个 THIS NAME IS FREE 然后一个用户得到它。首先，发生这种情况的可能性非常低。其次，我能想到的“解决”这个问题的唯一方法是，用户永远不会使用经过验证的名称单击 OK 并获得一个 USERNAME TAKEN 是 a) 记住用户最后验证的内容，存储它，如果其他人注册了同时，使用 AJAX 将 name 字段更改为 take 并通知用户。不要这样做。很多浪费的周期和真正太多的努力来实施。b) 在用户验证用户名时锁定用户名，时间很短。这会导致出现很多免费用户名，但实际上并非如此。你可能也不想要这个。

最简单的解决方案是在用户实际单击“确定”时简单地将散列内容放入表中，但在此之前，请检查名称是否再次存在。如果是这样，只需使用 USERNAME TAKEN 将用户发送回来。有人与其他人争夺名字的机会非常非常渺茫，我怀疑任何人都会对你的验证器（它完成了它的工作，名字在检查时是免费的）如何向用户“撒谎”大惊小怪.

基本上你唯一的问题是你想如何存储昵称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T11:36:24.587

Your #1 criteria is flawed because this is exactly what you have a database system for: to store and manage data. Why do you even have a table with usernames if you're not going to read it?

The first thing to do is improving the database system by adding an index, preferably a `HASH` index if your database system supports it. You will have a hard time writing anything near the performance of this yourself.

If this is not enough, you must start scaling your database, for example by building a clustered database or by partitioning the table into multiple sub-tables.

What I think is a fair thing to do is implement caching in front of the database, but for single names. Not all usernames will have a collision attempt, so you may cache the small subset where the collisions typically happen. A simple algorithm for checking the collision status of USER:

1.  Check if USER exist in your cache. If it does:
    1.  Set a "last checked" timestamp for USER inside the cache
    2.  You are done and USER is a collision
2.  Check the database for USER. If it does exist:
    1.  Add USER to the cache
    2.  If the cache is full (all X slots is used), remove the least recently used username from the cache (or the Y least recently used usernames, if you want to minimize cache pruning).
    3.  You are done and USER is a collision
3.  If it didn't match the cache or the db, you are done and USER is NOT a collision.

You will of course still need a UNIQUE contraint in your database to avoid race conditions.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T05:56:40.223

如果您要走传统路线，则可以使用适当的索引来改进数据库查找。

您还可以尝试使用 ElasticSearch 之类的东西，它在大型数据集上具有非常低的延迟查找。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T09:11:22.077

如果您有 150M+ 用户，您将必须具备以下功能：

1.  检查用户是否存在，如果没有找到则发出信号
2.  验证密码是否正确，如果不正确则发出信号
3.  检索用户的数据

这个问题你会遇到，而且必须解决。很可能与用户查询类似。即使您严重依赖会话，您仍然会遇到“从 150M+ 池中的许多中查找会话 X”的问题，这在结构上与“从 150M+ 池中的许多中查找用户 X”相同。

一旦你解决了更大的问题，你现在遇到的问题就是它的第一步。

所以我会检查一个可扩展的数据库解决方案（可能是一个 NoSQL 解决方案），并使用它来实现“可用性检查”。

你可能会以一个结尾

```
retrieveUserData(user, password = None) 
```

如果用户和密码有效且正确，则返回用户信息。对于可用性检查，您将不发送密码，并且如果用户名可用，则会出现 UserNotFound 异常。

# asp.net - asp.net 中的会话过期

> ID：11167214
> 
> 赞同：0
> 
> 时间：2012-06-23T05:43:19.730
> 
> 标签：asp.net, iis, login, web-config, session-timeout

我正在使用会话来传递变量，但在服务器上登录后会话在 2 -3 分钟后自动过期，可能是什么问题？

网络配置文件：

```
 <sessionState  timeout="1440" mode="InProc"></sessionState>
    <authentication mode="Forms">
        <forms name="School" loginUrl="Login.aspx" defaultUrl="default.aspx" 
               timeout="1440" slidingExpiration="true" protection="All" path="/" />
    </authentication> 
```

我更改了超时，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T06:37:52.417

如果应用程序池由于某种（[可配置](http://www.iis.net/ConfigReference/system.applicationHost/applicationPools/add/recycling)的）原因重新启动并[丢失它的会话，则](http://blogs.msdn.com/b/tess/archive/2006/08/02/asp-net-case-study-lost-session-variables-and-appdomain-recycles.aspx)[启用](https://stackoverflow.com/questions/8678024/how-to-find-out-why-an-asp-net-web-application-is-being-restarted)并[检查日志](http://technet.microsoft.com/en-us/library/cc735206.aspx)和[性能计数器](http://msdn.microsoft.com/en-us/library/fxk122b4.aspx)。示例包括内存不足（如果您有共享的应用程序池，则更有可能），如果您每分钟有太多错误（可能是“隐藏”错误，例如由搜索引擎蜘蛛触发），或者您正在更改观察到的文件或观察到的文件夹（如或）。`web.config``bin\`

根据您的会话“正常运行时间”要求，由于重新启动应用程序池将丢弃（“过期”）所有[进程中](http://msdn.microsoft.com/en-us/library/ms178586.aspx)的会话，您可以通过使用进程外会话状态存储（如[ASP.NET/ Windows 状态服务/服务器](http://technet.microsoft.com/en-us/library/cc732412)或[SQL Server](http://technet.microsoft.com/en-us/library/cc753897)。

如果您觉得这是 IIS 配置或服务器问题而不是代码问题，您可以随时询问[ServerFault](https://serverfault.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T07:27:49.887

将此添加到您的 Global.asax.cs

```
 protected void Session_Start(object sender, EventArgs e)
        {
            Session.Timeout = 240;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T06:39:24.937

您的 Session 和 Forms 的超时设置看起来不错，但仍有许多事情可能会导致您认为 session 超时。我建议您按以下方式调查该问题：

网络设置：如果您的服务器是负载平衡的，请确保配置适用于会话。

应用程序池：检查 IIS 上的应用程序池刷新/重置规则。确保没有设置每 20 个请求或类似请求刷新一次池。

任务管理器：查看任务管理器，看看 IIS 工作进程是如何工作的（w3wp.exe）。它会被杀毒程序杀死吗？如果是这样，会话肯定会超时。

事件日志：最后，看一下 Windows 事件日志。查看是否有与超时相关的事件条目。

# javascript - 在jquery中获取表格的上一个或下一个单元格值

> ID：11167215
> 
> 赞同：-1
> 
> 时间：2012-06-23T05:43:34.420
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [我如何在 jquery 中获得预约时间（从时间到时间）](https://stackoverflow.com/questions/11168382/how-i-get-appointment-time-from-time-to-time-in-jquery)

[见 jsfiddle](http://jsfiddle.net/vrW2n/9/)

我通过拖动时隙单元格来选择时隙。选择时间段后，我在文本框中输入姓名，然后为该时间段分配患者预约。我必须在数据库中插入患者姓名（abc）、开始时间（上午 8:00 0）和结束时间（上午 8:00 30）。我如何在 jquery 中获取这三个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:15:27.093

在我看来，要使时间表看起来很棒并在各种浏览器上提供良好的用户体验，还有很多工作要做。也许您可以使用 jQuery 完整日历 ( [http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/) ) 并对其进行自定义以满足您的需求。

这是一个在一天内创建时间事件的演示：

[http://arshaw.com/js/fullcalendar-1.5.3/demos/selectable.html](http://arshaw.com/js/fullcalendar-1.5.3/demos/selectable.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-23T05:55:15.000

使用新的[HTML5](http://en.wikipedia.org/wiki/Html5) `time`元素（[文档](https://developer.mozilla.org/en/HTML/Element/time)）。然后很容易用[jQuery](http://jquery.com/)获取时间。

这是有关如何获取第一个选定单元格和最后一个选定单元格的完整示例。在用户单击更新按钮后进行选择。

```
<!doctype html>
<html>
<head>
    <script 
        src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js">
    </script>
    <script 
        src="http://ajax.aspnetcdn.com/ajax/modernizr/modernizr-2.0.6-development-only.js">
    </script>
    <script>
        $(function () {
            var start = $("td.csstdhighlight:first > time").attr("datetime");
            var end = $("td.csstdhighlight:last > time").attr("datetime");
        });
    </script>
</head>
<body>
    <table border="1">
        <tr><td class="csstdhighlight">
            <time datetime="2000-01-01 08:00:00">00</time>
        </td></tr>
        <tr><td class="csstdhighlight">
            <time datetime="2000-01-01 08:15:00">15</time>
        </td></tr>
        <tr><td class="csstdhighlight">
            <time datetime="2000-01-01 08:30:00">30</time>
        </td></tr>
        <tr><td><time datetime="2000-01-01 08:45:00">45</time></td></tr>
    </table>
</body>
</html> 
```

请注意，如果您想支持 Internet Explorer 8 或更低版本，您需要确保 IE 将新的 HTML5`time`元素视为应有的内容。最简单的选择是包含上面示例中的[Modernizr 库](http://modernizr.com/)，或者如果您想了解详细信息，可以阅读博客文章 [How to get HTML5 working in IE and Firefox 2](http://html5doctor.com/how-to-get-html5-working-in-ie-and-firefox-2/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-23T06:30:21.237

通过一些轻微的 html 修改，例如向时间单元格和一些数据属性添加一个类，您可以利用`jQuery.data()`和使用类来简化定位单元格

```
 <td class="csstablelisttd time" data-hour="9" data-minute="45"> 45 </td> 
```

当“slot”已被预订时，向其添加一个标识它已被预订的类。将患者姓名作为数据存储到时间单元中，您可以执行以下操作：

```
$('button').click(function() {
    var msg = 'No Bookings',
        $booked = $('.booked');
    if ($booked.length) {
        msg = [];
        $booked.each(function() {          
            var data = $(this).data()
            msg.push(data.hour + ':' + data.minute + ' - ' + data.patient)
        })
        msg = msg.join('\n');
    }
    alert(msg)
}) 
```

这是一个使用时间单元上的单击事件的非常简化但有效的版本。您的鼠标选择方法似乎不起作用，并且单击对用户更友好。这不会完成您的整个应用程序，但应该会给您一些未来的想法

[http://jsfiddle.net/vrW2n/27/](http://jsfiddle.net/vrW2n/27/)

# php - 如何在不连接的情况下将值插入字符串？

> ID：11167221
> 
> 赞同：-10
> 
> 时间：2012-06-23T05:44:18.310
> 
> 标签：php

我的目标是将变量的值直接插入到字符串中，而不使用`.`运算符进行连接。

我试过这样：

```
$filename = 'some_file_name';
header('Content-disposition: attachment; filename=$filename'); 
```

但这给了我`filename=$filename`，不是`filename=some_file_name`。

我如何实现这一目标？我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T05:47:44.157

```
$filename = "path/to/file.txt";
header("Content-disposition: attachment; filename=$filename"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T05:48:27.530

```
$filename = 'test.txt';
header('Content-disposition: attachment; filename=' . $filename); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T05:50:22.140

试试这个：

```
header('Content-Disposition: attachment; filename="' . $document . '"'); 
```

$document 是你的变量。此处添加了双引号，因此您可以在文件名中包含空格。

# android - 如何在数字时钟中设置时间

> ID：11167222
> 
> 赞同：1
> 
> 时间：2012-06-23T05:44:33.483
> 
> 标签：android, android-layout

我想构建一个android应用程序，这个应用程序允许用户回答一些问题。对于每个问题，用户都必须在 中回答`360 seconds`，所以我想制作一个数字时钟，从 开始`360secons`，然后下降到`0 seconds`

我读到我不能在数字时钟上设置时间，是这样吗？

或者我必须使用天文台？

这是我的数字时钟

```
DigitalClock timer;
public void init(){
timer=(DigitalClock)findViewById(R.id.dcTimer);
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T05:50:55.807

请改用[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)。

该链接还向您展示了如何`TextView`每 1 秒更新一次。

只需更改`new CountDownTimer(30000, 1000)`第一个参数`360000`而不是，`30000`这将为您的代码提供一个良好的开端。

**编辑**：您需要导入`android.os.CountDownTimer`，我提到的代码示例如下。祝你好运。

```
new CountDownTimer(30000, 1000) {

    public void onTick(long millisUntilFinished) {
        mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
    }

    public void onFinish() {
        mTextField.setText("done!");
    }
}.start(); 
```

# perl - 关于 perl 调试器中的 X 命令（显示变量）

> ID：11167230
> 
> 赞同：2
> 
> 时间：2012-06-23T05:46:14.113
> 
> 标签：perl, debugging

我想知道大`X`命令如何在 Perl 调试器中工作。所以我有以下 silly.pl 脚本：

```
#!/usr/bin/perl -w
use strict;
my $var1 = 99;
print "$var1\n"; 
```

我跑`perl -d silly.pl`，然后走到第 4 行。我在调试器中输入：

```
X var1 
```

但什么也没有出现。我应该如何使用`X`来显示 的值`var1`？（如果我删除`use strict;`并且不使用`my`，那么我可以开始`X var1`工作，但这似乎不是解决方案。）

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T06:44:47.767

该`X`命令打印当前包变量，例如声明为`our`. 对于词法范围变量，使用`x`或`y`（需要`PadWalker`安装模块）命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T08:37:27.597

在调试器中点击**h会显示这一点。**

```
 V [Pk [Vars]]  List Variables in Package.  Vars can be ~pattern or !pattern.
  X [Vars]       Same as "V current_package [Vars]". 
```

# iphone - UIImageViews 不使用 imageNamed 方法加载到 UIScrollView

> ID：11167232
> 
> 赞同：0
> 
> 时间：2012-06-23T05:46:28.850
> 
> 标签：iphone, ios5, uiscrollview, uiimageview

有人能告诉我这两种加载方式的区别`UIImageView`吗？

```
iconView.image = [UIImage imageNamed:anIconFileName]; 
```

和

```
iconView.image = [UIImage imageWithContentsOfFile:anIconFileName]; 
```

我遇到了一种情况，当使用该`imageNamed`方法时，我有不确定的行为将 UIImageViews 作为子视图加载到`UIScrollView`. UIImages 会加载到模拟器中，但不会加载到使用 may iMac 的设备上。但是当我转移到我的 Mac Air 时，模拟器和设备上的一切都按预期工作了吗？通过进一步调查，我发现它何时起作用是不确定的。我试图加载 5 个 UIImageViews，有时我会得到 1 个或两个。加载任何内容似乎取决于我尝试加载的 *.png 文件的大小。

当我改变`imageWithContentsOfFile`方法时，一切都按预期工作......可靠。

UIImages 似乎并不大 - 每个大约 100K。任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:19:06.647

第一件事 - 您是否检查了图像的名称，因为模拟器也会加载不区分大小写的图像，而设备不会加载该图像。

`imageNamed`- 此方法采用文件名。 `imageWithContentsOfFile`- 此方法采用该文件名的完整文件路径。

所以上面你提到的代码是虚拟代码或实际代码，如果那是实际代码，那么你需要确保`imageNamed`你必须传递文件名并且`imageWithContentsOfFile`你必须传递文件路径。

查看这篇文章了解这两种方法之间的区别 - [http://www.jorambarrez.be/blog/2012/04/19/ios-imagenamed-vs-imagewithcontentsoffile/](http://www.jorambarrez.be/blog/2012/04/19/ios-imagenamed-vs-imagewithcontentsoffile/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T08:03:11.870

这与 UIScrollView 无关，只需检查您将图像导入 Xcode 的方式。您应该添加文件选择选项：

> 为任何添加的文件夹创建组。

这样文件夹将显示为黄色（而不是蓝色），并且 imageNamed 可以正常工作。

# updating - 超级编辑器更新如何工作？

> ID：11167234
> 
> 赞同：0
> 
> 时间：2012-06-23T05:46:35.730
> 
> 标签：updating, ultraedit

我有一个名为 Ultra Editor 的编辑器。在这个编辑器中，我创建了一个名为“test.txt”的文件，其内容为“This is Test Text”。我没有关闭超编辑器页面。现在我用记事本编辑器打开了这个 test.txt 并将内容更改为“This is Test Text Welcome!”并以相同的名称保存它。现在我将光标移动到 Ultra Editor Window 上。Ultra 编辑器立即提出了修改后的文本。我的问题是这个 Ultra 编辑器如何知道修改文件的其他编辑器。编辑器如何在没有任何“刷新”内容的情况下更改文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T05:54:30.580

当您将其设置为前台程序时，它可能会触发一些代码从磁盘刷新文件。TextMate 和 MacVim 也有这种行为。

在 Windows 中，这样的事件之一是 Control.GotFocus。在 OS X 中有 applicationDidBecomeActive。

# android - Android Market 发布多个 apk

> ID：11167241
> 
> 赞同：0
> 
> 时间：2012-06-23T05:48:56.867
> 
> 标签：android, google-play, publishing

我已经开发了三个不同版本的应用程序（作为不同的项目）（大，正常，小）。如何将它们作为具有多个 apk 的单个应用程序上传。我需要更改包裹名称吗？密钥库怎么样？我是否需要为不同的版本使用相同的密钥库或不同的密钥库。那么版本号呢？apk的名称有关系吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T05:50:34.060

多个APK的规则见[规则](http://developer.android.com/guide/google/play/publishing/multiple-apks.html#Rules)

**您为同一应用程序发布的所有 APK 必须具有相同的包名称并使用相同的证书密钥进行签名。**

另请参阅其他规则......

要为同一个应用程序发布多个 APK，您必须在应用程序的 APK 文件选项卡中启用高级模式（如上一节所述）。进入高级模式后，您可以为同一个应用程序上传、激活和发布多个 APK。

[http://developer.android.com/guide/google/play/publishing/multiple-apks.html](http://developer.android.com/guide/google/play/publishing/multiple-apks.html)

[http://android-developers.blogspot.in/2011/07/multiple-apk-support-in-android-market.html](http://android-developers.blogspot.in/2011/07/multiple-apk-support-in-android-market.html)

# php - PHP 重定向而不影响标头

> ID：11167243
> 
> 赞同：1
> 
> 时间：2012-06-23T05:49:34.660
> 
> 标签：php, header, web, http-headers

我正在尝试创建一个 PHP 脚本，该脚本将始终在每次页面加载时调用，而不更改网站的现有代码，并且尽可能少地进行额外配置。

这是我的问题，我不希望它对实际请求（标头）产生任何影响。这是所需的流程：

请求-> somescript.php -> 实际目的地

所以，我不能使用 header() 函数，解决方案必须完全是服务器端。

我在想，在脚本完成它的任务后，它可以包含/需要预期的 PHP 文件。

任何想法/建议将不胜感激。

问候，

布兰登·马丁

PS：我不能在 .htaccess 文件中使用 php_value ，因为有时会在 CGI 环境中使用。

底线：需要一些代码在每个服务器请求上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:16:10.657

您希望一个脚本在任何其他脚本之前执行吗？如果您使用 Apache，我可以想到一种可能的解决方案...如果您可以重写`.htaccess`...

`.htaccess`：

```
RewriteEngine On
RewriteBase /test
RewriteRule !(common.php) common.php/$1 
```

`common.php`：

```
<?php
$request=substr($_SERVER['REQUEST_URI'],6);
if($request==""){
    $request="index.php";
}
if(substr($request,0,1)=="/"){
    // Prevent browsing local files (*nix)
    header("HTTP/1.1 403 Forbidden",true,403);
}else if(!file_exists($request)){
    // Not found
    header("HTTP/1.1 404 Not Found",true,404);
}else{
    // Request URI should be valid
    do_what_you_want_to_do_before_anything_else();
    // Include the original request URI...
    if(substr($request,-4)==".php"){
        include $request;
    }else{
        // Prevent executing non-PHP code
        echo file_get_contents($request);
    }
}
?> 
```

仍然有很多代码要编写，包括安全措施和`$_SERVER`如果子脚本关心则更改数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T06:36:45.940

如果您可以修改服务器的 php.ini，也许您可​​以使用[auto_prepend_file](http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file)指令？

不过你需要小心：如果你直接将它添加到 .ini 中，它对于该网络服务器托管的所有站点都是活动的。您还可以通过 apache 或 php-fpm 中的 php_value 添加它以在每个站点上执行此操作，或者您可以在脚本中构建站点检测。

就配置它的易用性而言，你不能让它变得简单得多。

# android - 将单线程应用程序转换为 ASyncTask 应用程序

> ID：11167246
> 
> 赞同：-1
> 
> 时间：2012-06-23T05:50:20.460
> 
> 标签：android

我正在创建一个简单的 RSS 阅读器，它在 ListView 中显示标题，从指定网站的 .xml 文件中下载它。

我编写了应用程序，它在单线程上工作，但我想使用 ASyncTask 以便所有下载都在后台进行，并且 UI 不会挂起。

现在，我以前从未使用过 AsyncTask，我用谷歌搜索了它，但我仍然不确定将我的代码的方法转移到哪个 ASyncTask 方法。请帮我做。

**SimpleRssReaderActivity.java**

```
package mohit.app.rssreader;

import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;
import org.xmlpull.v1.XmlPullParserFactory;

import android.app.ListActivity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class SimpleRssReaderActivity extends ListActivity {
    List headlines;
    List links;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

     // Initializing instance variables arrays
        headlines = new ArrayList();
        links = new ArrayList();

        try {
            URL url = new URL("http://feeds.pcworld.com/pcworld/latestnews");

            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(false);
            XmlPullParser xpp = factory.newPullParser();

                //  get the XML from an input stream
            xpp.setInput(getInputStream(url), "UTF_8");

            boolean insideItem = false;

                // Returns the type of current event: START_TAG, END_TAG, etc..
            int eventType = xpp.getEventType();
            while (eventType != XmlPullParser.END_DOCUMENT) 
            {
                    if (eventType == XmlPullParser.START_TAG) 
                {

                    if (xpp.getName().equalsIgnoreCase("item")) 
                    {
                        insideItem = true;
                    } 
                    else if (xpp.getName().equalsIgnoreCase("title")) 
                    {
                        if (insideItem)
                            headlines.add(xpp.nextText()); //extract the headline
                    } 
                    else if (xpp.getName().equalsIgnoreCase("link")) 
                    {
                        if (insideItem)
                            links.add(xpp.nextText()); //extract the link of article
                    }
                }
                else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item"))
                {
                    insideItem=false;
                }

                eventType = xpp.next(); //move to next element
            }

        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        // Binding data
        ArrayAdapter adapter = new ArrayAdapter(this,
                android.R.layout.simple_list_item_1, headlines);

        setListAdapter(adapter);

    }

public InputStream getInputStream(URL url) {
   try {
       return url.openConnection().getInputStream();
   } catch (IOException e) {
       return null;
     }
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
   Uri uri = Uri.parse((String) links.get(position));
   Intent intent = new Intent(Intent.ACTION_VIEW, uri);
   startActivity(intent);
}

} 
```

这就是我的全部代码，告诉我要创建哪些新方法以及要在该方法中传输的代码。太好了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T06:03:57.180

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

       InitTask _initTask = new InitTask();
        _initTask.execute( this );

} 
```

像这样的东西......

```
/**
     * sub-class of AsyncTask
     */
    protected class InitTask extends AsyncTask<Context, Integer, ArrayList>
    {
        // -- run intensive processes here
        // -- notice that the datatype of the first param in the class definition matches the param passed to this method 
        // -- and that the datatype of the last param in the class definition matches the return type of this method
                @Override
                protected String doInBackground( Context... params ) 
                {

                        return inBackground();
                }

                // -- gets called just before thread begins
                @Override
                protected void onPreExecute() 
                {
                        Log.i( "makemachine", "onPreExecute()" );
                        super.onPreExecute();

                }

                // -- called from the publish progress 
                // -- notice that the datatype of the second param gets passed to this method
                @Override
                protected void onProgressUpdate(Integer... values) 
                {
                        super.onProgressUpdate(values);
                        Log.i( "makemachine", "onProgressUpdate(): " +  String.valueOf( values[0] ) );
                }

                // -- called if the cancel button is pressed
                @Override
                protected void onCancelled()
                {
                        super.onCancelled();
                        Log.i( "makemachine", "onCancelled()" );

                }

                // -- called as soon as doInBackground method completes
                // -- notice that the third param gets passed to this method
                @Override
                protected void onPostExecute( ArrayList result ) 
                {
                        super.onPostExecute(result);
                        Log.i( "makemachine", "onPostExecute(): " + result );
              // Binding data
                 ArrayAdapter adapter = new ArrayAdapter(this,
                          android.R.layout.simple_list_item_1, result );

                   SimpleRssReaderActivity.this.setListAdapter(adapter);

                }
    }    
 private ArrayList inBackground(){

// Initializing instance variables arrays
        headlines = new ArrayList();
        links = new ArrayList();

        try {
            URL url = new URL("http://feeds.pcworld.com/pcworld/latestnews");

            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(false);
            XmlPullParser xpp = factory.newPullParser();

                //  get the XML from an input stream
            xpp.setInput(getInputStream(url), "UTF_8");

            boolean insideItem = false;

                // Returns the type of current event: START_TAG, END_TAG, etc..
            int eventType = xpp.getEventType();
            while (eventType != XmlPullParser.END_DOCUMENT) 
            {
                    if (eventType == XmlPullParser.START_TAG) 
                {

                    if (xpp.getName().equalsIgnoreCase("item")) 
                    {
                        insideItem = true;
                    } 
                    else if (xpp.getName().equalsIgnoreCase("title")) 
                    {
                        if (insideItem)
                            headlines.add(xpp.nextText()); //extract the headline
                    } 
                    else if (xpp.getName().equalsIgnoreCase("link")) 
                    {
                        if (insideItem)
                            links.add(xpp.nextText()); //extract the link of article
                    }
                }
                else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item"))
                {
                    insideItem=false;
                }

                eventType = xpp.next(); //move to next element
            }

        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

     return headlines ;

} 
```

这个例子是根据你的代码，但如果可能的话，我想提出一些建议，不是必须但应该使用

1-创建和设置适配器工作应保留在 Oncreate 中，只需在此处设置空数组列表并将该列表传递给 Asytask（在构造函数中）并填充相同的数据，然后调用 onPostExecute 中更改的通知数据集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T06:04:30.537

好吧我真的不知道你想在异步任务中做什么方法，但基本上你在这里使用这个模型

```
public class PostTask extends AsyncTask<Void/*what the doInBackground method wants*/, String/* What the onProgress method wants*/, Boolean /*What the doInBackground method returns*/> {

        @Override
        protected Boolean doInBackground(Void... params) {
            boolean result = false;

            //All your code goes in here 

            //If you want to do something on the UI use progress update

            publishProgress("progress");
            return result;
        }

        protected void onProgressUpdate(String... progress) {
            StringBuilder str = new StringBuilder();
                for (int i = 1; i < progress.length; i++) {
                    str.append(progress[i] + " ");
                }

        }
    } 
```

您想在异步任务中完成所有网络任务：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T06:03:16.703

除了通过创建适配器并设置它来更新 UI 的部分之外，所有内容都在 doInBackground 中。这在 onPostExecute 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T06:04:28.807

对于 android 中的每个应用程序，都有一个称为 UI 线程的主线程。如果您一直在 UI 线程中执行任务，您的应用程序可能无法很好地响应并导致强制关闭一段时间。为避免此类问题，您必须使用异步任务。我建议您阅读[Process&Threads](http://developer.android.com/guide/components/processes-and-threads.html)，他们在其中解释了如何在后台处理耗时任务。您必须继承 AsyncTask 并实现 doInBackground() 回调方法来执行长任务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T06:09:47.423

1.  为您的异步任务创建一个类

    示例：MyActivity.java =>

    ```
    public class MyActivity extends MyBaseActivity {
      ...
      MyDownloaderTask downloaderTask = null;
      ...

      public void onCreate (Bundl savedInstanceState) {
        ...
        downloaderTask = new MyDownloaderTask ();
        ...
      }
    }

    private class MyDownloaderTask extends AsyncTask<Object, String, Boolean> {
      ...
      @Override
      protected void onPreExecute () {
        ... 
    ```

2.  根据需要将您的 XML 方法移动到新的“下载器”类中。

    我的猜测是您只需将所有内容剪切/粘贴到“doInBackground（）”的覆盖中

3.  这是一个很好的教程：

    *   [http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

    <= 往下看“5\. 教程：AsyncTask”

'希望有帮助

# ruby-on-rails - 你如何启用“sunspot for rails”的部分匹配？

> ID：11167252
> 
> 赞同：5
> 
> 时间：2012-06-23T05:51:39.923
> 
> 标签：ruby-on-rails, sunspot-rails

我刚刚完成了 sunspot_rails 的设置，除了一件事之外，它似乎运行良好。在我制作了如下 3 条记录后

1.  姓名=约翰
2.  姓名=约翰2
3.  姓名=约翰3

当我用关键字“John”搜索时，只显示第一条记录。看起来完全匹配。我想让它们都显示为搜索结果。

这应该默认发生吗？还是我设置错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T08:22:10.400

如果要在全文搜索中返回子字符串，可以查看

[https://github.com/sunspot/sunspot/wiki/Matching-substrings-in-fulltext-search](https://github.com/sunspot/sunspot/wiki/Matching-substrings-in-fulltext-search)

您还可以`sunspot_solr.rb`在 myapp/config/initializers/ 中添加一个用于对结果进行分页的文件：

```
Sunspot.config.pagination.default_per_page = 100 
```

为这种情况返回 100 个结果。

添加：

您的`schema.xml`文件创建于`yourappfolder/solr/conf`

您也可以添加`<filter class="solr.NGramFilterFactory"/>`以匹配任意子字符串。

这是我对 schema.xml 的特定配置：

```
<fieldType name="text" class="solr.TextField" omitNorms="false">
  <analyzer>
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StandardFilterFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType>
<fieldtype class="solr.TextField" name="text_pre" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.NGramFilterFactory" minGramSize="2" maxGramSize="10"/>
    <filter class="solr.ISOLatin1AccentFilterFactory"/>
    <filter class="solr.TrimFilterFactory" />
    <filter class="solr.EdgeNGramFilterFactory" minGramSize="2" maxGramSize="10"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.ISOLatin1AccentFilterFactory"/>
    <filter class="solr.TrimFilterFactory" />
  </analyzer>
</fieldtype> 
```

**对我来说，它确实适用于所有关键字的完整字符串和子字符串。请不要忘记重新启动服务器并重新索引您的模型以使更改生效。**

问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T06:54:05.977

谢谢！！！

阻止女孩控制器（girls_controller.rb）

```
def index

  @search = Girl.search do  
    fulltext params[:search]  
  end  
  @girls = @search.results 

#    @girls = Girl.all
#
#    respond_to do |format|
#      format.html # index.html.erb
#      format.json { render json: @girls }
#    end
end 
```

阻止女孩模型（girl.rb）

```
searchable do 
  text :name_en, :name_es, name_ja
end 
```

# html - HTML5，jQuery 移动

> ID：11167254
> 
> 赞同：0
> 
> 时间：2012-06-23T05:52:00.410
> 
> 标签：html, jquery-mobile

我正在使用 html5 和 jquerymobile 框架 1.1 来创建这个应用程序。单击下一个输入框的橙色按钮时，我需要弹出移动键盘

谁能让我知道如何解决这个问题？

```
<div class="field-container">
    <div class="dataarealeft">&nbsp;&nbsp;&nbsp;Monthly Income</div>
        <div class="dataarearight">
         <input data-theme="c"  type="number" min="500" max="10000" name="monthly-income" id="monthly-income" value=""  >
                     <img src="css/images/orangekey.png"/></input>
    </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T07:46:00.813

如果在“单击”图像时将焦点放在输入框上就足够了吗？

# asp.net-mvc-3 - 如何验证 HTML 输入以防止 XSS？

> ID：11167263
> 
> 赞同：5
> 
> 时间：2012-06-23T05:54:44.977
> 
> 标签：asp.net-mvc-3

例如，StackExchange 将 HTML 的子集列入白名单： [https ://meta.stackexchange.com/questions/1777/what-html-tags-are-allowed-on-stack-exchange-sites](https://meta.stackexchange.com/questions/1777/what-html-tags-are-allowed-on-stack-exchange-sites)

您如何在控制器中执行此操作以确保用户输入是安全的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T07:13:02.007

这种方法与 StackExchange 不同，但我发现 AntiXSS 4.x 库是一种清理输入以允许“安全”HTML 的简单方法。

[http://www.microsoft.com/en-us/download/details.aspx?id=28589](http://www.microsoft.com/en-us/download/details.aspx?id=28589)您可以在此处下载一个版本，但我将其链接为有用的 DOCX 文件。我的首选方法是使用 NuGet 包管理器来获取最新的 AntiXSS 包。

您可以使用 4.x AntiXss 库中的 HtmlSanitizationLibrary 程序集。请注意，GetSafeHtml() 位于 Microsoft.Security.Application.Sanitizer 下的 HtmlSanitizationLibrary 中。

```
content = Sanitizer.GetSafeHtml(userInput); 
```

这可以在保存到数据库之前完成。优点是立即删除恶意内容，输出时不必担心。缺点是它不会处理任何现有的数据库内容，并且您必须在任何时候进行数据库更新时应用它。

另一种方法是每次输出内容时都使用此方法。

我很想听听首选的方法是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T08:00:12.240

您可以尝试 JSoup 解析器，它除了清理您的 HTML 输入外，还将提供许多开箱即用的功能。您可以访问[http://jsoup.org/](http://jsoup.org/)了解有关 JSoup 的更多详细信息并从那里下载二进制文件。它提供了 DOM 方法来遍历您的 HTML 树并获取所需的元素。

尽管清理 HTML 生成的代码以防止 XSS 攻击是一种很好的做法，但我强烈建议避免使用任何解析器通过清理 HTML 输入来避免 XSS 附加。如果您的 HTML 树非常大，那么响应时间会增加很多。在清理您的 HTML 树时，您应该确保无论用户在 FORM 中输入的内容是正确的，并且符合预期值。

您可以访问[www.owasp.org](http://www.owasp.org)以了解有关如何避免 XSS 攻击的更多信息。该站点为您提供了可能的备忘单，以确保您的 HTML 树不受任何 XSS 攻击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T12:11:43.083

ASP.NET HttpUtility.Htmlencode() 为您提供。但是如果你想阻止危险的脚本，首先**不要将**它插入到你的数据库中。首先，在插入数据库之前清理 HTML 文本。

我找到了一个为你做的课程：http: [//eksith.wordpress.com/2012/02/13/antixss-4-2-breaks-everything/](http://eksith.wordpress.com/2012/02/13/antixss-4-2-breaks-everything/)

它工作正常，您可以将新标签和属性添加到 Sanitizer 的自定义白名单中。

注意：Microsoft Sanitizer 和 Anti-XSS 库对我没有用。也许你也可以试试。

# java - 在 FrameView 中未在 Windows 操作系统上显示 JDesktopPane 和 JinternalFrame

> ID：11167268
> 
> 赞同：0
> 
> 时间：2012-06-23T05:55:28.843
> 
> 标签：java, windows, swing, netbeans, jsr296

我正在使用 netbeans 6.9 和 ubuntu。我制作了一个带有 netbeans 向导的简单 Java 桌面应用程序。然后，当我尝试在 linux 上运行时，jdesktoppane 在我的应用程序底部显示所有打开的 jinternalframe，但是当我在 windows xp o windows 7 上运行时，jdesktoppane 没有显示。这里有一些图片来理解这个问题。在 Skydrive 上的所有图像 http://sdrv.ms/KSX2cw

FrameView 的 Netbeans 配置。在这里您可以看到我将组件更改为 JDesktopPane 的 FrameView 的属性。

这是在 linux 上运行的应用程序。所有 JInternalFrame 都显示在 JDesktopPane 栏上。这是在 Skydrive 上看到的图像： [http ://sdrv.ms/MJz2T0](http://sdrv.ms/MJz2T0)

这是在 Windows 7（或 Windows XP）上运行的应用程序。这里没有显示打开的 JInteralFrame。这是在 Skydrive 上看到的图像： [http ://sdrv.ms/MJzdh5](http://sdrv.ms/MJzdh5)

我没有对代码进行任何其他更改，而是添加了 JInternalFrame。

最后，在 Windows 操作系统上打开 JInternalFrame 的 JDesktopPane 在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T16:24:08.890

NetBeans 已经[放弃了](http://forums.netbeans.org/topic46715.html)对[jsr296](/questions/tagged/jsr296 "显示标记为“jsr296”的问题")的支持。此[答案](https://stackoverflow.com/a/2561540/230513)可能会指导您继续前进，并且[*如何使用内部框架*](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)可能会有所帮助。更多示例可在[此处](https://stackoverflow.com/a/8090328/230513)、[此处](https://stackoverflow.com/q/9414728/230513)和[此处找到](https://stackoverflow.com/a/2741726/230513)。

# logging - Azure 登录 1.7 SDK

> ID：11167270
> 
> 赞同：4
> 
> 时间：2012-06-23T05:55:55.857
> 
> 标签：logging, azure

将我的 azure 项目升级到 SDK 版本 1.7 后，日志已停止传输到存储。我已经看了几个小时，看不出发生了什么变化（差异也无济于事）。

我想我需要一双新的眼睛来帮助定位问题。你看这里有什么不对吗？1.7SDK 中的设置是否发生了变化？

**网页配置**

```
 <system.diagnostics xdt:Transform="Insert">
    <trace>
      <listeners>
        <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" name="AzureDiagnostics">
          <filter type="" />
        </add>
      </listeners>
    </trace>
  </system.diagnostics> 
```

**服务定义**

```
<Imports>
  <Import moduleName="Diagnostics" />
</Imports> 
```

**云配置**

```
<ConfigurationSettings>
      <Setting name="Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString"
               value="DefaultEndpointsProtocol=https;AccountName=[account];AccountKey=[key]" />
</ConfigurationSettings> 
```

**启动**

```
var config = DiagnosticMonitor.GetDefaultInitialConfiguration();

//event log
config.WindowsEventLog.DataSources.Add("System!*");
config.WindowsEventLog.DataSources.Add("Application!*");
config.WindowsEventLog.ScheduledTransferPeriod = TimeSpan.FromMinutes(5);
config.WindowsEventLog.ScheduledTransferLogLevelFilter = LogLevel.Warning;

config.Logs.ScheduledTransferPeriod = System.TimeSpan.FromMinutes(5);
config.Logs.ScheduledTransferLogLevelFilter = LogLevel.Information;
DiagnosticMonitor.Start("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString", config);

return base.OnStart(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T13:34:52.357

问题在于您的 web.config，您需要将程序集版本更新为 1.7.0.0：

Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener，Microsoft.WindowsAzure.Diagnostics，版本= **1.7.0.0**，文化=中性，PublicKeyToken=31bf3856ad364e35

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T16:12:54.557

您还需要遵循@Sandrino 的建议，我也看到了一些代码问题。您还没有使用 SetCurrentConfiguration() 和 GetDefaultInitialConfiguration() 来最终节省传输时间和日志级别。您必须使用这些 API 的集合，如下所示：

```
GetDefaultInitialConfiguration() 
SetCurrentConfiguration() 
```

或者

```
GetCurrentConfiguration()
SetCurrentConfiguration() 
```

如果您开始在应用程序中收集跟踪消息，这可能会导致[问题](https://stackoverflow.com/questions/10870665/azure-diagnostics-and-wadlogstable)，因此最好让此代码完整..

# algorithm - 动态规划帮助 LISA-SPOJ

> ID：11167272
> 
> 赞同：4
> 
> 时间：2012-06-23T05:56:41.633
> 
> 标签：algorithm

我试图解决这个问题 - [http://www.spoj.pl/problems/LISA/](http://www.spoj.pl/problems/LISA/)

我最初想到了 Greedy，但后来意识到它行不通。这似乎是一个DP问题。我无法形成递归关系。我无法形成递归关系。不只是这个问题，每当我遇到一个稍微困难的DP问题时，我都会卡住。我知道这一定很常见，实践会有所帮助。但我只是从一个问题转移到另一个问题而没有真正找到解决方案。

对于上述问题和一般情况下，DP 遇到的任何建议都会很棒。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T07:54:11.777

请注意，允许的操作只有`+`和`*`- 关于两个操作数严格递增的二元操作（它们是正数）。

令`dp[l][r]`为子串 [l,r] 的最大结果

以下是有关此问题的提示，也适用于每个 dp。

1) 什么是基本情况？（提示：非常简单的东西，不会通过添加/删除括号来改变它的值）

2) 你如何从大问题转移到小问题？（提示：您可以尝试找到上次操作的位置）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T22:16:48.497

解决这个问题只需要一个简单的矩阵链乘法实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-29T16:15:55.777

1.  将有 n/2+1 个数字
    2.  n/2 符号
    3.  为每个符号分配剩下的数字。
    4.  创建一个方阵用相应的数字初始化对角线，现在 i,j=max((i,k)(sign right of kth number)(k+1,j)) i<=k
    5.  (0,m-1) 将是答案
    6.  请注意，它将流向（0，m-1），因此是 DAG（有向无环图）。
    7.  **拇指规则**：如果问题的任何图形表示可以优化为 DAG，则可以通过 DP 解决

有关解决方案，请参阅： [https ://shashankmishracoder.wordpress.com/2019/03/29/spoj-lisa-matrix-chain-multiplication-variation/](https://shashankmishracoder.wordpress.com/2019/03/29/spoj-lisa-matrix-chain-multiplication-variation/)

# linux-kernel - 在 DM368 板上安装 uinput.ko 文件

> ID：11167273
> 
> 赞同：0
> 
> 时间：2012-06-23T05:56:45.823
> 
> 标签：linux-kernel, embedded-linux

我在 linux 平台上使用 DM368 板。我有内置的 uinput.c 文件，但我不知道如何从中生成 .ko 文件。以及如何在 DM368 板上安装此文件。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T05:48:52.630

您可以使用[本](http://www.cyberciti.biz/tips/build-linux-kernel-module-against-installed-kernel-source-tree.html)教程中的步骤来编译内核模块

创建一个 Makefile

```
obj-m := uinput.o
KDIR := <point to your Linux kernel source directory>
PWD := $(shell pwd)
default:
        $(MAKE) -C $(KDIR) SUBDIRS=$(PWD) modules 
```

然后调用 make

```
make 
```

# javascript - 返回“未定义”的简单 JavaScript 字符串变量

> ID：11167274
> 
> 赞同：0
> 
> 时间：2012-06-23T05:56:46.590
> 
> 标签：javascript

我基本上是在尝试使用用户输入创建一个对 url 友好的查询字符串。变量替换空格和@s 并将它们加在一起，然后函数应该在段落中显示url。这让我觉得自己很愚蠢，因为我知道这很简单，我搞砸了。请指出我的错误。附带说明一下，是否有更好的方法可以在没有所有变量的情况下进行所有这些替换？

以下代码应返回类似于以下内容的字符串： **https ://www.somewebsite.com/formhandler.php?&fname=gordie&address=123+main+street&email=something%40somewhere.com**

```
<SCRIPT TYPE="TEXT/JAVASCRIPT">

var fnstr = document.getElementById("firstname").value; 
var fncutspace = fnstr.trim();
var fnrepspace = fncutspace.replace(/ /g,"+");
var fnfinal = fnrepspace.replace("@","%40");
var adstr = document.getElementById("address").value; 
var adcutspace = adstr.trim();
var adrepspace = adcutspace.replace(/ /g,"+");
var adfinal = adrepspace.replace("@","%40");
var emstr = emdocument.getElementById("firstname").value; 
var emcutspace = emstr.trim();
var emrepspace = emcutspace.replace(/ /g,"+");
var emfinal = emrepspace.replace("@","%40");
var domurl = "https://www.somewebsite.com/formhandler.php?&fname=";
var secondchunk = "&address=";
var thirdchunk = "&email=";
var url = domurl + fnfinal + secondchunk + adfinal + thirdchunk + emfinal;

function createurl() {
document.getElementById("demo").innerHTML = url;
}
</SCRIPT>

<FORM action="javascript:createurl()">
Fisrt Name:<INPUT id="firstname" TYPE="TEXT"><br>
street address:<INPUT id="address" TYPE="TEXT"><br>
email address:<INPUT id="email" TYPE="TEXT"><br>
<input type="submit" value="GO">
</FORM>

<p id="demo"></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T06:07:58.803

```
<FORM action="javascript:createurl()">
Fisrt Name:<INPUT id="firstname" TYPE="TEXT"><br>
street address:<INPUT id="address" TYPE="TEXT"><br>
email address:<INPUT id="email" TYPE="TEXT"><br>
<input type="submit" value="GO">
</FORM>

<p id="demo"></p>

<SCRIPT TYPE="TEXT/JAVASCRIPT">

var fnstr = document.getElementById("firstname").value; 
var fncutspace = fnstr.trim();
var fnrepspace = fncutspace.replace(/ /g,"+");
var fnfinal = fnrepspace.replace("@","%40");
var adstr = document.getElementById("address").value; 
var adcutspace = adstr.trim();
var adrepspace = adcutspace.replace(/ /g,"+");
var adfinal = adrepspace.replace("@","%40");
var emstr = emdocument.getElementById("firstname").value; 
var emcutspace = emstr.trim();
var emrepspace = emcutspace.replace(/ /g,"+");
var emfinal = emrepspace.replace("@","%40");
var domurl = "https://www.somewebsite.com/formhandler.php?&fname=";
var secondchunk = "&address=";
var thirdchunk = "&email=";
var url = domurl + fnfinal + secondchunk + adfinal + thirdchunk + emfinal;

function createurl() {
document.getElementById("demo").innerHTML = url;
}
</SCRIPT> 
```

`window.onload`您可能应该在回调函数中执行所有依赖于 DOM 的 javascript函数。

```
window.onload = function ()
{
Javascript code goes here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T06:23:06.357

如果它应该基于用户输入，您应该移动要声明和设置的变量`createurl`：

```
function createurl() {
    var fnstr = document.getElementById("firstname").value; 
    var fncutspace = fnstr.trim();
    var fnrepspace = fncutspace.replace(/ /g,"+");
    var fnfinal = fnrepspace.replace("@","%40");
    // etc.
    var url = domurl + fnfinal + secondchunk + adfinal + thirdchunk + emfinal;

    document.getElementById("demo").innerHTML = url;
} 
```

这样，它们将在调用函数时设置为当前输入值。

> 附带说明一下，是否有更好的方法可以在没有所有变量的情况下进行所有这些替换？

您可以链接方法调用：

```
var fnInput = document.getElementById('firstname');
var fnfinal = fnInput.value.trim().replace(/ /g,"+").replace("@","%40"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-23T06:00:52.360

您可能只想使用内置的 JavaScript 函数`encodeURI`，`encodeURIComponent`或`escape`视情况而定：http: [//www.w3schools.com/jsref/jsref_encodeuri.asp](http://www.w3schools.com/jsref/jsref_encodeuri.asp)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-23T06:01:14.743

您应该使用`encodeURIComponent(string)`而不是修剪/替换您现在正在做的事情。

# c# - WP7 图像处理 API

> ID：11167276
> 
> 赞同：4
> 
> 时间：2012-06-23T05:57:44.987
> 
> 标签：c#, windows-phone-7, image-processing, windows-phone-7.1, windows-phone

我正在尝试在 Windows Phone 中找到用于图像处理（阈值、分割 n 字符匹配）的 API。我找不到可以在 WP7 上运行的东西

外面有什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T06:16:03.253

没有可用的东西可以做你正在寻找的东西。

您可以查看位于 Codeplex 的开源 ImageTools 库以开始开发自己的：http: [//imagetools.codeplex.com/documentation](http://imagetools.codeplex.com/documentation)

您还可以查看 LEAD Tools Imaging SDK，它可能会提供一些帮助： http: [//www.leadtools.com/sdk/image-processing/default.htm](http://www.leadtools.com/sdk/image-processing/default.htm)

# php - 将 phpgraphlib 图另存为图像

> ID：11167277
> 
> 赞同：2
> 
> 时间：2012-06-23T05:58:13.437
> 
> 标签：php, phpgraphlib

我的代码从 SQL 生成图形，我使用 phpgraphlib 生成图形。有没有办法将此图作为图像保存到服务器上的特定位置？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T06:09:17.050

我从未使用过它，但[查看文档](http://www.ebrueggeman.com/phpgraphlib/documentation/function-reference#constructor)：

> **构造函数**
> 
> `PHPGraphLib ( int $width, int $height, [string $filename] )`
> 
> ...
> 
> 如果您指定可选的文件名参数，PHPGraphLib 将不会显示在屏幕上，而是在与调用 PHPGraphLib 的脚本相同的目录中创建一个 .png 文件。

因此，使用`$filename`构造函数中的相关内容创建图形，当您调用`->createGraph()`.

# android - 如何允许用户在网络视图上发布他们的消息？

> ID：11167280
> 
> 赞同：0
> 
> 时间：2012-06-23T05:58:58.680
> 
> 标签：android, twitter, dialog

我正在做 Twitter 帖子。它工作正常。它直接推特我在 twitter_text 中设置的消息。

```
try {
    TwitterUtils.sendTweet(prefs, twitter_text);
    mTwitterHandler.post(mUpdateTwitterNotification);
} catch (Exception ex) {
    ex.printStackTrace();
} 
```

我想显示像脸书一样的对话框，用户可以在其中修改他们的推文。

那么，如何在授权后，在 android 中发布推文之前获得 Twitter 对话视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:43:35.713

如下所示进行一些更改： 1) 对于**PrepareRequestTokenActivity** Activity 进行更改，如在后台方法中一样

```
 @Override
    protected Void doInBackground(Uri...params) {
        final Uri uri = params[0];
        final String oauth_verifier = uri.getQueryParameter(OAuth.OAUTH_VERIFIER);

        try {
            provider.retrieveAccessToken(consumer, oauth_verifier);

            final Editor edit = prefs.edit();
            edit.putString(OAuth.OAUTH_TOKEN, consumer.getToken());
            edit.putString(OAuth.OAUTH_TOKEN_SECRET, consumer.getTokenSecret());
            edit.commit();

            String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
            String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

            //
            context.startActivity(new Intent(context,twitter.class));
            //executeAfterAccessTokenRetrieval();

            Log.i(TAG, "OAuth - Access Token Retrieved");

        } catch (Exception e) {
            Log.e(TAG, "OAuth - Access Token Retrieval Error", e);
        }

        return null;
    } 
```

我在 twitter 类中使用**twitter.class**作为 twitter 的主类，我的代码如下所示

```
 import oauth.signpost.OAuth;

 import android.app.Activity;

 import android.content.Intent;
 import android.content.SharedPreferences;
 import android.content.SharedPreferences.Editor;
 import android.content.pm.ActivityInfo;
 import android.os.Bundle;
 import android.os.Handler;
 import android.preference.PreferenceManager;
 import android.view.View;
 import android.widget.Button;
 import android.widget.EditText;
 import android.widget.TextView;
 import android.widget.Toast;

    public class twitter extends Activity{
private SharedPreferences prefs;
private final Handler mTwitterHandler = new Handler();
EditText et_sharedata;
Button bt_post,bt_login;
TextView loginstatus,tv_heading;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tw);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    this.prefs = PreferenceManager.getDefaultSharedPreferences(this);
    loginstatus=(TextView)findViewById(R.id.tv_twloginstatus);
    et_sharedata=(EditText)findViewById(R.id.et_twdata);
    tv_heading= (TextView)findViewById(R.id.tv_heading);
    tv_heading.setSelected(true);
    if(TwitterUtils.isAuthenticated(prefs))
    {

    }else{
        Intent i = new Intent(twitter.this, PrepareRequestTokenActivity.class);
        startActivity(i);
    }

}

public void onClick(View v){
    switch(v.getId()){
    case R.id.bt_twshare:{
         String s_spin_text = et_sharedata.getText().toString();

            try {
                TwitterUtils.sendTweet(prefs,s_spin_text);
                //TwitterUtils.sendTweet(prefs,getTweetMsg());
                mTwitterHandler.post(mUpdateTwitterNotification);
                twitter.this.finish();
            } catch (Exception ex) {
                ex.printStackTrace();

            } 

    }break;
    case R.id.iv_back:
        twitter.this.finish();
        break;
    case R.id.iv_index:
        startActivity(new Intent(this,home.class));
        break;

    }
}
@Override
protected void onResume() {
    super.onResume();
    updateLoginStatus();
}
public void updateLoginStatus() {
    if(TwitterUtils.isAuthenticated(prefs))
    {
        loginstatus.setText("You Are Logged In Twitter");
    }else{
        loginstatus.setText("You Are Not Logged In Twitter");
    }
}
private void clearCredentials() {
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    final Editor edit = prefs.edit();
    edit.remove(OAuth.OAUTH_TOKEN);
    edit.remove(OAuth.OAUTH_TOKEN_SECRET);
    edit.commit();
}
final Runnable mUpdateTwitterNotification = new Runnable() {
    public void run() {
        Toast.makeText(getBaseContext(), "Tweet sent !", Toast.LENGTH_LONG).show();
    }
  };
  } 
```

而我的**tw.xml**如下图

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="wrap_content"
       android:layout_height="match_parent"
       android:background="@drawable/mainbg"
       android:layout_gravity="center"
       android:orientation="vertical" >
    <RelativeLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/top_strip"
     >

     <ImageView
        android:id="@+id/iv_back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:clickable="true"
        android:onClick="onClick"
        android:src="@drawable/back" />

    <TextView
        android:id="@+id/tv_heading"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="100dp"
        android:text="Increase Your Brain Power"
        android:ellipsize="marquee"
        android:maxWidth="220dp" 
        android:fadingEdge="horizontal"
        android:marqueeRepeatLimit="marquee_forever"
        android:scrollHorizontally="true"  
        android:singleLine="true" 
        android:textColor="#ffffff"
        android:textSize="20px"
        />

     <ImageView
        android:id="@+id/iv_index"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:clickable="true"
        android:onClick="onClick"
        android:src="@drawable/index" />
</RelativeLayout>
<RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical" >

 <TextView
        android:id="@+id/tv_twloginstatus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="46dp"
        android:text=""
        android:textColor="#000000" />

     <Button
        android:id="@+id/bt_twshare"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
         android:clickable="true"
        android:onClick="onClick"
       android:background="@drawable/post_data"/>
</RelativeLayout>

<EditText
    android:id="@+id/et_twdata"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.37" 
    android:maxLength="140"
     android:layout_marginLeft="5dp"
     android:layout_marginRight="5dp"
    android:layout_marginBottom="140dp"
    android:gravity="top">"

</EditText>

 </LinearLayout> 
```

# css - Webkit CSS来控制输入[type = color]中颜色周围的框？

> ID：11167281
> 
> 赞同：63
> 
> 时间：2012-06-23T05:58:59.313
> 
> 标签：css, html, google-chrome, webkit, color-picker

是否有特定于 Webkit 的 CSS 样式可以让我控制颜色周围的框的颜色/大小/样式`input[type=color]`？

我已经设置了输入的颜色和背景颜色，因此它与我用于旧版 Chrome 和 Firefox 的交叉兼容性 polyfill 看起来不错。

现在 Chrome 实际上有一个*颜色选择器*`1px`，当输入的颜色和背景颜色都设置为相同的颜色时，颜色周围有一个框，在输入的中间会留下一个灰色的框。

是否有一些 CSS 可以摆脱它，或者通过将该框的宽度设置为 0，将样式更改为`none`，或者，最坏的情况，将颜色设置为与颜色和背景颜色相同？

* * *

在这张图片中，我说的是白色区域周围和绿色之外的灰色框：

![拾色器截图](../Images/4b7457bf4d49427c989b68a604dd3b49.png)

我找到了一种解决方法，即设置足够高的填充以使框（灰色边框和绿色内容）被挤压为 0 大小。但这真的很hacky，并且在 Firefox 中看起来不太好。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-07-13T13:12:45.383

WebKit 有[特殊的 CSS 选择器](http://trac.webkit.org/wiki/Styling%20Form%20Controls)，您可以使用它来自定义表单控件，但它们不是官方的。
未来对 WebKit 的更新可能会破坏它。

**请不要用于生产！！**

但是请随意在个人项目中使用它:)

# 方法一

使用特定于 webkit 的选择器来主要隐藏输入的非彩色部分。

```
input[type="color"] {
	-webkit-appearance: none;
	border: none;
	width: 32px;
	height: 32px;
}
input[type="color"]::-webkit-color-swatch-wrapper {
	padding: 0;
}
input[type="color"]::-webkit-color-swatch {
	border: none;
}
```

```
<input type=color value="#ff0000">
```

# 方法二

隐藏颜色输入 ( `opacity:0`) 并使用 JavaScript 将包装器的背景设置为输入值。

```
var color_picker = document.getElementById("color-picker");
var color_picker_wrapper = document.getElementById("color-picker-wrapper");
color_picker.onchange = function() {
	color_picker_wrapper.style.backgroundColor = color_picker.value;    
}
color_picker_wrapper.style.backgroundColor = color_picker.value;
```

```
input[type="color"] {
	opacity: 0;
	display: block;
	width: 32px;
	height: 32px;
	border: none;
}
#color-picker-wrapper {
	float: left;
}
```

```
<div id="color-picker-wrapper">
	<input type="color" value="#ff0000" id="color-picker">
</div>
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-09-28T15:20:29.030

一个好的解决方法是：

1.  将颜色选择器包裹在标签中。
2.  将颜色选择器的可见性设置为 false。
3.  将标签的背景颜色绑定到颜色选择器的值。

现在，您有一个易于设置样式的标签，单击该标签会打开您的颜色选择器。正如评论中所讨论的，单击标签会激活颜色选择器*，而无需*任何 javascript；这是默认行为。

```
$(document).on('change', 'input[type=color]', function() {
  this.parentNode.style.backgroundColor = this.value;
});
```

```
input {
  visibility: hidden;
}

label {
  background-color: black;
  height: 32px;
  width: 32px;
  position: fixed;
}
```

```
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<label><input type="color"></label>
```

*JSFiddle：[https ://jsfiddle.net/9zhap7rb/3/](https://jsfiddle.net/9zhap7rb/3/)*

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-05-20T02:40:58.360

我想我正在使用一个简单的解决方案，但不是那么优雅。您可以使用 div 包装输入并使输入大于容器，之后您可以根据需要调整容器的形状。您还可以使用带有 for 属性的标签来创建带有一些文本的可点击按钮。

我做了一个例子：

```
.input-color-container {
  position: relative;
  overflow: hidden;
  width: 40px;
  height: 40px;
  border: solid 2px #ddd;
  border-radius: 40px;
}

.input-color {
  position: absolute;
  right: -8px;
  top: -8px;
  width: 56px;
  height: 56px;
  border: none;
}

.input-color-label {
  cursor: pointer;
  text-decoration: underline;
  color: #3498db;
}
```

```
<div class="input-color-container">
  <input id="input-color" value="#ed6868" class="input-color" type="color">
</div>
<label class="input-color-label" for="input-color">
  I am a clickable label, try me
</label>
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-03-16T20:27:28.053

这就是我最近为一个艺术项目所做的。我是新手，所以如果我做错了，请告诉我。

```
input[type=color]{
	width: 40px;
	height: 40px;
	border: none;
	border-radius: 40px;
	background: none;
}
input[type="color"]::-webkit-color-swatch-wrapper {
	padding: 0;
}
input[type="color"]::-webkit-color-swatch {
	border: solid 1px #000; /*change color of the swatch border here*/
	border-radius: 40px;
}
```

```
<input type="color" value="#C899F5">
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-11-26T12:06:03.757

在 @Henrique Rotava 的方法的基础上，我们可以利用隐藏的溢出和负边距来创建一个更灵活的包装器，并减少 CSS 标记。基本上，选择器变得足够大并且足够伸展，当包装器夹住它时，只有中间出现。

包装器必须声明一个`width`and `height`，这对于您想要设置包装器样式的大多数用例来说应该没问题，而不是`input`. 否则元素将不可见。对于包装器，所有其他格式都是可选的。

```
input[type='color'] {
  padding: 0;
  width: 150%;
  height: 150%;
  margin: -25%;
}

.cp_wrapper {
  overflow: hidden;
  width: 2em;
  height: 2em;
  /* optional formatting below here */
  border-radius: 50%;
  box-shadow: 1px 1px 3px 0px grey;
  margin: 1em;
}
```

```
<div class="cp_wrapper">
  <input type="color" name="cp_1" value="#ff8888" />
</div>
<div class="cp_wrapper">
  <input type="color" name="cp_2" value="#88ff88" />
</div>
<div class="cp_wrapper">
  <input type="color" name="cp_3" value="#8888ff" />
</div>
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-01-26T18:50:41.900

不幸的是，颜色输入非常挑剔。不同的浏览器对待它们的方式不同。例如，Chrome 将根据`width`/ `height`+调整输入的大小`border-width`。另一方面，Firefox 将使用`width`/`height`和`border-width`. 这使得等间距非常困难，就其`<input type=color>`本身而言。

然而，我们*能做*的就是移除除了选取的颜色本身之外的所有内容，并在其周围放置一个包装器，以便能够更可预测地处理输入周围的间距。

```
label.color-picker {
  width: 150px; /* Width of color picker */
  border: 1px solid #ccc; /* Outer border */
  border-radius: 3px; /* Border radius of outer border */
  padding: 5px; /* Space between outer border and color picker */
  background: #fff; /* Color between outer border and color picker */

  display: block; /* Contain color picker within label */
}

label.color-picker > span {
  border: 1px solid #ccc; /* Border around color in color picker */

  display: block; /* Contain color picker within span */
}

label.color-picker > span > input[type=color] {
  height: 10px; /* Height of color picker */

  display: block; /* Avoids space above/below color picker */
  width: 100%; /* Fill available horizontal space */
  border: none; /* Remove browser's border */
  padding: 0px; /* Remove space around color picker in Chrome */
}

/* Chrome styles */
label.color-picker > span > input[type=color]::-webkit-color-swatch-wrapper {
  padding: 0; /* Remove browser's padding around color picker */
}
label.color-picker > span > input[type=color]::-webkit-color-swatch {
  border: none; /* Remove browser's border around color in color picker */
}

/* Firefox styles */
label.color-picker > span > input[type=color]::-moz-color-swatch {
  border: none; /* Remove browser's border around color in color picker */
}
label.color-picker > span > input[type=color]::-moz-focus-inner {
  border: none; /* Remove browser's padding around color in color picker */
  padding: 0; /* Remove browser's padding around color in color picker */
}
```

```
<label class="color-picker">
    <span>
        <input type=color value="#ff00ff">
    </span>
</label>
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-06-17T16:12:04.613

这是漂亮的小颜色输入设计，您可以禁用默认框架`-webkit-appearance: none`，然后提供所需的样式。跳这有帮助:)

```
input[type="color"] {
   -webkit-appearance: none;
    width: 30px;
    height: 30px;
    border: 0;
    border-radius: 50%;
    padding: 0;
    overflow: hidden;
    box-shadow: 2px 2px 5px rgba(0,0,0,.1);
}
input[type="color"]::-webkit-color-swatch-wrapper {
    padding: 0;
}
input[type="color"]::-webkit-color-swatch {
    border: none;
}
```

```
<input type=color value="#A4A4A4">
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-10-15T12:23:35.133

此处未提及的另一种方法使用在输入元素本身上设置的自定义属性（变量），并由`onInput`元素上的事件处理程序直接控制。由于 CSS`attr`目前是无单元的，所以别无选择，只能创建一个类型的变量`color`并使用它。

这有点麻烦，但 HTML 仍然是单元素。

```
input[type=color]{
  --size: 100px;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  margin: 0;
  border: 0;
  padding: 0;
  width: 0;
  height: 0;
  background: white;
  margin: calc(var(--size)/-2) 0 0 calc(var(--size)/-2);
}

input[type=color]::before{
  content: '';
  display: block;
  background: var(--value);
  text-transform: uppercase;
  width: var(--size);
  height: var(--size);
  margin: calc(var(--size)/2) 0 0 calc(var(--size)/2);
  border: 2px black;
  position: relative;
  z-index: 1;
  border-radius: 50%;
  cursor: pointer;
}
```

```
<input type="color" value="#ff0000" style="--value:#ff0000" oninput="this.style.setProperty('--value', this.value)" />
```

* * *

## 2020 年 10 月：新`attr()` *类型*语法（尚未完成）

CSS有一个[非常酷的新特性](https://developer.mozilla.org/en-US/docs/Web/CSS/attr#%3Ccolor%3E_value)在这种情况下很有帮助，因为它可以访问`value`输入的动态属性并在伪元素中使用它。显然`type="color"`允许伪元素。

在撰写本文时，没有浏览器支持此[功能](https://developer.mozilla.org/en-US/docs/Web/CSS/attr#%3Ccolor%3E_value)，该功能允许在输入的伪元素`type`中`attr()`如此有效地`attr`指定，从而允许完全自定义：`background`

```
input[type=color]{
  appearance: none;
  margin: 0;
  border: 0;
  padding: 0;
  width: 0;
  height: 0;
  margin: -100px 0 0 -100px;
}

input[type=color]::before{
  content: '';
  display: block;
  background: white;
  background: attr(value color, white);
  width: 200px;
  height: 200px;
  margin: 100px 0 0 100px;
  border: 2px black;
  position: relative;
  z-index: 1;
  border-radius: 50%;
}
```

```
<input type="color" value="#ff0000" />
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-05-03T23:43:25.333

我认为这个解决方案比目前选择的 Keishi Hattori 最好。Keishi Hattori 的解决方案会在所选颜色周围留下暗淡的颜色，并且需要设置宽度/高度，如果添加边框则效果不佳。

我发现以下解决方案效果更好。

```
input[type="color"] {
  -webkit-appearance: none;
  position:relative;
}
input[type="color"]::-webkit-color-swatch {
  position:absolute;
  top:-1px;
  left:-1px;
  right:-1px;
  bottom:-1px;
  box-sizing: border-box;
  border:1px solid transparent;
}
```

```
<input type="color"  value="#ff0000">
```

如果需要，您可以添加边框。

```
input[type="color"].withborder {
  -webkit-appearance: none;
  position:relative;
  border:1px solid #000;
}

input[type="color"].withborder::-webkit-color-swatch {
  position:absolute;
  top:0px;
  left:0px;
  right:0px;
  bottom:0px;
  box-sizing: border-box;
  border:1px solid transparent;
}
```

```
<input type="color" class="withborder"  value="#ff0000">
```

如果需要，您可以在 input[type="color"] 中添加背景。您需要更改 ::-webkit-color-swatch 中的 0px。

```
input[type="color"].withborder {
  -webkit-appearance: none;
  position:relative;
  border:1px solid #000;
  background:#bbb;

}

input[type="color"].withborder::-webkit-color-swatch {
  position:absolute;
  top:4px;
  left:4px;
  right:4px;
  bottom:4px;
  box-sizing: border-box;
  border:0px solid transparent;
}
```

```
<input type="color" class="withborder"  value="#ff0000">
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-07T19:14:06.450

This may work, except IE.

```
input[type=color]{
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  margin: 0;
  border: 0;
  padding: 0;
  /*input[type=color] double the scale and clip the offset*/
  -webkit-transform: scale(2);
  transform: scale(2);
  -webkit-clip-path: inset(25%);
  clip-path: inset(25%);
}

input[type=color]:before{
  content: attr(value);
  text-shadow:.1em .1em #fff;
  font-size:.5em;
  width:50%;height:50%;
  left:25%;top:25%;
  text-align:center;
  position:absolute;
  background-image: url('data:image/gif;base64,R0lGODlhBgADAPABAICAgAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJFAABACwAAAAABgADAAACBkxggGfMBQAh+QQJFAABACwAAAAABgADAAACBQximHZbACH5BAUUAAEALAAAAAAGAAMAAAIFRGKXiVoAOw==');
  }
```

```
<input type="color" value="#ff0000" />
<input type="color" value="#00ff00" />
<input type="color" value="#0000ff" />
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2017-09-15T22:19:15.587

我的方法：

```
<div class="user__colors">
    <label><input type="color"/></label>
</div>

input {
    background-color: transparent;
    border: none;
    position: relative;
    width: 80px;
    height: 12px;
    &:after {
        position: absolute;
        content: '';
        display: block;
        width: 100%;
        height: 100%;
        background: url(../img/color-palette.jpg) repeat-y 0 0;
        background-size: contain;
        top: 0;
        border-radius: 3px;
    }
} 
```

它看起来像这样： http: [//prntscr.com/gloozc](http://prntscr.com/gloozc)

但是如果你按下 Ctl+F5，你会看到原始输入片刻。

# dart - 从 DOM 中移除元素

> ID：11167282
> 
> 赞同：1
> 
> 时间：2012-06-23T05:59:02.547
> 
> 标签：dart

我正在创建一个 div 元素并将其添加到 body 元素中，然后尝试删除该元素。这个缩写的代码说明了我正在尝试做的事情：

```
//create div
_backdropDiv = new DivElement();

//add div to body, this works as expected
window.document.query('body').elements.add(_backdropDiv);

//in some other method...
var body = window.document.query('body');

//it's odd the List<E> doesn't specify a remove method, we'll jump through some hoops...
var backdropIndex = body.elements.indexOf(_modalDiv);
body.elements.removeRange(backdropIndex, 1); //<--- NotImplementedException 
```

因此，从 DOM 中删除此元素的最明显方法不起作用，因为 removeRange 未实现。我应该以另一种方式解决这个问题吗？

在不相关的说明中，为什么没有`remove()`指定方法`List<E>`？必须执行两个操作 ( `indexOf()`, `removeRange()`) 似乎很笨重。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T12:06:57.537

答案并不明显，但看似简单。Node 接口（Element 扩展）有一个`remove()`方法可以将它从 DOM 中删除。

```
_backdropDiv.remove(); 
```

参考：[http ://api.dartlang.org/html/Node.html#remove](http://api.dartlang.org/html/Node.html#remove)

# jquery - jquery fadeToggle 和 removeAttr 功能

> ID：11167287
> 
> 赞同：0
> 
> 时间：2012-06-23T06:00:01.017
> 
> 标签：jquery

工作网址：[http ://runnerupapparel.com/building/](http://runnerupapparel.com/building/)

单击“信息”或“查看”链接后一切正常，但单击 x 关闭面板时，链接颜色不会变回灰色，#666。此外，当 fadeToggle 激活时其他导航链接不可用也会很漂亮。不完全确定如何接近那个。先感谢您。

```
$(document).ready(function() {

    $("#info").hide();
    $(".info").show();

    $('.info').click(function() {
        $("#info").fadeToggle();
        $(".info a").css({
            'color': '#d71635',
            'background': 'url(/building/images/bolt.png) left -23px no-repeat',
            'position': 'relative',
            'z-index': '9998'
        });
        $(".info").css({
            'background': 'url(/building/images/bolt.png) right -23px no-repeat',
            'position': 'relative',
            'z-index': '9999'
        });
    });

    $('.closeinfo').click(function() {
        $(".info a").removeAttr('style');
        $(".info").removeAttr('style');
        $("#info").fadeToggle();
    });

    $("#look").hide();
    $(".look").show();

    $('.look').click(function() {
        $("#look").fadeToggle();
        $(".look a").css({
            'color': '#d71635',
            'background': 'url(/building/images/bolt.png) left -23px no-repeat',
            'position': 'relative',
            'z-index': '9998'
        });
    });

    $('.closelook').click(function() {
        $(".look a").removeAttr('style');
        $("#look").fadeToggle();
    });

});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:15:05.217

所以从我可以告诉继承人我会做什么：

在您的 .css 文件中（或者您管理默认样式）为每个链接创建两个不同的类。一旦你完成了。然后，您可以使用 .toggleClass("newClass") 方法来回切换。当您单击任一链接两次时，这应该会消除颜色不会变回灰色。然后当您单击 x 按钮时，您可以将所有链接的类更改为使它们变为灰色的类：`$('.selector').attr('class','newClass')`

针对在显示信息或外观面板时无法单击其他链接的问题，这是由高度问题引起的。我访问了您提供的网站并进入了“检查员”模式并使用了您的 CSS 属性。当我取消选中设置为 454px 的高度属性时，问题就消失了。所以只需设置一个比你现在设置的小得多的高度，这应该可以工作。

# ubuntu - 未加载 Xdebug 扩展。使用 Xampp 在 Ubuntu 上不会生成代码覆盖率

> ID：11167288
> 
> 赞同：15
> 
> 时间：2012-06-23T06:00:09.000
> 
> 标签：ubuntu, hudson, phpunit, xampp, xdebug

我在使用 xampp 的 Ubuntu 服务器上安装 xdebug 时遇到问题。我知道在 Stack Overflow 中有几个关于此类问题的问题，但我没有找到任何解决方案。

首先这是`php --version`命令的输出：

```
PHP 5.3.8 (cli) (built: Sep 19 2011 13:29:27)  
Copyright (c) 1997-2011 The PHP Group  
Zend Engine v2.3.0, Copyright (c) 1998-2011 Zend Technologies  
    with Xdebug v2.2.0, Copyright (c) 2002-2012, by Derick Rethans 
```

命令输出`php --ini`：

```
Configuration File (php.ini) Path: /opt/lampp/etc  
Loaded Configuration File:         /opt/lampp/etc/php.ini  
Scan for additional .ini files in: (none)  
Additional .ini files parsed:      (none) 
```

命令输出`php -m`：

```
[PHP Modules]  
bcmath  
bz2  
calendar  
Core  
ctype  
curl  
date  
dba  
dom  
ereg  
exif  
fileinfo  
filter  
ftp  
gd  
gettext  
hash  
iconv  
imap  
intl  
json  
ldap  
libxml  
mbstring  
mcrypt  
memcache  
mhash  
ming  
mssql  
mysql  
mysqli
mysqlnd  
ncurses  
openssl  
pcntl  
pcre  
PDO  
pdo_mysql  
pdo_pgsql  
pdo_sqlite  
pgsql  
Phar  
posix  
radius  
Reflection  
session  
shmop  
SimpleXML  
soap  
sockets  
SPL  
SQLite  
sqlite3  
standard  
sybase_ct  
sysvsem  
sysvshm  
tokenizer  
wddx  
xdebug  
xml  
xmlreader  
xmlwriter  
xsl  
zip  
zlib  

[Zend Modules]  
xdebug 
```

当我粘贴 in 的输出时`phpinfo()`，`http://xdebug.org/wizard.php`该站点显示以下内容：

## 量身定制的安装说明

## 概括

*   **Xdebug 安装：** 2.2.0*   **服务器 API：**命令行界面*   **窗户：**没有*   **Zend 服务器：**没有*   **PHP版本：** 5.3.8*   **Zend API 编号：** 220090626*   **PHP API 编号：** 20090626*   **调试构建：**否*   **线程安全构建：**否*   **配置文件路径：** /opt/lampp/etc*   **配置文件：** /opt/lampp/etc/php.ini*   **扩展目录：** /opt/lampp/lib/php/extensions/no-debug-non-zts-20090626

## 您已经在运行最新的 Xdebug 版本

但无论如何，这里有说明：

... ... ... （截断的行） ... ... ...

我`/opt/lampp/etc/php.ini`在底部写了这个：

```
[xdebug]  
zend_extension = /opt/lampp/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so  
xdebug.profiler_output_dir = "/tmp/xdebug"  
xdebug.profiler_enable = On  
xdebug.remote_enable = On  
xdebug.remote_host = "localhost"  
xdebug.remote_port = 10000  
xdebug.remote_handler = "dbgp" 
```

的输出`phpunit --version`如下：

```
 PHPUnit 3.6.11 by Sebastian Bergmann. 
```

现在我的实际问题出现了：

当我使用以下命令时，它显示未安装 xdebug：

```
phpunit --coverage-html ~/build/logs/coverage 
```

该命令的输出如下：

```
The Xdebug extension is not loaded. No code coverage will be generated. 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-05T13:48:41.053

不确定它是否有帮助，但...

我在阅读 phpunit 教程时遇到了同样的错误 - 在第 7 章遇到错​​误。 [http://phpunit.de/manual/current/en/organizing-tests.html](http://phpunit.de/manual/current/en/organizing-tests.html)

我花了一段时间才意识到 xdebug 是在 /etc/php5/apache2/php.ini 中设置的，但不是在 /etc/php5/cli/php.ini 中。

将 xdebug 设置从 apache2 复制到 cli 后对我来说工作正常。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-25T07:44:09.030

phpunit 可能使用与您安装 Xdebug 的版本不同的 PHP 版本。尝试使用`php `which phpunit` --coverage-html ~/build/logs/coverage`，如果可行，则 phpunit 默认使用错误的 PHP。这可能是路径问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T13:32:57.610

在 php5 上的文件夹“cli”中查看您的“php.ini”，这没有您的 xdebug 的行参考。因此，为 xdebug 添加行。

# lua - 使用lua模拟登录

> ID：11167289
> 
> 赞同：3
> 
> 时间：2012-06-23T06:00:19.840
> 
> 标签：lua, http-post, luasocket

我们的应用程序需要使用 Lua 从网站获取一些数据。但是网站需要身份验证（如 google 的登录方法）。

我正在尝试使用 LuaSocket 库，但我找不到完整的代码示例，所以我只知道我需要做什么。

我知道 http.request() 有第二个可选参数，它允许我发送 POST 数据，并且我还可以使用完整的语法来指定 POST 方法和要发送的数据，但我不知道什么格式数据应该在里面，它应该是什么样子。桌子？细绳？什么？

我也知道我还需要设置内容类型和内容长度 - 但我不知道这些值应该是什么，也不知道如何找出它们。我不知道有什么选择和写什么。

有人可以帮助我。给我一个使用 lua 登录谷歌的完整示例？

对此的任何帮助将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T06:45:26.660

如果站点不使用 HTTP 基本身份验证，而是使用 HTML 表单来验证用户，并且您无法访问站点开发人员，那么弄清楚发生了什么的最好方法是查看浏览器的功能。

启动您的 Firebug 或 Google Chrome 开发者工具，或一些 HTTP 调试代理。

在浏览器中打开该站点，登录，然后查看浏览器为此做了哪些请求，以及该站点的回复是什么。您必须在程序中模仿相同的请求。

请注意，网站很可能会要求您在后续请求中发送会话信息以保持身份验证。它可能是一个 cookie（或多个）和/或一个 GET 参数。再次，看看浏览器做什么和模仿。

至于格式——在网上搜索示例，有一些。

更新：好的，这是一个例子。

请注意，示例中使用的 URL 将很快过期。[只需在http://requestb.in/](http://requestb.in/)创建您自己的。在浏览器中打开[http://requestb.in/vbpkxivb?inspect](http://requestb.in/vbpkxivb?inspect)以查看您的程序发送了哪些数据。不要向该服务发送真实的登录名和密码！

```
require 'socket.http'

local request_body = [[login=user&password=123]]

local response_body = { }

local res, code, response_headers = socket.http.request
{
  url = "http://requestb.in/vbpkxivb";
  method = "POST";
  headers = 
  {
    ["Content-Type"] = "application/x-www-form-urlencoded";
    ["Content-Length"] = #request_body;
  };
  source = ltn12.source.string(request_body);
  sink = ltn12.sink.table(response_body);
}

print("Status:", res and "OK" or "FAILED")
print("HTTP code:", code)
print("Response headers:")
if type(response_headers) == "table" then
  for k, v in pairs(response_headers) do
    print(k, ":", v)
  end
else
  -- Would be nil, if there is an error
  print("Not a table:", type(response_headers))
end
print("Response body:")
if type(response_body) == "table" then
  print(table.concat(response_body))
else
  -- Would be nil, if there is an error
  print("Not a table:", type(response_body))
end
print("Done dumping response") 
```

预期输出：

```
状态：好的
HTTP 代码：200
响应标头：
日期：2012 年 6 月 23 日星期六 07:49:13 GMT
内容类型：文本/html；字符集=utf-8
连接：关闭
内容长度：3
回复正文：
好的

完成倾销响应

```

# iphone - 如何在 iPhone 中检索和显示 XML 节点？

> ID：11167294
> 
> 赞同：1
> 
> 时间：2012-06-23T06:01:30.977
> 
> 标签：iphone, xml-parsing

```
 <items>
  <item>
  <pastor> Master Jojimon</pastor>  
   <video>
   youtube.com/embed/X_nJ7So9y04 
  </video>
  <name>Message by Master Jojimon</name>
    <lan>english</lan> 
```

我想检索视频 url 并显示在 tableview 中，我想播放这个视频 url，我现在使用 webView 我的 youtube 视频工作休息不工作，任何人请帮助我！我的完整程序代码 [如何在 iPhone 应用程序中从服务器播放视频 url](https://stackoverflow.com/questions/11155964/how-to-play-a-video-url-from-server-in-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:09:17.523

您可以使用 xml 解析器来解析 xml 以存储到自定义对象或数据类型`NSArray`等`NSDictionary`。

查看`NSXMLParser`此线程中的教程 - [https://stackoverflow.com/questions/6116827/looking-for-a-good-tutorial-on-nsxmlparser](https://stackoverflow.com/questions/6116827/looking-for-a-good-tutorial-on-nsxmlparser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:02:11.317

如果标题有多个值，只需使用标题解析您的 xml 内容，然后执行类似的操作

```
 for(int i=0;i<[xmlArray count];i++)
    {
        NSDictionary *dict=[xmlArray objectAtIndex:i];
       [pastorArray addObject:[dict valueForKey:@"pastor"]];
       [videoURLArray addObject:[dict valueForKey:@"video"]];
       [nsmeArray addObject:[dict valueForKey:@"name"]];
       [lanArray addObject:[dict valueForKey:@"lan"]];
    } 
```

//现在你可以一一打印数组值

# android - 如何动态生成imageviews的数量以及如何在android中将它们设置为imageview？

> ID：11167298
> 
> 赞同：0
> 
> 时间：2012-06-23T06:01:53.753
> 
> 标签：android

我正在开发安卓应用程序。我必须显示文本以及图像。我正在从数据库中获取文本和图像。数据库表包含两列。

Column1 Column2
文本数据 img1.png,img2.png,img3.png

文本数据2 img1.png

## 文本数据3 img1.png,img2.png

## ----

* * *

现在我在一个str1中获取Column1数据，在另一个str2中获取column2数据。我通过用逗号分隔 str2 将 str2 数据存储在 str3 数组中。

即str3 = str2.split(","); 所以 str3 包含所有图像名称。

现在我的要求是基于我需要生成那么多图像视图的 str3 的大小。例如 str3 大小为 2 所以我必须动态设置两个图像视图并且需要设置图像。我怎样才能做到这一点？

请帮我完成这项任务......提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:39:46.717

您的代码将是这样的，我没有为任何布局参数编写代码，您需要执行这些代码来根据您的设计格式化布局。

这是为了演示如何以编程方式生成视图并将其添加到活动中。

```
 LinearLayout llMain = new LinearLayout(this);
        for(int i=0;i<totalRowSize;i++)
        {
            LinearLayout llRow = new LinearLayout(this);
            String imagesString = "";//assign database second column ;
            String[] arrImages = imagesString.split(",");
            for(int j=0;j<arrImages.length;j++)
            {
                ImageView iv = new ImageView(this);
                iv.setImageBitmap(BitmapFactory.decodeFile(arrImages[j]));// get bitmap from image path
                llRow.addView(iv);
            }
            llMain.addView(llRow);
        }
        setContentView(llMain); 
```

# c# - Web服务（asmx）发现是可能的c#

> ID：11167299
> 
> 赞同：0
> 
> 时间：2012-06-23T06:01:58.937
> 
> 标签：c#, web-services, asmx

假设我有一个像 :http://localhost:32432/ 这样的 url 当我转到这个 url 时，我看到很多文件，包括 asmx 文件。

是否可以通过 url 获取所有 asmx 文件的列表？

我需要列出给定 URL 的所有 Web 服务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:10:57.630

首先，您根本不想使用 ASMX。它是一种遗留技术，仅用于向后兼容。

其次，不，您通常无法通过 Internet 枚举“文件夹”中的文件。

最后，在我看来，整个发现的想法是有问题的。一旦客户端发现了一项服务，它如何知道如何*处理*该服务？

# c# - 设计视图中的独立存储异常

> ID：11167300
> 
> 赞同：1
> 
> 时间：2012-06-23T06:02:03.987
> 
> 标签：c#, windows-phone-7

大家好，我在尝试编辑我的 UI 时遇到了一个孤立的异常

它说

> 无法确定调用者的应用程序身份。在 System.IO.IsolatedStorage.IsolatedStorage.InitStore（IsolatedStorageScope 范围，键入 appEvidenceType）在 System.IO.IsolatedStorage.IsolatedStorageFile.GetStore（IsolatedStorageScope 范围，键入 applicationEvidenceType）在“CLASS FILE NAME.cs”

当我尝试这样做时

```
 <data:scheduledItems x:Key="alarmCollection" />
</phone:PhoneApplicationPage.Resources> 
```

我用它来绑定数据。它可以工作，但我无法对我的设计视图做任何事情

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T08:21:39.810

在我看来，Visual Studio 正在尝试从隔离存储中检索数据，但它不能，因为它是 Visual Studio 而不是您的应用程序。如果您考虑一下，这是有道理的 - 隔离存储仅在应用程序部署到 Windows Phone 后创建，而不是在此之前创建。它在设计视图中不可用。

如果您想在设计视图中实际显示此数据，则不能。但是您可以检查是否附加了设计视图，并避免尝试以这种方式访问​​隔离存储。

```
using System.ComponentModel;

...

if (DesignerProperties.IsInDesignView)
{
    // return dummy data for the design view
}
else
{
   // grab data from isolated storage
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T08:23:10.327

您无法从 Visual Studio 访问独立存储。您需要`DesignerProperties.IsInDesignTool`在后面的代码中添加检查...。

```
if (!DesignerProperties.IsInDesignTool)
{
 schedulesItems = IsolatedStorageSettings.ApplicationSettings; 
} 
```

# image - JPEG/JPG 和 TIFF/TIF 这是正确或常用的扩展名

> ID：11167304
> 
> 赞同：1
> 
> 时间：2012-06-23T06:03:08.880
> 
> 标签：image, save

我发现许多图像编辑器提供以 JPEG 或 TIF 格式保存图像，扩展名为 .JPEG/.JPG 和 .TIF/.TIFF 我正在开发一个图像编辑工具，我的应用程序应该支持哪种格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T06:05:36.820

JPEG 比 TIF 更常见。PNG现在也很常见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T15:31:36.840

如果（根据评论）您询问每种格式更喜欢哪种扩展名，则差别很小：

**.jpeg** （非常轻微）更正确-漂亮-现代

**.jpg** （非常轻微）更兼容安全

兼容性/安全问题主要涉及使用[8.3 文件名](http://en.wikipedia.org/wiki/8.3_filename)结构的旧的基于 DOS 的文件系统。但这在 2012 年很少成为问题。

两者都可以 - 但是，请不要使用大写字母。

**.tif** vs **.tiff**也是如此（顺便说一句，**.html** vs **.htm**）

# asp.net - 这是一个好主意吗？通过设置会话变量在 ASP.NET 中对用户进行身份验证

> ID：11167308
> 
> 赞同：2
> 
> 时间：2012-06-23T06:03:58.780
> 
> 标签：asp.net

为了在 ASP.NET 中对用户进行身份验证，我见过这样的代码

```
if (loginManager.Authenticate(username, password))
{
    Session["Authenticated"] = 1;
} 
```

而在后续的请求中，只需检查 的值是否`Session["Authenticated"]`为 1 即可判断当前用户是否通过了认证。

这很简单。我的问题是：这与 ASP.NET 表单身份验证有何不同？- 使用 FormsAuthentication 类创建身份验证 cookie 并根据`User.Identity.IsAuthenticated`字段确定用户是否经过身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:46:54.320

如果会话 cookie 和会话过期是同步的 - 可能没有区别。但情况并非总是如此。仅举一个例子 - 您将 Session 存储在 ASP.NET 的默认值中 - InProc。但是由于某种原因，SessionState 进程被重新启动、杀死、死亡，无论如何——所有会话都消失了。然后一个用户来到该站点——他有一个有效的 Auth cookie 并通过了身份验证。但是无法检索会话，因此重新创建为 new(Session.IsNewSession = true)。所以用户将根据 FormsAuthentication 进行身份验证，但不会有 Session["Authenticated"] = 1...

我发现这篇文章对此事非常有用：[http ://www.abstraction.net/ViewArticle.aspx?articleID=74](http://www.abstraction.net/ViewArticle.aspx?articleID=74)

> **用户的身份验证令牌和他的会话之间是否存在依赖关系？**
> 
> 理想情况下，答案应该是否定的。出于多种原因，您不应该依赖会话数据来解决与安全相关的问题，其中包括关注点分离。一个令牌处理用户访问权限，另一个令牌跨请求存储用户数据。但是，在许多情况下，开发人员选择将用户的访问权限存储在会话中，最常见的是在允许匿名和经过身份验证的访问的站点中，经过身份验证的用户比匿名用户拥有更多可用的功能/页面。**因此，开发人员没有将访问权限令牌存储在用户的身份验证 cookie 中，而是选择将用户的访问权限存储在用户的会话中（有时是因为被认为是安全问题——然而，这通常是一个错误的担忧，因为用户的身份验证令牌可以通过 web.config 中 forms 元素的 protection 属性非常容易地加密）。但这假设会话在身份验证之前不会过期 - 否则您将留下一个经过身份验证的用户，您实际上不知道其访问权限，因为这些用户存储在现在已经消失的会话中**. 当面对这种依赖时，许多开发人员认为将会话超时设置为比身份验证超时更高的值就足够了，并将slidingExpiration设置为true以进行表单身份验证。想法是，在此设置中，用户身份验证将首先过期，导致 ASP.Net 自动处理此问题并将用户重定向到登录页面（如 web.config 中设置的那样）。如果会话仍然存在，它将被更新，如果没有，将创建一个新会话，然后根据用户的登录设置用户的访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T06:10:00.793

使用会话进行身份验证既不是标准也不是好的做法，因为会话是使用`SessionID`通过 FormsAuthentication 类设置的 a 来标识的。此类负责维护用户与服务器的会话绑定，方法是使用 cookie，或者如果 cookie 被禁用，则用户 URL 重写以维护`SessionID`。虽然会话可能会丢失或受损，但该`SessionID`机制受到加密和检查每个请求的保护。支持这一论点还有许多其他理由。所以简而言之，我建议使用标准方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T12:54:52.270

由于以下几个原因，您应该使用表单身份验证：

1.  表单身份验证由 Microsoft 开发多年。它测试了它的安全性。您的方法从未经过测试，因此您和我都无法确定它是否安全，但表单身份验证受到所有人的信任。
2.  人们为会话提前到期而苦苦挣扎。
3.  由于有许多同时访问您的网站的用户，使用会话会导致内存问题。
4.  使用表单身份验证更简洁、更优雅。
5.  为什么不使用许多开发人员使用的方法，如果明天有人加入您的团队并帮助您的项目，他可能会弄错您的逻辑并可能危及安全性。

# css - 使用 CSS 增加文本框的大小

> ID：11167310
> 
> 赞同：0
> 
> 时间：2012-06-23T06:04:13.020
> 
> 标签：css

我需要在悬停时向上增加文本框的大小。我希望它从底部固定。谁能告诉我怎么可能只使用 CSS？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:11:39.813

```
#Textbox{position:absolute;bottom:0; height:20px;}
#Textbox:hover{height:40px;} 
```

您可能还想在执行此操作时更改字体大小，并确保没有其他控件取决于您的文本框的位置，否则您会看到不需要的后效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T06:07:06.890

```
input{position:absolute;bottom:0;}
input:hover{padding-top:20px;} 
```

[http://jsfiddle.net/HmAh4/](http://jsfiddle.net/HmAh4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T06:18:50.383

这是使用负上边距的一种

```
textarea{height:100px;}
textarea:hover{margin-top:-20px;height:120px;} 
```

[小提琴](http://jsfiddle.net/HmAh4/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T06:20:00.413

实现这一目标的唯一方法是借助上边距，这是一个示例[http://jsfiddle.net/nKSC3/4/](http://jsfiddle.net/nKSC3/4/)

# android - Android Checkbox Preference 更改条目值

> ID：11167313
> 
> 赞同：1
> 
> 时间：2012-06-23T06:04:42.127
> 
> 标签：android, checkbox, android-preferences, android-spinner

我有一个`preferences`由 a`checkbox`和 a组成的`spinner`。
微调器有一个`android:entryvalues`属性，
我需要知道**如何设置复选框值为真时更改条目值？**

首选项.xml

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">

<PreferenceCategory 
    android:title="Preferences"
    android:key="first_category">

    <ListPreference 
        android:key="news_feed"
        android:title="Scout.org News Feeds"
        android:summary="Please Select which news feed you would like to be received..."
        android:defaultValue="1" 
        android:entries="@array/News_Feed_Title"
        android:entryValues="@array/newsfeed"
        android:dialogTitle="Scout.org News Feeds"
        android:dialogIcon="@drawable/ic_rss"   

        />
    <CheckBoxPreference
        android:key="french"
        android:title="News Feed &amp; Library Language"
        android:summaryOff="@string/frenchblurb"
        android:defaultValue="false"
        android:summaryOn="French Enabled"
        android:enabled="false"
    />

</PreferenceCategory>
</PreferenceScreen> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T08:01:04.153

如果您的条目值根据复选框的值动态变化，那么您不能将它们设置为 xml 文件上的资源。您必须动态地对活动执行此操作。因此，获取对您的复选框的引用，添加它`setOnCheckedChangeListener`，然后更改列表的内容。我认为这是你做到这一点的唯一方法。

# asp.net-mvc-3 - 如何根据选择另一个下拉列表来验证下拉列表

> ID：11167314
> 
> 赞同：0
> 
> 时间：2012-06-23T06:05:30.943
> 
> 标签：asp.net-mvc-3, jquery, kendo-ui

在我看来，我有两个下拉列表，一个下拉指示开始年份，另一个指示结束年份。我需要验证开始年份应该小于结束年份。我可以用 onblur 事件做些什么吗？请建议我一些功能。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:09:42.817

您可以使用下拉列表的更改事件，当从下拉列表中选择一个值时将触发该事件。我已经使用 JSON 和 jquery 实现了它：

```
 $(document).ready(function () {
            $('#<%= cboDate.ClientID %>').change(function () {
               if( $('#<%= cboDate.ClientID %>').value >$('#<%= cboDate1.ClientID%>').value)
               alert('Messsage');

            });
        }); 
```

# javascript - JavaScript 函数中名为“未定义”的参数的目的是什么？

> ID：11167317
> 
> 赞同：19
> 
> 时间：2012-06-23T06:05:51.530
> 
> 标签：javascript, undefined

在查看 jQuery 的未压缩源代码时，我偶然发现了一些我不太理解的东西。当创建他们的匿名函数时，他们将 undefined 作为第二个参数。这是在做什么，为什么他们使用 undefined？是否有必要将 undefined 作为参数放在匿名函数中？下面是我所说的一个例子。

```
(function( window, undefined)  {
  ...code here
})( window ); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-23T06:12:01.043

这是在做什么，正在重新分配`undefined`到`undefined`该闭包内部。那是一个故障保险。因为其他代码可能会不小心做类似的事情

```
undefined = something;
console.log(undefined); // will output 'something' 
```

这在 javascript 中是有效的（如果使用的 JS 引擎没有实现 ECMAScript 5 规范，在 ECMAScript 5 规范`undefined`中是非`non-writable`，[MDN DOC](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/undefined)），

引用 MDN [New_in_JavaScript 1.8.5](https://developer.mozilla.org/en/JavaScript/New_in_JavaScript/1.8.5) (ECMA 5) 页面

> **对全局对象的更改**
> 
> **全局对象设为只读**
> 
> 根据ECMAScript 5 规范，**NaN**、**Infinity**和**undefined**全局对象已设为**只读。**

来自`ES5 Annotated Spec`Guthub

`ES5 spec Section` [`x15.1.1.3`](http://es5.github.com/#x15.1.1.3)

> 15.1.1.3 未定义
> 
> undefined 的值是 undefined（见 8.1）。
> 
> 此属性具有属性 { **[[Writable]]: false** , [[Enumerable]]: false, [[Configurable]]: false }。

即使`global undefined`不可写您也可以命名一个局部变量`undefined`并且可能会弄乱您的代码（主要是与 比较`undefined`）。**但那是你的责任。**你可以有这样的代码

```
(function(){
    console.log('Second Case: ');
    var undefined = 'Something';
    console.log(undefined); // Will log `something`
    var a ; // a is undefined
    console.log(a  ===  undefined); // false, as undefined is changed
    // you might expect a === undefined will return true, but as 
    // `undefined` is changed it will return false.
    console.log(a); // undefined
})(); 
```

**演示：http:** [//jsfiddle.net/joycse06/V4DKN/](http://jsfiddle.net/joycse06/V4DKN/)

但是，如果`undefined`是可写的，那么上面的分配可能会妨碍在该行代码之后进行的许多操作，因为`comparison`现在不再如此。它现在有一些价值。`undefined``undefined``undefined`

所以当他们调用那个匿名函数时

```
( window ) // one argument only 
```

并接收

```
( window, undefined)  // only window is passed when calling the function
          // Second argument is not passed means it's undefined
          // so undefined is restored to undefined inside that function
          // and no global accidental assignments can hamper jQuery's 
          // code using 'undefined' now 
```

这意味着在该闭包内部`undefined`恢复为`undefined`，因为它没有被传递任何值，从而确保`undefined`在该匿名函数内部的使用。

[关于此http://javascriptweblog.wordpress.com/2010/08/16/understanding-undefined-and-preventing-referenceerrors/](http://javascriptweblog.wordpress.com/2010/08/16/understanding-undefined-and-preventing-referenceerrors/)的一篇非常详细的文章

我从上面的文章链接中引用了一些内容来说明问题

**什么是未定义的？**

在 JavaScript 中有**未定义（类型）**、**未定义（值）**和**未定义（变量）。**

**Undefined (type)**是一个内置的 JavaScript 类型。

**undefined (value)**是一个原始类型，是 Undefined 类型的唯一值。

任何尚未分配值的属性都假定为未定义的值。（ECMA 4.3.9 和 4.3.10）。

没有 return 语句的函数或带有空 return 语句的函数返回 undefined。未提供的函数参数的值未定义。

```
var a;
typeof a; //"undefined"

window.b;

typeof window.b; //"undefined"

var c = (function() {})();

typeof c; //"undefined"

var d = (function(e) {return e})();

typeof d; //"undefined" 
```

**undefined (variable)**是一个全局属性，其初始值为 undefined (value)，由于它是一个全局属性，我们也可以将其作为变量访问。为了保持一致性，在本文中我总是将其称为变量。

```
typeof undefined; //"undefined"
var f = 2;
f = undefined; //re-assigning to undefined (variable)
typeof f; //"undefined" 
```

从 ECMA 3 开始，它的值可以重新分配：

```
undefined = "washing machine"; //assign a string to undefined (variable)
typeof undefined //"string"
f = undefined;
typeof f; //"string"
f; //"washing machine" 
```

不用说，将值重新分配给未定义的变量是非常糟糕的做法，实际上 ECMA 5 不允许这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T06:10:13.090

Undefined 是一种类型，但也是一个全局变量。

您可以拥有一个通过执行覆盖 undefined 值的模块`undefined = whatever`。

`undefined`in 实际上是包装整个代码的函数的未定义参数：

```
(function(window, undefined) {
    // undefined is the undefined parameter
}(window)); 
```

这是安全的，因为`undefined`参数在本地范围内，除了这个函数中的代码之外没有人可以分配给它。

`undefined`定义匿名函数时不需要作为参数使用。

如果您看到上面的函数，您会注意到它需要**两个参数**，但提供**了一个**。

**为什么`undefined`需要恢复？**

因为，为了确保它`undefined`确实`undefined`在花括号之间的范围内，即使有人`undefined = "defined";`在全局范围内编写了类似的东西，因为`undefined`实际上可以重新定义。

**所以如果你有类似的东西**

```
var undefined = 1;

(function(window, undefined) {
  console.log(undefined); // output will be undefined not 1
}(window)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T06:11:58.853

`undefined`jQuery通过不将参数传递给该参数来确保在其范围内确实是未定义的。

以这段代码为例，当`undefined`它实际上没有定义时：

```
var undefined = 1;
alert(undefined); // 1 
```

# java - Java 中并发的困难时期

> ID：11167325
> 
> 赞同：0
> 
> 时间：2012-06-23T06:07:33.847
> 
> 标签：java, multithreading, concurrency, deadlock

所以，我很难解决大学问题......我需要做的是：

我需要创建一个应用程序来模拟使用并发的帐户之间的资金转移。我需要创建一个在 Bank 类中执行这种转移的方法，如下所示：

```
transfer(int from, int to, int value) 
```

然后我需要创建一个 TransferThread 类来管理这个转移。

问题是我一直陷入僵局......到目前为止我做了什么：

转移线程：

```
public void run() {
        int para,de,valor;
        try
        {
            while(!interrupted())
            {
                para = new Random().nextInt(banco.getNUMCONTAS());
                de = new Random().nextInt(banco.getNUMCONTAS());
                valor = (int) (10000 * Math.random());
                if(de == para)
                    continue;
                banco.transfer(de, para, valor);
                sleep(1);
            }
        }catch(InterruptedException e)
        {
            System.out.println(e.getMessage());
        }
    } 
```

银行：

```
 public synchronized void transfer(int de, int para, int valor) {
        while(contas[de].getSaldo() - valor <= 0)
        {
            try
            {
                wait();
            }catch(InterruptedException e)
            {

            }
        }
        notifyAll();
        contas[de].setSaldo(-valor);
        contas[para].setSaldo(valor);
        System.out.println("Conta num: " + contas[de].getNum() + ". Saldo: " + contas[de].getSaldo());
        System.out.println("Conta num: " + contas[para].getNum() + ". Saldo: " + contas[para].getSaldo());
    } 
```

主要：

```
Banco b = new Banco();
        TransferThread[] threads = new TransferThread[2];
        for(int i = 0; i < 2; i++){
            threads[i] = new TransferThread(b);
            threads[i].start();
        } 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T06:18:15.607

尽管在向学生介绍线程时经常使用银行示例，但它旨在教授的常规想法不是您代码中的问题。

出于某种原因，当帐户中没有足够的钱时，您似乎一直在等待，而且，如果两个线程都等待，它就不会神奇地出现在那里！他们都只是陷入无限循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T06:23:30.130

建议 -

如您所知，“转移”涉及两件事，由两个不同的方进行：“Put”和“Get”。

考虑添加这两种方法并同步*它们*（而不是整个“传输”）。

只是一个想法...

# python - 通过字典的键获得的列表顺序（）

> ID：11167328
> 
> 赞同：4
> 
> 时间：2012-06-23T06:08:11.023
> 
> 标签：python

我可以期望 keys() 保持相同的顺序吗？

我计划将它们用于下拉框，如果我从字典中添加或删除项目，我不希望它们移动。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T06:10:15.657

不，根据[文档](http://docs.python.org/library/stdtypes.html#dict.items)：

> 键和值以非随机的任意顺序列出，在 Python 实现中有所不同，并且取决于字典的插入和删除历史。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T06:55:37.417

`dict`不保证a 中键的顺序。

[文档说：](http://docs.python.org/tutorial/datastructures.html#dictionaries)

> 最好将字典视为一组**无序**的键：值对，并要求键是唯一的（在一个字典中）...
> 
> `keys()`字典对象的方法以**任意顺序**返回字典中使用的所有键的列表（如果要对其进行排序，只需将`sorted()`函数应用于它）。

Python 2.7+ 和 3.1+ 具有 PE​​P 372所[描述的](http://www.python.org/dev/peps/pep-0372/)[`OrderedDict`类`collections`](http://docs.python.org/dev/library/collections.html#ordereddict-objects)，它完全符合您的要求。它会记住添加键的顺序：

```
>>> from collections import OrderedDict
>>> od = OrderedDict()
>>> od[1] = "one"
>>> od[2] = "two"
>>> od[3] = "three"
>>> od.keys()
[1, 2, 3] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T06:10:37.863

不，至少在 cpython 中（很可能是所有其他实现）[你绝对不能](http://docs.python.org/library/stdtypes.html#dict.items)。如果您想要有保证的订单，请查看[`odict`](http://pypi.python.org/pypi/odict)，它确实保证了订单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T06:11:55.883

不，不是从一天到下一天。keys() 将按任意顺序排列（尽管我认为它们在实例的生命周期内可能是一致的，但这不适用于您的菜单）。

Python3 有有序字典：[collections.OrderedDict 文档](http://docs.python.org/release/3.1.5/library/collections.html#collections.OrderedDict)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-23T06:17:03.840

来自[python 文档](http://docs.python.org/tutorial/datastructures.html#dictionaries)：

> 字典对象的**keys()**方法以任意顺序返回字典中使用的所有键的列表（如果要对其进行排序，只需对其应用**sorted()**函数）。

因此，解决此问题的一种方法是在“列出”它们后立即对它们进行排序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-23T06:12:13.573

您可能想尝试诸如字典或对象数组之类的东西。数组是有序的。菜单项的文本将位于数组或对象的某个字段中。

# c# - 如何使用 Directx 在屏幕上绘制文本？

> ID：11167330
> 
> 赞同：-1
> 
> 时间：2012-06-23T06:08:39.807
> 
> 标签：c#, .net, directx

我在谷歌的论坛上搜索过，试图解决这个问题，但我做不到。我已经完成了一些关于绘制原始三角形、线条等的教程。我现在想绘制文本，甚至可能是带纹理的文本/字体。现在完全卡住了，有人可以发布一个片段，让我在托管的 Directx 中为 c# 执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T06:12:29.473

```
using D3D = Microsoft.DirectX.Direct3D; 
private D3D.Font text;
private void InitializeFont() 
{ 
System.Drawing.Font systemfont = new System.Drawing.Font("Arial", 12f, FontStyle.Regular);
 text = new D3D.Font(device, systemfont); 
} 
```

有关更多信息，请点击此链接：[使用 DirectX 显示文本](http://www.riemers.net/eng/Tutorials/DirectX/Csharp/Series2/tut18.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T06:17:51.970

如果您使用的是 DirectX 9，@irsog 发布的链接是一个很好的教程，我以前使用过它并且可以验证结果。如果您使用 DirectX 10，我推荐以下教程：

*   [http://rastertek.com/dx10tut12.html](http://rastertek.com/dx10tut12.html)

请注意，如果您使用 DirectX 11，您将会遇到一些麻烦。Microsoft 从 DirectX 11 中删除了 Direct2D，因此您必须调用 DirectX 10 API 或创建自己的字体接口。此处探讨了这两个选项：

[你如何在 DirectX 11 中绘制文本？](https://stackoverflow.com/questions/5708860/how-do-you-draw-text-in-directx-11)

# javascript - 替换浏览器中显示的所有文本

> ID：11167331
> 
> 赞同：3
> 
> 时间：2012-06-23T06:08:53.287
> 
> 标签：javascript, jquery, html, text, replace

我想用“@@@@”之类的东西替换所有显示的文本。这意味着用户将看到所有页面都充满了“@@@@”而不是文本（除了图像、iframe 或页面的 HTML 代码中不存在的东西）。

这几乎取代了页面的html代码，但不影响标签和代码，只是显示给用户的文本。

例如，我想替换此页面中的所有文本：

```
<!DOCTYPE html>
<html>
<body>                  
<ul class="topnav">
    <li>Item 1</li>
    <li>Item 2 
        <ul><li>Nested item 1</li><li>Nested item 2</li><li>Nested item 3</li></ul>
       </li>
    <li>Item 3</li>
</ul>
<div>DIV1</div>
<div>DIV2</div>
<span>SPAN</span>
<table>
<tr>
    <td>Username</td>
</tr>
<tr>
    <td>Password</td>
</tr>
</table>
<p>
  <input type="checkbox" name="remember" tabindex=3 />
  <label for="checkbox">Remember <strong>password</strong></label>
</p>
<p>Click here to <a href='register.php'>Register</a></p>
</body>
</html> 
```

结果应该是：

```
<!DOCTYPE html>
<html>
<body>                  
<ul class="topnav">
    <li>@@@@</li>
    <li>@@@@ 
        <ul><li>@@@@</li><li>@@@@</li><li>@@@@</li></ul>
       </li>
    <li>@@@@</li>
</ul>
<div>@@@@</div>
<div>@@@@</div>
<span>@@@@</span>
<table>
<tr>
    <td>@@@@</td>
</tr>
<tr>
    <td>@@@@</td>
</tr>
</table>
<p>
  <input type="checkbox" name="remember" tabindex=3 />
  <label for="checkbox">@@@@<strong>@@@@</strong></label>
</p>
<p>@@@@<a href='register.php'>@@@@</a></p>
</body>
</html> 
```

我已经尝试过一些：

使用 JQuery 替换所有仅包含纯文本的元素、标签（及其子标签），这在开始时效果很好：

```
<ul class="topnav">
    <li>@@@@</li>
    <li>@@@@ 
        <ul><li>@@@@</li><li>@@@@</li><li>@@@@</li></ul>
       </li>
    <li>@@@@</li>
</ul>
<div>@@@@</div>
<div>@@@@</div>
<span>@@@@</span> 
```

但最近我意识到，如果元素，标签有孩子，它会失败：

```
<p>
  <input type="checkbox" name="remember" tabindex=3 />
  <label for="checkbox">Remember <strong>password</strong></label>
</p>
<p>Click here to <a href='register.php'>Register</a></p> 
```

所以我尝试了另一种方式，使用 document.body.innerText 选择所有文本，但是 HTML 格式丢失了。

我好累。有人能帮我吗？

非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T06:20:27.880

这段代码似乎对我有用：

```
$('*').contents().filter(function() {
    return this.nodeType == Node.TEXT_NODE && this.nodeValue.trim() != '';
}).each(function() {
    this.nodeValue = '@@@@';
}); 
```

基本上，它将每个*文本*节点的内容替换为`@@@@`.

有关演示，请参见此处：http: [//jsfiddle.net/K8544/3/](http://jsfiddle.net/K8544/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T06:20:59.557

试试这个。*这是一个用“ ** ”替换内部文本的函数，但前提是其内部 HTML 等于其内部文本。否则，它会递归调用自身，向下导航 DOM，直到到达最里面的元素。

```
 $(document).ready(function() {
        function replaceChildren(node) {
            if ($(node).html() == $(node).text()) $(node).text("@@@@");
            else {
                $(node).children().each(function() {
                    replaceChildren(this);
                });
            }
        }
        replaceChildren($("body"));
    }); 
```

它并不完美，但对于大多数用途来说应该非常接近。我在 Stack Overflow 页面上尝试过，大多数文本都被替换了。唯一不起作用的地方是同一标签内有杂散标记和文本，例如*<div>Here is some inner text <strong>and markup</strong></div>*。也许这足以满足您的目的...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T06:29:54.227

仅限 JQuery 的解决方案：

```
$("body *").contents().wrap("<obscure></obscure>");
$("obscure").each(function(i,e) {if ($(e).children().length==0) $(e).replaceWith("@@@@");}​);
$("obscure > *").unwrap(); 
```

[http://jsfiddle.net/cranio/CW9jY/1/](http://jsfiddle.net/cranio/CW9jY/1/)

此代码使用自定义标签 ( ) 包装每个节点`obscure`；的使用`.contents()`确保我们也包装纯文本节点。然后我们`obscure`用@@@@ 替换没有子节点的节点（之前是纯文本节点），因此也消除了`obscure`标签。最后，我们解开用 . 包裹的其他元素`<obscure>`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T03:33:21.703

您可以匹配两个标签之间的任何内容 - 这些标签不必是相同的标签。例如`<div>aaa<a href="bbb">ccc dd</a></div>`，它会找到`aaa`，将其替换为`@@@`，然后通过查找 between和 next来查找`ccc dd`并替换它。`@@@ @@``>``<`

```
<script type="text/javascript">
function obscure() {
    var newhtml = document.body.innerHTML.split("<");
    for (var i=1; i<newhtml.length; i++) {
        var list = newhtml[i].split(">");
        newhtml[i] = (list[0]) + ">" + ((list[1]).replace(/[^@\s]/gim, "@"));
    }
    newhtml[0] = (newhtml[0].replace(/[^@\s]/gim, "@"));
    document.body.innerHTML = newhtml.join("<");
}
</script> 
```

（注意：这不会替换空格，因为这似乎会导致一些问题）。

# back - 如何使用浏览器中的“返回”按钮转到任务流中的上一页？

> ID：11167352
> 
> 赞同：2
> 
> 时间：2012-06-23T06:11:40.867
> 
> 标签：back, oracle-adf, adf-task-flow

我已经使用 ADF 应用程序创建了系统，该应用程序可以检测浏览器中的“返回”按钮（例如 firefox 和 google chrome）。每次单击浏览器中的“返回”按钮时，它都会提示询问用户是否要“留下”的消息在当前页面中”或“离开页面”。一旦我单击“离开页面”，它将带我进入登录页面。

当用户单击浏览器的后退按钮时，是否有可能返回任务流中的上一页？顺便说一句，任务流在页面片段中。谁能告诉我怎么做？急需这一步..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T12:22:50.977

你可以尝试这样的事情：

```
function disableBack() {
    var check =window.location.search; 
    if (check && check.substring(1) =="X") { 
        window.location.replace(<new_url>); 
    }
} 
```

您也可以参考这篇文章：[清除浏览器历史记录](https://stackoverflow.com/questions/5288703/clear-browser-history)

正如弗兰克所说，您不应该将浏览器与 adf 应用程序一起使用，我认为没有办法通过 adf 禁用该浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T15:24:12.350

浏览器后退按钮实际上不知道如何在任务流中导航视图。建议不要使用浏览器后退按钮进行导航。不幸的是，除了使用 JS 删除用户浏览历史记录之外，我们无法在 ADF 中使用任何 API 来抑制浏览器后退按钮。

# php - 可以在 Windows CE、WM8650 上网本上运行“WAMP”吗？

> ID：11167356
> 
> 赞同：1
> 
> 时间：2012-06-23T06:12:03.013
> 
> 标签：php, mysql, windows-ce, wamp

有人知道在迷你 7 英寸 WM8650 WonderMedia 上网本上运行 PHP 和某种 SQL 的“WAMP”类型设置吗？

我知道，这是一个奇怪的问题，但归根结底，我有几个这样的问题，并且需要一些该领域的技术人员，才能访问基于 Web 的表单。我只是想为这些上网本创建此表单的本地版本，这样我就不必在现场将它们连接到互联网。

我目前在上网本上运行 Windows CE 6.0，并且认为 wamp 会安装。但当然，一切都必须是复杂的。我进行了一些搜索，最初我看到一个 youtube 视频显示 wamp 安装在其中一个设备上，但当然没有链接到评论中的任何内容，老实说我现在找不到视频......

无论如何，如果有人知道我该怎么做，请告诉我。有人告诉我这个东西也可以运行 debian，但我对 debian 还不够熟悉，无法使用它，更不用说如何用 wamp 之类的东西来设置它了。如果有人能告诉我这是否是更好的方法，请告诉我，并请提供一些链接或说明，说明如何在 Windows ce 或 debian（甚至 android）上设置简单的本地“php 服务器”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:37:54.010

尝试使用便携式版本的 WampServer，或更好的 XAMPP。便携版不需要安装，可以直接从棒子上运行，所以，我认为它也适用于笔记本电脑。尝试在网上查找：“portable xampp”以找到要下载的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:20:32.583

对于使用 Windows CE 的场景：

如果您是目标设备的制造商，则需要在您的 WinCE OS 映像中包含 ASP Web 服务器支持。如果您不是您的设备的制造商，那么您需要联系他们并要求他们在操作系统映像上包含 ASP Web 服务器支持（尽管他们可能无法做到）。

另一种可能的方法是在基于 .Net Compact Framework 的 C# 中实现您自己的 Web 服务器，您可以使用 MSDN 中的这个示例项目作为起点：

[.NET Compact Framework 示例：移动 Web 服务器](http://www.microsoft.com/en-us/download/details.aspx?id=22794)

您提到您只是在设备上本地显示一些 HTML 表单，所以这个示例项目可能足以满足您的需求。

# ios5 - Using performseguewithidentifier to tab view controller

> ID：11167359
> 
> 赞同：0
> 
> 时间：2012-06-23T06:12:31.773
> 
> 标签：ios5

I have a login screen UIViewController and when the login button is clicked i want it to open the tab bar controller, i'm using performseguewithidentifier i created a push relationship with the storyboard, but when i do call performseguewithidentifier the tab bar does not display instead the screen is still the login screen, does anyone know what i might be doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:57:27.190

Check and make sure your Segue Style is "Modal" and not "Push." If you chose Push, it will not work unless you also have a Navigation controller.

# linux - 在 Ubuntu 上阻止特定瘦客户端的特定网站

> ID：11167360
> 
> 赞同：0
> 
> 时间：2012-06-23T06:12:35.150
> 
> 标签：linux, ubuntu, squid, system-administration

我们有与瘦客户端机器相连的服务器。我试图阻止所有用户的网站（facebook、orkut、twitter）。这对我来说可以。但是，我想阻止特定用户（瘦客户端）或通过机器的 IP 地址。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:07:32.533

iptables 是 Linux 中用于保护系统免受 ip 或网络影响的工具，如果您想阻止特定的 ip 或网络，只需使用此命令

1.  如果你想阻止一个特定的 ip 像 192.168.0.5 然后使用这个命令

    `iptables -t filter -A INPUT -s 192.168.0.5 -j REJECT`

2.  来自网络 [网络 ID 为 192.168.0.0]

    `iptables -t filter -A INPUT -s 192.168.0.0 -j REJECT`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:57:38.793

squid 是一个代理，它允许减少互联网带宽并阻止 linux os 中的网站
要阻止特定网站，请使用此命令

1\. vi /etc/squid/squid.conf /* 用于编辑此文件
2.**输入以下命令**
acl bad （变量名） url_regex [http://www.google.com（如果你想阻止 Google.com）
http_access 拒绝错误（变量名）
http_access 允许所有
3\. 更改您的代理中使用的端口号网络浏览器到 3128

# node.js - 流星创造HelloWorld

> ID：11167361
> 
> 赞同：1
> 
> 时间：2012-06-23T06:12:53.260
> 
> 标签：node.js

这些是我正在执行的步骤：

```
# meteor create helloworld

# cd helloworld

# meteor 
```

终端显示器`Running on: http://localhost:3000/`

我将浏览器指向`http://localhost:3000/`

在浏览器中一切正常，我看到了**Hello World！**. 我单击**[单击]**按钮。没有任何反应，浏览器中没有警报。我切换到终端期待看到**你按下了按钮**，但我看到的只是`Running on: http://localhost:3000/`我没有看到**你**在客户端或服务器的任何地方按下了按钮。

那么在*helloworld.js*中，下面的代码片段应该做什么？

```
Template.hello.events = {
    'click input' : function () {
      // template data, if any, is available in 'this'
      if (typeof console !== 'undefined')
        console.log("You pressed the button");
    }
  };
} 
```

`Running on: http://localhost:3000/` **我最好的猜测是在您按下此按钮**的行下方的终端中，每次单击该按钮时都会出现，但没有任何反应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T06:38:28.423

检查浏览器中的控制台。如果您使用的是 Chrome，请使用工具 -> Javascript 控制台访问控制台。您将看到元素、资源等选项卡...转到最后一个“控制台”。您还可以使用 Ctrl+Shift+J 访问 Javascript 控制台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T06:34:38.437

查看在以下位置找到的解释：[Meteor.js 的非常温和的介绍](http://www.sympodial.com/blog/an-extremely-gentle-introduction-to-meteor.html)

看起来这部分代码实际上是在客户端执行的，并且会显示在浏览器的 javascript 控制台中，而不是服务器上。

请注意您的代码包含在以下事实中：

```
if (Meteor.is_client) {
   ...
} 
```

# algorithm - 数据挖掘和基于文本分析的模式识别

> ID：11167363
> 
> 赞同：4
> 
> 时间：2012-06-23T06:13:42.560
> 
> 标签：algorithm, twitter, machine-learning, data-mining

我正在创建一个软件，用于转储用户在其 Twitter 个人资料上评论和发布的关于某些化妆品“XYZ”的纯文本。我已经解析了从 Twitter API 接收到的 JSON 对象，并将原始数据转储到 MySql 数据库中。

现在，我必须对这些纯文本进行分析，以获取关于化妆品“XYZ”的好评论或坏评论等模式，并将这些信息提供给单独的 API，以在 HTML 中创建动态可视图表。

我在数据挖掘和基于文本的模式识别领域是全新的。如果有人能建议如何从我的数据库中的纯文本继续使用模式识别算法，为我的单独的可视化图表 API 提供提要，我将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T06:39:14.697

我真的鼓励你观看以下[NLP 斯坦福讲座](https://class.coursera.org/nlp/lecture/preview)，尤其是：

*   第 3 周 - 情绪分析（这是您想要实现的目标）*   第 4 周 - 关系提取（赫斯特模式等...）

我想你会发现它们是非常宝贵的资源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T06:36:18.800

如果您了解模式识别的基础知识：

1.  为您的产品手动创建两组（正面和负面）Twitter 帖子。
2.  为发布定义度量、内核或相似性度量。您可以使用高维二进制向量，每个分量代表一个单词，值为 1 表示存在，0 表示不存在该单词。您还可以为否定词添加特殊权重，例如“不”。
3.  使用机器学习算法在手动创建的集合（类）上训练分类器。您可以使用 SVM、神经网络、最近邻分类器...
4.  使用经过训练的分类器对新的 Twitter 帖子进行分类。

这是高层次的基本思想。当然，有许多细节需要注意，但解释它们超出了 SO 答案的范围。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T10:17:47.797

这个子域称为**情感分析**。关于这个主题有大量的讲座和文章。不幸的是，到目前为止，我所看到的真实结果对我来说并没有那么令人信服。

这一挑战的关键是拥有良好的训练数据。让自己成为一个工具，让您可以快速浏览数据并*手动*将其标记为正面/中性/负面，以快速获得大量训练集。

有关整个过程以及一些最先进的方法和技巧的详细信息，请参阅[斯坦福 NLP 讲座，特别是第 3 周。](https://class.coursera.org/nlp/lecture/preview)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T06:17:55.260

您可能想看看 Mahout（在这种情况下，您可能希望将数据加载到 HDFS 中）。

你对你的用例不是特别具体，文本分析不是一个简单的问题，但 Mahout 绝对是机器学习应用程序的一个很好的“开箱即用”工具。

你也可以看看这本书，很不错：[Taming Text](http://www.manning.com/ingersoll/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T06:34:46.440

我对您的问题的理解是，您需要一个分类器来区分评论的好坏。

为了解决这类问题，统计方法被证明是有效的，就像垃圾邮件分类器一样。

您可以查看与贝叶斯分类器相关的项目，例如[cardmagic/classifier](https://github.com/cardmagic/classifier)，看看它是否有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T17:09:32.410

您可能想了解 Frontline Systems 的产品 XLMiner： http: [//www.solver.com/xlminer/](http://www.solver.com/xlminer/)

它是用于 Excel 的数据挖掘插件，具有许多内置功能。

# c++ - Vim 为omnicompletion 和ctags 问题配置

> ID：11167364
> 
> 赞同：3
> 
> 时间：2012-06-23T06:13:50.003
> 
> 标签：c++, vim, ctags

我刚开始使用vim半个月，因为我想用它来编写C++代码，所以我只是安装了omnicompletion来自动完成代码。

但是，当我按照omnicppcomplete.txt上的说明进行操作时，（我下载了Exuberant Ctags并使用“./configure && make && sudo make install”命令安装），我发现它仍然弹出错误（ctags -R非法命令)，为避免使用我的 mac 已有的 ctags，我在我的 .zshrc 文件中添加了“export PATH=/usr/local/bin:$PATH”，并添加了“let Tlist_Ctags_Cmd='/usr/local/bin/ ctags'" 在我的 .vimrc 文件中。

但是，我仍然无法运行命令“ctags -R --c++-kinds=+p --fields=+iaS --extra=+q .”，错误为非法 ctags -R。任何人都可以帮忙吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:42:44.530

关键是你在 mac 上，应该使用 mac-ports 来覆盖 osx 标准 ctags，而不是你的 ctags 的自定义构建。这应该让你回到正轨

*   卸载从源代码构建的 ctags：在构建它的 src 目录中尝试

    `sudo make uninstall`

*   安装端口后打开一个新的 shell（从 .profile/.zshrc 等加载新的系统配置）

*   接下来，从端口存储库安装 ctags，因此首先安装[Mac Ports](http://www.macports.org/)，然后通过端口安装 ctags：

    `sudo port install ctags`

*   如果您使用了端口的默认安装位置，那么您的 shell-rc 文件应将 PATH 指向`/opt/local/bin`. 您的 ctags（带有 -R 支持）应该在 ( `/opt/local/bin/ctags`) 中，但要确保 100% 确保通过键入以下内容检查您的系统在哪里找到它：

    `which ctags`

    应该给你

    `/opt/local/bin/ctags`

*   现在从 vim ( `:echo $PATH`) 中检查您的 PATH，它应该预先添加端口目录 (/opt/local/bin)。

要从 vim 中测试代码完成（不是自动完成）（假设 vim 指向正确的`:tags`文件，请阅读 :tags 的帮助），您不需要安装任何东西。

*   只需输入`Ctrl-N`插入模式，就会弹出一个可能的标识符列表。

# android - 是否有任何可能的预览或仅在 Eclipse 中运行该特定程序？

> ID：11167373
> 
> 赞同：-7
> 
> 时间：2012-06-23T06:16:25.083
> 
> 标签：android, eclipse, android-layout, eclipse-plugin, eclipselink

谁能告诉我，在我的 android 程序中进行一些修改或更新，在 eclipse 中是否有可能，预览选项或运行该特定程序并仅查看该输出。因为我运行模拟器需要更多时间。所以这就是我问的原因。请给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:21:19.677

我相信您在问是否可以修改代码以在 Eclipse 中运行，而不是模拟 Android 系统并在其上运行。

好吧，是的，您可以（可能）更改您的代码，使其在“Eclipse”中运行，但是您为什么要这样做？然后你不知道它是否在你的目标上运行它的 Android 上运行。

这首先会违背在 Android 上开发的目的。这就是模拟器的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T06:26:31.140

```
Because I run emulator it takes more time. So that why I am asking. 
```

为了省时间

```
 1- upgrade the eclipse to latest one so you can see the ui changes in XML in eclipse it self (XML in graphic mode)
 2- not restart the emulator every time just close app in emulator and run from eclipse
 3- do not use debug just run to launch app
 4- if can attach the device and run on that it will faster than emulator 
```

# c++ - 有人可以解释这个 unique_ptr 代码发生了什么吗？

> ID：11167374
> 
> 赞同：0
> 
> 时间：2012-06-23T06:16:54.833
> 
> 标签：c++, c++11, scope, unique-ptr

这是使用 unique_ptr 的代码：

```
struct Foo{
  Foo(){std::cout << "Ctor called\n";}
  ~Foo(){std::cout << "Dtor called\n";}
  void bar(){std::cout << "bar called\n";}
}

int main(){
 unique_ptr<Foo> up(new Foo);
 {
  vector<unique_ptr<Foo>> v;
  v.push_back(move(up));
 }

 up->bar();
 return 0;
} 
```

运行的输出是：

```
Ctor called
Dtor called
bar called 
```

我原以为通话会`bar()`失败，因为据我所知，应该会因为ing`up`而被破坏。看来我没有正确理解。有人可以带我了解正在发生的事情吗？(g++ 4.7.0)`v``move`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T06:21:59.503

您看到的是*未定义的行为*，由最后一次调用引起`up->bar()`。如果您尝试，它可能是相同的：

```
static_cast<Foo*>(0)->bar(); 
```

请注意，*未定义的行为*实际上意味着*未定义*，因此它可能会崩溃或做一些完全出乎意料的事情，比如看起来工作正常。编译器还可以理解永远不会到达最后一行代码*（在定义的行为下）*，并决定生成一个什么都不做的空可执行文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T06:25:02.207

> 据我了解，`up`应该`v`因为`move`ing 而被摧毁。

它被摧毁了。为什么还会`"Dtor called"`出现在输出上？一个对象在析构函数执行时被销毁。没有其他魔法发生。

> 我期待对 bar() 的调用失败

当行为未定义时，您不能期待任何事情，这就是取消引用 empty 的情况`unique_ptr`。

# database-design - 将图像存储到数据库中

> ID：11167383
> 
> 赞同：0
> 
> 时间：2012-06-23T06:19:22.240
> 
> 标签：database-design, database-performance

这个问题与数据库/RDBMS 有关，我对性能和记录处理知之甚少。

如果我们需要存储与某些记录相关的图像，什么是更好的选择（性能方面）。是否应该将图像作为字段存储到数据库中，或者维护我们自己的文件并将文件路径存储到数据库中。

我认为当前的 rdbms 应该能够很好地处理自己的图像文件，我们可以依赖这些文件。但是，如果多个记录（或来自不同表的记录）引用同一个图像，那么我认为，最好存储文件的路径而不是图像它自己。

期待数据库专家的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T07:51:50.407

Microsoft Research 有一篇非常好的论文，名为[To Blob 或 Not To Blob](http://research.microsoft.com/apps/pubs/default.aspx?id=64525)。

他们经过大量的性能测试和分析后得出的结论是：

*   如果您的图片或文档的大小通常低于 256K，则将它们存储在数据库的 VARBINARY 列中会更有效

*   如果您的图片或文档的大小通常超过 1 MB，则将它们存储在文件系统中会更有效（并且使用 SQL Server 2008 的 FILESTREAM 属性，它们仍处于事务控制之下并且是数据库的一部分）

*   在这两者之间，根据您的使用情况，这有点折腾

当然，这是特定于 SQL Server 的——但我敢打赌，其他 RDBMS 也会有类似的行为——达到一定大小，将图像存储到数据库中是可以的，实际上更好（性能更高），但如果它们变得太大，它们对关系引擎造成了太大的负担。

仅将路径名存储到数据库中并将实际图像留在数据库引擎之外的问题当然是您无法在数据库中控制该图像文件是否仍然存在、是否已被重命名或移动. 文件系统操作没有“事务保护伞” - 因此您需要能够处理事实文件可能不再存在，即使它们的名称存储在您的数据库表中。

具有该功能的 SQL Server`FILESTREAM`解决了这个问题 - 您的文件保留在磁盘上 - 但 SQL Server 对它们有一个“事务保护伞”，并且它们不能在 SQL Server 不知道（并允许它）的情况下被删除或移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T06:31:15.570

将图像存储在文件系统或（更好）CDN 或 Amazon S3 之类的东西上。在 RDBMS 中仅存储元数据（包括实际图像文件的位置）。

# iphone - #if 条件的正确语法

> ID：11167384
> 
> 赞同：1
> 
> 时间：2012-06-23T06:19:47.803
> 
> 标签：iphone, objective-c, ipad

我想根据不同的设备定义不同的参数，但编译错误如下：

```
#define IS_IPAD (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)

#if IS_IPAD                   //invalid token at start of a preprocessor expression
#define defaultHeight 475
#else
#define defaultHeight 175
#endif 
```

我想知道适合我的目的的正确语法，谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-23T07:36:49.507

你可以这样做：

```
#define IS_IPAD (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
#define DEFAULT_HEIGHT ((IS_IPAD) ? 475.0 : 175.0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T06:23:45.403

你不能用预处理器做到这一点。预处理器条件宏只接受编译时常量表达式。改用 C 代码，如下所示：

```
float defaultHeight;
if (IS_IPAD)
{
    defaultHeight = 475;
}
else
{
    defaultHeight = 175;
} 
```

顺便说一句，给预处理器`#define`宏小写名称是不好的做法。如果要对默认高度使用宏，请使用

```
#define DEFAULT_HEIGHT value 
```

反而。

# javascript - 如何使用 JavaScript 根据其他文本框更新文本框值？

> ID：11167386
> 
> 赞同：1
> 
> 时间：2012-06-23T06:20:25.870
> 
> 标签：javascript, html, textbox

我的表单中有三个输入文本框。

第一个是老师，第二个是年级。现在我有了第三个输入文本框，我需要在其中使用 JavaScript 将这两个值动态更新为“（教师）的（X）类”。

谁能帮我写代码？提前致谢。

这是jQuery代码：

```
<script type="text/javascript">
  $(document).ready(function(){
    $('#both').value($('#teacher').val() + "'s " + $('#grade').val());
});

  </script> 
```

我的输入标签是：

```
<input type="text" name="teacher_name" id="teacher" value="" style="background:#f7f6f2 url(../images/input_02.png) repeat left top;border: 0px;width: 250px;height: 10px;padding: 10px;display: block;">
<input type="text" name="teacher_name" id="grade" value="" style="background:#f7f6f2 url(../images/input_02.png) repeat left top;border: 0px;width: 250px;height: 10px;padding: 10px;display: block;">
<input type="text" name="teacher_name" id="both" value="" style="background:#f7f6f2 url(../images/input_02.png) repeat left top;border: 0px;width: 250px;height: 10px;padding: 10px;display: block;"> 
```

我需要添加哪些内容才能使我的第三个输入字段得到更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T06:23:39.057

如果您使用的是 jQuery，则在 dom 准备好时更新第三个非常简单：

```
$(document).ready(function(){
    $('#third').value($('#first').val() + "' " + $('#second').val());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T07:16:24.797

使用`onChange`输入内容更改时`onBlur`触发的事件或输入失去焦点时触发的事件：

```
function UpdateInfo()
{
  var teacher = document.getElementById('teacher').val();
  var grade = document.getElementById('grade').val();
  var info = teacher + '\'s '+ grade + ' class';
  document.getElementById('info').value = info;
}

/* Solution 1 (onChange) */
<input id="teacher" type="text" onChange="UpdateInfo();" />
<input id="grade" type="text" onChange="UpdateInfo();" />
<input id="info" type="text" />

/* Solution 2 (onBlur) */
<input id="teacher" type="text" onBlur="UpdateInfo();" />
<input id="grade" type="text" onBlur="UpdateInfo();" />
<input id="info" type="text" /> 
```

或者使用 jQuery，您可以在事件中绑定`document.ready`事件：

```
$(document).ready(function()
{
    /*
    * binding onChange event here
    * you can replace .change with .blur
    */
    $('#teacher').change(UpdateInfo);
    $('#grade').change(UpdateInfo);
});

   function UpdateInfo()
   {
     var teacher = $('#teacher').val();
     var grade = $('#grade').val();
     var info = teacher + '\'s '+ grade + ' class';
     $('#info').val(info);
   }

<input id="teacher" type="text" />
<input id="grade" type="text" />
<input id="info" type="text" /> 
```

**[演示](http://jsfiddle.net/C6mSZ/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T06:29:25.960

使用 javascript，您可以尝试以下方法：

```
var first_val=document.getElementById('first').val();

var second_val=document.getElementById('second').val();

document.getElementById('third').val(first_val + second_val); 
```

# vb.net - “对象引用未设置为对象的实例”- 在 Excel 中创建数据透视表时

> ID：11167389
> 
> 赞同：1
> 
> 时间：2012-06-23T06:21:09.963
> 
> 标签：vb.net, excel

我正在尝试通过从驱动器中打开 Excel 文件来创建数据透视表。

但我收到错误消息“对象引用未设置为对象的实例”

我在下面附上了我的代码

```
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        Dim excelApplication As Microsoft.Office.Interop.Excel.Application = Nothing
        Dim excelWorkBook As Workbook = Nothing
        Dim targetSheet As Worksheet = Nothing
        Dim pivotTable As PivotTable = Nothing
        Dim pivotData As Ranges = Nothing
        Dim pivotDestination As Range = Nothing
        Dim co As PivotField = Nothing
        Dim pivotTableName As String = "Complexity"
        excelApplication.Workbooks.Open("E:\John\ccc.xlsx")
        pivotData = targetSheet.Range("Data!R1C1:R11460C9")
        pivotDestination = targetSheet.Range("Data!R1C11")
        excelWorkBook.PivotTableWizard( _
            XlPivotTableSourceType.xlDatabase, _
            pivotData, pivotDestination, pivotTableName, True, True, _
           True, True, , , False, False, XlOrder.xlDownThenOver, 0)
        With excelApplication.ActiveSheet.PivotTables("Complexity").PivotFields("Com")
        End With
        excelApplication.ActiveSheet.PivotTables("Complexity").AddDataField(excelApplication.ActiveSheet.PivotTables( _
            "Complexity").PivotFields("Per gram"), "Sum of Per gram", XlConsolidationFunction.xlSum)
        excelApplication.ActiveSheet.PivotTables("Complexity").AddDataField(excelApplication.ActiveSheet.PivotTables( _
            "Complexity").PivotFields("Oracle Per gram"), "Sum of Oracle Per gram", XlConsolidationFunction.xlSum)
        excelApplication.ActiveWorkbook.Close()
        excelApplication.Quit()
    End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T06:34:14.450

`Dim excelApplication As Microsoft.Office.Interop.Excel.Application = Nothing`,`excelApplication`是`Nothing`...

尝试这个：

```
excelApplication = New Microsoft.Office.Interop.Excel.Application`
excelWorkBook = excelApplication.Workbooks.Open("E:\John\ccc.xlsx")
targetSheet = excelWorkBook.Sheets(0) 
' assuming that the sheet you want to work with is the first one. 
```

# javascript - meteor.js 的模板 onload 事件

> ID：11167390
> 
> 赞同：23
> 
> 时间：2012-06-23T06:21:11.930
> 
> 标签：javascript, meteor

我知道meteor会为DOM元素公开诸如“点击”之类的事件，但我想知道在加载模板或部分时是否会触发加载事件？我将如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-03T03:45:51.450

对于从 0.4.0 预览版开始的 Meteor，您可以使用[`Template.myTemplate.created`](http://docs.meteor.com/#template_created).

然而，在`Template.myTemplate.created`DOM 中还没有准备好。

如果您需要操作 DOM，您可能希望使用[`Template.myTemplate.rendered`](http://docs.meteor.com/#template_rendered)布尔值来跟踪 Template 对象中的状态，如下所示：

```
Template.myTemplate.rendered = function() {
    if(!this._rendered) {
      this._rendered = true;
      console.log('Template onLoad');
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-23T11:42:54.127

以下应该工作。
一旦将模板添加到 DOM 并渲染，Meteor.defer 就会被调用。

```
<template name="temp">
    //regular stuff
    {{invokeAfterLoad}}
</template>

Template.temp.invokeAfterLoad = function () {
  Meteor.defer(function () {
     $('mydiv').jquerify();
  });
  return "";
}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-24T16:49:31.547

我会推荐这个而不是接受的答案，恕我直言，稍微少一点：

```
<template name="temp">
    {{aReactiveHelper}}
</template>

Template.temp.aReactiveHelper = function() {
  var someValue = Session.get('someValue');
  invokeAfterLoad();
  return someValue;
};

var invokeAfterLoad = function () {
  Meteor.defer(function () {
     $('mydiv').doSomething();
  });
}; 
```

假设您想在模板加载后调用某些内容，因为它正在对反应性对象做出反应。

这样做的好处是您无需向模板添加动画代码。

# ios - iOS - 归档 OCR 演示时出错

> ID：11167396
> 
> 赞同：1
> 
> 时间：2012-06-23T06:23:19.783
> 
> 标签：ios, ocr, tesseract

我尝试使用[OCR 演示项目](https://github.com/nolanbrown/Tesseract-iPhone-Demo)，我修改了代码，编译并运行了上面所有的代码，但是当我尝试存档它时，我得到了一个错误

```
error: strip /Users/mac1/xfer/Ananth/Projects/OCRSample/Resources/nolanbrown-Tesseract-iPhone-Demo-6338e61/OCRDemo/Classes/tesseract-3.01/vs2008/lib/liblept.lib: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/strip received signal 11 
```

我以前从未遇到过这个错误，所以我上网但没有找到任何相关的解决方案。有人可以帮我猜测这个错误的原因并纠正它吗？我使用的是 xcode 4.3.2 版和 Mac OS 10.7.4 版

任何及时的帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:47:56.887

将文件开头的“!< arch >”替换为“\x00< arch >”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T04:03:08.197

似乎这个需要`UIViewController`具有`.mm`扩展的类来执行这个库。最初，我创建了一个普通`UIViewController`类，它有一个`.m`扩展名为我得到上述错误的文件。我也无法创建`.mm`文件。因此，我使用了`OCRDemoViewController.mm`as my`UIViewController`并对其进行了修改，从而解决了该问题。

# asp.net - 使用自己的登录身份验证处理程序是一种好习惯吗？

> ID：11167401
> 
> 赞同：0
> 
> 时间：2012-06-23T06:23:49.227
> 
> 标签：asp.net, authentication, security

我使用我自己的自定义用户处理程序来验证用户的身份。

```
 protected void Login1_Authenticate1(object sender, AuthenticateEventArgs e)
            {
            SqlReader rdr=null;
            rdr=GetReader(Login1.UserName.ToString().ToLower().Trim(),Login1.Password);
            while (rdr.Read())
            {
                e.Authenticated = true;
                Session["Username"] = Login1.UserName.ToString();
                Session["Name"] = rdr[0].ToString() + " " + (rdr[1].ToString() == null ? "" : rdr[1]);
                id = rdr[2].ToString();
                }
            } 
```

对于网站的所有其他部分，我检查 Session["Username"] 是否不为空。我的问题是使用上述身份验证方法并将用户名存储在会话中是一个坏主意吗？我听说会话可以被黑客入侵，但它们不是加密和散列的吗？如果它们没有被散列，我们如何散列它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:33:25.053

使用自定义用户处理程序没有任何问题。我希望您的`GetReader`函数不受 sql 注入和其他基于 Web 的攻击的影响。

如果您不确定，请考虑使用[Microsoft Web Protection Library](http://wpl.codeplex.com/)。

循环似乎没有必要，`while`您不会只获得一条记录吗？你不需要循环。

您不需要检查 a`Session["Username"]`是否不为空来确定用户是否已登录。用户是否直接访问该页面，无需登录，他将被带到登录页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:14:37.020

使用表单身份验证有几个原因：

1.  表单身份验证由 Microsoft 开发多年。它测试了它的安全性。我的方法从未经过测试，因此您和我都无法确定它是否安全，但表单身份验证受到所有人的信任。
2.  人们为会话提前到期而苦苦挣扎。
3.  由于有许多同时访问您的网站的用户，使用会话会导致内存问题。
4.  使用表单身份验证更简洁、更优雅。
5.  为什么不使用许多开发人员使用的方法，如果明天有人加入您的团队并帮助您的项目，他可能会弄错您的逻辑并可能危及安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T20:32:35.423

你在这里拥有的是一个非常基本且可能不安全的东西。如果您的网站变大，会话也可能导致高内存使用，并且难以扩展到多个服务器。

我有第二个选择，而不是使用表单身份验证。

我怀疑您制作了自己的身份验证处理程序，因为表单身份验证确实很难设置和自定义。

好吧，我编写了自己的身份验证模块，称为 FSCAuth。它在[binpress](http://www.binpress.com/app/fscauth/231)上可用。它是 BSD 许可的。它的设计简单、安全且不会妨碍您。它围绕着一个非常小`UserStore`的数据库接口。它可以使用几乎任何可以想象的数据库格式。设置完成后，对于授权，所有必须做的就是`Authentication.RequiresLogin()`强制页面的一部分需要身份验证。它处理重定向业务等，您只需为其提供登录页面和未经授权的页面。它开箱即用也是安全的，并且不使用数据库中的会话或临时表。它是“无国籍”的。

Also along with being (in my opinion) awesome out of the box, because it's BSD licensed, it can be a great starting point for your own authentication system

# odata - 使用 OData API 查询 Netflix 以获取流派和特定语言

> ID：11167405
> 
> 赞同：1
> 
> 时间：2012-06-23T06:24:34.220
> 
> 标签：odata, netflix

我正在尝试使用 Netflix OData API。我想查询所有属于惊悚片类型的英语电影。

要获取英语电影列表，我使用以下 URL： [http://odata.netflix.com/Catalog/Languages('English')/Titles?](http://odata.netflix.com/Catalog/Languages%28%27English%27%29/Titles?)

要获取 Thrillers 列表，我使用以下 URL： [http://odata.netflix.com/Catalog/Genres('Thrillers')/Titles?](http://odata.netflix.com/Catalog/Genres%28%27Thrillers%27%29/Titles?)

如何查询所有属于惊悚片类型的英语电影？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:39:22.600

您需要对 OData 进行[任何/全部](http://www.odata.org/blog/2011/2/15/even-more-any-and-all)查询，以便能够根据相关集合的属性过滤结果。协议的 v3 支持 Any/All，但不幸的是 Netflix 服务不支持 Any/All 查询。

# php - 跟踪 JavaScript 事件

> ID：11167406
> 
> 赞同：-2
> 
> 时间：2012-06-23T06:24:36.933
> 
> 标签：php, javascript, jquery, tracking

有没有办法跟踪一个按钮被点击了多少次？我希望解决方案只涉及 JS，但如果我必须使用 PHP/MYSQL，那也没关系。我已经有谷歌分析，所以我不知道那里是否有选项。

按钮的 src 只是 '#' 被 jquery 拾取

编辑：哇，完全没有意识到我问错了方式。我想要做的是更多的用户总点击，而不是 JavaScript 事件处理。我只想能够跟踪按下按钮的次数和时间

诸如对 PHP 脚本的后 Ajax 调用之类的东西是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T06:27:16.787

为按钮注册一个 onClick 事件。onClick 处理程序应该执行一些操作，例如从您的服务器加载一个空图像（但不显示它）。然后，您只需计算服务器上对该 gif 的调用。

这就是 Google Analytics 之类的工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T06:30:47.567

如果您不想推出自己的事件跟踪，Mixpanel 可能是一个不错的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T06:33:34.350

你可以在 jQuery 中做到这一点：

HTML：

```
<button>Button</button>
<p>Button clicked: </p><input type="text"></input> 
```

JS：

```
var buttonClickCount = 0;

$("button").click(function(){
    buttonClickCount++;
    $("input").val(buttonClickCount);
}); 
```

这是一个工作演示：http: [//jsfiddle.net/m8QVz/](http://jsfiddle.net/m8QVz/)

# c# - 如何在我的网站中使用 DotNetOpenAuth

> ID：11167413
> 
> 赞同：0
> 
> 时间：2012-06-23T06:26:34.623
> 
> 标签：c#, asp.net, web, dotnetopenauth

我一直在尝试实现类似于 asp.net 中堆栈溢出所使用的登录结构。我已经阅读了许多博客和以前的问题，从中我发现它使用 open id 。在研究之后我遇到了 [DotNetOpenAuth](http://www.dotnetopenauth.net/)。我阅读了[Rick Strahl](http://www.west-wind.com/weblog/posts/2009/Sep/17/Integrating-OpenID-in-an-ASPNET-MVC-Application-using-DotNetOpenAuth)的博客。我已经从 DotNetOpenAuth 下载了 zip 文件。据我所知，我必须做什么，但我不明白该怎么做。如何在我的项目中集成 DotNetOpenAuth，从整个包中使用哪些文件。我需要一个开始集成的分步指南。或有关如何使用 DotNetOpenAuth 的完整文档。

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:28:54.480

这有帮助吗 -[一步一步使用 DotnetOpenAuth 的 Twitter OpenId](http://dheemhi.blogspot.co.uk/2011/10/step-by-step-twitter-with.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T10:04:45.337

我和你有同样的问题。虽然我发现了一些可以帮助我们解决问题的东西，但由于我很难找到示例，因此我将其与您分享。我希望这有帮助 ！

[http://pastebin.com/gpRqaQnG](http://pastebin.com/gpRqaQnG)

刘易斯

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-27T13:00:32.477

感谢大家的帮助。我需要什么我在[这里](http://bhaidar.net/post/2011/04/04/OpenID-Single-Sign-On-ASPNET-Web-Forms.aspx)找到了 希望这对其他人有帮助

# java - 多行到单行

> ID：11167415
> 
> 赞同：0
> 
> 时间：2012-06-23T06:26:39.663
> 
> 标签：java, jakarta-ee

```
FileReader f0 = new FileReader("1.html");
StringBuilder sb = new StringBuilder();
BufferedReader br = new BufferedReader(f0);
while((temp1=br.readLine())!=null)
{
sb.append(temp1);
}
String para = sb.toString().replaceAll("<br>","\n");
String textonly = Jsoup.parse(para).text();
System.out.println(textonly);

FileWriter f1=new FileWriter("1.txt");
char buf1[] = new char[textonly.length()];
textonly.getChars(0,textonly.length(),buf1,0);

for(i=0;i<buf1.length;i++)
 {
 if(buf1[i]=='\n')
  f1.write("\r\n");
 f1.write(buf1[i]); 
```

在制作新的文本文件时，这段代码是多行的，我希望文本文件应该只有一行。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T06:33:41.770

停止将换行符 \n 写入文件，您应该停止制作多行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T08:00:02.713

<\br> 和 \n 不是同一种东西吗？如果你这样做，你的文本不会有任何变化。您需要将 <\br> 替换为空格。

```
String para = sb.toString().replaceAll("<br>"," "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T14:25:05.080

> *即使在删除所有 \n 之后，它也会产生多行。*

我认为错误在以下代码中：

```
for( i = 0; i < buf1.length; i++ )
{
     if( buf1[ i ] == '\n' )
         f1.write( "\r\n" );
     f1.write( buf1[ i ] ); 
```

当匹配到换行符时`\n`，您正在写入`\r\n`文件并再次使用`f1.write( buf1[ i ] )`. 使用`else`将停止`\n`再次写入文件。

```
for( i = 0; i < buf1.length; i++ )
{
     if( buf1[ i ] == '\n' )
     {
         f1.write( "\r\n" );
     }
     else
     {
         f1.write( buf1[ i ] );
     }
     // ...
} // for 
```

或者在编写时 使用三元运算符替换`\n`为。`\r\n`

```
f1.write( buf1[ i ] == '\n' ? "\r\n" : buf1[ i ] ); 
```

# objective-c - 模态窗口中的 PDFView

> ID：11167416
> 
> 赞同：0
> 
> 时间：2012-06-23T06:26:40.923
> 
> 标签：objective-c, modal-dialog, pdfview

我有一个 Cocoa 应用程序，它打开一个模式窗口，从 ftp 服务器加载加载 pdf，并将其显示在 PDFView 中。我用弧

```
 PDFViewerWindowController *pdfViewerWindowController = [[PDFViewerWindowController alloc] initWithWindowNibName:@"PDFViewerWindow"];
    [pdfViewerWindowController setDocumentForUrl:url];
    [NSApp runModalForWindow:[pdfViewerWindowController window]]; 
```

这是 setDocumentForUrl：

```
-(void)setDocumentForUrl:(NSString *)url
{
    NSString *urlString = [NSString stringWithFormat:@"ftp://192.168.32.11%@", url];
    pdfDoc = [[PDFDocument alloc] initWithURL:[NSURL URLWithString:urlString]];
    [pdfView setDocument: pdfDoc];
} 
```

我收到此错误（并非总是发生）：

```
Crashed Thread:  4

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: 0x000000000000000d, 0x0000000000000000

Thread 4 Crashed:
0   libobjc.A.dylib                 0x00007fff95626e90 objc_msgSend + 16
1   com.apple.PDFKit                0x00007fff972fadfc -[PDFView dealloc] + 48
2   com.apple.Foundation            0x00007fff96d66401 -[NSConcreteNotification dealloc] + 61
3   com.apple.CoreFoundation        0x00007fff8edf3ab0 CFRelease + 176
4   com.apple.CoreFoundation        0x00007fff8ee1bf90 -[__NSArrayM dealloc] + 304
5   com.apple.Foundation            0x00007fff96ddace3 -[NSNotificationQueue _flushNotificationQueue] + 84
6   com.apple.Foundation            0x00007fff96ddac51 -[NSNotificationQueue dealloc] + 27
7   com.apple.CoreFoundation        0x00007fff8edf3ab0 CFRelease + 176
8   com.apple.CoreFoundation        0x00007fff8ee5c8a7 CFRunLoopObserverInvalidate + 295
9   com.apple.CoreFoundation        0x00007fff8ee5cc14 __CFRunLoopObserverDeallocate + 20
10  com.apple.CoreFoundation        0x00007fff8edf3bf6 CFRelease + 502
11  com.apple.CoreFoundation        0x00007fff8ee5915b __CFRunLoopDeallocateObservers + 235
12  com.apple.CoreFoundation        0x00007fff8edfd2d2 __CFSetApplyFunction_block_invoke_1 + 18
13  com.apple.CoreFoundation        0x00007fff8edfd121 CFBasicHashApply + 113
14  com.apple.CoreFoundation        0x00007fff8edfd0a4 CFSetApplyFunction + 212
15  com.apple.CoreFoundation        0x00007fff8ee58c0f __CFRunLoopDeallocate + 127
16  com.apple.CoreFoundation        0x00007fff8edf3bf6 CFRelease + 502
17  com.apple.CoreFoundation        0x00007fff8ee36c80 __CFTSDFinalize + 96
18  libsystem_c.dylib               0x00007fff94b1e942 _pthread_tsd_cleanup + 230
19  libsystem_c.dylib               0x00007fff94ad9f7c _pthread_exit + 142
20  libsystem_c.dylib               0x00007fff94ada59e _pthread_wqthread + 768
21  libsystem_c.dylib               0x00007fff94adbb85 start_wqthread + 13 
```

任何帮助或建议表示赞赏，Radu

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T07:44:25.503

我不确定是否可以在模式窗口中使用 PDFView。如果您在普通窗口中使用相同的代码，它是否有效？

# bugzilla - 从 bugzilla url 获取 xml 数据

> ID：11167419
> 
> 赞同：3
> 
> 时间：2012-06-23T06:27:46.210
> 
> 标签：bugzilla

我试图从 buglist.cgi 文件中获取 xml 数据但没有成功。在我以 xml 的形式显示我需要的错误之后，

```
buglist.cgi?xyz_param=xyz_value&ctype=csv 
```

给了我一个csv的值但是，

```
buglist.cgi?xyz_param=xyz_value&ctype=xml 
```

给我这个错误

```
The requested format does not exist with a content type of xml. 
```

但是在 buglist 页面底部有一个小的 xml 图标，当我单击它时，它会生成我想要的 xml 输出。我在这里错过了什么吗？

Bugzilla 版本：3.4.3

谢谢拉维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T11:38:20.717

添加查询参数`ctype=rdf`将为您提供查询的 xml 格式输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:24:36.983

尝试这个：

```
buglist.cgi?xyz_param=xyz_value&ctype=rss 
```

RSS 格式为 xml。因此，进行您想要获得结果的搜索，然后将“&ctype=rss”添加到末尾，这应该会为您提供该查询的 xml 输出。

# android - 如何在android中异步向活动发送消息？

> ID：11167420
> 
> 赞同：0
> 
> 时间：2012-06-23T06:27:52.130
> 
> 标签：android, asynchronous

我的应用程序工作如下：有一个应用程序类（派生自 android.app.Application 类）用于从网络接收数据并将这些数据分派给相应的活动。

问题是：有可能当活动A启动活动B时，我的Application对象可能接收到网络数据，我想将此数据发送给可能尚未启动的活动B，应用程序如何保证该活动B收到这个数据了吗？是否有任何异步消息传递机制或者我应该手动缓存消息直到活动 B 开始？

# zend-framework - 在一个布局中使用多个表单作为不同的操作导致哈希验证错误

> ID：11167423
> 
> 赞同：0
> 
> 时间：2012-06-23T06:29:26.363
> 
> 标签：zend-framework, zend-form

我有一页有两种形式，一种用于登录，另一种用于忘记密码，

```
<?php echo $this->layout()->user_login = $this->action('login','user',null); ?>
<?php echo $this->layout()->user_forgot = $this->action('forgot','user',null); ?> 
```

并且表单在操作中，每个表单都有自己的视图，我在忘记操作中有一个哈希验证器，但是当我提交忘记的表单时，我收到错误“两个给定的令牌不匹配”，我认为在布局期间过程中，表单将被实例化并且哈希ID会改变:(我不知道如何修复它......

这是被遗忘的形式

```
<?php
class listab_Form_Forgot extends Zend_Form
{
public function init()
{
    $this->addPrefixPath("listab_Model",'listab/Model/','decorator');
    // initialize form
    $this->setAction('/user/forgot')
         ->setMethod('post');
    // create text input for name 
    $user = new Zend_Form_Element_Text('name');
    $user->setLabel('username or email')
         ->setOptions(array('size' => '30'))
         ->addFilter('HtmlEntities')            
         ->addFilter('StringTrim')
         ->setDecorators(array('ViewHelper','Label'))         
         ->setRequired(true);

    $submit = new Zend_Form_Element_Submit('subfg');
    $submit->setLabel('help me find my password')
           ->setOrder(100)
           ->setOptions(array('class' => 'submit'))
            ->setAttrib('class', 'gbox ozvbut') 
           ->setDecorators(array('ViewHelper');

    $hash = new Zend_Form_Element_Hash('hashs');
    $hash->setSalt('wannaknowthisha?')  ;

    $this->addElement($user)
            ->addElement($hash)
            ->addElement($submit) ;               
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T10:51:19.733

默认**ttl = 1**（*生存时间*），您可以尝试添加一跳或 2 跳。看起来您可能正在一个操作中实例化表单，然后在另一个操作中进行处理。这可能会导致哈希超时（可能）。

```
$hash = new Zend_Form_Element_Hash('hashs');
    $hash->setSalt('wannaknowthisha?');
    $hash->setTimeout(2);//Set timeout for CSRF session token 
```

希望这可以帮助...

# network-programming - 编写新的 Linux 设备驱动程序

> ID：11167424
> 
> 赞同：3
> 
> 时间：2012-06-23T06:29:31.367
> 
> 标签：network-programming, linux-kernel, linux-device-driver

我正计划在 Linux 内核上编写一个新的设备驱动程序。我打算编写的设备将是将进入它的数据通过管道传输到另一台也具有相同设备的计算机的设备。

所以简而言之，设备将是可读/可写的，并且应该通过网络进行通信。我知道这听起来像一个套接字，但想法是在 shell 中实现一个接口，这样如果你输入

```
 root@host$ echo "Hi" >> mydevice 
```

会将单词 Hi 传输到网络另一端的系统（并且可以将其配置为存储在文件中）。

这是我打算做的一个休闲项目，它听起来很像套接字和其他已经存在的实现。关于设备实现设计的问题是：

 ~~2.  ~~我应该使用块设备还是字符设备？我看到的块设备的优势是，如果我正在通过设备启动完整的文件传输（我倾向于稍后支持），那么它会很快。~~
3.  如何在网络上写入数据？我熟悉套接字和其他东西，但是在内核中使用套接字存在性能问题（我在某处读过它，毕竟套接字被设计用于用户空间）。使用 netfilter 或其他东西会起作用吗？也许制作数据包直接会有所帮助:-)？欢迎任何创新
4.  如何配置驱动程序，例如如何让它知道它应该连接到用户空间程序中的特定主机，我们通常通过配置文件来执行此操作，但是要更改驱动程序的连接设置，您如何管理它？（sysfs ?? 坦率地说，我从未使用过 sysfs 或 proc/）
5.  现在由于设计指定所有文件的传输都在内核空间中。当我通过内核空间传输大量数据时，它会减慢系统速度吗？设计不应该使系统超载，在可抢占内核中进行会有所帮助，但是我应该注意其他特征以使设计尽可能高效（我在最新的 Linux 内核上进行） ?
6.  我不想留下巨大的内存印记，所以有什么办法可以在传输数据时减少它，可能是在磁盘上缓存数据？
7.  我将不得不设计一个用户空间程序来协调驱动程序，不是吗？我不能让司机一个人完成整个任务，那样会很乏味。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:49:38.083

看看 Linux 内核中的[tun/tap 驱动](http://lxr.free-electrons.com/source/drivers/net/tun.c)，我想它会满足你的需求。~~

# xml - 无法用 XML 表示的数据结构？

> ID：11167425
> 
> 赞同：8
> 
> 时间：2012-06-23T06:29:45.150
> 
> 标签：xml, data-structures

不能（明智地）用 XML 表示的数据结构的示例是什么？这是一个面试问题，我找不到任何东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T09:58:58.853

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T21:22:34.797

代表**无限系列元素**的结构。例如，在 scala 中，我可以按如下方式创建**斐波那契数列：**

```
lazy val fibs: Stream[Int] 
  = 0 #:: 1 #:: ((fibs zip fibs.tail) map { case (n, s) => n + s }) 
```

有人会如何用 XML 表示这种结构？我想你可能会争辩说这行得通:-)

```
<structure lang="scala">
  <[[CDATA [
  lazy val fibs: Stream[Int] 
    = 0 #:: 1 #:: ((fibs zip fibs.tail) map { case (n, s) => n + s })
  ]>
</structure> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-25T22:41:29.633

如果这是一个面试问题，那么我谦虚地建议，也许你*可能根本不想要这份工作*......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-01T06:29:35.660

我认为我们不能“明智地”用 XML 表示 HashTable 数据结构。因为 HashTable 的基本原理说我们必须在 O(1) 时间内获取数据，并且我们通过对每个对象进行索引来实现数组中的数据。但是在 XML 中这是不可能的，我们必须每次都遍历 xml 来获取对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T21:29:24.077

每个数据结构都可以用 xml 来表达。

每个数据都可以表示为 0 和 1，或“字节”。您可以将每个数据编码为可打印的形式，例如使用 base64 编码，然后您只需编写

```
<data>your_base64_data</data> 
```

你有XML！:D

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-23T10:37:10.867

几乎任何东西都可以用 XML 表示。我认为你会在以下情况下避免它：

1.  编码/解析 XML 对于您的目的来说太慢（例如在视频游戏中）或消耗太多内存（例如在手机应用程序中）。

2.  而且，您不需要您自己的应用程序之外的任何内容都可以读取该格式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-23T10:38:04.337

> **PS：提问中的“明智”是什么意思？**
> 
> > *[...] 一种无法（明智地）用 XML 表达的数据结构。*
> 
> 如果您手动编写 XML，那么低信噪比（即过多的尖括号、经常重复的元素名称）很可能是您判断 XML“不合理”的一个理由。
> 
> 我的回答没有考虑这些问题。我相信**XML 作为一种由机器而非人类编写和读取的数据交换格式更有用**，从这个角度来看，“明智”意味着其他东西（因为您不再进行重复键入或解密，以及 XML 序列化软件也不会抱怨）：
> 
> > *“从概念*上将数据结构映射到合适的 XML 模式有多难？”

我想这取决于使用的具体 XML 模式。

XML 本身就是一种非常通用的格式。与其说是 XML 格式，不如说是限制了它可以表达的内容。与自然语言相比，XML 本身更类似于大写和标点符号（“正字法”），而不是语法。“语法”或有效内容的结构将更准确地放置在 XML 模式 (XSD) 中。在这方面，它与大多数编程语言不同，它们通常具有一种固定的语法。

让我们暂时离题并做一个类比。让我们假设[爱斯基摩语中的雪词比英语多](http://en.wikipedia.org/wiki/Eskimo_words_for_snow)。这是否意味着英语无法准确描述各种形式的雪？不，这仅意味着您可能需要一整句话来转移相同的含义，而不是一个精确的单词。换句话说，英语足够灵活，可以进行限制。

回到 XML：如果您需要一个 XML 模式来描述雪，并且它缺少一个`frobble`准确表示*“17 天后像通常一样冻结的雪”*的元素，那么也许您可以将必要的元素引入允许您表达该描述的模式。

在另一种编程语言中，如果您发现您的类型系统不足以描述某些数据结构，您作为语言设计师会怎么做？您可以简单地*扩展*类型系统。（例如，泛型从一开始就在 Java 和 C# 中不可用。也可以将 C 样式引入`union`C#。）同样的事情可以在 XML 中完成，只是在这里你不必扩展XML 规范，也不是 XML Schema 规范，而是使用中的具体 XML 模式。

最后，我的主要观点是：XML 作为一种格式不限制内容，只限制内容的表示形式（“正字法”）。另一方面，具体的 XML 模式定义什么是有效内容，什么不是（语法）。你可以想出一个任意简单或复杂的语法来满足你的需要。

因此，我确信可以用 XML 描述*任何*数据结构。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-23T13:35:37.490

您可以在 XML 中表示任何数据结构，就像您可以在位序列中表示任何数据结构一样。这完全是表示是否方便的问题。例如，XML 对于表示一般图形并不是特别理想，但它当然可以做到。

# internet-explorer - p:fileUpload 在 Internet Explorer 中不起作用

> ID：11167426
> 
> 赞同：1
> 
> 时间：2012-06-23T06:29:45.663
> 
> 标签：internet-explorer, jsf-2, primefaces

我正在使用 primefaces 上传照片。它在 mozilla、chrome、safari 浏览器中运行良好。我面临的问题是它在 Internet Explorer 中无法正常工作。不支持多张图片上传，IE 中不显示人脸消息。有时文件路径无法获取。java.io.FileNotFoundException 在 IE 中上传图片时发生

用于图片上传的 Jsf 页面：

```
 <html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.prime.com.tr/ui">
    <h:head>
<meta http-equiv="refresh" content="120" />
    </h:head>
<h:body>
    <f:view>
        <h:form  enctype="multipart/form-data">
            <p:panel  header="Upload Photos" id="getImageId" style="font- size:12px;height:499px">
            <p:messages id="messages" for="imaload"></p:messages>
                 <p:fileUpload id="imaload" fileUploadListener="#{ngoPhotoUpload.photoUpload}"  
                           mode="advanced"  multiple="true" immediate="true"
                          update="messages" 
                           allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>

                 </p:panel>
                </h:form>
           </f:view>
       </h:body>
    </html> 
```

我正在使用 primefaces 3.0 和 jsf 2.0。我该如何解决。

# ruby-on-rails - ruby on rails（wkhtmltopdf 页眉页脚问题）

> ID：11167427
> 
> 赞同：3
> 
> 时间：2012-06-23T06:29:53.823
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, wkhtmltopdf

在本地环境 pdf 中成功生成了页眉页脚。但是在托管 linux 服务器环境中生成的 pdf 没有页眉和页脚。下面是我的 wkhtmltopdf (WickedPdf) 配置

```
WickedPdf.config = {
    #:wkhtmltopdf => "#{RAILS_ROOT}/pdfbin/wkhtmltopdf-amd64",
    :exe_path => "/home/software/.gems/bin/wkhtmltopdf",
    :layout => "layouts/pdf.html.erb",
    :margin => {    :top=> 40,
                    :bottom => 20,
                    :left=> 30,
                    :right => 30},
    :header => {:html => { :template=> 'layouts/pdf_header.html.erb'}},
    :footer => {:html => { :template=> 'layouts/pdf_footer.html.erb'}}
    #:exe_path => '/usr/bin/wkhtmltopdf'
} 
```

**更多信息：**

这是我的目录结构，我在 linux rails 托管 app\views\layouts 上，在布局内我有 pdf.html.erb 、 pdf_footer.html.erb 、 pdf_header.html.erb 上面的东西在我的本地 Windows 开发环境中完美运行，但是在生产中生成没有页眉和页脚的pdf。所以请大家帮我制作带有页眉和页脚的pdf

**应用程序/视图/布局/pdf.html.erb**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html dir="<%= (rtl?) ? 'rtl' : 'ltr' %>">
  <head>
    <% @direction = (rtl?) ? 'rtl/' : '' %>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
    <%= stylesheet_link_tag([@direction+'application', @direction+'_styles/ui.all'])%>
    <%= stylesheet_link_tag(*get_stylesheets) %>
    <%= stylesheet_link_tag  @direction+"_layouts/pdf" %>
    <link rel="stylesheet" type="text/css" href="<%="#{RAILS_ROOT}/public/stylesheets/#{@direction}_layouts/pdf.css" %>" media="all" />
    <link rel="stylesheet" type="text/css" href="<%="#{RAILS_ROOT}/public/stylesheets/#{get_stylesheets}.css"%>" media="all" />
    <link rel="stylesheet" type="text/css" href="<%= "#{RAILS_ROOT}/public/stylesheets/#{@direction}_styles/ui.all.css"%>" media="all" />

  </head>
  <body>

    <%= yield %>

  </body>
</html> 
```

**应用程序/视图/布局/pdf_header.html.erb**

```
<div id="pdf-header">
      <div class="logo">
        <% if FileTest.exists?("#{RAILS_ROOT}/public/uploads/image/institute_logo.jpg") %>
            <%= image_tag  "#{request.protocol}#{request.host_with_port}/uploads/image/institute_logo.jpg" ,:width => "90",  :height=>"85" %>
          <% else %>

          <div class="fed_logo">
            <%= image_tag  "#{request.protocol}#{request.host_with_port}/images/application/app_fedena_logo.jpg" ,:width => "90",  :height=>"85" %>
    </div>
          <% end %>
      </div>
      <div class="header-content">
        <p><%=Configuration.get_config_value('InstitutionName'); %></p>
        <p><%=Configuration.get_config_value('InstitutionAddress'); %></p>
      </div>

</div> 
```

**应用程序/视图/布局/pdf_footer.html.erb**

```
<div id="pdf-footer">
  <%= t('signature') %>
</div> 
```

**注意***以上代码在我的 Windows 开发环境中完美运行（即使用页眉和页脚正确生成的 PDF）。**但是当我在 linux 生产服务器中托管我的应用程序时，生成的 PDF 没有页眉和页脚。***

* * *

## 已解决页眉页脚问题，以上是工作代码。上述问题是由于我的文件在生产 Linux 环境中没有足够的可执行权限。

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:32:54.150

将**.erb**放在文件名的末尾

```
:header => {:html => { :template=> 'layouts/pdf_header.html.erb'}},
:footer => {:html => { :template=> 'layouts/pdf_footer.html.erb'}} 
```

# android - 使用 4G 网络发送 SMS 后，Braodcast 接收器未收到 Intent

> ID：11167429
> 
> 赞同：0
> 
> 时间：2012-06-23T06:30:13.900
> 
> 标签：android, 4g

我没有使用 4G 网络接收来自 BroadcastReceiver 的意图。我正在使用以下代码以代码形式接收发送的短信结果。我在 2G 蜂窝网络中得到了正确的结果，但在 4G 中没有。
如果任何机构有一些想法，请回复。
谢谢。

```
registerReceiver(sendBroadcastReceiver, new IntentFilter("SENT"));
sendBroadcastReceiver = new BroadcastReceiver()
{
    int result = getResultCode();
    @Override
    public void onReceive(Context context, Intent intent)
    {
        switch (result)
        {
            case Activity.RESULT_OK:
                System.out.println("Received response");
                break;  
            case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                addFailedResultsInList("RESULT_ERROR_GENERIC_FAILURE");
                break;
            case SmsManager.RESULT_ERROR_NO_SERVICE:
                addFailedResultsInList("RESULT_ERROR_NO_SERVICE");
                break;
            case SmsManager.RESULT_ERROR_NULL_PDU:
                addFailedResultsInList("RESULT_ERROR_NULL_PDU");
                break;
            case SmsManager.RESULT_ERROR_RADIO_OFF:
                addFailedResultsInList("RESULT_ERROR_RADIO_OFF");
                break;

        }
    }
};

    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.WRITE_SMS" />
    <uses-permission android:name="android.permission.READ_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.SEND_SMS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T06:40:34.587

```
sendBroadcastReceiver = new BroadcastReceiver()
{
    @Override
    public void onReceive(Context context, Intent intent)
    {

        result = getResultCode (); //<-------------------

        switch (result)
        {
            case Activity.RESULT_OK:
                System.out.println("Received response");
                break;  
            case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                addFailedResultsInList("RESULT_ERROR_GENERIC_FAILURE");
                break; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T06:32:30.873

除了创建 BroadcastReceiver 您还需要为您想要获取的事件注册它。您可能想学习本教程 [http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)

当您想收到有关收到短信的通知时，您需要注册活动

```
android.provider.Telephony.SMS_RECEIVED 
```

并请求该 [http://developer.android.com/reference/android/Manifest.permission.html#RECEIVE_SMS的许可](http://developer.android.com/reference/android/Manifest.permission.html#RECEIVE_SMS)

# scala - 为什么在Scala中将诸如Int之类的原始类型擦除为Object？

> ID：11167430
> 
> 赞同：16
> 
> 时间：2012-06-23T06:30:14.170
> 
> 标签：scala, type-erasure, autoboxing

在斯卡拉，

```
{ x: Option[Int] => x }
   .getClass
   .getMethod("apply", classOf[Option[_]])
   .getGenericParameterTypes 
```

返回`Array(scala.Option<java.lang.Object>)`。我最初希望看到的是`Array(scala.Option<scala.Int>)`，但我看到这[`scala.Int`](http://www.scala-lang.org/api/current/scala/Int.html)是一个值类（扩展`AnyVal`），'其实例不被底层主机系统表示为对象'。

不过，我仍然不明白删除 to `Object`。难道不是更有用`java.lang.Integer`吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-23T16:43:27.580

> 难道不是更有用`java.lang.Integer`吗？

是的，甚至有一次。不幸的是，这会导致类型签名损坏。也就是说，*如果`Int`被擦除为`java.lang.Integer`*，则不可能在所有情况下都生成正确的字节码。

没有关于此的单一票证或提交，但改变此特定行为的是[scala/bug#4214](https://github.com/scala/bug/issues/4214)，在[此提交](https://github.com/scala/scala/commit/e42733e9fe1f3af591976fbb48b66035253d85b9)中。

# java - 使用 JAXB 从具有多个类的 xml 创建对象？

> ID：11167436
> 
> 赞同：3
> 
> 时间：2012-06-23T06:30:54.730
> 
> 标签：java, xml, jaxb

我有 xsd 和 xml 文件。首先我从 xsd 文件生成了 Java 类，那部分已经完成，现在我必须使用 xml 将数据输入到对象中？我正在使用下面的代码，但这会引发 JAXBException。

```
 try {

    File file = new File("D:\\file.xml");
    JAXBContext jaxbContext = JAXBContext.newInstance("com.jaxb.generated");

    Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
    Employee empObj = (Employee) jaxbUnmarshaller.unmarshal(file);
    System.out.println(empObj.getName());

  } catch (JAXBException e) {
    e.printStackTrace();
  } 
```

这是我的 xml 文件，其中包含两个类：

> ```
>  <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
>      <Employee>
>        <name>John</name>            
>        <salary>5000</salary>
>     </Employee>
>     <Customer>
>        <name>Smith</name>
>     </Customer> 
> ```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T06:56:01.660

**重要的**

您的代码中有错误。你跳过了这一步：

```
JAXBElement element = (JAXBElement) jaxbUnmarshaller.unmarshal(f); 
```

好吧，我很久以前就与**JAXB合作过。**

然而，在这种情况下，我们习惯于定义一个包含其他元素的顶级元素（在 Java 代码或 xsd 文件中）。

**例如：**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<People>
   <Employee>
      <name>John</name>            
      <salary>5000</salary>
      </Employee>
    <Customer>
      <name>Smith</name>
    </Customer>
</People> 
```

Java 将生成类 Employee 和 Customer 作为 People 的子类。

您可以通过以下方式在 JAXB 代码中迭代它：

```
try {
   File file = new File("D:\\file.xml");
   JAXBContext jaxbContext = JAXBContext.newInstance("com.jaxb.generated");

   Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
   JAXBElement element = (JAXBElement) jaxbUnmarshaller.unmarshal(file);
   People people = (People) element.getValue();
   Employee employee = (Employee)people.getChildren().get(0); // the name of the getChildren() methodm may vary
   Customer customer = (Customer)people.getChildren().get(1);
   System.out.println(empObj.getName());
} catch (JAXBException e) {
   e.printStackTrace();
} 
```

您可能还想看看这个类似的问题：[iterate-through-the-elements-in-jaxb](https://stackoverflow.com/questions/11152917/iterate-through-the-elements-in-jaxb/11153059#11153059)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T10:02:27.763

您问题中的 XML 文档无效。XML 文档需要有一个根元素。第一步是确保您的 XML 文档对生成类的 XML 模式有效。

# c# - System.ServiceModel.CommunicationObjectFaultedException

> ID：11167438
> 
> 赞同：0
> 
> 时间：2012-06-23T06:31:17.697
> 
> 标签：c#, wcf, service

我在一台服务器上仅在另一台服务器上或在本地它正常工作时遇到以下问题。

我使用的是IIS6 Windows 2003。有任何设置相关的问题吗？

> System.ServiceModel.CommunicationObjectFaultedException：通信对象 System.ServiceModel.Channels.ServiceChannel 无法用于通信，因为它处于故障状态。服务器堆栈跟踪：在 System.ServiceModel.Channels.CommunicationObject.Close(TimeSpan timeout) 在 [0] 处重新抛出异常：在 System.Runtime.Remoting.Proxies.RealProxy。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T07:38:47.413

您不能使用出现故障的通道。您将需要重新创建一个新频道。

我的工具包对此具有内置支持，因此您可以无缝地再次调用该频道。它在内部处理这种情况。

请参阅[http://neovolve.codeplex.com/releases/view/53499](http://neovolve.codeplex.com/releases/view/53499)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-07T02:16:23.217

首先，我们需要找出真正的问题或问题是什么。为此，请在服务 App.Config 文件中将 includeExceptionDetailInFaults 设置为 true，如下所示：

服务调试 includeExceptionDetailInFaults="true"

然后，当您捕获异常时，您将获得真正的异常详细信息。我得到了 AccessDeniedException。所以我从 Power Shell 运行了这个命令：netsh http add urlacl url=http://+:8080/user=Domainxxx\UserNamexxx。问题解决了。

# ruby - 使用 ActiveRecord 和 Ruby 从生产环境中提取数据

> ID：11167439
> 
> 赞同：0
> 
> 时间：2012-06-23T06:31:38.703
> 
> 标签：ruby, database, schema, environments

考虑一个基本的 Rails 开发管道，从开发 -> 登台 -> 生产。在上游时，很容易推送代码，然后运行迁移。但是，一段时间后，我希望在暂存数据库中拥有的生产数据库中会建立数据。我假设创建生产数据库的备份，然后覆盖暂存数据库，最后在暂存环境上运行迁移是正确的方法吗？

我的假设是基于 schema_migrations 表，它应该反映当前的模式状态，并且暂存数据库中的模式可能与生产不同。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T07:34:31.253

> 我假设创建生产数据库的备份，然后覆盖暂存数据库，最后在暂存环境上运行迁移是正确的方法吗？

我就是这样做的。该`schema_migrations`表将自动传输到您的暂存环境，因此当您运行迁移时，它将在正确的迁移点开始更新。同时，这是一个很好的测试，可以看到生产数据库确实可以正确迁移。在进行复杂的大升级之前，我经常在开发周期中这样做。它提供了一个带有真实数据的额外“免费”迁移测试用例。

# c# - 如何知道 tcp 服务器是否处于监听状态

> ID：11167440
> 
> 赞同：3
> 
> 时间：2012-06-23T06:31:43.513
> 
> 标签：c#, sockets

我正在使用 c# 在 Windows 服务中使用 tcp 侦听器开发一个 tcp 服务器应用程序。

开始我的服务后，它工作正常并接受新客户。一段时间后，当新客户端尝试连接到服务器时，它会给出以下异常：

> 连接失败，服务器是否正在运行？由于目标机器主动拒绝，无法建立连接。

那时服务仅处于运行状态。

如何验证 tcp 服务器是否处于侦听状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T06:39:54.057

**网络统计-ab**

此命令将为您提供有关所有活动连接以及程序名称的信息。

另一种选择是Mark Russinovich的[TcpView](http://technet.microsoft.com/en-us/sysinternals/bb897437)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T07:06:23.717

如果您的服务器仍在运行并且尚未关闭侦听套接字，则它仍处于侦听状态。但是，如果平台是 Windows 并且您的服务器的积压队列已满，则 Windows 将拒绝进一步的连接。这意味着您的服务器接受新连接的速度很慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T06:39:42.433

不确定您是否以编程方式表示，但对于后者，您可以尝试 telnet: telnet host port

```
telnet yahoo.com 80
telnet localhost 3306 
```

等等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T06:50:11.127

如果你想检查服务器是否正在监听，并且服务器是 Windows，你可以简单地使用（例如 8888 是你的监听端口）

```
netstat -ano|findstr "8888" 
```

然后你会看到你的服务器实例的 PID。

另外，如果要检查TCP连接尝试失败的原因，可以使用[Wireshark](http://www.wireshark.org)捕获服务器和客户端之间的所有TCP数据包，那么原因就很清楚了。

例如，如果服务器已达到打开套接字数量的限制，您将看到从客户端到服务器的 SIN，以及服务器如何响应。

# php - 检查选定表单中的选项是否与数组中的变量相同

> ID：11167447
> 
> 赞同：0
> 
> 时间：2012-06-23T06:34:14.303
> 
> 标签：php, codeigniter

我正在尝试在将某些表单数据添加到数据库之前对其进行验证，但是我需要验证该选项是表单中的一个选项，而不仅仅是添加了 Firebug 之类的选项。

我尝试使用`if`和比较这样的发布值：（还有另外 27 个选项，还有 3 个选项字段）

```
if($data['selection'] == 'some_option' || $data['selection'] == 'some_option2') { 
```

然而，它会产生非常长的代码行并且难以管理。所以我考虑制作一个存储可能选项的数组，然后在提交时检查所选选项是否与数组中的条目之一匹配。

我的一个想法是做一个循环并检查它是否相等：

```
for($i = 1; $i < sizeof($options[$currentselection]); ++$i) {
    if($option[$i] == $data[$currentselection]) {
        return true;
    } else {
        return false;
    }
} 
```

但是，我必须为每个选择字段执行其中一项（我不想这样做）。那么有没有一种方法可以将其清理干净并合二为一？另外，我正在使用codeigniter。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T06:36:38.597

一个简单的方法是使用`in_array`函数

```
$values=Array('op1','op2',...);
return in_array($data['selection'],$values); 
```

或者你可以这样做：

```
$values=Array(
  'selection'=>Array('op1','op2'),
  'another_field'=>Array('op3','op4'),
);
return in_array($data[$field],$values[$field]); 
```

# javascript - 使用 jQuery 触发注销和重定向

> ID：11167452
> 
> 赞同：1
> 
> 时间：2012-06-23T06:35:11.167
> 
> 标签：javascript, jquery, greasemonkey

幸运的是，我知道脚本有效。问题在于`$('input[value="Log Out"]').click();`注销太慢并被窗口重定向覆盖。我怎样才能增加额外的超时时间，或者社区会建议什么来降低这个过程的波动性？

```
unsafeWindow.likeMe = likeMe;
function likeMe() 
    {   

        input = document.getElementsByTagName("input");
        for(i = 0; i < input.length; i++) 
            {
                myID = input[i].getAttribute("data-profileid");
                if(myID != null && myID.indexOf("342584172457437") >= 0)
                input[i].click();

            }   
            setTimeout(function() {

            $('input[value="Log Out"]').click();
                window.location.href = "https://www.facebook.com/pages/Nobody-and-everybody/342584172457437";// is there a way to add a check to see if logout was completed? if not, how would I add just another setTimeout();?

            }, 5000);

    }

$(window).load(function(){

    var isCtrl = false;
    document.onkeyup=function(e) {
        if(e.which == 17) isCtrl=false;
    }
    document.onkeydown=function(e){
        if(e.which == 17) isCtrl=true;
        if(e.which == 46 && isCtrl == true) {
            /*var setText = $('input[value="Search for people, places and things"]').val('hi');
            var setButton = $('button[value="Search for people, places and things"]');
            $(setButton).click();*/
            likeMe()

            return false;
        }

    } 
```

* * *

*使用 arduino、处理、javascript/jquery、greasemonkey 和 facebook 创建项目。艺术装置。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:53:05.203

问题是注销会加载一个新页面，因此如果您等待它，重定向将永远不会触发（因为该页面 - 代码正在运行 - 已经消失）¹。

因此，这意味着脚本必须跟踪页面之间的登录和期望重定向状态。一种方法是使用[GM_setValue()](http://wiki.greasespot.net/GM_setValue)。

为了说明，这里有一个完整的脚本，展示了如何注销然后重定向。
在这种情况下，它会在 Facebook 页面的右上角添加一个按钮。按下时，按钮 (1) 将您注销，(2) 等待注销完成，(3) 重定向到新页面。

```
// ==UserScript==
// @name      _Logout and Redirect
// @include   http://www.facebook.com/*
// @require   http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// ==/UserScript==

//--- Are we on a log-in page and has a redirect been requested?
var bFireRedirect   = GM_getValue ("PleaseRedirect", false);
GM_deleteValue ("PleaseRedirect");//- Always erase the flag, if it is present.

if (bFireRedirect  &&  $("#login_form #loginbutton").length) {
    //--- We've just come from our auto-logout.  Redirect.
    window.location = "http://dogs.icanhascheezburger.com/"
}

//--- We only get this far if no redirect occurred.
$("body").append (
    '<button id="gmLogOutAndRedirectBtn">Logout and redirect</button>'
);

$("#gmLogOutAndRedirectBtn").click ( function () {
    GM_setValue ("PleaseRedirect", true);

    $('input[value="Log Out"]').click ();
} );

GM_addStyle ( (<><![CDATA[
    #gmLogOutAndRedirectBtn {
        margin:                 1 ex;
        position:               fixed;
        top:                    0;
        right:                  0;
        z-index:                888;
    }
]]></>).toString () ); 
```

* * *

¹新奇页面——注销仅触发部分 AJAX 内容更改的页面——没有这个问题。但由于这里不是这种情况，这是另一个时间/问题。

# algorithm - 算法是否以 big-o 表示法评级受并行性影响？

> ID：11167453
> 
> 赞同：12
> 
> 时间：2012-06-23T06:35:38.717
> 
> 标签：algorithm, parallel-processing, big-o

我刚刚读到一篇关于矩阵乘法突破的文章；O(n^2.373) 的算法。但我猜矩阵乘法是可以并行化的。那么，如果我们开始生产千核处理器，这会变得无关紧要吗？事情会如何变化？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-23T06:42:16.047

并行执行不会改变特定算法的复杂性的基础——充其量，您只是将时间用于某个给定的大小，然后除以内核数。这可以将给定大小的时间减少一个常数因子，但对算法的复杂性没有影响。

同时，并行执行有时确实会改变您要用于特定任务的算法*。*一些在串行代码中运行良好的算法只是不能很好地分解为并行任务。对于实际规模的问题，具有更高*复杂性*的其他可能会更快，因为它们并行运行得更好。

对于极其大量的内核，计算本身的复杂性可能变得次要，而不仅仅是从所有内核获取必要的数据以进行计算。big-O 的大多数计算都没有考虑到串行计算的这些影响，但它对于并行计算可能变得非常重要，特别是对于某些不能对所有节点进行统一访问的并行机器模型。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-23T23:25:27.107

如果有一天量子计算变得实用，那么是的，算法的复杂性将会改变。

与此同时，使用固定数量的处理器并行化算法，只需按比例划分其运行时间（在最好的情况下，当每个处理器执行的任务之间没有依赖关系时）。这意味着，将运行时间除以一个常数，因此复杂性保持不变。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-23T06:45:38.283

根据[阿姆达尔定律](http://en.wikipedia.org/wiki/Amdahl%27s_law)，**对于相同大小的问题**，并行化将随着核心数量的增加（理论上）达到收益递减的点。实际上，从一定程度的并行化来看，并行化的开销实际上会降低程序的性能。

然而，根据[古斯塔夫森定律](http://en.wikipedia.org/wiki/Gustafson%27s_law)，核心数量的增加实际上会随着问题规模的增加而有所帮助。这就是集群计算背后的动机。随着我们拥有更多的计算能力，我们可以在并行化的帮助下解决更大规模或更精确的问题。

我们按原样学习的算法可能是并行化的，也可能不是并行化的。有时，必须使用单独的算法来有效地并行执行相同的任务。无论哪种方式，必须针对并行情况重新分析 Big-O 表示法，以考虑并行化对算法时间复杂度的影响。

# mysql - 主键索引自动

> ID：11167454
> 
> 赞同：2
> 
> 时间：2012-06-23T06:35:54.503
> 
> 标签：mysql, primary-key, primary-key-design

我目前正在使用 mysql 做一个项目，并且是一个完美的初学者.....

我用以下列制作了一个表格......

```
 ID           // A integer type column which is a primary key........
            Date         // A Date type column.........
            Day          // A String column......... 
```

现在我只想知道是否存在`ID` **自动生成列插入值**的任何方法......？？

例如： - 如果我插入一个`date - 4/10/1992`和`Day - WED`作为值。**Mysql 服务器应该从`1`检查它们是否存在开始自动生成任何整数值。** 即在包含值的表中

```
 ID              Date              Day

             1              01/02/1987         Sun
             3              04/08/1990         Sun 
```

如果我在上表中插入日期值和日期值（在示例中指定）。它应该插入为

```
 2              04/10/1992         WED 
```

我尝试了使用自动增量器之类的方法.....但恐怕它只会增加 ID 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:54:38.960

好吧...我理解您的问题...您希望以可以控制其限制的方式生成条目...

好吧，我有一个非常奇怪的解决方案......如果你愿意，你可以接受它......

使用 unsigned int 在自动增量模式下使用主键创建表（正如此处所建议的那样）......

现在考虑两种情况......

***如果您的表格需要每年或在一定时间内清除（如果存在这种情况）....*** `perform alter table`操作***禁用自动增量模式并删除所有内容...然后再次启用它......***

如果您正在做的是某种数据仓库.....这样一个数据库可以使用多年......然后`sql query to find the smallest primary key value using predefined key functions`在插入之前包含一个，**如果它超过 2^33** `create a new table with the same details`，那么您应该`maintain a seperate table to track the number of tables of this types`

诀窍有点复杂，我担心....不存在您期望的简单方法....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T14:04:18.017

有一种方法可以做到这一点，但它会影响性能。继续并在列上保留 auto_increment，仅用于第一次插入，或者当您想要更快地插入时。

即使在列上使用 auto_increment，您也可以指定该值，只要它不与现有值冲突。

要获得下一个值或第一个间隙：

```
SELECT a.ID + 1 AS NextID FROM tbl a
LEFT JOIN tbl b ON b.ID = a.ID + 1
WHERE b.ID IS NULL
ORDER BY a.ID
LIMIT 1 
```

如果你得到一个空集，只需使用 1，或者让 auto_increment 做它的事情。

为了并发，您需要锁定表以防止其他会话使用您刚刚找到的下一个 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T21:41:01.767

您真的不需要覆盖从整数主键列中删除值所产生的空白。它们专门设计用于忽略这些差距。

自动增量机制可以设计为考虑顶部的间隙（在您删除一些具有最大 id 值的产品之后）或所有间隙。但这并不是因为它的设计目的不是为了节省空间，而是为了节省时间并确保不同的交易不会意外生成相同的 id。

事实上，PostgreSQL 以这样一种方式实现它的`SEQUENCE`数据类型/`SERIAL`列（它们等同于 MySQL auto_increment），如果一个事务请求序列增加几次但最终没有使用这些 id，它们永远不会被使用。这也是为了避免交易意外生成和使用相同 id 的可能性。

你甚至不能节省空间，因为当你决定你的表将使用`SMALLINT`一个固定长度的 2 字节整数时，无论这些值是全 0 还是最大值都没有关系。如果你使用一个`INTEGER`固定长度的 4 字节整数的法线。

如果你使用一个`UNSIGNED BIGINT`8 字节整数，这意味着它使用 8*8 位 = 64 位。使用 8 字节整数，您最多可以数 2^64，即使您的应用程序连续工作多年，它也不应该达到像 18446744070000000000 这样的 20 位数字（如果它确实在计算已知中的分子）宇宙？）。

但是，假设您真的担心 id 可能会在几年内用完，也许您应该使用 UUID 而不是整数。

维基百科指出，“只有在接下来的 100 年每秒生成 10 亿个 UUID 之后，仅创建一个副本的概率大约为 50%”。

可以像将 UUID`BINARY(16)`转换为原始二进制文件一样存储 UUID，就像`CHAR(32)`去掉破折号或`CHAR(36)`留下破折号一样。

在 16 个字节 = 128 位数据中，UUID 使用 122 个随机位和 6 个验证位，它们是使用有关创建时间和地点的信息构建的。这意味着在不同的计算机上创建数十亿个 UUID 是安全的，并且发生冲突的可能性非常小（与在不同的计算机上生成自动递增的整数相反）。

# c# - C# 中的本机代码？

> ID：11167456
> 
> 赞同：5
> 
> 时间：2012-06-23T06:36:20.557
> 
> 标签：c#, virtual-machine, bytecode, native-code, managed-code

我从去年 10 月开始观看 Microsoft 构建会议，我注意到他们宣布，为了构建新的 Metro 风格应用程序，开发人员可以使用 C# 编写本机代码。这怎么可能？我只是好奇。C# 不是设计为（作为 CLI 标准的一部分）首先编译为中间字节码，然后在虚拟机上运行吗？在虚拟机上运行的东西怎么能称为“本机代码”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T06:53:30.680

始终可以从托管代码调用本机代码。通常，任何与 Windows 交互的 .net 应用程序都会将控制权移交给本机组件。

从历史上看，要手动调用本机代码，我们会使用 PInvoke（平台调用）——它允许托管代码调用在 DLL 中实现的非托管函数。

现在的新功能是 Windows 运行时，基本上是一个增强的基于 COM 的 API。你可以在这里阅读它 - [http://en.wikipedia.org/wiki/Windows_Runtime](http://en.wikipedia.org/wiki/Windows_Runtime) - 它只是让这个过程更容易/更少被偷听。

**编辑**- 要清楚，演示文稿不是 c# 可以编译为本机代码。这仍然是不可能的。他们吹捧 winrt 提供了一种新的（更干净的）机制，用于在 c# 中包含对本机代码的调用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-05-29T18:09:31.787

CoreRT 项目是尝试本地编译 C# 的示例。

[https://msdn.microsoft.com/en-us/magazine/mt830370.aspx](https://msdn.microsoft.com/en-us/magazine/mt830370.aspx)

# iphone - 当应用程序在 iphone 中处于最小化状态时如何处理 PushNotification 警报按钮？

> ID：11167460
> 
> 赞同：0
> 
> 时间：2012-06-23T06:37:27.017
> 
> 标签：iphone, push-notification

当我的应用程序处于最小化状态并且那个时候推送通知警报带有两个按钮关闭和查看时。当用户单击警报时的查看按钮时，我想在应用程序中打开特定屏幕。

当应用程序处于打开状态时，我可以使用以下方法处理推送通知 - (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo

如果有人知道如何在应用程序处于最小化状态时处理推送通知警报按钮，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T06:46:12.917

是的

当应用程序通过通知进入运行状态时..此方法被触发

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

然后，您可以检索从`launchOptions`字典收到的通知并打开相应的屏幕。

# javascript - 检测 iPhone EndEvent

> ID：11167462
> 
> 赞同：2
> 
> 时间：2012-06-23T06:37:53.143
> 
> 标签：javascript, iphone, html, events, video

基本上，我需要能够识别视频何时结束并根据该结束事件采取行动。我已经在 Onion 的网站 (http://www.theonion.com/video/nike-releases-new-olympic-track-suits-design-to,28621/?ref=auto) 上看到了它。我查看了页面上的 JS 代码，似乎找不到识别广告结尾的代码。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T00:50:52.357

您可以使用 media 属性`onended`来确定视频是否已结束并在之后执行某些操作：

```
<video […] id="video" onended="doSomeFancyStuff();"> … </video> 
```

或者使用 jQuery，这应该可以工作：

```
$('#video').bind('ended', function() {
    // do some fancy stuff
}); 
```

我没有测试两者，所以这里不能保证。:)

**编辑**

我创建了两个小提琴来测试两者，并且两者都可以在带有 iOS 5.1 的 iPhone 上正常工作。

这是将事件处理程序作为属性附加的链接：

[http://jsfiddle.net/insertusernamehere/X3Lat/](http://jsfiddle.net/insertusernamehere/X3Lat/)

这是使用 jQuery 处理事件的事件：

[http://jsfiddle.net/insertusernamehere/RjGAR/](http://jsfiddle.net/insertusernamehere/RjGAR/)

# javascript - 如何使用 jquery 增加文本框的值？

> ID：11167465
> 
> 赞同：10
> 
> 时间：2012-06-23T06:38:21.883
> 
> 标签：javascript, jquery

我想`#hidtr`在 jquery 中增加值。

```
<script type="text/javascript">  
    $('#hidtr').val(parseInt($('#hidtr').val()+1));     
    alert($('#hidtr').val());  
</script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T07:20:16.887

尝试这个

```
var val = $('#hidtr').val();
$('#hidtr').val((val*1)+1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T06:49:31.870

我将首选以下方法，因为不需要使用`$('#hidtr').val()`两次，您也可以根据需要处理该值。

```
$('#hidtr').val(function(i, oldVal) {
  return parseInt(oldVal || 0, 10) + 1; // oldVal || 0 if initial is empty
});  
alert($('#hidtr').val()); 
```

**[演示](http://jsfiddle.net/AuJv2/12/)**

* * *

如果您不想使用上述方法，请遵循：**（@charlietfl 提到）**

```
var hidtr = $('#hidtr'), // store the reference, not use multiple time
    val = parseInt( hidtr.val(), 10 ) || 0, // peek the value
    inc = val + 1;  // increment value

hidtr.val(inc); // set value 
```

### 笔记

**[`parseInt(value, radix)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)**接受两个参数，第一个是值，第二个是基数（整数为 10，十六进制为 16，依此类推）。

**[`.val()`](http://api.jquery.com/val/)**jquery 接受一个值作为要设置的参数以及一个函数（带有两个参数索引和旧值）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T06:40:41.967

尝试

```
$('#hidtr').val(parseInt($('#hidtr').val(),10)+1); 
```

你把括号放在了错误的地方，还推荐使用 Radix，[请参阅 paraeInt 的文档here](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T06:44:53.693

您需要将其包装在`ready`回调中并对括号进行调整

```
$(function(){
   $('#hidtr').val(parseInt($('#hidtr').val(),10) || 0 +1);
    alert($('#hidtr').val());

}); 
```

请参阅： [jQuery Docs：jQuery 的工作原理](http://docs.jquery.com/How_jQuery_Works)以解释为什么需要包装它

在处理程序或函数中多次使用选择器时，最好将其缓存

```
$(function(){
    var $hidtr= $('#hidtr');
     var val=$hidtr.val();
   $hidtr.val(parseInt( val,10)  || 0 +1);
    alert( $hidtr.val());

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T06:42:36.117

**或另一个工作演示** [http://jsfiddle.net/AuJv2/5/](http://jsfiddle.net/AuJv2/5/) **或**在初始空输入的情况下：http: [//jsfiddle.net/AuJv2/8/](http://jsfiddle.net/AuJv2/8/)

请注意`parseInt($('#hidtr').val()+1)`应该是`parseInt($('#hidtr').val())+1`

希望这可以帮助，

**代码**

```
var num = parseInt($('#hidtr').val()) || 0;
$('#hidtr').val(parseInt(num)+1);
alert($('#hidtr').val()); 
```

**或**

 **```
$('#hidtr').val(parseInt($('#hidtr').val())+1);
alert($('#hidtr').val());

​ 
```**

# in-app-purchase - 如何将实现的“in App”上传到AppStore？

> ID：11167467
> 
> 赞同：2
> 
> 时间：2012-06-23T06:38:36.910
> 
> 标签：in-app-purchase, app-store-connect

我已经完成了 inApp 购买的必要编码，我在沙盒环境中检查了它，它运行良好。但是当我上传项目时，我不知道如何附加我在 iTunes 中添加的 inApp。在我上传我的 inApp 状态后，它显示“准备提交”。下面是我在我的应用程序中使用的我的 inApp 状态的图像。

![在此处输入图像描述](../Images/19087c41d10ecd663a38a12d86159a02.png)

谁能告诉我如何解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T06:58:45.063

如果您尚未上传您的应用程序二进制文件，则可以选择在 iTunes Connect 的应用程序详细信息中添加应用内购买。因此，您的产品 ID/参考名称将出现在应用程序的应用内选项中。

但

如果您已经提交了应用，则无法在已发布的应用中实现应用内购买。它必须“附加”或添加到新的二进制文件中并重新提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T06:59:48.737

由于您已经使用沙盒环境测试了 IAP，现在在编辑选项中您将能够看到 In App Products。选择您要与应用程序一起添加的产品。然后单击准备提交，您的产品将准备好二进制文件。上传二进制文件，然后一切都将进入审查过程。

# javascript - 在 Internet Explorer 9 和歌剧下加载画布中的图像失败

> ID：11167468
> 
> 赞同：4
> 
> 时间：2012-06-23T06:38:37.940
> 
> 标签：javascript, html, internet-explorer, canvas, opera

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <script src="resources/js/jquery-1.7.2.min.js"> </script>
        ...
        ...
        <script>
            ...
            ...
            function draw(screen, data) {  
                if (screen.document.getElementById("screen") == null){
                    screen.document.write('<div id="screen" style="width:' +
                    data.maxX + '; height:' + data.maxY + '; margin: auto;" >' +
                    '<canvas id="screenCanvas" width=' + data.maxX + ' height=' + 
                    data.maxY + 'style="border:2px solid #000000;color:#000000;" > </canvas></div>');
                }
                var canvas = screen.document.getElementById('screenCanvas');
                var context = canvas.getContext('2d');  
                var tileY = 0;
                var tileX = 0;
                var counter = 0;
                var tileWidth = data.tileWidth;
                var tileHeight = data.tileHeight;
                for (var i=0;i<(data.maxX/data.tileWidth);i++){  
                    for (var j=0;j<(data.maxY/data.tileHeight);j++){  
                        var img = new Image();  
                        img.onload = (function(img, tileX, tileY, tileWidth, tileHeight){
                            return function() {
                                context.drawImage(img,tileX, tileY, tileWidth, tileHeight);
                            }
                        })(img, tileX, tileY, tileWidth, tileHeight);  
                        img.src = "http://myserver:8080/images/screen/tile/" + 
                                   data.tiles[counter].imageId; 
                        tileX = tileX + parseInt(data.tileWidth); 
                        counter ++; 
                     } 
                    tileY = tileY + parseInt(data.tileHeight); 
                    tileX = 0;
                }  
            }
            ...
            ...
        </script>
    </head>
    <body>
        ...
        ...
        ...
        ...
    </body>
</html> 
```

当我打开一个新窗口以在新窗口中绘制包含一组图像的画布时，我调用此函数。

**问题：**

1- Internet explorer 9：绘制画布但它没有绘制图像（因为我在画布样式中设置的边框出现了）。

2-当 IE 尝试获取图像时出现此错误

```
SCRIPT5022: Exception thrown and not caught 
index.html, line 1 character 1 
```

3- Opera 12：它没有显示画布。

**笔记：**

1- 此功能适用于 Firefox、google chrome 和 safari。

2-我确定 Internet Explorer 不在兼容性视图 (F12) 中，也不是 Quirks 模式（这是标准）。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T13:50:44.733

嗯..有趣。我想我遇到了类似的问题，我将标记到这个堆栈上。

加载我的页面后，将调用一个函数在已创建的画布元素中加载图像 (.png)。在 IE 中，有一半时间没有加载此图像。我必须点击刷新，最终它会出现。在 Firefox 和 chrome 中，它在第一次尝试时就可以工作。有时它也适用于 IE 中的第一次尝试，但这种不规则性让我丧命....

```
function loadCanvas(dataURL) {
   var canvas = document.getElementById('canvas');
   var ctx = canvas.getContext('2d');
   X_max = parseInt($("#container").css('width'));
   Y_max = parseInt($("#container").css('height'));

   canvas.width = X_max;
   canvas.height = Y_max;

   ctx.fillStyle="white";
   ctx.fillRect(0, 0, X_max, Y_max);

   // load image from data url
   var imageObj = new Image;

   imageObj.onload = function() {
   ctx.drawImage(this, 0, 0);
   };

   imageObj.src = dataURL;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T09:06:29.277

如果您`draw`在页面加载后调用该函数，那么您将不得不替换它，`document.write(...)`因为它将创建一个新页面并且 IE 不会完成图像加载处理程序（与至少 chrome 不同）。

```
$("body").append('<div id="screen" style="width:' +
                    data.maxX + 'px; height:' + data.maxY + 'px; margin: auto;" >' +
                    '<canvas id="screenCanvas" width=' + data.maxX + ' height=' + 
                    data.maxY + style="border:2px solid #000000;color:#000000;"></canvas</div>') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T08:57:56.963

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <script src="resources/js/jquery-1.7.2.min.js"> </script>
        ...
        ...
        <script>
            ...
            ...
            function draw(screen, data) {  
                var canvas;
                if (screen.document.getElementById("screen") == null){
                    var canvasDiv = screen.document.createElement("div"); 
                    canvasDiv.id = "screen"; 
                    canvasDiv.style.margin = "0px auto";
                    canvasDiv.style.width = data.maxX;
                    canvasDiv.style.height = data.maxY;
                    canvasDiv.style.border='2px solid black';
                    screen.document.body.appendChild(canvasDiv); 

                    canvas = screen.document.createElement('canvas');
                    canvas.setAttribute('width', data.maxX);
                    canvas.setAttribute('height', data.maxY);
                    canvas.setAttribute('id', 'screenCanvas');
                    canvasDiv.appendChild(canvas);
                    if(typeof G_vmlCanvasManager != 'undefined') {
                        canvas = G_vmlCanvasManager.initElement(canvas);
                    }
                }else{
                    canvas = screen.document.getElementById('screenCanvas');
                }

                var context = canvas.getContext('2d');  
                var tileY = 0;
                var tileX = 0;
                var counter = 0;
                var tileWidth = data.tileWidth;
                var tileHeight = data.tileHeight;
                for (var i=0;i<(data.maxX/data.tileWidth);i++){  
                    for (var j=0;j<(data.maxY/data.tileHeight);j++){  
                        var img = new Image();  
                        img.onload = (function(img, tileX, tileY, tileWidth, tileHeight){
                            return function() {
                                context.drawImage(img,tileX, tileY, tileWidth, tileHeight);
                            }
                        })(img, tileX, tileY, tileWidth, tileHeight);  
                        img.src = "http://myserver:8080/images/screen/tile/" + 
                                   data.tiles[counter].imageId; 
                        tileX = tileX + parseInt(data.tileWidth); 
                        counter ++; 
                     } 
                    tileY = tileY + parseInt(data.tileHeight); 
                    tileX = 0;
                }  
            }
            ...
            ...
        </script>
    </head>
    <body>
        ...
        ...
        ...
        ...
    </body>
</html> 
```

**参考：**[www.williammalone.com](http://www.williammalone.com/articles/create-html5-canvas-javascript-drawing-app/)

因为 IE 不知道 canvas 标签的含义，如果我们在标记中使用它，IE 会给我们带来错误。相反，我们在 JavaScript 中创建了一个画布元素。

希望这对你有帮助

# jasper-reports - 在碧玉报告上增加 JFreeChart 维度

> ID：11167470
> 
> 赞同：0
> 
> 时间：2012-06-23T06:39:02.437
> 
> 标签：jasper-reports, jfreechart

我正在创建一个`JFreeChart`并传递它以显示在 Jasper pdf 报告上。这是我创建图表的代码

```
JFreeChart chart = ChartFactory.createLineChart(
    null, // chart title
    null, // domain axis label
    scale + " Range", // range axis label
    dataset, // data
    PlotOrientation.VERTICAL, // orientation
    false, // include legend
    true, // tooltips
    false // urls
);
parameters.put("chartpath", chart.createBufferedImage(1600, 800)); 
```

该图表在 pdf 报告中显示非常小并且不可读。我试图增加上述`createBufferedImage`函数中的尺寸，但它不起作用。任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:38:29.477

这可能与报表本身中元素的大小有关，而不是与生成并作为参数传递的图表有关。

如果您在 jrxml 中使用元素，请检查宽度和高度属性。如果没有，您能否解释一下您是如何在报告中使用“chartpath”属性的？

# java - ExecuteBatch 和 Prepared Statements 的奇怪行为

> ID：11167471
> 
> 赞同：2
> 
> 时间：2012-06-23T06:39:12.620
> 
> 标签：java, postgresql, jdbc

我有一个奇怪的问题，涉及使用 JDBC 将大量数据放入 PostgSQL 数据库的 executeBatch 和 Prepared Statements。我每次使用 executeBatch 向数据库发送 50,000 条语句。

我知道执行批处理和准备好的语句正在工作；一些数据正在进入数据库。准备好的语句是

```
 INSERT INTO time ( time_id, log_id, phenomenon_time, qc_phenomenon_time )
  SELECT nextval( 'time_seq' ), ?, ?, ? 
```

并将其与执行批处理一起使用，可以在数据库中找到数据。

使用以下准备好的语句时，

```
 INSERT INTO result_3d ( result_3d_id, time_id, variable_id, value, qc_value ) 
  SELECT nextval( 'result_3d_seq' ), ( SELECT t.time_id 
                                       FROM time t 
                                       WHERE t.log_id = ? 
                                       AND t.phenomenon_time = ? ), ?, ?, ? 
```

使用执行批处理，数据库中没有数据。我什至打开了数据库日志记录，发现第一个的所有内容，但第二个什么都没有。第二个准备好的语句依赖于第一个的数据，但数据库甚至没有看到第二个。

没有抛出异常。唯一奇怪的是，对于第二个准备好的语句，返回的数组的大小为零。执行批处理立即返回。第二个准备好的语句中的子查询是否允许？

我使用 postgres-9.1-901.jdbc4.jar 作为针对 PostgreSQL v8.3.19 数据库的 JDBC 驱动程序。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T10:05:46.813

我将回答我自己的问题，因为我描述的症状与执行批处理或准备语句无关。在一些重构过程中，我遗漏了一个重要的声明。

```
this.preparedStatement.addBatch(); 
```

所以这是我的错。症状很好地描述了缺少语句的代码行为。

我感谢您在评论中所做的努力。有些人给了我新的学习领域。谢谢欧文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T03:46:31.690

我不知道 JDBC 驱动程序，但您使用 9.1 版并连接到过时的 PostgreSQL 8.3.19 看起来很可疑。将 PostgreSQL 升级到 9.1 可能会解决您的问题。

`time.time_id`通常，如果您已将列定义`result_3d.result_3d_id`为[**`serial`**](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html#DATATYPE-SERIAL)列（您可能应该这样做），或者您已`nextval()`手动将这些列的 DEFAULT 值设置为相应的序列，则无需从**序列**中获取 id 。这些值将**自动填写**。

> 第二个准备好的语句中的子查询是否允许？

是的，原则上是这样。但它可能永远不会返回**超过一排**。您必须保证唯一性`(t.log_id, t.phenomenon_time)`或添加`LIMIT 1`：

```
(SELECT t.time_id 
 FROM time t 
 WHERE t.log_id = ? 
 AND t.phenomenon_time = ?
 LIMIT 1) 
```

使用 PostgreSQL 9.1，您可以将这两个`INSERT`命令与[数据修改 CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)链接在一起，这应该会更快一些，并且不需要以子查询开头：

```
WITH data (log_id, phenomenon_time, qc_phenomenon_time
          ,variable_id, value, qc_value ) AS (
    VALUES(?, ?, ?, ?, ?, ?)  -- cast to appropriate types!
    )
    , i AS (
    INSERT INTO time (log_id, phenomenon_time, qc_phenomenon_time)
    SELECT log_id, phenomenon_time, qc_phenomenon_time
    FROM   data
    RETURNING time_id, log_id, phenomenon_time 
    )
INSERT INTO result_3d (time_id, variable_id, value, qc_value) 
SELECT i.time_id, d.variable_id, d.value, d.qc_value
FROM   data d
JOIN   i USING (log_id, phenomenon_time); 
```

所有这些可能会或可能不会解决根本问题，但很有可能会。

我的第一个想法是潜在的问题可能是并发问题——这意味着第二个问题`INSERT`是在第一个问题提交之前开始的。但是，如果数据库甚至没有看到第二次调用，那么这里肯定有其他事情在起作用。

# c++ - 从其实例以固定格式（数据库，MMF）驻留的基类派生......如何安全？

> ID：11167483
> 
> 赞同：4
> 
> 时间：2012-06-23T06:40:43.817
> 
> 标签：c++, orm, c++11, wrapper, type-punning

*（**注意：**我正在寻找有关正确搜索词的任何建议，以阅读此类问题。 [“对象关系映射”](http://en.wikipedia.org/wiki/Object-relational_mapping)对我来说是一个我可以找到一些好的现有技术的地方......但是我还没有看到任何适合这种情况的东西。）*

我有一个非常通用`class Node`的 ，目前您可以认为它有点像 DOM 树中的一个元素。这并不是正在发生的事情——它们是内存映射文件中的图形数据库对象。但是对于所有实际目的，这个类比都相当接近，所以为了简单起见，我将坚持使用 DOM 术语。

嵌入在节点中的“标签”意味着您应该（理想情况下）能够使用它进行的一组特定操作。现在我正在使用派生类来做到这一点。例如，如果您尝试表示 HTML 列表之类的内容：

```
<ul>
   <li>Coffee</li>
   <li>Tea</li>
   <li>Milk</li>
</ul> 
```

底层树将是七个节点：

```
+--UL                       // Node #1
   +--LI                    // Node #2
      +--String(Coffee)     // Node #3 (literal text)
   +--LI                    // Node #4
      +--String(Tea)        // Node #5 (literal text)
   +--LI                    // Node #6
      +--String(Milk)       // Node #7 (literal text) 
```

由于`getString()`已经是节点本身的原始方法，我可能只会制作`class UnorderedListNode : public Node`, `class ListItemNode : public Node`.

继续这个假设，让我们想象一下，当程序员对他们手中的节点“类型”/标签有更多了解时，我想帮助他们使用不太通用的函数。也许我想帮助他们处理树上的结构习语，比如将字符串项添加到无序列表中，或者将内容提取为字符串。 *（这只是一个类比，所以不要太认真地对待例程。）*

```
class UnorderedListNode : public Node {
private:
    // Any data members someone put here would be a mistake!

public:
    static boost::optional<UnorderedListNode&> maybeCastFromNode(Node& node) {
        if (node.tagString() == "ul") {
            return reinterpret_cast<UnorderedListNode&>(node);
        }
        return boost::none;
    }

    // a const helper method
    vector<string> getListAsStrings() const {
        vector<string> result;
        for (Node const* childNode : children()) {
            result.push_back(childNode->children()[0]->getText());
        }
        return result;
    }

    // helper method requiring mutable object
    void addStringToList(std::string listItemString) {
        unique_ptr<Node> liNode (new Node (Tag ("LI"));
        unique_ptr<Node> textNode (new Node (listItemString));
        liNode->addChild(std::move(textNode));
        addChild(std::move(liNode));
    }
}; 
```

向这些新的派生类添加数据成员是个坏主意。*真正*持久化任何信息的唯一方法是使用 Node 的基本例程（例如，`addChild`上面的调用或`getText`）与树进行交互。因此，真正的继承模型——就存在的程度而言——是在 C++ 类型系统之外的。是什么让一个`<UL>`节点“maybeCast”成为一个`UnorderedListNode`与 vtables/etc 无关。

C++ 继承有时看起来不错，但通常感觉不对。我觉得我应该拥有独立于 Node 的类而不是继承，并且只是以某种方式与它协作作为“访问器助手”......但我不太了解那会是什么样子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T20:00:08.907

我不确定我是否完全理解您打算做什么，但这里有一些您可能会觉得有用的建议。

你*肯定*在继承的正确轨道上。所有的 UL 节点、LI 节点等都是 Node-s。完美的“is_a”关系，你应该从 Node 类派生这些类。

> 假设我想帮助程序员在他们了解更多关于他们手中的节点“类型”/标签时使用不太通用的功能

...这就是虚函数的用途。

现在来说`maybeCastFromNode`方法。那是垂头丧气的。为什么要这么做？也许是为了反序列化？如果是，那么我建议使用`dynamic_cast<UnorderedListNode *>`. 尽管如果继承树和虚拟方法设计良好，您很可能根本不需要 RTTI。

> C++ 继承有时看起来不错，但通常感觉不对。

这可能并不总是 C++ 的错 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T02:03:46.450

> *“C++ 继承有时看起来不错，但通常感觉不对。”*

的确，这种说法令人担忧：

> 是什么让节点“maybeCast”成为 UnorderedListNode 与 vtables/etc 无关。

就像这段代码一样：

```
static boost::optional<UnorderedListNode&> maybeCastFromNode(Node& node) {
    if (tagString() == "ul") {
        return reinterpret_cast<UnorderedListNode&>(node);
    }
    return boost::none;
} 
```

**(1)** [类型双关](/questions/tagged/type-punning "显示标记为“类型双关语”的问题")

如果`Node&`传入的对象是通过一种机制分配的，该机制在继承路径上没有合法且正确地构造一个`UnorderedListNode`，这就是所谓的[类型双关](http://en.wikipedia.org/wiki/Type_punning)。这几乎总是一个坏主意。即使大多数编译器上的内存布局在没有虚函数并且派生类不添加数据成员时*似乎可以工作，但它们在大多数情况下都可以随意破坏它。*

**(2)** [严格别名](/questions/tagged/strict-alias "显示标记为“严格别名”的问题")

接下来是编译器的假设，即指向根本不同类型的对象的指针不会相互“别名”。这是[严格的别名要求](http://dbp-consulting.com/StrictAliasing.pdf)。虽然它可以通过非标准扩展来禁用，但这应该只应用于遗留情况......它阻碍了优化。

从学术的角度来看，这两个障碍在特殊情况下是否有规范允许的变通方法并不完全清楚。这是一个对此进行调查的问题，在撰写本文时仍然是一个公开讨论：

[只通过指针转换来制作可互换的类类型，而不必分配任何新对象？](https://stackoverflow.com/questions/11219159/make-interchangeable-class-types-via-pointer-casting-only-without-having-to-all)

但是[引用@MatthieuM。](https://stackoverflow.com/questions/11219159/make-interchangeable-class-types-via-pointer-casting-only-without-having-to-all#comment15014639_11302435)：*“越接近规范的边缘，就越有可能遇到编译器错误。因此，作为工程师，我建议要务实，避免与编译器玩心理游戏；无论你是对还是错无关紧要：当您在生产代码中崩溃时，您输了，而不是编译器编写者。”*

这可能是更正确的轨道：

> 我觉得我应该拥有独立于 Node 的类而不是继承，并且只是以某种方式与它协作作为“访问器助手”......但我不太了解那会是什么样子。

使用设计模式术语，这匹配类似[Proxy](http://en.wikipedia.org/wiki/Proxy_pattern)的东西。您将有一个轻量级对象来存储指针，然后按值传递。在实践中，处理诸如如何处理`const`被包装的传入指针的问题可能会很棘手！

这是一个示例，说明在这种情况下如何相对简单地完成它。首先，Accessor 基类的定义：

```
template<class AccessorType> class Wrapper;

class Accessor {
private:
    mutable Node * nodePtrDoNotUseDirectly;
template<class AccessorType> friend class Wrapper;
    void setNodePtr(Node * newNodePtr) {
        nodePtrDoNotUseDirectly = newNodePtr;
    }
    void setNodePtr(Node const * newNodePtr) const {
        nodePtrDoNotUseDirectly = const_cast<Node *>(newNodePtr);
    }
    Node & getNode() { return *nodePtrDoNotUseDirectly; }
    Node const & getNode() const { return *nodePtrDoNotUseDirectly; }

protected:
    Accessor() {}

public:
    // These functions should match Node's public interface
    // Library maintainer must maintain these, but oh well
    inline void addChild(unique_ptr<Node>&& child)) { 
        getNode().addChild(std::move(child));
    }
    inline string getText() const { return getNode().getText(); }
    // ...
}; 
```

然后，用于处理包装“const Accessor”的情况的部分模板特化，这是如何表示它将接收 a `const Node &`：

```
template<class AccessorType>
class Wrapper<AccessorType const> {    
protected:
    AccessorType accessorDoNotUseDirectly;
private:
    inline AccessorType const & getAccessor() const {
        return accessorDoNotUseDirectly;
    }

public:
    Wrapper () = delete;
    Wrapper (Node const & node) { getAccessor().setNodePtr(&node); }
    AccessorType const * operator-> const () { return &getAccessor(); }
    virtual ~Wrapper () { }
}; 
```

“可变访问器”案例的包装器继承自它自己的部分模板特化。通过这种方式，继承提供了适当的强制和分配......禁止将 const 分配给非常量，但反过来工作：

```
template<class AccessorType>
class Wrapper : public Wrapper<AccessorType const> {
private:
    inline AccessorType & getAccessor() {
        return Wrapper<AccessorType const>::accessorDoNotUseDirectly;
    }

public:
    Wrapper () = delete;
    Wrapper (Node & node) : Wrapper<AccessorType const> (node) { }
    AccessorType * operator-> () { return &Wrapper::getAccessor(); }
    virtual ~Wrapper() { }
}; 
```

带有测试代码的编译实现以及记录奇怪部分的注释[在此处的 Gist 中](https://gist.github.com/3106817)。

* * *

资料来源：[@MatthieuM。](https://stackoverflow.com/a/11220705/211160), [@保罗格罗克](https://stackoverflow.com/a/11302435/211160)

# php - MySQL 在控制台中工作，但从 PHP 执行时出现 500 内部服务器错误

> ID：11167486
> 
> 赞同：-1
> 
> 时间：2012-06-23T06:41:11.917
> 
> 标签：php, mysql, innodb

我有一个小的 php 文件，它只是在数据库中创建表。我花了几天时间尝试调试它，这让我很困惑。`HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfil the request.`当我执行查询时，它会很丑。**但是，当我打印出查询并将它们粘贴到数据库中时，它工作正常。**

我还注意到手动输入查询时“表已存在”会闪烁，但会消失并快速工作。类似于这个问题[Mysql 1050 Error "Table already exists" 实际上它没有](https://stackoverflow.com/questions/3302476/mysql-1050-error-table-already-exists-when-in-fact-it-does-not)，但我尝试删除并重新制作数据库但没有成功。如果有人可以提供帮助，将不胜感激。这是php代码

```
$users = 'CREATE TABLE users (
        id int UNSIGNED NOT NULL AUTO_INCREMENT,
        PRIMARY KEY(id),
        username varchar(30) NOT NULL, UNIQUE(username),
        password varchar(30) NOT NULL,
        email varchar(50) NOT NULL, UNIQUE(email),
        confirmation_code int NOT NULL,
        confirmation_tries int NOT NULL
    ) ENGINE=InnoDB';

$players = 'CREATE TABLE players (
        id int UNSIGNED NOT NULL,
        FOREIGN KEY(id) REFERENCES users(id),
        cost int UNSIGNED NOT NULL,
        strategy TINYINT UNSIGNED NOT NULL,
        age int UNSIGNED NOT NULL,
        %s
    ) ENGINE=InnoDB';
$records = array();
for ($i = 0; $i < NUM_RECORDS; $i++) {
    $records[$i] = sprintf('record_%d int UNSIGNED NOT NULL', $i);
}
$players = sprintf($players, implode(', ', $records));

$kingdoms = 'CREATE TABLE kingdoms (
        id int UNSIGNED NOT NULL,
        FOREIGN KEY(id) REFERENCES users(id),
        location int UNSIGNED NOT NULL,
        building text NOT NULL,
        level int UNSIGNED NOT NULL,
        troops int UNSIGNED NOT NULL
    ) ENGINE=InnoDB';

$inboxes = 'CREATE TABLE inboxes (
        recipientID int UNSIGNED NOT NULL,
        FOREIGN KEY(recipientID) REFERENCES users(id),
        messageID int UNSIGNED NOT NULL AUTO_INCREMENT,
        PRIMARY KEY(messageID),
        message text NOT NULL,
        date DATETIME NOT NULL
    ) ENGINE=InnoDB';

$lastActions = 'CREATE TABLE last_actions (
        id int UNSIGNED NOT NULL,
        FOREIGN KEY(id) REFERENCES users(id),
        history text
    ) ENGINE=InnoDB';

$news = 'CREATE TABLE news (
        id int UNSIGNED NOT NULL,
        FOREIGN KEY(id) REFERENCES users(id),
        entries text
    ) ENGINE=InnoDB';

/*
$dbh->exec($users);
$code = $dbh->errorCode();
if ($code !== '00000') {
    var_dump($code);
    echo '111111';
    exit;
}
$dbh->exec($players);
$code = $dbh->errorCode();
if ($code !== '00000') {
    var_dump($code);
    echo '22222';
    exit;
}
$dbh->exec($kingdoms);
$code = $dbh->errorCode();
if ($code !== '00000') {
    var_dump($code);
    echo '33333';
    exit;
}
$dbh->exec($inboxes);
$code = $dbh->errorCode();
if ($code !== '00000') {
    var_dump($code);
    echo '44444';
    exit;
}
$dbh->exec($lastActions);
$code = $dbh->errorCode();
if ($code !== '00000') {
    var_dump($code);
    echo '555555';
    exit;
}
$dbh->exec($news);//
$code = $dbh->errorCode();
if ($code !== '00000') {
    var_dump($code);
    echo '666666';
    exit;
}//*/
echo $users . ";" . $players . ";" . $kingdoms . ';' . $inboxes . ';' . $lastActions .';' . $news; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:43:02.340

**HTTP 错误 500（内部服务器错误）是 HTTP 请求的错误响应。**
使用**mysql_error或您使用的任何内容来回显****mysql_query**的响应以获取错误。或检查 error_logs。它不完全由mysql返回。

如果您的 error_reporting 已关闭，请将其设为 ON。

```
error_reporting( E_ALL | E_STRICT ); 
ini_set( 'display_errors', 1 ) 
```

# javascript - 如何将 JavaScript 结果绑定到我页面上的 div？

> ID：11167487
> 
> 赞同：2
> 
> 时间：2012-06-23T06:41:29.547
> 
> 标签：javascript, asp.net

我有一个 java 脚本文件，它的输出是一个包含一些信息的表。我想在我的页面中的一个 DIV 中显示此结果，但函数的结果位于页面标题的顶部！我能做些什么来解决这个问题？

* * *

这是我的java脚本文件的结尾，实际上这是它的输出' document.write("") document.write(" اوقات شرعی کلیه شهر ها ") document.write("") document.write(" ") document .write(" اذان صبح طلوع خورشید اذان ظهر غروب خورشید اذان مغرب") document.write("
اوقات به افق :

انتخاب شهراراکاردبیلارومیهاصفهاناهوازایلامبجنورد بندرعباسبوشهربیرجندتبریزتهرانخرم آبادرشتزاهدانزنجانساریسمنانسنندجشهرکردشیرازقزوینقمکرمان کرمانشاهگرگانمشهدهمدانیاسوجیزد   

") document.write("") '' and this is its call at the and of我的母版页'

```
 $(document).ready(function ogh() {
        var CurrentDate = new Date();
        var JAT = 1;
        function pz() { };
        init(); document.getElementById("cities").selectedIndex = 12;
        coord(); main();
    });
    $(document).ready(function () {
        $("#oghatSharii").append(ogh());
    });

</script>
</form> 
```

' 如果你不能理解我的代码，它的输出是一个表格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T06:44:18.133

您可以在 ready 事件中使用 jquery 设置 div 的 HTML，如下所示：

```
 <script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
     ....
     <script type="text/javascript">
        $(document).ready(function () {
            $("#myDiv").append(pz());
        });
        function pz() {
            // do here something useful and return the text you want to add to the div
            return "Hello there =) !!!";
        };
     </script>

 <div id="myDiv"></div> 
```

不要忘记安装 jquery：

[https://nuget.org/packages/jQuery](https://nuget.org/packages/jQuery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T06:54:38.283

我用这个

```
 function ogh()
    {
                     var CurrentDate = new Date();
                        var JAT = 1;
                        function pz() { };
                        init(); document.getElementById("cities").selectedIndex = 12;
                        coord(); main();
    }
    $(document).ready(function () {
        $("#oghatSharii").append(ogh());
    }); 
```

但我收到一个错误：我的一个函数无法访问 oits 数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T06:44:50.117

一些步骤

1.  将您的 JavaScript 代码移动到页面底部。
2.  使用innerHTML（基本JavaScript）或html()（jQuery）来添加。

# paypal-ipn - 从用户到用户的自适应支付未收到 PayPal IPN

> ID：11167495
> 
> 赞同：0
> 
> 时间：2012-06-23T06:43:07.227
> 
> 标签：paypal-ipn, paypal-adaptive-payments

我正在建立一个网站，用户可以在其中购买其他用户发布的待售数字商品。我想使用 PayPal 自适应付款，以便钱直接转到卖家（而不是我）。

我可以付款，但除非我使用自己的 PayPal 帐户作为卖家（收款人），否则我不会收到 IPN 消息。当任何其他 PayPal 帐户是接收者时，我的 IPN URL 根本不会被击中。

你能告诉我在这种情况下我是否应该期望获得即时付款通知，为什么它可能不起作用，或者我可以通过其他任何方式了解付款何时完成？

**更新**

当我登录到 PayPal 并查看 IPN 历史记录时，我可以看到它试图向我发送 IPN 以向其他接收者付款，但他们都得到了 HTTP 状态代码**403**。我还可以看到它何时尝试向我发送一个 IPN 以向我自己付款 - 这个获得了 HTTP 状态代码 200。

我不知道为什么它会得到 403 响应，因为我对该 URL 没有任何类型的访问控制。而且我不知道为什么当 IPN 用于向其他人付款时它只会得到 403。

当我查看我的网络服务器日志时，我看到 PayPal 试图访问我的 IPN 接收器，它主要得到**404**，除了支付给我自己的一种情况 - 这得到了 200。

```
173.0.82.126 - - [23/Jun/2012:15:25:00 +1000] "POST /ajax/paypal/AdaptivePayments/ipn.php HTTP/1.0" 404 - "-" "-"
173.0.82.126 - - [23/Jun/2012:15:24:59 +1000] "POST /ajax/paypal/AdaptivePayments/ipn.php HTTP/1.0" 200 - "-" "-" 
```

我将检查我的 Apache Web 服务器中是否有某些内容可能会根据 POST 的正文拒绝发送到 IPN 接收器的 POST。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T00:15:40.210

我发现它肯定与 returnUrl 和 cancelUrl 中有“/../”有关。我通过从 returnUrl 和 cancelUrl 中删除“/../”解决了这个问题。我不认为这些会成为问题，因为“/../”在[PayPal 的 Adaptive Payments PHP NVP SDK](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index#adaptivepayments)的示例中使用。我认为它一定是 Apache 中的一些安全设置阻止了包含“/../”的正文的 POST，但我还没有深入研究它。

# shell - 使用 sed 或等效命令将新的 uuid 添加到文件的每一行

> ID：11167500
> 
> 赞同：1
> 
> 时间：2012-06-23T06:44:05.327
> 
> 标签：shell, sed, uuid

我有一个多行文本文件，我想用它来创建需要 UUID 的 SQL 语句。我试图想出一种使用 sed 或其他一些 shell 命令实用程序生成 SQL 的方法。

```
Example input:
A
B
C

Example Output:
insert into table values ('7CC92727-D743-45E0-BE57-9FEB2B73BD18','A');
insert into table values ('94E03071-F457-48DD-86E2-AF26309A192D','B');
insert into table values ('1F17525C-9215-4FC4-A608-4FA43C0B2B14','C'); 
```

我可以使用 uuidgen 命令生成新的 UUID，但到目前为止还没有找到一种方法将该命令与 sed 一起使用。

**更新：** 感谢答案，我能够想出一个在 cygwin 上对我有用的 sed 命令。

出于教学目的，在不引用 SQL 值的情况下表示：

```
sed 's/.*/echo "insert into table values (`uuidgen | tr -d \r`,&)"/e' file.txt 
```

带引号：

```
sed 's/.*/echo "insert into table values '\''(`uuidgen | tr -d \r`'\'','\''&'\'')"/e' file.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T09:16:50.573

### 使用 While 循环的非常易读的 Bash 解决方案

*您可以使用默认的REPLY*变量将文件读入 Bash 循环。例如：

```
while read; do
    echo "insert into table values ('$(uuidgen)','$REPLY');"
done < /tmp/foo 
```

### 可读性较差的 Sed 解决方案

```
sed -e 's/.*/echo "insert into table values (\\"$(uuidgen)\\",\\"&\\");"/e' \
    -e "s/\"/'/g" /tmp/foo 
```

while 循环比 sed 替代方案更具可读性，因为需要在替换字符串中转义引号。sed 解决方案也相当脆弱，因为它在 sed 表达式中评估文件的内容，当存在某些元字符时可能会导致错误。最后，这个特殊的 sed 解决方案依赖于*/e*标志，这是一个[GNU sed 扩展](http://www.gnu.org/software/sed/manual/sed.html#index-s-command_002c-option-flags-106)，可能在您的平台上不可用。

GNU sed 手册对标志的描述如下：

> 此命令允许将来自 shell 命令的输入通过管道传输到模式空间。如果进行了替换，则执行在模式空间中找到的命令，并将模式空间替换为其输出。尾随换行被抑制；如果要执行的命令包含空字符，则结果未定义。这是一个 GNU sed 扩展。

### 测试

两个脚本都针对*/tmp/foo*进行了测试，其中包含以下夹具数据：

```
A
B
C 
```

Bash 示例输出：

```
insert into table values ('fe0ca930-456b-4265-810c-219eb93c4c73','A');
insert into table values ('34b088eb-3dc0-46fa-85ca-efaf3f0c0f4b','B');
insert into table values ('5d271207-99fe-4ca2-8420-3b8ca774e99b','C'); 
```

GNU sed 示例输出：

```
insert into table values ('4c924b78-dc70-441d-928e-638fec9f3ea1','A');
insert into table values ('29f424d4-6e33-4646-a773-cd0e96ebb874','B');
insert into table values ('39534c05-6853-4390-a6b6-4a19fad296b1','C'); 
```

### 结论

Bash 解决方案似乎比 sed 解决方案更清晰、更强大。但是，这两种解决方案显然都适用于原始问题中提供的夹具数据，因此您应该选择最适合您的真实数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T06:54:22.507

```
sed 's/.*/echo "`uuidgen`,&"/e' input |
    sed -r 's/(.*),(.*)/insert into table values("\1","\2");/' |
        tr '"' "'" 
```

* * *

```
insert into table values('c609f5ab-28ce-4853-bd67-7b6b4ca13ee3','A');
insert into table values('01ae6480-1b52-49a8-99a3-f2bba7ec3064','B');
insert into table values('a41122e8-5e4f-4acc-b62a-bc4ad629677e','C'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T07:45:58.830

这可能对您有用：

```
echo -e 'a\nb\nc' | 
sed 's/.*/uuidgen;echo "&"/' | 
sh | 
sed 'N;s/^\(.*\)\n\(.*\)/insert into table values('\''\1'\'',\2);/'
insert into table values('c9939dfe-5a74-465a-b538-66aeba774b6b',a);
insert into table values('da6684f2-3426-4561-b41d-7b507d2d79ee',b);
insert into table values('23c72ef5-2a50-4a09-b964-83eea3c54e83',c); 
```

或使用 GNU sed：

```
echo -e 'a\nb\nc' | 
sed 'h;s/.*/uuidgen/e;G;s/^\(.*\)\n\(.*\)/insert into table values('\''\1'\'',\2);/'
insert into table values('ac1a130c-50a3-43ce-8d41-987ca0d942b7',a);
insert into table values('59426b2f-cf03-4233-bcc2-3ce05c47bece',b);
insert into table values('fdec75d6-313e-48c4-adfb-335721a0f6e7',c); 
```

# xml - XSLT 应用模板选择中的“@*|node()”是什么意思？

> ID：11167501
> 
> 赞同：42
> 
> 时间：2012-06-23T06:44:14.227
> 
> 标签：xml, xslt

我阅读了一些 XSLT 示例并找到了该代码：

```
<xsl:apply-template select="@*|node()"/> 
```

这意味着什么？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-23T06:56:09.873

XPath 表达式`@* | node()`选择属性节点 ( ) 和所有其他类型的 XML 节点 ( ) 的并*集*。`@*``node()`

它是 的简写`attribute::* | child::node()`。

在 XSLT 中，XPath 是相对于*上下文节点*的，默认[选择*轴*](http://www.w3.org/TR/xpath/#axes)是`child`轴，所以表达式

*   *选择*上下文节点的所有属性和直接子节点（当用作`select="..."`表达式时，例如 in `<xsl:apply-templates>`）
*   *匹配*所有属性和其他节点，而不考虑上下文（当用作 中的`match=""`表达式时`<xsl:template>`） - 请注意，选择节点和匹配它们之间存在差异：上下文节点仅对选择很重要。

想象以下节点是上下文节点：

```
<xml attr="value">[
  ]<child />[
  ]<!-- comment -->[
  ]<child>
    <descendant />
  </child>[
]</xml> 
```

该表达式`node()`不仅会选择两个`<child>`节点，还会选择四个纯空格文本节点（由可见性表示）和注释`[`。`]`未`<descendant>`选中。

XML 的一个特殊特性是属性节点*不是*它们所属元素的子节点（尽管属性的父节点是它所属的元素）。

这种不对称关系使得有必要分别选择它们，因此`@*`.

它匹配属于上下文节点的任何属性节点，因此`attr="value"`也将被选中。

是`|`XPath 联合运算符。它从两个单独的节点集创建单个节点集。

`<xsl:apply-templates>`然后`<xsl:template>`为每个选定的节点找到合适的并为该节点运行它。这就是我上面提到的模板匹配部分。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-23T14:31:18.473

要添加到 Tomalak 的出色答案：

**大多数情况下，人们会看到`<xsl:apply-template select="@*|node()"/>`在这样的模板中使用**：

```
 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template> 
```

这称为[**身份规则**](http://dpawson.co.uk/xsl/sect2/identity.html)或“*身份模板*”。

**最基本和最强大的 XSLT 设计模式之一是标识规则的使用和覆盖**。

**如果转换仅包含身份规则，则转换的结果是源 XML 文档本身——这就是模板被称为“身份规则”的原因。**

**为什么会产生这个结果？**

**简短的回答是**：因为 XSLT 处理模型。

**更详细的解释必须从顶部开始**：

```
node() 
```

匹配任何元素、文本节点、注释或处理指令。文档-（根）-节点也与 匹配`node()`。

我们可以想象任何文档树的“叶”节点——这些节点本身没有子节点，例如文本节点、注释和处理指令。空元素也应被视为叶节点。

身份规则最初被选择用于对文档节点的所有子节点执行（应用）（这些是单个顶部元素和它可能具有的任何注释或处理指令兄弟）。匹配的节点是浅拷贝的，如果它是非元素叶节点，则`<xsl:apply-templates select="node()|@*"/>`指令不会选择任何节点或属性。

如果匹配的节点是一个元素，那么它是浅拷贝的，那么`<xsl:apply-templates select="node()|@*"/>`指令会导致将相同的模板（因为在转换代码中没有任何其他模板）应用于其每个属性及其每个子节点。

**这是驱动处理 XML 文档的每个节点的递归，**直到到达叶节点或属性，并且在该位置不`<xsl:apply-templates select="node()|@*"/>`选择子节点或属性节点。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-24T04:58:55.480

恭喜@Tomalak 获得第一个正确答案。打勾应该是他的回答。我只想对他的回答进行一些澄清。

# 注一

> ... @* | node() 选择...的并集

该| 运算符不仅返回两个操作数的并集，而且按文档顺序排序并删除重复项。de-dup 部分在这里不相关，因为没有要删除的重复项，但排序部分值得注意。更正确的版本是说...

> ... @* | node() 选择联合，按文档顺序排序，...

# 注二

> ...以及所有其他类型的 XML 子节点 (node())

这大体上是正确的，但具有误导性。当大多数人阅读“XML 子节点”时，他们会想到 DOM 意义上的子节点。但这不是被选中的。仅选择 XDM 节点。有关说明，请查看以下文档。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<root-element my-attrib="myattrib-vaue" xmlns:hi="www.abc.com"><child-element />
abc&apos;def
</root-element> 
```

现在假设上下文项是“根元素”。Tomalak 的回答的读者被问到一个问题：“@*|node()”选择了什么？对于那些思考 DOM 模型的人来说，Tomalak 的答案意味着选择了 6 件事：

*   my-attrib 属性
*   节点空间属性（这是 DOM 中的真实属性）
*   子元素节点
*   “abc”位
*   实体参考
*   “def”位。

但在 XSLT 中这实际上并非如此。实际选择的是...

*   my-attrib 属性
*   子元素节点
*   XDM 文本节点，是 3 个 DOM 文本节点的连接，例如：“abc'def”

所以更准确的说法是......

XPath 表达式@* | node() 选择按文档顺序排序的联合（上下文项的属性节点和 XDM 意义上的上下文项的 XML 子节点）。XD 模型忽略了 DOM 中的一些节点类型，例如实体定义，并且将连续的文本 DOM 节点连接成一个 XDM 文本节点。

# ruby-on-rails - 将带有 TimeZone 的 DateTime 字符串转换为带有 TimeZone 的 DateTime 或 Rails 3 中的 UTC

> ID：11167503
> 
> 赞同：3
> 
> 时间：2012-06-23T06:44:26.443
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, datetime, timezone

我从 Fedex 收到了以下格式的 DateTime 字符串

```
"2012-06-22T21:39:48-05:00" 
```

我想将此字符串转换为时区，例如：-

```
Fri, 23 Jun 2012 02:39:48 +0000 
```

有什么方法可以直接将此字符串转换为 utc 时间？

我想要类似于以下的东西

```
date_and_time = '%m-%d-%Y %H:%M:%S %Z'
DateTime.strptime("2012-06-22T21:39:48 Central Time (US & Canada)", date_and_time) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T06:53:44.160

这是你要找的吗？

```
DateTime.parse("2012-06-22T21:39:48-05:00").utc 
```

还是我错过了什么？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T06:54:40.773

干得好 ：

```
"2012-06-22T21:39:48-05:00".to_time.utc.strftime("%a, %d %b %Y %T %z") 
```

# java - 复制 HttpServletRequest 并发送到另一台服务器？

> ID：11167510
> 
> 赞同：1
> 
> 时间：2012-06-23T06:45:17.660
> 
> 标签：java, http, servlets

我们试图弄清楚是否可以将每个进入 tomcat 生产服务器的 http 请求复制并发送到开发测试服务器，以获得对生产流量的真实模拟。原始请求处理不应有任何影响。生产服务器不需要等待来自开发服务器的复制请求的响应。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T10:11:01.163

如果您真的想实时进行，我建议在您的生产 web 应用程序前面放置一个 Http Servlet 过滤器。在此过滤器中，将请求数据复制到新请求中并将其（异步）发送到您的开发服务器。这样，至少您不必修改您的应用程序代码。

但它认为您应该尽量避免在生产环境中这样做。相反，您可以转储请求数据（请参阅[Istvan 答案](https://stackoverflow.com/a/11168259/12388)）并从开发机器发出请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T09:11:21.597

从来没听说过。也许您可以设置[http://tomcat.apache.org/tomcat-7.0-doc/config/filter.html#Request_Dumper_Filter](http://tomcat.apache.org/tomcat-7.0-doc/config/filter.html#Request_Dumper_Filter)将日志发送到远程服务器，该服务器有一些小应用程序基于播放请求收到了什么。

“发送日志” = 配置 log4j 以便它将日志存储在网络共享或使用 socketappender

# javascript - HTML 上的扩展部分

> ID：11167514
> 
> 赞同：1
> 
> 时间：2012-06-23T06:46:12.650
> 
> 标签：javascript, jquery, html, dynamic

有这个网站[http://www.phpvideotutorials.com/](http://www.phpvideotutorials.com/) 我基本上想了解当单击这些相应的列时每个右列和左列如何动态扩展，再次单击时从扩展状态收缩。我是 Web 开发的新手，至少是使用 jQuery 之类的动态网站开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T06:53:13.003

您可以查看[源代码](http://www.phpvideotutorials.com/js/phpvt.js)。（简化的）操作部分在这里：

```
var dm = $('#developermonkey');
dm.bind('click', function(e) {
    dm.animate({'right' : 400 });
}); 
```

因此，它将点击事件绑定到一个函数，该函数为元素的*右*CSS 属性设置动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T06:48:41.197

它是通过一个名为 jQuery [http://jquery.com](http://jquery.com)的 javascript 库完成的，您可以在那里阅读有关它的更多信息并查看其工作原理的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T06:59:00.750

这可以从查看源代码中找到。请参考此代码，

**HTML**

```
<div id="left">text
<a id="lefta">click</a>
</div> 
```

`JavaScript`​</p>

```
 $('#lefta').bind('click', function(e) {
    $('#left').css({'width' : 200 }); 
    $('#left').animate({'left' : 150 }, 400);
 });
​ 
```

在此示例中，我还增加了 div 的宽度，以便向您解释 jQuery css 函数的工作原理，以便您可以在移动 div 时设置其他 css 样式。请参考以下小提琴。

[http://jsfiddle.net/TqCmB/](http://jsfiddle.net/TqCmB/)

# html - Chrome 和 Firefox 中相同框阴影大小的不同输出

> ID：11167516
> 
> 赞同：10
> 
> 时间：2012-06-23T06:46:21.530
> 
> 标签：html, css, cross-browser

为什么`box-shadow`Chrome 和 Firefox 中的大小不同？

`box-shadow: 0 0 4px #aaa inset;`

**铬合金：**
![在此处输入图像描述](../Images/d7fc70283ea0efff078d52b35b52b359.png)

**火狐：**
![在此处输入图像描述](../Images/e288fdc797804eebe523898310a6d1fc.png)

我已经尝试了以下方法，但它不适用于最新的 Firefox。

```
-moz-box-shadow: 0 0 2px #aaa inset;
-webkit-box-shadow: 0 0 4px #aaa inset; 
```

我怎样才能有相同大小的跨浏览器框阴影？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T11:35:37.733

[w3schools 说 box shadow 有 6 个值](http://www.w3schools.com/cssref/css3_pr_box-shadow.asp)：

```
box-shadow: h-shadow v-shadow blur spread color inset; 
```

Blur 和 spread 是可选的，我猜你在颜色之前只定义了三个值，这两个浏览器的解释不同。

我让它们看起来与 js fiddle 上的以下内容相同（至少在我看来）：

```
-moz-box-shadow: 0px 0px 3px 0px #aaa inset;
-webkit-box-shadow: 0px 0px 5px 0px #aaa inset; 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-15T09:46:26.570

Firefox 和 Chrome 使用不同的渲染器，并且没有简单的解决方法。由于`-moz-box-shadow`不再有效，您需要[一种不同的方式来编写纯 FF 样式](https://css-tricks.com/snippets/css/css-hacks-targeting-firefox/)：

```
.myThing {
    box-shadow: 0 0 4px #aaa inset;
}
@-moz-document url-prefix() { 
    .myThing {
        box-shadow: 0 0 2px #aaa inset;
    }
} 
```

另请参阅[此答案](https://stackoverflow.com/a/18787345/115493)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T12:53:45.750

我面临同样的问题。
试着认为所有浏览器都有更大的影子，只有 webkit 有更小的影子。
所以解决方案是：

```
box-shadow: 0 0 2px #aaa inset; /* for all browsers */
-moz-box-shadow: 0 0 2px #aaa inset; /* for old firefox */
-webkit-box-shadow: 0 0 4px #aaa inset; /* override for Chrome & Safari */ 
```

希望 Chrome 和 Safari 将继续支持`-webkit-box-shadow`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-08T13:30:10.723

阴影是不同的，因为 Chrome 多年来一直存在问题： [https ://bugs.chromium.org/p/chromium/issues/detail?id=179006](https://bugs.chromium.org/p/chromium/issues/detail?id=179006)

预计这将在 Chrome 73（2019 年 3 月）中修复： [https ://www.chromestatus.com/feature/6569666117894144](https://www.chromestatus.com/feature/6569666117894144)

您可以为跨浏览器阴影做的最简单的事情就是使用 Firefox 或 Safari 创建它。Chrome 73 及更高版本将正确显示。

请不要对 box-shadow 使用前缀黑客。自 2011 年以来，Box-shadow 在所有浏览器中都没有前缀。

# python - 设置 Flask-SQLAlchemy

> ID：11167518
> 
> 赞同：1
> 
> 时间：2012-06-23T06:47:18.860
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy

尝试在 Windows 上设置 Flask 和 SQLAlchemy，但我遇到了问题。

我一直在使用 Flask-SQLAlchemy 以及 PostgreSQL 9.1.4（32 位）和 Psycopg2 包。这是相关的代码，我创建了一个基本的用户模型只是为了测试我的数据库正在连接和提交。

这三位代码将来`__init__.py`自我的应用程序文件、`models.py`文件和我的`settings.py`文件。

当我尝试打开我的交互式提示并尝试以下链接中的代码时，我得到了 ProgrammingError 异常（链接中的详细信息）。

这可能是什么原因造成的？我遵循了文档，我只是对自己做错了什么感到困惑，特别是考虑到我还在 Windows 上使用了 Django 和 psycopg2 和 PostgreSQL。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T19:14:59.927

[我在使用本教程Flask Mega 教程](http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-i-hello-world)时得到了很大帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T15:04:27.387

在您执行`create_all`时，`models.py`从未导入过，因此没有声明任何类。因此，`create_all`不会创建任何表。

要解决此问题，请`models`在运行前导入，`create_all`或者更好的是，不要将`db`对象与模型声明分开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-25T15:34:14.087

使用 Flask SQLAlchemy 的简单步骤：

```
from flask import Flask
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)

//employee.db database will get created in current python project

app.config['SQLALCHEMY_DATABASE_URI']='sqlite:///employee.db'

db = SQLAlchemy(app)

class Employee(db.Model):
    id = db.Column(db.Integer,primary_key=True)
    name = db.Column(db.String(20))
    dept = db.Column(db.String(40)) 
```

要测试此代码，您需要运行 python shell

> 在 Python 外壳中运行：

```
//This is going to create table create_all() method
from one_to_many import db
db.create_all()

//This is going to insert data into table
from one_to_many import Employee
new_emp = Employee(name="Viraj",dept="IT")
db.session.add(new_emp)
db.session.commit()

//To check or retrieve data use this 
show_all_data = Employee.query.all()
for i in show_all_data:
    print(i.id,i.name,i.dept) 
```

# c++ - 动态类型定义

> ID：11167520
> 
> 赞同：2
> 
> 时间：2012-06-23T06:47:39.423
> 
> 标签：c++, typedef

我在来自 c++ 机器库（dlib）的类中有一个 typedef，如下所示：

```
typedef dlib::matrix<double, 64, 1> sample_type; 
```

除了 64 实际上是一个变量。我希望 typedef 在整个类中可见，但我希望第二个参数（64）是调用构造函数时的参数。我怎样才能做到这一点，同时保持 typedef 随处可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T06:50:59.367

这在当前设计中是不可能的，因为模板参数**必须**在编译时知道，而构造函数的参数没有这个限制。

这样做的原因是因为任何模板扩展都应该被视为它自己的类型；模板参数是类型的一部分（`std::vector<int>`与 不同的类型`std::vector<float>`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T05:35:44.350

这实际上是dlib 网页上的[常见问题之一。](http://dlib.net/faq.html#How%20do%20I%20set%20the%20size%20of%20a%20matrix%20at%20runtime?)你要做的是：

```
typedef dlib::matrix<double, 0, 1> sample_type;
sample_type myvect(64); // now the 64 is a runtime argument. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T08:26:37.047

作为一般情况，这是不可能的。尽管您可能想要编写以下内容：

```
template <int matrix_size>
struct sample_type : public dlib::matrix<double, matrix_size, 1>
{
    sample_type data1;
    sample_type<16> data2;
};

sampe_type<32> var32;
sampe_type<36> var36; 
```

请注意，在模板内部定义了 2 个数据字段。第一个数据字段将使用当前实例化参数创建。第二个数据字段将使用显式参数创建。

如您所见，在模板内部它似乎是您想要的，但在外部只能使用常量。

# android - 倒数计时器不会在 textview 上打印

> ID：11167522
> 
> 赞同：0
> 
> 时间：2012-06-23T06:48:16.597
> 
> 标签：android, android-layout

我的应用程序是问答应用程序，用户提出问题，然后服务器向用户发送问题，当用户收到问题时，会出现一个 ShowQuestion 按钮，当用户单击它时，我想启动计时器，因为用户有在 36 秒内回答我像这样在我的 xml 中构建一个 textView

```
<TextView
        android:id="@+id/tvRemaingTime"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:visibility="visible" 
/> 
```

在我的 Java 活动中，我做了这个

```
TextView remaingTimer;
CountDownTimer timer;
private void initialize() {
remaingTimer=(TextView)findViewById(R.id.tvRemaingTime);
} 
```

当用户点击 ShowQuestion 我做这个

```
timer =new CountDownTimer(360000,100) {
   public void onTick(long millisUntilFinished) {
        remaingTimer.setText(millisUntilFinished+"");
   }
   public void onFinish() {
    remaingTimer.setText("finish");
   }
};
timer.start(); 
```

但它不打印任何东西，我做错了什么？

## 笔记

我正在使用 AsyncTask 从服务器获取问题，如下所示：

```
public class getQuestionFromServer extends
    AsyncTask<String, Integer, String[]> {} 
```

但我不认为它对 textView 有影响，因为 ShowQuestion 按钮不会出现，否则用户会从服务器收到问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:31:17.513

您可以使用[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html)从 Thread 更新 TextView 为：

```
TextView remaingTimer;
CountDownTimer timer;
private boolean mClockRunning=false;
private int millisUntilFinished=36;
private void initialize() {
remaingTimer=(TextView)findViewById(R.id.tvRemaingTime);
}
 ShowQuestionbutn.setOnClickListener(new OnClickListener() {    
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                if(mClockRunning==false)
                {
                    mClockRunning=true;
                    millisUntilFinished=0;
                    myThread();
                }
    public void myThread(){
            Thread th=new Thread(){

             @Override
             public void run(){
              try
              {

               while(mClockRunning)
               {
               Thread.sleep(100L);// set time here for refresh time in textview
               CountDownTimerActivity.this.runOnUiThread(new Runnable() {

                @Override
                public void run() {
                 // TODO Auto-generated method stub
                     if(mClockRunning)
                     {
                                                                                                       if(millisUntilFinished<0)
               {
               mClockRunning=false;
               millisUntilFinished=36;
                }
                else
                {
               millisUntilFinished--;
               remaingTimer.setText(millisUntilFinished+"");//update textview here
               }
                     }

            };
                       }
              }catch (InterruptedException e) {
            // TODO: handle exception
             }
             }
            };
            th.start();
           } 
```

# database - Grails：我可以切换案例数据库网址吗

> ID：11167526
> 
> 赞同：1
> 
> 时间：2012-06-23T06:49:30.807
> 
> 标签：database, grails, datasource

我怎么能在 Grails 2.0.4 中做这样的事情？

```
dataSource {

        dbCreate = "create-drop"
        String host = request.getServerName()
        switch( host ) {
            case "company1.com": url = "jdbc:mysql://localhost/db1"
            case "company2.com": url = "jdbc:mysql://localhost/db2"
            default: null
        }
} 
```

我不想使用多租户核心插件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T11:38:14.440

Grails 2 支持[多个数据源](http://grails.org/doc/latest/guide/single.html#multipleDatasources)，因此您应该配置两个单独的数据源并让您的服务/域层在两者之间进行切换：

```
dataSource_company1 {
    dbCreate = "create-drop"
    url = "jdbc:mysql://localhost/db1"
}
dataSource_company2 {
    dbCreate = "create-drop"
    url = "jdbc:mysql://localhost/db2"
} 
```

然后配置您的域对象以支持两者：

```
class Foo {
    static mapping = {
        datasources(['company1', 'company2'])
    }
    // ...
} 
```

最后，根据请求使用数据源：

```
def company = request.serverName.split('.')[0]
def fooThings = Foo."$company".findAll() 
```

您还可以将数据源自动连接到您的服务或控制器中并直接使用它们。

# javascript - Webkit Audio API 与 Flash/AS，re: google-moog doodle 的实现

> ID：11167529
> 
> 赞同：2
> 
> 时间：2012-06-23T06:50:07.640
> 
> 标签：javascript, flash, audio, webkit

我刚刚注册了一个 stackoverflow 帐户，以便重新发布和回答以前关闭的问题 - 如果您问我，理由不足。

这是（基本）问题，正如一位同事昨天对我所说：Google Bob Moog 生日涂鸦是否使用了 w3c 音频 API 推荐，目前仅在 Chrome 中实现（并且仅在某些平台上）。

这个问题抓住了我，因为我最近一直在密集地使用上述 API。这是一个使用基本 API 调用的 jsfiddle（不是我的工作）：http: [//jsfiddle.net/also/6bM3w/](http://jsfiddle.net/also/6bM3w/)

总的来说，我认为谷歌如何部署 Moog 先生开创的模块化音频合成技术的实时、采样准确（甚至可记录）模拟是非常有趣的……也就是说，特别令人感兴趣：他们如何部署它/跨/浏览器。

本文提供了答案： [http](http://mashable.com/2012/05/23/googles-moog-doodle-the-inside-story/) ://mashable.com/2012/05/23/googles-moog-doodle-the-inside-story/——简而言之：“Hurst [相关代码的作者]谷歌最近在谷歌 Chrome 中添加了 Web Audio API。他说，它在浏览器中提供“真正高质量、低延迟的音频”，但不是在所有 Web 浏览器中。在 Chrome 之外，Moog Doodle 变成了纯粹的闪光。

...这是非常令人兴奋和及时的东西。而且我敢肯定，这个问题只是出于最好的意图才结束的，但是，我会说你过火了。

原始的封闭式问题供参考：[庆祝罗伯特·穆格的 Google 涂鸦如何生成声音？](https://stackoverflow.com/questions/10711631/how-does-the-google-doodle-celebrating-robert-moog-generate-the-sounds)

# sql - SQL 错误：在“LI”附近的预期条件的上下文中指定的非布尔类型的表达式

> ID：11167534
> 
> 赞同：1
> 
> 时间：2012-06-23T06:50:41.287
> 
> 标签：sql

我已经编写了以下查询，但它给了我以下错误。你能告诉我查询中的问题在哪里吗？

> **错误**：
> SQL 错误：在“LI”附近的预期条件的上下文中指定的非布尔类型的表达式。

**查询**：

```
SELECT Orders.Day,
       Orders.Month,
       Orders.Year,
       Orders.Orders_Count,
       Orders.PaymentAmount,
       Orders.Total_Payment_Authorized,
       Orders.Total_Payment_Received,
       Orders.SalesTax1,
       Orders.SalesTax2,
       Orders.SalesTax3,
       Orders.TotalShippingCost,
       Orders.OrderDetails_Count,
       Orders.Quantity,
       Orders.COGS,
       Orders.Profit,
       Orders.ProfitMargin
FROM   (SELECT Orders.Day,
               Orders.Month,
               Orders.Year,
               Orders.Orders_Count,
               Orders.PaymentAmount,
               Orders.Total_Payment_Authorized,
               Orders.Total_Payment_Received,
               Orders.SalesTax1,
               Orders.SalesTax2,
               Orders.SalesTax3,
               Orders.TotalShippingCost,
               OrderDetails.OrderDetails_Count,
               OrderDetails.Quantity,
               OrderDetails.COGS,
               OrderDetails.Profit,
               OrderDetails.ProfitMargin
        FROM   (SELECT Datepart(DD, Orders.OrderDate)       AS Day,
                       Datepart(MM, Orders.OrderDate)       AS Month,
                       Datepart(YY, Orders.OrderDate)       AS Year,
                       Max(Orders.OrderDate)                AS OrderDate,
                       Max(Orders.ShipDate)                 AS ShipDate,
                       Count(Orders.OrderID)                AS Orders_Count,
                       Sum(Orders.PaymentAmount)            AS PaymentAmount,
                       Sum(Orders.Total_Payment_Authorized) AS Total_Payment_Authorized,
                       Sum(Orders.Total_Payment_Received)   AS Total_Payment_Received,
                       Sum(Orders.SalesTax1)                AS SalesTax1,
                       Sum(Orders.SalesTax2)                AS SalesTax2,
                       Sum(Orders.SalesTax3)                AS SalesTax3,
                       Sum(Orders.TotalShippingCost)        AS TotalShippingCost
                FROM   (((Orders WITH(NOLOCK)
                          LEFT JOIN PaymentMethods WITH(NOLOCK)
                            ON Orders.PaymentMethodID = PaymentMethods.PaymentMethodID)
                         LEFT JOIN ShippingMethods WITH(NOLOCK)
                           ON Orders.ShippingMethodID = ShippingMethods.ShippingMethodID)
                        LEFT JOIN Customers WITH(NOLOCK)
                          ON Orders.CustomerID = Customers.CustomerID)
                WHERE  Orders.OrderStatus <> 'Cancelled'
                GROUP  BY Datepart(DD, Orders.OrderDate),
                          Datepart(MM, Orders.OrderDate),
                          Datepart(YY, Orders.OrderDate)) Orders
               INNER JOIN (SELECT Datepart(DD, Orders.OrderDate)                         AS Day,
                                  Datepart(MM, Orders.OrderDate)                         AS Month,
                                  Datepart(YY, Orders.OrderDate)                         AS Year,
                                  Count(OrderDetails.OrderDetailID)                      AS OrderDetails_Count,
                                  Sum(OrderDetails.Quantity)                             AS Quantity,
                                  Sum(OrderDetails.Vendor_Price * OrderDetails.Quantity) AS COGS,
                                  CASE
                                    WHEN Sum(Vendor_Price) IS NULL THEN NULL
                                    ELSE Sum(( CASE
                                                 WHEN OrderDetails.ProductCode LIKE 'DSC-%' THEN OrderDetails.ProductPrice - Isnull(OrderDetails.Vendor_Price, 0)
                                                 ELSE OrderDetails.ProductPrice - OrderDetails.Vendor_Price
                                               END ) * OrderDetails.Quantity)
                                  END                                                    AS Profit,
                                  CASE Sum(OrderDetails.ProductPrice * OrderDetails.Quantity)
                                    WHEN 0 THEN 0
                                    ELSE Round(( ( Sum(OrderDetails.ProductPrice * OrderDetails.Quantity) - Sum(OrderDetails.Vendor_Price * OrderDetails.Quantity) ) / Sum(OrderDetails.ProductPrice * OrderDetails.Quantity) ) * 100, 1)
                                  END                                                    AS ProfitMargin
                           FROM   (((Orders WITH(NOLOCK)
                                     LEFT JOIN PaymentMethods WITH(NOLOCK)
                                       ON Orders.PaymentMethodID = PaymentMethods.PaymentMethodID)
                                    LEFT JOIN ShippingMethods WITH(NOLOCK)
                                      ON Orders.ShippingMethodID = ShippingMethods.ShippingMethodID)
                                   LEFT JOIN Customers WITH(NOLOCK)
                                     ON Orders.CustomerID = Customers.CustomerID)
                                  LEFT JOIN OrderDetails WITH(NOLOCK)
                                    ON Orders.OrderID = OrderDetails.OrderID
                           WHERE  Orders.OrderStatus <> 'Cancelled'
                                  AND Orders.ShipPostalCode LIKE '96704'
                                  AND Orders.ShipPostalCode LIKE '96710'
                                  AND Orders.ShipPostalCode LIKE '96718'
                                  AND Orders.ShipPostalCode LIKE '96719'
                                  AND Orders.ShipPostalCode LIKE '96720'
                                  AND Orders.ShipPostalCode LIKE '96721'
                                  AND Orders.ShipPostalCode LIKE '96725'
                                  AND Orders.ShipPostalCode LIKE '96726'
                                  AND Orders.ShipPostalCode LIKE '96727'
                                  AND Orders.ShipPostalCode LIKE '96728'
                                  AND Orders.ShipPostalCode LIKE '96737'
                                  AND Orders.ShipPostalCode LIKE '96738'
                                  AND Orders.ShipPostalCode LIKE '96739'
                                  AND Orders.ShipPostalCode LIKE '96740'
                                  AND Orders.ShipPostalCode LIKE '96743'
                                  AND Orders.ShipPostalCode LIKE '96745'
                                  AND Orders.ShipPostalCode LIKE '96749'
                                  AND Orders.ShipPostalCode LIKE '96750'
                                  AND Orders.ShipPostalCode LIKE '96755'
                                  AND Orders.ShipPostalCode LIKE '96760'
                                  AND Orders.ShipPostalCode LIKE '96764'
                                  AND Orders.ShipPostalCode LIKE '96771'
                                  AND Orders.ShipPostalCode LIKE '96772'
                                  AND Orders.ShipPostalCode LIKE '96773'
                                  AND Orders.ShipPostalCode LIKE '96774'
                                  AND Orders.ShipPostalCode LIKE '96776'
                                  AND Orders.ShipPostalCode LIKE '96777'
                                  AND Orders.ShipPostalCode LIKE '96778'
                                  AND Orders.ShipPostalCode LIKE '96780'
                                  AND Orders.ShipPostalCode LIKE '96781'
                                  AND Orders.ShipPostalCode LIKE '96783'
                                  AND Orders.ShipPostalCode LIKE '96785'
                           GROUP  BY Datepart(DD, Orders.OrderDate),
                                     Datepart(MM, Orders.OrderDate),
                                     Datepart(YY, Orders.OrderDate)) OrderDetails
                 ON Orders.Day = OrderDetails.Day
                    AND Orders.Month = OrderDetails.Month
                    AND Orders.Year = OrderDetails.Year) Orders
ORDER  BY Orders.Day DESC,
          Orders.Month DESC,
          Orders.Year DESC 
```

# .net - when to use {x:Type …}?

> ID：11167536
> 
> 赞同：24
> 
> 时间：2012-06-23T06:51:14.953
> 
> 标签：.net, wpf, xaml, targettype

What is the difference between:

```
<Style TargetType="{x:Type Border}"> 
```

and:

```
<Style TargetType="Border"> 
```

When and why do I need to use the `{x:Type …}` ?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-23T06:59:19.143

There is no difference in effect; in both cases the TargetType property will be set to `typeof(Border)`

The first version `{x:Type Border}` was needed in the first version of WPF because the compiler did not use the `TypeConverter` class to convert the string into a Type object and you needed to specify the `TypeExtension` class to do that for you.

The second version was introduced, if I remember correctly, with Silverlight and quickly found its way to the WPF compiler.

**EDIT**

My assumption on the `TypeConverter` class was wrong; this is implemented by the `FrameworkElementFactory`:

From [the documentation](http://msdn.microsoft.com/en-us/library/ms753322.aspx):

> **Type Properties That Support Typename-as-String**
> 
> WPF supports techniques that enable specifying the value of some properties of type Type without requiring an x:Type markup extension usage. Instead, you can specify the value as a string that names the type. Examples of this are ControlTemplate.TargetType and Style.TargetType. Support for this behavior is not provided through either type converters or markup extensions. Instead, this is a deferral behavior implemented through FrameworkElementFactory.
> 
> Silverlight supports a similar convention. In fact, Silverlight does not currently support {x:Type} in its XAML language support, and does not accept {x:Type} usages outside of a few circumstances that are intended to support WPF-Silverlight XAML migration. Therefore, the typename-as-string behavior is built-in to all Silverlight native property evaluation where a Type is the value.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-23T08:18:35.103

Although in the given example it makes no difference but actually there is difference between `x:Type` and `TypeName-as-String`.

I have recently encountered a situation which shows that *`x:Type`* is different from *`TypeName-as-String`* when it comes to custom types. From my experience -

***`x:Type`* considers the strong name or the version of the assembly (in which type resides) but not *`TypeName-as-String`*.**

I have explained about my scenario and other details in my blog here -

[Importance of specifying AncestorType with x:Type in RelativeSourceBinding](http://weblogs.asp.net/akjoshi/archive/2012/02/03/importance-of-specifying-ancestortype-with-x-type-in-relativesourcebinding.aspx)

Apart from this, there is also difference in how WPF infers the type. For *`x:Type`* `TypeExtension` is used, whereas for *`TypeName-as-String`* `FrameworkElementFactory` is used (as Erno mentioned).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T07:09:54.817

Setting this property (`TargetType`) to Border without assigning the style with an `x:Key` allows the style to be applied to all Border elements. But when you sets the `x:Key` to `{x:Type Border}`, This means that if you give the `Style` an `x:Key` value of anything other than `{x:Type Border}`, the `Style` would not be applied to all Border elements automatically. Instead, you need to apply the style to the Border elements explicitly.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T07:00:58.563

Both are exactly same. In either of the cases your style will apply to `Border` only.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T09:36:44.830

If you are using XAML 2009, x:Key can be specified as an element, to explicitly support dictionaries keyed by object types other than strings without requiring a markup extension intermediate. See the "XAML 2009" section in this topic. The remainder of the Remarks section applies specifically to the XAML 2006 implementation.

The attribute value of x:Key can be any string defined in the XamlName Grammar or can be an object evaluated through a markup extension. See "WPF Usage Notes" for an example from WPF.

Child elements of a parent element that is an IDictionary implementation must typically include an x:Key attribute that specifies a unique key value within that dictionary. Frameworks might implement aliased key properties to substitute for x:Key on particular types; types that define such properties should be attributed with DictionaryKeyPropertyAttribute.

The code equivalent of specifying x:Key is the key that is used for the underlying IDictionary. For example, an x:Key that is applied in markup for a resource in WPF is equivalent to the value of the key parameter of ResourceDictionary.Add when you add the resource to a WPF ResourceDictionary in code. The x:Type markup extension has a similar function to the typeof() operator in C# or the GetType operator in Microsoft Visual Basic.

The x:Type markup extension supplies a from-string conversion behavior for properties that take the type Type. The input is a XAML type. The relationship between the input XAML type and the output CLR Type is that the output Type is the UnderlyingType of the input XamlType, after looking up the necessary XamlType based on XAML schema context and the IXamlTypeResolver service the context provides.

In .NET Framework XAML Services, the handling for this markup extension is defined by the TypeExtension class.

In specific framework implementations, some properties that take Type as a value can accept the name of the type directly (the string value of the type Name). However, implementing this behavior is a complex scenario. For examples, see the "WPF Usage Notes" section that follows.

Attribute syntax is the most common syntax used with this markup extension. The string token provided after the x:Type identifier string is assigned as the TypeName value of the underlying TypeExtension extension class. Under the default XAML schema context for .NET Framework XAML Services, which is based on CLR types, the value of this attribute is either the Name of the desired type, or contains that Name preceded by a prefix for a non-default XAML namespace mapping.

The x:Type markup extension can be used in object element syntax. In this case, specifying the value of the TypeName property is required to properly initialize the extension.

The x:Type markup extension can also be used as a verbose attribute; however this use is not typical:

# android - Android图像中的缩放比例？

> ID：11167537
> 
> 赞同：7
> 
> 时间：2012-06-23T06:51:19.593
> 
> 标签：android, image, scaling

我正在开发一个简单的信息系统，它将使用大量图像。问题是我不知道如何将它们缩放到 ldpi、mdpi、hdpi 和 hdpi 的文件夹。

我读到 android 使用像 3:4:6:8 这样的缩放比例。有人可以向我解释一下这个**3:4:6:8 的比例**是多少？我如何使用它，它背后的逻辑是什么？

**假设我在ldpi**文件夹中有一个 50x50 像素的图像。如果我要使用*3:4:6:8 比例*。我的**mdpi**文件夹和**hdpi**文件夹的下一个图像大小是多少？

请帮忙。我真的不明白缩放比例。对不起，我只是android设计的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T06:55:01.647

它是如此简单。

如果 Ldpi 的图像大小为 50*50，则：

> MDPI => 67*67
> 
> HDPI => 100*100
> 
> XHDPI => 125*125

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T06:58:36.090

他们大多使用这些标准尺寸：

ldpi: 36*36 mdpi: 48*48 hdpi: 72*72 xhdpi: 96*96

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T21:20:11.693

您可以使用这个简单的[工具](http://labs.rampinteractive.co.uk/android_dp_px_calculator/)来计算转换。它没有 xxhdpi，但您可以轻松修改它来为您计算

# c# - 从 MVC 视图中保存多个对象

> ID：11167538
> 
> 赞同：3
> 
> 时间：2012-06-23T06:51:32.767
> 
> 标签：c#, asp.net-mvc-3

我正在编写我的第一个 MVC3 应用程序，它是一个简单的订单跟踪应用程序。我想同时编辑订单和详细信息。当我编辑订单时，编辑的 ActionResult 返回订单和相关行（我也在使用 EF）。

```
public ActionResult Edit(int id)
    {            
        // Get the order with the order lines
        var orderWithLines = from o in db.Orders.Include("OrderLines")
                                where o.ID == id
                                select o;

        // Not sure if this is the best way to do this.
        // Need to find a way to cast to "Order" type
        List<Order> orderList = orderWithLines.ToList();
        Order order = orderList[0];

        // Use ViewData rather than passing in the object in the View() method.
        ViewData.Model = order;
        return View();            
    } 
```

订单和行显示没有问题，但是当我保存页面时，我没有将任何行传回控制器。只有顺序。这是查看代码。

```
 @model OrderTracker.Models.Order

@{
    ViewBag.Title = "Edit";
}

<h2>Edit</h2>

@using (Html.BeginForm())
{
    <fieldset>
        <legend>Order</legend>   

        @Html.HiddenFor(model => model.ID)
        @Html.HiddenFor(model => model.UserId)

        <div>
            @Html.LabelFor(model => model.OrderDate)
        </div>
        <div>
            @Html.EditorFor(model => model.OrderDate)
        </div>
        <div>
            @Html.LabelFor(model => model.Description)
        </div>
        <div>
            @Html.EditorFor(model => model.Description)
        </div>                   

        <table>
            <tr>
                <th>
                    Description
                </th>
                <th>
                    Quantity
                </th>
                <th>
                    Weight
                </th>
                <th>
                    Price
                </th>
                <th></th>
            </tr>
        @foreach (var line in Model.OrderLines)
        { 
            <tr>
                <td>
                    @Html.EditorFor(modelItem => line.Description)
                </td> 
                <td>
                    @Html.EditorFor(modelItem => line.Quantity)
                </td> 
                <td>
                    @Html.EditorFor(modelItem => line.Weight)
                </td> 
                <td>
                    @Html.EditorFor(modelItem => line.Price)
                </td>
            </tr>
        }
        </table>

        <p>
            <input type="submit" value="Save" />
        </p> 

    </fieldset>    
} 
```

我能否获得一些关于保存线路数据和订单数据的最佳方式的指导。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T00:40:39.393

您面临的问题与`ICollection<T>`控件生成的名称有关。这是[Phil Haack 的详细讨论](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)和他的解决方案（就**@Html 扩展方法**而言；从他的博客文章末尾给出的链接下载示例项目）。这篇文章针对 MVC/MVC2；但是它仍然适用于 MVC3。

或者，如果您不想遵循 hack，您可以`EditorTemplate`为您的`OrderLine`实体模型选择一个。

**以下是步骤。**

**1）**在( )下创建Editor模板`Views ->Shared -> EditorTemplates -> OrderLine.cshtml`重要的是创建一个名为的文件夹`EditorTemplates`，`Shared`模板名称要与要创建模板的EntityModel相同；因此得名`OrderLine.cshtml`）

![在此处输入图像描述](../Images/a8fe49408fba7d612256ffe036a6214b.png)

**2)** OrderLine.cshtml 的代码

```
@model OrderTracker.Models.OrderLine
@{
    Layout = null;
}

<!DOCTYPE html>
@Html.HiddenFor(modelItem => Model.id)
<tr>
<td>
    @Html.EditorFor(modelItem => Model.Description)
</td> 
<td>
    @Html.EditorFor(modelItem => Model.Quantity)
</td> 
<td>
    @Html.EditorFor(modelItem => Model.Weight)
</td> 
<td>
    @Html.EditorFor(modelItem => Model.Price)
</td>
</tr> 
```

**3）**使用此代码编辑您的视图（请注意，我已用于`EditorFor`OrderLines 集合）

```
@model OrderTracker.Models.Order

@{
    ViewBag.Title = "Edit";
}

<h2>Edit</h2>

@using (Html.BeginForm())
{
    <fieldset>
        <legend>Order</legend>   

        @Html.HiddenFor(model => model.ID)
        @Html.HiddenFor(model => model.UserId)

        <div>
            @Html.LabelFor(model => model.OrderDate)
        </div>
        <div>
            @Html.EditorFor(model => model.OrderDate)
        </div>
        <div>
            @Html.LabelFor(model => model.Description)
        </div>
        <div>
            @Html.EditorFor(model => model.Description)
        </div>                     
        <div>
        <table>
            <tr>
                <th>
                    Description
                </th>
                <th>
                    Quantity
                </th>
                <th>
                    Weight
                </th>
                <th>
                    Price
                </th>
            </tr>
            @Html.EditorFor(model => model.OrderLines)
            </table>
        </div>
        <p>
            <input type="submit" value="Save" />
        </p> 

    </fieldset>    
} 
```

**4）**现在在回发时，您将看到这些值

![在此处输入图像描述](../Images/48bc4d1a260562e6d1b5f0a1b2b0ddf3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:28:06.957

如果您查看它生成的原始 html，则问题出在您的 foreach 上，它不会为每个订单行生成唯一的 id，因此在回发表单时将无法绑定模型。

将 foreach 更改为 for 循环，然后使用索引引用每个订单行。这将允许在表单中生成唯一 ID，并允许您在回发模型时将其绑定到模型。

例如

```
@for (var counter = 0; counter < Model.OrderLines.Count(); counter++)

    { 
        <tr>
            <td>
                @Html.EditorFor(modelItem => Model.OrderLines[counter].Description)
            </td> 
            <td>
                @Html.EditorFor(modelItem => Model.OrderLines[counter].Quantity)
            </td> 
            <td>
                @Html.EditorFor(modelItem => Model.OrderLines[counter].Weight)
            </td> 
            <td>
                @Html.EditorFor(modelItem => Model.OrderLines[counter].Price)
            </td>
        </tr>
    }
    </table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T06:59:12.393

使用 MVC 应该相当简单，因为该框架旨在将表单转换为模型。

```
[HttpGet]
public ActionResult Edit(int id)
{
    // (you can probably rewrite this using a lambda
    var orderWithLines = from o in db.Orders.Include("OrderLines")
                         select o;

    // Use ViewData rather than passing in the object in the View() method.
    ViewData.Model = orderWithLines.FirstOrDefault(x => x.ID = id);
    return View();
}

[HttpPost]
public ActionResult Edit(OrderTracker.Models.Order model)
{
    if (ModelState.IsValid)
    {
        // call the service layer / repository / db to persist the object graph
        _service.Save(model); // this assumes your view models are the same as your domain
    }
} 
```

# mysql - MYSQL - 选择最近的列类型条目

> ID：11167540
> 
> 赞同：1
> 
> 时间：2012-06-23T06:52:08.617
> 
> 标签：mysql, select, limit

我有一个包含列的表：
s_Id (primary int), sup_type (int), sup_date (datetime), sup_req (int) 到目前为止**sup_type**

的值范围是 0-5。 如何提取每个**sup_type** (0-5)的最新条目（按**sup_date ）。**

 ******```
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
*  s_Id   *  sup_type   *        sup_date         *  sup_req  *
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
*    1    *      0      *   2012-06-15 10:13:21   *     4     *
*    2    *      0      *   2012-06-15 11:22:01   *     4     *
*    3    *      1      *   2012-06-15 13:23:32   *     4     *
*    4    *      2      *   2012-06-16 08:04:29   *     4     *
*    5    *      1      *   2012-06-16 16:23:24   *     4     *
*    6    *      1      *   2012-06-17 13:14:05   *     4     *
*    7    *      3      *   2012-06-18 13:37:55   *     4     *
*    8    *      4      *   2012-06-19 13:21:52   *     4     *
*    9    *      4      *   2012-06-20 16:15:19   *     4     *
*   10    *      5      *   2012-06-20 16:17:37   *     4     *
*   11    *      0      *   2012-06-20 16:21:53   *     4     *
*   12    *      1      *   2012-06-20 16:28:13   *     4     *
*   13    *      3      *   2012-06-21 12:23:29   *     4     *
*   14    *      3      *   2012-06-22 07:26:41   *     4     *
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * 
```

我要提取

```
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
*  s_Id   *  sup_type   *        sup_date         *  sup_req  *
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
*    4    *      2      *   2012-06-16 08:04:29   *     4     *
*    9    *      4      *   2012-06-20 16:15:19   *     4     *
*   10    *      5      *   2012-06-20 16:17:37   *     4     *
*   11    *      0      *   2012-06-20 16:21:53   *     4     *
*   12    *      1      *   2012-06-20 16:28:13   *     4     *
*   14    *      3      *   2012-06-22 07:26:41   *     4     *
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T07:14:59.653

```
SELECT
    b.*
FROM
    (
        SELECT sup_type, MAX(sup_date) AS maxsupdate
        FROM tbl
        GROUP BY sup_type
    ) a
INNER JOIN
    tbl b ON 
        a.sup_type = b.sup_type AND 
        a.maxsupdate = b.sup_date
ORDER BY
    b.s_Id 
```******

# .htaccess - 是否可以将&重写为&？

> ID：11167543
> 
> 赞同：0
> 
> 时间：2012-06-23T06:52:28.133
> 
> 标签：.htaccess, rewrite

.htaccess 有什么办法可以重写`&amp;`所有 URL 的全部内容`&`吗？

# java - 通过“new”创建一个字符串对象

> ID：11167544
> 
> 赞同：3
> 
> 时间：2012-06-23T06:52:55.563
> 
> 标签：java

考虑声明：

> 字符串 s=new String("abc");

该语句会创建两个字符串对象，即“abc”和一个由“s”表示的对象吗？

如果它创建了两个对象，那么“abc”会存储在字符串池中还是被丢弃？

**编辑：**

我在参考[字符串对象和字符串文字之间的差异](https://stackoverflow.com/questions/3297867/difference-between-string-object-and-string-literal)时问这个问题，在最后两个答案中，拒绝创建两个对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T06:59:08.647

避免这种行为，因为`"abc"`已经是 a`String`并且通过制造 a `new String`，您正在创造一个不必要的`Object`。

而是去`String s = "abc";`

通过这种方式，`String`JVM 将其实习并添加到池中。

要回答您的问题，您只是在创建一个`Object s`引用`"abc"`.

所以当你先说`String t = new String("abc");`再做`s==t`，就会屈服`false`。因为他们有各自的实例`abc`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T08:26:13.477

`String s = "HELLO";`

这里**的 "s" 是一个 String 类型的对象引用变量**，它引用了添加到 String Literal Pool 中的**String 字面量对象 "Hello" 。**

`String t = new String("Hello");`

这里**的 t 是一个 String 类型的对象引用变量**，**它引用了添加到 String Pool 中的 String 对象“Hello”。**

```
Difference Between String Literal and String : 
```

认为

字符串 s = "你好";

字符串 t = new String("Hello");

现在，如果完成以下更改：

s = 空；

t = 空；

**Hello String object associated with t will be a candidate for Garbage Collector**, But **Hello String Literal associated with s will NOT BE A CANDIDATE for Garbage Collector**, as there will `ALWAYS BE A REFERENCE FROM STRING LITERAL POOL to it.`

# android - 我在哪里可以学习在 android 中发出 http 请求？

> ID：11167547
> 
> 赞同：2
> 
> 时间：2012-06-23T06:53:06.620
> 
> 标签：android, http, post, http-post

我希望我的 android 应用程序发出以下 /share 请求（POST）。 [https://www.dropbox.com/developers/reference/api#shares](https://www.dropbox.com/developers/reference/api#shares)

但我以前没有做过任何http请求，也不知道怎么做。

我的应用程序已经通过 Dropbox 进行了身份验证。

任何人都可以提供样品吗？

ps.我知道http的理论。但不知道它在java中的实际用途

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T06:57:52.213

我的建议是使用 LoopJ 之类的库。它将处理您不想自己实现的事情，例如“请求重试”。它已经在此页面上提供了简单的示例。

[http://loopj.com/android-async-http/](http://loopj.com/android-async-http/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T07:18:19.163

您使用以下示例。

此示例用于读取 http web 服务中的 json 字符串

```
public class Httprequest_responseActivity extends Activity {
ProgressDialog progressdialog;
TextView txt;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    txt=(TextView)findViewById(R.id.txt);
    httprequest("http://api.bilubi.com/BBService.svc/Compleateprogress");
}
String urlstr;
public void httprequest(String url)
{
    urlstr=url;
    progressdialog=ProgressDialog.show(Httprequest_responseActivity.this, "", "Loadding........",true);
    new Thread(new Runnable() {

        @Override
        public void run() {
            BufferedReader in=null;

            Message msg=Message.obtain();
            msg.what=1;
            try
            {
                HttpClient client=new DefaultHttpClient();
                HttpGet request=new HttpGet();
                request.setURI(new URI(urlstr));
                HttpResponse response=client.execute(request);
                in=new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
                StringBuffer sb=new StringBuffer("");
                String line="";
                while((line=in.readLine())!=null)
                    sb.append(line);
                Bundle b=new Bundle();
                b.putString("data", sb.toString());
                msg.setData(b);
                in.close();

            }
            catch(Exception e)
            {
                System.out.println("****************"+e.getMessage());
                //txt.setText(""+e.getMessage());
            }

            handler.sendMessage(msg);
        }
    }).start(); 
}

Handler handler=new Handler()
{
    public void handleMessage(Message msg)
    {
        super.handleMessage(msg);
        switch(msg.what)
        {
        case 1:

            txt.setText(msg.getData().getString("data"));
            break;
        }
        progressdialog.dismiss();
    }
}; 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T13:12:50.660

使用 HttpURLConnection 而不是 HttpClient，这里是 android 开发人员推荐的： [http ://android-developers.blogspot.in/2011/09/androids-http-clients.html](http://android-developers.blogspot.in/2011/09/androids-http-clients.html)

这是示例：

```
URL url = new URL("www.yandex.ru");
HttpURLConnection connection = (HttpURLConnection) url.openConnection();
InputStream in = new BufferedInputStream(connection.getInputStream());
String response = new Scanner(in).useDelimiter("\\A").next(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T07:05:16.510

Http请求在Android中是这样完成的，它只是一个示例代码，你尝试了很多相关的东西。

有用的指南：http: [//developer.android.com/reference/org/apache/http/client/HttpClient.html](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)

```
 HttpClient httpclient = new DefaultHttpClient();   
        HttpPost httpPost = new HttpPost(YOUR_URL);
        HttpResponse response;
        try {
            response = httpclient.execute(httpPost); // the request executes
            Log.d("HTTP","Executed");
    String  responseBody = EntityUtils.toString(response.getEntity());

        } catch (ClientProtocolException e) {
            e.printStackTrace();
        }
        catch(ConnectTimeoutException e){
        e.printStackTrace();
        }
        catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    } 
```

希望这可以帮助

# c# - 从会话中检索 DateTime 并使用 c# 在 ASP.Net 中计算 TimeSpan 时出现问题。

> ID：11167550
> 
> 赞同：1
> 
> 时间：2012-06-23T06:53:20.317
> 
> 标签：c#, asp.net

我将日期时间存储在会话中，如下所述：-

```
Session["LoggedInTime"] = System.DateTime.Now; 
```

然后我在这样的页面加载上检索这个值： -

```
DateTime _loggedInTime = Convert.ToDateTime(Session["LoggedInTime"]); 
```

我调试了上面的代码，发现到这里 _loggedInTIme 显示了我存储在其中的正确日期。在那之后，我像这样计算时间跨度：-

```
TimeSpan elapsedtimespan = System.DateTime.Now.Subtract(_loggedInTime);
int elapsedtime = Convert.ToInt32(elapsedtimespan.TotalSeconds); 
```

我在调试代码时发现，在减去 _loggedInTime = {1/1/0001 12:00:00 AM} 时，我无法获得准确的经过时间。

请帮我解决这个问题，因为我不明白为什么 _loggedInTime 在计算时间跨度时变成 {1/1/0001 12:00:00 AM}。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T07:00:06.043

*由于这是DateTime*的默认值，我猜你正在尝试使用*loggedInTime*，而它之前没有在*Session*对象中初始化。换句话说，我的建议是尝试以下方式：

```
int elapsedtime = 0;
if (Session["LoggedInTime"] != null)
{
    DateTime _loggedInTime = (DateTime)Session["LoggedInTime"];
    TimeSpan elapsedtimespan = System.DateTime.Now.Subtract(_loggedInTime);
    elapsedtime = Convert.ToInt32(elapsedtimespan.TotalSeconds);
}
else Session["LoggedInTime"] = System.DateTime.Now; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T07:02:37.600

以下对我来说很好。由于您在 _loggedInTime 前加上下划线，因此我假设您将其声明为页面本身的实例变量。

```
private DateTime _loggedInTime;

protected void Page_Load(object sender, EventArgs e)
{
    if (Session["LoggedInTime"] == null)
        Session["LoggedInTime"] = DateTime.Now;

    _loggedInTime = Convert.ToDateTime(Session["LoggedInTime"]);

    TimeSpan elapsedtimespan = DateTime.Now.Subtract(_loggedInTime);
    int elapsedtime = Convert.ToInt32(elapsedtimespan.TotalSeconds);
} 
```

我猜你是在另一个时间计算经过的时间，而不是在上面的例子中的 Page_Load 中。

在计算经过时间之前，请确保在每次回发时正确加载会话的经过时间。在下一个回帖中，_loggedInTime 被重置为 DateTime 的默认值，即 {1/1/0001 12:00:00 AM}。

我认为您对以下设置有所了解。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        if (Session["LoggedInTime"] == null)
            Session["LoggedInTime"] = DateTime.Now;
        _loggedInTime = Convert.ToDateTime(Session["LoggedInTime"]);
    }
}

private void ButtonClick(object sender, ImageClickEventArgs e)
{
    TimeSpan elapsedtimespan = DateTime.Now.Subtract(_loggedInTime);
    int elapsedtime = Convert.ToInt32(elapsedtimespan.TotalSeconds);
} 
```

在这里，我通过在单击按钮时处理回发来演示它。在这种情况下，Page_Load 不会加载 LoggedInTime，并且经过的时间计算不正确。要解决此问题，只需删除 Page_Load 中的 IsPostBack if 语句。确保每次加载页面时都设置实例变量 _loggedInTime，因此在回发时也是如此。

**备注**：还要检查您是否在服务器场上。如果您使用多个服务器来处理您的请求但配置了错误的会话模式（例如在进程中），那么服务器 A 会将会话变量存储在其内存中，但重定向可以由服务器 B 处理，它不知道服务器 A 的内存中会话存储。

更多信息可以在 MSDN 上找到：

[会话状态模式](http://msdn.microsoft.com/en-us/library/ms178586.aspx)

进程中的会话状态是默认设置，在服务器场方案中，您可以使用 StateServer 或 SqlServer 替代方案在服务器之间共享会话状态。或者您可以编写自己的自定义会话状态提供程序。

# javascript - 如何使用原型在javascript中划分复数

> ID：11167552
> 
> 赞同：1
> 
> 时间：2012-06-23T06:53:42.880
> 
> 标签：javascript, complex-numbers

我在 java-script 中使用原型创建了一个复杂函数的乘法

```
function ComplexNumber(real,imaginary) {
    this.real = real;
    this.imaginary = imaginary;
}
ComplexNumber.prototype = {
mult: function() {
         var multiplier = arguments[0];
         if(arguments.length != 1)
                multiplier = new ComplexNumber(arguments[0], arguments[1]);
         return new ComplexNumber(this.real * multiplier.real - this.imaginary * multiplier.imaginary,                    
         this.real * multiplier.imaginary + this.imaginary * multiplier.real);             
    },
 toString: function() {
       return this.real + " + " + this.imaginary + "j";
        }
 },
var complexA = new ComplexNumber(5, 8),
complexB = new ComplexNumber(3, 4),
complexSum = complexA.mult(complexB);
console.log(complexSum.toString()); 
```

我必须创建我尝试过的复数除法，但它不起作用......以下是我的 div 函数：

```
div : function(){
         var multiplier = arguments[0];
         if(arguments.length != 1)
                multiplier = new ComplexNumber(arguments[0], arguments[1]);

        return new ComplexNumber((this.real * multiplier.real - this.imaginary * multiplier.imaginary,                    
         this.real * multiplier.imaginary + this.imaginary * multiplier.real)/( ((this.real)*(this.real))) +((this.multiplier)*(this.multiplier)));
    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:08:28.653

根据

```
(a+ib)/(c+id)=(ac+bd+i(bc-ad))/(c^2+d^2) 
```

公式，你需要这个：

```
var det = multiplier.real*multiplier.real + multiplier.imaginary * multiplier.imaginary;
return new ComplexNumber(
  (this.real * multiplier.real + this.imaginary * multiplier.imaginary)/det,                    
  (this.imaginary * multiplier.real - this.real * multiplier.imaginary)/det
); 
```

# java - Java中“this”或私有对象的同步？

> ID：11167566
> 
> 赞同：9
> 
> 时间：2012-06-23T06:55:54.577
> 
> 标签：java, multithreading, synchronization

> **可能重复：**
> [避免在 Java 中同步（this）？](https://stackoverflow.com/questions/442564/avoid-synchronizedthis-in-java)

两段代码有什么区别？各自的优点和缺点是什么？

1)

```
public class Example {
    private int value = 0;

    public int getNextValue() {
        synchronized (this) {
            return value++;
        }
    }
} 
```

2)

```
public class Example {
    private final Object lock = new Object();
    private int value = 0;

    public int getNextValue() {
        synchronized (lock) {
            return value++;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T09:51:04.280

我选择第二种方法的主要原因是我无法控制客户对我的班级实例所做的事情。

如果出于某种原因，有人决定使用我的类的实例作为锁，他们将干扰我的类中的同步逻辑：

```
class ClientCode {
    Example exampleInstance;

    void someMethod() {
        synchronized (exampleInstance) {
            //...
        }
    }
} 
```

如果在我的`Example`课堂上，我使用了一个其他人看不到的锁，它们就不能干扰我的逻辑并像上面的场景一样引入任意互斥锁。

综上所述，这只是信息隐藏原理的一种应用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T09:36:47.327

如果我需要同时执行**两个彼此独立的不同任务，我更喜欢第二种选择。**

例如：

```
public class Example {
    private int value = 0;
    private int new_value = 0;
    private final Object lock1 = new Object();
    private final Object lock2 = new Object();

    public int getNextValue() {
        synchronized (lock1) {
            return value++;
        }
    }

    public int getNextNewValue() {
        synchronized (lock2) {              
            return new_value++;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T07:12:36.363

我会说第二种方法更好。考虑以下情况：

```
public class Abc{

    private int someVariable;

    public class Xyz {
        //some method,synchronize on this
    }

        //some method, and again synchronize on this

} 
```

在这种情况下`this`，两种方法是不一样的。一种是内部类的方法。因此，最好使用公共对象进行同步。例如，`synchronized (someVariable)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T10:10:08.123

我认为这真的取决于情况。假设您的类是一个子类，而超类有一个具有同步的方法。假设您正在使用相同的数据集，并希望在您的方法中保持完整性。那么绝对方法1是你应该使用的。

否则，根据 Costi 提到的内容，第二种方法会更好

# android - Android，如何重绘与绘制画布具有相同时间差的点？

> ID：11167570
> 
> 赞同：1
> 
> 时间：2012-06-23T06:56:13.017
> 
> 标签：android, time, android-canvas, redraw

在 android 中开发绘画画布应用程序时，我需要跟踪所有点并且必须在另一个画布中重新绘制它。现在我能够跟踪所有点，但不知道如何在绘制和重绘的情况下同步点绘制，即用户应该在绘制的同时重绘点。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:19:52.317

不确定这是否是您正在寻找的答案，但我会用某种时间戳记录事件，实际上是到下一点的时间差。就像是：

```
class Point {
    int x;
    int y;
    long deltaTime;
} 
```

这取决于您希望时间的精确度。秒到毫秒的精度应该足够好。您可以解释`deltaTime`为直到应该绘制这一点的时间或直到应该绘制下一个点的时间（我将在我的示例中使用后者）。

使用 deltaTime 而不是直接时间戳的几个原因是，它可以让您检查非常长的暂停，并且无论如何您都必须在回放中计算 delta 时间。也将它用作 long 应该为您提供足够的空间来进行真正冗长的暂停，并让您使用[`Handler`](http://developer.android.com/reference/android/os/Handler.html)接受长整数的类来表示执行前要等待的毫秒数。

```
 public class Redrawer implements Handler.callback {
     LinkedList<Point> points; //List of point objects describing your drawing
     Handler handler = new Handler(this); //Probably should place this in class initialization code
     static final int MSG_DRAW_NEXT = 0;

     public void begin(){
         //Do any prep work here and then we can cheat and mimic a message call
         //Without a delay specified it will be called ASAP but on another
         //thread
         handler.sendEmptyMessage(MSG_DRAW_NEXT); 
     }

     public boolean handleMessage(Message msg){
         //If you use the handler for other things you will want to
         //branch off depending on msg.what
         Point p = points.remove(); //returns the first element, and removes it from the list
         drawPoint(p);
         if (!points.isEmpty())
             handler.sendEmptyMessageDelayed(MSG_DRAW_NEXT, p.deltaTime);

     public void drawPoint(Point p){
         //Canvas drawing code here
         //something like canvas.drawPixel(p.x, p.y, SOMECOLOR);
         //too lazy to look up the details right now
         //also since this is called on another thread you might want to use
         //view.postInvalidate
     } 
```

这段代码远非完整或无懈可击。即您可能需要稍后暂停或重新开始重绘，因为用户切换活动或接到电话等。我也没有实现您在何处或如何获取画布对象的详细信息（我认为您有那部分现在已经放下了）。此外，您可能希望跟踪前一点，以便您可以制作一个矩形发送到，`View.postInvalidate`因为重绘屏幕的一小部分比重绘全部快得多。最后我没有实施任何清理，处理程序和点列表将需要根据需要销毁。

可能有几种不同的方法，有些可能比这更好。如果您担心触摸事件之间的长时间停顿，只需添加检查`deltaTime`是否大于 10 秒，然后将其覆盖为 10 秒。前任。`handler.sendEmptyMessage(MSG_DRAW_NEXT, Math.min(p.deltaTime, 100000));`但是，我建议使用常量而不是硬编码数字。

希望这可以帮助

# java - Android JNI 上的“UnsatisfiedLinkError”

> ID：11167572
> 
> 赞同：2
> 
> 时间：2012-06-23T06:57:16.020
> 
> 标签：java, android, java-native-interface

在我的项目中，我有一个名为 的包装类`PlayerCluster.java`，它加载本机库并提供本机函数。如果我更改了类名 ( `PlayerCluster.java`) 或其包，我会`java.lang.UnsatisfiedLinkError`在调用本机函数时得到。

为什么重命名类名时会出现此错误？是否有一种方法必须将本机库加载到特定的 java 类中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T07:50:38.457

如果重命名类，则还必须重命名`JNIEXPORT`本机库中的方法，以便它们与新的 Java 类名匹配，然后**重新构建**本机库。

例如，给定此方法签名：

```
JNIEXPORT jobjectArray JNICALL
Java_com_mn_rootscape_utils_NativeMethods_getFilesPermissions( JNIEnv* env, jobject thizz, jobjectArray filePathsArray ) 
```

`NativeMethods`是 Java 类，如您所见，它是本机函数签名的一部分。

# android - 如何在android中为动态生成的textviews编写onclick动作？

> ID：11167589
> 
> 赞同：1
> 
> 时间：2012-06-23T07:00:57.947
> 
> 标签：android

我必须在 android 中动态显示文本视图，并且需要为每个文本视图编写 onclick 操作。我能够动态显示文本视图，但我不知道如何为每个文本视图编写 onclick 操作。请帮我解决这个问题......将感谢你..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T07:27:55.550

您应该检查此代码。创建一个 onclicklistener 然后使用 setOnClickListener(); 方法。

```
private TextView textview1, textview2;  
//initialize them       

OnClickListener customTextviewOnClicklistener = new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
             if (v == textview1)
            {
                // Here your code for textview1
                Log.i("Clicked Item", "textview1"); 
            }  
            else if (v == textview2)
            {
                // Here your code for textview2
                Log.i("Clicked Item", "textview2");  
            }
            else
            {
                //Here your code for others
            }
        }
    };

    textview1.setOnClickListener(customTextviewOnClicklistener);
    textview2.setOnClickListener(customTextviewOnClicklistener); 
```

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T08:08:26.770

以动态方式创建视图，然后立即添加侦听器。

```
TextView tv = new TextView(ActivityName.this);
tv.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
       Toast.makeText(ActivityName.this, "tv text: " + ((TextView) v).getText().toString()).show();
       //Do whatever you want to do here.
    }
});
layout.addView(tv); //layout added on the xml for example, or by an inflater. 
```

# openjpa - jpa 仅显示一个查询的实际 sql 查询

> ID：11167591
> 
> 赞同：1
> 
> 时间：2012-06-23T07:01:15.960
> 
> 标签：openjpa

我无法使用

```
 SQL=TRACE 
```

因为，每秒执行的查询非常多，但希望只看到一个查询的相同结果。

反正有没有得到这个。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:46:54.687

不，没有办法通过配置来做到这一点。也许您可以编写一个自定义[JDBCListener](http://openjpa.apache.org/builds/latest/docs/docbook/manual.html#openjpa.jdbc.JDBCListeners)并尝试只记录您关心的 SQL？祝你好运！

# java - 如何取消选中我的所有复选框

> ID：11167592
> 
> 赞同：2
> 
> 时间：2012-06-23T07:01:31.643
> 
> 标签：java, android

我试图取消选择我所有的复选框选择但没有成功

通过使用此代码按下我的 java android 程序中的任何按钮

```
public void onListItemClick(ListView parent, View v, int position, long id)
 {
        parent.setItemChecked(position, parent.isItemChecked(position));
 }

 @Override
 protected  Dialog onCreateDialog(int id, Bundle args){
    switch(id){
    case 1:
        return new AlertDialog.Builder(this)
        .setIcon(R.drawable.ic_launcher)
        .setTitle("This is a dialog with some simple text...")
        .setPositiveButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton)
            {
                Toast.makeText(getBaseContext(),"OK clicked!", Toast.LENGTH_SHORT).show();
            }})

        .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton)
            {
                Toast.makeText(getBaseContext(),"Cancel clicked!", Toast.LENGTH_SHORT).show();
            }
            })

        .setMultiChoiceItems(items, itemsChecked, new DialogInterface.OnMultiChoiceClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which, boolean isChecked) {
                Toast.makeText(getBaseContext(),items[which] + (isChecked ? " checked!":" unchecked!"),Toast.LENGTH_SHORT).show();
            }
            })
        .create();
        }
        return(null);
    } 
```

如何全选和取消全选？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T08:02:59.283

好吧，我最好的猜测是将所有这些参考保存在一个列表中，然后通过所有这些选择或取消选择它们。像这样的东西。

克里特岛引用来保存你所有的复选框

```
List<CheckBox> myCheckBoxes = new ArrayList<CheckBox>();
myCheckBoxes.add(cb1);
myCheckBoxes.add(cb2);
myCheckBoxes.add(cb3);
.... 
```

创建一个方法，该方法将获取您想要在复选框上设置的值，并在您需要时调用它。：

```
private checkAll(boolean value) {
    for(CheckBox cb : myCheckBoxes) {
        cb.setChecked(value);
    }
} 
```

创建两个按钮：

```
Button unselectAllButton = (Button) findViewById(R.id.unCheckButton);
Button selectAllButton = (Button) findViewById(R.id.checkButton);

unselectAllButton.setOnClickListener(setOnClickListener(new OnClickListener() {
   public void onClick(View v) {
       checkAll(false); 
   }
});

selectAllButton.setOnClickListener(setOnClickListener(new OnClickListener() {
   public void onClick(View v) {
       checkAll(true); 
   }
}); 
```

# iphone - iPhone：Facebook 注销功能不起作用

> ID：11167593
> 
> 赞同：1
> 
> 时间：2012-06-23T07:01:54.663
> 
> 标签：iphone, objective-c, ios5, fbconnect

我正在使用 FBConnct 实现 Facebook 集成，它工作正常，但是当我想从 Facebook 注销时它不起作用。

我的代码如下：

```
- (IBAction)logOutbuttonPressed:(id)sender { 
        [Facebook logout:self];
        }
        - (void)fbDidLogout {

            NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
            [defaults removeObjectForKey:@"FBAccessTokenKey"];
            [defaults removeObjectForKey:@"FBExpirationDateKey"];
            NSLog(@" after %@",facebook.accessToken);
            NSLog(@" date%@",facebook.expirationDate);
            [defaults synchronize];
          }

        - (void)logout:(id<FBSessionDelegate>)delegate {
          [self logout];

          if (delegate != self.sessionDelegate &&
            [delegate respondsToSelector:@selector(fbDidLogout)]) {
            [delegate fbDidLogout];
          } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T07:07:55.270

```
+(void)fbDidLogout
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    if ([defaults objectForKey:@"FBAccessTokenKey"]) 
    {
        [defaults removeObjectForKey:@"FBAccessTokenKey"];
        [defaults removeObjectForKey:@"FBExpirationDateKey"];
        [defaults synchronize];
    }

    // Hide the publish button.

    NSHTTPCookie *cookie;
    NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    for (cookie in [storage cookies])
    {
        NSString* domainName = [cookie domain];
        NSRange domainRange = [domainName rangeOfString:@"facebook"];
        if(domainRange.length > 0)
        {
            [storage deleteCookie:cookie];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T07:03:20.140

您还需要为 facebook 注销实现此代码

```
 - (void)fbDidLogout {

        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        [defaults removeObjectForKey:@"FBAccessTokenKey"];
        [defaults removeObjectForKey:@"FBExpirationDateKey"];
        NSLog(@" after %@",facebook.accessToken);
        NSLog(@" date%@",facebook.expirationDate);
        [defaults synchronize];

    //        Finding the Facebook Cookies and deleting them
    NSHTTPCookieStorage* cookies = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    NSArray* facebookCookies = [cookies cookiesForURL:
                                [NSURL URLWithString:@"http://login.facebook.com"]];
    for (NSHTTPCookie* cookie in facebookCookies) {
        [cookies deleteCookie:cookie];
    }
    fbGraph = nil;
      } 
```

在您的第二个视图控制器中尝试此导入“FBConnect.h”

然后 .......

```
FBSession *session = [FBSession session]; [session logout]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T08:55:38.057

调用此方法从 facebook 注销。

```
 - (void)logOutFB {

    fbGraph.accessToken = nil;
    NSHTTPCookie *cookie;
    NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    for (cookie in [storage cookies])
    {
        NSString* domainName = [cookie domain];
        NSRange domainRange = [domainName rangeOfString:@"facebook"];
        if(domainRange.length > 0)
        {
    [storage deleteCookie:cookie];
        }
    }
    } 
```

# javascript - 如何禁用 HTML 页面中的元素但能够使用 jQuery 可拖动来拖动它？

> ID：11167601
> 
> 赞同：0
> 
> 时间：2012-06-23T07:03:19.607
> 
> 标签：javascript, jquery, html, jquery-ui, draggable

我通过在文档中输入以下内容，在页面上的某处单击鼠标，在页面上创建一个元素：

```
$("#sheet").append('<input class="elements" id="Button12" type="button" value="button" />'); 
```

但我暂时不想被点击，所以我可以禁用它：

```
$(".elements").prop('disabled', true); 
```

**但问题是，**我希望这个元素是可拖动的，所以我可以在页面上移动它，我试过这个但不起作用：

```
$('.elements').draggable
({
    containment: "#frame",
    grid: [5,5]
}) 
```

**一个元素在不可点击的情况下如何可以拖动？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:04:43.513

```
$(".elements").children().prop('disabled', true); 
```

应该

```
$(".elements").prop('disabled', true); 
```

因为`.elements`是按钮本身。

和

```
$("#sheet").append(<input class="elements" id="Button12" type="button" value="button" />); 
```

应该

```
$("#sheet").append('<input class="elements" id="Button12" type="button" value="button" />'); // missed quote 
```

我认为你的`draggable`代码应该是**（并且必须在`append()`声明之后）**

```
$('.elements').draggable
({
    containment: "#frame",
    grid: [5,5]
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T07:58:23.560

通常在动画或拖动以包裹在另一个容器中时使用表单元素更好。在这种情况下，插入另一个元素定位绝对和更高的 z-index 填充包装容器，并覆盖禁用的输入，因为鼠标事件不会在禁用的元素上注册。通过覆盖输入，用于拖动的 mousedown 将发生在内部跨度上。

```
var input='<span class="element_wrap"><span class="element_wrap_inner"></span>';
    input+='<input class="elements" id="Button12" type="button" value="button" disabled+"disabled" /></span>';

$("#sheet").append(input);

$('.elements_wrap').draggable({
    containment: "#frame",
    grid: [5,5]
}); 
```

应用适当的CSS。启用输入时，隐藏或移除内部跨度

演示：为简单起见，使用单击禁用的复选框 [http://jsfiddle.net/KtP5K/](http://jsfiddle.net/KtP5K/)

# java - 我想从属性文件添加源

> ID：11167603
> 
> 赞同：0
> 
> 时间：2012-06-23T07:03:44.780
> 
> 标签：java, struts2, struts-html

我已经开始使用struts了。我挂在一个地方，代码如下

```
<st:submit src="getText('image.user.login')"  type="image" height="21" width="44" </st:submit> 
```

当我运行此代码时，**getText('image.user.login')**消息确实返回任何值，但是当我将**src="getText('image.user.login')"**替换为**value="getText('image.user .login')”**，而不是从属性文件返回“image.user.login”的值。

这是什么原因，我该如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T07:42:04.057

就像这个例子在这个参考中说明了[提交参考struts](http://struts.apache.org/2.0.6/docs/submit.html)

渲染图像提交：

```
<s:submit type="image" value="%{'Submit'}" label="Submit the form" src="submit.gif"/> 
```

src ：为图像类型提交按钮提供图像 src。对类型输入和按钮无效。

和

value : String 预设输入元素的值。

这应该回答你的问题，如果你使用 src 你应该分配一个路径，如果你使用 value 你可以使用预设值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T15:44:15.617

试试这个：

```
 <st:submit key="image.user.login"/> 
```

# ios - 带有自签名证书和 iOS 开发的 nginx

> ID：11167605
> 
> 赞同：0
> 
> 时间：2012-06-23T07:04:17.443
> 
> 标签：ios, https, ssl-certificate

我使用带有自签名证书的 nginx 从我的 iOS 应用程序中提供和保存一些数据。我想知道 Apple 是否会因为我的自签名证书而拒绝它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:15:56.520

Apple 已经批准了我的应用程序。所以使用带有自签名证书的 nginx 是没有问题的。

# lwuit - 如何在 lwuit 表单上指定命令的位置？

> ID：11167606
> 
> 赞同：0
> 
> 时间：2012-06-23T07:04:21.143
> 
> 标签：lwuit, lwuit-form

我有一个 lwiit 表格。我希望将我的命令添加到右侧的软按钮。

我不想使用 Display.getInstance().reverseSoftButtons。我该怎么做？

我遇到了这种方法：

```
form.addCommand(myCommand, (int) ); 
```

上述方法中的第二个参数是什么？我如何指定它？我尝试输入像 1,3 这样的值，但它给了我一个例外。文档说它代表偏移量。这个偏移量是多少，我如何指定它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T08:32:22.400

第二个参数是命令数组中的偏移量，它在 javadoc 中。

您可以添加一个空白的“”命令或使用反向软按钮来获得这样的效果。在 LWUIT 1.5 或更高版本中，您还可以派生 MenuBar 并使用 UIManager API 替换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T07:16:06.177

使用 form.setbackCommand() 将按钮添加到右软键

```
 form.setBackCommand(); 
```

# java - 将 ACM 图形窗口转换为图像文件

> ID：11167607
> 
> 赞同：0
> 
> 时间：2012-06-23T07:04:28.317
> 
> 标签：java, image, graphics, png, acm-java-libraries

我是这个网站的新手，对 Java 也比较陌生。

我创建了一个使用 ACM 图形包并扩展了[`GraphicsProgram`](http://jtf.acm.org/javadoc/student/acm/program/GraphicsProgram.html). 我现在希望能够将图形输出窗口的内容转换为图像文件，例如 png 或 jpeg。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:12:10.447

请参阅[`ComponentImageCapture`](https://stackoverflow.com/a/5853992/418556)，它可以捕获并保存 a`Component`或的图像`JComponent`。

![](../Images/91927bfcd7050fcdc55570419e2d194a.png)

# transactions - SQLException：事务开始/提交不匹配

> ID：11167608
> 
> 赞同：0
> 
> 时间：2012-06-23T07:04:42.137
> 
> 标签：transactions, sqlexception

我已经看过帖子并试图解决这个问题但无法解决。所以这里是代码。帮助解决同样的问题。

我有一个程序调用另一个程序。

来电程序：

```
ALTER PROCEDURE [dbo].[DadSaveMembership]
@PERSON AS [dbo].[Person_Master_Type] Readonly,
@ADDRESS AS [dbo].[Address_Master_Type] Readonly, 
@MEMBERSHIP AS [dbo].[Membership_Type] Readonly

AS
BEGIN

declare @pid int, @aid int, @CUR_PID int, @CUR_ADD int, @atype int, @created_by int
declare @created_date date

select @pid=person_id from @PERSON
select @aid=address_id from @ADDRESS

if(@pid=0)
begin
    INSERT INTO PERSON_MASTER (TITLE,FNAME,MNAME,LNAME,DOB,GENDER,MARITALSTATUS,MOBILE,EMAIL,CREATED_BY,CREATED_DATE)
    SELECT TITLE,FNAME,MNAME,LNAME,DOB,GENDER,MARITALSTATUS,MOBILE,EMAIL,CREATED_BY,CREATED_DATE FROM @PERSON
    SELECT @CUR_PID=MAX(PERSON_ID) FROM PERSON_MASTER
end
else
begin
    set @CUR_PID=@pid
end

if(@aid=0)
begin
    INSERT INTO ADDRESS_MASTER (ADDRESS1,ADDRESS2,ADDRESS3,CITY_ID,PINCODE,PHONE,CREATED_BY,CREATED_DATE)
    SELECT ADDRESS1,ADDRESS2,ADDRESS3,CITY_ID,PINCODE,PHONE,CREATED_BY,CREATED_DATE FROM @ADDRESS
    SELECT @CUR_ADD=MAX(ADDRESS_ID) FROM ADDRESS_MASTER
end
else
begin
    set @CUR_ADD=@aid
end

EXEC [dbo].[GET_DAD_COUNT_AID$IMPL$AUTO] @CUR_PID, "3", @CUR_ADD, @atype OUTPUT

INSERT INTO PERSON_MODULE_LINK (PERSON_ID,MODULE_ID,ADDRESS_ID,ADDRESS_TYPE,CREATED_BY,CREATED_DATE) 
VALUES (@CUR_PID,3,@CUR_ADD,@atype,@CREATED_BY,@CREATED_DATE)

END 
```

另一个程序如下

```
ALTER PROCEDURE [dbo].[GET_DAD_COUNT_AID$IMPL$AUTO]  
@pid int,
@modid int,
@addrid int,
@return_value_argument int  OUTPUT
AS 

BEGIN

  SET  IMPLICIT_TRANSACTIONS  ON

  DECLARE
     @cnt int, 
     @cnt1 int

  SELECT @cnt1 = isnull(max(CAST(ADDRESS_HISTORY_DETAIL.ADDRESS_TYPE AS numeric(38, 10))), 0)
  FROM dbo.ADDRESS_HISTORY_DETAIL
  WHERE 
     ADDRESS_HISTORY_DETAIL.PERSON_ID = @pid AND 
     ADDRESS_HISTORY_DETAIL.MODULE_ID = @modid AND 
     ADDRESS_HISTORY_DETAIL.ADDRESS_ID = @addrid

  SELECT @cnt = isnull(max(CAST(PERSON_MODULE_LINK.ADDRESS_TYPE AS numeric(38, 10))), 0)
  FROM dbo.PERSON_MODULE_LINK
  WHERE 
     PERSON_MODULE_LINK.PERSON_ID = @pid AND 
     PERSON_MODULE_LINK.MODULE_ID = @modid AND 
     PERSON_MODULE_LINK.ADDRESS_ID = @addrid

  IF @cnt1 > @cnt
     BEGIN

        SET @return_value_argument = @cnt1+1

        RETURN 

     END
  ELSE 
     BEGIN

        SET @return_value_argument = @cnt+1

        RETURN 

     END

END 
```

问题是调用 DadSaveMembership SP 时出现以下错误：超时已过期。在操作完成之前超时时间已过或服务器没有响应。那么，有什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T07:17:10.343

我怀疑问题出`SET IMPLICIT_TRANSACTIONS ON`在**GET_DAD_COUNT_AID$IMPL$AUTO**存储过程中的命令。阅读[MSDN](http://msdn.microsoft.com/en-us/library/ms187807.aspx)会发现，通过设置命令并执行 SELECT 命令，会创建一个事务，但从未提交或回滚。您可以将原始 SP 包装在事务 BEGIN `TRANSACTION`+ `COMMIT`/`ROLLBACK`中，也可以一起删除该语句。

您还应该考虑替换这两个语句：

```
SELECT @CUR_ADD=MAX(ADDRESS_ID) FROM ADDRESS_MASTER
SELECT @CUR_PID=MAX(PERSON_ID) FROM PERSON_MASTER 
```

用这些：

```
SELECT @CUR_ADD = SCOPE_IDENTITY()
SELECT @CUR_PID = SCOPE_IDENTITY() 
```

# android - 当子视图是 webview 时，Viewflipper 不扔

> ID：11167619
> 
> 赞同：0
> 
> 时间：2012-06-23T07:06:19.093
> 
> 标签：android, viewflipper

我有一个动态创建的子视图，它们可以是 textview 或 webview。当孩子是 TextView 时，视图翻转器会正确抛出，但当孩子是 webview 时不会抛出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T07:14:28.623

我遇到了同样的问题。我面临的问题是在一个视图中我在另一个视图中有一个 webview 我在第一个视图中有两个图像视图我试图交换视图没有更改为第二个视图我使用触摸事件在视图之间进行更改，但这没有发生。后来我也为 webview 使用了触摸事件，然后我可以在视图之间交换。

用于交换触摸事件的代码如下。

```
public boolean onTouchEvent(MotionEvent touchevent)
{
switch (touchevent.getAction())
{
    // when user first touches the screen to swap
    case MotionEvent.ACTION_DOWN: 
    {
        lastX = touchevent.getX();
        break;
    }
    case MotionEvent.ACTION_UP: 
    {
        float currentX = touchevent.getX();
        // if left to right swipe on screen
        if (lastX < currentX) 
        {
            // If no more View/Child to flip
            if (viewFlipper.getDisplayedChild() == 0)
                break;
            // set the required Animation type to ViewFlipper
            // The Next screen will come in form Left and current Screen will go OUT from Right 
            viewFlipper.setInAnimation(this, R.anim.in_from_left);
            viewFlipper.setOutAnimation(this, R.anim.out_to_right);
            // Show the next Screen
            viewFlipper.showNext();
        }
        // if right to left swipe on screen
        if (lastX > currentX)
        {
            if (viewFlipper.getDisplayedChild() == 1)
                break;
            // set the required Animation type to ViewFlipper
            // The Next screen will come in form Right and current Screen will go OUT from Left 
            viewFlipper.setInAnimation(this, R.anim.in_from_right);
            viewFlipper.setOutAnimation(this, R.anim.out_to_left);
            // Show The Previous Screen
            viewFlipper.showPrevious();
        }
        break;
    }
}
return false; 
```

}

为您的 webview setOnTouchListener 使用相同的代码，以便它可以为您工作。

希望这对您有所帮助。

谢谢和问候，G.Shashank Reddy。

# php - 从浏览器运行时 posix_kill 不起作用

> ID：11167621
> 
> 赞同：0
> 
> 时间：2012-06-23T07:06:42.603
> 
> 标签：php, apache, process, kill-process, sigkill

我有一个简单的脚本，它试图杀死一个已经在运行的进程。我也在使用 posix_kill 。该脚本运行良好，如果我从命令 shell 运行它，但是当我从浏览器运行它时它不起作用。

```
<?php

    $taskid  = 33;
    killProcess($taskid);

    function killProcess($taskid) {
    $ppid = getPID($taskid);
    echo "process id -- $ppid\n";
    $pids = preg_split('/\s+/', `ps -o pid --no-heading --ppid $ppid`);
    var_dump($pids);
    foreach($pids as $pid) {
            if(is_numeric($pid)) {
            echo "Killing $pid\n";
                posix_kill($pid, 15);
            }
    }

    }
?> 
```

我总是得到以下输出，这意味着脚本执行得很好，但进程没有被杀死： process id -- 4632 array (size=3) 0 => string '' (length=0) 1 => string '4633' (length=4) 2 => string '' (length=0) Killing 4633

我检查了 apache“error.log”文件，发现对于我从浏览器执行的每次运行，附加条目添加如下：[Sat Jun 23 12:24:55 2012] [error] [client 127.0\. 0.1] 文件不存在：/var/www/favicon.ico

不幸的是，这个错误并没有给我太多关于出了什么问题的信息。我检查了 php.ini 设置，似乎没有任何问题（根据我的有限理解）。我在“disabled_functions”列表等或任何其他应该阻止我执行进程的设置中看不到 posix_kill。

真诚地感谢一些帮助！

谢谢，卡皮尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T07:31:44.603

错误信息与您的问题无关。这只是浏览器要求您提供您尚未配置的站点图标。

现在，关于实际问题：apache 用户可能无权终止您的进程。如果该进程是在不同的用户帐户下启动的，则无法从 Web 服务器中终止它。想象一个多用户系统，任何本地用户都可以登录并杀死其他人的进程——这不是 Unix 权限模型......

您可能希望在发送信号之前使用受限`sudo`的 with`exec`或以其他方式获得权限。或者你可以让进程监听网络服务器做某事，然后杀死*自己*。或者，更好的是，不要将 PHP 之类的 Web 服务语言用于系统管理类型的任务：使用`cron`或更合适的工具。

# javascript - JavaScript使变量的值公开

> ID：11167623
> 
> 赞同：0
> 
> 时间：2012-06-23T07:07:02.697
> 
> 标签：javascript, function, variables, scope

这是我较大的 JavaScript 文件的摘录：

```
function dashboardConfig()
{
    $(window).on('resize', function () {

        var viewport = {
            width : $(this).width(),
            height : $(this).height()
        };

        el.siteContainer.css(
        {
            marginTop : (viewport.height - 652) / 2
        });

        el.dashboardSlide.css(
        {
            marginLeft : (viewport.width - 1024) / 2,
            marginRight : (viewport.width - 1024) / 2
        });

        //Calculate how many nav elements
        el.navElements.each(function(i)
        {           
            el.dashboard.css(
            {
                width : viewport.width * (i + 1)
            });

            $(this).click(function()
            {
                //HERE IS THE VARIABLE I WOULD LIKE TO USE
                var dashboardSlidePosition = viewport.width * i;

                el.navElements.removeClass('active');
                $(this).addClass('active');

                el.dashboard.animate(
                {
                    left : -dashboardSlidePosition
                },500, function()
                {
                    el.dashboard.css(
                    {
                        left : -dashboardSlidePosition
                    });
                });
            });
        });

        //I WANT TO PERFORM ANOTHER FUNCTION HERE AND HAVE IT USE THE VALUE OF dashboardSlidePosition

    }).trigger('resize');
} 
```

我想知道如何将变量dashboardSlidePosition 的值传递给另一个函数。请问谁能解释一下如何？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:11:40.623

您可以在范围的外边缘声明它。确保给它一个初始值，以便在正确设置之前不要尝试使用它。

```
function dashboardConfig()
{
    var dashboardSlidePosition = null;

    function anotherFunction() {
        if (dashboardSlidePosition != null) {
            // ...
        }
    }

    $(this).click(function()
    {
        dashboardSlidePosition = viewport.width * i;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T07:11:55.630

将其放入适当的范围：

```
function dashboardConfig()
{
    var dashboardSlidePosition = 0; 
```

接下来，`var`重新定义时删除。

现在您可以使用它，因为它在函数的范围内。

# java - 由常量表达式创建的字符串

> ID：11167625
> 
> 赞同：0
> 
> 时间：2012-06-23T07:07:44.493
> 
> 标签：java

考虑以下代码：

> ```
> String s = "Dear";
> String s1 = "My"+ s;  
> String s2 = "MyDear"; 
> String s3 = "My"+"Dear"; 
> ```

这里 s1 和 s3 是由字符串常量表达式创建的。

> System.out.println(" s2 == s3 是 " + (s2 == s3)); //真的

结果是真的，因为 s2 和 s3 都指向同一个实习字符串对象，但是

> System.out.println(" s1 == s2 是 " + (s1 == s2)); //错误的

出来胡说八道。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T07:10:09.880

s1 不是由常量表达式创建的。s3 是。

# javascript - Twitter Bootstrap 中的树

> ID：11167628
> 
> 赞同：109
> 
> 时间：2012-06-23T07:08:04.273
> 
> 标签：javascript, jquery, twitter-bootstrap, css, jquery-ui

我一直在尝试创建一个使用尽可能多的 CSS 和尽可能少的 JS（仅用于状态等）的树（如目录树），我想知道是否有一些好的现有树插件用于[引导程序](http://twitter.github.io/bootstrap/)或[jquery-ui 引导程序](http://addyosmani.github.com/jquery-ui-bootstrap/)。

* * *

作为参考或对这个问题感到困惑的人，我正在寻找类似[dynatree](https://github.com/mar10/dynatree)的引导程序。

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2013-05-29T21:02:11.667

在[Vitaliy 的 CSS](https://stackoverflow.com/a/15480307/1430996)和[Mehmet 的 jQuery 的](https://stackoverflow.com/a/16664260/1430996)基础上，我将`a`标签更改为标签，并在[我的 Bootstrap 树小部件](http://jsfiddle.net/jhfrench/GpdgF/)`span`中加入了一些[Glyphicons](http://getbootstrap.com/2.3.2/base-css.html#icons)和[徽章](http://getbootstrap.com/2.3.2/components.html#labels-badges)。

**例子：** ![我对 Bootstrap 树小部件的看法](../Images/87f51023951537d231933850d6c4e8a9.png)

为了获得额外的荣誉，我创建了一个![Github 图标](../Images/bd4d2a5e6205e6aa49fb547b9361ff43.png)[GitHub 项目来托管用于将此树组件添加](https://github.com/jhfrench/bootstrap-tree)到 Bootstrap 的 jQuery 和 LESS 代码。请参阅[http://jhfrench.github.io/bootstrap-tree/docs/example.html](http://jhfrench.github.io/bootstrap-tree/docs/example.html)上的项目文档。

或者，这里是生成 CSS 的 LESS 源（可以从[jsFiddle](http://jsfiddle.net/jhfrench/GpdgF/)获取 JS ）：

```
@import "../../../external/bootstrap/less/bootstrap.less"; /* substitute your path to the bootstrap.less file */
@import "../../../external/bootstrap/less/responsive.less"; /* optional; substitute your path to the responsive.less file */

/* collapsable tree */
.tree {
    .border-radius(@baseBorderRadius);
    .box-shadow(inset 0 1px 1px rgba(0,0,0,.05));
    background-color: lighten(@grayLighter, 5%);
    border: 1px solid @grayLight;
    margin-bottom: 10px;
    max-height: 300px;
    min-height: 20px;
    overflow-y: auto;
    padding: 19px;
    a {
        display: block;
        overflow: hidden;
        text-overflow: ellipsis;
        width: 90%;
    }
    li {
        list-style-type: none;
        margin: 0px 0;
        padding: 4px 0px 0px 2px;
        position: relative;
        &::before, &::after {
            content: '';
            left: -20px;
            position: absolute;
            right: auto;
        }
        &::before {
            border-left: 1px solid @grayLight;
            bottom: 50px;
            height: 100%;
            top: 0;
            width: 1px;
        }
        &::after {
            border-top: 1px solid @grayLight;
            height: 20px;
            top: 13px;
            width: 23px;
        }
        span {
            -moz-border-radius: 5px;
            -webkit-border-radius: 5px;
            border: 1px solid @grayLight;
            border-radius: 5px;
            display: inline-block;
            line-height: 14px;
            padding: 2px 4px;
            text-decoration: none;
        }
        &.parent_li > span {
            cursor: pointer;
            /*Time for some hover effects*/
            &:hover, &:hover+ul li span {
                background: @grayLighter;
                border: 1px solid @gray;
                color: #000;
            }
        }
        /*Remove connectors after last child*/
        &:last-child::before {
            height: 30px;
        }
    }
    /*Remove connectors before root*/
    > ul > li::before, > ul > li::after {
        border: 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2012-06-23T15:54:29.627

> 你能相信下图中的树形视图没有使用任何 JavaScript，而是仅依赖于 CSS3 吗？看看这个**CSS3 TreeView**，它与 Twitter BootStrap 很相配：
> 
> ![树视图](../Images/fd8b5712ed7d1b159a81a5931be39051.png)

您可以在此处获取更多信息[http://acidmartin.wordpress.com/2011/09/26/css3-treevew-no-javascript/](http://acidmartin.wordpress.com/2011/09/26/css3-treevew-no-javascript/)。

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2013-03-18T15:18:05.617

如果有人想从 Harsh 的答案中获得垂直版本的树视图，您可以节省一些时间：

[http://jsfiddle.net/Fh47n/](http://jsfiddle.net/Fh47n/)

```
.tree li {
    margin: 0px 0;

    list-style-type: none;
    position: relative;
    padding: 20px 5px 0px 5px;
}

.tree li::before{
    content: '';
    position: absolute; 
    top: 0;
    width: 1px; 
    height: 100%;
    right: auto; 
    left: -20px;
    border-left: 1px solid #ccc;
    bottom: 50px;
}
.tree li::after{
    content: '';
    position: absolute; 
    top: 30px; 
    width: 25px; 
    height: 20px;
    right: auto; 
    left: -20px;
    border-top: 1px solid #ccc;
}
.tree li a{
    display: inline-block;
    border: 1px solid #ccc;
    padding: 5px 10px;
    text-decoration: none;
    color: #666;
    font-family: arial, verdana, tahoma;
    font-size: 11px;
    border-radius: 5px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
}

/*Remove connectors before root*/
.tree > ul > li::before, .tree > ul > li::after{
    border: 0;
}
/*Remove connectors after last child*/
.tree li:last-child::before{ 
      height: 30px;
}

/*Time for some hover effects*/
/*We will apply the hover effect the the lineage of the element also*/
.tree li a:hover, .tree li a:hover+ul li a {
    background: #c8e4f8; color: #000; border: 1px solid #94a0b4;
}
/*Connector styles on hover*/
.tree li a:hover+ul li::after, 
.tree li a:hover+ul li::before, 
.tree li a:hover+ul::before, 
.tree li a:hover+ul ul::before{
    border-color:  #94a0b4;
} 
```

* * *

## 回答 #4

> 赞同：41
> 
> 时间：2012-08-12T11:59:11.437

对于那些仍在使用 CSS3 搜索树的人，这是我在网上找到的一段很棒的代码：

[http://thecodeplayer.com/walkthrough/css3-family-tree](http://thecodeplayer.com/walkthrough/css3-family-tree)

# HTML

```
<div class="tree">
  <ul>
    <li>
      <a href="#">Parent</a>
      <ul>
        <li>
          <a href="#">Child</a>
          <ul>
            <li>
              <a href="#">Grand Child</a>
            </li>
          </ul>
        </li>
        <li>
          <a href="#">Child</a>
          <ul>
            <li><a href="#">Grand Child</a></li>
            <li>
              <a href="#">Grand Child</a>
              <ul>
                <li>
                  <a href="#">Great Grand Child</a>
                </li>
                <li>
                  <a href="#">Great Grand Child</a>
                </li>
                <li>
                  <a href="#">Great Grand Child</a>
                </li>
              </ul>
            </li>
            <li><a href="#">Grand Child</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</div> 
```

# CSS

```
* {margin: 0; padding: 0;}

.tree ul {
  padding-top: 20px; position: relative;

  transition: all 0.5s;
  -webkit-transition: all 0.5s;
  -moz-transition: all 0.5s;
}

.tree li {
  float: left; text-align: center;
  list-style-type: none;
  position: relative;
  padding: 20px 5px 0 5px;

  transition: all 0.5s;
  -webkit-transition: all 0.5s;
  -moz-transition: all 0.5s;
}

/*We will use ::before and ::after to draw the connectors*/

.tree li::before, .tree li::after{
  content: '';
  position: absolute; top: 0; right: 50%;
  border-top: 1px solid #ccc;
  width: 50%; height: 20px;
}
.tree li::after{
  right: auto; left: 50%;
  border-left: 1px solid #ccc;
}

/*We need to remove left-right connectors from elements without 
any siblings*/
.tree li:only-child::after, .tree li:only-child::before {
  display: none;
}

/*Remove space from the top of single children*/
.tree li:only-child{ padding-top: 0;}

/*Remove left connector from first child and 
right connector from last child*/
.tree li:first-child::before, .tree li:last-child::after{
  border: 0 none;
}
/*Adding back the vertical connector to the last nodes*/
.tree li:last-child::before{
  border-right: 1px solid #ccc;
  border-radius: 0 5px 0 0;
  -webkit-border-radius: 0 5px 0 0;
  -moz-border-radius: 0 5px 0 0;
}
.tree li:first-child::after{
  border-radius: 5px 0 0 0;
  -webkit-border-radius: 5px 0 0 0;
  -moz-border-radius: 5px 0 0 0;
}

/*Time to add downward connectors from parents*/
.tree ul ul::before{
  content: '';
  position: absolute; top: 0; left: 50%;
  border-left: 1px solid #ccc;
  width: 0; height: 20px;
}

.tree li a{
  border: 1px solid #ccc;
  padding: 5px 10px;
  text-decoration: none;
  color: #666;
  font-family: arial, verdana, tahoma;
  font-size: 11px;
  display: inline-block;

  border-radius: 5px;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;

  transition: all 0.5s;
  -webkit-transition: all 0.5s;
  -moz-transition: all 0.5s;
}

/*Time for some hover effects*/
/*We will apply the hover effect the the lineage of the element also*/
.tree li a:hover, .tree li a:hover+ul li a {
  background: #c8e4f8; color: #000; border: 1px solid #94a0b4;
}
/*Connector styles on hover*/
.tree li a:hover+ul li::after, 
.tree li a:hover+ul li::before, 
.tree li a:hover+ul::before, 
.tree li a:hover+ul ul::before{
  border-color:  #94a0b4;
} 
```

PS：除了代码，我还喜欢网站展示它的方式……真的很创新。

* * *

## 回答 #5

> 赞同：36
> 
> 时间：2013-05-21T07:17:22.733

如果有人想要 Vitaliy Bychik 的回答中的树视图的可扩展/可折叠版本，您可以节省一些时间:)

[http://jsfiddle.net/mehmetatas/fXzHS/2/](http://jsfiddle.net/mehmetatas/fXzHS/2/)

```
$(function () {
    $('.tree li').hide();
    $('.tree li:first').show();
    $('.tree li').on('click', function (e) {
        var children = $(this).find('> ul > li');
        if (children.is(":visible")) children.hide('fast');
        else children.show('fast');
        e.stopPropagation();
    });
}); 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-02-18T10:18:15.640

另一个很棒的 Treeview jquery 插件是[http://www.jstree.com/](http://www.jstree.com/)

对于高级视图，您应该检查 jquery-treetable
[http://ludo.cubicphuse.nl/jquery-plugins/treeTable/doc/](http://ludo.cubicphuse.nl/jquery-plugins/treeTable/doc/)

# java - Java 检查时间戳中的时间

> ID：11167629
> 
> 赞同：0
> 
> 时间：2012-06-23T07:08:17.920
> 
> 标签：java

目前我有一个时间戳，例如 2012-06-23 14:24:07.975 和两次 - 上午 8 点和下午 3 点。

在java中，如何检查上述时间戳是否在特定的两个时间之间。

换句话说，我需要检查时间戳 (2012-06-23 **14** :24:07.975) 中的时间是否在上午 8 点到下午 3 点之间。

有什么建议么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T07:12:39.573

您可以将时间戳转换为实际[日期](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html)，然后将其转换为[日历](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)，您可以从中提取小时并根据给定小时检查它。

使用[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)从时间戳中获取日期，如果您不能直接转换它.. 之后

```
Calendar cal = new GregorianCalendar();
cal.setTime(yourDate);
int hour = cal.get(Calendar.HOUR_OF_DAY); 
```

现在做你的小时检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T07:12:13.380

`before`和`after`方法应该可以帮助你做到这一点。请参阅[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Timestamp.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T07:49:03.270

我建议`compareTo`在`Date`.

# c++ - 什么时候需要参考 R 值？

> ID：11167630
> 
> 赞同：4
> 
> 时间：2012-06-23T07:08:21.733
> 
> 标签：c++, c++11, language-lawyer, rvalue-reference

我知道，如果没有 R 值引用， C++ 中的*完美转发*是不可能的。

但是，我想知道：还有什么*需要*它们的吗？

* * *

例如，[这个页面](http://thbecker.net/articles/rvalue_references/section_02.html)指出了这个例子，其中 R 值引用显然是必要的：

> ```
>  X foo();
>   X x;
>   // perhaps use x in various ways
>   x = foo(); 
> ```
> 
> 上面的最后一行：
> 
> *   销毁持有的资源`x`，
> *   从临时返回的资源中克隆资源`foo`，
> *   破坏临时对象，从而释放其资源。

但是，在我看来，如果`swap`实施得当，一个简单的更改就可以解决问题：

```
X foo();
X x;
// perhaps use x in various ways
{
    X y = foo();
    swap(x, y);
} 
```

所以在我看来，这种优化*不需要r 值引用。*（那是对的吗？）

那么，有哪些问题是r 值引用*无法解决*的（完美转发除外，我已经知道了）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-23T07:27:46.520

> 那么，有哪些问题是 r 值引用无法解决的（完美转发除外，我已经知道了）？

Yes. In order for the `swap` trick to work (or at least, work optimally), the class must be designed to be in an empty state when constructed. Imagine a `vector` implementation that always reserved a few elements, rather than starting off totally empty. Swapping from such a default-constructed `vector` with an already existing `vector` would mean doing an extra allocation (in the default constructor of this `vector` implementation).

With an actual move, the default-constructed object can have allocated data, but the moved-from object can be left in an unallocated state.

Also, consider this code:

```
std::unique_ptr<T> make_unique(...) {return std::unique_ptr<T>(new T(...));}

std::unique_ptr<T> unique = make_unique(); 
```

This is *not possible* without language-level move semantics. Why? Because of the second statement. By the standard, this is copy initialization. That, as the name suggests, requires the type to be *copyable*. And the whole point of `unique_ptr` is that it is, well, unique. IE: not copyable.

If move semantics didn't exist, you couldn't return it. Oh yes, you can talk about copy elision and such, but remember: elision is an *optimization*. A conforming compiler must still detect that the copy constructor exists and is callable; the compiler simply has the option to not call it.

So no, you can't just emulate move semantics with `swap`. And quite frankly, even if you could, why would you ever *want* to?

You have to write `swap` implementations yourself. So if you've got a class with 6 members, your `swap` function has to swap each member in turn. Recursively through all base classes and such too.

C++11 (though not VC10 or VC2012) allows the compiler to write the move constructors *for you*.

Yes, there are circumstances where you can get away without it. But they look incredibly hacky, are hard to see why you're doing things that way, and most important of all, make things difficult for both the reader and the writer.

When people want to do something a lot for performance sake that makes their code tedious to read, difficult to write, and error-prone to maintain (add another member to the class without adding it to the `swap` function, for example), then you're looking at something that probably should become part of the language. Especially when it's something that the compiler can handle quite easily.

# ios - iOS 上 OpenGL ES 2.0 中着色器中可变数量的纹理单元

> ID：11167637
> 
> 赞同：1
> 
> 时间：2012-06-23T07:09:52.790
> 
> 标签：ios, opengl-es

我有 N 个需要从片段着色器同时访问的纹理单元。N 随加载的数据而变化。所以，在着色器中，我需要类似的东西：

```
// illegal syntax?
uniform sampler2D tex[N]; 
```

此外，OpenGL ES 2.0 似乎不支持 sampler2DArray。

只是想知道是否有任何其他技巧或 GLSL 预处理器构造可以用来实现上述目标。

或者，动态生成着色器代码是更好的选择吗？我可以生成类似下面的代码，并加载着色器：

```
uniform sampler2D tex1;
...
uniform sampler2D texN; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T19:57:36.757

you can try defining a constant maximum number of samplers, and receive the actual size at runtime.

```
uniform sampler2D tex[MAX_VALUE];
uniform int size;
int main(){
    ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T17:44:24.923

您是否需要明确设置数组的大小？据我了解，您可以使用以下命令指定任意大小的 sampler2D 的统一数组：

```
uniform sampler2D tex[]; 
```

我认为这通常会按照你想要的方式工作，但没有明确设置大小。我正在使用这种方法，但目前仅向数组提供一个纹理，并稍后在代码中使用其数组索引 tex[0] 引用它。还没有建立到我准备在那里放置超过 1 个纹理的地步，所以我不是 100% 的。

我对 OpenGL 很陌生，所以定义我不知道的数组大小可能会有一些好处。

# winforms - 如何在 Visual C++ 中为窗体设置渐变背景色？

> ID：11167642
> 
> 赞同：2
> 
> 时间：2012-06-23T07:10:30.607
> 
> 标签：winforms, visual-studio-2010, visual-c++, linear-gradients

我是使用 Visual Studio 2010 的新手。我想知道如何在 c++ 中将表单的背景颜色设置为渐变色。我在网上看到了一些源代码，但那是针对 Visual Basic .NET 的。

感谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T11:32:18.657

您将不得不习惯于在 vb.net 或 C# 语法中查找 .NET 示例代码，在 C++/CLI 中编写 Winforms 代码并不常见。翻译是相当机械的，所以一定要买一本关于 C++/CLI 编程的书，这样你就可以自己把它弄得乱七八糟了。

无论如何，代码非常简单，只需重写 OnPaintBackground 方法并修改构造函数，以便在更改大小时表单将自行重绘：

```
protected:
    virtual void OnPaintBackground(PaintEventArgs^ e) override {
        System::Drawing::Drawing2D::LinearGradientBrush brush(Point::Empty, Point(this->ClientSize.Width, this->ClientSize.Height), Color::Yellow, Color::Blue);
        e->Graphics->FillRectangle(%brush, 0, 0, this->ClientSize.Width, this->ClientSize.Height);
    } 
```

构造函数：

```
Form1(void) {
    InitializeComponent();
    SetStyle(ControlStyles::ResizeRedraw, true);
} 
```

# android - 放置 ProgressDialog 以创建加载的位置

> ID：11167644
> 
> 赞同：0
> 
> 时间：2012-06-23T07:10:35.027
> 
> 标签：android, loading, progressdialog

嘿，我想在我的应用程序`ProgressDialog`上显示加载进度，但我很困惑在哪里放置它......这是我的代码的说明......创建灰度图像的代码......

```
public void but_gray(View v){
    ProgressDialog prog = ProgressDialog.show(this, "", "tesLoading",true);
    bmp = grayscale(bmp);
    prog.dismiss; 
```

}

那是我的代码，但是当我运行代码时，不显示进度dalog ...当我单击灰度按钮时，but_gray 是一个函数... bmp 是一个位图变量.. grayscale() 是一个创建a的函数灰度图...

任何人都可以给我解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:57:29.543

只需创建 asynctask ，

```
 class Background_task extends AsyncTask<Void, Void, Void>
  {
  ProgressDialog progressDialog;
   @Override
    protected void onPreExecute() 
    {
        super.onPreExecute();
        progressDialog = ProgressDialog.show(DisplayBooksView.this, null, "Loading..."); 
    }

    @Override
    protected Void doInBackground(Void... params) 
    {
        bmp = grayscale(bmp);
        return null;
    }

    @Override
    protected void onPostExecute(Void result) 
    {
        super.onPostExecute(result);
        progressDialog.dismiss();
    }
} 
```

然后在你的函数中调用这个异步任务，比如，

```
 public void but_gray(View v){
          new Background_task().execute();
    } 
```

它会工作正常......

# php - 如何使用 PHP 将 html 表链接到 mysql 表

> ID：11167645
> 
> 赞同：0
> 
> 时间：2012-06-23T07:10:36.993
> 
> 标签：php, mysql, html-table

我有一个由 PHP/mysql 生成的表，我希望用户单击列/行以查看与在列/行**(2,2)**中单击的值相关的记录。请在下表中找到我有 Col Heading: **AR**和 Row heading **Opening Bal**，当单击值 30 时，我需要传递行和列标题以及它，以便我可以从表中搜索相关记录。

AR、N20、N2 ......列是根据产品表动态创建的。

```
 AR    N20    N2
-------------------------------
1.Opening Bal   30    40     12
2.Received       5     2      3
3.Total 1+2     35    42     15
4.Sales          3     3      4
5.Total 3-4     32    39     11
------------------------------- 
```

我需要将值传递给一个 php 文件，在该文件中我可以执行不同的验证并显示来自多个表的相关记录。

```
mysql_query ("SELECT id from STOCKMASTER WHERE product='AR' AND openbal='30'"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T07:13:48.163

使用 Ajax crud。一个非常有用的类，可以动态生成 html 以在数据库上执行 crud 操作。

[http://ajaxcrud.com/](http://ajaxcrud.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T08:50:30.603

您可以使用 jqgrid- [http://www.trirand.net/default.aspx](http://www.trirand.net/default.aspx)

# c# - c#：将dataTable传递给存储过程：列顺序问题

> ID：11167646
> 
> 赞同：8
> 
> 时间：2012-06-23T07:10:42.537
> 
> 标签：c#, .net, sql, sql-server-2008

我有一个存储过程，它接受一个用户定义的**表类型**`SeasonTable`，它看起来像这样：

**季节表**

```
 [SeasonId] [int] NOT NULL,
    [SeasonName] [varchar](50) NOT NULL,
    [Month] [int] NULL, 
    [IsDeleted] [bit] NOT NULL 
```

存储过程如下图

```
CREATE PROCEDURE [dbo].[udpTest] 
(
    @STable dbo.SeasonTable READONLY
)   
AS
BEGIN
SELECT [SeasonName] as SeasonName,[SeasonId],[Month],[IsDeleted] 
    FROM @AdminBillingSeasonsTable
END 
```

当我从 C# 应用程序调用它时

```
private DataTable TestCreateDataTable()
{
            DataTable dt = new DataTable();

            dt.Columns.Add("SeasonName", typeof(string));
            dt.Columns.Add("SeasonId", typeof(int));                
            dt.Columns.Add("Month", typeof(int));
            dt.Columns.Add("IsDeleted", typeof(bool));
            dt.Rows.Add("season1",1, 4,  false);
            dt.Rows.Add("season2",2, 9, false);
            dt.Rows.Add("season3",3, 11,  false);
            return dt;
} 
```

当我将上表用作从 C# 应用程序到 SP 的参数时，它会引发错误：

> 无法将“season1”转换为 int。

这是否意味着 C# 应用程序中的列顺序应该与 SQL 中的列顺序相同？

对此的任何帮助都将受到高度赞赏。

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-23T07:29:29.407

尝试像这样切换列序列

```
 private DataTable TestCreateDataTable()
            {
                DataTable dt = new DataTable();

                dt.Columns.Add("SeasonId", typeof(int));     // seasonId and then
                dt.Columns.Add("SeasonName", typeof(string)); // seasonName
                dt.Columns.Add("Month", typeof(int));
                dt.Columns.Add("IsDeleted", typeof(bool));
                dt.Rows.Add("season1",1, 4,  false);
                dt.Rows.Add("season2",2, 9, false);
                dt.Rows.Add("season3",3, 11,  false);
                return dt;
            } 
```

# jquery - jquery ie8 获取文本值 = 对象不支持此属性或方法

> ID：11167656
> 
> 赞同：2
> 
> 时间：2012-06-23T07:12:53.403
> 
> 标签：jquery, internet-explorer-8, html

我在主 div 内的两个 div 中有两个 span 标签

```
<div>
  <div>
    <span id="spanA">start text</span>
  </div>
  <div>
    <span id="spanB">start text two</span>
 </div>
<div> 
```

我使用 jquery 1.7.2 并试图在页面加载时获取跨度 a 和 b 的默认文本值，然后单击更改跨度 a 和 b 的值，然后在切换时将它们改回。在 FF/chrome 上这工作正常，但 ie8 抛出错误

```
Object doesn't support this property or method 
```

负载

```
spanAval = $('#spanA').text();
spanBval = $('#spanB').text(); 
```

点击

```
$('#spanA').text("replace text");
$('#spanB').text("replace text two"); 
```

onToggle

```
$('#spanA').text(spanAval);
$('#spanB').text(spanBval); 
```

在 ie8 中，文本被替换为“[object]”

我确定我缺少一些基本的东西，谢谢艺术

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T07:59:05.077

好的，这是基本的东西，我的 var 名称与 id 相同

```
spanA = $('#spanA').text(); 
```

它在 ie8 中失败，但在其他浏览器 FF/chrome 等中工作，通过将 var 名称更改为它在 ie8 中工作的唯一名称

```
spanAval = $('#spanA').text(); 
```

谢谢你的快速回复

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T12:45:04.210

最后`div`没有关闭。Jquery 也有几个错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T07:20:09.917

我认为您可以使用普通的 .innerText 或 .textContent （在 Firefox 中）属性，即：

```
var text = $('selector')[0].innerText 
             ? $('selector')[0].innerText 
             : $('selector')[0].textContent // for Firefox 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T13:25:12.220

您可以通过在 IE 中的变量前声明“var”来规避此错误。

```
var spanA = $('#spanA').text(); 
```

# cakephp - 使用 HABTM 在 CakePHP 中进行分页

> ID：11167660
> 
> 赞同：2
> 
> 时间：2012-06-23T07:13:45.143
> 
> 标签：cakephp, has-and-belongs-to-many

哇，CakePHP 真的没有解决这个问题。

经过数小时的搜索，我遇到了下面的解决方案（可能会或可能不会过时），但我在应用 paginatior 'limit' => 10 或其他排序时遇到问题。

有什么我想念的想法吗？

我的模型：

```
public $hasAndBelongsToMany = array(
    'Post' => array(
        'className'              => 'Post',
        'joinTable'              => 'tags_posts',
        'foreignKey'             => 'tag_id',
        'associationForeignKey'  => 'post_id',  
        'order'                  => array('Post.created DESC'),
        'unique'                 => true
    )
); 
```

在我的控制器中 view()

```
public function view($id) {
    $this->Tag->bindModel(array('hasOne' => array('TagsPost')), false);     
    $this->set('tag', $this->paginate('Tag', array('TagsPost.tag_id' => $id))); 
} 
```

在我看来，我不得不改变：

```
foreach ($tag['Post'] as $post) 
```

至

```
foreach ($tag[0]['Post'] as $post) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T04:48:21.807

您的视图方法应如下所示：

```
public function view($id) {
      $this->Paginate['limit'] = 10;
      $this->Paginate['conditions'] = array('TagsPost.tag_id' => $id);
      $this->Tag->bindModel(array('hasOne' => array('TagsPost')), false);     
      $this->set('tag', $this->paginate('Tag')); 
} 
```

请询问它是否不适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:33:04.677

用 CakePHP 2.x 测试

```
public function view ($id)
{
  $this->paginate = array (
                        'limit' => 10,
                        'conditions' => array('TagsPost.tag_id' => $id)
                    );
  $this->Tag->bindModel(array('hasOne' => array('TagsPost')), false);     
  $this->set('tag', $this->paginate('Tag')); 
} 
```

# android - 安装 .apk 文件需要帮助

> ID：11167664
> 
> 赞同：0
> 
> 时间：2012-06-23T07:14:19.113
> 
> 标签：android

*我正在尝试在我的设备上安装我构建的语音识别应用程序，该设备不支持它，现在我正在尝试将它安装在 LG Optimus 2x 上，我已经使用 Cynogenmode 将这款 LG 手机的操作系统更新为 ICS ，所以没有显示调试选项，我可以直接将 .apk 文件从 bin 复制到 LG 手机吗？那行得通吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:16:59.800

您必须从 android 市场安装应用程序安装程序。然后将apk文件复制到内存卡。启动应用程序安装程序，它将显示存储卡中的应用程序并选择，只需安装它。

另一种方法将 .apk 文件附加为电子邮件附件，使用您的设备打开该电子邮件，电子邮件客户端将显示安装按钮

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T07:44:36.817

请注意：如果您直接在手机上安装 APK，则必须在手机的设置中启用您可以从市场之外安装应用程序。但它应该只是工作....

# entity-framework - EF5 代码优先枚举和查找表

> ID：11167665
> 
> 赞同：32
> 
> 时间：2012-06-23T07:14:29.587
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

我想定义一个供 EF5 使用的枚举，以及一​​个相应的查找表。我知道 EF5 现在支持枚举，但开箱即用，它似乎只在对象级别支持此功能，并且默认情况下不为这些查找值添加表。

例如，我有一个用户实体：

```
public class User
{
    int Id { get; set; }
    string Name { get; set; }
    UserType UserType { get; set; }
} 
```

和一个 UserType 枚举：

```
public enum UserType
{
    Member = 1,
    Moderator = 2,
    Administrator = 3
} 
```

我希望数据库生成来创建一个表，例如：

```
create table UserType
(
    Id int,
    Name nvarchar(max)
) 
```

这可能吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-10-23T12:41:47.100

这是我之前制作的一个 nuget 包，它生成查找表并应用外键，并使查找表行与枚举保持同步：

[https://www.nuget.org/packages/ef-enum-to-lookup](https://www.nuget.org/packages/ef-enum-to-lookup)

将其添加到您的项目并调用 Apply 方法。

github 上的文档：[https ://github.com/timabell/ef-enum-to-lookup](https://github.com/timabell/ef-enum-to-lookup)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-23T22:36:27.173

这不是直接可能的。EF 支持与 .NET 相同级别的枚举，因此枚举值仅命名为整数 => 类中的枚举属性始终是数据库中的整数列。如果您还想拥有表，则需要在您自己的数据库初始化程序中手动创建它以及外键，`User`并用枚举值填充它。

我提出了一些[关于用户语音](http://data.uservoice.com/forums/72025-ado-net-entity-framework-ef-feature-suggestions/suggestions/2639292-support-for-simple-type-mapping-or-mapped-type-con)的建议，以允许更复杂的映射。如果您觉得它有用，您可以为该提案投票。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-25T11:01:17.203

我写了一个小助手类，它为 UserEntities 类中指定的枚举创建一个数据库表。它还在引用枚举的表上创建一个外键。

所以这里是：

```
public class EntityHelper
{

    public static void Seed(DbContext context)
    {
        var contextProperties = context.GetType().GetProperties();

        List<PropertyInfo> enumSets =  contextProperties.Where(p  =>IsSubclassOfRawGeneric(typeof(EnumSet<>),p.PropertyType)).ToList();

        foreach (var enumType in enumSets)
        {
            var referencingTpyes = GetReferencingTypes(enumType, contextProperties);
            CreateEnumTable(enumType, referencingTpyes, context);
        }
    }

    private static void CreateEnumTable(PropertyInfo enumProperty, List<PropertyInfo> referencingTypes, DbContext context)
    {
        var enumType = enumProperty.PropertyType.GetGenericArguments()[0];

        //create table
        var command = string.Format(
            "CREATE TABLE {0} ([Id] [int] NOT NULL,[Value] [varchar](50) NOT NULL,CONSTRAINT pk_{0}_Id PRIMARY KEY (Id));", enumType.Name);
        context.Database.ExecuteSqlCommand(command);

        //insert value
        foreach (var enumvalue in Enum.GetValues(enumType))
        {
            command = string.Format("INSERT INTO {0} VALUES({1},'{2}');", enumType.Name, (int)enumvalue,
                                    enumvalue);
            context.Database.ExecuteSqlCommand(command);
        }

        //foreign keys
        foreach (var referencingType in referencingTypes)
        {
            var tableType = referencingType.PropertyType.GetGenericArguments()[0];
            foreach (var propertyInfo in tableType.GetProperties())
            {
                if (propertyInfo.PropertyType == enumType)
                {
                    var command2 = string.Format("ALTER TABLE {0} WITH CHECK ADD  CONSTRAINT [FK_{0}_{1}] FOREIGN KEY({2}) REFERENCES {1}([Id])",
                        tableType.Name, enumProperty.Name, propertyInfo.Name
                        );
                    context.Database.ExecuteSqlCommand(command2);
                }
            }
        }
    }

    private static List<PropertyInfo> GetReferencingTypes(PropertyInfo enumProperty, IEnumerable<PropertyInfo> contextProperties)
    {
        var result = new List<PropertyInfo>();
        var enumType = enumProperty.PropertyType.GetGenericArguments()[0];
        foreach (var contextProperty in contextProperties)
        {

            if (IsSubclassOfRawGeneric(typeof(DbSet<>), contextProperty.PropertyType))
            {
                var tableType = contextProperty.PropertyType.GetGenericArguments()[0];

                foreach (var propertyInfo in tableType.GetProperties())
                {
                    if (propertyInfo.PropertyType == enumType)
                        result.Add(contextProperty);
                }
            }
        }

        return result;
    }

    private static bool IsSubclassOfRawGeneric(Type generic, Type toCheck)
    {
        while (toCheck != null && toCheck != typeof(object))
        {
            var cur = toCheck.IsGenericType ? toCheck.GetGenericTypeDefinition() : toCheck;
            if (generic == cur)
            {
                return true;
            }
            toCheck = toCheck.BaseType;
        }
        return false;
    }

    public class EnumSet<T>
    {
    }
} 
```

使用代码：

```
public partial class UserEntities : DbContext{
    public DbSet<User> User { get; set; }
    public EntityHelper.EnumSet<UserType> UserType { get; set; }

    public static void CreateDatabase(){
        using (var db = new UserEntities()){
            db.Database.CreateIfNotExists();
            db.Database.Initialize(true);
            EntityHelper.Seed(db);
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-09T02:34:29.857

我为它创建了一个包

[https://www.nuget.org/packages/SSW.Data.EF.Enums/1.0.0](https://www.nuget.org/packages/SSW.Data.EF.Enums/1.0.0)

采用

```
EnumTableGenerator.Run("your object context", "assembly that contains enums"); 
```

“你的对象上下文” - 是你的 EntityFramework DbContext “包含枚举的程序集” - 一个包含你的枚举的程序集

调用 EnumTableGenerator.Run 作为种子函数的一部分。这将在 sql server 中为每个 Enum 创建表，并用正确的数据填充它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-10T00:03:33.643

我已经包含了这个答案，因为我从@HerrKater 做了一些额外的改变

[我对Herr Kater 的回答](https://stackoverflow.com/a/15065439/3298959 "卡特先生的回答")做了一点补充（也是基于 Tim Abell 的评论）。更新是使用一种方法从 DisplayName 属性中获取枚举值（如果存在），否则拆分 PascalCase 枚举值。

```
 private static string GetDisplayValue(object value)
 {
   var fieldInfo = value.GetType().GetField(value.ToString());

   var descriptionAttributes = fieldInfo.GetCustomAttributes(
     typeof(DisplayAttribute), false) as DisplayAttribute[];

   if (descriptionAttributes == null) return string.Empty;
   return (descriptionAttributes.Length > 0)
   ? descriptionAttributes[0].Name
   : System.Text.RegularExpressions.Regex.Replace(value.ToString(), "([a-z](?=[A-Z])|[A-Z](?=[A-Z][a-z]))", "$1 ");
 } 
```

更新 Herr Katers 示例以调用该方法：

```
 command = string.Format("INSERT INTO {0} VALUES({1},'{2}');", enumType.Name, (int)enumvalue,
                                        GetDisplayValue(enumvalue)); 
```

枚举示例

```
public enum PaymentMethod
{
    [Display(Name = "Credit Card")]
    CreditCard = 1,

    [Display(Name = "Direct Debit")]
    DirectDebit = 2
} 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-06-23T08:29:53.093

您必须自定义您的生成工作流程

```
1\. Copy your default template of generation TablePerTypeStrategy

Location : \Microsoft Visual Studio 10.0\Common7\IDE\Extensions\Microsoft\Entity Framework Tools\DBGen.

2\. Add custom activity who realize your need (Workflow Foundation)

3\. Modify your section Database Generation Workflow in your project EF 
```

# php - 如何在 CodeIgniter 中禁用特殊字符

> ID：11167671
> 
> 赞同：0
> 
> 时间：2012-06-23T07:15:51.347
> 
> 标签：php, validation, codeigniter

我有一个名字和姓氏字段，我已将规则设置为“必填”，但我希望这两个字段都只能接受字母而不是特殊字符或数字。如果用户使用特殊字符或数字提交，我想显示用户提交无效字符的错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T07:17:46.180

将规则添加到验证中`alpha`。

在[此处](http://codeigniter.com/user_guide/libraries/form_validation.html)阅读更多信息`Rule Reference`。

# android - 他们是如何做出这样的布局的——他们使用了哪些元素？

> ID：11167673
> 
> 赞同：8
> 
> 时间：2012-06-23T07:16:11.223
> 
> 标签：android, android-layout

目前，我正在使用[Euro 2012 应用程序](https://play.google.com/store/apps/details?id=com.imano.euro2012.row)，它有一些有趣的布局部分。如果你去matches->knockout屏幕，你会看到3个这样的屏幕。

![](../Images/74805808df6052870d21c69ca91e0fa6.png) ![](../Images/8bde2e48bc2d0b2cfe43ec4a61602a72.png) ![](../Images/13aad194b4b1efe0481177c1f188b204.png)

如果您向左或向右滑动，您将在它们之间移动，而不是在一个活动之间移动到另一个活动之间，而是就像所有这些元素都放在一个大画布上并且您将每个屏幕滑动到焦点一样。即使你，如果你向左/向右滑动，屏幕也不能以每张图像的一半可见的方式停止，所以我猜它不是一个大画布。不知何故，您可以像一张大图像一样滑动屏幕，但它总是完美锁定，就好像他们为此使用了 3 个活动一样。

这是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T08:23:10.057

这是一个[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)，可在 Android 支持包中找到，并在他们的[博客](http://android-developers.blogspot.co.il/2011/08/horizontal-view-swiping-with-viewpager.html)中进行了描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T08:34:08.343

设计并没有那么难，因为我认为绘制显示四分之一决赛，半决赛的盒子。

他们有布局（我们也可以通过将图像放置在背景中来实现）。FrameLayout 发挥的主要作用向您展示了效果（强调），标志是从 url 获取的，因为匹配已确定（本质上不是图像，只有名称就足够了，因为标志进入应用程序并在更新时应用）。

单击后，我认为开始图像会发生变化，它只是用新图像替换该图像。

正如您所说，它们不在单个画布上（但是如果他们对继承人 Viewpager 进行了自定义，则它不会在活动之间停止），但我认为它在单个画布上。

如果您考虑加载速度，并且所有这一切都取决于您优化的代码和处理，那么它会给您带来流畅的感觉和快速的处理。

我们可以欣赏这项工作，但我们不能说这太难了，因为我认为这很容易......

希望这个解释能帮助你理解......

# c# - 来自 ASP.net 的电子邮件将作为 HTML 附件

> ID：11167675
> 
> 赞同：0
> 
> 时间：2012-06-23T07:16:30.157
> 
> 标签：c#, asp.net, html, email, html-email

正如标题所说，我正在从我的 ASP.net Web 应用程序发送电子邮件，没有任何附件（目前），但奇怪的是，电子邮件正文作为一个单独的 HTML 文件附加到空白电子邮件，就像我单击它打开的 HTML 文件一样正文在单独的窗口中，我在正文中作为独立的 HTML 文件编写的所有内容，只有当我将电子邮件发送到 e-lance 等门户网站时才会发生这种情况，但是当我将其发送到 gmail 或 hotmail 地址时，电子邮件会完美无附件和正文出现在它应该出现的地方。

我的电子邮件代码是

```
 public bool sendMail(string messageSubject, System.Net.Mail.MailAddress fromEmailAddress, System.Net.Mail.MailAddress toEmailAddress, string source_id, string messageText)
    {
        System.Net.Mail.MailMessage mail = new System.Net.Mail.MailMessage();
        mail.IsBodyHtml = true;
        mail.Subject = messageSubject;
        mail.From = fromEmailAddress;
        mail.To.Add(toEmailAddress);
        mail.Body = messageText;

        SmtpClient relayServer = new SmtpClient();

        List<KeyValuePair<string, string>> commandParameters = new List<KeyValuePair<string,string>>();
        commandParameters.Add(new KeyValuePair<string,string>("@source_id", source_id));
        DataTable sourcesTable = SQLSelect("SELECT * FROM LogiCrmSources WHERE source_id = @source_id", commandParameters);

        relayServer.Host = sourcesTable.Rows[0]["source_smtp"].ToString();
        relayServer.Port = Convert.ToInt16(sourcesTable.Rows[0]["source_smtp_port"].ToString());
        if (relayServer.Port == 25)
        {
            relayServer.EnableSsl = false;
        }
        else
        {
            relayServer.EnableSsl = true;
        }
        relayServer.Credentials = new System.Net.NetworkCredential(sourcesTable.Rows[0]["source_email"].ToString(), sourcesTable.Rows[0]["source_password"].ToString());
        try
        {
            relayServer.Send(mail);                
            return true;
        }
        catch(SmtpFailedRecipientException exp)
        {
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:24:35.650

并非所有客户都能正确处理 html 电子邮件。例如，Gmail 可以，而您提到的门户网站则不能。在这些情况下，电子邮件的正文作为附件发送。

# c# - 错误消息“操作员'。' 将方法转换为扩展方法时，不能应用于“lambda 表达式”类型的操作数？

> ID：11167676
> 
> 赞同：10
> 
> 时间：2012-06-23T07:16:32.353
> 
> 标签：c#, .net, linq, extension-methods

我有一个方法要转换为扩展方法

```
public static string GetMemberName<T>(Expression<Func<T>> item)
{
    return ((MemberExpression)item.Body).Member.Name;
} 
```

并称它为

```
string str = myclass.GetMemberName(() => new Foo().Bar); 
```

所以它评估为`str = "Bar"; // It gives the Member name and not its value`

现在，当我尝试通过此将其转换为扩展方法时

```
public static string GetMemberName<T>(this Expression<Func<T>> item)
{
    return ((MemberExpression)item.Body).Member.Name;
} 
```

并称它为

```
string str = (() => new Foo().Bar).GetMemberName(); 
```

错误说`Operator '.' cannot be applied to operand of type 'lambda expression'`

我哪里错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T07:30:10.440

> 我哪里错了？

编译器准确地告诉你出了什么问题——你不能`.`在 lambda 表达式上使用。

lambda 表达式没有任何特定类型 - 它只是*可转换*为表达式树。

*成员访问*表达式（这是您尝试做的）仅在表单中可用

```
primary-expression . identifier type-argument-list(opt)
predefined-type . identifier type-argument-list(opt)
qualified-alias-member . identifier type-argument-list(opt) 
```

...并且 lambda 表达式不是主要表达式。

有趣的是，此参数*不适*用于匿名*方法*表达式，但您仍然不能在其上使用成员访问表达式。C# 规范的第 7.6.4 节列出了如何绑定成员访问表达式，并且大部分选项在“如果 E 是*预定义类型*或归类为类型的*主表达式*”下（不适用到匿名方法）或“如果 E 是属性访问、变量或值，其类型为 T” - 但匿名方法是匿名函数，并且根据第 7.15 节：“匿名函数没有值或自行输入”。

编辑：您仍然*可以*在表达式树上使用扩展方法，只是不能直接在 lambda 表达式上使用它们。所以这将起作用：

```
Expression<Func<int>> expr = () => new Foo().Bar;
string name = expr.GetMemberName(); 
```

...但它显然没有那么有用。（根据 mlorbetske 的回答同上。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-23T07:33:03.690

这里实际上有两件事，首先，传递`() => new Foo().Bar`给接受的方法`Expression<Func<T>>`将指定的表达式树视为 a `Expression<Func<T>>`，但它本身`() => new Foo().Bar`不是 a `Expression<Func<T>>`。

其次，为了让您的扩展方法接受任何 lambda（例如您提供的），您必须使用与任何表达式树相对应的类型。但是，您可能已经根据`... to operand of type 'lambda expression'`通常在引号内看到类型名称的消息猜到了，lambda 表达式由语言特殊处理，从而使您尝试做的事情，而无需先进行转换，不可能的。

以扩展方法形式调用扩展方法的方法是（在`Bar`类型为的情况下`string`）

```
((Expression<Func<string>>)(() => new Foo().Bar)).GetMemberName()` 
```

这似乎并不是那么理想。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-27T01:17:34.997

要获得键入的表达式，您必须将其写出来。正如其他人所说，编译器不会自动从 lambda 表达式推断它，因为 lambda 表达式可能意味着两件事——委托或表达式树。

通过让编译器为您部分推断类型，您可以使表达式相对简单，例如（[来自此答案](https://stackoverflow.com/a/20608307/661933)）：

```
public sealed class Lambda
{
    public static Func<T> Func<T>(Func<T> func)
    {
        return func;
    }

    public static Expression<Func<T>> Expression<T>(Expression<Func<T>> expression)
    {
        return expression;
    }
}

public sealed class Lambda<S>
{
    public static Func<S, T> Func<T>(Func<S, T> func)
    {
        return func;
    }

    public static Expression<Func<S, T>> Expression<T>(Expression<Func<S, T>> expression)
    {
        return expression;
    }
}

//etc, to cover more cases 
```

像这样称呼它：

```
var expr1 = Lambda.Expression(() => new Foo().Bar);
var expr2 = Lambda<string>.Expression(x => x.Length); //etc 
```

* * *

您的选择是：

1.  向后转换，精确到表达式类型，然后在其上调用扩展方法

    ```
    var name = ((Expression<Func<BarType>>)(() => new Foo().Bar)).GetMemberName(); 
    ```

    看起来丑陋 - 治疗比病因更糟糕。

2.  首先将表达式获取到变量中

    ```
    Expression<Func<BarType>> expr = () => new Foo().Bar;
    var name = expr.GetMemberName(); 
    ```

    稍微好一点，但对于一件微不足道的事情来说仍然看起来没什么。

3.  使用`Lambda`上面写的类

    ```
    var name = Lambda.Expression(() => new Foo().Bar).GetMemberName(); 
    ```

    甚至更好。只是打字少了一点。

4.  你的第一个模式，我认为就可读性而言，这是你能得到的最好的模式

    考虑到与 lambda 表达式相关的 C# 规则，我认为您无法改进这一点。也就是说，我认为几乎没有什么可以改进的。

    首先，将功能扩展到其他 lambda 表达式类型。您需要的不仅仅是`Func<T>`类型来处理所有情况。确定您必须处理的表达式类型。例如，如果您有一个`Func<S, T>`类型（如您的问题 - `Bar`on `Foo`），它看起来会更好。比较这个

    ```
    myclass.GetMemberName(() => new Foo().Bar); 
    ```

    和

    ```
    myclass.GetMemberName<Foo>(x => x.Bar); 
    ```

    我会说这些重载会：

    ```
    //for static methods which return void
    public static string GetMemberName(Expression<Action> expr);

    //for static methods which return non-void and properties and fields
    public static string GetMemberName<T>(Expression<Func<T>> expr);

    //for instance methods which return void
    public static string GetMemberName<T>(Expression<Action<T>> expr);

    //for instance methods which return non-void and properties and fields
    public static string GetMemberName<S, T>(Expression<Func<S, T>> expr); 
    ```

    现在这些不仅可以在评论中提到的情况下使用，肯定还有重叠的场景。例如，如果您已经有 的实例`Foo`，则更容易调用`Func<T>`属性名称的第二个重载 () 重载`Bar`，例如`myclass.GetMemberName(() => foo.Bar)`.

    其次，实现`GetMemberName`所有这些重载共有的功能。`Expression<T>`或`LambdaExpression`将做的扩展方法。我更喜欢后者，这样即使在非强类型场景中你也可以调用它。我会这样写，[从这个答案](https://stackoverflow.com/a/20533751/661933)：

    ```
    public static string GetMemberName(this LambdaExpression memberSelector)
    {
        Func<Expression, string> nameSelector = null;
        nameSelector = e => //or move the entire thing to a separate recursive method
        {
            switch (e.NodeType)
            {
                case ExpressionType.Parameter:
                    return ((ParameterExpression)e).Name;
                case ExpressionType.MemberAccess:
                    return ((MemberExpression)e).Member.Name;
                case ExpressionType.Call:
                    return ((MethodCallExpression)e).Method.Name;
                case ExpressionType.Convert:
                case ExpressionType.ConvertChecked:
                    return nameSelector(((UnaryExpression)e).Operand);
                case ExpressionType.Invoke:
                    return nameSelector(((InvocationExpression)e).Expression);
                case ExpressionType.ArrayLength:
                    return "Length";
                default:
                    throw new Exception("not a proper member selector");
            }
        };

        return nameSelector(memberSelector.Body);
    } 
    ```

    最后，`GetMemberName`如果您将其称为非扩展方式，这不是一个好名字。`expression.GetMemberName()`听起来更合乎逻辑。`Member.NameFrom<int>(x => x.ToString())`or `MemberName.From<string>(x => x.Length)`etc 是静态调用的更具描述性的名称。

    所以总的来说这个类可能看起来像：

    ```
    public static class Member
    {
        public static string NameFrom(Expression<Action> expr)
        {
            return expr.GetMemberName();
        }

        public static string NameFrom<T>(Expression<Func<T>> expr)
        {
            return expr.GetMemberName();
        }

        public static string NameFrom<T>(Expression<Action<T>> expr)
        {
            return expr.GetMemberName();
        }

        public static string NameFrom<T>(Expression<Func<T, object>> expr)
        {
            return expr.GetMemberName();
        }
    } 
    ```

    和用法：

    ```
    var name1 = Member.NameFrom(() => Console.WriteLine());
    var name2 = Member.NameFrom(() => Environment.ExitCode);
    var name3 = Member.NameFrom<Control>(x => x.Invoke(null));
    var name4 = Member.NameFrom<string>(x => x.Length); 
    ```

    最简洁干净。

5.  对于属性和字段，可以将其转换为匿名类，然后使用反射读取成员名称，[如下所示。](https://stackoverflow.com/questions/72121/finding-the-variable-name-passed-to-a-function-in-c-sharp)

    ```
    public static string GetMemberName<T>(T item) where T : class
    {
        if (item == null)
            return null;

        return typeof(T).GetProperties()[0].Name;
    } 
    ```

    像这样称呼它

    ```
    var name = GetMemberName(new { new Foo().Bar }); 
    ```

    它更快，但有一些怪癖，比如对重构不太友好，并且在方法作为成员的情况下没有帮助。看题。。

其中我更喜欢4。

# iphone - 如何在 iPhone sdk 中以编程方式获取设备名称？

> ID：11167677
> 
> 赞同：7
> 
> 时间：2012-06-23T07:16:50.343
> 
> 标签：iphone, ip-address, device, mac-address

我得到了设备 Mac 和 IP 地址。但是，不要获取设备名称。

如果可能的话，知道如何获取更多信息，例如设备的“网络实用程序”吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-23T07:21:41.440

```
NSLog(@"uniqueIdentifier: %@", [[UIDevice currentDevice] uniqueIdentifier]);
NSLog(@"name: %@", [[UIDevice currentDevice] name]);
NSLog(@"systemName: %@", [[UIDevice currentDevice] systemName]);
NSLog(@"systemVersion: %@", [[UIDevice currentDevice] systemVersion]);
NSLog(@"model: %@", [[UIDevice currentDevice] model]);
NSLog(@"localizedModel: %@", [[UIDevice currentDevice] localizedModel]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T11:08:55.373

在 iOS 4.1+ 上，您可以这样做：如果您正在寻找 SSID Name..

# 进口

```
- (id)fetchSSIDInfo
{
    NSArray *ifs = (id)CNCopySupportedInterfaces();
    NSLog(@"%s: Supported interfaces: %@", __func__, ifs);
    id info = nil;
    for (NSString *ifnam in ifs) {
        info = (id)CNCopyCurrentNetworkInfo((CFStringRef)ifnam);
        NSLog(@"%s: %@ => %@", __func__, ifnam, info);
        if (info && [info count]) {
            break;
        }
        [info release];
    }
    [ifs release];
    return [info autorelease];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T07:32:04.853

```
#import <ifaddrs.h>
#import <arpa/inet.h>

- (NSString *)getIPAddress {    
    NSString *address = @"error";
    struct ifaddrs *interfaces = NULL;
    struct ifaddrs *temp_addr = NULL;
    int success = 0;
    // retrieve the current interfaces - returns 0 on success
    success = getifaddrs(&interfaces);
    if (success == 0) {
        // Loop through linked list of interfaces
        temp_addr = interfaces;
        while(temp_addr != NULL) {
            if(temp_addr->ifa_addr->sa_family == AF_INET) {
                // Check if interface is en0 which is the wifi connection on the iPhone
                if([[NSString stringWithUTF8String:temp_addr->ifa_name] isEqualToString:@"en0"]) {
                    // Get NSString from C String
                    address = [NSString stringWithUTF8String:inet_ntoa(((struct sockaddr_in *)temp_addr->ifa_addr)->sin_addr)];               
                }
            }
            temp_addr = temp_addr->ifa_next;
        }
    }
    // Free memory
    freeifaddrs(interfaces);
    return address;

} 
```

# java - Java 从数组中获取一个元素，对其进行编辑，然后将其存储在另一个数组中，而不更改第一个数组

> ID：11167678
> 
> 赞同：2
> 
> 时间：2012-06-23T07:16:59.133
> 
> 标签：java, arrays, element

我在我的一个 Java 项目中遇到了一个问题，这会导致错误。问题听起来如下：

我有两个数组。我们将它们命名为 firstArray 和 secondArray。在这种情况下，对象是我创建的一个单独的类。它有效，数组可以填充该类型的对象。

```
Object[] firstArray= new Object[];
Object[] secondArray = new Object[]; 
```

现在，当我从第一个数组中取出一个元素，对其进行编辑然后将其复制到第二个数组中时，第一个数组中的对象也会被更改。

```
tempObj = firstArray[3];
tempObj.modifySomething();
secondArray[3] = tempObj; 
```

每当我这样做时，第一个数组的（在这种情况下）第三个元素（实际上是第四个）都会得到修改。我不想要这个。我希望第一个数组保持完整、未修改，并且我从第一个数组中提取然后修改的对象应该存储在第二个数组中，以便第二个数组实际上是运行某些代码后的第一个数组。

PS 即使我使用 Array.get(Array, index) 从第一个数组中获取元素然后对其进行修改，该元素仍会在第一个数组中被修改。

希望你明白我想说的话，如果是这样，请帮帮我:)

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-23T07:21:22.093

您将不得不创建一个新对象。

问题是`modifySomething`通话。当你这样做时，它会改变调用它的对象。所以如果你只有一个对象（即使是两个名字），你不能调用`modifySomething`，否则它们都会改变。

当你说 时`secondArray[3] = firstArray[3]`，你并不是在创建一个新对象：你只是在分配一个引用。通过中间临时参考不会改变这一点。

您将需要如下所示的代码：

```
Object tempObj = firstArray[3].clone();
tempObj.modifySomething();
secondArray[3] = tempObj; 
```

该`clone()`方法必须返回一个与原始对象分离但具有相同属性的**新对象。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T07:20:39.357

当你从你的数组中检索一个元素时，你有一个对它的引用。因此，如果您修改它，修改将通过所有对象的引用进行。

为了保持它完好无损，您应该使用 Object.clone() 之类的方法或创建一个新对象并使用其构造函数来初始化其字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T07:20:48.903

需要克隆从第一个数组中提取的对象以创建一个单独的新实例。否则修改将影响第一个数组中的对象，因为它是同一个对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T07:20:54.053

在 Java 中，当你这样做时`secondArray[3] = tempObj;`，你实际上是把引用放到数组中，而不是真正的对象

所以`firstArray[3]`和`secondArray[3]`指向同一个真实对象

您需要做的是创建一个与原始对象相同的新对象，并将新对象的引用放到您的`secondArray`

值得指出的是，默认`clone()`函数只做一个**浅拷贝**，所以如果你的对象字段中有可变对象，它可能会导致一些问题。看看[这篇](http://javatechniques.com/blog/faster-deep-copies-of-java-objects/)关于如何做**深拷贝的文章**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-23T07:21:46.633

当您从数组中检索元素时，您会获得对它的引用。因此，如果您修改它，修改将通过所有对象的引用共享。

为了保持它完好无损，您应该使用类似的方法`Object.clone()`或创建一个新方法，该方法接受输入检索到的对象并返回一个类似的新方法。

# java - 使用base64在android中上传图片和发送参数

> ID：11167686
> 
> 赞同：2
> 
> 时间：2012-06-23T07:18:23.720
> 
> 标签：java, php, android

我在安卓上传。为此，我正在关注本[教程](http://blog.sptechnolab.com/2011/03/09/android/android-upload-image-to-server/)。我当前的代码在我的 logcat 中给了我这个错误

```
06-23 10:10:22.990: D/dalvikvm(25853): GC_EXTERNAL_ALLOC freed 48K, 50% free 2723K/5379K, external 0K/0K, paused 33ms
06-23 10:10:23.030: E/log_tag(25853): Error in http connection java.net.UnknownHostException: www.example.info
06-23 10:10:23.115: D/CLIPBOARD(25853): Hide Clipboard dialog at Starting input: finished by someone else... ! 
```

这是我的代码的样子

```
public class UploadFileActivity extends Activity {
/** Called when the activity is first created. */
Button bUpload;
EditText etParam;

InputStream is;

@Override

public void onCreate(Bundle icicle) {

    super.onCreate(icicle);
    setContentView(R.layout.main);

    Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
    ByteArrayOutputStream bao = new ByteArrayOutputStream();
    bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 90, bao);

    byte [] ba = bao.toByteArray();
    String ba1=Base64.encodeToString(ba, 0);

    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("image",ba1));

    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://www.example.info/androidfileupload/index.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    } catch(Exception e) {
        Log.e("log_tag", "Error in http connection "+e.toString());
    }

}
} 
```

这是我在服务器端使用的

```
<?php
$base=$_REQUEST['image'];

echo $base;

// base64 encoded utf-8 string

$binary=base64_decode($base);

// binary, utf-8 bytes

header('Content-Type: bitmap; charset=utf-8');

// print($binary);

//$theFile = base64_decode($image_data);

$file = fopen('test.jpg', 'wb');

fwrite($file, $binary);

fclose($file);

echo '<img src=test.jpg>';

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T07:22:06.100

与您的`UnknownHostException`url 域有关，或者没有 Internet/网络连接，

因此，请确保您在 AndroidManifest 文件中添加了 Internet 权限。

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T02:32:40.563

我遵循了相同的教程。只要图像足够小就可以工作。

否则，您可能会在以下位置遇到内存不足问题：

```
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

回答你的问题——

> 您能告诉我如何将图像名称保留为原始名称吗？我的意思是，我想在上传时使用相同的图像名称。

您可以将变量添加到包含原始名称的 URL 请求。否则您将无法将其嵌入到 64Byte 编码的字符串中。

像这样的东西：

```
"http://www.example.info/androidfileupload/index.php?name=filename" 
```

PHP端看起来像

```
$FileName = $_GET['name']; 
```

# php - 我需要一个订购的 6 个自动 div css 框，看起来像 Facebook 相册

> ID：11167689
> 
> 赞同：-2
> 
> 时间：2012-06-23T07:19:36.630
> 
> 标签：php, css

我每次都需要一个带有 html-php 内容的 div css 框，当它在一行中存在 6 个框时，它会自动在 6 个框下开始，然后继续我的意思是像 facebook 专辑中的行为只是 facebook 的不同之处每行 4 张照片我需要六张照片，而不是照片，而是一个 div css 框，其中将包含 *.php 文件并将通过同一页面中的表单生成，例如，我在一个框中给出表单名称 John Doe 和 Bill Clinton在第二个盒子里，依此类推。

这是我的尝试

```
 <body>
 <div class="header">
 header
 </div>
 <?php
$dir= opendir(".") or die ('Cannot open directory');
$div="<div class=\"left1\">\n";
echo "<div class=\"wrapper\">\n";
for( $i=0; $i<6; $i++){
    while(($file = readdir($dir)) != false){
    if(preg_match("/php$/", $file)){
    echo $div;
    include($file); 
    echo "</div>\n";
    }
    }
}
echo "</div>\n";

?>
</body>
</html> 
```

但它不像我希望的那样工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T07:47:14.793

只需执行以下操作：

```
<?php 

for($j=1; $j < 13; $j++) : 

print '<div style="float:left;width:100px">';

    print 'your content here for the div. change width and loop numbers as needed';

print '</div>';

//magic is here
if($j%6==0) print '<div style="clear:both;"></div>';

endfor; 
```

# jquery - Backbone.js 将此绑定到成功/错误回调？

> ID：11167698
> 
> 赞同：4
> 
> 时间：2012-06-23T07:21:03.653
> 
> 标签：jquery, backbone.js, bind, underscore.js

我的 Backbone 应用程序中有以下代码，有没有办法将“this”绑定到回调，而不必一直分配“$this”？

```
addItem: function()
{
    var $this = this;

    (new Project()).save({name:$('#project_name').val()},{
        success:function(model, response)
        {
            $this.collection.add(model);
        },
        error: function()
        {
            console.log('wtf');
        }
   });
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T07:49:25.813

您有可用的下划线，因此您可以[`_.bind`](http://underscorejs.org/#bind)手动：

```
(new Project()).save({ name: $('#project_name').val() }, {
    success: _.bind(function(model, response) {
        this.collection.add(model);
    }, this),
    error: _.bind(function() {
        console.log('wtf');
    }, this)
}); 
```

或者只是使用回调方法和`_.bind`/或[`_.bindAll`](http://underscorejs.org/#bindAll)那些：

```
initialize: function() {
    _.bindAll(this, 'success_callback', 'error_callback');
},
success_callback: function(model, response) {
    this.collection.add(model);
},
error_callback: function() {
    console.log('WTF?');
},
addItem: function() {
    (new Project()).save({ name: $('#project_name').val() }, {
        success: this.success_callback,
        error:   this.error_callback
    });
} 
```

# c# - Linq 多行插入

> ID：11167699
> 
> 赞同：0
> 
> 时间：2012-06-23T07:21:21.700
> 
> 标签：c#, asp.net, linq-to-sql

我在使用 linq 插入多个行时遇到问题。我有 2 张桌子，，

[订阅] 表

![在此处输入图像描述](../Images/ce06e8bcadd33a418559ba189268aef7.png)

和[消息]表

*   MessageID (int, isIdentity)
*   发件人
*   接收者
*   内容

我希望订阅表中订阅“摇滚”类别的所有用户名都收到来自我的相同消息.. 我的代码现在给出错误

```
 var subcribe = from s in database.Subscribes
                   where s.SubscribeCategory == "Rock"
                   select s.UserName;

    foreach (string s in subcribe)
    {
        Message msg = new Message();
        msg.MsgContent = "Text Here";
        msg.Sender = this.User.Identity.Name;
        msg.Receiver = s;
        database.Messages.InsertOnSubmit(msg);
    }
    database.SubmitChanges(); 
```

任何人都可以帮助这个查询吗？先谢谢了。。

问候..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T08:01:00.613

我可以看到您没有在`Message`表中设置主键列，因此您可能会收到此错误：

> 无法对其执行创建、更新或删除操作，`Table(Message)`因为它没有主键。

为此，您必须在`Message`表中添加一个主键，然后重构`DataClasses.dbml`.

# php - 在 php 中创建 1 位位图（单色）

> ID：11167706
> 
> 赞同：10
> 
> 时间：2012-06-23T07:24:16.040
> 
> 标签：php, bitmap, bit

我正在寻找从具有此内容的字符串中写入 1 位位图的可能性：

```
$str = "001011000111110000"; 
```

零是白色，一是黑色。BMP 文件为 18 x 1 像素。

我不想要一个 24 位 BMP，而是一个真正的 1 位 BMP。

有谁知道PHP中的标头和转换方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T00:15:51.827

这有点奇怪的要求:)

因此，您首先要在这里使用 php-gd。通常，在任何具有不错的 repo 的操作系统上安装 php 时都会包含此内容，但如果它不适合您，您可以在此处获取安装说明；

[http://www.php.net/manual/en/image.setup.php](http://www.php.net/manual/en/image.setup.php)

首先，我们需要确定图像的宽度需要多大；高度显然永远是一。

所以;

```
$str = $_GET['str'];
$img_width = strlen($str); 
```

strlen 将告诉我们 $str 字符串中有多少个字符，并且由于我们为每个字符提供一个像素，因此字符数将为我们提供所需的宽度。

为了便于访问，将字符串拆分为一个数组 - 每个元素对应每个单独的像素。

```
$color_array = str_split($str); 
```

现在，让我们设置一个“指针”，为我们绘制的像素。它是 php，所以你不需要初始化它，但是很整洁。

```
$current_px = (int) 0; 
```

现在您可以初始化 GD 并开始制作图像了；

```
$im = imagecreatetruecolor($img_width, 1);
// Initialise colours;
$black = imagecolorallocate($im, 0, 0, 0);
$white = imagecolorallocate($im, 255, 255, 255);
// Now, start running through the array
foreach ($color_array as $y)
{
  if ($y == 1)
  {
    imagesetpixel ( $im, $current_px , 1 , $black );
  }
  $current_px++; // Don't need to "draw" a white pixel for 0\. Just draw nothing and add to the counter.
} 
```

这将绘制您的图像，然后您需要做的就是显示它；

```
header('Content-type: image/png');
imagepng($im);
imagedestroy($im); 
```

请注意，根本不需要 $white 声明——我只是把它留在里面，让您了解如何使用 gd 声明不同的颜色。

您可能需要在使用它之前对其进行一些调试 - 自从我使用 GD 以来已经很长时间了。无论如何，希望这会有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-17T14:34:57.357

这不是一个奇怪的要求。

我完全同意这个问题的目的，事实上我必须管理一些 1bit 单色图像。

答案是：

*   GD 在 PHP 网站上没有很好的记录。
*   当您想从头开始创建图像时，您必须使用`imagecreate()`或`imagecreatetruecolor()`
*   似乎刚才提到的两种方法（函数）都无法从头开始创建 1bit 图像。
*   我通过创建一个外部图像来解决，1bit 单色 png，用`imagecreatefrompng()`.

[另外：我刚刚从这里Official Bitbucket Repository](https://bitbucket.org/libgd/gd-libgd/downloads)下载了官方库开源代码

我发现了`gd.h`什么？：

上面提到的函数的定义：

```
/* Functions to manipulate images. */

/* Creates a palette-based image (up to 256 colors). */
BGD_DECLARE(gdImagePtr) gdImageCreate (int sx, int sy);

/* An alternate name for the above (2.0). */
 \#define gdImageCreatePalette gdImageCreate

/* Creates a truecolor image (millions of colors). */
BGD_DECLARE(gdImagePtr) gdImageCreateTrueColor (int sx, int sy); 
```

所以“官方”的解决方案是：用`imagecreate()`（包装了`gdImageCreate()`GD 函数）创建一个 2 色调色板图像。

“替代”解决方案是创建一个外部图像，1位单色png，`imagecreatefrompng()`就像我上面所说的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-31T00:15:44.363

要在没有 gd 或 imagemagick 的情况下创建单色位图图像，您可以使用[pack](https://www.php.net/manual/en/function.pack.php)将机器字节顺序转换为小端字节顺序和一些用于处理字符串的函数，作为参考和更多详细信息，您可以查看 Wikipedia 页面[位图文件格式](https://en.wikipedia.org/wiki/BMP_file_format)或此脚本在[3v4l](https://3v4l.org/QJ3Lu)上。

对于这个例子，我将使用更复杂的输入，这只是为了更好地解释在创建位图时每行应该如何对齐；

```
<?php
$pixelDataArray = array(
    "11101010111",
    "10101010101",
    "11101110111",
    "10001010100",
    "10001010100",
); 
```

首先要将输入转换为像素数组或位图数据，像素数组上的每一行都应该是 dword/32bit/4bytes 对齐的。

```
$pixelWidth = strlen($pixelDataArray[0]);
$pixelHeight = count($pixelDataArray);

$dwordAlignment = 32 - ($pixelWidth % 32);
if ($dwordAlignment == 32) {
    $dwordAlignment = 0;
}
$dwordAlignedLength = $pixelWidth + $dwordAlignment; 
```

现在我们可以正确对齐字符串，然后将其转换为 1 字节整数数组，然后转换为二进制字符串。

```
$pixelArray = '';
foreach (array_reverse($pixelDataArray) as $row) {
    $dwordAlignedPixelRow = str_pad($row, $dwordAlignedLength, '0', STR_PAD_RIGHT);
    $integerPixelRow = array_map('bindec', str_split($dwordAlignedPixelRow, 8));
    $pixelArray .= implode('', array_map('chr', $integerPixelRow));
}
$pixelArraySize = \strlen($pixelArray); 
```

然后让我们建立颜色表

```
$colorTable = pack(
    'CCCxCCCx',
    //blue, green, red
    255,  255,   255, // 0 color
    0,    0,     0    // 1 color
);
$colorTableSize = \strlen($colorTable); 
```

现在将使用位图信息头，为了更好地支持 BITMAPINFOHEADER（40 字节头）。

```
$dibHeaderSize = 40;
$colorPlanes = 1;
$bitPerPixel = 1;
$compressionMethod = 0; //BI_RGB/NONE
$horizontal_pixel_per_meter = 2835;
$vertical_pixel_per_meter = 2835;
$colorInPalette = 2;
$importantColors = 0;
$dibHeader = \pack('VVVvvVVVVVV', $dibHeaderSize, $pixelWidth, $pixelHeight, $colorPlanes, $bitPerPixel, $compressionMethod, $pixelArraySize, $horizontal_pixel_per_meter, $vertical_pixel_per_meter, $colorInPalette, $importantColors); 
```

最后一部分是文件头

```
$bmpFileHeaderSize = 14;
$pixelArrayOffset = $bmpFileHeaderSize + $dibHeaderSize + $colorTableSize;
$fileSize = $pixelArrayOffset + $pixelArraySize;
$bmpFileHeader = pack('CCVxxxxV', \ord('B'), \ord('M'), $fileSize, $pixelArrayOffset); 
```

现在只需将所有内容连接成一个字符串即可使用。

```
$bmpFile = $bmpFileHeader . $dibHeader . $colorTable . $pixelArray;
$bmpBase64File = base64_encode($bmpFile);
?>
<img src="data:image/bitmap;base64, <?= $bmpBase64File ?>" style="image-rendering: crisp-edges;width: 100px;"/> 
```

```
<img src="data:image/bitmap;base64, Qk1SAAAAAAAAAD4AAAAoAAAACwAAAAUAAAABAAEAAAAAABQAAAATCwAAEwsAAAIAAAAAAAAA////AAAAAACKgAAAioAAAO7gAACqoAAA6uAAAA==" style="image-rendering: crisp-edges;width: 100px;height: ;"/>
```

# php - PHP从文本区域列表中删除不需要的字符

> ID：11167708
> 
> 赞同：0
> 
> 时间：2012-06-23T07:24:25.590
> 
> 标签：php

我有一个通过表单提交的文本区域。

然后我从中得到文本：

```
$textArea = $_POST['my_textarea']; 

$textArea's content is this:

myemail1.com=somethinge
myemail2.com=somethingelse
myemail3.com=somethingel 
```

我的问题是我需要去掉 = 符号后的所有字符。

因此，一旦完成，它应该如下所示：

```
myemail1.com
myemail2.com
myemail3.com 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:40:20.597

```
$emails = array();

$temp = explode("\r\n", $_POST['my_textarea']);
foreach ($temp as $line)
{
    $tmp = explode("=", $line);
    $emails[] = $tmp[0];
}

print_r($emails); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T07:42:22.293

如果电子邮件都在各自的行中，则此 preg_replace 应该为您去除所有多余的部分：

```
$cleanEmails = preg_replace( "/(\.[a-z]{2,4})=.*$/", "$1", $textArea ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T07:51:11.667

这是另一种方式：

```
$emails = array_keys(parse_ini_string($textarea)); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-23T07:40:51.093

我认为这会帮助你[http://www.w3schools.com/php/func_string_explode.asp](http://www.w3schools.com/php/func_string_explode.asp)

# php - PHP OOP 有很多 setter、getter

> ID：11167709
> 
> 赞同：13
> 
> 时间：2012-06-23T07:24:30.577
> 
> 标签：php, oop, getter-setter

我需要创建大约。5-7个类，每个类将包含很多成员（假设每个类将包含20个成员）。我可以使用公共访问来创建它们，例如：

```
class A {
    public $myPropertyOne = '';
    public $myPropertyTwo = '';
    ...
} 
```

当然，我更喜欢将这些成员设为私有并为每个属性创建 get/set 方法。IE

```
class A {
    private $myPropertyOne = '';
    private $myPropertyTwo = '';

    public function getMyPropertyOne() {
            return $this->myPropertyOne;
    }

    public function setMyPropertyOne($myPropertyOne) {
            $this->myPropertyOne = $myPropertyOne;
    }

    public function getMyPropertyTwo() {
            return $this->myPropertyTwo;
    }

    public function setMyPropertyTwo($myPropertyTwo) {
            $this->myPropertyTwo = $myPropertyTwo;
    }
} 
```

但考虑到一个类会有 20 个属性，我将在此之外添加 40 个方法。我在这里担心的是这将如何减慢脚本的速度以及这将需要更多的内存（请记住，我将有几个这样的类）。

另一种解决方案可能是使用魔术函数 __set、__get 但我不想这样做，因为开发 IDE 中的代码完成不会建议对我至关重要的属性。

如果这将是一种编译语言（如 C++），我不会有任何问题，并且会使用带有 getter、setter 的解决方案，但由于 PHP 是解释性语言，我对我的脚本感兴趣，以使用更少的 RAM 并尽可能快。

在此先感谢，对这个问题的任何想法将不胜感激！

* * *

**我的意见**

谢谢大家的回答，我只是想分享我的意见，以防有人会寻找这个问题的答案。

我不能完全同意那些说你不应该关心性能的人，因为这是优化器的任务，我认为这是一个重要因素（至少对我而言），当我们处理 PHP 等解释性语言时，我们将始终必须考虑内存和速度（这一切都让我想起了我为 DOS 开发系统应用程序的时候，呵呵 :) 而且你总是受限于糟糕的 CPU 和千字节的总 RAM，所以如果你能节省额外的钱，你会很高兴byte)，在 PHP 开发中，无论添加多少台服务器，您都拥有相同的画面，用户数将始终更高，因此您始终必须决定是否要遵循经典/安全/正确的方法或避免这种情况和在速度或内存方面获得一些收益。

所以....我的观点是，这里最好的方法是对所有成员使用公共访问，并避免对所有属性使用 getter/setter，并使用私有访问和 get/set 方法对需要数据验证或初始化的属性进行访问被设置。

例如：

```
class B {
    public $myPropertyOne = '';
    public $myPropertyTwo = '';
    private $myPropertyThree = array();

    public function getMyPropertyThree() {
        return $this->myPropertyThree;
    }

    public function setMyPropertyThree($val) {
        if(!is_array($val)) {
            return;
        }

        $this->myPropertyThree = $val;
    }
} 
```

感谢您花时间回答我的问题！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T07:51:12.087

简单测试显示实例占用相同数量的内存，不受类中方法数量的影响：

没有方法的类：

```
class Test1 { } 
```

具有 20 种方法的类：

```
class Test2 {

    function test1() { return true; }
    function test2() { return true; }
    function test3() { return true; }
    function test4() { return true; }
    function test5() { return true; }
    function test6() { return true; }
    function test7() { return true; }
    function test8() { return true; }
    function test9() { return true; }
    function test10() { return true; }
    function test11() { return true; }
    function test12() { return true; }
    function test13() { return true; }
    function test14() { return true; }
    function test15() { return true; }
    function test16() { return true; }
    function test17() { return true; }
    function test18() { return true; }
    function test19() { return true; }
    function test20() { return true; }

} 
```

测试循环，两个测试相同：

```
$test = array();
$base = memory_get_usage();
for ($i = 0; $i < 10000; $i++) {
    $test[] = new ClassToBeTested();
}
$used = memory_get_usage() - $base;
print("used: $used\n"); 
```

Test1 类的结果（无方法）：

```
used: 3157408 
```

Test2 类的结果（20 种方法）：

```
used: 3157408 
```

我已经在两个单独的脚本中运行它，因为在一个脚本中运行这两个测试显然暴露了一些 PHP 内部分配，并且第二个测试消耗的内存比第一个测试少，无论哪个是第一个或第二个。

虽然您肯定会为实际的类定义占用更多内存，但显然每个类只产生一次成本，而不是每个实例。您不必担心内存使用情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-23T07:52:05.823

> 但考虑到一个类将有 20 个属性

拥有这么多属性通常表明信息放错了地方。检查您是否可以将其中一些分组到自己的类中。

*   [重构：提取类](http://sourcemaking.com/refactoring/extract-class)

> 除了这个之外，我还有 40 种方法。

一点也不。除非这些类是哑数据结构，否则您不希望它们上有任何 Getter 和 Setter，因为它们会破坏封装。将方法放入您告诉对象执行操作的公共 API 中。

*   [消气剂](http://martinfowler.com/bliki/GetterEradicator.html)
*   [Getter 和 Setter 是邪恶的](http://www.javaworld.com/javaworld/jw-09-2003/jw-0905-toolbox.html)
*   [告诉不要问](http://pragprog.com/articles/tell-dont-ask)

> 我在这里担心的是这将如何减慢脚本的速度以及这将需要更多的内存（请记住，我将有几个这样的类）。

这不是问题。

*   [在 PHP 中，对象方法代码是否在实例之间重复或共享？](https://stackoverflow.com/questions/7828515/in-php-are-objects-methods-code-duplicated-or-shared-between-instances)

> 另一种解决方案可能是使用魔术函数 __set、__get 但我不想这样做，因为开发 IDE 中的代码完成不会建议对我至关重要的属性。

现代 IDE 可以自动完成魔术方法。

*   [使用魔术时的私有/受保护成员变量的代码完成 __get()](https://stackoverflow.com/questions/3814733/code-completion-for-private-protected-member-variables-when-using-magic-get/3815198#3815198)

但是，如果您已经在关注微观级别的性能，那么您不需要魔术方法，因为它们肯定会更慢。

*   [__get/__set/__call 使用 PHP 的性能问题](https://stackoverflow.com/questions/3330852/get-set-call-performance-questions-with-php)

除此之外，魔术方法不是 getter 和 setter 的替代品，而是在调用不可访问的属性或方法时触发的错误处理程序。

*   [PHP __get 和 __set 魔术方法](https://stackoverflow.com/questions/4713680/php-get-and-set-magic-methods/4713720#4713720)

此外，魔术方法并不明显，并且使 API 难以阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T08:52:27.937

要使通过魔术方法实现的类的属性被 IDE 突出显示，只需使用@property PHPDoc`@property`标记，如下所示：

```
<?php
/**
* @property int id Blog post ID
* @property string title Blog post Title
*/
class Post {

} 
```

更多关于 PHPDoc 的@property 在这里： http: [//manual.phpdoc.org/HTMLSmartyConverter/PHP/phpDocumentor/tutorial_tags.property.pkg.html](http://manual.phpdoc.org/HTMLSmartyConverter/PHP/phpDocumentor/tutorial_tags.property.pkg.html)

至于其他问题 - Karoly Horvath 的评论完全涵盖了那些[PHP OOP 的很多 setter、getter](https://stackoverflow.com/questions/11167709/php-oop-a-lot-of-setters-getters#comment14648494_11167709)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T08:16:50.400

如前所述，你的类应该有这么多属性是很奇怪的。但是，它有时（尽管很少）会发生。但通常，这些属性应该有某种链接在一起：因此您可以将它们存储在哈希图中而不是属性中。然后你只需要一种方法作为吸气剂。

现在，它肯定会消耗更多资源，真的。至于自动完成，请使用常量：您只需键入以下内容：

```
 $my_class->getFromHashMap($parameter) 
```

并且在键入参数时，您将使用存储在类中的常量：在这里，自动完成应该能够帮助您。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T08:13:23.993

请记住，我的代码认为属性的名称已以小写形式声明...

```
 <?php

    class Modelo {
        var $attr1 = "default";
        var $attr2 = 0;

        public function __call($name, $arguments)
        {
            if (method_exists($this, ($method = $name))){
                return $this->$method();
            }
            else{       
                $attribute = split("get",$name);
                if(count($attribute)==2){
                    $attribute = strtolower($attribute[1]);
                    if(isset($this->$attribute)){
                        return ($this->$attribute);
                    }
                }else{
                    $attribute = split("set",$name);
                    if(count($attribute)==2){
                        $attribute = strtolower($attribute[1]);
                        if(isset($this->$attribute) && count($arguments)==1){
                            $this->$attribute=$arguments[0];
                        }else{
                            die("$name number of arguments error: ".join($arguments,","));
                        }
                    }else{
                        die("$name doesn't exist!");
                    }               
                }           
            }
        }

    }

    echo "<pre>";
    $m = new Modelo();
    print_r(
        array(
            "objetct"=>$m
            ,"getAttr1"=>$m->getAttr1()
            ,"getAttr2"=>$m->getAttr2()
        )
    );
    echo "setAttr1\n";
    $m->setAttr1("by set method");
    print_r(
        array(
            "objetct"=>$m
            ,"getAttr1"=>$m->getAttr1()
            ,"getAttr2"=>$m->getAttr2()
        )
    );

    ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-25T07:24:36.623

你可以试试这个：

特征 get_set {

```
public function set($what, $value)
{
    $this->{$what} = $value;
}

public function get($what)
{
    return $this->{$what};
} 
```

}

它将适用于公共和受保护的变量。您可以添加 if(!isset($this->{$what})error()

# hash - 纯 lua 哈希、RIPEMD160 还是 SHA2？

> ID：11167713
> 
> 赞同：2
> 
> 时间：2012-06-23T07:25:51.217
> 
> 标签：hash, lua, sha2, ripemd

在纯lua中是否有这些哈希算法的实现？我为 MD5 和 SHA1 找到了一对，但没有找到这两个是我在项目中需要的。出于可移植性的考虑，我需要纯 lua 中的东西。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T08:27:05.077

Lua 的[lmd5](http://www.tecgraf.puc-rio.br/~lhf/ftp/lua/#lmd5)库声明：**基于 OpenSSL 的 Lua 消息摘要库。它支持MD2、MD4、MD5、SHA1、SHA2、RIPEMD160、MDC2。**虽然我从来没有用过。但是这里[列出了](http://lua-users.org/wiki/CryptographyStuff)一些库。你可能其中之一有用。

这是另一个可能是您所寻求的[库。](http://lua-users.org/wiki/SecureHashAlgorithm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:01:30.830

如果您使用 LuaJIT，我在这里编写了 SHA256 的实现，但它使用 FFI ctypes：[https ://github.com/catwell/cw-lua/tree/master/sha256](https://github.com/catwell/cw-lua/tree/master/sha256)

否则，我还没有测试过纯 Lua 5.2 中的一个：http: [//lua-users.org/wiki/SecureHashAlgorithm](http://lua-users.org/wiki/SecureHashAlgorithm)（已经被 Dream Eater 引用）。

# sencha-touch-2 - 对 Sencha 中 List 中的特定项目执行一些操作

> ID：11167716
> 
> 赞同：0
> 
> 时间：2012-06-23T07:27:06.727
> 
> 标签：sencha-touch-2

当我单击删除按钮时，我面临的问题是我无法从列表中删除任何行或多行。这是我的代码：

```
 {
        xtype: 'list',
        store: "Plays",
        itemId:"playsList",
        mode: 'MULTI',
        loadingText: "Loading PlaysList...",
        emptyText: '<div class="notes-list-empty-text">No PlayList found.</div>',
        itemTpl: '<div class="list"><div class="list-item-title">{title}</div><div class="list-item-narrative">{duration}</div><div class="list-item-hide">{hidden}</div></div>',      
        itemSelector: 'div.list',

   },
    {
                    xtype: "button",
                    iconCls: "trash",
                    iconMask: true,
                    itemId: "deleteButton"
            },

   onDeleteButtonTap: function () {
        //console.log("deleteNoteCommand");//How to get value of recored from playlist

    this.fireEvent("deleteNoteCommand", this);
}, 
```

现在我选择任何行并单击删除按钮然后我如何获取所选项目或行的值并通过点击按钮执行一些操作。像这里我正在删除选定的行控制器

```
 Ext.define("PlayListApp.controller.Plays", {
      extend: "Ext.app.Controller",
    config: {
         refs: {
        // We're going to lookup our views by xtype.
        notesListView: "playslistview",
         notesList: "#playsList",
  },
  },
   onDeleteNoteCommand: function () {
      console.log("onDeleteNoteCommand");

    var noteEditor = this.getNotesList();
    console.log(noteEditor);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:56:16.207

当您在选择列表记录后点击按钮时，您可以使用以下代码获取所选列表记录

```
 var record= this.getNotesList().getSelection()[0]; 
```

此代码为您提供选择的记录，之后您可以使用以下代码从存储中删除记录

```
this.getNotesList().getStore().remove(record);//bracket in here too.... 
```

# asp.net - 如何在asp.net中检索以post方法发送的值

> ID：11167717
> 
> 赞同：0
> 
> 时间：2012-06-23T07:27:13.133
> 
> 标签：asp.net

我试图从以前的表单中获取一个值，通常是在 php 中，它会这样写

```
$name= $_POST ["Username"];
$pass= $_POST ["Password"]; 
```

我怎样才能在asp.net中写这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:32:53.123

如果你使用 GET

```
string usrnm = Request.QueryString["username"];
string pass = Request.QueryString["password"]; 
```

如果你使用 POST

```
 string usrnm = Request.Form["username"];
 string pass = Request.Form["password"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T07:30:31.300

在网络表单中

```
if (Page.IsPostBack)
{
  //access posted input as
    Request.Form["input1"]
    Request.Form["input2"]
    Request.Form["input3"]
} 
```

在 mvc 中

```
[HttpPost]
 public ActionResult myaction(strig input1,strig input1,strig input1)
        { 
            //you can access your input here
            return View();
        } 
```

或者如果你有它的视图模型，它能够接受 3 个输入作为

```
public class myViewmodleclass()
{
    public string input1{get;set;}
    public string input2{get;set;}
    public string input3{get;set;}
} 
```

控制器动作

```
[HttpPost]
public ActionResult myaction(myViewmodleclass mymodelobject)
{ 
  //you can access your input here
  return View();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T07:37:34.497

所以你使用 mvc，它有一个很好的模型绑定。

因此，您正在使用具有良好模型绑定的 mvc。您可以简单地拥有一个适当的模型对象。对于你的例子

```
public class LoginInfo()
{
    public string UserName{get;set;}
    public string Password {get;set;}
} 
```

在你的控制器中

```
[HttpPost] 
public ActionResult Logon(LoginInfo loginInfo )
{
   // Do stuff with loginInfo
} 
```

# android - Android：滚动和无滚动壁纸问题

> ID：11167723
> 
> 赞同：2
> 
> 时间：2012-06-23T07:28:18.503
> 
> 标签：android, wallpaper

我对设置墙纸有点困惑，在我的银河系中，如果我通过代码设置墙纸，则默认情况下它不会滚动，但如果 galary 设置墙纸，则它会滚动

[避免墙纸跨越 5 个屏幕](https://stackoverflow.com/questions/6846539/avoid-a-wallpaper-to-stretch-across-5-screens-in-android)

这取决于家庭午餐应用程序，但我如何管理在我的代码中禁用的滚动功能

```
// the content of our screen.
    setContentView(R.layout.wallpaper_2);
    final WallpaperManager wallpaperManager = WallpaperManager
            .getInstance(this);
    final Drawable wallpaperDrawable = wallpaperManager.getDrawable();
    final ImageView imageView = (ImageView) findViewById(R.id.imageview);
    imageView.setDrawingCacheEnabled(true);
    imageView.setImageDrawable(wallpaperDrawable);

    Button randomize = (Button) findViewById(R.id.randomize);
    randomize.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            int mColor = (int) Math.floor(Math.random() * mColors.length);
            wallpaperDrawable.setColorFilter(mColors[mColor],
                    PorterDuff.Mode.MULTIPLY);
            imageView.setImageDrawable(wallpaperDrawable);
            imageView.invalidate();
        }
    });

    Button setWallpaper = (Button) findViewById(R.id.setwallpaper);
    setWallpaper.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            try {
                wallpaperManager.setBitmap(imageView.getDrawingCache());
                finish();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }); 
```

[wallpaperwizardrii](https://play.google.com/store/apps/details?id=com.twistedapps.wallpaperwizardrii&hl=en)应用程序支持滚动和不滚动功能，这意味着它是可能的，但是在投入了这么多时间之后我没有得到解决方案。

我尝试设置`wallpaperManager.setWallpaperOffsetSteps(xStep, yStep);`但无法获得结果我是否缺少任何我不知道的 api

帮助我提前谢谢...

**编辑：**我正在从下面的代码中在我的手机中设置一个壁纸，它的结果是好的，因为我的手机中有 ICS，但在模拟器中它被拉伸了。

```
WallpaperManager wallpaperManager = WallpaperManager.getInstance(this);

    Bitmap bitmap = BitmapFactory.decodeResource(getResources(),
            R.drawable.dashboard);
    Bitmap useThisBitmap = Bitmap.createScaledBitmap(bitmap,
            wallpaperManager.getDesiredMinimumWidth(),
            wallpaperManager.getDesiredMinimumHeight(), true);
    bitmap.recycle();

    try {
        wallpaperManager.setBitmap(useThisBitmap);
    } catch (IOException e) {
        e.printStackTrace();
    }

    Log.e("", "Width : " + wallpaperManager.getDesiredMinimumWidth());
    Log.e("", "Height : " + wallpaperManager.getDesiredMinimumHeight()); 
```

和offset有关系吗？？

# css - CSS - 没有表格的图像和长文本的垂直对齐

> ID：11167728
> 
> 赞同：0
> 
> 时间：2012-06-23T07:29:32.243
> 
> 标签：css, vertical-alignment

好的，我知道这里有很多关于这个的问题，应该是重复的，但老实说，我已经阅读了很多，每个都有它的特定案例/标记 - 我仍然无法正确...

我在小部件区域中有一个带有可能很长的文本的小图像。我需要进行中心对齐，并且当文本高于图像时，仍要与中心对齐（即使“高于”图像）-

小提琴在这里：http: [//jsfiddle.net/as8xW/](http://jsfiddle.net/as8xW/)

我正在寻找一个通用解决方案跨浏览器并且没有表格

**编辑我**

更新答案后 - 我偶然发现并修改了一个可能的黑客（jQuery）

这个脚本将做的实际上是将有问题的元素包装在表格标记中 - 从而将它们转换为 IE 的实际表格。

所以假设我们有

```
.table     { display: table; }
.trow  { display: table-row; }
.tcell { display: table-cell; } 
```

我们的确是 ：

```
$(document).ready(function(){
  if ($.browser.msie && $.browser.version == 7)
  {
    $(".tcell").wrap("<td />");
    $(".trow").wrap("<tr />");
    $(".table").wrapInner("<table />");
  }
}); 
```

将上述脚本与 biziclop 提供的解决方案一起使用 - 使其适用于我的测试......

**编辑二**

@biziclop 解决方案 VR2 完美运行，从而使我的编辑过时（或至少没有必要）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:36:18.437

**V1：使用表格单元格**

[http://jsfiddle.net/as8xW/4/](http://jsfiddle.net/as8xW/4/)

要使用，我必须在周围`table-cell`放置一个包装器，因为即使ing 也无法更改图像大小以匹配其他单元格。`span``img``table-cell`

```
li: table-row
  span: table-cell, vertical-align:middle
    img
  a:   table-cell, vertical-align:middle 
```

**V2：使用内联块，一些固定宽度，适用于 IE6**

[http://jsfiddle.net/as8xW/10/](http://jsfiddle.net/as8xW/10/)

```
li: block: FIXED WIDTH
  span: inline block (with IE treatment)
    img
  a:    inline block with FIXED WIDTH not to drop below the image 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T08:45:26.010

你可以试试这个

html:

```
<div class="sidebar-box">
    <ul>
        <li>
            <div class="left-col">
                <img src="http://placehold.it/50x50" height="50" width="50">
            </div>
            <div class="right-col">
                <a href="http://localhost/wp-sandbox/?p=283" title="Results Photography">
                    Results Photography Results Photography Results Photography Results Photography Results Photography Results Photography Results Photography Results Photography Results Photography 
                </a> 
            </div>
        </li>
    </ul>
</div> 
```

css

```
.sidebar-box {
    margin-bottom: 20px;
    float: left;
    width: 45%;
}

.sidebar-box img {
}

.sidebar-box li {
    margin: 0;
    display: block;
    overflow: hidden;
    zoom: 1;

}

.left-col {
    display: table-cell;
    vertical-align: middle;
    _float: left;
    *float: left;
    width: 65px;
    *margin-top: expression((parentNode.offsetHeight.offsetHeight/2)-(parseInt(this.offsetHeight)/2) <0 ? "0" :(parentNode.offsetHeight/2)-(parseInt(this.offsetHeight)/2) +'px');
}
.right-col {
    display: table-cell;
    vertical-align: middle;
    _float: left;
    *float: left;
    *margin-top: expression((parentNode.offsetHeight.offsetHeight/2)-(parseInt(this.offsetHeight)/2) <0 ? "0" :(parentNode.offsetHeight/2)-(parseInt(this.offsetHeight)/2) +'px'); 
} 
```

小提琴链接[http://jsfiddle.net/cKmQ9/](http://jsfiddle.net/cKmQ9/)但它可以在 IE6 中导致小提琴错误，最好在新文档上尝试。

# delphi - 在 Delphi 7 中使用 TScreen

> ID：11167736
> 
> 赞同：8
> 
> 时间：2012-06-23T07:31:33.973
> 
> 标签：delphi, delphi-7

我的 Delphi-7 应用程序显示：

```
Screen.DesktopWidth  
Screen.DesktopHeight  
Screen.Monitors[0].Width  
Screen.Monitors[0].Height 
```

并且，如果选择了第二台显示器，还：

```
Screen.Monitors[1].Width  
Screen.Monitors[1].Height 
```

随着应用程序在我的 WinXP-Pro PC 上运行，我转到控制面板/显示/设置，然后更改第二台显示器的设置（添加或删除）。

然后我单击刷新按钮以显示 4 个（或 6 个）参数的新值，并且发生了一些意想不到的事情：Screen.DesktopWidth 和 Screen.DesktopHeight 显示正确的新值，但其他 2 个（或 4 个）的值参数很不对。

像 Screen.Monitors[0].Width = 5586935 一样，它应该是 1680 。

在 Delphi 7 中使用 TScreen 是否有一些特殊规则？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-14T03:23:12.160

由于连接或断开显示器或 USB 显示设备时 TScreen 的刷新问题（错误）而来到这里。@Dave82 的答案对我不起作用。MonitorFromWindow 函数的结果必须返回另一个值（未知/无效值）以强制更新 TScreen 对象。

下面的这个作弊可以解决问题：

确保 multimon 在**uses**子句中：

```
uses
 multimon; 
```

将此添加到**界面**部分（表单）

```
protected
procedure WMDeviceChange(var Msg: TMessage); message WM_DEVICECHANGE; 
```

将此添加到**实现**部分（形式）

```
 function cheatMonitorFromWindow(hWnd: HWND; dwFlags: DWORD): HMONITOR; stdcall;
    begin
      // Does nothing, returns zero to force invalidate
     Result:=0;
    end;

    procedure TForm1.WMDeviceChange(var Msg: TMessage);
    var
     iCurrDisplayCount    : LongInt;
     iNewDisplayCount     : LongInt;
     pMonitorFromWinProc  : TMonitorFromWindow;

    begin
     iCurrDisplayCount:=Screen.MonitorCount;
     // Force monitor update, fix bug in customform, won't update at display change.
     // This a hack/cheat to multimon MonitorFromWindow func, it's fakes the result.
     // This is required to tell customform.getMonitor() to update the TScreen object.
     pMonitorFromWinProc:=MonitorFromWindow;      // Backup pointer to dynamic assigned DLL func  
     MonitorFromWindow:=cheatMonitorFromWindow;   // Assign cheat func 
     monitor;                                     // call the monitor property that calls customform.getMonitor and cheatfunc
     MonitorFromWindow:=pMonitorFromWinProc;      // restore the original func
     // ==========
     iNewDisplayCount:=Screen.MonitorCount;
     if( iCurrDisplayCount <> iNewDisplayCount ) then
     begin
       // Display count change!
     end;  
end; 
```

customform 内部发生了什么（Forms.pas 中的代码）？

```
function TCustomForm.GetMonitor: TMonitor;
var
  HM: HMonitor;
  I: Integer;
begin
  Result := nil;
  HM := MonitorFromWindow(Handle, MONITOR_DEFAULTTONEAREST);
  for I := 0 to Screen.MonitorCount - 1 do
    if Screen.Monitors[I].Handle = HM then
    begin
      Result := Screen.Monitors[I];
      Exit;
    end;

  //if we get here, the Monitors array has changed, so we need to clear and reinitialize it
  for i := 0 to Screen.MonitorCount-1 do
    TMonitor(Screen.FMonitors[i]).Free;
  Screen.FMonitors.Clear;
  EnumDisplayMonitors(0, nil, @EnumMonitorsProc, LongInt(Screen.FMonitors));
  for I := 0 to Screen.MonitorCount - 1 do
    if Screen.Monitors[I].Handle = HM then
    begin
      Result := Screen.Monitors[I];
      Exit;
    end;    
end; 
```

希望当有人在寻找这个时它会有所帮助。当您想要检测显示设备设置更改（分辨率和方向）时，请改为捕获 WM_DISPLAYCHANGE 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-08T12:35:38.507

如果您在程序运行时切换用户，则 Screen.Monitors 数组包含无效值。我们使用这行代码来强制 Screen 对象更新列表：

```
Screen.MonitorFromWindow(0, mdNull); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T12:50:15.483

感谢 TLama，我在 Delphi 7 中找到了 TScreen 问题的解决方法。

“导致”问题的原始代码：

```
LabMon1.Caption := ' Mon 1: ' + IntToStr (Screen.Monitors[0].Width) +
                   ' x ' + IntToStr (Screen.Monitors[0].Height);

if (Screen.MonitorCount = 1)
then LabMon2.Caption := ' Mon 2: -'
else LabMon2.Caption := ' Mon 2: ' + IntToStr (Screen.Monitors[1].Width) +
                        ' x ' + IntToStr (Screen.Monitors[1].Height); 
```

我只需要添加 1 行代码来解决它：

```
LabMon1.Caption := ' Mon 1: ' + IntToStr (Monitor.Width) +
                   ' x ' + IntToStr (Monitor.Height) ;

LabMon1.Caption := ' Mon 1: ' + IntToStr (Screen.Monitors[0].Width) +
                   ' x ' + IntToStr (Screen.Monitors[0].Height);

if (Screen.MonitorCount = 1)
then LabMon2.Caption := ' Mon 2: -'
else LabMon2.Caption := ' Mon 2: ' + IntToStr (Screen.Monitors[1].Width) +
                        ' x ' + IntToStr (Screen.Monitors[1].Height); 
```

**因此，再次感谢 TLama**，感谢您对这个问题线程的巨大贡献！

# asp.net - 动态创建的 LinkBut tons 的 OnClick 事件不起作用

> ID：11167737
> 
> 赞同：0
> 
> 时间：2012-06-23T07:31:34.707
> 
> 标签：asp.net, ajax, onclick, modalpopupextender, linkbutton

我已经为这个问题尝试了几种解决方案，但都没有奏效。基本上，我有一张员工表，用户可以选择通过更新面板动态添加员工。每个员工都被添加为***LinkBut*** ​​ton ，此按钮将通过***OnClick事件触发******ajaxToolkit:modalpopupextender***窗口，此窗口将显示员工详细信息。问题是当我点击员工姓名时，弹出窗口会显示，**但**细节不会。

 ***这是我创建按钮并将其放入表中的代码：

```
LinkButton lbtn = new LinkButton();
                    lbtn.ID = employee_arry[i] + "_lbtn" + i;
                    lbtn.Text = employee_arry[i];
                    lbtn.Click += new EventHandler(this.employee_info);
                    lbtn.CausesValidation = false;
                    lbtn.Attributes.Add("runat", "server");
                    cell.Controls.Add(lbtn); 
```

这是employee_info方法：

```
//the info will be pulled from the database…
public void employee_info(object sender, EventArgs e)
    { 
        name.Text = "employee name";
        dept.Text = "employee department";
        jobt.Text = "employee job title";
        email.Text = "employee email";
        tel.Text = "employee telephone";
        ModalPopupExtender1.Show();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T07:38:14.480

检查这个答案

[https://stackoverflow.com/a/11127064/1268570](https://stackoverflow.com/a/11127064/1268570)

这解释了动态控件的行为

你需要考虑：

*   当您不使用母版页时，应在 PreInit 事件中创建动态控件，如果是，则在 Init 事件中创建控件
*   避免在这些事件中设置可以在每个帖子中更改的属性，因为当应用视图状态时（在帖子事件中），这些属性将被覆盖
*   每次发布页面时都必须创建动态控件，避免这种情况 if(!this.IsPostBack) this.CreatemyDynamicControls();
*   当您在 PreInit 或 Init 事件中创建控件时，它们的状态将在 post 事件中自动设置，这意味着在 LoadComplete 事件中，您的控件将包含它们的状态，即使您在每个 post 中再次创建它们，即使您做了没有明确设置他们的状态。*请注意，当您处理在设计时创建的控件时，此行为是不同的，在这种情况下，已设置状态的事件是 Load 事件*
*   事件订阅应该在 PageLoadComplete 之前发生，否则它们不会被引发

## 编辑 1

如果您还没有找到解决方案，这是一种方法（完整的工作示例）：

### ASPX

```
 <asp:ScriptManager runat="server" />
    <asp:UpdatePanel ID="UpdatePanel1" runat="server" ViewStateMode="Enabled">
        <ContentTemplate>
            <asp:Panel runat="server" ID="myPanel">
            </asp:Panel><br />
            <asp:Button ID="Button1" Text="add control" runat="server" OnClick="addControl_Click" /><br />
            <asp:Label ID="lblMessage" runat="server" />
        </ContentTemplate>
    </asp:UpdatePanel> 
```

### 代码背后

```
 protected int NumberOfControls
    {
        get
        {
            if (ViewState["c"] == null)
            {
                return 0;
            }

            return int.Parse(ViewState["c"].ToString());
        }
        set
        {
            ViewState["c"] = value;
        }
    }

    protected void addControl_Click(object sender, EventArgs e)
    {
        this.NumberOfControls++;
        this.myPanel.Controls.Add(new Literal { Text = "<br />" });
        this.myPanel.Controls.Add(this.CreateLinkButton(this.NumberOfControls));
    }

    protected void Page_PreLoad(object sender, EventArgs e)
    {
        this.CreateDynamicLinkButtons();
    }

    private void CreateDynamicLinkButtons()
    {
        for (int i = 0; i < this.NumberOfControls; i++)
        {
            this.myPanel.Controls.Add(new Literal { Text = "<br />" });
            this.myPanel.Controls.Add(this.CreateLinkButton(i + 1));
        }
    }

    private LinkButton CreateLinkButton(int index)
    {
        var l = new LinkButton { Text = "MyLink" + index.ToString(), ID = "myLinkID" + index.ToString() };
        l.Click += (x, y) =>
        {
            this.lblMessage.Text += "<br/>ID: " + (x as LinkButton).ID;
        };

        return l;
    } 
```

### 输出

![在此处输入图像描述](../Images/3a09d8e9f7152c1e784d2a6a559f76a4.png)***

# iphone - iphone：Facebook 注销功能在我的应用程序中不起作用

> ID：11167743
> 
> 赞同：-4
> 
> 时间：2012-06-23T07:32:20.233
> 
> 标签：iphone, xcode, facebook, ios5

> **可能重复：**
> [iphone：facebook 注销功能不起作用](https://stackoverflow.com/questions/11167593/iphone-facebook-logout-feature-does-not-working)

我正在通过 FBConnect 实现 FB 集成当我按下注销按钮时，它不是从 Fb 注销它只显示以前的登录。我的代码如下：

```
- (void)viewWillAppear:(BOOL)animated
{

    [super viewWillAppear:animated];
    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    if (![[delegate facebook] isSessionValid]) {

    } else {
        [self showLoggedIn];
    }

}

- (IBAction)postMessageToWall:(id)sender {

        currentAPICall = kDialogFeedUser;
        SBJSON *jsonWriter = [[SBJSON new] autorelease];

        NSArray* actionLinks = [NSArray arrayWithObjects:[NSDictionary dictionaryWithObjectsAndKeys:
                                                          @"TaxSmart Hello.",@"name",@"http://www.google.com",@"link", nil], nil];
        NSString *actionLinksStr = [jsonWriter stringWithObject:actionLinks];

        UIImage *img=[UIImage imageNamed:@"tick.png"];

        NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       @"Piyush here.", @"name",
                                       @"This is Great App.", @"caption",
                                       @"FuNNNN.", @"description",
                                       @"http://www.iTaxsmart.com/", @"link",
                                       img.CIImage, @"picture",
                                       actionLinksStr, @"actions",
                                       nil];

        AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
        [[delegate facebook] dialog:@"feed"
                          andParams:params
                        andDelegate:self];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T10:15:33.813

当您单击注销按钮调用波纹管方法时，它的工作但只需检查您的用户默认键..

```
- (void)fbDidLogout 
{    
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [facebook invalidateSession];
    [defaults removeObjectForKey:@"FBAccessTokenKey"];
    [defaults removeObjectForKey:@"FBExpirationDateKey"];
    [defaults synchronize];
} 
```

希望，这对你有帮助......

:)

# c++ - 如果数字小于“Max”数组中的相应数字，如何将数字添加到数组中？

> ID：11167747
> 
> 赞同：0
> 
> 时间：2012-06-23T07:33:34.167
> 
> 标签：c++, arrays, algorithm, comparison

所以这是我的问题。在下面的程序中，在函数“SetBoardStartingConfig”的底部，我尝试通过随机生成数字来填充数组的前 4 行，检查我试图将它们放置到的正方形是否为空（0） ，并且如果添加一块会使其超过数组“MaxPieces”中指定的最大值。如果它不会，理论上应该添加它 - 但它没有按我的预期工作，并给我带来有趣的价值。总的来说，我继续重复这个函数 10 次，但它似乎总是产生不同的错误 - 下面我也粘贴了一些结果。

注意：我已经注释掉了这两种算法来尝试这个，它们被一些空格隔开。

旁注：我第一次运行程序时似乎总是得到 FlagSide = 1 （右侧） - 关于如何解决这个问题的任何想法？

非常感谢大家的帮助:)。

```
#include <iostream>
#include <stdlib.h>
#include <string>

using namespace std;

int board[10][10];

int AIPieces[11];
int PlayerPieces[11];
int MaxPieces[11];
string PieceNames[11];

//insert stuff for maximum number of things

#define NullSpace -1  // Spaces that pieces can not move to
#define Flag -5
#define Bomb 1
#define EmptySpace 0 //Empty board spaces

void SetMaxPieces()
{
    MaxPieces[0] = 1;
    MaxPieces[Bomb] = 6;
    MaxPieces[2] = 8;
    MaxPieces[3] = 5;
    MaxPieces[4] = 4;
    MaxPieces[5] = 4;
    MaxPieces[6] = 4;
    MaxPieces[7] = 3;
    MaxPieces[8] = 2;
    MaxPieces[9] = 1;
    MaxPieces[10] = 1;
    MaxPieces[11] = 1; //Spy
}

void ResetAIPieces()
{
        for (int i = 0; i < 11; i++)
        AIPieces[i] = 0;
}

void SetPieceNames()
{
    PieceNames[0] = "Flags:";
    PieceNames[1] = "Bombs:";
    PieceNames[2] = "Twos:";
    PieceNames[3] = "Threes:";
    PieceNames[4] = "Fours:";
    PieceNames[5] = "Fives:";
    PieceNames[6] = "Sixes:";
    PieceNames[7] = "Sevens:";
    PieceNames[8] = "Eights:";
    PieceNames[9] = "Nines:";
    PieceNames[10] = "Tens:";
    PieceNames[11] = "Spies:";
}

void PrintBoard()
{   
    for (int i=0; i<10; i++)
    {
        for (int j=0; j<10; j++)
        {
            cout << board[i][j] << " ";
            if (board[i][j] >= 0)
            {
                cout << " ";
            }
        }
        cout << endl;
    }
}

void SetBoardStartingConfig()
{
    for (int i=0; i<10; i++)
    {
        for (int j=0; j<10; j++)
        {   
            board[i][j] = EmptySpace;
        }
    }
    //arrays work in [row] and [column].

    //below defines areas that the pieces can not move to.
    board[4][2] = NullSpace;
    board[4][3] = NullSpace;
    board[5][2] = NullSpace;
    board[5][3] = NullSpace;
    board[4][6] = NullSpace;
    board[4][7] = NullSpace;
    board[5][6] = NullSpace;
    board[5][7] = NullSpace;

    int FlagSide = rand() % 2;

    if (FlagSide == 0)
    {       
        board[0][0] = Flag;
        AIPieces[0]++;
        AIPieces[board[2][0] = Bomb]++;
        AIPieces[board[1][1] = Bomb]++;
        AIPieces[board[0][2] = Bomb]++;
        AIPieces[board[1][0] = rand() % 3 + 4]++;
        AIPieces[board[0][1] = rand() % 3 + 4]++;       
    }

    else if (FlagSide == 1)
    {
        board[0][9-0] = Flag;
        AIPieces[0]++;
        AIPieces[board[2][9-0] = Bomb]++;
        AIPieces[board[1][9-1] = Bomb]++;
        AIPieces[board[0][9-2] = Bomb]++;
        AIPieces[board[1][9-0] = rand() % 3 + 4]++;
        AIPieces[board[0][9-1] = rand() % 3 + 4]++; 
    }

    //for (int i =0; i < 4; i++)
    //      for (int j = 0; j < 10; j++)
    //      {
    //          if (board[i][j] == 0)
    //          {
    //              int Chosen = rand() % 10+1;
    //              if (AIPieces[Chosen] < MaxPieces[Chosen])
    //                  {
    //                  board[i][j] = Chosen;
    //                  AIPieces[Chosen]++;
    //              }
    //              else
    //                  break;
    //          }
    //          else
    //              break;

    //          //      if (AIPieces[0] < MaxPieces[0] || AIPieces[1] < MaxPieces[1] || AIPieces[2] < MaxPieces[2] || AIPieces[3] < MaxPieces[3] || AIPieces[4] < MaxPieces[4] || AIPieces[5] < MaxPieces[5] || AIPieces[5] < MaxPieces[5] || AIPieces[6] < MaxPieces[6] || AIPieces[7] < MaxPieces[7] || AIPieces[8] < MaxPieces[8] || AIPieces[9] < MaxPieces[9] || AIPieces[10] < MaxPieces[10] || AIPieces[11] < MaxPieces[11]) 
    //          //{
    //          //  AIPieces[board[i][j] = rand() % 10+1]++;        
    //          //}
    //      }
}

int main()
{
    SetMaxPieces();
    SetPieceNames();

    int loop = 0;

    do
    {
        SetBoardStartingConfig();
        PrintBoard();
        cout << endl; 

        for (int i = 0; i < 11; i++)
        {
                cout << PieceNames[i] << AIPieces[i] << endl;
        }
            cout << endl;

        ResetAIPieces();

        loop++;

    } while (loop <= 10);

    system("PAUSE");

} 
```

我的结果（每次我使用第一个算法运行它时它们似乎都是一样的）

```
1  10  5  9  0  0  0  1  5  -5
3  5  6  6  2  8  2  2  1  6
6  3  8  7  2  5  3  4  3  1
3  2  7  0  0  0  0  0  0  0
0  0  -1 -1 0  0  -1 -1 0  0
0  0  -1 -1 0  0  -1 -1 0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0

Flags:1
Bombs:4
Twos:5
Threes:5
Fours:1
Fives:4
Sixes:4
Sevens:2
Eights:2
Nines:1
Tens:1

2  9  10  3  8  0  0  1  4  -5
6  5  4  2  3  4  4  5  1  6
2  2  0  0  0  0  0  0  0  1
0  0  0  0  0  0  0  0  0  0
0  0  -1 -1 0  0  -1 -1 0  0
0  0  -1 -1 0  0  -1 -1 0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0

Flags:1
Bombs:3
Twos:4
Threes:2
Fours:4
Fives:2
Sixes:2
Sevens:0
Eights:1
Nines:1
Tens:1

8  8  10  4  2  0  0  1  5  -5
9  7  6  1  3  0  0  0  1  6
7  1  3  5  0  0  0  0  0  1
7  6  1  0  0  0  0  0  0  0
0  0  -1 -1 0  0  -1 -1 0  0
0  0  -1 -1 0  0  -1 -1 0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0

Flags:1
Bombs:6
Twos:1
Threes:2
Fours:1
Fives:2
Sixes:3
Sevens:3
Eights:2
Nines:1
Tens:1

-5 4  1  0  0  0  0  0  0  0
6  1  0  0  0  0  0  0  0  0
1  0  0  0  0  0  0  0  0  0
2  4  9  10  4  5  5  7  1  7
0  0  -1 -1 0  0  -1 -1 0  0
0  0  -1 -1 0  0  -1 -1 0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0

Flags:1
Bombs:4
Twos:1
Threes:0
Fours:3
Fives:2
Sixes:1
Sevens:2
Eights:0
Nines:1
Tens:1

-5 5  1  0  0  0  0  0  0  0
6  1  0  0  0  0  0  0  0  0
1  0  0  0  0  0  0  0  0  0
5  10  7  4  8  9  0  0  0  0
0  0  -1 -1 0  0  -1 -1 0  0
0  0  -1 -1 0  0  -1 -1 0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0

Flags:1
Bombs:3
Twos:0
Threes:0
Fours:1
Fives:2
Sixes:1
Sevens:1
Eights:1
Nines:1
Tens:1

-5 6  1  0  0  0  0  0  0  0
4  1  0  0  0  0  0  0  0  0
1  0  0  0  0  0  0  0  0  0
4  6  10  9  5  1  8  7  4  7
0  0  -1 -1 0  0  -1 -1 0  0
0  0  -1 -1 0  0  -1 -1 0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0

Flags:1
Bombs:4
Twos:0
Threes:0
Fours:3
Fives:1
Sixes:2
Sevens:2
Eights:1
Nines:1
Tens:1

3  1  10  8  4  8  3  1  6  -5
7  1  2  7  6  0  0  0  1  6
6  5  2  3  1  0  0  0  0  1
2  5  7  0  0  0  0  0  0  0
0  0  -1 -1 0  0  -1 -1 0  0
0  0  -1 -1 0  0  -1 -1 0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0

Flags:1
Bombs:6
Twos:3
Threes:3
Fours:1
Fives:2
Sixes:4
Sevens:3
Eights:2
Nines:0
Tens:1

8  8  0  0  0  0  0  1  5  -5
4  4  6  10  0  0  0  0  1  6
9  2  0  0  0  0  0  0  0  1
3  7  7  1  4  0  0  0  0  0
0  0  -1 -1 0  0  -1 -1 0  0
0  0  -1 -1 0  0  -1 -1 0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0

Flags:1
Bombs:4
Twos:1
Threes:1
Fours:3
Fives:1
Sixes:2
Sevens:2
Eights:2
Nines:1
Tens:1

-5 4  1  0  0  0  0  0  0  0
6  1  0  0  0  0  0  0  0  0
1  0  0  0  0  0  0  0  0  0
6  1  10  5  8  9  4  6  2  3
0  0  -1 -1 0  0  -1 -1 0  0
0  0  -1 -1 0  0  -1 -1 0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0

Flags:1
Bombs:4
Twos:1
Threes:1
Fours:2
Fives:1
Sixes:3
Sevens:0
Eights:1
Nines:1
Tens:1

-5 6  1  0  0  0  0  0  0  0
5  1  0  0  0  0  0  0  0  0
1  0  0  0  0  0  0  0  0  0
5  1  7  2  9  10  0  0  0  0
0  0  -1 -1 0  0  -1 -1 0  0
0  0  -1 -1 0  0  -1 -1 0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0

Flags:1
Bombs:4
Twos:1
Threes:0
Fours:0
Fives:2
Sixes:1
Sevens:1
Eights:0
Nines:1
Tens:1

-5 4  1  0  0  0  0  0  0  0
5  1  0  0  0  0  0  0  0  0
1  0  0  0  0  0  0  0  0  0
4  10  9  0  0  0  0  0  0  0
0  0  -1 -1 0  0  -1 -1 0  0
0  0  -1 -1 0  0  -1 -1 0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0
0  0  0  0  0  0  0  0  0  0

Flags:1
Bombs:3
Twos:0
Threes:0
Fours:2
Fives:1
Sixes:0
Sevens:0
Eights:0
Nines:1
Tens:1

Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T09:42:23.300

我不太清楚您期望发生什么或正在发生什么，您应该尝试解释您得到的错误的原因，这样人们就不必花费很长时间来分析代码和结果。第一个算法有效，第二个无效吗？还是两者都错了？无论如何，下面的更改将使程序更容易推理。

您的变量和函数命名有点不合常规。更常见的是变量和函数以小写字母开头，类以大写字母开头。您的程序看起来好像一切都很重要。

你为什么在这里使用宏？

```
#define NullSpace -1 // 碎片不能移动到的空间
#define 标志 -5
#define 炸弹 1
#define EmptySpace 0 //空板空间

```

一般来说，宏很糟糕，*特别是*如果您不命名它们以避免与其他名称发生冲突。C++ 的发明者[建议](http://www2.research.att.com/~bs/bs_faq2.html#macro)对宏使用 ALL_CAPS。更好的是，不要使用它们：

```
常量 int NullSpace = -1; // 碎片不能移动到的空间
常量 int 标志 -5;
const int 炸弹 1；
常量 int EmptySpace 0; //空板空间

```

这是一种非常繁琐的设置数组的方法：

```
无效 SetMaxPieces()
{
    最大件数[0] = 1；
    MaxPieces[炸弹] = 6;
    最大件数[2] = 8；
...
    最大件数[10] = 1；
    最大件数[11] = 1；//间谍
}

```

定义数组时只需初始化它：

```
int MaxPieces[11] = {
    1, 6, 8, 5, 4, 4, 4, 3, 2, 1, 1, 1
};
字符串 PieceNames[11] = {
  “旗帜：”，“炸弹：​​”，“二：”，“三：”，“四：”，“五：”，“六：”，
  “七：”，“八：”，“九：”，“十：”，“间谍：”
};

```

可是等等！现在编译器拒绝编译程序：

```
game.cc:13:1：错误：“int [11]”的初始化程序太多
game.cc:17:1：错误：'std::string [11] {aka std::basic_string [11]}'的初始化程序太多

```

您正在设置 11 个数组中的 12 个值！当你这样做时编译器没有抱怨`MaxPieces[11]`（但也许应该这样做），但它绝对不会让你初始化一个包含太多值的数组。你的数组应该有十二个元素吗？还是您只是填写错误？

正如评论者指出的那样，[您必须播种`rand()`](https://stackoverflow.com/questions/10056221/rand-issue-in-c-programming)或伪随机数生成器始终以相同的初始状态开始，并产生完全相同的“随机”数序列。

你为什么使用`do-while`in `main`？ `do-while`仅在少数情况下有用，当条件最初无法测试时（或一些巧妙的技巧使其块范围充当邪恶宏中的单个语句）。在您的情况下，条件最初为真（`loop`小于 10），因此只需使用`for`or`while`循环。我更喜欢 a`for`因为你的循环变量不需要在之后存在`for`所以你可以在那里初始化它：

```
for (int loop = 0; loop <= 10; ++loop)
{
    SetBoardStartingConfig();
    PrintBoard();
    cout << '\n';

    for (int i = 0; i < 11; i++)
    {
            cout << PieceNames[i] << AIPieces[i] << '\n';
    }
    cout << '\n';

    ResetAIPieces();
}
cout << flush; 
```

`endl`每次需要换行时都不需要使用，`endl`添加换行**并**刷新流，这不需要在每一行上都执行。上面的代码在循环之后只执行一次。

现在对于第一个算法：

```
for (int i =0; i < 4; i++)
    for (int j = 0; j < 10; j++)
    {
        if (board[i][j] == 0)
        {
            int Chosen = rand() % 10+1;
            if (AIPieces[Chosen] < MaxPieces[Chosen])
                {
                board[i][j] = Chosen;
                AIPieces[Chosen]++;
            }
            else
                break;
        }
        else
            break; 
```

将大括号中的第一个`for`括起来也有助于提高可读性。它也有助于编写`rand()%10 + 1`而不是上面的间距，以便运算符优先级更加明显，目前看起来你的意思是`rand() % 11`因为你已经对加法操作数进行了分组。

不应该是支票`board[i][j] == 0`吗`board[i][j] == EmptySpace`？否则，保持这个常数有什么意义？

你真的想去`break`那里吗？这是否意味着您一旦找到一个非空的正方形或用完某种特定类型的棋子就停止填充一排？如果`break`应该在那里，他们去哪里进行第二个算法？您的代码无法推理，部分原因是所有重要的逻辑都被注释掉了（这不是阅读代码的有用方法！）并且因为缩进不一致。

您的第二个算法完全不可读，您是否有足够宽的屏幕可以在不换行的情况下看到该行？即使您这样做，也更容易阅读分手。

第二个算法检查`board[i][j] == EmptySpace`吗？它似乎没有，但也许这只是你的格式。

此外，所有这些评论使得在实现之间切换以比较结果变得很尴尬。如果你这样做：

```
 for (int i =0; i < 4; i++)
    {
        for (int j = 0; j < 10; j++)
        {
            if (board[i][j] == EmptySpace)
            {
#if 0
                int Chosen = rand()%10 +1;

                if (AIPieces[Chosen] < MaxPieces[Chosen])
                {
                    board[i][j] = Chosen;
                    AIPieces[Chosen]++;
                }
                else
                    break;
#else
                if (AIPieces[0] < MaxPieces[0]
                        || AIPieces[1] < MaxPieces[1]
                        || AIPieces[2] < MaxPieces[2]
                        || AIPieces[3] < MaxPieces[3]
                        || AIPieces[4] < MaxPieces[4]
                        || AIPieces[5] < MaxPieces[5]
                        || AIPieces[5] < MaxPieces[5]
                        || AIPieces[6] < MaxPieces[6]
                        || AIPieces[7] < MaxPieces[7]
                        || AIPieces[8] < MaxPieces[8]
                        || AIPieces[9] < MaxPieces[9]
                        || AIPieces[10] < MaxPieces[10]
                        || AIPieces[11] < MaxPieces[11]) 
                {
                    AIPieces[board[i][j] = rand() % 10+1]++;        
                }
#endif
            }
            else
                break;
        }
    } 
```

然后您只需要更改一个字符（更改`#if 0`为`#if 1`）即可在它们之间切换。

现在我可以正确地看到第二个算法，很明显，如果还有*任何*碎片，您将放置一个碎片，但这可能会放置一个您已经用完的碎片。例如，如果`AIPieces[1] < MaxPieces[1]`但`AIPieces[2] == MaxPieces[2]`条件为真，但如果`rand()%10 + 1`返回 2，则表示您放置了不允许放置的部分。这意味着你放置了太多的某些类型的棋子。

我认为 Scott 有一个更好的主意，将各个部分的放置分开到一个函数中，这将使该循环**更**易于阅读：

```
for (int i =0; i < 4; i++)
    for (int j = 0; j < 10; j++)
        AddPiece(rand() % 3 + 4, 1, 0); 
```

现在您可以编写`AddPiece2`并更改对它的调用以试验不同的实现。比较这两种算法可以帮助找出问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T08:14:08.173

我不确定我是否很好地理解了这个问题。但是，试图回答它。像这样的东西似乎是你所要求的：

而不是增加 AIPieces，您需要首先检查板上没有任何东西，并且 MaxPieces 尚未使用。

```
 AIPieces[board[1][0] = rand() % 3 + 4]++; 
```

所以尝试一个函数来做到这一点：

```
void AddPiece(int pieceType, int locationX, int locationY)
{
    if( board[locationX][locationY] != 0 )
         return; // board already has something here, so don't add.

    if( AIPieces[pieceType] >= MaxPieces[pieceType] )
        return; // Can't add as all of these pieces have already been used.

    board[locationX][locationY] = pieceType;
    AIPieces[pieceType]++;
} 
```

代替原来的行，像这样调用函数：

```
AddPiece(rand() % 3 + 4, 1, 0); 
```

* * *

您的第二个算法将不起作用，因为当您尝试添加一个片段时，if 语句会检查是否使用了任何类型的片段，而不仅仅是检查您尝试添加的片段的类型。

# linux - 我的 lib_LTLIBRARIES 库链接，但 check_LTLIBRARIES 一个没有？

> ID：11167748
> 
> 赞同：0
> 
> 时间：2012-06-23T07:33:41.017
> 
> 标签：linux, linker, autotools, automake, libtool

我有一个用 autoconf、automake 和 libtool 构建的新 c++ 项目。功能分为支持库和用户二进制文件。还有一组`unittests`链接到这些库的二进制文件，它们是`make check`按时构建和运行的，但没有安装。

我说这个项目是新的。实际上，我现在才开始提取应该安装的第一个库。到目前为止，（少量）编写的代码只是直接编译成`unittests`.

我尝试的`Makefile.am`片段如下所示：

```
lib_LTLIBRARIES += libfoo.la
libfoo_la_SOURCES = foo.cc 
```

在`make check`中，我得到了这个：

```
/bin/bash ./libtool --tag=CXX   --mode=link g++ -Wall -Wextra -Werror -ansi -fprofile-arcs -ftest-coverage -g -O0 -fprofile-arcs -ftest-coverage -L/usr/local/lib -Wl,-rpath /usr/local/lib  -o libfoo.la -rpath /usr/local/lib foo.lo  -lboost_thread-mt -lboost_system-mt -pthread 
libtool: link: g++  -fPIC -DPIC -shared -nostdlib /usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../x86_64-linux-gnu/crti.o /usr/lib/gcc/x86_64-linux-gnu/4.6.1/crtbeginS.o  .libs/foo.o   -L/usr/local/lib -lboost_thread-mt -lboost_system-mt -L/usr/lib/gcc/x86_64-linux-gnu/4.6.1 -L/usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../.. -lstdc++ -lm -lc -lgcc_s /usr/lib/gcc/x86_64-linux-gnu/4.6.1/crtendS.o /usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../x86_64-linux-gnu/crtn.o  -fprofile-arcs -O0 -fprofile-arcs -Wl,-rpath -pthread   -pthread -Wl,-soname -Wl,libfoo.so.0 -o .libs/libfoo.so.0.0.0
/usr/bin/ld: cannot find libfoo.so.0: No such file or directory
collect2: ld returned 1 exit status 
```

请注意，缺少的库正是我要编译的库。

（该库不是`libfoo`，但我可以使用这个存根库重现相同的错误。`Makefile.am`上面的和错误行是文字和未经编辑的。）

如果我将 automake 行更改为

```
check_LTLIBRARIES += libfoo.la
libfoo_la_SOURCES = foo.cc 
```

那么编译看起来像这样：

```
/bin/bash ./libtool --tag=CXX   --mode=link g++ -Wall -Wextra -Werror -ansi -fprofile-arcs -ftest-coverage -g -O0 -fprofile-arcs -ftest-coverage -L/usr/local/lib -Wl,-rpath /usr/local/lib  -o libfoo.la  foo.lo  -lboost_thread-mt -lboost_system-mt -pthread 
libtool: link: ar cru .libs/libfoo.a .libs/foo.o 
libtool: link: ranlib .libs/libfoo.a
libtool: link: ( cd ".libs" && rm -f "libfoo.la" && cp -p "../libfoo.la" "libfoo.la" ) 
```

..一切正常（除了我的库没有安装，在`check_`。）

请注意，命令行中的唯一区别是第二个中的一些附加参数：

... -Wl,-rpath /usr/local/lib -o libfoo.la -rpath ***/usr/local/lib*** foo.lo -lboost_thread-mt ...

我不知道这个新论点是否不应该存在，但它似乎确实导致了问题。有谁知道我错过了什么？

更多细节：

*   在 osx lion 上，这可以正常工作（并且命令行不同。）此错误出现在 ubuntu 12.04 上，可能是其他 linux。
*   `noinst_LTLIBRARIES`并且`EXTRA_LTLIBRARIES`像这样工作`check_LTLIBRARIES`：没有额外的参数，并且它链接。似乎 libtool 'convenience' 库特别是那些没有这些论点的库。
*   汽车制造 1.11.1
*   自动配置 2.68
*   库工具 2.4

**编辑**

`-Wl,-rpath /usr/local/lib`（手动）从参数中删除也可以解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:06:29.207

我对自己做了。在为 boost 引入 autoconf 支持时，我遇到了[此处](https://github.com/tsuna/boost.m4/issues/19)描述的错误。我的解决方法遵循了一篇帖子的建议：

```
diff --git a/m4/boost.m4 b/m4/boost.m4
index 3d4e47c..9dd0c43 100644
--- a/m4/boost.m4
+++ b/m4/boost.m4
@@ -403,7 +403,7 @@ dnl generated only once above (before we start the for loops).
       LDFLAGS=$boost_save_LDFLAGS
       LIBS=$boost_save_LIBS
       if test x"$Boost_lib" = xyes; then
-        Boost_lib_LDFLAGS="-L$boost_ldpath -Wl,-R$boost_ldpath"
+        Boost_lib_LDFLAGS="-L$boost_ldpath -Wl,-rpath $boost_ldpath"
         Boost_lib_LDPATH="$boost_ldpath"
         break 6
       else 
```

这里`-rpath`介绍的显然是导致问题的同一个。如果我恢复此更改，问题就会消失（我当然只剩下第一个问题，但那是另一回事了。）

# tridion - 在 Tridion 中显示用于发布队列的任务按钮使 CMS 变慢

> ID：11167749
> 
> 赞同：2
> 
> 时间：2012-06-23T07:33:46.023
> 
> 标签：tridion, tridion-2011

当 tridion 发布队列中的队列中有大量项目时，一次又一次地单击显示任务按钮会使数据库变慢。因为后面的数据库查询是异步的。我们无法阻止某人一次又一次地单击该按钮，但会使 CMS 变慢。有没有补丁或者解决方法？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T16:20:03.183

通过定期清除发布队列（计划任务）以及保持数据库统计信息和重建索引将有助于更好地提高性能，可以避免其中一些发布队列缓慢。

清除发布队列文档： [http ://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/idheading-259307200](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/idheading-259307200)

即使您实现了自定义 GUI extn 或其他定期刷新队列的解决方案，如果您没有清除队列/数据库优化等维护任务，您也可能遇到相同的问题。

您正在运行哪个版本的 Tridion？Tridion 2011 GA 与 SP1 之间的发布队列在用户过滤器方面存在很大差异。Tridion GA 用户过滤器不会自动选择，因此当用户检查任务发布队列时会返回所有用户的结果。这在 SP1 中可以正常工作。

# c# - C# 将更新的值存储在数据表中，以便它也可以存储在 datagridview 中

> ID：11167752
> 
> 赞同：-1
> 
> 时间：2012-06-23T07:34:54.567
> 
> 标签：c#

如何通过datagridview更新数据表值，这些值将存储在excel表中......以便下次加载excel文件时在datagridview中更新更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T07:59:19.863

如果您正在谈论**“从 GridView 获取数据并将该数据存储在 asp.net 中的 DataTable 中”**，那么试试这个

```
DataTable yourDT = new DataTable();
yourDT.Columns.Add("content");
// Add your columns here
foreach (GridViewRow row in gvParent.Rows)
{
            string Content = row.Cells[0].Text; // If you are using databound columns
            string ContentFromLabel = ((Label)row.Cells[0].FindControl("YourLabel")).Text;// If you are using Template column
// get more columns like this that you have added
            yourDT.Rows.Add(new object[] { Content, .... other data });
} 
```

# asp.net - 将 Var 类型变量从 aspx.cs 传递到 aspx 页面

> ID：11167761
> 
> 赞同：0
> 
> 时间：2012-06-23T07:36:45.597
> 
> 标签：asp.net, var

```
public partial class CityDetailPage : System.Web.UI.Page
{
 protected List<CityPhotoGallery> cityPhotoGallery;--It is allowed
 protected var cityPhotoGallery; --IT IS NOT ALLOWED

 protected void Page_Load(object sender, EventArgs e)
 {

 }

} 
```

我知道如何将普通变量（其数据类型已知）从 aspx.cs 页面传递到 .aspx 页面，但是在我当前的 senerio 中有一个 var 类型变量，所以我如何将此变量从 .aspx.cs 传递到 .aspx 页面页

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T08:42:20.683

There is no such thing as a var type.

The datatype is either anonymous, e.g. when you use a projection in linq-2-sql or it is the actual datatype derived by the compiler. In that case using var is just shorter.

**update** You cannot pass an anonymous type. You just need to use the definite type. If you want to pass around a projection, you need to create a specific type for that. They are called Poco or DTO (data transfer) object. They function as simple data containers and are used for moving data between the layers of an application

For more information [POCO vs DTO](https://stackoverflow.com/questions/725348/poco-vs-dto)

# ruby-on-rails - 在生产环境中使用 Thinking Sphinx 和 Postgresql 进行索引器查询的问题

> ID：11167762
> 
> 赞同：0
> 
> 时间：2012-06-23T07:36:48.420
> 
> 标签：ruby-on-rails, postgresql, thinking-sphinx

我在开发中使用 Rails 3.2.3、Sphinx 2.0.1 beta 和 Postgresql 9.1.3，索引如下：

```
define_index do
  indexes :name
  indexes :city

  has :id
  has :gender_cd, as :gender, type: :integer
  has "extract(year from age(birthdate))", as: :age, type: :integer
  set_property delta: true
end 
```

它在开发和工作、搜索等方面的索引很好。但是当我部署到生产服务器时，我从索引器中得到以下信息：

```
(DSN=blah blah blah).
total 0 docs, 0 bytes
total 0.023 sec, 0 bytes/sec, 0.00 docs/sec
indexing index 'user_delta'...
ERROR: index 'user_delta': sql_range_query: ERROR:  column "users.birthdate" must appear in the GROUP BY clause or be used in an aggregate function
LINE 1: ... "users"."gender_cd" AS "gender", extract(year from age(birthdate)... 
```

我认为问题出在 8.4 pgsql 中，但即使在 9.1.4 中仍然存在。sphinx 版本比 dev 中的 2.0.4 版本更新。

我知道 GROUP BY 包含的这个问题，这在使用 Postgres 时是特定的，但为什么它在开发环境中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:44:41.483

在 9.1 之前的 PostgreSQL 版本中，您需要`GROUP BY`结果中不是由聚合函数生成的所有列。在 9.1 及更高版本中，您可以省略在*功能上依赖*于包含在`GROUP BY`子句中的列的列。因此，如果问题仍然存在于 9.1，您可能缺少主键定义。

[http://www.postgresql.org/docs/9.1/interactive/sql-select.html#SQL-GROUPBY](http://www.postgresql.org/docs/9.1/interactive/sql-select.html#SQL-GROUPBY)

# python - 更新 html 中的文本

> ID：11167771
> 
> 赞同：1
> 
> 时间：2012-06-23T07:40:38.907
> 
> 标签：python, google-app-engine, jinja2

所以我在 Google App Engine 上有一个 python webapp，并且正在使用 jinja2 模板引擎。我在网站上有很多想要定期更新的文本，例如新闻部分和有关网站的更新。

这样做最有效的方法是什么？显然，最简单的短期解决方案和我目前正在做的只是更改 HTML，但我想让其他人访问这个而不让他们访问服务器端。

我是否应该硬着头皮在管理页面上编写一个界面，允许用户对其进行编辑，然后服务器将其接收并呈现在新闻部分？任何建议或提示都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:44:45.087

您正在考虑并朝着（无论您是否知道）前进的东西称为*内容管理系统*。

它们中的大多数将内容存储在数据库中并提供用户界面以允许对其进行编辑，就像您正在设计一样。

也许您可以使用现成的零件？我不确切知道哪些是基于 appengine 的，但这是一项非常常见的任务，我相信您会通过使用其他人的工作来节省时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T14:39:22.777

我创建了一个非常基本的 jinja CMS 来维护 Jinja（页面）块。你可以在这里找到它：[https ://codereview.stackexchange.com/questions/5965/review-request-jinja-cms-for-energiekantoor-nl-on-google-app-engine](https://codereview.stackexchange.com/questions/5965/review-request-jinja-cms-for-energiekantoor-nl-on-google-app-engine)

# android-asynctask - 在 AsyncTask 的 getApplication() 上找不到符号

> ID：11167774
> 
> 赞同：1
> 
> 时间：2012-06-23T07:41:04.180
> 
> 标签：android-asynctask, android

我正在使用 AsyncTask 并希望使用 getApplication() 来处理类 Application。但是在 getApplication() 上出现错误找不到符号。

我的代码：

```
public class  splash extends AsyncTask {
  protected config app;
  public  splash(Context context) {
  super();
  app = ((config) getApplication());
  this.context=context;
} 
```

和我想使用的类：

```
public class config extends Application
{
  public Boolean  con=true;
  public int status=-1;
  public String actNum; 
  public void onCreate()
  {
    super.onCreate();
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T08:26:10.293

如果要获取`Application`实例，可以`onCreate()`使用它初始化一个成员，并通过类方法返回它：

```
public class ApplicationConfig extends Application {

  private static ApplicationConfig instance;

  public void onCreate() {
    super.onCreate();
    instance = this;
  }

  public static ApplicationConfig getConfig() {
    return instance;
  }
} 
```

然后，您可以通过以下方式在任何地方检索此实例：

```
ApplicationConfig conf = ApplicationConfig.getConfig(); 
```

# ruby-on-rails - 在 Rails 3 中发送时事通讯

> ID：11167775
> 
> 赞同：5
> 
> 时间：2012-06-23T07:41:41.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3, email, newsletter

是否适合使用[Mail Gun](http://mailgun.net/)发送时事通讯（批量电子邮件）？我们目前正在使用 Mail Gun 发送交易电子邮件（即用于确认电子邮件）效果很好！

我们正在查看[Campaign Monitor](http://www.campaignmonitor.com/)和[Mail Chimp](http://mailchimp.com/)的每周电子邮件通讯。这些服务是否更适合此类任务？

我发现 Mail Gun 更方便的一件事是它们的 API 更易于使用。特别是在发送“动态”/更个性化的电子邮件时。例如：

> 你好福，
> 
> 您的总视频播放量为 1,291。您总共有 214 条评论。
> 
> 问候，
> 
> 很棒的网络

另一方面，Campaign Monitor 和 Mail Chimp 提供的 UI 分析/报告使其更易于阅读，尤其是对于非技术人员而言。这同样适用于创建活动和模板。

它与 Rails 一起使用非常简单。因为模板是通过 ActionMailer 而不是从 UI 创建的（如 Campaign Monitor 和 Mail Chimp 所示）。

`deliver-ability`我应该注意使用其中一项服务对时事通讯有什么好处吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T15:03:07.913

*免责声明：因为我喜欢他们的服务，所以我最终认识了他们*

如果您只想使用一项服务来发送和跟踪所有电子邮件，则需要一个多合一的解决方案。他们在这一领域的参与者并不多，我想云电子邮件平台[Mailjet](http://www.mailjet.com/)将是最适合您的：

*   他们让您发送营销和交易电子邮件。
*   他们具有出色的分析能力：真正可行且易于使用。
*   它们的价格必须与 Mail Gun 差不多，甚至可能更低（例如，30,000 封电子邮件的价格约为 7 美元）。
*   最后但同样重要的是，它们优化了您的交付能力（身份验证、IP 声誉等）。

最重要的是，Mailjet 的 API 有据可查，使您能够个性化消息。他们甚至有一个官方的[Ruby Gem](https://github.com/mailjet/mailjet-gem)。

如果您想对存在的内容有一个清晰客观的概述，您可以[在此处轻松比较不同的参与者](http://socialcompare.com/en/comparison/transactional-emailing-providers-mailjet-sendgrid-critsend)。

# jquery - Jquery Mobile：“pageshow”事件仅在 Shift F5（完全重新加载）时触发，但在加载另一个页面或具有不同查询的同一页面时不会触发

> ID：11167780
> 
> 赞同：4
> 
> 时间：2012-06-23T07:41:58.660
> 
> 标签：jquery, jquery-mobile, mobile

这是我的架构`page.html`：

```
<head>
    <script... jquery
    <script... jquery.mobile
    <scripts... imagemapster, autocomplete, etc...
</head>
<body>
    <div page1..
    </div>
    <div page2..
    </div>
    <my script with functions and initializations...
</body> 
```

在 my`<script>`中，有一些绑定到`page1.pageshow`事件。当我直接加载整个页面时，确保第一次加载所有脚本，我的脚本也正确加载并且没有任何缺陷。即使从`page2`back 到`page1`，也会触发事件。

但是，当我转到另一个页面或使用 JM 内置 ajax 函数刷新同一页面时，我的脚本没有加载，或者`pageshow`没有`page1`触发。

我尝试将脚本放在末尾`page1`或放在头中，但它仍然无法重新加载。我也不能将它放在任何涉及的 div 之前（所有页面中的许多标签都附加了一些事件） - 因为不仅`pageshow`错过了，而且`ready`还有`pageload`.

抱歉，我无法显示整个代码，但是您会以哪种方式工作并试图找出问题所在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:48:32.180

您在此处的脚本将仅在文档加载时触发一次

```
<head>
    <script... jquery
    <script... jquery.mobile
    <scripts... imagemapster, autocomplete, etc...
</head>
<body>
    <div page1..
      <script with the (page1).on(pageshow event handler)>
    </div>
    <div page2..
      <script with the (page2).on(pageshow event handler)>
    </div>
    <script here fired only once at document load>
</body> 
```

您非常错误地期望每次页面转换都会触发它，因为您使用一个页面来包含所有实际页面。通常，每个页面脚本都在 div[data-role=page] 中进行编码。确保您使用页面 id 作为每个内联 pageshow 事件处理程序的选择器。

# c# - 无法在 C#5.0 中正确应用 Await 和 Async

> ID：11167783
> 
> 赞同：0
> 
> 时间：2012-06-23T07:42:35.263
> 
> 标签：c#, async-await, c#-5.0

我有以下程序，它将文件从一个目录移动到另一个目录。以同步方式，它工作正常。但我想以异步方式来做。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T08:07:47.743

错误说明了一切：你不能`await`是`void`. 您只能`await` `Task`s 和看起来与`Task`s 相似的东西（例如[`YieldAwaitable`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.yieldawaitable%28v=vs.110%29.aspx)，由 s 返回的[`Task.Yield()`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.yield%28v=vs.110%29.aspx)）。但你肯定不能`await` `void`。

似乎没有办法在 .Net 4.5 中异步移动文件。

您可以做的最好的事情是使用类似的东西`await Task.Run(() => fileinfo.MoveTo(target))`，它仍然会阻塞线程，但不会阻塞当前线程（如果您在 UI 线程上可能会很有用）。

或者，您也可以使用`Stream`s（可以是异步的）自己复制文件，然后删除原始文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T08:04:33.067

只有当您调用的方法支持它时，您才能使用 await。

要支持`await`的方法需要返回一个`Task<T>`

在这种情况下，`fileInfo.MoveTo`不返回`Task`

# iphone - 寻找模仿 iPhone 锁屏相机拖动

> ID：11167789
> 
> 赞同：1
> 
> 时间：2012-06-23T07:44:45.893
> 
> 标签：iphone, ios, uiview, drag

我一直在搜索和搜索苹果如何在锁定屏幕上进行拖动动作以将相机打开如此干净。我试图用一个应用程序做类似的事情，你从下往上拖动以显示一个菜单，但我不能完全正确。任何人都知道如何做到这一点，或者有任何教程显示如何做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:29:10.793

要跟进 Hejazi 提到的内容，我相信您可以通过 3 个步骤实现这一目标：

*   创建一个具有一定角半径的背景矩形（这是 CGRect 的一个属性）。
*   创建一个顶视图，对应于您希望能够滑动的部分。将平移手势附加到此视图，以便您能够处理此视图的动画。
*   对于突出显示的文本部分，我认为您需要另外两个视图：我会将与文本对应的蒙版应用于视图，以便您仅对文本的字母获得一些透明度，并为其后面的白色圆形视图设置动画。

# mysql - BOOLEAN 或 TINYINT 混淆

> ID：11167793
> 
> 赞同：99
> 
> 时间：2012-06-23T07:45:08.690
> 
> 标签：mysql, types, boolean, tinyint

我正在为一个需要使用布尔日期类型来仅存储真或假两种状态的站点设计数据库。我正在使用 MySQL。
在使用 phpMyAdmin 设计数据库时，我发现我同时拥有 BOOLEAN 数据类型和 TINYINT 数据类型。
我浏览了不同的文章，有人说 TINYINT 与 BOOLEAN 相同，没有区别。有人说 BOOLEAN 在 MySQL 中被转换为 TINYINT。

我的问题是，如果它们都相同，为什么存在两个？应该只有其中之一。

这是我阅读的文章的参考：http:
[//www.careerride.com/MySQL-BOOL-TINYINT-BIT.aspx](http://www.careerride.com/MySQL-BOOL-TINYINT-BIT.aspx)
[http://dev.mysql.com/doc/refman/5.5/en/numeric-type -overview.html](http://dev.mysql.com/doc/refman/5.5/en/numeric-type-overview.html)

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-06-23T07:49:54.867

MySQL 没有内部布尔数据类型。它使用最小的整数数据类型——TINYINT。

BOOLEAN 和 BOOL 等同于 TINYINT(1)，因为它们是同义词。

尝试创建此表 -

```
CREATE TABLE table1 (
  column1 BOOLEAN DEFAULT NULL
); 
```

然后运行 ​​SHOW CREATE TABLE，你会得到这个输出 -

```
CREATE TABLE `table1` (
  `column1` tinyint(1) DEFAULT NULL
) 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-12-04T21:29:13.133

只是给 php 开发人员的注意事项（我缺少必要的 stackoverflow 点来将其作为评论发布）...... 到 TINYINT 的自动（和静默）转换意味着 php 从“BOOLEAN”列中检索一个值作为“0”或“1”，而不是预期的（由我）真/假。

查看用于创建表的 SQL 并看到类似“some_boolean BOOLEAN NOT NULL DEFAULT FALSE”的开发人员可能会合理地期望在检索包含该列的行时看到真/假结果。相反（至少在我的 PHP 版本中），结果将是“0”或“1”（是的，字符串“0”或字符串“1”，而不是 int 0/1，谢谢 php）。

这是一个笨蛋，但足以导致单元测试失败。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-06-25T13:33:42.447

最新的 MySQL 版本具有新的`BIT`数据类型，您可以在其中指定字段中的位数，例如`BIT(1)`用作`Boolean`类型，因为它只能是`0`或`1`。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-10-27T12:31:40.950

自 MySql 5.1 版本[参考](http://dev.mysql.com/doc/refman/5.1/en/numeric-type-overview.html)

```
BIT(M) =  approximately (M+7)/8 bytes, 
BIT(1) =  (1+7)/8 = 1 bytes (8 bits) 
```

==================================================== ========================

```
TINYINT(1) take 8 bits. 
```

[https://dev.mysql.com/doc/refman/5.7/en/storage-requirements.html#data-types-storage-reqs-numeric](https://dev.mysql.com/doc/refman/5.7/en/storage-requirements.html#data-types-storage-reqs-numeric)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-01-11T11:18:01.290

MySQL 状态的数字类型概述：BOOL、BOOLEAN：这些类型是 TINYINT(1) 的同义词。零值被认为是错误的。非零值被认为是真的。

见这里： [https ://dev.mysql.com/doc/refman/5.7/en/numeric-type-overview.html](https://dev.mysql.com/doc/refman/5.7/en/numeric-type-overview.html)

# c# - ole 自动化日期到 c# 日期时间选择器值

> ID：11167802
> 
> 赞同：0
> 
> 时间：2012-06-23T07:47:12.300
> 
> 标签：c#, datetime, datetimepicker, datetime-format, ole-automation

我正在从 SQL 服务器获取一些数据，并尝试在前端 C# windows 窗体上显示。

dtpMcAccExp.Text = DateTime.FromOADate(Convert.ToDouble(reply.Rows[0]["ExpiryDate"])).AddDays(2).ToString("dd/MM/yyyy");

在这里，dtpMcAccExp 是一个 DatTimePicker & reply 是一个数据表，我在其中得到 sql 查询回复。

当我得到 ExpiryDate 一个 OLE 日期和 2 天前的日期（作为 delphi 系统用来更新它），所以必须添加 2 天来引入实际日期。

尽你所能理解。

问题是..在某些计算机上，系统日期时间设置短日期为“dd/MM/yyyy”，它工作正常，但在某些短日期为“M/d/yyyy”的计算机上，它给出了一个错误“字符串未被识别为有效日期时间.."

所以解决方案是将每个客户计算机的短日期更改为我希望我的应用程序运行的“dd/MM/yyyy”。

或其他一些解决方案，即我可以更改我的编码。请帮忙。非常感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:20:38.333

为此，您只需设置系统当前文化并可以运行...

```
using System.Threading;
using System.Globalization;

Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US", false); 
```

要点：您也可以将 dd/MM/yyy 的 Culture 设置为“en-GB”，但是数据在存储到数据库 MM/dd/yyy 时可能是标准日期格式，不会造成任何麻烦....

# delphi - 将 Delphi 图像传递给 FastReport

> ID：11167804
> 
> 赞同：3
> 
> 时间：2012-06-23T07:47:48.523
> 
> 标签：delphi, fastreport

我想在 FastReport 中显示图像。

这是德尔福代码：

```
 img_sick.Picture.LoadFromFile(ExtractFilePath(Application.ExeName) +
      'Pictures/' +  Qry_Search.FieldByName('code_personel').AsString + '.jpg'); 
```

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T11:11:31.863

1.  将图片对象放在报表上。让我们假设它会被调用`Picture1`。

2.  在您的 Delphi 代码中，在您要加载图片的方法中，添加如下一行：

    ```
    TfrxPictureView(YourReportObject.FindObject('Picture1')).Picture.LoadFromFile(…) 
    ```

    该`Picture`属性是 a `TPicture`，因此`LoadFromFile`与您在示例中使用的方法相同。因此，只需提供相应的文件名作为参数。

这应该在运行报告*之前完成。*如果你想在运行报表*的过程*中加载图片，你或许应该尝试在报表脚本中做类似的事情。也许我会`OnBeforePrint`为对象定义一个处理程序`Picture1`，如下所示：

```
procedure Picture1OnBeforePrint(Sender: TfrxComponent);
begin
  TfrxPictureView(Sender).Picture.LoadFromFile(…);  // use a reference
          // to the "code_personel" column in the file name expression
          // as appropriate in the context of the report script,
          // like <Qry_Search."code_personel">, perhaps
end; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-23T11:44:39.380

Your problem is the "/" it is supposed to be a backslash ---> "\"

# jquery - 敲除错误，视图模型未绑定

> ID：11167806
> 
> 赞同：0
> 
> 时间：2012-06-23T07:49:03.583
> 
> 标签：jquery, mvvm, knockout.js, viewmodel, knockout-mapping-plugin

我的代码是这样的：

```
<div id="DivToUpdate">
    <div>
        SELECTED ROOM:
        <input type="text" id="currentRoom" /></div>
    <div id="messagesList">
        <table>
            <tbody data-bind="foreach: model.Messages">
                <tr data-bind="text: Message">
                </tr>
            </tbody>
        </table>
    </div>
</div> 
```

```
<script type="text/javascript">
var viewModel = {};
$('#DivToUpdate').click(function () {
    $.getJSON("/ControllerAction/JsonPopulateMessages", { jsonRoom: $('#currentRoom').val() }, function (data) {
        var trueData = JSON.stringify(data);
        alert(trueData);
        viewModel.model = ko.mapping.fromJSON(trueData);
        ko.applyBindings(viewModel);
    });
});
  </script> 
```

我返回的 JSON 数据格式如下：

```
 {"Messages":[{"Message":["yow!"]},{"Message":["hey!"]}]} 
```

当我尝试运行代码并单击 DivToUpdate 时，我什么也看不到...表格和行是空的..意味着视图模型没有正确绑定..当我查看 chrome 的控制台时，它说：

```
 NO_MODIFICATION_ALLOWED_ERR: DOM Exception 7 
```

我开始学习淘汰赛，如果你能告诉我如何解决这个问题，我将不胜感激......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T08:03:45.287

您的 JSON 看起来有点奇怪，请删除 Message 值周围的 []。我想它应该是一个字符串吧？你是如何生成 JSON 的？

**更新：**

再看一遍，我意识到你尝试将文本绑定到 tr-element，但是一个 tr 只能包含 td-elements，所以你需要在你的 tr 中添加一个 td 并将数据绑定到 td-而是元素。

试试这个：

```
 <div id="messagesList">
        <table>
            <tbody data-bind="foreach: model.Messages">
                <tr>
                   <td data-bind="text: Message"></td>
                </tr>
            </tbody>
        </table>
    </div> 
```

# c - 如何通过正则表达式从名称 = 值格式的字符串中提取名称

> ID：11167812
> 
> 赞同：2
> 
> 时间：2012-06-23T07:49:36.723
> 
> 标签：c, regex, string, pcre, ansi

如何通过正则表达式从名称 = 值格式的字符串中提取名称？我想从字符串中获取

```
saf asfgo   = ==slwin[(*]?
m||a=vd8228J)_+
sPiof+_ = vsfs=+":~lue3 
```

只有名字：

```
saf asfgo
m||a
sPiof+_ 
```

没有第一个等于符号和它前面的空格。

更新。我尝试使用`^.+(?=[ \t]*?=)` upd2。对不起。我很快找到了决定：`^.+?(?=[ \t]*=)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T08:59:20.057

**尝试这个**

```
if ($subject =~ m/(?im)^([^=\r\n]+?)\s*=\s*([^=\r\n]+?)$/) {
    $name = $1;
    $value = $2;
} else {
    $name = "";
    $value = "";
} 
```

# jsf - PrimeFaces Dropdown AutoComplete 内部复合组件

> ID：11167815
> 
> 赞同：0
> 
> 时间：2012-06-23T07:50:04.273
> 
> 标签：jsf, primefaces, composite-component

我正在尝试将 primefaces 自动完成方法嵌入到复合组件中。

但是，尝试访问“完成”方法时会失败。

这是我的代码：

```
..
<composite:interface>
  <composite:attribute name="car" required="true" />
  <composite:attribute name="brandList" required="true" method-signature="java.util.List complete(java.lang.String)" />
  <composite:attribute name="style" required="false" />
</composite:interface>

<composite:implementation>
  ..

  <h:outputLabel value="DropDown :" for="dd" />
  <p:autoComplete id="dd" dropdown="true" value="#{cc.attrs.car.brand}" completeMethod="#{cc.attrs.brandList}" />
  ..
</composite:implementation> 
```

和电话：

```
<cp:carPropertiesAutoComplete car="#{carController.car}" brandList="#carController.complete}" /> 
```

和支持bean：

```
public List<String> complete(String query) {
  List<String> brandList = new ArrayList<String>();

  brandList.add("brand0");
  brandList.add("brand1");

  for (String brand : brandList) {
    if(brand.contains(query)) {
      brandList.add(brand);
    }
  }
  return brandList;
} 
```

和日志：

> 警告：/newCarAutoComplete.xhtml @17,112 brandList="#{carController.complete}"：“CarController”类没有“完整”属性。javax.el.PropertyNotFoundException：/newCarAutoComplete.xhtml @17,112 brandList="#{carController.complete}"：“CarController”类没有“完整”属性。在 com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:111) 在 com.sun.faces.facelets.el.ContextualCompositeMethodExpression.invoke(ContextualCompositeMethodExpression.java:190) 在 com.sun.faces.facelets .tag.TagAttributeImpl$AttributeLookupMethodExpression.invoke(TagAttributeImpl.java:450) 在 org.primefaces.component.autocomplete.AutoComplete.broadcast(AutoComplete.java:340) 在 javax.faces.component.UIViewRoot。

我搜索了一下，发现了这个（同样的问题，没有解决方案） [http://forum.primefaces.org/viewtopic.php?f=3&t=1884](http://forum.primefaces.org/viewtopic.php?f=3&t=1884)

我正在使用 Mojarra 2.1.6 和 PrimeFaces 3.3.1 运行 Glassfish 服务器 3.1.2

你能帮我么？我已经为此苦苦挣扎了好几个小时=（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:33:08.667

为什么不在@FacesComponent 中创建完整的方法？然后使用 {cc.brandList} 而不是 {cc.attrs.brandList}

# asp.net-mvc - 访问 RavenDB 时获取 System.Net.Sockets.SocketException

> ID：11167816
> 
> 赞同：2
> 
> 时间：2012-06-23T07:50:06.733
> 
> 标签：asp.net-mvc, exception, ravendb

最近我通过包管理器安装了`RavenDB`（一堆程序集：客户端、数据库、嵌入式） 。`NuGet`我是这样配置`DocumentStore`的：

```
public override void Load()
{
    Bind<IDocumentStore>().ToMethod(
        context => {
            var documentStore = new EmbeddableDocumentStore { 
                Url = "http://localhost:8080", 
                DefaultDatabase = "ampDatabase",
                UseEmbeddedHttpServer = true
            };
            return documentStore.Initialize();
        }
    ).InSingletonScope();

    Bind<IDocumentSession>().ToMethod(context => 
        context.Kernel.Get<IDocumentStore>().OpenSession()
    ).InRequestScope();
} 
```

调用此代码后：

```
documentSession.Store(idea);
documentSession.SaveChanges(); 
```

我得到`System.Net.Sockets.SocketException`：

> 无法建立连接，因为目标机器主动拒绝它 127.0.0.1:8080

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T04:58:32.517

你这样设置：

```
 var documentStore = new EmbeddableDocumentStore { 
                Url = "http://localhost:8080", 
                DefaultDatabase = "ampDatabase",
                UseEmbeddedHttpServer = true
            }; 
```

问题是这实际上告诉我们不要使用嵌入式模式，而是尝试以服务器客户端的方式来处理事情。将其更改为：

```
 var documentStore = new EmbeddableDocumentStore { 
                DataDirectory = "Database",
                UseEmbeddedHttpServer = true
            }; 
```

它会起作用

# php - POST数据和不同的模板加载

> ID：11167823
> 
> 赞同：0
> 
> 时间：2012-06-23T07:51:41.387
> 
> 标签：php, wordpress

我对 wordpress 有一个非常奇怪的问题。

我创建了一个名为 /test (www.example.com/test) 的页面，我在其中放置了一个自定义表单。

（此表单使用 POST 方法发送数据，它是一个自定义模板）

我注意到当我提交表单时会加载另一个模板（404.php 的模板）。

**只有**当有 POST 数据时，否则我的自定义模板会被加载。

如何解决这个问题？

# android - 为什么 setOnclick 按钮不起作用？

> ID：11167827
> 
> 赞同：0
> 
> 时间：2012-06-23T07:51:59.660
> 
> 标签：android

我使用 android 2.3.3 我的代码：

```
 read=(Button)findViewById(R.id.bt_read);
    write=(Button)findViewById(R.id.bt_write);
    text=(EditText)findViewById(R.id.editText1);

    // write file
    write.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(), "Write", Toast.LENGTH_SHORT);
        }
    }); 
```

但是当我单击按钮 Toast 时不显示。谁能告诉我为什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:54:15.157

改变

```
Toast.makeText(getApplicationContext(), "Write", Toast.LENGTH_SHORT); 
```

至

```
Toast.makeText(getApplicationContext(), "Write", Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T07:57:15.783

您必须添加 show 方法来显示 Toast 视图

```
Toast.makeText(getApplicationContext(), "Write", Toast.LENGTH_SHORT).show(); 
```

不显示 Toast 您的代码如下所示

```
Toast.makeText(getApplicationContext(), "Write", Toast.LENGTH_SHORT); 
```

Toast 视图的更多详细信息，请参阅此文档[http://developer.android.com/guide/topics/ui/notifiers/toasts.html](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T07:54:07.330

在 Toast 的末尾，您需要添加“.show()”。

代码：

```
 Toast.makeText(getApplicationContext(), "Write", Toast.LENGTH_SHORT).show(); 
```

# php - 如何发布从 PHP 创建的 HTML 表格数据

> ID：11167830
> 
> 赞同：2
> 
> 时间：2012-06-23T07:52:32.473
> 
> 标签：php, javascript, html, post

```
.
.
.
while ( $row = mysql_fetch_array($res) )
{                   
    echo "<tr>";
    echo "<td><input type=\"radio\" name=\"mod\" /></td>";
    echo "<td>" . $row['a'] . "</td>";
    echo "<td>" . $row['b'] . "</td>";
    echo "<td>" . $row['c'] . "</td>";
    echo "<td>" . $row['d'] . "</td>";
    echo "<td>" . $row['e'] . "</td>";
    echo "</tr>";
}
echo "</table> 
```

使用 PHP "echo" 将数据库数据打印到 HTML 表中。

例如，当它显示时，将有 X 行 6 列（5 个数据和一个单选按钮）。

对于使用单选按钮选择的行，我需要将所有特定行数据发布到另一个 .php 页面。

我最初的想法是为单选按钮创建一个 onClick() 函数，将数据作为函数的参数，然后让函数使用该数据执行 AJAX POST。

或者我应该在桌子周围创建一个表格？如果是这样，我将如何将该行数据作为表单数据？

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T08:00:38.240

最好的方法可能是让单选按钮的值对应于行号。提交表单后，从数据库中检索该行。

```
.
.
.
echo "<tr>";
echo "<td><input type=\"radio\" name=\"mod\" value=\""./*row number*/."\" /></td>";
echo "<td>" . $row['a'] . "</td>";
echo "<td>" . $row['b'] . "</td>";
echo "<td>" . $row['c'] . "</td>";
echo "<td>" . $row['d'] . "</td>";
echo "<td>" . $row['e'] . "</td>";
echo "</tr>";
.
.
. 
```

在表单处理程序中

```
$rownumber = $_POST["mod"]
// whichever mysql function - make the same query as the first page
// get row $rownumber 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T08:02:01.527

如果每行都有一些 ID，则只需将其与单选按钮相关联，一旦提交，您的 PHP 脚本将能够根据发送的 ID 确定选择了哪个。

```
echo "<td><input type=\"radio\" name=\"mod\" value=\"" . $row['id'] . "\" /></td>"; 
```

通常，我建议不要从 PHP 打印 HTML，而是按照应该完成的方式嵌入它

```
<?php while ( $row = mysql_fetch_array($res) ) : ?>
<tr>
<td><input type="radio" name="mod" value="<?php echo $row['id'] ?>" /></td>
<td><?php echo $row['a'] ?></td>
<td><?php echo $row['b'] ?></td>
<td><?php echo $row['c'] ?></td>
<td><?php echo $row['d'] ?></td>
<td><?php echo $row['e'] ?></td>
</tr>
<?php endwhile; ?> 
```

# android - 在哪里可以找到 Android 开源代码的中央存储库？

> ID：11167832
> 
> 赞同：2
> 
> 时间：2012-06-23T07:52:43.540
> 
> 标签：android

当我使用 PHP 和 Visual Basic 进行开发时，有大量的程序员在各种网站上提供了他们的源代码。是否有像[www.pscode.com](http://www.pscode.com)这样的中央存储库，我可以在其中找到为 Android 发布的开源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T07:59:26.163

有许多网站愿意让程序员发布/分享/讨论他们的代码。

例如，您有旧的[sourceforge](http://sourceforge.net/)或现在非常常用的[github](https://github.com/)（我的首选）或[Google 的](http://code.google.com/)。

我从来没有听说过一个特定的 android （这很难：我所有的开源项目在许多技术中都有很多部分），但至少 github 和 code.google 让你可以按技术搜索他们的项目：

*   [https://github.com/languages](https://github.com/languages)

*   [http://code.google.com/hosting/search?q=label%3aAndroid](http://code.google.com/hosting/search?q=label%3aAndroid)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T09:00:20.653

你好，我会 100% 推荐这个：

[http://commonsware.com/](http://commonsware.com/)

这是一项年度订阅，可让您访问三本以 PDF 或 Kindle 副本形式保持最新的 Android 书籍。它们会在需要更改时更新，例如新的 SDK 版本。您还可以浏览这些书籍中使用的在线示例代码，此处为[示例](https://github.com/commonsguy/cw-android)。这些示例是学习 android 的金矿，所以开始挖掘吧：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T08:02:57.020

Android 本身可以作为开源[Android 源代码](http://source.android.com/index.html)获得，否则，请查看[code.google.com - Android 标签](http://code.google.com/hosting/search?q=label%3aAndroid)，那里有大量可用的项目，包括源代码

# r - xts::timeBasedSeq 中序列的起始日期和第一个元素

> ID：11167833
> 
> 赞同：1
> 
> 时间：2012-06-23T07:52:45.163
> 
> 标签：r, xts

有人可以解释一下下面的行为吗，如果起始日期为“20060301”，则生成的月份序列的第一个元素是 2006 年 3 月，但起始日期为“20060401”，开始日期仍然是 2006 年 3 月？

```
> timeBasedSeq('20060301/20120207/m')[1]
[1] "Mar 2006"
> timeBasedSeq('20060401/20120207/m')[1]
[1] "Mar 2006"
> timeBasedSeq('20060501/20120207/m')[1]
[1] "Apr 2006"
> timeBasedSeq('20060601/20120207/m')[1]
[1] "May 2006"
> timeBasedSeq('20060701/20120207/m')[1]
[1] "Jun 2006"
> timeBasedSeq('20060801/20120207/m')[1]
[1] "Jul 2006" 
```

顺便说一句，我知道一个人确实会在一天后开始得到“正确”的答案：

```
> timeBasedSeq('20060401/20120207/m')[1]
[1] "Mar 2006"
> timeBasedSeq('20060402/20120207/m')[1]
[1] "Apr 2006" 
```

编辑：这是我的 sessionInfo()

```
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
[1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C              
[3] LC_TIME=en_GB.UTF-8        LC_COLLATE=en_GB.UTF-8    
[5] LC_MONETARY=en_GB.UTF-8    LC_MESSAGES=en_GB.UTF-8   
[7] LC_PAPER=C                 LC_NAME=C                 
[9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_GB.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] xts_0.8-6 zoo_1.7-7

loaded via a namespace (and not attached):
[1] grid_2.15.0    lattice_0.20-6 tcltk_2.15.0   tools_2.15.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T19:16:14.620

这是一个时区问题，所以设置`Sys.setenv(TZ="GMT")`.

```
R> Sys.setenv(TZ="Europe/London"); Sys.time()
[1] "2012-06-23 20:14:58 BST"
R> timeBasedSeq('200603/201202/m')[1]
[1] "Mar 2006"
R> timeBasedSeq('200604/201202/m')[1]
[1] "Mar 2006"
R> Sys.setenv(TZ="GMT"); Sys.time()
[1] "2012-06-23 19:15:49 GMT"
R> timeBasedSeq('200603/201202/m')[1]
[1] "Mar 2006"
R> timeBasedSeq('200604/201202/m')[1]
[1] "Apr 2006" 
```

# android - Android中SQLite的默认线程模式是什么？

> ID：11167834
> 
> 赞同：11
> 
> 时间：2012-06-23T07:52:58.657
> 
> 标签：android, sqlite, sqliteopenhelper

[http://www.sqlite.org/threadsafe.html](http://www.sqlite.org/threadsafe.html)

从上面的链接我了解到，SQLite 支持三种不同的线程模式：单线程、多线程和序列化。我只是想知道“Android中SQLite的默认线程模式是什么”？有什么方法可以务实地改变线程模式吗？如果是这样，我如何以及有什么优势？什么时候选择哪一个有一些样本？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T08:04:42.583

默认模式 -[`Serialized`](http://www.sqlite.org/threadsafe.html)

默认情况下 SqliteDatabase 是线程安全的，你可以在 Android Docs 上查看它，

[`setLockingEnabled(boolean lockingEnabled)`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

从文档 -

> 通过在关键部分周围使用锁来控制 SQLiteDatabase 是否是线程安全的。这是相当昂贵的，所以如果你知道你的数据库只会被一个线程使用，那么你应该将它设置为 false。默认值为真。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-26T04:34:18.550

sqlite的线程模式可以在编译时、启动时和运行时进行配置。

运行时间覆盖开始时间，开始时间覆盖编译时间。除了，单线程模式一旦选择就不能被覆盖。请参阅[sqlite 线程安全](https://www.sqlite.org/threadsafe.html)

Android在编译时使用**序列化。**请参阅[sqlite Android.bp](https://cs.android.com/android/platform/superproject/+/master:external/sqlite/dist/Android.bp)。

但是，从 4.2.2 开始，android 在启动时选择**Multi-thread**。参见[android_database_SQLiteGlobal.cpp](https://cs.android.com/android/platform/superproject/+/master:frameworks/base/core/jni/android_database_SQLiteGlobal.cpp)

# sql - 如何将此子查询优化为联接？

> ID：11167845
> 
> 赞同：6
> 
> 时间：2012-06-23T07:55:29.610
> 
> 标签：sql, postgresql, optimization, postgis

我注意到运行这个子查询

> SELECT ST_Area(ST_Union(ST_Transform(ST_Intersection((SELECT poly1.the_geom from poly1 WHERE poly1.polygon_type='P'),poly2.the_geom),3857)))
> 
> AS area_of_P FROM poly1, poly2

比运行此连接慢得多

> 选择 ST_AREA（ST_Union（ST_Transform（ST_Intersection（poly1.the_geom，poly2.the_geom），3857）））
> 
> AS area_of_poly
> 
> 从聚2
> 
> 在 st_intersects(poly1.the_geom,poly2.the_geom) 上左连接 poly1
> 
> 其中 poly2.polygon_type='P'

但是，我需要扩展第二个加入版本以返回更多列，每个列都计算给定多边形类型的面积，即

> SELECT ST_Area(ST_Union(ST_Transform(ST_Intersection((SELECT poly1.the_geom from poly1 WHERE poly1.polygon_type='P'),poly2.the_geom),3857))) AS area_of_P,
> 
> ST_Area(ST_Union(ST_Transform(ST_Intersection((SELECT poly1.the_geom from poly1 WHERE poly1.polygon_type='S'),poly2.the_geom),3857))) AS area_of_S
> 
> 来自 poly1, poly2

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T08:02:53.217

试试这个。

```
SELECT ST_AREA(ST_Union(ST_Transform(ST_Intersection(poly1.the_geom,poly2.the_geom),3857)))

AS area_of_poly

FROM poly2

LEFT JOIN poly1 on st_intersects(poly1.the_geom,poly2.the_geom)

WHERE poly2.polygon_type IN ( 'P', 'S' ) 
```

编辑：

```
SELECT ST_AREA(ST_Union(ST_Transform(ST_Intersection(ps.the_geom,poly2.the_geom),3857))) AS area_of_P,
       ST_AREA(ST_Union(ST_Transform(ST_Intersection(ss.the_geom,poly2.the_geom),3857))) AS area_of_S
FROM poly2
JOIN poly1 ps ON poly2.polygon_type = 'P' AND st_intersects(ps.the_geom,poly2.the_geom)
JOIN poly1 ss ON poly2.polygon_type = 'S' AND st_intersects(ss.the_geom,poly2.the_geom) 
```

# css - Firefox 13.0.1 css 定位问题

> ID：11167848
> 
> 赞同：1
> 
> 时间：2012-06-23T07:56:49.143
> 
> 标签：css, firefox, positioning

我以前从未遇到过这种事情。除了 Firefox（使用 13.0.1）之外，每个浏览器都能完美呈现包括 IE7 和 8 在内的一切。

在 Firefox 中，所有中心内容似乎都向上移动，页眉和页脚放置正确。此外，底部 UPC 图像似乎以缩放版本和复制的未缩放版本显示。

如果有人知道为什么 Firefox 会改变一切而不是其他一个经过测试的浏览器的原因。我习惯在 IE 中遇到问题，但在 Firefox 中没有。

html 位于 mpact-media.com/index_new.html

谢谢大家的时间和考虑。

我在下面包含了屏幕截图。好的，所以我没有包括它们，因为不允许新用户发布图像。因此，该页面在 Safari、Chrome、Opera、IE7、IE8 和 IE9 中正确显示。

火狐截图

Safari/Chrome 屏幕截图

歌剧截图

IE8 截图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T08:20:54.027

尝试更改`position: relative;`为`position: absolute;`on `#content`：

```
#content {
    display: table-cell;
    left: 0;
    position: absolute;
    text-align: left;
    top: 170px;
    vertical-align: top;
    width: 896px;
} 
```

# c# - 是否可以记录垃圾收集的对象数量？

> ID：11167850
> 
> 赞同：-1
> 
> 时间：2012-06-23T07:56:57.817
> 
> 标签：c#

我正在编写高频交易应用程序。我正在尝试优化我的应用程序以最小化垃圾收集的对象数量。

优化示例：`new Instrument(ticker)`我创建而不是多次调用`HashSet<string /*ticker*/, Instrument>`

所以拥有这样的统计数据会很有趣：当应用程序完成时，我想知道在执行期间有多少对象被垃圾收集。所以后来我可以将此数字与“优化”版本进行比较，以检查“优化”是否确实有效。

如果不可能有这样的统计数据，那么我如何测试我的优化是否有效，即实际上减少了 GC 使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T08:04:21.967

在 .NET 中，您不需要优化*收集*的对象数量。收集的对象花费零收集时间（只要它们不需要最终确定，而且大多数不需要）。

您真正应该优化的是*活动*对象的数量。*GC 时间与*您拥有的数量成正比。[您可以使用各种内存分析工具（包括免费的CLR Profiler](http://www.microsoft.com/en-us/download/confirmation.aspx?id=16273)）来查看您拥有多少内存。

原因是在 .NET 中，GC 的工作原理是遍历所有活动对象，并通过移动它们使它们彼此相邻来简单地“压缩”它们。死物永远不会以任何方式进入这里。他们只是被忽略了。它们最终会被新的分配覆盖。

.NET 中真正的成本是当您每秒分配数万个对象时，它们彼此之间以及与现有的活动对象紧密相连。例如你不断添加和删除其节点的树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T08:18:09.327

如何计算已处置的对象取决于您的实现，但您可以获得`GC Notifications`.

## 垃圾收集通知

这在 .NET 3.5 SP1 中引入了 GC，以在 GC 收集即将开始并且 GC 收集成功完成时生成通知。因此，如果您处于应用程序的资源密集型阶段，GC 通知将允许您收到 GC 即将到来的通知，以便您可以停止当前进程并等待 GC 完成。这使您的应用程序能够顺利运行。

## 获取 GC 通知的步骤：

*   当 GC 接近时调用`GC.RegisterForFullGCNotification`以允许通知。
*   `GC.WaitForFullGCApproach`从应用程序创建一个新线程，并在方法和/或方法的无限循环中连续启动轮询`GC.WaitForFullGCComplete`。
*   `GCNotificationStatus.Succeeded`当必须发出通知时，这两种方法都会返回。
*   在调用线程中用于`GC.CancelFullGCNotification`注销通知进程。

## 示例代码实现

```
public class MainProgram
{
    public static List<char[]> lst = new List<char[]>();
    public static void Main(string[] args)
    {
        try
        {
            // Register for a notification. 
            GC.RegisterForFullGCNotification(10, 10);

            // Start a thread using WaitForFullGCProc.
            Thread startpolling = new Thread(() =>
            {
                while (true)
                {
                    // Check for a notification of an approaching collection.
                    GCNotificationStatus s = GC.WaitForFullGCApproach(1000);
                    if (s == GCNotificationStatus.Succeeded)
                    {
                        //Call event

                        Console.WriteLine("GC is about to begin");
                        GC.Collect();

                    }
                    else if (s == GCNotificationStatus.Canceled)
                    {
                        // Cancelled the Registration
                    }
                    else if (s == GCNotificationStatus.Timeout)
                    {
                        // Timeout occurred.
                    }

                    // Check for a notification of a completed collection.
                    s = GC.WaitForFullGCComplete(1000);
                    if (s == GCNotificationStatus.Succeeded)
                    {
                        //Call event
                        Console.WriteLine("GC has ended");
                    }
                    else if (s == GCNotificationStatus.Canceled)
                    {
                        //Cancelled the registration
                    }
                    else if (s == GCNotificationStatus.Timeout)
                    {
                        // Timeout occurred
                    }

                    Thread.Sleep(500);
                }

            });
            startpolling.Start();

            //Allocate huge memory to apply pressure on GC
            AllocateMemory();

            // Unregister the process
            GC.CancelFullGCNotification();

        }
        catch { }
    }

    private static void AllocateMemory()
    {
        while (true)
        {

            char[] bbb = new char[1000]; // creates a block of 1000 characters
            lst.Add(bbb);                // Adding to list ensures that the object doesnt gets out of scope   
            int counter = GC.CollectionCount(2);
            Console.WriteLine("GC Collected {0} objects", counter);

        }
    }

} 
```

参考：[.NET 4.0 中的垃圾收集通知](http://www.abhisheksur.com/2010/08/garbage-collection-notifications-in-net.html)

# windows - 发送 WM_SETTINGCHANGE 消息刷新桌面

> ID：11167854
> 
> 赞同：1
> 
> 时间：2012-06-23T07:58:12.270
> 
> 标签：windows, refresh, desktop, autoit, user32

我设法通过这个单行程序以编程方式更改我的桌面背景：

```
DllCall("user32.dll", "int", "SystemParametersInfo", "int", 20, "int", 0, "str", $CmdLine[1], "int", 0) 
```

…通过将所需的壁纸拖放到已编译的脚本上。

我有另一个更改桌面的程序，但由于某种原因无法发送`WM_SETTINGCHANGE`消息（我可以看到密钥`HKCU\Control Panel\Desktop\Wallpaper`正在更新）。如何发送此消息以触发壁纸刷新？是`WM_SETTINGCHANGE`正确的消息吗？还是第一个脚本是唯一的方法？

我试过这个但它不起作用：

```
DllCall("user32.dll", "lresult", "SendMessage", _
     "int", 0xffff, _
     "int", 0x001a, _
     "int", 0x0014, _
     "str", "HKCU\Control Panel") 
```

`0xffff`用于将消息广播到每个窗口，`0x001a`代表`WM_SETTINGCHANGE`，`0x0014`是 的代码`spi_setdeskwallpaper`。Windows 7 中的任务栏闪烁，但壁纸没有改变。

如果你用 C、C++ 或 Visual Basic 解决我的问题，我会自己将其转换为 AutoIt（我只需要被调用函数的数字代码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T10:12:29.523

```
#include <SendMessage.au3>
#include <WindowsConstants.au3>

Dim $hWnd = WinGetHandle('[CLASS:Progman]')
_SendMessage($hWnd, $WM_COMMAND, 0x0001A220) 
```

应该管用。如果没有，请告诉我，以便我更新此答案。

# javascript - 使用 Firefox 插件进行跨域通信

> ID：11167858
> 
> 赞同：9
> 
> 时间：2012-06-23T07:58:52.687
> 
> 标签：javascript, firefox, firefox-addon, cross-domain, security

Firefox 插件[允许您进行跨域通信](https://developer.mozilla.org/en/Extension_Frequently_Asked_Questions#I_cannot_initiate_an_XMLHttpRequest_from_my_extension)。

有没有办法公开这个功能，所以我可以从任何页面启动跨域 ajax（假设我已经安装了这个插件）？

**编辑：** 我知道什么是 CORS，只有当您控制服务器时，CORS 才有意义，但我不知道。这里的重点是我控制浏览器，我承担风险，所以我问是否无论如何要将跨域功能从插件阶段导出到用户区。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T08:48:06.073

正如您所说，同源策略仅用于保护客户端（您自己），通常免受 XSS 攻击。

我不确定你想用插件实现什么，但你当然可以[尝试在你自己的机器上执行以下操作](http://prashanth-cpp.blogspot.com/2010/08/bypassing-same-origin-policy-on-firefox.html)。通过更改 Firefox 上的设置，您可以忽略同源策略。

如果您正在尝试开发一个允许跨域访问的插件（因此可能会在您的客户端中打开漏洞），您可能需要使用一些非正统的技巧。我可以想到几种方法，但就像 CORS 一样，您至少需要访问某些服务器。您实际上可以创建一个代理来获取服务器上的资源。即，您插件的用户点击[http://yourwebsite.com/?url=http://someotherwebsite.com/resource](http://yourwebsite.com/?url=http://someotherwebsite.com/resource)。

我想不出办法只做客户端解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T08:07:03.747

跨域通信又名 CORS（跨源资源共享）只有在服务器允许并且浏览器支持的情况下才有可能。

[在这篇维基百科](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)文章中轻松阅读

[在这个W3C](http://www.w3.org/TR/cors/)文档中大量阅读，它仍然是一个工作草案。

[我已经在C# Webserver](http://webserver.codeplex.com/)中使用了 CORS 一年了。我注意到每当我不在服务器端添加 CORS 标头时，我都会遇到`same origin policy`. 即使请求相同的 IP 地址但不同的端口。

如果服务器不支持 CORS，你可能会发现你的跨域请求失败

编辑：

我最近了解到可以使用[Yahoo!解决相同的域策略。查询语言 (YQL)](http://developer.yahoo.com/yql/)。有关更多信息，请参阅链接。

有关使用带有 xml 响应的 jquery的示例[Cross Domain Post 方法 ajax 调用，请参阅此 SO 项](https://stackoverflow.com/q/11239584/474535)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T21:45:54.070

您也许可以使用这个 gem：[https ://github.com/progrium/localtunnel](https://github.com/progrium/localtunnel)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T20:30:23.477

[用户脚本](https://stackoverflow.com/questions/688002/how-to-create-a-browser-plug-in)具有跨域 XMLHttpRequest，它们甚至可以在所有浏览器上运行。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-03T15:18:29.877

你可以访问其他服务器吗？JSONP 如果您有访问权限，这通常是一个好主意。

[http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

# android - ICS 拆分呼叫/通知量

> ID：11167860
> 
> 赞同：1
> 
> 时间：2012-06-23T07:59:11.187
> 
> 标签：android, notifications, android-4.0-ice-cream-sandwich, volume

我的应用程序能够设置声音配置文件，如会议模式、夜间模式、正常......在每一个中，您都可以选择来电和通知的音量值。例如，夜间模式有通话音量（如果我有紧急呼叫），没有通知（如果收到迟到的电子邮件或whatsapp，它不会叫醒我）。到目前为止它工作得很好，但我发现它在 Android 4 Ice Cream Sandwich 中失败了。出于一些我无法理解的原因，ICS 将铃声音量和通知音量联系在一起。因此，晚上您还会听到烦人的垃圾邮件或短信。

知道如何拆分/解开它们吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:00:19.183

ICS+ 已将铃声和通知卷合并为一卷。无法通过代码取消链接这些音量控件。但是，您可以根据情况调整新的统一通知音量。当有人打电话时，我在音频控制中使用它，它会应用预先选择的音量设置来模仿铃声音量，并在通话结束后调整回之前的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:39:29.877

我在使用 Android 4 ICS 时遇到了类似的问题：我是一名飞行员，有时我处于待命状态（也在晚上） 当这种情况发生时，我不想被收到的邮件或短信吵醒，而是被电话吵醒当然必须通过。[Matthew Rice](http://www.mobiletrialware.com/)的**付费版**“[音频控制](https://play.google.com/store/apps/details?id=com.matthew.rice.volume.master&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5tYXR0aGV3LnJpY2Uudm9sdW1lLm1hc3RlciJd)”为我解决了这个问题。它可以让我在不受短信或邮件干扰的情况下入睡，但一个电话或我的闹钟会叫醒我！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T04:55:47.793

我的 RAZR 上的 ICS (4.0.4) 具有通知和铃声音量作为单独的滑块，无法链接它们。音量摇杆控制“活动”的任何音量，这意味着手机空闲时的铃声、通话时的通话音量以及运行应用程序或收听媒体时的媒体/应用程序音量。

# c# - 组合框 if 语句

> ID：11167861
> 
> 赞同：7
> 
> 时间：2012-06-23T07:59:14.960
> 
> 标签：c#, combobox, visual-c#-express-2010

我在这里的组合框有问题。我所做的是制作了一个组合框，使用`comboBox1.Items.Add("Something");`. 现在我在那里做了一个文本框，我需要的是当我从组合框中选择一些东西时，文本框会根据组合框中的选定项目而变化。我认为它会做的是

```
if(comboBox1.SelectedItem.ToString() == "Something")
{
    textBox1.Text = "Something";
} 
```

但由于某种原因它不起作用，我尝试了没有`ToString()`和仍然没有工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T08:01:57.030

尝试使用： `comboBox1.SelectedText`

```
if(comboBox1.SelectedText == "Something")
{
      textBox1.Text = "Something";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T08:12:46.443

双击您的组合框，它将为您生成事件（`SelectedIndexChanged`默认情况下）。**将您的代码放入生成的事件中**。当您更改组合框选定值时，您可以看到文本框值相应更改。

如果您需要在文本框中显示组合框选定的值，您可以将下面的代码放入生成的事件中

```
textBox1.Text = comboBox1.SelectedItem.ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T09:56:17.353

哦发现问题了。我将代码放在错误的部分（在 textBOX_click 上）部分：P

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T08:03:00.830

将您的代码放入`comboBox1_SelectedIndexChanged`事件中

```
if(comboBox1.SelectedItem.Value.ToString() == "Something")
{
    textBox1.Text = "Something";
}
else
{
    textBox1.Text = "";
} 
```

或者一个简洁的版本

```
textBox1.Text = 
comboBox1.SelectedItem.Value.ToString() == "Something" ? "Something" :""; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T08:07:23.557

试试这个

```
 private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            if (comboBox1.SelectedItem.ToString() == "Something")
            {
                textBox1.Text = "Something";
            }
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-23T10:07:56.727

根据您的问题，我想无论`selectedItem`您想在`TextBox`. 那么，你为什么不使用这个：

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    textBox1.Text = comboBox1.SelectedText.ToString();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-26T12:44:32.030

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (comboBox1.SelectedItem.ToString() == "M.Naveed")
        {
            textBox1.Text = textBox1.Text + ("Networking");
            textBox2.Text = textBox2.Text + ("Networking");
            textBox1.Text = textBox1.Text + ("mobile");
            textBox2.Text = textBox2.Text + ("mobile");
            ListViewItem li = new ListViewItem("Networking");
            li.SubItems.Add("mobile");
            listView1.Items.Add(li);

        }
        else if (comboBox1.SelectedItem.ToString() == "Zeeshan")
        {
            textBox1.Text = textBox1.Text + ("Networking");
            textBox2.Text = textBox2.Text + ("Networking");
            textBox1.Text = textBox1.Text + ("Jave");
            textBox2.Text = textBox2.Text + ("Jave");
            ListViewItem li = new ListViewItem("Networking");
            li.SubItems.Add("Jave");
            listView1.Items.Add(li);

        }
        else if (comboBox1.SelectedItem.ToString() == "Shamsher")
        {
            textBox1.Text = textBox1.Text + ("Networking"); textBox1.Text = " ";
            textBox2.Text = textBox2.Text + ("Networking");
            textBox1.Text = textBox1.Text + ("Web");
            textBox2.Text = textBox2.Text + ("Web");
            ListViewItem li = new ListViewItem("Networking");
            li.SubItems.Add("Web");
            listView1.Items.Add(li);

        }

        else if (comboBox1.SelectedItem.ToString() == "Mudasir")
        {
            textBox1.Text = textBox1.Text + ("Networking");
            textBox2.Text = textBox2.Text + ("Networking");
            textBox1.Text = textBox1.Text + ("Team Fundation");
            textBox2.Text = textBox2.Text + ("Team Fundation");
            ListViewItem li = new ListViewItem("Networking");
            li.SubItems.Add("Team Funadation");
            listView1.Items.Add(li);

        }

        }

    private void textBox1_TextChanged(object sender, EventArgs e)
    {

    }

    private void button1_Click(object sender, EventArgs e)
    {
        comboBox1.Items.Add("Someting");

        comboBox1.Items.Add("Mcs");
    }

    private void button2_Click(object sender, EventArgs e)
    {
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        comboBox1.Items.Add("M.Naveed");
        comboBox1.Items.Add ("Mudasir");
        comboBox1.Items.Add ("Zeeshan");
        comboBox1.Items.Add("Shamsher");

    }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-06T09:54:29.223

选项1：

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (comboBox2.SelectedItem.ToString() == "Dr")
    {
        MessageBox.Show("its dr");
    }
    else
    {
        MessageBox.Show("its cr");
    }
} 
```

选项 2：

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (comboBox2.Text == "Dr")
    {
        MessageBox.Show("its dr");
    }
    else
    {
        MessageBox.Show("its cr");
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-15T17:28:52.597

试试这个，在你的 InitializeComponent() 添加这个

```
private void InitializeComponent()
{
//
// combobox
//
this.combobox.SelectedIndexChanged += new System.EventHandler(this.changed);
} 
```

然后在你的主要方法中，创建这个方法

```
private void changed(object sender, EventArgs e)
{
if(this.combobox.Text == "Something")
Textbox1.Text = "Something";
} 
```

# android - 拖动多个图像不起作用

> ID：11167865
> 
> 赞同：6
> 
> 时间：2012-06-23T07:59:43.513
> 
> 标签：android

我正在开发一个在图像上使用拖放的应用程序，我可以在相对布局中添加任意数量的图像。我可以拖动图像，但一次只能拖动一个。添加新图像后，所有以前的图像都不可触摸。

```
public void addImage(Bitmap bmp)
{
    ivtest= new ImageView(TabletActivity.this);
    if(bmp!=null)
    {
        ivtest.setImageBitmap(bmp);
        rlAddView.addView(ivtest,  new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

        bmp= null;
    }
    ivtest.setTag("sdjfjd");
    ivtest.bringToFront();
    ivtest.setScaleType(ScaleType.MATRIX);
    ivtest.setOnTouchListener(this);
} 
```

这是我添加新图像的代码。ivtest 是一个全局 imageView。

```
public class TestImage extends View  implements OnTouchListener
{
private ScaleGestureDetector mScaleDetector;
private float mScaleFactor = 1.f;
private Drawable mIcon;
private float mLastTouchX;
private static final int INVALID_POINTER_ID = -1;

// The ‘active pointer’ is the one currently moving our object.
private int mActivePointerId = INVALID_POINTER_ID;
 private float mPosX;
    private float mPosY;

    private float mLastTouchY;

public TestImage(Context context, Drawable _micon)
{
    super(context);
     mIcon =_micon; 
     WindowManager wManager= (WindowManager)context.getSystemService(Context.WINDOW_SERVICE);
     mIcon.setBounds((int)getPivotX(), (int)getPivotY(), mIcon.getIntrinsicWidth(),mIcon.getIntrinsicWidth());

//  setOnTouchListener(this);

    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());

}

 @Override
 public boolean onTouch(View view, MotionEvent ev)
 {

        mScaleDetector.onTouchEvent(ev);

        final int action = ev.getAction();
        switch (action & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN: 
        {
            final float x = ev.getX();
            final float y = ev.getY();

            mLastTouchX = x;
            mLastTouchY = y;
            mActivePointerId = ev.getPointerId(0);
            break;
        }

        case MotionEvent.ACTION_MOVE: {
            final int pointerIndex = ev.findPointerIndex(mActivePointerId);
            final float x = ev.getX(pointerIndex);
            final float y = ev.getY(pointerIndex);

            // Only move if the ScaleGestureDetector isn't processing a gesture.
            if (!mScaleDetector.isInProgress()) {
                final float dx = x - mLastTouchX;
                final float dy = y - mLastTouchY;

                mPosX += dx;
                mPosY += dy;

                invalidate();
            }

            mLastTouchX = x;
            mLastTouchY = y;

            break;
        }

        case MotionEvent.ACTION_UP: {
            mActivePointerId = INVALID_POINTER_ID;
            break;
        }

        case MotionEvent.ACTION_CANCEL: {
            mActivePointerId = INVALID_POINTER_ID;
            break;
        }

        case MotionEvent.ACTION_POINTER_UP: {
            final int pointerIndex = (ev.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) 
                    >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
            final int pointerId = ev.getPointerId(pointerIndex);
            if (pointerId == mActivePointerId) {
                // This was our active pointer going up. Choose a new
                // active pointer and adjust accordingly.
                final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
                mLastTouchX = ev.getX(newPointerIndex);
                mLastTouchY = ev.getY(newPointerIndex);
                mActivePointerId = ev.getPointerId(newPointerIndex);
            }
            break;
        }
        }

        return true;

}

@Override
public void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    canvas.save();
    canvas.translate(mPosX, mPosY);
    canvas.scale(mScaleFactor, mScaleFactor);
    mIcon.setBounds(0, 0, mIcon.getIntrinsicWidth(),mIcon.getIntrinsicWidth());
    mIcon.draw(canvas);
    canvas.restore();
}

private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        mScaleFactor *= detector.getScaleFactor();

        // Don't let the object get too small or too large.
        mScaleFactor = Math.max(0.1f, Math.min(mScaleFactor, 5.0f));

        invalidate();
        return true;
    }
} 
```

}![在此处输入图像描述](../Images/ef9d83bc80e40a3115343875a78c559e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:24:44.543

我找到了答案。这是一个在视图上实现拖放、旋转、缩放的库项目。 [http://code.google.com/p/android-multitouch-controller/](http://code.google.com/p/android-multitouch-controller/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T08:41:00.800

定义时不应使用`FILL_PARENT`宽度和高度`LayoutParams`，因为它“覆盖”了布局中的所有其他视图。改为使用`WRAP_CONTENT`。

# php - 在检查电话号码的情况下在 PHP 中使用正则表达式

> ID：11167869
> 
> 赞同：1
> 
> 时间：2012-06-23T08:00:32.567
> 
> 标签：php

我有一个变量，它只允许数字、破折号和括号，电话号码没有特定的长度，并且验证必须在 php 中完成，不允许使用 javascript，

**编辑** 只是想在正则表达式中也允许空格....

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T08:12:07.960

所以，我对这里的问题有点困惑，但我会试一试，希望它能让你到达你需要的地方。

这将允许任何包含指定字符的内容。`(303)123-4567`将被允许​​。一样`32084248())(21324234--234242-23-`（显然不是电话号码）

```
if( preg_match("/^[0-9() -]+$/", $number) {
    // Only numbers, parens and hypens allowed
} 
```

如果你想让正则表达式更严格一点，我们可以限制为美式数字：

```
if( preg_match("/^\d{0,3}-?(?:\(\d{3}\)|\d{3})-?\d{3}-?\d{4}$/", $number) {
    // US Phone number
} 
```

这将只允许带有可选国家代码的美式编号。请参阅此[ReFiddle Link](http://refiddle.com/2ay)以获得更详尽的匹配号码列表，这将允许。

# .htaccess - htaccess url 重写/重定向 - 就像 facebook 一样

> ID：11167871
> 
> 赞同：3
> 
> 时间：2012-06-23T08:00:39.650
> 
> 标签：.htaccess

我有一个像`www.example.com/mypage.php?id=324`

该数字 324 是自动递增的（意味着该人是网站的第 324 个用户），每个用户都可以设置自己的用户 url，该用户 url 存储在 mysql 表中（仅限字母数字）。

假设用户号 324 的用户 url 为“peter”

我正在尝试替换`mypage.php?id=324`为 peter，因此 url 可以显示为`www.example.com/peter`

但是我还是想在`mypage.php?id=324`内部维护，所以如果有人`www.example.com/mypage.php?id=324`输入，可以重定向到`www.example.com/peter`

我猜这是像 facebook 一样的虚荣网址？

我已经在网上搜索过，甚至还买了一本关于 htaccess 的书，但我仍然无法弄清楚这一点。请帮我！非常感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T08:08:30.793

URL重写一步一步...

## 第 1 步 - 决定您希望客户端 URL 的外观

你已经完成了这部分 - 你想`example.com/peter`成为你的用户所看到的

## 第 2 步 - 计算服务器端 URL

从技术上讲，您可以生成大量硬编码的重写规则，例如

```
RewriteRule ^peter$ mypage.php?id=324
RewriteRule ^alice$ mypage.php?id=325
RewriteRule ^bob$ mypage.php?id=326 
```

但是当你有很多用户时，这并不是特别有效。

您的 mypage.php 将接受一个 id，但您确实需要对其进行修改，以便它可以接受一个可能的用户名（但假设它将包含各种垃圾）。假设您决定允许它采用另一个查询字符串参数“提示”。所以现在你必须得到一个这样的 URL：`example.com/mypage.php?hint=peter`

确保您的脚本为它不理解的任何用户名生成 404 响应。

## 第 3 步 - 将客户端 URL 映射到服务器端 URL 的产品重写规则

这样做的一种方法是这样的 - 第一个[RewriteCond](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)行确保规则仅在请求与实际文件不匹配时触发。[RewriteRule](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)将导致请求由 mypage.php 处理，但将 URL 的其余部分作为“提示”参数传递。'qsa' 部分是 'query string append' 的缩写，这意味着原始 URL 中存在的任何查询字符串都将添加到书面规则中。“l”表示“最后一个”，因此不会调用进一步的规则来处理此请求。

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([a-z]+)$ mypage.php?hint=$1 [qsa, l] 
```

在 mypage.php 中，您将使用提示查找用户。

请注意，我对模式的限制非常严格，只允许使用小写字母序列。这将有助于确保不会为您的站点可能产生的每个 404 调用您的脚本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T08:27:29.197

> ```
> But I still want to maintain mypage.php?id=324 internally, so if someone types 
> www.example.com/mypage.php?id=324, redirected to www.example.com/peter 
> ```

不推荐您建议的网址，有类似`http://www.example.com/users/peter`的更好，然后您可以重写规则，如..

```
RewriteRule ^/users/(.*)  /mypage.php?username=$1  [QSA,L] 
```

在你的 mypage.php 中，你可以试试

```
<?php

if (isset($_GET["id"])) {
    // Get the $username from DB
    // Do the redirection to http://www.example.com/users/$username if found, 
    // else send 404     
} else if (isset($_GET["username"]) {
    // normal flow with $username
} 
```

# ubuntu - 向网络上的应用程序发送数据和从应用程序发送数据（ubuntu）

> ID：11167880
> 
> 赞同：0
> 
> 时间：2012-06-23T08:02:57.943
> 
> 标签：ubuntu, communication

我正在尝试创建一个类似 Siri 的程序，在其中我将文本数据从客户端发送到服务器，这允许客户端在服务器计算机上的应用程序中传递函数并设置条件。

这是我的第一个基于网络的项目，并且从未真正尝试过类似的东西，所以我对端口和协议等有点害怕。我发现有大量关于远程文件管理 (SSH) 和远程桌面连接等的信息......但是基于应用程序通信的信息量很少。

我想我将不得不使用某种类型的远程过程调用并作为函数的指数传递，但我并不完全确定。

我不是在寻找关于 Ubuntu Linux 整个网络方面的直接答案——只是指向正确方向的一个点。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T08:38:46.427

检查节俭我认为这就是你要找的

# linux - 在linux中创建文件夹的地方？

> ID：11167882
> 
> 赞同：-2
> 
> 时间：2012-06-23T08:02:59.707
> 
> 标签：linux, security, filesystems

今天我对这个问题的答案很感兴趣：
你在哪里创建你在 linux 中的工作文件夹？
在您的`/home`目录中`/usr/share/your_name'`还是在其他地方？
您如何看待，为您自己的项目、摄影、文档等选择文件夹的最佳做法是什么。
以及如何使我的项目文件夹更受保护？

我在我的`home`目录中创建文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T08:06:47.583

/home 目录是不错的选择，在安装过程中，如果您正在执行 ubuntu 设置，您还可以选择加密 /home 目录。

所以 /home 和它下面的子目录是有道理的。/user 目录基本上是用于一般软件安装。

对于任何 linux 文件结构都类似于以下链接：http: [//blogs.digitss.com/linux/ubuntu/ubuntu-debian-file-system-organization/](http://blogs.digitss.com/linux/ubuntu/ubuntu-debian-file-system-organization/)

# python - 沉默樱桃

> ID：11167884
> 
> 赞同：4
> 
> 时间：2012-06-23T08:03:02.420
> 
> 标签：python, cherrypy

我有一个将 xml 文件分发到网页的cherrypy 服务器。当我的服务器运行时，cherrypy 为每个被请求的网页提供日志，说明时间戳和 URL。对于典型的使用来说，这是一个相当不错的功能，但是当请求达到每秒 10 个请求时，日志可能会变得有点过多。特别是当我试图滚动它们以找到一些重要的调试信息时。当不必要的日志填满历史缓冲区删除调试信息时，它会变得更好。

这变得相当烦人。我希望有办法关闭它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T08:21:17.333

请参阅[有关日志记录的 CherryPy 文档](http://docs.cherrypy.org/en/latest/pkg/cherrypy.html#module-cherrypy._cplogging)。

```
logger = cherrypy.log.access_log
logger.removeHandler(logger.handlers[0]) 
```

# c# - 为什么 ConfigurationManager 不适用于子项目

> ID：11167887
> 
> 赞同：0
> 
> 时间：2012-06-23T08:03:15.960
> 
> 标签：c#, .net, winforms, app-config

在一个解决方案中，我有三个项目，你可以在图片上看到。想从主项目访问 project-1 和 project-2，使用下面的语法来显示所需的项目，但问题是当我试图找到配置文件值时显示给我错误“对象引用未设置为对象的实例。” 注意：单独每个项目都可以完美运行，每个项目都可以获取配置文件信息而不会显示任何错误。但是从主项目开始时它们不起作用。

需要帮助获取每个项目的配置文件值

**主项目中的语法使用**

```
using UI2;
using UI1;

      if (radioButton1.Checked)
                {
                    UI1.Form1 fm = new UI1.Form1();
                    fm.Show();

                }
                if (radioButton2.Checked)
                {
                    UI2.Form1 fm = new UI2.Form1();
                    fm.Show();

                } 
```

如果有任何疑问请询问，在此先感谢。

![在此处输入图像描述](../Images/a7ae6ade0be236812d158f64619109d1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:22:26.470

您还可以使用“MSBuild”任务调用您的子类。作为参考，您可以访问此页面[msdn.microsoft.com/en-us/library/z7f65y0d.aspx](http://msdn.microsoft.com/en-us/library/z7f65y0d.aspx)

# .net - 比较.net类型字典中的两种类型

> ID：11167889
> 
> 赞同：0
> 
> 时间：2012-06-23T08:03:45.320
> 
> 标签：.net, vb.net, comparison

如果存储的类型相等，我需要比较两个字典值，这就是我所拥有的

```
if gettype(Args(key)) = gettype(argtypes(key)) then
'' do something
end if 
```

我收到一个错误

```
Type Args is not defined 
```

请问你能帮我解决这个问题吗

编辑

最初声明为的两个字典

```
Dim dictionaryName As Dictionary(Of Object, Object) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T08:10:50.797

`gettype`需要一个类型。你给它一个价值。要获取值的类型，请调用`GetType`该值：

```
Args(key).GetType() = argtypes(key).GetType() 
```

# php - AJAX PHP - 接收获取多个变量数据

> ID：11167891
> 
> 赞同：0
> 
> 时间：2012-06-23T08:04:07.457
> 
> 标签：php, ajax, get

我有一个 php 文件，其中包含一些变量，如 $name1、$name2... 我如何使用 AJAX 在我的检查循环页面中接收这些值？

**主循环页面。**

```
<script type="text/javascript">
function checkdata ( )
{
  ....?
}
  setTimeout ( "checkdata()", 3000 );
</script> 
```

**PHP 文件 (info.php)**

```
<?php
$name1=7;
$name2=3;
.
.
.
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T08:09:30.137

PHP

```
$info['name1'] = 7;
$info['name2'] = 3;
echo json_encode($info); 
```

JS

```
function checkData()
{
    $.ajax({
       url: "info.php",
       dataType: "JSON",
       success: function(info){
           alert(info.name1);
           alert(info.name2);
       }
    });
} 
```

# web-services - JAX-WS MessageCreationException

> ID：11167893
> 
> 赞同：0
> 
> 时间：2012-06-23T08:04:27.467
> 
> 标签：web-services, soap, jax-ws

我创建了一个返回响应的简单 Web 服务，但由于 .

我在这个只有返回响应的 web 服务方法中有四个方法有这个问题。

```
com.sun.xmlns.soap.MessageCreationException: Couldn't create SOAP message due to exception: XML reader error: com.ctc.wstx.exc.WstxEOFException: Unexpected EOF; was expecting a close tag for element <S:Body>

cause by com.sun.xml.ws.streaming.XMLStreamReaderException: XML reader error: com.ctc.wstx.exc.WstxEOFException: Unexpected EOF; was expecting a close tag for element <S:Body>

cause by com.ctc.wstx.exc.WstxEOFException: Unexpected EOF; was expecting a close tag for element 
```

知道如何解决这个问题吗？这个问题的根本原因是什么？我猜由于没有添加`<S:Body>`结束标记，创建 SOAP 消息失败。为什么会这样？

我不知道如何从这里进一步调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T02:03:41.367

这是由于错误的 WSDL 创建和实体类。

# java - 玩！框架返回 json 响应

> ID：11167895
> 
> 赞同：11
> 
> 时间：2012-06-23T08:04:40.897
> 
> 标签：java, playframework, playframework-2.0

我正在使用 Play！框架 2.0，我是这个框架的新手。如何在白色 html 页面中只返回我的模型的 json 表示？

我正在做的是

```
public static void messagesJSON(){  
   List<Message> messages = Message.all();  
   renderJSON(messages);  
} 
```

但我得到错误：不能使用返回 Unit 作为处理程序的方法

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-23T14:22:31.193

怎么样 `return ok(Json.toJson(Moments.all());`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-23T09:24:07.137

您使用的方法来自 Play 1.x，在 Play 2.0 中略有不同。从文档中，这是一个如何回复`sayHello`JSON 请求的示例

```
@BodyParser.Of(Json.class)
public static Result sayHello() {
  ObjectNode result = Json.newObject();
  String name = json.findPath("name").getTextValue();
  if(name == null) {
    result.put("status", "KO");
    result.put("message", "Missing parameter [name]");
    return badRequest(result);
  } else {
    result.put("status", "OK");
    result.put("message", "Hello " + name);
    return ok(result);
  }
} 
```

您所问的重要部分是`return ok(result)`返回 JSON `ObjectNode`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-23T08:58:04.587

从您的列表中创建一个新模型：

```
public static Result getBusinesses(){
    List<Business> businesses = new Model.Finder(String.class,  Business.class).all();
    return ok(Json.toJson(businesses));  //displays JSON object on empty page
} 
```

在 Business.java 类中，我有一个静态变量：

```
public static Finder<Long,Business> find = new Finder(Long.class, Business.class); 
```

添加路由后，这将在 localhost:9000/getBusinesses 上显示 JSON 对象：

```
GET      /getBusinesses   controllers.Application.getBusinesses() 
```

# algorithm - 插入排序最坏情况运行时间

> ID：11167897
> 
> 赞同：-1
> 
> 时间：2012-06-23T08:04:47.213
> 
> 标签：algorithm, insertion-sort

为什么在最坏情况下插入排序的运行时间复杂度是 n(n-1)/2 ~ n^2？突出除以2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T08:17:47.800

1.  运行时间不是`n(n-1)/2`，每个步骤都需要超过 1 台机器 OP（在我知道的所有机器中）。这就是我们通常在算法分析中使用[大 O 表示法](http://en.wikipedia.org/wiki/Big_O_notation)和“忽略”常量的原因——我们希望使我们的分析通用且独立于平台。

2.  插入排序被分析为`n(n-1)/2 = O(n^2)`因为它是 [算术级数之和](http://en.wikipedia.org/wiki/Arithmetic_progression#Sum)。第一次迭代需要 1 步，第二次需要 2 步，.. 第 n 次需要 n 步，所以我们`1 + 2 + ... + n = n(n-1)/2`从算术级数的总和中得到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T13:21:19.293

*算法介绍*在2.1章详细介绍了插入排序，讨论了插入排序的全过程。

最坏的情况是子阵倒序切换引起的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-20T21:46:54.803

我知道这已经永远关闭了，但我想为其他试图复习插入排序最坏情况背后的数学的人添加这个。我找到了一个很棒的[视频](https://www.youtube.com/watch?v=3DMMhE9ca9Q)，它以这种方式解释了 n(n-1) / 2 公式：

评估总和：

![在此处输入图像描述](../Images/cdd303b7454453c22d21084ec3235fad.png)

您首先将其放入系列符号（称为 s）：

```
s = 1  + 2 + 3 + ... n-3+n-2+n-1 
```

然后反向显示：

```
s = n-1+n-2+n-3+ ...  3 + 2 + 1 
```

通过将每一对相加将 s 与 s 相加，您将得到：`n+n+n+....n+n+n`

或者换句话说`2s = n(n-1)`，因为你有 n，n-1 次，并且你花了其中两个来获得它。

那么你只需要解决 的`2s = n(n-1)`不等式`s = n(n-1) / 2`。

# encryption - RAR密码恢复

> ID：11167899
> 
> 赞同：0
> 
> 时间：2012-06-23T08:06:02.450
> 
> 标签：encryption, rar

如果我有加密的 RAR 文件，并且我也有未加密的文件，是否有任何方法可以找到 AES 用来解密它的密码？

RAR 如何单独加密文件，还是将它们全部加密？（在文件名未加密的情况下）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T08:28:40.280

不，您找不到密钥，这将需要蛮力攻击。

它单独加密文件，可以[在互联网上轻松找到的信息](https://superuser.com/questions/409675/is-it-possible-for-two-files-in-a-rar-to-have-different-passwords)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-26T05:03:46.590

好吧，你不会找到钥匙或后门。

您需要的是蛮力攻击或字典攻击。

您可以尝试[免费的在线 rar 密码恢复服务](http://7password.com)。

# sql-server - SQL Server 中的 HH:MM 格式

> ID：11167903
> 
> 赞同：3
> 
> 时间：2012-06-23T08:06:38.300
> 
> 标签：sql-server

我正在使用存储过程，并且我有一个列名称 timespent，我只想显示为 HH:MM 格式，该过程工作正常，但唯一的问题是当前花费的时间是 hh:mm:ss 格式. 指导我如何以 HH:MM 格式花费时间并尽可能纠正我的程序。程序是这样的：-

```
CREATE procedure St_Proc_GetUserReportforCurrentDayTask              
@userID int              
as              
Begin              
    set NoCount on;              
    DECLARE @TODAY DATE                
    SET @TODAY = CONVERT(VARCHAR(10), GETDATE(), 111)              
    select CONVERT(VARCHAR,production.CalendarDate,101) + RIGHT (CONVERT(VARCHAR,production.CalendarDate , 100 ) ,7) as Date,               
    RegionAndProjectInfo.RegionProjectName as Region ,              
    County.CountyName as County,              
    WorkType.WorkTypeName as WorkType,              
    Task.TaskName as Task,  
    Production.VolumeProcessed as 'Volumes Processed',              
    Production.TimeSpent as 'Duration (HH:MM)'              
    from Production               
    inner join RegionAndProjectInfo              
    on              
    RegionAndProjectInfo.RegionProjectID=Production.RegionProjectID              
    inner join County              
    on               
    County.CountyID=Production.CountyID              
    inner join WorkType              
    on              
    WorkType.WorkTypeID=Production.WorkTypeID              
    inner join Task              
    on              
    Task.TaskID=Production.TaskID              
    where Production.UserID=@userID and CalendarDate >= @TODAY              
End 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-23T08:11:10.653

尝试这个

```
select SUBSTRING( convert(varchar, getdate(),108),1,5) 
```

将 getdate() 替换为您的列名。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-23T08:15:23.913

我试过了，它奏效了

```
declare @dt datetime
    set @dt = '07:30'
    select convert(varchar(5),@dt,108) 
```

# ruby - ruby oci8 生成 oracle AWR 报告

> ID：11167906
> 
> 赞同：1
> 
> 时间：2012-06-23T08:07:12.893
> 
> 标签：ruby, oracle, oci8, awr

谢谢你的时间！

我想使用 ruby​​ oci8 连接到 oracle 数据库以生成 AWR 报告。

当我通过命令行执行此操作时，代码如下：

```
sqlplus sys/a@10.69.152.97/load as sysdba
SQL> define num_days = ''
SQL> define report_type = "html"
SQL> define begin_snap = 100
SQL> define end_snap = 101
SQL> define report_name = C:\tttt.html
SQL> @?\rdbms\admin\awrrpt.sql 
```

我只想使用 Ruby 自动化这项工作。我用谷歌搜索，发现 oci8 可能有帮助。所以我只是像这样形成我的代码：

```
require 'oci8'
onn = OCI8.new('sys/a@10.69.152.97/load as sysdba')
conn.exec("define num_days = '';")
conn.exec('define report_type="html"')
onn.exec('define begin_snap = 100')
conn.exec('define end_snap = 101')
conn.exec('define report_name = C:\tttt.html')
conn.exec('@?\rdbms\admin\awrrpt.sql') { |r| puts r} 
```

当我在cmd中运行它时，它失败了。

失败的消息是：

```
 Warning: NLS_LANG is not set. fallback to US7ASCII.

    stmt.c:253:in oci8lib_191.so: ORA-00900: invalid SQL statement (OCIError)

    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/ruby-oci8-2.1.2-x86-mingw32/lib/oci8/oci8.rb:474:in `exec'

    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/ruby-oci8-2.1.2-x86-mingw32/lib/oci8/oci8.rb:282:in `exec_internal'

    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/ruby-oci8-2.1.2-x86-mingw32/lib/oci8/oci8.rb:275:in `exec'

    from automate_awr.rb:4:in `<main>' 
```

此外，我可以成功登录oracle并使用oci8执行select语句。

我哪里错了？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:29:51.980

主要问题是您混淆了应该在服务器端执行的查询和要在客户端执行的 sqlplus 命令。

define 和 @ 命令是 sqlplus 命令，在客户端执行。它们不会发送到 Oracle。通过 oci8 模块，Ruby 可以使用 OCI 连接到 Oracle。它可以向服务器发送任何查询，但当然，它不能运行 sqlplus 命令。

"?\rdbms\admin" 中的脚本应该从 sqlplus 执行。如果您确实需要从 Ruby 运行它们，我建议使用 Ruby [Open3](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html)模块来分叉一个 sqlplus 进程并使用管道提供输入参数。

应该可以使用基于以下代码的东西：

```
commands = "
  define num_days = ''
  define report_type = 'html'
  define begin_snap = 100
  define end_snap = 101
  define report_name = C:\tttt.html
  @?\rdbms\admin\awrrpt.sql
"
res, s = Open3.capture2e("sqlplus -S sys/a@10.69.152.97/load as sysdba", :stdin_data=>commands) 
```

# ssl - openssl中的压缩

> ID：11167907
> 
> 赞同：3
> 
> 时间：2012-06-23T08:07:20.577
> 
> 标签：ssl, compression, openssl

我想看看如何`openssl`压缩数据并将其发送到 SSL 服务器。我尝试查看 Openssl 代码，但我不明白。

基本上，我想编写简单的客户端程序，然后将压缩数据发送到 SSL 服务器。我已经构建了一个可以连接到服务器的简单客户端。

有小费吗？怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T13:07:02.880

要使用 OpenSSL 进行压缩，需要注意以下几点：

1.  OpenSSL 库应该在没有宏 OPENSSL_NO_COMP 的情况下构建
2.  如果您在存在 zlib 的 linux 上运行，则还必须启用宏 ZLIB_SHARED
3.  在使用 OpenSSL 库时，您可以调用 SSL_COMP_get_compression_methods() 函数，该函数将加载内置的压缩​​方法。
4.  如果要加载自己的压缩方法，请使用 SSL_COMP_add_compression_method() 函数。

确保您使用的是最新的[OpenSSL 版本](http://www.openssl.org/source/)。

有关压缩和 SSL_COMP_add_compression_method 方法的更多信息可以从[这里](http://www.openssl.org/docs/manmaster/man3/SSL_COMP_add_compression_method.html)获得。

# c# - 如何在wpf c#中从数据表导出到excel文件

> ID：11167918
> 
> 赞同：8
> 
> 时间：2012-06-23T08:09:00.973
> 
> 标签：c#, wpf, excel, datatable, export

我有一个数据表，希望将其导出到 excel 文件，它是一个 wpf 应用程序，我找到的所有解决方案都是针对 web 应用程序 asp.net 请帮助...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-23T08:50:34.103

只是为了让所有人都看得更清楚

```
Microsoft.Office.Interop.Excel.Application excel = null;
Microsoft.Office.Interop.Excel.Workbook wb = null;

object missing = Type.Missing;
Microsoft.Office.Interop.Excel.Worksheet ws = null;
Microsoft.Office.Interop.Excel.Range rng = null;      

try
{
    excel = new Microsoft.Office.Interop.Excel.Application();
    wb = excel.Workbooks.Add();
    ws = (Microsoft.Office.Interop.Excel.Worksheet)wb.ActiveSheet;

    for (int Idx = 0; Idx < dt.Columns.Count; Idx++)
    {
        ws.Range["A1"].Offset[0, Idx].Value = dt.Columns[Idx].ColumnName;
    }

    for (int Idx = 0; Idx < dt.Rows.Count; Idx++)
    {  // <small>hey! I did not invent this line of code, 
       // I found it somewhere on CodeProject.</small> 
       // <small>It works to add the whole row at once, pretty cool huh?</small>
       ws.Range["A2"].Offset[Idx].Resize[1, dt.Columns.Count].Value = 
       dt.Rows[Idx].ItemArray;
    }

    excel.Visible = true;
    wb.Activate();
}
catch (COMException ex)
{
    MessageBox.Show("Error accessing Excel: " + ex.ToString());
}
catch (Exception ex)
{
    MessageBox.Show("Error: " + ex.ToString());
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T08:44:53.447

您可以从数据表中保存 .csv（逗号分隔值文件）。然后可以在 Excel 中打开此文件。

此外：无论是 WPF 还是 Winforms，两者的转换都是相同的，因为它的转换代码是用您的语言（即 C#）编写的，并不特定于 WPF 或 Winforms。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T10:13:49.517

对我来说工作得很好，谢谢...有人喜欢 vb.net 吗？

```
Dim excel As Microsoft.Office.Interop.Excel.Application = Nothing
Dim wb As Microsoft.Office.Interop.Excel.Workbook = Nothing

Dim missing As Object = Type.Missing
Dim ws As Microsoft.Office.Interop.Excel.Worksheet = Nothing
Dim rng As Microsoft.Office.Interop.Excel.Range = Nothing 
```

Sub ExcelFile(ByVal dt As DataTable)

```
 Try
        excel = New Microsoft.Office.Interop.Excel.Application()
        wb = excel.Workbooks.Add()
        ws = DirectCast(wb.ActiveSheet, Microsoft.Office.Interop.Excel.Worksheet)

        For Idx As Integer = 0 To dt.Columns.Count - 1
            ws.Range("A1").Offset(0, Idx).Value = dt.Columns(Idx).ColumnName
        Next

        For Idx As Integer = 0 To dt.Rows.Count - 1
            ' <small>hey! I did not invent this line of code, 
            ' I found it somewhere on CodeProject.</small> 
            ' <small>It works to add the whole row at once, pretty cool huh?</small>
            ' YES IT'S COOL Brother ...
            ws.Range("A2").Offset(Idx).Resize(1, dt.Columns.Count).Value = dt.Rows(Idx).ItemArray
        Next

        excel.Visible = True
        wb.Activate()
    Catch ex As Exception
        MessageBox.Show("Error accessing Excel: " & ex.ToString())

    End Try

End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T07:14:08.107

单程

```
ArrayList arr = (ArrayList)dataGridView.DataSource;
dt = ArrayListToDataTable(arr);

dataTable2Excel(dt, dataGridView, pFullPath_toExport, nameSheet); 
```

[http://www.codeproject.com/Articles/30169/Excel-export-from-DatagridView](http://www.codeproject.com/Articles/30169/Excel-export-from-DatagridView)

[http://support.microsoft.com/default.aspx?scid=kb;en-us;317719](http://support.microsoft.com/default.aspx?scid=kb;en-us;317719)

# ssh - ssh：连接到主机 heroku.com 端口 22：连接被拒绝

> ID：11167920
> 
> 赞同：0
> 
> 时间：2012-06-23T08:09:18.867
> 
> 标签：ssh

我正在使用 heroku 12.04 并尝试运行

```
$ git push heroku master 
```

但我得到下一个错误：

```
ssh: connect to host heroku.com port 22: Connection refused 
```

如果我尝试

```
$ ssh git@github.com 
```

我犯了同样的错误

我在这件事上寻找了其他问题，但还没有弄清楚，但这是我检查过的一些事情：

1.  我安装了 openssh-server

2.  `$ service ssh status
    ssh start/running, process 8819`

3.  `$ service sshd start
    sshd: unrecognized service`

4.  `$ ssh -vvv localhost
    OpenSSH_5.9p1 Debian-5ubuntu1, OpenSSL 1.0.1 14 Mar 2012
    debug1: Reading configuration data /etc/ssh/ssh_config
    debug1: /etc/ssh/ssh_config line 19: Applying options for *
    debug2: ssh_connect: needpriv 0
    debug1: Connecting to localhost [127.0.0.1] port 22.
    debug1: connect to address 127.0.0.1 port 22: Connection refused
    ssh: connect to host localhost port 22: Connection refused`

5.  我还尝试将 sshd_config 从端口 22 更改为端口 2222，但我仍然被拒绝端口 2222..

6.  `$ sudo netstat -pantu | grep LISTEN
    tcp 0 0 127.0.0.1:53 0.0.0.0:* LISTEN 5691/dnsmasq
    tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN 9081/sshd
    tcp 0 0 127.0.0.1:631 0.0.0.0:* LISTEN 1063/cupsd
    tcp 0 0 127.0.0.1:5432 0.0.0.0:* LISTEN 1142/postgres
    tcp6 0 0 :::22 :::* LISTEN 9081/sshd
    tcp6 0 0 ::1:631 :::* LISTEN 1063/cupsd`

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T23:19:59.513

在多次尝试生成密钥后，部署 heroku。我删除了我的机器（Ubuntu）的工具带并再次手动安装并添加了一个新密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T11:52:21.130

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T23:14:51.227

在我通过 ssh 进行备份后，我遇到了这样的问题。

重新启动客户端机器有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-01T19:05:32.160

有时重新打开终端会有所帮助。在 mac sierra 和 high sierra 上，您应该需要在 ~./ssh/config Host * AddKeysToAgent 是 UseKeychain 是 IdentityFile ~/.ssh/id_rsa VerifyHostKeyDNS yes // 添加此行后它开始工作

不要忘记重新打开终端并重试。

# javascript - jQuery无法读取文本字段值

> ID：11167922
> 
> 赞同：1
> 
> 时间：2012-06-23T08:09:31.700
> 
> 标签：javascript, jquery

今天我遇到了一些关于读取文本字段值的代码的问题。该值作为来自 php 文件的查询的结果返回到页面：//第一个带有事件的文本文件，调用 php 文件以查询名称在列表中的顺序。

```
<label for=name>Name</label>
<input id=name name=name type=text placeholder="Individual / Company Director" required onblur="getOrderInList();" > 
```

函数 getOrderInList() 执行查询并使用 javascript 将结果发送回调用者页面

```
parent.document.getElementById('customerorder')=document.getElementById('query_result'); 
```

查询结果是一个整数，应该返回到名称文本字段位于特定隐藏文本框中的主页`customercode`

使用 jQuery 我需要在页面上显示它，例如使用警报。但似乎是`undefined`。

谁能帮我这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T08:17:42.977

您的代码在 javascript 中，并且您在问题中提到了 jquery。它有点令人困惑，但我猜你需要更正你的 javascript 代码

```
parent.document.getElementById('customerorder').value = document.getElementById('query_result').value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T08:19:16.770

**在 JavaScript 中：**

```
parent.document.getElementById('customerorder').value = document.getElementById('query_result').value; 
```

**在 jQuery 中：**

```
 $('#customerorder').val( $('#query_result').val() ) 
```

# algorithm - 3d点叠加算法

> ID：11167923
> 
> 赞同：3
> 
> 时间：2012-06-23T08:09:52.727
> 
> 标签：algorithm, 3d, geometry, computational-geometry

我需要将两组 3D 点叠加在一起；即找到旋转和平移矩阵以最小化它们坐标之间的RMSD（均方根偏差）。

我目前使用[Kabsch 算法](http://en.wikipedia.org/wiki/Kabsch_algorithm)，这对于我需要处理的许多情况都不是很有用。Kabsch 要求两个数据集中的点数相等，此外，它需要事先知道哪个点将与哪个点对齐。就我而言，点的数量会有所不同，我不在乎哪个点对应于最终对齐中的哪个点，只要 RMSD 最小化即可。

因此，该算法将（可能）找到两个点集的子集之间的 1-1 映射，以便在旋转和平移之后，RMSD 最小化。

我知道一些处理不同数量点的算法，但是它们都是基于蛋白质的，也就是说，它们试图将主干对齐在一起（一些连续段与另一个连续段对齐等），这对于点浮动没有用在太空中，没有任何联系。（好吧，要清楚，有些点是连接的；但是有些点没有任何连接，我不想在叠加过程中忽略这些点。）

我发现的唯一算法是[DIP-OVL](http://www.bioinformatics.org/strap/superposition.html)，在 STRAP 软件模块（开源）中找到。我尝试了代码，但行为似乎不稳定；有时它会找到很好的对齐方式，有时它无法在简单的 X 平移后将一组点与自身对齐。

有人知道处理这种限制的算法吗？如果性能有问题，我最多会得到 ~10^2 到 ~10^3 分。

* * *

老实说，要使用的目标函数不是很清楚。*RMSD定义为对应点*之间距离的RMS 。如果我有两组分别为 50 和 100 点，并且算法匹配组内的 1 个或几个点，那么这几个点之间的 RMSD 将为零，而整体叠加可能不会那么大。*所有*点对之间的 RMSD并不是更好的解决方案（我认为）。

我能想到的唯一一件事就是为集合 Y 中的每个点找到集合 X 中的最近点（因此将有准确的 min(|X|,|Y|) 匹配，例如在这种情况下为 50）并从中计算 RMSD火柴。但是距离计算和二分匹配部分似乎计算复杂，无法以批处理方式调用。该领域的任何帮助也会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:56:12.880

如果您知道哪些点对彼此对应，则可以使用[线性最小二乘法](http://en.wikipedia.org/wiki/Linear_least_squares_%28mathematics%29 "WP：线性最小二乘法（数学）")(LLS) 恢复变换矩阵。

在考虑 LLS 时，您通常希望找到`x`in的近似值`A*x = b`。使用转置，您可以求解`A`而不是`x`.

1.  用“1”扩展每个源和目标向量，所以它们看起来像 < *x* , *y* *z* , 1>
2.  方程：*A* · *x* [*i*] = *b* [*i*]
3.  扩展到多个向量：*A* · *X* = *B*
4.  转置： ( *A* · *X* ) ^T = *B* ^T
5.  化简：*X* ^T · *A* ^T = *B* ^T
6.  替换*P* = *X* ^T，*Q* = *A* ^T和*R* = *B* ^T。结果是：*P* · *Q* = *R*
7.  应用 LLS 的公式：*Q* ≈ ( *P* ^T · *P* ) ^(-1) · *P* ^T · *R*。
8.  代入：*A* ^T ≈ ( *X* · *X* ^T ) ^(-1) · *X* · *B* ^T
9.  求解*A*并简化：*A* ≈ *B* · *X* ^T · ( *X* · *X* ^T ) ^(-1)

( *B* · *X* ^T ) 和 ( *X* · *X* ^T ) 可以通过对各个向量对的外积求和来迭代计算。

*   *B* · *X* ^T = ∑ *b [i]* · *x [i]* ^T
*   *X* · *X* ^T = ∑ *x [i]* · *x [i]* ^T
*   *A* ≈ (∑ *b [i]* · *x [i]* ^T ) · (∑ *x [i]* · *x [i]* ^T ) ^(-1)

没有矩阵会大于 4×4，因此该算法不会使用任何过多的内存。

结果不一定是仿射的，但可能很接近。通过一些进一步的处理，您可以使其仿射。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T13:03:25.033

您所说的看起来像是“*云到云注册*”任务。例如，查看[http://en.wikipedia.org/wiki/Iterative_closest_point](http://en.wikipedia.org/wiki/Iterative_closest_point)和[http://www.willowgarage.com/blog/2011/04/10/modular-components-point-cloud-registration](http://www.willowgarage.com/blog/2011/04/10/modular-components-point-cloud-registration)。您可以在开源[点云库](http://pointclouds.org/)中使用您的数据，看看它是否适合您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T11:58:39.477

通过叠加发现对齐的最佳算法是 Procrustes Analysis 或 Horn 方法。请按照[这个 Stackoverflow 链接](https://stackoverflow.com/questions/13432805/finding-translation-and-scale-on-two-sets-of-points-to-get-least-square-error-in/29673115#29673115)。

# javascript - 在for循环内分组并根据样式属性修改span元素

> ID：11167927
> 
> 赞同：0
> 
> 时间：2012-06-23T08:10:52.223
> 
> 标签：javascript, dom

我在页面上有一组 span 元素。它们使用从后端接收到的一些信息进行定位，并且样式属性会随着先前的 javascipt 执行而相应更改。

它就像一张地图。

地图上有几个地点，每个地点都有一个名字。但有些景点可能有多个名称。

```
<span class="myimages" id="tag-14" style="position: absolute; left: 191px; top: 217px;">hello</span>
<span class="myimages" id="tag-15" style="position: absolute; left: 141px; top: 112px;">bye</span>
<span class="myimages" id="tag-16" style="position: absolute; left: 191px; top: 217px;">welcome</span>
<span class="myimages" id="tag-17" style="position: absolute; left: 50px; top: 12px;">lunch</span> 
```

我想要做的是我想在这个对象数组中创建组，以便我可以根据需要修改它们。

我想做一些事情，比如创建一个数组，然后让那些共享相同属性（相同位置）的人，然后做一些只会影响该组 span 元素而不影响其他元素的事情。

我能够完成的第一部分：

```
function foam()
    {
    var menus = document.getElementsByClassName("myimages");

         for (var i=0; i < menus.length ; i++)
            {
                menuposition = menus[i].getAttribute("style");
                menus[i].setAttribute('style', menuposition+'background-color:pink;');
            }
    } 
```

但这当然会改变每个元素的样式属性，我希望能够在循环中创建一个循环，或者创建条件或其他东西来实现这一点。

提前致谢。

**更新：** 我无法自动分配班级名称。位置信息来自一个平面列表，例如：“点名称，图像上的点名称坐标”，并且唯一表明一个点相同的信息是 x 和 y 坐标......它在某种程度上是有限制的，但事实就是如此.

此外，我将修改一些属性，而不仅仅是更改背景颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T08:35:26.473

首先，您不应该使用该`style`属性来实际更改元素的样式。你应该使用`style` *object 属性*，所以你这样做：

```
menus[i].style.backgroundColor = "pink"; 
```

这会保留剩余的样式属性，因为它们都列在`style`对象中。即使您想要设置所有样式属性的列表，您也可以使用`menus[i].style.cssText`，这在较旧的 IE（<8 IIRC）中不可用，但这不会成为问题，因为我看到您正在使用`getElementsByClassName`.

那么，让我们看看你的问题。如果你认为你可以依赖`<span>`坐标，你可以像这样过滤掉它们：

```
var menus = document.getElementsByClassName("myimages");
for (var i=0; i < menus.length ; i++) {
    if (menus[i].style.left === x + "px" && menus[i].style.top === y + "px") {
        menus[i].style.backgroundColor = "pink";
    }
} 
```

这会将背景颜色“粉红色”分配给所有具有相同`left`和`top`样式属性（等于`x`和`y`像素）的图像。也许它不是你想要的（请多解释一下），也许你可能想将条件限制在`left`属性上，或者`top`.

但我最后的建议是为元素设置另一个样式类，这样所有的工作都可以变得更容易，甚至完全通过 CSS。只是要清楚：

```
<span class="myimages group-1" id="tag-14">hello</span>
<span class="myimages group-2" id="tag-15">bye</span>
<span class="myimages group-1" id="tag-16">welcome</span>
<span class="myimages group-3" id="tag-17">lunch</span> 
```

这是相关的CSS：

```
.myimages {position: absolute;}
.group-1 {
    left: 191px;
    top: 217px;
    background-color: pink;
}
... 
```

除了实际动态地分配课程之外，别无他法。

# php - 有没有办法可以将变量从表单的操作属性值发送到数据库？

> ID：11167928
> 
> 赞同：1
> 
> 时间：2012-06-23T08:11:00.770
> 
> 标签：php

所以我有一个 php 文件，它使用 $_GET 方法检索一些变量，然后输出结果。我想通过表单将这些检索到的变量中的一个与其他变量一起发送到另一个 php 文件（如果可以发送到同一个文件也可以），然后将这些变量存储在数据库中。我尝试像这样将变量放在表单的“action”属性中，但是当我提交表单值时它没有出现在 url 中：

这是我的所有代码：

```
<?php 
$nome=$_GET[nome];
$cognome=$_GET[cognome];
echo "<form action='salva_citazione.php"."?autore=".$nome."+".$cognome."&' method='GET'>"
.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T08:13:59.787

您可以使用隐藏的输入字段，也可以忘记`'`在`$_GET`变量中使用：

```
<?php 
  $nome = htmlspecialchars($_GET['nome']);
  $cognome = htmlspecialchars($_GET['cognome']);
  $fullname  = $nome.' '.$cognome;

  echo '<form action="salva_citazione.php" method="GET">';
  echo '<input type="hidden" name="autore" value="'.$fullname.'" />';
  // ...
?> 
```

请注意，这种使用方式会`$_GET`导致 XSS 漏洞，因此我使用[htmlspecialchars](http://php.net/manual/en/function.htmlspecialchars.php)函数将特殊字符转换为 HTML 实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T08:13:28.877

将其放入表单中：

```
echo "<input type='hidden' name='autore' value='$nome+$cognome'/>"; 
```

# javascript - 在ajax中调用phtml文件

> ID：11167931
> 
> 赞同：0
> 
> 时间：2012-06-23T08:11:58.593
> 
> 标签：javascript, jquery, ajax, php

我想通过 ajax 调用 catalog/layer/view.phtml 文件。

代码绝对没有变化，一切都一样，只是想在ajax中调用view.phtml。

```
<reference name="left">
<block type="catalog/layer_view" name="catalog.leftnav" after="currency" template="catalog/layer/view.phtml"/>
</reference> 
```

我将使用以下 jquery 代码。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>

<script type="text/javascript">
    $(function() {
    $("#showsearch").load("/app/design/frontend/default/mytheme/template/catalog/layer/test.phtml", function(response, status, xhr) {    alert(response);   
});
     });
</script>
<div id="showsearch"></div> 
```

我将 jquery 代码放在 view.phtml 中，但它返回 404 错误。

我是在做完全不可能的事情，还是可以通过其他方式完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T08:45:28.460

Using JavaScript you can only `.load()` URLs that you would normally type in your browser's address bar (since JS is client-side). You cannot use absolute file paths of your server this way.

To load this file, you have basically the following options:

1.  Place the file above your server's `DocumentRoot` (i.e. most likely where your `index.php` file is, often `public_html` or `www`)
2.  Include it using PHP: `<?php include($yourAbsolutePath); ?>`

Since you want to use AJAX to load the file, the best thing you could do is `.load()` a PHP file that is above your `DocumentRoot` and `include()` the file from there.

* * *

**Example**

1.  Create a .php file in your `DocumentRoot` (e.g. myFile.php)
2.  Put the following myFile.php:

    ```
    <?php include('/app/design/frontend/default/mytheme/template/catalog/layer/test.phtml'); ?> 
    ```

3.  Change your `.load()` line to:

    ```
    $("#showsearch").load("/myFile.php", function(response, status, xhr) { ... 
    ```

# vb.net - 通过vb.net编码触发TAB键切换控制

> ID：11167933
> 
> 赞同：0
> 
> 时间：2012-06-23T08:12:07.377
> 
> 标签：vb.net, webbrowser-control

我在 vb.net 2008 webbrowser 控件中打开一个网站。我想当我打开网站的第三页时，然后在页面加载后，通过我的代码自动触发 TAB 按键以编程方式控制焦点。请告诉我转移焦点控制的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T08:40:27.847

I don't know if I have understood your question right, but you could try the following,

Keep track of whether you are on the third page in your web-browser control. If you are, you can execute a JavaScript function, which changes the focus of the text-fields.

```
Page.ClientScript.RegisteredStartUpScript(GetTypeOf(), "function_change_tabs", script, True) 
```

# java - 如何在不提示用户发生异常的情况下处理异常并完成方法的功能

> ID：11167935
> 
> 赞同：1
> 
> 时间：2012-06-23T08:12:31.150
> 
> 标签：java, exception

假设有这样的情况：

```
statement 1;
statement 2;
statement 3;
statement 4;
statement 5;
statement 6;
statement 7;
statement 8;
statement 9;
statement 10; 
```

这些声明中的任何一个都被怀疑引发了`Exception`. 所以我把它们放在一个`try-catch`块里。

```
try{
    statement 1;
    statement 2;
    statement 3;
    statement 4;
    statement 5;
    statement 6;
    statement 7;
    statement 8;
    statement 9;
    statement 10;
}catch(Exception e){
    e.printStackTrace();
} 
```

现在，假设要完成我的计算，无论如何我都需要处理所有这 10 条语句。我该如何处理这种情况？

例如，假设我有 10`String`秒。`NullPointerException`当用户决定将该字段留空时，他们中的任何一个都可能会抛出 a （比如在表单上不适用的情况）。如果我要开发整个项目，我可以首先检查`null`并返回相应的值进行处理。但假设我只需要开发这个模块来处理数据。

我可以进行个别`if`检查以检查哪个`String`为空，在处理过程中忽略它的值，然后继续。但是如果我有`n`多个`String`s，引入`n` `if`语句就不会很整洁。会吗？

`try catch`即使发生，我也可以拥有个人并继续处理`Exception`。但话又说回来，不会整洁。

我可以分析堆栈跟踪并获取行号并跳转到下一行并继续处理。（我可以吗？我不确定。从捕获跳回到尝试？我相信不可能，但仍然把它写下来作为一种可能性）。

但这些方法似乎并不合适和正确。

有没有更好更简单的方法来处理这种情况？我刚刚举了一个例子，`String`要处理的数据可以是任何东西，并且可以生成任何`Exception`.

再次重复我的问题：有没有办法完成对方法或过程的评估，无论其中产生多少异常？

这个问题可能是重复的（虽然我没有找到），或者可能措辞不当。随意编辑它（或建议编辑），但保持主要思想仍然集中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T08:17:41.653

> 我可以进行单独的 if 检查以检查哪个字符串为空，在处理中忽略它的值，然后继续。但是，如果我有 n 个字符串，那么引入 n 个 if 语句就不会很整洁。会吗？

您是否对每个字符串都做同样的事情，您应该将“检查并选择性地做某事”行为提取到一个方法中。

您绝对*不应该在您**知道*可以合法地为空的空引用上调用方法。`NullPointerException`应该总是在某处指出一个错误（或者你不应该得到空引用，或者如果这是合法的，你应该在对它做任何事情之前检查它）。

如果你的方法是做 10 件独立的事情，每件事情都可能失败，那么它可能太大而无法开始。听起来它们是独立的操作（否则在操作 1 失败后您无法执行操作 2）因此将每个操作放入带有 try/catch 块的单独方法中，并从您的顶级方法中调用它们。

不过，从根本上来说，这感觉像是一种代码气味——面对异常，愉快地继续执行一系列步骤*很少*是一个好主意，而且几乎可以肯定不仅仅是通过捕获`Exception`. 您应该仔细考虑这是否真的是您想要的设计。

语言中绝对没有任何东西可以让您更轻松 - 正是因为它几乎总是做错事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T08:27:47.623

也许您可以将字符串/语句放在一个数组中，并将 Try Catch 块放在一个循环中，该循环遍历数组元素。

像这样的东西：

```
for (Statement statement: statements) {
  try{
    statement;
  }catch(Exception e){
    e.printStackTrace();
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T08:27:01.043

我赞同 Jon Skeet 所说的代码味道（违反单一责任原则）。加上：

如果数据验证可以防止这些异常，那么您还可以考虑编写通用验证器（或基于类型），然后在执行操作之前调用验证器（仅在数据验证成功时才执行操作）。

使用此设置，考虑到我的假设是正确的，您可以在验证失败时记录一些内容，也可以在循环中执行所有这 10 条语句（因为代码路径相似）

```
foreach (var statement in statements)
{
       if (statement.IsDataValid()) 
       {
           statement.Execute();
       }
       else
       {
           // Log stuff or handle appropriately
       }
} 
```

只是给出方向，因为我没有太多关于您的代码或数据的信息。

# java - 检票口概念和状态的数据绑定器

> ID：11167937
> 
> 赞同：0
> 
> 时间：2012-06-23T08:12:39.857
> 
> 标签：java, hibernate, web, wicket, databinder

似乎 Wicket + DataBinder(https://github.com/wicket-databinder/wicket-databinder) 是一个很好的解决方案，如果你只知道普通的 java 并且需要编写数据驱动的 web 应用程序，就像我一样。但是，当我使用 dataBinder 的身份验证功能时，我会遇到错误 - 当我注册新用户时，我的密码并确认密码不匹配。我查看了代码- RSAPasswordTextField 的 getConvertedInput() 返回了一些长的 Base64 并且密码字段不同。我在网上找不到数据绑定器身份验证示例。问题和想法：

1.  使用当前版本的 DataBinder 的常用方法是什么？例如，我如何使用 net.databinder.auth.components.hib.DataSignInPage？
2.  databinder 中有很多 todo 注释。哪些数据绑定器功能是稳定的？
3.  我喜欢常见的 Web 功能已经在 databinder 中，所以我不需要重新发明轮子。也许有更实际的选择呢？

否则我可以为数据绑定器做出贡献。无论如何，我需要开发我的应用程序，所以我可以从已经在数据绑定器中开始。但我需要模块的状态（什么有效以及如何使用/什么无效以及做什么）。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T10:46:07.350

据我所知，Nathan（databinder 的作者）已经转向 scala 开发，而 databinder 此后一直停滞不前。您最好的途径是联系 Nathan，或 github 上的 10 个分支之一，了解如何重新启动 databinder 的开发。

1.  因为我不使用数据绑定器，所以我无法回答这个问题
2.  我认为 todo 注释是一个很好的指针，您可以从中获取维护代码库
3.  有几个库以各种形式的维护[与 Wicket 集成。](https://cwiki.apache.org/WICKET/related-projects-and-tools.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:58:27.823

今天的数据绑定器没有贡献者。我写信给 Fausto Bencosme（他是最后一个）。我们尝试一起使用DataBinder，但很少出现问题。Fausto 建议使用 Ebean。我尝试 - 看起来它有效。所以对于新手我推荐Ebean。

# css - 在 css 中创建旋转的丝带

> ID：11167942
> 
> 赞同：1
> 
> 时间：2012-06-23T08:13:43.587
> 
> 标签：css

我怎样才能创建一个像[这样](http://i49.tinypic.com/308e05y.png)的丝带，它位于我的盒子的角落，它也可以用 css 旋转而没有图像。

我知道退出了一些像[这样](http://www.css3d.net/ribbon-generator/)的工具和教程，[这](http://css3-tutorial.com/creating-ribbons-in-css3)使得使用 css 轻松制作功能区。
但所有这些都是水平类型，而我想创建一个旋转的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T08:16:44.960

按照这些教程创建水平功能区后，使用 CSS3 变换（旋转）来旋转功能区： http: [//davidwalsh.name/css-transform-rotate](http://davidwalsh.name/css-transform-rotate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T08:26:52.660

[http://jsfiddle.net/R6jMH/](http://jsfiddle.net/R6jMH/)看看

# javascript - 如何传递一些参数并从 javascript 接收响应字符串到 asp.net 页面并更新 html 文档

> ID：11167947
> 
> 赞同：0
> 
> 时间：2012-06-23T08:14:43.770
> 
> 标签：javascript, asp.net

我有一个下拉列表，它在更改时执行 javascript 函数 (function typechanged(var))。现在我必须将 var 传递给服务器，它应该根据 var 字符串返回一个菜单，然后我必须使用从服务器接收到的新响应文本（它本身）更新下拉菜单所在的 div包含一个新的下拉 html 字符串），它是 Asp.net，我搜索了解决方案，但有服务器控件 asp 元素的解决方案，而我的是一个 html 下拉选择，而不是页面中的“拖放”控制元素。怎么样我应该这样做...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T08:47:53.633

您很可能希望在被调用时进行[AJAX](http://api.jquery.com/jQuery.ajax/)`typechanged()`调用。

一种可能的解决方案是在您的网站上包含 jQuery：

**Javascript：**

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
function typechanged(var) {
  $.ajax({
    url: "the_site_only_containing_new_dropdown.html",
    method: "get",
    data: {
      var: var
    },
    success: function(data) {
      $("#new_dropdown_placeholder").html(data);
    }                
  });
}
</script> 
```

**HTML：**

```
<div id="new_dropdown_placeholder"></div> 
```

您会看到-method的`data`-argument在 URL（例如）中提供了to ，您可以在其中对其进行操作。`$.ajax``var``the_site_only_containing_new_dropdown.html``the_site_only_containing_new_dropdown.html?var=123`

# python - 比较文件夹内容

> ID：11167953
> 
> 赞同：3
> 
> 时间：2012-06-23T08:15:29.360
> 
> 标签：python

我需要比较 XP 机器上的两个文件夹。

这是一个广播电台，我们将所有音乐存储为高比特率 mp3，当从 CD 获取新歌曲时，它们是 wav。我需要能够比较 mp3 和 wav 文件夹的重复项（命名将相同，但文件扩展名除外）。目标是生成 wav 文件夹中没有 mp3 版本的项目列表。

安装了 Python 2.7，我的编码经验非常有限，使用 python。

所有帮助表示赞赏，即使它只是朝着正确的方向踢......谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T08:21:15.397

用于[`os.listdir`](http://docs.python.org/library/os.html#os.listdir)获取文件夹内容，并[`os.path.splitext`](http://docs.python.org/library/os.path.html#os.path.splitext)确定基本名称：

```
import os
wavs = set(os.path.splitext(fn)[0] for fn in os.listdir('/path/to/wavs'))
mp3s = set(os.path.splitext(fn)[0] for fn in os.listdir('/path/to/mp3s'))
must_convert = wavs - mp3s 
```

如果要整理多个文件夹的 mp3 和 wav（但不是递归），则必须同时存储基本名称和完整文件名：

```
import os,collections
files = collections.defaultdict(dict)
for d in ['/path/to/wavs', '/more/wavs', '/some/mp3s', '/other/mp3s']:
    for f in os.listdir(d):
        basename,ext = os.path.splitext(f)
        files[ext][basename] = os.path.join(d, f)
files_to_convert = [fn for basename,fn in files['.wav'].items()
                       if basename not in files['.mp3']] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T08:27:34.793

```
 import os
    wav=[os.path.splitext(x)[0] for x in os.listdir(r'C:\Music\wav') if os.path.splitext(x)[1]=='.wav']
    mp3=[os.path.splitext(x)[0] for x in os.listdir(r'C:\Music\mp3') if os.path.splitext(x)[1]=='.mp3']  

   #here wav is a list names of only those files whose extension is .wav 
   #here mp3 is a list names of only those files whose extension is .mp3 

    print(set(wav)-set(mp3)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T08:39:13.200

这是一个基于*phihag*的[答案](https://stackoverflow.com/a/11167981/241039)的递归解决方案。

```
import os
sets = {}
for dirname in 'mp3_folder', 'wav_folder':
    sets[dirname] = set()
    for path, dirs, files in os.walk(dirname):
        sets[dirname].update(os.path.join(path, os.path.splitext(fn)[0]).lstrip(dirname) for fn in files)
must_convert = sets['mp3_folder']-sets['wav_folder']
print('\n'.join(sorted(must_convert))) 
```

# ios - 当数据包含与号时，从 iOS 应用程序崩溃调用 asp.net Web 服务？

> ID：11167955
> 
> 赞同：0
> 
> 时间：2012-06-23T08:16:01.203
> 
> 标签：ios, web-services, nsmutableurlrequest

我有一个实际调用 asp.net Web 服务的应用程序，但是当我用它传输数据时`&`它停止工作。像下面的 jsonString 有 first_name 有“Pranav &” 所以在这个阶段当我调用服务并在 asciistringencoding 中转换它时它会产生错误，因为 ascii 将它转换为

```
&quotPranav &&quot 
```

找到两个＆符号它停止工作

```
NSString * jsonString = @"{"home_phone":"123","GroupId":"GP00000099","first_name":"Pranav &","city":"df","last_name":"Purohit","state":"sl","email":"pjp@gmail.com","member_Id":"GM00008513"}";
NSString * post = [[NSString alloc] initWithFormat:@"jsonText=%@", jsonString];
NSLog(@"%@",post);
NSData * postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:NO];
NSString * postLength = [NSString stringWithFormat:@"%d",[postData length]];
NSMutableURLRequest * request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:@"http://www.myweburl.com/mywebservice.asmx/mymethod"]];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData];
NSURLConnection * conn = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:11:58.743

我得到了答案，当您将其嵌入**并**替换为**\u0026**

# javascript - 使用 TextField 值设置 DropDown 的选项

> ID：11167961
> 
> 赞同：0
> 
> 时间：2012-06-23T08:17:30.733
> 
> 标签：javascript, jquery, cakephp-1.3

我想要一个启用/禁用文本字段的复选框。启用复选框和文本字段后，获取文本字段的值并相应地设置下拉选项的数量，

例如：如果文本字段的值为 4，则下拉选项应为 1 2 3 4。

我有以下代码。请帮我解决，谢谢。

Cakephp 表单

```
echo $this->Form->checkbox('custom_lvl_def', array('hiddenField' =>       false,'OnClick'=>"enable_disable()"));
echo "Use custom level definitions"."&nbsp";
echo $this->Form->input('alternative_no_of_levels', array('style'=>'width:70px','label'=>'levels','div'=>false, 'disabled'=>TRUE));
echo "<br>";

echo $this->Form->input('dropdown', array(
  'options'=>$options,
  'empty' => 'Select Level',
  'label'=>'Type:',
  'selected'=>'Select Level',
  'style'=>'width:130px',
  'div'=>false
)); 
```

JavaScript 函数

```
function enable_disable()
{        
    if($('#CompetenceCustomLvlDef').attr('checked'))
        {               
            $('#CompetenceAlternativeNoOfLevels').removeAttr("disabled");
            // var $a=array ('Level');
            var value = $('#CompetenceAlternativeNoOfLevels').val();
            for ( var i = 0; i < value; i++ ) {
                $('#CompetenceDropdown').options[i].selected = i;           
            return; }           
        }
    else                 
            $('#CompetenceAlternativeNoOfLevels').attr('disabled', true);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T09:06:58.603

这可能会帮助您获取您输入的级别数的下拉列表数组。根据问题，您可以在表格中尝试这个..

```
echo $this->Form->checkbox('custom_lvl_def', array('hiddenField' => false,'id'=>'id_custom_lvl_def', 'onclick'=>"javascript:enable_disable()"));
echo "Use custom level definitions"."&nbsp";
echo $this->Form->input('alternative_no_of_levels', array('style'=>'width:70px','id'=>'id_alternative_no_of_levels','label'=>'levels','onblur'=>'javascript:enable_disable();', 'div'=>false, ));
echo "<br>";
echo $this->Form->input('dropdown', array(
  'options'=>'',
  'empty' => 'Select Level',
  'label'=>'Type:',
  'type'=>'select',
  'id'=>'id_dropdown',
  'name'=>'dropdown',
  'style'=>'width:130px',
  'div'=>false
)); 
```

在脚本中：

```
function enable_disable()
{        
    $("#id_dropdown").empty();
    if($('#id_custom_lvl_def').attr('checked'))
    {               
        $('#id_alternative_no_of_levels').removeAttr("disabled");
        var value = $('#id_alternative_no_of_levels').val();
        var optionsAsString = "";
        optionsAsString += "<option value=''>" + "Select Level" + "</option>";
        for ( var i = 1; i <= value; i++ ) {
            optionsAsString += "<option value='" + i + "'>" + i + "</option>";
        }           
        $( 'select[name="dropdown"]' ).append( $( optionsAsString ) );
    }
    else                 
        $('#id_alternative_no_of_levels').attr('disabled', true);
} 
```

# c# - Sitecore 管道干扰 WebMethod (asmx) 调用

> ID：11167968
> 
> 赞同：4
> 
> 时间：2012-06-23T08:18:10.623
> 
> 标签：c#, ajax, web-services, sitecore

对 web 方法的简单调用：

```
[WebMethod]
        public List<string> GetSomethingBySomethingElse(string somethingElse) {
            var results = (from w in Something
                         where w.SomethingElse == somethingElse
                         orderby w.SomethingElse
                         select w.SomethingElse).Distinct();
            return results.ToList();
        } 
```

其他人在：[http](http://sitecoreblog.alexshyba.com/2009/03/attach-wcf-services-to-sitecore-context.html) ://sitecoreblog.alexshyba.com/2009/03/attach-wcf-services-to-sitecore-context.html 有同样的问题，但没有说他们是如何解决的。

堆栈跟踪：

```
[ArgumentOutOfRangeException: Length cannot be less than zero.
Parameter name: length]
   System.String.InternalSubStringWithChecks(Int32 startIndex, Int32 length, Boolean fAlwaysCopy) +9385067
   Sitecore.Web.RequestUrl.get_ItemPath() +146
   Sitecore.Pipelines.HttpRequest.SiteResolver.GetItemPath(HttpRequestArgs args, SiteContext context) +32
   Sitecore.Pipelines.HttpRequest.SiteResolver.UpdatePaths(HttpRequestArgs args, SiteContext site) +69
   Sitecore.Pipelines.HttpRequest.SiteResolver.Process(HttpRequestArgs args) +49
   (Object , Object[] ) +64
   Sitecore.Pipelines.PipelineMethod.Invoke(Object[] parameters) +36
   Sitecore.Pipelines.CorePipeline.Run(PipelineArgs args) +140
   Sitecore.Pipelines.CorePipeline.Run(String pipelineName, PipelineArgs args, String pipelineDomain, Boolean failIfNotExists) +158
   Sitecore.Pipelines.CorePipeline.Run(String pipelineName, PipelineArgs args, String pipelineDomain) +64
   Sitecore.Pipelines.CorePipeline.Run(String pipelineName, PipelineArgs args) +50
   Sitecore.Nexus.Web.HttpModule.(Object sender, EventArgs e) +326
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +148
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T23:35:17.063

将 Web 服务的路径添加`IgnoreUrlPrefixes`到`web.config`. 每个要忽略的唯一路径都是管道分隔的。

# c# - 来自网络摄像头预览的图像引发通用 GDI+ 异常

> ID：11167975
> 
> 赞同：1
> 
> 时间：2012-06-23T08:19:46.257
> 
> 标签：c#, image, expression-encoder, expression-encoder-sdk, microsoft-expression

我正在制作自定义网络摄像头用户控件。

我使用 Microsoft Expression Encoder，并在控件内的面板上设置 PreviewWindow。

一切都很好，除了当我尝试抓取图像时，我得到一个异常：

> 通用 GDI+ 异常

我的第一次尝试是：

```
using (var bmp = new Bitmap(p.Width, p.Width))
            {
                panel1.DrawToBitmap(bmp, new Rectangle(0, 0, bmp.Width, bmp.Height));
                bmp.Save(@"c:\test.png");
            } 
```

另一个是：

```
using (Bitmap bitmap = new Bitmap(panelVideoPreview.Width, panelVideoPreview.Height))
          { 
              using (Graphics g = Graphics.FromImage(bitmap))
              {
                  Rectangle rectanglePanelVideoPreview = panelVideoPreview.Bounds;

             Point sourcePoints = panelVideoPreview.PointToScreen(new Point(panelVideoPreview.ClientRectangle.X, panelVideoPreview.ClientRectangle.Y));
             g.CopyFromScreen(sourcePoints, Point.Empty, rectanglePanelVideoPreview.Size); 
              }

              string strGrabFileName = String.Format("C:\\Snapshot.jpg", DateTime.Now);
              bitmap.Save(strGrabFileName, ImageFormat.Jpeg); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:24:32.270

问题在于写入文件。c:\ 驱动器中可能没有足够的空间，或者您没有写入 c:\ 驱动器（文件夹外）的权限。尝试写入**AppData**，如果要写入 c:\ 驱动器，则需要使用自定义清单获取管理权限。

# events - Symfony 2中的kernel.request事件中的身份验证令牌始终为空？

> ID：11167979
> 
> 赞同：9
> 
> 时间：2012-06-23T08:20:44.213
> 
> 标签：events, authentication, symfony

我想`kernel.request`在 Symfony 2 中为事件编写一个基本的监听器。服务定义非常简单，注释来自 JMSDiExtraBundle。

问题是即使用户完全通过身份验证，它**`$context->getToken()`也始终为空：**

```
/**
 * @Service("request.set_messages_count_listener")
 *
 */
class RequestListener
{

    /**
     * @var \Symfony\Component\DependencyInjection\ContainerInterface
     */
    private $container;

    /**
     * @InjectParams({"container" = @Inject("service_container")})
     *
     */
    public function __construct(ContainerInterface $container)
    {
        $this->container = $container;
    }

    /**
     * @Observe("kernel.request", priority = 255)
     */
    public function onKernelRequest(GetResponseEvent $event)
    {
        $context = $this->container->get('security.context');
        var_dump($context->getToken()); die();
    }

} 
```

我认为我的安全设置工作正常。那可能是什么问题？

```
secured_area:
    pattern:    ^/app/
    switch_user: true
    form_login:
        check_path: /app/login_check
        login_path: /app/login
        default_target_path: /app/dashboard
        always_use_default_target_path: true
    logout:
        path:   /demo/secured/logout # TODO
        target: /demo/               # TODO

access_control:
    - { path: ^/app/login,    roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/app/users,    roles: ROLE_MNG_USERS }
    - { path: ^/app/messages, roles: ROLE_MNG_USERS }
    - { path: ^/app/roles,    roles: ROLE_MNG_PACKAGES_FEATURES }
    - { path: ^/app/packages, roles: ROLE_MNG_PACKAGES_FEATURES }
    - { path: ^/app/,         roles: ROLE_USER } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-23T08:36:06.390

使用`priority = 255`，您的侦听器在安全防火墙之前被调用（`priority = 8`看[这里](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/SecurityBundle/Resources/config/security.xml#L107)）。

尝试改变你的优先级。

# c# - 将微软动态 crm 中的附件文件保存到计算机

> ID：11167983
> 
> 赞同：0
> 
> 时间：2012-06-23T08:21:22.760
> 
> 标签：c#, c#-4.0, dynamics-crm, dynamics-crm-2011, dynamics-crm-4

CRM 将附件保存在 AnnotationBase 基表中。

如何将`DocumentBody`实体中的文本转换回文件并将其保存到文件系统？

我已经获得了该`documentbody`字段的值，然后尝试将其写入我的计算机，但我的文件已损坏。

我正在使用这段代码：

```
String DocumentBody = Convert.ToBase64String(
      newUnicodeEncoding().GetBytes("UEsDBBQABgAIAAAAIQDQf9XuxAEAAE4HAAATAAgCW0NvbnRlbnRfVHlwZXNd       Lnh/abtPgp4eu7+W68C2dvLaWtho32sTajdkFmweGeKMQYTD5MrcDFf"));

using (FileStream fs = new FileStream("c:\\1.docx", FileMode.Create, FileAccess.Write))
{
    byte[] bytes = Convert.FromBase64String(DocumentBody);
    fs.Write(bytes, 0, bytes.Length);
} 
```

in 中的字符串与annotationBase 表`GetBytes`中的字段相同。`documentbody`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:08:40.620

这是一直对我有用的代码 - 我可以确认这对我使用从 CRM 4 和 CRM 4 SDK 检索的数据有效。大约 18 个月前，我做了一个几乎完全相同的项目，我们必须归档所有来自 CRM 的笔记和电子邮件。

如果您仍然遇到问题，[请参阅此代码的原始来源](http://crmscape.blogspot.com/2009/10/ms-crm-40-sending-attachments-to.html)

```
public static void ExportFile(string fileName, string content)
{
    byte[] fileContent = Convert.FromBase64String(content);
    using (FileStream file = new FileStream(fileName, FileMode.Create))
    {
        using (BinaryWriter writer = new BinaryWriter(file))
        {
            writer.Write(fileContent,0,fileContent.Length);
            writer.Close();
        }

        file.Close();
    }
} 
```

# java - 使用spring和hibernate或AtomicInteger实现实时计数器，最好的方法是什么？

> ID：11167986
> 
> 赞同：1
> 
> 时间：2012-06-23T08:21:57.657
> 
> 标签：java, spring, hibernate, scalability

使用原子整数作为注入控制器的服务类中的实例变量。缩放受限于每个线程运行操作所需的内存，以及每秒处理多少个请求（cpu 花费和对原子整数执行操作的时间？）

```
@Service
public MyService{

AtomciInteger count = new AtomicIntger(0);

 public int add() {
   return count.incrementAndGet();
 }

    // accessed via ajax loop (and controller), if value changes update display
  public int getCount() {
    return count.get();
  }
} 
```

服务类将通过控制器访问，控制器将作为 RESTful Web 服务提供，通过 ajax 调用访问。它如何处理模拟用户/请求？

我能想到的唯一选择是使用休眠实体并将整数值存储为字段。让 hibernate 处理线程问题，其中 sessionfactory 将被注入到 dao 中，而 dao 被注入到服务类中——扩展问题？我的春季班都是单身人士。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T09:51:21.007

`AtomicIntger`尽可能快。阅读它（`volatile`领域）接近于阅读普通的`int`. 更新使用带有简单`while`循环的 CAS 操作，这不能更快和线程安全地完成。您正在使用 Spring（可能还有几层 AOP 方面，Spring MVC 控制器（具有大量反射），并且您通过 HTTP 协议调用它。递增和访问一个`int`是您的问题中最少的。

使用 Hibernate（即 JDBC）的唯一好处是跨多个服务器的可扩展性。然而，使用普通的 JDBC 和数据库序列代替 Hibernate - 速度更快，但与`Atomic*`类相比慢了两个数量级。考虑[hazelcast](/questions/tagged/hazelcast "显示标记为“hazelcast”的问题")以获得两者：适中的速度和简单性。

# javascript - 如何在不使用 tablecontente 的情况下编辑一项可排序的项目

> ID：11167988
> 
> 赞同：2
> 
> 时间：2012-06-23T08:22:24.380
> 
> 标签：javascript, jquery, json

我有一个从 JSON 文件加载的*可排序*文件。这是一个可排序的 jquery [http://jqueryui.com/demos/sortable](http://jqueryui.com/demos/sortable)

但我想编辑一项。之前的项目是从用户插入的。例如，查看[http://jqueryui.com/demos/sortable](http://jqueryui.com/demos/sortable)我想要第 3 项。如何？

现在我想用一个变量的字符串来编辑一个项目，例如 Littlebirds，使用**JavaScript**或**jQuery 。**这个变量是从用户插入的`textarea`。（我知道）。

如何使用变量编辑项目的可排序？？？

我从`textarea`必须取消的元素名称中收到。

```
<textarea></textarea> 
```

我知道您如何分析列表但编辑（更改）名称的可排序项目？

***可排序*的 HTML 代码：**

```
<div id="sortparam">

<ul style="" class="ui-sortable" id="sortable">
    <li style="" id="1" class="ui-state-default"> <span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Singular sensation</li>
    <li style="" id="2" class="ui-state-default"> <span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Beady little eyes</li>
    <li style="" id="3" class="ui-state-default"> <span class="ui-icon ui-icon-arrowthick-2-n-s"></span>Little birds </li>
</ul>

</div> 
```

拜托，我不要`contenteditable`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:02:46.757

您需要定位文本节点或替换元素的完整 html。我们无法知道您打算如何定位要编辑的可排序对象。

以下解决方案存储图标 html，并更新元素的完整 html。

演示：http: [//jsfiddle.net/WZeMH/](http://jsfiddle.net/WZeMH/)

```
/* no relationship given on how to determine which sortable to edit use second one*/
var whichSortable= 2;

/* define sortable element to edit */
var $sortableEl=$('#'+whichSortable);

/* store icon span html string*/
var iconSpan=$('<div>').append( $sortableEl.find('.ui-icon').clone() ).html();

$('textarea').keyup(function(){
    var val=$(this).val();
     $sortableEl.html( iconSpan + val);    
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T08:29:24.217

**只是一个例子：**

假设，你有一个`textbox`类似的：

```
<input type="text" id="your_text"> 
```

现在您可以将`keyup`事件绑定到它`textbox`并使用文本更新 sortable`li`的内容。

```
var li = $('#sortable li#3'),           // reference of li
    originalVal = li.text(),            // keep reference of original 
                                        // text(e.g Little birds)
    iconSpan = li.find('span.ui-icon'); // take the span icon

$('#your_text').keyup(function() {       // bind a keyup event
  var val = $.trim( this.value );        // take new value on each keyup
  if( val ) {                            // if new value entered
    li.html( iconSpan + val );           // set new value to little birds
  } else {                               // if text box is empty
     li.html( iconSpan + originalVal );  // set original value
  }
}); 
```

但我认为您应该拥有相同数量`textbox`的`sortable`元素，并且您可以`textbox`通过其他过程获得价值。

# c# - 深度 > 1 的成员访问的表达式树

> ID：11167989
> 
> 赞同：0
> 
> 时间：2012-06-23T08:23:01.260
> 
> 标签：c#, linq, lambda, expression, expression-trees

```
public class Job
{
    public string Name { get; set; }
    public int Salary { get; set; }
}
public class Employee
{
    public string Name { get; set; }
    public Job Job { get; set; }
} 
```

如果我想创建一个成员访问 Employee.Name 的表达式树，这就是我要做的：

```
 var param = Expression.Parameter(type, "x");
        var memberAccess = Expression.PropertyOrField(param, memberName);
        return Expression.Lambda<Func<TModel, TMember>>(memberAccess, param); 
```

对于 Employee.Job.Salary 的成员访问，这相当于什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-23T08:25:24.553

你需要：

```
var jobProperty = Expression.PropertyOrField(param, "Job");
var salaryProperty = Expression.PropertyOrField(jobProperty, "Salary"); 
```

基本上，您是`Salary`从评估结果中获取属性`x.Job`。

如果您需要以编程方式执行此操作，则需要以下内容：

```
Expression expression = Expression.Parameter(type, "x");
foreach (var property in properties.Split('.'))
{
    expression = Expression.PropertyOrField(expression, property);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-22T13:45:22.103

最好的方法是[在这里](https://stackoverflow.com/questions/16217410/how-to-create-expressionfunctmodel-tproperty)创建扩展：

```
public static class ExpressionExtensions
{
    /// <summary>
    ///     create expression by property name
    /// </summary>
    /// <typeparam name="TModel"></typeparam>
    /// <param name="propertyName">
    ///     <example>Urer.Role.Name</example>
    /// </param>
    /// <returns></returns>
    public static Expression<Func<TModel, dynamic>> CreateExpression<TModel>(this string propertyName) {
        Type currentType = typeof (TModel);
        ParameterExpression parameter = Expression.Parameter(currentType, "x");
        Expression expression = parameter;

        int i = 0;
        List<string> propertyChain = propertyName.Split('.').ToList();
        do {
            System.Reflection.PropertyInfo propertyInfo = currentType.GetProperty(propertyChain[i]);
            currentType = propertyInfo.PropertyType;
            i++;
            if (propertyChain.Count == i)
            {
                currentType = typeof (object);
            }
            expression = Expression.Convert(Expression.PropertyOrField(expression, propertyInfo.Name), currentType);
        } while (propertyChain.Count > i);

        return Expression.Lambda<Func<TModel, dynamic>>(expression, parameter);
    }
} 
```

您不能每次都将 Convert() 转换为 typeof(object)，因为 System.Object 没有您的类型所具有的属性（例如您的示例中的 Name 或 Salary）。

# c# - 使用 SqlDataSource 处理异常时遇到问题

> ID：11167992
> 
> 赞同：1
> 
> 时间：2012-06-23T08:23:11.690
> 
> 标签：c#, asp.net, exception-handling, sqldatasource, registerstartupscript

我无法处理 SqlDataSource 的异常。我的 ListView 当前正在使用 SqlDataSource。我的代码似乎没有显示错误消息，即使它看起来对我来说是正确的。我似乎无法确定错误。

**代码：**

```
 protected void CustomerSQLDataSource_Selected(object sender, SqlDataSourceStatusEventArgs e)
{
    if (e.Exception != null)
    {
        //Show error message
        string myStringVariable = "Error";
        ScriptManager.RegisterStartupScript(Page, this.GetType(), "myalert", "alert('" + myStringVariable + "');", true);

        //Set the exception handled property 
        e.ExceptionHandled = true;
    }
} 
```

# json - 使用 REST (HTTP) 进行基于角色的访问控制？

> ID：11167994
> 
> 赞同：2
> 
> 时间：2012-06-23T08:24:01.637
> 
> 标签：json, http, authentication, rest, rbac

我正在创建一个带有 JavaScript 客户端的系统，它将通过 REST (HTTP)[JSON] 与服务器通信。

我正在使用[基于角色的访问控制](http://en.wikipedia.org/wiki/Role-based_access_control)来管理呼叫。

**示例**：[显式 URL 将保持不变]

*   匿名 -> 请求`\`
*   服务器 -> 登录表单的路由：`\login\`
*   用户（现在有 cookie！）-> 请求`\`
    *   `if (user->role == "manager") return "\manager-homepage\";`
    *   `else return "\homepage\";`

由于 REST 是无状态的，我将如何管理这个用例？

我是否在每个请求中都发送 cookie，返回的 HTTP 状态码会告诉 JS 路由到哪里？

*[这将是相当低效的 + 对 MITM 攻击开放]*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T08:33:34.977

您不能使用标准的身份验证方案，例如[http digest](http://en.wikipedia.org/wiki/Digest_access_authentication#Example_with_explanation)吗？

**示例**：[来自维基百科页面]

> *   客户端请求一个需要身份验证但不提供用户名和密码的页面。通常这是因为用户只需输入地址或点击页面链接。
> *   服务器以 401“客户端错误”响应代码进行响应，提供身份验证领域和一个随机生成的、一次性的值，称为 nonce。
> *   此时，浏览器将向用户显示身份验证领域（通常是对正在访问的计算机或系统的描述）并提示输入用户名和密码。用户此时可以决定取消。
> *   提供用户名和密码后，客户端会重新发送相同的请求，但会添加包含响应代码的身份验证标头。
> *   在此示例中，服务器接受身份验证并返回页面。如果用户名无效和/或密码不正确，服务器可能会返回“401”响应码，客户端会再次提示用户。
> 
> 注意：客户端可能已经拥有所需的用户名和密码，而无需提示用户，例如，如果它们先前已由 Web 浏览器存储。

另请参阅对一个非常相似的问题的答案：[REST 和身份验证变体](https://stackoverflow.com/questions/458482/rest-and-authentication-variants)

根据您所需的安全级别，您可以通过 ssl 提供整个服务。这将防止中间人攻击。

# c - 这个 C 程序使用 extern 关键字有什么问题？

> ID：11167997
> 
> 赞同：5
> 
> 时间：2012-06-23T08:25:30.553
> 
> 标签：c

我想在 main.c 中使用来自 foo.c 的变量 a，我写：

```
foo.c
#include <stdio.h>

int a[] = {3, 2};

void foo()
{
    printf("foo\taddress of a:%x\n", a);
    printf("foo\tvalue of a[0]:%x\n", a[0]);
}

main.c
#include <stdio.h>

extern int *a;

int main(void)
{
    foo();
    printf("main\taddress of a : %x\n", a);
    printf("main\tvalue of a[0] : %x\n", a[0]);

    return 0;
} 
```

和结果输出：

```
foo address of a:804a014
foo value of a[0]:3
main    address of a : 3
Segmentation fault (core dumped) 
```

为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T08:30:27.800

的类型`a`是`int[2]`，不是`int*`。再试一次

```
extern int a[2]; 
```

* * *

C 编译器**无法跨源文件进行类型检查**。因此，当您说 时`int* a`，编译器会假定您说的是真话，使用指针语义，并且不会发出任何编译器错误。

数组和指针之间存在细微差别。让我们假设一个 32 位系统。那么“a”的内容会这样分布：

```
    一种
0x100 0x104 0x108 ← 地址
    +------------+----------+
    | 3 | 2 | ← 内容
    +------------+----------+

```

什么时候`a`是**数组**，

*   表达式的值`a`将转换为 的地址`a`。因此，当你打印时`a`，你会得到它的地址，即“0x100”。
*   C中的操作`a[n]`等价于，即按单位`*(a + n)`前进地址，然后解引用得到内容。因此，等价于，返回0x100 处的内容，即“3”。`a``n``a[0]``*0x100`

什么时候`a`是**指针**，

*   的“值”`a`是提供地址的内容。其实这是常态，数组类型是个特例。因此，当您打印时`a`，您将获得该地址的内容，即“3”。
*   手术`a[n]`还在`*(a + n)`。因此，`a[0]`等价于`*3`，由于地址“3”无效，导致分段错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T09:22:30.943

您必须对跨不同翻译单元声明的对象使用一致的类型。

给定`int a[] = {2, 3};`，声明`extern int a[];`或`extern int a[2]`; 将是兼容的，而`extern int *a;`不会因为指针和数组是完全独立的类型。

数组的特殊之处在于，当数组的名称出现在任何表达式上下文中，而不是作为“地址”（一元`&`）的操作数或`sizeof`时，它们会自动转换为指向其第一个元素的指针。这是提供数组和指针之间语法兼容性的原因，但它们不是同一类型。

考虑这两个函数作为注释示例。请注意，表达式在第一个函数`a`的第二个（技术上是第三个）中转换为指向其第一个元素的指针，但不是在它是操作数`printf`的第一个函数中。`printf``&`

```
#include <stdio.h>

void print_array_info(void)
{
    extern int a[];
    printf("address of a:  %p\n", (void*) &a);   // prints address of a
    printf(" converted a:  %p\n", (void*) a);    // prints address of a[0]
    printf("value of a[0]: %x\n", a[0]);         // prints value of a
}

void print_pointer_info(void) {
    extern int a[];
    int *b = a; // == &a[0]

    printf("address of b:  %p\n", (void*) &b);  // prints address of b
    printf("  value of b:  %p\n", (void*) b);   // prints value of b (== &a[0])
    printf("value of b[0]: %x\n", b[0]);        // prints value of b[0] (== a[0])
} 
```

请注意，我使用`%p`打印指针并显式转换为`void*`.

# c - getch(); c和代码块中的运行时错误

> ID：11167998
> 
> 赞同：0
> 
> 时间：2012-06-23T08:25:37.017
> 
> 标签：c, gcc, codeblocks, getch

我使用 codeblocks IDE 和 gcc 编译器。我尝试编写简单的程序计费系统。我们使用 getch(); 对于字符输入，在构建项目期间不会出现错误，但在运行时会出现错误并显示类似“在没有当前窗口时尝试绘图操作”的错误消息。真正的问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T08:42:11.340

你没有提到你在什么平台上编译。如果是Linux，则不能使用`getch()`，因为`conio.h`仅适用于dos。但是这个错误消息很可能是由于 gcc 与 Code::Blocks 的错误集成引起的。尝试直接与 gcc 编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T13:24:22.940

因为您在带有 gcc 的 Code::Blocks 的 Windows 中使用，所以我可以安全地假设您使用的是 cygwin 工具链，这是一个类似 linux 的环境。所以我建议你使用`system("pause")`包括标题`stdlib.h`