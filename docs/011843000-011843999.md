# StackOverflow 问答 11843000-11843999

# javascript - 这个 JavaScript 是如何工作的？

> ID：11843000
> 
> 赞同：2
> 
> 时间：2012-08-07T09:29:56.867
> 
> 标签：javascript, ternary-operator

我之前正在搜索如何使用 JavaScript 淡化元素，我遇到了这个函数（对象）。我开始想知道它是如何工作的？

```
var fadeEffect=function(){
return{
    init:function(id, flag, target){
        this.elem = document.getElementById(id);
        clearInterval(this.elem.si);
        this.target = target ? target : flag ? 100 : 0;
        this.flag = flag || -1;
        this.alpha = this.elem.style.opacity ? parseFloat(this.elem.style.opacity) * 100 : 0;
        this.si = setInterval(function(){fadeEffect.tween()}, 20);
    },
    tween:function(){
        if(this.alpha == this.target){
            clearInterval(this.elem.si);
        }else{
            var value = Math.round(this.alpha + ((this.target - this.alpha) * .05)) + (1 * this.flag);
            this.elem.style.opacity = value / 100;
            this.elem.style.filter = 'alpha(opacity=' + value + ')';
            this.alpha = value
        }
    }
}
}(); 
```

我知道这是自调用的，并且只返回一个具有两种方法的对象。我主要关心的是为什么它使用 this 关键字？我假设“this”关键字是对象名称“fadeEffect”的占位符。如果“this”用于创建多个对象，我会理解......但为什么在这里使用它？

困扰我的另一件事是这个三元运算符......

```
 this.target = target ? target : flag ? 100 : 0; 
```

这到底是怎么回事？这就像两个三元运算符组合成一个我从未想过的可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T09:32:06.810

至于你的第二个问题。这可能会更清楚：

```
this.target = (target ? target : (flag ? 100 : 0)); 
```

所以是的，一个嵌套的三元运算符！用文字写出来：

this.target =（目标是真实值吗？然后使用目标。如果不是，则使用最后一部分的结果->（标志是真实值吗？使用100。否则，使用0））。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T09:44:13.203

将其视为命名空间。`this`关键字引用自调用函数返回的对象字面量。这意味着它`this.target`可以在全局命名空间（或`fadeEffect`定义的任何范围）中作为对象属性访问：`fadeEffect.target`，但它不会干扰可能存在于外部范围中的其他变量。

这两个方法设置了返回对象的新属性，这就是它的全部。就我个人而言，我发现这是一个糟糕的代码......在这个例子中，闭包会是更好的选择：

```
var fadeEffect=function(){
    var elem,target,flag,alpha,si;//make private
    return{
        init:function(id, flag, target){
            elem = document.getElementById(id);
            clearInterval(elem.si);
            target = target ? target : flag ? 100 : 0;
            flag = flag || -1;
            alpha = elem.style.opacity ? parseFloat(elem.style.opacity) * 100 :0;
            si = setInterval(function(){fadeEffect.tween()}, 20);
        },
        tween:function(){
            if(alpha == target){
                clearInterval(si);//this.elem.si doesn't add up, init defines it as this.si
            }else{
                var value = Math.round(alpha + ((target - alpha) * .05))+ (1 * flag);
                elem.style.opacity = value / 100;
                elem.style.filter = 'alpha(opacity=' + value + ')';
                alpha = value
            }
        }
    }
}(); 
```

这做同样的事情，但其他代码不能干扰目标的值，或弄乱间隔等......你说得对，`this`在这种情况下不需要关键字，但我认为那个人写这篇文章要么不熟悉 JS 闭包，要么至少对它们的工作方式不安全。此代码有效地模拟了单例模式，或者至少将对象字面量视为类的实例。我的猜测是，作者熟悉经典 OOP，但不熟悉原型继承。无论如何，上面的代码更安全，更安全更好恕我直言

* * *

关于嵌套三元的问题，我使用 JSLint 检查了下面的代码，它提出了一个更短但更清晰的替代方案：使用默认运算符，后跟一个三元：

```
 //JSLint recommends this
 target = argTarget || argFlag ? 100 : 0;
 //over nested ternary
 target = argTarget ? argTarget : argFlag ? 100 : 0; 
```

无论如何，这里是相同的代码，只是没有使用危险的`this`构造，而是使用了闭包，顺便说一句，这是 JavaScript 非常强大的功能之一，值得仔细看看你可以用它们做什么！

```
var fadeEffect=(function()
{
    var elem,target,flag,alpha,si;//make private
    //define private 'methods': functions will be available, but only to return object
    //tween shouldn't be callable, it's a callback for the interval, which is set in init
    function tween()
    {
        if(alpha === target)
        {
           clearInterval(si);//this.elem.si doesn't add up, init defines it as this.si
        }
        else
        {
            alpha = Math.round(alpha + ((target - alpha) * 0.05))+ (1 * flag);
            //don't know why 1*flag is needed here, suggest:
            //alpha = Math.round(alpha + ((target - alpha) * 0.05)) + (+flag); +flag coerces to numeric
            elem.style.opacity = alpha / 100;
            elem.style.filter = 'alpha(opacity=' + alpha + ')';
        }
    }
    return{
        init:function(id, argFlag, argTarget)//arguments !== closure scope
        {
            if (si !== undefined && si !== null)
            {
                clearInterval(si);
            }
            elem = document.getElementById(id);
            //JSLint recommends this:
            target = argTarget || argFlag ? 100 : 0;
            //over nested ternary
            target = argTarget ? argTarget : argFlag ? 100 : 0;
            flag = argFlag || -1;
            alpha = elem.style.opacity ? parseFloat(elem.style.opacity) * 100 :0;
            si = setInterval(tween, 20);//just a reference to the tween function will do
        }
    };
})();
fadeEffect.init('someId',1,50);//will set things in motion
fadeEffect.tween();//undefined
console.log(fadeEffect.target);
fadeEffect.target = document.getElementById('someOtherId');//no problem, but won't change the value of var target 
```

这样，`tween`方法只能通过间隔调用，并且对象及其方法/函数正在其上工作的元素永远不会*被外部操作覆盖*，它们是对象固有的。这使得构造更安全，更重要的是，您只能真正搞砸一种方法：覆盖该`.init`方法，对象将变得无用，但无害。将其与您的代码进行比较，您可能会弄乱这两种方法，但让区间保持不变......这是个坏消息：区间最终会寻找一个很可能已被删除的回调函数，从而导致您的代码惨遭失败：

```
//asume your code using this.tween();
fadeEffect.init('id',1,123);
delete fadeEffect.tween;
//inside fadeEffect:
setInterval(function(){fadeEffect.tween()}, 20);
//should be written as:
setInterval(fadeEffect.tween,20);
  // === setInterval(undefined,20); === :-( 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T09:37:15.107

另一种解释`this.target = target ? target : flag ? 100 : 0;`：

```
if(target){
  this.target = target;
}
else{  
  if(flag){
    this.target = 100;
  } else {
    this.target = 0;
  }
} 
```

# centos - CentOS 分辨率低

> ID：11843001
> 
> 赞同：0
> 
> 时间：2012-08-07T09:30:00.257
> 
> 标签：centos, xorg

它工作得很好，但在我切换到不同的液晶显示器后，分辨率从 1920x1200 到 1920x1080。它只能在 1280x1024 上工作，分辨率列表中没有更高的分辨率可用。

我尝试了system-config-display，似乎系统可以识别新显示器，但它没有列出最佳分辨率（1920x1080），而是列出了1920x1200。

下一步我应该做什么？Xorg.0.log 中没有 ERROR，只有几个警告：

```
[andych@milerecord]/var/log$ grep WW Xorg.0.log
(WW) warning, (EE) error, (NI) not implemented, (??) unknown.
(WW) VESA(0): Failed to set up write-combining range (0xd3fe0000,0x10000)
(WW) VESA(0): Failed to set up write-combining range (0xd3fc0000,0x30000)
(WW) VESA(0): Failed to set up write-combining range (0xd3f80000,0x70000)
(WW) VESA(0): Failed to set up write-combining range (0xd3f00000,0xf0000)
(WW) VESA(0): Failed to set up write-combining range (0xd3e00000,0x1f0000)
(WW) VESA(0): Failed to set up write-combining range (0xd3c00000,0x3f0000)
(WW) VESA(0): Failed to set up write-combining range (0xd3800000,0x7f0000)
(WW) VESA(0): Failed to set up write-combining range (0xd3000000,0xff0000)
(WW) VESA(0): Failed to set up write-combining range (0xd2000000,0x1ff0000)
(WW) VESA(0): Failed to set up write-combining range (0xd0000000,0x3ff0000)
(WW) <default pointer>: No Device specified, looking for one... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:54:55.183

您正在使用 VESA 驱动程序，这可能不是您想要的。该驱动程序是“通用”驱动程序，肯定不能与您的显卡完美配合。

你有哪款显卡？请粘贴 的输出`lspci -nn | grep VGA`。

我的猜测是 CentOS 对你的现代硬件来说太旧了，所以 CentOS 驱动程序不支持你的硬件。我建议您尝试一些现代发行版（Debian Testing、Ubuntu 12.04、Fedora 17）的 Live-CD，看看它是否工作正常。

或者你的显卡对于 CentOS 来说太旧了*？*可能是另一种可能。。

# ruby - 使用 Erubis 获取 ruby 哈希键值

> ID：11843003
> 
> 赞同：-1
> 
> 时间：2012-08-07T09:30:02.287
> 
> 标签：ruby, erubis

我有一个哈希：

```
hash = "email_address"=>"test@example.com" 
```

我想使用 erubis 从这个哈希值“test@example.com”中获取值。这不起作用：

```
<% 
pp hash.[email_address]
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:32:04.897

你试过这个吗？

```
<%= pp hash["email_address"] %> 
```

或者

```
<%= pp hash[:email_address] %> 
```

# components - RPC 如何传输大二进制数据？

> ID：11843009
> 
> 赞同：0
> 
> 时间：2012-08-07T09:30:15.630
> 
> 标签：components, rpc, distributed

如果我想使用 RPC 或组件技术传输数据，但数据量可能很大，如何处理这种情况？例如，我想将文件作为参数传输到远程，但我不想将整个文件放入内存中进行传输。我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:23:08.433

我认为您应该考虑文件传输解决方案，例如在后台建立 FTP 连接，并使应该对此文件数据执行的操作等到文件传输完成。此外，您还应该注意传输数据的正确性，例如校验和。另一种解决方案可能是将包含文件的远程目录挂载为本地卷，或者如果您将所有文件放在一个地方并且使用 Linux，则甚至设置分布式文件系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T01:40:44.717

让我回答我的问题。

答案是[MTOM](http://en.wikipedia.org/wiki/Message_Transmission_Optimization_Mechanism)，请确保您使用的框架支持它。

# java - 使用弹簧安全性捕获注销/会话超时

> ID：11843010
> 
> 赞同：34
> 
> 时间：2012-08-07T09:30:17.570
> 
> 标签：java, spring-security, session-timeout

我正在使用 spring/spring-security 3.1 并希望在用户注销时（或会话超时）采取一些措施。我设法完成了注销操作，但会话超时，我无法让它工作。

在 web.xml 中，我只指定了 ContextLoaderListener（这可能是问题吗？），当然还有 DelegatingFilterProxy。

我使用这样的自动配置。

```
 <security:http auto-config="false" use-expressions="false">
    <security:intercept-url pattern="/dialog/*"
        access="ROLE_USERS" />
    <security:intercept-url pattern="/boa/*"
        access="ROLE-USERS" />
    <security:intercept-url pattern="/*.html"
        access="ROLE-USERS" />

    <security:form-login login-page="/auth/login.html"
        default-target-url="/index.html" />
    <security:logout logout-url="/logout"
         invalidate-session="true"
        delete-cookies="JSESSIONID" success-handler-ref="logoutHandler" />
</security:http>

<bean id="logoutHandler" class="com.bla.bla.bla.LogoutHandler">
    <property name="logoutUrl" value="/auth/logout.html"/>
</bean> 
```

当用户单击注销时调用注销处理程序，这将对数据库进行一些调用。

但是我该如何处理会话超时？？？

处理它的一种方法是在用户登录时将用户名注入会话，然后使用普通的 httpsessionlistener 并在会话超时时执行相同的操作。

spring security 有没有类似的方法，所以当 spring 发现会话超时时，我可以挂在那里，访问 Authentication 并从那里获取 UserDetails 并进行清理。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-08-08T14:20:19.900

我有一个更简单的解决方案。这适用于注销和会话超时。

```
@Component
public class LogoutListener implements ApplicationListener<SessionDestroyedEvent> {

    @Override
    public void onApplicationEvent(SessionDestroyedEvent event)
    {
        List<SecurityContext> lstSecurityContext = event.getSecurityContexts();
        UserDetails ud;
        for (SecurityContext securityContext : lstSecurityContext)
        {
            ud = (UserDetails) securityContext.getAuthentication().getPrincipal();
            // ...
        }
    }

} 
```

网页.xml：

```
<listener>
    <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
</listener> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T11:12:45.580

好的，我有一个可行的解决方案，它没有我想要的那么好，但它让我得到了结果。

我创建了一个 bean，我可以从中获取 ApplicationContext。

```
public class AppCtxProvider implements ApplicationContextAware {
private static WeakReference<ApplicationContext> APP_CTX;

@Override
public void setApplicationContext(ApplicationContext applicationContext)
        throws BeansException {
    APP_CTX = new WeakReference<ApplicationContext>(applicationContext);
}

public static ApplicationContext getAppCtx() {
    return APP_CTX.get();
}
} 
```

我实现 HttpSessionEventPublisher 并在销毁时，通过 sessionRegistry.getSessionInfo(sessionId) 获取 UserDetails

现在我有了需要清理会话的 spring bean 和会话超时的用户。

```
public class SessionTimeoutHandler extends HttpSessionEventPublisher {
@Override
public void sessionCreated(HttpSessionEvent event) {
    super.sessionCreated(event);
}

@Override
public void sessionDestroyed(HttpSessionEvent event) {
    SessionRegistry sessionRegistry = getSessionRegistry();
    SessionInformation sessionInfo = (sessionRegistry != null ? sessionRegistry
            .getSessionInformation(event.getSession().getId()) : null);
    UserDetails ud = null;
    if (sessionInfo != null) {
        ud = (UserDetails) sessionInfo.getPrincipal();
    }
    if (ud != null) {
               // Do my stuff
    }
    super.sessionDestroyed(event);
}

private SessionRegistry getSessionRegistry() {
    ApplicationContext appCtx = AppCtxProvider.getAppCtx();
    return appCtx.getBean("sessionRegistry", SessionRegistry.class);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-08T01:54:18.407

当 SessionManagementFilter 检测到无效的请求会话时，您可以使用[SimpleRedirectInvalidSessionStrategy重定向到 URL。](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/session/SimpleRedirectInvalidSessionStrategy.html)

示例 applicationContext 将是这样的：

```
<http>
    <custom-filter ref="sessionManagementFilter" before="SESSION_MANAGEMENT_FILTER" />
<http>

<beans:bean id="sessionManagementFilter" class="org.springframework.security.web.session.SessionManagementFilter">
    <beans:constructor-arg name="securityContextRepository" ref="httpSessionSecurityContextRepository" />
    <beans:property name="invalidSessionStrategy" ref="simpleRedirectInvalidSessionStrategy " />
</beans:bean>

<beans:bean id="simpleRedirectInvalidSessionStrategy" class="org.springframework.security.web.session.SimpleRedirectInvalidSessionStrategy">
  <beans:constructor-arg name="invalidSessionUrl" value="/general/logins/sessionExpired.jsf" />
  <beans:property name="createNewSession" value="false" />
</beans:bean>
<beans:bean id="httpSessionSecurityContextRepository" class="org.springframework.security.web.context.HttpSessionSecurityContextRepository"/> 
```

如果您使用的是 JSF，另请参阅[JSF 2、Spring Security 3.x 和 Richfaces 4 在会话超时时重定向到登录页面以获取 ajax 请求](https://stackoverflow.com/questions/10143539/jsf-2-spring-security-3-x-and-richfaces-4-redirect-to-login-page-on-session-tim/10156398#10156398)以了解如何处理 Ajax 请求。

**更新**：在这种情况下，您可以扩展 HttpSessionEventPublisher 并监听 sessionDestroyed 事件，如下所示：

```
package com.examples;
import javax.servlet.http.HttpSessionEvent;

import org.springframework.security.web.session.HttpSessionEventPublisher;

public class MyHttpSessionEventPublisher extends HttpSessionEventPublisher {

   @Override
   public void sessionCreated(HttpSessionEvent event) {
      super.sessionCreated(event);
   }

   @Override
   public void sessionDestroyed(HttpSessionEvent event) {
      //do something
      super.sessionDestroyed(event);
   }

} 
```

然后在您的 web.xml 中注册此侦听器，如下所示：

```
<listener>
    <listener-class>com.examples.MyHttpSessionEventPublisher</listener-class>
 </listener> 
```

# asp.net - Telerik RadTextBox 在选择 Chrome 自动填充选项后变为只读

> ID：11843013
> 
> 赞同：0
> 
> 时间：2012-08-07T09:30:21.623
> 
> 标签：asp.net, google-chrome, telerik, autofill

想知道是否有人以前见过或修复过这个问题：

当表单加载时，我可以手动输入我的地址字段（所有字段都是 RadTextBox），没有问题

如果我从顶部开始填写表格，在我输入电子邮件地址的前几个字符后 - Chrome 会提供一个电子邮件地址列表供我选择，如果我选择一个 - 它会在表格的其余部分填写与该电子邮件地址关联的信息。

到目前为止，一切都很好。

当我现在尝试编辑后续字段时，我不能 - 它们已变为只读！

在尝试解决这个问题时，我的直觉是打开 Chrome 开发者工具来查看有效领域和无效领域之间的区别。

但是你瞧——只要我打开开发者工具——问题就消失了！

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:29:02.023

感谢 Stefan Sedich！！！

[http://weblogs.asp.net/stefansedich/archive/2008/11/04/bug-with-latest-google-chrome-and-asp-net-validation.aspx](http://weblogs.asp.net/stefansedich/archive/2008/11/04/bug-with-latest-google-chrome-and-asp-net-validation.aspx)

# opengl - OpenGL着色语言基本类型

> ID：11843015
> 
> 赞同：2
> 
> 时间：2012-08-07T09:30:30.583
> 
> 标签：opengl, glsl

我正在尝试在英特尔卡上运行我的着色器。我发现不能将采样器类型声明为结构字段......这令人失望。

我的着色器在 NVIDIA 平台上编译和运行良好，带有采样器数组和带有采样器字段的结构。我知道 NVIDIA 平台比其他平台更宽松，使用 GLSL 语法，但我认为应该在结构和数组中允许采样器类型。

但是，在阅读[了这一](http://www.opengl.org/wiki/GLSL_Type)页之后，我变得更加困惑。特别是，我发现以下引文很有趣：

> 采样器类型的数组是特殊的。在 GLSL 3.30 版本下，可以声明采样器数组
> 
> 结构不能包含采样器类型的变量。

因此，我对 GLSL 规范进行了调查，在搜索时我发现基本类型中的采样器类型（第 4.1 段），数组可以由基本类型（第 4 段）组成，结构成员声明也是如此（第 4.1 段）。 9）。我是否误解了规范，或者英特尔驱动程序过于*“严格”*？

有人可以指出这个问题吗？最后一个问题应该是*“采样器类型是否被认为是基本类型？”*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:23:06.633

这其中的哪一部分不清楚？

采样器是基本类型。基本类型可以在数组中。和采样器：

> 它们只能声明为函数参数或统一变量（参见第 4.3.5 节“统一”）。

结构中的字段既不是函数参数也不是统一变量。结构本身稍后可以声明为统一，但成员声明*还不*是统一的。因此，在结构中声明采样器是非法的。

最好不要将采样器和其他不透明类型视为类型，而是将其视为特殊构造（如纹理等）的占位符。

# linux - 串口读功能同步linux

> ID：11843018
> 
> 赞同：0
> 
> 时间：2012-08-07T09:30:39.150
> 
> 标签：linux, embedded-linux

我必须与其他两个功能共享串口*读取*功能，基本上

1.  第一个函数每 1000 毫秒对数据的串行端口读取函数进行轮询

2.  当有东西写入串口时，它必须从串口读回 ack/nack。

    谁能建议如何使用互斥锁或 linux 中用于常见读取功能的任何其他同步功能有效地实现这种同步？我没有为这些操作使用任何线程，因为这是在轮询的基础上完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:22:02.293

在等待确认时禁用轮询。您不需要互斥锁，因为您没有使用线程，只需使用写入函数设置的全局变量并通过轮询读取，这样您就知道是否必须跳过轮询。

# java - 获取数据的CQL复合主键查询

> ID：11843019
> 
> 赞同：0
> 
> 时间：2012-08-07T09:30:40.780
> 
> 标签：java, cassandra, cql

我的列族有两个主键

```
"CREATE TABLE compositkeys(user_name varchar," +
                                            "user_id int,"+
                                            "name varchar," +
                                            "gender varchar," +
                                            "PRIMARY KEY (user_name,user_id)" +

                        ")"; 
```

我已经用Java创建了这个现在我在一个用户名（sunil）主键上插入了6行，现在当我尝试检索sunil主键中的所有值时，它只给了我一个细节

```
String qry = "select * from compositkeys where user_name = 'sunil' order by user_id";
            Statement smt = con.createStatement();
            //smt.executeUpdate(qry);

            ResultSet rs = smt.executeQuery(qry);
            //rs.get
            int r = rs.getRow();
            System.out.println(r);
            ResultSetMetaData rm = rs.getMetaData();
            int columnCount = rm.getColumnCount();
            System.out.println(columnCount);
            for(int i=1;i<=columnCount;i++)
            {
                String name = rm.getColumnName(i);
                 System.out.print(rm.getColumnName(i));
                 System.out.println(" = "+rs.getString(name));
                 System.out.println("--------------------------------------------------");
            } 
```

它只给我一个输出。查询有什么问题吗？我想要密钥 sunil 下的所有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:44:05.610

您有一个循环遍历返回行中的列，但您只要求一行（即 rs.getRow() 方法）。您应该将 rs.getRow() 调用和以下逻辑写入外部循环，只要 getRow() 不返回 null，该循环就会迭代。这个输出循环将检索所有用户的 ID。

# jquery - 如何在 jquery 模态对话框中设置 cookie

> ID：11843020
> 
> 赞同：0
> 
> 时间：2012-08-07T09:30:52.597
> 
> 标签：jquery, jquery-ui, cookies, modal-dialog

我想将 cookie 添加到我的模态对话框中，但我不知道如何。我想添加 24 小时的 cookie，有人可以帮忙吗？这是我的模态对话框代码：

```
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js"></script>
<script type="text/javascript" href="/jquery/jquery.cookies.js"></script>

<script>
$(function() {
        // a workaround for a flaw in the demo system (http://dev.jqueryui.com/ticket/4375), ignore!
        if ($.cookie('showDialog') == undefined || $.cookie('showDialog') == null || $.cookie('showDialog') != 'false') {

        $( "#dialog:ui-dialog" ).dialog( "disable" );
         $( ".selector" ).dialog({ hide: "slide" });
        $( "#dialog-modal" ).dialog({
            width:860,
            height: 420,
            modal: true,
            resizable:false,
            draggable:false
        });
        $.cookie('showDialog', 'false', { expires: 1 }); // set the cookie, with expiry after 1 day
}
    });

    </script>

<link href="http://xxx.com/jquery/jquery.ui.all.css" rel="stylesheet" type="text/css" />
</head>
<body>

<div id="dialog-modal" title="Like Us on Facebook">
    <div class="fb-like-box" data-href="http://www.facebook.com/xxx" data-width="820" data-height="335" data-show-faces="true" data-stream="false" data-header="false"></div> 
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:41:08.897

您的代码本身看起来不错，但是您还应该包含`script`对 jQuery [cookies 插件](https://github.com/carhartl/jquery-cookie/)的引用，因为它不是 jQuery 的标准部分。

```
<script type="text/javascript" href="/scripts/jquery.cookies.js"></script> 
```

您还需要在显示对话框后设置 cookie：

```
if ($.cookie('showDialog') == undefined || $.cookie('showDialog') == null || $.cookie('showDialog') != 'false') {
    // show dialog...
    $.cookie('showDialog', 'false', { expires: 1 }); // set the cookie, with expiry after 1 day
} 
```

# xml - 用于在 xml 标签之间提取字符串的 Shell 脚本

> ID：11843028
> 
> 赞同：1
> 
> 时间：2012-08-07T09:31:09.570
> 
> 标签：xml, string, shell, extract

你能帮我提取xml标签之间的字符串吗？xml输入：

```
 <Name ns1:translate="yes">Overview</Name>
    <Title ns1:translate="yes">This is a book</Title>
    <Description ns1:translate="yes"/>
    <TextValue ns1:translate="yes">End</TextValue> 
```

预期输出：

```
 Overview = Overview
    This is a book = This is a book
       =
    End = End 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:34:38.453

If you want just remove tags, you can do it this way:

```
$ sed 's/<[^>]*>//g' 
```

If you want to repeat the text in tags, you need something like:

```
$ sed 's/.*>\([^<]*\)<.*/\1 = \1/g' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T07:29:38.747

一个建议：请使用 PERL 进行 XML 读取/提取。PERL 有许多模块 XML 解析模块 [包括 SAX/DOM]。

甚至 Python 也是 XML 解析的完美选择。

# c++ - 找不到或不匹配“mpiexec”的调试信息。找不到或打开 PDB 文件

> ID：11843035
> 
> 赞同：1
> 
> 时间：2012-08-07T09:31:27.567
> 
> 标签：c++, visual-studio-2010, parallel-processing, mpi

我将在 Visual Studio C++ 2010 上使用 MPI 开始并行编程。我为 MPI 进行了所有配置。现在我可以从命令提示符运行任何 MPI 程序，但我想从 Visual Studio 进行调用。所以我按照这个[屏幕截图中的步骤](http://supercomputingblog.com/wp-content/uploads/2009/06/configure_command_line.JPG)

我得到了这个错误：

```
Debugging information for 'mpiexec' cannot be found or doesn't match.Cannot find or open the PDB file 
```

所以我该怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T11:44:02.270

*Microsoft HPC Pack 2008 SDK 为 Visual Studio 2010- MPI Cluster Debugger*添加了一个额外的调试器类型。可以在*调试器*中选择它以在您问题的屏幕截图中显示的同一配置页面上启动下拉控件。

[这](https://sharepoint.campus.rwth-aachen.de/units/rz/HPC/public/Shared%20Documents/03_MSMPI_and_C_CPP_in_VS2010.pdf)是我为我们的并行编程研讨会之一创建的关于使用 VS 2010 和 MS HPC Pack SDK 构建和调试 MPI 项目的简洁的一页指南。

# php - 如何使用 ajax textarea 更新数据库

> ID：11843037
> 
> 赞同：0
> 
> 时间：2012-08-07T09:31:31.630
> 
> 标签：php, ajax, javascript-events

美好生活的朋友们，我不知道如何用这个文本区域更新数据库。有人可以帮忙吗？

**ajax 调用**

```
$$('.btn').addEvent('click', function() {
var request = new Request( {
                        url: '<?php echo $baselink;?>',
                        method: 'post',
                        onSuccess:function(responseText) { alert(responseText);},
                        data: {                    
                        'name' : this.id,
                        'value' : this.value,
                        'tmpl':'component',
                        'format':'raw',
                        'ajax' : 1
                        }
}).send();});

**//Form//**
$s6=$item['Select6'];
$id=$item['items_id'];
print '<form method="post" class="formulier">
<input maxlength="250" NAME="name" class="name" id="'.$id.'" value="'.$s6.'" SIZE="50">
<input type="submit" value="Click me" class="btn"/></form>'; 
```

**询问**

```
if(JRequest::getVar('ajax') ) {  
$state=JRequest::getInt('value','oeps');    
$id=JRequest::getVar('name','');   
if ( $id ) {  
$state=(int)$state;  
$query="UPDATE #__dataitems set `Select6`='".$state."' where `items_id`=".$id;    
$db->query();
echo ' Bijgwerkt naar '.$state.' '.$id;
exit;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:05:17.517

You are currently listening on the radio button click and send the event when it does.

You need to add a button/href to your form and bind an click event to it, and then once it is clicked, just collect the data from the radio button and the textarea and send it:

**HTML:**

```
<input type="button" value="Click me" class="btn"/> 
```

**JS:**

```
$$('.btn').addEvent('click', function(){
var radioId = ...//get radio id
var radioVal = ...//get val
var textarea = ... //get textarea val
var request = new Request( {
                            url: '<?php echo $baselink;?>',
                            method: 'post',
                            onSuccess:function(responseText) { alert(responseText);},
                            data: {
                            'volgorde' : radioId,
                            'check' : radioVal,
                            'textarea' : textarea ,
                            'tmpl':'component',
                            'format':'raw',
                            'ajax' : 1
                            }
    }).send();}); 
```

I'm guessing you are using prototypejs (because of the `$$`), i don't know it very well so i can't help you with how to get the elements id and values, but this is the direction.

# wcf - WCF CallBack 在同一台机器上工作，但不能通过网络工作

> ID：11843041
> 
> 赞同：1
> 
> 时间：2012-08-07T09:31:43.567
> 
> 标签：wcf, callback

我尝试使用 WSDualHttpBinding 实现 WCF 回调。该服务托管在 IIS 7 上。

当我在与主机相同的机器上为服务创建示例客户端时，它工作正常。但是当我从网络上的不同系统运行同一个客户端时，我得到了超时异常

服务器堆栈跟踪：在 System.ServiceModel.Channels.ReliableRequestor.ThrowTimeoutException() 在 System.ServiceModel.Channels.ReliableRequestor.Request(TimeSpan timeout) 在 System.ServiceModel.Channels.ClientReliableSession.Open(TimeSpan timeout) 在 System.ServiceModel.Channels .ClientReliableDuplexSessionChannel.OnOpen(TimeSpan timeout) at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout) at System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout) at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)在 System.ServiceModel.Channels.ServiceChannel.CallOpenOnce.System.ServiceModel.Channels.ServiceChannel.ICallOnce.Call（ServiceChannel 通道，TimeSpan 超时）在 System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce（TimeSpan 超时，CallOnceManager 级联）在系统.ServiceModel.Channels。System.ServiceModel.Channels.ServiceChannel.Call 中的 ServiceChannel.EnsureOpened（TimeSpan 超时）（字符串操作，布尔单向，ProxyOperationRuntime 操作，Object[] 输入，Object[] 输出，TimeSpan 超时）在 System.ServiceModel.Channels.ServiceChannel.Call （字符串操作，布尔单向，ProxyOperationRuntime 操作，Object[] 输入，Object[] 输出）在 System.ServiceModel.Channels.ServiceChannelProxy.InvokeService（IMethodCallMessage 方法调用，ProxyOperationRuntime 操作）在 System.ServiceModel.Channels.ServiceChannelProxy.Invoke（IMessage 消息)System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 的 ProxyOperationRuntime 操作，Object[] ins，Object[] outs)System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 的 ProxyOperationRuntime 操作，Object[] ins，Object[] outs)

CallbackContract 如下所示：

```
 public interface IMyServiceCallBack
    {
        [OperationContract(IsOneWay = true)]
        void Notify();
} 
```

我也指定了

```
[ServiceBehavior(InstanceContextMode=InstanceContextMode.PerSession,ConcurrencyMode = ConcurrencyMode.Reentrant)] 
```

Client上的app.config如下：

```
 <wsDualHttpBinding>
            <binding name="WSDualHttpBinding_Callback" closeTimeout="00:01:00"                         clientBaseAddress="http://10.1.3.199:8002/myServiceHost/myService.svc/Endpoint"
                     openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                     bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                     maxBufferPoolSize="97108864" maxReceivedMessageSize="97108864"
                     messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true">
              <readerQuotas maxDepth="32" maxStringContentLength="97108864" maxArrayLength="97108864"
                  maxBytesPerRead="97108864" maxNameTableCharCount="97108864" />              
              <security mode="None"/>
            </binding>
          </wsDualHttpBinding>
<client>
 <endpoint address="http://10.1.3.199/myServiceHost/myService.svc/Endpoint"
                binding="wsDualHttpBinding" bindingConfiguration="WSDualHttpBinding_Callback"
                contract="myService.ServiceContract" name="WSDualHttpBinding_Callback" />
</client> 
```

我错过了什么！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:05:53.867

`WSDualHttpBinding`仅当服务器*和客户端*都可以访问端口 80 时才有效。是的，这意味着服务器将尝试打开与客户端的 TCP 连接。通过互联网`WSDualHttpBinding`基本上是无用的，因为大多数用户坐在路由器后面，这些路由器不会将连接从服务器路由回客户端。

**如果您在同一个网络上（如您所说），那么您需要确保客户端计算机上的防火墙允许端口 80（或您使用的任何端口）。**

另一种方法是使用`NetTcpBinding`它打开一个允许双工通信的单个*传出*tcp 连接。如果您的客户端和服务器始终在同一个网络上，这是一个很好的选择。

有关 WSDualHttpBinding 的更多信息，请参阅[此帖子](https://stackoverflow.com/questions/59677/wsdualhttpbinding-for-duplex-callbacks)

# python - 是否可以在 wxPython 中将面板插入 BoxSizer

> ID：11843043
> 
> 赞同：0
> 
> 时间：2012-08-07T09:31:50.673
> 
> 标签：python, user-interface, wxpython

我正在尝试制作看起来像安装程序的东西而没有实际安装任何东西（我正在使用它来探索 wxPython）。现在我正试图将一个面板放在另一个面板上，但是当我这样做时，窗口就会出现灰色，只有一个按钮的一角显示。

```
import wx

class PanelOne(wx.Panel):
    def __init__(self,*args,**kwargs):
        wx.Panel.__init__(self,*args,**kwargs)

    def initUI(self):
        vbox=wx.BoxSizer(wx.VERTICAL)
        vbox.Add(wx.StaticText(self,-1,'This is Panel One'),0,wx.ALIGN_CENTER_HORIZONTAL|wx.ALIGN_CENTER_VERTICAL)
        vbox.SetSizeHints(self)
        self.SetSizer(vbox)
        self.Show(True)

class Gui(wx.Frame):
    def __init__(self,*args,**kwargs):
        wx.Frame.__init__(self,*args,**kwargs)

        self.initUI()
        self.tTips()

    def initUI(self):
        panel=wx.Panel(self)
        self.vbox=wx.BoxSizer(wx.VERTICAL)

        panel.SetSizer(self.vbox)

        ##This is what im having trouble with
        p1=PanelOne(self)
        self.vbox.Add(p1,3,wx.ALL,10)
        ##

        btnBox=wx.BoxSizer(wx.HORIZONTAL) #This Sizer is for the box that will hold the next and back buttons.

        backBtn=wx.Button(panel,-1,'&Back')# back button
        backBtn.Bind(wx.EVT_BUTTON,self.onBack)
        btnBox.Add(backBtn,0,wx.ALL,10)
        nextBtn=wx.Button(panel,-1,'&Next')# next button
        nextBtn.Bind(wx.EVT_BUTTON,self.onNext)
        btnBox.Add(nextBtn,0,wx.ALL,10)

        self.vbox.Add(btnBox)

        self.vbox.SetSizeHints(self)
        self.Show(True)
    def onNext(self,e):
        pass
    def onBack(self,e):
        pass

    def tTips(self):
        pass
if __name__ == '__main__':
    app=wx.App()
    gui=Gui(None,-1,'Title Yo')
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T13:35:14.663

我建议使用 wx.wizard.Wizard 小部件，因为它基本上已经内置了您需要的一切。[你可以在这里](http://www.blog.pythonlibrary.org/2011/01/27/wxpython-a-wizard-tutorial/)阅读它，或者你可以在 wxPython 演示中看到一个例子（可以从 wxPython 网站下载）。当然，滚动您自己的向导要灵活得多。我创建了一个骨架来在我的[博客](http://www.blog.pythonlibrary.org/2012/07/12/wxpython-how-to-create-a-generic-wizard/)上展示一种方法。那应该让你开始。

您的问题是，当您将面板添加到 sizer 时，您没有添加 wx.EXPAND 标志，并且您没有为面板或框架调用 SetSizer。

# java - Scala 导入和包错误

> ID：11843049
> 
> 赞同：1
> 
> 时间：2012-08-07T09:32:05.253
> 
> 标签：java, scala, import, package

我想从 scala 对象中导入并调用一个 java 类（它来自一个外部包）。我的代码是这样的

Java代码：

```
package com.test.services.account;

public class MyMain {
    public static void main(String[] args) {
        System.out.println("coming into main");
    }
} 
```

斯卡拉代码：

```
package com.newtest.newservice.scala
import _root_.com.test.services.account.MyMain

object scalatest {
  def main(args: Array[String]) {
    println("Hello, world! " + args.toList)
    // Deployer.main(args)
    val  de:MyMain  = new MyMain()
    println(de.toString())
  }
} 
```

当我使用 scalac scalatest.scala 编译它时，它给出了一个错误

**scalatest.scala:2: 错误：对象测试不是包 com 的成员 import *root* .com.test.services.account.MyMain ^ 发现一个错误**

有人可以指导我如何将我的 java 类导入 scala 代码吗？

谢谢苏雷什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:01:36.167

如果你不想使用类似 sbt 的东西，你应该首先决定你的 CLASSPATH 在哪里。由于您有两个不同的类文件（一个由 Java 生成，一个由 Scala 生成），因此您至少需要一个目录来存放您的类文件。假设是`d:\myclasses`。

在这种情况下，您将使用以下命令编译 java 文件：

```
d:\mycode> javac -d d:\myclasses MyMain.java 
```

这将在适当的包结构中生成您的 Java 类文件`d:\myclasses`。然后你会像这样编译scala文件

```
scalac -classpath d:\myclasses -d d:\myclasses scalatest.scala 
```

除了将类路径作为 scalac 命令行的一部分传递之外，您还可以将`CLASSPATH`环境变量设置为`d:\myclasses`.

# json - 从 strust2 动作类动态设置 struts2 jquery 网格列名

> ID：11843052
> 
> 赞同：1
> 
> 时间：2012-08-07T09:32:13.533
> 
> 标签：json, struts2, jqgrid

我正在使用 strust2 jquery 网格。我的问题是我的网格列名称直接来自 strust2 操作类或 DAO 类。网格动态形成基于DAO class.so 属性的DAO 类动态设置为网格列名。

```
 function sample()
 {
      $("#reloadgrid").jqGrid('setGridParam',{ datatype: 'json',page:1});
      $.publish('reloadgrid1');
      return false; 
 }
$.subscribe('reloadgrid1', function(event,element) 
{

var selRowIds=new Array();
var id=new Array();
var disc=new Array();
var data=new Array();
var ret=new Array();
var selRowIds=$('#reloadgrid').jqGrid('getDataIDs');
if(selRowIds.length<=selRowIds.length)
{
for( var i=0;i<selRowIds.length;i++){
        ret[i] = $("#reloadgrid").jqGrid('getRowData',selRowIds[i]); 
       id[i]=ret[i].id;
       disc[i]=ret[i].disc;
       data[i]=ret[i].data;
     if(disc[i]==null||data[i]==null||disc[i]==""||data[i]=="")
     {
         alert("Please enter values into grid");
        return false;
     }       
}
} 
     var totrec=$('#reloadgrid').jqGrid('getGridParam','reccount');
  //    alert(totrec);
        $("#reloadgrid").jqGrid('setGridParam',{ datatype: 'json'});
        $("#reloadgrid").jqGrid('setGridParam',{ postData:
                                                {
                                                 id:id,
                                                 disc:disc,
                                                 data:data,
                                                 reccount:totrec},
                                                 url: "finalAction"
                                                }).trigger('reloadGrid');

    });
   $.subscribe('rowselect', function(event, data)
    {

        var id=event.originalEvent.id;
        alert(id);
        var gr = $("#reloadgrid").jqGrid('getGridParam','selrow');

         if(gr)
        {
         $('#reloadgrid').jqGrid('editRow',gr,true);

         }
    });
       function formatLink(cellvalue, options, rowObject) {
        return "<input type='button' value='save' onClick='return saverow()'>                    
       <input type='button' value='delete' onClick='return deleterow()'>";
  }
  function saverow()
  {
var gr = $("#reloadgrid").jqGrid('getGridParam','selrow');
if(gr!=null)
{   
$('#reloadgrid').jqGrid('saveRow',gr);
return true;
}
else
{    
return false;
} 
return false;
 }
    function deleterow()
  {
alert("Confirm deletion");
var gr = $("#reloadgrid").jqGrid('getGridParam','selrow');
    if(gr!=null)
   {    
     $("#reloadgrid").jqGrid('delGridRow',gr);
   }

   }

 </script>

 <body style="margin: 0px; padding: 0px; font-family: 'Trebuchet MS',verdana;">

 <s:actionerror></s:actionerror>

  <s:form id="simpleForm" action="finalAction">
  <s:url var="gridid" action="gridAction" >
   </s:url>   
  <s:url var="editid" action="EditAction"/>
    <s:url var="finalid" action="finalAction"/>
  </s:form>

    <sjg:grid gridModel="gridmodelsample"
      id="reloadgrid"
      dataType="json"
      loadonce="true"
      href="%{gridid}"
      rowNum="3"
      gridview="true"
      width="600"
      viewrecords="true"
      editinline="true"
      editurl="%{editid}"
      navigator="false"
      navigatorEdit="false"
      navigatorView="false"
      navigatorAdd="false"
      onSelectRowTopics="rowselect"
      navigatorDelete="false"
      navigatorInlineEditButtons="true"
      caption="jQuery Inline Editing Grid"
      pager="true"
      multiselect="false"
      rowList="5,10,15,20"
      reloadTopics="reloadgrid"
      onGridCompleteTopics="createbuttons">
     <sjg:gridColumn name="editoperation" title="" formatter="formatLink">               </sjg:gridColumn>

</sjg:grid>

<sj:submit button="true" name="save" onClick="return sample()" value="save"/>

  </body>
</html> 
```

我的问题是网格列名称动态来自操作类并设置为网格列标题或标题。

# jquery - JQuery - 两个重叠/冲突的脚本

> ID：11843053
> 
> 赞同：0
> 
> 时间：2012-08-07T09:32:14.737
> 
> 标签：jquery, collision, overlap

我刚开始重新设计我的投资组合，发现了一个令人讨厌的小错误：请查看[http://hire.pixelpizza.de/](http://hire.pixelpizza.de/)并单击“ok，让我们看看商品”。之后，您将看到一个蓝色背景的页面，您必须点击“查看更多西方图片”。现在你已经打开了一个fancybox Gallery。

问题是，如果您按下键盘上的右箭头按钮，现在 Page Switch 和 Fancybox 的两个脚本会相互冲突和重叠，这不是很酷

我完全不知道如何解决这个问题：-/我只想要hander.js（http://hire.pixelpizza.de/assets/js/handler.js）脚本在我打开花哨的盒子并开始时停止当我再次关闭它们时。这有点棘手，因为两个脚本都使用密钥号 39

我也可以接受一个解决方案，当你打开fancybox时你根本不能使用左右键，但是当fancybox出现时站点切换认为必须停止

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:40:54.090

在 fancybox 的源代码中，您会在第 671 行找到：

```
if (keys) {
  D.bind('keydown.fb', function (e) {
    var code   = e.which || e.keyCode,
                 target = e.target || e.srcElement;
// more code
  });
} 
```

将其更改为：

```
if (keys) {
  D.bind('keydown.fb', function (e) {
    e.stopImmediatePropagation();
    e.preventDefault();
    var code   = e.which || e.keyCode,
                 target = e.target || e.srcElement;
// more code
  });
} 
```

并且该事件将停止在脚本的其余部分中冒泡。不错的网站顺便说一句

# php - 在 php 中使用 Google Adwords Api

> ID：11843054
> 
> 赞同：0
> 
> 时间：2012-08-07T09:32:15.380
> 
> 标签：php, google-ads-api

我想创建一个应用程序，让管理员能够从站点后端定位极端本地级别的特定人群，这样他们就可以输入位置并说在 2 英里圈或 1 英里圈内以及年龄在 35-50 岁之间的女性然后他们可以看到来自后端的报告以及点击率等。

为此，我下载了 adwords 客户端库[http://code.google.com/p/google-api-adwords-php/](http://code.google.com/p/google-api-adwords-php/)并设置了**auth.ini**的参数，但我不知道如何使用它库并创建上述功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:16:11.223

您需要在此处注册您的应用程序： [https](https://code.google.com/apis/console#access) ://code.google.com/apis/console#access 然后在应用程序控制台中启用 AdWords API。然后在 auth.ini 中配置 email、password、userAgent、developerToken、clientId 和 clientSecret，最后 3 个令牌由应用程序控制台提供，您还需要在此处取消注释 [OAUTH2]。

之后，您需要在 examples/201206/ 文件夹中创建与 init.php 类似的文件。

```
error_reporting(E_STRICT | E_ALL);

define('SRC_PATH', dirname(__FILE__) . '/../../src/');
define('LIB_PATH', 'Google/Api/Ads/AdWords/Lib');
define('UTIL_PATH', 'Google/Api/Ads/Common/Util');
define('AW_UTIL_PATH', 'Google/Api/Ads/AdWords/Util');

define('ADWORDS_VERSION', 'v201206');

// Configure include path
ini_set('include_path', implode(array(
    ini_get('include_path'), PATH_SEPARATOR, SRC_PATH
)));

// Include the AdWordsUser
require_once LIB_PATH . '/AdWordsUser.php'; 
```

然后找到关于访问者的类并实例化并调用过滤器方法。

# php - Ajax 和发布在 php 上

> ID：11843057
> 
> 赞同：0
> 
> 时间：2012-08-07T09:32:28.120
> 
> 标签：php, ajax, post

你好，我想我在这里遗漏了一些东西......我的 html 页面上有那个脚本

```
12     <script type="text/javascript">
 13         $(document).ready(function() {
 14                 $('#find').click(function(){
 15                         
 16                         var amount = $('#amount').val();
 17 
 18                         $.ajax({
 19                                 type: "POST",
 20                                 url: "questions.php",
 21                                 data: amount,
 22                                 success: function(data){
 23                                         
 24                                         $('#results').show();
 25                         
 26                                         
 27                                         $('#results').html(data);
 28                                 }
 29                         });
 30                 });
 31         });
 32     </script> 
```

如果我提醒金额，我会收到输入，因此该值可以正常工作

这是我的 php 脚本

```
<?php
  2 $search_term = $_POST['amount'];
  3 
  4 
  5 
  6 echo $search_term;

... 
```

所以我什么也没得到！如果我将回声内容更改为“mpla mpla”；一切正常吗？

我错过了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:34:48.483

`data`旨在成为键和值的映射。

尝试：

```
data: {amount: amount} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:35:21.503

```
$(document).ready(function() {
 14                 $('#find').click(function(){
 15                         
 16                         var amount = $('#amount').val();
 17 
 18                         $.ajax({
 19                                 type: "POST",
 20                                 url: "questions.php",
 21                                 data: { 'amount': amount },
 22                                 success: function(data){
 23                                         
 24                                         $('#results').show();
 25                         
 26                                         
 27                                         $('#results').html(data);
 28                                 }
 29                         });
 30                 });
 31         }); 
```

改成这样。这会将变量“数量”传递为`$_REQUEST['amount']`

# ipv6 - IPv6 不支持 IP_HDRINCL 选项，如何设置 ipv6 src 地址？

> ID：11843062
> 
> 赞同：3
> 
> 时间：2012-08-07T09:32:36.410
> 
> 标签：ipv6

我需要将 ipv6 src 地址设置为“::0”，但系统会将地址设置为链接本地地址。我使用原始套接字，但是，我不能自己构造 IP 标头，IP_HDRINCL 选项仅支持 IPv4，所以我该怎么办？

# uiview - 带有分离的 .h、.m 和 xib 文件的 UIView

> ID：11843065
> 
> 赞同：0
> 
> 时间：2012-08-07T09:32:38.627
> 
> 标签：uiview, xib

我想创建一个 UIView，它会在用户操作时出现在几个不同的 UIViewControllers 中。例如，每当用户单击“？”时，“如何”弹出视图。它弹出的按钮包含有关用户感兴趣的特定操作的相关信息。视图还可能具有其他元素，例如“完成”按钮和将保存文本的 UITextView 等...

直观地说，它让我想到用 .h、.m 和 xib 文件创建一个单独的 UIView，并且每个需要这个 UIView 的 UIViewController 将简单地分配 + 初始化它并执行 [self.view addSubView:flexUIView] 或插入动画。嗯……不行……

我找不到任何教程来解释如何做这样的事情。

有没有人熟悉这种方法并有一些方向？

如果不是，这种情况的常用方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:28:05.947

Alloc init 不会像在 ViewControllers 中那样加载自定义 UIView 的 nib。您应该在 alloc init 之后使用以下代码加载 nib

假设你有 CustomView.h、CustomView.m、CustomView.xib

```
 NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CustomView" owner:self options:nil];
    yourView = (CustomView *)[nib objectAtIndex:0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:38:56.853

我还发现这个教程也有一个项目文件的链接，它提供了一个关于如何做到这一点的更好的想法：

[创建可重用的 UIView](http://nathanhjones.com/2011/02/20/creating-reusable-uiviews-with-a-drop-shadow-tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T22:47:17.800

这是我编写的使用 .xib、.h、.m 文件创建自定义 UIView 的教程。我添加了两个示例项目，展示了 Interface Builder 和编程方法。

[https://github.com/PaulSolt/CompositeXib](https://github.com/PaulSolt/CompositeXib)

# java - Android：当另一个线程可以从 Set 中删除元素时，如何正确同步 Set 上的迭代？

> ID：11843068
> 
> 赞同：2
> 
> 时间：2012-08-07T09:32:43.887
> 
> 标签：java, android, multithreading, synchronization

为什么当另一个线程正在使用迭代器时`removeListener()`，以下代码中的调用会抛出 a ？`ConcurrentModificationException``fireEvent()`

```
public class MyClass {

    private Set<Object> synchronizedListeners;

    public MyClass() {
        synchronizedListeners = Collections.synchronizedSet(
                new LinkedHashSet<Object>());
    }

    public void addListener(Object listener) {
        synchronizedListeners.add(listener);
    }

    public synchronized void removeListener(Object listener) {
        synchronizedListeners.remove(listener);
    }

    public void fireEvent() {
        synchronized (synchronizedListeners) {
            for (Object listener : synchronizedListeners) {
                // do something with listener
            }
        }
    }
} 
```

据我了解，由于我使用的是`synchronized (synchronizedListeners)`in `fireEvent()`，这应该阻止任何其他调用 的线程`removeListener()`，直到迭代`fireEvent()`完成，此时从该 Set 中删除一个元素应该是安全的。但情况似乎并非如此。我究竟做错了什么？

可能相关：[Java 同步块与 Collections.synchronizedMap](https://stackoverflow.com/questions/567068/java-synchronized-block-vs-collections-synchronizedmap)

**编辑：**有人指出我不必要地同步了 removeListener() 方法。所以我尝试了这个版本：

```
public void removeListener(Object listener) {
    synchronizedListeners.remove(listener);
} 
```

但仍然得到同样的错误。

**编辑 2：**正如 assylias 所指出的，问题在上面的代码中不可见。我是从导致错误的块中`removeListener()`的 for 循环内部调用的。`synchronized (synchronizedListeners)`在这种情况下我最终使用的修复是从另一个线程中删除侦听器：

```
public void removeListener(final Object listener) {
    new Thread() {
        @Override
        public void run() {
            synchronizedListeners.remove(listener);
        }
    }.start();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T09:35:44.547

您正在对两个不同的对象进行同步。

该`removeListener`方法在`MyClass`实例上同步，而内部的循环在设置`fireEvent`上同步`synchronizedListeners`。

您需要做的是同步使用`synchronizedListeners`集合本身的每个方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T09:57:33.503

我无法重现您所描述的内容-底部的代码给出了如下所示的输出-这表明 remove 在迭代中间被调用，但直到迭代之后才完成，因为您使用了同步集合。这是人们所期望的行为，并且不会引发 ConcurrentModificationException。请注意，我已经`synchronized`从方法中删除了关键字，`removeListener`因为它在这里没用。

```
fire 100000
remove 100000
done fire 100000
done remove 99999 
```

**结论：问题出在其他地方。**例如，如果您有一个覆盖 fireEvent 方法的子类，或者您构造的同步集与您发布的代码中的不完全一样。

```
public static void main(String[] args) {
    final MyClass mc = new MyClass();
    final Object o = new Object();
    mc.addListener(o);
    for (int i = 0; i < 99999; i++) {
        Object o1 = new Object();
        mc.addListener(o1);
    }
    Runnable remove = new Runnable() {

        @Override
        public void run() {
            mc.removeListener(o);
        }
    };

    new Thread(remove).start();
    mc.fireEvent();
}

public static class MyClass {

    protected Set<Object> synchronizedListeners = Collections.synchronizedSet(new LinkedHashSet<Object>());

    public void addListener(Object listener) {
        synchronizedListeners.add(listener);
    }

    public void removeListener(Object listener) {
        System.out.println("remove " + synchronizedListeners.size());
        synchronizedListeners.remove(listener);
        System.out.println("done remove " + synchronizedListeners.size());
    }

    public void fireEvent() {
        System.out.println("fire " + synchronizedListeners.size());
        synchronized (synchronizedListeners) {
            for (Object listener : synchronizedListeners) {
                // do something with listener
            }
        }
        System.out.println("done fire "  + synchronizedListeners.size());
    }
} 
```

# unix - 根据匹配模式组合 Unix 文件中的多行

> ID：11843069
> 
> 赞同：1
> 
> 时间：2012-08-07T09:32:49.040
> 
> 标签：unix

我有一个文件如下：

```
Country:  USA
Currency: Dollars
Country:  Canada
Currency: Canadian
          Dollars
Country:  Australia
Currency: Australian
          Dollars
Country:  France
Currency: Euro 
```

我必须合并这两行并获得如下输出：

```
Country:  USA
Currency: Dollars
Country:  Canada
Currency: Canadian Dollars
Country:  Australia
Currency: Australian Dollars
Country:  France
Currency: Euro 
```

我尝试使用`tr`空格替换换行符，但是没有用。有人可以帮忙吗。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:41:43.700

```
sed ':r;$!{N;br};s/\n[[:space:]]*\([[:alpha:]]\+\n\)/ \1/g' filename 
```

例子：

```
$ echo 'Country:  USA
> Currency: Dollars
> Country:  Canada
> Currency: Canadian
>           Dollars
> Country:  Australia
> Currency: Australian
>           Dollars
> Country:  France
> Currency: Euro' | sed ':r;$!{N;br};s/\n[[:space:]]*\([[:alpha:]]\+\n\)/ \1/g'
Country:  USA
Currency: Dollars
Country:  Canada
Currency: Canadian Dollars
Country:  Australia
Currency: Australian Dollars
Country:  France
Currency: Euro 
```

说明：`r;$!{N;br};`将所有文件读入模式空间，然后搜索所有看起来像一些空格后跟一些字母的行，并删除前面的换行符和多余的空格。有关更多信息，请参阅此[`sed`参考](http://www.grymoire.com/Unix/Sed.html)。

# google-apps-script - 为电子表格编程创建基于时间的触发器

> ID：11843078
> 
> 赞同：3
> 
> 时间：2012-08-07T09:33:19.643
> 
> 标签：google-apps-script

我无法在文档中找到它，但是否可以以编程方式为另一个电子表格创建基于时间的触发器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:51:32.773

是的：

[https://developers.google.com/apps-script/managing_triggers_programmatically](https://developers.google.com/apps-script/managing_triggers_programmatically)

# database - cakephp 数据库没有保存正确的信息

> ID：11843079
> 
> 赞同：1
> 
> 时间：2012-08-07T09:33:19.880
> 
> 标签：database, forms, cakephp

我的函数将正确的值放入我的视图的表单中，但没有在数据库中保存正确的值。数据库正在将`accounts_users.id`NOT保存`accounts_users.account_id`到我的代码中，看起来应该是在输入 people `accounts_users.account_id`。我在表单的下拉框中看到了正确的信息

添加功能

```
function add(){

    $accounts=$this->User->AccountsUser->find('list', array(
'fields'=>array('id','account_id'),'conditions' => array(
'user_id' => $this->Auth->user('id'))));

    if($this->request->is('post')){
      $this->Template->create();

      if ($this->Template->save($this->request->data)) {
        $this->Session->setFlash('The template has been saved');
        $this->redirect( array('controller' => 'Fields','action' => 'add'));
      } else {
        $this->Session->setFlash('The template could not be saved. Please, try again.');
      }
    } 
```

这是添加视图

```
<?php
echo $this->Form->create('Template', array('action'=>'add'));
echo $this->Form->input('name',array('label'=>'Template Name: '));
echo $this->Form->input('account_id',array('label'=>'Business: ', 'type' => 'select', 'options' => $accounts));
echo $this->Form->input('description',array('label'=>'Short Description Of Template: '));
echo $this->Form->end('Click Here To Submit Template');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:46:50.797

试试下面的代码：

```
function add(){

$accounts=$this->User->AccountsUser->find('list', array(
'fields'=>array('account_id','account_id'),'conditions' => array(
'user_id' => $this->Auth->user('id'))));

if($this->request->is('post')){
  $this->Template->create();

  if ($this->Template->save($this->request->data)) {
    $this->Session->setFlash('The template has been saved');
    $this->redirect( array('controller' => 'Fields','action' => 'add'));
  } else {
    $this->Session->setFlash('The template could not be saved. Please, try again.');
  }
} 
```

# php - [php]如何从长 html 源中提取单个简单文本

> ID：11843088
> 
> 赞同：1
> 
> 时间：2012-08-07T09:33:59.903
> 
> 标签：php, html, regex, parsing

我有一个这样的html：

```
......whatever very long html.....

<span class="title">hello world!</span>

......whatever very long html...... 
```

这是一个很长的 html，我只想要内容“你好世界！” 从这个 html 我得到了这个 html

```
$result = file_get_contents($url , false, $context); 
```

很多人都在使用简单的 HTML DOM 解析器，但我认为在这种情况下，使用正则表达式会更有效。

我该怎么做？有什么建议么？任何帮助都会非常棒。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:39:00.800

坚持使用 DOM 解析器——它更好。话虽如此，你可以使用这样的正则表达式......

```
// where the html is stored in `$html`
preg_match('/<span class="title">(.+?)<\/span>/', $html, $m);
$whatYouWant = $m[1]; 
```

`preg_match()`存储正则表达式中括号内捕获的所有元素的数组，以及第 0 个元素，即整个捕获的字符串。在这种情况下，正则表达式非常简单，几乎是您想要的直接字符串匹配，结束跨度标记的斜杠已转义。捕获的部分仅表示任何字符 ( `.`) 一次或多次 ( `+`) 非贪婪 ( `?`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:43:03.907

不，我真的不认为 regEx 或类似函数会更有效或更容易。

如果您使用[SimpleHTML DOM](http://simplehtmldom.sourceforge.net/)，您可以像这样快速获取您要查找的数据：

```
//Get your file
$html = file_get_html('myfile.html');
//Use jQuery style selectors
$spanValue = $html->find('span.title')->plaintext;

echo($spanValue); 
```

使用 preg_match 你可以这样做：

```
preg_match("/<span class=\"title\">([^`]*?)<\/span>/", $data, $matches); 
```

或者这个，如果有多个具有“标题”类的跨度：

```
preg_match_all("/<span class=\"title\">([^`]*?)<\/span>/", $data, $matches); 
```

# c# - 使用 C# 和 MVC 截屏页面以将 HTML 注入 MasterPage

> ID：11843090
> 
> 赞同：0
> 
> 时间：2012-08-07T09:34:08.500
> 
> 标签：c#, model-view-controller, screen-scraping

我想开发一种方法，可以使用要链接到的站点的正确外观来包装 .Net MVC Web 应用程序。

基本上，我想为包含站点存储一个“参考页面”的 URL，我的应用程序将使用它来截取页眉/页脚 HTML 以在其母版页中使用。

因此，如果/当站点（来自 CMS 的输出）更改其结构/图像/颜色时，我的应用程序将简单地使用新创建的“模板”并相应地包装自己。

正在使用的“模板”中有设置的开始/结束 div 标签，所以我只需要对 HTML 进行屏幕截图，在相关点将其拆分，然后以某种方式将其注入到我的应用程序的 MasterPage 中。

屏幕截图部分看起来相当简单，它是注入母版页，我在整理时遇到了问题。

任何帮助将非常感激。:)

编辑 - 我目前正在我的脑海中计划这个并且没有代码可以发布。正如我所说，屏幕抓取部分看起来不错，但是我将如何将从页眉/页脚的“参考页面”中提取的相关 HTML 插入/注入到我的应用程序正在使用的母版页中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:39:09.177

我知道您可能已经解决了这个问题，但这里有一个适用于母版页和 MVC（以及 ASP.Net 表单）的解决方案。

我首先尝试覆盖母版页的 Render 方法并使用 RenderControl 呈现 ContentPlaceHolders，并将模板中的某些标签替换为呈现的结果。这适用于 ASP.Net 表单，但不适用于 MVC - 这种方式`<% using (Html.BeginForm("A","B")) { %>`总是会导致表单标记呈现在页面的最顶部，在文档类型之前。

**解决方案**

检索模板并将其拆分为多个部分，一些是文本部分，一些是占位符部分。在您的母版页中，您有一个 HTML 文档和您的占位符 - 不仅是您的占位符。这样VS设计师就不会抱怨了。但是，在呈现时，首先清除 Controls 集合，然后将每个部分添加为 LiteralControl 或 ContentPlaceHolder。您只需将实际渲染留给 ASP.Net。下面是灵感代码。

母版页：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title runat="server"></title>
    <asp:PlaceHolder ID="HeadPlaceHolder" runat="server">
        <script type="text/javascript" src="/cnnet/Resources/Js/jquery-1.8.1.min.js"></script>
    </asp:PlaceHolder>
    <asp:ContentPlaceHolder ID="HeadContentPlaceHolder" runat="server"/>
</head>
<body>
    <asp:ContentPlaceHolder ID="MainContentPlaceHolder" runat="server" />
</body>
</html> 
```

母版页代码隐藏：

```
private HtmlHead originalPageHeader;
static readonly Regex HeadStartRegex = new Regex(@"^\s*<head[^>]*>");
static readonly Regex HeadEndRegex = new Regex(@"</head>\s*$");
static readonly Regex TitleRegex = new Regex(@"<title>[^<]*</title>");

public Default() { Init += Default_Init; }

private void Default_Init(object sender, EventArgs e) { DoScraping(); }

protected override void Render(HtmlTextWriter writer)
{
    // get content from html head control generated via Page.Header:
    string headHtml = RenderControl(originalPageHeader);
    Controls.Remove(originalPageHeader);
    headHtml = HeadStartRegex.Replace(headHtml, string.Empty);
    headHtml = HeadEndRegex.Replace(headHtml, string.Empty);
    headHtml = TitleRegex.Replace(headHtml, string.Empty);
    // head.Controls.Add(new LiteralControl(headHtml)); doesnt work if head content placeholder contains code blocks (i.e. <% ... %>)
    // Instead add content this way:
    int headIndex = Controls.IndexOf(HeadContentPlaceHolder);
    if (headIndex != -1)
        Controls.AddAt(headIndex + 1, new LiteralControl(headHtml));

    base.Render(writer);
}

private void DoScraping()
{
    IList<PagePart> parts = ... // do your scraping and splitting into parts
    Controls.Clear();

    foreach (PagePart part in parts)
    {
        var literalPart = part as LiteralPart;
        if (literalPart != null)
        {
            Controls.Add(new LiteralControl(literalPart.Text));
        }
        else
        {
            var placeHolderPart = part as PlaceHolderPart;
            switch (placeHolderPart.Type)
            {
                case PlaceHolderType.Title:
                    Controls.Add(new LiteralControl(HttpUtility.HtmlEncode(Page.Title)));
                    break;
                case PlaceHolderType.Head:
                    Controls.Add(HeadPlaceHolder);
                    Controls.Add(HeadContentPlaceHolder);
                    break;
                case PlaceHolderType.Main:
                    Controls.Add(new LiteralControl("<div class='boxContent'>"));
                    Controls.Add(MainContentPlaceHolder);
                    Controls.Add(new LiteralControl("<div/>"));
                    break;
            }
        }
    }
}

private string RenderControl(Control control)
{
    string innerHtml;
    using (var stringWriter = new StringWriter())
    {
        using (var writer = new HtmlTextWriter(stringWriter))
        {
            control.RenderControl(writer);
            writer.Flush();
            innerHtml = stringWriter.ToString();
        }
    }
    return innerHtml;
} 
```

部分：

```
public class PagePart {}

public class LiteralPart : PagePart
{
    public LiteralPart(string text) { Text = text; }
    public string Text { get; private set; }
}

public class PlaceHolderPart : PagePart
{
    public PlaceHolderPart(PlaceHolderType type) { Type = type; }
    public PlaceHolderType Type { get; private set; }
}

public enum PlaceHolderType { Title, Head, Main } 
```

对于拆分：

```
class PlaceHolderInfo
{
    public PlaceHolderInfo(PlaceHolderType type, Regex splitter)
    {
        Type = type;
        Splitter = splitter;
    }

    public PlaceHolderType Type { get; private set; }
    public Regex Splitter { get; private set; }
}

private static readonly List<PlaceHolderInfo> PlaceHolderInfos = new List<PlaceHolderInfo>
    {
        new PlaceHolderInfo(PlaceHolderType.Title, new Regex(TitleString)),
        new PlaceHolderInfo(PlaceHolderType.Head, new Regex(HeadString)),
        new PlaceHolderInfo(PlaceHolderType.Main, new Regex(MainString)),
    };

private static List<PagePart> SplitPage(string html)
{
    var parts = new List<PagePart>(new PagePart[] { new LiteralPart(html) });
    foreach (PlaceHolderInfo info in placeHolderInfos)
    {
        var newParts = new List<PagePart>();
        foreach (PagePart part in parts)
        {
            if (part is PlaceHolderPart)
            {
                newParts.Add(part);
            }
            else
            {
                var literalPart = (LiteralPart)part;
                // Note about Regex.Split: if match is found in beginning or end of string, an empty string is returned in corresponding end of returned array.
                string[] split = info.Splitter.Split(literalPart.Text); 
                for (int i = 0; i < split.Length; i++)
                {
                    newParts.Add(new LiteralPart(split[i]));
                    if (i + 1 < split.Length) // If result of Split returned more than one string, it means there was a match and we insert the placeholder between each string
                        newParts.Add(new PlaceHolderPart(info.Type));
                }
            }
        }
        parts = newParts;
    }
    return parts;
} 
```

请注意，此解决方案很容易扩展到更多占位符（面包屑、菜单，您可以命名）。它不对模板中占位符的顺序或它们的存在做任何假设。

编辑1：我最初`DoScraping`是从`Render`方法中调用的。事实证明这是有问题的，因为它确实对 Web 表单中的控件名称进行了重新编号（例如 ctl00$MainContentPlaceHolder$RequestingRepeater$ctl01$ctl01）。它把数字弄乱了，以至于`OnCommand`中继器内的按钮停止工作。必须尽早对控件进行重新排序以避免这种情况，因此已将其移至`Init`现在。

编辑 2：某些页面用于`Page.Header`生成样式和脚本标签。为了支持这个功能，我添加了一些技巧来保留原始`<head>`标签并在渲染时插入生成的内容。

# python - 将文件中的参数添加到列表中，然后使用列表

> ID：11843091
> 
> 赞同：0
> 
> 时间：2012-08-07T09:34:09.530
> 
> 标签：python, file, list

遇到问题是非常直截了当的。

我正在制作一个简单的游戏（使用 pygame），其中敌人（精灵）在某个游戏时间点进入游戏屏幕。我认为编写一个文本文件会更容易管理所有可以读入列表的敌人。

如果我的文件“heli.txt”包含：

```
10 660 130 1
10 660 350 2 
```

我希望程序在第 10 个刻度上在某个 x、y 处添加两个敌人，并按照屏幕周围的特定模式。

这就是我要做的：

```
fh = open( "heli.txt" );

heliList = []
for line in fh.readlines():
    y = [value for value in line.split()]
    heliList.append( y )

fh.close() 
```

这似乎适当地填充了列表：

```
>>> print (heliList)
[['10', '660', '130', '1'], ['10', '660', '350', '2']] 
```

我对第二个敌人使用的当前方法是：

```
if timer.returnTick() == 10:
    heli = Heli(660, 350, 2) 
```

随着更多敌人的加入，这变得非常难以维持。此外，当我开始添加各种敌人类型时。

基本上，我希望游戏在每个滴答声中循环遍历列表，查看当前滴答声是否与任何行的第一个参数匹配，如果匹配，则添加该敌人。但是，我在这里有点坚持正确的语法（我觉得这些值也可能存在问题，因为它们似乎是字符串而不是整数）。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:40:15.183

将值转换为整数：

```
fh = open( "heli.txt" );

heliList = []
for line in fh.readlines():
    y = [int(value) for value in line.split()] #added "int( )"
    heliList.append( y )

fh.close() 
```

一旦你有了你所有的敌人名单，检查他们的蜱虫做这样的事情：

```
tick = 0
while True:
    for enemy in enemylist:
        if enemy[0] == tick:
            DO_YOUR_CODE
    tick += 1
    #dont forget to add an exit to this loop 
```

# c# - 从有效 XML 中获取内容后，“解析 EntityName 时发生错误”

> ID：11843094
> 
> 赞同：0
> 
> 时间：2012-08-07T09:34:25.427
> 
> 标签：c#, linq-to-xml

我正在使用 XDocument 读取 XML 字符串

```
XmlReader reader = XmlReader.Create(new StringReader(xmltext));
        reader.Read();
        XDocument xdoc = XDocument.Load(reader); 
```

然后我抓取一些标签的内容并将它们放在不同字符串的标签中。当我尝试以与第一个相同的方式加载此字符串时，出现错误“解析 EntityName 时发生错误。第 1 行，位置 344。”。

我认为它应该被正确解析，因为它之前已经被解析过，所以我想我在这里遗漏了一些东西。

我正在阅读和复制第一个 XML 的内容`(string)i.Element("field")`。

我正在使用.net 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:52:54.380

当我获取要用于构建另一个 Xml 字符串的 xml 内容时，`(string)i.Element("field")`这会将我的 Xml 转换为字符串。我的下一个 Xml Parsing 不再将其识别为元素，因此我通过在读取我的元素之前不使用 (string) 解决了这个问题，`i.Element("field")`这样就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:01:06.610

听起来你有这样的东西：

```
<OriginalDocument>
    <Foo>A &amp; B</Foo>
</OriginalDocument> 
```

那`A &amp; B`代表文字`A & B`。因此，当您从元素中获取文本时，您将获得字符串“A & B”。如果你然后用它来构建一个像这样的新元素：

```
string foo = "<Foo>" + fooText + "</Foo>"; 
```

那么你最终会得到这样的无效 XML：

```
<Foo>A & B</Foo> 
```

基本上，您不应该以文本形式构造 XML。目前尚不清楚您真正想要实现的目标是什么，但是您可以很容易地将一个元素从一个地方复制到另一个地方`XElement`；您不需要构建一个字符串然后重新解析它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-01T18:14:21.353

所以在这个问题上花费了几个小时之后：事实证明，如果您的 xml 字符串中有一个 & 符号 ("&") 或任何其他 XML 转义字符，那么您尝试读取 XML 将始终失败。要解决此问题，请将特殊字符替换为其转义字符串格式

```
 YourXmlString = YourXmlString.Replace("'", "&apos;").Replace("\"", "&quot;").Replace(">", "&gt;").Replace("<", "&lt;").Replace("&", "&amp;"); 
```

# xcode - iphone 启动图像应用程序

> ID：11843095
> 
> 赞同：0
> 
> 时间：2012-08-07T09:34:29.903
> 
> 标签：xcode

我使用属性框在 xcode 中添加了一个图像作为启动图像 iphone 应用程序。

现在我想删除那个图像，但我不能。尽管我从 xcode 和项目文件夹中删除了图像，但图像仍然出现。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:37:09.927

`Cmd`+ `Shift`+ `Opt`+`K`应该彻底清理并删除对该图像的任何挥之不去的引用，前提是您实际上已正确删除它。

@Aalok 的评论似乎表明他们不明白要按哪些键。如果我使用这些符号有帮助吗？

`⌘</kbd> + `⇧</kbd> + `⌥` + `K```

# c++ - Why function with return value can return nothing?

> ID：11843103
> 
> 赞同：2
> 
> 时间：2012-08-07T09:34:56.010
> 
> 标签：c++

> **Possible Duplicate:**
> [Why can you return from a non-void function without returning a value without producing a compiler error?](https://stackoverflow.com/questions/1610030/why-can-you-return-from-a-non-void-function-without-returning-a-value-without-pr)

Consider the real code:

```
std::ostream &operator << (std::ostream &stream, const sqc_var &var)
{
    switch (var.type()) 
    {
        case sqc_var::type_number:
            return stream << var.as_number();
        case sqc_var::type_string:
            return stream << var.as_string();
        case sqc_var::type_object:
            stream << "{";
            for (auto &child : var.children())
            {
                stream << child.name() << ": " << child.value() << " "; // <-- crash there
            }
            stream <<  " }";
    }

    //// return stream; <-- originaly no return was there.
} 
```

This code will crash program if `var` have an `type_object` type after first recursive call of `operator <<` because it returns nothing when the reference to `std::ostream` expected.

Clang 3.1 even does not print warning.

Modern GCC and MSVC print warning but compile it.

**Why C++ compiler allows such erroneous code?**

Also I'll be glad to see any references to C++ standard which allows such code or explanation when it can be usefull.

# java - 从命令行加载弹簧上下文的属性

> ID：11843104
> 
> 赞同：5
> 
> 时间：2012-08-07T09:34:56.043
> 
> 标签：java, spring, parameter-passing, command-line-arguments

我想编写一个 spring 命令行程序，该程序使用作为命令行参数传递的属性文件进行初始化。怎么可能呢？

开始上课：

```
public static void main (String [] args) {
    String configFilename = args[0];
    ApplicationContext ctx = new ClassPathXmlApplicationContext(
        "classpath:/context/applicationContext.xml");
    MyBean bean = ctx.getBean(MyBean.class); 
    bean.getStarted();
} 
```

应用程序上下文.xml：

```
<context:property-placeholder location="CONFIGFILENAME" ignore-unresolvable="true"/> 
```

如何将配置文件名从我的 main 方法转移到实际的 spring 上下文中，以便我可以加载正确的环境相关属性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T10:11:36.363

在您的情况下，您可以更好地为属性文件位置设置系统属性

```
System.getProperties().setProperty("location", args[0]); 
```

然后在 applicationContext.xml 文件中

```
<context:property-placeholder location="${location}" ignore-unresolvable="true"/> 
```

希望这能解决您的问题。

# java - Is it possible to marshall object tree to source code?

> ID：11843105
> 
> 赞同：0
> 
> 时间：2012-08-07T09:35:04.157
> 
> 标签：java, jaxb, code-generation, xstream

Is it possible to marshall java objects tree to source code, that generates the tree?

What I am trying to do is to create sample data for integration testing from live data. I need to serialize sample objects (i.e. JPA entities) to a human readable form, tweak it and prepare integration tests.

It would be great if something created java code from given object tree.

The structure is quite complex, with two-way references etc. I tried XStream to XML serialization but it fails on two-way references. I tried JAXB too but it seems that it does not support cyclic references at all.

//EDIT:

Actually I've managed to get XStream running. However the question is : Is there a library that can generate a source code from given object tree?

# php - 使用 ajax 和 php 将画布上下文作为图像上传

> ID：11843115
> 
> 赞同：5
> 
> 时间：2012-08-07T09:35:45.013
> 
> 标签：php, ajax, html, file-upload, canvas

我有一个画布，我想使用 ajax 和 php 将画布上下文上传到服务器。我希望最终输出是存储在服务器上的图像。我已经使用表单完成了图像上传。但现在我想让画布上下文将其转换为图像并上传到服务器！

那么，我该怎么做呢？感谢任何建议、算法或解决方案！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T09:58:31.087

[这篇博](http://permadi.com/blog/2010/10/html5-saving-canvas-image-data-using-php-and-ajax/)文恰当地描述了使用 AJAX 查询将画布保存到服务器上的方法，我想这应该适合你。

基本上，您需要`var canvasData = testCanvas.toDataURL("image/png");`在 JavaScript 中检索画布的内容。这将是一个[Base64](http://en.wikipedia.org/wiki/Base64)编码的字符串，如下所示：`data:image/png;base64,fooooooooooobaaaaaaaaaaar==`.

以下代码将确保 AJAX 查询将内容发送到 HTML：

```
var ajax = new XMLHttpRequest();
ajax.open("POST",'testSave.php',false);
ajax.setRequestHeader('Content-Type', 'application/upload');
ajax.send(canvasData); 
```

在服务器上，在 PHP 脚本中，您将有一个`HTTP_RAW_POST_DATA`在`$GLOBALS`数组中命名的键，这将包含我们刚刚获取的数据。

```
// Remove the headers (data:,) part.
$filteredData=substr($GLOBALS['HTTP_RAW_POST_DATA'], strpos($GLOBALS['HTTP_RAW_POST_DATA'], ",")+1);

// Need to decode before saving since the data we received is already base64 encoded
$decodedData=base64_decode($filteredData);

$fp = fopen( 'test.png', 'wb' );
fwrite( $fp, $decodedData);
fclose( $fp ); 
```

当然，`test.png`是你要保存的文件名。第一行需要删除`data:image/png;base64,`编码图像的一部分，以便以后可以通过[`base64_decode()`](http://php.net/manual/en/function.base64-decode.php). 它的输出 ( `$decodedData`) 将被保存到文件中。

# wordpress - How can I display WordPress posts on a sub domain not running wordpress?

> ID：11843116
> 
> 赞同：0
> 
> 时间：2012-08-07T09:35:44.857
> 
> 标签：wordpress

I have recently taken over a site which has a wordpress blog on a subdomain. I need to list all the posts on a 'news' page.

The page I need to display it on is a HTML page. I have looked into doing an RSS feed but had no luck. I've also looked into pulling the data from the database but I lack the skills!

Any help would be great.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:26:39.997

> 我已经考虑过做一个 RSS 提要，但没有运气。

这是最好的方法。什么不起作用？

请参阅[开发人员指南 - Google AJAX Feed API - Google 代码](https://developers.google.com/feed/)和[Magpie RSS - PHP RSS 解析器](http://magpierss.sourceforge.net/)

或查看[http://codex.wordpress.org/Integrating_WordPress_with_Your_Website](http://codex.wordpress.org/Integrating_WordPress_with_Your_Website)获取代码示例并列出帖子。

# font-face - css font-face not working in IE

> ID：11843117
> 
> 赞同：1
> 
> 时间：2012-08-07T09:35:46.870
> 
> 标签：font-face

`@font-face{ font-family: gotham; src: url('../fonts/Gotham-Light.otf'); }` I have included font named as Gotham in my css file.Its working in mozilla and all other browsers but not in IE9.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:45:01.927

请参阅[**新的 Bbulletproof 字体语法**](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)

```
 @font-face {

        font-family: 'MyFontFamily';
        src: url('myfont-webfont.eot?#iefix') format('embedded-opentype'), 
             url('myfont-webfont.woff') format('woff'), 
             url('myfont-webfont.ttf')  format('truetype'),
             url('myfont-webfont.svg#svgFontName') format('svg');
    } 
```

**这个怎么运作？**

> Internet Explorer <9 在 src 属性的解析器中有一个错误。如果您在 src 中包含多个字体格式，IE 将无法加载它并报告 404 错误。原因是 IE 试图将左括号之间的所有内容作为文件加载到最后一个右括号。要处理这种错误行为，您只需先声明 EOT 并附加一个问号。问号使 IE 误以为字符串的其余部分是查询字符串并仅加载 EOT 文件。其他浏览器遵循规范，根据 src 级联和格式提示选择他们需要的格式。

**浏览器兼容性：**

> Safari 5.03、IE 6-9、Firefox 3.6-4、Chrome 8、iOS 3.2-4.2、Android 2.2-2.3、Opera 11

要生成你的字体套件，你应该使用[**fontsquirrel**](http://www.fontsquirrel.com/fontface/generator)。

# php - Bing SIMPLE XML Object 条目遍历如何

> ID：11843121
> 
> 赞同：0
> 
> 时间：2012-08-07T09:36:24.740
> 
> 标签：php, xml, simplexml

我得到以下 XML 字符串作为 BING 的响应（注意：COMPOSITE 结果），我尝试并尝试将条目（内联-> 提要-> 条目）扫描到 for 循环但失败.. 我用来扫描的代码结果如下

```
$xml = new SimpleXMLElement($rs);
$i=0;       
if ( $xml->entry->link ) {
    $feeds = $xml->entry->link->children('m', TRUE)->inline->entry;
    foreach ( $feeds as $results) {
        $i++;
        echo $data=(string)$results->content;
        $result = $data->children('m', TRUE)->properties->children('d', TRUE);
        echo "ss".$clickurl = $result->Url;
        $url = urldecode($clickurl);
        $search[$i]['url'] = str_replace("&", "&amp;", $url);// for the vali
        $search[$i]['abstract'] = (string)$result->Description;
        $search[$i]['title']    = (string)$result->Title;
        $search[$i]['rank'] = $i;   
    } //foreach 
}
return $search; 
```

***你能告诉我我在这里缺少什么吗？我不知道如何`<m:inline> <feed>`使用 simpleXML 对象访问数据集，微软支持团队的回答是 PHP 不是他们的语言，所以他们无法帮助我，请我使用论坛/stackoverflow。***

```
 <feed xmlns:base="https://api.datamarket.azure.com/Data.ashx/Bing/SearchWeb/Composite" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns="http://www.w3.org/2005/Atom">
  <title type="text">keyword</title>
  <subtitle type="text">Bing Search API</subtitle>
  <id>https://api.datamarket.azure.com/Data.ashx/Bing/SearchWeb/Composite?Query='keyword'</id>
  <rights type="text" />
  <updated>2012-08-07T18:29:09Z</updated>
  <entry>
    <id>https://api.datamarket.azure.com/Data.ashx/Bing/SearchWeb/Composite?Query='keyword'&amp;$skip=0&amp;$top=1</id>
    <title type="text">ExpandableSearchResult</title>
    <updated>2012-08-07T18:29:09Z</updated>
    <link rel="http://schemas.microsoft.com/ado/2007/08/dataservices/related/Web" type="application/atom+xml;type=feed" title="Web" href="ExpandableSearchResultSet(guid'3947df4e-b3b3-4be7-b25b-77852c8d312a')/Web">
      <m:inline>
        <feed xmlns:base="https://api.datamarket.azure.com/Data.ashx/Bing/SearchWeb/ExpandableSearchResultSet(guid'3947df4e-b3b3-4be7-b25b-77852c8d312a')/Web" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns="http://www.w3.org/2005/Atom">
          <title type="text">Web</title>
          <subtitle type="text">Bing Search API</subtitle>
          <id>https://api.datamarket.azure.com/Data.ashx/Bing/SearchWeb/ExpandableSearchResultSet(guid'3947df4e-b3b3-4be7-b25b-77852c8d312a')/Web</id>
          <rights type="text"></rights>
          <updated>2012-08-07T18:29:09Z</updated>
          <link rel="next" href="https://api.datamarket.azure.com/Data.ashx/Bing/SearchWeb/Web?Query='keyword'&amp;$skip=3&amp;$top=50" />
          <entry>
            <id>https://api.datamarket.azure.com/Data.ashx/Bing/SearchWeb/ExpandableSearchResultSet(guid'3947df4e-b3b3-4be7-b25b-77852c8d312a')/Web?$skip=1&amp;$top=1</id>
            <title type="text">WebResult</title>
            <updated>2012-08-07T18:29:09Z</updated>
            <content type="application/xml">
              <m:properties>
                <d:ID m:type="Edm.Guid">a6c62628-0012-42a2-b65c-513c82f523d1</d:ID>
                <d:Title m:type="Edm.String">title ...</d:Title>
                <d:Description m:type="Edm.String">title: ...</d:Description>
                <d:DisplayUrl m:type="Edm.String">sss.newikis.com/dd.html</d:DisplayUrl>
                <d:Url m:type="Edm.String">http://ss.newikis.com/ss.html</d:Url>
              </m:properties>
            </content>
          </entry>
        </feed>
      </m:inline>
    </link>
    <content type="application/xml">
      <m:properties>
        <d:ID m:type="Edm.Guid">3947df4e-b3b3-4be7-b25b-77852c8d312a</d:ID>
        <d:WebTotal m:type="Edm.Int64">3</d:WebTotal>
        <d:WebOffset m:type="Edm.Int64">0</d:WebOffset>
        <d:AlteredQuery m:type="Edm.String"></d:AlteredQuery>
        <d:AlterationOverrideQuery m:type="Edm.String"></d:AlterationOverrideQuery>
      </m:properties>
    </content>
  </entry>
</feed> 
```

**谁能帮我用上面的代码使用 PHP 解决这个问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:19:15.370

你*非常*接近，只漏掉了几个次要（但至关重要）的点。

## 需要最少的改变

您只需更改三行原始代码即可。

1.  获取`<entry>`元素。

    ```
    $feeds = $xml->entry->link->children('m', TRUE)->inline->entry; 
    ```

    变成

    ```
    $feeds = $xml->entry->link->children('m', TRUE)->inline->children('', TRUE)->feed->entry; 
    ```

2.  从中获取`<d:*>`元素`<m:properties>`。

    ```
    $result = $data->children('m', TRUE)->properties->children('d', TRUE); 
    ```

    变成

    ```
    $result = $results->content->children('m', TRUE)->properties->children('d', TRUE); 
    ```

3.  删除以下行。

    ```
    echo $data=(string)$results->content; 
    ```

通过这些更改，您的脚本将提供您想要的结果数组。

## 代码清理

`$search`下面的示例是对您的原始文件的一个小修改，它以稍微整齐*的方式从提要构建数组。

^(* 在我看来：读者可能不同意。强，这是*我*的答案。)

```
$xml = new SimpleXMLElement($rs);

$i = 0;
$search = array();

$entries = $xml->entry->link->children('m', TRUE)->inline->children('', TRUE)->feed->entry;
foreach ($entries as $entry) {
    $i++;

    $properties = $entry->content->children('m', TRUE)->properties->children('d', TRUE);

    $url = (string) $properties->Url;
    $url = str_replace("&", "&amp;", urldecode($url));

    $search[$i] = array(
        'url'      => $url,
        'abstract' => (string) $properties->Description,
        'title'    => (string) $properties->Title,
        'rank'     => $i,
    );
} 
```

### 发生了什么变化？

1.  *这是重要的一点：*如“最小更改”下所述，该`$entries`行用于`children('', TRUE)->feed`访问.`<feed>``<m:inline>`
2.  变量名称稍作更改，以反映变量所代表的 XML 元素的名称（在适当的情况下）。我发现这在使用 SimpleXML 时很有帮助。
3.  立即分配所有内容`$search[$i]`；这只是个人喜好，因为我认为它看起来更整洁。
4.  摆脱了那些奇怪的混合`echo`和分配行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:38:24.267

不确定这是否是您问题的答案，但这些位看起来很可疑：

```
echo $data=(string)$results->content; 
```

`$data`现在包含一个字符串，因为您`$results->content`在将其分配给`$data`. 但是代码中的下一行是：

```
$result = $data->children('m', TRUE)->properties->children('d', TRUE); 
```

在这里，`$data`显然应该是一个对象而不是一个字符串。

如果您需要那里的回声，请将线路分开：

```
$data = $results->content;
echo $data; // casting to string is done automatically 
```

# php - 使用垃圾邮件中收到的 codeigniter 发送电子邮件

> ID：11843123
> 
> 赞同：1
> 
> 时间：2012-08-07T09:36:50.083
> 
> 标签：php, codeigniter, email

我正在尝试使用 codeigniter 电子邮件库发送电子邮件以使用以下设置向用户发送电子邮件

```
 $this->load->library('email');
        $this->email->from('email@domain.com','Admin');
        $this->email->to($recieverEmail);
        $this->email->subject('Morgan MarketBook');
        $this->email->message($message);

   <?php if (!defined('BASEPATH')) exit('No direct script access allowed');

   $config['protocol']   = 'smtp';
   $config['smtp_host']  = 'mail.server';
   $config['smtp_port']  = 26 ;
   $config['smtp_user']  = 'user' ;
   $config['smtp_pass']  = 'password' ;
   $config['newline']    = "\r\n";

   ?> 
```

我的问题是收到的电子邮件在垃圾邮件中，而不是在收件箱中……是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T09:46:59.617

进入垃圾邮件而不是收件箱的邮件与代码无关或与代码点火器无关。您必须遵循一些准则才能使电子邮件不被视为垃圾邮件：其中一些准则是：

*   发送 html 电子邮件时，还包括邮件的文本版本
*   发送 html 电子邮件时，将 html 和图像保持在最低限度（不包括 javascript）
*   使用 spf 和域密钥设置邮件服务器
*   “发件人”字段应包含有效的电子邮件地址（与邮件服务器具有相同的域）
*   如果您发送大量电子邮件，请尝试限制发送速率

有很多使用 php 发送有效电子邮件的指南，只需 google “发送电子邮件 php 的最佳实践”

此外，不要将您的登录凭据包含在您的邮件服务器中。干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:45:23.447

我相信问题出在您的服务器上，而不是在您的 CodeIgniter 代码中。尝试使用邮件客户端从同一电子邮件地址发送电子邮件。如果您仍然收到垃圾邮件中的电子邮件，您应该联系您的托管服务提供商并告诉他们这个问题，但我的经验表明他们对此无能为力。

# validation - How to validate against schema for namespace, not complete document?

> ID：11843124
> 
> 赞同：0
> 
> 时间：2012-08-07T09:36:51.993
> 
> 标签：validation, xsd, schema, relaxng

I have a document like this:

```
<d:block xmlns:d="D" xmlns:b="B" xmlns="default" name="popover">
  <d:description>...</d:description>
  <d:sample>
    <b:popover>
      ...some b:stuff...
    </b:popover>
   </d:sample>
</d:block> 
```

Schema for this document looks like:

```
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
    <start>
        <element name="block" ns="D">
            <attribute name="name"/>
            <element name="description">
                <text/>
            </element>
            <element name="sample">
                <ref name="anything"/>
            </element>
        </element>
    </start>
    <define name="anything">
        <element>
            <anyName>
                <except>
                    <nsName ns="D"/>
                </except>
            </anyName>
            <zeroOrMore>
                <choice>
                    <attribute>
                        <anyName/>
                    </attribute>
                    <text/>
                    <ref name="anything"/>
                </choice>
            </zeroOrMore>
        </element>
    </define>
</grammar> 
```

"Anything" literally means anything but D-namespaced.

And I want to create another schema for B namespace to use it against any arbitrary XML containing B:namespace.

How to create Schema for the namespace, not for the complete document?

Can't get this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:49:54.593

A kind of schema like that should work. You just have to define the elements for B namespace in the `define` element named `BElements`.

```
<grammar xmlns="http://relaxng.org/ns/structure/1.0">
    <start>
      <ref name="anythingOrB"/>
    </start>
    <define name="anythingOrB">
        <choice>
            <ref name="BElements"/>
            <ref name="anythingExceptB"/>
        </choice>
    </define>
    <define name="anythingExceptB">
        <element>
            <anyName>
                <except>
                    <nsName ns="B"/>
                </except>
            </anyName>
            <zeroOrMore>
                <choice>
                    <attribute>
                        <anyName/>
                    </attribute>
                    <text/>
                    <ref name="anythingOrB"/>
                </choice>
            </zeroOrMore>
        </element>    
    </define>
    <define name="BElements">
        <choice>
            <element name="elt1" ns="B">
                <empty/>
            </element>
            <element name="elt2" ns="B">
                <empty/>
            </element>
        </choice> 
    </define>
</grammar> 
```

# c# - 通过 C# .NET 获取 Biztalk 的消息计数

> ID：11843127
> 
> 赞同：0
> 
> 时间：2012-08-07T09:37:02.250
> 
> 标签：c#, .net, biztalk

如何通过 C# .NET 获取 BizTalk Server 在任何给定时间点发送/接收的总消息？

有什么想法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T10:47:43.400

BizTalk 中的消息跟踪是使用 BAM 完成的。当然，您可以编写自己的数据库和数据访问 API，但为什么要编写？！？有关入门，请参阅[使用业务活动监控](http://msdn.microsoft.com/en-us/library/aa561326.aspx)。不要被学习曲线吓到——一旦你克服了它，你就会爱上它！

[这本书](https://rads.stackoverflow.com/amzn/click/com/0470046422)有一个非常好的 BAM 部分，不要被版本推迟——基本概念仍然适用于 2010 年。

最后，[此工具](http://generatetypedbamapi.codeplex.com/)将加快您的开发速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:20:30.103

一种简单的方法是使用现有的 BizTalk Perfmon 计数器来监视消息（尽管自上次主机实例重新启动以来）

假设您已`BizTalkServer`使用 a调用`SendHost`并`ReceiveHost`配置了 BizTalk Server，则以下消息计数器应指示发送/接收的消息：

```
PerformanceCounter msgsReceivedCounter = new 
    PerformanceCounter("BizTalk:Messaging", "Documents received", "ReceiveHost", "BizTalkServer");
msgsReceivedCounter.ReadOnly = true;
PerformanceCounter msgsSentCounter = new 
    PerformanceCounter("BizTalk:Messaging", "Documents processed", "SendHost", "BizTalkServer");
msgsSentCounter.ReadOnly = true;

lblSent.Text = string.Format("{0}",  msgsSentCounter.NextValue());
lblReceived.Text = string.Format("{0}",  msgsReceivedCounter.NextValue()); 
```

请注意，如果您的组中有多个 BizTalk 主机，则需要对所有主机进行聚合。

更多关于[在 C# 中使用 PerformanceCounter 类的信息](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.aspx)。更多关于[BizTalk PerfMon 计数器的信息在这里](http://msdn.microsoft.com/en-us/library/aa578394.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T15:19:48.770

您可以从查询跟踪数据库 MessageInOutEvents 表中获取该信息。这是一个存储所有活动的表。

唯一的要求是您应该关闭 BizTalk 环境中的全局跟踪属性。

# c# - 从文件中删除一个空行

> ID：11843136
> 
> 赞同：0
> 
> 时间：2012-08-07T09:37:36.730
> 
> 标签：c#, file, replace, line

我有一个文本文件，我在其中添加、更新和删除数据（**联系人**）。每个联系人排成一行。现在，当我通过我的应用程序删除联系人时，我正在删除文件中的一行（*用空字符串替换联系人*）这导致联系人之间出现空行。我不想要这个空行。这是我写的一段代码：

```
 private void btn_condel_Click(object sender, EventArgs e)
    {
        bufferedListView1.Items.Clear();
        string fileContents = File.ReadAllText("C:\\sample.txt");
        string replacedContents = fileContents.Replace(txt_editname.Text + "@" + txt_editno.Text,"");
        File.WriteAllText("C:\\sample.txt", replacedContents);
        // Rest of the code 
```

在替换文件中的数据时，我需要做什么来消除这个空行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:40:55.607

看起来解决这个问题的最简单方法就是抓住新行：

```
string replacedContents = fileContents.Replace(
    txt_editname.Text + "@" + txt_editno.Text + System.Environment.NewLine,""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:49:17.793

试试这个，

```
 string fileContents = File.ReadAllText("C:\\sample.txt");
    string replacedContents = fileContents.Replace(txt_editname.Text + "@" +        txt_editno.Text,"");
    File.WriteAllText("C:\\sample.txt", replacedContents.Trim()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T09:50:53.023

我没有尝试过，但这应该可以：将文件读入字符串数组，将其转换为列表（因为您无法从数组中删除项目），删除联系人并将其余部分写回文件. 如果您将文本文件（顺便说一句：您不能使用 XML 文件...？）解析为您自己的联系人数据类型，则效果会更好。然后你有一个列表，可以从那里删除一个对象。

```
string[] lines = File.ReadAllLines("C:\\sample.txt");
List<string> list = lines.ToList<string>();
list.Remove(txt_editname.Text + "@" + txt_editno.Text);
File.WriteAllLines("C:\\sample.txt", list.ToArray()); 
```

# python - python中主线程和子线程之间的原子操作

> ID：11843141
> 
> 赞同：2
> 
> 时间：2012-08-07T09:37:57.273
> 
> 标签：python, multithreading, atomic

我的 python 程序中有一个列表，可以在某些情况下获取新项目（它是消息队列消费者）。然后我有一个线程，每隔几分钟检查一次列表中是否有任何内容，如果有，那么我想对每个项目执行操作，然后清空列表。

现在我的问题：我应该使用锁来确保子线程中的操作是原子的，这是否确保主线程在我浏览列表时不能更改列表？
还是我应该改用某种标志？

伪代码使我的问题更清楚。

子线程：

```
def run(self):
    while 1:
        if get_main_thread_list() is not empty:
            do_operations()
        empty_the_list()
        sleep(30) 
```

主线程：

```
list = []

def on_event(item):
    list.add(item)

def main():
    start_thread()
    start_listening_to_events() 
```

我希望这能让我的问题更清楚，显然欢迎任何指向资源或评论的链接！

PS：我很清楚，对于这个问题，我可能无法很好地掌握线程编程，如果您相信的话，如果您有时间，请花一些时间解释我的推理有什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:08:51.380

> 我应该使用锁来确保子线程中的操作是原子的，这是否确保主线程在我浏览列表时不能更改列表？

是的。如果你正确地实现它是的。

> 还是我应该改用某种标志？

“某种标志” == 锁，所以你最好使用线程锁。

**重要提示：**在我看来，您正在尝试[`queue`](http://docs.python.org/py3k/library/queue.html)从 stdlib 重新实现模块，您可能想看看它。

除了拥有一堆有趣的特性之外，它也是线程安全的：

> 该[`queue`](http://docs.python.org/py3k/library/queue.html)模块实现了多生产者、多消费者队列。当必须在多个线程之间安全地交换信息时，它在线程编程中特别有用。该[`Queue`](http://docs.python.org/py3k/library/queue.html#queue.Queue)模块中的类实现了所有必需的锁定语义。

# namespaces - XML（带命名空间）到对象解组

> ID：11843142
> 
> 赞同：5
> 
> 时间：2012-08-07T09:38:11.160
> 
> 标签：namespaces, jaxb, unmarshalling

我从 Web 服务调用中得到了以下响应，我尝试使用 JAXB 将其解组以将其映射到 java 类。这样做时我遇到了解组异常。

```
<?xml version="1.0" encoding="UTF-8"?>
<ns0:QueryByLNResponse xmlns:ns0="UIS_CTMPeople_WS" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <ns0:getListValues>
        <ns0:First_Name>Pradeep</ns0:First_Name>
        <ns0:Internet_E-mail/>
        <ns0:ManagersName/>
        <ns0:Person_ID>PPL1</ns0:Person_ID>
        <ns0:Last_Name>Srinivasa Reddy</ns0:Last_Name>
        <ns0:Full_Name>Pradeep M Srinivasa Reddy</ns0:Full_Name>
    </ns0:getListValues>
    <ns0:getListValues>
        <ns0:First_Name>Geeth </ns0:First_Name>
        <ns0:Internet_E-mail>bas@yahoo.com</ns0:Internet_E-mail>
        <ns0:ManagersName/>
        <ns0:Person_ID>PPL2</ns0:Person_ID>
        <ns0:Last_Name>Srinivasan</ns0:Last_Name>
        <ns0:Full_Name>Geeth  Srinivasan</ns0:Full_Name>
    </ns0:getListValues>
</ns0:QueryByLNResponse> 
```

我尝试使用解组上述代码

```
public static Object xmlToObject(String xml, Class... objClass) throws Exception {
    JAXBContext jc = JAXBContext.newInstance(objClass);
    final Unmarshaller unmarshaller = jc.createUnmarshaller();
    return unmarshaller.unmarshal(new StringReader(xml.toString()));
} 
```

它抛出以下错误

```
javax.xml.bind.UnmarshalException: unexpected element (uri:"UIS_CTMPeople_WS", local:"QueryByLNeResponse"). Expected elements are (none)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportError(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportError(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportUnexpectedChildElement(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext$DefaultRootLoader.childElement(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext._startElement(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.startElement(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.SAXConnector.startElement(Unknown Source)
    at org.apache.xerces.parsers.AbstractSAXParser.startElement(Unknown Source)
    at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
    at org.apache.xerces.impl.XMLNSDocumentScannerImpl$NSContentDispatcher.scanRootElementHook(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
    at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(Unknown Source) 
```

我如何使用 JAXB（xml 到对象）来解组它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T10:04:17.547

以下是一些应该有所帮助的项目：

* * *

**命名空间**

您应该使用类`@XmlSchema`上的注释`package-info`来指定命名空间限定。下面是一个示例，您需要更改包名称以匹配您的模型。

***包信息.java***

```
@XmlSchema(
    namespace = "UIS_CTMPeople_WS",
    elementFormDefault = XmlNsForm.QUALIFIED)
package example;

import javax.xml.bind.annotation.XmlNsForm;
import javax.xml.bind.annotation.XmlSchema; 
```

***了解更多信息***

*   [http://blog.bdoughan.com/2010/08/jaxb-namespaces.html](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)

* * *

**根元素**

看来您的任何类都没有用`@XmlRootElement`（或`@XmlElementDecl`）映射。我希望你有类似以下的东西：

***LNResponse 查询***

```
package example;

@XmlRootElement(name="QueryByLNResponse")
public class QueryByLNResponse {
} 
```

或者，您可以通过使用带参数的解组方法之一来指定要解组的类`Class`：

```
return unmarshaller.unmarshal(xml, QueryByLNResponse.class) 
```

***了解更多信息***

*   [http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html](http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html)

* * *

**表现**

在您的相同代码中，您`JAXBContext`每次执行解组时都会创建一个新代码。 `JAXBContext`是一个线程安全的对象，可以创建一次并重复使用以提高性能。

# c# - Change properties of an element in DataTemplate and reflect the changes

> ID：11843144
> 
> 赞同：0
> 
> 时间：2012-08-07T09:38:20.443
> 
> 标签：c#, wpf, datatemplate, scaletransform

[This](https://stackoverflow.com/questions/11826272/find-a-wpf-element-inside-datatemplate-in-the-code-behind/11832860#11832860) is the question I had posted. Now, I am not able to reflect the changes made to the rectangle element in the DataTemplate. I want to scaleX the rectangle depending on some values and conditions in the code-behind. I did the following :

```
 foreach (var rectangle in FindVisualChildren<Rectangle>(this))
     {
       if (rectangle.Name == "rectangleBarChart" && isRectangle == false)
       {
             rectangle.Fill = Brushes.MediumVioletRed;
             rectangle.Height = 10;
             rectangle.LayoutTransform = new ScaleTransform(2, 1);
             isRectangle = true;
       }
     } 
```

But, the changes are not reflected, it uses the same old DataTemplate. Any hints to refelct the changes to the UI ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:50:24.930

```
rectangle.Fill = Brushes.MediumVioletRed;
            rectangle.Height = 10;
            rectangle.LayoutTransform = new ScaleTransform(2, 1);
            isRectangle = true;
            **rectangle.UpdateLayout();** 
```

使用 UpdateLayOut 方法进行更新。我希望这会有所帮助。

# c++ - 如何在单选按钮组框中获取用户的选择以进行进一步处理？

> ID：11843145
> 
> 赞同：0
> 
> 时间：2012-08-07T09:38:28.670
> 
> 标签：c++, user-interface, radio-button, wt

我刚刚完成了我的 Web 应用程序的 GUI 部分，它严重依赖于单选按钮组来提供选项机制。

我希望从单选按钮组中收集用户选择，以便在某些算法中提供输入参数。

Wt 没有在其`WRadioButton`类中声明的此类连接函数，并且创建单选按钮的方式使得存储用户的单选按钮选择变得不方便。

我该如何继续？

更新：我试图通过使用`checkedButton()`（在`WRadioButton`课堂上声明）来获得选择，但我的方法不能正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:39:29.990

I think it's easier to look at the methods and signals of WButtonGroup: selectedId(), which returns the id of the selected WRadioButton, or checkedChanged(), which is called when the selection changes, with the checked button. WButtonGroup 上的 checkedButton() 也应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T15:05:14.273

您还可以使用 Wt::WSignalMapper 将所有信号连接到一个插槽

# python - SMTP sending an priority email

> ID：11843148
> 
> 赞同：14
> 
> 时间：2012-08-07T09:38:44.020
> 
> 标签：python, smtplib

I am trying to use Python's `smtplib` to set the priority of an email to high. I have successfully used this library to send email, but am unsure how to get the priority working.

```
 import smtplib
 from smtplib import SMTP 
```

My first attempt was to use this from researching how to set the priority:

```
smtp.sendmail(from_addr, to_addr, msg, priority ="high") 
```

However I got an error: `keyword priority is not recognized.`

I have also tried using:

```
msg['X-MSMail-Priority'] = 'High' 
```

However I get another error. Is there any way to set the priority using only smtplib?

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-07T10:38:53.190

优先级只是电子邮件内容的问题（准确地说，是标题内容）。见[这里](http://www.chilkatsoft.com/p/p_471.asp)。

下一个问题是如何将其放入电子邮件中。

这完全取决于您如何构建该电子邮件。如果你使用该`email`模块，你会这样做：

```
from email.Message import Message
m = Message()
m['From'] = 'me'
m['To'] = 'you'
m['X-Priority'] = '2'
m['Subject'] = 'Urgent!'
m.set_payload('Nothing.') 
```

然后将其与

```
smtp.sendmail(from_addr, to_addr, m.as_string()) 
```

值的附录：

根据[这个](https://www.tek-tips.com/viewthread.cfm?qid=1188086)论坛，有以下价值观：

> 1（最高）、2（高）、3（正常）、4（低）、5（最低）。如果省略该字段，则默认值为 3（正常）。

# css - Change fieldCls at runtime

> ID：11843152
> 
> 赞同：0
> 
> 时间：2012-08-07T09:38:55.573
> 
> 标签：css, extjs, extjs4.1

I am trying to change the css of a text field at runtime, using ExtJs 4.1.

I have set the initial css using fieldCls: '' , which works fine.

However, using addCls and removeCls have nothing to do with fieldCls, and will only change the root element's css, and not the field.

What's the correct way to change the css class of a text field at runtime?

Thanks

EDIT: Perhaps it's time for some code:

```
 this.form.getComponent('content').on('writeablechange', function(field, Read, eOpts){
            if (Read == true){
              field.inputEl.addCls('x-form-field-readonly');

            }

            else if (Read == false){

            }

        }, this); 
```

Let's ignore the fact for a second that I can't get a read only field to update css on it's own using any of the config properties I've come across.

This code executes, and displays alerts on each of the cases if i put them in.

I've tried field.inputEl, and I get undefined at runtime. Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:43:40.457

如果要在字段上设置样式，可以使用 field.setFieldStyle()。否则， field.inputEl 是您需要的元素。

# php - JS 验证后的空联系表

> ID：11843155
> 
> 赞同：0
> 
> 时间：2012-08-07T09:39:14.177
> 
> 标签：php, javascript, html, forms, email

我们从我们的网站联系表中收到空电子邮件，我们不知道为什么。我们的表单非常简单，验证也不是那么先进，但足以满足我们的目的。

我们有 5 个字段：

*   姓名（文字输入）
*   邮件（文本输入）
*   电话（文字输入）
*   原因（选择，3 个值）
*   消息（文本区域）

然后使用 JS 验证所有字段。最后，通过提交，我们使用 php 邮件功能发送邮件：

```
<?php
$name = $_POST['name'];
$mail= $_POST['mail'];
$phone= $_POST['phone'];
$reason= $_POST['reason'];
$message= $_POST['message'];

$header = 'From: ' . $mail. " \r\n";
$header .= "X-Mailer: PHP/" . phpversion() . " \r\n";
$header .= "Mime-Version: 1.0 \r\n";
$header .= "Content-Type: text/plain";

$msg.= "Name: " . $name . " \r\n";
$msg.= "Mail: " . $mail. " \r\n";
$msg.= "Phone: " . $phone. " \r\n";
$msg.= "Reason: " . $reason. " \r\n";
$msg.= "Message: " . $message. " \r\n";

$for= "ourmail@ourserver.com";
$as= "Contact form";

mail($for, $as, $msg, $header);
?> 
```

一般来说，工作正常。但有时我们会收到一封电子邮件，其中所有（包括原因......这是一个选择！）字段为空。就像是：

```
Subject: Contact form
Name:
Mail:
Phone:
Reason:
Message: 
```

怎么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:46:23.277

假设您通过 POST 发送数据：

您是否考虑过可以直接从浏览器访问操作 url 而无需任何类型的 POST 数据？这将使所有“字段”为空。

如果是这种情况，您可以通过多种方式尝试服务器验证：

*   添加引用验证，以便只能从表单 url 访问该 url。您可以为此目的使用 $_SERVER['HTTP_REFERER'] 但请记住，这可能并不总是可用。
*   查看数据是否已发送。您可以将 isset 用于该目的，例如`if(isset($_POST['name']) && isset($_POST['email'])`添加服务器验证。您可以随时执行此操作`$name=isset($_POST['name']) ? $_POST['name'] : 'no_name_entered'`并发送电子邮件。
*   在表单中添加一个隐藏的输入，如“联系”，并检查它是否设置在服务器端：`if(!isset($_POST['contacting'])) die('ERROR: Form not sent');`

无论如何，请记住，您收到的大多数数据都可能受到污染，即使是通过选择字段发送的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T09:44:44.013

使用 php 脚本创建服务器端验证。

**演示**

```
if($_POST['Name']=="") {
    $err = "Enter the name";
}
if($_POST['mail']=="") {
    .......
}

......
if($err=="") {
    //mail function
}
else {
    echo $err;
} 
```

# jquery - jQuery tablesorter：列优先级（例如在奖牌计数中：首先是金牌，然后是银牌，然后是铜牌）

> ID：11843161
> 
> 赞同：1
> 
> 时间：2012-08-07T09:39:56.813
> 
> 标签：jquery, tablesorter

我目前正在研究奥运会的替代奖牌数，并使用 tablesorter-plugin 让用户能够从不同角度查看数据。

我坚持这一点，即行的正确顺序：如果两个国家的金牌数量相同，你看看银牌。银牌多的国家获得第一名，银牌少的国家获得第二名。

如何在 tablesorter 的帮助下实现这一目标？

您可以在[http://www.benedictzinke.de/olympia查看源代码](http://www.benedictzinke.de/olympia)

到目前为止，它是按照每 10 名运动员获得的金牌数排序的。对于至少赢得一枚金牌的国家来说，这一切都很好。但是一排排没有金牌的国家却一团糟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:02:06.120

我认为最简单的解决方案是在奖牌栏中隐藏加权奖牌值。

例如，让我们看看韩国对罗马尼亚。我在括号中包含了加权值，它们基本上是每种奖牌的数量，包括前导零（所以“2”变成了“002”）

```
Country  G (gggsssbbb)  S (sssgggbbb)  B (bbbgggsss)
Korea   12 (012005006)  5 (005012006)  6 (006012005)
Romania  2 (002005002)  5 (005002002)  2 (002012002) 
```

现在，如果我们对银牌列进行排序，您会看到韩国的排名`005012006`大于罗马尼亚`005002002`，并且将韩国排在罗马尼亚之前。

现在是在我们调用 tablesorter 之前设置这一切的代码，以及一个[演示](http://jsfiddle.net/Mottie/eY8uH/106/)

```
$('#medal_count').find('tbody tr').each(function(){
    var pref = '<span style="display:none">', // span that hides the weighted value
        suff = '</span>',
        $t = $(this),
        $c = $t.children(),
        gold = ("000" + $c.eq(4).text()).slice(-3), // add leading zeros
        silver = ("000" + $c.eq(5).text()).slice(-3),
        bronze = ("000" + $c.eq(6).text()).slice(-3);
    // add hidden weighted medal values
    $c.eq(4).prepend(pref + gold + silver + bronze + suff);
    $c.eq(5).prepend(pref + silver + gold + bronze + suff);
    $c.eq(6).prepend(pref + bronze + gold + silver + suff);
});

$("#medal_count").tablesorter({
    textExtraction : function(node){
        var $n = $(node);
        // only return the weighted values if a span exists
        return ($n.find('span').length) ? 
            $n.find('span').text() :
            $n.text();
    },
    sortList: [[8, 1]]
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:15:38.373

使用 tablesorter 插件，您应该参考有关编写自己的解析器的文档。在这里看到它：http: [//tablesorter.com/docs/example-parsers.html](http://tablesorter.com/docs/example-parsers.html)

您所要求的似乎几乎完全符合文档中使用的示例。为方便起见，文档中的代码复制如下。

```
// add parser through the tablesorter addParser method 
$.tablesorter.addParser({ 
    // set a unique id 
    id: 'grades', 
    is: function(s) { 
        // return false so this parser is not auto detected 
        return false; 
    }, 
    format: function(s) { 
        // format your data for normalization 
        return s.toLowerCase().replace(/good/,2).replace(/medium/,1).replace(/bad/,0); 
    }, 
    // set type, either numeric or text 
    type: 'numeric' 
}); 

$(function() { 
    $("table").tablesorter({ 
        headers: { 
            6: { 
                sorter:'grades' 
            } 
        } 
    }); 
}); 
```

出于您的目的，代码如下所示：

```
// add parser through the tablesorter addParser method 
$.tablesorter.addParser({ 
    // set a unique id 
    id: 'medals', 
    is: function(s) { 
        // return false so this parser is not auto detected 
        return false; 
    }, 
    format: function(s) { 
        // format your data for normalization 
        // Note the 'i' added after the medal type, that makes it case insensitive.
        return s.toLowerCase().replace(/gold/i,2).replace(/silver/i,1).replace(/bronze/i,0); 
    }, 
    // set type, either numeric or text 
    type: 'numeric' 
}); 

$(function() { 
    $("table").tablesorter({ 
        headers: { 
            6: {  // Replace '6' with the number of the column that your medals are in
                sorter:'medals' 
            } 
        } 
    }); 
}); 
```

# entity-framework - 撤消实体框架中的更改，包括更改为对象引用

> ID：11843162
> 
> 赞同：3
> 
> 时间：2012-08-07T09:39:58.247
> 
> 标签：entity-framework

有几种方法可以撤消 Entity Framework 中的更改：

*   重新创建对象上下文
*   从上下文中分离/附加
*   刷新：context.MyEntity.Context.Refresh(RefreshMode.StoreWins, myobject);

该应用程序有一个选项卡式界面，其中一个选项卡显示不同的实体对象。用户可以将标签添加到对象（m:n 关系）。我尝试了我能找到的一切，我无法让实体框架撤消用户对 m:n 关系所做的更改。例如，用户添加标签（创建 m:n 对象）。如果用户单击“取消”，则应将对象保存到数据库中。

重新创建上下文可能会导致其他选项卡中的数据丢失。Detach/Attach and Refresh() 仅在对象本身已更改且没有从对象列表中添加/删除的相关对象时才有效。

我曾考虑为每个选项卡使用不同的上下文对象，但这会导致数据不同步（例如，用户单击列表并打开一个新选项卡。更改对象后，列表不会更新自动地）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:28:31.533

EF 中没有撤消更改。您当前的问题更多是关于您的应用程序的预期工作方式以及 EF 的预期工作方式。EF 预计将作为工作单元工作 - 您进行了很多更改，要么将它们保存在一起，要么将它们一起丢弃。

您的应用程序显然需要不同的模型，因为您只需要还原部分更改。这并不是 EF 的上下文应该处理的内容。此类逻辑应与 EF 分开处理 = 您的 gui 应与未附加到上下文的对象一起使用，并且您应仅在用户决定保存结果时附加实体并定义更改。

上下文中的部分撤消需要您浏览条目`ObjectStateManager`并恢复创建的更改。对于更改的多对多关系，您必须找到表示关系的状态条目并恢复状态更改。这些条目只能处于添加、删除或未更改状态。您可以将已删除的内容移回未更改的状态，但我目前不确定您是否可以以某种方式分离或删除添加的实例。

# c++ - 发送大数据时对等方重置 Tcp 连接

> ID：11843164
> 
> 赞同：-1
> 
> 时间：2012-08-07T09:40:04.703
> 
> 标签：c++, sockets, tcp, systems-programming

我正在尝试通过 tcp 套接字连接发送 212 KB 的缓冲区，但作为响应，我收到了 RST 数据包并且连接因对等错误而重置。

我已将 SO_RCVBUF 和 SO_SBNBUF 属性更改为 256 KB，并验证 max_buf 系统属性也 > 256 K。当我尝试发送大数据时，连接失败。

我是套接字编程的新手，所以如果需要更多信息，请告诉我。我想我缺少一些套接字选项。

操作系统：solaris sparc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:13:38.327

此错误通常意味着您已写入已被另一端关闭的连接。还有其他原因，但这是最常见的。收件人真的应该处理您发送的尺寸吗？

# javascript - document.getElementById('myControl').focus() 在 PhoneGap 中不起作用

> ID：11843166
> 
> 赞同：3
> 
> 时间：2012-08-07T09:40:13.047
> 
> 标签：javascript, html, cordova

我正在创建一个 PhoneGap 应用程序。我必须将焦点放在页面加载上的 textarea 上：

我用过

```
<body onload="newNoteOnLoad();">
<div class="container">
    <div class="header">
        <h1 id="noteHeader">
            New Note</h1>
        <a href="Books.html" class="back" id="back"></a><a href="#" class="done" id="bttnDone" onclick="addNewNote();">
        </a>
    </div>
    <div class="mainhelp">
        <p>
          <textarea id="txtNote" cols="115" rows="15"></textarea>
        </p>
    </div>    
</div>
<script type="text/javascript">
  alert('focus');
  document.getElementById("txtNote").focus();
</script> 
```

在页面加载功能中。但这对我不起作用。谁能帮帮我？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-03T15:54:33.063

从 iOS 6 开始，UIWebView 类有一个名为“keyboardDisplayRequiresUserAction”的属性。如果您想将此设置为 false，您可以通过 phonegap config.xml 访问它：

```
<preference name="KeyboardDisplayRequiresUserAction" value="false" /> 
```

默认值为 true，这意味着以编程方式聚焦任何文本表单元素都不起作用。

更多信息：http: [//community.phonegap.com/nitobi/topics/calling_focus](http://community.phonegap.com/nitobi/topics/calling_focus)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:47:44.980

您指的是尚未加载到 DOM 的元素。出于这些目的，例如，jQuery 有[`.ready()`event](http://api.jquery.com/ready/)。在 HTML 中的 'myControl' 元素下加载相同的脚本，看看它是否有效或使用 jQuery 来执行此操作。

JavaScript 解决方案的工作原理是这样的，当您在您所指的 HTML 元素之后加载它时，例如：

```
 <textarea id="myControl"></textarea>
    <script>
      document.getElementById('myControl').focus(); 
    </script> 
```

使用 jQuery，它看起来像这样，您可以将它加载到页面上的任何位置：

```
$(document).ready(function() {
   $('#myControl').focus();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T09:52:47.817

如果你想让键盘显示你会遇到很大的麻烦，因为焦点事件会被异步触发。我只是运气好让键盘在用户输入上启动，例如`touchstart`, `touchend`&`click`

# rest - qooxdoo 休息实验

> ID：11843170
> 
> 赞同：0
> 
> 时间：2012-08-07T09:40:20.073
> 
> 标签：rest, qooxdoo

我在 qooxdoo 中使用 REST 服务，我看到有一个实验类[http://manual.qooxdoo.org/1.6/pages/communication/rest.html](http://manual.qooxdoo.org/1.6/pages/communication/rest.html)

这允许轻松创建通信，但我找不到以下任何示例：

1.  如何将有效负载（json）传递给 put/post 请求？
2.  如何在网址中传递参数，例如 www.example.com/customers?arg1=20

感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:10:07.283

1.6 的文档也没有解释，但 2.0 的文档提供了一些线索......

声明细节

```
var customers = new qx.io.rest.Resource({
  create: {
   method: "POST",
   url: "/customers"
  }); 
```

放置/发布有效载荷：

```
costumers.create({   "surname": "none",
                    "name": "none",
                    "email": "someone@example.com",
                    "description": "nothing",
                    "address": "Southpole"
}); 
```

在 url 中传递参数：

声明细节

```
var customers = new qx.io.rest.Resource({
  get: {
   method: "GET",
   url: "/customers?{args}"
  }); 
```

和打电话的时候

```
var arguments = "arg1=10&arg2=10";
customers.get({arg:arguments});
// this will geneterate the following http://example.com/customers?agr1=10&arg2=10 
```

# xmpp - 在 Plone CMS 中集成自托管即时消息/聊天解决方案

> ID：11843173
> 
> 赞同：0
> 
> 时间：2012-08-07T09:40:39.023
> 
> 标签：xmpp, chat, plone, irc, instant-messaging

我正在寻找要在企业 plone Intranet 中使用的聊天产品。

我不希望我的用户需要注册或批准任何外部服务（irc、gtalk、socials 等），因此产品应该负责用户集成，使当前用户能够无缝地相互交互。

如果该产品是群体意识的（隐式聊天室？），那将是一个加号

周围有什么开箱即用的东西吗？无需任何聊天协议背景知识即可轻松安装/配置？

谢谢，亚历山德罗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:02:13.673

有*胡说八道*。

[http://opkode.com/media/blog/babble-instant-messaging-for-plone](http://opkode.com/media/blog/babble-instant-messaging-for-plone)

但是，我建议您将聊天核心保留在 Plone 之外，并使用内部 XMPP 服务器之类的东西，然后将其放在 Plone 上使用`<iframe>`和 Javascript 集成。即使不是网络之外的“外部服务”，也应该是某种意义上的“外部服务”，Plone 本身虽然是一个多用途的电动工具，但并不是很精通即时通讯平台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:08:13.870

一家名为 Jarn 的 Plone 公司创建了一个基于 Plone 的 SaaS 内部网平台，其中包括一个完整的 XMPP 堆栈，用于浏览器内的实时聊天（实际上是微博）和状态管理。

当公司决定不再使用该平台时，该平台已开源，可在 GitHub 上找到：[https ://github.com/intranett/intranett](https://github.com/intranett/intranett)

XMPP 集成的核心是[`jarn.xmpp.core`包](https://github.com/ggozad/jarn.xmpp.core)；它提供了存在和消息传递组件。上面的`intranett`构建展示了如何利用这个组件的潜力。

^([免责声明：我曾经是 Jarn 的软件工程师，该公司今天已不复存在，因此这是没有当前维护者的开源软件。])

# msbuild - 无法识别自定义 msbuild 任务输出

> ID：11843177
> 
> 赞同：2
> 
> 时间：2012-08-07T09:40:47.273
> 
> 标签：msbuild, extend, msbuild-task, csproj

我有一个自定义 msbuild 任务，其输出参数定义如下

```
 public class DeployJavaScript : Task
{
    [Required]
    public ITaskItem[] SourceFiles { get; set; }

    [Output]
    public string Result { get; set; }

    #region Overrides of Task

    public override bool Execute()
    {
        foreach (var sourceFile in SourceFiles)
        {
        }
        Result = String.Format("Sucessfully Deployed Javascript Files");
        return true;
    }

    #endregion Overrides of Task
} 
```

在我的构建脚本（csproj 文件）中，我通过在 AfterBuild 目标中注入我的自定义任务来扩展 msbuild，如下定义

```
<Target Name="AfterBuild">
<Message Text="AfterBuild Begin" Importance="high"/>
<PropertyGroup>
  <JavaScriptFolderPath Condition=" '$(JavaScriptFolderPath)' == '' " >$(MSBuildProjectDirectory)\</JavaScriptFolderPath>
  <JavaScriptFilePath></JavaScriptFilePath>
</PropertyGroup>
<ItemGroup>
  <JavaScriptFolderFiles Include="$(JavaScriptFolderPath)\**\*.js"/>
</ItemGroup>
<ItemGroup>
  <JavaScriptFiles Include="$(JavaScriptFilePath)"/>
</ItemGroup>
<DeployJavaScript SourceFiles="@(JavaScriptFolderFiles->'%(FullPath)')">
  <Output TaskParameter="Result" PropertyName="ResultofJavaScriptDeployment"/>
</DeployJavaScript>
<Message Text="$(ResultofJavaScriptDeployment)" Importance="high"/>
<Message Text="AfterBuild Complete" Importance="high"/> 
```

但是，msbuild 抱怨“未知的输出参数结果，'DeployJavaScript' 应该没有输出参数”

为什么在这种情况下我不能返回输出参数？

PS 我知道我可以使用 Log.LogMessage(MessageImportance.high,"sucess",high) 将结果记录在符合我目的的 proj 文件中。只想知道为什么我不能使用输出参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T13:50:24.780

您必须在代码中更改`Result`属性的类型。使用`ITaskItem`而不是`string`. 对我来说，它有助于解决同样的问题。自然，您的代码必须在`TaskItem`此之后创建一个类的实例： `Result = new TaskItem(String.Format("Sucessfully Deployed Javascript Files"));`

# iphone - 在 Mountain Lion 上运行 4.3 版的 iOS 应用程序

> ID：11843178
> 
> 赞同：1
> 
> 时间：2012-08-07T09:40:49.487
> 
> 标签：iphone, ios, xcode, ios4, simulator

我在 Mountain Lion 上使用 XCode 的最新版本，并想测试我的 iOS 4.3 应用程序。

如何调整模拟器或安装以前版本的 XCode 以测试 iOS 4.3 而不是仅测试 5.1？

在我的 XCode 偏好中 -> 下载我看不到 4.3 模拟器

![在此处输入图像描述](../Images/76ed6b28680b4a9131ce9e22ed9a5ab9.png)

编辑：

我手动将 iPhone 4.3 SDK 的文件夹从运行旧 XCode 的旧 iMac 复制到我的工作计算机。事实证明，此修复仅适用于设备测试，不适用于模拟器中的测试。所以我需要一台安装了 iOS 4.3 的旧设备，这最终奏效了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:44:06.723

您需要安装 4.3 模拟器。

转到 Xcode 中的“首选项”，然后转到“下载”选项卡，您*可能会*看到：

![在此处输入图像描述](../Images/c98607ea844e3feee99da5bd52d4026d.png)

我在我的 10.7 机器上制作了这个屏幕截图，但在 10.8 上查看（假定）相同的 Xcode 安装，我只看到 5.0 模拟器作为可安装选项。可能是您必须在 4.3 出现之前安装 5.0 模拟器，或者 4.3 仅在 Lion 上支持。

# django - Tastypie - PUT 删除对象中所有未发送（未设置）的字段 - 更新

> ID：11843182
> 
> 赞同：1
> 
> 时间：2012-08-07T09:40:58.603
> 
> 标签：django, tastypie, put

我想更新一个对象，我正在通过该`PUT`方法使用 Tastypie。但是我的 JSON 文件中未重置的所有先前设置的字段都被删除/设置为空。

如何通过 Tastypie 进行更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:40:58.603

好的，很简单：只需使用`PATCH`:)

[http://django-tastypie.readthedocs.org/en/latest/interacting.html#partially-updating-an-existing-resource-patch](http://django-tastypie.readthedocs.org/en/latest/interacting.html#partially-updating-an-existing-resource-patch)

# jsp - 如何绑定到命令对象的日历属性，在jsp中只指定年份

> ID：11843184
> 
> 赞同：0
> 
> 时间：2012-08-07T09:41:01.723
> 
> 标签：jsp, spring-mvc

我有以下问题。

在我的 Spring MVC Web 应用程序中，有一些带有 Calendar 属性的命令对象类。

```
public class TestBean {

private Calendar startDate;

//other properties

//setters and getters 

} 
```

在我的 JSP 页面中，我的表单如下所示：

```
<form:form method="post" commandName="testBean">
  <form:input path="startDate" cssClass="forminput" />
</form:form> 
```

但我想在上面的表单输入中只添加年份（“yyyy”）并将其映射到上面的日历属性（它可以是默认日期，但在输入中指定年份，例如：01-01-2012）。可能吗？如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:03:28.637

我建议您在这里实现自己的 Spring 转换器：

```
final class StringToCalendar implements Converter<String, Calendar> {

    public Calendar convert(String source) {
        Calendar calendar = Calendar.getInstance();

        // Setting 01-01-yyyy date
        calendar.set(Calendar.DAY_OF_MONTH, 1);
        calendar.set(Calendar.MONTH, 1);
        calendar.set(Calendar.YEAR, Integer.parseInt(source)); // This could throw an unchecked exception!

        return calendar;
    }

} 
```

并将其注册到您的 Spring XML 配置中：

```
<mvc:annotation-driven conversion-service="conversionService"/>

<bean id="conversionService"
    class="org.springframework.format.support.FormattingConversionServiceFactoryBean">
    <property name="converters">
       <list>
          <bean class="your.package.StringToCalendar "/>
       </list>
    </property>
</bean> 
```

# ios - iOS 中 UIDatePicker 的默认日期

> ID：11843185
> 
> 赞同：2
> 
> 时间：2012-08-07T09:41:04.060
> 
> 标签：ios, objective-c, iphone, xcode, uidatepicker

我是 iOS 开发的新手。我的 Storyboard 中有这个 ViewController（包括一个 UIDatePicker 和一个条形按钮）：

![在此处输入图像描述](../Images/d5cfc3861c0ef6b497e1227d20c717db.png)

我跟着[数据单元](http://developer.apple.com/library/ios/#samplecode/DateCell/Introduction/Intro.html)调用我的 DatePicker。当用户单击页面中的按钮时，PickerDate 会在导航栏上弹出一个完成栏按钮：

![在此处输入图像描述](../Images/0d9c4248be20109e228cce13d1f0f065.png)

问题是它仅将当前日期显示为`default`. 当我从属性设置它时没有任何变化：

![在此处输入图像描述](../Images/f26a269f18b887db85321f24f22fb61d.png)

你知道我该如何解决吗？（通过`setting up the properties`或以编程方式）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T10:09:41.377

我以这种方式以编程方式完成了它：

```
NSCalendar *calendar = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];
NSDateComponents *components = [[[NSDateComponents alloc] init] autorelease];
[components setYear:1980];
[components setMonth:1];
[components setDay:1];
NSDate *defualtDate = [calendar dateFromComponents:components];
pickerView.date = defualtDate; 
```

但仍然不知道为什么它不起作用`setting up the properties`。有什么帮助吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-02T13:57:14.543

在**斯威夫特**：

```
let calendar: NSCalendar = NSCalendar(calendarIdentifier: NSGregorianCalendar)!
calendar.timeZone = NSTimeZone(name: "UTC")!
let components: NSDateComponents = NSDateComponents()
components.year = 1980
components.month = 1 
components.day = 1
let defaultDate: NSDate = calendar.dateFromComponents(components)!
self.dateOfBirthUIDatePicker.date = defaultDate 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-07T18:27:49.610

上面的好答案 - 这是**Swift3**（2 月 17 日）版本：

```
let calendar: NSCalendar = NSCalendar(calendarIdentifier:  .gregorian)!
calendar.timeZone = NSTimeZone(name: "UTC")! as TimeZone
let components: NSDateComponents = NSDateComponents()
components.year = 1980
components.month = 1
components.day = 1
let defaultDate: NSDate = calendar.date(from: components as DateComponents)! as NSDate
self.datePicker.date = defaultDate as Date 
```

# sql - 将一个表的所有记录插入另一个表

> ID：11843190
> 
> 赞同：0
> 
> 时间：2012-08-07T09:41:20.660
> 
> 标签：sql, sql-server

目前我正在运行这样的查询以将一个表中的字段添加到另一个表中。

```
 INSERT INTO new_table (Num1, Num2, Num3)
 SELECT Num1, Num2, Num3
 FROM initial_table 
```

我的表包含许多不同的列，有没有办法用一个命令将它们全部移动，而不是手动键入每一列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:44:55.163

```
INSERT INTO new_table
SELECT *
FROM initial_table 
```

但是，如果您在`new_table`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:45:42.790

如果您的表是相同的，列的顺序完全相同，并且没有 IDENTITY 列，您可以这样做：

```
INSERT INTO new_table
SELECT *
  FROM initial_table 
```

# android - 如何垂直拉伸 GridView 的单元格？

> ID：11843192
> 
> 赞同：2
> 
> 时间：2012-08-07T09:41:28.687
> 
> 标签：android, gridview, row-height

我有这个 GridView：

```
<GridView     android:id="@+id/gridEtebarSanji"
              android:layout_width="match_parent"
              android:layout_height="480dp"
              android:background="@color/black"
              android:gravity="center"
              android:horizontalSpacing="2dp"
              android:isScrollContainer="false"
              android:numColumns="3"
              android:stretchMode="columnWidth"
              android:verticalSpacing="2dp" >

  </GridView> 
```

这个布局将用于其中的项目：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_horizontal" >

    <TextView
        android:id="@+id/tvText"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@color/white"
        android:singleLine="false"
        android:text="TextView"
        android:textSize="16dip" />

</LinearLayout> 
```

结果：

![在此处输入图像描述](../Images/24f244597292e36fcc84472ec0204b00.png)

我想将单行单元格拉伸为与多行单元格一样长。我怎样才能做到这一点？

我已经`android:layout_height="match_parent"`为 textViews 设置了，但它不影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:45:02.593

将您的 TextView 设置为显示 2 行：

```
<TextView
        android:id="@+id/tvText"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@color/white"
        android:lines="2"
        android:text="TextView"
        android:textSize="16dip" /> 
```

# ruby-on-rails - 没有模块前缀路由路径的 Rails 命名范围模型对象

> ID：11843193
> 
> 赞同：2
> 
> 时间：2012-08-07T09:41:30.257
> 
> 标签：ruby-on-rails, namespaces, routes, nested-routes

我对 Rails 路由器和表单生成器有一点问题。我的应用程序具有模型和控制器的命名空间模块。模块用于更容易抽象到另一个项目。

我使用`routes.rb`范围内的方法而不是命名空间，因为我没有“丑陋”的路径助手。

看起来像：

```
scope module: :taxonomy do
  resources :taxonomies do
    resources :terms
  end
end 
```

问题是当我想编辑分类（url:）时`taxonomies/1/edit`出现错误：

```
undefined method `taxonomy_taxonomy_path' 
```

因为我的路线只是`taxonomy_path`

有什么方法`form_for @taxonomy`可以识别该路线的范围？不使用`form_for @taxonomy, url: taxonomy_path(@taxonomy)`是不能治愈的。因为控制器方法中的@taxonomy 对象`respond_with @taxonomy`总是引用到`taxonomy_taxonomy_url`

我的模型：

```
module Taxonomy
  class Taxonomy < ActiveRecord::Base
    has_many :taxonomy_terms, inverse_of: :taxonomy
    has_many :terms, through: :taxonomy_terms
  class Term < ActiveRecord::Base
    has_one :taxonomy_term, inverse_of: :term
    has_one :taxonomy, through: :taxonomy_term 
```

和控制器：

```
module Taxonomy
  class TaxonomiesController < ApplicationController 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:26:38.783

您可以通过以下方式覆盖 ActiveRecord 的模型命名：

```
module Taxonomy
  class Taxonomy < ActiveRecord::Base
    def self.model_name
      ActiveModel::Name.new("Taxonomy")
    end
  end
end 
```

这会覆盖 ActiveRecord 默认命名生成，该生成为 Taxonomy 类生成 taxonomy_taxonomy 名称，因为它位于 Taxonomy 模块下。它应该可以解决您的路由名称问题并根据需要生成正确的路由名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T10:25:47.963

在 routes.rb 中试试这个：

```
namespace :taxonomy do
  resources :taxonomies do
    resources :terms
  end
end 
```

这可能需要您将控制器存储在一个名为的子目录`taxonomy`中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-08T10:25:45.550

由于您的文件夹结构，我很确定您需要向您的班级添加一个模块。

```
 app/models
  ├── ...
  ├── taxonomy
  │   ├── taxonomy.rb
  │   └── ...
  └── ... 
```

* * *

您可以配置 rails 以递归方式加载位于子文件夹中的**模型：**

*配置你的`config/application.rb`：*

```
config.autoload_paths += Dir[ Rails.root.join('app', 'models', "taxonomy", '**/') ] 
```

*您可以为 Rails 应用程序中的任何文件夹和子文件夹设置此配置。*

* * *

如果这样做，您将不必覆盖 ActiveRecord 的模型，这并不总是最好的主意。

```
class Taxonomy < ActiveRecord::Base
  ...
end 
```

# php - 使用 Cocoa-Touch 从 PHP 获取图像

> ID：11843195
> 
> 赞同：-2
> 
> 时间：2012-08-07T09:41:35.497
> 
> 标签：php, cocoa-touch

我得到了这个 php 代码。当您访问该站点时，它会创建一个饼图：`http://localhost/social/Test.php?data=100*200*100`

如何从 php 文件中获取此图像到我的 Xcode 项目？当您进入站点时，图像将下载但是当您在 iPhone 上进入站点时，图像只会显示

```
<?php
$show_label = true; // true = show label, false = don't show label.
$show_percent = true; // true = show percentage, false = don't show percentage.
$show_text = true; // true = show text, false = don't show text.
$show_parts = false; // true = show parts, false = don't show parts.
$label_form = 'square'; // 'square' or 'round' label.
$width = 199;
$background_color = 'FFFFFF'; // background-color of the chart...
$text_color = '000000'; // text-color.
$colors = array('003366', 'CCD6E0', '7F99B2','F7EFC6', 'C6BE8C', 'CC6600','990000','520000','BFBFC1','808080'); // colors of the slices.
$shadow_height = 16; // Height on shadown.
$shadow_dark = true; // true = darker shadow, false = lighter shadow...

// DON'T CHANGE ANYTHING BELOW THIS LINE...

$data = $_GET["data"];
$label = $_GET["label"];

$height = $width/2;
$data = explode('*',$data);

if ($label != '') $label = explode('*',$label);

for ($i = 0; $i < count($label); $i++) 
{
    if ($data[$i]/array_sum($data) < 0.1) $number[$i] = ' '.number_format(($data[$i]/array_sum($data))*100,1,',','.').'%';
    else $number[$i] = number_format(($data[$i]/array_sum($data))*100,1,',','.').'%';
    if (strlen($label[$i]) > $text_length) $text_length = strlen($label[$i]);
}

if (is_array($label))
{
    $antal_label = count($label);
    $xtra = (5+15*$antal_label)-($height+ceil($shadow_height));
    if ($xtra > 0) $xtra_height = (5+15*$antal_label)-($height+ceil($shadow_height));

    $xtra_width = 5;
    if ($show_label) $xtra_width += 20;
    if ($show_percent) $xtra_width += 45;
    if ($show_text) $xtra_width += $text_length*8;
    if ($show_parts) $xtra_width += 35;
}

$img = ImageCreateTrueColor($width+$xtra_width, $height+ceil($shadow_height)+$xtra_height);

ImageFill($img, 0, 0, colorHex($img, $background_color));

foreach ($colors as $colorkode) 
{
    $fill_color[] = colorHex($img, $colorkode);
    $shadow_color[] = colorHexshadow($img, $colorkode, $shadow_dark);
}

$label_place = 5;

if (is_array($label))
{
    for ($i = 0; $i < count($label); $i++) 
    {
        if ($label_form == 'round' && $show_label  && $data[$i] > 0)
        {
            imagefilledellipse($img,$width+11,$label_place+5,10,10,colorHex($img, $colors[$i % count($colors)]));
            imageellipse($img,$width+11,$label_place+5,10,10,colorHex($img, $text_color));
        }
        else if ($label_form == 'square' && $show_label && $data[$i] > 0)
        {   
            imagefilledrectangle($img,$width+6,$label_place,$width+16,$label_place+10,colorHex($img, $colors[$i % count($colors)]));
            imagerectangle($img,$width+6,$label_place,$width+16,$label_place+10,colorHex($img, $text_color));
        }

        if ($data[$i] > 0)
        {
            if ($show_percent) $label_output = $number[$i].' ';
            if ($show_text) $label_output = $label_output.$label[$i].' ';
            if ($show_parts) $label_output = $label_output.$data[$i];

            imagestring($img,'2',$width+20,$label_place,$label_output,colorHex($img, $text_color));
            $label_output = '';

            $label_place = $label_place + 15;
        }
    }
}
$centerX = round($width/2);
$centerY = round($height/2);
$diameterX = $width-4;
$diameterY = $height-4;

$data_sum = array_sum($data);

$start = 270;

for ($i = 0; $i < count($data); $i++) 
{
    $value += $data[$i];
    $end = ceil(($value/$data_sum)*360) + 270;
    $slice[] = array($start, $end, $shadow_color[$value_counter % count($shadow_color)], $fill_color[$value_counter % count($fill_color)]);
    $start = $end;
    $value_counter++;
}

for ($i=$centerY+$shadow_height; $i>$centerY; $i--) 
{
    for ($j = 0; $j < count($slice); $j++)
    {
        if ($slice[$j][0] != $slice[$j][1]) ImageFilledArc($img, $centerX, $i, $diameterX, $diameterY, $slice[$j][0], $slice[$j][1], $slice[$j][2], IMG_ARC_PIE);
    }
}   

for ($j = 0; $j < count($slice); $j++)
{
    if ($slice[$j][0] != $slice[$j][1]) ImageFilledArc($img, $centerX, $centerY, $diameterX, $diameterY, $slice[$j][0], $slice[$j][1], $slice[$j][3], IMG_ARC_PIE);
}

OutputImage($img);
ImageDestroy($img);

function colorHex($img, $HexColorString) 
{
    $R = hexdec(substr($HexColorString, 0, 2));
    $G = hexdec(substr($HexColorString, 2, 2));
    $B = hexdec(substr($HexColorString, 4, 2));
    return ImageColorAllocate($img, $R, $G, $B);
}

function colorHexshadow($img, $HexColorString, $mork) 
{
    $R = hexdec(substr($HexColorString, 0, 2));
    $G = hexdec(substr($HexColorString, 2, 2));
    $B = hexdec(substr($HexColorString, 4, 2));

    if ($mork)
    {
        ($R > 99) ? $R -= 100 : $R = 0;
        ($G > 99) ? $G -= 100 : $G = 0;
        ($B > 99) ? $B -= 100 : $B = 0;
    }
    else
    {
        ($R < 220) ? $R += 35 : $R = 255;
        ($G < 220) ? $G += 35 : $G = 255;
        ($B < 220) ? $B += 35 : $B = 255;               
    }           

    return ImageColorAllocate($img, $R, $G, $B);
}

function OutputImage($img) 
{
    header('Content-type: image/jpg');
    ImageJPEG($img,NULL,100);
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:25:44.197

检索图像数据`dataWithContentsOfUrl`，然后通过

1.  用于`imageWithData`获取您的`UIImage`; 或者

2.  将其写入`NSData`文件，`writeToFile`然后您可以稍后通过以下方式检索图像`imageWithContentsOfFile`

请注意，您必须将该 PHP 代码放在 iPhone 可访问的 Web 服务器上（显然`localhost`无法正常工作）。因此，它可能看起来像（我已将您的`localhost`引用替换为`host.com`... 您必须将其替换为您放置 PHP 代码的网站的 URL）：

```
NSString *urlString = @"http://host.com/social/Test.php?data=100*200*100";
NSURL    *url = [NSURL URLWithString:urlString];
NSError  *err;

NSData   *imageData = [NSData dataWithContentsOfURL:url options:0 error:&err];
NSAssert(imageData, @"Unable to retrieve image"); 
```

现在您可以使用该图像：

```
self.imageView.image = [UIImage imageWithData:imageData]; 
```

或者，如果您愿意，现在您也可以将其写入 iPhone 上的文件：

```
NSString *documentsFolder  = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *documentFullPath = [documentsFolder stringByAppendingPathComponent:@"pie.jpg"]; // I noticed from the php source that this is a jpg

BOOL success = [imageData writeToFile:documentFullPath options:0 error:&err];
NSAssert(success, @"Unable to write file"); 
```

您可以稍后检索：

```
self.imageView.image = [UIImage imageWithContentsOfFile:documentFullPath]; 
```

请注意，这是在 iOS 中绘制饼图的一种低效方法（让 php 服务器生成然后下载的 jpg，如果您不在 wifi 上，则需要 Internet 连接并以 3G 速度下载等）。我可能会用 Core Graphics 做一些事情，或者抓住其中一种各种图表/图形 API。如果你用谷歌搜索“ [ios 3d pie chart](http://www.google.com/#hl=en&sclient=psy-ab&q=ios+3d+pie+chart&oq=ios+3d+pie+chart) ”，你会得到很多点击。[这个](http://www.codeproject.com/Articles/7321/3D-Pie-Chart)看起来很酷，虽然我从未尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:49:30.993

请向您的应用程序发送请求表单 php 服务器，将图像转换为 base64 编码并将其作为字符串传递，然后根据需要将此文件保存为 .jpg 或 .png 等。

谢谢 djrecker

# memory-leaks - 使用 Glowcode 工具查找 COM dll 中的内存泄漏

> ID：11843199
> 
> 赞同：0
> 
> 时间：2012-08-07T09:41:46.060
> 
> 标签：memory-leaks

在 Windows 中，请任何人都可以帮助我使用 GlowCode Tool 找出内存泄漏。我正在尝试添加 dll，但无法找到内存泄漏的正确函数或类。我们创建了 COM DLL，我们编写了一些函数并尝试将这些函数导出到 VC++ mfc dll 应用程序中。

当我们需要查找com dll中的内存泄漏时，请提供如何使用GLowCode工具

提前感谢 Manohar Kumar A

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T10:53:02.467

有一个与 GlowCode 相关的帮助文档。它有使用 Glowcode 的分步指南。你试过吗？

# ember.js - 谁在为我实例化我的对象？：秒

> ID：11843200
> 
> 赞同：1
> 
> 时间：2012-08-07T09:41:47.320
> 
> 标签：ember.js

我目前正在尝试在 ember 中进行路由，并有一个工作示例。问题是，我有点困惑为什么它有效。目前这条路线只有 2 个简单的视图。这是代码：

```
App = Em.Application.create();

App.Router = Ember.Router.extend({
  root: Ember.Route.extend({

    index: Ember.Route.extend({
      route: '/',
      redirectsTo: 'home' //when hitting the base URL, redirect to home
    }),
    home: Ember.Route.extend({
      route: '/home', 
      connectOutlets: function(router) {
        router.get('applicationController').connectOutlet('home'); 
      }
    }),
    about: Ember.Route.extend({
      route: '/about',
      connectOutlets: function(router) {
        router.get('applicationController').connectOutlet('about'); 
      }
    })
  })
});

//Main controller + view
App.ApplicationController = Ember.Controller.extend({});

App.ApplicationView = Ember.View.extend({ 
    templateName: 'application',
    goHome: function(){
        App.router.transitionTo('home'); 
    },
    goAbout: function(){
        App.router.transitionTo('about');
    }
});

// Home page
App.HomeView = Ember.View.extend({
    templateName: 'home'
})

// About page
App.AboutController = Ember.Controller.extend({
    numWidgets: 45
})

App.AboutView = Ember.View.extend({
    numWidgetsBinding: 'App.aboutController.numWidgets',
    templateName: 'about'
})

App.initialize(); 
```

在我的 HTML 中，我只有几个非常简单的模板，名称分别为“application”、“home”和“about”。

因此，这一切都有效，并且看起来与网上流传的所有示例非常相似。伟大的！但是我很困惑，我似乎为我实例化了几件事，而我却没有要求这样做。这个对吗？

例如：

**它是如何创建 ApplicationController 的实例的？**

在 connectOutlets 函数中，它正在寻找一个名为“applicationController”的控制器。我从未创建过任何名为“applicationController”（带有小写“a”）的东西，我只是*扩展*了一个控制器并将其称为“ApplicationController”（带有大写“A”）。为什么这行得通？

**它是如何创建 AboutController 的实例的？**

我在“关于”页面视图和控制器之间做了一个简单的测试绑定。在视图中，我正在绑定变量“App.aboutController.numWidgets”。我从未调用过 App.AboutController.create()。那么如何有一个这样的实例可供我交谈呢？同样，它有一个小写字母（“aboutController”）。我所做的只是*扩展*一个控制器（并用大写字母命名它 - “AboutController”）

稍微解释一下就好了，就像任何普通的开发人员一样，我觉得在你不知道它为什么工作的地方使用代码是疯狂的！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T10:04:06.777

`App.initialize();` does all the instantiation and injection stuff :), based on strong naming conventions: [Ember naming / capitalization convention](https://stackoverflow.com/questions/11129338/ember-naming-capitalization-convention). When you call xxxController.connectOutlet(options), the option has is also conventional, see [Confusion about naming conventions in emberjs](https://stackoverflow.com/questions/11832864/confusion-about-naming-conventions-in-emberjs)

Hope that helps.

EDIT: With the latest master, you don't have to call App.initialize() manually. The application is auto-initialized when all is ready :)

# asp.net - 如何将布尔值设置为 C# 中的 GridView 复选框？

> ID：11843202
> 
> 赞同：0
> 
> 时间：2012-08-07T09:41:47.880
> 
> 标签：asp.net

如何将布尔值设置为 C# 中的 GridView 复选框？

这是我的代码

```
static List<bool> bh = new List<bool>(6);

dt.Columns.Add("Hold");
dr["Hold"] = rem[x].Hold;

bh.Add(Convert.Toboolean((string)dr["Hold"])); 
```

网格视图代码

```
 <Columns>
            <asp:BoundField DataField="RemitID" HeaderText="RemitID" />
            <asp:BoundField DataField="TransferedDate" HeaderText="TransferedDate" />
            <asp:BoundField DataField="ValueDate" HeaderText="ValueDate" />
            <asp:BoundField DataField="RemitterName" HeaderText="RemitterName" />
            <asp:BoundField DataField="BenificiaryName" HeaderText="BenificiaryName" />
            <asp:BoundField DataField="AccountNo" HeaderText="AccountNo" />
            <asp:BoundField DataField="Reference" HeaderText="Reference" />
            <asp:CheckBoxField DataField="Hold" HeaderText="Hold" />
            <asp:CheckBoxField DataField="Reject" HeaderText="Reject" />
            <asp:CheckBoxField DataField="Delete" HeaderText="Delete" />
        </Columns> 
```

这里我使用 List<> 因为必须添加一组数据。没有发生运行时错误，但复选框未显示值.. 谢谢！

# php - 显示更多详细信息的链接

> ID：11843203
> 
> 赞同：0
> 
> 时间：2012-08-07T09:41:58.847
> 
> 标签：php

我一直在尝试在为我最后一年的项目创建的网站上构建一个活动页面。我希望主页事件页面显示带有标题的不太详细的事件列表。事件标题应该用作打开页面的链接，该页面显示用户决定单击或选择的事件的更详细描述。我设法在每个事件标题上创建了一个链接，但似乎无法将其正确链接到显示所选事件详细描述的页面。

**我的 event.php 页面有代码：**

```
<?php
include'session.php';
include"database.php";

//Retrieves data from MySQL 
$data = mysql_query("SELECT * FROM employees") or die(mysql_error()); 
 //Puts it into an array 
 while($info = mysql_fetch_array( $data )) 
 { 

 //Outputs the image and other data
 //Echo "<img src=http://localhost/trial_Admin/events/" .$info['photo'] ."> <br>"; 
 Echo "<b>Name:</b> <a href='more_details.php/?name='$name''/ >".$info['name']. "</a><br>";
 Echo "<b>Email:</b> ".$info['email'] . " <br>"; 
 Echo "<b>Phone:</b> ".$info['phone'] . " <hr>"; 
 }
?> 
```

**还有more_details.php**

```
<?php
include'session.php';
include"database.php";

$name=$_GET['name'];
    //Retrieves data from MySQL 
$data = mysql_query("SELECT * FROM employees WHERE name='$name'") or die(mysql_error()); 

 //Puts it into an array 
 while($info = mysql_fetch_array( $data )) 
 { 

 //Outputs the image and other data
 Echo "<img src=http://localhost/trial_Admin/events/" .$info['photo'] ."> <br>"; 
 Echo "<b>Name:</b> <a href=''/ >".$info['name']. "</a><br>";
 Echo "<b>Email:</b> ".$info['email'] . " <br>"; 
 Echo "<b>Phone:</b> ".$info['phone'] . " <hr>"; 
    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:44:35.730

您应该在数据库中使用事件的 id，因为它是唯一标识符。在您的 events.php 页面中更改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:51:39.590

这里的问题是因为这条线

```
Echo "<b>Name:</b> <a href='more_details.php/?name='$name''/ >".$info['name']. "</a><br>"; 
```

将其更改为

```
Echo "<b>Name:</b> <a href='more_details.php/?name=".urlencode($info['name'])."'/ >".$info['name']. "</a><br>"; 
```

但是使用 ID 会好得多，即具有如下所示的 url

```
Echo "<b>Name:</b> <a href='more_details.php/?id=$info['id']'/ >".$info['name']. "</a><br>"; 
```

# ruby-on-rails - after_commit :on => :destroy 以类似观察者的方式

> ID：11843209
> 
> 赞同：0
> 
> 时间：2012-08-07T09:42:35.840
> 
> 标签：ruby-on-rails, activerecord, callback

我想做以下事情：

```
after_commit :on => :destroy do
  Advert.clean_total_active_cache
end 
```

但以类似观察者的方式：

```
class AdvertObserver < ActiveRecord::Observer
  def after_commit advert
    Advert.clean_total_active_cache
  end
end 
```

这是“：on =>：destroy”，这给我带来了麻烦，我该如何指定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:51:15.023

您可以检查记录是否没有被持久化和冻结：

```
class AdvertObserver < ActiveRecord::Observer
  def after_commit advert
    if not advert.persisted? and advert.frozen?
      Advert.clean_total_active_cache
    end
  end
end 
```

# java - 使用 MessageFormat 的优缺点

> ID：11843214
> 
> 赞同：0
> 
> 时间：2012-08-07T09:43:09.867
> 
> 标签：java, string

是否建议使用`java.text.MessageFormat`对字符串进行操作？或者有什么替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:25:02.010

恕我直言，当您需要在外部（例如通过资源）定义它们时， [MessageFormats特别有用。](http://docs.oracle.com/javase/tutorial/i18n/format/messageFormat.html)

您可以为不同的语言设置不同的 MessageFormat，并且它们可以以适合该语言的不同顺序显示您的字段。

对于最简单的需求，我会使用字符串，`+`例如

```
out.println("Message: " + message+", count: "+ count); 
```

对于更复杂的格式化需求，我会使用字符串格式。

```
put.printf("Percent %6.2f%%, bytes: %,d%n", percent, byteCount); 
```

在您需要能够配置消息格式的地方，我相信 MessageFormat 可能是最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:29:23.493

使用 MessageFormat 的优点是

*   消息格式将来自资源，参数将在运行时动态设置。
*   消息格式 API 是从实际内容中抽象出消息的一般结构的好方法。
*   MessageFormat 获取一组对象，对其进行格式化，然后将格式化的字符串插入到模式中的适当位置

使用 MessageFormat 的缺点是

*   不幸的是，在消息格式模式中使用引号的规则有些令人困惑。

# python - python 2.6打印格式（％）：删除换行符

> ID：11843215
> 
> 赞同：3
> 
> 时间：2012-08-07T09:43:19.440
> 
> 标签：python

我使用 python 2.6 并阅读了许多有关从“打印”中删除新行的链接，但找不到使用示例以及使用模符号 (%) 进行格式化的示例。在我的程序中，我试图在计算数据的循环行中编写，但每行数据来自不同的计算：

```
while 循环
    ... 计算 value1 和 value2
    打印 ('%10d %10s') % (value1, value2) [1]
    ... 计算 value3 和 value4
    打印 ('%7s %15d') % (value3, value4) [2]
    print #这是换行符的来源

```

所以我想得到：

```
值1 值2 值3 值4
价值5 价值6 价值7 价值8
...

```

基本上这种方法保持了我的程序的可读性（每条实线都有超过 20 个计算位置）。相反的方法是将所有数据连接成一个长字符串，但可能会丢失可读性。
是否可以使用 [1] 和 [2] 中的“print () % ()” 语法删除换行符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T09:45:04.613

如果`,`在语句末尾添加逗号 ( )，则将省略换行符：

```
print ('%10d %10s') % (value1, value2), 
```

从[http://docs.python.org/reference/simple_stmts.html#print](http://docs.python.org/reference/simple_stmts.html#print)：

> 一个`'\n'`字符写在末尾，除非`print`语句以逗号结尾。如果语句仅包含关键字，则这是唯一的操作`print`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:45:43.530

```
while loop
    ... calulating value1 and value2
    print '%10d %10s') % (value1, value2) , 
    ... calulating value3 and value4
    print ('%7s %15d') % (value3, value4) ,
    print #this is where newline should come from 
```

注意`,`在最后`prints`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T10:02:22.537

不使用`print`s 尾随逗号（或者，使用 Py3/关键字参数）的唯一方法`from __future__ import print_function`，`end`那么您必须一次完成所有打印 - 即：

```
while ...:
    # calulating value1 and value2
    # calulating value3 and value4
    print '%10d %10s %7s %15d' % (value1, value2, value3, value4) 
```

如果这使可读性成为问题，请考虑将计算逻辑放入函数中，以便您可以执行以下操作：

```
while ...:
    value1 = calculate_value1()
    value2 = calculate_value2()
    value3 = calculate_value3()
    value4 = calculate_value4()
    print '%10d %10s %7s %15d' % (value1, value2, value3, value4) 
```

# c++ - 如何使用对话框参数？

> ID：11843216
> 
> 赞同：1
> 
> 时间：2012-08-07T09:43:19.350
> 
> 标签：c++, windows, winapi, dialog, embedded-resource

我有一个预制的模板资源对话框，我想用`DialogBoxParam`它来显示它，但我在互联网上找不到任何好的例子。该对话框是一个简单的登录对话框，所以有人可以解释如何构建我的`lpDialogFunc`以及放入`dwInitParam`什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T12:46:34.480

You've tagged this question as C++, but havn't specified any particular framework (such as ATL or MFC).

So, in the spirit of providing a c++ / OOP answer to the question, without using a framework, the first thing to do is to create a class to wrap the dialog box, as well as provide a way for the dialog proc to reliably retrieve the pointer to the class. The windows API is a C API and cannot call class members directly so it is necessary to create static methods that can then retrieve the classes `this` pointer from somewhere.

```
class MyDialog {
  HWND _dlg;
public:
  int RunModal(HINSTANCE resModule, UINT resId,HWND parent){
    return DialogBoxParam(resModule,MAKEINTRESOURCE(resId),parent,&StaticDialogProc,(LPARAM)this);
  }
protected:
  static INT_PTR CALLBACK StaticDialogProc(HWND hwndDlg,UINT uMsg,WPARAM wParam,LPARAM lParam){
    MyDialog* self;
    if(uMsg == WM_INITDIALOG){
      self = (MyDialog*)lParam;
      self->_dlg = hwndDlg;
      SetWindowLongPtr(hwndDlg,DWLP_USER,lParam);
    }
    else
      self = (MyDialog*)GetWindowLongPtr(hwndDlg,GWLP_USERDATA);

    if(self)
      return self->DialogProc(uMsg,wParam,lParam);

    return FALSE;
  }

  virtual UINT_PTR DialogProc(UINT uMsg,WPARAM wParam,LPARAM lParam){
    switch(uMsg){
    case WM_INITDIALOG:
      OnInitDialog();
      break;
    case WM_COMMAND:
      OnCommand(LOWORD(wParam),HIWORD(wParam),(HWND)lParam);
      break;
    default:
      return FALSE;
    }
    return TRUE;
  }

  virtual void OnInitDialog(){
  }
  virtual void OnCommand(int id, USHORT notifyCode,HWND control){
    EndDialog(_hdlg,id);
  }
}; 
```

Now, there are hundreds of window messages that Windows can send to a dialog. Add handlers for each message to DialogProc and call a specific virtual function so derived classes can handle the message differently by overriding the virtual.

The critical messages to handle are usually `WM_INITDIALOG` which is sent as soon as the dialog is created, so is an ideal time to initialize any controls on the dialog - to populate drop down controls, or `SetWindowText` to initielize text boxes with default values. and WM_COMMAND, which is sent by controls like buttons, when they are clicked, passing in their id, and this is where you would handle the OK and CANCEL buttons.

Once DialogBoxParam returns, the dialog and all its child controls has been destroyed, so you would typically extract all the input fields in the OnCommand handler and store them in class members before calling `EndDialog`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-13T08:41:05.210

问题第二部分的另一个用例：“要放入什么`dwInitParam`”？

如果您更喜欢 OO 编程并且不想为您的对话框使用全局范围，您可以传递`this`给形参`dwInitParam`。

**获取指向调用者的指针**：

```
template< typename CallerT >
inline CallerT *GetDialogCaller(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam) {

    if (WM_INITDIALOG != uMsg) {
        // Retrieves information about the specified window.
        // 1\. A handle to the window and, indirectly, the class to which the window belongs.
        // 2\. Retrieves the user data associated with the window.
        return reinterpret_cast< CallerT * >(GetWindowLongPtr(hwndDlg, GWLP_USERDATA));
    }

    CallerT * const caller = reinterpret_cast< CallerT * >(lParam);

    // Changes an attribute of the specified window.
    // 1\. A handle to the window and, indirectly, the class to which the window belongs.
    // 2\. Sets the user data associated with the window.
    // 3\. The replacement value.
    SetWindowLongPtr(hwndDlg, GWLP_USERDATA, reinterpret_cast< LONG_PTR >(caller));

    return caller;
} 
```

**将消息委托给调用者**：

```
class Widget {

public:

    static INT_PTR CALLBACK DialogProcDelegate(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam) {

        // Retrieve a pointer to the instance of Widget
        // that called DialogBoxParam.
        Widget * const widget = GetDialogCaller< Widget>(hwndDlg, uMsg, wParam, lParam);

        // Delegate the message handling.
        return widget->DialogProc(hwndDlg, uMsg, wParam, lParam);
    }

    INT_PTR Show() const {
        return DialogBoxParam(nullptr, MAKEINTRESOURCE(IDD_WIDGET_SETTINGS), nullptr, DialogProcDelegate, reinterpret_cast< LPARAM >(this));
    }

private:

    INT_PTR DialogProc(HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam) {

        // Note that this method is not affected by our approach,
        // i.e. this method will still receive a WM_INITDIALOG.
        switch (uMsg) {
            ...
        }

        return FALSE;
    }
}; 
```

另一种方法是将调用者置于全局范围内，并限制为所有对话框的单个调用者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T09:52:33.833

你可以做这样的事情。dwInitParam 在 WM_INITDIALOG 消息的 lParam 参数中指定要传递给对话框的值。您可以传递任何值或简单地传递 NULL

```
INT_PTR CALLBACK editDlg(HWND hwnd,UINT msg,WPARAM wParam,LPARAM lParam) {

        switch (msg) {
            case WM_INITDIALOG:                  
                return 1;
            break;
        }
        return 0;
    }

if(DialogBoxParam(hInst,MAKEINTRESOURCE(IDD_EDIT),hwndMain,editDlg,NULL)==IDOK) 
{
} 
```

# actionscript-3 - 如何扩展加载的 swf 中的类

> ID：11843217
> 
> 赞同：2
> 
> 时间：2012-08-07T09:43:21.223
> 
> 标签：actionscript-3, flash

我已经使用加载器组件在我的应用程序外部加载了一个 swf。它被加载到我的加载器的应用程序域中。我在那个 swf 中有一个类，我想从中扩展和覆盖一些函数。有可能吗？这是一些解释我想要的代码（当然，它是完全不正确的并且不起作用）：

```
public var ClassFromLoadedSwf:Class = ApplicationDomain.currentDomain.getDefinition("path.to.needed.class") as Class;
public class MyClass extends ClassFromLoadedSwf
{
    override protected function initMovie() : void
    {
         //function logic goes here
    }
} 
```

谢谢你的回答，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T12:14:37.937

不，你不能。基本上你不明白 的意思`ApplicationDomain`。使用加载器和应用程序域，您只需在运行时将一些代码合并到您的 SWF。在它到达运行时状态之前，它不能被访问。所以在编译时你不能做你现在想做的事情。但是您可以尝试使用 SWC 而不是 SWF。您只需将其包含在您的项目库中即可。您将能够在编译时访问所有类。尝试阅读这篇[文章](http://www.adobe.com/devnet/flash/articles/combine-swfs-with-swcs.html)。它将帮助您理解 SWC 的含义。

# javascript - 如何设置 jQuery 微调器最大值和最小值？

> ID：11843219
> 
> 赞同：6
> 
> 时间：2012-08-07T09:43:27.680
> 
> 标签：javascript, jquery, ajax, spinner

我遇到了下一个问题：我正在使用 jQuery + ajax，我希望在从服务器获取数据后设置微调器的最大值和最小值。但实际情况是，当我用萤火虫检查元素时，它说设置了最大值和最小值，而实际上它们没有设置，所以没有最大值和最小值。这是一些代码：

```
...
<input type="number" id ="spinId" name="someName" step="0.5" />
...
$("#spinId").attr('min', 0.0);
$("#spinId").attr('max', parseFloat($('.someClass').text()));
... 
```

这个 .someClass 是通过 ajax 形成的。我还注意到值设置正确，即`$('#spinId').attr('value',ValueFromServer);`工作正常。那么我该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T10:21:33.533

`min`和`max`值是在创建微调器时设置的。要即时更改它们，请使用以下命令：

```
// given a 'data' object from AJAX with keys 'min' and 'max':
$('#spinId').spinner('option', 'min', data.min);
$('#spinId').spinner('option', 'max', data.max); 
```

还要记住，该[`.attr()`函数](http://api.jquery.com/attr/)只能用于获取和设置 DOM 元素的属性。例如，您可以使用它来获取或设置元素的`id`a`<div>`或 the 。大多数 jQuery 插件将其配置保存在 JavaScript 变量中。如果他们确实将配置附加到 DOM，他们使用.`href``<a>`[`.data()`](http://api.jquery.com/data/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T10:29:12.340

您还可以直接在不同的微调器上设置选项，而不会影响默认值。这是工作示例：http: [//jsfiddle.net/7xj7K/4/](http://jsfiddle.net/7xj7K/4/)

```
// give two different inputs different options without changing jquery spinner defaults
$("#spinId").spinner({min: 0, max: 10});
$("#spinId_two").spinner({min: -3, max: 53}); 
```

正如您在 jsfiddle 上看到的，jQuery 微调器在单击输入右侧的按钮时强制执行最小/最大值存在一些问题。该值可以超过最小/最大值，但一旦用户从该字段模糊就会验证。使用键盘向上/向下箭头时验证工作得很好，所以插件的作者似乎还有改进的空间。

# android - Android中录制的wav文件的快速傅里叶变换

> ID：11843221
> 
> 赞同：1
> 
> 时间：2012-08-07T09:43:34.260
> 
> 标签：android, fft, wav, analysis

SD卡上有一个wav文件。首先，我连接到一个文件并读取字节：

```
File file = null;file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/202.wav");
       byte[] byteData = new byte[(int) file.length()];
       FileInputStream in = null;
       try {
       in = new FileInputStream( file );
       in.read( byteData );
       in.close();} 
```

然后我使用 double 类型的字节类型的数据转换，因为 FFT 过程不适用于字节类型：

```
double[] transformed = new double[(int) file.length()];
      for (int j=1;j<8194;j++) {
              transformed[j] = (double)byteData[j]; } 
```

然后是 FFT 处理这些数据的过程：

```
public void spektr(double[] x, double[] y, int Dim, int D, double[] xx, double[] yy) {

     int I,J,N,L,K,LE,LE1,IP,NV2,NM1;
     double Arg,U1,U2,U3,C,S,T1,T2,T3,T4;

     N = (int) Math.pow(2,Dim);
     Log.v("N", "N "+N);
     for (L = 1; L < Dim; L++){
      LE = (int) Math.pow(2,Dim+1-L);
      LE1 = LE/2;
      U1 = (double)1.0;
      U2 = (double)0.0;
      Arg = (double)Math.PI/LE1;
      C = (double)Math.cos(Arg);
      S = D*(double)Math.sin(Arg);
      for(J = 1; J < LE1; J++){
       I = J;
       do{
            IP = I+LE1;
            T1 = x[I] + x[IP];
            T2 = y[I] + y[IP];
            T3 = x[I] - x[IP];
            T4 = y[I] - y[IP];
            x[IP] = T3*U1 - T4*U2;
            y[IP] = T4*U1 + T3*U2;
            x[I] = T1;
            y[I] = T2;
            I = I + LE;
       }while(I <= N);
       U3 = U1*C - U2*S;
       U2 = U2*C - U1*S;
       U1 = U3;
      }

     }

     NV2 = N / 2;
     Log.v("NV2", "NV2 "+NV2);
     NM1 = N-1;
     Log.v("NM1", "NM1 "+NM1);
     J = 1;
     for(I = 1; I < NM1; I++){
      if (I < J){
       T1 = x[J];
       T2 = y[J];
       x[J] = x[I];
       y[J] = y[I];
       x[I] = T1;
       y[I] = T2;
      }
      K = NV2;
      while (K < J){
       J = J - K;
       K = K / 2;
      };

      J = J + K;
     }

     for(I = 1; I < N; I++){
      x[I] = x[I] / N*2;
      y[I] = y[I] / N*2;

     }
        for(I = 1; I < N; I++){

      xx[I] = x[I];
      yy[I] = y[I];

     }

     xx[1] = (double)0.0;
    } 
```

成功读取文件，但 FFT 的处理程序不工作。如何找到 FFT 过程，或者给出检查 FFT 结果的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:26:30.437

[这是一些在 java 中进行 FFT 的免费库](https://sites.google.com/site/piotrwendykier/software/jtransforms)。

# android - 卸载应用程序时从 SDCARD 中删除文件夹

> ID：11843222
> 
> 赞同：1
> 
> 时间：2012-08-07T09:43:39.917
> 
> 标签：android, directory, uninstallation, android-sdcard

在这里，我创建了一个 Android 应用程序，它从 Web 下载图像并将图像存储在 SDCARD 上的文件夹中。当我卸载我的 Android 应用程序时，我想删除该图像文件夹。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:47:17.193

不要使用 SDCard 上的任意位置，而是使用推荐的外部存储目录，您可以通过调用以下方式获取指向此目录的文件链接：

```
getExternalStorageDirectory() 
```

当您的应用程序被卸载时，它会自动删除。

我在下面添加了一个在外部存储目录中创建新文件的示例：

```
String baseDir = Environment.getExternalStorageDirectory().getAbsolutePath(); 
String fileName = "file.txt"; 
File f = new File(baseDir + "/" + fileName); 
```

# c++ - 在 C++ 中将字符串乘以 int

> ID：11843226
> 
> 赞同：15
> 
> 时间：2012-08-07T09:44:00.460
> 
> 标签：c++, string, integer, cout, multiplication

我该怎么做，这样当我

```
string s = "."; 
```

如果我做

```
cout << s * 2; 
```

会不会一样

```
cout << ".."; 
```

?

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-07T11:18:43.403

std::string 具有形式为的构造函数

```
std::string(size_type count, char c); 
```

这将重复字符。例如

```
#include <iostream>

int main() {
   std::string stuff(2, '.');
   std::cout << stuff << std::endl;
   return 0;
} 
```

将输出

```
.. 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-07T09:45:13.630

不，`std::string`没有`operator *`。您可以将 (char, string) 添加到其他字符串。看看这个[http://en.cppreference.com/w/cpp/string/basic_string](http://en.cppreference.com/w/cpp/string/basic_string)

如果你想要这种行为（没有建议）你可以使用这样的东西

```
#include <iostream>
#include <string>

template<typename Char, typename Traits, typename Allocator>
std::basic_string<Char, Traits, Allocator> operator *
(const std::basic_string<Char, Traits, Allocator> s, size_t n)
{
   std::basic_string<Char, Traits, Allocator> tmp = s;
   for (size_t i = 0; i < n; ++i)
   {
      tmp += s;
   }
   return tmp;
}

template<typename Char, typename Traits, typename Allocator>
std::basic_string<Char, Traits, Allocator> operator *
(size_t n, const std::basic_string<Char, Traits, Allocator>& s)
{
   return s * n;
}

int main()
{
   std::string s = "a";
   std::cout << s * 5 << std::endl;
   std::cout << 5 * s << std::endl;
   std::wstring ws = L"a";
   std::wcout << ws * 5 << std::endl;
   std::wcout << 5 * ws << std::endl;
} 
```

[http://liveworkspace.org/code/52f7877b88cd0fba4622fab885907313](http://liveworkspace.org/code/52f7877b88cd0fba4622fab885907313)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2020-06-22T18:15:21.983

我在 C++ 中使用运算符重载来模拟这种行为。

```
#include <iostream>
#include <string>
using namespace std;

/* Overloading * operator */
string operator * (string a, unsigned int b) {
    string output = "";
    while (b--) {
        output += a;
    }
    return output;
}

int main() {
    string str = "abc";
    cout << (str * 2);
    return 0;
} 
```

> 输出：abcabc

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-07T11:09:24.213

没有预定义`*`的运算符可以将字符串乘以`int`，但您可以定义自己的：

```
#include <iostream>
#include <sstream>
#include <string>

using namespace std;

string operator*(const string& s, unsigned int n) {
    stringstream out;
    while (n--)
        out << s;
    return out.str();
}

string operator*(unsigned int n, const string& s) { return s * n; }

int main(int, char **) {
    string s = ".";
    cout << s * 3 << endl;
    cout << 3 * s << endl;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-07T09:48:43.857

字符串不能相乘。

如果 s 是一个字符

```
'.'     // This has ASCII code 46 
```

然后

```
cout << (char)((int)s * 2); 
```

会给你

```
'/'     // This has ASCII code 92 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-07T11:09:53.823

它们不能被倍增，但我认为您可以编写自己的函数来执行此操作，例如-

```
#include <iostream>
#include <string>

std::string operator*(std::string s, size_t count)
{
    std::string ret;
    for(size_t i = 0; i < count; ++i)
    {
        ret = ret + s;
    }
    return ret;
}

int main()
{
    std::string data = "+";
    std::cout << data * 10 << "\n";
} 
```

不过，这可能不是最好的主意，对于任何查看代码并且没有预料到这一点的人来说，这将是非常令人困惑的，

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-17T00:09:53.477

你可以这样做：

```
#include <iostream>
using namespace std;

int main()
{
    string text, new_text;
    int multiply_number;

    cin >> text >> multiply_number;

    /*
        First time in the 'for' loop:  new_text = new_text + text
                                       new_text = "" + "your text"
                                       new_text = "your text"

        Second time in the 'for' loop: new_text = new_text + text
                                       new_text = "your text" + "your text"
                                       new_text = "your textyour text"...n times
    */

    for(int i=0; i<multiply_number; i++)
    {
        new_text += text;
    }

    cout << new_text << endl;    // endl="\n"

    system("pause");
    return 0;
} 
```

在 Python 中，您可以像这样乘以字符串：

```
text = "(Your text)"
print(text*200) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-18T15:18:14.603

```
std::string StrMultiply(const char* str, size_t count) {
        size_t stringsize = strlen(str);
        size_t buffersize = stringsize * count + 1;
        string res(buffersize,'\0');
        char* end = res._Unchecked_end();
        char* offset = res._Unchecked_begin();
        for (size_t i = 0;i < count; offset += stringsize,i++)
        {
            memcpy(offset, str, stringsize);
        }
        // mark the end
        res[buffersize - 1] = '\0';
        return res;
    }
        inline std::string operator*(std::string left, size_t right) {
            return StrMultiply(left.c_str(), right);
        } 
```

这是一个 ram 友好的解决方案，比使用 stringstreams 或 string::append 快 10 倍

# jsf - FacesComponent 的生命周期

> ID：11843230
> 
> 赞同：2
> 
> 时间：2012-08-07T09:44:10.990
> 
> 标签：jsf

我只是声明了一个简单的 FacesComponent 以将它与复合组件一起使用。

```
@FacesComponent("fc/myFacesComponent")
public class MyFacesComponent extends UINamingContainer {
   ...
} 
```

现在我问自己，FacesComponent 注解类的生命周期是多久？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:08:38.753

组件本身将从初始构建视图（JSF 生命周期的第一阶段）一直持续到第二次构建组件树的渲染视图阶段。但我想知道你是否真的想问别的。也许关于托管bean的生命周期？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-20T07:24:15.260

@FacesComponent("fc/myFacesComponent") 生命周期是 Reuest Scope，我们无法更改它。

如果您愿意，您可以在其中注入 beans(Session) 并获取状态并将其显示给组件。

支持 bean 要么是 JSF 管理的 bean，要么是 CDI Weld Bean。

谢谢，肉山

# scala - 使用 Trait 覆盖 Scala Map 的 Add 方法

> ID：11843232
> 
> 赞同：2
> 
> 时间：2012-08-07T09:44:12.793
> 
> 标签：scala, map, traits

给定 Scala 中的 Map[String, Int]，我想创建一个特征，允许我向 add 和 get 方法添加额外的逻辑。这样做的正确语法是什么？（注意：我也想在每种情况下调用 super 方法）

我试过类似的东西：

```
var mymap: Map[String, Int] with mytrait[String, Int] = Map[String, Int]()

trait mytrait[A, B] {

    abstract override def +[ B1 >: B] (kv: (A, B1)) : Map[A, B1] = { /* ... */ }

} 
```

但是解释器抱怨所以我显然在语法上遗漏了一些东西，特别是在使用类型参数时。

非常感谢您的帮助

更具体地说：我所拥有的是我的代码中已经存在的映射，因此我不想重写我的程序的大块，而是想向 Map 的 + 方法和 get 方法添加逻辑，以便它执行额外的逻辑每次将项目添加到程序中其他地方的地图时。因此，为什么我选择了一个 trait 来为地图添加功能

这是我目前的代码：

```
 trait RegManager[A, B] extends scala.collection.Map[A, B] {
    case class KeyAlreadyExistsException(e: String) extends Exception(e)

    abstract override def + [B1 >: B] (kv: (A, B1)): scala.collection.Map[A, B1] = {

        super.+[B1](kv)
    }

    abstract override def get(key: A): Option[B] = super.get(key)
    abstract override def iterator: Iterator[(A, B)] = super.iterator
    abstract override def -(key: A): scala.collection.Map[A, B] = super.-(key)
}

var regs = new scala.collection.Map[String, Int] with RegManager[String, Int] 
```

**更新：** 最后我选择了完成工作的包装器样式实现（装饰器 DP）。我的 Scala 职业生涯只有 6 个月，所以我可能还没有正确理解特征的能力？！不过语言很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:50:50.730

要么`MyTrait[A,B] extends Map[A,B]`_`MyTrait[A,B] {this: Map[A,B] => ...`

* * *

抱歉，实际上您不太可能以这种方式进行工作。

我的回答的第一部分与您的 MyTrait 声明没有引用 Map 的事实有关，因此它不可能覆盖 Map 的 +。你需要类似的东西

```
trait MyTrait[A,B] extends Map[A,B] {
  abstract override def +[B1 >: B](kv: (A, B1)) : Map[A, B1] = {
    println("adding to map") // this is the new part
    super.+(kv) 
   }
} 
```

然而，这不会让你走得太远，原因有很多：

在声明中

```
var mymap: Map[String, Int] with mytrait[String, Int] = Map[String, Int]() 
```

该值`Map[String, Int]()`具有类型 Map 并且与您的特征无关。`mymap`声明类型的变量`Map with mytrait`不会如此。它只会阻止它编译。

MyTrait 必须出现在地图的创建中，而不仅仅是在变量的类型声明中。那将类似于`new Map[A,B] with MyTrait[A,B]` （注意`new`）。

然而，`Map`是一个特征，而不是一个具体的类，所以你必须引入一些具体的实现。如果您设法做到这一点，那么您必须小心 + 返回的新地图也混合了 MyTrait 类型（当然，您的具体实现不太可能这样做）。否则，一旦您添加了一个元素，您将返回到没有 MyTrait 的地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:43:50.317

您不能将特征添加到现有对象。Trait 不能动态添加，只能在创建对象时添加。您可以：

1.  按照问题评论中的建议，使用[pimp your library pattern 。](https://stackoverflow.com/questions/1913591/understanding-why-pimp-my-library-was-defined-that-way-in-scala)但是，在这种情况下，您不能使用相同`+`的方法，您需要使用自己的方法名称。
2.  手动包装您的地图，以便您仍然可以`+`用作方法名称。
3.  创建对象的副本并向其添加特征。它可能会导致性能问题，尤其是在原始地图很大的情况下。

# android - 如何在android中否定位图？

> ID：11843235
> 
> 赞同：0
> 
> 时间：2012-08-07T09:44:15.607
> 
> 标签：android, image

我想通过使用位图来显示 dicom 图像的负片，我这样做了

```
public static Bitmap getNegativeImage(Bitmap img) {
            int w1 = img.getWidth();
            int h1 = img.getHeight();
            // int value[][] = new int[w1][h1];
            Bitmap gray = Bitmap.createBitmap(
                    w1, h1, img.getConfig());
            int value, alpha, r, g, b;
            for (int i = 0; i < w1; i++) {
                for (int j = 0; j < h1; j++) {
                    value = img.getPixel(i, j); // store value

                    alpha = getAlpha(value);
                    r = 255 - getRed(value);
                    g = 255 - getGreen(value);
                    b = 255 - getBlue(value);

                    value = createRGB(alpha, r, g, b);
                    gray.setPixel(i, j, value);
                }
            }
            return gray;
        }

        public static int createRGB(int alpha, int r, int g, int b) {
            int rgb = (alpha << 24) + (r << 16) + (g << 8) + b;
            return rgb;
        }

        public static int getAlpha(int rgb) {
            return (rgb >> 24) & 0xFF;
        }

        public static int getRed(int rgb) {
            return (rgb >> 16) & 0xFF;
        }

        public static int getGreen(int rgb) {
            return (rgb >> 8) & 0xFF;
        }

        public static int getBlue(int rgb) {
            return rgb & 0xFF;
        } 
```

但是反转（负）图像变黑，再次单击时会出现原始图像但不显示反转图像。

问候沙迪亚 UM

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T10:38:48.040

我不明白为什么您的代码不起作用，但这应该：

```
private static final int RGB_MASK = 0x00FFFFFF;

public Bitmap invert(Bitmap original) {
    // Create mutable Bitmap to invert, argument true makes it mutable
    Bitmap inversion = original.copy(Config.ARGB_8888, true);

    // Get info about Bitmap
    int width = inversion.getWidth();
    int height = inversion.getHeight();
    int pixels = width * height;

    // Get original pixels
    int[] pixel = new int[pixels];
    inversion.getPixels(pixel, 0, width, 0, 0, width, height);

    // Modify pixels
    for (int i = 0; i < pixels; i++)
        pixel[i] ^= RGB_MASK;
    inversion.setPixels(pixel, 0, width, 0, 0, width, height);

    // Return inverted Bitmap
    return inversion;
} 
```

它创建位图的*可变*副本（并非所有位图都是），反转所有像素的 rgb 部分，保持 alpha 不变

**编辑** 我知道你的代码为什么不起作用：你假设像素是 AARRGGBB

# css - CSS3动画，每帧都有不同的图像

> ID：11843236
> 
> 赞同：4
> 
> 时间：2012-08-07T09:44:17.500
> 
> 标签：css, css-transitions, css-animations, ibooks

我正在尝试执行 CSS 动画，其中循环播放许多图像。我很欣赏通常会使用精灵（并且可以使用此代码），但是由于我希望在 iBooks 中使用此动画，因此我必须对每张图像保持 200 万像素的限制，因此我使用的是单独的图像。因此，我尝试使用以下 CSS，但没有成功：

```
#sprite {
    width: 200px;
    height: 170px;
    background:url('../Images/monkey1small.png') 0 0;

    -webkit-animation-duration:4000ms;
    -webkit-animation-iteration-count:infinite;
    -webkit-animation-timing-function:linear;
    -webkit-animation-name:animate01;
    -webkit-animation-direction:forward;

    -moz-animation-duration:1ms;
    -moz-animation-iteration-count:infinite;
    -moz-animation-timing-function:step-start;
    -moz-animation-name:animate01;
}
@-webkit-keyframes animate01 {
0%           { background:url('../Images/monkey1small.png') 0 0; }
20%          { background:url('../Images/monkey2small.png') 0 0; }
40%          { background:url('../Images/monkey3small.png') 0 0; }
60%          { background:url('../Images/monkey4small.png') 0 0; }
80%          { background:url('../Images/monkey5small.png') 0 0; }
100%         { background:url('../Images/monkey1small.png') 0 0; }
}
@-moz-keyframes animate01 {
0%           { background:url('../Images/monkey1small.png') 0 0; }
20%          { background:url('../Images/monkey2small.png') 0 0; }
40%          { background:url('../Images/monkey3small.png') 0 0; }
60%          { background:url('../Images/monkey4small.png') 0 0; }
80%          { background:url('../Images/monkey5small.png') 0 0; }
100%         { background:url('../Images/monkey1small.png') 0 0; }
} 
```

它用一个简单的 div 调用：

目前它只是静态显示第一张图像。我可以将其他 css 属性添加到框架中，它会为这些属性设置动画，但是尝试更改背景 url，如上面的代码所示，不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:02:18.017

您发布的内容在 Chrome 和 Safari (http://jsfiddle.net/4rAer/) 中运行良好，但在 Firefox 中不起作用。它在 Firefox 中消失的地方是包含背景图像。您可以在 Firefox 中为背景设置动画 - 但只能设置背景颜色。但是，如果这仅适用于 iBooks，则无关紧要。我假设动画在 iBooks 中也不起作用。

这个小提琴有一个幻灯片，应该有更好的支持。它确实需要一些额外的 HTML，但我对 Top 属性进行动画处理得到了广泛的支持。[http://jsfiddle.net/4rAer/1/](http://jsfiddle.net/4rAer/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T17:01:26.690

见这里： [http ://chrismar.sh/2011/07/19/animating-sprites-using-css/](http://chrismar.sh/2011/07/19/animating-sprites-using-css/)

不要动画`background-image`属性，做`background-position`一个！

# entity-framework-4 - 复合键的 EF 映射

> ID：11843237
> 
> 赞同：0
> 
> 时间：2012-08-07T09:44:23.717
> 
> 标签：entity-framework-4

```
public class MyConfiguration : EntityTypeConfiguration<MyCode>
{
  public MyConfiguration()
  {
    HasKey(c => new { c.MyCodeId, c.EffectiveDateFrom, c.EffectiveDateTo });
    Property(c => c.MyCodeId).HasColumnName("MyCode");
    Property(c => c.EffectiveDateFrom).HasColumnName("MyEffectiveDateFrom");
    Property(c => c.EffectiveDateTo).HasColumnName("MyEffectiveDateTo");

    ToTable("My_CODES");

    HasMany(d => d.MyGroups).WithRequired().HasForeignKey(k => k.MyCodeID);
  }
} 
```

这是我在 EF4 中的配置类。

我已经定义了类型的“MyGroups”属性`IList<MyGroup>`。

“MyGroup”类没有“EffectiveDateFrom”和“EffectiveDateTo”属性。

抛出异常后的运行时：

> System.Data.Edm.EdmAssociationConstraint：关系约束中的从属角色和主体角色中的属性数量必须相同。

查询：
当父表中使用的所有列在子表中都不可用时，如何在 EF4 中创建这种映射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:31:50.753

您无法创建此类映射，因为它无效。依赖实体的外键必须包含在主体实体中定义的复合主键的所有组件。

# facebook - 站点 URL 被阻止为“垃圾邮件”，但在调试中也没有数据被抓取

> ID：11843242
> 
> 赞同：0
> 
> 时间：2012-08-07T09:44:39.287
> 
> 标签：facebook, parsing, facebook-graph-api, blocked

为我的一个拥有小企业的客户制作了一个网站。大约三个月前，她的网站 URL 因“垃圾邮件”而被​​ Facebook 封锁。我们发起了一个令人印象深刻的“去这里报告它是安全的”活动，但遗憾的是，它并没有畅通无阻。

我们创建了一个新域来镜像被阻止的域。这工作了大约一个小时。然后你瞧！也被屏蔽了。

我很好奇，所以我决定试试“对象调试器”。当我这样做时，我收到了这条消息：

“解析 URL 时出错：解析输入 URL 时出错，没有数据被抓取。”

几个小时后我又试了一次，它刮得很好！它不仅在调试中完美地抓取并显示出来，而且当我发布到我的墙上时它也没有被阻塞！这是惊人的。

可悲的是，我对头文件进行了编辑（只是去掉了一个元标记），现在它不会再刮了。而且又被封了。

有问题的 URL 是 enchantedcareers.com。

我觉得也许该网站没有被阻止为垃圾邮件，而是可能存在某种编码问题？其他任何人都有一个 OG 错误 ping 一个 URL，因为链接 shim 被阻止了？

**编辑：**再次，它让我发布链接，完整预览和所有内容。我发布了它，大约一分钟后，该帖子被删除了，它又回到了“垃圾邮件”的状态。 URL 调试器只是偶尔抓取我的 URL（没有进行任何页面编辑）。

我找不到模式。

*   没有数据被抓取：9:06

*   成功抓取：9:34

*   没有数据被抓取：9:44

*   抓取成功：10:04

*   没有数据被抓取：10:08

**编辑#2：**这简直太疯狂了。我们的新域 enchantedcareers.net 只是我主机的默认 quickstart.html 页面，也被禁止发布。当我尝试发布 .net 域时，它给我的 .net 和 .com 域都被阻止了。

.COM 域甚至没有绑定到 .NET 名称。这个域是开箱即用的。为什么当我尝试发布一个新域时它会启动该域？

我只是很困惑。

它也不会刮掉 .net 名称。

这可能是服务器的事情......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:05:39.123

您的 URI 在 URIBL 检查中是干净的，您在 Dream Host 上，这通常是可靠的，所以我不希望在 DNSBL 检查中看到您的 IP 地址。我在您的页面代码中没有看到任何明显的错误，这些错误通常会导致 Facebook 解析器阻塞。

根据[这份报告](http://www.UnmaskParasites.com/security-report/?page=enchantedcareers.com)，您的页面上有一个“可疑”脚本。尝试删除它，清除缓存并查看 Facebook 是否会解析您的 URL。

# jsf - 如何阻止弹出窗口隐藏在 IE 中的嵌入对象后面

> ID：11843243
> 
> 赞同：1
> 
> 时间：2012-08-07T09:44:40.440
> 
> 标签：jsf, popup, richfaces, embed

要重现问题，请将 pupup 移到 pdf 前面并尝试调整它的大小。在 IE（在 8 和 9 上测试）弹出部分隐藏在 pdf 后面。在 Firefox 和 Chrome 中一切正常。

```
<h:body>
        <h:form>
            <iframe id="overviewFrame" src="http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/pdf/richfaces_reference.pdf" width="900" height="800" />          
            <h:commandButton value="openPopupWithPdf">
                <rich:componentControl target="pdfPopup" operation="show" />
            </h:commandButton>
        </h:form>
        <h:form>
            <rich:popupPanel autosized="false" id="pdfPopup" resizeable="true" width="300" height="100" moveable="true" overlapEmbedObjects="true">
                <f:facet name="controls">
                    <a4j:commandLink id="documentHideEditLink" styleClass="hidelink" onclick="#{rich:component('pdfPopup')}.hide()" execute="@this">
                        <h:graphicImage value="/img/modal/close.png" />
                    </a4j:commandLink>
                </f:facet>
                <f:facet name="header">
                    This is popup header
                </f:facet>   
                <h:panelGrid>
                    Some text
                </h:panelGrid>
            </rich:popupPanel>
        </h:form>
    </h:body> 
```

如果我使用 a4j:mediaOutput 而不是 iframe，也是一样。

# vb.net - listView.SortKey = ColumnHeader.Index - 1

> ID：11843244
> 
> 赞同：2
> 
> 时间：2012-08-07T09:44:42.057
> 
> 标签：vb.net, vb6, vb.net-2010, vb6-migration

我正在将 VB 转换为 VB.NET，我发现了两个我不知道如何解决的错误

```
listView.SortKey = ColumnHeader.Index - 1

listView.Sorted = False 
```

我知道`SortKey`正在获取`column index`排序并 `listView.Sorted` 设置关闭或排序。

但是 vb.net 中的代码如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:36:38.913

您可以使用`ListView1.Sorting = SortOrder.None`关闭排序。

要对特定列进行排序，您可以使用 ListViewItemSorter

[http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.listviewitemsorter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.listviewitemsorter.aspx)

但是，当您将自定义排序类分配给 .ListViewItemSorter 时，您无法禁用排序。您必须分配一个新的 ListView1.ListViewItemSorter = Nothing 并设置 SortOrder.None。

# android - Android 广播自己的消息

> ID：11843246
> 
> 赞同：0
> 
> 时间：2012-08-07T09:44:48.647
> 
> 标签：android, service, broadcastreceiver, broadcast

是否可以从后台运行的任何服务广播任何消息，以便来自该应用程序或任何其他应用程序的任何广播接收器都可以接收消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:53:20.543

我不这么认为。该服务应发送特定消息，并且只有侦听该消息的应用程序才会拦截它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:01:53.397

广播接收器必须有一些过滤器，如果您的广播未设置此过滤器，您的广播将不会接收广播。

因此，如果您想向所有广播接收器发送一些消息，那么它们都应该具有相同的过滤器属性，但它们是不必要的。

有关更多详细信息，请参阅文档。

> 当您使用 sendBroadcast(Intent) 或相关方法时，通常任何其他应用程序都可以接收这些广播。您可以通过下述权限控制谁可以接收此类广播。-> [http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

# session - ColdFusion 会话与 J2EE 会话

> ID：11843252
> 
> 赞同：6
> 
> 时间：2012-08-07T09:45:05.780
> 
> 标签：session, jakarta-ee, coldfusion

ColdFusion 会话与 J2EE 会话相比有什么好处吗？

[ColdFusion 会话文档](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec22c24-7c48.html)提到了 J2EE 会话的好处，但没有提到 ColdFusion 会话的任何优点。J2EE 会话自 ColdFusion MX（2002 年发布）以来一直可用，但仍有很多人使用标准的 ColdFusion 会话。J2EE 会话是否存在 ColdFusion 会话不存在的任何缺点？

> J2EE 会话管理与 ColdFusion 会话管理相比具有以下优势：
> 
> *   J2EE 会话管理使用特定于会话的会话标识符 ，`jsessionid`它是在每个会话开始时重新创建的。
> *   您可以在 ColdFusion 页面和从 ColdFusion 页面调用的 JSP 页面或 Java servlet 之间共享会话变量。
> *   Session 作用域是可序列化的（可转换为字节序列，以后可以完全恢复为原始对象）。使用 ColdFusion 会话管理，会话范围是不可序列化的。只有可序列化的范围可以在服务器之间共享。
> 
> 因此，请考虑在以下任何情况下使用 J2EE 会话管理：
> 
> *   您希望最大限度地提高会话安全性，特别是如果您还使用客户端变量
> *   您希望在单个应用程序中的 ColdFusion 页面和 JSP 页面或 servlet 之间共享会话变量。
> *   您希望能够手动终止会话，同时维护客户端标识 cookie 以供客户端范围使用。
> *   你想支持集群会话；例如，支持服务器之间的会话故障转移。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:27:18.133

使用 Java EE 会话 cookie 没有严重的缺点，并且使用它们有一些优点，如您的问题中所述。

Java EE 令牌的一个缺点是无法以编程方式轻松修改 cookie。CF 代币可以。您可以将 CF 令牌修改为仅限会话。您还可以将它们修改为仅 SSL 和 httpOnly。

您也可以使 Java EE 令牌仅 SSL 和 httpOnly，但它涉及 JVM 参数。

在 CF9 中，Adobe 还改进了 CF 令牌的随机性，使其更接近 Java EE 令牌。

我真的认为您使用哪一个并不重要（假设您使用的是 CF9 或更高版本）。但是 Java EE 令牌最接近开箱即用的安全工作。但是，如果您想超越仅将 cookie 设置为“仅会话”并且让它们成为仅 SSL 和 httpOnly，您将需要深入研究 JVM 设置。您不能在 App.cfc 中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:28:14.463

CF 原生会话不使用会话 cookie，因此可以在浏览器/机器重启后持续存在，而所有 Java EE 服务器默认使用会话 cookie，因此您的会话只能在浏览器打开时持续。

我找不到在 Servlet JSR 中指定此行为的位置，但在 Servlet Spec 3.0（即不是 JRun）中，您可以为 Java EE 会话 cookie 设置到期日期，以模仿 CF 本机会话行为。

正如 nosilleg 所提到的，这可能是一个好处，但也可能被视为一个安全问题，具体取决于您正在处理的应用程序的安全要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T22:24:11.797

ColdFusion 中 J2EE 会话变量的主要缺点之一是诸如使它们成为[“安全”cookie](http://www.petefreitag.com/item/740.cfm)之类的更改发生在实例范围内。

这意味着在该实例上运行的每个站点都必须在 https 下运行，包括 ColdFusion 管理员本身。对于托管多个需要会话的站点的服务器，这通常是有问题的。此外，如果您从内置 Web 服务器运行 ColdFusion 管理员，则需要一些过程才能使其在 ssl 下运行。

如果您需要 J2EE cookie 的记录优势，并且需要 cookie 是安全的，那么所有需要会话的站点都必须在 https 上。

如果您不需要 J2EE cookie 的任何记录优势，并且您正在运行 CF9 或更高版本，那么您最好使用 ColdFusion cookie。

请注意，Railo 仍然存在相同的问题，但具有更大的灵活性，因为`cfapplication`标签具有一个`sessiontype`属性，您可以在其中选择基于每个站点的会话 cookie `j2ee`。`cf`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-13T13:03:29.203

我有一个小问题，我在请求之间完全丢失了会话变量。我在 J2EE 会话中使用了 cfhttp 帖子。想象一下这种情况： 1\. wwwRoot/test 文件夹中的 call.cfm 调用也在同一文件夹中的索引页面。2\. index.cfm 将请求发送到 wwwRoot/test/controller/login.cfm。3\. login.cfm 设置一些会话变量并将用户发送到 wwwRoot/test/index.cfm 4\. index.cfm 看不到创建的会话变量。

所有发送请求都是通过带有 addtoken="yes" 的 cflocation 完成的。

关闭 J2EE 会话变量，中提琴！它按应有的方式工作。

[cflocation 和会话变量](https://stackoverflow.com/questions/24128062/cflocation-and-session-variables)

# jsp - 在 tomcat 上运行 Web 应用程序

> ID：11843253
> 
> 赞同：0
> 
> 时间：2012-08-07T09:45:05.950
> 
> 标签：jsp, tomcat, web-applications, servlets, profiling

我正在尝试分析 tomcat 服务器。我的分析器输出由 tomcat 服务器执行的方法列表。我使用 Ubuntu 12.04。我所做的如下：

1）启动tomcat服务器（./startup.sh）

2）打开浏览器并执行在java中开发的Web应用程序（并包含jsp页面）例如（http://localhost:8080/bodgeit。）我已将bodgeit Web应用程序放在tomcat 7.0.28的webapps目录中（我运行Tomcat 上的 bodgeit Web 应用程序）

3) 我在这个 web 应用程序中执行了一些操作，例如登录、向购物篮添加东西、更改密码、注销等。

4) 然后我通过 ./shutdown.sh 停止服务器。当我运行 shudown 脚本时，我的分析器会输出包含运行 tomcat 时执行的方法列表的文件。

现在我的问题是：我通过执行上述步骤两次或多次收集配置文件。我在第 3 步中在 Web 应用程序中执行完全相同的操作（以相同的顺序）。**但是我在两个输出中获得的方法顺序是不同的。为什么会这样？**我的分析器也能够保存方法序列。

**apache web server执行的方法每次都不同吗？他们不是固定的吗？就像某些方法在您启动服务器、发出请求或关闭服务器时执行？**我也是 tomcat、servlet 和 jsp 的新手。我对它的工作原理有基本的了解。例如，以下序列在第一个文件中不存在，而在第二个文件中存在。像这样，还有很多不同之处。

```
<callingContextTree><method declaringClass="Lorg/apache/catalina/startup/HostConfig$DeployWar;" name="run" params="" return="V"><callsite instruction="7"><method declaringClass="Lorg/apache/catalina/startup/HostConfig;" name="deployWAR" params="Lorg/apache/catalina/util/ContextName; Ljava/io/File;" return="V"><callsite instruction="555"><method declaringClass="Lorg/apache/catalina/core/StandardHost;" name="addChild" params="Lorg/apache/catalina/Container;" return="V"><callsite instruction="20"><method declaringClass="Lorg/apache/catalina/core/ContainerBase;" name="addChild" params="Lorg/apache/catalina/Container;" return="V"><callsite instruction="15"><method declaringClass="Lorg/apache/catalina/core/ContainerBase;" name="addChildInternal" params="Lorg/apache/catalina/Container;" return="V"><callsite instruction="75"><method declaringClass="Lorg/apache/catalina/util/LifecycleBase;" name="start" params="" return="V"><callsite instruction="88"><method declaringClass="Lorg/apache/catalina/core/StandardContext;" name="startInternal" params="" return="V"><callsite instruction="517"><method declaringClass="Lorg/apache/catalina/util/LifecycleBase;" name="start" params="" return="V"><callsite instruction="88"><method declaringClass="Lorg/apache/catalina/session/StandardManager;" name="startInternal" params="" return="V"><callsite instruction="4"><method declaringClass="Lorg/apache/catalina/session/StandardManager;" name="load" params="" return="V"><callsite instruction="43"><method declaringClass="Lorg/apache/catalina/session/StandardManager;" name="doLoad" params="" return="V"><callsite instruction="61"><method declaringClass="Lorg/apache/catalina/core/ContainerBase;" name="getLoader" params="" return="Lorg/apache/catalina/Loader;"/></callsite></method></callsite></method></callsite></method></callsite></method></callsite></method></callsite></method></callsite></method></callsite></method></callsite></method></callsite></method></callsite></method></callingContextTree> 
```

有人可以帮我找出发生了什么吗？简而言之，如果我启动服务器，访问tomcat的主页并停止服务器。我再次这样做。tomcat 是否两次都以相同的顺序执行相同的方法？据我所知，事实并非如此。为什么 ？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:15:36.287

看起来 Tomcat 在您使用它时会自动重新加载 Web 应用程序。您可能想要检查文件上相对于计算机系统时钟的时间戳。如果您将来修改了文件，则可以触发这种行为。检查您`logs/catalina.out`是否正在进行任何自动部署活动。

# magento - 重定向到magento控制器中的另一个函数

> ID：11843261
> 
> 赞同：3
> 
> 时间：2012-08-07T09:45:22.043
> 
> 标签：magento, controller

我有 magento 网站。

我有一个控制器，如何重定向到该控制器中的另一个功能？

这意味着，有两个功能：

```
1.test()

i want to redirect from test1() to test2() 
```

我怎样才能做到这一点？

```
How can i redirect from one function to another function in the same controller? 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T10:10:28.677

前端控制器中提供了三个重定向功能，它们是：

```
_redirect()
_redirectUrl()
_redirectReferer() 
```

`_redirect('frontName/controllerName/actionName/param1/param2')`用于内部重定向。
`_redirectUrl($fullUrl)`用于外部重定向。
`_redirectReferer()`用于重定向到引荐来源网址。

希望这能提供更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:02:58.700

您可以在**test1**操作中放置类似的内容。

```
$this->_redirect('*/*/test2', array(if you want to pass something then from here you can pass )); 
```

# entity-framework - edmgen 验证的目的？比较 SSDL 和数据库模式？

> ID：11843264
> 
> 赞同：1
> 
> 时间：2012-08-07T09:45:33.807
> 
> 标签：entity-framework, entity-framework-4, edmgen

不确定 EDMGEN[在这里验证什么](http://msdn.microsoft.com/en-us/library/cc716721)

它根据实时数据库模式验证 ssdl 文件以寻找不一致）？

Ot 它只验证 ssdl、csdl 和 msl 文件之间的内部一致性？

如果没有人手动更改自动生成的 ssdl、csdl 和 msl 文件的内容，是否有任何理由验证它们？

此验证是否与在 Visual Studio 中将 ConceptualEntityModel 的“Validate On Build”属性设置为 true 时运行的验证相同？

有什么方法可以检查 ssdl 文件和实时数据库之间的一致性吗？（如新表、不同字段、外键等......）与 Redgate SQLCompare 在比较模式时提供的结果相似......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:38:58.667

> Ot 它只验证 ssdl、csdl 和 msl 文件之间的内部一致性？

它仅验证 EDMX 文件 - 这意味着 SSDL、MSL 和 CSDL 之间的一致性。

> 此验证是否与在 Visual Studio 中将 ConceptualEntityModel 的“Validate On Build”属性设置为 true 时运行的验证相同？

是的

> 有什么方法可以检查 ssdl 文件和实时数据库之间的一致性吗？

这不是 EDMGEN 验证或实体框架的目的。如果你有 VS Premium 或 Ultimate 版，你可以使用它的数据库工具来比较两个数据库——这几乎等同于 RedGate 的 SQL 比较。我不确定是否有任何工具可以比较 SSDL 和真实数据库，但您通常只需要一组集成测试，这些测试将验证您的数据库是否仍然适用于您的模型。

# asp.net-mvc - 我应该将子结构放在 MVC 控制器中的什么位置

> ID：11843265
> 
> 赞同：0
> 
> 时间：2012-08-07T09:45:38.633
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在尝试构建一个控制器，使用户能够向项目添加/删除子内容。

把它想象成一个文档，您可以在其中添加不同类型的部分，如标题、段落、图像等（它们都有自己的属性，因此它们在 SQL 中的单独表中）

我的问题是我应该把代码放在哪里来处理这个“文档控制器”中不同类型的小节？

它们都通过数据库关系附加到这个“文档”/实体，但是我应该为每种类型制作一个“crudl”控制器还是应该做一个基本的 crudl 然后让他们都继承这个？

我研究了“模型”和“服务层”——这是正确的做法吗？

我对 MVC 还是很陌生，使用 C# 和 ASP.net 我希望有人能给我一个正确方向的提示。

NB。请让我知道我是否应该改写这个问题。不知道该问什么才能在这里得到正确的答案。

规格：我使用 EF 4.x，如果需要，MVC3 将在可用时升级到最新版本。

希望得到一些聪明的答案或指导。提前感谢人们。是的，我也试过谷歌。不知道要搜索什么，所以我来了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:29:32.900

> 我应该把代码放在哪里来处理这个“文档控制器”中不同类型的小节？

用于此的代码最终将进入一个*控制器操作*，然后您可以相应地处理和更新数据库。有多种方法可以做到这一点，你可以是通用的，例如

```
[HttpPost]
public ActionResult AddSection(string type)
{
    switch (type)
    {
        case "HEADING":
            // add new heading to database
        case "PARAGRAPH":
            // add new paragraph to database      
    }
    return View(type);
} 
```

或者你可以是具体的，例如

```
[HttpPost]
public ActionResult AddHeadingSection()
{
    // add to db
    return View("Heading");
}

[HttpPost]
public ActionResult AddParagraphSection()
{
    // add to db
    return View("Parapgraph");
} 
```

以上只是真正的伪代码，让您大致了解如何以最小的努力做到这一点。在现实生活中，您可能会发布额外的信息，例如`AddHeadingSection(HeadingModel model)`。这真的取决于你如何去实现它。

此外，您可能需要考虑使用 AJAX 而不是完整的回发，这会使您的应用程序更加流畅。

# blackberry - 如何使用黑莓获取包名

> ID：11843270
> 
> 赞同：0
> 
> 时间：2012-08-07T09:46:04.893
> 
> 标签：blackberry, blackberry-simulator

我是黑莓开发新手，是否可以获得安装在设备中的应用程序的包名称。我对此没有任何参考。

```
 int[] handle = codeModuleManager.getModuleHandles();                    
        for(int i=0; i<handle.length; i++){  
            ApplicationDescriptor[] app_descriptors = CodeModuleManager.getApplicationDescriptors(handle[i]);               
                if(app_descriptors != null){ 
                    System.out.println("app_descriptors length "+ app_descriptors.length);   
                    for(int j=0; j< app_descriptors.length; j++){
                        System.out.println("Iterating the arraylist :: "+ app_descriptors[j].toString());
                    } 
                }               
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:03:44.460

Try this - This will get all the installed modules.

```
int[] v=net.rim.device.api.system.CodeModuleManager.getModuleHandles(); 
```

For getting the ApplicationDescriptors associated with the module, use the following code -

```
net.rim.device.api.system.CodeModuleManager.getApplicationDescriptors(int moduleHandle) 
```

**Edit : -**

```
int[] handle = CodeModuleManager.getModuleHandles();                    
    for(int i=0; i<handle.length; i++){  
        ApplicationDescriptor[] app_descriptors = CodeModuleManager.getApplicationDescriptors(handle[i]);               
            if(app_descriptors != null){ 
                System.out.println("app_descriptors length "+ app_descriptors.length);   
                for(int j=0; j< app_descriptors.length; j++){
                     String moduleName = app_descriptors[i].getModuleName();
                     String name = app_descriptors[i].getName();

                } 
            }               
    } 
```

# c# - 类继承不能让我的 Equals() 工作

> ID：11843271
> 
> 赞同：0
> 
> 时间：2012-08-07T09:46:12.483
> 
> 标签：c#, visual-studio

我有一堂课：

```
 class Stock : Product
  {
  } 
```

在那个课程中，我做了一个`Equals`方法：

```
 public bool Equals(Product p)
  {
      return (p.Id == this.Id);
  } 
```

但它不起作用。它告诉我`Equals`：

> **警告 1** “WindowsFormsApplication1.Stock.Equals(WindowsFormsApplication1.Product)”隐藏了继承的成员“WindowsFormsApplication1.Product.Equals(WindowsFormsApplication1.Product)”。如果打算隐藏，请使用 new 关键字。

```
C:\Users\tom\Desktop\uni\WindowsFormsApplication1\WindowsFormsApplication1\WindowsFormsApplication1\Stock.cs    36  21  WindowsFormsApplication1 
```

有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T09:48:13.423

您需要覆盖`Equals`已在 Product Class 中使用的方法。

```
public override bool Equals(Product p)
{
    return (p.Id == this.Id);
} 
```

或者使用`new`关键字。但我不认为“新”是你想要的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T09:48:19.413

`Equals`在继承自`System.Object`. 所有对象都继承这个类。

```
public override bool Equals(object p)
{    
    return ((Stock)p.Id == this.Id);
} 
```

编辑：为了覆盖，参数需要是相同的类型。其中`object`是对象类型。如果您以`Product`如下方式声明此方法：

```
public bool Equals(Product p)
{    
    return (p.Id == this.Id);
} 
```

那么您必须将 Stock.Equals 中的参数类型更改为 Product。但是，这种 Equals 方法是隐藏的`object.Equals`，我认为这不是一个好的设计。如果您想正确使用该`Equals`方法，则需要覆盖，因为许多组件在集合中搜索时会调用此方法，并且`object.Equals`无论如何它们都会调用并且如果您使用隐藏而不是覆盖，则不会使用您的代码。如果这些方法在您的项目中是内部的并且与机制无关，`object.Equals`请为此方法选择不同的名称以避免混淆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T09:48:20.090

这只是一个警告，它将按预期工作。由于您的产品类定义了`Equals`，因此子类`Stock`正在定义自己的`Equals`方法。

假设您有以下类设置：

```
class Product
{
    public bool Equals(Product p)
    {
        return true;
    }
} 
```

和

```
 class Stock : Product
    {
        public bool Equals(Product p)
        {
            return true;
        }
    } 
```

在这里你会得到警告：

> Stock.Equals(Product)' 隐藏继承的成员 'Product.Equals(Product)'。如果打算隐藏，请使用 new 关键字。

您可以简单地使用`new`关键字告诉编译器 Yes 是有意隐藏的。因此，您在库存中的方法`class`将是：

```
new public bool Equals(Product p)
{
    return true;
} 
```

您可能想看到[新的修饰符 - msdn](http://msdn.microsoft.com/en-us/library/435f1dw2%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T09:48:42.203

似乎您`bool Equals(Product)`已经在 上定义了一个方法`Product`，将其设为虚拟并在`Stock`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T09:51:37.387

您需要将 override 隐含声明父方法的替换：

```
public override bool Equals(Product p)     
{          
   return (p.Id == this.Id);      
} 
```

此警告有助于编码人员避免不必要的父方法覆盖。

# c# - QueryOver 查找别名字符串

> ID：11843273
> 
> 赞同：4
> 
> 时间：2012-08-07T09:46:18.863
> 
> 标签：c#, sql-server, nhibernate, fluent-nhibernate

我有下一个聚合查询：

```
 IQueryOver<CustomerTask, CustomerTask> query = GetSession().QueryOver(() => task)
    .JoinAlias(() => task.TaskList, () => taskList)
    .JoinAlias(() => task.TaskChain, () => taskChain)
    .Where(() => taskList.SalesFlow == salesFlow)
    .Select(
        Projections.Group(() => taskList.Id)
            .WithAlias(() => salesFlowTaskStatisticsGridRow.RowId),
        Projections.Group(() => taskList.SalesFlow.Id)
            .WithAlias(() => salesFlowTaskStatisticsGridRow.SalesFlowId),
        Projections.Group(() => taskList.Name).WithAlias(() => salesFlowTaskStatisticsGridRow.Name),
        // ReSharper disable ExpressionIsAlwaysNull
        criteriaBuilder.FindAverageCompletionTime(salesFlowTaskStatisticsGridRow)
    // ReSharper restore ExpressionIsAlwaysNull
    ).TransformUsing(Transformers.AliasToBean<SalesFlowTaskStatisticsGridRow>()); 
```

由于计算平均时间需要调用 datediff 函数来编写它，所以我使用 SqlProjection

```
 private static AggregateProjection CountAverageCompletionTimeForTasksCriteria()
    {
        return Projections.Avg(Projections
            .SqlProjection("datediff(ss, Created, CompletedDate) as CompletionTimeInSeconds",
                new[] {"CompletionTimeInSeconds"}, new[] {NHibernateUtil.Double}));
    } 
```

问题是**Task**和**TaskChain对于****Created**和**CompletedDate**属性具有相同的名称，所以我需要传递一个别名。但我无法设法让字符串别名形成正确的 sql 投影。有没有办法获得这些别名，或者我可以通过其他方式将**datediff函数插入查询中吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:30:38.987

NHibernate 在使用 SqlProjection 时没有提供很多复杂的选项来处理别名。

唯一的解决方法是首先在没有 datediff 投影的情况下分析查询，然后查看 NHibernate 为 Task 和 TaskChain 使用的别名（它们可能类似于*this_*和 *this_1*）。然后，您可以手动将这些别名硬编码到投影中，如下所示：

```
.SqlProjection("datediff(ss, this_.Created, this_.CompletedDate) as CompletionTimeInSeconds",
                new[] {"CompletionTimeInSeconds"}, new[] {NHibernateUtil.Double}) 
```

显然，这远非完美，但它会起作用。

# java - 如何使用多数据源管理事务管理器和会话工厂

> ID：11843279
> 
> 赞同：0
> 
> 时间：2012-08-07T09:46:56.483
> 
> 标签：java, spring, hibernate, multi-tenant

在我的 Web 应用程序中，我`Spring3, hibernate3`通过注释与事务管理器一起使用，直到现在这个应用程序`single dataSource`非常单一`sessionFactory`。

现在因为这正在转移到具有**单独的 DB 用于单独的***租户*的多租户。目前，我正在通过**ThreadLocal**每个请求管理所有租户信息，这些信息具有数据库凭据和数据源。

 ****但是当需要为所有这些动态选择的数据源支持**事务管理器时，主要问题就出现了。**

所以以下是我的问题：

```
 1\. How to update Transaction Manager as per request when dataSource changes ?
 2\. If I also maintain SessionFactory for each tenant as manageing dataSource but how to update Transaction Manager for each sessionFactory ? 
```

**注意：我不能在 xml 文件中定义这些数据源，因为没有预定义的租户。**

> 请帮我 ... ：（ ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:20:25.913

```
 @Bean(name="transactionManager1")
    public HibernateTransactionManager hibernateTransactionManager(SessionFactory sessionFactory1){
        HibernateTransactionManager transactionManager1 = new HibernateTransactionManager(sessionFactory);
        return transactionManager1;     
    }

    @Bean(name="transactionManager2")
    public HibernateTransactionManager hibernateTransactionManager(SessionFactory sessionFactory2){
        HibernateTransactionManager transactionManager2 = new HibernateTransactionManager(sessionFactory);
        return transactionManager2;     
    }

    <aop:config>
    <aop:advisor pointcut="execution(* ....)" advice-ref="transactionAdvice1"/>
</aop:config>

<tx:advice id="transactionAdvice1" transaction-manager="transactionManager1">
    <tx:attributes>
        <tx:method ..../>                       
    </tx:attributes>
</tx:advice>

    <aop:config>
    <aop:advisor pointcut="execution(* ....)" advice-ref="transactionAdvice2"/>
</aop:config>

<tx:advice id="transactionAdvice1" transaction-manager="transactionManager2">
    <tx:attributes>
        <tx:method ..../>                       
    </tx:attributes>
</tx:advice> 
```****

# tfs - TFS Power Tools 2010 显示文件已签出

> ID：11843292
> 
> 赞同：0
> 
> 时间：2012-08-07T09:48:12.000
> 
> 标签：tfs, tfs-power-tools

不知何故，TFS Power Tools 认为我的文件已签出，它不会让我签出，因为该选项是灰色的。

当我查看 Windows 资源管理器时，我看到我的文件带有小笔图标覆盖。当我右键单击并转到“Team Foundation Server”时，我选择了撤消，但随后收到消息“在选择或选择的任何子项中没有要撤消的更改”。如果我右键单击并转到签入，则会收到消息“没有待处理的更改”。

当我在 Visual Studio 中打开源代码控制资源管理器时，它显示文件没有挂起的更改。

谁能告诉我可以采取的任何步骤来解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:27:14.750

可能是您在另一个工作区签出该文件吗？
转到 VStudio 并检查团队资源管理器下的“团队成员”。右键单击自己并选择“显示未决更改”。这应该显示所有工作区/工作台中的所有签出项目。您也可以在那里撤消它。

最后，为了找出你的文件发生了什么，在 VS 中转到
“文件”>“源代码管理”>“在源代码管理中查找”>“状态”
选择模块的路径并点击“查找”。这应该显示是否有任何其他人已签出此文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:51:48.473

看起来很奇怪，让我们检查一下常见场景：

1.  文件实际上没有签出，但在资源管理器中显示为已签出 => 请尝试通过 VS 签出文件，如果可以，肯定存在 Power Tools 集成到 Source COntrol 的问题。重启机器。如果问题相同，则可能是 TFS 凭据与登录 Windows 凭据不同，状态有时不会更新。

2.  文件已设置由管理员单次签出和由其他任何人签出的属性，因此阻止您签出或签入也由于同样的原因无法撤消签出。

3.  创建新的工作区或在具有不同工作区的其他机器上尝试。=> 有时工作空间冲突，同一目录通过多个工作空间的多个映射会产生问题。

4.  Power Tools 安装已损坏或与某些其他扩展不兼容。=> 很多时候，频繁突然断电或等损坏软件，重新安装最新的电动工具。如果问题仍然存在，请检查 VS 或 Windows shell 的其他扩展是否没有中断运行。

希望对您有所帮助，如果没有，请告诉我更多详细信息，例如已安装的扩展程序、已安装的电动工具版本/更新。

# iphone - 在 iPhone 中使用证书身份验证向安全 SSL 服务器发送请求

> ID：11843295
> 
> 赞同：0
> 
> 时间：2012-08-07T09:48:14.057
> 
> 标签：iphone

我正在为我的客户端开发一个 iPhone 应用程序，在该应用程序中，我必须通过证书身份验证将请求发送到安全 SSL 服务器（客户端的服务器，服务器端一切就绪）。我没有得到确切的程序或显示要遵循的步骤的确切代码。（即程序对我来说不清楚）如果有人可以向我解释其背后的机制，那将对我有所帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:51:34.570

你不需要做任何事情。

只需使用正确的 URL 和 https://

所有底层的复杂性都将由 NSURLConnection 类处理。它与调用任何其他网络服务一样。

# javascript - jquery添加新元素

> ID：11843298
> 
> 赞同：0
> 
> 时间：2012-08-07T09:48:24.210
> 
> 标签：javascript, jquery, json

我有这个代码

```
$.getJSON('check.php', function(data) {
    $.each(data, function(key, val) {  
        $("#badge").append("<tr><td>"+val+"</td></tr><tr><td>-------------------------------------------------------</td></tr>");
    });
});

$("td").mouseover(function () {
    $(this).css("color","red");
}); 
```

我的问题是当我将鼠标光标悬停在每个元素上时，它们不会像我预期的那样改变颜色......有人可以解释一下为什么吗？并帮助我如何做正确的事。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T09:54:53.490

该事件`mouseover`不会触发，因为加载时页面上不存在该元素......所以你需要这样做：

```
$("#badge").on('mouseover','td', function () {
    $(this).css("color","red");
}); 
```

这些[`on()`](http://api.jquery.com/on/)函数将在`badge`元素上触发（这是我猜测的表格），并且仅在事件目标为 a`td`且事件为时触发`mouseover`。

不过需要注意的一件事 - 这可以通过 css 轻松完成：

```
#badge td:hover {
   color: red;
} 
```

谢谢@WTK：

请记住，`on()`从 jQuery 1.7 开始就可以使用。对于旧版本的 jQuery 和类似的结果，请使用`bind()`,`delegate()`或`live()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:59:24.300

尝试使用`live`or`on`因为您的元素是动态加载的。基本上，这些函数的作用是允许您将事件处理程序附加到未来的元素。像这样使用它：

```
$("td").on('mouseover', function(){
    $(this).css({'color':'#F00'})
}); 
```

# css - DIV 应该填充可用空间

> ID：11843299
> 
> 赞同：0
> 
> 时间：2012-08-07T09:48:29.837
> 
> 标签：css, html

我有这个[**代码**](http://jsfiddle.net/cD2RK/)

```
<!-- <body> (automatically added by jsFiddle) -->
<header id="header">
    <h1>Title</h1>
</header>

<div id="mainContent">
    Some text. End.<br />
</div>
<!-- </body> --> 
```

如何拉伸`#mainContent`以填充下面的所有可用空间`#header`？

这是针对**Windows 8**应用程序的，因此**我可以使用 CSS 3（包括*-ms-grid-**）和 JavaScript**，而无需担心浏览器支持！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:06:35.810

您可以为此使用**display:table**属性：

**HTML**

```
<div class="parent">
    <header id="header">
     <h1>Title</h1>
    </header>

    <div id="mainContent">
      Some text. End.<br />
    </div>
</div> 
```

**CSS**

```
body,html{
    height:100%;
}
.parent{
    display:table;
    height:100%;
    box-sizing:border-box;
    width:100%
}
#header, #mainContent {
    background:red;
    display:table-row;
}

/* How can I make #header to fill the full available left space */
#header {
    height:10%;
    background:green;
} 
```

检查这个[http://jsfiddle.net/cD2RK/3/](http://jsfiddle.net/cD2RK/3/)

# sql-server - 由于在插入时选择而导致的 SQL Server 锁定

> ID：11843303
> 
> 赞同：3
> 
> 时间：2012-08-07T09:48:42.700
> 
> 标签：sql-server

我想在同一个表中进行插入时从表中获取一些行。执行此操作时，表被锁定。

我怎样才能解决这个问题？

请帮帮我。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:53:55.277

如果您正在使用`SQL Server 2008`，那么有一个提示 SQL Server 可以使用`row level lock`。

[是否可以在 SQL Server 中强制行级锁定？](https://stackoverflow.com/questions/3114826/is-it-possible-to-force-row-level-locking-in-sql-server)

# php - 缺少 W3C 声明

> ID：11843304
> 
> 赞同：0
> 
> 时间：2012-08-07T09:48:43.467
> 
> 标签：php, html, character-encoding, w3c, w3c-validation

我制作了多语言网页，我使用 HTML5，但为什么我尝试在 W3C 中验证时出错：

```
Line 4, Column 11: No explicit character encoding declaration has been seen yet (assumed utf-8) but the document contains non-ASCII.

<title>Viešbutis Graikijoje</titl… 
```

..但是我的标题包含 utf-8 字符集：

```
<!DOCTYPE html>
<html lang="en">
<head>
<title><?php echo $title?></title>
<meta name="robots" content="index, follow" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

我读过其他帖子，它说你需要使用 utf-8 字符集，但我确实使用它.. 我也试过 put

```
 AddType 'text/html; charset=UTF-8' html 
```

..in .htaccess 文件，但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:50:20.563

您在 中包含非 ascii 字符`<title>`，但您`<meta>`将文档声明为 UTF8 的标签尚未出现。

将内容类型`<meta>`标签移动到`<head>`:

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title><?php echo $title?></title>
<meta name="robots" content="index, follow" /> 
```

虽然`AddType`.htaccess 中的指令是一个好主意，如果（且*仅*当）*从该目录提供的具有 .html 扩展名的每个文档都是具有 UTF8 字符集的 HTML*，W3 验证器仍然希望您显式声明字符集在文档中。

另请注意，在编写 XHTML 时，它们将允许您在 XML 声明中声明它：

```
<?xml version="1.0" encoding="utf-8" ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:55:17.390

把文字

```
<meta charset="utf-8"/> 
```

在。。之间

```
<head></head> 
```

标签。

此外，检查文件是否使用 UTF-8 编码保存。检查你的编辑器。

# azure - AzureLocalStorageTraceListener 住在哪里？

> ID：11843306
> 
> 赞同：0
> 
> 时间：2012-08-07T09:48:46.943
> 
> 标签：azure, diagnostics

我正在尝试在我的 Web 服务中实现跟踪，但出现错误：

> 找不到类 Host.AzureLocalStorageTraceListener、MyProject.Host 的类型。

我有一个托管在 azure 中的 web 服务，但它不遵循 azure webservices 的通常结构。

有一个带有指向 MyProject.Host 的 webrole 的 azure 项目。这是启动项目。

有一个名为 MyProject.Host 的项目，其中包含服务的 web.config 和一个 azure webrole。

然后我们有 MyProject.Service 项目，其中包含服务接口 IService1 和服务代码 Service1.cs。

web.config 中的代码是：

```
 <sharedListeners>
       <add name="AzureLocalStorage" type="Host.AzureLocalStorageTraceListener, MyProject.Host"/>
    </sharedListeners> 
```

错误是：

> 找不到类 Host.AzureLocalStorageTraceListener、MyProject.Host 的类型。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Configuration.ConfigurationErrorsException：找不到类 Host.AzureLocalStorageTraceListener、MyProject.Host 的类型。

源错误：

```
 Line 53:         private void RegisterRoutes()
    Line 54:         {
    Line 55:             RouteTable.Routes.Add(new ServiceRoute(string.Empty, new WebServiceHostFactory(), typeof(Service1)));
    Line 56:         }
    Line 57:     } 
```

我有两个想法是

1.  因为角色和服务位于 2 个不同的地方，所以对 AzureLocalStorageTraceListener 的位置感到困惑，或者

2.  因为它不是由通常的 Azure Web 服务路由创建的，所以 AzureLocalStorageTraceListener 尚未创建。

但如果是这些，我不知道如何解决它们。

有没有人有任何想法？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:25:55.150

首先你必须知道你需要自己创建**AzureLocalStorageTraceListener**，这个类不是 Azure SDK 的一部分：

```
using System;
using System.Diagnostics;
using System.IO;
using Microsoft.WindowsAzure.Diagnostics;
using Microsoft.WindowsAzure.ServiceRuntime;

namespace MyProject.Host
{
    public class AzureLocalStorageTraceListener : XmlWriterTraceListener
    {
        public AzureLocalStorageTraceListener()
            : base(Path.Combine(AzureLocalStorageTraceListener.GetLogDirectory().Path, "MyProject.svclog"))
        {
        }

        public static DirectoryConfiguration GetLogDirectory()
        {
            DirectoryConfiguration directory = new DirectoryConfiguration();
            directory.Container = "wad-tracefiles";
            directory.DirectoryQuotaInMB = 10;
            directory.Path = RoleEnvironment.GetLocalResource("CustomLogs").RootPath;
            return directory;
        }
    }
} 
```

我建议您将其添加到您的**MyProject.Host**项目中，因为此文件与主机相关，而不与服务相关。添加此文件后，我们知道：

*   程序集：**MyProject.Host**
*   类：**MyProject.Host.AzureLocalStorageTraceListener**（这是基于命名空间，而不是程序集的名称）

您将能够在 web.config 中正确引用它：

```
<sharedListeners>
   <add name="AzureLocalStorage" type="MyProject.Host.AzureLocalStorageTraceListener, MyProject.Host"/>
</sharedListeners> 
```

**注意：** AzureLocalStorageTraceListener 类中的代码假定您有一个名为**CustomLogs**的本地资源。

# cocoa - 可可：使用 calayer 会使我在可可中的应用程序崩溃？

> ID：11843309
> 
> 赞同：0
> 
> 时间：2012-08-07T09:48:53.947
> 
> 标签：cocoa

我正在使用以下代码使用 calayer 设置我的 nsview 的背景颜色。

```
 CALayer *viewLayer = [CALayer layer];
    [self.view setLayer:viewLayer];
    [self.view setWantsLayer:YES]; 
    [viewLayer setBackgroundColor:CGColorCreateGenericRGB(0.74, 0.99, 0.79, 1.0)]; 
```

此代码使我的应用程序崩溃。

请帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:35:33.587

你的代码对我有用。您必须检查的唯一一件事是您的视图在您为其设置图层时已加载。

如果您只想绘制具有指定背景颜色的视图，则不必为其设置 CALayer。最简单的方法是创建自己的`NSView`子类：

```
@interface MyColoredView: NSView

@property (copy) NSColor* backgroundColor;

@end

@implementation MyColoredView

@synthetize backgroundColor;

- (void)drawRect:(NSRect)dirtyRect
{
    [self.backgroundColor set];
    NSRectFill(dirtyRect)
}

@end 
```

之后，您必须在 IB 中为您的视图设置类，`MyColoredView`并在初始化期间设置它的背景颜色：

```
self.view.backgroundColor = [NSColor greenColor]; 
```

# forms - 如何在 MS Access VBA 中检索屏幕大小/分辨率以重新调整表单大小

> ID：11843310
> 
> 赞同：3
> 
> 时间：2012-08-07T09:48:55.673
> 
> 标签：forms, vba, ms-access

我有两个弹出表单（父/子），我希望能够根据屏幕大小自动调整大小。

我怎样才能检索屏幕的大小以实现这一点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T10:08:25.627

对于 Access 2010 64 位，您需要在`PtrSafe`之前添加`Function`.

```
Declare Function GetSystemMetrics32 Lib "User32" _
    Alias "GetSystemMetrics" (ByVal nIndex As Long) As Long

Sub ScreenRes()
Dim w As Long, h As Long
    w = GetSystemMetrics32(0) ' width in points
    h = GetSystemMetrics32(1) ' height in points

End Sub 
```

更多信息： http: [//support.microsoft.com/kb/210603](http://support.microsoft.com/kb/210603)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-30T15:52:57.843

对于 VBA，一个更简单（因此可能更便携）的解决方案可能是：

```
Application.UsableHeight
Application.UsableWidth 
```

正如在[Adjust userforms to fit in screen 中](https://groups.google.com/forum/#!topic/microsoft.public.excel.programming/EH8_Jr6lhrY)找到的那样。我在 Word 2007 VBA 中成功使用了它。在我的例子中，`Application.UsableWidth`给出实际的屏幕宽度，`Application.UsableHeight`给出实际的屏幕高度，减去 Windows 任务栏的高度。

# assembly - 来自 objdump 的指令的汇编大小

> ID：11843312
> 
> 赞同：0
> 
> 时间：2012-08-07T09:49:01.917
> 
> 标签：assembly, x86

使用 objdump -d ，我得到

```
 80483b7:   e9 73 7c fb f7          jmp    2f <_init-0x8048265>
 80483bc:   5e                      pop    %esi
 80483bd:   89 76 08                mov    %esi,0x8(%esi) 
```

这是否意味着例如 jmp 指令的大小是 5 个字节？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:59:39.967

> 这是否意味着例如 jmp 指令的大小是 5 个字节

是的，但是，您可以获得其他大小的跳转，因此请务必先检查 objdump 并查阅 intel 说明手册。

# c# - 如果数据库响应时间过长如何退出应用程序

> ID：11843313
> 
> 赞同：0
> 
> 时间：2012-08-07T09:49:02.103
> 
> 标签：c#, database

我有数据库查询：`datareader.execQuery("select * from table");` 但是有时数据库需要很长时间才能响应并且卡在这一行。如果发生这种情况，我的应用程序应该退出

谢谢大家，但我需要知道：有什么方法可以使用秒表或计时器来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:52:55.283

您应该在 SqlCommand 对象上设置 CommandTimeout。如果超过了超时时间，你会得到一个异常。如果这是您想要做的，您可以抓住它并退出您的应用程序。

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)

“获取或设置在终止尝试执行命令并生成错误之前的等待时间。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:53:09.150

更简洁的方法是将[SqlCommand.CommandTimeout](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)属性默认设置为 30 秒

您将不得不处理 TimeOut 异常

# javascript - 使用 jQuery 和 CSS 创建多个生成的粘性标题时遇到问题

> ID：11843319
> 
> 赞同：0
> 
> 时间：2012-08-07T09:49:09.977
> 
> 标签：javascript, jquery, css

我正在尝试集成一种像这里显示的那样的粘性标题技术...... [Persistent Headers](http://css-tricks.com/persistent-headers/)。

我试图将它集成到我的代码中，并且大部分都成功了，但是它的行为不正确，我真的无法弄清楚。

我将尝试简而言之解释它正在使用的页面的作用。我有一个包含学生表和另一个评估表的数据库。此页面循环遍历一个 JSON 对象（通过 PHP 脚本从数据库中接收），然后为第一个对象中的每个学生获取另一个 JSON 及其评估。这一切都很好。然而，它确实创建了一个相当长的页面。视觉上看起来像这样...

[在 Chrome 中呈现的代码](http://i.stack.imgur.com/gignY.png)

我根据上面发布的教程编写的代码应该克隆一个类指定的标题，然后根据涉及元素位置和元素长度的某些逻辑隐藏或显示它们。这具有将页眉粘贴到页面顶部的效果，而它所属的容器仍然可见。

问题是出了点问题，尽管所有标题都按顺序显示它们为时过早，但它们似乎停留了不同的时间长度，这些长度似乎与它所属的容器的长度相关。

所以我的代码...

首先是用于更新标题的函数......

```
containerArray =  new Array;
positionArray =  new Array;
floatingHeaderArray =  new Array;

function updateTableHeaders() {
$(".studentContainer").each(function(i) {   
    containerArray[i] = $(this);
    var position = containerArray[i].position();
    positionArray[i] = position.top;
    var scrollTop = $("#main").scrollTop();
    floatingHeaderArray[i] = $(".floatingHeader", this);
    if ((scrollTop > positionArray[i]) && (scrollTop < positionArray[i] + containerArray[i].outerHeight(true))) {
        floatingHeaderArray[i].css({
        "visibility": "visible"
        });
    } else {
        floatingHeaderArray[i].css({
        "visibility": "hidden"
        });      
    };
});
} 
```

现在是生成容器、标题和选项卡的代码。

```
 $("#mainContent").fadeIn(0);
            loadMessage = "Loading data for " + event.target.id;
            $.getJSON('php/oneFullClass.php?techClass=' + event.target.id, function(data) {
                $('#mainTitle').fadeOut(0);
                $('#action').html('You are ' + actionIntent + 'ing ' + event.target.id);
                $('#action').fadeIn(300);
                $('#mainTitle').fadeIn(300);
                $('#mainContent').append('<div id="scrollTopDisplay"></div>')
                dynamicPositioning();
                $.each(data, function(key, val) {
                    var thisPosition = positionArray[0]
                    $('#mainContent').append(
                    '<div class="studentContainer studentView" id="' + val.idStudent + '">' +
                    '<div class="studentName">' + val.name + ' ' + val.surname + ' - (' + val.form.substr(0, 1) + '/' + val.form.substr(1, 2) + ')</div>' + 
                    '<div class="floatingHeader">' + val.name + ' ' + val.surname + ' - (' + val.form.substr(0, 1) + '/' + val.form.substr(1, 2) + ')</div>' + 
                    '<div class="studentTarget"> Target: <strong>' + val.target + '</strong></div>' +  
                    '</div>');
                    $(".studentContainer").hide().each(function(i) {
                        //$(this).slideDown(0);
                        $(this).delay(i * 50).slideDown(300).fadeIn(500);
                    })
                    //Get previous assessments for this student and build tabs
                    buildTabs('php/allPreviousAssess.php?sid=' + val.idStudent, val.idStudent);
                });
            });

            $('#mainContent').append('<div id="expandAll" onClick="expandAll()">Expand</div>');
            $('#mainContent').append('<div id="collapseAll" onClick="collapseAll()">Collapse</div>');
            dynamicPositioning();
            $('#expandAll').delay(300).fadeIn(300);
            $('#collapseAll').delay(300).fadeIn(300);
           $("#main").scroll(updateTableHeaders); 
```

我认为这就是您需要的所有信息，但如果您认为这有助于解决问题，我会发布此代码中可能引用的任何其他代码。

我怀疑这个问题与我在“评估卡”上使用的动画幻灯片有关，它弄乱了位置值，或者可能是 position() 无法获取隐藏元素的位置。但是，当我在每个滚动事件中调用 updateTableHeaders() 时，这不应该是一个问题，因为当您被授予访问布局的权限时，所有动画都结束了（有一个模态阴影效果，只有在所有 AJAX 请求完成后才会消失完全的。

我希望有人能帮忙，这个让我不开心！:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:06:06.820

Balloon 是我为轻松制作标题而编写的一个库，非常轻松。您只需创建一个 Balloon 对象实例，指定是否要堆叠或替换粘性标题，然后通过传入它们的 id 字符串来膨胀标题。试一试，如果它对你有帮助，请告诉我：

[https://github.com/vhiremath4/Balloon](https://github.com/vhiremath4/Balloon)

如果您发现它有任何问题，请在存储库上提交错误报告，但我觉得它应该在您的情况下完成它的工作。

# iphone - 访问子 ViewController 中的 TabBarController 变量

> ID：11843322
> 
> 赞同：0
> 
> 时间：2012-08-07T09:49:18.293
> 
> 标签：iphone, objective-c, ios, xcode, uitabbarcontroller

基本上，我有一个 TabBarController 和一些附加到这个控制器的子视图。TabBarController 有一些我想在子视图中访问的属性。

这是我所拥有的：

MyTabBarController 的 .m

```
-(void)setDetails:(id)sender
{
    self.myVariable = @"This is a test";
    NSLog(@"Here I set my variable");
}

- (void)viewDidLoad
{
    NSLog(@"[LOAD] My Tab Bar Controller");
    [self setDetails:nil];
} 
```

第一个 subView 的 .m

```
- (void)viewDidLoad
{
    NSLog(@"[LOAD] FirstViewController");

    MyTabBarController *myTBC = (MyTabBarController *)self.tabBarController;
    self.headerName.text = myTBC.myViariable; // Here I just set the UILabel's text
    NSLog(@"Header name = %@", self.headerName);
} 
```

这是我在日志中的内容：

```
2012-08-07 11:43:23.001 MyFirstproject[23632:15203] [LOAD] My Tab Bar Controller
2012-08-07 11:43:23.012 MyFirstproject[23632:15203] [LOAD] FirstViewController
2012-08-07 11:43:23.072 MyFirstproject[23751:15203] Header name = (null)
2012-08-07 11:43:23.116 MyFirstproject[23751:15203] Here I set my variable 
```

我的问题是：正如我在日志中看到的，MyTabBarController 的`viewDidLoad`函数在 FirstViewController的函数**之前**被调用。但是，似乎`setDetails`MyTabBarController的函数是在 FirstViewController 的函数**之后**`viewDidLoad`调用的。

这怎么可能 ？我在这里做错了什么吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:06:49.940

尝试将代码放入`firstViewController`in`viewDidAppear`方法而不是`viewDidLoad`

快乐编码:)

对于这两者的区别，只需查看 Apple 开发者网站上的相关文档即可：)

在加载视图时正式`viewDidLoad`调用一次

`viewDidAppear`当视图即将出现在屏幕上时调用:)

快乐编码:)

# android - OpenVPN 和 Android NDK

> ID：11843323
> 
> 赞同：6
> 
> 时间：2012-08-07T09:49:27.667
> 
> 标签：android, android-ndk, openvpn

我有一个定制的 C（跨平台）应用程序。OpenVPN 变体。我想用 NDK 为 Android 版本编译这个。

它在Linux下编译。这是否意味着我也可以使用 NDK 轻松为 Andoird 编译它？如果是这样，我如何通过 Java 代码（普通的 Android SDK）与我的库进行通信？

我还没有真正完成实际的实施部分。但我想提前知道我能期待什么。

因此，如果您对 NDK 有任何经验并对我有任何提示/指点，那么您真的会对我有很大帮助。比如，在使用 NDK 时我应该注意的事项。编译设置等

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T13:35:49.893

我的 Openvpn for Android 应用程序是开源的。请参阅[https://github.com/schwabe/ics-openvpn/](https://github.com/schwabe/ics-openvpn/)因为您写道您正在使用 OpenVPN 变体，查看我项目的 Android.mk 文件可能会对您有所帮助。

# iphone - 如何在后台播放音乐 iphone sdk

> ID：11843326
> 
> 赞同：4
> 
> 时间：2012-08-07T09:49:39.810
> 
> 标签：iphone, objective-c, ios

我正在开发一个应用程序，我在应用程序中设置了计时器，之后我进入后台，当时间结束时，我想在后台播放音乐。但是音乐没有播放？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:53:55.227

参考[ios-sdk_background-audio](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_background-audio/)。你会很有帮助的。祝你好运

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T10:16:39.693

使用此计时器代码设置计时器

```
UIBackgroundTaskIdentifier bgTask =0;
UIApplication  *app = [UIApplication sharedApplication];
bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
    [app endBackgroundTask:bgTask]; 
}];

 self.secondsTimer = [NSTimer 
                         scheduledTimerWithTimeInterval:1 
                         target:self 
                         selector:@selector(timerFireMethod:) 
                         userInfo:nil 
                         repeats:NO]; 
```

火法——`- (void) timerFireMethod:(NSTimer *) theTimer {}`

在此火灾方法中，使用以下代码播放媒体文件-

`NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"tujhbinjena" ofType:@"mp3"]];`

`[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];`

```
NSError *error;
audioPlayer = [[AVAudioPlayer alloc]
               initWithContentsOfURL:url
               error:&error];
audioPlayer.delegate=self;
audioPlayer.volume=1.0;
if (error)
{
    NSLog(@"Error in audioPlayer: %@", 
          [error localizedDescription]);
} else {
    audioPlayer.delegate = self;
    [audioPlayer prepareToPlay];
    [audioPlayer play]
}` 
```

> [自己成为FirstResponder]；[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil]; [[AVAudioSession sharedInstance] setActive: YES error: nil];

```
- (BOOL)canBecomeFirstResponder {
    return YES;
} 
```

在**ViewDidUnload**您需要执行以下几行

```
[[UIApplication sharedApplication] endReceivingRemoteControlEvents];
[self resignFirstResponder]; 
```

您需要按照处理**AVAudioPlayerDelegate**委托方法，并且要在后台播放音频，您需要在**Info.plist 中**添加一个参数，即“**所需的背景模式**”，此键的值为“**应用程序播放音频**”。如果有任何疑问，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T09:51:21.073

对于此功能，您可以使用此方法：-

```
 -(void)notificationSchedue

   {

  NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar]; 
```

//---------remainingTime NSUserDefaults 包含未来日期--------//

```
 NSString *datevalueremaining= [[NSUserDefaults   standardUserDefaults]valueForKey:@"remainingTime"];

   NSDateFormatter *dateFormat = [[[NSDateFormatter alloc] init] autorelease];
   [dateFormat setDateFormat:@"dd/MM/yyyy HH:mm:ss"];

   NSDate *dateremaining=[dateFormat dateFromString:datevalueremaining];

   NSDate *pickerDate = dateremaining;
NSDateComponents *dateComponents = [calendar components:( NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit ) 
                                               fromDate:pickerDate];
NSDateComponents *timeComponents = [calendar components:( NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit ) 
                                                fromDate:pickerDate];

// Set up the fire time
 NSDateComponents *dateComps = [[NSDateComponents alloc] init];

  [dateComps setDay:[dateComponents day]];

  [dateComps setMonth:[dateComponents month]];

  [dateComps setYear:[dateComponents year]];
  [dateComps setHour:[timeComponents hour]];

  [dateComps setMinute:[timeComponents minute]];
[dateComps setSecond:[timeComponents second]];
   NSDate *itemDate = [calendar dateFromComponents:dateComps];
   [dateComps release];

  if (localNotif)
  { 
     [[UIApplication sharedApplication] cancelLocalNotification:localNotif];
     [localNotif release];
   }
  localNotif = [[UILocalNotification alloc] init];
  if (localNotif == nil)
    return;

  localNotif.fireDate = itemDate;

  localNotif.timeZone = [NSTimeZone defaultTimeZone];

  localNotif.alertBody = @"Your Time is Over";

  localNotif.alertAction = @"View";

 NSString *stringvalue=[[NSUserDefaults standardUserDefaults]valueForKey:@"goodNight"]; 
```

//-----音乐应该小于或等于 30 秒---//

```
 localNotif.soundName=@"s1.mp3";

    NSDictionary *infoDict = [NSDictionary dictionaryWithObject:@"someValue" forKey:@"someKey"];

 localNotif.userInfo = infoDict;

 [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];

 } 
```

# c# - 使用 Kerberos 通过 WCF 发送异常 - 检索异常详细信息会触发身份验证请求

> ID：11843327
> 
> 赞同：2
> 
> 时间：2012-08-07T09:49:43.853
> 
> 标签：c#, wcf, wcf-security, kerberos

我已经建立了一个 WCF 服务，它打算在 Kerberos 下运行。我遇到的问题是，每当我从服务向客户端抛出异常时，它似乎都会对异常详细信息发出单独的请求，并且由于**“远程服务器不满足相互身份验证的要求”而失败。 '** .

好消息 - 不抛出异常的服务调用请求工作正常。

我目前的后备方案是允许 NTLM，我想删除它。我想了解问题的核心，试图克服“Kerberos 总是很困难”的心态。

基本网络细节：

*   根据 NetBios + FQDN 名称和应用程序池的服务帐户为服务注册 SPN。（回退到 http 机器 SPN 对我们不可用
*   匿名被禁用

尝试的异常类型：

*   重新抛出原始异常（客户端可以访问基本异常类型）
*   [FaultException](http://msdn.microsoft.com/en-us/library/ee942778.aspx)，（虽然我不需要自定义异常，它可能适用于）+ 将以下内容添加到每个 web 服务方法：

    [FaultContract(typeof(FaultException))]

## 客户端细节

**设置 ClientCredential**：（客户端）

```
credentials.Windows.ClientCredential = CredentialCache.DefaultNetworkCredentials;
credentials.Windows.AllowNtlm = false; // Set to true to allow it to work;
credentials.Windows.AllowedImpersonationLevel = System.Security.Principal.TokenImpersonationLevel.Delegation; 
```

**以前问题的其他修复：**

*SpnEndpointIdentity*设置，感谢[这个问题](https://stackoverflow.com/questions/1914699/wcf-why-does-passing-in-a-remote-endpoint-fail)

```
SpnEndpointIdentity spnEndpointIdentity = new SpnEndpointIdentity("");
var address = new EndpointAddress(EndpointName, spnEndpointIdentity) 
```

要停止*407 代理错误*：

```
BasicHttpBinding.UseDefaultWebProxy = false; 
```

**客户端收到的异常：（**缩写堆栈跟踪）

（它似乎表明*ProcessGetResponseWebException*调用正在尝试检索异常详细信息）

```
System.ServiceModel.CommunicationException was unhandled
  Message=An error (The request was canceled) occurred while transmitting data over the HTTP channel.
  StackTrace:
       at System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)
    Exception rethrown at [0]: 
       at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
       at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
       at Project.IMetadataManagement.GetMetadata(String identifier)
  InnerException: System.Net.WebException
       InnerException: System.Net.ProtocolViolationException
            Message=The requirement for mutual authentication was not met by the remote server. 
```

* * *

## 服务器端细节

在网络配置中：

*includeExceptionDetailInFaults*为真

```
<behavior name="Project.MetadataBehavior">
  <serviceMetadata httpGetEnabled="true" />
  <serviceDebug includeExceptionDetailInFaults="true" />
</behavior> 
```

**绑定：**

```
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpEndpointBinding">
      <security mode="TransportCredentialOnly">
        <transport clientCredentialType="Windows" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings> 
```

**Windows 身份验证设置**

```
<system.webServer>
    <security>
      <authentication>
        <windowsAuthentication enabled="true" useKernelMode="true" useAppPoolCredentials="true" >
          <providers>
            <clear />
            <add value="Negotiate" />
            <add value="NTLM" />
          </providers>
          <extendedProtection tokenChecking="None" />
        </windowsAuthentication>
        <anonymousAuthentication enabled="false" />
      </authentication>
    </security>
  </system.webServer> 
```

**服务示例**

```
<services>
      <service behaviorConfiguration="Project.MetadataBehavior" name="Project.MetadataManagement">
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="BasicHttpEndpointBinding" contract="Project.IMetadataManagement">
        </endpoint>
</service> 
```

任何和所有的帮助表示赞赏。我已经忽略了实际的项目名称空间，所以希望我没有留下任何笨拙的错位。

谢谢。

# mysql - mysql表中的默认值

> ID：11843328
> 
> 赞同：0
> 
> 时间：2012-08-07T09:49:44.963
> 
> 标签：mysql, sql

我编写了一个 vbs 宏来自动将 DDE Excel 工作表中的值插入到 DB 表中。

问题是一些单元格是空的，所以查询结果是：

```
INSERT INTO `stock_realtime` (`fkstock`, `benefit_month`)
VALUES (77,  '')
    ON DUPLICATE KEY UPDATE `benefit_month` = '',  `created` = NOW(); 
```

但是我的 sql 表包含默认值“0”，仅适用于值为空时的这种情况。

仍然错误`Incorrect integer value:'' for column 'benefit_month' at row 1'`

其他（完整）查询工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:05:40.820

'' 不是空（数字）值，NULL 是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:12:24.943

您正在显式设置`benefit_month`. 如果您没有为字段设置值，则将设置默认值。

这将设置默认值`benefit_month`：

```
INSERT INTO `stock_realtime` (`fkstock`)
VALUES (77) 
```

# sql - gwt html5 数据库选择 WHERE AND

> ID：11843330
> 
> 赞同：0
> 
> 时间：2012-08-07T09:49:55.540
> 
> 标签：sql, database, html, gwt

我在我的项目中使用[http://code.google.com/p/gwt-mobile-webkit/downloads/list?q=label:API-Database](http://code.google.com/p/gwt-mobile-webkit/downloads/list?q=label:API-Database) 。有两个文本框，用户可以输入两个单词。在将这两个词保存在 html 数据库中之前，我正在查看这两个词是否已经在保存的数据库中。问题是我不知道 SELECT * FROM words WHERE word1=value1 AND word2=value2 的正确语法应该如何。

```
final String word1 = view.getWord1TextBox().getValue();
final String word2 = view.getWord2TextBox().getValue();
if(Database.isSupported()){
         Database db = Database.openDatabase("Words", "1.0", "Word App", 10000);
         db.transaction(new TransactionCallback() {
                public void onTransactionStart(SQLTransaction tx) {
                    tx.executeSql("SELECT * FROM words WHERE word1=(?) AND word2=(?)", new Object[]{word1, word2}, new StatementCallback<JavaScriptObject>() {
                        public void onSuccess(SQLTransaction transaction, SQLResultSet<JavaScriptObject> resultSet) {
                             System.out.println(" count of rows : "+ resultSet.getRowsAffected());
                        }

                        public boolean onFailure(SQLTransaction transaction,SQLError error) {

                            return false;
                        }
                    });
                }

                public void onTransactionSuccess() {

                }

                public void onTransactionFailure(SQLError error) {
                    //setTextMessageLabel("Could not open database", label );
                }
            });
    } 
```

resultSet.getRowsAffected() is everytime = 0 应该如何看起来像 correkt 查询？还是还有其他问题？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:24:01.650

你怎么知道你的插入有效？

“SELECT * FROM words”是否返回任何内容？

我使用[http://code.google.com/p/gwt-mobile-webkit/wiki/DataServiceUserGuide](http://code.google.com/p/gwt-mobile-webkit/wiki/DataServiceUserGuide)所以我的语法有点不同，但是使用 chrome 中的开发人员工具，您可以找到数据库并在其中运行 sqlite 命令。

这样做，这给了我一个错误

> SELECT * from course where desc = (summer)

使用引号有效

> SELECT * from course where desc = ("summer") SELECT * from course where desc = "summer"

您可能需要在代码中对其进行转义...

```
"SELECT * FROM words WHERE word1=(\"?\") AND word2=(\"?\")" 
```

# .net - 为什么 SignHash 需要知道使用了什么哈希算法？

> ID：11843336
> 
> 赞同：7
> 
> 时间：2012-08-07T09:50:24.417
> 
> 标签：.net, cryptography, digital-signature

这可能是[http://crypto.stackexchange.com](http://crypto.stackexchange.com)的问题，但我想我会先在这里尝试，因为答案可能与 .NET 而不是加密算法本身有关。

在[RSACryptoServiceProvider 类](http://msdn.microsoft.com/en-us/library/s575f7e2)中，有一个方法[SignHash](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.signhash(v=vs.100))，它：

> 通过使用私钥对其进行加密来计算指定哈希值的签名。

第一个参数是数据的哈希值（看起来很公平），但第二个参数是一个字符串，说明用于创建哈希值的算法。

问题是为什么哈希算法很重要？当然，所有方法需要做的就是使用其私钥加密给定值并返回结果？如果它确实需要知道，为什么 RSACryptoServiceProvider 没有一个方法可以做到这一点（以及适当的验证方法）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T10:30:29.140

感谢 Iridium 让我在这里按照正确的思路思考。

收件人得到两件事：

*   讯息
*   签名（由发件人的私钥加密）

为了验证消息，收件人需要使用发件人的公钥解密签名，并根据消息的哈希值进行检查。

如果没有为接收者指定哈希算法，他们就无法知道如何对消息进行哈希处理，因此他们无法验证它。

**所以算法必须指定给接收者。**

为了让发件人（谁知道签名是如何创建的）指定散列算法，并且不能被其他任何人修改，它需要包含在签名中，并与散列一起加密。

**因此，为了创建有用的签名，需要在加密散列时指定散列算法。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:19:49.903

例如，用于 RSA 签名的 PKCS#1 填充意味着在签名之前将散列函数标识符添加到散列值。

如我所见，您正在使用这种方法。尝试设置另一个具有相同摘要长度的算法，您会发现签名不同。

# javascript - 在多个 TD 中添加分类帐总计

> ID：11843338
> 
> 赞同：1
> 
> 时间：2012-08-07T09:50:31.670
> 
> 标签：javascript, jquery, sum, spreadsheet

此代码生成一个分类帐。我把它缩小到最低限度。通过单击加号，它会在分类帐中添加一个额外的行。

我正在寻找添加变量的每个总计`newAmount`并将其更新的总计定位在每行右侧的 TD 中。我创建`newAmount.id = "mainAmount";`创建唯一 ID 认为这会有所帮助。

```
var mainNumber = 0;

function addElement()
{

  //add a number for each row
  mainNumber++;

  //create each row, id each slot, and add it where it goes
  newDiv = document.createElement("div");
  newDiv.id = "main";
  newTable = document.createElement("table");
  newTable.id = "mainTable";
  newDiv.appendChild(newTable);
  newTr = document.createElement("tr")
  newTr.id = (mainNumber);
  newTr.className = "mainRow";
  newTable.appendChild(newTr);
  newAmount = document.createElement("td");
  newAmount.id = "mainAmount";
  newAmount.className = (mainNumber);
  newPlus = document.createElement("td");
  newPlus.id = "mainPlus";
  newTotalTable = document.createElement("table");
  newDiv.appendChild(newTotalTable);
  newTotalTable.id = "mainTotalTable";
  newTotalTr = document.createElement("tr");
  newTotalTable.appendChild(newTotalTr);
  newTotalTr.id = "mainTotalTr";
  newTotalTd = document.createElement("td");
  newTotalTd.id = "mainTotalTd" + (mainNumber);
  newTr.appendChild(newAmount);
  newTotalTr.appendChild(newTotalTd);

  //whats default inside of each slot
  newAmount.innerHTML = '<form name="formAmount"><textarea name="textAmount" size="25" onfocus="wait();" id="amount' + (mainNumber) + '">0</textarea>';
  newTr.appendChild(newPlus);

  //click this to add a row
  newPlus.innerHTML = '<a href="#" onclick="addElement();"><img src="images/plus.png"></a>';

  // add the newly created element and it's content into the DOM
  my_div = document.getElementById("mainAnchor");
  document.body.insertBefore(newDiv, my_div);

}

//doesn't work...trying to hover over any row and show var idName in console  
function trHover(){ 
$('tr').hover(function() {
    var idName = $('tr'+'#'+(mainNumber)).attr('id');                    
   console.log(idName);
});
}

//when you focus on amount box, this is activated, which adds attribute onblur and stars addTotal
function wait(){
var blurred = $(this).attr("onblur");
blurred = addTotal();
}

//adds total and displays it in td to the right
function addTotal(){
var y = 1;
var sum = 0;
var input;
while( ( input = document.getElementById( 'amount'+y ) ) ) {
    sum += parseInt( input.value );
    ++y;
    console.log(sum);
    $("#mainTotalTd1").text(sum);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:40:31.843

与其添加一行，不如单击加号添加一个 div 和两个表，所以我不确定你要去那里。不过，我可以修复悬停功能：

```
$('tr').hover(function() {
    var idName = $(this).attr('id'); // 'this' is the element being hovered
    console.log(idName);
}); 
```

# objective-c - 如何在objective-c中每秒调用一次方法

> ID：11843339
> 
> 赞同：1
> 
> 时间：2012-08-07T09:50:30.947
> 
> 标签：objective-c, ios, cocos2d-iphone

我的程序有一个循环，每秒进行 60 次计算和绘图。我希望我的运动动作每秒只执行一次，我该如何使用objective-c方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T09:55:52.740

您可以使用

```
+ (NSTimer *)scheduledTimerWithTimeInterval:(NSTimeInterval)seconds target:(id)target selector:(SEL)aSelector userInfo:(id)userInfo repeats:(BOOL)repeats 
```

一秒钟：

```
NSTimer *yourTastTimer = scheduledTimerWithTimeInterval:1 target:yourTarget selector:@selector(yourMethod) userInfo:nil repeats:YES; 
```

您可以查看[NSTimer](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)的文档以获取详细信息。

**编辑**

您可能还想检查[这个答案](https://stackoverflow.com/a/1449104/1477887)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T12:18:58.560

如果您使用 Cocos2D for iphone，则不得使用 NSTimer。

按照[文档](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3abest_practices#timers)，您应该使用这样的`schedule:interval:`方法：

```
[self schedule: @selector(tick:) interval:1.0f];

- (void) tick: (ccTime) dt
{
    //...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T10:04:10.697

如果您使用 CCSprite，他们有一个可以解决问题的 schedule 方法。基本上为主循环做什么。您还可以在主循环中保留一个代码，并检查这是代码%60==0。然后调用你的移动动作。

[我在这里](https://stackoverflow.com/questions/5225227/nstimer-in-cocos2d-application)读到 NSTimer 不鼓励使用 cocos2d 。

# c - 在函数调用之前放置括号的 C 结构是什么样的？

> ID：11843340
> 
> 赞同：0
> 
> 时间：2012-08-07T09:50:31.417
> 
> 标签：c

我今天在 C 编程书的进程和线程章节中遇到了这行代码：

```
printf("[Child]  child thread id: 0x%x\n", (unsigned int)pthread_self()); 
```

我从未见过这部分`(unsigned int)pthread_self()`，我不知道第一对括号是做什么用的。任何的想法？

ps：

我记得在php的文档中，函数文档有类似的表达：

`int time()`

但在实际代码中，我们只使用了 part `time()`， int 是为了说明函数的返回值`time()`

* * *

**更新：**

我在书中输入了测试每个线程 id 的示例代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <sys/types.h>
#include <unistd.h>

int global = 5;

void* ChildCode(void* arg) {
    int local = 10;

    global++;
    local++; 
    printf("[Child]  child thread id: 0x%x\n", (unsigned int)pthread_self());
    printf("[Child]  global: %d  local: %d\n", global, local);

    pthread_exit(NULL);
}

int main() {
  pthread_t  childPid;
  int       local = 10;

    printf("[At start]  global: %d  local: %d\n", global, local);

  /* create a child thread */
  if (pthread_create (&childPid, NULL, ChildCode, NULL) != 0)
  {
    perror("create");
    exit(1);
  } else { /* parent code */
    global++;
    local--; 
    printf("[Parent] parent main thread id : 0x%x\n", (unsigned int)pthread_self());
    printf("[Parent] global: %d  local: %d\n", global, local);
    sleep(1);
  }
  printf("[At end] global: %d  local: %d\n", global, local);
  exit(0);
} 
```

它给了我一些注意事项（不是警告不是错误）：

```
clang example_thread.c 
/tmp/example_thread-9lEP70.o: In function `main':
example_thread.c:(.text+0xcc): undefined reference to `pthread_create'
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我不知道代码，知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:53:31.290

的返回值为`pthread_self()`a `pthread_t`（请参阅[`man pthread_self`](http://linux.die.net/man/3/pthread_self)）。

`(unsigned int) pthread_self()`用于将 的返回值`pthread_self()`转换为无符号整数。

有关 C 中投射的更多信息，请参阅[http://www.aui.ma/personal/~O.Ir ​​aqi/csc1401/casting.htm](http://www.aui.ma/personal/~O.Iraqi/csc1401/casting.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:53:18.877

这只是将函数的返回值转换为`unsigned int`.

就像：

```
pthread_t pthread_self_result;
pthread_self_result = pthread_self();
printf("[Child]  child thread id: 0x%x\n", (unsigned int)pthread_self_result); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T09:53:25.347

括号将返回值转换为`pthread_self`to `unsigned int`。 `pthread_self`返回`pthread_t`，这是一种未指定的算术类型，不适合与 一起使用`printf`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T09:54:23.413

这就是 C 中所谓的“类型转换”。在这里，我们将 pthread_t 类型转换为 unsigned int 以打印它。请参考您的 C 语言手册

# qtp - 如何在 Windows server 2008 R2 中播放 QTP 脚本

> ID：11843341
> 
> 赞同：1
> 
> 时间：2012-08-07T09:50:32.883
> 
> 标签：qtp

我的应用程序使用 Syncfusion 控件，当我使用 QTP 对其进行测试时，我能够记录操作。但是在播放时我得到“对象不支持此方法或属性错误”异常。

此异常仅发生在 Windows 2008 服务器（64 位机器）中。HP 是否有任何补丁可以解决此问题？

任何帮助将不胜感激。

谢谢，

卡莱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:01:44.753

由于 CustomBridge.dll 在 .Net 2 CLR 中加载，会出现此问题。当此程序集尝试加载您的 .Net 4 程序集时，它会失败，因为它试图在 .Net 2 CLR 中加载 .Net 4 程序集。

要解决此问题，您需要处理注册表中的一些更改。尝试[此处建议的选项](http://www.syncfusion.com/support/forums/teststudio-windows/107764)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:40:23.143

这取决于 QTP 的版本，根据[QTP 11 的 PAM](http://support.openview.hp.com/selfsolve/document/KM1210389/binary/QTP11.00_ProductAvailableMatrix.pdf?searchIdentifier=2d441914%3a135a389fa9c%3a-3db1&resultType=document)（产品可用性矩阵），Windows 2008 Server 64 位 SP2 支持开箱即用，无需额外补丁。

# django - Django 对象过滤器 - 价格表现异常，例如 170 被视为 17 等

> ID：11843342
> 
> 赞同：0
> 
> 时间：2012-08-07T09:50:38.797
> 
> 标签：django, string, object, filter, decimal

我有一个简单的对象过滤器，它使用`price__lt`和`price__gt`。这适用于我的产品模型上的一个名为 price 的属性，它是一个`CharField`[string]（十进制看到相同的错误，并导致聚合出现问题，因此恢复为字符串）。

似乎在将这些值传递给过滤器时，它们被以一种奇怪的方式处理，例如 10 被视为 100。例如：

`/products/price/10-200/` 退货价格为 100-200 的产品。过滤器作为 filterargs: 传入 `FILTER ARGS: {'price__lt': '200', 'price__gt': '10'}`。这也打破了 price/0-170 不会返回价格为 18.50 的产品的意义；出于某种原因，它将 170 视为“小于 18”。

知道什么会导致这种情况，以及如何解决它？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:20:13.240

正如 Jeff 所建议的那样，问题在于价格是 a `CharField`，因此使用逐个字符串的比较逻辑进行比较，即任何以 开头的任何长度的字符串`1`都将小于任何以开头的任何长度的字符串，依此类推`2`。

我很好奇您将 price 设置为 a 时遇到了什么问题`IntegerField`，因为这似乎是一个简单的解决方案，但是如果您需要将 price 保持为 a `CharField`，这是一种使查询工作的（hacky）方法：

```
lt = 200
gt = 10
qs = Product.objects.extra(select={'int_price': 'cast(price as int)'},
                           where=['int_price < %s', 'int_price > %s'],
                           params=[lt, gt])
qs.all()  # the result 
```

这使用了Django 的 QuerySet 类的方法，您可以在[此处](https://docs.djangoproject.com/en/dev/ref/models/querysets/#extra)`extra`的文档中阅读该方法。简而言之，它使用 SQL表达式计算字符串价格的整数版本，然后基于该表达式使用整数进行过滤。`cast`

# mysql - MySQL LOAD_FILE 和相对路径 - 是否有任何 GETCWD() 函数？

> ID：11843351
> 
> 赞同：4
> 
> 时间：2012-08-07T09:51:00.280
> 
> 标签：mysql

我正在编写一个脚本，我需要将二进制文件的内容插入到表格单元格中。该函数`LOAD_FILE`仅适用于绝对路径。我需要像这样更新脚本：

```
set @cwd = GETITSOMEHOW();
INSERT ... LOAD_FILE(CONCAT(@cwd, 'fileName.ext')), ... 
```

MySQL 中有*getClientWorkDir函数吗？*

# parsing - 如何解析非 ISO8601 时间戳以在 XSLT 中格式化为 ISO8601？

> ID：11843352
> 
> 赞同：0
> 
> 时间：2012-08-07T09:51:05.803
> 
> 标签：parsing, xslt, datetime

如果我有一个 XSLT 文档，其中包含某种已知格式的时间戳，我如何在模板中解析这些时间戳，以便我可以将它们格式化为 ISO8601？

示例格式：

*   UNIX 纪元毫秒
*   yyMMddHHmmssZ（使用 Java SimpleDateFormat 格式字符串）

在 XSLT 1.0 和 2.0 中如何做到这一点有区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:53:02.213

使用 XSLT 2.0，您可以使用 date 和 dateTime 数据类型来计算日期，例如，将 1970 年以来的 UNIX 纪元毫秒值转换为 dateTime，请参阅[http://p2p.wrox.com/xslt/79802-convert-format-unix-timestamp。 html](http://p2p.wrox.com/xslt/79802-convert-format-unix-timestamp.html)，你可以做例如`xs:dateTime('1970-01-01T00:00:00') + $N * xs:dayTimeDuration('PT0.001S')`. `dateTime`然后你可以用函数`format-dateTime` [http://www.w3.org/TR/xslt20/#format-date](http://www.w3.org/TR/xslt20/#format-date)格式化这样的。

# android - 将迭代器的值添加到数组列表

> ID：11843355
> 
> 赞同：0
> 
> 时间：2012-08-07T09:51:18.623
> 
> 标签：android, arraylist, iterator

我有这个代码：

```
for Iterator <(PhoneNumber)> i = num.iterator(); 
i.hasNext();)
 {
   PhoneNumber aNum = i.next();
   String phoneNum = aNum.getNumber();          
   Number.append(phoneNum + "\n");
 } 
```

基本上我想做的是将phoneNum的值添加到一个数组中，我可以将数组填充到一个listview中。

目前，这些值显示在文本视图（数字）中。如果我将附加更改为 setText，那么它只会添加最后一个值，如果我添加一个中断，那么它只会显示第一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:56:40.373

```
String[][] phoneNum = new String[num.size()][];
for (int i = 0; i < arrayList.size(); i++) {
    ArrayList<String> row = arrayList.get(i);
    phoneNum [i] = row.toArray(new String[row.size()]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:59:53.923

我不知道我是否理解得很好，但我可以试试......

```
ArrayList<String> numList = new ArrayList<String>();
Iterator <(PhoneNumber)> i = num.iterator();
while(litr.hasNext()) {

    PhoneNumber aNum = i.next();
    litr.set(element + "+");
    String phoneNum = aNum.getNumber();    
    //this adds element into list
    numList.add(phoneNum);   
    Number.append(phoneNum + "\n");

} 
```

并通知您必须致电的更改

```
notifyDataSetChanged(); 
```

# java - Java Log4j 覆盖 FileAppenders 的输出

> ID：11843356
> 
> 赞同：1
> 
> 时间：2012-08-07T09:51:20.030
> 
> 标签：java, log4j, logfile

我正在使用 Log4j 记录我的应用程序的输出。log4j.properties 文件内容如下：

```
 log4j.logger.DEFAULT_LOGGER=INFO,main_log, stdout
    log4j.additivity.DEFAULT_LOGGER = false

    # Direct log messages to a log file
    log4j.appender.main_log=org.apache.log4j.FileAppender
    log4j.appender.main_log.File=mainLog.log
    log4j.appender.main_log.layout=org.apache.log4j.PatternLayout
    log4j.appender.main_log.layout.ConversionPattern=%d{yyyy mm dd HH:mm:ss} %5p %c{1}:%L - %m%n

    # Direct log messages to stdout
    log4j.appender.stdout=org.apache.log4j.ConsoleAppender
    log4j.appender.stdout.Target=System.out
    log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
    log4j.appender.stdout.layout.ConversionPattern=%d{yyyy mm dd HH:mm:ss} %5p %c{1}:%L - %m%n 
```

目前发生以下情况。当我开始我调用的主要方法时

```
static Logger log = Logger.getLogger("DEFAULT_LOGGER");
log.fatal("Process Logger"); 
```

它将输出打印到 stdout 和 file.log，这很好。但是当我第二次启动我的应用程序时，它会将输出添加到现有文件中。但我想覆盖日志文件。这可能吗？（我不想使用 Java 进行删除，当然我也不想手动删除它） Log4J 中是否有一个选项来告诉记录器是覆盖还是添加输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:55:57.593

为此，您需要使用[RollingFileAppender](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/RollingFileAppender.html)。

检查类似行的以下 SO 问题：

*   [邮政一](https://stackoverflow.com/questions/965614/how-do-i-overwrite-a-log-file-in-log4j)
*   [帖子二](https://stackoverflow.com/questions/5538278/how-to-keep-single-file-and-overwrite-the-contents-in-the-same-file-using-log4cx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:11:13.773

您可以使用 FileAppender，将 log4j.appender.fileAppender.Append=false 属性添加到它

# .net - 无法从包含“Ycor”的表达式推断“变量名”的类型 - 错误

> ID：11843360
> 
> 赞同：0
> 
> 时间：2012-08-07T09:51:33.650
> 
> 标签：.net, vb.net, for-loop

我来自 C# 背景，现在正在尝试在 VB NET 上编写。

我在 VB NET 中写了几行：

```
For Xcor = 0 To bmp.Width Step (bmp.Width / 10)

        For Ycor = 0 To Ycor <= bmp.Height Step 1

            pixelColor = bmp.GetPixel(Xcor, Ycor)

            hue = pixelColor.GetHue()
            saturation = pixelColor.GetSaturation()

            If ((hue > hueMin) AndAlso (hue < hueMax)) Then

                bmp.SetPixel(Xcor, Ycor, Color.Black)

            End If
          Next
      Next 
```

在这一行中，我得到：

```
 For Ycor = 0 To Ycor <= bmp.Height Step 1 
```

这个错误：

**无法从包含“Ycor”的表达式中推断“Ycor”的类型。**

知道如何修复代码吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T09:52:55.003

我想你的意思是：

```
For Ycor = 0 To bmp.Height Step 1 
```

或者等效地，根据评论：

```
For Ycor = 0 To bmp.Height 
```

[VB`For`循环](http://msdn.microsoft.com/en-us/library/5z06z1kb.aspx)指定它们的边界，而不是条件。（例如，看看你的`Xcor`循环。）

# jquery-mobile - 注销并返回登录时的Jquery移动导航堆栈

> ID：11843365
> 
> 赞同：2
> 
> 时间：2012-08-07T09:51:41.380
> 
> 标签：jquery-mobile, cordova

我的 phonegap 应用程序，我想在用户注销时恢复登录。但如果我使用，

```
$.changePage('#login'); 
```

注销后。它使导航堆栈无法管理，特别是使用 Android back Button 导航。我可以在注销后重置我的导航堆栈吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-07T11:25:31.860

尝试使用

```
$.mobile.navigate('#login'); 
```

# oracle10g - ORacle 表单实用程序

> ID：11843366
> 
> 赞同：1
> 
> 时间：2012-08-07T09:51:53.617
> 
> 标签：oracle10g, oracleforms

它们是否是我们可以确定 Oracle 表单或报表使用的数据库对象列表或使用特定数据库对象的表单和报表列表的任何实用程序。对于 Oracle 表单/报告 10g

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-24T15:36:15.970

曾经有一个由 Quest Software “SQL Impact” 制作的工具，但现在不再支持了。

进行这种分析的最简单方法是将所有 fmb/rdf 转换为 xml，然后在 Ruby 中编写一个脚本来搜索 db 对象名称。

或者，您可以使用 JDAPI 迭代表单对象，但没有用于报告的 JDAPI。使用 JRuby 更容易使用 JDAPI，您可以在此处找到示例脚本：

[https://github.com/tomi44g/OracleFormsJruby](https://github.com/tomi44g/OracleFormsJruby)

# c++ - 如何获取流程描述？

> ID：11843368
> 
> 赞同：2
> 
> 时间：2012-08-07T09:51:58.920
> 
> 标签：c++, windows

我想使用 C++ 在 Windows 中获取进程的描述（在任务管理器中看到的描述）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T10:01:12.037

您很可能希望使用API 调用从程序`FileDesription`主文件的版本资源中获取该字段。以下是该文档中的一个示例：`.exe`[`VerQueryValue()`](https://docs.microsoft.com/en-us/windows/win32/api/winver/nf-winver-verqueryvaluea)

> 以下示例显示如何枚举可用版本语言并检索每种语言的 FileDescription 字符串值。
> 
> 请务必在调用**VerQueryValue**之前调用[GetFileVersionInfoSize](https://docs.microsoft.com/windows/desktop/api/winver/nf-winver-getfileversioninfosizea)和[GetFileVersionInfo](https://docs.microsoft.com/windows/desktop/api/winver/nf-winver-getfileversioninfoa)函数以正确初始化*pBlock*缓冲区。
> 
>  ***```
> // Structure used to store enumerated languages and code pages.
> 
> HRESULT hr;
> 
> struct LANGANDCODEPAGE {
>   WORD wLanguage;
>   WORD wCodePage;
> } *lpTranslate;
> 
> // Read the list of languages and code pages.
> 
> VerQueryValue(pBlock, 
>               TEXT("\\VarFileInfo\\Translation"),
>               (LPVOID*)&lpTranslate,
>               &cbTranslate);
> 
> // Read the file description for each language and code page.
> 
> for( i=0; i < (cbTranslate/sizeof(struct LANGANDCODEPAGE)); i++ )
> {
>   hr = StringCchPrintf(SubBlock, 50,
>             TEXT("\\StringFileInfo\\%04x%04x\\FileDescription"),
>             lpTranslate[i].wLanguage,
>             lpTranslate[i].wCodePage);
>   if (FAILED(hr))
>   {
>   // TODO: write error handler.
>   }
> 
>   // Retrieve file description for language and code page "i". 
>   VerQueryValue(pBlock, 
>                 SubBlock, 
>                 &lpBuffer, 
>                 &dwBytes); 
> } 
> ```***

 **** * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-05-10T11:53:28.917

虽然我阅读了这个问题、接受的答案和 的文档`VerQueryValue`，但我花了很长时间来了解如何使用该`VerQueryValue`函数（因为文档中的代码示例没有变量声明，对我来说根本不清楚） .

因此，我决定将可以轻松运行的代码放在这里，作为`VerQueryValue`获取流程描述的使用示例。

```
#pragma comment(lib,"Version.lib")

#include <iostream>
#include <windows.h>
#include <winver.h>

using namespace std;

int printFileDescriptions(const wchar_t* filename)
{
    int versionInfoSize = GetFileVersionInfoSize(filename, NULL);
    if (!versionInfoSize) {
        return 0;
    }

    auto versionInfo = new BYTE[versionInfoSize];
    std::unique_ptr<BYTE[]> versionInfo_automatic_cleanup(versionInfo);
    if (!GetFileVersionInfo(filename, NULL, versionInfoSize, versionInfo)) {
        return 0;
    }

    struct LANGANDCODEPAGE {
        WORD wLanguage;
        WORD wCodePage;
    } *translationArray;

    UINT translationArrayByteLength = 0;
    if (!VerQueryValue(versionInfo, L"\\VarFileInfo\\Translation", (LPVOID*)&translationArray, &translationArrayByteLength)) {
        return 0;
    }

    // You may check GetSystemDefaultUILanguage() == translationArray[i].wLanguage 
    // if only the system language required
    for (unsigned int i = 0; i < (translationArrayByteLength / sizeof(LANGANDCODEPAGE)); i++) {
        wchar_t fileDescriptionKey[256]; 
        wsprintf(
            fileDescriptionKey,
            L"\\StringFileInfo\\%04x%04x\\FileDescription",
            translationArray[i].wLanguage,
            translationArray[i].wCodePage
        );

        wchar_t* fileDescription = NULL;
        UINT fileDescriptionSize;
        if (VerQueryValue(versionInfo, fileDescriptionKey, (LPVOID*)&fileDescription, &fileDescriptionSize)) {
            wcout << endl << fileDescription << endl;
        }
    }

    return TRUE;
}

int main()
{
    // Set locale of the console to print non-ASCII symbols
    SetConsoleOutputCP(GetACP());
    SetConsoleCP(GetACP());
    wcout.imbue(std::locale("")); // set default global locale
    // ----------------------------------------------------

    auto path = L"C:\\Windows\\explorer.exe";
    printFileDescriptions(path);

    wcin.get(); // to prevent console close
} 
```

假设你系统上的所有WinAPI函数都使用`wchar_t`了，也`VerQueryValueW`就是实际使用了。

我在此处获取的代码的初始版本[Retrieve File Description an Application VerQueryValue](https://stackoverflow.com/questions/53123914/retrieve-file-description-an-application-verqueryvalue)***

# c++ - 如何解决c++中的“表达式必须是可修改的左值”错误？

> ID：11843369
> 
> 赞同：1
> 
> 时间：2012-08-07T09:52:02.757
> 
> 标签：c++, visual-c++

```
const int ADJ_MATRIX[VERTEX_NUM][VERTEX_NUM]={   
                                                {0,1,1,0,0,0,0,0},
                                                {1,0,0,1,1,0,0,0},
                                                {1,0,0,0,0,1,1,0},
                                                {0,1,0,0,0,0,0,1},
                                                {0,1,0,0,0,0,0,1},
                                                {0,0,1,0,0,0,1,0},
                                                {0,0,1,0,0,1,0,0},
                                                {0,0,0,1,1,0,0,0}
                                            };

typedef struct {
    int vertex;
    int matrix[VERTEX_NUM][VERTEX_NUM];
    int vNum;
    int eNum;
}Graph;

void buildGraph(Graph *graph){
    graph->vNum = VERTEX_NUM;
    graph->eNum = EDGE_NUM;
    graph->matrix = ADJ_MATRIX;
} 
```

错误出现在这句话中：

```
graph->matrix = ADJ_MATRIX; 
```

我是 C++ 新手。请告诉我为什么会出现这个问题以及如何解决？

我想将 ADJ_MATRIX 分配给`struct`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T10:05:21.990

As was said, you can't assign arrays in C++. This is due to the compiler being a meanie, because the compiler can. It just won't let you do it...

... unless you trick it ;)

```
template <typename T, int N>
struct square_matrix {
    T data[N][N];
};

square_matrix<int, 10> a;
square_matrix<int, 10> b;
a = b; // fine, and actually assigns the .data arrays
a.data = b.data; // not allowed, compiler won't let you assign arrays 
```

The catch? Now the code needs some little things:

```
const square_matrix<int, VERTEX_NUM> ADJ_MATRIX={{ 
                                               // blah blah
                                            }}; // extra set of braces

typedef struct {
    int vertex;
    square_matrix<int, VERTEX_NUM> matrix;
    int vNum;
    int eNum;
}Graph;

void buildGraph(Graph *graph){
    graph->vNum = VERTEX_NUM;
    graph->eNum = EDGE_NUM;
    graph->matrix = ADJ_MATRIX; // no change
} 
```

And to access the cells, now we need to use `graph->matrix.data[1][2]`. This can be mitigated by overloading `operator[]` or `operator()` for `square_matrix`. However, this is now getting terribly close to the new `std::array` class, or the Boost equivalent `boost::array`, so it might be wise to consider those instead.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T09:57:18.840

不幸的是（或者也许幸运的是，谁知道......）在 C++ 中，您不能只将一个数组分配给另一个数组。

如果要复制数组，则需要将其中的每个元素一个一个复制到一个新数组中，或者使用以下`memcpy()`函数：

```
for( int i = 0; i < VERTEX_NUM; i++ )
    for( int j = 0; j < VERTEX_NUM; j++ )  
       graph->matrix[i][j] = ADJ_MATRIX[i][j]; 
```

或者

```
memcpy( graph->matrix, ADJ_MATRIX, VERTEX_NUM * VERTEX_NUM * sizeof(int) ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T09:56:30.183

数组不可赋值。您可以使用`memcpy`：

```
memcpy(graph->matrix, ADJ_MATRIX, sizeof(graph->matrix)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T09:56:19.090

您正在尝试分配常量数据的变量地址，请尝试使用

```
memcpy(graph->matrix,ADJ_MATRIX,sizeof(ADJ_MATRIX));//using sizeof(graph->matrix) is safer. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T09:58:27.810

您不能将一个数组分配给另一个数组。您将需要按索引将元素从源索引复制到目标索引，或用于`memcpy`复制数据。不允许这样的数组赋值

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T09:56:33.037

您不能在作业中使用数组。您可以使用循环或`memcpy`代替

```
memcpy(graph->matrix, ADJ_MATRIX, VERTEX_NUM * VERTEX_NUM * sizeof(int)); 
```

或者

```
for(int i = 0; i < VERTEX_NUM; ++i){
    for(int j = 0; j < VERTEX_NUM; ++j){
        graph->matrix[i][j] = ADJ_MATRIX[i][j];
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-07T10:00:28.870

抛出错误，因为`int matrix[VERTEX_NUM][VERTEX_NUM]`在结构定义中意味着每个结构将具有一个由预定义大小的整数组成的二维数组，并且`matrix`将指向其第一个元素。问题是`matrix`不能分配给任意地址，因为它是一个常量指针，即它的值（它指向的地址）不能改变。

您在这里有 2 个选项：您可以使用`memcpy`或一些 stl 算法直接将其复制`ADJ_MATRIX`到矩阵中，或者您可以声明`matrix`为指针并执行当前产生错误的赋值。

后者可以通过以下方式完成：

```
typedef struct {
    int vertex;
    const int (*matrix)[VERTEX_NUM];
    int vNum;
    int eNum;
}Graph; 
```

因此，您可以进行分配，但由于 constness `graph->matrix = ADJ_MATRIX`，您将无法修改单个项目。`matrix`这意味着，`graph->matrix[0][1] = 3;`不允许，而您可以自由阅读元素。

# node.js - Zombiejs 如何在特定情况下使用

> ID：11843372
> 
> 赞同：1
> 
> 时间：2012-08-07T09:52:19.437
> 
> 标签：node.js, zombie.js

我开始使用zombiejs，但我有一些初学者问题：

1.) 如何测试 ajax 调用？例如我有 php ajax 动作（Zend）

```
 public function ajaxSomeAction()
 {
    $oRequest = $this->getRequest();
    if($oRequest->isXmlHttpRequest() === false || $oRequest->isPost() === false) {
        throw new Zend_Controller_Action_Exception('Only AJAX & POST request accepted', 400);
    }

  //process check params...
 } 
```

我的zombiejs 测试代码抛出http 400。

2.) 如何触发 jquery 插件的公共方法？例如我有代码：

```
(function($) {

 $.manager.addInvitation = function()
 {
    //some code ....
 }

 $.manager = function(options)
 {
    //some code
 }
})(jQuery); 
```

我尝试：

```
Browser.visit(url, function(err, browser, status) 
{
   // not work
   browser.window.jQuery.manager.addInviation();

   // also not work
   browser.document.jQuery.manager.addInvitation();
   browser.window.$.manager.addInvitation();
   browser.evaluate('$.manager.addInvitation();');

}) 
```

3.) 如何用zombiejs 修改标题？例如，我想添加标头 x-performace-bot:zombie1 以请求使用访问方法发送

```
Browser = require('zombie');
Browser.visit(url, {debug:true}, function(err, browser, status) 
{
    //send request witch header x-performace-bot
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:50:46.683

经过快速测试（在僵尸 0.4.21 上）：

广告 1\. 当您检查 ( `$oRequest->isXmlHttpRequest()`) 是否请求是 xml http 请求时，您必须指定（在僵尸中）`X-Requested-With`标头，其值为`XMLHttpRequest`.

广告 2。

```
// works for me (logs jQuery function - meaning it's there)
console.log( browser.window.jQuery );
// that works to...
browser.window.$ 
```

您的代码必须是未定义的，或者您的页面上的 Javascript 中存在其他一些错误。

广告 3\. 有一个**header**选项，您可以像使用*debug*一样传递它。

# internationalization - webnms的国际化

> ID：11843378
> 
> 赞同：0
> 
> 时间：2012-08-07T09:52:48.667
> 
> 标签：internationalization

我想在我的 webnms 客户端中使用除英语之外的另一种语言，但是 webnms 中的下拉菜单有很多语言，所以用户选择一种语言很烦人！我想从客户端启动中显示的下拉菜单中删除其他语言，以便客户端可以轻松选择一种语言。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:15:50.687

您可以修改文件 LanguagesAndCountries.txt 中的条目，该文件位于

类/NmsClientClasses.jar 类/NmsServerClasses.jar

进行更改后，再次在上述 jar 中更新最新的。

# javascript - 使用动态键访问数组

> ID：11843387
> 
> 赞同：-4
> 
> 时间：2012-08-07T09:53:09.307
> 
> 标签：javascript, jquery

我有一个智能分配的数组（名称数组），我想访问数组中每个元素的值。我知道我们需要在这里使用 eval，但不知道如何使用它？

```
var loop = 'true' , text , i=0;
while(loop == 'true')
{
   text = ~$array[i] ;//ERROR :-(
   i++;
   if(text=='')
       loop = 'false';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:56:45.207

```
for (i in $array){
    text = $array[i]; //No error
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:57:27.653

要访问数组的每个值，只需使用`for`循环：

```
var i, text;
for( i=$array.length; i--; ) {
   text = $array[ i ];
   // do something with text
} 
```

# iphone - iOS屏幕锁定时的网络断开问题

> ID：11843395
> 
> 赞同：0
> 
> 时间：2012-08-07T09:53:36.257
> 
> 标签：iphone, ios, xcode

在 iOS 5 中，当 Application Enter 后台 wi-fi 连接丢失。

但是我想在设备休眠前的接下来的 4-5 分钟内使用 wi-fi 连接，因为某些任务可以在应用程序进入后台的 4-5 分钟内执行。

我认为这可以通过使用来完成`beginBackgroundTaskWithExpirationHandler:`，但我无法解决问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:52:09.723

我处理这个问题的方法是`beginBackgroundTaskWithExpirationHandler`用于我发送的每个网络请求。
这样，即使我的应用程序移至后台，我也可以确保我的所有网络都将完成。

我通常使用一个单例对象来处理所有网络请求，所以在发送请求之前我调用

```
- (void)startBackgroundTask
{
    // ask for extra time if this is called when app go to suspended
    UIApplication *application = [UIApplication sharedApplication];

    _bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
        // Clean up any unfinished task business by marking where you.
        // stopped or ending the task outright.
        [application endBackgroundTask:_bgTask];
        _bgTask = UIBackgroundTaskInvalid;
    }];
} 
```

在我得到响应（成功/失败）或者如果我取消请求后，我会打电话

```
- (void)stopBackgroudTask
{    
    UIApplication *app = [UIApplication sharedApplication];

    if (_bgTask != UIBackgroundTaskInvalid) {
        [app endBackgroundTask:_bgTask]; 
        _bgTask = UIBackgroundTaskInvalid;
    }
} 
```

* 不要忘记定义`UIBackgroundTaskIdentifier *_bgTask;`

此外，如果您打算大量使用 Wi-Fi，则应将`Application uses Wi-Fi`plist 文件中的密钥设置为 YES，否则即使您的应用程序正在运行，您的 Wi-Fi 也会在 30 分钟后关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:59:00.247

只需禁用 iPhone 即可进入睡眠模式

```
-(void) sleepModeDisable{
[[UIApplication sharedApplication] setIdleTimerDisabled:NO];
[[UIApplication sharedApplication] setIdleTimerDisabled:YES]; 
```

}

每 10 秒调用一次这个函数，这可能对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-01T07:12:40.377

这里没有火箭科学，这是 iOS 中的预期行为，即在手机锁定时 Wi-Fi 会在手机锁定时关闭，除非你告诉 iOS 你的应用程序需要持久 Wi-Fi，然后当你的应用程序运行时它不会为你关闭它跑步。

为此，只需添加`UIRequiresPersistentWiFi`到您的 info.plist 并标记它`YES`

[文档](https://developer.apple.com/library/prerelease/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW12)

# java - Java Swing - 如何分离 UI 组件

> ID：11843397
> 
> 赞同：0
> 
> 时间：2012-08-07T09:53:38.277
> 
> 标签：java, swing, user-interface

我有两个 UI 组件如下：

```
class UIPanel extends JPanel{ ... }

class MainPanel { Model m;
    //instantiates UIPanel } 
```

这里的问题是，在 UIPanel 类中，我想添加一个 ActionListener，它将使用 Model 来决定如何处理用户操作。不幸的是，我决定拆分这两个类，我无法直接访问模型。一个明显的解决方案是将 UIPanel 类简单地粘贴在 MainPanel 中，但我在想是否有办法保持拆分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:01:03.460

您可以简单地`UIPanel`引用以下内容`Model`：

```
class UIPanel {
    UIPanel(Model m) {
         m.addActionListener(listener);
    }
}

class MainPanel {
    ...
    MainPanel() {
        ...
        UIPanel uiPanel = new UIPanel(m); // Constructor, a separate setter would be possible also
        ...
     }
} 
```

这显然是一个非常紧密的耦合。也许`MainPanel`根本不需要参考`Model`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:59:35.110

听起来您需要添加一个控制器类（使其更像 MVC）。操纵模型的控制器将听到视图操纵。然后模型会触发一个事件，说它已经改变并且视图会监听。收到通知后，视图将更新。

所以它是控制器，它从 UI 监听用户事件并决定如何处理它。

然后模型可以触发多个视图。如果您希望有多个控制器作用于同一模型（每个视图一个）或在控制器上监听来自每个视图的事件，您可以这样做。就我个人而言，我会为一个视图使用一个控制器。

# android - Android : droidar 设置 POI 并在点击时显示详细信息

> ID：11843402
> 
> 赞同：0
> 
> 时间：2012-08-07T09:54:06.253
> 
> 标签：android, augmented-reality

在我的应用程序中，我想使用增强现实来显示一些预定义的 POI。当用户单击 POI 对象时，我想显示有关该商店/对象的更多详细信息。

当我在寻找免费的 AR 框架时，我遇到了 Droidar。我看到了它的 wiki 和示例，并且对结构有所了解。我了解如何添加 POI。我需要帮助以使它们可点击并在点击时添加事件。

如果您知道，请分享任何教程。

还有什么是 droidar 文档的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:20:22.143

您可以随时将 setOnClickCommand 附加到您的 POI

```
poiObj.gObj.setOnClickCommand(new POIDisplayCommand(getActivity(), poiObj)); 
```

在上述情况下，我有一个 POI 对象 poiObj，它有一个 GeoObj 成员 gObj。通过使用 setOnClickCommand，我调用了一个 POIDisplayCommand，它加载了一个新的 Activity，它显示了有关单击的 POI 的详细信息。POIDispplayCommand 是一个扩展 commands.Command 的类

如果您需要更多关于上述方法的信息，您可以随时检查 IDE 中 DroidAR 库的 de.rwth.setups 包中的 StaticDemoSetup.java。

# php - PHP，将 UTF-8 转换为 ASCII 8 位

> ID：11843407
> 
> 赞同：9
> 
> 时间：2012-08-07T09:54:47.310
> 
> 标签：php, encoding, utf-8, ascii, iconv

`iconv`我正在尝试使用该函数将字符串从 UTF-8 转换为 ASCII 8 位。该字符串旨在导入会计软件（根据 SIE 标准解析的一些基本指令）。

我现在正在运行的内容：

```
iconv("UTF-8", "ASCII", $this->_output) 
```

这适用于会计软件#1，但软件#2 抱怨编码。标准规定的编码是：`IBM PC 8-bit extended ASCII (Codepage 437)`.

我的问题是，PHP 将我的字符串编码成什么版本的 ASCII，如果不是指定的 - 我如何根据标准规范对字符串进行编码？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T09:59:06.313

试试这个软件#2

```
iconv("UTF-8", "CP437", $this->_output); 
```

扩展 ASCII 与纯 ASCII 不同。第一个可能接受 ASCII，但第二个软件需要扩展 ASCII - 代码页 437

看到这个[链接](http://en.wikipedia.org/wiki/Code_page_437)

# hibernate - 在 JPA 中指定外键

> ID：11843408
> 
> 赞同：0
> 
> 时间：2012-08-07T09:54:47.733
> 
> 标签：hibernate, jakarta-ee, jpa, foreign-keys

我目前有一个看起来像这样的表：

用户

用户名地址 dob ...

和

角色用户名角色

我想在 Role.username 和 User.username 之间建立一个外键约束。我应该如何与安一起做这件事

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:42:18.467

约束将从您正在使用的 DBMS 创建。然后使用 JPA，您将映射它。

JPA 的一个很好的参考是这本书： [Pro JPA 2](https://rads.stackoverflow.com/amzn/click/com/1430219564)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T23:47:13.380

1.  如果您可以从表/类型名称的末尾删除“s”会很好 - 每行/实例代表一个项目，而不是很多。

2.  在角色实体中使用`@ManyToOne`带注释的字段 - 字段类型为“用户”，名称为“用户”。这是 Role 拥有的关系字段 - FK 列将进入 Role 表。

3.  或者，`@OneToMany(mappedBy="user")`在用户实体中使用注释字段 - 字段类型为`Collection<Role>`or `List<Role>`，具体取决于您在写入数据库时​​是否要保留应用程序插入的顺序。这是一个非拥有关系字段，这意味着没有 FK 列将进入用户表 - 我们必须使用`mappedBy`来命名用户实体上的拥有关系。 *但是，如果您省略 (2) 并包含 (3)，这将变为拥有，然后不再使用 mappedBy，但可以使用 column="some_db_colname" 代替。*

4.  在用户名上设置的用户实体`@Id`中（基本类型的单个 PK 字段）。

5.  `@Id`在用户（非基本类型）和角色（基本类型）上设置的角色实体中。

此外，因为您有两个`@Id`字段并且其中一个不是基本类型，所以您必须另外创建一个`RoleId`重复相同字段名称的类，但这一次，将数据类型映射到基础基本类型 - 如 PK 中所示引用实体的字段并与基础数据库表一致。注释角色`@IdClass(RoleId)`

```
@Entity
public class User {

     @Id
     String username;  // for simplicity match the db column name

     String address;

     Date dateOfBirth;

     @OneToMany(mappedBy="user")
     Collection<Role> rolesForUser;

     // other fields and methods
}

@Entity
@UserId(RoleId)
public class Role {

     @Id
     @ManyToOne
     User user;

     @Id
     String role;  // for simplicity, match the DB column name

     // other fields and methods
}

public class RoleId {

     String user;

     String role;

     public RoleId() { // ...}  // all entities must have no-arg constructor
     // additional arg constructor - so we can set fields without having setters
     public RoleId(String user, String role) { this.user = user; this.role = role}  

     public String getUser() { return user; }  // omit setter: Id is immutable once created
     public String getRole() { return role; }  // omit setter: Id is immutable once created
} 
```

准备使用... =:-)

# java - Java反射派生类

> ID：11843412
> 
> 赞同：3
> 
> 时间：2012-08-07T09:54:53.853
> 
> 标签：java, reflection

这是我的场景“我有一个抽象类。有许多派生类使用注释扩展这个抽象类。此外，我有一个抽象类的方法，它反映了一个特定派生类中的所有符号”。

```
// Here's a definition of annotation
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface SampleAnnotation {
   int sample();
}

public abstract class A { 

 // Here's a method to reflect all annotations
 // in particular derived class like B or C
 @Override
 public void foo() {

 }}

public class B extends A {
  @SampleAnnotation (sample = 1)
  public void step1() {}

  @SampleAnnotation (sample = 2)
  public void step2() {}

}

public class C extends A {
  @SampleAnnotation (sample = 1)
  public void step1() {}

  @Sample (stage = 2)
  public void step2() {}
} 
```

如何使用 java 反射来反映特定派生类（如 B 或 C ）中的所有注释？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:12:44.870

也许您想到的是这个[Reflections](http://code.google.com/p/reflections/)库。

> 使用反射，您可以查询元数据，例如：
> 
> *   获取某种类型的所有子类型
> *   获取所有带有一些注释的类型/方法/字段，没有注释参数匹配
> *   获取匹配正则表达式的所有资源

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:13:29.777

这取决于：

1.  是否要获取**具体类的所有方法注解**
2.  是否要获取**所有具体类的所有方法注解**

第一个可以通过这样的方法实现来实现`foo`：

```
public void foo() {
     for (Method method : this.getClass().getDeclaredMethods()) {
          for (Annotation a : method.getAnnotations()) {
              // do something with a
          }
     }
} 
```

然后你可以从你的具体类中调用`foo`，例如：

`new B().foo();`

For the second case you will need to do class path scanning as *Peter Lawrey* has pointed out.

# sql-server - 来自 2 个变量的值正在存储过程中交换

> ID：11843413
> 
> 赞同：0
> 
> 时间：2012-08-07T09:55:08.730
> 
> 标签：sql-server, stored-procedures

我修改了一个存储过程并添加了一个额外的参数以添加到表中。问题是添加参数的值正在与原始参数交换。

```
ALTER PROCEDURE [dbo].[spWeb_BulkGenerateWRsDevices]
(
    @WorkRequestDeviceId nvarchar(max) = NULL,
    @TechnicianId int = NULL,
@RequiredBy  datetime = NULL,
@Priority   int = NULL,
@WRTypeId int,
@WorkRequestSummary nvarchar(255) = NULL,
@AuthorOfRequest   int,
@Contact nvarchar(40) = NULL,
@PhoneNo  nvarchar(20) = NULL,
@StatusId int,
@Created  datetime = NULL,
@CustomerId int
)
AS
/* Update the WR record */
BEGIN
DECLARE @COUNT INT
SET @COUNT =(SELECT COUNT(*) FROM WorkRequest WHERE WorkRequestDeviceId IN(SELECT stringval FROM     dbo.CSV(@WorkRequestDeviceId)))

IF @COUNT >0

BEGIN
DECLARE @InsertedRows AS TABLE (WorkRequestId int,WorkRequestDeviceId int)

INSERT INTO WorkRequest 
(AllocatedTo,RequiredBy,Priority,WRTypeId,WorkRequestSummary,AuthorOfRequest,
    Contact,PhoneNo,StatusId,DateOfRequest,WorkRequestDeviceId,CustomerId)

OUTPUT Inserted.WorkRequestId,Inserted.WorkRequestDeviceId INTO @InsertedRows

     SELECT @TechnicianId ,@RequiredBy,@Priority,@WRTypeId,@WorkRequestSummary,@AuthorOfRequest,@Contact
        ,@PhoneNo,@StatusId,@Created,@CustomerId,* from dbo.fnSplit(@WorkRequestDeviceId, ',')

END

IF @COUNT = 0
BEGIN

INSERT INTO WorkRequest 
(WorkRequestDeviceId)
SELECT * from dbo.fnSplit(@WorkRequestDeviceId, ',')

UPDATE WorkRequest 
SET 
AllocatedTo =@TechnicianId ,
RequiredBy = @RequiredBy,
Priority = @Priority,
WRTypeId = @WRTypeId,
WorkRequestSummary =@WorkRequestSummary,
AuthorOfRequest= @AuthorOfRequest,
Contact = @Contact,
PhoneNo = @PhoneNo,
StatusId = @StatusId,
DateOfRequest = @Created,
CustomerId = @CustomerId
WHERE WorkRequestDeviceId IN(SELECT stringval FROM dbo.CSV(@WorkRequestDeviceId))

END 
```

我添加了 CustomerId 参数。当我调用该过程并说设置 WorkRequestDeviceId = 312 和 CustomerId = 148 时，表 WorkRequest 有一条新记录，但 WorkRequestDeviceId = 148 和 CustomerId = 312。我是存储过程的新手，很抱歉我的无知，有什么想法吗？詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:57:52.850

您的插入正在转置插入语句和选择中的变量。

将插入内容更改为：

```
INSERT INTO WorkRequest 
(AllocatedTo,RequiredBy,Priority,WRTypeId,WorkRequestSummary,AuthorOfRequest,
    Contact,PhoneNo,StatusId,DateOfRequest,CustomerId,WorkRequestDeviceId) 
```

一切都应该没问题。

# c# - ExtJS 4 和 C# REST - 基本示例

> ID：11843416
> 
> 赞同：1
> 
> 时间：2012-08-07T09:55:28.827
> 
> 标签：c#, wcf, rest, extjs4, asp.net-3.5

我正在构建一个使用 ExtJS 4 的简单 .NET 3.5 Web 应用程序

我创建了 ASP.NET 应用程序，向其中添加了 ExtJS，并使用 asmx 服务进行了所有客户端-服务器通信。但我想将它们转换为 REST 服务。我正在查看网络，但没有找到任何示例。

我尝试将 svc 服务添加到我的解决方案中，但我不知道应该使用哪一个？启用 Ajax 或 WCF 服务。

我的服务中只需要 4 个简单的操作（目前）：

*   获取所有记录，
*   创建新记录
*   更新记录
*   删除记录

标准 CRUD，但我想使用 REST 创建它。

1.  如何在 ASP.NET Web 应用程序中创建 REST 服务。
2.  我应该如何命名我的方法以及如何为它们创建 uri 模板以便它们可以与 ExtJS 一起使用？
3.  如何配置 Web.config 以便一切正常。

我发现了这个问题：[REST from asp.net 2.0](https://stackoverflow.com/questions/691111/rest-from-asp-net-2-0) 但我想知道如何将 REST 与 ExtJS 连接起来。

**我的问题：
我应该如何将 WCF 服务 (svc) 添加到 ASP.NET 应用程序（VS2005、.NET 3.5），
如何创建方法和配置 Web.config 以允许 ExtJS REST 存储和 Web 服务之间的通信。**

# c - 在重复元素 XOR 运算符的数组中找到两个非重复元素？

> ID：11843418
> 
> 赞同：5
> 
> 时间：2012-08-07T09:55:39.323
> 
> 标签：c, algorithm, xor

假设我有一个包含 2n+2 个元素的数组。数组中的 n 个元素出现两次，其余两个元素是唯一的。你必须在 O(n) 时间和 O(1) 空间内解决这个问题。解决方案之一是使用 XOR。但我无法理解。任何人都可以帮助我或者可以给我更好的解决方案吗？

问题和解决方法的链接是[这里](http://www.geeksforgeeks.org/archives/2457)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-07T10:00:59.353

首先要注意的是`a xor a == 0`，对于每个`a`。

假设您有两个唯一的数字 - `x,y`。

如果你对每个元素执行异或，你最终会得到一个数字，它等于`x xor y`（因为每个欺骗对都会使自己无效），并且至少有一个“向上”位。选择这个位（如果有一个以上的位，你取哪个位无关紧要），并将列表分成两个子列表：
（1）设置了这个位的所有数字。
(2) 所有未设置此位的数字。

一个唯一编号有这个位，另一个没有（否则 - 它一开始就没有“向上”），所以每个列表中都有一个唯一编号。

再次迭代每个列表，并对所有元素进行异或，结果是该列表中的唯一编号，因为每个重复对都会使自己无效。

# version-control - 如何使用 cvs 有效地获取新目录？

> ID：11843419
> 
> 赞同：0
> 
> 时间：2012-08-07T09:55:41.353
> 
> 标签：version-control, cvs

如果另一个开发人员将新目录添加到 CVS 存储库，我希望下一次更新将这个新目录带入我的工作副本。跑步`cvs update`不会这样做。跑步`cvs update -d`可以，但需要很长时间；它打印存储库中每个文件的路径名，并花一点时间考虑每个文件。在新目录的父目录中运行`cvs update -d <dirname>`可以完成这项工作，但我必须首先了解新目录，并且我必须为每个新目录执行此操作。

有没有从 CVS 服务器获取完整更新（包括任何新添加的目录）的有效方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T01:21:51.257

使用为此类更新生成自定义 $CVSIGNORE 列表的 shell 脚本，然后`runs cvsupdate -d`执行以下操作：

```
CVS 有一个在运行更新、导入和发布时应该忽略的文件列表（或 sh(1) 文件名模式）。该列表按以下方式构建。

    该列表被初始化为包括某些文件名模式：与 CVS 管理相关联的名称，或与其他常见源代码控制系统相关联的名称；补丁文件、目标文件、存档文件和编辑器备份文件的通用名称；以及其他通常是各种实用程序工件的名称。目前，被忽略的文件名模式的默认列表是：

        RCS SCCS CVS CVS.adm
        RCSLOG cvslog.*
        标签 TAGS
        .make.state .nse_depinfo
        *~ #* .#* ,* _$* *$
        *.old *.bak *.BAK *.orig *.rej .del-*
        *.a *.olb *.o *.obj *.so *.exe
        *.Z *.elc *.ln
        核

    如果该文件存在，则 '$CVSROOT/CVSROOT/cvsignore' 中的每个存储库列表将附加到列表中。
    如果存在，则将主目录中“.cvsignore”中的每个用户列表附加到列表中。
    环境变量 $CVSIGNORE 中的任何条目都将附加到列表中。
    附加给 CVS 的任何“-I”选项。
    当 CVS 遍历您的目录时，任何 '.cvsignore' 的内容都将附加到列表中。'.cvsignore' 中的模式仅对包含它们的目录有效，对任何子目录无效。

在上面列出的 5 个位置中的任何一个中，一个感叹号 ('!') 都会清除忽略列表。如果您想存储通常被 CVS 忽略的任何文件，则可以使用此选项。

```

**参考**

*   [通过 cvsignore 忽略文件](https://docs.freebsd.org/info/cvs/cvs.info.cvsignore.html)

# ms-access - 如何在 Sharepoint 2010 的导入数据列表中设置要链接的列？

> ID：11843420
> 
> 赞同：0
> 
> 时间：2012-08-07T09:55:47.623
> 
> 标签：ms-access, sharepoint-2010

我有一个包含 1800 条记录的 Access 数据库，当移动到 Sharepoint 列表时，它会随机设置链接列，例如：我有以下列：“徽章编号”、“名称”和“文件状态”。

每次将其移动（导入）到 Sharepoint 列表时，都会将“文件状态”设置为链接到该项目。如何设置要链接到项目的“名称”列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:00:00.377

这里不太清楚，但您似乎确实暗示您在这里涉及的表格不止一张。如果您要将表发送到 SharePoint 并使用 SharePoint 的新关系功能，则需要在将这些 Access 表发送到 SharePoint 之前在这些表中设置关系。

> 每次移动到 Sharepoint 列表时，它都会设置“文件状态”以链接到该项目。

嗯，这里的“项目”不清楚您的意思？您是否在谈论多个表及其用于关联这两个表的 PK（主键值）和 FK（外键）值（或者这里涉及的表甚至不止一个 - 我无法从您的描述中看出？

因此，将表格发送到 SharePoint 通常既不是问题也不是问题。发送带有相关数据的表格——这是这里问题的主要区别。

因此，在上移相关数据表时，这对 SQL 服务器或任何系统来说都是一个挑战，因为在上载期间，目标系统上的 PK 自动数值通常会发生变化。因此，这样的设置通常表明您需要对子表进行级联更新，以在上传期间保持相关数据的完整性。

但是，请记住 Access CAN 将数据上传到 SharePoint，并且 SharePoint WILL + CAN 尊重相关表，但它也会在上传期间更改 PK 值。这意味着在符合 SharePoint 的表中设置关系非常重要，否则由于在上传期间自动编号被重新编号（更改），您将失去表之间的逻辑关系。

但是，我在下面的视频中解释了如何从 Access 中放大相关数据，并且内置工具将允许对数据和子表进行这种类型的放大，并且它们的 FK 值将自动为您更改。

[http://www.youtube.com/playlist?list=PL27E956A1537FE1C5&feature=plcp](http://www.youtube.com/playlist?list=PL27E956A1537FE1C5&feature=plcp)

# bash - sudo bashfile 导致语法错误

> ID：11843423
> 
> 赞同：0
> 
> 时间：2012-08-07T09:56:06.047
> 
> 标签：bash, cron, crontab, sudo, du

我有一个 bash 文件，我想通过 sudo crontab 列表进行切换。问题是，它不起作用，因为当我使用 sudo 运行脚本时，这一行出现语法错误消息：

```
size=(`du -h $backupDir --summarize`) 
```

如果我不运行相同的脚本，我必须输入 sudo pw，但它可以正常工作。我已经尝试了一些带括号的变体，带或不带反引号，带或不带空格等，但没有任何帮助。错误信息是：

```
Syntax error: "(" unexpected (expecting ";;") 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T14:36:51.370

这里的问题是您使用 bash 语法，并且脚本（当它从 cron 执行时）由`/bin/sh`（对数组和构造一无所知）解释`()`。

您必须`bash`使用 she-bang 表示法指定为脚本的解释器：

```
#!/bin/bash 
```

`bash`或使用from cron显式运行脚本：

```
bash /path/to/script 
```

或重写脚本，使其可以在没有数组的情况下运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:58:32.023

从可读性使用`$()`表格

```
size=$(du -h $backupDir --summarize) 
```

如果你想坚持反引号，那么

```
size=`du -h $backupDir --summarize` 
```

# javascript - 移动网站上的 Javascript：可以使用点击吗？

> ID：11843425
> 
> 赞同：4
> 
> 时间：2012-08-07T09:56:12.443
> 
> 标签：javascript, mobile

我正在为我的网站创建一个移动版本，我想知道：是否可以将所有点击事件保留在 javascript 中，或者我应该将其更改为点击（例如[tap.js](http://alxgbsn.co.uk/2012/03/12/tap-js-a-lightweight-tap-event-javascript-plugin/)）

我注意到点击在我测试过的所有浏览器（Galaxy S2 上的 Native、Dolphin 和 Chrome）中都有效。您知道保留点击事件的任何问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:20:52.960

移动浏览器旨在与大多数开箱即用的网站一起使用，因此它们像桌面浏览器一样实现点击事件。

但是，正如*Torsten Walter*解释的那样，如果您不明确管理点击事件，您可能会导致明显的延迟。

简而言之：点击会起作用，但管理点击也会改善触摸屏用户体验。

# plone - 会员登录时自动创建文件夹

> ID：11843427
> 
> 赞同：2
> 
> 时间：2012-08-07T09:56:20.450
> 
> 标签：plone, member, zope

我正在使用 Plone Member Folders 功能，其中在成员登录时创建某个成员的文件夹。

如何添加一些要在登录时创建的文件夹？不仅有成员名称的文件夹，还有里面的一些文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:45:28.917

您可以创建一个`notifyMemberAreaCreated`皮肤方法来在新创建的成员文件夹中添加额外的内容。该脚本将在这个新文件夹的上下文中调用。

之所以必须是皮肤脚本，而不是视图或事件处理程序，是因为 Plone 的这一部分源于 CMF 中的一个较旧的功能，该功能尚未更新为更现代的 API 标准。

这是一个示例`notifyMemberAreaCreated.py`python 皮肤脚本：

```
## Script (Python) "notifyMemberAreaCreated"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=
##title=Modify new member area
##

context.invokeFactory('Folder',id='subfolder')
context.subfolder.setTitle('Your new subfolder')
context.reindexObject() 
```

您可能必须为此脚本赋予`Manager`代理角色。如果您在文件系统上定义此皮肤脚本，则在您的自定义皮肤层中，添加一个`.metadata`文件（名为`notifyMemberAreaCreated.py.metadata`）来设置此代理角色：

```
[default]
proxy=Manager 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T17:16:14.730

在 Plumi (http://pypi.python.org/pypi/plumi.app) 中，您可以看到它是如何完成的。最初在plumi.app 的配置文件中的文件夹结构是在安装时在所谓的default_member_area 中创建的。在 notifyMemberAreaCreated.py 中，default_member_area 被复制到新的成员文件夹中。

# amazon-web-services - AWS SimpleDB 上的空间查询

> ID：11843428
> 
> 赞同：6
> 
> 时间：2012-08-07T09:56:22.430
> 
> 标签：amazon-web-services, amazon-simpledb, spatial-query

我想知道人们建议在 Amazon Web Services SimpleDB 中进行空间查询的有效方法是什么？

空间查询是指在给定的纬度和经度半径内查找对象。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T12:08:22.003

SimpleDB 目前不提供任何内置的空间搜索操作，但这并不意味着它不能完成。有几种方法可以在非地理空间感知数据库（如 SimpleDB）中实现地理空间搜索，所有这些方法都围绕着使用数据库检索基于地理空间边界框的粗略第一选择，然后使用过滤应用程序中返回的数据的想法更精确的算法，例如[Haversine 公式](http://en.wikipedia.org/wiki/Haversine_formula)。

您*可以*`lat >= minLat and lat <= maxLat and lon >= minLat and lon <= maxLat`将纬度和经度存储为（零填充和规范化）数字属性，然后执行双范围查询[（](http://docs.amazonwebservices.com/AmazonSimpleDB/latest/DeveloperGuide/BoxUsageTuning.html)）。

更好的方法是使用[GeoHashes](http://en.wikipedia.org/wiki/Geohash)。

> Geohashes 提供了任意精度、附近位置的类似前缀以及逐渐从代码末尾删除字符以减小其大小（并逐渐失去精度）的可能性。
> 
> 作为一个实际的例子，Geohash 6gkzwgjzn820 解码到坐标 -25.382708 和 -49.265506，而 Geohash 6gkzwgjz 将解码到 -25.383 和 -49.266，如果我们在同一区域中采取类似的位置，例如 -25.427 和 -49.315 ，我们可以看到它被编码为 6gkzmg1w（注意类似的前缀）。

来自[http://geohash.org/site/tips.html](http://geohash.org/site/tips.html)

将您的项目位置作为 GeoHashes，您可以使用`like`运算符搜索边界框 ( `where GeoHash like '6gkzmg1w%'`)，但由于`like`运算符很昂贵（比较运算符[）](http://docs.amazonwebservices.com/AmazonSimpleDB/latest/DeveloperGuide/UsingSelectOperators.html)，更好的方法是通过存储每个 GeoHash 前缀级别来非规范化数据（多少取决于您的所需的搜索精度）作为单独的属性（GeoHash6 GeoHash8 等），然后使用简单的等式谓词 ( `where Geohash8 = '6gkzmg1w'`)。

现在谈谈 GeoHashes 的缺点。由于您无法假设 GeoHash 在您的搜索框中居中，因此您还必须搜索所有相邻前缀。[geohash-js](https://github.com/davetroy/geohash-js)很好地描述了这个过程

> Geohash 还具有随着位数减少（从右侧开始），准确性降低的特性。此属性可用于进行边界框搜索，因为彼此靠近的点将共享相似的 Geohash 前缀。
> 
> 但是，由于给定点可能出现在给定 Geohash 边界框的边缘，因此有必要生成 Geohash 值列表，以便在点周围执行真正的邻近搜索。由于 Geohash 算法使用 base-32 编号系统，因此可以使用简单的查找表导出围绕任何其他给定 Geohash 值的 Geohash 值。
> 
> 因此，例如，华盛顿特区宾夕法尼亚大道 1600 号解析为：38.897，-77.036
> 
> 使用geohash算法，将此经纬度转换为：dqcjqcp84c6e
> 
> 可以通过将此 geohash 截断为：dqcjqc 来描述围绕该点的简单边界框
> 
> 但是，“dqcjqcp84c6e”不在“dqcjqc”内的中心，在“dqcjqc”内搜索可能会错过一些所需的目标。
> 
> 因此，我们可以使用 Geohash 的数学特性来快速计算 'dqcjqc' 的邻居；我们发现它们是：'dqcjqf','dqcjqb','dqcjr1','dqcjq9','dqcjqd','dqcjr4','dqcjr0','dqcjq8'
> 
> 这为我们提供了一个围绕“dqcjqcp84c6e”大约 2 公里 x 1.5 公里的边界框，并允许仅对 9 个键进行数据库搜索： SELECT * FROM table WHERE LEFT(geohash,6) IN ('dqcjqc', 'dqcjqf','dqcjqb' ,'dqcjr1','dqcjq9','dqcjqd','dqcjr4','dqcjr0','dqcjq8');

转换为 SimpleDB 查询，`where GeoHash6 in('dqcjqc', 'dqcjqf', 'dqcjqb', 'dqcjr1', 'dqcjq9', 'dqcjqd', 'dqcjr4', 'dqcjr0', 'dqcjq8')`然后您将对结果进行 Haversine 过滤，以便仅获取搜索范围内的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-01T11:21:17.160

我将把它留在这里，因为它可能会对你有所帮助！

14 年前，我们尝试对半径范围内的位置进行地理查找表。显然没有地理空间索引或类似的东西。实际上只有标准的 SQL 和 Oracle ......无论如何，我们最终将所有 lat/lng 从固定平面场转换为公里。这些天地理空间索引基本上是做什么的。

为了解释它究竟做了什么，它把世界变成了一个平面，你甚至可以通过半径选择一些 SQL 技巧，你甚至可以得到你选择的两个点的距离。由于它也是原始的完整整数，因此查询速度非常快。

这是 PHP 中的一个简单示例，它看起来非常复杂，但一旦您理解了 SQL 查询，就很容易：

[https://gist.github.com/tobsn/899413](https://gist.github.com/tobsn/899413)

# java - 从 PopupScreen 更新 ButtonField 的标签

> ID：11843429
> 
> 赞同：0
> 
> 时间：2012-08-07T09:56:24.643
> 
> 标签：java, blackberry

我在 MainScreen 上有一个 ButtonField，我从中推送了一个 PopupScreen，我在其中添加了一个 ObjectListfield。我想要做的是使用从 PopupScreen 的 ObjectListfield 中选择的元素更新 MainScreen 上 ButtonField 的标签。

请告诉我是否可以不使用`Dialog`类（我真的想使用`PopupScreen`而不是`Dialog`类）以及可以做到这一点的方法。如果能提供一些示例代码，我将不胜感激。

我已经添加了我的代码。

```
public final class MyScreen extends MainScreen {
    HorizontalFieldManager hfm;
    ButtonField btn;
    public MyScreen() {        
        // Set the displayed title of the screen       
        super();
        setTitle("MyTitle");

        btn = new ButtonField("label",ButtonField.CONSUME_CLICK);
        final mypopup mps = new mypopup();

        btn.setChangeListener(new FieldChangeListener() {
            public void fieldChanged(Field field,int context) {     
                UiApplication.getUiApplication().pushModalScreen(mps);      
            }
        });

        hfm = new HorizontalFieldManager();
        hfm.add(btn);
        add(hfm);
    }

    public void setlabel(String labelnew) {
        btn.setLabel(labelnew);
    }

    public String getlabel() {
        return this.btn.getLabel();
    }
}

class mypopup extends PopupScreen implements FieldChangeListener {

    String it;

    ObjectListField obj = new ObjectListField() {
        public boolean navigationClick(int status,int time) {
            int selectedindex=obj.getSelectedIndex();
            it=(String)obj.get(obj, selectedindex);

            UiApplication.getUiApplication().popScreen(UiApplication.getUiApplication().getActiveScreen());

            /*MyScreen my=new MyScreen();
            my.btn.setLabel(it);
            my.invalidate(); */
            //close();

            UiApplication.getUiApplication().invokeLater(new Runnable() {
                public void run() {
                    /* This im doing to see that setlabel and getlabel are
                                working properly */     
                    MyScreen my=new MyScreen(); 
                    my.setlabel(it);                 
                    String gt=my.getlabel();     
                    Dialog.alert(gt);            
                    my.hfm.invalidate();                             

                        //the label of button is changed but not updating in mainscreen.
                            }
            });

            return true;        
        }
    };

    public mypopup() {
        super(new VerticalFieldManager());

        String[] type=new String[] {"a","b","c","d"};
        obj.set(type);
        add(obj);       
     }

    public void fieldChanged(Field field, int context) {
        // TODO Auto-generated method stub
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:45:59.223

在一个管理器中添加按钮，`HorizontalFieldManager or VerticalFieldManager`然后在按钮上设置文本后使管理器无效

```
public final class MyScreen extends MainScreen
{

  ButtonField btn;
  public MyScreen()
 {        
// Set the displayed title of the screen       
super();
setTitle("MyTitle");

btn=new ButtonField("label",ButtonField.CONSUME_CLICK);
final mypopup mps=new mypopup();

btn.setChangeListener(new FieldChangeListener()
{
    public void fieldChanged(Field field,int context){

        UiApplication.getUiApplication().pushModalScreen(mps);

    }
});

HorizontalFieldManager hfmToholdButtons = new HorizontalFieldManager();
btn.setLabel(mps.gettext());
hfmToholdButtons.add(btn);
hfmToholdButtons.invalidate();
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:46:35.003

您需要更改以下代码块，

```
MyScreen my = new MyScreen();
my.setlabel(it);
String gt = my.getlabel();
Dialog.alert(gt);
my.hfm.invalidate(); 
```

使用代码块，

```
Screen scr = UiApplication.getUiApplication().getActiveScreen();
if (scr instanceof MyScreen) {
    MyScreen my = (MyScreen) scr;
    my.setlabel(it);
    my.invalidate();
} 
```

# java - 在hibernate spring jsf和primefaces的集成中将primefaces数据表编辑到数据库后保存数据

> ID：11843441
> 
> 赞同：2
> 
> 时间：2012-08-07T09:57:10.383
> 
> 标签：java, hibernate, jsf, jakarta-ee, primefaces

我想在 primfaces 数据表中编辑一行。我正在使用 jsf hibernate spring primefaces 的集成。但我有以下错误。

```
javax.el.ELException: /personel.xhtml @60,83 listener="#{personelMB.updatePersonel(personel.personel_id)}": org.springframework.orm.hibernate4.HibernateOptimisticLockingFailureException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1; nested exception is org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1 
```

个人管理豆：

```
@ManagedBean(name="personelMB")
@ViewScoped
public class PersonelBean implements Serializable{
    private static final long serialVersionUID = 1L;

    @ManagedProperty(value="#{PersonelService}")
    IPersonelService personelservice;
    List<Personel> personelList;

    private int personel_id;
    private String pname;
    private String pfamily;
    private String paddress;
    private String pphone;
//getter and setter
public void updatePersonel(int personel_id){
        Personel personel=(Personel)personelservice.getPersonelId(personel_id);
        getPersonelservice().updatePersonel(personel);
    }

} 
```

个人.xhtml：

```
<h:form  prependId="false">  

    <p:dataTable id="pdataTable" var="personel" value="#{personelMB.personelList}" rowKey="#{personelMB.personel_id}" editable="true"
    >  
  <p:ajax event="rowEdit" update="@this" listener="#{personelMB.updatePersonel(personel.personel_id)}"/>
        <f:facet name="header">  
            اطلاعات پرسنل 
        </f:facet>  

        <p:column> 

            <f:facet name="header">  
               شماره پرسنلی  
            </f:facet>  

            <h:outputText value="#{personel.personel_id}" />  

            <f:facet name="footer">  
                کدملی 
            </f:facet>  
        </p:column>  

        <p:column headerText="نام">
        <p:cellEditor>
        <f:facet name="output">  
            <h:outputText value="#{personel.pname}" />
            </f:facet>
            <f:facet name="input">
              <h:inputText value="#{personel.pname}" />
              </f:facet>
            </p:cellEditor> 
        </p:column>  

        <p:column headerText="نام خانوادگی"> 
         <p:cellEditor> 
         <f:facet name="output">
            <h:outputText value="#{personel.pfamily}" /> 
            </f:facet>
            <f:facet name="input">
            <h:inputText value="#{personel.pfamily}" />
            </f:facet> 
            </p:cellEditor>  
        </p:column>  

        <p:column headerText="آدرس"> 
         <p:cellEditor> 
         <f:facet name="output">
            <h:outputText value="#{personel.paddress}" />  
            </f:facet>
            <f:facet name="input">
            <h:inputText value="#{personel.paddress}" />
            </f:facet>
            </p:cellEditor> 
        </p:column>  
   <p:column headerText="تلفن"> 
   <p:cellEditor> 
   <f:facet name="output">
            <h:outputText value="#{personel.pphone}" />
            </f:facet> 
            <f:facet name="input">
            <h:inputText value="#{personel.pphone}" /> 
            </f:facet>
            </p:cellEditor>
        </p:column>

   <p:column headerText="ويرايش">

         <p:rowEditor /> 

   </p:column>
        <f:facet name="footer">  
            تعداد رکورد#{fn:length(personelMB.getPersonelList())} میباشد.  
        </f:facet>  

    </p:dataTable>  

</h:form> 
```

个人服务：

```
@Transactional(readOnly=true)
public class PersonelService implements IPersonelService{
    IPersonelDao personeldao;
//getter and setter
@Transactional(readOnly=false)
    @Override
    public void updatePersonel(Personel personel) {
        getPersoneldao().updatePersonel(personel);

    } 
```

个人道：

```
public class PersonelDao implements IPersonelDao {
private SessionFactory sessionFactory;
//getter and setter
@Override
public void updatePersonel(Personel personel) {
    getSessionFactory().getCurrentSession().update(personel);

} 
```

请帮助我如何编辑我的数据表并将其保存在数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:13:31.853

这是在一个事务中获取 Hibernate 实体并尝试在另一个具有不同 Hibernate 会话的事务中更新它的问题。

`Personel`要正确执行此操作，您需要在同一事务中获取然后更新您的对象。这意味着您需要有一个`@Transactional`从 ManagedBean 调用的业务逻辑方法，它可以同时执行这两种操作。

在 IPersonelService 实现类中：

```
@Transactional
public void updatePersonel(int personel_id, String pname, String pfamily ...){
    Personel personel = personelDao.getPersonel(personel_id);
    personel.setPName(pname);
    ....
    getSessionFactory().getCurrentSession().saveOrUpdate(personel); 
} 
```

这会将您的业务逻辑与您的表示逻辑分开，并在单个事务之后进行所有数据库调用。

# android - 从 HttpResponse 中删除标头（仅适用于 3G 连接）

> ID：11843446
> 
> 赞同：0
> 
> 时间：2012-08-07T09:57:21.090
> 
> 标签：android, wifi, httpresponse, 3g

我正在实现一个对服务器进行 REST 调用以获取 JSON 响应的应用程序。如果我将这些呼叫连接到我家的 Wi-Fi 连接，我会得到没有标题的结果：

```
{"id":"ohig40o45h6c2a5d9rdhsft2v7","module_name":"Users", ...} 
```

但是，如果我使用手机的 3G 连接进行这些呼叫，我会收到包含所有标题的响应：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"        
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <title></title>
        </head>
        <body>
            <pre xml:space="preserve">
                 {"id":"ohig40o45h6c2a5d9rdhsft2v7","module_name":"Users", ...}
            </pre>
        </body>
     </html> 
```

我想获取正文消息（没有“pre”标签）。有没有简单的方法来做到这一点？为什么我只有在使用 3G 连接时才能获得标头？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:38:16.523

我知道这是一个老问题，但我遇到了同样的问题，这是解决方案：

只需在 Web 服务的开头添加标头即可通知响应是 JSON。如果您使用的是 PHP，这里是示例：

```
<?
header('Content-type: application/json');

//Your webservice code here
?> 
```

希望能帮助到你！！

# iphone - 与 iPhone 中的内存泄漏有关的问题

> ID：11843449
> 
> 赞同：0
> 
> 时间：2012-08-07T09:57:29.263
> 
> 标签：iphone, ios

我正在使用工具工具在我的应用程序中查找内存泄漏，但无法弄清楚实际问题在哪里，并且用于泄漏的工具工具在此类中显示泄漏。

```
-(IBAction) GoToNext:(id)sender{

    ////NSLog(@"iPad");
    NextClass *sampleView = [[[NextClass alloc] init] autorelease];
    sampleView.ImageName = @"Tutorial.png";
    sampleView.modalPresentationStyle = UIModalPresentationPageSheet;
    [sampleView setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
    [self presentModalViewController:sampleView animated:YES];
    sampleView.Title.text = @"On Christianity";
 } 
```

NextClass.h 文件

```
 #import <UIKit/UIKit.h>

@interface NextClass : UIViewController<UIScrollViewDelegate> {

    IBOutlet UINavigationBar* TopNavbar;
    IBOutlet UIScrollView *scrollView;
    IBOutlet UILabel *Title;
    NSString *ImageName;

    UIImageView *imageView;

}

@property(nonatomic,retain) UIImageView *imageView;
@property(nonatomic,retain) NSString *ImageName;
@property(nonatomic,retain) IBOutlet UILabel *Title;
@property(nonatomic,retain) IBOutlet UIScrollView *scrollView;
@property(nonatomic,retain) IBOutlet UINavigationBar* TopNavbar;
- (IBAction)dismissView:(id)sender;

@end 
```

NextClass.m 文件

```
 #import "NextClass.h"

    @implementation NextClass
    @synthesize TopNavbar,scrollView,Title,ImageName,imageView;
    CGPoint newCenter;

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {

    [super viewDidLoad];

    //Code for Managing Scrolling of Image.{#DR#-13/02/2012}
    [scrollView setBackgroundColor:[UIColor whiteColor]];
    [scrollView setCanCancelContentTouches:NO];
    scrollView.clipsToBounds = YES; 
    scrollView.indicatorStyle = UIScrollViewIndicatorStyleWhite;
    UIImage *image=[UIImage imageNamed:ImageName];

    imageView = [[UIImageView alloc] init];

    [imageView setFrame:CGRectMake(0, 0, (image.size.width),image.size.height )];

    [imageView setImage:image];

    [scrollView addSubview:imageView];
    [scrollView setContentSize:CGSizeMake(imageView.frame.size.width, imageView.frame.size.height)];
    [scrollView setScrollEnabled:YES];

    for(UIView *subview in [scrollView subviews]) 
    {
        newCenter=scrollView.center;
        newCenter=CGPointMake(scrollView.center.x, imageView.frame.size.height/2);
        subview.center=newCenter;
    }

    [imageView release];

}

- (IBAction)dismissView:(id)sender {
    [self dismissModalViewControllerAnimated:YES];
}

- (void)viewDidUnload {
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    self.TopNavbar =nil;
    self.scrollView=nil;
    self.Title=nil;

}

- (void)dealloc {

    if (ImageName) {
        [ImageName release];
        ImageName=nil;
    }
    if (Title) {
        [Title release];
        Title=nil;
    }
    if (scrollView) {
        [scrollView release];
        scrollView=nil;
    }
    if (TopNavbar) {
        [TopNavbar release];
        TopNavbar=nil;
    }

    [super dealloc];
}

@end 
```

Xcode 的 Instruments Tool 产生以下泄漏，但我无法在我的代码中找出实际问题。

```
Leaked Object   #   Address Size    Responsible Library Responsible Frame
GeneralBlock-48 7   < multiple >    336 libsystem_c.dylib   strdup
GeneralBlock-48     0x360c140   48  libsystem_c.dylib   strdup
GeneralBlock-48     0x360a060   48  libsystem_c.dylib   strdup
GeneralBlock-48     0x1b79e0    48  libsystem_c.dylib   strdup
GeneralBlock-48     0x1b79e0    48  libsystem_c.dylib   strdup
GeneralBlock-48     0x1ad910    48  libsystem_c.dylib   strdup
GeneralBlock-48     0x14e5a0    48  libsystem_c.dylib   strdup
GeneralBlock-48     0x14e5a0    48  libsystem_c.dylib   strdup 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:42:33.237

您永远不会释放属性“imageView”。你的问题正是 ARC 被发明的原因（我们都遇到过类似的问题）——你应该尽快切换，永远不要回头！）

# url - 如何为不区分大小写的 URL 配置 Tomcat？

> ID：11843451
> 
> 赞同：6
> 
> 时间：2012-08-07T09:57:35.300
> 
> 标签：url, tomcat, case-insensitive

我需要 URL 在 Tomcat 中不区分大小写。我的意思是当我在浏览器的地址栏中写例如“http://localhost/index.htm”不等于“http://localhost/INDEX.htm”然后我得到错误因为这个页面（INDEX.htm）在那里不是。我如何为不区分大小写的 URL 配置 Tomcat6？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:24:21.750

在 Tomcat 6 及更早版本中是*可能的，但不***推荐**。请参阅 apache 文档中的此[链接](http://tomcat.apache.org/tomcat-6.0-doc/config/context.html)。搜索`caseSensitive`。默认情况下是`true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-25T14:57:47.060

很大程度上取决于您是使用 Tomcat 还是 Apache 进行 HTML 渲染。您可以将 Apache 2.4 配置为呈现 HTML 并将 JSP 委托给 Tomcat。在这种情况下，您可以将 Apache 配置为不区分大小写。请参阅此[链接：](https://stackoverflow.com/questions/14814419/how-do-i-make-urls-case-insensitive-in-linux-server)

通常jsp页面是通过链接引用的，所以开发者控制URL的大小写。

# php - 通过 php 使用 try/catch 代替嵌套的 if/else

> ID：11843453
> 
> 赞同：0
> 
> 时间：2012-08-07T09:57:36.703
> 
> 标签：php, exception-handling, conditional

我已经看到一些关于这个主题的问题，但我认为除了最基本的示例之外，我更根本地缺乏如何最好地使用 try/catch 块。

在这个特定的案例中，我有一系列的技术来解决一个问题，从简单到相当复杂，我的想法是这样的：

```
if ($zombie_killer -> board_with_nail == 'failed') {
    if ($zombie_killer -> machette == 'failed') {
       if ($zombie_killer -> shotgun == 'failed') {
           $this -> panic;
       }
    }
} 
```

但相反，我认为使用 try/catch 块可能是一种更好的方法，以便有更多空间添加自定义子流程，例如记录该技术为何不起作用，更新 UI 以反映“a比平时更长的保持时间”，或者其他什么。所以我想它会是这样的：

```
try {
    $zombie_killer -> board_with_nail;
}
catch(Exception $e) {
    try {
        $zombie_killer -> machette;
    }
} 
```

但这感觉并没有好多少，鉴于其他人对“if/else vs try/catch”的所有反响，我很清楚，至少，有很大的差异和使用它们的理由. 这就是为什么我要询问这个用例的原因，因为我觉得最好通过 try/catch 来处理它，但不知道它是否感觉不对，因为我没有真正使用它们或者因为我没有正确地接近这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:04:12.150

The philosophy of try/catch isn't the one you described. The good way to use it is to catch different exceptions depending of what error happened. For example:

```
try {
    $value = readDatabase();
    writeDatabase($++value);
} catch (ReadErrorException $e) {
    // do something
} catch (WriteErrorException $e) {
    // do something
} 
```

If you want to achieve what you're looking for, you can do as simple as using and, if you don't need more code. If you do, just use elseif.

For example, your code could become:

```
if (
    $zombie_killer -> board_with_nail == 'failed'
    && $zombie_killer -> machette == 'failed'
    && $zombie_killer -> shotgun == 'failed'
) {
    $this -> panic;
} 
```

Also, the good way would be, using booleans as attributes:

```
if (
    !$zombie_killer -> board_with_nail
    && !$zombie_killer -> machette
    && !$zombie_killer -> shotgun
) {
    $this -> panic;
} 
```

**EDIT: After reading your comments on other answers**

I propose you an alternative solution, based on what you said. Understanding that $zombie_killer is a class, you could create a public method named, for example, kill(). This method can access the public, private and protected attributes of the class.

I will write an example without exceptions first.

Inside the class:

```
public function kill()
{
    if ($zombie_killer -> board_with_nail != 'failed') return true;
    if ($zombie_killer -> machette != 'failed') return true;
    if ($zombie_killer -> shotgun != 'failed') return true;

    return false;
} 
```

In the other file, the one we were talking about:

```
if (!$zombie_killer->kill()) {
   $this->panic;
} 
```

As you can see, the code is more clean, and the default behaviour of the function is suppose that the zombie won't be killed, and the exceptional cases would be if one of the methods used to kill the zombie succeeds. It's the opposite as how we would normally think: we would suppose we could kill the zombie, and the exceptional case would be if everything failed. But it's just a philosophical issue, you can reverse the code and it would still work.

Let's see the same with exceptions.

Class file:

```
public function kill()
{
    if (
        $zombie_killer -> board_with_nail == 'failed' 
        && $zombie_killer -> machette == 'failed'
        && $zombie_killer -> shotgun == 'failed'
    ) {
        throw new NotKilledException();
    }
} 
```

Other file:

```
try {
    $zombie_killer->kill();
} catch (Exception $e) {
    $this->panic;
} 
```

So, you see? The exception version isn't of much help in this case, because you still must do the nested if, because the condition must accomplish three different types of kills failed. The exception is to not kill the zombie. Because you want the exceptional code $this->panic to be executed.

Now, you must choose what kind of implementation fits you more. The both are correct, and developers will see it right both. I would choose though, the first one, cause with a simple copy paste you could add more killing types to your zombie_killer, and it's cleaner to read.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:05:33.597

As a personnal point of view, I think that, unlike if/else, try/catch are there to handle exceptions, not use cases, so they are better used for that, not for handling what you want to do depending on a situation.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T10:13:54.357

异常不是表示条件语句的替代方法。例外是，好吧，特殊情况，比如试图用枕头杀死僵尸：

```
function kill_zombie($weapon) {
    if (!$weapon instanceof FireArm && !$weapon instanceof HeavyObject)
        throw new Exception("Zombies can only be killed with firearms and heavy objects");
    // ...
} 
```

# iphone - 是否有任何适用于 iOS 的开源

> ID：11843455
> 
> 赞同：-4
> 
> 时间：2012-08-07T09:57:54.923
> 
> 标签：iphone, open-source, cocos2d-iphone

我刚刚开始在 iOS 中进行游戏开发。我正在尝试制作类似于 Tamagotchi 的游戏。我想知道人们以前开发游戏的方法。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:01:23.333

Ray Wenderlich 有非常简洁的游戏开发教程，但不是专门针对 Tamagotchi。

见[http://www.raywenderlich.com/tutorials/](http://www.raywenderlich.com/tutorials/)

# php - CPanel 不允许使用脚本创建文件？

> ID：11843456
> 
> 赞同：0
> 
> 时间：2012-08-07T09:57:55.020
> 
> 标签：php, mysql, cpanel

我的 php 文件中有以下函数，我的脚本放在 CPanel 上。我确信脚本已经执行，因为最后的打印输出已经出现，但是我的 csv 文件没有。我已将文件夹 Log_report 的权限更改为 755，但仍然无法创建文件，我该如何更改？我确信创建 csv 的 mysql 脚本是正确的，因为我在我的 XAMPP 本地机器中使用了相同的脚本，并且之前在我的机器中成功创建了一个文件。

```
function export($DB){
    $dbConnection = mysql_connect($DB['server'], $DB['loginName'], $DB['password']);
    if(!$dbConnection){
        die('Error! ' . mysql_error());
        }
    mysql_select_db($DB['database'], $dbConnection);
    $timezone = "Asia/Hong_Kong";
    if(function_exists('date_default_timezone_set')) 
        date_default_timezone_set($timezone);
    $Time = date('Y_m_d_H_i');
    $fileName = "/home/me/public_html/Log_Report/Report_".$Time.".csv";
    $result = mysql_query("SELECT TechName, ClientName, SiteName, LogTime, Type 
                            INTO OUTFILE '".$fileName."' 
                            FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED by '\"' 
                            LINES TERMINATED BY '\n' 
                            FROM tech AS T, client AS C, site AS S, log AS L 
                            WHERE T.TechID=L.TechID AND C.ClientID=L.ClientID AND S.SiteID=L.SiteID 
                            ORDER BY L.LogTime DESC");
    print "abcde";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:42:30.223

该线程应该有助于解释 mysql 权限问题：

[http://lists.mysql.com/mysql/206422](http://lists.mysql.com/mysql/206422)

另外，我应该问一下您正在运行查询的 mysql 用户帐户，例如 root 或其他可能受限的用户？

# xss - 防止内联java脚本xss注入

> ID：11843461
> 
> 赞同：0
> 
> 时间：2012-08-07T09:58:12.880
> 
> 标签：xss

我有一个这样的网址

```
http://www.example.com/?input=userinput 
```

虽然我做了 xss 注入过滤器

```
strip_tags (); 
```

但是看看这个，我接受这个输入并将它放在这样的 url 中

```
<a href ="http://www.example.com/?page=userinput"> </a> 
```

想象用户可以在他的用户输入部分编写此代码

```
onMouseOver%3dalert%2839793%29%2f%2f 
```

这会将 onMouseOver 事件添加到我的网址！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:00:20.443

请查看 OWASP XSS 预防备忘单。它将详细解释所有这些： [https ://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)

要回答这里提到的特定主题，您需要在将输入作为 url 的一部分打印到页面之前对输入进行 url 编码。对于 HTML 属性中的其他数据，您需要应用 HTML 属性编码，如果它位于像 onclick 这样的事件处理程序中，则可能还需要应用 javascriot 编码。

# c++ - 类型说明符错误

> ID：11843469
> 
> 赞同：1
> 
> 时间：2012-08-07T09:58:30.697
> 
> 标签：c++

```
#include <iostream>

using namespace std;
int b=10;
//b=100;
int main(int argc, char *argv[]) 
{
   cout<<b<<endl;
   return 0;
} 
```

如果删除注释会出现错误。`b = 100`为什么会这样。否则输出为 10。错误：C++ 需要所有声明的类型说明符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:00:44.910

全局范围只能包含声明和定义，不能包含任意语句。

C++ 认为您正在尝试声明和定义另一个名为`b`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:00:10.103

表达式语句（如`b=100;`）必须在函数内部。

在函数之外，可以声明和初始化变量，但不能直接执行任意代码。

你会得到那个特定的错误，因为编译器将代码解释为没有类型说明符的声明（即`int b=100;`缺少类型说明符`int`），而不是作为它不期望这样的事情的表达式语句。在 C 中允许这样的声明（尽管在这种情况下，它会失败，因为已经有一个名为 的变量`b`），但在 C++ 中不允许。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T10:00:13.973

您不能分配给全局范围内的变量，除非在初始化时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T10:02:00.993

你必须做

```
b = 100; 
```

里面主要。您不能在函数外更改已声明的变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T10:14:01.970

任何语句都应该出现在函数内部。全局变量可以在函数体外部定义和初始化。但赋值应该在某个函数体内。

# background - 当应用程序不在后台运行时如何处理推送通知

> ID：11843470
> 
> 赞同：0
> 
> 时间：2012-08-07T09:58:30.587
> 
> 标签：background, notifications, push, apple-push-notifications, tray

如果应用程序不在后台，则推送通知来了。单击启动按钮不会显示推送通知，它只会打开应用程序，要打开该推送通知，我们必须再次点击通知托盘中的推送通知。任何方式与启动我们也可以显示通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:26:25.003

这解决了。答案是：

```
(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

NSDictionary *tmpDic = [launchOptions objectForKey:@"UIApplicationLaunchOptionsRemoteNotificationKey"];

//if tmpDic is not nil, then your app is launched due to an APNs push, therefore check this NSDictionary for further information
if (tmpDic != nil) {
    NSLog(@" - launch options dict has something ");
    NSLog(@" - badge number is %@ ", [[tmpDic objectForKey:@"aps"] objectForKey:@"badge"]);
    NSLog(@" - ");
} 
```

# javascript - 使嵌套 div 中的 div 可点击

> ID：11843473
> 
> 赞同：0
> 
> 时间：2012-08-07T09:58:47.357
> 
> 标签：javascript, function, html, click

我有`<div>`一个 ID - **button2div**。它结束了另一个使用**JS**`<div>`更改其背景的内容。

 **```
<div id="button2div" onclick="location.href='#';" style="cursor:pointer;"></div> 
```

我可以添加一个 URL 以`button2div`使用 JS 作为嵌套函数。

```
addEventHandler(divarea1, 'mouseover', function () {     
    divbanner.style.backgroundImage ='url(URL To banner)';
    buttondiv.style.backgroundImage ='url(URL To Button Background)';
    $("button1div").click(function(){
        window.location = 'http://google.com';
    });
}); 
```

这不起作用。

**注意：** r`addEventHandle`来自`JQuery`。

我该如何进行这项工作？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:00:19.903

你错过了一个#（我想），试试这个：

```
$("#button1div").click(function(){
window.location = 'http://google.com';
}); 
```

# 是一个选择器，表示您正在搜索具有在选择器中给出的 id 的元素。
Ia #mydiv 搜索 id 为“mydiv”的元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:06:54.307

试试这个嵌套跨度的例子 [http://jsfiddle.net/dG26F/](http://jsfiddle.net/dG26F/)

```
$('span').click(function(){
   alert($(this).attr('data-content')); 
    return false;
});

<span data-content="Hot Dog">
    Hot
    <span data-content="Dog">Dog</span>
</span>

span{
    padding: 10px;
    margin:5px;
    background-color:#c67605;
    display:inline-block;
}
span span{
    background-color:#3a87ad;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T10:01:51.040

缺少 # 但你不应该将事件绑定到另一个类似的事件中

```
addEventHandler(divarea1, 'mouseover', function () {     
  divbanner.style.backgroundImage ='url(URL To banner)';
  buttondiv.style.backgroundImage ='url(URL To Button Background)';
}); 

$("#button1div").click(function(){
   window.location = 'http://google.com';
}); 
```**

# wpf - DatePicker - 想要在 FormatException 之后显示输入

> ID：11843476
> 
> 赞同：0
> 
> 时间：2012-08-07T09:58:55.160
> 
> 标签：wpf, datepicker

FormatExcetpion 之后是否可以在 DatePikcer 中显示输入？

例如，用户尝试在 DatePicker 中键入“abcd”。FormatExcetpion 发生，我将 DatePicker 标记为无效并显示一些信息“请使用格式 ....”，但我也想在 DatePicker 中显示用户输入。

在 FormatExcetpion 之后，我在 DatePicker.Text 中有“abcd”，但不知道如何使其可见..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:12:59.243

这是不可能的:(如果你发现了什么-请在这里告诉我))

# android - Android：将对象从一个活动发送到另一个活动

> ID：11843482
> 
> 赞同：2
> 
> 时间：2012-08-07T09:59:22.243
> 
> 标签：android, serialization, android-intent, parcelable

要将任何对象的意图从一个活动发送到另一个活动，我们可以使用 Parcelable 接口或 Serializable 接口。两者有什么区别？哪个更适合使用？

此外，我们可以发送字符串、整数类型的对象，而无需使用所有这些接口。怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:05:54.847

**Java Serializable：** Serializable 来自标准 Java，实现起来要容易得多，您需要做的就是实现 Serializable 接口并添加覆盖两个方法。

```
 private void writeObject(java.io.ObjectOutputStream out)
              throws IOException 
  private void readObject(java.io.ObjectInputStream in)
              throws IOException, ClassNotFoundException 
```

Serializable 的问题在于它试图适当地处理阳光下的一切，并使用大量反射来确定正在序列化的类型。所以它变成了一个强壮的对象

**Androids Parcelable：** Android 进程间通信 (AIPC) 文件，用于告诉 Android 应该如何编组和解组您的对象。它不那么通用，不使用反射，因此它应该有更少的开销和更快的速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T10:25:52.123

您可以发送 String、Integer 等数据类型，以及实现 Parcelable 接口的类的对象，如下所示...

```
Intent intent = new Intent(CallingActivity.this, CalledActivity.class);
intent.putExtra("IntegerExtra", intValue);
intent.putExtra("StringExtra", stringValue);
intent.putExtra("ParcExtra", parcObject);
startActivity(intent); 
```

而且，在接收端，您可以编写以下代码，

```
intValue = getIntent().getIntExtra("IntegerExtra", 0);
stringValue = getIntent().getStringExtra("StringExtra");    
parcObject = ((YourParcalabeDataType) getIntent().getParcelableExtra("ParcExtra")); 
```

希望这可以解决您的问题... :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T10:03:12.150

与发送对象相比，仅发送指向您的内容的 URI 可能更容易。这将简化发送并消除发送对象的需要，因为理想情况下 URI 将指向您感兴趣的内容。当然这取决于您尝试传递的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T10:12:15.907

[您可以从该链接](https://stackoverflow.com/questions/3323074/android-difference-between-parcelable-and-serializable%22link%22)找到 Parcelable 和 Serializable 接口之间的区别。基本上 Parcelable 是为 android 创建的，比 Serializable 效率高得多。

您可以通过使用 Bundles 并将这些包链接到意图来简单地发送字符串或整数。

```
Intent i = new Intent(getApplicationContext(),YourClass.class);
Bundle b = new Bundle();
b.putString("string", "string");
i.putExtras(b);
startActivity(i); 
```

# ruby-on-rails - RoR：Elasticsearch 按映射字段排序

> ID：11843484
> 
> 赞同：2
> 
> 时间：2012-08-07T09:59:25.067
> 
> 标签：ruby-on-rails, elasticsearch, tire

我有 Player 和 Player 的全名来自 Profil。我在 Player 上使用弹性搜索。我需要按全名默认排序。我该如何设置？我的 Player 类文件中的代码：

```
 ......
  mapping do
    indexes :id, type: 'integer'
    indexes :fullname, boost: 10
    indexes :name
    indexes :surname
    indexes :position_name
    indexes :info
    indexes :club_id, type: 'integer'
    indexes :club_name
  end

  def self.search(params)
    tire.search(load: true, page: params[:page], per_page: 20) do
      query do
        boolean do
          if params[:query].present?
            must { string params[:query], default_operator: "AND" } 
          else
            must {string '*'}
          end
          must { term :position_id, params[:position_id]} if params[:position_id].present?
          must { term :club_id, params[:club_id]} if params[:club_id].present?
        end
      end
      # filter :term, user_id: params[:user_id] if params[:user_id].present?
      # sort { by Item.column_names.include?(params[:sort]) ? params[:sort] : "created_at", %w[asc desc].include?(params[:direction]) ? params[:direction] : "desc" } if params[:query].blank?

      sort { by Player.column_names.include?(params[:sort]) ? params[:sort] : :id ,%w[asc desc].include?(params[:direction]) ? params[:direction] : "desc"}
      facet "positions" do
        terms :position_id
      end
      facet "clubs" do
        terms :club_id
      end
      # raise to_curl
    end
  end

  def to_indexed_json
    to_json(methods: [:fullname, :name, :surname, :position_name, :club_name])
  end

  def fullname
        self.profil.fullname
  end
...... 
```

如果我将 :id 更改为 :fullname 排序我有这个错误：

```
500 : {"error":"SearchPhaseExecutionException[Failed to execute phase [query], total failure; shardFailures {[DBgvi6JiQAi0FTwhonq8Ag][players][0]: QueryPhaseExecutionException[[players][0]: query[ConstantScore(NotDeleted(cache(_type:player)))],from[0],size[20],sort[<custom:\"fullname\": org.elasticsearch.index.field.data.strings.StringFieldDataType$1@33a626ac>!]: Query Failed [Failed to execute main query]]; nested: IOException[Can't sort on string types with more than one value per doc, or more than one token per field]; }{[DBgvi6JiQAi0FTwhonq8Ag][players][4]: QueryPhaseExecutionException[[players][4]: query[ConstantScore(NotDeleted(cache(_type:player)))],from[0],size[20],sort[<custom:\"fullname\": org.elasticsearch.index.field.data.strings.StringFieldDataType$1@3274eb8a>!]: Query Failed [Failed to execute main query]]; nested: IOException[Can't sort on string types with more than one value per doc, or more than one token per field]; }]","status":500} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T22:45:12.453

我得到了它！经过大量研究后，我在[这里找到了这篇文章](https://groups.google.com/a/elasticsearch.com/forum/?fromgroups=#!topic/users/90chQS9_GI0)。第一个答案提到：

> 默认情况下，现场用户会被分析并分解为一个或多个令牌。如果它被分解为多个令牌，那么您就无法真正对其进行排序。如果要对其进行排序，则需要将其 i（在映射中）设置为未分析

在您的情况下，您需要做的就是：

```
 mapping do
    indexes :id, type: 'integer'
    indexes :fullname, :index => 'not_analyzed'
    indexes :name
    indexes :surname
    indexes :position_name
    indexes :info
    indexes :club_id, type: 'integer'
    indexes :club_name
  end 
```

它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:56:00.917

```
sort { by Player.column_names.include?(params[:sort]) ? params[:sort] : :fullname ,%w[asc desc].include?(params[:direction]) ? params[:direction] : "desc"} 
```

将“id”更改为“fullname”应该可以。

# html - 寻找在单击时显示一行文本的 html 元素/属性（不是弹出窗口）

> ID：11843485
> 
> 赞同：0
> 
> 时间：2012-08-07T09:59:31.397
> 
> 标签：html, properties

这些元素/属性应该能够在悬停时突出显示。单击时，它们应该显示一个小框（不是弹出窗口）的信息（只需要 1 行）。

我考虑了链接元素，但我不希望它链接到任何地方。这不一定必须单独通过 html 来完成，但它是可取的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:19:30.047

## 您可以使用一些 javascript 和 CSS 来完成。

**CSS：**

```
a { padding: 2px 20px; background: #ccc; }
a:hover{ background: red; color: white; text-decoration:none; }
#msg { display: none; padding: 0 15px; background: #ccc; }​ 
```

**HTML：**

```
<div>
    <a href="#" onclick="showinfo('msg')">Click Me</a>
    <span id="msg">Do you want this?</span>
</div>​ 
```

**Javascript：**

```
function showinfo(id){       
    var elemID = document.getElementById(id);        
    if( elemID.style.display == "inline-block") { elemID.style.display = "none"; } 
    else { elemID.style.display = "inline-block"; }    
}​ 
```

## [看演示](http://jsfiddle.net/akhurshid/J9yXb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:08:49.750

使用 CSS 和 JavaScript：在 onload 中将 style display="none" 分配给您的信息框，然后在 onclick 中将其更改为“block”或“inline”。

# javascript - 如何使我的 eBay 搜索栏特定于我的商店？

> ID：11843487
> 
> 赞同：2
> 
> 时间：2012-08-07T09:59:34.657
> 
> 标签：javascript, html, search, ebay-design-templates

我最近重新设计了我公司 eBay 商店的外观，并设置了自定义搜索栏。但是，当我的用户搜索产品时，它并不是特别在我的商店中搜索产品。相反，它正在进行一般的 eBay 搜索。

我已将我的完整代码包含在 JSFiddle 中，供您有帮助的人查看，如果有人能告诉我如何制作它，我将不胜感激，以便它只搜索我商店中的产品。

提前致谢：JS FIDDLE：http: [//jsfiddle.net/DanCUK89/U6LqJ/](http://jsfiddle.net/DanCUK89/U6LqJ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:07:51.917

```
<form name="search" method="get"
action="http://search.stores.ebay.com/search/search.dll?GetResult&">
   <input type="text" name="query" maxlength="300" >
   <input type="hidden" name="fcd" value="2">
   <input type="hidden" name="from" value="R10">
   <input type="hidden" name="sasel" value="<Your store number>">
   <input name="submit" type="submit" value="Search">
   <br />
   <input type="checkbox" name="srchdesc" value="y">search titles & descriptions
</form> 
```

或试试这个

```
<form name="search" method="get" action="http://search.stores.ebay.com/search/search.dll">
Search Our Store:
<input type="text" name="query" size="7">
<input type="submit" value="Go" width="20" height="16" border="0">
<input type="hidden" name="MfcISAPICommand" value="GetResult">
<input type="hidden" name="sid" value="ENTER STORE ID HERE">
<input type="hidden" name="store" value="ENTER STORE NAME HERE">
<input type="hidden" name="colorid" value="15">
<input type="hidden" name="fp" value="0">
<input type="hidden" name="srchdesc" value="y">
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T10:18:07.843

利用：

```
"/your _store/_i.html 
```

在这样的形式上：

```
<form action="/your_store/_i.html"> 
```

your_store 是您商店的链接，如下所示：

```
stores.ebay.com/your_store 
```

# c# - 如何检测 DataGridView CheckBox 事件变化？

> ID：11843488
> 
> 赞同：105
> 
> 时间：2012-08-07T09:59:36.750
> 
> 标签：c#, winforms, datagridview

我有一个 winforms 应用程序，并且希望在`DataGridView`选中/取消选中嵌入在控件中的复选框时触发一些代码。我尝试过的每一个事件

1.  `CheckBox`在被单击但在其选中状态更改之前触发，或
2.  `CheckBox`仅在失去焦点时触发

我似乎找不到在检查状态更改后立即触发的事件。

* * *

**编辑：**

我想要实现的是，当一个`CheckBox`中的检查状态`DataGridView`发生变化时，另外两个中的数据`DataGridView`也会发生变化。然而，我使用的所有事件，其他网格中的数据仅`CheckBox`在第一个`DataGridView`失去焦点后发生变化。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-08-07T10:42:28.083

要处理`DatGridView`s`CheckedChanged`事件，您必须首先获得`CellContentClick`to 触发（它没有`CheckBox`es 当前状态！）然后调用`CommitEdit`. 这将反过来触发`CellValueChanged`您可以用来完成工作的事件。**这是微软的疏忽**。做一些类似下面的事情......

```
private void dataGridViewSites_CellContentClick(object sender, 
    DataGridViewCellEventArgs e)
{
    dataGridViewSites.CommitEdit(DataGridViewDataErrorContexts.Commit);
}

/// <summary>
/// Works with the above.
/// </summary>
private void dataGridViewSites_CellValueChanged(object sender, 
    DataGridViewCellEventArgs e)
{
    UpdateDataGridViewSite();
} 
```

我希望这有帮助。

PS 检查这篇文章[https://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.currentcelldirtystatechanged(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.currentcelldirtystatechanged(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2013-02-21T20:44:20.780

我发现@Killercam 的解决方案可以工作，但如果用户双击太快，就会有点狡猾。不确定其他人是否也发现了这种情况。[我在这里](http://geekswithblogs.net/FrostRed/archive/2008/09/07/125001.aspx)找到了另一个解决方案。

它使用数据网格的`CellValueChanged`和`CellMouseUp`. 长虹解释说

> “原因是 OnCellvalueChanged 事件在 DataGridView 认为您已完成编辑之前不会触发。这对于 TextBox 列是有意义的，因为 OnCellvalueChanged 不会 [打扰] 为每个按键触发触发，但它不会 [有意义] 对于 CheckBox。"

以下是他的示例：

```
private void myDataGrid_OnCellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex == myCheckBoxColumn.Index && e.RowIndex != -1)
    {
        // Handle checkbox state change here
    }
} 
```

以及告诉复选框在单击时完成编辑的代码，而不是等到用户离开该字段：

```
private void myDataGrid_OnCellMouseUp(object sender,DataGridViewCellMouseEventArgs e)
{
    // End of edition on each click on column of checkbox
    if (e.ColumnIndex == myCheckBoxColumn.Index && e.RowIndex != -1)
    {
        myDataGrid.EndEdit();
    }
} 
```

编辑：DoubleClick 事件与 MouseUp 事件分开处理。如果检测到 DoubleClick 事件，应用程序将完全忽略第一个 MouseUp 事件。除了 MouseUp 事件之外，还需要将这个逻辑添加到 CellDoubleClick 事件中：

```
private void myDataGrid_OnCellDoubleClick(object sender,DataGridViewCellEventArgs e)
{
    // End of edition on each click on column of checkbox
    if (e.ColumnIndex == myCheckBoxColumn.Index && e.RowIndex != -1)
    {
        myDataGrid.EndEdit();
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-06T22:18:00.850

jsturtevants 的解决方案效果很好。但是，我选择在 EndEdit 事件中进行处理。我更喜欢这种方法（在我的应用程序中），因为与 CellValueChanged 事件不同，EndEdit 事件在您填充网格时不会触发。

这是我的代码（其中一部分是从 jsturtevant 偷来的：

```
private void gridCategories_CellEndEdit(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex == gridCategories.Columns["AddCategory"].Index)
    {
        //do some stuff
    }
}

private void gridCategories_CellMouseUp(object sender, DataGridViewCellMouseEventArgs e)
{
    if (e.ColumnIndex == gridCategories.Columns["AddCategory"].Index)
    {
        gridCategories.EndEdit();
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-12T10:54:31.963

这是一些代码：

```
private void dgvStandingOrder_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
    if (dgvStandingOrder.Columns[e.ColumnIndex].Name == "IsSelected" && dgvStandingOrder.CurrentCell is DataGridViewCheckBoxCell)
    {
        bool isChecked = (bool)dgvStandingOrder[e.ColumnIndex, e.RowIndex].EditedFormattedValue;
        if (isChecked == false)
        {
            dgvStandingOrder.Rows[e.RowIndex].Cells["Status"].Value = "";
        }
        dgvStandingOrder.EndEdit();
    }
}

private void dgvStandingOrder_CellEndEdit(object sender, DataGridViewCellEventArgs e)
{

    dgvStandingOrder.CommitEdit(DataGridViewDataErrorContexts.Commit);
}

private void dgvStandingOrder_CurrentCellDirtyStateChanged(object sender, EventArgs e)
{
    if (dgvStandingOrder.CurrentCell is DataGridViewCheckBoxCell)
    {
        dgvStandingOrder.CommitEdit(DataGridViewDataErrorContexts.Commit);
    }
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-12-24T10:01:13.320

按照 Killercam 的回答，我的代码

```
private void dgvProducts_CellContentClick(object sender, DataGridViewCellEventArgs e)
    {
        dgvProducts.CommitEdit(DataGridViewDataErrorContexts.Commit);
    } 
```

和 ：

```
private void dgvProducts_CellValueChanged(object sender, DataGridViewCellEventArgs e)
    {
        if (dgvProducts.DataSource != null)
        {
            if (dgvProducts.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString() == "True")
            {
                //do something
            }
            else
            {
               //do something
            }
        }
    } 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-07-06T22:12:10.217

这也处理键盘激活。

```
 private void dgvApps_CellContentClick(object sender, DataGridViewCellEventArgs e)
    {
        if(dgvApps.CurrentCell.GetType() == typeof(DataGridViewCheckBoxCell))
        {
            if (dgvApps.CurrentCell.IsInEditMode)
            {
                if (dgvApps.IsCurrentCellDirty)
                {
                    dgvApps.EndEdit();
                }
            }
        }
    }

    private void dgvApps_CellValueChanged(object sender, DataGridViewCellEventArgs e)
    {
          // handle value changed.....
    } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-07-28T13:16:42.767

都是关于编辑单元格的，问题是单元格实际上没有编辑，所以你需要保存单元格或行的变化来获取点击复选框时的事件，这样你就可以使用这个功能：

```
datagridview.CommitEdit(DataGridViewDataErrorContexts.CurrentCellChange) 
```

有了这个，你甚至可以在不同的事件中使用它。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-08-04T05:54:44.450

对于这个问题，我找到了一个更简单的答案。我只是使用反向逻辑。代码在 VB 中，但与 C# 没有太大区别。

```
 Private Sub DataGridView1_CellContentClick(sender As Object, e As 
 DataGridViewCellEventArgs) Handles DataGridView1.CellContentClick

    Dim _ColumnIndex As Integer = e.ColumnIndex
    Dim _RowIndex As Integer = e.RowIndex

    'Uses reverse logic for current cell because checkbox checked occures 
     'after click
    'If you know current state is False then logic dictates that a click 
     'event will set it true
    'With these 2 check boxes only one can be true while both can be off

    If DataGridView1.Rows(_RowIndex).Cells("Column2").Value = False And 
       DataGridView1.Rows(_RowIndex).Cells("Column3").Value = True Then
        DataGridView1.Rows(_RowIndex).Cells("Column3").Value = False
    End If

    If DataGridView1.Rows(_RowIndex).Cells("Column3").Value = False And 
    DataGridView1.Rows(_RowIndex).Cells("Column2").Value = True Then
        DataGridView1.Rows(_RowIndex).Cells("Column2").Value = False
    End If

End Sub 
```

最好的事情之一就是不需要多个事件。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-07-16T14:51:46.253

我从这里尝试了一些答案，但我总是遇到某种问题（比如双击或使用键盘）。所以，我结合了其中的一些并得到了一致的行为（它并不完美，但可以正常工作）。

```
void gridView_CellContentClick(object sender, DataGridViewCellEventArgs e) {
  if(gridView.CurrentCell.GetType() != typeof(DataGridViewCheckBoxCell))
    return;
  if(!gridView.CurrentCell.IsInEditMode)
    return;
  if(!gridView.IsCurrentCellDirty)
    return;
  gridView.EndEdit();
}

void gridView_CellMouseUp(object sender, DataGridViewCellMouseEventArgs e) {
  if(e.ColumnIndex == gridView.Columns["cFlag"].Index && e.RowIndex >= 0)
    gridView.EndEdit();
}

void gridView_CellValueChanged(object sender, DataGridViewCellEventArgs e) {
  if(e.ColumnIndex != gridView.Columns["cFlag"].Index || e.RowIndex < 0)
    return;

  // Do your stuff here.

} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-07-12T17:57:14.847

Ben Voigt 在上面的评论回复中找到了最佳解决方案：

```
private void dgvStandingOrder_CurrentCellDirtyStateChanged(object sender, EventArgs e)
{
    if (dgvStandingOrder.CurrentCell is DataGridViewCheckBoxCell)
        dgvStandingOrder.CommitEdit(DataGridViewDataErrorContexts.Commit);
} 
```

说真的，这就是你所需要的。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-08-28T04:38:21.577

对我有用的是`CurrentCellDirtyStateChanged`结合`datagridView1.EndEdit()`

```
private void dataGridView1_CurrentCellDirtyStateChanged( object sender, EventArgs e ) {
    if ( dataGridView1.CurrentCell is DataGridViewCheckBoxCell ) {
        DataGridViewCheckBoxCell cb = (DataGridViewCheckBoxCell)dataGridView1.CurrentCell;
        if ( (byte)cb.Value == 1 ) {
            dataGridView1.CurrentRow.Cells["time_loadedCol"].Value = DateTime.Now.ToString();
        }
    }
    dataGridView1.EndEdit();
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-09-30T08:23:23.957

代码将在 DataGridView 中循环并检查 CheckBox 列是否被选中

```
private void dgv1_CellMouseUp(object sender, DataGridViewCellMouseEventArgs e)
{
    if (e.ColumnIndex == 0 && e.RowIndex > -1)
    {
        dgv1.CommitEdit(DataGridViewDataErrorContexts.Commit);
        var i = 0;
        foreach (DataGridViewRow row in dgv1.Rows)
        {
            if (Convert.ToBoolean(row.Cells[0].Value))
            {
                i++;
            }
        }

        //Enable Button1 if Checkbox is Checked
        if (i > 0)
        {
            Button1.Enabled = true;
        }
        else
        {
            Button1.Enabled = false;
        }
    }
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-02-22T10:26:42.523

在事件 CellContentClick 中，您可以使用此策略：

```
private void myDataGrid_CellContentClick(object sender, DataGridViewCellEventArgs e)
{    
    if (e.ColumnIndex == 2)//set your checkbox column index instead of 2
    {   //When you check
        if (Convert.ToBoolean(myDataGrid.Rows[e.RowIndex].Cells[2].EditedFormattedValue) == true)
        {
            //EXAMPLE OF OTHER CODE
            myDataGrid.Rows[e.RowIndex].Cells[5].Value = DateTime.Now.ToShortDateString();

            //SET BY CODE THE CHECK BOX
            myDataGrid.Rows[e.RowIndex].Cells[2].Value = 1;
        }
        else //When you decheck
        {
            myDataGrid.Rows[e.RowIndex].Cells[5].Value = String.Empty;

            //SET BY CODE THE CHECK BOX
            myDataGrid.Rows[e.RowIndex].Cells[2].Value = 0;
        }
    }
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-08-04T06:37:20.253

我发现的最好方法（也不使用多个事件）是处理`CurrentCellDirtyStateChanged`事件。

```
private void dataGrid_CurrentCellDirtyStateChanged(object sender, EventArgs e)
    {
        if (dataGridMatten.CurrentCell.OwningColumn == dataGridMatten.Columns["checkBoxColumn"] && dataGridMatten.IsCurrentCellDirty)
        {
            dataGrid.CommitEdit(DataGridViewDataErrorContexts.Commit);

            //your code goes here
        }
    } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-02-27T16:48:09.967

要在使用 devexpress xtragrid 时执行此操作，必须按照[此处](https://www.devexpress.com/Support/Center/Question/Details/Q330233)所述处理相应存储库项的[EditValueChanged](https://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsRepositoryRepositoryItem_EditValueChangedtopic)事件。调用 gridView1.PostEditor() 方法以确保已发布更改的值也很重要。这是一个实现：

```
 private void RepositoryItemCheckEdit1_EditValueChanged(object sender, System.EventArgs e)
        {
            gridView3.PostEditor();

            var isNoneOfTheAboveChecked = false;

            for (int i = 0; i < gridView3.DataRowCount; i++)
            {
                if ((bool) (gridView3.GetRowCellValue(i, "NoneOfTheAbove")) && (bool) (gridView3.GetRowCellValue(i, "Answer")))
                {
                    isNoneOfTheAboveChecked = true;
                    break;
                }
            }

            if (isNoneOfTheAboveChecked)
            {
                for (int i = 0; i < gridView3.DataRowCount; i++)
                {
                    if (!((bool)(gridView3.GetRowCellValue(i, "NoneOfTheAbove"))))
                    {
                        gridView3.SetRowCellValue(i, "Answer", false);
                    }
                }
            }
        } 
```

请注意，由于 xtragrid 不提供枚举器，因此有必要使用 for 循环来遍历行。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-09-27T03:14:03.397

在单元格值更改后移除焦点允许在 DataGridView 中更新值。通过将 CurrentCell 设置为 null 来移除焦点。

```
private void DataGridView1OnCellValueChanged(object sender, DataGridViewCellEventArgs dataGridViewCellEventArgs)
{
    // Remove focus
    dataGridView1.CurrentCell = null;
    // Put in updates
    Update();
}

private void DataGridView1OnCurrentCellDirtyStateChanged(object sender, EventArgs eventArgs)
{
    if (dataGridView1.IsCurrentCellDirty)
    {
        dataGridView1.CommitEdit(DataGridViewDataErrorContexts.Commit);
    }

} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-11-03T20:17:33.523

您可以在单击复选框后强制单元格提交值，然后捕获*CellValueChanged*事件。*CurrentCellDirtyStateChanged*在您单击复选框后立即触发。

以下代码适用于我：

```
private void grid_CurrentCellDirtyStateChanged(object sender, EventArgs e)
    {
        SendKeys.Send("{tab}");
    } 
```

*然后，您可以在CellValueChanged*事件中插入您的代码。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-12-10T09:46:29.383

我将 DataGridView 与 VirtualMode=true 一起使用，只有这个选项对我有用（当鼠标和空格键都工作时，包括重复的空格单击）：

```
private void doublesGridView_CurrentCellDirtyStateChanged(object sender, EventArgs e)
{
   var data_grid = (DataGridView)sender;

   if (data_grid.CurrentCell.IsInEditMode && data_grid.IsCurrentCellDirty) {
      data_grid.EndEdit();            
   }
}

private void doublesGridView_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
   if (e.ColumnIndex == CHECKED_COLUMN_NUM && e.RowIndex >= 0 && e.RowIndex < view_objects.Count) { // view_objects - pseudocode   
     view_objects[e.RowIndex].marked = !view_objects[e.RowIndex].marked;        // Invert the state of the displayed object
   }
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-04-05T22:17:37.097

这对我有用

```
 private void employeeDataGridView_CellEndEdit(object sender, DataGridViewCellEventArgs e)
        {
            if (e.ColumnIndex == employeeDataGridView.Columns["employeeStatusColumn"].Index)
            {
                bool isChecked = (bool)employeeDataGridView.CurrentCell.Value;
                if (isChecked)
                {
                    MessageBox.Show("Checked " + isChecked); //out true;
                }
                else
                {
                    MessageBox.Show("unChecked " + isChecked);
                }
            }

        }

        private void employeeDataGridView_CellMouseUp(object sender, DataGridViewCellMouseEventArgs e)
        {
            if (employeeDataGridView.DataSource != null)
            {
                if (e.ColumnIndex == employeeDataGridView.Columns["employeeStatusColumn"].Index && e.RowIndex != -1)
                {
                    employeeDataGridView.EndEdit();
                }
            }
        } 
```

# c# - 如何在 wp7 中专注于 Telerik RadjumpList 的特定组中的特定项目

> ID：11843493
> 
> 赞同：1
> 
> 时间：2012-08-07T09:59:54.630
> 
> 标签：c#, windows-phone-7

我正在使用 Telerik RadJumpList 列出项目组。我有一个“fetchMoreButton”向每个组插入更多值。每个组都有单独的 FetchMoreButton。我的问题是在插入更多值后，我无法专注于插入的值.焦点转到第一组中的第一项。

# php - 尝试将隐藏的输入值发送到下一页

> ID：11843494
> 
> 赞同：2
> 
> 时间：2012-08-07T09:59:55.597
> 
> 标签：php, wordpress, session, jigoshop

我正在尝试根据客户的需求调整 Wordpress Jigoshop，但我有点卡住了。我需要的是：选择产品变化时，客户必须选择的无线电按钮的形式出现一些其他选项。我已经设法让一切正常工作，但我现在需要的是在单击提交按钮时将选定的单选按钮发送到购物车、结帐等。

我正在尝试使用他们的产品定制功能来做到这一点，他们的功能是：

```
 if (!function_exists('jigoshop_product_customize_panel')) {
    function jigoshop_product_customize_panel() {
        global $_product;

    if ( isset( $_POST['Submit'] ) && $_POST['Submit'] == 'Save Personalization' ) {
        $custom_products = (array) jigoshop_session::instance()->customized_products;
        $custom_products[$_POST['customized_id']] = trim( wptexturize( $_POST['jigoshop_customized_product'] ));
        jigoshop_session::instance()->customized_products = $custom_products;
    }

    if ( get_post_meta( $_product->ID , 'customizable', true ) == 'yes' ) :
        $custom_products = (array) jigoshop_session::instance()->customized_products;
        $custom = isset( $custom_products[$_product->ID] ) ? $custom_products[$_product->ID] : '';
        $custom_length = get_post_meta( $_product->ID , 'customized_length', true );
        $length_str = $custom_length == '' ? '' : sprintf( __( 'You may enter a maximum of %s characters.', 'jigoshop' ), $custom_length );

        echo '<div class="panel" id="tab-customize">';
        echo '<p>' . apply_filters('jigoshop_product_customize_heading', __('Enter your personal information as you want it to appear on the product.<br />'.$length_str, 'jigoshop')) . '</p>';

        ?>

            <form action="" method="post">

                <input type="hidden" name="customized_id" value="<?php echo esc_attr( $_product->ID ); ?>" />

                <?php
                if ( $custom_length == '' ) :
                ?>
                    <textarea
                        id="jigoshop_customized_product"
                        name="jigoshop_customized_product"
                        cols="60"
                        rows="4"><?php echo esc_textarea( $custom ); ?>
                    </textarea>
                <?php else : ?>
                    <input 
                        type="text"
                        id="jigoshop_customized_product"
                        name="jigoshop_customized_product"
                        size="<?php echo $custom_length; ?>"
                        maxlength="<?php echo $custom_length; ?>"
                        value="<?php echo esc_attr( $custom ); ?>" />
                <?php endif; ?>

                <p class="submit"><input name="Submit" type="submit" class="button-alt add_personalization" value="<?php _e( "Save Personalization", 'jigoshop' ); ?>" /></p>

            </form>

        <?php
        echo '</div>';
    endif;
}
} 
```

我尝试修改它们的功能以满足我的需要，这就是我想出的（其中 get_cod 是隐藏输入的 id 和名称，“Adauga in cos”是我的提交按钮的值）：

```
if (!function_exists('salveaza_cod_material')) {
function salveaza_cod_material() {
    global $_product;

    if ( isset( $_POST['submit']) && $_POST('submit') == 'Adauga in cos') {
        $custom_products = (array) jigoshop_session::instance()->customized_products;
        $custom_products[$_POST['customized_id']] = trim( wptexturize( $_POST['get_cod'] ));
        jigoshop_session::instance()->customized_products = $custom_products;
    }

        $custom_products = (array) jigoshop_session::instance()->customized_products;
        $custom = isset( $custom_products[$_product->ID] ) ? $custom_products[$_product->ID] : '';
}} 
```

但是，该值不会发送到下一页。有人可以帮忙吗？干杯!

这是包含更多代码的更新：

```
<form action="<?php echo esc_url( $_product->add_to_cart_url() ); ?>"     class="variations_form cart" method="post">
        <fieldset class="variations">
            <?php foreach ( $attributes as $name => $options ): ?>
                <?php $sanitized_name = sanitize_title( $name ); ?>
                <div>
                    <span class="select_label"><?php echo jigoshop_product::attribute_label('pa_'.$name); ?></span>

                    <select id="<?php echo esc_attr( $sanitized_name ); ?>" name="tax_<?php echo $sanitized_name; ?>">

                        <option value=""><?php echo __('Choose an option ', 'jigoshop') ?>&hellip;</option>
                        <?php foreach ( $options as $value ) : ?>
                            <?php if ( taxonomy_exists( 'pa_'.$sanitized_name )) : ?>
                                <?php $term = get_term_by( 'slug', $value, 'pa_'.$sanitized_name ); ?>
                                <option value="<?php echo esc_attr( $term->slug ); ?>"><?php echo $term->name; ?> </option>
                            <?php else : ?>
                                <option value="<?php echo esc_attr( sanitize_title( $value ) ); ?>"><?php echo $value; ?></option>
                            <?php endif;?>
                        <?php endforeach; ?>
                    </select>

                </div>
            <?php endforeach;?>
        </fieldset>
<div id="piele-neagra" class="colors" style="display:none"> 
    <ul class="materiale">
    <li><input type="radio" name="piele-neagra" value="L73">
    <p><img class="alignnone size-full wp-image-155" title="L73" src="http://www.scaune-directoriale.ro/wp-content/uploads/materiale/piele-neagra/L73.gif" alt="L73" width="72" height="72" /></p>
    </li>
    </ul> 
</div>

<div id="stofa-mf" class="colors" style="display:none"> 
    <ul class="materiale">

    <li><input type="radio" name="tapiterie" value="MF01" />

...

 <div id="stofa-rg" class="colors" style="display:none"> Stofa RG</div>
        <div class="clear"></div>

        <span id="cod_material"><?php echo esc_attr( $custom ); ?></span>
        <span><?php echo trim( wptexturize( $_POST['get_cod'] )); ?></span>
        <div class="single_variation"></div>

        <?php do_action('jigoshop_before_add_to_cart_form_button'); ?>
        <div class="variations_button" style="display:none;">
            <input type="hidden" name="variation_id" value="" />
             <input type="hidden" name="customized_id" value="<?php echo esc_attr( $_product->ID ); ?>" />
        <input type="hidden" id="get_cod" name="get_cod" value="" />
            <input type="hidden" name="product_id" value="<?php echo esc_attr( $post->ID ); ?>" />
            <div class="quantity"><input name="quantity" value="1" size="4" title="Qty" class="input-text qty text" maxlength="12" /></div>
            <input type="submit" id="submit_cart" class="button-alt" value="<?php esc_html_e('Add to cart', 'jigoshop'); ?>" />
        </div>
        <?php do_action('salveaza_cod_material'); ?>
        <?php do_action('jigoshop_add_to_cart_form'); ?>
    </form> 
```

这是接收值的购物车部分：

```
if ( !empty( $values['variation_id'] )) {
                                             $product_id = $values['variation_id'];
                                    } else {
                                        $product_id = $values['product_id'];
                                    }
                                        $custom_products = (array) jigoshop_session::instance()->customized_products;
                                    $custom =     isset( $custom_products[$product_id] ) ? $custom_products[$product_id] : '';
                                    if ( !     empty( $custom_products[$product_id] ) ) :
                                        ?>
                                        <dl      class="customization">
                                                <dt class="customized_product_label"><?php echo     apply_filters('jigoshop_customized_product_label', __('Personal: ','jigoshop') ); ?></dt>
                                                <dd class="customized_product"><?php echo esc_textarea( $custom ); ?></dd>
                                             </dl>
                                        <?    php
                                    endif;
                                    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:11:51.583

这只是一个错字： in `if ( isset( $_POST['submit']) && $_POST('submit') == 'Adauga in cos')`，替换`$_POST('submit')`为`$_POST['submit']`

# c++ - C++：在运行时更改 for 循环的索引是一种不好的方法吗？

> ID：11843497
> 
> 赞同：2
> 
> 时间：2012-08-07T09:59:59.030
> 
> 标签：c++, loops, for-loop, indexing

我有一个 for 循环，它搜索结构数组以找到特定结构。现在这个数组的大小可能是 10000。

在 for 循环中，我可能会收集一些额外的信息，这些信息会告诉我您正在寻找的结构到底在哪里。因此，如果您的索引当前为“5”，您可能会发现它不在“5”中，而是在“9000”中。

所以我使用这些信息来更改索引。

现在代码工作得非常好，而无需更改索引，因为它确实找到了所需的信息。但是，如果我 100% 确定在这种情况下我所做的事情是正确的，是否可以更改 for 循环中的索引以更快地获得结果？

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T10:03:37.950

绝对没问题。该语言不区分更改循环体中的索引和更改循环头中的增量语句中的索引。

```
for (initializer-statement; condition-statement; increment-statement)
    loop-body; 
```

主要相当于*_*

```
{
    initializer-statement;
    while (condition-statement) {
        loop-body;
        increment-statement;
    }
} 
```

一个区别是`continue`循环体中的语句`for`仍将执行`increment-statement`，如果您不期望它可能会导致问题。

还要注意不要通过超出终止条件来创建无限循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T10:03:10.817

好吧，通常，不（我不是说它在某种程度上受到限制，你完全*可以*做到），只是为了理解你自己的程序逻辑。它可能导致许多错误。如果减少循环中的索引，则可能会导致无限循环。

如果增加它，有时可能会使索引太大。例如，如果您正在访问数组元素，您可能会尝试访问像这样的键外元素，依此类推。

*如果*你想修改循环内的索引，你应该*始终*了解你在做什么，并且可能在循环内添加一些额外的条件检查以避免奇怪的行为。

如果在您的情况下它工作正常，那么它没有任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T10:04:45.403

更改索引是完全可以的，只要它不会使代码过于复杂。

事实上，您可能希望将位置“提示”与实际数据分开，这可能会为您提供一种更简单的方法来处理两者。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T10:08:55.763

完全没问题。如果应用程序有任何性能提升，您**必须**添加此类更改（前提是，更改不会妨碍您的功能）。

# jquery - jQuery从xml加载图片

> ID：11843499
> 
> 赞同：0
> 
> 时间：2012-08-07T10:00:03.957
> 
> 标签：jquery, xml, image, flash, prettyphoto

嗨，我不想从 xml 加载图片，而是通过 prettyphoto 加载它，这是我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<images>

<image source="Zdjecia/Galeria/Kategoria1/Miniaturki/image1.jpg"                

lightbox="Zdjecia/Galeria/Kategoria1/Duze/image1.jpg"/>

<image source="Zdjecia/Galeria/Kategoria1/Miniaturki/image2.jpg"                

lightbox="Zdjecia/Galeria/Kategoria1/Duze/image2.jpg"/>

    <image source="Zdjecia/Galeria/Kategoria1/Miniaturki/image3.jpg"        

lightbox="Zdjecia/Galeria/Kategoria1/Duze/image3.jpg"/>

    <image source="Zdjecia/Galeria/Kategoria1/Miniaturki/image4.jpg"        

lightbox="Zdjecia/Galeria/Kategoria1/Duze/image4.jpg"/>

    <image source="Zdjecia/Galeria/Kategoria1/Miniaturki/image5.jpg"        

lightbox="Zdjecia/Galeria/Kategoria1/Duze/image5.jpg"/>

    <image source="Zdjecia/Galeria/Kategoria1/Miniaturki/image6.jpg"        

lightbox="Zdjecia/Galeria/Kategoria1/Duze/image6.jpg"/>

    <image source="Zdjecia/Galeria/Kategoria1/Miniaturki/image7.jpg"        

lightbox="Zdjecia/Galeria/Kategoria1/Duze/image7.jpg"/>

    <image source="Zdjecia/Galeria/Kategoria1/Miniaturki/image8.jpg"        

lightbox="Zdjecia/Galeria/Kategoria1/Duze/image8.jpg"/>

    <image source="Zdjecia/Galeria/Kategoria1/Miniaturki/image9.jpg"        

lightbox="Zdjecia/Galeria/Kategoria1/Duze/image9.jpg"/>

    <image source="Zdjecia/Galeria/Kategoria1/Miniaturki/image10.jpg"       

lightbox="Zdjecia/Galeria/Kategoria1/Duze/image10.jpg"/>
</images> 
```

这是我的js函数：

```
jQuery(window).ready(function($) {
        $.get("XML/Kategoria1.xml",{},function(xml){
            $('image',xml).each(function(i) {
                lightbox = $(this).find("lightbox").text();
            });
        });

        $.fn.prettyPhoto();
        });

        function openLightbox(path) {

            $.prettyPhoto.open(lightbox);

            } 
```

我要打开的第一个图像是“路径”，它是从 Flash 发送的，下一个我想从名为“lightbox”的 xml 加载的图像，但是这个脚本不起作用，任何人都可以告诉我为什么或解释我该怎么做？请寻求帮助。

* * *

这是我的 html 文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="pl" xml:lang="pl">
    <head>
        <title>portfolio</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<link rel="stylesheet" type="text/css" href="css/prettyPhoto.css" media="all"/>
     <script type="text/javascript" src="scripts/jquery-1.4.4.min.js"></script>
        <script type="text/javascript" src="scripts/jquery.prettyPhoto.js"></script>  
     <script type="text/javascript" src="scripts/swfobject.js"></script>
        <script type="text/javascript" src="scripts/swffit.js"></script>
        <script type="text/javascript">
            swfobject.embedSWF("portfolio.swf", "my_flash", "980", "640", "9.0.0", "", false, {wmode:'transparent'});
            swffit.fit("my_flash"); 

$(document).ready(function($) {
    $.get("xml/kategoria1.xml",{},function(xml){
    $('image',xml).each(function(i) {
        lightbox = $(this).find("lightbox").text();
        openLightbox(lightbox);
    });
});

function openLightbox(path) {
    $.prettyPhoto.open(path);
}
        </script>

        <style type="text/css" media="screen">
        html, body { height:100%; background-color: #000000;}
        body { margin:0; padding:0; overflow:hidden; }
        #flashContent { width:100%; height:100%; }
        </style>
    </head>
    <body>
        <div id="my_flash">
            <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="100%" height="100%" id="portfolio" align="middle">
                <param name="movie" value="portfolio.swf" />
                <param name="quality" value="best" />
                <param name="bgcolor" value="#000000" />
                <param name="play" value="true" />
                <param name="loop" value="true" />
                <param name="wmode" value="transparent" />
                <param name="scale" value="showall" />
                <param name="menu" value="true" />
                <param name="devicefont" value="false" />
                <param name="salign" value="lt" />
                <param name="allowScriptAccess" value="sameDomain" />
                <param name="allowFullScreen" value="true" />
                <!--[if !IE]>-->
                <object type="application/x-shockwave-flash" data="portfolio.swf" width="100%" height="100%">
                    <param name="movie" value="portfolio.swf" />
                    <param name="quality" value="best" />
                    <param name="bgcolor" value="#000000" />
                    <param name="play" value="true" />
                    <param name="loop" value="true" />
                    <param name="wmode" value="transparent" />
                    <param name="scale" value="showall" />
                    <param name="menu" value="true" />
                    <param name="devicefont" value="false" />
                    <param name="salign" value="lt" />
                    <param name="allowScriptAccess" value="sameDomain" />
                    <param name="allowFullScreen" value="true" />
                <!--<![endif]-->
                    <a href="http://www.adobe.com/go/getflash">
                        <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Pobierz odtwarzacz Adobe Flash Player" />
                    </a>
                <!--[if !IE]>-->
                </object>
                <!--<![endif]-->
            </object>
        </div>
    </body>
</html> 
```

* * *

我尝试做一些事情，这个脚本从 xml 加载单个图像，任何想法如何从 xml 加载所有“灯箱”图像？

```
jQuery(window).ready(function($) {
    $.fn.prettyPhoto();
    $.get("xml/kategoria1.xml",{},function(xml){
    $('image',xml).each(function(i) {
        lightbox = $(this).find("lightbox").text();
      openLightbox(lightbox)
    });
});
});

function openLightbox(path) {
    $.prettyPhoto.open(path); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:30:54.910

用这个交换上面的代码......

```
$(document).ready(function($) {
    $.get("XML/Kategoria1.xml",{},function(xml){
    $('image',xml).each(function(i) {
        lightbox = $(this).find("lightbox").text();
        openLightbox(lightbox);
    });
});

function openLightbox(path) {
    $.prettyPhoto.open(path);
} 
```

# android - Android KSOAP2 错误

> ID：11843500
> 
> 赞同：0
> 
> 时间：2012-08-07T10:00:05.810
> 
> 标签：android

我正在使用 jar(ksoap2-android-assembly-2.6.5-jar-with-dependencies) 并有一个网络 -

`services.url = http://62.244.199.18:8888/ergo-ergoService-context-root/ergoSoapHttpPort?WSDL`

我的代码在下面

```
private static final String METHOD_NAME = "checkloginnew";
private static final String SOAP_ACTION = "http://ergoconn/Ergo.wsdl/checkloginnew";
private static final String NAMESPACE = "http://ergoconn/Ergo.wsdl";
private static final String URL = "http://62.244.199.18:8888/ergo-ergoService-context-root/ergoSoapHttpPort?WSDL";

SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
PropertyInfo pi = new PropertyInfo();
pi.setName("pPid");
pi.setValue(1149688);
pi.setType(BigDecimal.class);
request.addProperty(pi);

PropertyInfo pi2 = new PropertyInfo();
pi2.setName("pPass");
pi2.setValue("074920");
pi2.setType(String.class);
request.addProperty(pi2);

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 
envelope.setOutputSoapObject(request);

HttpTransportSE httpTransport = new HttpTransportSE(URL); 
httpTransport.debug = true;
httpTransport.call(SOAP_ACTION, envelope);
SoapObject result=(SoapObject)envelope.getResponse(); 
```

但我得到一个错误`"Caught exception while handling request: unrecognized operation: {http://ergoconn/Ergo.wsdl}checkloginnew"`

```
In my httpTransport.responseDump:
<faultcode>env:Client</faultcode><faultstring>Caught exception while handling request: unrecognized operation: {http://ergoconn/Ergo.wsdl}checkloginnew</faultstring></env:Fault> 
```

非常感谢

# puppet - 在 Puppet 中取消注释一行

> ID：11843506
> 
> 赞同：7
> 
> 时间：2012-08-07T10:00:33.943
> 
> 标签：puppet

我正在进入 Puppet 并喜欢它，但是我用一件小东西撞到墙上，我确信这一定比我制作它更容易。

我希望在`.bashrc`用户中取消注释此行：

```
#force_color_prompt=yes 
```

我一直在使用 augeas 做很多事情，但似乎这不适用于此。

我注意到有一个`file_line`资源可用于确保文件中存在一行，但我需要该行保留在同一个位置。

我不希望`.bashrc`完全用我自己的副本替换它，尽管看到这种模式在 Puppet 中很流行，但这对我来说没有意义，因为我不想在升级之间维护我自己的版本。

在 sed 我使用这个：

```
sed -i "s/#force_color_prompt=yes/force_color_prompt=yes/g" ~/.bashrc 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T01:35:58.057

您可以使用 grep 将您的 sed 命令添加到带有除非选项的 exec 中。像这样的东西（未经测试）：

```
exec { 'force_color_prompt':
  command   => 'sed -i "s/#force_color_prompt=yes/force_color_prompt=yes/g" .bashrc'
  cwd       => '/home/user',
  shell     => true,
  unless    => 'grep -Fxq "force_color_prompt=yes" .bashrc',
} 
```

或者使用您提到的 file_line 资源（我相信是 Puppet Labs stdlib 模块的一部分）添加未注释的行并保持注释行不变。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-08T18:14:15.547

根据我的经验， file_line 将替换与正则表达式匹配的行。

所以要获得`force_color_prompt=yes`vs.`#force_color_prompt=yes`你可以：

```
file_line {
    'color_prompt':
        path        => '/home/<youruser>/.bashrc',
        match       => 'force_color_prompt',
        line        => "force_color_prompt=yes",
} 
```

重要的是，如果正则表达式*匹配*，则替换发生**在**适当的位置，即。它会改变线，而不是线的位置。但是，如果正则表达式不*匹配*，则该行将附加到文件的末尾。

这种体验适用于 Puppet 3.1。

参考：[https ://forge.puppetlabs.com/puppetlabs/stdlib](https://forge.puppetlabs.com/puppetlabs/stdlib)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-07T08:14:22.087

shellvar已经可以取消注释[行](http://augeasproviders.com/documentation/examples.html#shellvar-provider)

```
shellvar { '.bashrc':
  ensure    => present,
  target    => "/home/${your_user}/.bashrc",
  variable => 'force_color_prompt'
  uncomment => true,
} 
```

我认为这比使用 exec 和调用 sed 要干净得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-06T20:40:20.887

虽然仅 Augeas 无法做到这一点`shellvar`，但只要合并[此 PR](https://github.com/hercules-team/augeasproviders/pull/46) ，来自 Augeasproviders 的提供者就可以做到。

# xcode - 如何在 xcode 上创建平面图？

> ID：11843511
> 
> 赞同：1
> 
> 时间：2012-08-07T10:00:54.083
> 
> 标签：xcode, dictionary, frameworks, location

我想知道如何在 xcode 上制作平面图。

平面图示例： [http ://www.asiaislandhomes.com/developments/suriyana/images/lower_floor_plan.jpg](http://www.asiaislandhomes.com/developments/suriyana/images/lower_floor_plan.jpg)

应用程序将能够定位用户在该楼层的位置，并能够告诉用户入口、出口在哪里。此外，用户将能够搜索浴室和卧室的位置。

# sql-server - 我对在我的数据库中使用聚集和非聚集索引感到困惑

> ID：11843515
> 
> 赞同：2
> 
> 时间：2012-08-07T10:01:04.077
> 
> 标签：sql-server, indexing

我希望你能分享你的时间来帮助我。

目前，我正在使用 3 个表来比较获取数据的性能。这 3 个表具有相同的列（LocInvID、ActivityDate、ItemID、StoreID、CustomerID）、相同的数据（大约 1300 万条记录）：

1.  表 LocInv1：在 LocInvID 处使用聚集索引（它也是主键）。**使用 ActivityDate 的分区表**。并且 3 列（ItemID、StoreID、CustomerID）是非聚集索引。

2.  表 LocInv2：在 LocInvID 处使用聚集索引（它也是主键）。**不使用分区表**。

3.  表 LocInv3：在 LocInvID 处使用聚集索引（它也是主键）。并且 3 列（ItemID、StoreID、CustomerID）是非聚集索引。**不使用分区表**。

    创建非聚集索引 [IX_LocInv3] ON [LocInv3] ( [ItemID] ASC ,[StoreID] ASC , [CustomerID] ASC ) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE =关闭，ALLOW_ROW_LOCKS = 开启，ALLOW_PAGE_LOCKS = 开启）开启 [PRIMARY] 开始

当我运行这个查询字符串时（在 3 个表中）

```
select ActivityDate,ItemID,StoreID,CustomerID from LocInv1 WITH (INDEX(IX_LocInv))  where ItemID=43 
select ActivityDate,ItemID,StoreID,CustomerID from LocInv2 where ItemID=43 
select ActivityDate,ItemID,StoreID,CustomerID from LocInv3 where ItemID=43 
```

结果很奇怪：

1.  表 LocInv1 变得最慢。可能吗？我的查询字符串不正确？

2.  表 LocInv3 使用非聚集索引，但在实际执行计划中，它是聚集索引扫描。我不明白，我用ItemID查询，为什么是Clustered Index Scan？

3.  Table LocInv2 仅对 LocInvID 使用聚集索引，但它得到了最快的结果。这是对的吗？

请指教。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:53:38.093

查询优化器选择了他能找到的快速方法，不仅取决于索引，还取决于它们包含的数据。

通过聚集索引进行搜索通常更快，但在某些情况下这样做会更快，您可以测试它删除并再次放置索引。

更不用说，根据表遭受的操作（插入、更新、删除）和延迟索引插入也会影响搜索。

这些更改将改变索引的存储方式，具体取决于您可能拥有多页索引的事物的大小。

如果您可以在这些表中发布一个数据插入脚本，我会看起来更好。如果您只进行了查询分析器测试 (ctrl+l)，它不应该是 100% 准确的

# java - 将文件复制到 myClass 的相对路径

> ID：11843517
> 
> 赞同：0
> 
> 时间：2012-08-07T10:01:07.947
> 
> 标签：java, file, inputstream, relative-path

这是我的应用目录

```
----dist
       +-- lib //library folder
       +-- backup //folder with my database backup filename = database_file.sqlite
       |__ app.jar
       |__ database_file.sqlite 
```

当我对按钮执行操作时，我想关闭数据库连接，然后将**database_file.sqlite**从**备份文件夹复制（覆盖）到将****database_file.sqlite**加载到我的应用程序的根文件夹（**dist**） 。不久，我想在单击按钮时重新加载备份/原始数据库。注意：我使用默认包现在我有这个代码（见下文），但我不知道如何使它工作。

 **```
private void cmd_backupActionPerformed(java.awt.event.ActionEvent evt) {
int p = JOptionPane.showConfirmDialog(null, "Do you really want to reset your data / Backup database?", "Backup", JOptionPane.YES_NO_OPTION);
        if (p == 0) {
            InputStream inStream = null;
            OutputStream outStream = null;
            try {

                rs.close();
                pst.close();

                File afile = new File("C:\\Users\\Tzontonel\\Documents\\NetBeansProjects\\RDSS\\dist\\backup\\database_file.sqlite");
                File bfile = new File("C:\\Users\\Tzontonel\\Documents\\NetBeansProjects\\RDSS\\dist\\database_file.sqlite");
                System.out.println(afile.getCanonicalPath());

                inStream = new FileInputStream(afile);
                outStream = new FileOutputStream(bfile);

                byte[] buffer = new byte[1024];

                int length;
                //copy the file content in bytes 
                while ((length = inStream.read(buffer)) > 0) {

                    outStream.write(buffer, 0, length);

                }

                inStream.close();
                outStream.close();

                // delete the original file
                // afile.delete();

                System.out.println("File is copied successful!");

            } catch (Exception e) {

                JOptionPane.showMessageDialog(null, e);
            }

        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:28:23.483

类加载器不访问文件系统。它访问类路径中的资源。您不想在这里使用类加载器，而是文件 IO. 所以调用`getResourceAsStream()`没有意义（无论如何你都会用另一个替换它返回的输入流）。

将您的课程放在一个包中，就像所有课程一样。

现在，当您创建这样的文件时：

```
new File("database_file.sqlite") 
```

您打开当前目录中的文件。当前目录是执行java命令的目录。因此，除非您`dist`在执行程序时始终位于该目录中，否则您将无法使用这样的相对路径打开文件。

将目录的路径`dist`作为参数或系统属性传递给您的应用程序，并将此目录用作打开文件的基本目录。

下一个问题是您同时打开同一个文件的输入流和输出流。您应该打开备份文件的 InputStream 和数据库文件的输出流。**

# nservicebus - NServicebus Publisher/Distributor 无法与所有订阅者/工作者进行通信？

> ID：11843519
> 
> 赞同：0
> 
> 时间：2012-08-07T10:01:10.663
> 
> 标签：nservicebus, nservicebus-distributor

我们有一个分发者/发布者（NSB 社区版本，位于域上，但由于某些问题最近更改为工作组模式），它与两个不同服务器（域上）上的两个工作人员通信。突然之间，它没有向其中一名工人发送任何工作，因为该工人已经发送了几条发布者未确认的确认。

请帮助 - 这是 NSB 主机中的错误还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:35:24.687

终于找到问题了，和Nservicebus无关，和网络有关。由于某些安全/防火墙问题，服务器无法相互通信。

解决方案是：在发布者（分发者）中添加订阅者（工作服务器）的主机条目也解决了同样的问题。

# python - Python：在字符串中查找字符的值

> ID：11843523
> 
> 赞同：12
> 
> 时间：2012-08-07T10:01:18.433
> 
> 标签：python, string

给定一个长字符串，例如：

```
"fkjdlfjzgjkdsheiwqueqpwnvkasdakpp" 
```

或者

```
"0.53489082304804918409853091868095809846545421135498495431231" 
```

如何找到该字符串中第 n 个字符的值？如果我可以将其转换为列表（每个数字都有自己的索引），我可以解决这个问题，但由于数字不是用逗号分隔的，我也不知道该怎么做。

AFAIK 没有类似的命令`string.index(10)`会返回第 11 个字符。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-07T10:06:20.070

字符串就像列表。所以你可以用同样的方式访问它们，

```
>>> a = "fkjdlfjzgjkdsheiwqueqpwnvkasdakpp"
>>> print a[10]
k 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-07T10:04:33.340

字符串是可迭代和可索引的（因为它是一个[序列类型](http://docs.python.org/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)），所以你可以使用：

```
"fkjdlfjzgjkdsheiwqueqpwnvkasdakpp"[10] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-10T06:39:34.787

**要获取`nth`值中的对应字符，只需使用此函数：**

```
def getchar(string, n):
    return str(string)[n - 1] 
```

**示例用法：**

```
>>> getchar('Hello World', 5)
'o' 
```

# jquery - jQuery Tools - 你如何独立使用历史插件？

> ID：11843527
> 
> 赞同：0
> 
> 时间：2012-08-07T10:01:23.223
> 
> 标签：jquery, jquery-tools

在 jQuery Tools 演示和文档中，历史插件通常带有选项卡。

我查看了文档，似乎没有独立使用的示例。

关于如何使用它的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:12:22.637

您可以深入了解[**jQuery hashchange**](https://github.com/cowboy/jquery-hashchange)插件；它是一个历史插件，当哈希 ( `#`) 之后的部分发生变化时起作用。这样，您可以完全根据您的需要自定义它（不使用选项卡）。

# regex - 如何找到接受序列的最短的 reg exp？

> ID：11843531
> 
> 赞同：0
> 
> 时间：2012-08-07T10:01:35.653
> 
> 标签：regex, sequence

我正在寻找一种方法来找到接受序列的最小可能正则表达式。

为了让它变得有趣，我不想要任何星星（Kleene 星星），最好不要通配符？

例如，序列：'aaaaaaaa' 将被 'a^8' 接受，而 a^8 将是接受序列的最短表达式。

有谁知道如何生成这样的表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:11:49.587

随着字符串的增长，您所追求的搜索空间很可能会呈指数增长，因为通常有大量的规则模式可以匹配给定的字符串。

我认为在您的情况下，您可以尝试使用一些[启发式搜索](http://en.wikipedia.org/wiki/Heuristic)来尝试近似甚至设法找到最佳解决方案。我不认为有一个简单的解决方案（尽管这只是我的观点）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T10:13:57.443

鉴于正则表达式和确定性有限自动机是等价的，您可以使用任何[用于最小化 DFA 的算法来最小](http://en.wikipedia.org/wiki/DFA_minimization)化给定的正则表达式。当然，您仍然需要想出一个正则表达式来开始，但如果您只需要它接受一个字符串，那么该字符串的字符就是状态。然后，您可以最小化该 DFA 并将其转换为正则表达式。

# html - 上边距也会拉下父级

> ID：11843532
> 
> 赞同：0
> 
> 时间：2012-08-07T10:01:39.403
> 
> 标签：html, css

```
<!doctype html>
<html>
<head>
    <title></title>
</head>
<body>
    <nav><ul class='container'>
        <li><a href='#'>Home</a></li>
        <li><a href='#'>Categories</a></li>
        <li><a href='#'>How to Play</a></li>
        <li><a href='#'>Contact</a></li>
    </ul></nav>
    <article id="showcase">
        <h1>Hello</h1>
    </article>
</body>
</html>​ 
```

[http://jsfiddle.net/hjYzs/](http://jsfiddle.net/hjYzs/)

怎么了？`<h1>`的利润似乎`article`也在拉低其父级。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:03:47.697

Hey now give to `#showcase overflow:hidden` in your css

```
#showcase{
overflow:hidden;
} 
```

**[Live demo](http://jsfiddle.net/hjYzs/1/)**

this is the Collapsing Margins and **[more info](http://reference.sitepoint.com/css/collapsingmargins)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:05:28.840

[http://jsfiddle.net/hjYzs/2/](http://jsfiddle.net/hjYzs/2/)

```
h1 {
    font-size: 2em;
    margin: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T10:09:05.303

这里没有错，这是正常行为。边距是要崩溃的——它是规范的一部分。

我相信这个想法是相邻元素的顶部和底部边距永远不应该加在一起，最大的边距是显示的边距。

我通常采取的步骤：

1.  删除默认上边距
2.  尽可能在边距上使用填充。
3.  我还经常为元素添加 1px 的填充以包含顶部和底部边距 - 特别是如果父级具有不同的背景颜色。

希望对未来有所帮助:)

# jsp - Joomla 2.5 自定义身份验证插件通过外部 jsp 网站进行身份验证

> ID：11843535
> 
> 赞同：2
> 
> 时间：2012-08-07T10:01:45.267
> 
> 标签：jsp, authentication, soap, joomla, joomla-extensions

我有一个 Joomla 网站和一个 Java/jsp 网站。我正在尝试为 Joomla 创建一个自定义身份验证插件，以从我的 jsp 应用程序中获取身份验证详细信息。

`onUserAuthenticate()`所以作为第一次尝试，我在默认的 joomla 身份验证插件类中编辑了我的函数。

```
function onUserAuthenticate($credentials, $options, &$response)
{
    $response->type = 'joomla';
    // Joomla does not like blank passwords
    if (empty($credentials['password'])) {
        $response->status = JAuthentication::STATUS_FAILURE;
        $response->error_message = JText::_('JGLOBAL_AUTH_EMPTY_PASS_NOT_ALLOWED');
        return false;
    }else{
        $response->status = JAuthentication::STATUS_SUCCESS;
        return true;
    }
} 
```

正如我猜想的那样，它应该适用于任何凭据，但它不是......
我已经有一个用户被调用`admin`，并且登录现在正在使用 username 的任何密码`admin`。但这不是我所期望的。我需要使用`anything`用户名和`anything`密码登录。

作为第一次尝试，我需要完全停止访问默认的 joomla 数据库以获取凭据。但身份验证脚本仍在寻找本地数据库。请帮我解决这个问题。
如果你能提出一个与jsp网站沟通的好方法，也很感激。

我将尝试使用 SOAP，如下所示：

```
 $credentials = array(
      'memberNumber' => $credentials['username'],
      'password'     => $credentials['password']
      );
   $client = new SoapClient('http://example.com/soap.wsdl', $credentials); 
```

这是从我的 jsp 应用程序中获取反馈的最佳方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T17:02:20.373

访问数据库的不是 joomla 身份验证插件（在您编辑之后）。如果您查看/plugins/user/joomla/joomla.php，您会发现在onUserAuthenticate() 之后触发的onUserLogin() 方法。这是创建用户会话并填充 JUser 对象实例的一种。

即使您强制成功登录用户仍将被视为访客，因此您也需要破解 onUserLogin() 。你的 SOAP 尝试对我来说看起来不错

# asp.net-mvc - 是否可以在经典 ASP 页面中包含 ASP MVC 视图？

> ID：11843538
> 
> 赞同：1
> 
> 时间：2012-08-07T10:01:55.720
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp-classic

我们正在用 ASP MVC 站点替换经典 ASP 站点。目前，它作为两者的混合体运行。

我想减少我们开始看到的重复数量。是否可以获取 asp mvc 视图的结果并将其直接嵌入到经典的 asp 页面中？需要明确的是，我不想使用 IFrame，mvc 视图的结果应该成为呈现的 html 的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:39:06.367

也许是阿贾克斯？

我会使用 Ajax 的 jQuery 实现，如下所示：

html:

```
<div id="ASPNET_DATA_HERE"></div> 
```

jQuery：

```
$('#ASPNET_DATA_HERE').load('http://AspNetHost.com/TheNewMvcWebsite'); 
```

这可能不适合您的需求，但由于您提供的信息有限，这就是我所能想到的。如果您提供更多信息，我会更新这篇文章。

# wpf - 从 UserControl 的 Parent 调用 UserControl 的 listview 的按钮单击事件

> ID：11843540
> 
> 赞同：0
> 
> 时间：2012-08-07T10:01:56.950
> 
> 标签：wpf, listview, user-controls, wpf-controls

我有三个用户控件。

**用户控制 1**

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:Gramercy"
    mc:Ignorable="d"
    x:Class="wpfapplication.UCManageQALibrary"
    x:Name="UserControl"
    d:DesignWidth="774" d:DesignHeight="529.723">

    <Grid x:Name="LayoutRoot">
        <Grid>
            <Button Content="List QA" x:Name="btnSearchQAStructure" Click="Button_Click_1" />
            <Button Content="Add New QA" x:Name="btnAddNewQAStructure"  Click="Button_Click" /> 

            <local:UCSearchQALibrary x:Name="searchQALibrary" Visibility="Visible"/>
                    <local:AddNewQA x:Name="addQALibrary" Visibility="Hidden"/>         

        </Grid>
    </Grid>
</UserControl> 
```

**用户控制 2**

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006
    mc:Ignorable="d"
    x:Class="wpfapplication.AddNewQA"
    x:Name="UserControl"
    d:DesignWidth="1280" d:DesignHeight="1024">

    <Grid x:Name="LayoutRoot">
        <Grid>
        <Label x:name="Label1" Content="" />

        </Grid>
    </Grid>
</UserControl> 
```

和**用户控制 3**

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    x:Class="wpfapplication.UCSearchQALibrary"
    x:Name="UserControl"
    d:DesignWidth="758" d:DesignHeight="486.905">

    <Grid x:Name="LayoutRoot" >
        <GroupBox Header="Question and Answer Master Library" >                     
        <Grid Margin="8">
            <WrapPanel Margin="4,0,0,0" VerticalAlignment="Stretch">

            <ListView Margin="4,10,0,10" x:Name="lvQA"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto" AlternationCount="2" VerticalAlignment="Stretch" Height="420">
                            <ListView.View>
                                <GridView>
                                    <GridViewColumn >
                                        <GridViewColumn.HeaderTemplate>
                                            <DataTemplate>
                                                <Label Content="Q &amp; A Search Result : " FontSize="12" FontWeight="Bold" Margin="0,4,0,4"/>
                                            </DataTemplate>                                            
                                        </GridViewColumn.HeaderTemplate>
                                        <GridViewColumn.CellTemplate>
                                            <DataTemplate>
                                                <StackPanel>
                                                    <Button Content="{Binding  Path=QuestionText}" Margin="4,10,8,4" Style="{StaticResource HyperlinkLikeButton}" VerticalAlignment="Top" Click="Button_Click" CommandParameter="{Binding Path=QuestionID}" />
                                                    <TextBlock TextWrapping="Wrap" Margin="4,0,4,4" HorizontalAlignment="Stretch"><Run Text="{Binding Path=AnswerText}"/></TextBlock>
                                                </StackPanel>
                                            </DataTemplate>
                                        </GridViewColumn.CellTemplate>
                                    </GridViewColumn>
                                </GridView>
                            </ListView.View>                            
                        </ListView>
                    </WrapPanel>
        </Grid>
        </GroupBox>
    </Grid>
</UserControl> 
```

用户控件 2 用于添加新的问题答案，用户控件 3 用于提供已创建问题答案的列表。用户控件 1 具有用户控件 2 和 3。一次用户控件 2 或 3 是可见的。在用户控件 1 中，单击列表 QA 按钮时，用户控件 3 可见，而用户控件 2 不可见。单击添加新 QA 按钮时，用户控件 2 可见，用户控件 3 不可见。

现在，在用户控件 3 中，我有一个与列表视图的每一行关联的按钮。在点击/单击该按钮时，我需要一个功能来使用户控件 2 可见并将用户控件 2 内的标签与特定内容绑定。

我曾尝试过路由事件。

在用户控件 3 中，我添加了...

```
 public static readonly RoutedEvent AddClickEvent = EventManager.RegisterRoutedEvent("AddClick", RoutingStrategy.Direct, typeof(RoutedEventHandler), typeof(Button));

        public event RoutedEventHandler AddClick
        {
            add { AddHandler(AddClickEvent, value); }
            remove { RemoveHandler(AddClickEvent, value); }
        }

        void RaiseAddClickEvent()
        {
            RoutedEventArgs newEventArgs = new RoutedEventArgs(UCSearchQALibrary.AddClickEvent);
        }
        private void Button_Click(object sender, System.Windows.RoutedEventArgs e)
        {
            // TODO: Add event handler implementation here.
            //Thread newWindowThread = new Thread(new ThreadStart(ThreadStartingPoint));
            //newWindowThread.SetApartmentState(ApartmentState.STA);
            //newWindowThread.IsBackground = true;
            //newWindowThread.Start();    
            RaiseEvent(new RoutedEventArgs(AddClickEvent));
        } 
```

在用户控件 1 中，我添加了...

```
local:UCSearchQALibrary.AddClick="dCB_Props_AddClick"

private void dCB_Props_AddClick(object sender, System.Windows.RoutedEventArgs e)
{
     MessageBox.Show("This Works");
} 
```

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:45:52.270

您可以创建一个路由到 usercontrol1 的事件。但更好的方法是创建一个视图模型（您也可以为所有 3 个用户控件使用一个）。

因此，您在 Viewmodel 中创建了 2 个属性，类型为 Visibility，并将 usercontrol1 和 2 绑定到它们。（绑定在 usercontrol1 中）。

# c# - C# 连接到 postgres 数据库

> ID：11843547
> 
> 赞同：4
> 
> 时间：2012-08-07T10:02:14.723
> 
> 标签：c#, database, postgresql

这是我第一次连接数据库，但我遇到了一些问题

```
using Npgsql;

namespace DBPrj
 {
class Program
{
    static void Main(string[] args)
    {
        bool boolfound=false;
        NpgsqlConnection conn = new NpgsqlConnection("Server=<ip>; Port=5432; User Id=Admin; Password=postgres.1; Database=Test1"); //<ip> is an actual ip address
        conn.Open();

        NpgsqlCommand cmd = new NpgsqlCommand();
        NpgsqlDataReader dr= cmd.ExecuteReader(); //I get InvalidOperationException : The connection is not open.
        if (dr.Read())
        {
            boolfound=true;
            Console.WriteLine("connection established");
        }
        if(boolfound==false)
        {
            Console.WriteLine("Data does not exist");
        }
        dr.Close();
        conn.Close();

    }
} 
```

}

可能是什么问题呢？NpgsqlConnection 字符串是否正确写入？可以保护数据库免受远程访问吗？

我该如何解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T10:31:46.187

您永远不会将您分配给您`NpgsqlConnection`，`NpgsqlCommand`并且您不提供要为您执行的查询`NpgsqlDataReader`，修复应该可以解决直接问题。

此外，至少将您`NpgsqlConnection`的`using()`-statement 包装起来是一个好主意，以确保连接始终关闭，即使出现异常也是如此。

```
using Npgsql;

namespace DBPrj
{
    class Program
    {
        static void Main(string[] args)
        {
            bool boolfound=false;
            using(NpgsqlConnection conn = new NpgsqlConnection("Server=<ip>; Port=5432; User Id=Admin; Password=postgres.1; Database=Test1"))
            {
                conn.Open();

                NpgsqlCommand cmd = new NpgsqlCommand("SELECT * FROM Table1", conn);
                NpgsqlDataReader dr= cmd.ExecuteReader();
                if (dr.Read())
                {
                    boolfound=true;
                    Console.WriteLine("connection established");
                }
                if(boolfound==false)
                {
                    Console.WriteLine("Data does not exist");
                }
                dr.Close();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:14:32.740

在您的连接字符串中，您可能在数据库末尾缺少一个分号。

```
Database=Test1" 
```

可能需要；

```
Database=Test1;" 
```

此外 - 可能值得将您的 conn.open() 包装在 try catch 语句中，以方便用户使用并易于捕获错误。

编辑1：

只是做了一点阅读。NpgsqlCommand 是否需要将参数传递给它？只是在伪代码中，例如；

```
NpgsqlCommand cmd = new NpgsqlCommand(query, conn); 
```

# c# - 比较两个日期并在 c# 中获取天数

> ID：11843548
> 
> 赞同：6
> 
> 时间：2012-08-07T10:02:17.173
> 
> 标签：c#

通过比较两个日期来计算天数，当您想比较两个日期（例如图书馆中图书的到期日期和归还日期）时，您可以通过这种方式获得天数

```
 int TotalDay;
        DateTime due = OldDate;

        int day = due.Day;
        int nday = DateTime.Now.Day;
        int mnt = due.Month;
        int nmnt = DateTime.Now.Month;
        int yr = due.Year;
        int nyr = DateTime.Now.Year;
        if (nyr <= yr)
        {
            if (nmnt <= mnt)
            {
                if (nday > day)
                {
                    TotalDay = nday - day;
                }
            }
            else
            {
                TotalDay = nday - day;
                m = nmnt - mnt;
                TotalDay = d + (m * 30);
            }
        }
        else
        {
            TotalDay = nday - day;
            m = nmnt - mnt;
            TotalDay  = d + (m * 30);
            int y = nyr - yr;
            TotalDay  = d + (y * 365);
        } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-07T10:03:07.187

使用[时间跨度](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)

```
TimeSpan ts = dateTime1 - dateTime2; 
```

`ts.TotalDays`会给你天数的差异。

在您的情况下`due`是截止日期，并且`DateTime.Now`是当前日期。您可以使用：

```
TimeSpan ts = DateTime.Now - due; 
```

或使用[`TimeSpan.TotalDays`](http://msdn.microsoft.com/en-us/library/system.timespan.totaldays.aspx)属性：

```
TimeSpan ts = DateTime.Now.Subtract(due);

double NumberOfDays = ts.TotalDays; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T10:12:39.587

您*可以*按照其他答案所示使用`TimeSpan`- 但您需要注意一天中的时间。您实际上是在尝试将这些视为*日期*还是带有时间的日期？时区呢？您是否对两者都使用“本地”`DateTime`值？

虽然`DateTime`可以处理所有这些，但它让事情变得不清楚。我个人会使用[Noda Time](http://noda-time.googlecode.com)（这不应该让任何人感到惊讶，因为它是我自己的图书馆......）

```
LocalDate startDate = ...;
LocalDate endDate = ...;

long days = Period.Between(startDate, endDate, PeriodUnits.Days).Days; 
```

请注意，查找“今天的日期”也需要知道适当的时区。（`DateTime.Now`并`DateTime.Today`假设您的代码正在运行的系统时区，但这可能是也可能不是您想要的。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T10:05:15.550

You need `TimeSpan`

```
Timespan t = ReturnDateTime - DateTime.Now; 
```

Then use

```
t.Days 
```

for calculating how many days are left.

# c# - 在某些情况下未调用 IValueConverter

> ID：11843551
> 
> 赞同：1
> 
> 时间：2012-08-07T10:02:23.873
> 
> 标签：c#, windows-phone-7, xaml, ivalueconverter

我正在使用从 Web 服务中获取的文本集合，这些文本应该用于各种控件。

在我看来，最简单和最动态的方法是使用 an`IValueConverter`来获取给定的文本，如下所示：

```
public class StaticTextConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (parameter != null && parameter is string)
        {
            return App.StaticTexts.Items.SingleOrDefault(t => t.Name.Equals(parameter)).Content;
        }

        return null;
    }
} 
```

然后在 XAML 中，我将文本 ('Name') 的 ID 提供给转换器：

```
<phone:PhoneApplicationPage.Resources>
    <Helpers:StaticTextConverter x:Name="TextConverter" />
</phone:PhoneApplicationPage.Resources>

<TextBlock Text="{Binding Converter={StaticResource TextConverter}, ConverterParameter=M62}" /> 
```

然后要更改某些控件的文本，所要做的就是更改参数中的 ID 或从某个 Web 界面更改文本本身。

## 我的问题是

值转换器仅在已设置的某种`DataTemplate`上下文中被调用，就好像该属性仅在那里工作一样。`ItemSource``Binding`

每当我在其他任何地方使用此方法时，都不会调用值转换器。

有谁知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:46:02.527

为您的文本块设置`DataContext="object"`转换器不起作用并且将调用值转换器。

此解决方法将在您的场景中发挥作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T13:18:12.880

添加绑定源

使用类似的东西

```
Text="{Binding  Converter={StaticResource LocalizedStringsConventer} ,ConverterParameter=Wrong, Source=NULL}" 
```

# c# - 如何使用 C# 桌面应用程序创建 HTML 文件

> ID：11843552
> 
> 赞同：1
> 
> 时间：2012-08-07T10:02:24.873
> 
> 标签：c#, html, winforms

我想从数据库记录中创建一个 HTML 文件..

我正在开发桌面应用程序。如何创建这样的文件？

我在网上试了一下，发现`XMLwriter`可以用。

但是我没有经验`XMLWRITER`。谁能帮我？

# sql-server - 禁用 SSMS 连接到服务器按钮

> ID：11843561
> 
> 赞同：0
> 
> 时间：2012-08-07T10:03:11.620
> 
> 标签：sql-server, visual-studio-2010

如何禁用 SSMS 的连接按钮？我需要防止用户创建额外的未经授权的连接。

[http://img341.imageshack.us/img341/6959/25398783.png](http://img341.imageshack.us/img341/6959/25398783.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:05:46.000

You can't.

You need to rethink your security policy. Don't give unauthorized users the password. Restrict actions that can be performed on the database using permissions, stored procedures, etc.

# html - html混淆真的是一种有效的反黑客机制吗？

> ID：11843568
> 
> 赞同：2
> 
> 时间：2012-08-07T10:03:30.587
> 
> 标签：html, forms, obfuscation, malware

说到html表单，html混淆真的有用吗？

SO上的一些帖子说这真的是浪费时间，因为有才华的“黑客”总能找到访问表单字段的方法（例如将标签与输入相关联）。

是否有人实施了混淆并实际遭受了攻击？

我想听听你对这个话题的看法。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:11:09.967

您无需成为“天才黑客”即可查看未经混淆的 HTML 源代码。知道如何安装浏览器（例如 Chrome）和使用代码检查器就足够了。在任何情况下，代码检查器都会呈现一个漂亮的格式化 HTML——因为它读取的是 DOM，而不是一些损坏的原始文本。

HTML 混淆是我看不到任何好处的障碍。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T10:10:53.717

混淆不能阻止任何黑客攻击，最好是减慢进程。

尤其是表单 - 攻击者只需查看他的网络控制台，检查您的请求，然后相应地伪造他自己的请求。

唯一真正安全的方法是检查服务器端的每个传入请求，因为您的服务器（希望）不会受到损害。

因此，混淆 HTML 只是证明作者“是个菜鸟”信任这种方法。

# android - details of signal bar in android

> ID：11843570
> 
> 赞同：0
> 
> 时间：2012-08-07T10:03:42.843
> 
> 标签：android

In android emulators' **GSM** signal bar has four division. May i know how much of signal is denoted by each division. In android signal level is between 0-31\. What is the criteria for filling all divisions in signal bar. I already simulates signal level in my program, but it has 5 divisions.

thanks

![enter image description here](../Images/e20734656bfb24b2212cf4747fe69576.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:54:17.893

信号强度值介于 0 和 31 之间：http: [//developer.android.com/reference/android/telephony/NeighboringCellInfo.html#getRssi%28%29](http://developer.android.com/reference/android/telephony/NeighboringCellInfo.html#getRssi%28%29)

如果您的设置/关于为您提供 15，那么您的应用程序是正确的，并且模拟器的状态栏只是滞后。

Android的模拟器远非完美^^

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T10:19:01.957

我假设将信号电平除以分区数应该会给你一个每个分区的信号电平。例如：31/5。

# java - Working with EnumSet

> ID：11843573
> 
> 赞同：0
> 
> 时间：2012-08-07T10:03:50.760
> 
> 标签：java

This code works, but with a `try/catch box` .

```
public enum AccentuationUTF8 {/** */
        é, /** */è, /** */ç, /** */à, /** */ù, /** */
        ä, /** */ë, /** */ö, /** */ï, /** */ü, /** */
        â, /** */ê, /** */î, /** */ô, /** */û, /** */
}
......

    final EnumSet<AccentuationUTF8> esUtf8 = EnumSet.noneOf(AccentuationUTF8.class);
    final String[] acc1 = {"é", "à", "u"};
    for (final String string : acc1) {
        try { // The ontologic problem
            esUtf8.add(AccentuationUTF8.valueOf(string));
        } catch (final Exception e) {
            System.out.println(string + " not an accent.");
        }
    }
    System.out.println(esUtf8.size() + "\t" + esUtf8.toString() 
```

output :

```
u   not an accent.
2   [é, à] 
```

I want to generate an EnumSet with all accents of a word or of sentence.

*Edit after comments*

*   Is it possible to manage such an `EnumSet` without using `try` (needed by `AccentuationUTF8.valueOf(string)`?
*   Is better way to code ?

**FINAL EDIT**

Your responses suggest me a good solution : because `EnumSet.contains(Object)`, `throw an Exception`, change it : create a temporary `HashSet` able to return a `null` without Exception.

So the *ugly* `try/catch` is now removed, code is now :

```
final Set<String> setTmp = new HashSet<>(AccentsUTF8.values().length);
for (final AccentsUTF8 object : AccentsUTF8.values()) {
    setTmp.add(object.toString());
}
final EnumSet<AccentsUTF8> esUtf8 = EnumSet.noneOf(AccentsUTF8.class);
final String[] acc1 = {"é", "à", "u"};
for (final String string : acc1) {
    if (setTmp.contains(string)) {
        esUtf8.add(AccentsUTF8.valueOf(string));
    } else {
        System.out.println(string + " not an accent.");
    }
}
System.out.println(esUtf8.size() + "\t" + esUtf8.toString() 
```

Thanks for attention you paid for.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:08:00.773

我不认为枚举是这里最好的方法——部分原因是它只适用于有效的 Java 标识符。

看起来您真正想要的只是一个`Set<Character>`，类似于：

```
Set<Character> accentsInText = new HashSet<Character>();
for (int i = 0; i < text.length(); i++) {
    Character c = text.charAt(i);
    if (ALL_ACCENTS.contains(c)) {
        accentsInText.add(c);
    }
} 
```

# php - 使用 IP 地址浏览网站时 PHP 会话是否可能过期？

> ID：11843575
> 
> 赞同：3
> 
> 时间：2012-08-07T10:03:54.853
> 
> 标签：php, session, session-cookies, opayo

我最近遇到的一个意外问题是我在我的一个站点上配置了 Sagepay 支付网关，并且它运行得非常顺利。但是当我将整个站点移动到另一台服务器时，我不得不使用它的 IP 地址测试该站点：

> [http://xxx.xxx.xxx.xxx/mywebsite/](http://xxx.xxx.xxx.xxx/mywebsite/)

现在当我们通过Sagepay支付网关在现场完成在线支付时，

1.  它返回到站点
2.  从 Session 中获取客户详细信息
3.  向客户发送电子邮件

所以现在（在第三步中），当它从会话中获取客户电子邮件时，它没有得到任何价值。我试图转储`$_SESSION`数组，它是空白的。

所以我的问题是：会话是否可能在通过 IP 地址浏览网站时过期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:07:38.890

是的...如果会话在限制范围内，可以定期清除...阅读此处...还提供有关如何修改设置以满足您的需要的提示：http: [//php.net/manual/en/ function.session-cache-expire.php](http://php.net/manual/en/function.session-cache-expire.php)它详细说明了 PHP 如何清理最有可能发生的会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:15:23.950

如果您使用不同的域（或服务器 IP 地址）来访问服务器，会话可能会过期，因为会话 cookie ( `PHPSESSID`) 可能会将域属性绑定到域（相关：[`setcookie()`](http://php.net/manual/en/function.setcookie.php)、[RFC 2109](http://www.ietf.org/rfc/rfc2109.txt)、[`session_set_cookie_params()`](http://php.net/manual/en/function.session-set-cookie-params.php)函数）。

为了防止会话过期，您可能希望采用另一种方法，实现一种方法，如果您从另一个域/IP 访问该站点，您仍然可以登录并“附加到”您之前的会话。[这个问题和答案](https://stackoverflow.com/a/477578/1428773)可能是一个很好的阅读，因为它描述了各种身份验证方法、要求和陷阱。

# php - Force multiple file download with PHP

> ID：11843581
> 
> 赞同：0
> 
> 时间：2012-08-07T10:04:26.420
> 
> 标签：php, mysql, download

I am trying to write a little script to backup all my localhost databases at once in seperate files. Currently my script does the backup part but does the download in one file. (So i get something like 30MB information_schema_backup.sql ) What i want is db_name_backup.sql for each database. Here is my code.

```
<?

    function backup_dbs()
    {
        global $db_name;
        global $dosyaadi; //dosyaadi means filename.
        $return='';

        /*
            Backup Part Here;
            I can share if anyone needs.
            I will post this on my blog anyway.
        */

        //save file
        $dosyaadi=$db_name.'-backup-'.time().'.sql';
        header("Content-type: application/octet-stream");
        header("Content-disposition: attachment;filename=$dosyaadi");
        echo $return;
    }

        $db_host = 'localhost';
        $db_user = 'root';
        $db_pass = '';

        $db = mysql_connect($db_host, $db_user, $db_pass);

        mysql_query("SET NAMES 'utf8'", $db);
        mysql_query("SET CHARACTER SET utf8", $db); 
        mysql_query("SET COLLATION_CONNECTION = 'utf8_general_ci'", $db); 

        $res = mysql_query("SHOW DATABASES");

        while ($row = mysql_fetch_assoc($res)) {
            $db_name =  $row['Database'];
            mysql_select_db($db_name, $db);
            backup_dbs();
        }
    die();
?> 
```

Thanks in advance.

# android - SQL 按列排序，0 为异常

> ID：11843582
> 
> 赞同：1
> 
> 时间：2012-08-07T10:04:32.693
> 
> 标签：android, sql, sqlite

我有专栏：

```
CAT  | Val
------------
none | 0
high | 5
low  | 100
med  | 50 
```

如您所见，数字越低，类别越高。（逆逻辑）除了 0..

所以我想订购，以便我得到正确的类别顺序。（无、低、中、高）。

**我希望它们按顺序排列：**

```
CAT  | Val
------------
none | 0
low  | 100
med  | 50
high | 5 
```

我试过这个，但它工会，然后命令。每个选择周围的括号会导致错误。

```
SELECT cat,  an_int FROM CATS WHERE an_int = 0
UNION
SELECT cat, an_int FROM CATS WHERE an_int <> 0 ORDER BY an_int DESC 
```

这给出了：

```
CAT  | Val
------------
low  | 100
med  | 50
high | 5
none | 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:17:35.887

试试这个：

```
select * from CATS 
order by case when cat='none' then 0 else 1 end ,Val desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:15:04.960

使用另一个元素按如下方式排序：

```
SELECT codepro,  nr_cpl, 1 as c FROM reservoirs WHERE nr_cpl = 0 
UNION
SELECT codepro,  nr_cpl, 2 as c FROM reservoirs WHERE nr_cpl <> 0
          order by c asc, nr_cpl desc 
```

它应该可以解决问题。

# objective-c - FBConnect: Error "SBJSON.h" file not found

> ID：11843584
> 
> 赞同：2
> 
> 时间：2012-08-07T10:04:33.577
> 
> 标签：objective-c, ios, xcode, facebook, fbconnect

I try to add facebook sdk for my app,but has a error "SBJSON.h" file not found.

Target Dependencies,Link Binary with libearies and header search paths has add, I don't know what happend with it, please give me some advice,thank you very much.

![enter image description here](../Images/e152e11f7c16680369e5aa5024a4e01b.png)

![enter image description here](../Images/f834cba6e8a705f1aecdb1aff07aad61.png)

![enter image description here](../Images/d039ae1dbc9e25b1eb9c42698a646846.png)

![enter image description here](../Images/f8ca30b7f878a6593e5b18a3082cee97.png) header search paths: /Users/alice/Desktop/FBConnect/FBConnect/src

# tomcat - j_security authentication using cURL

> ID：11843585
> 
> 赞同：0
> 
> 时间：2012-08-07T10:04:33.800
> 
> 标签：tomcat, curl, forms-authentication, jdbcrealm

I'm using Tomcat JDBCRealm to authenticated users when they follow a protected page. The authentication works properly when reaching a protected page. Now I'd like to automate this process using cURL. I've written the code below but it doesn't work :

```
$domainUrl = "http://mydomain.com/protectedArea?j_username=john&j_password=doe";
$ch = curl_init ();
curl_setopt ( $ch, CURLOPT_URL, $domainUrl );
//curl_setopt ( $ch, CURLOPT_POST, true );
//curl_setopt ( $ch, CURLOPT_POSTFIELDS, $post );
curl_setopt ( $ch, CURLOPT_RETURNTRANSFER, 1 );
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
curl_setopt($ch, CURLOPT_FRESH_CONNECT, true); 
curl_setopt ( $ch, CURLOPT_TIMEOUT, 7 );

$output = curl_exec ( $ch );
curl_close ( $ch ); 
```

In tomcat log we can see only http GET :

```
[07/Aug/2012:11:51:24 +0200] GET http://mydomain.com/protectedArea?j_username=john&j_password=doe HTTP/1.1 200 1618 
```

whereas we should have something like that :

```
[07/Aug/2012:11:57:06 +0200] GET http://mydomain.com/protectedArea?j_username=john&j_password=doe HTTP/1.1 200 1516
[07/Aug/2012:11:57:06 +0200] POST http://mydomain.com/j_security_check HTTP/1.1 302 - 
```

Does someone have any idea?

Thanks for your help

Regards

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:12:03.807

看起来您只有一个`curl_exec`调用...您是否期​​望一个调用会导致对服务器的两个单独请求？您必须执行以下操作才能将基于表单的登录脚本编写到符合规范的服务器：

1.  向受保护的资源发出请求。任何人都会做。
2.  发出请求`j_security_check`并包含`j_username`和`j_password`请求参数。`POST`避免 Web 服务器记录凭据是一个好主意。如果认证成功，你应该得到#1中最初请求的资源。
3.  向您真正想要访问的受保护资源发出请求。

# .htaccess - mod_rewrite / .htaccess - 域名在 URL 中显示两次

> ID：11843587
> 
> 赞同：2
> 
> 时间：2012-08-07T10:04:46.743
> 
> 标签：.htaccess, mod-rewrite

我有一个“插件域”，没有指定的 htaccess 文件，但主站点（其中的 add on site 是一个子目录）确实有 htaccess，它重写 url 以删除 .html 前缀。

无论如何，当我进入插件域时：test.com/about.html 它会自动更改为 test.com/test.com/about.html

谁能指出我纠正这个问题的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:15:45.017

如果目录中没有带有 modRewrite 的 htaccess 文件，则 apache 会向上父目录搜索它，并沿着树向上（这不受是否有插件域的影响）。这意味着您的插件域受到父域的 htaccess 文件的影响。

您需要做的是在子目录（插件域）中创建一个 htaccess 文件并停用重写：

```
RewriteEngine Off 
```

或者，您可以根据需要添加自己的 RewriteRules。

# windows - 以编程方式更改 Windows 系统时间过于频繁的缺点

> ID：11843595
> 
> 赞同：0
> 
> 时间：2012-08-07T10:05:26.003
> 
> 标签：windows, datetime, automation, operating-system, system-clock

我有一个模拟器应用程序，它将一些加密数据写入文本文件。它写入的信息还带有我看不到的时间戳（应用程序从系统时间中选择）。我已经自动化了从应用程序向文本文件发送随机数据的整个任务，但我希望记录必须以一定的时间间隔写入。
为此，我可以在我的自动化脚本中设置延迟，也可以在每次插入新记录时更改系统时间。
如果我采用第二种方法，即我以编程方式非常频繁地更改系统时间（大约每秒一次），它会对我运行此应用程序的 Windows 系统造成任何有害影响吗？任何其他关键系统进程会受到它的影响吗？这种方法是否可取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:15:00.640

这里最好的选择就是延迟自动化脚本。我想不出每秒更改系统时钟会引起任何问题，但最好让 CMOS 处理并随时同步，而不是将其设置为每秒更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:09:20.903

更改系统时间需要管理权限，因此您的应用程序的用户将无法以普通用户身份运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T12:39:15.637

更改系统时间可能会解决您的问题，但同时它可能会对共享同一系统的其他依赖于时间的应用程序产生不利影响。例如，自动防病毒签名更新是时间相关的，并且可能会受到显式更改系统时间的影响，或者可能会在不适当的时间触发针对夏令时的自动系统时间调整。牢记这个问题，最好的办法是确保您的应用程序在隔离环境中运行，即确保其他时间相关的应用程序不存在于同一系统中，并确保自动更新保持关闭。

# c++ - Qt：通过类 C 将变量从 ClassA 传递到 ClassB

> ID：11843597
> 
> 赞同：0
> 
> 时间：2012-08-07T10:05:28.603
> 
> 标签：c++, qt, share, qsettings

我有以下布局：

```
MainWindow  <--------- Settings
    \
     \
      V
   PerformOps 
```

MainWindow 接收从 Settings 传递的变量，并将它们传递给 PerformOps。如果未使用 Settings 类，则 MainWindow 将默认值传递给 PerformOps。

目前我做：

```
class Settings{

public: 
   Settings(*parent);
   var1, var2, var3
   .
   .
   void exec();
}

class PerformOps{

public: 
   PerformOps();
   var1, var2, var3;
   .
   .
   void start();
}

class MainWindow{

private:
  Settings *set;    //share pointers over all methods
  PerformOps *op;

  bool settings_not_clicked = false;

  void saveChanges()
  {
     QSettings settings("my","app");
     settings.setValue("value1", op->var1);
     settings.setValue("value2", op->var2);
     settings.setValue("value3", op->var3);
  }

  void loadChanges()
  {
     QSettings settings("my","app");
     op->var1 = settings.value("value1");
     op->var2 = settings.value("value2");
     op->var3 = settings.value("value3");

  }

  void closeEvent(QCloseEvent *event)
  {
       event->ignore();
       saveChanges();
       event->accept();
  }

  void takeDataAndDoStuff()   //This is always called
  {
     op = new PerformOps;

     if(settings_not_clicked) {
        loadChanges()
     }
     else {
         op->var1 = 33;
         op->var2 = "Geronimo!";
         op->var3 = true;              
     }

     op->start();
  }

  void getStuff_maybe_if_clicked()   //This might not be always called
  {
     Settings *set = new Settings(this);
     set->exec()      //Pause parent, run Settings

     settings_not_clicked = false;
  } 
```

`op->var1 = set->var1;`问题：考虑到`set`指针可能并不总是被初始化，是否有一种更简洁的方法来跨类共享数据而不使用 : 的脏方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:16:41.973

好吧，方法本身并没有那么糟糕，但是您可以改进一些事情。

首先，如果我对您的理解正确，您希望传递设置（如果存在），如果不存在则传递默认值。在这种情况下，您可以使用构造函数：

```
class PerformOps
{
public:
    PerformOps( int v1 = 33, string v2 = "Geronimo!", bool v3 = true ): var1(v1), var2(v2), var3(v3)
    {
    }
    <...>
} 
```

现在，如果您调用构造函数 as `PerformOps()`，将设置默认值。如果您调用它并提供一些值，它将使用它们：

```
<...>
PerformOps *op;

if(settings_not_clicked) {
    op = new PerformOps( set->var1, set->var2, set->var3 );
}
else {
    op = new PerformOps();              
}
 <...> 
```

当然，如果您不想通过 cunstructor 执行此操作，您可以只创建一个函数并像“setData()”一样调用它，并使用与默认函数参数相同的技术。

* * *

现在，至于指针。*总是*用 初始化指针是个好主意`NULL`，或者`nullptr`如果你有 c++0x。此外，当您删除内存时，将指针分配给`NULL`或`nullptr`再次。这样，您将能够通过简单的检查始终查看指针是否有效。

```
someClass * ptr = nullptr;
<...>
ptr = new someClass();
<...>
delete ptr;
ptr = nullptr; 
```

* * *

**UPD**

我建议你摆脱你的`Settings`班级，直接使用 QSettings 。您不需要弄乱指针，并且对 QSettings 的读/写非常快。

现在，也不要忘记您可以使用堆中的 QSettings：

```
QSettings * settings = new QSettings(); 
```

如果您希望每个设置集都有一个“父级”，您可以`Settings`从 派生您的类`QSettings`，然后在其中添加一个`parent`字段。这将保留 的所有功能`QSettings`，非常方便。

实际上，您的方法也很好，您只需检查指针是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:20:21.857

好的，所以问题是“我正在设置一个指向可能存在或不存在的指针的指针”。在这种情况下，[空对象](http://en.wikipedia.org/wiki/Null_Object_pattern)模式应该会有所帮助。这样你应该能够摆脱 if 子句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T11:27:15.973

哦，等一下。我刚刚意识到我可以在类之间使用 QSettings（这是 SingerOfTheFall 明确暗示的）

因此，从我的 Settings.cpp 课程中，我可以做到：

```
QSettings sett("my");
sett.begingroup("my_groupname");
sett.setValue("value1", var1);
sett.setValue("value2", var2);
sett.setValue("value3", var3);
sett.endGroup(); 
```

我可以通过执行以下操作从任何类（duh！）中检索相同的信息：

someRandomClass.cpp：

```
QSettings settings("my");
settings.beginGroup("my_groupname");
myvar1 = settings.value("value1");
myvar2 = settings.value("value2");
myvar3 = settings.value("value3");
settings.endGroup(); 
```

# c# - Connection to local MySQL server succeeds with wrong connection details?

> ID：11843598
> 
> 赞同：1
> 
> 时间：2012-08-07T10:05:32.240
> 
> 标签：c#, .net, mysql, mysql-connector

I use MySQL within my application and I just tried to connect to my local MySQL server. First I tried to connect using the right connection details (localhost, user: root, no password). It succeeds. Then I tried to connect using the wrong connection details (localhost, user: root1, password: 123). It failed. But if i leave the password blank then it succeeds? I dont know why but everytime i leave the password blank and only provide a username (whatever username you can imagine) it succeeds! Can anyone help me with this crazy error? Dont know why the server doesn't reject my connection attempt.

Thanks in advance!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:11:07.157

我建议您将 root 密码更改为以前没有的密码。然后，刷新特权。问题解决了。您将无法使用空白密码在本地登录（通过 PhpMyAdmin 相同）。

有关更多详细信息，您可以访问此链接：[http ://dev.mysql.com/doc/refman/5.0/en/default-privileges.html](http://dev.mysql.com/doc/refman/5.0/en/default-privileges.html)

# c# - 用于避免不必要的装箱和拆箱的内置 FxCop 规则

> ID：11843609
> 
> 赞同：0
> 
> 时间：2012-08-07T10:06:15.483
> 
> 标签：c#, .net, fxcop

是否有内置的 FxCop 规则来分析不必要的装箱/拆箱？

下面的示例显示了一个违反规则的方法 WeaklyTyped 和一个满足规则的方法 StronglyTyped。

```
using System;

namespace PerformanceLibrary
{
    public interface IWork
    {
       object DoWork();
    } 

    public class Work : IWork
    {
       object IWork.DoWork()
       {
           return 3;
       }

       public int DoWork()
       {
           return 3;
       }
    }

    public class NeedsWork
    {
        public void WeaklyTyped()
        {
            IWork iwork = new Work();
            // The following call violates the rule.
            int x = (int)iwork.DoWork();
        }

        public void StronglyTyped()
        {
            Work work = new Work();
            int x = work.DoWork();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:58:47.423

曾经有一个规则，但现在的 FxCop 版本中不再存在。

您可以使用[BoxCop](http://www.codeproject.com/Articles/290247/BoxCop-Static-Assembly-Analyzer-tool)工具，但它不能很好地集成到构建过程中。

# iphone - 无需使用 appkey 和密钥登录即可访问保管箱文件

> ID：11843611
> 
> 赞同：0
> 
> 时间：2012-08-07T10:06:25.240
> 
> 标签：iphone, sdk, dropbox

我需要实现以下功能： *将用户的姓名和电子邮件地址发送到 Dropbox 中的 Excel 表格。用户提交详细信息后，需要将数据附加到文件中。

我在我的保管箱中创建了一个应用程序帐户，并获得了它的密钥和秘密，这些密钥和秘密是在应用程序中硬编码的。想要摆脱登录屏幕。如何完成？作为我的新手，请提供一些代码示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:24:01.017

这现在是不可能的，但将来可能会。

[只要参考这个](https://www.dropbox.com/developers/core/api#authorize)

在 DropBoxSDK 中，由于应用程序没有直接调用 /oauth/authorize，所以没有直接返回值。用户授权应用程序后，使用其请求令牌通过 /oauth/access_token API 调用检索访问令牌。

# c# - XDocument 到 JSON，JsonProperties

> ID：11843615
> 
> 赞同：4
> 
> 时间：2012-08-07T10:06:49.247
> 
> 标签：c#, json, properties, json.net, linq-to-xml

我正在使用 C#（ASP.Net、MVC）和 Newtonsoft 进行 JSON 序列化。我得到了一个类似于下面的 XDocument，我希望它是 JSON 格式的，用于视图。

```
<group>
  <name>Group 1</name>
  <description><p>Description</p></description>
  <section>
    ..
  </section>
  <section>
    ..
  </section>
</group> 
```

我有一个这样的扩展

```
private static readonly JsonSerializer jSerializer = JsonSerializer.Create(new JsonSerializerSettings {});

public static string ToJson(this object obj) {
  using (StringWriter writer = new StringWriter()) {
    jSerializer.Serialize(writer, obj);
    return writer.ToString();
  }
} 
```

现在的问题是，描述被反序列化了，所以我有类似的东西

```
... "description": { "p": "Description Text" } 
```

当按原样发布时，它将显示为“[Object object]”。

*   有没有办法为 XDocument 设置一些 JsonProperties（通常），而不生成完全反序列化的类？
*   如果没有，有没有办法设置一些 JsonProperty 说“将其保留为字符串，不要进一步序列化”
*   如果我为此使用 XSD 生成的类，我需要设置什么“类型”？“随便哪种”？

帮助将不胜感激，最好的问候。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-05-22T20:38:03.753

我添加这个答案是因为它在查找“c# convert xml to json XDocument”时的谷歌搜索排名。

```
string json = JsonConvert.SerializeXNode(xDocument); 
```

这个答案使用更现代的`XNode`vs`XmlNode`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T15:32:48.303

使用 Json.NET，您可以使用以下行将 XML 节点直接序列化为 JSON：

```
string json = JsonConvert.SerializeXmlNode(xmlNode); 
```

转换你`XDocument`看到`XmlDocument`这个问题：

[将 XDocument 转换为 XmlDocument，反之亦然](https://stackoverflow.com/questions/1508572/converting-xdocument-to-xmldocument-and-vice-versa)

然后，您可以使用您转换`XmlDocument`的作为参数，`SerializeXmlNode()`因为它继承自`XmlNode`.

# javascript - 无法在 WP7 网络浏览器控件中通过 Javascript 显示警报

> ID：11843617
> 
> 赞同：1
> 
> 时间：2012-08-07T10:06:50.403
> 
> 标签：javascript, windows-phone-7, windows-phone-7.1, windows-phone, windows-phone-7.1.1

我正在尝试使用 WP7 中的 Web 浏览器控件在网页中使用 javascript 显示警报框。没有弹出警报。代码有什么问题还是 WP7 根本不支持它？

<phone:WebBrowser Name="browser" IsScriptEnabled="True" ScriptNotify="browser_ScriptNotify" Source="Default.html"/>

Default.html 内部

```
<html><br>
<head><br>
</head><br>
<body onload="onLoad()"><br>
    <script type="text/javascript"><br>
        function onLoad() {<br>
            alert("hello");<br>
        }<br>
    </script><br>
</body><br>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:41:21.160

您是否能够加载 default.html 资源？先看看[http://blogs.msdn.com/b/dohollan/archive/2010/08/25/adventures-with-the-windows-phone-7-webbrowser-control.aspx](http://blogs.msdn.com/b/dohollan/archive/2010/08/25/adventures-with-the-windows-phone-7-webbrowser-control.aspx)。

更新后包含如何实现预期效果的示例代码：

的HTML：

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title></title>
    <script type="text/javascript" >
        function ShowNameAlert(name) {
            window.external.notify("Hello " + name);
        }
     </script>
 </head>
<body onload="ShowNameAlert('Jojo');">
Bla bla
</body>
</html> 
```

C# 代码隐藏：

```
private void SomeBrowser_ScriptNotify(object sender, NotifyEventArgs e)
{
    MessageBox.Show(e.Value);
} 
```

XAML：

```
<phone:WebBrowser x:Name="SomeBrowser" ScriptNotify="SomeBrowser_ScriptNotify" IsScriptEnabled="True" Source="test.html"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:22:51.490

这就是我解决它的方法，我将 javascript 注入到我导航到的网页上，并覆盖了警报和确认框

`window.alert = function(__msg){window.external.notify(' + __msg + ');};`

然后在脚本通知函数中使用 MessageBox 显示该消息。我希望它也对其他人有所帮助。以前的答案是一种解决方法，这是我认为是解决我的问题的正确方法

# database - 在 iReport 中使用多个数据库评估表达式时出错

> ID：11843618
> 
> 赞同：0
> 
> 时间：2012-08-07T10:06:54.763
> 
> 标签：database, jasper-reports, ireport

我需要使用 iReport 生成报告，并且我正在尝试从 2 个不同的数据库中获取数据。我关注了这篇[文章](http://www.packtpub.com/article/jasperreports-using-multiple-relational-databases-to-generate-report)（Bilal Siddiqui，JasperReports 3.6 Development Cookbook 的作者）。但我每次都收到以下错误。它单独工作正常但是当我使用子报告时它开始给我错误。

主报告：-

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="MasterReport" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <parameter name="projectName" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
        <defaultValueExpression><![CDATA["D:\\rEPORTS\\"]]></defaultValueExpression>
    </parameter>
    <parameter name="connectionParam" class="java.sql.Connection" isForPrompting="false">
        <defaultValueExpression><![CDATA[java.sql.DriverManager.getConnection("jdbc:mysql://localhost/liferay_6.0.6", "root", "root")]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![CDATA[QUERY]]>
    </queryString>
    <field name="EMAIL" class="java.lang.String"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="79" splitType="Stretch"/>
    </title>
    <pageHeader>
        <band height="35" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="32" splitType="Stretch">
            <staticText>
                <reportElement x="0" y="2" width="100" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="12"/>
                </textElement>
                <text><![CDATA[EMAIL]]></text>
            </staticText>
            <staticText>
                <reportElement x="126" y="2" width="100" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="12"/>
                </textElement>
                <text><![CDATA[Work Station Name]]></text>
            </staticText>
            <staticText>
                <reportElement x="260" y="2" width="100" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="12"/>
                </textElement>
                <text><![CDATA[Work Station Type]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="100" splitType="Stretch">
            <textField>
                <reportElement x="0" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{EMAIL}]]></textFieldExpression>
            </textField>
            <subreport>
                <reportElement x="271" y="0" width="200" height="100"/>
                <subreportParameter name="emailAddress">
                    <subreportParameterExpression><![CDATA[$F{EMAIL}]]></subreportParameterExpression>
                </subreportParameter>
                <connectionExpression><![CDATA[$P{connectionParam}]]></connectionExpression>
                <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "WorkstationSubReport.jasper"]]></subreportExpression>
            </subreport>
        </band>
    </detail>
    <columnFooter>
        <band height="45" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

**错误填充打印...错误评估表达式：源文本：java.sql.DriverManager.getConnection("jdbc:mysql://localhost:3306/liferay_6.0.6","root","root")** 

**net.sf.jasperreports.engine.fill.JRExpressionEvalException：评估表达式时出错：源文本：java.sql.DriverManager.getConnection("jdbc:mysql://localhost:3306/liferay_6.0.6","root","root" )** 

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T12:02:26.347

*尝试以下步骤在iReport*中测试主报告和子报告：

1.  在*iReport*中创建***连接***并进行测试。不要忘记将 jar 文件（*jdbc 驱动程序*）添加到应用程序（在此测试用例中为*iReport ）类路径。*
****   使用查询创建主报告。*使用iReport*连接对其进行测试。*   使用查询创建子报表。*使用iReport*连接对其进行测试。*   **将子报表**组件添加到主报表。*   在主报表中设置子报表的***subreportExpression***和***subreportParameterExpression***表达式。*   ***`java.sql.Connection`***在主报告中创建类型参数。为其设置***defaultValueExpression***。***在主报表的子报表的connectionExpression***表达式中使用此参数。*   编译子报表和主报表。*   *通过iReport中的***Preview**按钮测试主报告。***

 ***主报告片段：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ...>
    <parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
        <defaultValueExpression><![CDATA["<some_path>"]]></defaultValueExpression>
    </parameter>
    <parameter name="connectionParam" class="java.sql.Connection" isForPrompting="false">
        <defaultValueExpression><![CDATA[java.sql.DriverManager.getConnection("jdbc:oracle:thin:@//<server_name>:<server_port>/<SID_name>", "<user>", "<password>")]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![CDATA[SELECT id, name FROM main_table]]>
    </queryString>
    <field name="ID" class="java.lang.String"/>
    <field name="NAME" class="java.lang.String"/>
    <title>
        <band height="79" splitType="Stretch"/>
    </title>
    <detail>
        <band height="125" splitType="Stretch">
            <textField>
                <reportElement x="0" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{ID}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="0" y="20" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{NAME}]]></textFieldExpression>
            </textField>
            <subreport>
                <reportElement x="259" y="25" width="200" height="100"/>
                <subreportParameter name="masterId">
                    <subreportParameterExpression><![CDATA[$F{ID}]]></subreportParameterExpression>
                </subreportParameter>
                <connectionExpression><![CDATA[$P{connectionParam}]]></connectionExpression>

                <subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "several_connections_subreport1.jasper"]]></subreportExpression>
            </subreport>
        </band>
    </detail>
</jasperReport> 
```

子报告的片段：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ...>
    <parameter name="masterId" class="java.lang.String"/>
    <queryString>
        <![CDATA[SELECT details, id FROM details_table where masterId =$P{masterId}]]>
    </queryString>
    <field name="DETAILS" class="java.lang.String"/>
    <field name="ID" class="java.lang.String"/>
    <title>
        <band height="50">
            <textField>
                <reportElement x="176" y="20" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$P{masterId}]]></textFieldExpression>
            </textField>
        </band>
    </title>
    <detail>
        <band height="125" splitType="Stretch">
            <textField>
                <reportElement x="57" y="17" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{DETAILS}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:23:20.473

蝎，

此问题的解决方案是，首先在主报告中编写查询，获取记录，然后使用默认值表达式定义 connectionParam

`"java.sql.DriverManager.getConnection("jdbc:oracle:thin:@//<server_name>:<server_port>/<SID_name>", "<user>", "<password>")"`.

在您的情况下，您首先定义了 connectionParam，因此您无法在 Ireport 中运行主报告的查询。

谢谢， Srikanth Kattam

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-09T21:53:04.300

以上示例在 iReport 中不起作用，但在实际应用中可能起作用。问题是 iReport 不能自动理解数据库驱动程序的动态加载，即使它被添加到 ireport 类路径中并且您尝试将其设置为可重新加载。因此，您需要从 iReport 中获取已建立的连接。

以下是您的问题的解决方案。

1.  在 iReport 中创建与将填充子报表的数据库的连接。
2.  假设您为 hsql 数据库连接命名为“HSQLDB”。
3.  现在在子报表组件部分定义一个连接表达式。
4.  使用 com.jaspersoft.ireport.designer.utils.Misc.getConnection("HSQLDB") 作为它的值，你就完成了。

> *com.jaspersoft.ireport.designer.utils.Misc.getConnection("HSQLDB")*是成功的关键。请记住删除在主报告中创建的连接参数，否则不会产生任何结果。

```
<subreport>
<reportElement uuid="ba5a0c29-332c-4e81-b3b6-71c17d7d2c41" positionType="Float" x="0" y="182" width="364" height="72"/>
<connectionExpression><![CDATA[com.jaspersoft.ireport.designer.utils.Misc.getConnection("HSQLDB")]]></connectionExpression>
<subreportExpression><![CDATA["\\\\subreportdir\\subreport_orders.jasper"]]></subreportExpression>
</subreport> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-09T14:06:42.350

检查您的页面使用的语言。如果您使用“Javascript”，则会触发此错误。您应该将语言页面设置为“Java”***

# javascript - Getter 中的异步函数，带回调中的返回

> ID：11843619
> 
> 赞同：8
> 
> 时间：2012-08-07T10:07:06.250
> 
> 标签：javascript, node.js, v8, ecmascript-5

我想定义一个只读对象属性，它异步获取一个值，然后使用新的 EcmaScript 5 getter 返回它。

`undefined`但是，即使`magicValue`在下面的示例代码中绝对不会未定义，该属性也会始终返回。另外，当我刚刚`return 'xxx';`打印的值仍然是`undefined`. 仅当我`return`在回调函数之外时才有效。

无论是否调用了回调，似乎`return`都在立即执行`myAsyncFunction`。我不确定这是否是 V8 中的错误，或者我是否在滥用 JavaScript 的 getter。
我可以让它工作吗？我想，既然我现在可以使用 getter 和 setter，我将使用 getter/setter 来读写属性和常规函数来完成某些任务。

```
var User = function (id) {
    this.id = id;
};

Object.defineProperty(User.prototype, 'magic', {
    get : function () {
        myAsyncFunction(function (magicValue) {
            return magicValue;
        });
    }
});

var u = new User(5);
console.log(u.magic); 
```

打印`undefined`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-01-27T14:21:10.700

如今，异步操作通常由[Promises](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)处理。当您调用 getter 时，它会返回一个 Promise，您可以使用 'then()' 方法附加一个回调。

```
Object.defineProperty(User.prototype, "magic", {
  get: function() {
    return new Promise(function(resolve, reject) {
      setTimeout(function() {
        resolve(JSON.stringify({
          magic: 'value'
        }));
      }, 1000);
    });
  }
}); 
```

这是一个工作示例： [https ://jsfiddle.net/tw6gaudz/2/](https://jsfiddle.net/tw6gaudz/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T11:24:58.567

感谢@utkanos 的帮助。

JavaScript 不会异步返回 getter 函数的值，因为 getter 是同步的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T11:29:19.843

您可以使用“setter”：

```
var User = function (id) {
    this.id = id;
};

Object.defineProperty(User.prototype, 'magic', {
    set : function (value) {
        setTimeout(value.bind(0, "hello"), 1000);
        return true;
    }
});

var a = new User(5);

a.magic = function(msg){
    alert(msg);
}; 
```

# php - 搜索串联的植物名称

> ID：11843620
> 
> 赞同：0
> 
> 时间：2012-08-07T10:07:26.287
> 
> 标签：php, mysql, database, concat

我正在用**PHP**编写一个程序来搜索集合数据库中的植物名称。您应该能够输入科学植物名称（例如 Rumex acetosa 或 Medicago x varia）以查找该名称的所有条目。植物名称是原子化的，所以每个名称都由两到五个部分组成。我不想单独搜索每个部分，但我需要将它们全部添加到一个名称。

所以我试图做的是写一个`SELECT CONCAT`子句。

```
$sql = "
  SELECT observationid, fullnamestring, latitudedecimal, longitudedecimal
  FROM  observation, (
    SELECT CONCAT (genusormonomial, firstepithet, rank, hybridflag, intraspecificepithet)
    FROM name
  ) name_str, name, gatheringsitecoordinates 
  WHERE name.nameid = observation.fkname
    AND gatheringsitecoordinates.sitecoordinateid = observation.fkgatheringsite
    AND (
      SELECT CONCAT (genusormonomial, firstepithet, rank, hybridflag, intraspecificepithet)
      FROM name
    ) name_str LIKE '" . mysql_real_escape_string($sucharray[0]) . "'
"; 
```

不幸的是，它根本无法以这种方式工作，因为他抱怨我的查询语法。

错误：您的 SQL 语法有错误；检查与您的**MySQL 服务器**`name_str LIKE 'rum%'`版本相对应的手册，以在第 2 行附近使用正确的语法

为了让您了解它到底应该是什么样子，请浏览[http://bgbm3.bgbm.fu-berlin.de/iopi/gpc/query.asp](http://bgbm3.bgbm.fu-berlin.de/iopi/gpc/query.asp)

我是一个完全的 Sql-newb，所以也许你们中的某个人可以帮助我！

谢谢！

PS：我已经查看了[搜索连接字段](https://stackoverflow.com/questions/7121475/searching-concatenated-field)的线程，但这不会，因为我真的需要搜索整个名称，而不仅仅是它的每个部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:24:34.307

您的查询包含没有命名列的子查询。我最接近的猜测是你想要这样的东西：

```
SELECT observationid, fullnamestring, latitudedecimal, longitudedecimal
FROM  observation o join
      (SELECT CONCAT(genusormonomial, firstepithet, rank, hybridflag, intraspecificepithet) as name_str,
              name.*
       FROM name
      ) n
      on o.nameid = n.nameid
WHERE o.sitecoordinateid = o.fkgatheringsite AND
      namestr like <'" . mysql_real_escape_string($sucharray[0]) . "'> 
```

然而，gatheringsitecoordinates.sitecoordinateid 存在问题，因为没有名为gatheringsitecoordinates 的表。以上，我认为这是观察的一部分。如果它是一个单独的表，那么您可能想要这样的东西：

```
SELECT observationid, fullnamestring, latitudedecimal, longitudedecimal
FROM  observation o join
      (SELECT CONCAT(genusormonomial, firstepithet, rank, hybridflag, intraspecificepithet) as name_str,
              name.*
       FROM name
      ) n
      on o.nameid = n.nameid join
      gatheringsitecoordinates gsc
      on o.sitecoordinateid = o.fkgatheringsite 
WHERE namestr like <'" . mysql_real_escape_string($sucharray[0]) . "'> 
```

此外，我已将其表示为没有字符串表示法的常规 sql。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:11:10.950

您需要添加一个`WHERE`子句 - 像这样......

```
... epithet ) FROM name ) WHERE name_str LIKE ... 
```

# actionscript-3 - 如何使闭包外部范围引用变弱。或任何其他解决方法

> ID：11843626
> 
> 赞同：1
> 
> 时间：2012-08-07T10:07:40.250
> 
> 标签：actionscript-3, apache-flex

**假设 1.**我有一个名为`Experiment`. 它有助于在选定的精灵上监听 EnterFrame 事件。API 如下所示：`Experiment.listenEnterFrame(mySprite, onEnterFrameHandler);`.

**假设 2.**我希望我的`Experiment.listenEnterFrame`班级允许使用匿名处理程序。我还希望它具有内存泄漏抗性（没有任何`cleanUp()`方法），即对 mySprite 的引用应该是弱的。

这是代码：

```
package
{
import flash.display.Sprite;
import flash.events.Event;
import flash.system.System;
import flash.utils.Dictionary;
import flash.utils.setTimeout;

public class Experiment extends Sprite
{
    public function Experiment()
    {
        new MemoryLeakTest();
        new NoMemoryLeakTest();
        setTimeout(System.gc, 100);
    }

    private static var dict:Dictionary = new Dictionary(true);

    private static function listener(event:Event)
    {
        dict[event.currentTarget]();
    };

    public static function listenEnterFrame(dispatcher:Sprite, callback:Function):void
    {
        dict[dispatcher] = callback;
        dispatcher.addEventListener(Event.ENTER_FRAME, listener, false, 0, true);
    }
}
}

import flash.display.Sprite;

internal class MemoryLeakTest extends Sprite
{
    function MemoryLeakTest():void
    {
        Experiment.listenEnterFrame(this, function () {
            trace("Memory leak");
        });
    }
}

internal class NoMemoryLeakTest
{
    function NoMemoryLeakTest():void
    {
        Experiment.listenEnterFrame(new Sprite(), function () {
            trace("No Memory leak");
        });
    }
} 
```

在上面的示例中，MemoryLeakTest 实例永远不会被删除 - 永远跟踪“内存泄漏”。

我对此的解释是，`callback`在中创建的闭包`MemoryLeakTest`保持对外部范围的引用，即`MemoryLeakTest`实例本身。由于这个引用，`MemoryLeakTest`实例不能被垃圾收集。

你知道任何解决方法，所以我可以在我的实用程序方法中使用匿名回调，而不必担心内存释放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:49:27.557

AS3 中的字典存在一个已知错误。不是存储对函数/方法的引用，而是存储对闭包对象的引用。

这意味着如果您想将函数引用作为*键*存储在 Dictionary 中，如果 Dictionary 使用弱键，它将立即被标记为 GC，因为 Dictionary 引用的是闭包对象而不是函数本身。

这也意味着，如果您尝试将函数引用作为*值*存储在 Dictionary 中，那么只要 Dictionary 拥有闭包对象，闭包对象所引用的实例就不会被 GC 处理。（字典有弱*键*而不是值！）这正是这里发生的事情。

# c# - 将 dll 中的 Qt 信号与 C# 应用程序连接

> ID：11843628
> 
> 赞同：2
> 
> 时间：2012-08-07T10:07:44.493
> 
> 标签：c#, qt, dll, signals

我有一个导出插槽和函数的 dll，我还有一些从 dll 中的一些私有函数发出的信号。如果有帮助的话，dll 是一个 COM 组件。

首先，当我在 Visual Studio 2010 中添加引用时，我导出了完整的 QT 类并且可以看到我的公共插槽和函数，但我看不到信号（不知道我是否应该这样做）。它们用“Q_SIGNALS”声明。

我想要的是将这些信号之一连接到我的 C# 项目中的方法，就像插入 QT 的信号一样，但现在我需要像“信号（QT）”到“方法（C#）”这样的东西，这可能吗？任何帮助表示赞赏。

```
C++ (Qt)
signals:
  void mySignal(const QString& path); 
```

应该连接到：

```
C# (VS2010)
void myFunction(string path); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:12:47.047

您在导出的 Qt 类中看不到信号，因为它们不是该类的函数。它不是任何类型的 C(++) 声明。只是一个命名的占位符，Qt 预处理器使用它来生成调用代码，以防信号实际连接到某个地方。一个信号可以变成两个不同但简单的东西，这取决于线程上下文。信号发送对象是否与接收对象在同一个线程中：

1.  它确实：编译为简单的直接方法调用
2.  它没有：槽调用存储在接收者的消息队列中，并在接收者的线程返回消息循环时执行。“插槽”就是所谓的“事件处理程序”

因此，对于案例 1，您实际上根本不需要 Qt 语法糖。只需从 Qt 中您要执行的操作点调用您的 C# 方法`emit mySignal()`。但是，情况 2 不能像 Qt 那样简单，因为接收器必须继承 QObject（我不知道在 C# 中可能）。您仍然可以使用处理程序滚动您自己的消息循环，但 Qt 不会帮助您。

# c# - 在 Visual Studio 2010 中使用 SQL 创建登录页面

> ID：11843629
> 
> 赞同：0
> 
> 时间：2012-08-07T10:07:44.790
> 
> 标签：c#, asp.net

我是.Net 的初学者。我在 Visual Studio 2008 中创建了一个带有 SQL 连接的登录页面。但我想在 Visual Studio 2010 中使用代码。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:11:58.657

您可以在 Visual Studio 2010 中打开它，它会为您转换项目

# mysql - 如何通过电子邮件获取 MySQL 中的内容？

> ID：11843636
> 
> 赞同：0
> 
> 时间：2012-08-07T10:08:15.517
> 
> 标签：mysql, html, database, email

我在 html 页面中有一个文本框和一个按钮。当我单击一个按钮时，输入的任何文本都将存储在数据库中。但我也想在我的电子邮件 ID 中使用相同的文本，我该如何实现呢？请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:10:30.147

在您的提交事件中，

**第一**：数据库存储脚本；

**二**：邮件功能；

# jsf - 从 WPS 7.0 中的主题导航菜单重置 JSF 支持 bean

> ID：11843643
> 
> 赞同：0
> 
> 时间：2012-08-07T10:08:47.450
> 
> 标签：jsf, navigation, themes, backing-beans

我有一个 JSF Portlet，它在视图 JSP 中有用户表单。要求是每当我单击主题导航菜单时，都需要向用户显示一个新表单。但问题是每当我点击菜单时，这些值都会被保留。请建议如何在单击主题导航时删除/重新初始化支持 bean。

谢谢，拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:04:07.343

我通过在导航 URL 生成中添加一个 queryString 参数（因为我们使用自定义主题）做了一个解决方法，并且在我的 doView 中我正在检查参数，如果它不为 NULL，则显示一个新的表单。希望能帮助到你

# spring - 使用spring jdbctemplate更新一行

> ID：11843658
> 
> 赞同：11
> 
> 时间：2012-08-07T10:09:48.483
> 
> 标签：spring, jdbctemplate

我是春天的新手。我正在使用 spring jdbc 模板开发一个 CRUD 应用程序。我完成了插入和选择。但在更新中我面临一些问题。任何人都可以为我提供一个使用 jdbctemplate 进行更新和删除的简单示例。提前谢谢。

我的控制器-

```
@RequestMapping(method = RequestMethod.GET)
    public String showUserForm(@ModelAttribute(value="userview")  User user,ModelMap model)
    {
        List list=userService.companylist();
        model.addAttribute("list",list);
        return "viewCompany";
    }

@RequestMapping( method = RequestMethod.POST)
public String add(@ModelAttribute(value="userview") @Valid User user, BindingResult result) 
{
    userValidator.validate(user, result);
    if (result.hasErrors()) {
        return "viewCompany";
    } else {
        userService.updateCompany(user);
        System.out.println("value updated");
        return "updateSuccess";
    } 
```

当我单击更新按钮时，应根据行 ID 在我的数据库中更新编辑的值，我的问题是如何将行 ID 从 jsp 映射到控制器。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-07T10:12:31.997

直接来自[文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#jdbc-updates)：

> 以下示例显示为某个主键更新的列。在此示例中，SQL 语句具有行参数的占位符。参数值可以作为可变参数或对象数组传入。因此原语应该被显式地包装在原语包装类中或使用自动装箱。

```
import javax.sql.DataSource;

import org.springframework.jdbc.core.JdbcTemplate;

public class ExecuteAnUpdate {

    private JdbcTemplate jdbcTemplate;

    public void setDataSource(DataSource dataSource) {
        this.jdbcTemplate = new JdbcTemplate(dataSource);
    }

    public void setName(int id, String name) {
        this.jdbcTemplate.update(
                "update mytable set name = ? where id = ?", 
                name, id);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T06:11:20.023

您可以简单地使用`request.getParamater()`或`command object`将值从 jsp 传递到控制器。

# java - 在 Java 中读取 XML InputStream 的问题

> ID：11843664
> 
> 赞同：0
> 
> 时间：2012-08-07T10:10:29.240
> 
> 标签：java, android, xml, parsing, dom

在我的主要活动中，我有这个电话：

```
InputStream stream = http_conn.getInputStream();
            ParseXML.Login(stream); 
```

我知道输入流正在工作，因为我可以创建一个缓冲阅读器，创建一个可以发送到 UI 的字符串。问题是这报告了返回给我的整个 XML 文档。

在我的 ParseXML 类 Login 方法中，我有以下内容：

```
DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
        Document doc = dBuilder.parse(stream);
        doc.getDocumentElement().normalize(); 
```

到目前为止一切顺利，我想？我是使用解析器的新手，但基本上我的 XML 文档的布局如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<string xmlns="http://www.xxx.com/asmx">TOKEN HERE</string> 
```

我已经看到了一些示例，您可以使用 XML 文件从更深处检索各种项目，如下所示：[http ://www.mkyong.com/java/how-to-read-xml-file-in-java- dom解析器/](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)

我不仅是 XML 解析器的新手，而且是 java 的新手，我只是不知道如何从 XML 文档中提取该字符串！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:26:27.270

我不知道我是否理解，但如果您只想在此处获取 TOKEN，请尝试 doc.getDocumentElement().getTextContent()

# c# - 使用 OracleDataAdapter 的参数化查询

> ID：11843667
> 
> 赞同：2
> 
> 时间：2012-08-07T10:10:37.437
> 
> 标签：c#, database, asp.net-mvc-3, oracle

我目前正在将控制器类与数据访问层类（UserDAL 类）结合使用，以便对数据库进行更改。但是我知道我的代码很脆弱，因为我没有使用参数化查询。

我从示例中看到了如何使用命令对象来使用查询。但是，我使用的 OracleDataAdapter 的行为似乎有点不同。它也与将参数化的实际值处于不同的类中，如以下代码部分所示：

控制器代码，其中三个字符串是从用户输入的字段中填充的：

```
string usrName = mod.UserName;
string role = mod.Role;
string mod.actvInd;

string sql = "UPDATE LD_USER_ROLE" + " SET USERNAME='" + usrName + "', ROLE='" + role + "', ACTIVE_IND='" + actvInd  + "' WHERE USER_ROLE_ID=" + id + "";

UserRoleDAL udl = new UserRoleDAL();
            udl.ExecuteQuery(sql); 
```

用户DAL类：

```
public class UserRoleDAL
{

    private OracleConnection conn;

    public UserRoleDAL()
    {
         string oradb = ConfigurationManager.ConnectionStrings["db_dbConnectionString"].ConnectionString;

        conn = new OracleConnection(oradb);
    }

    public void ExecuteQuery(string sql)
    {
        conn.Open();

        OracleDataAdapter adapter = new OracleDataAdapter(sql, conn);
        DataSet ds = new DataSet();
        adapter.Fill(ds);

        conn.Close();
    }
} 
```

如何将参数化查询与 OracleDataAdapter 对象一起使用，我是否必须合并上述类，甚至将字段传递到 UserRoleDAL 对象中才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T10:33:37.080

您可以像这样将 OracleDataAdapter 与 OracleCommand 一起使用：

```
public void ExecuteQuery(string usrName, string role, string activeation, int userId)
{
  string sql = "UPDATE LD_USER_ROLE SET USERNAME=:usrName, ROLE=:role, ACTIVE_IND=:actvInd  WHERE USER_ROLE_ID=:id";

    OracleCommand cmd = new OracleCommand(sql, conn);
    cmd.BindByName = true;

    cmd.Parameters.Add("usrName", usrName);
    cmd.Parameters.Add("role", role);
    cmd.Parameters.Add("actvInd", activeation);
    cmd.Parameters.Add("id", userId);

    OracleDataAdapter adapter = new OracleDataAdapter(cmd);
    DataSet ds = new DataSet();
    adapter.Fill(ds);
} 
```

# iphone - 无法控制 UITextView 的宽度

> ID：11843669
> 
> 赞同：1
> 
> 时间：2012-08-07T10:10:45.053
> 
> 标签：iphone, ios, xcode4.2, uitextview

我正在制作一个需要在屏幕上创建 UITextView 的应用程序。TextView 的高度和宽度应该随着用户输入而继续增加，即 TextView 的高度和宽度应该根据其内容而改变。

但是我已经能够通过**myTextView.ContentSize.height**控制 TextView 的高度。但是我找不到根据其内容控制 TextView 宽度的方法。

甚至**myTextView.contentSize.width**也不适合我。

我正在UITextView 的**textViewDidchange**委托方法中进行所有帧计算。

有什么建议么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:34:02.400

在`textViewDidChange`,

```
CGSize constraintSize; 
CGSize labelSize; 

constraintSize = CGSizeMake(myTextView.frame.size.width, 480); 

NSString    *text   =   myTextView.text;
text                =   [text stringByTrimmingCharactersInSet: [NSCharacterSet newlineCharacterSet]];
text                =   [text stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceCharacterSet]];

if([text stringByReplacingPercentEscapesUsingEncoding: NSUTF8StringEncoding])
{
    text            =   [text stringByReplacingPercentEscapesUsingEncoding: NSUTF8StringEncoding];
}

// Note that in the below line you must use the font as exact as you use for textview

labelSize           =   [text sizeWithFont:[UIFont systemFontOfSize: 16] constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap]; 
```

在中`labelSize`您可以找到文本视图的预期大小。您可以将框架设置`myTextView`为

```
myTextView.frame    =   CGRectMake(myTextView.frame.origin.x,myTextView.frame.origin.y,labelSize.width,labelSize.height); 
```

认为这对你有用。试试看。希望这可以帮助。

# java - 如何将条形码扫描仪与 Web 应用程序连接？

> ID：11843672
> 
> 赞同：4
> 
> 时间：2012-08-07T10:10:56.187
> 
> 标签：java, model-view-controller, jakarta-ee, web-applications, barcode-scanner

我手头有一个仓库管理系统的创建。这将是一个 Web 应用程序，应该可以在台式机和 10 英寸平板电脑上运行。

我从未使用过条形码扫描仪，所以我的问题是如何将条形码扫描仪与我的应用程序接口？

这将是一个 Java EE 6 应用程序，要使用的 Web 框架仍然是开放的。

任何类似设置的经验将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T22:44:58.530

就像 Alex K. 所说，大多数扫描仪就像键盘一样。所以处理输入应该不难。

我已经看到使用 ActiveX 控件 (Ewwww) 实现的这种类型的系统，但我假设您希望这个应用程序是跨浏览器的。

浏览器中的 Java 现在已经死了，所以小程序很可能是不可能的。

如果扫描仪首先发送一个键，您可以轻松地使用 JavaScript 绑定一个事件侦听器来等待该键，然后获取输入。

# android - 是否可以在 android/emulator 上运行 .apk 文件？

> ID：11843675
> 
> 赞同：3
> 
> 时间：2012-08-07T10:11:05.533
> 
> 标签：android, android-emulator, apk

我从网上得到了一个 APK。

我可以在模拟器上安装和运行 APK 吗？

如果是，该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:13:22.940

用于`adb`在模拟器（或任何连接的设备）上安装 apk：

```
adb install file.apk 
```

重新安装，保留应用数据：

```
adb install -r file.apk 
```

`adb`文档可在此处获得：http: [//developer.android.com/tools/help/adb.html](http://developer.android.com/tools/help/adb.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T10:31:04.163

**是的，有可能**

首先将该 .apk 文件复制到您的 android-SDK 的“platform-tools”文件夹中，然后打开命令提示符并转到“platform-tools”文件夹，现在键入“adb install ***_*** ”，此处下划线表示您的 .apk 文件名。然后按回车。完成

确保您的模拟器正在运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T10:13:02.510

## 是的你可以。

最简单的方法是从模拟器上的浏览器中下载 apk 文件，然后从通知菜单中安装它。

或者，您可以安装 Android SDK（如果您有模拟器，您可能已经完成了）并使用`adb install my.apk`它应该安装到任何可用的设备（只要只有一个可用）。用于`adb devices`检查可用的设备 - 当您运行模拟器时，它应该显示在那里。

**注意**，您需要`unknown sources`在设置的应用程序菜单中启用此功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T10:13:14.227

将它放在您的主机中，然后从您的模拟器浏览器下载 .apk 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T10:13:52.087

是的！

将您的*.apk*文件放在**SDK的****platform-tools**文件夹中，转到命令提示符（ADB 的路径）并运行以下命令：

 **```
adb install your_apk_file.apk 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T10:14:15.157

我不确定它是否会起作用，但尝试通过 Eclipse 中的 DDMS 透视图打开模拟器的文件资源管理器，然后将您的 apk 复制/粘贴到文件夹中。然后从您的模拟器导航到该文件夹​​并启动 apk。**

# sql - 不同表的两个不同列（添加）的总和以及Oracle中的多个表连接

> ID：11843677
> 
> 赞同：3
> 
> 时间：2012-08-07T10:11:06.533
> 
> 标签：sql, oracle11g, sum

我有三张桌子。

学校：学校代码（PK），年份，学校名称。
入学：学校代码，年份，种姓，c1，c2，c3，c4，c5，c6，c7，c8
类别：学校代码，年份，classid，房间

现在，我想查找 1 至 4 年级入学的学校列表以及 1-4 班使用的教室数量（CLASSID 定义为：7 表示 1 和 2 班，8 表示 3 和 4 班，9 表示班级- 5&6，7&8级为10；种姓被定义为1代表普通，2代表sc，3代表st，4代表其他）。

我使用了以下查询：

```
select m.schoolcode, m.schoolname, sum(e.c1+e.c2+e.c3+e.c4), sum(c.rooms) 
from dise2k_enrolment09 e, 
     dise2k_master m ,
     dise2k_clsbycondition c 
where m.schoolcode=e.schoolcode and
      m.schoolcode=c.schoolcode and 
      e.year='2011-12' and 
      m.year='2011-12' and 
      c.year='2011-12' and 
      c.classid in(7,8) and 
      e.caste in(1,2,3,4) 
group by m.schoolcode, m.schoolname 
```

但是显示的结果是不正确的。入学率比实际高得多，在教室的情况下也是如此。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T10:41:23.890

好的，试试这个，看看你的问题是否是由于在连接中重复记录引起的：

```
select m.schoolcode, m.schoolname, e_sum, c_sum 
  from dise2k_master m
 inner join
 (
    select schoolcode,
           sum(c1 + c2 + c3 + c4) e_sum
      from dise2k_enrolment09
     where year='2011-12'
       and caste in(1,2,3,4) 
     group by schoolcode
 ) e
    on m.schoolcode=e.schoolcode
 inner join
 (
    select schoolcode,
           sum(rooms) c_sum
      from dise2k_clsbycondition
     where year='2011-12'
       and classid in(7,8)
     group by schoolcode
 ) c
    on m.schoolcode=c.schoolcode
 where m.year='2011-12' 
```

# android - Eclipse 不在新的 Android 项目中生成文件

> ID：11843681
> 
> 赞同：5
> 
> 时间：2012-08-07T10:11:13.120
> 
> 标签：android, eclipse

我遇到了 Eclipse 的问题。每次我尝试在 Ubuntu 上的 Eclipse（Juno 和 Indigo）64b 中启动一个新的 Android 项目时，除了目录之外什么都没有创建。src、res 等中没有文件，没有 xmls，没有 .java。我已经正确设置了 SDK 的位置。

我尝试：重新安装 sdk，用更少的 API 安装 ADT fo 几次，是的，它已安装 更改 Eclipse 版本 检查 PC 上的 Java 版本

但没有任何作用

这是一些打印屏幕，当我在新的 Android 应用程序窗口上单击下一步时情况如何。什么都没有改变，只有窗口标题。

[http://imageshack.us/g/69/screenshotnewandroidapp.png/](http://imageshack.us/g/69/screenshotnewandroidapp.png/)

谢谢帮助！;)

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:38:10.047

检查 Java 构建路径库，是否选中 src 复选框。

# android - 打电话后我的拍照应用程序关闭

> ID：11843683
> 
> 赞同：-1
> 
> 时间：2012-08-07T10:11:36.237
> 
> 标签：android, camera

我使用surfaceview和相机拍照。我使用android网站的方法：http: [//developer.android.com/reference/android/hardware/Camera.html](http://developer.android.com/reference/android/hardware/Camera.html)
它告诉我们：重要：调用`release()`释放相机以供其他应用程序使用。应用程序应立即释放相机`onPause()`并重新打开（）它`onResume()`

我的代码如下：

```
protected void onPause() {
  super.onPause();  
  if (bfCamera != null) {
   bfCamera.stopPreview();
   bfCamera.release(); 
  }
 }

protected void onResume() {
  super.onResume();  
  bfCamera.startPreview();
  bfCamera.open(); 
 } 
```

它在来电之前工作。
当我的朋友打电话给我时，我的应用程序已关闭。
预览图片无法使用。
它显示全黑。
有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:21:06.913

当调用 onResume() 方法时，您必须重新实例化相机对象 - 您也可以在 onPause() 方法中设置 bfCamera = null 。该对象可能已被垃圾收集器删除。

# c++ - 类型敏感元组访问者

> ID：11843684
> 
> 赞同：2
> 
> 时间：2012-08-07T10:11:39.903
> 
> 标签：c++, c++11, tuples

假设我有一个`std::tuple`由像这样的类型组成

```
struct A {
  static void tip();
};

struct B {
  static void tip();
};

struct Z {
};

std::tuple<const A&,const B&,const Z&> tpl; 
```

是的，我需要单独`A`的 , `B`。（`::tip()`每种类型的实现不同。）我尝试实现的是一个类型敏感的“访问者”，它从头到尾遍历元组。在访问特定类型`T`的元素时，应根据是否`T`具有该`::tip()`方法来调用函数。仅在上面的简单示例中`A`并`B`没有`::tip()`实现`Z`。因此，迭代器应该使用该方法调用两次类型的函数`::tip()`，一次调用另一个函数。

这是我想出的：

```
template< int N , bool end >
struct TupleIter
{
  template< typename T , typename... Ts >
  typename std::enable_if< std::is_function< typename T::tip >::value , void >::type
  static Iter( const T& dummy , const std::tuple<Ts...>& tpl ) {
    std::cout << "tip\n";
    std::get<N>(tpl); // do the work
    TupleIter<N+1,sizeof...(Ts) == N+1>::Iter( std::get<N+1>(tpl) , tpl );
  }

  template< typename T , typename... Ts >
  typename std::enable_if< ! std::is_function< typename T::tip >::value , void >::type
  static Iter( const T& dummy , const std::tuple<Ts...>& tpl ) {
    std::cout << "no tip\n";
    std::get<N>(tpl); // do the work
    TupleIter<N+1,sizeof...(Ts) == N+1>::Iter( std::get<N+1>(tpl) , tpl );
  }
};

template< int N >
struct TupleIter<N,true>
{
  template< typename T , typename... Ts >
  static void Iter( const std::tuple<Ts...>& tpl ) {
    std::cout << "end\n";
  }
}; 
```

我`dummy`在迭代器位置使用元素类型的实例，并决定通过`enable_if`哪个函数调用。不幸的是，这不起作用/不是一个好的解决方案：

1.  编译器抱怨递归实例化
2.  这`const T& dummy`不是一个干净的解决方案

我想知道是否`enable_if`是正确的决策策略，以及如何递归迭代`std::tuple`捕获第一种类型并将所有剩余的参数保持在重要状态。通读[如何拆分元组？](https://stackoverflow.com/questions/10626856/how-to-split-a-tuple)但它不做任何决定。

如何在 C++11 中以正确且可移植的方式实现这样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T12:12:09.793

嗯，这比我预期的要难，但这很[有效](http://ideone.com/6Puku)。

你做错了/我修改的一些事情：

1.  您无法评估 this: `std::is_function< typename T::tip >::value`，因为`T::tip`它不是类型。即使可以评估，当`T::tip`不存在时会发生什么？替换仍然会失败。
2.  由于您使用 const 引用作为元组的内部类型，因此您必须先清理它们，然后再尝试在其中找到提示成员。通过清理我的意思是删除 const 并删除引用。
3.  那个 dummy 类型的东西不是一个好主意，没有必要使用那个参数。您可以使用 来实现相同的目的`std::tuple_element`，它从元组中检索第 i 个类型。
4.  我`TupleIter`将 的模板参数修改为以下内容，这意味着：

“`TupleIter`在大小为 n 的元组内处理第 index 个类型”。

```
template<size_t index, size_t n> 
struct TupleIter; 
```

整个代码是这样的：

```
#include <tuple>
#include <iostream>
#include <type_traits>

struct A {
  static void tip();
};

struct B {
  static void tip();
};

struct Z {
};

// Indicates whether the template parameter contains a static member named tip.
template<class T>
struct has_tip {
    template<class U>
    static char test(decltype(&U::tip));

    template<class U>
    static float test(...);

    static const bool value = sizeof(test<typename std::decay<T>::type>(0)) == sizeof(char);
};

// Indicates whether the n-th type contains a tip static member
template<size_t n, typename... Ts>
struct nth_type_has_tip {
    static const bool value = has_tip<typename std::tuple_element<n, std::tuple<Ts...>>::type>::value;
};

// Generic iteration
template<size_t index, size_t n>
struct TupleIter
{
  template< typename... Ts >
  typename std::enable_if< nth_type_has_tip<index, Ts...>::value , void >::type
  static Iter(const std::tuple<Ts...>& tpl) 
  {
    std::cout << "tip\n";
    TupleIter<index + 1, n>::Iter(tpl );
  }

  template< typename... Ts >
  typename std::enable_if< !nth_type_has_tip<index, Ts...>::value , void >::type
  static Iter(const std::tuple<Ts...>& tpl) {
    std::cout << "no tip\n";
    TupleIter<index + 1, n>::Iter(tpl );
  }
};

// Base class, we've reached the tuple end
template<size_t n>
struct TupleIter<n, n>
{
  template<typename... Ts >
  static void Iter( const std::tuple<Ts...>& tpl ) {
    std::cout << "end\n";
  }
};

// Helper function that forwards the first call to TupleIter<>::Iter
template<typename... Ts>
void iterate(const std::tuple<Ts...> &tup) {
    TupleIter<0, sizeof...(Ts)>::Iter(tup);
}

int main() {
    A a;
    B b;
    Z z;
    std::tuple<const A&,const B&,const Z&> tup(a,b,z);
    iterate(tup);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T15:24:14.637

这是对该问题的另一种看法，与 mfontanini 答案非常相似，但展示了：

boost::fusion::for_each （而不是手动迭代元组）。
使用基于表达式的 SFINAE 方法实现 has_type 的变体，我觉得比通常的 sizeof 技巧更容易遵循。

```
#include <boost/tuple/tuple.hpp>
#include <boost/fusion/include/boost_tuple.hpp>
#include <boost/fusion/algorithm.hpp>

#include <iostream>

    struct nat // not a type
    {
    private:
        nat(); 
        nat(const nat&);
        nat& operator=(const nat&);
        ~nat();
    };

    template <typename T>
    struct has_tip
    {
        static auto has_tip_imp(...) -> nat;

        template <typename U>
        static auto has_tip_imp(U&&) -> decltype(U::tip());

        typedef decltype(has_tip_imp(std::declval<T>())) type;
        static const bool value = !std::is_same<type, nat>::value;
    };

    struct CallTip
    {
        template<typename T>
        typename std::enable_if<has_tip<T>::value>::type
        operator()(T& t) const
        {
            std::cout << "tip\n";
            T::tip();
        }

        template<typename T>
        typename std::enable_if<!has_tip<T>::value>::type
        operator()(T& t) const
        {
            std::cout << "no tip\n";
            return;
        }
    };

struct A {
    static void tip(){}
};

struct B {
    static void tip(){}
};

struct Z {
};

int main()
{
    A a;
    B b;
    Z z;
    boost::tuple<const A&,const B&,const Z&> tpl(a, b, z);
    boost::fusion::for_each(tpl, CallTip());
} 
```

请注意，如果您的编译器支持可变参数模板，您可以在 fusion::for_each 中使用 std::tuple 而不是 boost::tuple 通过包含`#include<boost/fusion/adapted/std_tuple.hpp>`

编辑：正如 Xeo 在评论中指出的那样，可以通过完全删除特征 has_tip 并简单地转发给一个小调用助手来简化很多表达式-SFINAE 方法。
最终的代码真的很简洁！

```
#include <boost/tuple/tuple.hpp>
#include <boost/fusion/include/boost_tuple.hpp>
#include <boost/fusion/algorithm.hpp>

#include <iostream>

struct CallTip
{
    template<typename T>
    void operator()(const T& t) const
    {
        call(t);
    }

    template<class T>
    static auto call(const T&) -> decltype(T::tip())
    { 
        std::cout << "tip\n";
        T::tip(); 
    }

    static void call(...)
    {
        std::cout << "no tip\n";
    }
};

struct A {
    static void tip(){}
};

struct B {
    static void tip(){}
};

struct Z {
};

int main()
{
    A a;
    B b;
    Z z;
    boost::tuple<const A&,const B&,const Z&> tpl(a, b, z);
    boost::fusion::for_each(tpl, CallTip());
} 
```

# c# - 将日期编码为 ulong 以用于 AmiBroker

> ID：11843686
> 
> 赞同：1
> 
> 时间：2012-08-07T10:11:48.063
> 
> 标签：c#, .net, datetime, bit-manipulation

我正在使用来自[http://code.google.com/p/amibroker](http://code.google.com/p/amibroker)的非官方 C# sdk 为 Amibroker 开发数据插件。所做的是读取文本文件，将内容解析为 amibroker 的数据库格式，以便将数据显示为图形。这是输入数据的示例：

2012.07.09 01:35:27,12763,1
2012.07.09 01:35:50,12762,1
2012.07.09 01:36:43,12761,1
2012.07.09 01:37:10,12760,1 2012.07
。 09 01:37:44,12761,1

格式为日期/时间、关闭、音量。

输出示例是（如何解析上述 5 行）：

2012/07/09 01:35 12763 1
2083/08/22 12762 1
2083/08/22 12761 1
2012/07/09 01:37 12760 1
2083/08/22 12761 1

如您所见，有些日期是正确的，有些日期是 2083/08/22。这是怎么发生的，因为所有输入日期都采用相同的格式？

在 c# dll 中，我用于导入的代码是：

```
unsafe public static int GetQuotesEx(string ticker, Periodicity periodicity, int lastValid, int size, Quotation* quotes, GQEContext* context)
    {

        string fileName = "C:\\" + ticker + ".txt";

        System.IO.StreamReader objReader;
        objReader = new System.IO.StreamReader(fileName);
        int i = 0;
        string line = "";

        while((line = objReader.ReadLine()) != null && i < size)
        {
            string[] splitLine = line.Split(',');
            DateTime   dt = Convert.ToDateTime(splitLine[0]);
            float bidprice = float.Parse(splitLine[1]);
            float volume = float.Parse(splitLine[2]);

            quotes[i].DateTime = PackDate(dt);
            quotes[i].Price = bidprice;
            quotes[i].Open = bidprice;
            quotes[i].High = bidprice;
            quotes[i].Low = bidprice;
            quotes[i].Volume = volume;
            i++;
        }

        return i;
    } 
```

还有PackDate函数代码（这个不是我写的，在dll里面）：

```
 /// <summary>
    /// Pack AmiBroker DateTime object into UInt64
    /// </summary>
    static ulong PackDate(DateTime date)
    {
        return PackDate(date, false);
    }

    /// <summary>
    /// Pack AmiBroker DateTime object into UInt64
    /// </summary>
    static ulong PackDate(DateTime date, bool isFeaturePad)
    {
        var isEOD = date.Hour == 0 && date.Minute == 0 && date.Second == 0;

        // lower 32 bits
        var ft = BitVector32.CreateSection(1);
        var rs = BitVector32.CreateSection(23, ft);
        var ms = BitVector32.CreateSection(999, rs);
        var ml = BitVector32.CreateSection(999, ms);
        var sc = BitVector32.CreateSection(59, ml);

        var bv1 = new BitVector32(0);
        bv1[ft] = isFeaturePad ? 1 : 0;         // bit marking "future data"
        bv1[rs] = 0;                            // reserved set to zero
        bv1[ms] = 0;                            // microseconds 0..999
        bv1[ml] = date.Millisecond;             // milliseconds 0..999
        bv1[sc] = date.Second;                  // 0..59

        // higher 32 bits
        var mi = BitVector32.CreateSection(59);
        var hr = BitVector32.CreateSection(23, mi);
        var dy = BitVector32.CreateSection(31, hr);
        var mn = BitVector32.CreateSection(12, dy);
        var yr = BitVector32.CreateSection(4095, mn);

        var bv2 = new BitVector32(0);
        bv2[mi] = isEOD ? 63 : date.Minute;     // 0..59        63 is reserved as EOD marker
        bv2[hr] = isEOD ? 31 : date.Hour;       // 0..23        31 is reserved as EOD marker
        bv2[dy] = date.Day;                     // 1..31
        bv2[mn] = date.Month;                   // 1..12
        bv2[yr] = date.Year;                    // 0..4095

        return ((ulong)bv2.Data << 32) ^ (ulong)bv1.Data;
    } 
```

我想知道的是，我对 PackDate 函数的理解是否正确？也就是说，我是否投入了正确的输入？还是我读取和解析文本文件的方式有问题？这是我怀疑我出错的两个地方。我只是不确定在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T04:45:34.690

问题与`PackDate`- 所有 32 位`bv1`都用于存储时间，并且将整数值`bv1.Data`直接转换为 a`ulong`会导致在填充的第一位时溢出`bv1`，因为 int 的 MSB 用于标志。

这是`PackDate`编码到 bv1 中的内容：

```
Name | Max size (decimal) | Bits required
ft   |   1                |  1
rs   |  23                |  5
ms   | 999                | 10
ml   | 999                | 10
sc   |  59                |  6
====================================
TOTAL                       32 
```

由于“秒”字段占据最高有效位，因此在秒数超过 31 的任何日期都会发生溢出。

为了防止溢出，`PackDate`需要将最后一行更改为：

```
return ((ulong)(uint)bv2.Data << 32) ^ (uint)bv1.Data; 
```

# python - mysql django的NULL和FALSE是否相同？

> ID：11843687
> 
> 赞同：1
> 
> 时间：2012-08-07T10:11:48.877
> 
> 标签：python, mysql, django

> **可能重复：**
> [Django 模型：列的默认值](https://stackoverflow.com/questions/6153482/django-models-default-value-for-column)

我在模型中创建了一个这样的模型字段

```
profile_complete = models.BooleanField(default=False, db_index=True) 
```

现在当我在 mysql dbshel​​l 中看到数据库表时

它像这样向我显示 profile_complete 的信息

```
 Field            | Type         | Null | Key | Default | Extra          |
 profile_complete | tinyint(1)   | NO   | MUL | NULL    |                | 
```

我已经将它设置`Default`为 False 那么为什么它显示`NULL`为默认值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:17:21.577

你的问题已经[回答](https://stackoverflow.com/questions/6153482/django-models-default-value-for-column)了。

当您为模型字段（甚至可以是可调用的）分配默认值时，该值由 Django ORM 为每个对象设置，以防保存时未提供另一个值。

这意味着如果您将通过 DB shell 手动插入一些记录，则不会使用此默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:13:54.687

`NULL`被解释为，`False`而一个设置位被解释为`True`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T10:16:47.227

试试这个：

```
ALTER TABLE profile_complete MODIFY COLUMN profile_complete NOT NULL DEFAULT FALSE; 
```

# spring - servlet 中的自动装配

> ID：11843690
> 
> 赞同：37
> 
> 时间：2012-08-07T10:11:53.163
> 
> 标签：spring, jakarta-ee, servlets, dependency-injection, autowired

我想在 servlet 中使用 spring 自动装配，所以这是我的代码：

```
@Configurable
public class ImageServlet extends HttpServlet {

   @Autowired
   private SystemPropertyDao systemPropertyDao;

   @Override
   public void init() throws ServletException {

   String imagePath = systemPropertyDao.findByID(StaticParam.CONTENT_FOLDER);

} 
```

虽然`SystemPropertyDao`注释为`@Repository`

和我的**applicationContext.xml**：

```
<context:component-scan base-package="com.basepackage" />
<mvc:annotation-driven />
<context:annotation-config />
<context:spring-configured/> 
```

**网页.xml**：

```
 <servlet>
    <servlet-name>imageServlet</servlet-name>
    <servlet-class>com.xeno.basepackage.ImageServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>imageServlet</servlet-name>
    <url-pattern>/myimages/*</url-pattern>
  </servlet-mapping> 
```

有时自动装配有效，有时则无效（对 spring bean systemPropertyDao 的引用为空），谁能告诉我是否遗漏了什么？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-08-07T11:17:53.127

我遵循以下链接中的解决方案，它工作正常： [Access Spring beans from a servlet in JBoss](https://stackoverflow.com/questions/467235/access-spring-beans-from-a-servlet-in-jboss)

```
public class MyServlet extends HttpServlet {

  @Autowired
  private MyService myService;

  public void init(ServletConfig config) {
    super.init(config);
    SpringBeanAutowiringSupport.processInjectionBasedOnServletContext(this,
      config.getServletContext());
  }
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-07T11:14:40.107

从您的 servlet中删除`@Configurable`注释并添加：

```
SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext (this); 
```

在您的 init() 方法的第一行。

# php - PHP多选项搜索查询....？

> ID：11843691
> 
> 赞同：0
> 
> 时间：2012-08-07T10:11:53.647
> 
> 标签：php, mysql

我正在尝试使用搜索框，我创建了一个如下表单：

```
<form method="post" action="search.php">
 <select name="purpose">
 <option value="" selected="selected">-any-</option>
 <option value="For Sale">For Sale</option>
 <option value="For Rent">For Rent</option>
 </select>

 <select name="type">
 <option value="" selected="selected">-any-</option>
 <option value="Bungalow">Bungalow</option>
 <option value="Apartment">Apartment</option>
 </select>

 <select name="location">
 <option value="" selected="selected">-any-</option>
 <option value="Norway">Norway</option>
 <option value="Itley">Itley</option>
    </select>
 <input type="submit" value="Search">
</form> 
```

**搜索.php**

我正在尝试使用这些查询但遇到问题：

```
$purpose=$_POST['purpose'];
$type=$_POST['type'];
$location=$_POST['location']; 
```

如果我像这样输入 AND 查询：

```
SELECT * FROM test WHERE purpose='$purpose' AND location='$location' AND type='$type' 
```

然后它不会一一过滤结果，它显示为空白。

如果我`OR`这样查询：

```
SELECT * FROM test WHERE purpose='$purpose' OR location='$location' OR type='$type' 
```

然后它过滤混合结果。

我想如果全部选择它过滤（目的>>类型>>位置）并且如果选择一个然后按此过滤但确切的结果显示

```
Result not found! 
```

**编辑**在评论中添加更新：

我正在这样做，但它显示错误：

```
$qry = "SELECT * FROM test WHERE 1=1";

if($purpose!="")
  $qry .= " AND purpose='$purpose'";

if($location!="")
  $qry .= " AND location='$location'";

if($type!="")
  $qry .= " AND type='$type'";

while ($row = mysql_fetch_array($sql)) 

echo $row['purpose']; 

echo $row['location']; 

echo $row['type']; 
```

我想要如果不匹配显示结果未找到，否则它会逐一过滤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:20:08.830

在获得变量后放置：

```
$sql = array();

if (!empty($purpose)) {
    $sql[] = "purpose='$purpose'";
}

if (!empty($type)) {
    $sql[] = "type='$type'";
}

if (!empty($location)) {
    $sql[] = "location='$location'";
}

$sql = implode(' AND ', $sql);
$sql = "SELECT * FROM test" . (!empty($sql)?: " WHERE " . $sql: ''); 
```

**编辑：看到你的评论后**

首先，您应该使用 mysql_connect 函数连接到数据库。例如，假设您有这段代码：

```
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');

if (!$link) {
    die('Could not connect: ' . mysql_error());
} 
```

在 $link var 现在你有你的 mysql 句柄。这段代码必须放在您想使用 mysql 连接的每个页面的第一处。一旦你有了 SQL 语句（在我第一次编写的代码中，$sql var），在之后使用它：

```
$result = mysql_query($sql);

if (mysql_num_rows($result) === 0) {
    echo 'Result not found';
}

while ($row = mysql_fetch_array($result)) {
   echo $row['purpose'] . '<br/>';
   echo $row['location'] . '<br/>';
   echo $row['type'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:16:33.937

```
$qry = "SELECT * FROM test WHERE 1=1";

if($purpose!="")
  $qry .= " AND purpose='$purpose'";

if($location!="")
  $qry .= " AND location='$location'";

if($type!="")
  $qry .= " AND type='$type'"; 
```

# php - 按值排序数组PHP

> ID：11843693
> 
> 赞同：0
> 
> 时间：2012-08-07T10:12:02.107
> 
> 标签：php, arrays, string, sorting

我正在使用 usort 函数对数组进行排序。循环工作正常，排序（在某种程度上）也是如此，但是我似乎遗漏了一些关于小数位等的东西。我的功能如下

```
usort($this->view->blogs, 'comparison'); 
```

这是功能。函数调用正常工作，我可以看到我返回了排序数据

```
function comparison($a, $b)
{
    return strcmp($a->cost_per_blog, $b->cost_per_blog);
} 
```

问题在于实际的排序逻辑，例如我返回了如下列表

```
0.09724
0.58344
1.16688
12.05776
120.5776
126.60648
13.22464
132.63536
138.66424
168.80864
18.08664
18.08664
18.67008
180.8664
19.25352
21.10108
22.26796 
```

模式还在继续……看来我没有考虑到 3 位数字的排序。我似乎无法想到我错过了什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:14:44.743

然后不要比较字符串，比较数字：

```
return $a->cost_per_blog - $b->cost_per_blog; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:15:46.620

您将它们作为字符串而不是双精度进行比较。

# ms-office - 是否可以编写一个单词插件或类似的东西来提供自定义邮件合并数据源？

> ID：11843694
> 
> 赞同：0
> 
> 时间：2012-08-07T10:12:03.000
> 
> 标签：ms-office, mailmerge, office-2010

我有一个后端系统，我想将其用作 MS Word 2010 邮件合并的数据源。我的想法是我应该编写一个单词加载项，它提供数据源并通过 Web 服务与我的后端通信。

通常是否可以提供带有单词 add in 的自定义数据源？有没有更好的解决方案？是否可以在 C# 中执行此操作？我在哪里可以找到有关此的 moar 信息？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T21:30:15.537

Word 的开箱即用 Mailmerge 功能可以使用的数据源类型是众所周知的 - 例如

1.  文件类型的数据源，例如 Word 文档、纯文本文件、Excel 工作簿等，
2.  “DDE”源（Access、Excel 和 MS Query，它们又希望使用 ODBC 连接）
3.  ODBC 数据源和
4.  OLE DB 数据源（这些必须符合 AFAIK 未记录的某些标准，例如，我认为提供者必须实现 iCommand）

若要使用内置 Mailmerge，Word 必须打开源代码，并且您不能覆盖 OpenDataSource。

没有接口可以让您直接使用 ADO.NET 数据源或断开连接的记录集。如果你想这样做，你必须“滚动你自己的”邮件合并。您可以考虑的一个起点是 Eric White 的系列文章 - 请参见[此处](http://ericwhite.com/blog/category/open-xml/document-generation-series/)。

否则，您必须确保您的数据源是上述内容之一。对于 ODBC 源，您还必须使用 DSN - 您无法使用无 DSN 的连接字符串进行连接。您可以通过系统或机器 DSN 避免使用“文件”，但实际上分发文件 DSN 可能比在目标机器上创建文件 DSN 更容易。

对于 OLE DB 数据源，您必须拥有某种“连接文件”，即 .udl 或 .odc

最后一点：就 Word 而言，“ODBC”是“旧的”，而“OLE DB”是较新的。但微软前段时间宣布，它正在弃用 OLE DB，转而支持 ODBC。目前尚不清楚这是否*仅*适用于 SQL Server，我也没有看到任何东西告诉我们 Word 将来会支持/支持什么。同时，当然，更多的文档和数据存储在云位置，使用某些 ODBC/OLE DB 驱动程序/提供程序可能无法访问这些位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:50:07.750

Yes you can do it from C# but it is more work than the way you were hoping to do it. If you could use a custom data source this would probably give you best bang-for-your-buck. If you are comfortable with programing (you mentioned C#) then you would write a small program (hopefully small) to control the mail merge process. I've seen JODReports and Docmosis do mail-merge doc-to-doc in the Java space, but I don't know if they have a C# api. If those tools look useful then you could definitely call them from scripts/command-line which might be your next fastest return on effort.
You also have the option of processing DOCX files yourself since they are zip files of XML you can literally open them up and make modifications. That's a lot more programming work though.
Good luck.

# css - 单个元素上的 CSS 类

> ID：11843695
> 
> 赞同：3
> 
> 时间：2012-08-07T10:12:04.300
> 
> 标签：css

您好，我在博客上遇到了一些 CSS 问题。我的 Wordpress 主题在 CSS 文件中有一个帖子样式部分，其中有一个“条目”类，其中为文章区域内的链接定义了“a”属性。我从 css 生成器生成了一个按钮，并将该按钮插入到使用 href 指向其他网站的文章中。我的 CSS 文件有这样的东西，

```
.Entry a{color:black;text-decoration:underline};

.button {background:black;color:white And some other Styling}; 
```

我使用此代码来显示按钮。

```
<a href="some link" class="button">Go to this link</a> 
```

不使用class="button"，链接跟随Entry a 属性。但是当我使用 class 时，它会显示混合了 Entry a 和 class 按钮样式的按钮。我不希望按钮使用 Entry a 属性。有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T10:17:09.790

[您可以使用CSS3`:not`伪类选择器](http://www.w3.org/wiki/CSS/Selectors/pseudo-classes/%3anot)将第一条规则重写为

```
.Entry a:not(.button) {color:black;text-decoration:underline} 
```

这将满足您的需求，但 IE 9 之前的版本不支持它。

真正的跨浏览器解决方案涉及更多：您需要“撤消”`.Entry a`适用于您的`.button`规则的属性。例如：

```
.Entry a {color:black;text-decoration:underline}

.button {color:white;text-decoration:none;background:black} 
```

**更新：我忘记了一些非常重要的事情。**

如果您确实走“撤消”路线，则需要确保“撤消”选择器的[特异性](http://www.htmldog.com/guides/cssadvanced/specificity/)至少等于第一个选择器的特异性。我建议阅读链接页面（不长）以掌握这个概念；在这种特定情况下，要实现这一点，您必须编写`a.button`而不是简单地编写`.button`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T10:16:50.743

为了避免`.Entry a`在使用选择器时应用 CSS 样式，`.button`您应该用选择器覆盖`.button`定义的所有属性`.Entry a`

例如：

```
.Entry a{color:black;text-decoration:underline};

.button {color:white;text-decoration:none;background:black;color:white And some other Styling}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T10:29:17.300

发生这种情况是因为`.Entry a`具有比 更高的特异性`.button`。结果是您的元素从 接收其实际`background`属性，`.button`但其`color`和`text-decoration`属性来自`.Entry a`。

有几种方法可以“解决”这个问题：

*   **增加`.button`选择器的特异性。**
    例如，如果您只`.button`在`a`标签上使用，您可以将选择器更改为`a.button`. 这个新的选择器将具有与（一个标签值和一个类值）相同的特异性`.Entry a`，因此“获胜者”由源顺序决定。如果`a.button`出现`.Entry a`在 CSS 文件中，`a.button`则占上风。
*   **降低`.Entry a`选择器的特异性。**
    你真的只需要定位元素`a`内的标签`.Entry`吗？您可以简单地将其作为所有`a`标签的基本样式吗？如果可以，您可以简单地更改`.Entry a`为`a`. 这个新的选择器只有一个标签值，它比`.button`.
*   **在 上定义额外的选择器`.button`。**
    例如，您可以使用`.button, a.button`第二个选择器接管第一个选择器失败的位置。请注意，当您遇到与其他标签（例如`input`或`button`标签）相同的问题时，这可能会变得非常混乱。
*   **~~使用`!important`.~~**
    永远不要这样做，因为如果你试图创建一个`.big-button`需要覆盖某些`.button`样式的类，你会遇到麻烦。

如果您想了解有关特异性的更多信息，这里有一篇关于它是什么以及如何计算的[好文章。](http://css-tricks.com/specifics-on-css-specificity/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T10:18:01.693

那么在 CSS3 中你可以这样做：

`.Entry a:not(.button)`

这将限制您的`.Entry a`规则影响任何带有`.button`.

如果 CSS3 不是一个选项（即您需要支持 IE <= 8），您将需要覆盖任何无意中被继承的样式。因此，例如，如果您的按钮以来自 的不需要的边框结束，`.Entry a`请在您的规则中覆盖它`.button`，例如

```
.button { border: none; /* more button styles */ } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-07T10:19:26.753

您可以覆盖`.button`类中定义的任何样式`.Entry a`

例如，如果您不希望您的文本被下划线，您可以使用`text-decoration: none`

```
.Entry a{
    color: black;
    text-decoration: underline;
}

a.button {
    background: black;
    color: white;
    text-decoration: none;
    /*And some other Styling*/
} 
```

也不要`};`在 css 中的大括号后使用分号。只需使用大括号关闭`}`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-07T10:18:53.390

最简单的事情是“撤消”您的元素从样式继承的特定样式`.Entry a`。例如，要撤消文本装饰样式，您可以使用`text-decoration:none`.

如果您只需要它适用于较新的浏览器，那么您可以使用@Jon 提到的 not() 选择器。

# c# - DataTable 上的唯一约束

> ID：11843696
> 
> 赞同：3
> 
> 时间：2012-08-07T10:12:09.470
> 
> 标签：c#, asp.net, datatable, constraints

我可以`DataTable`在 C# 中有一个聚集键吗？

我的代码中要求限制 3 列的可能组合是唯一的.....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T10:30:21.647

您真正需要的是**对**您的`DataTable`. *群集键*是 SQL Server 的磁盘功能，不适用于`DataTable`.

查看[有关 DataTable 约束的 MSDN 文档](http://msdn.microsoft.com/en-us/library/st1t2c35.aspx)：

> *UniqueConstraint 对象可以分配给单个列或 DataTable 中的列数组，以确保指定列中的所有数据每行都是唯一的。您可以使用 UniqueConstraint 构造函数为列或列**数组**创建唯一约束。*

所以尝试这样的事情：

```
// this is your DataTable
DataTable custTable ;

// create a UniqueConstraint instance and set its columns that should make up
// that uniqueness constraint - in your case, that would be a set of *three*
// columns, obviously! Adapt to your needs!
UniqueConstraint custUnique = 
   new UniqueConstraint(new DataColumn[] { custTable.Columns["CustomerID"], 
                                           custTable.Columns["CompanyName"] });

// add unique constraint to the list of constraints for your DataTable
custTable.Constraints.Add(custUnique); 
```

这应该对你有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:17:02.640

要使您的列强制执行 UNIQUE 约束，您可以使用

```
DataTable dt = new DataTable();
dt.Columns.Add("UniqueColumn");
dt.Columns["UniqueColumn"].Unique = true; 
```

**解决方案二**

如果您希望某些列中的值组合具有唯一值，您可以试试这个。

```
DataTable dt = new DataTable();
dt.Columns.Add("UniqueColumn1");
dt.Columns.Add("UniqueColumn2");
dt.Columns.Add("UniqueColumn3");
dt.Columns.Add("NormalColumn");

string 
       value1 = string.Empty, 
       value2 = string.Empty, 
       value3 = string.Empty, 
       value4 = string.Empty;

//Logic to take values in string values variables goes here

DataRow[] founded = dt.Select("UniqueColumn1 = '"+ value1+
                              "' and UniqueColumn2 = '"+value2+
                              "' and UniqueColumn3 = '"+value3+"'");
if (founded.Length > 0)
      // Message to say values already exist.
else
      // Add a new row to your dt. 
```

在此代码中，您检查 DT 中存在的数据以强制执行唯一性

# objective-c - 如何在 iPhone 应用程序中进行图像识别

> ID：11843698
> 
> 赞同：7
> 
> 时间：2012-08-07T10:12:15.100
> 
> 标签：objective-c, ios, xcode, image, image-recognition

> **可能重复：**
> [通过相机进行形状识别的 iPhone 库](https://stackoverflow.com/questions/2093143/an-iphone-library-for-shape-recognition-via-the-camera)

我是 iPhone 移动应用程序开发人员，正在寻找图像识别库以集成到我的一个应用程序中，该应用程序应该像谷歌的护目镜功能一样工作。

我看到了[https://www.iqengines.com/](https://www.iqengines.com/)并下载了它的 ios sdk，它运行良好。但它不是免费版本。我正在寻找开源 sdk 。

opencv 在实现这一点方面还有多大用处？因为一些源重定向到 openCV 。

如果有人遇到这个，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T16:05:48.197

是的，OpenCV 可以在 iOS 上运行，并且会为您提供一个很好的工具库来使用。您可以构建自己的`.framework`（有点烦人）或下载一个互联网。

*   要构建一个，请参阅[此 OpenCV 指南](http://aptogo.co.uk/2011/09/opencv-framework-for-ios/)
*   如果您想下载预构建的框架，请[前往那里](https://github.com/aptogo/OpenCVForiPhone)

之后，您应该能够在 iOS 上构建计算机视觉软件，但要小心，图像处理可能会占用大量电力和内存。

OpenCV 有自己的图像 C++ 类，您可能需要将它们来回转换以`UIImage`进行输入和显示

我把这段代码留在这里`NSImage`，你应该找到足够的东西让你改变一下代码`UIImage`

```
//
//  NSImage+OpenCV.h
//

#import <AppKit/AppKit.h>

@interface NSImage (NSImage_OpenCV) {

} 

+(NSImage*)imageWithCVMat:(const cv::Mat&)cvMat;
-(id)initWithCVMat:(const cv::Mat&)cvMat;

@property(nonatomic, readonly) cv::Mat CVMat;
@property(nonatomic, readonly) cv::Mat CVGrayscaleMat;

@end 
```

和

```
//
//  NSImage+OpenCV.mm
//

#import "NSImage+OpenCV.h"

static void ProviderReleaseDataNOP(void *info, const void *data, size_t size)
{
    return;
}

@implementation NSImage (NSImage_OpenCV)

-(CGImageRef)CGImage
{
    CGContextRef bitmapCtx = CGBitmapContextCreate(NULL/*data - pass NULL to let CG allocate the memory*/, 
                                                   [self size].width,  
                                                   [self size].height, 
                                                   8 /*bitsPerComponent*/, 
                                                   0 /*bytesPerRow - CG will calculate it for you if it's allocating the data.  This might get padded out a bit for better alignment*/, 
                                                   [[NSColorSpace genericRGBColorSpace] CGColorSpace], 
                                                   kCGBitmapByteOrder32Host|kCGImageAlphaPremultipliedFirst);

    [NSGraphicsContext saveGraphicsState];
    [NSGraphicsContext setCurrentContext:[NSGraphicsContext graphicsContextWithGraphicsPort:bitmapCtx flipped:NO]];
    [self drawInRect:NSMakeRect(0,0, [self size].width, [self size].height) fromRect:NSZeroRect operation:NSCompositeCopy fraction:1.0];
    [NSGraphicsContext restoreGraphicsState];

    CGImageRef cgImage = CGBitmapContextCreateImage(bitmapCtx);
    CGContextRelease(bitmapCtx);

    return cgImage;
}

-(cv::Mat)CVMat
{
    CGImageRef imageRef = [self CGImage];
    CGColorSpaceRef colorSpace = CGImageGetColorSpace(imageRef);
    CGFloat cols = self.size.width;
    CGFloat rows = self.size.height;
    cv::Mat cvMat(rows, cols, CV_8UC4); // 8 bits per component, 4 channels

    CGContextRef contextRef = CGBitmapContextCreate(cvMat.data,                 // Pointer to backing data
                                                    cols,                      // Width of bitmap
                                                    rows,                     // Height of bitmap
                                                    8,                          // Bits per component
                                                    cvMat.step[0],              // Bytes per row
                                                    colorSpace,                 // Colorspace
                                                    kCGImageAlphaNoneSkipLast |
                                                    kCGBitmapByteOrderDefault); // Bitmap info flags

    CGContextDrawImage(contextRef, CGRectMake(0, 0, cols, rows), imageRef);
    CGContextRelease(contextRef);
    CGImageRelease(imageRef);
    return cvMat;
}

-(cv::Mat)CVGrayscaleMat
{
    CGImageRef imageRef = [self CGImage];
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray();
    CGFloat cols = self.size.width;
    CGFloat rows = self.size.height;
    cv::Mat cvMat = cv::Mat(rows, cols, CV_8UC1); // 8 bits per component, 1 channel
    CGContextRef contextRef = CGBitmapContextCreate(cvMat.data,                 // Pointer to backing data
                                                    cols,                      // Width of bitmap
                                                    rows,                     // Height of bitmap
                                                    8,                          // Bits per component
                                                    cvMat.step[0],              // Bytes per row
                                                    colorSpace,                 // Colorspace
                                                    kCGImageAlphaNone |
                                                    kCGBitmapByteOrderDefault); // Bitmap info flags

    CGContextDrawImage(contextRef, CGRectMake(0, 0, cols, rows), imageRef);
    CGContextRelease(contextRef);
    CGColorSpaceRelease(colorSpace);
    CGImageRelease(imageRef);
    return cvMat;
}

+ (NSImage *)imageWithCVMat:(const cv::Mat&)cvMat
{
    return [[[NSImage alloc] initWithCVMat:cvMat] autorelease];
}

- (id)initWithCVMat:(const cv::Mat&)cvMat
{
    NSData *data = [NSData dataWithBytes:cvMat.data length:cvMat.elemSize() * cvMat.total()];

    CGColorSpaceRef colorSpace;

    if (cvMat.elemSize() == 1)
    {
        colorSpace = CGColorSpaceCreateDeviceGray();
    }
    else
    {
        colorSpace = CGColorSpaceCreateDeviceRGB();
    }

    CGDataProviderRef provider = CGDataProviderCreateWithCFData((__bridge CFDataRef)data);

    CGImageRef imageRef = CGImageCreate(cvMat.cols,                                     // Width
                                        cvMat.rows,                                     // Height
                                        8,                                              // Bits per component
                                        8 * cvMat.elemSize(),                           // Bits per pixel
                                        cvMat.step[0],                                  // Bytes per row
                                        colorSpace,                                     // Colorspace
                                        kCGImageAlphaNone | kCGBitmapByteOrderDefault,  // Bitmap info flags
                                        provider,                                       // CGDataProviderRef
                                        NULL,                                           // Decode
                                        false,                                          // Should interpolate
                                        kCGRenderingIntentDefault);                     // Intent   

    NSBitmapImageRep *bitmapRep = [[NSBitmapImageRep alloc] initWithCGImage:imageRef];
    NSImage *image = [[NSImage alloc] init];
    [image addRepresentation:bitmapRep];

    CGImageRelease(imageRef);
    CGDataProviderRelease(provider);
    CGColorSpaceRelease(colorSpace);

    return image;
}

@end 
```

（[来源](https://stackoverflow.com/questions/8563356/nsimage-to-cvmat-and-vice-versa)）

# php - cakephp 2.x 的文件上传插件，适用于与实施方式不同的模型

> ID：11843703
> 
> 赞同：1
> 
> 时间：2012-08-07T10:12:35.433
> 
> 标签：php, jquery, ajax, file-upload, cakephp-2.1

我是蛋糕新手，并试图通过我的模型“ProfileImage”实现图像上传。

我尝试了几个插件，包括 Meio、Nick's Fileupload、MilesJ，但它们都没有满足我的要求。在这里也检查了相同的主题，但没有人谈论一个单独的模型，或者我做错了什么。[AjaxMultiUpLoad](https://github.com/srs81/CakePHP-AjaxMultiUpload)上传图片，但不保存相关数据。

PS 我发现的大多数插件都是针对较旧的 Cake 版本的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:24:59.697

我不太确定您想要完成什么，但 MilesJ 的插件可与 AJAX 一起使用，并[让您通过模型上传](http://milesj.me/code/cakephp/uploader#uploading-files-through-the-model)。

Miles 在这里给出的回复可能会帮助你[Cakephp Error using Miles J Uploader plugin](https://stackoverflow.com/questions/9512623/cakephp-error-using-miles-j-uploader-plugin/9528530#9528530)

> PS 我发现的大多数插件都是针对较旧的 Cake 版本的。

Meio-Upload 的最后一个版本大约是 10 个月前，但它适用于 CakePHP 2.x。MilesJ 的插件也是如此，它在几个月前进行了最后一次更新。

# javascript - 解析 JSON (ISO8601) 日期字符串

> ID：11843704
> 
> 赞同：5
> 
> 时间：2012-08-07T10:12:36.350
> 
> 标签：javascript, date, iso8601

我可以创建一个 JavaScript 日期对象：

```
var d=new Date('2012-08-07T07:47:46Z');
document.write(d); 
```

这将使用浏览器的时区写入日期。但我应该能够做到（没有'Z'）：

```
var d=new Date('2012-08-07T07:47:46');
document.write(d); 
```

这将返回与上面相同的内容，但根据 ISO8601 标准，没有时区（例如 +01:00）且没有“Z”的字符串，应将日期视为本地时区。所以上面的第二个例子应该把日期时间写成早上 7:47。

我从服务器获取日期时间字符串，我想准确显示该日期时间。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T15:51:27.370

我发现这个脚本运行良好。它扩展了 Date.parse 方法。

[https://github.com/csnover/js-iso8601/](https://github.com/csnover/js-iso8601/)

```
Date.parse('2012-08-07T07:47:46'); 
```

但是，它不适用于`new Date()`构造函数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T10:33:16.667

你是对的，Javascript 不能很好地与 ISO8601 配合使用。

使用此函数转换为所需的格式：

```
function ISODateString(d) {
  function pad(n){
    return n<10 ? '0'+n : n
  }
  return d.getUTCFullYear()+'-'
  + pad(d.getUTCMonth()+1)+'-'
  + pad(d.getUTCDate())+'T'
  + pad(d.getUTCHours())+':'
  + pad(d.getUTCMinutes())+':'
  + pad(d.getUTCSeconds())+'Z'
}
var d = new Date();
print(ISODateString(d)); 
```

取自：[Mozilla](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference/Objects/Date#Example.3A_ISO_8601_formatted_dates)

# objective-c - UIView 在重绘之前不会自行擦除

> ID：11843707
> 
> 赞同：0
> 
> 时间：2012-08-07T10:12:43.740
> 
> 标签：objective-c, uiview

我在自定义 UIView 子类初始化函数中有这个：

`self.clearsContextBeforeDrawing=YES`

但是，每次我调用 时`setNeedsDisplay`，它都会在先前视图的绘图之上绘制，而不是重新绘制。

如何确保 UIView 的绘图上下文在再次绘制时为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:18:26.817

如果您的视图是不透明的，则必须将`backgroundColor`视图的属性设置为某个值以使其正确清除视图。

如果它不是不透明的应该可以工作并且应该用透明的黑色清除视图。

# node.js - 为 node.js 服务器安装 Forever 时出错

> ID：11843711
> 
> 赞同：3
> 
> 时间：2012-08-07T10:12:57.833
> 
> 标签：node.js, webserver, installation, npm, forever

我正在尝试为我的 node.js 服务器安装 Forever，但出现以下错误时`npm install -g forever`，我有`node v0.8.5`并且`npm v1.1.46`

```
npm ERR! fetch failed https://github.com/indexzero/read/tarball/refactor-option
l-streams
npm http GET https://github.com/indexzero/read/tarball/refactor-optional-stream

npm ERR! fetch failed https://github.com/indexzero/read/tarball/refactor-option
l-streams
npm http GET https://github.com/indexzero/read/tarball/refactor-optional-stream

npm ERR! fetch failed https://github.com/indexzero/read/tarball/refactor-option
l-streams
npm ERR! Error: connect ETIMEDOUT
npm ERR!     at errnoException (net.js:782:11)
npm ERR!     at Object.afterConnect [as oncomplete] (net.js:773:19)
npm ERR! If you need help, you may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>

npm ERR! System Windows_NT 6.1.7601
npm ERR! command "C:\\Program Files (x86)\\nodejs\\\\node.exe" "C:\\Program Fil
s (x86)\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "-g" "forever"
npm ERR! cwd C:\Users\TJIA\Desktop\Sommarjobb\Extrauppgifter\demo
npm ERR! node -v v0.8.5
npm ERR! npm -v 1.1.46
npm ERR! syscall connect
npm ERR! code ETIMEDOUT
npm ERR! errno ETIMEDOUT
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     C:\Users\TJIA\Desktop\Sommarjobb\Extrauppgifter\demo\npm-debug.log
npm ERR! not ok code 0 
```

可能是什么问题呢。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T18:49:04.597

这意味着 Github 没有及时响应 npm 指定的 http 请求。

# asp.net-mvc - 在同一视图中检索两个不同 ID 的用户名

> ID：11843714
> 
> 赞同：0
> 
> 时间：2012-08-07T10:13:02.883
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework

我正在尝试将链接用户列表添加到 MVC 视图中，我正在苦苦挣扎！！！

**用户表**有一个 int ID 和一个 varchar 名称

**用户角色表**有 int holderid, int officerid & int role id

**Roles 表**有 int id 和 varchar 描述

用户表中的 ID 链接到用户角色中的持有人 ID 和官员 ID。

角色 id 链接到角色中的 id

从我的控制器中，我将一个用户 ID 传递给一个强类型的用户角色视图。该视图很好地显示了用户 ID 的名称。每个用户 id 在用户角色表中都有多行，每行都有不同的官员 id。

**我的问题**

我的问题在于我无法从用户表中显示与军官相关的名称（或者至少我无法弄清楚如何在视图中执行此操作！！或者实际上是否应该在其他地方完成。 )

我真正想做的是说：

```
@Html.DisplayFor(modelItem => item.users.name.where(item.userid == item.officerid) 
```

但这似乎不起作用。我收到此错误：'string' 不包含'Where' 的定义和最佳扩展方法重载有人可以提供任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:30:02.777

`item.users.name`是一个字符串。你不能`where`在上面使用。而是尝试这样的事情

```
item.users.Where(item.userid == item.officerid).FirstOrDefault().Name 
```

现在这`users`是一张桌子，因此是一个集合。

你没有工作`Intellisense`吗？

# django - 将 zip 上传到 photologue 时出现 TypeError

> ID：11843715
> 
> 赞同：0
> 
> 时间：2012-08-07T10:13:04.267
> 
> 标签：django, photologue

我刚刚安装了 photologue，并尝试上传带有图像的 zip 文件。Django (1.4) 显示以下错误：

```
TypeError at /admin/photologue/galleryupload/add/
coercing to Unicode: need string or buffer, tuple found 
```

我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:42:07.043

MEDIA_ROOT 定义中有错误：行尾多余的逗号：

```
MEDIA_ROOT = os.path.join(SiteDir, "app/media"), 
```

# c# - MonoTorrent 如何只处理指定的文件

> ID：11843717
> 
> 赞同：0
> 
> 时间：2012-08-07T10:13:05.730
> 
> 标签：c#, monotorrent

我只想使用 MonoTorrent 从 torrent 下载指定的文件。

我用`TorrentFile.Priority = Priority.DoNotDownload;`这个 MonoTorrent 不会为我下载无用的文件，但是 MonoTorrent 会创建假的清晰文件，我该如何避免呢？如何避免为具有`DoNowDownload`优先级的文件创建虚假镜像文件？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:36:21.697

避免它的唯一方法是从初始种子文件中排除该文件。那是协议特定的问题 - 用于计算 pices 哈希的假文件。

# sql - 如何获得十进制格式的时差

> ID：11843720
> 
> 赞同：0
> 
> 时间：2012-08-07T10:13:13.250
> 
> 标签：sql, sql-server-2008

我有十进制格式的时间，我需要有所作为

我试过如下

```
declare @hours decimal(10,5)  
set @hours = 6.25 --6 Hrs and 25 mins  
declare @hours1 decimal(10,5)  
set @hours1 = 5.45 --5 Hrs and 45 mins  

select CONVERT(varchar(10), CONVERT(int, cast(floor(@hours) as char(2)))-CONVERT(int, cast(floor(@hours1) as  char(2))))+ '.'+   CONVERT(varchar(10),CONVERT(int, cast(floor(100*(@hours - floor(@hours))) as char(2)))- 
 CONVERT(int, cast(floor(100*(@hours1 - floor(@hours1))) as char(2)))) 
```

对于此示例，输出为 1.-20。我需要像 .40 这样的输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:53:59.897

您确实应该将时间值存储为日期时间而不是小数。但是，您可以通过以下方式对其进行转换：

```
declare @hours decimal(10,2)  
set @hours = 6.25 --6 Hrs and 25 mins  
declare @hours1 decimal(10,2)  
set @hours1 = 5.45 --5 Hrs and 45 mins  

declare @hours2 decimal(10,2)  
set @hours2 = 9.45 --8 Hrs and 45 mins  
declare @hours3 decimal(10,2)  
set @hours3 = 7.45 --7 Hrs and 45 mins  

select abs(cast(datediff(minute
                 , cast(replace(@hours, '.', ':') as time)
                 , cast(replace(@hours1, '.', ':') as time))/100.0 as decimal(10, 2))) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/bb30e/11)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:29:04.887

为什么不使用此页面中的日期或时间类型[http://msdn.microsoft.com/en-us/library/ms186724.aspx](http://msdn.microsoft.com/en-us/library/ms186724.aspx)

然后，您可能只想以仅需要小时和分钟的格式打印结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T10:32:12.507

试试这个：

```
declare @hours decimal(10,5)  
set @hours = 6.25 --6 Hrs and 25 mins  
declare @hours1 decimal(10,5)  
set @hours1 = 5.45 --5 Hrs and 45 mins  

select (cast(LEFT(CAST(@hours as varchar),CHARINDEX('.',CAST(@hours as varchar))-1) as int)*60+
       cast(left(RIGHT(CAST(@hours as varchar),LEN(CAST(@hours as varchar))-CHARINDEX('.',CAST(@hours as varchar))),2) as int))-
       (cast(LEFT(CAST(@hours1 as varchar),CHARINDEX('.',CAST(@hours1 as varchar))-1) as int)*60+
       cast(left(RIGHT(CAST(@hours1 as varchar),LEN(CAST(@hours1 as varchar))-CHARINDEX('.',CAST(@hours1 as varchar))),2) as int)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T10:36:53.827

```
declare @totalhours decimal(10,5)
declare @totalhours1 decimal(10,5)
set @totalhours = CONVERT(decimal(5,0),@hours) * 60 + (@hours - CONVERT(decimal(5,0),@hours)) * 100
set @totalhours1 = CONVERT(decimal(5,0),@hours1) * 60 + (@hours1 - CONVERT(decimal(5,0),@hours1)) * 100
select (@totalhours - @totalhours1) / 100 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T10:52:29.620

```
DECLARE
  @input1 DECIMAL(10,5),  @input2 DECIMAL(10,5),  @output DECIMAL(10,5)

SELECT
  @input1 = 6.25,
  @input2 = 5.45

-- Step 1; convert the inputs to a sensible representation
SELECT
  @input1 = FLOOR(@input1) + ((@input1 - FLOOR(@input1)) / CAST(0.6 AS DECIMAL(10,5))),
  @input2 = FLOOR(@input2) + ((@input2 - FLOOR(@input2)) / CAST(0.6 AS DECIMAL(10,5)))

-- Step 2; calculate the difference 
SELECT
  @output = @input1 - @input2

-- Step 3; conver the output back to the original representation
SELECT
  @output = FLOOR(@output) + ((@output - FLOOR(@output)) * CAST(0.6 AS DECIMAL(10,5))) 
```

# c - 类型转换

> ID：11843723
> 
> 赞同：0
> 
> 时间：2012-08-07T10:13:27.663
> 
> 标签：c, pointers, int, type-conversion

有人可以告诉我这些代码行是做什么的吗

```
*(a++)  = (int)((value >> 16) & 0xFF) ;
*(a++)  = (int)((value >> 8) & 0xFF) ;  
*(a++)  = (int)((value & 0xFF)) ; 
```

我知道它会检查值，如果它比 16 大得多，它会将其转换为 int 类型，如果它比 8 小得多，也会这样做。但是
`& 0xFF`and 有什么作用`*(a++)`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:16:12.393

> 我知道它会检查价值

它不检查任何东西，它不像`<<`数学中的符号，意思是“小得多”。要打破这一行：

```
*(a++)  = (int)((value >> 16) & 0xFF); 
```

*   ( `>>`)向右[移动16 次](http://en.wikipedia.org/wiki/Bitwise_operation#Arithmetic_shift) `value`
*   ( `&`)将结果与[相加](http://en.wikipedia.org/wiki/Binary_and#AND)`0xFF`，从而丢弃左边的所有内容
*   将结果存储在指向的地址`a`
*   增加指针，`a`指向某个“下一个”元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:15:14.233

（值>>16）

不，它并不大。

```
It is shift right by 16 bits. 
```

但是将它除以 2 恰好 16 倍使它比以前小得多。

```
val&0xff makes a solution if it is divisible by 256\. For example: if val&0xff is different than zero, than it is not divisible by 256 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T10:18:22.187

```
*(a++)  = (int)((value >> 16) & 0xFF) ; 
```

就好像：

```
aIntValue = value/65536;
aIntBalue = a%256; 
```

* * *

```
*(a++)  = (int)((value >> 8) & 0xFF) ; 
```

就好像：

```
aIntValue = value/256;
aIntValue = a%256; 
```

* * *

```
*(a++)  = (int)((value & 0xFF)) ; 
```

就好像：

```
aIntValue = a%256; 
```

在代码的末尾，任一代码将 aIntValut 分配给指向指针“a”的值，然后将指针移动到下一个元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T10:41:45.017

鉴于：

```
char data[10];

uint32_t value = 0x61626364; // 'abcd'

char *a = data;
*(a++) = (int)((value >> 24) & 0xFF);
*(a++) = (int)((value >> 16) & 0xFF);
*(a++) = (int)((value >> 8) & 0xFF);
*(a++) = (int)(value & 0xFF);
*(a++) = ':';
*((uint32_t *)a) = value;
a+=4;
*(a++) = 0;

printf("%s\n", data); 
```

我得到（在我的英特尔盒子上，这是一个小端系统）：

```
abcd:dcba 
```

所以这是确保整数的字节采用独立于平台的形式（选择大端作为字节格式）。

现在，对于：

```
*(a++) = (int)((value >> 16) & 0xFF); 
```

我们有：

```
0x61626364 -- value
0x00006162 -- value >> 16 : shifted 2 bytes
0x00000062 -- (value >> 16) & 0xFF : last byte only 
```

# microsoft-dynamics - 在 Dynamics ax 2009 采购申请行上更改 PurchPrice

> ID：11843725
> 
> 赞同：0
> 
> 时间：2012-08-07T10:13:36.753
> 
> 标签：microsoft-dynamics, dynamics-ax-2009, ax

我想在采购申请中插入新产品并编辑采购价格，但该字段是只读的。

我尝试解锁 PurchReqTable 表单中的字段，但它已经被锁定。

我试图找到一些锁定字段的运行时方法，但我不走运。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T23:18:46.163

查看 PurchReqTable 表单中的以下方法：

```
void setFieldAccess()
{
    boolean allowEdit = purchReqFormMode == PurchReqFormMode::ShowAll ||
                        purchReqLine.LineType == PurchReqLineType::Category ||
                        isUserTaskOwner ||
                        isUserApprovalOwner;
    ;

    purchReqLine_ds.object(fieldnum(PurchReqLine,PriceUnit)).allowEdit(allowEdit);
    purchReqLine_ds.object(fieldnum(PurchReqLine,PurchUnit)).allowEdit(allowEdit);
    purchReqLine_ds.object(fieldnum(PurchReqLine,PurchPrice)).allowEdit(allowEdit);
    purchReqLine_ds.object(fieldnum(PurchReqLine,LineDisc)).allowEdit(allowEdit);
    purchReqLine_ds.object(fieldnum(PurchReqLine,LinePercent)).allowEdit(allowEdit);
    purchReqLine_ds.object(fieldnum(PurchReqLine,PurchMarkup)).allowEdit(allowEdit);

    purchReqLine_ds.object(fieldnum(PurchReqLine,CurrencyCode)).allowEdit(purchReqLine.RecId != 0);
    purchReqLine_ds.object(fieldnum(PurchReqLine,LineAmount)).allowEdit(!purchReqLine.isCatalogItem());
} 
```

注意如果当前行包含非目录项，LineAmount 是如何被禁用的。更改数据源或表上的设置将在运行时被此代码覆盖。我希望这有帮助。

# javascript - 检查用户是否可以上传文件的最佳方法是什么？

> ID：11843727
> 
> 赞同：5
> 
> 时间：2012-08-07T10:13:37.623
> 
> 标签：javascript, jquery, html, css

我想知道检查输入 type="field" 字段是否可供用户使用的最佳方法是什么？

至少 iPhone 和 iPad 不允许用户上传文件，而不是使用后端代码检查用户代理，我想听听您认为最简约的解决方案是什么？

目的是检查文件上传是否可用，如果没有，设置 display:none; 对于包含表单的整个 div。

这可以只用css完成吗？jQuery？

我更喜欢一个不明确不检查 if(iOS) 而是进行更通用检查的解决方案。

先感谢您！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-07T10:26:14.760

到目前为止，处理这个问题的最优雅的方法可能是使用[Modernizr](https://github.com/Modernizr/Modernizr)，它在其最新版本中允许您使用以下 JS 语句测试文件输入支持：

```
if(Modernizr.fileinput) {
    //file input available!
} else {
    //No file input :(
} 
```

或者，如果您不希望将 Modernizr 包含在您的项目中，则有一种简单的方法来测试它，它只涉及 3 行代码：

```
var elem = document.createElement('input');
elem.type = 'file';
return !elem.disabled; 
```

如[this SO answer](https://stackoverflow.com/a/11468116/1329367)中所述。

# objective-c - 用 objectAtIndex 分配的 UIView 分配了太多内存

> ID：11843728
> 
> 赞同：1
> 
> 时间：2012-08-07T10:13:38.947
> 
> 标签：objective-c, ios5, memory-management, uiview, automatic-ref-counting

在这个问题上坐了几个小时之后（我真的觉得自己像龙蛋上的鸡）我来这里问。

问题是：我的计时器有一个异步队列（使用 mach_absolute_time() 创建），在一段时间间隔后将 NSNotification 提供给 defaultCenter，然后运行我的方法。在 run 方法中，有一个用于查找视图交集的方法调用。我最近切换到 ARC，因为它似乎是一个非常好的主意。现在我有点后悔，因为在 ARC 之前，这段代码确实正确分配和解除分配，但现在它只分配自己。也许我错过了一些手动解除分配的代码，但是，当我尝试将视图设置为 nil 时，它根本没有帮助。此外，在 Allocations 中，由于 intersect 方法，malloc 4.00 KB 不断增加，这就是我问的真正原因，因为一段时间后，它达到了限制，我收到内存警告并且我的应用程序崩溃。

我需要这种方法的原因是我遍历了带有障碍物的视图子视图。当另一个视图与某些子视图的距离达到限制时，我运行一些代码。

所以现在有一些代码：这是分配这么多内存的方法，正是它的第一行（在 ARC 之前，它更长，但我减少了它以获得创建分配的东西）。当我删除它时，无限分配停止。再次说明一下：此方法每秒被调用很多次，并且在与主队列不同的队列上。

```
- (BOOL)obstacleIntersect {
    UIView *view = [[self subviews] objectAtIndex:0];
    return NO;
} 
```

这就是它在分配中的样子： [错误分配](http://img36.imageshack.us/img36/7216/mallocations.png)

感谢您的帮助和阅读，因为您刚刚回答了这个长长的问题。

编辑：这就是代码在所有功能等方面的外观。我只用一行发布上面的代码的原因是因为现在我不在乎它是否像它应该的那样工作，我只想解决分配问题问题。抱歉误导。至于 uiview 粒子，它是与已经提到的子视图相交的视图。此代码还产生相同的无限分配。

```
- (BOOL)obstacleIntersect {
    for(UIView *view in [[[self subviews] objectAtIndex:0] subviews])
    {
        if (sqrt(pow(abs(particle.center.x - view.center.x), 2) + pow(abs(particle.center.y    - view.center.y), 2)) < particle.frame.size.width / 2 - 1) 
        {            
            return YES;   
        }
    }
    return NO;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:27:08.927

如果此代码在运行循环的一次迭代中被多次调用，并且 中有很多项目`subviews`，则您可能会遇到自动释放池的问题 - 例如，子视图数组是自动释放的，尽管我可以'不明白为什么 ARC 不立即将其删除。您可以尝试将此方法的调用包装在它自己的自动释放块中：

```
BOOL intersects;
@autoreleasepool { intersects = [self obstacleIntersect];}
// do something with intersects... 
```

尽管我坦率地承认这是一个猜测。

有关本地自动释放池的一些文档以及为什么要使用它，请参阅[此处。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)

# apache-flex - ActionScript 对象名称（按变量）

> ID：11843729
> 
> 赞同：0
> 
> 时间：2012-08-07T10:13:40.307
> 
> 标签：apache-flex, actionscript

在这个例子中：

```
var poets:Array = new Array();
poets.push({name:"Angelou", born:"1928"});
poets.push({name:"Blake", born:"1757"});
poets.push({name:"cummings", born:"1894"});
poets.push({name:"Dante", born:"1265"});
poets.push({name:"Wang", born:"701"}); 
```

“名字”和“出生”有可能成为变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:27:20.477

正如@RIAstar 指出的那样，它们是“关联数组”的属性——你的动态对象`{}`：

```
var poets:Array = new Array();
poets.push({"name":"test","born":"1928"});
poets.push({name:"Angelou", born:"1928"});
poets.push({name:"Blake", born:"1757"});
poets.push({name:"cummings", born:"1894"});
poets.push({name:"Dante", born:"1265"});
poets.push({name:"Wang", born:"701"});

trace(poets[0].name,poets[0].born); 
```

或者如果是更扩展的版本：

```
var prop1:String = "name";
var prop2:String = "born";
var poets:Array = [];
poets[0] = {};
poets[0][prop1] = "test2";
poets[0][prop2] = "1900";

trace(poets[0].name,poets[0].born); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T17:07:10.313

如果您想创建一个返回给定属性名称的数据的函数，您可以执行以下操作：

```
 public function getDataByAttribute(fieldName:String):Array {
            return poets.map(
                function (item:*, index:int, array:Array):String {
                    return item[fieldName];                         
                }   
            );
        }

        // sample call  
        var results:Array = getDataByAttribute("born"); 
```

您可以修改它以满足您的需要。

要探索 Array 的功能，请参阅此[博客](http://www.onebyonedesign.com/tutorials/array_methods/)（不是我的）。

# css - CSS 属性溢出：隐藏导致内部 div 出现在主 div 下方

> ID：11843730
> 
> 赞同：0
> 
> 时间：2012-08-07T10:13:47.023
> 
> 标签：css, overflow, hidden

如果超过一定宽度，有没有办法让我的`#inner_div`停止出现在 v 后面？`#main_di`我尝试从 css 中删除`overflow:hidden`from `#main_div`，但这会导致背景`#main_div`加载非常缓慢，所以如果可能的话，我想找到另一个解决方案。谢谢

**主 div css：**

```
#main_div {
  -moz-border-radius:5px;
  -moz-box-shadow: 0 3px 3px rgba(255, 255, 255, 0.1), 0 3px 0 #BBBBBB, 0 4px 0 #AAAAAA, 0 5px 3px #444444;
   background: none repeat scroll 0 0 #F6F6F6;
   border: 1px solid #FFFFFF;
   margin: 20px auto;
   overflow: hidden; 
   padding: 10px;
   width: 970px;
} 
```

**内部 div css：**

```
.inner_div{
   font-size:12px;
   font-weight:normal;
   font-style:normal;
   margin: 5px 0px 0px 10px;
   border-style: solid;
   border-width: 1px;
   border-color: #000000;
   z-index: 0;
   visibility: hidden;
   position: absolute;
   /* white-space: nowrap;*/
   text-align: left;
   padding: 5px 5px 5px 5px;
   width:200px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:21:51.187

而不是使用`overflow:hidden`，您应该使用新的“micro clearfix”。

去这里： http: [//nicolasgallagher.com/micro-clearfix-hack/](http://nicolasgallagher.com/micro-clearfix-hack/)

在您的标记中，您只需在#main_div 上添加类“cf”

# xamarin.ios - 与原生代码相比，android 的 monotouch 和 mono 有多好？

> ID：11843732
> 
> 赞同：1
> 
> 时间：2012-08-07T10:13:50.180
> 
> 标签：xamarin.ios, xamarin.android, xamarin

我做了一个小调查，与原生代码相比，android 的 monotouch 和 mono 有多好？我需要的是数字，也许还有其他一些关于单点触控和单声道对于 android 的优缺点的信息......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:11:19.247

我没有比较数据，但我已将 MonoTouch 和 MonoDroid 用于 OpenGL 应用程序。

您制作的应用程序类型可能会对您产生影响。如果您想创建一个跨平台应用程序，我个人会选择 Mono，因为它最终可能会更有效率。

我必须说 MonoTouch 优于 MonoDroid，可能是因为 .NET 到 java 互操作必须在 Android 上进行（并且 Android 上的 Java 接缝很慢）[至少 android 2.2+ 设备]。

如果您需要速度优化，还有 Mono.Simd。

**更新：“Mono.Simd”在 MonoTouch 或 MonoDroid 上不可用。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T06:55:03.623

我知道这不是一个真正的答案，但在我看来，这是最好的。您可以获得本机应用程序以及大量代码重用。有很多东西可以帮助您做出决定，但也可以查看 Xamarin 博客。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T13:16:16.417

这里有一个链接可以帮助你：

[http://www.koushikdutta.com/2009/01/dalvik-vs-mono.html](http://www.koushikdutta.com/2009/01/dalvik-vs-mono.html)

基于那个mono比java dalvik快得多！

# php - 检索网页的第 30 个单词？

> ID：11843738
> 
> 赞同：-3
> 
> 时间：2012-08-07T10:13:58.993
> 
> 标签：php

我只是想知道如果我想检索网页的第 30 个单词该怎么做，或者这是否可能。它可以是第 25 个或任何数字，但我的困境在于如何做到这一点。这甚至可能吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:27:46.983

使用 file_get_contents() 获取页面，然后 explode() 将其拆分为一个数组（指定空格作为分隔符）并执行 my_exploded_array[x] 其中 X 是您想要的单词。请注意，file_get_contents 返回的是 HTML，而不是呈现的页面。

# php - 不期望 Android 上传响应消息

> ID：11843742
> 
> 赞同：0
> 
> 时间：2012-08-07T10:14:14.813
> 
> 标签：php, android, httpconnection

这是我的安卓代码：

```
try
        {
        FileInputStream fileInputStream = new FileInputStream(new File(pathToOurFile3) );

    URL url = new URL(urlServer);
    connection = (HttpURLConnection) url.openConnection();

    // Allow Inputs & Outputs
    connection.setDoInput(true);
    connection.setDoOutput(true);
    connection.setUseCaches(false);

    // Enable POST method
    connection.setRequestMethod("POST");

    connection.setRequestProperty("Connection", "Keep-Alive");
    connection.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

    outputStream = new DataOutputStream( connection.getOutputStream() );
    outputStream.writeBytes(twoHyphens + boundary + lineEnd);
    outputStream.writeBytes("Content-Disposition: form-data; name=\"profile\";filename=\"" + pathToOurFile3 +"\"" + lineEnd);
    outputStream.writeBytes(lineEnd);

    bytesAvailable = fileInputStream.available();
    bufferSize = Math.min(bytesAvailable, maxBufferSize);
    buffer = new byte[bufferSize];

    // Read file
    bytesRead = fileInputStream.read(buffer, 0, bufferSize);

    while (bytesRead > 0)
    {
    outputStream.write(buffer, 0, bufferSize);
    bytesAvailable = fileInputStream.available();
    bufferSize = Math.min(bytesAvailable, maxBufferSize);
    bytesRead = fileInputStream.read(buffer, 0, bufferSize);
    }

    outputStream.writeBytes(lineEnd);
    outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

    // Responses from the server (code and message)
    int serverResponseCode = connection.getResponseCode();
    String serverResponseMessage = connection.getResponseMessage();
    Log.d("serverResponseCode"+"", serverResponseCode +"");
    Log.d("serverResponseMessage", serverResponseMessage);

    fileInputStream.close();
    outputStream.flush();
    outputStream.close();
    }
    catch (Exception ex)
    {
    Log.d("upload", ex.toString());//Exception handling
    } 
```

这是php代码：

```
<?php
$target_path  = "./";
$target_path = $target_path . basename( $_FILES['profile']['name']);
if(move_uploaded_file($_FILES['profile']['tmp_name'], $target_path)) {
 echo "The file ".  basename( $_FILES['profile']['name']).
 " has been uploaded";
} else{
 echo "There was an error uploading the file, please try again!";
}
?> 
```

该文件可以上传到服务器。但是，响应消息与我预期的不同。
从 Logcat`serverResponseCode is 200`和`serverResponseMessage is OK`
但是从 php，我想得到类似`" XXX has been upload"`.
有谁知道怎么发消息？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:34:43.643

我终于得到了答案：

```
InputStream is = connection.getInputStream();
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        String stringResponse = sb.toString();
        Log.d("response string:", stringResponse); 
```

# java - 如何在 Eclipse 中通过 groovy 使用 JUnit？

> ID：11843743
> 
> 赞同：0
> 
> 时间：2012-08-07T10:14:16.110
> 
> 标签：java, groovy, junit

我是 JUnit 的新手，遵循[本教程](http://www.vogella.com/articles/JUnit/article.html)，但需要对我的测试用例提出一些建议和理解

我在一个文件夹中有一些 xml（每个 3MB-6MB），对于每个 xml，我需要测试一些标签是否包含某些值，有时将该值与特定结果匹配。

那么，对于每个测试，如何在循环内执行所有 @Test 函数呢？我是否需要在循环内正常调用 @Test 函数（因为它们是自动调用的）？

请帮助我在这种情况下理解 JUnit。谢谢

Junit 测试用例

```
public class SystemsCheck {

    def fileList

    @Before
    public void setUp() throws Exception {

        def dir = new File("E:\\temp\\junit\\fast")
        fileList = []

        def newFile=""
        dir.eachFileRecurse (FileType.FILES) { file ->
            fileList << file
          }

        fileList.each {
            //how should i test all @Test with it.text
            println it.text
          }     
    }

    @Test 
    void testOsname(){
        NixSystems ns=new NixSystems()
        /*checking if tag is not empty*/
        //assertEquals("Result","",ns.verifyOsname())
    }

    @Test
    public void testMultiply(){
        NixSystems ns=new NixSystems()
        assertEquals("Result", 50, ns.multiply(10, 5))
    }

}

class NixSystems {

    public def verifyOsname(xml){
        return processXml( xml, '//client/system/osname' )
    }

    public def multiply(int x, int y) {
        return x * y;
    }

    def processXml( String xml, String xpathQuery ) {
        def xpath = XPathFactory.newInstance().newXPath()
        def builder     = DocumentBuilderFactory.newInstance().newDocumentBuilder()
        def inputStream = new ByteArrayInputStream( xml.bytes )
        def records     = builder.parse(inputStream).documentElement
        xpath.evaluate( xpathQuery, records )
      }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:37:55.313

JUnit 为这种测试提供了专门的功能——[参数化 JUnit 测试](http://ourcraft.wordpress.com/2008/08/27/writing-a-parameterized-junit-test/)。这基本上以简洁、标准化的方式完成了您已经完成的工作。

下面是代码`Java`- 可以很容易地转换为`Groovy`.

```
@RunWith(Parameterized.class)
public class TestCase {
    private Type placeholder1;
    private Type placeholder2;
    ...
    public TestCase(Param1 placeholder1, Param2 placeholder2, ...) {
        this.placeholder1 = placeholder1;
    }

    @Parameters
    public static Collection<Object[][]> data() {
        //prepare data
        //each row is one test, each object in row is placeholder1/2... for this test case 
    }

    @Test
    public void yourTest() {...}
} 
```

在[org.junit.runners.Parameterized](http://junit.sourceforge.net/javadoc/org/junit/runners/Parameterized.html)的 JavaDocs 中，您可以找到斐波那契数测试的示例。

# python - 获取 post_save 信号中字段的先前值

> ID：11843747
> 
> 赞同：7
> 
> 时间：2012-08-07T10:14:39.743
> 
> 标签：python, django, signals

我在 django 中有一个 post 信号，我需要在其中访问字段的先前值：

```
post_save.connect(callback_function_postsave, sender=Media) 
```

我知道理想情况下我应该为此使用 pre_save ：

```
pre_save.connect(callback_function_presave, sender=Media)

def callback_function_presave(sender, instance,*args,**kwargs):
try:
    old_value = sender.objects.get(pk=instance.pk).field
except sender.DoesNotExist:
    return 
```

但是，必须加入`old_value`，`post_signal`因为基于它，我必须决定是否进行第 3 方 api 调用。我无法进行 api 调用，`pre_save`因为 api 正在使用相同的数据库并期望提交更新的值。

我能想到的一种可能方法是将 old_value 添加到实例本身，然后可以通过 post_save 访问：

```
def callback_function_presave(sender, instance,*args,**kwargs):
try:
    instance.old_value = sender.objects.get(pk=instance.pk).field
except sender.DoesNotExist:
    return

def callback_function_postsave(sender, instance,*args,**kwargs):
try:
    old_value = instance.old_value
except:
    print "This is a new entry" 
```

有没有更好的方法来实现这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T10:49:24.120

不幸的是 post_save 信号不会给你旧值（[post_save](https://github.com/django/django/blob/master/django/db/models/base.py#L614)）。因此将旧值存储在模型上似乎是一个很好的解决方案。

我会这样写 pre_save ：

```
def save_old_value(sender, instance, *args, **kwargs):
    if instance.id:
        instance.old_value = instance.__class__.objects.get(id=instance.id).old_value 
```

# url-rewriting - 网址改写建议

> ID：11843749
> 
> 赞同：0
> 
> 时间：2012-08-07T10:14:59.943
> 
> 标签：url-rewriting, seo

我有一个核心 php 网站，用户可以在其中登录、更新个人资料、添加朋友等等。用户个人资料位于类似`"mysite.com/userProfile.php?id=####"`. 我的客户想让它对 SEO 友好，比如`"mysite.com/justin"`.

我知道我们可以通过在“.htaccess”文件中编写规则来做到这一点。如果是这样，我需要更改所有存在用户配置文件链接的地方。实际上这非常重要，因为我需要修改近 250 多个 php 文件。

是否有任何捷径可以在不修改现有代码库中的链接的情况下执行 SEO 友好 URL。

希望这会有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:31:44.287

我有同样的问题！如果没有“变态”（我的意思是用美丽的方式），就不可能让它工作。不需要编辑 250 多个文件，您只需使用查找/替换功能并将其应用于文件夹。这很容易，并为您提供所需的结果。

确保在执行此操作之前进行备份！因为您将无法恢复它，除非您保持所有文件都处于打开状态。

为什么不简单地找到`/userProfile.php?id=`并替换为`/userName`. 它会快速高效吗？

为了使用 userName 而不是 userID，您必须编写一个小的 php 函数来提取与 userID 对应的 userName。

除此之外，您可能会应用棘手的解决方案，但我个人不建议这样做！

# android - 如何将自定义横幅添加到 Phonegap 应用程序？

> ID：11843752
> 
> 赞同：0
> 
> 时间：2012-08-07T10:15:10.610
> 
> 标签：android, mobile, cordova, banner

我正在尝试将自定义横幅添加到我通过 Phonegap 构建的 Android 应用程序中。

我的服务器上有一个 Web 脚本，它将旋转横幅（我自己的以及来自不同网络的横幅，如 inneractive 和 inmobi）。此脚本将输出带有横幅和链接的 HTML 代码，与它在 Web 上的工作方式相同。

我是网络开发人员，拥有移动网络应用程序。我尝试使用 iframe 将内容和横幅放在不同的框架中，但这不起作用。

我尝试了来自不同广告网络的 SDK，但他们只显示他们的广告。是否有任何插件、sdk 或任何其他方式将您自己的横幅放入应用程序？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:53:21.073

嗯，您可以尝试使用 jQuery Ajax 请求横幅并在您从服务器获得答案后将其输出吗？我猜 HTML 是在服务器上输出的，并且必须以某种方式发送到设备？

```
$.ajax({
       type: 'GET',
       dataType: 'text',
       url: 'requestTheServerSideScript(e.g. controller,method,webservice)',
       success: processResult(htmlString);
 });

function processResult(htmlString){
     $('.theBanner').html(htmlString);
} 
```

您可能必须将字符串包装在 stringyfied JSON 对象中，您可以使用以下 jQuery 插件来实现：[jQuery JSON](http://code.google.com/p/jquery-json/)

# ios - 滚动到新添加的uitableviewcell ios

> ID：11843757
> 
> 赞同：0
> 
> 时间：2012-08-07T10:15:18.060
> 
> 标签：ios, uitableview, scroll

我正在使用重新加载数据动态地将行添加到表视图中。我需要表格视图滚动，新添加的单元格位于视图顶部。在哪种情况下我应该这样做以及如何做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:20:32.893

快速浏览[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)显示：

```
- (void)scrollToRowAtIndexPath:(NSIndexPath *)indexPath atScrollPosition:(UITableViewScrollPosition)scrollPosition animated:(BOOL)animated 
```

您只需告诉它哪一行是新的，它就会滚动到那一行。

# html - IE 7 和 8 中的导航 UL

> ID：11843761
> 
> 赞同：0
> 
> 时间：2012-08-07T10:15:26.447
> 
> 标签：html, css, navigation

我创建了一个几乎完成的网站，并在 Firefox、chrome、safari、opera 和 IE 9 中对其进行了测试，它们都可以工作并且看起来都一样。

我使用 Adob​​e 的浏览器实验室在 IE8 和 IE7 上测试了该站点，并且某些 CSS3 已损坏，这必然会发生，因为它不受支持，但是，我的导航似乎中断了，我不知道为什么我正在使用CSS2 声明。

要查看我的导航在这里工作是代码的链接：

[http://jsfiddle.net/6SkkP/](http://jsfiddle.net/6SkkP/)

或者这里是代码：

```
<div id="container">
<!--Start Navigation Section -->
    <header>
        <a href="index.html"><img src="http://www.jrk-design.co.uk/gl/images/logo.png" width=245 height=64 alt="Goldie Locks Logo" /></a> 
        <nav>
            <ul id="main_nav">
                <li><a href="index.html" id="index">home<p> a warm welcome</p></a></li>
                <li><a href="hair.html" id="hair">hair<p>hair extensions</p></a></li>
                <li><a href="beauty.html" id="beauty">beauty<p>beauty treatments</p></a></li>
                <li><a href="contact.php" id="contact">contact<p>drop me a line</p></a></li>     
            </ul>
        </nav>
    </header>
    </div>​ 
```

和我的 CSS：

```
header {
width: 910px;
height: 85px;
}

header img {
margin: 24px 0px 0px 0px;
}

nav {
height: 85px;
float: right;
text-align: center;
}

nav ul#main_nav {
padding: 0;
margin: 0;
}

nav li {
display: inline-block;
width: 132px;
height: 85px;
text-decoration: none;
text-transform: uppercase;
}

nav li a {
display: block; 
width: 132px;
height: 30px;
color: #b06e28;
text-decoration: none;
text-transform: uppercase;
font-size: 16px;
padding: 55px 0px 0px;  
}

nav li a p {
font-style: italic;
font-size: 14px;
color: #858585;
text-transform: lowercase;
padding: 0;
margin: 0;
}

a#index {
background-image: url(http://www.jrk-design.co.uk/gl/images/index_nav.png);
}

a#hair {
background-image: url(http://www.jrk-design.co.uk/gl/images/hair_nav.png);
}

a#beauty {
background-image: url(http://www.jrk-design.co.uk/gl/images/beauty_nav.png);
}

a#contact {
background-image: url(http://www.jrk-design.co.uk/gl/images/contact_nav.png);
}

ul#main_nav li a:hover {
color: #4c4c4e;
text-decoration: none;
text-transform: uppercase;
font-size: 16px;
background-position: 0;
}

body.index ul#main_nav li a#index {
background-position: 0;
}

body.hair ul#main_nav li a#hair {
background-position: 0;
}

body.beauty ul#main_nav li a#beauty {
background-position: 0;
}

body.contact ul#main_nav li a#contact {
background-position: 0;
} 
```

这是我的导航应该是什么样子：

![导航确定](../Images/7ef3d92e4c30e360286eb503fc4a876d.png)

以下是它在 IE7 中的呈现方式：

![IE7](../Images/3e538ed2491effe5357fc99ef844e0a3.png)

和 IE8：

![IE8](../Images/1f0ac1e5cc06a4b88d5fb08c8f082d2e.png)

另外，我正在使用 HTML5 shiv

```
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script> 
```

任何人都可以对我的情况有所了解吗？

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:38:56.823

我不确定 IE7/8 是否处理 nav 标签。尝试添加 shiv 以查看是否可以解决它。

```
<!--[if lt IE 9]>
<script src="dist/html5shiv.js"></script>
<![endif]--> 
```

如果没有，您可能需要将 nav 更改为然后将 nav 的 css 更新为 .nav

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:02:07.190

如果上述方法不起作用，请不要使用 nav 标签，只需添加 # 使其成为 div 即可。然后把html放到div中，

```
<div id="nav"> 
```

等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T11:06:23.357

以上两个答案是对的我想再添加一件事

```
nav li {
display: inline-block;} 
```

ie7不支持该`inline-block`属性所以试试

`nav li {display:block; float:left}`或者一些回退到ie7

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T11:09:38.510

如果我是你，我会使用一个`div`作为导航的容器

# android - 浏览和上传功能在 Android 中有效吗？

> ID：11843763
> 
> 赞同：3
> 
> 时间：2012-08-07T10:15:37.960
> 
> 标签：android, cordova, file-upload

我有一个应用程序，其中有一个按钮**浏览**，onclick 应该打开我的 android 手机中存在的所有文件和文件夹。我怀疑这是否可以浏览和选择要上传的文件？我观察到`<input type="file">`由于安全原因，它在android中不起作用。谁能告诉我一些关于如何从移动设备浏览文件以上传的好的工作示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:32:53.797

这是完整的代码::

**AndroidExplorer.class**

```
public class AndroidExplorer extends ListActivity {

private List<String> item = null;
private List<String> path = null;
private String root="/";
private TextView myPath;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    myPath = (TextView)findViewById(R.id.path);
    getDir(root);
}

private void getDir(String dirPath)
{
    myPath.setText("Location: " + dirPath);

    item = new ArrayList<String>();
    path = new ArrayList<String>();

    File f = new File(dirPath);
    File[] files = f.listFiles();

    if(!dirPath.equals("/"))
    {

        item.add(root);
        path.add(root);

        item.add("../");
        path.add(f.getParent());

    }

    for(int i=0; i < files.length; i++)
    {
            File file = files[i];
            path.add(file.getPath());
            if(file.isDirectory())
                item.add(file.getName() + "/");
            else
                item.add(file.getName());
    }

    ArrayAdapter<String> fileList =
        new ArrayAdapter<String>(this, R.layout.row, item);
    setListAdapter(fileList);
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {

    File file = new File(path.get(position));

    if (file.isDirectory())
    {
        if(file.canRead())
            getDir(path.get(position));
        else
        {
            new AlertDialog.Builder(this)
            .setIcon(R.drawable.icon)
            .setTitle("[" + file.getName() + "] folder can't be read!")
            .setPositiveButton("OK", 
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub
                        }
                    }).show();
        }
    }
    else
    {
        new AlertDialog.Builder(this)
            .setIcon(R.drawable.icon)
            .setTitle("[" + file.getName() + "]")
            .setPositiveButton("OK", 
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub
                        }
                    }).show();
    }
}
} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<TextView
android:id="@+id/path"
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
/>
<ListView
android:id="@android:id/list"
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
/>
<TextView
android:id="@android:id/empty"
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:text="No Data"
/>
</LinearLayout> 
```

# c++ - 如何在 C++ 中调用 EnumSystemLocales()

> ID：11843769
> 
> 赞同：0
> 
> 时间：2012-08-07T10:16:00.680
> 
> 标签：c++, winapi

如何在同一个类中调用 C++ 中的 EnumSystemLocales() 函数？我的回调函数是：

```
BOOL CALLBACK CLanguage::EnumLocalesProc(LPWSTR lpLocaleString) {

    RETAILMSG(TRUE, (L"[GUI] LOCALE: %s!\n\r", lpLocaleString));

    return TRUE;

} 
```

通话`EnumSystemLocales(&CLanguage::EnumLocalesProc, LCID_INSTALLED)`无效！

**编辑：** 它是 Windows Embedded Compact 7。错误在于语法：

> 错误 2 错误 C2664: 'EnumSystemLocalesW' : 无法将参数 1 从 'BOOL (__cdecl CL​​anguage::* )(LPWSTR)' 转换为 'LOCALE_ENUMPROCW' {log="C:\WINCE700\osdesigns\UVVIS2\UVVIS2\GUI\bldsys.日志(32)"} c:\wince700\osdesigns\uvvis2\uvvis2\gui\clanguage.cpp 24

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:37:22.707

正如@MSalters 所指出的，`BOOL (__cdecl CLanguage::* )(LPWSTR)`是指向成员函数的指针，与`LOCALE_ENUMPROCW`.

由于程序不知道您的方法属于哪个*类的****实例**，`CLanguage`*因此无法在需要时正确调用它。大多数 API 将尝试通过允许`void*`传递一个附加参数来解决这个问题，该参数可以指向所述类。

您需要将您的`EnumLocalesProc`功能移出`CLanguage`课堂。如果您想保留组织范围，请尝试将回调移动到*命名空间*。

```
namespace CApiInterface
{
    BOOL CALLBACK EnumLocalesProc(LPWSTR lpLocaleString) {...}
}

// Register callback. Note that address of (&) operator is not required.
EnumSystemLocales(CApiInterface::EnumLocalesProc, LCID_INSTALLED) 
```

您需要在函数期间访问类的其他*成员变量这一事实使其变得困难。*`EnumLocalesProc`还有其他方法可以处理这种情况。

您可以尝试制作一个**单例**处理程序类吗？

```
BOOL CALLBACK EnumLocalesProc(LPWSTR lpLocaleString) 
{
    return CLanguage::GetInstance().EnumLocalesProc(lpLocaleString);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:59:20.143

另一个问题是 C API 不支持指向成员函数的指针`(CLanguage::*)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-07T11:51:31.307

```
#include <windows.h>
#include <tchar.h>
#include <stdio.h>
#include <vector>
#include <string>

typedef std::vector<std::basic_string<TCHAR>> tLocales;
std::vector<std::basic_string<TCHAR>> g_locales;

BOOL CALLBACK MyLocaleEnumProc(LPTSTR szLocaleString)
{
  g_locales.push_back(szLocaleString);
  return TRUE;
}
int _tmain()
{
 // Get all locales
  EnumSystemLocales(&MyLocaleEnumProc, LCID_INSTALLED);

 // Print out all locales
for(tLocales::const_iterator i=g_locales.begin(); i != g_locales.end(); i++)
{
   _tprintf(_T("Locale: %s\r\n"), i->c_str());
}
 return 0;
} 
```

# c# - 局部视图中呈现的模型属性值不正确

> ID：11843772
> 
> 赞同：6
> 
> 时间：2012-08-07T10:16:10.280
> 
> 标签：c#, asp.net-mvc, razor, partial-views, asp.net-mvc-viewmodel

我有一个强类型的局部视图，其模型包含与父页面的视图模型同名的属性。由于某种原因，渲染引擎正在渲染父视图模型值，而不是预期值（嗯，至少是我期望的值！）

父页面视图模型提取：

```
public class ParentPageViewModel
{
    public int Id { get; set; } // problem property
    ...
    public IEnumerable<ChildViewModel> Children { get; set; }
} 
```

子页面视图模型提取：

```
public class ChildViewModel
{
    public int Id { get; set; } // problem property
    ...
} 
```

父页面提取（Razor）：

```
@model ParentPageViewModel
...
@foreach (var item in Model.Children)
{
    @Html.Partial("MyPartialView", item)
}
... 
```

部分视图提取：

```
@model ChildViewModel
...
<form ...>
    @Html.HiddenFor(m => m.Id) // problem here - get ParentPageViewModel.ID not ChildViewModel.Id
</form>
... 
```

所以基本上在我的渲染输出中，我的隐藏字段具有父视图模型元素的值，而不是传递给局部视图的值。这肯定是由名称引起的，因为将 @ChildViewModel.Id@ 的名称更改为 @ChildViewModel.ChildId@ 使其按预期工作。有趣的是，在调试器中检查视图模型值时，我确实看到了正确的值；只有渲染的输出是错误的。

有没有办法绕过这个或“正确”的方式来做我想做的事情（我在表格中呈现迷你表单以进行 ajax 验证/发布对表格行的更新）

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-07T11:23:24.217

我认为将您的电话更改为此将解决问题：

```
@Html.Partial("MyPartialView", item, new ViewDataDictionary()) 
```

子视图正在从 ViewData 字典中获取值 - 因此这会将新字典传递给子视图（hattip danludwig）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T11:18:32.357

找到了解决方案，只需手动创建隐藏字段，例如：

```
<input type="hidden" name="Id" value="@Model.Id" /> 
```

而不是使用 Html.HiddenFor。

（我暂时不会将此标记为已回答，以防有任何其他解决方案或任何人都可以解释该问题）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-26T08:08:40.677

我知道这是一个旧帖子。但我想，既然我在遇到同样的问题时来到这里，我也不妨做出贡献。我的问题有点不同。就我而言，在触发需要刷新整个页面/视图的部分视图操作后，主视图的 ID 不正确。我用 ModelState.Clear 解决了这个问题

```
ModelState.Clear();
return View("Maintenance", model);  //call main view from partial view action 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T11:18:09.817

在 Views/Shared/EditorTemplates 中创建一个名为 ChildViewModel.cshtml 的文件。将您的部分视图放入该文件中：

在 ~/Views/Shared/EditorTemplates/ChildViewModel.cshtml

```
@model ChildViewModel
...
<form ...>
    @Html.HiddenFor(m => m.Id)
</form>
... 
```

然后，像这样渲染它：

```
@model ParentPageViewModel
...
@foreach (var item in Model.Children)
{
    @Html.EditorFor(m => item)
}
... 
```

或者，如果您希望将视图保留为部分视图而不是编辑器模板，请使用[Simon 的答案](https://stackoverflow.com/a/11844891/304832)。

# https - Wireshark 不捕获 HTTPS 数据包？

> ID：11843773
> 
> 赞同：6
> 
> 时间：2012-08-07T10:16:11.203
> 
> 标签：https, wireshark, packet-capture

Wireshark 未捕获 https 数据包。我试过过滤它们，`portmap.port == 443`但没有显示 https 数据包，但是，http 数据包被捕获得很好。

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T02:06:39.050

`portmap`指的是[ONC RPC](http://en.wikipedia.org/wiki/Open_Network_Computing_Remote_Procedure_Call) [端口映射](http://en.wikipedia.org/wiki/Portmap)器协议。这仅用于 ONC RPC 协议，例如 NFS、YP 和 portmapper/rpcbind 协议本身。

HTTP 和 HTTP-over-SSL/TLS，即“https”，*不*使用 ONC RPC，尤其是不使用 portmapper。它们在 TCP 上运行，因此您需要一个显示过滤器，例如`tcp.port == 443`. （如果您想要一个*捕获*过滤器，那么您捕获的唯一流量是进出端口 443 的流量，`port 443`将是等效的捕获过滤器。）

# java - 在 JPA 中将记录插入外部表

> ID：11843776
> 
> 赞同：1
> 
> 时间：2012-08-07T10:16:20.763
> 
> 标签：java, jpa

我有来自数据库表的实体，例如： ![在此处输入图像描述](../Images/8a2e5883a0f3131faebdff965308d19c.png)

你看他们的关系是一对多**Dot中的****IDDot**是一个标识列。**MaSoDuThuong**中的**IDMS**是一个身份列。通常，我可以将一条记录插入两个表中，但在其他页面中，当我知道 IDDot 的值时，**我**需要将一条记录插入**MaSoDuThuong**表中。请帮我做！

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:41:26.167

```
Dot dot = entityManager.getReference(Dot.class, dotId);
MaSoDuThuong m = new MaSoDuThuong();
m.setDot(dot);
em.persist(m); 
```

就如此容易。******

# objective-c - 从图像中获取“时间戳”

> ID：11843778
> 
> 赞同：1
> 
> 时间：2012-08-07T10:16:32.520
> 
> 标签：objective-c, ios

我只是想知道是否有办法获取图片的时间戳，或者该信息是否甚至被写入图像文件，例如从拍摄时间开始。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T10:55:55.167

导入 imageIO 框架并尝试使用带有时间戳的图像。这是[一个](http://www.opanda.com/cn/iexif/images/gg_gps.jpg)，将其添加到您的项目中。

```
#import <ImageIO/ImageIO.h>

NSString *path = [[NSBundle mainBundle] pathForResource:@"gg_gps" ofType:@"jpg"];
NSURL *imageFileURL = [NSURL fileURLWithPath:path];
CGImageSourceRef imageSource = CGImageSourceCreateWithURL((CFURLRef)CFBridgingRetain(imageFileURL), NULL);

// or you can get your imageSource this other way:
// NSData *data =  [NSData dataWithContentsOfFile:path];
// CGImageSourceRef imageSource = CGImageSourceCreateWithData((__bridge CFDataRef)data, NULL);

NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:NO], (NSString *)kCGImageSourceShouldCache, nil];
CFDictionaryRef imageProperties = CGImageSourceCopyPropertiesAtIndex(imageSource, 0, (CFDictionaryRef)CFBridgingRetain(options));
CFDictionaryRef exifDic = CFDictionaryGetValue(imageProperties, kCGImagePropertyExifDictionary);
if (exifDic){
    NSString *timestamp = (NSString *)CFBridgingRelease(CFDictionaryGetValue(exifDic, kCGImagePropertyExifDateTimeOriginal));
    if (timestamp){
        NSLog(@"timestamp: %@", timestamp);
    } else {
        NSLog(@"timestamp not found in the exif dic %@", exifDic);
    }
} else {
    NSLog(@"exifDic nil for imageProperties %@",imageProperties);
}
CFRelease(imageProperties); 
```

# sql-server - 从 MS CRM 中提取行会导致重复

> ID：11843782
> 
> 赞同：0
> 
> 时间：2012-08-07T10:16:40.503
> 
> 标签：sql-server, ssis, dynamics-crm

从我们的 MS CRM 中提取行时，我遇到了一个奇怪的问题。让我解释一下流程：

我有一个 SSIS 包，它从 CRM 中提取数据并将其加载到另一个数据库。从这个数据库中，数据被转换并加载到数据仓库中。

如果这个 SSIS 包在 CRM 插入/更新许多行的同时运行，我会得到一个奇怪的结果：在 SSIS 中提取的数据（使用普通的 OLD DB 源）包含重复的行（虽然 ModifiedOn 日期不同）。

如果我在 SSMS 中手动运行从 CRM 中提取数据的完全相同的查询，我不会得到重复。

所以.... 似乎来自 SSIS 的连接以某种方式读取更新的行 - 在更新之前和之后（某种脏读）。

以前有人经历过吗？

非常感谢/Nicolaj

# php - php传递对象的对象：引用还是值？

> ID：11843787
> 
> 赞同：2
> 
> 时间：2012-08-07T10:17:01.193
> 
> 标签：php, zend-framework, object, reference

大家好，我正在使用zend框架（但我认为这无关紧要）和php5，我只想修改一个对象的对象

```
 public function saveSite($post) {
    $form = new Diff_Form_Download();
    $subform = new Diff_Form_DownloadSubform();
    $form = $this->view->form;
    $newSite = 0;
    $sitesRecord = new Diff_Model_Sites();
    $debugString = null;

    if (is_array($post)) {
        $subform = $this->getSubformByPost($post);
        $debugString = $subform->getContent();
        echo $debugString;

        //new site instertion
        if (is_null($subform)) {
            $subform = $form->getSubForm('NewSite');
            $newSite = 1;
        }

        $values = reset($subform->getValues());

       $sitesRecord = Doctrine_Core::getTable('Diff_Model_Sites')->findOneBy('idSite', $values['idSite']);
        if ($sitesRecord) {
            $sitesRecord->idSite = $values['idSite']; //useless but necessary to make Doctrine understand to use update?
        } else { //if the record is not present instantiate a new object (otherwise save() will not work
            $sitesRecord = new Diff_Model_Sites();
        }

        $sitesRecord->content = $subform->getContent(); //$values['content'];
        $sitesRecord->newHtml = $subform->getContent();
        $sitesRecord->url = $values['url'];
        $sitesRecord->shortName = $values['shortName'];
        $sitesRecord->lastChanged = date("Y-m-d H:i:s");
        $sitesRecord->pollingHours = $values['pollingHours'];
        $sitesRecord->minLengthChange = $values['minLenghtChange'];

        if (Zend_Auth::getInstance()->hasIdentity()) { //save the owner
            $sitesRecord->idOwner = Zend_Auth::getInstance()->getIdentity()->idOwner; //retrieve the owner
            $sitesRecord->save();
        } else {
            throw new Exception("your session have expired: \n please login again");
        }
    }
}

/**
 * return the calling subform
 * @param type $post
 * @return type 
 */
public function getSubformByPost($post) {
    $form = new Diff_Form_Download();
    $form = $this->view->form;
    $subform = new Diff_Form_DownloadSubform();
    $subformName = "site" . $post['idSite'];
    $subform = $form->getSubForm($subformName);

    return $subform;
}

public function refreshOneDiff($post) {
     $debugString;
    if (is_array($post)) {
        $form = new Diff_Form_Download();
        $form = $this->view->form;

        $subform = new Diff_Form_DownloadSubform();
        $subform = $this->getSubformByPost($post);

        if (!$subform)
            $subform = $this->view->form->getSubformByPost('NewSite');
        $url = $subform->getUrl();
        $idSite = $subform->getIdSite();

        $crawler = new Crawler();
        $newpageContent = $crawler->get_web_page($url);
        $siteRecord = new Diff_Model_Sites();
        $siteRecord = $subform->getSiteRecord();
        if ($siteRecord) //check if the record is not null
            $oldpageContent = $siteRecord->get('content');
        else
            $oldpageContent = null;

        $differences = $this->getDiff($oldpageContent, $newpageContent);

        if (!is_null($differences)) {
            $siteRecord->content = $newpageContent;
            $subform->setContent($newpageContent);
            $subform->setContentDiff($differences);
            $subform->setSiteRecord($siteRecord);
            $subform = $this->getSubformByPost($post);
            $debugString = $subform->getContent();
        }

            //echo $debugString;

        $sitePresence = Doctrine_Core::getTable('Diff_Model_Sites')->findOneBy('idSite', $idSite);
        if ($sitePresence) {
            //$this->saveSite($post);
            $this->debugtry($post);
        }
    } else {

    }
} 
```

基本上我在这里做的是：1）从视图中获取表单 2）从表单中获取子表单（我们称之为 SubformX） 3）从 SubformX 中获取对象“siteRecordX” 4）更改“siteRecordX”的值" 5) 调用函数 saveRecord() 6) 在此函数中重新获取相同的 SubformX 并回显对象 siteRecordX 的值

令人惊讶的是，如果我更改 SubformX 的变量，它将保持这种状态，如果我更改 SubformX 的对象的变量，它将保持不变（如果我检索 SubformX）。看起来，即使 SubformX 是通过引用传递的，它的子对象也不相同，它是按值传递的，因此它们会随着函数的上下文而消失。你能帮我么？谢谢

编辑我仍然无法解决这个问题，也无法理解：这是子表单的构造函数：

```
 public function __construct($site = null, $options = null) {
    if ($site instanceof Diff_Model_Sites) {
        $this->_shortName = $site->get('shortName');
        $this->_url = $site->get('url');
        $this->_content = $site->get('content');
        $this->_idSite = $site->get('idSite');
        $this->_siteRecord = $site;
        $this->_lastChanged = $site->get('lastChanged');
    }parent::__construct($options);} 
```

而这是我用来设置值的 SubformX 的功能。

```
public function setContent($contentText) {
    $this->_siteRecord->content = $contentText;
    $this->_content = $contentText;
} 
```

这是我调用以获取值的子表单的功能

```
 public function getContent() {
    if (isset($this->_siteRecord)) {
        //return $this->_content;
        return $this->_siteRecord->content;
    }
} 
```

通过注释行，我能够检索更新的值，而不是第二个。这对我来说是一个真正的谜，因为我在完全相同的点以完全相同的方式设置和获取它们，我无法理解其中的区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T22:45:02.530

您的`_siteRecord`属性是一个 ORM 对象（Doctrine，它出现了）。所以它的数据可能有一些不符合引用类型对象标准的行为。`__get`它肯定对and有一些覆盖`__set`。它还使用缓存。这些东西是保持数据库模型交互正常工作所必需的，但它们可能会混淆应该是引用类型和值类型。（见： http: [//www.codinghorror.com/blog/2006/06/object-relational-mapping-is-the-vietnam-of-computer-science.html](http://www.codinghorror.com/blog/2006/06/object-relational-mapping-is-the-vietnam-of-computer-science.html)）

PS：在您的构造函数中，您使用：

```
$this->_content = $site->get('content');
$this->_siteRecord = $site; 
```

但是在您的 getContent() 中，您使用：

```
$this->_siteRecord->content; 
```

这种差异可能是问题的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:00:02.937

Thank you all guys. It was Doctrine caching. I have not investigated further the problem, but after getting rid of Doctrine everything works fine. I have lost one entire day after this issue. Moreover today I have lost another day for another curious problem related to Doctrine. It seems that each time you gather data from your db Doctrine decode them for you (just like the php function utf8_decode($data). Of course if you get the data and then put it back in the db again it will result in a total mayhem of coding and decoding. This is enough. I still think that ORM are great programming tools but simply Doctrine is not. I will not rest in peace since I'll have it eliminated from my program. I will use Zend_Db library instead. Which I have mostly already done without regret and without facing the above-mentioned Doctrine's problems. Again thanks to Seth Battin and Dave Random for the help and patience to understand my noob-coding.

# wcf - 使用“UriTemplate”的端点不能与“System.ServiceModel.Description.WebScriptEnablingBehavior”一起使用

> ID：11843790
> 
> 赞同：13
> 
> 时间：2012-08-07T10:17:06.407
> 
> 标签：wcf

在使用 REST 服务开发 WCF 时，我收到“使用 'UriTemplate' 的端点不能与 'System.ServiceModel.Description.WebScriptEnablingBehavior' 一起使用”错误。我是 WCF 新手。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-04-08T07:57:40.907

在您的 web.config 中，您必须将“enableWebScript”替换为“webHttp”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-04T04:32:02.070

简短的回答是你不能两者兼得。有关更多信息，请参阅 [http://kaushikghosh12.blogspot.com.au/2012/10/a-known-error-in-wcf-restful-service.html](http://kaushikghosh12.blogspot.com.au/2012/10/a-known-error-in-wcf-restful-service.html)。

# javascript - iframe 未生成但具有警报的相同代码有效

> ID：11843792
> 
> 赞同：1
> 
> 时间：2012-08-07T10:17:14.607
> 
> 标签：javascript, iframe

我正在尝试编辑一个页面，以便提交表单只是生成一个 iframe。如果我使用此代码：

```
window.onload = function() {
  var formItem = document.getElementsByTagName("form")[2];
  formItem.setAttribute('action', '');
  formItem.addEventListener('submit', createIframe, false);
}

function createIframe(){
  var ifrm = document.createElement("IFRAME"); 
  ifrm.setAttribute("src", "http://127.0.0.1/myIframe.html"); 
  ifrm.style.width = "50%"; 
  ifrm.style.height = "50%"; 
  document.body.appendChild(ifrm); 
} 
```

然后在提交表单时不会生成 iframe。但是，如果我将 createIframe() 函数设为：

```
function createIframe(){
    alert(1); 
    } 
```

然后在提交表单时创建警报。因此它一定是我的 iframe 代码的问题，但我不知道是什么！有没有人有什么建议？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:26:25.133

您忘记取消`form`的默认行为。

```
function createIframe(e){
    e.preventDefault();
    //... 
```

如果没有这个，表单将使用空`action`属性将页面提交给自身。

[**小提琴**](http://jsfiddle.net/ult_combo/eXuMg/1/)

[`event.preventDefault()`MDN 参考](https://developer.mozilla.org/en-US/docs/DOM/event.preventDefault)

# c# - 对于 C# 编程，建议我了解 C 和 C++，或者它只是碍事？

> ID：11843797
> 
> 赞同：-2
> 
> 时间：2012-08-07T10:17:22.730
> 
> 标签：c#, c++, c

为了让我学习 C++，我必须了解 C？为了让我学习 C#，我必须了解 C++ 和 C？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:20:56.477

您无需了解 C 或 C++ 即可学习 C#。如果你已经了解它们，一些 C# 语法会很熟悉，但是为了学习 C# 而学习 C/C++ 绝对是在浪费你的时间。

就是说，C 和 C++ 不是不好掌握的语言，但是如果您要学习它们，请为它们自己而学习它们，而不仅仅是为了学习 C#。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T10:28:58.547

不，您不需要先学习这些语言中的任何一种，如果您不会编程，您可能会发现 c# 更容易学习，尽管有些人认为您应该先学习 c 或 c++，因为它会迫使您自己管理内存。

对于 c 和 c++：

[http://www.durofy.com/programming/10-major-differences-between-c-and-c/](http://www.durofy.com/programming/10-major-differences-between-c-and-c/)

[http://www.cplusplus.com/](http://www.cplusplus.com/)

对于 C#：

[http://www.learnvisualstudio.net/series/visual_csharp_2010_express_edition_for_absolute_beginners/?gclid=CPPr_dem1bECFQRTfAodDCAAbQ](http://www.learnvisualstudio.net/series/visual_csharp_2010_express_edition_for_absolute_beginners/?gclid=CPPr_dem1bECFQRTfAodDCAAbQ)

[http://msdn.microsoft.com/en-us/library/aa288436(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288436(v=vs.71).aspx)

[http://msdn.microsoft.com/en-us/centrum-xna.aspx](http://msdn.microsoft.com/en-us/centrum-xna.aspx)

就我个人而言，我会说选择 c#，它是一门很好的语言，而且很容易上手（在我看来），一旦你掌握了基础知识，你就可以尝试使用 xna 游戏工作室制作游戏，它应该会让你感兴趣。

祝你好运 ：）

# javascript - Javascript ajax成功函数多次触发

> ID：11843800
> 
> 赞同：3
> 
> 时间：2012-08-07T10:17:34.557
> 
> 标签：javascript, ajax

在我的项目中，我正在开发一个函数，该函数使用`.ajax()`. 当用户单击删除按钮时，我已经创建了我的函数。如您所见，有几行，每一行都有自己的删除按钮。

现在，当用户第一次单击其中一个时，会出现一个弹出模式，询问他/她是否确定要删除该项目。当他/她单击是时，弹出窗口消失并且行淡出。这一切都很完美，但是......

当您单击第二个删除按钮**而不**刷新页面时，JavaScript 会触发当前请求的删除 (and `id`) + de 前一个。如果您第三次执行此操作，它将触发当前一次和前两次。

我试图清空 current ，但是当成功函数被触发`var $(this).attr('data-page-id');`时它仍然做同样的事情。`.ajax()`

```
$('a.btn-page-delete').click(function() {

    var curPageId = $(this).attr('data-page-id');

    $('#delete-page').modal('show');

    $('a#action-confirm').click(function() {

        $.ajax({

            type       : 'POST',
            url        : '/pages/async/delete',
            dataType   : 'json',
            data       : { page : curPageId },
            success    : function(data) {

                $('#delete-page').modal('hide');

                console.log(curPageId);
                console.log(data);

            },
            error   : function() {}

        });

    });

}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T10:20:45.073

当您的*外部*单击事件处理程序被调用时

```
$('a.btn-page-delete').click(function() { 
```

每次都会有`.bind()`另一个点击事件处理程序`$('a#action-confirm')`。因此，每次执行外部事件时，您都会再添加一个事件处理程序。

我相信您可以并且应该以更好的方式重新构建和构建它，但在目前的状态下，您唯一的选择是`.unbind()`/`.off()`内部点击处理程序，例如

```
 $('a#action-confirm').off('click').click(function() { 
```

这将删除之前通过 jQuery 绑定的任何单击事件处理程序。

参考：[`.off()`](http://api.jquery.com/off/)

# android - 使用 GPS 在 android 中找出用户的速度

> ID：11843801
> 
> 赞同：8
> 
> 时间：2012-08-07T10:17:34.993
> 
> 标签：android, location

我试图找出用户的速度，而用户正在移动设备。在这里，我关注了一个带有示例代码的链接。即：[这里](http://code.google.com/p/krvarma-android-samples/source/browse/#svn/trunk/SpeedDemo)是SpeedDemo。

问题是，通过使用`location.getSpeed()`方法，我们正在寻找速度。因此，为此我更改了设备中的位置值，但每次`location.getspeed()`仅返回“0”的值。为什么会发生，甚至更改位置本身。

任何人都可以知道这件事吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T10:21:52.793

您必须跟踪位置更新，并且当该方法`onLocationChanged(Location location)`触发时`location.getSpeed();`，如果您的手机实际上正在移动，您可以调用它会给您正确的速度。

但是如果你在模拟器上测试它，并通过模拟器控制器发送位置，它总是返回 0。

**`Updated with Example`**

```
public class LocationService implements LocationListener {

    LocationService locationService;
    LocationManager locationManager;
    Location lastLocation;
    private final String TAG = "LocationService" ;

    private final String MOCK_LOCAION_PROVIDER = "FAKE_PROVIDER";

    LocationService(Context ctx) {
        LocationManager locationManager = (LocationManager) ctx.getSystemService(Context.LOCATION_SERVICE);
        String mocLocationProvider = MOCK_LOCAION_PROVIDER;

        if (locationManager.getProvider(mocLocationProvider) != null) {
            locationManager.removeTestProvider(mocLocationProvider);
        }
        locationManager.addTestProvider(mocLocationProvider, false, false, false, false, true, true, true, 0, 5);

        locationManager.setTestProviderEnabled(mocLocationProvider, true);
        locationManager.requestLocationUpdates(mocLocationProvider, 0, 0,
        this);

        try {

            List<String> data = new ArrayList<String>();
            InputStream is = ctx.getAssets().open("data.txt");
            BufferedReader reader = new BufferedReader(new InputStreamReader(is));
            String line = null;
            while ((line = reader.readLine()) != null) {

                data.add(line);
            }
            // Log.e(TAG, data.size() + " lines");

            new MockLocationProvider(locationManager, mocLocationProvider, data).start();

        } catch (IOException e) {

            e.printStackTrace();
        }

    }

    class MockLocationProvider extends Thread {

        private List<String> data;
        private LocationManager locationManager;
        private String mocLocationProvider;
        private String LOG_TAG = "MockLocationProvider";

        public MockLocationProvider(LocationManager locationManager, String mocLocationProvider, List<String> data) throws IOException {

            this.locationManager = locationManager;
            this.mocLocationProvider = mocLocationProvider;
            this.data = data;
        }

        @Override
        public void run() {

            for (String str : data) {

                try {

                    Thread.sleep(5000);

                } catch (InterruptedException e) {

                    e.printStackTrace();
                }

                // Set one position
                String[] parts = str.split(",");
                Double latitude = Double.valueOf(parts[0]);
                Double longitude = Double.valueOf(parts[1]);
                float speed = Float.valueOf(parts[2]);
                Location location = new Location(mocLocationProvider);
                location.setLatitude(latitude);
                location.setLongitude(longitude);
                location.setSpeed(speed);
                // location.setAltitude(altitude);

                // Log.d(LOG_TAG, location.toString());

                // set the time in the location. If the time on this location
                // matches the time on the one in the previous set call, it will
                // be
                // ignored
                location.setTime(System.currentTimeMillis());

                locationManager.setTestProviderLocation(mocLocationProvider, location);
            }
        }
    }

    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        Log.e(TAG, "onLocationChanged");

        // Get Location Speed Here
        Log.d(TAG, "Speed " +location.getSpeed());

    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub
        // Log.e(TAG, "onProviderDisabled : "+provider);
    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub
        // Log.e(TAG, "onProviderEnabled : "+provider);
    }

    public void onStatusChanged(String provider, int status, Bundle arg2) {
        // TODO Auto-generated method stub
        // Log.e(TAG, "onStatusChanged : "+status);
    }
} 
```

上面的代码实际上是一个定位服务类，当你创建这个类的一个实例时，它注册了一个假的定位服务（除了 GPS 和网络）提供者，并通过给定的文件输入一些假的位置参数。

下面是data.txt文件，`latitude,longitude,speed`上面的类读取这个data.txt文件并在位置输入假的纬度、经度和速度，以及改变位置的触发时间也是`Thread.sleep()`调用实现的。

**数据.txt 文件**

```
24.856449265609735,67.04308920288086,1.64
24.856749265609735,67.04408920288086,7.64
24.856949265609735,67.04508920288086,11.64
24.857649265609735,67.04716920288086,13.64
24.857949265609735,67.04736920288086,12.64
24.857949265609735,67.04742520288086,8.64
24.857949265609735,67.04747020288086,4.64
24.856749265609735,67.04408920288086,6.11
24.856949265609735,67.04508920288086,2.12
24.857249265609735,67.04608920288086,1.1
24.856949265609735,67.04508920288086,2.13
24.857249265609735,67.04608920288086,0.6
24.856949265609735,67.04508920288086,1.19
24.857249265609735,67.04608920288086,1.6
24.856949265609735,67.04508920288086,2.12
24.857249265609735,67.04608920288086,1.15
24.857849265609735,67.04729920288086,17.64
24.857949265609735,67.04736920288086,12.64
24.857949265609735,67.04739920288086,16.64
24.857949265609735,67.04742520288086,8.64
24.857949265609735,67.04747020288086,4.64
24.856749265609735,67.04408920288086,6.11
24.856949265609735,67.04508920288086,2.12
24.857249265609735,67.04608920288086,1.1
24.856949265609735,67.04508920288086,2.13
24.857249265609735,67.04608920288086,0.6
24.856949265609735,67.04508920288086,1.19
24.857249265609735,67.04608920288086,1.6
24.856949265609735,67.04508920288086,2.12
24.857249265609735,67.04608920288086,1.15
24.857849265609735,67.04729920288086,17.64
24.857949265609735,67.04736920288086,12.64
24.857949265609735,67.04739920288086,16.64
24.857949265609735,67.04742520288086,8.64
24.857949265609735,67.04747020288086,4.64
24.856749265609735,67.04408920288086,6.11
24.856949265609735,67.04508920288086,2.12
24.857249265609735,67.04608920288086,1.1
24.857849265609735,67.04729920288086,17.64
24.857949265609735,67.04736920288086,12.64
24.857949265609735,67.04739920288086,16.64
24.857949265609735,67.04742520288086,8.64
24.857949265609735,67.04747020288086,4.64
24.856749265609735,67.04408920288086,6.11
24.856949265609735,67.04508920288086,2.12
24.857249265609735,67.04608920288086,1.15
24.856949265609735,67.04508920288086,2.13
24.857249265609735,67.04608920288086,0.6
24.856949265609735,67.04508920288086,1.19
24.857249265609735,67.04608920288086,1.6
24.856949265609735,67.04508920288086,2.12
24.857249265609735,67.04608920288086,1.15
24.856949265609735,67.04508920288086,2.13
24.857249265609735,67.04608920288086,0.6
24.856949265609735,67.04508920288086,1.19
24.857249265609735,67.04608920288086,1.6
24.856949265609735,67.04508920288086,2.12
24.857249265609735,67.04608920288086,1.15 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T09:38:33.443

我认为 getSpeed() 只有在特定位置具有 GPS 可用的速度组件时才会起作用。否则它将一直返回 0.0。

为此，您可以使用条件 location.hasSpeed() 方法进行检查。如果是真的，那么做你的其他事情以另一种方式思考。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-01-25T08:29:49.170

首先，我们需要使用位置管理器检查是否启用了 Gps。

```
isGPSEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER); 
```

然后，您需要实现 GpsStatus.Listener 以获取 Gps 更新。它将返回 Gps 位置更新。

```
GPSManager.locationListener = new LocationListener() {
                    @Override
                    public void onLocationChanged(final Location location) {
                            if (GPSManager.gpsCallback != null) {
                                    GPSManager.gpsCallback.onGPSUpdate(location);
                            }
                    }

                    @Override
                    public void onProviderDisabled(final String provider) {
                    }

                    @Override
                    public void onProviderEnabled(final String provider) {
                    }

                    @Override
                    public void onStatusChanged(final String provider, final int status, final Bundle extras) {
                    }
            }; 
```

从该位置您可以获得当前速度。

```
speed = location.getSpeed(); 
```

有关详细信息，请参阅我的网站：http: [//velmm.com/get-current-user-speed-using-gps-android/](http://velmm.com/get-current-user-speed-using-gps-android/)

# javascript - 拖放失败的窗口滚动

> ID：11843804
> 
> 赞同：0
> 
> 时间：2012-08-07T10:17:48.147
> 
> 标签：javascript, jquery, scroll, window, mousemove

我尝试制作一个无限滚动，但我的滚动绑定不能完美地工作......根本:(

```
 var dragStart = function (event) {

        var downPosX = event.pageX;
        var downPosY = event.pageY;
        var oldposScroll = $(window).scrollTop();

        document.body.focus();

        var dragMove = function (event) {
            var movePosX = event.pageX;
            var movePosY = event.pageY;
            var deltaPosX = movePosX - downPosX;
            var deltaPosY = movePosY - downPosY;
            var movetop = oldposScroll + (deltaPosY * -1);

            console.log('[movePosY = ' +movePosY+']  [deltaPosY = ' +deltaPosY+']  [movetop = ' + movetop + '] ');

            $(window).scrollTop(movetop);

            downPosX = movePosX;
            downPosY = movePosY;
            oldposScroll = movetop;
        };

        var dragStop = function (event) {
            $(window).unbind('mousemove', dragMove).unbind('mouseup', dragStop);
        };

        $(window).mousemove(dragMove).mouseup(dragStop);

        event.preventDefault();
    };

$(window).on("scroll", function (event) {
            console.log('rendering');
        });

$viewport.mousedown(dragStart); 
```

所以我想拖放我的视口（div）以滚动文档。这是可行的，但是当我打印 delta 值时，我得到了一些疯狂的结果：

```
[movePosY = 552] [deltaPosY = 8] [movetop = 440]
infini...port.js (ligne 33)
[movePosY = 543] [deltaPosY = -9] [movetop = 449]
infini...port.js (ligne 33)
[movePosY = 551] [deltaPosY = 8] [movetop = 441]
infini...port.js (ligne 33)
[movePosY = 540] [deltaPosY = -11] [movetop = 452]
infini...port.js (ligne 33)
[movePosY = 550] [deltaPosY = 10] [movetop = 442]
infini...port.js (ligne 33)
[movePosY = 539] [deltaPosY = -11] [movetop = 453]
infini...port.js (ligne 33)
[movePosY = 549] [deltaPosY = 10] [movetop = 443] 
```

正如你所看到的，我有差距很大的正负值，而不是连续的负值。

我不明白为什么......我怀疑窗口对象太慢而无法绑定“滚动”事件而mouseMove事件已经触发......但我不知道如何解决这个错误......

（在此之前，我的视口上有一个滚动条溢出，我没有这个错误。这就是我怀疑窗口对象的原因）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:12:11.950

我发现了问题:) 只需使用 clientX/Y(ref window) 而不是 pageX/Y(ref Document top/left)。

# silverlight - 如何解决 Fortify 扫描报告无法取消引用 Silverlight.js 文件中的空指针异常？

> ID：11843808
> 
> 赞同：1
> 
> 时间：2012-08-07T10:17:58.783
> 
> 标签：silverlight

尝试在我的 silverlight 项目上运行强化扫描时出现以下错误。

Silverlight.js 中的 createObject() 方法可以在第 2 行取消引用空指针，从而引发 NullExcpetion。

此 silverlight.js 文件由 Microsoft 创建。有没有人有关于如何解决这个问题的指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:37:10.210

鉴于该文件来自 Microsoft，我认为该错误是理论上的而不是实际的。检查文件的调试版本，`CreateObject`我发现以下代码：

```
Silverlight.createObject = function(source, parentElement, id, properties, events, initParams, userContext)
{
    var slPluginHelper = new Object();
    var slProperties = properties;
    var slEvents = events;

    slPluginHelper.version = slProperties.version;
    slProperties.source = source;    
    slPluginHelper.alt = slProperties.alt;
    ... 
```

我只能假设 fortify 反对以下行：

```
 slPluginHelper.version = slProperties.version; 
```

如果参数为空， as`slProperties` *可能为空。*`properties`

如果您确实必须修复这些错误，那么您需要将问题报告给 Microsoft，并希望他们发布该文件的更新版本。与此同时，您可以修改代码（编辑`.debug`文件的版本）并使用它。但是，如果您以后下载文件的新版本，则必须重新应用您的编辑。

# sql-server-2008 - 我们如何对有重复记录的记录进行排序？

> ID：11843813
> 
> 赞同：-1
> 
> 时间：2012-08-07T10:18:16.650
> 
> 标签：sql-server-2008

我有一张如下表

```
 FirstName            SurName
    Himaja          V
    Himaja           K
   mahendar          Faye 
    Karthik                  Null
   Varun                    M 
```

现在我想对这个表进行排序，以便所需的输出在姓氏中也是从 A 到 Z 的字母顺序。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:21:09.717

`select * from table order by FirstName, SurName;`

您可以向 order 子句添加多个列。如果 FirstName 值相同，则行按 SurName 排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:20:48.197

怎么样：

```
SELECT * FROM table ORDER BY FirstName, SurName 
```

您不能按字母顺序对它们进行排序。您只能按一列排序。如果两条记录在排序列中具有相同的值，那么它们将使用第二个排序参数进行排序，依此类推...

这是一个很好的例子——你应该如何对这些名字进行排序：

```
A B
C D
E A
F B 
```

保持两列按字母顺序排序？

# python - python：如何在不使用命令提示符的情况下在eclipse中将参数传递给应用程序

> ID：11843817
> 
> 赞同：1
> 
> 时间：2012-08-07T10:18:59.893
> 
> 标签：python, django

我在 django 上做项目，每次我们必须运行项目时，我们都必须在命令提示符下给出命令。我们可以在eclipse（IDE）本身或runco​​nfig中将参数传递给manage.py吗？

请对此有所了解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:23:26.383

您可以在 Eclipse 中创建一个“运行配置”来调用`manage.py`. 有一个“参数”选项卡允许您提供命令行参数。

# wpf - exitaction 上的动画背景颜色

> ID：11843821
> 
> 赞同：1
> 
> 时间：2012-08-07T10:19:15.930
> 
> 标签：wpf, xaml

我正在尝试为网格上的背景颜色设置动画以更改，一旦事件发生，但我无法让它工作，我可以让它立即改变颜色（通过数据触发器），但只要我尝试将动画引入其中，然后我无法使其正常工作（动画似乎没有生效）。

这是我正在使用的当前 XAML（尽管我尝试了各种变体并且无法让它动画化）：

```
<DataTrigger Binding="{Binding ElementName=me, Path=Viewed}" Value="False">
    <Setter Property="Background" Value="LightYellow" />
    <DataTrigger.ExitActions>
        <BeginStoryboard>
            <Storyboard>
                <ColorAnimation Duration="00:00:02" To="White" Storyboard.TargetProperty="(Grid.Background).(SolidColorBrush.Color)"/>
            </Storyboard>
        </BeginStoryboard>
    </DataTrigger.ExitActions>
</DataTrigger>
<!--
<DataTrigger Binding="{Binding ElementName=me, Path=Viewed}" Value="True">
    <Setter Property="Background" Value="White" />
</DataTrigger>
--> 
```

其中 Viewed 是我的控件上的依赖属性 (bool)。任何正确方向的提示将不胜感激。我还尝试将其设置为在 bool 切换为 true 时发生的引发事件上的 EventTrigger。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:27:42.713

感谢克莱门斯的帮助，弄清楚了我需要做什么：

```
 <SolidColorBrush x:Key="GridColourBrush" Color="LightYellow" />
        <Style x:Key="GridStyle" TargetType="Grid">
            <Setter Property="Background" Value="White" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding ElementName=me, Path=Viewed}" Value="False">
                    <Setter Property="Background" Value="{StaticResource GridColourBrush}" />
                    <DataTrigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation Duration="00:00:02" To="White" Storyboard.TargetProperty="(Grid.Background).(SolidColorBrush.Color)"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.ExitActions>
                </DataTrigger>
            </Style.Triggers>
        </Style>
        <!-- snipped stuff -->
        <Grid MinWidth="525" x:Name="ContainerGrid" Style="{StaticResource GridStyle}" Background="{StaticResource GridColourBrush}" /> 
```

因此，默认情况下将背景设置为纯白色，然后如果 DP bool 为 false，则将背景更改为静态纯色画笔，然后我可以通过退出操作对其进行动画处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:33:15.507

我的意思很简单，而不是

```
<Grid Background="LightYellow">
</Grid> 
```

你必须写

```
<Grid>
    <Grid.Background>
        <SolidColorBrush Color="LightYellow" />
    </Grid.Background>
</Grid> 
```

不需要额外的资源。

# ms-access - 向子表单添加查询

> ID：11843822
> 
> 赞同：1
> 
> 时间：2012-08-07T10:19:19.483
> 
> 标签：ms-access, vba

我一直在寻找一段时间，但我在这里看不到问题：

```
Option Compare Database
Option Explicit

Private Sub cmd_Refresh_Click()

Dim sSQL_Select                     As String
Dim Qdb                             As Database
Dim Qry                             As QueryDef    

sSQL_Select = "SELECT * FROM T_TIME_SCHEDULE"

Set Qdb = CurrentDb
Set Qry = Qdb.CreateQueryDef("QTS", sSQL_Select)
DoCmd.OpenQuery "QTS", acViewNormal
Me.F_Child_Result.Form.RecordSource = "QTS"
Me.F_Child_Result.Requery

Qdb.QueryDefs.Delete ("QTS")
Set Qdb = Nothing

End Sub 
```

这一行：

```
Me.F_Child_Result.Form.RecordSource = "QTS" 
```

导致以下错误：
**运行时错误“2467”：您输入的表达式引用了已关闭或不存在的对象。**
应该正确构造语法，并且我仔细检查了子表单的名称。
Desipte，错误仍然存​​在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:22:02.160

不要将记录源设置为查询，只设置 SQL 字符串。

```
sSQL_Select = "SELECT * FROM T_TIME_SCHEDULE"

''Set Qdb = CurrentDb
''Set Qry = Qdb.CreateQueryDef("QTS", sSQL_Select)
''DoCmd.OpenQuery "QTS", acViewNormal
Me.F_Child_Result.Form.RecordSource = sSQL
''Me.F_Child_Result.Requery 
```

不需要重新查询，当记录源改变时会重新查询表单。

请注意，即使您可以将记录源设置为查询（您不能），它也不会被引用。

来自聊天

这个问题似乎有两条混合线。所需要的是一种`Source Object`将子窗体控件设置为查询的方法，而不是`Record Source`子窗体控件包含的窗体的方法。

源对象可以这样设置：

```
Me.F_Child_Result.SourceObject="Query." & sQueryName 
```

如果 Source Object 已经设置为只用于此表单的已保存查询的名称，则无需重新设置，只需修改查询的 sql 即可：

```
Set qdf = CurrentDB.QueryDefs("JunkQuery")
qdf.SQL = sSQL 
```

# objective-c - Objective-C 中运行时调用的方法

> ID：11843826
> 
> 赞同：0
> 
> 时间：2012-08-07T10:19:36.430
> 
> 标签：objective-c, ios

今天我阅读了[有关 dealloc 的苹果文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html#//apple_ref/doc/uid/20000050-dealloc)。它读到

> “你永远不会直接发送 dealloc 消息。相反，运行时会调用对象的 dealloc 方法。”

在我的理解中，这意味着我们从不向对象发送 dealloc 消息，只有运行时向自身发送 dealloc。如果我错了，请纠正我。

另外，我想知道还有哪些其他方法只能由运行时调用，就像 dealloc 一样。

我阅读了[运行时参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)，但很难理解它。比方说，为什么 dealloc 没有在文档中列出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T11:08:21.303

> 在我的理解中，这意味着我们永远不会向对象发送 dealloc 消息

正确的。

> 只有运行时向自己发送 dealloc

当对象的保留计数变为零时，运行时会向对象发送 dealloc 方法。运行时不会将 dealloc 发送给自身（运行时不是对象，释放运行时没有意义！）。

# redirect - 在 drupal 站点中添加超过 1000 301 个重定向

> ID：11843828
> 
> 赞同：1
> 
> 时间：2012-08-07T10:19:50.380
> 
> 标签：redirect, drupal, drupal-6

我正在使用drupal 6。

我为我们的一位客户进行了网站改造，我们需要将旧网站 url 重定向到相关的新网站 url，这样我们就不会失去流量。我已经使用了相同的路径重定向模块并添加了一些网址。

问题是我们要添加 1000 多个 url，并且没有特定的模式（因为旧站点在 asp. 中），因此重定向将是 1 对 1 映射。通过路径重定向模块将其添加到 url 别名表中会影响站点性能，并且这又是一个手动过程。

对于这个场景还有其他更好和最优的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:48:25.390

[http://drupal.org/project/path_redirect_import](http://drupal.org/project/path_redirect_import) 该模块具有开箱即用的导入功能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T12:06:57.233

我将这个问题解释为性能问题（而不是易于填充许多重定向的问题）。如果我误解了你的问题，请纠正我。

**将重定向放入 .htaccess**

如果您使用的是 Apache，那么您的替代方法是将重定向直接放入您的[.htaccess](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)配置中。IIS 也应该有类似的配置选项。

这仍然意味着您必须为所需的每个重定向创建 1 对 1 映射，但重定向不会存储在您的数据库中，因此它将命中保存到 db。

**使用路径重定向模块的优点**

请注意，[路径重定向模块](http://drupal.org/project/path_redirect)可以记录上次访问重定向的时间。此统计/跟踪可以帮助您删除从长远来看不再使用的重定向。

[路径重定向问题队列上](http://drupal.org/node/315926)有一些帖子表明 1000 次重定向应该不是问题，但每个设置都不同。您将需要执行自己的基准测试以检查特定站点的性能。

# python - 从对象扩展类

> ID：11843829
> 
> 赞同：1
> 
> 时间：2012-08-07T10:19:50.253
> 
> 标签：python, class

我有一些课程：

```
class Window(object):
    def __init__(self, name):
        self.wind_name = name
    def getWindowName(self):
        return 'wnd' + self.wind_name

class Control(object):
    def __init__(self, name, wnd):
        self.contrl_name = name
        setattr(self, 'getWindowName', wnd.getWindowName)
        setattr(self, 'wind_name', wnd.wind_name)
    def getControlName(self):
        return (self.getWindowName(), 'unk' + self.contrl_name)

class Button(Control):
    def __init__(self, name, wnd):
        super(Button, self).__init__(name, wnd)
    def getControlName(self):
        return (self.getWindowName(), 'btn' + self.contrl_name)

wnd = Window('MyApp')
btnOK = Button('OK', wnd)
btnOK.getControlName() # work ok., return ('wndMyApp', 'btnOK')
btnOK.wind_name = 'NewApp'
btnOK.getControlName() # does not work properly., return ('wndMyApp', 'btnOK') 
```

如何扩展课程`Control`| `Button`从类的对象`Window`访问对象中的函数和`getWindowName`字段？`wind_name``btnOK`

`self.wnd = wnd`有没有办法不用在 Control 类中创建字段，或者`setWindowName`在`Window`...中添加方法？

我不能`Control`从类继承类`Window`！这不合逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:25:31.397

Python允许从多个类继承，即

```
class Button(Control, Window):
    ... 
```

但是在这种情况下，您应该确切地知道自己在做什么（说到 Python 的方法解析顺序（MRO））。我推荐阅读这本小书：[Python Attributes and Methods](http://www.cafepy.com/article/python_attributes_and_methods/python_attributes_and_methods.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:37:04.030

您可以将属性用于属性

```
class Window(object):
def __init__(self, name):
    self.wind_name = name

def getWindowName(self):
    return 'wnd' + self.wind_name

class Control(object):
    def __init__(self, name, wnd):
        self.contrl_name = name
        self.wnd = wnd
        setattr(self, 'getWindowName', wnd.getWindowName)

    def get_wind_name(self):
        return self.wnd.wind_name
    def set_wind_name(self, v):
        self.wnd.wind_name = v

    wind_name = property(get_wind_name, set_wind_name)
    def getControlName(self):
        return (self.getWindowName(), 'unk' + self.contrl_name)

class Button(Control):
    def __init__(self, name, wnd):
        super(Button, self).__init__(name, wnd)
    def getControlName(self):
        return (self.getWindowName(), 'btn' + self.contrl_name)

wnd = Window('MyApp')
btnOK = Button('OK', wnd)
print btnOK.getControlName() # work ok., return ('wndMyApp', 'btnOK')
btnOK.wind_name = 'NewApp'
print btnOK.getControlName() 
```

# android - GridView 崩溃

> ID：11843832
> 
> 赞同：2
> 
> 时间：2012-08-07T10:20:09.307
> 
> 标签：android, android-gridview

我想创建一个`GridView`并用数字填充它。我创建了我的`GridView`，我填充了它，然后我成功地构建了它，但是当我运行它时，应用程序崩溃了，并且我收到以下错误*“不幸的是，...已停止”。*

布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <GridLayout
    android:id="@+id/gridView1"
    android:numColumns="auto_fit"
    android:gravity="center"
    android:columnWidth="50dp"
    android:stretchMode="columnWidth"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" > 
    </GridLayout>

</RelativeLayout> 
```

`main.java`：

```
package main.java;

import android.os.Bundle;
import android.app.Activity;
import android.view.*;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.GridView;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

    static final String[] numbers = new String[] { 
        "A", "B", "C", "D", "E",
        "F", "G", "H", "I", "J",
        "K", "L", "M", "N", "O",
        "P", "Q", "R", "S", "T",
        "U", "V", "W", "X", "Y", "Z"};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        GridView g = (GridView) findViewById(R.id.gridView1);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1 , numbers);
        g.setAdapter(adapter);

        g.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {
               Toast.makeText(getApplicationContext(),
                ((TextView) v).getText(), Toast.LENGTH_SHORT).show();
            }

        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

[我在这里](http://www.mkyong.com/android/android-gridview-example/)复制了教程。

以下是日志：

```
08-07 11:36:37.858: E/Trace(614): error opening trace file: No such file or directory (2)
08-07 11:36:38.587: D/AndroidRuntime(614): Shutting down VM
08-07 11:36:38.587: W/dalvikvm(614): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
08-07 11:36:38.597: E/AndroidRuntime(614): FATAL EXCEPTION: main
08-07 11:36:38.597: E/AndroidRuntime(614): java.lang.RuntimeException: Unable to start activity ComponentInfo{main.java/main.java.MainActivity}: java.lang.ClassCastException: android.widget.GridLayout cannot be cast to android.widget.GridView
08-07 11:36:38.597: E/AndroidRuntime(614):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
08-07 11:36:38.597: E/AndroidRuntime(614):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-07 11:36:38.597: E/AndroidRuntime(614):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-07 11:36:38.597: E/AndroidRuntime(614):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-07 11:36:38.597: E/AndroidRuntime(614):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-07 11:36:38.597: E/AndroidRuntime(614):  at android.os.Looper.loop(Looper.java:137)
08-07 11:36:38.597: E/AndroidRuntime(614):  at android.app.ActivityThread.main(ActivityThread.java:4745)
08-07 11:36:38.597: E/AndroidRuntime(614):  at java.lang.reflect.Method.invokeNative(Native Method)
08-07 11:36:38.597: E/AndroidRuntime(614):  at java.lang.reflect.Method.invoke(Method.java:511)
08-07 11:36:38.597: E/AndroidRuntime(614):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-07 11:36:38.597: E/AndroidRuntime(614):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-07 11:36:38.597: E/AndroidRuntime(614):  at dalvik.system.NativeStart.main(Native Method)
08-07 11:36:38.597: E/AndroidRuntime(614): Caused by: java.lang.ClassCastException: android.widget.GridLayout cannot be cast to android.widget.GridView
08-07 11:36:38.597: E/AndroidRuntime(614):  at main.java.MainActivity.onCreate(MainActivity.java:32)
08-07 11:36:38.597: E/AndroidRuntime(614):  at android.app.Activity.performCreate(Activity.java:5008)
08-07 11:36:38.597: E/AndroidRuntime(614):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
08-07 11:36:38.597: E/AndroidRuntime(614):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
08-07 11:36:38.597: E/AndroidRuntime(614):  ... 11 more
08-07 11:36:42.507: I/Process(614): Sending signal. PID: 614 SIG: 9 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-07T10:40:48.807

> 引起：java.lang.ClassCastException: android.widget.GridLayout 不能转换为 android.widget.GridView

您`GridLayout`在 XML 中声明，但将其（尝试强制转换）处理为`GridView`

这个：

```
<GridLayout
android:id="@+id/gridView1"
android:numColumns="auto_fit"
android:gravity="center"
android:columnWidth="50dp"
android:stretchMode="columnWidth"
android:layout_width="fill_parent"
android:layout_height="fill_parent" > 
</GridLayout> 
```

应该：

```
<GridView
android:id="@+id/gridView1"
android:numColumns="auto_fit"
android:gravity="center"
android:columnWidth="50dp"
android:stretchMode="columnWidth"
android:layout_width="fill_parent"
android:layout_height="fill_parent" > 
</GridView> 
```

# css - 边距 0 自动；用于滑块内的粘性页脚

> ID：11843843
> 
> 赞同：-1
> 
> 时间：2012-08-07T10:20:50.227
> 
> 标签：css, alignment, margin, footer

这是我的代码：

CSS：

```
{
    margin      : 0;
    font-family : Arial, Helvetica, sans-serif;
}

html
{
    height : 100%;
}

body
{
    height              : 100%;

    background-color    : #d1e3ec;
    background-image    : url(img/map-v.jpg);
    background-repeat   : no-repeat;
    background-position : top center;
}

#wrapper
{
    min-height : 100%;
    height     : auto !important; /*IE6*/
    height     : 100%; /*IE6*/
    margin     : 0 auto -70px; /* the bottom margin is the negative value of the footer's height */
}

.content
{
    overflow : hidden;
    width    : 200px;
    margin   : 0 auto;
}

#footer, #push
{
    height : 70px; /* .push must be the same height as .footer */
}

#footer
{
    background-color : #019790;
}

#global-container
{
    overflow   : hidden;
    position   : relative;
    width      : 100%;
    min-height : 100%;
}

#slider
{
    background : green;
    height     : 100%;
    position   : absolute;
    left       : 0;
    margin     : 20px 0 0 0;
}

#slide-link
{
    position : absolute;
    top      : 0;
    left     : 0;
    z-index  : 9999;
    height   : 20px;
} 
```

HTML：

```
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css"/>

<script src="js/bootstrap.min.js"></script>

<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

<div id="global-container">
    <div id="slide-link" style="border:1px solid red; width:100%;"><a href="#" >Click here</a></div>
    <div id="slider" style="border:1px solid red;">
        <div id="wrapper">
            <div class="content">content</div>
            <div id="push"></div>
        </div>
        <div id="footer">
            footer
        </div>
    </div>
</div> 
```

测试脚本：

```
$(document).ready(function ()
{
    $("#slide-link").click(function ()
    {

        if ($("#slider").is(":visible"))
        {
            var containerHeight=$("#global-container").height()-25;

            $("#slider").hide("slide", { direction:"down" }, 1000);
            $("#slide-link").animate({top:containerHeight}, 1050)

        } else if ($("#slider").is(":hidden"))
        {
            $("#slider").show("slide", { direction:"down" }, 1000);
            $("#slide-link").animate({top:'0px'}, 950)
        }
    });
}); 
```

代码完成了它的工作并且工作正常：它有一个粘性页脚，当您可以按下链接时，它会隐藏/显示它并强制执行。我想要的只是将块 id="slider" 与中心对齐，就像我们在使用 margin:0 auto; 时所做的那样。在不破坏其余功能的情况下。我不知道为什么，但是margin 0 auto；不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:48:26.007

将绝对定位的元素放置在其容器的中间：

```
#slider {
  left: 50%;
  margin-left: -100px; (negative of half of the width of the element)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:51:38.810

`position: absolute;`使用margin:0 auto时的第一件事；不工作。如果你想保留你的 html 代码，试试这个

```
#slider {
    background : green;
    height : 100%;
    position : absolute;
    width:300px;
    top:0;
    left:50%;
    margin-top:20px;
    margin-left:-150px;
} 
```

希望它对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T10:43:55.477

你定位了`#slider`绝对值。这会将其从关于边距的父元素的流程中取出，并且还将其放置在左侧，因为`left: 0;`：

```
#slider {
    position   : absolute;
    left       : 0;
    margin     : 20px 0 0 0;
} 
```

你能做的，是这样的：

```
#slider {
    position   : inherit;
    margin     : 20px auto 0 auto;
    width:     : 200px;
} 
```

在这种情况下，您必须明确设置宽度，并且必须手动调整高度，或者您使用类似的东西`display: table-cell`来获得 100% 的高度。

# python - GtkSourceView 使用 Gobject Introspection 滚动到行 [python]

> ID：11843847
> 
> 赞同：2
> 
> 时间：2012-08-07T10:21:03.777
> 
> 标签：python, gtk, introspection, gobject, gtksourceview

我已经使用 Gobject Introspection 成功创建了一个 python GTK 应用程序，并在 GTKSourceView Widget 中打开了一个源文件。

当用户单击按钮时，我试图滚动以将特定行（第 150 行）放置到屏幕的中心。

我已经阅读[了如何（以编程方式）滚动到 gtktextview/gtksourceview 中的特定行](https://stackoverflow.com/questions/10625099/how-to-programmatically-scroll-to-a-specific-line-in-gtktextview-gtksourceview)

以及围绕 GtkSourceViews、GTKTextView 和这两者的缓冲区对象的文档（据我了解，sourceview 继承自 textview）

我尝试使用以下方法：

- 在第 150 行获取一个迭代器，然后使用 scroll_to_iter() 方法 - 在第 150 行获取一个迭代器，在迭代器处做一个标记，然后使用 scroll_to_mark() 方法

我知道迭代器和标记是正确的，因为我可以成功使用 place_cursor(iter) 方法，并且它成功地将标记放置在第 150 行的末尾，但是使用给定方法滚动到标记或迭代器什么都不做。

滚动到标记方法不返回值，但迭代器方法返回 false。

谁能建议一种方法来实现这一目标？

我的测试代码如下：

```
from gi.repository import Gtk
from gi.repository import GObject
from gi.repository import GtkSource

class MyApplication (Gtk.Window):

    def __init__(self, *args, **kwargs):
        Gtk.Window.__init__(self, *args, **kwargs)
        self.set_title("SourceView Test")
        self.set_size_request(400, 400)
        self.connect("destroy", Gtk.main_quit)
        self.create_widgets()
        self.show_all()

    def create_widgets(self):
        self.sourceview=GtkSource.View.new()        
        self.lm = GtkSource.LanguageManager.new()
        self.scrolledwindow = Gtk.ScrolledWindow()
        vbox = Gtk.VBox()
        self.add(vbox)
        vbox.pack_start(self.scrolledwindow,True,True,0)
        self.scrolledwindow.add_with_viewport(self.sourceview)      
        self.scrolledwindow.show_all()
        button = Gtk.Button("Jump To Line")
        button.connect("clicked", self.scroll_to_line_and_mark)
        self.open_file_in_srcview("/home/tel0s/source_android/system/core/adb/adb.c")
        vbox.pack_start(button, False, False, 5)

    def open_file_in_srcview(self,filename,*args,**kwargs):
        self.buffer = self.sourceview.get_buffer()
        self.filename = filename
        self.language = self.lm.guess_language(self.filename,None)
        self.sourceview.set_show_line_numbers(True)
        if self.language:
            self.buffer.set_highlight_syntax(True)
            self.buffer.set_language(self.language)
        else:
            print 'No language found for file "%s"' % self.filename
            self.buffer.set_highlight_syntax(False)
        txt = open(self.filename).read()
        self.buffer.set_text(txt)
        self.buffer.place_cursor(self.buffer.get_start_iter())

    def scroll_to_line_and_mark(self,*args,**kwargs):
        print "setting iterator"
        iterator = self.sourceview.get_buffer().get_iter_at_line(150)
        print iterator
        print "scrolling to iter"
        if self.sourceview.scroll_to_iter(iterator,0, False, 0.5, 0.5):
            print "done!"
        else:
            print "scrolling failed!!"

if __name__ == "__main__":
    MyApplication()
    Gtk.main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:59:22.557

所以问题是：

```
self.scrolledwindow.add_with_viewport(self.sourceview) 
```

根据滚动窗口对象的[Gtk 文档](http://developer.gnome.org/gtk/2.24/GtkScrolledWindow.html#gtk-scrolled-window-add-with-viewport)，您应该只`add_with_viewport`用于不支持滚动的对象。对于那些天生喜欢`GtkTextView`（以及继承`GtkSourceView`）的人，您应该使用`GtkContainer.add()`...

希望有帮助

# entity-framework - 如何使用枚举列的字符串值对查询进行排序

> ID：11843848
> 
> 赞同：2
> 
> 时间：2012-08-07T10:21:03.450
> 
> 标签：entity-framework, ef-code-first

我的表包含对应于枚举类型的 int 列。例如 int column Command 的值对应于这种类型：

```
public enum Commands
{
  Start = 1,
  End = 2
} 
```

如果我查询表并按命令对其进行排序，我会得到命令=开始后跟 Commen=结束的行。

有没有办法可以按命令列的字符串值对查询进行排序，例如先结束，最后开始。

results.OrderBy(s => (Command as Commands).ToString())

但它给了我错误“仅支持初始化程序、实体成员和实体导航属性”。

当然，我可以将 Command 的字符串值作为一列并按其排序，但出于不同的原因，我们更喜欢使用 int 列。

谢谢

# c# - 在 RichTextBox 中居中对齐段落

> ID：11843849
> 
> 赞同：7
> 
> 时间：2012-08-07T10:21:05.900
> 
> 标签：c#, winforms, richtextbox

我使用 RichTextBox，并且我想格式化段落中的所有行以对齐对齐，除了最后一行将对齐到中心。

像这样：

```
 sssssssssssssssssssssssss
      sssssssssssssssssssssssss
      sssssssssssssssssssssssss
           ssssssssssssss 
```

我使用[此代码](http://geekswithblogs.net/pvidler/archive/2003/10/14/182.aspx)来证明对齐。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T12:02:44.913

What you want is "center justify". Modify the enum, it's #5 below:

```
/// <summary>
/// Specifies how text in a <see cref="AdvRichTextBox"/> is
/// horizontally aligned.
/// </summary>
public enum TextAlign
{
    /// <summary>
    /// The text is aligned to the left.
    /// </summary>
    Left = 1,

    /// <summary>
    /// The text is aligned to the right.
    /// </summary>
    Right = 2,

    /// <summary>
    /// The text is aligned in the center.
    /// </summary>
    Center = 3,

    /// <summary>
    /// The text is justified.
    /// </summary>
    Justify = 4,

    /// <summary>
    /// The text is center justified.
    /// </summary>
    CenterJustify = 5
} 
```

![enter image description here](../Images/5f5aa7a98aa26e301e688aae8a081b52.png)

Sample code:

```
private void Form1_Load(object sender, EventArgs e)
{
    AdvRichTextBox tb = new AdvRichTextBox();

    tb.SelectionAlignment = TextAlign.CenterJustify;
    tb.SelectedText = "Here is a justified paragraph. It will show up justified using the new AdvRichTextBox control created by who knows.\n";

    tb.Width = 250;
    tb.Height = 450;

    this.Controls.Add(tb);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-22T11:48:15.350

```
<RichTextBox>
            <FlowDocument>
                <Paragraph TextAlignment="Justify">
                    sssssssssssssssssssssssss
                    sssssssssssssssssssssssss
                    sssssssssssssssssssssssss
                </Paragraph>
                <Paragraph TextAlignment="Center">
                    sssssssssssssssssssssssss
                </Paragraph>
            </FlowDocument>
</RichTextBox> 
```

主要使用段落 TextAlignment 会给你对齐文本的选项：1\. 对齐，2\. 居中，3\. 左，4\. 右；

# android - Cordova FileTransfer 返回空错误代码

> ID：11843852
> 
> 赞同：4
> 
> 时间：2012-08-07T10:21:17.083
> 
> 标签：android, post, cordova, upload

因此，在对此进行了一段时间的修改后，我注意到即使给定的上传目标完全是虚假的，upload() 函数也会引发至少最基本的错误。但是，如果域中的任何地方都有 UNDERSCORE（具体来说，我需要上传到 dev_upload_area.s3.amazonaws.com），就像我必须上传到的那样，请求甚至不会发生，则调用 uploadFailure 函数立即出现空错误代码。

有什么帮助吗？

编辑：是的，访问来源设置正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-13T13:56:14.403

我遇到了同样的问题，我发现 RFC 规定下划线不是域名中的有效字符。所以要么你改变你的 url，要么你必须修改 FileTransfer 插件 java 源来转义字符。

资料来源：

[索引 25 处路径中的非法字符](https://stackoverflow.com/questions/9673344/illegal-character-in-path-at-index-25)

[http://forum.soapui.org/viewtopic.php?t=14188](https://stackoverflow.com/questions/9673344/illegal-character-in-path-at-index-25)

[http://bugs.java.com/bugdatabase/view_bug.do?bug_id=5049974](https://stackoverflow.com/questions/9673344/illegal-character-in-path-at-index-25)

# java - 如何在 JSP 中创建对象的数组列表

> ID：11843853
> 
> 赞同：0
> 
> 时间：2012-08-07T10:21:18.193
> 
> 标签：java, jsp, servlets, arraylist

我想在 JSP 中创建一个对象数组列表。之后，想要遍历列表对象。有人可以帮我创建它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:23:17.973

创建`ArrayList`at servlet 将其设置为属性，并在 JSP 上使用`<c:forEach>`

**小服务程序**

```
List<Foo> list = new ArrayList<Foo>();
list.add(foo1);
list.add(foo2);
list.add(foo3);
request.setAttaribute("fooList", list);
request.getRequestDispatcher("/WEB-INF/hello.jsp").forward(request, response); 
```

* * *

**你好.jsp**

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<c:forEach items="${list}" var="foo">
 <tr>
  <td><c:out value="${foo.name}" /></td>
  <td><c:out value="${foo.age}" /></td>
 </tr>
</c:forEach> 
```

注意：`name`和`age`是`Foo`具有适当访问器方法的两个属性

# python - python的共享和独占命名锁

> ID：11843854
> 
> 赞同：7
> 
> 时间：2012-08-07T10:21:19.600
> 
> 标签：python, synchronization, locking

我需要使用命名锁（例如文件锁）同步 python 线程和进程（不需要相互关联）。最好它应该是读写器锁。我已经尝试过 fcntl.flock （它具有独占锁和共享锁获取），但它没有提供所需的锁定级别 - [python 的 fcntl.flock 函数是否提供文件访问的线程级锁定？](https://stackoverflow.com/questions/3899435/does-pythons-fcntl-flock-function-provide-thread-level-locking-of-file-access)

到目前为止，我的解决方案是将[lockfile](http://packages.python.org/lockfile/lockfile.html)与 memcached（或 mmap'ed 锁定文件）一起使用。Lockfile 将同步访问，memcached 将计算读取器/写入器。

有没有更好/更快的解决方案？你知道任何已经解决这个问题的项目吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:57:02.877

这是一个链接[http://semanchuk.com/philip/](http://semanchuk.com/philip/)与实现 posix 和 system V 信号量的库。您可以使用其中之一。请注意，在持有信号量的进程在没有释放它的情况下死亡的情况下 - 所有其他都被卡住了。如果你害怕这一点 - 你可以使用带有 UNDO 的 System V 信号量，但它们会慢一点。此外，如果您碰巧使用 System V 共享内存原语 - 请记住它们存在于内核中并在进程终止后继续存在 - 您必须明确地将它们从系统中删除。

如果你不怕死进程和整个系统和进程的死锁是相关的 - 你可以使用 python 的信号量（它们是 posix 命名的信号量。）

您作为相关问题（fcntl）链接的页面并没有说 fcntl 不适合线程间锁定。就是说 fcntl 关心 fds。因此，只要您打开锁定文件并为每个锁定实例获取新的 fd，您就可以使用 fcntl 进行进程间和线程间锁定。

您还可以将 fcntl 用于进程间，将 python 的信号量用于线程间锁定。

最后：重新思考你的架构。锁定通常是不好的。将资源委托给一个进程，该进程将在不锁定的情况下处理它。维护起来会简单得多。相信我。

# c# - wCF中的流而不是字节[]？

> ID：11843855
> 
> 赞同：2
> 
> 时间：2012-08-07T10:21:22.980
> 
> 标签：c#, .net, wcf, stream

我正在开发用于上传文档的 WCF 服务，以前我正在使用`byte[]`，现在要求已更改为使用`Stream`

我正在为 WCF 使用外部 WSDL 文件。

我已将使用 byte[] 的函数的签名更改为 Stream，但现在当我创建客户端时，Upload 函数要求与以前相同的输入参数。

你能帮我解决这个问题吗？

有什么不对。我无法更改 WSDL 文件。我的 WSDL 文件`base64Binary`用于 byte[]，这对于 Stream 也足够了。

服务器代码：

```
public Response Upload(RequestClass req)
{

}

public RequestClass{
    HeaderClass Header;
    Stream content;
} 
```

客户端生成的代码：

```
public Response Upload(Header hdr, byte[] content); 
```

***更新：***

```
<xs:element name="UploadDocumentReqMsg">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="UploadDocumentContent" nillable="true" type="str:Stream"/>
      </xs:sequence>
    </xs:complexType>
</xs:element>
<xs:element name="UploadDocumentReqHdr" nillable="true" type="tns:RequestHeader"/> 
```

我在 WSDL 中的请求，因此对于 byte[] 和 Stream，我使用的是 Stream。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:29:19.847

不能更改 WSDL 是什么意思？您需要新的 WSDL 文件（带有新签名）才能正确生成客户端。

使用 Stream 和 WCF 时，绑定有一些限制，这里有一个链接：http: [//www.codeproject.com/Articles/36973/Stream-Operation-in-WCF](http://www.codeproject.com/Articles/36973/Stream-Operation-in-WCF)

干杯——乔克

# android - Android : 列表样式

> ID：11843856
> 
> 赞同：0
> 
> 时间：2012-08-07T10:21:26.027
> 
> 标签：android, listview

尝试通过验证条件（if (vehicleColor[i].equals("1")) ）等来显示基于颜色代码的列表。如果我正在关闭 for 循环，则使用此代码段 (getListView().setBackgroundColor(Color.WHITE);) 的单色代码可以正常工作。我需要根据颜色代码显示列表。需要帮助的家伙。

私人无效showColouredList（）{

```
 final ListAdapter adapter = new ArrayAdapter<String>(this,
            R.layout.list_items, R.id.label, vehicleList);
    setListAdapter(adapter);
    getListView().setTextFilterEnabled(true);
    getListView().setDividerHeight(1);
    // getListView().setBackgroundColor(Color.WHITE);

    for (int i = 0; i < vehicleList.length; i++) {

        System.out.println("--" + vehicleColor[i]);
        if (vehicleColor[i].equals("1")) {
            System.out.println("ListColour");

            getListView().getChildAt(i).setBackgroundColor(Color.GREEN); // giving NullPointerException

        } else if (vehicleColor[i].equals("2")) {

            getListView().getChildAt(i).setBackgroundColor(Color.RED);
        } else if (vehicleColor[i].equals("3")) {

            getListView().getChildAt(i).setBackgroundColor(Color.YELLOW);
        } else if (vehicleColor[i].equals("4")) {

            getListView().getChildAt(i).setBackgroundColor(Color.GRAY);

        }

    }

    getListView().setPadding(5, 10, 0, 10);
    getListView().setCacheColorHint(Color.BLUE);
    getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    getListView().setEnabled(true);

    getListView().setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int index,
                long arg3) {
            // TODO Auto-generated method stub

            Intent secondActivity = new Intent(First.this,
                    SecondActivity.class);
            Utility.setDeviceId(listBean.getVehicleDeviceIdArr()[index]);
            Utility.setWindowTitle(list[index]);
            startActivity(secondActivity);

        }
    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:26:28.973

您可以使用 listAdapter，并在 getView() 中完成您的工作；List(Array)Adapter 的方法。

# php - PHP-form-b uilder-class 不工作

> ID：11843858
> 
> 赞同：1
> 
> 时间：2012-08-07T10:21:42.390
> 
> 标签：php, forms, apache

我正在尝试实现 Php-form-b​​uilder 类，但我得到了

`Fatal error: Class 'Form' not found in C:\wamp\www\project\admin\newpost.php on line 18`

我正在使用 php 5.4.3 运行 apache 2.4.2，请任何有想法的人知道如何让它运行？

```
<?php
session_start();
error_reporting(E_ALL);
include("../PFBC/Form.php");

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled</title>
<link rel="stylesheet" type="text/css" href="style/index.css" />
</head>

<body>
<?php
$form = new Form("layout_grid", 500);

$form->configure(array(
    "view" => new View_Grid(array(2, 1, 3))
));
$form->addElement(new Element_Hidden("form", "layout_grid"));
$form->addElement(new Element_Textbox("Title:", "Title"));
$form->addElement(new Element_Textbox("First Name:", "FirstName"));
$form->addElement(new Element_Textbox("Last Name:", "LastName"));
$form->addElement(new Element_Textbox("City:", "City"));
$form->addElement(new Element_State("State:", "State"));
$form->addElement(new Element_Textbox("Zip Code:", "ZipCode"));
$form->addElement(new Element_Button);
$form->render();
?>

</body>
</html

> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:26:34.257

我猜你有问题`namespaces`，

尝试：

`$form = new PFBC\Form("layout_grid", 500);`

你有 PHP5.3 的 PFBC 版本吗？

`$form->addElement(new PFBC\Element\Hidden("form", "elements"));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T22:45:06.540

有一种更短的方法可以实现几乎相同的目标。如果您正在使用`PHP >= 5.3` ，只需在页面顶部添加“use”关键字，就在 session_start() 之后：

`use PFBC\Form;`

`use PFBC\Element;`

之后，您只需像已经完成的那样继续构建您的表单，您无需在每一行中添加额外的 PFBC\。这一切都在文档中。如果您在使用任何版本的 php 之前，`5.3`您需要下载替代包。

# freeze - 错误管理不起作用

> ID：11843859
> 
> 赞同：0
> 
> 时间：2012-08-07T10:21:45.537
> 
> 标签：freeze, galaxy

我是一名安卓开发者。我最近购买了三星 Galaxy S3 (I9300)，但遇到了一些问题。

错误管理不起作用。我的意思是，当应用程序崩溃时，它不会显示“强制关闭”，手机只会死机。

我以前有过HTC；我也在开发时使用它，并且使用相同的故障应用程序，我的 HTC 显示强制关闭，但 S3 冻结，我必须重新启动它。可以想象，这很烦人。

我找到了一个临时解决方案，但它会影响wifi。使用这个应用程序

[https://play.google.com/store/apps/details?id=com.issess.fastforceclose&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5pc3Nlc3MuZmFzdGZvcmNlY2xvc2UiXQ](https://play.google.com/store/apps/details?id=com.issess.fastforceclose&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5pc3Nlc3MuZmFzdGZvcmNlY2xvc2UiXQ) ..

并启用“旧的快速强制关闭”似乎可以解决问题，但它存在与 wifi 相关的问题。

## 我尝试过的事情

*   清洁ROM，擦除数据和Dalvik缓存（一开始可以，但是突然手机死机，当我重新启动时，错误管理不再起作用）

*   删除所有应用

我错过了什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T23:31:57.630

请参阅[http://forum.xda-developers.com/showthread.php?t=1843837](http://forum.xda-developers.com/showthread.php?t=1843837)，尤其是 #8 后

引用：

我终于弄清楚了“快速强制关闭”应用程序正在做什么来阻止冻结。它做了一些相当简单的事情：它基本上“隐藏”了 /data/log 文件夹，将它移到一边，并用符号链接替换它。然后这也会导致 Wifi 在重新启动后无法连接（不知道为什么）

```
mv /data/log /data/log_backup
ln -s /dev/null /data/log 
```

要“禁用”修复程序，它只是做相反的事情。

无论如何，这让我认为该解决方案与该文件夹中发生的事情有关。在强制关闭时，该文件夹中发生的一件事是它接收到 dumpstate 命令的输出：

```
dumpstate -k -t -n -z -d -o /data/log/dumpstate_app_error 
```

因此，我对“冻结而不是强制关闭对话框”问题的解决方案是将一些文件放在 /data/log 文件夹中，其权限使 dumpstate 无法做到这一点。

我发现这个可以解决问题，但我不知道是否有副作用。

如果您想实现这一点，您可以通过多种方式来实现（例如，甚至通过终端仿真器或一些根文件资源管理器）。我附上了一个可以为你做这件事的可闪光拉链。（见 XDA 链接）

除了一些样板代码之外，重要的一点是（在 zip 中的 updater-script 中）：

```
ui_print("Apply fix...");
delete("/data/log/dumpstate_app_error");
delete("/data/log/dumpstate_app_error.txt.gz");
delete("/data/log/dumpstate_app_error.txt.gz.tmp");
package_extract_file("placeholder", "/data/log/dumpstate_app_error");
package_extract_file("placeholder", "/data/log/dumpstate_app_error.txt.gz");
package_extract_file("placeholder", "/data/log/dumpstate_app_error.txt.gz.tmp");
set_perm(0, 0, 0400, "/data/log/dumpstate_app_error");
set_perm(0, 0, 0400, "/data/log/dumpstate_app_error.txt.gz");
set_perm(0, 0, 0400, "/data/log/dumpstate_app_error.txt.gz.tmp"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-01T13:47:28.690

通过将手机更新到最新的可用 android 版本，我解决了这个问题。

# jquery - 一种在 HTML/JQuery 中进行 3D 翻转的方法？

> ID：11843864
> 
> 赞同：2
> 
> 时间：2012-08-07T10:21:59.143
> 
> 标签：jquery, html

我们有一个需要在页面上旋转的图像 - 它不是方形图像（嗯..图像是方形的，但它是透明背景上的不规则形状）。让它旋转不是问题，但是当它侧身时它会完全消失——我们需要它是一个“3D”图像，这样它就不会随着它的移动而消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:36:23.113

[http://css3.bradshawenterprises.com/flip/](http://css3.bradshawenterprises.com/flip/)

所描述的解决方案使用原生 CSS 过渡。如果浏览器不支持这些，它会退回到 jQuery Flip 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T12:48:39.180

粗细部分可能是您使用 CSS/JavaScript （还）不会得到任何结果的地方。浏览器如何知道您的对象从侧面看起来如何？

为矩形对象伪造这个很容易，只需在两侧放置一些 div 并制作一个非常薄的盒子。

对于不规则形状，您可以尝试使用在原始图像后面复制几次并在 z 轴上偏移半个像素的相同图像。从侧面看，这可能仍然很奇怪。

看到这个[小提琴在](http://jsfiddle.net/NAHxy/)这里我创造了我正在谈论的效果。这种方法的问题在于，尽管您可以通过分层提供厚度，但无法告诉浏览器这实际上是一种固体介质。如果不涉及动画，您可以摆脱这种效果。

# qt4 - QValidator 和键盘语言 qt

> ID：11843869
> 
> 赞同：1
> 
> 时间：2012-08-07T10:22:08.193
> 
> 标签：qt4, qlineedit

我有一个 QLineEdit 控件，并想为它设置验证器。

```
QRegExp regExp("[A-Za-z0-9]+");
QRegExpValidator *regExpVal = new QRegExpValidator();
regExpVal->setRegExp (regExp);
ui->lineEditName->setValidator (regExpVal); 
```

之后，我无法使用越南语键盘在 lineEditName 和 lineEditAlias 上键入任何字母数字字符。Qt 总是清除我输入的字符。我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:25:12.290

您正在尝试根据正则表达式编写那些不允许输入到控件中的字符。根据您的国家/地区脚本删除正则表达式或重置。

为越南语设置 QValidator::setLocale。然后将正则表达式设置为包含越南语。

# javascript - 下拉菜单问题

> ID：11843870
> 
> 赞同：0
> 
> 时间：2012-08-07T10:22:16.837
> 
> 标签：javascript, html, css, drop-down-menu

我正在为学校 Intranet 网站编写一个下拉菜单，但我创建了一个相当奇怪的问题。子菜单从选定的菜单 y 位置偏移 36 像素。 ![在此处输入图像描述](../Images/28a398b55b20bd4ebf780844bb10ceca.png)

这是代码的摘录（请原谅质量：D）

```
<html>
<head>  
    <style>
    #navagationBar {
        margin: 0;
        padding: 0;
        z-index: 30;
    }

    #navagationBar li  {    
        list-style: none;
        float: left;
        font: bold 12px 'Arial';
        margin-left: 10px;
        width: 96px;
    }

    #navagationBar li a  {  
        display: block;
        margin: 0 1px 0 0;
        padding: 4px 10px;
        width: 136px;
        color: #FFFFFF;
        text-align: center;
        text-decoration: none;
    }

    #navagationBar li a:hover  {    
        background: #796952;
    }

    #navagationBar div  {   
        position: absolute;
        visibility: hidden;
        background: transparent; 
    }

    #navagationBar div a  { 
        position: relative;
        display: block;
        padding: 5px 10px;
        width: 136px;
        white-space: nowrap;
        text-align: left;
        text-decoration: none;
        background: #796952;  
        color: #FFF;
        font: 9px "Arial";
    }

    #navagationBar div a:hover  {   
        background: #969696;
        color: #FFF;
    }

    #navagationBar a  {
        color: #FFF;
    }

    div.navagation  {
        background: #2d221c;

        height: 28px;
    }

    div.sub  {
        left: 156px;
    }
    </style>
    <!-- BG COLOR: #2d221c
         FORERGROUND: #3c3429
         HOVER: #796952
         -->
    <script>    
            var menuItem = 0;
            var subItem = 0;

            var timeLimit = 250;
            var closeTimer = 0;
            var closeSubTimer = 0;

            // open menu
            function openMenu(id)  {
                stopTimer();

                // If a layer is already open close it
                if (menuItem)  {
                    menuItem.style.visibility = 'hidden';
                }

                // Then set the one clicked on by the user to be shown
                menuItem = document.getElementById(id);
                menuItem.style.visibility = 'visible';
            }

            function openSub(id)  {
                stopSubTimer();

                // If a layer is already open close it
                if (subItem)  {
                    subItem.style.visibility = 'hidden';
                }

                subItem = document.getElementById(id);
                subItem.style.visibility = 'visible';
            }

            function close()  {
                if (menuItem)  {
                    menuItem.style.visibility = 'hidden';
                }
            }

            function closeSub()  {
                if (subItem)  {
                    subItem.style.visibility = 'hidden';
                }
            }

            function startTimer()  {
                closeTimer = window.setTimeout(close, timeLimit);
            }

            function startSubTimer()  {
                closeSubTimer = window.setTimeout(closeSub, timeLimit);
            }

            // Stop timing
            function stopTimer()  {
                if (closeTimer)  {
                    window.clearTimeout(closeTimer);
                    closeTimer = null;
                }
            }

            // TODO: Make more modular          
            function stopSubTimer()  {
                if (closeSubTimer)  {
                    window.clearTimeout(closeSubTimer);
                    closeSubTimer = null;
                }
            }

            // If the user click out, close teh box
            document.onclick = close();
            document.onclick = closeSub();
    </script>
</head>
    <body>
        <div class="navagation">
            <ul id="navagationBar">
                <li><a href="#" onMouseOver="openMenu('menu0')" onMouseOut="startTimer()">HSIE</a>
                    <div id="menu0" onMouseOver="stopTimer()" onMouseOut="startTimer()">
                        <a href="#" onMouseOver="openSub('submenu0_0')" onMouseOut="startSubTimer()">Business Studies</a>
                        <div class='sub' id="submenu0_0" onMouseOver="openSub('submenu0_0')" onMouseOut="startSubTimer()">
                            <a href='view.php?id=110'>Year 11</a>
                            <a href='view.php?id=109'>Year 12</a>
                        </div>
                        <a href="#" onMouseOver="openSub('submenu0_1')" onMouseOut="startSubTimer()">Commerce</a>
                        <div class='sub' id="submenu0_1" onMouseOver="openSub('submenu0_1')" onMouseOut="startSubTimer()">
                            <a href='view.php?id=112'>Year 9</a>
                            <a href='view.php?id=111'>Year 10</a>
                        </div>
                        <a href="#" onMouseOver="openSub('submenu0_2')" onMouseOut="startSubTimer()">Geography</a>
                        <div class='sub' id="submenu0_2" onMouseOver="openSub('submenu0_2')" onMouseOut="startSubTimer()">
                            <a href='view.php?id=48'>Year 7</a>
                            <a href='view.php?id=92'>Year 8</a>
                            <a href='view.php?id=105'>Year 9</a>
                            <a href='view.php?id=70'>Year 10</a>
                            <a href='view.php?id=69'>Year 11</a>
                            <a href='view.php?id=131'>Year 12</a>
                        </div>
                        <a href="#" onMouseOver="openSub('submenu0_3')" onMouseOut="startSubTimer()">History</a>
                        <div class='sub' id="submenu0_3" onMouseOver="openSub('submenu0_3')" onMouseOut="startSubTimer()">
                            <a href='category.php?id=89'>Junior</a>
                            <a href='category.php?id=90'>Senior</a>
                        </div>
                    </div>
                </li>
            </ul>  
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:26:38.643

**DOM 访问**

首先，您必须确保`getElementbyId();`在整个页面加载之前不要访问 DOM。

您必须在结束正文标记之前调用脚本，或者将整个代码包装在一个函数中并在结束时调用它，就在结束正文标记之前。这是雅虎！和 Google 前端开发最佳实践。

或者，您可以使用 JQuery`$(document).ready() function`或其他 JavaScript 库的文档加载函数。然而，使用一个库来解决这个问题是多余的。

**全局变量**

通过在函数范围之外声明 var `menuItem = 0;`，您将变量声明为全局变量，这是一件非常糟糕的事情！它会使您的整个网站的名称空间变得混乱。在函数内部声明变量以创建闭包。

此外，您不想用整数初始化 menuItem 变量，因为稍后您将引用一个对象（一个 DOM 对象）。尽管 Javascript 不需要声明类型并且这会起作用，但它会引起代码阅读者的混淆。只需`var menuItem;`在函数内部使用。

**CSS 块格式化上下文**

尝试使用`display: inline`或`display: block`与您的 HTML 元素一起使用。确保阅读并理解[W3C CSS 视觉格式化模型](http://www.w3.org/TR/CSS2/visuren.html#block-boxes)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:30:06.313

尝试将子菜单 div 放在相应的 a 标签之前（而不是将这些 div 放在它们之后）。

例如，试试这个：

```
<div class='sub' id="submenu0_0" onMouseOver="openSub('submenu0_0')" onMouseOut="startSubTimer()">
    <a href='view.php?id=110'>Year 11</a>
    <a href='view.php?id=109'>Year 12</a>
</div>
<a href="#" onMouseOver="openSub('submenu0_0')" onMouseOut="startSubTimer()">Business Studies</a> 
```

而不是这个：

```
<a href="#" onMouseOver="openSub('submenu0_0')" onMouseOut="startSubTimer()">Business Studies</a>
<div class='sub' id="submenu0_0" onMouseOver="openSub('submenu0_0')" onMouseOut="startSubTimer()">
    <a href='view.php?id=110'>Year 11</a>
    <a href='view.php?id=109'>Year 12</a>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T10:35:43.363

每个子级别都有单独的 ID，因此您可以为每个子级别添加样式。

```
#submenu0_0 > a {top:0px;}
#submenu0_1 > a {top:25px;}
#submenu0_2 > a {top:50px;}
#submenu0_3 > a {top:75px;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T10:37:16.610

这是由于[怪癖模式](http://www.quirksmode.org/css/quirksmode.html)吗？

尝试使用这样的正确文档类型：

```
<!DOCTYPE HTML>
<html>
<head>

</head>
<body>

</body>
</html> 
```

# django - Apache 虚拟主机上的 Django 部署

> ID：11843874
> 
> 赞同：0
> 
> 时间：2012-08-07T10:22:24.137
> 
> 标签：django, wordpress, mod-wsgi, apache-config

我有一个 wordpress ( `/var/www/cb`)，我希望以 root ( `www.cb.com`) 和一个 Django 应用程序 ( `/vc/cb/cb`) 作为子目录 ( `cb.com/launch`) 运行它。

```
<IfModule mod_ssl.c>
<VirtualHost _default_:443>
        ServerAdmin info@cb.com
        ServerName cb.com
        DocumentRoot /var/www/cb
        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /var/www/cb>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride FileInfo Indexes
                Order allow,deny
                allow from all
        </Directory>

        WSGIScriptAlias /launch /vc/cb/cb/wsgi.py
        <Directory "/vc/cb/cb">
        <Files wsgi.py>
                Order deny,allow
                Allow from all
        </Files>
        </Directory>
</VirtualHost>
</IfModule> 
```

[此处](https://stackoverflow.com/questions/3534678/django-wsgi-and-wordpress-coexisting-in-apache-virtualhost)提出了类似的问题，但那是 Django-1.4 之前的版本，您必须手动创建 wsgi 文件。

在文档中它说 wsgi.py 是为您自动创建的。我看到的主要区别是文件扩展名，在上面的链接中，他们将 wsgi 文件称为 xx.wsgi，而[django 1.4 文档](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/#how-to-use-django-with-apache-and-mod-wsgi)指向 wsgi.py。我不知道这是否是一个问题，但是当我做一个 404`https://cb.com/launch`

**wsgi.py 的内容：**

```
import os
import sys

sys.path.append('/vc/cb')
sys.path.append('/vc/cb/cb')

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "cb.settings")

from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

我错过了什么？

# java - 在 java swing Jtable 中设置隐藏字段值

> ID：11843876
> 
> 赞同：3
> 
> 时间：2012-08-07T10:22:49.003
> 
> 标签：java, swing, jtable

我用数据库中的一些数据创建了一个 swing jtable。在网络应用程序中，通常我向用户显示数据并将其唯一的数据库 id 设置为 html 标记属性，以便当用户单击说编辑时，我使用 javascript 从 html 标记属性中选择元素的隐藏 db 唯一 id . 这样，我知道用户想要编辑哪个数据，我可以使用它的唯一主键在数据库中更新它。现在我如何在使用 swing 用 java 编写的桌面应用程序中执行此操作。说得更清楚一点，我正在寻找一个等价物；

```
<table>
<tr id=1 ><td>david</td></tr>
<tr id=2 ><td>peter</td></tr>
<tr id=3 ><td>Timothy</td></tr>
</table> 
```

希望很清楚。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:44:04.900

你`TableModel`的备份`JTable`可以包含你喜欢的任何东西。例如，它可以包含像这样的对象

```
class User{
  public final int ID;
  public String name;
  public int age;
} 
```

然后您可以选择在您的`JTable`

```
class MyTableModel implements TableModel{
  private List<User> users;
  @Override
  public Object getValueAt(int row, int column){
    if ( column == 0 ){
      return users.get( row ).name;
    }
  }
} 
```

但是由于您`TableModel`仍然包含完整的`User`对象，因此您拥有所有必需的信息。

注意：由于缺少方法，上述代码将无法编译，...。这只是为了说明我的意思

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T10:42:42.927

等价物是`AbstractTableModel`由 a 支持的子类实例`List<YourObject>`。当您编辑一行时，您从表中获取所选行的索引`JTable.getSelectedRow()`（的直接来自对象。`JTable. convertRowIndexToModel()``YourObject``YourObject`

阅读[JTable 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)以获取更多详细信息。

```
public class UserTableModel extends AbstractTableModel {

    private List<User> users;

    public UserTableModel(List<User> users) {
        this.users = new ArrayList<User>(users);
    }

    @Override
    public int getRowCount() {
        return users.size();
    }

    @Override
    public int getColumnCount() {
        return 1;
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        if (columnIndex == 0) {
            return users.get(rowIndex).getName();
        }
        else {
            throw new IllegalArgumentException();
        }
    }

    @Override
    public Class<?> getColumnClass(int columnIndex) {
        if (columnIndex == 0) {
            return String.class;
        }
        else {
            throw new IllegalArgumentException();
        }
    }

    public User getUserAtRow(int rowIndex) {
        return users.get(rowIndex);
    }
} 
```

# javascript - 如果光标在 div 内，则显示块 jquery

> ID：11843878
> 
> 赞同：3
> 
> 时间：2012-08-07T10:23:03.027
> 
> 标签：javascript, jquery

**这是问题的一个jsfiddle：http:** [//jsfiddle.net/MEJgb/](http://jsfiddle.net/MEJgb/)

我想要它，所以当您将鼠标悬停在页脚中的任何位置时，toggledown 将变为活动状态并保持活动状态，直到您将鼠标从页脚移开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:34:21.190

即使我不确定您的实际目标是`document.elementFromPoint()`什么，也许该方法可以帮助您。

它被调用像

```
if( document.elementFromPoint( event.pageX, event.pageY ) === $('#footer')[0] ) { } 
```

该代码在您的`hover`aka `mouseenter`/`mouseleave`处理程序中，会将位于当前绝对鼠标光标 X/Y 位置下的节点与该`#footer`节点进行比较。

参考：[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/document.elementFromPoint)，[W3C 文档](http://dev.w3.org/csswg/cssom-view/#dom-document-elementfrompoint)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:28:38.360

您的问题是以下行：

```
 jQuery('html,body').animate({
        scrollTop: jQuery("#footer_copy_right").offset().top
    }, 'slow'); 
```

这会导致整个页面移动，因此您悬停的项目不再悬停，因此它会再次触发您的事件并隐藏您的文本。当我测试这导致悬停内容移回我的鼠标下方并因此再次触发......

我个人不会在这种情况下使用悬停，让用户单击展开然后再次单击折叠。

如果您想继续使用悬停选项，那么您需要决定触发折叠的事件应该是什么。显然，当前的选择（鼠标不再位于箭头上）是不够的。

通常我要做的是将悬停附加到包含可见触发块以及将要显示的内容的块上。这样，您的内容在您移出新显示的内容之前不会折叠。

[http://jsfiddle.net/AjHwM/](http://jsfiddle.net/AjHwM/)就是这样一个例子。

# twig - 树枝访问数组索引？

> ID：11843880
> 
> 赞同：42
> 
> 时间：2012-08-07T10:23:15.730
> 
> 标签：twig, silex

是否可以从 Twig 模板中直接访问数组索引？

这是我的设置，使用 Silex：

```
return $app['twig']->render('template', array('numbers' => array('one', 'two', 'three'))); 
```

所以我可以做这样的事情吗？

```
{{numbers[0]}} 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-08-07T10:23:15.730

就在发布此之前，我意识到这正是您可以做的，但是由于我在文档或谷歌的任何地方都没有找到答案（如果我错了，请纠正我），无论如何我已经发布了这个。

```
{{numbers[0]}} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-08-05T13:01:21.580

亚当的答案，是正确的，只是为了说清楚和改进，可以直接访问数组索引

```
{{ myArray[0] }} 
```

如果您需要循环访问

```
{% set arrayOfItems = ['ZERO', 'ONE'] %}
{% set myArray = ['APPLE', 'ORANGE'] %}
{% for oneItem in arrayOfItems %}
    <p>{{ oneItem }} equals {{ myArray[loop.index0] }}</p>
{% endfor %} 
```

在这个例子中，我在一个不相关的循环中使用了一个数组，所以结果是：

```
ZERO equals APPLE
ONE equals ORANGE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-19T14:00:07.147

在将 Twig 与 shopware 6 一起使用时，这实际上对我不起作用。我尝试访问像这样的对象

```
{{ page.cart.lineItems.elements[0].quantity }} 
```

什么会导致 Twig 模板的解析错误

我可以用

```
{{ page.cart.lineItems.elements | first }} 
```

获取第一个元素，但不知道如何访问第一个元素的属性

# version-control - 任何适用于小规模独立开发的免费在线问题/功能跟踪软件？

> ID：11843884
> 
> 赞同：1
> 
> 时间：2012-08-07T10:23:39.567
> 
> 标签：version-control, bug-tracking, issue-tracking

我将创建一些小型移动应用程序，并设法找到一个很棒的免费在线 Git 存储库托管服务。它甚至带有在线问题跟踪软件，但似乎主要面向开发团队。我希望它也有一个界面供最终用户记录问题/功能并允许他们对他们想要的东西进行投票，但它没有这个。它确实公开了一个 RESTful API，但我不想走这条路，想要一些准备好的东西（一旦配置）。

我认为我不需要将它与 Git 存储库集成，因此拥有纯粹独立的东西会很棒，但我肯定想要在线的东西，因为我不想在本地 PC 上安装软件。

总之，我的要求是：

1.  免费或非常便宜
2.  简单的最终用户界面，允许用户提交问题/功能
3.  允许最终用户对自己或其他用户的问题/功能进行投票
4.  问题/功能的可见状态（即它们是否处于待处理、进行中、被拒绝、已修复等）
5.  一个更高级的管理系统，让我作为开发人员来管理问题
6.  一些基本的报告/图表/图表会很棒
7.  新问题/建议的电子邮件/RSS 通知也很棒
8.  在一些配置/设置之后准备好进行的东西。

任何人都可以推荐适合这个的东西吗？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:14:03.547

我的问题基于我不久前看到但找不到的网站。无论如何，我现在又找到了它（它叫做[http://www.uservoice.com/](http://www.uservoice.com/)）。这并不是真正的问题跟踪，而是更多让最终用户报告功能并允许他们对它们进行投票的方式。重要的是它是一个非常用户友好的界面，非常适合最终用户。显然，我需要在我自己的系统（例如 Mantis）中维护问题/功能，然后手动将 uservoice 中请求的功能同步到 Mantis，但这应该不是大问题。无论如何，这完美地满足了我目前对小批量应用程序的需求。

# drupal - 是否可以在 Drupal 6 的 Views Slideshow 模块中混合内容？

> ID：11843885
> 
> 赞同：0
> 
> 时间：2012-08-07T10:23:39.923
> 
> 标签：drupal, drupal-6, drupal-views

我在 Drupal 6 中使用 Views Slideshow 并使用它来显示案例研究的幻灯片。每个案例研究都有一些目前可以正常工作的图像，但我想将 YouTube 视频集成到同一个幻灯片的某个位置。我已经设法使用 YouTube 的嵌入式媒体字段模块将它集成到同一个视图中，但它位于幻灯片之外。

我什至经历过随着图像幻灯片的移动视频不断淡入淡出的行为？！

目前，我将两者都添加为单独的内容字段，并在 YouTube 内容上选择“如果为空则隐藏”。

有什么建议么？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:38:57.413

您可以使用 CSS 技巧正确地重新定位它。

更好的是，如果您使用的是 Drupal 7，您甚至可以使用 Field Group 模块将多个字段包装在 DIV 或 SPAN 中，以便可以将组视为单个实体......就像一个列表。这应该使您的视频和幻灯片图像保持在同一个容器内。

我相信 Drupal 6 也存在类似的模块，但我不确定。

# javascript - 鼠标光标更改 Javascript - 链接的 DIV

> ID：11843886
> 
> 赞同：1
> 
> 时间：2012-08-07T10:23:49.617
> 
> 标签：javascript, hover, cursor

我有这个 JS 代码。

当我将鼠标悬停在 div 上时，我想显示一个“手”光标，就像通常对 a href 所做的那样。

```
$("#button1div").click(function(){
window.location = 'http://google.com';
}); 
```

如何使光标变为手形？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:36:17.400

虽然您似乎想使用 Javascript 来执行此操作，但有一种更简单的方法可以单独使用 CSS：

```
#button1div {
    cursor: pointer;
} 
```

而且，我不确定您是否真的在做比点击更改更多的事情`window.location`，`div`但看起来您可以`a`毫无问题地使用元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:33:24.067

```
$("#button1div").css('cursor','pointer'); 
```

将光标设置为手形符号。

# php - 用 PHP 中的命名变量替换括号内的文本

> ID：11843888
> 
> 赞同：1
> 
> 时间：2012-08-07T10:23:58.143
> 
> 标签：php, regex, string, replace

我想用`[]`从名为该字符串的数组中随机选择的项目替换方括号 () 中的所有字符串。

[它与这个 issue](https://stackoverflow.com/questions/10973958/php-str-replace-to-replace-need-with-random-replacement-from-array)非常相似，但有一点不同，我想用名为 that 的数组中的字符串替换不同括号的内容。

**一个例子应该使这更清楚一点。**

所以说我有字符串

```
"This is a very [adjective] [noun], and this is a [adjective] [noun]." 
```

和变量：

```
$adjective = array("big","small","good","bad");
$noun      = array("house","dog","car"); 
```

我们希望它通过随机选择返回`"This is a very big house, and this is a good dog."`或其他。也就是说，我想编写一个 PHP 函数，`[string]`用从名为`$string`. 目前，随机选择是否会导致重复选择并不重要，但它必须为每个`[]`项目做出新的选择。

我希望我已经清楚地解释了这一点。如果你能得到我想要达到的目标并且能想出更好的方法来做到这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T10:34:16.870

## 算法

1.  匹配此正则表达式：`(\[.*?\])`
2.  对于每个匹配组，从相关数组中选择一个项目。
3.  按顺序替换字符串。

## 执行

```
$string    = "This is a very [adjective] [noun], and this is a [adjective] [noun].";
$adjective = array("big","small","good","bad");
$noun      = array("house","dog","car");

// find matches against the regex and replaces them the callback function.
$result    = preg_replace_callback(

                 // Matches parts to be replaced: '[adjective]', '[noun]'
                 '/(\[.*?\])/',

                 // Callback function. Use 'use()' or define arrays as 'global'
                 function($matches) use ($adjective, $noun) {

                     // Remove square brackets from the match
                     // then use it as variable name
                     $array = ${trim($matches[1],"[]")};

                     // Pick an item from the related array whichever.
                     return $array[array_rand($array)];
                 },

                 // Input string to search in.
                 $string
             );

print $result; 
```

## 解释

**[preg_replace_callback](http://php.net/manual/en/function.preg-replace-callback.php)**函数使用提供的回调函数执行正则表达式搜索和替换。

*   **第一个参数**是要匹配的正则表达式（用斜线括起来）：`/(\[.*?\])/`

*   **第二个参数**是为每个匹配调用的回调函数。将当前匹配作为参数。

    *   我们必须在`use()`这里使用来从函数内部访问数组，或者将数组定义为 global: `global $adjective = ...`。即，我们必须执行以下操作之一：

        **a)**将数组定义为`global`：

        ```
          ...
          全局 $adjective = array("big","small","good","bad");
          全局 $noun = array("house","dog","car");
          ...
          功能（$匹配）{
          ...

        ```

        **b)**使用`use`：

        ```
          ...
          $形容词=数组（“大”，“小”，“好”，“坏”）；
          $noun = array("房子","狗","汽车");
          ...
          函数（$matches）使用（$形容词，$名词）{
          ...

        ```

    *   回调函数的第一行：

        *   **trim** ：使用函数`[]`从匹配中删除方括号 ( )。`trim`

        *   **${}**：创建一个变量以用作匹配名称的数组名称。例如，如果`$match`is`[noun]`则`trim($matches[1],"[]")`返回`noun`（不带括号）并`${noun}`成为数组名称：`$noun`。有关该主题的更多信息，请参阅**[变量变量](http://php.net/manual/en/language.variables.variable.php)**。

    *   第二行随机选择一个可用的索引号`$array`，然后返回该位置的元素。

*   **第三个参数**是输入字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-08T16:37:54.180

这样做的另一种好（更简单）方法（不是我的解决方案）

[https://stackoverflow.com/a/15773754/2183699](https://stackoverflow.com/a/15773754/2183699)

使用 foreach 检查要替换的变量并将其替换为

```
str_replace(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T10:50:55.553

下面的代码将完成这项工作：

```
$string = "This is a very [adjective] [noun], and this is a [adjective] [noun]."

function replace_word ( $matches )
{
    $replaces = array(
        '[adjective]'  =>  array("big", "small", "good", "bad"),
        '[noun]'  =>  array("house", "dog", "car")
    );

    return $replaces[$matches[0]][array_rand($replaces[ $matches[0] ])];
}

echo preg_replace_callback("(\[.*?\])", "replace_word", $string); 
```

`[something]`首先，我们对单词的部分进行正则表达式匹配，并`replace_word()`在其上调用回调函数[`preg_replace_callback()`](http://www.php.net/manual/en/function.preg-replace-callback.php)。该函数内部`$replaces`定义了一个内部二维深度数组，每一行都以一种`[word type] => array('rep1', 'rep2', ...)`格式定义。

棘手且有点混淆的行是`return $replaces[$matches[0]][array_rand($replaces[ $matches[0] ])];`. 如果我把它分块，它对你来说会更容易解析：

```
$random = array_rand( $replaces[ $matches[0] ] ); 
```

`$matches[0]`是单词类型，这是`$replaces`我们要搜索的数组中的键。这是通过原始字符串中的正则表达式找到的。[`array_rand()`](http://www.php.net/manual/en/function.array-rand.php)基本上选择数组的一个元素，并返回其**数字索引**。所以`$random`现在是一个介于`0`和之间的整数`(number of elements - 1)`包含替换的数组。

```
return $replaces[ $matches[0] ][$random]; 
```

这将返回`$random`替换数组中的第 th 个元素。在代码片段中，这两行放在一起成为一行。

## 一个元素只显示一次

如果你想要分离元素（没有两个形容词或名词重复两次），那么你需要做另一个技巧。我们将设置`$replaces`数组不是在`replace_word()`函数内部定义，而是在函数外部定义。

```
$GLOBALS['replaces'] = array(
    '[adjective]'  =>  array("big", "small", "good", "bad"),
    '[noun]'  =>  array("house", "dog", "car")
); 
```

在函数内部，我们将通过调用将局部`$replaces`变量设置为对新设置数组的引用`$replaces = &$GLOBALS['replaces'];`。（`&`操作员将它设置为一个**引用**，所以我们所做的一切`$replaces`（例如删除和添加元素）也会修改原始数组。没有它，它只会是一个副本。）

并且在上`return`线之前，我们调用[`unset()`](http://php.net/manual/en/function.unset.php)当前要返回的密钥。

```
unset($replaces[$matches[0]][array_rand($replaces[ $matches[0] ])]); 
```

现在放在一起的函数如下所示：

```
function replace_word ( $matches )
{
    $replaces = &$GLOBALS['replaces'];
    unset($replaces[$matches[0]][array_rand($replaces[ $matches[0] ])]);

    return $replaces[$matches[0]][array_rand($replaces[ $matches[0] ])];
} 
```

而且因为`$replaces`是对全局的引用，所以`unset()`也会更新原始数组。下一次调用`replace_word()`将不会再次找到相同的替换。

### 注意数组的大小！

包含比存在的替换值数量更多的替换变量的字符串将抛出一个*未定义的索引* `E_NOTICE`。以下字符串不起作用：

```
$string = "This is a very [adjective] [noun], and this is a [adjective] [noun]. This is also an [adjective] [noun] with an [adjective] [noun]."; 
```

其中一个输出如下所示，表明我们用完了可能的替换：

> 这是一所非常大的房子，而且这是一所大房子。这也是一个小带。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-07T10:47:02.670

您可以使用 preg_match 和 str_replace 函数来实现此目标。

*   首先使用 preg_match 函数找到匹配项，然后从结果中创建搜索和替换数组。
*   通过将先前的数组作为参数传递来调用 str_replace 函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T15:02:04.453

这是我对上述 mmdemirbas 答案的小更新。它允许您在函数之外设置变量（即使用全局变量，如前所述）。

```
$result    = preg_replace_callback(

                 // Matches parts to be replaced: '[adjective]', '[noun]'
                 '/(\[.*?\])/',

                 // Callback function. Use 'use()' or define arrays as 'global'
                 function($matches) use ($adjective, $noun) {

                     // Remove square brackets from the match
                     // then use it as variable name
                    $arrayname = trim($matches[1],"[]");
                    $array = $GLOBALS[$arrayname];

                     // Pick an item from the related array whichever.
                     return $array[array_rand($array)];
                 },

                 // Input string to search in.
                 $string
             );

print $result; 
```

# java - 将 Oracle 身份验证迁移到表

> ID：11843891
> 
> 赞同：1
> 
> 时间：2012-08-07T10:24:15.947
> 
> 标签：java, oracle, authentication, oracle11g

我有一个使用 Oracle 11g 的基于 Java/Spring 的 Web 应用程序。目前，用户在登录时通过用户名/密码直接针对系统表进行身份验证`SYS.USER$`。

这必须改变，所以我们创建了一个（常规）新表来存储所有用户数据。我们将所有现有密码插入到新创建的表中。[但是，密码似乎以本网站](http://www.red-database-security.com/whitepaper/oracle_passwords.html)描述的方式加密/散列

一个例子：一旦用户输入`XXXXX`，数据库存储`07E4898C06DEF253`.

我想使用存储在新（常规）表中的旧密码执行身份验证。我的问题是我不知道如何验证现有密码，因为我不知道它们是如何被散列/加密的。

我玩弄了[ora_hash](http://docs.oracle.com/cd/B13789_01/server.101/b10759/functions097.htm)和[dbms_obfuscation_toolkit.DESDecrypt](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_obtool.htm)，但这些都没有给我一个正确的结果。我知道我的用户的正确密码，并且我可以看到 Oracle 为这个密码生成的值，但我无法重现 Oracle 通常“处理”密码数据的方式。

有没有办法在不重置所有密码的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:37:52.767

调整您在评论中链接到的 Java 实现，这很接近但没有正确使用盐：

```
import java.security.MessageDigest;
import java.util.Formatter;

class Main{

    public static String calculateHash(String password) throws Exception{
        MessageDigest crypt = MessageDigest.getInstance("SHA-1");

        String encodedPassword = "S:71752CE0530476A8B2E0DD218AE59CB71B211D7E1DB70EE23BFB23BDFD48";

        // Convert password to bytes
        byte[] bPassword = password.getBytes("UTF-8");

        // Get salt from encoded password
        String salt = encodedPassword.substring(42, 62);
        System.out.println("Salt is " + salt);

        // Convert salt from hex back to bytes
        // based on http://stackoverflow.com/a/140861/266304
        int len = salt.length();
        byte[] bSalt = new byte[len / 2];
        for (int i = 0; i < len; i += 2) {
            bSalt[i / 2] = (byte) ((Character.digit(salt.charAt(i), 16) << 4)
                + Character.digit(salt.charAt(i+1), 16));
        }

        // Add converted salt to password bytes
        // based on http://stackoverflow.com/a/80503/266304
        byte[] bData = new byte[bPassword.length + bSalt.length];
        System.arraycopy(bPassword, 0, bData, 0, bPassword.length);
        System.arraycopy(bSalt, 0, bData, bPassword.length, bSalt.length);

        // Hash the final byte array
        crypt.update(bData);
        byte bHash[] = crypt.digest();

        Formatter formatter = new Formatter();
        for (byte b : bHash)
        {
            formatter.format("%02x", b);
        }

        System.out.println("Expected      " + encodedPassword.substring(2,42));

        return formatter.toString().toUpperCase();
    }

    public static void main(String[] args) throws Exception {
        System.out.println("The result is " + calculateHash("ZK3002"));
    }
} 
```

这给出了输出：

```
Salt is 1DB70EE23BFB23BDFD48
Expected      71752CE0530476A8B2E0DD218AE59CB71B211D7E
The result is 71752CE0530476A8B2E0DD218AE59CB71B211D7E 
```

PL/SQL 版本涉及一些转换；[`dbms_crypto.hash()`](http://docs.oracle.com/cd/E14072_01/appdev.112/e10577/d_crypto.htm#i1002022)接受一个`RAW`参数，因此您必须将纯文本密码转换为[`RAW`](http://docs.oracle.com/cd/E11882_01/server.112/e17118/sql_elements001.htm#sthref182)，然后连接提取的盐 - 这已经是十六进制。（在 Pete Finnigan 的博客中的 PL/SQL 版本中，您可能会注意到他有一个显式`hextoraw`调用，所以我稍微简化了一下）。因此，为您的示例传递给的参数`dbms_crypto.hash`将是 的十六进制（OK，原始）等价物`ZK3002`，即`5A4B33303032`，与十六进制盐连接；所以`5A4B333030321DB70EE23BFB23BDFD48`。

对于 Java 版本，您传递一个字节数组，但这意味着您需要将从存储的密码中提取的盐从十六进制转换回，然后再将其附加到密码上；并且由于它不太可能具有有用的字符串表示形式，因此您不妨将其直接放入字节数组中。因此，将密码转换为字节数组，将盐转换为字节数组，并将两个数组粘在一起。这将成为您传递给的值`MessageDigest`。

您可以将生成的散列与 Oracle 散列版本进行比较，跳过初始`S:`盐和嵌入盐。

# java - Android 从相机获取图像 Uri，存储在 SQLite 中并在我的自定义适配器上恢复它

> ID：11843892
> 
> 赞同：1
> 
> 时间：2012-08-07T10:24:16.273
> 
> 标签：java, android, sqlite, camera, datatableadapters

我按照 Android 开发人员示例从相机意图中获取图像并将其放置在您的视图中。当我尝试将图像 uri 保存在我的`SqliteDatabase`（只是指向该图像的链接而不是完整图像，因此我节省空间）然后我尝试在我的 customadapter 上恢复它时，问题就开始了。

链接到谷歌开发 - > [http://developer.android.com/training/camera/index.html](http://developer.android.com/training/camera/index.html)

我试过这个没有成功

创建了一个全局字符串徽标，并在里面`handleSmallCameraPhoto`放了这个

```
private void handleSmallCameraPhoto(Intent intent) {
        Bundle extras = intent.getExtras();
        mImageBitmap = (Bitmap) extras.get("data");
        ImagenViaje.setImageBitmap(mImageBitmap);
        ImagenViaje.setVisibility(View.VISIBLE);
    --> logo = extras.get("data").toString(); 
```

然后我将徽标存储在 SQLite 上，并尝试以这种方式在我的适配器上恢复它

```
String imagePath = c.getString(c.getColumnIndexOrThrow(MySQLiteHelper.COLUMN_LOGO_PATH)); 
```

然后

```
 ImageView item_image = (ImageView) v.findViewById(R.id.logo);
    item_image.setVisibility(ImageView.INVISIBLE);
        Bitmap bitmap = BitmapFactory.decodeFile(imagePath);

        item_image.setImageBitmap(bitmap);
        item_image.setVisibility(ImageView.VISIBLE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:11:39.593

使用获取图像路径

```
Uri selectedImageUri = intent.getData();
String s1 = intent.getDataString(); 

String selectedImagePath = getPath(selectedImageUri);
if(selectedImagePath==null && s1 != null)
{
    selectedImagePath = s1.replaceAll("file://","");
} 
```

在你的`handleSmallCameraPhoto`方法中

在您的活动中添加此方法

```
public String getPath(Uri uri) {

    try{
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    if(cursor==null)
    {
        return null;

    }
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
    }
    catch(Exception e)
    {
        return null;
    }

} 
```

保存`selectedImagePath`在数据库中并在需要时使用`selectedImagePath`所选图像的路径

希望能帮到你。。

# jquery - 使用后退按钮时的 dateFormat 日期选择器

> ID：11843895
> 
> 赞同：2
> 
> 时间：2012-08-07T10:24:27.867
> 
> 标签：jquery, jquery-ui, datepicker, back-button

我有一个日期选择器，我在其上设置了“dd M yyyy”的日期格式。这在初始加载时工作正常，但是当用户导航到不同的页面然后单击后退按钮返回时，文本框为空。如果我删除“dateFormat”，则在按下后退按钮时会重新填充文本框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:28:34.333

是的，我遇到了同样的问题。这对我有用：

```
//Suppose your control has the id 'txtDate'
var temp = $('#txtDate').val();
$('#txtDate').datepicker();
$('#txtDate').datepicker( "option", "dateFormat", "dd M yyyy" );
$('#txtDate').val(temp); 
```

在将 应用于`datepicker`控件之前，复制其值并稍后重新分配它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-19T10:33:59.923

是的，我遇到过这个问题。它会为你工作。

```
// Text box id is 'txtSearch'
$("#txtSearch").datepicker("destroy");
$("#txtSearch").datepicker(); 
```

请参考此[链接](https://github.com/turbolinks/turbolinks/issues/253)。

# magento - 条件检查和 Magento 中的 OnepageController.php

> ID：11843897
> 
> 赞同：1
> 
> 时间：2012-08-07T10:24:34.803
> 
> 标签：magento, cart, shipping, review

在我的 magento 网站中，我的产品价格为 0.00。

所以我在结帐时隐藏了付款信息。

那就是我改变了代码`app/code/core/Mage/Checkout/Block/Onepage/Abstract.php`

在这个函数中 _getStepCodes()

我将代码替换为以下内容：

```
$sub = Mage::getSingleton('checkout/cart')->getQuote()->getData();
        $subtotal = $sub['base_subtotal'];
        if($subtotal == 0){
            return array('login', 'billing', 'shipping', 'shipping_method', 'review');
        }else{
            return array('login', 'billing', 'shipping', 'shipping_method', 'payment', 'review');
        } 
```

所以`Payment Information`不显示。

那么我在这里要做的是：

如果产品总价为零，则`Order Review`点击进去后进入`Shipping methods`。

如果产品价格不为零`Payment Information`，则正常。

所以我把代码写在`app/code/core/Mage/Checkout/controllers/OnepageController.php`.

在此页面中，我更改了功能，并且更新了：

```
public function saveShippingMethodAction()
{
    if ($this->_expireAjax()) {
        return;
    }
    if ($this->getRequest()->isPost()) {
        $data = $this->getRequest()->getPost('shipping_method', '');
        $result = $this->getOnepage()->saveShippingMethod($data);
        /*
        $result will have erro data if shipping method is empty
        */
        if(!$result) {
            Mage::dispatchEvent('checkout_controller_onepage_save_shipping_method',
                    array('request'=>$this->getRequest(),
                        'quote'=>$this->getOnepage()->getQuote()));
            $this->getOnepage()->getQuote()->collectTotals();
            $this->getResponse()->setBody(Mage::helper('core')->jsonEncode($result));
            $sub = Mage::getSingleton('checkout/cart')->getQuote()->getData();
            $subtotal = $sub['base_subtotal'];
            if($subtotal == 0){
                 $this->loadLayout('checkout_onepage_review');
                $result['goto_section'] = 'review';
                $result['update_section'] = array(
                    'name' => 'review',
                    'html' => $this->_getReviewHtml()
                );
            }else{
                $result['goto_section'] = 'payment';
                $result['update_section'] = array(
                    'name' => 'payment-method',
                    'html' => $this->_getPaymentMethodsHtml()
                );
        }
        $this->getOnepage()->getQuote()->collectTotals()->save();
        $this->getResponse()->setBody(Mage::helper('core')->jsonEncode($result));
    }
} 
```

}

当产品价格大于零时，它工作正常。

但如果产品价格为零，它就不会走一步`Order Review`。

但是在 fre bug 中`json`有`Order Review`.

这有什么问题？

它加载了in 的`json`代码，但未加载到站点中。`Order Review``fire bug`

我该如何解决这个问题？

# c# - 在调试模式下构建时的布尔值与在发布模式下不同

> ID：11843899
> 
> 赞同：1
> 
> 时间：2012-08-07T10:24:39.287
> 
> 标签：c#, asp.net

我在一个应用程序中有一个相当奇怪的错误，我已经设法缩小到这个简单的测试用例。

```
protected void Page_Load(object sender, EventArgs e)
{
    bool isHeightExceeded = IsHeightExceeded(10.16f, 127.15f);
    lit.Text = isHeightExceeded.ToString();
}

private bool IsHeightExceeded(float y, float height)
{
    float nextHeight = y + height;
    return (137.31f - nextHeight) < 0;
} 
```

当我在调试模式下构建并运行它时，isHeightExceeded bool 为 False（如我所料），但是当我在发布模式下重新构建和运行时，它现在为 True。

幕后发生了什么导致了这种情况？我猜它与浮点精度有关，但不确定是什么。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:31:05.063

我怀疑 10.16f + 127.15f 的值是以 64（或 80）位计算的，然后与 137.31f 进行比较......而在释放模式下，该值是计算的，然后被截断为 32 位，*然后*进行比较。基本上，当中间值没有被限制在较小的精度时，您可以获得这样的结果。

如果这是一个问题，那*可能*表明您不应该使用`float`或`double`开始使用 - 如果这些是精确值，请`decimal`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T10:31:51.900

10.16 + 127.15 正好等于 137.31，这意味着 的理论值为`(137.31f - nextHeight)`0。

由于涉及数值运算，您可能会遇到数值精度问题。使用调试器时，此问题的处理方式可能与不使用调试器时不同。这只是一个猜想，但我不会感到惊讶。

在任何情况下，您的代码都需要更正以解决精度错误，并使用自定义的*epsilon*容差值（例如，0.00001），以便为人类读者和用户提供可预测的结果。如果您不添加此容差，则代码可能仅适用于双精度值，而不适用于阅读它的人。

# java - 如何将灰度图像的输入流转换为二进制？

> ID：11843901
> 
> 赞同：1
> 
> 时间：2012-08-07T10:24:48.940
> 
> 标签：java, image, tiff, grayscale

我正在使用将灰度 tiff 图像读入输入流

```
 InputStream is=objCMBObject.getDataStream();
                bytes = IOUtils.toByteArray(is);
                response.setContentType(mimeType);
                OutputStream os = response.getOutputStream(); 
```

并将此流写入小程序。但现在我想在写入小程序之前将此灰度图像转换为二进制图像。我不想将图像保存在文件中。如何将灰度输入流转换为二进制？

如果我有 x,y 坐标，我可以将图像转换为二进制，但我不知道如何从输入流中获取它。请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:36:20.057

当你想操纵一个图像时，[`javax.imageio.ImageIO`](http://docs.oracle.com/javase/7/docs/api/index.html?javax/imageio/ImageIO.html)可以派上大用场。您可以使用它从流中加载图像，应用一些操作，如 a [`ColorConvertOp`](http://docs.oracle.com/javase/7/docs/api/index.html?java/awt/image/ColorConvertOp.html)，并将结果写回流。

由于`ImageIO`不一定支持开箱即用的 TIFF，因此您可能必须使用合适的库来提供 TIFF 支持。[另一个问题](https://stackoverflow.com/q/1954685/1468366)的答案建议为此使用[Java Advanced Imaging](http://java.sun.com/products/java-media/jai/iio.html)。

# java - 使用 UI 编写 JBoss Drools 规则

> ID：11843904
> 
> 赞同：4
> 
> 时间：2012-08-07T10:25:04.450
> 
> 标签：java, jboss, drools, rule-engine

我们正在使用 JBoss Drools 将一些特别容易改变我们正在构建的服务中的业务逻辑外部化。

这些规则可以由我们的开发人员创建和维护，这运行得非常好，我们拥有良好的集成和集成工作流程。

我们正在寻求将其使用扩展到需要高度定制的新服务。本质上，“专家用户”需要能够设置两种不同类型的规则：

1.  “标准”规则——这些几乎是隐含的规则，我们知道它们是常见的要求，我们可以构建 UI 进行设置，例如只允许在两个日期之间进行某些操作等。

2.  “自定义”规则 - 完全不符合要求，虽然我们可以尝试和预期，但我们宁愿让人们编写和测试他们自己的规则：)

我的问题是，是否有可能（并且确实有任何例子）将 Drools 用于 1 和 2？基本上，要有一个固定的 UI 应用程序作者 Drools 有效地规则并在我们的 UI 中嵌入一个“自由文本”规则编辑器？

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T18:41:08.270

你有几个选择。

对于 (2)，您可以简单地将来自 Guvnor 的规则编辑器嵌入到您的 Web 应用程序中。Guvnor 中的所有编辑器都是可嵌入的组件，因此您可以选择要使用的和不使用的。我在这种方法中看到的问题是你可能给用户太多的权力:)。换句话说，根据模型编写任何规则的能力需要通常只有技术用户知道的学科。例如，编写测试来验证规则。一些业务用户对此有足够的技术知识，但我想说这可能是例外，而不是规则。

大多数时候，我更喜欢和推荐的是开发自己的特定领域 GUI，它使用/公开业务用户熟悉的概念和术语，以及编写对他们的特定工作“有意义”的规则的方式。有时，他们甚至不知道他们正在编写“规则”，但他们会。在幕后，您的应用程序从特定领域的 GUI 中获取输入，并使用 drools API 或基于字符串的模板动态生成规则。这解决了您的 (1) 要求，但也可能足够强大以解决 (2)。

# asp.net - 仅刷新另一个 UpdatePanel 中的一个 UpdatePanel

> ID：11843912
> 
> 赞同：5
> 
> 时间：2012-08-07T10:25:19.613
> 
> 标签：asp.net, vb.net, updatepanel

如果`UpdatePanel`在另一个内部`UpdatePanel`，并且在内部 UpdatePanel 中有一个按钮，我希望在单击此按钮时，只刷新内部`UpdatePanel`. 如何 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T10:27:59.523

在innerupdate 面板中，将updatemode 设置为有条件的，并将outerupdatepanel childrenastriggers 属性设置为false。在内部更新面板中添加一个回发触发器并将其设置为将导致回发的按钮。像这样的东西

```
 <asp:UpdatePanel ID="parentup" runat="server" ChildrenAsTriggers="false">
    <ContentTemplate>
        <asp:UpdatePanel ID="chidlup" UpdateMode="Conditional" runat="server">
            <ContentTemplate>
                <asp:Button ID="btn" runat="server" />
            </ContentTemplate>
            <Triggers>
                <asp:PostBackTrigger ControlID="btn" />
            </Triggers>
        </asp:UpdatePanel>
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T20:57:07.577

*@Waqar Janjua*是对的。

但是您不必将 ChildrenAsTriggers 设置为 false，有时将其设置为 true 会更方便。

在两个更新面板中设置属性**UpdateMode="Conditional"**（将 ChildrenAsTriggers 保留为其默认值 true）。然后在：将触发器添加到您的按钮之间，正如 Janjua 所说：

```
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="btn" />
</Triggers> 
```

当 UpdateMode 不是有条件的时，每个更新面板都会更新它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-23T06:53:08.547

这段代码可以帮助你：这里是`Source`

```
 <asp:ScriptManager ID="script1" runat="server"></asp:ScriptManager>
        <asp:UpdatePanel ID="up1" runat="server">
            <ContentTemplate>
                <asp:Label ID="lblTime" runat="server" ForeColor="Red"></asp:Label>
                <asp:Button ID="buttonOuter" runat="server" OnClick="buttonOuter_Click" Text="What is the time?" />
                <asp:UpdatePanel ID="up2" runat="server" UpdateMode="Conditional">
                    <ContentTemplate>
                        <asp:Label ID="lblTime2" runat="server" ForeColor="Blue"></asp:Label>
                        <asp:Button ID="buttonInner" runat="server" OnClick="buttonInner_Click" Text="What is the time?" />
                    </ContentTemplate>
                </asp:UpdatePanel>
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger  ControlID="buttonOuter" EventName="Click"/>
            </Triggers>
        </asp:UpdatePanel> 
```

这是`code behinde`：

```
 protected void Page_Load(object sender, EventArgs e)
{

}
protected void buttonInner_Click(object sender, EventArgs e)
{
    up2.Update();
    lblTime2.Text = DateTime.Now.Second.ToString();
}
protected void buttonOuter_Click(object sender, EventArgs e)
{
    lblTime.Text = DateTime.Now.Second.ToString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-09T01:01:28.350

如果 UP1 是外部 UpdatePanel ，而 UP2 是内部，并且您想防止外部被内部的 Button 更新（用于 exp:Btn）：

```
UP1.UpdateMode="Conditional"
UP1.ChildrenAsTriggers= "False" 
```

此外，您**不应**将 Btn 添加为 UP1 中的触发器（如以下代码）

```
<asp:UpdatePanel ID="UP1" runat="server" ....>
   <ContentTemplate>
    ....
   </ContentTemplate>
  <Triggers>
   <asp:Trigger ControlID="btn" EventName="Click"/>
  </Triggers>
</asp:UpdatePanel> 
```

# selenium-rc - Selenium RC - 无法使用 XPATH/CSS 路径///a[contains(text(),'abc')] 点击链接

> ID：11843913
> 
> 赞同：0
> 
> 时间：2012-08-07T10:25:26.223
> 
> 标签：selenium-rc, xpath

Selenium IDE 能够识别链接的 ID、Xpath、CSSPath。但是，Selenium RC 无法单击使用 XPath 或 CSSPath 或 ID 的链接。我也使用过“包含文本（）”，但没用。请在下面找到我当前在 Eclipse IDE 中执行的代码。

```
selenium.open("https://abc.com");
selenium.type("UserName", "123456");
selenium.click("xpath=//form[@id='loginForm']/table/tbody/tr[7]/td/input");
selenium.click("xpath=//a[@id='_ebg9dd']"); 
// selenium.click("xpath=//a[contains(text(), 'Request Form')]"); 
```

如果有任何差异，有人可以建议任何其他替代方案或更正代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:01:17.450

您是否使用 IDE 转换它？例如，这是 Java Junit 4 RC 的 Xpath 选择器：

在你的 a-tag 上有一个 id 似乎很不寻常，但如果你想尝试使用“包含”，这是我刚尝试时对我有用的一个例子。

```
selenium.click("//div[@class='span5 footer-links']/ul/li/a[contains(text(), 'Submit your page')]"); 
```

我还想知道您希望在“用户名”字段中输入文本，然后单击两次。您不需要在第一次单击后在另一个字段中输入内容或等待某些内容吗？只是看起来像是一系列奇怪的事件（但可能不是，我显然不知道你在做什么的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:54:50.397

尝试这个 ：

```
selenium.click("link=name_of_link_present_on_page"); 
```

# tortoisesvn - SVN：如何将文件添加到 svn 并且未提交

> ID：11843914
> 
> 赞同：1
> 
> 时间：2012-08-07T10:25:28.253
> 
> 标签：tortoisesvn

我已将文件（例如 SomeFile.cs）添加到特定文件夹。我没有提交，因为我想在实现功能后立即提交。一个 svn update 在这方面工作得很好，直到有人更改了文件夹名称并更改了它下面的文件的名称。

现在第二天，当我执行 svn checkout 时，导致树级别冲突，所以我将新添加的文件复制到这个“新”位置并作为“使用他们的解决”。

该解决方案删除了​​我所有的本地文件并替换为新的文件夹和文件。我在整个计算机（包括回收站）中找不到我的本地文件（在我的工作副本中）。

现在是否至少有一个选项可以检索已添加（“添加”选项）到 svn 并且未使用“提交”提交到 svn 的文件？问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:37:19.350

AFAIK，只有提交给 svn 的文件才能恢复。但是，如果您将冲突与他们的冲突合并，那么它将在本地覆盖更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:35:25.973

您所要求的几乎与 SVN 的工作流程背道而驰。事物在提交之前不会存储在存储库中，因此不是“安全的”。你应该经常提交。

如果您正在努力工作但担心其他人的树更改会妨碍您，请考虑制作一个分支。 [http://svnbook.red-bean.com/en/1.7/svn.branchmerge.html](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.html)

但是，SVN 永远不应覆盖本地工作副本中已修改的文件。如果您执行 svn 更新，并且有人添加/更改了某些内容，您将得到一个“冲突”，您必须手动解决。您手动解决了这些冲突，并意外覆盖了您的工作。这就是为什么你应该经常提交。您提交的任何内容都可以恢复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T10:55:51.557

尝试“更新到修订版”，但由于您的文件未提交，因此在最佳情况下很可能会恢复您的目录结构。
通常，“使用他们的解决方案”选项相当于说“我搞砸了，他们是对的”-> 我所拥有的都是错误的，而他们所拥有的是正确的 -> 覆盖我的副本。

# xquery - 安全数据库中的领域在 MarkLogic 中被意外更改。现在无法访问管理界面

> ID：11843916
> 
> 赞同：0
> 
> 时间：2012-08-07T10:25:33.887
> 
> 标签：xquery, marklogic

我正在恢复 MarkLogic 中的数据库，但意外地我也更改了安全数据库。现在我无法使用我以前的管理员用户名和密码登录管理界面。我浏览了文档并了解到如果安全数据库中的领域发生更改，这可能会发生。但没有提供解决方案。我已尝试卸载并重新安装 MarkLogic，但由于这不会更改安全数据库，我仍然无法登录。我确信一定有办法重置我的登录凭据，但我找不到它。有人可以建议我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:20:06.347

怎么样：

*   停止 MarkLogic
*   移动所有数据
*   安装 MarkLogic 的干净副本
*   启动 MarkLogic

如果您有安全数据库的备份，请先恢复它。如果没有，请手动重新创建所有安全设置。之后，继续：

*   重新创建与森林名称相同的早期数据库
*   停止 MarkLogic
*   移回除安全数据之外的所有森林数据
*   启动 MarkLogic

您可以尝试摆弄一下像 assignments.xml 这样的 XML 配置，但不强烈建议这样做，并在这样做之前进行复制..

！

# ruby-on-rails - 从 I18n“翻译缺失”消息中删除 html 标签

> ID：11843924
> 
> 赞同：7
> 
> 时间：2012-08-07T10:25:57.507
> 
> 标签：ruby-on-rails, i18n-gem

在视图中考虑以下代码：

```
<%= link_to 'Delete!', item ,  :confirm => t('action.item.confirm_deletion'), :method => :delete %> 
```

它通常会显示为：

```
<a href="/items/123" data-confirm="Confirm deletion?" data-method="delete" rel="nofollow">Delete!</a> 
```

但是，如果由于某种原因（不完整的 yml 文件、错别字等）缺少**action.item.confirm_deletion**的翻译，则会显示为：

```
<a href="/items/123" data-confirm="<span class="translation_missing" title="translation missing: sv.action.item.confirm_deletion">Confirm Deletion</span>" data-method="delete" rel="nofollow">Delete!</a> 
```

这是无效的 html，用户将在主页上看到损坏的 html 标签。在某些情况下，它也可能存在安全风险。

我知道我可以在每次调用 I18n.t 函数时应用一些转义，但这对于任务来说是不必要的重复。

所以我的问题是：有没有办法让“翻译丢失”-消息不包含 html 代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T11:29:28.080

有多种解决方案适合您。

您可以将翻译方法别名为您自己的并使用自定义`:default`值调用（我更喜欢这种方式）：

```
module ActionView
  module Helpers
    module TranslationHelper
      alias_method :translate_without_default :translate

      def translate(key, options = {})
        options.merge!(:default => "translation missing: #{key}") unless options.key?(:default)
        translate_without_default(key, options)
      end
    end
  end
end 
```

或者您可以覆盖默认值：

```
module I18n
  class MissingTranslation
    def html_message
      "translation missing: #{keys.join('.')}"
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-29T14:57:55.403

在 rails 4.2 中，您必须`translate`在视图中重新定义助手：

[https://github.com/rails/rails/blob/v4.2.5/actionview/lib/action_view/helpers/translation_helper.rb#L78](https://github.com/rails/rails/blob/v4.2.5/actionview/lib/action_view/helpers/translation_helper.rb#L78)

在 rails 5 你可以在你的 application.rb 中设置：

```
config.action_view.debug_missing_translation = false 
```

# java - 难以理解我用来使 JFrame 的内容窗格透明的代码

> ID：11843925
> 
> 赞同：0
> 
> 时间：2012-08-07T10:25:57.957
> 
> 标签：java, swing

下面是我用来使内容窗格透明的代码。我不明白的是，如果我注释掉“setBackground(new Color(0,0,0,0));“我的窗口只是用渐变颜色和不透明的颜色绘制。但是使用上面的代码行使其透明。

谁能说出这个“setBackground(new Color(0,0,0,0)); ”和我为 JPanel 设置的渐变颜色之间的关系是什么。提前谢谢。

```
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.GradientPaint;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GraphicsDevice;
import java.awt.GraphicsDevice.WindowTranslucency;
import java.awt.GraphicsEnvironment;
import java.awt.Paint;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class transparent extends JFrame {

public transparent() {
    super("Transparent Window");

    setBackground(new Color(0,0,0,0));//problem with this line

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setSize(300,200);
    getContentPane().setLayout(new FlowLayout());

    JPanel jp=new JPanel(){
        public void paintComponent(Graphics g)
        {
            //super.paintComponent(g);
            Graphics2D g2=(Graphics2D)g;
            Paint gp=new GradientPaint(300, 700, new Color(20,20,210,0), 100, 00, new Color(10,20,40,255));
            g2.setPaint(gp);
            g2.fillRect(0, 0, getWidth(),getHeight());
        }
    };

    setContentPane(jp);
    JButton jbtn=new JButton("Enter");
    add(jbtn);
    setVisible(true);

}
public static void main(String[] args) {
    // TODO Auto-generated method stub

    JFrame.setDefaultLookAndFeelDecorated(true);

    SwingUtilities.invokeLater(new Runnable(){public void run(){new transparent();}});
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:36:27.573

颜色 (0,0,0,0) 是完全透明的，任何具有 alpha 分量（颜色构造器中的第四个参数）设置为零的颜色也是如此。

[http://docs.oracle.com/javase/7/docs/api/java/awt/Color.html#Color(int, int, int, int)](http://docs.oracle.com/javase/7/docs/api/java/awt/Color.html#Color%28int,%20int,%20int,%20int%29)

> ```
> public Color(int r, int g, int b, int a) 
> ```
> 
> 创建具有 (0 - 255) 范围内的指定红色、绿色、蓝色和 alpha 值的 sRGB 颜色。 **参数：**
> r - 红色分量
> g - 绿色分量
> b - 蓝色分量
> a - alpha 分量

[http://en.wikipedia.org/wiki/Alpha_compositing](http://en.wikipedia.org/wiki/Alpha_compositing)

> 在计算机图形学中，Alpha 合成是将图像与背景相结合以创建部分或完全透明外观的过程。

当您将其设置为背景时，框架将变得透明！这是至关重要的，因为如果您的框架不透明，则在顶部有一个透明面板只会让您透过该面板看到底层框架。使框架透明，让你看透背后的一切。

# java - 使用ajax异步在表中显示servlet的列表输出

> ID：11843929
> 
> 赞同：0
> 
> 时间：2012-08-07T10:26:24.077
> 
> 标签：java, ajax, servlets, asynchronous

我是 ajax 新手，不知道如何使用它在页面上异步显示来自 sevlet 的数据。此外，我**不能**使用像 jquery 这样的其他库。所以我不得不“重新发明一个轮子”，不知道它的轮子是什么样子。所以我有一个简单的 servlet，它发送到我`List`对普通 bean 的请求，这里是`doGet`：

```
public void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
        List<Category> categoryList = dao.getCategoryList();

        request.setAttribute(PARAM_NAME_CATEGORY_LIST, categoryList);

        RequestDispatcher dispatcher = getServletContext()
            .getRequestDispatcher(PRODUCT_PAGE);
        dispatcher.forward(request, response);
} 
```

转发到我的页面后，我需要在 ajax 的帮助下表示表中的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:37:14.267

加载数据并在 AJAX 中显示数据分为几个步骤：

1.  该页面向 wabapp 的 URL 发送 AJAX 请求。它注册了一个 JavaScript 回调函数，当收到对请求的响应时将调用该回调函数。
2.  webapp 生成对此请求的响应。响应的内容可以是 HTML、XML、JSON 或其他任何内容。
3.  调用 JavaScript 回调函数。
4.  JavaScript 回调函数从响应中获取数据，并更新页面的 DOM 树以显示接收到的数据。

谷歌搜索“AJAX 示例”将引导您找到大量解释如何做到这一点的教程。如果您有更具体的问题，请返回。

# jquery - 来自外部表单的 datatables.columnfilter 插件过滤器

> ID：11843939
> 
> 赞同：0
> 
> 时间：2012-08-07T10:26:48.063
> 
> 标签：jquery, datatables

我正在尝试通过数据表中的外部表单进行过滤。表格出现，但没有过滤框。我已经完全按照这些示例中所说的做了：[示例 1](http://code.google.com/p/jquery-datatables-column-filter/source/browse/trunk/external.html?r=52)和[示例 2](http://jquery-datatables-column-filter.googlecode.com/svn/trunk/external.html)

有没有人对我出错的地方有任何想法，任何帮助将不胜感激。

此外，我正在尝试从 db 表中填充选择过滤器的值，我在下面包含了我的代码，任何人都可以看到这有什么问题，因为这也不起作用。

**我的表格和数据表**

```
<table cellspacing="0" cellpadding="0" border="0" class="display" id="Table1">
    <tbody>
       <tr id="filter_global">
           <td align="center">Employee</td>
           <td align="center" id="employee"></td>
       </tr>
       <tr id="filter_col1">
           <td align="center">Division</td>
           <td align="center" id="division"></td>
       </tr>
       <tr id="filter_col2">
           <td align="center">Line manager</td>
           <td align="center" id="line_manager"></td>
       </tr>
       <tr id="filter_col3">
           <td align="center">Contract</td>
           <td align="center" id="contract"></td>
       </tr>
       <tr id="filter_col4">
           <td align="center">Entitlement</td>
           <td align="center" id="entitlement"></td>
       </tr>
   </tbody>
</table>

<table class="dataTable" id="academic_table" cellpadding="2" cellspacing="2" width="100%">
<thead>
<tr>
<th>Year</th> 
<th>Employee</th>  
<th>Division</th>
<th>Line Manager</th>
<th>Contract</th>
<th>Entitlement</th>
<th>Units</th>
</tr> 
</thead>
<tbody>
    <tr>
        <td colspan="4" class="dataTables_empty">Loading data from server</td>
    </tr>
</tbody>

<tfoot>
<tr>
<th>Year</th> 
<th>Employee</th>  
<th>Division</th>
<th>Line Manager</th>
<th>Contract</th>
<th>Entitlement</th>
<th>Units</th>
</tr> 
</tfoot>
</table>
</div> 
```

**用于选择值的 db**

```
$line_managers_filter = mysql_query("SELECT name FROM line_managers");
$division_filter = mysql_query("SELECT name FROM divisions"); 
```

**初始化数据表列过滤器等。**

```
 var $acTable= $("#academic_table").dataTable( {
            "oLanguage": {
                "sSearch": "Filter:"
            },
            "bProcessing": true,
            "bServerSide": true,
            "sAjaxSource": "scripts/academic_serverside.php",
        "iDisplayLength": 10,       
            "bJQueryUI": false,
            "sPaginationType": "scrolling",
            "sDom": '<"clear"><"top"CTilr<"clear">pt>',
            "aoColumns": [ 
                {"bVisible":false},
                {"bVisible":true},
                {"bVisible":true},
                {"bVisible":true},
                {"bVisible":true},
                {"bVisible":true},
                {"bVisible":false}
            ],
            "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
            $('td:eq(4)', nRow).html(''+ aData[5] +'&nbsp;'+ aData[6] +'');
            },
            "oTableTools": {
                "sSwfPath": "swf/copy_csv_xls_pdf.swf"
            },
            "oColVis": {
                "activate": "mouseover",    
                "aiExclude": [0,6]
            }
        }).columnFilter({   
                aoColumns: [ 
                        { type: "select"},
                        { type: "text", sSelector: "#employee" },
                        { type: "select", values : [<?php 
                                                $tmp = Array();
                                                foreach($division_filter as $row) $tmp[] = '{value: "'.$row['name'].'"}'; 
                                                    echo join(',', $tmp);
                                                    ?>], 
                          sSelector: "#division" },
                        { type: "select", values : [<?php 
                                                $tmp = Array();
                                                    foreach($line_managers_filter as $row) $tmp[] = '{value: "'.$row['name'].'"}'; 
                                                    echo join(',', $tmp);
                                                    ?>], 
                        sSelector: "#line_manager"},
                        { type: "select", values : ["A", "B", "C"], sSelector: "#contract"},
                        { type: "text", sSelector: "#entitlement"},
                        { type: "text"}
                    ]
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T10:09:23.907

你错过了 sPlaceHolder: **"head:before"**

```
.columnFilter({
                sPlaceHolder: "head:before",
                aoColumns: [
                    { sSelector: "#filter #column1" }
                ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T12:18:23.610

检查“ **jquery.dataTables.columnFilter.js** ”的版本是否为**1.5**或更高版本。

# vba - VBA - 尝试实现继承

> ID：11843940
> 
> 赞同：2
> 
> 时间：2012-08-07T10:26:56.993
> 
> 标签：vba, inheritance

我正在尝试通过以下方式在 VBA 中实现继承 -

我有一个类模块`clsRange`，如下所示

```
Private strRngName as String

Public Property Let RangeName(ByVal thisRangeName As String)
    strRngName = thisRangeName
End Property

Public Property Get RangeName() As String
    RangeName= strRngName
End Property 
```

另一个类模块`clsChildRange`

```
private rngHolder as New clsRange

Public Property Get RangeName() As String
   Set RangeName = rngHolder.RangeName
End Property

Public Property Let RangeName(ByVal thisRangeName As String)
    rngHolder.RangeName = thisRangeName
End Property 
```

我有一个模块，我正在尝试为 clsChildRange 创建一个对象并尝试按以下方式设置 clsRange 的属性

```
Dim objCRng  as New clsChildRange

objCRng.RangeName= "Range1" 
```

但我得到一个错误 - 对象变量或未设置块变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T16:20:11.063

正如 Uri 所说， rngHolder 没有被实例化，这导致了问题。不要测试 Null，但要测试 Is Nothing。这里有两种方法可以做到这一点，具体取决于您要完成的工作。

**显式设置范围**

在 CRange

```
Private msRngName As String

Public Property Let RngName(ByVal sRngName As String): msRngName = sRngName: End Property
Public Property Get RngName() As String: RngName = msRngName: End Property 
```

在 CChildRange

```
Private mclsRange As CRange

Public Property Set Range(ByVal clsRange As CRange): Set mclsRange = clsRange: End Property
Public Property Get Range() As CRange: Set Range = mclsRange: End Property

Public Property Get RngName() As String

    If Not Me.Range Is Nothing Then
        RngName = Me.Range.RngName
    End If

End Property

Public Property Let RngName(sName As String)

    If Not Me.Range Is Nothing Then
        Me.Range.RngName = sName
    End If

End Property 
```

然后在标准模块中

```
Sub test()

    Dim clsRange As CRange
    Dim clsChildRange As CChildRange

    'Create a new CRange instance
    Set clsRange = New CRange

    'Create a new CChildRange instance
    Set clsChildRange = New CChildRange

    'Set the Range property to the CRange instance
    Set clsChildRange.Range = clsRange

    'Set the RngName property of the chile
    clsChildRange.RngName = "Range1"

    'Test that the parent has the property set
    Debug.Assert clsRange.RngName = "Range1"

End Sub 
```

**隐式设置范围**

CRange 是一样的。

在 CChildRange

```
Private mclsRange As CRange

Public Property Set Range(ByVal clsRange As CRange): Set mclsRange = clsRange: End Property
Public Property Get Range() As CRange: Set Range = mclsRange: End Property

Public Property Get RngName() As String

    RngName = Me.Range.RngName

End Property

Public Property Let RngName(sName As String)

    Me.Range.RngName = sName

End Property

Private Sub Class_Initialize()

    Set mclsRange = New CRange

End Sub

Private Sub Class_Terminate()

    Set mclsRange = Nothing

End Sub 
```

然后在标准模块中

```
Sub test()

    Dim clsChildRange As CChildRange

    'Create a new CChildRange instance
    'Range object created when class is created
    Set clsChildRange = New CChildRange

    'Set the RngName property of the chile
    clsChildRange.RngName = "Range1"

    'Test that the parent has the property set
    Debug.Assert clsChildRange.Range.RngName = "Range1"

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:56:21.713

我怀疑 rngHolder 成员在这件事上没有被初始化，试试这个代码

```
private rngHolder as clsRange

Public Property Get RangeName() As String
   If rngHolder=Null Then Set rngHolder=New clsRange
   Set RangeName = rngHolder.RangeName
End Property

Public Property Let RangeName(ByVal thisRangeName As String)
    If rngHolder=Null Then Set rngHolder=New clsRange
    rngHolder.RangeName = thisRangeName
End Property 
```

# log4j - Log4J 将空行打印到日志文件

> ID：11843941
> 
> 赞同：5
> 
> 时间：2012-08-07T10:27:00.343
> 
> 标签：log4j, line, logfile

在 java 中，您可以使用 System.out.println() 打印一个空行，但它如何与 log4j 在日志文件中一起工作？我还想在日志文件中有一个或多个空行。

我已经阅读了以下内容： [log4j 如何附加空白行](https://stackoverflow.com/questions/10531684/log4j-how-to-append-blank-line)

但这并没有真正的帮助，因为

```
logger.debug("\n");
logger.debug(""); 
```

您不打印消息，但时间等其他信息（记录器的布局）仍存储在日志文件中。但我只想有一个完全空行。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T11:56:13.420

Log4j 不是为写空行而设计的。

您在记录器中找不到此选项，因为记录器独立于写入文件或控制台或其他东西的附加程序。

我认为您需要创建自定义 FileAppender，它会在写入之前检查日志消息。如果您`message.equals("\n");`通过自己访问文件来附加一个没有布局的空行并跳过带有布局的正常日志记录。那么你可以使用`Logger.debug("\n");`

此外，添加空行也是一种不好的做法。它类似于将您的日志消息拆分为几行。您希望所有的 Logmessage 都在一行中，因此它们很容易解析为 LogViewer-Tools，如[链锯](http://logging.apache.org/chainsaw/)或[OtrosLogViewer](http://code.google.com/p/otroslogviewer/)一个例外是 Stacktraces。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T14:58:58.560

创建您自己的具有空布局的附加程序和使用该附加程序的记录器。然后使用该记录器写入空白行。确保将 logger 的 additivity 属性设置为 false，以便根 logger 不会使用其 appender 的格式写入消息。

# ruby - 回形针没有在帕德里诺上保存附件

> ID：11843942
> 
> 赞同：1
> 
> 时间：2012-08-07T10:27:03.770
> 
> 标签：ruby, paperclip, padrino

我正在使用 padrino 建立一个站点。我使用回形针将徽标上传到其中一个模型。我遇到的问题是 Paperclip 不保存附件，但也没有抛出任何错误。我认为传递给控制器​​的参数类型不正确，因为它`params[:logo]`是一个散列，应该是某种文件类型？我怎样才能让回形针保存参数中传递的附件？

该模型：

```
class Charity < ActiveRecord::Base
  include Paperclip::Glue

  attr_accessible :name, :description, :logo
  has_attached_file :logo, path: "/public/:attachment/:id/:basename.:extension"
end 
```

徽标在控制器中设置如下：

```
post :create do
  @charity = Charity.new(params[:charity])
  if @charity.save!
    flash[:notice] = 'Charity was successfully created.'
    redirect url(:charities, :edit, id: @charity.id)
  else
    render 'charities/new'
  end
end 
```

将参数传递给控制器​​的表单如下所示（为简洁起见，省略了部分）：

```
- form_for :charity, url(:charities, :create), multipart: true, class: :form do |f|
  (...)
  .group
    ==f.label :logo
    ==f.error_message_on :logo
    ==f.file_field :logo
  (...) 
```

我正在使用 Paperclip 2.7.0 和 Padrino 0.10.7。我还根据[Using Paperclip with Padrino](https://stackoverflow.com/questions/8612139/using-paperclip-with-padrino)将此添加到 boot.rb ：

```
Padrino.before_load do
  File.send(:include, Paperclip::Upfile)

  Paperclip.options[:logger] = Padrino.logger
  Paperclip.options[:command_path] = "/usr/local/bin"

  ActiveRecord::ConnectionAdapters::AbstractAdapter.send(:include, Paperclip::Schema)
  ActiveRecord::ConnectionAdapters::Table.send(:include, Paperclip::Schema)
  ActiveRecord::ConnectionAdapters::TableDefinition.send(:include, Paperclip::Schema)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:25:12.033

嗯，我不知道。也许是这样：

`path: Padrino.root('/public/:attachment/:id/:basename.:extension')`

你能进去`padrino console`试试：

```
>> require 'open-uri'
>> puts Paperclip.default_options
>> c = Charity.create!
>> c.logo = open('http://1.bp.blogspot.com/-0Hn3AjTJj6U/TZHe3ragXGI/AAAAAAAAA1M/_SBk3dx61EE/s1600/med_funny-cat.jpg')
>> c.save! 
```

# boost - 是否可以从它的 typedef 中找到 boost::function 的返回类型？

> ID：11843948
> 
> 赞同：1
> 
> 时间：2012-08-07T10:27:38.687
> 
> 标签：boost, boost-function

是否可以纯粹从 typedef 中找到 boost::function 的返回类型？

例子：

```
typedef boost::function<bool (int, float)> CallbackType1;
typedef boost::function<float (int, float)> CallbackType2; 
```

如何找到上述函数类型的返回类型？

我不确定在我的目标构建系统中是否可以使用 c++0x 功能，但欢迎任何解决方案。

非常感谢伙计们，
萨克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:35:40.053

Boost.Function 里面有一个 typedef，叫做[return_type](http://www.boost.org/doc/libs/1_50_0/doc/html/boost/functionN.html)应该可以解决问题：

```
typedef CallbackType1::result_type CallbackType1ReturnType; 
```

不需要魔法。

# php - 在 Web 根文件夹之外提供文档。

> ID：11843950
> 
> 赞同：1
> 
> 时间：2012-08-07T10:27:44.570
> 
> 标签：php, pdf

我有一个名为“viewDoc”的函数，它应该转到 Web 根目录之外的文件夹并为我获取文件。它可以与图像（Jpgs 等）一起使用，但使用 PDF 时，它只会输出一个空白的灰色页面，如此处所示 - [http://www.tutorplanner.com/userimage/viewdoc/12787622467.pdf](http://www.tutorplanner.com/userimage/viewdoc/12787622467.pdf)

谁能看到我做错了什么，因为我已经为此挠头一天了！

```
public function viewDoc($doc) {

        $path_parts = pathinfo($_SERVER['REQUEST_URI']);
        $file = $doc;
        $fileDir = '/var/uploads/';

        if (file_exists($fileDir . $file))
        {

            $contents = file_get_contents($fileDir . $file);
            //print_r($contents);
            header('Content-Type: ' . mime_content_type($fileDir . $file));
            header('Content-Length: ' . filesize($fileDir . $file));
            readfile($contents);
        }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:32:32.130

[readfile](http://php.net/manual/en/function.readfile.php)与文件名参数一起使用 - 不是文本。

两个可行的例子（file_get_contents）：

```
public function viewDoc($doc) {

        $path_parts = pathinfo($_SERVER['REQUEST_URI']);
        $file = $doc;
        $fileDir = '/var/uploads/';
        $filePath = $fileDir . $file;

        if (file_exists($filePath))
        {
            $contents = file_get_contents($filePath);
            header('Content-Type: ' . mime_content_type($filePath));
            header('Content-Length: ' . filesize($filePath));
            echo $contents;
        }
} 
```

或（读取文件）：

```
public function viewDoc($doc) {
        $path_parts = pathinfo($_SERVER['REQUEST_URI']);
        $file = $doc;
        $fileDir = '/var/uploads/';
        $filePath = $fileDir . $file;

        if (file_exists($filePath))
        {
            header('Content-Type: ' . mime_content_type($filePath));
            header('Content-Length: ' . filesize($filePath));
            readfile($filePath);
        }
} 
```

我还`$filePath`为您添加了变量，因为没有理由多次连接字符串。

**编辑**

作为额外的安全性，对于 Yazmat 的评论，您可以使用`$file = str_replace(array('..', '/'), '', $doc);`它，因为这将删除对其他目录的所有引用（但是，使用斜杠它也会删除对子目录的访问，因此您可能希望跳过它，取决于您的代码和文件结构）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:32:54.953

您在这里有一个很大的安全问题，任何人都可以使用您编写的函数访问您服务器上的任何内容。我真的建议您不要使用它，只需将您的文件（应该可以访问）放在公共网络目录中。

# windows-phone-7 - 在 wp7 应用程序中从 Web 下载文件

> ID：11843961
> 
> 赞同：2
> 
> 时间：2012-08-07T10:28:26.603
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone

> **可能重复：**
> [以编程方式在 Windows phone 7 中启动其他应用程序](https://stackoverflow.com/questions/5042353/launching-other-applications-in-windows-phone-7-programatically)

我创建了一个应用程序，在其中我从网络上为我的应用程序下载图像/文件和其他文档，但我需要它们使用**默认文件启动器**打开，例如 pdf 应该通过 adobe pdf 查看器打开。

*目前我已经使用webbrowsertask*使用外部网络浏览器实现了这一点。我希望它使用 webclient 或 webbrowser 控件在应用程序中发生。我尝试了这两种方法，它们适用于图像和文本文件，但适用于 pdf。还有其他方法吗？

Windows 8 具有启动默认文件处理程序的本机功能。WP7中有类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:12:10.457

帕特里克提供的链接说明了一切。您无法下载和打开图像和音乐文件以外的文件。PDF/DOC 等文件需要通过 webbrowsertask 打开，因此该文件将落入正确应用程序的独立存储中（适用于 PDF - Acrobat Reader）。如果您下载该文件，它将属于您的应用程序的独立存储，并且 Acrobat 将无权访问该文件。

# mysql - 如何合并不同的 MySQL 数据库？

> ID：11843963
> 
> 赞同：0
> 
> 时间：2012-08-07T10:28:32.093
> 
> 标签：mysql, database, import

我有一个旧数据库，我想将其导入新数据库，但它们的列不同。如何在不丢失或更改旧数据库的情况下导入它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:31:37.810

首先，找出旧数据库中的哪些表（及其列）与新数据库中的哪些表（及其列）匹配。

然后，使用旧数据库中的 SELECT 在新数据库中创建一个插入序列...

查看处理 INSERT...SELECTs[的 MySQL 文档的这一部分。](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

# ios - Facebook SDK 3.0：如何接收用户的邮件？

> ID：11843968
> 
> 赞同：25
> 
> 时间：2012-08-07T10:28:53.563
> 
> 标签：ios, facebook, sdk

在“旧”FB iOS SDK 中，我可以通过以下方式接收用户信息：

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"SELECT uid, name, email, pic FROM user WHERE uid=me()", @"query",
                                   nil];

    JBFacebookManager *fbManager = [JBFacebookManager getInstance];
    fbManager.requestDelegate = self;

    [fbManager.facebook requestWithMethodName:@"fql.query"
                                     andParams:params
                                 andHttpMethod:@"POST"
                                   andDelegate:self]; 
```

如何使用新的 FB iOS SDK 3.0 做到这一点？我是否需要使用`FBRequest`或`FBOpenGraphAction`或`FBGraphObject`或这些或完全不同的东西的组合？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-07T10:48:52.307

```
if (FBSession.activeSession.isOpen) {
    [[FBRequest requestForMe] startWithCompletionHandler:^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
         if (!error) {
             self.nameLabel.text = user.name;
             self.emailLabel.text = [user objectForKey:@"email"];
         }
     }];
} 
```

因为`FBGraphUser`没有 email `@property`，我们无法访问名称（点语法）等信息，但是 NSDictionary 仍然有 email kv-pair，我们可以像使用普通 NSDictionary 一样访问它。

不要忘记请求电子邮件许可：

```
NSArray *permissions = [[NSArray alloc] initWithObjects:@"email", nil];
[FBSession sessionOpenWithPermissions:permissions completionHandler:
 ^(FBSession *session, FBSessionState state, NSError *error) {
     [self facebookSessionStateChanged:session state:state error:error];
 }]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-22T00:04:59.310

一旦您可以访问`(id<FBGraphUser>)user`，您可以简单地使用 , `user[@"email"]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T10:47:31.760

你读过3.0 SDK的源代码吗？有一种方法我认为是相同的：

```
- (FBRequest*)requestWithMethodName:(NSString *)methodName
                          andParams:(NSMutableDictionary *)params
                      andHttpMethod:(NSString *)httpMethod
                        andDelegate:(id <FBRequestDelegate>)delegate; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-22T12:12:01.550

从中我们可以得到 facebook 用户的基本信息和电子邮件 ID。

```
[FBSession openActiveSessionWithReadPermissions:@[@"basic_info",@"email"] allowLoginUI:YES completionHandler:^(FBSession *session,FBSessionState status,NSError *error){
        if(error)
        {
            NSLog(@"Facebook Error : %@",error.localizedDescription);
        }
        else{

        }
        // Respond to session state changes,
        // ex: updating the view

    }]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-21T12:05:14.703

登录后获取信息的最简单方法是：

```
-(IBAction)loginWithFacebook:(id)sender{
FBSDKLoginManager *login = [[FBSDKLoginManager alloc] init];
[login
 logInWithReadPermissions: @[@"public_profile",@"email"]
 fromViewController:self
 handler:^(FBSDKLoginManagerLoginResult *result, NSError *error) {
     if (error) {
         NSLog(@"Process error");
     } else if (result.isCancelled) {
         NSLog(@"Cancelled");
     } else {
         NSLog(@"Logged in");
         [self getFacebookProfileInfos];

     }
  }];
}

-(void)getFacebookProfileInfos {
NSDictionary *parameters = @ {@"fields": @"id, name, first_name, last_name, picture.type(large), email"};
if ([FBSDKAccessToken currentAccessToken]) {
    [[[FBSDKGraphRequest alloc] initWithGraphPath:@"me" parameters:parameters]
     startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection, id result, NSError *error) {
         if (!error) {
             NSLog(@"fetched user:%@", result);
         }
     }];
} 
```

}

您将获得结果的所有信息。

# ruby-on-rails - 在我重新启动 Rails 服务器之前，我在控制器和模型中所做的任何更改都不会反映

> ID：11843970
> 
> 赞同：2
> 
> 时间：2012-08-07T10:29:02.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我已将我的 rails 应用程序从 rails 2x 升级到 3.2.3。但面临一个奇怪的问题。在我重新启动 Rails 服务器之前，我在控制器和模型中所做的任何更改都不会反映出来。缓存在我的 development.rb 中被禁用为

`config.cache_classes = false`

`config.action_controller.perform_caching = false`

但它不起作用。我什至尝试将我的 rails 版本更新到 3.2.5

我的应用程序配置是

Ruby 版本：带有 RVM 的 ruby​​ 1.9.3p194

导轨版本：3.2.3

应用服务器：webrick

网络服务器：阿帕奇

提前致谢

# jquery - jquery serializeArray 值并在 textarea 中写入结果

> ID：11843974
> 
> 赞同：0
> 
> 时间：2012-08-07T10:29:12.230
> 
> 标签：jquery, forms, serializearray

我有一个小问题，我似乎无法理解。我正在尝试使用**jQuery 的 .serialiseArray**函数将多个输入和 textarea 值组合到单个 textarea 中，以便在提交表单时使用。

我创建了以下 JS Fiddle 来突出显示我当前的代码：http: [//jsfiddle.net/4XjhB/2/](http://jsfiddle.net/4XjhB/2/)

正如您将看到的，*我已经能够将值组合到数组中，但我似乎无法让数组将每个值写入textarea**的新行***。它只写入最后一个输入。

我还包含了一个 div 以显示它在 textarea 之外工作

请让我知道我哪里出错了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:38:21.163

您应该收集所有值，当您调用 .val() 时，它会替换 textarea 的值，但不附加它； [http://jsfiddle.net/4XjhB/3/](http://jsfiddle.net/4XjhB/3/)

# python - 使用 python "app and abcd" 将这些值添加到列表中 ["app", "and","abcd"] 输出

> ID：11843980
> 
> 赞同：-2
> 
> 时间：2012-08-07T10:29:23.583
> 
> 标签：python

我有要在列表中转换的文本

```
"app and a.b.c.d" 
```

输出应该是

```
["app", "and", "a.b.c.d"] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T10:29:58.793

```
>>> "app and a.b.c.d".split()
['app', 'and', 'a.b.c.d'] 
```

# java - Quartz Scheduler 仅在尚未运行时才执行作业

> ID：11843981
> 
> 赞同：0
> 
> 时间：2012-08-07T10:29:24.223
> 
> 标签：java, cron, quartz-scheduler, crontrigger

在我的 java web 应用程序中，我使用 Quartz CronTrigger Bean 来安排作业的执行。在我的配置 xml 文件中，我想每 10 分钟触发一次作业：

```
<bean id="cronTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean">
    <property name="jobDetail" ref="processToExecuteJob" />
    <property name="cronExpression" value="0 0/10 * * * ?" />
</bean> 
```

我如何检查作业是否已经在运行，在这种情况下我不需要再次运行它。我想确保在特定时间只能运行一个作业实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:33:09.680

在我从事的一个旧项目中，我遇到了类似的问题。我认为在这种情况下一个优雅的解决方案总是单例模式

[http://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

# android - 在 Android 中使用 Android SQLite 数据绘制 Bar char？

> ID：11843982
> 
> 赞同：-1
> 
> 时间：2012-08-07T10:29:31.257
> 
> 标签：android, sqlite, bar-chart

我想使用基于 Android SQLite 数据库数据的 Android 绘制条形图。请向我发送任何有用的链接或示例，以便我了解我对 Android 中的数据分析非常陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T10:41:44.137

我想你需要这个...

```
- AFreeChart is a free charting library for Android(tm) platform.

- AFreeChart is based on JFreeChart 1.0.13. 
```

非常容易使用...演示很容易获得...您可以从[这里获取](http://code.google.com/p/afreechart/)

![在此处输入图像描述](../Images/fda49f1c9d9cbd3c6072d0f8393018a4.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T10:35:49.850

如果可以将数据发送到服务器并假设有互联网连接，那么我认为 Android 上的最佳解决方案是使用[Google Chart Tools](https://developers.google.com/chart/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-07T10:56:46.633

我使用[AChartEngine](http://www.achartengine.org/content/demo.html)使用来自 SQLite 的数据来呈现条形图。实际上，您的数据来源无关紧要。从 SQLite 查询数据后，您可以使用图表引擎的 API 填充图表。

与在 LGPL 下分发的 AFreeChart 相比，AChartEngine 是在更允许的 Apache 2.0 许可下发布的。

![在此处输入图像描述](../Images/9cf87e6ef49092d636da2c2f7350c5f2.png)

# java - App Engine 中的 JDO：拥有关系如何不依赖？

> ID：11843985
> 
> 赞同：0
> 
> 时间：2012-08-07T10:29:41.310
> 
> 标签：java, google-app-engine, google-cloud-datastore, jdo

引用 GAE 文档：

> 拥有的关系可以是“依赖关系”，这意味着子关系不能没有父关系而存在。如果关系是依赖关系并且删除了父对象，则所有子对象也将被删除。

因此，如果拥有的关系**不**依赖，则意味着如果父实体被删除，它不会影响子实体。但是根据文档中的另一个引用，这应该是不可能的：

> 实体与其父级之间的这种关联是永久性的，一旦创建实体就无法更改。

如果我正确理解了文档，那么无主关系的重点是拥有关系是针对同一实体组中的实体，无主关系是来自不同实体组的实体，对吧？实体组具有树状层次结构，因此具有非依赖拥有关系意味着可以删除实体组的根实体而不删除子实体......这没有意义。

那么它是如何真正起作用的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:12:13.067

> 实体与其父级之间的这种关联是永久性的，一旦创建实体就无法更改。

这仅意味着您不能通过将实体替换为另一个父级或删除关系来更改实体的父级。

但是，您可以完全删除父实体，但这不会更改实体的实体组：[删除实体的祖先对其路径有什么影响？](https://stackoverflow.com/questions/2499654/what-is-the-effect-of-deleting-an-entitys-ancestor-on-its-path)

# node.js - 使用 express/mongoose 的嵌套查询

> ID：11843986
> 
> 赞同：0
> 
> 时间：2012-08-07T10:29:45.070
> 
> 标签：node.js, mongodb, express, mongoose

我有一个标签集合，它们只有一个值，即标签。它们可以是随机标签或树标签（这里是没有 的示例`_id`）：

```
{
    "label": "/test1"
}
{
    "label": "/test2"
}
{
    "label": "/test1/test1-1"
}
{
    "label": "/test2/test2-1"
}
{
    "label": "/test1/test1-1/test1-1-1"
}
{
    "label": "something"
} 
```

我想要的是有一个带有标签树的对象：

```
{
    "/test1": {
        "name": "test1"
      , "children": {
            "/test1/test1-1" : {
                "name": "test1-1"
              , "children": {
                    "/test1/test1-1/test1-1-1" : {
                        "name": "test1-1-1"
                      , "children": {}
                    }
                }
            }
        }
    }
  , "/test2": {
        "name": "test2"
      , "children": {
            "/test2/test1-2" : {
                "name": "test1-2"
              , "children": {}
           }
       }
   }
} 
```

这是我在我的应用程序中尝试过的：

```
app.get('/tree', function(req, res, next) {
    var tree = {};
    Tag
    // If you have a better solution, I'm not really fan of this
    .$where('this.label.split(new RegExp("/")).length === 2')
    .exec(function(err, tags) {
        tags.forEach(function(tag) {
            tag.getChildren(function(children) {
                tree[tag.label] = {
                    'title':    tag.label
                  , 'children': children
                }
            });
        });
    });
    // do some stuff with the `tree` var
    // which does not work because of the asynchronousity of mongo
}); 
```

在我的模型中，它不起作用，起初我想用 with 返回树的路径，`tag.getChildren()`但后来，我认为回调将是一个更好的选择，我停在那里。

```
Tag.methods.getChildren = function(callback) {
    var tree = {};
    Tag
    .$where('this.label.split(new RegExp("' + this.label + '/")).length === 2')
    .exec(function(err, tags) {
        tags.forEach(function(tag) {
            tag.getChildren(function(children) {
                tree[tag.label] = {
                    'title':    tag.label
                  , 'children': children
                }
            });
        });
        return tree
    });
}; 
```

我不知道该怎么做，我对 Node 和异步编程还很陌生，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:20:49.143

在这个例子中做多个 Mongo 请求是愚蠢的，所以我只做了一个，解析结果并创建我的树，如果有人有同样的问题，这是我的代码：

```
app.get('/tree', function(req, res, next) {
    var tree = {}
    Tag
    .find({ label: { $regex: /^\// } }, ['label'])
    // Skip the "/"
    .skip(1)
    .exec(function(err, tags) {
        tags.forEach(function(tag) {
            var split = tag.label.split('/');
            // Root
            if (split.length === 2) {
                tree[_.slugify(split[1])] = {
                    title: split[1]
                  , children: {}
                }
            } else {
                var name = split.pop()
                  , path = tag.label
                  , pathSlug = _.slugify(path.replace(/\//g, '-'))
                  , parentPath = path.split('/')
                  , parentSlug = ''
                  , parent;
                parentPath.shift();
                parentPath.pop();
                parentPath.forEach(function(step) {
                    step = parentSlug ? parentSlug + '-' + _.slugify(step) : _.slugify(step);
                    parentSlug = step;
                    parent = parent ? parent.children[step] : tree[step];
                });
                if (!parent) {
console.error('ERROR :')
console.log(tag.label)
console.log(path.split('/'))
console.log(name)
console.error('##################')
                } else {
                    parent.children[pathSlug] = {
                        title: name
                      , children: {}
                    }
                }
            }
        });
        res.send(tree, 200);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:00:44.710

You probably should look into the async.js module, which has some support for doing an iteration that calls asynchonous code on each step and executing a callback when all the async code is done.

# c# - C# - 文件大小转换（字节到 GB）

> ID：11843987
> 
> 赞同：0
> 
> 时间：2012-08-07T10:29:51.700
> 
> 标签：c#, sql, filesize

我在将字节转换为千兆字节时遇到了一些问题，我有这个代码片段，

```
 public static string FormatBytes(long bytes)
    {
        const int scale = 1024;
        string[] orders = new string[] { "GB", "MB", "KB", "Bytes" };
        long max = (long)Math.Pow(scale, orders.Length - 1);
        foreach (string order in orders)
        {
            if (bytes > max)
            {
                return string.Format("{0:##.##} {1}", Decimal.Divide(bytes, max), order);
            }

            max /= scale;
        }
        return "0 Bytes";
    } 
```

将尺寸打印到控制台应用程序时效果很好。但我不知道如何将它实现到我的代码的这个（下面）部分，以便在将文件插入我的 SQL 表时转换文件大小。

```
List<DriveInfo> driveList = DriveInfo.GetDrives().Where(x=>x.IsReady).ToList<DriveInfo>();

        //Insert information of one server - You will need get information of all servers
        server.ServerID = 0; //Here is necessery put PK key. I recommend doing the SQL server will automatically generate the PK.
        server.ServerName = string.Concat("Server ", driveList.Count);

        //Inserts information in the newServers object
        for (int i = 0; i < driveList.Count; i++)
        {

            ServerDrive serverDrives = new ServerDrive();

            //Put here all the information to obeject Server                
            serverDrives.DriveLetter = driveList[i].Name;
            serverDrives.TotalSpace = driveList[i].TotalSize;
            serverDrives.DriveLabel = driveList[i].VolumeLabel;
            serverDrives.FreeSpace = driveList[i].TotalFreeSpace;
            serverDrives.DriveType = driveList[i].DriveFormat;

            //      server.ListServerDrives.Add(serverDrives);
            server.ServerDrives.Add(serverDrives);

        } 
```

任何帮助/反馈将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:40:22.220

不要将这种格式放入您的数据库中。如果您只是将字节数存储在那里，然后在将其呈现给用户时对其进行格式化，那就更好了。您将遇到的第一个问题是在对可用空间进行排序时（例如），您可能会得到一个这样的列表。

```
Drive       Free Space
C           12 GB
E           13 Bytes
D           16 MB 
```

因此，最好将实际金额存储在那里，以便您可以正确处理数据。无论如何，如果您坚持并想要存储它，那么您只需像这样添加它。

```
serverDrives.DriveLetter = driveList[i].Name;
serverDrives.TotalSpace = FormatBytes(driveList[i].TotalSize);
serverDrives.DriveLabel = driveList[i].VolumeLabel;
serverDrives.FreeSpace = FormatBytes(driveList[i].TotalFreeSpace);
serverDrives.DriveType = driveList[i].DriveFormat; 
```

请记住，这将要求您的 TotalSpace 和 FreeSpace 列是数据库中的字符串/varchar，而不是数字。

# iphone - 应用程序错误尝试以模态方式呈现拆分视图控制器

> ID：11843991
> 
> 赞同：0
> 
> 时间：2012-08-07T10:30:07.253
> 
> 标签：iphone, ios, xcode, ipad

我正在使用故事板，我想加载一组特定的 XIB，问题是我收到了这个错误：

```
'NSInvalidArgumentException', reason: 'Application tried to present a Split View Controllers modally <PlaceHolderViewController: 0x38e890> 
```

在`PlaceHolderViewController`我有一个使用此代码加载 xib 的按钮中，我从 iPhone 加载 xib 没有问题，但在 iPad 上我遇到了这个问题。

这是代码：

```
- (IBAction)actionButtonConversor:(id)sender {
    ConverterViewController *converterViewController;
    UnitSelectViewController *unitSelectViewController;

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        converterViewController = [[ConverterViewController alloc] initWithNibName:@"ConverterViewController_iPhone" bundle:nil];
        unitSelectViewController= [[UnitSelectViewController alloc] initWithNibName:@"UnitSelectViewController_iPhone" bundle:nil];
        self.navigationController = [[UINavigationController alloc] initWithRootViewController:converterViewController];
        self.navigationController.navigationBar.tintColor = [UIColor colorWithRed:0.0f green:0.48235297203063965f blue:0.63137257099151611f alpha:1];
        [self presentModalViewController:self.navigationController animated:YES];
    } else {
        converterViewController = [[ConverterViewController alloc] initWithNibName:@"ConverterViewController_iPad" bundle:nil];
        unitSelectViewController= [[UnitSelectViewController alloc] initWithNibName:@"UnitSelectViewController_iPad" bundle:nil];
        UINavigationController *masterNavigationController = [[UINavigationController alloc] initWithRootViewController:unitSelectViewController];
        UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:converterViewController];
        masterNavigationController.navigationBar.tintColor = [UIColor colorWithRed:0.0f green:0.48235297203063965f blue:0.63137257099151611f alpha:1];
        detailNavigationController.navigationBar.tintColor = [UIColor colorWithRed:0.0f green:0.48235297203063965f blue:0.63137257099151611f alpha:1];

        self.splitViewController = [[UISplitViewController alloc] init];

        self.splitViewController.delegate = converterViewController;

        self.splitViewController.viewControllers = [NSArray arrayWithObjects:masterNavigationController, detailNavigationController, nil];
        [self presentModalViewController:self.splitViewController animated:YES]; // ERROR comes from here i think
    }

    unitSelectViewController.delegate = converterViewController;
    converterViewController.unitSelectViewController = unitSelectViewController;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T20:40:48.313

问题看起来很明显。以下是从`UISplitViewController`文档中复制的：

> “您必须始终将 UISplitViewController 对象中的视图安装为应用程序窗口的根视图。[...] 拆分视图控制器不能以模态方式呈现。”

换句话说，你看到的是预期的行为。

# html - 我可以用 css3 和 html5 得到它吗？（渐变背景、边框渐变、透明度）

> ID：11843993
> 
> 赞同：0
> 
> 时间：2012-08-07T10:30:25.740
> 
> 标签：html, gradient, opacity, css

这是我的按钮的设计（例如不同的背景，缩放 ~1500% 和实际大小）。我如何使用单个元素和一些 css3 或最少的附加元素来做到这一点？CSS大师，有人吗？

[http://ompldr.org/vZjBudQ/button.png](http://ompldr.org/vZjBudQ/button.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:04:32.553

HTML

```
<a href="#" class="button"></a>​ 
```

CSS

```
.button {
    position: relative;
    z-index: 1;
    display: block;
    width: 22px;
    height: 22px;
    background: -webkit-linear-gradient(#f5f0ee, #e7ddd7);
    background: -ms-linear-gradient(#f5f0ee, #e7ddd7);
    background: -moz-linear-gradient(#f5f0ee, #e7ddd7);
    background: linear-gradient(#f5f0ee, #e7ddd7);
    border: 1px solid #c0b9b3;
    border-radius: 3px;
    box-shadow: inset 0px 1px #fcfbfb, 0px 1px rgba(0, 0, 0, 0.3);
}

.button:before {
    content: "";
    position: absolute;
    left: -4px;
    top: -4px;
    z-index: -1;
    padding: 4px;
    width: 22px;
    height: 22px;
    background: -webkit-linear-gradient(rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0));
    background: -ms-linear-gradient(rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0));
    background: -moz-linear-gradient(rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0));
    background: linear-gradient(#f5f0ee, #e7ddd7);
    border-radius: 3px;
    box-shadow: 0px 1px rgba(255, 255, 255, 0.3);
} 
```

[JSF](http://jsfiddle.net/EZp8d/)中。

我认为我唯一无法得到的是渐变边框。

# meteor - 如何可靠地判断特定对象是否是 Meteor Collection 对象（在客户端）

> ID：11843996
> 
> 赞同：2
> 
> 时间：2012-08-07T10:30:44.690
> 
> 标签：meteor

我有一个接收 Meteor Collection 对象的函数（由 生成`new Meteor.Collection("lol_cats")`）

我如何可靠地判断任何特定对象是否是这样的 Meteor Collection 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:06:31.670

使用 Javascript 的`instanceof`运算符：`if (x instanceof Meteor.Collection)`.

# javascript - 与元素的分组实时绑定的颜色框将不起作用

> ID：11843998
> 
> 赞同：4
> 
> 时间：2012-08-07T10:30:48.390
> 
> 标签：javascript, jquery, colorbox

我正在为画廊使用众所周知且优秀的 jQuery Colorbox。部分图像正在使用 ajax 添加到页面中。我正在尝试将颜色框绑定到页面上的所有新图像和现有图像，并将所有图像组合在一起。现在，我只成功实现了两者之一。使用此代码，所有图像都很好地组合到一个颜色框库中，但是在向页面添加更多图像（通过 ajax）之后，颜色框根本没有绑定到它们：

```
$('a.exhibition').colorbox({
    inline:true,
    href:$(this).attr('href'),
    opacity:0.5, 
    overlayClose:true, 
    rel:"hpexhibition"
}); 
```

使用此代码，在向页面添加更多图像后，图像被绑定到颜色框，但 rel 分组不起作用（甚至不是第一次加载到页面的图像集）：

```
$('a.exhibition').live('click', function() {
    $.fn.colorbox({
        inline:true,
        href:$(this).attr('href'),
        opacity:0.5, 
        overlayClose:true,      
        rel:"hpexhibition"
    });
    return false;
}); 
```

我也尝试了这段代码，但它是相同的 - 图像很好地绑定到颜色框，但作为单个图像，而不是作为（rel）图库：

```
$("ul#home-exhibition").on("click", "a[rel='hpexhibition']", function (event) {
    event.preventDefault();
        $.colorbox({
            inline:true,
        href:$(this).attr('href'),
        opacity:0.5, 
        overlayClose:true, 
        rel:"hpexhibition"                
         });
}); 
```

我的图片库的 html 标记是这样的：

```
<ul id="home-exhibition">       
    <li class="item">
        <a class="exhibition" rel="hpexhibition" ref="3" href="#artitem-cb-details-3">
            <img src="path/to/image53.jpg" alt="" />
        </a>
        <div style="display:none;">
           <div id="artitem-cb-details-3" class="artitem-cb">
            //Some data of image 3 here...
          </div>    
        </div>
    </li>

    <li class="item">
        <a class="exhibition" rel="hpexhibition" ref="4" href="#artitem-cb-details-4">
            <img src="path/to/image4.jpg" alt="" />
        </a>
        <div style="display:none;">
           <div id="artitem-cb-details-4" class="artitem-cb">
            //Some data of image 4 here...
          </div>    
        </div>
    </li>

    <li> ..... </li>
    <li> ..... </li>
    <li> ..... </li>
</ul> 
```

有没有办法将这两者结合起来，以便颜色框适用于页面上的所有图像 - 也包括通过 ajax 添加的图像 - 并且还将所有这些图像组合在一起？我无法完成这项工作。我相信应该有办法做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T10:45:37.993

可能有效的方法需要您在加载新元素后重新初始化您的颜色框。

换句话说，您必须这样做：

```
$('a.exhibition').colorbox({
    inline:true,
    href:$(this).attr('href'),
    opacity:0.5, 
    overlayClose:true, 
    rel:"hpexhibition"
}); 
```

ajax调用完成后。

查看 colorbox 的代码，我没有看到其他简单的方法来处理您的案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-03T12:08:49.693

把这个代替 $('.colorbox').colorbox();

```
$('body').on('click', '.colorbox', function() {
    $('.colorbox').colorbox({rel: $(this).attr('rel')});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-18T11:12:47.093

我的解决方案

```
 // This is the trick. Initialize but don't open
  $('.colorbox').colorbox({open:false, rel:'gallery'});

  // Handle click event    
  $('.colorbox').live('click',function(e){
     $(this).colorbox({open:true, rel:'gallery'}); // now open colorbox
     return false;
  }); 
```