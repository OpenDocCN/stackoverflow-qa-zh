# StackOverflow 问答 11516000-11516999

# python - django url 配置将多个变量传递给视图

> ID：11516002
> 
> 赞同：1
> 
> 时间：2012-07-17T04:24:13.283
> 
> 标签：python, django, django-views, django-urls

我正在尝试通过 url 将多个变量传递给视图，如下所示

```
url(r'stage/1/(?P<op>\w+)/(?P<id>\d+)$', 'HR.hr.views.stage_one_manage', name='view_stage_manage'), 
```

观点如下

```
def stage_one_manage(request, op, id):
    print op, id 
```

但是当我访问 /stage/1/ok/1 django 报告 404 是他们从 url 捕获操作和 id 的更好方法吗？

# ruby-on-rails-3 - Resque Worker：无效运算符：$oid

> ID：11516003
> 
> 赞同：6
> 
> 时间：2012-07-17T04:24:13.900
> 
> 标签：ruby-on-rails-3, mongodb, resque

几天前工作的一名工人由于某种原因停止了工作。

resque 日志报告了一个异常`Mongo::OperationFailure`的错误`invalid operator: $oid`

```
class SimilarTargets
  @queue = :similar_queue

  def self.perform(target_id)
    source_target = Target.find(target_id)

    ....

  end
end 
```

工作人员在 Target.find(target_id) 上失败，即使通过 rails 控制台传入了直字符串。

Target.find(id) 在控制台和代码的其他地方工作正常，即使工人阶级在上周从未改变，我也无法弄清楚为什么这会失败。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T04:32:19.727

你最近升级了 Mongoid 吗？该错误听起来像是 .find() 方法正在接收类似的东西`{"$oid": "[STRING]"}`，这是 Mongo 对象 ID 的严格 json 表示。

假设您只想快速修复，您可以通过以下方式解决它：

```
target_id = target_id["$oid"] unless target_id.is_a?(String) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:13:55.993

另一种选择是确保当您将 Moped::BSON::ObjectId 排入队列时，您会显式传递字符串表示形式。例如，

```
Resque.enqueue(MyJob, @mongoid_instance.class.to_s, @mongoid_instance.id.to_s) 
```

# c# - 重载子类中的方法（Enum vs int）

> ID：11516011
> 
> 赞同：6
> 
> 时间：2012-07-17T04:25:03.850
> 
> 标签：c#, overloading, derived-class

为什么以下两个代码示例会产生不同的输出？

**情况1**

```
enum EnumType
{
    First,
    Second,
    Third
}

class ClassB
{
    public string Func(int index)
    {
        return "Func(int)";
    }

    public string Func(EnumType type)
    {
        return "Func(EnumType)";
    }
}

class Program
{
    static void Main(string[] args)
    {
        ClassB b = new ClassB();
        Console.WriteLine(b.Func(0));
        Console.WriteLine(b.Func(EnumType.First));
        Console.ReadLine();
    }
} 
```

输出：

```
Func(int)
Func(EnumType) 
```

**案例2**

```
enum EnumType
{
    First,
    Second,
    Third
}

class ClassA
{
    public string Func(int index)
    {
        return "Func(int)";
    }
}

class ClassB : ClassA
{
    public string Func(EnumType enumType)
    {
        return "Func(EnumType)";
    }
}

class Program
{
    static void Main(string[] args)
    {
        ClassB b = new ClassB();
        Console.WriteLine(b.Func(0));
        Console.WriteLine(b.Func(EnumType.First));
        Console.ReadLine();
    }
} 
```

输出：

```
Func(EnumType)
Func(EnumType) 
```

我很困惑。这是否意味着 Func(EnumType) 隐藏了在基中声明的 Func(int) ？如果是这种情况，那么为什么在第二种情况下将文字 0*隐式*转换为 EnumType 而没有警告？

**编辑：**

当我尝试时，还有更有趣的行为

```
Console.WriteLine(b.Func(0));         
Console.WriteLine(b.Func(1));
Console.WriteLine(b.Func(EnumType.First)); 
```

你猜输出应该是什么样子？

这里是：

```
 Func(EnumType)
 Func(int)
 Func(EnumType) 
```

任何想法为什么 0 和 1 被区别对待？

**编辑2：**

事实证明，字面量 0 在 C# 中确实具有特殊含义。

[在这里](https://stackoverflow.com/questions/1633168/why-does-c-sharp-3-allow-the-implicit-conversion-of-literal-zero-0-to-any-enum)和[这里，](https://stackoverflow.com/questions/9304996/enum-0-value-inconsistency)我找到了对这种行为的出色描述（请参阅已接受的答案）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T04:33:06.717

是的，它确实隐藏了 A 类中声明的 Func(int)。

此外，请参阅[枚举（C# 参考）](http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.100%29.aspx)

> 枚举元素的默认底层类型是 int

您可能还想看看[多态性（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173152%28v=vs.80%29.aspx)

**编辑**

如果你要改变

```
Console.WriteLine(b.Func(0));          
Console.WriteLine(b.Func(1)); 
Console.WriteLine(b.Func(EnumType.First)); 
```

到

```
int i = 0;
Console.WriteLine(b.Func(i));          
Console.WriteLine(b.Func(1)); 
Console.WriteLine(b.Func(EnumType.First)); 
```

你会发现输出应该是

```
Func(int)   
Func(int)   
Func(EnumType) 
```

如果直接传递给函数调用，似乎 0 会隐式转换为默认枚举值。

**编辑 2**

我检查了 IL 代码，它似乎确实将 0 隐式转换为枚举

```
IL_0000: nop
IL_0001: newobj instance void ClassB::.ctor()
IL_0006: stloc.0
IL_0007: ldloc.0
IL_0008: ldc.i4.0
IL_0009: callvirt instance string ClassB::Func(valuetype EnumType)
IL_000e: call void [mscorlib]System.Console::WriteLine(string)
IL_0013: nop
IL_0014: ldloc.0
IL_0015: ldc.i4.0
IL_0016: callvirt instance string ClassB::Func(valuetype EnumType)
IL_001b: call void [mscorlib]System.Console::WriteLine(string)
IL_0020: nop
IL_0021: call string [mscorlib]System.Console::ReadLine()
IL_0026: pop
IL_0027: ret 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:35:26.777

枚举的底层类型是 int，因此 ClassB 函数确实隐藏了 ClassA 版本。

尝试将其更改为：

```
enum EnumType : byte
{
    First,
    Second,
    Third
}
...
Console.WriteLine(b.Func(256));  // out of range for a byte 
```

您应该看到它调用了 int 函数。

# android - 解析android xml文件的现有工具

> ID：11516016
> 
> 赞同：0
> 
> 时间：2012-07-17T04:25:36.833
> 
> 标签：android, xml-parsing

是否有现有的标准工具来解析 Android 项目中的 xml 文件？xml 文件是指 AndroidManifest.xml 和那些 GUI 描述 xml 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:01:50.683

据我所知，没有干净、独立的库可以做到这一点，但实现自己的库并不复杂。唯一棘手的部分是对 Android 版本之间的差异进行建模。

# php - Javascript 插件供其他人访问我的数据库中的特定项目

> ID：11516019
> 
> 赞同：0
> 
> 时间：2012-07-17T04:26:26.497
> 
> 标签：php, javascript, mysql, apache

我正在寻找一个插件，人们可以在他们的网站上使用它来从我的 mysql 数据库中提取特定评论，而无需让他们直接访问我的数据库。这些评论在产品的数据库中都有一个列#，这就是我想指定它应该拉什么的方式。

我见过类似的事情，您可以在其中生成 javascript 来执行此操作。我也不想让其他人看到他们的网站源代码只是复制代码并使用他们网站上的评论。

示例： [http ://www.reddit.com/widget/](http://www.reddit.com/widget/)

`<script src="http://www.reddit.com/.embed?limit=5" type="text/javascript"></script>`

如果有人对我如何做到这一点有一些想法，请把我推向正确的方向。我看过一些 RSS 提要，但觉得它不够动态。我拥有对服务器的完全访问权限（运行带有 apache、php 和 mysql 的 ubunbtu）。

# c# - DataTemplateSelector.SelectTemplate 没有被调用`TreeView`的根项目

> ID：11516021
> 
> 赞同：0
> 
> 时间：2012-07-17T04:26:49.520
> 
> 标签：c#, wpf

我有一个`TreeView`：

```
<TreeView Grid.Row="0" Grid.Column="2" ItemsSource="{Binding ResourceInstanceRootItems}" SelectedItemChanged="TreeView_SelectedItemChanged_2">
    <TreeView.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding Children}">
            <HierarchicalDataTemplate.ItemTemplateSelector>
                <local:ResourceInstDataTemplateSelector/>
            </HierarchicalDataTemplate.ItemTemplateSelector>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
 </TreeView> 
```

和数据模板选择器：

```
public class ResourceInstDataTemplateSelector : DataTemplateSelector
{
    public override DataTemplate
        SelectTemplate(object item, DependencyObject container)
    {
        FrameworkElement element = container as FrameworkElement;

        if (element != null && item != null && item is ResourceInstance)
        {
            ResourceInstance ri = item as ResourceInstance;
            DataTemplate temp = null;
            if (ri.Parent == null)
                temp = App.Current.Resources["parent_item"] as DataTemplate;
            else if (ri.DependingInstance == null)
                temp = App.Current.Resources["simple_instance"] as DataTemplate;
            else
                temp = App.Current.Resources["dependent_instance"] as DataTemplate;

            return temp;
        }

        return null;
    }
} 
```

问题是，`ResourceInstDataTemplateSelector.SelectTemplate`不会调用 中的根项目，`TreeView`它们仅显示为空箭头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:39:46.847

我相信您应该直接在 TreeView 上设置选择器，而不是在具有选择器的 TreeView 上放置 ItemTemplate，例如

```
<TreeView Grid.Row="0" Grid.Column="2" ItemsSource="{Binding ResourceInstanceRootItems}">
    <TreeView.ItemTemplateSelector>
        <local:ResourceInstDataTemplateSelector/>
    </TreeView.ItemTemplateSelector>
</TreeView> 
```

# java - javax.naming.NameNotFoundException：无法连接到 derby 数据库

> ID：11516027
> 
> 赞同：1
> 
> 时间：2012-07-17T04:27:22.610
> 
> 标签：java, database, jakarta-ee, tomcat, derby

我正在尝试`derby`在使用时连接到数据库`Tomcat`。我尝试通过一个 servlet 来做到这一点。但我无法连接并得到以下异常：

```
javax.naming.NameNotFoundException: Name jdbc is not bound in this Context
at org.apache.naming.NamingContext.lookup(NamingContext.java:803)
at org.apache.naming.NamingContext.lookup(NamingContext.java:159)
at org.apache.naming.SelectorContext.lookup(SelectorContext.java:158)
at javax.naming.InitialContext.lookup(InitialContext.java:392)

at servlets.servlet_1.doGet(servlet_1.java:21) //---> I have marked this line in the below servlet

at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
at java.lang.Thread.run(Thread.java:619) 
```

当以下 servlet 运行时：

```
package servlets;

import java.io.IOException;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.servlet.http.*;
import javax.servlet.*;
import javax.sql.DataSource;

public class servlet_1 extends HttpServlet{

@Override 
public void doGet(HttpServletRequest request,HttpServletResponse response) throws ServletException,IOException {
    try {
       // String queryString = request.getQueryString();
        Context context = new InitialContext();
        DataSource ds = (DataSource)context.lookup("jdbc/PollDatasource");
        Connection connection = ds.getConnection(); // ----> LINE 21
        String sqlQuery = "select * from PollResult";
        PreparedStatement statement = connection.prepareStatement(sqlQuery);
        ResultSet set = statement.executeQuery();
        System.out.println("after the final statement");
    }catch(Exception exc) {
        exc.printStackTrace();
    }
} 
```

}

为什么我会得到这个异常？

`context.xml`我在中添加了以下几行`Tomcat`：

```
 <Resource name="jdbc/PollDatasource" auth="Container" type="javax.sql.DataSource"
    driverClassName="org.apache.derby.jdbc.EmbeddedDriver" url="connection.url"
    username="suhail" password="suhail" maxActive="20" maxIdle="10" maxWait="-1" /> 
```

和以下行`web.xml`：

```
 <resource-ref>
<description>my connection</description>
<res-ref-name>jdbc/PollDatasource</res-ref-name>
<res-type>javax.sql.DataSource</res-type>
<res-auth>Container</res-auth>
</resource-ref> 
```

我错过了什么？

*注意：我使用的是 Netbeans 7.1*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T04:54:34.833

你必须*命名/环境*`obtain`上下文：

 *```
Context initContext = new InitialContext();
Context envContext  = (Context)initContext.lookup("java:comp/env");
DataSource ds = (DataSource)envContext.lookup("jdbc/PollDatasource"); 
```*

# .net - 我应该如何在 MS HPC 作业中链接 WCF/SOA 请求和响应？

> ID：11516029
> 
> 赞同：1
> 
> 时间：2012-07-17T04:27:38.427
> 
> 标签：.net, wcf, soa, hpc

我正在尝试为 HPC 集群创建一个简单的 WCF/SOA 应用程序，但我不确定 HPC 是否提供将 SOA 响应链接到生成它的任务的方法。

按照我得到的教程，我创建了将任务提交到集群的代码，如下所示：

```
using (var proxy = new BrokerClient<WcfMathService.IMath>(session, binding)){
...
proxy.SetResponseHandler<WcfMathService.RunTaskResponse>(doSubmit_ServiceCallback, m_signal);
...
proxy.SendRequest(new WcfMathService.RunTaskRequest(i, args.taskTime, args.taskFailureChance)); 
```

使用 SendRequest 立即获取任务 ID 时会很有用，但我不知道从哪里获取它，BrokerClient 似乎也不知道。

稍后，在我的回调代码中，我可以获得一个从服务任务返回的整数数组： int[] r = response.Result.RunTaskResult;

但同样，从响应中我不知道如何猜测生成它的任务。我可以在请求中传递一个标识符，然后在结果数组中再次将其传递回来，但这不是很优雅，并且如果任务因未处理的异常而崩溃，我不知道哪个任务失败了。

我不得不承认，我对如何使用 HPC 集群进行适当的任务管理感到很困惑。

# iphone - cocos2d：如何创建连续视差层

> ID：11516033
> 
> 赞同：4
> 
> 时间：2012-07-17T04:28:43.933
> 
> 标签：iphone, ios, cocos2d-iphone

我正在 cocos 2d 中创建游戏，

我想制作一个连续滚动的视差层。例如我的场景是：

* * *

几朵云在背景中移动。一旦它到达右侧屏幕的末端，它应该再次从屏幕左侧出现。或者像永无止境的视差这样的效果。请问有什么想法吗？

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:43:46.587

你真的不需要为此创建视差节点，

创建你的云精灵：

```
CCSprite *blackCloud;//set it's image and position it:
//code for init
blackCloud.position = ccp(580,300);

//call selector (don't unscheduled it)
[self schedule:@selector(blackCloudMovement) interval:1/30];

-(void)blackCloudMovement
  {
    if (blackCloud.position.x == -100)
    {
        [blackCloud setPosition:ccp(580,300)];
        [blackCloud runAction:[CCMoveTo actionWithDuration:6 position:ccp(-100,300)]];
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T05:08:41.290

您可以根据图层的“深度”，以您移动相机或主角的速度的倍数移动图层，从而在 2D 游戏中实现视差；例如，当玩家移动 1 个单位距离时，深度 1 的层移动 0.5，深度 2 的层移动 0.25，深度 3 的层移动 0.125，等等。

# mysql - 有哪些解决方案可以更改表的列以存储多个值？

> ID：11516037
> 
> 赞同：0
> 
> 时间：2012-07-17T04:29:52.787
> 
> 标签：mysql, sql, database-design, data-modeling

我们有一张桌子：

```
message (
`id` INT(11) NOT NULL AUTO_INCREMENT,
`subject` VARCHAR(255) NOT NULL DEFAULT '',
`message` TEXT NOT NULL,
`attachment` VARCHAR(255) NULL DEFAULT NULL,
`new` TINYINT(4) NOT NULL DEFAULT '0',
PRIMARY KEY (`id`)
) 
```

现在我们需要有**多个附件**。
目前只保存一个附件链接。一种解决方案可能是添加**另一个外键表**或在列中**使用逗号分隔值。**但是我们需要一个更好的解决方案，它可以使用**旧系统和新系统**，而不需要太多改动。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T05:25:31.737

正如@BurhanKhalid 所说，对此的任何解决方案都需要更改您的应用程序。您应该正确地做，并`attachments`使用带有外键的单独表来规范化您的数据。 **要支持旧版应用程序版本**，请`attachment`单独保留原始表中的列，然后创建触发器以使用添加到新的规范化表中的第一个附件链接填充它。从长远来看，您希望修复旧应用程序以使用新表，然后弃用旧列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T04:33:27.980

首先，更改您的表，使其`attachment`类型为`TEXT`，然后序列化您的附件（例如，作为 json 或 xml）并将它们放入`attachment`列中。

# scala - 如何在 ScalaTest 中禁用测试套件

> ID：11516038
> 
> 赞同：27
> 
> 时间：2012-07-17T04:30:14.323
> 
> 标签：scala, testing, scalatest

如何禁用测试套件，即类扩展中的所有测试`FunSpec`？

我找到的唯一解决方案是在每个测试之前替换为，但是`it`用`ignore`几十个测试这样做很无聊。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-18T03:04:13.843

在 1.8 中执行此操作的简单方法是添加一个接受虚拟参数的构造函数。如果 ScalaTest（和 sbt）没有公共的、无参数的构造函数，则不会发现该类：

```
class MySuite(ignore: String) extends FunSuite { 
  // ...
} 
```

在 2.0 中，您将能够在类上写 @Ignore：

```
@Ignore
class MySuite extends FunSuite {
  // ...
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-03T17:12:57.653

您可以将[@Ignore](http://doc.scalatest.org/2.1.0/index.html#org.scalatest.Ignore)用于不同的测试和整个套装。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-10-26T19:59:40.247

每个[scalatest](https://www.scalatest.org/user_guide/tagging_your_tests)文档，说如果你有这样的测试套件

```
describe ("some component") {
  it ("should do something") {
   ...
  }
  it ("should also do something else") {
   ...
  }
} 
```

要仅禁用单个测试，您可以使用该`ignore()`方法。

```
describe ("some  component") {
  ignore ("should do something") {
   ...
  }
  ...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T05:53:22.887

[标记](http://www.scalatest.org/user_guide/tagging_your_tests)麻烦的测试，然后根据标记[排除或包含测试。](http://www.scalatest.org/user_guide/using_the_runner#filtering)

标记是一次性的工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-17T06:02:06.610

标签是一种选择，但您需要相应地标记每个测试，您不能以这种方式排除完整的套装。但是，正如 user272735 所提到的，标记测试是一次性的。

另一种选择是定义一个主套件并将列表限制为`nestedSuites`您想要运行的套件（[请参阅文档](http://www.scalatest.org/scaladoc/1.6.1/#org.scalatest.BeforeAndAfterAll)）。明显的缺点是，您必须维护主测试套件，即向其中添加新创建的测试套件。您可以通过遍历您的文件夹、创建所有可以找到的测试套件的列表并减去您放入黑名单的测试套件来避免这种情况。此外，通过您的文件夹递归已经使您有机会过滤掉与（外部）给定标准匹配的文件。

第三种选择 - 尽管更老套 - 是更改您想要列入黑名单的套件所属的包。然后，您可以使用测试运行器仅运行某些包中包含的套装。阅读文档中的更多信息，[“指定“仅限成员”和“通配符”套件路径”](http://www.scalatest.org/user_guide/using_the_runner#filtering)部分。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-18T16:40:12.307

使用*@DoNotDiscover*

从[scaladoc](http://doc.scalatest.org/3.0.1-2.12/org/scalatest/DoNotDiscover.html)：

```
import org.scalatest._

@DoNotDiscover
class SetSpec extends FlatSpec {

  "An empty Set" should "have size 0" in {
    assert(Set.empty.size === 0)
  }

  it should "produce NoSuchElementException when head is invoked" in {
    intercept[NoSuchElementException] {
      Set.empty.head
    }
  }
} 
```

# android - Android 清单文件中的解析器异常

> ID：11516041
> 
> 赞同：0
> 
> 时间：2012-07-17T04:31:02.020
> 
> 标签：android, android-manifest

我正在制作一个动作栏。但是当我尝试运行我的程序时，我收到一条日志消息，告诉我清单文件有问题。

> `[2012-07-17 09:18:07 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for E:\Android\workspace\actionbar\AndroidManifest.xml: The processing instruction target matching "[xX][mM][lL]" is not allowed.`

这条消息的含义是什么？如何修复我的清单？

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="actio.bar"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="11" />

    <application
      <activity android:name=".TabNavigationActionBarActivity" android:label="Action Bar Demonstration: TabNav">
- <intent-filter>
  <action android:name="android.intent.action.MAIN" /> 
  <category android:name="android.intent.category.LAUNCHER" /> 
  </intent-filter>
  </activity>
  <activity android:name=".DropdownListNavigationActionBarActivity" android:label="Action Bar Demonstration: DropdownNav" /> 
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:45:49.097

您没有关闭打开的应用程序标签。

```
<application 
```

应该

```
<application> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T04:45:53.440

该错误可能由多种原因引起。一个可能是你在一开始就有一个空间`<?xml version="1.0" encoding="utf-8"?>`

因此，在第一行的开头，查找并删除任何前导空格。

希望有帮助。

# javascript - 为什么要在 JavaScript 中为表单设置“动作”和“方法”？

> ID：11516042
> 
> 赞同：0
> 
> 时间：2012-07-17T04:31:16.717
> 
> 标签：javascript, html, forms

在我的 javascript 书中，有以下代码：

```
form.action="echo.pl"
form.method="POST" 
```

本书将这两行代码描述为

> 语句来指定提交方法和服务器端脚本来处理表单。

但我不知道他们在说什么。此代码是较大代码的一部分，该代码首先分配表单值，然后运行服务器端脚本响应回显由脚本分配的提交的名称=值对。由于没有适当的解释，我无法理解它的含义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T04:40:11.523

HTML 表单是向服务器提交用户数据的一种方式。但是要提交数据，有几个问题：

*   要提交到服务器的哪个部分（某种）？（即，哪个脚本/程序将处理提交的数据）。这最好由资源的 URL 表示。
*   数据应该如何提交？有多种 HTTP 方法——GET/POST/PUT/DELETE/等等等等。

答案在于表单标签的属性：

```
<form method="<METHOD OF SUBMIT: GET/POST>" action="<WHERE TO SUBMIT?: URL OF SCRIPT" ..> 
```

在您的代码中，`form`是对表单的引用，当您说：

*   `form.action`：您修改要提交到的 URL。
*   `form.method`：您修改了用于提交的 HTTP 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:34:07.793

您需要有一个页面在用户提交表单时处理表单数据。表单的`action`属性是将数据发送到使用其`method`属性中描述的方法的页面。请参阅此问题了解[GET 和 POST 之间的区别](https://stackoverflow.com/questions/504947/when-should-i-use-get-or-post-method-whats-the-difference-between-them)。

[从 w3](http://www.w3.org/TR/html401/interact/forms.html#edef-FORM)：

```
action      %URI;          #REQUIRED -- server-side form handler --
method      (GET|POST)     GET       -- HTTP method used to submit the form-- 
```

# javascript - 文本字段输入颜色 css

> ID：11516046
> 
> 赞同：1
> 
> 时间：2012-07-17T04:32:19.370
> 
> 标签：javascript, css

我的表格中有一个文本。文本字段中的文本颜色应为灰色。如果我单击它并键入，则文本应变为黑色并保持黑色。

我使用了以下CSS。

```
input[type=text]{ color:#999999;}
input[type=text]:focus{ color:#000;} 
```

这是我的html代码

```
<input name="address" id="address" type="text" onFocus="if(this.value =='Address' ) this.value=''" onBlur="if(this.value=='') this.value='Address'" value="Address"> 
```

现在，当我输入时，文本变为黑色。但打字后又变回灰色。打字后我需要它是黑色的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T04:44:35.667

怎么样

```
<input name="address" id="address" type="text" 
       onFocus="if(this.value =='Address' )this.value='';this.style.color='#000';" 
       onBlur="if(this.value=='') this.value='Address'; if (this.value=='Address') this.style.color='#999';" 
       value="Address"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:46:12.477

不确定您的问题是否 100% 清楚，但为什么不直接反转 CSS 中的值呢？

```
<style>
input[type=text]{ color:#000;}
input[type=text]:focus{ color:#999999;}
</style>

<p>
<input name="address" id="address" type="text" onFocus="if(this.value =='Address' ) this.value=''" onBlur="if(this.value=='') this.value='Address'" value="Address">
</p> 
```

有了这个，文本是黑色的，焦点上它是灰色的，但焦点后它又变回黑色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T04:52:49.813

我已经使用 JQuery 来解决您的问题。请看看这个 JSFiddle

[http://jsfiddle.net/EvnQj/](http://jsfiddle.net/EvnQj/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T05:19:51.380

对于上述问题，请编写如下 HTML：

```
<input name="address" id="address" type="text" onFocus="if(this.value =='Address' ) this.value=''" onBlur="if(this.value==''){ this.value='Address'; } else{ this.style.color='#000'; }" value="Address"> 
```

CSS原样：

```
input[type=text]{
  color:#999999;
}
input[type=text]:focus{
  color:#000;
} 
```

如果你想测试你的垃圾箱，那么[http://codebins.com/bin/4ldqpaq](http://codebins.com/bin/4ldqpaq)

# javascript - 在 iPhone / iPad 上禁用漂亮照片

> ID：11516052
> 
> 赞同：0
> 
> 时间：2012-07-17T04:33:20.787
> 
> 标签：javascript, jquery, wordpress

只是好奇是否有人可以在 Iphone/Ipad 上禁用 prettyphoto？我尝试了来自 prettyphoto 支持网站的这段代码，但似乎不起作用..

代码如下所示：

我在 head 标签的结尾添加了以下代码：

```
<script type="text/javascript">
function checkforIpad() {
    var userAgent = window.navigator.userAgent;
    if (userAgent.match(/iPad/i) || userAgent.match(/iPhone/i)) {

    //do nothing
    }
    else{ 

    $(document).ready(function() {
    $("a[rel^='prettyPhoto']").prettyPhoto();
    });
    }}
</script> 
```

任何想法为什么它似乎不起作用？这是我的一个wordpress主题，我想禁用prettyphoto。在 iPhone 的小屏幕上加载图像时，它们几乎看不到。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:49:55.803

在 wordpress 上，您可以`global $is_iphone;`在函数中声明并测试其值。您可能有兴趣查看您的`wp-includes/vars.php file`.

# php - Facebook PHP SDK 无法上传多于一张图片

> ID：11516055
> 
> 赞同：0
> 
> 时间：2012-07-17T04:33:39.857
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我在使用最新的 Facebook PHP SDK 将图片上传到 Facebook 上的用户相册时遇到问题。我可以上传一张图片，但是在第一张之后，它不会让我上传第二张图片（我已经尝试过使用与第一张相同的图片以及完全不同的图片）。

我认为这不是身份验证问题，因为我能够上传第一张图片，并且在检查用户的身份验证内容后，我得到以下信息：

```
Array (
    [data] => Array (
        [0] => Array (
            [installed] => 1
            [status_update] => 1
            [photo_upload] => 1
            [video_upload] => 1
            [email] => 1
            [create_note] => 1
            [share_item] => 1
            [publish_stream] => 1
            [publish_actions] => 1
            [user_likes] => 1
            [user_photos] => 1
         )
    )
) 
```

这是我目前用来上传图片的代码：

```
<?php
    $mee = $facebook->api('/me');
    //echo $mee['name']; // test to make sure FB is connected
    $item = '202';
    $filename = 'bc2a846f1bfafa8d811390089a91bcfa.jpeg';

    $qry = "SELECT albumID FROM os_users WHERE user_fbid = '".$_SESSION['fbid']."'";
    $result = mysql_query($qry);
    $alb = mysql_fetch_assoc($result);

    // Check if Album already exists
    if($alb['albumID'] !=  '0'){
        $album_id = $alb['albumID'];
    } else {
        echo 'Creating Album';
        //Create an album
        $album_details = array(
            'message' => 'Album Message', 
            'name' => 'Album Name'
        );

        $create_album = $facebook->api('/me/albums', 'post', $album_details);

        // Get album ID of the album you've just created
        $album_id = $create_album['id'];

        $qry = "UPDATE scav_users SET user_albumid = '".$album_id."' WHERE user_fbid = '".$_SESSION['ufbid']."'";
        $result = mysql_query($qry);
    }

    // Upload Image
    $facebook->setFileUploadSupport(true);
    $photo_details = array(
        'message' => '#'.$item.': Item Description'
    );
    $photo_details['image'] = '@' . realpath('../uploads/'.$filename);

    try {
        $upload_photo = $facebook->api('/'.$album_id.'/photos', 'post', $photo_details);
    } catch (FacebookApiException $e){print_r($e);}
    //$upload_photo = $facebook->api('/me/photos', 'post', $photo_details);
    $photo_id = $upload_photo['id'];
    echo $photo_id;
?> 
```

在我尝试上传另一张图片后，此脚本导致的错误如下：

```
FacebookApiException Object (
    [result:protected] => Array (
        [error] => Array (
            [message] => An unexpected error has occurred. Please retry your request later.
            [type] => OAuthException
            [code] => 2
        )
    )
    [message:protected] => An unexpected error has occurred. Please retry your request later.
    [string:Exception:private] =>
    [code:protected] => 0
    [file:protected] => [locationtofile]base_facebook.php
    [line:protected] => 1106
    [trace:Exception:private] => Array (
        [0] => Array (
            [file] => [locationtofile][base_facebook.php
            [line] => 810
            [function] => throwAPIException
            [class] => BaseFacebook
            [type] => ->
            [args] => Array (
                [0] => Array (
                    [error] => Array (
                        [message] => An unexpected error has occurred. Please retry your request later.
                        [type] => OAuthException
                        [code] => 2
                    )
                )
            )
        )
        [1] => Array (
            [function] => _graph
            [class] => BaseFacebook
            [type] => ->
            [args] => Array (
                [0] => //photos
                [1] => post
                [2] => Array (
                    [message] => #202: Item Description
                    [image] => @[locationtofile]bc2a846f1bfafa8d811390089a91bcfa.jpeg
                )
            )
        )
        [2] => Array (
            [file] => [locationtofile][base_facebook.php
            [line] => 587
            [function] => call_user_func_array
            [args] => Array (
                [0] => Array (
                    [0] => Facebook Object (
                    [appId:protected] => 435146213185130
                    [appSecret:protected] => 96797309425855946b0b495f9adf6252
                    [user:protected] =>
                    [signedRequest:protected] => Array (
                        [algorithm] => HMAC-SHA256
                        [code] => 2.AQBPPU0myCWfUCPt.3600.1342501200.1-100003953568312|8LHGtxCV0OZZfE-826am15ODSZo
                        [issued_at] => 1342495041
                        [user_id] => 100003953568312
                    )
                    [state:protected] =>
                    [accessToken:protected] => AAAGLw192VmoBABK5rNEsnoROQHvcFuKt720JuUV2DP20llDD1Ny9NPLE2ZBVi4WIypB5n1yfodv7VBWFTrTi0dF6Ncm3PGIxDK2yCmbJPJO14xH7C
                    [fileUploadSupport:protected] => 1
                )
                [1] => _graph 
            )
            [1] => Array (
                [0] => //photos
                [1] => post
                [2] => Array (
                    [message] => #202: Item Description
                    [image] => @[locationtofile]bc2a846f1bfafa8d811390089a91bcfa.jpeg
                )
            )
        )
    )
    [3] => Array (
        [file] => [locationtofile][uploadtoFB.php
        [line] => 44
        [function] => api
        [class] => BaseFacebook
        [type] => ->
        [args] => Array (
            [0] => //photos
            [1] => post
            [2] => Array (
                [message] => #202: Item Description
                [image] => @[locationtofile]bc2a846f1bfafa8d811390089a91bcfa.jpeg
            )
        )
    )
)
[previous:Exception:private] =>
) 
```

任何帮助表示赞赏。

注意：我的应用程序仍处于沙盒阶段，我正在本地服务器上运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:04:21.057

如果我没看错你的代码，你有一个 $session['fbid']，它是album_id，对吗？为了排除故障，我会让该关联更清晰：

*   向 Facebook 查询 ID（不是您的数据库）
*   成功后（检查 FacebookAPIException），
*   将下一张照片发布到该专辑 ID

此外，您没有使用 try/catch 检查每个 api 调用，这是一个很好的做法。

在清除之前，我也不会包含消息。众所周知，Facebook 会因此而标记发布。

这很明显是一个身份验证问题，因此还要将 access_token 作为每个 api 调用中的单独参数推送。

# c++ - 防止 PJLIB 打印初始信息

> ID：11516056
> 
> 赞同：0
> 
> 时间：2012-07-17T04:34:02.700
> 
> 标签：c++, initialization

我正在使用[PJLIB 2.0.1](http://www.pjsip.org/pjlib/docs/html/)，尤其是内存池，因为据说它“非常非常快”。

但是，程序启动后，会自动输出“14:26:12.944 os_core_unix.c !pjlib 2.0.1 for POSIX initialized”，很烦人。

我不熟悉 PJLIB ......谁能告诉我如何关闭这样的输出？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:07:51.347

您可以使用 指定日志记录级别`void pj_log_set_level(int level)`。如果您想完全关闭它，请`pj_log_set_level(0);`在代码开头调用。此外，在编译时，您可以像这样定义日志记录级别：

```
#undef PJ_LOG_MAX_LEVEL
#define PJ_LOG_MAX_LEVEL 0 
```

您可以设置 6 个级别，`6`最详细的级别`0` 并将其关闭。有关更多信息，[请参见此处](http://www.pjsip.org/pjlib/docs/html/group__PJ__LOG.htm)。但是，日志记录非常适合调试代码，因此您可能不想将其关闭。

# ios - iOS 应用使用 Web 服务所需的不同框架

> ID：11516065
> 
> 赞同：0
> 
> 时间：2012-07-17T04:35:00.557
> 
> 标签：ios, json, web-services

我想问一下我需要在应用程序端通过 REST 使用 Web 服务的框架/库是什么。

目前我有 SBJson 来解析 JSON 和 ASIHTTPRequest 框架。ASIHTTPRequest 是 REST 协议吗？或者我是否必须在 ASIHTTPRequest 之上添加另一个 REST 库。

另一个问题是，从去年开始，ASIHTTPRequest 框架就不再被维护了。那么它仍然适用于当前带有 ARC 的 iOS 5 吗？

除了 SBJson 和 ASIHTTPRequest 之外，是否还有我为了使用 Web 服务而错过的框架/库？

如果有人能引导我朝着正确的方向前进，我会很高兴

编辑：我找到了另一个框架 RESTkit。这个框架是取代 ASIHTTPRequest 框架还是它们携手合作？第一次做 web 服务并从 iOS 端使用它。所以我可能会问很多愚蠢的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:52:18.113

REST 不是一种协议，它是一种架构。它只是描述了某种风格的 Web 服务设计。您不需要任何特殊的框架来与 RESTful 服务进行通信。SBJson 和 ASIHHTPRequest 应该足以满足您的需求。

至于使用 ARC 的 ASIHTTPRequest，您所要做的就是在每个源文件上设置 -fno-objc-arc 编译器标志。有关更多信息，请参阅此问题：

[如何为项目中的单个文件禁用 ARC？](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project)

您还可以将 ASIHTTPRequest 构建为静态库（没有 ARC）并在您的应用程序中链接它。

# inheritance - D：继承静态变量，按类区分？

> ID：11516066
> 
> 赞同：3
> 
> 时间：2012-07-17T04:35:01.837
> 
> 标签：inheritance, static-methods, static-members, d

我正在处理一种情况，我希望有一个特定的基类，它定义了一个静态关联数组和使用它的静态函数，然后在从它继承的类中复制这个功能，但每个子类都有它自己的数组实例。然而，看起来子类只是继承了父类的数组，而不是像我希望的那样创建自己的静态副本。以下是我希望完成的超级简化的精简版：

```
class MyBase {
    static string[string] dict;
    static void attach(string key, string val) {
        dict[key] = val;
    }
}
class MySubA : MyBase {
    // various unique member variables
}
class MySubB : MyBase {
    // ...
}
void main() {
    MySubA.attach("a", "a1");
    MySubB.attach("b", "b1");
    writefln("-:%s", MyBase.dict);
    writefln("A:%s", MySubA.dict);
    writefln("B:%s", MySubB.dict);
} 
```

期望的输出：

```
-:[]
A:["a":"a1"]
B:["b":"b1"] 
```

实际输出：

```
-:["a":"a1", "b":"b1"]
A:["a":"a1", "b":"b1"]
B:["a":"a1", "b":"b1"] 
```

有没有办法在不放弃继承而只为每个子类复制相关代码的情况下解决这个问题？分配给我正在使用的数组的实际代码比上面列出的附加函数更复杂，所以我想避免每次都复制它，或者在必要时手动分配给 .dict 。我想知道是否有一个涉及模板的解决方案可能有效，但我似乎无法将它拼凑在一起。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T05:01:01.373

类中的静态变量是该类的一部分，并且只是该类的一部分。无论创建了多少个该类的实例或从它派生了多少类，整个程序中都存在它的一个实例。没有静态成员变量的继承，就像普通成员变量的继承一样。如果基类变量是公共的或受保护的，派生类可以访问它，但它们没有自己的副本。派生类链中*没有任何内容被复制。*成员变量存在于声明它们的类中，派生类可能可以访问它们，但派生类没有自己的副本。

因此，通过放入`dict`，`MyBase`您为整个程序创建了其中一个，而不管它的派生类做什么。如果您希望每个派生类都有自己的副本，那么它们每个都必须声明自己的一个。

现在，您可以通过模板 mixin 或字符串 mixin 最小化代码重复，但您仍然必须将其混合到每个派生类中。例如，您可以这样做

```
import std.stdio;

mixin template Dict()
{
    static string[string] dict;
    static void attach(string key, string val)
    {
        dict[key] = val;
    }
}

class MyBase
{
    mixin Dict;
}

class MySubA : MyBase
{
    mixin Dict;
    // various unique member variables
}

class MySubB : MyBase
{
    mixin Dict;
    // ...
}

void main()
{
    MySubA.attach("a", "a1");
    MySubB.attach("b", "b1");
    writefln("-:%s", MyBase.dict);
    writefln("A:%s", MySubA.dict);
    writefln("B:%s", MySubB.dict);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T04:49:29.360

啊，看起来我只是偶然发现了解决方案。

```
class MyBase(T) {
    static string[string] dict;
    static void append(string key, string val) {
        dict[key] = val;
    }
}
class MySubA : MyBase!MySubA {
    // various unique member variables
}
class MySubB : MyBase!MySubB {
    // ...
} 
```

正是我想要的。根据快速礼仪搜索发布自己的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T07:26:59.520

如果您不需要层次结构：

```
import std.stdio;

mixin template Dict()
{
    static string[string] dict;
    static void attach(string key, string val)
    {
        dict[key] = val;
    }
}

class MySubA
{
    mixin Dict;
}

class MySubB
{
    mixin Dict;
}

void main()
{
    MySubA.attach("a", "a1");
    MySubB.attach("b", "b1");
    writefln("A:%s", MySubA.dict);
    writefln("B:%s", MySubB.dict);
} 
```

我认为这是一个比这个模板继承更好的解决方案。

# java - 运行时异常和错误 Catch or Specify Requirement

> ID：11516067
> 
> 赞同：2
> 
> 时间：2012-07-17T04:35:14.833
> 
> 标签：java, exception, try-catch

我正在阅读有关[java 中的异常](http://docs.oracle.com/javase/tutorial/essential/exceptions/catchOrDeclare.html)

我遇到了这个

> 已检查的异常受 Catch 或 Specify Requirement 的约束。所有的异常都是检查异常，除了那些由 Error `RuntimeException`、 和它们的子类指示的异常。

我不明白。有人可以告诉我这是什么意思吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T04:38:48.740

> 已检查的异常受 Catch 或 Specify Requirement 的约束。除了 Error、RuntimeException 及其子类所指示的异常之外，所有异常都是已检查异常。

它说所有异常都需要通过捕获它们来处理

```
try{
  call();
}catch(SomeException ex){
 //handling
} 
```

或通过扔回

public void caller() throws SomeException{ call(); }

`call();`方法被声明为抛出`SomeException`

公共无效调用者（）{调用（）；}

这不会编译，

有的`RuntimeException`不勾选，不需要处理，主要是意料之外的（有些是错误）所以我们不用强行处理

* * *

**也可以看看**

*   [已检查与未检查的异常](https://stackoverflow.com/questions/4639432/checked-vs-unchecked-exception)
*   [何时选择已检查和未检查的异常](https://stackoverflow.com/questions/27578/when-to-choose-checked-and-unchecked-exceptions)
*   [在 try 块中捕获的未经检查的异常不是 Java 中的已检查异常吗？](https://stackoverflow.com/questions/1051728/isnt-an-unchecked-exception-that-is-caught-in-a-try-block-a-checked-exception-i)

# google-fusion-tables - 在谷歌融合表 API SELECT 语句中使用 ROWID 和星号

> ID：11516070
> 
> 赞同：7
> 
> 时间：2012-07-17T04:35:37.607
> 
> 标签：google-fusion-tables

我正在尝试获取 ROWID 以及 Google Fusion Tables 中每一行的所有数据。

这个选择语句：

```
SELECT *, ROWID FROM [tableID] 
```

导致此错误：

```
"domain": "fusiontables",
"reason": "badQueryCouldNotParse",
"message": "Invalid query: Parse error near '*' (line 1, position 14).",
"locationType": "parameter",
"location": "q" 
```

如果我指定列名，例如...

```
SELECT ROWID, name, city, suburb, etc FROM [tableID] 
```

...其中 etc 是所有列名，它工作正常。问题是，我有很多列名，并且会随着时间的推移添加/删除它们，并且不想每次都更新该 select 语句。

是否可以使用 ROWID + 星号通配符 SELECT 语句？

（我意识到我可以通过使用 DESCRIBE 查询来获取所有列名并从那里创建我的查询来做到这一点，但如果可能的话，我希望将调用次数降至最低）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-18T12:44:15.237

你应该使用这个：

```
SELECT ROWID FROM [Table ID] WHERE [NameColum]='Data' 
```

并且您将从找到`ROWID`“数据”的那一行中获得。然后你可以使用`ROWID`来调用整行。

# c# - 无法理解 linq 查询

> ID：11516075
> 
> 赞同：1
> 
> 时间：2012-07-17T04:37:01.757
> 
> 标签：c#, linq

我在 linq 中有一个查询，但我无法理解它，因为我没有编写此查询。查询如下

```
string[] arr1 = new string[]
                        {
                            "Pakistan:4,India:3,USA:2,Iran:1,UK:0",
                            "Pakistan:4,India:3,USA:2,Iran:1,UK:0",
                            "India:4,USA:3,Iran:2,UK:1,Pakistan:0"
                        };

        var count = arr1
            .SelectMany(s => s.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
            .GroupBy(s => s.Split(':')[0], s => s.Split(':')[1])
            .ToDictionary(g => g.Key,
                 g =>
                 {
                     var items = g.Distinct();
                     var result = new Dictionary<String, int>();
                     foreach (var item in items)
                         result[item] = g.Count(gitem => gitem == item);
                     return result;
                 });

        // print the result
        foreach (var country in count.Keys)
        {
            foreach (var ocurrence in count[country].Keys)
            {
                Console.WriteLine("{0} : {1} = {2}", country, ocurrence, count[country][ocurrence]);
            }
        } 
```

**此查询的目的**

执行此查询以实现此目的：我们想知道巴基斯坦有多少次带有 '0' ，有多少次带有 '1' ,2 ,3 , 4 ，并且我们希望获得所有国家/地区的此信息。请任何人都可以逐步定义它。谢谢

注意：此查询已编译，没有错误并且工作正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T04:58:51.240

让我们看一下查询，一步一步

[SelectMany](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)获取在 ',' 上拆分的结果，并将各种拆分组合回单个 IEnumerable

> 将序列的每个元素投影到 IEnumerable 并将生成的序列展平为一个序列。

因此，在那个阶段，您已将数组`arr1`转换为单个`IEnumerable<string>`值，例如`USA:2`

[GroupBy](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)然后将`IEnumberable<string>`. `USA:2`它像使用“：”字符一样拆分每个条目。左侧是分组键，右侧是值。

> 根据指定的键选择器函数对序列的元素进行分组。

[ToDictionary](http://msdn.microsoft.com/en-us/library/bb549277.aspx)将该分组转换为字典。Dictionary 条目的键是分组键（例如`USA`）。Dictionary 条目的值是一个新的（匿名）对象：

```
g =>
             {
                 var items = g.Distinct();
                 var result = new Dictionary<String, int>();
                 foreach (var item in items)
                     result[item] = g.Count(gitem => gitem == item);
                 return result;
             } 
```

匿名对象是通过遍历和计算给定计数的唯一出现次数（例如，如果键是`USA`，值是多少次`1`）并返回该计数来构造。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:57:00.097

```
var count = arr1
        .SelectMany(s => s.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries)) 
```

上述方法尝试将 Items 拆分为 ，因此它将单独获取每个项目以用于下一个流程，例如 Pakistan:4 ， India:3

```
 .GroupBy(s => s.Split(':')[0], s => s.Split(':')[1]) 
```

这个 Groupby 加入了所有同一个国家，他们的数量像巴基斯坦，4 和巴基斯坦，0 在一个组中，印度，3 和印度，4 在另一个组中，就像其他人一样。

```
 .ToDictionary(g => g.Key, 
```

现在它正在像首先考虑巴基斯坦，印度，伊朗等一样一个一个地考虑关键。

```
 g =>
             {
                 var items = g.Distinct(); 
```

此项目使其计数条目进入 ItemCollection 就像巴基斯坦一样，在 Enumerable 中包含 4,0 以供下一次计算。

```
 var result = new Dictionary<String, int>();
                 foreach (var item in items)
                     result[item] = g.Count(gitem => gitem == item); 
```

一项一项地获取项目并存储在结果变量中，g.count 现在正在检查相同计数的条目数，例如巴基斯坦有 4 次两次和 0 次一次，就像印度有 3 次和 4 次一样.

```
 return result;
             }); 
```

休息正在获取代码并在控制台上显示。

# c# - MVC Music Store 链表数据

> ID：11516076
> 
> 赞同：0
> 
> 时间：2012-07-17T04:37:38.837
> 
> 标签：c#, asp.net-mvc, entity-framework-4, ef-database-first

我已经研究这个问题大约两个星期了，我认为是时候寻求帮助了......

我正在尝试让 MVCMusicStore 购物车教程在第 8 部分工作：[http](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-8) ://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-8 。我的项目的主要区别在于我使用的是数据库优先（而不是代码优先，用于使用实时/托管数据库的 MVC 实践）。

班级代码：

```
public partial class Cart
{
    public int RecordId { get; set; }
    public string CartId { get; set; }

    public int AlbumId { get; set; }

    public Nullable<int> Count { get; set; }
    public Nullable<System.DateTime> DateCreated { get; set; }

    public virtual Album Album { get; set; }
}

public partial class Album
{
    public int AlbumId { get; set; }
    public Nullable<int> GenreId { get; set; }
    public Nullable<int> ArtistId { get; set; }
    public string Title { get; set; }
    public Nullable<decimal> Price { get; set; }
    public string AlbumArtUrl { get; set; }

    public virtual Genre Genre { get; set; }
    public virtual Artist Artist { get; set; }
}

public class ShoppingCartViewModel
{
    public List<Cart> CartItems { get; set; }
    public decimal CartTotal { get; set; }
} 
```

在 ShoppingCartViewModel 中填充 CartItems 的函数：

```
public List<Cart> GetCartItems()
{
    return db.Carts.Where(cart => cart.CartId == ShoppingCartId).ToList();
} 
```

.cshtml 页面：

```
@model BoothPimps.ViewModels.ShoppingCartViewModel

@foreach (var item in Model.CartItems) 
{ 
    <tr id="row-@item.RecordId"> 
        <td>
            @Html.ActionLink(item.Album.Title, "Details", "Store", new { id = item.AlbumId }, null)
        </td>
    </tr> 
} 
```

这是 Model.CartItems 的图像，除了链接的专辑数据之外的所有内容都填充： [http](http://s1253.photobucket.com/albums/hh585/codingcoding1/?action=view&current=image1.jpg) : //s1253.photobucket.com/albums/hh585/codingcoding1/?action=view¤t=image1.jpg （项目名称在任何地方都被删除）

**此处的代码错误：**

```
@Html.ActionLink(item.Album.Title, "Details", "Store", new { id = item.AlbumId }, null) 
```

**问题：item.Album 始终为空。**

Album.AlbumId = Cart.AlbumId 应该将专辑数据链接到购物车，这样它就不会返回 null 但它不起作用。然而，在以前的教程中，当我做同样的事情，但要从专辑中获取流派或艺术家数据时，链接数据有效，我能够检索这些值，如下所示：

```
@Html.DisplayFor(model => model.Genre.Name)
@Html.DisplayFor(model => model.Artist.Name) 
```

那么为什么 model.Genre 和 model.Artist 返回值但 item.Album 为空呢？我不是使用“虚拟”关键字以相同的方式链接这些值吗？我错过了什么？

谢谢你看看这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:45:36.563

您是否真的有可能在购物车中有一个项目，因为它的专辑是空的？
尝试在此操作的末尾放置一个断点，并检查您的模型包含什么。

使用调试器找到没有更多 item.Album 的点，还要确保检查您的数据库中是否有任何没有专辑的项目。一旦您知道错误来自哪里，您很可能能够修复它，但如果没有，请在此处发布您的发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:16:23.320

弄清楚了。

myProject.Context.cs（从 .edmx 文件生成）在 Web.Config 文件中生成了新的 connectionString 信息，我必须在我的代码中引用它。我的*错误*代码实际上是使用旧版本的实体对象，应该指向新版本。

```
private Entities = new Entities();
// private MyProjectDb = new MyProjectDb(); 
```

由于 MVC Music Store 教程使用 Code First 和假数据，因此产生了混淆，所以直到后来我才意识到我必须更改这段代码。

# c# - 通过比较 C# 中的两个字符串数组返回索引

> ID：11516080
> 
> 赞同：-2
> 
> 时间：2012-07-17T04:38:34.193
> 
> 标签：c#

假设我们有两个字符串数组

```
string[] array1 = {"aa", "bb", "cc"};
string[] array2 = {"bb", "aa", "cc", "bb", "aa", "cc"}; 
```

现在 array2 中的字符串 bb 在 array1 的第二个位置，所以输出应该是 2

array2 中的 aa 位于 array1 的第一个位置，因此输出应为 1

array2 中的 cc 在 array1 的第三个位置，所以输出应该是 3

array2 中的 bb 在 array1 的第二个位置，所以输出应该是 2

很快..

所有这些输出索引位置都应该存储在一个数组中。

知道如何在 C#.net 中实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:41:42.387

像这样的东西：

```
int[] indicies = array2.Select(n => Array.IndexOf(array1, n)).ToArray(); 
```

这会将 的元素`array2`作为它们的索引序列投影到 中`array1`，并将结果转换为数组。

* * *

正如评论中所指出的，最初的要求是“aa”映射到值 1，即使它在 array1 中的索引是 0。将计算的索引偏移 1 将解决这个问题：

```
int[] indicies = array2.Select(n => Array.IndexOf(array1, n) + 1).ToArray(); 
```

通过这种修改，array1 中未找到的元素当然会导致索引为 0 而不是 -1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T04:45:29.193

假设这是家庭作业或类似的学习练习，这里有一些指导：

`array2`似乎是您要为其查找位置的输入值。

`array1`似乎是您用于确定元素位置的参考数组。

*   循环遍历`array2`. 我们称之为元素`elem`。
*   对于每一个`elem`，找到索引`array1`
*   将该索引添加到新数组

查看[Array.IndexOf](http://msdn.microsoft.com/en-us/library/system.array.indexof.aspx)以了解如何找出`elem`参考数组中的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T04:48:49.250

有一段时间没有编写 C# 代码了，但是..

使用嵌套 for 循环检查 array1 是否包含数组 2 中的指定字符串，如果包含，则将索引 array1 存储在您将用于存储所有索引的数组中。

至于存储输出的数组，给它array2的大小。

祝你好运！:)

# iphone - 更改 UITableView 的 contentInset 而不更改其 contentOffset？

> ID：11516081
> 
> 赞同：8
> 
> 时间：2012-07-17T04:38:41.087
> 
> 标签：iphone, ios, uitableview, uiscrollview

我想在 iPhone 上创建一个类似于 Apple 的 Messages 应用程序的 UI。我有一个表格视图和它下面的文本字段。当我选择文本字段时，我会在键盘向上滑动时为表格视图的 contentInset 设置动画，以便内容显示在键盘上方。

我有一些代码使用平移手势识别器来检测用户何时向下滚动表格视图并在发生这种情况时向下动画键盘（如果您看到 Apple 的 Messages 应用程序，它具有关闭键盘的相同功能。向下滚动在表格视图上，当您的手指滑过文本字段时，键盘随之下降）。

这很好用，但是如果表格视图滚动到顶部，并且当键盘向下滑动时我开始更改其内容插图，表格视图会滚动到顶部，然后重新回到顶部，从而导致奇怪的生涩动画。我认为这是因为如果表格视图滚动到顶部，更改 contentInset 会将 contentOffset 重置为表格视图的顶部，这使它表现得很奇怪。

有谁知道如何在不更改其 contentOffset 的情况下更改滚动视图的 contentInset？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T05:43:11.213

我设法通过一个小的解决方法让一切都完美地工作。我只是这样做了：

```
// in a method that gets repeatedly called as the pan gesture recognizer changes
if([tableView contentOffset].y > 0) {
    UIEdgeInsets insets = [tableView contentInsets];
    inset.bottom = currentKeyboardHeight;
    [tableView setContentInset:inset];
} 
```

这样如果 contentOffset 位于最顶部或滚动到顶部，则不会更改插图。如果表格向下滚动并拖动，它将更改插图直到它到达顶部，然后停止更改它们，这样就不会发生奇怪的闪烁。

* * *

**编辑：**找出根本原因，并认为我会更新它，而不是仅仅离开解决方法。我所做的是`CGAffineTransformMakeTranslation`在我的帧计算中间混合 a，根据 Apple 文档，这是一个很大的禁忌。当`transform`属性 not`CGAffineTransformIdentity`时，`frame`变得未定义，如果我滚动表格视图并同时更改其内容插图，这会导致一些非常奇怪的行为。

# ios - ARC 是否消除了对临时变量的需求？

> ID：11516089
> 
> 赞同：4
> 
> 时间：2012-07-17T04:39:36.390
> 
> 标签：ios, memory-management, automatic-ref-counting

如果没有启用 ARC，我们会写

```
NSArray *items = [[NSArray alloc] initWithObjects:
                  @"a",
                  @"b",
                  @"c",
                  @"d",
                  nil];

self.allItems = items;
[items release]; 
```

我只是想知道我们是否可以像这样使用启用 ARC 的捷径：

```
self.allItems = [[NSArray alloc] initWithObjects:
                  @"a",
                  @"b",
                  @"c",
                  @"d",
                  nil]; 
```

我们可以`items`在使用ARC时消除吗？最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T04:41:43.887

是的，您展示的第二个示例在 ARC 下很好，并且可能是可取的，因为它更简洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T04:41:19.687

`items`是的，如果您使用 ARC ，您可以消除该变量。如果您在其他地方不需要它并且您认为它不会使您的代码更易于理解，我建议您将其删除。我肯定会在你的例子中消除它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T04:41:23.597

第二个示例将起作用，并且是现在的最佳实践。使用 ARC，您不再需要调用保留或释放。

# javascript - 由 HTML5 图形创建的矩形内的文本换行

> ID：11516091
> 
> 赞同：0
> 
> 时间：2012-07-17T04:39:36.390
> 
> 标签：javascript, html

我正在开发一个 HTML5 项目。我使用 ctx.strokeRect(x,y,width,height) 创建了一个矩形。还使用 ctx.fillText(textValue,x,y) 填充文本。但文本浮动在边界之外。我想使用 javascript 将所有文本保留在矩形边界内，就像在 TextArea 中发生的那样（即，当我们调整 textarea 的大小时，文本会在边界内换行）

提前致谢。

# java - 两次调用 Spring AOP 建议

> ID：11516092
> 
> 赞同：2
> 
> 时间：2012-07-17T04:39:51.350
> 
> 标签：java, spring, aop, spring-aop

出于某种原因，我的 Spring AOP 建议被调用了两次。我检查了：

1.  [Spring AOP 建议被调用了两次](https://stackoverflow.com/questions/7900905/spring-aop-advice-is-called-twice)，但我没有使用 Component 注释，而是声明了一次切面 bean 并使用 @Aspect 对其进行了注释，仅此而已。

2.  有点晚了，我意识到我的一个类还没有实现接口，这导致了 CGLIB2 需求。我解决了这个问题，CGLIB2 问题消失了，但双重调用仍然存在。

编辑：

忘了说我查过了，建议的方法没有被调用两次。

第二次编辑：

我用@Aspect 声明一个类，然后在应用程序上下文中将它声明为一个bean。XML 文件中没有建议或切入点。

第三次编辑：

另外值得注意的是，我在执行周围建议的方法之前和之后记录：

```
log.info("before");

pjp.proceed();

log.info("after"); 
```

我看到的是：

```
before
before
after
after 
```

这真的很奇怪。

我设置的@Before 和@Around 建议都会发生这种情况。我还没有尝试过其他类型。

这是切入点声明，但名称已更改：

```
@Around("execution(public java.util.List<java.lang.String> pac.age.names.myDAO.doSomething(java.lang.String, java.lang.String))") 
```

有任何想法吗？

谢谢，

浮潜

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T14:25:08.607

好吧，看来这实际上是记录器的问题。今天早上我检查并发现所有内容都被记录了两次。当我用常规的 sysout 调用替换记录器调用时，一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-01T23:01:53.790

I had the same problem. My double aspect call was caused by me adding a parent to the aspect and also having an @Before annotation on a method in the parent that the child called in its own @Before. The Parent @Before was being inherited as a aop advice which also matched my pointcut. Therefore in addition to me explicitly calling from the child i.e(super.someMethod()), I also implicitly was calling it right after the child's advice finished executing. Removing parents @Before on the inherited 'someMethod()' fixed the aspect being called twice. So you can inherit advice. Long story short.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-26T10:06:16.820

The problem with the duplicate logs comes from the "additivity" property of the Logger implementation. You can configure your logger with additivity=false (either in XML or .property file).

```
log4j2.logger.youraspect-logging.name=your.package.YourAspect
log4j2.logger.youraspect-logging.level=debug
log4j2.logger.youraspect-logging.appenderRef.stdout.ref=STDOUT
log4j2.logger.youraspect-logging.additivity=false 
```

# delphi-7 - Virtual TreeView 输给 UseExplorer 主题

> ID：11516094
> 
> 赞同：0
> 
> 时间：2012-07-17T04:40:10.790
> 
> 标签：delphi-7, virtualtreeview, tvirtualstringtree, delphi

我在 virtualtreeview (DesignTime) 中启用了网格线和 toUseExplorerTheme。

我想在运行时删除网格线，但似乎我失去了 toUseExplorerTheme 属性。这是一个错误还是我错过了什么？我试图将它添加回设置/选项，但没有运气。我也有 XP 清单。

这里有一点代码：

```
VirtualStringTree1.TreeOptions.PaintOptions := VirtualStringTree1.TreeOptions.PaintOptions - [toShowVertGridlines]; // I lose the ExplorerTheme :/ 
```

谢谢您的帮助。

# android - 自定义水平视图寻呼机通过从数据库表填充的 ListViews 进行分页

> ID：11516098
> 
> 赞同：1
> 
> 时间：2012-07-17T04:40:31.150
> 
> 标签：android, sqlite, android-listview, android-viewpager

我正在实现一个自定义水平视图寻呼机。我的意图是在 ListView 中填充特定表的条目。该方法必须检测数据库中有多少表，并为水平视图分页器设置尽可能多的页面。（一页一表 - 每页仅包含一个 ListView 以显示相应表的条目）。

这是我的尝试。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewp);
    MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.threepageviewer);
    myPager.setAdapter(adapter);
    DbHelper helper = new DbHelper(this);
    count = helper.countTables();
    myPager.setCurrentItem(count);
    temp = helper.countTables() - 1;
    temp1 = helper.countTables() - 1;
} 
```

这是页面适配器类。

```
private class MyPagerAdapter extends PagerAdapter {

    public int getCount() {
        return count;
    }

    public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View view = null;

        if (position == count-1) {
            view = inflater.inflate(R.layout.middle, null);
            ListView list = (ListView) view.findViewById(R.id.listView1);
            helper = new DbHelper(Listing.this);
            String tabName = helper.getTableName(temp1);
            dataset_cursor = helper.getAll(tabName);
            startManagingCursor(dataset_cursor);
            adapter = new NoteAdapter(dataset_cursor);
            list.setAdapter(adapter);
            adapter.notifyDataSetChanged();
        }
        if (position < temp) {
            temp--;
            temp1--;
            // int hg = temp - position;
            // int tempo = temp - hg;
            view = inflater.inflate(R.layout.left, null);
            ListView list1 = (ListView) view.findViewById(R.id.listView1);
            helper = new DbHelper(Listing.this);
            String tabName = helper.getTableName(temp1);
            dataset_cursor1 = helper.getAll(tabName);
            startManagingCursor(dataset_cursor1);
            adapter1 = new NoteAdapter(dataset_cursor1);
            list1.setAdapter(adapter1);
            adapter1.notifyDataSetChanged();
            Toast.makeText(getBaseContext(), tabName, Toast.LENGTH_LONG);
            temp--;
            temp1--;
        }
        if (position > temp) {
            temp++;
            temp1++;
            // int hg = position - temp;
            // int tempo = temp - hg;
            view = inflater.inflate(R.layout.right, null);
            ListView list2 = (ListView) view.findViewById(R.id.listView1);
            helper = new DbHelper(Listing.this);
            String tabName = helper.getTableName(temp1);
            dataset_cursor2 = helper.getAll(tabName);
            startManagingCursor(dataset_cursor2);
            adapter2 = new NoteAdapter(dataset_cursor2);
            list2.setAdapter(adapter2);
            adapter2.notifyDataSetChanged();
        }

        ((ViewPager) collection).addView(view, 0);
        return view;
    } 
```

我希望最后一个数据库表成为默认页面。当我向左滑动时，它应该转到倒数第二个表格，依此类推。在尝试这个时，我几乎得到了我需要的东西。除了这个问题。

**END** -- **TABLE6** --(向左滑动)-- **TABLE5** --(向左滑动) -- **TABLE5 --(向左滑动)--** **TABLE3** --(向左滑动)-- **TABLE2** --(向左滑动)-- **TABLE1** - -**结束**

**END** -- **TABLE1** --(向右滑动)-- **TABLE2** --(向右滑动)-- **TABLE2** --(向右滑动)-- TABLE3 --(向右滑动)-- **TABLE4** **--** (向右滑动)-- **TABLE5** - -**结束**

我做对了。这里可能是什么错误。还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:41:44.110

问题是因为你的`temp`和`temp1`变量。请执行下列操作..

```
public Object instantiateItem(View collection, int position) {
     ...
     ...
     ListView list = (ListView) view.findViewById(R.id.listView1);
     helper = new DbHelper(Listing.this);
     String tabName = helper.getTableName(position+1);
     dataset_cursor[position] = helper.getAll(tabName);
     startManagingCursor(dataset_cursor[position]);
     adapter = new NoteAdapter(dataset_cursor[position]);
     list.setAdapter(adapter);
     adapter.notifyDataSetChanged();

     ((ViewPager) collection).addView(view, 0);

     return view;
} 
```

如果要维护多个数据集游标，则声明数据集游标数组，`dataset_cursor[position]`如上所示可以轻松访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T16:01:06.610

首先看起来不太好：

```
temp--;
temp1--;
...
temp--;
temp1--; 
```

好的，您正在使用临时变量与您的位置进行比较，但该变量不代表您想要的。

1.  你减少了很多你的变量。我建议您删除代码中的第二个太减量。
2.  `if(position < temp)`你把你的温度降低两次，然后再比较一下？`if(position>temp)`现在温度可能更小->不是你想要的。

我建议你直接使用位置来获取正确的表格并使用`ELSE IF's`

# javascript - 如何安排网页中js和css文件的顺序？

> ID：11516101
> 
> 赞同：1
> 
> 时间：2012-07-17T04:41:31.260
> 
> 标签：javascript, jquery, css, html, jquery-mobile

我应该将**.js**放在**.css**前面，还是将**.css**放在**.js**文件前面？哪个更好？我正在使用 jquery 开发一个 html5 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:49:01.590

一般规则是将样式表 (.css) 放在顶部，将脚本 (.js) 放在底部。但请注意，您可能无法将所有脚本都放在底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T05:31:35.283

尝试使用[http://headjs.com/](http://headjs.com/)这将优化 JS 和 CSS 的加载。 [http://requirejs.org/](http://requirejs.org/)也是一个很好的框架来处理这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T10:04:54.600

我建议您使用[HTML5 Boilerplate](http://html5boilerplate.com/)，它根据顶级前端开发人员在过去 4 年中制定的最佳实践为您做出这样的决定。代码的注释非常好，文档也很出色，因此您可以轻松了解更多关于影响各种决策的想法，但如果您只是想继续构建您的页面，并且知道您的基础是健全的，那么您能够。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-17T04:45:13.410

没有更好的办法。只要它们都在标题中，它们的顺序就没有区别，除非它们相互依赖。

编辑：在大多数简单的情况下，以上是正确的。

理想情况下，您应该将所有 CSS 样式放在`HEAD`元素中，并将所有`SCRIPT`元素按依赖顺序放在元素末尾`BODY`（直接在 end 之前`</body>`）。

不同的顺序可以在较新的**桌面**浏览器中产生*一些*差异。在移动浏览器中，推测解析不可用，因此浏览器在执行任何其他加载之前等待脚本请求。

 **tl;dr - 这并不重要，因为差异是微不足道的，特别是如果您的前端严重依赖 JavaScript。**

# visual-c++ - 如何检查文本文件原始编码VC++或MFC

> ID：11516102
> 
> 赞同：0
> 
> 时间：2012-07-17T04:41:32.637
> 
> 标签：visual-c++, mfc

我使用 CStdioFile 读取文本文件并且输出是字符串，但是当我在对话框中选择文件时我想检查原始编码文件如何检查原始编码？

//这是我的代码

```
if(dlg.DoModal() == IDOK)
{

    path = dlg.GetPathName(); //get file path
    CStdioFile pStdioFile1(path, CFile::modeRead);  
    char buff[BUFSIZ];

    while(!feof(pStdioFile1.m_pStream))
        {

            pStdioFile1.ReadString(Buff); //Buff is read text to string  
            msg += Buff;

            if(!feof(pStdioFile1.m_pStream))
            {
                msg += "\n";
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:09:13.597

你不能。在*某些*情况下，数据将包含所使用编码的指示，但您不能真正依赖它。Windows 确实[`IstextUnicode`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318672.aspx)可以让您猜测某些文本是否是 unicode（在这种情况下表示 UTF-16），但 1）它只对 Unicode 有好处，2）结果只是一个猜测。

顺便说一句，我对您将整个文件读入字符串的代码并不感到兴奋。假设文件预计相当小，我通常会使用类似的东西：

```
std::ifstream in(dlg.GetPathName());
std::stringstream buffer;
buffer << in.rdbuf();

// now the content of the file is availble as `buffer.str()`. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T06:55:22.783

检查文件的 BOM（字节顺序标记）（参见[http://en.wikipedia.org/wiki/Byte_order_mark](http://en.wikipedia.org/wiki/Byte_order_mark)）。

如果文件不包含 BOM，则假定它是 8 位 ANSI 文件。

否则，BOM 指示文件的格式。检查链接，它包含一个很好的不同 BOM 表及其含义。

# ios - 将 UiTextField 中的第一个字母设为小写（iOS 的 Phonegap）

> ID：11516103
> 
> 赞同：2
> 
> 时间：2012-07-17T04:41:38.917
> 
> 标签：ios, cordova, uitextfield, lowercase

当我在用户名字段中输入字母时，第一个字母总是大写。如何使第一个字母`UITextField`小写。我不知道如何在 Phonegap 中解决这个问题。

```
<form id="loginForm">
<div   class="ui-hide-label">
    <label for="username">Username:</label>
    <input type="text" name="username" id="username"  value="" placeholder="Username" />
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-01T11:47:02.697

我在 iOS 开发过程中遇到了类似的问题。我用了

```
<input ..... autocapitalize="off" autocorrect="off"/> 
```

它工作得很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T05:42:23.663

我不知道Phonegap，但是对于普通的UITextfield，您可以使用这一行（其中textField 是UITextField 的出口）：

```
textField.autocapitalizationType = UITextAutocapitalizationTypeNone; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T06:35:14.887

不过，这可能不是最好的方法，我使用这个：

```
<input type="email" name="username" id="username" /> 
```

只是`input type`从更改`text`为`email`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T01:25:18.340

我使用了一个 CSS 属性 text-transform:lowercase; 如果您使用的是可以工作的phonegap！

# c# - 一对一关系导致异常：AssociationSet 处于“已删除”状态。给定多重约束

> ID：11516109
> 
> 赞同：10
> 
> 时间：2012-07-17T04:42:27.183
> 
> 标签：c#, entity-framework, entity-framework-4, one-to-one, entity-framework-4.3

我首先按照此处规定的方法使用 EF 代码建立了一对一的关系：

[实体框架中的单向一对一关系](https://stackoverflow.com/questions/10466660/unidirectional-one-to-one-relationship-in-entity-framework)

我的映射看起来像这样......

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Asset>()
        .HasRequired(i => i.NewsItem)
        .WithOptional(e => e.Asset)
        .Map(m => m.MapKey("NewsItemId"));
} 
```

但是当我得到这个异常时......

> 来自“Asset_NewsItem”AssociationSet 的关系处于“已删除”状态。给定多重约束，相应的“Asset_NewsItem_Source”也必须处于“已删除”状态。

每当此代码运行时：

```
var entry = _db.NewsItems.Find(id);

entry.Asset = new Asset();

_db.DbContext.SaveChanges(); 
```

如果我明确地将与 NewsItem 关联的先前资产标记为删除，我可以让事情正常工作，但它似乎有点不稳定。看起来，基于映射，上面的代码应该可以简单地工作......用新的资产替换旧的资产。

难道我做错了什么？我需要在映射中指定什么东西才能让事情正常工作吗？或者，它只是必须删除然后添加这样的关联对象的 EF 方式吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T09:29:18.427

这就是 EF 的工作方式。您已经加载了一个包含相关资产的条目，现在您想要分配一个新资产。此操作将使您的旧资产与任何条目无关，但您的映射不允许这样做（您指定`Asset`必须有相关`Entry`）。因此，在分配新资产以满足映射约束之前，您必须删除旧资产或将其分配给另一个条目。

# iphone - 停止 NSDictionary 的块枚举

> ID：11516113
> 
> 赞同：14
> 
> 时间：2012-07-17T04:43:43.843
> 
> 标签：iphone, objective-c, ios, ipad

如果我正在执行以下操作，如何在此处停止枚举？我认为文档说要设置 stop = TRUE。但是当我在块内这样做时，它说它不是不可分配的。

```
 [self.visibleViewControllers_ enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {

            if (CGRectIntersectsRect(visibleRect, viewRect)) {
               //break here
            }
        }]; 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-17T05:03:06.890

设置`*stop`为`YES`

```
[self.visibleViewControllers_ enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {

            if (CGRectIntersectsRect(visibleRect, viewRect)) {
               *stop =YES;
               return;
            }
        }]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-28T09:43:24.387

对于 SWIFT 2：

```
Dict.enumerateKeysAndObjectsUsingBlock { (key, value, stop) -> Void in

            if(//Something){
                 //Do Something
            }
            else {
                //To Stop
                stop.memory = true
            }
        } 
```

# php - 使用 PHPUnit 的模拟对象传递对象类型的参数

> ID：11516115
> 
> 赞同：0
> 
> 时间：2012-07-17T04:44:32.297
> 
> 标签：php, phpunit

我试图在调用模拟对象时传递一个对象。像这样：

```
public function testGetMedia()
{

$getPrimaryMediaHelper = $this->getMock('GetPrimaryMediaHelper', array('getMedia'));

$getPrimaryMediaHelper->expects($this->any())
    ->method('getMedia')
    ->with($media1, 'test');

} 
```

第一个参数必须是对象类型，否则测试将失败。如何将 $media 模仿为对象类型？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:05:02.887

我认为以下代码应该可以工作

```
$getPrimaryMediaHelper->expects($this->any())
    ->method('getMedia')
    ->with($this->isType('object')); 
```

# javascript - JQUERY BlockUI 进度图像没有动画

> ID：11516117
> 
> 赞同：0
> 
> 时间：2012-07-17T04:44:36.000
> 
> 标签：javascript, jquery

我正在使用 JQUERY Block UI 来显示我们系统中长期运行的进程之一的进度图像。我正在使用下面的代码来显示进度图像。在 blockui 和 unblockui 代码之间有一个长时间运行的方法调用。当我执行此代码块时，UI 可以工作，但图像不会像我们在其他网站上看到的那样旋转。此代码显示 s 静止图像，它不会随时旋转，并且最终解除阻止 UI 工作。为什么这个进度图像没有动画？

```
$.blockUI({ message: img src="../progress.gif" /><h4>Just a moment</h4> });

AddFunctionalityToLevel(id); //Just a method call.  

$.unblockUI({ fadeOut: 200 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:53:33.800

我在这里注意到的问题是单线程阻止了 Image 的旋转。所以我找到了一种调用异步方法的方法，让图像在单独的线程中旋转。下面是存档的方式。

$.blockUI({ message: '请稍等......' });

setTimeout('AddFunctionalityToLevel(' + id + ')', 1000);

函数 AddFunctionalityToLevel(id) {

//函数逻辑

$.unblockUI({ fadeOut: 200 });

}

# css - Magento 导航标题类

> ID：11516119
> 
> 赞同：-2
> 
> 时间：2012-07-17T04:44:58.293
> 
> 标签：css, magento, styles

我正在尝试使更多类别适合我的导航栏。我想通过减少现有类别的边距大小来做到这一点。我怎样才能做到这一点？我通过styles.css猜测，但我无法隔离决定它的变量..

![我正在尝试修复的图像](../Images/1da6fe900c41ea379b0b40520cdb0732.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:09:03.333

对于默认的 Magento 主题，它是以下类：

```
#nav a { float:left; padding:5px 12px 6px 8px; color:#a7c6dd; font-weight:bold; } 
```

第 560 行或 styles.css。

# linux - readChar(con, 5L, useBytes = TRUE) 中的错误：无法打开连接

> ID：11516120
> 
> 赞同：0
> 
> 时间：2012-07-17T04:45:06.477
> 
> 标签：linux, r, rgooglemaps

' `mow.R`' 现在包含：

```
library(RgoogleMaps);
png(filename="RgoogleMaps-package_%03d_med.png", width=480, height=480);

MyMap <- GetMap(markers='&40.702147,-74.015794,blues%7C40.711614,-74.012318,greeng%7C40.718217,-73.998284,redc', destfile="MyTile1.png"); 
```

这会导致以下新错误：

```
> source('mow.R')
[1] "Note that when center and zoom are not specified, no meta information on the map tile can be stored. This basically means that R cannot compute proper coordinates. You can still download the map tile and view it in R but overlays are not possible. Do you want to proceed ? (y/n)"
y
[1] "&40.702147,-74.015794,blues%7C40.711614,-74.012318,greeng%7C40.718217,-73.998284,redc"
[1] "http://maps.google.com/maps/api/staticmap?size=640x640&maptype=terrain&format=png32&sensor=true&40.702147,-74.015794,blues%7C40.711614,-74.012318,greeng%7C40.718217,-73.998284,redc"

Error in readChar(con, 5L, useBytes = TRUE) : cannot open the connection
In addition: Warning message:
In readChar(con, 5L, useBytes = TRUE) :
  cannot open compressed file 'MyTile1.png.rda', probable reason 'No such file or directory'
> 
```

纠正这个错误的方法是什么？

**R 版本 2.15.1**
**RgoogleMaps 版本 1.2.0**

* * *

```
> sessionInfo() 
R version 2.15.1 (2012-06-22)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] RgoogleMaps_1.2.0 png_0.1-4        
> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-17T06:18:57.647

解决了。这是工作代码：

```
library(RgoogleMaps);
png(filename="Rg.png", width=480, height=480);

lat    = c(40.702147,40.718217,40.711614);
lon    = c(-74.012318,-74.015794,-73.998284);
center = c(mean(lat), mean(lon));
zoom <- min(MaxZoom(range(lat), range(lon)));

MyMap <- GetMap(center=center, zoom=zoom, markers='&40.702147,-74.015794,blues%7C40.711614,-74.012318,greeng%7C40.718217,-73.998284,redc', destfile="My.png");

tmp <- PlotOnStaticMap(MyMap,lat=c(40.702147,40.711614,40.718217),lon=c(-74.015794,-74.012318,-73.998284),cex=1.5,pch=20,col=c('red', 'blue', 'green'),add=F);

dev.off(); 
```

这导致：

```
dd@linux-y3pi:~/RTest> ls
new.R

dd@linux-y3pi:~/RTest> R

R version 2.15.1 (2012-06-22) -- "Roasted Marshmallows"
Copyright (C) 2012 The R Foundation for Statistical Computing
ISBN 3-900051-07-0
Platform: x86_64-unknown-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

[Previously saved workspace restored]

> source('new.R')
Loading required package: png
[1] "&40.702147,-74.015794,blues%7C40.711614,-74.012318,greeng%7C40.718217,-73.998284,redc"
[1] "http://maps.google.com/maps/api/staticmap?center=40.7106593333333,-74.0087986666667&zoom=15&size=640x640&maptype=terrain&format=png32&sensor=true&40.702147,-74.015794,blues%7C40.711614,-74.012318,greeng%7C40.718217,-73.998284,redc"
> q()
Save workspace image? [y/n/c]: y

dd@linux-y3pi:~/RTest> ls
My.png  My.png.rda  new.R  Rg.png

dd@linux-y3pi:~/RTest> 
```

# apache-flex - Scroller 类中的焦点管理器错误

> ID：11516121
> 
> 赞同：0
> 
> 时间：2012-07-17T04:45:10.610
> 
> 标签：apache-flex, flex4, flash-builder

在 Scroller.as 类第 2139 行中，我收到以下错误：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at spark.components::Scroller/focusInHandler()[E:\dev\4.y\frameworks\projects\spark\src\spark\components\Scroller.as:2139]
    at flash.display::Stage/set focus() 
```

来自 Scroller.as

```
/**
 *  @private 
 *  Listens for any focusIn events from descendants 
 */ 
override protected function focusInHandler(event:FocusEvent):void
{
    super.focusInHandler(event);

    // When we gain focus, make sure the focused element is visible
    if (viewport && ensureElementIsVisibleForSoftKeyboard)
    {
        var elt:IVisualElement = focusManager.getFocus() as IVisualElement; 
        lastFocusedElement = elt;
    }
} 
```

由于这是框架代码，我有什么选项可以阻止它？

**上下文**
我创建了一个弹出 TitleWindow，在其中添加了一个 Module 并显示它。Module 有几个 State，每个 State 中是一个 Group，一个 Group 有一个 List，那个 List 有一个 ItemRenderer，那个 ItemRenderer 有一个 Checkbox。

该模块还有一个菜单。打开菜单时，弹出菜单会列出模块可用的状态。当从弹出菜单中选择一个项目时，我会更改为另一种状态。

当状态改变并且最后一项是复选框时，就会产生错误。至少这是我认为正在发生的事情。我推断这是因为在 Scroller 类中，处理程序正在处理一个事件。在那个事件上是当前的目标。当前目标是复选框。

**更新**- 重现步骤

```
// inside the Application.mxml
// define variables
public var popup:Group;
public var titleWindow:TitleWindow;

// shows pop up
public function showInspector():void {

    // inside show inspector method
    // create new inspector container
    popup = new InspectorContainer(); // a group implements="mx.managers.IFocusManagerContainer"
    titleWindow = new TitleWindow();
    titleWindow.addElement(popup);

    // display pop up title window
    PopUpManager.addPopUp(titleWindow, this, false);
}

<fx:Declarations>
    <modules:InspectorContainer/>
</fx:Declarations> 
```

1.  显示弹出。弹出窗口是一个标题窗口，其中 InspectorContainer（一个组）作为第一个元素。

2.  在弹出窗口从家庭状态（默认状态）更改为在线状态（当用户单击按钮时会发生这种情况）。在线状态有一个列表。List 有一个 itemrenderer。itemrenderer 有一个复选框。选中复选框。到目前为止，一切都很好。

3.  弹出窗口 (InspectorContainer) 有一个 mx:MenuBar 实例。当您单击菜单栏中的项目时，菜单栏会显示一个菜单项。

4.  单击菜单列表中的项目。调用 itemClick menuHandler。在此函数中，弹出窗口更改状态。

这是发生错误的时候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-13T02:31:44.280

错误的主要原因是UIComponent中的get函数“focusManager”：

```
public function get focusManager():IFocusManager
{
    if (_focusManager)
        return _focusManager;

    var o:DisplayObject = parent;

    while (o)
    {
        if (o is IFocusManagerContainer)
            return IFocusManagerContainer(o).focusManager;

        o = o.parent;
    }

    return null;
} 
```

如下代码，你可以看到uicomponent第一次得到它的focusmanager是从它的parent，parent.parent和parent.parent.parent...错误的）; 它的 parent 是 SystemManager，它的 parent.parent 是 Stage，它们要么不是 IFocusManagerContainer，所以要么没有 focusManager 属性，因此结果为 null。

最后我的解决方案是覆盖直接使用组件，如果您需要修复 2 层组件，请将 focusManager 传递给它。

```
package cn.easymenu.view.components{
 import mx.core.FlexGlobals;
 import mx.managers.IFocusManager;

 import spark.components.TextArea;

 public class TextArea extends spark.components.TextArea{
  override protected function partAdded(partName:String, instance:Object):void{
   super.partAdded(partName, instance);
   if(instance == scroller){
    scroller.focusManager=this.focusManager;
   }
 }

 override public function get focusManager():IFocusManager{
  var ifm:IFocusManager=super.focusManager;
  if(!ifm){
   ifm = FlexGlobals.topLevelApplication.focusManager;
  }
  return ifm;
  }
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T02:16:28.340

这是完整的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
            xmlns:s="library://ns.adobe.com/flex/spark" 
            xmlns:mx="library://ns.adobe.com/flex/mx" 
            autoDrawBackground="true"
            width="100%"
            implements="mx.managers.IFocusManagerContainer">

    <fx:Script>
    <![CDATA[
        public function get defaultButton():IFlexDisplayObject {
            return null;
        }

        public function set defaultButton(value:IFlexDisplayObject):void {
            // do nothing
        }

        override public function get systemManager():ISystemManager {
            return null;
        }
    ]]>
    </fx:Script>

    <!-- other stuff -->

    <s:CheckBox id="enabledCheckbox" />

</s:ItemRenderer> 
```

解决方案是实现 IFocusManagerContainer 或基本上它需要的功能。在我的情况下，我必须在 Scroller focusInHandler 处理程序中覆盖焦点事件的目标对象（组件）容器中的 systemManager getter。

我是这样想的。错误发生在 Scroller focusInHandler 中。焦点事件 (event.target) 的目标属性是 Checkbox（最后一个具有焦点的项）。Checkbox 的容器是我的 ItemRenderer。这是我实现 IFocusManagerContainer 接口的地方。我提到这一点是因为这条路径上有 5 个或更多父级别。

在 ItemRenderer 我添加了：

```
override public function get systemManager():ISystemManager {
    return null;
} 
```

该方法是实现mx.managers.IFocusManagerContainer 接口时必须实现的方法。

该接口还要求我定义 defaultButton getter 和 setter，但没有必要解决此错误。在测试中，我删除了接口，删除了 defaultButton 成员并留下了 systemManager getter，只是它仍然解决了问题。

另外，感谢 noobsarepeople2 的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T05:26:13.867

我在使用时遇到了这个问题`PopUpManager`。

1.  这是有关它的[Adob​​e 错误报告](https://bugs.adobe.com/jira/browse/SDK-29522)。
2.  这是关于它的另一篇[SO 帖子](https://stackoverflow.com/questions/10621624/adobe-air-scroller-throws-error-when-changes-focus-between-different-applicatio)。
3.  这是[另一篇](https://stackoverflow.com/questions/11385488/flex-popupmanager-giving-null-object-reference-error)可能相关也可能不相关的帖子（您没有提到导致此问题的原因）。

在我的情况下，我按照第一个和第二个链接的示例，`Scroller`并在适当的位置创建了一个子类进行空检查。这对于我的特殊情况来说很好，因此该应用程序没有遇到任何不良影响。也就是说，这个“修复”对我来说总是感觉有点老套。

# authentication - 在具有动态 IP 的开发服务器上设置 SSL

> ID：11516126
> 
> 赞同：3
> 
> 时间：2012-07-17T04:45:38.033
> 
> 标签：authentication, ssl, dns

我在 StartSSL 上获得了我拥有的域的证书。所以这给了我：

*   中间 CA 证书
*   StartCom 根 CA 证书
*   私钥

为了接收这些，我向 StartSSL 发送了这个：

*   我拥有的证明`mydomain.com`（通过电子邮件代码验证）
*   我用我已经拥有的私钥制作的 CSR

看来我需要做的是把这个密钥和这个证书链放到我的服务器上，这样服务器上的 OpenSSL 就可以使用它们来让 Web 浏览器放心。

但是哪个私钥是哪个？我有生成 CSR 的私钥和从 CA 获得的私钥。

我也不是 100% 清楚的是这里可​​以保证**什么。**浏览器查看证书，它告诉浏览器它应该连接到`mydomain.com`.

StartCom 所知道的是，我已经向他们展示了我拥有`mydomain.com`并且我是唯一拥有此私钥的人。这就是传递的内容，所以现在从南斯拉夫连接的浏览器现在也有这些信息。

因此，我的 Web 服务器位于具有动态 IP 的廉价家庭连接上。我在我的域注册商处将 DNS 设置为直接`mydomain.com`使用`myname.dynDNSProvider.com`a`CNAME`并且我的动态 DNS 服务已`myname.dynDNSProvider.com`重定向到我家路由器上的动态 WAN IP。

当 IP 更改时，请求会被定向到其他人或根本没有人。一切正常，因为攻击者无法使用报告的有效证书设置服务器`mydomain.com`。而且我还必须信任我的 DNS 服务。一旦我更新了 IP，一切都会再次运行。

这就是它的工作原理吗？从我的域到我的实际 IP 的重定向路径是否与 SSL 身份验证无关？如果我的 DNS 服务提供商愿意，他们是否可以比外来者更有效地执行攻击？

我基本上只是想以便宜的方式建立与我的家庭服务器的安全连接，为了以便宜的方式完成它，我完全可以接受动态 DNS 将导致的任何短暂停机时间。我在这里要解决的特定问题是让浏览器不要说“无效证书！！！” 当他们看到我的自签名 SSL 证书来自我的服务器时。我很难找到好的资源来了解这些东西是如何工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T05:00:58.943

> 但是哪个私钥是哪个？我有生成 CSR 的私钥和从 CA 获得的私钥。

您从 CA 获得了公钥*。*该公钥是您的 CSR 的一部分，加上来自 CACert 的证明，这基本上意味着“我们验证了这一点”。我正在简化，但这就是它的要点。您使用您拥有的私钥以及从他们那里获得的带有公钥的证书。

至于 DNS 位，证书上写的是“我可以接受`example.com`”。如果 Web 浏览器正在尝试连接到`example.com`，并且服务器有一些有效的证书`example.com`并且由浏览器信任存储中的证书签名（CACert 在 Mozilla 和 Microsoft 存储中），那么您已经设置好了。除非证书中有 IP 地址，否则连接产生的 IP 地址无关紧要（这不是标准做法；CACert 颁发的证书仅将 subjectAltNames 设置为 DNS 名称）。

> 如果我的 DNS 服务提供商愿意，他们是否可以

由于您的问题落后了，所以有点难以回答。但是您的“DNS 提供商”（我假设您的意思是 dyndns 服务）可以做三件事：将流量发送到他们自己的服务器，将其发送到任何地方，或者在拦截后将其发送给您。让我们分别解决那里的攻击。

首先，将流量发送到他们自己的服务器。如果他们无法为您的域获得有效证书，并且您*要求*所有连接都使用 SSL（没有用户发出非 SSL 请求），那么这对他们没有好处。他们的伪造证书将显示为无效并且游戏结束。

其次，将流量发送到无处。拒绝服务。在这种情况下并不有趣。

第三，尝试*中间人攻击*。这里的问题是客户端发送的流量只有拥有你的私钥的人才能读取 - 他们没有。因此，除非他们能够为您的域获得有效的证书，并出示该证书而不是您拥有的证书，否则他们可能处于中间但仍然无法读取流量 - 所以这种攻击实际上归结为第一个攻击。你很安全。

# xcode - 如何以编程方式添加 UIPanGestureRecognizer

> ID：11516127
> 
> 赞同：0
> 
> 时间：2012-07-17T04:45:38.177
> 
> 标签：xcode, uigesturerecognizer

在我的应用程序中，您可以触摸屏幕，屏幕上`UITextField`会出现一个可编辑的内容。我希望能够`UITextFields`在屏幕上移动这些新添加的内容。我还想添加一个旋转手势和一个捏合手势。现在这很难做到，因为每次点击屏幕都会添加一个新的 SubView ( `UITextField`)。下面是我的编码：

```
- (IBAction)addText:(UITapGestureRecognizer *)recognizer 
{ 
   if (recognizer.state == UIGestureRecognizerStateEnded) 
   {       
        UITextField *newText = [[UITextField alloc] initWithFrame:CGRectMake(40, 205, 280, 128)];
        newText.hidden = NO;
        [self.view addSubview:newText];
        newText.text = @"phrase";
        [newText setFont:[UIFont fontWithName:@"ArialRoundedMTBold" size:60]];
        newText.borderStyle = UITextBorderStyleNone;
        UIPanGestureRecognizer *pan= [[UIPanGestureRecognizer alloc] initWithTarget:newText action:nil];

        CGPoint translation = [pan translationInView:newText];
        pan.view.center = CGPointMake(pan.view.center.x + translation.x, pan.view.center.y + translation.y);
        [pan setTranslation:CGPointMake(0,0) inView:self.view];
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:49:40.570

有几种方法可以设置手势识别器之间的依赖关系。这里似乎有用的一种方法是`requireGestureRecognizerToFail:`方法。创建`pan`识别器后，添加以下内容：

```
[recognizer requireGestureRecognizerToFail:pan]; 
```

`recognizer`现在，除非平移识别器确定用户*没有*平移，否则点击识别器（在变量中）将不会激活。

# regex - 各种日期格式的正则表达式

> ID：11516129
> 
> 赞同：4
> 
> 时间：2012-07-17T04:45:48.150
> 
> 标签：regex, validation, date

我是 Regex 的新手，我想知道是否有人可以提供帮助。我什至不确定 Regex 是否是我正在尝试做的事情的最佳选择。

我有一个正在查看的字符串数组。我想在数组中找到与各种日期格式匹配的所有项目。以下是我尝试匹配的示例格式。

2012 年 4 月 1 日 - 当天没有前导零的短月份名称 - 匹配

2012 年 4 月 1 日 - 日期前导零的短月份名称 - 匹配

2012 年 4 月 1 日 - 全文本月份名称，当天没有前导零 - 匹配

2012 年 4 月 1 日 - 日期前导零的完整文本月份名称 - 匹配

2012 年 4 月 1 日 - 月份和日期没有前导零 - 匹配

2012 年 4 月 1 日 - 月份和日期的前导零 - 匹配

2012 年 2 月 29 日 - 如果年份是飞跃，则允许 2/29 - 匹配

2001 年 13 月 12 日 - 1-12 月以外的月份 - 不匹配

2012 年 2 月 30 日 - 一个月中有太多天 - 不匹配

2011 年 2 月 29 日 - 如果不是闰年 - 不匹配

我开发的当前正则表达式。

```
\b(?:(?:Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May?|Jun(?:e)?|Jul(?:y) |Aug(?:ust)?|Sep(?:t(?:ember)?)?|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?))|(0?[1-9]|1[012])[- /.,](0?[1-9]|1[0-9]|2[0-9]|3[01]) 
```

我可以开发正则表达式来去除每种格式的各个部分，但是将它们链接在一起是这样我只会得到一个匹配项。目前它匹配两次（月，月+日）。我只希望它在整个匹配时匹配。

谢谢

有限的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:54:44.393

为什么要在一个简单的正则表达式中完成所有操作？这听起来更复杂，它应该是。此外，例如，是否考虑在未来添加新格式？这不会是直截了当的。我宁愿将类似的模式分组到一个正则表达式中，例如“2012 年 4 月 1 日”、“2012 年 4 月 1 日”在一组中，然后是“2012 年 4 月 1 日”、“2012 年 2 月 30 日”。无论如何，我想在某些时候，您需要将日期的不同组成部分处理成一个共同的表示。为此，您可能需要专用代码。

这可能不是您想要的答案，但作为一般原则，始终尝试将大问题分解为您可以轻松解决的小问题。

干杯，

何塞

# ruby - Git推送heroku错误

> ID：11516138
> 
> 赞同：0
> 
> 时间：2012-07-17T04:46:38.753
> 
> 标签：ruby, heroku

我正在尝试将应用程序推送到 Heroku：'git push heroku master'，但出现错误：

> c:\Sites\rails_project\first_app>git push heroku master
> 计数对象：63，完成。
> Delta 压缩最多使用 2 个线程。
> 压缩对象：100% (49/49)，完成。
> 写入对象：100% (63/63)，25.95 KiB，完成。
> 总计 63（增量 2），重复使用 0（增量 0）
> 
> -----> Heroku 接收推送
> -----> 检测到 Ruby/Rails 应用程序
> -----> 使用 Bundler 版本 1.2.0.pre 安装依赖项
> 运行： bundle install --without development:test --path vendor /bundle -binstubs bin/从[https://rubygems.org/](https://rubygems.org/)
> 获取 gem 元数据......... 安装 rake (0.9.2.2) 安装 i18n (0.6.0) 安装 multi_json (1.3.6) 安装 activesupport (3.2.1) 安装builder (3.0.0) 安装activemodel (3.2.1) 安装erubis (2.7.0) 安装journey (1.0.4) 安装rack (1.4.1)
> 
> 安装 rack-cache (1.2)
> 安装 rack-test (0.6.1)
> 安装远足 (1.2.1)
> 安装倾斜 (1.3.3)
> 安装 sprockets (2.1.3)
> 安装 actionpack (3.2.1)
> 安装 mime-types (1.19 ) )
> 安装 polyglot (0.3.3)
> 安装 treetop (1.4.10)
> 安装邮件 (2.4.4)
> 安装 actionmailer (3.2.1)
> 安装 arel (3.0.2)
> 安装 tzinfo (0.3.33)
> 安装 activerecord (3.2.1)
> 安装 activeresource (3.2.1)
> 使用 bundler (1.2.0.pre)
> 安装 coffee-script-source (1.3.3)
> 安装 execjs (1.4.0)
> 安装 coffee-script (2.2.0)
> 安装 rack-ssl (1.3.2)
> 安装带有原生扩展的 json (1.7.3)
> 安装 rdoc (3.12 )
> 安装 thor (0.14.6)
> 安装 railties (3.2.1)
> 安装 coffee-rails (3.2.2)
> 安装 jquery-rails (2.0.2)
> 安装 rails (3.2.1)
> 安装 sass (3.1.20)
> 安装 sass- rails (3.2.5)
> 使用原生扩展安装 sqlite3 (1.3.3)
> Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem nativetension.
> /usr/local/bin/ruby extconf.rb
> 检查 sqlite3.h ... 没有
> sqlite3.h 丢失。尝试 'port install sqlite3 +universal'
> 或 'yum install sqlite3-devel' 并检查您的共享库搜索 pat
> （您的 sqlite3 共享库所在的位置）。
> *** extconf.rb 失败 ***
> 由于某种原因无法创建 Makefile，可能缺少
> 必要的库和/或头文件。检查 mkmf.log 文件以获取更多
> 详细信息。您可能需要配置选项。
> 提供的配置选项：
> --with-opt-dir
> --without-opt-dir
> --with-opt-include
> --without-opt-include=${opt-dir}/include
> --with-opt-lib
> --without-opt-lib=${opt-dir}/lib
> --with-make-prog
> --without- make-prog
> --srcdir=.
> --curdir
> --ruby=/usr/local/bin/ruby
> --with-sqlite3-dir
> --without-sqlite3-dir
> --with-sqlite3-include
> --without-sqlite3-include=${sqlite3-dir} /include
> --with-sqlite3-lib
> --without-sqlite3-lib=${sqlite3-dir}/lib
> Gem 文件将继续安装在 /tmp/build_3kebgpytmvg9c/vendor/bund /ruby/1.9.1/gems/sqlite3- 1.3.3 进行检查。
> 结果记录到 /tmp/build_3kebgpytmvg9c/vendor/bundle/ruby/1.9.1/gem sqlite3-1.3.3/ext/sqlite3/gem_make.out
> 安装 sqlite3 (1.3.3) 时出错，Bundler 无法继续。
> **确保`gem install sqlite3 -v '1.3.3'`在 bundlin 之前成功
> ！
> ！无法通过 Bundler 安装 gem。** ！
> ！Heroku push 被拒绝，无法编译 Ruby/rails 应用程序
> 
> 到 git@heroku.com:electric-mountain-4030.git
> ！[远程拒绝] master -> master (pre-receive hook denied)
> 错误：未能将一些参考推送到 'git@heroku.com:electric-mountain-4030.git'

我安装 sqllite3，但是：

> c:\Sites\rails_project\first_app>gem install sqlite3 -v '1.3
> 获取：sqlite3-1.3.3-x86-mingw32.gem (100%)
> 
> 您已经安装了 sqlite3 的二进制版本。
> 它是使用 SQLite3 版本 3.7.3 构建的。
> 建议使用完全相同的版本以避免po
> 
> 在构建这个 gem 的时候，必要的 DLL 文件
> 在下面的下载中：
> 
> [http://www.sqlite.org/sqlitedll-3_7_3.zip](http://www.sqlite.org/sqlitedll-3_7_3.zip)
> 
> 您可以将这个包中可用的 sqlite3.dll 放在 y 目录下，例如 C:\Ruby\bin
> 
> ==================================================== ==========
> 成功安装 sqlite3-1.3.3-x86-mingw32
> 1 个 gem 安装sqlite3-1.3.3-x86-mingw32
> 的 ri 文档...
> 安装 sqlite3-1.3.3- 的 RDoc 文档x86-mingw32。
> 错误：执行 gem ... (Gem::FilePermissionError)
> 您没有对 js 目录的写入权限。

感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T05:40:02.717

Heroku 使用 PostgreSQL 数据库而不是 SQLite。所以你必须在你的 Gemfile 中做这样的事情：

```
group :development do
  gem 'sqlite3'
end

group :production do
  gem 'pg'
end 
```

这样您就可以在开发中使用 SQLite，在生产中使用 PostgreSQL（在 Heroku 上）。使用这些设置 Heroku 不会尝试安装导致错误的 SQLite gem。

# objective-c - xcode：如何在 xcode 中调试？

> ID：11516140
> 
> 赞同：0
> 
> 时间：2012-07-17T04:47:17.983
> 
> 标签：objective-c, xcode, cocoa

我有一个只有一个属性的 Person 类：名称。我想在调试时列出属性值，但是xcode只显示“isa”，我该如何像在eclipse中那样做呢？

代码： ![](../Images/fda443daeaad12d678a514d6e915e7a3.png)

蚀：

![在此处输入图像描述](../Images/18869d6423a20a78f50624390a15b1e9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T04:55:11.173

在幕后，使用方法访问属性。`name`可以使用该方法读取一个名为的属性`name`，并且可以使用该`setName:`方法对其进行设置。您可以使用调试器的`po`命令来打印对象的描述。尝试在调试器控制台输入：

```
po [p name] 
```

该`po`命令通过将`debugDescription`消息发送到您正在打印的对象来工作，默认情况下`debugDescription`只发送`description`消息。因此，您可以将此方法添加到您的`Person`类中：

```
- (NSString *)description {
    return [NSString stringWithFormat:@"<%@: %p name=%@>", self.class, self, self.name];
} 
```

然后您可以使用如下调试器命令：

```
po p 
```

并得到这样的输出：

```
<Person: 0x10013fd60 name=Jack> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:03:37.657

如果 rob 的帖子不起作用，那么我会尝试在控制台中输入 bt（用于回溯）

# android - Android语音识别一直听

> ID：11516141
> 
> 赞同：0
> 
> 时间：2012-07-17T04:47:21.547
> 
> 标签：android, speech-recognition

我一直在尝试修改我的语音识别器应用程序，以便在启动后继续收听。它会听一段静音部分，然后在翻译完成后立即返回在线。

所以我想知道如何在不必编写完整的 API 的情况下实现这一点。

我浏览过google和stackoverflow，有一个类似的问题，但没有给出直接答案。

如果有人知道这样做，我将非常感激！

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:44:12.870

[此示例应用程序/教程](http://androiddev101.com/episode-8-speech-recognition-say-what/)会侦听计算结果，然后再次开始侦听。可能是您正在寻找的。

[http://androiddev101.com/episode-8-speech-recognition-say-what/](http://androiddev101.com/episode-8-speech-recognition-say-what/)

# php - 比较日期以仅显示未来事件：PHP

> ID：11516145
> 
> 赞同：0
> 
> 时间：2012-07-17T04:47:42.460
> 
> 标签：php

我的日期是这种格式：

```
June 22, 2012 
```

使用 PHP 的日期函数我得到这样的日期：

```
date("F j, Y") 
```

使用 if 语句，我比较了两者，希望消除所有已经过去的日期：

```
if(date("F j, Y") > $date) 
```

但是，它有效，但只留下一个日期：

```
February 14, 2012 
```

有人可以解释原因或告诉我更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T04:51:59.117

date() 返回一个字符串，因此在您的情况下，它仅返回大于文字字符串“2012 年 6 月 22 日”的字符串。尝试在您的 date() 调用中使用[strtotime() ，例如](http://php.net/strtotime "strtotime()")

```
$today = strtotime($todays_date); 
```

这将获取 date() 返回的时间字符串并将其转换为 unix 时间戳，您可以使用它来比较日期。

# wordpress - WAMP - 多个 WordPress/Joomla！项目

> ID：11516146
> 
> 赞同：0
> 
> 时间：2012-07-17T04:47:46.647
> 
> 标签：wordpress, joomla, wampserver

这个问题可能是多余的，但我无法从我所读的内容中得到任何工作。

我在位于 c:/ 文件夹中的 Windows 64 位机器上全新安装了最新的 WAMP 服务器。

我已经成功下载并安装了 WordPress 和 Joomla!，但是引入现有项目似乎失败了。

我的任务是在现有的 Wordpress 和 Joomla 上工作！地点。我在 c:/wamp/www 中为它们创建了文件夹，就像其他两个默认值一样。我还在 phpMyAdmin 中创建了正确的数据库，但是当我直接导航到是通过浏览器时是问题所在。

## 默认的 Wordpress 网址

"http://localhost/wordpress/" [工作得很好]

## 下载的 Wordpress 网址

“http://localhost/bridges/”将我重新定位到“http://localhost:8010/bridges/”并抛出“糟糕！Google Chrome 无法连接到 localhost:8010”

任何关于为什么会发生这种情况的想法将不胜感激。如果需要，我会提供更多信息。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T00:09:08.453

答案很荒谬。设置被设置为 localhost:8010 所以我必须通过 phpMyAdmin 修改它们，或者如果你可以访问 wp-admin 然后在那里修改它们。

# javascript - 动态加载用户控件和javascript

> ID：11516148
> 
> 赞同：1
> 
> 时间：2012-07-17T04:47:50.840
> 
> 标签：javascript, asp.net, dynamic, user-controls

我需要在我的页面中动态加载用户控件。我在用户控件中有一个带有复选框的gridview。

![在此处输入图像描述](../Images/b0292a4269118c9db535bbe74d2f0bb4.png)

用户控件将根据单击的选项卡动态加载。

当用户单击最顶部的复选框时，允许用户选择所有复选框。

我正在使用 javascript 来执行此功能。

javascript 仅在我单击联系人时有效，但当我单击其他选项卡时。javascript 不起作用。

我打开查看源代码进行检查。联系人只有JavaScript。

我看不到任何用于销售订单和交货单的 javascript。

另外，我在每个不同的用户控件中嵌入了 javascript 这是我的 javascript

```
 <script type="text/javascript">
    function SelectAllCheckboxes1(chk) {
        $('#<%=gvSaleOrder.ClientID%>').find("input:checkbox").each(function () {
            if (this != chk) {
                this.checked = chk.checked;
            }
        });
    }    
    </script>

<asp:GridView ID="gvSaleOrder" runat="server" AllowPaging="True" AutoGenerateColumns="False"
                                CellPadding="4" CssClass="rightColumnModule2Table" DataKeyNames="SALES_ID,SALES_ORDER_CODE,STATUS"
                                ForeColor="#333333" GridLines="None" OnRowCommand="gvSaleOrder_RowCommand"
                                OnRowDataBound="gvSaleOrder_RowDataBound">
                                <AlternatingRowStyle CssClass="gvRowAlternative" />
                                <Columns>
                                <asp:TemplateField>
                                        <HeaderTemplate>
                                            <asp:CheckBox ID="chkSelectAll" runat="server" onclick="javascript:SelectAllCheckboxes1(this);"/>
                                        </HeaderTemplate>
                                        <ItemTemplate>
                                            <asp:CheckBox ID="chkSelect" runat="server" />
                                        </ItemTemplate>
                                        <ItemStyle CssClass="gvRow1C" />
                                    </asp:TemplateField>

                                  <asp:TemplateField HeaderText="Sales Order Number">
                                        <ItemTemplate>
                                            <asp:LinkButton ID="lnkOrderNumber" runat="server" CommandArgument='<%#Eval("SALES_ORDER_CODE") %>'
                                                CommandName="View" Text='<%#Eval("SALES_ORDER_CODE") %>' ></asp:LinkButton>
                                        </ItemTemplate>
                                        <ItemStyle CssClass="gvRow1C" />
                                    </asp:TemplateField>

                                     <asp:TemplateField HeaderText="Date">
                                        <ItemTemplate>
                                            <asp:Label ID="lblSalesOrderDate" runat="server" Text='<%#Eval("SALES_ORDER_DATE") %>'></asp:Label>

                                        </ItemTemplate>
                                        <ItemStyle CssClass="gvRow1C" />
                                    </asp:TemplateField>

                                    <asp:BoundField DataField="ACCOUNT_OWNER" HeaderText="Customer Name" ReadOnly="True"
                                        SortExpression="ACCOUNT_OWNER">
                                        <ItemStyle CssClass="gvRow1C" ForeColor="Black" />
                                    </asp:BoundField>

                                         <asp:TemplateField HeaderText="Total Amount">
                                        <ItemTemplate>
                                          <asp:Label ID="lblCurrency" runat="server" Text='<%#Eval("CURRENCY_NAME") %>'></asp:Label>
                                            <asp:Label ID="lblTotalAmount" runat="server" Text='<%#Eval("TOTAL_AMOUNT") %>'></asp:Label>
                                        </ItemTemplate>
                                        <ItemStyle CssClass="gvRow1C" />
                                    </asp:TemplateField>

                                    <asp:TemplateField HeaderText="Status">
                                        <ItemTemplate>
                                            <asp:Label ID="lblStatus" runat="server" Text='<%#Eval("STATUS") %>'></asp:Label>

                                        </ItemTemplate>
                                        <ItemStyle CssClass="gvRow1C" />
                                    </asp:TemplateField>

                                  <asp:TemplateField HeaderText="Action">
                                        <ItemTemplate>
                                            <table width="100%">
                                                <tr>
                                                    <td >
                                                        <asp:LinkButton ID="linkEdit" runat="server"  CommandArgument='<%#Eval("SALES_ORDER_CODE") %>'
                                                            CommandName="Edits">Edit</asp:LinkButton>
                                                                &nbsp;
                                                              <asp:LinkButton ID="linkDelete" runat="server" CommandArgument='<%#Eval("SALES_ORDER_CODE") %>'
                                                            CommandName="Deletes" OnClientClick="javascript:return confirm('Confirm Delete?');">Delete</asp:LinkButton>
                                                    </td>

                                                </tr>
                                            </table>
                                        </ItemTemplate>
                                        <ItemStyle CssClass="gvRow1C" />
                                    </asp:TemplateField> 
```

我的后端

```
 private void loadControl()
 {

     if(  (string)Session[subTaskURL] != "")
     {
         Control control = this.LoadControl(Session[subTaskURL].ToString());
         if (control != null)
         {
             // Gives the control a unique ID. It is important to ensure
             // the page working properly. So use control.GetType().Name
             // as the ID.
             control.ID = control.GetType().Name;
             phSubContent.Controls.Add(control);
         }
     }
 }

//--Ensure all control will be dispose--
 public override void Dispose()
 {

     for (int i = 0; i < phSubContent.Controls.Count; i++)
     {
         Control ctrl = phSubContent.Controls[i];
         if (ctrl != null)
             ctrl.Dispose();
     }
     base.Dispose();
 }
 //**Ensure all control will be dispose**

protected override void OnInit(EventArgs e)
{
    base.OnInit(e);
    //--Run on first time .Get default menu for the item--
    if (Session["subTaskID"] == null)
    {
        selectTopSubMenu();

    }
    adjustAccessLevelDB();
    loadControl();

} 
```

[这](http://www.codeproject.com/Articles/59781/Dynamic-Loading-of-ASP-NET-User-Controls)是我遵循的参考。

# jquery - jQuery初始化可拖动的php通过循环生成的li不起作用

> ID：11516149
> 
> 赞同：0
> 
> 时间：2012-07-17T04:48:02.743
> 
> 标签：jquery, loops, draggable

我使用 jQuery UI 的可拖动（http://jqueryui.com/demos/draggable/）和可排序（http://jqueryui.com/demos/sortable/）来创建拖放排序页面。

我使用 php 访问存储在数据库中的数据并将其作为 ul 打印出来，给每个 li 一个 id（id 从 #draggable1 开始并通过（#draggable2、#draggable3 等）进行，因此每个 li 都有一个唯一的 id。

```
echo("<li id='draggable$count' class='ui-state-default'>"); 
```

我无法将这些 li 变成可拖动的对象，下面是我的 jquery 代码

```
$(function() {
    $( "#sortable" ).sortable({
        revert: true
    });
    var count = document.getElementById(‘count’).value;
    for(var i = 1; i <= count; i++){
        $("#draggable"+i).draggable({
            connectToSortable: "#sortable",
            helper: "clone",
            revert: "invalid"
        });
    }
    $( "ul, li" ).disableSelection();
}); 
```

我有一个隐藏字段，其中包含显示的 li 总数（当前为 11），其中 var count 可以在它下面的循环中使用……但是循环似乎没有运行，有什么想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T04:54:35.553

指定 li 的位置并检查它。

# android - 在真实设备上调试 android 应用程序的问题

> ID：11516158
> 
> 赞同：0
> 
> 时间：2012-07-17T04:49:40.507
> 
> 标签：android, eclipse

我是android开发的新手。我需要在真机上调试我的应用程序。我已经有**三星 Galaxy y pro duos (GT-B5512)**。但是，即使我在手机中启用了“ **USB 调试”选项，当它通过 USB 连接时，AVD Manager 也****不会检测到它。**

 **我试图为我的设备查找 USB 驱动程序，但找不到。

我在 Windows 7 64 位操作系统上使用 Eclipse IDE。

有人可以在这方面帮助我吗...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T14:58:19.837

三星 Galaxy Y Duos GT S-6102 USB 连接仅适用于 USB 2.0。它不适用于 USB 3.0。因此，在您的系统上安装 Samsung Kies 并确保 USB 端口是 USB 2.0 而不是 USB 3.0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T04:57:49.810

您可能需要为三星手机下载三星凯斯。[http://www.samsung.com/in/support/usefulsoftware/KIES/JSP](http://www.samsung.com/in/support/usefulsoftware/KIES/JSP)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T04:52:45.910

您需要阅读 android SDK 中的使用硬件设备部分

[http://developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)

它告诉您通过 USB 端口将设备连接到 PC 的步骤**

# android - html5 或 xml 我应该采用哪种 UI 模式来构建我的 android 应用程序？

> ID：11516159
> 
> 赞同：0
> 
> 时间：2012-07-17T04:49:43.213
> 
> 标签：android, android-layout

我正在设计一个 android 应用程序，我想为整个 UI 部分使用 web 视图（html），尽管它并不完全依赖于 web。如果我不使用 xml 按钮、文本视图等，会有什么危害吗？

由于我对 html5 更熟悉，所以我需要学习 android 的 xml UI 或使用 html5 方法继续前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:56:43.060

如果您只是在 WebView 中加载 HTML 或网站（通过完整的应用程序），我确信没有任何危害。

> Android 一直致力于连接并提供出色的 Web 浏览体验，因此使用 Web 技术构建您的应用程序可能是一个很好的机会。您不仅可以在 Web 上构建应用程序并针对 Android 的各种屏幕尺寸和密度优化您的设计，还可以使用 WebView 将基于 Web 的内容嵌入到您的 Android 应用程序中。

阅读更多[**网络应用程序**](http://developer.android.com/guide/webapps/index.html)。

> 如果您想交付一个 Web 应用程序（或只是一个网页）作为客户端应用程序的一部分，您可以使用 WebView 来完成。

阅读更多[**在 WebView 中构建 Web 应用程序**](http://developer.android.com/guide/webapps/webview.html)

我建议您查看此文档：[**Web 应用程序的最佳实践**](http://developer.android.com/guide/webapps/best-practices.html)

# php - 你如何使用 $_POST 值来创建关联数组

> ID：11516161
> 
> 赞同：0
> 
> 时间：2012-07-17T04:50:23.510
> 
> 标签：php, arrays, forms, array-merge, array-push

我正在尝试将 $_POST 值划分为不同的数组以检查其值。我试图将 $key 和 $values 都保留为关联数组。目前，仅`array_push`有效，但无效`array_merge`。Array_merge 为我返回一个空数组。有人可以帮忙吗？

```
$reg_word = $reg_alpha = $reg_paragraph = array();

foreach ($_POST as $key=>$value){
        if (in_array($key, $alpha_numbers)){    
            array_push($reg_word, $value);
        } else

        if (in_array($key, $alpha)){
            array_push($reg_alpha, $value);
        } else

        if (in_array($key, $paragraph)){
            array_push($reg_paragraph, $value);
        }
    } 
```

显示器

```
Array ( [0] => St. John [1] => M [2] => kjkjk ) 
Array ( [0] => HKG ) 
Array ( [0] => kjkj ) 
```

我希望它显示`Array( Location => St. John)`等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T04:51:48.377

然后停止使用`array_push()`；只是分配。

```
$arr[$key] = $val; 
```

# iphone - iOS：如何链接正在开发的 App Store 链接

> ID：11516163
> 
> 赞同：5
> 
> 时间：2012-07-17T04:50:55.927
> 
> 标签：iphone, ios

我想知道如何在当前正在开发的应用程序中链接 Apple App Store 链接。

例如...

我正在开发一款尚未获得 Apple 批准的 iPhone 游戏（因此显然没有任何 App Store 链接）。但在我的一种方法中，我需要使用我的 iTunes 应用程序链接（对我的应用程序进行评分）。

其他人如何设法将他们的应用链接放在他们的游戏中？他们会在 Apple 批准后立即更新他们的游戏吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T04:55:30.060

您不必拥有经过批准的应用程序来执行此操作，但是您必须已经在 iTunes Connect 中创建了该应用程序。完成此操作后，Apple 会在应用程序页面上为您提供“在 App Store 中查看”链接。

![在此处输入图像描述](../Images/b4dfed06bf1692816483b1192f3dbe23.png)

除此之外，您可以使用以下链接将用户直接发送到 App Store 中您应用的评分和评论页面。

> itms-apps://ax.itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&id=APPLE_ID

在上面的链接中，将“APPLE_ID”替换为您应用的 Apple ID。（见下面的截图）

![在此处输入图像描述](../Images/4e5dc2d94243299cd42b7430d5ab5f07.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T05:03:42.083

当您为您的应用程序创建一个位置并填写有关您的应用程序的信息时，它会为您提供一个链接。该链接是您可以在应用程序中使用的内容，然后再使其生效。

# android - 如何在 Android 中更改第一个显示表单

> ID：11516164
> 
> 赞同：-4
> 
> 时间：2012-07-17T04:50:59.333
> 
> 标签：android, android-layout, android-intent

我是android开发的新手。在我的项目中，有时我必须根据条件动态更改第一个显示形式。根据我想更改第一个显示表单的数据库条目。如果用户有效，那么我想显示主屏幕，否则应显示登录表单。身份验证基于本地应用程序数据库条目。我如何实现这一点？我在哪里必须设置此条件并导航到另一个表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T04:55:03.507

我建议您将启动画面活动与进度条一起放置。

在后台，您可以检查用户是否有效。

如果用户有效，则启动主屏幕。否则启动登录屏幕。

例如：

```
if(validUser) {
startActivity(new Intent(this, HomeActivity.class);
} else {
startActivity(new Intent(this, LoginActivity.class);
} 
```

在此示例中，HomeActivity 和 LoginActivity 是活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:00:55.740

在 Android 中，您无法更改应用程序的第一个屏幕或主屏幕，但您可以采用以下策略，在 HomeScreen 活动、类中，在 onCreate 中检查数据库中的用户数据，如果存在，则什么也不做，只需将用户数据加载到屏幕，在不可用的情况下 startActivty LoginScreen 并完成当前活动，因为此过程将在 onCreate 方法和事件线程中，HomeScreen 不会出现给用户。

# c# - 无法识别的转义序列错误

> ID：11516168
> 
> 赞同：0
> 
> 时间：2012-07-17T04:51:40.403
> 
> 标签：c#

我刚刚将我的数据库从其他计算机连接到我的计算机。除此数据源外，一切正常。它给出了错误“无法识别的转义序列”。

我认为错误是因为反斜杠，但我不知道如何解决它，因为我的计算机的服务器名称只有这个。请帮助。

```
SqlConnection con = new SqlConnection("data source=APOORVA\SQLEXPRESS;initial catalog=mall inventory;integrated security=true"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T04:53:53.943

尝试这个。

```
SqlConnection con = new SqlConnection(@"data source=APOORVA\SQLEXPRESS;initial catalog=mallinventory;integrated security=true"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T04:58:03.167

编译器看到`\S`，并试图将其解释为转义序列（因为它以 a 开头`\`）。

要么通过加倍来逃避反斜杠：

```
SqlConnection con = new SqlConnection("data source=APOORVA\\SQLEXPRESS;initial catalog=mallinventory;integrated security=true"); 
```

或使用逐字字符串：

```
SqlConnection con = new SqlConnection(@"data source=APOORVA\SQLEXPRESS;initial catalog=mallinventory;integrated security=true"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T04:59:35.567

在无法识别的转义序列的情况下，您需要这样做：
"...\\SQLEXPRESS;..."
或如 Harvey 提到的：
@"...\SQLEXPRESS;..."
它们都是相同的。

# erlang - mysql查询回滚在erlang中的查询执行错误

> ID：11516169
> 
> 赞同：0
> 
> 时间：2012-07-17T04:51:45.537
> 
> 标签：erlang

我正在使用 odbc 模块执行一组 mysql 查询。我需要处理回滚和提交。所以在连接时我设置了 {auto_commit, off}。对于成功的查询执行，它工作正常。但是在任何查询出错时，我都无法回滚或重复该操作。

当查询执行出错时，连接关闭。有了这种死联系，我什么也做不了。并且 odbc:commit() 在同一连接上工作。

我无法使用新连接重复相同的查询，因为 mysql 锁定了这些记录。

我该如何回滚并处理这种情况？

# java - 如何为 Spring 和 Hibernate 开发设置 Sublime Text 2

> ID：11516175
> 
> 赞同：4
> 
> 时间：2012-07-17T04:52:23.633
> 
> 标签：java, html, spring, hibernate, sublimetext2

我目前正在使用 Sublime Text 2，并且正在使用该平台使用 HTML、CSS、JS、JQuery 和 Java。但现在我想使用 Sublime Text 2 设置 JSF、Spring 和 Hibernate。我查看了文档，但没有什么对我有用。

首先，我将**Package control**安装到 ST2 中，然后安装 Java。任何人都有配置 JSF、Spring 和 Hibernate 的想法。

谢谢。

# jquery - jQuery。复选框检查操作的问题

> ID：11516177
> 
> 赞同：0
> 
> 时间：2012-07-17T04:52:26.813
> 
> 标签：jquery

为什么这个脚本：

```
if ($('.applyrulles').is(':checked')) {                     
    $('.button').show(700);
} else {
    $('.button').hide();
} 
```

不工作`.button`？

```
<div>
    <input name="applyrulles" type="checkbox" class="applyrulles"/>
</div>  

<input type="submit" class="button" value="send"/> 
```

Sript 隐藏，但在选中`.button`时不显示。`.applyrulles`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T04:56:32.030

**工作演示** [http://jsfiddle.net/mdFSb/](http://jsfiddle.net/mdFSb/) **或** [http://jsfiddle.net/mdFSb/1/](http://jsfiddle.net/mdFSb/1/)

您需要捕获类似`click`or的事件`change`，而`$(this)`其他用户可以随意使用代码。

希望这有助于事业`:)`

**代码**

```
$('.applyrulles').on('change', function() {

    if ($(this).is(':checked')) {

        $('.button').show();

    } else {
        $('.button').hide();
    }

}); 
```

# java - 按位和 0x3FF 有什么作用？

> ID：11516181
> 
> 赞同：4
> 
> 时间：2012-07-17T04:52:46.103
> 
> 标签：java, primitive-types

有人可以解释以下代码行吗？特别是，我不明白是什么`(short) x & 0x3FF`？

```
int num = ... //some number.
return (short) num & 0x3FF; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T04:55:24.903

它将数字的最高位清零，因此结果始终介于 0 和 1023 之间。它与 modulo(num, 1024) 基本相同（对于 num 的正值）。

如果没有看到更广泛的背景，就不可能知道*为什么*会在这里，但这就是它的作用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-17T04:56:09.903

`0x3FF`是`1111111111`二进制数，这意味着它的按位与运算将为您提供 . 的最后 10 位`num`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T04:57:17.293

将十六进制转换为二进制，`0x3FF == 0b1111111111`.

执行按位与，因此如果将它们设置为打开，`&`它只会保留低位。
这保证了答案不大于 0x3FF == 1023，因此答案被保存到 a`short`中，因为我们知道它适合一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T04:57:55.057

它只保留最右边的 10 位。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T04:58:09.683

java 运算符`&`是“按位与”，这意味着两个操作数的每一位都被与在一起，`1`如果*两个*对应的位都是，则留下 a `1`。

`0x3ff`是 binary `1111111111`，因此与它进行与运算将屏蔽除最低十位之外的所有位。

强制转换为`short`（16 位数字格式）无效。

# php - Codeigniter：当用户在注销后单击后退按钮时，如何重定向到主页？

> ID：11516184
> 
> 赞同：0
> 
> 时间：2012-07-17T04:52:50.660
> 
> 标签：php, codeigniter

我正在使用 Codeigniter 并且我的问题是相同[的 当用户在注销后单击后退按钮时如何重定向到主页？](https://stackoverflow.com/questions/5194566/how-can-i-redirect-to-home-when-user-click-on-back-button-after-logout)

`views/header.php`我在**控制器顶部**尝试了下面的代码，但没有任何进展..！

```
header("Cache-Control: no-cache, must-revalidate");
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT"); 
```

我也试过

```
 /* @author: Muhammad Sajid
   * @name: do_logout
   */
    public function do_logout()
    {
        $this->session->sess_destroy();
        $this->clearCache();
        redirect("login/index/0");
    }

    //+ Jonas Raoni Soares Silva
    //@ http://jsfromhell.com
    public function clearCache(){
        header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
        header('Last-Modified: ' . gmdate('D, d M Y H:i:s') . ' GMT');
        header('Cache-Control: no-store, no-cache, must-revalidate');
        header('Cache-Control: post-check=0, pre-check=0', false);
        header('Pragma: no-cache');
    } 
```

但没有找到解决方案....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:14:39.003

你能指定...更多因为后退按钮只会带你到可能是也可能不是主页的上一页...重定向用户的简单方法可以是

> 重定向（http://localhost/.....所需的网址）；

我曾经遇到一个问题，我想在用户登录后将用户重定向到上一页，但是问题是上一页是登录表单，而不是用户用于登录表单的页面

解决方案我将所需的页面地址添加到会话中

> $this->session->set_userdata('redirect', current_url());

然后登录后重定向用户

> $redirect = $this->session->userdata('redirect');
> 重定向（$重定向）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T07:28:33.167

这个问题很可能会用 javascript 解决，因为使用后退按钮时不会执行 php。

在每个页面加载时运行一个 ajax 来简单地检查您是否已登录，如果没有则相应地重定向。

或者您可以在单击注销按钮时这样做。

```
<script type="text/javascript">
    window.open('http://example.com/do_logout');
    self.close();
</script> 
```

我不完全确定是否所有浏览器都支持它，但理论上这会打开一个新选项卡，关闭当前选项卡，从而消除“返回”的可能性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T08:08:06.287

您可以使用以下元标记控制缓存：

```
<META HTTP-EQUIV="EXPIRES" CONTENT="Mon, 22 Jul 2002 11:12:01 GMT">
<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE"> 
```

有关详细信息，请访问此链接： [http ://www.i18nguy.com/markup/metatags.html](http://www.i18nguy.com/markup/metatags.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-31T10:53:29.387

这对我很有用！！！

```
<?php
   if ( ! defined('BASEPATH')) exit('No direct script access allowed');

   class admin extends CI_Controller
   {
      public function __construct()
      {
          parent::__construct();
          $this->no_cache();
      }

      protected function no_cache()
      {
          header('Cache-Control: no-store, no-cache, must-revalidate');
          header('Cache-Control: post-check=0, pre-check=0',false);
          header('Pragma: no-cache'); 
      }
   } 
```

# php - 如何自定义php内置web服务器

> ID：11516188
> 
> 赞同：0
> 
> 时间：2012-07-17T04:53:01.140
> 
> 标签：php

如何自定义 PHP 的内置网络服务器，以便它在重定向的目录中自动呈现 index.php 或 index.html 文件。在 Apache 中等效的是目录索引：

```
<IfModule dir_module>
    DirectoryIndex index.html index.php
</IfModule> 
```

我已经在 php.ini 上对“目录”一词进行了眼球搜索和 ctrl+f，但没有运气。当我使用 PHP 的内置网络服务器时，我必须编辑什么文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:44:50.930

新的内置服务器非常简单，因此缺少 Apache 的许多功能。默认情况下，它应该自动呈现来自 doco 的 index.php 或 index.html：

> 如果 URI 请求未指定文件，则返回给定目录中的 index.php 或 index.html。

我发现您可以更改使用哪个页面（即模拟更改 DirectoyIndex 指令）的唯一方法是使用路由器脚本：

> 如果在启动 Web 服务器时在命令行上给出了 PHP 文件，则将其视为“路由器”脚本。该脚本在每个 HTTP 请求开始时运行。如果此脚本返回 FALSE，则按原样返回请求的资源。否则脚本的输出将返回给浏览器。

如果您需要处理目录索引，也许是时候使用合适的 Web 服务器了？

# php - 检查浏览器 IE8 或更低版本是否使用 PHP

> ID：11516189
> 
> 赞同：4
> 
> 时间：2012-07-17T04:53:05.070
> 
> 标签：php

如何使用php检查浏览器是否为IE8或更低？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-31T15:52:58.433

```
if(preg_match('/(?i)msie [2-8]/',$_SERVER['HTTP_USER_AGENT'])) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T04:56:44.600

**编辑**

```
<?php
//echo $_SERVER['HTTP_USER_AGENT'] . "\n\n";

$browser = get_browser(null, true);
echo "<pre>";
print_r($browser['version']);
?> 
```

![检查屏幕截图](../Images/635d43106b7b7c3d8ccacc7127d432cc.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T04:59:05.993

试试这个[链接](http://chrisschuld.com/projects/browser-php-detecting-a-users-browser-from-php/)。

典型用法。

```
$browser = new Browser();
if( $browser->getBrowser() == Browser::BROWSER_FIREFOX && $browser->getVersion() >= 2 ) {
    echo 'You have FireFox version 2 or greater';
} 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-07-17T06:06:07.287

```
 $(document).ready(function(){ 
    var bro=$.browser; 
    var binfo=""; 
    if(bro.msie) {binfo="Microsoft Internet Explorer "+bro.version;} 
    if(bro.mozilla) {binfo="Mozilla Firefox "+bro.version;} 
    if(bro.safari) {binfo="Apple Safari "+bro.version;} 
    if(bro.opera) {binfo="Opera "+bro.version;} 
    alert(binfo); 
    $("#browser").html(binfo); 
}) 
```

# authentication - PHP / MYSQL 身份验证登录/注销时间的总和

> ID：11516190
> 
> 赞同：0
> 
> 时间：2012-07-17T04:53:09.217
> 
> 标签：authentication, logging, login, logout

我有一个在 mysql 中格式化的简单身份验证日志，如下所示：

* * *

用户名 | 登录时间 | 最后登录

鲍勃 | 2012-01-01 22:00:00 | 2012-01-02 06:00:00

鲍勃 | 2012-01-02 08:00:00 | 2012-01-02 09:00:00

鲍勃 | 2012-01-02 23:00:00 | 2012-01-03 10:00:00

* * *

现在，我正在尝试显示用户在这些时间范围内工作的总小时数：

0-24小时前

24-48 小时前

48-72 小时前

* * *

对于 24-48 示例，我最初编码：

```
$start_time = date("Y-m-d H:i:s", strtotime("-2 days"));
$end_time = date("Y-m-d H:i:s", strtotime("-1 days"));
$result_time = mysql_query("SELECT login_time,last_active FROM `auth_log` WHERE username = '".$row['username']."' AND login_time > '$start_time' AND login_time <= '$end_time' AND authenticated = 'yes'");
    while($row_time = mysql_fetch_array( $result_time )) {
        $time = strtotime($row_time['last_active']) - strtotime($row_time['login_time']);
        $tot_time = $tot_time + $time;
    }
$total_time = gmdate('H:i',$tot_time); 
```

如果我们的 24-48 小时时间截止时间是：2012-01-02 00:00:00 和 2012-01-03 00:00:00，那么如上面的数据库表所示，第 1 行和第 3 行将不包含在查询。只有在截止时间内的记录才会显示（第 2 行）。因此，这将表明 Bob 工作了 1 小时，而实际上 Bob 在 24-48 小时的时间范围内总共工作了 8 小时。（从第 1 行开始 6 小时 + 1 小时第 2 行 + 1 小时第 3 行）

所以现在我有点卡住了。

我认为必须有一种更简单的方法来做到这一点。要么我的身份验证数据库设计很糟糕，要么有一种更简单的方法可以使用 mysql 时间/日期查询来获取此信息，否则我将不得不进行非常复杂的查找，例如：

```
$start_time = date("Y-m-d H:i:s", strtotime("-2 days"));
$end_time = date("Y-m-d H:i:s", strtotime("-1 days"));
$result_time = mysql_query("
SELECT login_time,last_active FROM auth_log 
WHERE username = '$username' 
AND authenticated = 'yes'
AND (login_time >= '$start' AND last_active <= '$end') 
OR (login_time >= '$start' AND login_time <= '$end' AND last_active > '$end') 
OR (last_active >= '$start' AND last_active <= '$end' AND login_time < '$start') 
"); 
```

任何帮助肯定会不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:45:19.577

```
$day_index = SELECT WEEKDAY(\''.$date.'\') AS day_index;

SELECT SEC_TO_TIME( SUM( t.diff ) ) AS suma
FROM (
    SELECT login_time, TIME_TO_SEC( TIMEDIFF( logout_time, login_time ) ) AS diff
    FROM login_times
    WHERE user_id = '.$id.'
    AND DATE( login_time ) = SUBDATE(\''.$date.'\', '.$day_index.' )
) AS t
GROUP BY DATE( t.login_time )' 
```

我有像你一样的表，这个查询正确地处理了选择，只是代替了我的名字`user_id`

# android - Android 虚拟设备管理器 - “模拟网络摄像头的数量”？

> ID：11516191
> 
> 赞同：1
> 
> 时间：2012-07-17T04:53:32.517
> 
> 标签：android, android-emulator

在 Android Emulator 中，`Window->AVD Manager->Hardware`有一个选项`Number of emulated web cameras`.

1) 当 Android 模拟器文档在*模拟器限制*部分（截至 2012 年 7 月 12 日）明确声明*不支持 USB 连接*时，该选项究竟应该做什么。

 *2) 此限制是否适用于 JNI 程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:09:40.077

事实证明，*模拟网络摄像头*的数量是指手机前置摄像头的数量。*

# java - Java Socket 编程 VS openESB

> ID：11516194
> 
> 赞同：0
> 
> 时间：2012-07-17T04:54:03.273
> 
> 标签：java, open-esb

我有一个情况，多个客户端可以与多个服务器通信，并通过 TCP/IP 连接发送消息。客户端可以采用任何技术，并尝试通过仅传递运行服务器的主机名和端口来与服务器通信。很少有人建议使用 openESB。但是这里的问题我不确定它对我的需求有多可行。客户端程序可以采用任何技术。假设我正在使用 Java 套接字编程来创建客户端并与服务器通信。但是如果服务器是使用openESB创建的，是否可以仅使用服务器的IP和端口与服务器通信并向其发送请求？谁能告诉我 Socket Programming 和 openESB 的区别？我认为这两个与编程无关，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:51:48.440

简短的回答是这取决于您的需求。如果您的服务器将过于简单化，那么 OpenESB 可能会过大。如果您的服务器要集成到许多其他服务/软件中，那么 OpenESB 可能就是问题所在。

大多数（如果不是全部）ESB 软件都允许您在 ESB 内托管服务器套接字。请记住，ESB 通常是一个需要安装和维护的大型软件。此外，OpenESB 基于 JBI 规范，如果您想真正使用 ESB 的全部功能，则需要熟悉该规范。要考虑的一件事是，ESB 本质上是一个主干软件，因此如果 ESB 只是要托管套接字，那将是一种浪费，因为您将无法正确使用 ESB。

因此，如果您要创建一个简单的 tcp/ip 服务器，请查看以下框架：Netty 框架或 Apace Mina。

完整 ESB 的替代方案是 apache camel。这可以被认为是一个轻量级的 ESB。

如果您决定选择 ESB 路线，则有 OpenESB、Apache ServiceMix 和 Mule。

如果使用得当，ESB 技术将非常强大。我建议您阅读 ESB 并查看它是否符合您的需求。

# git - 如何防止在 mac 上进行编辑导致整个文件显示为已删除和添加的行？

> ID：11516197
> 
> 赞同：3
> 
> 时间：2012-07-17T04:54:35.223
> 
> 标签：git

我最近开始在 Mac 上编码。我从 github 上的 repo 中检查了我的源代码，进行了更改并从 mac 推送，突然整个文件显示为已删除和添加的行。我怀疑这是因为换行符的不同。

我曾经在 ubuntu 上开发，在此之前在 Windows 上开发。

如何在未来的提交中避免这种情况，在提交之前是否需要对文件进行任何转换才能显示实际差异？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T04:59:03.587

现在您已经与您的存储库同步应该没问题。新文件将是正确的。如果你推拉，那么你应该在两边都有相同的代码。

PS好头像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T05:07:09.103

您可以查看您的编辑器是否可以选择保留文件的行尾。例如，Xcode 在其 Preferences > Text Editing > Editing 首选项中有“默认行尾”和“保存时转换现有文件”选项。

Git 有各种影响行尾的配置选项。Github 有一个关于这些选项的帮助页面：[https ://help.github.com/articles/dealing-with-line-endings](https://help.github.com/articles/dealing-with-line-endings)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T06:02:46.817

Git 提供了处理换行问题的选项。这是 Git Book（也称为 Pro Git）中关于配置的一章，顺便说一句，这是一个了不起的资源。我建议阅读全文。

[http://git-scm.com/book/en/Customizing-Git-Git-Configuration#Formatting-and-Whitespace](http://git-scm.com/book/en/Customizing-Git-Git-Configuration#Formatting-and-Whitespace)

# java - 来自三个一维数组的 Java 直方图

> ID：11516216
> 
> 赞同：0
> 
> 时间：2012-07-17T04:56:09.300
> 
> 标签：java, graph, plot, histogram

我有三个具有图像 RGB 值的一维数组。

```
 int[] rhistogram = new int[256];
    int[] ghistogram = new int[256];
    int[] bhistogram = new int[256]; 
```

我需要将它们绘制在直方图中。直方图可以绘制在摆动框架中，也可以仅在控制台中使用“*”符号绘制。我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:33:17.063

[JFreeChart 制作漂亮的摆动图](http://www.jfree.org/jfreechart/samples.html)。他们有一个网络启动演示，因此您可以看到他们制作的所有不同图表。但是，对于您想要做的事情来说，这可能有点矫枉过正。

将值写入 CSV 文件，然后将其导入电子表格并在那里绘制如何？

# java - 类和接口的初始化

> ID：11516219
> 
> 赞同：2
> 
> 时间：2012-07-17T04:56:20.777
> 
> 标签：java

在我阅读[JLS 第 12.4.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4)之后。

> 2.如果C的Class对象指示其他线程正在对C进行初始化，则释放LC并阻塞当前线程，直到通知正在进行的初始化已经完成，此时重复此步骤。

当前线程真的需要释放被其他线程获取的 LC 吗？这个动作安全吗？一个应用程序中会发生多少次类或接口的初始化？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T05:11:44.623

JVM 的约定是在允许任何应用程序线程使用该类*之前*，该类已完成加载。“加载完成”意味着所有的静态初始化器都已完成（即所有的静态块都已执行并且静态字段按照它们被编码的顺序被初始化）

类在第一次使用时被加载，因此（隐式）中发生的任何线程都会调用 ClassLoader 来加载类，并在 ClassLoader 完成加载类时阻塞（如上所述）。*在加载类时*碰巧使用该类的任何其他线程也将阻塞等待类完成加载。

每次 JVM 启动时都会加载一次类。

学徒注意：是的，可以使用 ClassLoader kung fu 重新加载一个类，但这种解释没有误导性。

# cassandra - 卡桑德拉的墓碑物理位置

> ID：11516234
> 
> 赞同：2
> 
> 时间：2012-07-17T04:57:59.387
> 
> 标签：cassandra, tombstone

据我所知，Cassandra 使用“墓碑”作为删除标记。因为 SSTable 是不可变的，所以它使用 tombstone 标记已删除的记录。那么，墓碑在 SSTable 文件中被标记在哪里呢？它是否在 SSTable 或其他地方的索引文件中标记？我想了解墓碑标记流的具体逻辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T08:28:45.283

Aaron Morton 的这篇[文章](http://thelastpickle.com/blog/2011/05/15/Deletes-and-Tombstones.html)应该对墓碑和删除的工作原理进行彻底的解释。信用应该真正归功于他。如果您想查看 tombstone 实现，请阅读[此](http://svn.apache.org/repos/asf/cassandra/trunk/src/java/org/apache/cassandra/db/RowMutation.java)内容以获取更多信息。以下是从网站中提取的一些要点来回答这个问题。

> 当一列被删除时，在 Cassandra 中会创建一个 DeletedColumn aka Tombstone。DeletedColumn 将具有：
> 
> name：删除列的名称
> 
> value：当前服务器时间，自 unix 纪元以来的秒数（整数）。这称为 localDeleteTime，在 (cassandra) GC 过程中使用。
> 
> 时间戳：由客户端提供
> 
> 然后以两种方式之一将突变应用于内存表。如果 memtable 不包含该行的命名列，则只需将其添加到 memtable 中。如果存在现有列，则它与已删除列 reconcile() 'd。如果新的 DeletedColumn 具有更高的（客户端提供的）时间戳，它将替换现有的列。localDeleteTime 不用于协调。此时，memtable 中的任何先前列值都将丢失，并且不会持久化到磁盘。
> 
> 我们现在有一块墓碑。如果没有其他突变，DeletedColumn 稍后将像任何其他列一样持久保存到 SSTable。

因此，具有墓碑标记的是memtable。解释继续；摘自该网站。

> 在本地读取行值期间，将运行在删除请求期间使用的相同协调过程。从磁盘上的当前 memtable、待刷新的 memtables 和 SSTables 中检索多个行片段。片段被减少并且具有相同名称的列被协调以达到当前值。
> 
> 例如，如果键“foo”的 SSTable 中有一个行片段表示列“bar”是“baz”，而另一个 SSTable 中的 DeletedColumn 具有更高的时间戳，则当它们被协调时，DeletedColumn 将“获胜”。该行的当前视图将是“bar”列被删除。

# ruby-on-rails - HTTParty 针对 Rails 的内容类型问题

> ID：11516241
> 
> 赞同：6
> 
> 时间：2012-07-17T04:58:43.090
> 
> 标签：ruby-on-rails, json, httparty

```
require 'HTTParty'
require 'json'

@payload ={
    "email" => "phil@gmail.com",
    "token" => "mytokenstuff",
    "content" => "here is some content",
    "notification_type" => "1",
    "name" => "here is a name",
    "auto_action" => "true"
 }

response = HTTParty.post('http://localhost:3000/api/create.json', :body =>JSON.dump(@payload), :headers => { 'Content-Type' => 'application/json' } ) 
```

在我的 rails 控制器中，标题来自 ContentType text/html。所以很明显我的标题参数不起作用....

想法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-17T05:01:07.007

试试这种方式：

```
HTTParty.post(
  'http://localhost:3000/api/create.json', 
  :body => JSON.dump(@payload), 
  :headers => {
    'Content-Type' => 'application/json', 
  }
) 
```

也尝试添加`Accept`：

```
:headers => {
  'Content-Type' => 'application/json', 
  'Accept' => 'application/json'
} 
```

另外，检查它是否没有从 cookie 中获取选项 - 清理 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T05:56:48.280

`HTTParty.post(<some link>, :body => "This is the body", :headers => {"Content-Type" => "text/html"})`

如同：

```
options = {:body => "Same body", :headers => {"Content-Type" => "text/html"}}`
HTTParty.post(<same link>, options)` 
```

# android - 仅针对我的应用程序限制广播接收器

> ID：11516242
> 
> 赞同：0
> 
> 时间：2012-07-17T04:58:44.353
> 
> 标签：android, broadcastreceiver

我已经为我的应用程序注册了一个广播接收器。现在我想将该接收器限制在我的应用程序中。我需要为此做些什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:00:29.403

您可以尝试`android:exported="false"`在清单文件中使用 : 作为广播接收器吗

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:00:59.063

`unregister`当您`BroadCastReciever`的家庭活动被破坏时，您可以。

# javascript - 确定两个没有 ID 的 HTML 元素是否不同

> ID：11516243
> 
> 赞同：3
> 
> 时间：2012-07-17T04:58:49.157
> 
> 标签：javascript, jquery, html

如果您删除任何给定 HTML 元素（或更具体地说是复选框）的 ID 属性（IE：假设它从未被设置），是否有办法确定我是否有两个对同一元素的引用？

基本上我试图让下面的代码工作，但不认为我可以在没有 id 属性集的情况下做到这一点。

复选框是这样声明的（所以我不能使用 id 属性）

```
<input type="checkbox" class="RowSelector" /> 
```

这是我正在尝试创建的方法

```
$(function () {
    $(".RowSelector").click(function (e) {
        var current = this;
        $(".RowSelector").each(function (index, value) {
            if (current != value) { //This doesnt work but is there a way I can make it?
                $(value).prop("checked", false);
            }
        });
    });
}); 
```

那么是否可以使用 JavaScript 来确定我是否有两个对同一个 HTML 元素的引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T05:07:24.633

您可以让 jQuery 用更少的代码为您完成工作：

```
$(function () {
    $(".RowSelector").click(function (e) {
        $(".RowSelector").not(this).prop("checked", false);
    });
}); 
```

或者更有效一点：

```
$(function () {
    var rows = $(".RowSelector").click(function (e) {
        rows.not(this).prop("checked", false);
    });
}); 
```

如果您对其他问题的答案感兴趣（现在在上面的代码中由 jQuery 为您处理），您可以直接比较两个 DOM 引用。`==`当且仅当它们引用同一个 DOM 节点时，它们才会是。

# scrapy - scrapy 框架：登录-抓取-导航

> ID：11516244
> 
> 赞同：-1
> 
> 时间：2012-07-17T04:58:50.360
> 
> 标签：scrapy

如何进行表单登录，然后使用scrapy处理该会话？

例如，考虑一个具有登录身份验证的网站，它具有与登录会话链接的三个不同页面。所以使用scrapy，首先登录，然后在主页上抓取一些，然后点击主页上可用的特定链接，点击链接并从该页面抓取。然后再次返回主页，点击另一个链接，依此类推。我有一个文件ccbank_spider.py，下面是内容

```
class LoginSpider(BaseSpider):

 #some code

 #for hitting and parsing of the Account URL
 for accountURL in (strip(s) for itemArr in items for s in itemArr['accountURL']):
    print accountURL
    yield request(accountURL, callback=self.account_transactions)

 def account_transactions(self, response):
  print 'print text'
  return None 
```

我收到以下错误

```
 File "D:\NextGen\workspace\tutorial\tutorial\spiders\ccbank_spider.py", line       45, in after_login
       yield request(accountURL, callback=self.account_transactions)
   exceptions.TypeError: 'module' object is not callable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:46:17.950

这是来自关于您的第一个问题（登录）的文档：

```
class LoginSpider(BaseSpider):
    name = 'example.com'
    start_urls = ['http://www.example.com/users/login.php']

    def parse(self, response):
        return [FormRequest.from_response(response,
                    formdata={'username': 'john', 'password': 'secret'},
                    callback=self.after_login)]

    def after_login(self, response):
        # check login succeed before going on
        if "authentication failed" in response.body:
            self.log("Login failed", level=log.ERROR)
            return

        # continue scraping with authenticated session... 
```

至于您问题的另一部分，您可以抓取所有您想要的链接，也可以抓取表单主页并为每个新请求执行：

```
request = Request(url_to_scrape, callback=self.parse_item)
    request.meta['language'] = "eng"
    yield request 
```

然后你在这个例子的 parse_item 中解析那个页面，你也可以向它发送元信息，如你所见。

# php - SocialEngine Zend 被查看 user_id

> ID：11516253
> 
> 赞同：2
> 
> 时间：2012-07-17T05:00:13.743
> 
> 标签：php, zend-framework, socialengine

我正在尝试获取我当前在社交引擎中查看的个人资料的 user_id。
这是当前登录的 user_id：

```
echo Engine_Api::_()->user()->getViewer()->getIdentity(); //currently logged in user_id 
```

获取我当前正在查看的配置文件的 id 的语法是什么？感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T10:15:10.950

为了获得'view-ee'（即主题），您可以使用以下内容；

最好先检查我们是否有一个主题，然后获取该用户的身份。

```
if(Engine_Api::_()->core()->hasSubject()){
    $user_id = Engine_Api::_()->core()->getSubject()->getIdentity());
} else {
    echo 'no subject on this page';
} 
```

我已经在我的博客上讨论了这个以及更多关于社交引擎的主题。见下文;

[http://garbtech.co.uk/socialengine-creating-widgets-for-user-profiles-getting-the-subject-rather-than-the-viewer-information/](http://garbtech.co.uk/socialengine-creating-widgets-for-user-profiles-getting-the-subject-rather-than-the-viewer-information/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T07:17:51.290

在社交引擎中，他们遵循这种情况......

> 查看者 - 查看者是指已登录的用户
> 
> 主题 - 查看者/公众查看某些内容（页面/个人资料/...）

**示例**::

我以 Viewer1 登录，查看 Viewer2 的相册

查看器 - 查看器 1

主题 - Viewer2 的相册（此处 Viewer2 是主题的所有者）

# objective-c - 在 ABPersonViewController 中编辑联系人时无法显示删除和取消按钮

> ID：11516256
> 
> 赞同：0
> 
> 时间：2012-07-17T05:00:41.640
> 
> 标签：objective-c, ios, ios5, ios4, ios-simulator

Hyiee 我是 Objective-C 的新手。我正在尝试编辑人员联系信息，但未显示包含删除和取消按钮的操作表。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:39:15.293

我认为您不能在 ABPersonViewController 的顶部显示任何内容，但是，请查看此处启用删除的 AB​​Delete 类别 - [https://github.com/shrtlist/ABDelete/](https://github.com/shrtlist/ABDelete/)

# linux - NetBeans/Maven/Ant 构建脚本错误 - 环境变量 (Linux)

> ID：11516257
> 
> 赞同：2
> 
> 时间：2012-07-17T05:00:42.897
> 
> 标签：linux, maven, netbeans, ant

我的任务是维护一个大型 Java/C++ 项目，使用 NetBeans (7.0.1) 和 Maven/Ant 进行构建，所有项目都在 CentOS 6 上运行。

我目前遇到构建脚本的问题。

该脚本是 Maven，但调用了一个 ant 任务：

```
<!-- create jar launch script -->
<echo file="${techsas.home}/run-exe-jar"
  message="#!/bin/bash${line.separator}java -jar -Dlog4j.configuration=file:///${TECHSAS_HOME}/log4j.xml bin/${project.artifactId}-${project.version}.jar" append="false">
</echo> 
```

问题出在第一行。运行脚本将导致此错误：

```
BUILD ERROR
--------------------------------------------------
An Ant BuildException has occured: java.io.FileNotFoundException: /home/techsas/NetbeansProjects/<snip>/${TECHSAS_HOME}/run-exe-jar (No such file or director) 
```

$TECHSAS_HOME 是一个有效的环境变量 - 正在运行

```
echo $TECHSAS_HOME 
```

在命令行将给出正确的值。

我是 NetBeans 和 Maven 的新手——我的在线研究没有找到任何解决方案。我想我可能在这里犯了一些基本错误。

NetBeans 似乎无法解析 ${TECHSAS_HOME} 变量 - 虽然我不知道为什么它首先将它附加到 ${techsas.home} 的末尾（有没有办法打印 ${techsas 的值.home} 来自 NetBeans？）

无论如何，非常感谢任何帮助 - 我现在有点迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:07:22.187

如果您使用的是 Gnome（例如在 Ubuntu 上），您需要设置环境变量以`~/.gnomerc`使它们对从桌面启动的应用程序可见。

请参阅：[如何在 Ubuntu 上将环境变量传递给 Netbeans Makefile？](https://stackoverflow.com/questions/2057605/how-do-i-pass-an-enviroment-variable-to-a-netbeans-makefile-on-ubuntu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:55:01.287

嗯，我解决了。有点儿。

在根 pom 中，项目的主目录定义如下：

```
<techsas.home>${TECHSAS_HOME}</techsas.home> 
```

即，将环境变量$TECHSAS_HOME 复制到Maven 变量techsas.home。

但是，由于某种原因， ${TECHSAS_HOME} 无法解析 - 即使变量设置正确（通过 .gnomerc 和 .bashrc - 感谢@therefromhere）。${env.TECHSAS_HOME} 也不起作用，据我所知这是正确的方法（例如[http://docs.codehaus.org/display/MAVENUSER/MavenPropertiesGuide](http://docs.codehaus.org/display/MAVENUSER/MavenPropertiesGuide)）

将其更改为实际路径 - 即

```
<techsas.home>/usr/local/techsas</techsas.home> 
```

使它工作正常。为什么它会这样（AFAIK 存储库中的构建脚本应该是正确的）对我来说仍然是一个谜——但至少我暂时有一个解决方法。

# windows - Windows 上的 unbuffer 程序相当于什么？

> ID：11516258
> 
> 赞同：11
> 
> 时间：2012-07-17T05:00:43.000
> 
> 标签：windows, expect, pty, unbuffered-output

嗨，根据[这篇文章](https://unix.stackexchange.com/a/25375)，`unbuffer`通过伪终端（pty）连接到命令，这使得系统将其视为交互式进程，因此不使用任何标准输出缓冲。

我想在 Windows 上使用这个功能。我可以知道什么是`unbuffer`Windows 上的程序等价物吗？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-06-13T21:27:06.520

我花了一些时间在这上面并成功了。我在研究期间发现了这个博客，并决定返回并提供我的解决方案以节省下一个人的时间。我作为客人回复了一封虚假的电子邮件，因此我不会进行互动，但不需要进一步的信息。

2012 年 7 月 18 日 19:41，Harry Johnston 写道：

“原则上，如果你知道需要多少数据，你可以使用控制台 API 函数创建一个控制台供应用程序写入，然后从控制台读取输出。但你不能从 Java 中做到这一点，你需要编写一个 C 应用程序来为你做这件事。”

事情是，已经有一个实用程序可以做到这一点。它是为稍微不同的用途而编写的，但可以强迫它提供所需的结果。其预期目的是使 Windows 控制台应用程序能够与 Linux 风格的 tty 终端交互。它通过运行隐藏的控制台并直接访问控制台缓冲区来做到这一点。如果你试图使用它——你会失败。我很幸运，发现这个实用程序有一些未记录的开关，这将允许它提供简单的无缓冲输出。如果没有开关，它会在尝试管道输出时失败并​​出现错误——输出不是 tty。

该实用程序称为 winpty。你可以在这里得到它：

[https://github.com/rprichard/winpty/releases](https://github.com/rprichard/winpty/releases)

这里提到了未记录的开关：

[https://github.com/rprichard/winpty/issues/103](https://github.com/rprichard/winpty/issues/103)

我正在使用 MSYS2 版本。您需要 msys-2.0.dll 才能使用它。

只需运行：

```
winpty.exe -Xallow-non-tty -Xplain your_program.exe | receive_unbuffered_output.exe 
```

`-Xallow-non-tty`, 将允许管道输出

`-Xplain`, 将删除添加的 Linux 终端转义码（或其他名称）

所需文件是：

```
winpty.exe
winpty-agent.exe
winpty.dll
msys-2.0.dll 
```

winpty-debugserver.exe – 不需要

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T19:41:40.290

您所描述的行为是使用运行时库进行 I/O 的应用程序的典型行为。默认情况下，大多数运行时库会检查句柄是否是字符模式设备，例如控制台，如果是，它们不会进行任何缓冲。（理想情况下，运行时库会以与控制台相同的方式处理管道，但似乎大多数都没有。）

~~我不知道有任何明智的方法可以欺骗这样的应用程序，使其在实际写入管道时认为它正在写入控制台。~~

*附录：*七年后，Windows*终于*支持[伪控制台](https://docs.microsoft.com/en-us/windows/console/creating-a-pseudoconsole-session)。如果您在 Windows 10 v1809 或更高版本上运行，这个新 API 应该可以解决您的问题。

在旧版本的 Windows 上，如果您知道需要多少数据，原则上您可以使用[控制台 API 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681944%28v=vs.85%29.aspx)创建一个控制台供应用程序写入，然后从控制台读取输出。但是你不能从 Java 中做到这一点，你需要编写一个 C 应用程序来为你做这件事。

类似地，原则上应该可以编写一个等效于 Unix 伪终端的设备驱动程序，它的作用类似于管道，但报告自己是字符模式设备。但是编写设备驱动程序需要特定的专业知识，并且必须进行数字签名，因此除非有现成的产品，否则这种方法不太可能可行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-05T13:07:14.797

免责声明：我的回答仅涉及使用 MSVC 编译的可执行文件。

缓冲策略在 Microsoft C 运行时 (CRT) 库中编码。您可以在[此处](https://www.codeproject.com/Articles/16163/Real-Time-Console-Output-Redirection)了解详细信息。本文建议使用控制台句柄和操作控制台缓冲区来接收无缓冲的输出。

但是，Microsoft C 运行时中有一个未记录的功能，可以直接从其父进程使用`lpReserved2`和结构`cbReserved2`字段继承带有一些内部标志的文件句柄`STARTUPINFO`。您可以在 Microsoft Visual Studio 提供的 crt 源代码中找到详细信息。`posfhnd`或者在 GitHub 上搜索类似的东西。

我们可以利用这个未记录的特性来提供管道句柄并`FOPEN | FDEV`为子进程指定标志，以欺骗子进程将管道句柄视为`FILE_TYPE_CHAR`句柄。

我有一个工作[Python3 脚本](https://gist.github.com/zhangyoufu/be36035e94b8c0dcb1239a3c8b07a3b1)来演示这种方法。

# c# - IIS 7 上的 Quartz 调度程序自动停止

> ID：11516265
> 
> 赞同：1
> 
> 时间：2012-07-17T05:01:42.740
> 
> 标签：c#, .net, scheduled-tasks, quartz.net

我使用 Quartz .Net 库来调度任务。

它对我来说工作正常。但是当我让它在生产服务器 IIS 7 上运行时。最初它工作得很好，但在 3-4 小时后它会自动停止。我必须重新启动调度程序。什么问题。

没有生成任何异常。因为我正在将异常记录到日志文件中。但是没有任何关于调度程序错误的内容。

```
ISchedulerFactory schedFact = new StdSchedulerFactory();

    // get a scheduler
    IScheduler sched = schedFact.GetScheduler();

    sched.Start();

    JobDetail jobDetail = new JobDetail("myJob", null, typeof(DumbJob));

    DateTime dt = DateTime.Now;
    dt = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(dt, TimeZoneInfo.Local.Id, "India Standard Time");

    SimpleTrigger trigger2 = new SimpleTrigger("myTrigger",
                            null,
                            DateTime.UtcNow,
                            null,
                            SimpleTrigger.RepeatIndefinitely,
                            TimeSpan.FromSeconds(60)); 

    sched.ScheduleJob(jobDetail, trigger2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:55:06.637

我猜这都是关于应用程序池回收的......（IIS会在多次请求或经过一定时间后自动回收应用程序池）

更多信息：[http ://www.iis.net/ConfigReference/system.applicationHost/applicationPools/add/recycling](http://www.iis.net/ConfigReference/system.applicationHost/applicationPools/add/recycling)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-17T07:51:44.033

请检查您的 Quartz 调度程序的线程数。在 web config 中，您可以如下定义线程数。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="quartz" 
             type="System.Configuration.NameValueSectionHandler, 
             System, Version=1.0.5000.0,Culture=neutral, 
             PublicKeyToken=b77a5c561934e089" />
  </configSections>
  <quartz>
    <add key="quartz.scheduler.instanceName" value="ServerScheduler" />
    <add key="quartz.threadPool.type" value="Quartz.Simpl.SimpleThreadPool, Quartz" />
    <add key="quartz.threadPool.threadCount" value="10" />
    <add key="quartz.threadPool.threadPriority" value="2" />
    <add key="quartz.jobStore.misfireThreshold" value="60000" />
    <add key="quartz.jobStore.type" value="Quartz.Simpl.RAMJobStore, Quartz" />
  </quartz>
</configuration> 
```

我希望这能帮到您。

# primefaces - 在 Websphere Application Server 8 上使用 mojorra 实现

> ID：11516266
> 
> 赞同：1
> 
> 时间：2012-07-17T05:01:51.870
> 
> 标签：primefaces, liferay, mojarra, websphere-8

我认为我被想法困住了。我正在尝试将liferay portlet 从weblogic 移到WAS 8。在weblogic 上，我一直在使用JSF 2.0 的mojorra 实现和primefaces 作为组件库。我已经在 WAS 上安装了 primefaces，当我试图移动 portlet 时，问题开始出现。

第一个问题是 WAS 不断尝试使用 myfaces 作为 JSF 实现——我知道这一点是因为 myfaces 抛出异常：

> 引起：java.lang.IllegalArgumentException: factoryName'javax.faces.view.facelets.FaceletCacheFactory' at javax.faces.FactoryFinder.checkFactoryName(FactoryFinder.java:383)

我在 maven pom.xml 文件中有以下依赖项：

```
<dependency>
    <groupId>com.sun.faces</groupId>
    <artifactId>jsf-api</artifactId>
    <version>2.1.2</version>
</dependency>
<dependency>
    <groupId>com.sun.faces</groupId>
    <artifactId>jsf-impl</artifactId>
    <version>2.1.2</version>
</dependency> 
```

对于 WAS 应用程序，我将类加载器设置为首先加载我的类。但这没有帮助。为了确保我为服务器配置了新的类加载器 - 但情况再次重复。我的最后一个想法是将 mojarra jar 定义为共享库 - 但后来我得到了 ClassFormatException （我没有时间研究它）。

有任何想法吗？

* * *

在将 mojorra 类添加到 WAR 并更改类加载器后，我遇到了异常：

> [7/17/12 18:52:25:072 CEST] 0000002c config E 部署期间出现严重错误：com.sun.faces.config.ConfigurationException：配置失败！com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:375) 上的 factoryName 'javax.faces.view.facelets.FaceletCacheFactory' com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:225)在 com.ibm.ws.webcontainer.webapp.WebApp.notifyServletContextCreated(WebApp.java:1649) 在 com.ibm.ws.webcontainer.webapp.WebAppImpl.initialize(WebAppImpl.java:410)

我跟踪了异常，发现只有 myfaces 实现中的 factoryfinder 可能我应该在已经存在的项目之外添加其他依赖项（jsf-api，jsf-impl）？

* * *

在将 jsf 库指定为共享库并将它们作为对我的战争的引用之后 - 初始化成功而没有任何错误 - 另一个问题是现在 liferay 正在抛出异常：

> 01:21:16,956 错误 [LiferayFacesContext:61] 实例未初始化——调用者可能是静态的 01:21:16,960 错误 [LiferayLocalePhaseListener:87] java.lang.NullPointerException at com.liferay.faces.portal.lifecycle.LiferayLocalePhaseListener.setLocale (LiferayLocalePhaseListener.java:67)

也许是因为我还应该将 liferay 库定义为共享库——我会在几秒钟内尝试。

以下例外是：

> 引起：com.liferay.faces.bridge.renderkit.html_basic.HeadRendererBridgeImpl.encodeBegin 的 java.lang.NullPointerException (HeadRendererBridgeImpl.java:133)

不知道这两个异常是否相互关联 - 但结果是我的 portlet 无法工作:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T19:45:56.970

在 WebSphere 中使用一些自定义类加载器魔法是完全可能的。在这里看到这个线程：

[http://forum.primefaces.org/viewtopic.php?f=3&t=6860](http://forum.primefaces.org/viewtopic.php?f=3&t=6860)

# vb.net - 如何使用VB截屏然后获取像素信息？

> ID：11516267
> 
> 赞同：0
> 
> 时间：2012-07-17T05:01:57.970
> 
> 标签：vb.net, screenshot

我在 MS 网站上找到了一个例子。它告诉我如何在 VB 中进行屏幕捕获并显示图片。然而，这并不是我想要的。我想捕获屏幕然后知道点 (x,y) 的 RGB 值。我怎么能这样做？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:59:44.083

如果您正在使用[Bitmap](http://msdn.microsoft.com/en-us/library/4e7y164x)类（我假设您这样做），请使用[GetPixel()](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.getpixel.aspx)方法来获取特定坐标的颜色。

* * *

**例子：**

```
' Get the color of 12, 12
Dim pixelColor As Color = yourBitmap.GetPixel(12, 12) 
```

* * *

此方法返回的[Color](http://msdn.microsoft.com/en-us/library/system.drawing.color.aspx)结构具有您要查找的属性。

* * *

**例子：**

```
Dim g = pixelColor.G
Dim b = pixelColor.B
Dim r = pixelColor.R
Dim a = pixelColor.A
Dim text = String.Format("Alpha:{0}, red:{1}, green: {2}, blue {3}", New Object() {a, r, g, b}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T05:13:40.947

您可以使用 opencv 库函数来了解点的 RGB 值。

# android - 适用于 HTC、摩托罗拉和索尼的日历应用程序的 Android 活动和软件包是什么？

> ID：11516268
> 
> 赞同：0
> 
> 时间：2012-07-17T05:02:07.350
> 
> 标签：android, class, android-activity, calendar, package

适用于 HTC、摩托罗拉和索尼的日历应用程序的 Android 活动和软件包是什么？

我为三星设备找到了这个

*   包：com.android.calendar
*   类：com.android.calendar.LaunchActivity

任何人都可以分享吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:06:17.337

您应该**尽量避免**通过显式意图调用应用程序。这样做的原因是因为用户可能在他们的设备上有多个日历应用程序，您应该使用与您尝试使用的内容相关的特定操作的正常意图。

# ios - 如何在我的 iOS 应用程序中以编程方式引发键盘事件

> ID：11516274
> 
> 赞同：0
> 
> 时间：2012-07-17T05:02:33.320
> 
> 标签：ios, keyboard, keyevent

我正在为 iPad 开发远程桌面项目。我正在努力解决如何以编程方式引发键盘键事件。（Shift、Control、Command 等）键以及如何将这些键分配给 UIButton。这是在我的 ipad 视图中设计的。我在 macOS 中找到了方法，但在 iOS 中没有找到。是否有任何 API 或方法或协议以编程方式引发键盘事件。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:38:54.540

枚举当前视图控制器的主视图的子窗口，当你找到一个接受文本输入的窗口时，例如 UITextView 或 UITextField，调用 becomeFirstResponder `

```
for (UIView *view in myViewController.view.subviews)
{
    if ([view isKindOfClass:[UITextView  class]]
    ||  [view isKindOfClass:[UITextField class]])
    {
        [view becomeFirstResponder];
        break;
    }
} 
```

对于相反的情况，要关闭键盘，只需调用`[myController.view endEditing];`

# eclipse - java.lang.UnsatisfiedLinkError：java.library.path 中没有库

> ID：11516276
> 
> 赞同：2
> 
> 时间：2012-07-17T05:02:49.453
> 
> 标签：eclipse, macos, eclipse-plugin, java-native-interface, unsatisfiedlinkerror

我正在尝试将本机库与我的 Eclipse 插件捆绑在一起。当我使用 提供库的路径时`-Djava.library.path`，它可以完美运行。

但是，当我将它添加到`MANIFEST.MF`文件中时，它会抛出一个异常，上面写着，

`Exception in thread "Thread-9" java.lang.UnsatisfiedLinkError: no XpNamedPipeJni in java.library.path`

中的代码`MANIFEST.MF`是

`Bundle-NativeCode: lib/XpNamedPipeJni.dll; lib/XpNamedPipeJni_64.dll; osname=Win32; processor=x86; processor=x86-64, lib/libXpNamedPipeJni.dylib; osname=MacOSX; processor=x86; processor=PowerPC; processor=x86-64`

有趣的是，它在带有`Bundle-NativeCode: lib/XpNamedPipeJni.dll; lib/XpNamedPipeJni_64.dll`. 当我为 Mac OS 添加另一行时，问题就来了。我也试过了`Bundle-NativeCode: lib/libXpNamedPipeJni.dylib`。不工作。

[我在这里尝试了 OSGi 规范](http://www.osgi.org/Specifications/Reference)中 OS/Processor 值的所有可能排列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T17:23:53.530

解决了。我使用了错误的库扩展名。我将扩展名从`dylib`to更改为`jnilib`有效。显然，OS X 上的 Java VM 似乎要求文件扩展名为`.jnilib`. 关于这背后的原因有什么想法吗？

现在代码看起来像

`Bundle-NativeCode: lib/XpNamedPipeJni.dll; osname=Win32; processor=x86, lib/XpNamedPipeJni_64.dll; osname=Win32; processor=x86_64, lib/libXpNamedPipeJni.jnilib; osname=macosx; processor=x86; processor=x86_64; processor=ppc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-01T08:38:11.703

如果您的 Eclipse 无法加载 XpNamedPipeJni.dylib（或任何 filename.dylib），那是因为 Eclipse 试图通过调用*System.loadLibrary(fileName)*从 System 加载它， 而 Eclipse 无法从加载位置找到它该文件在这些位置不存在。

要查看所有 Eclipse 尝试从何处加载它，请在代码中添加以下行：

```
String locations = System.getProperty("java.library.path"); 
```

查看所有位置并将您的文件复制到任何这些位置，（如果位置不存在，请创建并复制）。重新启动eclipse，它现在可以正常工作了。

# bash - 如何挂钩到 bash？像 command-not-found hanle

> ID：11516277
> 
> 赞同：0
> 
> 时间：2012-07-17T05:02:48.590
> 
> 标签：bash, hook

如何挂钩到 bash？like command-not-found hanle 非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:05:10.470

你在寻找[陷阱](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_12_02.html)吗？
这些在抛出特定信号代码时很有用。

否则，检查前一个命令的退出代码很容易，使用`$?`，[如下所示](http://tldp.org/LDP/abs/html/exit-status.html)。
传统上，如果它等于 0，它就成功了。大于零表示失败。

# caching - 如何清除我的 UIWebView 的 loadHtmlString 的缓存？

> ID：11516278
> 
> 赞同：6
> 
> 时间：2012-07-17T05:02:51.063
> 
> 标签：caching, uiwebview

我的应用程序包中有一些嵌入的 html。我正在使用 loadHtmlString 来加载它。同时我的文档文件夹中有一些图像文件。我想用我的文档文件夹中的那个替换我在html中的img。例如，这是我拥有的示例 html：

```
 <div id="image">
            <a href="image">
                <img src="@image" class="center">               
            </a>
        </div> 
```

我正在使用以下代码将@image 替换为我文档中的文件路径：

```
 NSString* imgFile = [NSString stringWithFormat:@"file:///%@/%@",
                         [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Images"],@"myimage.png"];
    text = [text stringByReplacingOccurrencesOfString:@"@image" withString:imgFile];   

    NSURL* baseUrl = [NSURL fileURLWithPath:[[NSBundle mainBundle] resourcePath]];
    [self.webView loadHTMLString:text baseURL:baseUrl]; 
```

（文本是我的 html 文件的 html 文本）。

它在第一次调用此代码时起作用。但是比如我修改了myimage.png，再次调用代码，还是会显示我修改前的图片。（我已经在我的文件夹中检查了我的文件，它已经正确修改了）。

我怀疑它是由缓存引起的。有人可以建议吗？

谢谢

**笔记：**

它是由缓存引起的。我通过使用以下方法强制 UIWebView 加载图像的新副本解决了这个问题：

```
NSString* imgFile = [NSString stringWithFormat:@"file:///%@/%@?t=%d",
                         [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Images"],@"myimage.png",time(NULL)];
    text = [text stringByReplacingOccurrencesOfString:@"@image" withString:imgFile]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T03:50:24.537

我通过在我的网址中添加时间解决了这个问题。所以图像不会被缓存。请参考我的问题。问题是考虑关闭。

# rest - Glassfish 与 Tomcat 的 RESTful 服务

> ID：11516280
> 
> 赞同：16
> 
> 时间：2012-07-17T05:03:20.107
> 
> 标签：rest, tomcat, glassfish

我有 .net 开发背景，但对 Java 世界比较陌生。我们已经开始使用 JAX-RS 开发 RESTful 服务（公共 Web API），主要由移动平台（Android、iPhone、Windows Phone 等）使用。

1.  我们需要一些有关选择合适服务器（例如 Tomcat 或 Glassfish 等）的指导吗？也请分享原因。
2.  另外请指导我们对 JAX-RS 的决定是否适合构建 RESTful 服务。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-17T05:11:01.307

Tomcat 只是一个 servlet 容器，这仅仅意味着它不会提供对 Java EE 功能的支持。

除了查看 RESTful 服务，还可以查看您打算使用什么来实现您的层功能。如果您只坚持使用 Servlet/JSP，那么 Tomcat 绝对是一个非常合理的选择。如果您需要使用 JavaEE 功能，请查看 GlassFish。

纯粹就功能而言，GlassFish 可以做 Tomcat 可以做的一切，甚至更多，因为它是一个完全符合 JavaEE 的应用服务器。但是，请注意，Tomcat 对于许多复杂的应用程序（不使用 Java EE 功能）有很好的效果。

在性能方面，Tomcat 是轻量级的，启动速度非常快，并且在 Eclipse 环境中得到了很好的支持。GlassFish 启动速度有点慢（在我糟糕的笔记本电脑上大约需要 11 秒），但部署速度非常快。

Tomcat 有一个用于基本应用程序部署的管理器应用程序，但 JNDI 和类似的资源配置（如用户配置）必须通过手动编辑 XML 文件来完成。Glassfish 有一个不错的管理控制台，它允许您从中央 UI 完成所有这些操作，而无需手动编辑配置。

无论如何，我要说的是，您的选择应该完全基于您打算从 Java/Java EE API 中使用的内容，以及最符合该要求的服务器。不要遵循任何流行共识，因为您的要求是您最好的指南。

就使用 JAX-RS 实现而言，我没有看到任何问题。我和泽西岛一起工作过，这里先看看这两个： [http ://www.slideshare.net/pelegri/jersey-and-jaxrs-presentation](http://www.slideshare.net/pelegri/jersey-and-jaxrs-presentation)

最后，就 SSL 而言：Tomcat 和 Glassfish 都会很乐意使用 SSL，两者都没有问题。

GlassFish SSL tut：http: [//javadude.wordpress.com/2010/04/06/getting-started-with-glassfish-v3-and-ssl/](http://javadude.wordpress.com/2010/04/06/getting-started-with-glassfish-v3-and-ssl/)

祝你好运。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T05:30:59.730

你可以看看[Play Framework](http://www.playframework.org/)。它是可扩展的、无状态的、宁静的 Web 框架。通常它不需要像 Tomcat 这样的应用服务器。[它有自己的基于Netty](https://netty.io/)的内置高性能网络服务器。但是，如果您需要，可以将应用程序打包为 .war。

使用 Play 构建 RESTful Web 服务不会有问题。

我们在生产环境中使用它并且对它非常满意。开发非常快速和容易。它就像 Java World 中的 Ruby on Rails。

**编辑**

例如，您可能会看到[这篇](https://stackoverflow.com/questions/4379485/restful-on-play-framework)文章。

# sql-server - 将 SSIS 中的变量用于 Excel 目标

> ID：11516283
> 
> 赞同：0
> 
> 时间：2012-07-17T05:03:38.100
> 
> 标签：sql-server, sql-server-2008, ssis

我有一个项目需要将 SQL 数据库中的数据提取到 40 多个 Excel 电子表格中。我试图对 SSIS 做的是在我通过工作流时使用变量来设置目标的名称。人们有什么技巧和窍门才能做到这一点？如果我在运行数据流之前设置变量值，它可以工作，但如果我不设置它们，它会失败。我已经设置了一个表达式任务来设置流中的变量，但这似乎并没有流向 SQL 任务。读取和写入变量是否有任何问题？

干杯，亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:48:02.340

如果您需要实现`parallelism`，那么最好的方法是创建变量。分配 excel 工作表名称，然后同时执行所有数据流任务。

如果您很难创建 40 个变量，那么您可以使用 foreach 循环。选择`foreach loop item enumerato`r。指定所有文件名。在 foreach 循环内拖放 40 DFT 并基于 foreach 循环中的值（使用`precedence constraint`） ，特定的数据流任务将被执行。但是这样你会失去并行性。

# java - 如何在没有页面请求的情况下自动调用 servlet/class/method？

> ID：11516286
> 
> 赞同：1
> 
> 时间：2012-07-17T05:03:51.657
> 
> 标签：java, jakarta-ee, servlets

我们有一个页面每分钟调用一个 servlet。这个 servlet 连接到另一个网站以获取一些数据，处理这些数据，然后通过 response.getWriter() 方法发送响应。

如果有两个不同的用户同时访问该页面，则会向同一个 servlet 发出两个请求。虽然仍然只有一个 servlet 实例，但会有两个进程（可能在两个不同的线程上）会尝试连接到另一个网站。

我们想要的是有另一个类/方法/servlet 可以连接到另一个网站，处理数据，然后将其保存到缓存/会话。必须每分钟调用/调用此类/方法/servlet，以便从页面调用第一个 servlet 时，它只会从缓存/会话中获取数据，而不会尝试连接到网站。我们如何实现这一点？（问题是如何每分钟自动调用/调用新的类/方法/servlet，而无需从页面发出请求）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:06:48.793

创建一个读取外部网页的计划任务（使用[Jsoup](http://jsoup.org)更容​​易访问）并将数据读取到一个`synchronized` `Map`和从 Servlet 中，您可以从应用程序范围读取该 Map

```
getServletContext().getAttribute("dataMap"); 
```

并从中读取数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:24:03.977

您必须创建一个计划任务来完成此操作，此计划任务的间隔为 1 分钟。

# css - CSS获取屏幕分辨率的高度

> ID：11516291
> 
> 赞同：70
> 
> 时间：2012-07-17T05:04:28.110
> 
> 标签：css

我很难获得较低屏幕分辨率的高度，因为我的屏幕分辨率是 1920x1080。

有谁知道如何获得屏幕分辨率的高度和宽度？

我以 1024x768 的分辨率检查了我的作品，结果一切都变得一团糟。

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2015-01-09T18:57:23.107

您可以使用视口百分比长度。

请参阅：[http ://stanhub.com/how-to-make-div-element-100-height-of-browser-window-using-css-only/](http://stanhub.com/how-to-make-div-element-100-height-of-browser-window-using-css-only/)

它是这样工作的：

```
.element{
    height: 100vh; /* For 100% screen height */
    width:  100vw; /* For 100% screen width */
} 
```

更多信息也可通过[Mozilla Developer Network](https://developer.mozilla.org/en-US/docs/Web/CSS/length#Viewport-percentage_lengths)和[W3C](http://www.w3.org/TR/css3-values/#viewport-relative-lengths)获得。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2019-03-01T12:44:05.460

添加到@Hendrik Eichler 答案，视口的初始包含块的`n vh`使用。`n%`

```
.element{
    height: 50vh; /* Would mean 50% of Viewport height */
    width:  75vw; /* Would mean 75% of Viewport width*/
} 
```

此外，视口高度适用于任何分辨率的设备，视口高度、宽度是最好的方法之一（类似于使用 % 值的 css 设计，但基于设备的视口高度和宽度）

> **vh**
> 等于视口初始包含块高度的 1%。
> 
> **vw**
> 等于视口初始包含块宽度的 1%。
> 
> **vi**
> 等于初始包含块大小的 1%，在根元素的内联轴方向上。
> 
> **vb**
> 等于初始包含块大小的 1%，在根元素的块轴方向上。
> 
> **vmin**
> 等于 vw 和 vh 中的较小者。
> 
> **vmax**
> 等于 vw 和 vh 中的较大者。

参考： [https ://developer.mozilla.org/en-US/docs/Web/CSS/length#Viewport-percentage_lengths](https://developer.mozilla.org/en-US/docs/Web/CSS/length#Viewport-percentage_lengths)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-12-29T07:07:06.197

您实际上不需要屏幕分辨率，您想要的是浏览器的尺寸，因为在许多情况下浏览器是窗口化的，即使在最大化尺寸下，浏览器也不会占用 100% 的屏幕。

你想要的是 View-port-height 和 View-port-width：

```
<div style="height: 50vh;width: 25vw"></div> 
```

这将呈现一个具有内部浏览器高度的 50% 和宽度的 25% 的 div。

（老实说，这个答案是@Hendrik_Eichler 想说的一部分，但他只给出了一个链接，并没有直接解决这个问题）

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-07-17T05:14:16.857

无法从 CSS 获取屏幕高度。但是，从 CSS3 开始，您可以使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)来根据分辨率控制模板的显示。

如果您想使用媒体查询根据高度进行编码，您可以定义样式表并像这样调用它。

```
<link rel="stylesheet" media="screen and (device-height: 600px)" /> 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-12-27T17:58:04.777

您可以将屏幕的当前高度和宽度绑定到 css 变量：`var(--screen-x)`并`var(--screen-y)`使用此 javascript：

```
var root = document.documentElement;

document.addEventListener('resize', () => {
  root.style.setProperty('--screen-x', window.screenX)
  root.style.setProperty('--screen-y', window.screenY)
}) 
```

这直接改编自 lea verou 在她关于 css 变量的演讲中的示例：[https ://leaverou.github.io/css-variables/#slide31](https://leaverou.github.io/css-variables/#slide31)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2018-03-01T12:27:58.910

你可以很容易地在纯 CSS 中获得窗口高度，使用单位“vh”，每个对应于窗口高度的 1%。在下面的示例中，让我们通过添加一个屏幕大小的上半边距来开始集中 block.foo。

```
.foo{
    margin-top: 50vh;
} 
```

但这仅适用于“窗口”大小。使用一点 javascript，您可以使其更加通用。

```
$(':root').css("--windowHeight", $( window ).height() ); 
```

该代码将创建一个名为“--windowHeight”的 CSS 变量，该变量带有窗口的高度。要使用它，只需添加规则：

```
.foo{
    margin-top: calc( var(--windowHeight) / 2 );
} 
```

为什么它比简单地使用“vh”单位更通用？因为你可以得到任何元素的高度。现在，如果你想在任何 container.bar 中集中一个 block.foo，你可以：

```
$(':root').css("--containerHeight", $( .bar ).height() );
$(':root').css("--blockHeight", $( .foo ).height() );

.foo{
    margin-top: calc( var(--containerHeight) / 2 - var(--blockHeight) / 2);
} 
```

最后，为了让它响应窗口大小的变化，你可以使用（在这个例子中，容器是窗口高度的 50%）：

```
$( window ).resize(function() {
    $(':root').css("--containerHeight", $( .bar ).height()*0.5 );
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-17T05:13:01.773

为了获得屏幕分辨率，您还可以使用[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")。这个[链接](https://stackoverflow.com/questions/1271675/jquery-screen-resolution-height-adjustment)对你解决很有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-09T19:16:47.437

要获得屏幕分辨率，您需要使用 Javascript 而不是 CSS：`screen.height`用于高度和`screen.width`宽度。

* * *

## 回答 #9

> 赞同：-10
> 
> 时间：2012-07-17T06:04:18.660

使用百分比的高度和宽度。

例如：

```
width: 80%;
height: 80%; 
```

# android - 制作更好的 Android 应用

> ID：11516292
> 
> 赞同：2
> 
> 时间：2012-07-17T05:04:34.163
> 
> 标签：android, android-ui

我真的不喜欢标准的 Android UI，并且认为与 IOS 和 WP7 相比，Android 应用的 UI 真的很差；>= 3.x 版本的 UI 更好，所以我想问在 < 3.0 版本中可以做些什么来制作更好的应用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T05:08:03.663

要做的事情是更好地理解如何设计更好的用户界面。这只是没有知识的错误判断。每个 API 级别都有数千个外观精美的应用程序。

阅读[本文](http://phandroid.com/2011/05/11/10-tips-for-android-ui-design/)以开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T05:11:57.483

很明显的解决方案：使用自定义组件。在原生视图之上制作自己的漂亮视图很容易。原生 Android UI 组件的问题是它们可能由不同的供应商以不同的方式实现。而且它们看起来并不原始。

使用 UI 模式（http://mobile-patterns.com/ 或[http://mobile-patterns.com/](http://mobile-patterns.com/)）。

# python - python中数独的递归解法

> ID：11516296
> 
> 赞同：1
> 
> 时间：2012-07-17T05:05:10.597
> 
> 标签：python, recursion, sudoku

```
def answer_solve_sudoku(__grid):

    res = check_sudoku(__grid)
    if res is None or res is False:
        return res

    grid = copy.deepcopy(__grid)

    # find the first 0 element and change it to each of 1..9,
    # recursively calling this function on the result
    for row in xrange(9):
        for col in xrange(9):
            if grid[row][col] == 0:
                for n in xrange(1, 10):
                    grid[row][col] = n
                    new = answer_solve_sudoku(grid)
                    if new is not False:
                        return new
                # backtrack
                return False

    # if we get here, we found no zeros and so we're finished
    return grid 
```

这是代码，`check_sudoku(grid)`如果网格是有效的数独，则可以返回。

我就是看不懂递归部分，我试着在纸上写下过程，但每次都失败，回溯是如何工作的？什么是`new`？如果`answer_solve_sudoku(grid)`有效？

我知道它每 0 到 1..9 设置一次，并检查它是否是有效的网格，但我无法在纸上绘制整个过程。并且无法真正理解回溯是如何工作的。

顺便说一句，对理解递归代码有什么建议吗？

最好的祝福，

盛云

**编辑**

我一遍又一遍地阅读代码，现在我有了一些理解，但我对此不太确定，如果有人给我一些意见，那就太好了。

1，`return new`只有在求解器找到解决方案时才会调用，并且会在之后立即调用`return grid`

2、什么时候

```
# backtrack
return False 
```

叫做？如果下一个解决方案不正确，`check_sudoku(__grid)`将返回`False`，如果下一个解决方案正确，它将调用另一个`answer_solve_sudoku(grid)`解决方案，直到它得到正确的解决方案，当它得到正确的解决方案时，它会`return grid`然后`return new`。那么什么时候是：

```
# backtrack
return False 
```

叫？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T18:00:41.967

我有一个更好的建议，而不是写在纸上。格式化代码以向您展示逻辑在做什么的可视化表示。这是一种方法：

```
def print_counter(val, msg):
    print "%s[%d] %s" % (" "*val, val, msg)

def answer_solve_sudoku(__grid, counter=0):

    res = check_sudoku(__grid)
    if res is None or res is False:
        return res

    grid = copy.deepcopy(__grid)

    for row in xrange(9):
        for col in xrange(9):
            if grid[row][col] == 0:
                for n in xrange(1, 10):
                    grid[row][col] = n
                    print_counter(counter,"test: (row %d, col %d) = %d" % (row,col,n))
                    new = answer_solve_sudoku(grid, counter+1)
                    if new is not False:
                        print_counter(counter, "answer_solve_sudoku() solved: returning")
                        return new
                # backtrack
                print_counter(counter, "backtrack")
                return False

    print_counter(counter, "**SOLVED! Returning back up to top**")
    return grid

from pprint import pprint 
solution = answer_solve_sudoku(easy_grid)
pprint(solution) 
```

我所做的是创建一个小打印机功能，它将打印一个数字并将消息缩进那么多空格。然后在你的 中`answer_solve_sudoku`，我给它一个默认的计数器值 0，并且总是将 counter+1 传递给每个递归调用。这样，随着深度的增加，数量也会增加。我将打印机功能放在一起以直观地说明正在发生的事情。

你会看到是这样的：

```
[0] test: (row 0, col 2) = 1
[0] test: (row 0, col 2) = 2
[0] test: (row 0, col 2) = 3
[0] test: (row 0, col 2) = 4
 [1] test: (row 0, col 3) = 1
  [2] test: (row 0, col 4) = 1
  [2] test: (row 0, col 4) = 2
  [2] test: (row 0, col 4) = 3
    ... 
         [45] test: (row 7, col 7) = 8
         [45] test: (row 7, col 7) = 9
         [45] backtrack
        [44] test: (row 7, col 5) = 6
        [44] test: (row 7, col 5) = 7
    ... 
               [51] test: (row 8, col 6) = 6
               [51] test: (row 8, col 6) = 7
                [52] **SOLVED! Returning back up to top**
               [51] answer_solve_sudoku() solved: returning
              [50] answer_solve_sudoku() solved: returning
             [49] answer_solve_sudoku() solved: returning
    ... 
  [2] answer_solve_sudoku() solved: returning
 [1] answer_solve_sudoku() solved: returning
[0] answer_solve_sudoku() solved: returning 
```

> return new 只会在求解器找到解决方案时调用，这将在返回网格之后立即调用

是的，当调用`answer_solve_sudoku`通过整个循环而没有失败并到达底部时，它已经成功并返回网格。然后，调用者将获得该网格作为结果`new = answer_solve_sudoku(grid)`并将其返回。网格将备份堆栈上的每个返回调用。

> 什么时候会发生回溯？

因为您在每次递归中创建网格的副本，除非该步骤找到解决方案，否则它对该网格所做的更改将被丢弃，因为一旦我们返回一个步骤，我们将回到我们之前的网格状态。它会尽可能地使用该解决方案，直到它超过 9 的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T18:01:43.933

你应该看看这个[答案](https://stackoverflow.com/questions/9040968/how-to-find-the-first-solution-only-with-this-backtracking/9042357#9042357)。它具有用于递归回溯的伪代码和实际代码。代码是用 Java 编写的，但 Python 的思维过程是相同的。

# mysql - 缓存 SQL 结果集

> ID：11516298
> 
> 赞同：0
> 
> 时间：2012-07-17T05:05:52.770
> 
> 标签：mysql, sql, database, oracle, caching

是否有任何 DBMS（Oracle、MySQL、SQLite、PostGres）提供结果集的缓存？我试图了解缓存 SQL 结果以减少数据库负载的最常用方法是什么。我的理解是，数据库是扩展应用程序的瓶颈，而缓存将有助于减少数据库的负载。

如果 DBMS 不提供结果缓存，那么使用 Memcache 等缓存工具是否是个好主意？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T05:25:06.910

数据库*通常*缓存查询的执行计划，而不是结果集本身。

一种可行的方法当然是执行您的建议并为此使用 Memcache。Memcache 只是提供此类功能的众多工具之一。该决定很大程度上取决于您正在使用的环境、应用程序的类型（Web 与 Windows）、架构等。

例如，如果结果集不是太大，您可能会将其缓存在内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T10:16:31.437

Oracle offers several ways to achieve a cache. It depends on which version of the Oracle database you are using. In older versions you could opt to "pin a table in memory". This effectively cached any frequently accessed table into cache. Care needs to be taken here in that this could be used a little too liberally. There is also the option of using Materialized Views. Now, this is not a method of caching but the benefits along the same lines as caching. Oracle 11g now allows the caching of queries at both database and session level. This is achieved through the use of hints. Look for RESULT_CACHE_MODE and RESULT_CACHE. There are various configuration settings and EXPLAIN PLAN can display whether a query is being read from RESULT CACHE. I don't have experience of third party tools such as Memcache(?) but the danger of using tools such as this - is you may actually circumvent anything (something of benefit) Oracle implements into their own RDBMS.

# xcode - 在 Xcode 中检查连接速度（带宽）

> ID：11516301
> 
> 赞同：6
> 
> 时间：2012-07-17T05:06:14.053
> 
> 标签：xcode, bandwidth

有什么方法可以在 Xcode 中以编程方式检查互联网连接速度或带宽。我正在尝试这样做，因为慢速连接会为某些图像上传造成问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-23T10:51:17.280

如果您真的需要知道，则必须对其进行测试。

建立与具有低延迟的已知服务器的连接。在一个单独的线程中，标记时间（时间 A）并发送一个数据包（确保它是一个数据包）。等待那个线程。标记第一个数据包的时间（时间 B）。读取数据直到完成。标记最后一个数据包的时间（时间 C）。确保服务器响应跨越至少三个数据包。

时间 B - 时间 A 是对延迟的非常粗略的估计。时间 C - 时间 B 是对带宽的粗略估计。

因为您希望尽可能准确，请使用您可用的最低级别的网络访问（我相信在 iPhone 上这是套接字）。使用固定长度的随机数据块作为您的请求和响应。请求的几个字节就足够了，但响应需要构造良好。确保服务器发送一个小的第一个数据包，然后是一个足以填满三个或更多的数据包序列。

到那时，您将需要进行测试。测试，测试，测试和测试。测试不同的网络类型，测试不同数量的网络流量，测试交换网络，以及测试你能想到的任何东西。

# c - C 总线错误：10 bootstrap.sh

> ID：11516303
> 
> 赞同：0
> 
> 时间：2012-07-17T05:06:24.710
> 
> 标签：c

因此，在运行此代码时，我不断收到错误消息：

“/Applications/TextMate.app/Contents/SharedSupport/Bundles/C.tmbundle/Support/bin/bootstrap.sh：第 7 行：11441 总线错误：10“$3”.out”

我浏览了以前的帖子，但无法弄清楚，有没有人知道为什么会发生这种情况。我看过帖子说这是因为数组对于内存来说太大了，但我无法想象 2 20space int 数组有那么大。

```
#include <stdio.h>

int read_file(int *x, int *y);

int main()
{
    int count, x[25], y[25];
    count = read_file(x,y);
    return 0;
}

int read_file(int *x, int *y)
{
    int number, i;
    FILE *fp;
    fp = fopen("data.txt", "r");
    printf("File open");
    for(i = 0 ; fscanf(fp, "%d", &number) != 0; i++)
    {
            x[i] = number;
    }
    for(i = 0 ; fscanf(fp, "%d", &number) != 0; i++)
    {
        y[i] = number;
    }
        fclose(fp);
        return (i-1);
} 
```

data.txt 看起来像：

1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 0

1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:13:40.813

如果输入错误， fscanf 可以返回 EOF (-1?) - 假设这不是您的问题。是什么阻止 x 读取所有数字？看起来你的意思是在 number == 0 时停止循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T05:10:35.083

放入一个 print() （或在调试器中运行），看看“for()”循环是否真的在你认为的地方终止:)

您绝对需要更改代码以检查：

1.  “fopen()”中的错误

2.  “fscanf()”中的错误

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-17T05:12:21.080

`fscanf`返回成功读取的项目数，我想你想测试是否`number == 0`从循环中中断。

# c# - 如何在不使用 httpcontext.current 的情况下获取域 url

> ID：11516305
> 
> 赞同：1
> 
> 时间：2012-07-17T05:06:32.540
> 
> 标签：c#, asp.net

我如何在不使用 httpcontext.current 的情况下获取域 url，因为我直接使用 global.asax 无法访问当前上下文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:01:27.527

好的，如果我遇到了您的问题，那么您可以使用此 javascript 代码来获取 url。休息自己决定这段代码的时间和地点

```
<script type="text/javascript">
  alert('Server: ' + window.location.hostname);
  alert('Full path: ' + window.location.href);
  alert('Virtual path: ' + window.location.pathname);
  alert('HTTP path: ' + window.location.href.replace(window.location.pathname, ''));
</script> 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T05:12:02.367

global.asax 确实可以访问当前上下文，但仅限于某些事件。例如，它在 Application_BeginRequest 中有访问权，但在 Application_Start 中没有。因此，首先，我会确保您尝试在正确的时间访问该 URL。

除了 global_asax 包含的 HttpApplication 类之外，它还为您提供了一个 HttpRequest 类型的 Request 属性。但同样，您只能在适当的时间访问它。

# android - 广播接收器是否可以有不同的启动器活动？

> ID：11516307
> 
> 赞同：1
> 
> 时间：2012-07-17T05:06:57.267
> 
> 标签：android, service, broadcastreceiver

我这里有一个奇怪的问题。我有一个记录通话的应用程序。为此，我一直在使用广播接收器和在后台运行的服务。但问题是这些东西不提供应用程序图标，因此无法与用户交互。所以我创建了另一个活动并在我的清单中将其声明为启动器活动。现在应用程序有了图标，单击该图标会为用户打开一个 GUI。这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.callrecorderbr.activity"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

      <receiver android:name=".EavesDropperReceiver" android:enabled="true">
        <intent-filter>
            <action android:name="android.intent.action.PHONE_STATE"></action>
            <action android:name="android.intent.action.BOOT_COMPLETED"></action>
            <!-- <action android:name="android.intent.action.NEW_OUTGOING_CALL"></action>  -->
        </intent-filter>
    </receiver> 

      <activity android:name=".MainMenuActivity"
              android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"> 
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".EavesDropperActivity"
        android:label="@string/app_name" >
    </activity> 
    <activity android:name=".RecordingsListActivity"
        android:configChanges="orientation|keyboardHidden"
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" />
    <activity android:name=".PlayRecordingActivity"
        android:configChanges="orientation|keyboardHidden"
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" />

</application>

<!-- <uses-permission android:name="android.permission.INTERNET" /> -->
<!-- <uses-permission android:name="android.permission.WAKE_LOCK" /> -->
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
<uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" /> 
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

 </manifest> 
```

但是，当应用程序正在运行并且我尝试记录通话时，这种方法给了我一个奇怪的异常。一旦用户开始通话，该应用程序就会冻结并强制退出。它在我的 Logcat 中给出了一些 ANR。这是日志猫：

```
 07-17 10:21:42.147: E/ActivityManager(59): ANR in com.callrecorderbr.activity (com.callrecorderbr.activity/.EavesDropperActivity)

    07-17 10:21:42.147: E/ActivityManager(59): Reason: keyDispatchingTimedOut

    07-17 10:21:42.147: E/ActivityManager(59): CPU usage from 28362ms to 28ms ago:
    07-17 10:21:42.147: E/ActivityManager(59):   system_server: 8% = 6% user + 1% kernel / faults: 1684 minor 7 major 
```

然后很多关于内核的行与上面的行相同。谁能告诉我是什么问题。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:20:58.537

当任何线程（通常是“主”线程）中存在长时间操作时，就会发生 ANR。要深入研究 /data 文件夹中的 traces.txt 文件。以下链接将帮助您调查 ANR 错误[“ANR”](https://stackoverflow.com/questions/704311/android-how-do-i-investigate-an-anr?rq=1)

# django - 用于两个 gunicorn 应用程序（django 和 tilestache）的 Nginx conf

> ID：11516308
> 
> 赞同：4
> 
> 时间：2012-07-17T05:06:59.680
> 
> 标签：django, nginx, gis, gunicorn

我正在尝试托管一个由 django 应用程序和由tilestache 提供的地图图块组成的站点。我可以通过使用任何一个来让它们分别运行和提供内容

```
gunicorn_django -b 0.0.0.0:8000 
```

对于 django 应用程序，或

```
gunicorn "TileStache:WSGITileServer('tilestache.cfg')" 
```

为tilestache。我已经尝试守护 django 应用程序并在不同端口 ( ) 上使用 tilestache 进程同时运行它们`8080`，但 tilestache 不起作用。我认为问题在于我的 nginx conf：

```
server {
    listen   80;
    server_name localhost;

    access_log /opt/django/logs/nginx/vc_access.log;
    error_log  /opt/django/logs/nginx/vc_error.log;

    # no security problem here, since / is alway passed to upstream
    root /opt/django/;
    # serve directly - analogous for static/staticfiles
    location /media/ {
        # if asset versioning is used
        if ($query_string) {
            expires max;
        }
    }
    location /static/ {
        # if asset versioning is used
        if ($query_string) {
            expires max;
        }
    }
    location / {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_connect_timeout 10;
        proxy_read_timeout 10;
        proxy_pass http://localhost:8000/;
    }
    # what to serve if upstream is not available or crashes
    error_page 500 502 503 504 /media/50x.html;
} 
```

我可以`server`在 conf 中添加另一个块`proxy_pass http://localhost:8080/`吗？此外，我对这个堆栈非常陌生（我非常依赖[Adrián Deccico](https://stackoverflow.com/users/249372/adrian-deccico)的教程[来](http://adrian.org.ar/python/django-nginx-green-unicorn-in-an-ubuntu-11-10-ec2-instance)启动和运行 django 部分）所以任何“哇，这是一个明显的错误”或建议将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T08:04:01.207

据我所知-您已映射`location /`到`localhost:8000`. 当您有 2 个不同的上游时，您将需要两个不同的位置映射，每个上游一个。因此，假设 django 应用程序是您域中的主站点，您将拥有现在的默认位置：

```
location / {
    proxy_pass_header Server;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Scheme $scheme;
    proxy_connect_timeout 10;
    proxy_read_timeout 10;
    proxy_pass http://localhost:8000/;
} 
```

但随后为另一个应用程序添加另一个位置：

```
location /tilestache {
    proxy_pass_header Server;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Scheme $scheme;
    proxy_connect_timeout 10;
    proxy_read_timeout 10;
    proxy_pass http://localhost:8080/;
} 
```

这里唯一的区别是端口。这样 domain.com/tilestache 将由 处理`localhost:8080`，而所有其他地址将默认为 django 应用程序`localhost:8000`。放置`location /tilstache`前`location /`。

为清楚起见，您可以像这样定义上游：

```
upstream django_backend  {
  server localhost:8000;
}

upstream tilestache_backend  {
  server localhost:8080;
} 
```

然后在`location`部分中，使用：

```
location / {
    .....
    proxy_pass  http://django_backend;
}

location /tilestache {
    .....
    proxy_pass  http://tilestache_backend;
} 
```

# php - PHP：preg_replace_callback 改变结果的顺序

> ID：11516313
> 
> 赞同：-1
> 
> 时间：2012-07-17T05:07:47.503
> 
> 标签：php, regex, preg-replace-callback

我有以下代码

```
return preg_replace_callback(
    "#\{gallery: '(.+?)'(?: dir: ([0-1]))?\}#i",
    create_function('$i', 'echo $i[1];' ),
    $string); 
```

我的问题是，如果我的字符串看起来像这样：

```
top
{gallery: 'images/'}
center
{gallery: 'images/characters'}
bottom 
```

当它被渲染时，它看起来像这样：

```
images/
images/characters
top center bottom 
```

为什么要更改顺序并将替换的代码放在顶部，而将其他所有内容放在底部，甚至是中间的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:23:18.483

您应该`return`在替换回调中使用语句：

```
$string = "top {gallery: 'images/'} center {gallery: 'images/characters'} bottom";
$string = preg_replace_callback(
  "#\{gallery: '(.+?)'(?: dir: ([0-1]))?\}#i", 
  create_function('$i', 'return $i[1];'), 
  $string
);
echo $string . PHP_EOL;

// Outputs: top images/ center images/characters bottom 
```

# c++ - C++：所有函数和 ivars 都必须在 .h 文件中声明吗？

> ID：11516322
> 
> 赞同：0
> 
> 时间：2012-07-17T05:08:44.053
> 
> 标签：c++, objective-c

我正在从 C 迁移到 Obj-C 到 Obj-C++。下学期我将学习 C++ 课程。希望我能轻而易举地度过难关。

因此，在 Obj-C 中，私有和公有取决于您在头文件中声明的任何内容。在一个文件中，您可以在该类上调用`@interface`的`.h`所有属性和实例/类方法都为您布局。根据我对 C++ 的假设，我觉得 public 和 private 实际上都写在`.h`文件中：ivars、functions，你有什么。我的这个假设是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:20:09.973

在早期的 Objective-C 编译器中`@interface`，一个类（通常在头文件中声明`.h`）必须包含所有数据成员（“ivars”）。使用较新的 LLVM 编译器，可以在`@implementation`(`.m`文件) 中列出它们。

Objective-C 类的其他部分不受此限制。方法可以在`.h`, `.m`, both 中声明或定义，或者都不！标头通常描述最重要的方法，省略特定于实现的内容。 *类别*（语言的一个特性）是一种向类添加新方法同时在其他地方声明和定义它们的方法。还有多种使用方式，`NSObject`Objective-C 运行时几乎可以做任何你能想到的事情，例如在运行时决定一个类是否有方法，或者添加一个方法等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:12:39.217

不，您可以不在各种 .h 文件中拥有公共和私人。不确定 obj-c/c++，但如果您确实选择将它们放入 .h 文件中（在较大的程序中首选），则需要 #include .h 文件。

# selenium - 捕获失败 selenium rc testNG 的屏幕截图

> ID：11516325
> 
> 赞同：1
> 
> 时间：2012-07-17T05:09:16.510
> 
> 标签：selenium, selenium-rc, testng

我正在使用 selenium 运行我在 Eclipse (Java) 中使用 TestNG 框架准备的自动化脚本。任何人都可以帮助我如何捕获可以存储和保存以供将来参考的失败屏幕截图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:28:09.113

将以下代码添加到 @AfterMethod (TestNG) 注释

```
@AfterMethod
public void closeBrowser(ITestResult result) throws IOException {
    if (!result.isSuccess()) {

        File imageFile = ((TakesScreenshot) driver)
                .getScreenshotAs(OutputType.FILE);
        String failureImageFileName = result.getMethod().getMethodName()+ new SimpleDateFormat("MM-dd-yyyy_HH-ss").format(new GregorianCalendar().getTime())
                + ".png";
        File failureImageFile = new File(failureImageFileName);
        FileUtils.moveFile(imageFile, failureImageFile);
    }
    driver.close();
    driver.quit();
} 
```

# javascript - Date.parse() 结果为 NaN

> ID：11516332
> 
> 赞同：12
> 
> 时间：2012-07-17T05:09:58.087
> 
> 标签：javascript, jquery, date

```
Date.parse(); 
```

我的[jsFiddle](http://jsfiddle.net/6aBYL/)工作正常，但`NaN`在`console.log()`输出中显示的我的 ide（Aptana 和 WebStorm）中运行它。

真的很困惑……以前有人有过这样的经历吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-17T05:16:30.907

**工作演示** [http://jsfiddle.net/7KfuM/](http://jsfiddle.net/7KfuM/)

更改`-`为`/`

好读：[Jquery Date.parse 在 Chrome 浏览器中返回 NaN？](https://stackoverflow.com/questions/7964922/jquery-date-parse-returning-nan-in-chrome-browser) **或** [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)

试试这个：

```
var firstDayTimestamp = Date.parse("2009/07/13 00:00:00" + "-0500") / 1000; 
```

希望这符合原因！`B-)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-14T09:10:16.903

日期应采用 IETF 日期语法（RFC2822 第 3.3 节）格式，例如“Mon, 25 Dec 1995 13:30:00 GMT”或“Mon, 25 Dec 1995 13:30:00 GMT+0430”。

阅读更多：[Date.parse()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse)

令人惊讶的是，对于当前 (2017) 版本的 IE (11.x) 和 FF (56.x) 也应该这样做，以便 Date.parse 正常工作。

# python - 导入示例 ^\d{3}-\d{4}$""

> ID：11516335
> 
> 赞同：0
> 
> 时间：2012-07-17T05:10:23.240
> 
> 标签：python

我发现了一个对我来说似乎很奇怪的例子：

```
import re
for test_string in ['955-1212', 'ILL-EGAL']:
if re.match(r'^\d{3}-\d{4}$', test_string):
    print test_string, 'is a valid US local phone number'
else:
    print test_string, 'rejected' 
```

输出为：955-1212 是有效的美国本地电话号码 ILL-EGAL 被拒绝

"^\d{3}-\d{4}$" 到底是什么，因为当我更改某个数字时，它会将输出更改为： 955-1212 denied ILL-EGAL denied

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:14:07.047

这是一个[正则表达式](http://docs.python.org/library/re.html)- 它意味着：

```
^      from the start of the line
\d     match any number
{3}    repeated exactly 3 times
-      followed by a dash
\d     followed by a number
{4}    repeated exactly four times
$      followed by the end of the line 
```

更改表达式将导致：

*   另一个可能匹配或不匹配 955-1212 的正则表达式
*   无效的正则表达式

[您可以在regular-expressions.info](http://www.regular-expressions.info/)等地方了解有关正则表达式的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:14:23.827

这是一个正则表达式。

`\d`匹配`0-9`，`{3}`匹配前一个模式的三个出现（so `\d{3}`is `\d\d\d`），`-`只是一个破折号，`\d{4}`就像`\d{3}`但还有一个`\d`。`^`和字符分别表示字符串的`$`开始和结束。

正则表达式或多或少是花哨的搜索和替换：[http ://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T05:14:46.157

`^\d{3}-\d{4}$`翻译为：

字符串必须以数字 ( `\d`) x 3 ( `{3}`) 开头，
后跟破折号 ( `-`)，
然后以数字 ( `\d`) x 4 ( `{4}`)结尾

您可以[在此处查看正则表达式模式](http://docs.python.org/library/re.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T05:15:10.627

它是一种[正则表达式](http://docs.python.org/library/re.html)，一种允许您表达文本模式的语言。python 库为您提供了测试字符串是否与正则表达式匹配的方法，并从该字符串中提取片段。

在这个特定的模式中：

*   `^`表示模式必须在字符串的开头匹配（不能跳过字符串开头的字符）。
*   `\d`表示一位数字（0 到 9 之间的一个字符）。** 下面的`{3}`意思是重复前面的`\d`三遍——所以匹配三位数。
*   `-`匹配 - 字符。
*   `\d`再次，匹配一个数字...... **以下`{4}`表示这次是四次。
*   `$`意味着模式必须在搅拌的末尾匹配（不能跳过字符串末尾的字符）。

因此，如果您将 3 或 4 更改为其他值，则该模式将匹配不同数量的数字，这就解释了为什么它无法匹配字符串“955-1212”。例如，如果您将 4 更改为 5，则字符串“955-12123”将匹配，但“955-1212”不匹配。

# json - 实现 Restful WCF OData 服务

> ID：11516336
> 
> 赞同：2
> 
> 时间：2012-07-17T05:10:30.803
> 
> 标签：json, wcf, odata, wcf-rest

我在我的项目中实现了 WCF OData 服务。现在我需要我的服务为我的客户返回 JsonResult。如何实现 Restful WCF OData 服务？或者是否有任何替代方法可以在我的服务中返回 JsonResult？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:37:19.163

OData 服务本身支持 JSON。因此，如果在 HTTP 请求标头中指定以下标头，您将始终获得 JSON

> 接受：应用程序/json

如果你无法控制这个，那么我建议你使用 $format 过滤器。

例如参见[http://odata.netflix.com/v2/Catalog/Genres](http://odata.netflix.com/v2/Catalog/Genres) ?$Format=json

[从 MSDN http://code.msdn.microsoft.com/DataServicesJSONP](http://code.msdn.microsoft.com/DataServicesJSONP)下载 ADO.NET 数据服务的 JSONp 和 URL 控制格式支持，并将 JSONPSupportBehavior 装饰器添加到您的 DataService 类，如下所示。

```
[JSONPSupportBehavior]
public class SomeService: DataService<ContextType>
{ 
```

另一种选择可能是构建 ASP.NET Web API。它是在 .NET Framework 上构建 RESTful 应用程序的理想平台。

# javascript - 当我在 jquery 中修改 HTML 时如何刷新对象？

> ID：11516342
> 
> 赞同：1
> 
> 时间：2012-07-17T05:11:31.160
> 
> 标签：javascript, jquery, html, dom

我有一个加载了 jQuery 内容的页面，其中一个 div 将是一个滑块

```
$('#slides').slides({
            preload: true,
            preloadImage: 'img/loading.gif',
            play: 6000,
            pause: 2500,
            hoverPause: true,
            slideSpeed: 1000,
            animationStart: function(current){
                $('.caption').animate({
                    bottom:-35
                },100);
            },
            animationComplete: function(current){
                $('.caption').animate({
                    bottom:0
                },200);
            },
            slidesLoaded: function() {
                $('.caption').animate({
                    bottom:0
                },200);
            }
        });
    }); 
```

现在，html的结构如下：

```
<div id"content">
   <div id="slider"></div>
</div> 
```

我已经使用 jquery 设置了我的页面，当用户点击一个链接时，它会将该页面的内容加载到`#content`

```
var homepage = $("#content").html();
$("#content").load("myContent.html"); 
```

如果用户回家，只需：

```
$("#content").html(homepage); 
```

但后来`$('#slides').slides();`不再起作用了。

我该如何解决？

[幻灯片JS](http://slidesjs.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T05:32:17.417

您可以使用`complete`from`.load()`来检查您的内容是否包含`#slider`在其中。如果是这样，请`slides`再次初始化您的插件。

```
var homepage = $('#content'),
options = {
    generateNextPrev: true,
    play: 1000
};
$('#slides').slides(options);

// Button click or something
$('#content').load('myContent.html', function(response, status, xhr) {
   if ($(response).find('#slider').length > 0) {
       $('#slides').slides(options);
   }
}); 
```

编辑：

我正在制作一个jsfiddle来演示它，但是jsfiddle有服务器问题，所以我做了一个codepen演示。[http://codepen.io/Vestride/pen/LicKd](http://codepen.io/Vestride/pen/LicKd)。再次调用插件对我有用（尽管我只是通过替换内容来模拟 ajax 请求`.html()`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:22:45.527

尝试这个，

将滑块放在一个函数中，

```
function SliderCode()
{

$('#slides').slides({
            preload: true,
            preloadImage: 'img/loading.gif',
            play: 6000,
            pause: 2500,
            hoverPause: true,
            slideSpeed: 1000,
            animationStart: function(current){
                $('.caption').animate({
                    bottom:-35
                },100);
            },
            animationComplete: function(current){
                $('.caption').animate({
                    bottom:0
                },200);
            },
            slidesLoaded: function() {
                $('.caption').animate({
                    bottom:0
                },200);
            }
        });
    });
} 
```

再次设置 hompage callslider 函数后，

```
$("#content").html(homepage);
SliderCode(); 
```

我没有测试代码。希望它会奏效。

# iphone - 如何在 iOS 上使用 AVMutableComposition 和 CALayers 将多个 CALayer 添加到视频文件

> ID：11516344
> 
> 赞同：3
> 
> 时间：2012-07-17T05:11:45.027
> 
> 标签：iphone, ios, avfoundation, calayer

我想按时间顺序依次添加多个。我可以使用此链接[在](https://stackoverflow.com/q/5997677/1450762)`CALayer`视频文件中添加一层。现在我的问题是如何将多个添加到视频文件中。`CALayer`

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T04:26:43.463

最直接的方法是将多个层捆绑成单个层。您必须添加说明以在某些时候添加它并在不需要时删除。像这样的东西：

```
CABasicAnimation *fadeAnimation = [CABasicAnimation animationWithKeyPath:@"opacity"];
fadeAnimation.fromValue = [NSNumber numberWithFloat:(float)!fadeIsIn];
fadeAnimation.toValue = [NSNumber numberWithFloat:(float)fadeIsIn];
fadeAnimation.additive = NO;
fadeAnimation.removedOnCompletion = NO;
fadeAnimation.beginTime = atTime;
fadeAnimation.duration = duration;
fadeAnimation.fillMode = kCAFillModeBoth;
[layer addAnimation:fadeAnimation forKey:nil]; 
```

在此示例中，您可以进行淡入/淡出（1.0 开始，0.0 基本上是淡出）。atTime 是您希望该图层开始显示/删除的时间，而持续时间是淡入淡出持续时间（因此，如果一些小数字 0.0001（从未尝试过 0.0（为什么？）），它不会淡入淡出，只是简单地剪切）。layer 是您希望在某个时候显示/删除的 CALayer。您显然需要调用此方法两次，一次用于淡入，第二次用于淡出。如果您有更好的解决方案，请告诉我！:) ps 只是注意到这是一个非常古老的问题！

# javascript - 一个 Javascript 函数中的错误导致其他函数停止工作

> ID：11516346
> 
> 赞同：0
> 
> 时间：2012-07-17T05:11:55.723
> 
> 标签：javascript, coldfusion

这是获取有关事物如何工作的信息的一般问题。如果有人需要更多解释，我可以发布一些示例代码。

我在 ColdFusion 8 中有一个充实的程序，其中包括大约 8 个 javascript 函数。如果一个称为 NW 的函数不起作用，可能是因为我丢失了一个大括号，那么在我修复错误之前，其他一些函数可能无法工作。我试图思考这些功能之间可能存在哪些联系。在函数调用 NW 的地方，我可以理解，如果 NW 损坏，它可能无法运行。但是，如果两者都从同一个元素调用，NW 用“onchange”调用，OtherFunction 用“onclick”调用，则会出现同样的问题，尽管两者都没有调用另一个，并且它们没有以任何其他方式连接。

有人可以向我解释“幕后”发生了什么吗？我不明白为什么这些单独的功能以这种方式交织在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:59:50.383

因为 JavaScript 是一种解释型语言，所以在运行代码之前不会发现“致命”的语法错误。它们还可以产生级联效应。

例如：

```
function nw(){

/* some code */

function otherFunction(){
 /* other code*/
} 
```

请注意，因为我错过了解释器的结尾大括号`function nw()`不会关闭`nw()`，这`otherFunction`是一个内的闭包`nw`，但是因为它没有用大括号关闭，所以它无法运行`nw`或现在假定为关闭。所以这两个功能都不起作用。

Coldfusion 还在某些页面上添加了自己的 JS，这会使进程更难调试。

希望这是相关的，但听起来像你正在经历的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:59:04.177

忘记关闭大括号会使您的所有 javascript 无效，直到他可以找到一个作为函数声明或条件语句需要两者：在您拥有有效的结构化代码之前，js 引擎不会查看内部代码。

如果您的 js 函数之间没有依赖关系，那么它可能中断的唯一原因是 javascript 语法中的错误。例如，如果您在函数中引用不存在的变量，它将在调用此特定函数时停止。所有其他的应该运行良好。此外，当某个函数在某个时间失败时，通常你所有的 js 代码都会在那之后停止工作。

希望它是有道理的，但提供更多细节需要查看代码......这是我对通用解释的尝试:-)

# git - 如何在 egit 中添加和编辑笔记

> ID：11516348
> 
> 赞同：4
> 
> 时间：2012-07-17T05:12:08.367
> 
> 标签：git, egit

有没有一种方法可以让我们通过 Egit 在提交中添加“注释”？
我似乎没有看到 EGit 的方法。如果提交上有注释，提交查看器会显示注释，但不能编辑、附加或添加/删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:44:11.017

似乎还没有。

[JGit](https://github.com/eclipse/jgit)中的[`jgit.api.AddNoteCommand`](https://github.com/eclipse/jgit/blob/master/org.eclipse.jgit/src/org/eclipse/jgit/api/AddNoteCommand.java)API在[Egit](https://github.com/eclipse/egit)的任何地方都没有使用。

# c# - 自定义消息框中的操作回调

> ID：11516349
> 
> 赞同：1
> 
> 时间：2012-07-17T05:12:09.363
> 
> 标签：c#, silverlight, callback

这是我的代码中定义的函数

```
 public static void ConfirmMessage(string title, string msg, Action callback)
    {
        DialogWindow dlg = new DialogWindow();
        dlg.Title = title;
        dlg.Message.Content = msg;
        dlg.OKButton.Unloaded += delegate { if (callback != null) { callback(); } };
        dlg.Show();
    } 
```

如何调用此函数以便它执行在我的代码中定义的自定义函数？有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T06:52:37.413

delegate`System.Action`代表不带参数且不返回值的函数。所以，你会像这样使用你的方法：

```
void myFunction()
{
    //your code
}

//then...

ConfirmMessage("Dialog caption", "Dialog text", myFunction); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:16:17.270

这是一个简单的例子：

```
ConfirmMessage("Hello", "World", () => { /* your code here */ }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T05:20:23.017

dlg.OKButton.Unloaded += (s1,e1)=> { if (callback != null) { callback(); };

# c - C 从什么时候开始使用可变长度数组？

> ID：11516351
> 
> 赞同：1
> 
> 时间：2012-07-17T05:12:24.483
> 
> 标签：c, arrays, memory-management, dynamic-memory-allocation

请告诉我为什么以下代码甚至在 a 上运行`strict C-99 compiler`：

```
#include <stdio.h>
int main()
{
    int n;
    scanf("%d",&n);
    int a[n];
    a[1]=10;
    a[2]=5;
    printf("%d %d",a[1],a[2]);
} 
```

变量声明必须出现在 C 中的任何其他语句之前，对吧？如果我们想要一个动态分配的数组，我们必须使用内存分配函数，`malloc()`但它是如何获取和输入整数并分配该大小的数组的呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T05:14:13.537

这称为[可变长度数组](http://en.wikipedia.org/wiki/Variable-length_array)，并受 C99 标准支持。
这在 C89 或任何版本的 C++ 中都不起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T05:15:52.450

事实上，这段代码中有两种机制在 C90 中是不允许的，但在 C99 中是允许的。第一个是可变大小数组声明，使用`a[n]`. 二是声明与代码混合，`a`一行代码后声明。

我发现[David Tribble 的这份清单](http://david.tribble.com/text/cdiffs.htm#C90-mixed-decl-stmt)很方便。它专注于 C++，但也为您提供了关于 C90 和 C99 之间差异的一个很好的概述。

> 如果我们想要一个动态分配的数组，我们必须使用像 malloc() 这样的内存分配函数

显然你已经知道了，但还是值得一提：`malloc()`用于在堆上分配内存。您示例中的数组是在堆栈上分配的，这是一种不同的机制。有关差异的出色解释，请参[见此答案](https://stackoverflow.com/a/80113/1380680)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T05:15:09.007

该功能称为[可变长度数组](http://en.wikipedia.org/wiki/Variable-length_array)，为了具体回答您的问题，它们是在 C99 标准中引入的（可能一些 C 编译器之前有它们，但任何符合 C99 的编译器都*必须*有它们）。

您会发现很多建议您不要使用它们的 SO 答案。使用`malloc()`，有一个定义的内存分配接口失败：调用返回`NULL`。使用 VLA，没有这样的接口：分配失败时会发生什么是未定义的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T05:17:12.227

C99 允许在您的示例中使用可变长度数组。

[这](http://www.drdobbs.com/the-new-cwhy-variable-length-arrays/184401444)是一篇关于它的文章，解释了更多

# paypal - 如何使用直接付款设置贝宝定期付款的结束日期？

> ID：11516352
> 
> 赞同：2
> 
> 时间：2012-07-17T05:12:25.153
> 
> 标签：paypal, paypal-sandbox, paypal-subscriptions, recurring-billing

我正在使用直接付款的定期付款（[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_WPRecurringPayments#id08669F0705Z](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_WPRecurringPayments#id08669F0705Z)）

我将参数设置如下并且工作正常，

```
$firstName = urlencode('MyName');//urlencode('customer_first_name');
$lastName = urlencode('MySurname');//urlencode('customer_last_name');
$creditCardType = urlencode('VISA');//urlencode('customer_credit_card_type');
$creditCardNumber = urlencode('455743552XXXXXXXX');//urlencode('customer_credit_card_number');
$expDateMonth = '07';//'cc_expiration_month';
$expDateYear = urlencode('2017');//urlencode('cc_expiration_year');
$padDateMonth = urlencode(str_pad($expDateMonth, 2, '0', STR_PAD_LEFT));
$amount =  urlencode('5');// urlencode('example_payment_amuont');
$startDate = urlencode("2012-07-17T0:0:0");
$endDate = urlencode("2012-07-21T0:0:0");

$billingPeriod = urlencode("Day");              // or "Day", "Week", "SemiMonth", "Year"
$billingFreq = urlencode("1");                      // combination of this and billingPeriod must be at most a year
$currencyID = urlencode("USD"); 

$nvpStr = "&CREDITCARDTYPE=$creditCardType".
          "&ACCT=$creditCardNumber".
          "&EXPDATE=$padDateMonth$expDateYear".
          "&FIRSTNAME=MyFirstName".
          "&LASTNAME=MyLastName".
          "&PROFILESTARTDATE=$startDate".
          "&PROFILEENDDATE=$endDate".     // **not working**
          "&BILLINGPERIOD=$billingPeriod".
          "&BILLINGFREQUENCY=$billingFreq".
          "&AMT=$amount&DESC=Test Recurring Payment";

$httpParsedResponseAr = PPHttpPost('CreateRecurringPaymentsProfile', $nvpStr); 
```

现在我的问题是没有设置结束日期，所以如果有人有想法，请回复。 ***我想要设置结束日期的参数。***

谢谢，基兰夏尔马。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:01:50.637

刚刚找到答案

它的“ **TOTALBILLINGCYCLES** ”将设置要发生的周期数。

如上所述，我使用 $billingPeriod = urlencode("Day"); // 周期是每天 $billingFreq = urlencode("1"); // 频率为 1。所以，每天都会收到付款

**"&TOTALBILLINGCYCLES=15" // 现在，当我使用此参数时，循环发生 15 次，因此在 15 天内收取 15 次付款。**

# iphone - 如何从公钥的指数和模数创建 SeckeyRef 并在 SecKeyEncrypt 方法中使用

> ID：11516355
> 
> 赞同：3
> 
> 时间：2012-07-17T05:12:39.053
> 
> 标签：iphone, encryption, rsa, public-key-encryption

Anyone please help in Creating `SecKeyRef`from Exponent and Modulus being my `Public exponent`= **010001** and `Public Modulus`= **008903fb6d15f352ed3b45add3216f632f7139954a5631337aba7d645ed38482e3a810b4db26aab4d1df58c147230f0c75631a3dd0554b50de44e79f4fcf205c89fd3f80e0ff8d16c2e9f56ed3ab177953d54c9c30357d04e677cedd9912906ef8a046d7b0185b7f2022a8e435b0c6ecaef93f089fc3aa3f3677550b5d842046c7** and i want to use this SecKeyEncrypt as public key

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:07:41.167

解决了 `NSData *publicTag=[self PublicKeyItems];`生成密钥对中的问题并调用方法
尝试在文件中导入 BasicEncodingRules.h 和 .m

```
- (NSData *)PublicKeyItems
{
NSString *exp = @"010001";
NSLog(@"Publickeyexp -%@",exp);
NSData *publickeyexpdata= [self stringasdata:exp];
NSLog(@"publickeyexpdata = %@",publickeyexpdata);
NSString *mod = @"008903fb6d15f352ed3b45add3216f632f7139954a5631337aba7d645ed38482e3a810b4db26aab4d1df58c147230f0c75631a3dd0554b50de44e79f4fcf205c89fd3f80e0ff8d16c2e9f56ed3ab177953d54c9c30357d04e677cedd9912906ef8a046d7b0185b7f2022a8e435b0c6ecaef93f089fc3aa3f3677550b5d842046c7";
NSLog(@"Publickeymod -%@",mod);
NSData *publickeymoddata= [self stringasdata:mod];
NSLog(@"publickeymod = %@",publickeyexpdata);

NSMutableArray *publicarray = [[NSMutableArray alloc] init];
[publicarray addObject:publickeyexpdata];
[publicarray addObject:publickeymoddata];
NSData *testData = [publicarray berData];
NSLog(@"testdata = %@",testData);
NSMutableArray *testArray2 = [testData berDecode];
NSLog(@"testarray = %@",testArray2);
//STAssertEqualObjects(testArray, testArray2,
                    // @"Big items decode failed");

NSData *testData2 = [testArray2 berData];
 NSLog(@"PublicKeyData using Publickeyitems = %@",testData2);
return testData2;
}
-(NSData *)stringasdata:(NSString *)command {
command = [command stringByReplacingOccurrencesOfString:@" " withString:@""];
command = [command stringByReplacingOccurrencesOfString:@"<" withString:@""];
command = [command stringByReplacingOccurrencesOfString:@">" withString:@""];
NSLog(@"command= %@",command);
NSMutableData *commandToSend= [[NSMutableData alloc] init]; unsigned char whole_byte;
int len = [command length];
int n = len/2;
char byte_chars[3] = {'\0','\0','\0'}; int i;
for (i=0; i < n; i++) {
    byte_chars[0] = [command characterAtIndex:i*2]; byte_chars[1] = [command         characterAtIndex:i*2+1]; whole_byte = strtol(byte_chars, NULL, 16); [commandToSend appendBytes:&whole_byte length:1];
}
// [commandToSend setLength:[commandToSend length]-1];
return commandToSend; 

} 
```

# ruby-on-rails - Rails 3.2.6：develop.log 文件出现“无法访问日志文件”错误

> ID：11516358
> 
> 赞同：0
> 
> 时间：2012-07-17T05:13:03.270
> 
> 标签：ruby-on-rails, logging, ruby-on-rails-3.2, railscasts

这似乎是一个常见问题，但我似乎无法通过谷歌搜索等找到解决方案。

我刚刚创建了一个新的 Rails 3.2.6 应用程序并将其配置为使用 PostgreSQL 数据库进行本地开发。我遵循了这个[RailsCast](http://railscasts.com/episodes/342-migrating-to-postgresql)并且能够正确安装和设置所有内容。

但是，每当我尝试执行任何 rails generate 或 rake 命令（`rails generate model`等`rake db:migrate`）时，都会收到以下与我的`development.log`文件相关的错误：

```
Rails Error: Unable to access log file. Please ensure that /Users/****/projects/rails_projects/rails_app/log/development.log exists and is chmod 0666\. The log level has been raised to WARN and the output directed to STDERR until the problem is fixed. 
```

我看到了这些其他 stackoverflow 问题/答案，但它们并不完全适合我的情况：

*   [Rails：无法访问日志文件](https://stackoverflow.com/questions/632592/rails-unable-to-access-log-file)<- 这又回到了 Rails 2.2 的时代
*   [Ruby on Rails 设置：无法访问日志文件](https://stackoverflow.com/questions/8929919/ruby-on-rails-setup-unable-to-access-log-file)<- 这是关于使用 Apache 的生产环境。我在本地开发环境中。

除了那个错误，我的应用程序运行良好。此外，如果我创建一个具有所有默认值的新 Rails 应用程序，我不会收到此错误。

任何建议/提示将不胜感激。或者，如果您需要有关我的本地环境的更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:48:24.087

您是否验证了日志文件存在并且您可以访问它？我过去做过一些类似的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T05:23:37.420

我基本上按照错误消息的建议做了`chmod 0666`，并对`development.log`文件做了一个：

```
$> cd /Users/****/projects/rails_projects/rails_app/log/  
$> chmod 0666 development.log 
```

之后一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-17T03:34:18.103

检查一下`sudo`你的环境是否在 linux 上，例如，我在尝试运行迁移时遇到了那个错误 - `rake db:migrate`，所以我使用`sudo rake db:migrate`了它，这很有效，可能是因为它试图咨询 development.log 时的 rake 没有正确的权限或类似的东西。

# android - Android：多次仅获取列表视图中的最后一项

> ID：11516364
> 
> 赞同：0
> 
> 时间：2012-07-17T05:13:50.400
> 
> 标签：android, json, checkbox, android-listview, httpclient

我正在尝试从服务器获取`listview`使用中的项目`json`，为此我制作了我的自定义适配器。但是如果服务器上有 6 个项目，它会在列表视图中显示最后一个项目 6 次，并且我已经给出了`checkbox`列表中每个项目的前面，以获取选中项目的 id。这是我的代码：

```
btnclub.setOnClickListener(new OnClickListener() {

        ArrayList<Integer> checkedList = new ArrayList<Integer>();

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Dialog d = new Dialog(TennerTextActivity.this);
            d.setContentView(R.layout.slctevnt);

            ListView list = (ListView) d.findViewById(R.id.list_mulitple);
            HashMap<String, String> list_map = new HashMap<String, String>();

            // Initialize CATEGORY_LIST HERE
            try {
                client = new DefaultHttpClient();
                HttpGet get = new HttpGet(
                        "http://dhklashfgsdhgsdg");
                HttpResponse rp = client.execute(get);
                String result = EntityUtils.toString(rp.getEntity());
                System.out.println("----------------------- result: "
                        + result);

                result = "{\"root\": " + result + "}";
                JSONObject root = new JSONObject(result);
                JSONArray sessions = root.getJSONArray("root");

                for (int i = 0; i < sessions.length(); i++) {
                    HashMap<String, String> map2 = new HashMap<String, String>();
                    JSONObject e = sessions.getJSONObject(i);
                    list_map.put("category_name", e.getString("name"));
                    list_map.put("category_id", e.getString("id"));
                    list_category.add(list_map);

                }
            } catch (Exception e) {
                e.printStackTrace();
            }

            list.setAdapter(new MyAdapter());
            d.show();
            Button btndone = (Button) d.findViewById(R.id.button_multiple);
            btndone.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    for(int i = 0 ; i < checkedList.size() ; i++) {
                        clubs = "," + String.valueOf(checkedList.get(i));
                    }
                    clubs = clubs.substring(1);
                    System.out.print(clubs);
                    Log.e("club", clubs);
                }
            }); 
```

我的适配器是：

```
class MyAdapter extends BaseAdapter {

            @Override
            public int getCount() {
                // TODO Auto-generated method stub
                return list_category.size();
            }

            @Override
            public Object getItem(int position) {
                // TODO Auto-generated method stub
                return null;
            }

            @Override
            public long getItemId(int position) {
                // TODO Auto-generated method stub
                return 0;
            }

            @Override
            public View getView(final int position, View convertView,
                    ViewGroup parent) {

                if (convertView == null) {
                    LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
                    convertView = inflater.inflate(R.layout.dialoglist,
                            null);
                    TextView item = (TextView) convertView
                            .findViewById(R.id.dialogitem);
                    item.setText(list_category.get(position).get(
                            "category_name"));

                }
                CheckBox check = (CheckBox)convertView.findViewById(R.id.checkBox_list);
                check.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                    @Override
                    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                        // TODO Auto-generated method stub
                        if(isChecked) {
                            int temp = Integer.parseInt(list_category.get(position).get("category_id"));
                            checkedList.add(temp);
                            Object[] tempArray = checkedList.toArray();
                            Arrays.sort(tempArray);
                            checkedList.clear();
                            for(int i = 0 ; i < tempArray.length ; i++) {
                                checkedList.add((Integer) tempArray[i]);
                            }
                        }
                    }
                });

                return convertView;
            }

        } 
```

请告诉我哪里做错了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:23:49.813

我认为您必须像这样更改 for 循环

```
 for (int i = 0; i < sessions.length(); i++) {
                        HashMap<String, String> map2 = new HashMap<String, String>();
 HashMap<String, String> list_map = new HashMap<String, String>();

                        JSONObject e = sessions.getJSONObject(i);
                        list_map.put("category_name", e.getString("name"));
                        list_map.put("category_id", e.getString("id"));
                        list_category.add(list_map);

                    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:25:35.357

**问题**在下面一行

```
 list_map.put("category_name", e.getString("name"));
                    list_map.put("category_id", e.getString("id"));
                    list_category.add(list_map); 
```

您将`category_name`id 放入`list_map`并将其添加到`list_category`. 在这里，您在 list_category 中添加 list_map 实例。并且因为 map 的键（即 category_name 和 id ）是相同的，

*它只能存储与一个键对应的一个值，因此它存储这些键的最后插入值。*

当您使用新数据更新 list_map 时，实例本身会发生变化），这就是它显示最后一个 list_map 数据的 6 次的原因。

**解决方案**：您可以在这里做什么，仅使用 new 关键字在循环中初始化 list_map，因此每次插入 list_category 时都会插入新实例。或者你可以使用两个 d 数组。而不是哈希图。

```
HashMap<String, String> list_map = new HashMap<String, String>(); 
```

*PS：我在您的代码中指出了一个问题，这导致数据重复，其他 SO 成员也可能存在其他问题。*

**编辑：** 替换您的以下代码

```
for(int i = 0 ; i < checkedList.size() ; i++) {
                        clubs = "," + String.valueOf(checkedList.get(i));
                    }
                    clubs = clubs.substring(1); 
```

像下面这样

```
 StringBuilder sb = new StringBuilder();
for(int i = 0 ; i < checkedList.size() ; i++) {
                       sb.add(String.valueOf(checkedList.get(i))+",");
                    }
                 sb.deleteCharAt(sb.lastIndexOf(",")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T05:15:57.887

`getView`像这样改变方法

```
if (convertView == null) 
{
    LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
    convertView = inflater.inflate(R.layout.dialoglist,null);
}

TextView item = (TextView) convertView.findViewById(R.id.dialogitem);
item.setText(list_category.get(position).get("category_name")); 
```

# extjs - Extjs4 中的自定义分页参数

> ID：11516380
> 
> 赞同：1
> 
> 时间：2012-07-17T05:15:11.943
> 
> 标签：extjs, extjs4, paging

在分机 4 中，无论何时呼叫

```
store.loadPage(1) 
```

分机似乎设置了分页参数`start`并`limit`在我的请求中。

但是我需要`page`并`pageSize`作为我的请求参数的键。这就是服务器处理分页的方式，我几乎无法控制它。

有没有办法可以使用这样的自定义分页参数而不是 Ext 提供的默认参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T05:26:45.803

这在文档中有所介绍：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Ajax](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Ajax)

见页面参数/limitParam/startParam

要防止发送特定参数，请将名称设置为未定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T06:04:45.740

正如埃文回答的那样，但有一个具体的例子：

```
Ext.define('MyApp.store.Requests', {
    extend:'Ext.data.Store',
    model:'MyApp.model.Request',
    autoLoad:false,
    remoteSort:true,
    proxy:{
        type:'ajax',
        url:'request/list.json',
        //override default param names
        startParam:"offset",
        limitParam:"max",
        sortParam:"sort",
        simpleSortMode:true, //required for directionParam to be used
        directionParam:"order",
        reader:{
            type:'json',
            root:'data'
        }

    },
    pageSize:25
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-20T05:19:17.293

这对我有用，在商店的代理字段中添加了以下两个参数：

```
startParam : "startIndex",
limitParam : "limitCount" 
```

# android - 如何让android应用程序每小时运行一次

> ID：11516382
> 
> 赞同：0
> 
> 时间：2012-07-17T05:15:45.173
> 
> 标签：android, service, background, autorun

你好，我正在尝试在android中制作一个自动运行的应用程序，

示例：读取通话记录的应用程序

1.  我的应用程序在后台运行，它每小时运行一次以获取过去一小时的所有通话记录。

    谁能帮我建立一个这样的应用程序？

感谢您的回答

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T05:45:02.487

使用`AlarmManager`.

此处的代码： [如何每小时执行一项任务？](https://stackoverflow.com/questions/10630365/how-to-execute-one-task-every-hour)

在这里： [AlarmManager - 如何在每小时的顶部重复警报？](https://stackoverflow.com/questions/3127351/alarmmanager-how-to-repeat-an-alarm-at-the-top-of-every-hour)

[AlarmManager - 如何在每小时的顶部重复警报？](https://stackoverflow.com/questions/3127351/alarmmanager-how-to-repeat-an-alarm-at-the-top-of-every-hour)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T05:19:57.093

Android 的[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)可以执行您想做的工作。

# c# - 显示进度条或等待消息

> ID：11516384
> 
> 赞同：0
> 
> 时间：2012-07-17T05:15:52.813
> 
> 标签：c#, windows-mobile, windows-mobile-6.5

我想在 windows mobile 中的任何进程上显示进度条/等待消息。我尝试显示简单的文本“请稍候......”并写了 Application.DoEvents() 但它没有显示它也没有显示进度条。

我需要遵循什么方法或其他方法在 Windows 移动设备中显示进度条吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:18:49.430

使用 Timer 并在您的项目中放置一个静态字符串。

当您不想显示文本时，请将字符串值设置为 null。

当计时器每 200 毫秒左右触发一次时，更新您的消息。

```
private static string message = null;

private void timer_Tick(object sender, EventArgs e) {
  if (String.IsNullOrEmpty(message)) {
    // clear your form values
  } else {
    // set your form values
  }
} 
```

当然，如果你想要一个进度条，你也可以这样做。只需为您的进度条制作静态 int 值，并在上面的代码片段中的计时器滴答时更新您的控件。

这也可以通过线程和事件处理程序来完成，但[计时器（点击查看代码示例）](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer%28v=vs.80%29.aspx)是最简单的方法。

**更新：**

如果您将其作为内联代码执行（我从您的评论中了解到），请尝试以下操作：

```
private void Demo(int max) {
  label1.Text = String.Empty;
  progressBar1.Value = 0;
  progressBar1.Maximum = max;
  progressBar1.Refresh();
  do {
    progressBar1.Value++;
    progressBar1.Refresh();
    label1.Text = String.Format("{0}", progressBar1.Value);
    label1.Refresh();
  } while (progressBar1.Value < progressBar1.Maximum);
} 
```

看看上面的代码是否满足您的需求。

**注意：**哦，摆脱*Application.DoEvents()*。这是一个邪恶的 VB 创建，它鼓励开发人员不知道发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T16:44:36.653

您正在运行的进程阻塞了 UI 线程？

尝试在线程池上运行繁重的进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-14T10:38:01.240

尝试这个

```
 void StartLoadingPanel()
    {
        this.BeginInvoke((Action)delegate()
        { 
            Cursor.Current = Cursors.WaitCursor;
            loadingPanelContainer.Visible = true;

        });
    } 
```

其中 loadingPanelContainer 包含要显示的文本。

# c# - 返回与该项目相关的所有记录都具有特定条件的项目

> ID：11516387
> 
> 赞同：1
> 
> 时间：2012-07-17T05:16:02.003
> 
> 标签：c#, sql, sql-server, linq, entity-framework

请考虑这种情况：

我有一张这样的桌子：

```
ID              City            Status
--------------------------------------
 1               1                1
 2               1                1
 3               1                1
 4               2                1
 5               2                0
 6               3                1
 7               3                1
 8               3                1
 9               3                1
 10              4                3
 11              4                1
 12              4                0 
```

我想返回与该城市相关的所有记录都具有的 Citis，`Status=1`并且如果其中一个记录`Status<>1`将该城市排除在 reslut 集中。在这种情况下，我想返回城市：1、3。

如何使用 Sql Query 或 LINQ 查询来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T05:27:54.710

像这样的事情应该这样做。

林克：

```
var citiesToExclude = context.Table
    .Where(t => t.Status != 1)
    .Select(t => t.City);
var cities = context.Table
    .Where(t => t.Status == 1)
    .Where(t => !citiesToExclude.Contains(t.City))
    .Select(t => t.City)
    .Distinct()
    .ToList(); 
```

SQL：

```
SELECT City
FROM [Table]
WHERE Status == 1
  AND City NOT IN (SELECT City FROM [Table] WHERE Status <> 1)
GROUP BY City 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T05:31:33.257

您可以简单地使用`GROUP BY`and`HAVING`条件聚合：

```
SELECT   city
FROM     tbl
GROUP BY city
HAVING   COUNT(CASE WHEN status <> 1 THEN 1 END) = 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T05:44:04.837

其他方式

```
select distinct city 
from city C1
 where city=1 and not exists(select * from city C2 where C1.city=C2.city 
 and isnull(Status,0)<>1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T05:31:55.330

```
SELECT tbl.city
FROM 
(SELECT c.city, count(status=1) cnt1, count() cnt2
FROM city c
GROUP BY c.city) AS tbl
WHERE tbl.cnt1=tbl.cnt2 AND tbl.cnt1>0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T05:47:35.473

你为什么不能只用这个？该函数似乎没有聚合，因此`having`不需要

```
select city 
from [table]
where status = 1
and city not in 
(select city from table where status <> 1)
group by city; 
```

除非我误解了这个问题？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T05:53:57.410

这看起来像是 LINQ 的[group](http://msdn.microsoft.com/en-us/library/bb384063.aspx)子句的工作：

```
var cities = from t in table
             group t by t.City into grp
             where grp.Select(g => g.Status).All(s => s == 1)
             select g.Key; 
```

# c++ - 具有继承的未初始化指针对象

> ID：11516391
> 
> 赞同：0
> 
> 时间：2012-07-17T05:16:28.290
> 
> 标签：c++, pointers, initialization, undefined-behavior

我正在使用未初始化的指针对象来访问成员函数。它有效，我知道它是如何工作的。但是当我用 B 派生该类并尝试访问该成员函数时，它会出现分段错误。有人可以解释为什么它显示出两种不同的行为吗？

以下是程序：如果我评论第 29 行，它可以工作，但没有它会失败。

```
#include <iostream>

using namespace std;

class A
{
    int no;
public:
void printml(int i)
    {
        no = i;
        cout << "in base: value"<<no;

    }
 };
class B:public A
    {
        public:
        void printdl()
        {
            cout << "in derived" ;
        }
    };

int main()
{
    A *ptr;
    B *ptr1;
    ptr->printml(1);
    ptr1->printml(1);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T05:18:57.357

取消引用未初始化的指针是*未定义的行为*。为什么你认为它不应该崩溃？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T07:15:57.997

当您调用函数时，会发生以下事情 1) 编译器检查对象的类型（不是内容）并调用该类型的成员函数。2) 它将 this 指针（指向对象本身的指针）作为第一个参数传递给成员函数 3) 它隐式地使用 this 指针来调用成员变量。

考虑到上述几点，在您的情况下，当您不在成员函数中使用成员变量时，不使用此指针，这就是它不会崩溃的原因，而当您使用成员变量时，它会崩溃。

这仍然被认为是未定义的行为，并且在未初始化的情况下不得使用指针对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T05:25:56.050

`->`当您第一次对未初始化的指针或空指针使用取消引用运算符 () 时，您的代码很可能会产生分段错误。这是未定义的行为。这意味着如果它对你有用，那只是运气，或者说运气不好，因为你被编译器误导，寻找错误。

使用这样的指针：

```
A *ptr = new A();
ptr->printml(1); 
```

# jquery - 如何自定义 JQPlot 周围的黑色边框

> ID：11516393
> 
> 赞同：4
> 
> 时间：2012-07-17T05:16:48.137
> 
> 标签：jquery, jquery-plugins, jqplot

如何自定义 JQPlot 中图形周围的黑色边框？我广泛搜索了 CSS 文件，但找不到任何东西。

[更新]

如果您不理解我的意思，请查看此图片：http: [//img339.imageshack.us/img339/5796/jqplot.png](http://img339.imageshack.us/img339/5796/jqplot.png)

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T12:51:48.480

查看网格[drawBorder](http://www.jqplot.com/docs/files/jqplot-core-js.html#Grid.drawBorder)、[borderColor](http://www.jqplot.com/docs/files/jqplot-core-js.html#Grid.borderColor)和[shadow](http://www.jqplot.com/docs/files/jqplot-core-js.html#Grid.shadow)的 jqplot 选项：

```
var plot1 = $.jqplot ('container', [[3,7,9,1,4,6,8,2,5]], {grid:{borderColor:'transparent',shadow:false,drawBorder:false,shadowColor:'transparent'}}); 
```

```
$(document).ready(function(){
    var plot1 = $.jqplot ('container', [[3,7,9,1,4,6,8,2,5]], {grid:{borderColor:'transparent',shadow:false,drawBorder:false}});
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jqPlot/1.0.9/jquery.jqplot.js"></script>

<div id="container"></div>
```

# ios - 添加到子视图后，UIButton 返回为 UIView？

> ID：11516396
> 
> 赞同：1
> 
> 时间：2012-07-17T05:17:14.227
> 
> 标签：ios, uiview, uibutton

将 UIButton 添加为子视图后，我无法访问它。当我尝试调整视图上的按钮位置时，我总是得到一个 UIView 而不是 UIButton 只有我添加的第一个按钮。当我使用 isKindOfClass 时，其余的返回为 UIButton。这是一个代码片段如下

首先，我从 viewDidload 调用 createTiles 方法将按钮添加为子视图，然后在检测到设备方向后通过调用 adustLandscapeTiles/Portrait 方法调整按钮布局。

我不确定为什么会这样？?

```
// Adding buttons to view 
- (void)createTiles
{    
   for(int i=0;i<[self.contentList count];i++)
  {
       UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
       [button addTarget:self action:@selector(buttonSelection:)forControlEvents:UIControlEventTouchDown];
       [button setTitle:[ [contentList objectAtIndex:i] valueForKey:@"nameKey"]  forState:UIControlStateNormal];
        button.tag=i;

        [self.view insertSubview:button atIndex:0];
        NSLog(@"adding %i %@",i , [ [contentList objectAtIndex:i] valueForKey:@"nameKey"]);
        [button release];

   }
  }

- (void)adustLandscapeTiles
{
    for (int row = 0; row < Portrait_TILE_ROWS; ++row)
    {
        for (int col = 0; col < Portrait_TILE_COLUMNS; ++col)
        {
            int index = (row * Portrait_TILE_COLUMNS) + col;      
            CGRect frame = CGRectMake(LandScape_TILE_MARGIN + col * (LandScape_TILE_MARGIN + LandScape_TILE_WIDTH),
                                  LandScape_TILE_MARGIN + row * (LandScape_TILE_MARGIN + LandScape_TILE_HEIGHT),
                                  LandScape_TILE_WIDTH, LandScape_TILE_HEIGHT);
  /// check subview is a button      
  NSLog(@"index: %i tag : %i Is of type UIButton?: %@",index,[[self.view viewWithTag:index] tag], ([ [self.view viewWithTag:index] isKindOfClass: [UIButton class]])? @"Yes" : @"No");

        /// Only the first button added with tag zero return UView instead of UIButton ??
            UIButton *tmb= (UIButton *)[self.view viewWithTag:index];
           if([tmb isKindOfClass:[UIButton class]]) //isKindOfClass
            {   
                [  [self.view viewWithTag:index] setFrame:frame];

            }

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:31:01.710

当我为您的问题添加更强大的解决方案时，我注意到您过度释放`button`. 你不应该叫`[button release]`你不拥有它！但这不是你唯一的问题......

如果您没有为 a 分配标签，`UIView`它将有一个零标签，因此如果您的视图有一些您没有分配标签的其他子视图，您可能会得到其中一个。尝试为您的标签添加一些偏移量，例如：

```
// Somewhere early in your .m file
const NSInteger kButtonTagOffset 256

// In your createTiles
button.tag = (kButtonTagOffset + i); 
```

显然，您在检索瓷砖时也需要添加此偏移量。

话虽如此，如果有人将您的类子类化，或者即使您稍后编辑，您当前的方法可能会被更有经验的程序员称为*脆弱的方法，您可能会分配冲突的标签并导致一些问题。*您可能会考虑更*强大*的解决方案。

既然您真正想要做的是维护为可以通过索引访问的按钮数组，那么为什么不完全不依赖标签就这样做呢？

所以在你`UIViewController`添加一个`NSMutableArray`来保存你的按钮。

```
// In your .h or with private methods:
@property (nonatomic, retain) NSMutableArray* buttons;

// At the top of your @implementation
@synthesize buttons;

// A modified createTiles 
// Adding buttons to view 
- (void)createTiles
{     
    self.buttons = nil; /* in case viewDidUnload id not do this. */
    self.buttons = [[[NSMutableArray alloc] init] autorelease]; 
    for(int i=0;i<[self.contentList count];i++)
    {
        UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        [button addTarget:self    
                   action:@selector(buttonSelection:)
         forControlEvents:UIControlEventTouchDown];
        [button setTitle:[[contentList objectAtIndex:i] valueForKey:@"nameKey"]  
                forState:UIControlStateNormal];

        [self.view insertSubview:button atIndex:0];
        NSLog(@"adding %i %@", i, 
                        [[contentList objectAtIndex:i] valueForKey:@"nameKey"]);
        [self.buttons insertObject:button atIndex:0];
    }
}

- (void)adustLandscapeTiles
{
    for (int row = 0; row < Portrait_TILE_ROWS; ++row)
    {
        for (int col = 0; col < Portrait_TILE_COLUMNS; ++col)
        {
            int index = (row * Portrait_TILE_COLUMNS) + col;    
            UIView* buttonView = [self.buttons objectAtIndex:index];

            CGRect frame = CGRectMake(LandScape_TILE_MARGIN + col *    
                                 (LandScape_TILE_MARGIN + LandScape_TILE_WIDTH),
                               LandScape_TILE_MARGIN + row *    
                                 (LandScape_TILE_MARGIN + LandScape_TILE_HEIGHT),
                               LandScape_TILE_WIDTH, 
                               LandScape_TILE_HEIGHT);
            // check subview is a button      
            NSLog(@"index: %i Is of type UIButton?: %@", index, 
                    ([ [buttonView viewWithTag:index] isKindOfClass: [UIButton class]])?
                        @"Yes" : @"No");

            UIButton *tmb= (UIButton *)buttonView;
            if([tmb isKindOfClass:[UIButton class]]) //isKindOfClass
            {   
                [buttonView setFrame:frame];
            }
        }
    }
} 
```

# javascript - 在 Facebook 图形 API 调用中，使用 Javascript 的 IE（所有版本）不支持跨浏览器调用

> ID：11516398
> 
> 赞同：0
> 
> 时间：2012-07-17T05:17:25.383
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

`https://graph.facebook.com/oauth/access_token?
client_id=APP_ID& client_secret=APP_SECRET& grant_type=fb_exchange_token& fb_exchange_token=EXISTING_ACCESS_TOKEN` 我开发了一个 facebook 应用程序，因为删除了 offline_access，我只是转而使用上面的代码，它在 FF、Chrome 但不是 IE 所有版本中都很好用。当我将代码放在浏览器地址栏中时，它会返回预期的结果，当我尝试通过我的网站调用时，它会返回

**{"readyState":0,"status":0,"statusText":"Error: Access is denied.\r\n"}** IE 不支持跨浏览器请求我应该怎么做才能在 IE 中工作 请帮助一些人我试过“$.support.cors = true;” 但没有变化，请帮助我提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:30:17.223

在 client_secret 之前有一个空格。

# c++ - 从按位或组合确定原始常量

> ID：11516399
> 
> 赞同：2
> 
> 时间：2012-07-17T05:17:29.487
> 
> 标签：c++, bit-manipulation, bitwise-or

假设我只有两个正在设置的标志（bCold 和 bHot）。我发现所有可能的组合都应该相等。那么我怎样才能从下面确定原始（或兼容的）常量是什么？

```
When bCold and bHot are both turned ON = 0x4100
When bCold and bHot are both turned OFF = 0x8200

If bCold is ON and bHOT is OFF =  0x8100
If bCold is OFF and bHOT is ON =  0x4200 
```

知道了以上内容，我应该将 bCold 和 bHot 设置为相等吗？

```
#define bCold  ((ULONG)0x???)
#define bHot   ((ULONG)0x???)

// Turn them on sometime later
long lCONFIG_FLAGS = bCold | bHOT; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:38:41.880

* * *

假设这`0bXXXXXXXY`意味着二进制，其中 Y 是*较低*有效位。

* * *

**假设结果是按位运算设置的：**

您的数字由两个字节组成。右边（不那么重要）字节总是 0b00000000，因为所有数字都以 00 结尾。让我们看看左边（更重要）字节：

> 当*bCold*和*bHot*都打开时 = `0x4100`=`0b01000001`
> 
> 当*bCold*和*bHot*都关闭时 = `0x8200`=`0b10000010`
> 
> 如果*bCold*为 ON 而*bHOT*为 OFF = `0x8100`=`0b10000001`
> 
> 如果*bCold*为 OFF 而*bHOT*为 ON = `0x4200`=`0b01000010`

从这里你可以看到最左边的两个位设置*bHot*，最右边的两个位设置*bCold*（右 = 不太重要）。

```
So:

0b01000000 = *bHot* ON -= `0x40`

0b00000001 = *bCold*  ON  = `0x01`

0b10000000 = *bHot* OFF = `0x80`

0b00000010 = *bCold*  OFF = `0x02` 
```

现在，添加正确的字节，我们说它总是为零，你得到

```
*bHot* ON = 0x4000, OFF = 0x8000
*bCold*  ON = 0x0100, OFF = 0x0200 
```

结果由按位“或”设置

* * *

**假设结果是通过简单地添加数字来设置的：**

（这是错误的，因为您的帖子名称包含按位或提及，但还是让我们尝试一下只是为了好玩）一个简单的等式将向我们展示这些数字：

```
*bCold* OFF: 0x0200, ON:  0x0100
*bHot*  OFF: 0x8000, ON:  0x4000 
```

结果可以通过简单地添加数字来设置，例如`0x0200 + 0x8000 = 0x8200`两个都为OFF。

* * *

**结论**

如您所见，所以最终结果是：

```
*bCold* OFF: 0x0200, ON: 0x0100

*bHot*  OFF: 0x8000, ON: 0x4000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:45:46.760

```
C: ON H: ON = 0100 0001 0000 0000
C:OFF H:OFF = 1000 0010 0000 0000
C: ON H:OFF = 1000 0001 0000 0000
C:OFF H: ON = 0100 0010 0000 0000 
```

按位异或交替值以获得有趣的位，然后按位和这些位获得实际掩码：

```
C:OFF  OR C: ON = 1000 0010 0000 0000 XOR 1000 0001 0000 0000 = 0000 0011 0000 0000
C:OFF           = 1000 0010 0000 0000 AND 0000 0011 0000 0000 = 0000 0010 0000 0000
C: ON           = 1000 0001 0000 0000 AND 0000 0011 0000 0000 = 0000 0001 0000 0000 
```

所以C使用第一个字节的后半部分，0x0100在掩码上，0x0200在掩码外

```
H:OFF  OR H: ON = 1000 0010 0000 0000 XOR 0100 0010 0000 0000 = 1100 0000 0000 0000
H:OFF           = 1000 0010 0000 0000 AND 1100 0000 0000 0000 = 1000 0000 0000 0000
H: ON           = 0100 0010 0000 0000 AND 1100 0000 0000 0000 = 0100 0000 0000 0000 
```

所以 H 使用第一个字节的前半部分，0x4000 是掩码，0x8000 是掩码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T05:25:57.283

鉴于

```
When bCold and bHot are both turned OFF = 0x8200
If bCold is ON and bHOT is OFF =  0x8100 
```

bHot 可能是前半字节，因为它保持不变，而 bCold 是后半字节，因为它发生了变化。这样你得到：

```
bHot  is ON:  0x4000
bCold is ON:  0x0100
bHot  is OFF: 0x8000
bCold is OFF: 0x0200 
```

可能存在其他解决方案，我没有检查过。**更新：**是的，确实存在其他解决方案：将变量分配给四个语句“bCold is OFF”等，并将语句写为四个方程的系统。你会发现通过将上面的内容调整为 [1 -1 1 -1] 的倍数，你会得到无限多的解决方案。例如，这也满足方程：

```
Using + to add:                      Using XOR to add:
bHot  is ON:  0x4100                 bHot  is ON:  0x4100
bCold is ON:  0x0000                 bCold is ON:  0x0000
bHot  is OFF: 0x8100                 bHot  is OFF: 0x8100
bCold is OFF: 0x0100                 bCold is OFF: 0x0300 
```

# c# - 如何开发这个依赖于另一个 ListView 的 ListView？

> ID：11516402
> 
> 赞同：0
> 
> 时间：2012-07-17T05:17:41.957
> 
> 标签：c#, asp.net, listview

我是一名新的 ASP.NET 开发人员，我正在尝试开发一个简单的测验引擎，它允许系统管理员使用两个 ListViews 创建测验。第一个 ListView 用于插入测验标题和描述，第二个 ListView 用于插入问题、答案（不同数量的答案）、正确答案、答案说明、问题顺序。

我有以下数据库设计：

```
Quiz Table: QuizID, Title, Description
Question Table: QuestionID, Question, QuestionOrder, AnswerExplanation
QuestionImage Table: ID, QuestionID, URL
Answer Table: AnswerID, Answer
QuizContent Table: ID, QuizID, QuestionID, AnswerID 
```

我让我对将第二个 ListView 与数据绑定感到困惑的要求：

1.  每个测验都有不同数量的问题，每个问题都有不同数量的可能答案。例如，在其中一个测验中，我有两个问题。在第一个问题中，我有四个可能的答案，第二个问题将是 True or False 问题。
2.  有些问题可能有一些图像。

这个 ListView 应该支持 CRUDE 操作。**那么该怎么做呢？**

我的第一个 ListView 的 ASP.NET 代码：

```
<asp:ListView ID="ListView1" runat="server" DataKeyNames="QuizID" 
                DataSourceID="SqlDataSource1" InsertItemPosition="LastItem" >

                <EditItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="UpdateButton" ImageUrl="Images/icons/update24.png" Width="20px" runat="server" CommandName="Update" />

                            <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/cancel324.png" Width="20px" runat="server" CommandName="Cancel" />
                        </td>
                        <td>
                            <asp:TextBox ID="TitleTextBox" runat="server" Text='<%# Bind("Title") %>' />
                        </td>
                        <td>
                            <asp:TextBox ID="DescriptionTextBox" runat="server" 
                                Text='<%# Bind("Description") %>' />
                        </td>
                    </tr>
                </EditItemTemplate>
                <EmptyDataTemplate>
                    <table id="Table1" runat="server" style="">
                        <tr>
                            <td>
                                No data was returned.</td>
                        </tr>
                    </table>
                </EmptyDataTemplate>
                <InsertItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="InsertButton" ImageUrl="Images/icons/create 2 48.png" Width="20px" runat="server" CommandName="Insert" />

                            <asp:ImageButton ID="CancelButton" ImageUrl="images/clear3.png" Width="20px" runat="server" CommandName="Cancel" />
                        </td>

                        <%--<td>
                            &nbsp;</td>--%>
                        <td>
                            <asp:TextBox ID="TitleTextBox" runat="server" Text='<%# Bind("Title") %>' />
                        </td>
                        <td>
                            <asp:TextBox ID="DescriptionTextBox" runat="server" 
                                Text='<%# Bind("Description") %>' />
                        </td>
                    </tr>
                </InsertItemTemplate>
                <ItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" Width="20px" runat="server" CommandName="Delete" />

                            <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit224.png" Width="20px" runat="server" CommandName="Edit" />

                            <asp:ImageButton ID="SelectButton" ImageUrl="images/select.png" Width="20px" runat="server" CommandName="Select" />
                            <%--<asp:Button ID="SelectButton" runat="server" CommandName="Select" Text="Select" />--%>
                        </td>
                        <%--<td>
                            <asp:Label ID="QuizIDLabel" runat="server" 
                                Text='<%# Eval("QuizID") %>' />
                        </td>--%>
                        <td>
                            <asp:Label ID="TitleLabel" runat="server" Text='<%# Eval("Title") %>' />
                        </td>
                        <td>
                            <asp:Label ID="DescriptionLabel" runat="server" 
                                Text='<%# Eval("Description") %>' />
                        </td>
                    </tr>
                </ItemTemplate>
                <LayoutTemplate>
                    <div ><table id="thetable" width="97%" cellpadding="0px" cellspacing="0px" style="margin:0px 0px 0px 0px; border:2px solid #003366; font-size:13px; font-weight:bold;">
                        <thead>
                            <tr style="background-color:#C6D7B5;">
                                <th style="border-bottom:2px solid #003366; ">...</th>
                                <th style="border-bottom:2px solid #003366; ">Title</th>
                                <th style="border-bottom:2px solid #003366; ">Description</th>
                            </tr>
                       </thead>
                       <tbody><tr id="itemPlaceholder" runat="server"></tr></tbody>
                    </table></div>
                </LayoutTemplate>
                <SelectedItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="DeleteButton" ImageUrl="images/delete24.png" Width="20px" runat="server" CommandName="Delete" />

                            <asp:ImageButton ID="EditButton" ImageUrl="images/edit224.png" Width="20px" runat="server" CommandName="Edit" />
                        </td>
                        <%--<td>
                            <asp:Label ID="QuizIDLabel" runat="server" 
                                Text='<%# Eval("QuizID") %>' />
                        </td>--%>
                        <td>
                            <asp:Label ID="TitleLabel" runat="server" Text='<%# Eval("Title") %>' />
                        </td>
                        <td>
                            <asp:Label ID="DescriptionLabel" runat="server" 
                                Text='<%# Eval("Description") %>' />
                        </td>
                    </tr>
                </SelectedItemTemplate>
            </asp:ListView>
            <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                ConnectionString="<%$ ConnectionStrings:QuizSysDBConnectionString %>" 

                SelectCommand="SELECT * FROM [Quiz]" 
                DeleteCommand="DELETE FROM [Quiz] WHERE [QuizID] = @QuizID" 
                InsertCommand="INSERT INTO [Quiz] ([Title], [Description]) VALUES (@Title, @Description)" 

                UpdateCommand="UPDATE [Quiz] SET [Title] = @Title, [Description] = @Description WHERE [QuizID] = @QuizID">
                <DeleteParameters>
                    <asp:Parameter Name="QuizID" Type="Int32" />
                </DeleteParameters>
                <InsertParameters>
                    <asp:Parameter Name="Title" Type="String" />
                    <asp:Parameter Name="Description" Type="String" />
                </InsertParameters>
                <UpdateParameters>
                    <asp:Parameter Name="Title" Type="String" />
                    <asp:Parameter Name="Description" Type="String" />
                    <asp:Parameter Name="QuizID" Type="Int32" />
                </UpdateParameters>
            </asp:SqlDataSource> 
```

我的第二个 ListView 代码：

```
<div align="center">
        <asp:ListView ID="ListView2" runat="server" DataSourceID="SqlDataSource2" 
            DataKeyNames="QuestionID" InsertItemPosition="LastItem">

            <EditItemTemplate>

                <tr style="background-color: #FFCC66;color: #000080;">
                    <td>
                        <asp:ImageButton ID="UpdateButton" ImageUrl="Images/icons/update24.png" Width="20px" runat="server" CommandName="Update" />

                        <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/cancel324.png" Width="20px" runat="server" CommandName="Cancel" />
                    </td>
                    <%--<td>
                        <asp:Label ID="QuestionIDLabel1" runat="server" 
                            Text='<%# Eval("QuestionID") %>' />
                    </td>--%>
                    <td>
                        <asp:TextBox ID="QuestionTextBox" runat="server" Text='<%# Bind("Question") %>' CssClass="textbox" />
                    </td>
                    <td>
                        <asp:TextBox ID="Answer1TextBox" runat="server" Text='<%# Bind("Answer") %>' CssClass="textbox" />
                    </td>
                    <td>
                        <asp:TextBox ID="CorrectAnswerTextBox" runat="server" 
                            Text='<%# Bind("CorrectAnswer") %>' CssClass="textbox" />
                    </td>
                    <td>
                        <asp:TextBox ID="AnswerExplanationTextBox" runat="server" 
                            Text='<%# Bind("AnswerExplanation") %>' CssClass="textbox" />
                    </td>
                    <td>
                        <asp:TextBox ID="QuestionOrderTextBox" runat="server" 
                            Text='<%# Bind("QuestionOrder") %>' CssClass="textbox" />
                    </td>
                </tr>
            </EditItemTemplate>

            <EmptyDataTemplate>
                <table id="Table2" runat="server" 
                    style="background-color: #FFFFFF;border-collapse: collapse;border-color: #999999;border-style:none;border-width:1px;">
                    <tr>
                        <td>
                            No data was returned.</td>
                    </tr>
                </table>
            </EmptyDataTemplate>

            <InsertItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="ImageButton1" ImageUrl="images/insert.png" Width="20px" runat="server" CommandName="Insert" />

                        <asp:ImageButton ID="CancelButton" ImageUrl="images/clear3.png" Width="20px" runat="server" CommandName="Cancel" />
                    </td>
                    <%--<td>
                        &nbsp;</td>--%>
                    <td>
                        <asp:TextBox ID="QuestionTextBox" runat="server" Text='<%# Bind("Question") %>' CssClass="textbox" />
                    </td>
                    <td>
                        <asp:TextBox ID="AnswerTextBox" runat="server" Text='<%# Bind("Answer1") %>' CssClass="textbox" />
                    </td>
                    <td>
                        <%-- to hide the bollon when mouse out, just add onmouseout="BalloonPopupControlBehavior.hidePopup();  --%>
                        <asp:TextBox ID="CorrectAnswerTextBox" runat="server" Text='<%# Bind("CorrectAnswer") %>' CssClass="textbox"/>
                    </td>
                    <td>
                        <asp:TextBox ID="AnswerExplanationTextBox" runat="server" Text='<%# Bind("AnswerExplanation") %>' CssClass="textbox" />
                    </td>
                    <td>
                        <asp:TextBox ID="QuestionOrderTextBox" runat="server" Text='<%# Bind("QuestionOrder") %>' CssClass="textbox" />
                    </td>
                </tr>

                <%-- --%>
                <ajaxtoolkit:balloonpopupextender ID="BalloonPopupExtender1" runat="server"
                                            TargetControlID="CorrectAnswerTextBox" BalloonPopupControlID="pnlBallon"
                                            Position="BottomRight" BalloonStyle="Cloud" BalloonSize="Small" 
                                            CustomCssUrl="ballonPopupStyle" 
                    CustomClassName="oval" UseShadow="true" ScrollBars="Auto" 
                                            DisplayOnMouseOver="false" DisplayOnFocus="true" 
                    DisplayOnClick="true" >
                </ajaxToolkit:BalloonPopupExtender>

                <asp:Panel ID="pnlBallon" runat="server">
                    Please enter the letter of the correct answer A, B, C, D.
                </asp:Panel>

            </InsertItemTemplate>

            <ItemTemplate>
                <tr style="background-color: #FFFBD6;color: #333333;">
                    <td>
                        <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" Width="20px" runat="server" CommandName="Delete" />

                            <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit224.png" Width="20px" runat="server" CommandName="Edit" />
                    </td>
                    <td>
                        <asp:Label ID="QuestionLabel" runat="server" Text='<%# Eval("Question") %>' />
                    </td>
                    <td>
                        <asp:Label ID="Answer1Label" runat="server" Text='<%# Eval("Answer") %>' />
                    </td>
                    <td>
                        <asp:Label ID="CorrectAnswerLabel" runat="server" 
                            Text='<%# Eval("CorrectAnswer") %>' />
                    </td>
                    <td>
                        <asp:Label ID="AnswerExplanationLabel" runat="server" 
                            Text='<%# Eval("AnswerExplanation") %>' />
                    </td>
                    <td>
                        <asp:Label ID="QuestionOrderLabel" runat="server" 
                            Text='<%# Eval("QuestionOrder") %>' />
                    </td>
                </tr>
            </ItemTemplate>

            <LayoutTemplate>
                <div><table id="thetable" width="97%" cellpadding="0px" cellspacing="0px" style="margin:0px 0px 0px 0px; border:2px solid #003366; font-size:13px; font-weight:bold;">
                        <thead>
                            <tr style="background-color:#C6D7B5;">
                                <th style="border-bottom:2px solid #003366; ">...</th>
                                <th style="border-bottom:2px solid #003366; ">Question</th>
                                <th style="border-bottom:2px solid #003366; ">Answer</th>
                                <th style="border-bottom:2px solid #003366; ">Correct Answer</th>
                                <th style="border-bottom:2px solid #003366; ">Answer Explanation</th>
                                <th style="border-bottom:2px solid #003366; ">Question Order</th>
                                <th style="border-bottom:2px solid #003366; ">Image</th>
                            </tr>
                       </thead>
                       <tbody><tr id="itemPlaceholder" runat="server"></tr></tbody>
                </table></div>

            </LayoutTemplate>
            <SelectedItemTemplate>
                <tr style="background-color: #FFCC66;font-weight: bold;color: #000080;">
                    <td>
                        <asp:ImageButton ID="DeleteButton" ImageUrl="images/delete.png" Width="20px" runat="server" CommandName="Delete" />
                        <%--<asp:Button ID="DeleteButton" runat="server" CommandName="Delete" 
                            Text="Delete" />--%>
                        <asp:ImageButton ID="EditButton" ImageUrl="images/edit.png" Width="20px" runat="server" CommandName="Edit" />
                        <%--<asp:Button ID="EditButton" runat="server" CommandName="Edit" Text="Edit" />--%>
                    </td>
                    <td>
                        <asp:Label ID="QuestionLabel" runat="server" Text='<%# Eval("Question") %>' />
                    </td>
                    <td>
                        <asp:Label ID="Answer1Label" runat="server" Text='<%# Eval("Answer") %>' />
                    </td>
                    <td>
                        <asp:Label ID="CorrectAnswerLabel" runat="server" 
                            Text='<%# Eval("CorrectAnswer") %>' />
                    </td>
                    <td>
                        <asp:Label ID="AnswerExplanationLabel" runat="server" 
                            Text='<%# Eval("AnswerExplanation") %>' />
                    </td>
                    <td>
                        <asp:Label ID="QuestionOrderLabel" runat="server" 
                            Text='<%# Eval("QuestionOrder") %>' />
                    </td>
                </tr>
            </SelectedItemTemplate>
        </asp:ListView>
        </div>
        </ContentTemplate>
        </asp:UpdatePanel>

        <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
            ConnectionString="<%$ ConnectionStrings:QuizSysDBConnectionString %>" 
            SelectCommand="SELECT     dbo.Question.Question, dbo.Question.QuestionOrder, dbo.Question.AnswerExplanation, dbo.Answers.Answer, dbo.QuestionImage.URL
                            FROM         dbo.Question INNER JOIN
                                                  dbo.QuizContent ON dbo.Question.QuestionID = dbo.QuizContent.QuestionID INNER JOIN
                                                  dbo.Answers ON dbo.QuizContent.AnswerID = dbo.Answers.AnswerID INNER JOIN
                                                  dbo.Quiz ON dbo.QuizContent.QuizID = dbo.Quiz.QuizID LEFT OUTER JOIN
                                                  dbo.QuestionImage ON dbo.Question.QuestionID = dbo.QuestionImage.QuestionID
                            WHERE     (dbo.QuizContent.QuizID = @QuizID)">
            <SelectParameters>
                <asp:ControlParameter ControlID="ListView1" Name="QuizID" 
                    PropertyName="SelectedValue" Type="Int32" />
            </SelectParameters>
        </asp:SqlDataSource>
    </div> 
```

我现在的问题是如何让管理员能够按照他的意愿输入具有不同数量答案的问题。**有人可以帮我吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:38:55.683

我一直在考虑这个和原型设计，我认为修改设计会更好地为您服务。与其尝试在两个列表视图中一页一页地做所有事情，不如模拟一个工作流并将其分布在多个页面上。在第一页上使用您的第一个 listView，它实现了您在 Quiz(zes) 表上所需的 CRUD 操作。对其进行编码，以便在选择特定测验时，通过将 QuizID 作为 URL 中的参数传递，将工作推进到新页面 - 示例：

> Response.Redirect("Questions.aspx?quiz_id=1024");

或作为会话变量 - 示例：

> 会话[“quiz_id”] = 1024；Response.Redirect("Questions.aspx");

在这一点上，直到工作流程的后期才需要它，因为您没有在问题或答案表中使用 QuizID，但它稍后会派上用场。以与测验相同的方式为您的 listView 编写问题，然后继续回答并重复。

在管理员给出问题和答案后，将他们引导到一个集成页面（或多个页面），现在您终于可以使用您一直携带的 QuizID。或者，您可以提供一个小列表框来选择测验，每个 listBoxItem 的文本是标题和/或描述，值是 QuizID。

无论哪种方式，此时您都可以为问题和答案添加列表框以获取可用内容，并在它们旁边添加列表框以及所选内容。添加左右箭头按钮以前后移动两组框的选项。

此时，向页面添加一个保存按钮，并在单击事件上，使用 QuizID 变量以及来自所选问题和答案列表框的 QuestionID 和 AnswerID 对 QuizContents 表执行插入操作。如果您允许在这些列表框中的任何一个中使用多选模式，则必须循环此操作。

最后，有一个确认页面，他们可以在其中通过 QuizID 进行搜索，并一目了然地查看所有相关问题和答案。

# android - Android中的数据库检索查询

> ID：11516408
> 
> 赞同：0
> 
> 时间：2012-07-17T05:18:42.673
> 
> 标签：android, database

在我的应用程序中，我有 1 个表格布局，其中显示来自数据库的数据。实际上，我所做的是我的屏幕上有 1 个微调器选项，第一次加载我的应用程序时，我有 5 个核心值，而第 6 个微调器选项值是编辑。如果用户从微调器中选择编辑，我允许用户编辑微调器值的 5 个核心值。我更新微调器中的编辑值，用户可以从中选择 1 个选项，并使用其他一些条目（如价格、项目）用户可以将其保存在数据库中。这是我的场景，我现在想要的是从数据库中检索数据分别在从微调器中选择的每个值下。我如何查询数据库。请帮助我..我想我已经清楚地解释了我的问题..我准备提供更多详细信息。

下面是我的微调图片链接：

[*http://www.freeimagehosting.net/12rgk*](http://www.freeimagehosting.net/12rgk)

从哪个用户可以选择 1 个选项，如果他选择编辑，这意味着我允许他编辑微调器值。

这是我的数据库结构：

[http://www.freeimagehosting.net/e2vbp](http://www.freeimagehosting.net/e2vbp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:39:40.887

当您创建数据库时，您是否在微调器中将选项设置为表的列名？如果你这样做了，那么你可以使用类似的查询

```
public Cursor getOptions()
{
    return db.query(Tablename,new String[] {col1,col2,col3,
            col4,col5},null,null,null,null,null);
} 
```

我应该指出，由于您的问题模棱两可，您可能需要提供更多详细信息。

# sqlite - SQLite Titanium 语法错误

> ID：11516419
> 
> 赞同：0
> 
> 时间：2012-07-17T05:19:44.590
> 
> 标签：sqlite, titanium, appcelerator, titanium-mobile

以下 SQL 代码在 SQLite 管理器和其他 SQLite 系统中运行良好，但是当我在 Titanium 中使用它时，我得到一个“未捕获的语法错误：意外字符串”。如果我的语法错误，应该如何为 Titanium 编码？

```
 SELECT Date, Content
    FROM MYDATABASE
    WHERE strftime('%m%d', Date) = strftime('%m%d', date('now')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:30:41.893

您是否将您的表称为 MYDATABASE？您是否正在逐步调试调试器并确认`var rs = db.execute("SELECT Date, Content FROM MYDATABASE WHERE strftime('%m%d', date) = strftime('%m%d', date('now')) ");`

在我的 Titanium Mobile 项目中，我首先定义了数据库：

```
var db = Ti.Database.open('myDb');
db.execute('CREATE TABLE IF NOT EXISTS [MYDATABASE](id INTEGER PRIMARY KEY AUTOINCREMENT, Date DATE, Content TEXT)');
db.close(); 
```

然后我从函数调用中执行了这段代码

```
var db = Ti.Database.open('myDb');
var myresult = db.execute("INSERT INTO MYDATABASE(Date, Content) VALUES (date('now'), '12345')");
myresult = db.execute("SELECT Date, Content FROM MYDATABASE WHERE strftime('%m%d', Date) = strftime('%m%s', date('now')) ");
Ti.API.info('myresult: ' + myresult.fieldByName('Content')); 
```

此代码在调试窗口中成功为我返回 myresult: 12345。您可能需要向我们提供源代码的重要部分，以便我们可以看到代码的流程。给我们碎片是行不通的。

不幸的是，我不得不从另一台计算机上测试它，希望在这里重新输入它不会出错”

# .net - 为 .net 寻找数据驱动的安全框架

> ID：11516422
> 
> 赞同：1
> 
> 时间：2012-07-17T05:19:51.130
> 
> 标签：.net, data-driven, security-framework

我正在开发一种 CRM 系统，它需要一个基于数据的安全**机制**，而不是基于角色的安全机制。

例如，系统中的某个用户可以是`view`所有客户，`update`他自己的客户。

所以，基于角色的安全在这里不会有帮助，因为所有的销售人员都有相同的角色：`sales_user_role`.

我需要通过在每个**客户**行中都有一个字段来区分它们：`sales_owner_id`

```
if(client.salesOwnerId.Equales(httpSession["user_id"]){
   delete...
   update...

} 
```

在上述情况下，`client`对象是具有 salesOwnerId 的客户实体。
由于上面是意大利面条代码，我想在数据驱动的安全框架中进行。

我正在使用 c# .NET4、MVC3、WCF、Nhibernate 和 Spring 进行依赖注入。

（我看到 rhino security 可以做到这一点，但没有记录，学习资源也很少）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T22:56:59.363

您仍然可以通过经典的基于角色的授权来实现您想要的，例如`RoleProvider`.

例如，您可能具有以下角色：

```
ViewOwnClients
ViewAllClients
UpdateOwnClients
UpdateAllClients
DeleteOwnClients
DeleteAllClients 
```

您仍然需要代码来测试所有者 ID，例如：

```
if ((User.IsInRole("UpdateAllClients") ||
    (User.IsInRole("UpdateOwnClients") && client.OwnerId = currentUserId))
{
    ...
} 
```

# java - LdapContextSource 关闭连接

> ID：11516427
> 
> 赞同：0
> 
> 时间：2012-07-17T05:20:20.017
> 
> 标签：java, ldap

我在用

```
LdapContextSource ldapContextSource = new LdapContextSource(); 
```

在设置 url、userDn 和密码后创建连接。

我需要关闭此连接，但找不到任何方法。我怎样才能关闭它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:28:41.467

LdapContextSource 充当创建上下文实例的工厂。您需要做的是关闭从该类返回的上下文（DirContext）（即getReadOnlyContext()、getReadWriteContext() 等）。

或者，您可以将需要关闭的上下文传递给静态实用程序方法**org.springframework.ldap.support.LdapUtils.closeContext(DirContext)**。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:04:22.697

Ldap 每次执行任何操作时都会自行关闭其上下文。所以没有必要关闭上下文。

# asp.net - 如何会话以在其他页面中显示数据

> ID：11516429
> 
> 赞同：0
> 
> 时间：2012-07-17T05:20:40.070
> 
> 标签：asp.net, session

我有一些文本框。用户需要在文本框中输入数据。完成后，他们将单击提交按钮。然后，它将被定向到“review.aspx”页面。在 review.aspx 页面中，该页面将在标签中显示他们在上一页中插入的数据。这里有人知道怎么做吗？谢谢。

这是我停下来的地方

```
 protected void Button2_Click(object sender, EventArgs e)
{
    Session["brand"] = DropDownList1.SelectedItem.Text;
    Session["model"] = TextBox1.Text;
    Session["plate"] = TextBox2.Text;
    Session["color"] = TextBox3.Text;
    Session["year"] = TextBox4.Text;
    Session["service"] = TextBox5.Text;

    Response.Redirect "Review.aspx"; 
```

如何捕获要在评论页面中显示的会话。我使用标签来显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T06:52:01.380

**如何使用会话在其他页面上显示数据（初学者示例）**

step1：取两个webforms webform1 & webform2。

步骤2：在webform1上拖动一个texbox和一个按钮并在按钮单击事件中编写以下代码-

```
Session["name"] = TextBox1.Text;

Response.Redirect("webform2.aspx"); 
```

step3：在webform2上拖一个标签，在该页面的页面加载事件中写下如下代码（即：webform2）。

```
Label1.Text = Session["name"].ToString(); 
```

结论：在 webform1 上的文本框中输入的名称/数据将显示在下一页上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:22:11.430

会话数据类型是对象，我们必须将其转换为字符串类型，以便我们可以将其存储在字符串变量中。

```
string brand =    Session["brand"].ToString();
string  model =(string) Session["model"];
string  plate =(string)  Session["plate"];
string  color =(string)  Session["color"];
string  year =(string)  Session["year"];
string  service =(string)  Session["service"]; 
```

将您的标签文本属性设置为等于这些变量

```
Label1.Text = brand+""+model+""+plate+""+year+""+service; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T05:24:43.120

通过以下方式将 session["ID"] 对象转换为字符串：

```
 string brand=Session["brand"].ToString();
    string model=Session["model"].ToString(); 
    string plate=Session["plate"].ToString();
    string color=Session["color"].ToString();
    string year=Session["year"].ToString();
    string service=Session["service"].ToString(); 
```

并在相应的标签中设置值：

```
lblBrand.Text=brand;
lblModel.Text=model;
lblPlate.Text=plate;
lblColor.Text=color;
lblYear.Text=year;
lblService.Text=service; 
```

# javascript - Javascript：通过引用传递对象

> ID：11516430
> 
> 赞同：4
> 
> 时间：2012-07-17T05:20:52.377
> 
> 标签：javascript, pass-by-reference, javascript-objects

在我的应用程序中，当我将数据传递给不同的对象时，我不确定我是否在复制数据。就像一个例子，看看下面的代码：

```
var DataStore = function(data) {
    this.data = data; // <-- typeof data === 'object'
}

var Controller = function() {
    var dataStore = new DataStore({foo: 'bar'});
    var plugin = new Plugin(dataStore.data);
}

var Plugin = function(data) {
   this.data = data;
}

var app = new Controller(); 
```

当我创建插件时，它从 dataStore 传递数据属性。然后将其分配给插件内部的一个属性。请记住，传递的数据是一个对象，我的问题是，这是在内存中创建两个变量还是插件中的数据属性引用了 DataStore 对象中的属性？

如果它在分配后不保留引用，我如何将 DataStore 传递到 Plugins 并在本地保留对它的引用？或者我是否需要将 DataStore 作为全局变量保留在我的应用程序范围内并从插件全局引用它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T05:25:17.723

两者`dataStore.data`和都`plugin.data`引用同一个对象 - 在这些“类”中的任何一个中改变对象（因为缺乏更好的术语）将导致对象对它们都发生突变（因为它们都持有对同一个对象的引用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T05:39:30.647

函数参数在 JS 中总是通过引用传递。当您将对象作为参数传递时，传递的实际上是*指向*该对象在内存中的位置的指针。如果您尝试覆盖引用本身，则原始对象不会发生任何事情，但是如果您更改任何对象属性的值，则原始对象将被修改。

前任：

```
function f1(_x) {
    _x = 5;
}

function f2(_y) {
    _y.name = 'Hello';
}

var x = 10;
f1(x);
console.log(x); // no change to x

var y = {name: 'Tom'};
f2(y);
console.log(y.name); // y.name is now Hello 
```

# java - Android 屏幕操纵杆问题

> ID：11516431
> 
> 赞同：4
> 
> 时间：2012-07-17T05:20:52.290
> 
> 标签：java, android, multi-touch, joystick

因此，我正在尝试使用屏幕上的操纵杆构建游戏，该操纵杆可以在屏幕上移动位图。但是当我向任何方向按住操纵杆并保持在那里时，位图也将停止移动。只有当我移动操纵杆时，位图才会移动。基本上我希望能够按住操纵杆在左边的位置，让位图向左移动，直到我放手。代码中的其他所有内容都有效。有什么建议么？

```
public boolean onTouch(View v, MotionEvent event) { 
        if (event.getAction() == MotionEvent.ACTION_DOWN)
            _dragging = true;
        else if (event.getAction() == MotionEvent.ACTION_UP)
            _dragging = false;

        _touchingPoint = new Point();

        if (_dragging) {
            // get the pos
            int x = (int) event.getX();
            int y = (int) event.getY();
            _touchingPoint.x = x;
            _touchingPoint.y = y;

            double a = _touchingPoint.x - initx;
            double b = _touchingPoint.y - inity;
            controllerDistance = Math.sqrt((a * a) + (b * b));

            if (controllerDistance > 75) {
                a = (a / controllerDistance) * 75;
                b = (b / controllerDistance) * 75;
                _touchingPoint.x = (int) a + initx;
                _touchingPoint.y = (int) b + inity;
            }

            bitmapPoint.x += a * .05;
            bitmapPoint.y += b * .05;

        } else if (!_dragging) {
            // Snap back to center when the joystick is released
            _touchingPoint.x = initx;
            _touchingPoint.y = inity;
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T11:02:07.910

试试[这个](https://github.com/zerokol/JoystickView)它是 Android 屏幕操纵杆的开源 api。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T06:35:27.390

这是因为我只有在 onTouch 方法中增加位图位置的代码。当屏幕被触摸但不移动时，未注册事件。下面的代码应该在 onTouch 方法之外。

```
bitmapPoint.x += a * .05;
bitmapPoint.y += b * .05; 
```

# ruby-on-rails - 在 Windows 7 中安装和开发 Ruby 的指南

> ID：11516434
> 
> 赞同：1
> 
> 时间：2012-07-17T05:21:36.453
> 
> 标签：ruby-on-rails, ruby, gem

有人可以向我指出一本综合手册（最好是一本书），它会给我在 Windows 环境中设置和使用 ruby​​ 的基本、分步说明吗？

我完全是 Ruby、gems 和 Rails 的菜鸟。我是否有可能获得有关如何在 Windows 中使用 Ruby 制作 Web 应用程序的全面指导？

到目前为止，我已经读到 ruby​​Installer 和 Bash 是在 Windows 中使用 ruby​​ 的好方法。因此，包含这些工具将是一个非常受欢迎的奖励！

到目前为止，我最大的困难是简单地设置 bash，这样我就可以安装 gem 并开始针对它们编写应用程序（再次，我是一个完全的菜鸟！）

另外，什么文本编辑器/IDE 最适合我编写代码？

我想要一份关于安装 Ruby/gems 和制作 Ruby-on-Rails 应用程序的 AZ 指南。

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:35:01.570

好吧，我个人建议您在 Mac 或 Linux 机器上开发 Ruby on Rails 应用程序。但如果你真的想在 Windows 上安装它，可以使用 Ruby 的一键式安装程序。

[http://rubyinstaller.org/](http://rubyinstaller.org/)

安装好之后，就可以通过安装自带的命令提示符来安装gems了。但是，如果您想快速开始使用 Ruby on Rails，我建议您尝试使用 rails 安装程序。

[http://railsinstaller.org/](http://railsinstaller.org/)

有很多不错的 Ruby 初学者书籍：

[学习编程](https://rads.stackoverflow.com/amzn/click/com/0976694042)

*   一个非常好的和写得很好的关于 Ruby 编程的教程。本书适合那些想要重新了解编程并想要很好地介绍 Ruby 基本特性的人。

[使用 Ruby 编程](https://rads.stackoverflow.com/amzn/click/com/1934356085)

*   这本书也称为 PickAxe 书，为 Ruby 提供了完整的指南和参考。

对于 Rails：

[Ruby on Rails 3 教程](https://rads.stackoverflow.com/amzn/click/com/0321743121)

*   一个完美的分步教程和介绍使用 Ruby on Rails 的测试驱动开发 (TDD)。它还涵盖了有用的工具，例如 GIT（版本控制系统）和使用 Heroku 的部署。

[使用 Rails 进行敏捷 Web 开发](https://rads.stackoverflow.com/amzn/click/com/1934356166)

*   本书将引导您完成一个 Rails 项目并深入研究 Ruby on Rails。

至于文本编辑器，我不推荐笨重或昂贵的 IDE，尤其是当您刚刚开始时。我建议您尝试免费且轻量级的[notepad++](http://notepad-plus-plus.org/)，或者您可以尝试具有免费评估副本的[sublime text 2](http://www.sublimetext.com/2)，它是一个非常好的编辑器，看起来像 Mac 版的 TextMate。

# java - 使用 Log4j 记录需要很长时间

> ID：11516435
> 
> 赞同：0
> 
> 时间：2012-07-17T05:21:37.453
> 
> 标签：java, oracle10g

我正在使用 Log4j 日志框架将日志插入到 oracle 数据库中。但是 log4j 属性文件中的插入查询需要花费大量时间来执行并且使应用程序非常慢。当我从 java 代码中删除日志语句时，应用程序运行良好。起初，我认为插入数据库需要时间，但是将日志写入外部文件也需要很多时间。

任何人都可以提出解决方案吗？

谢谢你，达瓦尔·马赫什瓦里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:34:27.333

如果您的应用程序正在开发中，那么日志级别应该是`debug`并且在记录之前您应该检查 isDebugEnabled() 然后记录您的字符串。

但是如果您的应用程序处于生产状态，那么日志级别应该是`info`并且您必须在日志文件中记录最少的信息。

> 始终在您的应用程序中使用至少两个日志级别，一个用于调试模式（用于开发环境），另一个用于生产模式，并且生产日志应该最少。

这是您可以加快应用程序的方式。

> 第二件事，如果您想将日志持久化到数据库中，那么创建一个`scheduler task`其职责是从平面文件中读取日志并将它们持久化到数据库中，并安排它每天只运行一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:34:46.087

我建议不要遵循你现在遵循的技术。

首先，我不确定你为什么要在 DB 中记录 log4j 的输出。无论如何，如果有必要尝试这样的事情。让日志文件按原样写入文件，然后在文件作为批处理关闭到数据库时运行一个线程从磁盘转储该文件。

在这种情况下，您的应用程序将与 DB 的延迟分开。

还有其他解决方案也使用 JMS。您可以将其写入 JMS 队列，另一方面，消费者可以读取队列并将其写入数据库。

不过，这取决于您要解决的问题类型。

看看有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T05:31:39.633

在 Logging 中包含级别。例如，在生产中仅记录应用程序级别的异常和错误[[ERROR](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Logger.html) level]。

如果是跟踪日志（如用户操作），不要将它们写入文件，直接将它们添加到数据库中。希望这可以帮助。

# sql - SQL - 找到性能更好的第 n 个最高金额

> ID：11516436
> 
> 赞同：1
> 
> 时间：2012-07-17T05:21:44.570
> 
> 标签：sql

我知道，这是一个非常古老的问题，已经被问过好几次了。

当我们有超过 2 亿条记录时，我想编写性能更好的查询，并且应该是独立于数据库的..

我试过以下查询

// MYSQL QUERY simillar TO rownum of Oracle (DB Supported: MYSQL, ORACLE, POSTGRESS)

```
SELECT RS.amt
FROM
(SELECT t.amount AS amt, 
       @rownum := @rownum + 1 AS rank
FROM salerecord t, 
       (SELECT @rownum := 0) r
ORDER BY t.amount DESC LIMIT 5) RS
WHERE RS.rank=5 
```

//与支持LIMIT的数据库一起工作，具有良好的性能（支持的数据库：MYSQL，Postgres）

```
SELECT amount FROM salerecord ORDER BY amount DESC LIMIT 4, 1; 
```

//适用于几乎所有数据库但性能不佳

```
SELECT amount FROM salerecord a WHERE 5 = (SELECT COUNT(*) FROM salerecord b WHERE a.amount <= b.amount) ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:27:35.863

在没有 LIMIT 或 TOP 运算符的情况下，在 SQL 中没有有效的方法来执行此操作。

对于允许增量检索结果的系统，您可以通过获取前五个记录并简单地关闭连接来模拟所需的行为。

使用 LINQ 在 .NET 框架上构建的客户端软件可以使用 Take 运算符。

（以上假设根据您的示例对所需维度进行降序排列。）

# android - 在 tesseract 中找不到 Lib 错误

> ID：11516440
> 
> 赞同：5
> 
> 时间：2012-07-17T05:22:20.940
> 
> 标签：android, ocr

我正在使用 OCR android。从谷歌搜索获得样本并使用 android tesseract。我将该项目作为库并在另一个项目中引用，但是当我运行该项目时，它在 Logcat 中显示以下内容

```
 07-17 10:38:47.092: ERROR/AndroidRuntime(426): FATAL EXCEPTION: main
    07-17 10:38:47.092: ERROR/AndroidRuntime(426): java.lang.ExceptionInInitializerError
    07-17 10:38:47.092: ERROR/AndroidRuntime(426):     at com.imagetotext.ImagetoText.onCreate(ImagetoText.java:21)
    07-17 10:38:47.092: ERROR/AndroidRuntime(426):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    07-17 10:38:47.092: ERROR/AndroidRuntime(426):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
    07-17 10:38:47.092: ERROR/AndroidRuntime(426):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    07-17 10:38:47.092: ERROR/AndroidRuntime(426):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
    07-17 10:38:47.092: ERROR/AndroidRuntime(426):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    07-17 10:38:47.092: ERROR/AndroidRuntime(426):     at android.os.Handler.dispatchMessage(Handler.java:99)
    07-17 10:38:47.092: ERROR/AndroidRuntime(426):     at android.os.Looper.loop(Looper.java:123)
    07-17 10:38:47.092: ERROR/AndroidRuntime(426):     at android.app.ActivityThread.main(ActivityThread.java:4627)
    07-17 10:38:47.092: ERROR/AndroidRuntime(426):     at java.lang.reflect.Method.invokeNative(Native Method)
    07-17 10:38:47.092: ERROR/AndroidRuntime(426):     at java.lang.reflect.Method.invoke(Method.java:521)
    07-17 10:38:47.092: ERROR/AndroidRuntime(426):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    07-17 10:38:47.092: ERROR/AndroidRuntime(426):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    07-17 10:38:47.092: ERROR/AndroidRuntime(426):     at dalvik.system.NativeStart.main(Native Method)
    07-17 10:38:47.092: ERROR/AndroidRuntime(426): Caused by: java.lang.UnsatisfiedLinkError: Library liblept not found
    07-17 10:38:47.092: ERROR/AndroidRuntime(426):     at java.lang.Runtime.loadLibrary(Runtime.java:461)
    07-17 10:38:47.092: ERROR/AndroidRuntime(426):     at java.lang.System.loadLibrary(System.java:557)
    07-17 10:38:47.092: ERROR/AndroidRuntime(426):     at com.googlecode.tesseract.android.TessBaseAPI.<clinit>(TessBaseAPI.java:47)
    07-17 10:38:47.092: ERROR/AndroidRuntime(426):     ... 14 more
    07-17 10:38:47.112: WARN/ActivityManager(60):   Force finishing activity com.imagetotext/.ImagetoText 
```

我认为我的 android.mk 有问题。请帮我修复错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T05:30:34.503

异常原因行是，

```
System.loadLibrary(“lept”); 
```

问题是在特定库路径上找不到**liblept.so**（共享库）文件。在没有看到您的代码的情况下，仅假设您的代码尝试加载共享库**liblept.so**并且该库在该路径上不可用。

Also the code you are using is either have that **liblept.so** file in any `lib` or `internal package directory` or you have to generate (build) that shared library by using **Android-NDK**.

# php - 在 php 中在 Intranet 中的文件服务器上上传文件

> ID：11516441
> 
> 赞同：0
> 
> 时间：2012-07-17T05:22:44.167
> 
> 标签：php, cakephp

我在本地网络（办公场所内）上维护两台本地服务器。

一个是我的 php 文件所在的服务器，另一个服务器是我要存储所有上传文件的文件服务器。由于第二个是文件服务器，因此不需要在该服务器上安装 php。

如何将文件上传到另一台服务器。我拥有访问文件服务器的全部权限。我尝试使用 ftp_connect() 方法。但是，这在 Intranet 中不起作用，它可以完美地与任何实时服务器 ftp 凭据一起使用。

如果我使用 CURL，那么我必须在我的文件服务器上安装 PHP，但这不是一个好习惯。那么如何使用 php ftp 相关方法上传文件呢？

如何将文件上传到文件服务器。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:54:13.127

由于在您的情况下，客户端和服务器都是 Unix 系统，因此最简单的方法是通过 NFS 在 Web 服务器上挂载文件服务器的目录。这样，您可以通过在本地复制或移动文件来上传文件，无需在 PHP 中使用 FTP 或 SSH 模块。

# excel - 使用结构化表引用的 VLOOKUP(MATCH()) 的 Excel UDF

> ID：11516444
> 
> 赞同：0
> 
> 时间：2012-07-17T05:23:01.083
> 
> 标签：excel, user-defined-functions, vba

我正在尝试构建一个 Excel 用户定义的函数`VLOOKUP_NAME(value, table, column_name)`来实现：

```
VLOOKUP(value, table, MATCH(column_name, table[#Headers], FALSE), FALSE) 
```

我如何在 VBA 中做到这一点？VBA 似乎不接受结构化引用，例如`table[#Headers]`.

此外，我也有兴趣了解将其作为 UDF 实现的性能后果。

此外，我这样做的原因是用更易读的公式替换大量丑陋的公式。欢迎其他更好的建议来实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:57:25.027

我不熟悉那种结构化的引用语法，但是您是否尝试过构建公式并使用工作表`Evaluate()`方法？

这是一个简单的例子：

```
Function TestEval(s1 As String, s2 As String)
    TestEval = Application.Caller.Parent.Evaluate(s1 & "/" & s2)
End Function 
```

编辑：在检查了整个结构化表格之后，这似乎有效：

```
Function TableLookup(val, tbl As Range, colName As String)
    Dim indx, rv
    indx = Application.Match(colName, tbl.Rows(1).Offset(-1, 0), 0)

    If Not IsError(indx) Then
        rv = Application.VLookup(val, tbl, indx, False)
        TableLookup = IIf(IsError(rv), "Not found", rv)
    Else
        TableLookup = "Col??"
    End If
End Function 
```

# makefile - 如何防止“make clean”构建计划删除的文件

> ID：11516451
> 
> 赞同：1
> 
> 时间：2012-07-17T05:23:59.570
> 
> 标签：makefile, gnu-make

如果我运行 make clean 两次，第二次调用将构建计划删除的依赖 Makefile。如何让 Makefile 识别计划删除的文件并跳过为该目录进行的递归调用？换句话说，如果makefile已经存在于每个子目录中，则仅在子目录中进行清理，基于每个子目录。我不知道 GNU-Make 语法，但我正在寻找类似的东西：

```
Dependencies=[dependency1,dependency2,dependency3,dependency4]
DoNotMake=[bool1,bool2,bool3,bool4]
for all (i < 4): 
    if (! Dependencies(i)/Makefile):
        DoNotMake(i)=true 
```

make clean 的当前规则如下：

```
.PHONY: clean
clean:
    $(MAKE) MAKEDEPEND=off SUBDIR_ARGS=clean
    rm -f dependency1/Makefile
    rm -f dependency2/Makefile
    rm -f dependency3/Makefile
    rm -f dependency4/Makefile
    rm -f dependency4/src/config.h.in 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:25:32.530

我不能给你一个明确的答案，因为你还有很多你没有发布的makefile，但这里有一些我们为解决类似问题所做的事情。

make 变量`MAKECMDGOALS`包含当前的 make 目标。如果你想避免在运行时做某事`make clean`，你可以这样做：

```
ifeq (,$(findstring $(MAKECMDGOALS),clean))
  # Whatever you place here won't be run when you run 'make clean'
endif 
```

您还可以添加一些 shell 脚本以仅在子 makefile 存在时调用它：

```
some_target:
    [ -f $(SUB_FOLDER)/Makefile ] && $(MAKE) -C $(SUB_FOLDER) 
```

如果您的 makefile 是隐式创建的，那么这些可能不起作用。您可以使用该`--assume-old=`选项来阻止 make 重新构建 makefile（我从未尝试在不存在的文件上使用它，所以 YMMV）。

# java - 如何在接口中声明方法签名以接受未知类型变量？

> ID：11516454
> 
> 赞同：1
> 
> 时间：2012-07-17T05:24:35.627
> 
> 标签：java

我正在创建几个不同的类，每个类都与不同的 API 交互。我为每个类创建了一个接口来继承，但是接口中的一个方法可以采用几种不同的数据类型，具体取决于正在实现的 API。是否可以为该方法定义未知类型？

现在我只是将它声明为一个`Object`并在实现中强制转换它。

界面：

```
public interface UDSession {

    public void authenticate(String user) throws UDException;

    public void linkAccount(Object authInfo) throws UDException;

} 
```

方法实现（只是签名和第一行）：

保管箱：

```
 public void linkAccount(Object authInfo) throws UDException {
        WebAuthSession.WebAuthInfo info = (WebAuthSession.WebAuthInfo) authInfo;
} 
```

谷歌：

```
 public void linkAccount(Object authInfo) throws UDException {
                GoogleOAuthParameters info = (GoogleOAuthParameters) authInfo;
        } 
```

我还尝试在接口中将其`Class<?>`定义为：并在方法签名实现中将其定义为：`Class<WebAuthSession.WebAuthInfo>`。但这没有用。

必须有比使用`Object`类型参数更好的方法来做到这一点。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T05:28:22.803

根据您实例化类的方式，您可以尝试：

```
public interface UDSession<T> {

    public void authenticate(String user) throws UDException;

    public void linkAccount(T authInfo) throws UDException;

} 
```

# java - 客户端部署中的war文件

> ID：11516455
> 
> 赞同：0
> 
> 时间：2012-07-17T05:24:42.147
> 
> 标签：java, war

如何在war文件中设置密码？？？我可以在war文件中设置IP地址，mac地址，然后在部署这个war之前检查IP地址，mac地址吗？如果这些地址正确然后部署war文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:32:04.013

在war中进行IP地址检查，mac地址检查等，因此即使部署了war，如果ip或mac地址不正确，它也将不起作用。即....像那样更改战争中的代码

下面给出了一个获取 IP 地址和 MAC 地址的示例 java 程序

```
 import java.net.InetAddress;
    import java.net.NetworkInterface;
    import java.net.SocketException;
    import java.net.UnknownHostException;

    public class MACandIP{

       public static void main(String[] args){

        InetAddress ipAddress;
            byte[] macAddress;
        try {

            ipAddress = InetAddress.getLocalHost();
            System.out.println("IP address =" + ipAddress.getHostAddress());
            NetworkInterface networkInt = NetworkInterface.getByInetAddress(ipAddress);
            macAddress = networkInt.getHardwareAddress();
            StringBuilder strBld = new StringBuilder();
                    System.out.print("MAC address = ");
            for (int i = 0; i < macAddress.length; i++) {
                strBld.append(String.format("%02X%s", macAddress[i], (i < macAddress.length - 1) ? "-" : ""));
            }
            System.out.println(strBld.toString());

 //in above code assume you got MAC address as  81-7B-39-C5-A6-D4 

                if(strBld.toString().equalsIgnoreCase("81-7B-39-C5-A6-D4")){
                    // mac is correct 
                }

        } catch (UnknownHostException excep) {

            excep.printStackTrace();

        } catch (SocketException exce){
            exce.printStackTrace();
        }

       }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:08:43.850

我建议您不要在 war 文件中进行所有这些验证，毕竟这只是一个文件，如果有人想替换它，无论您在 war 中进行什么验证和检查，他都可以替换该文件。

您需要做的是编写一个部署脚本，为它提供新的战争以进行部署，然后该脚本进行所有验证并替换战争文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T07:16:52.173

WAR 格式和 servlet API 在部署前不支持任何形式的保护。此外，任何纯软件方案都可以被破解。

您检查的有效许可证密钥和“没有有效许可证不支持代码”的组合很可能是您所期望的最好的。

# c++ - 实例化错误后如何避免特化？

> ID：11516457
> 
> 赞同：3
> 
> 时间：2012-07-17T05:24:43.307
> 
> 标签：c++, templates, nested-class

这是简化的问题。

```
template <class T>
std::string name(const T&);  // This is the template 
                             // I want to explicitly specialize.

class Outer
{
    class Inner
    {
    };

    class Container : public ::Container<Inner> // This causes also an implicit
                                                // specialization of f::name
    {
    };
}; 
```

我怎样才能专精

```
template <class T>
std::string name(const T&); 
```

为`Outer::Inner`？

我不能在我考虑的三个地方声明明确的专业化：

```
template <class T>
std::string name(const T&); 

// 1\. Here I cannot forward declare a nested class

class Outer
{
    class Inner
    {
    };

    // 2\. Here I get error: explicit specialization
    //    in non-namespace scope 'class Outer'

    class Container : public ::Container<Inner>
    {
    };
};

// 3\. Here I get error: specialization of '...' after instantiation 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:28:10.917

看看[这篇文章](http://www.gotw.ca/publications/mill17.htm)。你最好只`name`为你想要“专门化”的特定类型编写一个函数：

```
std::string name(const Outer::Inner&); 
```

# nlp - 财经新闻标题分类为正/负类

> ID：11516459
> 
> 赞同：2
> 
> 时间：2012-07-17T05:24:53.047
> 
> 标签：nlp, classification, svm, sentiment-analysis

我正在做一个小型研究项目，我应该尝试将财经新闻文章标题分为正类和负类。对于分类，我使用的是 SVM 方法。我现在看到的主要问题是不能产生很多特征对于机器学习。新闻文章包含许多命名实体和其他“垃圾”元素（当然从我的角度来看）。

您能否推荐可用于 ML 训练的 ML 功能？目前的结果是：精度=0.6，召回率=0.8

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T23:28:04.627

这项任务根本不是微不足道的。

直接的方法是找到或创建一个训练集。那是一组带有正面新闻的标题和一组带有负面新闻的标题。您将训练集转换为 TF/IDF 表示，然后训练线性 SVM 以分离两个类。根据您的训练集的质量和大小，您可以取得不错的成绩 - 不确定 0.7 的盈亏平衡点。

然后，为了获得更好的结果，您需要采用 NLP 方法。尝试使用词性标注器来识别形容词（微不足道的），然后使用 SentiWordNet 等情感数据库对它们进行评分。

[Bo Pang 和 Lillian](http://www.cs.cornell.edu/home/llee/opinion-mining-sentiment-analysis-survey.html) Lee对情绪分析有一个很好的概述，你应该阅读：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T17:20:45.923

这些功能怎么样？

1.  文章标题的长度（以单词为单位）
2.  平均字长
3.  “坏”词词典中的词数，例如dictionary = {terrible,可怕的,低迷,破产,...}。您可能必须自己生成此词典。
4.  该词典中的单词与句子中总单词的比率
5.  与 3 类似，但在“好”词词典中的词数，例如 dictionary = {boon, booming,employment, ...}
6.  类似于 5，但使用“好”字词典
7.  文章发表时间
8.  文章发表日期
9.  发布的媒介（您必须进行一些主观分类）
10.  某些标点符号的计数，例如感叹号

如果您被允许访问实际文章，您可以使用实际文章的表面特征，例如其总长度，甚至可能是回复的数量或对该文章的反对程度。您还可以查看许多其他在线词典，例如 Ogden 的 850 基本英语词典，看看坏/好文章是否可能从中提取很多单词。我同意为此目的提出一长串*有用*的功能（例如 100 个功能）似乎很困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:55:29.187

iliasfl 是对的，这不是一个简单的任务。

我会使用词袋方法，但首先使用 POS 标记器来标记标题中的每个单词。然后您可以删除所有命名实体 - 正如您正确指出的那样，这不会影响情绪。其他词*应该*足够频繁地出现（如果你的数据集足够大），以消除它们被极化为正面或负面的影响。

更进一步，如果您仍然不接近，可能只从标记数据中选择形容词和动词，因为它们是倾向于传达情感或情绪的词。

不过，我不会对您的精确度和召回率数据感到灰心，0.8 及以上的 F 数实际上是相当不错的。

# wpf - WPF 进度条

> ID：11516472
> 
> 赞同：1
> 
> 时间：2012-07-17T05:26:18.897
> 
> 标签：wpf

WPF：我在进度条中有一个问题，我希望它在操作未完成时显示，当我的操作完成时它会隐藏。请给我看一个可以理解的例子，这样我就可以把它应用到我的工作中。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:51:35.827

你可以在不同的场景中做到这一点。

1.  使用触发器，（我更喜欢那个）

    ```
    <ProgressBar Maximum="100" Margin="10,107,232,168" Value="0" Name="progr">
        <ProgressBar.Resources>
            <Style TargetType="{x:Type ProgressBar}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=Value}" Value="100">
                        <Setter Property="Visibility" Value="Hidden"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ProgressBar.Resources>
    </ProgressBar> 
    ```

2.  使用转换器

    ```
    <Grid>
    <Grid.Resources>
        <delWpf:VisibilityConverter x:Key="conv"/>
    </Grid.Resources>
        <ProgressBar Name="prog2" Minimum="0" Maximum="100" 
           Value="{Binding CurrentIndex, UpdateSourceTrigger=PropertyChanged}" 
           Visibility="{Binding RelativeSource={RelativeSource Self}, Path=Value, Mode=OneWay, Converter={StaticResource conv}}" />
    </Grid> 
    ```

和转换器

```
 public class VisibilityConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return Math.Abs((double)value - 100) < 0.001 ? Visibility.Hidden : Visibility.Visible;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T09:03:13.470

您可以使用具有 BusyIndi​​cator 控件的扩展 WPF 工具包，

[http://wpftoolkit.codeplex.com/wikipage?title=BusyIndi​​cator](http://wpftoolkit.codeplex.com/wikipage?title=BusyIndicator)

示例包含在下载中。

供您参考，Microsoft 首先在 Silverlight 中引入了 BusyIndi​​cator（但未能为 WPF 提供一个）作为进度条的替代品。

# android - Android软键盘遮盖了ScrollView中的最后一个元素

> ID：11516473
> 
> 赞同：2
> 
> 时间：2012-07-17T05:26:20.347
> 
> 标签：android, keyboard

我有一个带有几个s 和底部`EditText`的 add的表单。我想在最后一个焦点时`Button`向用户显示添加。通过将以下代码放在焦点侦听器和 onClickListener() 中，当最后一个编辑文本处于焦点时，我尝试将布局滚动到底部。用户必须单击两次才能使布局向下滚动。`button``EditText`

```
ScrollView.post(new Runnable() {
        @Override
        public void run() {
            ScrollView.fullScroll(ScrollView.FOCUS_DOWN);
        }
    }); 
```

`android:windowSoftInputMode="adjustUnspecified|adjustResize"`也在清单中尝试过。

xml是

```
 <LinearLayout>
        <Header/>
          <ScrollView>
              <LinearLayout>
                  <BunchOfEditText/>
                  <Button/>
              </LinearLayout>
          </ScrollView>
    </LinearLayout> 
```

我怎样才能巧妙地解决这个问题？

# c# - 找不到许可证时，如何防止网站在 IIS 中启动？

> ID：11516477
> 
> 赞同：0
> 
> 时间：2012-07-17T05:26:37.300
> 
> 标签：c#, .net, iis, licensing, webserver

我有一种情况，我正在构建一个托管在 IIS 上的 Web 服务，该服务需要许可证文件在文件系统上才能成功启动。我想知道我应该将执行许可证检查的代码放在哪里，以防止网站实际启动。

我发现有一个函数[Application_Start](http://msdn.microsoft.com/en-us/library/ms178473.aspx)但是直到有人发出初始请求才会调用它。

理想情况下，当 IIS 管理员尝试启动网站本身时，应用程序会检查许可证并在 Windows 事件日志中记录错误。这可能吗？如果没有，是否有针对这种情况的最佳实践？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T18:00:47.100

轰炸*整个*网站，因为其中一部分使用*您*未注册的组件是*非常*糟糕的形式。

为此，我可以在您的类的静态构造函数中放入一些东西来检查许可，然后如果找不到您的许可要求，则抛出异常（任何都可以），如下所示：

```
public static MyComponent
{
    static MyComponent()
    {
         // Check for licensing here.
         if (!<licensing condition>)
         {
             // Bomb the app.
             throw new InvalidOperationException("Component is not licensed.");
         }
    }
} 
```

如果您真的想轰炸*整个*网站，那么您很可能必须在 ASP.NET 之外执行此操作，并编写一个[ISAPI 过滤器](http://msdn.microsoft.com/en-us/library/ms524610%28v=vs.90%29.aspx)（注意，您必须在非托管代码中执行此操作）并将其安装在IIS 服务器。

或者，您可以实现[`IHttpModule`接口](http://msdn.microsoft.com/en-us/library/system.web.ihttpmodule.aspx)。在[`Init`方法](http://msdn.microsoft.com/en-us/library/system.web.ihttpmodule.init.aspx)实现中，您可以检查您的许可要求。如果未设置要求，则抛出异常，如下所示：

```
public class MyLicensingHttpModule : IHttpModule
{
    public void Init(HttpApplication context)
    {
         // Check for licensing here.
         if (!<licensing condition>)
         {
             // Bomb the app.
             throw new InvalidOperationException("Component is not licensed.");
         }            
    }
} 
```

（请注意，您仍然必须[注册`IHttpModule`实现](http://msdn.microsoft.com/en-us/library/ms227673.aspx)）

更好的解决方案是实施`IHttpModule`，但设置一个标志，您的库/组件可以*根据需要*访问：

```
public class MyLicensingHttpModule : IHttpModule
{
    // Set when the application is initialized
    public static IsLicensed { get; private set; }

    public void Init(HttpApplication context)
    {
         // Check for licensing here.  Set
         // the flag accordingly.
         IsLicensded = <licensing condition>;
    }
} 
```

随后将在每个构造函数和/或静态构造函数中检查该标志以确保合规性：

```
public class MyComponentA
{
     static MyComponentA()
     {
          // Check here.
          if (!MyLicensingHttpModule.IsLicensed)
          {
              // Bomb the *type*.
              throw new InvalidOperationException(
                  "MyComponentA is not licensed.");
          }
     }
}

public class MyComponentB
{
     public MyComponentB()
     {
          // Or check on a per-instance basis.  You'd do
          // this if you needed properties on the class level
          // to be available regardless.  This is the
          // *less* likely scenario.
          if (!MyLicensingHttpModule.IsLicensed)
          {
              // Bomb the *instance*.
              throw new InvalidOperationException(
                  "MyComponentA is not licensed.");
          }
     }
} 
```

这将强制安装模块（没有它，标志未设置，这将导致抛出异常），并且*应该*让您有机会挂钩使用您的组件的*每个*页面请求，并根据需要阻止使用。

*如果你真的走这条路，我必须再次强调，轰炸整个*应用程序的形式非常糟糕，你应该*在使用它时*真正关注你的组件；这不是你真正需要做的。

开发人员很可能有其他页面不使用您的组件，而使用其他应该可以正常呈现的付费组件。

此外，如果您连接到每个请求，您应该确保您不会做任何会导致性能下降的事情。这也将是糟糕的形式。这就是为什么您设置*一次*标志，然后在需要时进行简单检查的原因。

# c# - 在 C# windows 应用程序中，我的文本框中的透明度使它好像不存在

> ID：11516483
> 
> 赞同：0
> 
> 时间：2012-07-17T05:27:09.157
> 
> 标签：c#, transparency, richtextbox

嘿伙计们，我使用此代码为我的表单启用透明度：

```
private void TypingFreak_Load(object sender, EventArgs e)
{
   this.SetStyle(ControlStyles.SupportsTransparentBackColor, true);
   this.TransparencyKey = Color.FromKnownColor(KnownColor.Control);
   this.Update();
} 
```

但是，它变得好像不存在，所以如果我在桌面上运行它，我可以看到图标并对其做出反应（我无法写入文本框）

在我的表单中，我有 2 个富文本框，我希望它们对我的表单背景的背景色透明。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:30:25.220

TransparencyKey 使表单表现得好像它在具有该颜色的地方不存在。在您的情况下，它是所有内容控件（例如 TextBox、ListBox 等）的背景颜色，因此几乎整个表单都是不可见的。或者，如果您的表单颜色不同，那么您在放置此类控件的地方可能会出现漏洞。

您需要通过设置透明背景颜色使控件本身透明，但并非所有控件都支持这一点。事实上，RichTextBox（和 TextBox）没有：

    ![在此处输入图像描述](../Images/32b00d3fd8f17b58df1f3d776e2856c0.png)

导致

    ![在此处输入图像描述](../Images/0508f3977ff2160aba046559553626fb.png)

# jquery - 使用 SetTimeout 和 .each Jquery

> ID：11516485
> 
> 赞同：0
> 
> 时间：2012-07-17T05:27:22.227
> 
> 标签：jquery

我想将 settimeout() 函数与 .each 函数一起使用。基本上我想显示每个图像 5 秒然后下一个，但我只能看到最后一个图像。.each 执行并且不会停止 3 秒。我怎么能这样做？这就是我正在做的。

```
 <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
    <title></title>
    <script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    $(document).ready(function () {

        $('#Images').find('li').each(function () {
            var img = this;
            setTimeout(function () {
                Start(img);
            }, 3000);

        });

    });
    function Start(img) {
        $('#slideshow').html(img);
    }
   </script>
   </head>
   <body>
   <form id="form1" runat="server">
<div id="slideshow">
</div>
<div style="display:none;">
<ul id="Images">
<li><img src="images/ajax-loader.gif" /></li>
<li><img src="images/Ajax Loader White.gif" /></li>
<li><img src="images/fancybox_sprite.png" /></li>
</ul>
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:31:01.250

试试这个：

```
 $('#Images').find('li').each(function (k,v) {
        var img = this;
        changeImg(img, k);
    });

    function changeImg(img, k) {
        setTimeout(function () {
            Start(img);
        }, 3000*(k+1));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T05:32:49.890

尝试这个

```
var images = $('#Images').find('li');
var imageCount = images.length;
var counter = 0;
setTimeout(function(){
Start(images[counter++]);
if(counter>=imageCount)
    counter =0 ;

},3000); 
```

# ios - Ios：UIButton颜色随时间自动变化

> ID：11516491
> 
> 赞同：1
> 
> 时间：2012-07-17T05:27:58.390
> 
> 标签：ios

我是一个新的 iPhone 程序员。我想知道如何以特定的时间间隔自动更改 UIButton 颜色。

问候， 拉杰什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T05:38:04.860

您可能会发现这很有帮助，此代码段`random`每 3.5 秒选择一种颜色，并将其`backgroundColor`从当前状态变为新颜色。

```
- (void)viewDidLoad
{       
[super viewDidLoad];

    NSTimer *myTimer = [NSTimer scheduledTimerWithTimeInterval: 3.5
                                target: self
                                selector: @selector (updateBackgroundColor)
                                userInfo: nil
                                repeats: YES]];

}
- (void) updateBackgroundColor {

    [UIView beginAnimations: nil context: nil];
    [UIView setAnimationDuration: 3.0];

    CGFloat redLevel    = rand() / (float) RAND_MAX;
    CGFloat greenLevel  = rand() / (float) RAND_MAX;
    CGFloat blueLevel   = rand() / (float) RAND_MAX;

    myButton.backgroundColor = [UIColor colorWithRed: redLevel
                                                green: greenLevel
                                                 blue: blueLevel
                                                alpha: 1.0];
    [UIView commitAnimations];
} 
```

# spring - 链接弹簧视图解析器

> ID：11516494
> 
> 赞同：2
> 
> 时间：2012-07-17T05:28:50.517
> 
> 标签：spring, spring-mvc

是否有另一种方法可以在春季实现下一个行为？：

给定路径 xxx/yyy

1) 查找 static/html/xxx/yyy.html

2) 如果 html 不存在，请查找 WEB-INF/xxx/yyy.jsp

我正在尝试下一个配置。但似乎 UrlBasedViewResolver 失败并且没有委托给下一个 ViewResolver。

所以看起来你实际上不能在 Spring 中链接两个 UrlBasedViewResolver，对吗？

```
<bean id="jspViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/" />
    <property name="suffix" value=".jsp" />
    <property name="order" value="1" />
</bean>          

<bean id="htmlViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/static/html/" />
    <property name="suffix" value=".html" />
    <property name="order" value="0" />
</bean> 
```

任何帮助，将不胜感激。

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T06:40:44.650

正如您所说，您不能，因为 UrlBasedViewResolver（或 InternalResourceViewResolver）总是解析视图并且无法委托给下一个 ViewResolver。参考资料说这种 ViewResolver[总是需要最后一个](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/view/UrlBasedViewResolver.html)。

有一些解决方法可以帮助您，如[实现您的自定义 ViewResolver](http://blog.tremend.ro/2007/03/01/chaining-multiple-view-resolvers-in-spring-using-two-internalresourceviewresolver/)。

# c - 如何运行这个线程示例？

> ID：11516496
> 
> 赞同：0
> 
> 时间：2012-07-17T05:29:01.120
> 
> 标签：c, operating-system, pthreads

我正在尝试 Tanenbaum 的 3e“现代操作系统”中的代码，但出现编译器错误和警告：

```
$ LANG=en_US.UTF-8 cc thread.c 
thread.c: In function ‘main’:
thread.c:19:63: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]
thread.c:25:1: warning: passing argument 1 of ‘exit’ makes integer from pointer without a cast [enabled by default]
/usr/include/stdlib.h:544:13: note: expected ‘int’ but argument is of type ‘void *’
/tmp/ccqxmMgE.o: In function `main':
thread.c:(.text+0x57): undefined reference to `pthread_create'
collect2: ld returned 1 exit status 
```

这是我正在尝试的代码

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>

#define NUMBER_OF_THREADS   10

void *print_hello_world(void *tid)
{
  //printf("Hello World. Greetings from thread %d0", tid);
  pthread_exit(NULL);
}
int main(int argc, char *argv[])
{
  pthread_t threads[NUMBER_OF_THREADS];
  int status, i;

  for(i=0; i<NUMBER_OF_THREADS; i++) {
  //printf("Main here creating thread %d0", i);
  status = pthread_create(&threads[i], NULL, print_hello_world, (void *)i);

  if (status != 0) {
    //printf("Oops. pthread_create returned error code %d0", status);
    exit(-1);
  }
}
exit(NULL);
} 
```

你能帮我改善代码的状态以便它运行吗？由于书中的确切代码无法编译，因此似乎存在一些勘误。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:33:14.073

请通过在链接器中指定 -lpthread 选项来链接到 pthread 库。

此外，您应该使用[pthread_join](http://www.manpagez.com/man/3/pthread_join/)等待所有创建的线程完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:34:35.257

```
$gcc thread.c -lpthread 
```

这是为了链接 pthread 共享库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T05:38:28.963

1）您必须链接到 libpthread 以摆脱链接器错误：

```
gcc ..... -lpthread 
```

（注意 -lpthread 选项必须是最后一个）！

2)`exit(NULL);`错误；NULL 用于指针类型，而 exit 希望提供一个 int ；简单地使用

```
exit(0); 
```

反而。

其他警告只是系统相关的指针和整数大小警告；在大多数情况下，可以放心地忽略它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T05:40:08.063

PL。在这种情况下，不要在 main 函数中使用 exit 语句，因为 main 可能会退出并且您的线程也将终止，并且您可能无法在线程函数中获得 print 语句的输出。

PL。在 main 中使用 pthread_exit 而不是 exit ，这样即使您的主线程终止，其他线程也可以继续。

# c# - 在 C# 中读取 Excel 文件时查找标签列宽

> ID：11516499
> 
> 赞同：0
> 
> 时间：2012-07-17T05:29:44.863
> 
> 标签：c#, excel, interop

我正在从 WPF 应用程序中读取一个 excel 文件。出于某种目的，我需要标签中的列宽（excel表中的“A”、“B”、“C”......）。Range 中的 width 变量始终提供特定的单元格宽度。如果单元格属于合并单元格（上一列或上一行），则读取特定单元格宽度会导致空值。所以，我需要列标签的宽度或行标签的高度（“1”、“2”、...）而不是单元格高度！

知识库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:51:07.840

找到您的`Range`(`Application.Selection`或`Application.ActiveCell`, `Range[..,..]`...)

并使用[`Range.ColumnWidth`](http://msdn.microsoft.com/en-US/library/microsoft.office.interop.excel.range.columnwidth). 对于列宽：

```
var width = worksheet.Range["A1", "A5"].ColumnWidth; 
```

并使用`Range.Value`or`Range.Parse`作为范围值。

```
var value = worksheet.Range["A1", "A5"].Value; 
```

合作`Range`有更多好处！

# linux - struts2 web 应用程序无法在 susi linux 中安装的 tomcat7 中运行

> ID：11516505
> 
> 赞同：0
> 
> 时间：2012-07-17T05:30:23.433
> 
> 标签：linux, eclipse, struts2, tomcat7

我已经开发了一个基于 struts2.2.1 的 Web 应用程序，使用 Eclipse indigo IDE 和 apache-tomcat-7.0.28。为了让它在没有 IDE 的情况下工作，我在 Eclipse IDE 中使用：右键单击项目->导出->war。

所以，我得到了war文件，我可以让它在任何安装了apache-tomcat-7.0.28的windows服务器上工作，只需将war文件复制到tomcat的webapps文件夹并运行surver。在这里一切都很好。

但是，当我将这个相同的战争文件带到安装有相同 apache-tomcat-7.0.28 的 Linux 服务器时，它无法打开 web.xml 中指定的 jsp 文件并显示错误 404 页面。

我什至在不同的 linux 机器（如 Ubuntu）上尝试过，但它不工作，我得到同样的 404 错误。

为什么会这样？

**更新：**

它在日志文件夹和内部采用这种形式的**catalina.out文件**

```
Jul 17, 2012 9:35:55 AM org.apache.catalina.startup.HostConfig checkResources
INFO: Undeploying context [/ai]
Jul 17, 2012 9:36:55 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive /usr/apache-tomcat-7.0.28/webapps/ai.war
Jul 17, 2012 9:36:56 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/core_rt is already defined
Jul 17, 2012 9:36:56 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/core is already defined
Jul 17, 2012 9:36:56 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/fmt_rt is already defined
Jul 17, 2012 9:36:56 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/fmt is already defined
Jul 17, 2012 9:36:56 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://jakarta.apache.org/taglibs/standard/permittedTaglibs is already defined
Jul 17, 2012 9:36:56 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://jakarta.apache.org/taglibs/standard/scriptfree is already defined
Jul 17, 2012 9:36:56 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/sql_rt is already defined
Jul 17, 2012 9:36:56 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/sql is already defined
Jul 17, 2012 9:36:56 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/xml_rt is already defined
Jul 17, 2012 9:36:56 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/xml is already defined
log4j:WARN No appenders could be found for logger (com.opensymphony.xwork2.config.providers.XmlConfigurationProvider).
log4j:WARN Please initialize the log4j system properly.
Jul 17, 2012 9:36:56 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error filterStart
Jul 17, 2012 9:36:56 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/ai] startup failed due to previous errors
Jul 17, 2012 9:36:56 AM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/ai] created a ThreadLocal with key of type [com.opensymphony.xwork2.inject.ContainerImpl$10] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@626028]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@970110]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.
Jul 17, 2012 9:36:56 AM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/ai] created a ThreadLocal with key of type [com.opensymphony.xwork2.inject.ContainerImpl$10] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@1c6f1f4]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@36d036]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.
Jul 17, 2012 9:38:46 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory /usr/apache-tomcat-7.0.28/webapps/GeneTest
Jul 17, 2012 10:21:48 AM org.apache.catalina.startup.HostConfig checkResources
INFO: Undeploying context [/ai]
Jul 17, 2012 10:22:38 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive /usr/apache-tomcat-7.0.28/webapps/ai.war
Jul 17, 2012 10:22:39 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/core_rt is already defined
Jul 17, 2012 10:22:39 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/core is already defined
Jul 17, 2012 10:22:39 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/fmt_rt is already defined
Jul 17, 2012 10:22:39 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/fmt is already defined
Jul 17, 2012 10:22:39 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://jakarta.apache.org/taglibs/standard/permittedTaglibs is already defined
Jul 17, 2012 10:22:39 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://jakarta.apache.org/taglibs/standard/scriptfree is already defined
Jul 17, 2012 10:22:39 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/sql_rt is already defined
Jul 17, 2012 10:22:39 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/sql is already defined
Jul 17, 2012 10:22:39 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/xml_rt is already defined
Jul 17, 2012 10:22:39 AM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://java.sun.com/jstl/xml is already defined
log4j:WARN No appenders could be found for logger (com.opensymphony.xwork2.config.providers.XmlConfigurationProvider).
log4j:WARN Please initialize the log4j system properly.
Jul 17, 2012 10:22:39 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error filterStart
Jul 17, 2012 10:22:39 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/ai] startup failed due to previous errors
Jul 17, 2012 10:22:39 AM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/ai] created a ThreadLocal with key of type [com.opensymphony.xwork2.inject.ContainerImpl$10] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@1c8e80d]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@fadb88]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.
Jul 17, 2012 10:22:39 AM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/ai] created a ThreadLocal with key of type [com.opensymphony.xwork2.inject.ContainerImpl$10] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@162c87a]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@57f389]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak. 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>ai</display-name>
  <welcome-file-list>
    <welcome-file>login.jsp</welcome-file>
  </welcome-file-list>
  <filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
</web-app> 
```

**更新：将表单 struts2.2.1 升级到 struts2.3.4 后**

```
Jul 18, 2012 10:38:20 AM org.apache.catalina.core.StandardServer await
INFO: A valid shutdown command was received via the shutdown port. Stopping the Server instance.
Jul 18, 2012 10:38:20 AM org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler ["http-bio-8080"]
Jul 18, 2012 10:38:20 AM org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler ["ajp-bio-8009"]
Jul 18, 2012 10:38:20 AM org.apache.catalina.core.StandardService stopInternal
INFO: Stopping service Catalina
Jul 18, 2012 10:38:20 AM org.apache.coyote.AbstractProtocol stop
INFO: Stopping ProtocolHandler ["http-bio-8080"]
Jul 18, 2012 10:38:20 AM org.apache.coyote.AbstractProtocol destroy
INFO: Destroying ProtocolHandler ["http-bio-8080"]
Jul 18, 2012 10:38:20 AM org.apache.coyote.AbstractProtocol stop
INFO: Stopping ProtocolHandler ["ajp-bio-8009"]
Jul 18, 2012 10:38:20 AM org.apache.coyote.AbstractProtocol destroy
INFO: Destroying ProtocolHandler ["ajp-bio-8009"]
Jul 18, 2012 10:38:25 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/lib64/jvm/jdk1.6.0_22/jre/lib/i386/server:/usr/lib64/jvm/jdk1.6.0_22/jre/lib/i386:/usr/lib64/jvm/jdk1.6.0_22/jre/../lib/i386:/usr/java/packages/lib/i386:/lib:/usr/lib
Jul 18, 2012 10:38:25 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Jul 18, 2012 10:38:25 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Jul 18, 2012 10:38:25 AM org.apache.coyote.AbstractProtocol init
SEVERE: Failed to initialize end point associated with ProtocolHandler ["ajp-bio-8009"]
java.net.BindException: Address already in use <null>:8009
    at org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:406)
    at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:610)
    at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:423)
    at org.apache.catalina.connector.Connector.initInternal(Connector.java:974)
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
    at org.apache.catalina.core.StandardService.initInternal(StandardService.java:559)
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
    at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:814)
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:624)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:649)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: java.net.BindException: Address already in use
    at java.net.PlainSocketImpl.socketBind(Native Method)
    at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:365)
    at java.net.ServerSocket.bind(ServerSocket.java:319)
    at java.net.ServerSocket.<init>(ServerSocket.java:185)
    at java.net.ServerSocket.<init>(ServerSocket.java:141)
    at org.apache.tomcat.util.net.DefaultServerSocketFactory.createSocket(DefaultServerSocketFactory.java:49)
    at org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:393)
    ... 16 more
Jul 18, 2012 10:38:25 AM org.apache.catalina.core.StandardService initInternal
SEVERE: Failed to initialize connector [Connector[AJP/1.3-8009]]
org.apache.catalina.LifecycleException: Failed to initialize component [Connector[AJP/1.3-8009]]
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:106)
    at org.apache.catalina.core.StandardService.initInternal(StandardService.java:559)
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
    at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:814)
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:624)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:649)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Protocol handler initialization failed
    at org.apache.catalina.connector.Connector.initInternal(Connector.java:976)
    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
    ... 12 more
Caused by: java.net.BindException: Address already in use <null>:8009
    at org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:406)
    at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:610)
    at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:423)
    at org.apache.catalina.connector.Connector.initInternal(Connector.java:974)
    ... 13 more
Caused by: java.net.BindException: Address already in use
    at java.net.PlainSocketImpl.socketBind(Native Method)
    at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:365)
    at java.net.ServerSocket.bind(ServerSocket.java:319)
    at java.net.ServerSocket.<init>(ServerSocket.java:185)
    at java.net.ServerSocket.<init>(ServerSocket.java:141)
    at org.apache.tomcat.util.net.DefaultServerSocketFactory.createSocket(DefaultServerSocketFactory.java:49)
    at org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:393)
    ... 16 more
Jul 18, 2012 10:38:25 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 544 ms
Jul 18, 2012 10:38:25 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Jul 18, 2012 10:38:25 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.28
Jul 18, 2012 10:38:25 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive /usr/apache-tomcat-7.0.28/webapps/ai3.war
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Parsing configuration file [struts-default.xml]
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Parsing configuration file [struts-plugin.xml]
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Parsing configuration file [struts.xml]
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for (com.opensymphony.xwork2.ObjectFactory)
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for (com.opensymphony.xwork2.FileManager)
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for (com.opensymphony.xwork2.conversion.impl.XWorkConverter)
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for (com.opensymphony.xwork2.TextProvider)
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for (com.opensymphony.xwork2.ActionProxyFactory)
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for (com.opensymphony.xwork2.conversion.ObjectTypeDeterminer)
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for (org.apache.struts2.dispatcher.mapper.ActionMapper)
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (jakarta) for (org.apache.struts2.dispatcher.multipart.MultiPartRequest)
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for (org.apache.struts2.views.freemarker.FreemarkerManager)
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for (org.apache.struts2.components.UrlRenderer)
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for (com.opensymphony.xwork2.validator.ActionValidatorManager)
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for (com.opensymphony.xwork2.util.ValueStackFactory)
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for (com.opensymphony.xwork2.util.reflection.ReflectionProvider)
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for (com.opensymphony.xwork2.util.reflection.ReflectionContextFactory)
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for (com.opensymphony.xwork2.util.PatternMatcher)
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for (org.apache.struts2.dispatcher.StaticContentLoader)
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for (com.opensymphony.xwork2.UnknownHandlerManager)
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Choosing bean (struts) for (org.apache.struts2.views.util.UrlHelper)
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Overriding property struts.i18n.reload - old value: false new value: true
Jul 18, 2012 10:38:27 AM com.opensymphony.xwork2.util.logging.jdk.JdkLogger info
INFO: Overriding property struts.configuration.xml.reload - old value: false new value: true
Jul 18, 2012 10:38:27 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error filterStart
Jul 18, 2012 10:38:27 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/ai3] startup failed due to previous errors
Jul 18, 2012 10:38:27 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory /usr/apache-tomcat-7.0.28/webapps/ROOT
Jul 18, 2012 10:38:27 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory /usr/apache-tomcat-7.0.28/webapps/docs
Jul 18, 2012 10:38:27 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory /usr/apache-tomcat-7.0.28/webapps/examples
Jul 18, 2012 10:38:27 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory /usr/apache-tomcat-7.0.28/webapps/host-manager
Jul 18, 2012 10:38:27 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory /usr/apache-tomcat-7.0.28/webapps/manager
Jul 18, 2012 10:38:27 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory /usr/apache-tomcat-7.0.28/webapps/GeneTest
Jul 18, 2012 10:38:27 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Jul 18, 2012 10:38:27 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 2106 ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:17:07.570

升级后此堆栈跟踪显示应用程序端口已在使用中意味着进程已在运行尝试为应用程序使用不同的端口。或

在升级之前：RUNTIME 类路径具有重复的 TLD，您必须检查以下路径到 appserver 的 /lib 文件夹或 JDK 的 /lib 文件夹，然后在 WAR 构建的 /WEB-INF/lib 文件夹中再次检查。如果 appservers/lib 或 JDK 的/lib 文件夹中已经存在 tld，请从 webapps/lib 文件夹中删除

# opengl - OpenGL - 为什么要删除矩阵堆栈以及人们现在使用什么？

> ID：11516510
> 
> 赞同：6
> 
> 时间：2012-07-17T05:30:38.357
> 
> 标签：opengl, matrix, stack

我正在阅读 OpenGL Superbible Fifth Edition，他们通过自己的课程讨论使用堆栈。这一切都很好，但他们提到矩阵堆栈已被弃用。为什么它们被弃用，人们用什么代替它们？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T00:52:00.607

原因是政治性的，而不是技术性的，并且可以追溯到 2000 年代初期。

OpenGL 3 是第一个愿意打破向后兼容性的版本。设计者希望为专业用户、游戏程序员和高端可视化编码人员创建一个 API，他们对着色器了如指掌并编写了自己的矩阵代码。目的是 OpenGL 3 API 应该与实际硬件非常匹配。（即使在 OpenGL 1/2 中，矩阵堆栈通常是在 CPU 端实现的，而不是 GPU。）

从游戏引擎程序员的角度来看，这更好。嘿，如果你必须每隔几年开发一个新的游戏引擎，那么丢弃旧代码有什么大不了的？

这个设计过程的结果是 OpenGL 3/4 核心配置文件。

一旦“新一代”OpenGL 发布，大学和公司中所有不那么专业的编码人员都意识到他们会被搞砸。这些人（像我一样）教授 3D 图形或编写用于研究或设计的实用程序。我们不需要比普通环境漫反射镜面更高级的照明。我们经常不得不将来自不同来源的代码混合在一起，而这只有在每个人都使用完全相同的矩阵、光照和纹理约定时才容易实现——就像 OpenGL 2 提供的那样。

此外，我听说但无法证实，大型 CAD/CAM 公司意识到他们也会被搞砸。如果您有付费（而且薪酬很高：比较 Quadro 与 GeForce 或 FireGL 与 Radeon 的价格）客户，那么从十年的开发中丢弃 200 万行代码并不是一种选择。

所以 NVIDIA 和 ATI 都宣布他们会尽可能长时间地支持旧的 API。

这种压力的结果是兼容性配置文件。OpenGL ARB 现在似乎已经意识到，虽然他们希望每个人都切换到核心配置文件，但这不会发生：阅读 OpenGL 4 中镶嵌着色器的扩展规范，它提到 GL_PATCHES 将与 glBegin 一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T23:42:50.507

> 为什么他们被弃用

因为没有人真正在现实世界的 OpenGL 程序中使用它。以物理模拟为例：无论如何，您会将所有对象放置作为 4×4 矩阵存储在物理系统中。所以你就用那个。可见对象确定和动画系统也是如此。无论如何，所有这些都需要实现矩阵数学，因此在 OpenGL 中使用它是相当多余的，因为大多数时候已经存在的矩阵只是简单地放入`glLoadMatrix`.

> 人们用什么来代替它们？

他们以前使用的：他们的动画系统、物理模拟器、场景图等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T07:41:15.877

Matrix Stack（和其余的矩阵函数）仅在核心配置文件中被弃用。在兼容性配置文件中，您应该仍然可以使用它们。

从我的角度来看，它已被删除，因为大多数引擎/框架都有自定义数学代码和着色器统一样式，用于将矩阵发送到着色器。

尽管对于简单的程序/教程，使用和搜索其他内容非常不方便。

我建议使用：

*   glm ( [http://glm.g-truc.net/](http://glm.g-truc.net/) )
*   非常简单的数学库（[vsml](http://www.lighthouse3d.com/very-simple-libs/vsml/vsml-in-action/)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T10:44:06.200

对我来说，第一个也是主要原因是随着可编程着色器的兴起（在第三版 opengl 之后是强制性的），所有自动传输到着色器的变量，例如 GL_PROJECTION 和 GL_MODELVIEW 都从着色器中删除，因此用户必须定义​​自己的矩阵才能在着色器中使用它。由于您必须使用 Uniform 函数手动发送矩阵，因此您不再需要固定变量。

# java - 识别 Java 类的 Java 应用程序

> ID：11516515
> 
> 赞同：-8
> 
> 时间：2012-07-17T05:31:17.047
> 
> 标签：java, compilation

我需要编写一个识别 java 类并打印出“这是一个 Java 类”的 Java 应用程序 如果该类有错误或来自另一种语言，它会打印出“这不是 Java 类”

请帮忙。

建议和源代码将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T05:34:34.383

您可能需要一个[**上下文无关的语法**](http://en.wikipedia.org/wiki/Context-free_grammar)来**根据 java 的规则解析该类，**并确保它确实是一个 java 有效的类。

[**JavaCC**](http://javacc.java.net/)是一个为您提供此功能的库。

您所描述的部分是在编译理论上检查程序是否有效 - 这是编译程序的第一步，也称为其（编译器的）[前端](http://en.wikipedia.org/wiki/Semantic_analysis_%28compilers%29#Front_end)。如果您想了解更多理论知识如何完成，您可能需要搜索：

1.  [词法分析](http://en.wikipedia.org/wiki/Lexical_analysis)
2.  [句法分析](http://en.wikipedia.org/wiki/Parsing)
3.  语义分析

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:37:06.137

最快的方法可能是使用 Java Compiler Api 并尝试在运行时编译该类。如果编译，则结果是成功，如果不是，则很难确定这是由于错误，还是因为它来自其他语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T07:18:05.597

也许你可以用[`Class.forName("classname")`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName%28java.lang.String%29)它来加载它。如果你得到一个异常，那么它不是一个类文件。

如果它是一个非常简单的应用程序，那么也许您可以将文件作为流获取。如果前 32 位数据不是`0xCAFEBABE`，那么它不是类文件。`0xCAFEBABE`是类文件定义中的一个幻数。

# android - Android 应用程序不显示用于启用 gps 的 alertBox

> ID：11516517
> 
> 赞同：-1
> 
> 时间：2012-07-17T05:31:25.253
> 
> 标签：android, location

```
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Log.i(TAG, "INSIDE onCreate");

    //ACCESSING LOCATION MANAGER

    String svcName=Context.LOCATION_SERVICE;
    locationmanager=(LocationManager)getSystemService(svcName);

    //SPECIFY THE CRITERIA

    criteria.setAccuracy(Criteria.ACCURACY_MEDIUM);
    criteria.setPowerRequirement(Criteria.POWER_MEDIUM);
    criteria.setAltitudeRequired(false);
    criteria.setBearingRequired(false);
    criteria.setSpeedRequired(false);
    criteria.setCostAllowed(false);

    //get the list of providers

    provider=locationmanager.getBestProvider(criteria, true);

     if(provider==null)
     {
         Log.i(TAG, "inside enable gps");
         final boolean enablegps = locationmanager.isProviderEnabled(LocationManager.GPS_PROVIDER);
         //show dialog box and enable gps..
         if(!enablegps)
         {

             Log.i(TAG, "dialog box");

final AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(Wmi2Activity.this);

        // set title
        alertDialogBuilder.setTitle("Is GPS Enable??");

        // set dialog message
        alertDialogBuilder
                         .setMessage("Click yes to exit!")
                         .setCancelable(false)
                          .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                public void onClick(final DialogInterface dialog,final int id) {

                                             //gotoEnablrGPS();
                     dialog.cancel();

                }
              });
            alertDialogBuilder.setNegativeButton("No",new DialogInterface.OnClickListener() {
                public void onClick(final DialogInterface dialog,final int id) {
                    // if this button is clicked, just close
                    // the dialog box and do nothing
                    dialog.cancel();
                }
            });

            // create alert dialog
            AlertDialog alertDialog = alertDialogBuilder.create();

            // show it
            alertDialog.show();
}

                }
         else{
         mylocation.setText("no location provider available");
         }

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T10:27:22.993

将代码更改为：

```
final AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(Wmi2Activity.this); 
```

至：

```
alertDialog.show(); 
```

到这段代码：

```
new AlertDialog.Builder().setTitle("Is GPS Enable??")       
                     .setMessage("Click yes to exit!")
                     .setCancelable(false)
                      .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
            public void onClick(final DialogInterface dialog,final int id) {

                                         //gotoEnablrGPS();
                 dialog.cancel();

            }
          }).setNegativeButton("No",new DialogInterface.OnClickListener()     {
            public void onClick(final DialogInterface dialog,final int id) {
                // if this button is clicked, just close
                // the dialog box and do nothing
                dialog.cancel();
            }
        }).create().show(); 
```

它可能会起作用。

# php - 如何使用 zend gdata 检索用户配置文件信息

> ID：11516527
> 
> 赞同：1
> 
> 时间：2012-07-17T05:32:07.270
> 
> 标签：php

我已经使用 oauth（使用了 zend gdata 库）对 youtube 用户进行了身份验证。

```
$url = Zend_Gdata_AuthSub::getAuthSubTokenUri($returnUrl, $this->scope, $this->isSecure, $this->isSession);
$httpClient = Zend_Gdata_AuthSub::getHttpClient(Yii::app()->user->sessionToken); 
```

如何检索用户个人资料信息（我需要他/她的用户名）？从 zend gdata 文档中，我找到了以下代码：

```
$yt = new Zend_Gdata_YouTube();
$userProfile = $yt->getUserProfile('liz'); 
```

但是，使用 oauth 身份验证，我不知道用户名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:47:09.107

我只是遇到了同样的问题，找到了隐藏在[这些响应中的解决方案](http://gdatatips.blogspot.com.au/2008/09/secure-authsub-using-zend-php-library.html)

```
$yt->getUserProfile("default")->username->text; 
```

这将为您提供当前经过身份验证的用户的用户名

# c++ - 如何从 HTTP 中打开 C++ 中的 URL 不是文件位置的文件

> ID：11516531
> 
> 赞同：1
> 
> 时间：2012-07-17T05:32:18.560
> 
> 标签：c++, http

我是一年级的comp sci 学生，对C++ 有一定的了解，我正在尝试使用新的美国人口普查局API 组合一个实用程序。它获取诸如州/县/人口普查区和所需表格之类的 ID 代码，然后为所需位置返回所需表格。

[这是一个查询加利福尼亚和纽约人口统计数据的示例。](http://thedataweb.rm.census.gov/data/2010/acs5?key=2fee2a7db5a7ddc4a7321ff7e3002176e1ce86c3&get=B02001_001E,NAME&for=state:06,36)

更多示例可以在这里找到：[http ://www.census.gov/developers/](http://www.census.gov/developers/)

我的问题是我从来没有处理过来自 HTTP 的文件，而且我不确定如何处理输出纯文本但实际上并没有指向文件位置的 URL。是否可以只使用标准输入？我不明白如何处理人口普查查询 URL 之一给出的输出。

现在我正在使用我*知道*不正确的 infile，但我也不确定是否有正确的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:53:58.470

您收到的数据（显然）是动态生成的，而不是来自文件，这一事实对您没有任何影响——无论哪种方式，您都会得到相同的字节流。

我的直接建议是使用[`cURL`](http://curl.haxx.se/)这项工作。你的大部分工作是生成一个正确的 URL，这是 cURL 擅长的。然后它可以很容易地获取数据。从那里，您可以使用许多 JSON 解析器库中的任何一个（例如，[yajl](http://lloyd.github.com/yajl/)），或者您可以自己解析它（JSON 足够简单，使其相当实用）。一个快速的谷歌表明相当多的人已经这样做了，并且有各种博客文章和关于如何做到这一点的信息（尽管我怀疑其中大部分可能是不必要的）。

# iphone - Xcode 4.3.2 - 用于分发应用程序的基础 SDK

> ID：11516533
> 
> 赞同：0
> 
> 时间：2012-07-17T05:32:43.177
> 
> 标签：iphone, ios, app-store

我第一次尝试将 iPhone 应用程序分发到 App Store。目前，我正在遵循本指南：[将 iPhone 应用程序提交到 Apple App Store - 一步一步指南](http://www.edumobile.org/iphone/iphone-programming-tutorials/submitting-iphone-apps-to-the-apple-app-store-a-step-by-step-guide/)。目前，我正处于必须设置`Base SDK`字段值的步骤。看，截图。

![Xcode 4.3.2 - BaseSDK 选择截图](../Images/bdfca11162f96158f800828ca39125c6.png)

如您所见，`iOS 5.1`是那里唯一可用的选择。现在，如果我将其设置为`Latest iOS(iOS 5.1)`- 默认值 - 分布式应用程序将能够在较旧的操作系统上运行，例如 iOS 3 或 iOS 4？如果没有，那么我将如何使其在旧操作系统上运行。或者，我有什么误解`BaseSDK`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:37:55.297

不用担心它会在较旧的操作系统中运行，您需要保持部署目标最小 SDK，如果您使用 IOS 4 和 5 的模拟器更新 xcode，您可以在图片中找到它，您可以获得这些选项 ![在此处输入图像描述](../Images/548dd337735c218d5bc5412939ea26cc.png)

**更新** 基本上这意味着您将能够使用 5.1 SDK 中公开的所有 API。这与“您的应用程序可以在哪部手机上运行”无关。

另一方面，iOS 部署目标是询问您该应用程序可以运行哪些设备。这是一个非常危险的问题，因为你可以说从 iOS 3.0 到 5.1 的例子。这意味着您的应用程序可以安装在任何运行 iOS 3.0 到 5.1 的 iPhone 上，无论是什么手机。这意味着如果原始 iPhone 和 iPhone 3G 至少安装了 iOS 3.0，则它们可以运行您的应用程序。如果您决定这样做，您应该仔细测试您的应用程序。Apple 不提供在旧操作系统上进行测试的任何方法。您必须自己制定该策略。

# android - 加速度计传感器

> ID：11516537
> 
> 赞同：0
> 
> 时间：2012-07-17T05:32:56.840
> 
> 标签：android, accelerometer, sensors, gyroscope, tilt-sensor

我是android的新手。只是想知道陀螺仪如何在 android 中工作。是安装在里面的任何硬件还是它到底是什么？另外，想知道陀螺仪和加速度计传感器是否相关？

提前致谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:46:25.857

陀螺仪是测量速率（角速度）变化的设备，加速度计测量 x、y 和 z 方向的速度变化。

这些设备具有内部机制（由电容器、滤波器、ADC 组件和接口（I2c、spi）组成）将这些模拟输出传送到数字世界，并由软件（传感器融合库）解释。

在设备（手机或平板电脑）中，它们可能会或可能不会作为单独的模块（芯片）出现，但请确保它们直接或通过某些目标 MCU 连接到手机的 MCU（它们通过 I2C 等接口连接到或 SPI）。

没有陀螺仪和加速度计没有任何关系，但它们的数据在基于某些算法（传感器融合库的组成）组合在一起时给出了设备的方向，并且可能有助于翻转屏幕，因为它们输出。-RP

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T07:26:23.517

至于你的第一个问题，谷歌“gyro MEMS”。例如，您会发现[MEMS 惯性传感技术概述](http://www.sensorsmag.com/sensors/acceleration-vibration/an-overview-mems-inertial-sensing-technology-970)。

[你的第二个问题在这里](https://stackoverflow.com/a/5541875/341970)得到解答。

# c# - 在 switch 案例中，Enum 或 Int 哪个具有更好的性能？

> ID：11516540
> 
> 赞同：7
> 
> 时间：2012-07-17T05:33:04.163
> 
> 标签：c#, casting, enums, switch-statement

在考虑使用 enum 和 int 作为 case 参数的 switch case 的性能时，使用哪个代码段更好：

**一种。**

```
switch ((ToolbarButton)BtnId)
{
    case ToolbarButton.SHOWPROPERTYDIALOG:
         OnShowProperties();
         break;
    case ToolbarButton.MOVETOFIRST:
         OnFirstMessage();
         break;
    case ToolbarButton.MOVETOLAST:
         OnLastMessage();
         break;
} 
```

**B.**

```
switch (BtnId)
{
     case (int)ToolbarButton.SHOWPROPERTYDIALOG:
          OnShowProperties();
          break;
     case (int)ToolbarButton.MOVETOFIRST:
          OnFirstMessage();
          break;
     case (int)ToolbarButton.MOVETOLAST:
          OnLastMessage();
          break;
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-17T05:34:04.487

编译后，`Enums` ***ARE*** `Ints`。

MSIL 没有任何区别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T06:18:01.570

编译时，JIT 将 Enums 替换为 Int32 类型。这称为内联替换，因此不会影响性能。我更喜欢使用枚举，因为它们增加了可读性并且也可以回溯（查找参考）。

# android - 如何从自定义表面视图设置按钮的可见性？

> ID：11516542
> 
> 赞同：1
> 
> 时间：2012-07-17T05:33:15.437
> 
> 标签：android, button

所以基本上我在安卓上制作了一个非常简单的游戏。在我的里面`Activity`我有一个`SurfaceView`和一些`Buttons`标签**play** and **restart**。我相应地设置了可见性，`Buttons`以便当游戏处于菜单状态时，它将播放按钮设置为可见，而在游戏状态下，它设置为 GONE。重新开始按钮始终设置为 GONE，直到玩家输掉游戏。我的问题是，当游戏处于丢失状态时，如何从主`SurfaceView`访问**重新启动**按钮`Activity`将其设置为可见？这是它应该如何工作，还是有其他方法？我对android有点陌生，但我认为这非常重要，因此用户可以真正浏览应用程序，尤其是在游戏中。也许我必须回到一些初学者的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:42:12.040

根据您的类结构，设置一个成员变量来保存对您的按钮的引用，或者，如果您保存的是上下文或主布局，请使用 Activity.findViewById(ButtonID) 或父视图 View.findViewByID(ButtonID)。或者你可以引入一个新的例如 OnGameState 接口，当游戏状态改变时它的实现会得到通知。然后其中一种实现将设置按钮的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T05:41:19.620

以编程方式编写一个新的重新启动按钮，将其添加到“丢失/游戏结束”活动的布局中。为其编写适当的代码`onClick()`（类似于完成当前活动并启动“新游戏”活动）。

# android - 如何从 .t tf 文件在画布上绘制字形

> ID：11516543
> 
> 赞同：3
> 
> 时间：2012-07-17T05:33:20.297
> 
> 标签：android, truetype

Android 不`Urdu Nastaliq`正确支持字体（单词被打散并且单词的确切形状（Nastaliq）未制作）。

我为此使用了字体

```
TextView tx=(TextView)this.findViewById(R.id.tt);
tx.setTypeface(Typeface.createFromAsset(getAssets(),"TTF font Path")); 
```

我能够使用 AWT 包在 java 中获得 Nasaliq 字体的确切格式，例如

```
Font font = Font.createFont(Font.TRUETYPE_FONT, new File("Path for ttf file"));
Font dynamicFont32Pt =   font.deriveFont (32f);
JLabel textLabel = new JLabel(textMessage);
textLabel.setFont(dynamicFont32Pt); 
```

但是Android也不支持AWT Package Properly（`java.awt.Font.createFont()`和`deriveFont()`），所以我们决定为Urdu的.ttf文件制作一个渲染引擎。

现在我的问题是——

1.  我们可以在不需要渲染引擎的情况下在 Android 中（正确地）渲染 urdu 字体吗？如果没有，那么
2.  如何在 Android 中读取 .ttf 文件（所有表格，如“glyp”、“head”）？
3.  如何绘制一个TTF字体，即不需要PNG的矢量字体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:48:39.553

[从 ttf 文件中提取字形路径信息](https://stackoverflow.com/questions/2981262/extracting-glyph-path-information-from-ttf-files)问题的答案可能会让您感兴趣：基本上，它指向 Batik 库，该库具有在 Java 中解析 TTF 文件的代码（将其转换为 SVG）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-13T05:05:04.597

您应该检查我的问题[如何使用从 TTF 文件中提取的字距调整对正确地将字形显示为 Java 中的 Path2D？](https://stackoverflow.com/questions/64761064/how-to-use-kerning-pairs-extracted-from-a-ttf-file-to-correctly-show-glyphs-as-p/64777046). [我推荐使用Apache FOP](https://github.com/jaredrummler/TrueTypeParser)而不是 Batik 。它简单易用。优点是您只需阅读一次字体并将字形嵌入到您的应用程序中。然而，[Apache FOP](https://github.com/jaredrummler/TrueTypeParser)仅适用于 TTF，不适用于 OTF（也有可能，但我仍在努力）。Batik 使用 Java AWT 来呈现字符串。问题是您的应用程序每次运行时都需要读取字体文件。在我建议的方法中，您可以使用嵌入式迷你矢量化字体，或者您可以将嵌入式矢量化字符串用于小文本。这种方法的问题是宽度只能在绘画时间内正常工作。为了能够使用您使用 awt 从字体文件中恢复的字形，您需要直接从文件中读取字距调整对和宽度，以便能够正确显示文本。这在问题的答案中进行了[解释](https://stackoverflow.com/questions/64761064/how-to-use-kerning-pairs-extracted-from-a-ttf-file-to-correctly-show-glyphs-as-p/64777046)。另请检查问题[如何从 Android 中的 TTF 文件中读取字距调整对表？](https://stackoverflow.com/questions/35010436/how-to-read-kerning-pairs-table-from-ttf-file-in-android/64758350). 使用矢量化字形的优点是您的应用程序独立于字体文件和操作系统。

你可以看到我在 Windows 上使用这个系统，但你可以在 Android 上做同样的事情。字体在 Windows 上更容易处理，并且大多数字体都是 TTF。实际上，您可以在 Windows 上开发矢量化字体，然后在 Android 中使用生成的类。这就是这种方法的美妙之处。我使用生成我的字体`println`并将其复制并粘贴到一个新的类文件中。我什至懒得写文件。

# python - 从列表中生成 subprocess.call 参数

> ID：11516545
> 
> 赞同：0
> 
> 时间：2012-07-17T05:33:40.933
> 
> 标签：python

我正在使用 subprocess 模块来执行带有参数的命令行软件，但是在为其提供参数列表时遇到了一些麻烦。

这是我正在做的事情：

```
subprocess.call([rv,"[",rv_args[0],rv_args[1],"]",]) 
```

这很好用并且**len(rv_args) == 2**，现在我想生成这个：

```
if len(rv_args) == 4 :
    subprocess.call([rv,"[",rv_args[0],rv_args[1],"]","[",rv_args[2],rv_args[3],"]",]) 
```

然后

```
if len(rv_args) == 6 :
    return subprocess.call([rv,"[",rv_args[0],rv_args[1],"]","[",rv_args[2],rv_args[3],"]","[",rv_args[4],rv_args[5],"]"]) 
```

等等..等等..

当然我不想硬编码它，而是动态生成它，你是最好的方法吗？

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:17:32.533

这是一种方法：

```
rv = "command"
rv_args = [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

def get_arguments(rv, rv_args):
    arguments = [rv]
    for i in xrange(0, len(rv_args), 2):
        arguments += ["["] + rv_args[i:i+2] + ["]"]

    return arguments

print get_arguments(rv, rv_args) 
```

返回：

```
['command', '[', 1, 2, ']', '[', 3, 4, ']', '[', 5, 6, ']', '[', 7, 8, ']', '[', 9, 10, ']'] 
```

# c# - 在 C# 中保存包含所有内容的网页

> ID：11516546
> 
> 赞同：3
> 
> 时间：2012-07-17T05:33:50.563
> 
> 标签：c#, .net, web-scraping, webpage

我正在尝试保存网页（就像我们在浏览器中所做的那样）及其所有内容和格式。我尝试了 WebClient、WebRequest 示例，但它们只能下载文本部分，有时还可以下载 javascript。但是没有 css 和图像等。.Net 中是否有任何 api 或 .net 的任何 3rd 方 api？

这是可能的，我认为这是因为许多应用程序正在运行以进行离线阅读，并且它们以相同的格式和样式显示已保存的页面。它是如何完成的？有任何想法吗 ？

**编辑 1：** 可以使用 HtmlAgilityPack 解析和保存网页。但是有什么方法可以将主要文章和其他内容（如广告，其他外部链接）分开。有什么方法可以区分相关内容和不相关内容吗？（对不起，如果这个问题不清楚）。

也有人可以提出一些建议，说明这些离线阅读应用程序（如稍后阅读/袖珍等）如何保存网页并对其进行格式化。

有没有办法在 C# 中做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T05:40:39.363

您可以将页面文本下载为 Html，然后对其进行解析并获取`<link rel="stylesheet" type="text/css" href="...">`或`<img src="..."/>`元素并下载属性`href`或`src`单独的链接。

[HtmlAgilityPack](http://html-agility-pack.net/?z=codeplex)是一个可靠且有用的 Html 解析库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T05:40:12.473

你可以使用[wget](http://gnuwin32.sourceforge.net/packages/wget.htm)

[https://www.gnu.org/software/wget/manual/html_node/Recursive-Download.html#Recursive-Download](https://www.gnu.org/software/wget/manual/html_node/Recursive-Download.html#Recursive-Download)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T05:53:39.023

您可以尝试将页面保存为`mht`文件。这些文件将网页及其所有引用捆绑到一个压缩文件 (.mht) 中

[Stackoverflow主题关于mht via c#](https://stackoverflow.com/questions/9999876/generate-mht-file-programmatically)

注意：MHT 是由 Microsoft 引入的。并非所有浏览器都符合这种格式。Opera 是唯一具有 MHT 保存的其他流行浏览器。Firefox 用户虽然可以调用两个附加组件来处理此文件标准，Mozilla 存档格式和 UnMHT。这两个插件都可以安装并用于打开和保存完整的网页。

# spring - SpringsourceToolSuite 中的 Spring 和 Maven 获取 java.lang.ClassNotFoundException: org.springfamework.web.servlet.DispatcherServlet 错误

> ID：11516553
> 
> 赞同：0
> 
> 时间：2012-07-17T05:34:41.180
> 
> 标签：spring, maven, classnotfoundexception, sts-springsourcetoolsuite

我创建了一个使用安装了 Dali JPA 工具的 Spring STS。我创建了一个 JPA 项目并将其转换为 Maven 项目。我正在尝试添加 SpringMVC 功能。

这是我的 web.xml ：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">

  <display-name>dcspitter</display-name>

  <servlet>
    <servlet-name>dcspitter</servlet-name>
    <servlet-class>org.springfamework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>dcspitter</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

</web-app> 
```

这是我的 pom.xml。它基本上是从添加了 hibernate-core 的 Spring MVC 模板项目中复制而来的。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.dchesterman</groupId>
<artifactId>dcspitter</artifactId>
<name>DCSpitter</name>
<packaging>war</packaging>
<version>1.0.0-BUILD-SNAPSHOT</version>
<properties>
    <java-version>1.6</java-version>
    <org.springframework-version>3.1.0.RELEASE</org.springframework-version>
    <org.aspectj-version>1.6.9</org.aspectj-version>
    <org.slf4j-version>1.5.10</org.slf4j-version>
</properties>
<dependencies>
    <!-- Spring -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${org.springframework-version}</version>
        <exclusions>
            <!-- Exclude Commons Logging in favor of SLF4j -->
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
             </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>

    <!-- AspectJ -->
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>${org.aspectj-version}</version>
    </dependency>   

    <!-- Logging -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${org.slf4j-version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.15</version>
        <exclusions>
            <exclusion>
                <groupId>javax.mail</groupId>
                <artifactId>mail</artifactId>
            </exclusion>
            <exclusion>
                <groupId>javax.jms</groupId>
                <artifactId>jms</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jdmk</groupId>
                <artifactId>jmxtools</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jmx</groupId>
                <artifactId>jmxri</artifactId>
            </exclusion>
        </exclusions>
        <scope>runtime</scope>
    </dependency>

    <!-- @Inject -->
    <dependency>
        <groupId>javax.inject</groupId>
        <artifactId>javax.inject</artifactId>
        <version>1</version>
    </dependency>

    <!-- Servlet -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <!-- Test -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.7</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.5.SP1</version>
    </dependency>
</dependencies>
<build>
    <plugins>
        <plugin>
            <artifactId>maven-eclipse-plugin</artifactId>
            <version>2.9</version>
            <configuration>
                <additionalProjectnatures>
                    <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                </additionalProjectnatures>
                <additionalBuildcommands>
                    <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
                </additionalBuildcommands>
                <downloadSources>true</downloadSources>
                <downloadJavadocs>true</downloadJavadocs>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <compilerArgument>-Xlint:all</compilerArgument>
                <showWarnings>true</showWarnings>
                <showDeprecation>true</showDeprecation>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>
            <configuration>
                <mainClass>org.test.int1.Main</mainClass>
            </configuration>
        </plugin>
    </plugins>
</build>
</project> 
```

这是我在 STS 的 vmWare Fabric 服务器中部署的错误。

```
SEVERE: Servlet /dcspitter threw load() exception
java.lang.ClassNotFoundException: org.springfamework.web.servlet.DispatcherServlet
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:525)
at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:507)
at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:124)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1136)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5015)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1585)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

如果我导出为 WAR，我会在 WEB-INF/lib 中看到 jar。我在部署程序集和 Java 构建路径中包含 Maven 依赖项。

![mvn依赖项](../Images/a57f771d3035c0a1a753ffcd32dc76e8.png)

任何想法为什么我会收到此错误？

谢谢大家。

# php - PHP 获取 array() 值成为 $variable

> ID：11516555
> 
> 赞同：0
> 
> 时间：2012-07-17T05:34:49.230
> 
> 标签：php, arrays, variables

好的，所以我有这个数组：

```
 $choices = array($_POST['choices']); 
```

当使用 var_dump() 时，这个输出：

```
array(1) { [0]=> string(5) "apple,pear,banana" } 
```

我需要的是那些成为变量的值以及作为字符串添加的值。所以，我需要输出是：

```
 $apple = "apple";
 $pear = "pear";
 $banana = "banana"; 
```

数组的值可能会改变，因此必须根据该数组中的内容创建变量。

我将不胜感激所有帮助。干杯

标记

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T05:38:35.513

怎么样

```
$choices = explode(',', $_POST['choices']);
foreach ($choices as $choice){
    $$choice = $choice;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:59:20.643

```
$str = "apple,pear,pineapple";
$strArr = explode(',' , $str);
foreach ($strArr as $val) {
    $$val = $val;
}
var_dump($apple); 
```

这将满足您的要求。然而，问题来了，因为你无法预先定义有多少变量以及它们是什么，你很难正确使用它们。在使用 $VAR 之前测试“isset($VAR)”似乎是唯一安全的方法。

您最好将源字符串拆分为一个数组，然后只操作特定数组的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T06:22:48.073

我必须同意所有其他答案，即这是一个非常糟糕的主意，但是每个现有答案都使用一种有点迂回的方法来实现它。

PHP 提供了一个函数[extract](http://www.php.net/extract)，用于将数组中的变量提取到当前作用域中。在这种情况下，您可以像这样使用它（首先使用 explode 和 array_combine 将您的输入转换为关联数组）：

```
$choices = $_POST['choices'] ?: ""; // The ?: "" makes this safe even if there's no input
$choiceArr = explode(',', $choices); // Break the string down to a simple array
$choiceAssoc = array_combine($choiceArr, $choiceArr); // Then convert that to an associative array, with the keys being the same as the values
extract($choiceAssoc, EXTR_SKIP); // Extract the variables to the current scope - using EXTR_SKIP tells the function *not* to overwrite any variables that already exist, as a security measure
echo $banana; // You now have direct access to those variables 
```

有关为什么这是一种不好的方法的更多信息，请参阅关于现已弃用的[register_globals](http://php.net/manual/en/security.globals.php)设置的讨论。简而言之，它使编写不安全的代码变得容易得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T05:37:37.587

在其他语言中通常称为“拆分”，在 PHP 中，您会想要使用[explode](http://php.net/manual/en/function.explode.php)。

**编辑：**实际上，您想做的事情听起来……很危险。这是可能的（并且是 PHP 的一个旧“功能”），但强烈反对。我建议只是分解它们并将它们的值作为关联数组的键：

```
$choices_assoc = explode(',', $_POST['choices']);
foreach ($choices as $choice) {
    $choices_assoc[$choice] = $choice;
} 
```

# iphone - 如何从子视图的视图控制器设置导航栏的标题？

> ID：11516556
> 
> 赞同：3
> 
> 时间：2012-07-17T05:34:54.473
> 
> 标签：iphone, ios, ios4, iphone-sdk-3.0

我有一个在启动时有导航栏的视图控制器。
在一些 UIViewConrollers 之后，我添加了一个标签栏控制器，其中我为每个标签栏创建了四个标签栏和四个视图控制器。
现在，如果我创建带有与每个选项卡相关的导航栏的选项卡栏，它会在顶部显示两个导航栏，如果创建没有导航栏的选项卡栏，它将只显示一个选项卡栏，但我无法添加对应于每个选项卡视图控制器的标题到该导航bar
这是我创建标签栏的代码

```
EventDetailViewController *firstViewController = [[EventDetailViewController alloc]init];
firstViewController.tabBarItem = [[[UITabBarItem alloc]initWithTitle:@"Home" image:[UIImage imageNamed:@"Multimedia-Icon-Off.png"] tag:2]autorelease];                                 MoreInfo *secondViewController = [[MoreInfo alloc]init];
secondViewController.tabBarItem = [[[UITabBarItem alloc]initWithTitle:@"Info" image:[UIImage imageNamed:@"Review-Icon-Off.png"] tag:0]autorelease];

PlaceInfoViewController *thirdViewController = [[PlaceInfoViewController alloc]init];
thirdViewController.tabBarItem = [[[UITabBarItem alloc]initWithTitle:@"Lugar" image:[UIImage imageNamed:@"Place-icon-OFF.png"] tag:1]autorelease];

FavoritesViewController *forthViewController = [[FavoritesViewController alloc]init];
forthViewController.tabBarItem = [[[UITabBarItem alloc]initWithTitle:@"Compartir" image:[UIImage imageNamed:@"Compartir-Icon-Off.png"] tag:3]autorelease];

UITabBarController *tabBarController = [[UITabBarController alloc] initWithNibName:nil bundle:nil];
tabBarController.viewControllers = [[NSArray alloc] initWithObjects:firstViewController, secondViewController, thirdViewController, forthViewController, nil];
tabBarController.view.frame = self.view.frame;
[self.view addSubview:tabBarController.view];

[firstViewController release];
[secondViewController release];
[thirdViewController release];
[forthViewController release]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T05:54:06.653

您可以获得对视图控制器的引用`navigationItem`并设置其`title`.

```
[[aViewController navigationItem] setTitle:@"My Title"]; 
```

请注意，如果您还没有这样做，您需要将所有视图控制器嵌入到导航控制器中。这样，他们实际上将获得带有导航项的导航栏，而您不必自己绘制任何内容。

```
NSMutableArray *tabs = [NSMutableArray array];

UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:firstViewController];
[tabs addObject:nav];
nav = [[UINavigationController alloc] initWithRootViewController:secondViewController];
[tabs addObject:nav];
...

[tabBarController setViewControllers:tabs]; 
```

* * *

**编辑：**您的标签栏控制器位于导航控制器内，因此您需要先获取对标签栏控制器的引用。试试你的视图控制器`[[[self tabBarController] navigationItem] setTitle:...]`的`viewDidLoad`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T06:07:07.240

请转到 EventDetailViewController.m 并定义以下方法。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
    self.title = NSLocalizedString(@"Catalogues", @"Catalogues");
    //self.tabBarItem.image = [UIImage imageNamed:@"book"];

}
return self;
} 
```

希望它会在每个 viewController.m 中定义上述初始化程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T17:52:35.537

您不能为标签栏控件设置标题。您必须在每个视图控制器上使用 UINavigationBar

对于 UINavigationBar：将导航栏拖到您的 xib/nib 然后添加标题或以编程方式进行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T05:20:18.883

通过将父导航项的引用传递给子视图控制器，我自己得到了解决方案。谢谢大家的帮助... :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T18:18:06.207

你不能设置导航栏的标题。在导航中设置视图或子视图的标题。self.title=@"欢迎"; 只需设置标题。

# objective-c - 在 iOS 中实现一个简单的折线图

> ID：11516560
> 
> 赞同：0
> 
> 时间：2012-07-17T05:35:26.780
> 
> 标签：objective-c, ios, xcode, ipad

在我的 iPad 应用程序中实现简单折线图的最佳方法是什么。我只想绘制 4-8 个点，并且图表确实需要看起来很漂亮。HTML5 足以满足我的需要。我将如何实现 HTML 代码来绘制折线图？我一直在考虑使用 Google Charting Tools，但还有其他可以使用的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:59:04.433

这是一个非常基础的课程，它将为您提供基本路线。Y 轴需要一个 NSNumbers 的 NSArray。它应该为您提供一个很好的起点，因为它非常简单。您可以考虑为点和轴标记添加标签以提供比例感。

标题：

```
#import <UIKit/UIKit.h>

@interface SOGenericGraphView : UIView {
    NSArray *yValues;
}

@property (strong, atomic) NSArray *yValues;

@end 
```

执行：

```
#import "SOGenericGraphView.h"

@implementation SOGenericGraphView

@synthesize yValues;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        self.backgroundColor = [UIColor whiteColor];
    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
    [super drawRect:rect];
    CGRect insetRect = CGRectInset(self.frame, 10, 15);
    double maxSpeed = [[yValues valueForKeyPath:@"@max.doubleValue"] doubleValue];
    CGFloat yRatio = insetRect.size.height/maxSpeed;
    CGFloat xRatio = insetRect.size.width/(yValues.count-1);
    UIBezierPath *sparkline = [UIBezierPath bezierPath];
    for (int x = 0; x< yValues.count; x++) {
        CGPoint newPoint = CGPointMake(x*xRatio + insetRect.origin.x, insetRect.size.height - (yRatio*[[yValues objectAtIndex:x] doubleValue] - insetRect.origin.y));
        if (x == 0) {
            [sparkline moveToPoint:newPoint];
        }
        else {
            [sparkline addLineToPoint:newPoint];
        }
    }
    [[UIColor redColor] set];
    [sparkline stroke];
}

@end 
```

# html - 在提交实际表单之前接受弹出窗口中的输入

> ID：11516565
> 
> 赞同：1
> 
> 时间：2012-07-17T05:36:38.553
> 
> 标签：html, spring, forms, popup

我正在使用 Springs 2.0 开发应用程序。

我有一个要求，当用户单击表单上的提交按钮时，应该显示一个弹出窗口，显示一个“选择”框以选择预定义的原因和一个“文本区域”以接受评论。（这些下拉选项是从上下文中选择的，因此不能使用静态 HTML 页面。）

这两个值也应该与父表单中的其他数据字段一起存储在数据库中。

我的问题是：如果我使用“window.open”，那么父表单数据不会被带到子窗口，因为它没有“提交”。也不能提交表单，因为它不会显示弹出窗口。

我尝试在网站上搜索解决方案，但找不到适合我的解决方案。任何帮助都会非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:40:02.567

使用 div 作为弹出窗口而不是新窗口。或者使用 JQuery。示例，[messi popup](http://marcosesperon.es/apps/messi/)正在使用中

**编辑**

如果你只想要一些非常基本的东西，

```
<div id="modal" style="border:3px solid black; background-color:#9999ff; padding:25px; font-size:150%; text-align:center; display:none;">
    This is a modal popup!<br><br>
    <input type="button" value="OK" onClick="Popup.hide('modal')">
</div>

<a href="#" onclick="Popup.showModal('modal');return false;">Show Modal Popup</a>
<br>
<a href="#" onclick="Popup.showModal('modal',null,null,{'screenColor':'#99ff99','screenOpacity':.6});return false;">Show Modal Popup With A Custom Screen</a> 
```

[http://www.javascripttoolbox.com](http://www.javascripttoolbox.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T07:00:16.743

您可以使用[jQuery 模式](http://jqueryui.com/demos/dialog/)。这是一个类似的示例，它接受模态[http://jqueryui.com/demos/dialog/modal-form.html](http://jqueryui.com/demos/dialog/modal-form.html)中的输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T13:29:39.703

使用 window.showModalDialog 和普通 java 脚本解决了它。这是详细信息。

首先，我在父页面上定义了 2 个隐藏字段。当弹出窗口打开并提交时，下拉列表和文本区域中输入的值将分配给这些值。

```
var handle = window.showModalDialog(htmlURL,this,urlProp); 
```

提交时，

```
document.getElementById("hiddenRejectionComment").value = handle.rejectionComment;
document.getElementById("hiddenRejectionReason").value = handle.rejectionReason; 
```

很简单，不是吗？

# .net - razor view » 字符呈现为 Â»

> ID：11516567
> 
> 赞同：6
> 
> 时间：2012-07-17T05:36:45.517
> 
> 标签：.net, asp.net-mvc-3, razor

» 字符似乎在剃刀视图中呈现为 Â»。我试过了

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

和

```
@Html.Raw() 
```

但问题并没有消失。ASPX 视图没有这个问题。

此外，文化设置为

```
<globalization uiCulture="en" culture="en-US" /> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-17T06:07:11.490

我怀疑`.cshtml`包含此字符的视图/部分未使用带有签名编码的 UTF-8 保存。也对`_Layout`. 在 VS 中使用`Save As with encoding dialog`：

![在此处输入图像描述](../Images/a478125672e680cc78d98f9e9a4a957c.png)

还要确保您已将`»`角色原样放在您的视图中。不是来自字符串、XML 或数据库。如果它来自其他地方，请确保在您阅读它时它没有损坏。如果是这种情况，请显示检索您尝试在视图中输出的字符串的代码。

关于您的元标记的最后评论：如果您使用的是 HTML5，请使用：

```
<meta charset="utf-8" /> 
```

# codeigniter - 在codeigniter项目中制作依赖组合框

> ID：11516568
> 
> 赞同：0
> 
> 时间：2012-07-17T05:36:56.410
> 
> 标签：codeigniter

我很痛苦，但仍然无法在 Codeigniter 中创建一个依赖下拉框。这是架构：

```
groups(group_id,group)
forum(forum_id,subject)
group_forum(group_id,forum_id) 
```

这是我的代码： **模型**

```
function get_group(){

    $query = $this->db->get('group');
    return $query->result();
}

function get_subject_by_group($id)
{

        $subjects=array();

        $this->db->from('forum');
        $this->db->join('group_forum','group_forum.forum_id=forum.forum_id','group_id='.$id);
        $q=$this->db->get();
       foreach($q->result() as $y)
       {
           $subjects[$y['forum_id']] = $y['subject'];
       }

       return $subjects;

    }
} 
```

**控制器：**

```
 <?php
class  C_control_form extends  CI_Controller {

     function add_all(){

        #Validate entry form information
        $this->load->model('Model_form');
        $this->form_validation->set_rules('f_group', 'Group', 'trim|required');
       $this->form_validation->set_rules('f_forum', 'Forum', 'trim|required');

        $data['groups'] = $this->Model_form->get_group(); //gets the available groups for the dropdown

        if ($this->form_validation->run() == FALSE)
        {

              $this->load->view('header_for_combo',$data);
              $this->load->view('view_form_all', $data);
              $this->load->view('footer_for_combo',$data);
        }
        else
        {
            #Add Member to Database
            $this->Model_form->add_all();
            $this->load->view('view_form_success');
        }
    }

 function get_subjects($group)
  {
       //echo "hi";
        $this->load->model('Model_form');
        header('Content-Type: application/x-json; charset=utf-8');
        echo (json_encode($this->Model_form->get_subject_by_group($group)));

    }

}
?> 
```

**看法**

```
<html>
<head>
    <script type="text/javascript" src="<?php echo base_url("js/jquery-1.7.2.min.js"); ?>"  ></script>
    <script type="text/javascript">

    // $('#f_group, #f_forum').hide();
      $(document).ready(function(){
        $('#f_group').change(function(){

            var group_id = $('#f_group').val();
            if (group_id != ""){

              var post_url = "index.php/c_control_form/get_subjects/"+group_id;
              //    var post_url = "<?php echo base_url();?>"+"c_control_form/get_subjects"+group_id;

                $.ajax({
                    type: 'POST',
                    url: post_url,
                    dataType : 'json',

                    success: function(subjects) //we're calling the response json array 'cities'
                    {
                        $("#f_forum > option").remove();

                      //  $('#f_forum').empty();
                      //  $('#f_forum, #f_forum_label').show();

                        $.each(subjects,function(forum_id,subject)
                        {
                            var opt = $('<option/>'); // here we're creating a new select option for each group
                            opt.val(forum_id);
                            //alert(id);
                            opt.text(subject);
                            $('#f_forum').append(opt);
                        });
                    } //end success
                }); //end AJAX
            } else {
                $('#f_forum').empty();
            //   $('#f_forum, #f_forum_label').hide();
            }//end if

        }); //end change

        });
    </script>

</head>
<body>
<?php echo form_open('c_control_form/add_all'); ?>
    <p>
    <label for="f_group">Group<span class="red">*</span></label>

    <select id="f_group" name="f_group">
        <option value=""></option>
        <?php
        foreach($groups as $group){
            echo '<option value="' . $group->group_id . '">' . $group->group_name.'</option>';
        }
        ?>
    </select>
    </p>

    <p>
    <label for="f_forum">Subject<span class="red">*</span></label>

    <select id="f_forum" name="f_forum" id="f_forum_label">
        <option value=""></option>
    </select>
    </p>
  <?php echo form_close(); ?>  
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:59:35.380

请更换

```
$subjects[$y['forum_id']] = $y['subject']; 
```

至

```
$subjects[$y->forum_id] = $y->subject; 
```

在模型文件中。在 php 标记之后和之前的模型 php 文件中还有空格或换行符。

**编辑：**在下面添加

```
function(subjects){
    var select = $('#f_forum').empty();
    $.each(subjects.values, function(i,item) {
        select.append( '<option value="'
                             + item.id
                             + '">'
                             + item.name
                             + '</option>' ); 
    }); 
```

# javascript - SWFUpload 设置中出现意外的冒号

> ID：11516572
> 
> 赞同：0
> 
> 时间：2012-07-17T05:37:29.060
> 
> 标签：javascript, swfupload

Chrome 告诉我，我的 SWFUpload 设置中没有冒号。

```
$(document).ready(function() {
    var swfu;
    var settings = function() {
        flash_url: 'swfupload.swf',
        upload_url: 'uploadtest.php', //this is the line
        file_post_name: 'file',
        file_size_limit: '10 MB',

        button_image_url: 'styles/images/browse2.png',
        button_width: 232,
        button_height: 84,
        button_placeholder_id: 'swfbutton'
    };
    swfu = new SWFUpload(settings);
}); 
```

截图：http: [//imgdiode.com/BI2QNY](http://imgdiode.com/BI2QNY)

通常，当缺少前一个项目或类似的东西时，我会看到这样的语法错误，但我似乎无法弄清楚问题出在哪里。也许我想多了，但我没有看到任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:04:16.760

试试这个方法

```
var settings = { ... 
```

[http://jsfiddle.net/u5LLQ/](http://jsfiddle.net/u5LLQ/)

# php - 如何在 symfony2 中使用带有注释的事件监听器

> ID：11516574
> 
> 赞同：1
> 
> 时间：2012-07-17T05:37:32.383
> 
> 标签：php, symfony

我是 symfony2 的新手，我正在学习使用事件监听器。

我有这个代码

```
/** @Entity @HasLifecycleCallbacks */
class User
{
    // ...

/** @ORM\PrePersist */

    public function setPassword()
    {

        $this->password = "EVENTS";
    } 
```

现在我还需要其他任何东西来使这段代码工作。我的意思是我还需要做什么才能让它工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:52:05.640

@HasLifecycleCallbacks = 通知 Doctrine 该实体在其至少一个方法上设置了实体生命周期回调注释

方法上可能的注释

@PostLoad、@PrePersist、@PostPersist、@PreRemove、@PostRemove、@PreUpdate 或 @PostUpdate

所以，你的代码已经足够好了。

# javascript - CSS / Javascript中的灵活电线？

> ID：11516576
> 
> 赞同：0
> 
> 时间：2012-07-17T05:37:41.070
> 
> 标签：javascript, css, canvas

我想将这个简洁的功能实现到我正在处理的项目中，但将其移植到 css/javascript/canvas：[https ://github.com/joshtynjala/flexwires/wiki/getting-started](https://github.com/joshtynjala/flexwires/wiki/getting-started)

它基本上允许您将电线从一个地方拖到另一个地方 - 因此，“接线”它。

你会从哪里开始？

# regex - perl如何从日志文件中提取数据

> ID：11516581
> 
> 赞同：0
> 
> 时间：2012-07-17T05:38:20.353
> 
> 标签：regex, string, perl, file

我是 perl 的新手，想从日志文件中提取信息（名称、DESCR、PID、VID、SN）以供使用。以下是日志文件中一项的示例。

```
NAME: "data1023", DESCR: "some information"
PID: ABC-0123-xyz      , VID: V01 , SN: ABC1234567 
```

我尝试使用逗号作为分隔符使用拆分，但它没有多大帮助。有人可以提出更好的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T07:00:07.757

您没有给我们太多，但基于一些假设，包括但不限于每个条目 2 行，这是您可以根据自己的喜好构建的快速解决方案。

```
#!/usr/local/bin/perl

use strict;
use warnings;
use Data::Dumper;

my $lineno;
my @parts;
my $entryno;
my $line;
my @log;

while (<>) {
    $line = $_;
    chomp $line;
    $lineno++;
    if ( $lineno % 2 ) {

        #It is line one of the entry
        $entryno++;
        @parts = split( /,\s*/, $line );
    }
    else {
        push( @parts, split( /,\s*/, $line ) );

        push( @log, [@parts] );
    }
}

print Dumper(\@log); 
```

这完全取决于您希望如何呈现数据。所有这一切都是将每个条目的每个元素作为一个数组项，然后将每个条目作为一个数组项，构建一个数组数组。

# javascript - 未捕获的 ReferenceError：（函数）未定义

> ID：11516586
> 
> 赞同：6
> 
> 时间：2012-07-17T05:38:36.527
> 
> 标签：javascript

我只是认为这对有这个问题的人很有用：

我有这个代码：

```
<html>
<head>
    <link rel="stylesheet" href="example.css" type="text/css"/>
    <title>CSS TESTS</title>
    <script language="text/javascript">
        var move = 0;
    </script>
</head>
<body>
    <input type="text" id="shape" onchange="alert(move);"/>
</body>
</html> 
```

但我无法让警报工作。我会得到 Uncaught ReferenceError: move is not defined。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T05:39:29.240

事实证明，脚本标签上的**语言**属性不允许我指定*text/javascript*，而只能指定 javascript。**type**属性允许“ text */javascript* ”。仅此而已，我花了几个小时试图找到 javascript 代码中的错误... arg！

所以，基本上我改变了那句话

```
<script language="text/javascript"> 
```

到

```
<script type="text/javascript"> 
```

这一切都奏效了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T05:49:05.947

更改`<script language="text/javascript">` 为`<script type="text/javascript">`

工作代码——

```
<html>
<head>
    <link rel="stylesheet" href="example.css" type="text/css"/>
    <title>CSS TESTS</title>
    <script type="text/javascript">
        var move = 0;
    </script>
</head>
<body>
    <input type="text" id="shape" onchange="alert(move);"/>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T05:52:55.227

或者这样做，这里将“移动”转换为字符串

```
<html>
<head>
    <link rel="stylesheet" href="example.css" type="text/css"/>
    <title>CSS TESTS</title>
</head>
<body>
    <input type="text" id="shape" onchange="alert('move');"/>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-03T15:35:35.967

不要忘记包括，

```
 <script src="jquery-1.xx.x.min.js" type="text/javascript"> </script> 
```

如果您使用的是 jquery，则 xx-x 代表您正在使用的版本。

# actionscript-3 - 使用 flex 4 和动作脚本 3 为 android 移动视图设置默认方向

> ID：11516587
> 
> 赞同：4
> 
> 时间：2012-07-17T05:38:37.760
> 
> 标签：actionscript-3, flex4, orientation, screen-orientation

目前我正在使用 Flex 4 和动作脚本 3 为 android 手机开发视频会议系统。对于视频聊天，我有 2 个视图，1.全屏视图和 2.普通屏幕视图。现在的问题是，如何设置视图的默认显示方向。当我单击全屏时，视图必须以“横向”方向加载，当我单击普通屏幕时，视图必须加载“纵向”视图。我试过Stage.orients。但是使用它我只能为应用程序设置一个方向。

```
<aspectRatio>portrait</aspectRatio>
<autoOrients>false</autoOrients>

 stage.autoOrients = true/false;
stage.setOrientation( StageOrientation.DEFAULT ); 
```

请任何人帮助我解决这个问题。实际上我可以为一个视图设置默认方向。但我需要为不同的视图设置不同的方向。对于全屏，我需要将横向设置为默认方向，对于普通屏幕，我需要将纵向设置为默认方向。任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:29:14.670

我通过使用 setAspectRatio 来做到这一点：

```
this.stage.setAspectRatio(StageAspectRatio.LANDSCAPE); 
```

只需在视图中收听 addedToStage 并在那里更改方向。

# blackberry - 如何在黑莓中从全局屏幕推送新屏幕？

> ID：11516595
> 
> 赞同：0
> 
> 时间：2012-07-17T05:39:37.647
> 
> 标签：blackberry

在这里，我在黑莓的 globalscreen 中显示推送通知，我需要通过单击对话框的 OK 按钮来推送屏幕。我想通过单击确定按钮来启动应用程序。

请帮我。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T09:40:02.860

我不是 100% 确定我理解你想要什么，但如果这不起作用，只需添加*评论*，我会尽力给你一个更好的答案。

首先，[在推送全局屏幕上阅读此内容](http://supportforums.blackberry.com/t5/Java-Development/Properly-Push-and-Pop-Global-Screens/ta-p/445097)

[这在收到全局警报后执行](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800505/800256/How_To_-_Have_Your_Application_Perform_an_Action_after_a_Global_Alert.html?nodeid=1287205&vernum=0)操作

如果我理解正确，您的代码应该类似于第二个链接的示例。

然后，如果你实现`DialogClosedListener`，就像在第二个链接中一样，你可能会有这样的事情：

**当您收到通知时从后台调用：**

```
Dialog myDialog = new Dialog(Dialog.D_OK_CANCEL, "Hello", Dialog.OK, null, 0);
myDialog.setDialogClosedListener(new MyListener());
UiApplication.getUiApplication().pushGlobalScreen(myDialog, 1, true); 
```

**对话侦听器的实现：**

```
private class MyListener implements DialogClosedListener {

    public void dialogClosed(Dialog dialog, int choice) {
       switch (choice) {
          case Dialog.OK: 
              // ok clicked
              UiApplication.getUiApplication().requestForeground();
              break;
          case Dialog.CANCEL:
              // cancel clicked. or escape pressed
              break;
          default:
              break;
       }
   }
} 
```

然后，在您的`UiApplication`班级中，您可以响应激活，如果用户从以下选项中选择**Ok**`Dialog` ，就会发生这种情况：

```
public class MyApp extends UiApplication {
    private boolean _nextScreenShowing = false;
    public void activate() {
        super.activate();
        if (!_nextScreenShowing) {
            pushScreen(new NextScreen());
            _nextScreenShowing = true;
        }
    }
} 
```

我展示了`_nextScreenShowing`变量，只是为了确保您考虑按下下一个屏幕是否合适。可能不会**每次**都`activate`被调用。您可能需要通过响应方法来跟踪该布尔标志`Application.deactivate()`，或者可能是`Screen.onExposed()`or `Screen.onObscured()`。这一切都取决于您的应用程序如何工作。

# java - Java - 从字符串中删除不可打印的字符

> ID：11516602
> 
> 赞同：0
> 
> 时间：2012-07-17T05:40:15.860
> 
> 标签：java, string

我试图将一个字符串传递给一个有换行符的 SQL 语句，所以它给了我一个错误：

`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE nric = 'S3456789A\n'' at line 1`

所以我删除了换行符

`nric = nric.replace("\n","");`

然后它向我抛出了错误：

`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE nric = 'S3456789A'' at line 1`

问题是，当我执行 System.out.println 时，撇号没有出现，它只是`S3456789A`代替`S3456789A'`. 如何删除撇号？

代码：

从android获取数据和发布：

```
ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
postParameters.add(new BasicNameValuePair("nric",nric));
response = CustomHttpClient.executeHttpPost("http://172.27.176.181:8080/SRD/SaveLocation", postParameters); 
```

servlet SaveLocation 的必要部分：

```
String nric = request.getParameter("nric");
    nric = nric.replace("\n", "");
User elder = new User();
    elder.setNric(nric);
    try {
        if(elder.retrieveUserWithNric())
        { 
```

从 User 实体类中检索UserWithNric：

```
public boolean retrieveUserWithNric() throws SQLException
{
    boolean success = false;
    ResultSet rs = null;
    try {
        Context ctx = new InitialContext();
        ds = (DataSource)ctx.lookup("java:comp/env/jdbc/srd");
      } catch (NamingException e) {
          System.out.println("User: Naming Exception");
        e.printStackTrace();
      }
    Connection conn = ds.getConnection();

    PreparedStatement pstmt = null;
    String dbQuery = "SELECT * FROM User WHERE nric = ?";
    System.out.println("retrieveUserwithNric nric is "+nric);
    try {
        pstmt = conn.prepareStatement(dbQuery);
        pstmt.setString(1, nric);
        rs = pstmt.executeQuery();
    } catch (SQLException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    try {
        if (rs.next()) {
            id = rs.getInt("id");
            nric = rs.getString("nric");
            password = rs.getString("password");
            salt = rs.getString("salt");
            name = rs.getString("name");
            mobileNo = rs.getInt("mobile_no");
            address = rs.getString("address");
            postal = rs.getInt("postal_code");
            relativeElderly = rs.getString("relative_elderly");
            role = rs.getString("role");
            organization = rs.getString("organization");
            elderlyList = rs.getString("elderly_list"); 
            // image = rs.getBlob("image");
            success = true;
        }
        else
        {
            System.out.println("rs does not have next");
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    System.out.println("name is "+name);
    System.out.println("role is "+role);
    conn.close();
    return success;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:44:22.363

撇号不存在。错误消息用撇号括起来，删除它们你会得到：

```
WHERE nric = 'S3456789A' 
```

其他原因导致此错误。

# ocaml - 我可以为 rlwrap 创建完成文件吗？

> ID：11516609
> 
> 赞同：2
> 
> 时间：2012-07-17T05:41:42.240
> 
> 标签：ocaml, read-eval-print-loop, rlwrap

我使用以下脚本启动顶层：

```
breakchars="(){}[],^%$#@\"\";:''\\"
exec rlwrap --remember -c -b "$breakchars"  -f "$HOME"/.ml_completions -S '> ' ocaml -init ~/.ocamlinit "$@" 
```

那么如何构建 .ml_completions 文件，以便在顶层自动完成输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T17:13:32.937

我不确定如何为 rlwrap 创建完成文件，但您可以使用 utop 作为替代方案：

[https://github.com/ocaml-community/utop](https://github.com/ocaml-community/utop)

它支持顶层的行编辑、上下文相关的补全和语法高亮。

# bash - 如何判断变量的类型是字符串还是整数

> ID：11516611
> 
> 赞同：1
> 
> 时间：2012-07-17T05:42:09.987
> 
> 标签：bash

这是我的代码：

```
if [ $value == "^[[:digit:]]*$" ]
then
    echo "number"
else
    echo "other"
fi 
```

即使我设置了`value=1`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T05:44:44.863

`test`不做正则表达式。

```
[[ $value =~ ^[0-9]+$ ]] 
```

# ruby-on-rails - 使用 Jbuilder（或其他）的 Rails JSON API 布局

> ID：11516616
> 
> 赞同：10
> 
> 时间：2012-07-17T05:42:31.383
> 
> 标签：ruby-on-rails, json, layout, jbuilder

在我的 rails 3.2 应用程序中，我使用[jbuilder](https://github.com/rails/jbuilder)来呈现来自我的 JSON api 的响应。

我想为所有 API 响应提供一个通用结构，并且布局可能是保持我的视图干燥的解决方案。

例如：我希望每个回复都采用以下形式：

```
{
  status: "ok|error|redirect",
  data:   { ... JSON specific to the current view ... },
  errors: [ ... ],
  notes:  [ ... ]
} 
```

（其中**data**的值是视图提供的 json 结构，其他一切都来自布局）

但是：我无法让 jbuilder 布局正确地屈服于视图。

```
# in layout 
json.data yield

# in view
json.some "value" 
```

结果是：

```
{"data":"{\"some\":\"value\"}"}  # arg! my json has become a string 
```

尝试另一种方式：

```
# in layout 
yield

# in view
json.data do |json|
  json.some "value"
end 
```

结果是 ：

```
{} 
```

有没有人用 jbuilder 或其他 json 模板 gem/方法成功地做到这一点？

这个[juilder github 问题](https://github.com/rails/jbuilder/issues/8)表明这是可能的，但表明其他人也有类似的问题。

我看到 rabl（https://github.com/nesquena/rabl/）应该支持布局（https://github.com/nesquena/rabl/wiki/Using-Layouts），但我决定不使用出于其他原因（rabl 使复杂的 json 结构成为一场噩梦，尤其是在尝试控制对象根等时）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-11T04:14:53.673

我将根据我们提出的解决方案为您提供替代方案：

```
# app/helpers/application_helper.rb
module ApplicationHelper
    def envelope(json, status, errors, notes)
        json.status status
        json.data do
            yield if block_given?
        end
        json.errors errors
        json.notes notes
    end
end 
```

然后，在视图中，您可以调用信封并包含您的 json 代码，例如：

```
# app/views/api/v1/test/show.json.jbuilder
envelope(json, "OK" ) do
  json.some 'value'
end 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-24T12:25:44.890

你可以通过这种方式做到这一点

```
# api.v1.json.jbuilder - layout
json.request do
  json.message "your message"
  json.status 200
end
json.data JSON.parse(yield)

# show.json.jbuilder - action view
json.name 'Some item name' 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-15T16:13:46.983

迟到的答案，但帮助我得到了我想要的东西......

成功结果：

```
{ "something": {"id": 42, "message": "hello"}, "status": "ok", "errors": [] } 
```

错误结果：

```
{ "something": null, "status": "error", "errors": ["could not do the thing"] } 
```

代码：

**应用程序/控制器/api/v1/base_controller.rb**

```
class Api::V1::BaseController < ActionController::API
  layout 'api/v1/application'
  before_action :setup_layout_elements

  def setup_layout_elements
    @status = :ok
    @errors = []
  end

  def error!(message)
    @status = :error
    @errors << message
    nil
  end
end 
```

**应用程序/控制器/api/v1/some_controller.rb**

```
class Api::V1::SomeController < Api::V1::BaseController
  def index
    @something = begin
                   possibly_error_causing_code
                 rescue
                   error!('could not do the thing')
                 end
    render builder: 'api/v1/something/index'
  end
end 
```

**应用程序/视图/布局/api/v1/application.json.jbuilder**

```
json.merge!   JSON.parse(yield)
json.status   @status
json.errors   @errors 
```

**app/views/api/v1/something/index.json.jbuilder**

```
json.something do
  json.id      @something.id
  json.message @something.to_s
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-11T08:42:12.097

尝试

```
 json.merge! JSON.parse(yield) 
```

[https://github.com/rails/jbuilder/issues/8#issuecomment-27586784](https://github.com/rails/jbuilder/issues/8#issuecomment-27586784)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-27T14:06:29.667

JBuilder 不支持`json.jbuilder`用作您的布局（参见 Github 上的 issue [#172](https://github.com/rails/jbuilder/issues/172)）。

我设法通过使用`parse`&作为我的布局格式来避免做额外的一轮。`generate``json.erb`

应用程序/控制器/api/base_controller.rb：

```
class Api::BaseController < ActionController::Base
  layout "api.v1"
end 
```

应用程序/视图/布局/api.v1.json.erb：

```
{
<% if @api_errors.present? %>
  "errors": <%= raw JSON.dump @api_errors %>,
<% else %>
  "data": <%= yield %>,
<% end %>
  "meta": <%= raw JSON.dump @api_meta %>
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-06T13:29:26.427

如果您不想包含额外的密钥，您可以这样做

```
class UsersController < ApplicationController
   layout: 'json_layout'
end 
```

在 /app/views/layouts/json_layout.json.jbuilder

```
json.success true
r = JSON.parse(yield)
r.each{|k,v|
  json.set! k,v
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-09-18T16:09:42.553

jbuilder 是一种非常简单的 API 视图技术，您可以在此处添加部分响应，因此如果您希望所有 API 的响应相同，请创建装饰器或为公共响应创建部分响应，并在需要时调用该响应

让我们说如果你想

```
{
  status: "ok|error|redirect",
  data:   { ... JSON specific to the current view ... },
  errors: [ ... ],
  notes:  [ ... ]
} 
```

为此 /views/api/common/_some_partial 创建一个部分

```
 json.status "ok whatever the message"
 json.data do
   json.message "message"
 end
 json.errors @errors
 json.notes @notes_array 
```

它为您的问题提供了非常简单的解决方案。

干杯

# c# - 如何在内存中创建 Xml 文件以上传到服务器

> ID：11516617
> 
> 赞同：1
> 
> 时间：2012-07-17T05:42:36.127
> 
> 标签：c#, .net, file-upload, ftpwebrequest

我想将 XML 从客户端传输到使用`FTP`. 我得到的是`XmlElement`对象。我知道我可以创建`File`并将其上传到适当的位置 (FTP)。

但是，我认为最好`File`在内存中创建（以避免将文件保存在本地磁盘上）。

有人可以指导我如何实现这一目标吗？

我正在使用 C# 4.0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T05:47:37.843

您可以使用[FtpWebRequest.GetRequestStream()](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.outerxml.aspx)直接写入请求流，而无需先将文件保存在磁盘上

> 检索用于将数据上传到 FTP 服务器的流。

[XmlElement.OuterXml](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.outerxml.aspx)返回 XmlElement 的字符串表示形式。

```
string xml = myXmlElement.OuterXml;
byte[] bytes = Encoding.UTF8.GetBytes(xml);
Stream requestStream = request.GetRequestStream();
requestStream.Write(bytes, 0, bytes.Length);
requestStream.Close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T05:55:16.293

Ling2Xml 更易于使用：

```
stream = ftpRequest.GetRequestStream();

XElement xDoc = new XElement("Root",
                    new XElement("Item1", "some text"),
                    new XElement("Item2", new XAttribute("id", 666))
                    );

xDoc.Save(stream); 
```

或者你可以使用`serialization`

```
XmlSerializer ser = new XmlSerializer(typeof(SomeItem));
ser.Serialize(stream, new SomeItem());

public class SomeItem
{
    public string Name;
    public int ID;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T06:17:05.237

@LB 给出了使用提示`XDocument`，它解决了我的问题。

这是解决方案：

*   编写代码以`XDocument`从对象中创建`XmlElement`对象。

    ```
    StringBuilder stringBuilder = new StringBuilder();
    XmlWriter xmlWriter = new XmlTextWriter(new StringWriter(stringBuilder));
    xmlElement.WriteTo(xmlWriter);
    XmlDocument xmlDocument = new XmlDocument();
    xmlDocument.Load(new StringReader(stringBuilder.ToString()));
    XDocument doc = XDocument.Load(xmlDocument.CreateNavigator().ReadSubtree(), LoadOptions.PreserveWhitespace); 
    ```

*   然后像这样使用FTP的流。

    ```
    Stream ftpstream = ((FtpWebRequest)WebRequest.Create(path)).GetRequestStream();    
     doc.Save(ftpstream);

    ftpstream.Close(); 
    ```

# python - SCSA 逻辑字节下划线？

> ID：11516618
> 
> 赞同：0
> 
> 时间：2012-07-17T05:42:44.800
> 
> 标签：python, struct, pack, scsi

我有来自 SCSA 命令的 45 个字节用于 LBU：

0, 0, 4, 8, 0, 0, 0

我尝试将其导出为 python 中的 64 位 uuint LBU：

```
struct.unpack('GG', chr(0)+chr(0)+chr(4)+chr(8)+chr(0)+chr(0)+chr(0)) 
```

这个对吗？也许不吧...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:48:47.090

我看不出有任何方式可以将该价值解释为理智的 LBA。您是否可能正在查看 READ(12)，而不是 READ(16)？如果是这种情况，那么字节将是一个完全正常的 LBA (0x2c30 = 11312) 和长度 (0x0800 = 2048)。

# java - ZMQ 中的不均匀流

> ID：11516621
> 
> 赞同：0
> 
> 时间：2012-07-17T05:43:26.783
> 
> 标签：java, message-queue, zeromq

我在我的 Java 应用程序中使用 ZMQ。我发现它的行为不均匀，即，如果我向一位消费者发送大约 100 条消息，说它需要 1 秒，那么如果我们继续增加消费者，则所用时间变为 2,1.5,3 这样。没有逐渐增加或减少。我该如何纠正这一点。在下面查找我的代码

```
// Broker 
```

`import org.zeromq.ZMQ; import org.zeromq.ZMQ.Context; import org.zeromq.ZMQ.Socket; import org.zeromq.ZMQStreamer;`

`public class Broker {`

```
/**
 * @param args
 */
public static void main(String[] args) 
{
    Context context = ZMQ.context(1);

    Socket frontEnd = context.socket(ZMQ.PULL);
    frontEnd.bind("tcp://*:5555");

    Socket backEnd = context.socket(ZMQ.PUSH);
    backEnd.bind("tcp://*:5560");

    ZMQStreamer zmqStreamer = new ZMQStreamer(context, frontEnd, backEnd);
    zmqStreamer.run();
} 
```

}

`// Producer`

`import org.zeromq.ZMQ;` `import org.zeromq.ZMQ.Socket;`

`public class Producer` `{`

```
public void init()
{
    ZMQ.Context context = ZMQ.context(1);
    socket = context.socket(ZMQ.PUSH);
    socket.connect("tcp://localhost:5555");
}

public void initMessage(String message)
{
    this.message = message;
}

public void sendMessage()
{
    String sendMessage = System.nanoTime() +"#"+ message;
    socket.send(sendMessage.getBytes(), 0);
}
/**
 * @param args
 */
public static void main(String[] args) 
{
    Producer producer = new Producer();
    producer.init();
    byte[] message = new byte[Integer.parseInt(args[0])];
    //message = "Hello".getBytes();
    producer.initMessage(new String(message));
    for(int i=0;i<100;i++)
    {
        producer.sendMessage();
    }
}

private Socket socket = null;
private String message;
}

//Consumer

import org.zeromq.ZMQ;
import org.zeromq.ZMQ.Socket;

public class Consumer 
{

public void init()
{
    ZMQ.Context context = ZMQ.context(1);
    socket = context.socket(ZMQ.PULL);
    socket.connect("tcp://localhost:5560");
}

public void reciveMessage()
{
    byte[] recived = socket.recv(0);
    //System.out.println(recived.length);
    long recivedTime = System.nanoTime();
    String message = new String(recived);
    String[] splitMessage = message.split("#");
    long sendTime = Long.parseLong(splitMessage[0]);
    System.out.println("Send Time " + sendTime + " RecivedTime "
            + recivedTime + " Time taken " + (recivedTime - sendTime)
            + " Message " + message);
}
/**
 * @param args
 */
public static void main(String[] args) 
{
    Consumer consumer = new Consumer();
    consumer.init();
    for (int i=0;i<100;i++)
    {
        consumer.reciveMessage();
    }
}
private Socket socket = null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:47:46.557

为了可靠地计时一段多线程代码，您将需要有某种方法来同步收集器/接收器的开始和结束时间（您目前没有显示为已编程）。

从 ZMQ 指南中查看[此示例，该指南将以下过程作为划分数据集的正确 ZMQ 方法之一：](http://zguide.zeromq.org/page%3aall#Divide-and-Conquer)

> ...
> 
> 我们的超级计算应用程序是一个相当典型的并行处理模型：
> 
> ```
> We have a ventilator that produces tasks that can be done in parallel.
> We have a set of workers that process tasks.
> We have a sink that collects results back from the worker processes. 
> ```
> 
> ...

# java - 停止代码格式在 Eclipse 中删除空格

> ID：11516623
> 
> 赞同：4
> 
> 时间：2012-07-17T05:43:33.193
> 
> 标签：java, eclipse, code-formatting

我最近又开始使用 Java，我正在 eclipse 中设置我的开发环境，它有一个方便的格式化函数，可以为你格式化代码。这是一个很好的原因，除了局部变量声明之外，我已经能够将设置设置为几乎完美地符合我的代码标准。我喜欢让我的声明保持一致（甚至还有一个类参数声明选项可以满足我的要求）

这是我想要的：

```
void jad()
{
    int         alpha              = 1;
    String      beta               = "jad";
    MyOwnObject SomeReallyLongName = new MyOwnObject();
} 
```

相反，eclipse的格式给了我：

```
void jad()
{
    int alpha = 1;
    String beta = "jad";
    MyOwnObject SomeReallyLongName = new MyOwnObject();
} 
```

我不介意它是否也没有按照我想要的方式格式化它，如果它不删除我自己放在那里的空格，我会喜欢它>。<（如果它可以为我做，那当然会更好）。

有人知道如何让日食做这样的事情吗？（在代码样式编辑器中找不到任何选项）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:52:23.377

实际上格式化程序会为你做这个对齐。进入 Preference -> Java -> Code Style -> Formatter 并编辑配置文件。查看缩进选项卡，将有一个选项来对齐列中的字段。

但它只是对齐类，而不是方法变量，所以不是你想要的。

# sql - SQL的操作顺序？

> ID：11516625
> 
> 赞同：4
> 
> 时间：2012-07-17T05:43:46.473
> 
> 标签：sql, sql-server-ce

假设我有这个声明：

```
SELECT * FROM MyTable WHERE a = 1 or b = 2 and c = 3 
```

这是否意味着：(a = 1) OR (b = 2 AND c = 3) 还是意味着 (a = 1 or b = 2) AND c = 3？我可以更改它的含义，即在 AND 之前执行 OR，或者这不可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T05:46:23.333

来自[技术网](http://technet.microsoft.com/en-us/library/ms173435)：

> 当一个语句中使用多个逻辑运算符时，首先计算 AND 运算符。您可以使用括号更改评估顺序。

所以是的，这意味着`(a = 1) OR (b = 2 AND c = 3)`。

您可以通过像上面那样编写括号来强制执行您想要的行为：`(a = 1 OR b = 2) AND c = 3`

# android - android listview onselect item有两个值，如何分别获取

> ID：11516626
> 
> 赞同：1
> 
> 时间：2012-07-17T05:43:53.017
> 
> 标签：android, listview

我有一个`ListView`通过从 mysql db 获取数据来填充的......它`ListView`包含来自数据库的三个值......

1.  姓名
2.  类别
3.  位置

我想将这些值传递给下一个`Activity`。所以我用

```
list.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {

                String items = parent.getItemAtPosition(position).toString();

                Intent intent = new Intent();
                intent.setClass(mapping, CheckIn.class);
                intent.putExtra("name", items);
                startActivity(intent);
            }
        }); 
```

但它会产生一个数组 {name = xxx , category = asdasd , position = ddxxddxx}

在第二个`Activity`中，我想获取有关该指定名称的用户评论并将其插入到另一个表中。如何使用数组这样做？

完整代码

```
try {
            HttpParams params = new BasicHttpParams();
            HttpConnectionParams.setSoTimeout(params, 0);
            HttpClient httpClient = new DefaultHttpClient(params);

            // prepare the HTTP GET call
            HttpGet httpget = new HttpGet("http://hopscriber.com/place.php");
            // get the response entity
            HttpEntity entity = httpClient.execute(httpget).getEntity();

            if (entity != null) {
                // get the response content as a string
                String response = EntityUtils.toString(entity);
                // consume the entity
                entity.consumeContent();

                // When HttpClient instance is no longer needed, shut down the
                // connection manager to ensure immediate deallocation of all
                // system resources
                httpClient.getConnectionManager().shutdown();

                // return the JSON response
                ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

                JSONArray jsonArray = new JSONArray(response);

                if (jsonArray != null) {
                    for (int i = 0; i < jsonArray.length(); i++) {
                        JSONObject object = (JSONObject) jsonArray.get(i);

                        HashMap<String, String> map = new HashMap<String, String>();

                        map.put(TAG_Name, object.getString("name"));
                        map.put(TAG_Category, object.getString("category"));

                        contactList.add(map);

                    }
                }

                ListAdapter adapter = new SimpleAdapter(this, contactList,
                        R.layout.menu_list_row, new String[] { TAG_Name,
                                TAG_Category }, new int[] { R.id.LR_Name,
                                R.id.LR_date });
                list.setAdapter(adapter);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        // Launching new screen on Selecting Single ListItem
        list.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                String items = parent.getItemAtPosition(position).toString();

                Intent intent = new Intent();
                intent.setClass(mapping, CheckIn.class);
                intent.putExtra("name", items);
                startActivity(intent);
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T07:17:25.123

```
 list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {

            String name = ((TextView) view.findViewById(R.id.LR_Name)).getText().toString();
            String cost = ((TextView) view.findViewById(R.id.LR_date)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), CheckIn.class);
            in.putExtra(TAG_Name, name);
            in.putExtra(TAG_Category, cost);
            startActivity(in);
        }
    }); 
```

这对我有用...谢谢您的支持

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T05:53:53.650

尝试这个，

```
 listview.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {
                Object obj = parent.getItemAtPosition(position);
                if (obj instanceof SQLiteCursor) {
                    SQLiteCursor Val = (SQLiteCursor) obj;
                    // this is storing to  textview
                    txtview.setText(cmnt.getString(0)); 
                    txtview.setText(cmnt.getString(1));
                    name = cmnt.getString(0);// this is store to string.
                    comments = cmnt.getString(1);
                }
            }
        }); 
```

## 意图传递：

```
 intent.putExtra("name",name);
  intent.putExtra("comments",comments); 
```

## 从第二个活动中获取值：

```
 name=getIntent().getStringExtra("name", null);
  comments=getIntent().getStringExtra("comments", null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T06:22:13.143

恢复 id 并在第二个活动中使用：

```
public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
        String rowid = String.valueOf(id)
        Bundle bundle = new Bundle();
        bundle.putString("ID", rowid);
        intent.putExtras(bundle);
        startActivity(intent);
} 
```

使用以下方法检索第二个活动：

```
String rowid= getIntent().getExtras().getString("ID"); 
```

不要忘记将 id 从字符串转换回 long 并在第二个活动中检索它后添加 1

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-17T05:57:11.220

从您的第一个`Activity`开始，只需使用 bundle 传递名称、类别和位置。像这样的东西

```
Intent intent = new Intent(SearchAssetActivity.this,
                        CheckInActivity.class);
Bundle bundle = new Bundle();
bundle.putString("name", xxx);
bundle.putString("sno", asasas);
intent.putExtras(bundle);
startActivity(intent); 
```

第二个`Activity`你可以在你的`onCreate()`：

```
String name= getIntent().getExtras().getString("name"); 
```

这样您就可以检索任意数量的参数

# google-finance - 如何使用 Google 财经？

> ID：11516633
> 
> 赞同：7
> 
> 时间：2012-07-17T05:44:30.170
> 
> 标签：google-finance

我想开发一个小型应用程序来自动从 Google Finance 获取股票价格并将其存储在我的本地机器中以供将来分析。

谁能给我一些线索如何开始？

我知道一些 C#。它适合这个目的吗？

先感谢您。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-02T06:04:32.337

[Google Finance Gadget API](https://web.archive.org/web/20111209142224/http://code.google.com/apis/finance/docs/finance-gadgets.html)自 2012年10 月起正式[弃用](http://googlecode.blogspot.com/2011/05/spring-cleaning-for-some-of-our-apis.html)，但截至 2014 年 4 月，它仍然有效：

[http://www.google.com/finance/info?q=NASDAQ:ADBE](http://www.google.com/finance/info?q=NASDAQ%3aADBE)

**请注意，如果您的应用程序是供[公众使用的，那么使用 Google Finance API 将违反 Google 的服务条款](https://groups.google.com/d/msg/google-finance-apis/O8fjsgnamHE/-ZKSjif4yDIJ)。**

这给出了一个 JSON 响应，在切掉前两个字符 ('//') 后，可以使用 C# 中的简单 JSON 解析器对其进行解析。

要再次下载历史数据，您可以使用 Google API。

[http://www.google.com/finance/historical?q=NASDAQ:ADBE&startdate=Jan+01%2C+2009&enddate=Aug+2%2C+2012&output=csv](http://www.google.com/finance/historical?q=NASDAQ%3aADBE&startdate=Jan+01%2C+2009&enddate=Aug+2%2C+2012&output=csv)

给出从 startdate 到 enddate 的日终股票价格的 CSV。使用简单的 CSV 解析器从存储在数据库中的数据中获取有意义的数据。但是，此 format=csv 选项不适用于少数证券交易所。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-13T15:47:03.130

如果您想下载历史数据，您可以使用 Google Finance API（截至 2016 年 5 月仍然有效）。您不必提供结束日期，它会自动获取从开始日期（或者如果股票当时没有交易则更晚）到最后一个完整交易日期的数据：

[http://www.google.com/finance/historical?q=NASDAQ:AAPL&startdate=Jan+01%2C+2000&output=csv](http://www.google.com/finance/historical?q=NASDAQ:AAPL&startdate=Jan+01%2C+2000&output=csv)

请记住，Google Finance API 仅供个人使用。我建议你他们的服务条款。

如果您只想下载最新日期（这可能有助于更新您的本地数据库），您可以使用由 Hongtao Cai 开发的 googlefinance 库：

[https://pypi.python.org/pypi/googlefinance](https://pypi.python.org/pypi/googlefinance)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-22T15:19:48.303

我刚刚用 PHP 实现了这个。它可能有用。

```
<?php

echo readGoogle('AAPL', 'Aug+21%2C+2017', 'Aug+22%2C+2017');

function readGoogle($ticker, $startDate, $endDate) {

$fp = fopen("http://finance.google.com/finance/historical?q=".$ticker."&startdate=".$startDate."&enddate=".$endDate."&output=csv", 'r');

if (FALSE === $fp) return 'Can not open data.';

$buffer = '';
while (!feof($fp)) $buffer .= implode(',', (array)fgetcsv($fp, 5000));

fclose($fp);

return $buffer;

}

?> 
```

# c# - 如何在 C# 中找到生成条形码的 API

> ID：11516634
> 
> 赞同：0
> 
> 时间：2012-07-17T05:44:35.023
> 
> 标签：c#

我正在使用 c# 在 Barcode 上做一个项目。我很难找到生成条形码所需的相关库。我在 Microsoft.policy.dll 下的 Microsoft.policy.RecordsManagement.Policy 命名空间中找到了一些条形码类和方法。但是这个库并不可取，因为我们需要共享点来使用它。

除此之外，我还在寻找一些第三方条形码生成器。除了 Free 3 of 9 之外，还有其他免费库可以生成条形码吗？我可以使用免费 3 0f 9 生成条形码。谁能帮我即兴创作我的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T05:52:55.157

[jquery-条形码](http://code.google.com/p/jquery-barcode/)

它是一个用于生成条形码的 javascript 库。

或者

[利米实验室](http://www.limilabs.com/barcode/download)

或者试试这个网站...

[www.onbarcode.com](http://www.onbarcode.com/products/net_barcode_asp_net/#down)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T05:58:33.823

你可以看看[这个](http://qrcode.sourceforge.jp/)在 GPL v2 下开发和分发 QR 码解码/编码库的东西。

# django - 清除浏览器 cookie 后，django 不再发送 csrf 令牌

> ID：11516635
> 
> 赞同：9
> 
> 时间：2012-07-17T05:44:36.607
> 
> 标签：django, cookies

在正常情况下，django 会通过 cookie 发送 csrf 令牌，稍后 ajax post 方法可以使用该令牌。但是，当我在浏览器（Chrome 或 Firefox）中清除 cookie 时，csrf 令牌不再发送到浏览器，会话 ID 仍在发送但没有 csrf 令牌。有谁知道出了什么问题？

我通过在我的模板中添加 {% csrf_token %} 解决了这个问题，并且 SET-COOKIE 标头与该页面请求一起出现。事实证明，您必须将 {%csrf-token%} 放入模板中才能使服务器通过 SET-COOKIE 标头发送令牌

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-11-19T02:25:39.517

我有同样的问题。针对django源码调试后，原因是：

> 如果您的视图未呈现包含 csrf_token 模板标签的模板，则 Django 可能不会设置 CSRF 令牌 cookie。

两种解决方案：

*   添加`{% csrf_token %}`您的模板
*   为您的视图使用`@ensure_csrf_cookie`装饰器

有关详细信息，您可以参考[django doc](https://docs.djangoproject.com/en/1.8/ref/csrf/#ajax)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T06:23:00.277

查看`django/middleware/csrf.py`在哪个`CsrfViewMiddleware`类中声明。如您所见，`def process_response(self, request, response)`有三种情况会阻止 cookie 设置：

```
def process_response(self, request, response):
    if getattr(response, 'csrf_processing_done', False):
        return response

    # If CSRF_COOKIE is unset, then CsrfViewMiddleware.process_view was
    # never called, probaby because a request middleware returned a response
    # (for example, contrib.auth redirecting to a login page).
    if request.META.get("CSRF_COOKIE") is None:
        return response

    if not request.META.get("CSRF_COOKIE_USED", False):
        return response

    # Set the CSRF cookie even if it's already set, so we renew
    # the expiry timer.
    response.set_cookie(settings.CSRF_COOKIE_NAME,
                        request.META["CSRF_COOKIE"],
                        max_age = 60 * 60 * 24 * 7 * 52,
                        domain=settings.CSRF_COOKIE_DOMAIN,
                        path=settings.CSRF_COOKIE_PATH,
                        secure=settings.CSRF_COOKIE_SECURE
                        )
    # Content varies with the CSRF cookie, so set the Vary header.
    patch_vary_headers(response, ('Cookie',))
    response.csrf_processing_done = True
    return response 
```

检查哪个适用于您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-26T06:33:52.500

就我而言，问题出在 VSCode 调试器上。我通过 VSCode 调试模式打开服务器，然后打开新的隐身窗口（显然没有 cookie），django 停止设置丢失的 cookie。当我正常启动服务器时，问题就消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T02:13:21.423

在大多数情况下，由上一个答案中提到的第二次检查引起的问题

```
if not request.META.get("CSRF_COOKIE_USED", False):
        return response 
```

这可以通过对视图使用[@ensure_csrf_cookie装饰器来解决。](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#django.views.decorators.csrf.ensure_csrf_cookie)如果使用 - 检查通过并在每次呈现视图时设置/更新 cookie。

另请参阅相关主题：[在没有表单元素的 Django 中使用 ajax 请求](https://stackoverflow.com/questions/8018230/using-ajax-request-in-django-without-form-element)

# c - 在霓虹灯寄存器中添加

> ID：11516646
> 
> 赞同：1
> 
> 时间：2012-07-17T05:45:10.460
> 
> 标签：c, assembly, addition, neon, intrinsics

假设我在霓虹灯中有一个 64 位 d 寄存器。假设它存储值 ABCDEFGH。现在我想添加 A&E、B&F、C&G、D&H 等等。这里有任何内在的东西可以进行这样的操作吗

我查看了文档，但没有找到合适的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:48:08.513

如果要在 16 位中进行加法，即产生 uint16x4 结果，可以使用 vmovl 将输入向量从 uint8x8 提升为 uint8x16，然后使用 vadd 将下半部分和上半部分相加。用 NEON 内在函数表示，这是通过以下方式实现的

```
const int16x8_t t = vmovl_u8(input);
const int16x4_t r = vadd_u16(vget_low(t), vget_high(t)) 
```

这应该编译为以下程序集（d0 是 64 位输入寄存器，d1 是 64 位输出寄存器）。注意 vget_low 和 vget_high 不产生任何指令——这些内在函数是通过适当的寄存器分配实现的，通过利用 Q 寄存器只是命名两个连续 D 寄存器的便捷方式。Q{n} 指的是对 (D{2n}, D{2n+1})。

```
VMOVL.U8 q1, d0
VADD.I16 d1, d2 
```

如果您希望操作以 8 位执行，并在溢出的情况下饱和，请执行

```
const int8x8_t t = vreinterpret_u8_u64(vshr_n_u64(vreinterpret_u64_u8(input), 32));
const int8x8_t r = vqadd_u8(input, t); 
```

这编译为（d0 再次是输入，在 d1 中输出）

```
VSHR.U64 d1, d0, #32
VQADD.I8 d1, d0 
```

通过仅用 VADD 替换 VQADD，结果将在溢出时回绕，而不是饱和到 0xff。

# java - 内部类是否需要在外部修补？

> ID：11516651
> 
> 赞同：1
> 
> 时间：2012-07-17T05:45:48.867
> 
> 标签：java, javac, inner-classes, nested-class

我有一些方法`doIt(...)`和几个内部类的父类。我已经改变了这个方法的实现。方法签名保持不变。该类的逻辑过于复杂，我没有时间找出调用堆栈。重建项目后，我看到父类及其内部类类文件被重新编译。现在我需要用更新的系统修补系统。问题是如果实际上只更改了父方法的实现，内部类是否也需要成为补丁的一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T06:56:10.890

当您重新编译一个`*.java`文件时，无论您只更改一个类还是全部更改，都会生成所有类。

如果您只更改了一个内部类的代码，那么您只需要修补即可。恕我直言，我不会抓住机会，我会修补所有东西，因为通常这样做几乎没有缺点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:58:36.370

实际上只有改变的类应该被修补。就我而言，它是一个外部的。所以答案是：不，只应该修补实现更改的外部类。

# grails - 两个grails应用程序都使用springSecurity，登录一次即可访问

> ID：11516652
> 
> 赞同：0
> 
> 时间：2012-07-17T05:45:53.617
> 
> 标签：grails, spring-security, josso

我有一个旧的 grails 应用程序（例如一个应用程序），它具有用于登录的 springSecurity。我创建了一个新的 grails 应用程序（两个应用程序），它使用多个数据库（一个应用程序的数据库和一个新的数据库）。我正在使用 tomcat 进行部署

ip.addr.10.10/one-app
ip.addr.10.10/two-app

我的问题是：我想只登录一次就可以访问这两个应用程序。基本上，如果用户登录任一应用程序，他也可以访问另一个应用程序而无需再次登录。

这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T07:46:50.483

是的，有可能。您需要使用 SSO。目前，我将 JOSSO与 Spring Security 结合用于我的 grails 应用程序 ( [http://www.josso.org )。](http://www.josso.org)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T11:21:42.540

您可以`RememberMe`为这两个应用程序配置完全相同的配置。用户登录到任何应用程序后，Spring Security 将设置特殊的 cookie，可以从其他应用程序重用（也意味着在另一个应用程序中授权）。

请参阅“记住我”的文档 - [http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/9%20Authentication.html#9.3%20Remember-Me%20Cookie](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/9%20Authentication.html#9.3%20Remember-Me%20Cookie)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T12:53:56.280

第三种选择是为两个应用程序使用相同的 OpenID 提供程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T13:52:52.897

另一种方法是删除两个应用程序都可以读取的 Cookie。

# java - 如何在 jar 文件中使用 ClassLoader.getResources()

> ID：11516655
> 
> 赞同：4
> 
> 时间：2012-07-17T05:46:05.673
> 
> 标签：java, jar, classloader

问题陈述：
我有一个 jar 文件，其中包含一组配置文件`mycompany/configuration/file/`。
我不知道文件名。
我的目的是在运行时从打包它们的 jar 文件中加载文件名，然后在我的应用程序中使用它。
据我了解：当我使用时，`ClassLoader.getResources("mycompany/configuration/file/")`我应该将所有配置文件作为 URL 获取。
但是，这就是正在发生的事情：
我得到了一个 URL 对象，其 URL 类似于`jar:file:/C:/myJarName.jar!mycompany/configuration/file/`
你能否让我知道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T05:57:01.130

对于您正在尝试做的事情，我认为这是不可能的。

`getResource`并且`getResources`是关于在类加载器的类路径中查找命名资源，而不是在目录或文件夹下列出值。

因此，例如`ClassLoader.getResources("mycompany/configuration/file/Config.cfg")`将返回所有名为**Config.cfg**的文件，这些文件存在于类加载器的类路径中的**mycompany/configuration/file路径中（我发现这对于个人加载版本信息特别有用）。**

在您的情况下，我认为您可能几乎有一半的解决方案。您返回的 URL 包含源 jar 文件 (jar:file:/C:/myJarName.jar)。您可以使用此信息来破解打开 jar 文件并读取条目列表，过滤名称以“mycompany/configuration/file/”开头的条目。

然后，您可以从那里退回`getResource`到加载对每个引用的方法（现在您已经有了名称和路径）

# c++ - C++ 结构初始化

> ID：11516657
> 
> 赞同：331
> 
> 时间：2012-07-17T05:46:22.740
> 
> 标签：c++

是否可以在 C++ 中初始化结构，如下所示

```
struct address {
    int street_no;
    char *street_name;
    char *city;
    char *prov;
    char *postal_code;
};
address temp_address =
    { .city = "Hamilton", .prov = "Ontario" }; 
```

[这里](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/strin.htm)和[这里](https://stackoverflow.com/questions/5790534/static-structure-initialization-with-tags-in-c)的链接提到只能在 C 中使用这种风格。如果是这样，为什么这在 C++ 中是不可能的？是否有任何潜在的技术原因导致它没有在 C++ 中实现，或者使用这种风格是不好的做法。我喜欢使用这种初始化方式，因为我的结构很大，而且这种风格让我清楚地了解了分配给哪个成员的值。

如果有其他方法可以实现相同的可读性，请与我分享。

在发布此问题之前，我已经参考了以下链接

1.  [用于 AIX 的 C/C++](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/strin.htm)
2.  [使用变量初始化 C 结构体](https://stackoverflow.com/questions/7700878/c-structure-initialization-with-variable)
3.  [在 C++ 中使用标签进行静态结构初始化](https://stackoverflow.com/questions/5790534/static-structure-initialization-with-tags-in-c)
4.  [C++11 正确的结构初始化](https://stackoverflow.com/questions/9557464/c11-proper-structure-initialization)

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2012-07-17T06:03:16.450

如果您想清楚每个初始化程序的值是什么，只需将其拆分为多行，并在每行上添加注释：

```
address temp_addres = {
  0,  // street_no
  nullptr,  // street_name
  "Hamilton",  // city
  "Ontario",  // prov
  nullptr,  // postal_code
}; 
```

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2012-07-17T06:22:13.407

在[我的问题](https://stackoverflow.com/questions/5790534/static-structure-initialization-with-tags-in-c)没有得到令人满意的结果之后（因为 C++ 没有为结构实现基于标记的初始化），我采用了我在这里找到的技巧：[C++ 结构的成员是否默认初始化为 0？](https://stackoverflow.com/questions/1069621/are-members-of-a-c-struct-initialized-to-0-by-default)

对你来说，这相当于：

```
address temp_address = {}; // will zero all fields in C++
temp_address.city = "Hamilton";
temp_address.prov = "Ontario"; 
```

这肯定是最接近您最初想要的（除了您要初始化的字段之外的所有字段）。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2017-12-04T16:16:55.973

正如其他人所提到的，这是指定的初始化程序。

此功能是[C++20的一部分](https://en.wikipedia.org/wiki/C%2B%2B20)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-07-17T05:51:55.530

字段标识符确实是 C 初始值设定项语法。在 C++ 中，只需以正确的顺序给出值，而无需字段名称。不幸的是，这意味着您需要全部提供它们（实际上您可以省略尾随的零值字段，结果将是相同的）：

```
address temp_address = { 0, 0, "Hamilton", "Ontario", 0 }; 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2017-05-30T18:02:08.790

此功能称为**指定初始化程序**。它是对 C99 标准的补充。然而，这个特性被排除在 C++11 之外。根据 The C++ Programming Language, 4th edition, Section 44.3.3.2 (C Features Not Adopted by C++)：

> C99 的一些新增内容（与 C89 相比）在 C++ 中故意不采用：
> 
> [1] 可变长度数组（VLA）；使用向量或某种形式的动态数组
> 
> [2] 指定初始化器；使用构造函数

C99 语法具有*指定的初始化程序*[参见 ISO/IEC 9899:2011，N1570 委员会草案 - 2011 年 4 月 12 日]

**6.7.9 初始化**

```
initializer:
    assignment-expression
    { initializer-list }
    { initializer-list , }
initializer-list:
    designation_opt initializer
    initializer-list , designationopt initializer
designation:
    designator-list =
designator-list:
    designator
    designator-list designator
designator:
    [ constant-expression ]
    . identifier 
```

另一方面，C++11 没有*指定的初始化程序*[参见 ISO/IEC 14882:2011，N3690 委员会草案 - 2013 年 5 月 15 日]

**8.5 初始化器**

```
initializer:
    brace-or-equal-initializer
    ( expression-list )
brace-or-equal-initializer:
    = initializer-clause
    braced-init-list
initializer-clause:
    assignment-expression
    braced-init-list
initializer-list:
    initializer-clause ...opt
    initializer-list , initializer-clause ...opt
braced-init-list:
    { initializer-list ,opt }
    { } 
```

为了达到同样的效果，使用构造函数或初始化列表：

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2014-10-03T23:56:42.217

我知道这个问题很老了，但我找到了另一种初始化方式，使用 constexpr 和柯里化：

```
struct mp_struct_t {
    public:
        constexpr mp_struct_t(int member1) : mp_struct_t(member1, 0, 0) {}
        constexpr mp_struct_t(int member1, int member2, int member3) : member1(member1), member2(member2), member3(member3) {}
        constexpr mp_struct_t another_member(int member) { return {member1, member, member3}; }
        constexpr mp_struct_t yet_another_one(int member) { return {member1, member2, member}; }

    int member1, member2, member3;
};

static mp_struct_t a_struct = mp_struct_t{1}
                           .another_member(2)
                           .yet_another_one(3); 
```

此方法也适用于全局静态变量，甚至 constexpr 变量。唯一的缺点是可维护性差：每次必须使用此方法初始化另一个成员时，都必须更改所有成员初始化方法。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2014-02-14T04:51:36.940

您可以通过构造函数进行初始化：

```
struct address {
  address() : city("Hamilton"), prov("Ontario") {}
  int street_no;
  char *street_name;
  char *city;
  char *prov;
  char *postal_code;
}; 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2018-09-07T10:20:15.077

我可能在这里遗漏了一些东西，为什么不：

```
#include <cstdio>    
struct Group {
    int x;
    int y;
    const char* s;
};

int main() 
{  
  Group group {
    .x = 1, 
    .y = 2, 
    .s = "Hello it works"
  };
  printf("%d, %d, %s", group.x, group.y, group.s);
} 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2012-07-17T09:46:42.950

您甚至可以将 Gui13 的解决方案打包到单个初始化语句中：

```
struct address {
                 int street_no;
                 char *street_name;
                 char *city;
                 char *prov;
                 char *postal_code;
               };

address ta = (ta = address(), ta.city = "Hamilton", ta.prov = "Ontario", ta); 
```

免责声明：我不推荐这种风格

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2012-07-17T06:02:34.323

它不是在 C++ 中实现的。（还有，`char*`字符串？我希望不是）。

通常，如果您有这么多参数，这是一种相当严重的代码异味。但是，为什么不简单地对结构进行值初始化，然后分配每个成员呢？

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-11-07T10:18:25.790

我发现这种方法可以用于全局变量，不需要修改原始结构定义：

```
struct address {
             int street_no;
             char *street_name;
             char *city;
             char *prov;
             char *postal_code;
           }; 
```

然后声明从原始结构类型继承的新类型的变量，并使用构造函数进行字段初始化：

```
struct temp_address : address { temp_address() { 
    city = "Hamilton"; 
    prov = "Ontario"; 
} } temp_address; 
```

虽然不如 C 风格那么优雅......

对于局部变量，它需要一个额外的 memset(this, 0, sizeof(*this)) 在构造函数的开头，所以它显然不会更糟，@gui13 的答案更合适。

（请注意，“temp_address”是“temp_address”类型的变量，但是这种新类型继承自“address”，并且可以在任何需要“address”的地方使用，所以没关系。）

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-02-04T10:45:25.413

在 GNUC++ 中（似乎从 2.5 开始就已经过时了，很久以前 :) 在此处查看答案：[使用标签的 C 结构初始化。它有效，但如何？](https://stackoverflow.com/questions/1601201/c-struct-initialization-using-labels-it-works-but-how))，可以像这样初始化一个结构：

```
struct inventory_item {
    int bananas;
    int apples;
    int pineapples;
};

inventory_item first_item = {
    bananas: 2,
    apples: 49,
    pineapples: 4
}; 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-07-06T11:16:46.740

在 C++ 中，C 风格的初始值设定项被构造函数所取代，这些构造函数在编译时可以确保只执行有效的初始化（即在初始化之后对象成员是一致的）。

这是一个很好的做法，但有时预初始化很方便，就像你的例子一样。OOP 通过抽象类或[创建设计模式](https://en.wikipedia.org/wiki/Software_design_pattern#Creational_patterns)解决了这个问题。

在我看来，使用这种安全方式会破坏简单性，有时安全性权衡可能过于昂贵，因为简单的代码不需要复杂的设计来保持可维护性。

作为替代解决方案，我建议使用 lambdas 定义宏以简化初始化，使其看起来几乎像 C 风格：

```
struct address {
  int street_no;
  const char *street_name;
  const char *city;
  const char *prov;
  const char *postal_code;
};
#define ADDRESS_OPEN [] { address _={};
#define ADDRESS_CLOSE ; return _; }()
#define ADDRESS(x) ADDRESS_OPEN x ADDRESS_CLOSE 
```

ADDRESS 宏扩展为

```
[] { address _={}; /* definition... */ ; return _; }() 
```

它创建并调用 lambda。宏参数也是逗号分隔的，所以你需要把初始化器放在括号里，然后像这样调用

```
address temp_address = ADDRESS(( _.city = "Hamilton", _.prov = "Ontario" )); 
```

您还可以编写通用宏初始化程序

```
#define INIT_OPEN(type) [] { type _={};
#define INIT_CLOSE ; return _; }()
#define INIT(type,x) INIT_OPEN(type) x INIT_CLOSE 
```

但随后通话就不那么漂亮了

```
address temp_address = INIT(address,( _.city = "Hamilton", _.prov = "Ontario" )); 
```

但是您可以使用通用 INIT 宏轻松定义 ADDRESS 宏

```
#define ADDRESS(x) INIT(address,x) 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2021-12-16T15:44:41.683

你有

1.  标准初始化列表

    ```
    address temp_address {
        /* street_no */,
        /* street_name */,
        ...
        /* postal_code */
    };

    address temp_address2 = {
        /* street_no */,
        /* street_name */,
        ...
        /* postal_code */
    } 
    ```

2.  点符号

    ```
    address temp_address;
    temp_address.street_no = ...;
    temp_address.street_name = ...;
    ...
    temp_address.postal_code = ...; 
    ```

3.  指定的聚合初始化，其中初始化列表包含从 C++20 开始可用的结构的每个成员的标签（请参阅[文档）。](https://en.cppreference.com/w/cpp/language/aggregate_initialization)

4.  将 a视为`struct`C++ 类 - 在 C++ 结构中实际上是特殊类型的类，其中所有成员都是`public`（与标准 C++ 类不同，`private`如果未明确指定所有成员，则所有成员都是）以及在使用继承时它们默认为`public`：

    ```
    struct Address {
        int street_no;
        ...
        char* postal_code;

        Address (int _street_no, ... , char* _postal_code)
         : street_no(_street_no),
           ...
           postal_code(_postal_code)
        {}
    }

    ...

     Address temp_address ( /* street_no */, ..., /* postal_code */); 
    ```

当涉及到初始化结构的方式时，您应该考虑以下方面：

*   **可移植性**——不同的编译器、不同程度的 C++ 标准完整性和不同的 C++ 标准确实限制了您的选择。如果您必须使用 C++11 编译器，但又想使用 C++20 指定的聚合初始化，那么您就不走运了
*   **可读性**- 什么更具可读性：`temp_address.city = "Toronto"`或`temp_address { ..., "Toronto", ... }`？代码的可读性非常重要。尤其是当您有大型结构（更糟糕的是嵌套结构）时，到处都有未标记的值只是自找麻烦
*   **可扩展性**——任何依赖于特定顺序的东西都不是一个好主意。缺乏标签也是如此。您想在结构的地址空间中向上或向下移动成员吗？祝你有一个未标记的初始化列表好运（在结构初始化中寻找交换的值是一场噩梦）......你想添加一个新成员吗？再次祝您好运，一切取决于特定订单。

虽然点表示法意味着您键入更多使用它获得的好处超过了这个问题，因此我可以推荐它，除非您有一个小型结构，在其结构缺乏变化方面是面向未来的，在这种情况下，您可以负担得起初始化列表。请记住：无论何时与其他人一起编写易于遵循的代码都是必不可少的。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-04-03T22:45:04.977

我今天遇到了类似的问题，我有一个结构，我想用测试数据填充这些数据，这些数据将作为参数传递给我正在测试的函数。我想拥有这些结构的向量，并正在寻找一种单线方法来初始化每个结构。

我最终在结构中使用了一个构造函数，我相信在你的问题的一些答案中也提出了这个建议。

让构造函数的参数与公共成员变量具有相同的名称可能是不好的做法，需要使用`this`指针。如果有更好的方法，有人可以建议编辑。

```
typedef struct testdatum_s {
    public:
    std::string argument1;
    std::string argument2;
    std::string argument3;
    std::string argument4;
    int count;

    testdatum_s (
        std::string argument1,
        std::string argument2,
        std::string argument3,
        std::string argument4,
        int count)
    {
        this->rotation = argument1;
        this->tstamp = argument2;
        this->auth = argument3;
        this->answer = argument4;
        this->count = count;
    }

} testdatum; 
```

我在测试函数中使用它来调用正在测试的函数，其中包含如下各种参数：

```
std::vector<testdatum> testdata;

testdata.push_back(testdatum("val11", "val12", "val13", "val14", 5));
testdata.push_back(testdatum("val21", "val22", "val23", "val24", 1));
testdata.push_back(testdatum("val31", "val32", "val33", "val34", 7));

for (std::vector<testdatum>::iterator i = testdata.begin(); i != testdata.end(); ++i) {
    function_in_test(i->argument1, i->argument2, i->argument3, i->argument4m i->count);
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-08-11T19:58:26.930

这是可能的，但前提是您正在初始化的结构是 POD（普通旧数据）结构。它不能包含任何方法、构造函数，甚至是默认值。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-01-28T00:44:05.663

受到这个非常简洁的答案的启发：（[https://stackoverflow.com/a/49572324/4808079](https://stackoverflow.com/a/49572324/4808079)）

你可以做 Lamba 闭包：

```
// Nobody wants to remember the order of these things
struct SomeBigStruct {
  int min = 1;
  int mean = 3 ;
  int mode = 5;
  int max = 10;
  string name;
  string nickname;
  ... // the list goes on
} 
```

.

```
class SomeClass {
  static const inline SomeBigStruct voiceAmps = []{
    ModulationTarget $ {};
    $.min = 0;  
    $.nickname = "Bobby";
    $.bloodtype = "O-";
    return $;
  }();
} 
```

或者，如果你想变得非常花哨

```
#define DesignatedInit(T, ...)\
  []{ T ${}; __VA_ARGS__; return $; }()

class SomeClass {
  static const inline SomeBigStruct voiceAmps = DesignatedInit(
    ModulationTarget,
    $.min = 0,
    $.nickname = "Bobby",
    $.bloodtype = "O-",
  );
} 
```

这有一些缺点，主要与未初始化的成员有关。从链接的答案评论说，它编译有效，虽然我没有测试过。

总的来说，我只是认为这是一种巧妙的方法。

# ruby - 如何正确布局网格

> ID：11516659
> 
> 赞同：2
> 
> 时间：2012-07-17T05:46:35.783
> 
> 标签：ruby, algorithm

我有许多不同尺寸（宽度和高度）的“砖块”和一个固定尺寸的容器。我想从顶部向下移动尽可能紧凑地布置容器内的砖块。考虑到前面的步骤，我已经选择了网格在任何步骤中都应该是最佳的标准。到目前为止，我有以下（低效）代码不起作用：

```
def fits?(x, y, w, h)
  !((x + w > W) || (y + h > H))
end

def overlaps?(existing, modified)
  existing[:x] + existing[:w] > modified[:x] && existing[:y] + existing[:h] > modified[:y] && modified[:x] + modified[:w] > existing[:x] && modified[:y] + modified[:h] > modified[:y]
end

AXIS = :x

W =  800
H = 6400

sizes = [
  { w: 200 , h: 200 },
  { w: 200 , h: 200 },
  { w: 400 , h: 400 },
  { w: 200 , h: 200 },
  { w: 200 , h: 200 },
  { w: 400 , h: 400 },
  { w: 600 , h: 600 },
  { w: 200 , h: 200 },
  { w: 800 , h: 800 },
]

existing = []

sizes.each do |size|
  size[:x] = 0
  size[:y] = 0

  existing.each do |existing|

    if overlaps?(size, existing)  

      if fits?(x = existing[:x] + existing[:w], y = existing[:y], size[:w], size[:h])
        size[:x] = x
        size[:y] = y
        redo 
      end

      if fits?(x = existing[:x], y = existing[:y] + existing[:h], size[:w], size[:h])
        size[:x] = x
        size[:y] = y
        redo
      end

      case AXIS
      when :x then size[:x] = 0; size[:y] = existing[:y] + existing[:h]
      when :y then size[:y] = 0; size[:x] = existing[:x] + existing[:w]
      end      
    end

  end

  puts "#{size[:x]} , #{size[:y]} , #{size[:w]} , #{size[:h]}"

  existing << size
end 
```

有什么想法可以解决这个问题吗？看起来这将是贪心算法的一个主要例子，但我无法弄清楚它应该是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T05:55:11.533

您的问题是**[NP-Hard](http://en.wikipedia.org/wiki/NP-hard)**，因此**没有已知的多项式解决方案**。

可以显示从[子集子问题](http://en.wikipedia.org/wiki/Subset_sum_problem)的简单简化：

**广义子集总和 问题**：给定一个集合`S`和一个整数`k`，当且仅当存在`S`该总和的子集时才返回真`k`。

**减少**：给定一个子集和的实例`(S,k)`-创建一个大小为的容器`(1,k)`，并且元素是`(1,s)`每个`s`in 的`S`。

很容易看出，当且仅当你可以完全填满容器时——原始子集和问题的解决方案是正确的，因此上述是多项式归约，问题是 NP-Hard。（注：“get it as compact as possible”的原始问题实际上是这个问题的优化问题，仍然是NP-Hard）。

关于这些坏消息我很遗憾。
一些**替代方案**正在使用**指数**解决方案（例如[回溯](http://en.wikipedia.org/wiki/Backtracking)）、**启发式**或**近似**算法。
请注意，在一维空间中，问题有一个[伪多项式解决方案](http://en.wikipedia.org/wiki/Subset_sum_problem#Pseudo-polynomial_time_dynamic_programming_solution)，使用动态编程，但我认为它不能简单地应用于二维空间（如果有的话）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T08:41:22.197

正如 amit 所指出的，您的问题是 NP 难的。但是，这不应该阻止您简单地遍历所有排列的砖块，看看其中哪一个是最合适的。也就是说，假设你没有“太多”的砖块。

“太多”的值主要取决于您的计算速度和可用时间，但我的猜测是，例如 14 的值是可以的。

如果蛮力解决方案太慢，您仍然可以尝试启发式或近似算法。

编辑：你的例子砖看起来很人造。您的砖块尺寸是否符合某些标准，或者它们完全是任意的？如果有的话，也许你可以利用对砖块大小的限制。

# c#-4.0 - azure 中与度量相关的 powershell 命令

> ID：11516662
> 
> 赞同：0
> 
> 时间：2012-07-17T05:46:57.373
> 
> 标签：c#-4.0, powershell, azure, cloud

我们正在尝试使用 powershell 命令以编程方式获取 cpu 百分比、磁盘读取吞吐量等，但我们无法根据新版本获取任何命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T19:40:18.403

首先，您是否尝试从 Web/Worker Role 或 Windows Azure 虚拟机的新预览版中获取性能详细信息？

**使用 Windows Azure 虚拟机：**

您可以完全访问您的 Azure VM，并按照您在任何远程 VM 中的方式对其进行配置，并从中获取性能数据。对于 Windows Azure 虚拟机，如果您想从 Powershell 获取性能数据，您需要执行以下操作：

1.  配置到 Azure VM 以具有 PowerShell 远程访问
2.  配置 Azure VM 端口设置，以便您可以从本地计算机连接（这是必须的，您应该知道打开的端口将打开与外部 VM 的连接）
3.  配置 Azure VM 以收集性能数据
4.  使用 PowerShell 从您的本地计算机连接并收集性能数据

您可以在 Internet 上找到几个资源来完成上述任务。

**具有 Web/Worker 角色：**

即使您在 Windows Azure 中使用新的 Powershell cmdlet，旧命令仍然可以访问并按预期工作。从 Azure 获取性能指标这里有一些资源供您尝试：

1.  Windows Azure 诊断和 PowerShell – 性能计数器： [第 1 部分](http://michaelwasham.com/2011/09/16/getting-started-with-windows-azure-powershell-cmdlets-2-0-for-diagnostics/)| [第2部分](http://michaelwasham.com/2011/09/19/windows-azure-diagnostics-and-powershell-performance-counters/)
2.  [如何轻松地远程启用 Windows Azure 诊断](http://www.davidaiken.com/2011/10/18/how-to-easily-enable-windows-azure-diagnostics-remotely/)

# php - 使用 PHP 部署的 Flex

> ID：11516663
> 
> 赞同：0
> 
> 时间：2012-07-17T05:47:00.837
> 
> 标签：php, apache-flex, windows-installer, web-deployment

我正在使用 php 作为数据访问的 FLEX Web 应用程序项目。我想知道是否有用于部署的打包工具。在 .NET 中有用于 ASP 和其他工具的“设置和部署”工具。但这里的大问题是，我使用了一个映射，它根据安装应用程序的服务器的 IP 地址或域名获取它的身份验证密钥。

对此的任何反馈都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:06:37.263

解决问题的最简单方法是将 PHP 后端的映射键注入客户端，因为后端应该知道它在哪里运行。

至于打包工具，我个人使用[Apache Ant](http://ant.apache.org/)，它可以让你编译 Flex 文件（通过 Flex SDK 提供的 flexTasks.jar），而 PHP 打包通常只是复制/移动文件，我认为你不需要更多用于 Flex 和 PHP 的包装部分。

希望有帮助。

# ruby-on-rails - 检查用户是否有游戏

> ID：11516669
> 
> 赞同：0
> 
> 时间：2012-07-17T05:47:34.453
> 
> 标签：ruby-on-rails, devise

我在这里做了一些搜索，但我找不到任何能完全回答我正在寻找的东西的东西。如果我搜索失败，我深表歉意。

继续前进，我是 Rails 的新手，如果你愿意的话，我正在开发一个测试水域的应用程序。我正在使用 Devise 进行身份验证，事实证明它非常有用。就是说，我遇到了一个很大的障碍，即特定的数据检查将去哪里，以及我将如何去做。

我有三个表：`users`、`games`和`users_games`（我读​​到这是关系表的可接受命名约定，如果我错了，请纠正我）。`users_games`如果当前登录的用户将此游戏添加到他们的帐户（在）中，我想在游戏页面上显示特定消息。我不确定在哪里执行此检查，或者它是否重要。

至于实际检查，我最初的想法是：

游戏控制器.rb

```
class GamesController < ApplicationController
  def index
    @games = Game.all
  end

  def show
    @game = Game.find(params[:id])
    @user_owns = UsersGames.where(:game_id => @game.id, :user_id => current_user.id)
  end
end 
```

然后在视图上检查是否`@user_owns`有值。

提前感谢您提供的任何见解或智慧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:16:19.037

这种方式呢，如果游戏 has_many users 和 user belongs_to game 可能你不需要 users_games

```
 def show
    @game = Game.find_by_user_id(current_user.id)
  end 
```

然后在视图上检查@game 是否有值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:27:37.997

如果您的`Users<->Games`关系是一个简单的 HABTM，连接表上没有其他属性，即

```
class User < AR::Base
  has_and_belongs_to_many :games

class Game < AR::Base
  has_and_belongs_to_many :users 
```

您不需要为连接表创建单独的模型，前提是您遵循 Rails 命名约定，该约定要求您在命名连接表时遵循字典顺序，即在您的情况下，它会是`games_users`，而不是相反就像你现在拥有它一样。

回到你原来的问题，我认为它可以像这样简单：

```
def show
  @game = Game.find(params[:id])
  @game_owned = current_user.games.include? @game
end 
```

您还可以在您的用户模型上将此方法设为：

```
class User < AR::Base
  ...
  def owns_game?(game)
    self.games.include?(game)
  end
end 
```

然后调用`current_user.owns_game?(@game)`你的控制器/视图。

# javascript - 应用在美国运行时显示 --2560 秒前的时间显示问题

> ID：11516671
> 
> 赞同：0
> 
> 时间：2012-07-17T05:47:39.087
> 
> 标签：javascript, sencha-touch-2

我正在创建一个应用程序，我需要在其中计算当前时间和以前时间之间的时间差，这将来自数据库并需要显示在列表中。该应用程序在印度运行良好，但当同一个应用程序在美国运行时，差异时间显示为 -2560 秒，或类似的东西。为什么是这样？

我用来计算时间差的代码：

```
var timeAgoInWords = function(date) {
    try {
        var now = Math.ceil(Number(new Date()) / 1000),
            dateTime = Math.ceil(Number(new Date(date)) / 1000),
            diff = now - dateTime,
            str;

        if (diff < 60) {
            return String(diff) + ' seconds ago';
        } else if (diff < 3600) {
            str = String(Math.ceil(diff / (60)));
            return str + (str == "1" ? ' minute' : ' minutes') + ' ago';
        } else if (diff < 86400) {
            str = String(Math.ceil(diff / (3600)));
            return str + (str == "1" ? ' hour' : ' hours') + ' ago';
        } else if (diff < 60 * 60 * 24 * 365) {
            str = String(Math.ceil(diff / (60 * 60 * 24)));
            return str + (str == "1" ? ' day' : ' days') + ' ago';
        } else {
            return Ext.Date.format(new Date(date), 'jS M \'y');
        }
    } catch (e) {
        return '';
    }
}; 
```

我从 调用上述函数`itemTpl`，下面的代码`CreatedDate`将来自数据库，当用户提交评论并作为参数传递给函数时，我保存该数据库。

```
this.posted(Ext.Date.parse(values.CreatedDate, "Y-m-d g:i:s"))

 posted: timeAgoInWords 
```

以下是我将当前日期和时间存储到数据库中的方式：

```
 Ext.Date.patterns = { ISO8601Long: "Y-m-d H:i:s" };
    var date = new Date();
    var now = Ext.Date.format(date, Ext.Date.patterns['ISO8601Long']) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:36:29.917

这是一个时区问题。由于美国落后于 IST，因此从纪元开始以秒为单位的日期为您提供了过去的日期。因此，这种差异是负面的，因为您输入的日期仍然必须发生在美国。建议您在进行任何计算以查找时间差异之前将所有时间更改为 UTC。您还可以在自己的服务器上计算差异。

# c# - 事件处理程序中的编码更少？

> ID：11516673
> 
> 赞同：1
> 
> 时间：2012-07-17T05:47:44.233
> 
> 标签：c#

任何人都可以建议什么是调用进程的更好方法，而无需在 c# menustrip 中的每个菜单项中进行编码

```
 private void SetupUserToolStripMenuItem_Click(object sender, EventArgs e)
    {

        UserMenu += "Setup User";
        UserRights=ValidateUser(UserMenu);

        if (UserRights == 1)
        {
            frmDataReader frmDR = new frmDataReader();
            frmDR.Show();
        }
        else
        {

            MessageBox.Show("No Permission");
        }

    private void SetupMasterToolStripMenuItem_Click(object sender, EventArgs e)
    {

        //MessageBox.Show(menuStrip1\.  ToolStripMenuItem); 
        UserMenu += "Setup Master";
        UserRights=ValidateUser(UserMenu);

        if (UserRights == 1)
        {
            frmDataReader frmDR = new frmDataReader();
            frmDR.Show();
        }
        else
        {

            MessageBox.Show("No Permission");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:51:05.447

为所有点击事件附加相同的事件处理程序，无需为每个按钮编写相同的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T05:55:13.920

```
{
    setupMasterToolStripMenuItem.Click += ToolStripMenuItem_Click;
    setupUserToolStripMenuItem.Click += ToolStripMenuItem_Click;
}

ToolStripMenuItem_Click(object sender, EventArgs e)
{
    ToolStripMenuItem toolStripMenuItem = ((ToolStripMenuItem) sender);
    // may be like this
    // or you can check 'setupUser/setupMasterToolStripMenuItem' 
    // is equal to 'toolStripMenuItem' or check 'Tag' of them
    UserMenu += toolStripMenuItem .Text;

    UserRights=ValidateUser(UserMenu);

    if (UserRights == 1)
    {
        frmDataReader frmDR = new frmDataReader();
        frmDR.Show();
    }
    else
    {
        MessageBox.Show("No Permission");
    }
} 
```

# java - java.util.LinkedList.Node 不能分配给GWT Serializable？

> ID：11516675
> 
> 赞同：0
> 
> 时间：2012-07-17T05:48:03.753
> 
> 标签：java, javascript, gwt, serialization

当我尝试编译我的 GWT 应用程序时，我遇到了很多错误。他们之中有一些是

```
[ERROR] com.google.gwt.xml.client.impl.AttrImpl is not default instantiable (it must have a zero-argument constructor or no constructors at all) and has no custom serializer. 
              [ERROR] com.google.gwt.xml.client.impl.CDATASectionImpl is not default instantiable (it must have a zero-argument constructor or no constructors at all) and has no custom serializer. 
              [ERROR] com.google.gwt.xml.client.impl.CommentImpl is not default instantiable (it must have a zero-argument constructor or no constructors at all) and has no custom serializer.
              [ERROR] com.google.gwt.xml.client.impl.DocumentFragmentImpl is not default instantiable (it must have a zero-argument constructor or no constructors at all) and has no custom serializer.
              [ERROR] com.google.gwt.xml.client.impl.DocumentImpl is not default instantiable (it must have a zero-argument constructor or no constructors at all) and has no custom serializer. 
              [ERROR] com.google.gwt.xml.client.impl.ElementImpl is not default instantiable (it must have a zero-argument constructor or no constructors at all) and has no custom serializer.
              [ERROR] com.google.gwt.xml.client.impl.EntityReferenceImpl is not default instantiable (it must have a zero-argument constructor or no constructors at all) and has no custom serializer. 
              [ERROR] com.google.gwt.xml.client.impl.NamedNodeMapImpl is not default instantiable (it must have a zero-argument constructor or no constructors at all) and has no custom serializer.
              [ERROR] com.google.gwt.xml.client.impl.NodeImpl is not default instantiable (it must have a zero-argument constructor or no constructors at all) and has no custom serializer. 
              [ERROR] com.google.gwt.xml.client.impl.NodeListImpl is not default instantiable (it must have a zero-argument constructor or no constructors at all) and has no custom serializer. 
              [ERROR] com.google.gwt.xml.client.impl.ProcessingInstructionImpl is not default instantiable (it must have a zero-argument constructor or no constructors at all) and has no custom serializer. 
              [ERROR] com.google.gwt.xml.client.impl.TextImpl is not default instantiable (it must have a zero-argument constructor or no constructors at all) and has no custom serializer. 
              [ERROR] java.util.AbstractList.SubList<E> is not default instantiable (it must have a zero-argument constructor or no constructors at all) and has no custom serializer. 
              [ERROR] java.util.AbstractList.SubList<E> is not default instantiable (it must have a zero-argument constructor or no constructors at all) and has no custom serializer.
              [ERROR] java.util.Collections.UnmodifiableList<T> is not default instantiable (it must have a zero-argument constructor or no constructors at all) and has no custom serializer.
              [ERROR] java.util.Collections.UnmodifiableList<T> is not default instantiable (it must have a zero-argument constructor or no constructors at all) and has no custom serializer. 
              [ERROR] java.util.Collections.UnmodifiableRandomAccessList<T> is not default instantiable (it must have a zero-argument constructor or no constructors at all) and has no custom serializer. 
              [ERROR] java.util.Collections.UnmodifiableRandomAccessList<T> is not default instantiable (it must have a zero-argument constructor or no constructors at all) and has no custom serializer.
              [ERROR] java.util.LinkedList.Node<E> is not assignable to 'com.google.gwt.user.client.rpc.IsSerializable' or 'java.io.Serializable' nor does it have a custom field serializer 
              [ERROR] java.util.LinkedList.Node<E> has no available instantiable subtypes. 
              [ERROR]    subtype java.util.LinkedList.Node<E> is not assignable to 'com.google.gwt.user.client.rpc.IsSerializable' or 'java.io.Serializable' nor does it have a custom field serializer 
```

我在客户端代码中收到此错误！从我可以从互联网上读到的任何内容，它说我根本无法将在 JRE 容器中运行的所有标准方法模拟为 GWT，因为它将在运行时编译为 Javascript。但我太缺乏经验，无法理解这个错误。对此有任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:00:03.517

三个格言：

*   GWT Java 是 Java 但不是 Java
*   GWT Java 实际上是 Java 编译器友好的 Javascript。
*   实现 Serializable 可能不是 GWT Serializable

[只要实现Serializable，任何东西都可以序列化吗？](https://stackoverflow.com/questions/6604106/can-anything-be-serialized-as-long-as-it-implements-serializable/6604664#6604664)

在 Java SE/EE 字节码世界中，序列化更简单。在以下类声明中：

```
class Spider
implements Serializable{
  String a;
  Integer b;
  Cobweb c;
} 
```

编译器会通过 a 和 b，因为 String 已经有自己的序列化编解码器（即 coder/decoder 或 marshaller/demarshaller）。整数也是如此。

然后编译器尝试查看 Cobweb 是否通过提供自己的编解码器来实现 Serializable 或者 Cobweb 是否包含 Serializable 成员，例如

```
class Cobweb 
implements Serializable{
  Boolean d;
  Double e;
} 
```

d 和 e 都已经有了由 Sun/Oracle 对 Java 语言的管理所提供的序列化编解码器。

如果 CobWeb 允许泛型参数怎么办？

```
class Cobweb <T>
implements Serializable{
  Boolean d;
  T e;
} 
```

`Cobweb<Float>`将是可序列化的，因为 Java 已经有 Float 的序列化编解码器。

但是，除非 Donkey 有自定义序列化编解码器，否则编译器会在以下内容上发牢骚

```
class Spider
implements Serializable{
  String a;
  Integer b;
  Cobweb<Donkey> c;
} 
```

**GWT 可串行化是什么意思？**

实现 Serializable 还不够吗？为什么，谷歌正在实现一个新的 Serializable 接口？没有。这是谷歌的错，但不是谷歌的错。

GWT UI Java 在运行之前总是被编译成 Javascript。GWT UI Java 的本机代码是 Javascript，而不是二进制 Java 字节码。由于浏览器只运行 Javascript 而不是 Java 字节码的显而易见的原因。

[二进制数据和 GWT](https://stackoverflow.com/questions/11048223/binary-data-and-gwt/11096410#11096410)

在大多数情况下，实现 Serializable 将使您的类 GWT 可序列化。GWT 可序列化意味着存在 GWT 生成的 Javascript 代码，以便在需要时执行编解码器。即，编解码器是Java 源代码而不是Java 字节码。编解码器必须可翻译为 Javascript，因为 GWT 序列化/反序列化在浏览器上运行。

但是，有许多类 GWT 还没有编解码器。例如，GregorianCalender 和大多数需要反射的类。GregorianCalender 实现了 Serializable 但 GWT 编译器在 Java 源代码中没有任何编解码器可以翻译成 Javascript。

GWT 生成的 Javascript 无法进行运行时反射。因此，GWT 通过对您可以使用的所有可能代码的预编译排列执行延迟绑定来弥补这一缺陷。我相信 GregorianCalendar 会执行一些反射测量，并且为 GregorianCalendar 编写 GWT 编解码器将是 Javascript 代码的大量排列。我相信这是许多类没有编解码器的原因，也是原因所在。有人请纠正我。

**回到原来的问题**......

```
java.util.LinkedList.Node<E> 
```

那么，看在上帝的份上，E到底是什么？您是否将 E 替换为 GWT 可序列化？

来自堆栈跟踪的证据（如果我什至擅长跟踪堆栈跟踪）表明您甚至没有费心用实际类型替换泛型参数。通过这样做，您将强制 GWT 编译器将 E 视为类 Object。没有人知道如何序列化类 Object。你会像创世记 41 章中的法老告诉约瑟夫，

> “约瑟夫请解说我的梦，但我忘记了我的梦，所以你也必须告诉我我的梦。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:00:35.990

正如堆栈的第一行所说，要进行序列化，类需要具有不带参数的构造函数或具有自定义序列化程序。 [java-custom-serialization](https://stackoverflow.com/questions/7290777/java-custom-serialization)这里是关于编写序列化程序的主题

# asp.net-mvc-3 - 如何使用 jquery mvc 3 razor 将参数传递给 actionreuslt？

> ID：11516678
> 
> 赞同：0
> 
> 时间：2012-07-17T05:48:36.167
> 
> 标签：asp.net-mvc-3, jquery, parameters

我是 mvc3 剃须刀的新手，我的问题是：

我有这个 actionResult 方法可以从 jquery 方法接收变量

为什么我的变量为 NULL

夏普：

```
public ActionResult GetOrdersSP(int? StoreId, int? SupplierId)
        {
            bool count = false;

            var model = _storeOrderService.GetStoreSuppOrders(StoreId, SupplierId);

            if (model.Count() > 0)
            {
                count = true;
                return Json(count, JsonRequestBehavior.AllowGet);
            }
            else
            {
                return Json(count, JsonRequestBehavior.AllowGet);
            }
        } 
```

这是我的jQuery

```
$.fn.GetCount = function (data) {
        var storeid = $('#StoreId').val();
        var Supplierid = $('#Supplierid').val();
        if (ValidateCreateOrder('#StoreId', '#Supplierid')) {
            alert(storeid);
            alert(Supplierid);

            $.ajax(
                {
                    url: '<%: Url.Action("GetOrdersSP", "StoreOrder")%>',
                    type: 'json',
                    data: { StoreId: $('#StoreId').val(),
                        SupplierId: $('#SupplierId').val()
                    },
                    success: function (json) {

                        //should popup the modal 
                        alert(true);
                    }
                });
        }
    } 
```

请注意，storeid 和 supplierid 在警报中正确显示

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:02:24.963

我认为您需要将数据转换为 json 并在 actionResult 上解析它。

请参阅这篇文章[使用 jquery ajax 将参数传递给控制器](https://stackoverflow.com/questions/4977858/pass-a-parameter-to-a-controller-using-jquery-ajax)

# css - css不透明度在IE中不起作用

> ID：11516680
> 
> 赞同：6
> 
> 时间：2012-07-17T05:48:58.603
> 
> 标签：css, internet-explorer

我确实投入了我所知道的每个不透明度选项，但它仍然没有改变不透明度，

[你不应该看到一个蓝色的盒子](http://jsfiddle.net/xApPB/1/)

该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T06:45:41.823

不透明度不适用于 IE 10、9、8 中的伪对象

试试这个代码：

**`HTML:`**

```
<div></div> 
```

**`CSS:`**

```
div{
  width:100px;
  height: 100px;
  background: blue;

  filter:alpha(opacity=30);
  -moz-opacity:0.3;
  -khtml-opacity: 0.3;
  opacity: 0.3;
}

div:after{
    content: ' ';
    position: absolute;
    width:100px;
    height: 100px;
    left: 200px;
    background: blue;

    filter:alpha(opacity=30);
    -moz-opacity:0.3;
    -khtml-opacity: 0.3;
    opacity: 0.3;
} 
```

[点击查看实际效果](http://jsfiddle.net/5hE26/)

你应该看到的是两个半透明的正方形。然而，IE 忽略了伪项目的不透明度属性，并将其呈现为完全不透明。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-12T09:42:56.650

**IE9+、FF 3+​​、Chrome、Safari 3+ 和 Opera 10+**的另一种解决方案是使用 rgba 作为背景颜色值。见[http://jsfiddle.net/uRgfu/4/](http://jsfiddle.net/uRgfu/4/)

```
<style type="text/css">
    .color-block {
         background-color: rgba(0, 0, 0, 0.5);
    }
</style> 
```

为了也支持**旧的 IE 版本**，您可以添加如下内容：

```
<!--[if lte IE 8]>
    <style type="text/css">
        .color-block { 
            background:transparent;
            filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#7FFF0000,endColorstr=#7FFF0000); 
            zoom: 1;
        } 
    </style>
<![endif]-->

<style type="text/css">
    .color-block {
         background: rgb(255,0,0); /*Fallback for other old browsers*/
         background: rgba(255,0,0, 0.5);
    }
</style> 
```

请注意，条件注释中的“#7FFF0000”等于“rgba(255,0,0,0.5)”，因为 7F(hex) = 50(dec)。所以 cc 中的 alpha 范围从 00 到 FF，而在 rgba 中它从 0 到 1。而且你应该使用“background”而不是“background-color”，否则后备将不起作用。见[http://jsfiddle.net/uRgfu/8/](http://jsfiddle.net/uRgfu/8/)

来源 http://css-tricks.com/rgba-browser-support/（抱歉没有足够的声誉发布超过 2 个链接）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T06:01:19.317

将 0 更改为某个数字：

```
 filter: alpha(opacity=10); 
```

# java - 需要数据输入流

> ID：11516684
> 
> 赞同：6
> 
> 时间：2012-07-17T05:49:19.940
> 
> 标签：java, datainputstream

和有什么区别

```
FileInputStream fstream = new FileInputStream ("file1.txt");
BufferedReader br = new BufferedReader(new InputStreamReader(fstream)); 
```

和

```
FileInputStream fstream = new FileInputStream ("file1.txt");
DataInputStream in = new DataInputStream(fstream);
BufferedReader br = new BufferedReader(new InputStreamReader(in)); 
```

我们真的需要一个 DataInputStream 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T06:47:01.753

使用 DataInputStream 是一个常见的错误，我认为它来自不同代码段的复制和粘贴。您希望将文件作为文本读取，例如 BufferedReader 或二进制文件，例如 DataInputStream。您极不可能同时使用两者并尝试使用可能会导致混乱。

对于缓冲的文本

```
BufferedReader br = new BufferedReader(new FileReader(file)); 
```

对于缓冲的二进制文件

```
DataInputStream dis = new DataInputStream(new BufferedInputStream(new FileInputStream(file))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T05:55:38.853

> FileInputStream 用于读取原始字节流，例如图像数据。要读取字符流，请考虑使用 FileReader。
> 
> 数据输入流允许应用程序以与机器无关的方式从底层输入流中读取原始 Java 数据类型。应用程序使用数据输出流写入数据，这些数据稍后可以由数据输入流读取。
> 
> DataInputStream 对于多线程访问不一定是安全的。

FileInputStream 只给你一个非常基本的接口。当您想读取数字、字符串（甚至复杂对象）而不仅仅是字节时，这很痛苦。因此，您使用第二个输入流“包装”第一个，这为您提供了一个更有用的界面。DataInputStream 就是其中之一。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T05:55:57.083

传递给`InputStreamReader()`构造函数的对象的重要之处在于，它将是承担任何同步持有权重的对象。如果您不希望您`FileInputStream`可能被许多电话打断，那么第二种选择就是要走的路。见[的来源`Reader`。](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/io/Reader.java#Reader.0lock)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T05:53:13.683

这取决于，数据输入流允许应用程序以与机器无关的方式从底层输入流中读取原始 Java 数据类型。应用程序使用数据输出流写入数据，这些数据稍后可以由数据输入流读取。检查[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/io/DataInputStream.html)

[BufferedReader](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html)：从字符输入流中读取文本，缓冲字符，以提供字符、数组和行的有效读取。

[FileInputStream](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html)：使用 FileInputStream，您将以字节为单位读取文件数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T06:01:44.993

不，您的示例中不需要 DataInputStream ，因为您最终获得了 BufferedReader 来读取数据。

相反，有意义的是：

```
FileInputStream fstream = new FileInputStream ("file1.txt");
BufferedInputStream br = new BufferedInputStream(fstream);
DataInputStream dis = new DataInputStream(br); 
```

通常，当您使用以下方法创建“file1.txt”时，这将齐头并进：

```
DataOutputStream dos = new DataOutputStream(new BufferedOutputStream(new FileOutputStream("file1.txt"))); 
```

编辑：

如果它没有真正意义，为什么Java允许它？因为这是[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)，这是装饰器模式的缺点之一。

# ios - UIsplitviewcontroller：如何在ios中自定义uisplitview

> ID：11516687
> 
> 赞同：1
> 
> 时间：2012-07-17T05:49:37.943
> 
> 标签：ios, uisplitviewcontroller

我必须自定义 uisplitview。我已经搜索了谷歌搜索，但我得到了拆分视图大小固定的答案。有什么帮助吗？有没有自定义uisplitview的选项？

# mysql - sql为每个月选择一条记录，其中包含该月记录的总和

> ID：11516688
> 
> 赞同：3
> 
> 时间：2012-07-17T05:49:42.410
> 
> 标签：mysql, sql

我有一个具有“约会表”和“服务表”的数据库。每个appt都有一个服务，每个服务都有一个价格。我想要的是一个查询，它将始终返回 12 行（每个月一行）并包含月份 appts 的总和（基于它的服务 ID）。到目前为止，我有：

```
select sum(service_price) as monthly_total, 
       year(appt_date_time) as year, 
       monthname(appt_date_time) as month 
from appt_tbl 
     join services_tbl on appt_tbl.service_id = services_tbl.service_id 
group by month(appt_date_time), 
         year(appt_date_time) 
order by month(appt_date_time) asc; 
```

目前，这会返回如下内容：

```
+---------------+------+-------+
| monthly_total | year | month |
+---------------+------+-------+
|        120.00 | 2012 | July  |
+---------------+------+-------+ 
```

问题是如果一个月没有任何应用程序，我不会在查询中返回该月。我希望那个月有一个记录，只要它的“monthly_total”等于零。

以下是我希望查询返回的内容：

```
+---------------+------+-------+
| monthly_total | year | month |
+---------------+------+-------+
|          0.00 | 2012 | Jan   |
+---------------+------+-------+
|          0.00 | 2012 | Feb   |
+---------------+------+-------+
|          0.00 | 2012 | March |
+---------------+------+-------+
|          0.00 | 2012 | April |
+---------------+------+-------+
|          0.00 | 2012 | May   |
+---------------+------+-------+
|          0.00 | 2012 | June  |
+---------------+------+-------+
|        120.00 | 2012 | July  |
+---------------+------+-------+
|          0.00 | 2012 | August|
+---------------+------+-------+
|          0.00 | 2012 | Sept  |
+---------------+------+-------+
|          0.00 | 2012 | Oct   |
+---------------+------+-------+
|          0.00 | 2012 | Nov   |
+---------------+------+-------+
|          0.00 | 2012 | Dec   |
+---------------+------+-------+ 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T06:04:01.113

您走在正确的轨道上，只是`LEFT JOIN`您查询月份名称表的结果。然后结果中存在的名称将返回一个匹配项，并且 a`NULL`将返回那些不在您的结果中的月份。一个`COALESCE`or `NVL`or`CASE`结构，无论你喜欢什么，都可以用来把它`NULL`变成顺子`0`。

您不需要制作真正的月份表，您可以通过使用内联视图来获得 - 只需一个生成所有月份数据的查询。

```
select     months.month, coalesce(appts.monthly_total, 0) monthly_total
from       (
                      select 'January' as month
           union all  select 'February' 
           union all  select 'March'

           ...etc...

           union all  select 'December'
           ) months
left join  (
            select     sum(service_price)        as monthly_total, 
                       monthname(appt_date_time) as month 
            from       appt_tbl 
            inner join services_tbl 
            on         appt_tbl.service_id = services_tbl.service_id
            where      appt_date_time between '2012-01-01 00:00:00'
                                          and '2012-12-31 23:59:59'         
            group by   month(appt_date_time)
           ) appts
on         months.month = appts.month 
```

至于返回特定年份的所有内容，请查看 WHERE 条件。我假设 appt_date_time 是日期时间或时间戳。您不想写 YEAR(appt_date_time) = 2012 因为这会破坏在该列上使用索引的机会（我假设该列显示为索引中的第一列）。通过使用 BETWEEN...AND 并与文字日期时间进行比较，您可以获得满足要求的非常有效的查询。

此外，如果你`GROUP BY`在`month(appt_date_time)`mysql 上将确保结果也将按月升序排序。所以不需要单独的`ORDER BY`. UNION 查询的“腿”的顺序也将由 mysql 保留。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T06:25:50.680

试试这个，它会为你工作。您需要做的就是创建一个查找表以获得更好的方法。

```
CREATE TABLE MONTHS(MON CHAR(3))
INSERT INTO MONTHS 
SELECT 'Jan' UNION ALL
SELECT 'Feb' UNION ALL
SELECT 'Mar' UNION ALL
SELECT 'Apr' UNION ALL
SELECT 'May' UNION ALL
SELECT 'Jun' UNION ALL
SELECT 'Jul' UNION ALL
SELECT 'Aug' UNION ALL
SELECT 'Sep' UNION ALL
SELECT 'Oct' UNION ALL
SELECT 'Nov' UNION ALL
SELECT 'Dec'

CREATE  TABLE Appointments(App int, Year int, Month CHAR(3))
INSERT INTO Appointments 
SELECT 120,2012,'Jul' UNION ALL 
SELECT 120,2013,'Apr'

SELECT sum(isnull(App,0)) monthly_total, b.Mon , b.Year FROM Appointments a
RIGHT JOIN (SELECT DISTINCT Year,Mon FROM Appointments CROSS JOIN MONTHS) b 
ON a.Month=b.MON AND a.Year=b.Year
GROUP BY b.Mon,b.Year 
```

# mobile - 为用户提供仍然从移动设备查看浏览器版本的网站的选项

> ID：11516689
> 
> 赞同：0
> 
> 时间：2012-07-17T05:49:52.193
> 
> 标签：mobile, user-interface

我已经建立并托管了我的移动网站。我在 .htacess 文件中编写了如下脚本。

```
RewriteCond %{HTTP_USER_AGENT} "!(android|blackberry|googlebot-mobile|iemobile|ipad|iphone|ipod|opera mobile|palmos|webos)" [NC]
RewriteRule ^(.*)$ http://www.m.abc.com [L] 
```

但是，当他从移动设备使用它时，这将始终将用户重定向到移动网站。但我希望用户也可以从移动设备上查看基于浏览器的网站。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:58:27.790

使用脚本进行检测以查找其是否为移动设备，[这里](http://detectmobilebrowsers.com/)有很多脚本 发送到移动站点，然后在底部有指向非移动站点的链接，使用一些东西，这样它就不会再次重定向回移动站点（cookie等），保存此选择，以便用户在再次返回时获得正确的站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T05:55:30.840

您应该执行以下操作。

1.  从 HTAccess 中删除上述内容。
2.  在您网站的索引或默认页面中，您需要检查用户何时来自移动设备？

3.  如果用户来自移动设备，则将他重定向到演示页面，该页面为用户提供重定向到 m.abc.com 或 abc.com 的选项

4.  你也可以使用 javascript 确认来做同样的事情。

一个基于设备宽度的脚本示例...

```
<script type="text/javascript">
<!--
if (screen.width <= 699) {
document.location = "mobile.html";
}
//-->
</script> 
```

另一个基于设备类型...

```
<script language=javascript>
<!--
if ((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i))) {
   location.replace("http://url-to-send-them/iphone.html");
}
-->
</script> 
```

基于我使用...

```
if ( (screen.width < 1024) && (screen.height < 768) ) { 
window.location = 'http://mobile.site.com';
} 
```

希望以上有帮助

# sql - 在 Oracle 数据库中添加列 SQL 查询

> ID：11516696
> 
> 赞同：1
> 
> 时间：2012-07-17T05:50:49.173
> 
> 标签：sql, database, oracle

我正在使用 Oracle 数据库（版本为 9i），我想在 oracle 数据库中的当前表中添加一列。

我想添加一个整数列来跟踪每个用户的无效尝试，所以默认值应该是 5。

当我尝试在 Sql*Plus 中执行此查询时，它会给出错误表或视图不存在（我已仔细检查表名是否正确。

```
ALTER TABLE CustApps_user ADD VALID_TRIES INT DEFAULT 5 NOT NULL; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:08:13.833

我猜你得到的错误是 ORA-00942。这可能意味着很多事情，但基本上它意味着该对象不存在于您正在执行的当前范围和上下文中。因此，例如，当我们通过角色而不是直接授予权限时，当我们尝试在另一个模式中的表上构建视图时，就会引发错误。

在您的情况下，这可能意味着该表位于另一个模式中。您通常可以通过视图或同义词访问它。您可以通过查询数据字典轻松检查这一点：

```
select owner, object_type
from all_objects
where object_name = 'CUSTAPPS_USER' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T10:28:35.790

```
alter table
   table_name
add
   (
   column1_name column1_datatype column1_constraint,  
   column2_name column2_datatype column2_constraint,
   column3_name column3_datatype column3_constraint
   ); 
```

下面是一些用于添加数据列的 Oracle“更改表”语法示例。

```
alter table
   cust_table
add
   cust_sex  varchar2(1) NOT NULL; 
```

下面是添加多个数据列的 Oracle “alter table”语法示例。

```
ALTER TABLE 
   cust_table 
ADD 
   (
      cust_sex             char(1) NOT NULL,
      cust_credit_rating   number
   ); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T07:33:33.830

您必须在查询中添加括号：

```
ALTER TABLE CustApps_user ADD (VALID_TRIES INT DEFAULT 5 NOT NULL); 
```

INT 是合法的，但是会被转换成 NUMBER，所以你也可以使用：

```
ALTER TABLE CustApps_user ADD (VALID_TRIES NUMBER(38,0) DEFAULT 5 NOT NULL); 
```

或更改（降低）NUMBER 精度。

# debugging - Eclipse cdt 在 shell 脚本中调试可执行文件

> ID：11516699
> 
> 赞同：2
> 
> 时间：2012-07-17T05:51:03.730
> 
> 标签：debugging, eclipse-cdt

我最近开始在 Linux 上使用 Eclipse CDT，非常喜欢它！！！

我几乎可以找到所有问题的答案。

我无法在一个简单的可执行文件上调用调试器，我需要在运行一个设置了许多环境变量的相当大的 shell 脚本后执行它。

我的问题只是如何做到这一点，以便最终我能够调用调试器（GDB），其中所有环境变量都由一些预运行的 shell 脚本设置。

或者，如何设置一个脚本——作为第一阶段——设置环境，并最终调用 Eclipse CDT 调试器。

非常感谢您的帮助。

问候，-兹维卡

# c# - 如何从 XAML 正确加载 WF4 工作流？

> ID：11516702
> 
> 赞同：13
> 
> 时间：2012-07-17T05:51:30.413
> 
> 标签：c#, .net, workflow-foundation-4, workflow-foundation

## 简洁版本：

如何从 XAML 加载 WF4 工作流？重要细节：加载工作流的代码不需要事先知道工作流中使用了哪些类型。

* * *

## 长版：

我很难从 Visual Studio 创建的 XAML 文件加载 WF4 工作流。我的场景是我想将此文件放入数据库中，以便能够在不重新编译工作流调用程序的情况下集中修改它。

我目前正在使用此代码：

```
var xamlSchemaContext = new XamlSchemaContext(GetWFAssemblies());
var xmlReaderSettings = new XamlXmlReaderSettings();
xmlReaderSettings.LocalAssembly = typeof(WaitForAnySoundActivity).Assembly;
var xamlReader = ActivityXamlServices.CreateBuilderReader(
                     new XamlXmlReader(stream, xmlReaderSettings), 
                     xamlSchemaContext);

var activityBuilder = (ActivityBuilder)XamlServices.Load(xamlReader);
var activity = activityBuilder.Implementation;
var validationResult = ActivityValidationServices.Validate(activity); 
```

这给了我很多错误，分为两类：

**第 1 类：**
我的程序集中的类型未知，尽管我向`XamlSchemaContext`.

> ValidationError { Message = 编译器错误遇到处理表达式“GreetingActivationResult.WrongPin”。未声明“GreetingActivationResult”。由于其保护级别，它可能无法访问。, 源 = 10: VisualBasicValue, PropertyName = , IsWarning = False }

这可以通过使用[此处](http://social.msdn.microsoft.com/Forums/en-US/wfprerelease/thread/2b77771e-84a6-4ec3-a944-3de2a60201fc)描述的技术来解决，该技术基本上将所有使用类型的程序集和命名空间添加到某个`VisualBasicSettings`实例：

```
var settings = new VisualBasicSettings();
settings.ImportReferences.Add(new VisualBasicImportReference
{
    Assembly = typeof(GreetingActivationResult).Assembly.GetName().Name,
    Import = typeof(GreetingActivationResult).Namespace
}); 
// ...
VisualBasic.SetSettings(activity, settings);
// ... Validate here 
```

这可行，但使工作流的整个“动态加载”部分成为一个笑话，因为代码仍然需要知道所有使用的命名空间。
**问题 1：**是否有另一种方法可以消除这些验证错误，而无需事先知道使用了哪些命名空间和程序集？

**类别 2：**
我所有的输入参数都是未知的。我可以看到它们很好，`activityBuilder.Properties`但我仍然收到验证错误，说它们是未知的：

> ValidationError { Message = 编译器错误遇到处理表达式“Pin”。'Pin' 未声明。由于其保护级别，它可能无法访问。, 源 = 61: VisualBasicValue, PropertyName = , IsWarning = False }

至今没有解决办法。
**问题 2：**如何告诉 WF4 使用 XAML 文件中定义的参数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T20:58:41.147

问题 2：您不能执行 ActivityBuilder，它只是用于设计。您必须加载 DynamicActivity（仅通过 ActivityXamlServices）。它应该以这种方式工作（不使用特殊的 XamlSchemaContext），但您必须提前加载所有使用的程序集（将它们放在 bin 目录中也应该有效，到目前为止，关于问题 1，DynamicActivity 可能会使事情变得更容易一些）：

```
var dynamicActivity = ActivityXamlServices.Load(stream) as DynamicActivity;
WorkflowInvoker.Invoke(dynamicActivity); 
```

一般来说，我的印象是您正在尝试实现自己的“ActivityDesigner”（如 VS）。我自己尝试过，处理 DynamicActivity 和 ActivityBuilder 非常困难（因为 DynamicActivity 不可序列化但 ActivityBuilder 无法执行），所以我最终得到了一个自己的活动类型，它在内部将一种类型转换为另一种类型。如果您想查看我的结果，请阅读[本文](http://www.codeproject.com/Articles/375034/A-dynamic-Rehosted-Workflow-Designer-for-WF-4)的最后几节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-21T02:21:28.490

我有一个这样做的项目 - 程序集也存储在数据库中。

当需要实例化工作流实例时，我会执行以下操作：

1.  将程序集从数据库下载到缓存位置
2.  创建一个新的 AppDomain，将程序集路径传递给它。
3.  从新的 AppDomain 加载每个程序集 - 您可能还需要加载托管环境所需的程序集。

我不需要弄乱 VisualBasic 设置——至少就我所见，我已经快速查看了我的代码，但我确定我已经在某处看到它......

在我的情况下，虽然我不知道输入名称或类型，但调用者应该构建一个包含输入名称和值（作为字符串）的请求，然后通过反射帮助程序类将其转换为正确的类型。

此时我可以实例化工作流。

我的 AppDomain 初始化代码如下所示：

```
 /// <summary>
        /// Initializes a new instance of the <see cref="OperationWorkflowManagerDomain"/> class.
        /// </summary>
        /// <param name="requestHandlerId">The request handler id.</param>
        public OperationWorkflowManagerDomain(Guid requestHandlerId)
        {
            // Cache the id and download dependent assemblies
            RequestHandlerId = requestHandlerId;
            DownloadAssemblies();

            if (!IsIsolated)
            {
                Domain = AppDomain.CurrentDomain;
                _manager = new OperationWorkflowManager(requestHandlerId);
            }
            else
            {
                // Build list of assemblies that must be loaded into the appdomain
                List<string> assembliesToLoad = new List<string>(ReferenceAssemblyPaths);
                assembliesToLoad.Add(Assembly.GetExecutingAssembly().Location);

                // Create new application domain
                // NOTE: We do not extend the configuration system
                //  each app-domain reuses the app.config for the service
                //  instance - for now...
                string appDomainName = string.Format(
                    "Aero Operations Workflow Handler {0} AppDomain",
                    requestHandlerId);
                AppDomainSetup ads =
                    new AppDomainSetup
                    {
                        AppDomainInitializer = new AppDomainInitializer(DomainInit),
                        AppDomainInitializerArguments = assembliesToLoad.ToArray(),
                        ApplicationBase = AppDomain.CurrentDomain.BaseDirectory,
                        PrivateBinPathProbe = null,
                        PrivateBinPath = PrivateBinPath,
                        ApplicationName = "Aero Operations Engine",
                        ConfigurationFile = Path.Combine(
                            AppDomain.CurrentDomain.BaseDirectory, "ZenAeroOps.exe.config")
                    };

                // TODO: Setup evidence correctly...
                Evidence evidence = AppDomain.CurrentDomain.Evidence;
                Domain = AppDomain.CreateDomain(appDomainName, evidence, ads);

                // Create app-domain variant of operation workflow manager
                // TODO: Handle lifetime leasing correctly
                _managerProxy = (OperationWorkflowManagerProxy)Domain.CreateInstanceAndUnwrap(
                    Assembly.GetExecutingAssembly().GetName().Name,
                    typeof(OperationWorkflowManagerProxy).FullName);
                _proxyLease = (ILease)_managerProxy.GetLifetimeService();
                if (_proxyLease != null)
                {
                    //_proxyLease.Register(this);
                }
            }
        } 
```

下载程序集代码很简单：

```
 private void DownloadAssemblies()
        {
            List<string> refAssemblyPathList = new List<string>();
            using (ZenAeroOpsEntities context = new ZenAeroOpsEntities())
            {
                DbRequestHandler dbHandler = context
                    .DbRequestHandlers
                    .Include("ReferenceAssemblies")
                    .FirstOrDefault((item) => item.RequestHandlerId == RequestHandlerId);
                if (dbHandler == null)
                {
                    throw new ArgumentException(string.Format(
                        "Request handler {0} not found.", RequestHandlerId), "requestWorkflowId");
                }

                // If there are no referenced assemblies then we can host
                //  in the main app-domain
                if (dbHandler.ReferenceAssemblies.Count == 0)
                {
                    IsIsolated = false;
                    ReferenceAssemblyPaths = new string[0];
                    return;
                }

                // Create folder
                if (!Directory.Exists(PrivateBinPath))
                {
                    Directory.CreateDirectory(PrivateBinPath);
                }

                // Download assemblies as required
                foreach (DbRequestHandlerReferenceAssembly dbAssembly in dbHandler.ReferenceAssemblies)
                {
                    AssemblyName an = new AssemblyName(dbAssembly.AssemblyName);

                    // Determine the local assembly path
                    string assemblyPathName = Path.Combine(
                        PrivateBinPath,
                        string.Format("{0}.dll", an.Name));

                    // TODO: If the file exists then check it's SHA1 hash
                    if (!File.Exists(assemblyPathName))
                    {
                        // TODO: Setup security descriptor
                        using (FileStream stream = new FileStream(
                            assemblyPathName, FileMode.Create, FileAccess.Write))
                        {
                            stream.Write(dbAssembly.AssemblyPayload, 0, dbAssembly.AssemblyPayload.Length);
                        }
                    }
                    refAssemblyPathList.Add(assemblyPathName);
                }
            }

            ReferenceAssemblyPaths = refAssemblyPathList.ToArray();
            IsIsolated = true;
        } 
```

最后是 AppDomain 初始化代码：

```
 private static void DomainInit(string[] args)
        {
            foreach (string arg in args)
            {
                // Treat each string as an assembly to load
                AssemblyName an = AssemblyName.GetAssemblyName(arg);
                AppDomain.CurrentDomain.Load(an);
            }
        } 
```

您的代理类需要实现 MarshalByRefObject 并充当您的应用程序和新应用程序域之间的通信链接。

我发现我能够毫无问题地加载工作流并获取根活动实例。

****编辑 29/07/12 ******

 **即使您只将 XAML 存储在数据库中，您也需要跟踪引用的程序集。您的引用程序集列表将按名称在附加表中进行跟踪，或者您必须上传（并且显然支持下载）工作流引用的程序集。

然后，您可以简单地枚举所有引用程序集并将所有公共类型的所有命名空间添加到 VisualBasicSettings 对象 - 像这样......

```
 VisualBasicSettings vbs =
                VisualBasic.GetSettings(root) ?? new VisualBasicSettings();

            var namespaces = (from type in assembly.GetTypes()
                              select type.Namespace).Distinct();
            var fullName = assembly.FullName;
            foreach (var name in namespaces)
            {
                var import = new VisualBasicImportReference()
                {
                    Assembly = fullName,
                    Import = name
                };
                vbs.ImportReferences.Add(import);
            }
            VisualBasic.SetSettings(root, vbs); 
```

最后不要忘记从环境程序集中添加命名空间 - 我从以下程序集中添加命名空间：

*   mscorlib

*   系统

*   系统活动

*   系统核心

*   系统文件

总而言之：
1\. 跟踪用户工作流引用的程序集（因为您将重新托管工作流设计器，这将是微不足道的）
2\. 构建将导入命名空间的程序集列表 - 这将是默认值的并集环境程序集和用户引用的程序集。
3\. 使用命名空间更新 VisualBasicSettings 并重新应用到根活动。

您需要在执行工作流实例的项目和重新托管工作流设计器的项目中执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T13:42:09.427

Team Foundation 2010 的构建系统是我知道的一个系统，它与您尝试做的工作相同。在控制器上执行自定义构建工作流时，需要将构建控制器指向 TFS 中保存自定义程序集的路径。然后，控制器在开始处理工作流时递归地从该位置加载所有程序集。

您提到您需要将文件保存在数据库中。您是否也不能将有关所需程序集的位置或元数据信息存储在同一数据库中，并在调用工作流之前使用反射递归地加载它们？

然后，您可以有选择地从此路径添加/删除程序集，而无需更改使用

```
var settings = new VisualBasicSettings();
settings.ImportReferences.Add(new VisualBasicImportReference
{
    Assembly = typeof(GreetingActivationResult).Assembly.GetName().Name,
    Import = typeof(GreetingActivationResult).Namespace
}); 
// ...
VisualBasic.SetSettings(activity, settings);
// ... Validate here 
```

方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-18T06:51:29.137

这是我将 xaml 嵌入资源（默认工作流）加载到工作流设计器的方式：

```
//UCM.WFDesigner is my assembly name, 
//Resources.Flows is the folder name, 
//and DefaultFlow.xaml is the xaml name. 
 private const string ConstDefaultFlowFullName = @"UCM.WFDesigner.Resources.Flows.DefaultFlow.xaml";
      private void CreateNewWorkflow(object param)
    {

        //loading default activity embeded resource
        using (var stream = Assembly.GetExecutingAssembly().GetManifestResourceStream(ConstDefaultFlowFullName))
        {
            StreamReader sReader = new StreamReader(stream);
            string content = sReader.ReadToEnd();
            //createion ActivityBuilder from string
            ActivityBuilder activityBuilder = XamlServices.Load( ActivityXamlServices
                .CreateBuilderReader(new XamlXmlReader(new StringReader(content)))) as ActivityBuilder;
            //loading new ActivityBuilder to Workflow Designer
            _workflowDesigner.Load(activityBuilder);
            OnPropertyChanged("View");
        }
    } 
```**

# assembly - 每 1000 个定时器计数的倍数打印一个计数器，没有硬件除法指令？

> ID：11516707
> 
> 赞同：2
> 
> 时间：2012-07-17T05:51:54.250
> 
> 标签：assembly, binary, arm, modulo

我正在尝试在程序集中实现一个计数器，除了执行正常任务外，我还想打印计数器。所以如果我的计数器是 10 秒，我想在那 10 秒内执行任务，并打印 10,9,8..等等

我能想到的唯一方法是检查`current - starting`以毫秒为单位的时间是否是完美的千，例如，10 是 10,000，9 是 9000，等等，然后打印这些数字。

所以我的问题是如何在 ARM 汇编中进行取模函数？我在没有除法指令的 ARMSIM 工作。

它确实有二进制右移和二进制左移、二进制与、异或等有没有办法使用这些操作来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T07:16:26.060

您的代码显然会在某个时间点开始执行您的任务，T。

如果您知道开始时间 T，您只需将其加上 1000 即可得到您应该打印答案的时间 U。

然后只需将时间与 U 进行比较。如果更大，则打印一个答案，并将 U 设置为 U+1000 作为下一个要打印的答案的限制。

人们经常使用这个基本思想为实时操作系统构建“计时器”。

无需除法：-}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:13:17.830

好吧，首先我不相信这是解决问题的最佳方法。

但是如果你能乘以 1000，除以 1000 并不难。做二进制搜索。像这样的东西：

```
; Compute x / 1000 by binary search.
lo = x >> 10 ; x / 1024
hi = x >> 9  ; x / 512
while lo < hi 
  mid = (lo + hi) >> 1;
  test = mid * 1000
  if test < x then lo = mid + 1
  else if test > x then hi = mid - 1
  else return mid
end
return hi 
```

有了这个商，你可以用 x - q * 1000 做 mod

当然 x 乘以 1000 就是 x << 10 - x << 4 - x << 3

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-08T05:33:51.107

二进制奇数的最后一位总是 = 1，这样 3--> 11 5--> 101 7--> 111 所以假设：

```
Mov R0,#0x01
Mov R1,#0x23
And R3,R0,R1
CMP R3,#0X01
BEQ ODD
BNE EVEN 
```

# windows - Geoposition.CivicAddress 给出错误的结果

> ID：11516709
> 
> 赞同：1
> 
> 时间：2012-07-17T05:51:58.377
> 
> 标签：windows, geolocation, microsoft-metro

我正在使用**Geolocator**类来获取 Windows Metro 应用程序的位置信息。

该应用程序为 Geo Position (Lat-Long) 提供了正确的结果，但为 CivicAddress 提供了错误的结果。

例如：我在印度艾哈迈达巴德。
该应用程序将 23.033 和 72.616 作为纬度和经度，这是正确的，但对于公民地址，它给出“美国”作为国家，而公民地址的其他字段（如城市、邮政编码和州）为空。

请让我知道我应该怎么做才能解决问题。

谢谢，卡维特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:24:51.820

如果未安装 Civic Address 提供程序，则 API 返回用户设置的国家/地区。

来自[http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.devices.geolocation.civicaddress.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.devices.geolocation.civicaddress.aspx)：

> ## 评论
> 
> 除非安装了公民地址提供程序，否则公民地址数据不可用。Windows 8 未安装 Civic Address 提供程序。如果未安装 Civic Address 提供程序，API 将返回用户在控制面板中设置的国家/地区。

# jquery - Jquery中奇怪的宽度问题

> ID：11516710
> 
> 赞同：0
> 
> 时间：2012-07-17T05:52:00.367
> 
> 标签：jquery

设置同一个标签框内容相同时，返回的width()值不同

```
 $("#ArticleUrl").text("demo");
      alert($("#ArticleUrl").width());
    $("#ArticleUrl").text("demo");
      alert($("#ArticleUrl").width()); 
```

我们如何避免这种情况？

# javascript - 如何在 emberjs 的控制器中操作 dom？

> ID：11516712
> 
> 赞同：4
> 
> 时间：2012-07-17T05:52:16.240
> 
> 标签：javascript, view, controller, ember.js

这是一个场景：

我在控制器初始化时加载数据。当加载完成时。我想根据负载数据调整容器元素的大小。那么问题来了，我如何访问控制器中的视图？

我知道我可以在视图中操作 dom，`this.$()`但是我如何访问控制器中的 dom 或如何访问控制器中的视图。我`Ember.Router`这里用。所以我不手动创建视图和控制器。

[http://jsbin.com/oxudor/edit#javascript,html](http://jsbin.com/oxudor/edit#javascript,html)我在这里展示了一些代码示例。该代码**无法执行**，但它可以显示我的问题。我对有问题的代码做了一些评论。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T07:05:51.217

我认为你不应该在控制器中玩 dom。这打破了 MVC。也许一种解决方案是在视图中定义一个观察者，监听控制器的内容。在这个观察者中，然后玩 dom（你在视图中，所以没问题）。正如@pangratz 建议的那样，通过一些代码，也许我可以给你一个更完整的答案。

编辑：我认为您可以将轮播功能放在相关视图中，并观察 controller.loading 属性。在这里，您可以使用 this.$() 检索视图的 jquery 对象。

```
carousel: function() {
  var context = this.get('controller'), 
      self = this;

  if(context.get('loading') === false) {
    setTimeout(function() {
      var width = self.$('#page_wrapper').width(),
          num   = self.$('.page').size();
      self.$('#pages').width(width * num);
      self.$('.page').width(width);
      console.log([width, num]);
      console.log(context.get('elements'));
    }, 100);
  }
}.observes('controller.loading') 
```

希望这有助于...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-18T10:36:06.877

现在您可以使用修饰符，安装[Ember-midifier 库](https://github.com/ember-modifier/ember-modifier)并查看本教程[Ember-Modifiers](https://guides.emberjs.com/release/components/template-lifecycle-dom-and-modifiers/)

# java - 在连续更新的批处理中运行时，couchdb 查询超时

> ID：11516713
> 
> 赞同：2
> 
> 时间：2012-07-17T05:52:17.107
> 
> 标签：java, database, nosql, couchdb, ektorp

我在 couchdb 上使用简单的批量获取和更新。

```
 int batchSize = 5000;
    String startKey = "";
    List<FrontLineWorker> frontLineWorkers;

    while (true) {
        frontLineWorkers = allFrontLineWorkers.getMsisdnsFrom(startKey, batchSize);

        if (frontLineWorkers.size() < batchSize) break;

        for (FrontLineWorker frontLineWorker : frontLineWorkers) {
            // process record, only updates record
        }

        startKey = frontLineWorkers.get(frontLineWorkers.size() - 1).getMsisdn();
    } 
```

getMsisdnsFrom 是一个沙发查询，它在几次后开始超时。我知道沙发仅在读取完成后才索引视图，但由于我只更新记录，它不应该影响索引。另外由于这是预期用途，获取一组记录，修改并获取下一组，我不希望它超时。

我已经尝试过批处理时间 1000 和 5000。

异常消息是：线程“主”org.ektorp.DbAccessException 中的异常：java.net.SocketTimeoutException：读取超时

编辑：在我将批量大小减少到 100 后它起作用了，但我更喜欢更大的批量大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:54:52.157

这`java.net.SocketTimeoutException`是一个非常低级的异常，听起来您可能只需要增加套接字超时值，以便 Java 等待读取完成。

[djc](https://stackoverflow.com/users/158226/djc)也是对的，所有更新都会导致受影响节点的重新索引，但是您可以通过批量大小为 100 来避免超时这一事实意味着重新索引不会导致严重问题。

问题是批量大小对于您的套接字超时来说太大了，减少第一个或增加第二个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:27:05.357

更新文档会强制它们被重新索引。

# jasper-reports - JasperServer 域创建文档 + 即席报告

> ID：11516731
> 
> 赞同：0
> 
> 时间：2012-07-17T05:53:54.820
> 
> 标签：jasper-reports, domain-driven-design, jasperserver

我最近购买了 JasperServer 4.7 版本的许可证。现在根据我的业务需求，我需要使用在 JasperServer 中创建域来生成报告。

我还查看了 JasperServer 的高级文档，但我没有得到任何关于 Jasper 域 + 创建来自这些域的临时报告的解释。

谁能告诉我在我们对 JasperServer 域创建 + 从域创建临时报告的解释中在哪里寻找所有内容。我可能看错了方向..请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:54:08.203

在 JasperReports Server 用户指南中，有一章是关于创建域的，另一章是关于使用 ad hoc 编辑器的。它位于 Jaspersoft 支持网站 (http://support.jaspersoft.com) 上的“用户文档”下。你有一个具体的问题吗？

# javascript - 除了文本区域中的“文本插入符号”之外，如何使用透明字体？

> ID：11516736
> 
> 赞同：12
> 
> 时间：2012-07-17T05:53:58.877
> 
> 标签：javascript, html, css, fonts, caret

我有一个简单的文本区域，我需要制作透明字母，同时允许文本插入符号可见。当我应用以下规则时，我会得到隐形插入符号：

```
textarea {
   background: transparent;
   opacity: 0;
} 
```

当我输入不可见的文本时，我需要看到文本插入符号的移动。

**编辑：**我需要制作编辑器来编辑表中的 td 单元格。当我单击一个单元格时，我会显示一个文本区域并开始输入。在每个字符字母上，我在单元格中插入一个上下文。之后，我隐藏了一个文本区域。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T06:05:46.407

这个[**jsFiddle DEMO**](http://jsfiddle.net/Gb46L/)使用了一种在线教程方法，该方法经过了轻微修改，可以创建一个***非原生*** `browser text-caret`的透明文本。

此外，我创建的这个[**jsFiddle 新方法**](http://jsfiddle.net/3yrHg/)以不同方式处理该目标，但对 IE8 不友好。

* * *

***状态更新：*** 我已经改进了上面的 jsFiddle DEMO，这个**新**版本的标题是：

[**jsFiddle 新方法！**](http://jsfiddle.net/c6nd6/1/)

上面的 jsFiddle 版本现在允许点击**文本区域的内部，**并且插入符号将尊重点击的位置。这个额外的功能是通过一个很好的问题和答案[**来**](https://stackoverflow.com/q/2897155/1195891)实现的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T19:59:37.020

是时候投入我的 0.02 美元了。

据我了解，这是对这个问题的回答，它有效，又快又脏，所以请随时提出建议。此代码未经测试，但我确实在这里创建了一个工作小提琴：http: [//jsfiddle.net/66RXc/](http://jsfiddle.net/66RXc/)

```
<html>
<head>
<title>Testing</title>
<script type="text/javascript">
<!--

function call(val) {
    document.getElementById('result').value += val.charAt(val.length - 1);

    document.getElementById('result').value = 
        document.getElementById('result').value.substr(0, val.length);

    document.getElementById('test').value = 
        document.getElementById('test').value.replace(/[^\^]/g, ' ');

}​
-->
</script>
</head>
<body>

<textarea name="textarea" cols="20" rows="5" id="test"
 onKeyUp="call(this.value);"></textarea>

<textarea style="display:block" cols="20" rows="5" id="result" disabled>
</textarea>​

</body>
</html> 
```

我接近它的方式是每次在文本区域“test”中输入一个字符时，将其复制到隐藏的文本框中，然后用空格替换“test”中除 ^ 之外的所有字符。人物隐藏了，克拉还在。全文仍在另一个框中。您可以使用 display:hidden 而不是 display:block 来隐藏它。

这并不是世界上最好的实现，只是我快速完成的事情。您必须输入一种慢速（~15-20 WPM）才能使其工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-29T04:28:48.760

这是使文本本身透明的 CSS3 解决方案：

将颜色属性设置`color: rgba(0,0,0,0);`为文本

唯一的问题是插入符号不可见。我进行了快速搜索，发现插入符号及其样式完全由浏览器支配。因此，我能为您想到的唯一选择是使用 Javascript 在您输入的内容的末尾添加一个模拟插入符号。

我有一个如何做到这一点的想法，但它很混乱，我不会完全称它为理想 - 但是，我会写它以防它有助于进一步别人的想法：

1.  向页面添加隐藏标签
    *   确保它是隐藏的而不是隐藏的`display: none;`（以便它具有实际宽度）
    *   设置`white-space: nowrap;`为将其全部放在一行上）
    *   确保文本的样式与 textarea 中的文本完全相同
2.  在 textarea 之前添加元素`<span id="caret">|</span>`（我将在规范的其余部分将其称为插入符号）
    *   将其位置设置为`position: relative;`
    *   增加其 z-index 以使其覆盖
    *   向右移动以将其设置在 ACTUAL 插入符号的初始位置的顶部
3.  创建一个函数来检查 textarea 的值并检查 textarea 的宽度与插入符号的位置（如果您不知道如何执行此操作，请查找 selectionStart）
    *   这里的问题是字符并不总是相同的长度，它们也不总是与其他字体中对应的长度相同
    *   为了解决这个问题，当文本输入到 textarea 时，您应该在步骤 1 中创建的隐藏标签中模仿它
        *   仅模仿从 textarea 开始到插入符号当前位置的文本
        *   将每个字符（包括空格）包装在自己的跨度中
    *   接下来你将不得不调用一个函数来比较标签的宽度和文本区域的宽度
        *   如果标签的宽度小于文本区域，则获取隐藏标签中最后一个跨度的宽度并将插入符号向右移动该宽度，然后继续执行步骤 4
            *   因为这是函数将在输入文本时运行它会一次出现一个字符
            *   在这里要小心，当插入符号位于最后一个和接近最后一个位置时，它不会超出文本区域
        *   如果标签比文本区域宽：
            *   一次添加一个标签中字符（跨度）的宽度，直到达到 textarea 的宽度
            *   将插入符号的位置向下移动字体的高度并返回到水平起始位置（因为插入符号的位置是相对的，只需将其左侧位置更改回`(0 + offsetToACTUALCaretPosition)`
            *   使用标志（例如`class="break"`）标记上一行中的最后一个跨度（字符）
            *   再次调用宽度比较函数
                *   确保包含一个条件来检查您在每个“行”末尾添加的标志（如果有）
4.  如果您还没有，请将任何所需的 CSS 样式应用于插入符号跨度并将 textarea 文本的颜色更改为`color: rgba(0,0,0,0);`

注意事项：

*   对于它所做的微小工作，这将产生很多开销
*   您将不得不调整此方法以考虑填充
*   您必须调整此方法以添加对删除字符和将插入符号移动到较早位置（左侧）的支持
*   如果您让 textarea 可滚动，则必须添加对此的支持（也适用于类似设置，例如静态高度导致文本滚动或移出屏幕/移出 textarea 的可见区域）

正如我之前所说，我知道这个解决方案非常粗糙，但它可能会帮助某人想出一个更好的解决方案。

祝你好运！

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-07-17T06:12:33.023

根据您的编辑，如果您只需要隐藏文本区域，为什么不使用 jQuery`$('#your_id').hide();`

# c# - sql远程连接超时

> ID：11516739
> 
> 赞同：0
> 
> 时间：2012-07-17T05:54:10.150
> 
> 标签：c#, sql, sql-server, winforms

当我尝试通过服务器管理工​​作室连接我的远程 sql 服务器时，没关系。但是，当我通过程序连接字符串与他们连接时，它显示“超时过期”

```
connectionString="Data Source=SERVERNAME;Initial Catalog=DB;Persist Security Info=True;User ID=sa;Password=pass" 
```

而且当我尝试使用 IP 连接时。它显示“用户 'sa' 登录失败。该用户未与受信任的 SQL Server 连接关联。”

```
connectionString="Data Source=192.168.2.6,1433;Initial Catalog=DB;Persist Security Info=True;User ID=sa;Password=pass" 
```

但我可以通过 SSMS 看到它们。和管理。以前有人遇到过这个问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T21:13:04.967

在许多其他帖子中提到的 SQL 配置管理器中进行必要的更改后，请按照这些步骤操作。

*   使用服务器名称从您的 cmd ping 服务器。
*   如果这不起作用，请尝试使用 IP ping。
*   如果您无法使用 DNS ping，但可以使用 IP ping，请转到您的 hosts 文件并在 hosts 文件中添加 DNS 条目，然后尝试使用 DNS 进行 ping。它应该工作。发生这种情况是因为当您在网络上时，您的计算机没有解析主机。
*   现在在 cmd - sqlcmd -S servername\ -U -P 尝试这个命令。用户名和密码是用于 sql server 身份验证的用户名和密码。如果您使用 Windows 身份验证，则不需要用户名和密码选项。
*   如果您的所有设置正确并且您的主机可以访问，那么您应该能够使用上述命令连接到数据库，并且您已正确配置您的计算机以远程连接到数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:03:00.293

您是否检查过您是否`Shared Memory, TCP/IP, Named Pipes enabled`在 SQL Server 配置管理器中？

然后为该数据库创建一个纯用户登录，并将该用户分配给您的连接字符串，还允许该用户访问`connect, create, select, update, delete`该数据库

也尝试使用`Data Source=(local)`, 或`127.0.0.1`作为您的服务器名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T06:22:38.930

如果您的数据库不在本地计算机上，请使用**SQL Server 配置管理器**检查 SQL Server 计算机是否启用了**共享内存、TCP/IP、命名管道**和

**TCP 端口为 1433**

# javascript - 如何在矩形等 html5 形状中插入 div/textarea。？

> ID：11516742
> 
> 赞同：0
> 
> 时间：2012-07-17T05:54:25.717
> 
> 标签：javascript, html

我正在开发一个 HTML5 项目，我必须在其中制作带有边界的文本。我正在使用 ctx.strokeRect(x,y,width,Height) 来绘制矩形。我的形状（矩形）是可调整大小的。我想在矩形内插入 textarea 或 div 以便在调整文本大小时自行调整。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:12:34.087

你太复杂了。只需使用以下 CSS 规则创建一个 div：

```
.mydiv {
    width: Xpx;
    height: Xpx;
    background-color: #COLOUR;
    resize: both;
} 
```

用宽度和高度的像素数量替换“Xpx”，用实际的十六进制颜色代码替换“#COLOUR”。

# java - 小程序的关闭事件？

> ID：11516744
> 
> 赞同：2
> 
> 时间：2012-07-17T05:54:29.687
> 
> 标签：java, swing, applet, japplet

我有一个`JApplet`添加一个`JPanel`. 我在其中播放了一些音乐，但是当我关闭 Web 浏览器时，Java 仍在运行并播放音乐。

我在这方面找不到任何东西，但是有没有办法覆盖或捕捉关闭事件？我想做一个`music.stop()`或其他这样的大扫除，试图让它以更优雅的方式关闭。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T06:01:36.327

```
void destroy() 
```

> 由浏览器或小程序查看器调用以通知此小程序它正在被回收并且它应该销毁它已分配的任何资源。

```
void stop() 
```

> 由浏览器或小程序查看器调用以通知此小程序应停止执行。

# php - php 中基于 Web 的聊天，无需使用数据库或文件

> ID：11516746
> 
> 赞同：17
> 
> 时间：2012-07-17T05:54:46.927
> 
> 标签：php, design-patterns, web-applications

我正在尝试使用 PHP 实现实时聊天应用程序。是否可以在不使用数据库或文件等持久数据存储的情况下做到这一点。基本上我需要的是一个用 PHP 编写的中介，他

1.  接受来自客户端浏览器的消息
2.  将消息广播给其他客户端
3.  忘记消息

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-19T13:41:13.477

您应该查看html5 的**Web Sockets**。它使用两种方式连接，因此您不需要任何数据库或文件。任何到达服务器的聊天消息都将直接发送到其他用户的浏览器，无需任何 Ajax 调用。但您还需要设置 Web 套接字服务器。

Web 套接字也用于许多实时应用程序中。我很快就打算写一个完整的教程。我会通知你的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-20T14:02:16.377

刚刚尝试了一些我以前从未做过的事情来回答这个问题。似乎有效，但我只测试过一次。我没有使用 Socket，而是想到了使用共享 Session 变量。基本上，无论用户如何，我都强制 Session_id 为相同的值，因此它们都共享相同的数据。从快速测试来看，它似乎有效。这是我所做的：

```
session_id('12345');
session_start();
$session_id = session_id();
$_SESSION['test'] = $_SESSION['test'] + 1;
echo "session: {$session_id} test: {$_SESSION['test']} <br />"; 
```

所以我的想法是，您可以简单地将聊天信息存储在 Session 变量中，并强制所有人（无论他们是谁）使用共享会话。然后你可以简单地使用ajax不断地重新加载当前的Session变量，并在添加消息时使用ajax编辑会话变量。此外，您可能希望将 Session 设置为永不过期或拥有非常长的 maxlifetime。

正如我所说，我只是玩了几分钟，看看它是否可行。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-19T14:36:09.477

你会想要使用`Sockets`. 本文将准确介绍您想要做什么： http: [//devzone.zend.com/209/writing-socket-servers-in-php/](http://devzone.zend.com/209/writing-socket-servers-in-php/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-22T01:38:47.753

当我试图解决同样的问题时，我选择了 Nginx 的[Push Module](http://pushmodule.slact.net/)。我之所以选择这种方式，是因为我必须支持较旧的浏览器（通常不支持 WebSockets），并且对在TCP 代理后面设置像[Socket.io这样的适当解决方案没有信心。](http://socket.io/)

工作流程是这样的：

1.  客户端通过长轮询连接到我的`/subscriber`位置，该位置对所有人开放。
2.  该`/publisher`位置仅接受来自我自己的服务器的连接
3.  当客户端订阅和交谈时，它基本上只是要求一个 PHP 脚本来处理发送的任何数据。
4.  该脚本可以进行验证、授权等操作，然后（通过 curl）将 JSON 格式的消息转发到`/publisher`.
5.  Nginx 的 Push Module 处理将消息发送回订阅者，并且客户端建立一个新的长轮询连接。

如果我不得不重新做一遍，那么我肯定会选择 Socket.io 路线，因为它具有对 Comet 式长轮询的适当回退，并且对于客户端和服务器脚本都有很好的文档。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-17T06:48:51.227

您需要使用某种存储作为缓冲区。不使用文件或数据库（也使用文件）是合理的。您可以尝试使用 php 的[共享内存](http://www.php.net/manual/bg/intro.shmop.php)函数，但我不知道任何可行的解决方案，因此您必须从头开始。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-20T07:02:58.167

> 是否可以在不使用数据库或文件等持久数据存储的情况下做到这一点？

**这是可能的，但你不应该使用。**基于数据库或文件不会减慢聊天速度。它将为您的聊天应用程序提供额外的安全性。您可以使用**ajax**和**套接字**进行基于 Web 的聊天，而无需持久数据。

您应该看到以下帖子：

1.  [基于数据库的聊天室是个坏主意吗？](https://softwareengineering.stackexchange.com/questions/143458/is-database-based-chat-room-bad-idea)
2.  [从 SQL 数据库而不是文件中轮询聊天应用程序会提高性能吗？](https://stackoverflow.com/questions/9150174/will-polling-from-a-sql-db-instead-of-a-file-for-chat-application-increase-perfo)
3.  [使用 memcached 作为聊天消息的数据库缓冲区](https://stackoverflow.com/questions/6349617/using-memcached-as-a-database-buffer-for-chat-messages)
4.  [php问题中的持久数据](https://stackoverflow.com/questions/3399527/persistent-data-in-php-question)
5.  [https://stackoverflow.com/questions/6569754/how-can-i-develop-social-network-chat-without-using-a-database-for-storing-the-c](https://stackoverflow.com/questions/6569754/how-can-i-develop-social-network-chat-without-using-a-database-for-storing-the-c)
6.  [文件与数据库在聊天应用程序中的存储效率](https://stackoverflow.com/questions/6314665/file-vs-database-for-storage-efficiency-in-chat-app)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-21T01:29:17.467

PHP 不适合您的要求（在 apache-php、fastcgi 等正常设置中），因为 PHP 脚本会针对每个请求从上到下执行，并且如果不使用外部，则无法在请求之间保持任何状态服务或数据库/文件（例如[http://php.net/manual/de/book.apc.php](http://php.net/manual/de/book.apc.php)除外，但它不适用于实现聊天并且不会扩展到多个服务器。）

您绝对应该查看 Node.js，尤其是 Node.js 模块 Socket.IO（一个 Websocket 库）。它非常易于使用和摇滚。Socket.IO 还可以通过可选的 redis 后端扩展到多个聊天服务器，这意味着它更容易扩展。

顺便说一下，尝试使用`$_SESSION`静态会话 ID 作为通信通道并不是解决方案，因为 PHP 将会话数据保存到文件中。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-26T23:37:19.007

如果您对 PHP 有业务需求，那么将另一种语言添加到混合中只会意味着您有两个问题。

运行一个永久的、持续运行的守护程序 PHP IRCd 服务器是完全可能的：我知道，因为我已经做到了，所以可以制作一个运行多年的在线游戏。

我使用的 IRC 服务器部分是 WaveIRCd 的修改版本：http: [//sourceforge.net/projects/waveircd/](http://sourceforge.net/projects/waveircd/)

我使用我在此处提供的代码对其进行了守护： [http ://www.thudgame.com/node/254](http://www.thudgame.com/node/254)

这段代码可能有点矫枉过正：我把它写得尽可能坚固，所以它尝试使用 PHP 的 pcntl_fork() 进行守护进程，然后回退到在后台递归调用自身，然后回退到 perl，依此类推：它还处理 PHP 安全模式的安全限制，以防有人打开它，以及通过 cron 调用所施加的安全限制。

您可能可以将其简化为几行：带有注释“守护程序规则...”的位 - 遵循这些规则，您将很好地守护您的进程。

为了处理任何意外的守护进程死亡等，然后我每分钟通过 cron 运行该守护进程，在那里它检查守护进程是否已经在运行，如果是这样，要么安静地死掉，要么守护进程没有响应，杀死它并取而代之。

由于 IRC 的整体分布式特性，它非常坚固耐用，并为我提供了一个多人浏览器游戏，好几年都没有停机，直到几个月前 bit-rot 吃掉了这个网站。我应该尝试在 Flash 中重写前端并在有一天我有时间的时候重新恢复它......

（然后我为 PHP 机器人运行了另一个守护程序来管理游戏本身，然后让我的游戏作为 java 小程序连接到它，并与机器人对话以玩游戏，但这在这里无关紧要）。

由于 WaveIRCd 不再维护，因此可能值得四处寻找是否有其他人分叉了该项目并支持它。

[2012 年编辑：也就是说，如果您希望前端是 HTML5/Javascript，或者如果您想通过 HTTP 连接的同一端口进行连接，那么您的选择比使用 Flash 或 Java 时更有限。在这种情况下，请听取其他人的建议，并使用“WebSockets”（在大多数当前浏览器中支持不佳）或“Socket.io”项目（使用 WebSockets，但回退到 Flash 或各种其他方法，具体取决于浏览器可用）。

以上是针对您的主机*允许*您在另一个端口上运行服务的情况。特别是，许多人在他们的 ToS 中有明确的规则反对运行 IRCd。]

[2019 年编辑：WebSockets 现在得到广泛支持，您应该可以使用它们。作为一个相关的案例研究，Slack 是用 PHP 编写的（根据[https://slack.engineering/taking-php-seriously-cf7a60065329](https://slack.engineering/taking-php-seriously-cf7a60065329)），并且在一段时间内支持 IRC 协议，尽管我相信它已经被淘汰了。作为其主要协议，它使用基于 JSON over WebSockets 的 API ( [https://api.slack.com/rtm](https://api.slack.com/rtm) )。这一切都表明 PHP IRCd 可以提供企业级的性能和质量，即使在 IRC 协议与另一个协议相互转换的情况下，您会期望它提供更差的性能。]

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-07-20T13:57:17.543

实现此目的的一种解决方案是编写 PHP 套接字服务器。

```
<?php

// Set time limit to indefinite execution

set_time_limit (0);

// Set the ip and port we will listen on

$address = '192.168.0.100';

$port = 9000;

$max_clients = 10;

// Array that will hold client information

$clients = Array();

// Create a TCP Stream socket

$sock = socket_create(AF_INET, SOCK_STREAM, 0);

// Bind the socket to an address/port

socket_bind($sock, $address, $port) or die('Could not bind to address');

// Start listening for connections

socket_listen($sock);

// Loop continuously

while (true) {

    // Setup clients listen socket for reading

    $read[0] = $sock;

    for ($i = 0; $i < $max_clients; $i++)

    {

        if ($client[$i]['sock']  != null)

            $read[$i + 1] = $client[$i]['sock'] ;

    }

    // Set up a blocking call to socket_select()

    $ready = socket_select($read,null,null,null);

    /* if a new connection is being made add it to the client array */

    if (in_array($sock, $read)) {

        for ($i = 0; $i < $max_clients; $i++)

        {

            if ($client[$i]['sock'] == null) {

                $client[$i]['sock'] = socket_accept($sock);

                break;

            }

            elseif ($i == $max_clients - 1)

                print ("too many clients")

        }

        if (--$ready <= 0)

            continue;

    } // end if in_array

    // If a client is trying to write - handle it now

    for ($i = 0; $i < $max_clients; $i++) // for each client

    {

        if (in_array($client[$i]['sock'] , $read))

        {

            $input = socket_read($client[$i]['sock'] , 1024);

            if ($input == null) {

                // Zero length string meaning disconnected

                unset($client[$i]);

            }

            $n = trim($input);

            if ($input == 'exit') {

                // requested disconnect

                socket_close($client[$i]['sock']);

            } elseif ($input) {

                // strip white spaces and write back to user

                $output = ereg_replace("[ \t\n\r]","",$input).chr(0);

                socket_write($client[$i]['sock'],$output);

            }

        } else {

            // Close the socket

            socket_close($client[$i]['sock']);

            unset($client[$i]);

        }

    }

} // end while

// Close the master sockets

socket_close($sock);

?> 
```

您将通过命令行运行它来执行此操作，并且始终必须运行您的 PHP 客户端才能连接到它。然后，您可以编写一个连接到套接字的 PHP 客户端。

```
<?php
$fp = fsockopen("www.example.com", 80, $errno, $errstr, 30);
if (!$fp) {
    echo "$errstr ($errno)<br />\n";
} else {
    $out = "GET / HTTP/1.1\r\n";
    $out .= "Host: www.example.com\r\n";
    $out .= "Connection: Close\r\n\r\n";
    fwrite($fp, $out);
    while (!feof($fp)) {
        echo fgets($fp, 128);
    }
    fclose($fp);
}
?> 
```

您必须使用某种类型的 ajax 来调用 jQuery，将消息发布到这个 PHP 客户端。

[http://devzone.zend.com/209/writing-socket-servers-in-php/](http://devzone.zend.com/209/writing-socket-servers-in-php/) http://php.net/manual/en/function.fsockopen.php

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-07-21T22:56:04.603

最好为此使用 node.js 服务器。WebSockets 现在不是跨浏览器（除了 socket.io 的 node.js 可以完美运行）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-17T06:30:20.870

简而言之，你不能。当前的 HTTP/HTML 实现不支持，`pushstate`因此您的聊天应用程序的算法应遵循：

1.  答：发消息
2.  B，C，D：在发送新消息时获取此消息。

所以接收者总是必须提出一个新的请求并检查是否有新的消息已经发送。（AJAX 调用或类似的东西）所以发送事件和接收事件之间总是存在延迟。

*   这意味着数据必须保存在全局的东西中，比如数据库或文件系统。

看看： [http ://today.java.net/article/2010/03/31/html5-server-push-technologies-part-1](http://today.java.net/article/2010/03/31/html5-server-push-technologies-part-1)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-07-25T02:13:44.447

你没有说它必须*全部*写成 PHP :)

安装 RabbitMQ，然后使用这个建立在 websockets 和 RabbitMQ 之上的聊天实现。

您的 PHP 几乎就是“聊天室 chrome”。您的大部分网站可能都适合 5 兆的离线 HTML5 内容限制，并且您拥有一个非常灵活（并且可能比您自己做的更强大）的聊天系统。

如果您离开房间，它甚至还有 20 条聊天记录。

[https://github.com/videlalvaro/rabbitmq-chat](https://github.com/videlalvaro/rabbitmq-chat)

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-07-17T06:06:01.173

如果你只需要使用 PHP，那么你可以将聊天消息存储在会话变量中，会话可以像对象一样，存储大量信息。如果您可以使用 jQuery，那么您可以在发送消息后将段落附加到 div，但是如果刷新站点，消息将消失。或者组合，将消息存储在会话中并使用 jQuery 和 ajax 进行更新。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2012-07-19T06:44:29.697

尝试查看像[ZeroMQ](http://www.zeromq.org/)这样的套接字库，它们允许即时传输消息，并且比 TCP 更快，并且是实时的。他们的基础设施允许在 A 点和 B 点之间发送即时数据，而无需先将数据存储在任何地方（尽管您仍然可以选择）。这是[ZeroMQ 中聊天客户端的教程](http://www.zeromq.org/code%3aexamples-chat)

# java - 无法为连接 URL 'null' 创建类 ' ' 的 JDBC 驱动程序：我不明白这个异常

> ID：11516747
> 
> 赞同：56
> 
> 时间：2012-07-17T05:54:47.360
> 
> 标签：java, jakarta-ee, tomcat, jndi, derby

**当我提供数据库 URL 时，为什么它说*空URL 并在异常中给出一个空的 ' ' 类？***

我正在尝试在使用 Tomcat 时通过 servlet 连接到 derby 数据库。当 servlet 运行时，我得到以下异常：

```
org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create JDBC driver of class '' for connect URL 'null'

at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1452)
at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1371)
at org.apache.tomcat.dbcp.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)

at servlets.servlet_1.doGet(servlet_1.java:23) // ---> Marked the statement in servlet

at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.NullPointerException
at sun.jdbc.odbc.JdbcOdbcDriver.getProtocol(JdbcOdbcDriver.java:507)
at sun.jdbc.odbc.JdbcOdbcDriver.knownURL(JdbcOdbcDriver.java:476)
at sun.jdbc.odbc.JdbcOdbcDriver.acceptsURL(JdbcOdbcDriver.java:307)
at java.sql.DriverManager.getDriver(DriverManager.java:253)
at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1437)
... 24 more 
```

*小服务程序：*

```
package servlets;

import java.io.IOException;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.servlet.http.*;
import javax.servlet.*;
import javax.sql.DataSource;

public class servlet_1 extends HttpServlet {

    @Override 
    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        try {
           // String queryString = request.getQueryString();
            System.out.println("!!!!!!!!!!!!!!!!!!!");
            Context initContext = new InitialContext();
            Context envContext = (Context)initContext.lookup("java:comp/env");
            DataSource ds = (DataSource)envContext.lookup("jdbc/PollDatasource");
            Connection connection = ds.getConnection(); // -->LINE 23
            String sqlQuery = "select * from PollResult";
            PreparedStatement statement = connection.prepareStatement(sqlQuery);
            ResultSet set = statement.executeQuery();
            System.out.println("after the final statement");
        } catch (Exception exc) {
            exc.printStackTrace();
        }
    }
} 
```

这是什么例外？为什么我会得到这个异常？

我在`context.xml`Tomcat 中添加了以下标签：

```
<Resource name="jdbc/PollDatasource" auth="Container" type="javax.sql.DataSource"
driverClassName="org.apache.derby.jdbc.EmbeddedDriver"
url="jdbc:derby://localhost:1527/poll_database;create=true"
username="suhail" password="suhail"
maxActive="20" maxIdle="10" maxWait="-1" /> 
```

这在`web.xml`：

```
<resource-ref>
  <description>my connection</description>
  <res-ref-name>jdbc/PollDatasource</res-ref-name>
  <res-type>javax.sql.DataSource</res-type>
  <res-auth>Container</res-auth>
</resource-ref> 
```

我在哪里犯错？

*显示数据库 URL 的图像..*

![在此处输入图像描述](../Images/9087c447e62fa0e5399bb7adca67dbb4.png)

***注意：在@Bryan Pendleton 的回答之后，我将驱动程序更改为`org.apache.derby.jdbc.ClientDriver`但我得到了同样的异常。***

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-21T00:42:21.090

我看不出有什么明显的错误，但也许另一种方法可以帮助您调试它？

您可以尝试在每个应用程序上下文中指定您的数据源，而不是在全局 tomcat 中指定。

您可以通过创建 src/main/webapp/META-INF/context.xml 来做到这一点（我假设您使用的是标准的 maven 目录结构 - 如果不是，那么 META-INF 文件夹应该是您的同级WEB-INF 目录）。META-INF/context.xml 文件的内容类似于：

```
<?xml version="1.0" encoding="UTF-8"?>

<Context [optional other attributes as required]>

<Resource name="jdbc/PollDatasource" auth="Container"
          type="javax.sql.DataSource" driverClassName="org.apache.derby.jdbc.ClientDriver"
          url="jdbc:derby://localhost:1527/poll_database;create=true"
          username="suhail" password="suhail" maxActive="20" maxIdle="10" maxWait="-1"/>
</Context> 
```

显然，路径和 docBase 需要与您的应用程序的具体细节相匹配。

使用这种方法，您不必在 Tomcat 的 context.xml 文件中指定数据源详细信息。虽然，如果您有多个应用程序与同一个数据库通信，那么您的方法更有意义。

无论如何，试一试，看看它是否有什么不同。它可能会为我们提供有关您的方法出了什么问题的线索。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-22T21:23:43.673

几个修复：

1.  为您的环境使用正确的驱动程序类名称：如果您使用的是进程外 Derby 服务器，那么您需要 ClientDriver（并且需要使用 derbyclient.jar）、主机名和端口等。如果您想要一个 in-处理 Derby 服务器，然后您需要 derby.jar、EmbeddedDriver 和适用于嵌入式数据库的 URL。

2.  仅将驱动程序 JAR 文件放在 Tomcat 的`lib/`目录中。

3.  不要在 Tomcat 中放任何东西`conf/context.xml`：真的没有理由这样做。相反，使用你的 webapp`META-INF/context.xml`来定义你的`<Resource>`.

错误的`"Cannot create JDBC driver of class '' for connect URL 'null'`发生通常是因为 JDBC 驱动程序不在正确的位置（或者在太多的地方，比如 Tomcat 的`lib/`目录，但也在 webapp 的`WEB-INF/lib/`目录中）。请确认您在正确的位置拥有正确的驱动程序 JAR 文件。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-17T17:53:39.590

这两件事不匹配：

```
driverClassName="org.apache.derby.jdbc.EmbeddedDriver"
url="jdbc:derby://localhost:1527/poll database;create=true" 
```

如果您使用 EmbeddedDriver，您的 URL 不应包含网络语法。

相反，如果您使用网络语法，则需要使用 ClientDriver。

[http://db.apache.org/derby/docs/10.8/getstart/rgsquck35368.html](http://db.apache.org/derby/docs/10.8/getstart/rgsquck35368.html)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-12-01T11:50:00.353

我遇到了这个问题，因为我`context.xml`走错了路：

```
./src/main/resources/META-INF/context.xml 
```

正确的路径是：

```
./src/main/webapp/META-INF/context.xml 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-25T09:50:47.717

如果您使用的是 eclipse，您应该从 eclipse 包资源管理器中创建的服务器项目修改 context.xml。在eclipse中使用tomcat时，它是唯一有效的，其他的被忽略或覆盖

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-17T06:02:21.243

`Context envContext = (Context)initContext.lookup("java:comp/env");`

不是：`Context envContext = (Context)initContext.lookup("java:/comp/env");`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-19T14:09:36.763

您是否尝试仅在`context.xml`

```
<Resource name="jdbc/PollDatasource" auth="Container" type="javax.sql.DataSource"
driverClassName="org.apache.derby.jdbc.EmbeddedDriver"
url="jdbc:derby://localhost:1527/poll_database;create=true"
username="suhail" password="suhail"
maxActive="20" maxIdle="10" maxWait="-1" /> 
```

并从中删除`<resource-ref>`部分`web.xml`？

在一个项目中，我看到没有`<resource-ref>`部分的配置`web.xml`并且它有效。

这是一个有根据的猜测，但我认为命名资源的`<resource-ref>`声明可能会覆盖具有相同名称的资源声明，并且声明中缺少两者，因此缺少该属性的 NPE。`JNDI``jdbc/PollDatasource``web.xml``context.xml``web.xml``driverClassName``url`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-07-01T15:11:35.397

就我而言，我解决了编辑 [tomcat]/Catalina/localhost/[mywebapp_name].xml 而不是 META-INF/context.xml 的问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-09-16T10:22:46.470

问题也可能是由于`SQL driver`您的 Tomcat 安装目录中缺少。

我不得不`mysql-connector-java-5.1.23-bin.jar`在`apache-tomcat-9.0.12/lib/`文件夹中。

[https://dev.mysql.com/downloads/connector/j/](https://dev.mysql.com/downloads/connector/j/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-20T14:48:52.690

如果您使用的是嵌入式驱动程序，则 connectString 只是

```
jdbc:derby:databaseName 
```

（选项如;create=true;user=xxx 等）。

如果您使用客户端驱动程序，连接字符串可以保持原样，但如果更改驱动程序没有结果...请原谅这个问题，但您是否 100% 确定您已按照[Derby 教程](http://db.apache.org/derby/papers/DerbyTut/ns_intro.html)启动了 Derby 网络服务器?

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-06-09T16:05:05.590

我在针对 Oracle 使用 Tomcat 时遇到了类似的问题。我*确实*在光盘上的 META-INF 目录中有 context.xml。但是这个文件没有显示在 eclipse 项目中。一个简单的 F5 刷新和 context.xml 文件出现，eclipse 发布了它。一切都过去了。希望这可以帮助某人。

**尝试在eclipse中按F5**

# build - 如何在 Sublime Text 2 中保持其文件夹结构的同时使 LESS 构建 CSS 文件？

> ID：11516749
> 
> 赞同：1
> 
> 时间：2012-07-17T05:54:54.607
> 
> 标签：build, less, sublimetext2

我正在尝试将我的项目设置为以相同的方式编译 LESS。目前，我的源文件在他们自己的文件夹中。在该文件夹中，模块被分类到不同的子文件夹中。（例如less/reset.less、less/variables.less、less/module/nav.less、less/layout/inline.less等）

我希望我的构建文件将这些文件编译到另一个文件夹中，但保持子文件夹结构。所以：

*   少/mixins.less -> css/reset.css
*   少/模块/nav.less -> css/module/nav.css
*   少/布局/inline.less -> css/layout/inline.css

```
"cmd": ["lessc", "$file", "${file_path}/../css/${file_base_name}.css", "--verbose"], 
```

# java - 排序树节点和跟踪节点

> ID：11516759
> 
> 赞同：-1
> 
> 时间：2012-07-17T05:55:37.200
> 
> 标签：java

1）我有一棵树，我将在运行时将节点插入其中，我可以知道如何保持它们按自然顺序排序，因为节点将在最后一个索引之后。

示例：用户添加一个属于电子产品的产品，该产品将出现在其他人“查看”的电子类别下。我怎么知道如何确保“电子”下的节点按自然顺序排序？

2）在我的树中有一些对象出现在另一个分支中，我可以知道如何跟踪这些类型的节点吗？（2个不同的节点但具有相同的数据）

是的，我使用 hashmap 来跟踪正常节点，但我无法找到解决此问题的方法。

跟踪的目的是在有编辑或更新或插入子节点时更新节点...

我正在考虑使用一个对象作为键或哈希图，以便单独识别每个对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:09:20.083

1）基本上，你必须自己弄清楚这一点。

假设您知道父节点，您可以要求父节点传回新节点插入位置的索引。然后，您可以在调用`defaultTreeMode.insertNodeInto(MutableTreeNode child, MutableTreeNode parent, int index)`方法时使用此信息。

查找`Comparable`并`Comparator`了解有关此的一些想法

2）轨道是什么意思？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T06:20:59.453

1）您在节点中插入哪种类型的数据结构。如果您插入任何类，您可以使用额外的变量，例如可以保留索引的位置。

2）您可以使用使用过的物品列表。在插入新节点之前，如果它已经是 int 树，则查找任何项目。

# symfony1 - 使用内存中的当前数据库构建 shema.yml 文件以与可用的 schema.yml 进行比较

> ID：11516762
> 
> 赞同：0
> 
> 时间：2012-07-17T05:55:52.700
> 
> 标签：symfony1, symfony-1.4, propel

我一直在尝试根据我编写的行为在内存中创建 schema.yml 内容。我想测试开发人员对 schema.yml 所做的任何更改是否符合当前数据库字段和外键引用。我看到了构建模式的任务类，但无法找到直接的方法来做到这一点，或者我在这里遗漏了什么？这可以通过利用已经可用的 symfony api 而不是编写我自己的解决方案来完成吗？

提前致谢。

PS 我使用 Propel 作为 ORM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:33:25.473

为什么不调整迁移任务以定义当前模式（在内存中）与开发人员可能修改的模式之间的差异？

```
php symfony doctrine:generate-migrations-diff 
```

此任务在生成的类和 current 之间生成差异`schema.yml`。

你可以做什么：

*   根据新模型生成新模型（表单和过滤器）`schema.yml`
*   将此更改放入新文件夹（不是默认文件夹）
*   运行任务`doctrine:generate-migrations-diff`并为其提供新模型（表单和过滤器）的路径
*   如果它生成迁移类：developper 做了一些改变，如果没有，一切都很好。

**编辑：（**因为OP使用推进）

[你在 Propel](https://github.com/propelorm/sfPropelORMPlugin/blob/master/lib/task/sfPropelMigrateTask.class.php)（和[doc](http://www.propelorm.org/documentation/10-migrations.html)）中有几乎相同的任务。

# javascript - 当无限循环或浏览器挂在javascript中时，有什么方法可以调用函数？

> ID：11516768
> 
> 赞同：-1
> 
> 时间：2012-07-17T05:56:26.387
> 
> 标签：javascript, debugging

嗨，我正在工作一个有大量 javascript 代码的项目，有时 javascript 代码会自动执行并挂起浏览器并在 chrome 中显示消息“杀死此页面”是否有任何方法可以跟踪错误。就像在无限循环到达或浏览器挂起时调用函数一样那.please给我一些关于调试javascript代码的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:45:41.150

没有办法在 javascript 中做你想做的事。

但是，您可以使用[DynaTrace Ajax Edition](http://www.compuware.com/application-performance-management/dynatrace-ajax-download.html)之类的工具来跟踪浏览器中的 cpu 使用情况，以确定正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:21:44.530

许多不同的错误编程逻辑都可能导致无限循环，并且没有可靠的逻辑可以在每种情况下检测到。所以我非常怀疑任何编程语言或 IDE 是否会提供任何可靠的无限循环检测。

你看到的基本上是一个运行时检测，它基于在浏览器更新和刷新 UI 之前脚本执行所花费的时间。

有时这种长时间运行的 JavaScript 可能是由无限循环引起的，但很多时候它们只是大循环或执行过多工作导致 UI 无响应的循环。

因为 JavaScript 不是多线程的，所以为了避免上面的后一种情况，你可以考虑将循环分成小的工作单元，一旦一个单元完成，不要运行下一个单元，而是调用下一个工作单元与 setTimeout 具有较小的时间延迟（如 250 毫秒）。这将使浏览器有机会呼吸和更新 UI，并将您的脚本取消标记为“长期运行”脚本。

您还可以使用诸如[Firebug Logging](http://getfirebug.com/logging/)之类的日志记录来记录具有足够值的循环，以帮助您确定这些循环是否确实是无限循环。

# c++ - How do I know the sending port number in QUdpSocket?

> ID：11516770
> 
> 赞同：0
> 
> 时间：2012-07-17T05:56:31.440
> 
> 标签：c++, qt, networking, qudpsocket

Is there a way I can get the port number the udp socket used to send message?

What I want to do is to send a udp datagram to someone and listen to that sending port.

For example in the following code:

```
QUdpSocket *s = new QUdpSocket(this);
s.writeDataGram(theData,theIp,thePort); 
```

does it automaticly binds socket s with whatever the sending port is?

If so, can I listen to that sending port?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:24:54.487

It would be safe to bind the socket to a port, address and specify the [BindMode](http://qt-project.org/doc/qt-4.8/qudpsocket.html#BindFlag-enum) before sending data.

Once a socket is bound to a port and address, [readyRead()](http://qt-project.org/doc/qt-4.8/qiodevice.html#readyRead) is emitted upon arrival of `UDP Datagram` at the specified port.

So you can capture the `readyRead()` signal and process the data accordingly, ie you don't need to listen to the port. If you don't bind the socket `s` to the port `thePort`, `readyRead()` signal won't be emitted upon arrival of UDP Datagram.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:05:04.017

From the [manual page](http://qt-project.org/doc/qt-4.8/qudpsocket.html#readDatagram) of `readDatagram`:

```
qint64 QUdpSocket::readDatagram ( char * data, qint64 maxSize, QHostAddress * address = 0, quint16 * port = 0 )

Receives a datagram no larger than maxSize bytes and stores it in data.
The sender's host address and port is stored in *address and *port
(unless the pointers are 0).

```

To receive a datagram you must first bind the socket to a specific UDP port. Then to get the source port of received datagrams you supply a non-zero parameter for the `port` argument of `readDatagram`.

# linux - 非 root 访问 ioctl 进行 WIFI 扫描

> ID：11516771
> 
> 赞同：0
> 
> 时间：2012-07-17T05:56:42.407
> 
> 标签：linux, kernel, root, wireless, ioctl

我正在实现 iwlist python 版本。这是 iwlist 在 Linux 操作系统上[如何工作的描述 iwlist() 命令如何扫描无线网络？](https://stackoverflow.com/questions/925669/how-does-iwlist-command-scans-the-wireless-networks)它的作用是扫描所有附近的 wifi 接入点，显示它们的 ESSID、MAC 地址、信号/噪声级别等列表。

iwlist 使用 ioctl SIOCSIWSCAN 来触发扫描。然后它使用 SIOCGIWSCAN 来获取扫描结果。出于安全原因，我必须在没有 root 访问权限的情况下实现这一点。但这两个命令都必须以 root 身份运行。python 等效的 iwlist 已经实现[http://pythonwifi.wikispot.org/](http://pythonwifi.wikispot.org/)但是它使用相同的 ioctl。

我想知道是否可以在没有 sudo 的情况下解决这个问题。或者，除了 ioctl，如果还有其他方法可以实现非 sudo iwlist。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:16:18.683

我猜您出于安全原因也不想使用 setuid 。您可能想尝试使用[功能](http://linux.die.net/man/7/capabilities)系统并在您的二进制文件上[设置](http://linux.die.net/man/8/setcap)所需的功能。我不确切知道您需要哪种功能，可能是*CAP_NET_* * 或*CAP_SYS_* * 功能之一。

# iphone - UnifeyeMobileViewController glView 相机视图在 iPhone 中不旋转

> ID：11516773
> 
> 赞同：1
> 
> 时间：2012-07-17T05:56:48.513
> 
> 标签：iphone, ios, camera, orientation, eaglview

在我的 iPhone 应用程序中，我使用 metaio sdk 和 UnfieyeMobileViewController。我已经自定义了视图以在 EAGLView 组件上显示相机视图，并且它工作正常。旋转设备时，相机方向没有改变的问题。而且，捕获的图像显示颠倒。这是我的代码，请检查：

在 ViewDidAppear 中：

```
UIInterfaceOrientation interfaceOrientation = self.interfaceOrientation;    
[self willAnimateRotationToInterfaceOrientation:interfaceOrientation duration:0];
    [super viewDidAppear:animated];

- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration
{
    // adjust the rotation based on the interface orientation
    switch (interfaceOrientation) {
        case UIInterfaceOrientationPortrait:
            self.glView.transform = CGAffineTransformMakeRotation(0);
            break;

        case UIInterfaceOrientationPortraitUpsideDown:
            self.glView.transform = CGAffineTransformMakeRotation(M_PI);
            break;

        case UIInterfaceOrientationLandscapeLeft:  
            self.glView.transform = CGAffineTransformMakeRotation(M_PI_2);
            break;

        case UIInterfaceOrientationLandscapeRight:
            self.glView.transform = CGAffineTransformMakeRotation(-M_PI_2);
            break;
    }   

    // make sure the screen bounds are set correctly
    CGRect mainBounds = [UIScreen mainScreen].bounds;

    if( UIInterfaceOrientationIsLandscape(interfaceOrientation) )
    {
        int width = mainBounds.size.width;
        int height = mainBounds.size.height;
        mainBounds.size.width = height;
        mainBounds.size.height = width;
    }

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
    {
        // for iPhone the aspect ratio does not fit, so let's correct it
        if( UIInterfaceOrientationIsLandscape(interfaceOrientation) )
        {
            mainBounds.size.height = 360;   // because our renderer is a bit larger
            mainBounds.origin.y = -20;
        }
        else
        {
            mainBounds.size.width = 360;   // because our renderer is a bit larger
            mainBounds.origin.x = -20;            
        }
    }

    self.glView.frame = mainBounds;
} 
```

# android - Android - 在不暂停当前的情况下启动新的 Activity

> ID：11516776
> 
> 赞同：2
> 
> 时间：2012-07-17T05:57:02.720
> 
> 标签：android

假设当前名为“A1”的活动正在运行。我想启动活动“A2”，但不要暂停（调用 onPause()），然后在返回按钮返回时恢复“A1”。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T06:11:29.727

你想要达到的目标是不可行的。但是，Android 3.0 引入了`Fragments`. `Fragment`粗略地说是`Activity`布局的一部分，有自己的逻辑。通过组合不同`Fragments`的内容，您可以创建一个多部分布局，看起来您有多个`Activity`同时运行。`Fragments`如果使用支持库，也支持低于 3.0 的 Android 版本。您可以在您的应用程序中利用`Fragments`概念，因为它看起来就是这种情况。希望这可以帮助。

# objective-c - 使用 Storyboard 时从 appdelegate 调用视图控制器方法不起作用

> ID：11516781
> 
> 赞同：1
> 
> 时间：2012-07-17T05:58:22.620
> 
> 标签：objective-c, ios, storyboard

今天是个好日子，

使用 Storyboad 时，我无法在 ViewController 中调用方法刷新。但是，如果我创建没有情节提要的项目，它只是一个NIB。为什么它不起作用以及如何克服这个问题？

这是我的代码：

AppDelegate.h

```
#import <UIKit/UIKit.h>

@class ViewController;

@interface AppDelegate : NSObject <UIApplicationDelegate>
{
    UIWindow *window;
    ViewController *viewController;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet ViewController *viewController;

@end 
```

AppDelegate.m

```
#import "AppDelegate.h"
#import "ViewController.h"

@implementation AppDelegate

@synthesize window;
@synthesize viewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
    NSLog(@"app will enter foreground");
    [viewController refresh:NULL]; 
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
}

@end 
```

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

-(IBAction) refresh:(id)sender;

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void)loadData {
    // contains information the ViewController makes use of
}

-(IBAction)refresh:(id) sender {
    [self loadData];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T06:05:48.213

使用情节提要时，不会填充应用程序委托中的`viewController`属性。在您的日志语句中包含该值以进行确认 - 它将为空。

而是为通知注册您的视图控制器，并让它处理自己的刷新。

在 viewDidLoad 中：

```
[super viewDidLoad];
[[NSNotificationCenter defaultCenter] addObserver:self 
    selector:@selector(refresh:) 
    name:UIApplicationDidBecomeActiveNotification
    object: nil]; 
```

您还需要在 dealloc / viewDidUnload 中删除此观察者。

# android - 如何在android中使用GCM获取RegistrationID

> ID：11516782
> 
> 赞同：24
> 
> 时间：2012-07-17T05:58:27.053
> 
> 标签：android, push-notification, google-cloud-messaging

我正在尝试使用 GCM 在 android 中进行推送通知。我阅读了 GCM 的 Google 文档及其演示应用程序。我创建了这里提到的客户端程序 `http://android.amolgupta.in/`。但我没有获得注册 ID。另外，我没有得到以下几点：

1.  我也需要用这个服务器程序吗
2.  在 Google 演示应用程序上，他们提到我需要在“samples/gcm-demo-server/WebContent/WEB-INF/classes/api.key”更改 api 密钥，每次创建新项目时都需要这样做吗

除了谷歌提供的以外，任何人都可以为我提供适当的项目，以便我清除我的概念。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-11-29T06:20:48.280

*在这里，我已经写了一些关于如何从头开始获取 RegID 和通知的步骤*

1.  在 Google Cloud 上创建/注册应用
2.  使用开发设置 Cloud SDK
3.  为 GCM 配置项目
4.  获取设备注册 ID
5.  发送推送通知
6.  接收推送通知

你可以在这里找到完整的教程：

> [Android 推送通知入门：最新的 Google Cloud Messaging (GCM) - 分步完整教程](http://rdcworld-android.blogspot.in/2013/11/android-push-notification-google-cloud.html)

![在此处输入图像描述](../Images/ed9e15395f925cf425c343f1c2c6c820.png)

获取注册 ID（推送通知的设备令牌）的代码片段。

**为 GCM 配置项目**

* * *

# 更新 AndroidManifest 文件

要在我们的项目中启用 GCM，我们需要向清单文件添加一些权限。转到`AndroidManifest.xml`并添加此代码：添加权限

```
<uses-permission android:name="android.permission.INTERNET”/>
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.WAKE_LOCK" />

<uses-permission android:name="android.permission.VIBRATE" />

<uses-permission android:name=“.permission.RECEIVE" />
<uses-permission android:name=“&lt;your_package_name_here>.permission.C2D_MESSAGE" />
<permission android:name=“&lt;your_package_name_here>.permission.C2D_MESSAGE"
        android:protectionLevel="signature" /> 
```

在您的应用程序标签中添加 GCM 广播接收器声明：

```
<application
        <receiver
            android:name=".GcmBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" ]]>
            <intent-filter]]>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <category android:name="" />
            </intent-filter]]>

        </receiver]]>

<application/> 
```

添加 GCM 服务声明

```
<application
     <service android:name=".GcmIntentService" />
<application/> 
```

* * *

# 获取注册 ID（推送通知的设备令牌）

**现在转到您的启动/启动活动**

添加常量和类变量

```
private final static int PLAY_SERVICES_RESOLUTION_REQUEST = 9000;
public static final String EXTRA_MESSAGE = "message";
public static final String PROPERTY_REG_ID = "registration_id";
private static final String PROPERTY_APP_VERSION = "appVersion";
private final static String TAG = "LaunchActivity";
protected String SENDER_ID = "Your_sender_id";
private GoogleCloudMessaging gcm =null;
private String regid = null;
private Context context= null; 
```

更新 OnCreate 和 OnResume 方法

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_launch);
    context = getApplicationContext();
    if (checkPlayServices()) {
        gcm = GoogleCloudMessaging.getInstance(this);
        regid = getRegistrationId(context);

        if (regid.isEmpty()) {
            registerInBackground();
        } else {
            Log.d(TAG, "No valid Google Play Services APK found.");
        }
    }
}

@Override
protected void onResume() {
    super.onResume();
    checkPlayServices();
}

// # Implement GCM Required methods(Add below methods in LaunchActivity)

private boolean checkPlayServices() {
    int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
    if (resultCode != ConnectionResult.SUCCESS) {
        if (GooglePlayServicesUtil.isUserRecoverableError(resultCode)) {
            GooglePlayServicesUtil.getErrorDialog(resultCode, this,
                PLAY_SERVICES_RESOLUTION_REQUEST).show();
        } else {
            Log.d(TAG, "This device is not supported - Google Play Services.");
            finish();
        }
        return false;
    }
    return true;
}

private String getRegistrationId(Context context) {
    final SharedPreferences prefs = getGCMPreferences(context);
    String registrationId = prefs.getString(PROPERTY_REG_ID, "");
    if (registrationId.isEmpty()) {
        Log.d(TAG, "Registration ID not found.");
        return "";
    }
    int registeredVersion = prefs.getInt(PROPERTY_APP_VERSION, Integer.MIN_VALUE);
    int currentVersion = getAppVersion(context);
    if (registeredVersion != currentVersion) {
        Log.d(TAG, "App version changed.");
        return "";
    }
    return registrationId;
}

private SharedPreferences getGCMPreferences(Context context) {
    return getSharedPreferences(LaunchActivity.class.getSimpleName(),
        Context.MODE_PRIVATE);
}

private static int getAppVersion(Context context) {
    try {
        PackageInfo packageInfo = context.getPackageManager()
            .getPackageInfo(context.getPackageName(), 0);
        return packageInfo.versionCode;
    } catch (NameNotFoundException e) {
        throw new RuntimeException("Could not get package name: " + e);
    }
}

private void registerInBackground() {
    new AsyncTask() {
        @Override
        protected Object doInBackground(Object...params) {
            String msg = "";
            try {
                if (gcm == null) {
                    gcm = GoogleCloudMessaging.getInstance(context);
                }
                regid = gcm.register(SENDER_ID);
                Log.d(TAG, "########################################");
                Log.d(TAG, "Current Device's Registration ID is: " + msg);
            } catch (IOException ex) {
                msg = "Error :" + ex.getMessage();
            }
            return null;
        }
        protected void onPostExecute(Object result) {
            //to do here
        };
    }.execute(null, null, null);
} 
```

* * *

**注意**：请存储`REGISTRATION_KEY`，这对于向 GCM 发送 PN 消息很重要。另请记住：此密钥对于所有设备都是唯一的，GCM 将`REGISTRATION_KEY`仅发送推送通知。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T07:25:37.480

回答您的第一个问题：是的，您必须运行一个服务器应用程序来发送消息，以及一个客户端应用程序来接收它们。

回答您的第二个问题：是的，每个应用程序都需要自己的 API 密钥。此密钥适用于您的服务器应用程序，而不是客户端。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-25T05:07:24.810

使用此代码通过 GCM 获取注册 ID

```
String regId = "", msg = "";

public void getRegisterationID() {

    new AsyncTask() {
        @Override
        protected Object doInBackground(Object...params) {

            String msg = "";
            try {
                if (gcm == null) {
                    gcm = GoogleCloudMessaging.getInstance(Login.this);
                }
                regId = gcm.register(YOUR_SENDER_ID);
                Log.d("in async task", regId);

                // try
                msg = "Device registered, registration ID=" + regId;

            } catch (IOException ex) {
                msg = "Error :" + ex.getMessage();
            }
            return msg;
        }
    }.execute(null, null, null);
 } 
```

并且不要忘记在清单中写入权限......
我希望它有帮助！

# iphone - Cocos2d：在游戏中添加放大缩小

> ID：11516783
> 
> 赞同：0
> 
> 时间：2012-07-17T05:58:28.230
> 
> 标签：iphone, ios, cocos2d-iphone

我正在开发一个类似 cocos 2d 中的 mario 的游戏，它有左键、右键和跳转键。

我想在按下左或右按钮时稍微缩放屏幕，并在释放按钮时恢复正常。

在 cocos 2d 中实现这个的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:26:35.587

使用 Cocos2D-iPhone-Extensions CCLayerPanZoom.m

# javascript - 如何使用 JavaScript 在字符串中用转义字符双引号替换双引号？

> ID：11516786
> 
> 赞同：44
> 
> 时间：2012-07-17T05:58:38.363
> 
> 标签：javascript, string, escaping

假设我有一个字符串变量 ( `var str`)，如下所示 -

> *伙计，他完全说“你摇滚！”*

现在，如果我让它看起来如下 -

> *伙计，他完全说“你摇滚！”*

如何使用 JavaScript`replace()`函数完成此操作？

`str.replace("\"","\\"");`不是很好。它给出了`unterminated string literal`错误。

现在，如果将上述语句存储在 SQL 数据库中，例如在 MySQL 中作为*LONGTEXT*（或任何其他*VARCHAR* -ish）数据类型，我还需要执行哪些字符串优化？

引号和逗号对查询字符串不是很友好。我也很感激关于这个问题的一些建议。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-07-17T06:02:12.437

您需要为此使用全局正则表达式。试试这种方式：

```
str.replace(/"/g, '\\"'); 
```

*[在Using Regular Expressions with JavaScript](http://www.regular-expressions.info/javascript.html)*中查看替换函数的正则表达式语法和选项。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-17T06:01:22.793

试试这个：

```
str.replace("\"", "\\\""); // (Escape backslashes and embedded double-quotes) 
```

或者，使用单引号来引用您的搜索并替换字符串：

```
str.replace('"', '\\"');   // (Still need to escape the backslash) 
```

正如helmus所指出的，如果传递给的第一个参数`.replace()`是一个字符串，它只会替换第一个出现的参数。要全局替换，您必须传递带有`g`（全局）标志的正则表达式：

```
str.replace(/"/g, "\\\"");
// or
str.replace(/"/g, '\\"'); 
```

但是你为什么还要在 JavaScript 中这样做呢？如果您有如下字符串文字，则可以使用这些转义字符：

```
var str = "Dude, he totally said that \"You Rock!\""; 
```

但这*仅*在字符串文字中是必需的。也就是说，如果您的 JavaScript 变量设置为用户在表单字段中键入的值，则您不需要此转义。

关于您在 SQL 数据库中存储此类字符串的问题，如果您在 SQL 语句中嵌入字符串文字，您只需要转义字符 - 请记住，适用于 SQL 的转义字符不是（通常）与 JavaScript 相同。您将在服务器端执行任何与 SQL 相关的转义。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-05-14T03:53:15.163

其他答案适用于大多数字符串，但您最终可能会取消转义已经转义的双引号，这可能不是您想要的。

要正常工作，您需要转义所有反斜杠，然后转义所有双引号，如下所示：

```
var test_str = '"first \\" middle \\" last "';
var result = test_str.replace(/\\/g, '\\\\').replace(/\"/g, '\\"'); 
```

取决于您需要如何使用字符串以及涉及的其他转义字符，这可能仍然存在一些问题，但我认为它在大多数情况下可能会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T06:05:11.720

```
var str = 'Dude, he totally said that "You Rock!"';
var var1 = str.replace(/\"/g,"\\\"");
alert(var1); 
```

# php - 从数据库调用时从表单中传递选择信息

> ID：11516793
> 
> 赞同：0
> 
> 时间：2012-07-17T05:59:38.060
> 
> 标签：php, mysql

我正在做一个项目，无论我做什么，我似乎都无法做到这一点。

我在 db、year、manufacturer_id 和 models 中有 3 个表

我想根据用户提出的要求显示品牌和型号。即，如果用户选择 Make as Ford，然后选择 Year 作为 1942，则 Model 应返回该年生产的所有模型的列表。但是它不起作用，请有人告诉我哪里出错了。

我的数据库表设置如下。

制造商 2 列 id（唯一）和制造商

第 2 年列 id（唯一）和年份

模型 4 列 id（唯一） year（对应于 year id 表）manufacturer_id（对应于制造商 id 表）和模型。

我正在使用的代码如下。

```
 <tr>
<td align="right" label for='formyear'>Year: </td>
<td><select name="formyear">
<?php 
$sql="SELECT id,year FROM year";
$result =mysql_query($sql);
while ($data=mysql_fetch_assoc($result)){
?>
<option value ="<?php echo $data['id'] ?>" ><?php echo $data['year'] ?></option>
<?php } ?>
</select></td>
</tr>
<tr>
<td align="right" label for='formmake'>Make: </td>
<td><select name="formmake" id="formmake" onchange="return populateModel(this.value);">
<?php 
$sql="SELECT id,manufacturer FROM manufacturer";
$result =mysql_query($sql);
while ($data=mysql_fetch_assoc($result)){
?>
<option value ="<?php echo $data['id'] ?>" ><?php echo $data['manufacturer'] ?></option>
<?php } ?>
</select>
</td>
</tr>
<tr>
<td align="right" label for='formmodel'>Model: </td>
<td><select name="formmodel" id="formmodel">
<?php 
$sql="SELECT id,manufacturer_id,model FROM model WHERE year='1'";
$result =mysql_query($sql);
while ($data=mysql_fetch_assoc($result)){
?>
<option value ="<?php echo $data['id'] ?>" ><?php echo $data['model'] ?></option>
                                <?php } ?>

                                </select> 
```

我似乎把这件事弄得一团糟。我要感谢所有看到这里的人的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:06:43.897

对于年份和制造商下拉列表，在更改时，获取在 javascript 函数中选择的年份和制造商的值（如果未设置，则假定为空）。

然后，为了获取相关列，您可以使用上述值作为参数向 php 文件发送 ajax 调用。在该 php 文件中，您可以根据发送的数据检查模型：

```
$year=(isset($_REQUEST['year']) && $_REQUEST['year']!='')?$_REQUEST['year']:'';
$mfr_id=(isset($_REQUEST['mfr_id']) && $_REQUEST['mfr_id']!='')?$_REQUEST['mfr_id']:'';

$sql="SELECT id,model FROM model";
if($year!='')
{
    $sql.=" WHERE year=".$year;
    if($mfr_id!='')
        $sql.=" and manufacturer_id=".$mfr_id;
}
else
{
    if($mfr_id!='')
        $sql.=" WHERE manufacturer_id=".$mfr_id;
}
$result =mysql_query($sql); 
```

结果集中的行将根据您的条件进行过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:19:13.763

如果您认真使用PDO。

话虽如此，我会将年份放在模型表中。是的，对于给定的模型，您将有多个条目，但是要为年份设置单独的表意味着您必须将该年份与所有相关模型相关联，显然每个模型的年份不同。`INNER JOIN`只需在品牌 ID 上添加年份字段

我不是汽车人，但可能比年少模型，在这种情况下，将模型 ID 添加到年表将减少条目。

如果您将年份表用于其他用途，即用户提交信息的表单...在模型表中使用年份 ID，并在所有三个表中使用 INNER JOIN。

不过，要点保持不变...您有多个模型表行，每年一个

# ruby-on-rails - Ruby on Rails 测试 XML 有效性

> ID：11516795
> 
> 赞同：1
> 
> 时间：2012-07-17T05:59:47.247
> 
> 标签：ruby-on-rails

我尝试使用 Rails 应用程序中的模式文件编写一个 XML 文件 (EML) 有效性的测试。测试现在看起来像这样：

```
 test "eml is valid" do
    #load the xml library
    require 'libxml'
    # generate eml
    get :show, {:id => Dataset.first.id, :format => :eml}
    # load schema
    schema = LibXML::XML::Schema.new("/path/to/eml.xsd")
    # load file
    document = LibXML::XML::Document.file("here_the_eml_file_to_check.eml")
    # validate the file against the schema
    result = document.validate_schema(schema) do |message,flag|
      log.debug(message)
      puts message
    end
  end 
```

当我在 irb 中手动进行文件验证时，文件本身的验证就像魅力一样。但是我在测试中的问题是如何将测试中生成的 XML 作为文件放入变量文件中，以便在验证过程中使用它？

最好的问候克拉斯

# ruby - 奇怪的 Ruby 行为

> ID：11516799
> 
> 赞同：1
> 
> 时间：2012-07-17T06:00:01.507
> 
> 标签：ruby

考虑以下 Ruby 代码：

```
a = ["x"] * 3 # or a = Array.new(3, "x")

a[0].insert(0, "a")
a.each {|i| puts i} 
```

我希望输出是 ax, x, x （当然在新行上）。但是，在 Ruby 1.9.1 中，输出是 ax, ax, ax。这是怎么回事？我已将问题缩小到`a`定义数组的方式。如果我明确写出

```
a = ["x", "x", "x"] 
```

然后代码按预期工作，但是原始代码中的任何一个版本都给了我这种意想不到的行为。看来 */initializer 意味着副本实际上是对字符串“x”的同一副本的引用。但是，如果我写的不是插入命令

```
a[0] = "a" + a[0] 
```

然后我得到所需的输出。这是一个错误，还是有一些我不理解的功能在起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T06:31:31.900

[Array.new(size=0, obj=nil)](http://ruby-doc.org/core-1.9.3/Array.html#method-c-new)的文档：

> ...它是使用*obj的**大小*副本创建的（即，对同一*obj的**大小*引用）。

 ***和[数组 * int](http://ruby-doc.org/core-1.9.3/Array.html#method-i-2A)：

> *...返回一个通过连接int*副本构建的新数组`self`

因此，在您惊讶的两种形式中，您最终都会对同一个`"x"`对象进行三个引用，正如您所想的那样。我想说您可能会争论设计决策，但这是记录在案的故意行为，而不是错误。

我知道在不手动编写数组文字 ( `["x", "x", "x"]`) 的情况下获得所需行为的最佳方法是

```
a = Array.new(3) {"x"} 
```

或者当然，只有三个元素，这并不重要，但是如果有更大的元素，这种形式就派上用场了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:42:34.743

In short, although "x" is just a literal, it is an object. You use `["x'] * 3` so a is containing 3 same object. You insert 'a' to one of them, they will be all changed.***

# c# - 为什么我的系统在写入控制台时会发出哔哔声

> ID：11516800
> 
> 赞同：5
> 
> 时间：2012-07-17T06:00:12.457
> 
> 标签：c#, console

我正在为我在我的应用程序中使用的 Web 服务编写控制台测试器。当我将输出写入控制台（JSON）以获得足够大的设置时，控制台应用程序会旋转，并且我开始发出 5-10 秒的哔哔声。我检查了一个 \a 的输出并找不到一个，所以我不确定是什么导致了哔哔声。

在这一点上，我只是在猜测长输出，但我不确定还有什么问题或者是否有任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:09:00.123

我在尝试写入事件日志时看到了类似的东西，但它已满。

然后尝试`Start > Run... > eventvwr`清除一些日志或更改日志的最大大小（通过“操作”菜单）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:03:16.257

可能是BEL？

ctl-G

7

7

贝尔

钟

需要引起注意时使用的控制字符；它可以控制警报或注意设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T01:20:51.767

即使您检查 BELL 字符的输入，它仍可能会发出哔哔声。这是由于字体设置和 unicode 转换造成的。有问题的字符是[U+2022](http://www.fileformat.info/info/unicode/char/2022/index.htm)，子弹。

Raymond Chen[解释说](http://blogs.msdn.com/b/oldnewthing/archive/2007/01/04/1411080.aspx)：

> 在 OEM 代码页中，项目符号字符被转换为哔声。但这是为什么呢？
> 
> 您所看到的是相反的 MB_USEGLYPHCHARS。Michael Kaplan 不久前讨论了 MB_USEGLYPHCHARS。它确定在转换为 Unicode 时是否应将某些字符视为控制字符或可打印字符。例如，它控制 ASCII 钟形字符 0x07 是否应转换为 Unicode 钟形字符 U+0007 或 Unicode 项目符号 U+2022。您需要 MB_USEGLYPHCHARS 标志来决定在转换为 Unicode 时要走哪条路，但从 Unicode 转换时没有相应的歧义。从 Unicode 转换时，U+0007 和 U+2022 都映射到 ASCII 响铃字符。

# c#-4.0 - 将“Facebook 登录”与 C# SDK 以及 ASPNET 会员集成一起使用

> ID：11516802
> 
> 赞同：2
> 
> 时间：2012-07-17T06:00:16.023
> 
> 标签：c#-4.0, facebook-c#-sdk

我按照教程页面进行了基本的 Facebook 身份验证和登录，但它似乎创建了一个重定向循环。

父页面设置了一个监听器，它在 authResponseChange 上重定向到一个处理程序。

然后处理程序获取令牌并重定向回父页面

然后设置一个监听器，登录，触发 authResponseChange 并重定向到处理程序。等等...

我是否误解了什么，或者这是一个错误或预期的行为？我需要找到一种方法来避免这种情况发生。

其次，“使用 Facebook 和 ASP.NET 成员身份进行身份验证”的文档显然还没有准备好，但我会很感激一些关于如何做的指针，你会建议这样做。

**编辑**：我认为这两个问题都可以用相同的解决方案来解决，即 - 让处理程序重定向到一个新页面，该页面根据 facebook 凭据创建一个新的 ASPNET 会员用户 - 但是我不确定如何做到这一点本节的文档只是说 TODO。任何指针？您是否需要扩展个人资料系统来存储访问令牌和 facebook ID？还是我完全走错了路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:47:32.113

[在这里](http://facebooksdk.codeplex.com/wikipage?title=Getting%20Started%20with%20an%20ASP.NET%20MVC%203%20Website%20%28With%20Javascript%20SDK%29&ANCHOR)的另一个演示中，有些人说这是本地主机上的 ie9/chrome 和 cookie 的问题。指向 127.0.0.1 并在 iis 上运行它是否为我解决了这个问题。

# c# - 将 DTO 与 WCF 结合使用

> ID：11516803
> 
> 赞同：0
> 
> 时间：2012-07-17T06:00:23.450
> 
> 标签：c#, wcf, entity-framework, dto

我有一个与 POCO 实体映射的 EFM，并且 m 使用 WCF 进行业务逻辑

在 WCF 中调用此函数时：-

```
 public  List<DTO.Product> Viewall()
    {
        var val= _repositoryprod.GetAll().Take(2).ToList();
        return val;
    } 
```

我收到一个错误**套接字连接已被释放。**

我尝试**序列化**DTO 类，甚至使用 **[DataContract]**和**[DataMember]**属性，但没有运气。

M 使用 TCP 绑定并且只是最大化每个值仍然为什么它显示套接字连接被处理.....

> 绑定名称="netTcpStreaming" transferMode="Streamed" maxReceivedMessageSize="4294967296" maxBufferSize="2147483647" maxBufferPoolSize="2147483647" openTimeout="01:00:00" receiveTimeout="01:00:00" closeTimeout="01:00 :00" sendTimeout="01:00:00" maxConnections="100" listenBacklog="100"

我究竟做错了什么 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:03:35.717

由于 maxItemsInObjectGraph 的默认限制为 65536，可能会导致该错误。尝试更改该限制并重试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T07:30:37.220

得到了解决方案，与 EFM + POCO 一样，您需要在 WCF 操作合同中添加 ApplyDataContractResolver 属性

只需按照此演练即可完成

[http://msdn.microsoft.com/en-us/library/ee705457.aspx](http://msdn.microsoft.com/en-us/library/ee705457.aspx)

# c++ - c ++后端使用swig包装器调用python级别定义的回调

> ID：11516809
> 
> 赞同：8
> 
> 时间：2012-07-17T06:00:57.147
> 
> 标签：c++, python, swig

我正在将一个用 C++ 编写的库包装到 Python API [libwebqq](https://github.com/gtkqq/libwebqq.git)

在 boost 函数中定义了一种类型。

```
typedef boost::function<void (std::string)> EventListener; 
```

Python 级别可以定义“EventListener”变量回调。

C++ 级别还有一个映射结构，即适配器类中的 event_map。event_map 的键类型是 QQEvent 枚举类型，而 event_map 的值类型是包装了 EvenListener 的类“Action”。

```
class Action
{

    EventListener _callback;

    public:
    Action (){
        n_actions++;
    }

    Action(const EventListener & cb ){
    setCallback(cb);
    }

    virtual void operator()(std::string data) {
    _callback(data);
    }
    void setCallback(const EventListener & cb){
        _callback = cb;
    }

    virtual ~Action(){ std::cout<<"Destruct Action"<<std::endl; n_actions --; }
    static int n_actions;
};

class Adapter{

    std::map<QQEvent, Action > event_map;

public:
    Adapter();
    ~Adapter();
    void trigger( const QQEvent &event, const std::string data);
    void register_event_handler(QQEvent event, EventListener callback);
    bool is_event_registered(const QQEvent & event);
    void delete_event_handler(QQEvent event);
}; 
```

类 Adapter 中的“register_event_handler”是向相关事件注册回调函数的 API。如果事件发生，C++ 后端将调用它。但是我们需要在 python 级别实现回调。我将回调类型包装在“callback.i”中

问题是，当我在测试 python[脚本](https://github.com/gtkqq/libwebqq/blob/master/wrappers/python/testwrapper.py#L40)中调用 register_event 时，总是会出现类型错误：

```
Traceback (most recent call last):
File "testwrapper.py", line 44, in <module>
worker = Worker()
File "testwrapper.py", line 28, in __init__
a.setCallback(self.on_message)
File "/home/devil/linux/libwebqq/wrappers/python/libwebqqpython.py", line 95, in setCallback
def setCallback(self, *args): return _libwebqqpython.Action_setCallback(self, *args)
TypeError: in method 'Action_setCallback', argument 2 of type 'EventListener const &'
Destruct Action 
```

请帮助找出此类错误的根本原因并解决此问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T12:41:34.960

The problem seems to be that you haven't included any code to map from a Python callable to your `EventListener` class. It's not provided for free, although it's something that comes up fairly regularly, e.g. [here](https://stackoverflow.com/questions/11435760/python-callback-from-swig-pyobject-call-segfault) which acted as a reference for part of this answer.

Your question has quite a lot of code that's not really relevant to the problem and not quite complete either so I've produced a minimal header file to demonstrate the problem and solution with:

```
#include <boost/function.hpp>
#include <string>
#include <map>

typedef boost::function<void (std::string)> EventListener;

enum QQEvent { THING };

inline std::map<QQEvent, EventListener>& table() {
  static std::map<QQEvent, EventListener> map;
  return map;
}

inline const EventListener& register_handler(const QQEvent& e, const EventListener& l) {
  return table()[e] = l;
}

inline void test(const QQEvent& e)  {
  table()[e]("Testing");
} 
```

Given that header file a simple wrapper would be:

```
%module test

%{
#include "test.hh"
%}

%include "test.hh" 
```

I also put together a bit of Python to run this with:

```
import test

def f(x):
  print(x)

test.register_handler(test.THING, f)
test.test(test.THING) 
```

With this I can reproduce the error you see:

```
LD_LIBRARY_PATH=. python3.1 run.py
Traceback (most recent call last):
  File "run.py", line 6, in 
    test.register_handler(test.THING, f)
TypeError: in method 'register_handler', argument 2 of type 'EventListener const &'

```

Hopefully we're on the same page now. There's a single version of `register_handler` that expects an object of type `EventListener` (SWIG's generated proxy for the type to be precise). We're not trying to pass an `EventListener` in when we call that function though - it's a Python Callable instead, with not much known on the C++ side - certainly not a type match or implicitly convertible. So we need to add some glue in our interface to mush the Python type into the real C++ type.

We do that by defining an entirely new type, which only exists internally to the SWIG wrapper code (i.e. within `%{ }%`). The type `PyCallback` has one purpose: hold a reference to the real Python thing we're working with and make it look/feel like a function in C++.

Once we've added that `PyCallback` implementation detail (which nobody gets to see) we then need to add another overload for `register_handler`, which takes a `PyObject*` directly and constructs the `PyCallback`+`EventListener` for us. Since this only exists for the purpose of wrapping we use `%inline` to declare, define and wrap all within the SWIG interface file. So our interface file now looks like:

```
%module test

%{
#include "test.hh"

class PyCallback
{
    PyObject *func;
    PyCallback& operator=(const PyCallback&); // Not allowed
public:
    PyCallback(const PyCallback& o) : func(o.func) {
      Py_XINCREF(func);
    }
    PyCallback(PyObject *func) : func(func) {
      Py_XINCREF(this->func);
      assert(PyCallable_Check(this->func));
    }
    ~PyCallback() {
      Py_XDECREF(func);
    }
    void operator()(const std::string& s) {
      if (!func || Py_None == func || !PyCallable_Check(func))
        return;
      PyObject *args = Py_BuildValue("(s)", s.c_str());
      PyObject *result = PyObject_Call(func,args,0);
      Py_DECREF(args);
      Py_XDECREF(result);
    }
};
%}

%include "test.hh"

%inline %{
  void register_handler(const QQEvent& e, PyObject *callback) {
    register_handler(e, PyCallback(callback));
  }
%} 
```

At this point we now have enough for the original test Python to run successfully.

It's worth noting that we could have chosen to hide the original overload of `register_handler`, but in this instance I prefer not to - it's more of a feature than a mistake to leave that visible because it permits you to manipulate C++ defined callbacks also, e.g. you could get/set them from the Python side and expose some core ones as global variables.

In your actual code you'll want to do:

```
%extend Action {
  void setCallback(PyObject *callback) {
    $self->setCallback(PyCallback(callback));
  }
} 
```

to overload `Action::setCallback`, after the line `%include "test.hh"`, instead of the `%inline` I used in my example to overload the free function.

Finally you might want to expose `operator()` of your `Action` class using `%rename`, or you could chose to expose the `callback_` member using the [function pointer/member function trick](https://stackoverflow.com/a/1586452/168175).

# dll - Umbraco ContourContrib 错误

> ID：11516810
> 
> 赞同：1
> 
> 时间：2012-07-17T06:01:04.190
> 
> 标签：dll, umbraco, captcha, recaptcha, umbraco-contour

因此，我有一堆使用 Umbraco 轮廓制作的表格，并且我还使用了 ContourContrib 包中包含的 ReCaptcha 数据类型。

我的问题是，在重新安装 ContourContrib 后，我现在收到服务器错误消息：

**找不到从 Umbraco Contour 方法“Contour.Contrib.FieldTypes.ReCaptcha.ToolTip”添加宏插入表单时出错。**

我查看了 Contour.Contrib.dll，确实在引用的命名空间和类中没有名为“Tooltip”的方法。最奇怪的是，在查看 Codeplex 之后，我什至找不到该方法曾经存在的地方。

所以我的下一个想法是删除 Contour 中的字段并再次添加它。这可能有效，但由于此错误，我什至无法再扩展 Contour 的“表单”部分。

我真的很茫然，我希望比我更聪明的人对我可以采取的不同途径来解决这个问题有一些线索。

谢谢你的时间，杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T18:17:18.490

发现我正在重新安装一个比我之前的版本高 2 个版本的版本。我正在安装 v0.0.5，但 Contour.Contrib.dll 在 v0.0.2 及之前的版本中仅包含一个名为 tooltip 的方法。如果您已经制作了表格并正在考虑升级，请注意这一点。

# php - 使用 fputcsv 时避免使用 csv 文件中的默认引号

> ID：11516811
> 
> 赞同：18
> 
> 时间：2012-07-17T06:01:16.817
> 
> 标签：php, fputcsv

使用 fputcsv 避免来自 csv 的默认引号

```
fputcsv($fp, $array, ',', '"'); // OR fputcsv($fp, $array); 
```

在 test.csv

```
testname,045645765789,"""04.07.2012 12:10:52""" 
```

如何在这里避免上述引用？

像下面

```
testname,045645765789,04.07.2012 12:10:52 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-17T06:20:06.920

两个双引号用于转义双引号，因此看起来您的日期/时间已被引用。如果您只想获得正确引用的 CSV，您可以尝试删除任何现有的双引号（这可能有点蛮力）：

```
$array = array('testname',045645765789,'"04.07.2012 12:10:52"');
$array = str_replace('"', '', $array);

fputcsv($fp, $array);

// Output: testname,79323055,"04.07.2012 12:10:52" 
```

The`fputcsv`想要在一个带有空格的字符串周围放置*一些东西*，所以如果你根本不需要引号，你要么需要解决，要么制作自己的函数来做你想做的事。[在这个问题](https://stackoverflow.com/questions/1800675/write-csv-to-file-without-enclosures-in-php)下有很多好的解决方案（**编辑**：这是一个不同的链接）。[或者，在PHP 手册](http://www.php.net/fputcsv)的注释中还有许多其他解决方案。

根据第一个链接，您可以执行以下操作：

```
$array = array('testname',045645765789,'"04.07.2012 12:10:52"');
$array = str_replace('"', '', $array);

fputs($fp, implode(',', $array)."\n");

// Output: testname,79323055,04.07.2012 12:10:52 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-16T05:54:33.667

我知道这是一个老问题，但我有一个类似的问题，最终放弃了`fputcsv`，只是`echo`用正确的标题编辑它，告诉浏览器下载文件。我知道这并没有专门解决这个问题，`fputcsv`但考虑到我花在它上面的时间，并意识到没有解决空间问题的方法（除了可能的问题之外，如果可能的话，工作量可能超过问题应得的），我选择了最简单的解决方案。如果目标是创建一个动态的、可下载的 CSV 文件，那么下面的代码可以轻松灵活地完成任务。我的问题是我需要根据我正在使用的服务的要求将所有字段都用双引号括起来。但是有些字段有空格，这意味着单（或双）引号会自动添加`fputcsv`这意味着我得到了像`"'this is a value'"`. 无论我尝试什么，它都不会正确输出数据。所以这解决了它（但是，它不使用`fputcsv`但我认为没有必要，因为结果是相同的）：

```
$filename="my_file.csv";
header("Content-Type: text/csv; charset=utf-8");
header("Content-Disposition: attachment; filename=$filename");

for ($i=0; $i<=10; $i++) {
    $value1 = "Here is some value";
    $value2 = "Here is another value";
    $value3 = "Another value";

    echo $value1 . ",";
    echo $value2 . ",";
    echo $value3;
    if ($i != 10) echo "\n"; //only add new line if it's not the last line
} 
```

如果需要，您还可以选择将值用双引号括起来，就像我做的那样：

```
for ($i=0; $i<=10; $i++) {
    $value1 = "Here is some value";
    $value2 = "Here is another value";
    $value3 = "Another value";

    echo '"'. $value1 . "\",";
    echo '"'. $value2 . "\",";
    echo '"'. $value3 . "\"";
    if ($i != 10) echo "\n"; //only add new line if it's not the last line
} 
```

如果他们遇到这个特定的格式问题，希望这可以节省一些时间。

# android - 在android中调用soap webservices的登录表单

> ID：11516813
> 
> 赞同：2
> 
> 时间：2012-07-17T06:01:20.923
> 
> 标签：android, mysql, android-intent

嗨，我开发了一个名为soap webservices的登录表单。它对我来说完全成功了......但是现在我实现了一个部分。当我的登录详细信息成功时意味着它会进入下一个活动。怎么办..这里面临一些困难。编码部分如下。

dis 是我的 web 服务 java 项目：

```
package com.userlogin.ws;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

public class Login {
public String authentication(String userName,String password){

String retrievedUserName = "";
String retrievedPassword = "";
String status = "";
try{

 Class.forName("com.mysql.jdbc.Driver");
 Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/androidlogin","root","");
 PreparedStatement statement =  con.prepareStatement("SELECT * FROM user WHERE username = '"+userName+"'");
 ResultSet result = statement.executeQuery();

 while(result.next()){
retrievedUserName = result.getString("username");
retrievedPassword = result.getString("password");
}

if(retrievedUserName.equals(userName)&&retrievedPassword.equals(password)){
status = "Success!";

 }

 else{
 status = "Login fail!!!";
 }

 }
 catch(Exception e){
  e.printStackTrace();
  }
  return status;

  }

  } 
```

dis 是我的 android 端编码部分：

```
package com.androidlogin.ws;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.content.Intent;

public class AndroidLoginExampleActivity extends Activity {
private final String NAMESPACE = "http://ws.userlogin.com";
private final String URL = "http://192.168.1.168:8085/Login/services/Login?wsdl";
private final String SOAP_ACTION = "http://ws.userlogin.com/authentication";
private final String METHOD_NAME = "authentication";
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button login = (Button) findViewById(R.id.btn_login);
    login.setOnClickListener(new View.OnClickListener() {

   public void onClick(View arg0) {
   loginAction();

   }
  });
   }

private void loginAction(){
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    EditText userName = (EditText) findViewById(R.id.tf_userName);
    String user_Name = userName.getText().toString();
    EditText userPassword = (EditText) findViewById(R.id.tf_password);
    String user_Password = userPassword.getText().toString();

  //Pass value for userName variable of the web service
    PropertyInfo unameProp =new PropertyInfo();
    unameProp.setName("userName");//Define the variable name in the web service method
    unameProp.setValue(user_Name);//set value for userName variable
    unameProp.setType(String.class);//Define the type of the variable
    request.addProperty(unameProp);//Pass properties to the variable

  //Pass value for Password variable of the web service
    PropertyInfo passwordProp =new PropertyInfo();
    passwordProp.setName("password");
    passwordProp.setValue(user_Password);
    passwordProp.setType(String.class);
    request.addProperty(passwordProp);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try{
        androidHttpTransport.call(SOAP_ACTION, envelope);
           SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

           TextView result = (TextView) findViewById(R.id.tv_status);
           result.setText(response.toString());

    }
    catch(Exception e){

    }

    Button registerScreen = (Button) findViewById(R.id.btn_login);

    // Listening to register new account link
    registerScreen.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // Switching to Register screen
            Intent i = new Intent(getApplicationContext(), RegisterActivity.class);
            startActivity(i);
        }
      });
   }

   } 
```

在这里，当我点击按钮意味着它被重定向到下一个活动..但我希望如果成功登录意味着它会进入下一个活动......请在哪里放置意图编码或告诉我该怎么做......请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:08:36.263

据我了解您的问题，您必须**检查登录 Web 服务**调用的响应表并在此基础上提出条件。

如果您的回复包含**成功！**status 然后启动**NewActivity**否则显示登录失败`Dialog`或`Toast`.

**例如：**

你的逻辑应该在这里开始新的活动，

```
try{
        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
        String status = response.toString();

        TextView result = (TextView) findViewById(R.id.tv_status);
        result.setText(response.toString());

    if(status.equals("Success!"))
     {
       Intent i = new Intent(getApplicationContext(), NextActivity.class);
       startActivity(i);    
     }
    else
     {
         // Code for Login failure 
     }
   }
    catch(Exception e){
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T07:47:28.957

我更愿意从 AsynTask 类内部而不是从 onCreate() 内部调用 Web 服务，因为后台操作不应影响 UI 线程。

什么是[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)？

AsyncTask 允许正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。

创建一个继承自 AsyncTask 的类，并在主 Activity 类中提供 onPreExecute、onPostExecute、onProgressUpdate 和 doInBackground 方法的定义：

```
private class AsyncCallWS extends AsyncTask {
    @Override
    protected Void doInBackground(String... params) {
        //Call Web Method
        loginStatus = WebService.invokeLoginWS(editTextUsername,editTextPassword,"authenticateUser");
        return null;
    }

    @Override
    //Once WebService returns response
    protected void onPostExecute(Void result) {
        //Make Progress Bar invisible
        webservicePG.setVisibility(View.INVISIBLE);
        Intent intObj = new Intent(CheckLoginActivity.this,HomeActivity.class);
        //Error status is false
        if(!errored){
            //Based on Boolean value returned from WebService
            if(loginStatus){
                //Navigate to Home Screen
                startActivity(intObj);
            }else{
                //Set Error message
                statusTV.setText("Login Failed, try again");
            }
        //Error status is true  
        }else{
            statusTV.setText("Error occured in invoking webservice");
        }
        //Re-initialize Error Status to False
        }

    @Override
    //Make Progress Bar visible
    protected void onPreExecute() {
        webservicePG.setVisibility(View.VISIBLE);
    }

    @Override
    protected void onProgressUpdate(Void... values) {
    }
} 
```

}

调用 AsyncTask 的 execute 方法来发起 Web Service 调用。

```
//Create instance for AsyncCallWS
AsyncCallWS task = new AsyncCallWS();
//Call execute 
task.execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-11T07:34:25.870

> ```
>  This code is Beneficial for you 
> ```

```
 btnsub.setOnClickListener(new View.OnClickListener() {
     public void onClick(View v) {
            // TODO Auto-generated method stub

            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);        
             //Use this to add parameters
             request.addProperty("username",Username.getText().toString());
             request.addProperty("Password",password.getText().toString());

            //Declare the version of the SOAP request
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.setOutputSoapObject(request);
            envelope.dotNet = true;
            try {
                HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
                //this is the actual part that will call the webservice
                androidHttpTransport.call(SOAP_ACTION1, envelope);
                // Get the SoapResult from the envelope body.
                SoapObject result = (SoapObject)envelope.getResponse(); 
                Log.e("result", "responce"+result);
                SoapObject root = (SoapObject) result.getProperty(0);
                Log.e("root", "responce"+root);
                System.out.println("********Count : "+ root.getPropertyCount());
                //value=new ArrayList<Detailinfo>();
                 for (int i = 0; i < root.getPropertyCount(); i++) 
                  {
                  SoapObject root1 = (SoapObject) root.getProperty(i);
                  Log.e("root1", "responce"+root1);
                     Detailinfo info=new Detailinfo();

                     info.setResponseCode(root1.getProperty("ResponseCode").toString());
                     Log.e("code", ""+root1.getProperty("ResponseCode").toString());
                     info.setResponseMessage( root1.getProperty("ResponseMessage").toString());
                     Log.e("msg", ""+root1.getProperty("ResponseCode").toString());

                 if(st1==Integer.parseInt(root1.getProperty("ResponseCode").toString()))
                     {
                     SoapObject root2 = (SoapObject) root1.getProperty(2); 
                     info.setCustomerID( root2.getProperty("CustomerID").toString());
                     info.setCustomerNumber( root2.getProperty("CustomerNumber").toString());
                     info.setLoginID( root2.getProperty("LoginID").toString());
                     info.setName(root2.getProperty("Name").toString());
                     info.setProfileImage( root2.getProperty("ProfileImage").toString());
                     info.setMobile( root2.getProperty("MobileNo").toString());
                     info.setEmailID( root2.getProperty("EmailID").toString());
                     info.setAccountType( root2.getProperty("AccountType").toString());
                     Log.e("AccountType", "responce"+root2.getProperty("AccountType").toString());
                      //for maintain session 
                   session.createUserLoginSession(info.getCustomerID(),info.getName(),info.getMobile(),info.getEmailID(),info.getAccountType());
                    // value.add(info);
                   Log.e("session"," "+session.toString());
                     Intent inten=new Intent(getApplicationContext(),AccordionActivity.class);
                      startActivity(inten);
                  }
                 else
                 {

                 }
                }    
             } catch (Exception e) {
                e.printStackTrace();
           }
        }
    }); 
```

# java - cassandra 1.1.2 中丢失的数据

> ID：11516814
> 
> 赞同：1
> 
> 时间：2012-07-17T06:01:22.077
> 
> 标签：java, cassandra, hector

我正在编写一个 Java 程序，使用 Hector 与 cassandra 交互。我发现在运行批处理导入数据后，我可以使用我的 Java 客户端和 cassandra-cli 程序读取新写入的行。但是，重新启动服务器后，数据消失了。

其他一些有趣的信息......我最初在我的家用机器（Windows）上构建了一个大型数据库，使用旧版本的 cassandra（0.8），然后将数据传输到我当前的生产机器。我发现服务器重启后旧数据仍然存在。我还发现较小的数据库似乎更新得很好，在服务器重启后我没有看到任何数据丢失。

我已经尝试升级到最新版本的 cassandra (1.1.2)，然后回到 Java 6_33 来运行服务器（从 7_4 开始）。没有任何效果。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T19:07:13.970

这可能是由于从 0.8 迁移到更新版本的 cassandra 时未能运行“nodetool upgradesstables”命令造成的。请注意 cassandra 下载中的 NEWS.txt 文件，该文件提供了有关升级过程的提示。

编辑：确认，这是问题所在。感谢那些帮助过的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T15:36:58.000

在 cassandra 版本 1.1.0 到 1.1.4 中未正确刷新提交日志 这是一个未解决的问题。请参考以下jira票。

[重新启动后未重播提交日志](http://issues.apache.org/jira/browse/CASSANDRA-4782)

# php - 将数组插入到新的 php 文件中

> ID：11516816
> 
> 赞同：1
> 
> 时间：2012-07-17T06:01:26.070
> 
> 标签：php

我正在尝试将数组插入 php 文件。但是我能够将数组插入到 php 文件中，但格式不符合要求。我们有 2 个文件

文件1.php

```
<?php
include_once("../dc/dcCommonLib.php");
include_once("../dc/persistence/UserData.php");
require_once("../../lib/include/connect.inc.php");

$_SESSION["survey"] = "BestBuyAug2012";
$idLink = dbconnect($_SESSION["survey"]);
$surveyWidget = rendererSurveyLoadHandler();
setDataToSession("surveywidget",$surveyWidget);
$userData = &UserData::getInstance();
$userData->setSurvey($surveyWidget);
saveFkidsToOidToFkidMappingArray($userData->OidToFkidMapping);

// prepare demo array
prepareItemArray($userData->OidToFkidMapping["Demographic"]["Q"],$demo,"b");

// prepare item array
prepareItemArray($userData->OidToFkidMapping["Default"]["Q"],$item,"i");
prepareItemArray($userData->OidToFkidMapping["Default"]["M"],$item,"i");

// prepare comment array
prepareCommentArray($userData->OidToFkidMapping["Comment"]["C"],$comment);

if(!function_exists('file_put_contents')) {
    function file_put_contents($filename, $data,$type, $file_append = false) {
      $fp = fopen($filename, (!$file_append ? 'w+' : 'a+'));
        if(!$fp) {
          trigger_error('file_put_contents cannot write in file.', E_USER_ERROR);
          return;
        }
    if($type){

    $count = count($data);
    $i = 1;
    //loop through your type array and append comma , to each except last
    foreach($data as $key=>$val) {

     //if we are before last key, append comma    
     if($i < $count)
          $data[$key] .= ',';

       $i++;
    }

    //run same preg_replace as before
    $data2 = preg_replace('/[\[\]]/','"',print_r($data,TRUE));

    //write to file 
    fputs($fp, "$" . $type . " = " . print_r($data2,TRUE));     

 }      else {
        fputs($fp, print_r($data, TRUE));
      }
      fclose($fp);
    }
}
print("Strart writting ...................");
file_put_contents("staticSurveyDataFileTest.php", "<?php\n","",true);
file_put_contents("staticSurveyDataFileTest.php", $item,"itemFkids",true);
file_put_contents("staticSurveyDataFileTest.php", $demo,"demoFkids",true);
file_put_contents("staticSurveyDataFileTest.php", $comment,"commentFkids",true);
file_put_contents("staticSurveyDataFileTest.php", "?>","",true);
print("written ...");

function prepareItemArray($userDataArray, &$item, $itemStr) {
    if(is_array($userDataArray)) {
        foreach($userDataArray as $questId=>$respGrp) {
            $selectionGrp=array_unique($respGrp);
            if(count($selectionGrp)==1) {
                $respGrpId=key($respGrp);
                $respId = key($respGrp[$respGrpId]);
                $item[$questId."_".key($respGrp)]=$itemStr.$respGrp[$respGrpId][$respId];           
            }else {
                foreach ($respGrp as $respGrpId=>$resp) {
                    $respGrp[$respGrpId]=$itemStr.$resp;
                }
                $item[$questId."_".key($respGrp)]=$respGrp;
            }
        }
    }   
}

function prepareCommentArray($userDataArray, &$item) {
    if(is_array($userDataArray)) {
        foreach($userDataArray as $questId=>$respGrp) {
            $selectionGrp=array_unique($respGrp);
            if(count($selectionGrp)==1) {
                $respGrpId=key($respGrp);               
                $item[$questId."_".key($respGrp)]=$respGrp[$respGrpId]["fk_id"];            
            }
        }
    }   
}

?> 
```

这个文件中的数组被插入到另一个名为 staticSurveyDataFileTest.php 的文件中

staticSurveyDataFileTest.php

```
<?php
$itemFkids = Array
(
    "203_19" => i27,//double quotes missing  
    "207_22" => i28,//double quotes missing 
    "357_22" => i99,//double quotes missing 
    "370_70" => i104,//double quotes missing
    "377_72" => i105,//double quotes missing 
    "140_8" => i1,//double quotes missing 
    "141_8" => i2,//double quotes missing 
    "142_8" => i3,//double quotes missing 
    "143_8" => i4,//double quotes missing 
    "144_8" => i5,//double quotes missing 
    "145_8" => i6,//double quotes missing 
    "151_8" => i7,//double quotes missing 
    "152_8" => i8,//double quotes missing 
    "158_8" => i9,//double quotes missing 
    "164_8" => i10,//double quotes missing 
    "165_8" => i11,//double quotes missing 
    "166_8" => i12,//double quotes missing 
    "167_8" => i13,//double quotes missing 
    "168_8" => i14,//double quotes missing 
    "169_8" => i15,//double quotes missing 
    "175_8" => i16,//double quotes missing 
    "176_8" => i17,//double quotes missing 
    "182_8" => i18,//double quotes missing 
    "183_8" => i19,//double quotes missing 
    "184_8" => i20,//double quotes missing 
    "190_8" => i21,//double quotes missing 
    "196_8" => i22,//double quotes missing 
    "197_8" => i23,//double quotes missing 
    "198_8" => i24,//double quotes missing 
    "199_8" => i25,//double quotes missing 
    "200_8" => i26,//double quotes missing 
    "214_8" => i29,//double quotes missing 
    "215_8" => i30,//double quotes missing 
    "216_8" => i31,//double quotes missing 
    "222_8" => i32,//double quotes missing 
    "223_8" => i33,//double quotes missing 
    "224_8" => i34,
    "225_8" => i35,
    "226_8" => i36,
    "227_8" => i37,
    "233_8" => i38,
    "234_8" => i39,
    "235_8" => i40,
    "236_8" => i41,
    "237_8" => i42,
    "243_8" => i43,
    "244_8" => i44,
    "245_8" => i45,
    "251_8" => i46,
    "252_8" => i47,
    "253_8" => i48,
    "254_8" => i49,
    "255_8" => i50,
    "256_8" => i51,
    "257_8" => i52,
    "263_8" => i53,
    "264_8" => i54,
    "265_8" => i55,
    "266_8" => i56,
    "267_8" => i57,
    "268_8" => i58,
    "269_8" => i59,
    "270_8" => i60,
    "271_8" => i61,
    "272_8" => i62,
    "278_8" => i63,
    "279_8" => i64,
    "280_8" => i65,
    "281_8" => i66,
    "282_8" => i67,
    "283_8" => i68,
    "289_8" => i69,
    "290_8" => i70,
    "296_8" => i71,
    "297_8" => i72,
    "298_8" => i73,
    "299_8" => i74,
    "300_8" => i75,
    "301_8" => i76,
    "307_8" => i77,
    "308_8" => i78,
    "309_8" => i79,
    "310_8" => i80,
    "311_8" => i81,
    "312_8" => i82,
    "313_8" => i83,
    "314_8" => i84,
    "315_8" => i85,
    "316_8" => i86,
    "317_8" => i87,
    "318_8" => i88,
    "324_26" => i89,
    "328_37" => i90,
    "332_48" => i91,
    "338_59" => i92,
    "344_59" => i93,
    "345_59" => i94,
    "351_8" => i95,
    "352_8" => i96,
    "353_8" => i97,
    "354_8" => i98,
    "364_8" => i100,
    "365_8" => i101,
    "366_8" => i102,
    "367_8" => i103 
)//comma missing
$demoFkids = Array
(
    "129_2" => b1//double quotes missing 
)//comma missing
$commentFkids = Array
(
    "373_375" => 1,//double quotes missing 
    "380_382" => 2//double quotes missing 
)//comma missing
?> 
```

我们需要插入一个类似这样的文件

期望的输出

```
<?php
    $itemFkids = Array
    (
        "203_19" => "i27",//notices the double quotes here
        "207_22" => "i28",
        "357_22" => "i99",
        .
        .
        .

        .
        .
.

    ),//notice a comma here
    $demoFkids = Array
    (
        "129_2" => "b1"//notices the double quotes here
    ),//notice a comma here
    $commentFkids = Array
    (
        "373_375" => "1",
        "380_382" => "2"//notices the double quotes here
    ),//notice a comma here
    ?> 
```

我确实尝试在 google 和其他 php 网站中进行搜索，但没有找到太多相关信息。因此，如果您可以编辑我的代码并使其工作，我将不胜感激。先感谢您 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:41:32.547

在我看来，你应该使用数据库。
无论如何`foreach`，如果找不到更好的解决方案，我认为 a 会起作用。

例子：

```
$second_array = array();

foreach($first_array as $key => $value){
    $second_array[$key]='&quot;'.$value.'&quot;';
} 
```

这是假设引号用于 html 显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:45:01.210

检查[序列化](http://php.net/manual/en/function.serialize.php)。这是一种与您正在做的不同的方法，但更清洁。简单地说，这是一种获取 PHP 对象的方法，将其转换为字符串（可以保存、读取等），然后反序列化会将其转换回原来的样子。

# asp.net - Linq to sql 查询密码字段区分大小写

> ID：11516820
> 
> 赞同：0
> 
> 时间：2012-07-17T06:01:43.517
> 
> 标签：asp.net, sql, asp.net-mvc-3

如何在 Linq to sql 中编写区分大小写的查询。

目前我的查询是：

```
 var userResults = from u in Adm.Registrations   
                     where u.UserName == userName && u.Password ==  passWord 
                     select u; 
```

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T06:06:43.453

永远不要将密码以纯文本形式存储在数据库或其他任何地方。绝不。这是不好的。

[http://www.codinghorror.com/blog/2007/09/youre-probably-storing-passwords-incorrectly.html](http://www.codinghorror.com/blog/2007/09/youre-probably-storing-passwords-incorrectly.html)

> 我的意思是不要将 Reddit 开发人员的好名字拖入泥潭。我们都有罪。我敢肯定，每个阅读本文的开发人员在其职业生涯的某个阶段都将密码存储为纯文本。我知道我有。忘记责备。重要的是要告诉我们的同行在数据库中存储明文密码是严格禁止的——有更好的方法，从基本的哈希开始。

使用这些参考资料可帮助您确定最佳行动方案。有多种方法可以给这只猫剥皮。我意识到更改存储密码的方式并不是对您最初问题的直接回答，并且会涉及到您的更多工作，但它会避免更多的麻烦。

这是解决纯文本问题的非常详尽的指南：http: [//www.codeproject.com/Articles/14537/The-Art-Science-of-Storing-Passwords](http://www.codeproject.com/Articles/14537/The-Art-Science-of-Storing-Passwords)

这些链接也很有启发性： [加盐密码：最佳实践？](https://stackoverflow.com/questions/674904/salting-your-password-best-practices)

[密码哈希的非随机盐](https://stackoverflow.com/questions/536584/non-random-salt-for-password-hashes/536756#536756)

我希望这比最初的警告更有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T06:43:25.333

如果您尚未将数据库配置为执行区分大小写的比较，则需要在从数据库中获取结果后在内存中执行比较。

```
var users = Adm.Registrations
               .Where(u => u.UserName == userName && u.Password == password)
               .ToList() // this will load data into memory
               // Now perform a case-sensitive query on the in-memory data
               .Where(u => u.UserName == userName && u.Password == password); 
```

另一种选择是更改数据库的排序规则以执行区分大小写的搜索，但要小心，因为这可能会导致在其他查询或存储过程中获得的结果少于预期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T06:07:02.457

尝试这个

```
var userResults = from u in Adm.Registrations 
                      where u.UserName .Equals(userName,StringComparison.InvariantCultureIgnoreCase) && u.Password.Equals(passWord,InvariantCultureIgnoreCase)
                      select u; 
```

# javascript - 如何解决“错误：未定义 WebForm_DoPostBackWithOptions”？

> ID：11516824
> 
> 赞同：0
> 
> 时间：2012-07-17T06:01:52.317
> 
> 标签：javascript, asp.net, postback, click

我有一个在本地运行良好的应用程序，但是当我在服务器上托管它时，没有一个按钮的点击触发。我收到以下错误：

> 错误：未定义 WebForm_DoPostBackWithOptions

我不明白为什么我在更新 bin 文件夹 Ajax dll 并在服务器上安装了 framework 4.0 时收到此错误，但我仍然收到此错误。

我已经尝试过以下链接：[未定义 WebForm_DoPostBackWithOptions](https://stackoverflow.com/questions/3933642/webform-dopostbackwithoptions-is-not-defined)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:07:23.720

i had this problem before, i also did installed everything fresh , but still faced the error and that was abnormally fixed by setting the time on the server. thats bit stupid, but it worked in my case.

# eclipse-plugin - RCP 产品中的保存选项

> ID：11516846
> 
> 赞同：0
> 
> 时间：2012-07-17T06:03:06.373
> 
> 标签：eclipse-plugin, eclipse-rcp, rcp

我正在开发一个由视图和编辑器组成的 RCP 应用程序。我可以在编辑器中更改值并编辑某些参数的值。更改值后，我需要使编辑器变脏，并且还想启用保存按钮。到目前为止，我还没有实现我的保存按钮。谁能指导我如何启用保存按钮，以及当编辑器中发生一些修改时如何使编辑器变脏。

提前致谢。任何帮助将不胜感激。

问候， 吉里什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:19:01.697

这是表单编辑器逻辑的概述，希望对您有所帮助。

```
public class TestEditor extends FormEditor {

    @Override
    protected void addPages() {
        // this method is called when the editor is being created
        // to add the necessary pages
        // page classes should be like following
        // class TestEditorPage extends FormPage
        try {
            TestEditorPage pageTest = new TestEditorPage(this);
            addPage(pageTest);
        } catch (PartInitException e) {
        }
    }

    @Override
    public void doSave(IProgressMonitor monitor) {
        // this method will be called on save action
        // (or Ctrl + s shortcut)
    }

    @Override
    public void doSaveAs() {
        // this method will be called on save-as 
        //call (or Ctrl + Shift + s shortcut)
    }

    @Override
    public boolean isSaveAsAllowed() {
       // put here the call to the logic that 
       // check if the save is allowed
       return true;
    }

    @Override
    public boolean isDirty() {
        // Here the call for the logic that 
        // defines if the editor is dirty or not
        return true;
    }
} 
```

# c# - 获取八进制字符串中的 dsa 签名值

> ID：11516852
> 
> 赞同：0
> 
> 时间：2012-07-17T06:04:13.250
> 
> 标签：c#

我正在尝试读取属性 dsa-signature 的八进制字符串值。我从默认命名上下文属性中获得了该字段。但是它在字节数组中，当我尝试将其转换为字符串时，它会给出错误的输出。

有谁知道如何进行正确的八进制转换？

```
DirectoryEntry entry = new DirectoryEntry("LDAP://DC=cobra,DC=net");
            PropertyValueCollection propCol = entry.Properties["dSASignature"];
            Console.WriteLine(propCol.PropertyName + " : " + propCol.Value);
            System.Text.UTF8Encoding enc = new System.Text.UTF8Encoding();
            string str = enc.GetString((System.Byte[])propCol.Value);
            Console.WriteLine("value : " + str); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:09:00.150

> 但是它在字节数组中，当我尝试将其转换为字符串时，它会给出错误的输出。

这是一个字节数组。只是一个任意的字节序列。它*不是*UTF-8 编码的文本，这就是您对待它的方式。

如果要显示格式为十六进制的字节，可以使用：

```
byte[] data = (byte[]) propCol.Value;
string hex = BitConverter.ToString(data); 
```

如果您需要更有效地传输它但作为文本，您可以使用 base64... 但理想情况下，您应该尽可能长时间地将其*视为*字节数组，因为从根本上说它只是二进制数据。

# visual-studio-2010 - Visual Studio 在运行时崩溃

> ID：11516861
> 
> 赞同：0
> 
> 时间：2012-07-17T06:05:28.867
> 
> 标签：visual-studio-2010, devexpress

请您帮我解决这个 VS 2010 问题。每次我想运行我的项目时都会出现这个问题。它可以以某种方式修复吗？屏幕截图可在附件中找到。 ![在此处输入图像描述](../Images/4d82482d55f88d02c1ed82ad11732464.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:33:03.413

尝试再次注册 IIS...要执行此操作，请按照给定的步骤...

1.  从命令提示符转到 C:\Windows\Microsoft.NET\Framework\v4.X 文件夹
2.  从命令提示符执行 aspnet_regiis.exe -I 命令

关闭 Visual Studio 并重新打开。

再次尝试重新运行该项目。

谢谢

# jquery - 如何防止下划线模板标签在jquery html select上被htmlencoded

> ID：11516864
> 
> 赞同：0
> 
> 时间：2012-07-17T06:05:51.720
> 
> 标签：jquery, html, underscore.js, html-entities

当我这样做时：

```
$(".two", '<div class="one"></div><div class="two"><%=abc%></div>').html(); 
```

加载的 html 变为：

```
&lt;%=abc%&gt; 
```

如何防止这种 htmlentities 转换。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:14:13.763

你可以`replace(them)`：

```
$(".two", '<div class="one"></div><div class="two"><%=abc%></div>').html().replace('&lt;', "<").replace('&gt;', ">") 
```

[演示](http://jsbin.com/owarad/edit#javascript,html,live)

# java - Java小程序中的Tiff图像

> ID：11516867
> 
> 赞同：1
> 
> 时间：2012-07-17T06:05:58.300
> 
> 标签：java, applet, tiff, jai

我正在尝试简单的 java applet 程序来显示 tiff 图像，如下所示

```
import java.applet.Applet;
import java.awt.Graphics;

import javax.swing.ImageIcon;

/* <applet code="Form1" width=100 height=50>
</applet> */  
public class Form1 extends Applet
{
     ImageIcon image ;

       public void init(){

           image = new ImageIcon("C:/Documents and Settings/inos002827/Desktop/a.tif");
       }

        public void paint(Graphics g){

              g.drawImage(image.getImage(), 0,0,this);

        }

} 
```

但是我得到了空白的小程序。同样适用于 jpeg 图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:31:03.650

有关 TIFF 支持，请参阅[Java 高级成像](http://www.oracle.com/technetwork/java/javase/tech/jai-142803.html)。

来自[常见问题](http://java.sun.com/products/java-media/jai/forDevelopers/jaifaq.html#fileformat)

> ### 支持哪些图像文件格式？
> 
> Java Advanced Imaging 1.1.2_01 提供的编解码器类支持 BMP、GIF（只读）、FlashPix（只读）、JPEG、PNG、PNM、**TIFF**和 WBMP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:11:51.677

从内存来看，这种方式不支持 Tiff 文件。您将需要查看 ImageIO API 和可能的第三方库。

奇怪的是，谷歌搜索了 3 秒发现这个[Can't read and write a TIFF image file using Java ImageIO 标准库](https://stackoverflow.com/questions/1954685/cant-read-and-write-a-tiff-image-file-using-java-imageio-standard-library)

# c - 在 Windows 7 上的 png_set_read_fn() 中崩溃

> ID：11516870
> 
> 赞同：0
> 
> 时间：2012-07-17T06:06:05.653
> 
> 标签：c, windows, gdb, libpng

我正在交叉编译一些适用于 Windows 7 的 C 代码并链接到此处找到的[libpng12.dll](http://gnuwin32.sourceforge.net/packages/libpng.htm)。不幸的是，下面的行会导致崩溃（GDB 说分段错误）：

```
png_structp png = png_create_read_struct(PNG_LIBPNG_VER_STRING, NULL, NULL, NULL); 
```

我不知道从哪里开始调试这个函数——这个函数看起来非常简单，并且与其余代码无关。回溯的顶部如下所示：

```
#0 0xabababab in ?? ()
#1 0x6cc556d1 in png_set_read_fn () from c:\...libpng12.dll
#2 0x6cc7a5d4 in png_libpng_ver () from c:\...libpng12.dll
#3 0x00000038 in ?? ()
#4 0x0028f928 in ?? () 
```

我猜 #4 是 png_create_read_struct()，因为 #5 是我调用它的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:17:56.733

请先使用ADplus或windbg等生成core dump，然后查看#0（0xabababab）地址周围的汇编代码，也可以查看这些汇编的变量值。如果你有源代码，你可能会有很好的机会理解它崩溃的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:29:40.350

已解决（不幸的是通过反复试验），但以防万一其他人遇到此问题，这是由不正确的 zlib 版本引起的（在我的情况下，太旧了）。您可以在运行时很容易地检查这一点：

```
fprintf(stderr, "   Compiled with libpng %s; using libpng %s.\n",
        PNG_LIBPNG_VER_STRING, png_libpng_ver);
fprintf(stderr, "   Compiled with zlib %s; using zlib %s.\n",
        ZLIB_VERSION, zlib_version); 
```

# vb.net - VB.NET字符串路径被自动截断

> ID：11516873
> 
> 赞同：0
> 
> 时间：2012-07-17T06:06:25.593
> 
> 标签：vb.net, path

我最终完成了一个发送和接收 RS-232 消息的简单程序。我的参数（波特率、COM 端口）存储在 INI 文件中（如果文件不存在将自动创建）。该程序运行没有错误，但我不知道为什么它会在路径长度超过限制时切断指向 INI 文件的路径（路径字符串中有 Unicode 日文字符）

我在新函数（构造）中的路径字符串是这样的：`"D:\通信プログラム20120709\新しいフォルダー\新しいフォルダー\新しいフォルダー\新しいフォルダー\Debug\Config.ini"`

在事件函数中，它将变为：`D:\通信プログラム20120709\新しいフォルダー\新しいフォルダー\新しいフォ・`

在咨询了 Internet 上的一些资源后，他们向我展示了 .NET 字符串的容量非常大，所以我想我的问题与 VB.NET 字符串无关。

任何帮助，将不胜感激。

* * *

**来自评论**

发现下面第一行代码后路径变了

```
RS232TransPort = IniRoutine.GetString(IniSectionName, ConfigName.COMPort, "COM3")
RS232Baudrate = IniRoutine.GetInteger(IniSectionName, ConfigName.Baudrate, 9600) 
```

这是获取字符串的函数：

```
Public Function GetString(ByVal Section As String, ByVal Key As String, ByVal [Default] As String) As String 

    Dim intCharCount As Integer 
    Dim objResult As New System.Text.StringBuilder(256) 

    intCharCount = GetPrivateProfileString(Section, Key, [Default], objResult, objResult.Capacity, strFilename) 
    GetString = String.Empty 

    If intCharCount > 0 Then GetString = Left(objResult.ToString, intCharCount) 

End Function 
```

其中 strFilename 是此类的局部变量。

这是 API 声明：

```
Private Declare Ansi Function GetPrivateProfileString _ 
        Lib "kernel32.dll" Alias "GetPrivateProfileStringA" _ 
        (ByVal lpApplicationName As String, _ 
        ByVal lpKeyName As String, ByVal lpDefault As String, _ 
        ByVal lpReturnedString As System.Text.StringBuilder, _ 
        ByVal nSize As Integer, ByVal lpFileName As String) _ 
        As Integer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:33:48.110

您正在使用 GetPrivateProfileStringA 而不是 GetPrivateProfileStringW。

由于您使用的是 Unicode，因此您需要改用 GetPrivateProfileStringW。

# php - 如何在 symfony2 中安装 EventDispatcher

> ID：11516874
> 
> 赞同：0
> 
> 时间：2012-07-17T06:06:28.600
> 
> 标签：php, symfony-2.1

我无法获得如何在 symfony2 中安装 EventDispatcher。我的意思是我必须在哪个文件夹中提取这些内容

这是官方文档

[https://github.com/symfony/EventDispatcher](https://github.com/symfony/EventDispatcher)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:46:35.443

不要提取任何东西，而是使用[作曲家](http://getcomposer.org/doc/00-intro.md)。

# iphone - 使用 NSMutableString 的 appendString 时应用程序崩溃

> ID：11516876
> 
> 赞同：0
> 
> 时间：2012-07-17T06:06:44.617
> 
> 标签：iphone, xcode, nsmutablearray, nsmutablestring

我是 Objective-c 的新手，我决定从斯坦福的 CS193s 2010F Session 的讲座/作业开始。

我正在处理第二个任务，当我不得不返回一个组合（连接）NSMutableArray 中的每个字符串的 NSString 时，我陷入了困境。（MutableArray 在其每个索引处仅包含 NSString）

我的方法是使用 for 循环来传递 MutableArray 的索引（在下面的代码中，MutableArray 是 'anExpression' 类型为 'id'）。我声明了一个 NSMutableString 并在“anExpression”数组的每个索引处添加了 NSString。这是代码：

```
+ (NSString *)descriptionOfExpression:(id)anExpression{
  NSMutableString *result = [NSMutableString string];

  for (int i = 0;i<[anExpression count];i++){
    [result appendString:[anExpression objectAtIndex:i]];
  }

  return result;
} 
```

然而，在

```
 [result appendString:[anExpression objectAtIndex:i]]; 
```

xcode 崩溃并出现以下错误语句：

```
2012-07-17 01:44:51.014 Calculator[9470:f803] -[__NSCFNumber length]: unrecognized selector sent to instance 0x68732c0
2012-07-17 01:44:51.015 Calculator[9470:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFNumber length]: unrecognized selector sent to instance 0x68732c0'
*** First throw call stack:
(0x13ca022 0x155bcd6 0x13cbcbd 0x1330ed0 0x1330cb2 0x12d2d18 0x13460d7 0x1397a8d 0x3a50 0x27ed 0x13cbe99 0x1714e 0x170e6 0xbdade 0xbdfa7 0xbd266 0x3c3c0 0x3c5e6 0x22dc4 0x16634 0x12b4ef5 0x139e195 0x1302ff2 0x13018da 0x1300d84 0x1300c9b 0x12b37d8 0x12b388a 0x14626 0x1ed2 0x1e45 0x1)
terminate called throwing an exception 
```

我查看了苹果的开发者文档，看到了 'NSString stringWithFormat:' 方法，并决定改用这个方法：

```
+ (NSString *)descriptionOfExpression:(id)anExpression{
  NSMutableString *result = [NSMutableString string];

  for (int i = 0;i<[anExpression count];i++){
    [result appendString:[NSString stringWithFormat:@"%@",[anExpression objectAtIndex:i]]];
  }

  return result;
} 
```

现在可以了。

现在我很困惑为什么第二个代码有效但第一个无效。我认为附加字符串只有在通过 nil 时才会失败（并崩溃）......

有什么我想念的吗？

先感谢您 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:13:51.863

看起来 anExpression 的内容是 NSNumber 而不是 NSString 的实例。您得到的错误是关于 appendString 如何工作的提示；第一步显然是询问传递的“字符串”有多长（大概是为了分配足够的内存）。这显然不是 NSNumber 上的方法（因此崩溃），`stringWithFormat`旨在进行类型检查并更灵活。

我怀疑你也可以使用`stringValue`：

```
[result appendString:[[anExpression objectAtIndex:i] stringValue]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T06:21:25.997

```
+ (NSString *)descriptionOfExpression:(id)anExpression{

      NSMutableString *result = [NSMutableString string];

          for (int i = 0;i<[anExpression count];i++) {

              [result appendString:[[anExpression objectAtIndex:i] stringValue]];

         }

  return result;
} 
```

将其转换为字符串会对您有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T06:13:14.740

使用这个功能：

```
+ (NSString *)descriptionOfExpression:(id)anExpression
{
     NSMutableString *result = [[NSMutableString alloc] init];

    for (int i = 0;i<[anExpression count];i++)
    {
        NSString *str = [NSString stringWithFormat:@"%@",[anExpression objectAtIndex:i]]; 

        if(str)
        { 
            [result appendString:str];
        }

        //OR
        //[result appendFormat:[NSString stringWithFormat:@"%@",[anExpression objectAtIndex:i]]]; 

    }

    return result;
} 
```

# jquery - 如何通过 id 和 class 属性获取元素？

> ID：11516879
> 
> 赞同：-3
> 
> 时间：2012-07-17T06:07:09.383
> 
> 标签：jquery, html, css

我有一个元素，其类值为“classA”，id 值为“id1”。我知道如何使用类或 id 获取元素，但是有许多元素的类值为“classA”，并且有许多元素的 id 值为“id1”。因此我需要使用类和 id 来获取元素。请告诉我，我该怎么做？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T06:09:48.137

根据 HTML 规范，该`id`值必须是唯一的。违反这一点会导致各种问题，例如选择器可能不匹配*任何*元素。

因此，您只需更改`id`值，使它们在文档中是唯一的。

使用 W3C 标记验证器，因为它可以检测多重定义的`id`值等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T06:11:23.733

在 jQuery 中：

```
$("div#IDvalue.classname") 
```

并注意 fact `ID`s 必须是唯一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T06:11:14.913

`Id`根据标准，应该始终是唯一的。不要重复身份证。类可以跨多个`HTML`元素复制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T06:12:18.760

ids 需要明确不同..

```
getElementById('#id').value 
```

对于类使用这样的东西

```
getElementsByClassName("classname")[0].value 
getElementsByClassName("classname")[1].value 
```

# c# - 如何使用c#将一个文件夹中的图像复制到另一个文件夹？

> ID：11516883
> 
> 赞同：0
> 
> 时间：2012-07-17T06:07:44.033
> 
> 标签：c#

> **可能重复：**
> [如何将文件复制到另一个路径？](https://stackoverflow.com/questions/1979920/how-to-copy-a-file-to-another-path)

当我的代码开始执行时，我需要将图像从一个文件夹复制到另一个文件夹。每次它开始执行时都应该发生这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T06:22:50.680

```
Public void CopyFiles(string sourcePath,string destinationPath)
{
     string[] files = System.IO.Directory.GetFiles(sourcePath);

     foreach(string file in files)
     {
        System.IO.File.Copy(sourcePath,destinationPath);  
     }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T06:36:54.313

我的看法是使用以下代码 -

```
public void CopyFiles(string sourcePath, string destinationPath)
    {
        string[] files = System.IO.Directory.GetFiles(sourcePath);
        Parallel.ForEach(files, file =>
        {
            System.IO.File.Copy(file, System.IO.Path.Combine(destinationPath, System.IO.Path.GetFileName(file)));

        });
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T06:12:56.183

您可以使用[File.Copy](http://msdn.microsoft.com/en-us/library/system.io.file.copy.aspx)方法将文件从一个位置复制到另一个位置。

# java - Android - 在应用程序和 Jar 的哈希映射中动态添加函数

> ID：11516886
> 
> 赞同：2
> 
> 时间：2012-07-17T06:08:19.387
> 
> 标签：java, android, design-patterns, jar, hashmap

嗨，我有包装应用程序和一个在包装应用程序服务中运行的 jar。在完整的解决方案中，Jar 是我的产品，我不能辱骂用户，但我需要通过针对从套接字接收的命令注册函数来赋予他们扩展功能的自由。他们可以在包装应用程序中做到这一点。我已经有一些来自 flex UI 的命令，它们的处理方式如下：

```
 private void processCommand(String tempCommand) throws NumberFormatException, IOException, ELearningException 
{
    ApplicationLog.log("Command Queue " + tempCommand, true);

    String[] commandParameters = tempCommand.split("#");

    switch (Integer.parseInt(commandParameters[0])) 
    {
        case CONSTANTS.INITIALIZE:
            if (this.m_isInitialized)
                break;
            else
            {
                InitializeTeacherJar.instantiate(tempCommand.split("#")[1], this.baseContext, tempCommand.split("#")[2]);

                parent = InitializeTeacherJar.getInstance();

                parent.setMyFlexServer(this.m_localServerSocket);
                parent.setMyFlexSocket(this.m_localSocket);

                this.m_isInitialized = true;
            }
            break;
        case CONSTANTS.LOGIN:

            /**
             * Store student details in hash map
             */

            this.writeToStudentJava(tempCommand, JavaServerThreadForTeacher.getIpAddress().getHostAddress());

            if(tempCommand.split("#")[1].equalsIgnoreCase(CONSTANTS.SUCCESS))
            {
                HashMap<String, ArrayList<String>> temp = parent.getStudentIPList();
                ArrayList<String> value= new ArrayList<String>();
                value.add(tempCommand.split("#")[3]);
                value.add("present");
                temp.put(tempCommand.split("#")[2], value);
                parent.setStudentIPList(temp);

                if (StudentUtility.studentCounter < 0)
                    StudentUtility.studentCounter = 0;

                StudentUtility.studentCounter = StudentUtility.studentCounter + 1;

                parent.getMyFlexSocket().getOutputStream().write((CONSTANTS.PING + parent.getDelimiter() + StudentUtility.studentCounter).getBytes());

                System.out.print("StudentUtility.studentCounter :: "+StudentUtility.studentCounter);
            }
            break;
        case CONSTANTS.COURSE:
            parent.setCourse(tempCommand.split(parent.getDelimiter())[1]);
            break;
        case CONSTANTS.ACTION:
            parent.performAction(tempCommand, commandParameters[3]);

            parent.getMyFlexSocket().getOutputStream().write((CONSTANTS.PING + parent.getDelimiter() + StudentUtility.studentCounter).getBytes());
            break;

        case CONSTANTS.INTERACTIVE:
            if (commandParameters[1].equalsIgnoreCase(CONSTANTS.Play)) {
                parent.playAudio(commandParameters[2], true);
            } else if (commandParameters[1].equalsIgnoreCase(CONSTANTS.Record)) {
                parent.startAudioRecording(commandParameters[2], true);
            } else {
                parent.playAudio(commandParameters[2], false);
            }

        case CONSTANTS.TTL:
            this.m_isWifiConnected();
            break;
        case CONSTANTS.DELETE:
            parent.deleteFile(commandParameters[1], true);
            // deleteRecording(commandParameters[3],
            // commandParameters[1]
            // + commandParameters[2]);
            // deleteEveryThing(Environment.getExternalStorageDirectory()
            // .getAbsolutePath() + "/" + commandParameters[2]);
            // deleteEveryThing(pathToSave + "/Response/" + course + "/"
            // + commandParameters[1]);
            break;
        case CONSTANTS.RESTART:
            StudentUtility.sendToEveryStudent(tempCommand);
            StudentUtility.displayOnProjector(tempCommand);
            parent.setStudentIPList(new HashMap<String, ArrayList<String>>());
            parent.setCourse("");
            break;
        case CONSTANTS.EXIT:
            StudentUtility.displayOnProjector(tempCommand);
            StudentUtility.sendToEveryStudent(tempCommand);
            break;
        default:
            break;
    }

} 
```

这是在我的 Jar 中，我希望用户能够在包装应用程序中添加任意数量的案例作为函数。此外，最好将现有案例放在用于在包装器应用程序中注册命令和函数的相同哈希映射中。

我需要知道正确的设计模式和一些如何去做的建议。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:58:06.543

将设计模式命令与功能代码到命令的映射相结合。这样做的好处是将实现移动到它们自己的自包含类中，这使代码更易于管理和测试。

您可能希望使用 Design Pattern Visitor 而不是修改命令映射，但这取决于您的具体情况。

命令的通用接口

```
public Interface Command {
 void action();
} 
```

创建一堆具体的命令

```
public class Course implements Command {
  private final String tempCommand;
  private final ParentClass parent;

  public Course(final String tempCommand, final ParentClass parent) {
    this.tempCommand = tempCommand;
    this.parent = parent;
  }

  public void action() {
    parent.setCourse(tempCommand.split(parent.getDelimiter())[1]);
  }
}; 
```

将预先存在的功能代码映射到命令。

```
 private final Map<Integer, Command> getBuiltIns() {
      Private final Map<Integer, Command> cmdMap = new HashMap<Integer, Command>();
      cmdMap.add(CONSTANTS.COURSE, new Command(tempCommand, parent));
      <etc>
     return cmdMap;
  }

  private final cmdMap = getBuildIns(); 
```

制作一个可以添加命令的方法

```
public void addCommand(final int code, final Command command) {
  // Check if code is already used, or there might be trouble
  cmdMap.add(code, command);
} 
```

找到命令然后执行。

```
private void processCommand(String tempCommand) throws NumberFormatException, IOException, ELearningException 
{
  final Command theCommand = cmdMap.get(Integer.parseInt(commandParameters[0]));
  theCommand.action();
} 
```

# android - SELECT 语句和 WHERE 子句的正确语法是什么？

> ID：11516889
> 
> 赞同：0
> 
> 时间：2012-07-17T06:08:40.837
> 
> 标签：android, sqlite, select

我正在尝试探索 android，我刚开始使用 SQLite 数据库。我想知道从表中选择单行的正确语法是什么，我要选择的行来自用户使用`editText`. 提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:05:05.187

我不同意上面的两个答案。如果用户输入这个查询怎么办：

```
Bobby Tables'; drop table yourTable; 
```

见：http: [//xkcd.com/327/](http://xkcd.com/327/)

我相信你应该这样做：

```
String query = "select * from TABLE_NAME WHERE column_name=?";
String[] selection = new String[1];
selection[0] = users_entered_value;
Cursor c = db.rawQuery(query, selection); 
```

ETA：实际上，我越想越觉得你走错了方向。如果您的应用程序依赖于一个数据库查询，它只返回一个与用户输入的任意字符串的唯一匹配项，那么它可能会在很多时候被破坏。

你可能应该做的是这样的事情：

```
String query = "select * from TABLE_NAME WHERE column_name LIKE ?";
String[] selection = new String[1];
selection[0] = "%" + users_entered_value + "%";
Cursor c = db.rawQuery(query, selection); 
```

然后遍历结果并根据您自己的标准选择“最佳”匹配。

此外，您应该为要搜索的列创建不区分大小写匹配的表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:43:37.433

```
SQLiteDatabase db; 

// make connection to your database ;

Cursor c = null ;

String SQL = "select * from TABLE_NAME where column_name='VALUE'";

c = db.rawQuery(SQL); 
```

**c contains your result array of query you fired.**

You can retrieve values using loop.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T12:39:05.507

SQLite数据库数据库；

db.rawQuery("select * from yourTable where your_column_name = 'users_entered_value' limit 1", null);

# php - 为 php 项目绘制图片

> ID：11516892
> 
> 赞同：-3
> 
> 时间：2012-07-17T06:08:54.680
> 
> 标签：php, image

我必须在我的php网页中添加绘图工具，以便用户可以在线绘制自己的图片，请有人帮我解决这个问题，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:26:57.010

您可以使用 GD 库来完成此类应用程序访问[http://php.net/manual/en/book.image.php](http://php.net/manual/en/book.image.php)了解更多信息

对于前端，您可以使用 java 脚本获取可以在 GD 库中解析的用户绘图坐标以完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:27:16.673

我相信您需要研究`canvas`项目的元素；这不是您只能在服务器端（使用 PHP）做的事情。

# ios - 如何为某些注释“披露按钮”隐藏 rightCalloutAccessoryView

> ID：11516895
> 
> 赞同：1
> 
> 时间：2012-07-17T06:09:05.953
> 
> 标签：ios, ios5, mkannotationview

我只有一个注释类..

出于一个原因，注释只显示标题，它有不同的 pinColor，我通过在注释类中声明一个方法做得很好..

但出于同样的原因我想隐藏披露按钮..

我只知道可以在我的mapview类中使用viewForAnnotation方法声明rightCalloutAccessoryView

那我能做什么？如何通过隐藏披露按钮来更改标注的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T10:56:15.493

回来，我解决了！

我写了一个if语句..来检查注释的标题..

基于这个解决方案..[这里是](https://stackoverflow.com/questions/2066362/mkmapview-display-a-button-for-my-location)

# java - What is the JVMID?

> ID：11516898
> 
> 赞同：4
> 
> 时间：2012-07-17T06:09:38.703
> 
> 标签：java, jvm, weblogic

I joined a new project recently , I see JVMIDs very frequently in the configuration files and Somehow I had never come across JVMIDs in my past projects.

Where can I find it documented , is it something specific to the weblogic servers? Is it meant for precisely identifying a JVM in a clustered environment ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:47:55.593

The JVMID is the ID of the current server instance, I don't believe its WLS specfic.

You can get more information around this via this link [JVMID](http://javasourcecode.org/html/open-source/hadoop/hadoop-1.0.3/org/apache/hadoop/mapred/JVMId.java.html#line.46)

Also this question might be useful.

[Weblogic Apache plugin and session stickiness](https://stackoverflow.com/questions/1871104/weblogic-apache-plugin-and-session-stickiness)

# jquery - 禁止点击一个按钮

> ID：11516901
> 
> 赞同：0
> 
> 时间：2012-07-17T06:09:43.783
> 
> 标签：jquery, html

我试图在单击后从文档中删除一个事件：

```
var allow=true;
$(document).mousemove(function(e){
    if(allow){
       x = e.pageX;
       y = e.pageY;     
       var offTop = y-10;
       var offLeft = x-25;      
       $('iframe').offset({ top: offTop, left: offLeft });
       $('body').on('click',iFrame,function(){
               console.log('I was clicked');
       });
    }
});

$(document).click(function() {
   allow=false;
   $('iframe').remove();
}); 
```

我想在第一次单击文档后删除鼠标后面的 iframe。

但是我的代码似乎不起作用..为什么？

```
UPDATE: 
```

是否可以捕获与任何元素无关的鼠标单击..例如，没有此 $('document').click()//// 但在鼠标左键上单击的任何单击..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:13:53.423

## *[jsBin 演示](http://jsbin.com/ecamot/2/edit)*

这导致您的鼠标指针一直在**iframe**上方！用途：例如：`y+25;`和`x+25;`

```
if(allow){
   x = e.pageX;
   y = e.pageY;

   var offTop = y+25;
   var offLeft = x+25;      
   $('iframe').offset({ top: offTop, left: offLeft });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:17:34.057

尝试这个：

```
var allow=true;

$(document).mousemove(function(e){
    if(allow){
        x = e.pageX;
        y = e.pageY;
        var offTop = y-10;
        var offLeft = x-25;      
        $('iframe').offset({ top: offTop, left: offLeft });
    }    
}); // THIS WAS MISSING

$(document).click(function() {
    allow=false;
    $('iframe').remove();
}); 
```

# ruby-on-rails - 通过 amazon-ses-mailer gem 发送电子邮件时出现 SSL 错误

> ID：11516902
> 
> 赞同：0
> 
> 时间：2012-07-17T06:09:44.437
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, amazon-ses

我发现这篇文章[Using Amazon SES with Rails ActionMailer](https://stackoverflow.com/questions/4798437/using-amazon-ses-with-rails-actionmailer)并按照[https://github.com/abronte/Amazon-SES-Mailer](https://github.com/abronte/Amazon-SES-Mailer)上的示例进行操作，但发送邮件时出现此错误

```
 "SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed" 
```

配置/环境/development.rb：

```
config.action_mailer.delivery_method = AmazonSes::Mailer.new(
    :secret_key => 'AKIAJ*******',
    :access_key => 'Ahs08*********'
) 
```

发送消息：

```
mailer = ActionMailer::Base.delivery_method = AmazonSes::Mailer.new(
    :secret_key => 'AKI*******',
    :access_key => 'Ah***********'
  )
mailer.deliver( UserMailer.test(@this_user.email).encoded ) 
```

为什么我在这里遇到 SSL 错误？我尝试使用带有个人 gmail 帐户的 smtp 进行另一种配置，并且它可以很好地发送电子邮件。SES有问题吗？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:49:57.303

我认为您不再需要 SES Mailer gem。SES 过去仅支持 TLS 包装器，但截至 2012 年 3 月 7 日...

[Amazon SES 现在支持 STARTTLS](https://forums.aws.amazon.com/ann.jspa?annID=1387)

如[this SO question](https://stackoverflow.com/a/9954404/353286)的回答中所述。它应该像...一样简单

```
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
  :address => "email-smtp.us-east-1.amazonaws.com",
  :user_name => "..." # Your SMTP user here.
  :password => "...", # Your SMTP password here.
  :authentication => :login,
  :enable_starttls_auto => true
} 
```

# java - 使用 Java 控制其他应用程序？

> ID：11516905
> 
> 赞同：0
> 
> 时间：2012-07-17T06:10:05.500
> 
> 标签：java, controls, speech

如何使用 Java 控制其他应用程序？

我正在使用 Mary 语音合成器（开源，Java）。它可以很好地合成语音，但它要求文本位于应用程序窗口本身的文本框中，然后单击一个按钮。对于我的这个项目

> 需要实现的文本将从另一个 java 应用程序入站。我需要知道如何将文本放在文本框中并单击应用程序中的一个按钮。

我希望以后能找到一种从缓冲区合成语音的方法，但在那之前，这似乎是一种让事情正常工作的方法。另外，我很确定以后我可以找到其他应用程序，这似乎是一个非常有趣的问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:00:15.027

如果应用程序不提供与之交互的 API，则没有简单的解决方案可以实现。

但是，由于该应用程序是开源的，您可以验证它具有何种类型的许可，并将其部分源代码包含在您的 Java 应用程序中并正确调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:14:46.950

获取其他应用程序的 API 并相应地调用其方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T07:04:36.887

我认为您最好的选择是找到一个进行文本合成的库。由于控制另一个 java 应用程序需要该 java 应用程序提供必要的 API 供您访问它。正如[@Edmondo1984](https://stackoverflow.com/a/11517456/813471)在他的回答中所说，您可以包含来自开源应用程序的部分代码（检查许可证后）。

# jquery - 使用 InstantEdit 2.0 JS 对 mysql 数据进行内联编辑

> ID：11516909
> 
> 赞同：0
> 
> 时间：2012-07-17T06:10:44.630
> 
> 标签：jquery, mysql, inline, edit

我正在尝试在我的 php 页面上对 mysql 数据进行内联编辑。我正在使用找到的示例脚本：[here](http://jointtech.com/tech-stuff/ajax-inline-editor-with-php-and-mysql/)

我所有的代码都显示在这个问题下面。

在浏览到 ajaxtest.php 时，表格数据显示正确。单击表格数据时，我可以对其进行编辑。但是当点击保存数据更改为“假”

有什么想法为什么会这样吗？它与 update.php 上的标题有关吗？

这是我的mysql表代码：

我创建了一个如下表：

```
CREATE TABLE IF NOT EXISTS `tblInLineEdit` (
  `id` int(6) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `descr` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=3 ;

--
-- Dumping data for table `tblInLineEdit`
--

INSERT INTO `tblInLineEdit` (`id`, `name`, `descr`) VALUES
(1, 'carl', 'developer'),
(2, 'angela', 'administration'); 
```

然后我创建了两个页面，ajaxtest.php 和 update.php。代码如下：

**ajaxtest.php**

```
<? 
$db_user = "username";
$db_pass = "password"; // password here
$db = "database";
$host = "localhost";
$link = mysql_connect($host,$db_user,$db_pass) or die("Database connection broken");
mysql_select_db($db,$link) or die("Database connection unavailable – ".mysql_error() );
$result = mysql_query("SELECT * FROM tblInLineEdit");
//$row = mysql_fetch_assoc($result); 
?>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="instantedit.js"></script>
<table>
<? while ($row = mysql_fetch_assoc($result)) { ?>
<tr>
<td><span id="name-|||-<?php echo $row['id']; ?>" class="editText"><? echo $row['name']; ?></span></td> 
<td><span id="descr-|||-<?php echo $row['id']; ?>" class="editText"><? echo $row['descr']; ?></span></td> 
</tr>
<?php } ?>
</table> 
```

**更新.php**

```
<? 
header("Expires: Mon, 26 Jul 2014 05:00:00 GMT"); // Date in the past
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT"); // always modified
header("Cache-Control: no-store, no-cache, must-revalidate, max-age=0"); // HTTP/1.1
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache"); // HTTP/1.0

$db_user = "user";
$db_pass = "password"; // password here
$db = "database";
$host = "localhost";
$link = mysql_connect($host,$db_user,$db_pass) or die("Database connection broken");
mysql_select_db($db,$link) or die("Database connection unavailable – ".mysql_error() );
$content = $_GET['content'];
list($fieldname, $id) = explode("-|||-",$_GET['fieldname']);
mysql_query("UPDATE tblInLineEdit SET $fieldname = ‘$content’ WHERE id = $id ") or die("blah failure – ".mysql_error() );
$result = mysql_query("SELECT * FROM tblInLineEdit WHERE id = $id");
$row = mysql_fetch_assoc($result);
echo $row["{$fieldname}"]; 
?> 
```

关于为什么它返回错误的任何想法？

提前感谢您的帮助。

或者，任何人都可以为 mysql 推荐一个易于实现的轻量级内联编辑器吗？

一如既往地感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T06:28:54.647

尝试调试您的客户端脚本。使用 Firebug 或 Chrome 的开发者工具查看产生的错误。您的链接在我的浏览器中的页面加载时产生以下错误：

该页面似乎不存在。

我不确定您要完成什么。但如果这是实际项目的早期阶段，我建议考虑进行更多研究。也许一些关于面向服务的架构的研究可以帮助你很多。您可以提出的最佳实践之一是使用 Zend Framework 的 JSON 服务器。我本人已经开发了一个框架，如果您的项目规模变得更大，该框架可能对您有用。它叫[石榴](http://pome-framework.sourceforge.net)，也许你想看看它。

# mysql - “显示完整进程列表”没有显示耗时的进程，但我的脚本耗时太长

> ID：11516910
> 
> 赞同：1
> 
> 时间：2012-07-17T06:10:47.417
> 
> 标签：mysql

我有一个脚本驻留在我的网络服务器的 cron 上，应该每晚运行。由于超过了网络服务器对 cron 作业设置的时间限制，它最近已停止运行。它曾经运行良好。每当我手动运行它时，它都非常快（不到 5 分钟）。不知不觉，需要半个多小时。

该脚本基本上更新了 MySQL 数据库。根据他们的说法，数据库约为 60mb。我似乎找不到这些信息，但它似乎是合理的（尽管我每晚传输到服务器的文件只有 2mb 左右）。

我已经采取了他们建议的步骤来优化我的数据库，但实际上并没有什么结果。脚本运行仍然需要很长时间。脚本所做的只是从数据库中删除所有内容，然后用我们更新的库存再次填充它。

所以现在我在一个 Putty 窗口上运行“显示完整进程列表”，同时在另一个窗口中运行脚本。“显示完整进程列表”仅显示几个项目，这两个项目都显示为 0。

```
mysql> show full processlist;
+-----------+--------------+--------------------+-------------------------+---------+------+-------+-----------------------+
| Id        | User         | Host               | db                      | Command | Time | State | Info                  |
+-----------+--------------+--------------------+-------------------------+---------+------+-------+-----------------------+
| 142841868 | purposely omitted | purposely omitted | purposely omitted_net_-_main | Sleep   |    0 |       | NULL                  |
| 142857238 | purposely omitted | purposely omitted | NULL                    | Query   |    0 | NULL  | show full processlist |
+-----------+--------------+--------------------+-------------------------+---------+------+-------+-----------------------+
2 rows in set (0.05 sec) 
```

如果我继续非常快速地使用 show full processlist 命令，有时我可以捕捉到此表中列出的其他内容，但下次我运行它时它们会消失。这向我表明，它们的处理速度非常快！

那么有人知道出了什么问题吗？我对此很陌生:(

谢谢！！

PS这是我的代码

```
#!/usr/bin/perl
use strict;
use DBI;
     my $host = 'PURPOSLEY OMITTED';
     my $db = 'PURPOSLEY OMITTED';
     my $db_user = 'PURPOSLEY OMITTED';
     my $db_password = "PURPOSLEY OMITTED";

my $dbh = DBI->connect("dbi:mysql:$db:$host", "$db_user", "$db_password");
$dbh->do("DELETE FROM main");
$dbh->do("DELETE FROM keywords");

open FH, "PURPOSLEY OMITTED" or die;

while (my $line = <FH>) {

my @rec = split(/\|/, $line);

print $rec[1].' : '.$rec[2].' : '.$rec[3].' : '.$rec[4].' : '.$rec[5].' : '.$rec[6].' : '.$rec[7];

$rec[16] =~ s/"//g;
$rec[17] =~ s/"//g;
$rec[13] =~ chomp($rec[13]);

my $myquery = "INSERT INTO main (medium, title, artist, label, genre, price, qty, catno,barcode,created,received,tickler,blurb,stockid) values (\"$rec[0]\",\"$rec[1]\",\"$rec[2]\",\"$rec[3]\",\"$rec[4]\",\"$rec[5]\",\"$rec[6]\",\"$rec[7]\",\"$rec[8]\",\"$rec[9]\",\"$rec[10]\",\"$rec[11]\",\"$rec[12]\",\"$rec[13]\")"; 

$dbh->do($myquery);

$dbh->do("INSERT IGNORE INTO keywords VALUES (0, '$rec[2]','$rec[13]')");
$dbh->do("INSERT LOW_PRIORITY IGNORE INTO keywords VALUES (0, \"$rec[1]\", \"$rec[13]\")");

print "\n";
}
close FH;

$dbh->disconnect(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:50:11.127

我有两个建议：

1.  （影响较小）使用`TRUNCATE`而不是`DELETE`，它明显更快，并且当您不需要担心自动递增值时特别容易使用。
2.  稍微重组以分批为插入工作。通常我通过保持一个给定大小的堆栈变量来做到这一点（从 20 行开始），对于前 20 行，它只是填充堆栈；但在第 20 行，它实际上也执行插入并重置堆栈。这可能会令您难以置信这能在多大程度上提高性能:-)

伪代码：

```
const buffer_size = 20
while(row) {
  stack.addvalues(row.values)
  if(stack.size >= buffer_size) {
    // INSERT INTO mytable (fields) VALUES stack.all_values()
    stack.empty()
  } 
```

然后玩“缓冲区”大小。我见过脚本，其中一次将缓冲区调整到 100-200 行以上，几乎可以将大量导入速度提高很多倍（即执行单个 INSERT 的“开销”涉及大量不成比例的工作（网络， ETC）

# php - wordpress 展开折叠页面

> ID：11516911
> 
> 赞同：0
> 
> 时间：2012-07-17T06:10:56.123
> 
> 标签：php, jquery, wordpress

我在 wordpress 中获得了一个正在开发的 CMS 站点。我现在正在学习 html、css、php、jquery、ajax 并且当然在 wordpress 上进行研究。

所以我的网站应该看起来像这样

![在此处输入图像描述](../Images/d35fa15b1a722d5e08d10b800395f557.png)

现在在这个

只显示一页...**主页**

我在 wordpress 中创建了 3 个页面（关于、主页、人员）（Wordpress--->Pages---->new page--->write content）

1）在如图所示的主页中，我想要 3 个面板（关于、主页、人员），当主页页面打开时，所有这些面板都**折叠**起来

2）但是一旦点击主页，它应该展开主页面板并在那里显示页面内容而不重新加载页面。其他面板应该同时折叠。

3）单击菜单栏项（关于或任何其他）时，同名面板应展开..

如果有任何人们知道的网站会以某种方式回答我的问题，请转发。

**编辑1**

[我从网站http://jqueryui.com/download](http://jqueryui.com/download)下载了 jquery 示例

我想要 collapsible.html 示例中的标签

现在下面的代码是page.php

```
 <?php wp_enqueue_script("jquery"); // added this line  16-7-2012
?>

    <script type="text/javascript" src="<?php bloginfo('template_directory');          ?>/js/jquery-1.7.2.js"></script>
    <script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/js/jquery.ui.core.js"></script>
   <script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/js/jquery.ui.widget.js"></script>
  <script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/js/query.ui.accordion.js"></script>

   <link rel="stylesheet" href="<?php bloginfo('stylesheet_url'); ?>/js/demos.css" type="text/css" media="screen" />
   <link rel="stylesheet" href="<?php bloginfo('stylesheet_url');  ?>/js/jquery.ui.all.css" type="text/css" media="screen" />

<script>
$(function() {
    $( "#accordion" ).accordion({
        collapsible: true
    });
});
</script>

   <?php get_header(); ?>

<div class="content">

<?php if (have_posts()) : ?>

    <?php $page_id=1332;?>
<?php get_page( $page_id ) ?> 

    <?php while (have_posts()) : the_post(); ?>

        <h1><?php the_title(); ?></h1>

        <?php the_content('Read more'); ?>

    <?php endwhile; ?>
</div>

<?php else : ?>

    <h2 class="center">Not Found</h2>
    <p class="center">Sorry, but you are looking for something that isn't here.</p>
    <?php include (TEMPLATEPATH . "/searchform.php"); ?>

<?php endif; ?>

 <?php if (is_single()) comments_template(); ?>

</div>

 <?php get_sidebar(); ?>

<?php get_footer(); ?> 
```

因为它加载了所有页面。在 WP 页面（内容部分）中，我编写了 jquery 示例中给出的 html 代码，即以下代码：

```
 <div id="accordion">
  <h3><a href="#">Section 1</a></h3>
   <div>
    <p>Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo ut odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate.</p>
</div>
  <h3><a href="#">Section 2</a></h3>
  <div>
    <p>Sed non urna. Donec et ante. Phasellus eu ligula. Vestibulum sit amet purus. Vivamus hendrerit, dolor at aliquet laoreet, mauris turpis porttitor velit, faucibus interdum tellus libero ac justo. Vivamus non quam. In suscipit faucibus urna. </p>
</div>
  <h3><a href="#">Section 3</a></h3>
  <div>
    <p>Nam enim risus, molestie et, porta ac, aliquam ac, risus. Quisque lobortis. Phasellus pellentesque purus in massa. Aenean in pede. Phasellus ac libero ac tellus pellentesque semper. Sed ac felis. Sed commodo, magna quis lacinia ornare, quam ante aliquam nisi, eu iaculis leo purus venenatis dui. </p>
    <ul>
        <li>List item one</li>
        <li>List item two</li>
        <li>List item three</li>
    </ul>
</div>
<h3><a href="#">Section 4</a></h3>
<div>
    <p>Cras dictum. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Aenean lacinia mauris vel est. </p><p>Suspendisse eu nisl. Nullam ut libero. Integer dignissim consequat lectus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. </p>
</div> 
```

但它显示为纯文本，没有手风琴标签

![在此处输入图像描述](../Images/5efdad62f49d42a920690b14d33e8af5.png)

**编辑2**

```
 function{
  $(function() {
      $( "#accordion" ).accordion({
        collapsible: true
      });
  })}; 
```

**编辑3**

```
 jQuery(document).ready(function(){   
  $(function() {
    $( "#accordion" ).accordion({
        collapsible: true
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:39:46.333

至于可折叠部分，您可以使用 jquery ui 手风琴。：http: [//jqueryui.com/demos/accordion/](http://jqueryui.com/demos/accordion/)

最简单的方法是不使用 ajax 并在主页面中呈现所有页面。请参阅[http://codex.wordpress.org/Function_Reference/get_page](http://codex.wordpress.org/Function_Reference/get_page)和[wordpress：如何在一页上显示多个页面？](https://stackoverflow.com/questions/1309382/wordpress-how-can-i-display-multiple-pages-on-one-page)

在那里，您只需要修改`index.php`主题中的文件。

--

您还可以通过 ajax 加载页面内容，如下所述： [jQuery Accordion and loading content through AJAX](https://stackoverflow.com/questions/646415/jquery-accordion-and-loading-content-through-ajax)

为此，您还需要修改`page.php`模板以仅显示内容，没有页眉/页脚。

# facebook-graph-api - 在 iOS 中使用 Facebook API 将通知标记为已读

> ID：11516912
> 
> 赞同：0
> 
> 时间：2012-07-17T06:10:57.997
> 
> 标签：facebook-graph-api, notifications

我在 StackOverflow 上引用了一些关于这个问题的问题，但似乎没有任何效果。

**代码：**

```
NSMutableDictionary *dc = [NSMutableDictionary dictionaryWithObjectsAndKeys:@"0", @"unread", nil];
[facebook requestWithGraphPath:@"21306691" andParams:dc andHttpMethod:@"POST" andDelegate:self]; 
```

`21306691`是`notification_id`。我确信我得到了`manage_notifications`许可。

请帮助我，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T10:05:57.867

```
notif_recipient_id_notificationid 
```

`notif`关键字 在哪里`recipient_id`，登录的 facebook 用户 `notificationid`的 id 是通知的 id（你得到的）。

使用上述模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T03:09:05.847

我认为您的通知 ID 错误！我得到这样的格式：`notif_524065381_15010202`通知 ID！

始终检查[Graph API Explorer](https://developers.facebook.com/tools/explorer)以查看您的 Facebook 请求是否有效，如果是，请查看您的代码！

# arrays - how_remove_noise

> ID：11516917
> 
> 赞同：0
> 
> 时间：2012-07-17T06:11:23.610
> 
> 标签：arrays, plot, noise-reduction

我想知道如何从数据中去除噪声（例如，无线电数据，它是一个由行和列组成的数组，每个数据点代表给定频率和时间的辐射强度）。该数组可以包含无线电脉冲。但是也存在很多固定频率的无线电噪声（RFI=radio frequency interreference）。如何去除这种噪声，只带出突发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:30:20.863

我不是故意粗鲁，但这个问题根本不清楚。请把它削尖。

去除噪声的正常方法是首先对其进行精确定义，然后将其过滤掉。通常这是在频域中完成的。例如，如果您知道`P(f)`噪声的归一化功率谱，则构建一个具有响应的滤波器

```
e/(e + P(f)) 
```

其中`e<1`是衰减因子。

您可以使用 FFT 或卷积核以数字方式实现滤波器。

当您不知道噪声的频谱或当它是白色时，只需使用信号频带的倒数即可。

# visual-studio-2008 - 如何从 Visual Studio 2008 的工具箱中恢复丢失的控件？

> ID：11516922
> 
> 赞同：0
> 
> 时间：2012-07-17T06:11:37.743
> 
> 标签：visual-studio-2008, toolbox

我正在使用 windows7 和 Visual Studio 2008。工具箱中缺少 datalist 工具。如何恢复工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:28:04.520

如果您右键单击工具箱的面板，您将看到一个弹出菜单，其中包含重置工具箱的选项。这将使您的工具箱恢复出厂设置，如果您手动添加任何内容，它们将被重置。同样通过在同一面板中右键单击并选择“选择项目”，您可以在“选择项目”表单中选择 .Net Framework 组件选项卡，然后从那里选择您缺少的项目。

![在此处输入图像描述](../Images/114eb24cf27f95373150276e8bd9bd76.png)

和

![在此处输入图像描述](../Images/e38b0753f26b5eb9b2e671f89c24189f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:28:17.863

尝试在工具箱面板和“重置工具箱”上单击鼠标右键

# sql - 即使每天获得 1 条记录也包括 2 条不同的记录

> ID：11516928
> 
> 赞同：0
> 
> 时间：2012-07-17T06:12:10.560
> 
> 标签：sql, sql-server-2008

有一个表格显示员工的日常计划。

```
SELECT COUNT(*) AS TotalDay FROM [User]
    INNER JOIN [x] ON [x].UserID = [User].ID  
WHERE       
        StartTime BETWEEN '20120611' AND '20120618' AND UserID = 20
GROUP BY [User].ID, [User].Name
ORDER BY Name 
```

它返回 7 条记录。因为一天之内，一个用户（UserID）可以去两个不同的地方。

例如，该用户从 20120611 08:30:00 到 20120611 13:30:00 去 A 地，从 20120611 14:00:00 到 20120611 19:00:00 去 B 地

当我使用以下查询时，这将返回 2 条记录。

```
SELECT COUNT(*) AS TotalDay FROM [User]
     INNER JOIN [x] ON [x].UserID = [User].ID  
WHERE       
        StartTime = '20120611' AND UserID = 20
GROUP BY [User].ID, [User].Name
ORDER BY Name 
```

但我想获得一张记录，因为那是一天之内的手术。

那么我怎样才能得到它呢？

我使用 MSSQL。StartTime 是 sql 中的日期时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:32:43.653

你需要按日期分组吗？

```
SELECT COUNT(*) AS TotalDay FROM [User]
 INNER JOIN [x] ON [x].UserID = [User].ID  
WHERE       
    StartTime = '20120611' AND UserID = 20
GROUP BY [User].ID, [User].Name, cast(floor(cast(starttime as float)) as datetime)
ORDER BY Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:35:01.687

尝试在您的 where 子句中执行以下操作：

```
DATEADD(DD, DATEDIFF(DD, 0, STARTTIME), 0)  BETWEEN DATEADD(DD, DATEDIFF(DD, 0, <DATE_TIME_PARAMETER>), 0) AND DATEADD(DD, DATEDIFF(DD, 0, <DATE_TIME_PARAMETER>), 0) 
```

您还需要按上述日期部分对结果进行分组。

# c++ - 重载运算符 >> 像 std::cout

> ID：11516932
> 
> 赞同：1
> 
> 时间：2012-07-17T06:12:32.010
> 
> 标签：c++

我想创建一个类似于 std::cout 的类。我知道如何重载 >> 和 << 运算符，但我想重载 << 运算符，以便它成为**input**，就像在 std::cout 中一样。

它应该是这样的：

```
class MyClass
{
   std::string mybuff;
 public:
   //friend std::???? operator<<(????????, MyClass& myclass)
   {
   }
}
.
.
.

  MyClass class;
    class << "this should be stored in my class" << "concatenated with this" << 2 << "(too)"; 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T06:13:09.093

```
class MyClass
{
    std::string mybuff;
 public:
    //replace Whatever with what you need
    MyClass& operator << (const Whatever& whatever)
    {
       //logic
       return *this;
    }

    //example:
    MyClass& operator << (const char* whatever)
    {
       //logic
       return *this;
    }
    MyClass& operator << (int whatever)
    {
       //logic
       return *this;
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:40:52.247

我认为最普遍的答案是：

```
class MyClass
{
   std::string mybuff;
 public:
   template<class Any>
   MyClass& operator<<(const Any& s)
   {
          std::stringstream strm;
          strm << s;
          mybuff += strm.str();
   }

   MyClass& operator<<( std::ostream&(*f)(std::ostream&) )
   {
    if( f == std::endl )
    {
        mybuff +='\n';
    }
    return *this;
}
} 
```

std::endl 是从 Timbo 的答案粘贴在[这里](https://stackoverflow.com/questions/2212776/overload-handling-of-stdendl)

感谢您的回答！

# arm - 裁剪的高效霓虹灯实现

> ID：11516935
> 
> 赞同：2
> 
> 时间：2012-07-17T06:12:53.867
> 
> 标签：arm, simd, neon

在一个循环中，我必须实现一种**剪辑**

```
if ( isLast )
{
    val = ( val < 0 ) ? 0 : val;
    val = ( val > 255 ) ? 255 : val;        
} 
```

然而，这种“剪辑”几乎占据了Neon 循环**执行时间的一半。**这就是整个**循环**的样子——

```
for (row = 0; row < height; row++)
{
  for (col = 0; col < width; col++)
  {
      Int sum;
      //...Calculate the sum

      Short val = ( sum + offset ) >> shift;
      if ( isLast )
      {
           val = ( val < 0 ) ? 0 : val;
           val = ( val > 255 ) ? 255 : val;        
      }
      dst[col] = val;
   }

} 
```

这就是在**Neon中实现****剪辑的方式**

 **```
 cmp       %10,#1                           //if(isLast)         
     bne       3f                                         
     vmov.i32   %4, d4[0]                       //put val in %4
     cmp       %4,#0                            //if( val < 0 )
     blt       4f                               
     b         5f                               
     4:                                         
     mov       %4,#0                             
     vmov.i32   d4[0],%4                        
     5:                                         
     cmp       %4,%11                          //if( val > maxVal )
     bgt       6f                               
     b         3f                               
     6:                                         
     mov       %4,%11                            
     vmov.i32   d4[0],%4                       
     3: 
```

这是变量到寄存器的映射-

```
isLast-    %10
maxVal-    %11 
```

有什么建议可以让它更快吗？谢谢

# 编辑-

**剪辑现在**看起来像 -

```
 "cmp       %10,#1                            \n\t"//if(isLast)      
     "bne       3f                                \n\t"          
     "vmin.s32   d4,d4,d13                        \n\t"
     "vmax.s32   d4,d4,d12                        \n\t"
     "3:                                          \n\t" 

//d13 contains maxVal(255)
//d12 contains 0 
```

这部分代码消耗的时间从**223ms 下降到了 18ms**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T08:45:09.257

对 NEON 使用普通比较几乎总是一个坏主意，因为它强制 NEON 寄存器的内容进入通用 ARM 寄存器，这会花费很多周期。

您可以使用 vmin 和 vmax NEON 指令。这是一个将整数数组限制为任何最小值/最大值的小示例。

```
void clampArray (int minimum,
                 int maximum,
                 int * input,
                 int * output,
                 int numElements)
{
  // get two NEON values with your minimum and maximum in each lane:
  int32x2_t lower  = vdup_n_s32 (minimum);
  int32x2_t higher = vdup_n_s32 (maximum);
  int i;

  for (i=0; i<numElements; i+=2)
  {
    // load two integers
    int32x2_t x = vld1_s32 (&input[i]);

    // clamp against maximum:
    x = vmin_s32 (x, higher);

    // clamp against minimum
    x = vmax_s32 (x, lower);

    // store two integers
    vst1_s32 (&output[i], x);
  }
} 
```

警告：此代码假定 numElements 始终是 2 的倍数，我尚未对其进行测试。

如果您使用 vminq / vmaxq 指令一次处理四个元素并在每次迭代中加载/存储四个整数，您甚至可以使其更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T06:33:11.580

如果 maxVal 是 UCHAR_MAX、CHAR_MAX、SHORT_MAX 或 USHORT_MAX，您可以简单地使用 neon 从 int 转换为您想要的数据类型，通过饱和转换。

举例

```
// Will convert four int32 values to signed short values, with saturation.
int16x4_t vqmovn_s32 (int32x4_t) 

// Converts signed short to unsgigned char, with saturation
uint8x8_t vqmovun_s16 (int16x8_t) 
```

如果您不想使用多数据功能，您仍然可以通过简单地加载和读取其中一条通道来使用这些指令。**

# android - 为三星 Galaxy s2 和 Galaxy s3 开发应用程序时，我应该使用什么模拟器分辨率？

> ID：11516941
> 
> 赞同：2
> 
> 时间：2012-07-17T06:13:14.537
> 
> 标签：android, android-layout, screen-orientation, samsung-mobile

根据我的发现，三星 Galaxy s2 的分辨率为 480x800，s3 的分辨率为 1280x720。所以我相信我应该请我的图形设计师为我提供`hdpi`包含 480x800 背景图像的图形，并在 Galaxy s3 移动版中实现相同的背景图像。我可以使用大小为 1280x720 的图像并将其放在`xhdpi`文件夹中，以便它可以在 s3 上运行。

背景图像覆盖了移动应用程序的整个可用区域。所以我在这种方法上是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:01:08.490

为什么不在两种分辨率下进行设计？有关详细信息，请参阅[http://developer.android.com/guide/practices/screens_support.html 。](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:46:48.573

您应该阅读支持多个屏幕。您必须在模拟器上定义 dpi。240 是 hdpi，160 是 mdpi，低于通常是 ldpi。

摘自上面的 Android 开发者指南链接：

320dp：典型的手机屏幕（240x320 ldpi、320x480 mdpi、480x800 hdpi 等）。
480dp：像 Streak (480x800 mdpi) 这样的补间平板电脑。
600dp：7 英寸平板电脑 (600x1024 mdpi)。
720dp：10 英寸平板电脑（720x1280 mdpi、800x1280 mdpi 等）。

# python - 使用带有自定义文件头的sqlite 3版本在python中安装pysqlite

> ID：11516944
> 
> 赞同：0
> 
> 时间：2012-07-17T06:13:43.313
> 
> 标签：python, pysqlite

我想用自定义文件头编译 sqlite 我按照这里给出的步骤[http://trac.edgewall.org/wiki/PySqlite](http://trac.edgewall.org/wiki/PySqlite)

```
Download pysqlite 
Extract it 
export  CFLAGS="-DSQLITE_FILE_HEADER=\\\"vivek\\\"" 
Run  python   setup.py build_static 
python   setup.py install  -f 
```

但是当运行 python 并检查 sqlite 版本时

```
>>> import sqlite3
>>> sqlite3.version
'2.6.0' 
```

它正在提供旧版本的 sqlite。我认为应该是 3。我尝试打开数据库，但出现错误

```
 sqlite3.DatabaseError: file is encrypted or is not a database

Python Version

python --version
Python 2.7.3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:22:14.653

从 Trac 站点上 PySqlite 页面的顶部：

> 如果您使用的是 Python 2.5 及更高版本，则您已经拥有一个工作版本的 pysqlite 2，捆绑为 sqlite3。你可以停在这里;-)

您使用的是 python 2.7，因此*无需*安装自定义版本。pysqlite 已经与您的 python 版本捆绑在一起。

`pysqlite`是使 sqlite 可用于 python 的“粘合剂”。您的系统 sqlite 本身需要升级，而不是胶水库。

请参阅[如何在 Python 2.6 中升级 sqlite3 包？](https://stackoverflow.com/questions/3333095/how-can-i-upgrade-the-sqlite3-package-in-python-2-6)

# java - eclipse不识别servlet

> ID：11516946
> 
> 赞同：0
> 
> 时间：2012-07-17T06:13:52.460
> 
> 标签：java, eclipse, jakarta-ee, eclipse-juno

我遇到了一个非常严重和奇怪的问题。当我在 eclipse juno 中创建 servlet 时，它无法识别它的方法和注释。我不知道为什么会这样。我将 eclipse juno 与 glassfish 服务器一起使用。在我的另一台电脑上，同样的 glassfish 服务器安装了 eclipse indigo 和它工作正常。请指导我解决这个问题
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:17:13.283

请右键单击
项目-> 构建路径-> 配置构建路径
单击库选项卡
现在这里要么您的服务器不正确，要么 jre 系统库。
编辑错误的路径:)
谢谢

# matlab - 如何使cumsum这个矩阵

> ID：11516948
> 
> 赞同：2
> 
> 时间：2012-07-17T06:13:59.450
> 
> 标签：matlab, matrix, sum, cumulative-sum

```
A= [ 1 2 4
     2 3 1
     3 1 2 ] 
```

所以上面矩阵的答案应该是：

```
B = [ 1  3  7 
      9 12 13 
     16 17 19 ] 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T07:04:24.687

摆弄`cumsum`并`reshape`可以让你到达那里：

```
B = reshape(cumsum(reshape(A', 1, [])), size(A))'
%# Equivalent to: B = A'; B = reshape(cumsum(B(:)), size(A))' 
```

这产生：

```
B =

     1     3     7
     9    12    13
    16    17    19 
```

# javascript - 从 web 服务获取数据并将其设置为 javascript 中的变量

> ID：11516949
> 
> 赞同：0
> 
> 时间：2012-07-17T06:14:01.597
> 
> 标签：javascript, web-services

我需要从 javascript 中的 web 服务 url 获取数据。我将响应代码设为 200，但未从 url 获取任何数据。以下是代码

```
var xmlDoc = null;
url = 'http://localhost:8458/service1.svc/geturl';

if (window.XMLHttpRequest) {
    xmlDoc = new XMLHttpRequest(); //Newer browsers
}
else if (window.ActiveXObject) //IE 5, 6
{
    xmlDoc = new ActiveXObject("Microsoft.XMLHTTP");
}

if (xmlDoc) {

    xmlDoc.onreadystatechange = function () {
        if (xmlDoc.readyState == 4 && xmlDoc.status === 200) {
                alert(xmlDoc.responseText);
            }

        }
        xmlDoc.open("GET", url, true);
        xmlDoc.send(); 
```

我写的服务返回字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:25:23.413

我建议为此使用 jQuery：

```
var request_url = 'http://localhost:8458/service1.svc/geturl';

$.ajax({
  url: request_url,
  type: "POST",
  dataType: "html",
  success: function(response){
     // Do something with your response here
     alert(response);
  }
}); 
```

# jquery - 单击后退按钮时如何保留下拉值

> ID：11516951
> 
> 赞同：0
> 
> 时间：2012-07-17T06:14:19.040
> 
> 标签：jquery, drop-down-menu

我的第一页有 4 个下拉菜单。当我选择第一个下拉菜单时，有一个 Ajax 调用将过滤其他 3 个下拉菜单数据，然后单击提交按钮以显示第二页。现在当我单击后退按钮时，第一页中的下拉菜单必须保留数据。只有第一个下拉菜单保留数据，其他 3 个下拉菜单包含初始数据（未过滤数据）。所以我在加载函数上进行 Ajax 调用以查看是否选择了第一个下拉列表，然后我正在过滤其他 3 个下拉列表。这里的问题是如何将下拉框选择值设置为默认值。我曾经这样使用过：`$('#hospital').val(varHospital);` 但它没有设置它。您如何设置下拉菜单以在 java 中的 JQUERY 中默认选择某个值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:34:32.643

```
$('#hospital').val(varHospital); 
```

是正确的。您必须确保`varHospital`包含`<option>`标签的值而不是文本，即

```
<option value="varHospital">Text</option> 
```

当您调用上面的 jQuery 行时，将选择 Option with `varHospital`。如果`varHospital`选择列表中不存在，则不会有任何变化。

# etl - SSIS vs Pentaho

> ID：11516954
> 
> 赞同：6
> 
> 时间：2012-07-17T06:14:42.390
> 
> 标签：etl, ssis, pentaho

有没有人使用这两个来提供一个很好的比较。我正在做一个学校项目，所以 SSIS 的成本不是问题，因为我们已经拥有它的许可证。

关于发生了什么的背景。我会将大约 10 年的专利信息下载到平面文件中。结果将是 2,080 个分隔文件。我想要一种方法将它们一次全部加载到 MS SQL 服务器中。然后我希望能够在发布时将其他文件附加到数据库中。

软件的速度并不困扰我，因为我可以让它在一夜之间运行。我只是在寻找具有一定灵活性的东西，更重要的是相当容易使用。我以前从来没有做过这样的项目，并且将在董事会上学习如何做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T22:26:28.033

在真实的现场项目中都使用过。我确实更喜欢 Pentaho (PDI) 而不是 SSIS，因为它易于使用和灵活。在开始使用它之前，请先阅读一些关于该主题的内容。有几本关于水壶 (PDI) 的优秀书籍，或者您可以阅读 PDI 帮助菜单中的入门。如果您在 IRC 上被卡住或##pentaho，论坛是一个好地方。您可以在欢迎屏幕中找到的示例也很有帮助。我希望你喜欢它，我知道我仍然喜欢。自 2006 年以来一直在使用它，当我必须在某些项目上使用 SSIS 时总是很生气 :-)

PS：使用 jtds jdbc-driver 连接到 SQL Server 数据库，它会为您省去一些麻烦

希望这可以帮助，

巴特

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T07:11:20.810

在花了几天时间在 PDI 和 SSIS 中开发 ETL 包之后，我有信心说 PDI 肯定对用户更加友好。仅用户界面就更干净了，并且似乎以一种非常直观且易于使用的方式流动。

# iphone - Xcode 4.3.2 - 无法添加 armv6 架构

> ID：11516959
> 
> 赞同：2
> 
> 时间：2012-07-17T06:15:14.310
> 
> 标签：iphone, ios, xcode, armv7, armv6

我正在努力将应用程序分发到应用程序商店 - 显然，这是第一次。我希望我的应用程序支持旧版本，如 iOS 3 和 iOS 4。所以，我发现我需要将架构值更改为`armv6 and armv7`. 但`Xcode 4.3.2`只显示`armv7`。所以，我做了一个谷歌搜索并找到以下两个链接：

*   [armv6 缺失](http://www.idev101.com/code/Xcode/Xcode4/armv6_armv7.html)
*   [警告 iPhone 应用程序应该包含 armv6 架构，即使有构建配置集](https://stackoverflow.com/q/4198676/851432)

我按照教程添加`armv6`架构。请参阅屏幕截图。

![Xcode 截图 - 没有 armv6](../Images/a2698ec13b504ed75e23f85c642f4449.png)

看，只有`armv7`存在。

![没有可用的完成按钮](../Images/0aae88c34e86b87a3fca315fbf0827f8.png)

现在，这是我的问题。正如上面两个链接所说，我选择了另一个选项。然后替换`$(ARCHS_STANDARD_32_BIT)`为`armv6`和`armv7`。**但是没有完成按钮**。在没有那个`Done`按钮的情况下，我到底是如何应用这些设置的？从上面的链接中查看下图。他们有一个`Done`按钮。但是，为什么不适合我呢？

![来自上面链接的图像，带有完成按钮](../Images/d10ec5e79f937b8fec648126842ee5f2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T06:31:13.170

单击弹出框外的任意位置。它将关闭弹出窗口并应用您的设置。带有完成按钮的屏幕截图来自较旧的 Xcode 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T06:21:29.303

根据我的经验：

1 尝试将设置窗口移动一点距离。

2 三个彩色按钮将显示在设置窗口的左上角。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T06:42:10.553

希望你得到正确的答案。

但是这个 SOF 问题现在或以后也可以帮助你解决这个架构相关的事情。

[如何使用 iOS 5 构建 armv6 和 armv7 架构](https://stackoverflow.com/questions/7488657/how-to-build-for-armv6-and-armv7-architectures-with-ios-5)

# ios - 触摸 UITextField 时如何制作“取消”按钮的动画

> ID：11516960
> 
> 赞同：2
> 
> 时间：2012-07-17T06:15:26.750
> 
> 标签：ios, animation, uitextfield

我现在正在创建一个具有 Safari 之类的浏览器的应用程序：
在视图顶部的 UINavigationBar 中插入了一个 UITextField（左侧）和 UISearchBar（右侧）。
我想知道是否有一种方法可以在用户触摸 UITextField 时出现的“取消”按钮上添加动画。
动画就像在 Safari 上一样：当用户触摸 UITextField 时，“取消”按钮来自窗口的右侧，而 UISearchBar 正在消失。
请注意，我正在通过 UIBarbuttonItem(UIBarButtonSystemItemCancel) 初始化“取消”按钮。
任何帮助，将不胜感激。

更新：最后我自己找到了答案。似乎您无法指定 UIBarButtonItem 显示或隐藏的特定位置。所以解决这个问题的一种可能方法是自定义一个 UIButton，看起来就像 UIBarButtonItem，下面是代码：

```
-(void)viewDidLoad {
    ......
    CGSize backgroundStretchPoints = {4, 2};
    UIImage *image = [[UIImage imageNamed:@"UINavigationBarDefaultButton.png"] stretchableImageWithLeftCapWidth:backgroundStretchPoints.width
                                                                                               topCapHeight:backgroundStretchPoints.height];
    button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.frame = CGRectMake(330, 23, 80, 30); // initialize the button outside the window
    [button setBackgroundImage:image forState:UIControlStateNormal];
    [button setTitle:@"Cancel" forState:UIControlStateNormal];
    button.titleLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:12];
    [button addTarget:self action:@selector(cancelButtonPressed) forControlEvents:UIControlEventTouchUpInside];
    [navigationBar addSubview: button];
    .......
} 
```

当您单击 UITextField(ie) 时，取消按钮将滑入窗口：

```
-(void)textFieldDidBeginEditing:(UITextField *)textField {
    [UIView animateWithDuration:0.25 animations:^{
        button.frame = CGRectMake(232, 23, 80, 30);  // here is the position button will slide into window with animation
    }]; 
```

}

# javascript - 如何将 JSON 从 PHP 获取到 JS？

> ID：11516962
> 
> 赞同：9
> 
> 时间：2012-07-17T06:15:43.780
> 
> 标签：javascript, json, getjson

我真的已经搜索了将近 2 个小时，但还没有找到一个关于如何将 JSON 数据从 PHP 传递到 JS 的好例子。我在 PHP 中有一个 JSON 编码脚本，它回显出一个看起来或多或少像这样的 JSON 脚本（伪代码）。

```
{
"1": [
  {"id":"2","type":"1","description":"Foo","options:[
    {"opt_id":"1","opt_desc":"Bar"},
    {"opt_id":"2","opt_desc":"Lorem"}],
  {"id":"3","type":"3","description":"Ipsum","options:[
...
"6":
  {"id":"14","type":"1","description":"Test","options:[
...
etc 
```

问题是，如何使用 JavaScript 获取这些数据？我的目标是制作一个基于这些 JSON 数据生成投票的 .js 脚本，但老实说，我找不到任何关于如何做到这一点的示例。猜测是这样的：

```
Obj jsonData = new Object();
jsonData = $.getJson('url',data,function()){
  enter code here
} 
```

任何好的例子或类似的链接都将受到高度赞赏。而且我认为在 PHP 中编码数据是棘手的部分......

**编辑：**

我得到了这个代码片段，所以我可以在 JS 中查看我的整个 JSON 数据。但现在我似乎无法弄清楚如何获取内部数据。它确实打印出阶段编号（1-6），但我无法弄清楚如何获取问题数据，然后再打印每个问题中的选项数据。我是否必须尝试嵌套每个循环？

```
$(document).ready(function()
    {       
        $('#show-results').click(function() 
        {
            $.post('JSAAN.php', function(data) 
            {
                var pushedData = jQuery.parseJSON(data);
                $.each(pushedData, function(i, serverData)
                {
                    alert(i);
                })
            })
        })
    }); 
```

这里的想法是进入中间级别的问题信息并打印出问题描述，然后根据问题类型 - 在继续下一个问题之前循环选项（如果有）以创建复选框/单选按钮组. 第一个数字代表我目前正在进行的多阶段民意调查的哪个阶段。我的计划是通过隐藏/显示各种 div 将其分为 6 个阶段，直到通过 Ajax 提交表单的最后一页。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T06:21:31.407

不确定，但我认为，你可以使用

```
$.getJSON('url', data, function(jsonData) {                       
  // operate on return data (jsonData)    
}); 
```

现在您可以访问和操作 PHP json 数据，如果您要在 getJson 调用之外使用它，您可以将它分配给一个变量

```
var neededData; 
$.getJSON('url', data, function(jsonData) {
    neededData = jsonData; 
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T06:21:36.537

试试 jQuery 文档：[http ://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

这个例子应该让你开始：

```
$.getJSON('ajax/test.json', function(data) {
  var items = [];

  $.each(data, function(key, val) {
    items.push('<li id="' + key + '">' + val + '</li>');
  });

  $('<ul/>', {
    'class': 'my-new-list',
    html: items.join('')
  }).appendTo('body');
}); 
```

这个例子是基于 JSON 结构的；

```
{
  "one": "Singular sensation",
  "two": "Beady little eyes",
  "three": "Little birds pitch by my doorstep"
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T06:23:57.943

不要在 PHP 中使用 echo。它将打印字符串而不是 JSON。

使用[json_encode](http://php.net/manual/en/function.json-encode.php)将 JSON 传递给 javascript。

使用可以使用[each](http://api.jquery.com/jQuery.each/)在 javascript 结束时获取 JSON 中的值。

例子

[http://www.darian-brown.com/pass-a-php-array-to-javascript-as-json-using-ajax-and-json_encode/](http://www.darian-brown.com/pass-a-php-array-to-javascript-as-json-using-ajax-and-json_encode/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T06:27:09.490

如果您使用的是 JQuery，那么您可以在此处看到一个非常简单的解决方案：http: [//api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)。

否则，我只想让您解释一下，正如您在上面的代码中尝试的那样，无法直接在 JavaScript 中访问您的 JSON。要点是，JavaScript 在您的浏览器上运行，而您的 PHP 脚本在您的服务器上运行。所以他们之间肯定是有交流的。所以你必须通过我建议的http从服务器请求数据。

高温高压

# ruby-on-rails - 如何为 Mailboxer 的每个盒子实现“搜索功能”

> ID：11516976
> 
> 赞同：2
> 
> 时间：2012-07-17T06:16:56.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

现在，我正在使用一个名为“mailboxer”的 gem 用于消息传递系统。[https://github.com/ging/mailboxer](https://github.com/ging/mailboxer)
我想为收件箱、发件箱和垃圾箱实现“关键字搜索功能”。

如果我不关心搜索关键字，它会通过这样的编码毫无问题地获取结果

```
inbox...   @messages = current_user.mailbox.inbox.page(params[:page]).per(10)
sentbox... @messages = current_user.mailbox.sentbox.page(params[:page]).per(10)    
trash...   @messages = current_user.mailbox.trash.page(params[:page]).per(10) 
```

但我有时想用搜索关键字过滤结果。
假设本次搜索关键字是'test'，结果应该只是通知表中body属性中包含'test'的记录。
我怎样才能为上面的每一个（如收件箱、发件箱和垃圾箱）执行此操作？

我试过这个，但它根本没有用:(

```
@messages = current_user.mailbox.inbox.search_messages(@search).page(params[:page]).per(10)
@messages = current_user.mailbox.sentbox.search_messages(@search).page(params[:page]).per(10)
@messages = current_user.mailbox.trash.search_messages(@search).page(params[:page]).per(10) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T02:27:12.203

解决方案是对 Mailboxer::Receipt 和 Mailboxer::Models::Messageable 模块进行猴子补丁，以启用按框类型进行搜索：

```
class Mailboxer::Receipt < ActiveRecord::Base
  ...
  if Mailboxer.search_enabled
    searchable do
      text :subject, :boost => 5 do
        message.subject if message
      end
      text :body do
        message.body if message
      end
      integer :receiver_id

      # Add mailbox_type to sunspot search field
      string  :mailbox_type
      boolean :trashed
      boolean :deleted
    end
  end
end 
```

在 Messageable 模块下，我为每种邮箱类型添加了新的 search__messages 方法：

```
module Mailboxer
  module Models
    module Messageable

      def search_messages(query)

        # Replaces 'search' with alias 'solr_search' since ransack search clashes with solr search method
        @search = Mailboxer::Receipt.solr_search do
          fulltext query
          with :receiver_id, self.id
        end

        @search.results.map { |r| r.conversation }.uniq
      end

      # Adds additional Mailboxer search functionality to search by box type
      def search_inbox_messages(query)
        @search = Mailboxer::Receipt.solr_search do
          fulltext query
          with :receiver_id, self.id
          with(:mailbox_type).equal_to("inbox")
        end

        @search.results.map { |r| r.conversation }.uniq
      end

      def search_sent_messages(query)
        @search = Mailboxer::Receipt.solr_search do
          fulltext query
          with :receiver_id, self.id
          with(:mailbox_type).equal_to("sentbox")
        end

        @search.results.map { |r| r.conversation }.uniq
      end

      def search_trash_messages(query)
        @search = Mailboxer::Receipt.solr_search do
          fulltext query
          with :receiver_id, self.id
          with :trashed, true
          with :deleted, false
        end

        @search.results.map { |r| r.conversation }.uniq
      end

    end
  end
end 
```

有了这个，在您的控制器中，您可以简单地使用新定义的方法来进行框类型搜索。

```
current_user.search_inbox_messages(query[:keywords])
current_user.search_sentbox_messages(query[:keywords])
current_user.search_trash_messages(query[:keywords]) 
```

重要提示：确保在添加新搜索字段后重新生成 Solr 索引，否则将不会显示任何内容：

```
bundle exec rake sunspot:solr:reindex 
```

希望这可以帮助！

# c# - 从头开始启动 WPF 业务应用程序

> ID：11516977
> 
> 赞同：1
> 
> 时间：2012-07-17T06:17:01.143
> 
> 标签：c#, .net, wpf

我想知道是否有一个很好的教程可以引导您完成与真实应用程序相当的完整业务应用程序的开发。我已经学习了 C#、WPF 以及编程和 Web 开发的基础知识。我读过的所有书籍都只展示了语法和代码片段，但很少向您展示从规划到测试到部署的完整业务应用程序的开发。

使用 C#/WPF 创建业务应用程序的第一步是什么？我知道我需要先有一个计划。我应该使用 UML 吗？

开始编码时我应该考虑哪些方法或技术。我读过关于领域驱动设计的文章，但也有 MVVM 模式。我应该使用哪一个？我应该两个都学。

我目前正在寻找 .NET 中的工作，但我真的需要了解开发人员在现实生活中的软件开发团队中的工作流程。我找到了一些书籍，可以指导您创建完整的软件，例如 Wrox 的问题-设计-解决方案书籍。这本书的内容是否可以与现实生活中的软件开发工作流程相媲美？

提前非常感谢，我希望我能找到答案，因为我正计划练习我的技能，以便在企业环境中做好准备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T06:33:54.857

嗯，平台在这一点上是无关紧要的。如果你在做一个 winform 或一个 web 应用程序，你会使用 UML 吗？如果是这样，那么您也可以在 WPF 中使用它。如果没有，就胡思乱想。

第一步是仔细收集业务需求。

开始编码时应考虑的方法或技术将由项目负责人传授给您。你听起来很缺乏经验，所以很可能不会由你来决定。每个企业都是不同的。哎呀，每个项目都是不同的。您可以在前 5 个项目中使用不同的方法。复习它们，阅读你能读到的东西，但你总会有一条学习曲线要​​爬。

你不需要学习每一种方法论或范式。边走边学。了解一些基本前提，尤其是标准瀑布，但在你被分配到一个项目之前不要深​​入研究。无论如何，我去过的大多数地方都不遵循自己的方法。这是“安息日是为人而设的，而不是人为安息日而设的”类型的事情之一。组织会因一系列原因而偏离。

这是我大学时看的书。它对我很有帮助。您以 0.33 美元的价格订购它。那不是什么东西。 [http://www.amazon.com/Software-Engineering-7th-Ian-Sommerville/dp/0321210263/ref=sr_1_25?s=books&ie=UTF8&qid=1342506249&sr=1-25&keywords=software+engineering](https://rads.stackoverflow.com/amzn/click/com/0321210263)

祝你在这个领域好运。只是潜入，并努力工作。你应该没事。

# salesforce - 任务共享对象 - salesforce

> ID：11516978
> 
> 赞同：1
> 
> 时间：2012-07-17T06:17:03.340
> 
> 标签：salesforce

Salesforce 中是否有 TaskShare 对象或 ActivityShare 对象。有没有人有这方面的任何文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T04:14:41.823

活动数据模型在[此处](http://www.salesforce.com/us/developer/docs/api/index_Left.htm#StartTopic=Content/sforce_api_erd_activities.htm)的文档中没有 TaskShare 或 ActivityShare 因为活动共享由引用`Who`或`What`相关对象控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:09:13.617

如果您的组织启用了共享活动，那么您将有权访问[TaskRelation](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_objects_taskrelation.htm#sforce_api_objects_taskrelation)对象。

# hex - 比较两个 mach-o 文件

> ID：11516987
> 
> 赞同：1
> 
> 时间：2012-07-17T06:18:10.443
> 
> 标签：hex, mach-o, diffmerge

我有两个 mach-o 文件，我需要在其中找到差异（十六进制不同值）。是否有任何工具可用于执行此操作。

我尝试使用“DiffMerge”，但它似乎没有支持的编码格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:18:16.997

怎么样：

```
hexdump binary1 > dump1.txt
hexdump binary2 > dump2.txt
diff dump1.txt dump2.txt 
```

这将为您提供一个差异文件，您可以使用 hexfiend 第一列中的偏移量或您选择的任何编辑器进行进一步调查。

```
2c2
< 0000010 21 00 00 00 bc 0f 00 00 85 00 20 00 01 00 00 00
---
> 0000010 20 00 00 00 84 0f 00 00 85 00 20 00 01 00 00 00
248,254c248,250
< 0000f80 0c 00 00 00 38 00 00 00 18 00 00 00 02 00 00 00
< 0000f90 00 00 01 00 00 00 01 00 40 65 78 65 63 75 74 61
< 0000fa0 62 6c 65 5f 70 61 74 68 2f 69 6e 6a 65 63 74 2e
< 0000fb0 64 79 6c 69 62 00 00 00 26 00 00 00 10 00 00 00
< 0000fc0 58 76 18 00 a4 23 00 00 1d 00 00 00 10 00 00 00
< 0000fd0 e0 09 19 00 60 37 00 00 00 00 00 00 00 00 00 00
< 0000fe0 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
---
> 0000f80 26 00 00 00 10 00 00 00 58 76 18 00 a4 23 00 00
> 0000f90 1d 00 00 00 10 00 00 00 e0 09 19 00 60 37 00 00
> 0000fa0 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
```

# android - Android Jni .so 文件 ExceptionInInitializerError 和 UnsatisfiedLinkError: Library jniopencv_core not found

> ID：11516988
> 
> 赞同：2
> 
> 时间：2012-07-17T06:18:11.600
> 
> 标签：android, opencv, java-native-interface

我正在开发一个基于 Javacv 的 Android 项目。我已按照项目 Readme.txt 文件中给出的说明进行操作。将所有 .so 文件放在 libs/armeabi 文件夹中。并使用以下几行将图像转换为电影。但是得到了以下日志。

**日志猫 **

```
07-16 16:38:32.790: D/dalvikvm(27175): No JNI_OnLoad found in /data/data/com.javacv.ffmpeg/lib/libavutil.so 0x44e8db60, skipping init
07-16 16:38:32.800: W/dalvikvm(27175): Exception Ljava/lang/UnsatisfiedLinkError; thrown during Lcom/googlecode/javacv/cpp/avutil;.<clinit>
07-16 16:38:32.800: W/dalvikvm(27175): Exception Ljava/lang/ExceptionInInitializerError; thrown during Lcom/googlecode/javacv/cpp/avcodec;.<clinit>
07-16 16:38:32.800: W/dalvikvm(27175): Exception Ljava/lang/ExceptionInInitializerError; thrown during Lcom/googlecode/javacv/cpp/avformat;.<clinit>
07-16 16:38:33.160: D/dalvikvm(27175): Trying to load lib /data/data/com.javacv.ffmpeg/lib/libopencv_core.so 0x44e8db60
07-16 16:38:33.160: I/dalvikvm(27175): Unable to dlopen(/data/data/com.javacv.ffmpeg/lib/libopencv_core.so): Cannot load library: get_lib_extents[759]:  1196 - /data/data/com.javacv.ffmpeg/lib/libopencv_core.so is not a valid ELF object
07-16 16:38:33.170: W/dalvikvm(27175): Exception Ljava/lang/UnsatisfiedLinkError; thrown during Lcom/googlecode/javacv/cpp/opencv_core;.<clinit>
07-16 16:38:33.170: W/dalvikvm(27175): Exception Ljava/lang/ExceptionInInitializerError; thrown during Lcom/googlecode/javacv/cpp/opencv_imgproc;.<clinit>
07-16 16:38:33.170: W/dalvikvm(27175): Exception Ljava/lang/ExceptionInInitializerError; thrown during Lcom/googlecode/javacv/cpp/opencv_highgui;.<clinit>
07-16 16:38:33.170: D/AndroidRuntime(27175): Shutting down VM
07-16 16:38:33.170: W/dalvikvm(27175): threadid=1: thread exiting with uncaught exception (group=0x400207c8)
07-16 16:38:33.190: E/AndroidRuntime(27175): FATAL EXCEPTION: main
07-16 16:38:33.190: E/AndroidRuntime(27175): java.lang.ExceptionInInitializerError
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.javacv.ffmpeg.ZT_FFMPEG_JAVACVActivity.onCreate(ZT_FFMPEG_JAVACVActivity.java:19)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at android.os.Looper.loop(Looper.java:123)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at android.app.ActivityThread.main(ActivityThread.java:4627)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at java.lang.reflect.Method.invokeNative(Native Method)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at java.lang.reflect.Method.invoke(Method.java:521)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at dalvik.system.NativeStart.main(Native Method)
07-16 16:38:33.190: E/AndroidRuntime(27175): Caused by: java.lang.ExceptionInInitializerError
07-16 16:38:33.190: E/AndroidRuntime(27175):    at java.lang.Class.classForName(Native Method)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at java.lang.Class.forName(Class.java:235)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.googlecode.javacpp.Loader.load(Loader.java:334)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.googlecode.javacv.cpp.opencv_highgui.<clinit>(opencv_highgui.java:91)
07-16 16:38:33.190: E/AndroidRuntime(27175):    ... 14 more
07-16 16:38:33.190: E/AndroidRuntime(27175): Caused by: java.lang.ExceptionInInitializerError
07-16 16:38:33.190: E/AndroidRuntime(27175):    at java.lang.Class.classForName(Native Method)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at java.lang.Class.forName(Class.java:235)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.googlecode.javacpp.Loader.load(Loader.java:334)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.googlecode.javacv.cpp.opencv_imgproc.<clinit>(opencv_imgproc.java:96)
07-16 16:38:33.190: E/AndroidRuntime(27175):    ... 18 more
07-16 16:38:33.190: E/AndroidRuntime(27175): Caused by: java.lang.UnsatisfiedLinkError: Library jniopencv_core not found
07-16 16:38:33.190: E/AndroidRuntime(27175):    at java.lang.Runtime.loadLibrary(Runtime.java:461)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at java.lang.System.loadLibrary(System.java:557)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:444)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.googlecode.javacpp.Loader.load(Loader.java:368)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.googlecode.javacpp.Loader.load(Loader.java:315)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.googlecode.javacv.cpp.opencv_core.<clinit>(opencv_core.java:131)
07-16 16:38:33.190: E/AndroidRuntime(27175):    ... 22 more 
```

**我的源代码**

```
package com.javacv.ffmpeg;
import static com.googlecode.javacv.cpp.opencv_highgui.cvLoadImage;
import java.io.File;
import java.util.ArrayList;
import static com.googlecode.javacv.cpp.opencv_highgui.CvVideoWriter;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.provider.MediaStore.Images;
import android.util.Log;
import com.googlecode.javacpp.annotation.ByPtrPtr;
import com.googlecode.javacpp.annotation.ByVal;
import com.googlecode.javacv.cpp.opencv_core;
import com.googlecode.javacv.cpp.opencv_core.IplImage;
public class ZT_FFMPEG_JAVACVActivity extends Activity {

    com.googlecode.javacv.FFmpegFrameRecorder recorder ;
    private String TAG="kljadf";
    private IplImage colorImage;
    private IplImage image_small;
    private File[] file;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    //========== have used previously to convert the single image to movie =========
        /*opencv_core.IplImage image = cvLoadImage("/mnt/sdcard/image.jpg"); 

        com.googlecode.javacv.FFmpegFrameRecorder recorder = new com.googlecode.javacv.FFmpegFrameRecorder("/mnt/sdcard/test.3gp",256,256);
        try {
            recorder.setCodecID(5);
            recorder.setFormat("3gp");
            recorder.setPixelFormat(0);
            recorder.start();
            for (int i=0;i<10;i++)
              {
                recorder.record(image);
              }
            recorder.stop();
           }
        catch (Exception e){
            e.printStackTrace();
          }*/ 
```

//========== 以前用过把单张图片转成电影=========

```
 ArrayList<File>iamges=new ArrayList<File>();

       iamges.add(new File("mnt/sdcard/image"));
       iamges.add(new File("mnt/sdcard/image.png"));

       File[]  file=iamges.toArray(new File[iamges.size()]);
       file=iamges.toArray(new File[iamges.size()]);
       writeMovie(file,"Rajesh.mp4");
    } 
```

@SuppressLint("ParserError") public void writeMovie(File[] files, String name) {

```
 double fps = 30;            
        int sas =com.googlecode.javacv.cpp.opencv_highgui.CV_FOURCC('U', '2', '6', '3');

        CvVideoWriter writer = com.googlecode.javacv.cpp.opencv_highgui.cvCreateVideoWriter(name,sas, fps, new com.googlecode.javacv.cpp.opencv_core.CvSize(640,480), -1); //CV_LOAD_IMAGE_UNCHANGED values is -1 
        if (writer == null) { 
                Log.e(TAG, "Can not create Writer!"); 
        } 
        for (File list:files) { 
            colorImage = cvLoadImage(list.toString(), 1); //CV_LOAD_IMAGE_COLOR =value for this=1 sp replaced by 1  
            if (colorImage == null) { 
                    Log.e(TAG, "Color Image is NULL!"); 
            } 
            image_small = opencv_core.cvCreateImage(opencv_core.cvSize(640, 480), colorImage.depth(), 4); //colorImage.nChannels()=4 as per jar file

            //or whatever color depth/channel number you need... 
            if (image_small == null) { 
                    Log.e(TAG, "Image Small is NULL!"); 
            } 
            com.googlecode.javacv.cpp.opencv_imgproc.cvResize(colorImage, image_small, 1);  //CV_INTER_LINEAR==1 
            if (writer != null) { 
                    cvWriteFrame(writer, image_small); 
            } else { 
                    Log.e(TAG, "Can not write frame, No writer!"); 
            } 
            opencv_core.cvReleaseImage(colorImage); 
            opencv_core.cvReleaseImage(image_small); 
        } 
        cvReleaseVideoWriter(writer); 
        finish(); 
} 

    public static native void cvReleaseVideoWriter(@ByPtrPtr CvVideoWriter paramCvVideoWriter);
    public static native int cvWriteFrame(CvVideoWriter paramCvVideoWriter, opencv_core.IplImage paramIplImage);
    public static native CvVideoWriter cvCreateVideoWriter(String paramString, int paramInt1, double paramDouble, @ByVal opencv_core.CvSize paramCvSize, int paramInt2); 
```

**

将所有 .so 文件放在 libs/armeabi 和 libs/armeabi_v7 文件夹中。请帮我解决这个问题。

谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:34:42.320

您的班级中是否有想要使用该库的人：

```
static {
   System.loadLibrary("yourlibname")
} 
```

该名称应该没有前缀`lib`和`.so`扩展名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:35:19.993

你有一个错误是一个标记（在我看来）

```
07-16 16:38:33.190: E/AndroidRuntime(27175): java.lang.ExceptionInInitializerError 
```

如果您没有加载库，您会看到不满意的链接错误，但是当显示 ExceptionInInitializerError 时，通常意味着用于构建库的 NDK 版本与设备不兼容。

尝试： 1\. 检查 ndk 版本与您正在使用的模拟器/设备的版本 2\. 如果您没有使用官方 NDK，请检​​查您拥有的 ndk 版本是否与您正在使用的版本兼容 3.使用最新的 SDK 进行测试以查看它是否运行（如果出现问题是上述问题之一）

此外，情况 2 是您具有库依赖性，例如加载 cusombuilt open SSL 以加载 libssl.so 时，您需要首先加载 libcrypto.so，因为 ssl 库链接到加密库。

您应该知道您拥有的任何内部库依赖项。

# javascript - 一种确定网站是否验证的方法

> ID：11516990
> 
> 赞同：0
> 
> 时间：2012-07-17T06:18:22.990
> 
> 标签：javascript, html, css, validation

我正在开发一项服务，它需要能够确定 Internet 上的特定网站是否有效（错误为 0）。

W3C 有 API 吗？

* * *

另外，我希望能够逐个浏览器进行测试。我的意思是，我还希望能够判断 [第一个标准不能满足] 是否有任何 1 个（或多个）特定网站无法验证（有 0 个错误）。这目前可能吗？

我仍在寻找，但还没有找到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:29:02.310

W3C 的 HTML 和 CSS 验证器都有 API。

HTML 验证器文档位于：http: [//validator.w3.org/docs/api.html](http://validator.w3.org/docs/api.html)

CSS 验证器文档位于：http: [//jigsaw.w3.org/css-validator/api.html](http://jigsaw.w3.org/css-validator/api.html)

# jquery - 单击处理程序未触发（部分视图）

> ID：11516993
> 
> 赞同：0
> 
> 时间：2012-07-17T06:18:38.430
> 
> 标签：jquery, ajax, asp.net-mvc, asp.net-mvc-3, partial-views

我有一个带有 javascript 代码的文件`View`。 在：`Desk.js`
`View`

```
<script src='@Url.Content("~/Scripts/KazBilet/Desk.js")' type="text/javascript"></script> 
```

在`Desk.js`文件中：

```
$(function () {
    $('.wraper').load('/desk/getsessionscreen');
    toggleSession();
});

function toggleSession() {
    alert('a');
    $('.sched a').on('click', function () {
        var target = $(this);
        $(this).toggleClass('selected');
        $('.sched a').not(target).each(function () {
            $(this).removeClass('selected');
        });

        setStateForStepButton();
    });
} 
```

具有`sched`类和`a`标签的元素包含在加载到`wraper`div 元素中的部分视图中。

该`click`处理程序中的问题不会触发，但`alert`调用正常。如何解决？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T06:22:11.873

您可以将您的点击订阅代码放在外面。你甚至不需要等待 DOM 准备好：

```
$('.sched').on('click', 'a', function () {
    var target = $(this);
    $(this).toggleClass('selected');
    $('.sched a').not(target).each(function () {
        $(this).removeClass('selected');
    });

    setStateForStepButton();
});

$(function () {
    $('.wraper').load('/desk/getsessionscreen', function() {
        toggleSession();
    });

});

function toggleSession() {
    alert('a');
} 
```

[`.on()`](http://api.jquery.com/on/)如果您想生动地注册，还请注意我用于该方法的正确重载：

```
$('.sched').on('click', 'a', function () { 
```

另请注意，如果您想`toggleSession`在 AJAX 调用成功时调用该函数，则应使用该`.load`方法的成功回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T06:22:17.187

您需要在 load 的回调中调用 toggleSession() ，否则内容可能尚未加载，因此您的选择器无法找到所需的元素。

```
$('.wraper').load('/desk/getsessionscreen', function () {
    toggleSession();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T06:24:27.963

代码似乎是正确的，但我过去遇到了一些问题`on()`。试试这个：

```
$(document).on('click', '.sched a', function () {
    var target = $(this);
    $(this).toggleClass('selected');
    $('.sched a').not(target).each(function () {
        $(this).removeClass('selected');
    });

    setStateForStepButton();
}); 
```

此外，如果您尝试`selected`仅将类设置为`a`单击，我应该将您的代码重写为：

```
$(document).on('click', '.sched a', function () {
    $('.sched a').removeClass('selected');
    $(this).addClass('selected');

    setStateForStepButton();
}); 
```

正如yan.kun所说，在回调上调用函数`load()`

# spring - 是否可以在 Liferay 挂钩中使用 Spring @Autowired？

> ID：11516994
> 
> 赞同：3
> 
> 时间：2012-07-17T06:18:48.107
> 
> 标签：spring, hook, liferay-6, autowired

我想知道是否有可能将@Autowired 以某种方式注入到Liferay 钩子中的bean 表单xml 文件。在这种特殊情况下，我使用的是 UpgradeProcess 钩子。我的项目已经配置为使用带有 liferay 的 Spring，我可以使用 ClassPathXmlApplicationContext 的 getBean("bean name") 方法解码 xml，但如果这会自动发生会更好。

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T07:49:09.960

这是可能的denu。

将应用程序的`web.xml`侦听器类配置为`org.springframework.web.context.ContextLoaderListener`并放置`applicationContext.xml`在`WEB-INF`文件夹中。它会从你的 bean 中选择相应的 bean，`applicationContext.xml`你可以在你的 bean 中自动装配这些对象。

干杯

# oauth - 如何从服务器端身份验证期间生成的访问令牌手动设置 authResponse

> ID：11516998
> 
> 赞同：2
> 
> 时间：2012-07-17T06:19:11.263
> 
> 标签：oauth, facebook-javascript-sdk, facebook-authentication, facebook-oauth

我正在使用服务器端身份验证编写一个 Web 应用程序，并且我一直试图找出一种在我的应用程序中利用 Facebook 的 Javascript SDK 的方法。

FB.init 的文档将可选的 authResponse 参数定义为用于“手动设置可从 getAuthResponse 检索的对象”。它还指出，一旦获得，应用程序可以存储整个 authResponse 对象以供将来访问。如果应用程序使用 FB.login（Javascript SDK 的身份验证），这可能会起作用，但是使用服务器端身份验证的应用程序呢？

服务器端身份验证使我的应用程序能够获取用户的访问令牌，这是图形 API 调用所需的最关键信息。我希望仅此 access_token 就足以构造一个有效的 authResponse 对象，用于进行身份验证以与 Javascript SDK 一起使用。

仅使用包含有效“accessToken”字段的 authResponse 调用 FB.init（使用有效的 appID、channelUrl 和其他参数）是不够的。包括 userId 也是不够的。理想情况下，仅这些参数就可以工作。为 authResponse 定义的唯一其他人是“expiresIn”和“signedRequest”。这些参数中的哪一个（如果有的话）足以生成有效的 authResponse 对象？它们必须分配给什么值？

我设法挖掘了“签名请求”的描述： [https ://developers.facebook.com/docs/authentication/signed_request/](https://developers.facebook.com/docs/authentication/signed_request/)

这份文件提出了许多问题。我假设签名是由对称算法产生的。如果没有，则无法生成它。假设有可能，有效载荷的描述绝不是具体的。有一个包含 9 个参数的列表，其中没有一个是按要求标记的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:37:07.300

就像 CBroe 说的，你不应该手动传递任何东西。您首先调用[FB.getLoginStatus](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)并将您的 javascript 处理程序作为参数传递给此方法。您将从 getLoginStatus 调用返回 authResponse。

当然，理论上您可以将 access_token 参数传递给任何 FB.api 调用，例如 /me?access_token=blah_blah，其中 blah_blah 是您拥有的字符串，但同样，这不是必需的，您最好将其委托给响应处理程序。

使用 javascript sdk 和服务器端身份验证进行访问令牌生成/扩展/验证时要非常小心。您最终会维护两个单独的代码路径，并最终一遍又一遍地对 Facebook 进行相同的调用。即使您将访问令牌存储在您身边，也最好选择一种最适合您的方法，而不是通过服务器端调用来获取访问令牌并在客户端调用 FB.api 来使用访问权限令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T14:49:41.507

有一个解决方案。我没想到这很容易。

```
FB.api('/me?access_token={{ access_token }}', function (me) {
    console.log(me); //do anything with me
}); 
```

因此，您之前不需要在 FB 中设置 Objekt 变量 - 只需将 access_token 作为参数添加到您的请求中即可。