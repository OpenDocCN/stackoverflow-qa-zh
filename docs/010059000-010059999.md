# StackOverflow 问答 10059000-10059999

# python - Python 包：相对导入

> ID：10059002
> 
> 赞同：4
> 
> 时间：2012-04-07T22:50:38.470
> 
> 标签：python, python-module, relative-import

我正在开发一个 Python 应用程序，该应用程序由一个核心和多个使用该核心的独立模块组成。我在设置包的相对导入时遇到了困难。

```
app
  |- __init__.py
  |- core
        |- __init__.py
        |- corefile.py

  |- module1
        |- __init__.py
        |- main.py 
```

`__init__.py`文件是空的。我正在运行 Python 2.7.1。

```
main.py
from .core import * 
```

运行`python main.py`结果在`ValueError: Attempted relative import in non-package`.

类似的问题：[相对 python 导入的终极答案](https://stackoverflow.com/questions/8299270/)，[如何在 Python 中进行相对导入？](https://stackoverflow.com/questions/72852/), [Python 中的相对导入](https://stackoverflow.com/questions/4175534/)

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T23:07:10.593

简而言之，您只能从本身已导入的包中使用相对导入。

例如，如果您有：

```
$ cat run.py
from app.module1 import main
main.main()
$ python run.py 
```

然后你可以使用相对导入`app/module1/main.py`（虽然它需要是`from ..core import foo`，因为`core/`是上一层`main.py`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-30T20:32:52.350

```
import sys
abs_filepath = '/home/n/Documents/IMPORTANT/deep_learning/drori_2018/    final_proj/Ryans_branch/StackGAN/'
# insert your absolute filepath above as abs_filepath = '/path/to/targ/dir'
sys.path.append(abs_filepath) 
```

`import`如果这样做有问题，请更正

### 其他答案：

另请参阅[此处](https://stackoverflow.com/questions/14132789/relative-imports-for-the-billionth-time)以获取有关正在发生的事情的详尽答案。

# android - Android输入法中保存键盘状态

> ID：10059003
> 
> 赞同：0
> 
> 时间：2012-04-07T22:51:01.650
> 
> 标签：android, android-input-method

我正在写一个[`InputMethodService`](http://d.android.com/reference/android/inputmethodservice/InputMethodService.html)，基本上只是一个软键盘，我从它开始另一个活动：

```
class Foo extends InputMethodService {
    // ...
    private void startNewActivity() {
        Intent i = new Intent(this, NewActivity.class);
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(i);
    }
    // ...
} 
```

但是当我这样做时，用户将处于打字过程中。例如，用户按下`'a'`键开始新的活动。有没有办法，当用户完成新活动时，我可以让他们恢复打字并将键盘恢复原状？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T21:50:33.803

由您输入的应用程序来存储您在其`onPause()`和相关方法中输入的数据。然后应用程序应该在`onResume()`. 请注意，这些都不能由您的键盘控制。

您可能能够做的一件事（取决于您开始的活动的性质）是让活动成为一个对话框。然后它将出现在当前活动上，当对话框关闭时（按下后退按钮或您调用`finish()`），一切都会恢复到原来的状态。

# javascript - 它只是上传第一行的文件输入

> ID：10059005
> 
> 赞同：0
> 
> 时间：2012-04-07T22:51:18.393
> 
> 标签：javascript, jquery

我有一个应用程序，您可以[在此处](https://helios.hud.ac.uk/u0867587/Mobile_app/QandATable2.php)访问。如果您打开应用程序，请单击“添加”按钮几次。这将在下表中添加一个新行。在每个表格行中都有一个 AJAX 文件上传器。

现在的问题是，如果我单击除第一行以外的任何行中的“上传”按钮，则上传仅发生在第一行，因此仅上传第一个文件输入。

为什么要这样做，我怎样才能得到它，以便当用户单击“上传”按钮时，“上传”按钮的那一行中的文件输入被上传，而不是第一行被上传？

下面是完整的代码，它在每个表行中附加上传的文件 AJAX 文件：

```
function insertQuestion(form) {   

    var $tbody = $('#qandatbl > tbody'); 
    var $tr = $("<tr class='optionAndAnswer' align='center'></tr>");
    var $image = $("<td class='image'></td>"); 

    var $fileImage = $("<form action='upload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='startUpload();' >" + 
    "<p id='f1_upload_process' align='center'>Loading...<br/><img src='Images/loader.gif' /><br/></p><p id='f1_upload_form' align='center'><br/><label>" + 
    "File: <input name='fileImage' type='file' class='fileImage' /></label><br/><label><input type='submit' name='submitBtn' class='sbtn' value='Upload' /></label>" +
    "</p> <iframe id='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px solid #fff;'></iframe></form>");

    $image.append($fileImage);

    $tr.append($image);  
    $tbody.append($tr); 

}

function startUpload(){
      document.getElementById('f1_upload_process').style.visibility = 'visible';
      document.getElementById('f1_upload_form').style.visibility = 'hidden';
      return true;
}

function stopUpload(success){
      var result = '';
      if (success == 1){
         result = '<span class="msg">The file was uploaded successfully!<\/span><br/><br/>';
      }
      else {
         result = '<span class="emsg">There was an error during file upload!<\/span><br/><br/>';
      }
      document.getElementById('f1_upload_process').style.visibility = 'hidden';
      document.getElementById('f1_upload_form').innerHTML = result + '<label>File: <input name="fileImage" type="file"/><\/label><label><input type="submit" name="submitBtn" class="sbtn" value="Upload" /><\/label>';
      document.getElementById('f1_upload_form').style.visibility = 'visible';      
      return true;   
} 
```

更新：

当前代码：

```
 var $fileImage = $("<form action='upload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='startUpload(this);' >" + 
    "<p class='f1_upload_process' align='center'>Loading...<br/><img src='Images/loader.gif' /><br/></p><p class='f1_upload_form' align='center'><br/><label>" + 
    "File: <input name='fileImage' type='file' class='fileImage' /></label><br/><label><input type='submit' name='submitBtn' class='sbtn' value='Upload' /></label>" +
    "</p> <iframe class='upload_target' name='upload_target' src='#' style='wclassth:0;height:0;border:0px solclass #fff;'></iframe></form>");

function stopUpload(success, source_form){
      var result = '';
      if (success == 1){
         result = '<span class="msg">The file was uploaded successfully!<\/span><br/><br/>';
      }
      else {
         result = '<span class="emsg">There was an error during file upload!<\/span><br/><br/>';
      }
      $(source_form).find('.f1_upload_process').style.visibility = 'hidden';
      $(source_form).find('.f1_upload_form').innerHTML = result + '<label>File: <input name="fileImage" type="file"/><\/label><label><input type="submit" name="submitBtn" class="sbtn" value="Upload" /><\/label>';
      $(source_form).find('.f1_upload_form').style.visibility = 'visible';      
      return true;   
} 
```

为什么我在下面的这一行出现错误：

```
$(source_form).find('.f1_upload_form').style.visibility = 'visible'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T23:25:40.557

如果没有看到完整的内容，您的问题似乎是您正在使用 ID，它在一个文档中必须是唯一的。如果多个元素使用相同的 ID，在最好的情况下，浏览器将使用第一个（它在这里使用），在最坏的情况下，什么都不会起作用。

添加新的上传表单时，您必须为其中的元素提供唯一 ID。你可以简单地通过附加一个计数变量来做到这一点`window`，例如

```
$(document).ready( function(){ window.formCount=0; } ); 
```

然后，您可以将该编号添加到新添加表单的 ID 中。

除此之外，通过使用`this`变量，您可以携带对正确表单的引用，例如`onsubmit='startUpload(this);'`，以及`function startUpload(f){...` 您应该能够使用 访问表单中的内容`$(f).find(...)`。

有很多方法可以完成这项工作并解决多个 ID 的问题。我会做什么：`var $fileImage = $("<form action...`在这种形式中，它说`id`我会改用`class`. 然后如上所述，通过在括号中添加“this”来更改 onsubmit（在同一行中）。然后将函数 startUpload 更改为此处：

```
function startUpload(source_form){
  $(source_form).find('.f1_upload_process').css('visibility','visible');
  $(source_form).find('.f1_upload_form').css('visibility','hidden');
  return true;
} 
```

对于其他要访问发送文件的表单中的内容的函数，您必须执行相同的操作。将表单的引用传递给`this`函数调用的方括号中的函数，然后访问表单内的内容，如我上面所示。

# asp.net-mvc - 在 Azure 中启用自定义错误

> ID：10059009
> 
> 赞同：5
> 
> 时间：2012-04-07T22:52:03.317
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iis, azure

我无法设置 IIS 为 MVC 管道之外的错误提供自定义错误页面。如果我在控制器内抛出异常，则它是所有文件，Application_Error 事件会处理：

```
 protected void Application_Error(object sender, EventArgs e)
    {
        var error = Server.GetLastError();

        var routeData = new RouteData();
        routeData.Values["Controller"] = "Error";
        routeData.Values["Area"] = "";
        routeData.Values["Exception"] = error;

        if (error is HttpException)
        {
            switch (((HttpException)error).GetHttpCode())
            {
                case 401:
                    routeData.Values["Action"] = "NotAllowed";
                    break;

                case 403:
                    routeData.Values["Action"] = "NotAllowed";
                    break;

                case 404:
                    routeData.Values["Action"] = "NotFound";
                    break;
                default:
                    routeData.Values["Action"] = "ServerError";
                    break;
            }
        }
        else
        {
            routeData.Values["Action"] = "ServerError";
        }

        Response.Clear();
        Server.ClearError();

        IController controller = new ErrorController();
        controller.Execute(new RequestContext(new HttpContextWrapper(((MvcApplication)sender).Context), routeData));
    } 
```

但是，如果我浏览到一个不存在的 URL，IIS 将处理 404 错误（或任何其他错误），给我标准 IIS 错误消息并完全忽略我的 web.config 设置：

```
 <system.web>
  <customErrors mode="On" redirectMode="ResponseRewrite" defaultRedirect="/error">
    <error statusCode="401" redirect="/error/notallowed" />
    <error statusCode="403" redirect="/error/notallowed" />
    <error statusCode="404" redirect="/error/notfound" />
    <error statusCode="500" redirect="/error/servererror" />
  </customErrors>
</system.web>

<system.webServer>
  <httpErrors errorMode="Custom" defaultResponseMode="ExecuteURL">
    <clear />
    <error statusCode="401" path="/error/notallowed" />
    <error statusCode="403" path="/error/notallowed" />
    <error statusCode="404" path="/error/notfound" />
    <error statusCode="500" path="/error/servererror" />
  </httpErrors>
</system.webServer> 
```

![IIS 默认错误页面](../Images/5954fae01a9f58672c4914dacac9b369.png)

/error/* 由我的应用程序内的控制器处理。我可以做些什么来让 IIS 执行自定义错误路径，而不是向我提供标准错误页面？

这是在 Azure 上运行的 ASP.NET MVC 3。它也不能在直接的 IIS 下工作，但开发服务器会执行控制器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T10:13:30.290

IIS 不尊重 defaultResponseMode。您必须将 responseMode 添加到每个错误，如下所示：

```
<httpErrors errorMode="Custom">
  <clear />
  <error statusCode="401" path="/error/notallowed" responseMode="ExecuteURL" />
  <error statusCode="403" path="/error/notallowed" responseMode="ExecuteURL" />
  <error statusCode="404" path="/error/notfound" responseMode="ExecuteURL" />
  <error statusCode="500" path="/error/servererror" responseMode="ExecuteURL" />
</httpErrors> 
```

为什么默认不适用超出了我的范围。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-19T16:18:12.493

我确实遇到了这个问题，我在 Azure 上，以下为我解决了这个问题：

```
 Response.TrySkipIisCustomErrors = true; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-12T13:17:34.747

我在网上找到了许多解决方案，但它们都不适用于静态文件（例如不存在的“picture.jpg”）。

此解决方案适用于 Azure 网站和 Azure WebRole 实例。我使用`web.config`转换，因此根据您自己的需要进行相应的更新。

我使用 ASPX 页面来处理错误，因此我可以设置正确的 HTTP 响应代码（当我使用 .htm 页面时，IIS 总是设置 HTTP 200）

文件`~/404.aspx`是：

```
<%@ Page Language="C#" AutoEventWireup="false" ContentType="text/html" Debug="false" EnableEventValidation="false" EnableSessionState="False" EnableViewState="false" ResponseEncoding="utf-8" Transaction="Disabled" ValidateRequest="false" ViewStateMode="Disabled" %>
<% Context.Response.StatusCode = 404; %>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>404 Error - Page not found</title>
</head>
<body>
  <h1>Custom 404 page</h1>
</body>
</html> 
```

文件`~/500.aspx`是：

```
<%@ Page Language="C#" AutoEventWireup="false" ContentType="text/html" Debug="false" EnableEventValidation="false" EnableSessionState="False" EnableViewState="false" ResponseEncoding="utf-8" Transaction="Disabled" ValidateRequest="false" ViewStateMode="Disabled" %>
<% Context.Response.StatusCode = 500; %>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>500 Server Error</title>
</head>
<body>
  <h1>Custom 500 page</h1>
</body>
</html> 
```

包含的必要部件`~/Web.config`：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <customErrors mode="Off" />
  </system.web>

  <system.webServer>
    <httpErrors errorMode="Detailed" />
  </system.webServer>
</configuration> 
```

包含的必要部件`~/Web.Release.config`：

```
<?xml version="1.0"?>
<configuration>
  <customErrors mode="On" defaultRedirect="/500.aspx" redirectMode="ResponseRewrite" xdt:Transform="Replace">
    <!-- AWARE do NOT use address in form "~/404.htm" but in "/404.htm" -->
    <error statusCode="404" redirect="/404.aspx" />
    <error statusCode="500" redirect="/500.aspx"/>
  </customErrors>

  <system.webServer>
    <httpErrors errorMode="Custom" existingResponse="Replace" xdt:Transform="Replace">
      <!-- AWARE do NOT use address in form "~/404.htm" but in "/404.htm" -->
      <remove statusCode="404" />
      <error statusCode="404" path="/404.aspx" responseMode="ExecuteURL" />

      <remove statusCode="500" />
      <error statusCode="500" path="/500.aspx" responseMode="ExecuteURL" />
    </httpErrors>
  </system.webServer>
</configuration> 
```

结束。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T08:33:10.493

确保您已设置此设置。

```
<system.webServer>

    <modules runAllManagedModulesForAllRequests="true"/>

</system.webServer> 
```

否则，您的 IIS 应用程序也可能以经典模式而不是集成模式运行，这是 IIS 设置，但是我认为集成模式是 Azure 中的默认模式（但老实说，我没有检查过）

# eclipse - SWTbot 测试未按预期运行

> ID：10059012
> 
> 赞同：0
> 
> 时间：2012-04-07T22:52:50.560
> 
> 标签：eclipse, junit, swt, swtbot

所以我正在用 SWTbot 测试一个 Eclipse 插件，但我没有得到我期望的结果——当我减少测试时，结果发现问题不在于机器人，而在于我复制的一些代码跨越程序的另一部分（功能齐全的地方）

以下代码...

```
@RunWith(SWTBotJunit4ClassRunner.class)
public class Tests {

    private static SWTWorkbenchBot bot;

    @BeforeClass
    public static void beforeClass() throws Exception {
        bot = new SWTWorkbenchBot();
        bot.viewByTitle("Welcome").close();
    }

    @Test
    public  void maybeThisWillWork(){
        IWorkbenchWindow activeWorkbenchWindow = PlatformUI.getWorkbench().getActiveWorkbenchWindow();
        System.out.println("A");
        IWorkbenchPage activePage = activeWorkbenchWindow.getActivePage();
        System.out.println("B");
    }

    @AfterClass
    public static void sleep() {
        System.out.println("In the sleep function");
        bot.sleep(10000);
    }
} 
```

给我输出 -

```
A
In the sleep function 
```

而不是预期的

```
A
B
In the sleep function 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T20:36:50.280

您可能需要将测试作为 JUnit 插件测试运行。你试过吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T09:58:02.810

所以事实证明答案是这样的（stackoverflow的一个很好的优点是我实际上在其他地方解决了这个问题，记得我遇到过类似的问题，然后不得不回到stackoverflow来提醒自己细节）

SWTBot 没有在 UI 线程中正确运行，因此出现空指针错误，我必须做的是有效地使用：

```
Display display = bot.getDisplay();
display.syncExec(objectThatdoesthethingiwanttogetdoneintheUIthread);
System.out.println(objectThatdoesthethingiwanttogetdoneintheUIthread.results); 
```

......这让事情变得正常......

# api - Spotify 重启后自定义应用消失

> ID：10059013
> 
> 赞同：1
> 
> 时间：2012-04-07T22:52:55.807
> 
> 标签：api, spotify, sidebar

即使我“将我的应用程序添加到侧边栏”，每次重新启动 spotify 后我都必须搜索“spotify:app:$FOLDERNAME”以使我的应用程序再次处于活动状态，这是否正常？

App Finder 安装的其他应用程序按预期保留。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T00:13:11.327

是的。本地应用程序的清单在开始时被读取。客户端从侧边栏中删除 finder 中不可用的应用程序。

# javascript - 为什么要隐藏“消费者秘密”？

> ID：10059015
> 
> 赞同：5
> 
> 时间：2012-04-07T22:53:11.880
> 
> 标签：javascript, oauth

我目前正在使用 javascript 编写一个 twitter 客户端，然后发现很多人提醒 javascript 开发人员不要泄露“消费者秘密”。但他们从来没有说为什么。

那么为什么隐藏我的 consumer_secret 如此重要呢？如果有人想在他的应用程序上显示我的“via My_App”，让 My_App 这个名字更出名，我为什么要担心什么？毕竟，你不能从我的consumer_secret中得到任何有用的信息，用户信息同时受到https和token_secret的保护。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T23:03:22.970

恶意开发人员可以使用您的消费者密码创建垃圾邮件应用程序。如果有足够多的垃圾邮件帐户正在使用垃圾邮件应用程序 Twitter 可能会禁用整个消费者密钥，此时您的整个应用程序将不再与 Twitter 一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T23:01:58.407

您可以将消费者机密视为密码——它向服务器标识您的客户端。任何知道你的消费者秘密的人都可以伪装成你的应用程序。

所以你需要保证它的安全，你不想“隐藏”它；你想加密它。这应该发生在服务器上，而*不是*您发送给用户的 javascript 应用程序中。

[您可以在 Google 的支持页面](http://support.google.com/a/bin/answer.py?hl=en&answer=162105)上找到很多有用的信息。

# c# - 外键 仅显示与主键关联的数字

> ID：10059016
> 
> 赞同：0
> 
> 时间：2012-04-07T22:53:18.357
> 
> 标签：c#, asp.net, asp.net-mvc-3, asp.net-mvc-3-areas

我想要一种可以显示外键值而不是显示数字的方法。例如，我有以下视图来显示所有评论：

```
@model IEnumerable<Games.Models.tblReview>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            ReviewID
        </th>
        <th>
            Recomendation
        </th>
        <th>
            AvoidOrBuy
        </th>
        <th>
            Score
        </th>
        <th>
            GameIDFK
        </th>
        <th>
            UserName
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.ReviewID)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Recomendation)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.AvoidOrBuy)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Score)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.GameIDFK)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.UserName)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }) |
            @Html.ActionLink("Details", "Details", new {  id=item.ReviewID }) |
            @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })
        </td>
    </tr>
}

</table> 
```

我想要一种方式，让 GameIDFK 显示游戏名称，而不是我的控制器显示此信息的数字是基本的，将在此处显示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Games.Models;

namespace Games.Controllers
{
    public class ShowAllReviewsController : Controller
    {
        //
        // GET: /ShowAllReviews/

        public ActionResult Index()
        {
            using (var db = new gamezoneDBEntities())
            {

                return View(db.tblReviews.ToList());
            }
        }

        //
        // GET: /ShowAllReviews/Details/5

        public ActionResult Details(int id)
        {
            return View();
        }

        //
        // GET: /ShowAllReviews/Create

        public ActionResult Create()
        {
            return View();
        } 

        //
        // POST: /ShowAllReviews/Create

        [HttpPost]
        public ActionResult Create(FormCollection collection)
        {
            try
            {
                // TODO: Add insert logic here

                return RedirectToAction("Index");
            }
            catch
            {
                return View();
            }
        }

        //
        // GET: /ShowAllReviews/Edit/5

        public ActionResult Edit(int id)
        {
            return View();
        }

        //
        // POST: /ShowAllReviews/Edit/5

        [HttpPost]
        public ActionResult Edit(int id, FormCollection collection)
        {
            try
            {
                // TODO: Add update logic here

                return RedirectToAction("Index");
            }
            catch
            {
                return View();
            }
        }

        //
        // GET: /ShowAllReviews/Delete/5

        public ActionResult Delete(int id)
        {
            return View();
        }

        //
        // POST: /ShowAllReviews/Delete/5

        [HttpPost]
        public ActionResult Delete(int id, FormCollection collection)
        {
            try
            {
                // TODO: Add delete logic here

                return RedirectToAction("Index");
            }
            catch
            {
                return View();
            }
        }
    }
} 
```

有没有办法让我获得游戏外键，因为这个网站将用于新来的游戏玩家，我想知道哪些游戏很好玩不希望用户点击评论并只看到一个数字而没有游戏名称。

你能帮忙吗

编辑：

在我看来，我使用了以下内容：

```
@Html.DisplayFor(modelItem => item.tblGame.GameName) 
```

但它崩溃并给出以下错误：

```
The ObjectContext instance has been disposed and can no longer be used for operations that require a connection. 
```

编辑2：

```
namespace Games.Models
{
    using System;
    using System.Collections.Generic;

    public partial class tblReview
    {
        public int ReviewID { get; set; }
        public string Recomendation { get; set; }
        public string AvoidOrBuy { get; set; }
        public string Score { get; set; }
        public int GameIDFK { get; set; }
        public string UserName { get; set; }

        public virtual tblGame tblGame { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T23:37:10.477

您可能想考虑[使用 ViewModel 类](http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx)，但我认为如果您修改控制器以使用类似

```
 return View(db.tblReviews.Include("tblGame").ToList()); 
```

正如您在上面发布的那样，您将能够在您的视图中使用该属性。

# java - 透明JPanel

> ID：10059020
> 
> 赞同：13
> 
> 时间：2012-04-07T22:54:04.580
> 
> 标签：java, swing, jframe

我想创建一个半透明的 JPanel。我已经通过简单地使用颜色构造函数的 RGBA 值来完成它，但问题是当我使用事件处理时无法正常工作。我的要求是一个半透明的 Jpanel，当鼠标进入它时，这个面板的边框变得可见，如果鼠标退出，边框应该不可见。我已经通过以下代码做到了这一点，但问题是它不适用于透明背景（RGBA），但它适用于 RGB 颜色。

```
import javax.swing.*;
import javax.swing.border.*;
import java.awt.*;
import java.awt.event.*;

public class MDCW extends JFrame {

      private JPanel contentPane;

     /**
     * Launch the application.
     */
     public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    MDCW frame = new MDCW();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */
    public MDCW() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 1013, 551);
        contentPane = new JPanel();
        contentPane.setBackground(new Color(0, 139, 139));
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(null);

        final JPanel panel = new JPanel();

        panel.setBackground(new Color(0, 0, 0,50));
        panel.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseEntered(MouseEvent e) {
                panel.setBorder(new LineBorder(new Color(255, 255, 255), 5));   
            }
            @Override
            public void mouseExited(MouseEvent e) {
                panel.setBorder(null);  
            }
        });
        panel.setBounds(360, 155, 215, 215);
        contentPane.add(panel);

        final JPanel panel_1 = new JPanel();
        panel_1.setBackground(new Color(0, 0, 0));
        panel_1.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseEntered(MouseEvent e) {
                panel_1.setBorder(new LineBorder(new Color(255, 255, 255), 5)); 
            }
            @Override
            public void mouseExited(MouseEvent e) {
                panel_1.setBorder(null);    
            }
        });
        panel_1.setBounds(84, 155, 215, 215);
        contentPane.add(panel_1);
    }
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-07T23:32:03.033

JPanel 不支持半透明背景。解决这个问题需要两个步骤：

*   首先，要获得任何正常运行的透明度，您**必须** `setOpaque(false)`在面板上；否则会出现故障，因为假定不透明面板完全覆盖了其边界之下的内容。

*   但是，当`opaque`is时`false`，面板也根本不绘制其背景（！），因此您必须在paintComponent 中绘制背景。

这是一个临时替换类，它将处理这两个步骤。

```
private class TransparentPanel extends JPanel {
    {
        setOpaque(false);
    }
    public void paintComponent(Graphics g) {
        g.setColor(getBackground());
        Rectangle r = g.getClipBounds();
        g.fillRect(r.x, r.y, r.width, r.height);
        super.paintComponent(g);
    }
} 
```

如果我将第一个面板创建更改为：

```
final JPanel panel = new TransparentPanel(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-08T09:44:28.270

这样做很容易：

```
// initialise JPanel 
JPanel somePanel = new JPanel(new GridBagLayout());
somePanel.setBackground(new Color(0,0,0,x); 
```

在这种情况下，x 是您正在寻找的透明度级别，0 是不可见的，100 是实心的。

例如：

```
somePanel.setBackground(new Color(0,0,0,55) 
```

请参阅： http: [//docs.oracle.com/javase/7/docs/api/java/awt/Color.html](http://docs.oracle.com/javase/7/docs/api/java/awt/Color.html) [http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent .html](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html)

# php - 在字符串 php 中查找与 - 连接的整数

> ID：10059027
> 
> 赞同：0
> 
> 时间：2012-04-07T22:55:01.043
> 
> 标签：php, string

所以可以说我有一个这样的字符串。

```
$pizza = 1,2,3,5-4,7; 
```

我想从中得到的是5-7，但5-7可以是任何组合，比如6-9或10-1，这会发生多次。

如

```
$pizza=1-4,2,3-1,5-4,7; 
```

那么我该怎么做呢？

我了解如何通过explode 和implode 去掉逗号，但是我不知道如何获取虚线数字以及这些数字在字符串中的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T22:59:03.813

```
preg_match_all("/(\d\-\d)/", $myString, $results); 
```

应该这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T22:59:11.863

您可以使用以下方法将范围“扩展”为各自的数字：

```
$pizza = preg_replace_callback(
    "((\d+)-(\d+))",
    function($m) {
        return implode(",",range(min($m[1],$m[2]),max($m[1],$m[2])));
    },
    $pizza); 
```

因此，例如，如果您输入`1,2,3,7-10,12`，代码将导致`1,2,3,7,8,9,10,12`. 然后，您可以将其放入您已知的`explode`代码中并获取各个数字。

我想这就是你所要求的。

# sql-server-2008 - 创建订阅时出错：“SQL Server 复制需要实际的服务器名称才能连接到服务器”

> ID：10059028
> 
> 赞同：2
> 
> 时间：2012-04-07T22:55:04.237
> 
> 标签：sql-server-2008, replication

我有 2 台服务器：

1.  在线服务器：这是一个发布者（SQL Server 2008 R2 工作组版）
2.  本地服务器：订阅者（试图使其成为一个订阅者的字符串）（SQL Server 2008 R2 企业版）

我可以使用本地 SSMS 轻松连接到在线服务器，但是当我尝试从本地服务器创建订阅时，它给了我以下错误：

> SQL Server 复制需要实际的服务器名称才能连接到服务器。不支持通过服务器别名、IP 地址或任何其他备用名称进行连接。指定实际的服务器名称“kkkkk”。（复制。实用程序）

kkkkk 是在线服务器的名称。

我搜索了很多，只是答案总是与其中一台服务器的名称已更改有关。但这对我来说不是这样。

1.  没有更改任何服务器名称
2.  SQL Server Browser 和代理在两台服务器上运行
3.  正如我之前所说，使用 SSMS 我可以轻松连接到在线服务器

我卡住了，不知道该怎么做，我认为这是一个误导性的错误信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:57:25.130

你必须作弊。添加到 %windir%\system32\drivers\etc\hosts 文件行，如 1.2.3.4 publishername

其中 1.2.3.4 - 远程服务器的 IP 和发布者名称 - 所需名称

# javascript - 滑动切换 [Jquery 功能] 不工作

> ID：10059030
> 
> 赞同：1
> 
> 时间：2012-04-07T22:55:52.553
> 
> 标签：javascript, jquery, html, css, toggle

我使用此代码运行滑动切换，但单击它时它没有打开：

JS代码：

```
 <script type="text/javascript">
     $(document).ready(function () {
         alert('hi i came to toggle');
         $(".flip").click(function () {
             $(this).next().slideToggle("fast");
         });
     });

      function ViewGetSubjects(data) {
         var subjects = (typeof data) == 'string' ? eval('(' + data + ')') : data;
         $('#subjects').empty();
         for (var i = 0; i < subjects.length; i++)
          {
              $('#subjects').append('<h1 class = "flip">'+subjects[i].Wkp_lesson+'</h1><div class="panel" >' + ' Weekly Body: ' + subjects[i].Wkp_Body + ' Weekly Body: ' + subjects[i].Wkp_Body + ' Weekly Lesson: ' + subjects[i].Wkp_lesson + '</div>');
             }
      } 
```

CSS：

```
 div.panel,h1.flip
      {
         margin:0px;
         padding:5px;
         text-align:center;
         background:#488AC7;
         border:solid 1px #F6358A;
       }
     div.panel
     {
         height:120px;
         display:none;
     } 
```

你知道为什么吗？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T23:13:23.923

如果您没有使用最新版本的 jquery

```
 $(".flip").live('click', function(e){
     $(this).next().slideToggle("fast");
 }); 
```

否则应该是

```
$("#subjects").on('click', 'h1.flip', function(e){
    $(this).next().slideToggle("fast");
}); 
```

因为您正在（具有 id=subjects的元素）元素内动态附加`DOM`（`h1`带有类名）元素。`flip``#subjects`

参考：[on](http://api.jquery.com/on/) and [live (deprecated)](http://api.jquery.com/live/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T23:09:57.833

除了我的评论之外，您是否可能忘记包含 jquery 库？

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

这将包括直接来自 jquery.com 的最新版本，尽管建议您复制代码并将其保存在自己的文件中。

# ruby-on-rails-3 - Rails 3.2 Heroku PG 错误 - '运算符不存在：整数 == 整数'

> ID：10059034
> 
> 赞同：2
> 
> 时间：2012-04-07T22:56:33.907
> 
> 标签：ruby-on-rails-3, postgresql, heroku

这在我的开发环境中有效，但是当我尝试通过 Heroku 和 Postgres 运行时，我得到了这个错误。

```
2012-04-07T21:35:14+00:00 app[web.1]: ActiveRecord::StatementInvalid 
  (PG::Error: ERROR:  operator does not exist: integer == integer 
2012-04-07T21:35:14+00:00 app[web.1]: LINE 1: ...."value") AS avg_id FROM "datapoints"  
  WHERE (habit_id == 1) 
2012-04-07T21:35:14+00:00 app[web.1]: HINT:  No operator matches the given name and argument type(s). 
You might need to add explicit type casts. 
2012-04-07T21:35:14+00:00 app[web.1]: : SELECT  AVG("datapoints"."value") AS avg_id FROM "datapoints 
  WHERE (habit_id == 1)): 
```

以下是我的控制器中的代码行：

```
Datapoint.average(:value, :conditions => ['habit_id == ?', self.habit_id]) 
```

我对 Rails 很陌生，所以这很容易成为一个非常简单的错误——对我在这里做错了什么有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T23:02:06.423

只需使用一个等号。

Postgresql（和 SQL 标准）使用单个等号 (=) 进行比较： [http ://www.postgresql.org/docs/8.0/static/functions-comparison.html](http://www.postgresql.org/docs/8.0/static/functions-comparison.html)

与编程语言不同，SQL 不需要支持将其用于赋值，除非在更新子句中。因此，它不需要大多数编程语言所需的双等号运算符 (==) 进行比较。

# ruby-on-rails - 如何将实例变量传递给 infowindow Gmaps4rails

> ID：10059037
> 
> 赞同：2
> 
> 时间：2012-04-07T22:57:15.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3, google-maps, gmaps4rails

我正在创建停车监控应用程序，尤其是对编程和 ruby​​ on rails 完全陌生。我为 Gmaps 找到了一个很棒的扩展 - Gmaps4rails。

我有几个标记在地图上显示停车场（班级地点）的位置和拥堵情况。用户（类用户）应该能够点击标记，并且在这个弹出的小信息窗口中应该有“关注”按钮，因此用户可以随时了解停车拥堵情况。

这是我的代码

模型关系

**用户**

```
has_many :parking_relationships, :foreign_key => "watcher_id",
                                 :dependent => :destroy
has_many :watching, :through => :parking_relationships, 
                                :source => :watched 
```

**地点**（停车场）

```
has_many :reverse_parking_relationships, :foreign_key => "watched_id",
                                         :dependent => :destroy,
                                         :class_name => "ParkingRelationship"
has_many :watchers, :through => :reverse_parking_relationships,
                                :source => :watcher 
```

**停车关系**

```
belongs_to :watcher, :class_name => "User"
belongs_to :watched, :class_name => "Place" 
```

**地方控制器**

```
def index
@user = current_user
@place = Place.find(params[:id])
@places = Place.all
 @json = Place.all.to_gmaps4rails do |place, marker|
  marker.infowindow render_to_string(:partial => "/places/watch_form", :locals => {       :object => place})
 end
respond_with @json 
```

结尾

部分**_watch_form.html.erb**

```
<% unless current_user?(@user) %>
 <div id="follow_form">
  <% if current_user.watching?(@place) %>
   <%= render 'watch' %>
  <% else %>
   <%= render 'unwatch' %>
  <% end %>
 </div>
<% end %> 
```

部分**_watch.html.erb**

```
<%= form_for current_user.parking_relationships.
                      build(:watched_id => @place.id) do |f| %>
 <div><%= f.hidden_field :watched_id %></div>
 <div class="actions"><%= f.submit "Watch" %></div>
<% end %> 
```

部分 **_unwatch.html.erb**

```
<%= form_for current_user.parking_relationships.find_by_watched_id(@place),
         :html => { :method => :delete } do |f| %>
 <div class="actions"><%= f.submit "Unwatch" %></div>
<% end %> 
```

**数据库结构**

```
Users name, email, etc
Places Name, address, latitude, longitude, gmaps, congestion
Parking_relationships watched_id, watcher_id 
```

这行不通。当我单击标记时，什么也没有发生，并且“观看”或“取消观看”按钮不会出现。我建议这是因为 @places 在 Places 控制器的索引操作中。

```
UPDATE:
Here's the app on the web
GitRepositary https://github.com/ilyacherevkov/parking_bob
Map http://parking-bob.heroku.com/places
Watchers of the parking http://parking-bob.heroku.com/places/1,2,3 etc/watchers
Users watching parkings http://parking-bob.heroku.com/users/1,2,3 etc/watching 
```

谢谢各位

# java - 在 Mac 上捕获音频时未分配被释放的指针？

> ID：10059038
> 
> 赞同：0
> 
> 时间：2012-04-07T22:57:21.483
> 
> 标签：java, javasound

我正在尝试使用 Java 从我的 Mac 上的麦克风录制音频。在 Google 上进行了一番搜索后，我在最底部找到了代码，但是当我在 Eclipse 中运行它时，每 3 或 4 次就有 1 次出现错误：

```
java(4946,0x1095f9000) malloc: *** error for object 0xd07400083: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug 
```

出现在控制台上。根据此处的另一篇文章，它与 Apple 为 OSX 提供的流氓库有关，但我不知道在 Java 中捕获音频的任何其他方式。有没有办法通过更改我正在使用的 Java 代码来防止这个错误，或者这超出了代码的范围？

这是我正在使用的代码：

```
import java.io.File;
import java.io.IOException;
import javax.sound.sampled.AudioFileFormat;
import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.DataLine;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.TargetDataLine;

public class AudioCapture extends Thread
{
private TargetDataLine dataLine;
private AudioFileFormat.Type audioFileType;
private AudioInputStream incomingStream;
private File generatedFile;

public AudioCapture(TargetDataLine line,
        AudioFileFormat.Type requiredFileType,
        File file){
    dataLine = line;
    incomingStream = new AudioInputStream(line);
    audioFileType = requiredFileType;
    generatedFile = file;}

public void startCapture(){
    dataLine.start();
    super.start();}

public void stopCapture(){
    dataLine.stop();
    dataLine.close();}

public void run(){
    try{
        AudioSystem.write(
                incomingStream,
                audioFileType,
                generatedFile);}
    catch (IOException e){
        e.printStackTrace();}
}

public static void main(String[] args){
    String strFilename = "captureFile.wav";
    File outputFile = new File(strFilename);

    AudioFormat audioFormat = new AudioFormat(
            AudioFormat.Encoding.PCM_SIGNED,
            22050.0F, 16, 2,
            4, 22050.0F, false);
    DataLine.Info info = new DataLine.Info(TargetDataLine.class,
            audioFormat);
    TargetDataLine targetDataLine = null;
    try{
        targetDataLine = (TargetDataLine) AudioSystem.getLine(info);
        targetDataLine.open(audioFormat);}
    catch (LineUnavailableException e){
        System.out.println("Unable to acquire an audio recording line");
        e.printStackTrace();
        System.exit(1);}
    System.out.println("AudioFormat settings: " + audioFormat.toString());
    AudioFileFormat.Type targetType = AudioFileFormat.Type.WAVE;
    AudioCapture recorder = new AudioCapture(
            targetDataLine,
            targetType,
            outputFile);

    recorder.startCapture();
    System.out.println("Starting the recording now...");
    System.out.println("Please press to stop the recording.");
    try{
        System.in.read();}
    catch (IOException e){
        e.printStackTrace();}

    recorder.stopCapture();
    System.out.println("Capture stopped.");}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T23:21:18.850

这是一个有点雄心勃勃的行动方案，但是：

你可以完全按照它所说的去做并调试它（这会有帮助吗？我不确定）。如果安装了 CDT 包，可以使用 gdb 调试编译。

*   创建一个新的 C++ 项目来构建您的项目 ( `Project > Run/Debug Settings`，并创建一个新的启动配置，该配置调用`javac`以[匹配这些](https://stackoverflow.com/questions/206473/build-eclipse-java-project-from-command-line).
*   编辑：[使用 gdb 控制台对其进行调试](https://stackoverflow.com/questions/3387587/use-gdb-console-in-eclipse)。
*   看看它是否说明了问题。

# eclipse - 如何摆脱 Eclipse 中的可折叠图标？

> ID：10059040
> 
> 赞同：0
> 
> 时间：2012-04-07T22:57:30.813
> 
> 标签：eclipse, preferences

有谁知道如何摆脱 Eclipse 中的 [-] 图标？我发现它们真的很让人分心，但我不知道如何从偏好中关闭它们。谢谢！

![在此处输入图像描述](../Images/b045a6f0f3e2884742a9ae6ab2994e10.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T23:01:16.123

右键单击数字，转到折叠并单击“启用折叠”。那么图标应该消失了。

![在此处输入图像描述](../Images/b1dd8b244746a555a94823e681ac338a.png)

# ruby - 当您运行“rails server”时，如何使 ruby 版本与您看到的“ruby -v”相匹配？

> ID：10059043
> 
> 赞同：3
> 
> 时间：2012-04-07T22:57:36.293
> 
> 标签：ruby, ruby-on-rails-3, rvm

在运行“rails server”时，我似乎无法让我的 ruby​​ 版本与终端中的版本相同。如果我运行类似的命令，`ruby -v`我会得到 1.9.3，这是我想要使用的版本。但是当我使用`rails server`. 知道如何让我的本地服务器利用 1.9.3 吗？我正在使用带有 Lion 的 Mac。

* * *

```
CHRISs-MacBook-Pro:test_app chrisrothstein$ rvm list

rvm rubies

=* ruby-1.9.3-p125 [ x86_64 ]

# => - current
# =* - current && default
#  * - default

CHRISs-MacBook-Pro:test_app chrisrothstein$ ruby -v
ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-darwin11.3.0]

CHRISs-MacBook-Pro:test_app chrisrothstein$ rails server
=> Booting WEBrick
=> Rails 3.2.3 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2012-04-07 15:48:50] INFO  WEBrick 1.3.1
[2012-04-07 15:48:50] INFO  ruby 1.8.7 (2010-01-10) [universal-darwin11.0]
[2012-04-07 15:48:50] INFO  WEBrick::HTTPServer#start: pid=53174 port=3000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T00:30:02.187

如果这是一个 Rails 3 应用程序，那么默认情况下您使用的是 bundler。因此，在捆绑程序上下文中运行您的服务器。

如果您`bundle install`还没有在`Gemfile`. 以这种方式运行您的服务器：

```
bundle exec rails s 
```

这应该使 ruby​​ 版本匹配 rvm 中显示的内容。

# css - 只有 3 个侧面的盒子阴影

> ID：10059045
> 
> 赞同：3
> 
> 时间：2012-04-07T22:57:58.350
> 
> 标签：css

我有两个具有 css3 框阴影的重叠 div。问题是，即使我设置了 z-index，我仍然需要消除 div 的 box-shadow 之一。我见过使用负价差和零值的情况，但我认为这在这里行不通。

我现在的代码是：

```
#bulb-top {
    position: relative;
    width: 280px;
    height: 280px;
    background-color: #E5F7A3;
    -webkit-border-radius: 280px;
    -moz-border-radius: 280px;
    border-radius: 280px;
    border: 8px solid #FFF40C;
    top: -430px;
    margin-left: auto;
    margin-right: auto;
    -webkit-box-shadow: 0px 0px 15px 1px #FFF40C;
    -moz-box-shadow: 0px 0px 15px 1px #FFF40C;
    box-shadow: 0px 0px 15px 1px #FFF40C;
    z-index: 4;
}

#bulb-bottom {
    position: relative;
    width: 140px;
    height: 120px;
    background-color: #E5F7A3;
    -moz-border-radius-topleft: 0px;
    -moz-border-radius-topright: 0px;
    -moz-border-radius-bottomright: 30px;
    -moz-border-radius-bottomleft: 30px;
    -webkit-border-radius: 0px 0px 30px 30px;
    border-radius: 0px 0px 30px 30px;
    border-left: 8px solid #FFF40C;
    border-right: 8px solid #FFF40C;
    border-bottom: 8px solid #FFF40C;
    top: -455px;
    margin-left: auto;
    margin-right: auto;
    -webkit-box-shadow: 0px 0px 15px 1px #FFF40C;
    -moz-box-shadow: 0px 0px 15px 1px #FFF40C;
    box-shadow: 0px 0px 15px 1px #FFF40C;
    z-index: 5;
} 
```

[http://jsfiddle.net/minitech/g42vq/3/](http://jsfiddle.net/minitech/g42vq/3/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T23:22:40.963

您可以使用`::before`伪元素来遮挡盒子阴影的一侧。它并不完美，但对于您的情况可能就足够了。[这是更新的 jsFiddle。](http://jsfiddle.net/minitech/g42vq/4/)

```
#bulb-bottom:before {
    background-color: #E5F7A3;
    content: '';
    display: block;
    height: 30px;
    margin: 0 auto;
    position: relative;
    top: -10px;
    width: 140px;
}​ 
```

# php - 从 Amazon Storefront 获取产品库存

> ID：10059047
> 
> 赞同：2
> 
> 时间：2012-04-07T22:58:13.440
> 
> 标签：php, amazon, opencart, amazon-mws

我是一名书商，在亚马逊有一个店面，在亚马逊以外还有另一家商店。我想在我的另一家商店展示我的亚马逊书籍，并提供直接通过亚马逊购买的正确链接，这可以使用亚马逊 MWS 吗？任何使用 PHP 的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:51:08.730

有可能的。使用亚马逊 MWS - 您需要将亚马逊 API 与 PHP 一起使用 - 做起来并不复杂；但是为亚马逊、eBay 和 Opencart 制作一个插件，直接管理多商业的上传和同步，一直在社区管道上。目前不存在插件；免费或商业；你必须自己做。

```
1 - Make a new multi store in opencart.
2 - When adding products and assoc products to stores, make certain products available in your normal shop, and your amazon "multi store".
3 - In template files, if the product is on the multi store, pull the details and change the URL redirects with affiliate link and API link to Amazon cart.. it is a bit messy but for a quick solution.. 
```

另一种方法是为 opencart 创建一个本机应用程序。

有人通过自由职业者网站做到了这一点；值得和他们谈谈：

[Mayoousa Amazon Store 和 Amazon Product Feed 集成的 Google 缓存 PDF](https://docs.google.com/viewer?a=v&q=cache:5M5jEmhLRLcJ%3awww.mintegra.com/support/docs/AmazonMarketplaceV1_Guide.pdf%20&hl=en&gl=uk&pid=bl&srcid=ADGEESjF_M4vYZOjjtcnveCb0pApYkGocyFr0IIhMPaRIOPvCkYq7BGvDOFZ29lpdc8zvxGlHKan14zZjs5DW5Vna1lRIHDBzlivagdLddxgK7dce82L1iVvyGDHS5iV2AtI9ittZVhJ&sig=AHIEtbT3SXFXIiEanjPR8fSvGoX-oOfuvg)

或编辑此（或使用此代码库）：

[易趣的 OpenCart](http://ebayforopencart.noextratime.com/)

[eBay 的 OpenCart 演示](http://ebayforopencart.noextratime.com/demo/)

[ebay 用于 Opencart 上的 Opencart 模块](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=4220)

[用于 opencart 的 Amazon S3 模块](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=4946)

[Opencart 的亚马逊支付模块](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=691&path=3&page=2)

# ruby-on-rails - Link_to 删除多态关联？

> ID：10059048
> 
> 赞同：1
> 
> 时间：2012-04-07T22:58:29.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当我的模型为：

```
class User
  has_many :products
  has_many :subscriptions, :foreign_key => :subscriber_id
end

class Product
  has_many :subscriptions, :as => :subscribable
end

class Subscription
  belongs_to :subscriber, :class_name => "User"
  belongs_to :subscribable, :polymorphic => true
end 
```

我尝试通过我的视图和控制器设置删除：

```
def unsubscribe_product
  @subscription = Subscription.find(params[:id])
  if @subscription.destroy
    redirect_to :back
  else
    redirect_to :back
  end
end

<td><%= link_to "Unsubscribe", { :controller => "products", 
                                 :action => "unsubscribe_product", 
                                 :id => subscription.id }, 
                                 :method => :delete %></td> 
```

但得到错误：

```
NameError in Pages#subscribe_area

undefined local variable or method `subscription' for #<#<Class> 
```

我不明白为什么它不能这样工作。我有一个实例来查找订阅。为什么我不能使用它？这也会自动映射到当前用户的订阅吗？

谢谢，可以使用帮助。

* * *

编辑

**PagesController** & **pages/subscribe_area.html.erb**

```
def subscribe_area
    @products = current_user.products
end

<table>
 <% for product in @products %>
  <tbody>
   <tr>
    <td><%= product.name %></td>
    <td><%= product.price %></td>
    <td><%= link_to 'Delete', product, :confirm => 'Are you sure?', :method => :delete %></td>
    <% if current_user.subscribed_for?(product) %>
       <td><%= link_to "Unsubscribe", { :controller => "products", :action => "unsubscribe_product", :id => subscription.id }, :method => :delete %></td>
    <% else %>
       <td><%= link_to "Subscribe", { :controller => "products", :action => "subscribe_product", :id => product.id }, :method => :post %></td>
    <% end %>
   </tr>
  </tbody>
 <% end %>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T23:06:57.867

看起来好像链接中的订阅应该`@subscription`说您在控制器中声明它。否则我需要查看整个页面代码以及呈现它的操作

更新：所以你没有定义订阅。试试这个：

```
<td><%= link_to "Unsubscribe", { :controller => "products", :action => "unsubscribe_product", :id => product.id }, :method => :delete %></td> 
```

然后按如下方式修改您的操作：

```
def unsubscribe_product
  product = Product.find(params[:id])
  @subscription = product.subscriptions.find_by_subscriber_id(current_user.id)
  if @subscription.destroy
    redirect_to :back
  else
    redirect_to :back
  end
end 
```

# objective-c - iCloud：获取文件的现有公共 URL

> ID：10059051
> 
> 赞同：4
> 
> 时间：2012-04-07T22:58:54.743
> 
> 标签：objective-c, cocoa, icloud

我的 OS X Lion 应用程序允许用户公开 iCloud 文件。我用`URLForPublishingUbiquitousItemAtURL`它。

调用该方法后，我可以将该 URL 呈现给用户。但是有没有办法在文件发布（而不是更改）后获取相同的 URL？例如，如果用户想在另一台设备上查看该 URL？

是的，我可以`URLForPublishingUbiquitousItemAtURL`再打电话，但我怎么知道文件是否已经发布？

我的第一个想法是在 iCloud 中创建某种键值数据，其中包含所有文件的 URL（具有公共 URL）。但我不敢相信没有更简单的方法......

谢谢！丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:46:39.760

如果我正确理解您的问题，您想检索或创建 iCloud 中文件的公共 URL。

如果是这种情况，则使用 URLForPublishingUbiquitousItemAtURL:expirationDate:error:

它返回一个 URL，该 URL 可以通过电子邮件发送给用户以下载文件。

```
- (NSURL *)URLForPublishingUbiquitousItemAtURL:(NSURL *)url expirationDate:(NSDate
**)outDate error:(NSError **)error 
```

**参数：**

*   url - 指定要共享的云中项目的 URL。URL 必须以从 URLForUbiquityContainerIdentifier:（第 61 页）方法返回的基本 URL 为前缀，该方法对应于项目的位置。

*   outDate - 在输入时，指向日期对象变量的指针。在输出时，此参数包含该项目在返回的 URL 中不再可用的日期。如果您对日期不感兴趣，可以为此参数指定 nil

*   error - 在输入时，指向 NSError 对象的变量的指针。如果发生错误，则此指针设置为包含有关错误信息的 NSError 对象。如果您不想要错误信息，您可以为此参数指定 nil。

**返回值**

一个 URL，用户可以使用该 URL 在 url 下载项目的副本。如果由于任何原因无法创建 URL，则返回 nil。

**讨论**

此方法创建指定文件的快照，并将副本放置在临时 iCloud 位置，其他用户可以使用返回的 URL 访问该位置。快照反映了生成 URL 时文件的内容，并且在对用户 iCloud 存储中的原始文件进行后续更改时不会更新。快照文件在指定的 URL 上一直可用，直到 outDate 参数中指定的日期，之后它会被自动删除。您的应用程序必须有权访问网络才能使此调用成功。

因此，如果如您所说，您需要检查它是否已成功发布，请检查错误。

来源：[NSFileManagerClass@Developer.Apple.com](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/NSFileManager_Class.pdf)

# functional-dependencies - 功能依赖

> ID：10059055
> 
> 赞同：-1
> 
> 时间：2012-04-07T22:59:25.213
> 
> 标签：functional-dependencies, 3nf

我正在研究 sql 的函数依赖和

我有一个问题。

我们有功能依赖

```
A->B
C->D
CA->E
D->F 
```

和

我试图弄清楚这是否是分解的关系

例如我们有两个关系

第一 = CAEB 第二 = CDF

和

我想知道当我们使用 BCNF 或 3NF 时，这两个关系是分解

对于我的想法，

第一和第二不是 BCNF 的分解

因为首先，

```
CA -> E
A->B 
```

其次，

```
C->D
D->F 
```

这样对吗 ？（我正在搜索关于 BCNF 的概念，我试图申请这个问题。）

和

我不太确定如何处理 3NF 部分......（它似乎与 BCNF 几乎相同，但我不太确定......）

有谁知道如何做 3NF 部分？谢谢..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-07T23:12:25.727

是的你是对的。您可以在此处查看斯坦福大学的精彩数据库讲座[Introduction to Databases](http://www.db-class.org/course/class/index)

# c++ - 将一串数字转换为任何形式的 int

> ID：10059056
> 
> 赞同：0
> 
> 时间：2012-04-07T22:59:25.680
> 
> 标签：c++, types, type-conversion

作为大型程序的一部分，我必须将一串数字转换为整数（最终是浮点数）。不幸的是，我不允许使用铸造或 atoi。

我想到了一个简单的操作：

```
void power10combiner(string deciValue){
   int result;
   int MaxIndex=strlen(deciValue);
        for(int i=0; MaxIndex>i;i++)
        {
          result+=(deciValue[i] * 10**(MaxIndex-i));
        }       
} 
```

会工作。如何将 char 转换为 int？我想我可以使用 ASCII 转换，但无论如何我都无法将字符添加到整数（假设转换方法是有一个巨大的 if 语句，它返回每个 ASCII 数字后面的不同数值）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T23:11:35.150

有很多方法可以做到这一点，并且可以对您的函数进行一些优化和更正。

1) 你没有从你的函数返回任何值，所以返回类型现在是 int。

2）您可以通过传递 const 引用来优化此功能。

现在举个例子。

**使用[std::stringstream](http://www.cplusplus.com/reference/iostream/stringstream/)进行转换。**

```
int power10combiner(const string& deciValue)
{
    int result;

    std::stringstream ss;
    ss << deciValue.c_str();

    ss >> result;

    return result;
} 
```

**不使用 std::stringstream 进行转换。**

```
int power10combiner(const string& deciValue)
{
    int result = 0;
    for (int pos = 0; deciValue[pos] != '\0'; pos++)
        result = result*10 + (deciValue[pos] - '0');

    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T23:13:57.900

您可以通过简单地实现任何数字基数的位值系统，将字符串迭代地解析为整数。假设您的字符串以空字符结尾并且数字无符号：

```
unsigned int parse(const char * s, unsigned int base)
{
    unsigned int result = 0;
    for ( ; *s; ++s)
    {
        result *= base;
        result += *s - '0'; // see note
    }
    return result;
} 
```

`0`如所写，这仅适用于使用数字, ...,的以 10 为基数的数字，这些数字`9`保证在您的执行字符集中按顺序排列。如果您需要更大的数字基数或更自由的符号集，则需要`*s - '0'`在指示的行中替换为确定输入字符的数字值的合适查找机制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T23:55:05.700

我会使用 std::stringstream，但没有人发布使用 strtol 的解决方案，所以这里有一个。请注意，它不执行处理超出范围的错误。在 unix/linux 上，您可以使用`errno`变量来检测此类错误（通过将其与 进行比较`ERANGE`）。

顺便说一句，浮点数有 strtod/strtof/strtold 函数。

```
#include <iostream>
#include <cstdlib>
#include <string> 

int power10combiner(const std::string& deciValue){
   const char* str = deciValue.c_str();
   char* end; // the pointer to the first incorrect character if there is such
   // strtol/strtoll accept the desired base as their third argument
   long int res = strtol(str, &end, 10);

   if (deciValue.empty() || *end != '\0') {
       // handle error somehow, for example by throwing an exception
   }
   return res;
}

int main()
{
    std::string s = "100";

    std::cout << power10combiner(s) << std::endl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T23:03:18.570

通过建议编辑，并添加了一些解释。

```
int base = 1;
int len = strlen(deciValue);
int result = 0;
for (int i = (len-1); i >= 0; i--) { // Loop right to left. Is this off by one? Too tired to check.
    result += (int(deciValue[i] - '0') * base); // '0' means "where 0 is" in the character set. We are doing the conversion int() because it will try to multiply it as a character value otherwise; we must cast it to int.
    base *= 10; // This raises the base...it's exponential but simple and uses no outside means
} 
```

这假设字符串只是数字。如果您需要更多说明，请发表评论。

# jquery-ui - 结合 jQuery UI 选项卡和 jScrollPane 失败

> ID：10059057
> 
> 赞同：0
> 
> 时间：2012-04-07T22:59:35.550
> 
> 标签：jquery-ui, jscrollpane, jquery-tabs

我无法让较新版本的[jscrollpane](http://jscrollpane.kelvinluck.com/)与 jQuery UI 选项卡一起使用。我只有一个标签（第一个）工作，但没有其他；我尝试用以前的版本解释这里的修复，放置`<div>`由选项卡控制的额外内容（内部是由 jScrollPane 控制的 div），如此[处](http://www.kelvinluck.com/assets/jquery/jScrollPane/tabs_example.html)所述，但仍然没有运气。有没有人遇到过类似的问题？感谢提供线索！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:50:11.037

我自己终于或多或少地找到了解决方案，当然，通过查看jscrollpane 作者自己关于这个问题的[解释](http://www.kelvinluck.com/assets/jquery/jScrollPane/tabs_example.html)，但对于 jscrollpane 的早期版本。

由于这不是开箱即用的，而且我在实施解决方案时仍然遇到问题，我向选项卡链接添加了一个单击侦听器，并在单击时将 jscrollpane 添加到内容 div，如下所示

```
jQuery("#tabs ul li a").click(function () {
clickednum = "#tabs-" + jQuery(this).parent().attr("id");
jQuery(clickednum + " .skroler").jScrollPane();
    }); 
```

我在这里做的是等待用户单击某个选项卡链接，然后将 jScrollPane 添加到对应于单击的选项卡链接的选项卡内容。

**.skroler**是一个额外的 div，其中是选项卡内容，因为脚本作者描述它必须以这种方式完成才能工作）

我正在通过**li** id 属性来识别标签（我需要从 PHP 生成。出于其他原因）

这是特定的实现 - 从工作示例来看，可能它可以在其他环境中更简单地完成。

啊，当然，在故事开始时，您需要将 jScrollPane 初始化为第一个打开的选项卡，例如

```
jQuery("#tabs-1 .skroler").jScrollPane(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T06:16:21.353

我有同样的问题，并通过将 id 添加到与生成的选项卡对应的 li 标记来解决它：

```
<ul>
      <li id="details"><a href="#tabs-1">Details</a></li>
      <li id="history"><a href="#tabs-2">History</a></li>
      <li id="examinations"><a href="#tabs-3">Examinations</a></li>
      <li id="diagnosis"><a href="#tabs-4">Diagnosis</a></li>
</ul> 
```

然后，例如：

```
$('#diagnosis').click(function() {  
    $('.diagnosis').jScrollPane();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-21T12:43:49.050

刚刚遇到同样的问题

```
$( "#tabs" ).tabs({
    //for the initially loaded tab
    create: function( event, ui ) {
        $(ui.panel).jScrollPane();
    },
    //for the tabs opened later
    activate: function( event, ui ) {
        $(ui.newPanel).jScrollPane();
    },
}); 
```

更多信息在这里[http://api.jqueryui.com/tabs/](http://api.jqueryui.com/tabs/)

# java - 从 MoPub sdk 创建一个 jar

> ID：10059060
> 
> 赞同：1
> 
> 时间：2012-04-07T23:00:02.083
> 
> 标签：java, android, mopub

最近我在一个项目中实现了 mopub sdk，mopub sdk 工作正常:)

但是，我将集成作为模块...我需要创建 mopub.jar 并集成到项目中

当我尝试使用 Intellij IDEA 创建 .jar 时存在两个参数（主类和类路径），我没有从 mopub sdk 找到主类

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:53:36.210

您需要集成为库项目：http: [//developer.android.com/guide/developing/projects/projects-eclipse.html](http://developer.android.com/guide/developing/projects/projects-eclipse.html)。

该文档适用于 Eclipse，但 IDEA 应该类似。

# android - Facebook Android SDK，通过定义预定义内容通过提要对话框发布提要

> ID：10059061
> 
> 赞同：1
> 
> 时间：2012-04-07T23:00:14.787
> 
> 标签：android, facebook, dialog

奇怪的是，我使用正确的代码与预定义的内容进行对话。但它不起作用:(如果我错了，请指导我，谢谢

代码：

```
 Bundle params = new Bundle();
    params.putString("message", "Predef Message");

    Facebook facebook = new Facebook("APP_ID");
    facebook.dialog(this, "feed", params, new DialogListener(){

        @Override
        public void onComplete(Bundle values) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onFacebookError(FacebookError e) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onError(DialogError e) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onCancel() {
            return;

        }}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:46:25.797

我发现我们无法预定义要在墙上发布的消息，请检查此[https://developers.facebook.com/docs/reference/androidsdk/dialog/](https://developers.facebook.com/docs/reference/androidsdk/dialog/)它需要用户交互

在墙上发布消息、共享链接或任何其他需要用户交互的信息。因此，一种解决方法是共享一个链接并为其添加描述:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T06:55:18.563

试试这个对我有用

```
public void postfb() {
    Log.i("PostFB", "POST FB ENTERED..!!");
    Facebook facebook;
    // facebook = new Facebook(InfrqncyApplication.APP_ID);
    facebook = new Facebook(APP_ID);
    // replace APP_API_ID with your own
    facebook.authorize(getActivity(), new String[] { "publish_stream",
            "offline_access" }, null);

    Bundle params = new Bundle();
    params.putString("link", imagePostPath);
    params.putString("name", etxtTitle.getText().toString().trim());
    // params.putString("caption","Via Sharesi.es");
    params.putString("description", etxtDescription.getText().toString());
    params.putString("picture", imagePostPath);

    facebook.dialog(getActivity(), "stream.publish", params,
            new DialogListener() {
                @Override
                public void onComplete(Bundle values) {
                    final String postId = values.getString("post_id");
                    if (postId != null) {
                        Toast.makeText(getActivity(),
                                "Posted sucessfully !", Toast.LENGTH_SHORT)
                                .show();
                        AddPost();
                    } else {
                        Log.d("FB Sample App", "Canceled by User");
                    }
                }

                @Override
                public void onFacebookError(FacebookError error) {

                    AddPost();
                    Log.e("fb", "fb error" + error);
                }

                @Override
                public void onError(DialogError e) {

                    AddPost();
                    Log.e("fb", "fb dialog error" + e.getLocalizedMessage());
                }

                @Override
                public void onCancel() {
                    AddPost();
                }

            });

} 
```

# c# - 如何使用 EF 将 Lambda 表达式作为方法参数传递

> ID：10059063
> 
> 赞同：1
> 
> 时间：2012-04-07T23:01:06.917
> 
> 标签：c#, .net, entity-framework, lambda, linq-expressions

如何将 EF 表达式作为方法参数传递？

为了说明我的问题，我创建了一个伪代码示例：

第一个例子是我今天的方法。该示例使用 EF 和 Fancy Retry Logic。我需要做的是封装 Fancy Retry Logic 使其变得更通用且不重复。

在第二个示例中，我希望它是这样的，它带有一个接受 EF 表达式作为参数的辅助方法。

这对 SQL 来说是一件微不足道的事情，但我想用 EF 来做，这样我就可以从强类型对象中受益。

第一个例子：

```
public static User GetUser(String userEmail)
{
    using (MyEntities dataModel = new MyEntities ())
    {
        var query =  FancyRetryLogic(() =>
        {
            (dataModel.Users.FirstOrDefault<User>(x => x.UserEmail == userEmail)));
        });

        return query;
    }
} 
```

第二个例子：

```
T RetryHelper<T>(Expression<Func<T, TValue>> expression)
{
    using (MyEntities dataModel = new (MyEntities ())
    {

        var query = FancyRetryLogic(() =>
                    {
                        return dataModel.expression
                    });
    }
}

public User GetUser(String userEmail)
{
    return RetryHelper<User>(<User>.FirstOrDefault<User>(x => x.UserEmail == userEmail))
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T23:50:18.623

也许是这样的？

```
public TValue RetryHelper<T, TValue>(Func<ObjectSet<T>, TValue> func)
    where T : class
{
    using (MyEntities dataModel = new MyEntities())
    {
        var entitySet = dataModel.CreateObjectSet<T>();
        return FancyRetryLogic(() =>
               {
                   return func(entitySet);
               });
    }
}

public User GetUser(String userEmail)
{
    return RetryHelper<User, User>(u => u.FirstOrDefault(x => x.UserEmail == userEmail));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T23:25:56.860

只是为了发布我们已经讨论过的内容......

这是一个可能对您有所帮助的链接，我认为它与您需要的内容相似。

[将 AsQueryable 与 Linq To 对象和 Linq To SQL 一起使用](http://weblogs.asp.net/zeeshanhirani/archive/2008/07/31/using-asqueryable-with-linq-to-objects-and-linq-to-sql.aspx)

[如何缓存 IQueryable 对象？](https://stackoverflow.com/questions/1008404/how-do-i-cache-an-iqueryable-object)

我见过更好的例子，但我没有方便，基本上就像我提到的那样，您可以使用它来将您的查询保存在一个表单中，以便您可以进一步过滤、更改，直到您知道一切都完成的最后一刻实际上可以实现和枚举查询。

希望能帮助到你

# java - 为用户输入设置超时

> ID：10059068
> 
> 赞同：13
> 
> 时间：2012-04-07T23:01:38.797
> 
> 标签：java

是否可以为用户输入设置计时器？等待 10 秒 - 进行下一个操作等。我的意思是例如

```
 //wait several seconds{
 String s = new BufferedReader(new InputStreamReader(System.in)).readLine();
 //wait server seconds}
 //next operation and etc. 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-07T23:57:37.100

比本杰明考克斯的回答稍微简单一点的方法是做类似的事情

```
int x = 2; // wait 2 seconds at most

BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
long startTime = System.currentTimeMillis();
while ((System.currentTimeMillis() - startTime) < x * 1000
        && !in.ready()) {
}

if (in.ready()) {
    System.out.println("You entered: " + in.readLine());
} else {
    System.out.println("You did not enter data");
} 
```

然而，这将比他的解决方案消耗更多的资源。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-07T23:20:01.110

不是开箱即用的，不。通常，Reader 仅在另一个线程关闭底层流或到达输入末尾时才中断 read() 调用。

由于 read() 并不是那么可中断的，这就变成了一个并发编程问题。知道超时的线程需要能够中断试图读取输入的线程。

本质上，读取线程将不得不轮询 Reader 的 ready() 方法，而不是在没有可读取的内容时锁定在 read() 中。如果您将此轮询和等待操作包装在 java.util.concurrent.Future 中，那么您会在超时的情况下调用 Future 的 get() 方法。

本文详细介绍： [http ://www.javaspecialists.eu/archive/Issue153.html](http://www.javaspecialists.eu/archive/Issue153.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-06T18:28:45.570

```
 BufferedReader inputInt = new BufferedReader(new InputStreamReader(System.in));
 Robot enterKey = new Robot();
 TimerTask task = new TimerTask() {
   public void run() {
                      enterKey.keyPress(KeyEvent.VK_ENTER);
                     }
 };

 Timer timer = new Timer();
 timer.schedule(task, 30 * 1000);
 userInputanswer = inputInt.read();
 timer.cancel(); 
```

# linq - 如何处理依赖表中的缺失行

> ID：10059077
> 
> 赞同：0
> 
> 时间：2012-04-07T23:03:41.877
> 
> 标签：linq, entity-framework-4, linq-to-entities

我有两个通过 Entity Framework 4 访问的 Sql Server 表。它们由一个键连接，在连接的依赖端有 0 到 1 行。这是我的 linq 查询。

```
 var typeDtoList = from type in typeList
                       select (new DxStudioTypeDto(parent, 
                                                   isChildrenLoadOnDemand,
                                                   businessFacade,
                                                   server,
                                                   database,
                                                   type.typeGuid,
                                                   type.typeName,
                                                   type.writerName,
                                                   type.managerName,
                                                   type.Reporting_Type.MRef_Status,
                                                   type.Reporting_Type.Exists_In_Drop)); 
```

显然，如果 Reporting_Type 返回零行，则 linq 表达式会在 DxStudioTypeDto 构造函数的最后两个参数上引发空引用异常：

```
type.Reporting_Type.MRef_Status,
type.Reporting_Type.Exists_In_Drop)); 
```

有没有办法检测 Reporting_Type 行的缺失并替换默认字符串？DxStudioTypeDto 是一个不可变类型，所以当我实例化一个新对象时，我需要所有可用的参数。针对这种情况还有其他策略吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T23:12:13.187

你试过这个吗？

```
((type.Reporting_Type == null) ? "some default value" : type.Reporting_Type.MRef_Status) 
```

我知道有时 EF 引擎会为这种事情返回“提供程序不支持此操作”，但值得一试。

# php - 我如何在 php 中即时创建文件并下载

> ID：10059085
> 
> 赞同：1
> 
> 时间：2012-04-07T23:06:20.847
> 
> 标签：php, download

我有以下 php 脚本，它检查复选框元素的提交值并在选中时打印它们的值。

```
<?php
echo '<table class="features-table">';

echo "<tbody>";
for ($i=1;$i<=2284;$i+=1) {
  if($_POST[$i]) {
    echo"<tr>";
            echo "<td><a href=http://www.m-w.com/dictionary/" . $_POST[$i] . ">" . $_POST[$i].  "</a></td>";
    echo "</tr>";
  }
}

?> 
```

我想让这些数据显示给用户，可以作为文本文件下载。我应该如何创建下载按钮。在这种情况下我是否需要单独的 php 脚本，我将如何获取提交给这个 php 脚本的表单数据？

从谷歌搜索我得到我需要使用类似于下面的代码

```
header("Content-type: text/plain");
header("Content-Disposition: attachment; filename=list.txt");
header("Pragma: no-cache");
header("Expires: 0");
echo 'data1,data2,data3...'; 
```

但我不知道如何将它与当前的 php 脚本集成。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T23:34:59.273

我认为没有必要即时创建文件。

我会通过以下方式做到这一点....

将数据作为隐藏字段提供，并将这些字段与下载按钮一起包含在表单标签中。当用户单击下载按钮时，所有表单数据都将在脚本中可用。然后，您可以对数据执行任何您想要执行的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T05:33:17.780

发布可能在将来帮助其他人的代码

在 sudip 回答后，我做了以下更改

```
<?php
$list = "Unknown words from GSL\n\n";
    echo '<table class="features-table">';
    echo "<tbody>";
    for ($i=1;$i<=2284;$i+=1) {
      if($_POST[$i]) {
        echo"<tr>";
                echo "<td><a href=http://www.m-w.com/dictionary/" . $_POST[$i] . ">" . $_POST[$i].  "</a></td>";
                $list = $list . $_POST[$i] . "\n";
        echo "</tr>";
      }
    }

echo'
   <form action="download.php" method="post">
   <input type="hidden" name="wordlist" value="'. $list . '">

   <center><input type="submit" name="submit_parse" style="margin-bottom: 20px; margin-top: 10px;width:200px; font-face: "Comic Sans MS"; font-size: larger; " value=" Download as a text file "> </center>
   </form>
';
?> 
```

我必须创建单独的 php 文件，因为 header() 必须在发送任何实际输出之前调用，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。

download.php 的内容

```
<?php
header("Content-type: text/plain");
header("Content-Disposition: attachment; filename=list.txt");
header("Pragma: no-cache");
header("Expires: 0");
echo $_POST["wordlist"] ;
?> 
```

# python-2.7 - 加载泡菜文件

> ID：10059086
> 
> 赞同：1
> 
> 时间：2012-04-07T23:06:35.947
> 
> 标签：python-2.7, pickle

我正在尝试让“泡菜入门”脚本正常工作。我设法从文件中保存了一个泡菜文件，然后加载它。但是当我将泡菜文件保存在一个文件中（`main.py`在这种情况下）并从另一个文件中加载它时，我得到一个错误。我可能错过了一些小东西，但不知道是什么。

主文件

```
import pickle

class Node:
  """This class represents a node"""

  def __init__(self, value = None):
    self.val = value

  def toString(self):
    return self.val

class Link:
  """This class represents a link between 2 nodes"""

  def __init__(self, sourceNode, targetNode, LinkWigth):
    self.source = sourceNode
    self.target = targetNode
    self.wight = LinkWigth

  def setWeight(self, newWeight):
    self.wight = newWeight

  def toString(self):
    return self.wight

class Graph:
  """This class represents a graph"""

  def __init__(self):
    self.nodes = []
    self.links = []

  def addNode(self, node):
    self.nodes.append(node)

  def addLink(self, link):
    self.links.append(link)

  def getInDegree(self, node):
    counter = 0
    for link in self.links:
      if link.target == node:
        counter +=1
      else:
        print "target is: %s" % link.target.toString()
        print "source is: %s" % link.source.toString()
    return counter

  def toString(self):
    for link in self.links:
        print link.toString()
    for node in self.nodes:
        print node.toString()

if __name__ == "__main__":
    n1 = Node(4)
    l1 = Link(n1, n1, 1)
    g = Graph()
    g.addNode(n1)
    g.addLink(l1)
    pickle.dump(g, open('haha', 'wb') ) 
```

pickleLoader.py

```
import pickle
import main

n = main.Node(44)
print n.toString()
g = pickle.load( open('haha', 'rb') )
print "ha" 
```

错误

```
C:\Users\R\Desktop\pickle test>main.py

C:\Users\R\Desktop\pickle test>pickleLoader.py
44
Traceback (most recent call last):
  File "C:\Users\R\Desktop\pickle test\pickleLoader.py", line 7, in <module>

    g = pickle.load( open('haha', 'rb') )
  File "C:\Program Files\Python27\lib\pickle.py", line 1378, in load
    return Unpickler(file).load()
  File "C:\Program Files\Python27\lib\pickle.py", line 858, in load
    dispatch[key](self)
  File "C:\Program Files\Python27\lib\pickle.py", line 1069, in load_inst
    klass = self.find_class(module, name)
  File "C:\Program Files\Python27\lib\pickle.py", line 1126, in find_class
    klass = getattr(mod, name)
AttributeError: 'module' object has no attribute 'Graph'

C:\Users\R\Desktop\pickle test> 
```

我想问题出在命名空间上，因为`main.py`已经导入，但我不知道如何让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T23:58:14.073

这似乎与如何定义与模块相关的类有关。让它工作的一种快速方法是将模块的`main`组件直接导入`pickleLoader`：

```
from main import Graph, Node, Link 
```

更好的解决方案可能是将通用组件（图形、节点、链接）移动到它们自己的模块中，然后将该模块导入到`main`和`pickleLoader`.

# php - 当我单击下一步时，从数组列表中打开随机 php 页面

> ID：10059089
> 
> 赞同：1
> 
> 时间：2012-04-07T23:06:47.303
> 
> 标签：php, arrays, random, shuffle

我已经走到了死胡同。我已经为此工作了 3 周，但没有任何结果。

我有 10 个 php 页面 ( `1.php`, `2.php`, ..., `10.php`) 和一个起始页面 ( `start.php`)。

我要做的就是随机化这 10 个页面而不重复，所以当我单击“下一步”时，`start.php`它应该转到 10 个页面之一（例如，它转到`4.php`）。当我单击“下一步”时，`4.php`它应该重定向到 10 个页面中的另一个页面，但`4.php`.

它应该继续此操作，直到显示所有数字 ( `1.php`- `10.php`)。此时它应该再次随机化。当我在显示的最后一个数字中单击“下一步”时`.php`，它应该随机化数字并返回到随机列表中的第一个。

这是我到目前为止所拥有的：

`start.php`：

```
<?php $vidcount = 1; ?>
<? include ("source.php"); ?>
<a href="$nextvid[$vidcount].php">next page</a> 
```

`source.php`：

```
<?php 
include ("start.php");

$numbers = range(1, $total_songs);

if(($vidcount == $total_songs)||($vidcount == 1)){
shuffle($numbers);
$vidcount = 1;
}

$nextvid[1] = $numbers[0];
$nextvid[2] = $numbers[1];
$nextvid[3] = $numbers[2];
$nextvid[4] = $numbers[3];
$nextvid[5] = $numbers[4];
$nextvid[6] = $numbers[5];
$nextvid[7] = $numbers[6];
$nextvid[8] = $numbers[7];
$nextvid[9] = $numbers[8];
$nextvid[10] = $numbers[9];
?> 
```

`1.php`, `2.php`, ... `10.php`:

```
<?php
include("source.php");?>
<?php echo $vidcount; ?>

<a href="testrun[<?php echo $nextvid[$vidcount];  ?>].php">next page</a>
<?php $vidcount++;?> 
```

`1.php`-`10.php`有相同的代码。我还有一个`source.php`应该跟踪显示的数字并在显示所有数字时重新洗牌。

请帮忙。我将非常感谢我能得到的任何帮助。

您不必使用上面的代码，只要我得到的代码有效，如果您有不同的想法，我不介意从头开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T23:10:15.663

那么首先为什么你有十个文件，而你可以只有一个文件并且`?id=X`在 URL 中？但别介意。

您最好的选择是使用会话变量。像这样的东西：

```
<?php
    session_start();
    if( !isset($_SESSION['sequence']) || !$_SESSION['sequence']) {
        $_SESSION['sequence'] = shuffle(range(1,10));
    }
    $next = array_shift($_SESSION['sequence']);
    // now use $next to create your "Next page" link.
?> 
```

# java - 如何记录整数数组和重复的打印频率

> ID：10059090
> 
> 赞同：2
> 
> 时间：2012-04-07T23:06:53.717
> 
> 标签：java, arrays

注意：只是练习题，不是分数。

这是第一年Java课程中给出的一个练习题：

> 设计和实现一个应用程序，它可以由用户读取任意数量的整数，这些整数在 0 到 50 的范围内（包括 0 到 50），并计算每个输入的出现次数。处理完所有输入后，打印输入一次或多次的所有值（以及出现次数）。此外，编写一个不返回任何值的方法，该方法将计算用户输入的所有数字的出现次数的平均值。

这就是我所拥有的（我已经跳过了“平均发生”部分，直到我清理它）：

```
import java.util.Scanner;
public class Main 
{       
public static Scanner scan = new Scanner(System.in);

    public static int[] userIntegers()      // this method will build the array of integers, stopping when an out-of-range input is given
    {
            System.out.println("Enter the number of integers to be recorded:  ");
            int numInts = scan.nextInt();

            int[] userArray = new int[numInts];
            int i = 0;
            while(i < numInts)
            {
                    System.out.println("Enter an integer between 1-50 inclusive:  ");
                    int userInteger = scan.nextInt();
                    if(isValidInteger(userInteger))
                    {
                            userArray[i] = userInteger;
                            i++;
                    }
                    else if(isValidInteger(userInteger) == false)
                    {
                            System.out.println("Try again.");
                    }                       
            }
            return userArray;
    }

    public static void occurrenceOutput(int[] input)         // this method will print the occurrence data for a given array
    {   
        int[] occurrenceArray = new int[51];

            int j = 0;
            while(j < 51)  // iterates through all integers from 0 to 50, while the integer in the array is equal to integer j, the corresponding occurance array element increments.
            {
                    for(int eachInteger : input)
                    {
                            occurrenceArray[j] = (eachInteger == j)? occurrenceArray[j]+=1:  occurrenceArray[j];
                    }
                    j++;
            }               

            int k = 0;
            for(int eachOccurrence : occurrenceArray) // as long as there is more than one occurrence, the information will be printed.
            {
                    if(eachOccurrence > 1)
                    {
                            System.out.println("The integer " + k + " occurrs " + eachOccurrence + " times.");
                    }
                    k++;
            }
    }

    public static boolean isValidInteger(int userInput)     // checks if a user input is between 0-50 inclusive        
    {        
        boolean validInt = (51 >= userInput && userInput >= 0)?  true:  false;
            return validInt;
    }

    public static void main(String[] args)
    {
        occurrenceOutput(userIntegers());
    }
} 
```

有人可以指出我更优雅的方向吗？

编辑：感谢您的帮助！这就是我现在的位置：

```
import java.util.Scanner;
public class simpleHist
{
    public static void main(String[] args)
{
            getUserInputAndPrint();
            getIntFreqAndPrint(intArray, numberOfInts);
    }

    private static int numberOfInts;
    private static int[] intArray;
    private static int[] intFreqArray = new int[51];

    public static void getUserInputAndPrint() 
    {
            //  The user is prompted to choose the number of integers to enter:
            Scanner input = new Scanner(System.in);
            System.out.println("Enter the number of Integers:  ");
            numberOfInts = input.nextInt();

            //  The array is filled withchInteger = integer; integers ranging from 0-50:
            intArray = new int[numberOfInts];
            int integer = 0;
            int i = 0;
            while(i < intArray.length)
            {
                    System.out.println("Enter integer value(s):  ");
                    integer = input.nextInt();
                    if(integer > 50 || integer < 0)
                    {
                            System.out.println("Invalid input.  Integer(s) must be between 0-50 (inclusive).");
                    }
                    else
                    {
                            intArray[i] = integer;
                            i++;
                    }
            }

            // Here the number of integers, as well as all the integers entered are printed:
            System.out.println("Integers: " + numberOfInts);    
            int j = 0;
            for(int eachInteger : intArray)
            {
                    System.out.println("Index[" + j + "] : " + eachInteger);
                    j++;
            }
    }

public static void getIntFreqAndPrint(int[] intArray, int numberOfInts)
{
    //  Frequency of each integer is assigned to its corresponding index of intFreqArray:
    for(int eachInt : intArray)
    {
        intFreqArray[eachInt]++;
    }

    //  Average frequency is calculated:
    int totalOccurrences = 0;
    for(int eachFreq : intFreqArray)
    {
        totalOccurrences += eachFreq;
    }
    double averageFrequency = totalOccurrences / numberOfInts;

    //  Integers occurring more than once are printed:
    for(int k = 0; k < intFreqArray.length; k++)
    {
        if(intFreqArray[k] > 1)
        {
            System.out.println("Integer " + k + " occurs " + intFreqArray[k] + " times.");
        }
            }

            //  Average occurrence of integers entered is printed:
            System.out.println("The average occurrence for integers entered is " + averageFrequency);
            }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T23:09:44.823

你实际上是在寻找一个[histogram](http://en.wikipedia.org/wiki/Histogram)。您可以使用 a 来实现它[`Map<Integer,Integer>`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)，或者由于元素的范围限制在 0-50，您可以使用具有 51 个元素 [0-50] 的数组，并`histogram[i]`在读取时增加`i`。

奖励：理解这个想法，你已经理解了[计数排序的基础知识](http://en.wikipedia.org/wiki/Counting_sort)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T23:11:14.480

要计算出现次数，您可以执行以下操作：

```
 for(int eachInteger : input) {
      occurrenceArray[eachInteger]++;
 } 
```

这将替换您的 while 循环。

# iphone - 如何使用 NSObject 子类？

> ID：10059094
> 
> 赞同：0
> 
> 时间：2012-04-07T23:07:26.820
> 
> 标签：iphone, objective-c, ios, cocoa-touch

所以我创建了一个名为 NSObject 的子类`Query`

```
@interface Query : NSObject

@property (nonatomic, assign) NSNumber *weight;
@property (nonatomic, assign) NSNumber *bodyFat;
@property (nonatomic, assign) NSNumber *activityLevel;

@end 
```

这对于设置对象的属性是否正确？

在 VC1 中：

```
BodyFatViewController *aViewController = [[BodyFatViewController alloc]init];
aViewController.query = self.query;
[self.navigationController pushViewController:aViewController animated:YES]; 
```

在 VC2 中：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    Query *anQuery = [[Query alloc]init];
    anQuery.bodyFat = [self.bodyFatArray objectAtIndex:row];
    anQuery.weight = self.query.weight;
    self.query = anQuery;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T00:11:25.313

在两个 VC 之间共享一个对象是非常自然的：

在 VC1 中：

```
@property (strong, nonatomic) Query *query;
@synthesize query=_query;

// init it
self.query = [[Query alloc] init];
self.query.weight = [NSNumber numberWithInt:150];

// when it's time to present VC2:
BodyFatViewController *aViewController = [[BodyFatViewController alloc]init];
aViewController.query = self.query;
[self.navigationController pushViewController:aViewController animated:YES]; 
```

然后在VC2中：

```
// this is in the public interface in VC2.h
//
@property (strong, nonatomic) Query *query; 
```

**不要在 VC2 中分配/初始化它。VC1做到了！！** 但请随意设置或覆盖值...

```
self.query.bodyFat = [NSNumber numberWithFloat:0.5]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T23:12:06.820

不要创建新查询，只需使用以下属性：

```
self.query.bodyFat = [self.bodyFatArray objectAtIndex:row]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T23:54:56.813

是的，这是正确的。

`self.query = newQueryObject`

或者

`myBodyFatViewController.query = newQueryObject`

两者都有效。

# logging - sendmail 记录错误到我的 httpd error_log？

> ID：10059095
> 
> 赞同：0
> 
> 时间：2012-04-07T23:07:29.703
> 
> 标签：logging, centos, sendmail

我刚刚将我的服务器从 Centos 4.9 升级到 Centos 6.2

以下行被记录到我的**/etc/httpd/logs/error_log**（没有时间戳，但它至少每隔几秒记录一次）：

```
sendmail: Not running with correct effective GID.  Is sendmail binary setgid mailtrap? 
```

知道它可能是什么或如何阻止此错误以被记录吗？

* * *

我能想到的只是做以下事情......而且很长一段时间，我得到了同样的错误：

```
root@vps1 [/]# whereis sendmail
sendmail: /usr/sbin/sendmail /usr/lib/sendmail
root@vps1 [/]# /usr/lib/sendmail stop
sendmail: Not running with correct effective GID.  Is sendmail binary setgid mailtrap?
sendmail: Not running with correct effective GID.  Is sendmail binary setgid mailtrap?
root@vps1 [/]# /usr/lib/sendmail restart
sendmail: Not running with correct effective GID.  Is sendmail binary setgid mailtrap?
sendmail: Not running with correct effective GID.  Is sendmail binary setgid mailtrap? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T23:13:28.733

只需重建 sendmail 即可解决该问题

主机支持还向我发送了以下信息（可能会帮助其他人查找同样的错误）

```
-bash-4.1# hostname
vps1.myhostname.com
-bash-4.1# sendmail
Exim is a Mail Transfer Agent. It is normally called by Mail User Agents,
not directly from a shell command line. Options and/or arguments control
what it does when called. For a list of options, see the Exim documentation.
-bash-4.1# 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T22:28:55.293

这为我修复了它：

```
chown root:mailtrap /usr/sbin/sendmail
chmod 2755 /usr/sbin/sendmail 
```

# objective-c - 具有可达性的 Apple Mach-O 链接器 (Id) 错误

> ID：10059098
> 
> 赞同：2
> 
> 时间：2012-04-07T23:08:02.577
> 
> 标签：objective-c, ios, xcode, reachability, mach-o

当我尝试构建使用可达性的项目时，我不断收到此错误（该错误仅在我尝试实现可达性后出现）： ![在此处输入图像描述](../Images/9a839472f10ee00f3967800de9cdd9ce.png)

我在互联网上阅读了其他一些帖子，但似乎没有任何效果。我添加了 SystemConfiguration.framework （项目，构建阶段，+），但这不起作用（当错误出现时我已经添加了它）。这是我实现文件的方式：

```
#import <UIKit/UIKit.h>
#import "Reachability.h"

@interface catalogDetailView : UIViewController{

}

-(void)checkNetwork;

@end 
```

然后在.m中：

```
#import "catalogDetailView.h"
-(void)checkNetwork{
    if ([self reachable]) {
        NSLog(@"Connected to Network");
    }
    else {
        NSLog(@"Connection Failed");
    }
}
-(BOOL)reachable {
    Reachability *r = [Reachability reachabilityWithHostName:@"apple.com"];
    NetworkStatus internetStatus = [r currentReachabilityStatus];
    if(internetStatus == NotReachable) {
        return NO;
    }
    return YES;
} 
```

因此，如果您能提供帮助，那就太棒了！谢谢 ;) 卢克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T23:19:33.663

您需要添加`Reachability.m`到目标的“编译源”构建阶段。

一种方法：

1.  `Reachability.m`在 Xcode 窗口左侧的项目导航器中选择。如果您没有看到它，请选择菜单 View > Navigator > Show Project Navigator。
2.  在 Xcode 窗口的右侧显示文件检查器。查看 > 实用程序 > 显示文件检查器。
3.  在 Target Membership 部分，选中目标旁边的复选框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T23:16:13.077

我敢打赌你的“编译源列表”不包含`reachability.m`. 将它拖到构建阶段选项卡下的列表中。我经常发现，在向项目添加文件时，Xcode 往往不会将文件添加到您的目标的编译列表中（因为默认是不添加它们）。

# android - http连接上的零星超时

> ID：10059100
> 
> 赞同：2
> 
> 时间：2012-04-07T23:08:41.627
> 
> 标签：android, http

在我的应用程序中，我使用 http 连接到我的服务器（我正在同步本地数据库）。这是代码：

```
HttpClient httpClient = new DefaultHttpClient();
httpClient.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
HttpConnectionParams.setConnectionTimeout(httpClient.getParams(),13500);
HttpConnectionParams.setSoTimeout(httpClient.getParams(),27000);

HttpResponse response = httpClient.execute(httpRequest); 
int statusCode = response.getStatusLine().getStatusCode();
HttpEntity entity = response.getEntity();
if (entity != null) {
    String data = EntityUtils.toString(entity);
    JSONObject jObj = new JSONObject(data);
    entity.consumeContent();
} 
```

此代码针对多个 httpRequest 执行，以从服务器提取数据并将更新发送到服务器。

直到最近这段代码并没有给我带来任何麻烦，但现在我正在努力解决一个奇怪的问题：有时代码按预期工作，但有时我得到的只是超时。

更多细节 - 当它不起作用时，它不像我得到零星的超时 - 我发送的每个请求都以超时结束。我可以重新启动应用程序并看到这种行为，然后在几个应用程序重新启动后就像诅咒被解除了 - 不是一次超时。然后我得到的只是超时。

我很确定问题出在手机端，因为我也有一个 iPhone 应用程序与同一个应用程序交谈没有问题。也有好几次，我在一台 android 设备上观察到这个问题，而在不同设备上的同一个应用程序运行良好。

我在这里想念什么？

# core-data - 多对多的核心数据迁移

> ID：10059103
> 
> 赞同：1
> 
> 时间：2012-04-07T23:09:21.497
> 
> 标签：core-data, many-to-many, core-data-migration

我正在尝试使用实体映射模型来迁移我的应用程序中现有的多对多关系。我有以下关系

```
Teams <<----->> Players 
```

一个团队实体可以有多个玩家，一个玩家可以是多个团队的一部分。现在，我试图通过引入具有以下属性的新实体来将这种关系拆分为一对多

```
TeamToPlayer
  Team *team
  Player *player 
```

所以新的关系看起来像

```
Team <--->> TeamToPlayer
Player <-->> TeamToPlayer 
```

我试图弄清楚应该使用哪种实体映射来转换我的核心数据模型。是否可以使用映射模型执行上述操作，或者我是否需要通过继承 NSMigrationPolicy 类来编写代码。任何想法都会非常有帮助。

谢谢，贾维德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:00:02.697

在尝试了解迁移过程和实体映射模型几天后，我终于设法找到了解决方案。我惊讶地发现它是如此简单。

我使用 Source 从 Player & Team 到 TeamToPlayer 创建了两个实体映射，并将源实体的关系映射到目标实体关系。并更新了 PlayerToPlayer 和 TeamToTeam 关​​系映射中的关系映射名称以使用新的实体映射。一切都刚刚好。

# asp.net-mvc-3 - 由于 DropDownList，视图上的 MVC3 验证仍然无效

> ID：10059107
> 
> 赞同：1
> 
> 时间：2012-04-07T23:09:52.813
> 
> 标签：asp.net-mvc-3, razor

我不得不在我的创建视图中添加一个手动 DropDownList，为用户提供 2 个“输入”选项。

现在，当我保存信息时验证不起作用，即使我的代码现在是：

```
 <div class="editor-field">
            <select name="type" id="type">
            <option value></option>
            <option value="1" id="apple">Apple</option>
            <option value="2" id="banana">Banana</option>
            </select>
            <span class="field-validation-valid" data-valmsg-for="type" data-valmsg-replace="true"></span> 
```

如何在“类型”字段中获取内置验证。我在模型类中将此作为“必需”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T00:06:40.990

您的下拉名称和 ID 应该是您的模型的属性。

```
 <select name="type" id="type"> 
```

在模型中包含类型作为属性并使其成为必需。

```
public class myModel{
    [Required]
    public string type{get; set;}
} 
```

作为类型 ac# 关键字，我建议您使用其他名称作为您的属性名称，例如**“FruitDD”**

# android - 如何在自动生成的 Android ListViews 上添加点击监听器

> ID：10059110
> 
> 赞同：0
> 
> 时间：2012-04-07T23:10:09.330
> 
> 标签：android, eclipse, listview, android-listview

我在我的班级 MyActivity 中添加了以下内容：

```
private void updateMyList(){
    listing=new ArrayList<listing>();
    for(int i =0;i<10;i++)
    {
        Users user=new Users();
        user.setListingName("Name" + i);
        user.setListingPhone("i" + i);
        listing.add(user);
    }
    MyListAdapter lfa = new MyListAdapter(this, listing);
    ((ListView)findViewById(R.id.listFeed)).setAdapter(lfa);

} 
```

此代码生成 10 个列表视图，因此我想添加一个单击侦听器，因此当我单击 10 个列表中的一个时，我会收到一条消息或其他东西。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T00:17:08.893

我不明白为什么你不能`onItemClickListener`在你的循环中添加一个`ListView`. 简而言之，使用 your`Adapter`创建列表，然后附加侦听器：

```
 lv.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, connections.toArray(new String[connections.size()])));
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View item, int position, long id) {

                String item = (String) lv.getItemAtPosition(position);

            }
        }); 
```

如果您想知道每个列表中的哪个项目被单击，那么还有一种`setOnClickListener`方法，以防您只想知道是否`ListView`单击了 a。

# api - 如何使用 WSDL 格式的 Ideone API

> ID：10059113
> 
> 赞同：2
> 
> 时间：2012-04-07T23:10:19.943
> 
> 标签：api, compiler-construction, wsdl

我想建立自己的在线编译器。我想为此使用 Ideone Api。但它的 api 以 WSDL 格式提供。我非常努力，但可以找到任何关于如何从 WSDL 中提取数据的教程。请告诉一些使用 Ideone api 的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T19:48:35.833

也许一个迟到的答案，但仍然可能对其他人有用。这是 PHP 中的一个简单示例，它具有本机 SOAP 库：http: [//ideone.com/3JBbt](http://ideone.com/3JBbt)

遗憾的是我的服务器不支持 PHP 的 SOAP 库，所以我在演示中使用了 NuSOAP，现在您有两种方法可以使用 IDE One API。

这里有一个简单的演示：[http ://rendon.x10.mx/files/ide1example/](http://rendon.x10.mx/files/ide1example/)

这是代码：[http ://rendon.x10.mx/files/ide1example.tar.gz](http://rendon.x10.mx/files/ide1example.tar.gz)

**注意：**您需要在 ideone.php 中提供您自己的用户名和密码。

```
 $params = array(
            'user' => $user, // your user
            'pass' => $pass, // your pass
            'sourceCode' => $code,
            'language' => $lang,
            'input' => $input,
            'run' => $run,
            'private' => $private
        ); 
```

有关函数的更多信息，请参阅 API 文档：http: [//ideone.com/files/ideone-api.pdf](http://ideone.com/files/ideone-api.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:22:02.173

WSDL 顾名思义，它描述了与 web 服务通信的功能或方法，

正如你所说你有 WSDL，那么我建议你创建一个 WebService 客户端并开始在你的程序中使用它。对于创建 WebService 客户端，我建议您使用一些工具，例如：[http](http://cxf.apache.org/) : //cxf.apache.org/，它们为您提供了创建 WS2js、WS2Java 等 WS 客户端的好工具，有点

正如你特别提到的 Ideone，我也在研究它，我建议你看看在 Netbeans 中从 WSDL 创建一个 WSclient（为此你需要下载一个插件 JAX-RPC）或参考这个项目[http： //code.google.com/p/ideone-cli/](http://code.google.com/p/ideone-cli/)，他们有一个 ideone WS 客户端的工作实现。

# django - 将用户限制为单个应用程序

> ID：10059114
> 
> 赞同：1
> 
> 时间：2012-04-07T23:10:29.767
> 
> 标签：django, permissions

我有一个包含多个应用程序的 Django 项目。我想在用户创建时限制特定用户只能访问一个特定的应用程序，即不必说`views.py`使用诸如`@permission_required`.

这可能吗？也就是说，是否可以声明用户“A”只能使用应用程序“X”而不修改任何应用程序“Y”的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T23:12:16.860

您可以编写一些实现该[`process_view`](https://docs.djangoproject.com/en/dev/topics/http/middleware/#process-view)方法的中间件，然后检查视图函数属于哪个应用程序。

例如，这是您可以做到的一种（可能是错误的）方式：

```
class RestrictAppMiddleware(object):
    def process_view(self, request, view_func, *args, **kwargs):
        view_module = view_func.__module__
        allowed_apps = apps_visible_to_user(request.user)
        if not any(app_name in view_module for app_name in allowed_apps):
            return HttpResponse("Not authorized", status=403) 
```

显然你需要改进启发式（例如，这个也允许用户访问“foo”视图“foobar”）并考虑依赖 Django 内置视图的应用程序（例如，`direct_to_template`）......但这是我会这样做的方式。

# php - 在 PHP 中将“%23”转换为“#”

> ID：10059115
> 
> 赞同：0
> 
> 时间：2012-04-07T23:10:31.140
> 
> 标签：php, hashtag, htmlspecialchars

网址：**example.com/search :#searchWord**

由于`#`未发送到服务器，因此将其更改为`%23`.

在我要显示的搜索页面中

**结果：#searchWord**

但我得到的是`%23searchWord`。我试过了`htmlspecialchars()`，但没有任何反应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T23:16:24.877

要实现您的目标，请使用[urldecode](http://php.net/manual/en/function.urldecode.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T07:14:55.940

```
echo urlencode('example.com/search:#searchWord');
// output: example.com%2Fsearch%3A%23searchWord

echo urldecode('example.com%2Fsearch%3A%23searchWord');
// output: example.com/search:#searchWord 
```

# php - 阅读肥皂标题

> ID：10059117
> 
> 赞同：-1
> 
> 时间：2012-04-07T23:11:00.307
> 
> 标签：php, soap

我正在 php 中发送 Soap 请求，并希望查看完整的 xml 肥皂请求。如何输出 xml 或在 firefox 中查看 xml？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T23:16:49.740

来自[http://www.php.net/manual/en/soapclient.getlastrequest.php](http://www.php.net/manual/en/soapclient.getlastrequest.php)

```
<?php
$client = SoapClient("some.wsdl", array('trace' => 1));
$result = $client->SomeFunction();
echo "REQUEST:\n" . $client->__getLastRequest() . "\n"; 
```

还有`__getLastRequestHeaders()`, `__getLastResponse()`, 和`__getLastResponseHeaders()`

# list - 在 Haskell 中使用用户定义类型的 Consing 列表

> ID：10059125
> 
> 赞同：0
> 
> 时间：2012-04-07T23:12:44.650
> 
> 标签：list, haskell, types, user-defined-types

我有我自己定义的这种类型：

```
data Item =
Book String String String Int     -- Title, Author, Year, Qty
| Movie String String String Int  -- Title, Director, Year, Qty
    | CD String String String Int deriving Show  -- Title, Artist, Year, Qty 
```

我创建了一个空列表

```
all_Items = [] 
```

使用以下功能，我试图将 Item (Book) 类型的新书插入 all_Items

```
addBook all_Items = do
    putStrLn "Enter the title of the book"
    tit <- getLine
    putStrLn "Enter the author of the book"
    aut <- getLine
    putStrLn "Enter the year this book was published"
    yr <- getLine
    putStrLn "Enter quantity of copies for this item in the inventory"
    qty <- getLine
    Book tit aut yr (read qty::Int):all_Items
    return(all_Items) 
```

但是，我收到此错误：

```
Couldn't match expected type `IO a0' with actual type `[a1]' 
```

错误指向我使用 consing 运算符将新书添加到列表的行。我可以推测这是一个类型错误，但我无法弄清楚我做错了什么以及如何解决它。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T23:25:04.957

这条线

```
 Book tit aut yr (read qty::Int):all_Items 
```

获取您现有的 list`all_Items`和一个新`Item`值，并*创建一个新列表*，其中包含新`Item`值和`all_Items`. *它不修改* `all_Items`.

但这不是错误消息的内容。

该行位于执行 i/o 的 do-block 中。每个语句必须是类型表达式`IO something`（可能将值绑定`something`到变量）或 let 语句。

而这条线

```
 Book tit aut yr (read qty::Int):all_Items 
```

是类型的表达式`[Item]`。但是 an`IO something`是意料之中的，因此出现了错误。

**如何修复这些错误：**将 do-block 的最后两行替换为

```
 return (Book tit aut yr (read qty::Int):all_Items) 
```

**另请注意**

*   你有

    ```
    all_Items = [] 
    ```

    和

    ```
    addBook all_Items = do 
    ```

    在第一种情况下`all_Items`是顶级值。在第二种情况下，它是`addBook`函数的参数。它们是不同的东西。

*   你已经告诉 Haskell`Book`构造函数的第四个参数是一个`Int`. 你不需要重复自己。所以最后一行`addBook`可以是

    ```
     return (Book tit aut yr (read qty) : all_Items) 
    ```

# ubuntu - 在 Ubuntu 上安装 ACE 的问题

> ID：10059128
> 
> 赞同：2
> 
> 时间：2012-04-07T23:13:08.480
> 
> 标签：ubuntu, compiler-errors, ubuntu-11.10, ace

我拥有 Ubuntu 11.10 (GNU/Linux 3.0.0-18-server x86_64)，我正在尝试使用本手册安装 Single ACE 6.1.1：[http ://www.dre.vanderbilt.edu/~schmidt/DOC_ROOT/ACE /ACE-INSTALL.html#unix_traditional](http://www.dre.vanderbilt.edu/~schmidt/DOC_ROOT/ACE/ACE-INSTALL.html#unix_traditional)

自版本 6.0.7 以来安装发生了变化我认为所以在我执行命令“make”后会出现一些错误，这是他的错误，我希望有人可以帮助我：

```
g++ -fno-strict-aliasing -fvisibility=hidden -fvisibility-inlines-hidden -O3 -ggdb -pthread -Wall -W -Wpointer-arith -pipe -D_GNU_SOURCE   -I/opt/ace/ACE_wrappers -D__ACE_INLINE__ -I../../..  -Wl,-E -L/opt/ace/ACE_wrappers/lib -L.  -L../../../lib  -Wl,-R/usr/local/lib -Wl,--enable-new-dtags -o taoout .obj/test.o .obj/tao.o -lACE -ldl -lrt
.obj/test.o: In function `main':
/opt/ace/ACE_wrappers/apps/gperf/tests/test.cpp:28: undefined reference to `in_word_set(char const*, unsigned int)'
/opt/ace/ACE_wrappers/apps/gperf/tests/test.cpp:28: undefined reference to `in_word_set(char const*, unsigned int)'
collect2: ld returned 1 exit status
make[1]: *** [taoout] Error 1
make[1]: Leaving directory `/opt/ace/ACE_wrappers/apps/gperf/tests'
make: *** [taoinset] Error 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T10:49:24.403

类似的命令：

```
make clean 
```

解决了这个问题 - 但你必须删除构建文件夹并重新完成安装过程，但它会在之后工作:) 我花了一些时间来解决，但现在没关系。

# java-me - J2ME 模拟器中的媒体异常：制作相机快照时超时

> ID：10059131
> 
> 赞同：0
> 
> 时间：2012-04-07T23:13:33.457
> 
> 标签：java-me

我曾尝试在 netbeans 6.7、7.0 版本中为相机快照应用程序运行一些 J2ME 代码，但它显示 BUILD IS SUCCESSFUL!，模拟器无法拍摄快照，而是显示一条消息媒体异常：在制作相机快照时超时.请帮助我，如果你想要代码，我可以给他们看。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-09T06:53:51.913

我遇到了这个问题，但我无法解决它，虽然它在设备上运行良好。如果你想在拍摄后使用捕获的图像，你可以使用图像（在你的资源中）、文件连接 API 和 getResourceAsStream() 来编写模拟器中的那个图像，然后

# jquery - 如何从 jquery json 解析中获取图像大小？

> ID：10059135
> 
> 赞同：1
> 
> 时间：2012-04-07T23:14:34.067
> 
> 标签：jquery, json, image-size

如何从 jquery json 解析中获取图像大小？我放了一个`each function`，首先将所有图像下载到 html 部分，然后尝试使用`width()`&来调整图像大小，但是在图像加载之前`height()`我遇到了一些麻烦`width()`。`height()`

[http://jsfiddle.net/7eLj4/](http://jsfiddle.net/7eLj4/)中的示例代码

jQuery代码：

```
$(document).ready(function(){
    var data = '[{"image":"http:\/\/pcdn.500px.net\/6269271\/a85b2995b4d80748831492be5e8a3689895a2b0e\/4.jpg"},{"image":"http:\/\/pcdn.500px.net\/5953805\/d0dd841969187f47e8ad9157713949b4b95b3bda\/4.jpg"},{"image":"http:\/\/pcdn.500px.net\/5735750\/0dd26cb9f53b7bbbedf1b65c0d0aac013f77466c\/4.jpg"}]';
    var obj = $.parseJSON(data);
    $.each(obj, function(index,item) {
       $('#imagewrap').append('<img class="images" src="'+item.image+'" />');         
    });
    $('.images').each(function(){
        var width = $(this).width();
        var height = $(this).height();
        var imgsrc = $(this).attr('src');
        alert(width+''+height+''+imgsrc);           
    });   
});​ 
```

html代码：

```
<div id="imagewrap"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T23:28:36.700

从每个图像的函数调用访问图像的`.width()`和`.height()`的函数。图像下载完成后会调用。`onload``onload`

```
myImage.onload = function() {
    var accurateWidth = myImage.width();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T23:28:39.453

绑定到图片加载事件：

```
$('.images').bind('load', function () {
  // do something here
}); 
```

这是您更新的小提琴以演示：http: [//jsfiddle.net/7eLj4/5/](http://jsfiddle.net/7eLj4/5/)

# c - 使用 getc 从控制台读取 \r （回车）与 \n （换行符）？

> ID：10059142
> 
> 赞同：35
> 
> 时间：2012-04-07T23:15:53.410
> 
> 标签：c, console, newline, getc

我正在编写一个基本上等待用户点击“输入”然后执行某些操作的函数。我发现在测试时有效的是：

```
#include <stdio.h>

int main()
{
        int x = getc(stdin);
        if (x == '\n') {
                printf("carriage return");
                printf("\n");
        }
        else {
                printf("missed it");
                printf("\n");
        }
} 
```

我遇到的问题，以及我最初尝试做的事情是：`if (x == '\r')`但在测试中，程序并没有让我按下回车键。这`'\n'`似乎对应于我从控制台输入。有人可以解释其中的区别吗？另外，为了验证，把它写成`if... == "\n"`字符串文字？即用户实际上必须`"\n"`从控制台输入，对吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-04-07T23:21:37.330

`\n`是换行符，`\r`而是回车符。它们的用途不同。Windows 用于`\r\n`表示按下了回车键，而 Linux 和 Unix 用于`\n`表示按下了回车键。

因此，我总是使用`\n`它，因为它被所有人使用；并且`if (x == '\n')`是测试字符相等性的正确方法。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-07T23:24:24.143

'\n' 是“换行”，'\r' 是回车。不同的操作系统会以不同的方式处理新行，例如

**视窗**

期望换行符是两个字符的组合，'\r\n'。

**Linux\Unix 和现代 Mac OS**

使用单个 '\n' 换行。

**经典 Mac 操作系统**

使用单个 '\r' 换行。

基本上，我会使用`if (x == '\n')`所有现代操作系统目前都在使用的方式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-01-07T18:40:53.453

表示新行有几个抽象级别 - 编程语言运行时、文本编辑器和操作系统。CR（回车）和 LF（换行）是用 ASCII 定义的两个控制字符。其他一些字符编码也可能定义一个“新行”字符。任何键盘上的 Enter 键都传达了“到下一行的开头”的含义。键盘决定如何将 Enter 键映射到其相应的控制字符。一些键盘还区分 Enter 和 Return 键 - 让 Enter 键为换行，Return 键为回车。在标准的 ANSI 键盘中，只有 Enter 键，它映射到 ASCII 中的回车符 (13)。所以这是设备发送到操作系统的实际内容。然而，不同的操作系统决定以不同的方式解释 Enter 键。因此，在类 Unix 系统中，任何回车都被转换为换行符（ASCII 中的 10），然后再交给接收输入的程序。在 Windows 上，一个 CR 被翻译成两个字符 - 一个 CR 后跟一个 LF。但是，您可以将输入流设置为原始模式，在这种情况下，程序会获取键盘实际发送的内容。现在编辑器开始发挥作用。当编辑器以原始模式从标准输入接收到 CR 时，它知道 CR 对应于键盘上的 Enter 键（关于键盘的假设）并且应该在屏幕上显示一个新行。在 raw 模式下，它应该调用 write 系统调用来输出一个 CR + LF。如果输出流不是原始模式，文本编辑器应该输出操作系统特定的序列，例如 linux 上的 LF。

最后，语言运行时也可以以自己的方式解释新行。例如，C 标准说当以文本模式编写文件时，'\n' 被透明地翻译为系统使用的本机换行序列，它可能长于一个字符。在文本模式下阅读时，本机换行序列被翻译回'\n'。在二进制模式下，不进行翻译，直接输出'\n'产生的内部表示。请注意，'\n' 和 '\r' 是特定于语言的字符，分别表示在类 C 语言中流行的 LF 和 CR。但并非每种语言都必须使用这种表示法。

对于第二个问题，“\n”是 '\n' 后跟一个 '\0' 终止符。无法从控制台输入“\0”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-08T04:56:08.473

还要记住，如果您输入 25 个字符并回车，则在输入`getc`所有 25 个字符并按 Enter 之前，第一个字符不会返回。在键入时读取字符需要特定于平台的代码。因此，您最好通过执行`fgets`字符串、修剪换行符并将输入行作为一个整体来处理来读取整行。

# java - 如何修复 InputMismatchException

> ID：10059143
> 
> 赞同：1
> 
> 时间：2012-04-07T23:15:55.890
> 
> 标签：java, error-handling, io

所以我有这个代码：

```
protected void giveNr(Scanner sc) {
    //variable to keep the input
    int input = 0;
    do {
      System.out.println("Please give a number between: " + MIN + " and " + MAX);
      //get the input
      input = sc.nextInt();
    } while(input < MIN || input > MAX);
} 
```

如果人类输入的不是整数，比如字母或字符串，程序就会崩溃并给出错误，`InputMismatchException`. 我该如何解决它，以便在输入错误类型的输入时，再次要求人类输入（并且程序不会崩溃？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T23:43:12.030

您可以捕获`InputMismatchException`，打印一条错误消息，告诉用户出了什么问题，然后再次循环：

```
int input = 0;
do {
    System.out.println("Please give a number between: " + MIN + " and " + MAX);
    try {
        input = sc.nextInt();
    }
    catch (InputMismatchException e) {
        System.out.println("That was not a number.  Please try again.");
        input = MIN - 1; // guarantee we go around the loop again
    }
while (input < MIN || input > MAX) 
```

# c - GCC libm 不工作

> ID：10059146
> 
> 赞同：9
> 
> 时间：2012-04-07T23:16:17.140
> 
> 标签：c, linux

我有调用 sin、cos 和 acos 的 ac 程序。编译时出现以下错误：

```
/tmp/ccDfW98S.o: In function `zip_search':
main.c:(.text+0xf30): undefined reference to `sin'
main.c:(.text+0xf45): undefined reference to `sin'
main.c:(.text+0xf66): undefined reference to `cos'
main.c:(.text+0xf7b): undefined reference to `cos'
main.c:(.text+0xf9c): undefined reference to `cos'
main.c:(.text+0xfc6): undefined reference to `acos'
collect2: ld returned 1 exit status 
```

我知道当您不使用 -lm gcc 标志时这很常见。我正在使用这个标志。我这样称呼GCC：

```
gcc -o zipcode-server -lm main.c 
```

当我在我的一台计算机上编译时，它工作正常。我能想到的唯一区别是它不能在 x86_64 上运行，而它运行的计算机是 i686。两者都是Ubuntu。文件 libm.a 存在于它不工作的计算机上，我没有收到任何错误说它找不到。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-07T23:19:03.330

你应该`-lm`把`main.c`

通常，如果您有多个库，则应按使用顺序编写它们。例如，如果 library`A`使用 library `B`，你应该有`-lA -lB`.

在您的情况下，作为编译结果的目标文件`main.c`使用库`m`，因此`-lm`应该在它之后。

* * *

出于好奇，这主要是出于效率原因。使用此方案，链接器可以使用参数列表中看到的每个新库解析当前未知符号，并在途中从该库中获取新的未知符号。这意味着链接器可以一个一个地访问库，因此将未知符号与每个库提供的少量符号进行匹配。

相反，链接器可以一次从所有库中加载符号，然后开始匹配未知符号。然而，在这种情况下，链接器需要处理更多的符号，从而增加了内存占用和链接器的执行时间。

由于库总是可以按照它们的依赖关系的正确顺序声明给链接器¹，因此链接器没有理由选择低效的方式。

¹ [图书馆通常具有单向关系，即一个使用另一个。库之间的循环依赖是很少见的，如果存在的话，但它仍然可以通过重复某些要重新检查的库来与此模型一起使用。]

# javascript - 如何使用 JQuery 处理在页面下方的长列表中显示的大量用户评论？

> ID：10059149
> 
> 赞同：1
> 
> 时间：2012-04-07T23:17:12.847
> 
> 标签：javascript, jquery, ruby-on-rails, pagination

我想知道在 JQuery 中这样做是否足够稳定？或者是否需要先在 ruby​​/rails 中完成？

无论哪种方式，我都不希望在用户进入显示它们的页面时加载大量消息。我想要的是将结果限制为特定数量，然后在用户向下滚动时让页面加载更多结果，或者让他们单击类似于在 facebook 和 googleplus 上完成的“加载更多”按钮。

目前我有评论滚动我的页面数英里，并希望使用 jQuery 来控制它。我猜，因为每个评论都存储在一个 div / 类中，所以我可以用它来识别评论是什么。

无论如何，试图找出解决这个问题的最佳方法，我真的很感激一些建议，也许还有一些关于如何实现这一目标的好教程的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T23:28:21.590

我同意 Ohgodwhy 的评论 - 在 Rails 中使用 will_paginate。

但是，我还会看看如何进行向下滚动分页，而不是页码链接，具体取决于您的设计。我喜欢 Ryan Bates 关于这个主题的截屏视频： [http ://railscasts.com/episodes/174-pagination-with-ajax](http://railscasts.com/episodes/174-pagination-with-ajax)

他还有一个不带 will_paginate 的视频： [http](http://railscasts.com/episodes/114-endless-page) ://railscasts.com/episodes/114-endless-page （更新的修订版需要订阅）。

# java - java.lang.NoClassDefFoundError：ADT 17 已知问题

> ID：10059152
> 
> 赞同：0
> 
> 时间：2012-04-07T23:18:43.757
> 
> 标签：java, android, adt, noclassdeffounderror, wsimport

我正在使用来自 android sdk 的 wsimport.exe，并手动导入（拖入输出类）到我的项目中（没有外部 jar - 导入的文件是 src 文件夹的一部分）。

它在 java 测试项目上效果很好，但是当我尝试在 android 项目上实现它时，我遇到了这个奇怪的问题。我已经阅读了一些关于 ADT 17 更改的已知问题的信息，但这都与外部 jar 重新排序有关。我没有导入任何罐子，所以它与我无关。

有谁知道这是否是 ADT 17 问题的一部分？

这是我的日志：

```
04-06 02:07:09.340: E/AndroidRuntime(13308): java.lang.NoClassDefFoundError: org.tempuri.Service1
04-06 02:07:09.340: E/AndroidRuntime(13308):    at hhs.pack.ListViewActivity.getListFromDB(ListViewActivity.java:72)
04-06 02:07:09.340: E/AndroidRuntime(13308):    at hhs.pack.ListViewActivity.onCreate(ListViewActivity.java:40) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T00:10:01.143

问题可能是 apk 工具忽略了这些类，或者 Eclipse 不知道如何处理这些`class`文件（我会稍微解释一下）。你为什么不直接用你的类创建一个 jar？在 Eclipse 中，您只需右键单击具有类的项目并说`Export`>> `Java`。`Jar`

如果这是不可能的，请尝试将您生成的类移动到`bin`>`classes`文件夹而不是将其保存在源中（除非您已设置 eclipse 以将类保存在与源相同的文件夹中，这*不是*默认选项。使用此选项可能会解决您的问题）。

您可以尝试在 eclipse 下的> > >下打开“*允许源文件夹的输出文件夹”*选项。`Project``Properties``Java Build Path``Source`

如果您要生成一个`jar`otpion，那么`jar`您在源代码中使用的应该`libs`在您的 Android 项目的文件夹中，否则它将*不会*与您的应用程序一起打包。我注意到在旧版本的 ADT 的某些版本中，您还必须将 jar 添加到项目库中。

这就是我所能建议的，我总是在像你这样的情况下创建自己的罐子。

# ios - 在横向模式下缩放后奇怪的 UIScrollView 行为

> ID：10059153
> 
> 赞同：1
> 
> 时间：2012-04-07T23:18:55.380
> 
> 标签：ios, uiscrollview, uiimageview

我正在尝试学习如何在 iOS 中显示可滚动和可缩放的图像。

在玩[CS 193P iPhone Application Development中的](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2011-fall)[Imaginarium 示例](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/sample_code/Imaginarium_2.zip)时 ，我遇到了以下问题：

如果我尽可能向下和向右滚动，我可以看到图像的右下角（第一个屏幕截图）。这是预期的行为。

一旦我放大一点并再次尝试尽可能向下和向右滚动，UIScrollView 会阻止我向下滚动足够远以看到图像的底部，但允许我向右滚动比有必要查看图像的右边缘（第二个屏幕截图）。

![缩放前的右下角](../Images/4bfde4b26db198319a3ba5076b9fd395.png) ![缩放前的右下角](../Images/0b02bb8e4b40bfabca2f4ffdaf0c3fe5.png)

我可以在 iOS 5.0 模拟器（使用 Xcode 4.3.0 构建）和 iOS 5.1 模拟器和运行 iOS 5.1（使用 Xcode 4.3.2 构建）的实际 iPad 中重现它。

它似乎在纵向模式下工作正常。任何想法如何解决这一问题？

# c# - 在 ExecuteNonQuery 上获取受影响的行

> ID：10059158
> 
> 赞同：59
> 
> 时间：2012-04-07T23:19:37.487
> 
> 标签：c#, mysql, .net, sql, executenonquery

我目前正在处理一个 C# 项目，并且我正在运行一个插入查询，该查询同时也执行一个选择，例如：

```
INSERT INTO table (SELECT * FROM table WHERE column=date) 
```

有没有办法可以查看在此查询期间插入了多少行？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-04-08T00:53:56.390

`ExecuteNonQuery`- 返回受影响的行数。

```
SqlCommand comm;
// other codes
int numberOfRecords = comm.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-07T23:24:34.510

如果您在 a 中运行您的问题的 SQL`SqlCommand`并检查它的返回值，`ExecuteNonQuery`应该会告诉您有多少记录受到影响。

从[文档](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)中：

> **返回值**
> 类型：System.Int32
> 受影响的行数。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-09-12T12:00:49.830

还要确保一件事您需要在连接字符串中添加一条语句例如：

```
string const "Server=localhost; PORT=3306; Database=db; User id=root; password='';UseAffectedRows=True";
MySqlConnection con = new MySqlConnection(const);
con.Open();
MySqlCommand cmd = new MySqlCommand(con);
cmd.CommandText = "Update db set table = value where Column = value";
int numberOfRecords = cmd.ExecuteNonQuery(); 
```

确保：

```
UseAffectedRows=True 
```

因此它将返回受影响行的正确值

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-30T00:21:01.630

ExecuteNonQuery**仅**在设置了连接属性中的 Use Affected Rows 时返回受影响的行，如果没有（默认）返​​回匹配的行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-25T03:14:13.620

如果你运行大量的 ExecuteNonQuery()，并一次性提交它们，你可以通过读取 "SELECT total_changes();" 的返回值来获取连接后的总更改数。

获取总变化的函数：

```
public static long GetTotalChanges(SQLiteConnection m_dbConnection)
        {
            string sql = "SELECT total_changes();";
            using (SQLiteCommand command = new SQLiteCommand(sql, m_dbConnection))
            {
                using (SQLiteDataReader reader = command.ExecuteReader())
                {
                    reader.Read();
                    return (long)reader[0];
                }
            }
        } 
```

在另一个函数中使用它：

```
public static long MyBulkInserts()
        {
            using (SQLiteConnection m_dbConnection = new SQLiteConnection())
            {
                m_dbConnection.Open();
                using (var cmd = new SQLiteCommand(m_dbConnection))
                {
                    using (var transaction = m_dbConnection.BeginTransaction())
                    {
                        //loop of bulk inserts
                        {
                            cmd.ExecuteNonQuery();
                        }
                        transaction.Commit();
                    }
                }
                return GetTotalChanges(m_dbConnection);
            }
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-26T20:14:01.457

我意识到您正在尝试使用 ExecuteNonquery 执行此操作，但是 ExecuteScalar 以及在查询中使用 OUTPUT 指令呢？

对于插入：

```
declare @resulttable
(
  rowid int
)
insert yourtable
output inserted.rowid
  into @resulttable
select *
from someothertable

select count(1) affectedrows
from @resulttable 
```

或对于更新，如果您只想知道更改的行

```
declare @resulttable
(
  beforefield1 varchar(255),
  afterfield1 varchar(255)
)
update tbl1
set field1 = replace(field1, 'oldstring', 'newstring')
output deleted.field1,
    inserted.field1
  into @resulttable
from someothertable

select count(1) affectedrows
from @resulttable
where beforefield1 != afterfield1; 
```

# android - 获得 RANSAC 在 findHomography 中使用的 5 个点（OpenCV for Android）

> ID：10059162
> 
> 赞同：3
> 
> 时间：2012-04-07T23:20:06.060
> 
> 标签：android, opencv, homography

在 OpenCV for Android 中，函数 org.opencv.Calib3d.findHomography(..) 返回齐次变换矩阵。例如，这仅返回单应性：

```
Mat homography = Calib3d.findHomography(points1, points2, Calib3d.RANSAC, 0.5); 
```

有没有办法从 Android OpenCV API 返回 RANSAC 实际使用的点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T07:58:16.670

**更新**

我不确定它是 OpenCV 的新增功能还是我刚刚错过了它，但[findHomography()](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html?highlight=findhomography#Mat%20findHomography%28InputArray%20srcPoints,%20InputArray%20dstPoints,%20int%20method,%20double%20ransacReprojThreshold,%20OutputArray%20mask%29)函数实际上可以为您提供内点（OpenCV 2.4.2）。最后一个参数，`mask`默认为空，将在 RANSAC 发现的内点索引处填充 1（或 255）。

```
Mat findHomography(InputArray srcPoints, InputArray dstPoints, 
     int method=0, double ransacReprojThreshold=3, OutputArray mask=noArray() )
//                                                               ^
//                                                               | 
```

**旧答案**

RANSAC 用来估计单应性的点（在技术文档中称为内点）不能直接提取。它们是在内部计算的，但随后列表被删除。

提取它们的一种方法是修改 findHomography 函数（以及相应的 RANSAC 函数）。但这很丑陋。

另一种更简洁的方法是测试输入中的哪些点对与单应性匹配：

*使用`projectPoints(points1, homography, points1_dest)`（我希望这是函数名称）将单应性应用于 points1。*

**正确的函数名称和输入参数顺序为：** void perspectiveTransform(InputArray src, OutputArray dst, InputArray m)，在本例中为 cv::perspectiveTransform(points1, points1_dest, homography) [OpenCV Perspective Transform](https://docs.opencv.org/2.4/modules/core/doc/operations_on_arrays.html#void%20perspectiveTransform(InputArray%20src,%20OutputArray%20dst,%20InputArray%20m))

*采用`cv::distance(points1_dest, points2)`*

**正确的函数名和输入参数顺序是：** double norm(InputArray src1, int normType=NORM_L2, InputArray mask=noArray())

**可能的实现：**

```
std::array<cv::Point2f, 1> pt1;
pt1[0] = points1_dest;
std::array<cv::Point2f, 1> pt2;
pt2[0] = points2;
distance = cv::norm(pt1,  pt2)); 
```

[OpenCV范数函数](https://docs.opencv.org/2.4/modules/core/doc/operations_on_arrays.html#double%20norm(InputArray%20src1,%20int%20normType,%20InputArray%20mask))

*两点之间的距离也可以使用勾股定理计算*

看看他们中的哪一个在points2上与他们的对足够接近。距离应小于或等于`min_distance^2`。在你的情况下，`0.5*0.5 = 0.25`.

# python - 结合可能和 seq 单子：在输出中感到困惑

> ID：10059163
> 
> 赞同：10
> 
> 时间：2012-04-07T23:20:16.183
> 
> 标签：python, haskell, clojure, monads, monad-transformers

我正在尝试编写 seq-m 和 error-m 来对可能返回错误的事物进行列表理解。我的输出有意想不到的类型，尽管除此之外它实际上似乎是明智的。我已经在下面分解了我的代码，但这里也是一个[工作要点](https://github.com/dustingetz/sandbox/blob/master/etc/monads/loan.py)。

这是我的一元业务逻辑

```
def get_loan(name):
    m_qualified_amounts = (
           bind(get_banks(name), lambda bank:
           bind(get_accounts(bank, name), lambda account:
           bind(get_balance(bank, account), lambda balance:
           bind(get_qualified_amount(balance), lambda qualified_amount:
                    unit(qualified_amount))))))
    return m_qualified_amounts

names = ["Irek", "John", "Alex", "Fred"]
for name, loans in zip(names, map(get_loan, names)):
    print "%s: %s" % (name, loans) 
```

输出

```
Irek: [None, 'Insufficient funds for loan, current balance is 35000', None, 'Insufficient funds for loan, current balance is 70000', None, 'Unable to get balance due to technical issue for Wells Fargo: 3']
John: [None, 'Insufficient funds for loan, current balance is 140000']
Alex: [[245000], None, [280000], None]
Fred: (None, 'No bank associated with name Fred') 
```

我希望看到元组列表 - 该列表是列表理解的结果，最终列表中的每个项目都应该是错误单子（`value, error`元组）中的一个值。就像删除了太多的嵌套级别一样`seq_bind`。

这是我对 monad 的定义，如果它不正确，那么它非常接近，因为两个 monad 都是孤立地工作的，而不是结合起来的。

```
def success(val): return val, None
def error(why): return None, why
def get_value(m_val): return m_val[0]
def get_error(m_val): return m_val[1]

# error monad
def error_unit(x): return success(x)
def error_bind(mval, mf):
    assert isinstance(mval, tuple)
    error = get_error(mval)
    if error: return mval
    else: return mf(get_value(mval))

def flatten(listOfLists):
    "Flatten one level of nesting"
    return [x for sublist in listOfLists for x in sublist]    

# sequence monad
def seq_unit(x): return [x]
def seq_bind(mval, mf):
    assert isinstance(mval, list)
    return flatten(map(mf, mval))

# combined monad !!
def unit(x): return error_unit(seq_unit(x))
def bind(m_error_val, mf):  
    return error_bind(m_error_val, lambda m_seq_val: seq_bind(m_seq_val, mf)) 
```

一元API

```
def get_banks(name):
    if name == "Irek": return success(["Bank of America", "Wells Fargo"])
    elif name == "John": return success(["PNC Bank"])
    elif name == "Alex": return success(["TD Bank"])
    else: return error("No bank associated with name %s" % name)

def get_accounts(bank, name):
    if   name == "Irek" and bank == "Bank of America": return success([1, 2])
    elif name == "Irek" and bank == "Wells Fargo": return success([3])
    elif name == "John" and bank == "PNC Bank": return success([4])
    elif name == "John" and bank == "Wells Fargo": return success([5, 6])
    elif name == "Alex" and bank == "TD Bank": return success([7, 8])
    else: return error("No account associated with (%s, %s)" % (bank, name))

def get_balance(bank, account):
    if bank == "Wells Fargo":
        return error("Unable to get balance due to technical issue for %s: %s" % (bank, account))
    else:
        return success([account * 35000])  #right around 200,000 depending on acct number

def get_qualified_amount(balance):
    if balance > 200000:
        return success([balance])
    else:
        return error("Insufficient funds for loan, current balance is %s" % balance) 
```

也在寻找改进代码的方法。标记 haskell 和 clojure 因为这是这些语言的惯用语，python 社区对此不感兴趣。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T23:48:01.840

我不是 Python 专家，但这个定义：

```
def bind(mval, mf):
    return error_bind(mval, lambda mval: seq_bind(mval, mf)) 
```

……让我很怀疑。据推测，`mf`应该返回包含在`error`和`seq`monad 类型中的东西，其中`error`-ness 最外层；但是，您将它传递给`seq_bind`，它需要一个返回带有`seq`-ness 最外层的东西的函数。

您可能想查看 Haskell 中的[`ErrorT`](http://hackage.haskell.org/packages/archive/mtl/latest/doc/html/Control-Monad-Error.html#v%3aErrorT)和[`LogicT`](http://hackage.haskell.org/package/logict)monad 转换器的来源，以了解如何正确完成此操作。（`LogicT`与您的预期相比，您可能会发现令人惊讶的复杂——这是因为天真`ListT` [的实际上并不是一个单子转换器](http://www.haskell.org/haskellwiki/ListT_done_right#Examples)！）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-08T07:15:07.733

在 Haskell 中，像这样通过堆叠组合 monad 是使用[Monad Transformers](http://book.realworldhaskell.org/read/monad-transformers.html)。抛开 Daniel Wagner 的观点，即 ListT 暂时不是单子。你有两个类型的 monad：

1.  `List a`看起来像`[x,y,z]`
2.  `(Error e) a`看起来`x, None`或`None, err`

如果将一个转换为 monad 转换器并将它们组合起来，有两种方法：

1.  `(ErrorT e) List a`看起来像`[ (x,None), (y,None), (None, err) ]`
2.  `ListT (ErrorT e) a`看起来像`[x,y,z], None`或`None, [x,y,z]`

你想要一个配对列表，所以我希望你想要第一个表格。但是您的简单测试不同意这一点。您`unit`不会返回 (1.) 中的对列表，而是返回一对列表和 None ，即 (2.)。

所以你要么把事情倒过来，要么你脑子里有一个更复杂的单子。我将尝试修改您的要点，使其看起来像（1.）。

我认为这段代码可能会做你想做的事：

```
def flatten(listOfLists):
    "Flatten one level of nesting"
    assert isinstance(listOfLists, list)
    if len(listOfLists) > 0:
        assert isinstance(listOfLists[0], list)
    return [x for sublist in listOfLists for x in sublist]

# sequence monad
def seq_unit(x): return [x]
def seq_bind(mval, mf): return flatten(map(mf, mval))

# Decompose ErrorT e m a
def get_value(m_val): return m_val[0]
def get_error(m_val): return m_val[1]

# hard coded "(ErrorT e) List a" instance of throwError, note that seq_unit is hardcoded
def error_throwError(err): return (None, err)
def errorT_list_throwError(err): return seq_unit(error_throwError(err))

# "(ErrorT e) List a" monad
def error_unit(x): return (x,None)
def errorT_list_unit(x): return seq_unit(error_unit(x))

def error_bind(mval, mf):
    assert isinstance(mval, tuple)
    error = get_error(mval)
    if error:
        return error_throwError(error)
    else: 
        return mf(get_value(mval))

# Cannot have multi-line lambda
def errorT_list_bind_helper(mval, mf):
    assert isinstance(mval, tuple)
    error = get_error(mval)
    if error:
        return errorT_list_throwError(error)
    else: 
        return mf(get_value(mval))

def errorT_list_bind(mval, mf): return seq_bind(mval, lambda v: errorT_list_bind_helper(v, mf))

# combined monad !! (ErrorT e) List a
unit = errorT_list_unit
bind = errorT_list_bind
throwError = errorT_list_throwError

# hard coded "lift :: List a -> (ErrorT e) List a"
def lift(mval):
    assert isinstance(mval, list)
    # return [ (val,None) for val in mval ]
    # return [ errorT_list_unit(val) for val in mval ]
    return seq_bind(mval, lambda v : unit(v))

def get_banks(name):
    if name == "Irek": return lift(["Bank of America", "Wells Fargo"])
    elif name == "John": return unit("PNC Bank")
    elif name == "Alex": return unit("TD Bank")
    else: return throwError("No bank associated with name %s" % name)

def get_accounts(bank, name):
    if   name == "Irek" and bank == "Bank of America": return lift([1, 2])
    elif name == "Irek" and bank == "Wells Fargo": return unit(3)
    elif name == "John" and bank == "PNC Bank": return unit(4)
    elif name == "John" and bank == "Wells Fargo": return lift([5, 6])
    elif name == "Alex" and bank == "TD Bank": return lift([7, 8])
    else: return throwError("No account associated with (%s, %s)" % (bank, name))

def get_balance(bank, account):
    if bank == "Wells Fargo":
        return throwError("Unable to get balance due to technical issue for %s: %s" % (bank, account))
    else:
        return unit(account * 35000)  #right around 200,000 depending on acct number

def get_qualified_amount(balance):
    if balance > 200000:
        return unit(balance)
    else:
        return throwError("Insufficient funds for loan, current balance is %s" % balance)

# monadic business logic
def get_loan(name):

    m_qualified_amounts = (
           bind(get_banks(name), lambda bank:
           bind(get_accounts(bank, name), lambda account:
           bind(get_balance(bank, account), lambda balance:
           bind(get_qualified_amount(balance), lambda qualified_amount:
                    unit(qualified_amount))))))

    assert isinstance(m_qualified_amounts, list)
    assert isinstance(m_qualified_amounts[0], tuple)
    return m_qualified_amounts

names = ["Irek", "John", "Alex", "Fred"]

for name, loans in zip(names, map(get_loan, names)):
    print "%s: %s" % (name, loans) 
```

输出是

```
Irek: [(None, 'Insufficient funds for loan, current balance is 35000'), (None, 'Insufficient funds for loan, current balance is 70000'), (None, 'Unable to get balance due to technical issue for Wells Fargo: 3')]
John: [(None, 'Insufficient funds for loan, current balance is 140000')]
Alex: [(245000, None), (280000, None)]
Fred: [(None, 'No bank associated with name Fred')] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-08T14:31:44.513

注意：reddit 上的人要求我在此处重新发布我的评论作为答案。

Daniel Wagner 的答案，但我会在这里详细说明，因为这不适合 Stack Overflow 评论。

首先，如果您还没有阅读 Monad Transformers - Step by Step，您应该阅读。

现在，您会期望组合 monad 的类型是（使用 Haskell 表示法）：

```
type Combined r = ListT (Either e) r 
```

如果你不明白为什么`ListT`在外面，那么在继续之前阅读我上面链接的 Monad Transformers 论文。请记住，如果我要`runListT`一个 type 的值`Combined r`，我会得到类似的东西：

```
-- Actually, this is WRONG, but see below for the warning about ListT
runListT (x :: ListT (Either e) r) :: Either e [r] 
```

根据 的类型`Combined r`，我们可以推断出 monad 中的正确类型`(>>=)`是`Combined`：

```
(>>=) :: ListT (Either e) a -> (a -> ListT (Either e) b) -> ListT (Either e) b 
```

所以现在我将假装我是`GHC`编译器，拥有编译 Python 代码的能力，并尝试通过你的`bind`函数并推断出所有内容的类型。我会从上面的类型推断出，`(>>=)`参数的类型是：

```
mval :: ListT (Either e) a
mf :: a -> ListT (Either e b) 
```

然后我查看`seq_bind`，我推断它必须具有以下类型：

```
seq_bind :: ListT (Either e) a -> (a -> ListT (Either e) b) -> c 
```

...`c`尚未确定的位置。您的代码已经没有类型检查（假设 Python 有类型之类的东西），因为 seq_bind 的类型应该是：

```
seq_bind :: [a] -> (a -> [b]) -> [b] 
```

您不能使用`ListT`函数需要列表的位置，所以这是您的第一个问题。事实上，您根本无法`ListT`从绑定中派生 ' 绑定`List`。这适用于（几乎）所有单子转换器。

但是，您**可以**`ListT (Either e)`从 bind for派生绑定`Either e`，更一般地说，您可以在`(Monad m) => ListT m`不知道要包装的基本 monad 的任何内容的情况下派生 bind for ，除了它具有遵守 monad 法则的`(>>=)`and操作。`return`

但是，编写正确的实现并**非易事**`ListT`，许多勇敢的人都弄错了。事实上`ListT`，Haskell 的标准 monad 转换器包附带的是**错误**的，它既不是 monad 也不是 monad 转换器。我强烈支持的正确实现是这里给出的：

[ListT 做得对](http://www.haskell.org/haskellwiki/ListT_done_right)

您应该从该代码（有点难看，但 100% 正确）中编写一个合适的`ListT`monad 转换器。不要试图编写一个一次性返回列表的 monad 转换器：我向你保证它不会也不能工作。

# html - 为什么 Chrome 会忽略文本输入的“大小”属性？

> ID：10059164
> 
> 赞同：7
> 
> 时间：2012-04-07T23:20:20.760
> 
> 标签：html, google-chrome

下面的 size 属性没有任何作用。为什么？

```
<input type="text" size="80" placeholder="blablabla bla lba bla bla bla blabla bla bla bla lba"> 
```

它默认为 60 个字符，我似乎无法改变它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T23:22:38.727

大概你有一些影响它的样式。没有任何样式规则，它[工作得很好](http://jsbin.com/ubeqoj)。但是，当您应用较小尺寸的样式规则时，[它优先](http://jsbin.com/ubeqoj/2)。

要找出影响它的样式规则，请右键单击它并选择“检查元素”，然后查看右侧显示的样式信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T04:48:44.713

使用`textarea`元素而不是`input`元素：

```
<textarea cols="80" rows="1" style="overflow: visible" placeholder=
"blablabla bla lba bla bla bla blabla bla bla bla lba"></textarea> 
```

这会产生更一致但不完全一致的渲染。该设置`overflow: visible`是为了让 IE 为 80 个字符保留空间，否则由于垂直滚动条，只能容纳 79 个字符。

为什么会出现问题`input`：

该属性`size="80"`将字段的可见宽度设置为 80 个字符的“平均”宽度。这没有完全定义（什么是“平均”？），浏览器甚至不合逻辑地实现它：使用`size="80"`往往给出的宽度比 20 个字符的默认宽度的 4 倍要小得多。所以浏览器甚至不一致。比例取决于字体和浏览器。（这也发生在其他浏览器上。）

如果您需要继续使用`input`：

您可以使用`style="width: 80ch"`，但并非所有浏览器都支持此 CSS3 功能，并且不能保证它已正确实现。根据`ch`定义，单位是数字零的前进宽度，'0'，在大多数字体中与一般数字的前进宽度相同。（例如，Firefox 几乎正确地实现了这一点。几乎，但不完全。）

您可以将`<input>`元素中的字体设置为某些等宽字体。这不会消除问题，但会使宽度更接近指定的宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-21T16:28:48.903

如果您想知道为什么可以**输入**60 个字符，那么决定多少个字符的属性称为**maxlength**：

> **最长长度**
> 
> 如果 type 属性的值为 text、email、search、password、tel 或 url，则该属性指定用户可以输入的最大字符数（以 Unicode 码位表示）；对于其他控件类型，它被忽略。它可以超过 size 属性的值。如果未指定，用户可以输入不限数量的字符。指定负数会导致默认行为；也就是说，用户可以输入无限数量的字符。仅当属性的值已更改时才评估约束。

[https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Input](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Input)

大小仅决定字符的宽度，而不是用户可以输入的数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T22:31:07.853

从 Mac OS Lion 上的 Google Chrome 26 开始，不支持“ch”单元。

在使用内联样式“宽度：16ch”检查元素时，该样式被标记为“无效属性值”。其他常用单位（pt、px、em、%）也可以接受。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-16T07:08:53.113

我遇到了同样的问题，在尝试了很多其他解决方案之后，我通过在输入字段中添加宽度来解决这个问题。

```
input {
    width:90px; /* Your width may vary */
} 
```

# iphone - 为什么 `&`（和号）放在一些方法参数的前面？

> ID：10059169
> 
> 赞同：35
> 
> 时间：2012-04-07T23:21:05.567
> 
> 标签：iphone, objective-c, nserror

我想知道，为什么我们在下面这样的 NSError 前面放置：`&error`而不是`error`？

例如

```
NSArray *result = [managedObjectContext executeFetchRequest:fetchRequest error:&error]; 
```

希望您能解释一下，这是否总是这样或仅在某些情况下才需要？谢谢。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-04-07T23:24:03.753

您需要获取地址，`error`因为函数需要对其进行修改。*由指针*`error`传递，因此您需要“获取地址”运算符。*`&`*

 *C 和 Objective-C*按值*传递参数。如果您在`error`没有与号的情况下通过并且您调用的方法对其进行了修改，则进行调用的函数将看不到任何更改，因为该方法将在其*本地副本*上运行`NSError*`.

如果您查看方法的签名并看到`**`那里，您就会知道相应参数前面需要一个 & 符号：

```
- (NSArray *)executeFetchRequest:(NSFetchRequest *)request error:(NSError **)error
                                            //   ^ one                    ^^ two 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-07T23:26:54.697

参数的`error`类型是`(NSError **)`，即指向 NSError 的指针。`error`您用作参数的变量可能声明为，`NSError *`因此为了使类型正确匹配，您必须使用运算符的地址来获取指向指针 ( `&error`) 的指针。该方法首先需要一个指向指针的指针的原因是它可以修改 的值`error`并使该新值可供您（该方法的调用者）使用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-07T23:33:59.277

从本质上讲，问题的根源是想要返回第二个（可选）对象的黑客攻击。

我们怎么能做到这一点，因为我们只能返回一件事？好吧，我们可以返回某种`(return_value, error)`元组，但这有点笨拙。不过，我们可以有尽可能多的参数，我们可以对这些参数做些什么......

因此，方法/函数不能修改它们的参数（准确地说，它们使用副本进行操作，因此它们所做的任何修改都是本地的）。也就是说（不考虑并发问题）问题`fetchRequest`中消息之前的值将等于`fetchRequest`之后的值。注意 指向的对象`fetchRequest`可能会改变，但`fetchRequest`它本身的值不会。

这让我们有点束手无策。除了，等等，我们知道我们可以愉快地获取参数的值并修改它所指向的内容！如果您查看声明，`executeFetchRequest:error:`您会发现它需要一个`NSError**`. 那是“指向指向“的指针的指针`NSError`。因此，我们可以初始化一个空/悬空`NSError*`，找到它的地址（使用[一元运算`&`符](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Member_and_pointer_operators)），然后将其传入。然后该方法可以分配给`NSError*`this 指向的指针。

瞧，我们实际上有可选的附加返回值。*

# facebook-graph-api - FQL 无法获取朋友的邮政编码

> ID：10059175
> 
> 赞同：0
> 
> 时间：2012-04-07T23:22:38.880
> 
> 标签：facebook-graph-api

我正在使用 FQL 使用字段 current_location 获取朋友的位置。我可以查看城市、州等字段，但邮政编码始终返回为空。我怀疑与权限有关。我们不能查看朋友的邮政编码吗？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:58:15.660

因为 location 只是一个城市/城镇名称，所以它不是带有街道地址和邮政编码的完全限定地址。让我们以加利福尼亚州洛杉矶这样的地方为例，它有许多邮政编码。Facebook 如何知道用户所在的无数邮政编码中的哪一个，而不会泄露故意从 API 中排除的隐藏街道地址信息。

# iphone - 在不禁用用户交互的情况下阻止 UIWebView 输入显示 UIKeyboard

> ID：10059178
> 
> 赞同：2
> 
> 时间：2012-04-07T23:22:49.633
> 
> 标签：iphone, ios, ipad, uiwebview

我有一个加载和外部产品配置 Web 服务 UI 的 UIWebView，它基本上是一堆相关的下拉列表。

问题是下拉菜单基本上是增强的文本输入，因此当用户点击它们以显示选项时，UIKeyboard 会在他们做出选择后不断弹出并拥有。它不是一个流动的过程。是否有抑制 html 输入触发 UIKeyboard 的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T18:56:23.740

然后试试这个：

```
...
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(removeKeyBoard:) name:UIKeyboardDidShowNotification object:nil];
...

- (void)removeKeyBoard:(NSNotification *)notify {
    // web is your UIWebView
    [web stringByEvaluatingJavaScriptFromString:@"document.activeElement.blur()"];
} 
```

请记住删除通知，如果仅针对您的 WebView 对象，则可以对其进行过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T00:09:42.663

尝试在 HTML 中使用以下代码：

```
<input type='text' width='100' onclick='blur()'> 
```

用方法blur() 然后你失去焦点就不会出现在键盘上。

# d - d2：静态导入中保护的奇怪降低和可能的不当行为

> ID：10059186
> 
> 赞同：1
> 
> 时间：2012-04-07T23:24:42.467
> 
> 标签：d

考虑有`moda.d`：

```
module moda;

private struct modb {}; 
```

并且`modb.d`：

```
module modb;

private import moda; 
```

并且`modmain.d`：

```
module modmain;

static import moda;
static import modb;

void main() {
    modb v; // should NOT compile, should it?
} 
```

我不知道为什么，但是在and`moda.modb`中都是可见的，而据我所知，它不应该 - 由于被导入为和being 。还是应该？我遇到了 dmd 错误还是我不理解的计划行为？`modmain``modb``moda``static``moda.modb``private`

**Update1：**​​我进行了一些测试，以确定在哪些情况下错误会复制。

第一列是 for `import moda`，第二列是 for `import modb`，第三列是用作结构名称的标识符。所有的测试都应该编译失败，但有些可以编译。

图注：D - “导入模块；”，S - “静态导入模块；”，N - 不导入。

> D;D;foobar - 由于错误 #2830 而编译
> 
> S;D;foobar - 按预期失败
> 
> N;D;foobar - 按预期失败
> 
> D;S;foobar - 由于错误 #2830 而编译
> 
> S;S;foobar - 按预期失败
> 
> N;S;foobar - 按预期失败
> 
> D;N;foobar - 由于错误 #2830 而编译
> 
> S;N;foobar - 按预期失败
> 
> N;N;foobar - 按预期失败
> 
> D;D;moda - 由于错误 #2830 而编译
> 
> **S;D;moda - 不应该编译**
> 
> **N;D;moda - 不应该编译**
> 
> D;S;moda - 由于错误 #2830 而编译
> 
> **S;S;moda - 不应该编译**
> 
> N;S;moda - 按预期失败
> 
> D;N;moda - 由于错误 #2830 而编译
> 
> **S;N;moda - 不应该编译**
> 
> N;N;moda - 按预期失败
> 
> D;D;modb - 由于错误 #2830 而编译
> 
> **S;D;modb - 不应该编译**
> 
> **N;D;modb - 不应该编译**
> 
> D;S;modb - 由于错误 #2830 而编译
> 
> **S;S;modb - 不应该编译**
> 
> **N;S;modb - 不应该编译**
> 
> D;N;modb - 由于错误 #2830 而编译
> 
> S;N;modb - 按预期失败
> 
> N;N;modb - 按预期失败

似乎如果某个模块的名称与非公开符号相同，则无论保护级别如何，它都会被公开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T01:53:30.963

这是[bug# 2830](http://d.puremagic.com/issues/show_bug.cgi?id=2830)，与静态导入无关。无论您是否使用静态，您都会遇到同样的问题。模块 modb 也与它无关。您可以完全删除它，但仍然会遇到相同的情况。

还有一些关于您的代码的附注：

1.  放一个; 在结构或类声明的末尾，在 D 中是不必要的。

2.  进口的私人什么都不做。它们自动是私有的。

3.  命名符号与模块名称相同可能导致在使用它们时必须提供完整的导入路径。如果您使用多个级别的包，这不是一个大问题（egabc 不会导致您在使用 c 时必须使用完整路径，而 aa 通常需要用作 aa 而不是 a），但如果您只有一个级别的包，它会导致问题。通常，模块名称都是小写的，而类型名称是 PascalCase，变量和函数名称是 camelCase，在这种情况下，您不会遇到太多此类问题（即仅当您拥有单级包并且您有camelCased 符号，只有一个字长）。因此，遵循更典型的 D 命名约定有助于避免该问题。它也往往是其他 D 程序员所期望的，但这显然取决于程序员。它*是*标准库所做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T11:19:53.763

我已经为这种行为[填写了一个错误 #7856 。](http://d.puremagic.com/issues/show_bug.cgi?id=7856#c0)

# php - .htaccess mod_rewrite URL 查询

> ID：10059193
> 
> 赞同：0
> 
> 时间：2012-04-07T23:26:21.227
> 
> 标签：php, .htaccess, mod-rewrite, get

我希望有人可以帮助我。我正在构建一个 CRM 应用程序，需要帮助修改 .htaccess 文件以清理 URL。我已经阅读了所有关于 .htaccess 和 mod_rewrite 的帖子，我什至尝试使用[http://www.generateit.net/mod-rewrite/](http://www.generateit.net/mod-rewrite/)来获得结果，但没有成功。这是我正在尝试做的事情。

*   我们将基本 URL 称为 www.domain.com
*   我们正在使用带有 mysql 后端和一些 jQuery 和 javascript 的 php
*   在那个“根”文件夹中是我的 .htaccess 文件。我不确定是否需要每个子目录中的 .htaccess 文件，或者根目录中的文件是否足够。
*   我们有几个实际的文件目录，包括“crm”、“sales”、“finance”等。
*   首先，由于这些帖子，我们想要剥离我自己能够做到的所有“.php”扩展名。但是，公司和联系人ID的查询是我卡住的地方。
*   现在，如果我加载 www.domain.com/crm/companies.php，它会在列表中显示所有公司。
*   如果我单击其中一家公司，它会使用 javascript 调用“goto_company(x)”jQuery 脚本，该脚本编写一个表单并根据公司的 ID (x) 提交该表单。这可以正常工作并保持链接干净，因为最终用户看到的所有内容都是 www.domain.com/crm/company.php。但是，您不能直接导航到公司。
*   因此，我们在 PHP 中添加了几行来查看 POST 是否为空，然后尝试使用 GET 来代替 www.domain.com/crm/company.php?companyID=40 来显示数据库中的公司 #40。
*   我需要重写此链接以及指向 www.domain.com/crm/company/40 的所有其他相关链接
*   我已经尝试了一切，但似乎没有任何效果。请记住，我需要为“联系人”执行此操作，并且在应用程序的销售部分也需要为“交易”执行某些操作。

总结一下我想要做的事情：

1.  将 www.domain.com/crm/dash.php 更改为 www.domain.com/crm/dash
2.  将 www.domain.com/crm/company.php?companyID=40 更改为 www.domain.com/crm/company/40
3.  将 www.domain.com/crm/contact.php?contactID=27 更改为 www.domain.com/crm/contact/27
4.  将 www.domain.com/sales/dash.php 更改为 www.domain.com/sales/dash
5.  将 www.domain.com/sales/deal.php?dealID=6 更改为 www.domain.com/sales/deal/6

（40、27 和 6 只是任意数字作为示例）

仅供参考，当我以 www.domain.com/crm/company.php?companyID=40 为例使用 generateit.net/mod-rewrite 站点时，它告诉我将其放入我的 .htaccess 文件中：

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^crm/company/([^/]*)$ /crm/company.php?companyID=$1 [L] 
```

不用说那没有用。

**好的，这是根据下面 Gohn67 提供的帮助进行的更新**

除了我似乎无法弄清楚的一个小错误外，它正在工作。我在“crm”目录中创建了 .htaccess 文件。这是代码：

```
RewriteEngine On
RewriteRule ^test/([\d]+)$ /crm/company.php?companyID=$1 [L] 
```

这会将 www.domain.com/test/40 重写为 www.domain.com/crm/company.php?companyID=40 所以它非常接近我的需要。

错误是我无法在我的 RewriteRule 中用“公司”一词替换“测试”。我不知道为什么。除了“公司”这个词，我可以放任何东西；甚至是 "crm" 目录中的其他 PHP 文件的名称，例如 "contact" 或 "add-contact"。作为进一步的测试，我实际上将 company.php 重命名为 test.php 并将 RewriteRule 更改为：

```
RewriteRule ^company/([\d]+)$ /crm/test.php?companyID=$1 [L] 
```

这有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T02:28:11.137

是的，生成的重写看起来有点奇怪。我不确定它在这里试图匹配什么`([^/]*)`。

这是一个可能对您有用的示例。我在我的系统上测试了这些。

```
RewriteEngine On
RewriteRule ^crm/dash/?$ /crm/dash.php [L]
RewriteRule ^crm/company/([\d]+)/?$ /crm/company.php?companyID=$1 [L]
RewriteRule ^crm/contact/([\d]+)/?$ /crm/contact.php?contactID=$1 [L] 
```

这只是您的一些路线示例。我承认它们可能会更健壮，因为这样做会导致很多重写规则，其中一些你可以用更好的正则表达式模式来消除。但希望这能让你开始。

以下是考虑到子目录的一些更新的重写规则。它还修复了上面的一个错误：

```
RewriteEngine On
RewriteBase /crm
RewriteRule ^dash/?$ dash.php [L]
RewriteRule ^company/([\d]+)/?$ company.php?companyID=$1 [L]
RewriteRule ^contact/([\d]+)/?$ contact.php?contactID=$1 [L] 
```

# string - 将 SecureString 发送到远程服务器 - 这可能吗？

> ID：10059198
> 
> 赞同：0
> 
> 时间：2012-04-07T23:28:04.023
> 
> 标签：string, security, client

我目前正在开发一个客户端-服务器类型的聊天室。我会直截了当地解决这个问题：我正在通过 SecureString 处理用户密码，但我无法将该信息发送到我的服务器应用程序（通过 System.Net.Sockets）。我在使用“Marshal”类处理 SecureString 方面取得了一定的成功，但是根据处理方式，将它从一个客户端发送到它的服务器似乎几乎是不可能的。我已经在互联网上搜索了几天，看看是否可以通过网络发送 SecureString 而无需以纯文本“公开”它。

从本质上讲，我要问的是是否有一种方法可以从 SecureString 中获取某种类型的信息，可以将其转换为 byte[] 并且可以理解到足以检索其中的密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T23:31:10.390

每当您在客户端拥有密钥时，您就有可能让用户自己获得该密钥。然后，如果他们可以拦截另一个用户的流量，那么您就会遇到问题，因为他们可以使用此密钥来解密您发送到服务器的任何内容。

因此，您可以为每个客户端创建一个单独的密钥。但是现在你有一堆烦人的开销来查找服务器上的解密密钥。

为什么不直接使用 https？

# c - 如何修复对 _imp__* 的未定义引用？

> ID：10059200
> 
> 赞同：13
> 
> 时间：2012-04-07T23:28:14.947
> 
> 标签：c, gcc, dll, mingw

我正在尝试在 MinGW 下编译依赖于 gtkspell 的东西，这依赖于附魔。我收到错误， `gtkspell/gtkspell.c:757: undefined reference to '_imp__enchant_broker_init'` 我怀疑这要么是因为我试图链接另一个 {static,dynamic} 库，而我应该链接另一个库，或者因为在 imp 和之前只有一个下划线应该有两个；我明白了

```
$ objdump -t /d/opt/enchant-1.6.0/lib/libenchant.a | grep enchant_broker_init
[ 85](sec  1)(fl 0x00)(ty  20)(scl   2) (nx 0) 0x00002ac0 _enchant_broker_init 
```

和

```
$ objdump -t /d/opt/enchant-1.6.0/lib/libenchant.dll.a | grep enchant_broker_init
[  6](sec  1)(fl 0x00)(ty   0)(scl   2) (nx 0) 0x00000000 _enchant_broker_init
[  7](sec  3)(fl 0x00)(ty   0)(scl   2) (nx 0) 0x00000000 __imp__enchant_broker_init 
```

互联网（http://lists.freedesktop.org/archives/gstreamer-devel/2007-January/013975.html）表明imp mangling来自

```
_declspec(dll{import,export}) 
```

虽然附魔似乎使用

```
__declspec(dll{import,export}) 
```

, 并注释掉 enchant.h 中的相关行使 gtkspell.c 请求`enchant_broker_init`而不是`_imp__enchant_broker_init`, 但不会更改 libenchant 中显示的符号。有没有办法让 gcc 不破坏名称，或者有没有人知道可能出了什么问题/如何解决它？

这是一个在我的系统上重现问题的最小示例：

如果我有一个包含内容的文件 enchanttest1.c

```
#include <stdio.h>
#include <enchant.h>

int main()
{
#ifdef ENCHANT_MODULE_EXPORT
    printf("\nEnchant found\n");
#else
    printf("\nEnchant not found\n");
#endif
    return 0;
} 
```

和一个包含内容的文件 enchanttest2.c

```
#include <stdio.h>
#include <enchant.h>

int main()
{
    EnchantBroker *b = enchant_broker_init();
#ifdef ENCHANT_MODULE_EXPORT
    printf("\nEnchant found\n");
#else
    printf("\nEnchant not found\n");
#endif
    return 0;
} 
```

然后

```
gcc enchanttest1.c `pkg-config --cflags enchant` && ./a.exe 
```

给`Enchant found`但是

```
gcc enchanttest2.c `pkg-config --cflags enchant` && ./a.exe 
```

给

```
C:\Users\JASONG~1\AppData\Local\Temp\ccyDLptc.o:testenchant.c:(.text+0xf): undefined reference to `_imp__enchant_broker_init'
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T00:07:46.193

修复我的最小示例的方法是在`--libs`之后添加`--cflags`；gcc 找不到要链接的库。

`LDFLAGS="$(pkg-config --cflags --libs gtkspell-2.0 enchant)" CFLAGS="$(pkg-config --cflags --libs gtkspell-2.0 enchant)"`通过传递给配置脚本，我能够解决我最初尝试编译的更复杂的代码（gummi（http://dev.midnightcoding.org/projects/gummi））遇到的问题；问题似乎是 gcc 的参数以错误的顺序传递，并且在尝试链接 gtkspell 时找不到附魔。

# javascript - 在浏览器中定义/创建新变量时中断

> ID：10059206
> 
> 赞同：2
> 
> 时间：2012-04-07T23:29:20.350
> 
> 标签：javascript, google-chrome, developer-tools

在对象中定义新变量时，是否可以让 chrome 开发工具或 firebug 中断？我感兴趣的对象特别是“窗口”对象。

我明白了

> 未捕获的 ReferenceError：未定义 remoteUser

Chrome 开发者工具中的“if(remoteUser)”。每次访问页面时都不会发生该错误，因此我想找出定义变量并设置为值的行。

我可以在 javascript 文件中搜索该变量，但该路径非常乏味。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T23:51:28.423

`debugger;`您可以将其更改为属性并在 Chrome 中调用：

```
Object.defineProperty(window, 'remoteUser', {
    set: function() {
        debugger;
    }
}); 
```

然后只需向上调用堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T23:40:10.160

Firefox 有一个内置功能：[watch](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/watch)

甚至可以看到尚未定义的变量。

用法：`window.watch("remoteUser", callback)`

# objective-c - 对第一个字母使用 scanf()

> ID：10059208
> 
> 赞同：0
> 
> 时间：2012-04-07T23:29:23.463
> 
> 标签：objective-c, scanf

我有一些命令行，用户输入 1 个字母，当用户输入超过 1 个字母时，程序会采用输入的第一个字母。我该怎么做，因为我正在做的事情似乎对我不起作用：

```
 char ans, *d;

    Sequence *seq = [[Sequence alloc] init];

    while (k < 10) {
        k++;
        [seq generate];
        printf("%i. %s\n\n>>> ", k, [seq.full cStringUsingEncoding:NSUTF8StringEncoding]);
        scanf("%c%s", &ans, &d);

        NSString *input = [NSString stringWithFormat:@"%c", ans];
        if (input == seq.answer) {
            correct ++;
        }
    } 
```

编辑：我只是想澄清“d”变量被用作虚拟变量，因此不会注册 Enter 键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T00:13:02.587

您是否查看过**<curses.h>**以了解**getch()**函数的作用？
请参考： http: [//pubs.opengroup.org/onlinepubs/7908799/xcurses/curses.h.html](http://pubs.opengroup.org/onlinepubs/7908799/xcurses/curses.h.html) 它的Mac ...

# c# - 无法获取要反序列化的课程列表

> ID：10059214
> 
> 赞同：-3
> 
> 时间：2012-04-07T23:30:37.877
> 
> 标签：c#, serialization, binaryformatter

看来我得从头开始了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T00:10:09.397

您正在将`filename`字符串写入文件。我不明白你为什么期望将它反序列化为 a`List<ExpenseItemRoster>`会起作用。

您可能想要做的是：

1.  摆脱硬编码的文件名并使用`filename`它来代替它。
2.  添加一个类型的参数`List<ExpenseItemRoster>`并将`WriteToFile()`其序列化。
3.  将返回类型更改为`ReadFromFile()`反`List<ExpenseItemRoster>`序列`return`化列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T00:12:03.973

您正在序列化一个文件名（字符串），然后您希望它返回给您一些列表？如果您想稍后获取列表，则需要序列化列表。

# jquery - 将变量传递给 $.ajax().done()

> ID：10059219
> 
> 赞同：16
> 
> 时间：2012-04-07T23:32:22.460
> 
> 标签：jquery, ajax, loops, promise, scoping

我迷路了。如何将循环变量传递给 AJAX .done() 调用？

```
for (var i in obj) {
   $.ajax(/script/).done(function(data){ console.log(data); });
} 
```

显然，如果我这样做，`console.log(i+' '+data)` *我*`obj`会在每次迭代时返回对象中的最后一个键。文档让我失望。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-11-01T03:28:24.047

您可以在发送到 $.ajax() 的对象中创建一个自定义字段，并且`this`在进行 promise 回调时它将是一个字段。

例如：

`$.ajax( { url: "[https://localhost/whatever.php](https://localhost/whatever.php)", method: "POST", data: JSON.stringify( object ), custom: i // creating a custom field named "custom" } ).done( function(data, textStatus, jqXHR) { var index = this.custom; } );`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-07T23:39:48.933

您可以使用闭包（通过自执行函数）来捕获`i`每次循环调用的值，如下所示：

```
for (var i in obj) {
    (function(index) {
        // you can use the variable "index" here instead of i
        $.ajax(/script/).done(function(data){ console.log(data); });
    })(i);
} 
```

# mysql - 在 MySQL 中选择行作为列？

> ID：10059220
> 
> 赞同：3
> 
> 时间：2012-04-07T23:32:23.417
> 
> 标签：mysql, sql, pivot

考虑下表“视图”

```
user_id  _date       cnt
------------------------
1        2011-02-10  123
1        2011-02-11   99
1        2011-02-12  100
1        2011-02 13   12
2        2011-02-10   32
2        2011-02-11  433
2        2011-02-12  222
2        2011-02 13  334
3        2011-02-10  766
3        2011-02-11  654
3        2011-02-12   43
3        2011-02 13   27
...
100      2011-02-13  235 
```

如您所见，该表包含每个用户 (user_id) 每天 (_date) 的综合浏览量 (cnt)。我正在寻找一个 SELECT 查询，它将 user_ids 输出为列，因此表数据将采用矩阵形式，如下所示：

```
_date         1    2    3 ... 100
---------------------------------
2011-02-10  123   32  766
2011-02-11   99  433  654
2011-02-12  100  222   43
2011-02-13   12  334   27     235 
```

这可能与 SELECT 语句有关吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T00:01:28.667

如果您正在处理一组有限的用户 ID，则可以执行以下操作：

```
SELECT _date,
    SUM(CASE WHEN _user_id = 1 THEN cnt ELSE 0 END) AS user1,
    SUM(CASE WHEN _user_id = 2 THEN cnt ELSE 0 END) AS user2,
    SUM(CASE WHEN _user_id = 3 THEN cnt ELSE 0 END) AS user3,
    ...
FROM views
GROUP BY _date 
```

不过，这更像是一个 hack，而不是一个好的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:10:40.053

看起来您有一长串要转换的值。如果是这种情况，那么您可以使用[准备好的语句](http://buysql.com/mysql/14-how-to-automate-pivot-tables.html)。您的代码将如下所示（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/2a345/4)）：

```
CREATE TABLE Table1
    (`user_id` int, `_date` datetime, `cnt` int)
;

INSERT INTO Table1
    (`user_id`, `_date`, `cnt`)
VALUES
    (1, '2011-02-09 17:00:00', 123),
    (1, '2011-02-10 17:00:00', 99),
    (1, '2011-02-11 17:00:00', 100),
    (1, '2011-02-13 00:00:00', 12),
    (2, '2011-02-09 17:00:00', 32),
    (2, '2011-02-10 17:00:00', 433),
    (2, '2011-02-11 17:00:00', 222),
    (2, '2011-02-13 00:00:00', 334),
    (3, '2011-02-09 17:00:00', 766),
    (3, '2011-02-10 17:00:00', 654),
    (3, '2011-02-11 17:00:00', 43),
    (3, '2011-02-13 00:00:00', 27),
    (100, '2011-02-12 17:00:00', 235)
;

SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(case when user_id = ''',
      user_id,
      '''  then cnt else 0 end) AS ''',
      user_id, ''''
    )
  ) INTO @sql
FROM Table1;

SET @sql = CONCAT('SELECT _Date, ', @sql, ' 
                  FROM table1 
                  GROUP BY _Date');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# c++ - 基本字符串 不允许在声明的地方之外定义

> ID：10059221
> 
> 赞同：1
> 
> 时间：2012-04-07T23:32:27.120
> 
> 标签：c++, winapi

好吧，我对这个错误有点困惑。我在这里要做的是创建一个 basic_string，当定义 UNICODE 和 _UNICODE 时（这是在 WINAPI 中），它将是 char 或 wchar_t。这确实有效，但由于某种原因，我无法定义一个在声明它的类之外接收 std::basic_string 的函数。这是一个例子：

测试.h

```
#ifndef TEST_H
#define TEST_H

#include <Windows.h>
#include <string>

class Test
{
public:
    void func(std::basic_string<TCHAR> stringInput);
};

#endif 
```

测试.cpp

```
#include "test.h"

void Test::func(std::basic_string<TCHAR> stringInput)
{
    MessageBox(NULL, stringInput.c_str(), TEXT("It works!"), MB_OK);
} 
```

这会产生一个链接错误，声称 test::func 从未定义。但是，如果我只是像这样在类中定义：

测试.h

```
#ifndef TEST_H
#define TEST_H

#include <Windows.h>
#include <string>

class Test
{
public:
    void func(std::basic_string<TCHAR> stringInput)
    {
        MessageBox(NULL, stringInput.c_str(), TEXT("It works!"), MB_OK);
    }
}

#endif 
```

它工作正常。但是，我真的很喜欢将我的声明和定义保存在单独的文件中，以避免重新定义错误和组织。这是踢球者。当我像以前一样在 test.cpp 中定义了 func 并且没有在 main.cpp 中定义 UNICODE 和 _UNICODE 时，我没有收到链接错误。所以真的，我唯一一次得到链接错误是当 TCHAR 变成 wchar_t 时。所以这是我的主要内容，错误很快......

主文件

```
#define UNICODE       // this won't compile when these are defined
#define _UNICODE

#include <Windows.h>
#include <string>

#include "test.h"

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,LPSTR lpCmdLine, int nCmdShow)
{
    Test test;
    test.func(TEXT("wakka wakka"));
    return 0;
} 
```

错误：

`error LNK2019: unresolved external symbol "public: void __thiscall Test::func(class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> >)" (?func@Test@@QAEXV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@@Z) referenced in function _WinMain@16`

任何人都知道发生了什么以及我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T23:59:06.320

我想因为你正在投入`#define UNICODE`，`main.cpp`另一部分不知道这一点。何时`test.cpp`编译，`UNICODE`未定义。您可以尝试将`UNICODE`定义作为项目处理器宏。或者在包含 Windows.h 之前`test.h`编写`#define UNICODE`和。`#define _UNICODE`

另一方面，因为您在 Test.h 中包含了 Windows.h，所以您不应该在 main.cpp 中再次包含它。

考虑在 Visual Studio 中创建一个默认项目，并使用`Precompiled Headers`. 这样，将此类包含在 stdafx.h 中将解决您的所有问题：

```
#define UNICODE
#include <windows.h>
#include <string> 
```

# c# - 正则表达式组不起作用

> ID：10059225
> 
> 赞同：0
> 
> 时间：2012-04-07T23:32:53.807
> 
> 标签：c#, regex

我正在尝试匹配和分组（*任何短语*）##date##（*任何短语*），但 val1 和 val2 为空。

```
Console.WriteLine("Subject: "+line);
Match match = Regex.Match(line, "(.)"+Regex.Escape("##date##")+"(.)", RegexOptions.IgnoreCase);
string val1 = match.Groups[1].Value;
string val2 = match.Groups[2].Value;
Console.WriteLine("Line#{0}: {1} Date: {2}", ++lineNo, val1, val2); 
```

安慰：

```
Subject: http://www.website.com/url/is/masked.htm ##date## 3
Line#25:   Date: 
```

一个点不应该匹配任何东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T23:36:29.617

点匹配单个符号，在您的示例`##date##`中被两个空格包围。因此，您的组数学是`space`and `space`，看起来像“什么都没有”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T23:39:18.500

[点匹配除换行符以外的**单个字符。**](http://msdn.microsoft.com/en-us/library/20bw873z.aspx#AnyCharacter)在您的情况下，它与之前和之后的空间相匹配`##date##`。请改用以下正则表达式：

```
Match match = Regex.Match(line, "(.*) ##date## (.*)", RegexOptions.IgnoreCase); 
```

这匹配之前和之后的整个短语`##date##`，不包括两边的单个空格。

输出：

> 第 25 行：[http](http://www.website.com/url/is/masked.htm) ://www.website.com/url/is/masked.htm日期：3

# php - 通过身份验证从外部网站提取内容。

> ID：10059226
> 
> 赞同：1
> 
> 时间：2012-04-07T23:33:12.070
> 
> 标签：php, curl, login, external, file-get-contents

我目前正在尝试创建一个 php 脚本，如果用户能够将他们的用户连接到多个页面。

这就是想法。

我想要做的是检查用户是否登录到[战斗日志](http://battlelog.battlefield.com)，然后获取他的用户名。

我不确定这是否可能......但我会很感激我能得到的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T23:38:39.443

您将在这里遇到的主要问题是大多数现代浏览器采用跨域安全性来确保其他网站或潜在的恶意网站无法非法访问另一个浏览器窗口中的用户数据。

您希望完成的是所谓的跨站点脚本。在某些情况下是可能的。例如，如果战斗日志公开了一个 API 供其他开发人员访问用户数据。

这当然会涉及跨域的服务器端请求，因此您要么需要将服务器用作代理，要么使用 JSONP Web 服务，其中响应以 JSON 格式发送并包含在回调函数中。

**从 PHP 脚本访问数据：**

由于您使用的是 PHP，因此您需要访问 API。PHP 脚本无法向浏览器发出请求，因此 Battlelog 需要有一个插件架构，您可以在其中将脚本嵌入到他们的网站中，或者他们需要公开一个 API 供您从您的服务器查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:31:53.117

我创建了这个脚本，我希望有人会发现它的用途。

```
$data = array( 

'redirect' => '', 

'email' => $email, 

'password' => $password ,

'submit' => 'Sign+in'

); 

$cr = curl_init('http://battlelog.battlefield.com/bf3/gate/login/'); 

curl_setopt($cr, CURLOPT_RETURNTRANSFER, true);

curl_setopt($cr, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);

curl_setopt($cr, CURLOPT_COOKIEJAR, 'cookie.txt');

curl_setopt($cr, CURLOPT_POST, true);

curl_setopt($cr, CURLOPT_POSTFIELDS, $data);

$output = curl_exec($cr);

echo $output;

curl_close($cr);

$cr = curl_init('http://battlelog.battlefield.com/bf3/'); 

curl_setopt($cr, CURLOPT_RETURNTRANSFER, true);

curl_setopt($cr, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);

curl_setopt($cr, CURLOPT_COOKIEFILE, 'cookie.txt');

$output = curl_exec($cr); 

curl_close($cr); 

include '/scripts/shd/simple_html_dom.php';

$html = new simple_html_dom();

$html -> load($output);

foreach($html->find('#base-user-name a') as $e)
{
    $battlelog_username = $e->plaintext;
} 
```

# iphone - 复制 NSNumber 数组

> ID：10059228
> 
> 赞同：0
> 
> 时间：2012-04-07T23:33:40.330
> 
> 标签：iphone, objective-c, copy, nsnumber

我是 Objective-c 方面的新手，所以如果我的问题太愚蠢，请不要杀了我^^

这是我的问题：

***架构：***

我有一个对象：带有属性的*访客：* *listOfPricePaidByGuest* 此属性是一个 NSNumber 数组。所有的客人都在这个 NSMutableArray 中：*currentListOfBeneficiaries*

***情况：***

我有一个 UIViewController 允许用户修改*listOfPricePaidByGuest中的值*

我想允许用户取消所有修改。所以当视图被加载时，我将guest复制到一个新的 mutableArray 中：*tempListOfBeneficiaries*（我已经实现了*NSMutableCoying*委托并检查了这两个对象是否具有不同的内存地址）。

当用户单击*Save*时，我只是删除视图，因为所有修改都已完成。

当用户单击*Cancel*时，我只是对原始 listOfPricePaidByGuest 使用 setArray 方法。

事实是我的 tempArray 中的所有 NSnumber 也都被修改了，我不明白为什么......我已经尽我所能......

***问题：***

有谁知道使这些值不变的方法？

***一些代码：***

**复制到 tempArray**

```
 for (Guest *newGuest in self.currentGrocery.listOfBeneficiaries)
    {
        // Copying original guest
        Guest *copyGuest = [newGuest mutableCopy];

        for (NSNumber *aNumber in newGuest.listOfPricePaidByGuest)
        {
            int index = [newGuest.listOfPricePaidByGuest indexOfObject:aNumber];

            // Copying NSNumber in newGuest.listOfPricePaidByGuest
            NSNumber *newNumber = [aNumber copy];

            // Replace current object
            [copyGuest.listOfPricePaidByGuest replaceObjectAtIndex:index withObject:newNumber];

            // Releasing current copied number
            [newNumber release];
        }

        // Add it to tempArray
        [self.tempListOfBeneficiaries addObject:copyGuest];

        // Releasing current copiedGuest
        [copyGuest release];
    } 
```

*** NSMutableCopying 委托的实现 ***

```
 -(id)mutableCopyWithZone:(NSZone *)zone
    {
        Guest *guestCopy = [[Guest allocWithZone: zone] init];
        [guestCopy setListOfGrocery:self.listOfGrocery];
        [guestCopy setListOfPricePaidByGuest:self.listOfPricePaidByGuest];

        [guestCopy setGuestName:self.guestName];
        [guestCopy setGuestEmail:self.guestEmail];
        [guestCopy setGuestNickname:self.guestNickname];
        [guestCopy setGuestPhone:self.guestPhone];

        [guestCopy setTotalGuestDepense:self.totalGuestDepense];
        [guestCopy setTotalGuestDepenseToPayAfterReeq:self.totalGuestDepenseToPayAfterReeq];

        [guestCopy setIsComming:self.isComming];
        [guestCopy setIsSend:self.isSend];

        return guestCopy;
    } 
```

PS：对不起英语......现在很晚了......好吧，我是法国人，所以它解释了一切：P

感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T01:06:03.990

问题出在数组中，而不是 NSNumbers。目前，你总是有一个数组，从来没有两个。在`[Guest mutableCopyWithZone:]`中，您必须复制 listOfGrocery 和 listOfPricePaidByGuest 数组：

```
[guestCopy setListOfGrocery:[self.listOfGrocery mutableCopy]];
[guestCopy setListOfPricePaidByGuest:[self.listOfPricePaidByGuest mutableCopy]]; 
```

拥有`setListOfGrocery`并`setListOfPricePaidByGuest`执行此复制步骤可能会更好，除非有时您需要保留输入数组。如果您使用 定义这些`@property`，只需使用 replace`assign`或`retain`with `copy`。

另外，这是使用自动引用计数还是垃圾收集？如果没有，副本需要在某个时候发布。

# java-me - NullPointerException 和 IllegalArgumentException

> ID：10059233
> 
> 赞同：-1
> 
> 时间：2012-04-07T23:34:27.550
> 
> 标签：java-me

在我将图像从服务器下载到 J2ME 电话的代码中，我在下面收到这两个错误。请帮助指导我如何删除它们。

> java.lang.NullPointerException: 0
> 
> 在 ServerImages.ImageMidletServlet$Test.run(ImageMidletServlet.java:102)
> 
> 在 java.lang.Thread.run()，bci=11
> 
> 未捕获的异常：java.lang.IllegalArgumentException
> 
> javax.microedition.lcdui.Display.setCurrent(), bci=160
> 
> *   在 ServerImages.ImageMidletServlet$Test.showAlert(ImageMidletServlet.java:117)
> 
> 在 ServerImages.ImageMidletServlet$Test.run(ImageMidletServlet.java:108)
> 
> 在 java.lang.Thread.run()，bci=11

使用的代码如下

```
public class ImageMidletServlet extends MIDlet implements CommandListener {

    Display display = null;
    Form form = null;
    String url = "http://localhost:8080/C:/Users/HASENDE/Pictures/ase.jpg";
    Command backCommand = new Command("Back", Command.BACK, 0);
    Command submitCommand = new Command("Submit", Command.OK, 2);
    Command exitCommand = new Command("Exit", Command.STOP, 3);
    private Test test;

    public ImageMidletServlet() {}

    public void startApp() throws MIDletStateChangeException {
        display = Display.getDisplay(this);
        form = new Form("Show Image");
        form.addCommand(submitCommand);
        form.addCommand(exitCommand);
        form.setCommandListener(this);
        display.setCurrent(form);
    }

    public void pauseApp() {}

    public void destroyApp(boolean unconditional) {}

    public void commandAction(Command c, Displayable d) {
        if (c == exitCommand) {
            destroyApp(true);
            notifyDestroyed();
        } else if (c == backCommand) {
            display.setCurrent(form);
        } else if (c == submitCommand) {
            test = new Test(this);
            test.start();
        }
    }

    class Test implements Runnable {

        ImageMidletServlet midlet;
        private Display display;

        public Test(ImageMidletServlet midlet) {
            this.midlet = midlet;
            display = Display.getDisplay(midlet);
        }

        public void start() {
            Thread t = new Thread(this);
            t.start();
        }

        public void run() {
            DataInputStream is = null;
            StringBuffer sb = new StringBuffer();
            Image img = null;
            try {
                HttpConnection c = (HttpConnection) Connector.open(url);
                int len = (int) c.getLength();
                if (len > 0) {
                    is = c.openDataInputStream();
                    byte[] data = new byte[len];
                    is.readFully(data);
                    img = Image.createImage(data, 0, len);
                    Form f = new Form("Image");
                    ImageItem imgItem = new ImageItem("", img,
                            ImageItem.LAYOUT_NEWLINE_AFTER
                                | ImageItem.LAYOUT_CENTER, null);
                    f.append(imgItem);
                    display.setCurrent(f);
                } else {
                    showAlert("length is null");
                    ;
                }
                is.close();
                c.close();
            } catch (Exception e) {
                e.printStackTrace();
                showAlert(e.getMessage());
            }
        }

        /* Display Error On screen */
        private void showAlert(String err) {
            Alert a = new Alert("");
            a.setString(err);
            a.setTimeout(Alert.FOREVER);
            display.setCurrent(a);
        }
    };
} 
```

然后当我执行命令提交时，我不知道为什么模拟器显示“长度为空”的选择而不是下载图像。任何帮助都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T21:09:57.367

有些服务器没有正确设置 HTTP 标头 Content-Length，因为它 c.getLength() 可能我会返回 0（零），即使您有内容要阅读。

您可以在 Connector.open 之后立即尝试 Image.createImage(c.openDataInputStream())，而不是使用缓冲区。

# java - 如何使用 Jsoup 放弃部分网页？

> ID：10059236
> 
> 赞同：2
> 
> 时间：2012-04-07T23:34:57.583
> 
> 标签：java, webpage, jsoup

我目前正在使用 Jsoup 来解析 html。代码很简单：

```
Document doc = null;
    try{
        doc = Jsoup.connect(link).get();    
    }
    catch (Exception e) {
        //System.out.println("Some error occured.");
        textView.setText(e.getMessage());
    } 
```

它确实为我提供了我想要的网页，稍后我可以使用它的 getElementsByTag 方法等从该网页中提取我需要的数据。但是，我只想使用部分网页，例如，我希望放弃 < 之后的所有内容！-- / foo --> 在我的网页中。（实际上它在 < 和 ! 之间没有空格，但我不能在这里输入。）有没有办法在该字符串之后放弃网页并只获取我想要的部分的新文档？我检查了食谱，但它似乎只处理网页结构，所以我不太确定是否可以执行字符串删除之类的操作。感谢您的阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T23:40:28.053

您可以使用 Document doc = Jsoup.parse(html) 其中 HTML 是页面 HTML。即首先采用 HTML

```
 Connection connect = Jsoup.connect(url);
   Connection.Response response = connect.execute();
   String html = response.body(); 
```

然后执行您需要的任何操作（例如，在标记后剪切 HTML，但添加必要的关闭 HTML 标签），然后

```
 Document doc = Jsoup.parse(html) 
```

# c++ - GCC 对 std::async(std::launch::async) 的行为与 Clang 的行为

> ID：10059239
> 
> 赞同：11
> 
> 时间：2012-04-07T23:35:32.280
> 
> 标签：c++, gcc, c++11, clang, policy

有没有人有相当新的经验`std::async`？我们目前正在实现一个并行文件解析器，它读取一个文件块并将这个块传递给一个异步函数。

以这种方式使用 Clang (v3.0) 非常适合默认`std::async`策略（依赖于实现）。在两核机器上，它最多可以触发 4 个线程，效果非常好。

但是使用 GCC (v4.7)，文件读取线程不会产生任何新线程，从而使程序最终完全顺序。

使用`std::launch::async`，两个版本几乎都在做同样的事情（应该是什么情况）。

有谁知道 GCC 的 c++11 线程功能的当前状态？或者这可能是我们实现中的错误？

短代码：

```
while (readNewChunk()) {
    Chunk &chunk = fileReader_.getChunk(); //reading the file
    ChunkLoader *chunkLoader = new ChunkLoader();
    auto ftr = std::async(std::launch::async, &ChunkLoader::createDictionaries, chunkLoader);
    dictCreationFutures_.push_back(std::move(ftr));
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-08T02:20:09.240

行为符合规范，即使它不是您想要的。如果您未指定启动策略，则将其视为`async|deferred`，这意味着由实现决定哪个。`deferred`如果有选择，GCC 碰巧总是选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-07T23:50:36.677

EDIT2：我会解释更多。

std::async 承诺“未来”；那就是：当你想要它时，它就会出现。它现在可以计算，它可以在您要求时计算，我们只是承诺它会发生。

就像我下面的海报一样，GCC 默认为 deferred（这意味着，当它被要求时，它会履行该承诺，并且可能不会事先）。这个默认的原因是因为 GCC 还没有提供适当的 C++11 线程支持。它没有一个好的内部线程调度程序，除此之外还有很多其他东西。这有点像黑客。不，更像是一堆黑客。事实上，如果你在 GCC 上用 C++11 编写线程代码，那么当他们实现特性时，它就会正常工作；现在，它大部分工作正常。我的意思是，你最终得到结果，对吧？

如果你告诉它启动一个线程，它会启动一个线程，因为它（目前）太愚蠢了，无法意识到它可以而且应该独立运行（不像 CLang，它目前具有更好的内部线程调度程序）。

编辑：认真的？误入歧途！

这是我的参考！ [http://gcc.gnu.org/projects/cxx0x.html](http://gcc.gnu.org/projects/cxx0x.html)。请注意，“并发”下的几乎所有内容，包括“内存模型”都标记为 NO 。GCC.GNU.org。你知道他们是 GCC 的权威。

根据我的评论稍作编辑：

我真的建议使用 Boost。当 GCC 准备好时，对正确的 C++11 支持不会有很大的飞跃。C++11 中的新线程模型需要与 GCC 或 MSVC 使用的不同的内存布局，而且它们还没有真正实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-07T21:17:14.533

所以我知道这是 2 年后，但我不禁觉得有必要回应 @std''OrgnlDave 关于 GCC 与 CLang 的评论，请注意至少目前，2015 年 1 月，clang 版本 3.5 和GCC 4.9 版具有完全相同的行为。这种行为是，当没有提供启动策略时，默认为不同，并在调用 future::get 时执行，并且只有当显式提供异步启动策略时，编译器才会导致在后台执行函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-21T19:41:01.617

更新的答案：GCC 7.3.0 和 Clang 6.0 都将`std::async()`在默认启动策略的单独线程上执行工作。两者都将创建与调用一样多的线程`std::async()`（经过 100 次调用测试）。

我不知道 GCC 的这种行为何时改变。

# java - Java - 从网站检索数据

> ID：10059246
> 
> 赞同：3
> 
> 时间：2012-04-07T23:35:58.947
> 
> 标签：java, swing, web, data-collection

我正在制作一个恢复彩票号码并将其显示在窗口中的应用程序。但是我不确定如何从网站上恢复数据和数字：

[https://www.national-lottery.co.uk/player/p/results.ftl](https://www.national-lottery.co.uk/player/p/results.ftl)

你会怎么做呢？我以前做过这个，但是有一个网站返回了一个我可以使用的数据字符串。我更不确定如何做到这一点。任何建议都将不胜感激，并且该技术（如果有的话）将帮助我完成更多的项目！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T23:53:25.630

使用[Jsoup](http://jsoup.org/)检索和解析页面：

```
String url = "https://www.national-lottery.co.uk/player/p/results.ftl";
Document document = Jsoup.connect(url).get();
final Elements elementsByTag = document.getElementsByTag("table");
... then work with the table or any other element 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T23:55:45.687

该网站提供了一个下载 CSV 版本数字的链接。只需使用它：

[https://www.national-lottery.co.uk/player/lotto/results/downloadResultsCSV.ftl](https://www.national-lottery.co.uk/player/lotto/results/downloadResultsCSV.ftl)

看起来像：

```
DrawDate,第 1 球,第 2 球,第 3 球,第 4 球,第 5 球,第 6 球,红利球,球组,机器
07-Apr-2012,23,12,42,16,25,31,18,6,兰斯洛特
04-Apr-2012,44,23,9,40,33,26,31,2,梅林
31-Mar-2012,2,49,40,47,18,5,19,1,梅林
2012-03-28,16,8,39,22,3,38,26,3,梅林
24-Mar-2012,24,27,6,39,31,45,32,4,兰斯洛特
21-Mar-2012,10,14,45,25,39,21,40,1,梅林
17-Mar-2012,37,40,1,3,20,16,15,2,梅林
14-Mar-2012,15,36,26,31,14,18,48,4,梅林
10-Mar-2012,12,37,23,43,3,1,33,1,梅林
07-Mar-2012,28,44,8,35,11,2,17,3,梅林
03-Mar-2012,31,20,40,28,7,23,42,4,梅林
29-Feb-2012,41,29,46,14,49,13,43,3,兰斯洛特
25-Feb-2012,29,27,26,7,32,25,33,1，兰斯洛特
22-Feb-2012,35,12,7,49,43,15,8,4,梅林
18-Feb-2012,19,22,30,33,41,2,24,4,兰斯洛特
15-Feb-2012,30,40,28,33,9,44,16,3,梅林
11-Feb-2012,24,31,23,1,49,45,6,3,兰斯洛特
08-Feb-2012,7,13,31,44,36,16,26,8,兰斯洛特
04-Feb-2012,41,45,7,40,48,4,46,2,梅林
01-Feb-2012,7,39,38,17,22,21,3,2,兰斯洛特
28-Jan-2012,10,25,31,40,28,12,1,2,兰斯洛特
2012 年 1 月 25 日,2,30,8,26,45,39,46,1,梅林
21-Jan-2012,17,5,32,39,49,42,19,5,梅林
18-Jan-2012,22,43,34,9,31,35,20,6,梅林
14-Jan-2012,7,12,10,15,25,42,33,7,兰斯洛特
11-Jan-2012,40,33,39,9,2,27,45,6,兰斯洛特
07-Jan-2012,47,8,15,17,14,20,38,7,梅林
04-Jan-2012,42,43,30,9,28,26,2,8,梅林
31-Dec-2011,11,38,42,37,44,7,2,7,兰斯洛特
2011年12月28日,48,11,49,13,17,8,19,6,兰斯洛特
2011 年 12 月 24 日，43，32，36，15，23，1，19，7，兰斯洛特
2011年12月21日,30,7,28,34,38,45,6,5,梅林
17-Dec-2011,42,1,35,48,39,22,12,5,梅林
14-Dec-2011,3,43,30,28,10,25,31,8,梅林
10-Dec-2011,30,21,29,39,24,16,20,6,兰斯洛特
07-Dec-2011,10,31,27,47,32,14,41,5,梅林
03-Dec-2011,49,1,35,48,47,30,8,8,梅林
30-Nov-2011,30,26,25,24,23,13,4,7,梅林
2011年11月26日,13,36,26,16,25,46,15,6,梅林
2011年11月23日,19,31,48,22,4,11,6,5,梅林
19-Nov-2011,32,31,1,34,29,36,45,3,亚瑟
2011 年 11 月 16 日,26,40,39,27,10,12,20,1,GUINEVERE
12-Nov-2011,28,13,12,33,6,38,10,14,亚瑟
09-Nov-2011,27,2,8,32,23,10,44,1,GUINEVERE
05-Nov-2011,14,24,39,23,16,27,43,8,兰斯洛特
02-Nov-2011,12,38,11,33,37,49,3,2,GUINEVERE
2011 年 10 月 29 日,49,14,5,28,9,46,45,1,GUINEVERE
2011 年 10 月 26 日,4,23,34,41,38,39,27,4,GUINEVERE
2011 年 10 月 22 日,20,43,27,44,28,34,1,4,亚瑟
2011 年 10 月 19 日，13，18，34，49，32，14，20，3，GUINEVERE
2011 年 10 月 15 日,41,7,12,46,34,27,14,2,亚瑟
2011 年 10 月 12 日，37，26，40，25，13，24，30，3，阿瑟

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T23:52:54.047

创建页面地址的 URL 表示。打开与 URL 的连接。建立输入流。从流中读取所有数据。这将是页面源。

```
URL url = new URL("https://www.national-lottery.co.uk/player/p/results.ftl");
URLConnection connection = url.openConnection();
InputStream stream = connection.getInputStream();
byte[] data = new byte[stream.available()];

stream.read(data);
stream.close();

String source = new String(data); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-07T23:53:07.200

除非该站点提供允许查询彩票号码的 API 或 Web 服务，否则您可能必须抓取页面的 html 源代码。看起来数字存储在一个简单的 html 列表中：

```
<ul>
  <li>12</li>
  <li>16</li>
  <li>23</li>
  <li>25</li>
  <li>31</li>
  <li>42</li>
  <li class="bonus">18</li>
</ul> 
```

那里有很多优秀的 Java HTML 解析器。这里有几个项目：

*   [http://jsoup.org/](http://jsoup.org/)
*   [http://htmlparser.sourceforge.net/](http://htmlparser.sourceforge.net/)
*   [http://mozillaparser.sourceforge.net/](http://mozillaparser.sourceforge.net/)
*   [http://jtidy.sourceforge.net/](http://jtidy.sourceforge.net/)

我环顾了您感兴趣的网站，似乎他们有一个“历史”页面，其中包含几天的彩票号码：

[https://www.national-lottery.co.uk/player/lotto/results/results.ftl](https://www.national-lottery.co.uk/player/lotto/results/results.ftl)

这可能是一个更好的页面。

# sql-server - 使用 SQL Server “FOR XML”：将结果转换为文本

> ID：10059247
> 
> 赞同：1
> 
> 时间：2012-04-07T23:36:08.913
> 
> 标签：sql-server

我正在尝试将 FOR XML 查询的结果作为文本获取。我在这里发现了一些类似的问题： [Using SQL Server "FOR XML": Convert Result Datatype to Text/varchar/string 不管什么？](https://stackoverflow.com/questions/5655332/using-sql-server-for-xml-convert-result-datatype-to-text-varchar-string-whate) 但在我的情况下，我使用 WITH XMLNAMESPACES 语句，这个解决方案对我不起作用。如何以文本形式获得以下查询的结果？

```
WITH XMLNAMESPACES ('urn:blablablabla' as bi) 
SELECT 'urn:blablabla.xsd' AS "@xsi:schemaLocation",  

        (SELECT 'aaaa' AS 'bi:idValue', 
                'bbbb' AS 'bi:idContext' 
        FOR XML PATH('bi:Part1'),TYPE), 

        (SELECT 'cccc' AS 'bi:idValue', 
                'dddd' AS 'bi:idContext' 
        FOR XML PATH('bi:Part2'),TYPE) 
 FOR XML PATH('bi:Items'), ELEMENTS XSINIL 
```

谢谢

* * *

结果应如下所示：

```
<bi:Items xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bi="urn:blablablabla" xsi:schemaLocation="urn:blablabla.xsd">
<bi:Part1 xmlns:bi="urn:blablablabla">
 <bi:idValue>aaaa</bi:idValue>
 <bi:idContext>bbbb</bi:idContext>
</bi:Part1>
<bi:Part2 xmlns:bi="urn:blablablabla">
 <bi:idValue>cccc</bi:idValue>
 <bi:idContext>dddd</bi:idContext>
</bi:Part2>
</bi:Items 
```

我的目标是将此结果作为文本而不是 XML 数据类型。例如做这样的事情：

```
DECLARE @ResultText NVARCHAR(MAX) 
SET @ResultText = ... Returned text from this query ... 
```

另外，也许您知道如何避免在每个节点中重复命名空间？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T08:04:58.950

您需要使用`select`而不是`set`.

```
DECLARE @ResultText NVARCHAR(MAX);

WITH XMLNAMESPACES ('urn:blablablabla' as bi) 
SELECT @ResultText = 
  (
    SELECT 'urn:blablabla.xsd' AS "@xsi:schemaLocation",  

            (SELECT 'aaaa' AS 'bi:idValue', 
                    'bbbb' AS 'bi:idContext' 
            FOR XML PATH('bi:Part1'),TYPE), 

            (SELECT 'cccc' AS 'bi:idValue', 
                    'dddd' AS 'bi:idContext' 
            FOR XML PATH('bi:Part2'),TYPE) 
     FOR XML PATH('bi:Items'), ELEMENTS XSINIL 
); 
```

**更新：**

> 避免重复命名空间

根据这两个答案，有一种方法可以做到这一点`for xml explicit`。

[FOR XML PATH 和 xsi:nil 属性](https://stackoverflow.com/a/6453217/569436)
[如何在使用 FOR XML PATH 时删除嵌套查询中的冗余命名空间](https://stackoverflow.com/a/3244491/569436)

如果您希望将来改变行为，您可以对此连接项目进行投票。
[在嵌套的 SELECT FOR XML 语句中抑制命名空间属性](https://connect.microsoft.com/SQLServer/feedback/details/265956/suppress-namespace-attributes-in-nested-select-for-xml-statements)

# lucene - Lucene 索引：排除某些术语

> ID：10059248
> 
> 赞同：2
> 
> 时间：2012-04-07T23:36:14.973
> 
> 标签：lucene

如何根据长度排除某些术语？例如，不要索引少于 3 个字母或多于 20 个字母的术语。还要排除以数字开头的单词。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T08:18:30.137

`StandardAnalyzer`有一个`maxTokenLength`可以设置的属性，我认为它已经消除了以数字开头的标记。但是，如果您有更具体的需求，您将需要自己制作`Analyzer`并且可能`TokenFilter`. 与 Lucene 的文档相反，由于对标记化过程的最高性能要求产生了不寻常的编码模式，因此实现这些类并不是“直截了当”的。例如，没有办法`StandardAnalyzer`通过扩展它来稍微修改它的行为，您必须从基类之一开始。`StandardAnalyzer,`如果您在创建*可重用*分析器时扩展同一个类，则必须格外小心以满足其合同。

因此，首先尝试将现有过滤器中的分析器组合在一起。例如，`LengthFilter`在核心 Lucene 中提供了一个。如果失败，请实现您自己的过滤器并将其构建到您的分析器中。

这可能会帮助您开始实施过滤器和分析器：

```
public class MyFilter extends FilteringTokenFilter 
{
  private final CharTermAttribute termAtt = addAttribute(CharTermAttribute.class);

  public MyFilter(TokenStream in) { super(false, in); }

  protected boolean accept() {
    final int len = termAtt.length();
    final int d = termAtt.charAt(0) - '0':
    return len >= 3 && len <= 20 && (d < 0 || d > 9);
  }
}

public final class MyAnalyzer extends ReusableAnalyzerBase 
{
  @Override protected TokenStreamComponents createComponents(
      String fieldName, Reader reader) 
  {
    final Tokenizer source = new LowerCaseTokenizer(Version.LUCENE_35, reader);
    return new TokenStreamComponents(source, new MyFilter(source));
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T07:24:49.543

您可以编写一个自定义令牌过滤器来完成这一切。请参阅[http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/analysis/package-summary.html](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/analysis/package-summary.html)更多详细信息。

# php - jQuery 到 PHP 到 Highcharts

> ID：10059249
> 
> 赞同：0
> 
> 时间：2012-04-07T23:36:16.703
> 
> 标签：php, jquery, highcharts

我一直从我的 jquery 获取值并将其传递给我的 PHP。我得到了正确的值，问题是我的 highchart 没有使用我从 jQuery 获得的值显示数据。这是我的脚本。

```
<?php
    include ('connect.php');
    $years = array(2011=>'Select  year','2012','2013','2014','2015','2016','2017','2018','2019','2020','2021','2022','2023','2024','2025','2026','2027','2028','2029','2030');
    $year_count= count($years);
    $year = $year_count + 2010;
?>

<script>
$(document).ready(function()
{
        $("#years").change(function(event)
   {
      var y=$(this).val();
      if(y!='2011' || y!='NULL')
      {
          alert(y);
          $("#memcount").load('reports/yearly_sales.php', {"y":y});
         $("#top10").load('reports/yearly_customers.php', {"y":y});
      }
   });
}); 
```

```
Year: <select id="years">
<?php
for($yr=2011; $yr<=$year; $yr++)
{
    echo "<option value='".$yr."'>".$years[$yr]."</option>";
}
?> 
```

这是我的 php

```
<?php
if(isset($_POST['y'])) 
 {
$y = $_POST['y'];

 ?>

<div id='top10' style='width: 680px; height: 400px; margin: 0 auto'></div>

    <?php
     $months = array();
     $jan_tot = 0;
     $feb_tot = 0;
    //jan
    $jan = mysql_query("SELECT count(customer_id) AS count_id, date_added FROM `customer` WHERE date_added LIKE '$y-01-%'");
    while($janfetch = mysql_fetch_array($jan))
    {
        $jan_tot=(int)$janfetch['count_id'];
    }

    //feb
    $feb = mysql_query("SELECT count(customer_id) AS count_id FROM `customer` WHERE date_added LIKE '$y-02-%'");
    while($febfetch = mysql_fetch_array($feb))
    {
        $feb_tot=(int)$febfetch['count_id'];
    }
     }
    ?> 
```

感谢那些会帮助我的人。我非常需要这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T10:05:12.197

尝试这个：

```
$query = "SELECT * FROM `order`  WHERE  `order_status_id`='5' AND
                                        `date_added` LIKE '".$year."-01-%'";

$jan = mysql_query($query) or die($query."<br/><br/>".mysql_error()); 
```

# iphone - 自定义 UITableView 不显示

> ID：10059250
> 
> 赞同：0
> 
> 时间：2012-04-07T23:36:19.627
> 
> 标签：iphone, ios, uitableview

我有以下代码向我显示一个自定义列表，其中包含图像和旁边的一些文本，但我看不到我的列表填充了给定的五个示例数据。有人能帮我吗？？？

```
#import "RestListViewController.h"
#import "RestListCustomTableCell.h"

@implementation RestListViewController

/*
// The designated initializer. Override to perform setup that is required before the view is    loaded.
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
      self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
      if (self) {
      // Custom initialization
 }
 return self;
 }
 */

/*
 // Implement loadView to create a view hierarchy programmatically, without using a nib.
 - (void)loadView {
 }
 */

  // Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
  - (void)viewDidLoad {
 [super viewDidLoad];
    }
  - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:                     (NSIndexPath       *)indexPath {
    //NEVER REACHES HERE!!!!!!!!!!
NSLog(@"BUILD THE TABLE!!!");
static NSString *CellIdentifier = @"Cell";
RestListCustomTableCell *cell = (RestListCustomTableCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[RestListCustomTableCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];
}

// Set up the cell…

switch (indexPath.row) {

    case 0:
        cell.primaryLabel.text = @"Meeting on iPhone Development";
        cell.secondaryLabel.text = @"Sat 10:30";
        cell.myImageView.image = [UIImage imageNamed:@"restabapiknik.png"];
        break;
    case 1:
        cell.primaryLabel.text = @"Call With Client";
        cell.secondaryLabel.text = @"Planned";
        cell.myImageView.image = [UIImage imageNamed:@"restburgerking.png"];
        break;
    case 2:
        cell.primaryLabel.text = @"Appointment with Joey";
        cell.secondaryLabel.text = @"2 Hours";
        cell.myImageView.image = [UIImage imageNamed:@"restburgerstory.png"];
        break;
    case 3:
        cell.primaryLabel.text = @"Call With Client";
        cell.secondaryLabel.text = @"Planned";          
        cell.myImageView.image = [UIImage imageNamed:@"restkfc.png"];
        break;
    case 4:
        cell.primaryLabel.text = @"Appointment with Joey";
        cell.secondaryLabel.text = @"2 Hours";
        cell.myImageView.image = [UIImage imageNamed:@"restmcdonalds.png"];
        break;
    default:
        break;
}
return cell;
 }

/*
  // Override to allow orientations other than the default portrait orientation.
  - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
  // Return YES for supported orientations
  return (interfaceOrientation == UIInterfaceOrientationPortrait);
  }
  */

 - (void)didReceiveMemoryWarning {
// Releases the view if it doesn't have a superview.
[super didReceiveMemoryWarning];

// Release any cached data, images, etc that aren't in use.
 }

  - (void)viewDidUnload {
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
 }

 - (void)dealloc {
 [super dealloc];
 }

@end 
```

头文件如下：

```
 #import <UIKit/UIKit.h>

 @interface RestListViewController : UITableViewController {
NSMutableArray      *   myStrings;
 }
 @property(nonatomic, retain)NSMutableArray * myStrings;

 @end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T23:49:08.697

您需要添加代表要在 Tableview 中显示的行数的委托的方法

```
//.m
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return 10; // numbers of rows
} 
```

# php - Apache：可以在 webroot 之外定义一个脚本作为起始页吗？

> ID：10059251
> 
> 赞同：1
> 
> 时间：2012-04-07T23:36:26.057
> 
> 标签：php, apache, virtualhost, httpd.conf

在 httpd.conf 我定义了一个这样的虚拟主机：

```
<VirtualHost *:80>
  ServerName myproject
  DocumentRoot "C:/xampp/htdocs/MyProject/www"
</VirtualHost> 
```

现在我想要一个文件夹*外*的脚本`www`作为这个网站的起点。

我想首先运行的脚本是 : `C:/xampp/htdocs/MyProject/build.php`，然后它开始做一些工作（复制东西、生成缓存等），然后重定向到`index.php`文件`www`夹中（`header("location: ...")`在 PHP 中使用 a ）。

这可能吗？

***更新***

这有效（放入VirtualHost）：

```
Alias /index.php "C:/xampp/htdocs/MyProject/build.php" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T23:39:11.830

是的，一点没错。

您可以将根目录放在您想要的任何位置 - “DocumentRoot”不需要*位于*www 下。

您可以将任何其他目录放在您想要的任何不同的物理位置 - 只需使用`<Alias>`指令：

[http://www.thewebhostinghero.com/tutorials/apache-alias.html](http://www.thewebhostinghero.com/tutorials/apache-alias.html)

# ruby - 将 RMagick 与 Ocra 捆绑在一起

> ID：10059254
> 
> 赞同：4
> 
> 时间：2012-04-07T23:37:07.960
> 
> 标签：ruby, ocra

我正在尝试使用 Ocra 创建 Ruby 脚本的可移植版本。该脚本取决于`rmagick`还需要安装 ImageMagick。

生成的可执行文件可以在我的计算机上运行，​​但在其他所有计算机上都会失败，除非最终用户手动安装 ImageMagick。我想创建一个完全可移植的 EXE 文件，它可以在任何 Windows 系统上运行，并且不需要最终用户手动安装 ImageMagick。

有没有办法强制 Ocra 也将 ImageMagick DLL 文件捆绑到 EXE 中？如果没有，您如何创建需要的可移植 Ruby 脚本`rmagick`？

我根本不精通Ruby，因此将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T02:38:48.963

从“ocra --help”输出：

包装选项：

--dll dllname 包括来自 Ruby bindir 的其他 DLL。

换句话说，将 dll 复制到 ruby​​ bindir 并执行： ocra -dll imagemagick.xxxdll myscript.rb

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T11:00:50.707

您可以打包外部 DLL，只需将它们附加到 ocra 命令的末尾，例如

```
ocra myscript.rb rmagick.dll 
```

# ios - iOS 5.0 GLKit GLKTextureLoader- glBindTexture 发生在哪里？

> ID：10059257
> 
> 赞同：5
> 
> 时间：2012-04-07T23:38:14.637
> 
> 标签：ios, ios5, opengl-es, opengl-es-2.0

只是有一个关于 iOS 5.0 框架中的 GLKit 的快速问题。

如果您使用 GLKTextureLoader，它是否只是在当前活动的纹理单元中加载纹理？我查看了示例，但我没有看到您必须说变量 x 中的 GLKTextureInfo 绑定到 GL_TEXTURE0。

我见过人们将 glActiveTexture 与 GLKTextureLoader 结合使用的示例，但看起来纹理只是自动锁定到活动纹理单元中。一旦我加载它，我只需要传递纹理坐标？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T01:57:00.103

在 GLKTextureLoader 加载您的 GLKTextureInfo 对象后，您就可以自己绑定纹理了。因此，当 GLKLTextureLoader 完成加载时，您加载的纹理不会绑定到任何纹理单元。当你准备好画画时，你打电话：

```
glActiveTexture(GL_TEXTURE0); // to specify texture unit 0
glBindTexture(textureInfo.target, textureInfo.name); 
```

我强烈推荐《[Learning OpenGL ES for iOS: A Hands-On Guide to Modern 3D Graphics Programming》](http://my.safaribooksonline.com/book/animation-and-3d/9780132478939)一书，因为它很好地展示了 GLKit 类中发生的事情。您还可以参考我编写的使用 GLKTextureLoader 的演示代码：[https ://github.com/joekim/MobileMeetup/tree/master/GLKitDemo](https://github.com/joekim/MobileMeetup/tree/master/GLKitDemo)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-08T09:48:14.193

是的，有一些自动发生的事情。加载第二个纹理后，该纹理将绑定到 GL_TEXTURE0 但如果您希望它在 GL_TEXTURE1 中：

```
glActiveTexture(GL_TEXTURE1);
glBindTexture(someTexture.target, someTexture.name);
glUniform1i(u_someSampler, 1); // u_someSampler retrieved from prev call to glGetUniformLocation 
```

# java - 如何使用 GAE/J 将所有数据存储 Blob 移动到 Blobstore？

> ID：10059261
> 
> 赞同：0
> 
> 时间：2012-04-07T23:38:57.087
> 
> 标签：java, google-app-engine, google-cloud-datastore, blobstore

我使用 Google Appengine Datastore Blob 来存储图像，但我想改用 Blobstore。我需要将所有现有的 blob 移动到 Blobstore。使用 GAE for Java 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T07:41:33.937

AFAIK没有自动的方法。

您将需要：

1.  查询所有现有实体（如果有很多，则使用[游标），](https://developers.google.com/appengine/docs/java/datastore/queries#Query_Cursors)
2.  [将 blob 数据写入](https://developers.google.com/appengine/docs/java/blobstore/overview#Writing_Files_to_the_Blobstore)Blobstore
3.  更新实体：删除现有的 blob 属性并添加带有 blobkey 的新属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T16:02:54.863

正如尼克约翰逊建议的那样，我使用 MapReduce 解决了这个问题：

检查项目：

[http://code.google.com/p/appengine-mapreduce/](http://code.google.com/p/appengine-mapreduce/)

Ikai Lan 的精彩教程：

[http://ikaisays.com/2010/07/09/using-the-java-mapper-framework-for-app-engine/](http://ikaisays.com/2010/07/09/using-the-java-mapper-framework-for-app-engine/)

这就是 map 方法的样子：

```
@Override
public void map(Key key, Entity value, Context context) {
    log.info("Mapping key: " + key);

    try {

        Entity picture = value;

        if (!picture.hasProperty("blobKey") || picture.getProperty("blobKey") == null) {
            String fileName = (String) picture.getProperty("fileName");
            String contentType = (String) picture.getProperty("contentType");       
            Blob image = (Blob) picture.getProperty("image");       

            if (contentType != null && image != null) {

                AppEngineFile file = fileService.createNewBlobFile(contentType,fileName);         
                FileWriteChannel writeChannel = fileService.openWriteChannel(file, true);         
                writeChannel.write(ByteBuffer.wrap(image.getBytes()));
                writeChannel.closeFinally();

                BlobKey blobKey = fileService.getBlobKey(file);     

                picture.setProperty("blobKey",blobKey);
                datastore.put(picture);
            }
            else {
                log.log(Level.SEVERE, "Mapping key: " + key + "failed - null contentType or image.");
            }

        }
    } catch (Exception e) {
        log.log(Level.SEVERE, "Mapping key: " + key, e);

    }

} 
```

# wpf - 异步延迟加载任务

> ID：10059264
> 
> 赞同：2
> 
> 时间：2012-04-07T23:39:11.737
> 
> 标签：wpf, properties, lazy-loading, task

我正在对可能很慢的属性使用数据绑定。但是，我不想冻结 UI。相反，我想使用新的任务库。

理想情况下，我的财产应该是这样的：

```
public string MyProperty
{
   get
   {
      if (_cache != null)
         return _cache;
      var result = await SomeSlowFunction();
      return result;
   }
} 
```

但是，这现在确实有效，因为属性永远不会异步。

有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T23:58:31.663

我假设您已经实施了`INotifyPropertyChanged`. 那么也许这样的事情可以完成这项工作：

```
private string _myProperty;
public string MyProperty
{
   get
   {
      if (_myProperty != null)
         return _myProperty;
      MyProperty = Application.Current.Dispatcher.BeginInvoke((Action)(() => SomeSlowFunction()));
      return string.Empty;
   }
   set
   {
      if (_myProperty == value) return;
      _myProperty = value;
      RaiseNotifyPropertyChanged("MyProperty");
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T00:06:31.457

我所做的是检查 realResult，如果它为 null，则返回“工作”，然后调用 BackGroundWorker。在来自 BackGround 的回调中分配 realResult 并调用 NotifyPropertyChanged。async on property 没有什么价值。我喜欢 BackGroundWorker 的结构以及取消和报告进度的能力。

```
 private System.ComponentModel.BackgroundWorker backgroundWorker1;
    private string textBackGround;

    public event PropertyChangedEventHandler PropertyChanged;
    protected void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }

    public MainWindow()
    {
        backgroundWorker1 = new BackgroundWorker();
        backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
        backgroundWorker1.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backgroundWorker1_RunWorkerCompleted);

        InitializeComponent();
    }

    public string TextBackGround
    {
        get
        {
            if (!string.IsNullOrEmpty(textBackGround)) return textBackGround;
            backgroundWorker1.RunWorkerAsync();
            return "working";             
        }
    }

    // This event handler is where the actual,
    // potentially time-consuming work is done.
    private void backgroundWorker1_DoWork(object sender,
        DoWorkEventArgs e)
    {
        // Get the BackgroundWorker that raised this event.
        BackgroundWorker worker = sender as BackgroundWorker;

        // Assign the result of the computation
        // to the Result property of the DoWorkEventArgs
        // object. This is will be available to the 
        // RunWorkerCompleted eventhandler.
        e.Result = ComputeFibonacci(worker, e);
    }

    // This event handler deals with the results of the
    // background operation.
    private void backgroundWorker1_RunWorkerCompleted(
        object sender, RunWorkerCompletedEventArgs e)
    {
        // First, handle the case where an exception was thrown.
        if (e.Error != null)
        {
            MessageBox.Show(e.Error.Message);
        }
        else if (e.Cancelled)
        {
            // Next, handle the case where the user canceled 
            // the operation.
            // Note that due to a race condition in 
            // the DoWork event handler, the Cancelled
            // flag may not have been set, even though
            // CancelAsync was called.
            textBackGround = "Cancelled";
            NotifyPropertyChanged("TextBackGround");
        }
        else
        {
            // Finally, handle the case where the operation 
            // succeeded.
            textBackGround = e.Result.ToString();
            NotifyPropertyChanged("TextBackGround");
        }
    }

    // This is the method that does the actual work. For this
    // example, it computes a Fibonacci number and
    // reports progress as it does its work.
    string ComputeFibonacci(BackgroundWorker worker, DoWorkEventArgs e)
    {

        // Abort the operation if the user has canceled.
        // Note that a call to CancelAsync may have set 
        // CancellationPending to true just after the
        // last invocation of this method exits, so this 
        // code will not have the opportunity to set the 
        // DoWorkEventArgs.Cancel flag to true. This means
        // that RunWorkerCompletedEventArgs.Cancelled will
        // not be set to true in your RunWorkerCompleted
        // event handler. This is a race condition.

        if (worker.CancellationPending)
        {
            e.Cancel = true;
            return "cancelled";
        }
        Thread.Sleep(1000);
        if (worker.CancellationPending)
        {
            e.Cancel = true;
            return "cancelled"; 
        }
        return "complete";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T00:26:39.200

Blam 的想法是正确的：您确实需要某种“进行中”的返回值，因为 UI 数据绑定立即需要一个值。但是，您不需要`BackgroundWorker`.

如果您使用`null`“进行中”值，那么您可以执行以下操作：

```
// If _cache is not null, then we already have a calculated property value.
private string _cache;

// If _cacheTask is not null, then the property is being calculated.
private Task<string> _cacheTask;

public string MyProperty
{
  get
  {
    if (_cache != null)
      return _cache;
    if (_cacheTask != null)
      return null; // (in progress)
    StartSomeSlowFunction();
    // Note: _cacheTask is not null at this point.
    return null; // (in progress)
  }

  set
  {
    if (value == _cache)
      return;
    _cache = value;
    var propertyChanged = PropertyChanged;
    if (propertyChanged != null)
      propertyChanged(new PropertyChangedEventArgs("MyProperty"));
  }
}

private async Task StartSomeSlowFunction()
{
  // Immediately start SomeSlowFunction and set _cacheTask.
  _cacheTask = SomeSlowFunction();

  // Asynchronously wait for SomeSlowFunction to complete,
  //  and set the property with the result.
  MyProperty = await _cacheTask;

  // Let the task be GCed; this also allows the property to be
  //  recalculated if it is set to null first.
  _cacheTask = null;
}

private async Task<string> SomeSlowFunction(); 
```

# python - 仅限 Python 管理员的装饰器

> ID：10059271
> 
> 赞同：0
> 
> 时间：2012-04-07T23:40:39.380
> 
> 标签：python, google-app-engine

好吧，这就是我所拥有的：

我正在玩 scotch 的 authengine，但不知道如何制作管理员装饰器。继承人的代码相当简单：

```
class Jinja2Handler(webapp2.RequestHandler):
"""
    BaseHandler for all requests all other handlers will
    extend this handler

"""
@webapp2.cached_property
def jinja2(self):
    return jinja2.get_jinja2(app=self.app)

def get_messages(self, key='_messages'):
    try:
        return self.request.session.data.pop(key)
    except KeyError:
        return None

def render_template(self, template_name, template_values={}):
    messages = self.get_messages()
    if messages:
        template_values.update({'messages': messages})
    self.response.write(self.jinja2.render_template(
        template_name, **template_values))

def render_string(self, template_string, template_values={}):
    self.response.write(self.jinja2.environment.from_string(
        template_string).render(**template_values))

def json_response(self, json):
    self.response.headers.add_header('content-type', 'application/json', charset='utf-     8')
    self.response.out.write(json)

def UserArea(fuct):

    def Usercheck():
        return Usercheck

class PageHandler(Jinja2Handler):

def root(self):
    session = self.request.session if self.request.session else None
    user = self.request.user if self.request.user else None
    profiles = None
    emails = None
    if user:
        profile_keys = [ndb.Key('UserProfile', p) for p in user.auth_ids]
        profiles = ndb.get_multi(profile_keys)
        emails = models.UserEmail.get_by_user(user.key.id())
    self.render_template('home.html', {
        'user': user,
        'session': session,
        'profiles': profiles,
        'emails': emails,
    })

@UserArea
class UserHandler(Jinja2Handler):

def get(self):
    self.render_template('index-2.html', {

    }) 
```

跳过缩进错误......我似乎无法弄清楚......我读过这个 [如何制作函数装饰器链？](https://stackoverflow.com/questions/739654/understanding-python-decorators) 以为我对此有基本的了解....但没有

任何帮助指出我正确的方式......

我经常遇到的错误是 TypeError: 'NoneType' object is not callable

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T01:38:32.870

```
def UserArea(fuct):

    def Usercheck():
        return Usercheck 
```

您将它用作装饰器，但它不返回任何内容，因此它返回`None`. 因此，当您尝试实例化装饰类时，您正在调用`None()`并且显然这不起作用。此外，包装函数仅返回自身，这很少是您想要的。

很难说你真正想要装饰器做什么，但通常装饰器是这样写的：

```
import functools

def UserArea(func):

    @functools.wraps(func)
    def usercheck(*args, **kwargs):
        if adminuser:   # however this gets defined
           return func(*args, **kwargs)
        else:
           raise Exception("not authorized")

    return usercheck 
```

请注意，将用作被装饰对象的包装器的内部函数*调用*被装饰对象并返回其结果，从而允许将其用作客户端代码中被装饰对象的直接替代品。如果你的包装函数不这样做，你的装饰器就坏了。

作为进一步说明，我看到您将其用作类装饰器，这意味着将在实例化类时调用它。使用返回函数的类装饰器将使类的子类化变得困难，因为实际的类不再具有公共名称。那么，装饰类的部分或全部方法而不是类本身可能更有意义。

# ios - Apple Developer 注册的最佳实践

> ID：10059274
> 
> 赞同：6
> 
> 时间：2012-04-07T23:42:03.503
> 
> 标签：ios, xcode

我需要创建一个配置文件来测试我的 iOS 设备上的构建，为此我需要创建一个 Apple 开发者帐户并支付他们的费用。

最终我计划以特定名称发布应用程序，我认为这个名称可能与 Apple 开发者帐户名称相关联。困境是我被迫使用个人电子邮件进行测试，并使用与业务实体相关的专业电子邮件进行发布，我不知道现在该做什么注册，因为我不想让自己受制于两次年费。

作为个人开发人员，是否有此类事情的最佳实践？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T08:01:22.203

很抱歉，如果您创建了两个帐户并想使用一个用于测试和一个用于发布，您将需要支付 2 年的费用，并且几乎没有解决这个问题的空间。现在，就您的选择而言，您可以选择几种方式之一。

1.  创建两个开发者帐户，每年支付 200 美元。
2.  考虑使用一个帐户进行测试和发布。我不知道你对这样做有什么顾虑，但这样做是完全可以接受的。
3.  您现在使用您的个人帐户测试您的应用程序，假设您甚至使用此帐户来发布您的应用程序。在任何时候，Apple 都有一个法人实体变更流程（我已经经历过，实际上并没有那么糟糕），可以将您的帐户从个人帐户迁移到公司帐户。

此外，如果您担心在您的企业帐户上部署您在个人帐户上创建的应用程序时会出现任何问题，则不会有任何问题。您将不得不制作新的开发人员证书、应用程序 ID 和配置文件，但仅此而已。值得庆幸的是，这个过程比以前更加精简。

旁注，如果你觉得它是相关的。显示为应用程序卖家的名称将在该过程的稍后部分定义。您可以使用您的专业电子邮件注册，并在稍后在 iTunes Connect 中填写您的税务文件时选择您的法人实体名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T00:18:24.290

您不必使用个人电子邮件进行测试，而是选择延迟准备您的专业电子邮件地址。

如果您真的想延迟注册您的专业电子邮件，那么一种选择是只使用模拟器，它非常好 - 尽管并不完美。

如果你的应用成功了，额外的开发者订阅费看起来就像小土豆一样。

总的来说，这是一个小限制，您只需要决定什么对您来说更重要：在真实设备上进行开发、节省额外的开发人员订阅，或者比您计划的更早地选择您的专业电子邮件地址。

# javascript - jQuery：加载 AJAX 内容后如何可靠地触发插件？

> ID：10059277
> 
> 赞同：-1
> 
> 时间：2012-04-07T23:42:43.827
> 
> 标签：javascript, jquery

我正在尝试使用名为[Slides](http://slidesjs.com/)的幻灯片插件在通过 jQuery AJAX 请求加载元素后在元素中加载幻灯片。经过多次争论，插件触发了，但查看检查器，看起来插件正在为幻灯片中的每个图像触发，因为插件生成了太多的导航元素。

```
$('a').click(function(){    
    var location = $(this).find('a').attr("href");
    $(this).find('a').removeAttr('href');           
    $("section").animate({height: 0, opacity: 0}, 500, "swing", function (){
        $(this).css('height','auto').load(location + " .container", function(){
            $('section').find('img').load(function(){
                $('#slides').slides();
                var newHeight = $('section').height();
                $('section').animate({height: newHeight, opacity: 1}, 500, "swing");
            })
        })              
    })
}) 
```

我意识到 SE 不支持 Slides.js，但我感觉在这种情况下我没有正确使用 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T00:35:37.583

这对于评论来说太长了，但我并不认为这是一个正确的答案：

您正在寻找所有带有 的锚标签，`$('a')`然后在它们内部查找带有 的其他锚标签`.find('a')`，然后删除它们的 href 值。我不明白这意味着什么。开始“设置”阶段所做的所有事情都是这样的：

```
<a href="/something">Click me</a> <!-- this is the one listening for the click -->
  <a href="/somethingElse">A link</a>
</a> 
```

并将其变成这样：

```
<a href="/something">Click me</a>
  <a>A link</a>
</a> 
```

没有 href 的锚标签无效，但大多数浏览器应该原谅你。但我就是不明白为什么要这样做？为什么用包装锚而不是内部锚来听？为什么有一个锚点包裹着一个锚点？

当然，查看标记会很有用。

# objective-c - 在 NSMutableArray 中观察计数

> ID：10059279
> 
> 赞同：7
> 
> 时间：2012-04-07T23:43:01.563
> 
> 标签：objective-c, ios, nsarray

我想在计数时收到通知，即。NSArray 中的项目数发生了变化。当然，如果我控制在数组中添加和删除对象，我就不需要这个。但我不是，它在业务流程模型方面发生不可预测，并且取决于外部因素。有一些简单优雅的解决方案吗？

编辑：我当然将其更正为 NSMutableArray ..

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-07T23:53:02.297

您需要使用[KVC](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html)。但是如何去做呢？毕竟，NSMutableArray 不符合 Key-Value-Coding 的变异方法或内容更改。答案是代理——因为子类化 NS[Mutable]Array 太麻烦了。

NSProxy 是一个很棒的小类，您可以使用它来拦截发送到数组的消息，就像您是 NSMutableArray 一样，然后将它们转发到某个内部实例。不幸的是，它也不符合 KVC，因为 KVC 的核心存在于 NSObject 中。那么，我们将不得不使用它。示例界面可能如下所示：

```
@interface CFIKVCMutableArrayProxy : NSObject  {
    NSMutableArray *_innerArray;
}

- (NSUInteger)count;

- (void)insertObject:(id)anObject atIndex:(NSUInteger)index;
- (void)removeObjectAtIndex:(NSUInteger)index;
- (void)addObject:(id)anObject;
- (void)removeLastObject;
- (void)insertObjects:(NSArray *)objects atIndexes:(NSIndexSet *)indexes;
- (void)replaceObjectAtIndex:(NSUInteger)index withObject:(id)anObject;

//…

@end 
```

如您所见，我们正在模拟 的接口`NSMutableArray`，这是必要的，因为我们的代理应该像实现`NSMutableArray`. 这也使实现尽可能简单，因为我们可以将选择器转发到我们的内部`NSMutableArray`指针。为简洁起见，我将仅实现两种方法来向您展示总体轮廓是什么样的：

```
@implementation CFIKVCMutableArrayProxy

//…

- (NSUInteger)count {
    return _innerArray.count;
}

- (void)addObject:(id)anObject {
    [self willChangeValueForKey:@"count"];
    [_innerArray addObject:anObject];
    [self didChangeValueForKey:@"count"];
}

- (void)removeLastObject {
    [self willChangeValueForKey:@"count"];
    [_innerArray removeLastObject];
    [self didChangeValueForKey:@"count"];
}

@end 
```

如果您没有机会像这样包装数组，请尝试重新考虑您的代码。如果外部依赖迫使您陷入这种困境，请尝试将其删除。围绕自己的工具工作总是一件坏事。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-21T16:24:07.673

要观察 mutableArray 的变化，需要使用由下式给出的可变代理对象

```
 - (NSMutableArray *)mutableArrayValueForKey:(NSString *)key 
```

这是 KVO 兼容的，即代理对象的任何更改都会发送将/确实更改通知。

下面的演示类展示了完整的实现

```
@interface DemoClass : NSObject

@property (nonatomic) NSMutableArray *items;

- (void)addItemsObserver:(id)object;
- (void)removeItemsObserver:(id)object;

@end

@implementation DemoClass

- (NSMutableArray *)items;
{
    return [self mutableArrayValueForKey:@"_items"];
}

- (void)addItemsObserver:(id)object
{
    [self addObserver:object forKeyPath:@"_items.@count" options:NSKeyValueObservingOptionOld|NSKeyValueObservingOptionNew context:nil];
}

- (void)removeItemsObserver:(id)object
{
    [self removeObserver:object forKeyPath:@"_items.@count" context:nil];
}
@end

@interface ObservingClass : NSObject

@property (nonatomic) DemoClass *demoObject;

@end

@implementation ObservingClass

- (instanstype)init
{
     if (self = [super init]) {
         _demoObject = [DemoClass new];

         [_demoObject addItemsObserver:self];
     }
     return self;
}

- (void)observeValueForKeyPath:(NSString *)keyPath
                  ofObject:(id)object
                    change:(NSDictionary *)change
                   context:(void *)context
{
     NSLog(@"is called on demoObject.items.count change");
}

- (void)dealloc
{
    [_demoObject removeItemsObserver:self];
}

@end 
```

现在，每次您在控制台中添加或删除对象时，`items`您都会看到新的登录控制台（`observeValueForKeyPath`被调用）。

自动合成的 ivar`_items`数组的任何直接更改都将无效。

另请注意，您强烈需要设置观察者`_items.@count`（观察`items.@count`是毫无意义的）。

请注意，您不需要 init`_items`或`self.items`. `items`当您调用getter时，它将在幕后完成。

每次更改“数组”`items`时，您都会获得`_items`具有新地址的新对象。但我仍然可以通过`items`代理吸气剂找到它。

# rest - 设计一个 REST 资源来管理一个列表

> ID：10059283
> 
> 赞同：4
> 
> 时间：2012-04-07T23:44:24.650
> 
> 标签：rest

假设我想设计一个用于管理列表的 REST 存储。列表条目看起来像这样：

```
<listentry>
    <position>0</position>                <!-- position in the list -->
    <data>interesting information</data>  <!-- entry data -->
</listentry> 
```

我会这样设计资源：

```
GET    /list/           // returns all list entries
GET    /list/{position} // returns the list entry at {position}
DELETE /list/{position} // delete list entry at {position}

PUT    /list/first      // update first list entry
PUT    /list/last       // update last list entry
PUT    /list/{position} // update entry at {position}

POST   /list/last       // inserts a new list entry at last position
POST   /list/first      // inserts a new list entry at first position

POST   /list/{position} // inserts a new list entry at {position} and moves all 
                        // entries down  the list starting from the entry that
                        // was at {position} before the insertion. 
```

这是合法的 REST 资源吗？如果没有，有没有办法设计一个休息资源，以便它可以管理一个列表？

**编辑**

感谢您的投入，它确实有帮助。我同意 nategood 和 darrel 的观点，即使用 first 和 last 作为特殊标识符是完全合法的（另请参阅我的[问题](https://stackoverflow.com/questions/9380833/is-creating-rest-subresources-to-get-the-last-or-first-element-of-a-list-bad-pra "邮政")）。当然，我可以不使用 Saintedlama 建议的那些神奇标识符，但这会剥夺我在我现在想向您展示的帖子请求中使用它们的可能性。

在再次考虑设计时，我想在我的资源设计建议中添加两个额外的功能。

```
POST   /list/{position1}/swap/{position2}   // swap the position of two elements
POST   /list/{position1}/move/{position2}   // move the element at {position1} to
                                            // {position2} and move all entries 
                                            // down the list starting from the 
                                            // entry that was at {position2}

//possible uses
POST   /list/first/swap/last                // swap first with last element
POST   /list/42/swap/2                      // swap element 42 with element 2
POST   /list/first/move/42                  // move first element to position 42
// you get the idea ... 
```

你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T07:31:30.827

您的资源设计完全符合我对 REST 的理解。您可以通过引入一个简单的规则来取消第一个和最后一个魔术索引功能来改进您的设计*：*如果*没有*提供位置，则更新最后一项或将该项插入到最后一个位置。如果你引入这条规则，你就不再需要 first and last 了。First 只是一个表示索引 0 的魔术字符串，last 由于上述规则已过时。

正如@miku 所说，您的物品可能是它们自己的资源。如果您计划一个更通用的资源列表设计，您需要在一个列表中管理不同的资源类型（例如，列表可以管理任务、会议、约会），则列表项可以再次引用（使用资源 url）到项目资源。使用这种引用方法，您可以将列表保存功能与列表项表示完全分离。

**编辑：**

这个问题正在得到一个移动的目标:)

您可以将所有与位置相关的操作建模为资源，并将操作建模为您创建的子资源，如下所示：

```
POST   /list/positions/swap/0/2   // swap the position of two elements
POST   /list/positions/move/1/0   // move the element at 1 to 0 
```

如果操作成功与否，此位置资源可以返回（HTTP）状态，“操作”资源的句柄（通过位置标头），您可以在其中检查操作的状态，以防您想要移动、交换异步、返回为您提供所有列表位置操作的某种日志的资源。

将头寸建模为资源的想法是从[RESTful Web Services](http://shop.oreilly.com/product/9780596529260.do)一书中窃取的，其中作者将两个银行账户之间的转账交易建模为资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T23:54:46.997

只是一些想法：

*   像 .../first 或 .../last 这样的 URL 有点 rpc-ish
*   一个列表**项**似乎是它自己的资源，所以它最终应该被当作一个资源来处理，例如：

    ```
    GET /list/3/item/2 
    ```

*   [REST 并不容易](http://ivanzuzak.info/2010/04/03/why-understanding-rest-is-hard-and-what-we-should-do-about-it-systematization-models-and-terminology-for-rest.html)，需要花费时间来了解[嵌套资源](https://stackoverflow.com/questions/7104578/rest-complex-composite-nested-resources)等。

# backbone.js - 针对单击的元素构建和渲染主干视图

> ID：10059284
> 
> 赞同：0
> 
> 时间：2012-04-07T23:44:46.310
> 
> 标签：backbone.js, coffeescript

嗨，我遇到了骨干 js 的问题

我有评论视图

```
class window.CommentView extends Backbone.View
  el: $('.comment')
  initialize: ->
    @$el.show()
  events:
    "click": "renderCommentBoxView"

  renderCommentBoxView: ->
    @commentBoxView = new CommentBoxView
      id: this.$('.comment')['context']['activeElement']['id']
      model: new Item
      el: @el 
```

和评论框视图

```
 class window.CommentBoxView extends Backbone.View
   el: $('.commentBoxMain')

   events:
     "click.comment": "showCommentBox"
     "click document": "stopEvent"
     "click .login_button": "submitComment"
   initialize: ->
     @showCommentBox()

   stopEvent: (event) ->
     event.stopPropagation()

  showCommentBox: ->
     $(@el).append('<textarea class=\'commentBox\'></textarea><br/><input type=\'button\' class=\'login_button\' name=\'Add a comment\' value=\'Add a comment\'><span class=\'loading\' style=\'display: none;\'>Loading...</span>') 
```

现在，用户可以评论多个项目。因此，每当单击评论按钮时，我都会呈现一个名为 CommentBoxView 的新视图，用于定义元素和模型

问题是我无法获取视图应绑定到的当前单击元素。

我的示例 HTML 如下所示：

```
 <div id="item_1">
     <a class="comment" href='javascript:void(0)'>Comment</a>
     <div class="commentMainBox"></div>
   </div>
  <div id="item_2">
    <a class="comment" href='javascript:void(0)'>Comment</a>
    <div class="commentMainBox"></div>
  </div> 
```

每当单击评论链接时，我都会构建html并转储到commentMainBox中。但问题是单击的元素始终是我页面上带有类注释的第一个元素。如何获取当前单击的元素，以便在正确的 div 中呈现内容。

CommentBoxView 的元素也应该是`el: $('.commentBoxMain')`，但是如果我分配它，那么我不会在视图中呈现任何内容，但是当我初始化为 时`el: $('.comment')`，我会看到评论框，但是无论单击哪个评论，它总是在第一个评论下呈现。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T00:29:55.243

您不应该`@el`从它实例化的`CommentView`to传递；在课堂上`CommentBoxView`声明也不起作用。正如 Backbone.js 文档所说：`el: $('.commentBoxMain')``CommentBoxView`

> 如果您想创建一个引用 DOM 中已有元素的视图，请将元素作为选项传入：`new View({el: existingElement})`

否则，`View`尝试创建一个新元素。所以你想做的是：

```
@commentBoxView = new CommentBoxView
  model: new Item
  el: @$('.commentMainBox') 
```

这将找到`commentMainBox`位于 Comment 视图中的元素（因为`@$`在其元素范围内）并将其作为`CommentBoxView`' 元素提供。

# git - git 存储库。无法找到。错误

> ID：10059287
> 
> 赞同：1
> 
> 时间：2012-04-07T23:45:05.763
> 
> 标签：git

几分钟前，我提交了一些文件，然后将它们推送到我的 github.com 存储库。

然后，我跑了

```
git pull origin 
```

在生产环境中，我收到以下错误：

```
error: unable to find 2fcd18343b3817d1ed79a72c0c878811ad27e834
fatal: object 2fcd18343b3817d1ed79a72c0c878811ad27e834 not found 
```

我能做些什么来解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T23:48:45.763

可能是您需要指定要从中提取的分支。例如：

```
git pull origin master 
```

还拉起一个 git log 并查看该 id 是否出现。

此外，请检查以确保您没有更改您所在的目录（即确保您位于您提交的同一文件夹中）。

# php - 动态加载的 php，.load()，不能在页面上使用 jquery

> ID：10059289
> 
> 赞同：0
> 
> 时间：2012-04-07T23:45:40.123
> 
> 标签：php, jquery

这是我的jQuery：

```
$(function(){
    $('.messagediv').on('mouseover', function() {
    $(this).find('.deletelistenchatcontainer').css({'display':'block'});
    $(this).find('.hidefordeletelistenchat').css({'display':'none'});
    }).on('mouseout', function(){
    $(this).find('.deletelistenchatcontainer').css('display', 'none');
    $(this).find('.hidefordeletelistenchat').css({'display':'block'});
    }); 
    }); 
```

这是我的php：

```
$id2 = mysql_real_escape_string($id2);
                $getdata8 = mysql_query("SELECT * FROM musicbook WHERE identify='$identify' ORDER BY id DESC LIMIT 20");
                $numrowsgetdata = mysql_num_rows($getdata8);
                if ((mysql_num_rows($getdata8))<1)
                {
                echo "<i>Be the first to say something?</i><p/>"; 
                }
                while ($row8 = mysql_fetch_assoc($getdata8))
                {
                $id8 = $row8['id'];
                $name8 = $row8['name'];
                $message8 = $row8['message'];
                $message10 = nl2br($message8);
                $date8 = $row8['date'];
                if ($name8==$username)
                {
                echo "
                <section class='hover'>
                <div class='messagediv' style='background:#1A1A1A;'><div style='padding:5px;'>$message10<br/>
                <div style='margin-top:4px; font-size:.8em; float:left;'><div class='hidefordeletelistenchat' style='float:left;'><a href='http://www.pearlsquirrel.com/$name8' style='color:white;'>$name8</a><font style='color:#D6D6D6'> on $date8</font></div>
                <div class='deletelistenchatcontainer' style='float:left;color:#FFF;display:none;z-index:10;background:#1a1a1a'><input type='hidden' id='wpm2' value='$id8'><img src='cross.png' style='float:left;' alt='PearlSquirrel'/><span class='hoverdeletetext' onclick='LinkOnClick4($id8);'>Delete</span></div></div></div></div>
                </section>
                ";
                }
                else
                {
                echo "
                <div class='messagediv'><div style='padding:5px;'>$message10<br/>
                <div style='margin-top:4px; font-size:.8em; float:left;'><div style='float:left;'><a href='http://www.pearlsquirrel.com/$name8' style='color:white;'>$name8</a><font style='color:#D6D6D6'> on $date8</font></div>
                </div></div></div>";
                }
                }
                if($numrowsgetdata >= 20)
                {
                echo "<div id='loadingcomments'><img src='loading.gif' style='height:30px; width:30px;'></div>";
                } 
```

上面的代码可以正常工作。然而，这是一个用户评论系统。用户删除评论后，我重新加载了具有相同上述 php 函数的 div，但是当我这样做时，我上面的 jquery 不再适用于动态生成的内容。我知道这是使用我正在使用的 .load() 属性加载的内容的问题，但是有人知道如何使其正常工作吗？我是否必须使用 .live() 属性或其他东西？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T23:51:00.737

使用 .get() 代替。它会起作用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T00:01:36.367

我解决了。.live() 是我需要的。

# mysql - Globalize3：运行“rake db:seed”任务时出现“Mysql2::Error: Unknown database”

> ID：10059290
> 
> 赞同：0
> 
> 时间：2012-04-07T23:45:55.093
> 
> 标签：mysql, ruby-on-rails, ruby, internationalization, globalize3

我正在使用 rails-3.2.2、i18n-0.6.0 和 globalize3-0.2.0 ruby​​-gems。我为我的一个[名为](http://railscasts.com/episodes/338-globalize3)`Article`. 但是，当我`rake db:seed`在终端窗口中运行任务时，出现以下错误：

```
$ rake db:seed
rake aborted!
Mysql2::Error: Unknown database 'article_translations': SHOW TABLES IN article_translations LIKE 'title' 
```

在我的`<ROOT_APP>/config/seed.rb`文件中，我有：

```
Article.find_or_create_by_title(
  :title => 'Title example',
  ...
) 
```

在我的`<ROOT_APP>/app/models/article.rb`文件中，我有：

```
class Article < ActiveRecord::Base
  translates :title, :fallbacks_for_empty_translations => true

  ...
end 
```

*我该如何解决这个错误？*

更多详情，请访问[https://github.com/svenfuchs/globalize3/pull/123](https://github.com/svenfuchs/globalize3/pull/123)。

* * *

*注意*：我认为问题与中`find_or_create_by_title`调用的方法有关`<ROOT_APP>/config/seed.rb`（实际上，如果我使用该`find`方法而不是`find_or_create_by_title`我没有得到上面解释的 rake 错误）。如果这是真的，*我可以做些什么来保持我的`seed.rb`文件清晰，因为我需要一些技巧*（例如，如下所示）*来解决问题？*

```
# The below code has the same effect as the 'find_or_create_by_title' method.
Article.create(:title, 'Title example updated!') unless Article.exists?(:title => 'Title example') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T00:29:55.220

您可能无法先运行 rake db:create / rake db:migrate

# c# - 如何在 C# 中计算 UDP 传输速率 (kbps)？

> ID：10059292
> 
> 赞同：-2
> 
> 时间：2012-04-07T23:46:05.943
> 
> 标签：c#, sockets, udp, transfer, rate

首先，我知道 UDP 不是一个可靠的协议，但我需要在 UDP 中这样做，而且我知道最终可能会发生的后果。

假设我有一个长`byte`数组，我已将 32 字节的块拆分为`List<byte[]>`. 这意味着发送的每个数据包长度为 32 字节。

这些数据包将`foreach`循环发送，我不在乎它们是否到达目的地。这意味着我不期待主机的确认（至少现在是这样）。

我的问题是，我将如何计算服务器在接收数据包时的当前传输速率（最好以 kbps 为单位）？

我对如何实现这样的计算有点困惑......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T00:28:20.470

如果您的问题是“我如何计算传输速率”，您可以将下载的字节总数除以经过的总秒数。

```
 bytes
 --------- = transfer rate
  seconds 
```

在 C# 中测量时间的一个好方法是[StopWatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)类，由于计算机科学中的 K 是 1024（或 2^10），您可以将字节数除以 1024（或将其移位），然后除以秒数下载该数量的千字节。

* * *

如果您对平均传输率感兴趣，则需要以间隔测量下载的字节数。您可以使用二维列表来执行此操作，其中包含测量点和下载的字节以及所花费的时间。为简单起见，将其分解为进行计算的类

```
private readonly Stopwatch watch;
private readonly long[,] average;

public .ctor() {
    // use 10 measure points, for a larger or smaller average, adjust the 10
    average = new long[10, 2];
    watch = Stopwatch.StartNew();
}

public long BytesTransferred {
    set {
        for (int i = average.GetLength(0) - 1; i > 0; --i) {
            average[i, 0] = average[i - 1, 0];
            average[i, 1] = average[i - 1, 1];
        }
        average[0, 0] = sent = value;
        average[0, 1] = watch.ElapsedMilliseconds;
    }
}

public long TransferRate {
    get {
        int l = average.GetLength(0) - 1;
        double bytes = average[0, 0] - average[l, 0];
        double seconds = (average[0, 1] - average[l, 1]) / 1000d;
        return (long)(bytes / seconds);
    }
} 
```

在您的下载方法中，中断一个新线程，创建上述类的一个实例，并`BytesTransferred = totalBytes;`在每个间隔中调用。每次调用 TransferRate 时都会计算 TransferRate。*请注意，它是 bytes/s*，如果您想要另一个单位，请相应地除以 1024。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T02:14:32.913

我们在fireBwall 上使用一个简单的系统，每次检查时都会更新传输速率。它还存储发送的全部信息。我刚刚从 FireBwall 的 Google 代码页面复制了这个。

```
/// <summary>
/// Class to manage an adapters total transfered data
/// </summary>
public class BandwidthCounter
{
    /// <summary>
    /// Class to manage an adapters current transfer rate
    /// </summary>
    class MiniCounter
    {
        public uint bytes = 0;
        public uint kbytes = 0;
        public uint mbytes = 0;
        public uint gbytes = 0;
        public uint tbytes = 0;
        public uint pbytes = 0;
        DateTime lastRead = DateTime.Now;

        /// <summary>
        /// Adds bits(total misnomer because bits per second looks a lot better than bytes per second)
        /// </summary>
        /// <param name="count">The number of bits to add</param>
        public void AddBytes(uint count)
        {
            bytes += count;
            while (bytes > 1024)
            {
                kbytes++;
                bytes -= 1024;
            }
            while (kbytes > 1024)
            {
                mbytes++;
                kbytes -= 1024;
            }
            while (mbytes > 1024)
            {
                gbytes++;
                mbytes -= 1024;
            }
            while (gbytes > 1024)
            {
                tbytes++;
                gbytes -= 1024;
            }
            while (tbytes > 1024)
            {
                pbytes++;
                tbytes -= 1024;
            }
        }

        /// <summary>
        /// Returns the bits per second since the last time this function was called
        /// </summary>
        /// <returns></returns>
        public override string ToString()
        {
            if (pbytes > 0)
            {
                double ret = (double)pbytes + ((double)((double)tbytes / 1024));
                ret = ret / (DateTime.Now - lastRead).TotalSeconds;
                lastRead = DateTime.Now;
                string s = ret.ToString();
                if (s.Length > 6)
                    s = s.Substring(0, 6);
                return s + " Pb";
            }
            else if (tbytes > 0)
            {
                double ret = (double)tbytes + ((double)((double)gbytes / 1024));
                ret = ret / (DateTime.Now - lastRead).TotalSeconds;
                lastRead = DateTime.Now;
                string s = ret.ToString();
                if (s.Length > 6)
                    s = s.Substring(0, 6);
                return s + " Tb";
            }
            else if (gbytes > 0)
            {
                double ret = (double)gbytes + ((double)((double)mbytes / 1024));
                ret = ret / (DateTime.Now - lastRead).TotalSeconds;
                lastRead = DateTime.Now;
                string s = ret.ToString();
                if (s.Length > 6)
                    s = s.Substring(0, 6);
                return s + " Gb";
            }
            else if (mbytes > 0)
            {
                double ret = (double)mbytes + ((double)((double)kbytes / 1024));
                ret = ret / (DateTime.Now - lastRead).TotalSeconds;
                lastRead = DateTime.Now;
                string s = ret.ToString();
                if (s.Length > 6)
                    s = s.Substring(0, 6);
                return s + " Mb";
            }
            else if (kbytes > 0)
            {
                double ret = (double)kbytes + ((double)((double)bytes / 1024));
                ret = ret / (DateTime.Now - lastRead).TotalSeconds;
                lastRead = DateTime.Now;
                string s = ret.ToString();
                if (s.Length > 6)
                    s = s.Substring(0, 6);
                return s + " Kb";
            }
            else
            {
                double ret = bytes;
                ret = ret / (DateTime.Now - lastRead).TotalSeconds;
                lastRead = DateTime.Now;
                string s = ret.ToString();
                if (s.Length > 6)
                    s = s.Substring(0, 6);
                return s + " b";
            }
        }
    }

    private uint bytes = 0;
    private uint kbytes = 0;
    private uint mbytes = 0;
    private uint gbytes = 0;
    private uint tbytes = 0;
    private uint pbytes = 0;
    MiniCounter perSecond = new MiniCounter();

    /// <summary>
    /// Empty constructor, because thats constructive
    /// </summary>
    public BandwidthCounter()
    {

    }

    /// <summary>
    /// Accesses the current transfer rate, returning the text
    /// </summary>
    /// <returns></returns>
    public string GetPerSecond()
    {
        string s = perSecond.ToString() + "/s";
        perSecond = new MiniCounter();
        return s;
    }

    /// <summary>
    /// Adds bytes to the total transfered
    /// </summary>
    /// <param name="count">Byte count</param>
    public void AddBytes(uint count)
    {
        // overflow max
        if ((count * 8) >= Int32.MaxValue)
            return;

        count = 8 * count;
        perSecond.AddBytes(count);
        bytes += count;
        while (bytes > 1024)
        {
            kbytes++;
            bytes -= 1024;
        }
        while (kbytes > 1024)
        {
            mbytes++;
            kbytes -= 1024;
        }
        while (mbytes > 1024)
        {
            gbytes++;
            mbytes -= 1024;
        }
        while (gbytes > 1024)
        {
            tbytes++;
            gbytes -= 1024;
        }
        while (tbytes > 1024)
        {
            pbytes++;
            tbytes -= 1024;
        }
    }

    /// <summary>
    /// Prints out a relevant string for the bits transfered
    /// </summary>
    /// <returns></returns>
    public override string ToString()
    {
        if (pbytes > 0)
        {
            double ret = (double)pbytes + ((double)((double)tbytes / 1024));
            string s = ret.ToString();
            if (s.Length > 6)
                s = s.Substring(0, 6);
            return s + " Pb";
        }
        else if (tbytes > 0)
        {
            double ret = (double)tbytes + ((double)((double)gbytes / 1024));
            string s = ret.ToString();
            if (s.Length > 6)
                s = s.Substring(0, 6);
            return s + " Tb";
        }
        else if (gbytes > 0)
        {
            double ret = (double)gbytes + ((double)((double)mbytes / 1024));
            string s = ret.ToString();
            if (s.Length > 6)
                s = s.Substring(0, 6);
            return s + " Gb";
        }
        else if (mbytes > 0)
        {
            double ret = (double)mbytes + ((double)((double)kbytes / 1024));
            string s = ret.ToString();
            if (s.Length > 6)
                s = s.Substring(0, 6);
            return s + " Mb";
        }
        else if (kbytes > 0)
        {
            double ret = (double)kbytes + ((double)((double)bytes / 1024));
            string s = ret.ToString();
            if (s.Length > 6)
                s = s.Substring(0, 6);
            return s + " Kb";
        }
        else
        {
            string s = bytes.ToString();
            if (s.Length > 6)
                s = s.Substring(0, 6);
            return s + " b";
        }
    }
} 
```

在处理传输速率的异步环境中对我们来说效果很好。

# asp.net - Cookies删除，有人可以帮助纠正下面的代码吗？

> ID：10059296
> 
> 赞同：0
> 
> 时间：2012-04-07T23:47:28.113
> 
> 标签：asp.net, cookies

我不知道我在尝试删除 cookie 时做错了什么……有人可以帮忙吗？这是我试图删除 cookie 的代码。

```
if (Request.Cookies["RememberUser"] != null)
{  
    HttpCookie objCookie = Request.Cookies["RememberUser"];
    objCookie.Expires = DateTime.Now.AddDays(-1d);                        
    Response.Cookies.Add(objCookie);
} 
```

上面的代码删除cookie是正确的，由于某种原因这不起作用......

即使我尝试使用 `Response.Cookies.Set(objCookie);`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T02:24:39.510

上面的代码是有效的。我很惊讶为什么你不能删除。问题可能出现在你的创建 cookie 代码中。

```
 var cookie = this.Request.Cookies["user"];
    if (cookie == null)
    {
        cookie = new HttpCookie("user");
        cookie.Path = "/";
        cookie.Value = "123";
        this.Response.Cookies.Add(cookie);
    }
    else
    {
        cookie.Expires = DateTime.Now.AddDays(-1d);
        this.Response.Cookies.Add(cookie);
    } 
```

第一次访问时没有来自服务器的 cookie 和响应标头。

响应标头：

```
Date: Sun, 08 Apr 2012 02:18:37 GMT

X-AspNet-Version: 4.0.30319

Set-Cookie: user=123; path=/ 
```

使用来自服务器的 cookie 和响应标头再次访问。

响应标头：

```
Date: Sun, 08 Apr 2012 02:19:32 GMT

X-AspNet-Version: 4.0.30319

Set-Cookie: user=123; expires=Sat, 07-Apr-2012 02:19:32 GMT; path=/ 
```

和请求标头：

```
GET /
Cookie: user=123
..... 
```

您可以使用`firebug`firefox 或`fiddler`软件来跟踪响应和请求，看看为什么不能删除 cookie。祝你好运。

# android - 跨活动传递用户会话

> ID：10059302
> 
> 赞同：0
> 
> 时间：2012-04-07T23:49:03.213
> 
> 标签：android, session-state

在整个应用程序运行期间验证用户并保持其状态的最佳策略是什么？到目前为止，我已经考虑了首选项，并且可能还考虑了通过 onSaveInstanceState 保存状态。我不确定这些方法是否适用——你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T00:18:39.093

查看 Application 类，这可以帮助您维护活动之间的全局状态变量。

# c# - 具有包罗万象的路由的 ASP.NET Web API PUT

> ID：10059304
> 
> 赞同：2
> 
> 时间：2012-04-07T23:49:22.713
> 
> 标签：c#, asp.net, asp.net-web-api, put

使用新的 web api，是否可以使用 catch all 路线，例如

```
routes.MapHttpRoute(
   name: "name",
   routeTemplate: "api/{*id}",
   defaults: new { controller = "mycontroller", id = RouteParameter.Optional}
); 
```

使用 PUT 方法？通常使用 PUT 方法，如

```
public HttpResponseMessage Put(string id, string body)
{
    ...
} 
```

`body`PUT 请求的主体在哪里。但是，通过一条全能路线，这似乎不起作用，我收到了错误

```
{
    "ExceptionType":"System.ArgumentException",
    "Message":":"No 'MediaTypeFormatter' is available to read an object of type 'String' with the media type ''undefined''.",
    "StackTrace":"..."
} 
```

我的 put 方法看起来像

```
public HttpResponseMessage Put(string id)
{
    ...
} 
```

我想我应该能够使用 catch all 路由，其中​​路由信息将传递给 id 参数，并且我应该能够从响应对象访问正文。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:15:21.203

我认为路线不是问题。如果你想这样写的话，你应该对那条路线没问题。如果您没有适合`MediaTypeFormatter`您在请求中发送的 Content-Type，您将收到该错误。例如，如果您使用的是 a`JsonMediaTypeFormatter`您需要确保您正在发送

```
Content-Type: application/json 
```

在您的要求中。它看起来不像你。

# ruby-on-rails - 没有路线匹配 {:action=>"show", :controller=>"pages"}

> ID：10059309
> 
> 赞同：0
> 
> 时间：2012-04-07T23:50:04.507
> 
> 标签：ruby-on-rails, routes

当我尝试访问此 url:`http://localhost:3000/lessons/18/pages`时，出现此错误：

```
No route matches {:action=>"show", :controller=>"pages", :lesson_id=>#<Page id: 5,
title: "Page One", page_num: 1, lesson_id: 18, stats_id: nil, sources_id: nil,
created_at: "2012-04-06 04:55:39", updated_at: "2012-04-06 04:55:39">} 
```

我有两张桌子：课程，页面

页面.rb

```
belongs_to :lessons 
```

课程.rb

```
has_many :pages 
```

路线.rb

```
resources :lessons do
   resources :pages
end 
```

页面索引如下所示：

```
<% @lesson.pages.each do |page| %>
 <tr>
  <td><%= page.title %></td>
  <td><%= page.page_num %></td>
  <td><%= page.lesson_id %></td>
  <td><%= page.stats_id %></td>
  <td><%= page.sources_id %></td>
  <td><%= link_to 'Show', lesson_page_path(page) %></td>
  <td><%= link_to 'Edit', edit_page_path(page) %></td>
  <td><%= link_to 'Destroy', lesson_page, confirm: 'Are you sure?', method: :delete %></td>
 </tr>
<% end %> 
```

这是页面控制器：

```
def index
 @lesson = Lesson.find(params[:lesson_id])
    respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @pages }
  end
end 
```

为什么`show`路线不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T23:53:23.217

使用嵌套资源路由，您需要传递路由中的所有对象：

```
lesson_page_path(@lesson, page) 
```

该错误在某种程度上揭示了这一点，因为它表明它正在尝试`:lesson_id`从`Page`实例中获取。

# mysql - mysqladmin 设置初始 root 密码在脚本中失败，但在 shell 中有效

> ID：10059313
> 
> 赞同：1
> 
> 时间：2012-04-07T23:50:43.813
> 
> 标签：mysql, amazon-ec2, startupscript, mysqladmin

我正在尝试将其作为 EC2 实例上的启动脚本（以 root 身份运行）的一部分来执行

```
# mysqladmin -u root password mygreatnewpassword 
```

为了调试它，我将整个命令回显到日志中，它是正确的。我在脚本中的命令之前做了一个“ps ax”，以确保 mysql 正在运行。我在密码周围用双引号和单引号尝试了它（应该没有关系，也没有）。无论我尝试什么，在脚本中都会出错

> mysqladmin：连接到“localhost”的服务器失败
> 错误：“用户“root”@“localhost”的访问被拒绝（使用密码：否）”

但是当我在 shell 中从脚本中复制并运行完全相同的行时，它就可以工作了。而且我已经验证在命令运行之前没有 root 密码（在任何一种情况下）。

不可能我需要使用 -p，即使这就是错误的样子，因为当我从 shell 运行它时我不需要它。

我很困惑。

在任何人评论这不安全之前，事实并非如此。密码存储在作为启动的一部分安装的私有 EBS 卷上，并从该卷上的文件中提取并放入启动 shell 的环境中，然后在脚本中使用（而不是回显到 syslog 中）。然后卸载 EBS 卷。一旦该启动脚本结束，除了 mysql 之外，密码无处可寻。

* * *

更新：我只是尝试了这个（在 2.12.2 的 5.1 MYSQL 手册中找到）

> ```
> mysql -u root <<EOF
> UPDATE mysql.user SET Password = PASSWORD("$MYSQL_PWD") WHERE User = 'root';
> FLUSH PRIVILEGES;
> EOF 
> ```

也没有工作，类似的错误并正在运行

> ```
> mysql -u root 
> ```

从 shell 让我连接得很好（我可以输入 UPDATE 和 FLUSH cmds），没有错误。

我开始认为 mysql 和 mysqladmin 正在做一些时髦的事情，比如从 tty 读取导致它们在从 shell 脚本中运行时失败。这将使我的启动脚本难以初始化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T00:11:24.113

看起来这是不可能的。mysql 和 mysqladmin 不是完全可编写脚本的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T23:58:27.810

参考**mysql_secure_installation**（我安装的 /usr/bin ）它在数据库和临时 mysql.cnf 文件中设置密码：以下是从文件中提取的内容，让您了解它在做什么。

```
#!/bin/ksh
config=".my.cnf.$$"
command=".mysql.$$"
do_query() {
    echo $1 >$command
    mysql --defaults-file=$config <$command
    return $?
}

make_config() {
    echo "# mysql_secure_installation config file" >$config
    echo "[mysql]" >>$config
    echo "user=root" >>$config
    echo "password=$rootpass" >>$config
}

rootpass="mynewpassword"
do_query "UPDATE mysql.user SET Password=PASSWORD('$rootpass') WHERE User='root';"
do_query "FLUSH PRIVILEGES;"
rm -f $config $command 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T02:32:42.257

好的。我只是在我的mac上设置mysql，并按照第一次使用mysqladmin命令设置mysql root密码的说明，就像这个问题的所有者一样。基本上情况和这里描述的完全一样。

所以实际上mysql在运行命令后接受新密码，在尝试以root身份登录时不接受密码。发生这种情况是因为有多个名为 root 的用户。

```
+------+-------------------+
| User | Host              |
+------+-------------------+
| root | 127.0.0.1         |
| root | ::1               |
|      | localhost         |
| root | localhost         |
|      | macbook-pro.local |
| root | macbook-pro.local |
+------+-------------------+ 
```

因此，我觉得有必要解决这个问题..

# objective-c - 从 NSMutableArray 中检索“int”？

> ID：10059314
> 
> 赞同：1
> 
> 时间：2012-04-07T23:50:50.420
> 
> 标签：objective-c, nsmutablearray, int

我正在阅读一些 json 输出......只是一些整数。第一个 NSLog 完美地输出了东西。在这种情况下，有 3 个元素。我不明白如何访问我猜的特定元素。

```
NSMutableArray *json = (NSMutableArray*)[NSJSONSerialization JSONObjectWithData:data   options:kNilOptions error:&error];

NSLog(@"json: %@ \n",json);

int count = (int)[json objectAtIndex:0];
int count1 = (int)[json objectAtIndex:1];
int count2 = (int)[json objectAtIndex:2];
NSLog(@"count %i %i %i\n",count,count1,count2); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T23:54:27.323

`NSArray`包含一个对象，您不应该将其转换为`int`，这将不起作用。检查您的代码并确定`NSJSONSerialization`. 如果它是一个整数，它通常是 的一个实例`NSNumber`，所以尝试：

```
int count = [[json objectAtIndex:0] intValue]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T23:54:49.477

这些很可能是 NSNumbers。试试这个：

```
int count = [[json objectAtIndex:0] intValue];
int count1 = [[json objectAtIndex:1] intValue];
int count2 = [[json objectAtIndex:2] intValue];
NSLog(@"count %i %i %i\n",count,count1,count2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T23:54:38.103

`NSArray`并且`NSMutableArray`不能使用`int`s 和其他非 id 对象作为键或值，因此强制转换不起作用。这些值很可能是 type `NSNumber`，因此您需要调用`intValue`它们：

```
int count = [[json objectAtIndex:0] intValue];
int count1 = [[json objectAtIndex:1] intValue];
int count2 = [[json objectAtIndex:2] intValue]; 
```

# java - 具有多个装饰器文件的站点网格

> ID：10059326
> 
> 赞同：3
> 
> 时间：2012-04-07T23:53:12.067
> 
> 标签：java, spring-mvc, sitemesh

我想要多个装饰器，如此处所述：[https](https://github.com/sitemesh/sitemesh2) ://github.com/sitemesh/sitemesh2 。我在 decorators.xml 中提供了多个装饰器，但主装饰器被应用于我项目中的每个文件。例如，我的装饰器看起来像这样：

```
<decorators defaultdir="/WEB-INF/decorators">
    <decorator name="main" page="main.jspx">
       <pattern>/*</pattern>
    </decorator>
    <decorator name="other" page="other.jspx">
        <pattern>/spring/other/*</pattern>
    </decorator>
</decorators> 
```

两者`/spring/some/page.jspx`都`/spring/other/page.jspx`使用“main.jspx”模板进行渲染。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T18:29:55.480

我知道文档示例与这个想法相矛盾，但是如果您需要尝试一些东西 - 尝试像这样重新排序您的装饰器：

```
<decorators defaultdir="/WEB-INF/decorators"> 
    <decorator name="other" page="other.jspx"> 
        <pattern>/spring/other/*</pattern> 
    </decorator>
    <decorator name="main" page="main.jspx"> 
       <pattern>/*</pattern> 
    </decorator> 
</decorators> 
```

从记忆中我认为 Sitemesh 使用了*第一个*匹配的装饰器模式，并且按照您指定的顺序，它始终是“主”装饰器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T23:59:37.847

使用以下内容：

```
<decorators defaultdir="/WEB-INF/decorators"> 
    <decorator name="main" page="main.jspx"> 
       <pattern>/spring/main/*</pattern> 
    </decorator> 
    <decorator name="other" page="other.jspx"> 
        <pattern>/spring/other/*</pattern> 
    </decorator> 
</decorators> 
```

并告诉我它是否有效。

# java - 在客户端-服务器环境中访问客户端的状态

> ID：10059331
> 
> 赞同：0
> 
> 时间：2012-04-07T23:53:42.400
> 
> 标签：java, client-server

在客户端-服务器环境中，客户端连接后

```
sock = new Socket(serverName, SERVER_PORT);
fromServer = new BufferedReader(new InputStreamReader(sock.getInputStream()));
toServer = new PrintStream(sock.getOutputStream());

toServer.println(json.toString()); 
```

我想向服务器发送一个 bean，其中包含有关客户端状态的信息。

唯一想到的是创建一个 bean 用数据填充它，使用 Xstream 将 bean 转换为 json 格式，将 json 发送到服务器并在服务器端重新组装它。

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T00:12:27.657

是的，一种更简单的方法是使用 Java 的序列化框架来为您完成所有这些工作，只需让您的对象实现[Serializable](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)即可。[您将使用ObjectOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html)包装您的套接字输出流，并简单地告诉它写入您的对象。[使用Java 框架](http://my.safaribooksonline.com/book/programming/java/9780137150021/serialization/ch11)时有很多你应该注意的问题，但它仍然适用于许多项目。

# java - DefaultTableModel的dataVector克隆问题

> ID：10059332
> 
> 赞同：1
> 
> 时间：2012-04-07T23:53:52.020
> 
> 标签：java, swing, jtable, clone, defaulttablemodel

我有一个简单的`JFrame`和一个`JTable`框架。用户可以将数据提供到表的行中。要求之一是关闭框架后可以保存或丢弃新数据。我认为完成此行为的最简单方法如下：

1.  覆盖`setVisible()`框架的方法并克隆`DefaultTableModel`的数据向量。

2.  将 a 添加`WindowListener`到框架并对`WindowClosing`事件做出反应。这样，窗口侦听器可以决定是否应该将模型重置为之前保存的模型。

这是相关的代码片段：

```
@Override
public void setVisible(boolean b) {
  //save the original models only if setVisible invoked with true (do not save the model when hiding the frame)
  if (b) {
    Vector cloned = (Vector) userTableModel.getDataVector().clone();
    Vector headerNames = new Vector();
    originalModel = new CustomTableModel(cloned, headerNames);
  }
  super.setVisible(b);
} 
```

事实上，奇怪的事情正在发生。克隆数据向量后，无法呈现表，这导致以下异常：

```
线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException: 0 >= 0
    在 java.util.Vector.elementAt(Vector.java:470)
    在 javax.swing.table.DefaultTableModel.getValueAt(DefaultTableModel.java:650)
    在 asc.model.CustomTableModel.getValueAt(CustomTableModel.java:74)
    在 javax.swing.JTable.getValueAt(JTable.java:2720)

```

该表与该表没有`originalModel`任何关系。这对我来说是一个惊喜，因为理论上，克隆不应该影响表的模型。originalModel 的目的是保存对新创建的表模型副本的引用。在我注释掉 的创建后`originalModel`，一切正常。

`String`另一个有趣的事情是，当我向向量添加一个空时`headerNames`，表格渲染器会抛出几乎相同的`ArrayIndexOutOfBounds`异常，但以这个结尾：

```
线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException: 1 >= 1

```

在这种情况下，第一行的第一列完美呈现。

My`CustomTableModel`是从 扩展而来的`DefaultTableModel`，它没有使用任何特殊的方法。构造函数只是将数据向量和标头向量传递给超类。

我希望有人可以帮助解决问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T23:57:47.857

我认为你有一个错误`Vector cloned`，因为你试图返回平原`Vector`，但[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)是基于`Vector<Vector>`你的情况

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T00:04:07.687

headerNames 向量的长度必须与您拥有的列数相匹配。这很令人困惑，因为 Vector 被转换为 CustomTableModel 类中的标题名称数组，这就是它显示为 AIOOBE 的原因。

因此，首先通过它在 headerNames 向量/数组中查找第一列（索引 0 处的列）并失败，发送 0 >= 0 版本的错误。一旦你添加了一个列名字符串（尽管它可能是空的），它会成功呈现整个第一列，然后去寻找第二列（索引 1 处的列）。它失败了，因为 headerNames 向量中没有第二个元素，并给出 1 >= 1 版本的错误。

确保 headerNames 向量具有正确数量的值（与数据向量中的列数匹配），您应该一切顺利。

注意 - clone() 方法正在制作数据的 SHALLOW 副本，因此用户对单元格中的数据所做的更改仍会更改原始对象。本文可能对此有所帮助：http: [//javatechniques.com/blog/faster-deep-copies-of-java-objects/](http://javatechniques.com/blog/faster-deep-copies-of-java-objects/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T01:52:57.287

的实现[`AbstractTableModel`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)将使您可以直接控制数据结构。这个[例子](https://stackoverflow.com/questions/9132987)说明了`Map<String, String>`，但选择是任意的。

# php - 跟踪访问者的最后查看项目

> ID：10059333
> 
> 赞同：1
> 
> 时间：2012-04-07T23:53:53.867
> 
> 标签：php, javascript, jquery, mysql, codeigniter

我有一个使用 Codeigniter 创建的非常类似于 AJAX 的列表网页，我希望注册用户能够区分他们之前查看过的列表。

**当前尝试：**单击列表时，列表 id 会发送`$.post()`到服务器端 PHP，PHP 将 , 插入（使用）自动`INSERT... ON DUPLICATE KEY UPDATE`增量的表中。每次访问者进行新搜索时，都会从 MySQL 表中检索所有带有他的内容，并通过一个循环，更改这些先前查看的列表的 CSS。`listing_id``user_id``view_timestamp``viewed_id``listing_id``user_id``.getJSON()`

我的问题是这种方法是否涉及服务器上的太多工作。

1.  每个用户有一个单行会更好，并且`listing_id`查看被序列化吗？
2.  我应该使用 cookie（由 Codeigniter 自动保存到数据库中吗？）？
3.  当用户查看时插入通过 AJAX 查看的新列表。但如果包含所有已查看列表id的cookie不存在，则仅检索一次已查看列表的id，否则在将新查看的列表发送到服务器以插入后，列表id也插入到cookie中。这样在进行新的搜索后，就不需要不断地在数据库中查询已查看的列表 ID 的整个列表。

注意：对于以前查看的列表的列表 ID 的 AJAX 请求数量的估计，平均用户将每 20 秒进行一次新搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T10:06:08.637

对于这种功能，我不会自发地涉及数据库，而是查看客户端解决方案，例如使用 localStorage 存储 Json 数据，或者如果您想要更广泛的浏览器支持（或需要从您的 php 代码中存储它），也可以使用 cookie并且不能从javascript中做到这一点）。如果您必须将此信息存储在您的数据库中，我仍然会寻找尽可能多地在客户端缓存信息的解决方案，就像您在第 3 点中描述的那样。

# android - Android重复任务不起作用

> ID：10059335
> 
> 赞同：2
> 
> 时间：2012-04-07T23:54:03.240
> 
> 标签：android, scheduled-tasks, task, repeat, executorservice

你能帮助我吗？我实现了一个执行器和scheduledWithFixedDelay，但它只执行一次......而且我想以重复的方式完成这项任务......

```
ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();
    executor.scheduleWithFixedDelay(new Runnable(){

        public void run() {
            updateList();
        }

    }, updateTime, updateTime, TimeUnit.MINUTES); 
```

我究竟做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T12:09:53.623

看起来你正在以正确的方式做这件事。这让我阅读了 java 文档，这就是我发现的让我自己感到惊讶的东西。

> 如果任务的任何执行遇到异常，则后续执行将被抑制。

[ScheduledExecutorService.scheduleWithFixedDelay()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleWithFixedDelay%28java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit%29)

runnable中的代码是否有可能产生异常，从而导致Scheduled Executor终止执行？你肯定会提到这一点吗？

但正如我所说，我发现这令人惊讶，因为我认为 Scheduled Executor 处理异常，因此不会抑制后续任务执行。这是首选而不是经典[Timer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Timer.html)的主要原因之一。但现在我在 javadoc 中看到我显然认为错了......

我对 Android 平台不是很熟悉，但 Oracle 的 JVM 和 Android 的 Dalvik 之间的 java.util.concurrent 设施可能存在差异，因此考虑到 Oracle 的 JVM javadocs 可能不是一个好主意。

编辑：确实工厂方法的javadoc说

> （但是请注意，如果这个单线程在关闭之前的执行过程中由于失败而终止，如果需要执行后续任务，一个新线程将取代它。）

[Executors.newSingleThreadScheduledExecutor()](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newSingleThreadScheduledExecutor%28%29)

EDIT2：Oracle 和 Dalvik 的 java doc 似乎几乎无法区分。

# python - sqlalchemy 在多个列中是唯一的

> ID：10059345
> 
> 赞同：226
> 
> 时间：2012-04-07T23:55:16.047
> 
> 标签：python, sqlalchemy

假设我有一个代表位置的类。位置“属于”客户。位置由 unicode 10 字符代码标识。“位置代码”在特定客户的位置中应该是唯一的。

```
The two below fields in combination should be unique
customer_id = Column(Integer,ForeignKey('customers.customer_id')
location_code = Column(Unicode(10)) 
```

所以如果我有两个客户，客户“123”和客户“456”。它们都可以有一个名为“main”的位置，但都不能有两个名为 main 的位置。

我可以在业务逻辑中处理这个问题，但我想确保无法在 sqlalchemy 中轻松添加需求。unique=True 选项似乎仅在应用于特定字段时才有效，它会导致整个表只有所有位置的唯一代码。

* * *

## 回答 #1

> 赞同：386
> 
> 时间：2012-04-08T07:26:01.010

[从以下文档](http://docs.sqlalchemy.org/en/latest/core/metadata.html#sqlalchemy.schema.Column)中提取`Column`：

> **unique** – 如果为 True，则表示该列包含唯一约束，或者如果*index*也为 True，则表示应该使用唯一标志创建索引。要在约束/索引中指定多个列或指定显式名称，请显式使用 [UniqueConstraint](http://docs.sqlalchemy.org/en/latest/core/constraints.html#sqlalchemy.schema.UniqueConstraint)或[Index](http://docs.sqlalchemy.org/en/latest/core/constraints.html#sqlalchemy.schema.Index)构造。

由于这些属于表而不是映射类，因此可以在表定义中声明它们，或者如果使用声明性如下`__table_args__`：

```
# version1: table definition
mytable = Table('mytable', meta,
    # ...
    Column('customer_id', Integer, ForeignKey('customers.customer_id')),
    Column('location_code', Unicode(10)),

    UniqueConstraint('customer_id', 'location_code', name='uix_1')
    )
# or the index, which will ensure uniqueness as well
Index('myindex', mytable.c.customer_id, mytable.c.location_code, unique=True)

# version2: declarative
class Location(Base):
    __tablename__ = 'locations'
    id = Column(Integer, primary_key = True)
    customer_id = Column(Integer, ForeignKey('customers.customer_id'), nullable=False)
    location_code = Column(Unicode(10), nullable=False)
    __table_args__ = (UniqueConstraint('customer_id', 'location_code', name='_customer_location_uc'),
                     ) 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2020-02-14T04:55:04.157

```
from flask_sqlalchemy import SQLAlchemy
db = SQLAlchemy()

class Location(Base):
      __table_args__ = (
        # this can be db.PrimaryKeyConstraint if you want it to be a primary key
        db.UniqueConstraint('customer_id', 'location_code'),
      )
      customer_id = Column(Integer,ForeignKey('customers.customer_id')
      location_code = Column(Unicode(10)) 
```

# java - 创建 Servlet 时出现“HTTP 405”？（doPost 和 doGet 实现）

> ID：10059348
> 
> 赞同：2
> 
> 时间：2012-04-07T23:55:45.923
> 
> 标签：java, servlets

我有一个名为 HelloServlet 的 servlet..

```
 import java.io.*;
    import javax.servlet.*;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;
    public class HelloServlet extends HttpServlet
    {
public void doGet(ServletRequest request, ServletResponse response)
throws ServletException, IOException
{

        response.setContentType("text/html");
        PrintWriter pw = response.getWriter();
        pw.println("<html>");
        pw.println("<head>");
        pw.println("<title> Hello World </title>");
        pw.println("</head>");
        pw.println("<body>");
        pw.println("<h1> Hello, World!</h1>");
        pw.println("</body>");
        pw.println("</html>");
        pw.close();

}
public void doPost(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException
{
    doGet(request, response);
}
    } 
```

我将它编译成一个`.class`文件，并将它放在我的 tomcat 目录下`C:/tomcat/webapps/ALTest1/WEB-INF/classes/`- 我制作了 servlet 映射（我将 url-pattern 作为`/hi`）和它的 servlet 条目`C:/tomcat/webapps/ALTest1/WEB-INF/web.xml`

一切正常，但是当我去浏览器访问它时，`http://localhost:8080/ALTest1/hi`我收到一条错误消息：

```
HTTP STATUS 405 - HTTP METHOD GET is not supported by this URL 
```

...这很奇怪，因为我的文件中既有方法`doPost`又有`doGet`方法`HelloServlet.class`。因此，即使`doGet`不支持，我也有 doPost 方法来处理 POST，但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T00:04:43.293

```
 public void doGet(ServletRequest request, ServletResponse response) 
```

那应该是 HttpServletRequest 和 HttpServletResponse，就像在 doPost 中一样。

始终使用@Override，它会告诉你这个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T00:04:58.057

您的 servlet java 类似乎没有包。对于运行 throw main 方法的普通 java 程序，如果没有指定包，则 java 类在默认包中。但是，对于 Web 应用程序，您需要在 web.xml 中指定包名称。

# php - 如何处理用户上传的图像和文件以便在多用户 Web 应用程序中查看？

> ID：10059352
> 
> 赞同：0
> 
> 时间：2012-04-07T23:57:15.593
> 
> 标签：php, web-applications, file-upload

我是一名初级/中级 PHP MySQL 开发人员。

计划使用 Yii 或 Codeigniter 创建多用户 Web 应用程序，用户有自己的私人和公共区域。他们将能够上传照片和/或文件以通过网络访问（文档等）

我有点担心文件存储的最佳方式。那些多站点/用户网站（wordpress、blogger、facebook）是如何做到的？

我考虑过以下选项，但我不知道该行业是否采用这种方式：

本质上，我们会为任何用户上传的文件使用 3 个名称（原始名称和 2 个新名称）

1.  用户上传文件（图像、文档等），我们重命名文件并将其存储在文件夹中，并将原始名称保存在具有其他文件属性的数据库中

2.  为了显示文件，我们将使用 3rd。飞行中的新名称

这样，只有所有者知道原始名称，没有人知道物理文件名。

*   这是完成的方式还是有更简单的方法？
*   是否可以在不重命名文件或重新创建任何图像且不增加处理时间的情况下显示具有“虚拟”名称/路径的文件？或者 PHP 有一种本机方式来“不显示”浏览器的实际文件名？
*   用户如何在不处理真实​​文件名的情况下使用网址共享文件？
*   即使没有人知道文件的物理名称，有人可以通过网络“搜索”或定位文件吗？比如谷歌或任何其他精明的感兴趣的用户？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T00:18:06.513

您可以非常简单地使用 .htaccess 来重写图像路径的 URL，或者改为散列文件夹和文件名。

存储取决于您将使用的文件数量。像 facebook 等大公司使用数百个（或更多！）服务器工作，并拥有非常专业的存储方法等。

对于常规的 Web 应用程序，简单的文件或数据库存储可能就足够了。

# cucumber - Cucumber 因未初始化常量 Factory::Syntax (NameError) 而失败

> ID：10059353
> 
> 赞同：0
> 
> 时间：2012-04-07T23:57:16.543
> 
> 标签：cucumber, factory-bot

刚刚从 object-daddy 迁移到 FactoryGirl gem 并更新了我的步骤，但现在我收到以下错误（在我的黄瓜测试中）：

```
uninitialized constant Factory::Syntax (NameError) 
```

我按照 wiki 并将以下行添加到我的 cucumber env 文件中：

```
World Factory::Syntax::Methods 
```

有什么建议么？

# java - 使用 matlabcontrol 从 netbeans 调用 matlab

> ID：10059365
> 
> 赞同：1
> 
> 时间：2012-04-07T23:59:25.447
> 
> 标签：java, matlab, matlab-deployment

请帮帮我！当我尝试使用 java 中的 matlabcontrol 调用我的 matlab 函数时，它告诉我系统找不到指定的文件。

```
package matcontro;

import matlabcontrol.*;

public class HelloWorld

 {

      public static void main(String[] args) throws MatlabConnectionException, MatlabInvocationException
     {
         // create proxy
         MatlabProxyFactoryOptions options = new MatlabProxyFactoryOptions.Builder()
                 .setUsePreviouslyControlledSession(true)
                 .build();
         MatlabProxyFactory factory = new MatlabProxyFactory(options);
        MatlabProxy proxy = factory.getProxy(); 

         // call builtin function
         proxy.eval("disp('hello world')");

         // call user-defined function (must be on the path)
         proxy.eval("addpath('C:\\ Users\\HASENDE\\My Documents\\MATLAB')");
         proxy.feval("myfunc");
         proxy.eval("rmpath('C:\\ Users\\HASENDE\\My Documents\\MATLAB')");

         // close connection
         proxy.disconnect();
     }
 } 
```

我得到的错误如下；

跑：

```
Exception in thread "main" matlabcontrol.MatlabConnectionException: Could not launch MATLAB. Command: [matlab, -r, javaaddpath 'C:\Users\HASENDE\Documents\NetBeansProjects\Java Classpath Libraries\matlabcontrol-4.0.0.jar'; matlabcontrol.MatlabClassLoaderHelper.configureClassLoading(); javarmpath 'C:\Users\HASENDE\Documents\NetBeansProjects\Java Classpath Libraries\matlabcontrol-4.0.0.jar'; matlabcontrol.MatlabConnector.connectFromMatlab('PROXY_RECEIVER_01caa56d-9ed7-4e39-a45b-345051024d49', 2100);]

at matlabcontrol.RemoteMatlabProxyFactory.createProcess(RemoteMatlabProxyFactory.java:305) at matlabcontrol.RemoteMatlabProxyFactory.requestProxy(RemoteMatlabProxyFactory.java:116)

at matlabcontrol.RemoteMatlabProxyFactory.getProxy(RemoteMatlabProxyFactory.java:134)

    at matlabcontrol.MatlabProxyFactory.getProxy(MatlabProxyFactory.java:81)

    at matcontro.HelloWorld.main(HelloWorld.java:21)

Caused by: java.io.IOException: Cannot run program "matlab": CreateProcess error=2, The system cannot find the file specified at java.lang.ProcessBuilder.start(ProcessBuilder.java:1029) at matlabcontrol.RemoteMatlabProxyFactory.createProcess(RemoteMatlabProxyFactory.java:292) ... 4 more

Caused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified

    at java.lang.ProcessImpl.create(Native Method)

    at java.lang.ProcessImpl.<init>(ProcessImpl.java:188)

    at java.lang.ProcessImpl.start(ProcessImpl.java:132)

    at java.lang.ProcessBuilder.start(ProcessBuilder.java:1021)   ... 5 more

Java Result: 1 
```

构建成功（总时间：4 秒）

# python - 在 python 2.4 中读取用户输入，将其放入队列

> ID：10059367
> 
> 赞同：0
> 
> 时间：2012-04-07T23:59:44.057
> 
> 标签：python, queue, command-line-arguments, python-2.4

所以我在 python 2.4 中编写了一个微分计算器程序（我知道它已经过时了，这是一个学校作业，我们的系统管理员不相信更新任何东西），它接受前缀符号的用户输入（即 input = [+ - * x^2 2x 3x^2 x]，等价于 x^2 + 2x - 3x^2 * x) 并计算微分。

我正在尝试找到一种方法来读取命令行用户输入并将数学运算符放入队列中，但我无法弄清楚！显然， X=input() 和 x=raw_input() 命令不起作用，我可以找到关于如何在 python 2.4 中读取用户输入的字面上的 0 文档。我的问题是：如何在 python 2.4 中读取用户输入，以及如何将该输入放入队列中？这是我正在尝试的：

```
1 formula = input("Enter Formula:")
2 
3 operatorQueue=[]
4 
5 int i = len(formula)
6 
7 for x in formula:
8     if formula[x] == '*', '+', '-', '/':
9         operatorQueue.append(formula[x])
0 
11 print "operator A:", operatorQueue.pop(0)
12 
```

哪个不起作用（我不断收到诸如“打印：未找到命令”和“公式：未找到命令”之类的错误）

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T00:03:43.037

如果你在一个 unix-ish 平台上，放一个

```
#!/usr/bin/env python 
```

在[你的程序之上](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)。shell 似乎无法识别您正在运行 python 脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T00:13:48.183

@miku 已经回答了这是您最初的问题，但我想我会添加更多。

命令行脚本需要“sh-bang”行，以便使用正确的进程来解释语言，无论是 bash、perl、python 等。所以在你的情况下，你需要：`/usr/bin/env python`

话虽如此，一旦你让它运行起来，你就会遇到其他一些问题。`raw_input`应该使用而不是`input`，因为它会给你一个原始字符串。`input`将尝试评估您的字符串，这很可能会给您带来问题。

您可能需要更多地查看 python 语法。python中的赋值不需要你声明变量类型：`int a = 1`。它是动态的，编译器将为您处理它。

此外，您将需要查看如何进行`if elif else`测试以正确处理公式的情况。这也不会在一条线上使用多个参数完成所有工作。

# asp.net-mvc - 向每个会话用户广播管理员消息

> ID：10059371
> 
> 赞同：1
> 
> 时间：2012-04-08T00:00:53.777
> 
> 标签：asp.net-mvc

我需要通知每个用户保存他们的工作并注销，以便管理员可以重置 iis 或在 asp.net MVC 应用程序服务器中进行一些更改。

循环会话对象集合不是线程安全的，这是我所学到的。

还有其他想法吗？

即使我可以获得活动会话，我如何向这些客户发送消息？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T00:06:26.573

将消息保存在数据库中并针对每个请求查询数据库以查看消息是否存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T00:15:40.920

这似乎是一个定义不明确的要求。

应在特定时间进行认真的维护，并应提前提醒用户该时间窗口。

简单地重新启动 IIS 是一个非常快速的过程......在简单地重新启动 IIS 时，用户是否会失去他们的工作？例如，虽然我一直在填写这个 StackOverflow 答案，但他们可能已经重新启动了服务器十几次。一旦我点击 Post，如果服务器关闭，它将超时并将我的工作留在 textarea 中，否则如果服务器及时返回，它将成功连接。

如果我不提交数据，而只是单击链接，则同样适用：浏览器超时，在这种情况下，一旦服务器备份，简单的刷新就足够了，或者最终将用户带到他们想去的地方.

如果您正在执行纯 AJAX 请求，您将需要自己处理丢失的服务器，而不是依靠浏览器来完成，但是由于分布式计算的八种谬误 #1，您无论如何都需要解决这个问题："网络是可靠的。” （见[http://en.wikipedia.org/wiki/Fallacies_of_Distributed_Computing](http://en.wikipedia.org/wiki/Fallacies_of_Distributed_Computing)）

所以，我实际上会推迟这个要求。他们要求你做一些不能真正满足需求的事情（用户不会丢失数据，有相当好的体验），这将变得复杂，最终将是一个脆弱的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T02:55:30.063

听起来像是 SignalR 的案例！

[https://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR)

# c# - RTS游戏的指挥系统

> ID：10059373
> 
> 赞同：0
> 
> 时间：2012-04-08T00:01:15.483
> 
> 标签：c#, architecture

我正在编写一个 RTS 游戏，我想将用户操作封装成“命令”。命令将允许：

*   通过网络将用户操作发送给其他玩家，因此每个人都知道其他人在做什么
*   记录用户对文件的操作以启用重播功能
*   在执行之前验证每个动作以防止（一种形式的）作弊
*   分类动作，例如只导致 UI 变化的动作（移动相机）、改变游戏状态的动作（移动单位）、只有地图编辑器才能发出的动作（改变地形）等。

他们还必须增加最小的开销。因此，我想避免使用反射。到目前为止，我想出的最好的结果很糟糕，因为我不可避免地会得到一个巨大的 switch 语句。

```
enum CommandType {
    MoveCamera,
    ChangeTerrain
}

// Base class for all commands (public fields used for brevity)
abstract class Command {
    protected Command(CommandType type) {
        Type = type;
    }
    public CommandType Type;
}

class CommandMoveCamera : Command {
    public CommandMoveCamera() : base(CommandType.MoveCamera) {}
    public int DeltaX;
    public int DeltaY;
}

class CommandChangeTerrain : Command {
    public CommandChangeTerrain() : base(CommandType.ChangeTerrain) {}
    public int NewTerrainType;
    public int X;
    public int Y;
}

class Game {
    Queue<Command> m_commands;
    void Update() {
        // Example of adding a command
        m_commands.Enqueue(new CommandMoveCamera { DeltaX = -10, DeltaY = 0 });

        // Processing commands
        while (m_commands.Count > 0) {
            var c = m_commands.Dequeue();
            switch(c.Type) {
            case CommandType.MoveCamera:
                var command = (CommandMoveCamera)c;
                MoveCamera(c.DeltaX, c.DeltaY);
                break;
            case CommandType.ChangeTerrain:
                var command = (CommandChangeTerrain)c;
                ChangeTerrain(c.X, c.Y, c.NewTerrainType);
                break;
            }
        }
    }
} 
```

语言是 C#。我的问题是：以满足要求的方式实现该系统并避免依赖于巨大的 switch 语句来分支每种不同类型的命令的方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T00:12:01.057

不久前我为游戏引擎做了一个非常相似的事情。我实际上经历了几个不同的版本，我想出的是这样的。

*   所有命令都实现 Command 接口（这意味着可序列化）
*   所有命令都必须在 CommandRegistry 中注册，因此 CommandRegistry 对每个命令都有一个唯一的 Id。

然后通过线路发送命令，您要求 CommandRegistry 为您序列化它。它将序列化命令并附加其 ID。接收端的 CommandRegistry 将读取 Id，创建适当类型的 Command，然后要求它从其余数据中反序列化自身。

我已经在 C++ 和 Go 中完成了这个基本设置，所以我认为它在 C# 中应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T00:28:59.153

我有几个想法。首先，您可以公开`On<Event>`每种命令的方法。然后添加一个抽象方法`Command`，就像`Execute`参数一样`Game`。然后每个命令实现都可以调用适当的方法`Game`（包括与命令相关的任何其他逻辑）。您将不再需要枚举。

另一个想法有点相似，但使用了委托。为每个命令类型定义一个委托，并为每个命令实现公开一个使用此委托的事件。然后在您的`Command`摘要中，您可以拥有方法`Execute`，该方法在实施时会引发适当的事件。当您创建每个事件时，您只需将事件委托`Game`给将处理该命令的成员。

# kernel - 程序如何通信 - 微内核 单片内核 exo 内核

> ID：10059378
> 
> 赞同：8
> 
> 时间：2012-04-08T00:02:33.800
> 
> 标签：kernel, inter-process-communicat, microkernel

程序如何与微内核/单片内核/exo内核通信？

![在此处输入图像描述](../Images/962d94e63c25d5ce0c8d9f034ddf3fb7.png)

我读过很多书，如图所示，单片内核通过系统调用表/文件系统层与程序通信。

但是微内核和exo内核如何与程序通信呢？

微内核的基础是否直接与程序通信，然后微内核与服务器通信？

更新：我发现这很好地回答了它

客户端-服务器或微内核操作系统 操作系统设计中新概念微内核的出现旨在将操作系统的传统服务从单片内核迁移到用户级进程。其思想是将操作系统划分为若干个进程，每个进程实现一组单一的服务——例如，I/O 服务器、内存服务器、进程服务器、线程接口系统。每个服务器都以用户模式运行，为请求的客户端提供服务。客户端可以是另一个操作系统组件或应用程序，它通过向服务器发送消息来请求服务。以内核模式运行的 AnOS 内核（或微内核）将消息传递到相应的服务器；服务器执行操作；微内核在另一条消息中将结果传递给客户端

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T11:53:34.460

系统调用是与单片内核和微内核通信的主要方式。使用系统调用接口内核可以提供大量的 IPC 方法（例如信号、共享内存、消息传递）。由于微内核的性质，IPC 通常是此类内核中最​​重要的部分，用于允许程序与服务器进行通信。

换句话说，有些系统调用允许程序向内核发出请求。内核提供了一些 IPC 方法，允许程序相互通信，包括基于微内核的操作系统中的服务器。

# mongodb - 虚拟服务器上的 CouchDB

> ID：10059381
> 
> 赞同：3
> 
> 时间：2012-04-08T00:03:29.253
> 
> 标签：mongodb, couchdb, virtualization, virtual-server

我正在编写一个 Web 应用程序，它基本上在您的 Twitter 时间线中搜索链接。我曾经使用 MongoDB 来保存推文和信息，这在我的开发系统上运行良好，但在测试期间在虚拟服务器上运行了一段时间后崩溃了。我知道 MongoDB 在虚拟化方面存在一些问题——它甚至会在启动时发出警告。

我想知道，如果 CouchDB 有同样的问题。你有这方面的经验吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T01:11:11.480

CouchDB 在虚拟化方面没有已知问题。许多人在虚拟服务器上的生产环境中使用 CouchDB。

# java - Java .jar 使用太多内存

> ID：10059384
> 
> 赞同：0
> 
> 时间：2012-04-08T00:03:49.797
> 
> 标签：java, memory, jar, memory-leaks, executable-jar

我正在使用 Eclipse Indigo 在 Java 中制作应用程序。当我使用 Eclipse 运行它时，任务管理器显示 javaw.exe 正在使用 50mb 的内存。当我将应用程序导出为可运行的 .jar 并执行 .jar 时，任务管理器显示 javaw.exe 正在使用 500mb。为什么是这样？我该如何解决这个问题？

编辑：我使用的是 Windows 7 64 位，我的系统说我安装了 Java 1.7。显然内存问题是由while循环引起的。我将研究导致问题的 while 循环内部的内容。

编辑：发现问题。在 while 循环中的某一时刻`BufferedImage`，创建了新实例，而不是替换相同的`BufferedImage`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T00:20:42.740

如果没有关于您的代码的任何其他详细信息，我建议使用分析器来分析问题。我知道 YourKit 和可用于 NetBeans 的那个非常好。

从分析器运行应用程序后，您应该首先查看应用程序包创建的对象和侦听器。如果问题不存在，您可以将搜索范围扩大到其他包，直到您识别出越来越失控的事物，然后查看处理这些实体的代码。

当您多次运行代码的某些部分并且在该代码停止运行后仍然看到内存利用率时，您可能会出现泄漏，并且可能会考虑在退出时将变量/侦听器清空或清空。

这应该是一个很好的起点，但请报告您的结果，以便我们了解进展情况。顺便问一下，您使用的是什么操作系统以及什么版本的 java？

——路易斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T00:26:04.303

您需要分析您的代码以获得确切的答案，但根据我的经验，当我看到类似的事情时，我经常将其等同于垃圾收集。例如，我运行相同的工作，给了一份工作 10 个演出，另外 2 个演出。两者都运行并完成了，但 10 个工作使用了更多内存（并且完成得更快），而第二个（2 个工作）我相信，垃圾收集所以它仍然完成但需要更多的时间和更少的内存。我对java有点陌生，所以我可能假设垃圾收集，但我已经看到你在说什么。

您需要分析您的代码（查看 jconsole，它包含在 java 或 visualVM 中）..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T00:37:41.753

这听起来最奇特。

我能想到两种可能的解释：

*   你看错了`javaw.exe`实例。也许您查看了运行 Eclipse 的实例……它可能有那么大，或者更大。

*   您已经（不知何故）设法将 Java 配置为默认使用大堆运行。在 Linux 上，您可以使用包装脚本、shell 函数或 shell 别名来执行此操作。您至少可以在 Windows 上执行其中的第一个。

我不认为它是 JAR 文件本身。AFAIK，您不能在 JAR 文件中设置 JVM 参数。您可能以某种方式在 JAR 文件中包含了某些内容的不同版本，但这有点牵强...

如果这些想法都没有帮助，请尝试分析。

* * *

> 发现问题。在 while 循环中的某一时刻，创建了新的 BufferedImage 实例，而不是替换相同的 BufferedImage。

是的。BufferedImage 使用大量的堆外内存，需要小心管理。

但这并不能解释为什么您的应用程序从 JAR 运行时比从 Eclipse 启动时使用更多的内存......除非您告诉应用程序做不同的事情。

# javascript - 移动 Safari 不接受 HTML5 Meter 输入值

> ID：10059385
> 
> 赞同：0
> 
> 时间：2012-04-08T00:04:02.617
> 
> 标签：javascript, jquery, ios, html, mobile-safari

我正在创建一个跟踪您的海拔高度的应用程序。目前，IOS 是唯一支持 Altitude 参数的设备之一，因此让它在移动 Safari 中运行至关重要。高度将打印在页面上的两个位置，一个文本元素和一个仪表元素，因此可以直观地表示您当前的高度。

生成高度不是问题，但是我没有成功地将高度存储在仪表的值中。需要注意的是，Mobile Safari 不支持 Meter 元素，所以我使用 polyfill 来让它工作。

您可以在这里大致了解我要做什么：http: [//jsfiddle.net/qF9hh/](http://jsfiddle.net/qF9hh/)

请注意，地理位置坐标已被注释掉，但如果您要在 IOS 设备上对其进行测试，它们确实可以工作。

所以我的问题是，如何将海拔坐标存储在仪表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T01:17:03.557

这样的事情可能会更好

```
var worked = false;
$("button").click(function () {
    worked = false;
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(success, error);
    } else {
        error('not supported');
    }
}).load();​
function error(msg){
    alert(typeof(msg) = "string" ? msg : "error!");
}
function success(pos){
    if(worked)return; // to prevent firing twice in firefox
    worked = true;
    var meter = $("#high");
    if(pos.altitude === null){
        error("Altitide not supported");
        return;
    }
    meter.val(pos.altitude);
    meter.text(pos.altitude + "/" + meter.attr("max"));
} 
```

[提琴手](http://jsfiddle.net/pbfy0/wGuAG/5/)

# java - 最终输出在 y 和 x 之间随机选择但获得高值的机会较低的算法

> ID：10059388
> 
> 赞同：2
> 
> 时间：2012-04-08T00:04:49.087
> 
> 标签：java, algorithm

我大约 2 或 3 个月前开始学习 Java，我对算法相当不了解，我开始从事一个项目，现在我需要找出一个算法。

基本上，它应该是这样的：

x（最终输出）从 1 到 50 中随机选择。简单。但是，我希望它根据变量 y 逐渐变得更难获得高点。检查下面的示例以了解我的意思。

示例（最终输出是 x）：X = 2 而 y 是 1。X = 2 而 y 是 1。X = 5 而 y 是 2。X = 9 而 y 是 6。X = 12 而 y 是 10。X = 14，而 y 是 15。

看看我在哪里？它逐渐变得更难。我确信这并不复杂，但我无法弄清楚。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T05:09:01.740

在伪代码中：

```
Return MIN(rand(1,50), rand(1,50); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T02:41:48.587

这是非均匀分布的一个很好的 Java 示例。看看这个[链接](https://stackoverflow.com/questions/5969447/java-random-integer-with-non-uniform-distribution)

# javascript - 每次使用jQuery查看某个元素时如何做某事？

> ID：10059391
> 
> 赞同：2
> 
> 时间：2012-04-08T00:05:52.807
> 
> 标签：javascript, jquery

现在每次用户到达我的页面底部时，我都会使用以下代码更新 url 哈希：

```
var new_page_value = 1;
$(window).scroll(function() {
    if($(window).scrollTop() == $(document).height() - $(window).height()) {
        new_page_value += 1;
        window.location.hash = 'page-' + new_page_value;
    }
}); 
```

当用户在下面的代码中使用类“page”滚动过去任何 div 时，我该如何做同样的事情？例如，如果用户滚动查看第一个，则哈希应更新为#page-1，但一旦他们滚动查看第二个，哈希应更新为#page-2，依此类推。如果他们滚动回第一个，哈希应该再次更新为#page-1。基本上，哈希应该根据视图中的任何 div 进行更新。

```
<div class="page" data-page-num="1"></div>

<br /><br /><br /><br /><br /><br /><br /><br /><br />

<div class="page" data-page-num="2"></div>

<br /><br /><br /><br /><br /><br /><br /><br /><br />

<div class="page" data-page-num="3"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T00:30:53.893

此代码可能会有所帮助，但在客户端可能有点密集。

```
var new_page_value = 1;
$(window).scroll(function() {
    $(".page").each(function() {
        var position = $(this).position();
        if($(window).scrollTop() == position.top) {
            new_page_value += 1;
            window.location.hash = 'page-' + new_page_value;
        }
    });

    if($(window).scrollTop() == $(document).height() - $(window).height()) {
        new_page_value += 1;
        window.location.hash = 'page-' + new_page_value;
    }
}); 
```

# ruby-on-rails - Rails 3.2.2 + jquery mobile：方法：删除不起作用

> ID：10059392
> 
> 赞同：2
> 
> 时间：2012-04-08T00:05:59.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery-mobile

我正在为我的控制器使用标准脚手架：

```
# DELETE /addresses/1
# DELETE /addresses/1.json
def destroy
  @address = Address.find(params[:id])
  @address.destroy

  respond_to do |format|
    format.html { redirect_to addresses_url }
    format.json { head :no_content }
  end
end 
```

我的应用程序布局文件：

```
<!DOCTYPE html>
<html>
<head>
    <title>DemoRailsApp</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>

    <%= csrf_meta_tags %>
</head>
<body>
  <div data-role="page" data-theme="a" data-fullscreen="true">
    <%= yield %>
  </div> 
```

index.html.erb

```
<div data-role='header'>
<h1>Addreses</h1>
<%= link_to "Add" , new_address_path, "data-icon"=> "plus" , "class" => "ui-btn-right" %>
</div>

<div class="content" data-role="content">
<ul data-role="listview">
    <% @addresses.each do |address| %> 
    <li>
        <%= link_to address.address1, edit_address_path(address) %>
        <%= link_to 'Destroy', address, confirm: 'Are you sure?', method: :delete, "data-icon" => "delete" %>
    </li>
    <% end %>
</ul>
</div>
</body>
</html> 
```

当我单击删除链接时，将显示显示视图，而不是确认或删除。很困惑。

***Edit2：*** 我将 <%= javascript_include_tag 'application' %> 添加到了我的 application.html.erb 文件中，记录已被删除，但现在加载页面时出现错误，以及来自服务器的以下内容：

```
Started DELETE "/addresses/3" for 127.0.0.1 at 2012-04-08 19:32:41 -0500
Processing by AddressesController#destroy as JS
  Parameters: {"id"=>"3"}
  Address Load (6.8ms)  SELECT "addresses".* FROM "addresses" WHERE "addresses"."id" = ?   LIMIT 1  [["id", "3"]]
   (0.2ms)  begin transaction
  SQL (57.5ms)  DELETE FROM "addresses" WHERE "addresses"."id" = ?  [["id", 3]]
       (24.6ms)  commit transaction
Redirected to http://localhost:3000/addresses
Completed 302 Found in 108ms (ActiveRecord: 89.1ms)

Started GET "/addresses/3" for 127.0.0.1 at 2012-04-08 19:32:41 -0500
Processing by AddressesController#show as HTML
  Parameters: {"id"=>"3"}
  Address Load (0.1ms)  SELECT "addresses".* FROM "addresses" WHERE "addresses"."id" = ?     LIMIT 1  [["id", "3"]]
Completed 500 Internal Server Error in 2ms

ActiveRecord::RecordNotFound (Couldn't find Address with id=3):
  app/controllers/addresses_controller.rb:16:in `show'

  Rendered /Users/<username>/.rvm/gems/ruby-1.9.3-preview1@railsnexttutorial/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.4ms)
  Rendered /Users/<username>/.rvm/gems/ruby-1.9.3-preview1@railsnexttutorial/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/<username>/.rvm/gems/ruby-1.9.3-preview1@railsnexttutorial/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (16.8ms)

Started DELETE "/addresses" for 127.0.0.1 at 2012-04-08 19:32:42 -0500

ActionController::RoutingError (No route matches [DELETE] "/addresses"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /Users/<username>/.rvm/rubies/ruby-1.9.3-   preview1/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/<username>/.rvm/rubies/ruby-1.9.3-preview1/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/<username>/.rvm/rubies/ruby-1.9.3-preview1/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

  Rendered /Users/<username>/.rvm/gems/ruby-1.9.3-preview1@railsnexttutorial/gems/actionpack- 3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms) 
```

***编辑：*** 这是来自服务器的响应。我以为删除是删除而不是获取？

```
Started GET "/addresses" for 127.0.0.1 at 2012-04-07 21:26:13 -0500
Processing by AddressesController#index as HTML
  Address Load (0.9ms)  SELECT "addresses".* FROM "addresses" 
  Rendered addresses/index.html.erb within layouts/application (8.7ms)
Completed 200 OK in 47ms (Views: 22.2ms | ActiveRecord: 0.9ms)
[2012-04-07 21:26:14] WARN  Could not determine content-length of response body. Set     content-length of the response or set Response#chunked = true

Started GET "/addresses/1" for 127.0.0.1 at 2012-04-07 21:26:16 -0500
Processing by AddressesController#show as HTML
  Parameters: {"id"=>"1"}
  Address Load (0.3ms)  SELECT "addresses".* FROM "addresses" WHERE "addresses"."id" = ?      LIMIT 1  [["id", "1"]]
  Rendered addresses/show.html.erb within layouts/application (2.4ms)
Completed 200 OK in 7ms (Views: 4.6ms | ActiveRecord: 0.3ms)
[2012-04-07 21:26:16] WARN  Could not determine content-length of response body. Set    content-length of the response or set Response#chunked = true 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T09:32:51.997

我有一个类似的问题。我的解决方案是：

1-确保 application.js 包含以下内容

```
//= require jquery
//= require jquery_ujs 
```

2-确保 application.js 包含在我的应用程序布局中

```
= javascript_include_tag 'application' 
```

3-删除旧版本的 JQuery 我也包括在我的应用程序布局中（这个让我有点困惑）

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:13:12.323

设置`confirm`或`delete`仅设置一些 data-* 属性。您可以在页面上使用一些 Javascript 来使用这些属性来创建所需的行为。没有任何 javascript 它只是一个普通的旧链接。

[jquery-ujs](https://github.com/rails/jquery-ujs)库提供了这个。

# java - 我无法将元素添加到列表中？不支持的操作异常

> ID：10059395
> 
> 赞同：21
> 
> 时间：2012-04-08T00:06:26.700
> 
> 标签：java, list, object, add, abstract

这个列表对象正在咬我的屁股..

每当我尝试向其中添加元素时，它都会产生以下结果：

```
Caused by: java.lang.UnsupportedOperationException
        at java.util.AbstractList.add(AbstractList.java:148)
        at java.util.AbstractList.add(AbstractList.java:108) 
```

产生错误的行无关紧要，但无论如何：

```
AdventureLobbies.players.add(args[0].toLowerCase()); 
```

我不应该静态访问它吗？

变量的实际声明：

`AdventureLobbies.players = Arrays.asList(rs.getString("players").toLowerCase().split(","));`

有任何想法吗？在谷歌上找不到任何有价值的东西。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-08T00:18:06.077

Arrays.asList() 会给你一个不可修改的列表，这就是你添加失败的原因。尝试使用以下命令创建列表：

```
AdventureLobbies.players = new ArrayList(Arrays.asList(rs.getString("players").toLowerCase().split(","))); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T00:19:36.703

java 文档说 `asList` `@SafeVarargs` `public static <T> List<T> asList(T... a)` “返回由指定数组支持的固定大小的列表”

您的列表是固定大小的，这意味着它不能增长或缩小，因此当您调用 add 时，它会引发不受支持的操作异常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T00:26:12.313

此异常非常熟悉根据 java 语言规则访问不允许访问的对象，例如访问不可变对象，因此请以以下方式实例化它：

```
AdventureLobbies.players = new ArrayList(Arrays.
asList(rs.getString("players").toLowerCase().split(","))); // Perfectly done 
```

# php - 有阵列的业余爱好者

> ID：10059398
> 
> 赞同：0
> 
> 时间：2012-04-08T00:07:07.537
> 
> 标签：php, arrays, string

所以可以说我有一个这样的字符串。

```
$pizza = 1,2,3,5-4,7; 
```

我想从中得到的是5-7，但5-7可以是任何组合，比如6-9或10-1，这会发生多次。

如

```
$pizza=1-4,2,3-1,5-4,7; 
```

然后我得到了使用帮助

```
preg_match_all("/(\d\-\d)/", $pizza, $return); 
```

这给了我这个

```
print_r($return);

Array ( [0] => Array ( [0] => 5-7 ) [1] => Array ( [0] => 5-7 ) ) 
```

那么我如何获得该值（5-7）并将其分配给一个变量，例如`$slice`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T23:37:07.627

您应该已经知道[preg_match_all](http://www.php.net/preg_match_all)的概要。

第三个参数是一个数组，其中包含在您的文本中找到的所有匹配项（第二个参数）。

它是一个包含一组不同数组的数组：第一个包含所有匹配的模式。其他的是子模式的匹配。我不是来写一篇关于正则表达式的文章，那么我会假设你知道它们（刷新：子模式是用括号括起来的那些东西，在你的情况下，它是非常没用的）。

```
$pizza='1-4,2,3-1,5-4,7';
preg_match_all("/\d\-\d/", $pizza, $return);
var_dump($return); 
```

将产生类似的、不那么令人困惑的结果（正则表达式中没有括号）。

```
array
  0 => 
    array
      0 => string '1-4' (length=3)
      1 => string '3-1' (length=3)
      2 => string '5-4' (length=3) 
```

如果您发现 print_r 格式更容易：

```
Array ([0]=>Array([0]=>1-4 [1]=>3-1 [2]=>5-4)) 
```

要一次使用一个元素，您可以使用[foreach](http://www.php.net/manual/en/control-structures.foreach.php)控制结构。

进行练习的代码应与此类似：

```
foreach ($return[0] as $slice) {
    <do whatever you need with $slice >
} 
```

大括号中的代码将与数组 $return[0]（具有匹配切片的数组）中的元素一样多次运行，并且 $slice 将假定不同运行中不同元素的值。

希望这能解决你的疑惑。

说我会使用不同的方法来解决您的任务：

```
$pizza='1-4,2,3-1,5-4,7';
$return = array_filter(
    explode(',',$pizza), // turn the string into an array
    function($x){return strpos($x,'-');} // filter out the slices without a -
);

foreach ($return as $slice) { // NOTE: no $return[0]
    <do whatever you need with $slice >
} 
```

但这只是个人喜好问题，因为只需操纵这么少的数据量，性能上的差异就可以忽略不计。

# html - 是否应该使用表格来表示日历？为什么 Google 日历只使用表格作为列？

> ID：10059400
> 
> 赞同：8
> 
> 时间：2012-04-08T00:07:56.013
> 
> 标签：html, css, calendar, html-table

> 这不是另一个通用的“用于一般布局的表格与 div 元素”类型的问题，例如[“为什么不使用表格进行布局”](https://stackoverflow.com/questions/83073/why-not-use-tables-for-layout-in-html)问题。

* * *

我正在做一个时间表/日历项目，我一直认为日历是何时使用表格的一个例子。虽然，在快速浏览 Google 日历的结构后，它似乎由一个表组成，其中包含一个`<td>`用于每一列的表，并且在每一列内，一个事件是一个`<div>`带有定义列表的内部。

### 为什么这是有益的？

我自己的想法：

*   当有多个不同长度的事件同时开始时（从相同的开始`<td>`），表格的样式可能会更麻烦，也更紧凑。可能出现不需要的空白。
*   当用户在页面加载后添加事件时更难更新表格，*例如使用 JavaScript*（因为表格标题的行/列跨度可能必须更改）
*   如果使用表格，将自动匹配 x 轴/顶部标题和单元格的宽度，以及 y 轴/左侧标题和单元格的高度。没有桌子可能很难管理这个。

这有什么关系吗？表格数据是否应该*始终*存储在实际表中？

* * *

以下是Google 日历列的*简化示例：*

```
<td> <!-- column -->
        <div> <!-- start event -->
            <dl>
                <dt>START TIME – END TIME </dt>
                <dd>EVENT TITLE</dd>
            </dl>
        </div> <!-- end event -->
</td> <!-- end column --> 
```

下面是一个完整的例子：

```
<td class="tg-col"> <!-- column td -->
    <div id="tgCol0" class="tg-col-eventwrapper" style="height:1008px;margin-bottom:-1008px;"> <!-- column div -->
        <div class="tg-gutter">
            <div class="ca-evp130 chip " style="top:588px;left:-1px;width:100%;"> <!-- start event div -->
                <dl class="cbrd" style="height:35px;border-color:#9FC6E7;background-color:#E4EFF8;color:#777777;">
                    <dt style="background-color:;">START TIME – END TIME <i class="cic cic-dm  cic-rcr" title="Recurring event">&nbsp;</i></dt>
                    <dd><span class="evt-lk ca-elp130">EVENT TITLE</span></dd>
                    <div><!-- start masks -->
                        <div class="mask mask-top" style="border-color:#9FC6E7;background-color:#E4EFF8;">&nbsp;</div>
                        <div class="mask mask-bottom" style="border-color:#9FC6E7;background-color:#E4EFF8;">&nbsp;</div>
                        <div class="mask mask-left" style="height:38px;border-color:#9FC6E7;background-color:#E4EFF8;">&nbsp;</div>
                        <div class="mask mask-right" style="height:38px;border-color:#9FC6E7;background-color:#E4EFF8;">&nbsp;</div>
                    </div><!-- end masks -->
                    <div class="resizer"> <!-- start resizer -->
                        <div class="rszr-icon">&nbsp;</div>
                    </div> <!-- end resizer -->
                </dl>
            </div> <!-- end event div -->
        </div> 
    </div> <!-- end column td -->
    <div id="tgOver0" class="tg-col-overlaywrapper"></div> <!-- column overlay div -->
</td> <!-- end column td --> 
```

* * *

### 编辑：

不要忘记说明为什么 Google 日历的结构是这样的，例如为什么 Google 日历有一个表格但只将它用于列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:51:25.387

我认为使用表格显示日历有两个主要原因：

1.  具有可变高度单元格的行在表格中更简单，尽管可以使用浮动和 clearfixes 完成相同的事情。表格方法更可能不会破坏（并且肯定与古老的浏览器更兼容），并且对于浏览器渲染可能更有效。
2.  使用 CSS 很难管理多日事件的流程，但通过使用 colspan 非常简单（即使它确实产生了相对可怕和非语义的标记）。

（我在 StackOverflow 上的其他地方问了一个问题，想知道是否有一种相当健壮和优雅的方法可以在没有表格的情况下实现这些目标。请参阅：[HTML markup for multi-day calendar events](https://stackoverflow.com/questions/11441514/html-markup-for-multi-day-calendar-events)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T00:29:16.373

就个人而言，我会选择 div 而不是表格。这并不是说表格是完全错误的，只是 div 在样式方面可以更加灵活，特别是如果您要添加其他元素（例如可能跨越 2 个日期的会议）等。

与表格相比，Div's 还有助于实现流畅的布局。

它既是表格数据又不是表格数据，我想这取决于您对其功能和布局的了解程度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T00:24:05.333

亚当，这是一个很棒的问题。

我认为日历实际上是表格的完美用途。你是对的，在大多数意义上，表格更难设计，但当你考虑真正的问题时，它就是你喜欢的。当然，从技术上讲，您可以使用表格而不是 div 构建许多现代网站，这确实很困难，但是任何事情都有时间和地点。在我看来，它归结为偏好，如果你可以用更少的标记编写一些东西，那么这就是你应该使用的......即使按照现代标准它被认为是*不好的做法*。

我的投票是像日历一样方正且不变的东西……如果这是更便宜的解决方案，请使用桌子。

# python - 球拍程序和python程序之间的通信 - 2

> ID：10059401
> 
> 赞同：0
> 
> 时间：2012-04-08T00:08:07.937
> 
> 标签：python, racket

这是我上一篇文章的延续。

[球拍程序和python程序之间的通信](https://stackoverflow.com/questions/9989009/communcation-between-racket-program-and-python-program)

如果我尝试将其保持在不断写入和读取的循环中，则它不再起作用。

*我的球拍代码：*

```
#lang racket 

(define-values (sp i o e)
  (subprocess #f #f #f "C:/Python26/python.exe" "C:/Python26/hello.py")) 

(define counter 40) 

(let loop () 
  (display "play\n" o)     
  (flush-output o)     
  (display (read-line i)) 
  (when (> counter 0) (loop))) 
```

*我的python代码：hello.py*

```
while 1: 
    input_var = raw_input() 
    print "you entered\n" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:09:16.633

Python 方面的代码可能不会刷新：您很可能再次遇到缓冲问题。尝试使用`-u`标志运行 python 以在 Python 端强制无缓冲的输出流。

[如何刷新 Python 打印输出](https://stackoverflow.com/questions/230751/how-to-flush-output-of-python-print)的答案？和[禁用输出缓冲](https://stackoverflow.com/questions/107705/python-output-buffering)也可能是相关的。

# .net - 自 0001 年 1 月 1 日以来，如何将日/月/年日期转换为 .NET 样式的 100ns 刻度？

> ID：10059402
> 
> 赞同：1
> 
> 时间：2012-04-08T00:09:31.470
> 
> 标签：.net, c, date, time, embedded

我正在开发一个嵌入式项目，需要将 DDMMYY 日期和 HHMMSSmmm 时间转换为[自 0001 年 1 月 1 日以来的 .NET 样式 100ns 滴答声。](http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx)

我将值分解为年、月、日、小时、秒、分钟、毫秒，如下所示：

```
//DDMMYY
year = Date.Val % 100 + 2000;//Year
month = (Date.Val / 100) % 100;//JAN = 1, FEB = 2, etc
day = (Date.Val / 10000) % 100;//day of the month
//HHMMSSmmm
millisecond =   (UTCTime.Val % 1000);
second =        (UTCTime.Val / 1000) % 100;
minute =        (UTCTime.Val / 100000) % 100;
hour =          (UTCTime.Val / 10000000) % 100; 
```

我现在需要的是一种获取这些值并执行与此等效的嵌入式 C 的方法：

```
DateTime date = new DateTime(2012, 4, 7, 7, 5, 23, 205);
long ticks1 = date.Ticks; 
```

*编辑*
我正在研究 PIC32 微控制器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T00:22:43.023

使用 POSIX 指定的公式计算自*正确*纪元以来的秒数，然后将其调整为正确纪元和“.NET 纪元”之间的秒数，缩放并添加 100-ns-tick 组件。

```
 tm_sec + tm_min*60 + tm_hour*3600 + tm_yday*86400 +
    (tm_year-70)*31536000 + ((tm_year-69)/4)*86400 -
    ((tm_year-1)/100)*86400 + ((tm_year+299)/400)*86400 
```

来源： http: [//pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_15](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_15)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T00:17:24.853

我认为您可以使用[mktime](http://linux.die.net/man/3/mktime)仅使用标准 C 来做到这一点。首先，将您的值放入`struct tm`：

```
struct tm {
    int tm_sec;         /* seconds */
    int tm_min;         /* minutes */
    int tm_hour;        /* hours */
    int tm_mday;        /* day of the month */
    int tm_mon;         /* month */
    int tm_year;        /* year */
    int tm_wday;        /* day of the week */
    int tm_yday;        /* day in the year */
    int tm_isdst;       /* daylight saving time */
}; 
```

您可以忽略 wday 和 yday，但应将 isdst 设置为 -1（有关详细信息，请阅读手册页）。然后，调用`mktime()`它将为您提供自 1970 年以来的秒数。然后，使用任何必要的方法，例如简单的一次性 C# 程序，计算出 Microsoft 纪元和 Unix 纪元之间的秒数。这是一个不可变的值，您应该将其硬编码到您的 C 程序中。将其添加到 mktime 的结果中，乘以将秒转换为滴答声，然后添加毫秒部分。

# c# - 删除重复的短语

> ID：10059411
> 
> 赞同：1
> 
> 时间：2012-04-08T00:11:09.343
> 
> 标签：c#

我正在寻找从任何给定字符串中删除重复的短语。

例子：

```
My_First_Post_My_First_Post.htm 
```

那里会有两次“My_First_Post”这个短语，因此变成：

```
My_First_Post_.htm 
```

有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T00:19:20.703

您可以尝试正则表达式-当然要注意效率：

```
Regex re = new Regex(@"(?<m>(.+))(.*?)\k<m>", RegexOptions.Compiled);
string str = "My_First_Post_My_First_Post.htm";

re.Replace(str, "$1$2"); // My_First_Post_.htm 
```

它删除了第一个最长的重复序列。要使其至少包含 10 个字符，例如，将第一组更改为：

```
(?<m>(.{10,})) 
```

要将字符之间的距离限制为 2，例如，将第二组更改为：

```
(.{,2}?) 
```

对于 1 个字符，只需输入`(.??)`.

# ios - IOS；是否可以将动画图标设置为 UITabController 图标？

> ID：10059424
> 
> 赞同：0
> 
> 时间：2012-04-08T00:14:13.997
> 
> 标签：ios, animation, icons, uitabbar

我正在尝试找出一种向我的应用程序添加“忙碌”动画的好方法。

由于它是一个如此无模式的应用程序，我不希望动画过于突兀，但我认为顶部栏中的动画太容易错过。

我想在我的应用程序的 UTIabBar 中设置一个动画，指示该选项卡的视图控制器正忙。

我花了很多时间生成动画（我使用 Adob​​e Illustrator 或 3D 建模器，这可能是一项艰巨的任务）。

UITabController 对图标做了一些时髦的效果，我想知道它是否会在动画 UIView 上呕吐。

有人做过吗？是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T00:22:01.340

作为一个 UITabBar，这实际上是不可能的，并且无论如何都会导致非常恶心的 UI 体验。

如果您将巧妙的动画控件用作更一般的华丽 UI 的一部分，它*可能会更好地工作 - 但要小心行事 - 旨在清晰而不是浮华。*

# lua - 如何在 Lua 中用一个单词替换多个符号？

> ID：10059427
> 
> 赞同：2
> 
> 时间：2012-04-08T00:14:39.137
> 
> 标签：lua, replace

我必须将所有这些字符“①②③④⑤⑥⑦⑧⑨⑩”替换为“\item”。

我用过这段代码：

```
 stra = string.gsub(text, "①", "\\item")
    strb = string.gsub(stra, "②", "\\item")
    strc = string.gsub(strb, "③", "\\item")
    strd = string.gsub(strc, "④", "\\item")
    stre = string.gsub(strd, "⑤", "\\item") 
```

但是，这非常冗长。有没有更简单的方法来替换所有这些项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T06:52:06.557

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T00:20:33.557

使用教程中描述的“集合”：http: [//lua-users.org/wiki/PatternsTutorial](http://lua-users.org/wiki/PatternsTutorial)

```
string.gsub(text, "[①②③④⑤⑥⑦⑧⑨⑩]", "\\item") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T01:51:27.380

> 有没有更简单的方法来替换所有这些项目？

并非没有一个知道 UTF-8 是什么的 Lua 模式匹配库。Lua 不支持 Unicode；它不知道如何搜索 Unicode 符号。

如果您使用一些非多字节编码，那么 John 建议的可能会起作用。但如果它是 UTF-8，则不是。

对于您的具体情况，您总是可以这样做：

```
local symbolsToChange { "①", "②", ...}

for i, sym in ipairs(symbolsToChange) do
  string.gsub(text, sym, "\\item")
end 
```

# iphone - 我需要将背景音乐添加到我的应用程序的 Mainview

> ID：10059428
> 
> 赞同：0
> 
> 时间：2012-04-08T00:14:40.243
> 
> 标签：iphone, ios, ios5

我的应用程序有 2 个视图，我只想在应用程序的主视图上播放背景声音。因此，当应用程序启动时，它应该播放声音，直到用户退出应用程序或用户进入应用程序中的第二个视图。当用户返回主视图时，应该再次播放声音。目前，我正在调用一个子函数，它在“viewDidLoad”函数中播放声音。但它仅在首次启动时播放音乐。当我退出应用程序时它会停止，但当我再次打开应用程序时它不会播放音乐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T00:40:35.060

尝试使用以下方法

通知视图控制器其视图即将添加到视图层次结构中。

```
- (void)viewWillAppear:(BOOL)animated; 
```

通知视图控制器其视图即将从视图层次结构中删除。

```
- (void)viewWillDisappear:(BOOL)animated; 
```

# python - 使用 xml.dom.minidom 中的 getElementsByTagName

> ID：10059434
> 
> 赞同：1
> 
> 时间：2012-04-08T00:15:57.517
> 
> 标签：python, xml

我正在阅读来自 PyCon 2010 的 Asheesh Laroia 的“Scrape the Web”演示文稿，我对这一行的特定代码行有疑问：

```
title_element = parsed.getElementsByTagName('title')[0] 
```

从功能：

```
def main(filename):
    #Parse the file
    parsed = xml.dom.minidom.parse(open(filename))
    # Get title element
    title_element = parsed.getElementsByTagName('title')[0]
    # Print just the text underneath it
    print title_element.firstChild.wholeText 
```

我不知道该行末尾的“[0]”在执行什么角色。'xml.dom.minidom.parse' 是否将输入解析为列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T00:22:50.193

`parse()`不返回列表；`getElementsByTagName()`做。您要求所有带有标签的元素`<title>`。大多数标签可以在一个文档中出现多次，所以当你要求这些元素时，你会得到不止一个。返回它们的明显方法是作为列表或元组。

在这种情况下，您希望`<title>`文档中只有一个标签，因此您只需获取列表中的第一个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T00:20:07.520

该方法的 ( `getElementsByTagName`) 文档说：

> 搜索具有特定元素类型名称的所有后代（直接子代、子代的子代等）。

既然它提到了“**所有**后代”，那么是的，它返回一个列表，该代码只是索引以查看第一个元素。

查看此方法的代码（在 中`Lib/xml/dom/minidom.py`）——它确实返回了一个列表。

# java - 画布中的网格，最后一个单元格的大小与其他单元格的大小不同

> ID：10059435
> 
> 赞同：1
> 
> 时间：2012-04-08T00:16:53.310
> 
> 标签：java, canvas, grid

如何用相同大小的网格绘制画布？问题：[http](http://tinypic.com/r/idvc0j/5) ://tinypic.com/r/idvc0j/5 代码绘制了最后一个单元格，其大小与其他单元格不平行。我必须在paint() 方法中做些什么改变？

```
import java.awt.*;
import javax.swing.*;

public class Grid extends Canvas{

    Cell[][] maze;
    int rows;
    int cols;

    Grid(int rows, int cols) {
        this.rows = rows;
        this.cols = cols;
        maze = new Cell[rows][cols];
    }

    public static void main(String[] args){
        JFrame f = new JFrame("Sample");
        Grid x = new Grid(25,25);
        f.add(x);
        f.pack();
        f.setVisible(true);
        f.setSize(600,600);
        f.setResizable(false);
        f.setLocationRelativeTo(null);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public void paint(Graphics g) {
    int k;
    int width = getSize().width;
    int height = getSize().height;

    int htOfRow = height / (rows);
    for (k = 0; k < rows; k++)
        g.drawLine(0, k * htOfRow , width, k * htOfRow );

    int wdOfRow = width / (cols);
    for (k = 0; k < cols; k++)
        g.drawLine(k*wdOfRow , 0, k*wdOfRow , height);
    }
}

class Cell {

//  private final static int NORTH = 0;
//  private final static int EAST = 1;
//  private final static int WEST = 2;
//  private final static int SOUTH = 3;
//  private final static int NO = 0;
//  private final static int START = 1;
//  private final static int END = 2;
//  boolean[] wall = new boolean[4];
//  boolean[] border = new boolean[4];
//  boolean[] backtrack = new boolean[4];
//  boolean[] solution = new boolean[4];
//  private boolean isVisited = false;
//  private boolean isCurrent = false;
//  private int Key = 0;
//  
//  public Cell(){
//  for(int i=0;i<4;i++){wall[i] = true;}
//  }
//  public void setStart(int i){Key = i;}   
//  public int getKey(){return Key;}
//  public boolean checkVisit(){return isVisited;}
//  public void stepIn(){
//      isCurrent = true;
//      isVisited = true;
//  }
//  public void stepOut(){isCurrent = false;}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T04:31:15.797

You are rounding too early. `htOfRow` and `wdOfRow` are not exact `int` values. By casting them to `int` you let small errors accumulate over the span of the whole grid.

Instead, keep them as `double`, multiply them by `k` and only then cast them back to `int`.

For example:

If `width = 100` and `cols = 8` then `wdOfRow = 12.5`.

If you cast it to an `int` before multiplying by `k` when `k=8` then you place your last line at `12*8=96`.

If you multiply as `double` then cast to `int`, your last line will be at `12.5*8 = 100`

Here's the fixed code:

```
import java.awt.Canvas;
import java.awt.Graphics;
import java.awt.Rectangle;

import javax.swing.JFrame;

public class Layout
{
    public static void main( String[] args )
    {
        JFrame f = new JFrame( "Sample" );
        Grid x = new Grid( 50, 50 );
        f.add( x );
        f.pack( );
        f.setVisible( true );
        f.setSize( 600, 600 );
        f.setResizable( false );
        f.setLocationRelativeTo( null );
        f.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
    }

    static class Cell
    {

    }

    public static class Grid extends Canvas
    {

        Cell[][] maze;
        int rows;
        int cols;

        Grid( int rows, int cols )
        {
            this.rows = rows;
            this.cols = cols;
            maze = new Cell[rows][cols];
        }

        public void paint( Graphics g )
        {
            int k;

            double width = getSize( ).width;
            double height = getSize( ).height;

            double htOfRow = height / ( rows );
            for ( k = 0; k < rows; k++ )
                g.drawLine( 0, ( int ) ( k * htOfRow ), ( int ) width, ( int ) ( k * htOfRow ) );

            double wdOfRow = width / ( cols );
            for ( k = 0; k < cols; k++ )
                g.drawLine( ( int ) ( k * wdOfRow ), 0, ( int ) ( k * wdOfRow ), ( int ) height );
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T01:43:23.523

您需要在每个方向再增加一条线。如果您执行 k <= rows 和 k <= cols，它会按照我认为您想要的方式划分内容。

# iphone - 无法将按钮添加到表格视图工具栏

> ID：10059442
> 
> 赞同：0
> 
> 时间：2012-04-08T00:17:31.977
> 
> 标签：iphone, objective-c, ios, xcode

所以我有一个带有表格视图的根视图。我这样显示工具栏：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    self.navigationController.toolbarHidden = NO;
} 
```

我实现了 setToolbarItems 方法：

```
- (void)setToolbarItems:(NSArray *)toolbarItems animated:(BOOL)animated
{
    UIBarButtonItem *buttonItem;
    buttonItem = [[UIBarButtonItem alloc] initWithTitle:@"Hello" style:UIBarButtonItemStyleDone target:self action:@selector(goBack:)];
    self.navigationController.toolbarItems = [ NSArray arrayWithObject: buttonItem ];
} 
```

结果是一个空的工具栏。为什么？

![在此处输入图像描述](../Images/8e00331a21fc651fdeac3e0a3808f91a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T00:26:08.630

从文档：

> toolbarItems 与视图控制器关联的工具栏项。
> 
> @property(nonatomic, retain) NSArray *toolbarItems Discussion 此属性包含 UIBarButtonItem 对象的数组，并与 UINavigationController 对象结合使用。如果此视图控制器 > 嵌入在导航控制器界面中，并且导航 > 控制器显示工具栏，则此属性标识要在 > 该工具栏中显示的项目。
> 
> 您可以显式设置此属性的值或使用 >setToolbarItems:animated: 方法对可见的 >toolbar 项集的更改进行动画处理。

换句话说，尝试通过实际的视图控制器访问它，而不是像这样的导航控制器：

```
self.toolbarItems = [ NSArray arrayWithObject: buttonItem ]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T00:29:40.393

但是谁调用你的 setToolbarItems 实现呢？

您应该在自己的视图上*调用*setToolbarItems，而不是重新实现它。然后，NavigationController 会在实例变量中找到它们并渲染它们。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    self.navigationController.toolbarHidden = NO;

    UIBarButtonItem *buttonItem;
    buttonItem = [[UIBarButtonItem alloc] initWithTitle:@"Hello" style:UIBarButtonItemStyleDone target:self action:@selector(goBack:)];
    [self setToolbarItems: [ NSArray arrayWithObject: buttonItem ]];
} 
```

# image - ExtJS 4：如何自动缩放图像？（没有剪辑）

> ID：10059449
> 
> 赞同：3
> 
> 时间：2012-04-08T00:19:13.697
> 
> 标签：image, extjs, extjs4, scale, image-size

我在 ExtJS 中有一个图像组件，它通过这样的 URL 加载图像：

```
 {
            xtype: 'image',
            width: 200,
            height: 200,
            src: 'http://www.asien-news.de/wp-content/uploads/new-york.jpg'
        }, 
```

图像以 100% 显示。显示 200x200 像素，其余部分被剪裁。我没有找到任何允许缩放的属性。

在 ExtJS 中实现图像大小调整的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T13:35:11.123

有点晚了......但我认为这是你想要的，我碰巧使用图像作为面板后面的缩放背景，而不是面板内顶部的图像，但理论是一样的：

```
//here is your view file
Ext.define('This_Is_A_Panel_On_Top_Of_A_Background_Container.view.MyViewport', {
    extend: 'Ext.container.Viewport', //my root view port
    layout: {type: 'fit'},
    initComponent: function() {
        var me = this;
        Ext.applyIf(me, {
            items: [{
                    xtype: 'container', //my background image
                    html: '<img id="imgEl" src="'+Ext.BLANK_IMAGE_URL+'">',
                    layout: {type: 'border'},
                    items: [{
                            xtype: 'panel', //my panel on top of background
                            region: 'center',
                            bodyCls: 'transparent',
                            title: 'My Panel'
                        }]
                }]
        });
        me.callParent(arguments);
    }
}); 
```

请注意，我没有使用图像组件，而是使用了容器。`html: <img ...`并`bodyCls: transparent...`成功了。您可以在处理程序中动态更改图像。像这样的东西：

```
//then say, in afterRender event, in your controller file
var imgEl = Ext.get('imgEl');
Ext.fly(imgEl).setStyle({
    backgroundImage: 'wallpaper.jpg',
    width: '100%',
    height: '100%'
}).show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:58:40.947

你可以使用 xtype:'image' , shrinkWrap:true

请检查 Ext js api [http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Img-cfg-shrinkWrap](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Img-cfg-shrinkWrap)

# mysql - mysql：替换字符串中的\（反斜杠）

> ID：10059450
> 
> 赞同：12
> 
> 时间：2012-04-08T00:19:15.943
> 
> 标签：mysql, replace, backslash

我遇到以下问题：

我有一个表 T 有一个名称列名称。名称具有以下结构：

A\\B\C

您可以像这样在自己身上创建：

```
create table T ( Name varchar(10));

insert into T values ('A\\\\B\\C');

select * from T; 
```

现在，如果我这样做：

```
select Name from T where Name = 'A\\B\C'; 
```

这不起作用，我需要转义 \ （反斜杠）：

```
select Name from T where Name = 'A\\\\B\\C'; 
```

美好的。

但是如何自动对字符串名称执行此操作？

像下面这样的东西不会这样做：

```
select replace('A\\B\C', '\\', '\\\\'); 
```

我得到：`A\\\BC`

有什么建议么？

提前谢谢了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T11:25:04.650

您必须使用“**逐字字符串**”。使用该字符串后，您的替换函数将如下所示

```
Replace(@"\", @"\\") 
```

我希望它对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:13:52.563

您将数据库中的内容与您在 SQL 语句中表示该数据的方式混淆了。当数据库中的字符串包含特殊字符`\`时，您必须键入`\\`来表示该字符，因为`\`它是 SQL 语法中的特殊字符。您必须在`INSERT`语句中执行此操作，但您还必须在`REPLACE`函数的参数中执行此操作。数据中实际上从来没有任何双斜杠，它们只是 UI 的一部分。

为什么你认为你需要在 SQL 表达式中加倍斜杠？如果您正在输入查询，则应该在命令行中将斜杠加倍。如果您使用编程语言生成查询，最好的解决方案是使用准备好的语句；API 将负责正确的编码（准备好的语句通常使用处理原始数据的二进制接口）。如果出于某种原因，您需要通过构造字符串来执行查询，那么语言应该希望提供一个函数来转义字符串。例如，在 PHP 中，您将使用`mysqli_real_escape_string`.

但是您不能通过 SQL 本身来做到这一点——如果您尝试将未转义的字符串提供给 SQL，则数据会丢失并且无法重建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T09:59:55.090

使用正则表达式将解决您的问题。

下面的查询将解决给定的示例。

```
 1) S\\D\B

select * from T where Name REGEXP '[A-Z]\\\\\\\\[A-Z]\\\\[A-Z]$'; 
```

如果给定的示例可能有多个字符

```
2) D\\B\ACCC

select * from T where Name REGEXP '[A-Z]{1,5}\\\\\\\\[A-Z]{1,5}\\\\[A-Z]{1,5}$'; 
```

注意：考虑到字段大小为 10，如创建表查询中所述，我使用 5 作为 char 的最大出现次数。

我们仍然可以概括它。如果这仍然没有达到您的期望，请随时寻求我的帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T03:55:29.700

文字`A\\B\C`必须编码为`A\\\\A\\C`，`replace()`需要转义的参数：

```
select 'A\\\\B\\C', replace('A\\\\B\\C', '\\', '\\\\'); 
```

输出（参见[在 SQLFiddle 上运行](http://sqlfiddle.com/#!2/95adb/22)）：

```
A\\B\C         A\\\\B\\C 
```

所以使用replace没有什么意义。这两个语句是等价的：

```
select Name from T where Name = replace('A\\\\B\\C', '\\', '\\\\');
select Name from T where Name =         'A\\\\B\\C'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T11:42:49.037

你可以使用`LIKE`：

```
SELECT NAME FROM T WHERE NAME LIKE '%\\\\%'; 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-04-08T04:02:24.660

不完全确定你的意思，但这应该有效。

```
select replace('A\\B\C', '\', '\\'); 
```

它基本上将替换 \ 遇到的任何地方 \\ :)

这是你想要的吗？

# javascript - 如何使顶部菜单中的下拉菜单无延迟/动画显示？

> ID：10059459
> 
> 赞同：0
> 
> 时间：2012-04-08T00:20:57.613
> 
> 标签：javascript, css, delay, drop-down-menu

我有一个带有下拉菜单的[菜单](http://bit.ly/Hp9AXq)。如何让下拉菜单立即出现，就像在[这个](http://bit.ly/Ie7yZ4)网站上一样？

编辑：我弄清楚了导致延迟的原因：鼠标移动时下拉菜单不会显示，它仅在鼠标停止时显示。因此，如果鼠标从不停止在菜单项上-下拉菜单甚至会更新...

Edit2：看来，该问题仅出现在 Chrome、FF 和 IE 中按预期工作..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T00:51:23.877

问题是浏览器没有加载您的背景图像，因为它最初是隐藏的。延迟是由服务器请求该图像引起的。我会以某种方式预加载它——也许在页面底部添加一个虚拟像素宽度的 div，并将该图像作为背景图像。

# java - 阴影设计器程序帮助在使用此 gui 程序的两种方法时遇到问题

> ID：10059463
> 
> 赞同：-1
> 
> 时间：2012-04-08T00:23:06.223
> 
> 标签：java, swing

阴影设计师

定制窗帘设计师收取每个窗帘 50 美元的基本费用。此外，某些款式、尺码和颜色的收费如下：

这个程序的目的是创建一个应用程序，允许用户从列表或组合框中选择样式、大小、颜色和阴影数量。应显示总费用。

款式：常规色调：加 0 美元 折叠色调：加 10 美元 罗马色调：加 15 美元

尺寸： 25 英寸宽：加 0 美元 27 英寸宽：加 2 美元 32 英寸宽：加 4 美元 40 英寸宽：加 6 美元

颜色： 自然色：加 5 美元 蓝色：加 0 美元 蓝绿色：加 0 美元 红色：加 0 美元 绿色：加 0 美元

我采用了两种方法，但下面的第一个程序代码存在算法问题，它没有将样式、尺寸和颜色选择的额外成本添加到计算总价格中。我不确定它是否是每个添加的选择，例如总费用 = 样式选择 + 尺寸选择 + 颜色选择。我只是不确定如何让它在代码中计算和使用正确的算法。下面的 shadedesigner.java 代码

此代码之后的第二个代码是第二种方法，其中配置面板控制我相信列表或组合框容器和面板操作到 shadedesignerwindow.java。配置面板被假定为 shaddesignerwindow 程序的实现或接口。以下是我到目前为止的内容，但我不确定如何让配置面板按照他们想要的方式使用 shadedesignerwindow。

下面是我为 shadedesigner 程序构建的代码。一切正常且合规，但如果选择了样式、尺寸和颜色，我无法开发正确的算法来将附加选择添加到阴影的总费用中。重新发布更正 2012 年 4 月 8 日编辑的代码如下。

```
 *    Filename: ShadeDesigner.java
 *  Programmer: Jamin A. Bishop
 *  Date: 3/31/2012
 * @version 1.00 2012/4/2
 */
import java.awt.*;
import java.awt.event.*;
import java.text.DecimalFormat;
import javax.swing.*;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

public class ShadeDesigner extends JFrame
{
    private String[] styles = {"Regular Shades", "Folding Shades", "Roman Shades"};
    private String[] size = {"25 Inches Wide", "27 Inches Wide",
                              "32 Inches Wide", "40 Inches Wide"};
    private String[] colors = {"Natural", "Blue", "Teal",
                               "Red", "Green"};
    private JLabel banner;// To display a banner
    private JPanel bannerPanel;// To hold the banner
    private JPanel stylesPanel;// 
    private JPanel sizePanel;// 
    private JPanel colorPanel;
    private JPanel buttonPanel;//

    private JList stylesList;
    private JList sizeList;
    private JList colorList;

    private JTextField Styles;
    private JTextField Size;
    private JTextField Color;

    private JButton calcButton;
    private JButton ExitButton; 

    private double totalCharges = 50.00;

    //Constants
    private final int ROWS = 5;
    private final double regularCost = 0.00;//base price for the blinds
    private final double foldingCost = 10.00;//extra cost for folding blinds
    private final double romanCost = 15.00;//extra cost for roman blinds
    private final double twentyfiveInCost = 0.00; //extra cost for 25" blinds
    private final double twentySevenInCost = 2.00;//extra cost for 27" blinds
    private final double thirtyTwoInCost = 4.00;//extra cost for 32" blinds
    private final double fourtyInCost = 6.00;//extra cost for 40" blinds
    private final double naturalColorCost = 5.00;//extra cost for color

    public ShadeDesigner()
    {
        //display a title
        setTitle("Shade Designer");

        // Specify what happens when the close button is clicked.
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Create the banner on a panel and add it to the North region.
        buildBannerPanel();
        add(bannerPanel, BorderLayout.NORTH);

        stylesPanel();
        add(stylesPanel, BorderLayout.WEST);

        sizePanel();
        add(sizePanel, BorderLayout.CENTER);

        colorPanel();
        add(colorPanel, BorderLayout.EAST);

        buttonPanel();
        add(buttonPanel, BorderLayout.SOUTH);

        pack();
        setVisible(true);
    }

    //build the bannerpanel
    private void buildBannerPanel()
    {
        bannerPanel = new JPanel();
        bannerPanel.setLayout(new FlowLayout(FlowLayout.CENTER));
        banner = new JLabel("Shade Designer");
        banner.setFont(new Font("SanSerif", Font.BOLD, 24));
        bannerPanel.add(banner);
    }

    //stylepanel    
    private void stylesPanel()
    {
        JLabel styleTitle = new JLabel("Select a Style.");
        stylesPanel = new JPanel();
        stylesPanel.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
        stylesList = new JList (styles);
        stylesList.setVisibleRowCount(ROWS);
        JScrollPane stylesScrollPane = new JScrollPane(stylesList);
        stylesList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        stylesList.addListSelectionListener(new stylesListListener());
        stylesPanel.setLayout(new BorderLayout());
        stylesPanel.add(styleTitle, BorderLayout.NORTH);
        stylesPanel.add(stylesScrollPane, BorderLayout.CENTER);
        Styles = new JTextField (5);
        Styles.setEditable(false);
        //stylesPanel.add(StylesLabel, BorderLayout.CENTER);
        stylesPanel.add(Styles, BorderLayout.SOUTH);
    }
    private class stylesListListener implements ListSelectionListener
    {
        public void valueChanged (ListSelectionEvent e)
        {
            String selection = (String) stylesList.getSelectedValue();
            Styles.setText(selection);
        }
    }

    //size panel
    private void sizePanel()
    {
        JLabel sizeTitle = new JLabel("Select a Size.");
        sizePanel = new JPanel();
        sizePanel.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
        sizeList = new JList (size);
        sizeList.setVisibleRowCount(ROWS);
        JScrollPane stylesScrollPane = new JScrollPane(sizeList);
        sizeList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        sizeList.addListSelectionListener(new sizeListListener());
        sizePanel.setLayout(new BorderLayout());
        sizePanel.add(sizeTitle, BorderLayout.NORTH);
        sizePanel.add(stylesScrollPane, BorderLayout.CENTER);
        //sizeLabel = new JLabel("Style Selected: ");
        Size = new JTextField (5);
        Size.setEditable(false);
        //stylesPanel.add(StylesLabel, BorderLayout.CENTER);
        sizePanel.add(Size, BorderLayout.SOUTH);
    }
    private class sizeListListener implements ListSelectionListener
    {
        public void valueChanged (ListSelectionEvent e)
        {
            String selection = (String) sizeList.getSelectedValue();
            Size.setText(selection);
        }
    }

    //color panel
    private void colorPanel()
    {
        JLabel colorTitle = new JLabel("Select a Color.");
        colorPanel = new JPanel();
        colorPanel.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
        colorList = new JList (colors);
        colorList.setVisibleRowCount(ROWS);
        JScrollPane colorScrollPane = new JScrollPane(colorList);
        colorList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        colorList.addListSelectionListener(new colorListListener());
        colorPanel.setLayout(new BorderLayout());
        colorPanel.add(colorTitle, BorderLayout.NORTH);
        colorPanel.add(colorScrollPane, BorderLayout.CENTER);
        //sizeLabel = new JLabel("Style Selected: ");
        Color = new JTextField (5);
        Color.setEditable(false);
        //stylesPanel.add(StylesLabel, BorderLayout.CENTER);
        colorPanel.add(Color, BorderLayout.SOUTH);
    }
    private class colorListListener implements ListSelectionListener
    {
        public void valueChanged (ListSelectionEvent e)
        {
            String selection = (String) colorList.getSelectedValue();
            Color.setText(selection);
        }
    }

    //button panel
    private void buttonPanel()
    {
        calcButton= new JButton ("Calculate Charges");
        calcButton.addActionListener(new calcButtonListener());
        ExitButton = new JButton ("Exit");
        ExitButton.addActionListener(new ExitButtonListener());
        buttonPanel = new JPanel();
        buttonPanel.add(calcButton);
        buttonPanel.add(ExitButton);    
    }

    private class calcButtonListener implements  ActionListener
    {
        //actionPerformed method parementer e an actionevent object

    public void actionPerformed(ActionEvent e)
    {
             // Create a DecimalFormat object.
             DecimalFormat dollar = new DecimalFormat("#,##0.00");

             // Display the total.
             JOptionPane.showMessageDialog(null, "TotalCharges: $" +
                                                 dollar.format(totalCharges));
          }
       }

       private class ExitButtonListener implements  ActionListener
       {
            public void actionPerformed(ActionEvent e)
            {
                //Exit the applicaiton
                System.exit(0);
            }
       }

    //static void main for the string
    public static void main(String[] args)
       {
          new ShadeDesigner();
       } 
```

}

```
*   File Name: ConfigPanel.java
 *  Date: 3/26/2012
 *  Programmer: Jamin A. Bishop 
 * @version 1.00 2012/3/22
 */
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.text.DecimalFormat;

class ConfigPanel extends JPanel
{
    private JLabel SelectStyleLabel;
    private JLabel SelectSizeLabel;
    private JLabel SelectColorLabel;
    private JPanel StylePricePanel;
    private JPanel SizePricePanel;
    private JPanel ColorPricePanel;
    private JComboBox SelectStyleBox;
    private JComboBox SelectSizeBox;
    private JComboBox SelectColorBox;

    private final int ROWS = 5;
    private final int RegShadeadd = 0.00;
    private final int FoldShadeadd = 10.00;
    private final int RomanShadeadd = 15.00;
    private final int 25inchadd = 0.00;
    private final int 27inchadd = 2.00;
    private final int 32inchadd = 4.00;
    private final int 40inchadd = 6.00;
    private final int Naturaladd = 5.00;
    private final int Blueadd = 0.00;
    private final int Tealadd = 0.00;
    private final int Redadd = 0.00;
    private final int Greenadd = 0.00;

    //create the arrays to hold the values of the combo box's
    private String[] StylePrice = {"Regular Shades", "Folding Shades", "Roman Shades"};
    private String[] SizePrice = {"25 inches Wide", "27 inches Wide", "32 inches Wide", "40 inches Wide"};
    private String[] ColorPrice = {"Nature", "Blue", "Teal", "Red", "Green"};

    // constructor
    public ConfigPanel ()
    {
        //build the panel
        buildStylePricePanel();
        buildSizePricePanel();
        buildColorPricePanel();

        //add the panel to the content pane
        add(StylePricePanel, BorderLayout.WEST);
        add(SizePricePanel, BorderLayout.CENTER);
        add(ColorPricePanel, BorderLayout.EAST);

    }

    //methods to hold the strings
    public double getStylePrice ()
    {
        String selection = (String) StylePrice.getName(StylePrice);
        StylePrice.setText(selection);
    }

    public double getSizePrice ()
    {

    }

    public double getColorPrice ()
    }
} 
```

配置面板应该可以使用下面的代码

```
*   Filename: ShadeDesignerWindow.java
 *  Programmer: Jamin A. Bishop
 *  Date: 3/31/2012
 * @version 1.00 2012/3/31
 */

public class ShadeDesignerWindow extends JFrame
{
    private JLabel banner;           // To display a banner
    private ConfigPanel configPanel; // To offer various configurations
    private JPanel bannerPanel;      // To hold the banner
    private JPanel buttonPanel;      // To hold the buttons
    private JButton calcButton;      // To calculate total charges
    private JButton exitButton;      // To exit the application

    //constructor

    public ShadeDesignerWindow() 
    {
        //Title Display
        super("Shade Designer");

         // Specify what happens when the close button is clicked.
      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

      // Create the banner on a panel.
      bannerPanel = new JPanel();
      bannerPanel.setLayout(new FlowLayout(FlowLayout.CENTER));
      banner = new JLabel("Shade Designer");
      banner.setFont(new Font("SanSerif", Font.BOLD, 24));
      bannerPanel.add(banner);

      // Create a configuration panel.
      configPanel = new ConfigPanel();

      // Build the button panel.
      buildButtonPanel();

      // Add the banner and other panels to the content pane.
      add(bannerPanel, BorderLayout.NORTH);
      add(configPanel, BorderLayout.CENTER);
      add(buttonPanel, BorderLayout.SOUTH);

      // Pack and display the window.
      pack();
      setVisible(true);
    }

    //buildButtonPanel method

    private void buildButtonPanel()
   {
      // Create a button to calculate the charges.
      calcButton = new JButton("Calculate Charges");

      // Add an action listener to the button.
      calcButton.addActionListener(new CalcButtonListener());

      // Create a button to exit the application.
      exitButton = new JButton("Exit");

      // Add an action listener to the button.
      exitButton.addActionListener(new ExitButtonListener());

      // Put the buttons in their own panel.
      buttonPanel = new JPanel();
      buttonPanel.add(calcButton);
      buttonPanel.add(exitButton);
   }

   //calcButtonListner and calcbutton component

    private class CalcButtonListener implements ActionListener
    {
        //actionPerformed method

        public void actionPerformed(ActionEvent e)
      {
         double totalCharges = 50.0;   // Total charges

         // Create a DecimalFormat object to format output.
         DecimalFormat dollar = new DecimalFormat("#,##0.00");

         // Get the total charges
         totalCharges += configPanel.getStylePrice() + configPanel.getSizePrice() +
                         configPanel.getColorPrice();

         // Display the message.
         JOptionPane.showMessageDialog(null, "Total Charges: $" + 
                                             dollar.format(totalCharges));
      }
   } // End of inner class 

    //ExitButtonListener and exitButton component

    private class ExitButtonListener implements ActionListener
    {
        //actionPerformed method

        public void actionPerformed(ActionEvent e)
      {
         System.exit(0);
      }
   } // End of inner class

   //The main method instantiates the ShadeDesigner class

    public static void main(String[] args)
   {
      ShadeDesignerWindow sdw = new ShadeDesignerWindow();
   }    
} 
```

我需要帮助才能使上述任一代码正常工作。我没有得到整个 configpanel 方法或它应该做什么。我从一个文件程序开始，因为那是我学习 Java 编程的方式。即使有实现，它总是一个swing文件或gui而不是两个。谢谢您的帮助。贾明·A·毕晓普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T14:01:12.910

就像`ConfigPanel`从原始程序中分离出来的那样，将样式、尺寸和颜色作为单独的类提取出来，每个类都管理自己的名称和数量。让它们中的每一个都实现一个合适的接口：

```
interface MarginalBillable {
    double getMarginalCostOfCurrentSelection();
} 
```

然后`ConfigPanel`可以只有一种方法返回所有当前选择的总数。为了获得额外的荣誉，请将三个面板的父级设为[abstract](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)。

```
class ConfigPanel {

    StylePanel stylePanel = new StylePanel();
    SizePanel sizePanel = new SizePanel();
    ColorPanel colorPanel = new ColorPanel();

    double getTotalMarginalAmount() {
        return stylePanel.getMarginalCostOfCurrentSelection()
            + sizePanel.getMarginalCostOfCurrentSelection()
            + colorPanel.getMarginalCostOfCurrentSelection();
    }
}

interface MarginalBillable {

    double getMarginalCostOfCurrentSelection();
}

class StylePanel extends JPanel implements MarginalBillable {

    double value;

    @Override
    public double getMarginalCostOfCurrentSelection() {
        return value; //based on current settings
    }
}

class SizePanel extends JPanel implements MarginalBillable {

    double value;

    @Override
    public double getMarginalCostOfCurrentSelection() {
        return value; //based on current settings
    }
}

class ColorPanel extends JPanel implements MarginalBillable {

    double value;

    @Override
    public double getMarginalCostOfCurrentSelection() {
        return value; //based on current settings
    }
} 
```

# ruby-on-rails - 如何在 Rails Carmen state_select 中预先选择一个状态

> ID：10059465
> 
> 赞同：1
> 
> 时间：2012-04-08T00:23:19.577
> 
> 标签：ruby-on-rails, carmen

我可以在 state_select 中传递哪些选项。我正在尝试做 :selected => state 并且它不起作用。

```
<%= f.state_select :state, 'US', {:prompt => '--Select One--', :selected => state}, :tabindex => autotab, :id => 'state_select, :state => state'%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T04:31:11.777

我不认为你可以使用 state_select 来做到这一点。您必须将**select**与**state_options_for_select**函数一起使用才能进入您选择的状态：

```
<%= f.select :state, state_options_for_select(state_to_select, country_code) %> 
```

那应该能让你到达那里。

# gwt - 如何从 GWT Editor 类访问底层 POJO

> ID：10059471
> 
> 赞同：3
> 
> 时间：2012-04-08T00:25:49.653
> 
> 标签：gwt, gwt-editors

我的 POJO 中有一个 HashMap，我正在使用 GWT 中的编辑器框架进行编辑。虽然我可以访问通过他们的 getter/setter 绑定的标准成员变量，但我不知道如何访问 HashMap 中的值。如何访问正在通过使用 SimpleBeanEditorDriver 的编辑器编辑的底层 POJO？

我的 POJO：

```
@Entity(noClassnameStored=true)
public class ProfileConfig extends BaseEntity {
     @Indexed(unique=true)
     private String name;
     private boolean isDefault;
     private HashMap<ProfileID, ProfileInfo> profiles= new HashMap<ProfileID, ProfileInfo>();

     public ProfileInfo getProfile(ProfileID id) {
          return profiles.get(id);
     }

     public void setProfile(ProfileID id, ProfileInfo p) {
         profiles.put(id, p);
     } 
```

我的编辑器：

```
public class ProfileConfigEditor extends Composite implements ManagedObjectEditor<ProfileConfig> {

     private static ProfileConfigEditorUiBinder uiBinder = GWT.create(ProfileConfigEditorUiBinder.class);
     interface ProfileConfigEditorUiBinder extends UiBinder<Widget, ProfileConfigEditor> {
}

     private UserManager userManager;

     @UiField
     CellList Profiles;
     @UiField
     TextBox name;
     @UiField
     CheckBox isDefault; 
```

因此，鉴于我有一个来自 userManager 的有效配置文件 ID 列表，我该如何从我的编辑器中的 POJO 调用 getProfile 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:45:57.127

你需要的是一个`ValueAwareEditor`.

```
public class ProfileConfigEditor extends Composite implements ManagedObjectEditor<ProfileConfig>, ValueAwareEditor<ProfileConfig> {

void setValue(ProfileConfig value){
    // TODO: Call ProfileConfig.getProfile()
}

void flush(){
   // TODO: Call ProfileConfig.setProfile()
}

// ... Other methods here 
```

**Alternatively**, if you want more of a challenge, you can look at rolling your own `CompositeEditor`, for example see the source code for `ListEditor`. In your case, you would implement a `CompositeEditor<ProfileConfig, ProfileInfo, MyNewProfileInfoEditor>`. You can this of this as "This editor will take a `ProfileConfig` object, extract one or more `ProfileInfo` objects and edit it with one or more `MyNewProfileInfoEditor` editors"

# javascript - 如何获取与另一个给定值匹配的 JSON 对象的键值？

> ID：10059472
> 
> 赞同：2
> 
> 时间：2012-04-08T00:26:01.003
> 
> 标签：javascript, json

我有这个 JSON：

```
var projects_array = new Array(
{name:"myName1", id:"myid1", index:1},
{name:"myName2", id:"myid2", index:2},
{name:"myName3", id:"myid3", index:3},  

); 
```

我需要获取与特定“id”值匹配的对象的“索引”值。所以如果我的“id”是“myid1”，你会得到“1”。

这是我的代码的一部分：

```
 var myid = $(this).attr('id'); //this is the id value

projects_array.map(function (proj) {
    if (proj.id == myid) {
        return proj   // returns Undefined  
    } 
   }); 
```

最后，我需要将该值分配到一个变量中以供以后使用，谢谢 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T00:45:12.990

我认为您已成功选择索引，但是当您返回该值时，它会进入一个新数组（如果您愿意，可以在那里“映射”）。尝试这样的事情：

```
var myproj; 
var myindex;
projects_array.map(function (proj) {
    if (proj.id == myid) {
        myproj = proj;
        myindex = proj.index;
    } 
}); 
```

# solr - Solr Search Facets：我如何让它们计算产品而不是产品品种

> ID：10059478
> 
> 赞同：1
> 
> 时间：2012-04-08T00:26:55.783
> 
> 标签：solr

我正在工作的商店卖衣服。每件衣服都有多个品种。例如，衬衫 A 可能有：红色大号、红色中号、蓝色大号、蓝色中号、白色大号和白色中号。

起初，我将每个品种添加为 solr doc。因此，对于上述产品，我添加了 6 个 solr 文档，每个文档都有相同的产品 ID。我让 solr 按产品 ID 对结果进行分组，一切正常。

然而，方面计数都是品种计数，而不是产品计数。因此，例如..仅将其限制为上面的一种产品-（如果这是系统中唯一的产品）..方面计数将显示：

红色 (2) 蓝色 (2) 白色 (2)

这是正确的，每种颜色都添加了 2 个文档。但我真正想看到的是：

红色 (1) 蓝色 (1) 白色 (1)

因为每种颜色只有一种产品。

所以现在我想为了做到这一点，我需要让每个 solr 文档成为一个产品。

在这种情况下，我会添加产品，并将字段“颜色”添加 3 次*，一个红色，一个蓝色，一个白色*，并添加 3 次字段大小。但是现在 solr 并不真正知道每种颜色的大小。也许我只有小白。

什么是正确的方法来做到这一点，以使方面发挥应有的作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T20:00:56.497

原来我可以在这里使用分组（字段折叠）来做到这一点

[http://wiki.apache.org/solr/FieldCollapsing#Request_Parameters](http://wiki.apache.org/solr/FieldCollapsing#Request_Parameters)

特别是这些参数添加到查询

```
group=true
group.field=product_id"
group.limit=100
group.facet=true
group.ngroups=true 
```

group.facet 是真正让 facets 像我希望的那样与组一起工作的那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T04:23:19.033

I think that you have 2 options.

**Option 1:**

Once you get the list of facet values (Red, Blue & White in the given example), then fire the original query again with each facet value as a filter. For example, if the original query was `q=xyz&group.field=ProductID` then fire `q=xyz&group.field=ProductID&group.ngroups=true&fq=color:Red`. The `ngroups` value in the response will give you the required count for Red. Similarly, fire a separate query for Blue and White.

**Option 2:**

Create a separate field called `Product_Color` which includes both the ProductID and the color. For example, if a product has ID is `ABC123` and color is `Red`, then `Product_Color` will be `ABC123_Red`. Now, to get the facets for color, fire a separate query which groups by `Product_Color` instead of `ProductID` and you will get the required facets with the correct values. Remeber to set `group.truncate=true` for this to work.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T08:43:08.477

您可以尝试查看[Facet Pivot](http://wiki.apache.org/solr/SimpleFacetParameters#Pivot_.28ie_Decision_Tree.29_Faceting)，这将允许您拥有单个文档、具有适当计数和过滤的树状构面。

# php - 启用 .htaccess 后获取请求不起作用

> ID：10059482
> 
> 赞同：0
> 
> 时间：2012-04-08T00:27:20.640
> 
> 标签：php, .htaccess

可能有人问过我的问题，但我一直在 stackoverflow 上搜索的所有问题都让我感到困惑。我正在努力做到这一点，以便当我执行“www.website.com/newest/2”时它会转到第 2 页，而当我执行“www.website.com/newest/2/3”时它会转到第 2 页2 和第 3 项。好的是页面可以正常工作。如果我输入“www.website.com/newest/2”，它会转到第二页，但之后的任何内容，例如“www.website.com/newest/2/3”都不起作用。它不再继续到第 3 项。只有页面加载正确，但在页码之后的页面上发布数字不起作用。当我执行“www.website.com/newest/2/3”时，我查看浏览器的源代码，发现任何应该显示的与对项目编号的 GET 请求有关的代码甚至不在代码。

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{HTTP_HOST} ^website\.com$ [NC]
RewriteRule ^(.*)$ http://www.website.com/$1 [L,R=301]
RewriteRule ^newest/(.+)*/?$ ./index.php?newest=$1
RewriteRule ^newest/(.+)*/(.+)*/?$ ./index.php?newest=$1&id=$2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T00:30:13.223

问题是您`(.+)*`将匹配尽可能多的字符以进行匹配。改为`(.+?)`改为。

# javascript - Youtube javascript API（带有 ASP）功能不起作用

> ID：10059496
> 
> 赞同：1
> 
> 时间：2012-04-08T00:31:08.280
> 
> 标签：javascript, asp.net, youtube, youtube-api

我有一个从数据库中获取 Youtube URL 的程序，但我在使用 Youtube javascript API 时遇到了问题。

在我的代码隐藏中，我正在调用以下代码：

```
Table1.Rows(0).Cells(0).Text = "<object style=""height: 390px; width: 640px"" id=""ytplayer"">" & _
        "<param name=""movie"" value=""https://www.youtube.com/v/UASyS-jUKKI?version=3&feature=player_embedded&controls=0&enablejsapi=1&showinfo=0&iv_load_policy=3&playerapiid=ytplayer"">" & _
        "<param name=""allowfullscreen"" value=""true"">" & _
        "<param name=""allowscriptaccess"" value=""always"">" & _
        "<embed src=""https://www.youtube.com/v/UASyS-jUKKI?version=3&feature=player_embedded&controls=0&enablejsapi=1&showinfo=0&iv_load_policy=3&playerapiid=ytplayer"" type=""application/x-shockwave-flash"" allowfullscreen=""true"" allowscriptaccess=""always"" width=""425"" height=""344"" id=""ytplayer""></object>" 
```

（我将在我的数据库中引用源记录）。

这可以很好地将其嵌入页面，并且可以播放，但是我想使用对我不起作用的 API 函数。

```
var vid;
function onYouTubePlayerReady(id) {
        vid = id;
        var video = document.GetElementById(vid);
        video.playVideo()
    }
function play() {
        var vobj;
        if (vid) {
            vobj = document.getElementById(vid);
            alert(vobj);
            vobj.playVideo();
        }
    }

<a href="javascript:void(0);" onclick="play();">Play</a> 
```

我知道它已成功调用“onYouTubePlayerReady”函数（并返回 ID），但播放/暂停/停止等不起作用。有人知道如何解决这个问题吗？

它在服务器上运行，而不是在本地运行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T04:07:13.283

your`object`和`embed`tags 都具有相同`ID="ytplayer"`的 DOM，这在 DOM 中是不允许的。尝试改变其中之一。

# python - 在 Python 3.2 中，如何从指定文件动态打开和编译类？

> ID：10059497
> 
> 赞同：1
> 
> 时间：2012-04-08T00:31:27.057
> 
> 标签：python

代码比英文精确得多；这是我想做的：

```
import sys

fileName = sys.argv[1]
className = sys.argv[2]

# open py file here and import the class
# ???

# Instantiante new object of type "className"
a = eval(className + "()") # I don't know if this is the way to do that.

# I "know" that className will have this method:
a.writeByte(0x0) 
```

*编辑：*

根据答案的要求，这就是我想要做的：

我正在编写一个遵循 SIC/XE 指令集的虚拟处理器。它是一种教育理论处理器，用于向计算机科学专业的学生教授汇编语言和系统软件的基础知识。我试图从“处理器”的编程中抽象出“设备”的概念。本质上，我希望我的程序的用户能够编写他们自己的设备插件（仅限于“read_byte”和“write_byte”功能），然后我希望他们能够在命令下将他们的设备“连接”到处理器-line time，以便他们可以编写如下内容：

`python3 sicsim -d1 dev1module Dev1Class -d2 ...`

他们还将提供内存图像，这将知道如何与他们的设备进行交互。我基本上希望我们俩都能够编写我们的代码而不会相互干扰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T00:37:47.707

使用[`importlib.import_module`](http://localhost/pythondocs/library/importlib.html#importlib.import_module)和内置功能[`getattr`](http://localhost/pythondocs/library/functions.html#getattr)。不需要`eval`。

```
import sys
import importlib

module_name = sys.argv[1]
class_name = sys.argv[2]

module = importlib.import_module(module_name)
cls = getattr(module, class_name)

obj = cls()
obj.writeByte(0x0) 
```

这将要求该文件位于您的 python 路径上的某个位置。大多数情况下，当前目录位于所述路径上。如果这还不够，您将不得不从中解析目录并将`append`其解析到`sys.path`. 我很乐意为此提供帮助。只需给我第一个命令行参数的示例输入。

此版本的有效输入类似于：

```
python3 myscript.py mypackage.mymodule MyClass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T00:50:05.950

正如 aaronasterling 所提到的，如果有问题的文件恰好位于 python 路径上（在 中列出的目录下`sys.path`），您可以利用导入机制，但如果不是这种情况，请使用内置[`exec()`](http://docs.python.org/dev/library/functions.html#exec)函数：

```
fileVars = {}
exec(file(fileName).read(), fileVars) 
```

然后，要获取该类的实例，您可以跳过`eval()`：

```
a = fileVars[className]() 
```

# .htaccess - 使用 Htaccess 进行基于 URL 的重定向

> ID：10059498
> 
> 赞同：0
> 
> 时间：2012-04-08T00:31:43.833
> 
> 标签：.htaccess, mod-rewrite, url-redirection

我有几个域别名指向同一个网站，例如：

domain1.de/en/

domain1.de/de/

domain2.ch/de/

domain2.ch/en/

当有人在 URL 上打开基于特定语言的子目录时，我想将它们重定向到起始页，例如 domain1.de 用户不应该能够访问子目录 /en/ 但被重定向到起始页。对于 domain2.ch，用户应该只能访问目录 /en/ 而不能访问 /de/。如何使用 Htaccess 进行设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:56:29.377

试试这个：

```
RewriteCond %{HTTP_HOST} ^de\.domain\.de$ [NC]
RewriteCond %{REQUEST_URI} ^(.*)/en/(.*)$  [NC]
RewriteRule ^(.*)$ http://%{HTTP_HOST}/targetpage.php [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T00:37:39.653

这可能是对您有用的链接；

[htaccess 重定向](http://www.htaccessredirect.net/index.php)

对于 301 重定向整个目录，它生成以下代码：

```
//301 Redirect Entire Directory
RedirectMatch 301 domain2.ch/de/(.*) domain2.ch/en//$1
RedirectMatch 301 domain1.de/de/(.*) domain1.de/en//$1 
```

# sqlite - 如何使用 SQLite 3 类型的亲和力？

> ID：10059500
> 
> 赞同：8
> 
> 时间：2012-04-08T00:31:51.057
> 
> 标签：sqlite

根据[SQLite 3 文档](http://www.sqlite.org/datatype3.html)，它具有“类型关联”功能来强制执行列数据类型。但是如何开启呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T00:38:57.190

类型关联不强制列数据类型 - 它只是对底层存储引擎如何存储数据提出建议。

在“类型亲和力”部分下：

> 列的类型亲和性是存储在该列中的数据的推荐类型。这里的重要思想是该类型是推荐的，而不是必需的。**任何列仍然可以存储任何类型的数据。**

*（重点补充）*

至于“如何打开它”，没有这样的事情。这就是 SQLite 一直以来的工作方式。无需打开或关闭即可获得此功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T00:38:42.423

列数据类型不是强制的，只是由它们在语句中声明的类型*建议*`create table`。这就是他们所说的*类型亲和力*。

> 列的类型亲和性是存储在该列中的数据的推荐类型。这里的重要思想是该类型是推荐的，而不是必需的。任何列仍然可以存储任何类型的数据。只是某些列，如果可以选择，会更喜欢使用一个存储类而不是另一个。列的首选存储类称为“亲和性”。

# android - 服务器请求/JSON解析

> ID：10059501
> 
> 赞同：1
> 
> 时间：2012-04-08T00:31:54.893
> 
> 标签：android, json

*关于请求*服务器和*解析*接收到的 JSON 数据的工具，您有什么推荐的？除了简单的解析之外，我可能还想将这些响应映射到对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T01:12:52.783

Flexjson 在 Android 上工作就是为了这个目的。

[http://flexjson.sourceforge.net](http://flexjson.sourceforge.net)

# php - preg_match_all 变得很奇怪

> ID：10059503
> 
> 赞同：0
> 
> 时间：2012-04-08T00:32:46.773
> 
> 标签：php, regex

我有一些包含在其中的文本，`[quote][/quote]`我正在尝试匹配这些标签之前的所有文本、这些标签之间的所有内容以及这些标签之后的所有内容。问题是它们可能会多次出现，但彼此之间不会出现。

我这样做的原因是因为我想对这些标签之外的所有文本运行过滤器，无论是否出现多次。

这就是我开始使用的内容：

```
preg_match_all("/(^.*)\[quote\](.*?)\[\/quote\](.*)/si", $reply['msg'], $getthequotes); 
```

这是输出：

```
Array
(
[0] => Array
    (
        [0] => putting some stuff before the quote
[quote][b]Logan said[/b][br]testing this youtube link http://www.youtube.com/watch?v=8UVNT4wvIGY&feature=g-music&context=G2db8219YMAAAAAAAAAA[br][br]did it work?[br][br][i]04/04/12 23:48:46: Edited by Logan(2)[/i][br][br][i]04/04/12 23:55:44: Edited by Logan(2)[/i][/quote]

yep

http://www.youtube.com/watch?v=8UVNT4wvIGY&feature=g-music&context=G2db8219YMAAAAAAAAAA

adding a quote

[quote][b]Logan said[/b][br]This is the start of the second quote http://www.youtube.com/watch?v=8UVNT4wvIGY&feature=g-music&context=G2db8219YMAAAAAAAAAA[br][br]did it work?[br][br][i]04/04/12 23:48:46: Edited by Logan(2)[/i][br][br][i]04/04/12 23:55:44: Edited by Logan(2)[/i][/quote]

[i]04/07/12 20:18:07: Edited by Logan(2)[/i]
    )

[1] => Array
    (
        [0] => putting some stuff before the quote

[quote][b]Logan said[/b][br]testing this youtube link http://www.youtube.com/watch?v=8UVNT4wvIGY&feature=g-music&context=G2db8219YMAAAAAAAAAA[br][br]did it work?[br][br][i]04/04/12 23:48:46: Edited by Logan(2)[/i][br][br][i]04/04/12 23:55:44: Edited by Logan(2)[/i][/quote]

yep

http://www.youtube.com/watch?v=8UVNT4wvIGY&feature=g-music&context=G2db8219YMAAAAAAAAAA

adding a quote

    )

[2] => Array
    (
        [0] => [b]Logan said[/b][br]This is the start of the second quote http://www.youtube.com/watch?v=8UVNT4wvIGY&feature=g-music&context=G2db8219YMAAAAAAAAAA[br][br]did it work?[br][br][i]04/04/12 23:48:46: Edited by Logan(2)[/i][br][br][i]04/04/12 23:55:44: Edited by Logan(2)[/i]
    )

[3] => Array
    (
        [0] => 

[i]04/07/12 20:18:07: Edited by Logan(2)[/i]
    )

) 
```

如您所见，它没有得到所需的输出。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T02:37:45.373

我没有尝试过，但你只想要 before`[quote]`和 after的东西`[/quote]`，你可以为第一次出现的开头引号标签做一个 strpos。现在你知道之前的一切都没有被引用。

接下来，您可以使用 strpos 从第一个匹配引号标记的索引开始查找结束引号标记。你可以丢弃这些东西。

现在使用您刚刚找到的结束引号标记的起始位置为下一个引号块执行另一个 strpos。您可以重复此操作，直到完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T03:45:37.257

可以完成，但您需要对字符串进行多次传递。

```
$string = 'putting some stuff before the quote
[quote][b]Logan said[/b][br]testing this youtube link http://www.youtube.com/watch?v=8UVNT4wvIGY&feature=g-music&context=G2db8219YMAAAAAAAAAA[br][br]did it work?[br][br][i]04/04/12 23:48:46: Edited by Logan(2)[/i][br][br][i]04/04/12 23:55:44: Edited by Logan(2)[/i][/quote]

yep

http://www.youtube.com/watch?v=8UVNT4wvIGY&feature=g-music&context=G2db8219YMAAAAAAAAAA

adding a quote

[quote][b]Logan said[/b][br]This is the start of the second quote http://www.youtube.com/watch?v=8UVNT4wvIGY&feature=g-music&context=G2db8219YMAAAAAAAAAA[br][br]did it work?[br][br][i]04/04/12 23:48:46: Edited by Logan(2)[/i][br][br][i]04/04/12 23:55:44: Edited by Logan(2)[/i][/quote]

[i]04/07/12 20:18:07: Edited by Logan(2)[/i]putting some stuff before the quote

[quote][b]Logan said[/b][br]testing this youtube link http://www.youtube.com/watch?v=8UVNT4wvIGY&feature=g-music&context=G2db8219YMAAAAAAAAAA[br][br]did it work?[br][br][i]04/04/12 23:48:46: Edited by Logan(2)[/i][br][br][i]04/04/12 23:55:44: Edited by Logan(2)[/i][/quote]

yep

http://www.youtube.com/watch?v=8UVNT4wvIGY&feature=g-music&context=G2db8219YMAAAAAAAAAA

adding a quote';

//get rid of whitespace
$string = preg_replace('%\s\s?%', " ",$string);
//break the string on a common element
$pieces =  preg_split('%\[%',$string);
//now discard the elements that are tags
foreach($pieces as $key=>$value):
    $value = trim($value);
    if(strrpos($value,"]") == (strlen($value) -1)):
        unset($pieces[$key]);
    endif;
endforeach;
print_r($pieces);
//and finally strip out the tag fragments
foreach($pieces as $key=>$value):
    $pieces[$key] = preg_replace('%.*]%',"",$value);
endforeach; 
```

结果是一个如下所示的数组：

```
Array
(
    [0] => putting some stuff before the quote 
    [2] => Logan said
    [4] => testing this youtube link http://www.youtube.com/watch?v=8UVNT4wvIGY&feature=g-music&context=G2db8219YMAAAAAAAAAA
    [6] => did it work?
    [9] => 04/04/12 23:48:46: Edited by Logan(2)
    [13] => 04/04/12 23:55:44: Edited by Logan(2)
    [15] =>  yep http://www.youtube.com/watch?v=8UVNT4wvIGY&feature=g-music&context=G2db8219YMAAAAAAAAAA adding a quote 
    [17] => Logan said
    [19] => This is the start of the second quote http://www.youtube.com/watch?v=8UVNT4wvIGY&feature=g-music&context=G2db8219YMAAAAAAAAAA
    [21] => did it work?
    [24] => 04/04/12 23:48:46: Edited by Logan(2)
    [28] => 04/04/12 23:55:44: Edited by Logan(2)
    [31] => 04/07/12 20:18:07: Edited by Logan(2)
    [32] => putting some stuff before the quote 
    [34] => Logan said
    [36] => testing this youtube link http://www.youtube.com/watch?v=8UVNT4wvIGY&feature=g-music&context=G2db8219YMAAAAAAAAAA
    [38] => did it work?
    [41] => 04/04/12 23:48:46: Edited by Logan(2)
    [45] => 04/04/12 23:55:44: Edited by Logan(2)
    [47] =>  yep http://www.youtube.com/watch?v=8UVNT4wvIGY&feature=g-music&context=G2db8219YMAAAAAAAAAA adding a quote
) 
```

# apache - 如何使用 apache2.2/php 响应 426 Upgrade Required http 状态代码？

> ID：10059506
> 
> 赞同：0
> 
> 时间：2012-04-08T00:33:17.103
> 
> 标签：apache, http, apache2, http-status-code-404

我想使用 apache2 和/或 php 返回状态代码 426 Upgrade Required。

我怎样才能做到这一点？

我只发现 mod_rewrite 可以使用 http 状态代码设置重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T00:35:37.897

mod rewrite 完成了这项工作......

```
<VirtualHost *:80>
        ServerName mydomain.com
        RewriteEngine on
        RewriteRule .* - [R=426,L]
</VirtualHost> 
```

# ruby-on-rails - ruby on rails redirect_to 参数通道不起作用

> ID：10059507
> 
> 赞同：2
> 
> 时间：2012-04-08T00:33:24.580
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的控制器文件如下所示：

```
class QuotesController < ApplicationController

  def show
    @quote = Quote.find(params[:id])
    @popup = params[:popup]

    respond_to do |format|
      if @popup.present?
        format.html { render layout: false }
      else
        format.html
      end
      format.json { render json: @quote }
    end
  end

  def create    
    @quote = Quote.new(params[:quote])
    respond_to do |format|
      if @quote.save
        format.html { redirect_to @quote, notice: "Quote was successfully created.", popup: "1" }
        format.json { render json: @quote, status: :created, location: @quote }
      else
        format.html { render action: "errors", layout: false }
        format.json { render json: @quote.errors, status: :unprocessable_entity }
      end
    end
  end

end 
```

如果我访问[http://localhost:3000/quotes/1?popup=1](http://localhost:3000/quotes/1?popup=1) - 视图正确显示而没有 application_layout

但是，如果我来自 CREATE 操作，似乎 ?popup=1 永远不会附加到 URL - 因此 application_layout 在不应该显示的时候显示

我认为将 popup: "1" 添加到 redirect_to 行应该通过 GET 传递一个参数

谁能看到我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T01:36:39.940

编辑：在我的机器上试过这个并且它有效：

`{ redirect_to quote_path(@quote, :popup => "1"), notice: "Quote was successfully created." }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T04:37:44.360

试试`@quote_url(:popup=>1)`吧，我想它会起作用的。

# jquery - 使用 jquery clone 创建 div 元素，然后如何设置 ID 标签？

> ID：10059509
> 
> 赞同：1
> 
> 时间：2012-04-08T00:34:05.330
> 
> 标签：jquery, string, loops

我有以下 jQuery 代码块，用于将一些 html 从一个地方复制到另一个地方：

```
var newLine  = $('#popup-clone .popup-contents').last().clone();
newLine.find('.popup-title').html("hello world");

$('#popup-container').append(newLine); 
```

这会在循环中运行多次，因此 html 呈现如下：

```
 <div id="popup-container" style="display: block;">
        <div class="popup-contents">
            <a class="close">close this popup</a>
            <span class="popup-title">Title 1</span>
            <span class="popup-description"></span>
            <span class="popup-type"></span>
            <span class="popup-open"></span>
        </div>
        <div class="popup-contents">
            <a class="close">close this popup</a>
            <span class="popup-title">Title 2</span>
            <span class="popup-description"></span>
            <span class="popup-type"></span>
            <span class="popup-open"></span>
        </div>
    </div> 
```

等等

我想为每个带有 class="popup-contents" 的 div 添加一个唯一 ID，但我不确定我该怎么做？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T00:36:36.300

使用'attr'： [http ://api.jquery.com/attr/](http://api.jquery.com/attr/)

```
newLine.attr('id', 'prefix' + someindex) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T00:39:39.147

如果 id 可以是唯一随机的，那么我过去所做的就是使用[Create GUID / UUID in JavaScript 中的 UUID/GUID 生成器？](https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript)生成随机ID。

那么这只是一个做的问题

```
newLine.attr( "id", guid ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T01:15:33.523

您通常可以避免需要为克隆的元素提供 id。

一个元素通常需要一个 id 的原因是 (a) 作为 CSS 样式的参考或 (b) 因此它可以通过 javascript/jQuery 解决。

在这两种情况下，您都可以在创建克隆元素时对其进行寻址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T00:47:42.550

使用`prop`代替`attr`：

[jQuery .prop()](http://api.jquery.com/prop/)

```
newLine.prop('id', 'prefix' + someindex) 
```

# c - 如何使用 Sublime Text 2 编译和运行一个简单的 C 程序？

> ID：10059511
> 
> 赞同：13
> 
> 时间：2012-04-08T00:34:33.830
> 
> 标签：c, macos, gcc, sublimetext, sublimetext2

我想用 GCC 编译一个简单的 C 程序。我需要在 sublime-build 文件中添加什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-08T00:35:10.337

Mac OS X：

```
{
"cmd" : ["gcc", "$file_name", "-o", "${file_base_name}"],
"selector" : "source.c",
"shell":true,
"working_dir" : "$file_path"
} 
```

视窗：

```
{
"cmd" : ["gcc", "$file_name", "-o", "${file_base_name}.exe"],
"selector" : "source.c",
"shell":true,
"working_dir" : "$file_path"
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-22T19:04:19.223

接受的答案对我不起作用。

我所做的是以下内容：

```
{
  "cmd" : ["make $file_base_name && ./$file_base_name"],
  "selector" : "source.c",
  "shell": true,
  "working_dir" : "$file_path",
} 
```

设置`shell`为`true`意味着它读取`cmd`为一行，所以我调用 make 编译然后运行脚本。另一个选项是`shell`设置为`false`但您无法运行多个`cmd`. 所以我让它工作的唯一方法是让它制作文件`CMD + B`然后运行它`CMD + Shift + B`：

```
{
  "cmd" : ["make", "$file_base_name"],
  "selector" : "source.c",
  "shell": false,
  "working_dir" : "$file_path",

  "variants": [
    {
      "cmd" : ["./$file_base_name"],
      "name": "Run"
    }
  ]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-26T18:39:46.763

在 windows 中，使用 file_regex 编译并运行

```
{
    "cmd": ["gcc", "$file_name", "-o", "${file_base_name}.exe", "&&", "${file_base_name}.exe"],
    "file_regex": "^([^:]+):([0-9]+):",
    "selector": "source.c",
    "shell": true,
    "working_dir": "$file_path"
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-30T02:12:15.457

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-05T16:47:03.780

LINUX！在终端中编译和运行，语言 C
创建一个新的构建系统并粘贴以下代码：

```
{
"cmd": ["xterm-256color -e 'zsh -c \"gcc $file_name -o ${file_base_name} && ./${file_base_name} ;echo;echo Presiona ENTER para salir...; read line\"'"],
"selector" : "source.c",
"shell": true
} 
```

> echo $SHELL = 知道你使用哪个 shell (zsh)------------------------- ------------------------echo $TERM = 知道你使用哪个终端（xterm-256color）----------- --------------------------------

:D

# regex - foo 之后的 Vim 正则表达式匹配栏

> ID：10059515
> 
> 赞同：1
> 
> 时间：2012-04-08T00:36:13.983
> 
> 标签：regex, vim

在 vim 正则表达式中：

如果`/foo\(bar\)\@=/`匹配`foo`后跟`bar`
那么接下来匹配`bar`什么`foo`？

我试过`/\(foo\)\@=bar/`了，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T00:53:28.590

这些是更简单的方法`Vim`。您可以使用`\zs`（比赛开始）和`\ze`（比赛结束）。

### 匹配`foo`随后`bar`

```
foo\zebar 
```

### 匹配`bar`以下`foo`

```
foo\zsbar 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T00:46:20.337

这：

```
\(foo\)\@<=\(bar\) 
```

您应该使用正向**向后**（而不是向前）运算符，因为您正在尝试匹配 bar，*前面*是 foo。

顺便说一句，这是链接，我总是将其[用作 vim regex 运算符的备忘单](http://www.adp-gmbh.ch/vim/searching.html)

# java - 依赖于构造函数的可运行函数

> ID：10059516
> 
> 赞同：0
> 
> 时间：2012-04-08T00:36:18.803
> 
> 标签：java, constructor

在 Java 中，我怎样才能拥有一个 Runnable 类，该类根据其构造函数选择其函数？

例如：

```
Class A implements Runnable {

    public A(int var) {
        //things go here
    }

    public A(int var1, String var2) {
        //things go here
    }

    public void run() {
        //do (a) if Constructor A(int var)
        //do (b) if Constructor A(int var1, String var2)
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T00:40:50.770

你可以这样做：

```
class A implements Runnable {
  int constructor;

public A(int var) {
    //things go here
    constructor = 1;
}

public A(int var1, String var2) {
    //things go here
    constructor = 2; 
}

public void run() {
    if (constructor == 1) ...
    if (Constructor == 2) ...
} 
```

}

但我建议使用多态性。看起来这是两类不同的对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T00:49:44.533

我会设置一个[策略](http://en.wikipedia.org/wiki/Strategy_pattern)模式：

```
class A implements Runnable {

    private final ExecutionStrategy strategy;

    public A(int var) {   
        strategy = new FooStrategy();
    }

    public A(int var1, String var2) {
        strategy = new BarStrategy();
    }

    public void run() {
        strategy.exec();
    }

    interface ExecutionStrategy { 
        public void exec();
    }

    private class FooStrategy implements ExecutionStrategy { 
        @Override
        public void exec() { 
        //implement me
        }
    }

    private class BarStrategy implements ExecutionStrategy { 
        @Override
        public void exec() { 
        //implement me
        }
    }
} 
```

# jsf - JSF @ManagedProperty 不起作用

> ID：10059517
> 
> 赞同：1
> 
> 时间：2012-04-08T00:36:21.797
> 
> 标签：jsf, jsf-2

他们在各个地方都说您应该使用@ManagedProperty 来获取请求参数。问题是我尝试从请求字符串中获取令牌，但它始终保持为空。

页面所在的链接如下所示：

[http://example.com/faces/Check.xhtml?token=EC-8AT450931P272300C&ID=VKEFF29XNGNJG](http://example.com/faces/Check.xhtml?token=EC-8AT450931P272300C&ID=VKEFF29XNGNJG)

豆子：

```
@Named(value = "bean")
@RequestScoped
public class Bean implements Serializable {

    @Inject
    private AccountBean account;
    @Inject
    private Service web;
    @ManagedProperty(value = "#{param.token}")
    private String token;
    @ManagedProperty(value = "#{param.ID}")
    private String id;

    @PostConstruct
    public void init() {
        System.out.println("token: " + token);
    } 
```

这页纸

```
<ui:define name="content">
    <h:form>
        <pou:commandButton action="#{bean.test()}" value="complete"/>
    </h:form>
</ui:define> 
```

以及我尝试过的其他事情：

```
Map<String, String> e = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap(); 
```

这也不包含请求参数。可以获取请求的所有 facesContext 事物也是如此。

帮助将不胜感激。

PS我不能改变后面的任何东西？导致它从我无法触及的程序中调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T12:03:39.597

好的，让它工作。

[@Inject 通过 URL 将参数传递给 CDI @Named bean](https://stackoverflow.com/questions/10058852/inject-to-pass-params-to-a-cdi-named-bean-via-url-gives-jboss-error-on-netbean)

这是向我的网站添加更多内容所需的解决方案

```
<ui:define name="content">
    <h:form>
        <h:inputHidden value="#{bean.token}"/>
        <h:inputHidden value="#{bean.id}"/>
        <pou:commandButton action="#{bean.test()}" value="complete"/>
    </h:form>
</ui:define> 
```

并从命名中删除 #{param.xxx} 部分

```
@Inject @HttpParam
private String token;
@Inject @HttpParam(value = "ID")
private String id; 
```

# java - 使用石英调度程序的日期范围和离散日期调度

> ID：10059518
> 
> 赞同：0
> 
> 时间：2012-04-08T00:36:33.017
> 
> 标签：java, quartz-scheduler

我想以两种方式运行作业：

1.  在 2 个日期范围之间，不包括某些工作日（例如：星期一、星期三、星期五）：给出了开始时间和结束时间

2.  仅在特定日期（02-05-2012、07-05-2012、20-05-2012 等）：给出开始时间和结束时间

我如何为这两个时间表构建 2 个单独的触发器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T01:04:54.180

对于 1，您可以使用带有 startTime 和 endTime的单个[org.quartz.CronTrigger以及不包括 cron 表达式的“特定工作日”。](http://quartz-scheduler.org/api/2.0.0/org/quartz/CronTrigger.html)

对于 2，您可以为每个特定日期使用[org.quartz.CronTrigger](http://quartz-scheduler.org/api/2.0.0/org/quartz/CronTrigger.html)，将 startTime 和 endTime 设置为当天的开始和结束，并为您的重复要求设置一个 cron 表达式。

# android - 从列表视图调用不同的活动？

> ID：10059520
> 
> 赞同：1
> 
> 时间：2012-04-08T00:36:40.407
> 
> 标签：android, listview, android-activity, onclick

我试图根据用户在我的列表视图上单击的项目来调用不同的活动，但由于某种原因，只有第一个元素在工作。这是列表视图的代码：

```
options = (ListView) findViewById(R.id.lstOptions);
ArrayAdapter<String> OPTADAP= new ArrayAdapter<String>(this,R.layout.optionslayout,OPTIONS);
options.setAdapter(OPTADAP);

options.setOnItemClickListener(new OnItemClickListener(){
  Intent i;
  @Override
  public void onItemClick(AdapterView<?> parent, final View view,int pos, long id) {
    switch(pos){
    case 0:
      i = new Intent(view.getContext(),Posting.class);
      i.putExtra("usrid", usrdata.get("id"));
      i.putExtra("usrname", usrdata.get("name"));
      try{
        startActivity(i);
      } catch(ActivityNotFoundException e) {
        e.printStackTrace();
      }
      break;
    case 1:
      i = new Intent(view.getContext(),WallActivity.class);
      try{
        startActivity(i);
      }catch(ActivityNotFoundException e){
        e.printStackTrace();
      }
      break;
    default:
      Toast.makeText(view.getContext(), "default", 10).show();
    }                   
  }
} 
```

由于某种原因，案例 1 中的代码块没有运行，我尝试将案例 0 中的代码放在案例 1 中并且它起作用了，所以这个块一定有问题：

```
i = new Intent(view.getContext(),WallActivity.class);
try{
    startActivity(i);
}catch(ActivityNotFoundException e){
    e.printStackTrace();
} 
```

WallActivity 基本上只是一个 webview：

```
public class WallActivity extends Activity{

WebView wv;
private final String wurl = "URL HERE";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.wallactivity);
    wv = (WebView) findViewById(R.id.webview);

    wv.getSettings().setJavaScriptEnabled(true);
    wv.loadUrl(wurl);
    }
} 
```

当我单击第 1 项时，代码无法运行，有什么想法吗？非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T00:52:22.647

你到底为什么要捕获 ActivityNotFoundException？如果我不得不冒险猜测，那可能是您忘记在清单中注册 WallActivity 并且正在引发异常。

在任何情况下，如果您确实捕获了异常，在 Android 中，如果您想查看堆栈跟踪，您应该将异常写入日志而不是`e.printStackTrace()`

```
Log.e(getClass().getName(), "OMG ERROR ! :)", e); 
```

# c - 被动套接字不接受 ftp

> ID：10059523
> 
> 赞同：0
> 
> 时间：2012-04-08T00:37:39.310
> 
> 标签：c, sockets, passive-mode

我正在制作一个 ftp 服务器，当我尝试使用 filezilla 连接到它时，服务器不接受被动套接字上的连接。它在接受呼叫时挂起。这是我的代码的一部分：

`if ((server->pasv_sock = accept(server->sockt, (struct sockaddr*)&sin_clt, (socklen_t*)&size_sin) == -1))`

我的套接字绑定到一个特定的端口，客户端尝试连接这个端口。Telnet 也没有连接。

如果你能帮我找出问题所在，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T00:50:07.067

你记得`listen`之前打过电话`accept`吗？

记住：`socket`-> `bind`-> `listen`-> `accept`。

**编辑：**这是对您的代码的一些评论。

```
 struct protoent       *pe;
  struct sockaddr_in    sin;
  int                   sock;
  struct sockaddr_in    sin_clt;
  int                   size_sin;

  if ((pe = getprotobyname("TCP")) == NULL)
      perro("getprotobyname");
  sock = xsocket(AF_INET, SOCK_STREAM, pe->p_proto); 
```

使用`getprotobyname`是不必要的，因为名称是硬编码的，而且无论如何只有一个 IP 流协议。使用`0`代替`pe->p_proto`，不要打扰调用`getprotobyname`。

```
 sin.sin_family = AF_INET;
  sin.sin_addr.s_addr = INADDR_ANY; 
```

你不初始化`sin.sin_port`. 那是一个错误。

```
 while (bind(sock, (const struct sockaddr*)&sin,
              (socklen_t)sizeof(sin)) == -1 && server->port2 <= 65535)
    sin.sin_port = htons(server->port2++); 
```

这个循环有点乱。它可能大部分是正确的，但很难说。让我们重写它，使它*明显正确*而不是*明显不正确*。

```
 if (listen(sock, 1) == -1)
    perror("listen");
  size_sin = sizeof(sin_clt);
  if ((server->pasv_sock = accept(sock, (struct sockaddr*)&sin_clt,
                                  (socklen_t*)&size_sin) == -1)) 
```

这绝对不是你想要的。

**讨论：** 我将在最后一行添加括号以向您展示它的*实际*作用。

```
if ((server->pasv_sock = accept(...) == -1)) 
```

是相同的

```
if ((server->pasv_sock = (accept(...) == -1))) 
```

我猜你得到了一个抱怨分配的编译器警告，它建议添加括号......但是你添加的括号在错误的位置。编译器警告您的原因是因为这是一个常见的错误来源，编译器不可能知道该语句的实际含义。你的意思更像是这样的：

```
if ((server->pasv_sock = accept(...)) == -1) 
```

但我不建议这样做。更容易阅读和更简单的方法是从 if 谓词中提取分配，

```
server->pasv_sock = accept(...);
if (server->pasv_sock == -1) 
```

不，生成的汇编代码没有区别；所以没有性能差异。

这条线还有另一个问题，但它有点迂腐。你不应该施放`(socklen_t *) &size_sin`。相反，您应该将 的声明更改`size_sin`为具有`socklen_t`开头的类型。它起作用的唯一原因是因为`socklen_t`它的类型定义为`int`，但假装你不知道并使用正确的类型开始。

**示例代码：**

```
int port, sock, r, csock;
struct sockaddr_in saddr, caddr;
socklen_t caddrlen;

// This is a simpler way to get a TCP socket
sock = socket(AF_INET, SOCK_STREAM, 0);
if (sock < 0) abort();

// Loop over available ports, and bind to one
// (I'm not sure if this is the best way to do this)
saddr.sin_family = AF_INET;
saddr.sin_addr.s_addr = INADDR_ANY;
for (port = 10000; port < 65536; ++port) {
    saddr.sin_port = htons(port);
    r = bind(sock, (struct sockaddr *) &saddr, (socklen_t) sizeof(saddr));
    if (!r)
        break;
}
if (r) abort();

// Listen and accept a connection
r = listen(sock, 1);
if (r < 0) abort();
caddrlen = (socklen_t) sizeof(caddr);
csock = accept(sock, (struct sockaddr *) &caddr, &caddrlen);
if (csock < 0) abort();

// You don't want to listen for more connections
close(sock); 
```

**建议：**目前，尽量不要在条件句中放置副作用（`accept`、`bind`、分配等）。我并不是说这样做是不行的，但看起来这就是你的问题所在，很容易将副作用移到单独的代码行，然后*只*在 if 条件下进行最终比较或而条件。

```
// Both of these are correct.
// The bottom one is obviously correct.
// Correctness is not always good enough.
// Being obviously correct is important!

if ((p->x = func()) == NULL)
    ...

p->x = func();
if (p->x == NULL)
    ... 
```

# jquery - jQuery 匹配特殊实体字符

> ID：10059529
> 
> 赞同：0
> 
> 时间：2012-04-08T00:38:02.777
> 
> 标签：jquery, regex, entity, character

我有一个跨度列表，其中包含数字。我知道如何从跨度中提取数字，这很容易，但我的跨度之一是 ½ 字符实体。

```
if ($(".XT_Active").html().text() === "&frac12;") {
   //Do stuff
}

if ($(".XT_Active").text() === "½") {
   //Do stuff
} 
```

我需要它评估为真。这些都不起作用。

有小费吗？

*解决方案*

我把它移到了一个不同的、更合适的函数上。在给出类 XT_Active 之前评估上述内容。

现在一切都好。再次感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T00:53:39.343

它似乎对我有用。也许您的跨度中有空格。

[http://jsfiddle.net/YL5Aj/](http://jsfiddle.net/YL5Aj/)

如果这不是问题，您可以尝试使用此技术对 html 实体进行编码

[从输入字段读取属性时 HTML 编码丢失](https://stackoverflow.com/questions/1219860/javascript-jquery-html-encoding)

[http://jsfiddle.net/gZuab/](http://jsfiddle.net/gZuab/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T00:54:08.650

Hiya Jason在这里进行**简单演示**：http : [//jsfiddle.net/Y9dBG/](http://jsfiddle.net/Y9dBG/)

希望这有助于下面的示例非常基本，因为您可以复制您正在尝试的内容。:)

有用的链接：（如果您想使用正则表达式）[正则表达式验证中的小数或数值](https://stackoverflow.com/questions/2811031/decimal-or-numeric-values-in-regular-expression-validation)

**引用**（如果您将使用正则表达式，上面的链接应该会有所帮助，并且从上面的链接中引用:) 但这应该只是在您希望实现正则表达式的情况下。

休息希望这对你有帮助，干杯！

> 进一步更新以处理逗号和句号
> 
> 如果你想允许一个 . 在数字组和 a 之间，在积分和小数部分之间，然后尝试：
> 
> ^[1-9]\d{0,2}(.\d{3})*(,\d+)?$

**jQuery代码**

```
alert('html value ==>' + $(".XT_Active").html().toString() );
alert('comparision ==>' + ($(".XT_Active").html().toString() == "½"));

if ($(".XT_Active").text() == "&frac12;") {
   // alert('foo ====' + $(".XT_Active").text());
   //Do stuff
}

if ($(".XT_Active").text() == "½") {
    alert('Yay I am inside the if condition' + $(".XT_Active").text());
   //Do stuff
} 
```

**HTML**

```
<!-- <div class="XT_Active"> &frac12;</div> <br /> -->

<span class="XT_Active">½</span> <br />​ 
```

# node.js - JavaScript MIME 类型是 application/octet-stream nodejs

> ID：10059530
> 
> 赞同：0
> 
> 时间：2012-04-08T00:38:04.173
> 
> 标签：node.js, express

我正在为节点 js 编写一个组合器模块。我正在使用 express 来获取如下文件：

```
app.get('/combine/js/?files=scripts/file1.js;scripts/file2.js', function(req, res){
    res.contentType('text/javascript');
    res.end(content); //the combined files content
}); 
```

现在，当页面加载时，我在 chrome 中收到以下错误：“资源解释为脚本，但使用 MIME 类型应用程序/八位字节流传输”

我究竟做错了什么？

**更新：这是响应内容的完整 app.get 组合器功能......**

```
 app.get('/combiner/:type/?', function(req, res){
        var type = req.params.type;
        var files = [];
        files = req.query.files.split(';');
        var content = combiner.combine(type, files);
        switch(type){
                case 'js': res.contentType('text/javascript'); break;
            case 'css': res.contentType('text/css'); break;
        }
        content = content.replace('<:=appid=:>', vars.appid);
        res.end(content);
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:45:40.077

据我所知，这里的 Express 文档可能有误。他们清楚地说，给出 mime 类型会起作用，但这不会发生在你身上，或者在我的测试中。

您应该自动设置内容类型：

```
res.header('Content-Type', 'application/javascript'); 
```

或将文件扩展名传递给`res.contentType()`.

```
res.contentType('js'); 
```

# c# - 如何按列表使用的对象内的元素对列表进行排序？

> ID：10059531
> 
> 赞同：2
> 
> 时间：2012-04-08T00:38:37.707
> 
> 标签：c#, list, sorting

我正在做一个课程作业，其中一部分涉及到我必须在我的游戏中拥有一个有效的记分牌，但是，我需要一种方法来按 score.score 对我的 Score 对象列表进行排序。因为我的 Score 对象包含玩家姓名以及他们达到的级别。

我在编程方面不是很有经验，并且已经做了不到一年，我从搜索中发现的只是人们在谈论 lambda 或 IComparable，这两个我都不知道或如何使用，而 MSDN 没有对我来说似乎不容易理解:(

我在这里拉头发，任何帮助都会很棒！

在伪中，我需要的是：

```
List<Score> scores;
// Load in scores
scores.Sort(//sort by score.actualScore) 
```

这样我就可以在添加新分数时在正确的位置添加和删除列表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T00:42:40.763

```
var ordered = scores.OrderBy(x => x.ActualScore).ToList(); 
```

或者：

```
var ordered = scores.OrderByDescending(x => x.ActualScore).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T00:43:36.400

最简单的方法是传递一个[`Comparison`委托](http://msdn.microsoft.com/en-us/library/tfakywbh.aspx)。对于您的示例，这将是：

```
scores.Sort((a, b) => a.actualScore - b.actualScore); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T00:43:30.020

`IComparable`在你的`Score`课堂上实施。

请参阅：http: [//msdn.microsoft.com/en-us/library/system.icomparable.aspx](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)

# javascript - Flowplayer：如何取消绑定事件？

> ID：10059534
> 
> 赞同：3
> 
> 时间：2012-04-08T00:39:13.680
> 
> 标签：javascript, flowplayer

如何取消绑定之前设置的 Flowplayer 事件？

```
 flowplayer('player9999').onCuepoint(55000, function() {
        ...
    }); 
```

就像点击解除绑定一样：

```
$('#some').click(function() {
    flowplayer('player9999').onCuepoint().unbind(); // something like this.
}); 
```

我试过`flowplayer("player9999").removeCuepoints`了，但我收到一条错误消息：*Error: flowplayer("player9999").removeCuepoints is not a function)。

我正在使用 FlowPlayer 3.2.9。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:52:13.197

您可以在事件处理程序中实现自定义逻辑：

```
flowplayer('player9999').onCuepoint(55000, function() {
    if (flag){
         //do something
    }
}); 
```

# python - 在 Ubuntu 上使用 python 支持编译 vim

> ID：10059539
> 
> 赞同：8
> 
> 时间：2012-04-08T00:41:06.887
> 
> 标签：python, vim, compilation

我正在尝试在 Ubuntu 上使用 python 解释器从源代码编译 vim。我已经安装了 vim 的依赖项，在 Ubuntu 上安装了 python2.7-devel 和 python2.7-dbg 包，并像这样执行配置步骤

```
./configure --enable-pythoninterp --with-python-config-dir=/usr/lib/python2.7/config 
```

config 目录确实包含 config.c 文件。make 步骤失败并出现以下错误。

```
...

objects/py_config.o:(.data+0xcc): undefined reference to `initcStringIO'
objects/py_config.o:(.data+0xd4): undefined reference to `initcPickle'
objects/py_config.o:(.data+0xdc): undefined reference to `initzlib'
collect2: ld returned 1 exit status
make: *** [vim] Error 1 
```

我已经尝试过稳定的构建，围绕配置等进行了调整。但没有找到明确的答案。vim 也可以在没有 python 解释器的情况下构建。

这里完整

输出 - [http://paste.pocoo.org/show/577749/](http://paste.pocoo.org/show/577749/)

错误 - [http://paste.pocoo.org/show/577752/](http://paste.pocoo.org/show/577752/)

Makefile - [http://paste.pocoo.org/show/577751/](http://paste.pocoo.org/show/577751/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T04:28:56.950

在进行了大量研究后回答我自己的问题。在某些 Ubuntu 安装中，vim 正在寻找[编译的文件可能会丢失](https://groups.google.com/d/msg/vim_dev/_xf8hGnPvMk/N1TUwz7csbwJ)。

在意识到我继续自定义安装 Python 源 ( `./configure --prefix=/home/senthil/localpython; make; make install`) 之后，然后继续进行 vim 编译。

1.  设置您的路径，使其`python`指向新的本地安装。

    PATH=/home/senthil/localpython/bin:$PATH

2.  然后使用以下标志开始编译。

    ./configure --enable-pythoninterp --with-features=huge --with-python-config-dir=/home/senthil/localpython/lib/python2.7/config

您应该看到 vim 使用本地 python 解释器编译得很好。正如各种消息来源所告知的那样，这增​​加了 vim 的大小，我也觉得速度明显变慢了。刚刚完成这个练习（以一种非常有耐心的方式），我想，我想使用系统编译的vim本身。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-26T18:45:47.523

获取配置目录`/usr/bin/python2.7-config --configdir`

IE：

```
sudo apt-get build-dep vim 
hg clone https://vim.googlecode.com/hg/ vim
./configure --enable-pythoninterp --with-features=huge --prefix=$HOME/opt/vim --with-python-config-dir=$(/usr/bin/python2.7-config --configdir)
make && make install 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T13:18:26.090

在编译 Vim 之前，安装`python-dev`和`python2.7-dev`（或任何与你的 python 版本匹配的开发者）。这两个包可能指向相同的文件，但它对我有用。

# android - Android垃圾收集运行异常

> ID：10059545
> 
> 赞同：1
> 
> 时间：2012-04-08T00:42:43.483
> 
> 标签：android, bitmap, garbage-collection, heap-memory

我在活动中有以下代码。最终，我正在尝试制作帧动画，但 GC 正在扼杀性能。我已经尝试过显式回收，但没有任何区别。

我也知道我可以使用 BitmapFactor.Options.inBitmap 重用位图，这确实解决了问题，但将我限制为 API >= 11，这不是一个选项。

此代码仅说明了问题。它不是我的应用程序的一部分：

```
 Log.d("GC_badness", "0: " + SystemClock.uptimeMillis());
        Bitmap image = BitmapFactory.decodeResource(getResources(), R.drawable.my_image);
        Log.d("GC_badness", "1: " + SystemClock.uptimeMillis());
        image = BitmapFactory.decodeResource(getResources(), R.drawable.my_image);
        Log.d("GC_badness", "2: " + SystemClock.uptimeMillis());
        image = BitmapFactory.decodeResource(getResources(), R.drawable.my_image);
        Log.d("GC_badness", "3: " + SystemClock.uptimeMillis());
        image = BitmapFactory.decodeResource(getResources(), R.drawable.my_image);
        Log.d("GC_badness", "4: " + SystemClock.uptimeMillis());
        image = BitmapFactory.decodeResource(getResources(), R.drawable.my_image);
        Log.d("GC_badness", "5: " + SystemClock.uptimeMillis());
        image = BitmapFactory.decodeResource(getResources(), R.drawable.my_image);
        Log.d("GC_badness", "6: " + SystemClock.uptimeMillis()); 
```

这会产生以下日志条目。从 jpg 资源加载的每个位图都会导致至少 3 次垃圾收集，最多 8 次。大多数情况下，它们什么也不收集或几乎什么也不收集。堆没有增长，即使有多条消息说它是。这也很令人困惑。

我难住了。我找不到重用 API 11 之前的位图的方法，而且我无法忍受所有这些无用的垃圾收集所带来的巨大延迟。

```
04-07 18:17:51.860: D/GC_badness(7510): 0: 360583998
04-07 18:17:51.900: D/dalvikvm(7510): GC_FOR_ALLOC freed 34K, 5% free 6320K/6595K, paused 32ms
04-07 18:17:51.900: I/dalvikvm-heap(7510): Grow heap (frag case) to 7.744MB for 1584016-byte allocation
04-07 18:17:51.950: D/dalvikvm(7510): GC_FOR_ALLOC freed <1K, 5% free 7867K/8199K, paused 27ms
04-07 18:17:52.000: D/dalvikvm(7510): GC_CONCURRENT freed <1K, 5% free 7868K/8199K, paused 2ms+3ms
04-07 18:17:52.030: D/dalvikvm(7510): GC_FOR_ALLOC freed <1K, 5% free 7868K/8199K, paused 31ms
04-07 18:17:52.030: I/dalvikvm-heap(7510): Grow heap (frag case) to 8.416MB for 704016-byte allocation
04-07 18:17:52.070: D/dalvikvm(7510): GC_FOR_ALLOC freed <1K, 4% free 8555K/8903K, paused 37ms
04-07 18:17:52.070: D/dalvikvm(8107): GC_FOR_ALLOC freed 1464K, 39% free 17183K/27911K, paused 62ms
04-07 18:17:52.100: D/GC_badness(7510): 1: 360584238
04-07 18:17:52.100: D/dalvikvm(8189): GC_CONCURRENT freed 286K, 8% free 6917K/7495K, paused 17ms+3ms
04-07 18:17:52.110: D/dalvikvm(7510): GC_CONCURRENT freed 1546K, 22% free 7009K/8903K, paused 2ms+2ms
04-07 18:17:52.150: D/dalvikvm(7510): GC_FOR_ALLOC freed <1K, 22% free 7008K/8903K, paused 32ms
04-07 18:17:52.150: I/dalvikvm-heap(7510): Grow heap (frag case) to 8.416MB for 1584016-byte allocation
04-07 18:17:52.200: D/dalvikvm(7510): GC_FOR_ALLOC freed 0K, 4% free 8555K/8903K, paused 37ms
04-07 18:17:52.250: D/dalvikvm(7510): GC_CONCURRENT freed <1K, 4% free 8555K/8903K, paused 2ms+2ms
04-07 18:17:52.280: D/dalvikvm(7510): GC_FOR_ALLOC freed <1K, 4% free 8555K/8903K, paused 30ms
04-07 18:17:52.280: I/dalvikvm-heap(7510): Grow heap (frag case) to 9.086MB for 704016-byte allocation
04-07 18:17:52.310: D/dalvikvm(7510): GC_FOR_ALLOC freed 0K, 4% free 9243K/9607K, paused 23ms
04-07 18:17:52.330: D/dalvikvm(8107): GC_CONCURRENT freed 588K, 34% free 18618K/27911K, paused 4ms+5ms
04-07 18:17:52.350: D/GC_badness(7510): 2: 360584482
04-07 18:17:52.350: D/dalvikvm(7510): GC_CONCURRENT freed 1546K, 20% free 7696K/9607K, paused 1ms+2ms
04-07 18:17:52.380: D/dalvikvm(7510): GC_FOR_ALLOC freed 688K, 28% free 7008K/9607K, paused 22ms
04-07 18:17:52.380: I/dalvikvm-heap(7510): Grow heap (frag case) to 8.416MB for 1584016-byte allocation
04-07 18:17:52.400: D/dalvikvm(7510): GC_FOR_ALLOC freed <1K, 11% free 8555K/9607K, paused 21ms
04-07 18:17:52.440: D/GC_badness(7510): 3: 360584577
04-07 18:17:52.450: D/dalvikvm(7510): GC_CONCURRENT freed <1K, 4% free 9243K/9607K, paused 1ms+2ms
04-07 18:17:52.470: D/dalvikvm(7510): GC_FOR_ALLOC freed 2234K, 28% free 7008K/9607K, paused 20ms
04-07 18:17:52.470: I/dalvikvm-heap(7510): Grow heap (frag case) to 8.416MB for 1584016-byte allocation
04-07 18:17:52.500: D/dalvikvm(7510): GC_FOR_ALLOC freed 0K, 11% free 8555K/9607K, paused 29ms
04-07 18:17:52.510: D/dalvikvm(8107): GC_CONCURRENT freed 1785K, 33% free 18832K/27911K, paused 2ms+5ms
04-07 18:17:52.530: D/GC_badness(7510): 4: 360584668
04-07 18:17:52.540: D/dalvikvm(7510): GC_CONCURRENT freed <1K, 4% free 9243K/9607K, paused 1ms+2ms
04-07 18:17:52.570: D/dalvikvm(7510): GC_FOR_ALLOC freed 2234K, 28% free 7008K/9607K, paused 28ms
04-07 18:17:52.570: I/dalvikvm-heap(7510): Grow heap (frag case) to 8.416MB for 1584016-byte allocation
04-07 18:17:52.590: D/dalvikvm(7510): GC_FOR_ALLOC freed <1K, 11% free 8555K/9607K, paused 22ms
04-07 18:17:52.620: D/dalvikvm(7510): GC_CONCURRENT freed <1K, 4% free 9243K/9607K, paused 3ms+2ms
04-07 18:17:52.630: D/GC_badness(7510): 5: 360584765
04-07 18:17:52.650: D/dalvikvm(7510): GC_FOR_ALLOC freed 2235K, 28% free 7008K/9607K, paused 21ms
04-07 18:17:52.650: I/dalvikvm-heap(7510): Grow heap (frag case) to 8.416MB for 1584016-byte allocation
04-07 18:17:52.680: D/dalvikvm(7510): GC_FOR_ALLOC freed 0K, 11% free 8555K/9607K, paused 27ms
04-07 18:17:52.710: D/GC_badness(7510): 6: 360584844 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T01:59:13.723

为什么要重用图像？

不要给垃圾收集器收集东西的机会。基本上，您在本地定义的每个对象迟早都会被收集。

不要重复使用您的图像变量。在您的动画代码之前制作一个图像数组和图像（最好是在创建活动期间加载）。或者考虑为您的图像使用[ObjectPool](http://www.devahead.com/blog/2011/12/coding-for-performance-and-avoiding-garbage-collection-in-android/)。

这是关于如何避免垃圾收集的一个很好的[答案。](https://stackoverflow.com/questions/2484079/how-can-i-avoid-garbage-collection-delays-in-java-games-best-practices)

最后，您可以在谷歌搜索时找到大量有关如何避免垃圾收集的信息。“如何避免垃圾收集机器人”。

# c# - 我必须保留对 EventHandler 委托对象的引用以便以后取消订阅吗？

> ID：10059546
> 
> 赞同：1
> 
> 时间：2012-04-08T00:43:08.030
> 
> 标签：c#, events

> **可能重复：**
> [如何正确注销事件处理程序](https://stackoverflow.com/questions/292820/how-to-correctly-unregister-an-event-handler)

[MSDN 声明](http://msdn.microsoft.com/en-us/library/ms366768.aspx)以下两个事件订阅完全相同（C# 2.0 与 1.0 语法）：

```
publisher.CustomEvent += HandleCustomEvent;
publisher.CustomEvent += new CustomEventHandler(HandleCustomEvent); 
```

我注意到较新的语法隐藏了委托对象的实例化。

**我是否需要保留对代表的引用，以便以后可以正确退订？**

```
// Retain reference to delegate used to subscribe.
this.handleCustomEvent = new CustomEventHandler(HandleCustomEvent);
publisher.CustomEvent += this.handleCustomEvent;
...
// Use earlier reference to unsubscribe.
publisher.CustomEvent -= this.handleCustomEvent; 
```

或者，这是同一件事吗？

```
publisher.CustomEvent += HandleCustomEvent;
...
publisher.CustomEvent -= HandleCustomEvent; 
```

如果它们相同，为什么？

是否`-= HandleCustomEvent`还创建一个`new()`？如果是这样，这个对象是否与创建的对象不同`+= HandleCustomEvent`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T00:58:26.940

这与我认为的完全相同，您只关注第二个速记语法位。

[如何正确注销事件处理程序](https://stackoverflow.com/a/292840/417747)

我不会回答这个问题，但我想添加这个......

如果您愿意，您可能想看看[Rx - Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609)，它可以让您摆脱这些问题。取消订阅基本上不是强制性的，除非您想尽快“停止”该事件（这是简化的，有更多详细信息）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T01:09:55.227

> 是否`-= HandleCustomEvent`还创建一个`new()`？如果是这样，这个对象是否与创建的对象不同`+= HandleCustomEvent`？

是的，是的。

据我所知，[Delegate.Remove](http://msdn.microsoft.com/en-us/library/system.delegate.remove.aspx)的 MSDN 文档没有具体解释它如何确定两个代表是否相等。但是，`MulticastDelegate.RemoveImpl`似乎使用[Delegate.Equals](http://msdn.microsoft.com/en-us/library/99bthb1z.aspx)来确定相等性，并且*记录*在案：

> 方法和目标的相等性比较如下：
> 
> *   如果被比较的两个方法都是静态的并且是同一个类上的同一个方法，那么这些方法被认为是相等的，并且目标也被认为是相等的。
> *   如果被比较的两个方法是实例方法并且是同一个对象上的同一个方法，则这些方法被认为是相等的，并且目标也被认为是相等的。
> *   否则，方法不被认为是相等的，目标也不被认为是相等的。

因此，即使传递给的委托与传递给的委托`-=`不是同一个实例`+=`，该事件仍将成功取消订阅。

# math - 计算变换原点 X,Y 值

> ID：10059547
> 
> 赞同：3
> 
> 时间：2012-04-08T00:43:10.933
> 
> 标签：math, animation, css, geometry, transform

```
<style type="text/css">

@-webkit-keyframes waveArm{
    0%,100% {
        -webkit-transform:rotate(0deg);
    }
    10%,30%,50%,70%,90% {
        -webkit-transform:rotate(90deg);
    }
    20%,40%,60%,80% {
        -webkit-transform:rotate(45deg);
        }
}

#arm {
    position:absolute;
    top:135px;
    left:135px;
    width:201px;
    height:74px;
    background:url(test-arm.png) 0 0 no-repeat;
    -webkit-animation: waveArm 3s 1s 1;
    -webkit-transform-origin:81% 46%;
}

</style>

<div id="arm"></div> 
```

![在此处输入图像描述](../Images/1c2c98e6f774e1b3c11feb4093e599ae.png)

我想知道是否有办法使用对象的高度和宽度来计算变换原点 X 和 Y 值，以便它像挥动手臂和肩膀一样平滑地围绕单个点旋转。

在这种情况下，我通过反复试验发现分别为 81% 和 46%，但我想要一个更简单的方法。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T20:31:17.900

Aaah! Figured it out in px. Easy really!

The width of the arm is 201px and the height is 74px. The pivot point i needed is 34px from the top and 34px from the right.

X starts from the left. Y starts from the top so...
X = 201-34 = 167
Y = 34

-webkit-transform-origin:167px 34px;

# ruby-on-rails - rails 如何区分相同 url 的方法

> ID：10059550
> 
> 赞同：0
> 
> 时间：2012-04-08T00:43:49.880
> 
> 标签：ruby-on-rails, rest

我是 rails 新手，我创建了第一个 rails 应用程序（博客），并按照[rails 文档](http://guides.rubyonrails.org/getting_started.html)中的指南逐步进行。

但是，当我运行应用程序时，我发现了一些我无法理解的东西。

[http://localhost:3000/posts/2](http://localhost:3000/posts/2)

使用`GET`方法，这将返回 id 为 2 的帖子的详细信息。

但是当更新这篇文章时，我发现表单的动作是'/posts/2'。

删除帖子时，我发现 rails 在 body 中创建了一个表单元素，其中包含 action '/posts/2' 和方法`POST`，所以我想知道 rails 是如何知道更新或删除这个帖子的？

因为我在后控制器中没有找到任何条件词。

谁能告诉我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T00:49:58.743

运行哪个动作由**路径**和**动词的唯一组合决定**

在您的应用程序文件夹中执行命令`rake routes`，您将看到路线列表。

路径，是到您的资源的 RESTful 路由。

动词是`GET` `POST` `DELETE`, 和`PUT`

我还推荐阅读[Rails 路由指南](http://guides.rubyonrails.org/routing.html)，它更详细地解释了这一点。

这是我的一个应用程序的示例输出`rake routes`：

```
 path name|verb  |path                              |action
============================================================================
    alias_lists GET    /alias_lists(.:format)             alias_lists#index
                POST   /alias_lists(.:format)             alias_lists#create
 new_alias_list GET    /alias_lists/new(.:format)         alias_lists#new
edit_alias_list GET    /alias_lists/:id/edit(.:format)    alias_lists#edit
     alias_list GET    /alias_lists/:id(.:format)         alias_lists#show
                PUT    /alias_lists/:id(.:format)         alias_lists#update
                DELETE /alias_lists/:id(.:format)         alias_lists#destroy 
```

请注意`show`，`update`和`destroy`都具有相同的路径，但动词不同。

```
show's verb    = GET
update's verb  = PUT
destroy's verb = DELETE 
```

# jquery - 仅使用第一个 $node->nid 变量在 node-tpl.php 的头部使用 Jquery 的 Drupal 视图

> ID：10059551
> 
> 赞同：1
> 
> 时间：2012-04-08T00:45:08.083
> 
> 标签：jquery, drupal, views

我有一个 Drupal 视图，它是一个节点列表。在 head 部分有一个包含 Jquery javascript 的 node-type.tpl.php。单击任何节点中的链接应加载引用单击节点的新 ajaxed 视图。我正在使用 ajax 通过将原始节点作为节点引用参数的 hook_menu 路径加载新视图。不幸的是，此单击当前仅加载引用到列表中第一个节点而不是单击的节点的视图。无论我单击哪个节点，我都只会获得引用列表中第一个节点的视图。我不明白为什么 javascript 没有为参数发送正确的节点 ID。这是 node-type.tpl.php 的 head 部分中的代码

```
 <script>
    Drupal.behaviors.myajax = function(context) {
    $(".ajaxclick").click(function(){
    <?php $mynid = $node->nid;?>
    var mynodeid = <?php echo $mynid ?>;
    $(".holder").load(Drupal.settings.basePath + "myajax/" + mynodeid);
   });
  }
 </script> 
```

并在体内；

```
<a class="ajaxclick" href= "#">Click me</a>
<div class="holder"></div> 
```

这是模块中的 hook_menu 代码：

```
 <?php
 function ajaxview_menu() {
   $items = array();
   $items['myajax'] = array(
     'title' => 'My Ajax',
      'page callback' => 'ajaxview_myajax',
     'description' => 'Ajax View',
     'access arguments' => array('access content'),
     'type' => MENU_CALLBACK,
   );
   return $items;
 }
 function ajaxview_myajax($nid) {
   $node = node_load($nid);
   print '<div class="rightcolumn">';
   print $viewName = 'Comments';
   $display_id = 'default';
   $myArgs = $nid;
   print views_embed_view($viewName, $display_id, $myArgs);
   print '</div>';
   exit();
  } 
```

任何人都知道为什么如何让 jquery javascript 识别每个节点的单独节点 ID？

或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:10:19.463

我遇到了同样的问题，最后得到了@William Tate 的帮助

解决方案：

```
$('.up2').click(function() {
    $(this).closest('.up2').find('.nummer_dark').text();
} 
```

我的问题： [Drupal 7 + jQuery，如何让 jQuery 只与活动节点交互（通过 nid）而不是列表中的每个节点](https://stackoverflow.com/questions/13053727/drupal-7-jquery-how-to-get-jquery-to-interact-only-with-the-active-node-via/13056236#comment17732835_13056236)

# python - 在字符串的开头和结尾插入字符

> ID：10059554
> 
> 赞同：143
> 
> 时间：2012-04-08T00:45:49.463
> 
> 标签：python

我是新手，并试图找到一种在字符串的开头和结尾插入多个 L 的方法。所以如果我有一个字符串说

“今天早上我把蛋糕放在哪里了”

我想在开头插入 1 L，在结尾插入 2 L，所以它看起来像：“我今天早上把蛋糕放在哪里了”我该怎么做。谢谢你

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-04-08T00:47:09.790

字符串是不可变的，因此您不能将字符插入现有字符串。您必须创建一个新字符串。您可以使用字符串连接来做您想做的事情：

```
yourstring = "L" + yourstring + "LL" 
```

请注意，您还可以`L`使用乘法创建一个带有 n 的字符串：

```
m = 1
n = 2
yourstring = ("L" * m) + yourstring + ("L" * n) 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-04-08T01:06:46.707

为了完整性以及其他答案：

```
yourstring = "L%sLL" % yourstring 
```

或者，更向前兼容 Python 3.x：

```
yourstring = "L{0}LL".format(yourstring) 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-04-08T01:00:20.783

您还可以使用连接：

```
yourstring = ''.join(('L','yourstring','LL')) 
```

结果：

```
>>> yourstring
'LyourstringLL' 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-12-28T13:39:45.543

如果您想在现有字符串的其他位置插入其他字符串，您可以使用下面的选择方法。

在第二个位置调用字符：

```
>>> s = "0123456789"
>>> s[2]
'2' 
```

带有开始和结束位置的调用范围：

```
>>> s[4:6]
'45' 
```

在该位置之前调用字符串的一部分：

```
>>> s[:6]
'012345' 
```

在该位置之后调用字符串的一部分：

```
>>> s[4:]
'456789' 
```

将您的字符串插入第 5 个位置。

```
>>> s = s[:5] + "L" + s[5:]
>>> s
'01234L56789' 
```

也`s`相当于`s[:]`.

有了您的问题，您可以使用所有字符串，即

```
>>> s = "L" + s + "LL" 
```

或者如果`"L"`是其他字符串（例如我称之为`l`），那么您可以使用该代码：

```
>>> s = l + s + (l * 2) 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2019-04-26T09:32:06.573

添加到[C2H5OH 的答案](https://stackoverflow.com/a/10059623/943773)中，在 Python 3.6+ 中，您可以使用格式字符串使其更简洁：

```
s = "something about cupcakes"
print(f"L{s}LL") 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-29T01:37:50.570

假设我们有一个名为 yourstring 的字符串：

```
for x in range(0, [howmanytimes you want it at the beginning]):
    yourstring = "L" + yourstring
for x in range(0, [howmanytimes you want it at the end]):
    yourstring += "L" 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-05-13T06:30:52.910

您可以为此使用 f 字符串

```
foo = "where did I put my cupcake this morning"
bar = 'L'
foobar = f'{bar*10}{foo}'
print(foobar) 
```

你可以用`10`你想把 L 放在你的字符串中的次数来替换，你也可以这样做

```
foo = "where did I put my cupcake this morning"
bar = 'L'
foobar = f'{bar*10}{foo}{bar*10}'
print(foobar) 
```

# android - 在android中获取网页的title或header信息和url

> ID：10059555
> 
> 赞同：1
> 
> 时间：2012-04-08T00:46:17.983
> 
> 标签：android, url

我是 android 应用程序开发的新手，我一直在尝试找出如何将标题或标题信息以及网页的 url 获取到我正在开发的应用程序中。我想要做的是获取一个站点，例如 mashable.com，并获取所有最近文章的标题和网址，并在我的应用程序中以简单的列表形式显示它们。任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T00:50:07.217

> 该应用程序将从流行的 Android 开发人员站点 Androidster 获取 RSS 提要，并将其解析为简单的 Java 对象列表，您可以使用这些对象来支持 Android ListView（请参阅下载以获取源代码）。这是典型的多态行为——提供相同行为的不同实现（不同的 XML 解析算法）。清单 1 显示了使用接口在 Java 代码中对此进行建模是多么容易。

[http://www.ibm.com/developerworks/opensource/library/x-android/index.html](http://www.ibm.com/developerworks/opensource/library/x-android/index.html)

取自：[https ://stackoverflow.com/questions/1253788/simple-rss-parser-for-android](https://stackoverflow.com/questions/1253788/simple-rss-parser-for-android)

# haskell - 类型家庭类型黑客

> ID：10059557
> 
> 赞同：3
> 
> 时间：2012-04-08T00:46:21.833
> 
> 标签：haskell, types

我正在尝试编写一个相当多态的库。我遇到了一个比说更容易展示的情况。它看起来有点像这样：

```
{-# LANGUAGE ScopedTypeVariables #-}
{-# LANGUAGE MultiParamTypeClasses #-}
{-# LANGUAGE TypeFamilies #-}
import Data.Map (Map)
import qualified Data.Map as Map

class Format f where type Target f
class Format f => Formatter x f where
  target :: forall y. Formatable y => Target f -> x -> y
class Formatable y where name :: y -> String

instance Formatable Integer where name = show
instance Formatable Int where name = show

split :: forall x f. (Format f, Formatter x f) => x -> f -> String -> [Either String (Target f)]
split = undefined

display :: forall x f. (Format f, Formatter x f) => f -> String -> x -> String
display f str x = let
  chunks = split x f str
  built = foldr apply "" chunks
  apply (Left s) accum = accum ++ s
  apply (Right t) accum = accum ++ name (target t x)
  in foldr apply "" chunks 
```

本质上，我们有多态`Format`s，它定义了许多`Target`s。还有许多`Formattable`对象，它们知道如何响应一堆不同的格式选项（这里简化为`name`）。

它们`Formattables`以多种方式组成，并且可以响应许多不同的目标。s 本质上是和`Formatter`之间的路由器——给定一个目标（来自特定格式），它们以合适的对象响应。`Format``Formattable``Formattable`

这一切都很抽象。这是一个例子：

*   `DateFormat`指定目标，如`Year`、`Month`和`Day`。
*   `MonthType`是一种`Formattable`新类型`Int`，其名称如“二月”
*   还有简单的`instance Formattable Int where name = show`
*   `DateTime`可能是`(Int, MonthType, Int)`.

（很明显，我在这里删掉了很多机器，比如用管道传递正确的值，但你明白了。）

该`display`功能相当简单。它需要一个格式化程序、一个指定格式的字符串、一个要显示的对象，并将其全部呈现为一个字符串。

首先，它将字符串分解为目标和字符串。例如，日期格式化程序可能会将字符串`"%Y-%m-%d"`分解为`[Right Year, Left "-", Right Month, Left "-", Right Day]`. 该`split`功能可以做到这一点，并已在此处进行了编辑。

该`display`函数只是跟踪`Formattable`每个目标的 s 并累积字符串。

或者，至少，它应该是。

但它无法通过类型检查并出现以下错误：

```
Reduced.hs:20:16:
    Could not deduce (Target f ~ Target f0)
    from the context (Format f, Formatter x f)
      bound by the type signature for
                 display :: (Format f, Formatter x f) => f -> String -> x -> String
      at Reduced.hs:(19,5)-(24,30)
    NB: `Target' is a type function, and may not be injective
    Expected type: [Either [Char] (Target f0)]
      Actual type: [Either String (Target f)]
    In the return type of a call of `split'
    In the expression: split x f str
    In an equation for `chunks': chunks = split x f str
Failed, modules loaded: none. 
```

而且我一生都无法弄清楚为什么。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T01:03:17.373

问题是`Target f`不确定`f`，这意味着函数

```
target :: (Formatter f x, Formatable y) => Target f -> x -> y 
```

永远不能被调用。无论您给 什么类型的注释`target`，您都无法确定是什么`f`，因此编译器永远无法确定`Formatter`要使用哪个实例。我不是 100% 确定，但可能解决方案不是使用多参数类型类，而是让其中一个`x`或`f`成为另一个的函数。此外，您可能应该`Format`完全删除该类（您知道不需要类来使用类型族吗？）。也许是这样的：

```
class Formatter x where
    type Format x
    target :: Formatable y => Format x -> x -> y 
```

# c++ - 尝试设置用户定义的消息处理程序时堆栈溢出（！）

> ID：10059559
> 
> 赞同：1
> 
> 时间：2012-04-08T00:46:49.307
> 
> 标签：c++, c++builder

我有这个 C++ Builder 2009 应用程序。这并不绝望——这是一个演示，但它驱使我去苏格兰。我现在全是单一麦芽威士忌，我不得不寻求帮助。

这个应用程序有一个主窗体和其他一些可以正常工作的东西。我没有理由认为它有什么问题。我添加了另一种形式，“TfoPNGload”，并添加了一些组件 - 没有什么不寻常的。我将它从自动创建列表中取出，以便可以按需创建实例。

作为测试，我在主窗体上添加了一个 SpeedButton，并在单击中创建了一个“TfoPNGload”窗体的实例并显示（）它：

```
void __fastcall TForm1::SpeedButton1Click(TObject *Sender)
{
  myPNGform=new TfoPNGload(NULL);
  myPNGform->Show();
} 
```

这也很好用——我点击按钮，弹出一个表单。

一切正常。

我添加了一个消息处理程序，甚至在我发送任何消息之前事情就变得异常了。我添加了一个函数和宏，使其成为消息处理程序：

```
class TfoPNGload : public TForm
{
__published:    // IDE-managed Components
    TImage *Image1;
    TPanel *Panel1;
    TSpeedButton *SpeedButton1;
    TTimer *tiSlideShow;
    TLabel *Label1;
    void __fastcall tiSlideShowTimer(TObject *Sender);
    void __fastcall FormCreate(TObject *Sender);
private:
    PNGload *myLoad;
    void __fastcall filesLoaded(TObject *Sender);
protected:
public:     // User declarations
    __fastcall TfoPNGload(TComponent* Owner);

    MESSAGE void __fastcall WMAPP(TMessage& msg);

    BEGIN_MESSAGE_MAP
    MESSAGE_HANDLER(WM_APP, TMessage, WMAPP)
    END_MESSAGE_MAP(TfoPNGload)

    vector<PNGtask*> *PNGresult;
    int vecSize;
}; 
```

然后，当我单击按钮创建表单时，会弹出经典的“堆栈溢出”消息框！

如果我注释掉宏：

```
//      BEGIN_MESSAGE_MAP
//      MESSAGE_HANDLER(WM_APP, TMessage, WMAPP)
//      END_MESSAGE_MAP(TfoPNGload) 
```

..表单创建得很好！

我还没有发布任何消息 - 只是处理宏似乎会在表单创建时产生溢出。WMAPP 函数无论如何都是空的。

任何人都见过这样的东西，或者更好的是，修复它？

如果迫在眉睫，我有一个解决方法——在主窗体中使用相同的宏确实有效，所以我可以在那里发布我的东西，然后调用“TfoPNGload”表单。它可能会起作用，但它使我的代码结构变得一团糟，TBH，它很难按照原样遵循:((

Rgds，马丁

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T01:32:14.227

我怀疑这条线：

```
END_MESSAGE_MAP(TfoPNGload) 
```

应该指定基类：

```
END_MESSAGE_MAP(TForm) 
```

消息映射宏生成一个名为`Dispatch`或类似的虚函数，其中包含一个`switch`用于处理映射情况的大函数。`END_MESSAGE_MAP(TfoPNGLoad)`宏将生成将`default:`调用的开关的情况`TfoPNGLoad::Dispatch`。但是，你猜怎么着，这正是宏定义的函数：所以发生了失控的直接递归。

您希望将超类名称传递`TForm`给 end 宏，以便它生成`default:`到基类的案例路由`Dispatch`。

# javascript - Javascript/Jquery 数组搜索

> ID：10059561
> 
> 赞同：0
> 
> 时间：2012-04-08T00:47:05.947
> 
> 标签：javascript, jquery, arrays, search

我正在开发一个在 Javascript 中使用嵌套数组的应用程序。我有一个这样的数组：

```
var a = ["Once upon a time there was a man."];

    a[1] = ["He was tall."];
           a[1][1] = ["He often bumped his head."];

    a[2] = ["He was short."];
           a[2][1] = ["He couldn't reach high shelves."] 
```

有没有一种简单的方法来确定一个值处于什么级别的数组？我希望能够输入“他经常撞到头”并让它返回“a [1] [1]”（或者如果我输入“他很矮”，我会返回“a [2]” ）。数组将具有不确定和波动的大小。

提前感谢您对此的任何帮助。我是 javascript 和 jquery 的新手，因此对您的解决方案的任何解释都将受到高度赞赏。再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T00:56:19.297

一些递归应该可以解决问题：

```
Array.prototype.recursiveIndexOf = function(item, start) {
    var i = this.indexOf(item);
    var r, c;

    start = start || [];

    if(i > -1) {
        return start.concat([i]);
    }

    for(i = 0; i < this.length; i++) {
        c = this[i];

        if(Object.prototype.toString.call(c) === '[object Array]') {
            r = c.recursiveIndexOf(item, start.concat(i));

            if(r !== null) {
                return r;
            }
        }
    }

    return null;
}; 
```

[这是一个演示。](http://jsfiddle.net/minitech/ZBvfE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T01:02:43.667

对于两级数组，您可以这样做：

```
function findMultiArray(array, str) {
    var innerArray;
    for (var i = 0; i < array.length; i++) {
        innerArray = array[i];
        for (var j = 0; j < innerArray.length; j++) {
            if (innerArray[j] == str) {
                return([i, j]);
            }
        }
    } 
    return null;
} 
```

请注意，我只返回一个带有两个索引的实际数组，因为如果您需要数据形式的数据，这会更容易使用。

与您的请求不同，它永远不会返回等价的`a[1]`因为`a[1]`是一个数组，而不是一个字符串，所以匹配是 with `a[1][0]`，而不是 with `a[1]`。在这种情况下，它将返回`[1,0]`.

如果您希望返回值采用不同的形式，只需一行代码即可看到匹配项，而 i 和 j 是匹配的索引。

如果数组的级别可以任意深，在不同的地方有不同的深度，那么这将涉及更多一些，并且需要询问项目的类型以查看它们是否包含嵌套数组或仅包含字符串，并且需要某种堆栈来保持当前位置。递归是最容易的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T01:13:10.037

这是一个更简单的答案。;)

```
function array_search(ob,str)
{
    for(var i=0;i<ob.length;++i)
    {
        if(typeof(ob[i])=='object'&&(ob[i] instanceof Array))
        {
            var foo=array_search(ob[i],str);
            if(foo!=null)
                return i+'->'+foo;
        }else
        if(typeof(ob[i])=='string'&&ob[i]==str)
        {
            return i;
        }
    }
    return null;
}

var a = ["Once upon a time there was a man."];
a[1] = ["He was tall."];
a[1][1] = ["He often bumped his head."];
a[2] = ["He was short."];
a[2][1] = ["He couldn't reach high shelves."]

alert(array_search(a,'He was short.')); 
```

# asp.net-mvc - MVC4 中的 ELMAH 和 API 控制器未记录错误

> ID：10059563
> 
> 赞同：12
> 
> 时间：2012-04-08T00:47:34.723
> 
> 标签：asp.net-mvc, asp.net-mvc-4, elmah

在 MVC4 中使用 API 控制器，当控制器操作引发异常时，ELMAH 不会记录错误。

我认为问题在于 MVC4 将 HTTP 状态代码设置为 500，并在 JSON 对象中返回异常详细信息，但它不会引发未处理的异常，因此 ELMAH 永远不会看到它。

如何让 ELMAH 捕获状态代码不是 200 的所有响应？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-07T06:50:38.037

前面描述的 anwser 不起作用。我在我的测试服务器上尝试过并收到一个错误（“给定的过滤器实例必须实现以下一个或多个过滤器接口：IAuthorizationFilter、IActionFilter、IResultFilter、IExceptionFilter。”）

然后我意识到发生了什么....您正在尝试将自定义过滤器添加到 MVC 全局过滤器 (filters.Add(new ElmahHandledErrorLoggerFilter());)

为了解决这个问题，我在 GlobalFilter 和 HttpFilter 中拆分了过滤器注册

过滤器配置文件

```
 public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
    }

    public static void RegisterHttpFilters(HttpFilterCollection filters)
    {
        filters.Add(new ElmahHandledErrorLoggerFilter());
    } 
```

全球.asax

```
 FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    FilterConfig.RegisterHttpFilters(GlobalConfiguration.Configuration.Filters); 
```

;-)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-09T01:04:50.390

**更新：此答案在最新版本中不起作用。使用 julianox 的答案。**

从这里的信息中找到答案：[http ://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling](http://www.asp.net/web-api/overview/web-api-routing-and-actions/exception-handling)

异常过滤器记录到 elmah 的位置：

```
public class ElmahHandledErrorLoggerFilter : ExceptionFilterAttribute
{
    public override void OnException(HttpActionExecutedContext actionExecutedContext)
    {
        base.OnException(actionExecutedContext);

        ErrorSignal.FromCurrentContext().Raise(actionExecutedContext.Exception);
    }
} 
```

但您还必须将错误过滤器添加到 GlobalConfiguration 过滤器：

```
 public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        GlobalConfiguration.Configuration.Filters.Add(new ElmahHandledErrorLoggerFilter());
        filters.Add(new ElmahHandledErrorLoggerFilter());
        filters.Add(new HandleErrorAttribute());
    } 
```

# routes - 在 MapQuest / OpenStreetMap 中询问路线或路线矩阵时更改速度限制？

> ID：10059566
> 
> 赞同：0
> 
> 时间：2012-04-08T00:48:56.797
> 
> 标签：routes, openstreetmap, mapquest

我正在研究 OpenStreetMap 的 MapQuest API，它似乎是一个不错的小服务 =)

在询问路线或路线矩阵之前，我一直在寻找一种更改/设置道路速度的方法。有时你知道有暴风雪或其他东西会减慢交通速度。在那些时候，您会想要降低某些类型道路的速度。

那么，对于 MapQuest 或其他使用 OpenStreetMap 的服务，有没有办法在 HTTP 请求中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:07:29.183

不幸的是，[MapQuest Open Directions Service](http://open.mapquestapi.com/directions/)不支持将与路线关联的速度更改为输入参数。Open Directions Service 也不支持路线矩阵功能。[如果您对MapQuest 开放数据和服务](http://developer.mapquest.com/web/products/open)有任何其他问题，请随时查看[MapQuest 开发者网络](http://developer.mapquest.com)上的[论坛](http://developer.mapquest.com/web/info/forums)。

[MapQuest Directions Web Service](http://www.mapquestapi.com/directions/)的[许可版本](http://developer.mapquest.com/web/products)（社区版）确实提供了[路线矩阵](http://www.mapquestapi.com/directions/#matrix)功能，但它不允许对道路限速数据进行操作。我知道这有点令人困惑，但 MapQuest API 和 Web 服务的许可版本使用商业数据，而不是来自 OpenStreetMap 的免费数据。

乔纳森

# android - android build：通过命令行构建将 jar 添加到 endstate

> ID：10059574
> 
> 赞同：0
> 
> 时间：2012-04-08T00:51:19.610
> 
> 标签：android, command-line, build, classpath

关于[这个问题](https://stackoverflow.com/questions/3935753/android-include-external-jar-in-build-without-eclipse)，简单地把一个罐子放进去`/libs`并不会`.dex`在调用时自动神奇地把那个罐子包括在里面，比如说，`ant debug`。至少在 Android SDK 版本 15 中是这样。

我已经通过比较创建两种不同方式的同一个项目来验证这一点。首先（称为“Alpha”），由 Eclipse 编写。其次，via `android create project ...`, blah blah blah（Ant 方式，称之为“Bravo”）。

我使用`ant debug`. 比较他们的目录， Bravo 缺少`/bin`下面的罐子；阿尔法不是。`<project_root>/libs``*.d`

在项目创建期间嵌入 Eclipse 有什么魔力？

更好的是，如何确保`ant debug|release`在构建项目时将 jar 传递给最终状态中包含 jar？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T01:54:51.557

`-pre-build`如果您想硬连线它，您可能只需要调整 build.xml 以在节点中包含类似以下内容。您还可以将其添加到 build.xml 文件中的自定义目标中，您可以从需要时使用命令行。像下面这样的东西可以工作。

```
<target name="add-jar">
    <copy file="${src.folder}/YourJarHere.jar" tofile="libs/YourJarHere.jar" overwrite="true"/>
</target> 
```

在`${src.folder}`ant.properties 文件中定义的位置。

就像是`src.folder=PATHOFYOURJAR`

然后你应该能够运行

```
ant debug add-jar 
```

包括文件。

过去我不得不手动创建 libs 文件夹，但我不明白为什么不能通过 build.xml 文件执行此操作。希望这可以帮助！

# iphone - 为什么我的 UILabel 没有居中？

> ID：10059577
> 
> 赞同：1
> 
> 时间：2012-04-08T00:51:36.640
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我正在尝试将我的 UILabel 水平居中。这就是它最终的样子（注意它没有中心）。

![在此处输入图像描述](../Images/719f997538179244c58b17ab74723384.png)

```
 ReflectionView *aReflectionView = [[ReflectionView alloc]initWithFrame:CGRectMake(((self.view.bounds.size.width / 2) - 150), 40, 300, 90)];
    UILabel *aLabel = [[UILabel alloc]initWithFrame:CGRectMake(((self.view.bounds.size.width / 2) - 150), 0, 300, 90)];
    aLabel.textAlignment = UITextAlignmentCenter;
    aLabel.text = @"1 lbs";
    self.weightLabel = aLabel;
    [aReflectionView addSubview:self.weightLabel];
    self.weightReflectionView = aReflectionView;
    [self.view addSubview:self.weightReflectionView ];
    [self.weightReflectionView  updateReflection]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T01:03:14.007

该`textAlignment`属性将在 的框架内对齐文本`UILabel`，而不是在框架之外。我的 ASCII 技能有点生疏，但这就是我的意思。考虑下面的标签，其中`|`表示标签的左/右边缘。

```
|173 磅 | => 左对齐
| 173 磅| => 右对齐
| 173 磅 | => 居中对齐（就其父视图而言并不完全居中）

```

现在考虑包含在另一个视图中的相同标签，其中外部`[]`表示包含视图的边缘，内部`|`表示包含标签的边缘。请注意内部标签如何在其父视图中不完全居中，并且略微向右推（距左侧 2 个空格，距右侧 1 个空格）。

```
[ |173 磅 | ] => 左对齐
[ | 173 磅| ] => 右对齐
[ | 173 磅 | ] => 居中对齐

```

如果您希望标签始终在超级视图或屏幕中居中对齐，则需要确保标签的宽度与其容器匹配，然后设置`textAlignment`为居中。就是这样：

```
[|173 磅 |] => 左对齐
[| 173 磅|] => 右对齐
[| 173 磅 |] => 居中对齐（完全对齐）

```

这是您希望子视图与父视图的确切大小相匹配的常见情况。您可以使用该`bounds`属性轻松地做到这一点。

```
ReflectionView *aReflectionView = [[ReflectionView alloc] initWithFrame:..];
// Use the bounds of the superview to set the subview's frame.
UILabel *aLabel = [[UILabel alloc] initWithFrame:aReflectionView.bounds]; 
```

作为 UI 调试提示，尝试更改有问题的视图（标签）的背景以准确显示它所占用的区域，这通常有助于解决许多此类问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T01:18:57.550

仅出于调试目的，尝试设置`backgroundColor`of`aLabel`并`aReflectionView`查看它们的放置位置。

```
aLabel.backgroundColor = [UIColor redColor];
aReflectionView.backgroundColor = [UIColor blueColor]; 
```

您应该看到，`aReflectionView`在其超级视图中正确居中，但`aLabel`包含在其中的 不是。为什么不？因为这条线：

```
UILabel *aLabel = [[UILabel alloc]initWithFrame:CGRectMake(((self.view.bounds.size.width / 2) - 150), 0, 300, 90)]; 
```

由于`aLabel`包含在 内`aReflectionView`，它应该在边界内居中`aReflectionView`，而不是在 的边界内`self.view`。向右滚动以查看更改：

```
UILabel *aLabel = [[UILabel alloc]initWithFrame:CGRectMake(((aReflectionView.bounds.size.width / 2) - 150), 0, 300, 90)]; 
```

出于您的目的，最好`aLabel`简单地填充`aReflectionView`：

```
UILabel *aLabel = [[UILabel alloc]initWithFrame:aReflectionView.bounds]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T01:24:26.917

问题不在于 UILabel 中文本的对齐方式，而在于 UILabel 本身的对齐方式。具体来说，您正在创建 UILabel 以根据 self.view 的宽度（特别是宽度）居中对齐，但您将其添加到 aReflectionView （较窄，从 self.view 的左边缘偏移）。视图，并且已经在屏幕上居中）。在这种情况下，最终效果是您从 self.view 的左边缘获得了两次偏移，一次是在 aReflectionView 的 x 坐标中，然后是在您放入的 aLabel 的 x 坐标中aReflectionView，这显然不是你的意图。最简单的修复可能是这样的：

```
UILabel *aLabel = [[UILabel alloc] initWithFrame:CGRectMake(((aReflectionView.bounds.size.width / 2) - 150), 0, 300, 90)]; 
```

底线，将标签居中放置在您要放置的视图上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-23T01:09:01.553

对于那些在谷歌上搜索的人，我有一个答案。问题是，我有一些转义字符来指定代码中的新行，如下所示：

```
self.emptyLabel.text = @"No likes yet! \n\
\
\n(Like some cards to save them here)"; 
```

这导致文本偏离中心对齐。只需像这样删除它们：

```
self.emptyLabel.text = @"No likes yet! \n\n(Like some cards to save them here)"; 
```

# mysql - 中期临时表 - 动态创建表以持续 15-30 天？

> ID：10059578
> 
> 赞同：2
> 
> 时间：2012-04-08T00:51:49.937
> 
> 标签：mysql, database, temp-tables, database-administration

## 语境

我目前正在开发一种用于管理订单以及在技术人员和服务人员之间进行沟通的工具。产业背景是广播和电视。多个客户期望每个媒体文件都按照自己的规格制作，这意味着即使在单个客户订单的有限范围内，工作流程也会有很大差异。

一位客户可以在一天要求一个 SD 文件，而下一天要求一个包含多达 14 个文件的完整 HD 包......在 MySQL 数据库中，我试图存储有关构成工作流的所有小任务的准确信息，在多种形式：

*   每次完成任务时的 DATETIME 值，用于准确跟踪
*   VARCHARs 中公司文件系统中新创建文件的路径
*   归档 TEXT 值中的背景信息（用户评论等信息，例如，当事件发生并阻止向前发展时，他们可以在此提要中对此进行评论）

将其乘以 30 种不同的文件类型，这对于单个表来说太多了。所以我想我会按客户分解它：每个客户一张表，这样任何订单只需要使用一张不操作超过 15 个字段的表。尽管如此，当客户有 9 种不同的转码规范并且特定订单只需要一个时，这仍然是一个非常严格的解决方案。我想我需要为每个转码字段添加标志字段，以指示该特定订单需要哪些字段。

## 概念

然后我有一个疯狂的想法，也许我可以创建一个临时表以在订单运行时持续（范围可以从大约 1 天到 1 个月）。我们很少同时运行超过 25 个订单，因此不会太拥挤。

这个想法是为每个订单量身定制一个表格，消除对标志和不必要的永久空字段的需要。订单完成后，表格将被刷新，JSON 编码，转换为 TEXT 或 BLOB，以便稍后在需要更改时恢复。

如果 DBMS（尤其是 MySQL）曾经存在过，您是否有过从此类实践中苦苦挣扎的经验？这听起来像是一个可行的选择吗？我很高兴尝试（我已经开始了），我正在寻求建议，以便继续前进或停下来。

感谢您的输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T08:34:43.490

嗯，当然可以。但是，您不能将 MySQL 临时表用于此类长期存储，您将不得不使用“普通”表，并有一些清理程序......

但是，我不明白为什么单个表的数据量过多。如果您的查询由于大量数据而开始运行缓慢，那么您应该在数据库中添加一些索引。我还认为还有另一个缺点：以后构建报告会更加困难，当您有 25 个具有相同类型数据的表时，您将必须运行 25 个查询并合并数据。

我不明白这一点，真的。相同种类的数据应该在同一个表中。

# git - rebar 无法从 github 获得依赖

> ID：10059579
> 
> 赞同：10
> 
> 时间：2012-04-08T00:52:18.020
> 
> 标签：git, github, erlang, rebar

我无法使用 rebar 从 github获得**任何依赖。**

`rebar.config`文件：

```
{sub_dirs, ["rel"]}.

{deps_dir, ["deps"]}.
{erl_opts, [debug_info]}.

{deps, [
 {thrift_erl, "0.5.0", {git, "git://github.com/xslogic/thrift_erl", "HEAD"}}, 
 {eleveldb, "1.0.1", {git, "git://github.com/xslogic/eleveldb", "HEAD"}} 
]}. 
```

当我做 ./rebar compile 我得到：

```
Dependency not available: thrift_erl-0.5.0 ({git,
                                         "git://github.com/xslogic/thrift_erl",
                                         "HEAD"})
Dependency not available: eleveldb-1.0.1 ({git,
                                       "git://github.com/xslogic/eleveldb",
                                       "HEAD"}) 
```

它一直在寻找最后`DEP_NAME`的**破折号**，但似乎找不到。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-08T01:35:25.363

我认为你应该`rebar get-deps`首先使用命令。如果 rebar 编译命令出错，试试`rebar delete-deps`, `rebar clean`. 如果还是报错，直接切换到相关deps，独立编译这些项目。（我曾经遇到过这个问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T15:40:10.410

如前所述，您忘记了 .get ，并且版本尝试添加提交编号，因为它们会升级软件和版本，因此 master 可以指向不同的版本，这会在以后破坏 deps。

因此更改`HEAD`为提交并将版本设置为此提交或保留 HEAD 但将版本设置为 *（最新版本）

这对以后有很大帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:49:25.883

您的 git 路径根本不正确。

你忘记了最后的“.git”。应该`git://github.com/xslogic/eleveldb.git`不是`git://github.com/xslogic/eleveldb`。

# php - mysql php的客户生命周期价值

> ID：10059581
> 
> 赞同：3
> 
> 时间：2012-04-08T00:52:24.890
> 
> 标签：php, mysql

我花了一周的时间试图弄清楚这一点，它通过结合来自各种来源的东西有点工作，但还没有完全工作。

基本上我有一个*订单*表，我试图按客户的第一个订单日期对客户进行分组，然后显示该组到目前为止的总支出。

这是我的 SQL 查询：

```
SELECT DISTINCT email, billing_name,
FORMAT(SUM(total),2) AS total,
DATE_FORMAT(MIN(orderdate), '%Y-%m') AS firstorder,
DATE_FORMAT(MAX(orderdate), '%Y-%m') AS lastorder
FROM orders
GROUP BY email
ORDER BY firstorder ASC 
```

我正在使用 PHP：

```
$rows = array();
while($row = mysql_fetch_array($query))
$rows[] = $row;
foreach($rows as $row) {
    $currMonth = $row['firstorder'];
    $total += $row['total'];
    if ($currMonth != $prevMonth) {
            echo $currMonth.' = $'.$total';
            $prevMonth = $currMonth;
            $total = 0;
        }
    } 
```

这给了我一个类似的列表：

```
 2010-05 = $230.49
    2010-06 = $557.32
    2010-08 = $223.38 
```

但数字不加起来，我做错了什么？以及如何显示一个小组在其他月份花费了多少？这就是我最终想要显示数据的方式，[http://www.quickcohort.com/](http://www.quickcohort.com/)

请帮忙！谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T01:23:35.373

取决于您真正追求的是什么以及您的数据是什么样的。

如果数据看起来像：

```
email          |BILLING NAME|Total  |OrderDate
----------------------------------------------
john@gmail.com |John Smith  |200.00 |15/05/2010
john@gmail.com |John Smith  | 15.49 |19/10/2010
john@gmail.com |Rico Swavez | 15.00 |10/08/2010
jane@gmail.com |Jane Doe    |250.00 |23/06/2010
jane@gmail.com |Jane Doe    |307.32 |27/10/2010
juan@gmail.com |Juan Valdez |223.38 |30/08/2010 
```

然后...

```
SELECT email, billing_name,
FORMAT(SUM(total),2) AS total,
DATE_FORMAT(MIN(orderdate), '%Y-%m') AS firstorder,
DATE_FORMAT(MAX(orderdate), '%Y-%m') AS lastorder
FROM orders
GROUP BY email, billing_name
ORDER BY firstorder ASC 
```

将返回

```
EMAIL          | BILLING NAME |TOTAL |FIRSTORDER | LASTORDER 
------------------------------------------------------------
john@gmail.com | John Smith   |215.49|2010-05    | 2010-10
jane@gmail.com | Jane Doe     |557.32|2010-06    | 2010-10
john@gmail.com | Rico Swavez  | 15.00|2010-08    | 2010-08
Juan@gmail.com | Juan Valdez  |223.38|2010-08    | 2010-08 
```

首先在 mysql 中运行您的查询是否得到您想要的结果？如果不是，那么问题出在 SQL 上，而不是 PHP 上。如果 SQL 正在返回您想要的，那么问题出在 PHP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-10T16:26:47.360

以下查询应该可以解决问题：

```
SELECT 
    FORMAT(SUM(z.`totalSpent`),2) AS cohortRevenueToDate, 
    z.`firstOrderMonth`,
    GROUP_CONCAT(`email`) 
FROM 
(
    SELECT 
        `email`,
        SUM(`total`) AS totalSpent, 
        DATE_FORMAT(MIN(`orderdate`), '%Y-%m') AS firstOrderMonth 
    FROM `orders`
    GROUP BY `email`
) AS z
GROUP BY z.`firstOrderMonth`
ORDER BY z.`firstOrderMonth` ASC 
```

如果您对每个队列组成感兴趣，我已经包含了一个 GROUP_CONCAT。

# asp.net - ForgotYourPassword 使用 Vb.net 表单和代码

> ID：10059582
> 
> 赞同：-3
> 
> 时间：2012-04-08T00:52:53.707
> 
> 标签：asp.net, vb.net, visual-studio-2010, sql-server-2008, password-recovery

问题：-表包括`CompanyID`：，，，，，`CompanyName``CompanyPwd``CompanyLogo``Email`

我需要`ForgotYourPassword Code`：

使用 Vb.net 向公司电子邮件发送电子邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T01:08:57.800

您应该有一个安全问题和答案栏。网上有样品流通，你要做的就是`SEARCH`。看这个例子：（*它会向用户发送一封电子邮件*）

```
Dim SmtpServer As New SmtpClient()
Dim mail As New MailMessage()
SmtpServer.Credentials = New Net.NetworkCredential("username@gmail.com", "password")
SmtpServer.Port = 587
SmtpServer.Host = "smtp.gmail.com"
mail = New MailMessage()
mail.From = New MailAddress("YOURusername@gmail.com")
mail.To.Add("TOADDRESS")
mail.Subject = "Test Mail"
mail.Body = "This is for testing SMTP mail from GMAIL"
SmtpServer.Send(mail)
MsgBox("mail send") 
```

但在执行上述操作之前，您应该从表中获取密码：

```
SELECT CompanyPwd FROM tableName WHERE Email = ''; 
```

# spotify - 为 Spotify 播放列表创建自定义视图

> ID：10059589
> 
> 赞同：2
> 
> 时间：2012-04-08T00:54:58.983
> 
> 标签：spotify

我正在尝试为 Spotify 播放列表创建自定义视图。现在我使用以下内容在我的应用程序中创建一个播放列表视图：

```
var playlist = models.Playlist.fromURI(myPlaylist);
var playerView = new views.Player();
playerView.track = playlist.get(0);
playerView.context = playlist;
var cover = playlist.get(0).data.album.cover;
$('#grid').append(playerView.node); 
```

默认的 spotify 播放列表视图具有艺术专辑汇编，单击播放列表还可以直接访问播放列表。我想更改它，以便我可以将播放列表艺术设置为上面的封面变量（或其他自定义图像），并限制超链接，使其不访问播放列表，而只启动播放/暂停。

我尝试直接编辑节点 innerHTML，但播放列表实际上也没有开始播放。是否有一种简单的方法可以编辑默认的 spotify 视图，或者是否有可用的示例代码来创建自定义视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:07:34.027

如果只是在应用程序本身中，您可以覆盖播放器的 CSS 和 HTML。这是我的做法：

首先在 CSS 中：

```
.sp-image-loaded { opacity: 0; } 
```

在 HTML 中：

```
player.node.firstChild.style.backgroundImage = "url(myimage.jpg)"; 
```

希望，它对你有用。

# c# - 如何制作清单 {get;set;} 每个线程，

> ID：10059591
> 
> 赞同：6
> 
> 时间：2012-04-08T00:55:37.627
> 
> 标签：c#

我有一个需要动态设置列表的类。我还使用 Threading 将此类称为 10 次左右。

`public static List<string> MyList {get;set;}`

但是，我是线程新手，因为有人告诉我这是不安全的。我的问题是如何为`MyList` 每个线程创建一个实例？

一个例子会很棒！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T00:58:16.067

使用[`ThreadStatic`](http://msdn.microsoft.com/en-us/library/system.threadstaticattribute.aspx)属性。

```
[ThreadStatic] private static List<string> _myList;

public static List<string> MyList {
  get { return _myList; }
  set { _myList = value; }
} 
```

此外，通常包含类更好地控制集合；这意味着没有外部可见的 setter 和返回副本或只读集合的​​ getter。

但是，**这可能达不到您想要的效果**。每个线程都有自己的集合副本。也许您需要看一下*锁*或重新考虑您的设计。

# algorithm - 朴素贝叶斯分类的简单解释

> ID：10059594
> 
> 赞同：568
> 
> 时间：2012-04-08T00:56:19.280
> 
> 标签：algorithm, machine-learning, dataset, classification, naivebayes

我发现很难理解朴素贝叶斯的过程，我想知道是否有人可以用英语简单的逐步过程来解释它。我知道它需要按发生的时间进行比较作为概率，但我不知道训练数据与实际数据集的关系如何。

请解释一下训练集的作用。我在这里给出一个非常简单的水果示例，例如香蕉

```
training set---
round-red
round-orange
oblong-yellow
round-red

dataset----
round-red
round-orange
round-red
round-orange
oblong-yellow
round-red
round-orange
oblong-yellow
oblong-yellow
round-red 
```

* * *

## 回答 #1

> 赞同：1078
> 
> 时间：2013-12-12T23:54:43.227

接受的答案有许多 k-NN 元素（*k*近邻），这是一种不同的算法。

k-NN 和 NaiveBayes 都是分类算法。从概念上讲，k-NN 使用“接近度”的概念对新实体进行分类。在 k-NN 中，“接近度”是用欧几里得距离或余弦距离等概念建模的。相比之下，在 NaiveBayes 中，“概率”的概念用于对新实体进行分类。

由于问题是关于朴素贝叶斯的，因此我将如何向某人描述这些想法和步骤。我会尽量用尽可能少的方程式和简单的英语来做这件事。

### 一、条件概率和贝叶斯法则

在人们能够理解和欣赏朴素贝叶斯的细微差别之前，他们需要先了解几个相关的概念，即条件概率的概念和贝叶斯规则。（如果您熟悉这些概念，请跳到标题为“**入门朴素贝叶斯”**的部分）

**简单英语中的**条件概率：***假设其他事情*已经发生，某事将发生的概率是多少。**

 **假设有一些结果 O 和一些证据 E。从定义这些概率的方式来看：同时具有*结果*O 和证据 E 的概率是：（O 发生的概率）乘以（E 的概率）哦发生了）

*理解条件概率的一个例子：*

假设我们有一群美国参议员。参议员可以是民主党人或共和党人。他们也是男性或女性。

如果我们完全随机选择一位参议员，这个人是女性民主党的概率是多少？条件概率可以帮助我们回答这个问题。

（民主党和女参议员）的概率= Prob（参议员是民主党人）乘以女性的条件概率，因为他们是民主党人。

```
 P(Democrat & Female) = P(Democrat) * P(Female | Democrat) 
```

我们可以计算完全相同的东西，相反的方式：

```
 P(Democrat & Female) = P(Female) * P(Democrat | Female) 
```

### 了解贝叶斯法则

从概念上讲，这是从 P(Evidence|Known Outcome) 到 P(Outcome|Known Evidence) 的一种方式。*通常，在已知结果的*情况下，我们知道某些特定证据的观察频率。给定证据，我们必须使用这个已知事实来计算相反的结果，以计算该*结果发生的机会。*

P（假设我们知道一些证据的结果）= P（假设我们知道结果的证据）乘以概率（结果），由 P（证据）缩放

理解贝叶斯法则的经典例子：

```
Probability of Disease D given Test-positive = 

               P(Test is positive|Disease) * P(Disease)
     _______________________________________________________________
     (scaled by) P(Testing Positive, with or without the disease) 
```

现在，所有这一切都只是序言，以达到朴素贝叶斯。

## 到达朴素贝叶斯

到目前为止，我们只讨论了一个证据。实际上，我们必须根据**多个证据来预测结果。**在这种情况下，数学变得非常复杂。为了避免这种复杂性，一种方法是“解耦”多个证据，并将每个证据视为独立的。这种方法就是为什么这被称为*朴素*贝叶斯。

```
P(Outcome|Multiple Evidence) = 
P(Evidence1|Outcome) * P(Evidence2|outcome) * ... * P(EvidenceN|outcome) * P(Outcome)
scaled by P(Multiple Evidence) 
```

许多人选择记住这一点：

```
 P(Likelihood of Evidence) * Prior prob of outcome
P(outcome|evidence) = _________________________________________________
                                         P(Evidence) 
```

请注意有关此等式的一些事项：

*   如果 Prob(evidence|outcome) 为 1，那么我们只是乘以 1。
*   如果 Prob（一些特定的证据|结果）为 0，则整个概率。变为 0。如果您看到相互矛盾的证据，我们可以排除该结果。
*   由于我们将所有内容除以 P(Evidence)，我们甚至可以不用计算就可以逃脱。
*   乘以*先验*背后的直觉是，我们对更常见的结果赋予高概率，而对不太可能的结果赋予低概率。这些也被称为`base rates`，它们是衡量我们预测概率的一种方式。

### 如何应用 NaiveBayes 预测结果？

只需为每个可能的结果运行上面的公式。由于我们正在尝试对*进行分类*，因此每个结果都称为 a`class`并且它`class label.`有 同样，我们采用一种非常简单的方法：概率最高的类被宣布为“获胜者”，并且该类标签被分配给该证据组合。

### 水果示例

让我们通过一个例子来增加我们的理解：OP要求一个“水果”识别例子。

假设我们有 1000 个水果的数据。它们恰好是**香蕉**、**橙子**或**其他水果**。我们知道每种水果的 3 个特征：

1.  无论是长
2.  无论是甜美
3.  如果它的颜色是黄色。

这是我们的“训练集”。我们将使用它来预测我们遇到的任何*新*水果的类型。

```
Type           Long | Not Long || Sweet | Not Sweet || Yellow |Not Yellow|Total
             ___________________________________________________________________
Banana      |  400  |    100   || 350   |    150    ||  450   |  50      |  500
Orange      |    0  |    300   || 150   |    150    ||  300   |   0      |  300
Other Fruit |  100  |    100   || 150   |     50    ||   50   | 150      |  200
            ____________________________________________________________________
Total       |  500  |    500   || 650   |    350    ||  800   | 200      | 1000
             ___________________________________________________________________ 
```

我们可以预先计算很多关于我们的水果收藏的事情。

所谓的“先验”概率。（如果我们不知道任何水果属性，这将是我们的猜测。）这些是我们的`base rates.`

```
 P(Banana)      = 0.5 (500/1000)
 P(Orange)      = 0.3
 P(Other Fruit) = 0.2 
```

“证据”的概率

```
p(Long)   = 0.5
P(Sweet)  = 0.65
P(Yellow) = 0.8 
```

“可能性”的概率

```
P(Long|Banana) = 0.8
P(Long|Orange) = 0  [Oranges are never long in all the fruit we have seen.]
 ....

P(Yellow|Other Fruit)     =  50/200 = 0.25
P(Not Yellow|Other Fruit) = 0.75 
```

### 给定一个水果，如何分类？

假设我们被赋予了一种未知水果的特性，并要求我们对其进行分类。我们被告知果实长、甜、黄。是香蕉吗？是橙子吗？还是其他水果？

我们可以简单地逐个计算 3 个结果中的每一个的数字。然后我们选择最高概率并将我们的未知水果“分类”为基于我们先前的证据（我们的 1000 个水果训练集）具有最高概率的类别：

```
P(Banana|Long, Sweet and Yellow) 
      P(Long|Banana) * P(Sweet|Banana) * P(Yellow|Banana) * P(banana)
    = _______________________________________________________________
                      P(Long) * P(Sweet) * P(Yellow)

    = 0.8 * 0.7 * 0.9 * 0.5 / P(evidence)

    = 0.252 / P(evidence)

P(Orange|Long, Sweet and Yellow) = 0

P(Other Fruit|Long, Sweet and Yellow)
      P(Long|Other fruit) * P(Sweet|Other fruit) * P(Yellow|Other fruit) * P(Other Fruit)
    = ____________________________________________________________________________________
                                          P(evidence)

    = (100/200 * 150/200 * 50/200 * 200/1000) / P(evidence)

    = 0.01875 / P(evidence) 
```

我们以压倒性优势 ( `0.252 >> 0.01875`) 将这种甜/长/黄色水果归类为可能是香蕉。

### 为什么贝叶斯分类器如此受欢迎？

看看它最终归结为什么。只是一些计数和乘法。我们可以预先计算所有这些术语，因此分类变得简单、快速和高效。

`Let z = 1 / P(evidence).`现在我们快速计算以下三个量。

```
P(Banana|evidence) = z * Prob(Banana) * Prob(Evidence1|Banana) * Prob(Evidence2|Banana) ...
P(Orange|Evidence) = z * Prob(Orange) * Prob(Evidence1|Orange) * Prob(Evidence2|Orange) ...
P(Other|Evidence)  = z * Prob(Other)  * Prob(Evidence1|Other)  * Prob(Evidence2|Other)  ... 
```

分配最大数字的类别标签，您就完成了。

尽管名称如此，朴素贝叶斯在某些应用程序中表现出色。文本分类是它真正大放异彩的一个领域。

希望这有助于理解朴素贝叶斯算法背后的概念。

* * *

## 回答 #2

> 赞同：681
> 
> 时间：2012-04-08T12:13:17.883

据我了解，您的问题分为两部分，第一部分是您需要更好地理解朴素贝叶斯分类器，第二部分是围绕训练集的困惑。

一般来说，所有机器学习算法都需要针对分类、预测等监督学习任务或聚类等无监督学习任务进行训练。

在训练步骤中，算法使用特定的输入数据集（训练集）进行训练，以便稍后我们可以测试它们的未知输入（他们以前从未见过），它们可以对其进行分类或预测等（在监督的情况下）学习）基于他们的学习。这是大多数机器学习技术（如神经网络、SVM、贝叶斯等）的基础。

因此，在一般的机器学习项目中，基本上您必须将输入集划分为开发集（训练集 + 开发测试集）和测试集（或评估集）。请记住，您的基本目标是让您的系统学习并分类他们以前在开发集或测试集中从未见过的新输入。

测试集通常具有与训练集相同的格式。然而，测试集与训练语料库的区别是非常重要的：如果我们只是简单地重复使用训练集作为测试集，那么一个简单地记住其输入而不学习如何泛化到新示例的模型会产生误导高分数。

一般来说，例如，我们 70% 的数据可以用作训练集案例。*还要记住将原始集随机*划分为训练集和测试集。

现在我来谈谈你关于朴素贝叶斯的另一个问题。

为了演示朴素贝叶斯分类的概念，请考虑下面给出的示例：

![在此处输入图像描述](../Images/ae487cb73bfb60859df368c583cfc433.png)

正如所指出的，对象可以被分类为`GREEN`或`RED`。我们的任务是在新案例到达时对其进行分类，即根据当前存在的对象决定它们属于哪个类别标签。

`GREEN`由于对象的数量是 的两倍`RED`，因此有理由相信一个新案例（尚未观察到）具有成员资格的可能性是 的两倍，`GREEN`而不是`RED`。在贝叶斯分析中，这种信念被称为先验概率。先验概率基于先前的经验，在这种情况下是对象的百分比，`GREEN`并且`RED`通常用于在结果实际发生之前预测结果。

因此，我们可以写：

**的先验概率`GREEN`**：`number of GREEN objects / total number of objects`

**的先验概率`RED`**：`number of RED objects / total number of objects`

由于共有`60`对象，`40`其中`GREEN`和 20 `RED`，我们的类成员的先验概率是：

**先验概率`GREEN`**：`40 / 60`

**先验概率`RED`**：`20 / 60`

在制定了我们的先验概率之后，我们现在准备对一个新对象进行分类（`WHITE`下图中的圆圈）。由于对象被很好地聚类，因此可以合理地假设X 附近的对象越多`GREEN`（或），新案例就越有可能属于该特定颜色。`RED`为了测量这种可能性，我们在 X 周围画了一个圆圈，其中包含了一些（先验地选择）点，而与它们的类标签无关。然后我们计算圆中属于每个类标签的点数。由此我们计算可能性：

![在此处输入图像描述](../Images/65f30406c099dc0d88a50aec5457cb94.png)

![在此处输入图像描述](../Images/0f4f51faeaa01149249f0435dcbfca72.png)

从上图中可以清楚地看出，`X`给定`GREEN`的可能性小于给定的可能性`X`，`RED`因为圆圈包含`1` `GREEN`对象和对象`3` `RED`。因此：

![在此处输入图像描述](../Images/9c30cf68e2103cc583866435eeb49d50.png)

![在此处输入图像描述](../Images/94406eb91749692cb300fe110dbdffd9.png)

尽管先验概率表明`X`可能属于（假设与 相比`GREEN`有两倍），但可能性表明并非如此；的类成员资格是（假设在 附近有比更多的对象）。在贝叶斯分析中，最终分类是通过结合两种信息源（即先验和可能性）使用所谓的贝叶斯规则（以 Rev. Thomas Bayes 1702-1761 命名）形成后验概率而产生的。`GREEN``RED``X``RED``RED``X``GREEN`

![在此处输入图像描述](../Images/c58b4dc086d69a505a01f554e5569f21.png)

最后，我们将 X 分类为`RED`因为它的类成员达到最大的后验概率。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-02-17T04:02:28.103

朴素贝叶斯属于监督机器学习，用于对数据集进行分类。它用于根据其先验知识和独立性假设来预测事物。

他们称其为**幼稚**，因为它的假设（假设数据集中的所有特征都同样重要和独立）非常乐观，并且在大多数实际应用程序中很少成立。

分类算法对未知数据集做出决策。它基于[贝叶斯定理](https://en.wikipedia.org/wiki/Bayes%27_theorem)，该定理根据事件的先验知识描述事件的概率。

下图显示了朴素贝叶斯的工作原理

[![在此处输入图像描述](../Images/c5ef2601476c41db3a0ee849a2c662ff.png)](https://en.wikipedia.org/wiki/Bayes%27_theorem)

**预测NB的公式：**

[![在此处输入图像描述](../Images/a45c72898d23665e4f7f54d5f6b1119e.png)](https://i.stack.imgur.com/0QOII.png)

**如何使用朴素贝叶斯算法？**

举个例子看看NB是怎么炒的

第 1 步：首先我们找出在下图中显示是或否概率的表的可能性。第 2 步：找到每个类别的后验概率。

[![在此处输入图像描述](../Images/4e934d755622cb34ba81d413c4f8b17f.png)](https://i.stack.imgur.com/t5voX.png)

```
Problem: Find out the possibility of whether the player plays in Rainy condition?

P(Yes|Rainy) = P(Rainy|Yes) * P(Yes) / P(Rainy)

P(Rainy|Yes) = 2/9 = 0.222
P(Yes) = 9/14 = 0.64
P(Rainy) = 5/14 = 0.36

Now, P(Yes|Rainy) = 0.222*0.64/0.36 = 0.39 which is lower probability which means chances of the match played is low. 
```

有关更多参考，请参阅这些[博客。](https://medium.com/@jiteshmohite.619/introduction-to-naive-bayes-29c9c6c061b8)

请参阅 GitHub 存储库[Naive-Bayes-Examples](https://github.com/jiteshmohite/Naive-Bayes-Examples)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-03-29T11:15:23.417

Ram Narasimhan 很好地解释了这个概念，下面是通过 Naive Bayes 的代码示例的替代解释它使用[本书第 351 页](https://www.google.co.in/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=data%20mining%20concepts%20and%20techniques)
的示例问题 这是我们将 在上述数据集中使用的数据集，如果我们给出假设 =那么他购买或不购买计算机的概率是多少。 下面的代码正好回答了这个问题。 只需创建一个名为 named 的文件并粘贴以下内容。

[![在此处输入图像描述](../Images/af860ac16c42bd9f6062e37b72437c7a.png)](https://i.stack.imgur.com/lKPKB.png)
`{"Age":'<=30', "Income":"medium", "Student":'yes' , "Creadit_Rating":'fair'}`

`new_dataset.csv`

```
Age,Income,Student,Creadit_Rating,Buys_Computer
<=30,high,no,fair,no
<=30,high,no,excellent,no
31-40,high,no,fair,yes
>40,medium,no,fair,yes
>40,low,yes,fair,yes
>40,low,yes,excellent,no
31-40,low,yes,excellent,yes
<=30,medium,no,fair,no
<=30,low,yes,fair,yes
>40,medium,yes,fair,yes
<=30,medium,yes,excellent,yes
31-40,medium,no,excellent,yes
31-40,high,yes,fair,yes
>40,medium,no,excellent,no 
```

这是注释解释我们在这里所做的一切的代码！[Python]

```
import pandas as pd 
import pprint 

class Classifier():
    data = None
    class_attr = None
    priori = {}
    cp = {}
    hypothesis = None

    def __init__(self,filename=None, class_attr=None ):
        self.data = pd.read_csv(filename, sep=',', header =(0))
        self.class_attr = class_attr

    '''
        probability(class) =    How many  times it appears in cloumn
                             __________________________________________
                                  count of all class attribute
    '''
    def calculate_priori(self):
        class_values = list(set(self.data[self.class_attr]))
        class_data =  list(self.data[self.class_attr])
        for i in class_values:
            self.priori[i]  = class_data.count(i)/float(len(class_data))
        print "Priori Values: ", self.priori

    '''
        Here we calculate the individual probabilites 
        P(outcome|evidence) =   P(Likelihood of Evidence) x Prior prob of outcome
                               ___________________________________________
                                                    P(Evidence)
    '''
    def get_cp(self, attr, attr_type, class_value):
        data_attr = list(self.data[attr])
        class_data = list(self.data[self.class_attr])
        total =1
        for i in range(0, len(data_attr)):
            if class_data[i] == class_value and data_attr[i] == attr_type:
                total+=1
        return total/float(class_data.count(class_value))

    '''
        Here we calculate Likelihood of Evidence and multiple all individual probabilities with priori
        (Outcome|Multiple Evidence) = P(Evidence1|Outcome) x P(Evidence2|outcome) x ... x P(EvidenceN|outcome) x P(Outcome)
        scaled by P(Multiple Evidence)
    '''
    def calculate_conditional_probabilities(self, hypothesis):
        for i in self.priori:
            self.cp[i] = {}
            for j in hypothesis:
                self.cp[i].update({ hypothesis[j]: self.get_cp(j, hypothesis[j], i)})
        print "\nCalculated Conditional Probabilities: \n"
        pprint.pprint(self.cp)

    def classify(self):
        print "Result: "
        for i in self.cp:
            print i, " ==> ", reduce(lambda x, y: x*y, self.cp[i].values())*self.priori[i]

if __name__ == "__main__":
    c = Classifier(filename="new_dataset.csv", class_attr="Buys_Computer" )
    c.calculate_priori()
    c.hypothesis = {"Age":'<=30', "Income":"medium", "Student":'yes' , "Creadit_Rating":'fair'}

    c.calculate_conditional_probabilities(c.hypothesis)
    c.classify() 
```

输出：

```
Priori Values:  {'yes': 0.6428571428571429, 'no': 0.35714285714285715}

Calculated Conditional Probabilities: 

{
 'no': {
        '<=30': 0.8,
        'fair': 0.6, 
        'medium': 0.6, 
        'yes': 0.4
        },
'yes': {
        '<=30': 0.3333333333333333,
        'fair': 0.7777777777777778,
        'medium': 0.5555555555555556,
        'yes': 0.7777777777777778
      }
}

Result: 
yes  ==>  0.0720164609053
no  ==>  0.0411428571429 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2016-03-12T16:13:48.523

我试着用一个例子来解释贝叶斯规则。

从社会中随机选择的人是吸烟者的机会是多少？

你可以回复 10%，让我们假设这是对的。

现在，如果我说随机的人是一个15**岁**的**男人呢？**

 **你可能会说 15% 或 20%，但为什么呢？

事实上，我们试图用新的证据来更新我们最初的猜测（`P(smoker) vs. P(smoker | evidence)`）。贝叶斯规则是一种将这两个概率联系起来的方法。

```
P(smoker | evidence) = P(smoker)* p(evidence | smoker)/P(evidence) 
```

每个证据都可能增加或减少这种机会。例如，如果非吸烟者中的这一百分比（作为男性）较低，那么他是男性这一事实**可能会增加机会。**

**换句话说，作为一个男人必须是一个吸烟者而不是非吸烟者的指标。**因此，如果证据是某事的指标，它会增加机会。

但是我们怎么知道这是一个指标呢？

对于每个特征，您可以将在给定条件下该特征的共性（概率）与其共性进行比较。( `P(f | x) vs. P(f))`.

```
P(smoker | evidence) / P(smoker) = P(evidence | smoker)/P(evidence) 
```

例如，如果我们知道 90% 的吸烟者是男性，那么仅仅说男性是否是吸烟者的指标还不够。例如，如果在社会上成为男人的概率也是 90%，那么知道某人是男人对我们没有帮助`((90% / 90%) = 1`。但是如果男性贡献了 40% 的社会，但 90% 的吸烟者，那么知道某人是男性会增加成为吸烟者的机会`(90% / 40%) = 2.25`，因此它将最初的猜测（10%）增加 2.25，结果为 22.5%。

但是，如果社会上男性的概率是95%，那么不管吸烟者中男性比例很高（90%）的事实！某人是男性的证据会降低他成为吸烟者的机会！`(90% / 95%) = 0.95)`.

所以我们有：

```
P(smoker | f1, f2, f3,... ) = P(smoker) * contribution of f1* contribution of f2 *... 
=
P(smoker)* 
(P(being a man | smoker)/P(being a man))*
(P(under 20 | smoker)/ P(under 20)) 
```

请注意，在这个公式中，我们假设**男性**和**20 岁以下**是独立的特征，因此我们将它们相乘，这意味着知道某人未满 20 岁对猜测他是男性还是女性没有影响。但这可能不是真的，例如，一个社会中的大多数青春期可能都是男性……

**在分类器中使用此公式**

分类器具有一些特征（男性和 20 岁以下），它必须确定他是否吸烟（这是两个类别）。它使用上面的公式计算证据（特征）下每个类的概率，并将概率最高的类分配给输入。为了提供所需的概率（90%、10%、80%...），它使用训练集。例如，它计算训练集中的吸烟者，并发现他们贡献了 10% 的样本。然后对于吸烟者，检查其中有多少是男性或女性....有多少在 20 岁以上或 20 岁以下....换句话说，它试图根据训练建立每个类别的特征的概率分布数据。****

# ajax - 什么*确切*是 AJAX？

> ID：10059596
> 
> 赞同：5
> 
> 时间：2012-04-08T00:57:08.260
> 
> 标签：ajax

我知道 AJAX 代表什么。我对 javascript 的了解还算过得去。但坦率地说，我只是不清楚 AJAX 是什么。

因为我所知道的只是 XMLHttpRequest()，但它肯定不止于此。有人可以更清楚地解释 AJAX 不仅仅是完美普通 JavaScript 的某个方面吗？我看不出有什么不同。

编辑：我也知道它允许您在不重新加载的情况下更新页面。这太棒了，我知道。但我仍然看不出这不仅仅是标准的 JavaScript。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T01:09:18.073

好吧，这不像是*魔法*什么的。它确实*是*普通的 Javascript，而且是普通的 XML（或 JSON，或其他一些数据格式）。它在浏览器中运行。这些都不是特别新颖或新颖的。微软在 1996 年就在谈论“DHTML”，并于 1997 年正式发布。

但是结合这些现有的东西，是一种足够普遍和有用的方法，足以赢得一个特定的名称。 **AJAX 是指使用异步请求的模式，在浏览器中运行的 Javascript 逻辑驱动，以 XML 格式或其他格式检索数据。**通常，检索到的数据随后用于以某种方式更新 HTML 页面，而不会导致整个页面刷新。

您说您*看不到这与标准 JavaScript 有何不同。* 在浏览器中使用 Javascript，您可以做一些简单的事情，比如运行一个计时器，它会在到期后弹出警报。或者您可以对背景颜色执行淡出。或者做像手风琴弹出一样的jQuery效果。或者按不同的列动态地对 HTML 表进行排序。使用 Javascript 甚至可以在文本框中自动完成。这些都会导致 UI 更新，但它们不一定会检索任何数据。（在某些情况下，自动完成会这样做，但通常不会）。

AJAX 总是涉及*通信*和数据检索，因此它不同于“标准 Javascript”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T01:11:44.250

我认为要了解您必须查看 XMLHttpRequest 的来源。当时它还不是 JavaScript 的标准部分。您无法使用纯 JavaScript 从浏览器发出异步 HTTP 请求。XMLHttpRequest 对象最初是由 Microsoft 在 IE5 中作为 ActiveX 控件引入的。因此，考虑到这一点，我们今天使用 JavaScript 的方式已经从一个更简单的场景演变而来。

我建议你阅读维基百科页面——尤其是历史部分。Ajax 并没有什么特别棒的地方，它只是一个新词，用来形容当时的一种新的做事方式，而且它被卡住了。

[http://en.wikipedia.org/wiki/AJAX](http://en.wikipedia.org/wiki/AJAX)

特别是**阅读权威文章** [http://www.adaptivepath.com/ideas/ajax-new-approach-web-applications](http://www.adaptivepath.com/ideas/ajax-new-approach-web-applications) - 这可能是了解 Ajax 来自何处以及它的实际含义的最佳方式。可能是最重要的

> 定义 Ajax
> 
> Ajax 不是一种技术。这实际上是几种技术，每一种都以自己的方式蓬勃发展，以强大的新方式融合在一起。Ajax 包含：
> 
> *   使用 XHTML 和 CSS 的基于标准的表示；
> *   使用文档对象模型进行动态显示和交互；
> *   使用 XML 和 XSLT 进行数据交换和操作；
> *   使用 XMLHttpRequest 进行异步数据检索；
> *   和 JavaScript 将所有内容绑定在一起。

如前所述，Ajax 的确切定义现在很难确定。随着浏览器的发展，这些方法很容易自我更新，但这些是其概念的基本原则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T01:04:27.693

“异步 Javascript 和 XML”——你说得对，它实际上只是 Javascript 的一个组件。从服务器端看，它实际上什么都不是：服务器不知道也不关心它是在处理 AJAX 请求还是“正常”请求（尽管 Web 应用程序当然会知道和关心）。它恰好很有名并且有一个花哨的首字母缩略词，因为它在设计网站时非常有用。

编辑：来自 W3 规范[http://www.w3.org/TR/XMLHttpRequest/](http://www.w3.org/TR/XMLHttpRequest/)的定义：

> XMLHttpRequest 规范定义了一个 API，该 API 提供了用于在客户端和服务器之间传输数据的脚本客户端功能。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-08T00:59:52.117

这是一种在不刷新页面的情况下异步地从服务器获取数据和向服务器发送数据的方式。交换的数据过去只是 XML（AJAX 中的“X”），现在可以是其他东西（例如 JSON 甚至 JSONP）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-08T01:04:59.260

JavaScript 发生在客户端。Ajax 使用 javascript 从服务器接收远程响应而不加载页面。

# socket.io - Socket.io 动态房间

> ID：10059598
> 
> 赞同：8
> 
> 时间：2012-04-08T00:58:24.077
> 
> 标签：socket.io

我正在编写一个创建许多动态房间的应用程序，只要有人连接，它们就应该存在。如果所有客户端都断开连接，则应清除它们

socket.io 会自动清除这些房间吗？还是我需要以某种方式手动清除它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T15:44:41.150

Yes `socket.io` does clean up rooms when the client is disconnected.

Read more at [the git page](https://github.com/LearnBoost/socket.io/wiki/Rooms)

# jquery - jQuery ui 单行可拖动表格

> ID：10059600
> 
> 赞同：2
> 
> 时间：2012-04-08T00:58:28.250
> 
> 标签：jquery, user-interface, html-table, draggable

我有一个可拖动的表格，它工作正常，但我希望能够从`<th>`表格内的行中拖动它，而不是从所有`<td>`的。

```
<table id="draggable">
<tr>
<th id="drag">header (can drag table from here)</th>
</tr>
<tr>
<td>normal column (can't drag the table from here)</td>
</tr>
</table>
<script type="text/javascript">
    $( "#draggable" ).draggable({ opacity: 0.5 });
</script> 
```

我该如何处理这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T01:23:29.213

Hiya在这里**工作演示**：http : [//jsfiddle.net/rAzL8/](http://jsfiddle.net/rAzL8/) **&** [http://jsfiddle.net/rAzL8/1/](http://jsfiddle.net/rAzL8/1/)

Cooleos，所以你需要在你的桌子上使用可拖动和宾果游戏标签上的`:handle`属性，`th`它只会处理你的桌子的标签。希望这会有所帮助，干杯

**jQuery代码**

```
 $( "#draggable" ).draggable({ opacity: 0.7, handle:'#drag' });

 ​ 
```

**HTML**

```
<table id="draggable">
<tr>
<th id="drag">header (can drag table from here)</th>
</tr>
<tr>
    <td>normal column (can't drag the table from here) ;)</td> <td>another</td>
</tr>

    <tr>
<td>normal column (can't drag the table from here) ;) </td>
</tr>

    <tr>
<td>normal column (can't drag the table from here);) </td>
</tr>
</table>​ 
```

# hadoop - 启动 hadoop Job Tracker 时出错

> ID：10059604
> 
> 赞同：9
> 
> 时间：2012-04-08T00:59:51.907
> 
> 标签：hadoop

我尝试使用 Windows-Cygwin 在 hadoop 中运行一个简单的程序。

我能够启动 namenode 。

但是，jobtracker 启动失败并出现异常：

```
FATAL mapred.JobTracker: java.lang.IllegalArgumentException: Does not contain a valid host:port authority: local
        at org.apache.hadoop.net.NetUtils.createSocketAddr(NetUtils.java:162)
        at org.apache.hadoop.net.NetUtils.createSocketAddr(NetUtils.java:128)
        at org.apache.hadoop.mapred.JobTracker.getAddress(JobTracker.java:2560)
        at org.apache.hadoop.mapred.JobTracker.<init>(JobTracker.java:2200)
        at org.apache.hadoop.mapred.JobTracker.<init>(JobTracker.java:2192)
        at org.apache.hadoop.mapred.JobTracker.<init>(JobTracker.java:2186)
        at org.apache.hadoop.mapred.JobTracker.startTracker(JobTracker.java:300)
        at org.apache.hadoop.mapred.JobTracker.startTracker(JobTracker.java:291)
        at org.apache.hadoop.mapred.JobTracker.main(JobTracker.java:4978) 
```

我尝试了所有可能的方法来解决这个问题，但徒劳无功。任何指针都会对我有很大帮助。

**hdfs-site.xml 配置：**

```
 <configuration><br>
   <property>
     <name>fs.default.name< /name>
     <value>hdfs://localhost:9100</value>
   </property>
   <property>
     <name>mapred.job.tracker< /name>
     <value>localhost:9101< /value>
   </property>
   <property>
     <name>dfs.replication< /name>
     <value>1</value>
   </property> 
 </configuration> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-08T05:06:13.577

问题是以下行应该进入**mapred-site.xml**而不是 hdfs-site.xml，

```
<property> 
<name>mapred.job.tracker</name> 
<value>localhost:9101</value> 
</property> 
```

顺便说一句，您为什么要在 Windows 中运行 Hadoop？为了发展？您没有 linux 机器或不愿意安装一台？

还有一件事，你通常把这个属性放在 core-site.xml 而不是 hdfs-site.xml，

```
<property>
<name>fs.default.name</name>
<value>hdfs://localhost:9100</value>
</property> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:07:19.493

在处理此页面的“伪分布式”示例时，我遇到了同样的问题：http: [//hadoop.apache.org/docs/r1.1.2/single_node_setup.html#PseudoDistributed](http://hadoop.apache.org/docs/r1.1.2/single_node_setup.html#PseudoDistributed)

事实证明，hadoop 根本没有获取我的 conf 文件。上面链接中的示例假设您正在运行您的hadoop 安装（即/Usr/jane/hadoop-1.1.2）。我试图在另一个目录中运行示例。我确定您可以配置 hadoop 以识别其他“conf”目录，但我采取了简单的方法，只是开始在我的 hadoop 目录中运行。

这个线程帮助我弄清楚：[https ://issues.apache.org/jira/browse/HDFS-2515](https://issues.apache.org/jira/browse/HDFS-2515)

# html - 在不同的浏览器中加载图像

> ID：10059606
> 
> 赞同：0
> 
> 时间：2012-04-08T01:00:38.890
> 
> 标签：html, image

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    </head>
    <body>
    <img src="http://www.planeart.cn/demo/imgReady/vistas24.jpg">
    <script type="text/javascript">
    alert(1);
    </script>
    </body>
    </html> 
```

在上面的代码中，不同的浏览器会有不同的结果。
首先，图像足够大。
在Firefox中，它会“alert(1)”，但同时，图像在浏览器上显示缓慢。
在 chrome 和 IE 中，它也会“alert(1)”，但是当对话框（alert(1)）运行时，
浏览器总是空白（图像不会在浏览器中显示）。当我们显示图像时关闭对话框..
这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:52:18.063

这是因为 alert() 方法的实现因浏览器而异。

# c# - XNA 旋转帮助（有趣...）

> ID：10059607
> 
> 赞同：0
> 
> 时间：2012-04-08T01:01:07.023
> 
> 标签：c#, xna

您好 Stack Overflow 用户，我在 XNA 游戏中遇到了一个有趣的问题。

所以基本上我有一个小行星，80x80，我将原点设置为 imageW / 2，imageH / 2（如果顺序很重要，它不会，小行星是一个正方形）。

这是一张图片，解释了问题！可视化 FTW :D

[http://i.imgur.com/dsawS.png](http://i.imgur.com/dsawS.png)

那么，关于导致这种情况的任何想法？我花了 1 个小时，查看了示例，我发现它应该像这样旋转：

[http://www.riemers.net/images/Tutorials/XNA/Csharp/Series2D/rotation.jpg](http://www.riemers.net/images/Tutorials/XNA/Csharp/Series2D/rotation.jpg)

但事实并非如此。

这是一个代码示例。我有一个名为 Drawable 的对象，它具有保存矢量位置等的属性。

```
Vector2 asteroidOrigin = new Vector2(asteroidImgs[asteroid.asteroidType].Width / 2, asteroidImgs[asteroid.asteroidType].Height / 2);

drawableList.Add(new Drawable(asteroidImgs[asteroid.asteroidType], asteroid.asteroidPos, asteroid.angle, asteroidOrigin)); 
```

这是绘制方法：

```
foreach (Drawable drawable in renderManager.getRenderList)
        {
            spriteBatch.Draw(drawable.image, drawable.position, drawable.sourceRectangle, drawable.tint, drawable.angle, drawable.origin, drawable.imageScale, drawable.spriteEffects, drawable.depth);
        } 
```

是的，Drawable 类有多个构造函数，它们分配默认值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T21:11:19.577

当您在 SpriteBatch.Draw 中定义 Origin 时，您正在定义纹理上的新点，该点将在 Position 参数处绘制。显然，这会影响翻译以及您想要的旋转。当您将原点设置为图像的中心时，图像会被平移，以使中心位于您的位置，然后围绕该点旋转。当您将原点设置为 Vector2.Zero 时，平移不会更改，但图像会围绕其左上角旋转。

解决方案是重新定义精灵的“位置”，使其成为图像的中心在屏幕上绘制的位置（我建议这样做，让事情变得更好），或者在绘制之前通过将原点添加到位置来执行一些工作在调用 Draw 之前。

我再次推荐第一个解决方案，因为当您想在屏幕中心绘制一个圆圈时，您只需将其位置设置为屏幕中心即可。你不需要考虑它的大小。等等。

# python - 我的宇宙飞船上的渲染错误

> ID：10059608
> 
> 赞同：0
> 
> 时间：2012-04-08T01:01:53.257
> 
> 标签：python, rendering, pygame

我正在构建一个小型 Space Invaders 类型的游戏。或者至少尝试这样做。大多数事情都有效，但是，我遇到了一个反复出现的错误。游戏有时可以完美运行。但是，大约每隔一段时间，它就会在我爆炸了几个敌人后退出并给出以下错误： `Traceback (most recent call last): enemies[count].render()`和`pygame.error:display Surface quit`。第二个错误似乎总是弹出，即使程序似乎运行良好。

这是我的渲染功能：

```
def render(self):
    screen.blit(self.bitmap, (self.x, self.y)) 
```

如果需要，我可以发布和/或链接到完整的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T16:50:41.863

据我猜测，您可能会得到对已经被垃圾收集的表面的引用，并且当 pygame 无法对表面进行 blit 时，它正在退出。

要解决此问题，请检查您的代码并确保在将对象从游戏中删除时从“敌人”列表中删除它们。

另一种解决方案是使用 PyGame 内置的 Group 类。它将为您跟踪已删除的对象，您无需担心此类问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T13:26:05.453

这更像是 pygame 中的一个问题，它会影响您的特定设置。尝试更改诸如 pygame 是否使用硬件加速（查看 pygame.screen.set_mode 上的文档）并切换它们。

# javascript - 为 Singleton 的 Google Closure Compiler 评论 JavaScript

> ID：10059609
> 
> 赞同：1
> 
> 时间：2012-04-08T01:02:25.767
> 
> 标签：javascript, comments, google-closure-compiler, jsdoc

我试图了解用于记录与[JavaScript Closure Compiler一起使用的 JavaScript 的](https://developers.google.com/closure/compiler/)[JSDoc 样式](https://developers.google.com/closure/compiler/docs/js-for-compiler)。我有下面的 JavaScript 代码

```
// ==ClosureCompiler==
// @compilation_level ADVANCED_OPTIMIZATIONS
// ==/ClosureCompiler==

(function(){
    /**
     * @type Array.<string>
     * @private
     */
    var sb = [];

    /**
     * @const
     * @type{{append: function(string): SingletonStringBuffer, toString: function(): string}}
     */
    window['SingletonStringBuffer'] = {
        /**
         * @param {string} text
         * @return {SingletonStringBuffer}
         */
        append: function(text){
            sb.push(text);
            return SingletonStringBuffer;
        },
        /**
         * @return {string}
         */
        toString: function(){
            return sb.join("");
        }
    };
}()); 
```

当我对此代码进行高级编译时，我收到 2 个警告。

```
JSC_TYPE_PARSE_ERROR: Bad type annotation. Unknown type SingletonStringBuffer at line 10 character 35
* @type{{append: function(string): SingletonStringBuffer, toString: function()...
                                   ^ JSC_TYPE_PARSE_ERROR: Bad type annotation. Unknown type SingletonStringBuffer at line 15 character 11
* @return {SingletonStringBuffer}
           ^ 
```

该函数`append`返回对封装对象的尊重。它返回的变量 , `SingletonStringBuffer`, 被声明...所以我不确定什么是错误的或如何纠正它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T20:30:22.707

就编译器而言，您还没有创建命名类型。对于这种情况，我希望您创建一个接口：

```
/** @interface */
function StringBuffer() {
}
/**
 * @param {string} text
 * @return {StringBuffer}
 */
StringBuffer.prototype.append;

etc 
```

这可以在代码中声明（如果您使用高级模式，它将被剥离）或在您的外部文件中（如果您希望在简单模式下没有代码的类型）。

然后你可以像这样使用它（在你的情况下）：

```
(function(){
/**
 * @type Array.<string>
 * @private
 */
var sb = [];

/**
 * @const
 * @type {StringBuffer}
 */
window['SingltonStringBuffer'] = {
    /**
     * @param {string} text
     * @return {StringBuffer}
     */
    append: function(text){
        sb.push(text);
        return SingltonStringBuffer;
    },
    /**
     * @return {string}
     */
    toString: function(){
        return sb.join("");
    }
};
}()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T07:45:17.327

单例在闭包中的工作方式不同。我没有看到它的显式注释，但是编译器（在高级模式下）对某些内置函数有一些了解单例将通过 goog.addSingletonGetter 函数声明，这是一个代码示例

```
/**                                                                                 
 * @constructor                                                                     
 * @extends {path.to.BaseClass}                                                 
 */
path.to.MyClass = function() {
  goog.base(this);
};

goog.inherits(path.to.MyClass, path.to.BaseClass);
goog.addSingletonGetter(path.to.MyClass); 
```

就是这样。

PS您得到了错误的注释，因为`{SingltonStringBuffer}`从未将其声明为类。

聚苯乙烯。有些人在事后胡言乱语。我怀疑（但这是未经测试的）将构造函数设为私有可能会起作用。注意示例中的尾随下划线

```
/**
 * @private -> NOTE THIS IS IN NO WAY VERIFIED                                                                                
 * @constructor                                                                     
 * @extends {path.to.BaseClass}                                                 
 */
path.to.MyClass_ = function() {
  goog.base(this);
};
goog.inherits(path.to.MyClass, path.to.BaseClass);
goog.addSingletonGetter(path.to.MyClass); 
```

# css - 使用 HTML 和 CSS 调整 DOM 元素的大小

> ID：10059615
> 
> 赞同：0
> 
> 时间：2012-04-08T01:04:36.280
> 
> 标签：css, html

`<header>`在HTML 文档中创建 a 时，是否有`<header>`在 CSS 中设置标签大小的标准方法？例如，Stack Overflow 的 header 设置为 31px，而许多其他网站使用的值如 107px 或 117px 大小不是偶数。确定这些高度有什么方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T01:07:35.147

是的，这在很大程度上取决于您实际希望标头的高度。这可能特别重要，例如，如果您有浮动元素，但标题的所需高度通常是设置其高度的决定因素 =)

# javascript - 位运算符在 2^31 后停止工作

> ID：10059622
> 
> 赞同：0
> 
> 时间：2012-04-08T01:06:04.580
> 
> 标签：javascript, architecture, bitwise-operators, bitwise-and, bitwise-or

说我有这个：

```
// different things you can do
var CAN_EAT = 1,
    CAN_SLEEP = 2,
    CAN_PLAY = 4,
    CAN_DANCE = 8,
    CAN_SWIM = 16,
    CAN_RUN = 32,
    CAN_JUMP = 64,
    CAN_FLY = 128,
    CAN_KILL = 256,
    CAN_BE_JESUS = Math.pow(2, 70);

// the permissions that I have
var MY_PERMS = CAN_EAT | CAN_SLEEP | CAN_PLAY | CAN_BE_JESUS;

// can I eat?
if(MY_PERMS & CAN_EAT) alert('You can eat!'); /* RUNS */

// can I sleep?
if(MY_PERMS & CAN_SLEEP) alert('You can sleep!'); /* RUNS */

// can I play?
if(MY_PERMS & CAN_PLAY) alert('You can play!'); /* RUNS */

// can I be jesus?
if(MY_PERMS & CAN_BE_JESUS) alert('You can be jesus!'); /* WONT RUN */ 
```

然后如果我运行它，它会打印出我可以吃饭、睡觉和玩耍。它不会打印出我可以成为耶稣，因为那个数字是 2^70。如果我将数字设为 2^31，那么它将起作用（我在 64 位机器上，但在运行上述示例时必须在 32 位模式下运行 Chrome）。

在处理位运算符时，我也一直在 PHP 中遇到这个问题。通常我可以根据我所处的场景来实现它，所以我的列表中最多有 31 或 63 件事情并不是什么大不了的事，但有时我需要的远不止这些。有没有办法绕过这个限制？位运算符是如此快速和方便。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:34:31.050

好吧，正如您所怀疑的那样，这个问题显然是javascript中整数的宽度。据此，js[中](https://stackoverflow.com/questions/307179/what-is-javascripts-max-int-whats-the-highest-integer-value-a-number-can-go-t)的数字可以达到2^53，所以你可以有53个不同的位。据此[，](http://php.net/manual/en/function.intval.php)在 64 位机器中，php 一直到 2^63 - 1，所以你得到 62 位。
如果您需要更多，您应该重新考虑您的设计 - 您是否可以将标志分成 2 个（或更多）组，每个组都有自己的含义（如与食物相关的动作、其他动作、其他任何东西等） ?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T10:24:33.837

您可以在[ECMAScript 语言规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)中阅读更多相关信息，ECMAScript 是 JavaScript 的子集，请查看[此处](https://stackoverflow.com/questions/4269150/what-is-ecmascript)和[此处](http://en.wikipedia.org/wiki/ECMAScript)。

```
` Some ECMAScript operators deal only with integers in the range -2^31
through 2^31 - 1, inclusive, or in the range 0 through 2^32-1, inclusive. 
These operators accept any value of the Number type but first convert 
each such value to one of 2^32 integer values. 
See the descriptions of the ToInt32 and ToUint32 operators in 9.5 and 
9.6, respectively. ` 
```

# php - 无法连接到本地 MySQL 服务器

> ID：10059624
> 
> 赞同：0
> 
> 时间：2012-04-08T01:06:52.113
> 
> 标签：php, mysql

我有一个配置如下的帐户页面；

```
if(!isset($_SESSION["myusername"])){ 
```

> 然后显示一些登录表单

否则连接到数据库并显示登录用户的详细信息。该页面显示表单，但底部有一些 mysql 错误。

![mysql错误](../Images/9dc9f751975216e3d4ff284d617e9426.png)

问题是此时条件只是显示表单，而不是连接到 mysql。

现在输入用户名：demo@demo.com / 密码：demo（字体是白色的，我还没有修复。）网站是[http://auto-sal.es/account.php](http://auto-sal.es/account.php)

你会看到一切正常。 ![登录](../Images/5afc9cef8e24cc2291a1c523fa79db08.png)

谁能帮我找出问题所在。

这是帐户页面的代码。

```
<?php include("header.php"); ?>
<body id="account">
<div id="wholewrap">
<div id="bodywrap">
<div id="content">

<?php
session_start();
if(!isset($_SESSION["myusername"])){
$form = '
<h1>Members section</h1>
<table width="300" border="0" align="center" cellpadding="0" cellspacing="1">
<tr>
<form name="form1" method="post" action="checklogin.php">
<td>
<table width="100%" border="0" cellpadding="3" cellspacing="1">
<tr>
<td colspan="3"><strong>Member Login </strong></td>
</tr>
<tr>
<td width="78">Username</td>
<td width="6">:</td>
<td width="294"><input name="myusername" type="text" id="myusername"></td>
</tr>
<tr>
<td>Password</td>
<td>:</td>
<td><input name="mypassword" type="text" id="mypassword"></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><input type="submit" name="Submit" value="Login"></td>
</tr>
</table>
</td>
</form>
</tr>
</table>';
echo $form;
}
else
include("conn.php");
$strSQL = "SELECT * FROM customer WHERE cus_id = '$cus_id';";
$rs = mysql_query($strSQL);
mysql_error();
while($row = mysql_fetch_array($rs)) {
$layout='
<h1>Your details</h1>
<table border="1" cellspacing="0" cellpadding="0">
  <tr>
    <td width="308" valign="top"><p>Name:</p></td>
    <td width="308" valign="top"><p>' . $row['name'] . '</p></td>
  </tr>
  <tr>
    <td width="308" valign="top"><p>DOB:</p></td>
    <td width="308" valign="top"><p>' . $row['dob'] . '</p></td>
  </tr>
  <tr>
    <td width="308" valign="top"><p>Address:</p></td>
    <td width="308" valign="top"><p>' . $row['address'] . '</p></td>
  </tr>
  <tr>
    <td width="308" valign="top"><p>Email:</p></td>
    <td width="308" valign="top"><p>' . $row['email'] . '</p></td>
  </tr>
  <tr>
    <td width="308" valign="top"><p>Telephone:</p></td>
    <td width="308" valign="top"><p>' . $row['telephone'] . '</p></td>
  </tr>
  <tr>
    <td width="308" valign="top"><p>Join date:</p></td>
    <td width="308" valign="top"><p>' . $row['join_date'] . '</p></td>
  </tr>
  <tr>
    <td width="308" valign="top"><p>Last access:</p></td>
    <td width="308" valign="top"><p>' . $row['last_access'] . '</p></td>
  </tr>
</table>';
echo $layout;
}
mysql_close();
    ?>
</div>  <!-- content #end -->
<div id="sidebar">
<h1>Sidebar</h1>
</div>  <!-- sidebar #end -->
</div>  <!-- bodywrap #end -->
</div>  <!-- wholewrap #end -->
<?php include("footer.php");?> 
```

**连接内容**

```
<?php
$host="xxx"; // Host name 
$username="xxxx"; // Mysql username 
$password="xxx"; // Mysql password 
$db_name="xxx"; // Database name 
$name=$_SESSION['name'];
$cus_id=$_SESSION['cus_id'];

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");
mysql_set_charset('utf8');
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T01:24:12.823

查看您的代码的这些行：

```
else
   include("conn.php");
$strSQL = "SELECT * FROM customer WHERE cus_id = '$cus_id';";
$rs = mysql_query($strSQL); 
```

如果设置了 $_SESSION["myusername"]，您的代码将仅包含连接文件 (conn.php)。您需要将所有查询代码包装在 else 部分之间`{ ... }`

# ruby-on-rails - 使用 Heroku 部署的 Gemfile 中的错误

> ID：10059627
> 
> 赞同：0
> 
> 时间：2012-04-08T01:07:23.703
> 
> 标签：ruby-on-rails, heroku, gemfile

我正在阅读[本手册](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book#sec%3athe_first_application)，当我尝试部署我的第一个应用程序时，git 说：

```
-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Detected Rails is not set to serve static_assets
       Installing rails3_serve_static_assets... done
-----> Configure Rails 3 to disable x-sendfile
       Installing rails3_disable_x_sendfile... done
-----> Configure Rails to log to stdout
       Installing rails_log_stdout... done
-----> Gemfile detected, running Bundler version 1.0.7
       Unresolved dependencies detected; Installing...
       Using --without development:test
       Windows Gemfile.lock detected, ignoring it.
       You have modified your Gemfile in development but did not check
       the resulting snapshot (Gemfile.lock) into version control

       You have added to the Gemfile:
       * source: rubygems repository http://rubygems.org/
       * rails (= 3.0.3)
       * sqlite3 (= 1.3.3)
       FAILED: http://devcenter.heroku.com/articles/bundler
 !     Heroku push rejected, failed to install gems via Bundler

To git@heroku.com:myapp.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:myapp.git' 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T01:16:37.690

不幸的是，您不能从 Windows Rails 安装很好地部署到 Heroku。

它告诉您在说它忽略文件后您没有立即提交该文件，所以您要回答的真正问题是“为什么 Heroku 不接受我的 Windows Gemfile.lock 文件？”。基于此，我会取出“检测到 Windows Gemfile.lock；忽略它”并将其粘贴到谷歌或 Stack Overflow 中。

那会引导你到之前的 SO 答案： [为什么 Heroku 在 Windows 中不接受我的 Gemfile.lock？](https://stackoverflow.com/questions/5954236/why-wont-heroku-accept-my-gemfile-lock-in-windows)

# java - Google App Engine DataStore - 如何以有效的方式从 Java 中的子表的键中选择父实体？

> ID：10059631
> 
> 赞同：0
> 
> 时间：2012-04-08T01:08:00.437
> 
> 标签：java, google-app-engine, google-cloud-datastore

我正在尝试将此 Python 代码从演示文稿 [Building Scalable, Complex Apps on App Engine](http://www.google.com/events/io/2009/sessions/BuildingScalableComplexApps.html)翻译成 Java ，

GAEJ 是否支持这样做？

```
indexes = db.GqlQuery( "SELECT __key__ FROM MessageIndex " "WHERE receivers = :1", me)
keys = [k.parent() for k in indexes] 
messages = db.get(keys) 
```

下面是我在 Java 中的实现。这些功能和性能是否等效？如果我有大量密钥会怎样？

```
Query query1 = new Query("MessageIndex");
query1.setKeysOnly();
query1.addFilter("receivers", FilterOperator.EQUAL, me);

PreparedQuery pq2 = datastore.prepare(query1);

Iterable<Entity> entities = pq2.asIterable();
HashSet<Key> keys = new HashSet<Key>();
    for (Entity en : entities)
       keys.add(en.getParent());

Query query2 = new Query("Messages");
query2.addFilter("__key__", FilterOperator.IN, keys); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:59:13.727

正如@Rick 已经指出的那样，获取比查询更快、更便宜。您只需要更改代码的最后一部分。代替：

```
Query query2 = new Query("Messages");
query2.addFilter("__key__", FilterOperator.IN, keys); 
```

做就是了：

```
Map<Key,Entity> messages = datastore.get(keys); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T02:03:32.213

查看 DatastoreService API [https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/DatastoreService](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/DatastoreService)

DatastoreService.get(keys) 比使用键查询更有效。

# c++ - C++ 中带有空字节的字符串

> ID：10059632
> 
> 赞同：-3
> 
> 时间：2012-04-08T01:08:48.580
> 
> 标签：c++

我对 C++ 中的字符串有疑问。如果空字节进一步增加一个索引会发生什么？如下所示。

```
char name [10] = "Jack";

0   1   2   3   
J | a | c | k |

name [5] = '\0'; 
```

这是我作业中的状态。额外的空杂物。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T01:12:50.060

“将会发生什么”是什么意思？

根据您写的内容，您只是创建了一个包含 10 个位置的数组，用 填充前 5 个位置`Jack\0`，然后分配`\0`给第六个位置。每个使用字符串的函数都会以完全相同的方式对待它，因为字符串通常以`\0`.

# php - 基于 PHP/MySQL 生成 x 个 html 元素

> ID：10059635
> 
> 赞同：1
> 
> 时间：2012-04-08T01:09:37.783
> 
> 标签：php, mysql, html

对于某个 MYSQL 行中的每个逗号，

我想创建 x html 元素，其中 x = 一行内的逗号数。

例如，如果我的 mysql 行看起来像这样：

```
dance, singing, drawing, acting, 
```

那是4个逗号。

我想为每个逗号创建一个 html 框（使用 div），并在该框内显示爱好..

所以就像在 main.php 页面上一样，显示：

[ 舞蹈 ]

[ 唱歌 ]

[ 绘画 ]

[演技]

假设我将在表中添加更多爱好，如何根据 mysql 表中的一定数量的逗号创建一定数量的 html 元素？

顺便说一句，我使用 php 作为服务器端语言。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T01:14:47.863

这是未经测试的，所以考虑它是伪代码。您可能需要转义方括号。您可能遇到的另一个问题是最后可能有一个空的 div 输出。在这种情况下，只需检查`$elem != ''`.

```
$elements = explode(',', $mysql_data_column);
foreach($elements as $elem)
{
   echo "<div style=\"block\">[$elem]</div>";
} 
```

# java - 使用文本字段和按钮初始化变量

> ID：10059638
> 
> 赞同：1
> 
> 时间：2012-04-08T01:10:35.490
> 
> 标签：java, swing, jpanel, jtextfield

我有一段这样的代码，我正在尝试使用按钮来访问 JTextField ...

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class NameGameFrame extends JFrame
{
    public static void main( String[] args)
    {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setTitle("Name Game");
        frame.setLocation(500,400);
        frame.setSize(500,500);

        JPanel panel = new JPanel(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();

        JLabel label = new JLabel("Enter the Name or Partial Name to search:");
        c.gridx = 0;
        c.gridy = 0;
        c.insets = new Insets(2,10,10,10);

        panel.add(label,c);

        JTextArea  textarea = new JTextArea(5,30);
        panel.add(textarea);

        JTextField textfield = new JTextField(20);

        JButton button = new JButton("Search");
        c.gridx = 1;
        c.gridy = 1;
        panel.add(button,c);

        panel.add(textfield);

        frame.getContentPane().add(panel, BorderLayout.NORTH);
        frame.setVisible(true);

    }
    static class Action implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            String name  = textfield.getText();
            textarea.append(name);
            textfield.selectAll();
        }
    }
} 
```

我的代码中出现以下错误，我不明白为什么...

1.  错误找不到符号字符串名称 = textfield.getText();
2.  错误找不到符号 textarea.append(name);
3.  错误找不到符号 textfield.selectAll();

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T01:20:12.477

我认为所有这 3 个错误的原因是相同的 - 您需要将变量移到更高级别，以便两种方法都可以访问它们......

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class NameGameFrame extends JFrame
{

    // Moved these 2 variables to be class-level
    static JTextField textfield = new JTextField(20);
    static JTextArea  textarea = new JTextArea(5,30);

    public static void main( String[] args)
    {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setTitle("Name Game");
        frame.setLocation(500,400);
        frame.setSize(500,500);

        JPanel panel = new JPanel(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();

        JLabel label = new JLabel("Enter the Name or Partial Name to search:");
        c.gridx = 0;
        c.gridy = 0;
        c.insets = new Insets(2,10,10,10);

        panel.add(label,c);

        panel.add(textarea);

        JButton button = new JButton("Search");
        c.gridx = 1;
        c.gridy = 1;
        panel.add(button,c);

        panel.add(textfield);

        frame.getContentPane().add(panel, BorderLayout.NORTH);
        frame.setVisible(true);

    }
    static class Action implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            String name  = textfield.getText();
            textarea.append(name);
            textfield.selectAll();
        }
    }
} 
```

对于 Java 和大多数其他语言，请确保在尝试解决其他错误之前先解决第一个错误 - 通常第一个错误可能会在以后导致其他错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T01:22:56.500

声明和使用在不同的功能中；所以你不能访问它。

# php - 在一个 SQL 列中保存多个元素的好方法？

> ID：10059641
> 
> 赞同：2
> 
> 时间：2012-04-08T01:11:15.653
> 
> 标签：php, mysql, database

我正在为网站建模 MySQL 数据库。

我现在正在制作**“人”**表，并决定需要哪些**列**。

一个**人**有一个**名称**列，
我想添加**别**名列，其中包含各种约定中的名称。

例如，一个名为*“Micheal Jackson”的人*可能有“ *M. Jackson* ”、 *“Jackson, M”*或*“MJ”之类的***别名**。

 ***反正每个人可以有不同数量的别名，那么什么**数据类型**才是合理的呢？

将*别名*字段设为**Varchar**，并将每个别名放入其中，然后在 PHP 中拆分它们？

或从PHP中的*名称***动态**创建别名？而不是把它放在数据库中？

 *我在等待好的建议，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T01:16:07.890

执行此操作的规范化方法是使用一个单独的别名表，其中包含一个人员 ID 字段和一个别名字段，并建立多对一关系。另一种方法是拥有一个`VARCHAR`包含所有别名的字段并在 PHP 中拆分它们。如果您从不需要搜索别名，这应该可以工作，但规范化版本要干净得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T01:28:46.870

创建一个新表并调用它`aliases`。此表应与您的表具有多对一关系`people`。

![表关系](../Images/f63d4f38bfefbc9e4aa0089257a1e5b8.png)

该表`aliases`应该有一个指向父表的外键`persons`（即有一个`aliases.personId`引用的列`people.personId`）

然后来检索数据使用`Joins`。

参考：

[基数（数据建模）](https://en.wikipedia.org/wiki/Cardinality_%28data_modeling%29)

[外键](https://en.wikipedia.org/wiki/Foreign_key)

[加入 (SQL)](https://en.wikipedia.org/wiki/Join_%28SQL%29)

最后也是最重要的[标准化](https://en.wikipedia.org/wiki/Database_normalization)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T01:33:01.360

最好使用另一个表作为别名，但如果您想使用一个表，还有另一种方法

用 # 分隔名称和别名并将它们放在一列中

迈克尔杰克逊#M.Jackson

在 php 代码中，您可以使用 explode 来获取名称和别名

```
$fullname = "Micheal Jackson#M.Jackson";

$each = explode('#' , $fullname );
$each[0];//Micheal Jackson
$each[1];//M.Jackson 
```****

# javascript - 在jQuery中，如何定义一个以选择器为参数的函数？

> ID：10059642
> 
> 赞同：3
> 
> 时间：2012-04-08T01:11:28.127
> 
> 标签：javascript, jquery

我正在尝试定义一个函数：

```
var photoWidth = $('#photo_preview').width();
var photoHeight = $('#photo_preview').height();

if (imgHeight > imgWidth){
    $('#photo_preview').css('width','100');
    } 
```

我的目标是创建一个类似的函数：

```
resizePhoto(theselector); 
```

...参数“theselector”为 $('#photo_preview') 或任何其他选择器。

注意：我不能为此使用课程。

我应该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T01:14:38.970

```
function resizePhoto(selector){
  var photoWidth = $(selector).width();
  var photoHeight = $(selector).height();

  if (imgHeight > imgWidth){
    $(selector).css('width','100');
  }
} 
```

...

```
resizePhoto('#photo_preview'); //Usage 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T01:25:52.253

```
function(selector) {
    var $jq = $(selector);
    var imgWidth = $jq.width();
    var imgHeight = $jq.height();

    if (imgHeight > imgWidth){
        $jq.css('width','100px');
    }
} 
```

# python - -bash：django-admin.py：找不到命令（Django 安装）

> ID：10059644
> 
> 赞同：0
> 
> 时间：2012-04-08T01:11:56.887
> 
> 标签：python, django, django-admin, project, installation

抱歉，我意识到这是一个非常新手的问题：我还没有熟练使用 Python。我尝试遵循一些基本的 django 教程来运行一个简单的站点。`-bash: django-admin.py: command not found`尝试使用命令`django-admin.py startproject FirstBlog`功能时，我在 Mac 终端中遇到错误。

如果我尝试`python django-admin.py startproject FirstBlog`，终端返回

```
 Traceback (most recent call last):
 File "django-admin.py", line 2, in <module>
 from django.core import management
 ImportError: No module named django.core 
```

我已经从不同的目录尝试了这些命令，但结果仍然相同。这是 MacOSX 10.5.8 和 Bitnami DjangoStack 1.4。我试图在 stackoverflow 和谷歌的其他地方找到答案：人们建议将路径更改为 django-admin.py。我已经尝试过，但要么写错了我的路径，要么这不是问题。

如果需要更多信息，我很乐意提供。谢谢你。

## 编辑

在安装程序遇到很多困难后，我已经放弃了 BitNami DjangoStack。我已经恢复到手动安装 Django/mysql，结果证明这要容易得多。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T03:39:27.170

看起来 Bitnami 提供了自己的 Python 版本，并且安装了 Django，因此您需要确保运行的是 Python 而不是 Apple 提供的系统 Python。根据[快速入门指南](http://bitnami.org/files/stacks/djangostack/1.4-0/djangostack.pdf)，看起来您可以使用他们提供的控制台应用程序，这应该确保您使用他们的 Python 运行：

```
/Applications/djangostack-1.4-0/use_djangostack 
```

或者您可以使用该 Python 的绝对路径：

```
/Applications/djangostack-1.4-0/python/bin/python django-admin.py 
```

# javascript - 匹配来自javascript中两个函数的表单中的两个字段

> ID：10059645
> 
> 赞同：0
> 
> 时间：2012-04-08T01:12:10.947
> 
> 标签：javascript

我有两个要匹配的字段。（已经完成了字段 1 和 2 的验证功能）

field01 有一个客户编号 Txxxxx xxxxx（可以是 TG 或 M）

field02 的区号为 416 / 905 / 647

我想将 T 与 416 匹配，将 G 与 905 匹配，将 M 与 647 匹配。如果规则被破坏，则显示关系错误。

我做了一个单独的函数来比较两者。

```
 function validatecompare(errMessages)
   {

       var clientID = document.pizza.field02;
       var telenum = document.pizza.field03;

       var client = clientID.value;
       var phone  = telenum.value;
       var firstL = "";
       var areaC  = "";

firstL=client.substr(0,1);
areaC =phone.substr(0,3);

     if ((firstL) !=areaC)
       {
          errMessages += "<li>Client Number and Telephone No. are not consistent with our set up rules.</li>\n";
       }

     return errMessages;

 } 
```

我知道那是错误的，我只是不知道如何比较来自两个单独函数的两个字段。无论我做什么，都会弹出错误消息。即使我违反了字段 1 和 2 的规则，错误消息也会在不应该出现的情况下弹出。

如果在某个地方我可以阅读有关如何执行此操作的信息，那将非常适合将来参考。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T01:21:34.980

您实际上是在比较`416`and `T`。您需要某种查找表：

```
function validatecompare(errMessages) {
    var clientID = document.pizza.field02;
    var telenum  = document.pizza.field03;

    var client = clientID.value;
    var phone  = telenum.value;
    var firstL = client.charAt(0);
    var areaC  = phone.substr(0, 3);

    var areaCodes = {
        '416': 'T',
        '905': 'G',
        '647': 'M'
    };

    if(firstL !== areaCodes[areaC]) {
        errMessages += "<li>Client Number and Telephone No. are not consistent with our set up rules.</li>\n";
    }

    return errMessages;
} 
```

# user-interface - JFrame 还是类对象？

> ID：10059646
> 
> 赞同：0
> 
> 时间：2012-04-08T01:12:46.177
> 
> 标签：user-interface

我想知道是否有必要创建一个 JFrame 对象，或者我可以简单地创建一个 LoanCalculator 对象来调用 JFrame 方法吗？在我之前完成的 GUI 代码中，创建一个 JFrame 对象（例如 JFrame frame = new JFrame()）或类对象可以工作并且程序运行良好。

究竟有什么区别？创建一个 JFrame 对象而不是一个类有什么意义？（我的问题唯一相关的部分是我的主类中的代码）

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class LoanCalculator extends JFrame{
        private JButton jbtCompute = new JButton("Compute Payment");

    public LoanCalculator(){
        JPanel panel1 = new JPanel();
            panel1.setLayout(new GridLayout(5, 2));
        panel1.add(new JLabel("Annual Interest Rate"));
        panel1.add(new JTextField(8));
        panel1.add(new JLabel("Number of Years"));
        panel1.add(new JTextField(8));
        panel1.add(new JLabel("Loan Amount"));
        panel1.add(new JTextField(8));
        panel1.add(new JLabel("Monthly Payment"));
        panel1.add(new JTextField(8));
        panel1.add(new JLabel("Total Payment"));
        panel1.add(new JTextField(8));

        JPanel panel2 = new JPanel();
        panel2.setLayout(new FlowLayout(FlowLayout.RIGHT));
        panel2.add(jbtCompute);
    }

    public static void main(String[] args){
        LoanCalculator frame = new LoanCalculator();

        frame.setTitle("Loan Calculator");
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setResizable(false);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T01:42:42.253

如果`LoanCalculator`是 的子类`JFrame`，则它继承属于的所有方法和变量`JFrame`（以及您添加到`LoanCalculator`自己的任何方法和变量）。凡是你能对一个普通人做的事，你就能对一个`JFrame`人做`LoanCalculator`。

您粘贴的代码对我来说看起来不错（除了您从未添加`panel1`或添加`panel2`到框架的 contentPane 中）。

# mysql - 存储一周时间的最佳方式

> ID：10059653
> 
> 赞同：0
> 
> 时间：2012-04-08T01:14:34.367
> 
> 标签：mysql, perl

我有一种情况，我希望用户能够指定一个时间范围，其中时间是给定一周中存在的相对范围。因此，用户可以选择星期一下午 5 点至星期二凌晨 1 点。可以把它想象成“一个人的轮班时间”。

我的第一反应是我可以存储“相对”时间。因此，假设一周从星期一 00:00:00 开始，星期一中午将被指示为 86400/2= **43200**。我不太喜欢这种方法，因为它使处理时区有点困难。

是否有这样做的“最佳”方法（或只是一个好的方法）？MySQL 是否有某种数据类型专门处理这个问题？

我已经标记了这个“Perl”和“MySQL”，因为我将在这个应用程序中使用它们，但从技术上讲，答案不必特定于它们中的任何一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T01:28:24.583

最佳答案在一定程度上取决于您将如何处理下游数据。

但我建议避免任何黑客攻击并采取直接的方法（表语法 Sybase，因为我的 MySQL 生锈了 - 抱歉）

```
CREATE TABLE weekday_ranges (
    start_dow    int,  -- 0-6 or 1-7 depending on what's easier downstream 
    start_hour   int,  -- 0-23
    start_minute int,  -- 0-59
    -- Add seconds/micorseconds as needed
    end_dow      int,
    end_hour     int,
    end_minute   int
) 
```

另一种方法是存储从周日 00:00 开始的偏移量（以秒为单位），包括开始和结束偏移量。这提供了它的好处（例如，范围比较仅仅是`<`和`>`运算符而不是复杂的表达式）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-08T01:54:45.067

将开始和结束时间分别存储在一个字段中（而不是分解为多个部分）将允许对该字段进行索引。否则，差别不大。（归根结底是选择这些部分是在 Perl 中还是在 SQL 中组合成一个值。）

确实存在一个无法解决的时区问题：在退出 DST 期间，您无法区分第一个凌晨 2 点和第二个凌晨 2 点。输入中根本没有足够的信息来处理它。

# python - 在数轴上设置范围的好方法是什么？

> ID：10059656
> 
> 赞同：1
> 
> 时间：2012-04-08T01:14:54.040
> 
> 标签：python, encoding

我有一些这样的数据，其中第二个字段是第一个字段的概率，所以“0：0.017”表示有 0.017 的机会为 0。所有概率的总和为 1。

我的问题是：如何从概率中“范围线”，以便找到每个字符的下限和上限？所以 0 将是 [0, 0.017), [0.017, 0.022) 等等。

我正在尝试实现算术编码。

```
(0: 0.017,
1: 0.022,
2: 0.033,
3: 0.033,
4: 0.029,
5: 0.028,
6: 0.035,
7: 0.032,
8: 0.028,
9: 0.027,
a: 0.019,
b: 0.022,
c: 0.029,
d: 0.03,
e: 0.028,
f: 0.035,
g: 0.026,
h: 0.037,
i: 0.029,
j: 0.025,
k: 0.025,
l: 0.037,
m: 0.025,
n: 0.023,
o: 0.026,
p: 0.035,
q: 0.033,
r: 0.031,
s: 0.023,
t: 0.022,
u: 0.038,
v: 0.022,
w: 0.016,
x: 0.026,
y: 0.021,
z: 0.033,) 
```

编辑*

nvm 我想通了，只是搞砸了愚蠢的数学......感谢所有输入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T01:37:58.357

将数据转换为 python 留作练习：

```
>>> corpus = [('0', 0.017), ('1', 0.022), ('2', 0.033), ('3', 0.033), ('4', 0.029),
...           ('5', 0.028), ('6', 0.035), ('7', 0.032), ('8', 0.028), ('9', 0.027),
...           ('a', 0.019), ('b', 0.022), ('c', 0.029), ('d', 0.030), ('e', 0.028),
...           ('f', 0.035), ('g', 0.026), ('h', 0.037), ('i', 0.029), ('j', 0.025),
...           ('k', 0.025), ('l', 0.037), ('m', 0.025), ('n', 0.023), ('o', 0.026),
...           ('p', 0.035), ('q', 0.033), ('r', 0.031), ('s', 0.023), ('t', 0.022),
...           ('u', 0.038), ('v', 0.022), ('w', 0.016), ('x', 0.026), ('y', 0.021),
...           ('z', 0.033)] 
```

创建一个累积和：

```
>>> distribution = []
>>> total = 0.0
>>> for letter, frequency in corpus:
...     distribution.append(total)
...     total += frequency
... 
```

实际上使用这种数据是`bisect`模块的基础。

```
>>> import bisect, random
>>> def random_letter():
...     value = random.random()
...     index = bisect.bisect(distribution, value) - 1
...     return corpus[index][0]
... 
>>> [random_letter() for n in range(10)]  # doctest: +SKIP
['d', '6', 'p', 'c', '8', 'f', '7', 'm', 'z', '7'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T01:49:09.387

```
# The data is input as '1: 0.022,' format
def process_data(line):
    # for returning the new string that is cleaned up
    result_line = ''
    for character in line:
        # check if it is either a number or a letter
        if character.isdigit() or character.isalpha():
            result_line += character
        # we want the decimal point
        elif character == '.':
            result_line += character
        # else we replace it with space ' '
        else:
            result_line += ' '
    return result_line

my_list = []  

with open('input.txt') as file:
    for lines in file:
        processed_line = process_data(lines)
        # temp_list has ['letter', 'frequency']
        temp_list = (processed_line.split())
        value = temp_list[0]
        # Require to cast it to a float, since it is a string
        frequency = float(temp_list[1])
        my_list.append([value, frequency])

print(my_list) 
```

从这一点开始，您可以弄清楚如何处理您的价值观。我记录了代码（授予了一种非常简单的天真方式来处理输入文件）。但是`my_list`现在干净且格式正确，带有`string`（值）和`float`（频率）。希望这有帮助。

**上面代码的输出：**

```
[['0', 0.017], ['1', 0.022], ['2', 0.033], ['3', 0.033], 
['4', 0.029], ['5', 0.028], ['6', 0.035], ['7', 0.032], 
['8', 0.028], ['9', 0.027], ['a', 0.019], ['b', 0.022], 
['c', 0.029], ['d', 0.03], ['e', 0.028], ['f', 0.035], 
['g', 0.026], ['h', 0.037], ['i', 0.029], ['j', 0.025], 
['k', 0.025], ['l', 0.037], ['m', 0.025], ['n', 0.023], 
['o', 0.026], ['p', 0.035], ['q', 0.033], ['r', 0.031], 
['s', 0.023], ['t', 0.022], ['u', 0.038], ['v', 0.022], 
['w', 0.016], ['x', 0.026], ['y', 0.021], ['z', 0.033]] 
```

进而...

```
# Took a page out of TokenMacGuy, credit to him
distribution = []
distribution.append(0.00)  
total = 0.0 # Create a float here

for entry in my_list:
    distribution.append(entry[1])
    total += frequency
    total = round(total, 3) # Rounding to 2 decimal points

distribution.append(1.00) # Missing the 1.00 value
print(distribution) # Print to check 
```

**的输出在这里：**

```
[0.0, 0.017, 0.022, 0.033, 0.033, 0.029, 0.028, 0.035, 0.032, 
0.028, 0.027, 0.019, 0.022, 0.029, 0.03, 0.028, 0.035, 0.026, 
0.037, 0.029, 0.025, 0.025, 0.037, 0.025, 0.023, 0.026, 0.035, 
0.033, 0.031, 0.023, 0.022, 0.038, 0.022, 0.016, 0.026, 0.021, 
0.033, 1.0] 
```

最后，输出最终结果： 没有什么特别的，我用`pattern`and`format`让它们看起来更好看。它几乎是根据ninjagecko的方法来计算的。我确实必须将 0.00 和 1.00 填充到分布中，因为计算没有显示出来。在我们弄清楚如何计算概率**之后**，非常直接的实现。

```
pattern = '{0}: [{1:1.3f}, {2:1.3f})'
count = 1 # a counter to keep track of the index

pre_p = distribution[0] 
p = distribution[1]

# Here we will print it out at the end in the format you said in the question
for entry in my_list:
    print(pattern.format(entry[0], pre_p, p))
    pre_p += distribution[count]
    p += distribution[count+1]
    count = count + 1 
```

输出：

```
0: [0.000, 0.017)
1: [0.017, 0.039)
2: [0.039, 0.072)
3: [0.072, 0.105)
4: [0.105, 0.134)
5: [0.134, 0.162)
6: [0.162, 0.197)
7: [0.197, 0.229)
8: [0.229, 0.257)
9: [0.257, 0.284)
a: [0.284, 0.303)
b: [0.303, 0.325)
c: [0.325, 0.354)
d: [0.354, 0.384)
e: [0.384, 0.412)
f: [0.412, 0.447)
g: [0.447, 0.473)
h: [0.473, 0.510)
i: [0.510, 0.539)
j: [0.539, 0.564)
k: [0.564, 0.589)
l: [0.589, 0.626)
m: [0.626, 0.651)
n: [0.651, 0.674)
o: [0.674, 0.700)
p: [0.700, 0.735)
q: [0.735, 0.768)
r: [0.768, 0.799)
s: [0.799, 0.822)
t: [0.822, 0.844)
u: [0.844, 0.882)
v: [0.882, 0.904)
w: [0.904, 0.920)
x: [0.920, 0.946)
y: [0.946, 0.967)
z: [0.967, 1.000) 
```

完整来源在这里：[http ://codepad.org/a6YkHhed](http://codepad.org/a6YkHhed)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T01:28:23.830

创建字典，键是你的字符，值是定义上下限的对。

```
prev_p = 0
bounds = {}
for line in open(a_file):
   character, p = parse_the_line(line)
   bounds[character] = (prev_p, p)
   prev_p = p 
```

# php - 在本地 JavaScript 文件中调用外部 PHP 文件？

> ID：10059657
> 
> 赞同：1
> 
> 时间：2012-04-08T01:14:55.787
> 
> 标签：php, javascript, html, external

我的网站上有一个 HTML 表单，它提交所有信息（按下提交后），同时保留在同一页面上。JavaScript 文件启用此功能，因此在您填写并按下提交后，模块会消失并表示感谢您提交您的信息，同时保留在同一页面上。

现在在启用该功能的 JS 中，我必须调用发送表单的实际 PHP。

当它位于我的服务器内部时，该行代码如下所示：

```
 var result= postData(data,'./form.php"');      
 if (result !=null){
     $('#form').html('<img src="./images/thankyou.png"></img>'); 
```

现在这很完美。我不得不将该 PHP 移至位于[http://www.somesite.com/php/action.php的另一台服务器](http://www.somesite.com/php/action.php)

我怎么能称它为 PHP 呢？我试过了

```
var result= postData(data,'http://www.somesite.com/php/form.php"'); 
```

它确实有效。使它工作的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T01:16:54.027

这就是您将使用 AJAX 的目的。这些答案假设您在同一个域上工作。

# 简单的方法

使用 AJAX 最简单的方法是使用 jQuery，但这并不是绝对必要的（见下文）。 [http://www.queness.com/post/160/create-a-ajax-based-form-submission-with-jquery](http://www.queness.com/post/160/create-a-ajax-based-form-submission-with-jquery)

通用样本：

```
$.ajax({
  url: "test.html",
  context: document.body
}).done(function() { 
  $(this).addClass("done");
}); 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# 不太容易的方法

如果你不想使用 jQuery，你可以不用它。 [http://www.webreference.com/programming/javascript/ajax_forms/index.html](http://www.webreference.com/programming/javascript/ajax_forms/index.html)

示例 HTML

```
<p><html><br/>
<head><br/>
<title>Form Posts with Ajax</title><br/>
<script type="text/javascript" src="js/Ajax.js"></script><br/>
<script type="text/javascript" src="js/Post.js"></script><br/>
</head><br/><br/>
<body><br/><br/>
<form action="bridge.php" method="post" onsubmit="Post.Send(this); return false;"><br/>
Name:<br/><input type="text" name="name" /><br/>
<br/><br/><br/>
Message:<br/><textarea name="message"></textarea><br/>
<br/><input type="submit" value="submit" /><br/>
</form><br/><br/>
</body><br/>
</html></p> 
```

示例 JavaScript

```
 var Ajax = new Object();
    Ajax.isUpdating = true;
    Ajax.Request = function(method, url, query, callback)
    {
        this.isUpdating = true;
        this.callbackMethod = callback;
        this.request = (window.XMLHttpRequest)? new XMLHttpRequest(): new ActiveXObject("MSXML2.XMLHTTP");
        this.request.onreadystatechange = function() { Ajax.checkReadyState(); };
        if(method.toLowerCase() == 'get') url = url+"?"+query;
        this.request.open(method, url, true);
        this.request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        this.request.send(query);
    }
    Ajax.checkReadyState = function(_id)
    {
        switch(this.request.readyState)
        {
            case 1: break;
            case 2: break;
            case 3: break;
            case 4:
                this.isUpdating = false;
                this.callbackMethod(this.request.responseXML.documentElement);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T01:26:57.807

听起来您正试图将表单数据从一个域上下文提交到另一台服务器。您可以使用 JSONP 或跨域 JavaScript 来执行此操作。

```
function sendFormData(urlToSendTo) {
    var script = document.createElement("script");
    script.setAttribute("type","text/javascript");
    script.setAttribute("src", urlToSendTo);
    document.getElementsByTagName("head")[0].appendChild(script);
}

$('form').click(function() {
    src="http://www.example.com/php/action.php?name=" + $(this).find('[name="name"]').val() + "&email=" + $(this).find('[name="email"]');
    sendFormData(src);
    return false;  // if this doesn't work, try event.preventDefault();
}); 
```

如果您确实尝试将数据从加载在[http://domain.com](http://domain.com)的网页发送到托管在[http://example.com](http://example.com)的 PHP 页面，这是您无需重新加载即可将数据发送到服务器的唯一方法页。如果 PHP 页面位于同一台服务器上，则 @msigman 发布的其他解决方案将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T08:27:03.583

尝试这种方式：

在您的本地服务器中：`<script type="text/javascript" src="path/to/external/php/file"></script>`

并修改php文件：

```
 <?
Header("content-type: application/x-javascript");
//your php codes here as normal
//your dispalying resoursec here in this format: echo "document.write(\"what you want to display\")";
?> 
```

这个外部 php 文件将向您的本地服务器输出一个 javascript 文件。

# xcode - plist中数组中的数组

> ID：10059659
> 
> 赞同：0
> 
> 时间：2012-04-08T01:15:06.480
> 
> 标签：xcode, nsarray, plist, nsdictionary

我真的在这方面苦苦挣扎；我阅读了许多不同的帖子和苹果文献，但无济于事。我的应用程序中有以下 plist：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>7A</key>
<dict>
    <key>Title</key>
    <string>Cells</string>
    <key>Subunits</key>
    <array>
        <string>Some</string>
        <string>Text</string>
        <string>In</string>
        <string>Here</string>
    </array>
</dict>
<key>7B</key>
<dict>
    <key>Title</key>
    <string>Reproduction</string>
    <key>Subunits</key>
    <array>
        <string>Different</string>
        <string>Text</string>
        <string>In</string>
        <string>Here</string>
    </array>
</dict> 
```

在我拥有的 tableview 中，我可以通过使用数组来保存“allKeys”来显示 7A 和 7B。我现在面临的问题是单击时要做什么。我使用一个属性将所选单元格作为字符串和原始字典传递给下一个视图控制器。但是，我似乎无法“深入”到 Subunits 数组。任何帮助将非常感激。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T01:36:52.367

```
NSDictionary* dict;   // as loaded from your plist file
NSString* selectedKey = @"7A";
NSDictionary* subDict = [dict objectForKey:selectedKey];
NSArray* subunits = [subDict objectForKey:@"Subunits"]; 
```

然后`subunits`应该是一个 NSStrings 数组。

# sql - Neo4j 比 SQL 快吗？

> ID：10059664
> 
> 赞同：5
> 
> 时间：2012-04-08T01:16:04.570
> 
> 标签：sql, nosql, neo4j

我是 Neo4j 的新手，不太明白为什么 Neo4j 必须比高效的 SQL 查询更快。是因为数据结构还是底层查询实现？如果有人可以帮助我解决这个问题，我真的很感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T01:57:19.637

Neo4j 通常并不比 SQL 数据库快。对于基于图形的问题，它在许多情况下更快。例如，如果您想找到两个实体之间的最短路径，Neo4j 很可能会胜过 MySQL 等，因为数据的结构方式以及由于这种结构您可以使用的算法。Neo4j 将其数据存储为节点以及这些节点之间的关系。它们直接相连。一个简单的最短路径算法是广度优先搜索。您从一个节点开始并展开它的连接节点，然后对它的每个子节点执行相同操作，直到找到结束节点。这样，您将只接触少量数据。在 SQL 查询中你不能轻易做到这一点，所以你必须在你的代码中构建一些东西，遍历结果集并为每个结果生成新的查询，依此类推。所以你最终会遇到很多查询。

# .htaccess - Htaccess：PHP 文件的目录，但有例外

> ID：10059670
> 
> 赞同：0
> 
> 时间：2012-04-08T01:17:09.840
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

```
RewriteEngine on

RewriteRule ^station/(.*)/(.*)$ station.php?name=$1&page=$2
RewriteRule ^station/(.*)/(.*)/$ station.php?name=$1&page=$2

RewriteRule ^station/(.*)$ station.php?name=$1
RewriteRule ^station/(.*)/$ station.php?name=$1

RewriteRule ^(.*)/(.*)/(.*)$ $1.php?1=$2&2=$3
RewriteRule ^(.*)/(.*)/(.*)/$ $1.php?1=$2&2=$3 
```

这是我的代码。但是有2个问题。

1.  还有一个实际的目录，称为`/data/`. 这包含图像、css 文件、javascript 文件等。但是当我尝试加载它时，它显然失败了。第一个问题，我怎样才能为这个目录创建一个例外？

2.  如果有人要求`website.com/station`，我希望它阅读`website.com/station.php`，

    当它阅读时`website.com/station/example`，我希望它阅读`website.com/station.php?name=example`，

    当它阅读时`website.com/station/example/pagename`，我希望它阅读`website.com/station.php?name=example&page=pagename`，

    我怎样才能做到这一点？

为任何语法失败道歉，凌晨 3:14，请随时纠正我。

# java - 如何让 Java 使用机器上的所有 CPU 资源？

> ID：10059672
> 
> 赞同：3
> 
> 时间：2012-04-08T01:17:41.323
> 
> 标签：java, cpu

我有时用 Java 编写代码，我注意到有时它在多核机器上使用超过 100% 的 CPU。我现在在具有 33 个 CPU（Amazon 的 EC2）的多核机器上运行一些代码，并且我想让我的 Java 进程使用所有可用的 CPU，以便它对机器有很高的利用率。这可能吗，还是由 Java 决定何时使用超过 100% 的 CPU？我不希望更改代码以使用多线程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T01:36:12.203

如果不使用多个线程或进程（或运行的一个进程以外的其他东西），您将无法在*n*核机器上实现 n*100% 的使用率。

操作系统决定在单个线程上运行每个用户程序，除非请求更多。如果没有该请求，操作系统将很乐意让您在单个线程中运行您的代码，这可能会最大化整个 CPU 的周期 - 但它会让其他 CPU 保持打开状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T01:43:31.543

如果您的程序不是显式多线程的（您自己不启动任何线程），那么它可以利用多个内核的唯一原因是因为您使用了库的某些功能，最终将工作委托给线程池。显然，您对此没有太多控制权，因此您无法使其更加必要地工作。

关于利用 S3 实例中的所有 CPU：您可以多次启动程序（例如，如果您有 33 个 CPU，则启动 33 次）。如果这不可能，您将必须找出处理的哪一部分在线程池上创建工作并更改您的程序，以便它执行更多操作（并行）。

# python - 命名正则表达式组 "(?P 正则表达式）”：“P”代表什么？

> ID：10059673
> 
> 赞同：255
> 
> 时间：2012-04-08T01:18:00.527
> 
> 标签：python, regex, regex-group

在 Python 中，`(?P<group_name>…)` [语法](http://docs.python.org/library/re.html#regular-expression-syntax)允许通过名称引用匹配的字符串：

```
>>> import re
>>> match = re.search('(?P<name>.*) (?P<phone>.*)', 'John 123456')
>>> match.group('name')
'John' 
```

“P”代表什么？[我在官方文档](http://docs.python.org/library/re.html#regular-expression-syntax)中找不到任何提示。

我很想知道如何帮助我的学生记住这种语法。知道“P”代表（或可能代表）什么会很有用。

* * *

## 回答 #1

> 赞同：340
> 
> 时间：2012-04-08T03:05:34.807

既然我们都在猜测，我不妨给出我的：我一直认为它代表 Python。这听起来可能很愚蠢——什么，P 代表 Python？！- 但在我的辩护中，我隐约记得[这个线程](http://markmail.org/message/oyezhwvefvotacc3)[强调我的]：

> 主题：声明 (?P...) 正则表达式语法扩展
> 
> 来自：Guido van Rossum (gui...@CNRI.Reston.Va.US)
> 
> 日期：1997 年 12 月 10 日下午 3:36:19
> 
> 我对 Perl 开发人员（开发 Perl 语言的人员）有一个不同寻常的要求。我希望这个（perl5-porters）是正确的列表。我正在抄送 Python 字符串签名，因为它是我在这里讨论的大部分工作的起源。
> 
> 你可能知道 Python。我是 Python 的创造者；我计划在今年年底之前发布下一个“主要”版本 Python 1.5。我希望 Python 和 Perl 可以在未来几年共存；异花授粉对两种语言都有好处。（我相信 Larry 在将对象添加到 Perl 5 时对 Python 有很好的了解；O'Reilly 出版了有关这两种语言的书籍。）
> 
> 您可能知道，Python 1.5 添加了一个新的正则表达式模块，它更接近于 Perl 的语法。我们试图在 Python 的语法中尽可能接近 Perl 语法。但是，正则表达式语法有一些特定于 Python 的扩展，它们都以 (?P 开头。目前有两个：
> 
> `(?P<foo>...)`与常规分组括号类似，但在
> 匹配完成后，可以通过符号组名“foo”访问组匹配的文本。
> 
> `(?P=foo)`匹配与名为“foo”的组匹配的相同字符串。等价于 \1、\2 等，不同之处在于该组是
> 按名称而不是编号来引用的。
> 
> 我希望这个 Python 特定的扩展不会与 Perl 正则表达式语法的任何未来 Perl 扩展发生冲突。如果您有使用 (?P 的计划，请尽快通知我们，以便我们解决冲突。 **否则，如果 (?P 语法可以永久保留用于 Python 特定的语法扩展，那就太好了。** (是有某种扩展注册表吗？）

拉里沃尔回答说：

> [...] 目前还没有注册表——你的请求是来自 perl5-porters 外部的第一个请求，所以这是一个带宽相当低的活动。（抱歉，上周甚至更低——我在纽约的 Internet World 休息。）
> 
> 无论如何，就我而言，在我的祝福下，你肯定有'P'。（显然 Perl 在这一点上不需要 'P'。:-) [...]

所以不知道当初选择P的动机是什么--pattern？占位符？企鹅？——但你可以理解为什么我总是将它与 Python 联系起来。考虑到（1）我不喜欢正则表达式并尽可能避免它们，以及（2）这个线程发生在十五年前，有点奇怪。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-08T01:26:59.583

图案！该组命名一个（子）模式以供以后在正则表达式中使用。有关如何使用此类组的详细信息，请参阅[此处的文档。](http://docs.python.org/library/re.html)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2019-09-17T00:06:08.597

Python 扩展。来自 Python 文档：

> Perl 开发人员选择的解决方案是使用 (?...) 作为扩展语法。? 括号后立即出现语法错误，因为 ? 没有什么可重复的，所以这并没有引入任何兼容性问题。紧随其后的字符？指示正在使用什么扩展，因此 (?=foo) 是一回事（肯定的前瞻断言），而 (?:foo) 是另一回事（包含子表达式 foo 的非捕获组）。
> 
> Python 支持几个 Perl 的扩展，并在 Perl 的扩展语法中添加了扩展语法。**如果问号后面的第一个字符是 P，你就知道它是 Python 特有的扩展**

[https://docs.python.org/3/howto/regex.html](https://docs.python.org/3/howto/regex.html)

# c++ - 是 STD::Set 我应该使用什么来将对象组织成层次结构吗？

> ID：10059676
> 
> 赞同：4
> 
> 时间：2012-04-08T01:19:08.393
> 
> 标签：c++, boost, data-structures, hierarchy

我想将我所有的游戏对象组织成一个层次结构。我认为一棵树是最好的主意。我考虑过使用 STD::Set 来处理这个问题。这有任何意义吗？基本上，一个游戏对象可以容纳可变数量的其他游戏对象。如果我确实以这种方式处理它，那么处理访问树中对象的最佳方法是什么？通过 ID 访问它们是否足够快？我想我也可以通过指针访问它们，但是如果遇到有很多对象的情况，传递它们听起来有点危险和乏味。

如果有任何影响，我也会显示这些数据。

前任：

```
-Hierarchy
    -GameObject
        -GameObject
        -Gameobject
    -GameObject
        -GameObject
            -GameObject
   -GameObject 
```

我感谢任何输入的家伙。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T02:07:56.867

我假设你想做这样的事情：

```
class GameObject {
    some_container<GameObject> nested_objects_;
    ....
} 
```

如果您真的不需要`O(log(n))`在您的对象集合中搜索和删除，我建议`std::vector`您改用，这样您就可以避免内存开销，并且（很可能）也会避免一些 CPU 开销。因此，如果您只需要为每个对象存储几个嵌套对象，那么一定要选择`std::vector`

但是如果您需要快速查找/删除对象或保持唯一性，那么`std::set`可能是一个不错的选择。为了使用`std::set`你需要提供一个比较函数，它的作用就像一个`<`运算符（严格来说，你的比较函数必须是[严格的弱排序](http://www.sgi.com/tech/stl/StrictWeakOrdering.html)。）你可以`operator <`为你定义一个`GameObject`类。的效率`std::set`取决于这个函数，所以这里要小心。

请注意，您可以通过提供自身来遍历、整个集合或`find`个体（严格来说，您可以提供其等价物 - 查看比较函数）。所以如果你需要通过它的 id 来获取对象，更好地使用它，它更适合这种类型的工作。 [参考](http://www.cplusplus.com/reference/stl/set/)。 [参考](http://www.cplusplus.com/reference/stl/map/)`GameObjects``GameObject``std::map`[`std::set`](http://www.cplusplus.com/reference/stl/set/)[`std::map`](http://www.cplusplus.com/reference/stl/map/)

我还建议研究 boost::unordered_set 和 boost::unordered_map（或 std::unordered_set 和 std::unordered_map 如果你可以使用 C++11）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T01:27:31.783

每个“游戏对象”不能将游戏对象数组作为实例变量是否有原因？也许您的 main 应该创建一个 GameObjects 数组，并且这些游戏对象中的每一个都可以将正在进行的游戏对象保存在一个数组实例变量中。至少我会这么想。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T02:06:06.050

> 我考虑过使用 STD::Set 来处理这个问题。这有任何意义吗？

不，std::set 用于存储唯一对象的集合，其中对象使用用户提供的任何一个`operator<`或`lessthan`比较器进行排序。没有理由将 std::set 用于对象列表。

> 通过 ID 访问它们是否足够快？

这就是问题所在。中没有`ID`s `std::set`。有物体。因此，如果您使用 std::set，您将无法在`ID`不遍历整个集合的情况下访问对象（除非对象按 ID 排序，但这是另一回事）。将某些东西映射到您使用的其他东西`std::map`。`std::set`用于收藏。

> 如果我确实以这种方式处理它，那么处理访问树中对象的最佳方法是什么？

最好的方法可能是使用列表或双端队列——这取决于你的游戏处理对象的方式。

没有代表树木的“最佳”方式。

1.  您可以将层次结构的根对象存储在列表中，并将子对象存储在父对象中。
2.  您可以将所有对象存储在列表中（子对象和父对象），子对象存储对父对象的引用，然后确保“update()”函数将其考虑在内。
3.  您可以存储两个列表 - 一个用于根对象，另一个用于所有对象。（例如，您在第一个列表上调用更新，并使用第二个列表进行碰撞检测查询等）

所有这些方法都是有意义的，并且对于某些场景很有用。

> 但是绕过那些听起来有些危险

是的，当发射导弹的人被炸成碎片并且导弹指向所有者进行友军射击检查时，这肯定会导致游戏崩溃。但是，由于您的问题被标记为“提升”，您可以使用它`boost::weak_ptr`来处理这个问题。对象也可以存储为`shared_ptr`std::list、std::deque 甚至 std::vector 中的 ' 列表 - 取决于您的游戏将如何使用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T01:44:25.560

对于它的价值，我发现通过“路径”访问它们，有点像磁盘上的目录树，效果很好。这取自我正在编写的一些 C# 代码（请注意，我在下面的课程中遗漏了一些内容），但这个想法将直接转化为 C++：

```
sealed class Entity : IEntity
{
    private readonly IDictionary<string,IEntity> m_children = new Dictionary<string,IEntity>();

    private readonly IDictionary<string,dynamic> m_properties;

    public string Name { get { return m_properties["Name"]; } }

    public IEntity Parent { get; set; }

    /// <summary>
    /// Adds a child to this entity.
    /// </summary>
    /// <param name="child">The child to add.</param>
    public void AddChild(IEntity child)
    {
        m_children.Add(child.Name, child);
        child.Parent = this;
    }

    /// <summary>
    /// Gets the absolute path of this entity in its tree.
    /// </summary>
    /// <returns>The entity's absolute path.</returns>
    public string GetAbsolutePath()
    {
        IEntity cur = this;
        var path = new LinkedList<string>();
        while(cur.Parent != null)
        {
            path.AddFirst(cur.Name);
            cur = cur.Parent;
        }
        path.AddFirst(".");
        return string.Join("/", path);
    }

    /// <summary>
    /// Gets another entity in this entity's tree by its absolute path (i.e. its path relative to the root entity).
    /// </summary>
    /// <param name="path">The absolute path to the other entity.</param>
    /// <returns>The other entity, if found, or null otherwise.</returns>
    public IEntity GetEntityByAbsolutePath(string path)
    {
        return GetRootEntity().GetEntityByRelativePath(path);
    }

    /// <summary>
    /// Gets another entity in this entity's tree by its absolute path (i.e. its path relative to the root entity).
    /// </summary>
    /// <param name="path">The absolute path to the other entity, as a list of path components.</param>
    /// <returns>The other entity, if found, or null otherwise.</returns>
    public IEntity GetEntityByAbsolutePath(LinkedList<string> path)
    {
        return GetRootEntity().GetEntityByRelativePath(path);
    }

    /// <summary>
    /// Gets another entity in this entity's tree by its path relative to this entity.
    /// </summary>
    /// <param name="path">The relative path to the other entity.</param>
    /// <returns>The other entity, if found, or null otherwise.</returns>
    public IEntity GetEntityByRelativePath(string path)
    {
        return GetEntityByRelativePath(new LinkedList<string>(path.Split('/')));
    }

    /// <summary>
    /// Gets another entity in this entity's tree by its path relative to this entity.
    /// </summary>
    /// <param name="path">The relative path to the other entity, as a list of path components.</param>
    /// <returns>The other entity, if found, or null otherwise.</returns>
    public IEntity GetEntityByRelativePath(LinkedList<string> path)
    {
        IEntity cur = this;

        while(cur != null && path.Count != 0)
        {
            switch(path.First())
            {
                case ".":
                    break;
                case "..":
                    cur = cur.Parent;
                    break;
                default:
                    cur = cur.GetChild(path.First());
                    break;
            }

            path.RemoveFirst();
        }

        return cur;
    }

    /// <summary>
    /// Gets the root entity of this entity's tree.
    /// </summary>
    /// <returns>The root entity of this entity's tree.</returns>
    private IEntity GetRootEntity()
    {
        IEntity cur = this;
        while(cur.Parent != null)
        {
            cur = cur.Parent;
        }
        return cur;
    }
} 
```

给定实体树中的任何实体，您可以通过它们的绝对或相对路径访问其他实体，例如

```
cityA.GetEntityByRelativePath("../city:B/building:1"); 
```

# objective-c - NSRect 的鼠标事件

> ID：10059677
> 
> 赞同：1
> 
> 时间：2012-04-08T01:19:45.900
> 
> 标签：objective-c, xcode, cocoa

我有一个 NSEvent 并想检测何时单击矩形，所以这是我拥有的代码：

```
- (void)mouseDown:(NSEvent *)event;
{
    NSPoint clickedPoint = [event locationInWindow];
    //perform code for clickedPoint    
} 
```

除了使用 locationInWindow 之外，我如何将矩形或视图转换为 NSPoint 以便它检查我是否单击了矩形？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T01:37:09.197

首先，考虑您是否真的要覆盖`mouseDown:`或者覆盖是否`mouseUp:`是更好的选择。如果此单击类似于单击按钮，通常最好覆盖`mouseUp:`而不是`mouseDown:`，因为`mouseUp:`这将允许用户通过在放开鼠标之前将鼠标拖出按钮的矩形来“改变主意”。

`NSEvent`'s`locationInWindow`给出事件在基本窗口坐标中的位置。要将该位置转换为视图的本地坐标系，可以使用`NSView`' [convertPoint:fromView:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/convertPoint%3afromView%3a)如下所示：

```
- (void)mouseDown:(NSEvent *)event {
  NSPoint eventLocation = [event locationInWindow];
  NSPoint location = [self convertPoint:eventLocation fromView:nil];
  // handle the logic of what to do given the point
} 
```

有关更多信息，请参阅[Cocoa 事件处理指南：获取事件的位置](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/EventOverview/EventHandlingBasics/EventHandlingBasics.html#//apple_ref/doc/uid/10000060i-CH5-SW15)。

# iphone - 基于客户端-服务器的 iPhone 应用程序中的通信安全

> ID：10059682
> 
> 赞同：1
> 
> 时间：2012-04-08T01:20:15.337
> 
> 标签：iphone, objective-c, ios, cocoa-touch, encryption

我想保护我的 iPhone 客户端和服务器之间的通信。作为第一步，我希望我的服务器只响应授权的客户端。因此，即使有人入侵了通信通道，他也不应该能够创建一个请求，从而使他能够从服务器获得正确的响应。

我的问题是，从某种意义上说，如果我使用私钥在目标 C 中使用某种算法加密 iPhone 客户端上的某些安全数据，那么在某种意义上，是否有任何哈希/加密解密算法在 JAVA 和目标 C 之间共享，它可能是适当的在我的基于 JAVA 的服务器上解密，反之亦然。

任何合适的代码示例都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T03:51:14.547

在 iOS 中确保通信机密性的最简单（实际上也是最安全）的方法是使用 HTTPS 与您的后端通信。NSURLConnection 直接支持这一点。开发自己的安全协议是众所周知的软件开发反模式（即**不**应该采用的设计模式）。

从您的问题中不清楚“授权客户端”是指应用程序（即只有“官方”客户端应用程序可以与后端对话）还是用户。后者肯定会得到更好的支持，通过 NSURLConnection 中的身份验证支持。基本上，用户提供他的用户名和密码，并且这个信息在每次请求时被发送到后端。用户的凭据可以缓存在钥匙串中。

可以通过 HTTP 客户端证书对客户端应用程序进行身份验证，但以安全的方式实施可能会很棘手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T04:14:00.343

一种对客户端进行身份验证的低风险方法是使用共享密钥。客户端使用 MD5 或 SHA1 哈希对它的请求进行签名（两者的库都可以在 Java 或 Objective C 中拥有）。服务器以相同的方式对请求进行签名，然后将签名与客户端传递的签名进行比较，从而确认客户端的真实性。如果它们匹配，则服务器信任该请求。

# mysql - 使用左表中的值连接两个表

> ID：10059685
> 
> 赞同：0
> 
> 时间：2012-04-08T01:20:49.097
> 
> 标签：mysql, sql, mysql-error-1054

我正在尝试编写一个连接另一个表的查询，但在这种情况下，我需要在我的子查询中使用左表中的一列中的值。这样做时，我收到一条错误消息，指出 mySQL 找不到具有此类名称的列。

首先，这是我的查询，它引用了 2 个表（t1 和 t2）（@category 是从我的程序中插入的参数）：

```
SELECT t1.incID, t1.name, t1.sortBy, SQ.person, SQ.pointsValue
FROM table1 t1
LEFT OUTER JOIN (
    SELECT incID, person, IF( t1.sortBy=0, max(points), min(points) ) pointsValue
    FROM table2
    GROUP BY incID
) SQ ON SQ.incID = t1.incID
WHERE t1.category=@category
ORDER BY t1.name ASC
LIMIT 0 , 30 
```

现在，当我执行此查询时，返回的错误如下：#1054 - 'field list' 中的未知列 't1.sortBy'

如果我将 t1.sortBy=0 替换为 0=0，则查询执行得很好，所以看起来我似乎对 mySQL 如何执行其操作顺序感到困惑？

有人可以澄清一下mySQL如何对这样的查询进行操作顺序以及我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T01:24:48.323

您不能在派生表中引用外部表。您需要将 IF 逻辑向外移动：

```
SELECT t1.incID, t1.name, t1.sortBy, SQ.person, 
       IF( t1.sortBy=0, maxPoints, minPoints) pointsValue
FROM table1 t1
LEFT OUTER JOIN (
    SELECT incID, person, max(points) maxPoints, min(points) minPoints
    FROM table2
    GROUP BY incID
) SQ ON SQ.incID = t1.incID
WHERE t1.category=@category
ORDER BY t1.name ASC
LIMIT 0 , 30 
```

# spring-mvc - 关于 Java EE 的框架和层，

> ID：10059687
> 
> 赞同：1
> 
> 时间：2012-04-08T01:21:36.010
> 
> 标签：spring-mvc

当我阅读一些 Java EE Projects 时，我发现这些项目的结构，框架很复杂，可能没有必要，不是吗？

用户控制器 1 个文件

UserService,UserServiceImpl 2 个文件

UserDao,UserDaoImpl 2 个文件

我的工作很简单，只是 CRUD，当我更改某些内容时，我必须编辑，除非 4 个文件，效率低下，不是吗？这些图层设置会改变性能吗？

Usercontroller - UserService 扩展 BaseService - BaseDao 做这些更简单更有效，还是更高效？</p>

如果你有 2 份工作，互联网 web 项目和企业错误

你能告诉我你对层结构的看法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T10:40:33.253

没有什么可以阻止您直接在控制器中查询数据库。然而有一天你会意识到：

*   您想与 Web 服务共享您的业务逻辑。突然你意识到所有的业务逻辑都在你的控制器中。您必须将其提取到单独的类中（称为**服务层**）并重用来自控制器和 Web 服务的代码

*   前几天有人决定从[mysql](/questions/tagged/mysql "显示标记为“mysql”的问题")切换到[oracle](/questions/tagged/oracle "显示标记为“oracle”的问题")。突然间，您会发现到处都是原生数据库 SQL 查询（不再在控制器中，而是在服务中）。为了可维护性，您决定将所有与数据库相关的代码移动到单独的类（称为**持久层**或**DAO 层**）

*   再次迁移到 Oracle 数据库后，您被要求切换到[mongodb](/questions/tagged/mongodb "显示标记为“mongodb”的问题")。但是不是重写现有的，而是`UserDao`将其更改为接口，保留原始实现`OracleUserDao`并创建第二个实现，称为`MongoDbUserDao`

*   在单元测试期间，您发现模拟服务类很麻烦。此外，在一个类中很难看到业务方法，因此您可以使用定义良好的 API 提取服务接口

你猜怎么着，没有人强迫你遵循**3 层架构**——但它在开发过程中自然而然地出现了。您可以等待它，也可以从第一天开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T01:49:21.040

取出与您的层实现紧密耦合的接口，一旦您想模拟某些东西并在测试中使用该模拟，这将是一个问题。你有测试套件，不是吗？

除此之外，编程与接口可让您随时更改实现。因此，在不更改其他层的代码的情况下，您可以例如连接到远程服务层而不是本地服务层。

# java - 如何在 ActiveObjects 中将两个 OneToMany 关系写入同一个表

> ID：10059688
> 
> 赞同：3
> 
> 时间：2012-04-08T01:22:23.387
> 
> 标签：java, mysql, one-to-many, active-objects

如何在 ActiveObjects 中为同一个表编写两个 OneToMany 关系？为什么这个测试用例失败了？

简单的消息实体。

```
import net.java.ao.Entity;

public interface Message extends Entity{
    public void setSender(Communicator sender);
    public void setAcceptor(Communicator acceptor);
} 
```

简单的沟通者（人或服务器）。

```
import net.java.ao.Entity;
import net.java.ao.OneToMany;

public interface Communicator extends Entity {
    @OneToMany
    public Message[] getSendMessages();

    @OneToMany
    public Message[] getAcceptMessages();

} 
```

测试用例。

1.连接到localhost的mysql。

2.创建表模式。

3.创建sender和acceptor两个通信器。

4.创建10条消息作为setSender(sender)和setAcceptor(acceptor)。

5.检查发件人接受的消息数量。它应该为零。

6.但junit说它是10，但不是零。

```
import java.sql.SQLException;

import junit.framework.TestCase;
import net.java.ao.EntityManager;

public class AOTest2 extends TestCase{
    public void test() {
        String db_host = "localhost";
        String db_database = "test";
        String db_login = "root";
        String db_password = "";

        EntityManager m = new EntityManager("jdbc:mysql://" + db_host + "/" + db_database, db_login, db_password);

        try {
            m.migrate(Communicator.class, Message.class);
        } catch (SQLException e1) {
            e1.printStackTrace();
        }

        try {
            Communicator sender = m.create(Communicator.class);
            Communicator acceptor = m.create(Communicator.class);
            sender.save();
            acceptor.save();
            for (int i = 0; i < 10; i++) {
                Message mes = m.create(Message.class);
                mes.setAcceptor(acceptor);
                mes.setSender(sender);
                mes.save();
            }

            assertEquals(true, sender.getAcceptMessages().length == 0);
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T08:21:29.610

可能有点晚了，但为了区分这两个关系，您需要为 OneToMany 指定“反向”属性

```
@OneToMany(reverse = "methodDefiningTheRelationAtOtherClass") 
```

注意：仅从 0.22.1 开始支持

另见：[https ://developer.atlassian.com/display/DOCS/OneToMany+Relationship](https://developer.atlassian.com/display/DOCS/OneToMany+Relationship)

> ...“将此设置为远程接口上相应 getter 的名称。如果不设置这些属性，活动对象将恢复为按类型推断方法。”

因此，如果 AO 按类型推断，它将采用它可以解析的第一个关系 - 对于同一个表的所有 OneToMany 注释，这将始终是相同的。

# python - EasyGUI 中的相同文本框

> ID：10059689
> 
> 赞同：-1
> 
> 时间：2012-04-08T01:22:41.940
> 
> 标签：python, list, textbox, lines, easygui

我希望将列表中的每个项目打印在 EasyGUI 的同一文本框中的不同行上。我如何为此编码？

编辑：对不起，我有点含糊。让我进一步解释一下。我有一个名为组合的列表。它有 50-100 个条目。当我尝试在这样的文本框中输出它时：

```
eg.textbox(combinations) 
```

它以一种段落格式打印出来。像这样：

项目，项目，项目，项目，项目，项目等。

我想打印它更像一个列表，每行一个项目，如下所示：

物品，

物品，

物品，

物品，

我如何为此编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:29:11.737

我认为您的问题可能是您的清单太深了。根据文档，文本框将字符串或字符串列表作为输入。您正在向它传递一个字符串列表列表。如果您将数据展平，它可能会起作用。

尝试这个：

```
>>>l = [[["Ww"],["Aa"],["Bb"],["Cc"]]]
>>>
>>> def flatten(sList,eList = None):
...     if not eList: eList = []
...     for item in sList:
...             if type(item) == list:
...                     eList = flatten(item, eList)
...             else:
...                     eList.append(item)
...     return eList
... 
>>> flatten(l)
['Ww', 'Aa', 'Bb', 'Cc']
>>> 
```

**更新**

我下载了 EasyGUI 并确认这实际上是您的问题。您现在需要做的就是在扁平列表中的每个项目上添加一个换行符。

```
>>>flat_list = ['Ww', 'Aa', 'Bb', 'Cc']
>>>with_newlines = '\n'.join(flat_list)
>>>with_newlines
'Ww\nAa\nBb\nCc\n'
>>>eg.textbox(with_newlines) 
```

# database - 简单的 PROLOG 问题：如何针对 Prolog 数据库测试多个查询？

> ID：10059701
> 
> 赞同：6
> 
> 时间：2012-04-08T01:26:02.207
> 
> 标签：database, prolog, gnu-prolog

我有一个用于插入所有数据的 Prolog 数据库文件 (test_inserts.p)。

我还有一个 Prolog 查询文件 (test_queries.pl)，其中包含我编写的所有 Prolog 查询，以便从我的数据库中接收特定信息。

我想知道在使用 gprolog 时如何对我的 test_inserts.p 数据库文件实际使用 test_queries.pl 查询**？**我希望有一种方法可以同时加载两者，并且能够以某种方式命令运行哪个查询，而不必重新键入我想要运行的每个查询......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T08:04:13.857

我使用`initialization/1`了 ISO 指令`test_queries.pl`来获得你在底部看到的效果。

test_queries.pl

```
test :-
        findall(_, (a(X,Y), format('~w ~w~n', [X,Y])), _).

:- initialization([test_inserts]).
:- initialization(test). 
```

test_inserts.pl

```
a(X,Y) :- append(X,Y,[1,2,3]). 
```

然后调用 gprolog`--consult-file`

```
gprolog --consult-file test_queries.pl
GNU Prolog 1.4.0
By Daniel Diaz
Copyright (C) 1999-2011 Daniel Diaz
compiling /home/carlo/test_queries.pl for byte code...
/home/carlo/test_queries.pl compiled, 5 lines read - 659 bytes written, 28 ms
compiling /home/carlo/test_inserts.pl for byte code...
/home/carlo/test_inserts.pl compiled, 2 lines read - 379 bytes written, 30 ms
[] [1,2,3]
[1] [2,3]
[1,2] [3]
[1,2,3] []
| ?- 
```

# ruby-on-rails - 回形针给出错误，可能是由于路径变量错误？

> ID：10059702
> 
> 赞同：0
> 
> 时间：2012-04-08T01:26:07.870
> 
> 标签：ruby-on-rails, paperclip

我正在使用带有 Rails 3 的回形针。尝试上传图像。我看过其他一些问题，但似乎无法解决。

我在尝试保存模型时收到此错误：

```
Photo C:/Users/Benjamin/AppData/Local/Temp/ben_2.png20120408-3864-l1w6rb is not        recognized by the 'identify' command.
Photo C:/Users/Benjamin/AppData/Local/Temp/ben_2.png20120408-3864-l1w6rb is not recognized by the 'identify' command. 
```

在我的 development.rb 我有

```
Paperclip.options[:command_path] = "/c/Program Files/ImageMagick-6.7.6-Q16/convert" 
```

运行 which convert 给了我：

```
$ which convert
/c/Windows/system32/convert 
```

运行 which identify 给了我：

```
$ which identify
//empty line 
```

我的路径是这样的：

C:\Program Files\ImageMagick-6.7.6-Q16;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C :\Program Files\Smart Projects\IsoBuster;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\ MiKTeX 2.9\miktex\bin\

对我做错了什么有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:53:52.280

通过重新安装 imagemagick 解决。

# expressionengine - 表达式引擎 - 我在哪里安装 EE2 倒计时插件？

> ID：10059704
> 
> 赞同：0
> 
> 时间：2012-04-08T01:26:31.160
> 
> 标签：expressionengine

免责声明：我已尝试就此插件与开发人员联系，但一直保持沉默。

我正在尝试使用[EE2 Countdown 插件](http://devot-ee.com/add-ons/ee2-countdown)，但是没有关于如何安装此插件的说明。我尝试了将其上传到系统/第三方/的正常方式，但它没有显示出来。我也尝试将它放在插件文件夹中 - 那里也没有运气。

任何有关将其放置在何处的指导将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:39:30.647

pi.countdown.php文件需要位于名为 countdown 的文件**夹****中**。

# javascript - 原型混淆：父原型属性受子原型影响

> ID：10059713
> 
> 赞同：2
> 
> 时间：2012-04-08T01:27:54.153
> 
> 标签：javascript, oop, prototype

我正在阅读一本关于 OOP javascript 的书，但遇到了其中一个示例。

在示例代码的第一个版本中，创建了`Shape`构造函数的新实例并`toString`调用了该方法。该`toString`方法返回原型的属性“三角形” `name`，`Triangle`即使“形状”应该是原型的`name`属性`Shape`。

在示例代码的第二个版本中，该`toString`方法按预期返回“Shape”。我想知道代码的第二个版本中的更改有何不同，因为在示例代码的两个版本中，`Triangle`原型都包含对原型的引用，因此`Shape`原型的`name`属性`Shape`仍将更新为“三角形“ 因为`Triangle.prototype.name = "Triangle";`

第一个版本：[jsfiddle](http://jsfiddle.net/xg9mS/)

第二个版本：[jsfiddle](http://jsfiddle.net/f6H8U/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T02:58:06.877

在第二个示例中，当您分配时，创建`Triangle.prototype = new F();`了一个新实例，`F function`并且它继承了原型，`Shape`这意味着任何更改`Triangle.prototype`都将反映在该对象实例中，但不会反映在 中`F's constructor`，因为对象实例无法更改它的构造函数，但如果您更改`constructor's prototype/Shape.prototype`然后由该构造函数创建的任何对象也将被反映。但如果你被分配`Triangle.prototype = F.prototype`，它可能会有所不同。

我在[**这里**](http://jsfiddle.net/f6H8U/1/)做了一些改变。希望它可以帮助您理解，请参阅控制台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T01:41:17.113

在第二个例子中，Triangle.prototype 获得了一个新的引用——new F()。因此，与第一个示例不同，Triangle.prototype 实际上是与 Shape.prototype 不同的引用。

# php - php撇号和引号

> ID：10059717
> 
> 赞同：0
> 
> 时间：2012-04-08T01:28:39.380
> 
> 标签：php

```
echo "<tr><td><input type = 'button' value = 'Agregar' onclick = 'addrow($leaguesarray[$numofleagues])' /></td></tr></table><br />\n"; 
```

我有上面的 php 代码，它无法调用 addrow 函数我很确定它是因为我的 quutoes。

```
echo "<tr><td><input type = 'button' value = 'Agregar' onclick = 'addrow('5a7')' /></td></tr></table><br />\n"; 
```

这也给了我错误，我不明白发生了什么请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T01:31:20.923

转义该函数调用中的单引号：

```
echo '<tr><td><input type = "button" value = "Agregar" onclick = "addrow(\'5a7\')" /></td></tr></table><br />\n'; 
```

使用 PHP 变量：

```
echo '<tr><td><input type = "button" value = "Agregar" onclick = "addrow(\'' . $leaguesarray[$numofleagues] . '\')" /></td></tr></table><br />\n'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T01:35:25.720

只需使用

```
echo "<tr><td><input type = \"button\" value = \"Agregar\" onclick = \"addrow('$leaguesarray[$numofleagues]')\" /></td></tr></table><br />\n"; 
```

# jquery - 链接到 ajax div

> ID：10059719
> 
> 赞同：0
> 
> 时间：2012-04-08T01:28:49.223
> 
> 标签：jquery, html, css, ajax

好的，希望我能有效地解释这一点，所以就到这里。

我有一个无序列表，其中每个列表项通过我的“服务”页面上的 jquery 将 html 页面加载到 div 中。

基本上在首页我有几个链接，当单击一个时，我需要它转到“服务”并在 div 中查看相应的 html 页面。

代码是这样的：

服务页面：

```
<ul id="service-nav">

            <li><a id="interlocking" href="#">Interlocking</a></li>
            <li><a id="pool-backfill" href="#">Pool Backfill</a></li>
            <li><a id="poured-concrete" href="#">Poured Concrete</a></li>
            <li><a id="parging" href="#">Parging</a></li>
            <li><a id="custom-land" href="#">Custom Landscaping</a></li>
            <li><a id="snow-rem" href="#">Snow Removal</a></li>
            <li><a id="excavation" href="#">Excavation</a></li></ul>
      </ul>

    <div id="right-area"> <!-- This is where we load the relevant html's -->
    </div> 
```

首页：

```
 <ul>
            <li><a href="services.php?token=interlocking">Interlocking</a></li>
            <li><a href="services.php?token=pool-backfill">Pool Backfill</a></li>
            <li><a href="services.php?token=poured-concrete">Poured Concrete</a></li>
        </ul> 
```

这是我的 jQuery 供您参考：

```
<script type="text/javascript">
$(document).ready(function() {

    $(function(){ 
        var token = window.location.toString().split("=")[1]; 

        $("#" + token).click(); 

        });​

    $('#interlocking').click(function() {
        $('#right-area').load('http://romanstonedesigns.com/new/services/interlocking.php', function() {
        });
    });

    $('#pool-backfill').click(function() {
        $('#right-area').load('http://romanstonedesigns.com/new/services/pool-backfill.php', function() {
        });
    });

    $('#poured-concrete').click(function() {
        $('#right-area').load('http://romanstonedesigns.com/new/services/poured-concrete.php', function() {
        });
    });

    $('#parging').click(function() {
        $('#right-area').load('http://romanstonedesigns.com/new/services/parging.php', function() {
        });
    });

    $('#custom-land').click(function() {
        $('#right-area').load('http://romanstonedesigns.com/new/services/custom-landscaping.php', function() {
        });
    });

    $('#excavation').click(function() {
        $('#right-area').load('http://romanstonedesigns.com/new/services/excavation.php', function() {
        });
    });

    $('#snow-rem').click(function() {
        $('#right-area').load('http://romanstonedesigns.com/new/services/snow-removal.php', function() {
        });
    });

});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T01:46:21.690

好的，假设我们要显示联锁页面，那么您的首页应该是这样的：

1.

```
<ul>
        <li><a href="services.php?token=Interlocking">Interlocking</a></li>
    </ul> 
```

2.在您的服务页面中，jquery代码应该是：

```
 <script type="text/javascript">

$(function(){ 

    $('#interlocking').click(function() {
    $('#right-area').load('http://romanstonedesigns.com/new/services/interlocking.php', function() {
    });
});

$('#pool-backfill').click(function() {
    $('#right-area').load('http://romanstonedesigns.com/new/services/pool-backfill.php', function() {
    });
});

$('#poured-concrete').click(function() {
    $('#right-area').load('http://romanstonedesigns.com/new/services/poured-concrete.php', function() {
    });
});

$('#parging').click(function() {
    $('#right-area').load('http://romanstonedesigns.com/new/services/parging.php', function() {
    });
});

$('#custom-land').click(function() {
    $('#right-area').load('http://romanstonedesigns.com/new/services/custom-landscaping.php', function() {
    });
});

$('#excavation').click(function() {
    $('#right-area').load('http://romanstonedesigns.com/new/services/excavation.php', function() {
    });
});

$('#snow-rem').click(function() {
    $('#right-area').load('http://romanstonedesigns.com/new/services/snow-removal.php', function() {
    });
});

    var token = window.location.toString().split("=")[1]; 
    $("#" + token).click(); 

    }); 
```

再见！

# c++ - Qt QStateMachine 同步问题：初始状态未在启动信号上设置

> ID：10059721
> 
> 赞同：1
> 
> 时间：2012-04-08T01:29:01.567
> 
> 标签：c++, qt, state-machine, qstatemachine

所以我试图理解 Qt 的 QStateMachine 的一个问题，我希望有人能帮助解释为什么会发生这种情况。我对 QStateMachine 的基本理解非常感兴趣，而不仅仅是修复。

首先考虑具有状态 A、B 和事件 1 的状态机。事件 1 将您从 A 带到 B。A 是初始状态。

具体来说，这是为了维护邻居。在设备 XI 中收到邻居 Y 打招呼的消息。这会导致邻居 X 为这个新邻居 Y 分配一个邻居状态机。这会创建邻居状态机，然后调用 QStateMachine::start( ) ；

现在在这个状态机启动之后，我需要继续处理这个 hello 消息。所以起初我在做：

```
QStateMachine::start( ) ;
emit event 1 ; 
```

我的理解是这行不通，因为 start 是一个异步调用，因此状态机在启动完成后才处于初始启动状态。这引出了我的第一个问题。

*1）所以状态机启动被放置在 qapp 事件队列中，但也没有发出异步调用？事件 1 不会在开始后被放入事件队列中，那么这不意味着我们将处于初始状态吗？还是发出不是异步调用？*

认为这是问题，我通过将函数连接到状态机启动信号来稍微更改我的代码。然后，如果状态机未启动，我将代码更改为将事件排队，并在调用启动信号后处理此待处理事件队列（并将它们发送到状态机）。

事实证明，当我开始信号时，初始状态仍未设置。例如 QStateMachine::configuration( ).contains( initialstate ) == false。这引出了我的第二个也是更大的问题。

*2）为什么发出started信号时我不在初始状态。*

这里的事件顺序是：

1.  创建状态机
2.  设置初始状态
3.  启动状态机
4.  接收事件 1
5.  由于未启动队列事件 1
6.  已接收开始信号
7.  处理事件 1
8.  由于是未知状态什么都不做
9.  接收事件 1
10.  处理事件 1
11.  现在处于状态 A。转换到状态 B。

顺序应该是：

1.  创建状态机
2.  设置初始状态
3.  启动状态机
4.  接收事件 1
5.  由于未启动队列事件 1
6.  已接收开始信号
7.  处理事件 1
8.  现在是状态 A。转换到状态 B。
9.  接收事件 1
10.  处理事件 1
11.  现在是状态 B。什么也不做。

或者更好的活动我希望我不必排队参加活动。我希望我能做到这一点：

1.  创建状态机
2.  设置初始状态
3.  启动状态机
4.  接收事件 1
5.  处理事件 1
6.  现在是状态 A。转换到状态 B。
7.  接收事件 1
8.  处理事件 1
9.  现在是状态 B。什么也不做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T02:16:03.353

转换信号仅在状态更改后（在 中`QStateMachinePrivate::registerSignalTransition`）才连接，并且连接不是排队连接：

```
bool ok = QMetaObject::connect(sender, signalIndex, signalEventGenerator,
                                   signalEventGenerator->metaObject()->methodOffset()); 
```

对于要接收的“事件 1”，机器必须已经处于对该信号作出反应的状态。即使它是一个排队的连接，插槽也会排队，但只有在收到信号之后才会排队，因为那时还没有连接。

为了解决您的问题，您可以在发出信号之前等待机器处于“状态A”：

```
machine->start();
qApp->processEvents();
emit event1(); 
```

或者您可以延迟信号发射并在其他已经排队的操作之后将其排队：

```
machine->start();
QTimer::singleShot(0, emitter, SIGNAL(event1()));
// or
QMetaObject::invokeMethod(emitter, "event1", Qt::QueuedConnection); 
```

在`started`设置初始状态之前发出信号（根据源代码），如果您在设置任何状态之前要进行初始化，这将很有帮助。如果需要等待初始状态，可以使用信号`QState::entered`。

# java - PyCharm 并与 Java 集成

> ID：10059722
> 
> 赞同：10
> 
> 时间：2012-04-08T01:29:20.050
> 
> 标签：java, import, jython, pycharm

这个问题可能很荒谬，因为我对 python 的经验很少。
但是这些天必须解决这个问题。

问题是 IDE 无法解析对`java.*`我自己的库中的包和其他人的任何引用。

我确实在 interpeter 中添加了一些到必要库的路径，但没有任何改变。

我做错了什么还是需要任何第三方插件？

我使用 PyCharm 2.5b 和 Jython 2.5.3 作为解释器。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-08T10:33:23.263

PyCharm Java 支持[非常有限](http://blog.jetbrains.com/pycharm/2012/01/the-story-behind-jython-support-in-pycharm/)，它现在无法解析 jar 和理解 Java 导入。

如果您想同时使用 Java 和 Python 进行开发，请考虑使用带有 Python 插件的 IntelliJ IDEA Ultimate。

添加`jre/lib/rt.jar`到 Jython 类路径将得到解析的导入和可用的代码完成：

![rt.jar](../Images/29d7c2d230e75b7a105dac177f20830a.png)

![完成](../Images/59023da9ef7b28b3138519cfabccb5ed.png)

请注意，由于[已知错误](http://youtrack.jetbrains.com/issue/PY-4269)，您需要禁用**Trying to call a non-callable object**检查。

# ruby-on-rails - 轨道：骨干轨道宝石-

> ID：10059724
> 
> 赞同：3
> 
> 时间：2012-04-08T01:29:48.943
> 
> 标签：ruby-on-rails, backbone.js

尝试按照 Ryan Bates Backbone.js 教程构建抽奖应用程序，但我已经遇到了第一段代码的问题。在 application.js 的 init 函数中，他初始化了应该触发警报“主页”的 Raffler 路由的新实例，但我在 Firebug 中收到以下错误，我不明白

```
entries.js:5Uncaught ReferenceError: Raffler is not defined
entry.js:15Uncaught ReferenceError: Backbone is not defined
entries.js:23Uncaught ReferenceError: Backbone is not defined
index.js:17Uncaught ReferenceError: Backbone is not defined
application.js:7Uncaught SyntaxError: Invalid regular expression: missing /
raffler.js:9Uncaught TypeError: undefined is not a function 
```

有什么想法可以解决这个问题吗？

**javascripts/raffler/application.js**

```
window.Raffler =
  Models: {}
  Collections: {}
  Views: {}
  Routers: {}
  init: -> 
    new Raffler.Routers.Entries()
    Backbone.history.start()

$(document).ready ->
  Raffler.init() 
```

**路由器/条目.js**

```
class Raffler.Routers.Entries extends Backbone.Router
  routes:
    '': 'index'

  index: ->
    alert "home page" 
```

更新

在我运行生成器`//= require_tree .`之后，紧接着 require jquery_ujs，我发现（我认为）是导致一些问题的原因。但是，我现在已将其移至底部，但仍然出现此错误

```
Raffler.Routers.Entries is not a constructor
[Break On This Error]   

new Raffler.Routers.Entries(); 
```

应用程序.js

```
 //= require jquery
    //= require jquery_ujs
    //= require underscore
    //= require backbone
    //
    //= require .//raffler
    //
    //= require_tree ../templates/
    //= require_tree .//models
    //= require_tree .//collections
    //= require_tree .//views
    //= require_tree .//routers
    //= require_tree . 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T10:50:16.023

我有同样的问题。对我来说，解决方案是删除线

`//= require_tree .`

来自`application.js`文件，因为这一行在下划线和主干js 行之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T03:38:34.140

我找到了其他有同样问题的人，然后让它工作。我将他的代码（与我的完全一样）复制到我的文件中，现在我的工作了。不知道为什么

```
window.Raffler =
  Models: {}
  Collections: {}
  Views: {}
  Routers: {}
  init: ->
    new Raffler.Routers.Entries()
    Backbone.history.start()

$(document).ready ->
  Raffler.init() 
```

# jquery - 有没有人为 jquery 完整日历构建了一个经常性事件 UI？

> ID：10059728
> 
> 赞同：25
> 
> 时间：2012-04-08T01:31:30.360
> 
> 标签：jquery, fullcalendar

我看到[jquery 完整日历](http://arshaw.com/fullcalendar/)通过让多个事件具有相同的 Id 来支持重复事件，但我很惊讶没有任何 UI 组件与之配套。是否有人为此构建了任何 UI 组件。（类似于outlook UI）

我试图避免从头开始构建，因为它看起来像是一个通用组件。我的后端是 asp.net-mvc 但我想这并不重要

它看起来像这样：

![在此处输入图像描述](../Images/b60ad71b7762a8e083f405e32ca0247f.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T06:56:08.770

我推荐这个插件 - 它对我很有帮助。

[https://github.com/collective/jquery。**循环**输入.js](https://github.com/collective/jquery.recurrenceinput.js)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T18:11:32.287

检查这个

[http://sourceforge.net/projects/jqeventcalendar/](http://sourceforge.net/projects/jqeventcalendar/)

wdCalendar 是一个 javascript 事件日历，类似于 google 日历

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T11:32:31.113

为什么不将它与 Google 日历一起用作前端呢？

# xml - R 中的数据混搭：“下标越界”

> ID：10059730
> 
> 赞同：4
> 
> 时间：2012-04-08T01:32:07.013
> 
> 标签：xml, r, http, yahoo

我正在使用“R 中的数据混搭”学习 R，但我无法在 p 上获得示例。5上班。我使用的代码是这样的：

```
# Install and load RCurl
install.packages("RCurl")
library("RCurl")

# Install and load the XML package
install.packages("XML")
library("XML")

# Download file and parse it
appid<-    'ucVVQzLV34GQR4ppLwbdW6G8cCSZDoCBqAc53NXsWB3gXkmP1I4epLwMxboV.PfADi_2ubr2A7Cg8FO4Z3xVxxujza2FJ    8M-' 
street<-"11408 Bellflower Road" 
RCurl<-paste( 
"http://local.yahooapis.com/MapsService/V1/geocode?appid=", 
appid, 
"&street=",
URLencode(street), 
"&city=Cleveland&state=OH" 
,sep="") 
#xmlResult<-xmlTreeParse(requestUrl,isURL=TRUE) 
xmlResult<-xmlTreeParse(getURL(RCurl))

#Print the output
str(xmlResult) 
```

但是当我这样做时，我没有得到以下结果：

```
List of 2
 $ doc:List of 3
  ..$ file    :List of 2
  .. ..$ text   : Named list()
  .. .. ..- attr(*, "class")= chr [1:5] "XMLTextNode" "XMLNode" "RXMLAbstractNode"     "XMLAbstractNode" ...
  .. ..$ Message:List of 1
  .. .. ..$ text: Named list()
  .. .. .. ..- attr(*, "class")= chr [1:5] "XMLTextNode" "XMLNode" "RXMLAbstractNode"    "XMLAbstractNode" ...
  .. .. ..- attr(*, "class")= chr [1:4] "XMLNode" "RXMLAbstractNode" "XMLAbstractNode"   "oldClass"
  .. ..- attr(*, "class")= chr [1:4] "XMLNode" "RXMLAbstractNode" "XMLAbstractNode"   "oldClass"
  ..$ version : Named list()
  .. ..- attr(*, "class")= chr [1:5] "XMLCommentNode" "XMLNode" "RXMLAbstractNode"   "XMLAbstractNode" ...
  ..$ children:
Error in x$children[[...]] : subscript out of bounds 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T03:23:32.013

该 API 已被弃用。[这是当前的](http://developer.yahoo.com/geo/placefinder/)。试试这个：

```
library("RCurl")
library("XML")
appid      <- 'ucVVQzLV34GQR4ppLwbdW6G8cCSZDoCBqAc53NXsWB3gXkmP1I4epLwMxboV.PfADi_2ubr2A7Cg8FO4Z3xVxxujza2FJ    8M-' 
address    <- paste("11408+Bellflower+Road", "Cleveland", "OH", sep=",+")
urlRequest <- paste("http://where.yahooapis.com/geocode?q=", 
                    address, appid=appid, sep = "")
doc <- xmlToList(xmlTreeParse(urlRequest)) # Convert to List
str(doc) 
```

它对我有用。不过，您可能想检查它是否获得了正确的地址。没有邮政编码吗？您可能还想查看[Google 的 Geocoding API](https://developers.google.com/maps/documentation/geocoding/)。它不再需要烦人的钥匙。

```
List of 7
 $ Error       : chr "0"
 $ ErrorMessage: chr "No error"
 $ Locale      : chr "us_US"
 $ Quality     : chr "87"
 $ Found       : chr "1"
 $ Result      :List of 29
  ..$ quality     : chr "87"
  ..$ latitude    : chr "41.511326"
  ..$ longitude   : chr "-81.605583"
  ..$ offsetlat   : chr "41.511230"
  ..$ offsetlon   : chr "-81.605453"
  ..$ radius      : chr "2900"
  ..$ name        : NULL
  ..$ line1       : chr "11408 Bellflower Rd"
  ..$ line2       : chr "Cleveland, OH  44106"
  ..$ line3       : NULL
  ..$ line4       : chr "United States"
  ..$ house       : chr "11408"
  ..$ street      : chr "Bellflower Rd"
  ..$ xstreet     : NULL
  ..$ unittype    : NULL
  ..$ unit        : NULL
  ..$ postal      : chr "44106"
  ..$ neighborhood: NULL
  ..$ city        : chr "Cleveland"
  ..$ county      : chr "Cuyahoga County"
  ..$ state       : chr "Ohio"
  ..$ country     : chr "United States"
  ..$ countrycode : chr "US"
  ..$ statecode   : chr "OH"
  ..$ countycode  : NULL
  ..$ uzip        : chr "44106"
  ..$ hash        : chr "BFBDCAB96C2CB175"
  ..$ woeid       : chr "12776632"
  ..$ woetype     : chr "11"
 $ .attrs      : Named chr "1.0"
  ..- attr(*, "names")= chr "version" 
```

# android - 升级安卓项目

> ID：10059732
> 
> 赞同：0
> 
> 时间：2012-04-08T01:32:41.190
> 
> 标签：android, eclipse, project, adt

每个新版本的 Android 开发者工具都会带来新的项目设置。有没有办法通过 eclipse 或命令行将旧项目升级到新格式？

我一直在通过创建一个新项目并比较项目文件来手动完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:12:15.167

从命令行，您可以使用：

```
android update project -p [project path] -n [project name] 
```

有关详细信息，请参阅[更新项目](http://developer.android.com/guide/developing/projects/projects-cmdline.html#UpdatingAProject)。

# subclass - 全局变量扩展应用类

> ID：10059733
> 
> 赞同：0
> 
> 时间：2012-04-08T01:32:53.097
> 
> 标签：subclass, global, extends, android

所以我正在尝试扩展基`Application`类并添加成员变量来创建全局变量，就像下面链接的第一个解决方案一样。

[安卓全局变量](https://stackoverflow.com/questions/1944656/android-global-variable)

如果成员变量是简单的数据类型，如 a`String`或 a ，则此方法有效`Boolean`。但是对于更复杂的数据类型，你会怎么做呢？在我的情况下，我希望成员变量是 type `HashMap<String, Boolean>`。

我在`onActivityResult()`（一个布尔值、一个`String`和一个`HashMap<String, Boolean>`）中设置了三个成员变量，并且我试图在`onClick()`一个按钮的方法中访问这些成员变量`onClickListener`。当我访问字符串和布尔变量时，它们的值被适当地设置。但是，当我访问该`HashMap<String, Boolean>`变量时，它的值设置为“{}”，一个空的`HashMap`. `Serialization`复杂的数据类型是否需要发生某种情况？

我还添加了一个`ArrayList<Boolean>`作为成员变量，当我在`onclick()`方法中访问这个变量时，它被正确设置。可能 HashMaps 必须以不同的方式设置。我不太确定这一点。

在下面的代码中，我只是展示了一个仅包含`HashMap`成员变量的精简版本。

这是我的子类`Application`

```
public class MyApp extends Application {
  private HashMap<String, Boolean> selectedContacts = null;

  public HashMap<String, Boolean> getSelectedContacts() {
    return this.selectedContacts;
  }

  public void setSelectedContacts(HashMap<String, Boolean> sc) {
    this.selectedContacts = sc;
  }
} 
```

以下是我的 Messenger`onActivityResult()`中的方法。在中，我设置了 MyApp 类的私有成员变量。在方法中，我调用访问器方法。`onClick()``Activity``onActivityResult()``onClick()`

```
public void onActivityResult(int reqCode, int resultCode, Intent data) {
  super.onActivityResult(reqCode, resultCode, data);

  switch (reqCode) {
    case R.integer.contact_manager:

      if (resultCode == RESULT_CANCELED)
        Log.d(getString(R.string.debug_tag), "FAILURE");
      if (resultCode == RESULT_OK) {
        Log.d(getString(R.string.debug_tag), "SUCCESS");

        MyApp appState = ((MyApp)getApplication());

        appState.setSelectedContacts((HashMap<String, Boolean>) data.getSerializableExtra("selectedContacts")); 
      }

      break;
   } 
}  

add_contact_button.setOnClickListener(new OnClickListener() {
  public void onClick(View v) {

    Intent i = new Intent(Messenger.this, ContactManager.class);

    MyApp appState = ((MyApp)getApplication());
    HashMap<String, Boolean> sc = appState.getSelectedContacts();   

    if (sc != null) {
      int totalContacts = sc.size();
      if(totalContacts > 0) {
        Bundle bundle = new Bundle();
        bundle.putSerializable("selectedContacts",sc); 
        i.putExtras(bundle);
      } 
    }
    startActivityForResult(i, R.integer.contact_manager);

  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:02:25.040

所以我解决了这个问题。在该`onActivityResult()`方法中，我正在迭代`HashMap`类似的内容：

```
Iterator<Entry<String, Boolean>> it = sc.entrySet().iterator();
while (it.hasNext()) {
  HashMap.Entry pairs = (HashMap.Entry) it.next();
  String contactId = pairs.getKey().toString();
  boolean selected = (Boolean) pairs.getValue();
  if (selected) {
    selectedContactsText += getName(contactId) + ", ";
    Log.d("Messenger", getName(contactId) + " was selected");
    Log.d("Messenger", selectedContactsText + " is the text");
  }
  it.remove(); // avoids a ConcurrentModificationException
} 
```

但是我注意到 while 循环的最后一条语句实际上是从`HashMap`. 所以我评论了这条线，所有的作品都按预期工作。

# colors - QOMX_COLOR_FormatYUV420PackedSemiPlanar64x32Tile2m8ka 颜色格式

> ID：10059738
> 
> 赞同：5
> 
> 时间：2012-04-08T01:33:56.043
> 
> 标签：colors, yuv

全部

有人知道 **QOMX_COLOR_FormatYUV420PackedSemiPlanar64x32Tile2m8ka**格式的详细信息，它是 qcom 7x30 h/w 解码器的输出格式，数据如何以这种颜色格式存储？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-01T10:53:02.047

这是我对此的研究，关于**QOMX_COLOR_FormatYUV420PackedSemiPlanar64x32Tile2m8ka 转换为 YUV420Planar (I420)**。至于`QOMX_COLOR_FormatYUV420PackedSemiPlanar64x32Tile2m8ka`格式，可以参考`($your_android_native_sdk_dir)/WORKING_DIRECTORY/hardware/qcom/media/mm-core/inc/QOMX_IVCommonExtensions.h`源码。这个函数可能理想地支持通用分辨率，但是我只测试 CIF 大小，因为给定源输入不可用。当然，您可以将其他尺寸数据伪造为给定的输入。如果您正在处理此问题，希望对您有所帮助。根据我的 CIF 测试，我看到颜色是正确的。代码很长，大约 390 行，很重。包括步骤：构造yTileToMb、uvTileToMb，然后按如下方式转换y和u/v。

```
///////////////////////////////////////////////////////////////////////
/**
* Enumeration defining the extended uncompressed image/video
* formats.
*
* ENUMS:
*  YVU420PackedSemiPlanar       : Buffer containing all Y, and then V and U 
*                                 interleaved.
*  YVU420PackedSemiPlanar32m4ka : YUV planar format, similar to the 
*                                 YVU420PackedSemiPlanar format, but with the
*                                 following restrictions:
*
*                                 1\. The width and height of both plane must 
*                                 be a multiple of 32 texels.
*
*                                 2\. The base address of both planes must be 
*                                 aligned to a 4kB boundary.
* 
*  YUV420PackedSemiPlanar16m2ka : YUV planar format, similar to the
*                                 YUV420PackedSemiPlanar format, but with the
*                                 following restrictions:
*
*                                 1\. The width of the luma plane must be a
*                                 multiple of 16 pixels.
*
*                                 2\. The address of both planes must be 
*                                 aligned to a 2kB boundary.
* 
*  YUV420PackedSemiPlanar64x32Tile2m8ka : YUV planar format, similar to the 
*                                 YUV420PackedSemiPlanar format, but with the
*                                 following restrictions:
*
*                                 1\. The data is laid out in a 4x2 MB tiling 
*                                 memory structure
*
*                                 2\. The width of each plane is a multiple of
*                                 2 4x2 MB tiles.
*
*                                 3\. The height of each plan is a multiple of
*                                 a 4x2 MB tile.
*
*                                 4\. The base address of both planes must be 
*                                 aligned to an 8kB boundary.
*
*                                 5\. The tiles are scanned in the order 
*                                 defined in the MFCV5.1 User's Manual.
*
*                                                                       i.e, CIF size in pysical location
*
*                                                                       Luma order(4x2 MB = 64x32 pix): 54 tiles:
*                                                                       0  1  6  7  8  9
*                                                                       2  3  4  5  10 11
*                                                                       12 13 18 19 20 21
*                                                                       14 15 16 17 22 23
*                                                                       24 25 30 31 32 33
*                                                                       26 27 28 29 34 35
*                                                                       36 37 42 43 44 45
*                                                                       38 39 40 41 46 47
*                                                                       48 49 50 51 52 53
*                                                                       MBs in a y tile:
*                                                                       0  1  2  3
*                                                                       22 23 24 25
*                                                                       Chromas order(64x32 pix):
*                                                                       0  1  6  7  8  9
*                                                                       2  3  4  5  10 11
*                                                                       12 13 18 19 20 21
*                                                                       14 15 16 17 22 23
*                                                                       24 25 26 27 28 29
*                                                                       MBs in a uv tile:
*                                                                       0  1  2  3
*                                                                       22 23 24 25
*                                                                       44 45 46 47
*                                                                       66 67 68 69
*
*/

// YUV420PackedSemiPlanar64x32Tile2m8ka,    // 12 bit, yyyyyyyy vuvu
// YUV420Planar, 12 bit, yyyyyyyy uu vv
#pragma pack(1)
typedef enum {
    Scan_Init       = 0,
    Scan_Hor,
    Scan_VerDown,
    Scan_VerUp
} ScanMode;
typedef struct{
    uint16_t    startMbIndex;
    uint8_t     numMBs;
//  bool        lastTileInHor;
    bool        lastTileInVer;
} MbGroup;
#pragma pack()

#define ALIGN_B(x,a)        (((x)+(a)-1) &(~((a)-1)))
#define MAX_RESOLUTION_X    1920    // 4096
#define MAX_RESOLUTION_Y    1088    // 3072
#define MAX_TILES_NUM       (((MAX_RESOLUTION_X+63)>>6) * ((MAX_RESOLUTION_Y+31)>>5))

int32_t ToI420::YUV420PackedSemiPlanar64x32Tile2m8kaToYUV420Planar( uint8_t* src, uint8_t* dst_y, uint8_t* dst_u, uint8_t* dst_v,
            const int32_t width, const int32_t height,
            const int32_t stride_y, const int32_t stride_u, const int32_t stride_v )
{
    const int32_t srcStrideY    = ALIGN_B( width, 128 );
    const int32_t srcHeightY    = ALIGN_B( height, 32 );
    const int32_t srcStrideUV   = srcStrideY;   // v/u interlaced
    const int32_t srcHeightUV   = ALIGN_B( (height>>1), 32 );
    const int32_t srcSizeY      = ALIGN_B( (srcStrideY * srcHeightY), 8192 );
    const int32_t srcSizeUV     = ALIGN_B( (srcStrideUV * srcHeightUV), 8192 );
    uint8_t* src_y              = src;
    uint8_t* src_uv             = src_y + srcSizeY;

    const int32_t wTiles        = (width+63)>>6;
    const int32_t hTilesY       = (height+31)>>5;
    const int32_t hTilesUV      = (height/2+31)>>5;
    const int32_t numTilesY     = wTiles*hTilesY;
    const int32_t numTilesUV    = wTiles*hTilesUV; 
    const int32_t wMacroblocks  = (width+15)>>4;
    const int32_t hMacroblocks  = (height+15)>>4;
    int32_t numMbInTile         = 4*2;  // y: 4*2; uv: 4*4
    const int32_t mbOffsetTileHor       = 4;
    int32_t mbOffsetTileVer             = (wMacroblocks<<1);    // y: (wMacroblocks<<1); uv: (wMacroblocks<<2)  
    MbGroup yTileToMb[MAX_TILES_NUM]    = {0};  // each Tile index storing according MB index
    MbGroup uvTileToMb[MAX_TILES_NUM]   = {0};  // each Tile index storing according MB index
    assert( numTilesY <= MAX_TILES_NUM && numTilesUV <= MAX_TILES_NUM );
    int32_t availableTilesY             = numTilesY;
    int32_t availableTilesUV            = numTilesUV;
    const int32_t numTilesYPerScanUnit  = (wTiles<<1);
    int32_t tileIndex                   = 0;
    ScanMode preMode                    = Scan_Init;
    ScanMode curMode                    = Scan_Hor;
    int32_t scanedTiles                 = 0;
    int32_t hMbMultiple                 = 0;
    int32_t cntScanTimesInPeriod        = 0;    // maximal scan times is up to 4
    int32_t cnt1stLineTiles             = 0;
    int32_t cnt2ndLineTiles             = 0;
    uint16_t mbPosition                 = 0;
    uint16_t lastMbIdx                  = mbPosition;
    uint16_t firstMbIdxUnit             = mbPosition;
    bool noEnoughMbInTile               = false;    

    // construct yTileToMb table
    while( availableTilesY > 0 ){       
        if ( availableTilesY >= numTilesYPerScanUnit ){         
            preMode                 = Scan_Init;
            curMode                 = Scan_Hor;
            lastMbIdx               = mbPosition;
            firstMbIdxUnit          = mbPosition;
            cntScanTimesInPeriod    = 0;    // maximal scan times is up to 4
            cnt1stLineTiles         = 0;
            cnt2ndLineTiles         = 0;
            noEnoughMbInTile        = false;
            scanedTiles             = 0;

            while ( scanedTiles < numTilesYPerScanUnit ){               
                if ( (tileIndex & 3) == 0 ){
                    firstMbIdxUnit = mbPosition;
                }
                noEnoughMbInTile = false;
                if ( curMode == Scan_Hor ){
                    if ( (preMode == Scan_VerUp && cnt1stLineTiles+1>= wTiles) || 
                         (preMode == Scan_VerDown && cnt2ndLineTiles+1>= wTiles) ){
                             noEnoughMbInTile = (ALIGN_B(width, 16) < srcStrideY);
//                           yTileToMb[tileIndex].lastTileInHor = true;
                    }
                    yTileToMb[tileIndex].startMbIndex   = mbPosition;
                    yTileToMb[tileIndex].numMBs         = noEnoughMbInTile ? ((4-((srcStrideY-ALIGN_B(width,16))>>4))<<1) : numMbInTile;
                    ++ tileIndex;                   
                    ++ cntScanTimesInPeriod;
                    if ( noEnoughMbInTile && cntScanTimesInPeriod  == 1){
                        if ( preMode == Scan_VerDown ){
                            preMode = curMode;  // scan mode change need upate preMode
                            curMode = Scan_VerUp;
                            ++ cnt2ndLineTiles;
                            mbPosition = firstMbIdxUnit - mbOffsetTileVer;
                        }else if ( preMode == Scan_VerUp ){
                            preMode = curMode;  // scan mode change need upate preMode
                            curMode = Scan_VerDown;
                            ++ cnt1stLineTiles;
                            mbPosition = firstMbIdxUnit + mbOffsetTileVer;
                        }
                    }else if ( cntScanTimesInPeriod == 2 ){
                        if ( preMode == Scan_Init || preMode == Scan_VerUp ){
                            preMode = curMode;  // scan mode change need upate preMode
                            curMode = Scan_VerDown;
                            ++ cnt1stLineTiles;
                            mbPosition = firstMbIdxUnit + mbOffsetTileVer;
                        }else if ( preMode == Scan_VerDown ){
                            preMode = curMode;  // scan mode change need upate preMode
                            curMode = Scan_VerUp;
                            ++ cnt2ndLineTiles;
                            mbPosition = firstMbIdxUnit - mbOffsetTileVer;
                        }
                    }else if ( cntScanTimesInPeriod == 4 ){                     
                        if ( preMode == Scan_VerDown ){
                            ++ cnt2ndLineTiles;
                            mbPosition += mbOffsetTileHor;
                        }else if ( preMode == Scan_VerUp ){
                            ++ cnt1stLineTiles;
                            mbPosition += mbOffsetTileHor;
                        }
                    }else{
                        if ( preMode == Scan_Init ){
                            ++ cnt1stLineTiles;
                        }else if ( preMode == Scan_VerDown ){
                            ++ cnt2ndLineTiles;
                        }else if ( preMode == Scan_VerUp ){
                            ++ cnt1stLineTiles;
                        }
                        if ( cnt2ndLineTiles >= wTiles && preMode == Scan_VerDown ){
                            preMode = curMode;  // scan mode change need upate preMode
                            curMode = Scan_VerUp;                           
                            mbPosition = firstMbIdxUnit - mbOffsetTileVer;
                        }else if ( cnt1stLineTiles >= wTiles && preMode == Scan_VerUp ){
                            preMode = curMode;  // scan mode change need upate preMode
                            curMode = Scan_VerDown;                         
                            mbPosition = firstMbIdxUnit + mbOffsetTileVer;
                        }else{
                            mbPosition += mbOffsetTileHor;
                        }
                    }
                }else if ( curMode == Scan_VerUp ){
                    if ( cnt1stLineTiles+1 >= wTiles ){
                        noEnoughMbInTile = (ALIGN_B(width, 16) < srcStrideY);
//                      yTileToMb[tileIndex].lastTileInHor  = true;
                    }
                    yTileToMb[tileIndex].startMbIndex= mbPosition;
                    yTileToMb[tileIndex].numMBs     = noEnoughMbInTile ? ((4-((srcStrideY-ALIGN_B(width,16))>>4))<<1) : numMbInTile;
                    ++ tileIndex;
                    mbPosition += mbOffsetTileHor;
                    ++ cntScanTimesInPeriod;
                    ++ cnt1stLineTiles;
                    preMode = curMode;  // scan mode change need upate preMode
                    curMode = Scan_Hor;
                }else if ( curMode == Scan_VerDown ){
                    if ( cnt2ndLineTiles+1 >= wTiles ){
                        noEnoughMbInTile = (ALIGN_B(width, 16) < srcStrideY);
//                      yTileToMb[tileIndex].lastTileInHor  = true;
                    }
                    yTileToMb[tileIndex].startMbIndex= mbPosition;
                    yTileToMb[tileIndex].numMBs     = noEnoughMbInTile ? ((4-((srcStrideY-ALIGN_B(width,16))>>4))<<1) : numMbInTile;
                    ++ tileIndex;
                    mbPosition += mbOffsetTileHor;
                    ++ cntScanTimesInPeriod;
                    ++ cnt2ndLineTiles;
                    preMode = curMode;  // scan mode change need upate preMode
                    curMode = Scan_Hor;
                }
                cntScanTimesInPeriod &= 0x03;
                ++ scanedTiles;
            }
            mbPosition = lastMbIdx + (mbOffsetTileVer<<1);
            availableTilesY -= numTilesYPerScanUnit;
        }else{
            scanedTiles = 0;
            hMbMultiple = hMacroblocks - (tileIndex/wTiles)*2;
            noEnoughMbInTile = false;
            while ( scanedTiles < wTiles ){
                yTileToMb[tileIndex].startMbIndex = mbPosition;
                yTileToMb[tileIndex].lastTileInVer= true;
                if ( scanedTiles+1 == wTiles ){
                    noEnoughMbInTile = (ALIGN_B(width, 16) < srcStrideY);
//                  yTileToMb[tileIndex].lastTileInHor  = true;
                }
                yTileToMb[tileIndex].numMBs = noEnoughMbInTile ? ((4-((srcStrideY-ALIGN_B(width,16))>>4))*hMbMultiple) : (4*hMbMultiple);
                ++ tileIndex;
                mbPosition += mbOffsetTileHor;
                ++ scanedTiles;
            }
            availableTilesY -= wTiles;
        }
    }

    numMbInTile = 4*4;  
    mbOffsetTileVer = (wMacroblocks<<2);
    mbPosition = 0;
    tileIndex = 0;
    // construct uvTileToMb table
    while( availableTilesUV > 0 ){      
        if ( availableTilesUV >= numTilesYPerScanUnit ){            
            preMode             = Scan_Init;
            curMode             = Scan_Hor;
            lastMbIdx           = mbPosition;
            firstMbIdxUnit      = mbPosition;
            cntScanTimesInPeriod= 0;    // maximal scan times is up to 4
            cnt1stLineTiles     = 0;
            cnt2ndLineTiles     = 0;
            noEnoughMbInTile    = false;
            scanedTiles         = 0;

            while ( scanedTiles < numTilesYPerScanUnit ){               
                if ( (tileIndex & 3) == 0 ){
                    firstMbIdxUnit = mbPosition;
                }
                noEnoughMbInTile = false;
                if ( curMode == Scan_Hor ){
                    if ( (preMode == Scan_VerUp && cnt1stLineTiles+1>= wTiles) || 
                         (preMode == Scan_VerDown && cnt2ndLineTiles+1>= wTiles) ){
                             noEnoughMbInTile = (ALIGN_B(width, 16) < srcStrideY);
//                           uvTileToMb[tileIndex].lastTileInHor    = true;
                    }
                    uvTileToMb[tileIndex].startMbIndex  = mbPosition;
                    uvTileToMb[tileIndex].numMBs        = noEnoughMbInTile ? ((4-((srcStrideY-ALIGN_B(width,16))>>4))<<2) : numMbInTile;
                    ++ tileIndex;                   
                    ++ cntScanTimesInPeriod;
                    if ( noEnoughMbInTile && cntScanTimesInPeriod  == 1){
                        if ( preMode == Scan_VerDown ){
                            preMode = curMode;  // scan mode change need upate preMode
                            curMode = Scan_VerUp;
                            ++ cnt2ndLineTiles;
                            mbPosition = firstMbIdxUnit - mbOffsetTileVer;
                        }else if ( preMode == Scan_VerUp ){
                            preMode = curMode;  // scan mode change need upate preMode
                            curMode = Scan_VerDown;
                            ++ cnt1stLineTiles;
                            mbPosition = firstMbIdxUnit + mbOffsetTileVer;
                        }
                    }else if ( cntScanTimesInPeriod == 2 ){
                        if ( preMode == Scan_Init || preMode == Scan_VerUp ){
                            preMode = curMode;  // scan mode change need upate preMode
                            curMode = Scan_VerDown;
                            ++ cnt1stLineTiles;
                            mbPosition = firstMbIdxUnit + mbOffsetTileVer;
                        }else if ( preMode == Scan_VerDown ){
                            preMode = curMode;  // scan mode change need upate preMode
                            curMode = Scan_VerUp;
                            ++ cnt2ndLineTiles;
                            mbPosition = firstMbIdxUnit - mbOffsetTileVer;
                        }
                    }else if ( cntScanTimesInPeriod == 4 ){                     
                        if ( preMode == Scan_VerDown ){
                            ++ cnt2ndLineTiles;
                            mbPosition += mbOffsetTileHor;
                        }else if ( preMode == Scan_VerUp ){
                            ++ cnt1stLineTiles;
                            mbPosition += mbOffsetTileHor;
                        }
                    }else{
                        if ( preMode == Scan_Init ){
                            ++ cnt1stLineTiles;
                        }else if ( preMode == Scan_VerDown ){
                            ++ cnt2ndLineTiles;
                        }else if ( preMode == Scan_VerUp ){
                            ++ cnt1stLineTiles;
                        }
                        if ( cnt2ndLineTiles >= wTiles && preMode == Scan_VerDown ){
                            preMode = curMode;  // scan mode change need upate preMode
                            curMode = Scan_VerUp;                           
                            mbPosition = firstMbIdxUnit - mbOffsetTileVer;
                        }else if ( cnt1stLineTiles >= wTiles && preMode == Scan_VerUp ){
                            preMode = curMode;  // scan mode change need upate preMode
                            curMode = Scan_VerDown;                         
                            mbPosition = firstMbIdxUnit + mbOffsetTileVer;
                        }else{
                            mbPosition += mbOffsetTileHor;
                        }
                    }
                }else if ( curMode == Scan_VerUp ){
                    if ( cnt1stLineTiles+1 >= wTiles ){
                        noEnoughMbInTile = (ALIGN_B(width, 16) < srcStrideY);
//                      uvTileToMb[tileIndex].lastTileInHor = true;
                    }
                    uvTileToMb[tileIndex].startMbIndex  = mbPosition;
                    uvTileToMb[tileIndex].numMBs        = noEnoughMbInTile ? ((4-((srcStrideY-ALIGN_B(width,16))>>4))<<2) : numMbInTile;
                    ++ tileIndex;
                    mbPosition += mbOffsetTileHor;
                    ++ cntScanTimesInPeriod;
                    ++ cnt1stLineTiles;
                    preMode = curMode;  // scan mode change need upate preMode
                    curMode = Scan_Hor;
                }else if ( curMode == Scan_VerDown ){
                    if ( cnt2ndLineTiles+1 >= wTiles ){
                        noEnoughMbInTile = (ALIGN_B(width, 16) < srcStrideY);
//                      uvTileToMb[tileIndex].lastTileInHor = true;
                    }
                    uvTileToMb[tileIndex].startMbIndex  = mbPosition;
                    uvTileToMb[tileIndex].numMBs        = noEnoughMbInTile ? ((4-((srcStrideY-ALIGN_B(width,16))>>4))<<2) : numMbInTile;
                    ++ tileIndex;
                    mbPosition += mbOffsetTileHor;
                    ++ cntScanTimesInPeriod;
                    ++ cnt2ndLineTiles;
                    preMode = curMode;  // scan mode change need upate preMode
                    curMode = Scan_Hor;
                }
                cntScanTimesInPeriod &= 0x03;
                ++ scanedTiles;
            }
            mbPosition = lastMbIdx + (mbOffsetTileVer<<1);
            availableTilesUV -= numTilesYPerScanUnit;
        }else{
            scanedTiles = 0;
            hMbMultiple = hMacroblocks - (tileIndex/wTiles)*4;
            noEnoughMbInTile = false;
            while ( scanedTiles < wTiles ){
                uvTileToMb[tileIndex].startMbIndex = mbPosition;
                uvTileToMb[tileIndex].lastTileInVer = true;
                if ( scanedTiles+1 == wTiles ){
                    noEnoughMbInTile = (ALIGN_B(width, 16) < srcStrideY);
//                  uvTileToMb[tileIndex].lastTileInHor = true;
                }
                uvTileToMb[tileIndex].numMBs    = noEnoughMbInTile ? ((4-((srcStrideY-ALIGN_B(width,16))>>4))*hMbMultiple) : (4*hMbMultiple);
                ++ tileIndex;
                mbPosition += mbOffsetTileHor;
                ++ scanedTiles;
            }
            availableTilesUV -= wTiles;
        }
    }

    uint8_t* py     = src_y;    
    tileIndex = 0;
    // converting luma componet with yTileToMb
    while ( tileIndex < numTilesY ){
        uint16_t startMbIndex = yTileToMb[tileIndex].startMbIndex;
        const int32_t startMbX = (startMbIndex % wMacroblocks);
        const int32_t startMbY = (startMbIndex / wMacroblocks);

        int32_t mb_x = startMbX;
        int32_t mb_y = startMbY;
        const int32_t cntMbLines = yTileToMb[tileIndex].lastTileInVer ? (hMacroblocks - (tileIndex/wTiles)*2) : 2;      
        const int32_t numMbPerLine = yTileToMb[tileIndex].numMBs / cntMbLines;
        const int32_t sizePixelLine = (numMbPerLine << 4);
        int32_t mbLine = 0;
        while ( mbLine < cntMbLines ){
            assert( mb_y < hMacroblocks && mb_x < wMacroblocks );
            const int32_t dstOffsetY = (mb_y * stride_y + mb_x)<<4;
            int32_t _l = 0;
            // luma
            while( _l < 16 ){
                memcpy( dst_y + dstOffsetY + _l * stride_y, py, sizePixelLine );
                py += 64; // eliminate padding (64-sizePixelLine)
                ++ _l;
            }
            mb_x = startMbX;
            ++ mb_y;
            ++ mbLine;
        }       
        ++ tileIndex;
    }

    uint8_t* puv    = src_uv;
    tileIndex = 0;
    // convering cb/cr componets with uvTileToMb
    while ( tileIndex < numTilesUV ){
        uint16_t startMbIndex = uvTileToMb[tileIndex].startMbIndex;
        const int32_t startMbX = (startMbIndex % wMacroblocks);
        const int32_t startMbY = (startMbIndex / wMacroblocks);

        int32_t mb_x = startMbX;
        int32_t mb_y = startMbY;
        const int32_t cntMbLines = uvTileToMb[tileIndex].lastTileInVer ? (hMacroblocks - (tileIndex/wTiles)*4) : 4;
        const int32_t numMbPerLine = uvTileToMb[tileIndex].numMBs / cntMbLines;     
        int32_t mbLine = 0;
        while ( mbLine < cntMbLines ){
            assert( mb_y < hMacroblocks && mb_x < wMacroblocks );           
            // cb/cr
            int32_t mbIndex = 0;
            while ( mbIndex < numMbPerLine ){
                assert( mb_y < hMacroblocks && mb_x < wMacroblocks );
                const int32_t dstOffsetUV = (mb_y * stride_u + mb_x)<<3;            
                int32_t _l = 0;
                while( _l < 8 ){
                    const int32_t _offset = dstOffsetUV + _l * stride_u;
                    uint8_t* _u = dst_u + _offset;
                    uint8_t* _v = dst_v + _offset;
                    uint8_t* _src_vu = puv+(mbIndex<<4)+(_l<<6);
                    int32_t _interlace = 0;
                    for ( int32_t ichroma = 0; ichroma < 8; ++ichroma ){
                        _u[ichroma] = _src_vu[_interlace++];
                        _v[ichroma] = _src_vu[_interlace++];
                    }
                    ++ _l;
                }
                ++ mb_x;
                ++ mbIndex;
            }
            puv += 64*8;
            mb_x = startMbX;
            ++ mb_y;
            ++ mbLine;
        }
        if ( cntMbLines < 4 ){
            puv += 64*(4-cntMbLines)*8;
        }
        ++ tileIndex;
    }

    return 0;
}

/////////////////////////////////////////////////////////////////////// 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T17:16:07.677

顾名思义，数据被打包成 64x32 像素的“图块”。

如果将解码后的图片写入兼容的硬件表面，则无需知道像素格式。

我已经对格式进行了逆向工程（目前仅适用于 Luma），至少对于某些视频宽度。但是，我（尚）不知道色度样本的布局方式，并且下面的代码仍然存在错误。

```
void CopyOmxPicture( decoder_t *p_dec, picture_t *p_pic,
                 OMX_BUFFERHEADERTYPE *p_header, int i_slice_height )
{
decoder_sys_t *p_sys = p_dec->p_sys;
int i_src_stride;
int i_plane, i_width, i_line;
uint8_t *p_dst, *p_src, *p_dst2;

i_src_stride  = p_sys->out.i_frame_stride;
p_src = p_header->pBuffer + p_header->nOffset;

if( p_dec->p_sys->out.definition.format.video.eColorFormat == QOMX_COLOR_FormatYUV420PackedSemiPlanar64x32Tile2m8ka )
{
    uint8_t *to = p_pic->p[0].p_pixels;
    int w = p_pic->p[0].i_visible_pitch;
    int h = p_pic->p[0].i_visible_lines;
    int pitch = p_pic->p[0].i_pitch;

    msg_Dbg(p_dec, "stride %d pitch %d w %d h %d", i_src_stride, pitch, w, h);

    //copy luma plane
    const int tsz = 64*32;
    int wtiles = (w + 63) / 64; // number of tiles in horizontal direction
    int htiles = (h + 31) / 32; // number of tiles in   vertical direction

    int tile = 0; // FIXME : order differs for other streams

    int tiles_max = 2 * wtiles;
    uint8_t order[tiles_max];
    order[0] = 0;
    order[1] = 1;

    uint8_t done[tiles_max];
    memset(done, 0, tiles_max);
    done[0] = done[1] = 1;

    int j = 2 + 4;
    for (int i = 2; i < tiles_max;) {
        while(done[j]) { j++; j%=tiles_max; }
        done[j] = 1;
        order[i++] = j++; j%= tiles_max;
        while(done[j]) { j++; j%=tiles_max; }
        done[j] = 1;
        order[i++] = j++; j%= tiles_max;
        if (j == 0)
            continue;
        if (i == tiles_max)
            break;
        while(done[j]) { j++; j%=tiles_max; }
        done[j] = 1;
        order[i++] = j++; j%= tiles_max;
        while(done[j]) { j++; j%=tiles_max; }
        done[j] = 1;
        order[i++] = j++;
        j += 4;
        j%= tiles_max;
    }
#if 0
    static const uint8_t order[] = { 0, 1, 6, 7, 2, 3, 4, 5 };
    static const uint8_t order[] = { 0, 1,
        6,  7,  8,  9,
        14, 15, 16, 17,
        22, 23, 24, 25,
        2,  3,  4,  5 ,
        10, 11, 12, 13,
        18, 19, 20, 21,
        26, 27,
    };
#endif
    i_src_stride += 127; i_src_stride &= ~127;
    //int width_align = tsz * (wtiles & 1); // width is aligned on 128 pixels
    int width_align = i_src_stride - ((wtiles + 1) & ~1) * 64;
    int soff = 0;
    for (int i = 0; i < htiles; i++) { // top to bottom
        int lines = 32;
        if ((i == htiles - 1) && (h & 31))
            lines = h & 31;
        for (int j = 0; j < wtiles; j++) { // left to right
            //copy one tile
            int tile_pitch = 64;
            if ((j == wtiles-1) && (w & 63))
                tile_pitch = w & 63;
            int doff = pitch * i * 32 + j * 64;
            for (int l = 0; l < lines; l++) {
                memcpy(&to[doff + l * pitch],
                    &p_src[soff + 64 * 32 * order[tile % tiles_max] + l * 64],
                    tile_pitch);
            }
            if ((++tile % tiles_max) == 0) {
                soff += tiles_max * 64 * 32;
            }
        }
        p_src += width_align;
    }

    // black out chroma
    for (int i = 1; i < p_pic->i_planes; i++)
        memset(p_pic->p[i].p_pixels, 0x80,
                p_pic->p[i].i_pitch * p_pic->p[i].i_visible_lines);

#if 1 //dump
char mask[32];
static int x = 0;
sprintf(mask, "/sdcard/yuv/out%dx%dxp%d-%.3d.yuv", w, h, pitch, ++x);
if ((x & 15) == 0) {
    FILE *f = fopen(mask, "w");
    if ((f = fopen(mask, "w"))) {
#if 1
        //int w = (p_pic->format.i_width + 127) & ~127;
        //int h = (p_pic->format.i_height + 31) & ~31;
        //size_t s = (w * h + 8191) & ~8191;
        size_t s = p_header->nFilledLen;
        fwrite(p_src, s, 1, f);
#else
        fwrite(to, pitch*h*3 / 2, 1, f);
#endif
        fclose(f);
    }
}
#endif

}
} 
```

# mongodb - MongoDB：插入重复键更新

> ID：10059739
> 
> 赞同：16
> 
> 时间：2012-04-08T01:34:20.987
> 
> 标签：mongodb, mongodb-query

如何在一个 [atomic] 语句中使用 Mongo 执行此操作：

```
insert mytable set MyUniqueKey = ?, X = ? on duplicate key update Y = ? 
```

第一次执行此语句时，它将设置 X 值，但之后它只会更新 Y 值。

只有 MyUniqueKey 是唯一键的一部分，应该查找重复项。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-08T04:14:02.207

您正在寻找命令的[upsert 选项](http://docs.mongodb.org/manual/reference/method/db.collection.update/#upsert-parameter)`Update`。这里的文档应该足够了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T09:07:02.790

我在 mongodb 用户组上问了这个问题，答案是不可能的，这是一个未解决的[问题](https://jira.mongodb.org/browse/SERVER-340)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-17T13:33:50.000

从

> [$setOnInsert](http://docs.mongodb.org/manual/reference/operator/setOnInsert/)

我将其称为“MyCollection”而不是“mytable”。您可以执行以下操作：

```
db.mycollection.update(
   { MyUniqueKey: "?" },
   {  
      $set: {"y": "?"},
      $setOnInsert: {
          MyUniqueKey: "?",
           "x": "?",
   },
   { upsert: true }
) 
```

基本上 $set 总是运行，除非文档不存在。然后 $setOnInsert 将运行。

# iphone - 在 UIPickerView 中选择多个元素

> ID：10059740
> 
> 赞同：1
> 
> 时间：2012-04-08T01:34:24.520
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, uipickerview

我在网上找到了这段代码，很惊讶它基本上与我想要的相反。以下是方法...

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view {
    UITableViewCell *cell = (UITableViewCell *)view;

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];
        [cell setBackgroundColor:[UIColor clearColor]];
        [cell setBounds: CGRectMake(0, 0, cell.frame.size.width -20 , 44)];
        cell.tag = row;
        UITapGestureRecognizer *singleTapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(toggleSelection:)];
        singleTapGestureRecognizer.numberOfTapsRequired = 1;
        [cell addGestureRecognizer:singleTapGestureRecognizer];
    }

    if ([selectedItems indexOfObject:[NSNumber numberWithInt:row]] != NSNotFound) {
        [cell setAccessoryType:UITableViewCellAccessoryCheckmark];
    } else {
        [cell setAccessoryType:UITableViewCellAccessoryNone];
    }
    cell.textLabel.text = @"Joe";

    return cell;
}

- (void)toggleSelection:(UITapGestureRecognizer *)recognizer {
    NSNumber *row = [NSNumber numberWithInt:recognizer.view.tag];
    NSUInteger index = [selectedItems indexOfObject:row];
    if (index != NSNotFound) {
        [selectedItems removeObjectAtIndex:index];
        [(UITableViewCell *)(recognizer.view) setAccessoryType:UITableViewCellAccessoryNone];
    } else {
        [selectedItems addObject:row];
        [(UITableViewCell *)(recognizer.view) setAccessoryType:UITableViewCellAccessoryCheckmark];
    }
} 
```

结果是每个 UIPickerView 项目的简单复选标记。这很好，但默认情况下 PickerView 的所有元素都被选中，这意味着它们显示一个复选标记（我不希望它们被选中，除了我在我的代码中专门选择的元素）。您能否编辑我的方法并尝试弄清楚如何做我正在做的事情。

另外，我如何才能看到用户在我的代码中选择的元素。帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T01:55:33.740

从这个块来看，存储了一个名为 的数组`selectedItems`，其中包含`NSNumber`与行对应的对象。

```
if ([selectedItems indexOfObject:[NSNumber numberWithInt:row]] != NSNotFound) {
    [cell setAccessoryType:UITableViewCellAccessoryCheckmark];
} else {
    [cell setAccessoryType:UITableViewCellAccessoryNone];
} 
```

如果选中 rowstarts，则`selectedItems`必须初始化`NSNumber`为每行包含一个对象。尝试将其初始化为空。要读取所选内容，请遍历其内容编号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T03:12:45.900

也许这会有所帮助：

选择或取消选择时，使用 UITableView 并切换单元格配件类型。

```
cell.accessoryType = UITableViewCellAccessoryCheckmark 
```

# java-me - 如何使用 LWUIT 网络管理器

> ID：10059745
> 
> 赞同：0
> 
> 时间：2012-04-08T01:35:13.787
> 
> 标签：java-me, lwuit

请任何人都可以给我一些关于 lwuit networkmanager 类的有用教程的链接。我曾尝试研究文档，但帮助不大。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T12:19:46.247

[Codename One 博客](http://codenameone.blogspot.com/search?q=NetworkManager)中有几个示例以及来自[Eric Coolman](http://gadgets.coolman.ca/lazy-loading-implementing-an-infinite-list-in-codename-one/)的精彩演示。通常用法非常简单，只需创建一个 ConnectionRequest 并将其添加到队列中执行即可。

# ios - 使用协议编译错误

> ID：10059749
> 
> 赞同：0
> 
> 时间：2012-04-08T01:35:44.857
> 
> 标签：ios, xcode

我有一个关于曾经编译但不再编译的 TableViewController 类的问题。我难住了。我的参与者在这里使用 Xcode 4.3 和 iOS 5.1：

在 AllShitsTVC.h 我有

` #import "CoreDataTableViewController.h" #import "Shift.h" #import "Delivery.h" #import "ShiftAddTVC.h" #import "ShiftTVC.h"

```
@interface AllShiftsTVC : CoreDataTableViewController <ShiftAddTVCDelegate,   ShiftTVCDelegate>

@property (strong, nonatomic) NSFetchedResultsController *fetchedResultsController;
@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext;

@property (nonatomic, strong) UIManagedDocument *deliveryDatabase;
@property (nonatomic, strong) Shift *shift;
@property (strong, nonatomic) Shift *selectedShift; 
```

@结尾

ShiftTVCDelegate 出现错误：找不到“ShiftTVCDelegate”的协议声明；您的意思是“ShiftAddTVCDelegate”吗？

ShiftTVC对应的接口是：#import "CoreDataTableViewController.h" #import "Shift.h" #import "Delivery.h" #import "AddEditDeliveryTVC.h"

```
@class ShiftTVC;
@protocol ShiftTVCDelegate <NSObject>
- (void)theDoneButtonOnTheShiftTVCWasTapped:(ShiftTVC *)controller;
@end

@interface ShiftTVC : UITableViewController <AddEditDeliveryTVCDelegate>
@property (nonatomic, weak) id <ShiftTVCDelegate> delegate;
@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext;

@property (nonatomic, strong) Shift *deliveries;
@property (strong, nonatomic) Shift *shift;
@property (weak, nonatomic) IBOutlet UITextField *shiftNameField;
@property (strong, nonatomic) Delivery *selectedDelivery;
- (IBAction)done:(id)sender;

@end 
```

`

所以，我认为我已经正确连接了它，正如我所提到的，它曾经用于编译。

有谁知道我错过了什么？

# c++ - 为 iOS 编译时通过 Makefile 加载 libxml 的正确方法

> ID：10059750
> 
> 赞同：1
> 
> 时间：2012-04-08T01:36:00.240
> 
> 标签：c++, ios, makefile

我有一个包含 libxml 标头的 .cpp

```
#include <libxml/parser.h>
#include <libxml/tree.h>
#include <libxml/xmlmemory.h> 
```

在 clang/llvm 下编译时通过 Makefile 加载 libxml 的正确方法是什么？

```
LDFLAGS = -L../../usr/local/sys/usr/lib -lxml2 
```

导致：错误：编译期间找不到“libxml/parser.h”文件

环境是windows7下的iosdevenv（所以目录结构和mac os上的不一样）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T01:37:48.933

您需要确保提供`-I path_to_wherever_the_libxml_headers_are`给编译器。

# php - 使用 PDO 获取 MySQL 数据库列中有多少项实例的列表

> ID：10059752
> 
> 赞同：0
> 
> 时间：2012-04-08T01:36:37.660
> 
> 标签：php, mysql, count, pdo

我一直在倾诉许多与我想要完成的类似（但不一样）的论坛和问题。我正在将旧的 mysql 查询更新为 PDO。我看到很多人在 PDO 中使用 COUNT(*) 时遇到问题，以及一些解释使用 query() 而不是 fetch() 或使用 rowCount() 有时使用 fetchColumn() 的帖子。

但是，它们似乎是用于检查查询是否返回查询中的任何行或零行。也许是为了测试查询是否有效或返回单行列出单个查询返回的行数？这不是我想要做的（或者我看错了）。

我想要完成的是获取每个唯一项目在给定列中出现的次数的列表。我有一个彩弹网站，我想在其中列出每个类别有多少项目。旧的 mysql 代码（为简洁起见）是这样的：

```
 $query = "SELECT Category, COUNT(*) FROM table WHERE Notes NOT LIKE 'Discontinued' GROUP BY Category";
    $result = mysql_query($query);
    $num_results = $result->num_rows;

    while($row=mysql_fetch_array($result, MYSQL_NUM)) {
    echo "$row[0]: $row[1]<br />";
    } 
```

我的结果是：

空气：312
标记：627
面罩：124
油漆：97
等

所以现在我正在尝试使用 PDO 来实现相同的结果，并尝试了大约十几个不同的建议，这些建议是我从其他人提出的问题中得出的。我通常喜欢自己解决这些问题，这是我第一次不得不认输并在 PHP 论坛上实际发布我自己的问题。我已经把自己弄得很糊涂了，我不知道该往哪边走。

任何从新角度的指导将不胜感激。一定有一种我没有看到或误解的方法。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T01:20:01.390

对于任何可能在这个概念上苦苦挣扎的人，这就是我到目前为止的想法。我敢肯定有更清洁的方法可以做到这一点，但它现在似乎工作正常。由于我还尝试将更多面向对象的编码合并到我的技巧包中，因此我最终将解决方案的业务端放入了一个函数中。如果我在重建站点时积累了更多，我可能最终会将它们组合成一个 PDO 包装器类，用于我自己或类似的东西。

这是我的功能：

```
function fieldCount($field,$condition,$table)
{
//This is just a file that holds the database info and can be whatever name you want
require('database.ini');
try{
    $dbh = new PDO("mysql:host=$db_hostname;dbname=$db_database", $db_username, $db_password);

    //This turns on the error mode so you get warnings returned, if any
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $stmt = $dbh->prepare("SELECT $field, COUNT(*) AS count FROM $table $condition GROUP BY $field");

// I tried to bind my $field variable but for some reason it didn't work so I
// commented it out below until I can look deeper into it. If anyone sees any
// glaring errors, please point them out. It looks right to me, but as I said,
// it's not working.

//  $stmt = $dbh->prepare("SELECT :field, COUNT(*) AS count FROM $table $condition GROUP BY :field");
//  $stmt->bindParam(':field', $field);

    $stmt->execute();

    $results=$stmt->fetchAll(PDO::FETCH_ASSOC);
    // Creates an array similar as the following:
    // $results[0][$field] $results[0]['count']
    // $results[1][$field] $results[1]['count']
    // $results[2][$field] $results[2]['count']
    // with each row as an array of values within a numeric array of all rows

    $dbh = null;
}
catch(PDOException $e)
{
echo $e->getMessage();
}

return $results;
} 
```

database.ini 文件可能看起来很简单：

```
<?php
    //database.ini

    $db_hostname = 'myHostname';
    $db_database = 'databaseNameHere';
    $db_username = 'YourUserNameHere';
    $db_password = 'YourPasswordHere';
?> 
```

以下是调用函数的方式：

```
<?php
// First you have to "require" your file where the function is located,
// whatever you name it.
require('FieldCountFunction.php');

// Determine what column in your database you want to get a count of.
// In my case I want to count how many items there are in each individual
// category, so the $field is Category here.
$field = 'Category';

// If there is a condition to your query, you would state it here.
// In my case I wanted to exclude any items in my Inventory table that
// are marked "Discontinued" in the Notes column of my database.
$condition = "WHERE Notes NOT LIKE 'Discontinued'";

$DB_Table = 'Inventory';

// Now you call the function and enter the $field you want to get a count of,
// any conditions to the query, and the database table name you are querying.
// The results you collected in the function (it was called $results above),
// will be dumped into a new array now called "$fieldArray" below.
$fieldArray = fieldCount($field, $condition, $DB_Table);

// To get the data out again you can do the following to cycle through the
// numeric array of rows (that's what the "$i" is for) and from each numbered
// row you can retrieve the "$field" and "count" that you need. Then display
// them however you want. I'll just echo them out here.
$i=0;
while($i<count($fieldArray))
{
    echo $fieldArray[$i]["$field"].' : '.$fieldArray[$i]['count'].'<br />';
    $totalCount = $totalCount + $fieldArray[$i]['count'];
    $i++;
}
echo $totalCount.' items total';
?> 
```

这将产生类似于以下的结果：

配件：638
记号笔：432
面罩：146
包：93
油漆：
共 47 1356 件

我希望这可以帮助那里的人。如果有人能解释为什么我的绑定不起作用，我将不胜感激。如果没有，我相信我最终会弄清楚的。

# javascript - 什么是 window.localStorage

> ID：10059755
> 
> 赞同：9
> 
> 时间：2012-04-08T01:36:58.637
> 
> 标签：javascript, html, local-storage

[“通过](http://code.google.com/chrome/extensions/samples.html#028eb5364924344029bcbe1d527f132fc72b34e5)[**电子邮件发送此页面**](http://code.google.com/chrome/extensions/samples.html#028eb5364924344029bcbe1d527f132fc72b34e5)[”](http://code.google.com/chrome/extensions/samples.html#028eb5364924344029bcbe1d527f132fc72b34e5) （Chrome 扩展示例）的[`option.js`](http://code.google.com/chrome/extensions/examples/extensions/email_this_page/options.js)文件包含以下代码：[](http://code.google.com/chrome/extensions/samples.html#028eb5364924344029bcbe1d527f132fc72b34e5)

 **```
如果（window.localStorage == null）{
  ...
如果（window.localStorage.customMailtoUrl == null）{

```

这是什么意思？是什么`window.localStorage`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-08T02:09:31.967

localStorage/sessionStorage 是 HTML5 API 的一部分。本质上，这就是 cookie 的用途。但这要好得多。

[https://developer.mozilla.org/en/DOM/Storage](https://developer.mozilla.org/en/DOM/Storage)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-28T08:32:28.343

来自[http://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp)：

“什么是 HTML 本地存储？

使用本地存储，Web 应用程序可以在用户浏览器中本地存储数据。

在 HTML5 之前，应用程序数据必须存储在 cookie 中，包含在每个服务器请求中。本地存储更安全，可以在本地存储大量数据，不影响网站性能。

与 cookie 不同，存储限制要大得多（至少 5MB），并且信息永远不会传输到服务器。

本地存储是每个域的。来自一个域的所有页面都可以存储和访问相同的数据。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-13T05:49:36.643

**localStorage**是 HTML5 API 的一个属性，它允许 Web 应用程序在用户浏览器中本地存储数据。

在 HTML5 之前，应用程序数据必须存储在 cookie 中，包含在每个服务器请求中。localStorage 是一个不同的属性，它比 cookie 有很多优点。

**HTML 本地存储提供了两个对象用于在客户端存储数据：**

**window.localStorage** - 存储没有过期日期的数据

**window.sessionStorage** - 存储一个会话的数据（关闭浏览器选项卡时数据会丢失）

**本地存储功能：**

*   localStorage 数据没有过期日期。
*   localStorage 更安全，因为它不向服务器发送任何内容，一切都发生在客户端，即浏览器。
*   localStorage 是 per origin 意味着两个或多个 html 页面，来自一个源，可以存储和访问存储在 localStorage 对象中的相同数据。
*   它可以存储比 cookie 更多的数据。每个浏览器的存储大小都不同，例如最新版本的 chrome 和 firefox 可以存储至少 5MB 的数据。**

# javascript - 为什么ready()中的函数在我刷新页面时没有系统地执行？

> ID：10059758
> 
> 赞同：1
> 
> 时间：2012-04-08T01:37:15.663
> 
> 标签：javascript, jquery

在 jQuery 中，我在 ready() 中有一个函数，当我在地址栏中按 Enter 时，这个函数就起作用了。

但是，当我多次按刷新时，不会触发该功能。

然后我尝试连续刷新页面 20 次，该功能实际上只工作了 4 次。为什么不系统？

注意：我的函数使用 CSS 移动图像

先感谢您

编辑：

```
<html>
<body>

  <div id='container' style='width: 60px; height: 95px; overflow: hidden;'>
    <img class='pic' id='default_pic' src='http://www.google.com/images/srpr/logo3w.png'>
</div>

  <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js'>

 <script>
   $(document).ready(function(){
       function shiftPic(photo)    {    
           var photo_width = $(photo).width();
           var container_width = $('#container').width();

           photo_shift= (container_width - photo_width)/2;
           console.log(photo_shift);
           $(photo).css('margin-left',photo_shift);
}

 shiftPic('#default_pic');

  });
 </script> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T14:18:39.223

在某些情况下，您在图像加载之前应用该逻辑的问题是什么？请记住，文档就绪事件可能会在图像完成加载之前触发（因此还没有大小），这可能会导致您遇到的行为不一致。

在编写代码时，它基本上等同于根本不将其包装在任何事件处理程序中，因为它已经位于页面底部（一件好事）：

```
<html>
  <body>
    <div id='container' style='width: 60px; height: 95px; overflow: hidden;'>
      <img class='pic' id='default_pic' src='http://www.google.com/images/srpr/logo3w.png'>
    </div>

    <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js'>

    <script>
      function shiftPic(photo)    {    
        var photo_width = $(photo).width();
        var container_width = $('#container').width();

        photo_shift= (container_width - photo_width)/2;
        console.log(photo_shift);
        $(photo).css('margin-left',photo_shift);
      }

      shiftPic('#default_pic');
    </script> 
  </body>
</html> 
```

如果您想等到图像加载完成后再运行您的代码，您可以改用窗口的加载事件：

```
<html>
  <body>
    <div id='container' style='width: 60px; height: 95px; overflow: hidden;'>
      <img class='pic' id='default_pic' src='http://www.google.com/images/srpr/logo3w.png'>
    </div>

    <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js'>

    <script>

      $(window).load(function() {   
        var photo_width = $(photo).width();
        var container_width = $('#container').width();

        photo_shift= (container_width - photo_width)/2;
        console.log(photo_shift);
        $(photo).css('margin-left',photo_shift);
      });
    </script> 
  </body>
</html> 
```

或者，您只能等到特定图像完成加载（在真实页面上使用社交共享小部件、分析脚本、Flash 电影、不相关的附加图像等，这可以将窗口加载事件推迟很多） ：

```
<html>
  <body>
    <div id='container' style='width: 60px; height: 95px; overflow: hidden;'>
      <img class='pic' id='default_pic' src='http://www.google.com/images/srpr/logo3w.png'>
    </div>

    <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js'>

    <script>

      $('#default_pic').load(function() {   
        var photo_width = $(photo).width();
        var container_width = $('#container').width();

        photo_shift= (container_width - photo_width)/2;
        console.log(photo_shift);
        $(photo).css('margin-left',photo_shift);
      });
    </script> 
  </body>
</html> 
```

# sql - 连接两个查询集

> ID：10059761
> 
> 赞同：2
> 
> 时间：2012-04-08T01:37:59.150
> 
> 标签：sql, django, django-models

我有以下两个模型：

```
class JobPosition(models.Model):
    job = models.ForeignKey(Job, related_name='positions')
    position = models.ForeignKey('userprofile.Position')
    date_added = models.DateTimeField()
    end_date = models.DateTimeField()

class ExternalJob(models.Model):
    name = models.CharField(max_length=256)
    position = models.ForeignKey('userprofile.Position') 
    date_added = models.DateTimeField()
    end_date = models.DateTimeField() 
```

我将如何连接一个查询集，基本上将以下内容组合成一个 QS？

```
internal_jobs = JobPosition.objects.filter(end_date__gte=datetime.now())
external_jobs = ExternalJob.objects.filter(end_date__gte=datetime.now())
all_jobs = (internal_jobs + external_jobs).order_by('-date_added') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T01:56:07.760

首先看看这个类似的问题是否对您有帮助：[Using django how can I combine two queries from different models into one query？](https://stackoverflow.com/questions/313137/using-django-how-can-i-combine-two-queries-from-separate-models-into-one-query). 这可能是您为了附加另一个 SQL 语句而必须执行的方法（尽管我不确定它是否可以在 SQL 端执行您所要求的操作）

如果您想要实现的只是这两个查询集的惰性评估组合，那么您可以使用 itertools.chain：

```
from itertools import chain

combined = chain(internal_jobs, external_jobs)
# combined is a generator that will iterate over your combined
# iteratables
for result in combined:
    # do something 
```

我认为对于最终日期排序，您可能必须在客户端执行此操作。调用时将评估完整的查询集列表`sorted`。

```
from operator import attrgetter

combined = chain(internal_jobs, external_jobs)
for result in sorted(combined, key=attrgetter("date_added"), reverse=True):
    # do something 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T09:06:44.350

*update*

Just found [How to combine 2 or more querysets in a Django view?](https://stackoverflow.com/questions/431628/how-to-combine-2-or-more-querysets-in-a-django-view) , refs it for normal case

* * *

If the performance is critical and the result is used as an iterator, below is a simpler version of [https://stackoverflow.com/a/313149/165603](https://stackoverflow.com/a/313149/165603) in the link posted by jdi

```
def merge_by_latest_date_added(*querysets):
    querysets = [[qs, None] for qs in querysets]

    def iterator_helper():
        for qs_v in querysets[:]:
            qs, v = qs_v
            if v is not None:
                continue
            try:
                qs_v[1] = qs.next()
            except StopIteration:
                querysets.remove(qs_v)
        return querysets

    while iterator_helper():
        qs_v = max(querysets, key=lambda x:x[1].date_added)
        yield qs_v[1]
        qs_v[1] = None 
```

You could then

```
internal_jobs = internal_jobs.order_by('-date_added').iterator()
external_jobs = externals_jobs.order_by('-date_added').iterator()
all_jobs = merge_by_latest_date_added(internal_jobs, external_jobs) 
```

For DB backends such as psycopg2, you may want to wrap querysets by [using trick](http://www.mellowmorning.com/2010/03/03/django-query-set-iterator-for-really-large-querysets/) to reduce memory footprint.

You could also isolate code inside the `while` statement to make the merge function a general version. I used it to process large querysets sharing PK in practice, for example.

# asp.net-mvc-3 - 当商店在 Asp.NET MVC 3 中更新产品时如何制作更新通知页面

> ID：10059765
> 
> 赞同：0
> 
> 时间：2012-04-08T01:40:14.860
> 
> 标签：asp.net-mvc-3

当我在后端更新价格或名称等产品时，我希望前端用户只访问网站中的一个页面：通知页面内容：“我们正在更新产品，请稍后回来”。并且一些购买产品的客户采取行动：添加到购物车或进入购物车将被取消并重定向到通知页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T02:03:50.317

我同意 josh3736 的评论，您不妨重新考虑一下。

然而，实现这一点的一种方法是覆盖 global.asax 文件中的 BeginRequest 方法

```
 protected void Application_BeginRequest(object sender, EventArgs e)
    {
       if(ShouldIShowMessage())
       {
           this.Response.Redirect("RedirectUrl");
       }
    }

    private bool ShouldIShowMessage()
    {
       // Decision logic here
    } 
```

# c# - 为什么 DropDownListFor 助手在验证错误后会失败？

> ID：10059768
> 
> 赞同：0
> 
> 时间：2012-04-08T01:42:30.913
> 
> 标签：c#, asp.net-mvc-3, entity-framework, html.dropdownlistfor

搞这个太久了！关于以下问题的任何建议...

添加的代码：

模型：AccountModels.cs

```
[Required]
[Display(Name = "Select role: ")]
public String Role { get; set; } 
```

控制器：AccountController.cs

```
 // GET: /Account/Register

public ActionResult Register()
{ 
    List<SelectListItem> list = new List<SelectListItem>();
    SelectListItem item; 
    foreach (String role in Roles.GetAllRoles()) 
    { 
        item = new SelectListItem { Text = role, Value = role }; 
        list.Add(item); 
    }
    ViewBag.roleList = (IEnumerable<SelectListItem>)list;
    return View();
} 
```

也在 [HTTpPost]

```
if (createStatus == MembershipCreateStatus.Success)
{
    Roles.AddUserToRole(model.UserName, model.Role);

    MailClient.SendWelcome(model.Email);
    FormsAuthentication.SetAuthCookie(model.UserName, false /* createPersistentCookie */);
    return RedirectToAction("Create", "Customers");
} 
```

查看：Register.cshtml

```
<div class="editor-label">      
    @Html.LabelFor(m => m.Role)  
</div>      
<div class="editor-field">
    @Html.DropDownListFor(m => m.Role, ViewBag.roleList as IEnumerable<SelectListItem>) 
```

该代码有效并允许用户选择一个角色，但如果用户在创建新帐户时违反验证规则，该代码就会崩溃。

示例：如果密码不正常匹配，验证将启动，但由于添加了新代码，应用程序就会崩溃。

创建错误的代码：

```
@Html.DropDownListFor(m => m.Role, ViewBag.roleList as IEnumerable<SelectListItem>) 
```

错误代码

> 具有键“角色”的 ViewData 项的类型为“System.String”，但必须为“IEnumerable”类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T02:37:27.747

我猜您在验证失败的 HttpPost 操作方法中会出现此问题。我相信您`return View()`在 HttpPost 操作方法中有声明。当您再次返回视图时，您的 ViewData 为空。因此，您需要再次为下拉列表重新加载数据

```
public ActionResult Register()
{
 //If validation ok, save
 if (createStatus == MembershipCreateStatus.Success)
 {
   //dio stuff
 }
 else
 { 
    List<SelectListItem> list = new List<SelectListItem>();
    SelectListItem item; 
    foreach (String role in Roles.GetAllRoles()) 
    { 
        item = new SelectListItem { Text = role, Value = role }; 
        list.Add(item); 
    }
    ViewBag.roleList = (IEnumerable<SelectListItem>)list; 
    return View();
 }
} 
```

理想情况下，我不会使用 ViewData 来处理这个问题。我将让我的 ViewModel 来处理这个问题。

```
public class RegisterViewModel
{
 public string FirstName { set;get;} 
 public IEnumerable<SelectListItem> Roles { get; set; }
 public int SelectedRoleId { get; set; }
} 
```

并在您的获取操作调用中，将 ViewModel 传递回您的视图。

```
public ActionResult Register()
{
  RegisterViewModel objViewModel=new RegisterViewModel();
  objViewModel.Roles=GetAllRolesAs();  // returns the list of roles to this property
  return View(objViewModel);
} 
```

使您的视图成为强类型视图

```
@model RegisterViewModel
@using (Html.BeginForm())
{
   @Html.TextBoxFor(m => m.FirstName)

   @Html.DropDownListFor(x => x.SelectedRoleId,new SelectList(Model.Roles , "Value","Text"),   "Select Role")
  <input type="submit" value="Save" />
} 
```

并在您的 HttpPostAction 中，接收此 ViewModel 对象作为参数

```
[HttpPost]
public ActionResult Register(RegisterViewModel objVM)
{
  if(ModelState.IsValid)
  {
    //Check your custom validation also
    if (createStatus == MembershipCreateStatus.Success)
    {
          //Save and then Redirect

    }
    else
    {
      objVM.Roles=GetAllRolesAs(); // get the list of roles here again because HTTP is stateless
    }
  }  
 return View(objVM);
} 
```

# css - 带有背景图像的 css 图像

> ID：10059770
> 
> 赞同：-1
> 
> 时间：2012-04-08T01:42:50.273
> 
> 标签：css, image, background

只是想知道这是否可以使用 css

我想模拟一个 40x40 的表格，上面有一个背景图像（已经是那个大小）和另一个图像（也是 40x40）。

我知道背景图像是可能的，但不确定位于顶部的图像是否是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T01:49:24.283

你能把一个嵌套在一个`img`里面`div`吗？

```
 <div style="width: 40px; height: 40px; background-image: url(under.jpg);">
            <img style="width: 100%; height: 100%;" src="on-top.jpg" />
    </div> 
```

# scala - 将类型匹配与序列匹配器混合会在 Scala 中产生奇怪的行为

> ID：10059774
> 
> 赞同：6
> 
> 时间：2012-04-08T01:43:31.647
> 
> 标签：scala, pattern-matching

我试图弄清楚这段代码发生了什么，试图弄清楚是否有我不理解的东西，或者它是否是编译器错误或不直观的规范，让我们定义这两个几乎相同的函数：

```
def typeErause1(a: Any) = a match {
    case x: List[String] => "stringlists"
    case _ => "uh?"
}
def typeErause2(a: Any) = a match {
    case List(_, _) => "2lists"
    case x: List[String] => "stringlists"
    case _ => "uh?"
} 
```

现在，如果我打电话给`typeErause1(List(2,5,6))`我`"stringlists"`，因为即使它实际上是`List[Int]`类型擦除，也无法区分。但奇怪的是，如果我打电话给`typeErause2(List(2,5,6))`我`"uh?"`，我不明白为什么它`List[String]`不像以前那样匹配。如果我`List[_]`在第二个函数上使用它，它能够正确匹配它，这让我认为这是 scalac 中的一个错误。

我正在使用 Scala 2.9.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:09:22.483

这是匹配器中的一个错误；）模式匹配器正在（已经？）为 2.10[重写](https://stackoverflow.com/questions/8533826/what-is-scalas-experimental-virtual-pattern-matcher)

我刚刚检查了最新的每晚，您的代码按预期工作：

```
Welcome to Scala version 2.10.0-20120426-131046-b1aaf74775 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_31).
Type in expressions to have them evaluated.
Type :help for more information.

scala> def typeErause1(a: Any) = a match {
     |     case x: List[String] => "stringlists"
     |     case _ => "uh?"
     | }
warning: there were 2 unchecked warnings; re-run with -unchecked for details
typeErause1: (a: Any)String

scala> def typeErause2(a: Any) = a match {
     |     case List(_, _) => "2lists"
     |     case x: List[String] => "stringlists"
     |     case _ => "uh?"
     | }
warning: there were 3 unchecked warnings; re-run with -unchecked for details
typeErause2: (a: Any)String

scala> typeErause1(List(2,5,6))
res0: String = stringlists

scala> typeErause2(List(2,5,6)) 
res1: String = stringlists 
```

# android - 如何在 Activity 中定期调用方法？

> ID：10059781
> 
> 赞同：0
> 
> 时间：2012-04-08T01:45:32.213
> 
> 标签：android, android-activity

我正在开发一个 Android 应用程序，我需要定期（每秒几次）从 UI 线程（即 Activity 类）执行一些代码。我已经看到类似的问题，例如[Android 重复任务](https://stackoverflow.com/questions/2517468/android-repetitive-task)，但我需要将我的 Activity 设置为侦听器并以某种方式侦听计时器，以便每 X 毫秒 Activity 执行一个方法。

像这样的东西：

```
class myActivity extends Activity{
    //things

    //This method must be called every X milliseconds
    private repetitive_method(){
      ....
    }

    //more things
 } 
```

有一些推荐的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T02:22:01.547

你的答案在那里：

[http://developer.android.com/resources/articles/timed-ui-updates.html](http://developer.android.com/resources/articles/timed-ui-updates.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T05:54:20.283

这可能会有所帮助。请注意，仍然存在竞争条件，其中 mActivity 在检查它是否为 null 和调用之间可能变为 null `runOnUiThread()`。

```
class UpdaterThread extends Thread {
    /** Frequency / sleep duration in milliseconds */
    public static final int FREQUENCY = 250;        
    private volatile boolean mFinished;     
    private Activity mActivity;

    public UpdaterThread(Activity activity) {
        mActivity = activity;
    }

    public void run() {
        while (!mFinished) {
            try {
                if (mActivity != null) {
                    // Your method.
                    mActivity.runOnUiThread(repetitive_method());
                }
                Thread.sleep(FREQUENCY);
            } catch (InterruptedException ignored) {}
        }
    }

    public void quit() {
        mFinished = true;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T15:01:36.987

试试这个...

```
Timer myTimer;
@Override
protected void onStart() {
    super.onStart();
    myTimer= new Timer();
   //this will update every minute
    myTimer.scheduleAtFixedRate(new UpdateMyTimerTask(), 0,
            60000);

}

public class UpdateMyTimerTask extends TimerTask {

    @Override
    public void run() {
        //your method
         printAndroidLabel();
    }

}

@Override
protected void onStop() {
    super.onStop();
     //stop timer
    myTimer.cancel();
}

public void printAndroidLabel(){
    System.out.println("Hi Android!");
} 
```

# java - 从 ascii 转换为十六进制并再次转换回来时丢失左引号

> ID：10059785
> 
> 赞同：1
> 
> 时间：2012-04-08T01:46:59.487
> 
> 标签：java, hex, base64, ascii

使用一些不同的 Stackoverflow 源，我使用 JAVA 实现了一个相当简单的 Base64 到 Hex 转换。但是由于一个问题，我通过尝试将我的十六进制代码转换回文本来测试我的结果，以确认它是正确的，并发现索引 11 处的字符（左引号）以某种方式在翻译中丢失了。

为什么 hexToASCII 转换*除了*左引号之外的所有内容？

```
public static void main(String[] args){
     System.out.println("Input string:");
     String myString = "AAAAAQEAFxUX1iaTIz8=";
     System.out.println(myString + "\n");

     //toascii
     String ascii = base64UrlDecode(myString);
     System.out.println("Base64 to Ascii:\n" + ascii);

     //tohex
     String hex = toHex(ascii);
     System.out.println("Ascii to Hex:\n" + hex);
     String back2Ascii = hexToASCII(hex);
     System.out.println("Hex to Ascii:\n" + back2Ascii + "\n");
}

public static String hexToASCII(String hex){     
    if(hex.length()%2 != 0){
       System.err.println("requires EVEN number of chars");
       return null;
    }
    StringBuilder sb = new StringBuilder();               
    //Convert Hex 0232343536AB into two characters stream.
    for( int i=0; i < hex.length()-1; i+=2 ){
         /*
          * Grab the hex in pairs
          */
        String output = hex.substring(i, (i + 2));
        /*
         * Convert Hex to Decimal
         */
        int decimal = Integer.parseInt(output, 16);                 
        sb.append((char)decimal);             
    }           
    return sb.toString();
} 

  public static String toHex(String arg) {
    return String.format("%028x", new BigInteger(arg.getBytes(Charset.defaultCharset())));
  }

  public static String base64UrlDecode(String input) {
    Base64 decoder = new Base64();
    byte[] decodedBytes = decoder.decode(input);
    return new String(decodedBytes);
 } 
```

回报：

![在此处输入图像描述](../Images/af293c9bc535940d363059dd57dbecfb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T02:00:19.233

它不会松开它。它在您的默认字符集中不理解。改为使用`arg.getBytes()`，而不指定字符集。

```
public static String toHex(String arg) {
   return String.format("%028x", new BigInteger(arg.getBytes()));
} 
```

也改变`hexToAscII`方法：

```
public static String hexToASCII(String hex) {
    final BigInteger bigInteger = new BigInteger(hex, 16);
    return new String(bigInteger.toByteArray());
} 
```

# javascript - POST 请求更新行

> ID：10059798
> 
> 赞同：-1
> 
> 时间：2012-04-08T01:52:45.067
> 
> 标签：javascript, google-fusion-tables

我是 javascript 的新手，所以我正在寻找一些帮助来创建一种拖放地理编码标记的方法，以允许交互式更改地址。我相信这可以通过更新 LOCATION 列行来实现。

第一步是“发送”一个 POST 请求，对吧？好吧，所以我想问一下是否有人可以给我看一个例子，因为我不知道如何编写这个 POST 请求并将其放入我的代码中！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T21:54:03.047

您必须 POST 到 Fusion Tables API 才能更新列，但目前您不能直接从 JavaScript 执行此操作，因为[Google 没有设置 CORS 标头](http://code.google.com/p/fusion-tables/issues/detail?id=1035)以允许跨域发布到其 API。

所以如果你想这样做，你必须通过你的网络服务器或类似的东西“中继”你的请求。我使用以下 PHP 脚本执行此操作，然后通过 JavaScript 将请求发布到我的 PHP 脚本。最后，您必须[使用 OAuth 对自己进行身份验证](https://developers.google.com/fusiontables/docs/articles/oauthfusiontables)。

```
$url = "http://www.google.com/fusiontables/api/query";
$relay = new PostRelay($url,$_POST);
echo $relay->relay(); 
```

在 PostRelay 类`relay()`中定义了该方法，`$_POST`保存所有发布的数据（`$this->data`在我的类中表示为）：

```
public function relay()
{
    $url = $this->getUrl();
    $this->curlHandler = curl_init($url);
    curl_setopt($this->curlHandler, CURLOPT_POST, true);
    curl_setopt($this->curlHandler, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($this->curlHandler, CURLOPT_TIMEOUT, 30);
    curl_setopt($this->curlHandler, CURLOPT_FOLLOWLOCATION, 1);

    if($this->data != null) {
        curl_setopt($this->curlHandler, CURLOPT_POSTFIELDS, $this->getData());
    }

    $remote_answer = curl_exec($this->curlHandler);

    if(curl_errno($this->curlHandler) != 0) {
        $msgErrorNo = "cURL Errornumber: ".curl_errno($this->curlHandler);
        $msgError = "cURL Error: ".curl_error($this->curlHandler);
        throw new RemoteException($url,$msgErrorNo." ".$msgError);
    }
    return $remote_answer;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T23:39:05.013

这可以使用新的 Trusted Tester Fusion Table API 来实现。我在这里发布了一些代码：

[http://groups.google.com/group/fusion-tables-api-trusted-testers/msg/126228f052eff30e?hl=en_US](http://groups.google.com/group/fusion-tables-api-trusted-testers/msg/126228f052eff30e?hl=en_US)

要使用新代码，您需要成为受信任的测试人员。要成为 Trusted Tester，只需加入 Trusted Tester API 组：

[http://groups.google.com/group/fusion-tables-api-trusted-testers?hl=en_US](http://groups.google.com/group/fusion-tables-api-trusted-testers?hl=en_US)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T06:06:48.527

```
<!DOCTYPE html>
<html>
<head>
<style>
#map_canvas { width: 600px;height: 550px; }
</style>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"type="text/javascript"></script>
<script type="text/javascript"src="http://maps.google.com/maps/api/js?sensor=false">
</script>
<script type="text/javascript">
var map;

var layer;
var tableid = 3385625;

function initialize() {
map = new google.maps.Map(document.getElementById('map_canvas'), {
center: new google.maps.LatLng(-30.127460619520974, -51.167964935302734),
zoom: 11,
 mapTypeId: google.maps.MapTypeId.ROADMAP
});

layer = new google.maps.FusionTablesLayer(tableid);
layer.setQuery("SELECT 'ENDERECO' FROM " + tableid);
layer.setMap(map);
}
//FUNÇÃO PARA ATIVAR OS FILTROS
function changeMap() {
var searchString = document.getElementById('search-string').value.replace(/'/g, "\\'");
if (!searchString) {
layer.setQuery("SELECT 'ENDERECO' FROM " + tableid);
return;
}
layer.setQuery("SELECT 'ENDERECO' FROM " + tableid + " WHERE 'TIPO' = '" + searchString + "'");
var queryUrlHead = 'http://www.google.com/fusiontables/api/query?sql=';
var queryUrlTail = '&jsonCallback=?';
var query = "SELECT COUNT() FROM " + tableid + " WHERE 'TIPO' CONTAINS IGNORING CASE '" + searchString + "'"
var queryurl = encodeURI(queryUrlHead + query + queryUrlTail);
var jqxhr = $.get(queryurl,
function(data){
try{
$('#count').html((data.table.rows[0][0]));
}
catch(err){
$('#count').html('0')
}
},
"jsonp");
}

</script>

</head>
<body onload="initialize();">

<div id="map_canvas"></div>

<div style="margin-top: 10px;">
<label>Qual o tipo?</label>
<select id="search-string" onchange="changeMap(this.value);">
 <option value="">--Selecionar/Reset--</option>
 <option value="Bar">Bar</option>
 <option value="Comidas variadas">Comidas variadas</option>
 <option value="Espaço de Cultura">Espaço de Cultura</option>
 <option value="Hotel">Hotel</option>
 <option value="Igreja">Igreja</option>
 <option value="Museu">Museu</option>
 <option value="Restaurante">Restaurante</option>
 <option value="Shopping Center">Shopping Center</option>
 <option value="Teatro">Teatro</option>
</select>
 </div> </br>
 <label>Quantidade:</label>  
 <span id='count'></span>
 </body>
 </html> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-08T01:57:16.717

看看[jQuery Ajax](http://api.jquery.com/category/ajax/)：

示例（假设 .NET Web 服务位于名为 Ajax 的 Web 根文件夹中）：

```
var Params = "{'myParamName': 'myParamValue'}";

$.ajax({
        type: "POST",
        url: "Ajax/MyWebService.asmx/MyWSMethod",
        data: Params,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (response) {
            // Handle the response here as you need to...
        },
        failure: function () {
            // Handle failure if needed
        }
    }); 
```

# java - 处理事件后保持 Java ActionListener 运行？

> ID：10059802
> 
> 赞同：1
> 
> 时间：2012-04-08T01:53:35.160
> 
> 标签：java, swing, jbutton, actionlistener, jlist

我有一个`JList`用户，并且只要选择列表中的元素时，我将在int中存储该元素的索引。然后 a`JButton` `ActionListener`将侦听“删除用户”按钮的按下，并将删除列表中该元素处的用户。问题是，一旦它最初这样做，`ActionListener`停止运行，所以如果我想删除另一个元素，按钮将不再做任何事情。我如何确保事件处理程序即使在它已经完成一次之后也能继续运行？这是我的代码供参考：

```
/*
 * Listener for user list selection
 */
userList.addListSelectionListener(
    new ListSelectionListener () {
        public void valueChanged(ListSelectionEvent e) {
            delete.setEnabled(true);
            index = userList.getSelectedIndex();
        }
    }
);

   /*
    * Listener for delete button press
    */
    delete.addActionListener(
        new ActionListener() {
            public void actionPerformed(ActionEvent e) {
            int i = JOptionPane.showConfirmDialog(null,
            "Are you sure you want to delete user " + users.get(index) + "?");
            switch(i) {
                case JOptionPane.YES_OPTION:

                try {
                    Controller.deleteUser(users.get(index));
                    users.remove(index);
                    listModel.removeElementAt(index);
                    userList = new JList(listModel);
                }

                catch (UserNotFoundException e1) {
                   // TODO Auto-generated catch block
                   e1.printStackTrace();
                }

            }
        }
    }
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T02:04:55.277

问题是您正在从删除处理程序中设置一个全新的用户列表。

**快速修复：**将您的列表事件处理程序添加到新的 JList

**适当的修复：**重构，所以你不需要 `userList = new JList(listModel);`在删除处理程序中做。

# matlab - 'double' 类型的输入参数的未定义函数或方法 'int'

> ID：10059803
> 
> 赞同：1
> 
> 时间：2012-04-08T01:53:47.460
> 
> 标签：matlab, int

我编写了一个代码来评估蠕动泵中流速的临界值

```
dp = -(((theta - 1)+(1 + phi.*cos(2.*pi.*x))).*M.^3.*(cosh((1 + phi.*cos(2.*pi.*x)).*M)+ M.*beta.*sinh((1 + phi.*cos(2.*pi.*x)).*M)))./((1 + phi.*cos(2.*pi.*x)).*M.*cosh((1 + phi.*cos(2.*pi.*x)).*M)+(-1 +(1 + phi.*cos(2.*pi.*x)).*M.^2.*beta).*sinh((1 + phi.*cos(2.*pi.*x)).*M))-(alpha.*(M.^2.*((theta - 1)+(1 + phi.*cos(2.*pi.*x))).*(-1+2.*(1 + phi.*cos(2.*pi.*x)).^2.*M.^2+ cosh(2.*(1 + phi.*cos(2.*pi.*x)).*M)-2.*(1 + phi.*cos(2.*pi.*x)).*M.*sinh(2.*(1 + phi.*cos(2.*pi.*x)).*M)))./(8.*((1 + phi.*cos(2.*pi.*x)).*M.*cosh((1 + phi.*cos(2.*pi.*x)).*M)+(-1+(1 + phi.*cos(2.*pi.*x)).*M.^2.*beta).*sinh((1 + phi.*cos(2.*pi.*x)).*M)).^2)); 
```

和`p = int(y,x,0,1 + phi.*cos(2.*pi.*x));`

如果在 theta p = 0 的临界值，theta 的临界值是多少；我写了代码：

```
M = 2;
alpha = 0.2;
beta = 0.03;
phi = 0.6;
theta = 0;
x = 0.5;
y = -(((theta - 1)+(1 + phi.*cos(2.*pi.*x))).*M.^3.*(cosh((1 + phi.*cos(2.*pi.*x)).*M)+ M.*beta.*sinh((1 + phi.*cos(2.*pi.*x)).*M)))./((1 + phi.*cos(2.*pi.*x)).*M.*cosh((1 + phi.*cos(2.*pi.*x)).*M)+(-1 +(1 + phi.*cos(2.*pi.*x)).*M.^2.*beta).*sinh((1 + phi.*cos(2.*pi.*x)).*M))-(alpha.*(M.^2.*((theta - 1)+(1 + phi.*cos(2.*pi.*x))).*(-1+2.*(1 + phi.*cos(2.*pi.*x)).^2.*M.^2+ cosh(2.*(1 + phi.*cos(2.*pi.*x)).*M)-2.*(1 + phi.*cos(2.*pi.*x)).*M.*sinh(2.*(1 + phi.*cos(2.*pi.*x)).*M)))./(8.*((1 + phi.*cos(2.*pi.*x)).*M.*cosh((1 + phi.*cos(2.*pi.*x)).*M)+(-1+(1 + phi.*cos(2.*pi.*x)).*M.^2.*beta).*sinh((1 + phi.*cos(2.*pi.*x)).*M)).^2));
p = int(y,x,0,1 + phi.*cos(2.*pi.*x));
sym theta
solve( 'p','theta' ); 
```

检查一点，但我得到

```
Undefined function or method 'int' for input arguments of type 'double'. 
```

你能帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T04:36:06.283

If what you are trying to do is Symbolic Integration, you need **Symbolic Toolbox** that [INT](http://www.mathworks.com/help/toolbox/symbolic/int.html) function belong to. The variables should be symbolic (defined with `sym` or `syms`). Check the function syntax with examples in the documentation.

# perl - 我是否需要在 Windows 上的 Perl 脚本中包含 #!/usr/bin/perl 行？

> ID：10059806
> 
> 赞同：15
> 
> 时间：2012-04-08T01:54:21.743
> 
> 标签：perl

我刚刚在 Windows 上安装了 ActivePerl，并开始学习 Perl。在我正在阅读的书中，第一个代码示例是这样的：

```
#!/usr/bin/perl

use 5.010;

say "Hello, world!"; 
```

由于我在 Windows 上，我想知道是否需要包含第一行？

我删除了第一行，没有它，程序运行良好。

这条线仅在 Unix 系统上使用吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-08T01:58:26.457

如果您希望脚本可移植到 UNIX 和 Cygwin，请保留 shebang 行。即使在操作系统不使用它来确定如何运行文件的 Windows 上，Perl 仍然会解析那里写入的开关，例如

```
#!/usr/bin/perl -w 
```

默认情况下会打开警告（类似`use warnings;`但全局）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-08T01:59:18.183

不，不是在这种特殊情况下。类 UNIX 系统中的 shell 使用 shebang 行来定位脚本的可执行文件，脚本通常可以是任何语言。

Windows 倾向于为此目的使用文件扩展名关联。例如，它可以将所有`*.pl`要运行的文件与 Active Perl 可执行文件相关联。

Perl 本身*会*扫描该行以获取标志等，因此一般来说它并不是完全没用的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-08T01:59:00.327

该行由 UNIX 系统中的 shell 使用，在 windows 中不需要，但仍然包含它并保持您的程序更具可移植性是一个好主意

# c++ - cURL 返回上次请求的数据

> ID：10059807
> 
> 赞同：1
> 
> 时间：2012-04-08T01:54:27.593
> 
> 标签：c++, http, curl, libcurl

我从[http://www.zedwood.com/article/125/cpp-libcurl-static-class获得（并从中修改）的 HTTP 类有问题](http://www.zedwood.com/article/125/cpp-libcurl-static-class)

**Http.h**

```
#ifndef HTTP_H
#define HTTP_H

#include <curl/curl.h>
#include <string>
#include <map>

using namespace std;

class Http {

    public:
        Http(){};
        ~Http(){};

        static string get(const string &url);
        static string get(const string &url, string referer);

        static string post(const string &url, map<string, string> params);
        static string post(const string &url, map<string, string> params, string referer);

        static string get_current_url();
        static string get_last_url();

        static void set_proxy(string ip, long port);
        static void clear_proxy();

        static void set_remote_port(long port);

    private:
        static string request(const string &url, string referer, bool post, const string &params);

        static int writer(char *data, size_t size, size_t nmemb, string *buffer);

        static string urlencode(const string &str);
        static string dechex(char dec);
        static string build_param_string(map<string, string> params);

        static string last_url;
        static string current_url;

        static bool use_proxy;
        static string proxy_ip;
        static long proxy_port;

        static double total_to_download;
        static double now_downloaded;

        static long remote_port;

        static string buffer;
};

#endif 
```

**Http.cpp**

```
#include "Http.h"

using namespace std;

string Http::last_url;
string Http::current_url;

bool Http::use_proxy;
string Http::proxy_ip;
long Http::proxy_port;

long Http::remote_port;

string Http::get(const string &url){
    return request(url, "", false, "");
}

string Http::get(const string &url, string referer){
    return request(url, referer, false, "");
}

string Http::post(const string &url, map<string, string> params){
    string postdata = build_param_string(params);

    return request(url, "", true, postdata);
}

string Http::post(const string &url, map<string, string> params, string referer){
    string postdata = build_param_string(params);

    return request(url, referer, true, postdata);
}

string Http::get_current_url(){
    return current_url;
}

string Http::get_last_url(){
    return last_url;
}

void Http::set_proxy(string ip, long port){
    use_proxy = true;
    proxy_ip = ip;
    proxy_port = port;
}

void Http::clear_proxy(){
    use_proxy = false;
}

void Http::set_remote_port(long port){
    remote_port = port;
}

string Http::request(const string &url, string referer, bool post, const string &params){
    static string buffer = "";
    static char error_buffer[CURL_ERROR_SIZE];
    error_buffer[0] = 0;

    CURL *curl;
    CURLcode result;

    curl = curl_easy_init();

    if(curl){
        curl_easy_setopt(curl, CURLOPT_ERRORBUFFER, error_buffer);
        curl_easy_setopt(curl, CURLOPT_URL, url.c_str());
        curl_easy_setopt(curl, CURLOPT_HEADER, 0);
        curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION, 1);
        curl_easy_setopt(curl, CURLOPT_AUTOREFERER, 1);
        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, Http::writer);
        curl_easy_setopt(curl, CURLOPT_WRITEDATA, &(buffer));
        curl_easy_setopt(curl, CURLOPT_COOKIEFILE, ".cookies.cj");
        curl_easy_setopt(curl, CURLOPT_COOKIEJAR, ".cookies.cj");
        curl_easy_setopt(curl, CURLOPT_SSL_VERIFYHOST,  2);
        curl_easy_setopt(curl, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)");

        if(post){
            curl_easy_setopt(curl, CURLOPT_POST, 1);
            curl_easy_setopt(curl, CURLOPT_POSTFIELDS, params.c_str());
        }

        if(referer.length()){
            curl_easy_setopt(curl, CURLOPT_REFERER, referer.c_str());
        }

        if(use_proxy){
            curl_easy_setopt(curl, CURLOPT_PROXY, proxy_ip.c_str());

            if(proxy_port){
                curl_easy_setopt(curl, CURLOPT_PROXYPORT, proxy_port);
            }
        }

        if(remote_port){
            curl_easy_setopt(curl, CURLOPT_PORT, remote_port);
        }

        result = curl_easy_perform(curl);

        curl_easy_cleanup(curl);

        if(result == CURLE_OK){
            return buffer;
        }
        else{
            return "error";
        }
    }

    return "error";
}

int Http::writer(char *data, size_t size, size_t nmemb, string *buffer){
    int result = 0;

    if(buffer != NULL){
        buffer->append(data, size * nmemb);
        result = size * nmemb;
    }

    return result;
}

string Http::urlencode(const string &str){
    string encoded = "";

    int max = str.length();

    for(int i = 0; i < max; i++){
        if(
            (48 <= str[i] && str[i] <= 57) ||
            (65 <= str[i] && str[i] <= 90) ||
            (97 <= str[i] && str[i] <= 122) ||
            (str[i] == '~' || str[i] == '!' || str[i] == '*' || str[i] == '(' || str[i] == ')' || str[i] == '\'')
        ){
            encoded.append(&str[i], 1);
        }
        else{
            encoded.append("%");
            encoded.append(dechex(str[i]));
        }
    }

    return encoded;
}

string Http::dechex(char dec){
    char dig1 = (dec&0xF0)>>4;
    char dig2 = (dec&0x0F);
    if ( 0<= dig1 && dig1<= 9) dig1+=48;    //0,48inascii
    if (10<= dig1 && dig1<=15) dig1+=97-10; //a,97inascii
    if ( 0<= dig2 && dig2<= 9) dig2+=48;
    if (10<= dig2 && dig2<=15) dig2+=97-10;

    string r;
    r.append( &dig1, 1);
    r.append( &dig2, 1);
    return r;
}

string Http::build_param_string(map<string, string> params){
    string param_string = "";

    for(map<string, string>::iterator it = params.begin(); it != params.end(); it++){
        param_string += it->first + "=" + urlencode(it->second) + "&";
    }

    param_string = param_string.substr(0, param_string.length() - 1);

    return param_string;
} 
```

发生的情况是，如果我发出多个请求，请求函数（.get(); 或 .post();) 返回的响应只是附加到所有先前请求的返回数据上。

我觉得这是我想念的简单东西，但在过去几天谷歌搜索后我无法弄清楚。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T02:24:51.180

如果在同一行初始化缓冲区：

```
string Http::request(const string &url, string referer, bool post, const string &params){
    static string buffer = ""; 
```

`static`由于修饰符，该初始化只会在您第一次运行该函数时发生。而且因为 write 函数只将数据附加到缓冲区......

您需要将其分隔为 2 行以重置每次运行的缓冲区：

```
static string buffer;
buffer.clear(); 
```

# php - 它不会停止上传文件

> ID：10059810
> 
> 赞同：0
> 
> 时间：2012-04-08T01:55:01.557
> 
> 标签：php, javascript, jquery, html, file

我有一个应用程序，您可以[在此处](https://helios.hud.ac.uk/u0867587/Mobile_app/QandATable2.php)访问。如果您打开应用程序，请单击“添加”按钮几次。这将在下表中添加一个新行。在每个表格行中都有一个 AJAX 文件上传器。

我遇到的问题是，如果您单击“上传”按钮，它会显示一个加载栏，但问题是加载栏并没有消失。假设发生的情况是用户单击“上传”，然后它将再次显示文件输入和带有上方消息的按钮，说明文件是否已成功加载？

为什么加载栏永远不会停止加载，我该如何解决这个问题？

下面是附加在每一行中的文件输入的代码以及假设开始和停止上传的 javascript 函数：

```
<script type="text/javascript">

function insertQuestion(form) {   

    var $tbody = $('#qandatbl > tbody'); 
    var $tr = $("<tr class='optionAndAnswer' align='center'></tr>");
    var $image = $("<td class='image'></td>"); 

var $fileImage = $("<form action='upload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='startUpload(this);' >" + 
    "<p class='f1_upload_process' align='center'>Loading...<br/><img src='Images/loader.gif' /><br/></p><p class='f1_upload_form' align='center'><br/><label>" + 
    "File: <input name='fileImage' type='file' class='fileImage' /></label><br/><label><input type='submit' name='submitBtn' class='sbtn' value='Upload' /></label>" +
    "</p> <iframe class='upload_target' name='upload_target' src='#' style='wclassth:0;height:0;border:0px solclass #fff;'></iframe></form>");

    $image.append($fileImage);

    $tr.append($image);  
    $tbody.append($tr); 

}

function startUpload(source_form){
  $(source_form).find('.f1_upload_process').css('visibility','visible');
  $(source_form).find('.f1_upload_form').css('visibility','hidden');
      return true;
}

function stopUpload(success, source_form){
      var result = '';
      if (success == 1){
         result = '<span class="msg">The file was uploaded successfully!<\/span><br/><br/>';
      }
      else {
         result = '<span class="emsg">There was an error during file upload!<\/span><br/><br/>';
      }
      $(source_form).find('.f1_upload_process').css('visibility','hidden');
      $(source_form).find('.f1_upload_form').html(result + '<label>File: <input name="fileImage" type="file"/><\/label><label><input type="submit" name="submitBtn" class="sbtn" value="Upload" /><\/label>');
      $(source_form).find('.f1_upload_form').css('visibility','visible');     
      return true;   
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T02:13:08.447

您的 upload.php 文件未传入 stopUpload() 函数的 source_form 参数。这是您的 PHP 文件返回的内容：

```
window.top.window.stopUpload(0); 
```

它有成功参数，但 source_form 没有。所以 stopUpload() 中的这三行代码不会正常工作，因为 source_form 将是未定义的：

```
$(source_form).find('.f1_upload_process').css('visibility','hidden');
$(source_form).find('.f1_upload_form').html(result + '<label>File: <input name="fileImage" type="file"/><\/label><label><input type="submit" name="submitBtn" class="sbtn" value="Upload" /><\/label>');
$(source_form).find('.f1_upload_form').css('visibility','visible'); 
```

我已经整理了一个应该可以工作的修复程序：

```
<script type="text/javascript">
 var sourceForm; 

function insertQuestion(form) {   

    var $tbody = $('#qandatbl > tbody'); 
    var $tr = $("<tr class='optionAndAnswer' align='center'></tr>");
    var $image = $("<td class='image'></td>"); 
    var $fileImage = $("<form action='upload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='startUpload(this);' >" + 
    "<p class='f1_upload_process' align='center'>Loading...<br/><img src='https://helios.hud.ac.uk/u0867587/Mobile_app/Images/loader.gif' /><br/></p><p class='f1_upload_form' align='center'><br/><label>" + 
    "File: <input name='fileImage' type='file' class='fileImage' /></label><br/><label><input type='submit' name='submitBtn' class='sbtn' value='Upload' /></label>" +
    "</p> <iframe class='upload_target' name='upload_target' src='#' style='wclassth:0;height:0;border:0px solclass #fff;'></iframe></form>");

    $image.append($fileImage);

    $tr.append($image);  
    $tbody.append($tr);      
}

function startUpload(source_form){
  $(source_form).find('.f1_upload_process').css('visibility','visible');
  $(source_form).find('.f1_upload_form').css('visibility','hidden');
  sourceForm = source_form;
  return true;
}

function stopUpload(success){
      var result = '';
      if (success == 1){
         result = '<span class="msg">The file was uploaded successfully!<\/span><br/><br/>';
      }
      else {
         result = '<span class="emsg">There was an error during file upload!<\/span><br/><br/>';
      }
      $(sourceForm).find('.f1_upload_process').css('visibility','hidden');
      $(sourceForm).find('.f1_upload_form').html(result + '<label>File: <input name="fileImage" type="file"/><\/label><label><input type="submit" name="submitBtn" class="sbtn" value="Upload" /><\/label>');
      $(sourceForm).find('.f1_upload_form').css('visibility','visible');     
      return true;   
}
</script> 
```

首先在块的最顶部创建一个名为 sourceForm 的新全局变量。该变量将用于存储用户在哪个表单上单击了上传按钮，它在 startUpload() 函数中设置：

```
sourceForm = source_form; 
```

因此，一旦用户点击 Upload，我们将通过 sourceForm 变量引用他们正在使用的表单。然后在 stopUpload() 中，您只需使用新的 sourceForm 变量来更新可见性并设置返回消息。

作为旁注，您应该真正考虑使用[jQuery ajax()](http://api.jquery.com/jQuery.ajax/)。使用 iframe 从 PHP 文件运行 JavaScript 似乎有点困难和麻烦。ajax() 方法要简单得多。

# c++ - 错误 C2679 模板类

> ID：10059816
> 
> 赞同：1
> 
> 时间：2012-04-08T01:56:13.787
> 
> 标签：c++

错误发生在默认构造函数中

**错误：** 错误 C2679：二进制“=”：未找到采用“int”类型右侧操作数的运算符（或没有可接受的转换）

编码：

```
#ifndef _SLOT_H
#define _SLOT_H
#include <string>
using namespace std;
template <class T>
class slot
{
private:
    string key;
    T data;
public:
    slot();
    slot(string str);
    slot(string str, T tempdata);
    slot(const slot &source);
    string getkey();
    T getdata();
    void setkey(string str);
    void setdata(T tempdata);
};

template<class T>
slot<T>::slot()
{
    key = "";
    data = NULL;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T01:58:57.410

问题可能是您正在使用`T`不允许`int`分配给它的类型来实例化模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T19:57:58.367

我想我知道这个问题的解决方案。继续并将 main 放在头文件中。应该处理您遇到的所有指针问题

例如

将 main 中的所有代码放入文件标题“Main.h”中，通过 linux 注释 mount /dev/bin/boot 将其链接到其他文件。这将导致文件在启动时被链接。如果您有任何其他问题，请让我知道。此外，在您链接文件后，您可能需要重新启动它才能工作

快乐编程！

# c# - 从 XML 中提取特定值

> ID：10059817
> 
> 赞同：0
> 
> 时间：2012-04-08T01:56:21.847
> 
> 标签：c#, xml, winforms

我有一个非常复杂的 xml

我需要来自的单个值

```
selectSingleNode(@"/TimeInTransitResponse/TransitResponse/ServiceSummary/EstimatedArrival/BusinessTransitDays").InnerText) 
```

但是这个位置大约有 7 个条目，所以它只返回第一个我需要的最后一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T01:59:09.133

您可以使用索引和内部索引，您可以放置​​ last() 函数 - 如下所示：

```
"/TimeInTransitResponse/TransitResponse/ServiceSummary/EstimatedArrival/BusinessTransitDays[last()]" 
```

请参阅MSDN 中的[最后一个](http://msdn.microsoft.com/en-us/library/ms256083.aspx)XPath 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T02:00:48.573

改用`SelectNodes`：

```
Dim nodeList As XmlNodeList = root.SelectNodes(@"/TimeInTransitResponse/TransitResponse/ServiceSummary/EstimatedArrival/BusinessTransitDays")
Dim lastNode As XmlNode = nodeList.Item(nodeList.Count - 1)
Dim lastNodeValue As Decimal = Convert.ToDecimal(lastNode.InnerText) 
```

然后取列表中的最后一个节点。

# javascript - C：字符串操作和 Arduino

> ID：10059823
> 
> 赞同：2
> 
> 时间：2012-04-08T01:57:39.917
> 
> 标签：javascript, c, arduino

我正在学习用 Arduino 编程，据我所知，它使用 C 语言（如果我错了，请纠正我）。

我是 JavaScript 和 PHP 的大四学生，现在我很难处理字符串处理等简单的事情。

如果在 JavaScript 中我有

```
var c = 33;
var myString = "hello" + c;
alert(myString); //---> hello33 
```

它在 C/Arduino 中是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T02:15:33.310

在 C 中，您会执行以下操作：

```
char buff[100]; // needs to be large enough.
int c = 33;
sprintf (buff, "hello%d", c); // may want a space after hello

// Now do something with buff. 
```

C 是一种您需要自己管理一些低级细节的语言。基础语言/库中没有自动扩展的字符串类型，尽管毫无疑问周围有一些很好的第三方字符串类型（例如， [“更好的字符串”](http://bstring.sourceforge.net/)，因为它不会拖入很多其他你不想要的东西，在嵌入式领域尤为重要）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T03:48:07.293

Arduino 有内置的[String 类](http://arduino.cc/en/Reference/StringObject)，你可以这样做：

```
String stringOne = "A long integer: ";
// using += to add a long variable to a string:
stringOne += 123456789;

// or

stringTwo.concat(123456789); 
```

如果这两种情况你都得到`"A long integer: 123456789"`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T09:19:28.627

我强烈建议使用 2 个辅助库。它们一起使使用字符串变得更加容易！

PString： [http](http://www.arduino.cc/cgi-bin/yabb2/YaBB.pl?num=1236036180) ://www.arduino.cc/cgi-bin/yabb2/YaBB.pl?num=1236036180 所以你可以写...

```
str.print("The temperature is ");
str.print(temp);
str.println(" degrees.");
// do something with str here 
```

* * *

流媒体： [http](http://arduiniana.org/libraries/streaming/) ://arduiniana.org/libraries/streaming/ 所以你可以写...

```
lcd << "GPS #" << gpsno << " date: " << day << "-" << month << "-" << year << endl; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T21:35:31.523

相当于您的 JavaScript 代码作为 Arduino 草图是：

```
void setup() {
  Serial.begin(9600);
  int c = 33;                 // var c = 33;
  String myString = "hello";  // var myString = "hello"
  myString += c;              //                        + c;
  Serial.println(myString);   // alert(myString); //---> hello33
}

void loop() {
} 
```

对于字符串处理，JavaScript 和 Arduino (C++) 代码之间的区别是：

*   变量是强类型的。例如，您需要在声明变量时指明变量是整数 ( `int`) 还是字符串 ( `String`)。
*   字符串不是 C++ 中的内置“原始”类型（Arduino 版本的 C++ 也不支持 C++ 标准库字符串），因此一些简单的操作不能作为单个语句执行。例如，赋值和连接需要两行 Arduino 代码。

JavaScript 和 Arduino (C++) 代码之间的其他重要区别是：

*   您需要 a`setup`和`loop`函数而不是`main`函数。`setup`Arduino 板通电时只运行一次，然后`loop`连续执行。
*   最接近`alert`Arduino 中 JavaScript 的等价物是写入串行端口。要查看此输出，您需要将 Arduino 板连接到 PC。在 Arduino IDE 中，打开串行监视器将允许您查看输出。

# javascript - 使用 HTML5/CSS/JS 更改图像的颜色？

> ID：10059824
> 
> 赞同：1
> 
> 时间：2012-04-08T01:57:55.207
> 
> 标签：javascript, css, html

有没有办法像在 Flash/ActionScript 中一样仅使用 HTML5/CSS/JavaScript 来更改图像的颜色？

这是 Flash 中的一个示例：[http ://www.kirupa.com/developer/actionscript/color.htm](http://www.kirupa.com/developer/actionscript/color.htm)

据我所知，我的猜测是只有 Canvas 才有可能；但我想知道是否有另一种解决方案也支持 IE7 和 IE8，而无需为 IE 安装谷歌插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:34:47.880

我只是偶然发现了这个问题，我想我会提到[CSS 过滤器](http://html5-demos.appspot.com/static/css/filters/index.html)。

目前，只有 Chrome 完全支持它们（[http://caniuse.com/#feat=css-filters](http://caniuse.com/#feat=css-filters)），但未来可能会有所改善。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T02:34:09.023

这取决于你想要做什么。

如果您想要的只是用颜色覆盖图像，那么您可以在顶部分层一个 DIV，该 DIV 具有所需颜色的部分透明 PNG 作为其背景图像。这是一个 JS Fiddle 演示：

[http://jsfiddle.net/btCfK/](http://jsfiddle.net/btCfK/)

我没有方便检查的 IE 7 副本，但我很确定它适用于较旧的 IE（无论如何迟于 6）。

此示例对叠加层和图像使用固定大小。通过一些巧妙的编码，你可以改变它，并制作一个基于 JavaScript 的控件来交换颜色。

如果你想要比这更复杂的东西，不使用 Canvas 元素、SVG 或一大堆 JavaScript 可能是不切实际的。

# jquery - jquery工具覆盖rel替代

> ID：10059829
> 
> 赞同：0
> 
> 时间：2012-04-08T01:58:40.633
> 
> 标签：jquery, overlay, jquery-tools

当我单击链接时，我使用 jquery 工具覆盖来显示覆盖。我在页面上有 3 个不同的叠加层。链接的 rel 属性设置为覆盖的名称/ID。

`<a href="http://www.example.com" rel="#custom">click to open overlay</a>`

覆盖图如下：

`<div class="email_overlay" id="custom">` `<div class="emailWrap"></div>` `</div>`

覆盖在下面初始化

`$("a[rel]").overlay();`

问题是我在页面上还有其他几个链接，这些链接上有 rel="nofollow"。

这会导致错误，因为它认为 nofollow 是覆盖。

最好的解决方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T02:08:53.847

也许：

```
$("a[rel^='#']").overlay(); 
```

这意味着 - 选择所有属性以开头的`a`标签`rel``#`

# jquery - ajax 调用在 Chrome、Firefox 中有效但在 IE 中无效？

> ID：10059837
> 
> 赞同：3
> 
> 时间：2012-04-08T01:59:20.523
> 
> 标签：jquery, ajax, internet-explorer, facebook-graph-api

以下代码在 Chrome、Firefox 和 Komodo Dragon 中运行良好。我什至是全新安装的 firefox（证明我没有通过 FB 或任何东西的身份验证）。它在 IE 中不起作用。Chrome、FF 和 dragon 都会导致带有有效 access_token 的警报。IE 导致“拒绝访问”。我已经尝试过 GET 和 POST，两者都有相同的结果。

```
 function getWallPosts() {
        $.ajax({
            url: 'https://graph.facebook.com/oauth/access_token?client_id=<facebookid>&client_secret=<secretcode>&grant_type=client_credentials',
            type: 'POST',
            success: function (data) {
                alert(data)
            },
            error: function (a, b, c) {
                alert(a + ' ' + b + ' ' + c);
            }
        });
    }; 
```

**编辑：附加信息***

我尝试按照评论中的建议使用 XDomainRequest，但是我仍然仅在 IE 中收到拒绝访问。我相信这就是原因：

[http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)

> 请求必须针对与托管页面相同的方案
> 
> 此限制意味着如果您的 AJAX 页面位于 [http://example.com](http://example.com)，那么您的目标 URL 也必须以 HTTP 开头。同样，如果您的 AJAX 页面位于[https://example.com](https://example.com)，那么您的目标 URL 也必须以 HTTPS 开头。
> 
> 阻止 HTTPS 页面对基于 HTTP 的资源发出 XDomainRequest 绝对是我们的意图，因为这种情况会带来许多开发人员和大多数用户不理解的混合内容安全威胁。
> 
> 但是，此限制过于宽泛，因为它会阻止 HTTP 页面发出针对 HTTPS 页面的 XDomainRequest。虽然 HTTP 页面本身可能已被破坏，但没有理由禁止它安全地接收公共资源。
> 
> 最糟糕的是，Same Scheme 限制意味着 Web 开发人员使用 file:// 方案在本地测试他们的页面会发现所有 XDomainRequest 都被阻止，因为 file:// 不匹配 http:// 或 https:/ /，这是唯一有效的目标方案（第 1 点）。要解决此问题，Web 开发人员必须在本地 Web 服务器（例如 IIS、Visual Studio 托管服务器等）上托管他们的页面。
> 
> 要解决此限制，您可以构建 postMessage-Proxy-for-XDR。

我提供的托管包不包含任何 SSL 选项。还有其他人有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T23:34:40.237

答案是对服务器端服务进行 ajax 调用，然后让该服务进行 OAuth 调用。就我而言，我使用了 asp.net ASMX 服务。它也可以是 PHP 或任何东西。现在正在工作。

# html - 带有“位置：绝对”的内部按钮将放置在表格之外

> ID：10059841
> 
> 赞同：1
> 
> 时间：2012-04-08T02:00:51.113
> 
> 标签：html, css, html-table, position

html:

```
<br/><br/><br/><br/><br/>

<table>
<tr>
    <td class="container">
        <button class="del">delete</button>
    </td>
</tr>
</table>

<br/><br/><br/><br/><br/>

<div class="container">
<button class="del">delete</button>
</div>​ 
```

CSS：

```
.container {
    position: relative;
    border: 1px solid red;
    height: 50px;
    width: 200px;
}

.del {
    position: absolute;
    top: 3px;
    right: 3px;
}​ 
```

为什么a里面的按钮`div`会放在div的右上角，而a里面的按钮`td`会放在桌子外面？

如何解决？

查看活动演示：http: [//jsfiddle.net/Freewind/d6Tug/](http://jsfiddle.net/Freewind/d6Tug/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T02:07:03.470

我认为这与a的显示风格有关`td`，即`table-cell`。如果将其设置为`display:block`，它将正常工作。

只需添加`display:block`到您的 .container 样式中。

正如freewind指出的那样，如果您的浏览器支持td，最好使用`inline-block`它，因为td通常显示在一行中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T02:34:18.727

给出一个元素`position:absolute;`会相对于它的包含*块*放置它。由于表格单元格不被视为块容器（与 a 不同`div`），因此它相对于文档正文本身放置它。`top:3px;`将其从文档的顶部边框`right:3px;`移出 3px，并将其从右边框移出 3px。

[http://reference.sitepoint.com/css/position](http://reference.sitepoint.com/css/position)

# facebook-graph-api - Facebook 如何抓取我的网站以及如何手动更改此信息？

> ID：10059842
> 
> 赞同：0
> 
> 时间：2012-04-08T02:00:54.840
> 
> 标签：facebook-graph-api, facebook-like, web-scraping

我正在使用 Facebook 喜欢按钮的 iFrame 版本，并且想知道 Facebook 如何抓取我的网站。他们在页面中间提取信息，这是第一个段落标签，而不是之前从 div 中获取。我想知道这是否正常，以及 Facebook 多久更新一次他们的页面。

其次，我在生成的 Facebook 页面的页面设置中编辑此信息时遇到问题。如果我可以手动覆盖 Facebook 从我的网站上抓取的任何内容，那就太好了。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T02:02:42.190

[http://ogp.me/](http://ogp.me/) — 更具体地说，使用 Open Graph 描述。

# api - 通过 API 创建谷歌分析代码

> ID：10059849
> 
> 赞同：2
> 
> 时间：2012-04-08T02:03:13.787
> 
> 标签：api, google-analytics, google-api, google-analytics-api

是否有谷歌 API 通过 API 创建谷歌分析代码（不去谷歌网站手动创建）？

请帮忙...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T12:29:06.027

[GA 管理 API](http://code.google.com/apis/analytics/docs/mgmt/home.html)是只读的。您不能通过它创建帐户或配置文件：

> Google Analytics 通过 Management API 为开发人员提供对配置数据的访问权限，该 API 是帐户和配置数据的只读 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T03:08:48.217

要使用异步方法加载脚本，您可以以编程方式将 ga.js 文件包含在头部中。这可以通过不同的方式完成，但这是一种常见的方式：

```
 var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXX-X']);//<------ Set the account number!

// Add other values
_gaq.push(['_trackPageview']);
_gaq.push(['_setDomainName', 'www.example.com']);
_gaq.push(['_setSiteSpeedSampleRate',5]);

// The the script to the head
(function() {
  var ga = document.createElement('script'); 
  ga.type = 'text/javascript'; 
  ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') +
  '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; 
  s.parentNode.insertBefore(ga, s);
})(); 
```

`_gaq`您可以在加载 gs.js 脚本之前或之后将值推送到变量中。您可以在页面的任何位置为事件、交易和虚拟浏览量添加多种跟踪。与从帐户获取的常用脚本无关。您唯一需要的是**帐号**

尝试谷歌的文档了解更多详情：

[http://code.google.com/apis/analytics/docs/tracking/asyncUsageGuide.html](http://code.google.com/apis/analytics/docs/tracking/asyncUsageGuide.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T12:23:24.203

您无法通过 API 创建网络媒体资源 ID。

# objective-c - WebView 出口在 XIB 中神秘地不可用

> ID：10059853
> 
> 赞同：0
> 
> 时间：2012-04-08T02:03:58.953
> 
> 标签：objective-c, xcode, cocoa, webkit, webview

只是想制作一个简单的 WebView Mac 应用程序。

我已经导入了 WebKit.h，声明了一个 WebView @property，并在 .m 中 @synthesized 它，但是当我进入 IB 和连接选项卡时，我的出口，比如 MyWebView，没有列出。

。H

```
#import <Cocoa/Cocoa.h>
#import <WebKit/WebKit.h>

@interface MyAppDelegate : NSObject <NSApplicationDelegate> {
     NSWindow *window;
     IBOutlet WebView *MyView;
 }
 @property (assign) IBOutlet NSWindow *window;
 @property (nonatomic, retain) IBOutlet WebView *MyView;
@end 
```

.m

```
 @synthesize MyView; 
```

最新版本的 Xcode。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T03:39:53.273

在仔细查看了您发布的代码之后，我认为问题与您的应用程序委托的名称有关——您如何（以及为什么？）将其从默认的 AppDelegate 更改？IB 中的蓝色立方体是名为 AppDelegate 还是名为 MyAppDelegate？如果是前者，那就是你的问题——在 IB 的 Identity Inspector 中将其类更改为 MyAppDelegate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T18:27:33.487

请参阅我对原始问题的评论。我的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T02:14:30.127

确保定义如下：

```
@property(nonatomic, retain) IBOutlet UIWebView *myWebView; 
```

如果您尚未添加 IBOutlet，则 IB 不会这样显示。

# ubuntu - PyQt 程序在 Ubuntu 上启动很慢

> ID：10059859
> 
> 赞同：0
> 
> 时间：2012-04-08T02:06:04.233
> 
> 标签：ubuntu, pyqt

当我在终端中运行以下 PyQt 代码示例时：

```
#coding = utf8
import sys
from PyQt4 import QtGui

app = QtGui.QApplication(sys.argv)
widget = QtGui.QWidget()
widget.resize(250, 150)
widget.setWindowTitle('simple')
widget.show()
sys.exit(app.exec_()) 
```

我收到以下消息：

```
Got bus address:  "unix:abstract=/tmp/dbus-i0C7rhmhFB,guid=6b91faa5b449dbb3ca941d6e0000001d" 
Connected to accessibility bus at:  "unix:abstract=/tmp/dbus-i0C7rhmhFB,guid=6b91faa5b449dbb3ca941d6e0000001d" 
Registered DEC:  true 
Error in contacting registry 
"org.freedesktop.DBus.Error.NoReply" 
"Did not receive a reply. Possible causes include: the remote application did not send a reply, the message bus security policy blocked the reply, the reply timeout expired, or the network connection was broken." 
Could not query active accessibility event listeners. 
Registered event listener change listener:  true 
```

窗口在大约 20 秒后显示。我认为显示一个空窗口应该很快。如何解决这个问题呢？

以下是版本信息：

*   Ubuntu 12.04 LTS 64 位
*   Python 2.7.3rc2
*   QT 4.8.0 和 PyQT 4.9.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:41:47.093

在我的机器上，代码立即运行 - Kubuntu 11.10，KDE 4.8.2

我认为问题可能出在您的环境配置中，尤其是在您运行未发布的版本 - Ubuntu 12.04 时。

# class - 我如何创建一个类，以便可以使用等号为它分配一个值

> ID：10059862
> 
> 赞同：-3
> 
> 时间：2012-04-08T02:07:08.180
> 
> 标签：class, object, equals, assign

首先我为什么要这样做……嗯，我正在尝试学习编程，并认为理解这一步将进一步帮助我。所以请帮忙。就像 int 在几种语言中可以做到的那样......

**诠释 x;**

**x=2；**

那么我该怎么做：

**abc x;**

**x=2；**

填写这个

**abc类{**

*//“我在这里做什么才能使从中创建的任何对象都能够以这种方式分配值……不像 abc(2)；我可以这样做。”*

**}**

解决方案：

```
// Example program
#include <iostream>
#include <string>

class ABC {
    private:
        int x;

    public:

        int getX() const  {
            return this->x;
        }

        ABC(int y) {
         this->x = y;
        }

        friend std::ostream& operator <<(std::ostream& outputStream, const ABC& p);

        ABC operator=(const int &b) {
            this->x = b;
            return this->x;
        }
};

std::ostream& operator <<(std::ostream& outputStream, const ABC& p){
    outputStream << p.getX();
    return outputStream;
}

int main() {
    ABC s = 1;
    std::cout << s << "\n";

    s = 4;
    std::cout << s << "\n";

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T02:16:19.207

至少在 C++ 中，它隐含在单参数构造函数中。在 JavaScript 中，这是不可能的。C++：

```
class SomeClass {
public:
    int x;

    SomeClass(int x) {
        this->x = x;
    }
};

int main(int argc, char *argv[]) {
    SomeClass s = 5;

    cout << s.x << "\n"; // 5

    s = 17;

    cout << s.x << "\n"; // 17

    return 0;
} 
```

[这是一个演示。](http://codepad.org/xWHNG9o2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T02:26:05.673

对象不太像那样工作。一个 int 可以分配给 7，因为一个 int 是一个原始类型，而 7 是一个原始类型。一个对象是不同的。一个对象只能分配给相同类型的对象。7 不是一个对象。它只是一个数字。

对象是实例变量和方法的集合。这可以防止您将其分配给原始类型，例如 int，它只是位的集合。唯一可以分配对象的是相同类型的对象，或者转换为该类型的对象。

# javascript - JavaScript 是否具有点、矩形等几何基元？

> ID：10059870
> 
> 赞同：4
> 
> 时间：2012-04-08T02:10:31.293
> 
> 标签：javascript, canvas, drawing, geometry

JavaScript 是否有像点和矩形这样的几何图元，还是我需要自己定义？

或者，如果有一个好的、简单的库，它会很有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T02:13:21.083

Javascript 不是真的。有很多可用的图形库。您可能会查看[processing.js](http://processingjs.org/)和[raphael](http://raphaeljs.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-14T17:11:00.757

有一种方法可以仅使用 HTML、CSS 绘制几何图像。甚至不用 javascript。我知道一个工具可以帮助你创建你想要的任何几何图像，它会给你源 HTML 和 CSS 代码。非常酷工具。这是链接

[http://www.w3docs.com/tools/html-geometric-images/](http://www.w3docs.com/tools/html-geometric-images/)

# ios - 如何在 GLKit for iOS 中使用 VBO？

> ID：10059874
> 
> 赞同：0
> 
> 时间：2012-04-08T02:11:02.487
> 
> 标签：ios, glkit

我正在使用 GLKit（OpenGL ES 2）为 iOS 制作游戏，并且想使用 VBO 和 VAO，因为我认为它们会大大提高性能（当我在其中测试我的应用程序时，Instruments 会推荐它）。

我有很多纹理对象实际上不会改变位置、大小、纹理等，所以我认为 VBO 会有所帮助。

目前我正在使用 GLKVector2 数组来存储顶点和纹理坐标数据，我不太确定如何从这里转到 VBO。

有人能帮忙吗？

干杯，尼克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T02:22:00.540

您可以将它们直接传递给`glBufferData ()`，如下所示：

```
GLKVector2    objects[k];
// ... Fill out your objects vertices in objects
GLuint buffer = 0;
glGenBuffers (1, &buffer);
glBindBuffer (GL_ARRAY_BUFFER, buffer);
glBufferData (GL_ARRAY_BUFFER, sizeof (objects), objects, GL_STATIC_DRAW);
glEnableClientState (GL_VERTEX_ARRAY);
glVertexPointer (2, GL_FLOAT, sizeof (GLKVertex2), 0); 
```

这告诉 OpenGL 生成一个缓冲区并绑定它。`glBufferData()`实际上将其上传到卡上。调用`glVertexPointer ()`说明您要从数组中的哪个位置开始提取顶点。当您使用 VBO 时，最后一个参数中的指针变为偏移量。

编辑：对不起 - 填写了一些细节。脑袋放了个屁。[有关详细信息，请参见此处](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/OpenGL-MacProgGuide/opengl_vertexdata/opengl_vertexdata.html)。

# php - 两种不同的功能，一种有效，一种称为非对象

> ID：10059875
> 
> 赞同：0
> 
> 时间：2012-04-08T02:11:12.417
> 
> 标签：php, mysql, codeigniter

我有两个功能`getCompanyDetails`和`getHostingDetails`

第一个数据库`getCompanyDetails`工作正常，但`getHostingDetails`显示

`Trying to get property of non-object`

**获取公司详细信息：**

*控制器：* `$data['companyName'] = $this->quote->getCompanyDetails()->companyName;`

*模型：*

```
public function getCompanyDetails()
{
    $this->db->select('companyName,companySlogan,companyContact,
                       companyEmail,companyWebsite,companyPhone,
                       companyFax,companyAddress');

    $this->db->from('companyDetails');
    $result = $this->db->get();

    if($result->num_rows()<1)
    {
        return FALSE;
    }else{
        return $result->row();
    }
} 
```

**获取主机详细信息：**

*控制器：*

`$data['hostingRequired'] = $this->quote->getHostingDetails()->hostingRequired;`

*模型：*

```
public function getHostingDetails()
{
    $this->db->select('hostingRequired,domainRequired,domainToBeReged,
                       domaintoBeReged0,domainTransfer,domainToBeTransfered,
                       domainToBeTransfered0,currentHosting');

    $this->db->from('hostingDetails');
    $result = $this->db->get();

    if($result->num_rows()<1)
    {
        return FALSE;
    }else{
        return $result->row();
    }               
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T02:17:43.040

那么在您的函数中，如果没有返回行，`get`您的代码可能会返回您。`false`您可能需要在检索详细信息之前进行检查。例子：

```
$details = $this->quote->getHostingDetails();
if($details){
    $data['hostingRequired'] = $details->hostingRequired;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T02:17:51.877

好吧，一个方法返回一个对象 from`$result->row()`和另一个`false`. 您不能在`false`.

`false`没有找到记录时返回。所以你需要在使用它之前检查返回值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T02:19:08.427

问题可能是您如何在控制器中使用这些功能。如果其中任何一个返回 FALSE，则

```
$this->quote->getHostingDetails()->hostingRequired; 
```

会给你错误。尝试

```
if ($row = $this->quote->getHostingDetails()) {
    echo $row->hostingRequired;
} 
```

# monogame - MonoGame iPhone iPad 设置

> ID：10059877
> 
> 赞同：2
> 
> 时间：2012-04-08T02:12:26.303
> 
> 标签：monogame

我最近将一个 WP7 XNA 应用程序迁移到 MonoGame。当我构建时，我收到一条错误消息，说没有图形设备管理器。这是代码：

MonoGame.Framework.MacOS > Game.cs

```
 private GraphicsDeviceManager graphicsDeviceManager
    {
        get
        {
            if (_graphicsDeviceManager == null)
            {
                _graphicsDeviceManager = (IGraphicsDeviceManager)
                    Services.GetService(typeof(IGraphicsDeviceManager));

                if (_graphicsDeviceManager == null)
                    throw new InvalidOperationException ("No Graphics Device Manager");
            }
            return (GraphicsDeviceManager)_graphicsDeviceManager;
        }
    } 
```

看来我的游戏课永远不会开始。我为游戏创建了一个 MacOS 项目。我用错了吗？我正在按照以下步骤制作 iPad / iPhone 游戏：[http ://www.facepuncher.com/blogs/10parameters/?p=42](http://www.facepuncher.com/blogs/10parameters/?p=42)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:01:52.137

如果您创建一个 MacOS 项目，它将尝试以 MacOS 为目标。如果你安装了 MonoTouch，你应该能够创建一个 iOS 项目，它允许你以 iPhone/iPod/iPad 为目标。

您发布的网站上的说明适用于 MacOS 项目。

我们希望在不久的将来包含 MonoGame 项目模板。

我希望这有帮助。

# actionscript-3 - 在 Flash CS5/Actionscript 3 中为 Flash 游戏编程多面墙

> ID：10059879
> 
> 赞同：0
> 
> 时间：2012-04-08T02:13:00.053
> 
> 标签：actionscript-3, flash-cs5

我正在尝试编写一个利用所有四个方向移动角色的 Flash 游戏。（即按下向上移动角色向北、向下向南等） 游戏中的角色实际上并没有移动，而是背景移动以模拟移动。不过，我需要弄清楚如何对墙壁进行编程。我有识别碰撞的代码，但最好的方法是什么？这是我的代码：

```
stage.addEventListener(Event.ENTER_FRAME,handleCollision);

function handleCollision( e:Event ):void{

    if(hero.hitTestObject(wall))
       {
           wall.x-=5;
           Background.x-=5;
       }
} 
```

这会识别碰撞并阻止背景和墙壁移动，但这仅适用于角色从右侧撞到墙壁时。我是否必须将此代码插入每一面墙并根据情况进行调整？或者有没有一种更简化的方式来处理墙壁，这样我就可以将编码保持在最低限度？

更新：我尝试使用 Jason 使用数组来跟踪墙壁的想法，但现在我遇到了另一个问题。到目前为止，这是我的代码：

```
stage.addEventListener(Event.ENTER_FRAME,onenter); 
```

var wall:Array = [北墙，南墙，东墙，西墙]；

函数 onenter(e:Event):void {

```
if(Key.isDown(Key.RIGHT))
{
    Background.x-=5;
    hero.scaleX=1;
    for each(var wall:MovieClip in walls)
    {
        Northwall.x-=5;
        Southwall.x-=5;
        Eastwall.x-=5;
        Westwall.x-=5;
    }
    hero.gotoAndStop('walking sideways');
}
else if(Key.isDown(Key.LEFT))
{
    Background.x+=5;
    hero.scaleX=-1;
    for each(var walls0:MovieClip in walls)
    {
        Northwall.x+=5;
        Southwall.x+=5;
        Eastwall.x+=5;
        Westwall.x+=5;
    }
    hero.gotoAndStop('walking sideways');
}
else if(Key.isDown(Key.DOWN))
{
    Background.y-=5;
    for each(var walls1:MovieClip in walls)
    {
        Northwall.y-=5;
        Southwall.y-=5;
        Eastwall.y-=5;
        Westwall.y-=5;
    }
    hero.gotoAndStop('walking down');

}
else if(Key.isDown(Key.UP))
{
    Background.y+=5;
    for each(var walls2:MovieClip in walls)
    {
        Northwall.y+=5;
        Southwall.y+=5;
        Eastwall.y+=5;
        Westwall.y+=5;
    }
    hero.gotoAndStop('walking up');
}
else
{
    hero.gotoAndStop('still 1');
}

 for each (var walls:MovieClip in walls) {  
   if (hero.hitTestObject(Northwall))
{
    Background.y-=5;
}
else if (hero.hitTestObject(Southwall))
{
    Background.y+=5;
}
else if (hero.hitTestObject(Westwall))
{
    Background.x-=5;
}
else if (hero.hitTestObject(Eastwall))
{
    Background.x+=5;
} 
```

代码编译，一切运行，但墙没有注册。我认为这与 if/else 语句中的移动代码有关。我认为墙壁是随着角色移动，而不是随着背景移动，这意味着我的角色永远不会到达墙壁来注册热门。我怎样才能编写代码让墙壁随着背景移动，这样我就可以实际测试我是否可以击中它们？

更新 2：我尝试使用 Jason 在我自己的程序中提供的代码，并且效果很好。角色移动并且可以撞墙，并且大多数移动代码按预期运行。但是，似乎只有东墙功能正常。南墙似乎从侧面注册，当我试图从北方击中它时表现得很奇怪。当然，我希望它从北方而不是从侧面注册，并具有与我撞到东墙时相同的效果。Northwall 和 Westwall 似乎也根本没有注册。这是完全实现的代码：

```
var walls:Array = [Northwall, Southwall, Eastwall, Westwall];

stage.addEventListener(KeyboardEvent.KEY_DOWN,keydownHandler);
function keydownHandler(event:KeyboardEvent):void
{
    switch (event.keyCode)
    {
        case Keyboard.RIGHT:
            moveWalls(-5, 0);
            Background.x-=5;
            hero.scaleX=1;
            hero.gotoAndStop('walking sideways');
            break;
        case Keyboard.LEFT:
            moveWalls(5, 0);
            Background.x+=5;
            hero.scaleX=-1;
            hero.gotoAndStop('walking sideways');
            break;
        case Keyboard.UP:
            moveWalls(0, -5);
            Background.y+=5;
            hero.gotoAndStop('walking up');
            break;
        case Keyboard.DOWN:
            moveWalls(0, 5);
            Background.y-=5;
            hero.gotoAndStop('walking down');
            break;
    }
}

function moveWalls(x:Number, y:Number):void
{
    for each (var wall:DisplayObject in walls)
    {
        wall.x += x;
        wall.y += y;
    }
}

stage.addEventListener(Event.ENTER_FRAME,frameHandler);
function frameHandler(event:Event):void
{
    for each (var wall:DisplayObject in walls)
    {
        if (hero.hitTestObject(wall))
        {
            switch (wall)
            {
                case Northwall:
                    moveWalls(0, -5);
                    Background.y-=5;
                    break;
                case Southwall:
                    moveWalls(0, 5);
                    Background.y+=5;
                    break;
                case Westwall:
                    moveWalls(-5, 0);
                    Background.x-=5;
                    break;
                case Eastwall:
                    moveWalls(5, 0);
                    Background.x+=5;
                    break;
            }
        }
    }
} 
```

我认为问题可能出在 hitTest 中。但我不确定。此外，如果我按住按钮，角色会遇到阻力，但如果按住足够长的时间，角色最终会完全穿过墙壁。如何阻止角色穿墙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T02:27:36.590

您可以保留所有要测试的对象的集合，并遍历循环：

```
var walls:Array = [ northWall, southWall, westWall, eastWall ];

for each (var wall:DisplayObject in walls)
{
    if (hero.hitTestObject(wall))
    {
        // hit wall
    }
} 
```

或者，您可以通过命中测试它们绑定到的字符和路径来应用逆向：

```
if(!hero.hitTestObject(path))
{
    // left path
} 
```

否则，您可以测试预定义边界的坐标：

```
var bounds:Rectangle = new Rectangle(0, 0, 400, 400);

if ((hero.x < bounds.x) ||
    (hero.x > (bounds.x + bounds.width)) ||
    (hero.y < bounds.y) ||
    (hero.y > (bounds.y + bounds.height)))
{
    // left path
} 
```

**更新**：根据您的新示例，以下是您的功能请求的示例实现：

Flash Pro 中的示例设置：

![Flash Pro 设置](../Images/e763706947377b82aca36a297c44f349.png)

你可以从我的网站下载这个项目：

Flash Pro CS5.5：[http](http://www.jasonsturges.com/labs/stack-overflow/examples/hero/Hero-cs5.5.fla)
://www.jasonsturges.com/labs/stack-overflow/examples/hero/Hero-cs5.5.fla Flash Pro CS5：[http ://www.jasonsturges.com/labs/stack -overflow/examples/hero/Hero-cs5.fla](http://www.jasonsturges.com/labs/stack-overflow/examples/hero/Hero-cs5.fla)
SWF：[http ://www.jasonsturges.com/labs/stack-overflow/examples/hero/Hero.swf](http://www.jasonsturges.com/labs/stack-overflow/examples/hero/Hero.swf)

将墙壁作为影片剪辑，每个剪辑都有一个实例名称，您可以按如下方式实现您的操作：

```
import flash.ui.Keyboard;
import flash.events.Event;
import flash.events.KeyboardEvent;
import flash.display.DisplayObject;

// put walls in collection
var walls:Array = [ northWall, southWall, eastWall, westWall ];

// animtion listener
addEventListener(Event.ENTER_FRAME, frameHandler);

// key listeners
stage.addEventListener(KeyboardEvent.KEY_DOWN, keydownHandler);

// keyboard handling
function keydownHandler(event:KeyboardEvent):void
{
    switch (event.keyCode)
    {
        case Keyboard.RIGHT:
            moveWalls(-5, 0);
            break;
        case Keyboard.LEFT:
            moveWalls(5, 0);
            break;
        case Keyboard.UP:
            moveWalls(0, -5);
            break;
        case Keyboard.DOWN:
            moveWalls(0, 5);
            break;
    }
}

// utility to move all walls
function moveWalls(x:Number, y:Number):void
{
    for each (var wall:DisplayObject in walls)
    {
        wall.x += x;
        wall.y += y;
    }
}

// animation handler
function frameHandler(event:Event):void
{
    for each (var wall:DisplayObject in walls)
    {
        if (hero.hitTestObject(wall))
        {
            switch (wall)
            {
                case northWall:
                    moveWalls(0, -5);
                    break;
                case southWall:
                    moveWalls(0, 5);
                    break;
                case westWall:
                    moveWalls(-5, 0);
                    break;
                case eastWall:
                    moveWalls(5, 0);
                    break;
            }
        }
    }
} 
```

# java - 将 JFrame 转换为 JApplet

> ID：10059885
> 
> 赞同：2
> 
> 时间：2012-04-08T02:14:38.583
> 
> 标签：java, deployment, applet, jframe, japplet

我有一个运行良好的 JFrame 应用程序。但是现在我想将它作为 Applet 在网络上运行。这就是我所做的：

```
import MyPackage.*;

import javax.swing.*;
import javax.swing.event.*;
import java.awt.*;
import java.awt.event.*;

public class MyName extends JApplet
{

     public void init() {
        setSize(600,450);
        new MyName()
     }

    public MyName() {
        JShellFrame frame = new JShellFrame(true, null, null);
        frame.setVisible(true);
    }

} 
```

如何制作一个 html 文件来运行这个小程序？另外，我有一个小程序需要的外部 jar 文件。小程序不需要main方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T03:22:55.023

查看[Applet 入门](http://docs.oracle.com/javase/tutorial/deployment/applet/getStarted.html)。它涵盖了相关的[方法](http://docs.oracle.com/javase/tutorial/deployment/applet/appletMethods.html)和[生命周期](http://docs.oracle.com/javase/tutorial/deployment/applet/lifeCycle.html)。它还提到`main`了方法：

> 与 Java 应用程序不同，applet 不需要实现 main 方法。

[部署](http://docs.oracle.com/javase/tutorial/deployment/applet/deployingApplet.html)部分涵盖 HTML 文件详细信息。对于依赖 jar，您可以在标签的`archive`属性中指定多个 jar 。`applet`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T05:41:26.427

> 但是现在我想在网络上运行它..

然后放弃这些废话并使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)从链接启动框架。我说“废话”有两个原因。

1.  JWS 从 Java 1.2 开始就已经存在，最近几天在这些论坛中已经多次讨论了有关 applet 的问题。看来你没有做太多的研究。
2.  在上面显示的“庞大”的 2 行小程序代码中，其中一行是不明智的，另一行要么毫无意义，要么会冒着产生堆栈溢出错误的风险（不会费心尝试找出哪个）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-29T13:39:02.963

这是一些可以工作的html：

`<applet archive = "appName.jar" width = 900 height = 506 code = "main.class"/>`

您可以根据应用需要的大小更改宽度和高度。还要确保将 url 作为 jar 的路径。

# python - 如何将关键字参数传递给 reactor.callLater

> ID：10059886
> 
> 赞同：4
> 
> 时间：2012-04-08T02:14:41.793
> 
> 标签：python, twisted

我想用reactor.callLater 调用一个函数，方法是通过关键字传递所有变量，而不是通过索引传递。

```
reactor.callLater(0, some_function, kw={'foo':'bar'}) 
```

这给出了一个错误，因为 kw 不是预期的

```
...
File "C:\App\Python27\lib\site-packages\twisted\internet\base.py", line 800, in runUntilCurrent
    call.func(*call.args, **call.kw)
exceptions.TypeError: function_result() got an unexpected keyword argument 'kw' 
```

这些是文档： [http ://twistedmatrix.com/documents/8.1.0/api/twisted.internet.interfaces.IReactorTime.html#callLater](http://twistedmatrix.com/documents/8.1.0/api/twisted.internet.interfaces.IReactorTime.html#callLater)

我能做些什么呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T02:20:15.660

```
reactor.callLater(0, some_function, foo="bar") 
```

当一个函数签名说`**kw`他们只是将它们作为键值参数（命名）传递时。如果您直接调用该函数，您在此处传递的内容应该正是您将传递的内容。

# javascript - 检测 Scroll 何时到达页面底部 [ 不带 jQuery ]

> ID：10059888
> 
> 赞同：16
> 
> 时间：2012-04-08T02:15:00.810
> 
> 标签：javascript, scroll

我想在滚动到达页面底部时发出警报，如下所示：

```
$(function(){
  $(document).scroll(function() {
    if($(document).scrollTop() == 0) alert("top");
  })
}) 
```

但是没有 jQuery，并且在到达底部时会发出警报。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-09-30T19:44:58.553

```
document.addEventListener('scroll', function (event) {
    if (document.body.scrollHeight == 
        document.body.scrollTop +        
        window.innerHeight) {
        alert("Bottom!");
    }
}); 
```

JSFiddle在这里：http: [//jsfiddle.net/cSer6/](http://jsfiddle.net/cSer6/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-01T16:08:19.390

这在 IE 中对我有用

```
document.onscroll = function() {
    if(document.documentElement.scrollTop + window.innerHeight == document.documentElement.scrollHeight)
    {
        alert('bottom');
    }
} 
```

[http://jsfiddle.net/cSer6/46/](http://jsfiddle.net/cSer6/46/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-08T02:29:45.517

```
if(window.addEventListener){
    window.addEventListener('scroll',scroll)
}else if(window.attachEvent){
    window.attachEvent('onscroll',scroll);
}

function scroll(ev){
    var st = Math.max(document.documentElement.scrollTop,document.body.scrollTop);
    if(!st){
            console.log('top');
    }else if((st+document.documentElement.clientHeight)>=document.documentElement.scrollHeight ){
           console.log('bottom');
    }
} 
```

示例：http: [//jsfiddle.net/ampersand/AEnzJ/](http://jsfiddle.net/ampersand/AEnzJ/)

在 chrome 17/18、safari 5、ff 10/11.0 即 7-9 中使用[http://browserling.com](http://browserling.com)进行了测试

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-08T02:22:33.857

```
document.onscroll = function() {
    if(!document.body.scrollTop){
        alert('top');
    }
} 
```

JSFiddle[演示](http://jsfiddle.net/f8EWq/)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-08T22:14:04.093

```
function addEvent(node, type, callback) {
    if('addEventListener' in node) {
        node.addEventListener(type, callback, false);
    } else {
        node.attachEvent('on' + type, callback);
    }
}

addEvent(window, 'scroll', (function() {
    // https://developer.mozilla.org/en/DOM/window.scrollY#Notes
    var stObj, stProp;
    if('scrollY' in window) { // CSSOM:
        // http://www.w3.org/TR/cssom-view/#extensions-to-the-window-interface
        stObj = window;
        stProp = 'scrollY';
    } else if('pageYOffset' in window) { // CSSOM too
        stObj = window;
        stProp = 'pageYOffset';
    } else {
        stObj = document.documentElement.clientHeight ?
            document.documentElement : document.body;
        stProp = 'scrollTop';
    }

    var node = document.documentElement.clientHeight ?
        document.documentElement :
        document.body; // let's assume it is IE in quirks mode
    var lastSt = -1;
    return function(e) {
        if(lastSt !== stObj[ stProp ] && // IE <= 8 fires twice
           node.scrollHeight === stObj[ stProp ] + node.clientHeight) {
            alert('bottom');
        }
        lastSt = stObj[ stProp ];
    };
})()); 
```

它已在 Firefox 11、Chrome 17、IE 9（X-UA 兼容：8、7、5）和 Opera 11.60 上成功测试。

# python - Rope and Yasnippet in Emacs

> ID：10059893
> 
> 赞同：1
> 
> 时间：2012-04-08T02:16:54.703
> 
> 标签：python, emacs, elisp, rope, yasnippet

I setup python support for emacs using rope and yasnippet by following the tutorial given at [http://www.enigmacurry.com/2009/01/21/autocompleteel-python-code-completion-in-emacs/#disqus_thread](http://www.enigmacurry.com/2009/01/21/autocompleteel-python-code-completion-in-emacs/#disqus_thread). I declared a string variable `a_str="Hello"`. Now when i type a_str. and press tab, i get the following message in the minibuffer

```
Symbol's function definition is void: yas/snippet-table 
```

I was getting a drop-down earlier but suddenly this has stopped working. Any reason why this could be happening ?

Also,i would like to know the meaning of the line

```
(setq yas/trigger-key (kbd "C-c <kp-multiply>")) 
```

Please Help Thank You

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T02:30:25.317

```
(setq yas/trigger-key (kbd "C-c <kp-multiply>")) 
```

means: generate the internal representation for the key binding described by the string `C-c <kp-multiply>`, and assign that value to the variable `yas/trigger-key`.

(`<kp-multiply>` would generally be the `*` key on the keypad.)

You could then subsequently use `yas/trigger-key` in key-bindings. e.g.:

```
(local-set-key yas/trigger-key 'some-function) 
```

As for your main error, either something is not being loaded correctly (such that `yas/snippet-table` does exist in code, but isn't being loaded before it's used), or else there is an incompatibility between Yasnippet and another library which is trying to use it (presumably autocomplete in this case).

I see at the bottom of the comments thread you linked to that there was discussion at the time about a similar error being caused by changes in autocomplete 0.2 over 0.1\. I also see that the tutorial author links to his git repository for his own Emacs config, and is still using version 0.1 of autocomplete there.

So I'd suggest checking your versions of each library first. The tutorial uses:

*   pymacs 0.23
*   yasnippet 0.5.9
*   autocomplete 0.1

The Rope version is unclear, and described only as "the very latest development version (as of December '08)"

Alternatively, you might prefer to grab the versions directly from that git repository (especially as the version of yasnippet in the repo says that it's version 0.2.2, not 0.5.9).

If you get it working with those, you could then try upgrading things (and perhaps adding a comment to that thread listing a set of compatible versions, if you come up with a working combination which is more recent).

Failing that, here's another git repository which might be useful:

[https://github.com/gabrielelanaro/emacs-for-python/](https://github.com/gabrielelanaro/emacs-for-python/)

# java - 上传文件并将它们存储到文件夹中？

> ID：10059896
> 
> 赞同：0
> 
> 时间：2012-04-08T02:18:00.860
> 
> 标签：java, jsp

我正在尝试对我的应用程序进行编程以上传图像，然后将它们存储在一个文件夹中。它打印出文件的详细信息，但不将其存储到文件夹中。我正在关注此处的用户指南和答案，但我仍然不知道我做错了什么？

```
import java.io.File;
import java.util.List;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.fileupload.FileItem;
import org.apache.commons.fileupload.FileUploadException;
import org.apache.commons.fileupload.disk.DiskFileItemFactory;
import org.apache.commons.fileupload.servlet.ServletFileUpload;

public class UploadAvatarCommand implements Command {

    @Override
    public String execute(HttpServletRequest request,
            HttpServletResponse response) {

        DiskFileItemFactory factory = new DiskFileItemFactory();
        String contextRoot = request.getServletContext().getRealPath("/");
        factory.setRepository(new File(contextRoot + "WEB-INF/tmp"));
        ServletFileUpload upload = new ServletFileUpload(factory);

        try {
            List<FileItem> items = upload.parseRequest(request);
            for (FileItem item : items) {
                if (!item.isFormField()) {
                    // Process form file field (input type="file").
                    System.out.println("Field name: " + item.getFieldName());
                    System.out.println("File name: " + item.getName());
                    System.out.println("File size: " + item.getSize());
                    System.out.println("File type: " + item.getContentType());

                    String fileName = item.getName();
                    try {
                        File saveFile = new File(fileName);
                        saveFile.createNewFile();
                        item.write(saveFile);
                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
            }
        } catch (FileUploadException e) {
            try {
                throw new ServletException("Cannot parse multipart request.", e);
            } catch (ServletException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        }

        return "profile";
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:12:06.947

如果您没有任何错误，那么这段代码：

```
File saveFile = new File(fileName);
saveFile.createNewFile();
item.write(saveFile); 
```

在当前文件夹中创建一个具有名称`fileName`（只是一个简单的名称，如“file.txt”）的新文件。

如果您想知道哪个是您当前的工作文件夹，请尝试打印：

```
System.out.println("Current folder: " + (new File(".")).getCanonicalPath()) 
```

所以你可以检查文件是否在这里。

然后，如果您想将文件放在您想要的文件夹中，您可以使用：

```
File saveFile = new File("/my/upload/folder",fileName); 
```

并将“/my/upload/folder”替换为您喜欢的文件夹的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-11T18:03:21.947

这个程序运行良好。

这个变量在顶部

```
 private static final String DATA_DIRECTORY = "data"; 
```

这是主要程序

```
 DiskFileItemFactory factory = new DiskFileItemFactory();
    String contextRoot = getServletContext().getRealPath("/");

    factory.setRepository(new File(contextRoot));
    ServletFileUpload upload = new ServletFileUpload(factory);

    try {
        List<FileItem> items = upload.parseRequest(request);
        for (FileItem item : items) {
            if (!item.isFormField()) {
                // Process form file field (input type="file").
                System.out.println("Field name: " + item.getFieldName());
                System.out.println("File name: " + item.getName());
                System.out.println("File size: " + item.getSize());
                System.out.println("File type: " + item.getContentType());

                String fileName = item.getName();
                try {
                    String uploadFolder = getServletContext().getRealPath("")+ File.separator + DATA_DIRECTORY;
                    String filePath = uploadFolder + File.separator + fileName;
                    File saveFile = new File(filePath);                        
                    saveFile.createNewFile();
                    item.write(saveFile);                        

                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

        }
    } catch (FileUploadException e) {
        try {
            throw new ServletException("Cannot parse multipart request.", e);
        } catch (ServletException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
    } 
```

# android - Android SDK 在 Project Run 中无法获取 XML 和 ArrayIndexOutOfBounds 异常

> ID：10059898
> 
> 赞同：0
> 
> 时间：2012-04-08T02:19:20.473
> 
> 标签：android

我的android SDK有两个问题。第一个是安装sdk manager后我无法在线安装新的平台、工具、sysimage等，它给出了以下错误：

> 获取 Validate XML XML 验证失败。Line -१:-१, Error: org.xml.sax.SAXParseException: schema_reference.4: Failed to read schema document 'null', 因为 1) 找不到文档；2) 文件无法读取；3）文档的根元素不是<>。已成功获取加载项列表 获取 URL：验证 XML：XML 验证失败。Line -१:-१, Error: org.xml.sax.SAXParseException: schema_reference.4: Failed to read schema document 'null', 因为 1) 找不到文档；2) 文件无法读取；3）文档的根元素不是<>。获取 URL：验证 XML：无法获取 URL，原因：addon.xml 完成加载包。

*   我试过强制https。
*   http 代替 https。

我正在使用 DSL 上网，而*不是使用任何代理连接到互联网*。为了消除这个问题，我也尝试了代理服务器，但都是徒劳的。

**所以我离线安装了所有更新 APD v2 帮助我下载。**

我将 Eclipse 和 Netbeans 都用于开发。一切工作正常，直到我尝试运行一个新项目甚至是示例项目。

在 Eclipse 上，它给了我以下错误：

![在此处输入图像描述](../Images/a49db9b2f4e6e4cddc4e5f438b7112e1.png)

netbeans 也有同样的问题：

> 创建 redLight-debug-unaligned.apk 并使用调试密钥对其进行签名... D:\Android\android-sdk\tools\ant\build.: 执行此行时出现以下错误：D:\Android\android- sdk\tools\ant\build.: 执行此行时出现以下错误：D:\Android\android-sdk\tools\ant\build.: com.android.sdklib.build.ApkCreationException: java.lang.ArrayIndexOutOfBoundsException: 13

我是 android 应用程序开发的新手，并试图为 android 平台重建我的 Java 应用程序，但我被困在第一步。

请在这里帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:29:27.987

您的第一个问题的解决方案很简单：行 -१:-१，它显示您的 windows 操作系统语言设置为印地语 (IN_HI)。转到控制面板区域和语言选项将所有格式的语言更改为英语。重新启动机器并获取 xml。

我还面临第二个问题的解决方案尚未找到检查这个：[https ://groups.google.com/forum/?fromgroups#!topic/android-developers/BvO5g6RMamo](https://groups.google.com/forum/?fromgroups#!topic/android-developers/BvO5g6RMamo)

我还更新了 Android 问题中的错误： [http ://code.google.com/p/android/issues/detail?id=28824](http://code.google.com/p/android/issues/detail?id=28824)

# php - 如何使用 PHP 从网页中获取特定数据

> ID：10059902
> 
> 赞同：0
> 
> 时间：2012-04-08T02:20:46.023
> 
> 标签：php, regex

我试图使用 PHP 和 file_get_contents 以及正则表达式从网页中获取数据，但我似乎无法从页面中获取正确的数据。

这是我的代码，

```
<?php
   $homepage = file_get_contents('http://www.website.com');
   preg_match_all('/<p><b>(.*)<\ /b><br>(.*)<br>(.*)<\ /p>/ms', $homepage, $matches);
   $def = $matches[0];
   echo $def;
   ?> 
```

即使有与表达式匹配的 html 代码，我的正则表达式也没有提取任何内容。作为测试，我还尝试将第一个 preg_match 函数替换为以下函数。

```
preg_match_all('/<div>(.*)<\ /div>/ms', $homepage, $matches); 
```

这仅选取了页面上众多 div 标签中的 2 个。我的代码有什么问题，正确的编写方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T02:31:42.213

[您可以简单地使用 PHP 的Document Object Model](http://www.php.net/manual/en/book.dom.php)而不是使用 RegEx 。

```
$homepage = file_get_contents('http://www.website.com');
$DOM = new DOMDocument;
$DOM->loadHTML($homepage);
$items = $DOM->getElementsByTagName('div');
$def = $items->item(0)->nodeValue; 
```

（从[这个](https://stackoverflow.com/questions/3627489/php-parse-html-code)问题引用）。

# php - 在 PHP 中使用事件和函数调用与参数回显 javascript

> ID：10059903
> 
> 赞同：0
> 
> 时间：2012-04-08T02:20:50.167
> 
> 标签：php, javascript, html, echo, quotes

我想在 PHP 中回显以下内容：

```
echo "<td><p style='visibility: hidden' id='joindata$rowindex'>$joindata</p><a style='visibility: visible;' onclick='toggleDisplay('joindata$rowindex'); toggleDisplay('showjoindata$rowindex')' id='showjoindata$rowindex'>Show</a></td>"; 
```

但是由于嵌套的''所以它没有回显任何想法如何回显HTML元素，这些元素具有调用在PHP中具有参数的javascript函数的事件，将不胜感激，谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T02:23:35.647

只需使用双引号来分隔您的属性值，并在您的 PHP 字符串中转义它们：

```
echo "<td><p style=\"visibility: hidden\" id=\"joindata$rowindex\">$joindata</p><a style=\"visibility: visible;\" onclick=\"toggleDisplay('joindata$rowindex'); toggleDisplay('showjoindata$rowindex')\" id=\"showjoindata$rowindex\">Show</a></td>"; 
```

或者，您可以将行为与内容分开，然后动态添加事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T02:28:11.063

你必须添加一些双引号，试试这个：

```
echo "<td><p style=\"visibility: hidden\" id=\"joindata".$rowindex."\">$joindata</p><a style=\"visibility: visible;\" onclick=\"toggleDisplay('joindata".$rowindex."'); toggleDisplay('showjoindata".$rowindex."')\" id=\"showjoindata".$rowindex."\">Show</a></td>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T02:34:20.477

当您将视图与数据分开时，PHP 具有最佳的性能和可伸缩性。但是在这种情况下，您可以这样做：

```
<td>
    <p style="visibility: hidden" id="joindata<?php echo $rowindex; ?>">
        <?php echo $joindata; ?>
    </p>
    <a style="visibility:visible" onclick="toggleDisplay('joindata<?php echo $rowindex; ?>'); toggleDisplay('showjoindata<?php echo $rowindex; ?>')" id="showjoindata<?php echo $rowindex; ?>">Show</a>
</td> 
```

还请查看[jQuery](http://jquery.com)文档以避免对 javascript 函数进行硬编码。您的应用程序将运行得更快。

# mips - 代表 addi $s1, $0, 4 指令：记下控制信号的值

> ID：10059905
> 
> 赞同：3
> 
> 时间：2012-04-08T02:21:41.680
> 
> 标签：mips, computer-architecture

我正在做一个作业，我需要写下 5 条指令的控制信号的值，并试图首先找出示例（底部的代码）。我需要做的 5 条指令是

```
Address    Code        Basic                 Source

0x00400014  0x12120004  beq $16,$18,0x0004    15    beq $s0, $s2, exit
0x00400018  0x8e080000  lw $8,0x0000($16)     16    lw  $t0, ($s0)
0x0040001c  0x02118020  add $16,$16,$17       17    add $s0, $s0, $s1
0x00400020  0xae08fffc  sw $8,0xfffc($16)     18    sw  $t0, -4($s0)
0x00400024  0x08100005  j 0x00400014          19    j   loop 
```

他做的例子是 addi $s1,$0,4 。现在我有这个：

```
 Address    Code       Basic                 Source
    0x00400028 0x20110004 addi $16,$0,4         20 addi     $s1, $0, 4 
```

我认为基本列中的 4 是不正确的。什么是正确的答案？

这是他为此做的示例，下面是他所指的控制信号图：

```
##--------------------------
# Example
# addi  $s1, $0, 4
# Although not supported as in Figure 4.24, the instruction can be easily
# supported with minor changes in the control circuit.

instruction_address=0x00400028 
instruction_encoding=0x20110004

OPcode=0b001000

Jump=0
Branch=0
Jump_address=0x00440010    # not used in this instruction
Branch_address=0x0040003C  # not used in this instruction

Read_register_1=0b00000
Read_register_2=0b10001
Sign_extend_output=0x00000004 

ALUSrc=1            # pick the value from sign_extend_output
ALUOp=0b00          # assume the same value as load/store instruction
ALU_control_input=0b0010    # add operation, as in load/store instruction

MemRead=0
MemWrite=0
MemtoReg=0          # select the ALU result 

RegDst=0
Write_register=0b10001      #register number for $s1
RegWrite=1

##-------------------------- 
```

![在此处输入图像描述](../Images/0e49bd589261472afdb26559a42ee30c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T17:48:01.397

让我们检查第一条指令的细分：`beq $s0, $s2, exit`.

指令地址在上面的地址栏下给出：`0x00400014`。你也有编码：`0x12120004`. 编码是机器指令。让我们用二进制表示指令：`000100 10000 10010 0000000000000100`.

这是一条 I 型指令。第一组六位是操作码，第二组五位是源寄存器，第三组五位是临时寄存器，最后一组十六位是立即数。

那么操作码就是`0b000100`. 由于这是一条 I 型指令，我们不会跳转到目标，因此`Jump`信号是`0`. 但是，我们正在分支，所以`Branch`信号是`1`。

要找到`Jump_Address`，即使它被忽略，请检查最低有效 26 位：`10000 10010 0000000000000100`。由于地址是字对齐的，我们可以通过将跳转偏移量作为下一条指令和目标地址之间的有符号差来扩大可到达地址的范围。换句话说，如果我的目标地址`8`与下一条指令相距字节（PC 相对寻址），我将用它`2`来表示偏移量。这就是为什么我们必须将偏移量向左移动 2 位。所以我们最终得到`Jump_Address`=`10 00010 01000 0000000000010000`或`0x8480010`。

要找到`Branch_Address`将要使用的 ，请检查最低有效 16 位：`0000000000000100`。这是符号扩展并向左移动 2 位以获得：`0000000000000000 0000000000010000`或`0x00000010`. 这个立即值将被添加到程序计数器，它指向下一条指令：`0x00400018`. 所以我们最终以`Branch_Address`=结束`0x00400028`。我假设`exit`标签指向您在上面发布的五个指令之后的下一个指令，就在`j`指令之后。

寄存器很简单。`Read_register_1`=`0b10000`和`Read_register_2`= `0b10010`。

这`Sign_extend_output`只是立即字段符号扩展：`0x00000004`。

接通 ALU 控制信号。`ALUSrc`控制寄存器文件和 ALU 之间的多路复用器。由于一条`beq`指令需要使用两个寄存器，所以我们需要`Read data 2`从寄存器文件中选择寄存器。我们没有像`addi`指令那样使用立即数字段进行 ALU 计算。因此，`ALUSrc`是`0`。

`ALUOp`和`ALU_control_input`是从操作码创建的硬连线值。`ALUOp`=`0b01`和`ALU_control_input`= `0b0110`。PG。323*计算机组织与设计，第 4 期。*由 Hennessey 和 Patterson*修订的版本和*[此](http://www.cise.ufl.edu/~mssz/CompOrg/Table4.3-MIPSdatapath-control.gif)网页有一个表格，其中包含用于`beq`指令的适当控制信号。PG。318 有一个带有 ALU 控制位映射的表。

`MemRead`并且因为`MemWrite`我们`0`没有访问内存；`MemToReg`是`X`（不关心），因为`MemWrite`是 0；`RegWrite`是`0`因为我们没有写入寄存器文件；`RegDst`是`X`因为`RegWrite`是 0；最后，要找到`Write_register`，取第 16-20 位（查看指令存储器和寄存器文件之间的多路复用器），它们是`0b10010`。

# php - 在我的支持票系统方面需要帮助

> ID：10059908
> 
> 赞同：0
> 
> 时间：2012-04-08T02:22:15.740
> 
> 标签：php

好的，所以我目前正在尝试创建一个支持票证系统，除了票证状态检查器之外，我已经完成了所有设置。这就是数据库的工作方式： ticknum = 创建票证后给客户的随机生成的数字 tickid = 自动递增的 id，没有实际使用状态 = 0 或 1 0=未回答 1=已回答 我如何在他们的位置创建一个小文本字段可以通过输入票号来查看票的状态吗？这是我到目前为止的代码（它不起作用）：

这是代码的链接：http: [//pastebin.com/iX63YWRH](http://pastebin.com/iX63YWRH)

请帮助我，我从中得到的只是一张空白的白页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T04:11:21.150

您在最后一个 if 条件中缺少一个结束 }。以后开启错误报告。– 迈克 B 4 月 8 日 2:30

# annotations - 我可以使用 Javassist 删除方法的修饰符吗？

> ID：10059910
> 
> 赞同：1
> 
> 时间：2012-04-08T02:22:27.297
> 
> 标签：annotations, javassist

每个人。

我有一个类文件。

```
public class ClsSync {
     public synchronized void biat(){
     }    
} 
```

我想把它改成

```
public  void biat(){   // delete the synchronized keyword
} 
```

我可以使用 Javassist 实现它吗？如何使用 javassist 向类文件的方法添加注释？欢迎任何建议！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:17:37.267

这应该可以解决问题

```
 ClassPool cp = ClassPool.getDefault();
    CtClass cc = cp.get("ClsSync");

    CtMethod cm = cc.getDeclaredMethod("biat");
    cm.setModifiers(Modifier.PUBLIC); 
```

只需使用[CtMethod#setModifiers()](http://www.csg.is.titech.ac.jp/~chiba/javassist/html/javassist/CtBehavior.html#setModifiers%28int%29)设置所需的掩码。

# ruby-on-rails - 在 Rails 中将文本插入到 link_to

> ID：10059913
> 
> 赞同：0
> 
> 时间：2012-04-08T02:24:00.267
> 
> 标签：ruby-on-rails

我有以下标签部分

```
%span.tag-label
  = link_to "#{tag}"  , :controller => "searches", :action => "search_tags", :search_type => search_type,
  :tag_type => tag_type, :tag =>"#{tag}" 
```

我将标签作为集合传递给部分：

```
= render "shared/tag_item", :collection => @listing.keyword_list, :as => :tag, 
:search_type => "Listing", :tag_type => nil 
```

出于某种原因，我收到了这个错误：

```
wrong number of arguments (0 for 1) 
```

在我的部分。

如果我只是将纯文本放在`link_to "text"` and :`tag =>"text"`那么它就可以了。为什么我的嵌入文本`"#{tag}"`在这种情况下不起作用？

谢谢你。 **更新**显示错误跟踪：`endered listings/show.html.haml within layouts/application (148.4ms) Completed 500 Internal Server Error in 232ms

```
ActionView::Template::Error (wrong number of arguments (0 for 1)):
    1: %span.tag-label
    2:   = link_to "#{tag.to_s}"  , :controller => "searches", :action => "search_tags", :search_type => search_type,
    3:   :tag_type => tag_type, :tag =>"#{tag.to_s}"
  <a href="txmt://open?url=file:///Users/app/views/shared/_tag_item.html.haml&amp;line=2&amp;column=1">app/views/shared/_tag_item.html.haml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T06:47:03.437

将局部变量传递给您的局部变量时，您必须将`render`方法传递给 key `:locals`。

```
 render "shared/tag_item", :collection => @listing.keyword_list, :as => :tag, :locals => { :search_type => "Listing", :tag_type => nil } 
```

虽然我不得不承认，但我希望这会给出 NameError 而不是 ArgumentError。您的代码中是否存在 search_type 或 tag_type 方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T02:29:42.930

不确定这是否会解决您的问题，但您不需要插入`tag`变量。你可以只写`link_to tag`and `:tag => tag`。

# java - 使用按钮将文本从文本字段移动到文本区域

> ID：10059915
> 
> 赞同：2
> 
> 时间：2012-04-08T02:24:08.337
> 
> 标签：java, user-interface, textarea, textfield

此代码编译并运行，但它不会从文本字段中复制文本，然后将其放入文本区域。

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class NameGameFrame extends JFrame
{

    static JTextField textfield = new JTextField(20);
    static JTextArea  textarea = new JTextArea(30,30);

    public static void main( String[] args)
    {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setTitle("Name Game");
        frame.setLocation(500,400);
        frame.setSize(800,800);

        JPanel panel = new JPanel(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();

        JLabel label = new JLabel("Enter the Name or Partial Name to search:");
        c.gridx = 0;
        c.gridy = 0;
        c.insets = new Insets(2,2,2,2);

        panel.add(label,c);

        c.gridx = 0;
        c.gridy = 1;
        panel.add(textarea,c);

        JButton button = new JButton("Search");
        c.gridx = 1;
        c.gridy = 1;
        panel.add(button,c);

        c.gridx = 1;
        c.gridy = 0;
        panel.add(textfield,c);

        frame.getContentPane().add(panel, BorderLayout.NORTH);
        frame.pack();
        frame.setVisible(true);

    }
        static class Action implements ActionListener
        {
        public void actionPerformed(ActionEvent e)
        {

           //This is the code that should  perform the task
            String name  = textfield.getText();
            textarea.append(name);
        }
    }
} 
```

我是 Java 编程新手，如果我的问题过于简单，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T03:09:00.870

在按钮声明之后将以下代码附加到您的程序中，
即。`JButton buuton = new JButton("Search");`

```
button.addActionListener(new ActionAdapter()
{
     public void actionPerformed(ActionEvent ae)
     {
          textarea.setText(textfield.getText());
     }
}); 
```

# java - Java Applet 中的文件权限错误

> ID：10059921
> 
> 赞同：1
> 
> 时间：2012-04-08T02:26:01.963
> 
> 标签：java, file, permissions, japplet

我有一个 Java 小程序，它需要使用一些文件夹来读取一些文件等。这些文件夹位于正确的位置，并且与 index.html（运行小程序）位于同一目录中。这是 JApplet 吐出的错误：

```
java.lang.reflect.InvocationTargetException
    at com.sun.deploy.util.DeployAWTUtil.invokeAndWait(DeployAWTUtil.java:116)
    at sun.plugin2.applet.Plugin2Manager.runOnEDT(Plugin2Manager.java:3541)
    at sun.plugin2.applet.Plugin2Manager.createApplet(Plugin2Manager.java:3072)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Plugin2Manager.java:1497)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.security.AccessControlException: access denied (java.io.FilePermission ./results read)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)
    at java.security.AccessController.checkPermission(AccessController.java:546)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    at java.lang.SecurityManager.checkRead(SecurityManager.java:871)
    at java.io.File.list(File.java:971)
    at java.io.File.listFiles(File.java:1129)
    at WhoHasMore.JShellFrame.getDefaultResultsFileName(JShellFrame.java:453)
    at WhoHasMore.JShellFrame.<init>(JShellFrame.java:28)
    at WhoHasMore.<init>(WhoHasMore.java:23)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at java.lang.Class.newInstance0(Class.java:355)
    at java.lang.Class.newInstance(Class.java:308)
    at sun.plugin2.applet.Plugin2Manager$13.run(Plugin2Manager.java:3060)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:199)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:677)
    at java.awt.EventQueue.access$000(EventQueue.java:85)
    at java.awt.EventQueue$1.run(EventQueue.java:638)
    at java.awt.EventQueue$1.run(EventQueue.java:636)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:647)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
Exception: java.lang.reflect.InvocationTargetException 
```

如您所见，错误似乎来自

```
Caused by: java.security.AccessControlException: access denied (java.io.FilePermission ./results read) 
```

为什么访问被拒绝从名为“结果”的文件夹中读取？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T02:47:57.267

您尝试使用的方法 ( `java.io.File.listFiles`) 不适用于 HTTP。您将需要选择另一种列出文件的方式，例如将文件列表放入已知 URL 的文本文件中并下载，或者将其作为 applet jarfile 的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T02:31:52.133

> 为什么访问被拒绝从名为“结果”的文件夹中读取？

Java 沙箱阻止小程序访问用户机器上的文件系统。

> 我该如何解决？

如果你希望你的小程序能够做这种事情，你必须：

*   创建一个签名的 JAR，并且
*   让用户接受证书/您的 JAR 文件作为受信任的应用程序。

# java - 客户端服务器通信故障

> ID：10059923
> 
> 赞同：0
> 
> 时间：2012-04-08T02:26:21.900
> 
> 标签：java, client-server

我在客户端和服务器之间弹跳对象时遇到问题。

**创建一个对象。更新一些字段。发送到服务器。（这部分有效）**

```
SomeObject thisObject = new SomeObject();
thisObject.setSomeValue(13);          // update object to be sent

PrintStream toServer = new PrintStream(sock.getOutputStream());

ObjectOutputStream oos = new ObjectOutputStream(toServer);

oos.writeObject(thisObject);
oos.close();

toServer.println(oos);               // send object to server
toServer.flush(); 
```

**在此之后，服务器进一步更新一些值并将其设置为 1919；**

```
ObjectInputStream objFromClient = new ObjectInputStream(new BufferedInputStream(
        sock.getInputStream()));

Served thisObject = (Served) objFromClient.readObject();
thisObject.setSomeValue(1919); 
```

**然后服务器将对象发送回客户端**

```
toClient = new PrintStream(sock.getOutputStream());
ObjectOutputStream oos = new ObjectOutputStream(toClient);

oos.writeObject(thisObject);

oos.close();
objFromClient.close();
sock.close(); 
```

但是当需要在客户端取回对象时..程序失败并出现 Socket Closed 异常

```
ObjectInputStream objFromServer = new ObjectInputStream(
    new BufferedInputStream(sock.getInputStream()));      //java.net.SocketException: Socket is closed

thisObject = (Served) objFromServer.readObject();
.... 
```

请帮助我理解问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T02:43:44.480

我的猜测是您使用相同`Socket`的方式从客户端发送和接收。当您关闭`ObjectOutputStream`客户端上的 时，这会关闭底层证券`OutputStream`，从而关闭`sock`。然后，当您尝试在下面重用它时，它已被关闭并引发异常。

相反，在关闭客户端代码中的资源之前等待事务完成（顺便说一下，这应该在一个`finally`块中完成）。或者，如果等待有问题，请改用新的`Socket`。

# javascript - 检测字符串是否包含模式

> ID：10059932
> 
> 赞同：1
> 
> 时间：2012-04-08T02:28:41.013
> 
> 标签：javascript, regex, string, replace

如何使用 JavaScript 检测字符串是否包含模式：

```
1\. input="[Lorem]foo";
2\. input="[ ]";
3\. input="[ipsum]foo";
4\. input="[dolor]foo1";
5\. input="[sit  ]foo2";
6\. input="[ amet]foo3";
7\. input="amet]foo3";
... 
```

脚本应该`input`以这种方式处理：

```
1\. string1='Lorem'; string2="foo";
2\. do nothing;
3\. string1='ipsum'; string2="foo";
4\. string1='dolor'; string2="foo1";
5\. do nothing;
6\. do nothing;
7\. do nothing;
... 
```

* * *

这将是脚本的一部分......

```
input  = "[asd]qwe";
input2 = "qwe";

processit(input);
processit(input2);

function processit(e){

   if(..???..){
      alert(string1);
      alert(string2);
   }
   else {
      return false;
   }

} 
```

感谢您的时间。

* * *

编辑：解决方案必须是跨浏览器

IE7+

火狐 3.6+

铬 7+ ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T05:53:05.007

[jsbin代码](http://jsbin.com/ipacib/2/edit)

此正则表达式应达到以下结果：`/\[([a-zA-Z0-9]+)\]([a-zA-Z0-9]+)/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T02:37:05.827

您可以利用`split()`捕获组的工作方式。

```
var pieces = str.split(/\[(\w+?)\]/); 
```

您可能会得到一些空字符串值。您可以使用...删除它们

```
pieces.filter(function(piece) { return piece; }); 
```

[js小提琴](http://jsfiddle.net/ZJzZ7/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T11:01:28.013

你的实际要求不清楚，所以我猜。以下将仅允许括号内和括号后的非空字母数字加下划线字符串，并尝试匹配整个字符串而不是更长字符串中的多次出现。

```
var input = "[Lorem]foo";
var string1, string2;
var result = /^\[(\w+)\](\w+)$/i.exec(input);
if (result) {
    string1 = result[1];
    string2 = result[2];
}
alert(string1 + ", " + string2); 
```

# java - 除了 JDK 之外，Minecraft 是否使用任何开源 Java 库？

> ID：10059935
> 
> 赞同：10
> 
> 时间：2012-04-08T02:29:01.620
> 
> 标签：java

我对用 Java 编写游戏很感兴趣，并想知道 Minecraft 是纯粹使用标准 JDK 编写的，还是使用开源（或商业）库。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T02:50:19.870

是的。Minecraft 将[LWJGL](http://lwjgl.org/)库用于图形和声音。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T02:55:47.673

`jinput`它也从[这里](http://java.net/projects/jinput)使用 Java Game Controller API

# java - 如何添加到数组列表

> ID：10059936
> 
> 赞同：0
> 
> 时间：2012-04-08T02:29:27.313
> 
> 标签：java, csv, arraylist

我正在开发一个从 csv 文件读取的项目，然后使用 StringTokenizer 来分割元素并将它们放入 JLabels 中。到目前为止，我已经完成了那部分。我有按钮可以滚动浏览每个位置，但我不确定如何在字段中键入并添加到数组中？

到目前为止，这是我程序的主要部分

```
// program reads in csvfile.
private void loadCarList() {
    try{
        BufferedReader CSVFile = new BufferedReader(new FileReader("car.txt"));
        String dataRow = CSVFile.readLine();

        while(dataRow != null){

        carList.add(dataRow);
        dataRow = CSVFile.readLine();

        }

        }catch(Exception e){
            System.out.println("Exception while reading csv file: " + e);                  
        }
    }
}

//this will click cycle through the elements in the Jlabels.

private void loadNextElement(){

    try {
        StringTokenizer st = new StringTokenizer((String)carList.get(position), ",");
        while(st.hasMoreTokens() && position <= carList.size() -1) {

            position ++;
            String CarID = st.nextToken();
            String DealerShipID = st.nextToken();
            String ColorID = st.nextToken();
            String Year = st.nextToken();
            String Price = st.nextToken();
            String Quantity = st.nextToken();

            tCarID.setText(CarID);
            tDealerShip.setText(DealerShipID);
            tColor.setText(ColorID);
            tYear.setText(Year);
            tPrice.setText(Price);
            tQuantity.setText(Quantity);
        }

    } catch(Exception e){
        JOptionPane.showMessageDialog(null, "youve reached the end of the list");
    }
} 
```

有没有一种更简单的方法，我可以输入我布置的 jlabels 并添加到数组中？

在这一点上我有点迷茫，我不确定如何进一步处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T04:07:00.693

您的问题似乎是您试图在一堂课内做太多事情。可以这样做，但组织得不是很好。

创建一个单独的类来保存单个 Car 记录。它应该是简单的“bean”或“POJO”类，通常由一些私有属性和公共 getter 和 setter（也称为访问器和修改器）组成。您的汽车列表将由这些对象组成。

```
public class Car {
  private String carID;
  ...
  private Integer quantity;

  public getCarID() {
     return this.carID;
  }
  ...
  public setQuantity(Integer quantity) {
    this.quantity=quantity;
  }
} 
```

将您的 Cars 列表定义为当前类的属性，并且每次将 Car 添加到列表中时，从 Car 类中构造它。

```
Car car=new Car();
car.setCarID(st.nextToken());
...
car.setQuantity(Integer.valueOf(st.nextToken()));
this.carList.add(car); 
```

# javascript - 存储 Google 地图标记并从中选择特定标记

> ID：10059940
> 
> 赞同：0
> 
> 时间：2012-04-08T02:30:32.073
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我有一个网页接收带有值的 AJAX 数据，`listing_id, lat, lng`使用`$.getJSON`. 回调函数采用这一系列值并为每组`listing_id, lat, lng`. 然后将标记推入一个数组`markers`并将其推入`listing_id`一个数组`markersListingId`。

```
var latLng = new google.maps.LatLng(json[i].lat, json[i].lng);
var marker = new google.maps.Marker({
                position: latLng,
                icon: base_url + 'images/template/markers/listing.png',
            });
markers.push(marker);
markersListingId.push(json[i].listing_id); 
```

**问题：**当我想选择与特定的标记相对应的特定标记时，就会出现问题`listing_id`，尤其是在更复杂的情况下，标记被删除并添加到`markers`数组中。

我可以让 for 循环遍历`markersListingId`数组中所有标记的 id，然后使用循环的索引`i`来获取`markers`数组中的标记，但这会使跟踪变得非常棘手。

```
var id_to_select = 1234;
for(var i = 0; i < markersListingId; i++) {
    if(markersListingId[i] == id_to_select) {
        markers[i].setMap(null);
    }
} 
```

**问题：**如何存储标记，以便我可以使用它轻松选择特定标记`listing_id`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T02:52:20.887

当您创建标记时，可以使用哈希表而不是使用数组吗？

[http://jsfiddle.net/j9J8x/](http://jsfiddle.net/j9J8x/)

```
 var markers = {};

    //id goes in place of 1234
    n = 1234;
    markers[n] = new google.maps.Marker({
      map: map,
      position: new google.maps.LatLng(0,0)
    });

    s = '2234'
    markers[s] = new google.maps.Marker({
      map: map,
      position: new google.maps.LatLng(20,0)
    });

    google.maps.event.addListener(map, 'click', function(event) {
      k = 1234;
      markers[k].setMap(null);
      markers['2234'].setMap(null);
    });
  } 
```

# java - 循环辅助

> ID：10059944
> 
> 赞同：0
> 
> 时间：2012-04-08T02:31:45.287
> 
> 标签：java, for-loop

所以我的 for 循环导致崩溃，我确切地知道为什么，但我不确定如何重写它以让它完成我想要完成的事情。

我试图让它每天从复利中取出钱，并在本月总计（设置为每 30 天）。用户输入他们尝试计算的天数。所以导致崩溃的原因是，如果他们放入了除能被 30 整除的东西之外的任何东西。

我很难想出一种重写它的方法，并且可以使用任何建议。如果他们输入 65 来计算 2 个月的价值，然后显示为第 3 个月的天数不足，我希望它做点什么。任何帮助总是非常感谢。提前致谢。

```
for (int i = 0; i < numDays; i+=30){
    double cash=0;
    for (int n=1; n < 30; n++){
        int currentDay;
        currentDay= n+i;
        cash=cash+dailyMoney[currentDay];
    }
    month++;
    if(monthlyChecks == null)
        monthlyChecks = "\nCheck on month "+month+": $"+df.format(cash)+"\n";
    else 
        monthlyChecks = monthlyChecks+"\nCheck on month "+month+": $"+df.format(cash)+"\n";
} 
```

numDays 是用户输入的天数......monthlyChecks 是一个字符串......dailyMoney[] 是保存每天金额的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T02:56:24.047

好的，在我看来，你试图用“第 3 个月的天数不足”做的事情是这样的：（假设 numDays 是一个整数）

```
numMonths = numDays / 30 //If numDays is an int, this will round down.
extraDays = numDays % 30

for (int i = 0; i < numMonths; i+=30){
   double cash=0;
   for (int n=1; n < 30; n++){
      int currentDay;
      currentDay= n+i;

      cash=cash+dailyMoney[currentDay];
   }
   month++;
   if(monthlyChecks == null)
      monthlyChecks = "\nCheck on month "+month+": $"+df.format(cash)+"\n";
   else 
      monthlyChecks = monthlyChecks+"\nCheck on month "+month+": $"+df.format(cash)+"\n";
   }
}

//Then at some point
Systme.out.println("Insuffiecent days for " + numMonth + 1 " months. " + 30 - extraDays " days short).") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T02:58:06.310

鉴于用户需要输入天数，可能类似于

```
int numMonths = numDays / 30;
int remainder = numDays % 30;

System.out.println ("Calculating for " + numMonths + " months");

if ( remainder != 0 ) {
    numDays -= remainder;
    System.err.println ("Insufficient days for month " + (numMonths + 1));
} 
```

这都应该放在代码的其余部分之前，包括（尤其是）`dailyMoney = new double[numDays]`部分之前。

# android - 从数组引用设置图像视图？

> ID：10059946
> 
> 赞同：0
> 
> 时间：2012-04-08T02:31:58.793
> 
> 标签：android, eclipse, imageview, drawable, android-imageview

我会保持这个简单。我想将一个`ImageView`in设置`AlertDialog`为数组中的一个图像我想设置的`Drawables` 图像`ImageView`可以通过访问 mImages[position] 来检索。

这是一个简短的解释（下面的完整解释）：简而言之 - 我需要一种方法将图像从我的主要活动传递到对话框，然后在取消`dismiss`对话框并确认设置系统壁纸（从主要活动传递的图像) 然后`finish();`是活动。

这是一个完整的解释：

用户会看到一个`Gallery`和`ImageView`上面的`Gallery`，它显示了具有焦点的图像的更大预览`Gallery`。

中显示的图像`Gallery`使用以下设置：

```
 // setup wallpaper array
private void findWallpapers() {
    mThumbs = new ArrayList<Integer>(24);
    mImages = new ArrayList<Integer>(24);

    final Resources resources = getResources();
    final String packageName = getApplication().getPackageName();

    addWallpapers(resources, packageName, R.array.wallpapers);
}

// setup array defining all wallpapers & define thumbnails
private void addWallpapers(Resources resources, String packageName, int list) {
    final String[] extras = resources.getStringArray(list);
    for (String extra : extras) {
        int res = resources.getIdentifier(extra, "drawable", packageName);
        if (res != 0) {
            final int thumbRes = resources.getIdentifier(extra + "_small",
                    "drawable", packageName);

            if (thumbRes != 0) {
                mThumbs.add(thumbRes);
                mImages.add(res);
            }
        }
    }
} 
```

`Button`按下“设置壁纸”后，`AlertDialog`应该会打开另一个预览图像，该图像的焦点位于`Gallery`. 将`AlertDialog`包含一个`TextView`说明，我们建议设置为墙纸的图像的预览，一个“好的”`Button`和一个“取消” `Button`。按“确定”`Button`将`ImageView`通过`InputStream`.

再次感谢！

```
 private void selectWallpaper(int position) {
    Toast.makeText(getBaseContext(), "Select Wallpaper", Toast.LENGTH_SHORT)
            .show();

    if (mIsWallpaperSet) {
        return;
    }

    mIsWallpaperSet = true;

    Context context = this;
    // CharSequence text = "Wallpaper Set!";
    // int duration = Toast.LENGTH_LONG;
    InputStream stream = getResources().openRawResource(
            mImages.get(position));
            final Dialog accept = new Dialog(context);
    accept.setContentView(R.layout.confirm);
    accept.setTitle("Please Confirm");
    TextView instructions = (TextView) accept.findViewById(R.id.textView1);
    instructions.setText("Would you like to set this as your wallpaper?");
    ImageView wallpreview = (ImageView) accept
            .findViewById(R.id.imageView1);
    wallpreview.createFromStream(stream, "test");
    // SETUP cancel (no btn) listener
    Button cancelbtn = (Button) accept.findViewById(R.id.button2);
    cancelbtn.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            accept.dismiss();
        }
    });
    // SETUP Yes Btn listener
    Button okbtn = (Button) accept.findViewById(R.id.button1);
    okbtn.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // dismiss being used as placeholder, actually setting wallpaper
            // will be added
            accept.dismiss();
        }
    });
    accept.show();
}

{
    ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T02:45:56.993

您可以使用布局充气器来扩充您的警报对话框布局，并将其分配给您的主要活动中的警报对话框的视图。您可以使用 findViewById() 为这些按钮设置 onClickListeners 侦听器。这将确保您的 onClickListener 可以看到 mImages。

```
final ArrayList<Integer> mImages=new ArrayList<Integer>();
final ImageView v=findViewById(R.id.imageView);

AlertDialog d=new AlertDialog.Builder(Main.this).create();
d.setView(getLayoutInflater().inflate(R.layout.dialogView,findViewById(R.id.ROOT_LAYOUT_IN_XML_ID),false));

((ImageView)d.findViewById(R.id.YOUR_VIEW_ID)).setImageResource(mImages.get(?));

((Button)d.findViewById(R.id.cancelButton)).setOnClickListener(new OnClickListener()
{
    d.dismiss();
});
((Button)d.findViewById(R.id.acceptButton)).setOnClickListener(new OnClickListener()
{
    v.setImageResource(mImages.get(?));
    d.dismiss();
}); 
```

# c - 合并2个数组时得到一个随机数

> ID：10059947
> 
> 赞同：1
> 
> 时间：2012-04-08T02:32:08.597
> 
> 标签：c

我想将 2 个数组合并为 1 个。例如：

*   A1= 1,1
*   A2= 2,2
*   那么 A3 = 1,2,1,2

例如：

*   A1= 1
*   A2= 2,2,2,2
*   那么 A3 = 1,2,2,2,2

例如：

*   A1= 1,1,1,1
*   A2= 2,2
*   那么 A3 = 1,2,1,2,1,1

在上一个示例中，当我运行我的代码时，我得到了 1,2,1,2,1,20。

在倒数第二个，我得到了 1,2,32767,2,2。

所以我想我有一个错误的代码。就在我完成了较短数组的元素并用较长的数组填充 A3 的所有其余部分之后。但我不知道为什么——你能帮帮我吗？

代码：

```
int *p3=arr3;   //arr3 is A3 for example, arr1 = A1..etc, all sizes are defined
int index;
int index1=0;
int index2=0;

for(index = 0; index< sizeofArr3 ; index++)
{
    if(index%2==0)
    {
        if(index1<=sizeofArr1)
            *(p3++) = arr1[index1++];
        else
            *(p3++) = arr2[index2++];
    }
    else 
    {
        if(index2<=sizeofArr2)
            *(p3++) = arr2[index2++];
        else
            *(p3++) = arr1[index1++];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T02:44:32.407

就是这一行：

```
if (index1 <= sizeofArr1) 
```

和 的等价`index2`物`sizeofArr2`。您应该使用`<`而不是`<=`.

原因与 C 的从零开始的数组有关。对于 size 的数组`N`，元素索引是`0`直通 的`N-1`。因为您允许它访问元素`N`（第`N+1`th 元素），所以您实际上是在调用未定义的行为。

从理论上讲，在这种情况下，实现可以做任何事情，包括毁灭宇宙。我猜你很幸运，它刚刚决定给你的结果有点不对劲:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T02:47:51.073

<= sizeOfArr1 and 2 实际上应该是 < sizeOfArr1 and 2 吗？你是如何计算你的尺寸的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T02:47:45.417

循环中的测试应该是：

```
if (index1 < sizeofArr1) 
```

使用`<`而不是`<=`，假设`sizeofArr1`是数组中元素数量的计数，而不是数组中的最大有效索引。当数组长度相同时，这种差异无关紧要（所以第一个序列是可以的），但是当数组长度不同时，它就很重要了。

# mysql - 无法在 Windows XP 中安装 MySQL 服务器

> ID：10059948
> 
> 赞同：0
> 
> 时间：2012-04-08T02:32:52.253
> 
> 标签：mysql, windows, windows-xp

我正在尝试在我的计算机上安装 MySQL，但我一直收到此错误：

![在此处输入图像描述](../Images/e1a7ba21e11cf3c80c94754b78258c8e.png)

![在此处输入图像描述](../Images/a76d20a8eedd941041c47ef2f4d4119d.png)

我已经卸载了 8 次，任何帮助将不胜感激。我在谷歌上搜索了这个，但任何解决方案都可以解决我的问题。

防火墙被禁用并且已经有端口异常`3306`，但错误仍然不断出现：

![在此处输入图像描述](../Images/8be4b8ab118a6164c820e67023d524b4.png) ![在此处输入图像描述](../Images/57bc80021072a9d87b4c701c339d657a.png) ![在此处输入图像描述](../Images/f6048f09c2b95108f912858bf49a4839.png)

**编辑：** 我遵循建议，但仍然无法在我的数据库中连接：

![在此处输入图像描述](../Images/5cbbfd756fa54774361d2b30eb5ce4b0.png)

这是数据库中用户的选择，如您所见，所有用户的密码都相同：

![在此处输入图像描述](../Images/474b63c0b12a2e2ffcd8823eb1e33248.png)

看起来我可以`ping`但仍然收到连接错误： ![在此处输入图像描述](../Images/9f99f3972b2ef6d89038ca8d45759245.png)

**编辑2：** 创建用户并尝试使用它们进行连接后：

```
 C:\Documents and Settings\Administrator>mysql --user=root --password  mysql
Enter password: *********
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 9
Server version: 5.5.22 MySQL Community Server (GPL)

Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> create user 'valter'@'localhost' identified by 'greyfox';
Query OK, 0 rows affected (0.01 sec)

mysql> grant all privileges on *.* 'valter'@'localhost' with grant option;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use near ''val
er'@'localhost' with grant option' at line 1
mysql> grant all privileges on *.* to 'valter'@'localhost' with grant option;
Query OK, 0 rows affected (0.00 sec)

mysql> create user 'valter'@'%' identified by 'greyfox';
Query OK, 0 rows affected (0.01 sec)

mysql> grant all privileges on *.* to 'valter'@'%' with grant option;
Query OK, 0 rows affected (0.00 sec)

mysql> create user 'admin'@'localhost';
Query OK, 0 rows affected (0.00 sec)

mysql> grant reload process on *.* to 'admin'@'localhost';
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use near 'proc
ss on *.* to 'admin'@'localhost'' at line 1
mysql> grant reload, process on *.* to 'admin'@'localhost';
Query OK, 0 rows affected (0.00 sec)

mysql> create user 'dummy'@'localhost';
Query OK, 0 rows affected (0.01 sec)

mysql> select User, Host from mysql.user;
+--------+-----------+
| User   | Host      |
+--------+-----------+
| valter | %         |
| root   | 127.0.0.1 |
| root   | ::1       |
|        | localhost |
| admin  | localhost |
| dummy  | localhost |
| root   | localhost |
| valter | localhost |
+--------+-----------+
8 rows in set (0.00 sec)

mysql> exit
Bye

C:\Documents and Settings\Administrator>mysql -u root -p
Enter password: *********
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 10
Server version: 5.5.22 MySQL Community Server (GPL)

Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> select User, Host from mysql.user;
+--------+-----------+
| User   | Host      |
+--------+-----------+
| valter | %         |
| root   | 127.0.0.1 |
| root   | ::1       |
|        | localhost |
| admin  | localhost |
| dummy  | localhost |
| root   | localhost |
| valter | localhost |
+--------+-----------+
8 rows in set (0.00 sec)

mysql> 
```

当我尝试使用 Heidi 连接时，也会出现同样的错误：

![在此处输入图像描述](../Images/04404c49d17ea522354265112765ee45.png)

**编辑 3：**

这里有一些我正在做的查询，以找出这个错误是什么：

```
C:\Documents and Settings\Administrator>mysqladmin -u root -p version
Enter password: *********
mysqladmin  Ver 8.42 Distrib 5.5.22, for Win32 on x86
Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Server version          5.5.22
Protocol version        10
Connection              localhost via TCP/IP
TCP port                3306
Uptime:                 7 hours 8 min 31 sec

Threads: 2  Questions: 43  Slow queries: 0  Opens: 39  Flush tables: 1  Open tab
les: 0  Queries per second avg: 0.001

C:\Documents and Settings\Administrator> 
```

另一个命令：

```
C:\Documents and Settings\Administrator>mysqladmin -u root -p -h 'localhost' version variables;
Enter password: *********
mysqladmin: connect to server at ''localhost'' failed
error: 'Unknown MySQL server host ''localhost'' (0)'
Check that mysqld is running on 'localhost' and that the port is 3306.
You can check this by doing 'telnet 'localhost' 3306'

C:\Documents and Settings\Administrator>mysqladmin -h `localhost` --port=3306 ve
rsion
mysqladmin: connect to server at '`localhost`' failed
error: 'Unknown MySQL server host '`localhost`' (0)'
Check that mysqld is running on `localhost` and that the port is 3306.
You can check this by doing 'telnet `localhost` 3306' 
```

这是`my.ini`文件：

```
# MySQL Server Instance Configuration File
# ----------------------------------------------------------------------
# Generated by the MySQL Server Instance Configuration Wizard
#
#
# Installation Instructions
# ----------------------------------------------------------------------
#
# On Linux you can copy this file to /etc/my.cnf to set global options,
# mysql-data-dir/my.cnf to set server-specific options
# (@localstatedir@ for this installation) or to
# ~/.my.cnf to set user-specific options.
#
# On Windows you should keep this file in the installation directory 
# of your server (e.g. C:\Program Files\MySQL\MySQL Server X.Y). To
# make sure the server reads the config file use the startup option 
# "--defaults-file". 
#
# To run run the server from the command line, execute this in a 
# command line shell, e.g.
# mysqld --defaults-file="C:\Program Files\MySQL\MySQL Server X.Y\my.ini"
#
# To install the server as a Windows service manually, execute this in a 
# command line shell, e.g.
# mysqld --install MySQLXY --defaults-file="C:\Program Files\MySQL\MySQL Server X.Y\my.ini"
#
# And then execute this in a command line shell to start the server, e.g.
# net start MySQLXY
#
#
# Guildlines for editing this file
# ----------------------------------------------------------------------
#
# In this file, you can use all long options that the program supports.
# If you want to know the options a program supports, start the program
# with the "--help" option.
#
# More detailed information about the individual options can also be
# found in the manual.
#
#
# CLIENT SECTION
# ----------------------------------------------------------------------
#
# The following options will be read by MySQL client applications.
# Note that only client applications shipped by MySQL are guaranteed
# to read this section. If you want your own MySQL client program to
# honor these values, you need to specify it as an option during the
# MySQL client library initialization.
#
[client]

port=3306

[mysql]

default-character-set=latin1

# SERVER SECTION
# ----------------------------------------------------------------------
#
# The following options will be read by the MySQL Server. Make sure that
# you have installed the server correctly (see above) so it reads this 
# file.
#
[mysqld]

# The TCP/IP Port the MySQL Server will listen on
port=3306

#Path to installation directory. All paths are usually resolved relative to this.
basedir="C:/MySQL/MySQL Server 5.5/"

#Path to the database root
datadir="C:/Documents and Settings/All Users/Dados de aplicativos/MySQL/MySQL Server 5.5/Data/"

# The default character set that will be used when a new schema or table is
# created and no character set is defined
character-set-server=latin1

# The default storage engine that will be used when create new tables when
default-storage-engine=INNODB

# Set the SQL mode to strict
sql-mode="STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION"

# The maximum amount of concurrent sessions the MySQL server will
# allow. One of these connections will be reserved for a user with
# SUPER privileges to allow the administrator to login even if the
# connection limit has been reached.
max_connections=100

# Query cache is used to cache SELECT results and later return them
# without actual executing the same query once again. Having the query
# cache enabled may result in significant speed improvements, if your
# have a lot of identical queries and rarely changing tables. See the
# "Qcache_lowmem_prunes" status variable to check if the current value
# is high enough for your load.
# Note: In case your tables change very often or if your queries are
# textually different every time, the query cache may result in a
# slowdown instead of a performance improvement.
query_cache_size=0

# The number of open tables for all threads. Increasing this value
# increases the number of file descriptors that mysqld requires.
# Therefore you have to make sure to set the amount of open files
# allowed to at least 4096 in the variable "open-files-limit" in
# section [mysqld_safe]
table_cache=256

# Maximum size for internal (in-memory) temporary tables. If a table
# grows larger than this value, it is automatically converted to disk
# based table This limitation is for a single table. There can be many
# of them.
tmp_table_size=9M

# How many threads we should keep in a cache for reuse. When a client
# disconnects, the client's threads are put in the cache if there aren't
# more than thread_cache_size threads from before.  This greatly reduces
# the amount of thread creations needed if you have a lot of new
# connections. (Normally this doesn't give a notable performance
# improvement if you have a good thread implementation.)
thread_cache_size=8

#*** MyISAM Specific options

# The maximum size of the temporary file MySQL is allowed to use while
# recreating the index (during REPAIR, ALTER TABLE or LOAD DATA INFILE.
# If the file-size would be bigger than this, the index will be created
# through the key cache (which is slower).
myisam_max_sort_file_size=100G

# If the temporary file used for fast index creation would be bigger
# than using the key cache by the amount specified here, then prefer the
# key cache method.  This is mainly used to force long character keys in
# large tables to use the slower key cache method to create the index.
myisam_sort_buffer_size=17M

# Size of the Key Buffer, used to cache index blocks for MyISAM tables.
# Do not set it larger than 30% of your available memory, as some memory
# is also required by the OS to cache rows. Even if you're not using
# MyISAM tables, you should still set it to 8-64M as it will also be
# used for internal temporary disk tables.
key_buffer_size=10M

# Size of the buffer used for doing full table scans of MyISAM tables.
# Allocated per thread, if a full scan is needed.
read_buffer_size=64K
read_rnd_buffer_size=256K

# This buffer is allocated when MySQL needs to rebuild the index in
# REPAIR, OPTIMZE, ALTER table statements as well as in LOAD DATA INFILE
# into an empty table. It is allocated per thread so be careful with
# large settings.
sort_buffer_size=256K

#*** INNODB Specific options ***

# Use this option if you have a MySQL server with InnoDB support enabled
# but you do not plan to use it. This will save memory and disk space
# and speed up some things.
#skip-innodb

# Additional memory pool that is used by InnoDB to store metadata
# information.  If InnoDB requires more memory for this purpose it will
# start to allocate it from the OS.  As this is fast enough on most
# recent operating systems, you normally do not need to change this
# value. SHOW INNODB STATUS will display the current amount used.
innodb_additional_mem_pool_size=2M

# If set to 1, InnoDB will flush (fsync) the transaction logs to the
# disk at each commit, which offers full ACID behavior. If you are
# willing to compromise this safety, and you are running small
# transactions, you may set this to 0 or 2 to reduce disk I/O to the
# logs. Value 0 means that the log is only written to the log file and
# the log file flushed to disk approximately once per second. Value 2
# means the log is written to the log file at each commit, but the log
# file is only flushed to disk approximately once per second.
innodb_flush_log_at_trx_commit=1

# The size of the buffer InnoDB uses for buffering log data. As soon as
# it is full, InnoDB will have to flush it to disk. As it is flushed
# once per second anyway, it does not make sense to have it very large
# (even with long transactions).
innodb_log_buffer_size=1M

# InnoDB, unlike MyISAM, uses a buffer pool to cache both indexes and
# row data. The bigger you set this the less disk I/O is needed to
# access data in tables. On a dedicated database server you may set this
# parameter up to 80% of the machine physical memory size. Do not set it
# too large, though, because competition of the physical memory may
# cause paging in the operating system.  Note that on 32bit systems you
# might be limited to 2-3.5G of user level memory per process, so do not
# set it too high.
innodb_buffer_pool_size=17M

# Size of each log file in a log group. You should set the combined size
# of log files to about 25%-100% of your buffer pool size to avoid
# unneeded buffer pool flush activity on log file overwrite. However,
# note that a larger logfile size will increase the time needed for the
# recovery process.
innodb_log_file_size=10M

# Number of threads allowed inside the InnoDB kernel. The optimal value
# depends highly on the application, hardware as well as the OS
# scheduler properties. A too high value may lead to thread thrashing.
innodb_thread_concurrency=8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T02:43:09.113

我最好的猜测是您使用默认设置安装 MySQL（如果没有，请提供更多详细信息）。因此，如果 MySQL 的端口打开，请检查您的**防火墙。**

默认端口是 3306。如果这不能解决您的问题，这里是有关此错误的 MySQL 文档：

[http://dev.mysql.com/doc/refman/5.5/en/can-not-connect-to-server.html](http://dev.mysql.com/doc/refman/5.5/en/can-not-connect-to-server.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T03:16:17.130

安装看起来像是完成了。最后一步只是做一些收尾工作......

首先，检查是否安装了 MySQL。转到控制面板的*程序和功能*部分。滚动浏览（或使用搜索功能）以查找`MySQL Server 5.5`程序。

如果已安装，请确保已添加并正确启动该服务。通过在 Run prompt 中键入来打开 Services 窗口`services.msc`。它列出了您的所有服务。根据服务的名称（可能只是`MySQL`），滚动并在该列表中查找它。确保它`Started`在“*状态”*列中显示。

如果它已安装并且服务已启动，那么您就知道数据库已正确安装。很可能只是安装程序中的某些东西导致它崩溃。（这很好，意味着你没有做错任何事！）

为了确保安装安全，您可以尝试手动运行包含的脚本。但是，它所做的一切都需要您在安装程序的第一步中提供的信息并应用它们。

根据[脚本的文档](http://dev.mysql.com/doc/refman/5.5/en/mysql-secure-installation.html)，它设置`root`密码，删除`root`除 之外的任何访问权限`localhost`，删除匿名用户帐户，并删除测试数据库。所以，你可以自己做这一切。

# java - 如何在 android 应用程序中向其他 android 设备和计算机实现消息传递功能

> ID：10059949
> 
> 赞同：0
> 
> 时间：2012-04-08T02:33:15.767
> 
> 标签：java, android, cloud

我一直在开发一个 android 应用程序，我试图弄清楚如何为应用程序实现消息传递功能，以便将消息发送到其他手机和我的网络应用程序。我一直在做大量的研究，但我还没有找到任何解决这个问题的方法，或者至少没有任何直接的方法。有人能指出我正确的方向吗？有没有一种相对简单的方法来获得这个功能？我找到了显示如何使用谷歌云服务的链接，但我对此非常不熟悉，所以我想知道是否还有其他更好/更简单的实现或说明。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T02:44:25.887

出于安全和隐私原因，您的手机/平板电脑应用程序不能（不应该）与其他设备直接通信（除非它们在同一个 WiFi 或类似设备上并通过蓝牙.etc 明确绑定）

因此，在 Android 上执行此操作的方法是使用云到设备消息传递 (C2DM)。

1.  您的应用程序将向您的服务器发送一个网络请求，其中包含消息和预期的收件人。
2.  您的服务器会查看此内容，找到收件人的 C2DM ID，并将消息发送到 Google 的 C2DM 服务，然后将其推送到每台设备。

您的应用程序应该有一个 C2DM 接收器来接收这些消息并进行处理。

在此处查看有关实施 C2DM 的更多信息 [http://code.google.com/android/c2dm/](http://code.google.com/android/c2dm/)

# php - 如何在 MySQL/PHP 中同时插入/更新一行

> ID：10059950
> 
> 赞同：2
> 
> 时间：2012-04-08T02:33:24.643
> 
> 标签：php, mysql

如果该行不存在，我想插入到 MySQL 行中，或者如果它确实存在则更新它。

像这样的东西：

```
$sqlQuery = "INSERT INTO table (Value1, Value2) VALUES ('$var1', '$var2') WHERE UniqueKey='$id'"; 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T02:37:10.163

```
INSERT INTO table (UniqueKey,Value1, Value2) VALUES ('$id','$var1', '$var2') 
ON DUPLICATE KEY UPDATE Value1 = '$var1',Value2 = '$var1'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T02:43:30.080

用户 MySQL 的[REPLACE](http://dev.mysql.com/doc/refman/5.6/en/replace.html)命令：

```
$sqlQuery = "REPLACE INTO table (id, Value1, Value2) VALUES ('$id', '$var1', '$var2')"; 
```

它的工作方式与普通 INSERT 相同，但如果主键（在您的情况下为“id”）匹配，那么它将替换所有指定的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T02:45:01.097

替换成表 (UniqueKey,Value1,Value2) 值 ('$id','$var1','$var2');

replace 与 insert 类似，但是如果 table 中存在唯一键，它将先删除，然后再插入。

# java - 如何从内部类引用封闭类？

> ID：10059951
> 
> 赞同：3
> 
> 时间：2012-04-08T02:34:00.907
> 
> 标签：java, class, arraylist, nested, synchronized

我正在扩展 ArrayList 以创建一个自定义 ArrayList，可以在迭代时使用普通的 ArrayList 方法对其进行修改。为此，我还创建了一个迭代器。

```
public class SynchronizedList<E> extends ArrayList<E>
{
    // Fields here

    //Constructors and methods here

public class SynchronizedListIterator<E> implements Iterator<E>
{
    public int index;
    private E current;

    public boolean hasNext()
    {
        synchronized (/* reference to enclosing List object */) {
                    //code goes here
        }
        return false;
    }

    //more methods here
}
} 
```

在我的 hasNext() 和 next() 方法中，我需要确保列表没有被修改（可以在任何其他时间修改）。因此，我需要在 synchronized() 块中引用我的封闭类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T02:36:53.593

`EnclosingType.this`. 所以在你的情况下，它会是`SynchronizedList.this`.

# c++ - 在 C++ 中的字符串向量中查找和删除字符串

> ID：10059958
> 
> 赞同：1
> 
> 时间：2012-04-08T02:36:36.467
> 
> 标签：c++

我试图在字符串向量中找到一个 2 部分名称，我有我认为可行的方法，但它没有。我不能使用迭代器。这是我的代码，它是一个更大程序的一部分，它是一个有 5 个函数的程序中的一个函数。

```
int deletenames()
{
    ifstream inFile;
    ofstream outFile;
    string strFileName;
    string strFName,strLName;
    vector<string> vecStudent;
    string strDFName, strDLName;
    int i=0;
    char line[80];
    //delets a name
    cout << endl<< " Enter a name to be deleted( First and Last Name):";
    cin>>strDFName>>strDLName;

    for(i<0;strDFName+ " "+strDLName=strFName+ " "+strLName; i++)
    {
        if(strDFName+ " "+strDLName=strFName+ " "+strLName)
            {
                vecStudent.erase;
                cout << "Student Deleted";
        }
    }

    // open output file for writing
    outFile.open(strFileName.c_str());
    if ( outFile.fail())
    {
        cout<<" Output file error! Student was not added"<<endl;
        return -1;
    }

    //display the content of the vector
    for(int i=0; i<vecStudent.size(); i++)
        cout<< vecStudent[i]<<endl;

    for(int i=0; i<vecStudent.size();i++)
        outFile<<vecStudent[i]<<endl;
    outFile.close();
return 0;
} 
```

我从用于编译它的 Microsoft Visual Studio 收到以下错误消息。

```
main.cpp
1>c:\users\ace\desktop\cpsc 1103 assingment 4\cpsc 1103 assingment 4\main.cpp(78): warning C4018: '<' : signed/unsigned mismatch
1>c:\users\ace\desktop\cpsc 1103 assingment 4\cpsc 1103 assingment 4\main.cpp(64): warning C4101: 'line' : unreferenced local variable
1>c:\users\ace\desktop\cpsc 1103 assingment 4\cpsc 1103 assingment 4\main.cpp(105): warning C4018: '<' : signed/unsigned mismatch
1>c:\users\ace\desktop\cpsc 1103 assingment 4\cpsc 1103 assingment 4\main.cpp(108): warning C4018: '<' : signed/unsigned mismatch
1>c:\users\ace\desktop\cpsc 1103 assingment 4\cpsc 1103 assingment 4\main.cpp(90): warning C4101: 'line' : unreferenced local variable
1>c:\users\ace\desktop\cpsc 1103 assingment 4\cpsc 1103 assingment 4\main.cpp(132): warning C4018: '<' : signed/unsigned mismatch
1>c:\users\ace\desktop\cpsc 1103 assingment 4\cpsc 1103 assingment 4\main.cpp(135): warning C4018: '<' : signed/unsigned mismatch
1>c:\users\ace\desktop\cpsc 1103 assingment 4\cpsc 1103 assingment 4\main.cpp(122): warning C4101: 'line' : unreferenced local variable
1>c:\users\ace\desktop\cpsc 1103 assingment 4\cpsc 1103 assingment 4\main.cpp(158): warning C4552: '<' : operator has no effect; expected operator with side-effect
1>c:\users\ace\desktop\cpsc 1103 assingment 4\cpsc 1103 assingment 4\main.cpp(158): error C2451: conditional expression of type 'std::basic_string<_Elem,_Traits,_Ax>' is illegal
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>
1>          ]
1>          No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called
1>c:\users\ace\desktop\cpsc 1103 assingment 4\cpsc 1103 assingment 4\main.cpp(160): error C2451: conditional expression of type 'std::basic_string<_Elem,_Traits,_Ax>' is illegal
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>
1>          ]
1>          No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called
1>c:\users\ace\desktop\cpsc 1103 assingment 4\cpsc 1103 assingment 4\main.cpp(162): error C3867: 'std::vector<_Ty>::erase': function call missing argument list; use '&std::vector<_Ty>::erase' to create a pointer to member
1>          with
1>          [
1>              _Ty=std::string
1>          ]
1>c:\users\ace\desktop\cpsc 1103 assingment 4\cpsc 1103 assingment 4\main.cpp(179): warning C4018: '<' : signed/unsigned mismatch
1>c:\users\ace\desktop\cpsc 1103 assingment 4\cpsc 1103 assingment 4\main.cpp(182): warning C4018: '<' : signed/unsigned mismatch 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T02:56:09.240

似乎可以肯定，至少有一个（可能是两个）位置`(x; a=b; a++)`，或者`if (a=b)`，您实际上打算进行比较而不是分配（即，您打算使用`==`而不是`=`）。

特别是，在这两种情况下，左侧都是通过将一些字符串连接在一起而构建的临时值。一般来说，分配给临时人员是不可能的。即使有可能，这通常也是一个错误。

顺便说一句，您似乎还复制了代码来显示数组的内容（即，您有该代码的两个副本）。此外，除非这是您必须“手动”完成任务的任务，否则您可能希望使用`std::find`而不是编写循环来查找字符串。

# math - 如何创建重力网格？

> ID：10059962
> 
> 赞同：2
> 
> 时间：2012-04-08T02:37:08.037
> 
> 标签：math, opengl

我想创建一个“重力网格”，如下图所示：

![图像](../Images/43334de00d7253652ca44baca9317c89.png)

这张图片显示了我在创建此网格时最接近的一次：

![img2](../Images/ad182f8afe730e7275064dfac1873e27.png)

我只扭曲平行于 Y 轴的线，直到我能解决这个问题。但正如你在图片中看到的那样，线条似乎正在绕过我的“星球”。

这是我现在感兴趣的代码：

```
for (each point on a line parallel to the y-axis) {
    if (planetPosition.x > currrentPoint.x) {
        warpedXPos = currrentPoint.x + (1 / (distance*1000));
    }
    else {
        warpedXPos = currrentPoint.x - (1 / (distance*1000));
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T02:59:51.210

这个想法是将每个点拉向行星的量与 1/R 成比例，其中 R 是行星到该点的距离。

在您的代码中，您 currentPoint.x 等是**绝对**位置，但您需要扭曲**相对于行星**的位置。因此，您的方程式应如下所示：

```
warped.x = currrentPoint.x + (planetPosition.x-currrentPoint.x)/(1000*distance) 
```

之后的部分`+`是相对距离的缩放，基本上是你的扭曲，然后你将这个偏转添加到原始绝对值。您可能也不想使用 1000 因子，但这只是与您的示例保持一致。另外，请注意，无需使用 将其分解为不同的情况`>`，减法的符号应在适当的方向上进行调整。

（顺便说一句，这种类型的操作非常常见……首先减去一个绝对因子，然后缩放，然后再添加原始因子。这是一个值得在很多应用程序中使用的技巧。）

# unit-testing - 没有 getter/setter 的 TDD 行为测试

> ID：10059967
> 
> 赞同：2
> 
> 时间：2012-04-08T02:37:57.647
> 
> 标签：unit-testing, tdd, cqrs, event-sourcing

我正在将 TDD 应用于我的第一个以事件为中心的项目（CQRS、事件溯源等），并且我正在根据 Greg Young 的简单测试框架 Given、When、Expect 编写测试。我的测试夹具接受一个命令、命令处理程序和聚合根，然后测试输出的事件。

```
CommandTestFixture<TCommand, TCommandHandler, TAggregateRoot> 
```

例如这里是一个典型的测试

```
[TestFixture]
public class When_moving_a_group : 
     CommandTestFixture<MoveGroup, MoveGroupHandler, Foo> 
```

总的来说，我对这些测试非常满意，但是在上面的测试中我遇到了问题。聚合根包含一组组。该命令`MoveGroup`对集合进行重新排序，采用 from & to 索引。我设置了测试并断言`GroupMoved`使用正确的数据生成了正确的事件。

作为一项附加测试，我需要断言 Groups 集合的重新排序实际上是正确进行的？当聚合根没有公共 getter/setter 时，我该怎么做。我可以添加一种方法来检索特定索引处的组，但这种破坏性封装不是只是为了可测试吗？

这样做的正确方法是什么？

**编辑**

组的重新排序发生在 Aggregate 根上的 GroupMoved 处理程序中。

```
private void Apply(GroupMoved e)
{
    var moved = groups[e.From];
    groups.RemoveAt(e.From);
    groups.Insert(e.To, moved);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T00:57:28.363

这里的摩擦是因为你想要断言一些关于内部实现的东西，但你手头的东西是在顶层。

您的测试和断言需要处于相同的逻辑级别。有两种方法可以重新安排：

**重新排序组对您在顶层拥有的后续命令或查询有什么影响？**

这应该为您提供一种断言正确结果发生的途径，而无需直接断言有关组的顺序的任何事情。这使测试保持在顶层，并允许进行各种内部重构（例如，可能对组进行惰性排序）。

**你能在较低的水平上测试吗？**

如果您觉得上述测试过于复杂，您可能希望在更详细的级别上构建您的测试。我认为这就像专注于一个细节部分以使其正确。

在这个级别（而不是您的复合根），接口将了解组，您将有机会断言您想要断言的内容。

**或者，你需要这个测试吗？**

If you can not find a suitable test at either of the above levels, then are you sure you need this test at all? If there is no visible external difference then there is no need to lock the behaviour in place with a test.

# emacs - 如何在使用 emacs for erlang 编译时节省键盘操作时间？

> ID：10059968
> 
> 赞同：1
> 
> 时间：2012-04-08T02:38:00.770
> 
> 标签：emacs, erlang

在使用emacs编写erlang源码时，我做了如下配置。在emacs中，同时打开6个窗口，4个源代码编写窗口，1个终端shell窗口，1个erlang shell窗口。

经过一次源代码修改后，我用命令`"m-x ter`“”切换“终端shell”，然后用“ `m-p`”恢复上一个历史命令，然后按“ `enter`”运行。然后用“ `c-x, left`”切换到erlang shell，然后按`m-p`重复最后一次命令。

以上两个切换过程似乎有点长，你能有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T03:26:49.120

`compile`函数是这类事情的一般机制，变量`compile-command`告诉它要做什么（作为一个shell命令运行）。

默认情况下，命令是`make`，所以如果你有一个 Makefile，你已经排序了。

如果不是，并且编写一个不合适，那么您可以自定义`compile-command`您的文件，也许使用局部变量。

链接的问答中涵盖了[用于此目的的文件局部变量。](https://stackoverflow.com/questions/4540793/emacs-set-compilation-command-per-buffer)

如果您希望它自动应用于给定目录下的所有文件，您还可以使用[目录本地变量。](http://www.emacswiki.org/emacs/DirectoryVariables)

或者，如果有一个通用模式可以应用于所有地方的所有 erlang 文件，那么您可以`compile-command`使用 erlang 模式挂钩进行设置。

最后，您可以按需提供命令。以交互方式调用，`M-x` `compile`提示您输入要运行的命令，并使用上一个命令作为下次的默认命令。

# javascript - 在 jQuery Mobile 选择菜单中，我可以强制 LI 元素与下划线选项元素具有相同的类吗？

> ID：10059969
> 
> 赞同：0
> 
> 时间：2012-04-08T02:38:12.913
> 
> 标签：javascript, jquery, jquery-mobile

例如，如果我有这个 HTML 用于下拉菜单：

```
<div data-role="fieldcontain">
    <label for="cars" class="ui-hidden-accessible">Select Seating Area</label>    
    <select id="cars" data-native-menu="false">
      <option class="myclass1" value="volvo">Volvo</option>
      <option class="myclass2" value="saab">Saab</option>
      <option class="myclass3" value="mercedes">Mercedes</option>
      <option class="myclass4" value="audi">Audi</option>
    </select>
</div>
​ 
```

我希望将我的自定义类添加到生成的 UL 元素的相应 LI 元素中。一个人会怎么做呢？jQuery Mobile 是否提供开箱即用的此功能？

这是一个快速的 JSFiddle：http: [//jsfiddle.net/avQC6/1/](http://jsfiddle.net/avQC6/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:26:11.563

我最终采用的方法如下：

*   通过向菜单添加“data-role='none'”属性来禁用 JQM 选择菜单处理
*   手动调用下拉列表中的 .selectmenu() 并回调“create”事件

有关示例，请参[见此 jsfiddle](http://jsfiddle.net/PADH6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T03:34:05.270

不，此功能不是开箱即用的。这样做的方法如下：

```
$('[data-option-index=0]').addClass('myclass1');
$('[data-option-index=2]').addClass('myclass2'); 
```

我相信你可以写一个更简洁的方法来完成这个。这只是一般的想法。

# c++ - 如何获取挂钩的winapi函数的调用后参数？

> ID：10059973
> 
> 赞同：2
> 
> 时间：2012-04-08T02:38:59.903
> 
> 标签：c++, windows, winapi

对于这个例子，我正在谈论挂钩 BeginPaint()，我已经很好地挂钩了，我通常可以在调用前访问所有内容......

```
HDC WINAPI Mine_BeginPaint(HWND hWnd, LPPAINTSTRUCT lpPaint)
{

   // do stuff here, inspecting PRE-CALL lppaint struct etc...

    return fpBeginPaint(hWnd, lpPaint);

} 
```

我正在寻找一种方法来检查这个 lpPaint 结构调用后，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T02:57:26.777

```
HDC WINAPI Mine_BeginPaint(HWND hWnd, LPPAINTSTRUCT lpPaint){
    // do stuff here, inspecting PRE-CALL lppaint struct etc...
    HDC result = fpBeginPaint(hWnd, lpPaint);
    //inspect here whatever you want.
    return result;
} 
```

# php - onchange 不会打印空输入的错误

> ID：10059974
> 
> 赞同：1
> 
> 时间：2012-04-08T02:39:07.897
> 
> 标签：php, ajax

我正在尝试使用 Ajax 和 onchange 函数验证表单。基本上，一旦焦点从输入框中消失，我想要自动验证。然后，如果它是空白/无效条目，它将声明一个错误。

出于某种原因，验证适用于无效条目，但不适用于第一次尝试的空输入（这意味着如果我刷新页面并按选项卡转到第二个字段框，则没有错误）。有趣的是，在我删除条目后，空错误可以正常工作。我试过使用 $var = "" 或 empty($var) 但我仍然得到相同的结果。

这是php部分：

```
if(isset($_GET["isbn"]) )
{
    $isbn = $_GET["isbn"];

    $error="";

    if(empty($isbn) || !preg_match("/^\d{12}$/", $isbn) )
    {
        $error .= "Please enter a valid ISBN";
        echo $error;
    }
    else
        echo $error;

} 
```

这是其余的：

```
<script type="text/javascript">                         
    function validateIsbn(keyword)
    {
        var xhr = new XMLHttpRequest();

        xhr.onreadystatechange = function () {

            if(xhr.status == 200 && xhr.readyState == 4)
            {
                var res = xhr.responseText;
                document.getElementById("err1").innerHTML = res;
            }
        }

        xhr.open("get","validate_isbn.php?isbn=" + keyword,true);
        xhr.send();
    }

    </script>

<form method="get" action="">

            <label class="top-label">ISBN:</label>
            <input name="isbn" id="isbn" type="text" onchange="validateIsbn(this.value)"/>
            <div id="err1"> </div>
            <p></p><p></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:09:16.433

您说*一旦焦点从输入框中消失，*您就想要自动验证。在这种情况下触发的事件是[onblur](http://www.w3schools.com/jsref/event_onblur.asp)，而不是[onchange](http://www.w3schools.com/jsref/event_onchange.asp)。

# c++ - GDB 不显示堆栈的十六进制值

> ID：10059976
> 
> 赞同：5
> 
> 时间：2012-04-08T02:39:50.947
> 
> 标签：c++, c, gdb, hex

我试图让 GDB 显示堆栈的十六进制值，所以我使用了 command `x /48b $esp`，这是我在 Internet 上看到的一个命令，它应该显示堆栈上 48 个字节的十六进制值，从指向的位置开始堆栈指针。但是，当我执行此命令时，我得到整数值（取而代之的是负数）。一个例子如下所示：

```
(gdb) x /48b $esp
0xbffff200: 40  -14 -1  -65 24  -114    4   8
0xbffff208: 123 0   0   0   0   0   0   0
0xbffff210: 16  0   0   0   -3  -112    17  0
0xbffff218: -18 64  27  0   -1  -1  -1  -1
0xbffff220: 88  40  19  0   45  -9  17  0
0xbffff228: 38  38  -64 -14 -1  -65 -64 -14 
```

我以前有过这个命令（据我所知它是完全相同的命令），但是突然之间它似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T02:44:10.233

您可能输错了命令：

> 格式字母为 o(octal)、x(hex)、d(decimal)、u(unsigned decimal)、t(binary)、f(float)、a(address)、i(instruction)、c(char) 和 s （细绳）。

您应该将此命令用于十六进制输出：`x /48x $esp`

# animation - 转换控制时的 JavaFX 动画错误

> ID：10059977
> 
> 赞同：0
> 
> 时间：2012-04-08T02:40:06.390
> 
> 标签：animation, javafx-2

我正在尝试使用 PathTransition 转换 JavaFX 控件。在执行过程中，控件移动不规律（我使它适用于矩形）。

附加示例尝试根据其他两个标签的位置将标签从一个位置移动到另一个位置。标签立即跳到其假定起点下方的一个点，然后过渡到其预期目标位置下方的另一个点。

调试信息表明标签从 (50, 50) 开始，偏移量为 (0, 0)，目标是 (200, 50) 的新位置。当动画完成时，我认为它应该位于 (50, 50) 位置，偏移量为 (150, 0)；实际上，它的位置为 (50, 50)，偏移量为 (148, 38.5)。

我究竟做错了什么？

谢谢您的帮助。

```
package fxsort;

import javafx.animation.PathTransition;
import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.paint.Color;
import javafx.scene.shape.ArcTo;
import javafx.scene.shape.MoveTo;
import javafx.scene.shape.Path;
import javafx.scene.text.Font;
import javafx.stage.Stage;
import javafx.util.Duration;

public class Test4
    extends Application
{
    private final Label   statLabel1        =
        getLabel( "Jehosaphat", 50, 50, Color.gray( .85 ) );
    private final Label   statLabel2        =
        getLabel( "Jehosaphat", 200, 50, Color.gray( .85 ) );
    private final Label   periLabel    =
        getLabel( "Jehosaphat", 50, 50, Color.RED );

public static void main(String[] args)
{
    launch( args );
}

@Override
public void start(Stage stage) throws Exception
{
    Button  start               = new Button( "Start" );

    start.relocate( 250, 125 );
    start.setOnAction(
        new EventHandler<ActionEvent>()
        {
            @Override
            public void handle( ActionEvent evt )
            {
                PathTransition  transition  = getTransition();
                transition.play();
            }
        }
    );

    Group   root    =
        new Group( statLabel1, statLabel2, periLabel, start );
    stage.setScene( new Scene( root, 350, 200 ) ) ;
    stage.show();
}

private Label
getLabel( String text, double xco, double yco, Color color )
{
    Label   label   = new Label( text );
    label.relocate( xco, yco );
    label.setTextFill( color );
    label.setFont( Font.font( "Arial", 20 ) );

    return label;
}
private PathTransition
getTransition()
{
    Label       from        = statLabel1;
    Label       too         = statLabel2;
    Duration    duration    = Duration.millis( 3000 );
    double      startX      = from.getLayoutX();// + 30;
    double      startY      = from.getLayoutY();// + 30;
    System.out.println( "From Layout: " + startX + ", " + startY );
    System.out.println( "From Offset: " + from.getTranslateX()
                         + ", " + from.getTranslateX() );

    double      endX        = too.getLayoutX();// + 30;
    double      endY        = too.getLayoutY();// + 30;
    System.out.println( "To Layout: " + endX + ", " + endY );
    System.out.println( "To Offset: " + too.getTranslateX()
                         + ", " + too.getTranslateX() );

    MoveTo      start       = new MoveTo( startX, startY );
    System.out.println( "MoveTo: " + start.getX() + ", " + start.getY() );

    ArcTo       end     = new ArcTo();
    end.setX( endX );
    end.setY( endY );
    end.setRadiusX( 100 );
    end.setRadiusY( 100 );
    System.out.println( "ArcTo: " + end.getX() + ", " + end.getY() );

    System.out.println( "**********" );

    Path    path    = new Path();
    path.getElements().addAll( start, end );

    PathTransition  transition  = new PathTransition();
    transition.setDuration( duration );
    transition.setPath( path );
    transition.setNode( periLabel );

    transition.setOnFinished(
        new EventHandler<ActionEvent>()
        {
            public void handle( ActionEvent evt )
            {
                System.out.println( "Landed: " + periLabel.getLayoutX()
                                    + ", " + periLabel.getLayoutY() );
                System.out.println( "Offset: " + periLabel.getTranslateX()
                                    + ", " + periLabel.getTranslateY() );
            }
        }
    );

    return transition;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:18:49.860

您的代码有两个问题：

1.  PathTransition 在它自己的坐标系中移动节点。因此，如果您的节点将 layoutX/Y 设置为 50,50，`periLabel`它将被移动。

2.  PathTransition 将节点移动到节点的中心，而不是左上角。

下一个代码将解决您的问题：

```
private PathTransition getTransition() {
    Label from = statLabel1;
    Label too = statLabel2;
    Duration duration = Duration.millis(3000);

    // fix problem (1)
    periLabel.relocate(0, 0);
    // fix problem (2)
    double startX = from.getLayoutX() + from.getBoundsInLocal().getWidth() / 2;
    double startY = from.getLayoutY() + from.getBoundsInLocal().getHeight() / 2;

    double endX = too.getLayoutX() + too.getBoundsInLocal().getWidth() / 2;
    double endY = too.getLayoutY() + too.getBoundsInLocal().getHeight() / 2; 
```

# ios - Xcode 4.3.2 - 两台 Mac 上的一个项目，一台出错，另一台构建

> ID：10059978
> 
> 赞同：4
> 
> 时间：2012-04-08T02:40:11.430
> 
> 标签：ios, xcode, automatic-ref-counting

更新：问题已关闭：通过一些回溯修复了自己。我正在使用一个需要源树变量的框架。（麻雀）。我在我的主 Mac Mini 上更新了源代码树，但没有在我的 MacBook Pro 上更新。因此，由于该错误，Xcode 正在搜索旧目录。

这可能是那些奇怪的 Xcode 错误之一，所以我正在寻找一些建议。我在两台 Mac 上安装了 Xcode 4.3.2（截至撰写本文时是 2012 年 4 月 7 日的最新版本）。我在 Dropbox 中保存了一个项目，因此我可以快速获取它并在任何地方进行处理。我已经用其他几个项目做到了这一点，但从未遇到过这个问题。

一台电脑，一台Mac Mini，项目构建良好。另一方面，2009 MacBook Pro，我得到构建错误。一方面，即使我在一些源文件上使用了 -fno-objc-arc，我仍然会遇到与 ARC 相关的错误。这对我来说非常令人费解。在 Mac Mini 上构建时没有问题。我还收到与 .pch 文件有关的“找不到文件”错误。错误日志将我指向一条奇怪的路径，例如

```
/var/folders/9l/s_phv6yj0hv6q82_lrdcckb00000gn/C/com.apple.Xcode.501/SharedPrecompiledHeaders/...Prefix.pch' file not found 
```

这是我到目前为止尝试过的

*   删除 Xcode 并从 MAS 重新安装
*   删除了日志中调出的 /var/folders 目录
*   删除了项目构建目录
*   执行产品 -> 在 Xcode 中清理
*   多次重启Xcode

还是没有骰子。看起来除非我能确定这个问题，否则我将只能在一个工作站上为这个项目工作。执行此操作时，所有其他项目都可以正常工作。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T14:45:26.533

我在 XCode 中使用了 Source Tree 变量，其中一个变量已过时并指向错误的路径。随后更新的源文件之一在一台 Mac 上工作，但在另一台 Mac 上抛出错误，这导致构建失败并且链接器显示奇怪的错误。

# javascript - jquery 日期/时间选择器问题（timepicker 不是函数）

> ID：10059979
> 
> 赞同：0
> 
> 时间：2012-04-08T02:40:32.403
> 
> 标签：javascript, jquery, jquery-ui

使用这个 [https://github.com/jonthornton/jquery-timepicker](https://github.com/jonthornton/jquery-timepicker)

演示在这里：http: [//jonthornton.github.com/jquery-timepicker/](http://jonthornton.github.com/jquery-timepicker/)

在 Rails 3.2 应用程序上

尝试使用 datepair 示例，但似乎无法弄清楚为什么时间字段不起作用，第一个字段的日历会弹出，但没有别的。

查看代码：

```
 %p.datepair{'data-language' => "javascript"}
    = f.text_field :starttime, :class => 'date start'  
    %span.ui-timepicker-container
      = f.text_field :starttime, :class => 'time start ui-timepicker-input', :autocomplete => "off", :value => "12:15am"  
      %ul.ui-timepicker-list{ :tabindex => "-1", :style => "position: absolute; left: 567.667px; z-index: 2; top: 2246.87px; display: none;" }
        %li 12:00am
        %li 12:15am
        ...
        %li 12:30am
        %li 1:00am
    %span.ui.timepicker-container
      = f.text_field :starttime, :class => 'time start ui-timepicker-input', :autocomplete => "off"  
      %ul.ui-timepicker-list.ui-timepicker-with-duration{ :tabindex => "-1", :style => "position: absolute; left: 674.5px; z-index: 2; top: 2422.87px; display: none;"}
      = f.text_field :starttime, :class => 'date start hasDatePicker' 
```

在萤火虫控制台中，我得到：

```
$this.timepicker is not a function

$this.timepicker(opts); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T16:11:41.743

我猜你的 Rails 安装没有加载 jquery.timepicker.js

datepair.js 使用 jquery.timepicker.js 和来自 jQuery UI 的 datepicker（`//= require jquery-ui`在你的 application.js 中使用）。

这是我在 Rails 应用程序中的内容：

```
vendor/assets/javascripts/jquery-timepicker/datepair.js
vendor/assets/javascripts/jquery-timepicker/jquery.timepicker.js
vendor/assets/stylesheets/jquery-timepicker/jquery.timepicker.css 
```

然后在您的 .js 文件之一中：

```
//= require jquery-ui-addresspicker/jquery.ui.addresspicker.js
//= require jquery-timepicker/jquery.timepicker.js
//= require jquery-timepicker/datepair.js 
```

在您的 .css 文件之一中：

```
 *= require jquery-timepicker/jquery.timepicker.css 
```

我创建了一个打包这个 jQuery 插件的 gem：[https ://github.com/tkrotoff/jquery-timepicker-rails](https://github.com/tkrotoff/jquery-timepicker-rails)

# ajax - Drupal.attachBehaviors 不影响返回的 ajax 表单

> ID：10059980
> 
> 赞同：0
> 
> 时间：2012-04-08T02:41:23.153
> 
> 标签：ajax, forms, drupal, drupal-behaviors

我正在研究 Drupal 7，我有一个这样构造的表单

```
function qt_debate_response_form($form, &$form_state, $node_id){
$form['node_id'] = array(
    '#type' => 'value',
    '#value' => $node_id,
);
$form['response_body'] = array(
    '#type' => 'textarea',
    '#required' => TRUE,
    '#row' => 4,
    '#default_value' => '',
);
$form['submit'] = array(
    '#type' => 'submit',
    '#value' => t('Post'),
    '#ajax' => array(
      'callback' => 'qt_debate_response_form_js',
      'wrapper' => 'response-message-' . $node_id,
      'method' => 'append',
      'effect' => 'fade',
    ),
);
return $form;
} 
```

和一个 ajax 回调函数来添加新评论

```
function qt_debate_response_form_js($form, $form_state) {
global $user;
$body_text = $form_state['values']['response_body'];
$node_id = $form_state['values']['node_id'];

$message_js = '
<script language="javascript" type="text/javascript">
    qt_debate_response_load_new_item(' . $node_id . ',' . $user->uid . ');

    jQuery(".response-form-wrapper textarea").val("");
</script>';

$comment = new stdClass();
$comment->nid = $form_state['values']['node_id']; // Node Id the comment will attached to
$comment->cid = 0;
$comment->pid = 0;
$comment->uid = $user->uid;
$comment->is_anonymous = 0;
$comment->homepage = '';
$comment->status = COMMENT_PUBLISHED;
$comment->language = LANGUAGE_NONE;
$comment->subject = text_summary($body_text, null, 60);
$comment->comment_body[$comment->language][0]['value'] = $body_text;
$comment->comment_body[$comment->language][0]['format'] = 'filtered_html'; 
comment_submit($comment);
comment_save($comment);

$output = $message_js;

return $output;
} 
```

这是我的 Javascript 将新创建的评论加载到 Div (ajax)

```
function qt_debate_user_post_load_new_items(debate_id) {
// get the latest comment id in context
$top_comment = jQuery(".view-debate-user-posts .views-row").first();
$top_comment_id = jQuery(".nid-field-hidden", $top_comment).html();

jQuery.ajax({
    type: "GET",
    url: "/qt_debate/ajax/load_new_items/" + debate_id + "/" + $top_comment_id,
    data: "",
    success: function(html){
        $new_items = jQuery(".view-content", html);
        jQuery("form", $new_items).attr("action","/debate/199");
        jQuery(".form-submit", $new_items).attr("id","edit-submit--5");

        if ($new_items.html() != null) {
            html = '<div class="new_items_wrapper" style="display: none">' + $new_items.html() + '</div>';
            if (jQuery(".view-debate-user-posts .view-content").length == 0) {
                jQuery(".view-debate-user-posts .view-empty").remove();
                jQuery(".view-debate-user-posts").append('<div class="view-content"></div>');
            }

            jQuery(".view-debate-user-posts .view-content").prepend(html);

            jQuery(".view-debate-user-posts .view-content .new_items_wrapper").fadeIn(500, function() {
                jQuery(".views-row", this).unwrap();
                Drupal.attachBehaviors();
            });
        }
    },
});

var t = setTimeout("qt_debate_user_post_load_new_items(" + debate_id + ")", 30000)
} 
```

将视图内容返回给 jQuery 回调的 hook_menu

```
function qt_debate_ajax_load_new_items() {
$debate_id = arg(3);

print views_embed_view('debate_user_posts_load_new_items_', 'default', array($debate_id));
exit(0);
} 
```

查看模板文件，我也在里面返回了一个新的表格

```
print drupal_render(drupal_get_form('qt_debate_response_form', $row->nid)); 
```

返回视图内容呈现良好，使用 Javascript 中的 Drupal.attachBehaviors，返回视图内容中的所有其他效果也可以正常工作。除了表单提交ajax。

有人可以帮忙吗？attachBehaviors 不适用于返回 ajax 表单。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:19:05.130

```
Drupal.attachBehaviors(context); 
```

basically re-runs any functions defined by

```
Drupal.behaviors.yourFunctionName = function(context) {
    $('div.someSelectorclass:not(.already-processed-class)', context).addClass('already-processed-class').bind(someMethod);
} 
```

and these methods must add a selector [already-processed-class] to test for whether the bind(); [ or click(function(e){}); or each(function(){}); or whatever ] has already been added. The "context" is to pass less-than 'document' - say, if your new content is known to be inside a smaller context that will still be found by original behaviors function: in this example I could pass the parent container selector of my new 'div.someSelectorclass'

```
Drupal.attachBehaviors('div.parentContainerClass'); 
```

instead of

```
Drupal.attachBehaviors(document); 
```

# java - 为什么 Eclipse 会警告我添加一个 serialVersionUID？

> ID：10059987
> 
> 赞同：1
> 
> 时间：2012-04-08T02:43:28.300
> 
> 标签：java, eclipse, graphics

> **可能重复：**
> [我为什么要关心serialVersionUID？](https://stackoverflow.com/questions/285793/why-should-i-bother-about-serialversionuid)

我一直在学习如何使用 Java 的图形类。当我制作一个简单的 FlowLayout 时，我在 Eclipse IDE 中收到一条警告，告诉我应该在 Layout 构造器类之前添加一个 serialversionUID。

现在看起来像：

```
public class ShowFlowLayout extends JFrame{
/**
 * 
 */
private static final long serialVersionUID = 1L;

public ShowFlowLayout() {... 
```

什么是 serialVersionUID？拥有重要吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T02:48:32.163

Eclipse 要求您添加`serialVersionUID`所有可序列化的类。由于 JFrame 实现`Serializable`了，你的类也实现了，因此它*应该*有一个`serialVersionUID`. 请注意，它不是*必需*的，只是[强烈建议](https://stackoverflow.com/questions/285793/why-should-i-bother-about-serialversionuid)。