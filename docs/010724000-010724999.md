# StackOverflow 问答 10724000-10724999

# ajax - Symfony 2.0 使用 JS 更新选择选项？

> ID：10724000
> 
> 赞同：3
> 
> 时间：2012-05-23T16:18:58.917
> 
> 标签：ajax, symfony, dynamic-forms

我已经在谷歌上搜索了几个小时，但令人惊讶的是，我没有找到关于该主题的任何主题。

我有以下表格

```
class propertyType extends AbstractType
{

    public function buildForm(FormBuilder $builder, array $options)
    {

        $builder
            ->add('city')
            ->add('district', 'entity', array('class'=>'FlatShanghaidefaultBundle:district', 
                                   'property'=>'name',
                                   'query_builder' => function ($repository) {
                                   $qb = $repository->createQueryBuilder('district');
                                   $qb->add('where', 'city = :city');
                                   $qb->setParameter('city', 1);
                                   return $qb;

    }

    public function getName()
    {
        return 'property';
    }
} 
```

当用户在表单中选择一个城市时，我希望区的选项能够动态更新并仅限于该城市。使用 Ajax 还是 JS？最佳做法是什么？您知道有关该主题的教程吗？如果有人能让我走上正确的轨道，那将有很大帮助..

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T20:19:05.413

查询生成器不会解决您的问题，您可以将其完全删除。

该查询在表单构建时运行，一旦您在浏览器上使用它，您需要使用 javascript 来填充选项。

您可以将选项存储在 javascript 变量中，或者根据需要使用 ajax 从服务器中提取它们（您将需要一个控制器来处理这些 ajax 请求）。

您可能想要使用一些 jquery 插件来处理选择元素之间的级联逻辑，有几个可用的：

*   我使用这个，但它似乎离线：[http ://devlicio.us/blogs/mike_nichols/archive/2008/05/25/jquery-cascade-cascading-values-from-forms.aspx](http://devlicio.us/blogs/mike_nichols/archive/2008/05/25/jquery-cascade-cascading-values-from-forms.aspx)

*   还有一个，我从来没有真正使用过：[http ://code.google.com/p/jquery-cascade/](http://code.google.com/p/jquery-cascade/)

至少还有一个我知道的 Bundle：[https](https://github.com/genemu/GenemuFormBundle) ://github.com/genemu/GenemuFormBundle ，它具有可用于多个 jquery 插件的 ajax 字段类型。这可以节省您编写 ajax 部分来处理数据，因为它是内置的（无论如何，您自己实现控制器可能更容易）。这个我没试过，不知道有没有级联支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:12:24.443

Jbm 关于查询生成器是正确的。他的方法是完全有效的。

另一种选择可能是分配级联选择以支持自动完成字段。

假设您将国家、城市和地区保存为实体并在它们之间建立关系，您甚至不需要保存选择的城市/国家，因为您可以调用：

```
$district->getCity()->getCountry(); 
```

我已经为国家/城市选择实施了类似的事情，并将在此处链接到主要涉及的文件。

首先，创建一个自定义表单类型来封装所有表单内容，它包含一个隐藏字段来存储选定的 id 和一个文本字段作为自动完成逻辑的输入：

[https://github.com/roomthirteen/Room13GeoBundle/blob/master/Form/LocationFieldType.php](https://github.com/roomthirteen/Room13GeoBundle/blob/master/Form/LocationFieldType.php)

然后主题表单类型：

[https://github.com/roomthirteen/Room13GeoBundle/blob/master/Resources/views/Form/fields.html.twig](https://github.com/roomthirteen/Room13GeoBundle/blob/master/Resources/views/Form/fields.html.twig)

自动完成源的 url 作为 data 属性传递，因此没有 JS 会篡改 html 代码。

最后但并非最不重要的一点是，必须实现 JS 函数：

[https://github.com/roomthirteen/Room13GeoBundle/blob/master/Resources/public/jquery.ui.location-autocomplete.js](https://github.com/roomthirteen/Room13GeoBundle/blob/master/Resources/public/jquery.ui.location-autocomplete.js)

结果如下图所示，为了清楚起见，国家名称将显示在城市名称后面的大括号中：

![自动完成正在加载](../Images/6872a06bd6f25c6e38b75434628d42aa.png)

--

与使用级联选择相比，我更喜欢这种解决方案，因为可以一步选择实际值。

干杯 ![自动完成已加载，必须选择城市](../Images/c69060de719ce2f88e5394a7d392fb34.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-16T21:20:46.023

我自己在表格上做这个。我更改了字段（产品），并且可以测量数量的单位被更新。我正在使用带有参数的宏来更轻松地调整它。

宏：

```
{% macro javascript_filter_unit(event, selector) %}
<script>
    $(function(){
        $('#usersection')
                .on('{{ event }}', '{{ selector }}', function(e){
                    e.preventDefault();
                    if (!$(this).val()) return;
                    $.ajax({
                        $parent: $(this).closest('.child_collection'),
                        url: $(this).attr('data-url'),
                        type: "get",
                        dataType: "json",
                        data: {'id' : $(this).val(), 'repo': $(this).attr('data-repo'), parameter: $(this).attr('data-parameter')},
                        success: function (result) {
                            if (result['success'])
                            {
                                var units = result['units'];
                                this.$parent.find('.unit').eq(0).html(units);   
                            }
                        }
                    });
                })
    });

</script>

{% endmacro %} 
```

ajax 返回一个数组：array('success' => $value, 'units' => $html)。您使用 $html 代码并将其放在您要更改的选择位置。当然，需要修改 ajax 调用的 javascript 代码以匹配您的字段。

您可以像通常那样调用宏：

```
{% import ':Model/Macros:_macros.html.twig' as macros %}
{{ macros.javascript_filter_unit('change', '.unitTrigger') }} 
```

所以我有两个论点：事件，往往是一个选择的变化。和一个选择器，它的变化会触发 ajax 调用。

我希望这会有所帮助。

# javascript - extjs 表单字段宽度不正确

> ID：10724004
> 
> 赞同：1
> 
> 时间：2012-05-23T16:19:21.953
> 
> 标签：javascript, extjs, extjs4

我在使用 extjs 的表单时遇到了问题。在 chrome 中，它看起来很好，直到您专注于名字字段并将其模糊，然后使输入字段太短。在 IE 中，它总是太短。我不知道出了什么问题。jsfiddle 在这里：http: [//jsfiddle.net/lordzardeck/NmcXF/9/](http://jsfiddle.net/lordzardeck/NmcXF/9/)。由于某种原因，您无法在 IE8 中预览它，因此您必须在这里查看发生了什么：http: [//jsfiddle.net/lordzardeck/NmcXF/9/show/light](http://jsfiddle.net/lordzardeck/NmcXF/9/show/light)

谁能告诉我我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:37:45.280

将其添加到您的小提琴中，并且似乎已修复它：

```
 layout: 'anchor',
    defaults: {
        anchor: '100%'
    }, 
```

# php - 在线投票申请。如何避免来自同一用户的重复投票

> ID：10724007
> 
> 赞同：-2
> 
> 时间：2012-05-23T16:19:36.880
> 
> 标签：php, javascript, ip-address, mac-address, voting

> **可能重复：**
> [投票系统中的唯一 IP](https://stackoverflow.com/questions/7775968/unique-ips-in-a-voting-system)

我正在开发一个小型网络应用程序，它需要一个使用 php 的在线投票系统来进行我的大学活动。我正在获取 IP 地址并将其存储在数据库中，以防止同一用户重复投票。但后来我想起我的大学使用代理服务器，所以获取 IP 地址是没有用的。我尝试使用 javascript 访问和存储客户端的 Mac 地址。我尝试了一些在互联网上找到的示例。但没有一个有效。你们能建议我如何获得我想要的结果吗？

任何形式的帮助将不胜感激。

问候， Aayush Shrestha 尼泊尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:23:10.690

让他们输入他们的电子邮件地址，并向他们的电子邮件发送一个链接，以便他们投票。该链接应包含他们电子邮件的一些哈希值，您必须检查他们是否已经投票。

我意识到一个学生可以输入多个电子邮件地址并多次投票，但一个学生真正拥有多少封电子邮件？他们会花多少时间做这样的事情？

我猜你无法通过你的大学访问任何类型的身份验证系统，所以这可能是最好的方法。

**编辑：**

另一个想法是使用 Facebook 身份验证（参见：http: [//developers.facebook.com/docs/authentication/](http://developers.facebook.com/docs/authentication/)）。缺点是你必须假设所有选民都有脸书账户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:29:23.117

唯一 100% 无懈可击的方法是让用户创建需要一些个人唯一信息的帐户，以防止用户创建多个帐户。

最接近没有登录系统的是[Evercookie](http://samy.pl/evercookie/)库，它将 UUID 存储在用户浏览器的十几个不同位置。很难将它们全部清除（即使在浏览器中使用隐私模式），因此如果您在用户投票时将 Evercookie 提供给用户，您可能会发现以前投票过的人。

请注意，这会停止机器级别的重复投票，而不是用户级别（一台机器可能有多个用户，并且一个用户可能有多个机器，这可能会启用重复投票者或阻止符合条件的投票者）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T16:30:12.093

1.  首先让用户注册一个电子邮件地址，以便他们可以使用随后与该地址关联的投票系统。

2.  一旦您有了一个电子邮件地址（通过发送到该电子邮件的激活链接进行验证），您就可以从用户那里收集与投票相关的输入。

除非您强制执行用户证书等，否则实际上没有有效的、独立于平台的方法来防止重复投票。

# python - Python line.split 仅拆分单个字符

> ID：10724009
> 
> 赞同：2
> 
> 时间：2012-05-23T16:19:41.520
> 
> 标签：python, split, delimiter

我有一个这样的字符串数组：

Some Title##DD-MM-JJJJ##Some Text在这里##img1.jpg##img2.jpg 我想在##分割这个字符串。我的代码如下：

```
with open("raw_news.txt", "r") as f:
    raw = []
    for line in f:
            line.strip()
            line.split('##')
            raw.append(line) 
```

它不起作用。我只收到单个字母。re.split 也没有成功。我真的很茫然，有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T16:21:15.633

问题是您忽略了的返回值`split()`：

```
 raw.append(line.split('##')) 
```

例如：

```
In [5]: s = "Some Title##DD-MM-JJJJ##Some Text goes here##img1.jpg##img2.jpg"

In [6]: s.split("##")
Out[6]: ['Some Title', 'DD-MM-JJJJ', 'Some Text goes here', 'img1.jpg', 'img2.jpg'] 
```

# oracle - Unix - Oracle：如何在文件末尾删除 CR

> ID：10724016
> 
> 赞同：1
> 
> 时间：2012-05-23T16:19:54.260
> 
> 标签：oracle, unix, csv, carriage-return

我使用oracle程序（utl_file.put_line）生成了一个csv文件（example.csv），但是当我用记事本打开文件时，我意识到文件末尾有一个CR（回车）。我只想删除那个 CR。

该文件是在服务器 UNIX (AIX) 上生成的，我使用记事本在我的计算机 (Windows) 上打开它。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:19:11.290

这似乎是错误的方式。Unix 中的换行符是换行符 (LF)，而 Windows 中的换行符是回车换行符 (CRLF)。

如果您在 Unix 中创建一个文件并在 Windows 中打开它，我预计很少会出现问题，因为 Windows 通常可以解决您的意思是 LF 换行符。如果您以相反的方式执行此操作，在 Windows 中生成文件并在 Linux 中打开，您可能应该期望每行末尾都有一个杂散字符。

[该文档](http://docs.oracle.com/cd/E11882_01/timesten.112/e21639/package.htm#TTPLS294)说`utl_file.put_line` *“附加了一个特定于操作系统的行终止符”。*这意味着您遇到的问题毫无意义。每行的末尾应该有一个 LF。此外，即使 Oracle 错误地执行此操作并附加 Windows 换行符，它也会是 CRLF。

*可能*是记事本出于某种原因在末尾附加了一个 CR，尽管这并没有多大意义。

解决方法是，如果您总是要在 windows 中查看文件，请使用`utl_file.put`，它不包括最后的操作系统特定换行符并在最后连接 CRLF。

某行，`utl_file.put( filename, theline || chr(13) || chr(10) );`其中[`chr(n)`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions026.htm#SQLRF00616)返回字符集中具有*n*值的字符。13 是用于回车的 Ascii，而 10 是用于换行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:55:09.907

解决这个问题的最简单和最常见的方法是使用这个工具 unix2dos。在您的 unix 机器上运行此命令，然后在您的窗口中打开 new_example.csv 文件

这是给你的命令：

```
unix2dos -n example.csv new_example.csv 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-13T13:11:50.657

扩展本的答案：

你也可以使用`utl_file.put_line( filename, theline || chr(13));`

输出与行尾的 [CR][LF] 相同。

# grails - Grails 包含自定义脚本

> ID：10724021
> 
> 赞同：1
> 
> 时间：2012-05-23T16:19:59.507
> 
> 标签：grails, include

我的 grails 应用程序中有两个脚本，我怎么能需要一个脚本的目标到另一个，我该怎么做？

我试着做：

```
includeTargets << grailsScript("FirstScript") 
```

但是 grails 抛出异常...我也尝试过：

```
includeTargets << FirstScript 
```

但是这个说grails找不到类...
我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T20:25:49.813

您需要将文件句柄转移到脚本：

```
includeTargets << new File("${basedir}/scripts/_FirstScript.groovy) 
```

# php - 如何在 PHP 上使用 RegExp 验证 unix 时间？

> ID：10724034
> 
> 赞同：1
> 
> 时间：2012-05-23T16:21:01.677
> 
> 标签：php, regex, validation, preg-match

> **可能重复：**
> [检查字符串是否为 unix 时间戳](https://stackoverflow.com/questions/2524680/check-whether-the-string-is-a-unix-timestamp)

我需要在 php 上使用正则表达式验证 unix 时间。例子：

```
<?php
is_unix( $unix )
{
    if( preg_match( '/([0-9]+)/' , $unix ) )
    {
        return true;
    }
    return false;
}
?> 
```

谢谢 ;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T16:24:37.010

怎么样：

```
function is_unix($t) {
    if ( is_numeric($t) && 0<$t && $t<strtotime("some date in the future that you don't expect the value to exceed, but before year 2038") ) {
        return true;
    }else{
        return false;
} 
```

# sql - 当初始字符串是动态的时转换替换

> ID：10724035
> 
> 赞同：0
> 
> 时间：2012-05-23T16:21:04.663
> 
> 标签：sql, sql-server-2008

我有一张`Preference`桌子。该表中有一个`Section`列。对于表中的每个条目，该`Section`列将具有由单个空格分隔的多个值。这些值是操作系统路径和/或设置。

例如 `SELECT * FROM Preference' 可能会返回如下内容：

`HomeDrive=C:\Windows\ ExternalDrive=D:\ Server=\\server\file\`

您会注意到驱动器可以作为字母路径或 UNC 路径输入。困难的部分是，这些条目中的任何地方都可能有设置。另一个例子：

`HomeDrive=C:\Windows\ UseHD=True ExternalDrive=D:\ Server=\\server\file\ FavoriteFolder=X`

我需要将这些值设置为我的默认值集，无论它们是什么：

`HomeDrive=\\myserver\home` `ExternalDrive=\\myserver\backup` `Server=\\myserver\public`

我还必须保留此条目中的所有额外设置，因此不可能将整个条目更改为我的 3 组路径。

我想我会使用这样的东西：

```
UPDATE Preference
SET Preference= CAST(REPLACE(CAST(Preference AS VARCHAR(MAX)), 'HomeDrive=\\?????\', 'HomeDrive=\\myserver\home') AS TEXT) 
```

因为原始驱动器路径是动态的（我的 '?????' 在查询中），我不确定如何完成。关于每条路径唯一确定的是：

*   它将是字母驱动器或 UNC
*   路径总是以`\`
*   它将与下一个值用空格隔开

但是，由于驱动器路径可以有任意数量的空格，我不确定空格分隔符是否有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:41:38.547

我相信问题的根源在于这些设置的存储方式。关系数据库将*不同*的数据与列分开，因此这些设置中的每一个都应该：

*   有自己的独立专栏
*   作为设置值对出现在另一个表中

这些信息是如何进入数据库的？更重要的是，它可以在插入**之前**`Section`分离出来吗？

您还可以查看此[拆分函数](http://www.codeproject.com/Articles/7938/SQL-User-Defined-Function-to-Parse-a-Delimited-Str)来分隔值。

# facebook - 为 Facebook Insights 申请域

> ID：10724036
> 
> 赞同：1
> 
> 时间：2012-05-23T16:21:06.177
> 
> 标签：facebook, analytics, facebook-insights

我已经在测试环境中添加了所需的元标记（根据[http://developers.facebook.com/docs/insights/](http://developers.facebook.com/docs/insights/)），但是当我使用仪表板声明域时，它给出了一个错误，表明没有管理员数据可以在根中找到。

知道我做错了什么/为什么它不起作用？

在此处查看测试站点：[http ://www.test.bbc.co.uk](http://www.test.bbc.co.uk)

非常感谢，

哎呀。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:00:00.940

你那里没有`fb:admins`元标记，有一个`fb:page_id`标记，但它已被弃用，如果它以前对你有用，它很快就会停止这样做 - 它计划于 2012 年 5 月 2 日删除

顺便说一句，您真的应该在问题中包含您的元标记，从您提出的问题中很难看出问题，它很容易被关闭为题外话

# math - 查询假设函数中的向量转置（斯坦福机器学习视频讲座 2）

> ID：10724037
> 
> 赞同：3
> 
> 时间：2012-05-23T16:21:06.890
> 
> 标签：math, machine-learning, matrix, vector

我正在看由 Andrew NG 教授讲授的斯坦福机器学习系列讲座的第 2 讲，我有一个问题，我认为这可能是非常初级的，但只是没有在我的脑海中点击。因此，让我们考虑两个向量 θ 和 x，其中两个向量都包含实数。

让 h(x) 是一个函数（在这种特定情况下称为假设），但让它是一个由 表示的函数：

```
h(x) = "summation from i = 0 to i = n" of θ(i)*x(i) = θ(transpose)*x 
```

我不明白他说 h(x) 也等于 θ(transpose)*x 的最后一部分。

如果有人能为我澄清这个概念，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T17:41:14.633

它只是基本的线性代数，它遵循[矩阵向量乘法](http://en.wikipedia.org/wiki/Matrix_multiplication#General_definition_2)的定义：

![在此处输入图像描述](../Images/cb2abd01708add8babfab26da078c55f.png)

所以如果 θ 和 x 都是 n+1 x 1 矩阵，那么

![(θ' * x) = i 上的总和 θ'(1,i) * x(i,1) = i 上的总和 θ(i,1)*x(i,1)](../Images/a04edfcfe2a21b45a874b692e6849412.png)

# java - 正则表达式提取两个字符之间的字符串

> ID：10724038
> 
> 赞同：2
> 
> 时间：2012-05-23T16:21:11.833
> 
> 标签：java, regex, pattern-matching, matcher

我想在Java中使用正则表达式提取给定字符串中以下字符之间的字符串：

```
/*
1) Between \" and \"   ===> 12222222222
2) Between :+ and @    ===> 12222222222
3) Between @ and >     ===> 192.168.140.1
*/

String remoteUriStr = "\"+12222222222\" <sip:+12222222222@192.168.140.1>";
String regex1 = "\"(.+?)\"";
String regex2 = ":+(.+?)@";
String regex3 = "@(.+?)>";

Pattern p = Pattern.compile(regex1);
Matcher matcher = p.matcher(remoteUri);
if (matcher.matches()) {
    title = matcher.group(1);
} 
```

我正在使用上面给出的代码片段，它无法提取我想要的字符串。我做错什么了吗？同时，我对正则表达式很陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T16:28:42.183

该[**`matches()`**](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Matcher.html#matches%28%29)方法尝试将正则表达式与整个字符串进行匹配。如果要匹配字符串的一部分，则需要以下[**`find()`**](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Matcher.html#find%28%29)方法：

```
if (matcher.find()) 
```

但是，您可以构建一个正则表达式来一次匹配所有三个部分：

```
String regex = "\"(.+?)\" \\<sip:\\+(.+?)@(.+?)\\>";
Pattern p = Pattern.compile(regex);
Matcher matcher = p.matcher(remoteUriStr);
if (matcher.matches()) {
    title = matcher.group(1);
    part2 = matcher.group(2);
    ip = matcher.group(3);
} 
```

演示：http: [//ideone.com/8t2EC](http://ideone.com/8t2EC)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T16:30:51.763

如果您的输入总是这样，并且您总是希望从中获得相同的部分，则可以将其放在单个正则表达式中（具有多个捕获组）：

```
"([^"]+)" <sip:([^@]+)@([^>]+)> 
```

所以你可以使用

```
Pattern p = Pattern.compile("\"([^\"]+)\" <sip:([^@]+)@([^>]+)>");
Matcher m = p.matcher(remoteUri);
if (m.find()) {
  String s1 = m.group(1);
  String s2 = m.group(2);
  String s3 = m.group(3);
} 
```

# android - Android：最小化和恢复活动

> ID：10724041
> 
> 赞同：3
> 
> 时间：2012-05-23T16:21:25.330
> 
> 标签：android, background, notifications, multitasking, foreground

我对 Android 开发很陌生。

我的问题有点棘手。

我想开发一个使用 2 个活动的应用程序。

第一个活动有一个按钮。单击按钮后，我希望活动 2 开始，如下所示：

Activity 2 将进入前台 2 秒，然后进入后台 8 秒，之后它将再次进入前台 2 秒，然后再次进入后台并继续该过程。

同时，这两项活动都应继续各自的任务。

例如。我们可以有一个活动，例如正在播放音乐的音乐播放器和另一个名为活动 2 的活动，它正在下载一些文件。

我尝试了很多事情，从使用 Intents 到最小化活动和在通知栏上显示通知。通知栏的问题在于它在使用通知栏恢复活动时总是调用 OnCreate() 方法，从而再次启动活动。

我可以在按钮单击时启动一个活动，但不知道如何最小化它，然后以相同的状态弹出它。

我在后台使用服务来延迟时间。

请帮助并分享您对此问题的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:05:08.560

我已经解决了这个问题。

解决方案是将清单文件修改为：

添加到主要活动代码

```
android:launchMode="singleTask"

android:clearTaskOnLaunch="true" 
```

添加到子活动代码

```
android:launchMode="singleInstance"

android:clearTaskOnLaunch="true" 
```

它非常适合我的应用程序:)

谢谢大家的善意贡献

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T06:33:52.740

正如你所说，也许你找到了这个问题的解决方案，但无论如何，我建议你阅读一些东西。它会帮助你更好地理解：

*   没有最小化活动（[活动生命周期](http://developer.android.com/reference/android/app/Activity.html)）这样的事情，
*   活动/意图[标志](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)和[午餐模式](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)
*   [任务和回栈](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)
*   [服务](http://developer.android.com/guide/topics/fundamentals/services.html)是做什么用的，
*   什么是[AsyncTasks](http://developer.android.com/reference/android/os/AsyncTask.html) ,
*   如何使用[处理程序](http://developer.android.com/reference/android/os/Handler.html)

Oki ..我做了一些努力并为你整理了链接。我知道这似乎有很多材料，但你不必在接下来的 15 分钟内跑去阅读它们。放轻松，阅读，尝试，学习。将此作为*建议*，因为一旦您习惯了以错误的方式做事，以后纠正它们将变得更加困难..

希望你觉得它有用.. ;) 干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T06:44:00.497

moveTaskToBack(true); 将整个任务移到后面，即它把两个活动都移到后面。那么问题将是将活动移动到我不知道的前台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T16:45:26.157

您是否尝试过使用

```
this.moveTaskToBack(true); 
```

我不确定这是否是您要找的。继承人的[文档](http://developer.android.com/reference/android/app/Activity.html#moveTaskToBack%28boolean%29)以及！

# css - 获取两个图像以在 css 中将一个在另一个之后对齐，在网格系统中有两列

> ID：10724044
> 
> 赞同：0
> 
> 时间：2012-05-23T16:21:34.540
> 
> 标签：css, positioning

我使用 960 gs 进行布局，并且有两列 grid_7，每列都有前缀和后缀 1（使用 16 个网格）。

现在，我想在两列中一个接一个地放置两个图像。

这是我到目前为止所拥有的：http: [//jsbin.com/ivajit/3](http://jsbin.com/ivajit/3) .. 它是编辑页面 - [http://jsbin.com/ivajit/3/edit](http://jsbin.com/ivajit/3/edit)

（在编辑页面，你可以关闭js面板，因为我没有使用它，所以html/render页面清晰）

现在，我的**光线与我的****小提琴**图像不完全对齐（或者是大提琴？没关系）

所以我在css中添加

```
left: 20px; 
```

并且两个**射线**图像都落在浏览器的最左侧，如下所示：http: [//jsbin.com/ivajit/2](http://jsbin.com/ivajit/2) .. 它是编辑页面 - [http://jsbin.com/ivajit/2/edit](http://jsbin.com/ivajit/2/edit)

我认为绝对定位光线会使它相对于它的父级，所以它会回落到它的父级左侧的 20px .. 但显然情况并非如此..

而且我也尝试过其他职位，相对的，固定的..没有什么能按我想要的方式工作..

请问如何在每列中放置**小提琴**后面的**光线？**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:24:19.197

绝对定位某些东西会将其相对于页面进行绝对定位。解决您的问题的方法是使用 position:relative 将位置绝对元素包装在 div 中。

项目绝对位于此元素内，然后使用父级的位置作为其 0 点。**

# vb.net - 使用 FOXPRO 数据库的 VFPOLEDB 提供程序从返回的集合中排除已删除的记录

> ID：10724045
> 
> 赞同：1
> 
> 时间：2012-05-23T16:21:38.227
> 
> 标签：vb.net, winforms, foxpro

VS 2010，VB.NET，WINFORMS。在我的应用程序中，我需要导入 foxpro 数据库表并排除已删除的记录。问题是 FOXPRO 表将已删除的项目保留在同一个表中。我尝试在连接字符串中使用 DELETED=NO 但 vb 抛出

```
"Format of the initialization string does not conform to the OLE DB specification." 
```

我的功能如下：

```
 Dim _DBConn1 As String = "provider=vfpoledb.1; Data Source = " & file1 & ";DELETED=NO"
    Dim _DBConn2 As String = "provider=vfpoledb.1; Data Source = " & file2 & ";DELETED=NO"
    Dim _DBConn3 As String = "provider=vfpoledb.1; Data Source = " & file3 & ";DELETED=NO"
    Dim _DBConn4 As String = "provider=vfpoledb.1; Data Source = " & file4 & ";DELETED=NO"

    Using _connection As New OleDbConnection(_DBConn1)
        Dim _savedId As String = String.Empty
        _connection.Open()
        Using _command As New OleDbCommand("SELECT * FROM " & _fileName1 & "", _connection)
            Using _reader2 As OleDbDataReader = _command.ExecuteReader
                While _reader2.Read
                    counter += 1
                End While
                y = 100 / counter
                Dim x As String = String.Empty
            End Using
            Using _reader As OleDbDataReader = _command.ExecuteReader
                While _reader.Read
                    Dim _letter As Integer = Nothing
                    Dim _name As String = String.Empty
                    Dim _content As String = String.Empty
                    Dim _copies As Integer = Nothing
                    Dim _type As Integer = Nothing
                    Dim _fee As Decimal = Nothing

                    _letter = _reader.Item(0)
                    _name = _reader.Item(1)
                    _content = _reader.Item(2)
                    _copies = _reader.Item(3)
                    _type = _reader.Item(4)
                    _fee = _reader.Item(5)
                    _UpdateLetters(_letter, _name, _content, _copies, _type, _fee)
                    _progress += y
                    Dim d As Integer = Convert.ToInt16((Convert.ToString(y).Split(".")(0)))
                    ProgressBar1.Increment(d)
                End While
            End Using
        End Using
        _connection.Close()
    End Using

    Using _connection As New OleDbConnection(_DBConn2)
        Dim _savedId As String = String.Empty
        _connection.Open()
        Using _command As New OleDbCommand("SELECT * FROM " & _fileName2 & "", _connection)
            Using _reader2 As OleDbDataReader = _command.ExecuteReader
                While _reader2.Read
                    counter += 1
                End While
                y = 100 / counter
                Dim x As String = String.Empty
            End Using
            Using _reader As OleDbDataReader = _command.ExecuteReader
                While _reader.Read
                    Dim _unit As String = String.Empty
                    Dim _Size As String = String.Empty
                    Dim _contractDate As String = String.Empty
                    Dim _deposit As Decimal = Nothing
                    Dim _Tfirst As String = String.Empty
                    Dim _Tlast As String = String.Empty
                    Dim _optional As String = String.Empty
                    Dim _address1 As String = String.Empty
                    Dim _address2 As String = String.Empty
                    Dim _city As String = String.Empty
                    Dim _st As String = String.Empty
                    Dim _zip As String = String.Empty
                    Dim _hphone As String = String.Empty
                    Dim _drLicense As String = String.Empty
                    Dim _employer As String = String.Empty
                    Dim _wphone As String = String.Empty
                    Dim _bname As String = String.Empty
                    Dim _baddress1 As String = String.Empty
                    Dim _baddress2 As String = String.Empty
                    Dim _bCity As String = String.Empty
                    Dim _bState As String = String.Empty
                    Dim _bZip As String = String.Empty
                    Dim _bPhone As String = String.Empty
                    Dim _contact_Name As String = String.Empty
                    Dim _contact_Address1 As String = String.Empty
                    Dim _contact_Address2 As String = String.Empty
                    Dim _contact_City As String = String.Empty
                    Dim _contact_State As String = String.Empty
                    Dim _contact_zip As String = String.Empty
                    Dim _contact_phone As String = String.Empty
                    Dim _balance As Decimal = Nothing
                    Dim _lastPaymentDate As String = String.Empty
                    Dim _lastPayAmount As Decimal = Nothing
                    Dim _memo As String = String.Empty
                    Dim _lateFee As Decimal = Nothing
                    Dim _email As String = String.Empty

                    _unit = _reader.Item(0)
                    _Size = _reader.Item(1)
                    _contractDate = _reader.Item(2)
                    _deposit = _reader.Item(3)
                    _Tfirst = _reader.Item(4)
                    _Tlast = _reader.Item(5)
                    _optional = _reader.Item(6)
                    _address1 = _reader.Item(7)
                    _address2 = _reader.Item(8)
                    _city = _reader.Item(9)
                    _st = _reader.Item(10)
                    _zip = _reader.Item(11)
                    _hphone = _reader.Item(12)
                    _drLicense = _reader.Item(13)
                    _employer = _reader.Item(15)
                    _wphone = _reader.Item(16)
                    _bname = _reader.Item(17)
                    _baddress1 = _reader.Item(18)
                    _baddress2 = _reader.Item(19)
                    _bCity = _reader.Item(20)
                    _bState = _reader.Item(21)
                    _bZip = _reader.Item(22)
                    _bPhone = _reader.Item(23)
                    _contact_Name = _reader.Item(24)
                    _contact_Address1 = _reader.Item(25)
                    _contact_Address2 = _reader.Item(26)
                    _contact_City = _reader.Item(27)
                    _contact_State = _reader.Item(28)
                    _contact_zip = _reader.Item(29)
                    _contact_phone = _reader.Item(30)
                    _balance = _reader.Item(32)
                    _lastPaymentDate = _reader.Item(33)
                    _lastPayAmount = _reader.Item(34)
                    _memo = _reader.Item(46)
                    _lateFee = _reader.Item(49)
                    _email = _reader.Item(50)
                    _UpdateTenent(_unit, _Size, _contractDate, _deposit, _Tfirst, _Tlast, _optional, _address1, _address2, _city, _st, _zip, _hphone, _drLicense, _employer, _wphone, _bname, _baddress1, _baddress2, _bCity, _bState, _bZip, _bPhone, _contact_Name, _contact_Address1, _contact_Address2, _contact_City, _contact_State, _contact_zip, _contact_phone, _balance, _lastPaymentDate, _lastPayAmount, _memo, _lateFee, _email)
                    _progress += y
                    Dim d As Integer = Convert.ToInt16((Convert.ToString(y).Split(".")(0)))
                    ProgressBar2.Increment(d)
                End While
            End Using
        End Using
        _connection.Close()
    End Using 
```

任何想法我的连接字符串是错误的？谷歌结果向我指出了 DELETED=NO 的方向，但是现在我已经添加了它，它抛出了那个异常错误..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T16:40:12.417

默认情况下，VfpOleDb 提供程序会排除已删除的记录。因此，您的连接字符串不需要包含已删除的设置。如果您想包含删除记录...您将在连接字符串中包含“deleted=false”。

# asp.net - 如何在gridview的模板字段中格式化双精度值

> ID：10724046
> 
> 赞同：3
> 
> 时间：2012-05-23T16:21:40.080
> 
> 标签：asp.net

在 Web 应用程序中，我有一个带有模板字段的 gridview。我通过计算两个双精度值将数据绑定到该模板字段。但是当页面加载时，模板字段会显示一个超过 15 位小数的值。我想将模板字段格式化为 2 位小数。请问有什么建议吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T16:24:16.340

尝试这个：

```
<%# Eval("DoubleField", "{0:0.00}") %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:25:30.453

嗨，您可以在将值绑定到字段时写入模板字段。这将为您提供您想要的确切信息。

```
Text='<%# Convert.ToDecimal( Eval("double")).ToString(#.##) %>' 
```

# c# - Windows Live API oauth 2\. 读取包含 page.aspx?#access_token=fhuevhkfu3q9 的查询字符串

> ID：10724048
> 
> 赞同：1
> 
> 时间：2012-05-23T16:21:46.183
> 
> 标签：c#, asp.net, oauth-2.0, request.querystring, windows-live

我一直在使用 OAuth2 在我的 asp.net 4.0 网站上使用 c# 在后面的代码中提供身份验证技术。我最近注意到 Windows Live api 不再在我编写的代码中工作。它正在拨打电话并从 Live 取回访问令牌，但后来​​我被卡住了。它在它发回的查询字符串的开头添加了一个 #，所以我有以下类型的 url 通过 live 发回给我

...mypage.aspx?#access_token=43t78fehef83jfvwenj3...

以前在添加 # 之前，我只是获取返回的查询字符串并使用以下命令解析出访问令牌。

accessToken = Request.QueryString["access_token"];

随着哈希的添加，尽管我无法再获得该查询字符串，因为哈希使页面误以为它是一个锚点。当我检查我的调试局部变量时，我总是会得到一个空的查询字符串，并且还没有弄清楚如何得到它来给我实际的字符串，以便我可以解析它以获得访问令牌。

关于如何获取查询字符串的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T18:32:52.690

URL 哈希片段（在 之后的部分`#`）不会从用户代理浏览器发送到 Web 服务器。因此，您需要一些客户端（可能是 JavaScript）代码来解析它并将其发送到您的服务器。

下面是一些简单的代码，它解析哈希片段参数并将它们放入 JavaScript 数组中：

```
// parse the query string
// from http://oauthssodemo.appspot.com/step/2
var params = {}, queryString = location.hash.substring(1),
    regex = /([^&=]+)=([^&]*)/g, m;
while (m = regex.exec(queryString)) {
  oauthParams[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
} 
```

然后，您可以使用 AJAX 或其他技术将这些值传递回您的 Web 服务器，如果您需要访问令牌服务器端，您可以将它们解析出来。

当然，如果您的所有代码都是服务器端的，您还可以使用 Windows Live 中提供的授权代码流程：

[http://msdn.microsoft.com/en-us/library/live/hh243647.aspx#authcodegrant](http://msdn.microsoft.com/en-us/library/live/hh243647.aspx#authcodegrant)

这允许您在主查询字符串 () 中获取授权代码，`?code=foo`然后从您的服务器到 Microsoft 的服务器进行服务器到服务器调用，以将其交换`code`为`access_token`.

# django - Django 中间件和 HttpRequest 变化

> ID：10724053
> 
> 赞同：7
> 
> 时间：2012-05-23T16:21:56.577
> 
> 标签：django, httprequest, django-middleware

我有一个中间件来为每个传入的请求进行一些计算/检查。有些观点需要这个计算结果。

由于我不想两次调用相同的代码，我想将结果放在中间件中的 HttpRequest 中，以便视图能够读取它。

你能帮我正确的提示吗，我怎样才能向 HttpRequest 添加一个对象？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T16:27:57.487

`HttpRequest`是一个普通的类，你可以直接将对象分配给它的实例，`request`在中间件中。例如：

```
class MyMiddleware(object):
    def process_request(self, request):
        request.foo = 'bar' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T14:48:32.140

您可以使用所谓的“ [monkey-patch](https://en.wikipedia.org/wiki/Monkey_patch) ”方法扩展 HttpResponse。例如，您可以`HttpResponse`通过从根目录中调用以下函数，甚至可以轻松地添加`__init__.py`或替换方法和属性：`wsgi.py``settings.py`

```
def apply_http_request_patch():

    def get_property_value(request):
        # return lazily evaluated value

    from django.http import HttpRequest
    HttpRequest.some_property = property(get_property_value) 
```

# ruby-on-rails - 带参数的redirect_to。如何将它们传递给我的视图？

> ID：10724058
> 
> 赞同：6
> 
> 时间：2012-05-23T16:22:19.127
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是新来的rails。我在我的行动中使用了`redirect_to`with `params`，但现在我不知道如何`params`在我的视图中显示这些？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T16:29:13.390

试试这个变种：

*   `redirect_to controller: 'thing', action: 'edit', id: 3, something: 'else'`
*   `redirect_to thing_path(@thing, foo: params[:foo])`

此外，此[链接应该对您有所帮助](https://stackoverflow.com/questions/1430247/passing-parameters-in-rails-redirect-to)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T16:29:51.340

实际上，如果您发送了带有重定向的东西 - 您已经像 GET 参数一样传递了它。在这种情况下，您可以从`params`哈希中访问它们。

如果你像这样重定向：

```
redirect_to :controller => 'users', :action => 'edit', :id => 1, :param_a => 1, :param_b => 2 
```

你有这样的网址：

```
http://localhost:3000/users/1/edit?param_a=1&param_b=2 
```

因此，您可以从 params hash访问`:param_a`并在您的视图中：`:param_b`

```
<%= params[:param_a] %>
<%= params[:param_b] %> 
```

# jquery - 我可以使用 jQuery 将多个点击事件附加到一个元素吗？

> ID：10724060
> 
> 赞同：2
> 
> 时间：2012-05-23T16:22:25.920
> 
> 标签：jquery

我在插件脚本中有以下内容：

```
$("#menu")
.on('click','a[href^="/Test"]',function(event){

        event.preventDefault();
        var href = $(this).attr('href');

        alert(this);
        // Load content
        $('#content').load(href, '', function (responseText, textStatus, XMLHttpRequest) {
            $(this).applyTemplateSetup().buildTableOfContent();
        });
        window.location.hash = '#' + href;

        // Get nav link
        var a = $('#menu a[href="' + href + '"]');
        if (a.length > 0) {
            // Mark as current
            $('#menu a').removeClass('current');
            a.addClass('current');

            // Update breadcrumb
            var breadcrumb = $('#breadcrumb').empty();
            while (a.length > 0) {
                if (a.get(0).nodeName.toUpperCase() == 'A') {
                    var target = a;
                }
                else {
                    var target = a.parent().find('a:first');
                }
                breadcrumb.prepend('<li><a href="' + target.attr('href') + '">' +
                a.contents().filter(function () {
                    return this.nodeType == 3;
                }).first().text()
                + '</a></li>');

                // Check if opened
                var li = a.parent();
                if (li.hasClass('closed')) {
                    li.removeClass('closed');
                }

                a = li.parent().parent().children('a, span');
            }
        }
    }); 
```

我还想在用户点击时设置链接的值。我在我的页面上添加了这个，但它似乎没有被调用。当我将两个相同类型的事件附加到一个元素时会出现问题吗？

```
$("#menu")
            .on('click', 'a[href^="/Test"]', function (event) {
                event.preventDefault();
                var href = $(this).attr('href');
                var pk = href.substr(7, 4);
                var rk = href.substr(12, 4);
                var link = "/Admin/Testss/Edit?pk=" + pk + "&rk=" + rk;
                $('#editLink').data('href', link);
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:24:19.877

是的，它应该工作。确保定义第二个处理程序的代码实际上正在执行。

或者，您始终可以修改您附加的第一个处理程序以调用您的（多个）其他函数。

就我个人而言，我更喜欢让前者工作，因为它允许您独立地附加/分离处理程序。

如果您使用[Bind](http://api.jquery.com/bind/)是否有同样的问题？

正如 Q 的评论中提到的，如果任何函数返回 a `false`，它将阻止事件冒泡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:27:21.807

只需将其保留在单击事件中，将其分为两个是多余的

# c# - 查找使用 Linq to Twitter 的用户的所有关注者？

> ID：10724064
> 
> 赞同：1
> 
> 时间：2012-05-23T16:22:43.220
> 
> 标签：c#, twitter, linq-to-twitter

如何使用 Linq2Twitter 找到 Twitter 用户的所有关注者？

我在文档中只能找到对 .Following 属性的引用，而不是 .Followers 属性。

```
var result = from search in context.List
             where search.Following //etc 
```

如果我提供 Twitter 用户名，如何找到 Twitter 用户的关注者？

```
twitter.com/foobar // 'foobar' is the username. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:37:54.990

LINQ to Twitter 让您可以查询朋友和追随者的社交图。以下是如何获得关注者的示例：

```
 var followers =
            (from follower in twitterCtx.SocialGraph
             where follower.Type == SocialGraphType.Followers &&
                   follower.ID == "15411837"
             select follower)
            .SingleOrDefault();

        followers.IDs.ForEach(id => Console.WriteLine("Follower ID: " + id)); 
```

这将返回 ID。这是完整的文档： http://linqtotwitter.codeplex.com/wikipage?title=Listing%20Followers&referringTitle= [Listing%20Social%20Graphs](http://linqtotwitter.codeplex.com/wikipage?title=Listing%20Followers&referringTitle=Listing%20Social%20Graphs)。

乔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:31:53.833

Twitter API 是 GET Followers [/ids](https://dev.twitter.com/docs/api/1/get/followers/ids)，所以我不得不猜测 Linq2Twitter 代码可能类似于[以下内容](http://linqtotwitter.codeplex.com/wikipage?title=Querying%20User%20Info&referringTitle=Getting%20User%20Information)：

```
var users = from tweet in twitterCtx.User
                where tweet.Type == UserType.Show &&
                      tweet.ScreenName == "Sergio"
                select tweet;   
var user = users.SingleOrDefault();

var followers = user.Followers; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-11T06:35:36.110

以下代码演示了如何获取特定用户的所有关注者

```
var followers =
            await
            (from follower in twitterCtx.Friendship
             where follower.Type == FriendshipType.FollowerIDs &&
                   follower.UserID == "15411837"
             select follower)
            .SingleOrDefaultAsync();

        if (followers != null && 
            followers.IDInfo != null && 
            followers.IDInfo.IDs != null)
        {
            followers.IDInfo.IDs.ForEach(id =>
                Console.WriteLine("Follower ID: " + id)); 
        } 
```

来源：[Linq2Twitter Github](https://github.com/JoeMayo/LinqToTwitter/wiki/Listing-Followers)

> 注意：此方法调用仅限于 5000 个关注者。如果您只需要关注者的数量，最好将其从 twitter 网站上刮下来

# url - Pay with Square 应用程序的自定义 url 方案是什么？

> ID：10724068
> 
> 赞同：2
> 
> 时间：2012-05-23T16:22:57.587
> 
> 标签：url

我正在寻找客户使用智能手机支付的 Pay with Square 应用程序的自定义 URL 方案，而不是商家的 Square 读卡器。我知道这个自定义网址 - square://。我在这里找到了一个使用 Square 支付的帖子 - square-pay://，但它不起作用。我想通过我正在构建的应用程序单独启动该应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:14:58.460

`square-pay://`正在为我工​​作。我刚刚将它添加到启动中心，它立即弹出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-16T23:47:36.200

自定义 URL 方案 square-register:// 将简单地启动 Square Register 应用程序。

支持其他细节通过的方案是 square-commerce-v1:// 但是您必须获得开发人员的批准才能使用该方案。

[https://docs.connect.squareup.com/api/connect/v1/index.html#initiating-a-payment](https://docs.connect.squareup.com/api/connect/v1/index.html#initiating-a-payment)

# nhibernate - NHibernate 隐藏虚拟实体

> ID：10724069
> 
> 赞同：0
> 
> 时间：2012-05-23T16:23:02.487
> 
> 标签：nhibernate, many-to-one

我正在处理一个遗留数据库，它对*一些*空关系使用虚拟记录。

*示例：*文章与供应商有关系。如果文章没有供应商，则为该文章分配一个 ID 为 0 的虚拟供应商，以满足两个表之间的关系。

通过 nhibernate 添加新文章时，我必须加载这个虚拟供应商并将其分配给新文章。我希望能够添加新文章并将供应商字段保留为 NULL。

所以我正在寻找一种解决方案，将 NULL 透明地转换为这个虚拟记录，反之亦然。[在这个问题](https://stackoverflow.com/questions/5153564)的帮助下，我能够将 NULL 转换为虚拟记录，但是如何在我的代码中隐藏虚拟实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:18:39.413

您可以通过向实体添加过滤器并在会话中启用过滤器来执行此操作。

[休眠过滤器](http://ayende.com/blog/3993/nhibernate-filters)

# java - 从 Java 中的 Set 中过滤掉项目

> ID：10724070
> 
> 赞同：5
> 
> 时间：2012-05-23T16:23:07.213
> 
> 标签：java

我有一个需要排序/过滤的项目列表（即字符串）。

最终结果不应*包含*任何重复（简单），我会将它们全部放入 Set 中。所以我现在有一组字符串。

更多解释..

我还有一个方法 x 可以计算两个字符串之间的差异量（使用列文斯坦距离）。

**问题：**

在将新字符串`string`插入我的 Set之前，我想使用方法`set`来检查*levenstein 距离*，以及 if返回的任何其他字符串`x`之间的距离，而不是我不应该添加它。`string``set``x``>=3`

我最好的方法是什么？除了`set`每个`string`要插入的迭代槽？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:24:57.477

迭代`Set`将是您最好的选择，因为没有任何内置`Set`实现可以帮助您缩小可能性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T16:48:59.557

我已经玩弄了我的想法。如果没有任何迭代，我想不出一种方法来做到这一点。

假设您有一个名为`distance(String,String):int`返回两个字符串之间给定距离的方法。

```
String x = "Obi-wan"; //this is the item subject to eval addition
List<String> items = new ArrayList<String>(asList("Luke","Yoda","Anakin"));
if (items.filter(s -> distance(s, x) >= 3).getFirst() == null) {
  items.add(x);
} 
```

如果您使用[JDK8 Preview](http://jdk8.java.net/lambda/)，您可以使用上面的代码立即执行此操作。Iterables.getFirst() 方法不会迭代整个集合，而只会迭代满足条件的第一个元素。

否则，您可能必须实现 Predicate 接口和过滤方法。

```
interface Predicate<T> {
    public boolean eval(T o);
}

public static void main(String[] args) {
   final String x = "Obi-wan"; //this is the item subject to eval addition
   List<String> items = new ArrayList<String>(asList("Luke","Yoda","Anakin"));
   Predicate<String> p = new Predicate<String>() {
       public boolean eval(String s){ 
           return distance(s, x) >= 3;
       }
   };
   if(filter(items, p).isEmpty()){ 
        items.add(x);
   }
}

public static <T> List<T> filter(List<? extends T> items, Predicate<? super T> predicate){
    List<T> destiny = new ArrayList<T>();
    for(T item : items){
       if(predicate.eval(item){
           destiny.add(item);
       }
    }
    return destiny;
} 
```

或者，您可以在找到满足您条件的第一个项目后停止过滤。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T16:32:12.443

您可以在创建集合时使用自定义比较器。在您的比较器中，如果它们相同（根据常规字符串比较规则）或者如果它们的 Levenstein 距离满足您的标准，则返回两个字符串相同。

当您的 comaprator 说两个字符串相同时，新字符串不会插入到集合中。（请注意，这意味着字符串的最终结果可能取决于插入的顺序）

*更新*：解决关于总订购的评论：

使用像上面建议的比较器会使最终结果取决于插入顺序（如上所述），就像任何其他解决方案一样，因为使用的 Levenstein 距离标准没有定义总排序。

OTOH，一旦一个字符串通过了不相等测试并被插入到集合中，集合中的其他字符串将不会与这个相等，因此集合中的字符串将使用它们的自然字符串排序，这确实定义了总排序，因此在集合的内部操作（例如排序）中不会出现进一步的不一致。

# sql-server - XML 查询中的变量使用

> ID：10724072
> 
> 赞同：1
> 
> 时间：2012-05-23T16:23:18.890
> 
> 标签：sql-server

请检查以下查询。

```
 declare @xmlRoot as xml
        set @xmlRoot= '<Root>
        <table1 col1="2012-03-02T16:42:55.777">
            <table2Array>
              <Table2 col2="abc">
              </Table2>  
              <Table2 col2="def"> 
              </Table2> 
            </table2Array>
          </table1>
         <table1 col1="2012-03-02T17:42:55.777">
            <table2Array>
              <Table2 col2="abc1">
              </Table2>  
              <Table2 col2="def1"> 
              </Table2> 
            </table2Array>
          </table1>
        </Root>'

        declare @a as varchar(1) 
           set @a= '1' 

         SELECT
        col1 =  item.value('./@col2', 'varchar(10)') 
        FROM @xmlRoot.nodes('Root/table1[1]/table2Array/Table2'  ) AS T(item); 
```

--以上查询返回预期输出

```
SELECT
col1 =  item.value('./@col2', 'varchar(10)') 
FROM @xmlRoot.nodes('Root/table1[*[local-name()=sql:variable("@a")]]/table2Array/Table2'  ) 
  AS T(item); 
```

-- 上面的查询没有返回预期的输出

我在这里做错了什么？

由于我在父节点中没有键值来识别子节点。我必须通过索引解析。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:35:42.150

这对我有用：

```
DECLARE @a INT; -- data type is probably important!
SET @a = 1;

SELECT col1 =  item.value('./@col2', 'varchar(10)') 
FROM @xmlRoot.nodes('Root/table1[sql:variable("@a")]/table2Array/Table2') AS T(item); 
```

# validation - 检查下拉列表中的值

> ID：10724073
> 
> 赞同：2
> 
> 时间：2012-05-23T16:23:20.530
> 
> 标签：validation, vb6, checkbox, combobox

我想检查下拉列表中的值。该列表预先配置为保存是或否。

目前，我正在使用一个复选框，如下所示：

```
If chkboxOne.Value = vbChecked And (LenB(txtDetailsRefNo.Text) = 0) Then
    If vblnShowErrors Then Err.Raise 10000, VALIDATION, "A Default Reference Number must be entered."
    blnDataFail = True
  End If 
```

我可以通过将复选框交换为表单上的组合框并将“vbChecked”替换为 True 来简单地将 chkboxOne 更改为“cboboxOne”吗？我不确定它们的功能在语法上有多相似。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T16:30:11.993

要在组合框中获取项目，您可以检查`listindex`以查看选择的内容（没有`value`属性）

```
cboboxOne.AddItem "yes"    '//listindex is 0
cboboxOne.AddItem "no"     '//listindex is 1
cboboxOne.AddItem "maybe"  '//listindex is 2

...
if (cboboxOne.ListIndex = 0) Then '// yes selected 
```

您还可以检查选定的文本：

```
if (cboboxOne.List(cboboxOne.ListIndex) = "yes") Then '// yes selected 
```

您还可以使用自定义整数进行测试`ItemData`

```
cboboxOne.AddItem "yes"
cboboxOne.ItemData(cboboxOne.NewIndex) = 42
cboboxOne.AddItem "no" 
cboboxOne.ItemData(cboboxOne.NewIndex) = &HBEEF

...
if (cboboxOne.ItemData(cboboxOne.ListIndex) = 42) Then '// yes selected 
```

# android - 我应该创建多个隐藏的 ListView 还是只创建一个并更改内容

> ID：10724077
> 
> 赞同：0
> 
> 时间：2012-05-23T16:24:04.547
> 
> 标签：android, listview, android-listview

所以我有一个将显示选项列表的活动，当您单击一个选项时，它应该移动到一个显示该选项选项的列表，但我希望两个列表都在同一个活动中。

每当用户在两个列表之间导航时，或者使用两个列表独立存在的视图切换器之类的东西时，我都会在使用单个列表视图和更改内容的两个选项之间进行辩论（如果可行，可能通过交换适配器，不确定） ，但一次只能看到一个。

我肯定会认为 viewswitcher 选项会是更干净的选项，但是如果我需要将它扩展到两个以上的列表，它将如何执行？创建未呈现的列表视图是否有很多开销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:40:31.417

保留一个列表视图并切换其后端会很痛苦，尤其是考虑到每次单击选项时都会重新初始化。

- 使用两个 ListFragment，一个控制另一个。使用 Fragments 而不是两个单独的 ListActivities 意味着当您构建一个平板电脑界面时，在同一个屏幕上拥有一个 Activity 和两个单独的活动将是最少的工作。

- 使用[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:40:40.210

我确实有过这样的选择。我正在使用列表视图导航到远程 webdav 服务器。一开始我为每个文件夹使用一个视图。很酷：使用 back 让我不必担心导航历史。但是过了一段时间，在某些情况下，我需要一次管理所有视图，或者将它们全部杀死或实现视图之间的通信（用于参数）。这是一场噩梦。我的清单也开始变得沉重，记忆中的很多清单从来都不是一件好事。我最终放弃并在一个独特的列表视图中管理所有导航。我一开始就应该这样做。

# objective-c - 将 Objective C 转换为 C 矩阵操作

> ID：10724078
> 
> 赞同：0
> 
> 时间：2012-05-23T16:24:07.597
> 
> 标签：objective-c, c, xcode, matrix, matrix-multiplication

好的，所以我已经用所有目标 c 编写了工作代码（是的，我知道 objc 在技术上只是 C。但我的意思是我用消息和东西编写了它。我只有 java 背景，对普通的旧知识不太了解C）但它运行得非常慢。所以我写出了（我认为的）是相同的代码，但是现在这组循环产生了不同的值（仅针对某些数字），而我终其一生都无法弄清楚有什么不同。我正在做的是循环 10 次并在矩阵之间进行 1 次乘法和 1 次加法。我希望有两种语言背景的人可以挑选出我抄错的代码部分。我没有事先对任何数组进行任何更改（这些数组是硬编码的且未受影响），因此 A1、A2 等在代码的两个部分中具有相同的值。

C中的当前代码：

```
 for (int m = 0; m < 10; m++) {

    //Do matrix multiplication between A1 and A2\.  Store in temporary B1
    for( int i = 0; i < 13; i++ )
        for( int j = 0; j < 43; j++ ) {
            double tempTotal = 0;
            for( int k = 0; k < 43; k++){
                tempTotal = tempTotal + A1[i][k] * A2[k][j];
            }
            B1[i][j] = tempTotal;
        }

    //Assign B1 data back into A1 after the multiplication is finished
    for(int i = 0; i < 13; i++)
        for(int j = 0; j<43; j++)
            A1[i][j] = B1[i][j];

    //Add C1 and A1\.  Store into C1.
    for (int l = 0; l < 13; l++) 
        for (int n = 0; n < 43; n++) 
            C1[l][n] = C1[l][n] + A1[l][n];

}//end m for loop 
```

这是旧的 Obj c 代码：

```
 for (int m = 0; m < 10; m++) {
    //multiply A1 and A2\.  Store into A1
    A1 = [LCA_Computation multiply:A1 withArray:A2];    //LCA_Computation is the name of the .m class file in which this all happens.  

    //Add C1 and A1\.  Store into C1
    for (int i = 0; i < 13; i++) 
        for (int j = 0; j < 43; j++) 
            [[C1 objectAtIndex:i] replaceObjectAtIndex:j withObject:[NSNumber numberWithDouble: [[[C1 objectAtIndex: i] objectAtIndex: j] doubleValue] + [[[A1 objectAtIndex: i] objectAtIndex: j] doubleValue]]];

}//end m for loop

//multiply method
   + (NSMutableArray*)multiply:(NSMutableArray*)a1 withArray:(NSMutableArray*)a2
{
    int a1_rowNum = [a1 count];
    int a2_rowNum = [a2 count];
    int a2_colNum = [[a2 objectAtIndex:0] count];
    NSMutableArray *result = [NSMutableArray arrayWithCapacity:a1_rowNum];
    for (int i = 0; i < a1_rowNum; i++) {
        NSMutableArray *tempRow = [NSMutableArray arrayWithCapacity:a2_colNum];
        for (int j = 0; j < a2_colNum; j++) {
            double tempTotal = 0;
            for (int k = 0; k < a2_rowNum; k++) {
                double temp1 = [[[a1 objectAtIndex:i] objectAtIndex:k] doubleValue];
                double temp2 = [[[a2 objectAtIndex:k] objectAtIndex:j] doubleValue];
                tempTotal += temp1 * temp2;
            }
            //the String format is intentional.  I convert them all to strings later.  I just put it in the method here where as it is done later in the C code
            [tempRow addObject:[NSString stringWithFormat:@"%f",tempTotal]];
        }
        [result addObject:tempRow];
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:26:20.120

此问题与先前的内存管理问题有关，导致在某些计算中使用 0。

# tomcat - Grails 外部配置日志记录

> ID：10724079
> 
> 赞同：2
> 
> 时间：2012-05-23T16:24:13.827
> 
> 标签：tomcat, grails, log4j

每当我部署具有[外部化配置](http://grails.org/doc/latest/guide/conf.html#configExternalized)错误的生产应用程序时，我都会在 Tomcat 日志中收到以下消息：

```
log4j:WARN No appenders could be found for logger (org.codehaus.groovy.grails.commons.cfg.ConfigurationHelper)
log4j:WARN Please initialize the log4j system properly.                                                       
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

显然，在 log4j 正确初始化之前处理了外部化配置，因此没有可用的附加程序来接受来自`ConfigurationHelper`.

有没有办法在标准 Grails log4j 初始化发生之前预先初始化 log4j 以捕获这些消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T22:06:17.003

我终于能够通过在以下位置创建一个文件来启用预初始化日志记录`$CATALINA_BASE\lib\log4j.properties`：

```
log4j.rootLogger=WARN, CA                                                          
log4j.appender.CA=org.apache.log4j.ConsoleAppender                                  
log4j.appender.CA.layout=org.apache.log4j.PatternLayout                             
log4j.appender.CA.layout.ConversionPattern=%d{MMM dd, yyyy hh:mm:ss aa} %c%n%p: %m%n 
```

这允许将初始消息记录到控制台。在默认的 Tomcat 配置中，它们将被记录到`$CATALINA_BASE\logs\catalina.out`文件中。

`Config.groovy`Grails 初始化确实使用来自或外部配置文件的设置覆盖了这些初始设置。

我的外部配置文件权限不正确，无法加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T02:45:30.660

[这位博主](http://micharg.blogspot.com/2012/01/log4jspring-warning-no-appenders-could.html)建议检查`web.xml`以确保`log4j`首先列出了听众。Grails`web.xml`在 WAR 创建过程中生成，但可能值得一看。

# asp.net - 使用 MVC 3 和 Razor 引擎的 TreeView

> ID：10724080
> 
> 赞同：-4
> 
> 时间：2012-05-23T16:24:14.773
> 
> 标签：asp.net, asp.net-mvc-3, razor, treeview

我有一个独特的 sql 数据库设置，我在其中使用嵌套集来确定层次结构。这是一个例子：

HierarchyID = 1，HierarchyText =“合同”，**HierarchyLeft = 1**， **HierarchyRight = 54**

HierarchyID = 2，HierarhcyText =“第 1 部分...”，**HierarchyLeft = 2**，**HierarchyRight = 41**

HierarchyID = 3，HierarchyText =“第 2 部分...”，**HierarchyLeft = 42**， **HierarchyRight = 45**

HierarchyID = 8, HierarchyText = "一般规定", **HierarchyLeft = 3** , **HierarchyRight = 40**

这个想法是子类（或子类别）包含在父级的 LEFT 和 RIGHT 值中。因此，例如，“General Provisions”是“Part 1...”的子项，“Part 1...”是“Contract”的子项。“Part 1...”和“Part 2”是彼此的兄弟，因为它们不包含彼此的左右值。

我的问题是：有没有一种方法可以将 MVC3 与 Razor Engine 一起使用来创建一棵树并显示它从该数据库中提取的内容？我见过的唯一示例是数据库中的每个节点都指向其父节点的数据库。如果可能，您能否提供 CONTROLLER 和 VIEW 的示例代码？我会很感激的。此外，我可以逐级提取层次结构名称。因此，我很欣赏一个示例，在该示例中，我可以一次为树控件提供一个级别。例如，馈送顶层......当用户点击它时，馈送下一层，等等。我真的很感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:48:19.597

您似乎正在使用[嵌套集模型](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)来定义分层数据。就我个人而言，一旦将数据从数据库中提取到视图模型中以显示树，我就会使用递归显示模板。这是[一个示例](https://stackoverflow.com/a/8886818/29407)，我在其中说明了类似的概念，您可以对其进行调整以满足您的特定要求。

# delphi - 不允许从 AdvDockPanel 取消停靠

> ID：10724083
> 
> 赞同：0
> 
> 时间：2012-05-23T16:24:19.337
> 
> 标签：delphi, toolbar, tms

我正在使用来自 TMS 的组件，我想知道如何允许 AdvToolBar 停靠到 AdvDockPanels 中，而不允许它取消停靠然后看起来像一个单独的表单。

我正在寻找类似的选项：

`DockMode := [dmCannotFloat];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:53:12.237

到目前为止，这是不可能的。您可以设置`AllowFloating`为 false 但您只能在当前 DockPanel 中移动工具栏

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T17:42:46.990

在 TAdvCustomToolBar 的 EndMove 事件中，我添加这些行以使其像 Property AutoDockOnClose 一样，这正是我想要的。AllowFloating 设置为 True。

```
{$IFDEF CHALAM}
   if (Assigned(FLastDock)) then
   begin
      self.Parent := FLastDock;
      if FFloatingWindow <> nil then
      begin
         FFloatingWindow.Free;
         FFloatingWindow := nil;
      end;
   end;
{$ENDIF} 
```

# javascript - 使用 iframe 解决简单的 jquery 展开/折叠问题？

> ID：10724087
> 
> 赞同：1
> 
> 时间：2012-05-23T16:24:35.153
> 
> 标签：javascript, jquery

我有一个包含 3 个 div 的 div，每个 div 都包含一个 iframe。3 个内部 div 的高度为 115px，当您单击每个 div 的“查看更多”时，它们都折叠起来，然后一个向下滑动到 200px。

我想当再次点击那个 200px 高的那个时，它会崩溃，它们都会滑回 115px，有点像重置它？

我昨晚花了 2 个小时试图弄清楚，我确定这很简单，但我不确定我做错了什么：/

这是小提琴[http://jsfiddle.net/demchak_alex/zUDBN/1/](http://jsfiddle.net/zUDBN/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:00:20.877

这是解决方案：http: [//jsfiddle.net/zUDBN/5/](http://jsfiddle.net/zUDBN/5/)有两个问题。第一个是`$('.partner-wrap').slideDown("slow");`当您单击已选择的项目时需要此代码。第二个是你装错了。当你这样做时：`$('a.normal').click(...);`这会将函数调用绑定到页面加载时该选择器返回的对象。页面加载后，选择器不再重要。因此，无论链接是“正常”还是“显示”类，只要单击链接，就会触发该函数。由于同样的原因，您的第二个选择器无法正常工作：`$('a.reviews-trigger.showing').click(...);`

# c# - 如何在 Mongo Collection (C#) 中查找最新文档

> ID：10724089
> 
> 赞同：2
> 
> 时间：2012-05-23T16:24:39.927
> 
> 标签：c#, mongodb, mongodb-.net-driver

如何在 MongoCollection 中找到最新的文档？目前我正在执行以下操作，但无论如何它似乎都返回相同的值：

```
_collection.FindAllAs<Game>().SetSortOrder(SortBy.Descending("When")).FirstOrDefault<Game>(); 
```

文档的伪代码结构如下：

```
Game
{
    DateTime When;
    List<Score> Scores;
    ...other variables...
} 
```

游戏总是通过顺序存储`Update.PushWrapped<Score>(Score s)`

我该如何改进呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:21:51.380

一种可能的解决方案是创建一个集合来存储集合的最后插入的 _id 值，并在需要获取最新文档时查询该值。

正如我所说，这是一种可能的解决方案，我确信它会起作用，但可能不是最好的解决方案，这取决于您的文档结构等。

我使用这个解决方案来做 autoinc 字段。

# php - 为什么这个正则表达式会出现？

> ID：10724092
> 
> 赞同：1
> 
> 时间：2012-05-23T16:24:57.503
> 
> 标签：php, regex, preg-match

我写了这个函数：

```
function contain_special($string){
# -- Check For Any Special Chars --
if(preg_match('/[^a-z0-9]/',$string)){
# - Special Chars Were Found -
return true;    
}//end of special chars found
else{
# - String Does Not Contain Special Chars -
return false;   
}//end of else - does not contain special chars 
}//end of function 
```

检查字符串是否包含特殊字符。

该函数应该忽略字母数字字符并查找特殊字符。如果找到，返回`true`，否则返回`false`。

现在，在使用大多数特殊字符进行测试时一切正常：

```
$text="sdfs-df";

var_dump(contain_special($text));//returns true because "-" was found 
```

但是，当我有一个`$`不在字符串的某个位置时，该函数无法拾取它：

```
$text="sdfsdf$";//this works
$text="sdf$sdf";//this does not work
$text="$sdfsdf";//this works 
```

关于我在这里做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:29:42.903

看看`echo $text`。您可能没有使用您认为的字符串。例如，文字美元符号通常需要在双引号字符串中进行转义，以便您不使用变量，`$sdfsdf`例如。

我建议在这里只使用单引号。

[http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:43:31.430

双引号中的美元开始变量替换，除非它们后面没有有效地开始变量名的字符。这解释了为什么`$text="sdfsdf$"`有效而`$text="sdf$sdf"`无效。如果您有一个名为`$sdfsdf`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T16:34:04.393

`^`是字符串的开头。好的 - 它也否定了间隔（但你不需要否定 - 只需切换真假）

`$`用于字符串结尾。

`*`表示零次或多次。

所以我认为你想要的正则表达式是： `\^[a-z0-9]*$\`

那样有用吗？

# xml - 'abs()' 是一个未知的 XSLT 函数

> ID：10724094
> 
> 赞同：0
> 
> 时间：2012-05-23T16:25:08.197
> 
> 标签：xml, c#-4.0, xslt

我有 XSLT，例如：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions">
.......
<xsl:value-of select="format-number(abs(QUANTITY), '#')"/>
.... 
```

它与 Altova XMLSpy 等工具完美配合，但是当我尝试从 .Net 进行转换时：

```
XslTransform myXslTransform = new XslTransform();
myXslTransform.Load("some.xls");
myXslTransform.Transform(@"inputxml", @"c:\out.csv"); 
```

它抛出异常

```
System.Xml.Xsl.XsltException was unhandled
  Message='abs()' is an unknown XSLT function.
  Source=System.Data.SqlXml 
```

我知道 ABS 是一个足够简单的函数来实现，但问题是为什么它会发生在 .Net 上？

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T16:56:34.393

该`abs`函数是 XPath 2.0 版的一部分，并且在 XSLT 2.0 处理器（如 Saxon、AltovaXML 和 XMLPrime）中受支持。Microsoft 的 XSLT 处理器（MSXML 3、4、5、6、XslTransform、XslCompiledTransform）都是 XSLT 1.0 处理器，仅支持 XPath 1.0 和 XSLT 1.0 中定义的功能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T16:37:54.253

XMLSpy 为您提供了该功能，它不是内置在 XSLT 中的。有关相同的问题（和实现），请参阅此帖子：[XSLT：我们可以使用 abs 值吗？](https://stackoverflow.com/questions/2190893/xslt-can-we-use-abs-value)

# c - Java <-> C <-> Fortran

> ID：10724097
> 
> 赞同：0
> 
> 时间：2012-05-23T16:25:13.483
> 
> 标签：c, linker, java-native-interface, fortran

我有一个小问题。我正在尝试编译一个与 C 程序接口的 Java 程序，然后进一步与 FORTRAN 77 程序接口。基本上，Java，通过 JNI，使用使用 LAPACK（FORTRAN 版本）的 C 程序

C 程序本身运行良好，可以与 FORTRAN 77 程序进行接口，但是当我在 Java 中运行测试程序时，Fortran 和 C 之间的链接被破坏了。

我像这样编译C程序：

```
gcc -c -fPIC -I/usr/lib/jvm/java-6-openjdk/include -I/usr/lib/jvm/java-6-openjdk/include/linux -llapack -lblas -lm Optibox.c
gcc -shared -o libOptibox.so Optibox.o
LD_LIBRARY_PATH=./:${LD_LIBRARY_PATH} java Optibox 
```

它返回错误：

```
java: symbol lookup error: /home/christian/workspace/testJNI4/libOptibox.so: undefined symbol: dsytrf_ 
```

由于这段代码而发挥作用：

```
static long dsytrf(char UPLO, long N, double* A, long LDA, long* IPIV, double* WORK, long LWORK)
{
    extern void dsytrf_(char* UPLOp, long* Np, double* A, long* LDAp, long* IPIV, double* WORK, long* LWORKp, long* infop);
    long info;
    dsytrf_(&UPLO, &N, A, &LDA, IPIV, WORK, &LWORK, &info);
    return info;
} 
```

如果我只是简单地制作一个 C 程序来测试这个函数，这个函数就可以正常工作，但是在使用 Java 时，LAPACK 不再链接。

所以我想问题是：如何在这种情况下正确地使 Java 编译器链接？

编辑：我至少现在找到了解决方案。我将链接器语句更改为也链接到 BLAS、LAPACK 和 MATRIX 库本身。这似乎完全解决了这个问题，但我不相信它的优雅。我将尝试 Idav1s 给出的库路径建议。

```
gcc -shared -o libOptibox.so Optibox.o liblapack.so libblas.so libm.so 
```

这要求我在 /usr/lib 中找到库并将它们复制到我的编译目录，但至少它可以工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T20:07:11.297

您需要将 LAPACK 和 blas 库添加到`java.library.path`：

```
java -Djava.library.path=/usr/lib/lapack:<other paths> Optibox 
```

添加它们`LD_LIBRARY_PATH`有时是不够的。

编辑：您的链接声明也不正确。它应该是：

```
gcc -shared -fPIC -o libOptibox.so Optibox.o -llapack -lblas -lm 
```

链接器标志在构建时无关紧要`Optibox.o`。该`libOptibox.so`库需要其他库。否则它永远不会在加载时找到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T20:07:27.600

这确实属于评论，而不是答案，但我找不到评论按钮！所以无论如何，这来自 gcc 手册页，重新：“-shared”标志：“生成一个可以链接的共享对象......对于可预测的结果，您还必须指定用于指定此选项时生成代码（-fpic、-fPIC 或模型子选项）。”

您的 gcc 链接语句中没有“-fPIC”。那就是我要开始的地方。（实际上，我*真正*开始的地方是跳到任何希望你编写这些糟糕代码的人的办公桌上，对他们大喊大叫，直到他们改变主意。）

# ruby-on-rails-3 - Rails 3 - has_many 上的 reject_if ：不可能通过关联？

> ID：10724103
> 
> 赞同：1
> 
> 时间：2012-05-23T16:25:45.527
> 
> 标签：ruby-on-rails-3, nested-attributes, has-many-through

[Stackoverflow 上的类似设置](https://stackoverflow.com/questions/2182428/rails-nested-form-with-has-many-through-how-to-edit-attributes-of-join-model "类似设置")

你好呀，

我的嵌套表单设置有一点问题......

**模型“时移”**

```
class TimeShifting < ActiveRecord::Base
  has_many :article_position_time_shifting_assignments, :dependent => :destroy
  has_many :article_positions, :through => :article_position_time_shifting_assignments
  accepts_nested_attributes_for :article_position_time_shifting_assignments
end 
```

**加入模型“ArticlePositionTimeShiftingAssignment”**

```
class ArticlePositionTimeShiftingAssignment < ActiveRecord::Base
  belongs_to :article_position
  belongs_to :time_shifting
  accepts_nested_attributes_for :article_position, :reject_if => proc { |obj| obj['baan_id'].blank? }
end 
```

**模型“文章位置”**

```
class ArticlePosition < ActiveRecord::Base
  has_many :article_position_time_shifting_assignments
  has_many :time_shiftings, :through => :article_position_time_shifting_assignments
end 
```

这里的重点是我在 Join Model ArticlePositionTimeShiftingAssignment 中有一些额外的属性...

```
 create_table "article_position_time_shifting_assignments", :force => true do |t|
    t.integer  "article_position_id"
    t.integer  "time_shifting_id"
    t.integer  "created_by"
    t.integer  "updated_by"
    t.datetime "created_at"
    t.datetime "updated_at"
    t.string   "order_number"
    t.date     "confirmed_date"
    t.string   "purchase_positions_collection"
  end 
```

created_by 和 updated_by 正在自动填写，order_number 和 confirm_date 通过表格。

嗯......我绝对没有问题创建一个新的文章位置

```
<%= f.simple_fields_for :article_position_time_shifting_assignments do |builder| %> 
```

接着

```
<%= f.simple_fields_for :article_position do |builder| %> 
```

我的问题是它总是创建一个新的 article_position_time_shifting_assignment 记录。即使它没有创建新的 ArticlePosition。

```
#<ArticlePositionTimeShiftingAssignment id: 10, article_position_id: nil, time_shifting_id: 10, created_by: 1, updated_by: 1, created_at: "2012-05-23 14:57:27", updated_at: "2012-05-23 14:57:27", order_number: "", confirmed_date: nil, purchase_positions_collection: ""> 
```

嗯......我不想要那个：P

```
accepts_nested_attributes_for :article_position_time_shifting_assignments, :reject_if => proc { |obj| obj['article_position_id'].blank? } 
```

这将不起作用，因为在保存相应的 article_position 之前没有 article_position_id ：-/

有什么想法可以解决这个问题吗？

干杯，

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:45:44.467

实际上它会在映射表（ **ArticlePositionTimeShiftingAssignment**）中创建新记录，因为它是`many-to-many`关联的，所以它是正确的。所以在这种情况下，将一些额外的记录分配给映射表并不是一个好方法。

# asp.net - 如何检查sqlParameter是否为空？

> ID：10724105
> 
> 赞同：0
> 
> 时间：2012-05-23T16:25:58.390
> 
> 标签：asp.net, sqlparameter

我有一个类，它有许多“New()”函数，可以用各种参数启动它。我想创建一个 New() 函数，它将在没有参数的情况下初始化该类。问题是有一个“fillData”函数为类填充数据，并接受存储过程来完成工作，但有一个存储过程参数。我不想创建新的 fillData 函数，但想使用 fillData 函数而不需要额外的存储过程。我的解决方法是将一个空的 SqlParameter var 传递给 fillData 函数，但无论我做什么，当我检查 params 参数是否为空时，它似乎总是认为那里有东西。

我想检查这个“params”参数是否为空：

```
Public Sub New()
    'just created this so i could pass something
    'and continue using fillData as is.
    Dim p(1) As SqlParameter 

    Dim db As sqldb.command
    db = New sqldb.command(ConfigurationManager.ConnectionStrings("sqlConnectionString").ConnectionString)
    fillData("r2m_getAllListingsSorted", p)
End Sub 
```

...

```
Private Sub fillData(ByVal sp As String, ByVal params As SqlParameter())
    Dim db As sqldb.command
    Dim r As SqlDataReader
    db = New sqldb.command(ConfigurationManager.ConnectionStrings("sqlConnectionString").ConnectionString)

    'right here, im having the trouble, seems no matter how I try to "params", 
    'the code always defaults to db.executeReader(sp, p)
    'I've tried params.Length = 0 and params.ToString = "" also.
    If params.Value Then
        r = db.executeReader(sp)
    Else
        r = db.executeReader(sp, params)
    End If 
```

我将如何修改它以便我可以继续使用 fillData 函数，而不向它传递 SqlParameter 参数？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:55:25.310

您可以使您的 SqlParameter 可选并给它一个默认值`Nothing`：

```
Private Sub fillData(ByVal sp As String, 
                            ByVal Optional params As SqlParameter() = Nothing) 
```

然后调用不带 params 参数的方法：

`fillData("StoredProcName")`

然后，您可以检查`fillData`方法内的参数以查看它是否`Nothing`在使用之前。

```
If params is Nothing Then
  // Do something if there's no params
Else
 // Do something if there is params
End If 
```

# c# - 将 DataGrid TwoWay 绑定到对象的 ObservableList

> ID：10724111
> 
> 赞同：0
> 
> 时间：2012-05-23T16:26:20.163
> 
> 标签：c#, wpf, .net-4.0, 2-way-object-databinding

我有一个类来存储数据：

```
public enum ColumnType
{
...
}

public class LogColumn
{
    public string Name { get; set; }
    public ColumnType Type { get; set; }
    public bool OrderBy { get; set; }
} 
```

以及我的 UserControl 中的 ObservableCollection：

```
private ObservableCollection<LogColumn> _logColumns = new ObservableCollection<LogColumn>();
public ObservableCollection<LogColumn> LogColumns
{
    get { return _logColumns; }
    set
    {
        _logColumns = value;
        OnPropertyChanged("LogColumns");
     }
 } 
```

此集合绑定到 DataGrid：

```
<DataGrid Name="dgColumnSelection"
                  ItemsSource="{Binding LogColumns, UpdateSourceTrigger=LostFocus, Mode=TwoWay, ValidatesOnDataErrors=True}" CanUserAddRows="False" AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Name" IsReadOnly="True" Binding="{Binding Name, UpdateSourceTrigger=LostFocus, Mode=TwoWay,  ValidatesOnDataErrors=True}" />
        <DataGridComboBoxColumn Header="Type" ItemsSource="{Binding Source={StaticResource ColumnType}}" SelectedValueBinding="{Binding Type, UpdateSourceTrigger=LostFocus, Mode=TwoWay,  ValidatesOnDataErrors=True}" />
        <DataGridCheckBoxColumn Header="Order by" Binding="{Binding OrderBy, UpdateSourceTrigger=LostFocus, Mode=TwoWay, ValidatesOnDataErrors=True}" />
    </DataGrid.Columns>
</DataGrid> 
```

但是 PropertyChanged-event 和 Validation 都没有被触发。我的错在哪里？

谢谢。此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:35:57.593

该事件永远不会被触发，因为您永远不会将 LogColumns 变量设置为新变量。您正在做的是更改 LogColumns 集合中包含的 LogColumn 项目的属性。

在 LogColumn 类上实现 INotifyPropertyChanged 接口可能有助于做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:38:15.163

ObservableCollection 仅在 ObservableCollection 的项目被更改而不是项目被更改时才通知，因此您需要在 logcolumns 类中实现 inotifyproprty chagned

作为

```
 public class LogColumn : INotifyPropertyChanged
    {
        private string _Name;

        public string Name
        {
            get { return _Name; }
            set { _Name = value; Onchanged("Name"); }
        }
        private ColumnType _Type;

        public ColumnType Type
        {
            get { return _Type; }
            set { _Type = value; Onchanged("Type"); }
        }
        private bool _OrderBy;

        public bool OrderBy
        {
            get { return _OrderBy; }
            set { _OrderBy = value; Onchanged("OrderBy"); }
        }

        public event PropertyChangedEventHandler PropertyChanged;
        public void Onchanged(string name)
        {
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(name));

        }
    } 
```

现在这将起作用。

# c# - always 编译器是否在匿名类型的名称中包含文本“AnonymousType”？

> ID：10724112
> 
> 赞同：1
> 
> 时间：2012-05-23T16:26:23.337
> 
> 标签：c#, anonymous-types

编译器似乎总是命名匿名类型，以便它们包含“AnonymousType”。

```
new { Name = "Sean"}.GetType().Name // Gives: <>f__AnonymousType0`1 
```

这可以依靠吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T16:28:25.837

不，你不能依赖它。C# 规范没有指定编译器生成类型的名称。因此编译器的未来版本（或替代实现，如单声道）可能会选择不同的命名方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T16:29:07.477

今天的 C# 编译器确实会将名称 AnonymousType 作为 IL 中生成名称的一部分。

不过，这严格来说是一个实现细节。它不是由语言指定的，也不是保证在该语言的未来版本中是真实的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T16:33:59.127

C# 4.0 规范中唯一提到匿名类型的类型名称的是 7.6.10.6；

> 匿名类型的名称由编译器自动生成，不能在程序文本中引用。

换句话说，没有给出或暗示的保证，编译器可以自由生成任何名称。

# javascript - JavaScript 在 for 循环中返回 var

> ID：10724124
> 
> 赞同：0
> 
> 时间：2012-05-23T16:27:23.383
> 
> 标签：javascript, arrays, events, canvas, for-loop

我试图理解实现画布/上下文对象的代码。如果在画布上的鼠标按钮按下事件（据我所知）提供的一组指定坐标处遇到该对象的精灵，则此代码返回一个对象。以下代码是否创建对象数组？

```
var selObj = getObjectByPixel(mx,my); 
```

和

```
function getObjectByPixel(x,y) {
  gctx.clearRect(0,0,MaxX,MaxY);
  //alert(levelData.world['ExtraBlockTNT_1'].name);
  for (var objname in levelData.world) {
    var obj = levelData.world[objname];
    var sprd = spriteData[obj.definition];
    if(!sprd) continue;
    var tr = transform(obj.x, obj.y, sprd.data.width, sprd.data.height);

    gctx.save();
    gctx.translate(tr.x,tr.y);      
    gctx.rotate(obj.angle);

    gctx.fillRect(-tr.w/2, -tr.h/2, tr.w, tr.h);
    gctx.restore();
    //console.info(x,y);
    var imageData = gctx.getImageData(x, y, 1, 1);
    if (imageData.data[3] > 0) {
      return obj;
    }
  }
  return null;
} 
```

在我看来，如果遇到像素数据，循环中的第一个对象将返回。如果是这种情况，循环结束（这是我假设会发生的）还是继续返回对象并将它们存储在`selObj`

我对这段代码感到很困惑，但应用程序运行时没有错误，所以我一定不能完全理解它。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:32:05.727

它不返回数组。它返回一个对象，请参阅：`return obj;`. 你只能从一个函数返回一次。

ps 如果此代码的作者要返回一个数组，他可能会调用它：getObjectsByPixel（注意**s**）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T16:34:05.070

`return` *总是*结束执行并返回到函数输入点的堆栈。

所以这意味着它只返回一个对象。为了返回一个数组，函数必须首先创建数组，然后在循环结束后返回它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T01:20:15.133

我终于弄清楚了街区的动态。该循环只返回一个`obj`（无论如何我都知道）。逻辑是，对于画布上的每个对象精灵，在覆盖的画布中创建一个不可见的填充矩形，直到鼠标单击坐标位于其中一个矩形的边界内。然后返回生成该矩形的对象。

# button - 向更新面板添加动态按钮并绑定 onclick 事件 ASP.net Webforms

> ID：10724126
> 
> 赞同：1
> 
> 时间：2012-05-23T16:27:30.480
> 
> 标签：button, dynamic, onclick, updatepanel

我收到一个关于在一组更新面板上添加带有动态 onclick 事件的动态按钮的查询。

我已经简化了这个场景，因为到目前为止我的代码太长并且被捆绑了......我已经创建了一个带有 3 个更新面板的测试页面。

就实际页面而言，第一个更新面板将用于过滤器，过滤器将依次更新第二个更新面板。第二个更新面板将包含所有结果，具体取决于过滤器..这将是一个按钮表。

在第二个更新面板上单击这些按钮中的任何一个时，根据按钮的 ID，将在最后一个更新面板中生成结果。

我面临的问题是在创建按钮时与按钮单击事件相关联。当我从第一个更新面板的 onclick 创建按钮时，它会将其添加到占位符，但 click 事件根本不会触发。

这是我的测试页面中的一些代码。

测试.aspx

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>

<asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate>
    <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />
</ContentTemplate>

</asp:UpdatePanel>

<asp:UpdatePanel ID="UpdatePanel2" runat="server" ChildrenAsTriggers="False" 
    UpdateMode="Conditional">
<ContentTemplate>

<asp:PlaceHolder id="ph2" runat="server"></asp:PlaceHolder>
</ContentTemplate>

</asp:UpdatePanel>

<asp:UpdatePanel ID="UpdatePanel3" runat="server" UpdateMode="Conditional">

<ContentTemplate>
<asp:PlaceHolder id="ph3" runat="server"></asp:PlaceHolder>
</ContentTemplate>

</asp:UpdatePanel> 
```

代码隐藏：

```
 public partial class test : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        Button up2button = new Button();
        up2button.ID = "up2button";
        ph2.Controls.Add(up2button);
        up2button.Click += new EventHandler(up2button_Click); // Not being registered?

        AsyncPostBackTrigger trigger1 = new AsyncPostBackTrigger();
        trigger1.ControlID = "up2button";
        trigger1.EventName = "Click";
        UpdatePanel2.Triggers.Add(trigger1);

        ScriptManager1.RegisterAsyncPostBackControl(up2button);

        UpdatePanel2.Update();

    }

    protected void up2button_Click(object sender, EventArgs e) { //and not being fired
        Button up3button = new Button();
        up3button.ID = "up3button";
        up3button.Click += new EventHandler(up3button_click);
        ph3.Controls.Add(up3button);

        AsyncPostBackTrigger trigger1 = new AsyncPostBackTrigger();
        trigger1.ControlID = "up3button";
        trigger1.EventName = "Click";
        UpdatePanel3.Triggers.Add(trigger1);
        UpdatePanel3.Update();
    }

    protected void up3button_click(object sender, EventArgs e) {

    }
} 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T21:46:18.220

这是一个快速示例，我在互联网上找到：

我使用占位符来保存动态创建的控件 - 该按钮的单击事件上的按钮和文本框。

和代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
        {
            if (ViewState["Add"] != null)
            {
                Button add = new Button();
                add.Text = "Add";
                add.Click += new EventHandler(add_Click);
                PlaceHolder1.Controls.Add(add);
            }
            if (ViewState["textboxes"] != null)
            {
                int count = 0;
                count = (int)ViewState["textboxes"];
                for (int i = 0; i < count; i++)
                {
                    textbox  textbox_foradd = new TextBox();
                    textbox_foradd.ID = "textadd" + (i + 1).ToString();
                    PlaceHolder1.Controls.Add(textbox_foradd);
                }
            }
        }

    }

    void add_Click(object sender, EventArgs e)
    {
        int count = 1;
        if (ViewState["textboxes"] != null)
        {
            count += Convert.ToInt32(ViewState["textboxes"]);
        }
        TextBox textbox_foradd = new TextBox();
        textbox_foradd.ID = "textadd" + count.ToString();
        PlaceHolder1.Controls.Add(textbox_foradd);
        ViewState["textboxes"] = count;
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        Button add = new Button();
        add.Text = "Add";
        PlaceHolder1.Controls.Add(add);
        ViewState["Add"] = 1;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T18:41:35.010

此外，如果您添加多个相同的控件，您需要为每个控件提供唯一的 ID。

例如：添加 ID 为“ButtonA”的按钮 添加另一个 ID 为“ButtonA”的按钮

将失败，回发后您的按钮将正确触发事件，但该操作不会进行正确的刷新。让它看起来不再令人耳目一新。

Instead generate a unique ID for each control you add dynamically (and save those IDs). In the postback, recreate those controls and reassign the IDs properly. Only then will the UI refresh properly.

# c# - 将字符串列表转换为xml

> ID：10724127
> 
> 赞同：0
> 
> 时间：2012-05-23T16:27:35.307
> 
> 标签：c#, wpf, xml

我的一个数据库表有很多记录，其中一列包含存储为字符串的 xml 数据。检索此数据并解析字符串以获取我希望绑定到我的 UI 的特定信息的最佳方法是什么。目前我正在这样做 -

我的 Customer 表的数据列将 xml 数据存储为字符串

```
List<string> myData = new List<string>();
//populate the list with the data from the customer table
List<XElement> myXmlData = new List<XElement>();
foreach (var item in myData)
 {
      XElement xmlItem = XElement.Parse(item);
      myXmlData.Add(xmlItem);
 }

this.DataContext = myXmlData; 
```

然后，我使用数据模板绑定到我需要使用以下内容的 xml 数据

```
<TextBlock Text="{Binding Path=Element[Name].Value}"/> 
```

这很有效，但我不确定这是否是正确的做事方式。性能是一个问题，那么以任何其他方式这样做会提高性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:32:59.920

你说性能是一个*问题*——但你衡量了吗？有*问题*吗？这应该是你的第一道攻击线。

就代码而言 - 我会更彻底地使用 LINQ：

```
List<XElement> myXmlData = myData.Select(XElement.Parse).ToList();
this.DataContext = myXmlData; 
```

如果方法组转换不起作用（规则很微妙，我现在无法轻松测试），您可以使用 lambda 表达式：

```
List<XElement> myXmlData = myData.Select(x => XElement.Parse(x)).ToList();
this.DataContext = myXmlData; 
```

请注意，如果您的“填充列表”涉及 LINQ，那么您很可能可以一次性完成所有操作 - 例如

```
this.DataContext = dbContext.Customers
                            .Select(c => c.CustomerXml)
                            .AsEnumerable() // Out of LINQ to SQL or whatever
                            .Select(XElement.Parse)
                            .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:29:51.817

根据您需要从 XML 数据中获得的特定信息（从您的问题中不清楚 XML 是否实际存储为字符串或者这是否是您的目标？），您是否考虑过将其反序列化为对象然后提取那里的相关数据？

XSD 是一个很棒的 .NET 工具，它可以通过自动为您创建类来帮助解决这个问题。[在http://www.cricketmx.com/articles/read/using-xsd-to-assist-in-xml-deserialisation-to-objects-in-c-sharp/](http://www.cricketmx.com/articles/read/using-xsd-to-assist-in-xml-deserialisation-to-objects-in-c-sharp/)有一些信息

# css - 图标...调整大小或缩小？

> ID：10724128
> 
> 赞同：0
> 
> 时间：2012-05-23T16:27:35.423
> 
> 标签：css, image, mobile, icons, shrink

我一直在重新设计我的网站以供移动使用，并意识到我的图标有点太大了。标准的 16 x 16 图标并不适合小屏幕。查看其他网站，即 facebook 的通知图标、gmail 的撰写/搜索/刷新图标等……它们似乎是 12 x 12，至少在我的手机上（Galaxy Nexus……这是双倍像素密度，所以真正的 24 x 24 但我离题了）。

一，我说这些图标的大小是 12 x 12 对吗？如果 16 x 16 是桌面网站图标的“标准”，那么 12 x 12 是否会成为移动网站图标的“标准”？

另外，在缩小图标方面......是否建议将图标，这是在矢量软件中创建的相当简单的图标，并使用矢量软件缩小.svg文件，然后重新保存为.png？或者如果我使用 CSS 缩小这些图标，它们会保持完整性吗？

什么是最佳做法？

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:35:54.560

CSS媒体查询绝对是要走的路：

```
#icon {
    backround:url(../images/sprites.png);
    background-position:0 0;
    height:20px;
    width:20px;}
//desktop
@media only screen and (min-width: 960px)  and (max-width: 1140px){

    body { min-width:960px; }

    #icon {
        background-position:-20px 0;
        height:15px;
        width:15px;}

}

//tablets
@media only screen and (min-width: 768px) and (max-width: 959px) {

    body { min-width:768px; }

    #icon {
        background-position:-32px 0px;
        height:12px;
        width:12px;}

}

//mobile
@media only screen and (min-width: 480px) and (max-width: 767px) {

    body { min-width:480px; }

    #icon {
        background-position:-50px 0px;
        height:10px;
        width:10px;
} 
```

每次重绘，浏览器都会根据这些规则进行测试并根据需要替换它们。在上面的例子中，#icon 有一个一致的属性（背景），还有几个随着浏览器大小的变化而变化。

查看[1040Grid](http://cssgrid.net/)或[Skeleton](http://www.getskeleton.com/) css 框架，了解一些出色的开箱即用解决方案。或者只是自己动手。

请注意，媒体查询是 css3 功能，在旧版浏览器中会失败。在这种情况下，将使用默认规则集（通常用于 960 布局）。（也有一些 javascript 解决方案可以处理这个问题..）

干杯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T19:49:17.817

最佳做法是设计特殊的小图标。自动从矢量图标中获取高质量的图像是不可能的。

# android - 带有有趣文件名的文件创建崩溃并出现丑陋的异常

> ID：10724132
> 
> 赞同：1
> 
> 时间：2012-05-23T16:28:01.057
> 
> 标签：android, file

我目前正在玩文件下载。但我目前面临一个奇怪的错误：

```
05-23 17:39:45.917: E/(5036): java.io.FileNotFoundException: /mnt/sdcard/Pictures/"Samsung  ()+-* Samsung.jpg": open failed: EINVAL (Invalid argument)
05-23 17:39:45.917: E/(5036):   at libcore.io.IoBridge.open(IoBridge.java:406)
05-23 17:39:45.917: E/(5036):   at java.io.FileOutputStream.<init>(FileOutputStream.java:88)
05-23 17:39:45.917: E/(5036):   at java.io.FileOutputStream.<init>(FileOutputStream.java:128)
05-23 17:39:45.917: E/(5036):   at java.io.FileOutputStream.<init>(FileOutputStream.java:117)
05-23 17:39:45.917: E/(5036):   at com.end.utils.InternalFileUtils.copyFile(InternalFileUtils.java:458)
05-23 17:39:45.917: E/(5036):   at com.end.activities.filopeartions.MultipleDownloadActivity$MultipleDownloadAsyncTask.downladFile(MultipleDownloadActivity.java:260)
05-23 17:39:45.917: E/(5036):   at com.end.activities.filopeartions.MultipleDownloadActivity$MultipleDownloadAsyncTask.doInBackground(MultipleDownloadActivity.java:209)
05-23 17:39:45.917: E/(5036):   at com.end.activities.filopeartions.MultipleDownloadActivity$MultipleDownloadAsyncTask.doInBackground(MultipleDownloadActivity.java:174)
05-23 17:39:45.917: E/(5036):   at android.os.AsyncTask$2.call(AsyncTask.java:264)
05-23 17:39:45.917: E/(5036):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
05-23 17:39:45.917: E/(5036):   at java.util.concurrent.FutureTask.run(FutureTask.java:137)
05-23 17:39:45.917: E/(5036):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
05-23 17:39:45.917: E/(5036):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
05-23 17:39:45.917: E/(5036):   at java.lang.Thread.run(Thread.java:856)
05-23 17:39:45.917: E/(5036): Caused by: libcore.io.ErrnoException: open failed: EINVAL (Invalid argument)
05-23 17:39:45.917: E/(5036):   at libcore.io.Posix.open(Native Method)
05-23 17:39:45.917: E/(5036):   at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
05-23 17:39:45.917: E/(5036):   at libcore.io.IoBridge.open(IoBridge.java:390)
05-23 17:39:45.917: E/(5036):   ... 13 more 
```

这是我的代码：

```
458    FileChannel outChannel = new FileOutputStream(mediaFileName).getChannel(); 
```

然后我做其他事情，但我认为新的 FileOutputStream 是它崩溃的地方。一个字符（肯定是 *）是原因，但我不明白为什么以及如何使它工作（因为在带有 adb shell 的 android 上，我可以创建一个具有此名称的文件）。任何想法 ？谢谢

# css - 如何让 ctags + scss 玩起来好听

> ID：10724140
> 
> 赞同：2
> 
> 时间：2012-05-23T16:28:22.530
> 
> 标签：css, vim, sass, ctags

**更新：** 这个问题已经过修改，以反映下面非常有用的评论和答案。我已经接受了答案，但到目前为止，全部功能都无法使用。

.ctags 的内容（在 ~/ 中）

```
-R
--exclude=.git
--exclude=log 
--verbose=yes
--langdef=scss
--langmap=scss:.scss
--regex-scss=/^[ \t]*([^\t {][^{]{1,100})(\t| )*\{/| \1/d,definition/
--regex-scss=/^[@]mixin ([^ (]+).*/\1/m,mixing/ 
```

当我将光标放在目标下方时，vim 说`E426 tag not found: tag_name`

考虑以下模式：

```
footer{
 .wrapper{
  .general-info{
   .footer-links{
     a{@include ticker($bg, $white);}
    }
   }
  }
 } 
```

在目录中的一个单独文件（modules.scss）中，我有ticker的定义：

```
@mixin ticker($color, $bg-color) {
 color: $color;
 background-color: $bg-color;
} 
```

当我将光标放在目标下时，vim 仍然说`E426 tag not found: tag_name`

ctags 不索引`ticker`mixin。但是我可以使用 ctags 直接从 SCSS gem 中查找方法（例如变暗）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T18:37:41.687

`\`使用 ctags 时，在最后一个之前添加一个`{`不会发出警告。我不知道生成的标签是否能给出预期的结果，因为我不懂语言。

结果将是：

```
--langdef=scss
--langmap=scss:.scss
--regex-scss=/^[ \t]*([^\t {][^{]{1,100})(\t| )*\{/| \1/d,definition/ 
```

更新：就像我上面提到的，我不懂语言，所以很难检查标签的实际定义。我在网上查看，以下代码在某些网页中列为 scss。假设您要获取的标签是混合后的单词。

```
@mixin table-scaffolding {      
  th {                          
    text-align: center;         
    font-weight: bold;          
  }                             
  td, th { padding: 2px; }      
}                               

@mixin left($dist) {            
  float: left;                  
  margin-left: $dist;           
}                               

#data {                         
  @include left(10px);          
  @include table-scaffolding;   
} 
```

然后使用以下内容：

```
--langdef=scss
--langmap=scss:.scss
--regex-scss=/^[ \t]*([^\t {][^{]{1,100})(\t| )*\{/| \1/d,definition/
--regex-scss=/^[@]mixin ([^ (]+).*/\1/m,mixin/
--regex-scss=/^[@]function ([^ (]+).*/\1/f,function/ 
```

你得到两个新标签`left`和`table-scaffolding`. 因此，如果我在`left`data 内部这个词中`ctrl+]`，它会跳转到定义数据的行。您必须小心其他关键字，因为它`-`在单词中有 a。因此，如果您在桌子上并按下`ctrl+]`，您将得到相同的错误标签未找到。为此，您必须在您的`.vimrc`

```
set iskeyword+=- 
```

您应该能够将上述内容概括为您需要的其他标签，甚至可以构建一个通用正则表达式来处理所有标签，就像您最初的意思一样。

如果您发布一个具体示例，说明您尝试使用的文件的外观，以及您尝试获取的标签是什么，我相信我或其他人将能够帮助找出一个表达方式。

# javascript - 如何从由 image_tag 等 Rails 助手生成的 HTML 中选择 DOM 元素？

> ID：10724142
> 
> 赞同：0
> 
> 时间：2012-05-23T16:28:26.363
> 
> 标签：javascript, ruby-on-rails

我有一个将 DOM 元素作为参数的 javascript 构造函数，我想传入从此 rails helper 生成的图像：

导轨助手：

```
<%= image_tag("/images/" + photo.file_name) %> 
```

JS：

```
function Tagger(element) {
     this.photo = element;
     ...
} 
```

不使用像 jQuery 这样的外部库的解决方案会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:47:07.710

这样的事情就足够了吗？

```
<%= image_tag("/images/" + photo.file_name, id: 'my_image_id') %>

<script>
  var element = document.getElementById('my_image_id');
   Tagger(element);
</script> 
```

**建议：**如果您使用的是 Rails，我建议您使用 jQuery（我知道您要求使用不带 jQuery 的解决方案），因为 Rails 默认提供它，它会让您的生活更轻松。

# c++ - 在 C++ 中重载日期类的 >> 运算符会导致无限循环

> ID：10724145
> 
> 赞同：0
> 
> 时间：2012-05-23T16:28:36.770
> 
> 标签：c++, date, overloading, infinite, istream

我正在尝试在 C++ 中为 Date 类重载 >> 运算符，但是当运行进入第一个 if 语句时，它会进入无限循环，你能帮帮我吗？

```
//operator
    istream& operator >>(istream& is,CustomDate& d){
        int day,month,year; 
        char ch1,ch2;
        string test;
        is>>skipws>>day>>ch1>>month>>ch2>>year;
        if(!is){
            is.clear(ios_base::failbit);
            return is;
        }
        if(ch1!='/' || ch2!='/')
            error("invalid date input");
        d = CustomDate(day,month,year);
        return is;
    } 
```

这是调用它的函数

```
CustomDate Menu::inputDate(){
    CustomDate date;
    cout<<"Input your departure date"<<endl;
    cin>>date;
    if(!cin){
        error("invalid date format");
    }
    return date;
} 
```

这是调用函数的循环

```
do{
    try{
        date = inputDate();
        validDate = true;
    }
    catch(runtime_error& e){
        cout<<"Date format not valid! must input as dd/mm/yyyy!"<<endl;
        validDate = false;
    }
}while(!validDate);

//customdate constructor
CustomDate::CustomDate()
    :day(1),month(1),year(2012){}

CustomDate::CustomDate(int day, int month, int year)
    :day(day),month(month),year(year){

    if(day<0 || day>30)
        error("Error: Date constructor");
    if(month<0 || month>12)
        error("Error: Date constructor");
    if(year<0)
        error("Error: Date constructor");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:31:18.397

您的代码有许多错误。该`do ... try ... catch`循环可能是一个无限循环，它也可能是不正确的。

如果您在输入流上启用了异常并且流提取语句中的解析在重载的`operator>>`. 您的代码永远不会重置流，因此一旦出现解析错误，您的代码就会陷入循环。永远。

如果您没有启用异常并且输入被破坏到足以使流提取语句以某种方式将流标记为“坏”怎么办？未启用异常，因此不会引发异常。您的代码（如果在流提取调用之后立即执行 if 语句，则为 then 分支）将执行。这也不会引发异常。`do ... try ... catch`会成功的。在这里，您的代码错误地将错误输入视为有效输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:42:05.287

正如我在评论中所说：

> *“clear() 函数应该清除流”*是什么意思？它不会丢弃流内容，因此如果流中有垃圾（例如无法解析为 int 的字符 'a'），它将永远不会“清除”该垃圾，只会继续重试。我认为问题在于 clear 不会像您认为的那样做。

如果它无法提取整数或分隔符错误，则不要从流提取运算符中抛出异常（也尝试使用更多空格以帮助使代码更具可读性）：

```
istream& operator >>(istream& is, CustomDate& d){
    int day, month, year;
    char ch1, ch2;
    if (is >> day >> ch1 >> month >> ch2 >> year)
    {
        if (ch1 == '/' && ch2 == '/')
            d = CustomDate(day, month, year);
        else
            is.setstate(ios::failbit);
    }
    return is;
} 
```

然后处理失败的提取`inputDate`

```
CustomDate inputDate(){
    CustomDate date;
    cout << "Input your departure date" << endl;
    if (cin >> date)
      return date;

    // something went wrong
    if (cin.eof())
        error("No more data in stream");
    else // cin.fail() is true, probably invalid date format
    {
        // clear error and discard input up to next newline
        cin.clear();
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
        error("invalid date format");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T16:55:43.113

我会修改您的示例，因为它依赖于能够输入多个项目，即 int char int char int。我会输入一个字符串。然后使用字符串流解析日期并检查其格式。

所以它可能是这样的：

```
istream& operator >>(istream& is,CustomDate& d){
    string dateStr;
    is>>dateStr;
    istringstream iss(dateStr);
    int day,month,year; 
    char ch1,ch2;
    if(!(iss>>day>>ch1>>month>>ch2>>year)){
        error("invalid date input");
        return is;
    }
    if(ch1!='/' || ch2!='/'){
        error("invalid date format use m/d/y");
        return is;
    }
    d = CustomDate(day,month,year);
    return is;
} 
```

我不确定这是否会修复任何无限循环，但这可能是检查输入的更好方法。

# perl - 比较perl中的两个文本文件并输出匹配的结果

> ID：10724154
> 
> 赞同：2
> 
> 时间：2012-05-23T16:29:07.910
> 
> 标签：perl, perl-module

我想比较从我编写的 perl 脚本之一生成的两个文本文件。我想从这两个文本文件中打印出匹配的结果。我尝试查看人们在 stackoverflow 上提出的几个答案和问题，但它对我不起作用。这是我尝试过的。

```
my $file1 = "Scan1.txt";
my $file2 = "Scan2.txt";
my $OUTPUT = "final_result.txt";
my %results = (); 
open FILE1, "$file1" or die "Could not open $file1 \n";
   while(my $matchLine = <FILE1>)
       {   
         $results{$matchLine} = 1;
    }
    close(FILE1); 
    open FILE2, "$file2" or die "Could not open $file2 \n";
   while(my $matchLine =<FILE2>) 
        {  
    $results{$matchLine}++;
        }
    close(FILE2);  
    open (OUTPUT, ">$OUTPUT") or die "Cannot open $OUTPUT \n";
    foreach my $matchLine (keys %results) { 
    print OUTPUT $matchLine if $results{$matchLine} ne 1;
    }
    close OUTPUT; 
```

我想要的输出示例

FILE1.TXT 数据1 数据2 数据3

FILE2.TXT 数据2 数据1

输出数据 1 数据 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:01:38.470

您的问题是您的哈希现在具有以下状态：

*   0（在任何地方都找不到行），
*   1（在 file1 中找到的行或在 file2 中找到的行），
*   2（在 file1 中找到的行，在 file2 中找到一次，或在 file2 中找到两次）
*   n（在 file1 中找到的行和在 file2 中的 n-1 次，或在 file2 中找到 n 次的行）

这种歧义将使您的检查（哈希 ne 1）失败。

您的算法所需的最小更改是：

```
my $file1 = "Scan1.txt";
my $file2 = "Scan2.txt";
my $OUTPUT = "final_result.txt";
my %results = (); 
open FILE1, "$file1" or die "Could not open $file1 \n";
   while(my $matchLine = <FILE1>)
       {   
         $results{$matchLine} = 1;
    }
    close(FILE1); 
    open FILE2, "$file2" or die "Could not open $file2 \n";
   while(my $matchLine =<FILE2>) 
        {  
    $results{$matchLine} = 2 if $results{$matchLine}; #Only when already found in file1
        }
    close(FILE2);  
    open (OUTPUT, ">$OUTPUT") or die "Cannot open $OUTPUT \n";
    foreach my $matchLine (keys %results) { 
    print OUTPUT $matchLine if $results{$matchLine} ne 1;
    }
    close OUTPUT; 
```

# odata4j - 如何将 OData4J 与未知数量的子对象一起使用？

> ID：10724155
> 
> 赞同：0
> 
> 时间：2012-05-23T16:29:10.777
> 
> 标签：odata4j

我正在尝试为`createEntity`其中包含多个子集合的对象构建 OEntity。

我查看了许多示例项目，但它们似乎都假设您在集合中有已知数量的子对象，以便您可以使用 .`inLine(“ObjectName”, ObjectOEntity1, ObjecteOEntity2…)`

我已经尝试查看文档，但没有发现任何让我认为我可以创建 OEntity 对象集合的内容，然后可以使用内联将这些对象添加到我的父对象中。

我找到的最接近的是下面列出的示例：

[http://code.google.com/p/odata4j/source/browse/odata4j-fit/src/test/java/org/odata4j/producer/jpa/northwind/test/CreateTest.java?name=0.6](http://code.google.com/p/odata4j/source/browse/odata4j-fit/src/test/java/org/odata4j/producer/jpa/northwind/test/CreateTest.java?name=0.6)

有没有其他人遇到过这个问题？
如果是这样，您是如何解决的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:55:10.777

你可以传入一个对象数组`OEntity`。odata4j 使用的 core4j 库包含一些辅助方法，例如，可用于从 中获取数组`Iterable`：

```
OEntity[] entitiesArray = Enumerable.create(entitiesIterable)
    .toArray(OEntity.class); 
```

但由于属性方法也有两种变体......

```
OCreateRequest<T> properties(OProperty<?>... props);
OCreateRequest<T> properties(Iterable<OProperty<?>> props); 
```

...添加一个`inline`直接采用`Iterable<OEntity>`.

# sed - 在 GVIM 或 awk 或 sed 中，如何在另一个文件中的不同文本列之后粘贴来自不同文件的一列文本？

> ID：10724158
> 
> 赞同：1
> 
> 时间：2012-05-23T16:29:25.760
> 
> 标签：sed, awk, vim

在 GVIM 中，如何在另一个文件中的不同文本列之后粘贴来自不同文件的一列文本？

-问候

![在此处输入图像描述](../Images/e72eba59bf9c2aacaa1d8307a77461bf.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T17:11:17.200

在源窗口中，选择具有*可视块*模式的列并将其拉出。

在目标窗口中，将光标放在第一列第一行的最后一个字符上（如果需要，添加几个空格）并点击`p`.

![演示](../Images/f65ed6278e7d400a02d8f8056690ae9b.png)

源窗口：

```
<C-v>G$y 
```

更改窗口：

```
<C-w>w 
```

目标窗口：

```
A<Space><Space><Esc>p 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:55:43.063

`Ctrl-v`您可以使用（如果您使用 mswin.vim 映射）选择所需的列`Ctrl-q`，然后将它们粘贴到第二个文件上。有关`:h visual-block`其他信息，请参阅。

# c# - 关于使用扩展方法的实践是否发生了变化，或者是否存在两种思想流派？

> ID：10724161
> 
> 赞同：2
> 
> 时间：2012-05-23T16:29:35.713
> 
> 标签：c#, extension-methods

当我第一次了解扩展方法时，我读到[了这个](http://msdn.microsoft.com/en-us/library/bb383977.aspx)：

> 一般来说，我们建议您谨慎地实施扩展方法，并且仅在必要时才实施。只要有可能，必须扩展现有类型的客户端代码应该通过创建从现有类型派生的新类型来实现。

然而，我多次看到在各种生产代码库中非常自由地使用扩展方法。

诚然，我的经验不能代表大多数人，但我想知道指导方针是否发生了变化，替代的设计理念，或者我是否碰巧看到了足够多的代码忽略了指导方针让我这么想？

**注意**：我并不是想引发一场辩论（这会立即导致这个问题结束） - 老实说，我一直在想这个问题，并且觉得我获得答案的最佳机会就在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:33:24.050

我认为所有这些亮点都是理论与实践之间的通常差异。理论上我们应该谨慎使用它们，但实际上我们不会。理论上，我们应该做很多我们在实践中不做的事情，在一般的生活中，不仅仅是编程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T17:35:27.220

多态性不适用于扩展方法，因为它们在编译时绑定。

```
ParentClass parentClass = new ParentClass();
ParentClass derivedClass = new DerivedClass(); 
```

如果这两个类都有一个名为 ExtensionMethod() 的扩展方法（我肯定看到过试图模仿虚拟/覆盖方法的扩展方法），那么这两个调用都会调用父类的扩展方法：

```
 parentClass.ExtensionMethod();
 derivedClass.ExtensionMethod(); 
```

为了实际使用派生扩展方法，您必须调用：

```
 ((DerivedClass)derivedClass).ExtensionMethod(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T17:03:52.483

扩展类是一个好方法，但它通常不适用于使用第三方库的代码（与教育/示例代码不同，这是生产代码的常见情况）。因此，如果有意义，请派生新类，但当它们使代码更具可读性时，请随意使用扩展方法。

有很多扩展方法的原因有很多：

*   通常你不能扩展一个类来添加可以使你的产品代码更具可读性的方法。即像String这样的值类型或像Stream这样的层次结构中的一些基类。
*   扩展方法是在不污染接口的情况下向接口添加方法的有价值的方法。LINQ 是一个很好的例子，它如何生成更具可读性的代码。
*   一些框架建议在特定情况下使用扩展方法。即，对于 MVC，建议向 HtmlHelper 添加扩展。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T17:17:12.990

我认为使用扩展方法有利有弊。

**优点：** 扩展方法可以看作访问者模式（GoF）。因此，它利用了模式，即在不修改代码的情况下，我们可以扩展一些功能。

**缺点：**尽管有优势，但为什么 MSDN 告诉我谨慎使用扩展方法是，IMO，扩展方法在某些时候会引起问题。首先，如果扩展方法的对象与扩展有不同的命名空间，我们应该知道它在哪里。这导致有时我们无法使用扩展中的一些重要功能。此外，我看到了很多滥用扩展的代码。由于扩展是基于Type的，所以有时该类型的对象确实不需要扩展，但是在编码时，我们应该看到很多扩展方法。

* * *

[更新]

IMO，关于扩展方法的滥用

1.  **对扩展方法使用如此通用的类型，例如 object**：如果有很多具有对象类型的扩展方法，并且该扩展只关注少数类型，那会让我们烦恼，因为每个对象都与方法链接。
2.  **与点运算符或误解的链接断开**：让我举个例子。有如下代码，我们应该依次调用 Read 和 Write 方法。但是，我们可以以相反的顺序调用这些方法。

    ```
    public static string Read(this string message)
    {
        //do something
        return message;
    }

    public static string Write(this string message)
    {
        //do something
        return message;
    }

    public static void Method()
    {
        "message".Read().Write();
        "message".Write().Read(); // this is problem!
    } 
    ```

# html - 在 Google 路线中显示终点

> ID：10724164
> 
> 赞同：0
> 
> 时间：2012-05-23T16:29:38.377
> 
> 标签：html, google-maps-api-3

我想将方向图的默认显示更改为：

*   显示终点的缩放图像，路线以蓝色表示
*   显示缩放气球和端点标记 (http://www.birdwingfx.com/jQuery_gps/demo_gps/gps_demo.html)

我制作了这个仅显示整个路线的基本脚本：

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBSHoB4rbbeXHf_KfV-pONQvTiSLIJH_G8&sensor=false">
    </script>
    <script type="text/javascript"> 
        var directionsDisplay;
        var directionsService = new google.maps.DirectionsService();
        var map;
        var bilzen = new google.maps.LatLng(50.87228390728491, 5.512539388885443);

        function initialize() {
            directionsDisplay = new google.maps.DirectionsRenderer();
            var Bilzen = new google.maps.LatLng(50.87228390728491, 5.512539388885443);
            var myOptions = {
                zoom:11,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            center: bilzen
        }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    directionsDisplay.setMap(map);
    }

  function calcRoute() {
    var start = document.getElementById("start").value;
    var end = document.getElementById("end").value;
    var request = {
        origin:start, 
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING,
        unitSystem: google.maps.DirectionsUnitSystem.metric
};
directionsService.route(request, function(response, status) {
  if (status == google.maps.DirectionsStatus.OK) {
    directionsDisplay.setDirections(response);
  }
});
  }
    </script>
  </head>
  <body onload="initialize()">
<form action="#" onsubmit="calcRoute(); return false;" >
    <input name="start" id="start" value="start" type="text">
    <input name="end" id="end" value="end" type="text">
    <input name="Submit" type="submit">
    </form>

    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:44:19.710

我在这里有一些技巧：http: [//jsfiddle.net/mR2LV/6/](http://jsfiddle.net/mR2LV/6/)单击提交，然后单击红色汽车图标以打开信息窗口。

此脚本假定路径仅为 A 点到 B 点（简单）。它使用两个独立的地图，一个进入信息窗口“气泡”和整体地图。这个想法是保留相同信息的两份副本，并将一份用于“缩放”。路线在变量中`path`。

```
minimap = new google.maps.Map(document.getElementById("minimap"), miniOptions);

if(document.getElementById("minimap")) {
    document.getElementById("minimap").style.display= "block";
    infomap.setContent(document.getElementById("minimap"));
}

var path = response.routes[0].overview_path;

google.maps.event.addListener(endMarker, 'click', function(event) {
    infomap.open(map, this);
    google.maps.event.trigger(minimap, 'resize'); 
    minimap.setCenter(path[path.length-1]);
});

<div id="map_canvas" style="width:100%; height:100%"></div>
<div id="minimap" style="width: 220px; height:200px; display: none"></div> 
```

# c# - 如何按列索引而不是按列 ID 绑定 Gridview？

> ID：10724174
> 
> 赞同：0
> 
> 时间：2012-05-23T16:30:26.500
> 
> 标签：c#, asp.net

通常将数据绑定到 gridview 列是这样的：

```
Text='<%# Bind("regionName") %>' 
```

如何改为按索引绑定？例如：

```
Text='<%# Bind(1) %>' 
```

原因是因为我使用 2D 列表作为数据源，而 2D 列表没有列名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:19:47.297

我使用了以下内容`List<string[]>`，它在转发器中工作，不确定gridview：

```
Text='<%# Eval("[1]")%>' 
```

# ajax - 为什么使用 Faye 进行聊天而不使用 Ajax (rails)

> ID：10724176
> 
> 赞同：0
> 
> 时间：2012-05-23T16:30:31.860
> 
> 标签：ajax, ruby-on-rails-3, chat, faye

我不确定使用 Faye 或其他一些推送系统而不使用 Ajax 有什么优势。

具体来说，我的意思是实现聊天和通知功能。

如果我制作了一个聊天消息模型，并且在我的帖子（其中有很多聊天消息）中，我可以在帖子页面中使用 Ajax 刷新消息并获得聊天功能。

我是否错过了 Faye 或 Ajax 的某些内容？是不是更有效率？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T16:50:53.993

Faye 正在建立一个连接，服务器可以通过该连接将数据推送到客户端。使用 Ajax，客户端必须请求数据，如果它不知道有新数据可用（聊天客户端就是这种情况），那么它必须定期轮询新内容。

是不是更有效率？如果聊天系统看到足够的流量，以至于您的轮询周期每次都在获取新数据，那么可能不会。另一方面，如果您有一个空闲的聊天室，那么所有轮询都将消耗资源，这可以通过让服务器推送数据来避免。

这样做的另一面是您保持与服务器的连接打开。如果您有大量空闲客户端，这可能对您不利。因此，对于哪种方法更好，或者甚至是混合方法（打开 Faye 连接以供主动使用，然后不频繁地空闲到 Ajax 轮询），它将是上下文敏感的。

# c# - 获取用于不透明度更改的发送控件的名称属性

> ID：10724177
> 
> 赞同：2
> 
> 时间：2012-05-23T16:30:33.693
> 
> 标签：c#, binding, casting, opacity, graphic

好的，我会尽力解释。

我有一个方法，“HandleGraphic”。此方法将是..通过对数函数处理给定控件的不透明度。

方法参数有：(object SendingObject, float From, float To)

我的问题是：我如何投射/绑定 SendingObject 以便能够直接操纵它的值/属性？

例如：假设文本框调用 HandleGraphic 方法。HandleGraphic 需要发送控件的 Name 属性“txtbox”来调整它的 Opacity 属性。

必须有一种方法可以实现强制转换或绑定的全局函数，以直接访问调用对象的属性。

例如：`SendingObject.Opacity = X;`

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:41:08.417

如果您在谈论 WPF（WinForms 控件没有 Opacity 属性），则 Name 和 Opacity 属性都是`Control`（特别是`System.Windows.Controls.Control`）的成员。为什么不把 HandleGraphic 的签名改成（Control control, float from, float to）呢？所有控件都派生自 Control，因此您可以将它们中的任何一个传递给该方法。

**更正**

该`Name`属性是 的成员，`FrameworkElement`并且该`Opacity`属性是 的成员`UIElement`。因此，要同时使用 Name 和 Opacity 属性，您至少需要一个`FrameworkElement`. `Control`仍然适用于您的目的，但您可能希望以最小的公分母为目标。例如， a`TextBlock`不是 a `Control`，它直接派生自`FrameworkElement`。

WPF 中的控件层次结构是：

```
Object
DispatcherObject
DependencyObject
Visual
UIElement
FrameworkElement
Control 
```

从那里开始变得复杂。例如：

```
Button : ButtonBase : ContentControl : Control
TextBox : TextBoxBase : Control
ComboBox : Selector : ItemsControl : Control
DataGrid : MultiSelector : Selector : ItemsControl : Control 
```

但它们都源自 源自`Control`哪个 源自`FrameworkElement`。

找出类型继承的最简单方法是将插入符号放在代码中的类型上，然后按 F12。这为您提供了一些描述类型的伪代码（或实际代码，如果可用），您可以以相同的方式浏览基类。

# .net - ASP.net 或 Windows 窗体条码扫描器

> ID：10724178
> 
> 赞同：1
> 
> 时间：2012-05-23T16:30:35.813
> 
> 标签：.net

我有一个模拟键盘的条形码扫描仪。所以，如果我打开记事本并扫描一张卡片，它会自动输入记事本并按 Enter。如果我打开我的应用程序并将光标放在文本框中，它也很好用。然而，用户可能希望在人们在他的办公桌上扫描系统时浏览网络。

如何设置条形码扫描仪直接进入应用程序的位置？

应用程序必须在后台运行（我假设）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:39:26.653

您必须不将条码扫描仪设置为键盘楔，而是将其设置为直接连接和读取的程序，例如标准 HID 设备。

如果它被用作键盘楔子，那么焦点必须保留在内容应该被扫描到的文本框中。

[http://www.lvr.com/hidpage.htm](http://www.lvr.com/hidpage.htm)有一些关于编写自己的 HID 接口的不错的信息。我过去曾使用过这种方法的变体来使用符号扫描器与 winform 应用程序进行交互。除非你使用一些 active-x 组件，否则我认为你无法使用 Web 技术来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T06:10:20.890

您必须设置全局挂钩或 Windows 挂钩才能执行此操作。

# c - 在 C 中逐行读取并识别元素

> ID：10724187
> 
> 赞同：0
> 
> 时间：2012-05-23T16:31:13.053
> 
> 标签：c, file-io

我有一个文件，它的行就是这种形式。

```
39.546147  19.849505  Name  Last 
```

而且我不知道我有多少行。我想要的是逐行阅读文本并简单地保留这四个元素中的每一个分隔变量。（在这种情况下，有 2 个浮点数和 2 个字符串 -char[]。）

到目前为止，我的代码是这样的：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
   FILE * file1;

file1 = fopen("args.txt","r");
float var0;
float var1;
char S1 [128];
char S2 [128];
int assignments;

if ( file1 != NULL ){
    char line [ 256 ];
    while ( fgets ( line, sizeof line, file1 ) != NULL ) //read a line
    {
        //printf("%s\n",line);
        assignments = fscanf( file1, "%f %f %s %s",&var0, &var1, &S1, &S2 );
            if( assignments < 4 ){
                fprintf( stderr, "Oops: only %d fields read\n", assignments );
            }
        printf("%f --- %f ---- %s ---- %s  \n",var0, var1,S1,S2);
    }
    fclose ( file1 );

}
else {
    perror ( "args.txt" ); /* why didn't the file open? */
}
return 0;
} 
```

我得到的结果是它只读取一个元素。你能帮我吗？

args.txt 示例

```
39.546147  19.849505  george  papad 

39.502277  19.923813  nick  perry 

39.475508  19.934671  john  derrick 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:39:49.057

您正在使用 fgets 读取一行文本，然后将其丢弃（因为您再次使用 fscanf 读取）。

考虑使用函数 feof，而不是调用 fgets 作为您的 while 循环保护。因此，循环保护将变为

```
while(!feof(file1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T16:49:10.597

代替

```
assignments = fscanf( file1, "%f %f %s %s",&var0, &var1, &S1, &S2 ); 
```

经过

```
assignments = sscanf( line, "%f %f %s %s",&var0, &var1, &S1, &S2 ); 
```

更新：下面的程序在这里工作。

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
FILE * file1;

float var0;
float var1;
char S1 [128];
char S2 [128];
char line [ 256 ];
int assignments;

file1 = fopen("args.txt","r");

if ( file1 == NULL ){
        perror ( "args.txt" ); /* why didn't the file open? */
        return 1;
        }

    while ( fgets ( line, sizeof line, file1 ) != NULL ) //read a line
    {
        //printf("%s\n",line);
        assignments = sscanf( line, "%f %f %s %s",&var0, &var1, S1, S2 );
            if( assignments < 4 ){
                fprintf( stderr, "Oops: only %d fields read\n", assignments );
                continue; /* <<----- */
            }
        printf("%f --- %f ---- %s ---- %s  \n",var0, var1,S1,S2);
    }
    fclose ( file1 );

return 0;
} 
```

OUTPUT（用于带有空行的输入文件）

```
39.546146 --- 19.849504 ---- george ---- papad  
Oops: only -1 fields read
39.546146 --- 19.849504 ---- george ---- papad  
39.502277 --- 19.923813 ---- nick ---- perry  
Oops: only -1 fields read
39.502277 --- 19.923813 ---- nick ---- perry  
39.475510 --- 19.934671 ---- john ---- derrick 
```

这是意料之中的，oops 块中应该有一个 continue （或等效的）。

我添加了继续说明。

带有 continue 的程序的输出：

```
39.546146 --- 19.849504 ---- george ---- papad  
Oops: only -1 fields read
39.502277 --- 19.923813 ---- nick ---- perry  
Oops: only -1 fields read
39.475510 --- 19.934671 ---- john ---- derrick 
```

# google-chrome - 如何在上下文菜单中添加书签？

> ID：10724188
> 
> 赞同：0
> 
> 时间：2012-05-23T16:31:21.827
> 
> 标签：google-chrome, google-chrome-extension

我想在上下文菜单中添加一个书签。

这是我的书签：

> javascript:(function(){var a=window.open(' [http://localhost/test/mm.php?title=](http://localhost/test/mm.php?title=) '+encodeURIComponent(document.title),'test','left='+((window .screenX||window.screenLeft)+50)+',top='+((window.screenY||window.screenTop)+50)+',height=300px,width=700px,resizable=1,alwaysRaised=1 ,location=1,links=0,scrollbars=0,toolbar=0');window.setTimeout(function(){a.focus()},300)})();

这是我的代码：

```
function getClickHandler() {
  return function(info, tab) {

  };
};

chrome.contextMenus.create({
  "title" : "Hello",
  "type" : "normal",
  "onclick" : getClickHandler()
}); 
```

但是现在，我不知道在哪里插入小书签。

**@wong2：**

这是我的新 getClickHandler 但它不起作用：

```
function getClickHandler() {
  return function(info, tab) {
      chrome.tabs.executeScript(tab.id, {
          code: "(function(){var a=window.open('http://localhost/test/mm.php?title='+encodeURIComponent(document.title),'test','left='+((window.screenX||window.screenLeft)+50)+',top='+((window.screenY||window.screenTop)+50)+',height=300px,width=700px,resizable=1,alwaysRaised=1,location=1,links=0,scrollbars=0,toolbar=0');window.setTimeout(function(){a.focus()},300)})();"
      });
  };
}; 
```

清单.json：

```
{
  "name" : "testtt",
  "version" : "1.0.1",
  "description" : "test button",
  "background" : { "scripts": ["background.js"] },
  "permissions" : [
    "contextMenus",
    "tabs",
    "http://*/*",
    "https://*/*"
   ],
  "minimum_chrome_version" : "6.0.0.0",
  "icons" : {
    "16" : "imageinfo-16.png",
    "48" : "imageinfo-48.png",
    "128" : "imageinfo-128.png"
  },
  "manifest_version": 2
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:35:49.543

您可以尝试[chrome.tabs.executeScript](http://code.google.com/chrome/extensions/tabs.html#method-executeScript)将代码插入页面：

```
function getClickHandler() {
  return function(info, tab) {
      chrome.tabs.executeScript(tab.id, {
          code: YOUR_CODE_IN_STRING_HERE
      });
  };
}; 
```

# c# - 如何更新已部署的 web 打包？

> ID：10724189
> 
> 赞同：1
> 
> 时间：2012-05-23T16:31:34.863
> 
> 标签：c#, asp.net, visual-studio-2010, web-deployment

我喜欢使用 Web Deyploment 部署 Web 应用程序。我需要将包交给将安装它的管理员。管理员通过 IIS 管理器的 UI 安装包。安装时需要填写很多参数。到目前为止，这些参数工作正常。

但现在我需要更新部署的包。如何做到这一点而不需要再次填写参数？到目前为止我找到的所有方法都需要再次输入参数。所以我一定监督了什么。

谢谢。

# android - ImageView - 在顶部绘制半透明颜色以获取焦点状态？

> ID：10724198
> 
> 赞同：6
> 
> 时间：2012-05-23T16:32:00.190
> 
> 标签：android

我有一个 ImageView，我想要一个选择器，这样当用户单击或以其他方式获得焦点时，会在 ImageView 内容的顶部绘制半透明颜色。我不确定这是否可以使用选择器（我过去一直用静态可绘制对象定义好）。

但基本上我在每一行都有一个带有 imageview 实例的列表视图，并且想做类似的事情：

```
ImageView iv = ...;
iv.setBitmapDrawable(bitmapLoadedFromInternets()); // dynamic content
iv.setClickStateOverlayColor(0x33ff0000); // ? 
```

通常 ImageView 仅通过 setBitmapDrawable() 获取单个可绘制对象，但选择器 (1) 为不同的单击状态交换可绘制对象，而我只想要绘制颜色叠加层，并且 (2) 关闭状态是动态位图，所以我无法从选择器定义中引用它。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T16:45:40.540

如果您创建自己的`ImageView`. 使用的方法是[setColorFilter](http://developer.android.com/reference/android/widget/ImageView.html#setColorFilter%28int,%20android.graphics.PorterDuff.Mode%29)。这样的事情会做到这一点：

```
public class ImageView extends android.widget.ImageView
{
    public ImageView(Context context)
    {
        super(context);
    }

    public ImageView(Context context, AttributeSet attrs)
    {
        super(context, attrs);
    }

    public ImageView(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event)
    {
        if(event.getAction() == MotionEvent.ACTION_DOWN && isEnabled())
            setColorFilter(0x33ff0000, PorterDuff.Mode.MULTIPLY); //your color here

        if(event.getAction() == MotionEvent.ACTION_UP)
            setColorFilter(null);

        return super.onTouchEvent(event);
    }
} 
```

然后，您可以在 XML 布局中使用它，只需引用完全限定的 like`my.package.ImageView`而不是`ImageView`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-16T14:05:42.723

由于多种原因，onTouch 的解决方案对我不起作用，但给了我关于如何做到这一点的提示，以便它对我有用。我只是重写了 ImageView 中的另一个方法。

```
@Override
    public void setPressed(boolean pressed) {
        if (pressed) {
            setColorFilter(0x55000000, PorterDuff.Mode.SRC_ATOP);
        }
        else {
            clearColorFilter();
        }
        super.setPressed(pressed);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-21T08:16:47.253

这对我有用

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/grid" />
    <item>
        <selector>
            <item android:state_pressed="true">
                <color android:color="#7000" />
            </item>
        </selector>
    </item>

</layer-list> 
```

# c++ - 如何在 3D 点上绘制文本？

> ID：10724202
> 
> 赞同：1
> 
> 时间：2012-05-23T16:32:16.483
> 
> 标签：c++, 3d, screen-projection

我想在 3D 点上绘制文本。文本请求 2D 点 rect xy x1 y1

我使用 irrlight 引擎。但我只需要公式。

```
i have:
core::vector3df point;

core::rect<s32> viewport = driver->getViewPort();
core::matrix4 matProj = driver->getTransform(video::ETS_PROJECTION);
core::matrix4 matView = driver->getTransform(video::ETS_VIEW);
core::matrix4 matWorld = driver->getTransform(video::ETS_WORLD);

core::quaternion point_qua(point.X ,point.Y , point.Z , 1);

// formula
point_qua = point_qua*(matWorld*matView*matProj);

std::cout << "\nX=" << point_qua.X;
std::cout << "\nY=" << point_qua.Y; 
```

但 x 和 y 坐标不正确。他们给我负y。和左上角的文字绘图。这个公式正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:19:48.670

几乎。

您拥有的公式为您提供了 OpenGL 屏幕空间中的位置，从 [-1, -1] 到 [1, 1]。OpenGL 屏幕空间中的位置如下所示：

```
[-1, 1]-----------------------------------------[1, 1]
   |                                               |
   |                                               |
   |                                               |
   |                                               |
   |                                               |
   |                    [0, 0]                     |
   |                                               |
   |                                               |
   |                                               |
   |                                               |
   |                                               |
[-1, -1]----------------------------------------[1, -1] 
```

要以像素为单位，请按如下方式进行转换：

```
pixelsX = (1 + point.X) * Viewport.Width / 2;
pixelsY = (1 - point.Y) * Viewport.Height / 2; 
```

# c++ - 编译递归模板调用静态成员函数时类型不完整

> ID：10724207
> 
> 赞同：1
> 
> 时间：2012-05-23T16:32:56.267
> 
> 标签：c++, templates, cygwin

我正在 Windows 上使用 g++ 3.4.4 版编译此代码：-

```
#include <iostream>

template< int i >
class LOOP{
 public:
    static inline void EXEC(int* count){
        (*count)++;
            LOOP< i-1 >::EXEC(count);
   }
};

template<> class LOOP< 0 >{
  public:
    static inline void EXEC(int* count){
   (*count)++;
   }
};

 int main(int i){

int barely = 0;
LOOP< 1000 >::EXEC(&barely);
 } 
```

它抱怨，嵌套名称说明符中使用的类型 LOOP<500> 不完整，并且在它之前有一个先前实例化的列表，“从静态 void LOOP::EXEC(int *) 实例化 i - 1000”等等。

当我将其更改为 LOOP<100> 时，它编译得很好。

*编辑*如果这会影响实现限制，我将在 cygwin 上运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:02:58.513

您达到了实现的模板深度限制。`-ftemplate-depth=1005`您可以通过使用(modern GCC) 或`-ftemplate-depth-1005`(older GCC)编译来增加限制。

# java - 如何从容器中删除死线程

> ID：10724209
> 
> 赞同：0
> 
> 时间：2012-05-23T16:33:01.930
> 
> 标签：java, multithreading

我将线程存储在容器中。随着时间的推移，这些线程中的一些会运行，而其中一些会死掉。我想要实现的是：自动（或定期）从容器中删除死（停止）线程。做这个的最好方式是什么？

**编辑：**我将线程存储在一个简单的链表中：

```
LinkedList<ServerThread> threadPool = new LinkedList<ServerThread>(); 
```

这个容器必须是动态的，因为随着时间的推移，我必须添加（并且显然是删除）线程。

EDIT2：这就是我目前管理线程的方式。正如你所看到的，我等待传入的连接，我不知道它什么时候会到达，但是当它到达时，我必须在一个新线程中处理它。

```
while (!interrupted()) {
            try {
                Socket clientSocket = serverSocket.accept();
                if (portNumber == Server.SMTP_PORT_NUMBER) {
                    threadPool.add(new SMTPThread(clientSocket, db));
                    threadPool.getLast().setName("SMTP Thread " + ++threadCounter);
                } else {
                    threadPool.add(new POP3Thread(clientSocket, db));
                    threadPool.getLast().setName("POP3 Thread " + ++threadCounter);
                }

                threadPool.get(threadPool.size() - 1).start();

            } catch (SocketTimeoutException e) {
            } catch (IOException ioe) {
            }
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T16:46:21.283

除非有特定原因，否则您不应维护自己的线程列表。我建议使用`ExcecutorService`自 Java 5 以来可用的优秀类。如下所示：

```
// create a thread pool with 10 workers
ExecutorService threadPool = Executors.newFixedThreadPool(10);
// or you can create an open-ended thread pool
// ExecutorService threadPool = Executors.newCachedThreadPool();
for (Job job : jobsToDo) {
    threadPool.submit(new MyJobProcessor(job));
}
// once we have submitted all jobs to the thread pool, it should be shutdown
threadPool.shutdown();
...
public class MyJobProcessor implements Runnable {
    private Job job;
    public MyJobProcessor(Job job) {
        this.job = job;
    }
    public void run() {
        // process the job
    }
} 
```

线程池将负责维护池中正在运行的线程。线程将在下一个作业中重新使用，并且当池中没有更多作业并且它已被关闭时将被关闭。您不需要自己收获任何死线。

* * *

**编辑**：

就您发布的代码而言，要从池中删除已完成的线程，您应该像这样运行它们：

```
 Iterator<ServerThread> iterator = threadPool.iterator();
 while (iterator.hasNext()) {
     ServerThread thread = iterator.next();
     if (!thread.isAlive()) {
        // remove it from the linked list
        iterator.remove();
     }
 } 
```

每次向池中添加新线程*后，*我都会这样做。另外，请记住进行方法调用`LinkedList`效率不高。`get(#)`我建议您调整代码以执行以下操作：

```
 Socket clientSocket = serverSocket.accept();
            ServerThread serverThread;
            if (portNumber == Server.SMTP_PORT_NUMBER) {
                serverThread = new SMTPThread(clientSocket, db);
                serverThread.setName("SMTP Thread " + ++threadCounter);
            } else {
                serverThread = new POP3Thread(clientSocket, db);
                serverThread.setName("POP3 Thread " + ++threadCounter);
            }
            serverThread.start();
            threadPool.put(serverThread); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T16:42:45.270

您可以使用 a来安排将在列表中运行并删除死线程`Timer`的周期。`TimerTask`这是一个草图：

```
static final List<Thread> threads = new LinkedList<Thread>();
static final Timer timer = new Timer(true);
public static void main(String[] args) {
  timer.scheduleAtFixedRate(new TimerTask() {public void run() {
    for (Iterator<Thread> it = threads.iterator(); it.hasNext();)
      if (!it.next().isAlive()) it.remove();
  }}, 0, 10000);
} 
```

# ruby - Ruby 中的私有方法应该放在哪里？

> ID：10724221
> 
> 赞同：101
> 
> 时间：2012-05-23T16:34:05.720
> 
> 标签：ruby, conventions

大多数博客、教程或书籍在任何类/模块的底部都有私有方法。这是最佳做法吗？

我发现在必要时使用私有方法更方便。例如：

```
public
def my_method
  # do something
  minion_method
end

private
def minion_method
  # do something
end

public
def next_method
end 
```

这样我发现代码更具可读性，而不是连续上下滚动，这很烦人。

这种方法有什么严重的错误吗？在底部拥有私有方法不仅仅是最佳实践和其他东西吗？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-05-23T17:32:12.710

在我看来，最佳实践是按顺序进行并声明您的方法，而不是保持私有的观点。

最后，您可以通过添加以下内容将任何方法设为私有：`private :xmethod`

例子：

```
class Example
 def xmethod
 end

 def ymethod
 end

 def zmethod 
 end

 private :xmethod, :zmethod

end 
```

这是否证明了你的问题？

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2014-06-20T19:11:41.260

从 Ruby 2.1 开始，还可以选择`private`在方法定义之前添加。

```
class Example
 def xmethod
 end

 private def ymethod
 end

 private_class_method def self.zmethod 
 end
end 
```

您可以立即查看一个方法是否是私有的，无论它在（大）文件中的什么位置。它与许多其他语言一致。但它需要更多的打字并且不能很好地对齐。

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2012-05-23T16:46:36.863

正如其他人已经指出的那样，约定是将私有方法放在底部，在一个私有类下。但是，您可能还应该知道，许多程序员为此使用双缩进（4 个空格而不是 2 个）方法。原因是您通常不会在文本编辑器中看到“私人”，并认为它们可能是公共的。请参阅下面的插图：

```
class FooBar

  def some_public_method
  end

  def another_public_method
  end

private

    def some_private_method
    end

    def another_private method
    end

end 
```

这种方法应该可以避免您不得不上下滚动，并使其他程序员在您的代码中更加舒适。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-05-23T16:36:26.937

我认为公共方法是对象的某种接口，将它们放在最显眼的位置，即文件顶部是合乎逻辑的。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2012-05-23T16:38:09.870

你不需要把`public`或`private`放在每个方法之上。我通常把我所有的私有方法放在课堂的底部。此外，不必明确说明`public`方法是默认公开的。例如：

```
class FooBar

  def some_public_method
  end

  def another_public_method
  end

private

  def some_private_method
  end

  def another_private method
  end

end 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-04-08T22:28:20.197

`private`一种风格是将方法组合在一起，这样`protected`每个类最多只能使用一次。另一种风格是在方法定义之后立即指定可见性：

```
class Example
  def my_private_method
  end
  private :my_private_method

  def my_public_method
  end
end 
```

从 Ruby 2.1.0 开始`def`，方法名称作为符号返回，因此可以使用更流线型的样式：

```
class Example
  private def my_private_method
  end

  def my_public_method
  end

  protected def my_protected_method
  end

  private_class_method def self.my_private_class_method
  end
end 
```

（请注意，我们使用`private_class_method`类方法——否则我们会得到`NameError: undefined method`，因为`private`需要一个实例方法。即使在原始示例中将它用作宏时，它也只会影响实例方法的可见性。）

我最喜欢这种内联可见性样式，因为它允许您根据需要组织方法。它降低了在错误位置添加新方法并无意中将其设为私有的风险。

至于类方法语法，你可以这样处理：

```
class Example
  private def my_private_method
  end

  class << self
    private def my_private_class_method
    end
  end
end 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-05-13T19:06:36.213

我来自 java 背景，我讨厌滚动查看方法类型。我认为无法在没有丑陋的情况下指定每个方法的方法可见性是很疯狂的。所以我最终`#private`在每个suck方法之前添加了一个评论，然后声明`private :...`.

更新：在最近的红宝石中，可以写`private def method_name`所以上面的相关性要小得多。

更新 2：实际看到 @devpuppy 的答案，它有更多的解释。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-05-23T16:48:03.093

我不喜欢为每种方法指定公共或私有。将所有私有方法放在底部让我每个文件都有一个“私有”实例。我想这是一个品味问题。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-11-01T00:15:19.663

丹尼斯有一个完美的答案，即当使用 ruby​​ >=2.1 时，只需在 def 前加上 private（或 protected，public）

但我相信现在也可以将 private 用作块，如下所示：

```
private begin
   def foo
   end
   def bar
   end
end

def zip
end 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-03-12T18:10:29.967

我通常按​​如下方式订购我的方法：

1.  构造函数
2.  其他公共方法，按字母顺序
3.  `private`, 只写一次
4.  私有方法，按字母顺序

我在我的编辑器中使用“转到定义”功能，因此这不会涉及太多滚动，并且无论如何，如果类足够大以至于滚动变得有问题，它可能应该分成几个类。

# javascript - Uncaught ReferenceError: $ is not defined ，同时制作谷歌浏览器扩展

> ID：10724223
> 
> 赞同：0
> 
> 时间：2012-05-23T16:34:16.660
> 
> 标签：javascript, jquery, jquery-plugins

我在*manifest.json*文件的标签下定义了一个*jquery.js*文件。Jquery.js 运行为：`content_script`

 *```
console.log('showMessage');
shows the expected string in console, but when I add
console.log($("p.js-tweet-text")); 
```

它说这`$`是未定义的。有人可以帮忙吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T16:52:08.827

两个常见的陷阱。首先，脚本的顺序`manifest.json`很重要，因此请确保首先加载 jQuery。否则，`$`当您请求对象时，该对象可能不在附近：

```
{
  ...
  "content_scripts": [
    {
      ...
      "js": ["jquery.js", "my.js"]
    }
  ],
  ...
} 
```

其次，请记住[内容脚本在它们自己的执行环境中运行](http://code.google.com/chrome/extensions/content_scripts.html#execution-environment)，因此您无法从浏览器环境（即控制台）与内容脚本中定义的对象进行交互。*

# objective-c - 制作结构与对象所需的计算量

> ID：10724227
> 
> 赞同：1
> 
> 时间：2012-05-23T16:34:43.980
> 
> 标签：objective-c, ios, optimization, object, struct

关于在 iOS 设备上运行的 Objective-C：

为了优化电池消耗（从而最大限度地减少时钟周期的使用），我关心 iOS 设备创建和存储结构所需的工作量与创建和存储对象所需的工作量。

对象是否被神奇地优化以使差异可以忽略不计，或者是否存在与创建对象相关的开销？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:19:18.293

我怀疑这方面的任何优化都是神奇的，但考虑到电池寿命对用户体验质量的重要性，Apple 已经处理了它是一个很好的猜测。遵循常识准则，您将对电池寿命产生更大的影响：

*   **懒惰：**不要做很多用户可能永远不需要的工作。

*   **不要不必要地使用网络和 GPS：**无线电会消耗大量电力。

*   **做一个好公民：**当涉及到让你的应用程序被暂停之类的事情时，使用框架而不是反对它。

*   **配置文件：**使用 Instruments 来配置应用程序的电池消耗。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:52:23.707

与 C 结构相比，分配和初始化 Objective C 对象的工作必然更多。由于 iOS 创建了如此多的对象以及在 iOS 上运行的应用程序，Apple 已经很好地优化了这个过程。在大多数情况下，与应用程序中完成的其余处理工作相比，差异相形见绌。

如果您正在处理可以用简单结构而不是对象表示的大量对象，则分配结构可能比分配和初始化对象更有效。

如果您尝试重新创建 Objective C 运行时的功能以避免使用对象而不是结构，那么您的代码很可能比 Apple 优化的 Objective C 运行时效率低。您很可能会用更有效的存储分配换取效率较低的数据处理。

我的建议是不要担心对象创建开销。为了实现您所表达的目标，延长电池寿命，您最好听取 Caleb 的建议。分析应用程序以查看它在哪里工作最困难，并集中精力改进这些领域，这比试图通过避免对象来对抗框架更有好处。

# html - 如何在背景图片下显示文字？

> ID：10724229
> 
> 赞同：5
> 
> 时间：2012-05-23T16:34:50.517
> 
> 标签：html, css, layout

我正在制作一个网站，其中三个`<li>`都向左浮动，它们每个都有特定图像的背景。我在每个文本中都有文本，`<li>`我想移动该文本，使其显示在背景下而不是背景上。这种布局的css是什么？

下面我有一个我希望布局的示例。谢谢您的帮助。

====== ====== ======
| | | | | |
| | | | | |
====== ====== ======
  文字文字文字

我没有 ASCII 艺术技能，但希望你能明白。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T16:36:55.647

将文本设置在一个`margin-top`等于背景图像高度的范围内。跨度需要`display: block`为此工作。或者，更好的是，只需设置`padding-top`等于背景图像的高度，使用`background-image-repeat: no-repeat`.

有关工作示例，请参阅[http://jsfiddle.net/77NdE/ 。](http://jsfiddle.net/77NdE/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T16:41:43.600

我假设您将高度设置为固定大小。如果是这种情况，您可以将 设置`padding-top`为与图像的高度相同，只要`background-repeat`是`no-repeat`，您应该在下面看到您的评论。

示例：http: [//jsfiddle.net/qTB8E/](http://jsfiddle.net/qTB8E/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T16:40:27.610

你可以为你的 li 元素指定一个固定的高度。高度将是“正在使用的背景图像的高度”+“在它下面的文本所需的高度”。然后在 li 元素的顶部应用填充，该填充等于背景图像的高度。

假设背景图像的高度是 14px，假设它下面的文本是 12px。然后，

```
li
{
height: 26px; /* 14 + 12 */
background-image: url(path/to/image);
background-position: top;
background-repeat: no-repeat; /* you can even repeat x if required */
padding-top: 14px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T16:38:22.353

增加 div 的高度以适应文本和背景。将背景设置为不重复并为文本提供填充顶部。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T16:47:13.917

用伪类试试

```
<ul>
<li id="background"></li>
<li>Text</li>
<li id="background"></li>
<li>Text</li>
<li id="background"></li>
<li>Text</li>
</ul> 
```

CSS

```
ul {}
ul li:nth-child(even) {padding-top:20px} 
```

所以每一秒（每个偶数）li 元素都会从顶部有一个 20px 的填充（将其更改为您的 li 背景高度或更高）将“偶数”更改为“奇数”以使每个奇数对齐。希望你能明白我的意思:)

# ruby-on-rails - 我不小心删除了我的 Gemfile。我可以恢复吗？

> ID：10724230
> 
> 赞同：2
> 
> 时间：2012-05-23T16:35:01.647
> 
> 标签：ruby-on-rails

我不小心删除了我的 Gemfile`rm Gemfile` 我可以恢复它或重新创建一个吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T16:45:21.603

如果您使用 git（如您在评论中所说）：

```
git checkout -- Gemfile 
```

# ios - iOS Developer 帐号下创建的应用程序可以分发到 iOS Developer Enterprise 帐号中吗？

> ID：10724231
> 
> 赞同：0
> 
> 时间：2012-05-23T16:35:02.807
> 
> 标签：ios, software-distribution, ios-provisioning, provisioning-profile

我参考[http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/DistributinganApp/DistributinganApp.html#//apple_ref/doc/uid/TP40011159-CH31-SW1](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/DistributinganApp/DistributinganApp.html#//apple_ref/doc/uid/TP40011159-CH31-SW1)

和

[http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandDownloadingaDistributionProvisioningProfile/CreatingandDownloadingaDistributionProvisioningProfile.html](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandDownloadingaDistributionProvisioningProfile/CreatingandDownloadingaDistributionProvisioningProfile.html)

我的问题是：

我有一个 iOS 应用程序，其中包含在 iOS 开发人员帐户下创建的开发配置文件。

我的 iOS 应用程序是否可以通过内部分发方法在购买了 iOS 开发者企业计划的企业中分发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:45:39.583

您将需要使用该企业的许可证重新构建和存档该应用程序并重新发布它。

# php - 无法通过 capistrano 和 symfony2 bin/vendors 安装使用代理转发的 ssh 密钥

> ID：10724232
> 
> 赞同：4
> 
> 时间：2012-05-23T16:35:10.187
> 
> 标签：php, symfony, capistrano, capifony, ssh-agent

我们使用 ssh 代理转发将 Symfony2 项目部署到我们的服务器。这工作正常，我们使用 capistrano 从 github 执行 git clone 等没有问题。

但是，对于 Symfony2，您需要执行 bin/vendors install 以获取最新的 deps。这个供应商脚本 ( [https://github.com/symfony/symfony-standard/blob/2.0/bin/vendors](https://github.com/symfony/symfony-standard/blob/2.0/bin/vendors) ) 是一个执行“system()”命令的 php 脚本，例如 git pull。

在 capifony（capistrano 和 symfony 的插件）中实现了供应商命令，我们对其进行了一些修改以使用 try_sudo，由于我们自己的托管平台需要进行更改。这非常适合来自 github 的公共 https:// url

`try_sudo "sh -c 'cd #{latest_release} && #{php_bin} bin/vendors install'"`

我们面临的问题是，当使用 git@github.com 格式时（需要一些私有 repo 以及当我们想要修改捆绑包并将更改推回时）ssh-agent 不可用，因此我们的转发密钥丢失并且我们得到权限被拒绝的错误。

*   切换到 https:// 格式听起来很容易解决，但私人仓库要求输入密码。
*   在 system() 命令中启动 ssh-agent 有效，但是密钥仍然不存在。

所以不知道进一步寻找什么。将 ssh-agent 传递到 php 供应商脚本的某种方式可能是什么？

**更新**：

我找到了答案，出于安全原因，sudo 删除了所有环境变量，因此您永远无法附加到现有的 ssh 代理。

在[https://serverfault.com/questions/107187/sudo-su-username-while-keeping-ssh-key-forwarding](https://serverfault.com/questions/107187/sudo-su-username-while-keeping-ssh-key-forwarding)我发现了错误和解决方案。通过将默认值 env_keep+=SSH_AUTH_SOCK 添加到 /etc/sudoers，然后对代理套接字进行 chmodding 以便您正在 sudo 访问的用户可以访问它，您可以保留 ssh 代理。

但是请仔细阅读线程，这样做是不安全的。注销时代理会被销毁，因此在我们的 capistrano 部署序列中，结合没有不受信任用户的服务器，我认为这可能是可以接受的。除非我记错了？

# eclipse - netbeans中的打开方法

> ID：10724234
> 
> 赞同：2
> 
> 时间：2012-05-23T16:35:15.813
> 
> 标签：eclipse, netbeans, shortcut

如何在 Netbeans 中打开方法？在 Eclipse 中使用 F3 来打开或移动到该类或其他类中的方法的示例。我使用哪个快捷键？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T16:37:12.023

最简单的方法，按 ctrl 键并用鼠标单击方法名称。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T12:54:25.187

`Ctrl`+`B`

来源：对于最新版本，请访问[http://netbeans.org/kb/index.html](http://netbeans.org/kb/index.html) ，然后单击页面上的“键盘快捷键卡”链接。否则，[请单击此处](http://netbeans.org/project_downloads/usersguide/shortcuts-72.pdf)查看版本 7.2。

# shell - 以下脚本行的作用是什么。./pull.env 和 mailstatusFile=./.mailstatus

> ID：10724243
> 
> 赞同：1
> 
> 时间：2012-05-23T16:35:52.340
> 
> 标签：shell, unix

以下脚本行的作用是什么。./pull.env 和 mailstatusFile=./.mailstatus

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:38:28.767

点是“源”的同义词——它在当前会话中加载脚本文件。因此，假设您有一个名为 foo 的脚本，其内容为：

```
 PS1="XXX" 
```

如果你在 bash 的命令行上执行它，你会看到：

```
 $
 $ PS1="XXX"
 XXX 
```

成为`XXX`你的提示。

如果您使该脚本可执行并运行它，您会看到：

```
 $ chmod a+x foo
 $ ./foo
 $ 
```

因为当你运行一个 shell 脚本时，shell 会创建一个新进程。新进程中的提示发生了变化，但在当前进程中没有。

如果您`source`使用脚本，您将获得与在当前 shell 中键入它一样的效果

```
 $
 $ source ./foo
 XXX 
```

...正如我所说，'。是同义词`source`

```
 $
 $ . ./foo
 XXX 
```

# ruby - BigDecimal 不能被强制转换为 BigDecimal

> ID：10724253
> 
> 赞同：6
> 
> 时间：2012-05-23T16:36:29.030
> 
> 标签：ruby, serialization, yaml, bigdecimal

这应该很简单，但它正在爆炸。有任何想法吗？

```
d = BigDecimal.new("2.0")
YAML::load({:a => d}.to_yaml)
TypeError: BigDecimal can't be coerced into BigDecimal
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb/inspector.rb:86:in `inspect'
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb/inspector.rb:86:in `inspect'
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb/inspector.rb:86:in `block in <module:IRB>'
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb/inspector.rb:30:in `call'
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb/inspector.rb:30:in `inspect_value'
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb/context.rb:260:in `inspect_last_value'
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb.rb:311:in `output_value'
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb.rb:160:in `block (2 levels) in eval_input'
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb.rb:273:in `signal_status'
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb.rb:156:in `block in eval_input'
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb/ruby-lex.rb:243:in `block (2 levels) in each_top_level_statement'
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb/ruby-lex.rb:229:in `loop'
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb/ruby-lex.rb:229:in `block in each_top_level_statement'
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb/ruby-lex.rb:228:in `catch'
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb/ruby-lex.rb:228:in `each_top_level_statement'
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb.rb:155:in `eval_input'
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb.rb:70:in `block in start'
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb.rb:69:in `catch'
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb.rb:69:in `start'
from /Users/benjohnson/.rvm/rubies/ruby-1.9.3-p125/bin/irb:16:in `<main>'Maybe IRB bug! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T23:39:27.983

这是一个已[报告](https://github.com/tenderlove/psych/issues/31)并[修复](https://github.com/tenderlove/psych/commit/33ce8650bac29190dde937b1b7d3e21fd06926e7)的错误。

最好的解决方案是升级到最新的 Ruby（修复在补丁级别 194 以后）。

如果你不能升级你的 Ruby 版本，你可以通过安装[Psych gem](https://rubygems.org/gems/psych)来修复。如果你这样做，你需要`gem 'psych'`在你之前添加`require 'yaml'`（或者`Gemfile`如果你使用 Bundler，将它添加到你的）以从 gem 而不是从标准库加载代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:45:28.897

是的，我遇到过一次。这是我所做的一个版本：

[YAML 和 BigDecimal 解决方法](http://blog.induktiv.at/archives/6-YAML-and-BigDecimal-a-temporary-solution.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T22:50:50.287

这是大卫的答案，由于[这个相关的问题](https://stackoverflow.com/questions/6530412/cant-define-singleton-method-encode-with-for-bigdecimal)，更新到 1.9.3 中工作：

```
require 'yaml'
require 'bigdecimal'
YAML::ENGINE.yamler= 'syck'
class BigDecimal
  def to_yaml(opts={})
    YAML::quick_emit(object_id, opts) do |out|
      out.scalar("tag:induktiv.at,2007:BigDecimal", self.to_s)
    end
  end
end
YAML.add_domain_type("induktiv.at,2007", "BigDecimal") do |type, val|
  BigDecimal.new(val)
end
x = BigDecimal.new("2.0")
puts x.to_yaml
y = YAML.load(x.to_yaml)
puts x == y 
```

# python - 将字母范围扩展到 Python 中的字符列表

> ID：10724255
> 
> 赞同：6
> 
> 时间：2012-05-23T16:36:40.230
> 
> 标签：python, string, character, alphabetical, alphabet

我有按字母顺序描述一系列字符的字符串，由用连字符分隔的两个字符组成。我想将它们扩展成单个字符的列表，如下所示：

```
'a-d' -> ['a','b','c','d']
'B-F' -> ['B','C','D','E','F'] 
```

在 Python 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T16:40:03.797

```
In [19]: s = 'B-F'

In [20]: list(map(chr, range(ord(s[0]), ord(s[-1]) + 1)))
Out[20]: ['B', 'C', 'D', 'E', 'F'] 
```

诀窍是将两个字符都转换为它们的 ASCII 代码，然后使用`range()`.

PS 由于您需要一个列表，因此`list(map(...))`可以用列表推导替换该构造。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T16:47:16.913

除了使用aix[的出色答案](https://stackoverflow.com/a/10724297/390989)`map()`外，您还可以通过列表理解来做到这一点：

```
>>> s = "A-F"
>>> [chr(item) for item in range(ord(s[0]), ord(s[-1])+1)]
['A', 'B', 'C', 'D', 'E', 'F'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T16:46:19.273

```
import string

def lis(strs):
    upper=string.ascii_uppercase
    lower=string.ascii_lowercase

    if strs[0] in upper:        
        return list(upper[upper.index(strs[0]): upper.index(strs[-1])+1])
    if strs[0] in lower:
        return list(lower[lower.index(strs[0]): lower.index(strs[-1])+1])

print(lis('a-d'))
print(lis('B-F')) 
```

输出：

```
['a', 'b', 'c', 'd']
['B', 'C', 'D', 'E', 'F'] 
```

# file - Bash 脚本 + 逐行阅读 + Ambiguos 重定向？

> ID：10724256
> 
> 赞同：0
> 
> 时间：2012-05-23T16:36:46.377
> 
> 标签：file, bash, while-loop

我有这个简单的脚本：

```
#!/bin/bash
cmd="file.txt"

while read line
do
    command $line > $line

done < $cmd 
```

而这个 .txt 文件：

```
./cmd var1 var2 var3
./cmd var1 var2 var3
./cmd var1 var2 var3
./cmd var1 var2 var3 
```

我的目标是读取每一行并执行命令，但我不断收到此错误：

```
 line x: $line: ambiguos redirect 
```

我是 BASH 的新手，我不知道这个错误是什么意思，在研究它时，出现了几十种不同的解释。any1 知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:39:45.787

你正在执行的基本上是：

```
command var1 var2 var3 > var1 var2 var3 
```

shell 无法确定您希望输出重定向到哪个文件：`var1`、`var2`或`var3`

我不确定您要做什么，但是如果您想输出到，比如说`var1`，那么您可以这样做：

```
while read firstVar line; do
  command $firstVar $line > $firstVar
done < file.txt 
```

但是，如果——正如你的帖子所说——你只想*执行*命令，那么你根本不需要重定向。只需这样做：

```
while read line; do
  command $line
done < file.txt 
```

# c++ - 旋转和平移显示列表

> ID：10724263
> 
> 赞同：1
> 
> 时间：2012-05-23T16:36:56.390
> 
> 标签：c++, opengl

我正在使用 wglUseFontBitmaps() 创建字体的显示列表，然后使用 glListBase、glCallLists 在 OpenGL 中显示一些文本。
但是 glRotate() 和 glTranslate() 函数不会影响文本的位置。如何旋转文本或更改其位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:15:48.197

您不能转换 OpenGL 位图。时期。受转换管道影响，您唯一可以四处移动的是使用`glRasterPos`.

`glRasterPos`有效地发送由模型视图和投影转换的“顶点”，但是影响视口位置只是以下位图绘图的开始位置。

# javascript - FB.Login response.session 不工作？

> ID：10724270
> 
> 赞同：0
> 
> 时间：2012-05-23T16:37:35.110
> 
> 标签：javascript, facebook, api

我对以下代码有问题。根据 JS，如果`response.session`有效，它应该`alert("User is logged in!");`. 问题是，我很确定会话是有效的，但它会警告“用户未登录！”。我知道会话是有效的，因为我之前登录过，并`publish_stream`在窗口出现时允许该应用程序。我也尝试从我的 FB 中删除该应用程序，但是当我再次允许它时，它仍然会提醒“用户未登录！”。我的代码有什么问题？

```
<html>
    <head>
        <title>My Facebook Login Page</title>
        <script src="//connect.facebook.net/en_US/all.js"></script>
        <script>
            window.fbAsyncInit = function() {
                FB.init({
                    appId      : '436956019655560',
                    status     : true, 
                    cookie     : true,
                    xfbml      : true,
                    oauth      : true,
                });
            };

            function fbLogin() {
                FB.login(function(response) {
                    if (response.session) {
                        console.log("User is connected to the application.");
                        var accessToken = response.session.access_token;
                        alert("User is logged in!");
                    } else {
                        alert("User is not logged in!");
                    }
                }, {scope:'publish_stream'});
            }
    </script>
    </head>
    <body>
        <div id="fb-root"></div>
        <INPUT TYPE="BUTTON" ONCLICK="fbLogin()" value="login">
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T18:18:54.413

我很确定 response.session 不再存在。我相信您需要寻找 response.authResponse。查看 FB.login 上的[文档](http://developers.facebook.com/docs/reference/javascript/FB.login/)：

> 自 2011 年 12 月 13 日起，JavaScript SDK 现在仅支持 OAuth 2.0 进行身份验证。在 JS SDK 中启用 OAuth 2.0 的功能于 7 月首次引入。所有应用程序都在 2011 年 10 月 1 日之前进行测试和迁移。通过此更改，请确保您将 response.session 替换为 response.authResponse。

尝试检查 response.authResponse 。另外，尝试将响应对象记录到控制台，看看你得到了什么。

# javascript - 将数字与运算符连接以在 javascript 中进行比较

> ID：10724274
> 
> 赞同：1
> 
> 时间：2012-05-23T16:37:52.023
> 
> 标签：javascript, comparison, eval

我在 JS 中有一个函数可以将两个整数与任意运算符进行比较：

```
function compare(n1, n2, crit){
    var operator;

    switch (crit) {
        case 'GT':
            operator = '>';
            break;
        case 'GE':
            operator = '>=';
            break;
        case 'EQ':
            operator = '==';
            break;
        case 'LE':
            operator = '<=';
            break;
        case 'LT':
            operator = '<';
            break;
    }
    return eval(n1 + operator + n2);
} 
```

我正在寻找一种比串联和使用更可怕的`eval()`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T16:41:51.347

你为什么不像这样重新格式化你的函数呢？

```
function compare(n1, n2, crit){
    if (crit == 'GT') return n1 > n2;
    if (crit == 'GE') return n1 >= n2;
    if (crit == 'EQ') return n1 == n2;
    if (crit == 'LE') return n1 <= n2;
    if (crit == 'LT') return n1 < n2;
    return false; // default behavior (??)
} 
```

# javascript - 两个看似相同的 MapReduce 函数的令人费解的行为

> ID：10724284
> 
> 赞同：1
> 
> 时间：2012-05-23T16:38:48.107
> 
> 标签：javascript, mongodb, mapreduce

我们的 MongoDB 数据库包含所有用户帐户的列表，其中每个新注册在帐户文档中都有一个“created_at”字段，其中包含当前创建日期和时间。

我们想知道每天或每天有多少新注册，所以将一个 MapReduce 查询放在一起为我们找出这个。

```
db.accounts.mapReduce(
    function() { 
        var date = this.created_at.toLocaleDateString(); 
        emit(date, 1);
    }, 
    function(key, values) {
        return values.length;
    },
    { out: "output" }) 
```

我们的第一次尝试在上面。`1`对于每个注册，它都会为该日期发出一个值。然后使用每个数组的长度来确定当天有多少注册。

然而，虽然结果大部分是正确的，但也存在明显的不准确之处。例如，当我们知道实际数字要高得多时，第一天给了我们一个两位数的价值。尽管对相同的数据进行了操作，但在第二次运行 map reduce 函数后，一些值发生了变化。

我们更改了函数，改为对数组的值求和（记住，它应该只包含`1`'，因此与`array.length`.

```
db.accounts.mapReduce(
    function() {
        var date = this.created_at.toLocaleDateString(); 
        emit(date, 1);
    }, 
    function(key, values) {
        var sum = 0; 
        for(var i = 0; i < values.length; i++) { 
            sum += values[i];
        }; 
        return sum; 
    },
    { out: "output" }) 
```

令我们惊讶的是，这为之前错误的每个日期提供了正确的结果。

有谁知道为什么第一个 map reduce 没有按预期运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:46:59.917

对于发出的值，Reduce 可能会被多次调用，随后的调用将传递给先前对 reduce 的调用的输出。当您只查看数组的长度时，您会错过这样一个事实，即您可能正在查看部分聚合的数据。对这些值求和将使较早的聚合累积，这就是您想要的。

# php - 使用 Ajax 和 jQuery 传递 php 类对象

> ID：10724285
> 
> 赞同：0
> 
> 时间：2012-05-23T16:38:56.863
> 
> 标签：php, javascript, jquery

我想通过使用 Ajax 和 jQuery 在 PHP 和 JavaScript 之间传递一个 php 类实例。

我需要在 JavaScript 中访问数据属性并在 PHP 中执行方法。以下代码显示了我的意思：

索引.php

```
<?php require_once("php/foo.php") ?>
var bar = <?php echo json_encode(new foo()); ?>;

// do something with 'bar'
$.post("ajax/foo.ajax.php", { foo : bar }, function(data) {}); 
```

foo.ajax.php

```
require_once("php/foo.php);

if (isset($_POST["foo"]))
{
   $bar = $_POST["foo"];
   // do something with 'bar'
   echo json_encode($bar);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:55:29.063

PHP 中确实没有一种机制来实现这一点。您可以使用序列化和反序列化来保留对象结构，并且 json_encode 会将所有公共属性从您的对象中提取出来，但 json_decode 会将其返回到 PHP 中的 StdObject（标准对象）的状态。

一种解决方法是迭代返回的属性并在您的对象中重置它们。

# multithreading - 如何从另一个线程调用 mexCallMATLAB

> ID：10724286
> 
> 赞同：1
> 
> 时间：2012-05-23T16:39:05.397
> 
> 标签：multithreading, matlab, unix, pthreads, mex

我正在为 mex 编译的 MATLAB 创建一个 C++ 模块。我在这个模块中启动一个新线程并从中调用 matlab 函数 myCallback：

```
mxArray *funcName = mxCreateString("myCallback");
mxArray *text - mxCreateString("AAA");
mxArray *call[2] = {funcName, text};
mexCallMATLAB(0, NULL, 2, call, "feval");
... 
```

myCallback 函数：

```
function myCallback(text)
fprintf(1,'%s\n', text);
end 
```

并且在调用 mexCallMATLAB 后它不会打印任何内容。这些函数在与 matlab 函数相同的线程中运行良好。什么是问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:12:19.487

见[这里](http://www.mathworks.com/support/solutions/en/data/1-V3B5T/index.html?solution=1-V3B5T)。

基本上，答案是`mex*`函数*不是*线程安全的。这包括`mexCallMATLAB`、`mexPrintf`和朋友（是的，即使是 mexPrintf 也不应该从多个线程中调用）。所有`mexCallMATLAB`调用都必须从主线程（即与 MATLAB 本身相同的执行线程）完成。

# javascript - Firefox 在这个简单的枚举上抛出安全错误 1000

> ID：10724291
> 
> 赞同：0
> 
> 时间：2012-05-23T16:39:30.880
> 
> 标签：javascript, firefox, cross-browser, enumeration

我会简短地说：

我想枚举对象内部的所有可用函数和对象，`window`以创建某种对象反射代码。
它在每个浏览器中都运行得很好，但在 Firefox 中。这是我的伪循环代码：

```
var all_names=[];
for (var i in window)
{
    //if it's NOT an object
    all_name.push(i.toString());
    //if it's an object        
    enum up to 3 more levels in child objects.
} 
```

而且我不想在 Firefox 中使用可用的 API，例如`getOwnPropertyNames`.
所以我该怎么做？Javascript中的枚举有没有更好的解决方案（当然是跨浏览器）

* * *

以下是更多技术信息：

**确切的 Firefox 错误：**

`[20:48:04.539] uncaught exception: [Exception... "Security error" code: "1000" nsresult: "0x805303e8 (NS_ERROR_DOM_SECURITY_ERR)" location: "http://localhost/test/common.js Line: 53"]`

**确切的枚举循环代码：**

```
function reflectAsString() {
    try{
        var m1 = "";
        var m2 = "";
        var m3 = "";
        for (var i in window) {
            if(window[i] && window[i]!= null && window[i] != "globalStorage")
                {
                m1 += i;
                first_instance = window[i];
                if(typeof first_instance == "object")
                    {
                    for(var j in first_instance)
                    {
                        if(first_instance[j] && first_instance[j]!= null)
                            {
                            m2 += j;
                            second_instance = first_instance[j];
                            if(typeof second_instance == "object")
                                {
                                for (var k in second_instance)
                                {
                                    if(second_instance[k] && second_instance[k]!= null)
                                        {
                                        m3 += k;
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        return hex_md5(hex_md5(m1)+hex_md5(m2)+hex_md5(m3));
    } catch(e) {
        try {
            var strToHash = Object.getOwnPropertyNames(window).filter(function(property) {
                return typeof window[property] == 'function';
            });
            return hex_md5(strToHash.toString());
        } catch(e2) {
            return "undef";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:04:35.227

通过在我感兴趣的页面上打开一个 iframe，并将 iframe 窗口中的全局变量与父窗口中的全局变量进行比较，我做了类似的事情。如果有任何错误，try 块将返回带有错误标志的属性名称。

iframe src 的 HTML：

```
<html lang= "en">
<head>
<meta charset= "utf-8">
<title>Get Globals</title>
<style>
p{border:none;font-size:1.25em;font-weight:600;}
h2{color:navy;border-top:3px ridge navy;margin:1ex 0;}
span{margin:0 1em;}
</style>
<script>
navigator.sayswho= (function(){
    var N= navigator.appName, ua= navigator.userAgent, tem,
    ie= navigator.IEmod,
    M= ua.match(/(opera|chrome|safari|firefox|msie)\/?\s*([\d\.]+)/i);
    if(M && (tem= ua.match(/version\/([\.\d]+)/i))!= null) M[2]= tem[1];
    M= M? [M[1], M[2]]:[N, navigator.appVersion, '-?'];
    if(ie && ie!= M[1]) M[2]= 'ie mode:'+navigator.IEmod;
    return M.join(' ');
})();
window.onload= function(){
    if(this!= top){
        var G={
            getInterface:1, InstallTrigger:1
        },
        B= [], C= [], k= ['HTML elements:'], d= navigator.sayswho || '',
        t= document.getElementsByTagName('p');
        for(var p in this) G[p]= 1;
        for(var key in top){
            try{
                if(!(key in G)){
                    if(top[key].nodeType== 1) k.push(key);
                    else B.push(key);
                }
                else C.push(key);
            }
            catch(er){
                B.push('error with '+key);
            }
        }
        if(k.length>1) B.push(k.join(' '));
        if(d) document.getElementsByTagName('span')[0].innerHTML+= d;
        t[0].innerHTML= B.join('<br>');
        t[1].innerHTML= C.sort().join(', ');
    }
}
</script>
</head>
<body>
<h1>Globals<span>in</span></h1>
<h2>New globals defined in the top window</h2>
<p></p>
<h2>Common window properties</h2>
<p></p>
</body>
</html> 
```

# android - Titanium api.info 从不在控制台中显示任何内容

> ID：10724292
> 
> 赞同：7
> 
> 时间：2012-05-23T16:39:34.770
> 
> 标签：android, iphone, titanium, titanium-mobile

我刚开始使用钛，我无法让**Ti.API.info("My log message")**在控制台中打印任何内容。

我尝试在我的 Android 设备、Android 模拟器、iPhone 模拟器和 GoogleChrome 中的移动 Web 项目中运行该应用程序，但 Titanium Studio 中的控制台窗口从不打印我的日志消息。

我最后一次尝试是在导入的样本“Todo List”中。在 app.js 文件的开头，我添加了两条日志消息：

```
if (Ti.version < 1.8 ) {
    alert('Sorry - this application template requires Titanium Mobile SDK 1.8 or later');
}
else {
    Ti.API.error('my error');
    Ti.API.log('error','my error'); 
```

该应用程序在设备、模拟器和浏览器中运行，但从未显示此消息。

我正在使用最新版本的 Titanium Studio、最新的 android SDK 和 xCode 4.2。在 Mac OS X 10.6.8 上运行。

**钛工作室，构建：2.0.1.201204132053**

我很乐意提供任何其他可能表明这不起作用的信息。

为什么这在控制台中没有显示任何内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T13:55:17.773

*   转到项目-> 属性菜单。
*   选择左侧面板上的运行/调试设置。
*   单击 Titanium iPhone Simulator - <您的项目名称> 列表，然后单击“编辑...”按钮。

配置属性“平台”面板上有“日志级别”属性。确保它是“信息”、“调试”或“跟踪”以在控制台上查看 Ti.API.info 消息。

清理您的项目并再次运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T06:34:08.653

您的控制台是否仅显示红色文本？如果是这样，您将显示错误的控制台（Titanium IDE 中有多个控制台）。控制台上应该有一个下拉菜单。尝试切换选项并在输出中搜索您的 Ti.API.info 消息。

# iphone - 视图控制器可能不响应“activatetab”

> ID：10724295
> 
> 赞同：0
> 
> 时间：2012-05-23T16:40:02.800
> 
> 标签：iphone, xcode

一切正常，但我找不到关于我收到的两个警告的任何信息。这是其中之一。

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item {
NSLog(@"didSelectItem: %d", item.tag);

[self activateTab:item.tag];   //<------viewcontroller may not respond to activateTab 
}

- (void)activateTab:(int)index {
switch (index) {
    case 1:{ 
```

在调试器中它说

没有匹配方法签名的消息将被假定返回“id”并接受“...”作为参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:41:59.743

您还需要`activateTab:`在头文件中声明该方法。

# variables - 基于变量的 LESS CSS 变量

> ID：10724298
> 
> 赞同：1
> 
> 时间：2012-05-23T16:40:07.877
> 
> 标签：variables, less, mixins

我正在使用 LESS 构建站点，并希望布局根据方向切换，“ltr”或“rtl”（`direction:rtl`）

我设置`@direction`在顶部。然后，我希望某些元素*向左浮动 ltr*，*向右浮动 rtl*。我还想*定位**absolute*，并基于.*`@direction`*

 *我没有为 float、pos 和 padding 写出单独的 mixin，而是尝试做这样的事情：

```
.mixin (@direction) when (@direction = ltr) {
    @lr:left;
}
.mixin (@direction) when (@direction = rtl) {
    @lr:right;
} 
```

然后像这样调用它：

```
ol li {
    float:@lr;
} 
```

和/或

```
ol li span.date {
    position:absolute;
    @lr:0;
} 
```

这就是想法，但任何帮助将不胜感激。我看过守卫和参数混合，但似乎无法确定它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T04:13:01.207

我对您的案例有一个解决 RTL 问题的想法。在每个类中，我们为方向样式表属性定义了 2 个 mixin。原型是这样的：

```
// @direction variable should be put by somehow
@direction: rlt;

.foo {
  // common properties;
  .dir(@direction);
  .dir(rtl) {
    // RTL properties;
  }
  .dir(ltr) {
    // LTR properties;
  }
} 
```

例如：

```
// @direction variable should be put by somehow
@direction: rlt;

.foo {
  color: #000000;
  .dir(@direction);
  .dir(rtl) {
    float: left;
    padding-left: 5px;
    background: "rtl.png";
  }
  .dir(ltr) {
    float: right;
    padding-right: 5px;
    background: "ltr.png";
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T12:05:15.603

好的。经过一番演奏和一些思考，这就是我想出的。如果我不能将变量用作属性，那么我将使用@direction 和@directionOpp（与 rtl、ltr 相对）用作布局助手。

我有 2 个变量。

```
@direction:     ltr; // Change to 'rtl' for arabic, hebrew, etc.
@directionOpp:  rtl; // Make this opposite of @direction, for easier mixins 
```

这是我的水平定位混合。

```
 #dir {
    .dir(ltr,@dist:0) {left: @dist;}
    .dir(rtl,@dist:0) {right: @dist;}
    .float(ltr){float:left; }
    .float(rtl){float:right;}
    .margin(ltr, @dist:@a){margin-left:@dist;}
    .margin(rtl, @dist:@a){margin-right:@dist;}
    .padding(ltr, @dist:@a){padding-left:@dist;}
    .padding(rtl, @dist:@a){padding-right:@dist;}
  } 
```

这就是我所说的。

```
ol li {
    #dir.float(@direction);
    #dir.padding(@direction);
} 
```

如果我需要扭转任何事情，那么我可以`@direction`用`@directionOpp`.

我还可以指定我需要多少@dist，因为它是参数混合，并且由于它们都是独立的，我可以有任何我需要的边距、浮动、填充等组合，而无需具有硬编码属性的多个混合。

好的解决方案？戴夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T17:01:47.983

您的第一个问题是变量实际上是 LESS 中的常量。所以一旦你设置它，它就不能被覆盖。当您将@lr 设置为“left”时，即使您尝试重置变量，它也将始终以“left”作为其值。这是您第一个想法的问题。

至于你的第二个想法，LESS 不支持使用变量作为属性，只支持值。但是，您可以像这样破解它：

```
.mixin(@prop, @value) {
    Ignore: ~"a;@{prop}:@{value}";
} 
```

这不是很干净，但是如果您绝对需要该功能，它就可以解决问题。Word 正在为 1.4 开发。

此外，您错误地调用了 mixin。尝试这样的事情：

```
.mixin (@direction) when (@direction = ltr) {
    float: left;
}
.mixin (@direction) when (@direction = rtl) {
    float: right;
} 
```

然后像这样调用它：

```
ol li {
    .mixin(ltr);
} 
```

这应该吐出来：

```
ol li {
    float: left;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T18:56:55.110

我在 dotless 中实现了一个 rtl 扩展。在 github 上找到它。该扩展名将*float:left*反转为*float:right*和`margin-left:5px`to `margin-right:5px`。

它还支持为属性添加前缀以控制它们的反转方式。

[插件的 dotless wiki](https://github.com/dotless/dotless/wiki/Rtlplugin)上提供了更多信息。

您还可以[在 wiki 上找到有关如何使用 dotless 和插件的一般信息](https://github.com/dotless/dotless/wiki)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-22T12:37:52.220

**在你的LESS**文件中试试这个 Mixins

```
@rtl:        rtl;
@ltr:        ltr;
@direction:  @rtl; 
```

然后像这样使用它们

```
html {
    direction: @direction;
}

body{
    direction: @direction;
} 
```

对于**Left**和**Right**命令，您应该使用这些 mixins

```
.DockItem(@location, @value) when (@location = "left") and (@direction = @ltr){
    left: @value;
}

.DockItem(@location, @value) when (@location = "right") and (@direction = @ltr){
    right: @value;
}

.DockItem(@location, @value) when (@location = "left") and (@direction = @rtl){
    right: @value;
}

.DockItem(@location, @value) when (@location = "right") and (@direction = @rtl){
    left: @value;
} 
```

然后在你的less文件中你应该像这样调用这个mixins

```
.TestClass{
    .DockItem('left', '100%');
} 
```

请注意，我将**@direction**设置为**RTL**，所以上面的样式会像这样

```
.TestClass{
    right: 100%;
} 
```

如果您将页面的方向性设置为**LTR**，则结果如下

```
.TestClass{
    left: 100%;
} 
```

让我知道它是否对您有帮助*

# c# - Rows.Count 和 RowCount 的区别

> ID：10724302
> 
> 赞同：3
> 
> 时间：2012-05-23T16:40:21.223
> 
> 标签：c#, datagridview

`myDGV.Rows.Count`和有区别`myDGV.RowCount`吗？

此外，这两个似乎都返回基础表中的行数 + 1，例如，它们为单个字段表返回 4，如下所示。标题是否添加到计数中？：

```
myField
x
y
z 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T16:43:12.680

**RowCount**：获取或设置 DataGridView 中显示的行数。

**Rows.Count**：返回行数

# php - 如何在不跳过即二月的日期上添加 1 个月

> ID：10724305
> 
> 赞同：20
> 
> 时间：2012-05-23T16:40:32.300
> 
> 标签：php, datetime

> **可能重复：**
> [PHP DateTime::modify 加减月份](https://stackoverflow.com/questions/3602405/php-datetimemodify-adding-and-subtracting-months)

我有一个开始日期（即 2011-01-30）并想增加 1 个月。

问题在于定义一个月是什么。因此，如果我使用以下代码：

```
$d1 = DateTime::createFromFormat('Y-m-d H:i:s', '2011-01-30 15:57:57');
$d1->add(new DateInterval('P1M'));
echo $d1->format('Y-m-d H:i:s'); 
```

我得到以下结果：2011-03-02 15:57:57

问题是，我需要它使用以下规则：

*   如果我添加 1 个月，它只会在月份部分添加 1 并离开日期部分（2011-01-15 将变为 2011-02-15）
*   如果在我们将结束的月份中不存在这一天，我们将取其最后一个存在的日期（2011-01-30 将变为 2011-02-28）

php中是否有一个通用函数可以做到这一点，还是我必须自己编写代码？也许我只是缺少一个参数或其他东西！？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T09:39:46.187

好像没有现成的函数，所以自己写的。这应该可以解决我的问题。无论如何，感谢您的回答和评论。如果您发现一些错误，请在评论中提供。

此函数计算添加一个月后我将结束的月份和年份。然后它检查日期是否正确。如果不是，我们会遇到该日期不在目标月份的情况，因此我们取该月份的最后一天。使用 PHP 5.3.10 测试。

```
<?php
$monthToAdd = 1;

$d1 = DateTime::createFromFormat('Y-m-d H:i:s', '2011-01-30 15:57:57');

$year = $d1->format('Y');
$month = $d1->format('n');
$day = $d1->format('d');

$year += floor($monthToAdd/12);
$monthToAdd = $monthToAdd%12;
$month += $monthToAdd;
if($month > 12) {
    $year ++;
    $month = $month % 12;
    if($month === 0)
        $month = 12;
}

if(!checkdate($month, $day, $year)) {
    $d2 = DateTime::createFromFormat('Y-n-j', $year.'-'.$month.'-1');
    $d2->modify('last day of');
}else {
    $d2 = DateTime::createFromFormat('Y-n-d', $year.'-'.$month.'-'.$day);
}
$d2->setTime($d1->format('H'), $d1->format('i'), $d1->format('s'));
echo $d2->format('Y-m-d H:i:s'); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-23T16:45:05.887

除了 DateInterval，您还有多种选择。

以下是使用的示例`strtotime()`：

[http://www.brightcherry.co.uk/scribbles/php-adding-and-subtracting-dates/](http://www.brightcherry.co.uk/scribbles/php-adding-and-subtracting-dates/)

```
// Subtracting days from a date
$date = "1998-08-14";
$newdate = strtotime ( '-3 day' , strtotime ( $date ) ) ;
$newdate = date ( 'Y-m-j' , $newdate );

echo $newdate; 
```

...

```
// Subtracting months from a date
$date = "1998-08-14";
$newdate = strtotime ( '-3 month' , strtotime ( $date ) ) ;
$newdate = date ( 'Y-m-j' , $newdate );

echo $newdate; 
```

以下是一些链接`DateInterval`：

*   [http://php.net/manual/en/dateinterval.construct.php](http://php.net/manual/en/dateinterval.construct.php)

*   [使用 DateInterval 和 DateTime::add 添加月份时会出现什么问题？](https://stackoverflow.com/questions/9282287/what-can-go-wrong-when-adding-months-with-a-dateinterval-and-datetimeadd)

问：您究竟如何*定义*“月”？

> Def#1)：“月”是“月”——与 #/days 无关
> 
> Def#2)：一个“月”是 30 天（例如）
> 
> Def#3)：“月”是随后几个月的第一个星期一之间的#/天
> 
> 等等等等

问：你的“定义”到底是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T19:14:40.203

好的-据我所知，您还没有明确定义“月份”的含义。

但这里还有一个可能有帮助的功能：

[http://php.net/manual/en/function.getdate.php](http://php.net/manual/en/function.getdate.php)

```
/* Function to find the first and last day of the month from the given date.
*
* Author Binu v Pillai            binupillai2003@yahoo.com
* @Param            String             yyyy-mm-dd
*
*/
function findFirstAndLastDay($anyDate)
{
    //$anyDate            =    '2009-08-25';    // date format should be yyyy-mm-dd
    list($yr,$mn,$dt)    =    split('-',$anyDate);    // separate year, month and date
    $timeStamp            =    mktime(0,0,0,$mn,1,$yr);    //Create time stamp of the first day from the give date.
    $firstDay            =     date('D',$timeStamp);    //get first day of the given month
    list($y,$m,$t)        =     split('-',date('Y-m-t',$timeStamp)); //Find the last date of the month and separating it
    $lastDayTimeStamp    =    mktime(0,0,0,$m,$t,$y);//create time stamp of the last date of the give month
    $lastDay            =    date('D',$lastDayTimeStamp);// Find last day of the month
    $arrDay                =    array("$firstDay","$lastDay"); // return the result in an array format.

    return $arrDay;
} 
```

# email - 如何将 DKIM 签名添加到使用 CDO 发送的经典 ASP 电子邮件

> ID：10724308
> 
> 赞同：0
> 
> 时间：2012-05-23T16:40:41.693
> 
> 标签：email, asp-classic, dkim, cdo.message

使用类似下面的内容，是否可以为 DKIM 签名添加标头？从我一直在阅读的内容来看，它看起来不像......为什么不呢？

```
Dim iMsg, iConf, Flds
Set iMsg = CreateObject("CDO.Message")
Set iConf = CreateObject("CDO.Configuration")

Set Flds = iConf.Fields

Const cdoSendUsingPort = 2

With Flds
.Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = cdoSendUsingPort 
.Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "server"
.Item("http://schemas.microsoft.com/cdo/configuration/smtpusessl") = 1
.Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
.Item("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1 'basic 
.Item("http://schemas.microsoft.com/cdo/configuration/sendusername") = "abc"
.Item("http://schemas.microsoft.com/cdo/configuration/sendpassword") = "123"
.Item("http://schemas.microsoft.com/cdo/configuration/smtpconnectiontimeout") = 10
.Update
End With

With iMsg
Set .Configuration = iConf
.To = recipient
.From = "foo@bar.com"
.Subject = "subject"
.HTMLBody = "body"
.Send
End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:10:24.023

如果您已经拥有签名，则可以将其添加到`iMsg`对象的 Fields 属性中。我之前做过类似的事情来设置“回复”和“回执”地址：

```
.Fields("urn:schemas:mailheader:disposition-notification-to") = "test@example.com"
.Fields("urn:schemas:mailheader:return-receipt-to") = "test@example.com" 
```

您可以执行相同的操作来添加任何自定义标头，在您的情况下是 DKIM 签名。你的`iMsg`对象变成：

```
With iMsg
  Set .Configuration = iConf
  .To = recipient
  .From = "foo@bar.com"
  .Subject = "subject"
  .HTMLBody = "body"
  .Fields("urn:schemas:mailheader:DKIM-Signature") = "YOUR_SIGNATURE_HERE"
  .Send
End With 
```

我希望这会有所帮助。

# javascript - 使用 javascript 进行简单的内容搜索

> ID：10724311
> 
> 赞同：1
> 
> 时间：2012-05-23T16:41:12.673
> 
> 标签：javascript, html, search, jquery-plugins

首先这是脚本的工作方式：[jsfiddle](http://jsfiddle.net/dynamyc/7Rm8U/7/light/)

所以，我想让插件通过诸如“标题”之类的属性或其他东西来搜索图像（缩略图）。这是我的标记： http: [//jsfiddle.net/dynamyc/KqCP5/embedded/result/](http://jsfiddle.net/dynamyc/KqCP5/embedded/result/) 我无法让脚本搜索这些图像，我知道有问题，也许我没有为

'searchList' : 'home_proj li',

'搜索项目'：'img'

下面的代码将激活插件：

```
$(document).ready(function(){
    $('.searchFilter').simpleContentSearch({
        'active' : 'searchBoxActive',
        'normal' : 'searchBoxNormal',
        'searchList' : 'home_proj li',
        'searchItem' : 'img'
    });
}); 
```

'searchList' 设置指定将被搜索的内容。在这种情况下，它是可搜索的 tr。最后，“searchItem”设置允许深入并指定要搜索的单个元素。在这种情况下，我使用“td”。

希望你明白我想要达到的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T04:33:43.097

更改`'searchList'`to`'home_proj ul li'` 和`'searchItem'`to`'a'`似乎有效。

例如，尝试`title="abc"`搜索“abc”

* * *

首先，`'searchList'`是要过滤的 DOM 对象的常见类型。所以在你的第二个标记中，当你想搜索一个列表时`<a>`，你应该设置`'searchList'`为`'jThumbnailScroller a'`

其次，`'searchItem'`是您要搜索的 DOM 对象的一部分。这个插件的方式是搜索 DOM 对象`html()`，但是如果你想搜索`<img>`，它不会工作，因为它`html()`是空的。所以如果你真的想搜索`<img>`标题，你应该设置`'searchItem'`为`'img'`，并更改插件的这部分

`if (!elem.html().match(new RegExp('.*?' + query + '.*?', 'i')))`

到

`if (!elem.attr('title').match(new RegExp('.*?' + query + '.*?', 'i')))`

# c++ - 在 KCachegrind 中获取源注释

> ID：10724312
> 
> 赞同：1
> 
> 时间：2012-05-23T16:41:14.983
> 
> 标签：c++, macos, x11, valgrind, kcachegrind

我正在尝试查看与可执行文件关联的源代码`lab13`。当我单击 KCachegrind 中的**Source**选项卡时，我看到的只有以下内容：

```
There is no source available for the following function:
    'main'
This is because no debug information is present.
Recompile source and redo profile run.
The function is located in this ELF object:
    'lab13' 
```

但是，我在我的使用`-g`调试标志`makefile`：

```
lab13:main.o
    g++ -g main.o -o lab13
    ./lab13

main.o:main.cpp EdgeArray.h Edge.h DisjointSets.h Matrix.h experiment.h
    g++ -c -g main.cpp 
```

我`callgrind.out`使用以下调用创建了文件`valgrind`：

```
valgrind --tool=callgrind --dsymutil=yes ./lab13 
```

我查看了[KCachgrind 文档](http://kcachegrind.sourceforge.net/html/GUIViews.html)，但没有关于如何激活**Source**选项卡功能的信息。

我在 OSX 上编译了程序，并通过 X11 运行 KCachgrind。我正在`callgrind.out`从与代码相同的目录中读取文件。所有其他 KCachgrind 功能似乎都可以工作。

如何使“**源**”选项卡工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:21:00.510

您应该在配置文件 ( [cf](http://valgrind.org/docs/manual/cl-format.html) ) 中查找 "fl=" 行，并确保源文件在 "fl=" 行中给出的路径下可用。

# sql - 在同一个 SQL 脚本中创建和读取表

> ID：10724314
> 
> 赞同：1
> 
> 时间：2012-05-23T16:41:27.237
> 
> 标签：sql, oracle

我正在 SQL Developer 中开发一个 SQL 脚本，它将使用 Oracle SQL 混淆模式中的个人数据。该脚本查看名为“OBFUS_TABLE”的表，其中包含需要混淆哪些表和列以及如何进行混淆的列表。然后它循环遍历表，随时更改数据。

我已经测试了实际的循环和混淆过程，它工作正常，我还成功地测试了脚本的开头直到循环之前，它创建 OBFUS_TABLE 并将值插入其中。当它尝试同时执行这两个操作时出现问题，在尝试执行循环时出现“表或视图不存在”错误。下面的代码片段：

```
 alter session set current_schema = SYSTEM;

    DECLARE
      t_count                   NUMBER;
      t_count2                  NUMBER;
      p_tname                   VARCHAR2(100);
      p_cname                   VARCHAR2(100);
      l_datatype                VARCHAR2(100);
    BEGIN

      SELECT COUNT(*) INTO t_count FROM all_tables  WHERE table_name = 'OBFUS_TABLE';
      SELECT COUNT(*) INTO t_count2 FROM all_tables  WHERE table_name = 'OBFUS_LOG';

      IF (t_count = 0)
        THEN
          EXECUTE immediate 'create table OBFUS_TABLE( TABLENAME VARCHAR2(200 BYTE), COLUMNNAME VARCHAR2(200 BYTE), DATA_TYPE VARCHAR2(20 BYTE), ACTIVE  VARCHAR(1 BYTE)  )';
      END IF;

      IF (t_count2 = 0)
        THEN
          EXECUTE immediate 'CREATE TABLE OBFUS_LOG (SRC_TABLENAME VARCHAR2(50 BYTE), SRC_TABLE_ROW_COUNT NUMBER, COPY_TABLENAME VARCHAR2(50 BYTE), COPY_TABLE_ROW_COUNT NUMBER, UPDATE_DATE TIMESTAMP(6) )';
      END IF;

    EXECUTE immediate 'INSERT INTO OBFUS_TABLE VALUES (''OB_MYTABLE1'',''SRNM'',''NAME'',''Y'')';
    COMMIT;

      FOR x IN (SELECT TABLENAME, COLUMNNAME, DATA_TYPE FROM OBFUS_TABLE WHERE ACTIVE='Y')
      LOOP
        p_tname    := upper(x.TABLENAME);  -- Table name
        p_cname    := upper(x.COLUMNNAME); -- Column name
        l_datatype := upper(x.DATA_TYPE);
        dbms_output.put_line('Started: '||TO_CHAR(sysdate,'YYYY/MM/DD HH24:MI:SS'));
      END LOOP;

    END; 
```

注意：实际上有大约 30 个插入语句，格式与上面的完全相同。我删除了它们，因为它们会过多地填充这篇文章，但我已经手动检查了每个插入语句，它们都是正确的。

我假设问题是 SQL Developer 在运行之前对代码进行了“健全性检查”，并向前看循环并意识到 OBFUS_TABLE 不存在，但在执行该段代码时无法理解 OBFUS_TABLE肯定会存在。

有没有办法解决这个问题？我想也许 GOTO 语句可能会有所帮助，但没有运气。我宁愿将解决方案保留为一个单独的脚本，而不是两个单独的脚本，但如果解决此问题的唯一方法是这样做，那么我想我可以这样做。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T16:46:09.100

您将需要使用动态 SQL 进行选择，如下所示：

```
declare
    ...
    l_tname    varchar2(100);
    l_cname    varchar2(100);
    l_datatype varchar2(100);
    rc         sys_refcursor;
begin
    ...
    open rc for 'SELECT TABLENAME, COLUMNNAME, DATA_TYPE  
                 FROM OBFUS_TABLE WHERE ACTIVE=''Y''';
    loop
        fetch rc into l_tname, l_cname, l_datatype;
        exit when rc%notfound;
        dbms_output.put_line('Started: '||TO_CHAR(sysdate,'YYYY/MM/DD HH24:MI:SS'));
    end loop;
    close rc;
end; 
```

# java - 自动调用 JSF 中的 h:link

> ID：10724315
> 
> 赞同：0
> 
> 时间：2012-05-23T16:41:27.470
> 
> 标签：java, jsf, jsf-2, el

我正在 JSF2 中创建用户身份验证，并且我在每个页面上显示的标题都包含以下内容：

```
<c:if test="#{user.loggedIn}">
    <li><h:link value="Log out" outcome="#{user.logout}"/></li>
</c:if> 
```

*User*引用 userBean，*logout()*只是使会话无效，并发出重定向到登录页面。因此，当用户登录时，*user.loggedIn*变为真，并显示注销链接，但不知何故立即被调用，并且用户立即注销。

有谁知道为什么会这样？我想过使用*h:commandLink*，但它需要一个表单，我试图避免它。

**编辑：** 我复制了错误的代码......在花了一个小时弄清楚为什么用户无法登录之后我的运气。您可以查看以前的版本以查看错误复制的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T16:50:30.647

~~当 JSF 标签未被识别和解析时，可能会发生这种情况，并且它有效地呈现为纯文本，其中所有 EL 表达式都被评估为值表达式。在您的情况下，它基本上会打印`#{user.logout()}`. 但是当 EL 这样​​做时，当然会调用方法的逻辑。~~

如果您删除该`action`属性并在浏览器中打开页面并执行*View Source*，那么您将看到一个未解析的`<h:commandLink>`标签而不是生成的 HTML`<a>`元素。

确保`h:`在视图文件的根标记中的正确 URI 上定义了 XML 命名空间。

```
xmlns:h="http://java.sun.com/jsf/html" 
```

 ~~* * *

**更新**：`<h:link>`不打算调用 bean 操作。它的目的是作为一个纯粹的 GET 链接。根据[规范](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/link.html)`outcome`，它被评估为值表达式，而不是方法表达式。必须表示链接必须导航到的视图 ID 。当 EL 将您的方法评估为值表达式时，它当然会立即被调用。只需与重定向结合使用即可。另一个优点是这不是可收藏的，也不是可搜索机器人抓取的。`outcome``<h:commandLink>`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T16:47:43.027

这是来自 jsfToolbox 的示例：

```
<h:commandLink id="link1" 
               value="#{bundle.checkoutLabel}" 
               action="#{shoppingCartBean.checkout}" /> 
```

在注销结束时摆脱你的括号。~~

# javascript - 如何使用 JQuery 或 JavaScript 删除表中的所有链接？

> ID：10724317
> 
> 赞同：2
> 
> 时间：2012-05-23T16:41:38.530
> 
> 标签：javascript, jquery

我有一张表，我想导出到 Excel，但我不希望任何超链接通过。那可能吗？

我注意到在线程 [JQuery remove images](https://stackoverflow.com/questions/6098958/jquery-remove-images)中正在执行类似的操作，但我并不认为它与我需要的完全一样？

如果可能的话，我还想将文本保留在标签内吗？

例子：

```
<table class="surveyTable" id="Summary">
    <tr>
        <th>Section</th>
        <th title="3584">
            <a href="test.php?id=3584">
                Call 1
            </a>
        </th> ... 
```

我希望能够在没有href但保留“Call 1”的情况下导出上述内容，但也许这是不可能的？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T16:45:45.953

是的，这应该相当简单，使用以下函数回调签名`replaceWith`：

```
$('#summary a').replaceWith(function() {
    return this.childNodes;
}); 
```

这将删除每个`a`元素并将每个元素替换为其所有子节点。这意味着您保留任何格式。

如果您只想使用纯文本，那也很容易实现：

```
$('#summary a').replaceWith(function() {
    return $.text([this]);
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-23T16:47:33.810

您可以使用以下代码轻松完成此操作，jQuery 将处理所有循环`a`并将其替换为其中的文本。

```
 $('#Summary a').contents().unwrap(); 
```

[工作小提琴](http://jsfiddle.net/joycse06/szKQv/1/)

[$.unwrap()](http://api.jquery.com/unwrap/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T16:45:41.040

试试这个：

```
$('th a').each(function(){
   $(this).replaceWith($(this).text())
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T16:45:56.813

我还没有测试语法的正确性，但是，这些方面的东西应该可以工作：

```
$('#Summary a').each( function() {
   $(this).parent().html($(this).html());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T16:46:53.370

```
$("#Summary").find('a').each(function(){
  $(this).attr('href','#');
}); 
```

我相信这将解决您的目的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T16:50:11.717

```
$('.surveyTable tr th a, .surveyTable tr td a').each(function(){
   $(this).replaceWith($(this).text());
});​ 
```

[http://jsfiddle.net/qTB8E/3/](http://jsfiddle.net/qTB8E/3/)

# ruby-on-rails - 测试列表按正确的顺序排序 capybara

> ID：10724321
> 
> 赞同：9
> 
> 时间：2012-05-23T16:41:52.773
> 
> 标签：ruby-on-rails, selenium, rspec, automated-tests, capybara

我正在尝试在 capybara 中编写一些测试来测试日期列表是否正确排序。例如，我有一个日期列表，日期为 2012 年 6 月 27 日星期三、2012 年 8 月 13 日星期一、12 年 5 月 31 日星期四，当我单击按钮时，它将重新排列从最早开始的日期，*即：* 5 月 12 日星期四、12 年 6 月 27 日星期三、 12 年 8 月 13 日。

在 capybara 中有什么方法可以编写这样的测试。

通常我会使用 page.find 等方法，但这些方法只会查找日期，而不会告诉您它们是否按正确的顺序排序。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-01T09:29:48.613

您需要使用`:nth-child`css 选择器。

假设您的日期列表在`<ul>`id`#dates`中，您可以使用以下命令测试订单：

```
page.should have_selector("ul#dates li:nth-child(1)", content: @date1.content)
page.should have_selector("ul#dates li:nth-child(2)", content: @date2.content) 
```

传入的第一个值`have_selector()`是您的选择器，第二个（在本例中）是您期望的内容。您不仅限于传递内容，例如，如果每个日期都链接到`Date#show`您可以添加的操作`url: date_path(@date)`。

# user-interface - 为什么自动化 GUI 工具如此脆弱？

> ID：10724323
> 
> 赞同：5
> 
> 时间：2012-05-23T16:42:03.737
> 
> 标签：user-interface, automation, silktest

大约一年半以来，我一直在使用 SilkTest，它是一种 GUI 自动化工具，适用于桌面和 Web 应用程序。它模拟鼠标和键盘输入，最终模拟最终用户行为。但是，我发现它有点片状；连续 9 次正常工作的 Button.Click() 或 DialogBox.Close() 方法调用似乎在第 10 次调用时失败，只是在第 11 次返回工作。通常我会把这归结为 SilkTest（或测试下的应用程序，或操作系统，或者你有什么）的一个怪癖，但后来我发现其他 GUI 自动化工具（如 Selenium）也存在类似问题：

[Selenium Click() 因锚元素而失败](https://sqa.stackexchange.com/questions/853/selenium-click-not-working-on-some-anchor-elements)

[Selenium Click() 无法单击按钮对象](https://stackoverflow.com/questions/6204482/selenium-fails-to-click)

我知道对于桌面应用程序，每个 GUI 控件/对话框都有一个与之关联的标签元素（至少在基于 Windows 的 GUI 中），而对于网页，则有页面元素的域对象模型层次结构。我的猜测是，这些工具有时会在导航这些层次结构和查找独特元素和控件时遇到问题。但是这里发生了什么？SilkTest 是一个相对较旧的商业软件包，而 selenium 相对较新、开源且不断发展。他们都可能有类似问题的事实引起了我的注意。

另外，其他 GUI 测试工具也是这种情况吗？还是我刚刚经历了一些不寻常的经历？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T21:30:44.360

您在这里谈论两件事，首先是在要自动化的被测应用程序中查找对象的概念。您对 SilkTest（和其他工具）如何做到这一点的描述非常准确，即只要自动化软件可以使用某些东西来识别控件，那么您就可以了。

第二件事是为什么自动化本身随机失败，因为工具没有报告它找不到控件，那么它必须认为它向应用程序发送了适当的操作，例如单击或类型。这可能是应用程序尚未准备好接受您发送的操作，这类似于您尝试“在它准备好之前”单击某物，在这种情况下，应用程序可以决定缓冲输入或丢弃输入。

那么，你如何解决这个问题？一种方法是使用该工具的功能来尝试确定应用程序何时准备好输入，而不是盲目地向其发送输入流。SilkTest 具有允许您执行此操作的功能（与 TestPartner 一样）。我无法评论 Selenium，因为它是我没有使用过的东西。

一种简单的测试方法是在违规操作之前插入暂停几秒钟，然后在循环中运行它以查看这是否解决了问题，如果是这种情况，那就是你的问题。如果这不能解决问题，那么您需要联系测试工具的供应商。

请记住，应用程序变得越来越复杂，即多线程、通信，其中任何一种都可能导致自动同步失败，从而导致操作失败。

希望有帮助。

# mysql - MySQL INNER JOIN 别名

> ID：10724324
> 
> 赞同：33
> 
> 时间：2012-05-23T16:42:05.547
> 
> 标签：mysql, select

有谁知道我如何在其中进行内部连接和别名值，这样它们就不会相互覆盖？如果您看到我的代码，它可能看起来更清楚：

```
 SELECT  home, away, g.network, g.date_start 
    FROM    game g
    INNER JOIN team t ON (
        (t.importid = g.home) as home
        OR
        (t.importid = g.away) as away
    )
    ORDER BY date_start DESC 
    LIMIT 7 
```

**已解决**（在下面的帮助之后是我的最终查询）

```
 SELECT 
        home.market AS home_market, 
        away.market AS away_market, 
        g.network, 
        g.date_start

    FROM game AS g
    INNER JOIN team AS home ON (
        home.importid = g.home
    )
    INNER JOIN team AS away ON (
        away.importid = g.away
    )

    ORDER BY g.date_start DESC 
    LIMIT 7 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-23T17:20:35.400

您需要加入两次：

```
SELECT home.*, away.*, g.network, g.date_start 
FROM game AS g
INNER JOIN team AS home
  ON home.importid = g.home
INNER JOIN team AS away
  ON away.importid = g.away
ORDER BY g.date_start DESC 
LIMIT 7 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T16:45:58.563

使用单独的列来指示连接条件

```
SELECT  t.importid, 
        case 
            when t.importid = g.home 
            then 'home' 
            else 'away' 
        end as join_condition, 
        g.network, 
        g.date_start 
FROM    game g
INNER JOIN team t ON (t.importid = g.home OR t.importid = g.away)
ORDER BY date_start DESC 
LIMIT 7 
```

# javascript - 砌体未在 Wordpress 博客上加载

> ID：10724325
> 
> 赞同：1
> 
> 时间：2012-05-23T16:42:08.760
> 
> 标签：javascript, wordpress, jquery-masonry

在过去的两天里， 我一直试图让[Masonry将我的帖子堆叠在这个博客上：](http://masonry.desandro.com/) [topheavypilesofbooks.com](http://topheavypilesofbooks.com/)。帖子应该整齐地堆叠，没有空格。相反***，帖子像往常一样浮动，带有很多垂直空白***。

这是一个 Wordpress 博客，我添加了带有 enqueue 功能的 javascript。根据 Firebug，javascript 加载正确。

我加载的最后一个脚本是触发 Masonry 的函数，它是这样的：

```
 jQuery((window).load(){
  jQuery('#content').masonry({
    // options
    itemSelector : '.post',
    columnWidth : 240
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:41:23.597

看起来你的括号有错误。

试试这个......我在你的网站上运行它并且它起作用了。可能需要一些调整，我目前没有时间做:)

```
jQuery(function () { 
  jQuery('#content').masonry({ 
   itemSelector: '.post', 
   columnWidth: 240 
  }); 
}) 
```

# asp.net - asp.net 多用户？

> ID：10724330
> 
> 赞同：2
> 
> 时间：2012-05-23T16:42:42.633
> 
> 标签：asp.net, session

我有一个 asp.net c# web 应用程序，用户可以登录并查看他上周的日程安排，该日程安排存储在远程数据库中。登录该站点只需执行 SQL 检查，以查看用户名和密码是否与数据库中的 uname 和 pass 记录匹配。登录后，他们可以操作时间表的时间条目等。在调试时，我以两个不同的用户身份登录。用户 B 的表单上有用户 A 的所有内容。我编写程序就像编写常规的 c# 应用程序一样，并没有真正考虑过同时使用该网站的多人。我想我认为实例处理是自动的？我只使用asp.net 一个星期左右，并没有太多的支持。

**我的主要问题是，如果我的网站上同时有多个用户，我如何保持他们的会话分开？**

* * *

更新 - 添加会话变量后

这是我获取用户信息的sql语句。现在，使用会话变量：

```
string sqlquery = "SELECT FirstName, LastName, OperatorID FROM operators WHERE EmpID = '" + sql + "'";
        using (MySqlConnection conn = new MySqlConnection(ConfigurationManager.ConnectionStrings["EobrConnectionString"].ConnectionString))
        {
            conn.Open();
            using (MySqlCommand comm = new MySqlCommand(sqlquery, conn))
            {
                using (MySqlDataAdapter adapter = new MySqlDataAdapter(comm))
                {
                    DataTable dt = new DataTable();
                    adapter.Fill(dt);
                    foreach (DataRow dr in dt.Rows)
                    {
                        Session["Fname"] = dr[1].ToString();
                        Session["Lname"] = dr[2].ToString();
                        Session["opID"] = dr[3].ToString();
                     }
                }
            }
        } 
```

在主菜单页面中，我有这个：

```
protected void Page_Load(object sender, EventArgs e)
{
    firstname = Session["Fname"].ToString();
    lastname = Session["Lname"].ToString();
    lblwelcome.Text = "Welcome, " + firstname + " " + lastname + ", make your selection below.";
} 
```

当用户 A 登录时，他们会看到自己的名字“Frank Drebbin”。当用户 B 登录时，他们会看到自己的名字“Jake Gaston”。但是现在，如果我重新加载第一个用户页面，他们会看到名称为“Jake Gaston”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T18:13:32.667

您需要使用单独的浏览器。您正在使用会话来识别用户，并且会话与浏览器中的 cookie 相匹配 根据您上面的评论，会发生以下情况

以 steve 身份登录 -> 会话已创建 -> steve 以用户名存储 -> cookie 返回到浏览器

在新窗口中，以 frank 登录 -> 会话已存在，将用户名重命名为 frank。

在第一个窗口刷新。-> 会话用户名没有坦率 -> 根据该用户名返回数据。

新的 IE 窗口都共享相同的上下文。这意味着如果 1 个窗口获得 cookie，它们都会获得。有两种方法可以解决这个问题（实际上是 3 种）。

*   使用物理上不同的机器
*   使用 2 个浏览器，例如 IE & Firefox
*   在 IE 中按 alt 获取菜单，然后从文件菜单中单击新会话。这会形成一个物理上独立的窗口，不会共享 cookie（尽管没有任何东西可以向您表明这一点）

完成上述操作后，再次尝试以 Steve 和 Frank 的身份登录，您应该会看到他们不会相互干扰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T16:45:41.197

我猜问题是，虽然会话是分开保存的（你在会话中存储东西，对吗？），从数据库加载数据的查询没有考虑用户名。

查看加载任务的 SQL 查询，看看您是否在该查询中包含用户名（或用户 ID）。如果您需要帮助查看它，请随时发布查询。

因此，要直接回答您的主要问题，如果您将内容存储在 Session 中，它们将与其他会话正确隔离。但是，错误的数据输入，错误的数据输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T16:47:38.767

**编辑：** 使用另一个浏览器来测试这个，你不能在另一个选项卡中使用相同的浏览器，或者在另一个窗口中使用相同的浏览器，它几乎将是同一个会话

如果您使用“会话”来保存用户的数据，那么它们是分开的，这意味着您应该将任何每个用户的数据存储到“会话”或 cookie 中。

注意：您应该保持并发[http://msdn.microsoft.com/en-us/library/cs6hb8k4(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/cs6hb8k4(v=vs.80).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-14T07:42:53.837

解决方案非常简单（**用户不同的浏览器 SIMONTANIOUSLY**），如 IE、Firefox、Chrome 等......

您没有使用事务 SQL，因此需要担心并发性，

但是当你登录当前浏览器时，如果你使用同一个浏览器，它仍然会创建一个会话，

如果您使用其他浏览器，浏览器将拥有会话，但值不会相同。

例如

如果您有 100 部手机，现在每部手机都有不同的浏览器，这意味着您可以存储 100 个相同的**USER**会话，但所有手机的值都会因您提供的数据或操作句柄而异。

希望这可以帮助您理解。

# html - CSS 100% 高度边框颜色

> ID：10724333
> 
> 赞同：1
> 
> 时间：2012-05-23T16:43:00.153
> 
> 标签：html, css

我经常使用 HTML/CSS 创建一个两列（或更多）列布局，并且需要一个分隔边框。我通常将边框添加到左列或右列，但我需要边框以匹配最高列的高度。

我创建了一个 jsFiddle 来说明这个问题：http: [//jsfiddle.net/rxGUS/](http://jsfiddle.net/rxGUS/)

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:00:09.437

如何给两个边框，但有一个负边距等于边框宽度，所以它们重叠；

```
.column1 {
    float:left;
    width:200px;
    padding:5px;    
    border-right:1px solid #000;
}
.column2 {
    float:left;
    width:200px;
    padding:5px;
    margin-left:-1px;    
    border-left:1px solid #000;    
}​ 
```

[http://jsfiddle.net/alexk/rxGUS/9/](http://jsfiddle.net/alexk/rxGUS/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:34:18.353

根据 Alex 的回答进行了调整，以考虑 Twitter Bootstrap 中的 CSS。由于两列之间的间距应该是`20px`（从`margin-left:20px;`），我添加了将其设置`10px`为边框的每一侧。如果需要`20px`，只需将`padding-left`for`.column2`和`padding-right`for设置为`.column1`to 即可`20px`。

```
.column1, .column2 {
    float:left;
    width: 200px;
}
.column2 {
    margin-left:-1px;
    border-left:1px solid #000;
    padding-left:10px;
}
.column1 {
    border-right: 1px solid #000;
    padding-right:10px;
} 
```

请参阅[包含 Twitter Bootstrap 的 jsFiddle 示例](http://jsfiddle.net/rxGUS/10/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T16:54:15.233

使用纯 CSS 并没有真正简单的方法来做到这一点，但是有一个名为[EqualHeights](http://www.cssnewbie.com/equalheights-jquery-plugin/)的 jQuery 插件可以实现您想要的效果。基本上，您告诉它要将其应用于哪些元素（`.column1`在`.column2`您的情况下是 ），它会动态地将它们的高度设置为相同的值（基于哪个更高）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T16:48:28.830

你可以通过几种方式做到这一点。最简单的：创建一个背景图像来替换css边框并将其应用于应该与最高列的高度匹配的容器。虽然这不是很灵活。

其次，使用javascript：创建一个变量maxHeight，将其设置为0，然后遍历每一列，返回该列的高度。如果它高于 maxHeight，则将 maxHeight 设置为该值。循环结束后，将所有列设置为 maxHeight 的值。

谷歌上有很多这方面的资源。特别是 jQuery 解决方案。

希望有帮助:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T17:01:13.060

你可以玩，`display: table-cell`但它与 8 以下的 IE 不兼容。这是[jsFiddle 上的一个示例](http://jsfiddle.net/EmX5C/)。它使用 CSS3 选择器作为其间的边界，但您可以乱用它来确定您希望它如何工作。

# c# - Microsoft SQL 文本驱动程序替代品

> ID：10724337
> 
> 赞同：0
> 
> 时间：2012-05-23T16:43:23.983
> 
> 标签：c#, sql, text-driver

我已经尝试过`Microsoft.Jet.OLEDB.4.0`，`Microsoft Text Driver`并且这两个都不是标准的。我正在尝试将简单的 sql 从我们的数据库复制并粘贴到这些文本驱动程序，但我必须大量修改 sql 才能使其工作。我正在查询 csv 和文本文件。除了上面提到的驱动程序之外，还有什么可以处理简单的 sql 查询吗？

这是我正在使用的 sql 示例：

```
select distinct 
     CASE F1
     WHEN 'a' THEN 'abcd'
     WHEN 'b' THEN 'bcde'
     WHEN 'c' THEN 'cdef'
     WHEN 'e' THEN 'efgh'
     ELSE 'Unkown'
     END AS Alpha1,
     CONCAT('91a',trim(F2)) as Alpha2
from 1.csv    
where trim(column1) IS NOT NULL 
```

# android - 如何在代码中检测 7" Android 平板电脑

> ID：10724338
> 
> 赞同：2
> 
> 时间：2012-05-23T16:43:25.957
> 
> 标签：android, kindle-fire, android-screen

我正在尝试在我的代码中检测 7" 平板电脑（即 Kindle Fire 和 Nook Color）。但是，仅测试最小尺寸 1024x600 并不好，因为这样 Galaxy Nexus 也会通过此测试。任何人都有检测此问题的经验什么样的信息？

谢谢，伊戈尔

**编辑：** 我找到了一种使用以下代码检测 Kindle Fire & Nook Color 设备的方法：

```
Activity activity = (Activity) activityContext;
activity.getWindowManager().getDefaultDisplay().getMetrics(metrics);
int width = activity.getWindowManager().getDefaultDisplay().getWidth();
int height = activity.getWindowManager().getDefaultDisplay().getHeight();
if ((width == 1024 && height == 600) || (width == 600 && height == 1024)) {    
        //Detects 7" tablets: i.e. Kindle Fire & Nook Color
        isTablet = true;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T16:52:12.467

要计算设备的高度和宽度（以英寸为单位），您可以使用以下代码。

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);

float widthInInches = metrics.widthPixels / metrics.xdpi;
float heightInInches = metrics.heightPixels / metrics.ydpi; 
```

然后可以计算大小

```
double sizeInInches = Math.sqrt(Math.pow(widthInInches, 2) + Math.pow(heightInInches, 2));
//0.5" buffer for 7" devices
boolean is7inchTablet = sizeInInches >= 6.5 && sizeInInches <= 7.5; 
```

根据上面的 Commonsware 建议，一个可能更快但不太明显的实现。

```
double sizeInInchesSquared = (widthInInches * widthInInches) + (heightInInches * heightInInches);
//0.5" buffer for 7" devices (6.5^2 = 42.25) (7.5^2 = 56.25)
boolean is7inchTablet = sizeInInchesSquared >= 42.25 && sizeInInchesSquared <= 56.25; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T16:50:18.487

请参阅以下内容。似乎不适用于所有设备。如果这两款平板电脑是您唯一担心的设备，我会尝试任何一种实现。

[https://stackoverflow.com/a/10080537/300972](https://stackoverflow.com/a/10080537/300972)

[https://groups.google.com/group/android-developers/browse_thread/thread/cae5ff90157098b1?pli=1](https://groups.google.com/group/android-developers/browse_thread/thread/cae5ff90157098b1?pli=1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T16:49:24.883

如果你关心的是平板电脑而不是尺寸，具体来说：有[Build](http://developer.android.com/reference/android/os/Build.html)类，它可以告诉你模型和产品等信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T23:14:06.560

我知道这是旧线程，但是这种方式呢：

```
public boolean isLargeScreen() {

    LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View view = inflater.inflate(R.layout.device_screen, null);
    FrameLayout menu = (FrameLayout) view.findViewById(R.id.menu);

    if (left_menu != null) {
        return true;
    } else {
        return false;
    }
} 
```

然后：

```
if ( isLargeScreen() ) {
    // do something for large screen & extra large screen
} else {
    // do something for normal screen size
} 
```

和 xml 布局（例如）：

res/layout/device_screen.xml // 正常屏幕尺寸的布局（“默认”）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

    [leave it blank]

</LinearLayout> 
```

res/layout-large/device_screen.xml // 大屏幕尺寸 tablet 7' 的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

    <FrameLayout
        android:id="@+id/menu"
        ... />

</LinearLayout> 
```

res/layout-xlarge/device_screen.xml // 超大屏幕尺寸 > 平板电脑 10' 的布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

    <FrameLayout
        android:id="@+id/menu"
        ... />

</LinearLayout> 
```

在 HTC Desire 和三星 Galaxy Note 10.1 上测试 - 效果很好！

# iphone - 适用于 iOS 的 Google Place API

> ID：10724341
> 
> 赞同：0
> 
> 时间：2012-05-23T16:43:37.797
> 
> 标签：iphone, ios, geocoding, google-places-api, clgeocoder

我正在尝试查找带有企业名称的地点的位置。我想我应该使用 Google Place API，因为`CLGeocoder`无法找到带有名称的地方。

所以我查看了 Google Place API，对位置字段的部分有点困惑。

我想我应该输入位置和半径以及可选的名称来搜索。

当我不知道位置时，我不确定应该输入哪个位置来查找该位置。我想要的是从名称中搜索位置。

那么，我是否应该使用它`CLGeocoder`来找出大致位置并将该位置的真正巨大半径提供给 Google Place API？

例如，如果我想在 LA 找到某家酒店，那么，我是否应该使用它`CLGeocoder`来找出大概位置，然后将该值提供给 Google Place API？

或者还有其他选择吗？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:01:46.100

你的方法很好 - 在我的一个应用程序中，你可以输入一个地址，输入地址后，我使用 CLGeoCoder 获取带有坐标的地标。

```
CLGeocoder *geoCoder = [[CLGeocoder alloc] init];
[geoCoder geocodeAddressString:addressString completionHandler:^(NSArray *placemarks, NSError *error) {

    if (placemarks && placemarks.count>0) 
    {
        if(placemarks.count==1)
        {
            MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance([[[placemarks objectAtIndex:0] location] coordinate], 1000, 1000);

            [mapView setRegion:region animated:YES];
            [mapView regionThatFits:region];
        }
   } 
```

地标具有可用于 google 地方 API 的属性坐标

# html - 我的内容超出了 div

> ID：10724342
> 
> 赞同：1
> 
> 时间：2012-05-23T16:43:40.007
> 
> 标签：html, css, codeigniter

我的div有问题。它必须看起来像这样：[http](http://cl.ly/2r0S043m301p410T2e3z) ://cl.ly/2r0S043m301p410T2e3z但它看起来像这样：[http](http://cl.ly/3h1t0f471W0V1U3j2S0y) ://cl.ly/3h1t0f471W0V1U3j2S0y这真的很烦人。

这是HTML：

```
<html xmlns="http://www.w3.org/1999/html">
<head>
  <link href="<?php echo base_url('css/style.css');?>" rel="stylesheet" type="text/css" />
  <title>Admin :: Home</title>
</head>
<body>
<div id="wrapper">
  <div class="admin-form">
    <div class="header">
      <h1>Admin Home</h1>
    </div>
    <div class="content dashboard">
      <ul>
        <li><a href='<?php echo base_url('admin/DiveLocations');?>'<span class="addDiveLocation"><img src='<?php echo base_url('images/icons/scubadiving.png');?>'/><p>Duiklocaties</p></span></a></li>
        <li><a href='<?php echo base_url('admin/Users');?>'<span class="addDiveLocation"><img src='<?php echo base_url('images/icons/users.png');?>'/><p>Gebruikers</p></span></a></li>
      </ul>
    </div>

  </div>
</div>
</body>
</html> 
```

这是该内容框的 CSS：

```
.admin-form .content .input {
  width: 188px;
  height: 100%;
  padding: 15px 25px;
  margin-left: 100px;
  font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
  font-weight: 400;
  font-size: 14px;
  color: #9d9e9e;
  text-shadow: 1px 1px 0 rgba(255,255,255,1.0);

  background: #fff;
  border: 1px solid #fff;
  border-radius: 5px;

  box-shadow: inset 0 1px 3px rgba(0,0,0,0.50);
  -moz-box-shadow: inset 0 1px 3px rgba(0,0,0,0.50);
  -webkit-box-shadow: inset 0 1px 3px rgba(0,0,0,0.50);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T16:50:21.413

我假设你已经浮动了`li`or `a`。在这种情况下，您应该向父容器添加一个 clearfix 类

```
<div class="content dashboard clearfix"> 
```

这是 clearfix 类代码：

```
.clearfix:before,.clearfix:after{
  content:'\0020';
  display:block;
  overflow:hidden;
  visibility:hidden;
  width:0;
  height:0
}
.clearfix:after{clear:both}
.clearfix{zoom:1} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T16:47:57.627

您没有关闭标签。是错字吗？

```
<a href='<?php echo base_url('admin/DiveLocations');?>'<span... 
```

应该

```
<a href='<?php echo base_url('admin/DiveLocations');?>' ><span.. 
```

# python - 从 python 复制 neo4j 数据库

> ID：10724345
> 
> 赞同：1
> 
> 时间：2012-05-23T16:44:04.030
> 
> 标签：python, copy, backup, neo4j

我需要在 Python 中复制现有的 neo4j 数据库。我什至不需要它来备份，只是在保持原始数据库不变的情况下玩耍。但是，neo4j.py 文档中没有关于复制/备份操作的内容（我使用的是 python 嵌入式绑定）。

我可以将包含原始 neo4j 数据库的整个文件夹复制到具有新名称的文件夹中吗？或者neo4j.py中是否有任何特殊方法可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:54:40.410

是的，当您彻底关闭数据库进行备份后，您可以复制整个数据库目录。

# sql - MERGE 违反 PRIMARY KEY 约束

> ID：10724348
> 
> 赞同：10
> 
> 时间：2012-05-23T16:44:37.530
> 
> 标签：sql, sql-server, sql-server-2008, tsql, upsert

`Assets`我有一个包含两列的 SQL Server 2008 多对多关系表 ( )：

```
AssetId (PK, FK, uniqueidentifier, not null)
AssetCategoryId (PK, FK, int, not null) 
```

在我的项目中，我需要从该表中获取行，并定期将它们插入到复制数据库中。所以，我有两个完全相同的数据库（包括约束）。

为了从一个数据库“复制”到另一个数据库，我使用带有临时表的 MERGE 语句。我在临时表中最多插入 50 条记录，然后将临时表与`Assets`我要复制到的表合并，如下所示：

```
CREATE TABLE #Assets (AssetId UniqueIdentifier, AssetCategoryId Int);
INSERT INTO #Assets (AssetId, AssetCategoryId) VALUES ('ed05bac3-7a92-46aa-8822-2d882b137597', 44), ('dc5e3082-e2eb-4bdf-a640-94e0f59411ed', 22) ... ;

MERGE INTO Assets WITH (HOLDLOCK) AS Target 
USING #Assets AS Source 
ON Target.AssetId = Source.AssetId AND Target.AssetCategoryId = Source.AssetCategoryId 
WHEN MATCHED THEN
UPDATE SET ...
WHEN NOT MATCHED BY Target THEN 
INSERT (AssetId,AssetCategoryId) VALUES (Source.AssetId,Source.AssetCategoryId); 
```

在大多数情况下，这很好用。但是，有时，我会收到错误消息：

> 违反 PRIMARY KEY 约束“PK_Assets”。无法在对象“dbo.Assets”中插入重复键。重复键值为 (dc5e3082-e2eb-4bdf-a640-94e0f59411ed, 22)。该语句已终止。

当我签入`Assets`表格时，不存在这样的记录......所以我很困惑如何插入重复键。

知道这里发生了什么吗？

**更新**

测试时，成功运行6次，插入300行。在第 7 次尝试时，它总是给出与上面相同的错误。此外，当我独自一`INSERT` `(dc5e3082-e2eb-4bdf-a640-94e0f59411ed, 22)`人时，它工作正常。然后我的测试能够继续并插入没有错误的剩余行。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-23T16:50:54.487

您需要`HOLDLOCK`在您的`MERGE`声明中添加一个。尝试以下操作：

```
MERGE INTO Assets WITH (HOLDLOCK) AS Target
... 
```

这样可以避免您遇到的竞争条件。[在此处](http://weblogs.sqlteam.com/dang/archive/2009/01/31/UPSERT-Race-Condition-With-MERGE.aspx)查看更多信息

**编辑**

根据您的更新，我唯一能想到的另一件事是您的临时表中可能有重复的记录。你能仔细检查一下吗？

# sql - SQL - ORDER BY 先运行

> ID：10724350
> 
> 赞同：1
> 
> 时间：2012-05-23T16:44:46.137
> 
> 标签：sql, sql-server-2005

请查看此数据库架构：

```
create table Person (id int not null identity,
                     [index] varchar(30),
                     datecreated datetime, 
                     groupid int)

create table [Group] (id int identity not null, description varchar(30)) 
```

样本数据：

```
insert into Person ([index],datecreated,groupid) values ('4,5,6','2011-01-01',1)
insert into Person ([index],datecreated,groupid) values ('1,2,3','2011-02-02',1)
insert into Person ([index],datecreated,groupid) values ('7,8','2012-02-02',2) 

insert into [Group] (description) values ('TestGroup')
insert into [Group] (description) values ('TestGroup2') 
```

请看下面的 SQL 语句：

```
select  *    
from Person 
inner join [Group] on Person.groupid = [group].id 
where [group].description = 'TestGroup' 
order by 
   left(substring([index], charindex(',', [index]) + 1, 200),  
        charindex(',', substring([index], charindex(',', [index]) + 1, 200)) - 1) 
```

此 SQL 语句失败并出现以下错误：

> 传递给 SUBSTRING 函数的长度参数无效。

它是`order by`导致此错误的子句，即它试图查找索引列的第三个元素，但第三个元素不存在于第 3 行（只有两个元素）。

但是，我希望`[group].description = 'TestGroup'`过滤掉记录三。情况似乎并非如此。就好像该`order by`子句在该子句之前运行`where`。如果`order by`从查询中排除子句，则查询运行。

为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:11:47.550

SQL 中的求值顺序有很弱的保证。可能首先执行排序，然后执行流聚合。这本身并没有错。

一般来说，您不能依赖执行顺序。除非在 case 表达式中，您可以使用它来创建一个虚拟值，就像`NULL`您的订单一样，如果输入为`SUBSTRING`无效。**案例是执行评估顺序的唯一方法。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:25:48.847

这个 ORDER BY 是相当残酷的。我建议使用临时表或表子表达式将其分解为几个查询，这样您就可以先进行过滤，和/或创建一个包含要排序的数据的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T17:45:11.217

请记住，SQL 是一种声明性语言，而不是一种过程性语言。也就是说，您描述了您想要的结果集。您依赖 SQL 编译器/优化器来设置执行计划。

非常典型地，SQL 引擎将有一个组件从表中读取数据并执行该数据所需的所有计算。当然，这包括 SELECT 子句中的计算，还包括“ON”子句、“WHERE”子句和“ORDER BY”子句中的计算。

然后引擎可以在读取数据*后进行过滤。*这使引擎能够轻松地使用计算值进行过滤。

我并不是说所有数据库都以这种方式工作。我要说的是，不能保证 SQL 语句中的操作顺序。这种情况是按错误顺序执行操作导致错误的情况之一，这会阻止 SQL 完成。您是否需要帮助重写查询以使其不会出现错误？

# linux - 是否有任何宏可以检查在 g++ 编译期间是否指定了 -lrt 开关？

> ID：10724377
> 
> 赞同：0
> 
> 时间：2012-05-23T16:46:11.080
> 
> 标签：linux, gcc, g++

是否有任何测试宏可用于查看代码是否正在使用`-lrt`开关（POSIX.1b 实时扩展库）编译？我想在我的代码中围绕 using 部分使用`clock_gettime`它，这样如果`-lrt`在构建期间未指定，则不会使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T16:47:38.943

`-lXXX`是链接器标志；它仅*在*编译和预处理发生后才相关。所以不，没有宏可以做到这一点。

# wordpress - /null 被附加到 Wordpress 文件中，可能是通过 Shopp 插件

> ID：10724385
> 
> 赞同：1
> 
> 时间：2012-05-23T16:46:41.197
> 
> 标签：wordpress, .htaccess, redirect, permalinks

有一个我无法复制的相当奇怪的。我在我的 wordpress 设置中使用了“重定向”插件，它表明该网站上几乎 50% 的点击都在请求最后带有 /null 的 url - 这会导致 404 错误。

我也在使用 Shopp 插件，并且始终使用固定链接。

有没有人经历过这个？

另外，有没有办法我可以使用 .htaccess 来判断最后是否有 /null - 然后将其删除？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:45:13.800

不知道此添加的来源，但您可以使用 .htaccess 摆脱它。加载并启用 mod_rewrite 并设置 AllowOverride All 后，将其放在您的 .htaccess 中：

```
RewriteRule ^(.*)/?null$ $1 [L,R=301,NC,QSA] 
```

# php - 根据 ID 获取 Session 值

> ID：10724392
> 
> 赞同：0
> 
> 时间：2012-05-23T16:47:11.810
> 
> 标签：php, joomla

我正在将 SWFUpload 实施到 Joomla 中。我将会话 ID 传递给服务器 -`session_id()`在服务器端需要检索`$_SESSION`swfupload 发送的特定 ID 的值。

我的问题是如何`$_SESSION`根据会话 ID 获取价值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T16:52:10.780

要设置会话 ID，请`session_id`在调用之前将其传递给`session_start`.

```
$sessionID = "abc123";  // or from $_POST or whatever

session_id($sessionID);
session_start();

// $_SESSION will now contain the values from the given session ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:52:30.390

我认为您需要做的是将相关信息存储在 $_SESSION 变量以外的其他位置，因为从本质上讲，它应该仅适用于会话适用的特定客户端！

如果您将 UserID 或其他任何内容存储在数据库中，然后使用 SessionID 作为密钥，您可以查找脚本所需的任何信息

希望这会有所帮助。

# qt - 在 Qt 中如何对 QModelIndex 的直接子索引进行排序

> ID：10724394
> 
> 赞同：3
> 
> 时间：2012-05-23T16:47:14.817
> 
> 标签：qt, sorting, qabstractitemmodel, qmodelindex, qsortfilterproxymodel

我正在编写一个 C++ 应用程序，它使用 Qt 类来处理某些数据模型。为此，我继承自`QAbstractItemModel`：

```
// the following is a class that represents the actual data used in my application
class EventFragment
{
....
private:
    qint32 address;
    QString memo;
    QDateTime dateCreated;
    QVector<EventFragment*> _children;
....
};

// the following is the model representation that used by my application to display the actual details to the user
class EventModel : public QAbstractItemModel
{
     Q_OBJECT
public:
     explicit EventModel (QObject *parent = 0);
....
private:
     // the following is the root item within the model - I use a tree-like presentation to show my data
     EventFragment* _rootFragment;
}; 
```

在某些时候，我的应用程序中需要一个排序/过滤选项，所以我还创建了一个继承自的类`QSortFilterProxyModel`

```
class EventProxyModel : public QSortFilterProxyModel
{
     Q_OBJECT
public:
     explicit EventProxyModel (QObject *parent = 0);
...
public:
     // I had to add my custom implementation in the 'lessThan' method to achieve a
     // more complex sort logic (not just comparing the actual values but using
     // additional conditions to compare the two indexes)
     virtual bool lessThan ( const QModelIndex & left, const QModelIndex & right ) const;
...
}; 
```

为了实现排序，我使用了默认`QSortFilterProxyModel::sort()`方法（我没有在我的代理模型类中重新实现它）并且有一段时间它似乎可以工作。

但在某些时候，我注意到实际`QSortFilterProxyModel::sort()`方法对整个模型进行排序，而我需要的是仅对某个索引的直接子项进行排序。

我试图重新实现类的`sort()`方法`EventModel`，但过了一会儿我意识到这`QSortFilterProxyModel::sort()`根本不是指它。另一方面，我不确定如何以安全的方式重新排列索引，以便显示模型的视图不会崩溃。

我认为一定有一种方法可以只对某个的直接孩子进行排序`QModelIndex`，但我还没有找到。

是否有任何教程/示例可以演示我的案例的可能解决方案，或有关如何做到这一点的一些指导方针？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T20:33:21.953

如果您想要一个优化的解决方案，根本不对您不想排序的索引进行比较，我认为您必须重新实现自己的 QAbstractProxyModel，这是一项不平凡的任务。但是，如果您对未优化的解决方案感到满意，我会试试这个：

```
bool EventProxyModel::lessThan( const QModelIndex & left, const QModelIndex & right ) const {
    if ( left.parent() == isTheOneToSortChildrenFor ) {
        ...apply custom comparison
    } else {
        return left.row() < right.row();
    }
} 
```

比较源中的行应该使除索引之外的所有内容与特定的父对象保持原样。

# php - 我可以确定 PHP 数组值增量吗？

> ID：10724398
> 
> 赞同：0
> 
> 时间：2012-05-23T16:47:20.467
> 
> 标签：php

我有两个多维数组，我需要确定每个值的增量。我知道 array_diff 函数只返回键的差异。假设两个数组包含相同的键集，是否有一个函数可以确定每组值的增量？

例子：

```
array_1(test1 => Array([key1] => 100, [key2] => 200 ) )

array_2(test1 => Array([key1] => 105, [key2] => 195 ) ) 
```

我希望是这样的：

```
array_3(test1 => Array([key1] => 5, [key2] => -5 ) ) 
```

是否有任何 PHP 方法可以做到这一点，还是我一个人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T16:59:15.157

此处的答案建议使用 foreach 循环，但我认为创建匿名函数会更容易：

```
<?php
    $count_delta = create_function('$a,$b', 'return $a - $b;');

    $arr1 = array(100, 200);
    $arr2 = array(20, 180);

    $delta = array_map($count_delta, $arr1, $arr2);

    var_dump($delta); 
```

输出将是：

```
array
  0 => int 80
  1 => int 20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T16:50:18.737

```
$delta = array();

foreach( $array1 as $k=>$v )
{
  if( array_key_exists( $k, $array2 )
  {
    // preserve the key
    $delta[$k] = $array1[$k] - $array2[$k];

    // or don't
    $delta[] = $array1[$k] - $array2[$k];
  }
}

print_r($delta); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T16:52:37.100

没有内置功能，但您可以使用它。

```
function delta_array($a, $b) {
    if (sizeof($a) != sizeof($b))
        return false;

    $arr = array();
    for ($i=0; $i < $c = sizeof($a); $i++)
        $arr[] = $b[$i] - $a[$i];

    return $arr;
}

$arr1 = array(100,200);
$arr2 = array(105,195);

$delta = delta_array($arr1, $arr2);

print_r($delta); 
```

以上将返回

```
Array
(
    [0] => -5
    [1] => 5
) 
```

# javascript - JavaScript 调用服务器端事件

> ID：10724405
> 
> 赞同：0
> 
> 时间：2012-05-23T16:47:57.237
> 
> 标签：javascript, asp.net

所以我有一段时间没有做任何 ASP.net 了，我试图调用一些 javascript 验证，这有效，然后我需要调用一个 Code behind 事件。

我以为这很容易，但它变成了一个正确的麻烦。

我要做的就是检查文本框是否为空，如果是则发出警报并且不运行任何服务端方法，如果它不为空则运行方法。

不要介意更改代码，（尽管必须继续使用母版页和内容部分）。

```
 <input type="submit" value="Update" onclick="validate()"/>
<SCRIPT LANGAUGE="JavaScript">
       function validate() {

           var jname = document.getElementById('MainContent_txtname').value;

           if (jname == null) {
               alert("Please Enter Name");

           }
           else {
               CallServerMethod();
           }
        }
       function CallServerMethod() {

                UpdateClient() //I dont work
                }
       </SCRIPT> 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:52:01.937

您可以让 Ajax 调用服务器页面（aspx 页面/.ashx 处理程序）来执行此操作。这就是你将如何使用***jQuery***（如果你已经在你的项目中使用它）

```
function CallServerMethod()
{
    $.post("yourserverpage.aspx", { name : "Scott" }, function(data){
      //now data variable has the result from server page. do whatver you 
      // want with that. May be an alert
     alert(data);
    });
} 
```

在您的`yourserverpage.aspx`文件中，您可以从请求参数中读取名称键值并执行您想要执行的任何服务器代码并使用 Response.Write() 方法返回一些内容

前任 ：`Response.Write("user saved");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:50:21.950

这个网站上有很多关于这个主题的信息。

这是一个好的开始：[从客户端 javascript 调用服务器端函数](https://stackoverflow.com/questions/3709426/call-server-side-function-from-client-side-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T16:56:59.880

您正在寻找的是ajax。更简单的方法是使用具有 $.get 或 $.getJSON 或 $.ajax 方法的 jquery，该方法包装了 xmlhttprequest（用于从 javascript 调用服务器方法的对象）。

另一种简单的方法是研究 WebMethod。您需要为`[WebMethod]`服务器端方法设置属性，将脚本管理器添加到您的 aspx 页面，然后使用 PageMethods.MyServerMethod 调用服务器方法

```
$.ajax({
    type: "POST",
    url: "mypage.aspx/ServerMethodName",    
    data: '{"id":"' + $("#divID").text() + '"}',        
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (returnValueFromServerMethod) {
        if(returnValueFromServerMethod.d != "")
            //do something great

    }
});

[WebMethod]
public static string ServerMethodName(string id)
{
    HttpContext.Current.Session["ID"] = id;            
} 
```

您需要在 page.aspx 中添加一个脚本管理器以启用页面方法。

```
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="true">                    
</asp:ScriptManager> 
```

您可以将页面方法的内容替换为更清洁的服务 .svc。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T17:02:51.183

```
function validate(){
    var jname = document.getElementById("MainContent_txtname').value;

    if(jname.length == 0){
        alert("Empty text field");
    }else{
        CallServerMethod(jname);
    }
}
function CallServerMethod(param){
    var xmlhttp;
    if(window.XMLHttpRequest){
        xmlhttp = new XMLHttpRequest();
    }else{
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    //we have an xmlhttp object
    xmlhttp.onreadystatechange = function(){
        if(xmlhttp.readyState==4 && xmlhttp.status==200){
            var response = xmlhttp.responseText;
            UpdateClient(response);         
        }
    }
    xmlhttp.open("GET","server_page.php?jname="+param,true);
    xmlhttp.send();
}
function UpdateClient(response){
    alert("Server responded with response: "+response);
} 
```

然后将 validate 设置为 onChange 事件。所以....`<input....onChange="validate();" />`

显然 server_page.php 也可以是 server_page.asp 或其他任何东西，参数只是在 GET 请求中编码的 URL。您也可以使用发布请求发送它，但这需要更多的工作......

```
//in the last part of CallServerMethod(),
//replace the last 2 lines with:
xmlhttp.open("POST","server_page.php",true);
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.setRequestHeader("Content-length",param.length);
xmlhttp.setRequestHeader("Connection", "close");
xmlhttp.send(param); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T18:11:59.250

我一直在使用 .ajax({ ... 方法来做到这一点。但是，我最近遇到了另一种更简单的方法来实现这一点 - [MSDN 链接](http://msdn.microsoft.com/en-us/magazine/cc163499.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-24T23:05:01.443

一个简单的解决方案是让您的 javascript 单击隐藏按钮。

```
<SCRIPT LANGAUGE="JavaScript">
   function validate() {

       var jname = document.getElementById('MainContent_txtname').value;

       if (jname == null) {
           alert("Please Enter Name");

       }
       else {
           CallServerMethod();
       }
    }
   function CallServerMethod() {

            document.getElementById('<%#btnRefresh.ClientID %>').click(); 
            }
   </SCRIPT> 
```

然后在代码隐藏中的按钮单击事件中做任何你想做的事情。

如果我理解正确，这似乎是最简单的解决方案。

# jquery - 滚动条的存在会影响 JQuery 偏移量

> ID：10724411
> 
> 赞同：1
> 
> 时间：2012-05-23T16:48:09.723
> 
> 标签：jquery, scrollbar, offset

我为正在开发的管理面板中的一些按钮创建了一个简单的工具提示。当用户悬停时，我正在使用一些非常标准的 JQuery 代码将工具提示定位在按钮上方。但是，无论是否存在滚动条，似乎都存在一些定位问题。

随着滚动条的出现，工具提示出现在正确的位置......

![在此处输入图像描述](../Images/0c1817310c137766824bcdcb563b8110.png)

当滚动条显示的内容不足时，工具顶部似乎偏离了滚动条的宽度......

![在此处输入图像描述](../Images/7af58deeb2378990c2a49a4f475ffbf9.png)

这似乎很奇怪，因为我使用的是 offset().left - 它不应该受到页面宽度的影响。这是我正在使用的代码...

```
var ttl;
var tt;
$('.icon').mouseover(function (e) {
    ttl = $(this).attr('title');
    $(this).attr('title', '');

    $('body').append('' +
        '<div id="tt" class="tt">' +
        '   <div class="tttxt">' +
        '   ' + ttl +
        '   </div>' +
        '   <div class="ttnib">&nbsp;</div>' +
        '</div>');
    tt = $('#tt');

    var y = $(this).offset().top - tt.outerHeight();
    var x = $(this).offset().left - (tt.outerWidth() - $(this).outerWidth()) / 2;
    tt.css('left', x + 'px').css('top', y + 'px');
});
$('.icon').mouseout(function () {
    $(this).attr('title', ttl);
    tt.remove();
}); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:06:00.473

好的，所以我最终完成了这项工作。我最初将工具提示附加到正文标记。当我添加一个包装器 div 并附加到它时，无论是否存在滚动条，工具提示都会正确对齐。不知道为什么附加到身体会导致变化，但至少我让它工作了。

**更新：**

发布后不久，我找到了真正的罪魁祸首。我在包装器 DIV（以及其他一些元素：HTML、FORM）上有 100% 的高度。删除之后，一切都修复了。我知道最好不要像那样高高在上，但我想要一个效果。那好吧。

# php - 使用外部数据库数据登录 Wordpress

> ID：10724414
> 
> 赞同：0
> 
> 时间：2012-05-23T16:48:22.683
> 
> 标签：php, database, wordpress, login, external

我有一个 WP 站点，也有一个带有用户的外部数据库（不是 WP 数据库）。该表的插入过程使用与 WP 相同的算法。我在这里需要做的是登录 WP，但使用的是在同一主机中的外部数据库。我检查了这个链接[http://www.tyssendesign.com.au/articles/cms/connecting-to-external-database-from-within-wordpress/](http://www.tyssendesign.com.au/articles/cms/connecting-to-external-database-from-within-wordpress/)和[http://wordpress.org/extend/plugins/external-database -authentication/](http://wordpress.org/extend/plugins/external-database-authentication/)第一个不是我想要的，但第二个与 WP 3+ 不兼容，我使用的是 3.3.1，有什么建议或文档或其他什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:46:38.490

您可以编写自定义 php 脚本以连接到具有您的用户表的外部数据库，并根据该表查询用户提交的表单字段以进行身份​​验证。

您可以将其用作编写 php 代码的参考： [How do I authenticate a user in PHP / MySQL?](https://stackoverflow.com/questions/685855/how-do-i-authenticate-a-user-in-php-mysql)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T05:35:11.947

使用[http://wordpress.org/extend/plugins/external-database-authentication/](http://wordpress.org/extend/plugins/external-database-authentication/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T17:16:18.937

安装 wordpress 时，请确保您有外部数据库的数据库登录信息。如果您已经安装了 wp-config.php 文件，您也可以对其进行编辑。然后您可能需要编辑 wp 数据库中的 baseurl。

# ios - 为什么不显示 pin 图像？

> ID：10724415
> 
> 赞同：0
> 
> 时间：2012-05-23T16:48:25.953
> 
> 标签：ios, xcode, image, plist

我从 plist 文件加载注释，还需要从 plist 文件中读取图钉的图像。

我已经尝试了以下代码，但它不起作用。

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"data" ofType:@"plist"];
    NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path];
    NSArray *anns = [dict objectForKey:@"Category1"];
    pinView.image = [UIImage imageNamed:[[dict objectForKey:anns] valueForKey:@"Icon"]]; 
```

我的 plist 构造：

![列表](../Images/6712a4aba6d834cd688fa6fa1b6af3ac.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:57:47.720

这看起来不对：

```
NSArray *anns = [dict objectForKey:@"Category1"];
pinView.image = [UIImage imageNamed:[[dict objectForKey:anns] valueForKey:@"Icon"]];
                                                        ^^^^ 
```

`anns`是一个数组，所以它不能是你的字典的键。我的猜测是你想要这个：

```
NSArray *anns = [dict objectForKey:@"Category1"];
pinView.image = [UIImage imageNamed:[[anns objectAtIndex:0] objectForKey:@"Icon"]]; 
```

# excel - 自动更新工作簿其他 Excel 工作表中的数据

> ID：10724420
> 
> 赞同：0
> 
> 时间：2012-05-23T16:48:34.283
> 
> 标签：excel, vba

我有 VBA 代码，它将我的数据放在“主”工作表上，并将其放在工作簿的其他工作表中。我遇到的问题是新数据不会自动更新。我想开发可以自动更新我的工作表的代码。这是我现在拥有的代码。

```
Sub test()
Dim LR As Long, i As Long
LR = Range("A" & Rows.Count).End(xlUp).Row
For i = 2 To LR
If Range("B" & i).Value = "AP" Then Rows(i).Copy Destination:=Sheets("AP").Range("A" & Rows.Count).End(xlUp).Offset(1)
If Range("B" & i).Value = "*AP" Then Rows(i).Copy Destination:=Sheets(" If Range("B" & i).Value = "CSW" Then Rows(i).Copy Destination:=Sheets("CSW").Range("A" & Rows.Count).End(xlUp).Offset(1)
If Range("B" & i).Value = "CO" Then Rows(i).Copy Destination:=Sheets("CO").Range("A" & Rows.Count).End(xlUp).Offset(1)
If Range("B" & i).Value = "PSR" Then Rows(i).Copy Destination:=Sheets("PSR").Range("A" & Rows.Count).End(xlUp).Offset(1)
Next i
End Sub 
```

这会将数据放在其他工作表中，但是当我将新数据输入“主”工作表时，其他工作表中的数据不会更新。我尝试过其他方法来包括自动过滤器，但它们没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:13:42.897

使用`worksheet_change`“主”电子表格中的事件。当“主”表中的数据更新时，它将引发`worksheet_change`事件，您可以调用您的代码来更新其他表。

您可以在此处找到有关如何使用它的详细说明：[http ://www.ozgrid.com/VBA/run-macros-change.htm](http://www.ozgrid.com/VBA/run-macros-change.htm)

我用您的代码设置了一个工作示例。该工作簿有 6 张（“master”、“AP”、“All AP”、“CSW”、“CO”和“PSR”）。每个工作表中的第 1 行被假定为标题行。使用以下代码设置工作簿后，您在“主”工作表上所做的任何更改都会引发 worksheet_change 事件，从而导致工作簿中的所有目标工作表都使用最新数据进行更新。

请按照以下步骤使其工作：

在主表的代码模块中添加以下内容：

_

```
Option Explicit

    Private Sub Worksheet_Change(ByVal Target As Range)
        Call UpdateFromMaster
    End Sub 
```

将这些子组件添加到标准模块中：

_

```
Sub UpdateFromMaster()
    ' clear whatever you had previously written to the destination sheets
    Call ResetDestinationSheets

    ' the code you already had
    Dim LR As Long, i As Long
    LR = Range("A" & Rows.Count).End(xlUp).Row
    For i = 2 To LR
    If Range("B" & i).Value = "AP" Then Rows(i).Copy Destination:=Sheets("AP").Range("A" & Rows.Count).End(xlUp).Offset(1)
    If Range("B" & i).Value = "*AP" Then Rows(i).Copy Destination:=Sheets("All AP").Range("A" & Rows.Count).End(xlUp).Offset(1)
    If Range("B" & i).Value = "CSW" Then Rows(i).Copy Destination:=Sheets("CSW").Range("A" & Rows.Count).End(xlUp).Offset(1)
    If Range("B" & i).Value = "CO" Then Rows(i).Copy Destination:=Sheets("CO").Range("A" & Rows.Count).End(xlUp).Offset(1)
    If Range("B" & i).Value = "PSR" Then Rows(i).Copy Destination:=Sheets("PSR").Range("A" & Rows.Count).End(xlUp).Offset(1)
    Next i

End Sub 
```

_

```
Sub ResetDestinationSheets()
    '== not elegant, but will work in your example

    Call ResetThisSheet("AP")
    Call ResetThisSheet("ALL AP") ' I didn't know what you called this sheet
    Call ResetThisSheet("CSW")
    Call ResetThisSheet("CO")
    Call ResetThisSheet("PSR")

End Sub 
```

_

```
Sub ResetThisSheet(ByRef SheetToClear As String)
    Sheets(SheetToClear).Range("A2:B" & Rows.Count).Clear
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:21:37.307

提供 worksheet_change() 事件的替代方法，该事件将在每次对工作表进行更改时触发代码，您可能想要也可能不想要。您还可以创建一个形状（或按钮）并将您的代码分配给该按钮，因此它仅在您（或用户）告诉它时运行。与工作表 change() 事件相比，它的优点是代码不会随着工作表的每一个微小变化而触发，正如我上面所说的，这可能是可取的，也可能不是可取的。

要将宏分配给按钮或形状，请将形状添加到工作表，然后右键单击并选择“分配宏”。另请参阅此处... [如何将 VBA 宏绑定到 Excel 中的按钮](https://stackoverflow.com/questions/10623704/how-can-i-tie-a-vba-macro-to-a-button-in-excel/10624599#10624599)

# xml - 为什么这不能正确删除 XML 节点？

> ID：10724421
> 
> 赞同：0
> 
> 时间：2012-05-23T16:48:38.917
> 
> 标签：xml, vb.net-2010, xmldocument

我的 XML 代码是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<Tabel>
  <Member>
    <Naam>Cruciatum</Naam>
    <Kills>1000</Kills>
    <Deaths>10</Deaths>
    <KD>100</KD>
  </Member>
  <Member>
    <Naam>Ghostbullet93</Naam>
    <Kills>10</Kills>
    <Deaths>1</Deaths>
    <KD>10</KD>
  </Member>
  <Member>
    <Naam>test</Naam>
    <Kills>123</Kills>
    <Deaths>11</Deaths>
    <KD>11</KD>
  </Member>
</Tabel> 
```

处理后，XML 最终应如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Tabel>
  <Member>
    <Naam>Cruciatum</Naam>
    <Kills>1000</Kills>
    <Deaths>10</Deaths>
    <KD>100</KD>
  </Member>
  <Member>
    <Naam>Ghostbullet93</Naam>
    <Kills>10</Kills>
    <Deaths>1</Deaths>
    <KD>10</KD>
  </Member>
</Tabel> 
```

经过一番搜索，我想出了这段代码。

显然它对其他人有用，但它根本不适合我。

```
Private Sub btnDel_Click(sender As System.Object, e As System.EventArgs) Handles btnDel.Click
        playername = lstmembers.SelectedItem.ToString
        If MsgBox("Ben je zeker dat je " & playername & " wil verwijderen?", MsgBoxStyle.YesNo, "Confirmatie") = MsgBoxResult.Yes Then
            Dim xmldoc As New XmlDocument()
            xmldoc.load("C:\members.xml")
            Dim node As XmlNode = xmldoc.SelectSingleNode("Root/Naam[. = '" & playername & "']")
            If node IsNot Nothing Then
                node.ParentNode.RemoveChild(node)
                xmldoc.Save("C:\members.xml")
            End If
            'reload list
            loadfile()
        End If
    End Sub 
```

我没有得到任何例外，所以代码必须适合某些东西，只是显然不适合我需要的东西......

我希望你能看到我在哪里犯了错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:57:44.510

查看您的 XPath 表达式：

```
"Root/Naam[. = '" & playername & "']" 
```

这需要一个名为`Root`. `Member`假设您确实给了我们一个代表文件，您的元素实际上被称为。您*可能*需要`Tabel/Member/Naam`- 我不记得在文档上使用 XPath 是否隐式从文档根元素开始。

我还没有检查您的其余代码，但至少值得先尝试一下。*顺便*说一句，您的代码实际上只会删除该`Naam`元素-我认为您可能想要：

```
node.ParentNode.ParentNode.RemoveChild(node.ParentNode) 
```

（当然，或者提取`node.ParentNode`到一个单独的局部变量。）

就我个人而言，如果可能的话，我会使用 LINQ to XML——它会让生活变得更简单——但那是另一回事。

# powershell-2.0 - 使用 Powershell 2.0 命令行执行 robocopy 无济于事。没有错误

> ID：10724422
> 
> 赞同：1
> 
> 时间：2012-05-23T16:48:54.697
> 
> 标签：powershell-2.0

我是 Powershell 和 Robocopy 的新手。我正在尝试从 Powershell 2.0 命令行运行 Robocopy 命令，没有发生任何错误消息。

但是当我使用 Windows cmd-line 执行相同的命令时，它工作正常。命令详情如下

```
 $src="\\Test1\"
   $dest="\\Test2\"
   robocopy $src $dest /V /E /R=0 /W=0 
```

我也试过这个

```
 robocopy \\Test1\ \\Test2\ /V /E /R=0 /W=0 
```

我的系统是Windows 7专业版。使用 Sapian powershell studio 执行时，同样的脚本也可以工作。

我在这里错过了什么吗？

对此的任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:24:51.227

尝试这个：

```
robocopy $src $dest "/V" "/E" "/R:0" "/W:0" 
```

# javascript - jQuery：将文本字符串添加/删除到 src 属性

> ID：10724425
> 
> 赞同：1
> 
> 时间：2012-05-23T16:49:04.690
> 
> 标签：javascript, jquery, mouseevent

我正在尝试将一串文本附加到`src`图像的属性上`mouseover`，然后删除该字符串`mouseout`。现在我有一半的工作：

**Javascript**

```
$('.singleSidebar .subnav img').mouseover(function(){
    $(this).attr('src', function(index, attr) {
    return attr.replace(/\.[^.]*$/, '_anim$&');
    });
}); 
```

我在其他地方找到了这段代码，所以我不确定如何修改它以`_anim`删除`mouseout`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:56:14.140

我建议只加载两张图片，然后只显示你想要的一张。这一切都可以通过 CSS 来完成。

给一个图像一类“动画”和另一类“非动画”。添加此 CSS 以处理悬停更改：

```
 .singleSidebar .subnav img.animated,
    .singleSidebar .subnav img.nonanimated:hover
    {
        display: none;
    }
    .singleSidebar .subnav img.animated:hover,
    .singleSidebar .subnav img.nonanimated
    {
        display: block
    } 
```

这会更好，因为浏览器会立即加载图像，而不是当您将鼠标悬停时，它也更清洁 IMO

编辑啊，如果您需要他们在悬停时开始播放，那么您需要按照自己的方式进行。尝试这样的事情：

```
$('.singleSidebar .subnav img').each(function(e){
    var src = $(this).attr('src');
    $(this).hover(function(){
      $(this).attr('src', src.replace('.gif', '_anim.gif'));
    }, function(){
      $(this).attr('src', src);
    });
  }); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T16:58:26.650

```
$(".singleSidebar .subnav img").hover(
  function () {
    $(this).attr('src', function(index, attr) {
      return attr.replace(/\.[^.]*$/, '_anim$&');
    });
  }, 
  function () {
    $(this).attr('src', function(index, attr) {     
        return attr.replace('_anim', ''); // or any other replace
    }); 
  }
); 
```

有关更多信息，请参阅[http://api.jquery.com/hover/](http://api.jquery.com/hover/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T16:59:51.287

[http://jsfiddle.net/dZ3c2/1/](http://jsfiddle.net/dZ3c2/1/)

```
var src;
$("img").hover(function() {
     src = $(this).attr("src");
    $(this).attr("src", "replacementsrc");
},function() {
     $(this).attr("src", src);
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T16:54:49.800

应该能够使用 .mouseout 并反转替换。

```
$('.singleSidebar .subnav img').mouseout(function(){     
    $(this).attr('src', function(index, attr) {     
        return attr.replace(/_anim$/, '');     
    }); 
}); 
```

# jsf - 如何在页面加载时处理支持 bean 中的 GET 查询字符串 URL 参数？

> ID：10724428
> 
> 赞同：37
> 
> 时间：2012-05-23T16:49:19.323
> 
> 标签：jsf, jsf-2, query-string, managed-bean, http-request-parameters

我已经阅读了如何使用 JSF 发送参数，但是如果用户`companyId`在访问他们的登录页面时输入他们的 URL 怎么办？例如，

> [http://my.company.url/productName/login.faces?companyId=acme](http://my.company.url/productName/login.faces?companyId=acme)。

我们现在这样做的方式是，有一些 scriptlet 代码从请求中获取值，然后在会话中设置它。该参数从登录页面开始改变他们的外观和感觉，因此每个客户都可以有不同的登录页面视图。在我切换到 JSF 之前，我们一直在使用 extjs。

有没有办法使用 JSF 2 或者 PrimeFaces 来做到这一点？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-05-23T17:00:41.890

是的，您可以使用 将[`<f:viewParam>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/viewParam.html)请求参数设置为托管 bean 属性。

```
<f:metadata>
    <f:viewParam name="companyId" value="#{bean.companyId}" />
</f:metadata> 
```

如有必要，您可以使用`<f:viewAction>`（仅限 JSF 2.2+）或`<f:event type="preRenderView">`.

```
<f:metadata>
    <f:viewParam name="companyId" value="#{bean.companyId}" />
    <f:viewAction action="#{bean.onload}" />
</f:metadata> 
```

使用时，`<f:viewAction>`您甚至可以返回导航结果。

```
public String onload() {
    // ...

    return "somepage";
} 
```

如果还没有在 JSF 2.2 上，您可以使用[`ExternalContext#redirect()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#redirect(java.lang.String))它。另请参阅[如何在 preRenderView 侦听器方法中执行导航](https://stackoverflow.com/questions/16106418/how-to-perform-navigation-in-prerenderview-listener-method)。

请注意，这并不特定于 PrimeFaces。它只是标准 JSF 的一部分。PrimeFaces 只是一个提供增强的 ajax 和换肤支持的组件库。

### 也可以看看：

*   [<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用来做什么？](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for)
*   [JSF 2.0 中的通信 - 处理 GET 请求参数](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ProcessingGETRequestParameters)
*   [@ManagedProperty 请求参数未在 @Named bean 中设置](https://stackoverflow.com/questions/28780051/managedproperty-with-request-parameter-not-set-in-a-named-bean)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-05-24T19:51:09.023

url 参数也可以被视为请求参数，因此您也可以通过

```
FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap() 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-03-02T10:27:27.220

有一个实用程序库[OmniFaces](http://showcase.omnifaces.org/cdi/Param)可以开箱即用。

```
@Inject @Param
private String key;

@Inject @Param
private Long id; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-19T01:50:52.743

`request.getQueryString()`如果要获取完整的查询参数字符串，可以使用 。

# mysql - 从带有外来字符的 excel 中导出 csv 以导入 MySQL

> ID：10724433
> 
> 赞同：4
> 
> 时间：2012-05-23T16:49:39.150
> 
> 标签：mysql, excel, csv

当我将其从 Excel 导出到 csv 文件中以导入 MySQL 时

> Bl Michał Sopoćko, 牧师

我明白了

> 比尔米查？Sopo?ko

有没有办法导出文件以获得正确的字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:51:16.410

首先，您应该检查在从 Excel 导出期间指定的编码选项（在保存对话框 -> 工具按钮 -> Web 选项 -> 编码选项卡中）。

接下来尝试将数据库表转换为这种编码：

```
ALTER TABLE <table_name> CONVERT TO CHARACTER SET <character_set> COLLATE <collate_name> 
```

# java - StringBuilder 使用 .append (Java) 得到错误

> ID：10724451
> 
> 赞同：0
> 
> 时间：2012-05-23T16:50:42.560
> 
> 标签：java, stringbuilder

我收到以下错误：

```
nameCombine.java:18: error: cannot find symbol
sb.append(s);"
  ^

symbol:   method append(String)
location: variable sb of type StringBuilder
nameCombine.java:19: error: cannot find symbol
        sb.append("\t");
          ^
symbol:   method append(String)
location: variable sb of type StringBuilder
StringBuilder.java:16: error: cannot find symbol
        sb.append(s);
          ^
symbol:   method append(String)
location: variable sb of type StringBuilder
StringBuilder.java:17: error: cannot find symbol
        sb.append("\t");
          ^
symbol:   method append(String)
location: variable sb of type StringBuilder 
```

尝试编译以下代码后：

```
import java.util.ArrayList;

public class nameCombine {
   public static void main(String[] args) {
      ArrayList<String> list = new ArrayList<String>();
      list.add("firstName");
      list.add("middleName");
      list.add("lastName");

      StringBuilder sb = new StringBuilder();

      for (String s : list) {
         sb.append(s);
         sb.append("\t");
      }

      System.out.println(sb.toString());
   }
} 
```

如果这是一个重复的问题，我很抱歉（我很确定它是），但快速搜索并没有产生任何有用的东西，无论如何对我来说。

我想做什么（如果你还不能说的话）：
将一个arrayList（firstName，middleName，lastName）组合成一个新字符串。任何关于我如何在 Java 中做到这一点的建议都值得赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:53:29.547

您问题中的代码绝对没有问题。

最可能的解释是您正在编译的代码与问题中的代码不同。一方面，代码中的行号和前两条错误消息中的行号不一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:17:23.940

它的工作非常好，如果您使用的是 eclipse，请尝试再次创建另一个这个项目，有时 eclipse 会乱来......

我按原样执行它......并得到以下输出

```
firstName   middleName  lastName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-26T12:17:13.287

使用`StringBuffer`而不是`StringBuilder`. 即使我遇到了同样的错误，但是当我使用`StringBuffer`.

# svn - SVN 意外删除中继并且未提交更改

> ID：10724457
> 
> 赞同：0
> 
> 时间：2012-05-23T16:50:58.497
> 
> 标签：svn, tortoisesvn, trunk, svn-trunk

你如何解决这种情况？所以基本上我在 PROD/WHOTest 文件中并输入了 svn del trunk

尚未提交更改。你怎么退？

svn del --keep local trunk
or svn revert trunk

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T16:58:19.463

`svn revert .`应该做的伎俩。使用 TortoiseSVN，选择包含主干的目录，然后还原。

`svn del --keep-local`用于删除 SVN 中的文件或文件夹，但将文件或文件夹保留在工作副本中。

# php - 解析字符串中的变量

> ID：10724459
> 
> 赞同：0
> 
> 时间：2012-05-23T16:51:09.567
> 
> 标签：php, string, variables, variable-variables

我在`*.properties`文件中存储了一些字符串。一个字符串的例子是：

> sendFrom=**从 {$oEmails->agentName}**向 {$oEmails->customerCount} 人发送电子邮件。

我的函数从中获取值`sendingFrom`，然后在页面上输出该字符串，但是它不会自动解析其中的`{$oEmails->agentName}`内容。有没有办法让我在不手动解析的情况下让 PHP 将变量从字符串转换为应有的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T16:57:38.773

如果你可以修改你的`*.properties`，这里是一个简单的解决方案：

```
# in file.properties
sendingFrom = Sending emails from %s, to %s people. 
```

然后使用[sprintf](http://php.net/function.sprintf.php)`%s`替换为正确的值：

```
// Get the sendingFrom value from file.properties to $sending_from, and:
$full_string = sprintf($sending_from, $oEmails->agentName, $oEmails->customerCount); 
```

它允许您将应用程序的逻辑（变量以及获取它们的方式）与演示文稿（实际的字符串方案，存储在 中`file.properties`）分开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T17:51:02.187

只是一种选择。

```
$oEmails = new Emails('Me',4);
$str = 'sendingFrom=Sending emails from {$oEmails->agentName}, to {$oEmails->customerCount} people.';

// --------------

$arr = preg_split('~(\{.+?\})~',$str,-1,PREG_SPLIT_DELIM_CAPTURE);
for ($i = 1; $i < count($arr); $i+=2) {
    $arr[$i] = eval('return '.substr($arr[$i],1,-1).';');
}
$str = implode('',$arr);
echo $str;
// sendingFrom=Sending emails from Me, to 4 people. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-11T08:39:04.703

正如其他人提到的那样， eval 不合适，如果您需要更大的灵活性，我建议 a`preg_replace`或 a 。`preg_replace_callback`

```
preg_replace_callback('/\$(.+)/', function($m) {
     // initialise the data variable from your object  
     return $data[$m[1]];
}, $subject); 
```

也检查这个链接，它建议使用`strstr` [How replace variable in string with value in php?](https://stackoverflow.com/questions/15065387/how-replace-variable-in-string-with-value-in-php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T16:55:40.640

您可以将 Eval 与所有常见的安全漏洞一起使用

就像是。

```
$string = getStringFromFile('sendingFrom');

$FilledIn = eval($string); 
```

# iphone - iphone用户输入结构

> ID：10724460
> 
> 赞同：0
> 
> 时间：2012-05-23T16:51:18.823
> 
> 标签：iphone, ios, xcode

我是 iPhone 开发的新手，我正在查看图片中显示的内容以允许用户编写输入。但我找不到它到底是什么！那些是某种特殊的 UITextFields 吗？它们是一种特殊的 UITableView 吗？它是什么？

![我在找什么](../Images/f9dec11049537265523e70c6156bfffe.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T16:55:43.817

这是一个带有自定义 UITableViewCell 的 UITableView，其中包含 UITextFields。您可以通过从自定义 XIB 文件中加载 UITableViewCell 轻松完成此操作，您已在其中删除了 UITextFields。至于您在每个字段中看到的“提示”，那就是 UITextField 的“占位符”属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T16:56:39.050

这些是带有自定义表格单元格的分组表格视图，其中包含文本字段和单行蚀刻分隔符。确保将样式设置为“分组”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T07:54:03.310

The above basically consist of UItableviewCell with a Uitextfield within it.

If you are on ios5 (which i assume you will be), you can add UItableviewcontroller from you Interface Builder and from there, taking the advice to set the style of the table to "grouped".

you should have the similar outlook of the above for the background.

In here, if you select a cell you should have the option to set a few different style to your uitableview cell.

If none of the default styles works for you, just select custom and add your own uitextfield or uibutton.

Note: There's a bit of difference between prototype cell.

# javascript - 当 overflow-x 设置为隐藏时，处理可变高度图像的最佳方法是什么

> ID：10724470
> 
> 赞同：0
> 
> 时间：2012-05-23T16:52:13.767
> 
> 标签：javascript, html, css

我有一个非常高分辨率的图像，可以在任何尺寸的显示器上显示。高度将始终完整显示，宽度将可通过 JavaScript 滚动。包含元素的溢出-x 设置为隐藏。我的问题是如何最好地处理可变高度并仍然保持正确的比例。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:00:05.683

如果您只设置其中一个尺寸（`height`或`width`, max 和 min 也适用），另一个将按比例缩放并保持纵横比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:56:03.467

您可以尝试使用 max-height 属性。该值可以是像素或百分比。

```
max-height: 100% 
```

或者

```
max-height: 200px; /* whatever height */ 
```

这将按比例约束图像。

# python - 如何卸载Python2.6

> ID：10724471
> 
> 赞同：7
> 
> 时间：2012-05-23T16:52:19.377
> 
> 标签：python, linux, fedora11

在我预装了 python2.6 的 Fedora11 机器上，我能够使用以下步骤成功安装 python 2.7：

```
wget http://www.python.org/ftp/python/2.7/Python-2.7.tar.bz2
tar -xvjf Python-2.7.tar.bz2
cd Python*
./configure --prefix=/opt/python27
make
make install
vi ~/.bash_profile
## replaced PATH=$PATH:$HOME/bin
## with PATH=$PATH:$HOME/bin:/opt/python27/bin

## reload .bash_profile
source ~/.bash_profile
echo "/opt/python27/lib" > /etc/ld.so.conf.d/python27.conf
ldconfig 
```

但是，当我通过终端（python -V）检查系统使用的python版本时，它仍然显示python 2.6。

如何让系统使用 python2.7 作为默认 python？或者如果可能的话，我将如何卸载python2.6？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-23T17:02:05.333

卸载系统 Python 是个坏主意。还有许多其他软件包和软件依赖于它。最好通过修改 $PATH 或创建一个别名来使用 python2.7，例如 python2.7 指向您安装在 /opt 目录中的 python。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T16:56:36.173

卸载 fedora 提供的 python 2.6 可能会破坏许多依赖它的软件包。我建议你不要这样做。

现在，您的问题只是从左到右搜索`$PATH`类似的变量（等）。`$MAN_PATH`您`/opt/python27/bin` *在*标准位置（如`/usr/bin`. 颠倒顺序，您将获得 /opt/python27/bin/python 作为默认的 python 二进制文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T16:56:20.093

首先 - 永远不要尝试在 RHEL/CentOS/Fedora 上卸载 Python。`yum`是用Python写的，修复系统会有很多问题。

如果希望系统默认使用Python2.7，找到Python2.6（use `whereis python`or `which python`commands）二进制文件所在位置，备份，替换成Python2.7的二进制文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-26T07:02:54.017

与其卸载旧版本，不如在使用时使用特定版本的python

我改变了符号链接

```
ln -s /usr/local/bin/python2.7 /usr/local/bin/python 
```

并使用

```
python -m pip install pip --upgrade 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2015-01-06T06:21:05.287

或者您可以简单地使用 linux 的 Yum 功能并运行命令`yum remove python`，它将从系统中删除 python 和相关的依赖项

# c# - 如何从代码向 Umbraco 中的文档类型添加属性？

> ID：10724473
> 
> 赞同：6
> 
> 时间：2012-05-23T16:52:19.953
> 
> 标签：c#, asp.net, .net, umbraco

谁能给我一个示例，说明如何以编程方式将属性添加到 Umbraco CMS 中的现有文档类型？这是我尝试过的：

```
var dt = DocumentType.GetByAlias("TestDocType");
dt.AddPropertyType(new DataTypeDefinition(-49),"testprop", "test prop"); 
```

但它抛出了一个异常：

```
Method not found: 'Void umbraco.cms.businesslogic.ContentType.AddPropertyType(umbraco.cms.businesslogic.datatype.DataTypeDefinition, System.String, System.String)'. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T10:27:25.293

我设法修复它。该网站最近从 Umbraco 4.5 升级到 Umbraco 4.7.1，因此必须将 dll 替换为较新的。在旧版本的 Umbraco 中，方法的返回类型是`public void AddPropertyType`新的`public PropertyType AddPropertyType`. 显然在升级过程中新的 cms.dll 没有被复制过来，所以我从一个干净的 Umbraco 4.7.1 解决方案中复制了它，更改了代码以接收返回类型并且它有所帮助。

必需的命名空间：

```
using umbraco.cms.businesslogic.datatype;
using umbraco.cms.businesslogic.web; 
```

所以最终代码（假设引用了正确的程序集）：

```
var dt = DocumentType.GetByAlias("TestDocType");
var pType = dt.AddPropertyType(new DataTypeDefinition(-49),"testprop", "test prop"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:49:33.693

该代码对我来说看起来不错，它应该可以工作。

确保您的第一行实际上是返回一个文档类型，而不是 null。

此外，您是否有适当的“使用”，您至少需要其中一些？

```
using umbraco.cms.businesslogic.web;
using umbraco.NodeFactory;
using umbraco.cms.businesslogic.member;
using umbraco.cms.businesslogic.datatype; 
```

# .net - 添加为 BitmapImage 的图像模糊

> ID：10724478
> 
> 赞同：0
> 
> 时间：2012-05-23T16:52:52.093
> 
> 标签：.net, wpf, image, xaml, .net-4.0

我正在开发 WPF 应用程序（.NET Framework 4）。我正在将 .png 图像添加到 ResourceDictionary。它看起来像这样：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
<BitmapImage x:Key="IconReset" UriSource="../Icons/IconReset.png" />
<BitmapImage x:Key="IconCopy" UriSource="../Icons/IconCopy.png" />
...
</ResourceDictionary> 
```

然后我正在使用这些图像：

```
<Image Width="22" Height="22" Source="{DynamicResource IconReset}" SnapsToDevicePixels="True" /> 
```

它工作正常，但应用程序中的图像有点模糊和不清楚。Png 图像的大小为 22x22，看起来很清晰。

那么为什么在我的应用程序中这些图标是模糊的？我试过设置属性`SnapsToDevicePixels`，但它没有改变任何东西。

我该怎么做才能让它看起来像原始的 png 图像 - 如何摆脱这种模糊？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:01:04.367

尝试设置属性：

```
UseLayoutRounding="True" 
```

最好将其设置在主窗口/根元素上，这样会影响整个应用程序。

# c# - 以编程方式获取 nunit 库中的测试列表，而无需运行测试

> ID：10724479
> 
> 赞同：8
> 
> 时间：2012-05-23T16:52:53.107
> 
> 标签：c#, nunit

我有一个包含测试用例的 nunit 类库。我想以编程方式获取库中所有测试的列表，主要是测试名称及其测试 ID。这是我到目前为止所拥有的：

```
var runner = new NUnit.Core.RemoteTestRunner();
runner.Load(new NUnit.Core.TestPackage(Request.PhysicalApplicationPath + "bin\\SystemTest.dll"));
var tests = new List<NUnit.Core.TestResult>();
foreach (NUnit.Core.TestResult result in runner.TestResult.Results)
{
    tests.Add(result);
} 
```

问题是 runner.TestResult 在您实际运行测试之前为空。我显然不想在这一点上运行测试，我只想获取库中哪些测试的列表。之后，我将让用户能够选择一个测试并单独运行它，将测试 ID 传递给 RemoteTestRunner 实例。

那么如何在不实际运行所有测试的情况下获得测试列表呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T17:05:20.860

您可以使用反射来加载程序集并查找所有[测试](http://nunit.org/index.php?p=test&r=2.5.10)属性。这将为您提供所有作为测试方法的方法。剩下的就看你了。

这是 msdn 上有关使用反射获取类型属性的示例。 [http://msdn.microsoft.com/en-us/library/z919e8tw.aspx](http://msdn.microsoft.com/en-us/library/z919e8tw.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T18:04:08.470

下面是从测试类库程序集中检索所有测试名称的代码：

```
//load assembly.
            var assembly = Assembly.LoadFile(Request.PhysicalApplicationPath + "bin\\SystemTest.dll");
            //get testfixture classes in assembly.
            var testTypes = from t in assembly.GetTypes()
                let attributes = t.GetCustomAttributes(typeof(NUnit.Framework.TestFixtureAttribute), true)
                where attributes != null && attributes.Length > 0
                orderby t.Name
                    select t;
            foreach (var type in testTypes)
            {
                //get test method in class.
                var testMethods = from m in type.GetMethods()
                                  let attributes = m.GetCustomAttributes(typeof(NUnit.Framework.TestAttribute), true)
                    where attributes != null && attributes.Length > 0
                    orderby m.Name
                    select m;
                foreach (var method in testMethods)
                {
                    tests.Add(method.Name);
                }
            } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-02T08:09:04.890

贾斯汀的回答对我不起作用。以下内容（检索具有`Test`属性的所有方法名称）：

```
Assembly assembly = Assembly.LoadFrom("pathToDLL");
foreach (Type type in assembly.GetTypes())
{
    foreach (MethodInfo methodInfo in type.GetMethods())
    {
        var attributes = methodInfo.GetCustomAttributes(true);
        foreach (var attr in attributes)
        {
            if (attr.ToString() == "NUnit.Framework.TestAttribute")
            {
               var methodName = methodInfo.Name;
                // Do stuff.
            }
        }
    }
} 
```

# c++ - 推迟共享库的链接

> ID：10724485
> 
> 赞同：1
> 
> 时间：2012-05-23T16:53:23.627
> 
> 标签：c++, linux, linker, shared-libraries

如果我在 linux 中使用共享库，如果应用程序必须在运行时找到该库，为什么我需要将它与 -l 链接？

难道我不能在链接步骤中使用正确的函数签名传入一个虚拟 .so 并在运行时用真实的 .so 替换它并且仍然可以正常工作吗？

有没有办法只用头文件编译应用程序并在运行时进行链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:31:33.890

> 如果我在 linux 中使用共享库，如果应用程序必须在运行时找到该库，为什么我需要将它与 -l 链接？

这样加载器就知道必须在运行时加载*哪些库。*

> 难道我不能在链接步骤中使用正确的函数签名传入一个虚拟 .so 并在运行时用真实的 .so 替换它并且仍然可以正常工作吗？

绝对地。

> 有没有办法只用头文件编译应用程序并在运行时进行链接？

是的，但是*您*有责任调用`dlopen(3)`并`dlsym(3)`自己加载库和函数。

# svg - 我可以用透明的矩形元素包裹 SVG 中的路径吗？我想将整个 SVG 图像制作成可点击的链接

> ID：10724486
> 
> 赞同：2
> 
> 时间：2012-05-23T16:53:27.537
> 
> 标签：svg

我基本上有一个 SVG 标志，有很多透明空间，我想把整个东西链接到另一个页面。如果它是一个 alpha PNG，我只需将整个东西包装在一个 <a> 中并完成它，但是当我包装所有 <paths> 时，没有一个透明区域是链接的。

```
<svg width="100px" height="52px" enable-background="new 0 0 750.72 391.873">
<a xlink:href="http://www.mysite.com" id="anchor">
  <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="..."/>
  <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="..."/>
</a>
</svg> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:58:28.490

创建一个填充视口的不可见矩形 (visibility="hidden")，然后在其上设置 pointer-events="all" 以捕获所有鼠标点击。

或者，如果您从 SVG 中取出链接并使其成为独立文件，您可以通过`<img>`标签将其包含到它应该去的任何地方，然后用标签包装`<img>`标签`<a>`。

# xcode - 在 Interface Builder 中更新 UIView 类

> ID：10724488
> 
> 赞同：6
> 
> 时间：2012-05-23T16:53:29.720
> 
> 标签：xcode, interface-builder

我正在 XCode 界面构建器中构建 UI。在布置了所需的视图层次结构之后，我意识到靠近层次结构顶部的视图之一应该是 a`UIScrollView`而不是 a `UIView`。

有什么方法可以轻松地将该视图的类型从 UIView 更改为 UIScrollView 而无需使用自己的子视图层次结构重新布局所有子组件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-04-12T12:34:37.067

据我所知，最简单的方法是右键单击相应的 .xib 文件并选择`Opern As --> Source Code`. 然后，您可以找到要更改的视图。它看起来像这样。

```
<view contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="0gr-sH-vvn">
.
.
.
</view> 
```

将其更改为

```
<scrollView clipsSubviews="YES" multipleTouchEnabled="YES" contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="0gr-sH-vvn">
.
.
.
</scrollView> 
```

基本上，您需要更改`view`to`scrollView`并且其他属性将在您通过界面构建​​器心情下的属性检查器部分更改它们时自动生成*（右键单击.xib 文件并选择`Opern As --> Interface Builder XIB Document`）*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-23T17:04:24.667

是的，单击`UIView`您要更改的。选择后，打开 Identity Inspector 窗格。

在 Identity Inspector 中，您应该会在顶部看到一个名为“Class”的字段，并且当前值（灰色）应该显示为“UIView”。

输入“UIScrollView”并按 Enter。

这会将您的 Nib 文件和我以前的文件更新`UIView`为`UIScrollView`. 此外，如果您已经将视图连接到`IBOutlet`，请确保更新`IBOutlet`类定义，如果它不是`id`.

# javascript - 将元素拖到元素上时，强制元素 :hover 使用 JavaScript。没有 jQuery

> ID：10724489
> 
> 赞同：3
> 
> 时间：2012-05-23T16:53:32.727
> 
> 标签：javascript, css, drag-and-drop

我在这里找到了一些搜索结果，但它们都是针对 jQuery 的，而我查看的这对搜索结果并不适用于我的案例。

这是一个小项目，到目前为止我一直避免使用 jQuery。我想保持这种状态，因为不需要图书馆。

基本上，我将一个`<article>`元素拖到一个元素上`<div>`。div 有`background-image`一个封闭的垃圾桶。在 CSS 中，它被设置为在`:hover`触发时显示相同但打开的垃圾箱。

现在，当我将文章元素拉到 div 时，`:hover`不会触发效果。我该怎么做呢？

设置了所有必需的元素`draggable`并添加了所需的事件侦听器，Console.log 确认它们工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:03:05.650

您可以定义一个名为“open_trash”的 CSS 类，并在那里设置打开垃圾的背景图像，然后您可以使用 javascript 在 mousedown 上更改拖动元素的类，如下所示

```
document.getElementById("draggedItem").className = "open_trash"; 
```

您可以将类名设置为空字符串或其他 onmousedown。

# c# - .NET 4.0 自动化/脚本化某些动作

> ID：10724492
> 
> 赞同：1
> 
> 时间：2012-05-23T16:53:57.250
> 
> 标签：c#, .net, automation

我是一名大三学生，对 .NET 框架很陌生。

目前在我的 IT 工作中，有一个员工检查一个 MS office 文件，一个接一个地打开 x 个应用程序，然后一个接一个地复制 y 个文件并等待 z 个条件的特定过程。

这个过程相当漫长和乏味，而且很容易出现人为错误。因此，我想知道 .NET 是否允许某些应用程序为这个给定的示例过程编写脚本：

打开一个程序，从 excel 文件中输入一个字符串参数，获取程序的输出，将程序的输出粘贴到另一个程序中，获取第二个程序的输出，将输出打开为文件夹等

用户应该做尽可能少的工作（提供一些文件路径和登录凭据一次，然后按一些开始按钮）。

如果是这样，如果有人可以推荐一些好的库/API 来查看，将不胜感激。

感谢您的时间。

编辑 1： System.Diagnostic.Process 似乎不能很好地处理参数传递

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:31:12.110

尝试使用 Powershell，它更适合您正在尝试做的事情。开始的好地方：

[http://technet.microsoft.com/en-us/library/ee221102](http://technet.microsoft.com/en-us/library/ee221102)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T17:33:59.123

我认为您可以使用[AutoIt](http://www.autoitscript.com/site/autoit/)更轻松地做到这一点。

正如其他人已经指出的那样，.NET/c# 并不真正适合该任务。

# python - 获取传递给函数的所有参数和值

> ID：10724495
> 
> 赞同：92
> 
> 时间：2012-05-23T16:54:11.083
> 
> 标签：python

我有一个 Python 函数，`fetch_data`它会访问远程 API，获取一些数据，然后将其返回到一个响应对象中。它看起来有点像下面：

```
def fetch_data(self, foo, bar, baz, **kwargs):
    response = Response()
    # Do various things, get some data
    return response 
```

现在，响应数据可能会显示“我有更多数据，请使用递增`page`参数调用我以获得更多数据”。因此，我本质上想将“方法调用”（函数，参数）存储在响应对象中，这样我就可以`Response.get_more()`查看存储的函数和参数，并以（几乎）相同的方式再次调用该函数参数，返回一个新的`Response`

现在如果`fetch_data`被定义为`fetch_data(*args, **kwargs)`我可以只存储`(fetch_data, args, kwargs)`在`response`. 但是我有`self`, `foo`,`bar`和`baz`担心 - 我可以存储`(fetch_data, foo, bar, baz, kwargs)`但这是非常不希望的重复量。

本质上，我正在尝试研究如何从函数中获取完全填充的`*args`and `**kwargs`，包括函数的命名参数。

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2014-06-01T18:18:16.380

> 本质上，我正在尝试研究如何从函数中获取完全填充的 *args 和 **kwargs，包括函数的命名参数。

`locals()`在函数的开头通过保存参数怎么样？

```
def my_func(a, *args, **kwargs):
    saved_args = locals()
    print("saved_args is", saved_args)
    local_var = 10
    print("saved_args is", saved_args)
    print("But locals() is now", locals())

my_func(20, 30, 40, 50, kwarg1='spam', kwarg2='eggs') 
```

它给出了这个输出：

```
saved_args is {'a': 20, 'args': (30, 40, 50), 'kwargs': {'kwarg1': u'spam', 'kwarg2': u'eggs'}}
saved_args is {'a': 20, 'args': (30, 40, 50), 'kwargs': {'kwarg1': u'spam', 'kwarg2': u'eggs'}}
But locals is now {'a': 20, 'saved_args': {...}, 'args': (30, 40, 50), 'local_var': 10, 'kwargs': {'kwarg1': u'spam', 'kwarg2': u'eggs'}} 
```

帽子提示：[https ://stackoverflow.com/a/3137022/2829764](https://stackoverflow.com/a/3137022/2829764)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-05-23T17:01:19.327

不是我会做的事情，但您可以[`inspect.signature`](http://docs.python.org/library/inspect.html#inspect.signature)用来反省您的方法所采用的参数：

```
>>> import inspect
>>> def foobar(foo, bar, baz):
...     return inspect.signature(foobar)
... 
>>> foobar(1, 2, 3)
<Signature (foo, bar, baz)> 
```

返回的[`Signature`实例](https://docs.python.org/3/library/inspect.html#inspect.Signature)具有参数的有序集合（[`.parameters`属性](https://docs.python.org/3/library/inspect.html#inspect.Signature.parameters)），然后可以将其与`locals()`生成参数值列表一起使用：

```
>>> def foobar(foo, bar, baz):
...     sig, foobar_locals = inspect.signature(foobar), locals()
...     return [foobar_locals[param.name] for param in sig.parameters.values()]
...
>>> foobar(1, 2, 3)
[1, 2, 3] 
```

然而，在做高级函数装饰器之类的时候，你真的只需要这样的魔法。我觉得这里有点矫枉过正。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2018-06-08T14:57:54.667

我不确定这是否正是您想要的，但`locals()`提供了一个局部变量字典。

```
>>> def foo(bar, toto):
...     print(locals())
...
>>> foo(3,'sometext')
{'toto': 'sometext', 'bar': 3} 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-05-23T16:59:35.567

我认为更 Pythonic 的方法是将你的函数变成一个生成器，`yield`只要服务器不断返回数据，就可以获取和读取数据。

这应该会产生整洁的代码，并使您能够避开在迭代中保留参数的所有复杂性（Python 会神奇地为您做到这一点:-)）

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-09-15T18:12:45.633

[`inspect.getargspec`](https://docs.python.org/3.5/library/inspect.html#inspect.getargspec)自 3.0 版起已弃用。使用[`signature()`](https://docs.python.org/3.5/library/inspect.html#inspect.signature)和签名对象，它为可调用对象提供了更好的内省 API。

```
>>> from inspect import signature
>>> def foo(a, *, b:int, **kwargs):
...     pass

>>> sig = signature(foo)

>>> str(sig)
'(a, *, b:int, **kwargs)'

>>> str(sig.parameters['b'])
'b:int'

>>> sig.parameters['b'].annotation
<class 'int'> 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2019-10-23T16:08:54.123

我相信选择的方法是`getcallargs`from`inspect`因为它返回将调用函数的真实参数。您将一个函数以及 args 和 kwargs 传递给它（`inspect.getcallargs(func, *args, **kwds)`），它将返回用于调用的真实方法的参数，同时考虑到默认值和其他内容。看看下面的例子。

```
from inspect import getcallargs

# we have a function with such signature
def show_params(first, second, third=3):
    pass

# if you wanted to invoke it with such params (you could get them from a decorator as example)
args = [1, 2, 5]
kwargs = {}
print(getcallargs(show_params, *args, **kwargs))
#{'first': 1, 'second': 2, 'third': 5}

# here we didn't specify value for d
args = [1, 2, 3, 4]
kwargs = {}

# ----------------------------------------------------------
# but d has default value =7
def show_params1(first, *second, d = 7):
    pass

print(getcallargs(show_params1, *args, **kwargs))
# it will consider b to be equal to default value 7 as it is in real method invocation
# {'first': 1, 'second': (2, 3, 4), 'd': 7}

# ----------------------------------------------------------
args = [1]
kwargs = {"d": 4}

def show_params2(first, d=3):
    pass

print(getcallargs(show_params2, *args, **kwargs))
#{'first': 1, 'd': 4} 
```

[https://docs.python.org/3/library/inspect.html](https://docs.python.org/3/library/inspect.html)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-04-06T15:01:14.910

```
import inspect

def f(x, y):
    print(
        inspect.getargvalues(inspect.currentframe())
    )

f(1, 2) 
```

结果：
`ArgInfo(args=['x', 'y'], varargs=None, keywords=None, locals={'y': 2, 'x': 1})`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-23T17:00:27.443

kwargs 不会有 'foo'、'bar' 或 'bad' 作为键，因此您可以将这些条目（w/它们的值）添加到 kwargs 并存储（fetch_data，kwargs）。

# java - RSA加密（java）读取字符串输入

> ID：10724500
> 
> 赞同：0
> 
> 时间：2012-05-23T16:54:31.677
> 
> 标签：java, encryption, rsa

我进行 RSA 加密并遇到问题。我想加密一个字符串。要转换字符串，我已经有 rsHex 数组来转换它。我运行源代码但它给我错误说“系统找不到指定的文件”这是我的源代码。我该如何解决他的问题？谢谢你帮助我:)

```
import de.flexiprovider.api.keys.PrivateKey;
import de.flexiprovider.api.keys.PublicKey;
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.FileReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.math.BigInteger;
import java.security.InvalidKeyException;
import java.security.Key;
import java.security.KeyFactory;
import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.NoSuchAlgorithmException;
import java.security.spec.InvalidKeySpecException;
import java.security.spec.RSAPrivateKeySpec;
import java.security.spec.RSAPublicKeySpec;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.NoSuchPaddingException;

public class RSA {

private String str, s;
private String chipertext;
private byte[] cipherData;

public RSA(String string) throws Exception {

    try {

        String input = string;
        FileReader read = new FileReader(input);
        BufferedReader reader = new BufferedReader(read);
        while ((s = reader.readLine()) != null) {
        byte[] theByteArray = s.getBytes();
           setUserinput(string);
            rsHex(theByteArray);
}

    } catch (Exception ex) {
        Logger.getLogger(RSA.class.getName()).log(Level.SEVERE, null, ex);
    }

     //Creating an RSA key pair in Java
            KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA"); //instance of KeyPairGenerator
            kpg.initialize(1024);//bit length of the modulus that  required
            KeyPair kp = kpg.genKeyPair();//returns a KeyPair object
            Key publicKey = kp.getPublic(); //pull out the public and private keys
            Key privateKey = kp.getPrivate();

            //Saving the public and private key
            //private key will be placed on our server, and the public key distributed to clients.
            KeyFactory fact = KeyFactory.getInstance("RSA");
            RSAPublicKeySpec pub = (RSAPublicKeySpec) fact.getKeySpec(publicKey, RSAPublicKeySpec.class);
            RSAPrivateKeySpec priv = (RSAPrivateKeySpec) fact.getKeySpec(privateKey, RSAPrivateKeySpec.class);

            // Save the file to local drive
            saveToFile("c:\\public.key", pub.getModulus(), pub.getPublicExponent());
            saveToFile("c:\\private.key", priv.getModulus(),priv.getPrivateExponent());

     }
private void rsHex(byte[] bytes) throws Exception {
    StringBuilder hex = new StringBuilder();
    for (byte b : bytes) {
        String hexString = Integer.toHexString(0x00FF & b);
        hex.append(hexString.length() == 1 ? "0" + hexString : hexString);
    }
 setChipertext(hex.toString());
 }

//save the moduli and exponents to file, we can just use boring old serialisation
public void saveToFile(String fileName, BigInteger mod, BigInteger exp) throws  IOException {
    FileOutputStream f = new FileOutputStream(fileName);
    ObjectOutputStream oos = new ObjectOutputStream(f);
    oos.writeObject(mod);
    oos.writeObject(exp);
    oos.close();
 }

////Encryption
//initialise the cipher with the public key that we previously saved to file.
   PublicKey readKeyFromFile(String keyFileName) throws IOException {
  PublicKey key = null;

  try {
    FileInputStream fin = new FileInputStream(keyFileName);
    ObjectInputStream ois = new ObjectInputStream(fin);
    BigInteger m = (BigInteger) ois.readObject();
    BigInteger e = (BigInteger) ois.readObject();
    RSAPrivateKeySpec keySpec = new RSAPrivateKeySpec(m, e);
    KeyFactory fact = KeyFactory.getInstance("RSA");
        java.security.PublicKey pubKey = fact.generatePublic(keySpec);
    ois.close();
  }
  catch (Exception e) {
   e.printStackTrace();
  }
 return key;
   } 

public void rsaEncrypt(String str)throws Exception {

PublicKey pubKey = readKeyFromFile(str);
  Cipher cipher = Cipher.getInstance("RSA");
    cipher.init(Cipher.ENCRYPT_MODE, pubKey);//initialise the cipher
    cipherData = cipher.doFinal(str.getBytes());//passing in the data to be encrypted

    rsHex(cipherData);

  }

 public String getUserinput() {
    return str;
  }

  public String getChipertext() {
     return chipertext;
  }

  public void setUserinput(String input) {
    this.str = input;
  }

  public void setChipertext(String chipertext) throws Exception {
    this.chipertext = chipertext;

   }

  }

     ----main Program------
  import java.util.Scanner;

 public class TWO{
  public static void main(String[] args) throws Exception{

    Scanner scan = new Scanner(System.in);

    System.out.println("Insert your string");
    String str = scan.nextLine();

            RSA two = new RSA(str);

    System.out.println("Encrypted: "+ two.getChipertext());

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:23:24.880

问题是您从用户那里获取输入字符串，但是您的代码通过使用该字符串构造 FileReader 来将其视为*文件名。*

除了 FileReader 和 BufferedReader 的所有废话，还有什么理由不使用 string.getBytes()？

您似乎也让自己的生活变得非常复杂：您正在获取一个字符串，转换为字节数组，然后再次将其转换为字符串（使用十六进制表示），然后再次将其转换为字节数组。当您真的可以只获取原始字符串的字节表示（由 getBytes() 提供给您）并将其直接传递给 RSA 加密时，这真是一团糟。

# uiviewcontroller - 创建一个可以模态显示或推送到导航堆栈的 UIView

> ID：10724503
> 
> 赞同：0
> 
> 时间：2012-05-23T16:54:39.927
> 
> 标签：uiviewcontroller, uinavigationcontroller, presentmodalviewcontroller

我有一个项目详细信息视图，我想将其用于两个目的：

1) 创建新项目 2) 编辑现有项目

编辑时，视图将被推送到导航堆栈，从其父级获取导航栏。

在创建项目时，我想以模态方式呈现视图，但顶部仍然有一个导航栏，带有“完成”和“取消”按钮。

我不想看到有两个导航栏的视图，或者没有。

我将如何实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T01:18:43.053

为了实现这一点，我：

从我的视图中删除了导航栏。以模态方式启动时，首先创建一个导航控制器，然后以我的视图作为根视图以模态方式显示导航控制器（即使我不打算将其他任何东西推入堆栈）。所以改变了这个：

```
StoreDetailView *storeDetailView = [[StoreDetailView alloc] initWithNibName:@"StoreDetailView" bundle:nil];
// ... configure the view, including setting delegate...
[self presentViewController:storeDetailView animated:YES completion: nil]; 
```

对此：

```
StoreDetailView *storeDetailView = [[StoreDetailView alloc] initWithNibName:@"StoreDetailView" bundle:nil];
// ... configure the view, including setting delegate...
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:storeDetailView];
[self presentViewController:navController animated:YES completion: nil]; 
```

然后在 StoreDetailView 中，根据是否设置了委托来确定导航栏的外观：

```
if (self.delegate == nil) {
    self.navigationItem.rightBarButtonItem = [self editButtonItem];
} else {
    [self setEditing:TRUE];
    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(done:)];
    self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(cancel:)];
} 
```

# c# - “x.Groups = list”有效，但“x.Groups.Add(listItem)”抛出空引用异常？

> ID：10724505
> 
> 赞同：1
> 
> 时间：2012-05-23T16:54:58.977
> 
> 标签：c#, asp.net, oop

我有一个名为 的类`Permissions`，它有一些子类（和一些属性），`Group`并且`Group.Permission`.

现在，我***可以***执行以下操作

```
Permissions u = new Permissions();
u.userId = (Guid)user.ProviderUserKey;
List<int> groups = getGroupsForUserId(u.userId.ToString());

List<Permissions.Group> groupItems = new List<Permissions.Group>();

foreach (int g in groups)
{
    Permissions.Group groupItem = new Permissions.Group();
    groupItem.group_id = g;
    groupItem.Records = getRecordsForGroupId(g);
    groupItem.Permissions = getPermissionsForGroupId(g);

    groupItems.Add(groupItem);
}
u.Groups = groupItems; 
```

但是，我***不能***这样做：

```
Permissions u = new Permissions();
u.userId = (Guid)user.ProviderUserKey;
List<int> groups = getGroupsForUserId(u.userId.ToString());

foreach (int g in groups)
{
    Permissions.Group groupItem = new Permissions.Group();
    groupItem.group_id = g;
    groupItem.Records = getRecordsForGroupId(g);
    groupItem.Permissions = getPermissionsForGroupId(g);

    u.Groups.Add(groupItem);
} 
```

我的问题，***为什么？***

我创建了一个新`Permissions.Group`对象，添加了值，然后将其添加到`u`对象的`Groups`. 在我看来，这应该可行，但是我认为我没有在课堂上连接一些东西？我的课程只是一个属性列表，`property_name { get; set; }`所以真的没有什么异国情调。

尝试后者，我得到一个`NullReferenceException`就行了`u.Groups.Add(groupItem);`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T16:56:46.333

您可能需要`Permissions.Groups`在`Permissions`构造函数中进行初始化：

```
public class Permissions
{
    public Permissions()
    {
         Groups = new List<Group>();
    }

    public ICollection<Group> Groups { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T16:57:00.923

在第二个示例中，我的钱在于您没有在 Permissions 对象中初始化 Groups 集合。因此，实质上，您是在尝试将组项添加到空组集合中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T17:01:00.767

因为你还没有实例化`User.Groups`，它仍然是空的。在实例化的构造函数中`User`或之后，`User`您还必须实例化`Groups`属性/字段。

```
public class Permissions
{
    public List<Premissions.Group> Groups { get; set; }
    ...
    public Permissions()
    {
        Groups = new List<Permissions.Group>();
    }
} 
```

或者

```
Permissions user = new Permissions();
user.Groups = new List<Permissions.Group>(); 
```

或者

```
public class Permissions
{
    private List<Permissions.Group> _groups = new List<Permissions.Group>();
    public List<Permissions.Group> Groups { get { return _groups; } set { _groups = value; } }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T17:01:25.120

您需要在 Permissions 构造函数中初始化 Groups。

或者，如果您不想修改构造函数，则可以使用[object initializer](http://msdn.microsoft.com/en-us/library/bb384062.aspx)。

例子：

更改权限 u = new Permissions();

到

```
Permissions u = new Permissions(){Groups = new List<Permissions.Group>()}; 
```

在对象初始化器中，Groups 被初始化为一个空的 List。

# java - 过度使用 If else 语句

> ID：10724506
> 
> 赞同：0
> 
> 时间：2012-05-23T16:55:01.427
> 
> 标签：java

我有一个查询是我使用了一种方法，但是我使用过很多次 If Else ..not 它变得非常模棱两可，请告知我是否也可以使用其他一些条件循环..下面是我的代码..

```
 if (cardType == AARP_CARD_TYPE) {
      userResponse = messageBox.showMessage("CandidateAARPCardAttachCardToExistingTransaction",
          null, IMessageBox.YESNO); // MSG:31.59
      transaction.setValue(ITransactionHashtableWag.LOYALTY_MESSAGE_DISPLAYED,
          WalgreensRewardsConstants.ATTACH_CANDIDATE_AARP_CARD);
    } else if ((cardType == PSC_CARD_TYPE) && ((!PosHelper.isRunningAsService()))) {
      userResponse = messageBox.showMessage("PendingPSCCardAttachCardToExistingTransaction", null,
          IMessageBox.YESNO); // MSG:31.60
      transaction.setValue(ITransactionHashtableWag.LOYALTY_MESSAGE_DISPLAYED,
          WalgreensRewardsConstants.ATTACH_PENDING_PSC_CARD);

    } else if ((cardType == DR_CARD_TYPE) && ((!PosHelper.isRunningAsService()))) {
      userResponse = messageBox.showMessage("PendingDRCardAttachCardToExistingTransaction", null,
          IMessageBox.YESNO); // MSG:31.63
      transaction.setValue(ITransactionHashtableWag.LOYALTY_MESSAGE_DISPLAYED,
          WalgreensRewardsConstants.ATTACH_PENDING_DR_CARD);

    } else if ((cardType == WAG_LOYALTY_CARD_TYPE)){
                transaction.setValue(ITransactionHashtableWag.LOYALTY_MESSAGE_DISPLAYED,
                  WalgreensRewardsConstants.ATTACH_NOT_ON_FILE);

            if((!PosHelper.isRunningAsService())) {
      userResponse = messageBox.showMessage("CardNotOnFileToAttach", null, IMessageBox.YESNO); // MSG:31.32
      // BUC
      // 1.22.1
    }

    } else { // If the device is neither of these, POS displays Message 1
      // Button, MSG 31.14\. [BUC
      // 1.23.2]
      displayMessage("InvalidLoyaltyCard");
      transaction.setValue(ITransactionHashtableWag.LOYALTY_MESSAGE_DISPLAYED,
          NOT_VALID_LOYALTY_CARD);
      userResponse = -1;
    } 
```

请告知我如何使用其他一些条件语句来改进我的上述逻辑，因为使用了很多 If Else ..!!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T16:58:35.850

如果`cardType`是一个枚举，您可以将方法添加到您的枚举（例如`getName`，`getWag`等等）并调用它：

```
userResponse = messageBox.showMessage(cardType.getMessage(), ...
transaction.setValue(cardType.getWag(), cardType.getRewards()); 
```

如果它是 int 或其他非枚举类型，您可以使用已经建议的开关，或者考虑切换（哈哈）到枚举。您还可以为`PosHelper.isRunningAsService()`这些方法创建一个布尔参数，并且**所有 if/else 代码似乎都会减少到 3 或 4 行**（尽管它会引入一些耦合，但您似乎已经有了很多耦合）。

您的枚举可能如下所示（您可以根据需要进行复杂化的简单示例）：

```
public enum CardType {
    AARP_CARD_TYPE {
        public String getName() {
            return "CandidateAARPCardAttachCardToExistingTransaction";
        }
    },
    PSC_CARD_TYPE {
        public String getName() {
            return "PendingPSCCardAttachCardToExistingTransaction";
        }
    };

    public abstract String getName();
} 
```

或者更紧凑，如果您在方法中不需要复杂的逻辑：

```
 public static enum CardType {
        AARP_CARD_TYPE("CandidateAARPCardAttachCardToExistingTransaction"),
        PSC_CARD_TYPE ("PendingPSCCardAttachCardToExistingTransaction");

        private final String transactionName;

        CardType(String transactionName) {
            this.transactionName = transactionName;
        }

        public String getName() {
            return transactionName;
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T16:56:16.787

改为使用`switch`语句。

```
switch (cardType) {
case AARP_CARD_TYPE:
    // blah
    break;
case PSC_CARD_TYPE:
    // blah
    break;

// ...

default:
    // default blah
    break;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T17:01:40.110

你有一些选择：模式策略、多态性或事件来避免过多的 ifs/else

在您的示例中，业务逻辑可能接近用户界面。您可以使用 MVC 概念将逻辑与表示分离并减少 if/else（如果可能）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T17:20:10.753

如果您不喜欢向[assylias](https://stackoverflow.com/users/829571/assylias)`CardType`建议的那样添加方法，您可以创建一个“Action”枚举并将方法添加到该枚举并使用`Map`

# c# - RijndaelManaged 实例的用途？

> ID：10724509
> 
> 赞同：2
> 
> 时间：2012-05-23T16:55:19.183
> 
> 标签：c#, cryptography

当我搜索 RSACypthyServiceProvider 时，我在 MSDN 上找到了以下代码示例。在评论的帮助下，我无法理解代码的某些部分。

1.  什么是模数和指数？

2.  什么是IV？

3.  为什么他们使用 RijndaelManagedclass 进行非对称加密？根据我的搜索，RSACryptoServiceProvider 提供了非对称加密功能，它会在我们创建对象时自动创建私钥和公钥。那么 RijndaelManaged 实例的目的是什么？

任何人都可以解释一下吗？

**代码示例：**

```
class Class1
{

   static void Main()
   {

     //Initialize the byte arrays to the public key information.
      byte[] PublicKey = {Somethink in byte}

      byte[] Exponent = {1,0,1};

      //Create values to store encrypted symmetric keys.
      byte[] EncryptedSymmetricKey;
      byte[] EncryptedSymmetricIV;

      //Create a new instance of the RSACryptoServiceProvider class.
      RSACryptoServiceProvider RSA = new RSACryptoServiceProvider();

      //Create a new instance of the RSAParameters structure.
      RSAParameters RSAKeyInfo = new RSAParameters();

      //Set RSAKeyInfo to the public key values. 
      RSAKeyInfo.Modulus = PublicKey;
      RSAKeyInfo.Exponent = Exponent;

      //Import key parameters into RSA.
      RSA.ImportParameters(RSAKeyInfo);

      //Create a new instance of the RijndaelManaged class.
      RijndaelManaged RM = new RijndaelManaged();

      //Encrypt the symmetric key and IV.
      EncryptedSymmetricKey = RSA.Encrypt(RM.Key, false);
      EncryptedSymmetricIV = RSA.Encrypt(RM.IV, false);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:00:49.803

RSA 非常慢，并且有填充开销。所以一般会生成一个随机对称密钥，用 RSA 加密，然后用对称密钥加密消息。这种方法被称为[混合密码系统](https://en.wikipedia.org/wiki/Hybrid_cryptosystem)。

如果使用单个密钥加密多条消息，IV 很重要，但由于此代码为每条消息创建一个新密钥，IV 在这里并不重要。仍然使用 IV 可以防止多目标攻击，因此使用唯一密钥并非完全无用，尤其是在密钥只有 128 位的情况下。

这段代码效率也很低：它分别加密 IV 和密钥，而不是连接它们。这使 RSA 开销加倍。

模数和指数是 RSA 公钥的两个部分。查阅维基百科了解详情。指数通常选择为`2^16 + 1 = 65537`，对应`{1,0,1}`于本代码中的 。

# css - 包装器 div 高度为 0，内部有浮动元素

> ID：10724513
> 
> 赞同：16
> 
> 时间：2012-05-23T16:55:34.267
> 
> 标签：css, html, css-float

我有一个包装器`<div>`，其中包含两个`<div>`浮动的内部 s。

```
<div class="outside" style="border:1px solid #555;">
  <div class="inside" style="float:left; width:40px;">CONTENT</div>
  <div class="inside2" style="float:left; width:40px;">CONTENT</div>
</div> 
```

问题是包装器`<div>`的宽度为 80px，因为两个内部`<div>`每个都是 40px。但是包装器总是`<div>`在`0px`高度上，这使得边框看起来像顶部的一条线。

所以我把两个 inner `<div>`s 放在了 a`<table>`中。它运作良好。但是我如何避免这个问题而不去 a `<table>`？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-23T16:57:15.727

设置`overflow: hidden`在父级上。

```
<div class="outside" style="border:1px solid #555;overflow:hidden;">
  <div class="inside" style="float:left; width:40px;">CONTENT</div>
  <div class="inside2" style="float:left; width:40px;">CONTENT</div>
</div> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-23T16:59:55.230

外部`div`正在[坍塌](http://complexspiral.com/publications/containing-floats/)，因为其中的两个孩子`div`是浮动的。最简单的解决方法是设置`overflow: hidden;`在外部`div`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T16:58:46.047

尝试这个：

```
<div class="outside" style="border:1px solid #555; overflow:auto">
<div class="inside" style="float:left; width:40px;">CONTENT</div>
<div class="inside2" style="float:left; width:40px;">CONTENT</div>
</div>//Outside container close 
```

# icalendar - 防止谷歌日历在远程 icalendar 文件更改时创建重复条目

> ID：10724514
> 
> 赞同：0
> 
> 时间：2012-05-23T16:55:36.230
> 
> 标签：icalendar

我的大学校园里一直在发生很多活动，我们和其他一些学生一起认为，将活动时间表作为日历提供会很好。因此，组织者在 Intranet 上注册他们的活动，并将其添加到校园内的人们可以订阅的 icalendar 文件中。

当人们在他们的 iPhone 上加载日历 url 时，这很有效，但在谷歌日历中加载时就不行了。我们注意到两个问题：

1.  当您订阅日历然后注销并重新登录时，事件将不再可见。有时，单击刷新可以修复它。通风口不会从与您的帐户关联的安卓设备上消失。
2.  当从 icalendar 文件中删除事件时（例如，如果它被取消），它仍然保留在与订阅日历的任何 google 帐户同步的 android 设备上。不过，新事件同步很好，所以并不是同步没有发生。

你知道我该如何解决这两个问题吗？我注意到s中的`STATUS:CANCELLED`属性`VEVENT`，但是当日历方法为PUBLISH时它似乎不起作用。

谢谢！

PS：如果您能提出一种比等待 Google 从服务器拉取更改更快地测试更改的方法，那就太好了；现在，我必须在每次测试之间等待大约 6 小时...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T02:23:46.717

我的理解是从文件中删除它不是取消事件的方法。必须确保有一个唯一标识符来匹配任何更改。还必须遵循取消/更改事件的规范。

请参阅[如何使用 ics 文件取消日历事件？](https://stackoverflow.com/questions/10551764/how-to-cancel-an-calendar-event-using-ics-files/10561761)

如果所有这些都是正确的，那么“订阅”日历的各种应用程序理论上应该在读取更新的文件时更新事件状态。不幸的是，其速度和频率取决于该应用程序。（注意：还要注意订阅和“导入”之间的区别）

是的，我注意到谷歌有时更新速度很慢。我能想到的唯一一件事是使用另一个应用程序，您可能可以控制订阅更新频率来测试您取消事件的方式是否有效。一旦你看到那里发生了取消，然后在谷歌上恢复测试（我注意到谷歌比一些应用程序更迂腐，所以你可能仍然需要努力让它 100% 在谷歌上工作。）

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T11:13:32.593

我已经尝试了这些建议，但 Google 日历只会添加另一个事件。iCalendar 验证器说我生成的文件是有效的，如果 Mac 上的 iCal 有取消信息，它会删除一个事件。但 Google 日历或 Outlook 都没有。比较郁闷。

# c# - 从 linq 进行查询后，是否有任何 API 用于呈现规范化数据？

> ID：10724515
> 
> 赞同：1
> 
> 时间：2012-05-23T16:55:37.910
> 
> 标签：c#, asp.net-mvc-3, linq

例如， [Service Stack](http://www.servicestack.net/)对 Northwind 数据库执行此操作：

```
http://www.servicestack.net/ServiceStack.Northwind/customers/ALFKI?format=html 

```

是否有任何东西可以读取数据库结构和关系并根据主 ID 输出报告？

显然，我正在寻找 servicestack 的替代品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:09:40.660

为此，我使用 LINQPad 的 .Dump() 对象可视化工具。[从http://www.linqpad.net](http://www.linqpad.net)下载 LINQPad并在您的项目中引用 .exe。

然后，您将可以访问 LINQPads .CreateXhtmlWriter() ，它可以输出漂亮的对象图可视化：

![LINQPad .Dump() 示例](../Images/2b8db5daac94c544a4166b2988c17a44.png)

只要去：

```
var listOfItems = DataContext.Items.ToList();

listOfItems.Dump(); 
```

以下不是我的代码，但我找不到出处，请耐心等待。

使用扩展方法创建 Xhtml 转储并将其显示在浏览器中：

```
public static class LinqPadExtensions
{
    /// <summary>
    /// Writes object properties to HTML 
    /// and displays them in default browser.
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="o"></param>
    /// <param name="heading"></param>
    public static void Dump<T>(
        this T o,
        string heading = null
    )
    {
        string localUrl =
            Path.GetTempFileName() + ".html";
        using (
            var writer =
                LINQPad.Util.CreateXhtmlWriter(true)
        )
        {
            if (!String.IsNullOrWhiteSpace(heading))
                writer.Write(heading);
            writer.Write(o);
            File.WriteAllText(localUrl, writer.ToString());
        }

        Process.Start(localUrl);
    }
} 
```

# css - 如何使 prestashop blockcart 保持在同一位置？

> ID：10724521
> 
> 赞同：0
> 
> 时间：2012-05-23T16:55:44.233
> 
> 标签：css, prestashop

我的 Prestashop 主题有这个问题......当我调整浏览器大小时，blockcart 的位置跑到底部......所有浏览器似乎都有问题，除了 firefox 很好

请告诉我应该在 css 文件中添加什么代码，以避免当浏览器调整为较小的窗口时 blockcart 运行到底部。

# 右列

我的网站：http: [//goo.gl/TU2t7](http://goo.gl/TU2t7)

```
#right_column { 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:04:38.280

只需将位置属性设置为固定：

```
#right_column {
    ...
    position:fixed;
} 
```

# jquery - 带有模拟 Html.DropDownListFor 的选择列表的 jqGrid 列

> ID：10724523
> 
> 赞同：2
> 
> 时间：2012-05-23T16:55:48.403
> 
> 标签：jquery, asp.net-mvc, drop-down-menu, jqgrid, asp.net-mvc-4

我正在尝试将 jqGrid 用于相当复杂的 UI。网格最终需要有一个下拉列、一个自动完成和一个按钮列。现在，我无法弄清楚如何设置一个列，其中包含一个`select`列表，该列表填充模型上的值，从`IEnumerable`模型上的属性设置初始选定值，并在用户更改值时更改该属性的`select`名单。例如，假设我有这些模型：

```
public class GridRowModel 
{
    public int GridRowModelId { get; set; }
    public string SomeText { get; set; }
    public int SomeSelectOptionId { get; set; }
}

public class SelectOption 
{
    public int SomeSelectOptionId { get; set; }
    public string Description { get; set; }
}

public class SomeModel {
    public int SomeModelId { get; set; }
    public IEnumerable<GridRowModel> GridRowModels { get; set; }
    public IEnumerable<SelectOption> AllSelectOptions { get; set; }
} 
```

的`AllSelectOptions`属性`SomeModel`与模型上的所有其他内容一起设置在控制器中。控制器还有一个方法`GetSomeModelGridRows`可以返回`GridRowModel`jqGrid 的对象数组`rows`。然后，我的 Razor 看起来像这样：

```
@model SomeModel
<table id="someModelGridRows" cellpadding="0" cellspacing="0"></table>
<div id="pager" style="text-align: center;"></div>
<script type="text/javascript">
    $(document).ready(function() {
        $("#someModelGridRows").jqGrid({
            url: '@Url.Action("GetSomeModelGridRows")',
            datatype: 'json',
            mtype: 'POST',
            colNames: ['GridRowModelId', 'Text', 'Select Option'],
            colModel: [
                { name: 'GridRowModelId', index: 'GridRowModelId', hidden: true },
                { name: 'SomeText', index: 'SomeText' },
                { name: 'SomeSelectOptionId', index: 'SomeSelectOptionId', edittype: 'select', 

**?? is this where I would do something and if so, what ??**

            ],
            //the rest of the grid stuff
        });
    });
</script> 
```

在非网格情况下，使用`Html.DropDownListFor`帮助程序很简单。有没有办法可以在这里使用它？我是不是走错了路和/或这是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:32:11.397

我想我使用[TPeczek](https://stackoverflow.com/users/333253/tpeczek)的[Lib.Web.Mvc 和他非常有用的示例项目解决了这个](https://github.com/tpeczek/Lib.Web.Mvc)问题。Lib.Web.Mvc 在 Nuget 上可用，并且擅长封装从控制器返回 JSON 到网格所需的数据格式。对于将来遇到此问题的任何人....

控制器：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult GetClientContactsAndProviders(JqGridRequest request)
{
    var clientId = CookieHelper.GetClientIdCookieValue();
    var contacts = _clientRepo.GetContactsForClient(clientId).ToList();
    //I do not want paging, hence TotalPagesCount = 1.
    //PageIndex increments automatically in JqGridResponse, so start at 0.
    var response = new JqGridResponse
                       {
                           TotalPagesCount = 1,
                           PageIndex = 0,
                           TotalRecordsCount = contacts.Count
                       };
    foreach(var contact in contacts)
    {
        response.Records.Add(new JqGridRecord(contact.Id.ToString(),
                                              new List<object>
                                                  {
                                                      contact.Id,
                                                      contact.ClientId,
                                                      contact.ClientContactId,
                                                      contact.ContactId,
                                                      contact.ContactTypeId,
                                                      contact.Description,
                                                      contact.ContactName,
                                                      contact.ContactPhone,
                                                      string.Empty,
                                                      contact.ContactComments
                                                  }));
    }
    return new JqGridJsonResult {Data = response};
} 
```

然后，下拉列表将填充到具有以下模型的局部视图中`Dictionary<int, string>`：

```
@model Dictionary<int, string>
<select>
    <option value=""></option>
    @foreach(KeyValuePair<int, string> value in Model)
    {
        <option value="@value.Key.ToString()">@value.Value</option>
    }
</select> 
```

编写一个`Action`返回部分字典的函数：

```
public ActionResult ContactTypes()
{
    var contactTypes = new Dictionary<int, string>();
    var allTypes = _cacheService.Get("contacttypes", _contactRepo.GetAllContactTypes);
    allTypes.ToList().ForEach(t => contactTypes.Add(t.ContactTypeId, t.Description));
    return PartialView("_SelectList", contactTypes);
} 
```

最后是网格本身（Razor），在列中定义了下拉列表`Type`：

```
$(document).ready(function () {
    $("#clientContacts").jqGrid({
        url: '@Url.Action("GetClientContactsAndProviders")',
        datatype: 'json',
        mtype: 'POST',
        cellEdit: true,
        cellsubmit: 'clientArray',
        scroll: true,
        colNames: ['Id', 'ClientId', 'ClientContactId', 'ContactId', 'HiddenContactTypeId', 'Type', 'Who', 'Phone', '', 'Comments'],
        colModel: [
            { name: 'Id', index: 'Id', hidden: true },
            { name: 'ClientId', index: 'ClientId', hidden: true },
            { name: 'ClientContactId', index: 'ClientContactId', hidden: true },
            { name: 'ContactId', index: 'ContactId', hidden: true },
            { name: 'HiddenContactTypeId', index: 'HiddenContactTypeId', hidden: true },
            {
                name: 'Type',
                index: 'ContactTypeId',
                align: 'left',
                width: 180,
                editable: true,
                edittype: 'select',
                editoptions: {
                    dataUrl: '@Url.Action("ContactTypes")',
                    dataEvents: [
                        {
                            type: 'change',
                            fn: function (e) {
                                var idSplit = $(this).attr('id').split("_");
                                $("#clientContacts").jqGrid('setCell', idSplit[0], 'HiddenContactTypeId', $(this).attr('value'), '', '');
                            }
                        }
                    ]
                },
                editrules: { required: true }
            },
            { name: 'Who', index: 'ContactName', width: 200, align: 'left', editable: true, edittype: 'text' },
            { name: 'Phone', index: 'ContactPhone', width: 100, align: 'left', editable: false },
            { name: 'Button', index: 'Button', width: 50, align: 'center' },
            { name: 'Comments', index: 'ContactComments', width: 240, align: 'left', editable: true, edittype: 'text' }
        ],
        pager: $("#pager"),
        rowNum: 20,
        sortname: 'Id',
        sortorder: 'asc',
        viewrecords: true,
        height: '100%'
    }).navGrid('#pager', { edit: false, add: true, del: false, search: false, refresh: false, addtext: 'Add Contact/Provider' });
}); 
```

希望这对将来的某人有所帮助，并再次感谢@TPeczek。

# c# - 无法反序列化具有子列表的对象

> ID：10724528
> 
> 赞同：0
> 
> 时间：2012-05-23T16:56:25.420
> 
> 标签：c#, .net, json, javascriptserializer, json.net

所以我有这个对象：

```
public class JournalItem
{
    public string Description { get; set; }
    public bool IsShared { get; set; }
    public bool IsDeleted { get; set; }
    public bool IsGroup { get; set; }
    public Guid Id { get; set; }
    public List<JournalItem> ChildEntities { get; set; }
} 
```

它在那里有一个相同类型的对象的列表，即 ChildEntitites。我有一个页面将这些数组作为 Json 发布回服务器。这是它返回的 Json：

```
[{"Description":"Develop social skills","Id":"d48749ea-2b50-4563-b47c-f2014b08c53a","IsShared":false,"IsDeleted":false,"IsGroup":false,"ChildEntitites":[]},{"Description":"Be more like Joel D.","Id":"a18749ea-2b50-4563-b47c-f2014b08d123","IsShared":true,"IsDeleted":false,"IsGroup":true,"ChildEntitites":[{"Description":"Wear cool glasses","Id":"77c56855-5626-4107-bc82-5862ccdb0943","IsShared":false,"IsDeleted":false,"IsGroup":false,"ChildEntitites":[]},{"Description":"Get 16GB of RAM","Id":"82081eab-b4ce-41fe-bcec-22178b7ed8e6","IsShared":false,"IsDeleted":false,"IsGroup":false,"ChildEntitites":[]}]},{"Description":"Nested group 1","Id":"9495f718-9e7b-4936-b1bf-112d1e7d3ef5","IsShared":false,"IsDeleted":false,"IsGroup":true,"ChildEntitites":[{"Description":"Nested group 2","Id":"70a7e919-1253-4dbd-b41b-49d8bd599657","IsShared":false,"IsDeleted":false,"IsGroup":true,"ChildEntitites":[{"Description":"Nested group 3","Id":"77bfcb11-cba2-48a9-8a1b-b4e0c9b1c5e1","IsShared":false,"IsDeleted":false,"IsGroup":true,"ChildEntitites":[{"Description":"Very nested objective","Id":"274c786b-d09c-4228-a18a-629d4ca9aed3","IsShared":false,"IsDeleted":true,"IsGroup":false,"ChildEntitites":[]}]}]}]}] 
```

这是我使用 JavaScriptSerilaiazer 将其转换为实际对象的方式：

```
var ser = new JavaScriptSerializer();
var journalStructure = ser.Deserialize<List<JournalItem>>(journalJson); 
```

（我也尝试过 NewtonSoft，结果相同）

这应该给我一个包含 3 个项目的数组（它确实如此）。第一个项目不应该有任何 ChildEntities，但第二个和第三个项目应该有另一个 JournalItems 列表作为它们的 ChildEntities，但它们也都是空的。

如何获得这些序列化程序之一以将 json 数组反序列化为列表？我可以这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T17:08:11.773

如果您更改`ChildEntities` 为`ChildEntitites`（您的 json 字符串包含此内容） ，它应该可以工作

Json.net 和 JavaScriptSerializer 都可以工作。

# android - 在用户退出应用程序时询问用户是否想对 Android 应用程序进行调查

> ID：10724545
> 
> 赞同：0
> 
> 时间：2012-05-23T16:57:27.603
> 
> 标签：android, survey

我们正在尝试与 Android 用户一起测试我们的 alpha 应用程序。用户将使用该应用程序，当他们完成使用该应用程序时，我们希望用户进行一个简短的调查，以告诉我们他们的应用程序体验。

我们想询问用户是否愿意在退出 Android 应用程序时进行调查。做这个的最好方式是什么？我们了解到，在 Android 上没有可靠的方法来判断用户是否正在退出应用程序。

如果其他人做过类似的练习并了解什么是有效的，那将不胜感激。

请注意，我们不会对我们在 Android 市场上的生产应用程序进行此调查。我们只需要一种方法来要求用户在使用完应用程序并准备好提供反馈后从应用程序中进行调查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:02:29.733

当他们点击 Back 或 Home（或更糟，`onPause`/ `onStop`/ `onDestroy`）时不要触发任何类型的弹出窗口 - 这是非常糟糕的形式。在 Android 中，您的应用程序永远不应被视为“已退出”，因为用户可能会在执行一些其他任务（接听电话、检查电子邮件等）后立即返回它。

正确的做法是简单地拥有一个 UI 元素（如按钮），用户可以从中触发调查。

如果您绝对必须显示不请自来的提示，请帮用户一个忙，并注意您已提示他们并且他们已选择参加调查（例如，通过`SharedPreferences`）。这样，您至少可以仅在他们过去未参加调查时才显示提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:02:06.180

我建议您在用户单击应用程序中的“退出”或按返回键时让调查弹出。用户会在您的应用 Google Play 页面上留下回应和建设性的批评。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T17:08:21.477

覆盖启动器或适当活动中的后退键功能，并为用户提供 2 个选项，1\. 提交反馈 2\. 稍后（立即退出应用程序）

# matlab - 警告：“对 'D' 的乘法及其转置进行简化，以确保结果是 Hermetian。”

> ID：10724549
> 
> 赞同：6
> 
> 时间：2012-05-23T16:58:05.230
> 
> 标签：matlab, matrix, warnings, multiplication, parentheses

![在此处输入图像描述](../Images/f19285867a2ba8619b0e11d45d081206.png)

正如您在上面的屏幕截图中看到的，我的 Matlab m 文件代码中有以下表达式：
`K = P * D * D' * P;`
其中，P 是 nxn 矩阵，D 是 nx1 列向量（如果重要，n=4）。

为什么我会收到此警告消息？
如果我在那里使用或不使用括号会有什么变化？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T17:03:18.937

浮点运算不是关联的。所以一般来说，`a * (b * c)`不一定会给出与`(a * b) * c`.

您所写的语句等效于`((P * D) * D') * P`，因此编译器警告您，如果您依赖 的 Hermitian 对称性`D * D'`，您应该强制它精确计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T17:19:11.663

作为旁注：你总是可以做

```
K = (K + K') / 2; 
```

要强制执行 的 Hermetian-ity `K`，但最好首先按照`P * (D * D') * P`提示将其计算为 Hermitian。

编辑：实际上，需要注意的一件事是，如果通常是对角线，`K`则它只会是 Hermitian 。`P`即使使用`P`置换矩阵（如字母所示），也不能保证`K`是 Hermitian。唯一有保证的 Hermitian 部分`D * D'`。

# javascript - 简单的json读取api

> ID：10724559
> 
> 赞同：4
> 
> 时间：2012-05-23T16:58:39.803
> 
> 标签：javascript, json

我有一个产生以下结果的查询：

```
{
  "data": [
    {
      "id": "1107702400"
    },
    {
      "id": "1149862205",
      "likes": {
        "data": [
          {
            "name": "Penelope Test",
            "category": "Arts/entertainment/nightlife",
            "id": "411133928921438",
            "created_time": "2012-05-23T11:41:27+0000"
          }, 
```

我可以通过以下方式访问的第一个 ID：

```
response.data[i].id 
```

如何检索第二个 ID？（那个去 data-id-data-id 的那个？）

我有这个功能：

```
for(i=0;i<response.data.length;i++)
            {
                 testdiv.innerHTML +=  response.data.data[i].id + '<br/>' ;
            } 
```

这让我打印第一个 id。

为了打印第二个 ID，我需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:02:49.327

在您的示例数据中

```
response.data[i].likes.data[0].id 
```

# macos - 在 Mac 上安装以前版本的 CouchDB

> ID：10724566
> 
> 赞同：0
> 
> 时间：2012-05-23T16:59:30.783
> 
> 标签：macos, couchdb

我能够使用 Homebrew 在 Mac OS 上安装 couchdb 的最新版本。有没有办法可以安装以前的版本（0.10.0）。我尝试使用 iriscouch 但无法克隆存储库。

安装像 1.1.1 这样的版本怎么样？有没有办法使用自制软件来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:06:51.747

当前版本是 1.2.0，之前的版本是 1.1.1。0.10.0在 CouchDB 历史上已经*很久了。*你确定你需要那么远吗？你有什么问题？

对于 1.1.1，您可以简单地恢复到以前的公式（通过 git 检查）或直接编辑 couchdb.rb 文件。

如果您需要 0.10.0，另一种选择是尝试[https://github.com/iriscouch/build-couchdb](https://github.com/iriscouch/build-couchdb)。

最后，尝试从源代码、spidermonkey 1.7.0 构建 Erlang R14B01，然后使用与 0.10.0 自制配方中类似的配置：

需要'bre​​wkit'

类 Couchdb

依赖于'蜘蛛猴'依赖于'icu4c'依赖于'erlang'

def install system "./configure", "--prefix=#{prefix}", "--localstatedir=#{var}", "--sysconfdir=#{etc}", "--with-erlang=# {HOMEBREW_PREFIX}/lib/erlang/usr/include" 系统 "make" 系统 "make install"

```
(var+'lib'+'couchdb').mkpath
(var+'log'+'couchdb').mkpath 
```

结束结束

自 2009 年底 0.10.0 发布以来，CouchDB、Mac OS X、Erlang、Spidermonkey 和其他依赖项都发生了显着变化。预计路上会有一些颠簸。

# c++ - 在 C++ 中加倍为字符串

> ID：10724567
> 
> 赞同：1
> 
> 时间：2012-05-23T16:59:30.973
> 
> 标签：c++, string, double

我正在尝试将表达式“5 + b * 18”转换为“5+16.89*18”。我的问题在while循环内。我设法删除了空格。

我的代码：

```
double number = 16.89;
size_t found;
ostringstream converted;
string str ("5 + b * 18");

str.erase(remove(str.begin(),str.end(),' '),str.end());

found = str.find_first_of (VALID_CHARS);

while (found != string::npos)
 {        
  converted << fixed << setprecision (8) << number;        
  str.insert(found, converted.str());                                               
  found = str.find_first_of (VALID_CHARS,found + 1);
 } 
```

谁能帮我？

泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:04:56.117

这是作业吗？如果没有，我真的建议不要自己进行这种解析。有专门的库用于这种已经过广泛测试的东西，例如[muParser](http://muparser.sourceforge.net)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:04:57.820

`insert()`将在插入文本之后将字符串的内容向右移动，但不会删除给定位置的字符。您应该使用`replace()`，指定 ` 的大小（仅替换单个字符）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T17:03:12.670

使用[sprintf](http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/)。它非常适合将大多数原始类型转换为字符串。

```
int main()
{
  double number = 16.89;
  char buffer [50];
  sprintf(buffer, "5 + %f * 18",number);
} 
```

# coffeescript - 更优雅的咖啡脚本循环

> ID：10724569
> 
> 赞同：0
> 
> 时间：2012-05-23T16:59:38.337
> 
> 标签：coffeescript

JS：

```
for(i=this.current.arr.length;i<this.counterLength;i++){
    dosomthing();
    dosomethingelse();
} 
```

咖啡：

```
i = @current.arr.length
while i < @counterLength
  dosomthing()
  dosomethingelse()
  i++ 
```

我知道coffeescript 有很棒的循环语法糖果，但我找不到比这更优雅的编写方式了。有没有更咖啡脚本的方式来做到这一点？

我知道：

```
 for currentArr in current.arr
 //and
 for currentArr, 1 in current.arr 
```

但我需要从 @currentLength 而不是 0 开始

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:22:44.167

`[..]`运算符是您正在寻找的：

```
start = this.current.arr.length
end = this.counterLength
for [start...end]
    dosomthing()
    dosomethingelse() 
```

不需要预先定义`start`and `end`，我只是用它来使代码更清晰一点。请注意，如果`start`大于 then `end`，那么它将倒退。

实际上您需要`[...]`运算符，因为您在代码中使用`<`而不是。运算符排除最后一个元素`<=`。`[...]`

# php - AJAX POST JSON 数组 Javascript 不是 JQUERY

> ID：10724573
> 
> 赞同：2
> 
> 时间：2012-05-23T16:59:50.373
> 
> 标签：php, javascript, json, post, xmlhttprequest

![在此处输入图像描述](../Images/60c839fdc2eb7cacc822e064a43a8468.png)

在这个屏幕截图中，一个 JSON 数组通过 AJAX 传递给 PHP，没有 POST 正文。我正在使用此代码来实现它：

```
with(x=new XMLHttpRequest()) open("POST", "http://myweb/api/mobile/v1/jobeventadd?key=cfff"), setRequestHeader("Content-Type", "application/x-www-form-urlencoded"), send("%7B%0A%22SessionID%22%3A%22hn0oqa0u687avsrnev6f5t2nh7%22%2C%0A%22ObjectID%22%3A%226460%22%2C%0A%22ItemName%22%3A%22UologiciPhone%20test%20event%22%2C%0A%22ActivityFrom%22%3A%2201-01-2013%2012%3A00%3A00%22%0A%7D"); 
```

但它不起作用。我怎样才能通过 XMLHttpRequest 做到这一点？**请不要查询**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T06:02:21.673

使用[onreadystatechange 属性](http://msdn.microsoft.com/en-us/library/ie/dd576252)获取成功状态后的响应，然后将数据存储在自定义标头中以解决 POST 正文的问题：

```
with(new XMLHttpRequest)
  {
  open("POST",{},true);
  setRequestHeader("Foo", "Bar");
  send("");
  onreadystatechange = handler;
  }

function handler(event)
 {
 !!event.target && !!event.target.readyState && event.target.readyState === 4 && ( console.log(event) );
 } 
```

**参考**

*   [XMLHTTPRequest 生活标准](https://xhr.spec.whatwg.org/)
*   [获取生活标准](https://fetch.spec.whatwg.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T08:45:22.067

和 GET 一样

```
with(new XMLHttpRequest)
  {
  open("POST","http://google.com",true);
  send("hello=world&no=yes");
  onreadystatechange = function(){};
  } 
```

# javascript - Javascript 中有没有办法只从 JSON 对象中获取值？

> ID：10724576
> 
> 赞同：2
> 
> 时间：2012-05-23T16:59:59.483
> 
> 标签：javascript, json

我正在尝试为我的项目添加“搜索”功能。我想做的是只搜索 JSON 对象的值，这样当我评估对象的成员时，我的正则表达式就不会尝试匹配属性名称。

考虑以下示例：

```
var myObj = { 
  'FirstName': 'Joe', 
  'LastName': 'Jones',
  'Age': 35,
  'Address': {
    'City': 'Boise',
    'State': 'Idaho'
  }
};
var myObjValues = JSON.stringify(myObj);
// result: "{"FirstName":"Joe","LastName":"Jones", etc... }" 
```

但是，我想得到的是一个字符串，其中所有值都平展为一个由空格（或逗号、分号或制表符）分隔的字符串，如下所示：

```
// result: "Joe Jones 35 Boise Idaho" 
```

我永远不会知道对象是什么。在上面的示例中，我使用了名称和地址，但对象可以是任何具有其下方任何级别的嵌套对象的对象。我只想要最深的属性，即字符串和数字。

有没有办法使用 JSON 对象来做到这一点？是否有一个库可以在某处执行此操作，我想编写自己的函数来剥离这些值并自己构建字符串，但不想重新发明轮子。

提前感谢任何提示或指示！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T17:04:23.600

```
var vals = Object.keys(myObj).map(function(k) { return myObj[k]; }); 
```

[http://jsfiddle.net/ezQuv/](http://jsfiddle.net/ezQuv/)

`.join(' ')`如果您想要字符串结果，请使用。

* * *

对于嵌套对象的更新问题，您可以这样做...

```
var vals = function getVals(o) {
    return Object.keys(o)
                 .map(function(k) {
                        if (o[k] && typeof o[k] === 'object')
                            return getVals(o[k]);
                        else
                            return o[k];
                    }).join(' ');
}(myObj); 
```

[http://jsfiddle.net/hKbMS/](http://jsfiddle.net/hKbMS/)

* * *

或者如果你喜欢条件运算符而不是 if/else 语句，像这样......

```
var vals = function getVals(o) {
    return Object.keys(o)
              .map(function(k) {
                  return o[k] && typeof o[k] === 'object' ? getVals(o[k]) : o[k];
              }).join(' ');
}(myObj); 
```

[http://jsfiddle.net/hKbMS/1/](http://jsfiddle.net/hKbMS/1/)

* * *

*   [MDN 补丁`Array.prototype.map`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map#Compatiblity)

*   [MDN 补丁`Object.keys`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys#Compatiblity)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T17:02:15.660

```
var myObj = { 
  'FirstName': 'Joe', 
  'LastName': 'Jones',
  'Age': 35,
  'City': 'Boise',
  'State': 'Idaho'
};
var myObjValues = [];
for(var n in myObj)
    myObjValues.push(myObj[n]);
myObjValues = myObjValues.join(' '); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T17:03:47.960

对此没有标准功能。

您可以使用下划线的[值](http://documentcloud.github.com/underscore/#values)函数，这是代码：

```
var values = _.values( JSON.stringify(myObj) ),
    values_str = values.join(" "); 
```

更新：

我想知道值的顺序是否重要？

# qt4 - 如何重叠两个 QLabels？Qt4

> ID：10724581
> 
> 赞同：1
> 
> 时间：2012-05-23T17:00:10.653
> 
> 标签：qt4, transparency, overlap, qlabel

我试图重叠两个 QLabels。一个 qlabel 包含一个图像，而另一个在我告诉它时绘制一个矩形。两者都单独工作，但我需要将矩形 QLabel 重叠在图像 QLabel 的顶部。在 QMainWindow 中，我只有一个选项：setCentralWidget。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:32:05.583

如果您想要两个重叠的标签，则不要将它们添加到布局中，而是将它们直接放置在其父窗口中。

像这样的东西：

```
// ...
parent = new QWidget();
label1 = new QLabel(parent);
label2 = new QLabel(parent);
label1->setGeometry(QRect(100,100,80,20));
label2->setGeometry(QRect(100,100,80,20));
// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T17:22:37.430

您可以将底部标签添加到布局中，但不能添加顶部（重叠）标签。从顶部的位置到底部的位置。对于底部标签，您需要使用从 QLabel 派生的类，您可以在其中覆盖`resizeEvent(...)`、发出信号并调用继承的`QLabel::resizeEvent(...)`. 将该信号连接到顶部标签中的插槽，也是 QLabel 派生类。插槽处理接收到的底部标签的几何形状以获得顶部标签的几何形状，并调用`this->setGeometry(...)`. 下面是一个[SSCCE](http://sscce.org)。

![示例代码的输出](../Images/87b1feee9c9bd56806dd6bb421357930.png)

```
#overlap.pro
QT       += core gui
TARGET = overlap
TEMPLATE = app
SOURCES += main.cpp 
```

```
//main.cpp
#include <QtGui/QLabel>
#include <QHBoxLayout>
#include <QtGui/QApplication>

class TopLabel : public QLabel
{
    Q_OBJECT
public:
    TopLabel(QWidget * parent = 0) : QLabel(parent) {}
    TopLabel(const QString & text, QWidget * parent = 0) : QLabel(text, parent) {}
public slots:
    void bottomGeometry(const QRect & r) {
        setGeometry(r.left() + r.width()*0.25, r.top() + r.height()*0.1,
                    r.width()*0.5, r.height()*0.5);
    }
};

class BottomLabel : public QLabel
{
    Q_OBJECT
public:
    BottomLabel(QWidget * parent = 0) : QLabel(parent) {}
    BottomLabel(const QString & text, QWidget * parent = 0) : QLabel(text, parent) {}
signals:
    void newGeometry(const QRect & r);
protected:
    void resizeEvent(QResizeEvent *) { emit newGeometry(geometry()); }
    void moveEvent(QMoveEvent *) { emit newGeometry(geometry()); }
};

class Window : public QWidget
{
public:
    Window() {
        QLayout * layout = new QHBoxLayout();
        QLabel * l = new QLabel("Left", this);
        l->setFrameStyle(QFrame::Box | QFrame::Raised);
        layout->addWidget(l);
        BottomLabel * bl = new BottomLabel("Right", this);
        bl->setFrameStyle(QFrame::Box | QFrame::Raised);
        TopLabel * tl = new TopLabel("TOP", this);
        tl->setFrameStyle(QFrame::StyledPanel);
        connect(bl, SIGNAL(newGeometry(QRect)), tl, SLOT(bottomGeometry(QRect)));
        layout->addWidget(bl);
        setLayout(layout);
    }
};

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    Window w;
    w.show();
    return a.exec();
}

#include "main.moc" 
```

# java - Java 数据挖掘包 (JDMP) 教程

> ID：10724582
> 
> 赞同：1
> 
> 时间：2012-05-23T17:00:10.800
> 
> 标签：java

我正在做一个项目，从网络爬虫获取数据并进行一些文本分析（实际技术仍有待讨论）。我目前正在使用 crawler4j 进行网络爬取，并希望将 Java 数据挖掘包 (JDMP) 用于分析部分。我考虑过其他软件包，例如 Apache Mahout（这不在表格中，但我发现设置 hadoop/maven 设置尤其是在 Windows 中很困难）。无论如何，我想要一些详细说明如何使用 JDMP 的教程/代码。我在网上搜索，但在这方面找不到任何有用的东西。如果有人能推荐一些好的 JDMP 教程，我将不胜感激。

谢谢。

# mysql - 如何在 MySQL 中合并多个具有相似名称的表

> ID：10724583
> 
> 赞同：2
> 
> 时间：2012-05-23T17:00:10.893
> 
> 标签：mysql, sql, merge

> **可能重复：**
> [如何合并两个 MySql 表？](https://stackoverflow.com/questions/725556/how-can-i-merge-two-mysql-tables)

我想合并多个具有相同结构的表并制作一个大表。这些表具有相似的名称，所以我想使用 LIKE 语句。谁能告诉我我该怎么做？

表很简单，每个都有一个ID列和几个其他的列，但是表的数量很大，所有的表的名字都像`'TX-xxx'`，其中的`'TX'`意思是Texas，`'xxx'`是Texas的县；你知道得克萨斯州有 200 多个县。（事实上​​，我必须对所有州都这样做。）所以我想使用语句`"LIKE 'TX-___'"`.

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T17:03:56.580

您必须提供更多信息，以便我们确切知道您想要什么，但您可以创建一个视图

```
CREATE VIEW myViewName AS 

select * 
from table1 

union all 

select * from 
table2 
```

这样，它将显示来自所有表的信息（并且可以限制在选择中不显示所有内容），并且当 table1、table2 等发生更改时，视图将反映这一点。您可以随时更改它并像获取表格一样从中获取：

```
 select * from myViewName 
```

现在从特定表中抓取我不确定如何在 mysql 中执行此操作，尽管我已经在 tsql 中完成了它。[上一个问题](https://stackoverflow.com/questions/1910068/mysql-query-multiple-identical-dynamic-tables)会对您有所帮助，因此您可能会遇到以下情况：

```
-- Create temporary table of varchar(200) to store the name of the tables. Depending on how you want to go through the array maybe an id number (int). 
insert into tempTableName (name)
SELECT table_name FROM information_schema.tables WHERE table_schema = 'database_name' and table_name like 'TX_%';
declare @sqlQuery varchar(max)
--Then you will want to loop through the array and build up an sql statement
-- For each loop through:
     if len(@sqlQuery) = 0 begin -- first time through
         set @sqlQuery = 'select col1, col2, col3 from ' + currentTableName
     end else begin -- second+ time through
         set @sqlQuery = 'union all select col1, col2, col3 from ' + currentTableName
     end
-- after the loop add the create view. Could double check it worked by checking length = 0 again
set @sqlQuery = 'CREATE VIEW myViewName AS ' + @sqlQuery
Once the query string is built up you will execute it with
PREPARE stmt FROM @sqlQuery;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T17:03:13.497

如果我正确理解您的问题，UNION 就是您所需要的。就像是

```
SELECT field1, field2
FROM (
SELECT field1, field2 from table1
UNION
SELECT field1, field2 from table2
) all_tables
WHERE all_tables.field1 like "%whatever% 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T18:41:41.853

假设它们具有相同或相似的列：

```
insert into #table
Select * from (Select * from tbl1 
               Union 
               select * from tbl2 
               Union 
               select * from tbl3) 
```

如果他们没有相同数量/类型的列，那么您应该向我们提供该信息。

# c - 用于确保释放锁的宏

> ID：10724585
> 
> 赞同：0
> 
> 时间：2012-05-23T17:00:24.997
> 
> 标签：c, gcc

有什么方法可以编写一对用于获取和释放锁的宏，这样如果我可以离开一个函数而不释放之前在该函数中获取的锁，gcc 会警告我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:09:02.237

您可以声明一个变量而不在开始宏中初始化它并在结束宏中初始化+使用它。如果您在 gcc ( `-Wall`?) 中使用适当的设置，它应该警告您声明的变量，而不是初始化的变量。

请注意，如果您想在同一个函数中多次使用同一个宏对（例如，将它与两个锁一起使用），您将需要指定一个不同的变量名，这样您就不会得到关于重新的错误变量声明

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:20:37.043

假设您的函数（范围）可能有多个`return`语句 - AFAIK 没有传统的方法可以做到这一点。

在 C++ 中自然没有问题，您可以使用 RAII（在 d'tor 中解锁的自动对象）。

如果您为 Windows 编写代码 - 您可以使用 SEH 包装器来确保资源释放。它也可以在异常情况下正常工作（C++ 和 SEH）。

```
__try
{
    lock(/*...*/);

    // ...

    if (/* ... */)
        return;

} __finally {
    unlock(/* ... */);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T17:17:14.813

我想不出任何办法让编译器为你强制执行它，但总是可以使用宏而不是 return 关键字。像这样：

```
#define RETURN(x) { if (locked()) unlock();  return x; } 
```

也就是说，我个人讨厌这样的宏，但这是一种选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T17:51:38.647

GCC 提供了 cleanup 属性，当变量超出范围时调用函数。如果你有解锁功能：

```
void unlock(lock_t *); 
```

您可以将您的锁声明为：

```
lock_t lock __attribute__((cleanup, unlock)); 
```

当然，C++ 方式更便于移植和理解。

# powershell - 如何在 PowerShell 中远程执行 ELEVATED 远程脚本

> ID：10724591
> 
> 赞同：8
> 
> 时间：2012-05-23T17:00:49.703
> 
> 标签：powershell, powershell-2.0, powershell-remoting, elevated-privileges

我有两台服务器：

*   **服务器A**（Windows 2003 服务器）
*   **服务器B**（Windows 7）

**ServerA**包含一个带有批处理文件 (deploy.bat) 的文件夹，该文件需要从提升的 powershell 提示符处执行。在**ServerA**中，如果我从正常提示符或 powershell 提示符运行它，它会失败。如果我从提升的提示符运行它，它可以工作。（以管理员身份运行）。

我遇到的问题是当我尝试使用远程 powershell 执行从**serverB执行批处理文件时。**我可以使用以下命令执行：

```
Invoke-Command -computername serverA .\remotedeploy.ps1 
```

**remotedeploy.ps1**的内容 是：

```
cd D:\Builds\build5
.\Deploy.bat 
```

我在stackoverflow中看了很多关于：

*   执行远程powershell（这对我有用）
*   使用提升的提示执行本地 powershell（我可以做到）

这个问题同时是关于两者的。所以确切的问题是：

**是否可以在 PowerShell 中执行 ELEVATED REMOTE 脚本？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-29T19:04:27.557

如果您使用的是 PowerShell 4，则可以使用 Desired State Configuration 执行命令，该命令运行如下`SYSTEM`：

```
Invoke-Command -ComputerName ServerA -ScriptBlock {
    configuration DeployBat
    {
        # DSC throws weird errors when run in strict mode. Make sure it is turned off.
        Set-StrictMode -Off

        # We have to specify what computers/nodes to run on.
        Node localhost 
        {
            Script 'Deploy.bat'
            {
                # Code you want to run goes in this script block
                SetScript = {
                    Set-Location 'D:\Builds\build5'
                    # DSC doesn't show STDOUT, so pipe it to the verbose stream
                    .\Deploy.bat | Write-Verbose
                }

                # Return $false otherwise SetScript block won't run.
                TestScript = { return $false }

                # This must returns a hashtable with a 'Result' key/value.
                GetScript = { return @{ 'Result' = 'RUN' } }
            }
        }
    }

    # Create the configuration .mof files to run, which are output to
    # 'DeployBot\NODE_NAME.mof' directory/files in the current directory. The default 
    # directory when remoting is C:\Users\USERNAME\Documents.
    DeployBat

    # Run the configuration we just created. They are run against each NODE. Using the 
    # -Verbose switch because DSC doesn't show STDOUT so our resources pipes it to the 
    # verbose stream.
    Start-DscConfiguration -Wait -Path .\DeployBat -Verbose
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T04:49:28.133

您是否尝试更改`remoteDeploy.ps1`为以提升的权限启动 CMD.EXE ：

```
cd D:\Builds\build5
start-process CMD.EXE -verb runas -argumentlist "-C",".\Deploy.bat" 
```

# ios - 无法在 segue 中设置 NSArray

> ID：10724592
> 
> 赞同：0
> 
> 时间：2012-05-23T17:00:51.360
> 
> 标签：ios, nsarray, segue

DBPostListViewController 有一个需要设置的 NSArray *postList。

我不断得到

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UITableViewController setPostList:]: unrecognized selector sent to instance 0x6e493d0 
```

在 setPostList 函数的 prepareForSegue 中：

```
 NSArray *tempAry = [str componentsSeparatedByString:@"|@|"];
NSMutableArray *postArray = [[NSMutableArray alloc] initWithCapacity:[tempAry count]];
for (NSString *entry in tempAry) {
    DBPost *tempPost = [[DBPost alloc] initWithString:entry];
    [postArray addObject:tempPost];
}

DBPostListViewController *dest = [segue destinationViewController];
[dest setPostList:postArray]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:05:40.447

您的错误消息解释了它：

```
-[UITableViewController setPostList:]: unrecognized selector 
```

您在这些代码行中发送该消息：

```
DBPostListViewController *dest = [segue destinationViewController];
[dest setPostList:postArray]; 
```

Objective-C 是动态类型的，所以即使你声明`dest`为 a `DBPostListViewController`，它也可以是任何 Objective-C 对象。在这种情况下，它恰好是一个`UITableViewController`.

您忘记在情节提要文件中设置自定义类，因此 UIKit 只是创建了一个普通 UITableViewController 的实例。修复您的故事板并重新运行您的应用程序。

# c# - 在 C# 中的 BouncyCastle 中构建证书链

> ID：10724594
> 
> 赞同：15
> 
> 时间：2012-05-23T17:01:00.310
> 
> 标签：c#, bouncycastle

我有一堆以字节数组形式提供的根证书和中间证书，我也有最终用户证书。我想为给定的最终用户证书构建证书链。在 .NET 框架中，我可以这样做：

```
using System.Security.Cryptography.X509Certificates;

static IEnumerable<X509ChainElement>
    BuildCertificateChain(byte[] primaryCertificate, IEnumerable<byte[]> additionalCertificates)
{
    X509Chain chain = new X509Chain();
    foreach (var cert in additionalCertificates.Select(x => new X509Certificate2(x)))
    {
        chain.ChainPolicy.ExtraStore.Add(cert);
    }

    // You can alter how the chain is built/validated.
    chain.ChainPolicy.RevocationMode = X509RevocationMode.NoCheck;
    chain.ChainPolicy.VerificationFlags = X509VerificationFlags.IgnoreWrongUsage;

    // Do the preliminary validation.
    var primaryCert = new X509Certificate2(primaryCertificate);
    if (!chain.Build(primaryCert))
        throw new Exception("Unable to build certificate chain");

    return chain.ChainElements.Cast<X509ChainElement>();
} 
```

如何在 BouncyCastle 中进行操作？我尝试使用下面的代码，但我得到`PkixCertPathBuilderException: No certificate found matching targetContraints`：

```
using Org.BouncyCastle;
using Org.BouncyCastle.Pkix;
using Org.BouncyCastle.Utilities.Collections;
using Org.BouncyCastle.X509;
using Org.BouncyCastle.X509.Store;

static IEnumerable<X509Certificate> BuildCertificateChainBC(byte[] primary, IEnumerable<byte[]> additional)
{
    X509CertificateParser parser = new X509CertificateParser();
    PkixCertPathBuilder builder = new PkixCertPathBuilder();

    // Separate root from itermediate
    List<X509Certificate> intermediateCerts = new List<X509Certificate>();
    HashSet rootCerts = new HashSet();

    foreach (byte[] cert in additional)
    {
        X509Certificate x509Cert = parser.ReadCertificate(cert);

        // Separate root and subordinate certificates
        if (x509Cert.IssuerDN.Equivalent(x509Cert.SubjectDN))
            rootCerts.Add(new TrustAnchor(x509Cert, null));
        else
            intermediateCerts.Add(x509Cert);
    }

    // Create chain for this certificate
    X509CertStoreSelector holder = new X509CertStoreSelector();
    holder.Certificate = parser.ReadCertificate(primary);

    // WITHOUT THIS LINE BUILDER CANNOT BEGIN BUILDING THE CHAIN
    intermediateCerts.Add(holder.Certificate);

    PkixBuilderParameters builderParams = new PkixBuilderParameters(rootCerts, holder);
    builderParams.IsRevocationEnabled = false;

    X509CollectionStoreParameters intermediateStoreParameters =
        new X509CollectionStoreParameters(intermediateCerts);

    builderParams.AddStore(X509StoreFactory.Create(
        "Certificate/Collection", intermediateStoreParameters));

    PkixCertPathBuilderResult result = builder.Build(builderParams);

    return result.CertPath.Certificates.Cast<X509Certificate>();
} 
```

**编辑**：我添加了解决我的问题的行。它的注释全部大写。结案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T17:28:08.520

我已经用 Java 做过很多次了。鉴于 API 似乎是 Java 的一个直接端口，我会尝试一下。

1.  我很确定当您将商店添加到构建器时，该集合应该包含要构建的链中的所有证书，而不仅仅是中间证书。所以应该添加 rootCerts 和 primary。
2.  如果这不能自行解决问题，我也会尝试以不同的方式指定所需的证书。您可以执行以下两项操作之一：
    *   实现您自己的选择器，它始终只匹配您所需的证书（示例中的主要证书）。
    *   而不是设置 holder.Certificate，而是在 holder 上设置一个或多个标准。例如，setSubject、setSubjectPublicKey、setIssuer。

这是我在使用 PkixCertPathBuilder 时遇到的两个最常见的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-30T18:33:23.670

下面的代码没有回答您的问题（它是一个纯 Java 解决方案）。我只是在输入所有内容后才意识到它不能回答您的问题！我忘了 BouncyCastle 有一个 C# 版本！哎呀。

它仍然可以帮助您创建自己的链生成器。您可能不需要任何库或框架。

祝你好运！

[http://juliusdavies.ca/commons-ssl/src/java/org/apache/commons/ssl/X509CertificateChainBuilder.java](http://juliusdavies.ca/commons-ssl/src/java/org/apache/commons/ssl/X509CertificateChainBuilder.java)

```
/**
 * @param startingPoint the X509Certificate for which we want to find
 *                      ancestors
 *
 * @param certificates  A pool of certificates in which we expect to find
 *                      the startingPoint's ancestors.
 *
 * @return Array of X509Certificates, starting with the "startingPoint" and
 *         ending with highest level ancestor we could find in the supplied
 *         collection.
 */
public static X509Certificate[] buildPath(
  X509Certificate startingPoint, Collection certificates
) throws NoSuchAlgorithmException, InvalidKeyException,
         NoSuchProviderException, CertificateException {

    LinkedList path = new LinkedList();
    path.add(startingPoint);
    boolean nodeAdded = true;
    // Keep looping until an iteration happens where we don't add any nodes
    // to our path.
    while (nodeAdded) {
        // We'll start out by assuming nothing gets added.  If something
        // gets added, then nodeAdded will be changed to "true".
        nodeAdded = false;
        X509Certificate top = (X509Certificate) path.getLast();
        if (isSelfSigned(top)) {
            // We're self-signed, so we're done!
            break;
        }

        // Not self-signed.  Let's see if we're signed by anyone in the
        // collection.
        Iterator it = certificates.iterator();
        while (it.hasNext()) {
            X509Certificate x509 = (X509Certificate) it.next();
            if (verify(top, x509.getPublicKey())) {
                // We're signed by this guy!  Add him to the chain we're
                // building up.
                path.add(x509);
                nodeAdded = true;
                it.remove(); // Not interested in this guy anymore!
                break;
            }
            // Not signed by this guy, let's try the next guy.
        }
    }
    X509Certificate[] results = new X509Certificate[path.size()];
    path.toArray(results);
    return results;
} 
```

需要这两种附加方法：

isSelfSigned():

```
public static boolean isSelfSigned(X509Certificate cert)
    throws CertificateException, InvalidKeyException,
    NoSuchAlgorithmException, NoSuchProviderException {

    return verify(cert, cert.getPublicKey());
} 
```

并验证（）：

```
public static boolean verify(X509Certificate cert, PublicKey key)
    throws CertificateException, InvalidKeyException,
    NoSuchAlgorithmException, NoSuchProviderException {

    String sigAlg = cert.getSigAlgName();
    String keyAlg = key.getAlgorithm();
    sigAlg = sigAlg != null ? sigAlg.trim().toUpperCase() : "";
    keyAlg = keyAlg != null ? keyAlg.trim().toUpperCase() : "";
    if (keyAlg.length() >= 2 && sigAlg.endsWith(keyAlg)) {
        try {
            cert.verify(key);
            return true;
        } catch (SignatureException se) {
            return false;
        }
    } else {
        return false;
    }
} 
```

# c# - 从 C# 中的列表填充树视图

> ID：10724600
> 
> 赞同：1
> 
> 时间：2012-05-23T17:01:17.383
> 
> 标签：c#, treeview, sharpsvn

我进行了一些研究，发现了一些与我的问题相近的话题，但没有一个能解决它。

[从路径列表中填充树视图](https://stackoverflow.com/questions/1155977/populate-treeview-from-a-list-of-path)

[http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.aspx)

[http://social.msdn.microsoft.com/Forums/en/winforms/thread/dae1c72a-dd28-4232-9aa4-5b38705c0a97](http://social.msdn.microsoft.com/Forums/en/winforms/thread/dae1c72a-dd28-4232-9aa4-5b38705c0a97)

[SharpSvn：获取存储库结构和单个文件](https://stackoverflow.com/questions/2883196/sharpsvn-getting-repository-structure-and-individual-files)

我想为我的 SVN 文件夹制作一个存储库浏览器，以便用户可以选择一个文件夹，它将返回到一个文本框。

这是我的实际代码：

```
 private void sourceTrunkBrowseButton_Click(object sender, EventArgs e)
     {
         using (SvnClient svnClient = new SvnClient())
         {
             Collection<SvnListEventArgs> contents;
             Collection<SvnListEventArgs> contents2;
             List<TreeItem> files = new List<TreeItem>();
             if (svnClient.GetList(new Uri("https://sourcecode/svn/XXXXXX"), out contents))
             {
                 foreach (SvnListEventArgs item in contents)
                 {
                     if (item.Path != "")
                     {
                         files.Add(new TreeItem(item.Path, 0));

                         if (svnClient.GetList(new Uri("https://sourcecode/svn/XXXXX" + item.Path), out contents2) && item.Path != "")
                         {
                             foreach (SvnListEventArgs item2 in contents2)
                             {
                                 if (item2.Path != "")
                                 {
                                     files.Add(new TreeItem(item2.Path, 1));
                                 }
                             }
                         }
                     }
                 }
             }
             svnBrowser_.FillMyTreeView(files);
             svnBrowser_.Show();
         }
     } 
```

和

```
 public void FillMyTreeView(List<AutoTrunk.TreeItem> files) 
 {

       // Suppress repainting the TreeView until all the objects have been created.
        svnTreeView.BeginUpdate();

        svnTreeView.Nodes.Clear();
        List<TreeNode> roots = new List<TreeNode>();
         roots.Add(svnTreeView.Nodes.Add("Items"));
         foreach (AutoTrunk.TreeItem item in files)
     {
         if (item.Level == roots.Count) roots.Add(roots[roots.Count - 1].LastNode);
         roots[item.Level].Nodes.Add(item.BrowsePath);
     }

        // Begin repainting the TreeView.
        svnTreeView.EndUpdate();
 } 
```

但我的树看起来像这样：

```
+---Name1
|   |
|   +------Name2
|   |
|   +------Name3
|   |
|   +------Name5
|   |
|   +------Name6
|
+---Name4 
```

但名称 5 和名称 6 应在名称 4 下

对不起，很长的帖子，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:37:48.673

`if(item.Level == roots.Count)`是你的问题我在想...你确定这些项目有正确的水平吗？例如，如果`Name1`和`Name4`是根，那么在遇到第二个根之后会发生什么？这是否给出了预期的结果：

```
TreeNode root = svnTreeView.Nodes.Add("Items");
TreeNode workingNode = root;
foreach (AutoTrunk.TreeItem item in files)
{
    if (item.Level == 0) 
        workingNode = root.Nodes.Add(item.BrowsePath);
    else
        workingNode.Nodes.Add(item.BrowsePath);
} 
```

只是一个想法。

# java - 具有多对多关系的不同结果和分页

> ID：10724601
> 
> 赞同：0
> 
> 时间：2012-05-23T17:01:19.317
> 
> 标签：java, hibernate

我有一个从 Nomination 到 User 的 M 对 M 关系映射在“Nominee”表上。我有以下方法将结果封装在一个名为“ResultPage”的分页类中：

```
protected ResultPage<T> findPageByCriteria(Criteria criteria, int page,
                                               int pageSize) {
        DataVerify.notNull(criteria);
        DataVerify.greaterThan(page, 0, "Invalid page number");
        DataVerify.isTrue(pageSize >= 0, "Invalid page size");
        if (logger.isDebugEnabled()) {
            logger.debug("Arguments: ");
            logger.debug("Page: " + page);
            logger.debug("Page size: " + pageSize);
        }
        int totalItems = 0;
        List<T> results = null;
        if (pageSize != 0) {
            totalItems = ((Number) criteria.setProjection(Projections.rowCount()).
                    uniqueResult()).intValue();
            criteria.setProjection(null);

            criteria.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY);
            criteria.addOrder(Order.desc("id"));

            results = criteria.setFirstResult((page-1) * pageSize).
                    setMaxResults(pageSize).list();
        } else {
            results = criteria.setFirstResult((page-1) * pageSize).
                    list();
            totalItems = results.size();
        }

        ResultPage<T> resultsPage = new ResultPage<T>(results, page,
                totalItems,
                (pageSize != 0) ? pageSize :
                        totalItems);
        if (logger.isDebugEnabled()){
            logger.debug("Total Results: " + resultsPage.getTotalItems());
        }
        return resultsPage;
    } 
```

现在提取是正确的。但是，我的结果计数并不一致。当然，这仅在“提名”分配了超过 1 个用户时才会发生。然后它计算用户而不是根实体，因此我得到的每页总数为“1 到 22”，而不是我指定的“1 到 25” - 好像有 22 个提名但总共有 25 个用户。

我能得到一些帮助吗？让我知道是否需要澄清。

如果有的话，这是与我的问题最接近的问题：[如何在休眠中检索不同的根实体行数？](https://stackoverflow.com/questions/3880538/how-to-retrieve-distinct-root-entity-row-count-in-hiberntae)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:08:39.377

我用于此问题的解决方案是第一个查询仅加载满足条件的根实体的 ID（即您的 25 个提名的 ID），然后发出第二个查询以加载这 25 个 ID 的数据，通过执行如下查询

```
select n from Nomination n 
[... joins and fetches] 
where n.id in (:ids) 
```

# java - 允许在 Web 浏览器上使用 Java 小程序

> ID：10724605
> 
> 赞同：0
> 
> 时间：2012-05-23T17:01:36.040
> 
> 标签：java

我创建了一个想在网络浏览器上运行的小程序。该小程序包含发送电子邮件和使用 URI 打开另一个小程序等功能。

界面工作正常。然而，

这些部分似乎需要许可。

```
...........................................................
    //creating session
    Session session = Session.getDefaultInstance(props, null);
    MimeMessage message = new MimeMessage(session);
    message.setFrom(new InternetAddress(from));

    // to add recipients 
    InternetAddress[] toAddress = new InternetAddress[to.size()];

    // To get the array of recipients addresses
    for( int i=0; i < to.size(); i++ ) { 
        toAddress[i] = new InternetAddress(to.get(i));
    }
    System.out.println(Message.RecipientType.TO);

    //adding recipients
    for( int i=0; i < toAddress.length; i++) { 
        message.addRecipient(Message.RecipientType.TO, toAddress[i]);
    }
    message.setSubject(subject);
    message.setText("This is Zaid's app");

   // check if animation was selected
    if(animation)
     fileName= attachment +".gif";
    else
     fileName = attachment +".JPEG";

    //add the attachment
    MimeBodyPart attachMent = new MimeBodyPart();
    FileDataSource dataSource= new FileDataSource(new File("ScaryImages//"+ fileName));
    attachMent.setDataHandler(new DataHandler(dataSource));
    attachMent.setFileName(fileName);
    attachMent.setDisposition(MimeBodyPart.ATTACHMENT);
    Multipart multipart = new MimeMultipart();
    multipart.addBodyPart(attachMent);
    message.setContent(multipart);

    //this is the sender variable
    Transport transport = session.getTransport("smtp");

    //trying to send...
    try{
    System.out.println("connecting...");
    transport.connect(host, from, pass);

    System.out.println("sending...Please wait...");
    transport.sendMessage(message, message.getAllRecipients());
    transport.close();
    System.out.println("sent");

    JOptionPane.showMessageDialog(null,"Your Email has been sent successfully!");
    }

    catch(Exception e)
    {
        //exception handling, the problem is mainly the connection
        JOptionPane.showMessageDialog(null,"Connection Problem has been detected! Please Try again.");
        e.printStackTrace(System.out);

    }

    //remove loading label anyway
    finally{

        EmailApplet.removeLoadingLabel();
    }
   ....................... 
```

还有这个，

尝试 {

```
 java.net.URI uri = new java.net.URI( arg );
        desktop.browse( uri );
    } 
```

你能告诉我什么许可，我应该在哪里提供？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:09:12.193

如果要在另一个选项卡或窗口中打开新页面，请尝试以下操作：

```
getAppletContext().showDocument(url.toURI(), "_blank"); 
```

**“_self”**在包含小程序的窗口和框架中显示。
**"_parent"**在小程序的父框架中显示。如果没有父框架，则与“_self”作用相同。
**"_top"** 显示在小程序窗口的顶层框架中。如果小程序的框架是顶级框架，则与“_self”作用相同。
**"_blank"** 在一个新的、未命名的顶级窗口中显示。

# javascript - 在这个 jQuery 插件中哪种策略更有意义？

> ID：10724606
> 
> 赞同：5
> 
> 时间：2012-05-23T17:01:37.100
> 
> 标签：javascript, jquery, jquery-plugins

我正在制作一个在页面上显示警报的 jQuery 插件。插件本身将警报标记插入到 DOM 中。由于 jQuery 的方式是让一切都返回`this`以维护链接，因此我遇到了一个有趣的问题，我希望得到反馈。我正在尝试在以下两个选项之间做出决定。

选项一：

```
$("#content").alert('prepend', {type:'error', message:'This is an error'}) 
```

这看起来很简单。`#content`在DOM 元素的开头添加警报。问题是尚不清楚返回的内容。返回刚刚创建的 alert 元素是有意义的，但这与 jQuery 方式背道而驰。

选项二：

```
$("<div>").alert({type:'error', message:'This is an error'}).prependTo("#content") 
```

这种方式看起来不太清晰，不太直观，但它更符合jQuery的做事方式，并且很清楚要返回什么元素。

**那么你会选择哪些选项呢？**我担心的是大多数用户可能不知道你可以做些什么`$('<div>')`来创建一个新元素。另一方面，我不知道任何知名项目的 jQuery 插件方法返回的元素不是它们被调用的元素，但也许有。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:07:21.040

我只是把它放在 jQuery 命名空间中（而不是放在它的原型上）：

```
$.alert({type:'error', message:'This is an error'}).prependTo("#content"); 
```

* * *

此外，您可能会考虑请求选择器/DOM 节点/jQuery 对象，而不是让用户自己预先添加：

```
$.alert({
    parent: '#content', // or $('#content') or document.getElementById('content')
    type: 'error',
    message: 'This is an error'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:09:09.843

如果您的警报系统旨在成为类似弹出窗口或类似模式的系统，则用户不必指定容器。但是，您可以允许他传递一个容器以将您的警报框插入：

```
$.alert({
  type: 'error',
  message: 'This is an error',
  container: $(...) // Optional
}); 
```

它将返回您的插件实例或警报容器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T17:09:16.600

不，jQuery 并不总是返回`this`. 可链接性仅意味着如果您的方法没有结果，您应该返回实例本身。

例如，`clone()`也返回一个新的 jQuery 实例；所以没有什么问题。如果您说“不清楚”，只需记录它，或将方法重命名为例如“ `$.fn.getAlert`”。

但是，您必须选择方法的签名。第一个选项就像为容器设置一个强制参数。如果你想让它成为可选的，你可以让警报系统成为一个静态方法：`$.createAlert(...)`带有一个可选参数。

# html - 如何确保所有图像在不同的浏览器窗口/分辨率中正确对齐？

> ID：10724609
> 
> 赞同：-1
> 
> 时间：2012-05-23T17:01:44.280
> 
> 标签：html, css, alignment

首先，有 3 个单独的图像。一个小鸡，单词“delivery”和“foodstant”我想以这样的方式对齐它们——> [3张图像](http://i418.photobucket.com/albums/pp270/ravenoz_bucket/index1.png) 有没有什么方法可以实现这样的定位，尽管浏览器窗口的大小和分辨率可能会发生变化，但它可以保持不变的位置？

绝对定位和相对定位都有效，但是调整浏览器的大小会搞砸一切。利润似乎无法解决问题.. 或者我只是不太熟练。

HTML代码如下：

```
<!doctype html>

<html>
<head>
    <meta charset="UTF-8"/>
    <title> Foodstant Delivery </title>
    <link rel="stylesheet" type="text/css" media="screen" href="stylo.css" />
    <link rel="shortcut icon" href="favicon.ico" />
</head>

<body>

<figure>
<img id="del" src="images/delivery12.png" alt="Delivery" />
<img id="foo" src="images/foostant2.png" alt="Foodstant" />
<img id="chi" src="images/logochick.png" alt="Chick" />
</figure>

<nav id="hnavbar">
    <ul id="hli">
        <li><a id="home" href="index.html">Home</a></li>
        <li><a id="menu" href="menu.html">Menu</a></li>
        <li><a id="cu"   href="ContactUs.html">Contact Us</a></li>
        <li><a id="au"   href="aboutus.html">About Us</a></li>
        <li><a id="tc"   href="TC.html">Terms & Conditions</a></li>
        <li><a id="job"  href="jobs.html" target="_blank">Jobs</a></li>
        <li><a id="yo"   href="order.html">Your Order</a></li>
    </ul>   
</nav>

</body> 
```

CSS代码如下

```
/* Foodstant Delivery */

* {
margin: 0;
padding:0;
  }
 body { font-family: 'Comic Sans MS',Verdana,Helvetica,Courier New,sans-serif;
background:url("images/bg.jpg");    
   }
   /* home page */
  #hnavbar{
font-size:2em;
margin-top:-13em;
}
  #hnavbar ul li {
    list-style-type:none;       
    width:325px;
    display:inline;
    padding:0 13px 0 13px; 
    }
  #chi {
position:relative;
top:-30em;
left:10em;
       }
  #foo {
position:relative;
top:1em;
left:-11em;
   }
  #del {
position:relative;
top:10.5em;
left:26em;
}
 /* home page */ 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:12:40.537

我最近不得不做一些与此非常相似的事情，一段时间后我决定必须对每个链接使用绝对定位。您的代码的问题在于您似乎不太了解相对定位和绝对定位的工作原理。绝对对象总是相对于它更接近的父设置为“相对位置”。所以你应该试试这个：

```
#hnavbar { position: relative; } //all "absolute" children will be relative to this hnavbar
#home, #menu, ... { position: absolute; } 
```

之后，您应该使用顶部/左侧或底部/右侧属性设置每个绝对定位菜单链接的位置。

对于图片，如果您没有“Foodstant”和“Delivery”的链接，我真的会使用一张图片。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:18:06.887

以百分比指定顶部和左侧的值，而不是“em”。这些百分比将相对于包含这些图像的父元素。或者只使用一个图像而不是 3 个图像并使用图像映射。这里有一个 coupla 在线工具可以做到这一点：

[http://www.mobilefish.com/services/image_map/image_map.php](http://www.mobilefish.com/services/image_map/image_map.php)
[http://www.image-maps.com/](http://www.image-maps.com/)

# c# - 如何为 JArray 的每个项目添加属性？

> ID：10724611
> 
> 赞同：0
> 
> 时间：2012-05-23T17:01:51.853
> 
> 标签：c#

我如何在一行中为 JArray 的每个项目添加一个属性？我正在寻找这样的东西，使用LINQ ...

```
myJArray.Select(item => item.Add("property", "value")) 
```

我会在 Ruby（类似的东西）中这样做：

```
myJArray.each { |item| item.add('property', 'value') } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:25:14.853

假设您使用的是 Json.Net

```
jarray.ToList().ForEach(item => item["property"] = "xx"); 
```

但正如已经说过的，我认为这并不比`foreach`

- 编辑 -

也可以考虑扩展方法

```
jarray.Exec(item => item["property"] = "xx");

public static class MyExtensions
{
    public static void Exec<T>(this IEnumerable<T> list,Action<T> action)
    {
        if (list == null) return;
        foreach (var item in list)
            action(item);
    }
} 
```

# iphone - 从 iPhone 保存到服务器的视频不会通过 MPMovieVideoController 中的 URL 播放

> ID：10724617
> 
> 赞同：1
> 
> 时间：2012-05-23T17:02:07.240
> 
> 标签：iphone, ios, video, mpmovieplayercontroller

我已将 iPhone 中的中等质量视频文件保存到 Google App Engine。使用给定的 URL 可以在网络上正常播放视频。

[http://www.getsplash.com/t/video/wa6Rbzq74WOB](http://www.getsplash.com/t/video/wa6Rbzq74WOB)

这个文件不会在 iPhone 上播放，我只是黑屏。我已经能够很好地播放网络上的其他 .mov 示例文件，所以据我所知，它不是 Objective-C。我想知道 iPhone 存储视频的编码是否与通过 URL 将其拉回不兼容？

我尝试在上面的 URL 中添加扩展名并将内容类型更改为 video/quicktime 无济于事。

```
self.moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:@"http://www.getsplash.com/t/video/wa6Rbzq74WOB"]];
moviePlayerController.view.frame = CGRectMake(0, 51, 320, 240);
[scrollView addSubview:moviePlayerController.view];
[moviePlayerController play] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T20:29:02.517

把答案放在这里。结果证明，解决方案是将“.m4v”添加到文件 URL 的末尾，从而使 MoviePlayerController 能够播放它。我认为仅依靠文件扩展名是 Windows 的失败，而不是 Apple 所依赖的。我们还最终从 Google Cloud Storage 迁移到 AWS，后者对类型和安全性有更多控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:47:25.727

您正在测试什么型号的 iPhone？该视频使用 Baseline 3.0 配置文件编码，我相信它不适用于 3 和 3GS 等旧型号。

# ruby-on-rails - 从已知组件构建图像 url

> ID：10724622
> 
> 赞同：0
> 
> 时间：2012-05-23T17:02:35.120
> 
> 标签：ruby-on-rails

我正在创建一个 Rails 应用程序，当有人搜索某个属性然后单击以查看更多详细信息时，我想向他们展示该属性的属性详细信息和图像。我已经弄清楚了包含所有属性详细信息的表格，并且我已将图像上传到 Amazon S3，但无法弄清楚如何构建图像 url：

数据库中的所有属性在主数据库表中都有一个 sysid，例如 335758034，并且该 sysid 包含在 S3 图像 url 中，并且图像编号附加到该 url 的末尾，因此可以计算出像这样的 url所以：

[https://s3.amazonaws.com/images732/Photo335758034-3.jpeg](https://s3.amazonaws.com/images732/Photo335758034-3.jpeg)

表格中的一列告诉您一个属性有多少图像。所以如果你知道有 5 张图片，我只需要像这样循环遍历它们：

[https://s3.amazonaws.com/images732/Photo](https://s3.amazonaws.com/images732/Photo) + sysid-1.jpeg

[https://s3.amazonaws.com/images732/Photo](https://s3.amazonaws.com/images732/Photo) + sysid-2.jpeg

[https://s3.amazonaws.com/images732/Photo](https://s3.amazonaws.com/images732/Photo) + sysid-3.jpeg

[https://s3.amazonaws.com/images732/Photo](https://s3.amazonaws.com/images732/Photo) + sysid-4.jpeg

[https://s3.amazonaws.com/images732/Photo](https://s3.amazonaws.com/images732/Photo) + sysid-5.jpeg

我怎么做？非常感谢任何帮助，谢谢，亚当

更新：

结果是这样的：

```
<table summary="Property images">
    <% (1..@property.image_count).each do |photo| %>
<tr>
  <td><%= image_tag("https://s3.amazonaws.com/images732/Photo#{@property.sysid}-#{photo}.jpeg") %></td>
</tr>

<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:27:54.420

在 Rails 中，

```
(1..5).each do |n|
  image_tag "https://foo.com/photo/photo-#{n}.jpg"
end 
```

当然，不是像本例中那样遍历范围，您可以直接遍历您想要的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:35:11.250

您可能需要考虑使用回形针来帮助 rails 直接与 S3 通信。您可以创建一个包含照片的表，并将属性记录设置为 has_many :photos。那时很容易引用属性对象上的照片集合。就像是

```
@property.photos.each do |photo|
   image_tag photo.url
end 
```

这样你就可以让 Rails 处理所有的背景内容。有关使用回形针和 s3 的信息，请查看这些

[http://doganberktas.com/2010/09/14/amazon-s3-and-paperclip-rails-3/](http://doganberktas.com/2010/09/14/amazon-s3-and-paperclip-rails-3/)

[http://railscasts.com/episodes/134-paperclip](http://railscasts.com/episodes/134-paperclip)

# java - 在 WAS 7.0 Java 中使用数据源打开 JPA 异常

> ID：10724623
> 
> 赞同：0
> 
> 时间：2012-05-23T17:02:42.733
> 
> 标签：java, openjpa

我在 Open JPA 中遇到异常。

我已经创建了 WAS 数据源。这是我的持久性 XML

http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">

```
<persistence-unit name="App11" transaction-type="JTA">
<provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
<jta-data-source>java:comp/env/jdbc/mydatasource</jta-data-source>  
     <class>vo.Entity</class>
     <properties>
        <property name="openjpa.TransactionMode" value="managed"/>
                <property name="openjpa.ConnectionFactoryMode" value="managed"/>
    </properties>
    </persistence-unit> 
```

我在执行时遇到了这个异常。

使用者：org.apache.commons.lang.exception.NestableRuntimeException：JNDI 查找名称“java:comp/env/jdbc/mydatasource”时出错。在 org.apache.openjpa.lib.conf.Configurations.lookup(Configurations.java:592) 在 org.apache.openjpa.conf.OpenJPAConfigurationImpl.lookupConnectionFactory(OpenJPAConfigurationImpl.java:966) 在 org.apache.openjpa.conf.OpenJPAConfigurationImpl .getConnectionFactory(OpenJPAConfigurationImpl.java:954) 在 org.apache.openjpa.jdbc.conf.JDBCConfigurationImpl.createConnectionFactory(JDBCConfigurationImpl.java:801) 在 org.apache.openjpa.jdbc.conf.JDBCConfigurationImpl.getDBDictionaryInstance(JDBCConfigurationImpl.java:568) ) 在 org.apache.openjpa.lib.conf.Configurations 的 org.apache.openjpa.jdbc.meta.MappingRepository.endConfiguration(MappingRepository.java:1221)。

任何帮助表示赞赏。

谢谢，山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:47:46.540

这是我的问题的解决方案...

我在 web.xml 中错过了这个

jdbc/Mysource javax.sql.DataSource 容器不可共享

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:15:22.520

尝试按照 Websphere Datasource 中的建议使用给定的 JNDI 名称添加`resource-ref`运行[时](https://stackoverflow.com/questions/7167212/how-do-i-connect-to-a-websphere-datasource-with-a-given-jndi-name)`web.xml`描述符文件 ( `ibm-web-bnd.xml`) ？

# ruby - 独角兽对“典型”网站有用吗？

> ID：10724627
> 
> 赞同：0
> 
> 时间：2012-05-23T17:02:50.743
> 
> 标签：ruby, ruby-on-rails-3, heroku, unicorn

我在 Heroku 上有一个小站点，目前正在使用 Thin。我对 Unicorn 有模糊的认识，但从来没有觉得我有符合其“快速客户端”规定的东西。

自述文件和[此](http://www.engineyard.com/blog/2010/everything-you-need-to-know-about-unicorn/)链接表明我们仅在 LAN 上使用 Unicorn（或者可能是 Lambdarail），但似乎很多人将它用于通过普通宽带甚至移动网络访问的典型站点。这是真的？是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:30:35.150

Unicorn 通常用于网络服务器/代理（如 Nginx）后面，它从实际客户端接收 HTTP 连接，提供静态资产并将动态请求转发到后端服务器（Unicorn）。

Web 服务器现在充当 Unicorn 的客户端。因为 Nginx（在大多数情况下是 Apaches mod_proxy）充当存储转发代理。即，他们将首先缓冲完整的响应（或至少与其缓冲区一样多），然后再将其发送给客户端。这非常符合 Unicorn 对快速客户端的定义。它将缓存和向慢速客户端提供数据的艰巨任务交给了网络服务器，这些客户端无论如何都必须这样做，因此可能会做得更好。

它还建议您可能不应该直接面向客户端运行 Unicorn（除非您的客户端快速消耗数据（例如，在具有非拥塞客户端和网络的 LAN 上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:50:11.233

我们在 heroku 上使用 unicorn 并取得了不错的效果。独角兽网站没有区分的是，独角兽服务动态数据与静态资产之间存在差异。如果您将资产服务卸载到 CDN，那么在前面有或没有 nginx 的独角兽没有太大区别。一旦警告这一点 - 原始独角兽很容易受到“故意”慢客户端的攻击，例如可能在 DDoS 或其他黑客尝试中引入。

# android - 如何使用 Mockito 和 Robolectric 模拟上下文？

> ID：10724629
> 
> 赞同：7
> 
> 时间：2012-05-23T17:02:57.537
> 
> 标签：android, unit-testing, mockito, robolectric

这是我的活动片段：

```
public class Search extends Activity
{
    private String TAG = "SEARCH";

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.search);
        Log.d(TAG, "About to call initialastion");
   //        new InitialisationTask(this).execute();
    }
} 
```

有了上面的注释，我可以愉快地创建和执行单元测试，如下所示：

```
@RunWith(RobolectricTestRunner.class)
public class SearchTest {
    private Search searchActivity;
    private Button searchButton;
    private Button clearButton;
    private Button loginButton;
    private Button registerButton;
    private EditText searchEditText;

    @Before
    public void setUp() throws Exception {
        searchActivity = new Search();
        searchActivity.onCreate(null);

        searchButton = (Button) searchActivity.findViewById(R.id.btnPlateSearch);
        clearButton = (Button) searchActivity.findViewById(R.id.btnClearSearch);
        loginButton = (Button) searchActivity.findViewById(R.id.btnLogin);
        registerButton = (Button) searchActivity.findViewById(R.id.btnRegister);
        searchEditText = (EditText) searchActivity.findViewById(R.id.editTextInputPlate);
    }

    @Test
    public void assertSearchButtonHasCorrectLabel()
    {
        assertThat((String) searchButton.getText(), equalTo("Search"));
    }
} 
```

但是，如果我`new InitialisationTask(this).execute();`在我的活动中取消注释该行，我的测试开始失败，很可能是因为对`this`.

模拟上下文的最佳方法是什么？

我试图添加`contextMock = mock(Context.class);`到我的`setUp()`但是我不确定如何将这个模拟设置为“进入”`searchActivity`

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-07-22T14:38:13.497

对于 robolectric 3.0，要获取 Context 对象，您只需使用：

```
RuntimeEnvironment.application.getApplicationContext(); 
```

在上面的代码中，您不必显式创建活动对象并调用它的 onCreate() 方法。Robolectric 可以使用以下方式为您设置活动：

```
searchActivity = Robolectric.setupActivity(SearchTest.class); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-03T10:42:51.307

要获取 Activity 或 Application 的上下文，您可以使用：

```
Robolectric.getShadowApplication().getApplicationContext(); 
```

例如 ：

```
Context context = Robolectric.getShadowApplication().getApplicationContext(); 
```

现在使用上下文变量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-17T03:06:58.357

我正在使用 Robolectric 3.2。这是我使用的：

`ShadowApplication.getInstance().getApplicationContext();`

# python - 将字段传递给用户配置文件的 post_save 挂钩？

> ID：10724630
> 
> 赞同：0
> 
> 时间：2012-05-23T17:02:57.647
> 
> 标签：python, django

我创建了一个用户配置文件，需要将一些参数传递给它以避免`IntegrityError`'s，例如不可为空的字段。我按照页面底部的[此处](http://www.djangobook.com/en/1.0/chapter12/#cn222)所述编写了创建挂钩，但是当我调用 时`create_user`，我收到完整性错误，因为`create_user`它试图保存我刚刚使用未初始化的配置文件创建的用户。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:20:26.500

提供的链接中没有关于如何自动创建用户配置文件的详细信息，所以我不确定您是如何实际设置的。但是，这是典型的方式：

```
def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.get_or_create(user=instance)

signals.post_save.connect(create_user_profile, sender=User) 
```

听起来您的问题是`UserProfile`（或您的等效模型）具有不能为空的附加字段，因此，您希望为这些字段提供值。但是，这根本不可能使用`post_save`信号。通常，配置文件中的所有非字符字段都可以为空或提供合理的默认值，因此，您至少可以在没有特定信息的情况下创建对象。通过您的界面，您可以强制用户填写他们的个人资料，但在数据库级别强制执行此操作并不谨慎。

# python - 使用子进程多次运行程序后出现“WindowsError：[错误 206] 文件名或扩展名太长”

> ID：10724642
> 
> 赞同：7
> 
> 时间：2012-05-23T17:03:48.957
> 
> 标签：python, windows, subprocess, hpc

我的 python 程序在 Windows HPC 2008 环境中准备输入、运行外部 FORTRAN 代码并处理输出。它工作得很好，除非代码在 1042-1045 次之间执行外部程序（通常问题会更早收敛）。在这些情况下，我得到一个例外：

> WindowsError：[错误 206] 文件名或扩展名太长

但是，文件名的路径*不会*随时间增长。它只是清理目录并再次运行。

这是代码：

```
inpF = open(inName)
outF = open(localOutName,'w')
p = subprocess.Popen(pathToExe,shell=False,stdin=inpF,stdout=outF,cwd=runPath)
stdout, stderr = p.communicate()
outF.close()
inpF.close() 
```

pathToExe 是指向 UNC 位置的常量字符串（例如 \\server\shared\program.exe），stdin 是在本地驱动器上以只读模式打开的文件，stdout 是在本地驱动器上以写入模式打开的文件，而 cwd 是 C:\ 驱动器上的本地路径。[根据这篇有点相关的帖子](https://stackoverflow.com/questions/2381241/what-is-the-subprocess-popen-max-length-of-the-args-parameter)，我已经确认 subprocess 的所有参数都不超过 80 个字符，即使限制应该是 32,768 。

我究竟做错了什么？不知何故，有些东西在积累，只有当我跑一千次时才会成为问题。

更新：

为了测试“打开的文件太多”假设，我做了一个非常小的示例，它使用不同的可执行文件运行得非常快。这里的主要区别是标准输入和标准输出在这里只是空文件，而在前一种情况下，它们都是大文件。在这种情况下，代码运行 2000 次就很好，而之前的代码在 ~1042 处失败。所以不仅仅是有那么多文件。也许有太多的大文件打开？

```
import subprocess
for i in range(nRuns):
    if not (i % (nRuns/10.0)):
        print('{0:.2}% complete'.format(i/float(nRuns)*100))
    inpF=open('in.txt')
    outF=open('out.txt','w')
    p = subprocess.Popen('isotxsmerge.exe',shell=False,stdin=inpF,
                                 stdout=outF,cwd='.')
    stdout, stderr = p.communicate()
    outF.close()
    inpF.close() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T19:05:14.150

嗯....实际上，我认为错误消息文本是红鲱鱼。我不确定，但在我看来，发生的事情很可能是您的文件句柄用完了。从各种来源来看，规范文件句柄限制似乎在 2048 个文件左右……奇怪的是在 2 x 1042 个子进程附近。我不知道 windows python 解释器的内部结构，但我的猜测是句柄没有足够快地被垃圾收集，即使你正在关闭文件。再一次……这只是一个猜测……但也许这是另一种思路，可能会引导你做出更有结论性和更有成效的事情。

同时，作为一种变通方法，您可以使用旧的备用方法，方法是拥有一个生成进程的调控器进程，然后生成子进程。中间子进程在它死亡之前有一个确定的生命周期（比如......它产生的子进程不超过 1000 个）。当中间子进程到期时，调速器进程启动一个新的子进程。这是一个黑客......而且是一个笨拙的......但它确实有效。（IIRC，Apache Web 服务器过去对子进程可以处理的请求数量有某种自毁限制。）

无论如何...祝你好运，编码愉快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-29T21:16:32.110

我最近在导出到外部 python 应用程序时偶然发现了这个错误。这是发生错误的示例代码：

```
subprocess.run([sys.executable, script_path, data_str]) 
```

这里 data_str 是一个 JSON 字符串。事实证明，我试图传递的 JSON 字符串太长导致了这个错误。

# visual-studio - 如何为 Visual Studio 脚手架生成的文件设置输出位置？

> ID：10724643
> 
> 赞同：1
> 
> 时间：2012-05-23T17:03:49.350
> 
> 标签：visual-studio, t4, scaffolding

抱歉，如果有人问过这个问题，但我找不到任何文档。这不是一个大问题，只是有点烦恼。

我正在使用 PM 控制台创建存储库，例如

PM> 脚手架存储库 EventItem -DbContextType:SomeContext

问题是存储库被放置在与 EventItem 类相同的位置。不是主要问题，因为我可以移动它，但这是为了提高效率。

还有人知道使用脚手架的良好文档来源吗？我找不到任何解释它的东西。

# salesforce - 将选择列表中的所有值发布到变量 salesforce

> ID：10724649
> 
> 赞同：0
> 
> 时间：2012-05-23T17:04:07.287
> 
> 标签：salesforce, apex-code, visualforce, selectlist

我想根据选择列表的值在控制器中设置一个数组变量。

控制器：

```
public String[] searchFields= new String[]{};

public String[] getSearchFields() { 
    return searchFields;
}

public void setSearchFields(String[] searchFields) {
    this.searchFields = searchFields;
} 
```

视觉力量：

```
<apex:selectList value="{!searchFields}>
     <apex:selectoptions value="{!options}" />
</apex:selectList> 
```

但这不会在控制器的 searchFields 变量中发布 selectList 的所有值。

选项列表由控制器中的 getOptions 方法填充。并且 searchFields 列表中的 yes 值由客户端上的 javascript 修改。

实际上用户不会选择任何值，但列表中的所有值仍然必须发回控制器。要求是这样的

![在此处输入图像描述](../Images/f82caaf28ad1e671cfee36a8946beecc.png)

添加和删​​除按钮触发 javascript 将值从一个列表移动到另一个列表。保存右侧列表中的所有值必须发布到控制器中的数组变量。我希望问题现在更清楚了。任何想法都会有很大帮助

谢谢

# javascript - 如何在 ROR 中创建 json 对象而不创建多维数组

> ID：10724657
> 
> 赞同：1
> 
> 时间：2012-05-23T17:04:27.210
> 
> 标签：javascript, ruby-on-rails, ruby, json

例如，如果我试图创建这样的东西

```
@json = Array.new

for x in 0..1
    y = 2
    @json << ["Id" => x, "Label" => y]
 end
respond_to do |format|
  format.html # index.html.erb
  format.json { render :json => @nodes }
end 
```

这是返回的 JSON：

```
[[{"Id":0,"Label":2}], [{"Id":1,"Label":2}]] 
```

然后，如果我想在 java 脚本中访问它，我必须`array[i][0].id`找到 id。当我应该能够`array[i].id`抓住身份证时。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:14:59.663

你曾经`[]`建立一个哈希，你必须使用`{}`. 并且不要初始化 + 循环 + 推送，这不是惯用的 Ruby。我会写：

```
@json = (0..1).map { |id| {"Id" => id, "Label" => 2} }
#=> [{"Id"=>0, "Label"=>2}, {"Id"=>1, "Label"=>2}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:10:25.973

怎么`@json << {"Id" => x, "Label" => y}`办？

# xml - 在 iFrame 中加载/访问 xml 文件，无需下载

> ID：10724658
> 
> 赞同：0
> 
> 时间：2012-05-23T17:04:27.630
> 
> 标签：xml, iframe

我有一个非常简单的 iFrame，其 src 属性直接指向托管在不同服务器上的 xml 文件（我无权访问它）。加载页面时，它会自动触发此 xml 文件的下载。有什么办法可以**防止**这种自动下载？

我不需要在 iFrame 中呈现/查看 xml 文件的内容，只需尝试访问它并检查网络是否允许我这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:13:29.740

在页面加载时发出 ajax 请求并检查 XML 是否可访问，如果是，则执行您想要的操作。

# c# - 我能否在我的应用中安装其他 TTS 应用无法访问的自定义 SAPI 语音？

> ID：10724667
> 
> 赞同：0
> 
> 时间：2012-05-23T17:05:01.930
> 
> 标签：c#, sapi, text-to-speech, speechsynthesizer

我使用 SAPI 5.x 在 C# 中开发了一个 TTS（文本到语音）应用程序。我想许可或开发我自己的语音配置文件（或语音文件），这些配置文件将专门用于我的应用程序。

也就是说，它不会以与安装常规 SAPI 语音相同的方式安装，因为我不希望其他 TTS 应用程序能够使用语音并且我不希望用户能够在他们的系统控制中选择自定义语音控制板。

可能吗？目前我使用 SpeechSynthesizer.SelectVoice("Microsoft Anna"); 但我需要以某种方式使用 SelectVoice 来使用我自己的“私人”语音文件，该文件与我的应用程序一起安装。

感谢您对此主题的任何建议或帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T21:03:53.383

你可以，但它会涉及一些（非平凡的）编码。[SAPI 通过对象令牌](http://msdn.microsoft.com/en-us/library/ms718134%28v=vs.85%29)定位其对象，对象令牌是 SAPI 用来管理引擎和应用程序之间交互的 COM 对象。

Microsoft 的 ISpObjectToken 的默认实现使用注册表，但您没有义务使用该实现。

如果您有自己的自定义对象令牌实现（并且，第 3 方引擎经常提供自己的对象令牌实现），您可以创建从对象令牌到私有 SR 语音的代码和数据的映射。如果您不公开此对象令牌（即，您没有在注册表中将您的实现注册为 DllRegisterServer 的一部分），那么 SAPI 控制面板将无法创建您的对象令牌的任何实例，因此它不会出现在您的应用程序之外的任何地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:47:00.247

通常 SAPI 将有关可用 TTS 语音或 ASR 语言的信息存储在 Windows 注册表 (HKEY_CURRENT_USER\Software\Microsoft\Speech) 中。

其他 TTS 应用程序将从注册表中获取可用的声音，因此您的声音也将可供他们使用。

没有办法解决这个问题。

也许如果您编写一些代码以在启动应用程序时将语音信息添加到注册表中并在关闭它时将其删除。但这可能有点……有问题（关于访问权限）。

# c++ - 如何在双端队列中使用用户定义的类？

> ID：10724668
> 
> 赞同：0
> 
> 时间：2012-05-23T17:05:13.277
> 
> 标签：c++, stl

```
class Node
{
    int x,y;
    Node *left, *right;
    Node(int x, int y);
    Node();
}; 
```

如何使用它制作双端队列？

```
deque<Node> balBinaryTree; 
```

给我错误

```
syntax error : missing ';' before '<'
error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
error C2238: unexpected token(s) preceding ';' 
```

- -编辑 - -

---编辑---我也应该做

```
 deque<Node> balBinaryTree; 
```

或者

```
 deque<Node*> balBinaryTree; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:07:33.713

```
#include <deque>
std::deque<Node> balBinaryTree; 
```

> 我也应该这样做
> 
> `deque<Node> balBinaryTree;`或者
> 
> `deque<Node*> balBinaryTree;`

你应该自己决定。 `deque<Node>`导致不必要的复制。 `deque<Node*>`导致可能的内存管理问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:41:01.887

```
#include <deque>
#include <memory>
std::deque<std::shared_ptr<Node>> balBinaryTree; 
```

这会为您处理内存管理，这意味着您不必明确地担心内存管理。

注意：您在节点中使用裸指针，所以要小心并确保对象的生命周期比原始指针长，以免泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-29T17:57:24.367

如果您正在使用：

`deque<Node> balBinaryTree`

您可能需要使用 emplace 调用

`balBinaryTree.emplace_back(x,y)` 调用构造函数并同时插入。将避免像您需要那样处理内存管理，`deque<Node*>`并避免发生额外的副本，例如：

```
deque<Node> balBinaryTree;
Node inst_node(10,20); 
balBinaryTree.push_back( inst_node ) 
```

# uml - 一个简单的UML案例

> ID：10724669
> 
> 赞同：0
> 
> 时间：2012-05-23T17:05:14.213
> 
> 标签：uml

我有表格：用户，评论和帖子，说：

1.  一个用户可以有很多帖子和评论
2.  一个帖子可以有很多评论
3.  评论只能由一个用户撰写，并且只能在一个帖子中

那么，我怎样才能在这些表之间建立关系，从而导致没有封闭关系。

这就是我所做的：

```
tbl_user 1 ------ n  Post 
tbl_post 1--------n Comments 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:20:30.757

我认为您的方法很好，但是您还应该建立`tbl_user: 1..n Comment`关系（假设不仅帖子的所有者可以发表评论）以识别评论与其所有者之间的关系。

# objective-c - 无法通过 segue 传递变量

> ID：10724671
> 
> 赞同：0
> 
> 时间：2012-05-23T17:05:30.613
> 
> 标签：objective-c, core-data, ios5, storyboard, segue

我正在用故事板做一些非常简单的核心数据的东西，我可以通过 segue 传递变量，但由于某种原因，这个不允许我。

我正在尝试`BlogDetailsViewcontroller`通过这个电话将这个班级与这个班级联系起来

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{    
    if (segue.identifier == @"User'sBlogList2BlogDetails")
    {
        NSLog(@"this is self.users.sorted %@", self.user.sortedBlogs);

        BlogDetailsViewController *bdvc = segue.destinationViewController;
        bdvc.blog = [self.user.sortedBlogs objectAtIndex:self.tableView.indexPathForSelectedRow.row];
        bdvc.temp = @" this is temp pass";      
    }
} 
```

这是`BlogDetailsViewController`课

```
@class Blog;

@interface BlogDetailsViewController : UITableViewController
{
   NSString *temp;
}

@property(nonatomic, strong) Blog *blog;
@property(nonatomic, strong) NSString *temp;

@end

@implementation

@synthesize blog, temp;

-(void)viewDidLoad
{
    NSLog(@"%@,%@", blog, temp); //comes back as null for both !!
} 
```

对其他班级来说效果很好，我没有做任何不同的事情。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:57:53.417

使用`==`意味着您正在对 segue 标识符进行指针比较，您需要的是

```
if ([segue.identifier isEqualToString:@"User'sBlogList2BlogDetails"]) { 
```

# c# - DevExpress 在 GridControl 的 TextEdit repositoryItem 单元格中选择文本范围

> ID：10724674
> 
> 赞同：1
> 
> 时间：2012-05-23T17:06:06.430
> 
> 标签：c#, winforms, devexpress, xtragrid, gridcontrol

有人知道如何在 GridControl 的 TextEdit repositoryItem 单元格中选择文本范围吗？

以下代码选择单元格的整个文本：

```
gvMemoryMap.FocusedRowHandle = 4;
gvMemoryMap.FocusedColumn = gvMemoryMap.VisibleColumns[1];
gvMemoryMap.ShowEditor();
gvMemoryMap.ActiveEditor.SelectAll(); 
```

但我想选择一个文本范围，就像在 Winforms 控件中所做的 someTextBox.Select(2,5) 一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T06:55:47.403

我得到了与您满足相同要求的[DevExpress 线程。](http://www.devexpress.com/Support/Center/p/Q273875.aspx)根据您的要求检查修改后的代码并遵循以下方法。

投你`ActiveEditor`到`DevExpress.XtraEditors.TextEdit`你就可以像你一样工作`TextEdit Control`。

```
gvMemoryMap.FocusedRowHandle = 4;
gvMemoryMap.FocusedColumn = gvMemoryMap.VisibleColumns[1];
gvMemoryMap.ShowEditor();
(gvMemoryMap.ActiveEditor as DevExpress.XtraEditors.TextEdit).Select(0, 1); 
```

它已经过测试和工作..希望这有帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T06:55:01.113

请使用以下方法：

```
TextEdit textEdit = gvMemoryMap.ActiveEditor as TextEdit;
textEdit.Select(2, 3); 
```

相关帮助主题：[TextEdit.Select(Int32,Int32) 方法](http://help.devexpress.com/#WindowsForms/DevExpressXtraEditorsTextEdit_Selecttopic459)

# database - SQLAlchemy 查询一对多关系链

> ID：10724677
> 
> 赞同：0
> 
> 时间：2012-05-23T17:06:21.697
> 
> 标签：database, sqlalchemy

我正在寻找一种方法来查询 SQLAlchemy 中的一对多关系链。给定以下模型（Base 是声明性基础）：

```
class Book(Base):
    id = Column(Integer, primary_key=True)
    chapters = relationship("Chapter", backref="book")

class Chapter(Base):
    id = Column(Integer, primary_key=True)
    book_id = Column(Integer, ForeignKey(Book.id))
    pages = relationship("Page", backref="chapter", lazy="dynamic")

class Page(Base):
    id = Column(Integer, primary_key=True)
    chapter_id = Column(Integer, ForeignKey(Chapter.id)) 
```

我需要通过它们关联的书查询页面实体（通过章节）。然而，

```
Page.query.filter(Page.chapter.book_id == 1) 
```

在这种情况下不起作用。页面的数量很大（因此`lazy="dynamic"`查询章节时的参数），我不想通过向`book_id`页面表添加一列来反规范化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:08:19.747

```
qry = Page.query.join(Chapter).join(Book).filter(Book.id == 1) 
```

# objective-c - 将类更改为从 UITableViewController 派生，现在应用程序将无法运行

> ID：10724678
> 
> 赞同：0
> 
> 时间：2012-05-23T17:06:42.123
> 
> 标签：objective-c, xcode4, storyboard

我有一个应用程序（使用 Storyboard 的 Xcode 4），在其中为从**UIViewController**派生的 UITableView 创建了一个类。它有点工作，直到我发现我错误地创建了这个类......它应该是从 UITableViewController 派生的。

所以我创建了应有的替换类（UITableViewController），并更改了 Storyboard 中的视图类以匹配新创建的 UITableViewClass 的名称。它构建得很好，但是当我去运行它时，它会因错误而崩溃：

> [UITableViewController loadView] 加载了“BaL-ay-iTG-view-otY-DM-YDS”笔尖，但没有得到 UITableView。

由于这是使用情节提要，因此我无权访问 NIB。除了重写整个应用程序之外，还有什么办法可以解决这个问题？（我尝试了几次“干净”，但无济于事）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:01:53.180

感谢大卫凯恩斯的回答。我很感激！我从上面引用：

> 在界面构建器中检查 UITableViewController 的“-view”出口。它是否指向 UITableView？它是否指向 UIView？它没有任何意义吗？（提示：它应该指向一个 UITableView；其他任何东西都会导致该异常被抛出）。——大卫凯恩斯

# css - 下拉链接在左边？

> ID：10724680
> 
> 赞同：-2
> 
> 时间：2012-05-23T17:07:08.787
> 
> 标签：css, drop-down-menu, menu, hyperlink

任何人都可以看到为什么下拉链接在左侧？ [http://altadorcup.sketchedneo.com/testing/](http://altadorcup.sketchedneo.com/testing/)

如果您将鼠标悬停在游戏指南上，请注意下拉链接框位于左侧而不是中间。

我不确定需要哪一点 css，所以我发布了所有下拉菜单 css

所以我想要，如果有人能看到问题，文本左对齐但框的中间对齐？

```
#navigation ul {
    padding:10px 1px 1px 1px;
    margin: 0;
    list-style: none;
    float:middle; text-align:left;
}
#pad{padding:0px 0px 0px 45px;}
#navigation li {
    float: left;
    position: relative;

}

#navigation a{
     display:block;
    color:#fff;
    text-decoration:none;
    padding:0px 10px;

}

#navigation ul ul{
    position:absolute;
    left:-999em;
    height:auto;
     z-index:497;
    width:129px;
    font-weight:normal;
    margin:0;
    line-height:1;
    border:0;
 background:#8c8c8c;
    padding: 2px;  border:1px solid #ffffff;   border-top:1px solid #ffffff;
    border-bottom-left-radius:6px;
    border-bottom-right-radius:6px;
    -webkit-transition: opacity .5s ease-in-out;
    -moz-transition: opacity .5s ease-in-out;
    -o-transition: opacity .5s ease-in-out;

}
#navigation ul ul ul {
    position:absolute;
    left:-999em;
    height:auto;
    width:129px;
    font-weight:normal;
    margin:0;

    line-height:1;
    border:0;
 background:#8c8c8c;
    padding: 2px;  border:1px solid #ffffff;   border-top:1px solid #ffffff;
    border-bottom-left-radius:6px;
    border-bottom-right-radius:6px;
    -webkit-transition: opacity .5s ease-in-out;
    -moz-transition: opacity .5s ease-in-out;
    -o-transition: opacity .5s ease-in-out;
     z-index:497;

}
#navigation li li {
    width:99px;

    font-weight:bold;
    font-family:helvetica,sans-serif;
    }
#navigation li li a {
    padding:4px 10px;
    width:100px;
    font-size:12px;
    color:#fff;
    }
#navigation li ul ul {
    margin:0px 0 0 0px;
    }
#navigation ul li:hover>ul{ opacity: 1; position:absolute; top:99%; left:0; }
#navigation ul ul li:hover>ul{ position:absolute; top:0; left:100%; opacity: 1; z-index:497; background:#8C8C8C; }

    #navigation a:link,#navigation a:visited, #navigation a:active {
    color: #fff;
    font-weight: normal;
    text-align: left;
    text-decoration: none;
}

#navigation a:hover {
    color: #000;
    font-weight: normal;
    text-align:  left;
    text-decoration: none;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:11:25.700

没有`float: middle`。你需要调整你的绝对定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:12:15.517

他们不是。框中的文本左对齐，而菜单文本居中对齐，给人的印象是下拉菜单在左侧。

# java - Web 应用程序的 Hibernate 会话连接关系

> ID：10724682
> 
> 赞同：1
> 
> 时间：2012-05-23T17:07:17.830
> 
> 标签：java, hibernate

我是hibernate的新手，

从下面的链接，

[休眠会话连接关系](https://stackoverflow.com/questions/3226510/hibernate-session-connection-relationship) 我知道一个休眠会话对象将持有一个连接对象。

所以我的疑问是，如果我在服务器中将连接池大小配置为 10。是否可以仅 10 人同时在应用程序中工作？

如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:16:42.613

部分，是的。这意味着只能同时执行 10 个 SQL 查询。如果 11 个客户端在完全相同的时间访问同一个页面，并且大部分时间都花在了一些长时间运行的 SQL 查询上，那么第 11 个客户端很可能必须等待其余 10 个客户端中的一个完成。

但是，这并不意味着您的应用程序仅限于 10 个会话/客户端！例如，在一个 Web 应用程序中，用户通常会打开一个页面，查看它一会儿，点击一个链接等。如果您的用户花费 9 秒阅读页面并等待 1 秒等待下一页，那么只有 10% 的时间花费在服务器上 - 因此您可以处理 100 个登录用户。

此外，处理请求不仅仅是关于 SQL 查询。来回发送数据，解析，渲染...... - 这一切都需要时间。

所以基本上：您被限制为 10 个并发 SQL 查询，但这意味着可以使用您的应用程序的用户数量增加 10 倍或 100 倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:17:31.177

这是正确的。但这并不限制用户数量为 10，因为在典型的应用程序中，用户点击一个链接，这会导致连接使用几毫秒（加载页面的时间），然后盯着页面持续几秒钟或几分钟。

因此，如果空闲时间与繁忙时间的比率平均为 100，则您可以预期有 1000 个用户共享池中的 10 个连接，一切都应该没问题（这当然是一个近似值，不需要考虑到爆发、长时间的任务等，但你明白了）。

总结一下：用户仅在事务期间使用连接，该连接应该非常短（尽可能短）。这就是使许多并发用户成为可能的原因。

# javascript - 使用 Jquery 调整元素大小时假定有滚动条，而没有滚动条

> ID：10724684
> 
> 赞同：0
> 
> 时间：2012-05-23T17:07:21.163
> 
> 标签：javascript, jquery, html

我在一个页面上有 2 列，一个用于导航的侧边栏和一个用于内容的主列。侧边栏固定在 200 像素，我希望主列是流动的并随着窗口调整大小。除此之外，我在主列中有几行，其中一个是页脚。

我还尝试设置该页脚，以便如果窗口高度大于所有行的大小，则页脚将固定在屏幕底部，并且如果它重新调整大小或开始时小于窗口高度，则其位置将在文档中保持静态。

我有所有这些工作，问题是当我调整窗口大小时，只有当我在每个其他像素上使窗口变小（垂直或水平无关紧要）时

```
$(window).width(); 
```

假设即使没有 1 也有一个滚动条，它只是在那里创建 15px 的空白区域。

**编辑：**

我已经解决了幻影滚动条问题，但现在有一个新问题，将窗口调整得更小会使文档高度变大。看看这里的代码示例：http: [//jsfiddle.net/chasen/kmHj2/1/](http://jsfiddle.net/chasen/kmHj2/1/)

# javascript - 在 IE 9 之前无法运行的 Javascript/jquery 代码。在 FF、Chrome、Safari 中运行良好

> ID：10724688
> 
> 赞同：0
> 
> 时间：2012-05-23T17:07:47.690
> 
> 标签：javascript, jquery, internet-explorer

此代码适用于 FF、Safari、Chrome 和 IE9，但在 9 之前的 IE 中不能 100% 运行。图像的淡入淡出有效，但是当我尝试更改代码悬停部分的文本颜色时不起作用。它让我相信这是代码的 .attr 部分的问题？

我确信有更好的方法可以做到这一点，因此我们将不胜感激。

**编辑**：当我将鼠标悬停在图像上时，第二个 div 中的文本应该会改变颜色。然后，当我将鼠标移出时，文本颜色应该会再次改变。

这是我的javascript代码：

```
<script>
$(document).ready(function(){
$("#boxes li img").fadeTo("fast", 0.6); // This sets the opacity of the thumbs to fade down to 60% when the page loads
$("#text-boxes li").css("color","#f2f2f4");

$("#boxes li img").hover(function(){
$(this).fadeTo("fast", 1.0); // This should set the opacity to 100% on hover
var id = $(this).attr("id");
$("#text-boxes li#"+id).css("color","#333333");

},function(){
$(this).fadeTo("fast", 0.6); // This should set the opacity back to 60% on mouseout
$("#text-boxes li").css("color","#f2f2f4");
});
});
</script> 
```

这是我的html代码：

```
<img src="images/where.png" alt="where would you like to visit first?" /><br>
    <ul id="boxes">
        <li><a href="#"><img id="a" src="images/mom-stories.jpg" /></a></li>
        <li><a href="#"><img id="b" src="images/mom-stories.jpg" /></a></li>
        <li><a href="#"><img id="c" src="images/mom-stories.jpg" /></a></li>
        <li><a href="#"><img id="d" src="images/mom-stories.jpg" /></a></li>
        <li><a href="#"><img id="e" src="images/mom-stories.jpg" /></a></li>
        <li><a href="#"><img id="f" src="images/mom-stories.jpg" /></a></li>
    </ul>

<div style="width:100%;height:80px;background:#f2f2f4;overflow:auto;">
    <ul id="text-boxes" style="padding-top:15px;">
        <li id="a" style="width:147px;text-align:center;">Real mom's sharing<br>real experiences<br>in parenting</li>
        <li id="b" style="width:147px;text-align:center;">Real mom's sharing<br>real experiences<br>in parenting</li>
        <li id="c" style="width:147px;text-align:center;">Real mom's sharing<br>real experiences<br>in parenting</li>
        <li id="d" style="width:147px;text-align:center;">Real mom's sharing<br>real experiences<br>in parenting</li>
        <li id="e" style="width:147px;text-align:center;">Real mom's sharing<br>real experiences<br>in parenting</li>
        <li id="f" style="width:147px;text-align:center;">Real mom's sharing<br>real experiences<br>in parenting</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T17:26:15.367

一个问题可能是您对 ID 的非身份使用。ID 在整个文档中必须是唯一的，但您对图像和列表条目使用相同的 ID（a、b、c...）。

尝试更改列表元素中的 ID 架构（例如，更改为“ `<li id="textboxa">`”、“ `textboxb`”...并相应地更改您的 JavaScript：

```
// in the first hover function
$("#textbox"+id).css("color","#333333"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:11:47.707

由于您没有指定实际问题，我将不得不猜测您发现什么不起作用。

IE8- 不支持不透明度。有一些变通方法，例如使用[过滤器](http://joseph.randomnetworks.com/2006/08/16/css-opacity-in-internet-explorer-ie/)，但我希望 fadeTo 不会像处理 opacity 那样容易地处理过滤器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T17:28:30.327

我可以弄清楚你的确切问题是什么，但我认为它来自其他人所说的不透明能力。

作为不透明度的替代方法，我制作了这个供您检查。这是一个复制`fadeIn()`和`fadeOut()`来自 jQuery 的 CSS。

**现场演示：http:** [//jsfiddle.net/oscarj24/2mVXL/1/](http://jsfiddle.net/oscarj24/2mVXL/1/)

**CSS：**

```
.fadeIn {  
    opacity: 0; /* FX, Safari, GC, Opera, decent browsers */
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)"; /* IE8 */
    filter: alpha(opacity=0); /* IE */
    /* in Safari, FX and Chrome add a fade transition */
    -webkit-transition: opacity .25s linear .1s;
    transition: opacity .25s linear .1s;  
}

.fadeOut { 
    opacity: 1; /* FX, Safari, GC, Opera, decent browsers */
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)"; /* IE8 */
    filter: alpha(opacity=100); /* IE */
}​ 
```

# c++ - 避免 CRT

> ID：10724690
> 
> 赞同：5
> 
> 时间：2012-05-23T17:08:02.580
> 
> 标签：c++, c, stl, crt

在编写 C++ 应用程序时，我通常会限制自己使用 C++ 特定的语言功能。大多数情况下，这意味着尽可能使用 STL 而不是 CRT。

对我来说，STL 比使用 CRT 更加流畅和可维护。考虑以下：

```
std::string str( "Hello" );
if( str == "Hello" ) { ... } 
```

C-Runtime 等价物是：

```
char const* str = "Hello";
if( strcmp( str, "Hello" ) == 0 ) { ... } 
```

就我个人而言，我发现前一个例子更容易看。我更清楚发生了什么。当我编写第一次代码时，我的第一件事总是以最自然的方式编写代码。

我的团队对前一个示例的一个担忧是动态分配。如果字符串是静态的或者已经分配到其他地方，他们认为可能导致碎片或在此处进行浪费分配是没有意义的。我反对这一点的论点是首先以最自然的方式编写代码，然后在证明代码导致问题后返回并更改它。

我不喜欢后一个示例的另一个原因是它使用了 C 库。通常我会不惜一切代价避免它，因为它不是 C++，它的可读性较差，更容易出错，并且存在更多的安全风险。

所以我的问题是，我是否正确避免使用 C 运行时？我真的应该关心编码中这一步的额外分配吗？在这种情况下，我很难判断我是对还是错。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T17:52:17.483

我觉得我的评论[`llvm::StringRef`](http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html)被忽略了，所以我会从中做出回答。

```
llvm::StringRef str("Hello"); 
```

这实质上是设置一个指针，调用 strlen，然后设置另一个指针。没有分配。

```
if (str == "Hello") { do_something(); } 
```

可读，但仍然没有分配。它也适用于`std::string`.

```
std::string str("Hello");
llvm::StringRef stref(str); 
```

但是，您必须小心，因为如果字符串被销毁或重新分配，则 StringRef 变得无效。

```
if (str == stref) { do_something(); } 
```

在适当的地方使用这个类时，我注意到了相当大的性能优势。这是一个强大的工具，你只需要小心它。我发现它对字符串文字最有用，因为它们可以保证在程序的生命周期内持续存在。另一个很酷的功能是您可以在不创建新字符串的情况下获取子字符串。

顺便说一句，有人提议在标准库中添加一个与此类似的类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T17:12:35.440

你在做 C++ 还是 C？这些是完全不同的语言，有着完全不同的思维方式。

如果是 C++：

```
std::string str( "Hello" );
if( str == "Hello" ) { ... } 
```

如果 C：

```
char const* str = "Hello";
if( strcmp( str, "Hello" ) == 0 ) { ... } 
```

不要混合两者。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-23T18:19:01.623

使用实现[Small String Optimization](https://stackoverflow.com/questions/10315041/meaning-of-acronym-sso-in-the-context-of-stdstring)的编译器，我得到以下结果：

```
main    PROC                        ; COMDAT

; 6    : {

$LN124:
  00000 48 83 ec 48       sub    rsp, 72            ; 00000048H

; 7    :    std::string str( "Hello" );

  00004 8b 05 00 00 00
        00                mov    eax, DWORD PTR ??_C@_05COLMCDPH@Hello?$AA@

; 8    : 
; 9    :    if( str == "Hello" )

  0000a 48 8d 15 00 00
        00 00            lea     rdx, OFFSET FLAT:??_C@_05COLMCDPH@Hello?$AA@
  00011 48 8d 4c 24 20   lea     rcx, QWORD PTR str$[rsp]
  00016 89 44 24 20      mov     DWORD PTR str$[rsp], eax
  0001a 0f b6 05 04 00
        00 00            movzx   eax, BYTE PTR ??_C@_05COLMCDPH@Hello?$AA@+4
  00021 41 b8 05 00 00
        00               mov     r8d, 5
  00027 c6 44 24 37 00   mov     BYTE PTR str$[rsp+23], 0
  0002c 48 c7 44 24 38
        05 00 00 00      mov     QWORD PTR str$[rsp+24], 5
  00035 c6 44 24 25 00   mov     BYTE PTR str$[rsp+5], 0
  0003a 88 44 24 24      mov     BYTE PTR str$[rsp+4], al
  0003e e8 00 00 00 00   call    memcmp
  00043 85 c0            test    eax, eax
  00045 75 1d            jne     SHORT $LN123@main

; 10   :    { printf("Yes!\n"); }

  00047 48 8d 0d 00 00
        00 00            lea     rcx, OFFSET FLAT:??_C@_05IOIEDEHB@Yes?$CB?6?$AA@
  0004e e8 00 00 00 00   call    printf

; 11   : 
; 12   : } 
```

看不到一个内存分配！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T17:41:08.623

在幕后，std::string::operator== 表面上是在调用 strcmp。老实说，如果碎片对您来说不是问题，并且您喜欢利用 stl 更易读的语法，那就去使用 stl。如果性能是一个问题并且您分析代码并且您看到 std::string 内部数据的常量分配/释放是一个热点/瓶颈，请在那里优化。如果您不喜欢不一致的编码风格混合 operator==() 和 strcmp，请编写如下内容：

```
inline bool str_eq(const char* const lhs, const char* const rhs)
{
    return strcmp(lhs, rhs) == 0;
}
inline bool str_eq(const std::string& lhs, const char* const rhs)
{
    return str_eq(lhs.c_str(), rhs);
}
inline bool str_eq(const char* const lhs, const std::string& rhs)
{
    return str_eq(lhs, rhs.c_str());
}
inline bool str_eq(const std::string& lhs, const std::string& rhs)
{
    return lhs == rhs;
} 
```

这不应该是真正的宗教对话。两者的工作方式相同。现在如果你看到有人在写

```
std::string str( "Hello" );
if( strcmp(str.c_str(), "Hello") == 0 ) { ... } 
```

或者

```
std::string str( "Hello" );
if( str.compare( "Hello" ) == 0) { ... } 
```

那么你可以就混合风格进行辩论，因为使用 operator== 显然这两种风格都会更清晰

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T18:38:48.367

如果您的团队使用 C++ 编码，您应该使用它提供的所有功能。当然，正确使用 C++ 会注意内存分配（构造函数和析构函数）和更自然的语法（对于 ==、+）。

您可能认为 OOP 样式可能会更慢。但是您必须首先衡量瓶颈是字符串操作。在大多数情况下不太可能。过早的优化是万恶之源。正确设计的 C++ 类不会输给方便编写的 C 代码。

回到您的问题，混合库的最差变体。您可以用 OOP 库替换 C 字符串，但仍然使用老式的 IO 例程和数学。

# android - 将 CursorLoader 生成的 Cursor 列中的字符串放入 EditText

> ID：10724699
> 
> 赞同：0
> 
> 时间：2012-05-23T17:08:35.850
> 
> 标签：android, cursor, android-contentprovider, android-cursorloader

我正在 Honeycomb 上编写一个应用程序，但我的内容提供商的光标遇到了问题。我希望实现一个来自官方记事本示例的简单代码实现的效果：

```
Cursor note = mDbHelper.fetchNote(mRowId);
            startManagingCursor(note);
            mTitleText.setText(note.getString(note.getColumnIndexOrThrow(NotesDbAdapter.KEY_TITLE))); 
```

也就是说，我只是希望将光标当前位置的数据放入 EditText 以便用户可以编辑它。问题是我不知道如何使用 CursorLoader 执行此操作。我不能使用 managedQuery() 因为它已被弃用，无论如何我都必须调用 startManagingCursor() ，它也已被弃用。我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:10:21.007

代替：

```
CursorLoader loader = new CursorLoader(this, FlightBundleProvider.CONTENT_URI_PHASES, projection, "_id = ?", selectionArgs, null);
Cursor cursor = loader.loadInBackground(); 
```

你可以直接得到一个游标：

```
Cursor cursor = this.getContentResolver().query(FlightBundleProvider.CONTENT_URI_PHASES, projection, "_id = ?", selectionArgs, null); 
```

（假设`this`是指上下文）。

[还使用其 ID 获取项目通常由返回单个项目的“content://authority/items/#”形式的 URI 处理，而不是在通常返回多个项目的 URI 上指定选择]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:18:29.620

好的，我找到了答案，现在很明显了。我只是使用了这段代码：

```
String[] projection = { FlightBundleDatabase.ID, FlightBundleDatabase.COL_TITLE };
            String[] selectionArgs = { Long.toString(id) };

        CursorLoader cursorLoader = new CursorLoader(this, FlightBundleProvider.CONTENT_URI_PHASES, projection, "_id = ?", selectionArgs, null);
        Cursor cursor = cursorLoader.loadInBackground();

        if (cursor.moveToFirst()) {
            mPhaseName.setText(cursor.getString(cursor.getColumnIndexOrThrow(FlightBundleDatabase.COL_TITLE)));
        }
        cursor.close(); 
```

现在我只希望游标不会泄漏任何资源，但是 close() 应该处理好，对吧？

# java - 正则表达式拆分指令

> ID：10724702
> 
> 赞同：1
> 
> 时间：2012-05-23T17:08:46.343
> 
> 标签：java, regex

我需要使用`split()`Java 中的方法拆分一行汇编代码。这是一个示例代码：

```
String line = "Add a, b, c";
String[] parts = line.split("[\\s+,]");
System.out.println(Arrays.toString(parts)); 
```

**输出：**

```
[Add, a, , b, c] 
```

我需要输出如下：

```
[Add, a, b, c] 
```

对于以下任何输入：

```
String line = "Add a,b,c";
String line = "Add   a  ,b,c";
String line = "Add a,  b,c";
String line = "Add a,b , c";
String line = "Add a , b , c"; 
```

或任何类似情况。

什么是正确的正则表达式来代替`[\\s+,]`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:10:26.187

以下应该做到这一点：

```
String[] parts = line.split("[\\s,]+"); 
```

您当前的正则表达式恰好匹配一个空格，或恰好一个`+`，或恰好一个逗号。

上述正则表达式匹配一个或多个空格和/或逗号。

不同之处在于 : 的位置，`+`当它出现在字符类中时，它是按字面意思解释的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T17:11:29.350

怎么样`[\\s,]+`？它将匹配一次或多次出现的空格或逗号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T17:28:32.080

尝试以下方式：

**添加 ?([0-9]+) ?, ?([0-9]+) ?, ?([0-9]+) ?"**

**“[添加\1，\2，\3]”**

**([0-9]+)** 应该让它取任何大小的数字

**_?** 应该为可选空间腾出空间

**\1** 应该反向引用第一组 () 找到的值

**\2** " " " " " " " 第二组 ()

**\3** " " " " " " " 第三组 ()

逻辑是合理的，但请确保我的语法正确。

# json - 将 json 数据呈现为 html 的好库或插件是什么？

> ID：10724705
> 
> 赞同：0
> 
> 时间：2012-05-23T17:08:55.953
> 
> 标签：json, jquery-ui, jquery, render

我正在进行 ajax 调用以获取 json 数据。我得到的是这样的：

```
{
    "footerPkg": [
        {
            "hotelRoomPrice": 100,
            "idHolidayPackage": 1,
            "OriginCity": "New York",
            "itineraryHeader": "Trip to New York",
            "name": "Holiday Package 1"
        },
        {
            "hotelRoomPrice": 50,
            "idHolidayPackage": 1,
            "OriginCity": "Los Angeles",
            "itineraryHeader": "Amazing Los Angeles",
            "name": "Holiday Package 2"
        }
    ]
} 
```

我必须像这样显示这个 json 数组数据：

![包裹](../Images/c6f987c18b366729e9a5f3933060d268.png)

是否有**模板引擎**或其他技术，我可以在 json 参数上指定 css 和其他 html 样式，就像我将应用于其他 html 元素一样？

这样的事情会很棒：

（假设 fragment-1 是数组中每个元素的 id）

```
data = array[0];
    <div id="fragment-1">
             <table><tr>
            <td><img src='data.image.path' alt="${data.image.altText}" title="${data.image.title}">
            <div id="overlaytextlistinglayout">
            <b><a>data.itineraryHeader</a></b><br>
            <br><a style="color: #000000 ">data.name</a>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:14:31.363

这对您来说可能是一个很好的选择：[http ://weblogs.asp.net/scottgu/archive/2010/05/07/jquery-templates-and-data-linking-and-microsoft-contributing-to-jquery.aspx](http://weblogs.asp.net/scottgu/archive/2010/05/07/jquery-templates-and-data-linking-and-microsoft-contributing-to-jquery.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T18:29:09.800

我最终使用了[mustache](http://mustache.github.com/)，到目前为止它一直很好！

PS：想将@Jon Friskics 评论标记为答案，但做不到。

# asp.net - Gridview 模板字段数据绑定

> ID：10724706
> 
> 赞同：0
> 
> 时间：2012-05-23T17:08:58.730
> 
> 标签：asp.net, vb.net, gridview, templatefield

我有一个带有以下代码的gridview：

```
<asp:TemplateField HeaderText="Column1">     
    <EditItemTemplate>         
        <asp:Label ID="Label1" runat="server" Text='<%# Bind("Column1") %>'></asp:Label  
    </EditItemTemplate>     
    <ItemTemplate>
        <asp:DropDownList ID="DropDownList1" runat="server" Width="125px">         
    </asp:DropDownList>     
    </ItemTemplate> 
    </asp:TemplateField> 
```

我想绑定一个 sql 语句来填充下拉列表...

从 Table1 中选择 Column1 我会通过后面的代码来执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:12:19.633

如果您愿意，您可以在代码隐藏中执行此操作，或者，如果它适用于您的情况，您可以使用 ObjectDataSource Web 服务器控件。

更多阅读：[ObjectDataSource Web 服务器控件概述](http://msdn.microsoft.com/en-us/library/9a4kyhcx.aspx)

这是一个关于如何将 ObjectDataSource 绑定到下拉列表的示例：[asp.net ObjectDataSource 示例：如何填充 DropDownList](http://asp-net-example.blogspot.com/2008/12/aspnet-objectdatasource-example-how-to_8285.html)

# html - HTML 5 移动设备方向 API：Alpha（指南针）值不指示北

> ID：10724707
> 
> 赞同：2
> 
> 时间：2012-05-23T17:08:59.110
> 
> 标签：html, mobile, accelerometer, device-orientation, magnetometer

以下代码片段中的 alpha 值应根据设备的旋转在 0 到 360 之间变化：

```
window.addEventListener('deviceorientation', function(eventData) {
    var LR = eventData.gamma;
    var FB = eventData.beta;
    var DIR = eventData.alpha;

    deviceOrientationHandler(LR, FB, DIR);
}); 
```

这种变化应该取决于它所面对的风向。为此，该设备使用磁力计/指南针。

当我在 ipad 3 上测试时，我遇到了以下问题：

它从 0 到 360 变化，但以相对的方式变化。页面加载时显示 0，然后在 0 和 360 之间变化。但是当设备旋转并刷新页面时，它再次开始显示 0，然后在这些值之间变化。

因为它应该遵循风向，我试图找出北方在哪里，我需要它以绝对方式而不是相对方式来做到这一点。又名：无论页面加载时设备面向的时间和方向，在面向某处时始终显示相同的值。

这些资源表明 API 应该能够做到这一点：

[html5rocks](http://www.html5rocks.com/en/tutorials/device/orientation/)

和这个：

[W3C](http://dev.w3.org/geo/api/spec-source-orientation.html)

这是一个示例，当面向北方时“方向”应为 0（或至少返回一致的值）：

> html5rocks 页面包含一个示例（ctrl + f 和“试用”）。不能发布超过 2 个 URL

这是指示设备面对的风向的正确方法吗？我需要将它与 Google Maps Api 结合使用。

最后，我知道 Ipad 3 有指南针应用程序，因此该设备应该能够做到这一点。

我很困惑 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-08T07:34:38.400

根据 W3C：

> 无法为三个角度提供绝对值的实现可以改为提供相对于某个任意方向的值，因为这可能仍然有用。在这种情况下，absolute 属性必须设置为 false。否则，绝对属性必须设置为 true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-12T23:05:49.680

这是一个老问题，但由于过去几年的一些变化（浏览器更新），我遇到了同样的问题。有两种方法可以解决这个问题：

**设备方向绝对**

[https://developers.google.com/web/updates/2016/03/device-orientation-changes](https://developers.google.com/web/updates/2016/03/device-orientation-changes)

（适用于 android 上的opera、chrome、maxthon）

**带校准的设备方向**

检查 compass-north 是使用设备运动还是 HTML5 watchLocation 运动

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-06T12:15:57.127

在 Mobile Safari (iOS) 中，alpha 是基于第一次请求设备方向时设备指向的方向。因此，当您在 iPad 显示东方时激活 deviceorientation 侦听器时，东方的 alpha 为 0。要获得正确的指南针方向，您需要在 iOS 上使用 webkit 参数 webkitCompassHeading。所有其他浏览器都接受 alpha 作为指南针方向。为了支持他们所有人：

```
var compassdir;
if(eventData.webkitCompassHeading) {
  compassdir = eventData.webkitCompassHeading;
}
else compassdir = eventData.alpha; 
```

# c# - 使用类方法对查询进行排序

> ID：10724720
> 
> 赞同：0
> 
> 时间：2012-05-23T17:09:49.327
> 
> 标签：c#, linq

我正在尝试在我制作的类中创建一个查询排序方法。

我写了以下内容，希望每当我将查询作为参数传递时，它会为我订购：

```
public static void Ordenar<T>(IEnumerable<T> query, string columna, string orden)
    {
        if (!(String.IsNullOrEmpty(orden) || String.IsNullOrEmpty(columna)))
        {
            if (orden == "ASC") query.OrderBy(x => x.GetType().GetField(columna).GetValue(query));
            if (orden == "DESC") query.OrderByDescending(x => x.GetType().GetField(columna).GetValue(query));
        }
    } 
```

无济于事。我无法让它像这样工作：

```
db.Thingys.OrderBy(x=> x.Name); 
```

我怎样才能“选择”这个我想按一般顺序查询的字段？请帮忙。D：我正在使用 ASP.NET MVC3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:48:41.147

看看[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)的动态 Linq 将允许您指定基于字符串的排序和/或过滤（例如，用于用户输入）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:29:03.660

在不讨论是否*应该*这样做的优点的情况下，这里有一些你的代码有问题的地方。

首先，您需要*返回*LINQ 查询的结果。LINQ 运算符不会改变源序列本身。

其次，该`columna`参数可能对应于序列中*元素*的字段名称，而不是序列本身的名称。因此，您需要调用`GetField`泛型类型`T`和`GetValue`每个元素（分配给`x`参数）。

```
public static IEnumerable<T> Ordenar<T>(IEnumerable<T> query, 
    string columna, string orden)
{
    if (!(String.IsNullOrEmpty(orden) || String.IsNullOrEmpty(columna)))
    {
        FieldInfo orderField = typeof(T).GetField(columna);

        if (orden == "ASC")
            return query.OrderBy(x => orderField.GetValue(x));

        if (orden == "DESC")
            return query.OrderByDescending(x => orderField.GetValue(x));
    }

    return query;
} 
```

# python - 在使用 python 分析文本文件时需要帮助

> ID：10724726
> 
> 赞同：-2
> 
> 时间：2012-05-23T17:10:44.503
> 
> 标签：python

我有一个包含 3 列的文本文件，第一列有字符串，第二列有整数，第三列有浮点数，如下所示：

```
steve   134     0.000010

Harry   133 0.000012

joanne  134 0.000022

steve   135 0.000024

joanne  133 0.000045

steve   133 0.000078

joanne  133 0.000079    

joanne  133 0.000081    

joanne  136 0.000083

steve   134 0.000085

steve   135 0.000087 
```

我想要如下所示的输出：

```
steve   134(count=2,Time interval=0.000085-0.000010),133(count=1,Time interval=0.000078-0.000000),135(count=2,Time interval=0.000087-0.000024),136(count=0, Time interval=0.000000-0.000000)

harry   134(count=0, Time interval),133(count=1, Time interval),135(count=0, Time interval),136(count=0, Time interval)

joanne  134(count=1, Time interval),133(count=3, Time interval),135(count=0, Time interval),136(count=1, Time interval) 
```

[harry 和 joanne 的时间间隔计算方法与 steve 相同]。

基本上，如果我选择 steve，我必须计算每个 steve 有多少个 133,134,135,136 条目，以及 133,134,135,136 发生在什么时间间隔内。我希望你们能得到我的询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:55:29.473

这应该让你开始

```
>>> from collections import defaultdict
>>> names = defaultdict(list)
>>> with open('f.txt') as f:
...    lines = [l.split() for l in f.readlines() if l.strip()]
...    for l in lines:
...      names[l[0]].append([l[1],l[2]])
>>> for i in names.iteritems():
...    print i
... 
('steve', [['134', '0.000010'], ['135', '0.000024'], ['133', '0.000078'], ['134', 
'0.000085'], ['135', '0.000087']])
('joanne', [['134', '0.000022'], ['133', '0.000045'], ['133', '0.000079'], ['133', '0.000081'], ['136', '0.000083']])
('Harry', [['133', '0.000012']]) 
```

# sql - sql连接函数

> ID：10724727
> 
> 赞同：3
> 
> 时间：2012-05-23T17:10:46.543
> 
> 标签：sql, function, join

这基本上是一个数据库连接问题，但它需要使用列名到列名的映射组件，这让我很困惑。

我有多个调查表；为简单起见，假设我有两个，一个来自 2010 年（称为“d2010”），另一个来自 2011 年（称为“d2011”）。行对应于调查，列（我们可以假设命名为'c1'、'c2'、'c3'、...'cN'）对应于对问题的回答。所以，“d2010”看起来像

```
 id  c1  c2  c3  .. cX
survey 1
survey 2
survey 3
...
survey N 
```

而“d2011”看起来像

```
 id  c1  c2  c3  .. cY
survey 1
survey 2
survey 3
...
survey N 
```

主要目标是展示从 2010 年到 2011 年针对特定问题的回答如何变化。具体来说，我的目标是创建 SQL 命令来创建新表（包含三列），以针对特定响应显示两年之间的调查有何不同：

```
 id  2010-response  2011-response
survey 1
survey 2
survey 3
...
survey N 
```

如果列名保持一致，那么我需要的只是简单的

```
select d2011.id, d2010.c1 as 'last year', d2011.c1 'this year' from d2010 join d2011 on d2010.id=d2011.id; 
```

不幸的是，创建表的人并没有保持列名一致。例如，

```
c1 of 2010 corresponds to c2 of 2011
c2 of 2010 corresponds to c1 of 2011
c3 of 2010 corresponds to c3 of 2011
c4 of 2010 corresponds to c7 of 2011
... 
```

所以我一直在尝试做的是输入类似的东西

```
select d2010.id, d2010.c1 as 'last year', d2011.f(c1) 'this year' from d2010 join d2011 on d2010.id=d2011.id; 
```

其中“d2011.f(c1)”表示使用将 2010 年的列名映射到 2011 年的列名的函数。该映射不够简单，无法用数学公式表示，所以我假设我需要一个表喜欢

```
2010  2011
  c1    c2
  c2    c1
  c3    c3
  c4    c7 
```

有没有办法在 SQL 中表达我需要的连接操作？也就是说，使用映射表，有没有办法将以下内容转换为标准 SQL（一般）和 SQLite（特别是）？

```
select d2011.id, f(d2010.c1) as 'last year', d2011.c1 'this year' from d2010 join d2011 on d2010.id=d2011.id;.id; 
```

首先十分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:27:50.880

您基本上正在寻找一种将列名存储在表中并在将来的查询中使用这些列名的方法。不幸的是，我相信您需要使用动态 SQL。一个例子：

```
declare @SQL nvarchar(1024)
set @SQL = 'select * from Table'
exec sp_executeSQL @SQL 
```

因此，使用您的映射表，可以返回“映射”列名并声明您的连接：

```
 declare @SQL nvarchar(1024)
    declare @mappedColumnName nvarchar(1024)

    select @mappedColumnName = 2011 from mappedTable where 2010 = 'c1'

    set @SQL = 'select *
    from d2010 join d2011 on d2010.id=' + @SQL + ';.id';

    exec sp_executeSQL @SQL 
```

如果您可以使用，我最近使用的另一种方法是 .NET 中的实体框架。这允许您使用反射在 LINQ 查询中动态选择列名。

这两种方法对我来说都感觉“肮脏”，但这是对设计这些表格的人的反映。最好将它们导出到 Excel 进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:29:48.780

您的问题似乎并不完全清楚。. . 你可以这样加入：

```
select d2011.id, d2010.c2 as 'last year', d2011.c1 'this year'
from d2010 join d2011 on d2010.id = d2011.id 
```

无法在标准 sql 中动态指定列。动态 SQL 确实为您提供了这种能力。

我怀疑您想要做的最容易做到的是将两个表格列列表放入 Excel，将它们并排放入两列，然后使用 Excel 函数构建 SQL 语句。

# iphone - 使 UIView 全屏显示的问题

> ID：10724729
> 
> 赞同：1
> 
> 时间：2012-05-23T17:10:52.667
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在尝试制作 UIView 全屏，但问题是我的视图没有覆盖所有屏幕这是我的代码：

```
 PDFView.frame = [[UIScreen mainScreen] applicationFrame];
    PDFView.frame = self.view.bounds;
    [PDFView setNeedsLayout]; 
```

![在此处输入图像描述](../Images/de3cb21b2ba8f27fe5dc61325df6b907.png)

我的应用程序仅在纵向模式下运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:53:05.840

不覆盖全屏是否意味着导航栏和/或标签栏仍然存在？如果是这样，请检查以确保您已在视图控制器 viewDidLoad 中完成这些操作。

```
[[UIApplication sharedApplication] setStatusBarHidden:YES];    
 [self.navigationController setNavigationBarHidden:YES]
 [self.tabBarController.tabBar.hidden = YES] 
```

这些应该处理任何会阻止您的全屏的事情。

# jquery - asp.net 用户控件下拉 selectedindex 和 selectedvalue 为空

> ID：10724734
> 
> 赞同：0
> 
> 时间：2012-05-23T17:11:22.130
> 
> 标签：jquery, asp.net, drop-down-menu, user-controls, selectedindex

我正在编码一个新的用户控件下拉我的代码是

```
 <%@ Control Language="C#" AutoEventWireup="true" CodeFile="StylishDDL.ascx.cs" Inherits="JDropDown.Controls_StylishDDL" %>   
     <script src="Jquery/jquery-1.3.2.min.js" type="text/javascript"></script>
        <script src="Jquery/jquery.selectbox-0.5.js" type="text/javascript"></script> 
        <script type="text/javascript">
                    $(document).ready(function () {
                        $('#ddlStytlish').selectbox();
                    });
        </script>
        <asp:DropDownList ID="ddlStytlish" runat="server" ClientIDMode="Static">
        </asp:DropDownList>

namespace JDropDown
{
    public partial class Controls_StylishDDL : UserControl
    {
        public string _selectedvalue = "";
        public int _selectedIndex = 0;
        public Controls_StylishDDL( )
        {

        }
        public Controls_StylishDDL(int selectedIndex , string selectedval)
        {
            SelectedIndx = selectedIndex;
            SelectedVal = selectedval;
        }

        public string SelectedVal
        {
            get
            {
                _selectedvalue = this.ddlStytlish.SelectedValue;
                return _selectedvalue;
            }
            set { _selectedvalue = value; }
        }

        public int SelectedIndx
        {
            get
            {
                _selectedIndex = this.ddlStytlish.SelectedIndex;
                return this._selectedIndex;
            }

            set { this._selectedIndex = value; }
        }
        protected void Page_Load(object sender, EventArgs e)
        {
            this.ddlStytlish.AutoPostBack = false;
            LoadStates();
        } 
```

当我使用此控件时，它工作正常，除了它的选定索引始终为 0 并且选定的值始终为空 我如何维护它的索引和值

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-23T17:40:36.863

对于用户控件，有两种选择来保持状态：

1.  用户控件属性只是其中包含的控件属性的包装器（保持其状态）

2.  用户控件保持自己的状态

在这种情况下，用户控件（它更像是另一个控件的包装器）正在从 get {} 的下拉列表中读取一些属性，但不会将它们设置回 set {}。一种选择是：

```
public string SelectedVal
{
    get
    {
        _selectedvalue = this.ddlStytlish.SelectedValue;
        return _selectedvalue;
    }
    set 
    { 
        _selectedvalue = value; 
        this.ddlStytlish.SelectedValue = value; 
    }
} 
```

另一种选择是保留用户控件的属性，就像本视频中解释的那样：

[http://www.asp.net/web-forms/videos/how-do-i/how-do-i-persist-the-state-of-a-user-control-during-a-postback](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-persist-the-state-of-a-user-control-during-a-postback)

# bash - 如何用我自己的 bash 脚本编写？

> ID：10724735
> 
> 赞同：1
> 
> 时间：2012-05-23T17:11:22.753
> 
> 标签：bash

我有一个 bash 脚本，想在其中写一些东西以备下次使用：

```
#this get the full path of the script
SCRIPT="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )/$(basename $0)"

NUMBER=10

#This change only in the first occurrence 
cat "$SCRIPT" | sed "1,/NUMBER=../s/NUMBER=../NUMBER=$((NUMBER + 1))/" > "$SCRIPT" 
```

我遇到的问题是它产生一个空文件。我可以用您自己的代码覆盖我的 bash 脚本吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T17:21:40.900

> ```
> cat "$SCRIPT" | ... > "$SCRIPT" 
> ```

不要这样做。它只会导致痛苦和痛苦。如果可以的话，**根本**不要编写自修改代码。但如果必须，请先写入临时文件，然后重命名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:29:21.577

使用临时文件可以保存情况：

```
#this get the full path of the script
SCRIPT="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )/$(basename $0)"

NUMBER=10

#This change only in the first occurrence 
sed "1,/NUMBER=../s/NUMBER=../NUMBER=$((NUMBER + 1))/" "$SCRIPT" > temp.tmp
cat temp.tmp > "$SCRIPT"
rm temp.tmp 
```

但是如果有一种方法可以在没有临时文件的情况下解决问题，那真的很有趣:)

# ruby - 做很多很多不同的 gsub 操作的最快方法是什么？

> ID：10724738
> 
> 赞同：2
> 
> 时间：2012-05-23T17:11:38.547
> 
> 标签：ruby, regex, gsub

我正在将数以万计的文档从一种标记格式（显然是 RUNOFF 的一些后代，我有最少的文档）转换成我可以提供给 LaTeX 的东西。此过程的一部分涉及在每个文档中搜索在旧标记格式中具有特殊含义的每个字符串，并将其替换为适合 LaTeX 的字符串。有数百个。到目前为止，我的两个想法是将每个都作为单独的 gsub 或使用将匹配（通过 ORing）许多符号的正则表达式制作 gsub，然后将匹配传递给带有大 case 语句的方法，该语句将通过返回适当的替换。从表面上看，第二种方法减少了必须扫描每个文档的次数，但正则表达式中 OR 的开销可能更昂贵。

以下是我描述的两种方式的示例。他们可能不完美。只是想表达我的意思。

方法一：

```
output.gsub!(/a<-"/, '\\"{a}') # ä
output.gsub!(/a<-^/, '\\^{a}') # â
output.gsub!(/a<-~/, '\\~{a}') # ã
...etc 
```

方法二：

```
output.gsub!(/a<-"|a<-^|a<-~|etc/) {|match| convert_symbol(match)}

def convert_symbol(input)
  case match
  when 'a<-"'
    '\\"{a}' # ä
  when "a<-^"
    '\\^{a}' # â
  when "a<-~"
    '\\~{a}' # ã
  when 'etc'
    '\\LaTeX...etc'
  end
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T17:27:16.517

哇，这么多文件。但我认为，如果我这样做，我不会担心程序的效率如何。电脑又快又便宜，而且不介意整夜跑。

实际上，我认为我不会在一般情况下打开代码（连接到程序中）正则表达式。我想我会将替换项放入一个平面文件或 YAML 文件中，并且只将那些需要状态的表达式或功能构建到程序中。

因此，如果我需要记住一个标记，我可能会在其中构建表达式，或者在一个充满转码表达式的 YAML 文件中标记它……我最担心的是我的程序结构的好坏。我会尽量减少摆弄它和运行测试的时间，至少一开始不用担心它的运行速度。

特别是，这个程序一旦完成，每个文档只运行一次。因此，它并不是仔细优化速度的好选择。此外，由于它运行一次，然后你必须永远接受它的决定，我认为你的重点应该放在保真度而不是速度上。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-23T17:30:35.027

```
{ /a<-"/ => '\\"{a}', 
  ... 
}.each { |find, replace| output.gsub! find, replace } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T17:32:23.600

这些都是相同的通用格式吗？然后你可以简单地

```
output.gsub!(/([aeiouy])<-(["~^])/, '\\\2{\1}') 
```

...假设 Ruby 在 等中有反向引用`\1`（`\2`对不起，对语言不太熟悉）。

# php - 使用PHP从android连接mysql

> ID：10724742
> 
> 赞同：0
> 
> 时间：2012-05-23T17:12:07.963
> 
> 标签：php, android, mysql, json

包含以下代码的 php 文件可能存在问题：

```
 <?php
mysql_connect("localhost","root","");
mysql_select_db("deal");
$sql=mysql_query("select * from CITY");
while($row=mysql_fetch_assoc($sql))
$output[]=$row;
print(json_encode($output));
mysql_close();
?> 
```

检索数据库中所有城市的简单代码。我将此文件位于：C:\Program Files\EasyPHP-5.3.9\www\city.php

java代码很简单，连接并显示查询结果：

```
package com.udios.mysql;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.net.ParseException;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Toast;

public class MySQLActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void onTestClick(View view) {
        /*Toast.makeText(MySQLActivity.this, "Test Pressed", Toast.LENGTH_SHORT)
                .show();*/

        this.runOnUiThread(new Runnable() {

            @Override
            public void run() {
                String result = null;

                JSONArray jArray;
                InputStream is = null;
                StringBuilder sb = null;
                try {
                    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
                    HttpClient httpclient = new DefaultHttpClient();
                    HttpPost httppost = new HttpPost("http://127.0.0.1/city.php");
                    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                    HttpResponse response = httpclient.execute(httppost);
                    HttpEntity entity = response.getEntity();
                    is = entity.getContent();

                    BufferedReader reader = new BufferedReader(
                            new InputStreamReader(is, "iso-8859-1"), 8);
                    sb = new StringBuilder();
                    sb.append(reader.readLine() + "\n");

                    String line = "0";
                    while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                    }
                    is.close();
                    result = sb.toString();

                    int ct_id;
                    String ct_name;
                    Toast.makeText(getBaseContext(), "result is: "+result,
                            100).show();
                    jArray = new JSONArray(result);
                    JSONObject json_data = null;
                    for (int i = 0; i < jArray.length(); i++) {
                        json_data = jArray.getJSONObject(i);
                        ct_id = json_data.getInt("CITY_ID");
                        ct_name = json_data.getString("CITY_NAME");

                        Toast.makeText(getBaseContext(), Integer.toString(ct_id)+" : " +  ct_name , 
                                Toast.LENGTH_LONG).show();

                    }
                } catch (JSONException e1) {
                    Toast.makeText(getBaseContext(), "No City Found",
                            Toast.LENGTH_LONG).show();
                } catch (ParseException e1) {
                    e1.printStackTrace();
                } catch (Exception e1) {
                    e1.printStackTrace();
                }

            }
        });

    }
} 
```

当我尝试直接在浏览器中访问时：

我得到： 注意：未定义的变量：第 7 行 C:\Program Files\EasyPHP-5.3.9\www\city.php 中的输出 null

我在 android 中调试，这一行抛出异常：(last catch)

```
HttpPost httppost = new HttpPost("http://127.0.0.1/city.php"); 
```

如果我将其更改为 10.0.2.2 它会在这一行中引发异常：

```
HttpResponse response = httpclient.execute(httppost); 
```

我真的尝试了所有组合，有人可以帮助我吗？非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:45:40.217

第一次向`$output`其中添加行是未定义的。

在 PHP 代码中的 while 循环之前添加它。

```
$output = array(); 
```

如果您在模拟器上运行，您还需要连接 10.0.2.2，或者在真实设备上连接本地 IP（确保设备通过 WiFi 连接到您的网络）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:27:31.623

您的 HttpPost 正在尝试连接正在运行的手机。它需要指向运行您的服务器的计算机。127.0.0.1 = 这个设备。

# javascript - JavaScript 中的原型和继承没有按我预期的那样运行

> ID：10724743
> 
> 赞同：0
> 
> 时间：2012-05-23T17:12:10.960
> 
> 标签：javascript, inheritance

我一直在学习 JavaScript 中的类、原型的使用以及如何继承。

据我了解，以下应该：

1.  因`myInstance.getIt();`被呼叫而提醒“John”
2.  因`myInheritedInstance.getIt();`被呼叫而提醒“杰克”
3.  `myInheritedInstance.getParent();`已分配到`.getIt()`MyClass
4.  这应该会在 myInheritedInstance.getParent(); 时提醒“John”。叫做。

相反，实际发生的是：

1.  警报“约翰”
2.  警报空白
3.  提醒“杰克”

我有一种感觉，我做了一些愚蠢的事情或误解了这里的基本概念，所以任何帮助将不胜感激。

```
var MyClass = function() { };

MyClass.prototype.constructor = MyClass;
MyClass.prototype.name = "John";
MyClass.prototype.getIt = function () { alert(this.name); };

var myInstance = new MyClass();
myInstance.getIt();

//Now inheritance

var MyInheritedClass = function () { };
MyInheritedClass.prototype = new MyClass;
MyInheritedClass.prototype.constructor = MyInheritedClass;
MyInheritedClass.prototype.name = "Jack";
MyInheritedClass.prototype.getIt = function () { alert(this.name); };
MyInheritedClass.prototype.getItParent = MyClass.prototype.getIt.call(this);

var myInheritedInstance = new MyInheritedClass();
myInheritedInstance.getIt();
myInheritedInstance.getItParent(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:18:14.660

罪魁祸首是：

```
MyInheritedClass.prototype.getItParent = MyClass.prototype.getIt.call(this); 
```

`.call`将*调用*一个函数，而不是*返回*一个。所以它会导致两个问题：它预先调用它，并返回一些不可调用的东西（你在控制台中得到一个错误）。你必须这样做：

```
MyInheritedClass.prototype.getItParent = function() {
    alert(Object.getPrototypeOf(Object.getPrototypeOf(this)).name);
}; 
```

问题是`name`不再可以通过它访问`this`，因为它已被继承的类所掩盖。要获得`name`原始类，您必须沿原型链向上走两次：`inherited instance -> inherited prototype -> original prototype`.

线

```
MyClass.prototype.constructor = MyClass; 
```

顺便说一句，这里没有必要。`constructor`如果您覆盖，则需要恢复`prototype`，因为`constructor`在这种情况下会丢失。所以在你的情况下，只有继承的类才有必要。

另外，线

```
MyInheritedClass.prototype.getIt = function () { alert(this.name); }; 
```

是多余的，它和`MyClass.prototype.getIt`你继承的一样。

请注意，JavaScript 没有真正的“类”，尽管它们的行为可以像这样完成。

# php - iframe中父窗口的GET变量问题

> ID：10724749
> 
> 赞同：0
> 
> 时间：2012-05-23T17:12:26.550
> 
> 标签：php, iframe, get

我有一个带有 URL 的父窗口：`http://example.com?val=test`

在该页面的 iframe 中，我需要`val`附加到链接。

目前我正在 iframe 中执行此操作：

```
<?php
$val = $_GET['val'];
?>
<a href ="http://example.com/link.html?val=<?php echo $val ?>">Link</a> 
```

输出包含额外内容`/`，`'`如下所示：
`http://example.com/link.html?val=\'test\'`

有没有办法正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:21:54.183

试试这个：

```
$val = trim(stripslashes($_GET['val']),"'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:22:20.633

您正在经历 PHP 魔术引号的痛苦。您应该关闭它们（首选）或去掉斜线。有关详细信息，请参阅[http://php.net/manual/en/security.magicquotes.php](http://php.net/manual/en/security.magicquotes.php)。

要完全禁用它们，请将其放入您的 php.ini 文件中

```
; Magic quotes for incoming GET/POST/Cookie data.
magic_quotes_gpc = Off
magic_quotes_runtime = Off
magic_quotes_sybase = Off 
```

要从 $_GET 变量中删除它们，请使用 stripslashes。

```
<?php
// from http://www.php.net/manual/en/security.magicquotes.disabling.php#91585
if (get_magic_quotes_gpc()) {
    function stripslashes_gpc(&$value)
    {
        $value = stripslashes($value);
    }
    array_walk_recursive($_GET, 'stripslashes_gpc');
    array_walk_recursive($_POST, 'stripslashes_gpc');
    array_walk_recursive($_COOKIE, 'stripslashes_gpc');
    array_walk_recursive($_REQUEST, 'stripslashes_gpc');
}
?> 
```

# google-chrome - 我需要重新启动 chrome 才能使用此扩展程序。为什么？

> ID：10724750
> 
> 赞同：0
> 
> 时间：2012-05-23T17:12:26.893
> 
> 标签：google-chrome, google-chrome-extension

清单.json：

```
{
 "background_page": "background.html",
 "browser_action": {
 "default_icon": "icon-128.png"
 },
 "name": "testtt",
 "description": "testttttttt",
 "icons": {
     "16": "icon-16.png",
     "48": "icon-48.png",
     "128": "icon-128.png" },
 "permissions": [
     "tabs",
     "http://*/*",
     "https://*/*"
 ],
 "version": "0.1"
} 
```

背景.html：

```
<script>
    chrome.browserAction.onClicked.addListener(function(tab) {
        chrome.tabs.executeScript(tab.id, {file: "bookmarklet.js"})
    });
</script> 
```

书签.js：

```
alert("hello"); 
```

当我安装这个扩展时，右上角的按钮不起作用。所以我需要重新启动 chrome 才能让它工作。为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:58:26.693

在这方面就像一个魅力。

如果您在`chrome://...`页面上单击按钮，它应该会失败。但是你可以这样修复`background.html`：

```
<script type="text/javascript">
    chrome.browserAction.onClicked.addListener(function(tab) {
        if(typeof(tab)!=='object' || tab.url.toLowerCase().indexOf('chrome://')===0) return;
        chrome.tabs.executeScript(tab.id, {file: "bookmarklet.js"})
    });
</script> 
```

已测试 19.0.1084.46（官方版本 135956）m

# iphone - SBJsonBase 类的接口定义重复？

> ID：10724751
> 
> 赞同：1
> 
> 时间：2012-05-23T17:12:31.660
> 
> 标签：iphone, xcode, json, facebook-ios-sdk

我将 Facebook sdk 代码添加到我的项目中，然后出现此错误，因为我已经有一个 json 库，因此我从计算机和项目中删除了 Facebook json 库，但仍然出现此错误。我在整个项目中搜索“@interface SBJsonBase”，但只得到一个结果。当我只有一个界面时，怎么能说它是重复的？是否包含两次文件？搜索不是总能找到一切吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:44:55.800

这可能有帮助吗？删除您的派生数据并做一个干净的项目，然后尝试再次构建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:01:40.200

我有一个类似的问题。这是一个小的搜索，但我可以在不创建新项目等的情况下解决它......问题是我有一个导入 A 类的 B 类。然后我有一个导入 B 类和 A 类的类。当我这样做了，就出现了这些问题。例如。SOAP Web 服务类导入通过 Web 传递的所有实体。

类 goToSchoolWebservice。

# 导入“person.h”

# 导入“学校.h”

...

然后我有一个用于缓存的 Singleton 类，该类具有 Logged in Person 以及对 webservice 类的引用。

# 导入“person.h”

# 导入“goToSchoolWebservice.h”

--> 这是哪里出错了！！因此，请注意这些循环引用。它不是那么容易检测到它们！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:00:02.727

如果您使用#include 而不是导入，则使用此技术来最大程度地减少重复项：在界面的开头（实际上就在它之前）检查定义，如果未定义，则定义它并继续定义您的界面。这是一个例子：

```
 #ifndef __NetworkOptionsViewController__H // check if this has every been imported before
 #define __NetworkOptionsViewController__H

#import "blahblah.h"

 @interface NetworkOptionsViewController : UITableViewController

 {

NSMutableArray* somevariable1;
int somevariable2;

 }
 @end

 #endif 
```

- 就我个人而言，我收到了这个错误，因为我班级的文件路径错误。我检查了文件检查器，我的类文件没有在 Classes 文件夹中定义，即使 IDE 说是。我删除了它们并再次复制它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-17T10:10:37.847

对于那些仍然收到此错误的人，尽管遵循了标头导入约定：我在导入已从项目中删除的标头时收到此错误。相反，在我的项目的旧备份中找到了丢失的标头（我在 Git 中做一些破坏性的事情之前所做的），并且该文件导致了循环导入。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-06-20T03:34:42.690

我通过将所有导入移动到前缀头文件解决了类似的问题。

# sql - 如何在 Delphi 中编写数据透视表？

> ID：10724756
> 
> 赞同：1
> 
> 时间：2012-05-23T17:12:57.860
> 
> 标签：sql, delphi, ms-access, database-design

我正在同时学习数据库（通过 Access）、db 的编程接口（通过 Delphi）以及将两者链接起来（通过 MS 的 SQL）——所以请原谅新手在这里的任何困惑......我正在使用教师的成绩簿作为帮助我学习的例子。我理解学生和他们的作业成绩之间的关系是多对多的。我可以设置底层表和关系，我可以查询底层数据库。

我想不通的是如何以通常在电子表格中的方式显示/报告学生和成绩 - 学生在行中，作业在列中，成绩在单元格中 - 添加了作业的附加点随着课程的进行；在规划数据库字段时，不知道所有分配。

一种解决方案可能等同于 MS 的数据透视表概念。用德尔福很容易做到这一点吗？是否存在更简单的替代方案？（也许以某种方式制作一个单独的表格，其中包含学生姓名和个人作业名称的字段？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:27:30.160

打开 Access，从查询向导创建一个新查询，然后选择交叉表查询向导。这种努力应该可以帮助您了解 Access 数据透视查询功能；Access 中没有数据透视*表*之类的东西。找出您需要的 Access 查询，然后找出如何从 Delphi 打开该 Access 查询。此时您的问题是关于 Access 的，而 Delphi 只是偶然的。

# sql-server - 如何查询包含的行 在一列？

> ID：10724758
> 
> 赞同：2
> 
> 时间：2012-05-23T17:13:09.340
> 
> 标签：sql-server, database, corruption

我有一个 SQL 表，其中一些列在 SQL Server 管理器中查看时包含`<Unable to read data>`. 有谁知道怎么查询`<Unable to read data>`？我可以使用 单独修改此列中的数据`update table set column = NULL where key = 'value'`，但是如何找到这些不良数据是否存在其他行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T08:38:39.217

我建议不要替换数据。它没有任何问题，只是 SSM 无法*在编辑面板中*正确显示它。根据您的描述，数据库本身的数据非常好。

此脚本显示了问题：

```
create table test (id int not null identity(1,1) primary key, 
    large_value numeric(38,0));
go

insert into test (large_value) values (1);
insert into test (large_value) values (12345678901234567890123456789012345678);
insert into test (large_value) values (1234567890123456789012345678901234567);
insert into test (large_value) values (123456789012345678901234567890123456);
insert into test (large_value) values (12345678901234567890123456789012345);
insert into test (large_value) values (1234567890123456789012345678901234);
insert into test (large_value) values (123456789012345678901234567890123);
insert into test (large_value) values (12345678901234567890123456789012);
insert into test (large_value) values (1234567890123456789012345678901);
insert into test (large_value) values (123456789012345678901234567890);
insert into test (large_value) values (12345678901234567890123456789);
insert into test (large_value) values (NULL);
go

select * from test;
go 
```

SELECT 可以正常工作，但在对象资源管理器中显示 Edit Top 200 Rows 不会：

![无法编辑数据](../Images/fd746492c864d0cafe9cfd65e26a56b2.png)

这个问题有一个[连接项](http://connect.microsoft.com/SQLServer/feedback/details/351436/ssms-edit-first-200-rows-is-unable-to-read-data-for-decimal-p-s-when-p-is-large)。SSMS 2012 仍然存在同样的问题。

如果我们查看[Numeric 和 Decimal](http://msdn.microsoft.com/en-us/library/aa258832%28v=sql.80%29.aspx)的详细信息，我们会发现问题出现在一个奇怪的边界上，精度为 29，这实际上*不是*SQL Server 边界（精度为 28）：

```
Precision   Storage bytes
1 - 9   5
10-19   9
20-28   13
29-38   17 
```

如果我们检查 .Net（SSMS 是托管应用程序）[十进制精度表](http://msdn.microsoft.com/en-us/library/364x0z75.aspx)，我们可以很快看到问题的症结所在：精度是**28-29 位有效数字**。所以 .Net`decimal`类型无法映射高精度（>29）SQL Server `numeric`/`decimal`类型。

这不仅会影响 SSMS 显示，还会影响您的应用程序。SSIS 等专业应用程序将使用高精度表示，例如`DT_NUMERIC`：

> `DT_NUMERIC` 具有固定精度和比例的精确数值。此数据类型是一个**16 字节的**无符号整数，带有单独的符号，范围为 0 - 38，最大精度为 38。

现在回到您的问题：您只需查看值即可发现无效条目。知道 C# 表示范围可以容纳近似值（-7.9 x 10 ^(28)到 7.9 x 10 ^(28)）/（10 ^(0 到 28)）`（范围取决于比例），您可以在每列上搜索范围之外的值（要搜索的实际值将取决于列比例）。但这引出了一个问题“用什么替换数据？”。

我建议改为使用专用工具进行导入导出，这些工具能够处理高精度数值。SSIS 是显而易见的候选人。但即使是适度的[bcp.exe](http://msdn.microsoft.com/en-us/library/ms162802.aspx)也符合要求。

顺便说一句，如果您的值实际上不正确（即真正的损坏），那么我建议您运行[`DBCC CHECKTABLE (...) WITH DATA_PURITY`](http://msdn.microsoft.com/en-us/library/ms174338.aspx)：

> **DATA_PURITY**
> 
> 导致 DBCC CHECKDB 检查数据库中是否存在无效或超出范围的列值。例如，DBCC CHECKDB 检测日期和时间值大于或小于 datetime 数据类型可接受范围的列；或具有无效小数位数或精度值的小数或近似数字数据类型列。
> 
> 对于在 SQL Server 2005 及更高版本中创建的数据库，默认启用列值完整性检查，并且不需要 DATA_PURITY 选项。对于从早期版本的 SQL Server 升级的数据库，在 DBCC CHECKDB WITH DATA_PURITY 在数据库上运行无错误之前，默认情况下不会启用列值检查。此后，DBCC CHECKDB 默认检查列值完整性。

问：一个**专栏****怎么会出现这个问题？`datetime`**

```
use tempdb;
go

create table test(d datetime)

insert into test (d) values (getdate())

select %%physloc%%, * from test;

-- Row is on page  0x9100000001000000

dbcc traceon(3604,-1);

dbcc page(2,1,145,3);

Memory Dump @0x000000003FA1A060
0000000000000000:   10000c00 75f9ff00 6aa00000 010000             ....uùÿ.j .....
Slot 0 Column 1 Offset 0x4 Length 8 Length (physical) 8

dbcc writepage(2,1,145, 100, 8, 0xFFFFFFFFFFFFFFFF) 
```

![编辑前 200 名](../Images/4f64ea431bc57ac23dbc9c493331ccfd.png)

```
dbcc checktable('test') with data_purity; 
```

> 消息 2570，级别 16，状态 3，第 2 行页面 (1:145)，对象 ID 837578022 中的插槽 0，索引 ID 0，分区 ID 2882303763115671552，分配单元 ID 2882303763120062464（类型“行内数据”）。列“d”值超出数据类型“日期时间”的范围。将列更新为合法值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T04:45:07.007

如上所述，这些错误通常发生在不保留精度和比例的情况下。如果您对 SSIS 感到满意，那么您可以获取那些损坏的行。采用 Martin Smith 创建的值

```
CREATE TABLE T(ID int ,C DECIMAL(38,0));
INSERT INTO T VALUES(1,9999999999999999999999999999999999999) 
```

上表重现了该错误。这里第一列代表主键。我插入了大约 1000 行，其中很少有损坏的值。下面是SSIS包设计

![SSIS设计](../Images/8b98c5c224cdfe537a332196aaa391bb.png)

在数据转换中，我取了有错误的列 C 并尝试将其转换为十进制（38,0）。由于会发生转换或截断错误，因此我将错误行重定向到基本上更新表的 OLEDB 命令并将列设置为 NULL

```
Update T
Set C=NULL
where ID=? 
```

C 和 ID 的值将被定向到 oledb 命令。如果没有错误，那么我只是插入到一个表中（实际上不需要这样做）。如果你的主键列中有一个主键列，这将起作用桌子 。

如果日期时间列有任何错误，可以编写一个 sql 查询来验证日期时间值的格式。请通过[MSDN 链接](http://msdn.microsoft.com/en-us/library/ms187347.aspx)获取有效的日期时间值

```
 Select * from YourTable where ISDATE(Col)!=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:46:13.563

我认为您可以使用游标获取数据。请使用光标查询重试，例如以下查询：

```
DECLARE VerifyCursor CURSOR FOR
SELECT *
FROM MyTable
WHILE 1=1 BEGIN
    BEGIN Try
        FETCH FIRST FROM VerifyCursor INTO @Column1, @Column2, ...

        INSERT INTO @MyTable2(Column1, Column2,...)
        VALUES (@Column1, @Column2, ...)
    END TRY
    BEGIN CATCH
    END CATCH
    IF (@@FETCH_STATUS<>0) BREAK
End
OPEN VerifyCursor
CLOSE VerifyCursor
DEALLOCATE VerifyCursor 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T19:09:15.513

通过更新替换坏数据很简单：

```
UPDATE table SET column = NULL WHERE key_column = 'Some value' 
```

# php - 用PHP计算div中的行数及其宽度

> ID：10724759
> 
> 赞同：1
> 
> 时间：2012-05-23T17:13:23.797
> 
> 标签：php

PHP中有没有办法计算给定宽度和给定行高的字符串的行数？

例如，如果我有这个文本：
Sed eget lorem lorem。Pellentesque tristique，quam vel fringilla porttitor，
neque elit suscipit nisl，id posuere magna libero congue ante。
= 2 行

sed eget lorem lorem。Pellentesque
tristique，quam vel fringilla
porttitor，neque elit suscipit nisl，
id posuere magna libero congue ante。
= 4行因为宽度不一样

编辑：我的问题不清楚。
正如 Jason McCreary 所说，我想用 PHP 创建一个公式（基于字体大小、字符串长度、行高），这会让我很接近。

如果有人能把我送到正确的方向去做，我会很感激，因为我试图创造那个神奇的公式，但没有结果。

我无法在页面中使用 JavaScript。

谢谢！！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T18:00:39.363

最后这是我所做的：

```
$charWidth = 5.6;
$divWidth = 550;

$wrappedContent = wordwrap($originalContent, ($divWidth / $charWidth), "\r\n");
$explodedLines = explode("\r\n", $wrappedContent); 
$nbOfLine = count($explodedLines);

echo $nbOfLine; 
```

不用说这是非常近似的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T17:16:12.347

不，PHP 是一种服务器端技术。它不知道生成的 HTML 渲染。

相反，您可以：

*   使用 JavaScript。这是一种客户端技术，将提供更好的结果。
*   使用 PHP 创建一个公式（基于字体大小、字符串长度、行高），让您*接近*.

### 更新

查看 和 之类的函数[`strlen()`](http://us3.php.net/strlen)，[`substr_count()`](http://us3.php.net/manual/en/function.substr-count.php)以帮助您开始使用 PHP 公式。它们将分别帮助处理行长和行数。line-height 和 font-size 应该是恒定的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-07T00:06:17.447

你可以只用 CSS

```
<div style="width: 10em; height: 1.2em; overflow: hidden; text-overflow: ellipsis;">
Now a long woooooooooooooooooooooooooooooooord
</div> 
```

# jquery - 关于 jquery 中的文本更改

> ID：10724764
> 
> 赞同：0
> 
> 时间：2012-05-23T17:13:46.767
> 
> 标签：jquery

我有一个值是异步更新的跨度。所以，我想让 jquery 听一个值，如果它等于，让我们说“测试”我想隐藏另一个 html 元素。我不知道应该使用什么事件，因为[.change](http://api.jquery.com/change/)仅对文本框和选择有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:18:34.200

您可以访问异步更新值的方法的回调函数吗？如果是这样，您可以在其中放置一个分析响应的条件/侦听器。像这样的东西：

```
$.ajax({
   success: function(responseData) {
      if(responseData.specificKeyValue == 'test') {
          $('element to hide').hide();
      }
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:18:53.100

我会做类似下面的事情。当您更新跨度时，这基本上会触发自定义事件。

**注意**：下面是一个演示代码，尝试理解并相应地实现。

```
$(function() {
    var $result = $('#result');
    setInterval(function() {
       $result.append('Span Updated').trigger('spanChange');
    }, 1000);

    $result.on('spanChange', function () {
        //your custom span change listener
        console.log('Span got updated');
    });
}); 
```

[**演示**](http://jsfiddle.net/Hg8L2/1/)

# zend-framework - Zend ErrorHandler 插件调用注册插件

> ID：10724765
> 
> 赞同：-1
> 
> 时间：2012-05-23T17:13:54.717
> 
> 标签：zend-framework, error-handling

当 errorcontroller 插件捕获错误时，它似乎会召回我的其他注册插件（在它们已经被调用之后）。例如，我有一个 viewsetup 插件，它在 上`preDispatch`设置我的应用程序视图设置（headtitle、headlink、headscript、navigation 等）。我该如何解决这个问题，以便 errorplugin 不记得我的其他插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T04:48:08.633

你不能“敲响警钟”。当`ErrorHandler`插件在`postDispatch`和处启动时`dispatchLoopShutdown`，任何带有 、 和钩子的插件`routeStartup`都`routeShutdown`已经`preDispatch`运行了。

但是，如果您在处理错误情况时对视图有特定需求 - 例如更改 headTitle()、headScript()、布局、导航等 - 那么您可以在`ErrorController`.

# python - Python的字典列表值的hasattr总是返回false？

> ID：10724766
> 
> 赞同：36
> 
> 时间：2012-05-23T17:13:55.783
> 
> 标签：python, list, class, dictionary, hasattr

我有一本字典，有时会收到对不存在键的调用，所以我尝试使用`hasattr`并`getattr`处理这些情况：

```
key_string = 'foo'
print "current info:", info
print hasattr(info, key_string)
print getattr(info, key_string, [])
if hasattr(info, key_string):
    array = getattr(info, key_string, [])
array.append(integer)
info[key_string] = array
print "current info:", info 
```

第一次运行时`integer = 1`：

```
current info: {}
False
[]
current info: {'foo': [1]} 
```

再次运行此代码`integer = 2`：

```
instance.add_to_info("foo", 2)

current info: {'foo': [1]}
False
[]
current info: {'foo': [2]} 
```

第一次运行显然是成功的 ( `{'foo': [1]}`)，但`hasattr`返回 false 并`getattr`在第二次使用默认的空白数组，`1`在过程中丢失了 的值！为什么是这样？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-23T17:19:55.560

`hasattr`不测试字典的成员。请改用`in`运算符或`.has_key`方法：

```
>>> example = dict(foo='bar')
>>> 'foo' in example
True
>>> example.has_key('foo')
True
>>> 'baz' in example
False 
```

但请注意，它`dict.has_key()`已被弃用，PEP 8 样式指南建议反对它，并且已在 Python 3 中完全删除。

顺便说一句，使用可变类变量会遇到问题：

```
>>> class example(object):
...     foo = dict()
...
>>> A = example()
>>> B = example()
>>> A.foo['bar'] = 'baz'
>>> B.foo
{'bar': 'baz'} 
```

将其初始化为您的`__init__`：

```
class State(object):
    info = None

    def __init__(self):
        self.info = {} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-23T17:18:23.343

字典键与对象属性不同

```
thing1 = {'a', 123}
hasattr(thing1, 'a') # False
class c: pass
thing2 = c()
thing2.a = 123
hasattr(thing2, 'a') # True 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T17:21:41.087

要测试列表/字典中的元素，请使用`in`. 要使用默认值，您可以使用`dict.get`：

```
def add_to_info(self, key_string, integer):
    array = self.info.get(key_string, [])
    array.append(integer)
    self.info[key_string] = array 
```

或使用默认字典：

```
from collections import defaultdict
class State(object):
    info = defaultdict(list)

    def add_to_info(self, key_string, integer):
        self.info[key_string].append(integer) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T17:24:40.587

看起来你只需要一行：

```
def add_to_info(self, key_string, integer):
    self.info.setdefault(key_string, []).append(integer) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-04-01T19:24:32.563

您可以在 dict 类型对象上使用 .get() 方法。如果未定义，此方法不会引发关键错误。此外，作为对象的 getattr()，您可以在其上指定默认值。

```
>> {'name': 'Me'}.get('name1', 'StackOverflow')
>> 'StackOverflow' 
```

# cuda - CUDA 立方体 gbmv理解

> ID：10724767
> 
> 赞同：2
> 
> 时间：2012-05-23T17:13:56.270
> 
> 标签：cuda, cublas

我最近想使用一个简单的 CUDA 矩阵向量乘法。我在 cublas 库中找到了一个合适的函数：cublas<<>>gbmv。这里是[官方文档](http://www.google.by/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CE0QFjAC&url=http%3A%2F%2Fdeveloper.download.nvidia.com%2Fcompute%2FDevZone%2Fdocs%2Fhtml%2FCUDALibraries%2Fdoc%2FCUBLAS_Library.pdf&ei=Ngm8T4mEH4vesgaw0ozHDQ&usg=AFQjCNFTh-72AYOmuDNrBBe8r4419UGDDQ&sig2=2T-ZJW877Y163_aka2J0dw)

但它实际上很差，所以我没能理解`kl`和`ku`参数的含义。此外，我不知道是什么`stride`（也必须提供）。这些参数有一个简短的解释（第 37 页），但看起来我需要了解其他内容。

在互联网上搜索并没有提供关于这个问题的大量有用信息，主要是对不同版本的文档的引用。

所以我对 GPU/CUDA/cublas 大师有几个问题：

1.  如何找到有关使用 cublas 的更易于理解的文档或指南？
2.  如果你知道如何使用这个功能，你能不能解释一下我如何使用它？
3.  也许 cublas 库有点特别，每个人都使用更流行、文档更好的东西等等？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T17:42:27.817

所以[BLAS](http://en.wikipedia.org/wiki/Basic_Linear_Algebra_Subprograms)（基本线性代数子程序）通常是一个 API，顾名思义，基本线性代数例程。它包括向量-向量运算（1 级 blas 例程）、矩阵-向量运算（2 级）和矩阵-矩阵运算（3 级）。有一个可用的[“参考”BLAS](http://www.netlib.org/blas/)可以正确实现所有内容，但大多数时候您会为您的架构使用优化的实现。cuBLAS 是 CUDA 的一个实现。

BLAS API 作为描述基本操作的 API 非常成功，因此被广泛采用。然而，（a）由于当时的架构限制，这些名称非常神秘（这是 1979 年，API 使用 8 个字符或更少字符的名称定义，以确保它可以广泛编译），并且（b）它是成功的，因为它非常通用，因此即使是最简单的函数调用也需要大量无关的参数。

因为它是如此广泛，所以通常假设如果你在做数值线性代数，你已经知道 API 的一般要点，所以实现手册通常会遗漏重要的细节，我认为这就是你遇到的问题。

2 级和 3 级例程通常具有以下形式的函数名称，`TMMOO..`其中`T`是矩阵/向量的数值类型（`S`/`D`用于单/双精度实数，`C`/`Z`用于单/双精度复数），`MM`是矩阵类型（`GE`对于一般 - 例如，只是一个密集的矩阵，你不能说其他任何事情；`GB`对于一般的带状矩阵，`SY`对称矩阵等），并且`OO`是操作。

这一切现在看起来有点荒谬，但它确实有效并且效果相对较好——您很快就会学会扫描这些熟悉的操作，因此 SGEMV 是单精度通用矩阵乘以向量乘法（这可能是您想要的，而不是 SGBMV） , DGEMM 是双精度矩阵-矩阵乘法等。但确实需要一些练习。

因此，如果您查看 cublas sgemv 说明，或在[原始文档中](http://www.netlib.org/blas/sgemv.f)，您可以逐步浏览参数列表。一、基本操作是

> 此函数执行矩阵向量乘法 `y = a op(A)x + b y` ，其中 A 是以列优先格式存储的 amxn 矩阵，x 和 y 是向量，并且 和 是标量。

其中 op(A) 可以是 A、A ^T或 A ^H。因此，如果您只想要`y = Ax`，就像常见的情况一样，那么`a = 1`, `b = 0`。和`transa == CUBLAS_OP_N`。

`incx`是 中不同元素之间的步幅`x`；在很多情况下这会派上用场，但如果`x`只是一个包含向量的简单一维数组，那么步幅将为 1。

这就是 SGEMV 所需的全部内容。

# fortran - 使用 Fortran 90 在 Fortran 中通过梯形进行 6 维积分

> ID：10724768
> 
> 赞同：2
> 
> 时间：2012-05-23T17:13:58.337
> 
> 标签：fortran, fortran90, integral

我需要使用 Fortran 90 中的梯形以有效的方式计算六维积分。这是我需要做的一个例子：

![积分表达式](../Images/827bd915d4632ed70edeb4e36e5edfe8.png)

其中 F 是一个数值（例如，非解析）函数，它将在 x1 到 x6 变量上进行积分。我最初编写了一个一维子程序：

```
 SUBROUTINE trapzd(f,mass,x,nstep,deltam) 
      INTEGER nstep,i
      DOUBLE PRECISION mass(nstep+1),f(nstep+1),x,deltam
      x=0.d0
      do i=1,nstep
          x=x+deltam*(f(i)+f(i+1))/2.d0
      end do
  return
  END 
```

一维似乎可以正常工作，但是，我不知道如何将其扩展到六维。我可以重复使用这六次，每个维度一次，还是我应该编写一个新的子程序？

如果您有其他语言（如 Python、MATLAB 或 Java）的*完全编码（不使用库/API）*版本，我会很高兴看到并获得一些想法。

PS这不是学校作业。我是生物医学博士生，这是我对干细胞活动建模研究的一部分。我没有深厚的编码和数学背景。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:18:11.943

您可以查看 GNU Scientific Library (GSL) 的 Monte Carlo Integration 章节。它既是一个库，而且由于它是开源的，因此您可以学习源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T23:05:58.377

[查看C 的数值配方的](http://apps.nrbook.com/c/index.html)第 4.6 节。

1.  第一步是减少使用、对称性和分析依赖性的问题。
2.  第二步是像这样链接解决方案：

    ```
    f2(x2,x3,..,x6) = Integrate(f(x,x2,x3..,x6),x,1,x1end)
    f3(x3,x4,..,x6) = Integrate(f2(x,x3,..,x6),x,1,x2end)
    f4(x4,..,x6) = ...

    f6(x6) = Integrate(I4(x,x6),x,1,x5end)        
    result = Integrate(f6(x),x,1,x6end) 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-19T19:50:24.370

```
double MultInt(int k);
double MultIntegrand(double thetARG, int k);
double quadMoMult(double(*funct)(double, int), double lower, double upper, int k);
double funkn(double *thet);

int QuadMo_MinLvl = 2;
int  QuadMo_MaxLvl = 3;
double QuadMo_Tol = 0.1;
int *QuadMo_nlvlk;
double *thet;
int nDim;

//double MultInt(int k, double(*func)(double *))
double MultInt(int k)
{

//MultInt(nDim, func) returns multi - dimensional integral from 0 to 1
//in all dimensions of function func
    double ans;

    if (k == 0) 
    {
        ans = funkn(thet);
    }
    else
    {
        ans = quadMoMult(MultIntegrand, 0.0, 1.0, k); //limits hardcoded here
    }
    return ans;
}

double MultIntegrand(double thetARG, int k)
{
    double ans;

    if (k > 0)
        thet[k] = thetARG;
    else
        printf("\n***MultIntegrand: not expected, k not present!***\n");

        //Recursive call
    //ans = MultInt(k - 1, func);
    ans = MultInt(k - 1);
    return ans;
}

double quadMoMult(double(*funct)(double, int), double lower, double upper, int k)
{
    //Integration routine written by Luke Mo
    //Stanford Linear Accelerator Center circa 1970
    //QuadMo_Eps is error tolerance
    //QuadMo_MinLvl determines initial grid of 2 * *(MinLvl + 1) + 1 points
    //to avoid missing a narrow peak, this may need to be increased.
    //QuadMo_Nlvl returns number of subinterval refinements required beyond
    //QuadMo_MaxLvl

    //Modified by making recursive and adding argument k
    //for multiple integrals(GuthrieMiller@gmail.com)

    double ans;
    double Middle, Left, Right, eps, est, fLeft, fMiddle, fRight;
    double fml, fmr, rombrg, coef, estl, estr, estint, area, abarea;
    double valint[51][3], Middlex[51], Rightx[51], fmx[51], frx[51];  //Jack up arrays
    double fmrx[51], estrx[51], epsx[51];
    int retrn[51];
    int i, level;

    level = 0;
    QuadMo_nlvlk[k] = 0;
    abarea = 0.0;
    Left = lower;
    Right = upper;
    if (k > 0)
    {
        fLeft = funct(Left, k);
        fMiddle = funct((Left + Right) / 2, k);
        fRight = funct(Right, k);
    }
    else
    {
        fLeft = funct(Left,0);
        fMiddle = funct((Left + Right) / 2,0);
        fRight = funct(Right,0);
    }
    est = 0.0;
    eps = QuadMo_Tol;
l100:
    level = level + 1;
    Middle = (Left + Right) / 2;
    coef = Right - Left;
    if (coef != 0.0)
        goto l150;
    rombrg = est;
    goto l300;
l150:
    if (k > 0)
    {
        fml = funct((Left + Middle) / 2.0, k);
        fmr = funct((Middle + Right) / 2.0, k);
    }
    else
    {
        fml = funct((Left + Middle) / 2.0, 0);
        fmr = funct((Middle + Right) / 2.0, 0);
    }
    estl = (fLeft + 4 * fml + fMiddle)*coef;
    estr = (fMiddle + 4 * fmr + fRight)*coef;
    estint = estl + estr;
    area = abs(estl) + abs(estr);
    abarea = area + abarea - abs(est);
    if (level != QuadMo_MaxLvl)
        goto l200;
    QuadMo_nlvlk[k] = QuadMo_nlvlk[k] + 1;
    rombrg = estint;
    goto l300;
l200:
    if ((abs(est - estint) > (eps*abarea)) || (level < QuadMo_MinLvl))
        goto l400;
    rombrg = (16 * estint - est) / 15;
l300:
    level = level - 1;
    i = retrn[level];
    valint[level][i] = rombrg;
    if (i == 1)
        goto l500;
    if (i == 2)
        goto l600;
l400:
    retrn[level] = 1;
    Middlex[level] = Middle;
    Rightx[level] = Right;
    fmx[level] = fMiddle;
    fmrx[level] = fmr;
    frx[level] = fRight;
    estrx[level] = estr;
    epsx[level] = eps;
    eps = eps / 1.4;
    Right = Middle;
    fRight = fMiddle;
    fMiddle = fml;
    est = estl;
    goto l100;
l500:
    retrn[level] = 2;
    Left = Middlex[level];
    Right = Rightx[level];
    fLeft = fmx[level];
    fMiddle = fmrx[level];
    fRight = frx[level];
    est = estrx[level];
    eps = epsx[level];
    goto l100;
l600:
    rombrg = valint[level][1] + valint[level][2];
    if (level > 1)
        goto l300;
    ans = rombrg / 12.0;
    return ans;
}

double funkn(double *thet)
{
    //in this case a Gaussian centered at 0.5 with SD 0.1
    double *sm;
    double sum;
    sm = new double[nDim];
    sum = 0.0;

    for (int i = 1; i <= nDim; i++) 
    {
        sm[i] = (thet[i] - 0.5) / 0.1;
        sm[i] *= sm[i];
        sum = sum + sm[i];
    }
    return exp(-sum / 2.0);
}

int main() {

    double ans;

    printf("\nnDim ans       expected       nlvl\n");
    for (nDim = 1; nDim <= 6; nDim++)
    {
        //expected answer is(0.1 sqrt(2pi))**nDim
        QuadMo_nlvlk = new int[nDim + 1];  //array for x values
        thet = new double[nDim + 1];  //array for x values
        ans = MultInt(nDim);
        printf("\n %d %f %f ", nDim, ans, pow((0.250663),nDim));
        for (int j=1; j<=nDim;  j++)
            printf("   %d ", QuadMo_nlvlk[nDim]);
        printf("\n");
    }

    return 0;

} 
```

全局声明相关参数

```
int QuadMo_MinLvl = 2;
int  QuadMo_MaxLvl = 3;
double QuadMo_Tol = 0.1;
int *QuadMo_nlvlk;
double *thet;
int nDim; 
```

这种编码比模糊的过时 fortran 编码要清晰得多，通过一些调整可以参数化积分限制和容差！！

有更好的算法可以与自适应技术一起使用，并且可以处理表面上的奇点等......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-12T14:54:53.703

多重积分的直接评估在计算上具有挑战性。使用蒙特卡洛可能会更好，也许使用重要性抽样。然而，蛮力直接集成有时对方法的验证很有意义。

我使用的集成例程是 Luke Mo 大约在 1970 年编写的“QuadMo”。我将其递归并放在一个模块中。QuadMo 需要细化网格以获得所需的集成精度。这是一个使用 QuadMo 进行 n 维积分的程序。

下面是使用 G95 编译的程序验证，该程序使用以 0.5 为中心的高斯，所有维度的 SD 0.1，nDim 最高为 6。它在几秒钟内运行。

```
 nDim ans       expected       nlvl
     1 0.249     0.251      2
     2 6.185E-02 6.283E-02  2  2
     3 1.538E-02 1.575E-02  2  2  2
     4 3.826E-03 3.948E-03  2  2  2  2
     5 9.514E-04 9.896E-04  2  2  2  2  2
     6 2.366E-04 2.481E-04  2  2  2  2  2  2 
```

这是代码：

```
!=======================================================================
      module QuadMo_MOD
      implicit none
      integer::QuadMo_MinLvl=6,QuadMo_MaxLvl=24
      integer,dimension(:),allocatable::QuadMo_nlvlk
      real*8::QuadMo_Tol=1d-5
      real*8,save,dimension(:),allocatable::thet
      integer,save::nDim

      abstract interface
        function QuadMoFunct_interface(thet,k)
           real*8::QuadMoFunct_interface
           real*8,intent(in)::thet
           integer,intent(in),optional::k
        end function
      end interface

      abstract interface
        function MultIntFunc_interface(thet)
           real*8::MultIntFunc_interface
           real*8,dimension(:),intent(in)::thet
        end function
      end interface

      procedure(MultIntFunc_interface),pointer :: stored_func => null()

      contains

!----------------------------------------------------------------------
      recursive function quadMoMult(funct,lower,upper,k) result(ans) 
  ! very powerful integration routine written by Luke Mo
  !  then at the Stanford Linear Accelerator Center circa 1970
  ! QuadMo_Eps is error tolerance  
  ! QuadMo_MinLvl determines initial grid of 2**(MinLvl+1) + 1 points
  !  to avoid missing a narrow peak, this may need to be increased.  
  ! QuadMo_Nlvl returns number of subinterval refinements required beyond
  ! QuadMo_MaxLvl

  ! Modified by making recursive and adding argument k
  !  for multiple integrals (GuthrieMiller@gmail.com)
      real*8::ans
      procedure(QuadMoFunct_interface) :: funct
      real*8,intent(in)::lower,upper
      integer,intent(in),optional::k
      real*8::Middle,Left,Right,eps,est,fLeft,fMiddle,fRight
     & ,fml,fmr,rombrg,coef,estl,estr,estint,area,abarea
      real*8::valint(50,2), Middlex(50), Rightx(50), fmx(50), frx(50)
     & ,fmrx(50), estrx(50), epsx(50)
      integer retrn(50),i,level
      level = 0
      QuadMo_nlvlk(k) = 0
      abarea = 0
      Left = lower
      Right = upper
      if(present(k))then
         fLeft = funct(Left,k)
         fMiddle = funct((Left+Right)/2,k)
         fRight = funct(Right,k)
      else
         fLeft = funct(Left)
         fMiddle = funct((Left+Right)/2)
         fRight = funct(Right)
      endif
      est = 0
      eps = QuadMo_Tol
  100 level = level+1
      Middle = (Left+Right)/2
      coef = Right-Left
      if(coef.ne.0) go to 150
      rombrg = est
      go to 300
  150 continue
      if(present(k))then
         fml = funct((Left+Middle)/2,k)
         fmr = funct((Middle+Right)/2,k)
      else
         fml = funct((Left+Middle)/2)
         fmr = funct((Middle+Right)/2)
      endif
      estl = (fLeft+4*fml+fMiddle)*coef
      estr = (fMiddle+4*fmr+fRight)*coef
      estint = estl+estr
      area= abs(estl)+ abs(estr)
      abarea=area+abarea- abs(est)
      if(level.ne.QuadMo_MaxLvl) go to 200
      QuadMo_nlvlk(k) = QuadMo_nlvlk(k)+1
      rombrg = estint
      go to 300
  200 if(( abs(est-estint).gt.(eps*abarea)).or.
     1(level.lt.QuadMo_MinLvl))  go to 400
      rombrg = (16*estint-est)/15
  300 level = level-1
      i = retrn(level)
      valint(level, i) = rombrg
      go to (500, 600), i
  400 retrn(level) = 1
      Middlex(level) = Middle
      Rightx(level) = Right
      fmx(level) = fMiddle
      fmrx(level) = fmr
      frx(level) = fRight
      estrx(level) = estr
      epsx(level) = eps
      eps = eps/1.4d0
      Right = Middle
      fRight = fMiddle
      fMiddle = fml
      est = estl
      go to 100
  500 retrn(level) = 2
      Left = Middlex(level)
      Right = Rightx(level)
      fLeft = fmx(level)
      fMiddle = fmrx(level)
      fRight = frx(level)
      est = estrx(level)
      eps = epsx(level)
      go to 100
  600 rombrg = valint(level,1)+valint(level,2)
      if(level.gt.1) go to 300
      ans  = rombrg /12
      end function quadMoMult
!-----------------------------------------------------------------------
      recursive function MultInt(k,func) result(ans)
      ! MultInt(nDim,func) returns multi-dimensional integral from 0 to 1
      !  in all dimensions of function func
      !  variable QuadMo_Mod: nDim needs to be set initially to number of dimensions      
      procedure(MultIntFunc_interface) :: func
      real*8::ans
      integer,intent(in)::k

      stored_func => func

      if(k.eq.nDim)then
         if(allocated(thet))deallocate(thet)
         allocate (thet(nDim))
         if(allocated(QuadMo_nlvlk))deallocate(QuadMo_nlvlk)
         allocate(QuadMo_nlvlk(nDim))
      endif

      if(k.eq.0)then
         ans=func(thet)
         return
      else
         ans=QuadMoMult(MultIntegrand,0d0,1d0,k)
      endif
      end function MultInt
!-----------------------------------------------------------------------
      recursive function MultIntegrand(thetARG,k) result(ans)
      real*8::ans
      real*8,intent(in)::thetARG
      integer,optional,intent(in)::k

      if(present(k))then
         thet(k)=thetARG
      else
         write(*,*)'MultIntegrand: not expected, k not present!'
         stop
      endif
      ans=MultInt(k-1,stored_func)
      end function MultIntegrand
!-----------------------------------------------------------------------
      end module QuadMo_MOD
!=======================================================================
      module test_MOD
      use QuadMo_MOD
      implicit none

      contains

!----------------------------------------------------------------------- 
      real*8 function func(thet) ! multidimensional function
      ! this is the function defined in nDim dimensions
      !  in this case a Gaussian centered at 0.5 with SD 0.1
      real*8,intent(in),dimension(:)::thet
      func=exp(-sum(((thet-5d-1)/1d-1)
     & *((thet-5d-1)/1d-1))/2)
      end function func
!----------------------------------------------------------------------- 
      end module test_MOD 
!=======================================================================
      ! test program to evaluate multiple integrals 
      use test_MOD
      implicit none 
      real*8::ans 

      ! these values are set for speed, not accuracy
      QuadMo_MinLvl=2
      QuadMo_MaxLvl=3
      QuadMo_Tol=1d-1

      write(*,*)'     nDim ans       expected       nlvl'
      do nDim=1,6
         ! expected answer is (0.1 sqrt(2pi))**nDim
         ans=MultInt(nDim,func)
         write(*,'(i10,2(1pg10.3),999(i3))')nDim,ans,(0.250663)**nDim
     &    ,QuadMo_nlvlk
      enddo
      end
!----------------------------------------------------------------------- 
```

# .net - 如何将此 StackPanel 用作资源

> ID：10724770
> 
> 赞同：4
> 
> 时间：2012-05-23T17:14:09.400
> 
> 标签：.net, wpf, xaml, resourcedictionary

我只是想将 StackPanel 内容放入 ResourceDictionary。我尝试将其包装到数据模板中，但没有成功。其他类型的模板？一种风格？

如何将其提取到资源中，然后在视图的网格布局中使用内容？

干杯，
贝里尔

# 要移动的 xml

```
<StackPanel x:Name="_filterByTypeOptions" Orientation="Horizontal" Margin="5, 5" >
    <RadioButton Style="{StaticResource FilterPanelRadioButtonStyle}" 
         IsChecked="{Binding ShowAllContacts, Mode=TwoWay}" 
         Content="{resx:Resx Filter_ByType_ShowAll}" ToolTip="{Resx Filter_ByType_ShowAll_ToolTip}"
         />
    // ... more of the same

</StackPanel> 
```

# 更新

# 当前模板

```
<DataTemplate x:Key="FilterTypeByTemplateControl">
    <StackPanel x:Name="_filterByTypeOptions" Orientation="Horizontal" Margin="5, 5" >
        <RadioButton Style="{StaticResource FilterPanelRadioButtonStyle}" 
                     IsChecked="{Binding ShowAllContacts, Mode=TwoWay}" 
                     Content="{resx:Resx Filter_ByType_ShowAll}" ToolTip="{Resx Filter_ByType_ShowAll_ToolTip}"
                     />
        /// etc.
    </StackPanel>
</DataTemplate> 
```

# 在视图的另一个 StackPanel 中使用

```
 <StackPanel x:Name="_filterByNameOptions" DockPanel.Dock="Left" Orientation="Horizontal" Margin="5, 5" >
            // ... more stuff

            <ContentPresenter Content="{StaticResource FilterTypeByTemplateControl}"/>

        </StackPanel> 
```

![在此处输入图像描述](../Images/4b3e1a4bd50ff55c12a049da6d904cac.png)

# 最后！

这有效

```
<ContentPresenter Content="{Binding}" ContentTemplate="{StaticResource FilterTypeByTemplateControl}"/> 
```

![在此处输入图像描述](../Images/ec5854b3e344d2a4e49e655195d01469.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:16:44.430

```
<ContentControl 
      ContentTemplate="{StaticResource FilterTypeByTemplateControl}" /> 
```

# android - /res/xml/mms_config.xml 位于何处？

> ID：10724772
> 
> 赞同：1
> 
> 时间：2012-05-23T17:14:28.763
> 
> 标签：android, xml, mms

我正在尝试发送实现此处概述的方法的彩信： [如何在 Android 中通过彩信发送图像？](https://stackoverflow.com/questions/2972845/how-to-send-image-via-mms-in-android)

为此，我将 com.android.mms 导​​入了我的 Eclipse 项目（以及其他导入）；但是我无法克服一个问题。在 MmsConfig 类中：

```
private static void loadMmsSettings(Context context) {
    XmlResourceParser parser = context.getResources().getXml(R.xml.mms_config); 
```

R.xml.mms_config 未解决。从哪里可以找到/获取此资​​源？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:17:47.323

> 我将 com.android.mms 导​​入了我的 Eclipse 项目（以及其他导入）

请注意，固件应用程序并非设计为独立于固件构建。

> 从哪里可以找到/获取此资​​源？

从同一个地方你得到了源代码。在 Android 中，这是一个 XML 资源，可在项目`res/xml/`目录中找到。因此，如果您转到获取代码的项目，然后查看`res/xml/`，您会发现[`mms_config.xml 文件](https://github.com/android/platform_packages_apps_mms/blob/master/res/xml/mms_config.xml)。

# javascript - HTML5 的画布 + Javascript 代码在 iOS 上不起作用

> ID：10724775
> 
> 赞同：0
> 
> 时间：2012-05-23T17:14:39.993
> 
> 标签：javascript, ios, html, canvas, safari

我完成了 javascript + html5 画布的基本引擎。很简陋。它适用于浏览器，但不适用于 iOS。

我是否使用了尚未在 Safari Mobile 上实现的功能，或者其他？:(

[http://bluecodestudio.com/kipos/gametest.html](http://bluecodestudio.com/kipos/gametest.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:28:38.363

在keyboardJS.init() 中，您在事件回调中使用了bind() 方法。

```
document.addEventListener("keydown", this.keyIsDown.bind(this));
document.addEventListener("keyup", this.keyIsUp.bind(this)); 
```

Safari（包括移动版 Safari）不支持 bind() 方法。您需要提供一个 polyfill：

```
/**
*    Bind.js
*    Copyright 2010, WebReflection
*    License: http://www.opensource.org/licenses/mit-license.php
*/
if (Function.prototype.bind === null || Function.prototype.bind === undefined) {
    Function.prototype.bind = (function (slice) {
        // (C) WebReflection - Mit Style License
        function bind(context) {
            var self = this; // "trapped" function reference
            // only if there is more than an argument
            // we are interested into more complex operations
            // this will speed up common bind creation
            // avoiding useless slices over arguments
            if (1 < arguments.length) {
                // extra arguments to send by default
                var $arguments = slice.call(arguments, 1);
                return function () {
                    return self.apply(
                        context,
                    // thanks @kangax for this suggestion
                        arguments.length ?
                    // concat arguments with those received
                            $arguments.concat(slice.call(arguments)) :
                    // send just arguments, no concat, no slice
                            $arguments
                    );
                };
            }
            // optimized callback
            return function () {
                // speed up when function is called without arguments
                return arguments.length ? self.apply(context, arguments) : self.call(context);
            };
        }

        // the named function
        return bind;

    } (Array.prototype.slice));
} 
```

# javascript - 为玩家检查敌人周围的圆形区域

> ID：10724776
> 
> 赞同：0
> 
> 时间：2012-05-23T17:14:53.237
> 
> 标签：javascript, html

我正在开发一个 HTML5 游戏，并且有一个我认为是数学问题的问题。玩家和敌人对象有一个 pos.x 和 pos.y 值来指示它们在屏幕上的位置。我已经为一些敌人实现了接近检查代码，但对它并不完全满意。目前敌人正在检查玩家是否在一定距离内，在 x 和 y 轴上为 200 或 -200。这意味着实体正在扫描自身周围的 400x400 方格。

我想把它变成一个半径为 200 的圆。我的代码就这样。

```
if ((player.pos.x - enemy.pos.x > 200 && player.pos.x - enemy.pos.x < 200) 
  && (player.pos.y - enemy.pos.y > 200 && player.pos.y - enemy.pos.y < 200)) {
    //Do something...
} 
```

这是我的游戏，如果你想看看的话。接近的敌人在第二个也是目前最后一个级别:)

[http://project.dnsalias.com/](http://project.dnsalias.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:17:06.360

这是非常基础的数学。

检查 (x [1] - x [0] ) ² + (y [1] - y [0] ) ² < r ²

```
function inRange(p0, p1, r) {
   r = r || 200;
   var dx = p0.x - p1.x;
   var dy = p0.y - p1.y;

   return (dx * dx + dy * dy) < (r * r);
} 
```

像这样称呼它：

```
if (inRange(player.pos, enemy.pos)) { 
    ...
} 
```

您可以提供第三个可选参数来更改检测半径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:22:32.787

也许您可以改用欧几里得距离函数？这将类似于 (player.pos.x - 敌人.pos.x) x (player.pos.x - 敌人.pos.x) + (player.pos.y - 敌人.pos.y) x (player.pos.x) pos.y -enemy.pos.y) = 200 x 200。抱歉，我不知道平方根和平方函数的语法。

# ruby-on-rails-3 - 在哪里放置默认值以从 Rails 中的模型返回？

> ID：10724777
> 
> 赞同：2
> 
> 时间：2012-05-23T17:14:56.860
> 
> 标签：ruby-on-rails-3, models

我有一个名为 City 的模型。

我有几种方法可以根据不同的属性（靠近邮政编码的城市、按人口计算的城市等）来寻找城市。但是，如果没有找到一个城市，我想默认为一个给定的城市，比如说纽约。

所以我发现自己经常这样做：

```
@city = City.find_by_zip_code(83030)
if @city.nil?
 @city = City.find_by_name('New York')
end 
```

这只是我通过邮政编码查看的一种方法，但我一直在用几种方法这样做。我应该在哪里以及如何集中这个默认值：

```
City.find_by_name('New York') 
```

编辑：

有这样的方法是个好主意：

```
def self.default_city
 @default_city = City.find_by_name('New York')
end 
```

为了避免每次我想获取默认城市时都获取数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:25:29.243

您至少可以更轻松地输入：

```
@city = City.find_by_zip_code(83030) || City.find_by_name('New York') 
```

为了避免额外的数据库命中，缓存默认值：

```
def self.default_city
  Rails.cache.fetch('default_city') do
    City.find_by_name('New York')
  end
end 
```

我有一篇博客文章，其中包含有关此类缓存的更多详细信息： [http ://www.tmatthew.net/blog/rails-caching-example](http://www.tmatthew.net/blog/rails-caching-example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:19:58.730

在 ActiveRecord::Base 中查找 find_or_initialize_by_

[http://api.rubyonrails.org/classes/ActiveRecord/Base.html](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)

# sql - 将字符变量值更改为新的观察值 SAS

> ID：10724779
> 
> 赞同：0
> 
> 时间：2012-05-23T17:15:00.520
> 
> 标签：sql, input, sas, substr

我有一个类似于这个的数据集：

```
DATA zzz;
input prop $15\. state $; 
datalines;
101|102|103|224  CA
104|105|106      CA
107|108|109      FL
110|111|112|989  FL
; 
run; 
```

我想分解 prop 变量并将每个值作为与状态匹配的新观察值。IE，我想结束：

道具状态

第 1 行：101 CA

第 2 行：102 CA

等等。

在处理 SAS 中的新行时，我总是感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:09:20.900

有很多方法可以做到这一点；这是一个：

```
DATA zzz;
   length prop $3 state $2;
   keep prop state;
   input prop_txt $15\. state $;
   i = 1;
   do while (i ne 0);
      prop = scan(prop_txt,i,'|');
      i = i + 1;
      if prop = ' '
         then i = 0;
         else output;
      end;
   datalines; 
101|102|103|224  CA 
104|105|106      CA 
107|108|109      FL 
110|111|112|989  FL 
run; 
```

当然，这是基于您描述的数据。我对你想要保留的变量的长度做了一个假设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:38:00.407

除了鲍勃的出色回答之外，还可以这样做：

```
 DATA zzz; 
 input prop $15\. state $; 
  do i = 1 to countw( prop, "|" );
   propn = scan( prop, i, '|' );
   output;
  end;
 datalines;
 101|102|103|224  CA
 104|105|106      CA
 107|108|109      FL
 110|111|112|989  FL
 ; 
 run; 
```

# c++ - 是否可以确定一个类型是否是作用域枚举类型？

> ID：10724783
> 
> 赞同：22
> 
> 时间：2012-05-23T17:15:30.853
> 
> 标签：c++, enums, c++11, metaprogramming, typetraits

是否有类型特征，或者是否可以编写类型特征`is_scoped_enum<T>`：

*   if`T`是一个范围枚举，`is_scoped_enum<T>::value`is`true`和
*   如果`T`是任何其他类型，`is_scoped_enum<T>::value`则为假

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-23T17:18:22.940

我认为测试它是否是一个枚举*并且*不能隐式转换为底层类型应该可以解决问题。

```
template <typename T, bool B = std::is_enum<T>::value>
struct is_scoped_enum : std::false_type {};

template <typename T>
struct is_scoped_enum<T, true>
: std::integral_constant<bool,
    !std::is_convertible<T, typename std::underlying_type<T>::type>::value> {}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-02T18:38:53.157

C++23 将提供*is_scoped_enum*，一旦实现就可以使用。有关文档，请参阅此链接：[is_scoped_enum](https://en.cppreference.com/w/cpp/types/is_scoped_enum)。我认为 clang 尚不支持此功能（有关支持哪些功能的最新信息，请参阅[clang 状态）。](https://clang.llvm.org/cxx_status.html)

现在我正在使用上面答案的稍微简化的版本（使用 _v 和 _t）以及*is_underlying*的实现：

```
// C++ 23 should include 'is_scoped_enum' and 'to_underlying' so the following
// code can be removed:

template<typename T, bool B = std::is_enum_v<T>>
struct is_scoped_enum : std::false_type {};

template<typename T>
struct is_scoped_enum<T, true>
  : std::integral_constant<
      bool, !std::is_convertible_v<T, std::underlying_type_t<T>>> {};

template<typename T>
inline constexpr bool is_scoped_enum_v = is_scoped_enum<T>::value;

template<typename T, std::enable_if_t<is_scoped_enum_v<T>, int> = 0>
[[nodiscard]] constexpr auto to_underlying(T x) noexcept {
  return static_cast<std::underlying_type_t<T>>(x);
} 
```

# javascript - 以有效的.Net格式在javascript中字符串化日期

> ID：10724784
> 
> 赞同：3
> 
> 时间：2012-05-23T17:15:43.520
> 
> 标签：javascript, asp.net, json, datetime, serialization

我在客户端有一个 JSON 对象，我想在服务器端返回。
为此，我有一个隐藏对象，其中放置了我的对象的字符串化版本。

```
$("#<%=hidden.ClientID%>").val(JSON.stringify(obj)); 
```

然后，在服务器端，我尝试使用 JavaScriptSerializer 对其进行反序列化。

我的问题：字符串化对象包含一个日期，我无法用 de JavaScriptSerializer 解析它。
我所做的：修改日期格式以使其适合 .Net 格式：

```
function FormatDate(date) {
    if (typeof (date.getTime) != "undefined") {
        return '\\/Date(' + date.getTime() + ')\\/'
    }

    return date;
} 
```

这似乎提供了一个很好的格式，但是，当我在具有格式良好的日期的对象上使用 JSON.stringify 时，它会添加一个额外的反斜杠，因此 JavaScriptSerializer 仍然无法获取它。

关于如何在隐藏中以有效格式获取它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:35:22.513

我使用下面的代码在序列化后修复数据。

```
var data = JSON.stringify(object);
data = data.replace(/\\\\/g, "\\"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T13:50:36.573

我有同样的问题和

```
'\/Date(' + date.getTime() + ')\/'; 
```

为我工作。你只有一个双反斜杠而不是一个反斜杠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-11T13:55:47.033

老问题，但万一有人像我一样来到这里寻找解决方案，发现这个可行： [https ://stackoverflow.com/a/21865563/364568](https://stackoverflow.com/a/21865563/364568)

```
function customJSONstringify(obj) {
    return JSON.stringify(obj).replace(/\/Date/g, "\\\/Date").replace(/\)\//g, "\)\\\/")
} 
```

# java - 告诉任意 SSLSocketFactories 信任所有证书？

> ID：10724789
> 
> 赞同：0
> 
> 时间：2012-05-23T17:16:09.310
> 
> 标签：java, ssl, ssl-certificate

我有一个实用程序 SSLSocketFactory 类，如果你想信任所有证书和/或由于 JDK 错误而转向 Deffie Hellman，它基本上允许你切换。我最近添加了提供您自己的 SSLSocketFactory 的选项，但似乎忘记了一些东西

在工厂中禁用 Diffie Hellman 很容易，只需在创建套接字时添加一些代码即可。但是，为了信任所有证书，我用不同的证书替换了工厂

```
 public UtilSSLSocketFactory trustAllCertificates() {
            if (trustingAllCertificates)
                    //Already doing this, no need to do it again
                    return this;
            trustingAllCertificates = true;
            try {
                    TrustManager[] tm = new TrustManager[]{new TrustingX509TrustManager()};
                    SSLContext context = SSLContext.getInstance("SSL");
                    context.init(new KeyManager[0], tm, new SecureRandom());
                    wrappedFactory = (SSLSocketFactory) context.getSocketFactory();
            } catch (Exception e) {
                    throw new RuntimeException("Can't recreate socket factory that trusts all certificates", e);
            }
            return this;
    } 
```

有没有办法告诉任意 SSLSocketFactory 信任所有证书而不替换它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T18:24:58.977

除了盲目信任所有证书通常是一个坏主意（如果您希望使用 SSL/TLS 来保护通信）这一事实之外，您使用的模式似乎很奇怪。

`SSLContext`是工厂`SSLSocketFactory`，而工厂又是工厂`SSLSocket`。

如果需要，您可以使用 : 设置默认值`SSLContext`（从 Java 6 开始），`SSLContext.setDefault(...)`这将影响默认值`SSLSocketFactory`，但可能不会更具体。

您无法更改`SSLContext`现有`SSLSocketFactory`实例使用的。

除非您现有`SSLSocketFactory`的与具有特定设置的默认实现不同（例如，在返回它之前您会在创建的套接字上进行调整），否则您尝试做的似乎不适合这里的预期设计模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T17:24:04.733

> 任意 SSLSocketFactory 信任所有证书而不替换它

不可以。您*必须*设置自己的自定义“信任所有证书”管理器，否则将使用默认的管理器，它会“咨询”`cacerts`您的 JDK 安装中的 java 的默认信任库。

但是从安全的角度来看，如果您不打算进行服务器身份验证，那么您最好使用纯 TCP 并避免 SSL 开销，因为您实际上并没有任何安全措施。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-23T17:51:31.147

试试这个代码......它是一个工作代码，在你的代码中使用这个类，就像这样

```
HttpClient client = MySSLSocketFactory.getNewHttpClient(); 
```

这是代码

```
import java.io.IOException;
import java.net.Socket;
import java.net.UnknownHostException;
import java.security.KeyManagementException;
import java.security.KeyStore;
import java.security.KeyStoreException;
import java.security.NoSuchAlgorithmException;
import java.security.UnrecoverableKeyException;
import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;

import javax.net.ssl.SSLContext;
import javax.net.ssl.TrustManager;
import javax.net.ssl.X509TrustManager;

import org.apache.http.HttpVersion;
import org.apache.http.client.HttpClient;
import org.apache.http.conn.ClientConnectionManager;
import org.apache.http.conn.scheme.PlainSocketFactory;
import org.apache.http.conn.scheme.Scheme;
import org.apache.http.conn.scheme.SchemeRegistry;
import org.apache.http.conn.ssl.SSLSocketFactory;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager;
import org.apache.http.params.BasicHttpParams;
import org.apache.http.params.HttpParams;
import org.apache.http.params.HttpProtocolParams;
import org.apache.http.protocol.HTTP;

public class MySSLSocketFactory extends SSLSocketFactory {
    SSLContext sslContext = SSLContext.getInstance("TLS");

    public MySSLSocketFactory(KeyStore truststore) throws NoSuchAlgorithmException, KeyManagementException, KeyStoreException, UnrecoverableKeyException {
       super(truststore);

       TrustManager tm = new X509TrustManager() {
           public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {
           }

           public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {
           }

           public X509Certificate[] getAcceptedIssuers() {
               return null;
           }
       };

       sslContext.init(null, new TrustManager[] { tm }, null);
    }

    @Override
    public Socket createSocket(Socket socket, String host, int port, boolean autoClose) throws IOException, UnknownHostException {
       return sslContext.getSocketFactory().createSocket(socket, host, port, autoClose);
    }

    @Override
    public Socket createSocket() throws IOException {
       return sslContext.getSocketFactory().createSocket();
    }

public static HttpClient getNewHttpClient() {
    try {
       KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());
       trustStore.load(null, null);

       SSLSocketFactory sf = new MySSLSocketFactory(trustStore);
       sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);

       HttpParams params = new BasicHttpParams();
       HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
       HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);

       SchemeRegistry registry = new SchemeRegistry();
       registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
       registry.register(new Scheme("https", sf, 443));

       ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);

       return new DefaultHttpClient(ccm, params);
    } catch (Exception e) {
       return new DefaultHttpClient();
    }
}

} 
```

# video - 无法导出视频：仅 h264 (ai56 / 0x36356961) FCP？

> ID：10724794
> 
> 赞同：0
> 
> 时间：2012-05-23T17:16:24.427
> 
> 标签：video, video-processing, video-encoding

我不得不放弃这个，转向你。

有几个使用此编解码器视频进行编辑的视频：h264 (ai56 / 0x36356961)。我可以使用 ffmpeg 读取它，它是 .mov 文件的通道之一。

没有一个通常的嫌疑人可以阅读它：iMovie、QuickTime、VLC、ffmpeg、Perian，......什么都没有。

我的印象是这个编解码器*只能*在 Final Cut Pro 中使用。我对吗？

这是最小的一个视频： [http ://dl.dropbox.com/u/4234369/00101W.mov](http://dl.dropbox.com/u/4234369/00101W.mov)

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:21:08.730

如果你能得到编解码器，你就可以解码和播放文件。ai56 4cc 是[Calibrated{Q} AVC Intra 编解码器](http://calibratedsoftware.com/QAVCIntra.asp)。在 QuickTime 中使用此编解码器似乎很简单，但可能需要付出巨大的努力（因为它与供应商联系并编写一些特殊的代码）才能使其与任何其他软件一起使用，包括您自己的。似乎唯一内置支持 ai56 的应用程序是 FinalCut 6。

# c# - 将部分视图加载到模式弹出窗口中

> ID：10724796
> 
> 赞同：7
> 
> 时间：2012-05-23T17:16:34.077
> 
> 标签：c#, jquery, asp.net-mvc-3, partial-views

我正在使用 MVC3 c# 4.0。

我创建了一个局部视图。

我的页面上有一个按钮，当我单击此按钮时，我希望能够将部分视图加载到模式弹出窗口中。我认为最好的方法是通过 javascript - 我已经在应用程序中使用 jQuery。

关于我如何做到这一点的任何指示？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T17:21:23.170

您可以使用[jQuery UI 对话框](http://jqueryui.com/demos/dialog/)。

因此，您首先编写一个控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    public ActionResult Modal()
    {
        return PartialView();
    }
} 
```

然后是一个`Modal.cshtml`包含要在模式中显示的部分标记的部分：

```
<div>This is the partial view</div> 
```

以及一个`Index.cshtml`包含按钮的视图，该按钮将在单击时将部分显示为模态：

```
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.js")" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {
        $('.modal').click(function () {
            $('<div/>').appendTo('body').dialog({
                close: function (event, ui) {
                    dialog.remove();
                },
                modal: true
            }).load(this.href, {});

            return false;            
        });
    });
</script>

@Html.ActionLink("show modal", "modal", null, new { @class = "modal" }) 
```

显然，在这个例子中，我将直接的脚本放入了 Index 视图，但在实际应用程序中，这些脚本将放入单独的 javascript 文件中。

# c++ - 从gpu特征描述符转换的opencv特征描述符的问题

> ID：10724798
> 
> 赞同：4
> 
> 时间：2012-05-23T17:16:35.083
> 
> 标签：c++, opencv, gpu, surf, feature-descriptor

我在使用openvc将GPU特征描述符矩阵转换为CPU特征描述符矩阵时遇到了一些问题，使用：

```
void downloadDescriptors(const GpuMat& descriptorsGPU, vector<float>& descriptors); 
```

如您所见，此方法将保存描述符的 GpuMat 转换为保存它们的浮点向量。问题是，当我访问这个向量的某个元素时，返回的值与预期的间隔完全不同`0`to `255`。我制作了以下测试程序来比较通过`SURF_GPU`and获得的提取时间和描述`SURF`：

```
clock_t start;
clock_t end;

SURF_GPU surfGPU;
SURF surf;

Mat img1 = imread("Ipo_SP_01.jpg", CV_LOAD_IMAGE_GRAYSCALE);
Mat outimageGPU;
Mat outimageCPU;
GpuMat imgGPU;
imgGPU.upload(img1);

vector<KeyPoint> keyp_A;
vector<KeyPoint> keyp_B;
GpuMat keypGPU;

vector<float> descriptorsConverted;
Mat descriptorsCPU;
GpuMat descriptorsGPU;

start = (clock() * 1000)/CLOCKS_PER_SEC;
surfGPU(imgGPU, GpuMat(), keypGPU, descriptorsGPU);
end = (clock() * 1000)/CLOCKS_PER_SEC;
cout << "GPU time: " << end - start << endl;
surfGPU.downloadKeypoints(keypGPU, keyp_A);
surfGPU.downloadDescriptors(descriptorsGPU, descriptorsConverted);
cout << "GPU Keypoints = " << keyp_A.size() << endl;

start = (clock() * 1000)/CLOCKS_PER_SEC;
surf(img1, Mat(), keyp_B, descriptorsCPU);
end = (clock() * 1000)/CLOCKS_PER_SEC;
cout << "CPU time: " << end - start << endl;
cout << "CPU Keypoints = " << keyp_B.size() << endl;

drawKeypoints(img1, keyp_A, outimageGPU, Scalar(255, 255, 255), DrawMatchesFlags::DEFAULT);
imwrite("GPU.jpg", outimageGPU);
drawKeypoints(img1, keyp_B, outimageCPU, Scalar(255, 255, 255), DrawMatchesFlags::DEFAULT);
imwrite("CPU.jpg", outimageCPU);

return 0; 
```

检查 的元素`descriptorsConverted`，我希望得到 和 之间的值`0`，`255`就像我访问 的元素时得到的一样`descriptorsCPU`。相反，我得到了如下值：

```
-0.000621859
0.000627841
-0.000503146
0.000543773
-8.69408e-05
0.000110254
0.000265697
0.000941789
0.0595061
0.0619723 
```

我怀疑这个问题与返回的类型有关`downloadDescriptors`，尽管很明显它返回了一个浮点向量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:41:57.590

对于描述符，我得到了类似的结果，并且在匹配方面遇到了一些初始问题。我发现当描述符被下载到`std::vector<float> f_descriptors`向量的长度可以被描述符大小（即64或128）整除时，我可以使用以下内容：

```
std::vector<float> f_descriptors;
std::vector<cv::KeyPoint> keypoints;
surfGPU( imgGPU, cv::gpu::GpuMat(), keypoints, f_descriptors  );
descriptorsCPU = cv::Mat( (int)f_descriptors.size()/surfGPU.descriptorSize(), surfGPU.descriptorSize(), CV_32F, f_descriptors[0] ); 
```

另外，我发现从descriptorsGPU上传到descriptorsCPU也做同样的事情，可能更安全：

```
std::vector<cv::KeyPoint> keypoints;
cv::gpu::GpuMat descriptorsGPU
surfGPU( imgGPU, cv::gpu::GpuMat(), keypoints, descriptorsGPU  );
descriptorsGPU.download( descriptorsCPU ); 
```

# ios - 尝试播放某些曲目时出现 cocoalibspotify 错误

> ID：10724799
> 
> 赞同：2
> 
> 时间：2012-05-23T17:16:40.820
> 
> 标签：ios, spotify, cocoalibspotify-2.0

我正在尝试使用 cocoalibspotify 从 SPArtistBrowse 的结果中播放热门曲目。大多数情况下，这可以完美运行，但偶尔会出现以下错误：

```
Error Domain=com.spotify.CocoaLibSpotify.error Code=3 "The track cannot be played" 
```

这只发生在特定轨道上，并且对于受影响的轨道，它是一致且可重复的（例如，Armin van Buren 的顶级轨道，spotify:track:6q0f0zpByDs4Zk0heXZ3cO，在尝试使用下面的代码播放时总是会出现此错误）。奇怪的是，如果我使用简单的播放器示例应用程序并输入受影响曲目的 URL，则曲目播放正常；所以我的预感是它与从 SPArtistBrowse 加载的曲目有关。

这是我用来播放曲目的代码：

```
- (void)playTrack
{   
    SPTrack *track = [self.artistBrowse.topTracks objectAtIndex:self.currentTrackIndex];

    [SPAsyncLoading waitUntilLoaded:track then:^(NSArray *tracks) {
        [self.playbackManager playTrack:track callback:^(NSError *error) {

            if (error) {
                self.currentTrackIndex++;
                if (self.currentTrackIndex < self.artistBrowse.topTracks.count) {
                    [self playTrack];
                } else {
                    [self.activityIndicator stopAnimating];
                    self.activityIndicator.alpha = 0;
                    self.nowPlayingLabel.text = @"Spotify Error";
                }
            } else {
                [self.activityIndicator stopAnimating];
                self.activityIndicator.alpha = 0;
                self.nowPlayingLabel.text = track.name;

                // Set "Now Playing" info on the iOS remote control
                MPNowPlayingInfoCenter *infoCenter = [MPNowPlayingInfoCenter defaultCenter];
                NSMutableDictionary *dic = [[NSMutableDictionary alloc] init];
                [dic setValue:track.name forKey:MPMediaItemPropertyTitle];
                [dic setValue:self.artistLabel.text forKey:MPMediaItemPropertyArtist];
                infoCenter.nowPlayingInfo = dic;
            }
        }];
    }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:08:36.247

艺术家浏览应该影响任何东西 - 曲目就是曲目。但是，如果您可以可靠地重现它，请 fork CocoaLibSpotify 并将失败的单元测试添加到单元测试套件中 - 这样我们就可以修复它。

Spotify播放服务也有可能在错误的时间不可用，但这种情况相当罕见。

# ios - iOS 开发：有问题的框架搜索路径

> ID：10724800
> 
> 赞同：0
> 
> 时间：2012-05-23T17:16:41.643
> 
> 标签：ios, xcode, frameworks, ios-simulator

我有一个 iOS 应用程序，我想在模拟器上测试它。当我运行项目时，xcode 抱怨我的框架文件**“文件中缺少所需的架构 i386”。**

我在网上做了一些搜索，它说这是因为 xcode 在为模拟器构建项目时使用了适用于实际设备的框架文件。解决方法是在构建设置的框架搜索路径下添加模拟器框架文件夹。

好的，现在的问题是，这样做解决了在模拟器上构建项目的问题，但是后来当我想在实际设备上构建项目时，xcode 再次开始抱怨说**框架中有一些 openGL typedef 的重新定义。**要解决此问题，我必须删除我添加的搜索路径项。

那么有没有一种简单的方法可以避免出现这种问题呢？当我想在不同平台上构建项目时，我不想一遍又一遍地切换搜索路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:06:43.120

如果您将项目从 4.2 升级到 4.3.2 样式，它通常会丢失您正在构建的目标所需的架构。通常您只需将它们添加回来或更改目标 SDK。

# windows-phone-7 - Windows Phone 7 列表框选择数据绑定

> ID：10724802
> 
> 赞同：1
> 
> 时间：2012-05-23T17:16:47.547
> 
> 标签：windows-phone-7, data-binding, listbox, listboxitem

我将[本教程](http://www.netmagazine.com/tutorials/build-your-first-windows-phone-7-app)用作我的第一个应用程序的基础。我正在尝试选择一个列表框项并从该项中查看数据，但是（我的 Android 和 iOS 大脑对此有疑问），我如何查看其背后的数据绑定？

```
lstContact.ItemsSource = from contact in xmlContact.Descendants("contact")
                                 select new ContactItem
                                 {
                                     ImageSource = contact.Element("Image").Value,
                                     FName = contact.Element("FName").Value,
                                     LName = contact.Element("LName").Value
                                     Extension = contact.Element("Extension").Value,
                                     Email = contact.Element("Email").Value,
                                     ID = contact.Element("ID").Value
                                 }; 
```

这就是我设置我的数据源的方式，并且它是正确的。我将如何进入并从所述列表框项目中获取电子邮件或扩展名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:02:41.413

在您的示例中，`lstContact.ItemsSource`现在实际上是一个`IEnumerable<ContactItem>`. 假设您想要一个“选定”项目，在您的`SelectionChanged`活动中：

```
public void ListBoxContainerSelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            if (lstContact.SelectedIndex == -1) return; 
            ContactItem contactItem = (ContactItem)lstContact.SelectedItem; 
            /*do something */ 
            lstContact.SelectedIndex = -1;
} 
```

# iphone - 如何以编程方式从 textview 中关闭键盘

> ID：10724803
> 
> 赞同：3
> 
> 时间：2012-05-23T17:16:51.240
> 
> 标签：iphone, ios, uitextview

`resignFirstResponder`有没有办法在不调用iOS的情况下隐藏或不显示键盘？我知道隐藏键盘的不同方法，第一个是使 textview 不可编辑，或者使用

```
- (BOOL)textFieldShouldEndEditing:(UITextView *)textview
{
    [textview resignFirstResponder];
} 
```

但在我的情况下，这些方法不会奏效，因为我只想关闭或隐藏键盘，但需要在 textview 中进行编辑。我有一个包含一些文本的文本视图，当我点击它需要选择的句子时，我已经很好地完成了选择部分，但是当我在我的项目中写上面的键盘关闭方法时，点击的句子的选择不会出现,.有什么方法可以解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T17:28:43.430

仅当您处于编辑模式时，文本字段的选择才会保留。当您辞去第一响应者时，您的选择也会消失。

为避免将键盘带入编辑模式，您可以更改输入视图。例如，看代码，

```
 textview.inputView = [[UIView alloc] init]; 
```

这带来了一个自定义输入视图，它是不可见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:35:22.197

添加

```
self.textView.editable = NO; 
```

试试这个

```
NSRange selection = [yourTextView.text rangeOfString:yourTextView.text]; 
if( selection.location != NSNotFound ){ yourTextView.selectedRange = selection; } 
```

它将从文本视图中删除键盘。希望能帮助到你。

# php - 关闭 Excel 而不保存在 PHP 中

> ID：10724806
> 
> 赞同：1
> 
> 时间：2012-05-23T17:16:55.903
> 
> 标签：php, excel, com, save

我在我的 Windows 服务器上使用 Excel.Application COM 对象。

目前我正在使用 : `$this->excel->Quit();` 但它会启动一个对话框，要求保存。

**我想知道我们是否可以在不保存的情况下强制关闭 excel 文件。**

编辑：我可以补充一点，该文件实际上已被修改，但我在退出前调用了“另存为”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:33:18.963

[MSDN 页面](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel._application.quit)建议您可以将 Saved 属性设置为 True 或将 DisplayAlerts 属性设置为 False 以取消保存对话框。

# php - Do list 按日期分隔 PHP

> ID：10724811
> 
> 赞同：0
> 
> 时间：2012-05-23T17:17:14.127
> 
> 标签：php, list, foreach, notifications

我需要你的帮助。

我正在创建一个报告系统，我需要它来列出所有根据日期分组的报告。

前任：

今天 - 5 月 23 日结果结果 2

5 月 22 日结果 3 4 结果 5 结果

5 月 21 日 6 个结果 7 个结果

上市我可以悄悄地做，问题是要区分日期在相应的块内。

我的代码：

```
<?php
$data_anterior = "0000-00-00";
$data_hoje = date("Y-m-d");
//Se houverem registros
foreach($notificacoes AS $notif) :
?>

<?
//Verifica a data e faz o tratamento
$data_cadastro = date("Y-m-d", strtotime($notif->data_cadastro));
?>                        

<?php if($data_cadastro == $data_hoje && $data_anterior != $data_cadastro) { ?>

<h4>Hoje <span><?php echo $CI->funcoes->data_abreviada($data_cadastro); ?></span></h4>
<ul class="list-notificacoes">

<?php } ?>

<?php if($data_cadastro < $data_hoje && $data_anterior != $data_cadastro) { ?>

<div class="graybox">
        <header class="clearfix">
                <h4><?php echo $CI->funcoes->data_abreviada($data_cadastro); ?></h4>
                <a href="" class="btnGrayBox ir">Toggle</a>
        </header>
        <ul class="list-notificacoes">

<?php } ?>

<li class="clearfix">
    <div class="box-left">
        <span class="icon-lista-ate">&nbsp;</span>
        <a href=""><?php echo stripslashes($usuario->nome); ?></a>
        <span>fez tal tarefa</span>
        <a href=""><?php echo stripslashes($evento->titulo); ?></a>
    </div>
    <div class="box-right">
        <span><?php echo date("H:i", strtotime($notif->data_cadastro)); ?></span>
        <a class="icon-close ir" href="">Excluir</a>
    </div>
</li>

<?php if($data_cadastro == $data_hoje && $data_anterior != $data_cadastro) { ?>
</ul>
<?php } ?>

<?php if($data_cadastro < $data_hoje && $data_anterior != $data_cadastro) { ?>
</ul>
</div>
<?php } ?>

<?php $data_anterior = date("Y-m-d", strtotime($notif->data_cadastro)); ?>

<?php endforeach; ?> 
```

我的问题是关闭块，因此它破坏了代码。

我的IF有问题，有人帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:39:39.980

我认为这是一个错字。

在开始标记中缺少 foreach 语句“php”之后：

```
<? instead of 
<?php 

//Verifica a data e faz o tratamento
$data_cadastro = date("Y-m-d", strtotime($notif->data_cadastro));
?>) 
```

看看这是否能解决您的问题。

# php - 在 php 中为 Windows 和 Mac OSX 获取站点位置

> ID：10724817
> 
> 赞同：0
> 
> 时间：2012-05-23T17:17:37.733
> 
> 标签：php, http, url

我在 php 脚本中有这个来获取我的站点的 uri，以便使用 http 访问文件。

```
$feast_info_dir = "http://".$_SERVER['HTTP_HOST']."/"; 
```

我在文件名后面加上类似的东西

```
$filename = $prepend.$row_today[9]; 
```

这应该允许我得到一个 url 字符串：`http://localhost:82/filename.php`。

这适用于 Windows，但不适用于 Mac。在 Mac 上我需要什么？

谢谢。

# reporting-services - CRM 2011 将 QueryString 传递给 SSRS 报告

> ID：10724818
> 
> 赞同：1
> 
> 时间：2012-05-23T17:17:38.403
> 
> 标签：reporting-services, ssrs-2008, dynamics-crm, dynamics-crm-2011

我在 SSRS 中有一个报告，我在 Dynamics CRM 2011 中有一个报告，当报告运行时，它在 url 中传递了 id 之类的`http://url&id=123-123-123-123`。我试图在 ssrs 中制作报告以从查询字符串中获取 id 并在参数中使用它来确定要显示的数据。这是可能的吗？如果是这样，人们将如何去做。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:10:18.133

CRM 实际上发送一个参数，该参数可用于选择运行报告的数据的过滤视图。请参阅[报告编写者指南](http://msdn.microsoft.com/en-us/library/bb955081)，尤其是[在报告中使用过滤器。](http://msdn.microsoft.com/en-us/library/bb955092.aspx)

在最简单的情况下，您将编写主数据集以进行选择，如下所示：`SELECT <column1>, <column2>, <columnN> FROM FilteredAccount AS CRMAF_FilteredAccount`

如果这不能回答您的问题...您可以编写一个嵌入报表查看器控件的 aspx 页面。从那里您将读取查询字符串，加载报告，然后根据查询字符串值设置一些参数。您必须有自定义功能区选项才能启动您的自定义页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T02:10:36.283

我有同样的问题。

[这](http://social.microsoft.com/Forums/en-IN/crmdevelopment/thread/741ff057-94d8-4431-b831-610e035b7f9f)是对我有用的解决方案：

# unit-testing - 如何在 Team City 中忽略命名空间及其测试？

> ID：10724820
> 
> 赞同：0
> 
> 时间：2012-05-23T17:17:54.987
> 
> 标签：unit-testing, nunit, continuous-integration, teamcity

我有一些单元测试

```
 some.namespace.database {

    [SetUpFixture]
    public class Config{ }

    [TestFixture]
    public class SomeTests{

       [Test]
       public void MyTest(){}
    }
} 
```

我如何告诉团队城市忽略所有内容`some.namespace.database {}`？

我可以在测试中使用 Ignore 属性，但我想明确排除一个命名空间的运行。

感谢您提供任何提示或技巧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:32:29.403

正如保罗菲利普斯建议的那样，将这些测试分解到他们自己的项目中。或者您可以使用特殊的 NUnit 类别标记它们，然后将该类别添加到“NUnit 类别排除”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:26:37.607

您可以将这些测试分解到它们自己的项目中，然后将其从测试程序集列表中删除。不理想，但我相信这会奏效。（如果您通过通配符包含程序集，则可以将其添加到排除列表中。）

# c# - 如何从命令行正确创建 dotnetnuke 用户帐户？

> ID：10724822
> 
> 赞同：3
> 
> 时间：2012-05-23T17:18:08.933
> 
> 标签：c#, dotnetnuke

我正在尝试创建一个命令行快速程序来一次性将用户从旧系统（非 DNN）导入到新系统。但是，`NullReferenceException`在以下代码行中抛出了 a：

```
 var user = new UserInfo();
        user.PortalID = portalId;
        user.FirstName = firstName; 
```

最后一行是发生异常的地方。我知道这段代码在模块中运行时有效，因为它是我正在使用的库的一部分。我想这是错误的，因为`UserInfo`该类依赖于通常在 Web 环境中设置的信息。

有什么办法可以做到这一点吗？我真的不想让它作为一个在生产站点上运行的模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:36:21.157

您需要配置必要的提供程序才能使用`UserController`和`UserInfo`类。最直接的方法是使用网站的工作配置并将应用程序实现为 DNN 模块。但是您也可以尝试将所需的 DLL 和配置部分从 DNN 站点复制到控制台应用程序，并使用 DNN 源来调试问题。

在这种情况下，源告诉设置`UserInfo`对象的`FirstName`属性失败，因为该`FirstName`属性由配置文件提供程序支持，该配置文件提供程序使用缓存提供程序和数据提供程序进行数据访问。默认情况下，配置文件由`DNNProfileProvider`使用`FileBasedCachingProvider`和`SqlDataProvider`来获取配置文件属性和数据的 实现。调用时还会为新`UserInfo`对象检索配置文件属性定义`ProfileController.GetUserProfile`。这就是为什么`NullReferenceException`会被抛出。

DNN 5.6.3 中的相应属性为：

**用户信息.vb**

```
<SortOrder(1), MaxLength(50), Required(True)> _
Public Property FirstName() As String
    Get
        Return Profile.FirstName
    End Get
    Set(ByVal Value As String)
        Profile.FirstName = Value
    End Set
End Property

<Browsable(False)> _
Public Property Profile() As UserProfile
    Get
        'implemented progressive hydration
        'this object will be hydrated on demand
        If _Profile Is Nothing Then
            _Profile = New UserProfile
            ProfileController.GetUserProfile(Me)
        End If
        Return _Profile
    End Get
    Set(ByVal Value As UserProfile)
        _Profile = Value
    End Set
End Property 
```

# hibernate - 实体名称在命名查询中被替换

> ID：10724823
> 
> 赞同：0
> 
> 时间：2012-05-23T17:18:14.143
> 
> 标签：hibernate, named-query

这是场景：

*   我有 2 个用 hibernate 映射的类：“Foo”和“EnhancedFoo”

*   两个类都映射到同一个表“foo”

*   EnhancedFoo 扩展了 Foo

*   Foo.hbm.xml 包含一个命名查询“find active foos”，如下所示：

    ```
     from Foo foo where foo.active = true 
    ```

现在，如果我尝试加载配置，我会得到这个异常：

```
could not resolve property: active of: EnhancedFoo [
    from EnhancedFoo foo where foo.active = true
] 
```

这是正确的，因为在EnhancedFoo.hbm.xml 中没有映射属性“active”，但是为什么hibernate 用“EnhancedFoo”替换“Foo”？

* * *

这是我尝试过的：

尝试在映射文件上添加“实体名称”属性，如下所示：

```
<class name="myproject.data.entity.Foo" table="foo" entity-name="Foo">
.......
<class name="myproject.data.entity.EnhancedFoo" table="foo" entity-name="EnhancedFoo"> 
```

然后配置加载正常，但每当我尝试插入 Foo 时，我都会得到这个：

```
org.hibernate.MappingException: Unknown entity: myproject.data.entity.Foo 
```

* * *

这些是代码的相关部分：

```
//Foo.java
public class Foo 
{
  private long id;
  private boolean active;

  // getters and setters
}

//EnhancedFoo.java
public class EnhancedFoo extends Foo
{
  private String extraProperty

  // getter and setter
}

//Foo.hbm.xml
//.....
<class name="myproject.data.entity.Foo" table="foo" entity-name="Foo">
  <id column="id" name="id">
    <generator class="assigned"/>
  </id>

  <property name="active" column="active" />
</class>

<query name="find_active_foos">
  <![CDATA[
    from Foo foo where foo.active = true
  ]]>
</query>

//EnhancedFoo.hbm.xml
//.....
<class name="myproject.data.entity.EnhancedFoo" table="foo" entity-name="EnhancedFoo">
  <id column="id" name="id">
    <generator class="assigned"/>
  </id>
</class> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:05:26.967

我看到两个问题：

1）你永远不应该同时映射超类和子类。问题是，子类实例也是超类的实例，在您的示例中，EnhancedFoo 实例也是 Foo 的实例。在查看会话缓存时，这会混淆休眠。（我没有遇到你的问题，但是我有效果，当我以主键值作为条件加载超类实例时，uniqueResult() 失败，因为它在缓存中找到了超类的一个实例和一个子类。）您替换的 Foo 也可能导致类似的效果。

如果你想继续这两个映射，你可以这样做

```
//AbstractFoo.java
public abstract class AbstractFoo 
{
  private long id;
  private boolean active;
  // getters and setters
}

//Foo.java
public class Foo extends AbstractFoo
{  // empty body
}

//EnhancedFoo.java
public class EnhancedFoo extends AbstractFoo
{
  private String extraProperty
  // getter and setter
} 
```

你让映射文件保持原样。

（另一种可能性是只映射一个类并处理 Java 中的差异。）

2）对于您的插入问题：
您在项目中收到`Unknown entity: myproyect.data.entity.Foo`带有“y”而不是“j”的错误消息。你那里有错字吗？

# php - jQuery ajax 表单识别同一页面上的不同表单

> ID：10724825
> 
> 赞同：0
> 
> 时间：2012-05-23T17:18:14.783
> 
> 标签：php, jquery, ajax

我在php中制作了一个表格。我在文档中使用了 3 种不同的表格。所以我必须区分这些形式。因此我正在使用提交“名称标签”。

```
if ('POST' == $_SERVER['REQUEST_METHOD']) {
    if (isset($_POST['submit_1'])) {
        ....
    }
    if (isset($_POST['submit_2'])) {
        ....
    }
    if (isset($_POST['submit_3'])) {
        ....
    }
} 
```

这就是我检查这些不同提交按钮的方式。

但是我注意到我需要在 JS 中使用 click 函数而不是 submit 函数（因为表单不应该通过页面重新加载提交）

```
$('.erzaehlcafe_submit').click(function(){
    if ($('#year_from').val() == 'none' || $('#month_from').val() == 'none' 
            || $('#day_from').val() == 'none' || $('#topic').val() == '' || $('#contributer').val() == '' 
            || $('#begin').val() == '' || $('#place').val() == '' || $('#entrance').val() == '') {
        $("#dialog_empty").dialog( "open" );
        return false;
    }
    var form = $('#erzaehlcafe_add');  
    var data = form.serialize(); 

    $.ajax({
        url: "index.php?section=events",
        type: "POST",
        data: data,
        success: function (reqCode) {
        alert(reqCode);
            if (reqCode == 1) {
                //Date inserted into DB
                $("#dialog_add_event").dialog( "open" );
            } else {
                $("#dialog_add_event_error").dialog( "open" );
            }
        }
    });
    return false; //dont submit form
}); 
```

那么如何区分这些形式呢？（他们都对相同的输入使用相同的名称）。

解决该问题的唯一方法是为所有类型的输入定义其他名称索引。还有其他方法吗？

编辑：这是我的模板（记得我使用了 submit_1、submit_2 和 submit_3 而不是 erzaehlcafe_submit 等等以使其更精确）

```
<div id="event_accordion">
<h3><a href="#">Erzählcafé hinzufügen</a></h3>
<div>
    <form id="erzaehlcafe_add" action="index.php?section=events" method="post" accept-charset="utf-8">
        <table>
            <tr>
                <td>Datum:</td>
                <td>
                    <select name="day_from" id="day_from">
                        <option value="none" class="bold italic">Tag</option>
                            <?php
                                for($i=1; $i<=31; $i++){
                                    echo "<option value=\"".$i."\">".$i."</option>\n";
                                }
                            ?>
                    </select>
                    <select name="month_from" id="month_from">
                        <option value="none" class="bold italic">Monat</option>
                            <?php
                                for($i=1; $i<=12; $i++){
                                    echo "<option value=\"".$i."\">".$month_name[$i]."</option>\n";
                                }
                            ?>
                    </select>
                    <select name="year_from" id="year_from">
                        <option value="none" class="bold italic">Jahr</option>
                            <?php
                                for($i=2008; $i<=$year; $i++){
                                    echo "<option value=\"".$i."\">".$i."</option>\n";
                                }
                            ?>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Thema:</td>
                <td><input type="text" name="topic" id="topic" /></td>
            </tr>
            <tr>
                <td>Referent:</td>
                <td><input type="text" name="contributer" id="contributer" /></td>
            </tr>
            <tr>
                <td>Beginn:</td>
                <td><input type="text" name="begin" id="begin" /> Uhr</td>
            </tr>
            <tr>
                <td>Ort:</td>
                <td><input type="text" name="place" id="place" /></td>
            </tr>
            <tr>
                <td>Eintritt:</td>
                <td><input type="text" name="entrance" id="entrance" /> €&lt;/td>
            </tr>
        </table>
        <br />
        <div id="add_erzaehlcafe">
            <input type="submit" id="small" class="erzaehlcafe_submit" name="erzaehlcafe_submit" value="speichern">
        </div>
    </form>
</div>
<h3><a href="#">Vortrag hinzufügen</a></h3>
<div>
    <form name="vortrag_add" action="index.php?section=events" method="post" accept-charset="utf-8">
        <table>
            <tr>
                <td>Datum:</td>
                <td>
                    <select name="day_from">
                        <option value="0" class="bold italic">Tag</option>
                            <?php
                                for($i=1; $i<=31; $i++){
                                    echo "<option value=\"".$i."\">".$i."</option>\n";
                                }
                            ?>
                    </select>
                    <select name="month_from">
                        <option value="0" class="bold italic">Monat</option>
                            <?php
                                for($i=1; $i<=12; $i++){
                                    echo "<option value=\"".$i."\">".$month_name[$i]."</option>\n";
                                }
                            ?>
                    </select>
                    <select name="year_from">
                        <option value="0" class="bold italic">Jahr</option>
                            <?php
                                for($i=2008; $i<=$year; $i++){
                                    echo "<option value=\"".$i."\">".$i."</option>\n";
                                }
                            ?>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Thema:</td>
                <td><input type="text" name="name_topic" id="name_topic" /></td>
            </tr>
            <tr>
                <td>Referent:</td>
                <td><input type="text" name="name_contributer" id="name_contributer" /></td>
            </tr>
            <tr>
                <td>Beginn:</td>
                <td><input type="text" name="name_begin" id="name_begin" /> Uhr</td>
            </tr>
            <tr>
                <td>Ort:</td>
                <td><input type="text" name="name_place" id="name_place" /></td>
            </tr>
            <tr>
                <td>Eintritt:</td>
                <td><input type="text" name="name_entrance" id="name_entrance" /> €&lt;/td>
            </tr>
        </table>
        <br />
        <div id="add_vortrag">
            <input type="submit" id="small" class="vortrag_submit" name="vortrag_submit" value="speichern">
        </div>
    </form>
</div>
<h3><a href="#">Ausstellung hinzufügen</a></h3>
<div>
    <form name="ausstellung_add" action="index.php?section=events" method="post" accept-charset="utf-8">
        <table>
            <tr>
                <td>Von:</td>
                <td>
                    <select name="day_from">
                        <option value="0" class="bold italic">Tag</option>
                            <?php
                                for($i=1; $i<=31; $i++){
                                    echo "<option value=\"".$i."\">".$i."</option>\n";
                                }
                            ?>
                    </select>
                    <select name="month_from">
                        <option value="0" class="bold italic">Monat</option>
                            <?php
                                for($i=1; $i<=12; $i++){
                                    echo "<option value=\"".$i."\">".$month_name[$i]."</option>\n";
                                }
                            ?>
                    </select>
                    <select name="year_from">
                        <option value="0" class="bold italic">Jahr</option>
                            <?php
                                for($i=2008; $i<=$year; $i++){
                                    echo "<option value=\"".$i."\">".$i."</option>\n";
                                }
                            ?>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Bis:</td>
                <td>
                    <select name="day_till">
                        <option value="0" class="bold italic">Tag</option>
                            <?php
                                for($i=1; $i<=31; $i++){
                                    echo "<option value=\"".$i."\">".$i."</option>\n";
                                }
                            ?>
                    </select>
                    <select name="month_till">
                        <option value="0" class="bold italic">Monat</option>
                            <?php
                                for($i=1; $i<=12; $i++){
                                    echo "<option value=\"".$i."\">".$month_name[$i]."</option>\n";
                                }
                            ?>
                    </select>
                    <select name="year_till">
                        <option value="0" class="bold italic">Jahr</option>
                            <?php
                                for($i=2008; $i<=$year; $i++){
                                    echo "<option value=\"".$i."\">".$i."</option>\n";
                                }
                            ?>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Thema:</td>
                <td><input type="text" name="name_topic" id="name_topic" /></td>
            </tr>
            <tr>
                <td>Aussteller:</td>
                <td><input type="text" name="name_contributer" id="name_contributer" /></td>
            </tr>
            <tr>
                <td>Eintritt:</td>
                <td><input type="text" name="name_entrance" id="name_entrance" /></td>
            </tr>
        </table>
        <br />
        <div id="add_ausstellung">
            <input type="submit" id="small" class="ausstellung_submit" name="ausstellung_submit" value="speichern">
        </div>
    </form>
</div>
<h3><a href="#">Termine bearbeiten/löschen</a></h3>
<div>
    <button id="edit_event">Termin bearbeiten</button>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:22:57.107

用. `<input type="hidden">`_ `form`_ `name="submit_X"`该`input type="submit"`元素似乎被忽略了`serialize();`。

例子：

```
<input type="text"​​​​​​​​​​​​ id="year_from" name="year_from" />
<!-- More inputs.... -->
<input type="hidden" name="submit_1" value="true" />​​​​​​​​​​​​​​​​​ 
```

您还可以使用 JavaScript 向 POST 数据添加另一个键。

看看这个小提琴：http: [//jsfiddle.net/cd7Yy/](http://jsfiddle.net/cd7Yy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:22:14.980

您还需要显示您的 HTML。

但是据我所知，如果您在表单中的按钮上使用 OnClick 事件，则可以**在 HTML 中为不同的表单创建具有不同名称的按钮**，然后在 PHP 中检查**您在 $_POST 中收到的名称**

# python - 尝试在 Python 中使用 findall() 查找模式中的重复字符串

> ID：10724827
> 
> 赞同：0
> 
> 时间：2012-05-23T17:18:20.317
> 
> 标签：python

我正在使用 Python 编写一个计算单词出现次数的程序。但是，为了计算，程序需要查看句子的开头，并且只计算以 % 开头的句子中的单词。例如，

> %act: <dur> 把花生倒在盘子上

我想数花生这个词。程序应该返回 1。而，

> *CHI：花生。

会返回 0 因为它以 * 开头所以我使用了 findall()

> findall('\%.*?' + "花生", website_html)

但是，如果一个句子有两个“花生”，则模式匹配只会返回 1。例如

> %act: <bef> 给花生。吃。<dur> 给出花生。<aft> 提供葡萄干

只会返回 1。

我怎样才能让它返回2？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:24:40.367

我建议把它分成两部分。即，类似：

```
num_peanuts = 0
for sentence in re.findall(r'(?m)^%.*', website_html):
    num_peanuts = len(re.findall(r'\bpeanut\b', sentence)) 
```

我不确定选择“以“%”开头的句子的正确正则表达式是什么——在这里我假设它的第一个字符是一行`%`（请注意，默认情况下*不*`.`匹配换行符；另外，将多行模式下的正则表达式；并且 the是与行首匹配的零宽度断言。）。 *`(?m)``^`*

 *我还要注意，`\b`我与花生相关的正则表达式中的 ' 是为了确保单词花生不是某个较大单词（例如花生）的子字符串。您可能需要也可能不需要它们，具体取决于您的任务的详细信息。*

# python - 概率列表创建

> ID：10724833
> 
> 赞同：0
> 
> 时间：2012-05-23T17:18:42.040
> 
> 标签：python, numpy

以下问题：有一个基本三元组 (0,1,0)

现在我尝试在给定范围内创建一个已更改三元组的列表。

约束：

1.  Triple[0] 和 Triple[2] 应该有最大值 r，比如 r=0.2
2.  总和（三倍）= 1
3.  Triple[0] 不必等于 Triple[1] 并且应该增加给定的逐步参数 s，例如 s= 0.02

在上面提到的这个例子中，我们的方法应该创建

```
lst = [(0.0, 1, 0.0),(0.02, 0.98, 0.), (0.04, 0.96,0), (0.04,0.94, 0.02), (0.06,0.94,0), (0.06, 0.92, 0.02), (0.06, 0.9, 0.04), ...] 
```

有什么漂亮的方法可以做到这一点吗？

也许您有一个想法来创建没有嵌套循环的这些列表（可能使用 numpy？）。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:32:40.497

您可以创建一个函数，使您描述的三元组......例如：

```
def make_triple(r=0.2, s=0.02):
    element_one = round(random.uniform(0, r), 2)
    max_s = r/s
    element_three = random.randint(0, max_s) * s
    element_two = round(1 - element_one - element_three, 2)
    return (element_one, element_two, element_three) 
```

然后只需创建一个调用此函数的循环：

```
list_of_triples = []
for i in range(5):
    list_of_triples.append(make_triple(0.2, 0.02)) 
```

你去吧！不需要嵌套循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:52:30.073

这是一个列表理解，它应该提供满足您的约束的所有三元组（据我所知）。由于 range 函数仅接受整数，因此它比我想要的要笨拙一些：

```
r = 0.2
s = 0.02
steps = int(math.ceil(r/s))
lst = [(a*s, 1-(a+b)*s, b*s) for b in range(steps) for a in range(steps)] 
```

结果：

```
>>> lst[0:4]
[(0.0, 1.0, 0.0), (0.02, 0.98, 0.0), (0.04, 0.96, 0.0), (0.06, 0.94, 0.0)]
>>> lst[90:94]
[(0.0, 0.8200000000000001, 0.18), (0.02, 0.8, 0.18), (0.04, 0.78, 0.18), (0.06, 0.76, 0.18)] 
```

在这段代码中，第一个和最后一个值仅上升到 0.18，我不确定这是否可取（约束是 < r 还是 <= r？）。如果您希望以另一种方式进行调整，则应该不难调整。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T19:07:46.193

另一个简单的答案只是为了踢：

```
import numpy as np
r = .2
s = .02

a, b = np.mgrid[0:r:s, 0:r:s]
lst = np.dstack([a, 1 - (a+b), b]).reshape(-1, 3) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T18:04:43.653

根据要求，这是一个没有 for 循环的 NumPy 解决方案。它使用 3D 数组和 NumPy 广播规则来按行和按列分配比例。`scale`是单列的二维数组，因此可以方便地被`.T`. 最后，将 3D 阵列重塑为 2D。

```
import numpy as np

r = .2
s = .02

scale = np.arange(r, step=s, dtype=float).reshape(-1,1)
a = np.empty((len(scale),len(scale),3), dtype=float)
a[:,:,0] = scale
a[:,:,2] = scale.T
a[:,:,1] = 1 - a[:,:,0] - a[:,:,2]

print a.reshape(-1,3) 
```

# html - 在实现 FormData 和 XmlHttpRequest 的现代浏览器中是否存在缓冲区（文件大小或文件数量）限制？

> ID：10724837
> 
> 赞同：3
> 
> 时间：2012-05-23T17:19:10.490
> 
> 标签：html, browser, xmlhttprequest, limits

我正在为我们网站上的一个新应用程序实现 XmlHttpRequest 和 FormData，并且担心一些客户可能会尝试一次上传数十甚至数十万个文档。在我努力测试这些条件之前，我希望有人知道（1）一次可以上传的文件数量和/或（2）是否存在文件大小限制限制在任何已实现这些功能的现代浏览器中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:28:18.130

1.  文件大小的限制取决于浏览器应用程序用来存储内容长度属性的数据类型（通常是有符号或无符号整数，或大约 2GB/4GB）。您还可以通过检查内容长度并拒绝超过特定阈值的上传来在服务器端代码中施加最大文件大小限制。

2.  一次可以上传的文件数量取决于每个域允许的最大连接数。[有关更多信息，请参阅此问题](https://stackoverflow.com/questions/561046/how-many-concurrent-ajax-xmlhttprequest-requests-are-allowed-in-popular-browse)。因此，将一次上传 n 个文件。

**更新**：

我做了一些测试，因为我不确定浏览器是否将文件系统中的文件直接流式传输到 TCP 连接或将它们缓冲在内存中。

如果我尝试通过 Fiddler 从 Chrome 和 FF 上传非常大的文件，我机器上浏览器进程的内存使用量不会增加，而 fiddler 进程在崩溃之前增加到 2GB（它是一个 32 位应用程序）。

因此，如果在服务器上将文件内容直接流式传输到数据存储中，我认为您不会在客户端或服务器上遇到内存问题。

请记住，大多数 Web 服务器都需要配置为接受非常大的请求。

此外，请确保每个文件使用一个 XmlHttpRequest 实例。如果您通过单个连接上传所有内容，则内容长度将设置为所有文件的总大小。

另外，请记住，允许上传大文件会使您的服务器容易受到 DoS 攻击（您可能已经知道这一点，但我认为值得一提）。

# node.js - Node.js 快递 3

> ID：10724841
> 
> 赞同：2
> 
> 时间：2012-05-23T17:19:15.327
> 
> 标签：node.js, express

我想把休闲放在一个助手中，但我在我的 app.js 中得到并需要它。我当前的错误是应用程序未定义。我是 node.js 的新手，所以如果这很简单，请不要对我太苛刻。

```
app.locals.use({flashMessages: function(req, res) {
var html = ""
  , flash  = req.flash();
['error', 'info'].forEach(function(type) {
  if(flash[type]) {
    flash[type].forEach(function(message) {
      html += "<div class='alert " + type + "'>" + message + "</div>";
    });
  }
});
return html; }}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:23:38.183

您应该将其转换为接受 app 参数的函数，或者您可以将 app 放入 GLOBAL。看到[node.js 全局变量了吗？](https://stackoverflow.com/questions/5447771/node-js-global-variables)

# objective-c - 我需要一些关于 UINavigationControllers/UIBarButtonItems 的信息

> ID：10724846
> 
> 赞同：0
> 
> 时间：2012-05-23T17:19:36.157
> 
> 标签：objective-c, ios, uinavigationcontroller, uibarbuttonitem

我想这个问题对于这里的很多人来说可能听起来很无聊。但我仍然是 iOS 开发的初学者，即使我正在改进，有些事情让我感到困惑。我的应用程序的菜单具有以下配置：包含导航栏的导航控制器，并嵌入包含导航项的视图控制器。我的导航栏子类 UINavigationBar 使其看起来像我想要的那样。 

现在，我只想添加一个带有ai（信息）的自定义BarButtonItem，我已经绘制了它。所以这是我的问题：我怎样才能添加这个按钮？

非常感谢您的建议。 

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:32:46.483

```
// Create the Info button
UIButton *infoButton = [UIButton buttonWithType:UIButtonTypeInfoLight];

// Give it an action handler
[infoButton addTarget:self 
               action:@selector(infoButtonAction:)
     forControlEvents:UIControlEventTouchUpInside];

// Create a UIBarButtonItem to "contain" the Info button
UIBarButtonItem *infoItem = [[UIBarButtonItem alloc] initWithCustomView:infoButton];

// Add the UIBarButtonItem to the navigation bar (on the left side)
[self.navigationItem setLeftBarButtonItem:infoItem animated:NO]; 
```

动作处理程序：

```
- (void)infoButtonAction:(id)sender {
    NSLog(@"Tapped on info button!");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:45:07.330

这可能不能直接回答您的问题，但如果您使用 UINavigationController 可能会防止出现问题，因为它本来就是要使用的。与其继承 UINavigationBar 来自定义它的界面，不如使用它的 UIAppearance 方法，然后像往常一样创建一个 UINavigationController。

```
// Create navigation controller.
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:myViewController];

// Customize navigation bar appearance.
[[UINavigationBar appearance] setTintColor:[UIColor blueColor]];
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"navigation-bar-background"] forBarMetrics:UIBarMetricsDefault]; 
```

# oracle - 在 Jobs and Procedures 中查找对 Oracle 中特定列的引用

> ID：10724851
> 
> 赞同：1
> 
> 时间：2012-05-23T17:19:57.103
> 
> 标签：oracle

我正在寻找一个查询，允许我查询 oracle 数据库中的所有表、视图、**JOBS**和**PROCEDURES**。我找到了一些适用于表和视图的查询链接，但我需要**作业**和**过程**。如果一个查询不能用于所有这些，我至少需要工作和程序。

这是我为表格和视图找到的内容：

```
Select TABLE_NAME, COLUMN_NAME from user_tab_columns 
```

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:03:56.523

我的猜测是你想要类似的东西

```
SELECT name, type, line, text
  FROM user_source
 WHERE lower(text) like lower('%<<column name>>%'); 
```

这将显示包含列名的任何 pL/SQL 对象（包、包主体、过程、函数、触发器、类型等）中的任何代码行。如果有多个具有相同名称列的表（即`name`在许多不同的表中找到一个列），则将识别所有实例。除了检查代码之外，没有一个真正好的方法来确定哪些查询引用了`name`一个特定表中的列。您可能会查看`NAME`and `TYPE`from是否`USER_SOURCE`出现在`DBA_DEPENDENCIES`引用您感兴趣的特定表中。但这只是向您显示对象级别的表级依赖关系，并且您的对象可能依赖于大量不同的表。

# javascript - jQuery 中的链接和图像问题

> ID：10724852
> 
> 赞同：1
> 
> 时间：2012-05-23T17:19:58.683
> 
> 标签：javascript, jquery, html

[代码](http://jsfiddle.net/UQpeJ/) （请注意，如果没有引用图像，结果将无法正确显示）

我是一所大学的学生工作者，有一些编程经验。我的老板希望我制作一个类似于[这里可以看到的幻灯片。](https://sakai.rutgers.edu/portal)除了基本的 W3 学校教程之外，我对 Javascript 或 jQuery 一无所知，所以我决定从外部资源获取代码以用于我自己的目的进行修改。

代码的这种构建出现了两个问题。我的第一个问题是两者中较简单的一个。

```
<a href="#" class="change_link" onclick="$('.slideshow').blinds_change(<img src="img\rssSmall.jpg" />)"></a> 
```

我正在尝试在幻灯片底部制作小缩略图以在幻灯片之间进行制表符。不幸的是，由于嵌套引号，IDE（如果重要的话，Aptana）将编码的引号解释为

```
"$('.slideshow').blinds_change(<img src=" 
```

和

```
" />)" 
```

因此它显示“/>)”而不是正确的缩略图图像。

我的第二个问题是将每张幻灯片变成一个链接。由于某种原因，一个简单的标签不起作用。

```
<li><a href="http:\\google.com"><img class="slide" src="img\sakaiupgrade.png" alt="Whats new in Sakai?" /></a></li> 
```

我认为这更多地与 Javascript/jQuery 方面有关，目前这超出了我的想象。

提前感谢您能给我的任何帮助！

如果您想自己添加一些图像，幻灯片的大小为 w500 h350，标签的大小为 w77 h54。或者，如果需要，我可以尝试上传所有相关图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:30:48.703

对于您的第一个问题：

您可以使用斜杠转义引号，例如

```
"$('.slideshow').blinds_change('<img src=\"/some/path\" />')" 
```

对于您的第二个问题：

您的链接不正确。它应该是：

```
href="http://google.com" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:34:10.860

您需要将其添加到页面顶部的`<script`标签下方。

这将开始盲注过程。

```
<script language="javascript">

    $(document).ready(function()
    {
    $(".slidehsow").blinds();
    });

</script> 
```

接下来，您`<a`会找到链接，但是如果您想添加缩略图，请将它们更改为：

```
<a href="#" class="change_link" onclick="$('.slideshow').blinds_change(0)"><img src="img/somethingThumbnail.jpg" alt="Link to Slide 1" /></a> 
```

和他们一样，工作是胡萝卜！

因此，您的主要图像包含在`<li>`元素中，而缩略图则包含在`<a`元素中。

* * *

***编辑问题 2***

查看 jQuery 百叶窗代码，它无法将`<li>`项目转换为正确的链接 - 因为图像已更改为新 div 的背景图像。

您需要编辑该`jquery.blinds-0.9.js`文件，如下所示：

第 49 行变为：

```
blinds_images[blinds_images.length] = { 'title': e.alt, 'src': e.src, 'href': $(this).parent().attr("href") } 
```

这会将父元素（图像）`href`属性添加到数组中。

第 89 行变为：

```
,'cursor': 'pointer' 
```

这意味着鼠标在图像上时将变为链接链接指针

将此行插入第 91 行：

```
tile.click(function (e) { window.location = blinds_images[0]['href']; }); 
```

这组是从第一个图块开始的默认链接。

最后，第 115 行（或插入行之前的第 114 行）变为：

```
$(this).find('.tile_' + i + '_' + j).show().css('background', 'transparent ' + 'url("' + config.images[config.img_index]['src'] + '") -' + (i * config.tiles_width) + 'px -' + (j * config.tiles_height) + 'px no-repeat').click(function (e) { window.location = config.images[config.img_index]['href']; }); 
```

`href`同样，当单击特定幻灯片时，这会拾取并将浏览器定向到那里。

通过这些更改，您通常的代码`<li><a href="somelink.htm"><img src="someIMage.png" /></a></li>`将按预期工作。

***警告***我没有在没有元素的情况下测试过这个，*所以*`<a`没有链接的列表项要么需要一个空的（可能），要么需要进一步调整 jQuery 代码以捕获任何`null`值。

# python - 如何在python中做一个条件装饰器

> ID：10724854
> 
> 赞同：66
> 
> 时间：2012-05-23T17:20:04.410
> 
> 标签：python, conditional, decorator, python-decorators

是否可以有条件地装饰函数。例如，我想`foo()`用定时器函数（`timeit`）装饰函数，只有doing_performance_analysis是`True`（见下面的伪代码）。

```
if doing_performance_analysis:
  @timeit
  def foo():
    """
    do something, timeit function will return the time it takes
    """
    time.sleep(2)
else:
  def foo():
    time.sleep(2) 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-05-23T17:24:08.507

装饰器只是返回替换的可调用对象，可以选择相同的函数、包装器或完全不同的东西。因此，您可以创建一个条件装饰器：

```
def conditional_decorator(dec, condition):
    def decorator(func):
        if not condition:
            # Return the function unchanged, not decorated.
            return func
        return dec(func)
    return decorator 
```

现在你可以像这样使用它：

```
@conditional_decorator(timeit, doing_performance_analysis)
def foo():
    time.sleep(2) 
```

装饰器也可以是一个类：

```
class conditional_decorator(object):
    def __init__(self, dec, condition):
        self.decorator = dec
        self.condition = condition

    def __call__(self, func):
        if not self.condition:
            # Return the function unchanged, not decorated.
            return func
        return self.decorator(func) 
```

这里的`__call__`方法与第一个示例中返回的嵌套函数的作用相同，这里`decorator()`的封闭`dec`和`condition`参数作为参数存储在实例上，直到应用装饰器。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-23T17:23:07.853

装饰器只是一个应用于另一个函数的函数。您可以手动应用它：

```
def foo():
   # whatever
   time.sleep(2)

if doing_performance_analysis:
    foo = timeit(foo) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-23T17:22:10.050

怎么样：

```
def foo():
   ...

if doing_performance_analysis:
   foo = timeit(foo) 
```

我想你甚至可以将它包装到一个带有布尔标志和另一个装饰器的装饰器中，并且只有在标志设置为时才应用后者`True`：

```
def cond_decorator(flag, dec):
   def decorate(fn):
      return dec(fn) if flag else fn
   return decorate

@cond_decorator(doing_performance_analysis, timeit)
def foo():
   ... 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-17T00:10:41.150

```
use_decorator = False

class myDecorator(object):
    def __init__(self, f):
            self.f = f

    def __call__(self):
            print "Decorated running..."
            print "Entering", self.f.__name__
            self.f()
            print "Exited", self.f.__name__

def null(a):
    return a

if use_decorator == False :
    myDecorator = null

@myDecorator
def CoreFunction():
    print "Core Function running"

CoreFunction() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-16T22:15:11.937

如果您想在每次调用该函数时都进行检查，那么 Blckknght 的答案非常好，但是如果您有一个可以读取一次并且永不更改的设置，您可能不想在每次调用装饰函数时都检查该设置。在我们工作中的一些高性能守护进程中，我编写了一个装饰器，它在第一次加载 python 文件时检查设置文件并决定是否应该包装它。

这是一个示例

```
def timed(f):
    def wrapper(*args, **kwargs):
        start = datetime.datetime.utcnow()
        return_value = f(*args, **kwargs)
        end = datetime.datetime.utcnow()
        duration = end - start

        log_function_call(module=f.__module__, function=f.__name__, start=__start__, end=__end__, duration=duration.total_seconds())
    if config.get('RUN_TIMED_FUNCTIONS'):
        return wrapper
    return f 
```

假设 log_function_call 记录您对数据库、日志文件或其他任何内容的调用，并且 config.get('RUN_TIMED_FUNCTIONS') 检查您的全局配置，那么将 @timed 装饰器添加到函数将在加载时检查一次以查看您是否正在计时此服务器、环境等，如果没有，则不会更改功能在生产环境或您关心性能的其他环境中的执行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-21T14:23:27.190

这对我有用：

```
def timeit(method):
    def timed(*args, **kw):
        if 'usetimer' not in kw:
            return method(*args, **kw)
        elif ('usetimer' in kw and kw.get('usetimer') is None):
            return method(*args, **kw)
        else:
            import time
            ts = time.time()
            result = method(*args, **kw)
            te = time.time()
            if 'log_time' in kw:
                name = kw.get('log_name', method.__name__.upper())
                kw['log_time'][name] = int((te - ts) * 1000)
            else:
                print '%r took %2.2f ms' % \
                      (method.__name__, (te - ts) * 1000)
            return result
    return timed

def some_func(arg1, **kwargs):
    #do something here

some_func(param1, **{'usetimer': args.usetimer}) 
```

# php - Jquery自动完成不适用于大型数组

> ID：10724856
> 
> 赞同：1
> 
> 时间：2012-05-23T17:20:07.383
> 
> 标签：php, jquery, arrays, autocomplete

我有一个包含 6000 多个用户名的数组，这些用户名是从 MySQL 中提取的，如下所示：

```
$pop = mysql_query("SELECT * FROM import_student");
while ($r = mysql_fetch_assoc($pop)) {
 $student_array[] = $r['studentfirstname']." ".$r['studentlastname'];
}

    $big_array = json_encode($student_array); 
```

然后我将此数组传递给 JS 并像这样初始化我的自动完成功能。

```
<script>
$(document).ready(function() {
var availableTags = <?php echo $big_array; ?>;
console.log(availableTags);
    $( "#tags" ).autocomplete({
            source: availableTags
        });
});
</script> 
```

当我将 SQL 结果限制为 0,10 时，这很有效，但是当我不限制并且我将 6000 个左右的用户名放入数组时，自动完成功能不起作用。我在萤火虫中得到这个错误：

```
value is null 

return matcher.test( value.label || value.value || value ); 
```

有人知道我在这里做错了什么吗？就像我说的，这在我限制结果时有效。关于拥有一个大数组的东西？身份证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:23:06.390

我之前测试过（1-2 个字母的一些 2k 项），它与解析以及将大型结果集呈现给 DOM 有关。

您应该通过限制可能性来减少结果。您可以通过将最少字符数提高到至少 3-4 个来做到这一点。

此外，您应该对结果集进行一些缓存，而不是让 jQuery 重新解析每个条目。例如，我搜索`ad`. 我应该将 key 下的结果存储在一个对象中`ad`。

```
var cache = {
    'ad' : [...results...],
    'adder' : [...results...],
    ...and so on...
} 
```

当自动完成再次查询`ad`时，它应该首先在缓存中搜索键，如果存在则返回结果。您应该有一个缓存逻辑来避免过时的数据。Afaik，jQuery 在自动完成中有简单的缓存演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T06:55:24.123

我检索到你同样的问题......你可以使用自动完成而不是使用所有数组，一个由另一个脚本创建的部分......像：

```
$('#tags').autocomplete({
        source : "aScript.php",
}; 
```

和 aScript.php：

```
$autocompleteValue = $_GET["term"];
$pop = mysql_query("SELECT * FROM import_student WHERE 'studentfirstname' LIKE '$autocompleteValue%'");
while ($r = mysql_fetch_assoc($pop)) {
   $student_array[] = $r['studentfirstname']." ".$r['studentlastname'];
}

return json_encode($student_array); 
```

# xml - 如何通过 XSLT 将两个并排的 XML 结构映射在一起？

> ID：10724857
> 
> 赞同：0
> 
> 时间：2012-05-23T17:20:08.180
> 
> 标签：xml, xslt, sequence

我得到一个需要转换成另一种标准类型的 XML 文件。XSLT2 触手可及，但我无法控制任一文件的格式。第一个有两个序列，它们使用一个数值来匹配它们。第一个序列可能有 0..n 的第二个。

一个例子是：

输入：

```
<foo>
<structure name="items">
    <item>
        <itemCode>1</itemCode>
        <itemValue>1111</itemValue>
    </item>
    <item>
        <itemCode>2</itemCode>
        <itemValue>2222</itemValue>
    </item>
</structure>
<structure name="subItems">
    <subItem>
        <itemCode>1</itemCode>
        <subValue>12</subValue>
        <subType>MISC</subType>
    </subItem>
    <subItem>
        <itemCode>1</itemCode>
        <subValue>15</subValue>
        <subType>MISC2</subType>
    </subItem>
    <subItem>
        <itemCode>2</itemCode>
        <subValue>40</subValue>
        <subType>MISC</subType>
    </subItem>
</structure>
</foo> 
```

我想要的输出是

```
<bar>
<items>
    <item>
        <code>1</code>
        <value>1111</value>
        <subItems>
            <subItem>
                <subValue>12</subValue>
                <subType>MISC</subType>
            </subItem>
            <subItem>
                <subValue>15</subValue>
                <subType>MISC2</subType>
            </subItem>              
        </subItems>
    </item> 
    <item>
        <code>2</code>
        <value>2222</value>
        <subItems>
            <subItem>
                <subValue>40</subValue>
                <subType>MISC</subType>
            </subItem>
        </subItems>
    </item>         
</items>
</bar> 
```

我没有成功将 item.itemCode 映射到 subItem.itemCode 只是因为 XSLT 处理器似乎在看到下一个序列之前退出了第一个序列。我无法知道我将在任一序列中获得多少，所以我无法制作静态地图。

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:03:15.153

另一种选择正确子值的方法是使用键：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">  
  <xsl:key name="subitems-by-code" match="subItem" use="itemCode"/>

  <xsl:template match="foo">
    <bar>
      <items>
        <xsl:apply-templates select="structure[@name='items']"/>
      </items>
    </bar>
  </xsl:template>

  <xsl:template match="item">
    <item>
      <xsl:copy-of select="*"/>
      <subItems>
        <xsl:apply-templates select="key('subitems-by-code', itemCode)"/>
      </subItems>
    </item>
  </xsl:template>

  <xsl:template match="subItem">
    <subItem>
      <xsl:copy-of select="subValue|subType"/>
    </subItem>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:53:41.287

我通常不喜欢发布完整的解决方案，但这个问题看起来很有趣，所以我写了这个。

如果您需要任何详细说明，请再次询问。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">

    <xsl:output method="xml" indent="yes" />

    <xsl:template match="/foo">
        <bar>
            <items>
                <xsl:apply-templates select="structure[@name='items']/item">
                    <xsl:sort select="itemCode" />
                </xsl:apply-templates>
            </items>
        </bar>
    </xsl:template>

    <xsl:template match="item">

            <item>
                <code>
                    <xsl:value-of select="itemCode" />
                </code>
                <value>
                    <xsl:value-of select="itemValue" />
                </value>
                <subItems>
                    <xsl:apply-templates select="/foo/structure[@name='subItems']/subItem[itemCode=current()/itemCode]" />
                </subItems>
            </item>

    </xsl:template>

    <xsl:template match="subItem">

        <subItem>
            <xsl:copy-of select="subValue"/>
            <xsl:copy-of select="subType"/>
        </subItem>

    </xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<?xml version="1.0" encoding="utf-8"?>
<bar>
   <items>
      <item>
         <code>1</code>
         <value>1111</value>
         <subItems>
            <subItem>
               <subValue>12</subValue>
               <subType>MISC</subType>
            </subItem>
            <subItem>
               <subValue>15</subValue>
               <subType>MISC2</subType>
            </subItem>
         </subItems>
      </item>
      <item>
         <code>2</code>
         <value>2222</value>
         <subItems>
            <subItem>
               <subValue>40</subValue>
               <subType>MISC</subType>
            </subItem>
         </subItems>
      </item>
   </items>
</bar> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T20:02:51.367

在我看来，这就像一个简单的分组问题。

```
<xsl:for-each-group select="items/item, subItems/subItem" group-by="itemCode">
  <item>
    <code><xsl:value-of select="current-group()[self::item]/itemCode"/></code>
    <value><xsl:value-of select="current-group()/itemValue"/></value>
    <subItems>
      <xsl:copy-of select="current-group()[self::subItem]/(subValue, subType)"/>
    </subItems>
  </item>
</xsl:for-each-group> 
```

# windows - Wordpress 500 - 内部服务器错误（编辑）

> ID：10724859
> 
> 赞同：1
> 
> 时间：2012-05-23T17:20:26.057
> 
> 标签：windows, wordpress

我收到“500 - 内部服务器错误”。在我的 WordPress 网站的域上。

通过 IIS (Win7) 中的 Web 平台安装程序在本地安装 WordPress。

在本地的 Firefox 中开发了一个登录页面，然后将该站点通过 FTP 传输到 Web 服务器（该服务器还托管来自不同域的多个站点）。

使用 MySQL Workbench 5.2 CE 创建和导出数据库，该数据库也上传到服务器上。数据库经过测试。

我已经阅读了所有与“Wordpress”和“500 - 内部服务器错误”相关的帖子，没有任何帮助。

我尝试创建包含以下内容的**.htaccess文件：**

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

IIS 中的所有文件路径都是正确的。

下面是**wp-config.php**文件

```
<?php
/**
 * The base configurations of the WordPress.
  *
  * This file has the following configurations: MySQL settings, Table Prefix,
  * Secret Keys, WordPress Language, and ABSPATH. You can find more information
  * by visiting {@link http://codex.wordpress.org/Editing_wp-config.php Editing
  * wp-config.php} Codex page. You can get the MySQL settings from your web host.
  *
  * This file is used by the wp-config.php creation script during the
  * installation. You don't have to use the web site, you can just copy this file
  * to "wp-config.php" and fill in the values.
  *
  * @package WordPress
  */

 // ** MySQL settings - You can get this info from your web host ** //
 /** The name of the database for WordPress */
 define('DB_NAME', 'zxcvb');

 /** MySQL database username */
 define('DB_USER', 'zxcvb');

 /** MySQL database password */
 define('DB_PASSWORD', 'zxcvb');

 /** MySQL hostname */
 define('DB_HOST', 'localhost');

 /** Database Charset to use in creating database tables. */
 define('DB_CHARSET', 'utf8');

 /** The Database Collate type. Don't change this if in doubt. */
 define('DB_COLLATE', '');

 /**#@+
  * Authentication Unique Keys and Salts.
  *
  * Change these to different unique phrases!
  * You can generate these using the {@link https://api.wordpress.org/secret-key/1.1     /salt/ WordPress.org secret-key service}
  * You can change these at any point in time to invalidate all existing cookies. This      will force all users to have to log in again.
  *
  * @since 2.6.0
  */
 define('AUTH_KEY',         'put your unique phrase here');
 define('SECURE_AUTH_KEY',  'put your unique phrase here');
 define('LOGGED_IN_KEY',    'put your unique phrase here');
 define('NONCE_KEY',        'put your unique phrase here');
 define('AUTH_SALT',        'put your unique phrase here');
 define('SECURE_AUTH_SALT', 'put your unique phrase here');
 define('LOGGED_IN_SALT',   'put your unique phrase here');
 define('NONCE_SALT',       'put your unique phrase here');

 /**#@-*/

 /**
  * WordPress Database Table prefix.
  *
  * You can have multiple installations in one database if you give each a unique
  * prefix. Only numbers, letters, and underscores please!
  */
 $table_prefix  = 'wp_';

 /**
  * WordPress Localized Language, defaults to English.
  *
  * Change this to localize WordPress. A corresponding MO file for the chosen
  * language must be installed to wp-content/languages. For example, install
  * de_DE.mo to wp-content/languages and set WPLANG to 'de_DE' to enable German
  * language support.
  */
 define('WPLANG', '');

 /**
  * For developers: WordPress debugging mode.
  *
  * Change this to true to enable the display of notices during development.
 * It is strongly recommended that plugin and theme developers use WP_DEBUG
 * in their development environments.
 */
define('WP_DEBUG', false);

/* That's all, stop editing! Happy blogging. */

/** Absolute path to the WordPress directory. */
if ( !defined('ABSPATH') )
    define('ABSPATH', dirname(__FILE__) . '/');

/** Sets up WordPress vars and included files. */
require_once(ABSPATH . 'wp-settings.php'); 
```

请帮忙！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:33:37.430

Wordpress 在其选项表中存储了一些特定于域的设置。如果您在本地进行安装，然后将其导出到外部托管服务提供商，那么这些设置很可能仍然在您的 WordPress 数据库中配置错误并设置为本地安装。

检查`options`WordPress 中的表格（根据需要添加前缀）。查看那些引用本地安装（其 URL 或资源）的选项的行，并使用适合您的主机的相应值更新它们。

特别是，我建议您检查带有以下`option_name`s 的行：

*   网址
*   家

一旦这些设置正确，您应该能够从其管理界面访问 WP 的安装并修复其他（如图像 URL 和其他类似的东西）。

# c# - 为什么隐式属性名称仅适用于匿名对象？

> ID：10724861
> 
> 赞同：2
> 
> 时间：2012-05-23T17:20:26.743
> 
> 标签：c#, c#-4.0, c#-3.0

有什么限制

```
public class A
{
     public string Stuff {get;set;}
}

...

repository.GetAll().Select(x=> new A { x.Stuff }); 
```

那是行不通的。你必须添加

```
{ Stuff = x.Stuff }

repository.GetAll().Select(x=> new { x.Stuff }); 
```

但这有效。它创建了一个与 A 类定义非常相似的匿名类。

从概念上讲，我认为这里发生的事情没有太大区别。有人阐明了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:37:57.613

简短的回答——C# 编译器和语言团队没有以这种方式实现它——他们要么没有想到（不太可能），要么认为这不是一个好主意......

```
repository.GetAll().Select(x=> new A { x.Stuff }); 
```

> 那是行不通的。你必须添加

这是一个对象初始化器。这通过在对象上调用默认构造函数，然后将属性名称与值匹配，即：`Stuff = x.Foo`，并且实际上只是匹配属性的快捷方式，因此语法实际上只是“速记”：

```
A tmp = new A();
tmp.Stuff = x.Stuff; 
```

现在，我想编译器团队*可以*假设等式上没有左侧的初始化语句应该搜索名称匹配*且*类型可隐式转换的匹配属性，但我怀疑这将落入“[与坏主意列表调情](https://stackoverflow.com/a/2806990/65358)“如果或何时由语言团队讨论。一般来说，C# 的语法相当明确，这会稍微放松一下，需要两个单独的匹配项（名称 + 类型），并且在许多情况下并不明显。由于您在此处使用公共 API ( `A`)，因此在任一侧进行重构 (`A`或任何类型的 "x"

最后，这也不是必需的 - 如果您希望以这种方式构造 A 的实例，只需添加一个带有重载的构造函数（在任何情况下这在许多方面都更安全），然后使用：

```
repository.GetAll().Select(x=> new A(x.Stuff)); 
```

这使得意图和含义非常明确，并消除了脆弱的可维护性。

```
repository.GetAll().Select(x=> new { x.Stuff }); 
```

这是在做一些完全不同的事情——在这里，您正在初始化一个匿名类型，并让编译器为您完全确定类型名称和类型。我怀疑这被确定为“安全”，因为您从未真正使用过公共 API - 匿名类型不应该真正从定义它的方法中“泄漏”出来。在这种情况下，重构更改属性名称和有效更改值等的风险会大大降低并隔离到单个方法，这反过来又使这种“自动”命名功能总体上降低了风险。此外，这里没有一个简单的替代方案，因为您无法在匿名类型上定义构造函数，因此在这种情况下，没有一种简单的方法来获得简洁的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:26:43.423

一种可能的推理：如果允许对真实类型进行隐式属性分配，而不是更改存储库项（即`x.Stuff`重命名为`x.Other`），则会在非常令人惊讶的地方导致编译时错误，因为新属性不再匹配 A.Stuff。

# php - CodeIgniter - 通过另一个查询的结果从数据库中选择

> ID：10724862
> 
> 赞同：0
> 
> 时间：2012-05-23T17:20:27.930
> 
> 标签：php, codeigniter

如果之前有人问过，请原谅我，但我找不到要搜索的相关关键字。我将尝试解释我的问题。

我有名为“ilan”和“places”的数据库表。在“ilan”表中，有 3 列保存地点的 ID - 城市、地区、街道。

我想了解如何在视图中打印 ilan.name 和相关的 places.name。

我有一个控制器，如：

```
class Estate_control extends CI_Controller{

public function _construct(){
    parent::_construct();   
}

function index(){

    $this->load->helper('url');
    $this->load->model("estate_model");

    $data['tum_bayiler'] = $this->estate_model->tum_bayileri_listele();
    $data['sonEmlaklar'] = $this->estate_model->sonEmlaklar();      

    $this->load->view("index",$data);

}
} 
```

我有这样的模型：

```
class Estate_model extends CI_Model{

function __construct(){
        parent::__construct();
}

function sonEmlaklar(){
    $query = $this->db
            ->select()
    ->from("ilan")
    ->order_by("gunceltarih DESC")
    ->limit(36)
    ->get();

    return $query->result();            
}

} 
```

我的数据库表：

宜兰：

ilan_id, gunceltarih, ... , ilan_city(places 表中的 ID), ilan_district(places 表中的 ID), ilan_street(places 表中的 ID), ...

地方：

地点 ID，地点名称，...

关于如何在视图中打印 ilan.name 和**相关 places.name**的任何想法。

感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:44:57.580

我认为这是代码的相关部分

```
$query = $this->db
        ->select("ilan.*, places.name")
->from("ilan")
->join('places', 'places.id = ilan.ilan_city OR places.id = ilan.ilan_district OR places.id =ilan.ilan_street')
->order_by("gunceltarih DESC")
->limit(36)
->get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T01:21:35.877

我找到了出路。我不知道它的效率如何，但它对我有用。

我在控制器的索引函数中创建了一个函数，如下所示：

```
function index(){

    //whatever here

function getPlace($e){
    $ci = get_instance(); //to get properties of parent class
    $query = $ci->estate_model->ilanSehir($e);

    return $query;
}   

    //whatever here

} 
```

然后我在我的模型中放置了一个函数，如下所示：

```
function ilanSehir($e){ 
$query = $this->db->select("*")
    ->from("places")
    ->where("places_id",$e)
    ->get();
 return $query->row();    //This will return one row so it must be row() instead of result() 
```

}

在我看来，我用我想要的参数调用了函数：

```
<?php $place = getPlace($ilan->ilan_city);
      echo $place->places_name;
?> 
```

正如我之前所说，**我不知道它的效率如何，但它对我有用**。希望能帮助到你。如果我在某个地方错了，请警告我。

谢谢所有回答的人

# objective-c - 为 NSMutableArray 分配 @property 和 'copy' 属性

> ID：10724866
> 
> 赞同：4
> 
> 时间：2012-05-23T17:20:45.033
> 
> 标签：objective-c, ios

我正在关注官方教程*Your second iOS App:Storyboard*它告诉我要像这样声明一个属性**masterBirdSightingList**（只是一个具体的例子，不需要知道上下文）：

```
@property (nonatomic, copy) NSMutableArray *masterBirdSightingList; 
```

请注意，有一个属性**copy**。然后合成这个属性：

```
@synthesize masterBirdSightingList = _masterBirdSightingList; 
```

接下来是一种让我感到困惑的初始化方法：

```
- (void)initializeDefaultDataList {
NSMutableArray *sightingList = [[NSMutableArray alloc] init];
self.masterBirdSightingList = sightingList;
[self addBirdSightingWithName:@"Pigeon" location:@"Everywhere"];
} 
```

肯定会为空间分配SightingList，然后将其分配给masterBirdSightingList 属性。但是，该属性具有**复制**属性。这意味着实例变量**_masterBirdSightingList**将被分配给另一个空间以保存来自**SightingList**的东西。为什么？为什么不直接为这样的属性分配空间：

```
self.masterBirdSightingList = [[NSMutableArray alloc] init]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T17:34:51.480

在 Objective-C 中，`copy`属性中的属性意味着合成的 setter 将如下所示：

```
-(void)setMasterBirdSightingList:(NSMutableArray*)newValue
{
    if (_masterBirdSightingList == newValue) return;
//  NSMutableArray* oldValue = _masterBirdSightingList;
    _masterBirdSightingList = [newValue copy];
//  [oldValue release];    // <-- not applicable in ARC.
} 
```

并且该点语法将始终转换为

```
[self setMasterBirdSightingList:sightingList]; 
```

与属性的属性无关。

“分配给另一个空间以保存来自SightingList的东西”的东西是通过该`-copy`方法完成的。将参数传递给 setter`newValue`参数的方式无关紧要。

* * *

**Edit**: As [@David](https://stackoverflow.com/questions/10724866/assign-nsmutablearray-with-property-and-copy-attribute/10725055#comment13930680_10724866) mentioned in the comment, the `-copy` method of a mutable type returns an immutable object. You have to override the setter to call `-mutableCopy` instead. See [What's the best way to use Obj-C 2.0 Properties with mutable objects, such as NSMutableArray?](https://stackoverflow.com/questions/816720/whats-the-best-way-to-use-obj-c-2-0-properties-with-mutable-objects-such-as-ns).

# ios - 在 B 线程上解析但对主线程的值？

> ID：10724869
> 
> 赞同：0
> 
> 时间：2012-05-23T17:21:02.600
> 
> 标签：ios, xml, multithreading

我对线程很陌生。这是我的问题。我有一个自定义 Parser 类，它使用 NSXMLParser 并且还做了一些其他的小事情。它解析来自网络的 XML 并创建一个值字典。我还有一个 DataProcesor 助手类，它处理从 Parser 传递给它的数据（NSDictionary），并在托管上下文中从中创建真正的 CoreData 对象。

现在我想将我的解析器移动到后台线程。我该怎么做？（NSthread，NSOperation，GCD...）？解析器应该如何将这些 NSDictionaries 返回到主线程上的数据处理器？

Parser 对象符合 NSXMLParserDelegate 协议，即。它处理来自 Parser 拥有的 NSXMLParser 的回调。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:52:30.287

使用 GCD 在后台线程上启动 XML Parser

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(queue, ^{
    //call your xml parser
    //pass yourself in as it's delegate
}); 
```

当您在回调中收到 NSDictionary 时，在更新任何 UI 元素之前跳回主队列

```
-(void)myCallBack:(NSDictionary*)newData {
    dispatch_async(dispatch_get_main_queue(), ^{
        //execute on main queue
        ProcessDictionaryData(newData);
    });
} 
```

# php - PHP函数是否区分大小写，如果不是......？

> ID：10724870
> 
> 赞同：3
> 
> 时间：2012-05-23T17:21:02.740
> 
> 标签：php, linux

我在我的 PHP 代码中使用了很多这样的函数；`UID(), user_getProfileImage() ... etc`. 我正在 Windows 上编写我所有的项目并且运行良好。在这里还可以，但是当我将项目放在服务器上时，会出现这样的错误；

`Fatal error: Call to undefined function UID() in /var/www/vhosts/...`

什么？是未定义的吗？！

我正在检查我所有的项目文件，并再次将所有文件通过 FTP 传输到服务器......同样的错误。

但是当我将名称更改`UID()`为`uid()`（在*lib.php*和其他使用它的地方）时，它运行良好。

所以有什么问题？这个服务器是怎么回事？

本地 PHP 版本：5.3.10

服务器 PHP 信息：http://... 已删除

注意：我使用 Notepad++ 将所有 PHP 文件编码为“没有 BOM 的 UTF-8”（一如既往），有趣的是，其他项目运行良好，即使使用相同的功能并在同一台服务器上运行。

谢谢。

/##############################/

更新（和解决方案）；

1.  不要在任何函数名中使用“I”（大写“i”）字符或
2.  像这样简单地使用 setlocale ；`setlocale(LC_TIME, "tr_TR.UTF-8")`// 我只需要语言环境时间配置并使用它
3.  如果需要`LC_ALL`，不要忘记 set back `LC_CTYPE`in `en_US`，即：

    `setlocale(LC_ALL, "tr_TR.UTF-8"); setlocale(LC_CTYPE, "en_US");`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T21:37:58.900

这暗示着遭受“ *I 问题*”，当 PHP 使用土耳其语语言环境 ( `tr_TR`, `tr_TR.utf8`...) 时就会表现出来。这样做时，大小写字母“i”之间的不区分大小写检查将失败。

请参阅[https://bugs.php.net/18556](https://bugs.php.net/18556) —“将语言环境设置为 'tr_TR' 小写类名”

* * *

你有几个解决方案：

*   用相同大小写的字母（或者，至少是字母“i”）定义和调用你的函数；高低不重要。
*   使用不受此（错误）行为影响的语言环境。

后者是首选，主要是因为它通常是一个微小的更改修复所有问题的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:49:43.857

它实际上是已知的错误，但自 2002 年以来仍未修复！请参阅[#18556](https://bugs.php.net/18556)。

简而言之，PHP 使用内部`tolower()`函数，它是区域设置感知的，但在土耳其语中对 I 有一些特定的规则（不带点的 ı 是 I 的小写，带点的 İ 是 i 的大写）。因此，如果您的方法名称的类名称具有上 I（newInstanceArgs、Image 等），您就会受到影响。

目前唯一的解决方法似乎是设置`LC_CTYPE`为某些工作区域，例如。

```
setlocale(LC_ALL, 'tr_TR');
setlocale(LC_CTYPE, 'en_US'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T18:35:46.457

为什么项目在 Windows 上正确运行（我想您已经设置了开发服务器 - LAMP）而不是在实时服务器上？

我想实时服务器是 linux 发行版上的 Apache，所以您应该做的另一项检查是您在脚本中“包含”的文件是确切的文件名（我是说这个，例如，如果您包含“Lib. php”，而文件名是“lib.php”在windows中不会引发任何错误，“lib.php”将正常包含，但在linux（即实时服务器）中包含“lib.php”不会工作，因为文件名区分大小写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T19:21:50.950

在 Linux 上，文件名区分大小写，因此我猜测您的 UID() 函数位于名称包含错误的文件或文件夹中。检查所有脚本中所有 require、require_once、include、include_once 语句的完整路径的字符大小写。

# sql - 将日期时间数据存储为数字

> ID：10724872
> 
> 赞同：0
> 
> 时间：2012-05-23T17:21:13.643
> 
> 标签：sql, database, oracle, database-design

我正在进行的当前项目使用 Oracle DBMS 来存储数据。在开发过程中，我发现日期信息没有存储在日期字段中，而是存储在带有一些奇怪格式的 VARCHAR2 列中。例如，看这个表：

```
CREATE TABLE "A_TABLE"
  (    
    "OSERC_FEC_INICIO_OS"            VARCHAR2(14 BYTE),
    "OSERC_FEC_FIN_OS"               VARCHAR2(14 BYTE),
    "OSERC_FEC_REGISTRO_PETICION"    VARCHAR2(14 BYTE),
    "OSERC_FEC_APROBACION_PETICION"  VARCHAR2(14 BYTE),
    "OSERC_FEC_LIQUIDACION_OS"       VARCHAR2(14 BYTE),
    "OSERC_FEC_EJECUCION_OS"         VARCHAR2(14 BYTE),
) 
```

字段`OSERC_FEC_REGISTRO_PETICION, OSERC_FEC_APROBACION_PETICION, OSERC_FEC_LIQUIDACION_OS`和`OSERC_FEC_EJECUCION_OS`存储日期信息，但声明为 VARCHAR2 列。如果您检查数据，您会发现他们使用该格式`YYYYMMDDHHMMSS`来存储该信息。

我很担心，因为我需要在 WHERE 子句中构建使用此日期的查询，而且我不确定使用该方法的索引性能如何。那么，我提到的设计中涉及到哪些问题呢？NUMBER而不是VARCHAR2的日期字段会更好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T17:36:32.373

如果将日期存储为日期会更好。将它们存储为数字而不是字符串会引入一组不同的问题。

如果您绝对坚持存储为字符串的日期，为了允许使用列上的索引，您需要将您用作参数的日期转换为适当格式的字符串，然后依赖以下事实该特定格式的字符串排序与实际日期的预期排序顺序相匹配。如果您曾经将字符串与日期或数字进行比较，您将获得隐式数据类型转换，这充其量会导致性能问题，因为无法使用索引，最坏的情况是会产生不正确的结果或错误。

Assuming you avoid data type conversion, the performance issues are likely to arise from the fact that the optimizer has a great deal of difficulty estimating cardinality when you use the wrong data type. Oracle knows, for example, that there are 365 days (or 8760 hours or 525600 minutes) between 1/1/2012 and 1/1/2013\. On the other hand, there are billions of possible strings between '20120101000000' and '20130101000000'. That can cause the optimizer not to use an index when you would like it to (or vice versa), to use the wrong sort of join, etc.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:36:15.810

一般来说，最好将它们存储为日期。您可以使用以下方法转换它们：

```
to_char(<field>, <format string>) 
```

而且我认为格式字符串 'YYYYMMDDHHMISS' 有效，但我并不肯定。

但是，他们选择这种格式可能是有原因的。Oracle 将日期/时间存储为数字。提取年、月、日、时分和秒需要一些数学操作。根据处理环境，使用子字符串操作来提取日期组件可能会容易得多。

我的猜测是，如果代码使用这些字段，那么有多个使用字符串操作的示例。这似乎是一个有意的设计决定，所以在改变它之前仔细检查一下（什么是更好的解决方案）。

# node.js - Mongoose 实例方法未定义

> ID：10724876
> 
> 赞同：9
> 
> 时间：2012-05-23T17:21:28.840
> 
> 标签：node.js, mongodb, express, instance, mongoose

我用 Mongoose 定义了一个实例方法来验证代表（用户）：

```
RepSchema.methods.authenticate = function(password){
  return this.encryptPassword(password) === this.hashed_password;
}; 
```

在我的应用程序中，我找到了代表并调用了`authenticate`它的方法：

```
var mongoose = require("mongoose");
var Rep = mongoose.model("Rep");

Rep.findOne({email: email}, function(err, rep){
  if (rep.authenticate(req.body.session.password)){
    req.session.rep_id = rep._id;
    res.redirect('/calls', {});
  }
}); 
```

但是我收到此错误：

```
TypeError: Object { email: 'meltzerj@wharton.upenn.edu',
  password: XXXXXXXXX,
  name: 'meltz',
  _id: 4fbc6fcb2777fa0272000003,
  created_at: Wed, 23 May 2012 05:04:11 GMT,
  confirmed: false,
  company_head: false } has no method 'authenticate' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-23T21:50:19.193

所以我终于弄清楚我做错了什么。mongoose 源代码`schema.methods`在模型的模式设置为模型名称 ( `mongoose.model("modelname", modelSchema)`) 处将所有定义的方法应用于模型原型。因此，在将模型设置为其名称之前，您必须定义所有方法，将这些方法添加到 Schema 实例的方法对象中。我在定义方法之前设置了模型。问题解决了。

# php - Cassandra + PHP + Thrift + 检索多行性能不佳

> ID：10724881
> 
> 赞同：2
> 
> 时间：2012-05-23T17:21:46.180
> 
> 标签：php, cassandra, thrift, performance-testing

我是 Cassandra 的新手，我正在尝试使用 php 恢复多行，但性能确实很差。

这是我正在使用的代码：

*

```
<?php
$GLOBALS['THRIFT_ROOT'] = 'D:/cassandra/thrift/lib/php/src';
require_once $GLOBALS['THRIFT_ROOT'].'/packages/cassandra/Cassandra.php';
require_once $GLOBALS['THRIFT_ROOT'].'/packages/cassandra/cassandra_types.php';
require_once $GLOBALS['THRIFT_ROOT'].'/transport/TSocket.php';
require_once $GLOBALS['THRIFT_ROOT'].'/protocol/TBinaryProtocol.php';
require_once $GLOBALS['THRIFT_ROOT'].'/transport/TFramedTransport.php';
require_once $GLOBALS['THRIFT_ROOT'].'/transport/TBufferedTransport.php';
try {

    $ipmachine = 'localhost';
    $keyspace = 'demo';
    $field_search = 'id_log';
    $column_family = 'logs';
    // Make a connection to the Thrift interface to Cassandra
    $socket = new TSocket($ipmachine, 9160);
    $transport = new TFramedTransport($socket, 1024, 1024);
    $protocol = new TBinaryProtocol($transport);
    $client = new cassandra_CassandraClient($protocol);
    $transport->open();

    $consistency_level = ConsistencyLevel::ONE;

    $client->set_keyspace($keyspace);

    // Specify what Column Family to query against.
    $columnParent = new cassandra_ColumnParent();
    $columnParent->column_family = $column_family;
    $columnParent->super_column = NULL;
    $sliceRange = new cassandra_SliceRange();
    $sliceRange->start = "";
    $sliceRange->finish = "";    

    $predicate = new cassandra_SlicePredicate();
    $predicate->slice_range = $sliceRange;
    $numelements = 100;

    $keyRange = new cassandra_KeyRange();
    $keyRange->start_key= "";
    $keyRange->end_key = "";
    $keyRange->count =$numelements;

    $result = $client->get_range_slices($columnParent, $predicate, $keyRange, $consistency_level);

    if(!empty($result)){
    $continue = 1;
        $start_key = 1;
    while ($continue <=5){

            $keyRange = new cassandra_KeyRange();
        $keyRange->start_key= $start_key;
        $keyRange->end_key = "";
        $keyRange->count =$numelements;

        $t = microtime(true);
        $micro = sprintf("%06d",($t - floor($t)) * 1000000);
        $d1 = new DateTime( date('Y-m-d H:i:s.'.$micro,$t) );
        $now = $d1->format("H:i:s.u");

        echo $now .'................';  
        $result = $client->get_range_slices($columnParent, $predicate, $keyRange, $consistency_level);
        $t = microtime(true);
        $micro = sprintf("%06d",($t - floor($t)) * 1000000);
        $d2 = new DateTime( date('Y-m-d H:i:s.'.$micro,$t) );
        $now = $d2->format("H:i:s.u");

        echo $now . '<br>';
        // DO SOMETHING WITH THE DATA AND CHANGE 
            $start_key = $start_key * $numelements;
        $continue++;

    }
   }    

    $transport->close();

} catch (TException $tx) {
   print 'TException: '.$tx->getLine(). '<br>Error: '.$tx->getMessage();
   print '<br>Code '.$tx->getCode(). '<br>traza: '.$tx->getTraceAsString();
}
?> 
```

*

结果，这就是我得到的

> 初始时间 结束时间
> 19:13:39.534957......................19:13:40.220973
> 19:13:40.221050...... .19:13:40.892968
> 19:13:40.893044......................19:13:41.575102
> 19:13:41.575181...... ...19:13:42.256830
> 19:13:42.256906......................19:13:42.936492

因此，要恢复 5 个 100 行的块需要 3 秒。

我怎样才能提高性能？有没有其他方法可以使用 thrift 而不是使用 get_range_slices 从 Cassandra 恢复数据？

我也尝试使用更大的计数器，而不是 100 个元素，但它或多或少需要相同的时间。

我需要恢复超过 100.000 行，所以你可以想象进度是可怕的。

# google-apps-script - 谷歌电子表格中的“求解器”功能是否可以通过 google-apps-script 访问？

> ID：10724883
> 
> 赞同：1
> 
> 时间：2012-05-23T17:22:00.753
> 
> 标签：google-apps-script

我正在尝试使用从 google-apps-script 访问 google 电子表格的求解器功能。有谁知道此功能是否包含在当前版本的 app-script 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:36:37.220

我认为 Apps 脚本目前不支持它，但如果您愿意，可以通过问题跟踪器提交功能请求：[http ://code.google.com/p/google-apps-script-issues/问题/清单](http://code.google.com/p/google-apps-script-issues/issues/list)

编辑：这是第 1348 期（[链接](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1348)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:05:50.800

通过脚本公开在电子表格中完成的求解器的有趣想法允许更简单的方法来进行更改而无需调整代码......

# android - Android 4 上的 html5 视频：播放全屏然后重定向到另一个网页 - 不工作

> ID：10724897
> 
> 赞同：15
> 
> 时间：2012-05-23T17:24:07.623
> 
> 标签：android, mobile, html5-video

我正在为带有单个 3gpp（或 mp4）视频的 Android 4 智能手机设计一个 html5 页面，该视频在打开时必须自动全屏播放；视频结束时应重定向到另一个 url。

一些谷歌搜索告诉我，Android 4 上不再允许自动播放，所以我选择显示海报图像，用户必须点击才能开始播放视频。然后：

1.  调用全屏模式
2.  视频应该自动开始（确实是通过用户点击海报图像开始的）
3.  当视频完成播放 Android 应该退出全屏
4.  最后将用户重定向到另一个页面。

2 和 3 不起作用：在调用全屏后，用户必须再次“单击”以开始视频，当视频结束时 exitfullscreen 不起作用（屏幕为黑色，用户必须按手机上的“返回”键才能退出手机视频播放器）。

看起来像`video.webkitExitFullScreen()`并且`video.play()`在 Android 4 上被忽略。

这是我正在使用的 html5 标记和 javascript 代码，你能帮我指出一个解决方案吗？

谢谢！

```
 <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width; initial-scale=1.0" />
    <meta name="description" content="" />
    <title>test</title>

    <script type="text/javascript">

        function videoEnd() {
            var video = document.getElementById("video");
            video.webkitExitFullScreen();
            document.location = "http://www.google.com";
        }

        function playVideo() {
            var video = document.getElementById("video");
            video.addEventListener('ended', videoEnd, false);
            video.webkitEnterFullScreen();
            video.play();
        }

    </script>
</head>
<body>
    <video id="video" poster="../img/image.jpg" onclick="playVideo();">
        <source src="../video/videoname.3gp" type="video/3gpp" />
    </video>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-08T14:09:21.503

我知道这是一个旧帖子，但有人可能正在寻找这个。就个人而言，我只是在视频完成后隐藏视频元素（使用简单的 jquery $videoElement.hide()），这会自动让我回到浏览器。

我们已经在多个移动设备（iOS 和 Android）上对此进行了测试。

不过，我还有另一个问题，那就是现在我的浏览器似乎是全屏的（这在我的情况下会导致其他问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T14:03:53.800

我有一些建议可能对你有帮助

这将适用于 Android Web 视图应用程序而不是 android Web 应用程序。

您可以创建 android 连接或 android Web 视图客户端，将值作为变量（查询字符串）传递并从您拥有所有控制权的 Android 本机播放视频。

请找到播放视频的代码。

```
enter code here

public void videoPlayer(String path, String fileName, boolean autoplay){
getWindow().setFormat(PixelFormat.TRANSLUCENT);
//the VideoView will hold the video
VideoView videoHolder = new VideoView(this);
//MediaController is the ui control howering above the video (just like in the default youtube player).
videoHolder.setMediaController(new MediaController(this));
//assing a video file to the video holder
videoHolder.setVideoURI(Uri.parse(path+"/"+fileName));
//get focus, before playing the video.
videoHolder.requestFocus();
if(autoplay){
    videoHolder.start();
} 
```

}

如果您想实现一种明亮的海湾，请联系我，我将为 HTML 5 提供帮助

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T04:29:15.113

似乎在更高版本的 android 中，程序化`video.play()`需要来自`WebView`. 例如

`settings.setMediaPlaybackRequiresUserGesture(false);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T13:23:45.913

我最近遇到了类似的问题。经过数小时的网络搜索，这是我的工作方式：

在调用“play()”方法之前，使用“load()”方法。所以在你的代码中：

```
 function playVideo() {
        var video = document.getElementById("video");
        video.addEventListener('ended', videoEnd, false);
        video.webkitEnterFullScreen();
        video.load();
        video.play();
    } 
```

我已经在 android 2.2、2.3 和 iPhone 3 上测试过，它可以工作。但是它似乎无法在 android 4.0 上播放。

附言

如果您想在视频播放完毕后重定向，请使用此事件：

```
var video = document.getElementById("video");
video.addEventListener("ended",doSomething,true);

function doSomething() {
     //your redirect code here
} 
```

# c++ - 如何将 qrc 资源文件复制到文件系统中？

> ID：10724899
> 
> 赞同：8
> 
> 时间：2012-05-23T17:24:12.007
> 
> 标签：c++, qt

我想知道如何将嵌入到 app qrc 中的文件复制到 fs 中？像这样的东西

```
QFile::copy("qrc:/assets/files/my.file" , "C:/my.file"); 
```

似乎不起作用。为什么以及如何实现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T17:42:12.240

您不需要`qrc`, 资源以`:`

例如`QFile myFile(":/data/data.xml");`

PS：我不确定 QFile 如何处理资源文件名的大小写敏感性。为了获得最佳可移植性，您可能希望确保案例与`qrc`文件中的任何内容相匹配。

# bash - 如何在 shell 脚本中单行获取 grep 的输出？

> ID：10724900
> 
> 赞同：5
> 
> 时间：2012-05-23T17:24:13.683
> 
> 标签：bash, grep

这是一个脚本，它从replaced.txt 文件中读取单词并在每一行中显示每个单词的输出，但我想在一行中显示所有输出。

```
#!/bin/sh
 回声
 echo "输入要翻译的单词"
 读一个
IFS=" " # 设置字段分隔符
set $a # 将字符串分解为 $1, $2, ...
for a # 一个 for 循环默认循环通过 $1, $2, ...
    做
    {
    b= grep "$a" 替换.txt | 剪切 -f 2 -d" "
    }
    完毕

```

“replaced.txt”文件的内容如下：

```
你好你好
米上午
rshbh 里沙布
耆那教
怎么样
ws WAS
你的
第一天

```

这个问题不适合我问的问题，我只需要帮助将脚本的输出放在一行中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T03:37:29.833

您的整个脚本可以替换为：

```
#!/bin/bash
echo
read -r -p "Enter the words to be translated: " a
echo $(printf "%s\n" $a | grep -Ff - replaced.txt | cut -f 2 -d ' ') 
```

不需要循环。

带有不带引号的`echo`参数删除嵌入的换行符并用一个空格替换多个空格和/或制表符的每个序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T17:41:53.527

从命令的输出中删除尾随换行符的一种简单但简单的方法是将其包装在`printf %s "$(...) "`. 也就是说，你可以改变这个：

```
b= grep "$a" replaced.txt | cut -f 2 -d" " 
```

对此：

```
printf %s "$(grep "$a" replaced.txt | cut -f 2 -d" ") " 
```

`echo`并在循环完成后添加一个命令。

该`$(...)`符号设置了“命令替换”：命令`grep "$a" replaced.txt | cut -f 2 -d" "`在子shell 中运行，其输出（减去任何尾随换行符）被替换到参数列表中。因此，例如，如果命令输出`DAY`，那么上面的内容等价于：

```
printf %s "DAY " 
```

（该`printf %s ...`符号等价于`echo -n ...`- 它输出一个字符串而不添加尾随换行符 - 只是它的行为更加便携一致，并且如果您要打印的字符串恰好以`-n`or`-e`或之类的开头，它也不会出现错误行为。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T05:15:12.330

你也可以使用

```
awk 'BEGIN { OFS=": "; ORS=" "; } NF >= 2 { print $2; }' 
```

在切割后的管道中。

# php - 是否有一个 PHP 框架被认为是 Ruby 的 Ruby On Rails？

> ID：10724901
> 
> 赞同：2
> 
> 时间：2012-05-23T17:24:22.357
> 
> 标签：php

PHP 社区已经非常分散，有许多框架，而 Ruby 只有 Ruby on Rails 是大众选择的唯一框架。虽然也有像 Sinatra 这样的小玩家，但你知道我的意思。

我相信最近 PHP 有了很大的改进，除了框架不断增加。我记得当时有 Mojavi、Symfony、CakePHP、CodeIgniter、Kohana、Zend，然后是 Yii、DooPHP、FuelPHP 等等，更不用说像 FatFree、Slim、Recess、FRAPI、Tonic 这样的“瘦”框架了， ETC...

我很难决定哪个是哪个。例如，我早就放弃了 CodeIgniter，现在我正要考虑 FuelPHP，突然一个新客户端要求我在 CodeIgniter 中编码。

我开始认为我应该转换为 Ruby 并完全避免所有这些片段。由于大多数“皈依者”将其视为宗教，我很感兴趣，如果我这样做，我可能会实现内心的平静:-)

我真诚地认为，如果这些伟大框架的所有作者联合起来，制作最终的框架并将其命名为 Zend Framework “Done Right”，那么 PHP 社区会做得很好。感觉我？

现在我的问题是，作为经验丰富的程序员，您认为有没有任何 PHP 框架走在正确的轨道上？我们知道 Zend 应该这样做，但社区反馈却不然。现在在 PHP 领域是否有一个框架，在适当的时候可能会被认为是 PHP 的 RoR？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T17:27:20.490

[PHPonTrax](http://www.phpontrax.com/)是在 PHP 中模仿 Ruby On Rails 的尝试

# php - IE 中的 Facebook 身份验证无法正常工作

> ID：10724908
> 
> 赞同：1
> 
> 时间：2012-05-23T17:25:19.260
> 
> 标签：php, facebook, internet-explorer, facebook-php-sdk

我正在制作一个 facebook 画布应用程序。要使用 PHP SDK 获取用户信息，请执行以下操作：

```
 <?

         $app_id = "";
         $secret="";
         $canvas_page = "";
        $auth_url = "";

$facebook = new Facebook(array(
  'appId'  => '',
  'secret' => '',
));

// Get User ID
$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

// Login or logout url will be needed depending on current user state.
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl();
}

$user = $facebook->api('/me');

?> 
```

除 IE（所有版本）外，所有浏览器都可以正常工作。当我单击应用程序内另一个页面的链接时，我收到下一个错误：

```
Fatal error: Uncaught OAuthException: An active access token must be used to query
 information about the current user. thrown in 
/hermes/bosoraweb019/b2365/ipg.zicedcom/metrik/fbapp/fb/base_facebook.php on line 
```

我刚刚显示的代码在应用程序内的所有页面中，我只在 IE 中遇到这个问题

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T00:23:54.913

似乎对于 IE，您需要启用 3rth 方 cookie (p3p)。只是用php更改了标题：

```
<? header('P3P: CP="NOI ADM DEV PSAi NAV OUR STP IND DEM"'); ?> 
```

# c# - 用于 Web 浏览器控制的刷新按钮

> ID：10724913
> 
> 赞同：0
> 
> 时间：2012-05-23T17:25:38.243
> 
> 标签：c#, windows-phone-7

我需要一个用于 Windows Phone 7 的网络浏览器应用程序的刷新按钮（刷新网页）。有人可以帮我吗？我的 Web 浏览器控件名为**“浏览器”**，刷新按钮名为 Refresh_Click。提前感谢您的辛勤工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:39:17.787

这很简单，试试：

```
private void Refresh_Click(object sender, EventArgs e){
    browsers.Navigate(browsers.Source.AbsoluteUri);
} 
```

# javascript - 保持 CSS 元素处于活动状态

> ID：10724919
> 
> 赞同：0
> 
> 时间：2012-05-23T17:25:57.940
> 
> 标签：javascript, jquery, html, css

单击它后，我需要一个按钮保持活动状态（不透明度已更改）。如何使用 CSS 做到这一点？我已经尝试过 :active 和 :enabled 类，但它们不起作用。

欣赏一个可行的解决方案。

如果在 CSS 中不可能，有人可以帮我在 jquery 中进行切换吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T17:31:54.653

我认为纯 CSS 不可能。

这是 jQuery 和 CSS 的示例：http: [//jsfiddle.net/hrPcU/](http://jsfiddle.net/hrPcU/)

```
$('#btn').on('click', function(e){
    //Toggle:
    $(this).toggleClass('active');
    //Activate just once:
    //$(this).addClass('active');
});​ 
```

* * *

编辑（->评论）：

如果您想在单击按钮外的任何位置时切换回课程，请尝试以下操作：http: [//jsfiddle.net/hrPcU/1/](http://jsfiddle.net/hrPcU/1/)

```
$(document).on('click', function(e){
    //Check if the event was fired from the button
    if($(e.target).attr('id') != 'btn'){
        $('#btn').removeClass('active');
    }else{
        $('#btn').toggleClass('active');  
    }
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:31:36.493

*   创建一个与您的样式相似的 CSS 类`:active`
*   向该元素添加点击处理程序
*   在该处理程序中，使用`addClass`

这是概念代码：

```
a:active,   /*native active pseudo-class*/
a.active {  /*your make-shift active class*/
    /*styles*/
}

$('a').on('click',function(){
    $(this).addClass('active');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T17:43:59.930

尝试使用：[http ://www.w3.org/TR/css3-selectors/#target-pseudo](http://www.w3.org/TR/css3-selectors/#target-pseudo)

示例：[http ://webdesignernotebook.com/examples/target.html](http://webdesignernotebook.com/examples/target.html)

# php - PHP带标点符号保持撇号

> ID：10724920
> 
> 赞同：3
> 
> 时间：2012-05-23T17:26:10.393
> 
> 标签：php, regex

像[PHP strip punctuation](https://stackoverflow.com/q/5689918/1112440)一样，但我想保留撇号。例子：

```
I'm a student, but I don't like the school. I'll quit school. 
```

strip 之后的字符串应该是：

```
I'm a student but I don't like the school I'll quit school 
```

我怎样才能用正则表达式或其他方式做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T17:42:22.287

如果您还想支持所有 Unicode 标点符号，请使用此正则表达式：

```
$str = preg_replace("#((?!')\pP)+#", '', $str); 
```

此正则表达式匹配 Unicode 标点字符类`\pP`，并且匹配将避免使用负前瞻的撇号字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T17:30:12.733

这是对第一个示例的改编：

```
$string = preg_replace('/[^a-z0-9\' ]+/i', '', $string); 
```

# actionscript-3 - Flex4：创建 CSS 文件以与应用程序一起使用的问题

> ID：10724926
> 
> 赞同：0
> 
> 时间：2012-05-23T17:26:32.293
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4

我使用一个文件来声明 CSS 样式：

```
/* CSS file */
@namespace s "library://ns.adobe.com/flex/spark";
@namespace mx "library://ns.adobe.com/flex/mx";
@namespace view "com.myviews.*";
@namespace comp "com.myviews.mycomponents.*"; 

@font-face {
    font-family:arial_s;
    src:url("Fonts/Arial.ttf");
    embed-as-cff:true;
    font-weight:normal;
    font-style:normal
}

@font-face {
    font-family:arial_mx;
    src:url("Fonts/Arial.ttf");
    embed-as-cff:false;
    font-style:normal;
    font-weight:normal;
}

global {
    font-family:arial_s; font-size:12.5;  
}

s|DropDownList {
    cornerRadius:0;
} 
```

Q1：我在上面的 s|DropDownList 行中收到此警告：

`The CSS type selector 'spark.components.DropDownList' was not processed, because the type was not used in the application.`

但它是在应用程序中使用的，在这里改变它的值确实有效果。知道为什么我会收到此警告吗？

Q2：当我在调试模式下运行应用程序时，我收到警告：

`warning: incompatible embedded font 'arial_s' specified for mx.core::UITextFormat. This component requires that the embedded font be declared with embedAsCFF=false.`

警告来了，因为我在`global`上面使用了 spark 组件的属性，这导致它应用于所有组件，包括一些 mx 组件。这里感兴趣的组件是 DataGrid 单元格中的文本。我只需要弄清楚如何分别定义 mx.core::UITextFormat 的样式。知道这个的语法是什么吗？我试过了：

```
mx|UITextFormat {
    font-family:arial_mx;
} 
```

但它不起作用。不知道该怎么办。 [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UITextFormat.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/UITextFormat.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:55:10.883

UITextFormat 的文档不包含任何 CSS 样式。

这只是一种预感，但由于 UITextFormat 实际上只是一种应用于 UITextField 的格式，也许您可​​以将字体样式应用于 UITextField 对象：

```
mx|UITextField {
    font-family:arial_mx;
} 
```

关于关于 DropDownList 的第一个问题，DownDownList 是否可能在库项目中，而不是在应用程序项目中？如果是这样，您可以为库项目创建一个 defaults.css。

**[编辑]**

字体问题困扰着我 :) 我查看了 DefaultGridItemRenderer：它扩展了 UITextField。因此，要使用嵌入字体，它必须将其`embedFonts`属性设置为 true。然后它还需要一个引用嵌入字体的 UITextFormat 对象。

您可以扩展 DefaultGridItemRenderer 来执行此操作，但我认为 Adob​​e 可能会使这更容易，并查看了以下 DataGrid 样式。对于非移动应用程序，DataGrid 文档将您指向 ITextLayoutFormat，这是我在此处链接的内容：

*   [字体查找](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flashx/textLayout/formats/ITextLayoutFormat.html#fontLookup)
*   [cffHinting](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flashx/textLayout/formats/ITextLayoutFormat.html#cffHinting)（可选）
*   [渲染模式](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flashx/textLayout/formats/ITextLayoutFormat.html#renderingMode)

我想知道您的 DataGrid 中是否实际使用了嵌入字体，因为默认渲染器似乎不会使用它们（除非 DataGrid 指示它使用）。

实际上，您的 css 将字体嵌入两次（？），我认为您应该只需要这样做一次——通过在 DataGrid 上适当地设置样式：

```
s|DataGrid {
    font-family:arial_s;
    fontLookup: embeddedCFF;
    renderingMode: cff; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T07:02:25.743

我也遇到过这个。我认为您可能需要在 MX 组件集中使用 Flash 文本引擎。您可以在编译器选项中执行此操作：

在 Flash Builder 中，进入 Project Properties > Flex Compiler 并选中“Use Flash Text Engine in MX components”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T12:44:15.867

在我的情况下，以下设置修复了所有嵌入的字体问题：

1.  在“**项目属性 > Flex 编译器**”中选中“**在 MX 组件中使用 Flash 文本引擎**”

***   在您的styles.css 中添加以下行：

    ```
    global {
        textFieldClass: ClassReference("mx.core.UIFTETextField");
    } 
    ```**

# bash - 使用 GNU 工具替换属性文件中的属性

> ID：10724929
> 
> 赞同：0
> 
> 时间：2012-05-23T17:26:43.150
> 
> 标签：bash, makefile, gawk

是否有一种简单的方法可以在 Makefiles 中完成 ant expandproperties 功能？，示例如下：

给定三个文件：

文件 main.properties

```
principal.name=John 
```

文件 1.properties

```
name=${principal.name} 
```

文件 2.xml

```
<properties name="${principal.name}"/> 
```

我正在寻求用 John 替换文件 1.properties 和 2.xml 中 principal.name 的所有外观，我应该使用 GNU 工具，因为我打算将它合并到 Makefile

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:40:34.130

是的，这是可行的。我在这里通过使用 awk 构建一个 sed 脚本来进行替换：

```
cat main.properties | awk -F= '{print "s/\\${" $1 "}/" $2 "/g"}' | sed -f - 1.properties 
```

# xamarin.ios - 如何映射从 MonoTouch 中的两个类派生的接口？

> ID：10724932
> 
> 赞同：3
> 
> 时间：2012-05-23T17:26:48.883
> 
> 标签：xamarin.ios

我在外部库中有以下接口定义

```
@interface AGSGPS : UIView < CLLocationManagerDelegate > 
```

通常你会在 ApiDefinition.cs 中定义为：

```
[BaseType (typeof (UIView))]
interface AGSGPS : CLLocationManagerDelegate 
```

这样做的问题是两者`UIView`都是`CLLocationManagerDelegate`类，这分解为以下代码：

```
class AGSGPS : UIView, CLLocationManagerDelegate 
```

这在 C# 中是非法的

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:09:57.430

您不需要“映射”对象。尖括号中的类型是协议，这意味着您的 AGSGPS 对象采用该协议。

[在此处](https://developer.apple.com/library/mac/ipad/#documentation/cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html)查看文档

现在，采用协议意味着您的对象应该实现协议的所有方法。要在您的 ApiDefinition 中执行此操作，只需将 CLLocationManagerDelegate 的方法视为属于您的 AGSGPS 类型，例如：

```
[BaseType (typeof (UIView))]
interface AGSGPS
{

    [Export("locationManager:didUpdateHeading:")]
    void UpdatedHeading(CLLocationManager lman, CLHeading heading);

    // etc, include all CLLocationManagerDelegate's methods
} 
```

# javascript - 将基于存储中数据的标记添加到 gmpanel

> ID：10724936
> 
> 赞同：0
> 
> 时间：2012-05-23T17:27:06.007
> 
> 标签：javascript, extjs4, extjs, extjs-mvc

所以情况是这样的：我有一个名为**Map**的类，它是**GMapPanel**的子类。我想根据通过 JSON加载到**MapIncidents的数据在地图上放置标记。****现在，我知道在Map**初始化期间我不能这样做，因为*MapIncidents* * 中的 JSON 请求是异步的，因此还没有准备好。所以相反，我在**Incidents中为****Map**添加了一个侦听器，以便在加载数据时它会在**Map**中执行一个方法，该方法将向地图添加标记。为了让事情变得更加复杂，我还使用了一个名为**markerclusterer**的类来在缩小地图时向地图添加聚类。

 ******现在我有代码做这一切，**但**出于某种奇怪的原因，它似乎添加了双标记，即聚类表明有 2 个标记在彼此的顶部。

不知道我做错了什么，所以我会在这里得到一点帮助。我会将我的代码粘贴在一些粘贴箱中。

Map.js（视图）-> [http://pastebin.com/9xtBYYKt](http://pastebin.com/9xtBYYKt)

MapIncidents.js（商店）-> [http://pastebin.com/uJnHkBSm](http://pastebin.com/uJnHkBSm)

Incidents.js（控制器）-> pastebin.com/tjEc2xT5

GMapPanel.js（稍作修改）-> pastebin.com/W7LTxV9s

markerclusterer.js（取自 google amps）-> pastebin.com/SiUkLhW2

Incident.js（模型）

```
Ext.define('SF.model.Incident', {
    extend: 'Ext.data.Model',
    fields: ['incident', 'lat', 'lng']
}); 
```******

# php - php 日期时间似乎无法正常工作

> ID：10724938
> 
> 赞同：0
> 
> 时间：2012-05-23T17:27:15.600
> 
> 标签：php, sql, datetime

我现在将`date/time`数据插入到我`date/time field`的数据库中。我尝试了许多技术，例如：

```
 $date = date("d M Y");
 $date = date("d M Y", mktime());
 $date = getdate();
 $date = date("d M Y", strtotime('now')); 
```

还有这个功能：`date_default_timezone_set('Asia/Bangkok');`

但它仍然没有得到日期时间。

这是我的sql语句：

```
$sql = "INSERT INTO ".TABLE_CONTENT."(`title`, `detail`, `crdate`, `modate`, `crby`, moby, isdel) VALUES('".$title."', '".$detail."', '".$crdate."', '".$modate."', '".$crby."', '".$moby."', $isdel)"; 
```

执行查询后，我只`0000-00-00 00:00:00`在我的数据库中得到了。

任何帮助或建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:29:28.837

看起来您的数据库字段设置为时间戳，因此您必须以完全相同的格式将数据插入数据库字段。

所以这会起作用

```
$date = date('Y-m-d H:i:s'); 
```

您也可以使用 MySQL `NOW()`，它将当前时间戳插入该字段，尽管时区将设置为您的服务器所在的任何时区。

例子：

```
$sql = "INSERT INTO <table> (title, crdate) VALUES ('test', NOW())"; 
```

# java - Java 6 的类加载更快的是什么？

> ID：10724942
> 
> 赞同：8
> 
> 时间：2012-05-23T17:27:22.703
> 
> 标签：java, performance, jvm, classloader

[ProGuard](http://proguard.sourceforge.net/#)主页作为一项功能列出：

*   *重新定位和预验证 Java 6 的现有类文件，以充分利用 Java 6 更快的类加载。*

这在 Java 6 中指的是什么？

意义重大吗？

它是否会通过默认类加载器的同步方面对多线程造成的减速产生影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T13:22:45.000

正如[ProGuard](http://proguard.sourceforge.net/) [常见问题解答提示](http://proguard.sourceforge.net/FAQ.html#preverification)：

> Java 6 编译器将预验证信息添加到类文件中

查看[Java Virtual Machine Specification](http://docs.oracle.com/javase/specs/jvms/se7/html/index.html) [Verification by Type Checking](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.10.1)部分：

> 如果 Java 虚拟机实现尝试对 50.0 版本的类文件执行类型推断验证，则必须在类型检查验证失败的所有情况下执行此操作。
> 
> 这意味着 Java 虚拟机实现不能选择在一种情况下而不是在另一种情况下诉诸类型推断。它必须要么拒绝不通过类型检查验证的类文件，要么在类型检查失败时始终故障转移到类型推断验证器。
> 
> 类型检查器需要具有 Code 属性的每个方法的堆栈映射帧列表。类型检查器读取每个此类方法的堆栈映射帧，并使用这些映射生成 Code 属性中指令的类型安全性证明。

从 Java 6 开始，类文件 50.0 及更高版本，JVM 可以在类文件验证期间使用类型检查或类型推断。在尝试了解性能优势之前，什么是类型检查和类型推断？这篇论文，[面向对象编程语言的类型检查和类型推断](http://citeseer.ist.psu.edu/viewdoc/summary?doi=10.1.1.53.2657)指出：

> 类型系统是编程语言的重要组成部分。完全依赖运行时类型检查的语言提供了高度的灵活性，但通常必须为此牺牲性能。

来自维基百科的[类型推断](https://en.wikipedia.org/wiki/Type_inference#Technical_description)：

> 类型推断是在编译时自动部分或全部推断出表达式类型的能力。[...]
> 
> 为了获得推断表达式类型所需的信息，编译器要么将这些信息收集为聚合并随后减少为其子表达式提供的类型注释，要么通过对各种原子值类型的隐式理解 [... ]。

[OpenJDK HotSport 运行时概述](http://openjdk.java.net/groups/hotspot/docs/RuntimeOverview.html)很好地解释了它：

> 目前有两种分析字节码的方法，以确定每条指令将出现的操作数的类型和数量。传统方法称为“类型推断”，通过对每个字节码进行抽象解释并在分支目标或异常句柄处合并类型状态来进行操作。分析迭代字节码，直到找到类型的稳定状态。如果找不到稳定状态，或者结果类型违反了某些字节码约束，则抛出 VerifyError。[...]
> 
> JDK6 中新增了第二种验证方法，称为“类型验证”。在此方法中，Java 编译器通过代码属性 StackMapTable 为每个分支或异常目标提供稳态类型信息。StackMapTable 由许多堆栈映射帧组成，每个堆栈映射帧都指示表达式堆栈上的项的类型以及方法中某个偏移处的局部变量中的项的类型。JVM然后只需要执行一次通过字节码来验证类型的正确性来验证字节码。[...]

类型检查是指 JVM 可以通过类文件来验证类型系统；类型推断需要多次传递。这是显着的性能节省吗？它可能与您在应用程序中拥有的类总数以及您拥有的小于 50.0 (Java 6) 和 50.0 及更大的类文件的数量有关。如果您的应用程序不是性能关键型应用程序，我不会担心；如果是，那么您可以运行一些基准来比较将应用程序编译为 Java 5 和 Java 6 类文件时的性能差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T17:37:59.803

根据[此 Java 6 白皮书](http://java.sun.com/performance/reference/whitepapers/6_performance.html#2.4.2)，改进之处在于：

> Java 虚拟机的引导和扩展类加载器已得到增强，以改善 Java 应用程序的冷启动时间。在 Java SE 6 之前，打开系统 jar 文件会导致 Java 虚拟机读取一个 1 兆字节的 ZIP 索引文件，当文件不在磁盘缓存中时，该文件会转换为大量磁盘查找活动。启用“类数据共享”后，Java 虚拟机现在提供了一个“元索引”文件（位于 jre/lib 中），其中包含有关哪些包（或包前缀）包含在哪些 jar 文件中的高级信息.
> 
> 这有助于 JVM 在加载 Java 应用程序类时避免打开引导和扩展类路径上的所有 jar 文件。

这种特殊的改进不应该对正在运行的程序产生任何影响，因为系统 jar 中的类已经被加载了。它只会影响应用程序的第一次启动时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T19:46:47.117

（回答我自己的问题）

我在 ProGuard 网站上的“[什么是预验证？](http://proguard.sourceforge.net/index.html#FAQ.html) ”部分找到了大部分答案：

> *加载类文件时，类加载器会对字节码进行一些复杂的验证。这种分析确保代码不会意外或故意突破虚拟机的沙箱。[...]Java 6 引入了拆分验证。[...]Java 6 编译器将预验证信息添加到类文件（[...]`StackMapTable`属性），以简化类加载器的实际验证步骤。然后可以以更节省内存的方式更快地加载类文件。*

这似乎与并发无关。

所以剩下的一个问题是：“*它重要吗？* ”，这在很大程度上被回答为“否”：

> [在 1.6 虚拟机上运行“-target 1.5”生成的 Java 类文件的性能影响？](https://stackoverflow.com/questions/1096976/performance-impact-of-java-class-files-generated-with-target-1-5-running-on-a)

# python - 从字典键更新 MySQL 行标题 (Python)

> ID：10724944
> 
> 赞同：1
> 
> 时间：2012-05-23T17:27:25.823
> 
> 标签：python, mysql, variables, dictionary

我在 Python 2.x 中编译了以下脚本，该脚本递归搜索目录，并为找到的每个 JPEG 解析元数据并将其放入字典中。目前，输出只是打印到控制台：-

```
import os
import fnmatch
import pyexiv2

matches = []
dict1 = {}

# The aim of this script is to recursively search across a directory for all
# JPEG files. Each time a JPEG image is detected, the script used the PYEXIV2
# module to extract all EXIF, IPTC and XMP data from the image. Once extracted
# the key (ie. "camera make" is generated and it's respective value
# (ie. Canon) is then added as the value in a dictionary.

for root, dirnames, filenames in os.walk('C:\Users\XXX\Desktop'):
  for filename in fnmatch.filter(filenames, '*.jpg'):
      matches.append(os.path.join(root, filename))

for entry in matches:
    metadata = pyexiv2.ImageMetadata(entry)
    metadata.read()
    keys = metadata.exif_keys + metadata.iptc_keys + metadata.xmp_keys
    for key in keys:
        dict1[key] = metadata[key].raw_value

    print entry
    print str(dict1) 
```

我要做的是将结果输出到 MySQL DB。现在，我的问题是我没有元数据标题的不确定列表，实际上我一直在努力找到一个，因此，对于我的表格行标题，我希望比较字典键中的每个值（即日期采取，制造，模型等...），如果它不存在于表中，将其作为标题添加到我的表中，然后将 EXIF 数据（键值）输入到相应的列中. 我以前通过 Python 玩过 MySQL，但从未比较行标题并从变量动态创建新的。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:41:04.877

不要在 MySQL 表中添加新的数据键作为新列，而是创建一个具有三列的固定单表`file`, `data_name`，`data_value`然后您可以在每个文件中拥有动态数据。

然后，您可以轻松地查询表，例如

```
select file from file_data where data_name = 'Serial' and data_value = 'ABCDE' 
```

对于多个字段匹配，您可以进行自联接，例如

```
SELECT * from data t1 JOIN data t2 on t1.file_name = t2.file_name and t1.data_name = "data1" and t1.data_value="value1" and t2.data_name = "data2" and t2.data_value="value2" 
```

**或者**，您可以继续动态地将列附加到 MySQL 表中，例如

```
ALTER TABLE data ADD Serial VARCHAR(60); 
```

您可以使用获取现有列名称

```
SHOW COLUMNS FROM `data`; 
```

因此，每次您看到一个新的数据字段时，都将其添加为列。

# multithreading - `par` 会创建另一个线程吗？

> ID：10724946
> 
> 赞同：2
> 
> 时间：2012-05-23T17:27:39.407
> 
> 标签：multithreading, haskell, parallel-processing, multicore

我的理解`par`是它将在另一个核心中创建一个线程来执行。

但是我未能通过以下测试代码证明这种理解，因为显示的结果似乎只有一个线程正在运行。

你能帮我弄清楚这里有什么问题吗？

```
import Control.Monad
import Control.Parallel
import Control.Concurrent
import System.IO.Unsafe

fib :: Int -> Int 
fib 0 = 1 
fib 1 = 1 
fib n = (fib (n-1)) + (fib (n - 2))

test :: String -> [Int] -> IO () 
test _ [] = return () 
test name (a:xs) = do 
    tid <- myThreadId 
    print $ (show tid) ++ "==>" ++ (show a) ++ "==>" ++ (show $ fib a) ++ "==>" ++ name
    x `par` y 
  where x = test "2" xs
        y = test "3" (tail xs)

main = test "1" [10..35] 
```

编译：

```
ghc --make -threaded -rtsopts test-par.hs
time ./test-par +RTS -N2 
```

结果

```
"ThreadId 3==>10==>89==>1"
"ThreadId 3==>12==>233==>3"
"ThreadId 3==>14==>610==>3"
"ThreadId 3==>16==>1597==>3"
"ThreadId 3==>18==>4181==>3"
"ThreadId 3==>20==>10946==>3"
"ThreadId 3==>22==>28657==>3"
"ThreadId 3==>24==>75025==>3"
"ThreadId 3==>26==>196418==>3"
"ThreadId 3==>28==>514229==>3"
"ThreadId 3==>30==>1346269==>3"
"ThreadId 3==>32==>3524578==>3"
"ThreadId 3==>34==>9227465==>3"

real    0m1.131s
user    0m0.668s
sys 0m0.492s 
```

我有几个核心？

```
cat /proc/cpuinfo | grep processor | wc -l
2 
```

- - - - - - - - - - - - - - - - 更新

我认为[Simon Marlow 的这篇论文](http://community.haskell.org/~simonmar/papers/threadscope.pdf)对于这样的新手问题是一个很好的参考。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T17:34:47.830

不，`par`不保证创建另一个线程。

它在运行时注册一个*火花，这**可能会*导致计算在不同的线程中执行，具体取决于机器的动态工作负载。

创建一个 spark 非常便宜，因此您可以创建比线程多得多的（1000 倍），并且运行时只会尝试让所有内核保持忙碌。

在您的情况下，您的`x`计算被注册为火花，然后立即丢弃（您再也不会引用它）。所以垃圾收集器可以删除它。

要并行化递归函数，您通常只需要使用`par`一定的深度。

一个例子——一个具有截止深度的递归函数：

```
import Control.Parallel
import Control.Monad
import Text.Printf

cutoff = 35

fib' :: Int -> Integer
fib' 0 = 0
fib' 1 = 1
fib' n = fib' (n-1) + fib' (n-2)

fib :: Int -> Integer
fib n | n < cutoff = fib' n
      | otherwise  = r `par` (l `pseq` l + r)
 where
    l = fib (n-1)
    r = fib (n-2)

main = forM_ [0..45] $ \i ->
            printf "n=%d => %d\n" i (fib i) 
```

运行为：

```
$ ghc -O2 -threaded --make A.hs -rtsopts -fforce-recomp
$ ./A +RTS -N16 -s 
```

并行工作负载比顺序工作负载高 1248.9%（即 12.48 倍）：

```
 Tot time (elapsed)  Avg pause  Max pause
  Gen  0      6264 colls,  6263 par    5.23s    0.41s     0.0001s    0.0109s
  Gen  1         1 colls,     1 par    0.00s    0.00s     0.0002s    0.0002s

  Parallel GC work balance: 7.09 (1797194 / 253525, ideal 16)

                        MUT time (elapsed)       GC time  (elapsed)
  Task  0 (worker) :    7.56s    (  9.36s)       0.92s    (  0.89s)
  Task  1 (worker) :    0.12s    ( 10.21s)       0.02s    (  0.05s)
  Task  2 (bound)  :    8.39s    (  9.51s)       0.70s    (  0.74s)
  Task  3 (worker) :    0.00s    (  0.00s)       0.00s    (  0.00s)
  Task  4 (worker) :    7.17s    (  9.60s)       0.53s    (  0.66s)
  Task  5 (worker) :    7.28s    (  9.55s)       0.56s    (  0.71s)
  Task  6 (worker) :    7.48s    (  9.52s)       0.56s    (  0.74s)
  Task  7 (worker) :    7.11s    (  9.54s)       0.66s    (  0.72s)
  Task  8 (worker) :    7.41s    (  9.62s)       0.70s    (  0.64s)
  Task  9 (worker) :    7.69s    (  9.48s)       0.66s    (  0.78s)
  Task 10 (worker) :    7.56s    (  9.51s)       0.56s    (  0.75s)
  Task 11 (worker) :    7.69s    (  9.42s)       0.86s    (  0.84s)
  Task 12 (worker) :    7.42s    (  9.40s)       0.92s    (  0.86s)
  Task 13 (worker) :    7.28s    (  9.39s)       0.91s    (  0.86s)
  Task 14 (worker) :    7.44s    (  9.38s)       0.91s    (  0.87s)
  Task 15 (worker) :    7.25s    (  9.33s)       1.11s    (  0.93s)
  Task 16 (worker) :    7.94s    (  9.33s)       0.97s    (  0.93s)
  Task 17 (worker) :    7.59s    (  9.37s)       1.06s    (  0.88s)

  SPARKS: 597 (446 converted, 0 dud, 1 GC'd, 150 fizzled)

  Productivity  96.1% of total user, 1245.3% of total elapsed 
```

我们创建了 597 个火花，其中 446 个被转换为线程。

如果您明确想要手动创建线程和通信，可以通过`forkIO`和来完成`MVars`。

# c - || 的评估顺序 和 && 在 c

> ID：10724947
> 
> 赞同：5
> 
> 时间：2012-05-23T17:27:40.807
> 
> 标签：c

如果 && 的优先级大于 || 的优先级，那么这段代码不应该先评估 --b && ++c，因此输出应该是 1 2 4 11。但是这里似乎短路给出 1 2 5 10.请帮忙！

```
int x;
int a=1,b=5,c=10;
x=a++||--b&&++c;
printf("%d %d %d %d\n",x,a,b,c);
return 0; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-23T17:30:12.210

> 这段代码不应该先评估 --b && ++c

**无**运算符优先级不会影响评估顺序。这只是意味着

```
a++||--b&&++c 
```

相当于

```
a++||(--b&&++c) 
```

所以它仍然`a++`是首先评估的，因此使语句短路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T17:30:43.280

的优先级`&&`更高，这意味着它与左右两侧的事物的绑定比 . 更紧密`||`。所以这个表达式等价于

```
a++ || (--b && ++c) 
```

`||`仅当左侧表达式的计算结果为非 0 时才计算右侧的事物。由于 a 是`1`, only`a++`将被评估，`b`不会递减，`c`也不会递增。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T17:36:31.927

是的，`&&`具有更高的优先级，但这仅决定操作数的*分组*，而不是评估的*顺序*。这里的基本操作是`||`，它保证如果左边为真，则不计算其右侧，无论右侧有什么操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T21:08:38.367

这里有两个概念在起作用

1.  运算符关联性
2.  ~~编译器优化~~短路

在 C 中，|| 运算符是左结合的。结果，将首先评估 a++。由于左侧为 TRUE，~~编译器优化~~短路将确保 || 的右侧 不被评估，因为它不会改变表达式的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T17:32:22.650

[懒惰的评价](http://c2.com/cgi/wiki?LazyEvaluation)。

`--b && ++c`根本不评价。

# c# - 延迟启动直到 c# 启动的浏览器关闭

> ID：10724948
> 
> 赞同：0
> 
> 时间：2012-05-23T17:27:46.560
> 
> 标签：c#

我有一个在用户登录时运行的应用程序，如果密码刚刚更改，它会检查用户密码是否过期，程序将打开一个浏览器。在用户与网站交互并关闭它后，我希望 Windows 继续启动。无论如何要停止系统启动，直到从 c# 关闭浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:47:45.223

你是怎么打开浏览器的？

您可以启动一个新进程并对其进行处理。然后你可以打电话`Process.WaitForExit();`

我没有机会测试它 - 但我相信你可以做到这一点：

```
var myProcess = new Process 
{
    StartInfo = new ProcessStartInfo 
    {
        FileName = "http://www.whatever.com"
    }
};
process.Start();
process.WaitForExit(); 
```

我相信这将启动默认浏览器并等待您将其关闭。您也可以收听退出事件 - 但我认为这就是您所要求的。

# php - 从数据库中调用图像获取 ID

> ID：10724953
> 
> 赞同：0
> 
> 时间：2012-05-23T17:28:15.440
> 
> 标签：php, sql

这是我的问题。我正在将图像上传到我的数据库，但是当我想显示它们时，我无法调用图像的 ID。我如何获取它来获取 ID。如果我像这样指定 $id = 1 ，它会在我使用 view.php?=1 等时调用图像没有问题，但是我如何获取它，所以当使用 view.php?id=1 调用时它会获取 id从地址？我做错了什么或需要做什么？下面是我用来调用图像的代码提前谢谢

```
mysql_connect($host, $username, $password) or die("Can not connect to database: ".mysql_error());

mysql_select_db($database) or die("Can not select the database: ".mysql_error());

$id = $_GET['id'];

if(!isset($id) || empty($id) || !is_int($id)){
 die("Please select your image!");
}else{

$query = mysql_query("SELECT * FROM tbl_images WHERE id='".$id."'");
$row = mysql_fetch_array($query);
$content = $row['image'];

header('Content-type: image/jpg');
 echo $content;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:32:55.450

不要使用`is_int()`，因为它会检查变量是否为整数类型，并且`$_GET`总是返回一个字符串，而不是整数。

你想[`is_numeric`](http://php.net/manual/en/function.is-numeric.php)改用。

# rally - 有没有办法获取故事的缺陷数？

> ID：10724960
> 
> 赞同：1
> 
> 时间：2012-05-23T17:28:51.343
> 
> 标签：rally, lookbackapi

我正在使用新的 Rally Lookback API 进行一些查询，并且想知道在这个问题中讨论的传统 Rally Web 服务中与故事计数 REST 请求类似的 Lookback API 是什么：

[通过 WSAPI 在服务器端计数？](https://stackoverflow.com/questions/10537765/counts-on-the-server-side-via-wsapi)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T23:04:50.677

这将返回特定故事的所有缺陷的所有 ObjectID：

```
https://rally1.rallydev.com/analytics/1.27/<YourSubscriptionOID/artifact/snapshot/query.js?find={_Type:"Defect",_ItemHierarchy:<OIDofStory>,__At:"current"}&fields=["ObjectID"] 
```

如果您真正想要的只是计数，请添加：

```
&pagesize=1 
```

并从结果的顶部取出 TotalResultCount。

# jquery - Jquery Wrap divs 与 $.each 中的父 div

> ID：10724962
> 
> 赞同：0
> 
> 时间：2012-05-23T17:28:54.367
> 
> 标签：jquery

我正在尝试`div.field`用父 div 包装每个包含一组 (s) 的对象`.row`。Jquery 只允许我在同一行打开和关闭父 div。请帮忙！

```
 $(document).ready(function(){
    $.getJSON('WF-XML.php', function(data) {

        JSON.stringify(data);
        var prevCardCode = '';

        $.each( data, function(index, element){

            if (!(element['CardCode'] == prevCardCode)) {

                var sum = element['payment_sum'];

                    $('#showdata').append('<div class="row"><div class="field">' + sum + '</div>');
                }
                prevCardCode = element['CardCode'];

                $.each(element, function(i, element_detail){
                    if (!(i == 'InvKey' || i == 'PostDate' || i == 'City' || i == 'Objtype' || i == 'Block' || i == 'ZipCode' || i == 'Address' || i == 'payment_sum' || i == 'State1' || i == 'Country' || i == 'NumAtCard')) {
                        var detail = element_detail;
                        $('#showdata').append('<div class="field">' + detail + '</div>');
                    }

                });

           });
    });

}); 
```

PHP

```
 if (($handle = fopen('upload/BEN-new.csv', "r")) === FALSE) {
    die('Error opening file'); 
 }

 $headers = fgetcsv($handle, 1024, ',');
 $complete = array();

      while ($row = fgetcsv($handle, 1024, ",")) {
       $complete[] = array_combine($headers, $row);
        }
    fclose($handle);

    echo json_encode($complete); 
```

这是数据：

```
 {"InvKey":"11704","CardCode":"1611704", "payment_sum": "1055.40"},
 {"InvKey":"11703","CardCode":"1611703", "payment_sum": "550.00"} 
```

它的打印是这样的：

```
 <div class="row">
      div class="field">1055.40</div>
 </div>
 <div class="field">1611704</div>
 <div class="row">
 <div class="field">550.00</div>
 </div>
 <div class="field">1611703</div> 
```

我希望它像这样打印：

```
 <div class="row">
      <div class="field">1055.40</div>
      <div class="field">1611704</div>
  </div>
  <div class="row">
      <div class="field">550.00</div>
      <div class="field">1611703</div>
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:33:58.397

尝试将`<div class="field">`元素添加到`<div class="row">`元素中。像这样的东西：

```
$(document).ready(function() {
    $.getJSON('WF-XML.php', function(data) {

        JSON.stringify(data); // NOTE: This doesn't do anything!!
        var prevCardCode = '';
        var newDiv;

        $.each(data, function(index, element) {
            if (element['CardCode'] != prevCardCode) {
                newDiv = $('<div class="row">').appendTo('#showdata');
                var sum = element['payment_sum'];
                $('.field').before(newDiv);
                $(newDiv).append('<div class="field">' + sum + '</div>');
            }
            prevCardCode = element['CardCode'];

            $.each(element, function(i, element_detail) {
                switch (i) {
                    case 'InvKey':
                    case 'PostDate':
                    case 'City':
                    case 'Objtype':
                    case 'Block':
                    case 'ZipCode':
                    case 'Address':
                    case 'payment_sum':
                    case 'State1':
                    case 'Country':
                    case 'NumAtCard':
                        // Do nothing
                        break;

                    default:
                        $(newDiv).append('<div class="field">' + element_detail + '</div>');
                        break;
                }
            });
        });
    });
}); 
```

我还在几个地方清理了您的代码（固定缩进并使您的长条更易于阅读）。

另一种方法是构建一个包含要插入到文档中的 HTML的**字符串，在构建整个字符串之前不要使用 jQuery。**只要你说`$('<div>')`，jQuery 就会在内存中创建一个 div 元素。如果你想把东西放在创建的元素里面，你必须把它们放在里面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:15:22.637

很难确定，但我认为你想要这样的东西：

```
$(function() {
    $.getJSON('WF-XML.php', function(data) {
        var prevCardCode = '';
        $.each( data, function(index, element){
            if (element['CardCode'] !== prevCardCode) {
                //var newDiv = $('<div/>').addClass('row').appendTo('#showdata');
                var newDiv = $('<div class="rowGroup"><div class="row"></div></div>').appendTo('#showdata').find('.row');
                $('<div class="field">' + element['payment_sum'] + '</div>').appendTo(newDiv);
                $.each(element, function(key, val) {
                    if (key !== 'InvKey' && key !== 'PostDate' && key !== 'payment_sum') {
                        $('<div class="field">' + val + '</div>').appendTo(newDiv);
                    }
                });
                prevCardCode = element['CardCode'];
            }
        });
    });
}); 
```

# php - MySQL 表。我应该使用交叉引用表吗？

> ID：10724963
> 
> 赞同：0
> 
> 时间：2012-05-23T17:29:21.560
> 
> 标签：php, mysql, foreign-keys

我根据他们所属的城市在我的网站上展示 MySQL 的数据输出。所以我的两个表被称为`login_users`and `city_selection`。所有表都有一个名为 的列`city_id`。

当用户登录我的网站时，我会询问数据库设置了什么 city_id，然后创建一个`$_SESSION['city_id']`

然后我可以用 - 子句将我的 MySQL 查询`WHERE`写入`$_SESSION['city_id']`.

例如：`SELECT firstname, lastname, city_name FROM students JOIN city_selection ON city_selection.city_id = students.city_id WHERE city_selection.city_id = '{$_SESSION['city_id']}'`

这可行，但现在我需要一些用户来显示一个或多个城市区域。我的第一个想法是创建一个名为的新表并将表中`region_selection`的外键添加`city_selection`到此表中。但是，我将如何处理应该向已登录用户呈现来自一个或多个区域的数据输出的情况？我应该创建某种交叉引用表吗？

这是我的第一个 PHP - MySQL 网站，请多多包涵！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:36:41.197

如果每个城市只属于一个地区，您可以创建`region_selection`带有 columns的表`region_id | region_name`。然后，您将一`region_id`列添加到您的`city_selection`表中，该列定义了城市所属的区域。

然后，您可以执行这样的查询来获取属于某个区域的学生：

```
SELECT firstname, lastname, city_name FROM students 
JOIN city_selection ON city_selection.city_id = students.city_id
JOIN region_selection ON region_selection.region_id = city_selection.region_id
WHERE region_selection.region_name = YOUR_REGION_NAME 
```

* * *

如果用户属于多个区域，您可以执行以下操作：创建表`region_selection`如上所示。然后创建一个`student_regions`包含列的表，`student_id | region_id`以在学生和地区之间建立联系。

然后查询如下所示：

```
SELECT firstname, lastname, city_name FROM students 
JOIN student_regions ON student_regions.student_id = students.student_id
JOIN region_selection ON region_selection.region_id = student_regions.region_id
WHERE region_selection.region_name = YOUR_REGION_NAME 
```

# asp.net-mvc - ListBoxFor 中没有选定的项目应该在 asp.net mvc 中显示验证错误

> ID：10724965
> 
> 赞同：1
> 
> 时间：2012-05-23T17:29:21.683
> 
> 标签：asp.net-mvc, validation, selection, html.listboxfor

我在部分/对话框中显示删除视图。最初没有选择任何项目。当用户单击确定按钮时，Delete Post 操作及其参数 selectedIds 为 NULL。没关系，但是如何向用户显示错误消息？

当我到达代码“return PartialView”时，我在视图中得到一个异常，我的 Model.DisplayList 是空的。

我知道我似乎在这里混合了两个问题，但我想一个可以解决另一个问题......

删除操作：

```
[HttpGet]
        public ActionResult Delete()
        {
            var templates = _templateDataProvider.GetTemplates();
            var listViewModel = new ListViewModel<Template>();
            listViewModel.DisplayList = templates;
            return PartialView(listViewModel);
        }

        [HttpPost]
        public ActionResult Delete(int[] selectedIds)
        {
            if (selectedIds == null)
            {
                ModelState.AddModelError("Name", "Nothing selected");
            }

            if (ModelState.IsValid)
            {
                return Json(new { success = true });
            }

            return PartialView();
        } 
```

删除视图：

```
@model ITMS.ViewModels.ListViewModel<ITMS.Models.Template>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
@using (Html.BeginForm("Delete", "Template"))
{ 
    @Html.ValidationSummary(false)      
    @Html.ListBoxFor(x => x.SelectedIds, new SelectList(Model.DisplayList, "Id", "Name"),new { @class = "select"} )
} 
```

当我返回这个时：

```
return PartialView(new ListViewModel<Template> { DisplayList = _templateDataProvider.GetTemplates() }); 
```

然后它可以工作，但我不想为此再次访问数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:32:45.020

在您的 Delete POST 操作中，当出现异常并且您重新显示部分视图时，您没有将任何模型传递给该视图。然而，您的视图需要一个 DisplayList 属性才能加载列表框。因此，请确保您传递的模型与您在 GET 操作中所做的方式相同：

```
var templates = _templateDataProvider.GetTemplates();
var listViewModel = new ListViewModel<Template>();
listViewModel.DisplayList = templates;
return PartialView(listViewModel); 
```

另一种可能性是直接让 Delete 操作获取视图模型：

```
[HttpPost]
public ActionResult Delete(ListViewModel<Template> model)
{
    if (ModelState.IsValid)
    {
        return Json(new { success = true });
    }

    // Make sure you rebind the DisplayList property
    model.DisplayList = _templateDataProvider.GetTemplates();
    return PartialView(model);
} 
```

现在就验证而言，您可以`SelectedIds`在视图模型上装饰您的属性，例如 Required 属性：

```
[Required]
public IEnumerable<Template> SelectedIds { get; set; } 
```

* * *

更新：

评论部分已经表达了关于访问数据库以在 POST 操作中再次加载列表的性能问题。为了避免这种性能损失，可以缓存和重用这些值。

像这样：

```
public IEnumerable<Template> GetTemplates()
{
    var templates = HttpContext.Cache["templates"] as IEnumerable<Template>;
    if (templates == null)
    {
        templates = _templateDataProvider.GetTemplates();
        HttpContext.Cache["templates"] = templates;
    }
    return templates;
} 
```

进而：

```
public ActionResult Delete()
{
    var listViewModel = new ListViewModel<Template>();
    listViewModel.DisplayList = GetTemplates();
    return PartialView(listViewModel);
}

[HttpPost]
public ActionResult Delete(ListViewModel<Template> model)
{
    if (ModelState.IsValid)
    {
        return Json(new { success = true });
    }

    model.DisplayList = GetTemplates();
    return PartialView(model);
} 
```

# jquery - 在 Yii 中使用另一个 jQuery 表单验证插件

> ID：10724972
> 
> 赞同：0
> 
> 时间：2012-05-23T17:30:09.280
> 
> 标签：jquery, yii, validation

我从带有用户输入验证的注册表单开始。一切正常。但现在想使用另一个 jquery 插件进行表单验证，因为我想要另一种显示错误消息的方式。

我怎样才能做到这一点？

顺便说一句非常好的框架:)

伟大的托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:24:05.153

你可以试试 jQuery Walidate：http: [//jquery.dop-trois.org/walidate/](http://jquery.dop-trois.org/walidate/)

并创建自定义错误消息（简单）：

HTML：

```
<div id="error-message" style="display: none">
    Please fill out all required fields!
</div> 
```

Javascript：

```
$('form').walidate({
    doIfSomethingIsInvalid: function() {
        // will be executed after clicking the submit-button
        // if a required input is empty.
        $('#error-message').fadeIn().delay(2500).fadeOut();
    }
}); 
```

或者对于每个元素：

```
$('.mail').walidate('validate', {
    valid: function() {
        $(this).next('.errorMsg').remove();
    },
    invalid: function() {
        $(this).after('<em class="errorMsg">Please enter a valid e-mail adress</em>');
    }
); 
```

# android - Android TextView 将文本左右对齐

> ID：10724975
> 
> 赞同：13
> 
> 时间：2012-05-23T17:30:16.550
> 
> 标签：android

我试图让一个 TextView 有两段文本，一段与最左边对齐，另一段与最右边对齐。我可以在这两个词之间放置空格，但我想知道是否有更好的技术？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:background="@drawable/background_common"
    android:id="@+id/LinearLayout0123">

   <TextView
        android:layout_width="300dp"
        android:layout_height="40dp"
        android:textColor="@color/Black"
        android:textStyle="bold"
        android:textSize="15dp"
        android:paddingLeft="10dp"
        android:paddingTop="10dp"
        android:layout_marginTop="10dp"
        android:layout_marginLeft="10dp"
        android:background="@drawable/selector_social_facebook_twitter"
        android:text="Right Text                                  Left Text" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-23T17:39:47.140

这是另一种方法：

```
<FrameLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background_common">
    <TextView
        android:text="Left Text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left"/>
    <TextView
        android:text="Right Text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"/>
</FrameLayout> 
```

Layout_gravity 告诉父母把孩子放在哪里。在 FrameLayout 中，孩子可以去任何地方并且不受其他孩子的阻碍。如果有重叠，则添加的最后一个子级位于顶部。祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T17:32:33.617

为什么不使用两个 textview 而不是将文本塞入一个 textView

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" 
    android:layout_width="300dip"
    android:layout_height="fill_parent" 
    android:background="@drawable/background_common"
    android:id="@+id/LinearLayout0123">

   <TextView
        android:layout_weight="1"
        android:layout_width="0dip"
        android:layout_height="40dp"
        android:textColor="@color/Black"
        android:textStyle="bold"
        android:textSize="15dp"
        android:paddingLeft="10dp"
        android:paddingTop="10dp"
        android:layout_marginTop="10dp"
        android:layout_marginLeft="10dp"
        android:background="@drawable/selector_social_facebook_twitter"
        android:text="Left Text" />

   <TextView
        android:layout_weight="1"
        android:layout_width="0dip"
        android:layout_height="40dp"
        android:textColor="@color/Black"
        android:textStyle="bold"
        android:textSize="15dp"
        android:paddingLeft="10dp"
        android:paddingTop="10dp"
        android:layout_marginTop="10dp"
        android:layout_marginLeft="10dp"
        android:background="@drawable/selector_social_facebook_twitter"
        android:text="Right Text" />
</LinearLayout> 
```

如果您希望文本向右对齐，可以在右侧文本框中设置 android:gravity="right"

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-25T17:01:16.267

如果您只需要一行（标签：...值，或类似的东西），您实际上可以使用[对齐](https://developer.android.com/reference/android/text/style/AlignmentSpan.html)跨度来实现这一点。唯一的问题是，跨度适用于整个段落，因此您必须将左/右文本放入单独的段落中，并使用“零行高”跨度将它们合并为一行。

像这样的东西：

```
public void setLeftRightText(TextView view, String left, String right) {
    SpannableString merged = new SpannableString(left + "\n" + right);
    merged.setSpan(
            new AlignmentSpan.Standard(Layout.Alignment.ALIGN_NORMAL),
            0, left.length(), Spanned.SPAN_INCLUSIVE_EXCLUSIVE
    );
    merged.setSpan(
            new LineOverlapSpan(),
            left.length(), left.length() + 1, Spanned.SPAN_INCLUSIVE_EXCLUSIVE
    );
    merged.setSpan(
            new AlignmentSpan.Standard(Layout.Alignment.ALIGN_OPPOSITE),
            left.length() + 1, left.length() + 1 + right.length(), Spanned.SPAN_INCLUSIVE_EXCLUSIVE
    );
    view.setText(merged);
} 
```

`LineOverlapSpan`像这样实现的地方：

```
public class LineOverlapSpan implements LineHeightSpan {
    @Override
    public void chooseHeight(final CharSequence text, final int start, final int end, final int spanstartv, final int v, final Paint.FontMetricsInt fm) {
        fm.bottom += fm.top;
        fm.descent += fm.top;
    }
} 
```

有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/39432495/2015751)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-07T11:41:57.547

这肯定会为你工作......

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="5dp"
        android:text="Left Side"
        android:textSize="15sp"
        android:textStyle="bold" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="5dp"
        android:text="Right Side"
        android:textSize="15sp"
        android:textStyle="bold" />
</RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-01T09:19:33.330

> 这可能会更好，因为它不允许文本重叠。

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

    <TextView
        android:id="@+id/title"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:layout_gravity="start" />

    <TextView
        android:id="@+id/sub_title"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1
        android:layout_gravity="end" />
</LinearLayout> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-07T12:59:53.827

这是我发现的最简单的方法。诀窍是`match_parent`在第二个文本视图上使用，这样它会占用剩余空间并允许`gravity`属性将文本移动到末尾。

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Left Aligned" />

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="end"
        android:text="Right Aligned" />
</LinearLayout> 
```

# c# - 如何在 C# 中完全删除 excel 单元格的内容和属性？

> ID：10724979
> 
> 赞同：1
> 
> 时间：2012-05-23T17:30:37.083
> 
> 标签：c#, excel

给定从 Excel 工作表（使用 C#）获取的一系列单元格，是否有任何简单的方法删除其所有内容？

我的意思是：背景变成白色，文本=空，删除公式和以前插入该单元格/单元格范围的任何文本格式？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T21:20:35.350

这解决了我的问题，基本上，手动将属性设置回它们的“默认”值

```
 cell.Formula = "";
            cell.Value2 = (string) String.Empty;
            cell.Font.Bold = false;
            cell.Font.Name = "Tahoma";
            cell.Font.Size = 10;
            cell.BorderAround();
            cell.HorizontalAlignment = XlHAlign.xlHAlignCenter;
            cell.Interior.Color = System.Drawing.ColorTranslator.ToOle(Color.FromArgb(255,255,255));
            cell.ShrinkToFit = false; 
```

不管怎么说，多谢拉 ：）

# ruby - 在 OSX Lion 上安装 RVM ruby -1.9.3-p125 32-bit 后，Libyaml 丢失

> ID：10724983
> 
> 赞同：0
> 
> 时间：2012-05-23T17:30:48.097
> 
> 标签：ruby, osx-lion, rvm

rvm 安装在 32 位上运行良好。输出甚至使它看起来像 yaml 安装得很好

```
Kyles-MacBook-Air:~ kpeyton$ export rvm_archflags='-arch i386'
Kyles-MacBook-Air:~ kpeyton$ export rvm_architectures='i386'
Kyles-MacBook-Air:~ kpeyton$ export rvm_configure_flags=--target=i686-apple-darwin11
Kyles-MacBook-Air:~ kpeyton$ rvm install ruby-1.9.3-p125 --32 --patch osx-arch-fix -n i386
Fetching yaml-0.1.4.tar.gz to /Users/kpeyton/.rvm/archives
Extracting yaml-0.1.4.tar.gz to /Users/kpeyton/.rvm/src
Configuring yaml in /Users/kpeyton/.rvm/src/yaml-0.1.4.
Compiling yaml in /Users/kpeyton/.rvm/src/yaml-0.1.4.
Installing yaml to /Users/kpeyton/.rvm/usr
Installing Ruby from source to: /Users/kpeyton/.rvm/rubies/ruby-1.9.3-p125-i386, this may take a while depending on your cpu(s)...

ruby-1.9.3-p125-i386 - #fetching 
ruby-1.9.3-p125-i386 - #extracting ruby-1.9.3-p125 to /Users/kpeyton/.rvm/src/ruby-1.9.3-p125-i386
ruby-1.9.3-p125-i386 - #extracted to /Users/kpeyton/.rvm/src/ruby-1.9.3-p125-i386
Applying patch 'osx-arch-fix' (located at /Users/kpeyton/.rvm/patches/ruby/1.9.3/p125/osx-arch-fix.patch)
Applying patch 'xcode-debugopt-fix-r34840' (located at /Users/kpeyton/.rvm/patches/ruby/1.9.3/p125/xcode-debugopt-fix-r34840.diff)
ruby-1.9.3-p125-i386 - #autoreconf
ruby-1.9.3-p125-i386 - #configuring 
ruby-1.9.3-p125-i386 - #compiling 
ruby-1.9.3-p125-i386 - #installing 
Removing old Rubygems files...
Installing rubygems-1.8.24 for ruby-1.9.3-p125-i386 ...
Installation of rubygems completed successfully.
ruby-1.9.3-p125-i386 - adjusting #shebangs for (gem irb erb ri rdoc testrb rake).
ruby-1.9.3-p125-i386 - #importing default gemsets (/Users/kpeyton/.rvm/gemsets/)
Install of ruby-1.9.3-p125-i386 - #complete 
```

但是，当我尝试使用 irb 并需要 'yaml' 时，我收到关于未安装 libyaml 的错误：

```
Kyles-MacBook-Air:~ kpeyton$ rvm use ruby-1.9.3-p125-i386
Using /Users/kpeyton/.rvm/gems/ruby-1.9.3-p125-i386
Kyles-MacBook-Air:~ kpeyton$ irb
1.9.3p125 :001 > require 'yaml'
/Users/kpeyton/.rvm/rubies/ruby-1.9.3-p125-i386/lib/ruby/1.9.1/yaml.rb:56:in `<top (required)>':
It seems your ruby installation is missing psych (for YAML output).
To eliminate this warning, please install libyaml and reinstall your ruby.
 => true 
```

谁能告诉我我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T08:09:33.310

采用

```
CONFIGURE_OPTS="--with-arch=i386" CFLAGS="-arch i386" LDFLAGS="-arch i386" rvm pkg install libyaml 
```

以 32 位编译 libyaml，然后重新安装您的 ruby​​ 版本：

```
rvm reinstall ruby-1.9.3-p125-i386 -n i386 --with-arch=i386 
```

# mysql - 每个类别选择四个项目mysql

> ID：10724985
> 
> 赞同：0
> 
> 时间：2012-05-23T17:31:11.807
> 
> 标签：mysql, sql, database

我的架构有以下表格 **产品表**

> 产品名称

**类别表**

> categoryid 名称 parentid

**category_product 表**

> categoryid productid

我想从顶级类别中检索四条记录，即根类别的直接子项。我已经运行了以下查询，但它返回了所有产品。

```
select 
    `pp`.`productid`, count(`pp`.`productid`)
from
    `product` `pp`
        join
    `category_product` `pc` ON `pp`.`productid` = `pc`.`poduct_id`
        join
    `category` `cp` ON `pc`.`category_id` = `cp`.`categoryid`
where
    `cp`.`parent_id` = 1
group by `pp`.`productid`
having count(`pp`.`productid`) < 4 ; 
```

# html - 在文本之后画一条线到行尾

> ID：10724987
> 
> 赞同：1
> 
> 时间：2012-05-23T17:31:13.367
> 
> 标签：html, css

我有一个页面的标题，我想要一行从文本开始到行尾，不管窗口的宽度是多少，有点：

`TITLE----------------------------------------------------------------------------`

但是一整行，我只是`-`为了演示而写的。我看到了，`<hr>`但它总是排在后面，而不是在正文之后。我也看到了[这篇文章](https://stackoverflow.com/questions/5458317/force-background-to-draw-on-till-end-of-line)，但这并不是我想要的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:57:51.487

好的，这是另一个答案。您可以只使用 fieldset 元素

```
 <fieldset>
  <legend>Title comes here</legend>
  </fieldset> 
```

并将其设置为

```
fieldset { border-top:1px solid #333; } 
```

这里有一个演示：http: [//jsfiddle.net/SQujE/](http://jsfiddle.net/SQujE/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T17:36:19.527

尝试使用两个 DIV 元素。第一个可以是 100% 的页面宽度，并且可以包含第二个。

让内部 DIV 包含您的“标题”文本并自动调整大小。将外层div的背景设为线条图像，将内层div的背景设为与普通页面背景相同的颜色。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T17:38:15.193

对于 hr 元素，您可以将 CSS 属性 display 与值 inline-block 以及宽度一起使用

```
hr { display: inline-block; width: 90%; } 
```

在您的 HTML 中，

```
Title<hr /> 
```

演示：http: [//jsfiddle.net/67f2E/](http://jsfiddle.net/67f2E/)

与“标题”一词和 hr 元素垂直对齐到中间的一点变化：http: [//jsfiddle.net/wHPQA/](http://jsfiddle.net/wHPQA/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T17:44:01.247

尝试这个 ：

```
Title<hr style="display: inline-block; width: 90%; margin-bottom: 4px; margin-left: 5px;" /> 
```

基于 saganbyte 的回答。`margin-bottom`玩从底部和`margin-left`左侧的偏移量。逻辑不行吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T20:21:14.707

我知道我的回答有点晚了，但是做你想做的事情很长。

**HTML：** `<span id="test" >HI</span>`

**JS：**

```
document.getElementById("test").style.position="relative";
var line=document.createElement("div");
line.setAttribute("style","width:"+(document.getElementsByTagName("html")[0].offsetWidth-document.getElementById("test").offsetWidth-1)+"px;height:1px;position:absolute;top:6px;left:"+(document.getElementById("test").offsetWidth+1)+"px;background-color:black;");
document.getElementById("test").appendChild(line); 
```

**小提琴：http:** [//jsfiddle.net/QrEgH](http://jsfiddle.net/QrEgH)

**奖励：**
1-没有 CSS，只有一小块 JS。
2-一个非常小的 HTML，你只需添加跨度。
3-这个小提琴压缩较少并带有评论：http: [//jsfiddle.net/VfCJ3](http://jsfiddle.net/VfCJ3)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-09-23T15:49:57.007

这个问题可能很老了，但我今天需要这个效果，并使用绝对定位的 CSS 伪元素来实现。首先，在 HTML 中的元素文本周围放置一个包装器：

```
 <h3>
        <span>Title</span>
    </h3> 
```

我们将使用这个跨度来掩盖与文本重叠的行（伪元素）部分。这将产生从文本末尾到行尾的线条效果，但实际上该线条始终是容器的 100% 宽度。

```
 h3 {
      /* we will absolutely position the line relative to the parent element (h3) */
      position: relative;
      z-index: 1;
    }
    h3 span {
      background: #dedede;   /* make this the same color as the page background! */
      padding-right: 0.5em;  /* this will be the 'margin' from the text to the line */
    }
    /* Add Line After Text*/
    h3 span::after {
      content: '';
      width: 100%;
      height: 2px;
      background: #919098;
      /* position the line within the parent element */
      position: absolute;
      bottom: 0.5em;                           /* half the height of the text from the bottom */
      left: 50%; transform: translateX(-50%);  /* horizontally center it */
      z-index: -1;                             /* display it behind the parent */
    } 
```

[该方法的结果](https://i.stack.imgur.com/O031k.png)

我用标题元素做到了这一点，但是您可以通过交换标签轻松地在段落或其他元素上使用此效果。祝你好运！

# eclipse - 使用 PDT 的远程系统的 Eclipse 无法保存

> ID：10724993
> 
> 赞同：2
> 
> 时间：2012-05-23T17:31:53.937
> 
> 标签：eclipse, eclipse-pdt, eclipse-rse

正如标题所概述的，我正在使用带有 PDT 的 Eclipse 在远程服务器上工作。远程服务将让我创建一个文件并将其删除，但它不允许我更新远程文件。任何想法为什么？

Eclipse 版本：3.7.2，