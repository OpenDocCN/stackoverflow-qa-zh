# StackOverflow 问答 12072000-12072999

# sql-server - sql server 安全 ftp

> ID：12072000
> 
> 赞同：0
> 
> 时间：2012-08-22T11:23:25.887
> 
> 标签：sql-server, security, ftp

有没有一种方法可以使用 sql server 2005 进行安全 ftp？我需要将 ftp 保护到某个服务器并提取文件。最好使用 T-SQL 来完成，如果没有，还有其他方式吗？实际上我已经用谷歌搜索了一下，下面是我的结果，我没有使用 CLR 的经验，有一些使用 SSIS 的经验。我想在这里就这两种方法或任何其他方式提出您的建议？

1.  将 SSIS 与第三方组件一起使用。SSIS 是SQL Server 2005 的集成ETL 工具。它有一个ftp 组件，但它只能做FTP，不能做安全的ftp。但是有很多为 SSIS 开发的第三方组件可以做 SFTP。SSIS 可以使用这些第三方组件来实现 SFTP 功能。然后可以在 SQL 代理作业中安排 SSIS 任务。
2.  使用 CLR（公共语言运行时），它使用 .NET 代码来扩展 SQL Server 的能力。例如，使用 .NET 代码生成一些可以执行 SFTP 工作的类，然后可以将其作为存储过程之类的东西集成到 SQL Server 中。然后可以从 T-SQL 代码/存储过程中调用它。

谢谢你，年

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:25:21.210

`xp_cmdshell`如果在您的服务器上启用，您可以使用来执行命令行。

例如：[http ://www.tekkies.co.uk/v2/articles/1-general/15-ftp-using-xpcmdshell-sql2k](http://www.tekkies.co.uk/v2/articles/1-general/15-ftp-using-xpcmdshell-sql2k)

但是，无论您做什么，SQL Server 都不是完成这项工作的最佳工具。它是一个数据库服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:54:35.213

实际上，您对 SSIS 的主要选择是为 SFTP 和 FTPS 执行预先创建的任务，或者使用相应的 .NET 组件编写一个任务。关于现有任务，替代方案是 /n 软件的 SSIS 任务、Cozyroc 和我们的 BizCrypto。我们的 BizCrypto 将 SecureBlackbox .NET 组件用于 SFTP 和 FTPS（我们的另一个产品）。

请注意，“安全 ftp”是一个令人困惑的术语。FTP 协议（​​如 RFC 959 中定义）使用 SSL/TLS 进行保护，您将获得 FTPS。SFTP（SSH 文件传输协议）是完全不同的东西——尽管它也几乎总是被用作文件传输协议，但它与 FTP 协议几乎没有共同之处。我们的产品同时支持 SFTP 和 FTPS。

# web-services - CXF Web 服务 WSDL 文件未找到异常

> ID：12072001
> 
> 赞同：1
> 
> 时间：2012-08-22T11:23:27.303
> 
> 标签：web-services, cxf

我曾尝试使用 eclipse indigo 开发 Web 服务，但生成 wsdl 文件（java2ws）后出现错误，它在测试服务资源管理器向导上显示错误，导致之前生成的 wsdl 文件被擦除。因此，我手动将 wsdl 文件复制到临时文件夹并复制回所需文件夹，但是从浏览器调用时会显示以下错误。

错误：

```
javax.xml.ws.WebServiceException: org.apache.cxf.service.factory.ServiceConstructionException: Failed to create service.
    org.apache.cxf.jaxws.ServiceImpl.<init>(ServiceImpl.java:149)
    org.apache.cxf.jaxws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:90)
    javax.xml.ws.Service.<init>(Service.java:57)
    javax.xml.ws.Service.create(Service.java:687)
    com.peter.client.CreditCardServiceClient.createServiceClient(CreditCardServiceClient.java:43)
    com.peter.controller.CreditCardController.doPost(CreditCardController.java:106)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
root cause

org.apache.cxf.service.factory.ServiceConstructionException: Failed to create service.
    org.apache.cxf.wsdl11.WSDLServiceFactory.<init>(WSDLServiceFactory.java:94)
    org.apache.cxf.jaxws.ServiceImpl.initializePorts(ServiceImpl.java:203)
    org.apache.cxf.jaxws.ServiceImpl.<init>(ServiceImpl.java:147)
    org.apache.cxf.jaxws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:90)
    javax.xml.ws.Service.<init>(Service.java:57)
    javax.xml.ws.Service.create(Service.java:687)
    com.peter.client.CreditCardServiceClient.createServiceClient(CreditCardServiceClient.java:43)
    com.peter.controller.CreditCardController.doPost(CreditCardController.java:106)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
root cause

javax.wsdl.WSDLException: WSDLException: faultCode=PARSER_ERROR: Problem parsing 'localhost:8080/CreditCardService/CreditcardService?WSDL'.: java.io.FileNotFoundException: localhost:8080/CreditCardService/CreditcardService?WSDL
    com.ibm.wsdl.xml.WSDLReaderImpl.getDocument(Unknown Source)
    com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(Unknown Source)
    com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(Unknown Source)
    org.apache.cxf.wsdl11.WSDLManagerImpl.loadDefinition(WSDLManagerImpl.java:239)
    org.apache.cxf.wsdl11.WSDLManagerImpl.getDefinition(WSDLManagerImpl.java:186)
    org.apache.cxf.wsdl11.WSDLServiceFactory.<init>(WSDLServiceFactory.java:92)
    org.apache.cxf.jaxws.ServiceImpl.initializePorts(ServiceImpl.java:203)
    org.apache.cxf.jaxws.ServiceImpl.<init>(ServiceImpl.java:147)
    org.apache.cxf.jaxws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:90)
    javax.xml.ws.Service.<init>(Service.java:57)
    javax.xml.ws.Service.create(Service.java:687)
    com.peter.client.CreditCardServiceClient.createServiceClient(CreditCardServiceClient.java:43)
    com.peter.controller.CreditCardController.doPost(CreditCardController.java:106)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
root cause

java.io.FileNotFoundException: localhost:8080/CreditCardService/CreditcardService?WSDL
    sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1434)
    org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(XMLEntityManager.java:986)
    org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(XMLVersionDetector.java:143)
    org.apache.xerces.parsers.XML11Configuration.parse(XML11Configuration.java:802)
    org.apache.xerces.parsers.XML11Configuration.parse(XML11Configuration.java:768)
    org.apache.xerces.parsers.XMLParser.parse(XMLParser.java:108)
    org.apache.xerces.parsers.DOMParser.parse(DOMParser.java:230)
    org.apache.xerces.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:285)
    com.ibm.wsdl.xml.WSDLReaderImpl.getDocument(Unknown Source)
    com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(Unknown Source)
    com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(Unknown Source)
    org.apache.cxf.wsdl11.WSDLManagerImpl.loadDefinition(WSDLManagerImpl.java:239)
    org.apache.cxf.wsdl11.WSDLManagerImpl.getDefinition(WSDLManagerImpl.java:186)
    org.apache.cxf.wsdl11.WSDLServiceFactory.<init>(WSDLServiceFactory.java:92)
    org.apache.cxf.jaxws.ServiceImpl.initializePorts(ServiceImpl.java:203)
    org.apache.cxf.jaxws.ServiceImpl.<init>(ServiceImpl.java:147)
    org.apache.cxf.jaxws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:90)
    javax.xml.ws.Service.<init>(Service.java:57)
    javax.xml.ws.Service.create(Service.java:687)
    com.peter.client.CreditCardServiceClient.createServiceClient(CreditCardServiceClient.java:43)
    com.peter.controller.CreditCardController.doPost(CreditCardController.java:106)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
note The full stack trace of the root cause is available in the JBoss Web/7.0.13.Final logs. 
```

![错误屏幕](../Images/065c1a5381ea027282e947711712817a.png)

这是屏幕截图的例外。eclipse.buildId=M20120208-0800 java.version=1.7.0_05 java.vendor=Oracle Corporation BootLoader 常量：OS=win32, ARCH=x86, WS=win32, NL=en_US 框架参数：-vm C:\Program Files\Java \jdk1.6.0_26\jre\bin\client\jvm.dll -product org.eclipse.epp.package.jee.product 命令行参数：-os win32 -ws win32 -arch x86 -vm C:\Program Files\ Java\jdk1.6.0_26\jre\bin\client\jvm.dll -product org.eclipse.epp.package.jee.product

```
Error
Wed Aug 22 19:29:09 SGT 2012
Unexpected exception (com.ibm.rational.ttt.common.ui.dialogs.wimport.WImportUtil)

java.lang.RuntimeException: Unable to access localhost:8080/CreditCardWebService/services/CreditCardServicePort?wsdl
    at com.ibm.rational.ttt.common.ui.dialogs.wimport.WImportUtil.createFile(WImportUtil.java:402)
    at com.ibm.rational.ttt.common.ui.dialogs.wimport.WImportUtil.importUri(WImportUtil.java:346)
    at com.ibm.rational.ttt.common.ui.dialogs.wimport.WImportUtil.importSomethingRunnable(WImportUtil.java:218)
    at com.ibm.rational.ttt.common.ui.dialogs.wimport.WImportUtil$1.run(WImportUtil.java:136)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at com.ibm.rational.ttt.common.ui.dialogs.wimport.WImportUtil.importSomething(WImportUtil.java:134)
    at com.ibm.rational.ttt.ustc.api.GSC.importWSDL(GSC.java:108)
    at com.ibm.rational.ttt.ustc.api.GSC.importWSDL(GSC.java:96)
    at com.ibm.ast.ws.gsc.internal.GSCUtils.getWSDLFile(GSCUtils.java:156)
    at com.ibm.ast.ws.gsc.internal.GSCDialog.loadWSDL(GSCDialog.java:69)
    at com.ibm.ast.ws.gsc.internal.GSCDialog.createDialogArea(GSCDialog.java:59)
    at org.eclipse.jface.dialogs.TitleAreaDialog.createContents(TitleAreaDialog.java:155)
    at org.eclipse.jface.window.Window.create(Window.java:431)
    at org.eclipse.jface.dialogs.Dialog.create(Dialog.java:1089)
    at com.ibm.ast.ws.gsc.internal.GSCLaunchCommand.launchExternally(GSCLaunchCommand.java:85)
    at com.ibm.ast.ws.gsc.internal.GSCLaunchCommand.execute(GSCLaunchCommand.java:146)
    at org.eclipse.jst.ws.internal.consumption.ui.widgets.test.WSDLTestLaunchCommand.commandFactoryExecution(WSDLTestLaunchCommand.java:97)
    at org.eclipse.jst.ws.internal.consumption.ui.widgets.test.WSDLTestLaunchCommand.execute(WSDLTestLaunchCommand.java:72)
    at org.eclipse.jst.ws.internal.creation.ui.widgets.test.ServiceTestWidget.handleLaunchButton(ServiceTestWidget.java:105)
    at org.eclipse.jst.ws.internal.creation.ui.widgets.test.ServiceTestWidget.access$0(ServiceTestWidget.java:84)
    at org.eclipse.jst.ws.internal.creation.ui.widgets.test.ServiceTestWidget$1.widgetSelected(ServiceTestWidget.java:68)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:240)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
    at org.eclipse.jface.window.Window.runEventLoop(Window.java:825)
    at org.eclipse.jface.window.Window.open(Window.java:801)
    at org.eclipse.ui.internal.handlers.WizardHandler$New.executeHandler(WizardHandler.java:257)
    at org.eclipse.ui.internal.handlers.WizardHandler.execute(WizardHandler.java:277)
    at org.eclipse.ui.internal.handlers.HandlerProxy.execute(HandlerProxy.java:293)
    at org.eclipse.core.commands.Command.executeWithChecks(Command.java:476)
    at org.eclipse.core.commands.ParameterizedCommand.executeWithChecks(ParameterizedCommand.java:508)
    at org.eclipse.ui.internal.handlers.HandlerService.executeCommand(HandlerService.java:169)
    at org.eclipse.ui.internal.handlers.SlaveHandlerService.executeCommand(SlaveHandlerService.java:241)
    at org.eclipse.ui.internal.actions.CommandAction.runWithEvent(CommandAction.java:157)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

有没有办法手动生成wsdl？

我尝试输入 java2s 但它说该命令未被识别为内部程序。

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:34:19.090

通过删除 RequestWrapper 的生成和部署成功来解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-27T16:10:29.457

任何在 2022 年在这里绊倒的人。我在使用 apache cxf 插件的 gradleTask 中看到了类似的问题。

通过命令行选项并在类路径中添加参数 -wsdlLocation 和 wsdl 的路径值。

# windows - 读入两个文本文件列表并从文本文件中写出 1 行

> ID：12072007
> 
> 赞同：0
> 
> 时间：2012-08-22T11:23:44.517
> 
> 标签：windows, loops, powershell, scripting

我需要创建一个 powershell 脚本来读取两个带有列表的文本文件。第一个列表用于标识将附加文件的远程计算机。第二个列表是需要附加到文件的关键短语。

清单 1：计算机 1 计算机 2 计算机 3

清单 2：ABC DEF GHI

脚本将遍历每个指向每个远程计算机上的文件 C:\temp\help.txt 并从列表 2 中写入 1 行。

所以示例：当脚本运行时，它进入列表 1，发现计算机 1 是第一个并打开文件 \computer1\C$\temp\help.txt，然后它会从列表 2 中获取第一行并写入文件ABC。关闭文件并继续到计算机 2。计算机 2 将是 \computer2\C$\temp\help.txt 并将从列表 2 中获取第二个项目并将其写入 DEF 保存并继续。

很难找到任何帮助阅读和循环浏览 2 个列表。或者也许我想错了。我已经到 Get-Content 来读取文件，并且 foreach($x for text1) 可以通过 1 个文本文件循环，但无法弄清楚如何循环通过第二个文本文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:51:30.750

处理并排的数组总是很痛苦，而且容易出错。理想情况下，如建议的那样，计算机名称和字符串将一起以 CSV 或其他形式出现。

但事实上，这样的事情应该让你走上正轨。您可能不得不在字符串的开头/结尾处摆弄换行符。

```
$machines = Get-Content .\MachineList.txt
$strings = Get-Content .\StringsList.txt

if($machines.Count -ne $strings.Count){ throw 'Counts do not match' }

for($i = 0; $i -lt $strings.Count; $i++)
{
  $path = "\\$($machines[$i])\C`$\temp\help.txt"   # unc path
  $strings[$i] | Add-Content $path
} 
```

如果您将其保存在 CSV 中，例如

```
Config.csv
---------
ComputerName,String
machine1,string1
machine2,string2
machine3,string3 
```

然后你可以简化为：

```
Import-Csv .\Config.csv |%{
  $_.String | Add-Content "\\$($_.ComputerName)\C`$\temp\help.txt"
} 
```

# iphone - 在默认日历中添加特定日期作为事件

> ID：12072017
> 
> 赞同：1
> 
> 时间：2012-08-22T11:24:28.600
> 
> 标签：iphone, objective-c, ios, xcode

我是 iPhone 开发的新手。我的应用程序中有一个要求，其中有一个 Web 服务链接，如下所示：

[http://01s.in/webservices/sikhcalendar/getData.php?db_table=cal](http://01s.in/webservices/sikhcalendar/getData.php?db_table=cal)

所以我想要链接中显示的特定日期，该日期应该添加到 iCal 中，并添加到我的应用程序中。并且它应该在该特定日期生成警报视图。

所以，我不知道如何在 iCal 中添加事件。请给我一些答案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:39:17.893

首先在 ical 中添加日期，您必须在代码中添加两个框架，即`EventKit/EventKit.h`符合`EventKitUI/EventKitUI.h`委托的类`EKEventEditViewDelegate`并使用以下方法在 iCal 中添加日期

```
- (void)eventEditViewController:(EKEventEditViewController *)controller didCompleteWithAction:(EKEventEditViewAction)action 
```

我建议你浏览[这个 url](http://developer.apple.com/library/ios/#documentation/EventKitUI/Reference/EventKitUIFrameworkRef/_index.html)并了解这些框架

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:21:17.930

可以使用以下函数在默认日历上添加事件

* * *

```
-(void)createEvent :(NSString *)eventTitle: (NSURL *)eventURL: (NSString *)eventNotes: (NSDate *)eventStartDate: (NSDate *)eventEndDate{
EKEventStore *eventStore = [[EKEventStore alloc] init];
EKEvent *event  = [EKEvent eventWithEventStore:eventStore];
event.title = eventTitle;
event.URL = eventURL;
event.notes = eventNotes;
event.startDate = eventStartDate;
event.endDate   = eventEndDate;
[event setCalendar:[eventStore defaultCalendarForNewEvents]];
EKAlarm *myAlarm = [EKAlarm alarmWithRelativeOffset:0];
[event addAlarm:myAlarm];
NSError *err;
BOOL success = [eventStore saveEvent:event span:EKSpanThisEvent error:&err];
NSLog(@"event created success if value = 1 : %d", success);} 
```

* * *

这里 eventStartDate 将是您设置的警报执行的时间，您会收到通知

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-22T11:38:51.337

请查看 EventKit 框架和 Apple 文档。

一切都在那里:)

[Apple 文档日历/提醒](https://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/EventKitProgGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009765)

# asp.net-mvc-3 - KendoGrid 在 kendoTabStrip 中不起作用

> ID：12072018
> 
> 赞同：2
> 
> 时间：2012-08-22T11:24:29.737
> 
> 标签：asp.net-mvc-3, kendo-ui

我正在使用[KendoUI Page](http://www.kendoui.com/documentation/ui-widgets/tabstrip/overview.aspx)`kendoTabStrip`上显示的内容。就我而言，在每个 div 中，我都渲染了部分视图。在我的一些部分观点中，我有额外的。`kendoGrid`

**问题**

当我在任何选项卡中重新加载页面并转到包含的选项卡时，`kendoGrid`它无法正常工作。*例如：*我在选项卡#0 上并选择包含`kendoGrid`分页的选项卡#3，然后不显示分页。但是当我重新加载它时，分页工作正常。

我可以对`Grids`里面的作品做些什么`TabStrip`？

任何帮助，将不胜感激。

**更新**

我的实施`tabstrip`

```
 $("#tabStrip").kendoTabStrip({
        animation: { open: { effects: false} },
        select: function (e) {
            document.location.hash = 'tab-' + $(e.item).index();
        }
    });

    var tabStrip = $('#tabStrip').data('kendoTabStrip');
    var tabId = 0;
    var scheduledId = 0;
    if (document.location.hash.match(/tab-/) == 'tab-') {
        tabId = document.location.hash.substr(5);
    }
    if (document.location.hash.match(/scheduled-/) == 'scheduled-') {
        tabId = 1;
        scheduledId = document.location.hash.substr(11);
        editSchedule('/admin/Course/Scheduled/' + scheduledId +  '/Edit/' );

    }
    tabStrip.select(tabStrip.tabGroup.children('li').eq(tabId)); 
```

所以我需要它从控制器进行一些重写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:19:28.870

要解决这个问题，我们必须改变：

```
$("#tabStrip").kendoTabStrip({
    animation: { open: { effects: false} },
    select: function (e) {
        document.location.hash = 'tab-' + $(e.item).index();
    }
}); 
```

为了：

```
$("#tabStrip").kendoTabStrip({
    animation: { open: { effects: false} },
    select: function (e) {
        document.location.hash = 'tab-' + $(e.item).index();
    },
    activate: function(e) {
        $(e.contentElement).find('.k-state-active [data-role="grid"]').each(function() {
            $(this).data("kendoGrid").refresh();
        });                
    }
}); 
```

事件`activate`是“在选项卡可见之后但在动画结束之前触发”。所以我们必须刷新我们的网格然后因为`js`计算隐藏元素的宽度错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:15:27.587

我整理了一个在 TabStrip 内工作的网格示例：http: [//jsfiddle.net/dpeaep/SJ85S/](http://jsfiddle.net/dpeaep/SJ85S/)。也许，我错过了您在问题中提出的部分内容。如果是这样，您可以修改 jsfiddle 以澄清问题所在。

**HTML**

```
<div id="tabstrip">
  <ul>
    <li>Grid 1</li>
    <li>Grid 2</li>
    <li>Grid 3</li>
  </ul>
  <div><div id="grid1"></div></div>
  <div><div id="grid2"></div></div>
  <div><div id="grid3"></div></div>
</div> 
```

**Javascript**

```
var tabstrip = $("#tabstrip").kendoTabStrip().data("kendoTabStrip");
tabstrip.select(0);

$("#grid1").kendoGrid({
  columns: [
    { field: "FirstName", title: "First Name" },
    { field: "LastName", title: "Last Name" }
  ],
  dataSource: {
    data: [
      { FirstName: "Joe", LastName: "Smith" },
      { FirstName: "Jane", LastName: "Smith" }
    ]
  }
});

$("#grid2").kendoGrid({
  columns: [
    { field: "FirstName", title: "First Name" },
    { field: "LastName", title: "Last Name" }
  ],
  dataSource: {
    data: [
      { FirstName: "Betty", LastName: "Lakna" },
      { FirstName: "Fumitaka", LastName: "Yamamoto" },
      { FirstName: "Fred", LastName: "Stevenson" }
    ]
  }
});

$("#grid3").kendoGrid({
  columns: [
    { field: "Title", title: "Title" },
    { field: "Year", title: "Year" }
  ],
  dataSource: {
    data: [
      { Title: "Lost in Domtar", Year: "2012" },
      { Title: "Evergreen", Year: "2012" },
      { Title: "Fields of Yellow", Year: "2010" },
      { Title: "Where the Whistle Blows", Year: "2008" }
    ]
  }
}); 
```

# dotnetnuke - DNN 搜索自动重新索引

> ID：12072026
> 
> 赞同：4
> 
> 时间：2012-08-22T11:25:01.393
> 
> 标签：dotnetnuke, dotnetnuke-5, dotnetnuke-module

DNN 6.0 中有没有办法自动重新索引搜索结果。因为除非我们点击 host->Search Admin->Reindex Content，否则一些最近上传的内容在手动重新索引内容之前不会出现在搜索结果中。我想知道是否有办法使这个过程自动化，这样它就会每天发生。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:39:34.940

“搜索引擎时间表”应该为您处理这个问题。计划可能已禁用或需要更频繁地运行，请在主机 > 计划下检查。

# c# - 如何设置 Xps 文档的页面大小？

> ID：12072027
> 
> 赞同：5
> 
> 时间：2012-08-22T11:25:01.613
> 
> 标签：c#, .net-3.5, fixeddocument, documentpaginator

我正在尝试使用[FixedDocument](http://msdn.microsoft.com/en-us/library/system.windows.documents.fixeddocument%28v=vs.90%29.aspx)保存 XPS 文档。到目前为止，我未能更改页面大小。**如何将其更改为自定义尺寸？**

我的代码基于[这个问题的第一个答案](https://stackoverflow.com/questions/502198/convert-wpf-xaml-control-to-xps-document)，更具体地说，我正在使用这个代码：

```
 if (File.Exists(filename)) {
            File.Delete(filename);
        }

        var oldParent = LogicalTreeHelper.GetParent(this) as ContentControl;
        try {
            oldParent.Content = null;

            FixedDocument doc = new FixedDocument();

            PageContent pageCnt = new PageContent();
            FixedPage page = new FixedPage();

            page.Children.Add(this);
            try {
                ((System.Windows.Markup.IAddChild)pageCnt).AddChild(page);
                doc.Pages.Add(pageCnt);

                XpsDocument xpsDoc = new XpsDocument(filename, FileAccess.ReadWrite);
                try {
                    var writer = XpsDocument.CreateXpsDocumentWriter(xpsDoc);
                    writer.Write(doc);
                }
                finally {
                    xpsDoc.Close();
                }
            }
            finally {
                page.Children.Clear();
            }
        }
        finally {
            ((ContentControl)oldParent).Content = this;
        } 
```

它将用户控件复制到 XPS 文档中并成功完成，但正如我所说，使用默认纸张大小。

我尝试使用该`DocumentPaginator.PageSize`属性来设置新的页面大小（在实例化之后`FixedDocument`），但是我分配给该属性的任何内容似乎都被忽略了；生成的 XPS 文档中的页面保留其默认纸张大小。

逐步执行时，我可以看到`PageSize`属性的值确实发生了变化，所以它并不像新值不被`DocumentPaginator`.

我找到了各种在线资源，但都没有解决我的问题：

*   [这个在 MS Social 上发帖的论坛](http://social.msdn.microsoft.com/Forums/is/wpf/thread/d615c4b5-80fa-4eeb-808b-d79171b753e6)坚持认为设置`PageSize`属性是有效的，但据我所知并没有。
*   [文档](http://msdn.microsoft.com/en-us/library/system.windows.documents.documentpaginator.pagesize%28v=vs.90%29.aspx)声称设置`PageSize`属性有效，并提供了一个与我尝试过的相同的示例。（除此之外，基于此文档页面，我什至无法说出要使用的数字的单位。）
*   文档还指向[`DocumentPage.Size`属性](http://msdn.microsoft.com/en-us/library/system.windows.documents.documentpage.size%28v=vs.90%29.aspx)，但是该属性不能公开更改。在将页面添加到文档之前，我是否真的必须覆盖某些页面类才能获得不同的页面大小？
*   [这个论坛帖子](http://mindfusion.eu/Forum/YaBB.pl?board=wpfdg_disc;action=display;num=1295285990)描述了同样的问题，但答案对我来说似乎很荒谬。我`DocumentPaginator`只使用过一次该属性，因此没有“再次调用 (...).DocumentPaginator”可以保存一个实例。
*   [这个问题](https://stackoverflow.com/questions/9495914/fixeddocument-page-size)听起来很有希望，但实际上不是关于页面大小，而是关于给定页面上图像的比例。
*   除了前面提到的属性（`PageSize`无论如何这里设置为默认大小），[本教程](http://www.ericsink.com/wpf3d/B_Printing.html)使用. 但是，为快速测试分配一些正随机值会导致我的 XPS 文档明显损坏，并且 XPS 查看器在打开它时会显示错误消息。`Width``Height``FixedPage`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:39:54.527

FixedDocuments have fixed pages. The height and width of FixedPage can be controlled. Somewhat like this:

```
 FixedPage pageOne = new FixedPage();
        pageOne.Height = 20;
        pageOne.Width = 10; 
```

or in XAML:

Height="20" Width="10"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:17:53.740

I believe a FixedDocument will only print at the size of its pages. Even when loading a FixedDocument into a DocumentViewer, changing the printer settings' page size when you click the print button will have no effect. A FixedDocument by its very definition preserves the fidelity of the its contents exactly.

The only way to modify it is to create a derived DocumentPaginator which calls the FixedDocument.DocumentPaginator's functions internally and modifies the return values accordingly.

# android - 下拉值通过android中的soap webservices保存在mysql数据库中

> ID：12072032
> 
> 赞同：0
> 
> 时间：2012-08-22T11:25:21.283
> 
> 标签：android, mysql, web-services, jdbc, android-spinner

我希望通过android中的soap webservice在mysql数据库中插入下拉值...如果我必须从我的android应用程序中更改下拉值意味着更新值也保存在mysql数据库中...怎么办。请帮助我。

这是我的网络服务代码：

```
public class Insertion {

public String insertData(String userName,String userPassword){

try{

 Class.forName("com.mysql.jdbc.Driver");
 Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/androidlogin","root","");
 PreparedStatement statement =  con.prepareStatement("INSERT INTO user(status) VALUES ('"+userName+"');");
 int result = statement.executeUpdate();
  }

   catch(Exception exc){
   System.out.println(exc.getMessage());
     }

   return "Insertion successfull!!";
     }

     } 
```

这是我的安卓代码：

```
 public class InsertionExample extends Activity{
    private final String NAMESPACE = "http://ws.retailer.com";
private final String URL = "http://192.168.1.168:8085/Retailer/services/GetCurrentDateTime?wsdl";
private final String SOAP_ACTION = "http://ws.retailer.com/insertData";
private final String METHOD_NAME = "insertData";
Button btninsert;
private Spinner spnMusketeers;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btninsert = (Button)findViewById(R.id.btn_insert);  
    btninsert.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
         insertValues();
        }
    });
}

public void insertValues(){
Spinner userName = (Spinner) findViewById(R.id.spnMusketeers);
    String user_Name = userName.getContext().toString();

 spnMusketeers = (Spinner) findViewById(R.id.spnMusketeers);
 List<String> lsMusketeers = new ArrayList<String>();
 lsMusketeers.add("Q");
 lsMusketeers.add("C");
 lsMusketeers.add("P");
 lsMusketeers.add("I");
 lsMusketeers.add("F");

 ArrayAdapter<String> aspnMusketeers = 
   new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, 
    lsMusketeers);
 aspnMusketeers.setDropDownViewResource
    (android.R.layout.simple_spinner_dropdown_item);
 spnMusketeers.setAdapter(aspnMusketeers);

  // Set up a callback for the spinner
   spnMusketeers.setOnItemSelectedListener(
 new OnItemSelectedListener() {
     public void onNothingSelected(AdapterView<?> arg0) { }

     public void onItemSelected(AdapterView<?> parent, View v, 
      int position, long id)  {
         SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
         PropertyInfo unameProp =new PropertyInfo();
         unameProp.setName("spnMusketeers");//Define the variable name in the web service method
         unameProp.setValue(status);//Define value for fname variable
         unameProp.setType(String.class);//Define the type of the variable
         request.addProperty(unameProp);//Pass properties to the variable

         SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
         envelope.setOutputSoapObject(request);
         HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

         try{
          androidHttpTransport.call(SOAP_ACTION, envelope);
             SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

             TextView result = (TextView) findViewById(R.id.textView2);
             result.setText(response.toString());

      }
      catch(Exception e){

      } 
       // Code that does something when the Spinner value changes
     }
 });

  } 

  } 
```

如果我必须在单击插入按钮后从微调器中选择值意味着它没有插入。应用程序被强制关闭...请查看我的代码并为我提供正确的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:27:00.913

对此插入功能使用以下代码：

```
String selectedItem = parent.getItemAtPosition(pos).toString(); 
```

# java - 生成 JFreeChart 图形的巨大执行时间

> ID：12072035
> 
> 赞同：2
> 
> 时间：2012-08-22T11:25:23.347
> 
> 标签：java, jfreechart

我做了一个用 JfreeChart 生成图形的方法。我在散点图中绘制了超过 2500 个值，但这需要很长时间。那么我们该如何解决呢？

这是一段代码：

```
public NuagePointsFact(){
        LectureFichierExcel lfe = new LectureFichierExcel("data/requete1Test.xls");
        this.series = new TimeSeries[lfe.findDate().size()];
        this.dataset = new TimeSeriesCollection();

        for(int i=0; i<lfe.findDate().size(); i++){
        this.series [i] = new TimeSeries(i, Day.class);
        series[i].add(new Day(new Date(lfe.findDate().get(i))), lfe.findValues().get(i));

        dataset.addSeries(series[i]);

        }
..... 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:01:18.473

您是在将数据添加到之前创建图表`TimeSeries`吗？如果您在创建/显示图表后添加数据，则在`plot`添加每个点后将重新绘制。

考虑这个例子：

```
import java.text.SimpleDateFormat;

import javax.swing.JPanel;
import javax.swing.SwingUtilities;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.DateAxis;
import org.jfree.chart.plot.XYPlot;
import org.jfree.data.time.Day;
import org.jfree.data.time.TimeSeries;
import org.jfree.data.time.TimeSeriesCollection;
import org.jfree.data.time.TimeSeriesDataItem;
import org.jfree.data.xy.XYDataset;
import org.jfree.ui.ApplicationFrame;
import org.jfree.ui.RefineryUtilities;

public class TimeSeriesDemo1 extends ApplicationFrame {

    private static TimeSeries s1;
  private static boolean loadFirst;

    public TimeSeriesDemo1(String title) {
  super(title);
  JPanel chartPanel = createDemoPanel();
  chartPanel.setPreferredSize(new java.awt.Dimension(500, 270));
  setContentPane(chartPanel);

  if (!loadFirst){
    Runnable task = new Runnable() {
      @Override
      public void run() {
        try {
          Thread.sleep(5000);
        } catch (InterruptedException e) {}
        int count = 0;
        for ( int year = 2000 ; year < 2010 ; year++){
          for (int month = 1 ; month < 13 ; month++){
            for (int day = 1 ;  day < 29 ; day++){
              final TimeSeriesDataItem di = new TimeSeriesDataItem(new Day(day, month, year), Math.random() * 20);
              count++;
              SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                  s1.add(di);
                }
              });

            }
          }
        }
        System.out.println("After the chart is created " + count);
      }
    };
    Thread th = new Thread(task,"Load Data"){
    };
    th.start();
  }
    }

    private static JFreeChart createChart(XYDataset dataset) {

  JFreeChart chart = ChartFactory.createTimeSeriesChart(
      "Large Dataset Demo",  // title
      "Date",       // x-axis label
      "Value",      // y-axis label
      dataset,      // data
      true,         // create legend?
      true,         // generate tooltips?
      false         // generate URLs?
  );
  XYPlot plot = (XYPlot) chart.getPlot();
  DateAxis domainAaxis = (DateAxis) plot.getDomainAxis();
  domainAaxis.setDateFormatOverride(new SimpleDateFormat("MMM-yyyy"));
  return chart;

    }

    private static XYDataset createDataset() {
      s1 = new TimeSeries("Random Data");
      int count = 0;
      if (loadFirst){
        for ( int year = 2000 ; year < 2010 ; year++){
          for (int month = 1 ; month < 13 ; month++){
            for (int day = 1 ;  day < 29 ; day++){
              final TimeSeriesDataItem di = new TimeSeriesDataItem(new Day(day, month, year), Math.random() * 20);
              count++;
              s1.add(di);
            }
          }
        }
        System.out.println("Before the chart is created " + count);
      }
      TimeSeriesCollection dataset = new TimeSeriesCollection();
      dataset.addSeries(s1);
      return dataset;
    }

    public static JPanel createDemoPanel() {
  JFreeChart chart = createChart(createDataset());
  return new ChartPanel(chart);
    }

    public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
          loadFirst = true;
          TimeSeriesDemo1 demo = new TimeSeriesDemo1("Large Time Series Demo ");
          demo.pack();
          RefineryUtilities.centerFrameOnScreen(demo);
          demo.setVisible(true);
        }
      });
    }

} 
```

如果您设置`loadFirst = true`图表在屏幕上绘制之前添加大约 3k 个数据点。

设置`loadFirst = false`，它会在之后添加它们需要更长的时间。

您应该能够看到性能上的差异。从您的示例中不清楚您使用的是哪种方法。

如果您在加载数据之前显示图表，则尽可能尝试切换顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:32:37.507

我只有一些建议，您必须尝试一下：您可以将数据以 100 个左右的值的形式添加到您的系列中。您将不得不使用单独的线程添加到模型中，然后重新绘制图表，等待一段时间并添加另一束，依此类推。

但是，我过去曾使用过 JFreeChart，我认为它可以很好地处理超过 2500 个值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-25T15:22:27.577

使 JFreechart 运行良好。设置前系列数据集：axisR.setAutoRange(false); 轴H.setAutoRange（假）；它是这样的：

```
JFreeChart chart1 = ChartFactory.createXYLineChart(null, null, "Level", dataset1);
XYPlot plot1 = chart1.getXYPlot();
axisR = (NumberAxis)plot.getRangeAxis();
axisH = (NumberAxis)plot.getDomainAxis();
axisR.setAutoRange(false);
axisH.setAutoRange(false); 
```

数据设置后

```
axisR.setAutoRange(true);
axisH.setAutoRange(true); 
```

# facebook - Trigger.io Facebook.Authorize

> ID：12072037
> 
> 赞同：2
> 
> 时间：2012-08-22T11:25:24.720
> 
> 标签：facebook, trigger.io

我正在尝试使用 Trigger.IO 进行 Facebook 单点登录，并且在使用 IOS 模拟器进行测试时会发生以下情况：

1.  Facebook 对话开始
2.  用户登录
3.  用户授权应用
4.  用户单击“确定”返回本机应用程序。

在第 4 步，将显示以下 Safari 通知，并且该应用程序永远不会重新加载：

```
"Cannot Open Page"
"Safari Cannot Open the Page because the address is invalid" 
```

据我所知，我的 APP ID 是正确的，否则该过程将永远不会进入第 4 步。我的 Facebook 应用程序设置有以下详细信息：

```
Native iOS App
SSO enabled. 
```

不知道我在这里缺少什么，但任何帮助将不胜感激！我在 plist 中找到了原生应用程序的类似问题的答案，其中 Facebook APP ID 应以“fb”开头。但与 trigger.IO 无关

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:59:17.267

这是我们在 v1.4.11 中修复的 v1.4.10 中的回归 - 如果您有：

```
"platform_version": "v1.4", 
```

在您的应用程序配置中，您将自动选择修复程序。

# c++ - SQL SP 在 SSMS 中正常工作，但在 VC++ 应用程序中失败

> ID：12072050
> 
> 赞同：0
> 
> 时间：2012-08-22T11:25:58.527
> 
> 标签：c++, sql-server, odbc

我有一个从多台计算机运行的应用程序，并且必须在其内部数据库和 SQL 服务器中的一个数据库之间同步某些内容。

我使用一些临时表来插入内部数据库的数据，然后调用一个 SP 来同步数据，它将逐行处理数据，然后在 SQL 数据库中更新它们，插入新行或删除删除的行。因为我应该支持拥有 SQL server 2000 的客户，所以我应该有一个除`MERGE`.

问题是我的 SP 在 SSMS 中运行良好，但从我的应用程序调用时突然失败，我使用 C++ 本机代码并使用 ODBC 和 SQL Native Client 与 SQL 服务器连接。

这是我的数据库和 SP 定义：

```
IF (NOT EXISTS(SELECT * FROM master.dbo.sysdatabases WHERE name='TestDB1'))
    CREATE DATABASE TestDB1;
GO
USE TestDB1;
GO
IF (NOT EXISTS( SELECT * FROM dbo.sysobjects WHERE name='Servers'))
BEGIN
    CREATE TABLE Servers(
        [ID]            uniqueidentifier NOT NULL PRIMARY KEY,
        [Name]          nvarchar(50)
        -- Other fields omitted
    );
END;
GO

IF (NOT EXISTS( SELECT * FROM dbo.sysobjects WHERE name='P'))
BEGIN
    CREATE TABLE [dbo].[P](
        [ID]            bigint              NOT NULL,
        [ServerID]      uniqueidentifier    NOT NULL
            CONSTRAINT KK_P_Servers FOREIGN KEY REFERENCES [Servers],
        [PName]         nvarchar(255)       NOT NULL,
        -- Other fields omitted

        CONSTRAINT PK_P PRIMARY KEY CLUSTERED ([ID], [ServerID])
    );
END;
GO
IF (NOT EXISTS( SELECT * FROM dbo.sysobjects WHERE name='C1'))
BEGIN
    CREATE TABLE [dbo].[C1](
        [ID]            bigint              NOT NULL,
        [ServerID]      uniqueidentifier    NOT NULL
            CONSTRAINT FK_C1_Servers FOREIGN KEY REFERENCES [Servers],
        [PID]           bigint              NOT NULL,
        [Type]          nvarchar(50)        NOT NULL
        -- Other fields omitted

        CONSTRAINT PK_C1 PRIMARY KEY CLUSTERED ([ID], [ServerID]),
        CONSTRAINT FK_C1_P
            FOREIGN KEY ([PID], [ServerID]) REFERENCES [P]
    );
END;
GO
IF (NOT EXISTS( SELECT * FROM dbo.sysobjects WHERE name='C2'))
BEGIN
    CREATE TABLE [dbo].[C2](
        [ID]            bigint              NOT NULL,
        [ServerID]      uniqueidentifier    NOT NULL
            CONSTRAINT FK_C2_Servers FOREIGN KEY REFERENCES [Servers],
        [PID]           bigint              NULL,
        [Name]          nvarchar(255)       NOT NULL
        -- Other fields omitted

        CONSTRAINT PK_C2 PRIMARY KEY CLUSTERED ([ID], [ServerID]),
        CONSTRAINT FK_C2_P FOREIGN KEY ([PID], [ServerID]) REFERENCES [P]
    );
END;
GO
IF (NOT EXISTS( SELECT * FROM dbo.sysobjects WHERE name='debug'))
BEGIN
    CREATE TABLE debug (
        [id] int identity(1, 1),
        [msg] nvarchar(255) NOT NULL,
        [cnt] int
    );
END;
GO

CREATE TABLE #C1(
    [ID]            bigint          NOT NULL PRIMARY KEY,
    [PID]           bigint          NOT NULL,
    [Type]          nvarchar(50)    NOT NULL
);
GO
CREATE TABLE #C2(
    [ID]            bigint          NOT NULL PRIMARY KEY,
    [PID]           bigint          NOT NULL,
    [Name]          nvarchar(255)   NOT NULL
);
GO

CREATE TABLE #P(
    [ID]            bigint          NOT NULL PRIMARY KEY,
    [PName]         nvarchar(255)   NOT NULL UNIQUE
    -- Table have other fields that is not important here
);
GO
CREATE TABLE #C1(
    [ID]            bigint          NOT NULL PRIMARY KEY,
    [PID]            bigint            NOT NULL,
    [Type]            nvarchar(50)    NOT NULL
);
GO
CREATE TABLE #C2(
    [ID]            bigint            NOT NULL PRIMARY KEY,
    [PID]            bigint            NOT NULL,
    [Name]            nvarchar(255)    NOT NULL
);
GO

CREATE PROCEDURE #RegisterServer
    @ServerId            uniqueidentifier,
    @ServerName            nvarchar(128)
AS
BEGIN
    BEGIN TRANSACTION
    UPDATE [Servers]
    SET [ServerName]=@ServerName
    WHERE [ID]=@ServerId;
    IF @@ROWCOUNT = 0
        INSERT INTO [Servers](
            [ID], [ServerName]
        ) VALUES (
            @ServerId, @ServerName
        );
    COMMIT TRANSACTION
END
GO
CREATE PROCEDURE #DropP
    @ServerID            uniqueidentifier,
    @PId                bigint
AS
BEGIN
    DELETE FROM C1
    WHERE PID=@PId AND ServerID=@ServerID;

    UPDATE C2 SET PID=NULL
    WHERE PID=@PId AND ServerID=@ServerID;

    DELETE FROM P
    WHERE ID=@PId AND ServerID=@ServerID;
END
GO
CREATE PROCEDURE #SynchronizeP
    @ServerID            uniqueidentifier
AS
BEGIN
    DECLARE @rc int, @e int;
    DECLARE @AllP TABLE (
        [num]            bigint            IDENTITY(1, 1) PRIMARY KEY,
        [ID]            bigint            NOT NULL,
        [PName]            nvarchar(255)    NOT NULL
    );
    DECLARE @AllC1 TABLE (
        [num]            bigint            IDENTITY(1, 1) PRIMARY KEY,
        [ID]            bigint            NOT NULL,
        [PID]            bigint            NOT NULL,
        [Type]            nvarchar(50)    NOT NULL
    );
    DECLARE @AllC2 TABLE (
        [num]            bigint            IDENTITY(1, 1) PRIMARY KEY,
        [ID]            bigint            NOT NULL,
        [PID]            bigint            NOT NULL,
        [Name]            nvarchar(255)    NOT NULL
    );

    DELETE FROM debug;

    INSERT INTO @AllP( [ID], [PName] )
    SELECT [ID], [PName]
    FROM #ServerP;
    SELECT @rc = @@ROWCOUNT;
    INSERT INTO debug VALUES( 'CREATE @AllP', @rc );

    INSERT INTO @AllC1( [ID], [PID], [Type] )
    SELECT [ID], [PID], [Type]
    FROM #ServerC1;
    SELECT @rc = @@ROWCOUNT;
    INSERT INTO debug VALUES( 'CREATE @AllC1', @rc );

    INSERT INTO @AllC2( [ID], [PID], [Name] )
    SELECT [ID], [PID], [Name]
    FROM #ServerC2;
    SELECT @rc = @@ROWCOUNT;
    INSERT INTO debug VALUES( 'CREATE @AllC2', @rc );

    DECLARE @PCount int
    SELECT @PCount = COUNT(*) FROM @AllP
    INSERT INTO debug VALUES( 'Read count of @AllP', @PCount );

    BEGIN TRANSACTION;

    DECLARE @PId bigint, @PName nvarchar(255);

    -- find dropped c1 and delete them
    DELETE FROM [C1]
    WHERE [ServerID]=@ServerID AND ([ID] NOT IN (SELECT a.[ID] FROM @AllC1 a));
    SELECT @rc = @@ROWCOUNT;
    INSERT INTO debug VALUES( 'Delete invalid c1', @rc );

    -- find dropped c2 and abandon them
    UPDATE [C2] SET [PID]=NULL
    WHERE [ServerID]=@ServerID AND ([ID] NOT IN (SELECT a.[ID] FROM @AllC2 a));
    SELECT @rc = @@ROWCOUNT;
    INSERT INTO debug VALUES( 'Abandon invalid c2', @rc );

    -- find dropped p and delete them
    DELETE FROM [P]
    WHERE [ServerID]=@ServerID AND ([ID] NOT IN (SELECT a.[ID] FROM @AllP a));
    SELECT @rc = @@ROWCOUNT;
    INSERT INTO debug VALUES( 'Delete invalid p', @rc );

    -- insert or update server p into database
    DECLARE @p int
    SET @p = 1
    WHILE @p <= @PCount
    BEGIN
        SELECT    @PId=[ID], @PName=[PName]
        FROM    @AllP
        WHERE    [num] = @p;
        SELECT @rc = @@ROWCOUNT;
        INSERT INTO debug VALUES( 'Select a p ' +
            CASE @PId WHEN NULL THEN 'NULL' ELSE CONVERT(nvarchar(5), @PId) END + '|' +
            CASE @PName WHEN NULL THEN 'NULL' ELSE @PName END, @rc );

        -- update or add this processor
        UPDATE dbo.[P]
        SET [PName]=@PName
        WHERE [ServerID]=@ServerID AND [ID]=@PId;
        SELECT @rc = @@ROWCOUNT;
        INSERT INTO debug VALUES( 'Update p', @rc );
        IF @rc = 0
        BEGIN
            INSERT INTO dbo.[P](
                [ID], [ServerID], [PName]
            ) VALUES(
                @PId, @ServerID, @PName
            );
            SELECT @rc = @@ROWCOUNT;
            INSERT INTO debug VALUES( 'Insert p', @rc );
        END;

        -- Now update list of c1 that belong to this processor
        DECLARE @TmpC1 TABLE (
            [num]                    bigint identity(1, 1) primary key,
            [ID]                    bigint            NOT NULL,
            [Type]                    nvarchar(50)    NOT NULL
        );
        INSERT INTO @TmpC1( [ID], [Type] )
        SELECT [ID], [Type]
        FROM @AllC1
        WHERE [PID] = @PId;
        SELECT @rc = @@ROWCOUNT;
        INSERT INTO debug VALUES( 'Create @TmpC1', @rc );

        DECLARE @Test nvarchar(4000);
        SELECT @Test = '';
        SELECT @Test = @Test + CONVERT(nvarchar(5), [ID]) + ', '
        FROM @TmpC1;
        SELECT @rc = @@ROWCOUNT;
        INSERT INTO debug VALUES( '@TmpC1: ' + @Test, @rc );

        DECLARE @C1Count int, @C1 int;
        SELECT @C1Count = COUNT(*) FROM @TmpC1;
        INSERT INTO debug VALUES( '@TmpC1.Count', @C1Count );

        SET @C1 = 1
        WHILE @C1 <= @C1Count
        BEGIN
            DECLARE @C1Id bigint, @C1Type nvarchar(50);

            SELECT @C1Id=[ID], @C1Type=[Type]
            FROM @TmpC1
            WHERE [num] = @C1;
            SELECT @rc = @@ROWCOUNT;
            INSERT INTO debug VALUES( 'Read c1: ' +
                CASE @C1Id WHEN NULL THEN 'NULL' ELSE CONVERT(nvarchar(5), @C1Id) END + '|' +
                CASE @C1Type WHEN NULL THEN 'NULL' ELSE @C1Type END, @rc );

            UPDATE C1
            SET [PID]=@PId, [Type]=@C1Type
            WHERE [ID]=@C1Id AND [ServerID]=@ServerID;
            SELECT @rc = @@ROWCOUNT;
            INSERT INTO debug VALUES( 'Update c1', @rc );
            IF @rc = 0
            BEGIN
                INSERT INTO C1(
                    [ID], [ServerID], [PID], [Type]
                ) VALUES (
                    @C1Id, @ServerID, @PId, @C1Type
                );
                SELECT @rc = @@ROWCOUNT;
                INSERT INTO debug VALUES( 'Insert c1', @rc );
            END;

            SET @C1 = @C1 + 1;
        END;

        DELETE FROM @TmpC1;

        -- And at last insert or update c2 of this processor
        DECLARE @TmpC2 TABLE (
            [num]                    bigint identity(1, 1) primary key,
            [ID]                    bigint            NOT NULL,
            [Name]                    nvarchar(255)    NOT NULL
        );
        INSERT INTO @TmpC2( [ID], [Name] )
        SELECT [ID], [Name]
        FROM @AllC2
        WHERE [PID] = @PId;
        SELECT @rc = @@ROWCOUNT;
        INSERT INTO debug VALUES( 'Create @TmpC2', @rc );

        SELECT @Test = '';
        SELECT @Test = @Test + CONVERT(nvarchar(5), [ID]) + ', '
        FROM @TmpC2;
        SELECT @rc = @@ROWCOUNT;
        INSERT INTO debug VALUES( '@TmpC2: ' + @Test, @rc );

        DECLARE @C2Count int, @C2 int;
        SELECT @C2Count = COUNT(*) FROM @TmpC2;
        INSERT INTO debug VALUES( '@TmpC2.Count', @C2Count );

        SET @C2 = 1
        WHILE @C2 <= @C2Count
        BEGIN
            DECLARE @C2Id bigint, @C2Name nvarchar(255);

            SELECT @C2Id=[ID], @C2Name=[Name]
            FROM @TmpC2
            WHERE [num] = @C2;
            SELECT @rc = @@ROWCOUNT;
            INSERT INTO debug VALUES( 'Read c2: ' +
                CASE @C2Id WHEN NULL THEN 'NULL' ELSE CONVERT(nvarchar(5), @C2Id) END + '|' +
                CASE @C2Name WHEN NULL THEN 'NULL' ELSE @C2Name END, @rc );

            UPDATE [C2]
            SET [PID]=@PId, [Name]=@C2Name
            WHERE [ID]=@C2Id AND ServerID=@ServerID;
            SELECT @rc = @@ROWCOUNT;
            INSERT INTO debug VALUES( 'Update c2', @rc );
            IF @rc = 0
            BEGIN
                INSERT INTO debug VALUES( 'Inserting channel: ' +
                    CONVERT(nvarchar(5), @C2Id) + '|' +
                    CONVERT(nvarchar(50), @ServerId) + '|' +
                    CONVERT(nvarchar(5), @PId), 0 );
                INSERT INTO [C2] (
                    [ID], [ServerID], [PID], [Name]
                ) VALUES (
                    @C2Id, @ServerID, @PId, @C2Name
                );
                SELECT @rc = @@ROWCOUNT;
                INSERT INTO debug VALUES( 'Insert c2', @rc );
            END;

            INSERT INTO debug VALUES( 'To next c2', @C2 );
            SET @C2 = @C2 + 1;
            INSERT INTO debug VALUES( 'Next c2', @C2 );
        END;

        DELETE FROM @TmpC2;

        SET @p = @p + 1;
    END;

    COMMIT TRANSACTION;
END
GO 
```

每次我从 C++ 应用程序执行 #SynchronizeP 时，我都会在 SP 和事务之间的某处突然出现错误，但事务将失败，但在 SSMS 中执行代码是完美的。我尝试了任何方法，但我可以想出一个答案！

这是我使用它的示例数据

```
INSERT INTO #P( [ID, [Name] ) VALUES
    ( 1, 'p1' )
    ( 2, 'p2' )
    ( 3, 'p3' )
GO

INSERT INTO #C1( [ID], [PID], [Type] ) VALUES
    ( 1, 1, 'T1' )
    ( 2, 1, 'T2' )
    ( 3, 2, 'T3' )
    ( 4, 2, 'T4' )
    ( 5, 3, 'T5' )
    ( 6, 3, 'T6' )
GO

INSERT INTO #C2( [ID], [PID], [Name] ) VALUES
    ( 1, 1, 'C2_01' )
    ( 2, 1, 'C2_02' )
    ( 3, 1, 'C2_03' )
    ( 4, 1, 'C2_04' )
    ( 5, 1, 'C2_05' )
    ( 6, 1, 'C2_06' )
    ( 7, 1, 'C2_07' )
    ( 8, 1, 'C2_08' )
    ( 9, 1, 'C2_09' )
    (10, 1, 'C2_10' )
    (11, 1, 'C2_11' )
    (12, 1, 'C2_12' )
    (13, 1, 'C2_13' )
    (14, 1, 'C2_14' )
    (15, 1, 'C2_15' )
    (16, 1, 'C2_16' )
    (17, 1, 'C2_17' )
    (18, 1, 'C2_18' )
    (19, 1, 'C2_19' )
    (20, 1, 'C2_20' )
    (21, 1, 'C2_21' )
    (22, 1, 'C2_22' )
    (23, 1, 'C2_23' )
    (24, 1, 'C2_24' )
    (25, 1, 'C2_25' )
    (26, 1, 'C2_26' )
    (27, 1, 'C2_27' )
    (28, 1, 'C2_28' )
    (29, 1, 'C2_29' )
    (30, 1, 'C2_30' )

    (31, 2, 'C2_31' )
    (32, 2, 'C2_32' )
    (33, 2, 'C2_33' )
    (34, 2, 'C2_34' )
    (35, 2, 'C2_35' )
    (36, 2, 'C2_36' )
    (37, 2, 'C2_37' )
    (38, 2, 'C2_38' )
    (39, 2, 'C2_39' )
    (40, 2, 'C2_40' )
    (41, 2, 'C2_41' )
    (42, 2, 'C2_42' )
    (43, 2, 'C2_43' )
    (44, 2, 'C2_44' )
    (45, 2, 'C2_45' )
    (46, 2, 'C2_46' )
    (47, 2, 'C2_47' )
    (48, 2, 'C2_48' )
    (49, 2, 'C2_49' )
    (50, 2, 'C2_50' )
    (51, 2, 'C2_51' )
    (52, 2, 'C2_52' )
    (53, 2, 'C2_53' )
    (54, 2, 'C2_54' )
    (55, 2, 'C2_55' )
    (56, 2, 'C2_56' )
    (57, 2, 'C2_57' )
    (58, 2, 'C2_58' )
    (59, 2, 'C2_59' )
    (60, 2, 'C2_60' )

    (61, 3, 'C2_61' )
    (62, 3, 'C2_62' )
    (63, 3, 'C2_63' )
    (64, 3, 'C2_64' )
    (65, 3, 'C2_65' )
    (66, 3, 'C2_66' )
    (67, 3, 'C2_67' )
    (68, 3, 'C2_68' )
    (69, 3, 'C2_69' )
    (70, 3, 'C2_70' )
    (71, 3, 'C2_71' )
    (72, 3, 'C2_72' )
    (73, 3, 'C2_73' )
    (74, 3, 'C2_74' )
    (75, 3, 'C2_75' )
    (76, 3, 'C2_76' )
    (77, 3, 'C2_77' )
    (78, 3, 'C2_78' )
    (79, 3, 'C2_79' )
    (80, 3, 'C2_80' )
    (81, 3, 'C2_81' )
    (82, 3, 'C2_82' )
    (83, 3, 'C2_83' )
    (84, 3, 'C2_84' )
    (85, 3, 'C2_85' )
    (86, 3, 'C2_86' )
    (87, 3, 'C2_87' )
    (88, 3, 'C2_88' )
    (89, 3, 'C2_89' )
    (90, 3, 'C2_90' )
GO

EXEC #SynchronizeP
GO 
```

*编辑*：天哪！！我不敢相信，我添加`SET NOCOUNT ON`到我的 SP 的开始，一切都按预期进行！有谁知道为什么？为什么显示我的 SP 的受影响行中断执行计数的消息。
我知道在大多数情况下，`SET NOCOUNT ON`在 SP 的开头添加（为了提高性能）是个好主意，但为什么忘记添加它会破坏我的 SP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:30:00.380

通过在您的 SP 前加上 # 前缀，您已将其设为临时。因此，当您从 C++ 程序中的不同会话调用它时，它可能不存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:49:02.943

我认为答案是 ODBC 在收到 SQL 的第一个答案时会关闭或取消命令，所以如果我忘记使用`SET NOCOUNT ON`并且 SQL 发送计数通知，ODBC 将取消命令。可能有一些技术可以为 ODBC 中的 SQL 命令启用多个结果集，但我不知道这种技术

# asp.net-mvc-3 - ASP.Net MVC 3 System.Data.SqlClient.SqlException 超时已过期

> ID：12072054
> 
> 赞同：1
> 
> 时间：2012-08-22T11:26:08.787
> 
> 标签：asp.net-mvc-3, sql-server-2008, entity-framework-4.1, timeout

我正在使用 Entity Framework 4.1 开发一个 ASP.Net MVC 3 Web 应用程序。我最近将应用程序上传到我的测试服务器，我注意到 ELMAH 发送的错误电子邮件指出

> System.Data.SqlClient.SqlException 超时已过期。在操作完成之前超时时间已过或服务器没有响应。

下面显示了我的一些代码。

**控制器**

```
public ActionResult VerifyEmail(int uid, string vid)
{
    var userList = _userService.VerifyEmail(uid,vid).ToList();
} 
```

**服务**

```
public IList<User> VerifyEmail(int uid, string emailvcode)
{
    return _uow.User.Get(u => u.userID == uid && u.emailVerificationCode == emailvcode).ToList();
} 
```

**工作单元**

```
 public class UnitOfWork : IUnitOfWork, IDisposable
 {
        readonly LocumEntities _context = new LocumEntities();

        private GenericRepository<User> _user = null;

        public IGenericRepository<User> User
        {
            get
            {
                if (_user == null)
                {
                    _user = new GenericRepository<User>(_context);
                }
                return _user;
            }

        }

  } 
```

**通用存储库**

```
public IList<TEntity> Get(Expression<Func<TEntity, bool>> filter = null,Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null,string includeProperties = "")
{
    IQueryable<TEntity> query = dbSet;

    if (filter != null)
    {
        query = query.Where(filter);
    }

    foreach (var includeProperty in includeProperties.Split
        (new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
    {
        query = query.Include(includeProperty);
    }

    if (orderBy != null)
    {
        return orderBy(query).ToList();
    }
    else
    {
        return query.ToList();
    }
} 
```

当Service 方法中的行尝试执行时，有时会发生**超时错误**

```
return _uow.User.Get(u => u.userID == uid && u.emailVerificationCode == emailvcode).ToList(); 
```

此错误并非每次都发生，只是偶尔发生，但是，我不明白为什么此查询将返回用户列表或 NULL 列表。

谁能从我的代码中发现为什么会发生这种情况？

任何反馈都将不胜感激，因为我不知道为什么会这样。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:35:38.447

尝试增加连接字符串中的超时属性。还要运行 SQL Server Profiler 以查看为您的查询生成了多少 SQL，因为查询可能会返回导致超时的大量数据。

# hornetq - 没有 JMS 和 JNDI 的 HornetQ

> ID：12072067
> 
> 赞同：0
> 
> 时间：2012-08-22T11:27:04.217
> 
> 标签：hornetq

我正在寻找一个不使用 JMS、JNDI 或 JBoss AS 的简单 hornetQ 示例。发行版中包含的大多数示例都使用 JNDI 和 JMS，或 JBoss AS。我查看了嵌入式示例，但我不想在我的应用程序中运行 hornetQ。有人可以指出我正确的方向。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:27:25.007

您可以查看 HornetQ 新书第 3 章的示例

[www.amazon.com/dp/1849518408/?tag=packtpubli-20](https://rads.stackoverflow.com/amzn/click/com/1849518408)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:09:50.087

我们不可能在核心和 JMS API 中编写每一个示例，并保持两者都能正常工作。

出于这个原因，我们只包含了几个核心示例和 JMS 示例。

JMS 只是 core-api 上的一个薄层，您可能需要了解的有关 core-api 的所有信息都在这些嵌入式和核心示例中。

如果您对 API 有任何具体问题，或者您正在寻找我可以帮助您的具体示例。

# wordpress - 自定义 Wordpress 用户类型

> ID：12072068
> 
> 赞同：7
> 
> 时间：2012-08-22T11:27:07.037
> 
> 标签：wordpress

我想在 wordpress 中创建自定义用户类型。对于 eaxpmle，有 'Editor'、'Author' 等。我想创建自己的类型；就像说具有特定访问级别的“开发人员”。那可能吗？我是新手，所以一点方向或建议真的会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T11:29:32.020

要使用它，请将以下代码添加到您的`functions.php`文件中：

```
add_role('developer', 'Developer', array(
    'read' => true,
    'edit_posts' => true,
    'delete_posts' => true,
)); 
```

# python - Django 生成表单中的用户输入限制

> ID：12072073
> 
> 赞同：0
> 
> 时间：2012-08-22T11:27:22.600
> 
> 标签：python, html, database, django, templates

如何在 django 生成的表单中限制用户输入？例如，我有一个 maxlength=4 的字段（SmallIntegerField）。如何限制用户仅输入该内容？因为没有限制我得到数据库错误。我正在使用基于类的视图。谢谢

PS：我想在进入时在浏览器中限制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:47:40.997

对该字段使用[MaxValueValidator验证器](https://docs.djangoproject.com/en/dev/ref/validators/#maxvaluevalidator)

```
from django.core.validators import MaxValueValidator

field = models.SmallIntegerField(validators=[MaxValueValidator(9999),]) 
```

# spring - 异常恢复继续：dwr glassfish

> ID：12072074
> 
> 赞同：1
> 
> 时间：2012-08-22T11:27:43.737
> 
> 标签：spring, glassfish, dwr, reverse-ajax

我正在`dwr3`使用`spring mvc`. 当应用程序部署在`tomcat(version 6)`. 但是在 glassfish（3.1 版）中运行相同的应用程序时出现以下错误。非常感谢任何帮助。

我得到的错误；

```
INFO: [ERROR] [Thread-50 05:00:02] (GrizzlyContinuationSleeper.java:wakeUp:167) Exception resuming continuation: 
java.lang.NullPointerException
    at org.directwebremoting.util.Continuation.resume(Continuation.java:108)
    at org.directwebremoting.server.grizzly.GrizzlyContinuationSleeper.wakeUp(GrizzlyContinuationSleeper.java:157)
    at org.directwebremoting.impl.OutputAlarm$AlarmScriptConduit$1.run(OutputAlarm.java:103)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)

INFO: [ERROR] [Thread-50 05:00:02] (GrizzlyContinuationSleeper.java:wakeUp:167) Exception resuming continuation: 
java.lang.NullPointerException
    at org.directwebremoting.util.Continuation.resume(Continuation.java:108)
    at org.directwebremoting.server.grizzly.GrizzlyContinuationSleeper.wakeUp(GrizzlyContinuationSleeper.java:157)
    at org.directwebremoting.impl.OutputAlarm$AlarmScriptConduit$1.run(OutputAlarm.java:103)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:33:40.910

将此添加到 POM。这应该可以解决问题

```
<dependency>
  <groupId>com.sun.grizzly</groupId>
  <artifactId>grizzly-continuation</artifactId>
 <version>1.9.0-RC1</version>
</dependency> 
```

后面的 jar 文件包含使用 Grizzly 版本检测的 Grizzly 类，并将使 DWR 适用于所有 GlassFish 版本（9.1、9.1 ur1、Sailfin、OpenESB）。

# html - 相对于有序列表编号对齐列表项

> ID：12072075
> 
> 赞同：1
> 
> 时间：2012-08-22T11:27:46.323
> 
> 标签：html, css, list, alignment

这是我的代码的小提琴：http: [//jsfiddle.net/ZWQpb/](http://jsfiddle.net/ZWQpb/)

这是HTML：

```
<div class="blog-entry">
            <ol>
                <li><h4 class="title"><a href="">10 moments in cinematic history changing thus</a></h4></li>

                <li><h4 class="title"><a href="">Testing this theme with image</a></h4></li>

                <li><h4 class="title"><a href="">More experimental things and more</a></h4></li>

                <li><h4 class="title"><a href="">The video that defined a new definition</a></h4></li>

                </ol>
</div> 
```

和CSS：

```
body {
    padding: 50px;
}

.blog-entry {
    padding-left: 32px;
    position: relative;
    width: 248px;
}
.blog-entry ol {
    color: #999999;
    font: italic 3em Arial,sans-serif;
    list-style-type: decimal;
}
.blog-entry h4.title {
    color: #48423F;
    font-family: Arial,sans-serif;
    font-size: 16px;
    padding-left: 25px;
    padding-right: 33px;
    text-shadow: none;
} 
```

我希望每个列表项从数字的顶部对齐。以这张图片为例：![列表](../Images/7798d5242ca6ea5d224a64f4becad9ee.png)

我怎样才能做到这一点？随时更新小提琴：http: [//jsfiddle.net/ZWQpb/](http://jsfiddle.net/ZWQpb/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:40:06.227

我找到的唯一解决方案是，li 和 h4 类的字体大小应该相同。

在这里查看另一个[http://jsfiddle.net/ZWQpb/12/](http://jsfiddle.net/ZWQpb/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:40:08.580

像这样的东西？

```
.title {
    float:right;
    margin-top:10px;
} 
```

[http://jsfiddle.net/ZWQpb/11/](http://jsfiddle.net/ZWQpb/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:53:37.467

检查这个[小提琴](http://jsfiddle.net/ZWQpb/22/)

添加了 position: `relative`to `<li>`，对 h4`absolute`进行了一些边距调整，使 h4

```
.blog-entry ol li{
    position: relative;
    margin-top: -12px;
}

.blog-entry h4.title {
    position: absolute;
    top: 5px;
    color: #48423F;
    font-family: Arial,sans-serif;
    font-size: 16px;
    padding-left: 25px;
    padding-right: 33px;
    text-shadow: none;
    vertical-algin: bottom;
} 
```

`margin-top`如果您希望行更接近，请减少。

# macos - 如何清除 Cocoa 中的 WebView 缓存？

> ID：12072076
> 
> 赞同：9
> 
> 时间：2012-08-22T11:27:47.933
> 
> 标签：macos, cocoa, webview

如何清除/刷新 Cocoa 应用程序中的[WebView](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Classes/WebView_Class/Reference/Reference.html)缓存？

特别是，我想清除本地样式表的缓存。

我尝试了以下方法无济于事：

```
// Tried this before loadRequest
[[NSURLCache sharedURLCache] removeAllCachedResponses];

// Also tried this before and after loadRequest
[webView.mainFrame reloadFromOrigin]; 
```

即使用新的替换`WebView`它仍然使用缓存的样式表。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T13:04:46.683

其他建议的解决方案不适用于本地样式表（尽管它们应该适用于远程资源）。

我终于设法通过显式设置缓存策略通过[resourceLoadDelegate解决了这个问题：](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebResourceLoadDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40003836)

```
- (NSURLRequest *)webView:(WebView *)sender resource:(id)identifier willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)redirectResponse fromDataSource:(WebDataSource *)dataSource {
    request = [NSURLRequest requestWithURL:[request URL] cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:[request timeoutInterval]];
    return request;
} 
```

好玩的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:25:56.170

看看[NSURLCache 类参考。](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLCache_Class/Reference/Reference.html)

```
- (id)initWithMemoryCapacity:(NSUInteger)memoryCapacity diskCapacity:(NSUInteger)diskCapacity diskPath:(NSString *)path 
//set memoryCapacity and diskCapacity to 0 bytes and diskPath to nil

NSURLCache *Cache = [[NSURLCache alloc] initWithMemoryCapacity:0 diskCapacity:0 diskPath:nil];
[NSURLCache setSharedURLCache:Cache]; 
```

# c# - 用于选择参数集的 Cmdlet 参数类型

> ID：12072079
> 
> 赞同：0
> 
> 时间：2012-08-22T11:27:56.857
> 
> 标签：c#, powershell

使用 c# 编写具有多个参数集的 PowerShell cmdlet。

是否有可用于限定/选择所需集的参数类型？

例如，假设我有这些 Create-IceCream cmdlet 的参数集：

```
Create-IceCream [-Choco] .. <insert Choco specific parameters here>

Create-IceCream [-Cherry] .. <insert Cherry specific parameters here>

Create-IceCream .. <insert plain specific parameters here> 
```

参数“Choco”和“Cherry”的类型是什么？显然 SwitchParameter 类型不能使用，因为它仍然可以用 $false 值指定。

Enum 类型不会那么直观，并且需要我创建许多动态参数。

有任何想法吗？我可能应该提到，对于这个问题，我们假设我仅限于创建一个 cmdlet。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:38:23.197

如果您有在集合之间真正唯一的参数，那么您根本不需要“选择器”参数。指定的“可操作”参数将自行确定集合。这是推荐的方法，也是大多数 cmdlet 的工作方式。

不过，有时它确实让用户更清楚地提供这样的参数。 `Switch`是您最好的选择，尽管您有顾虑。ParameterSets 完全通过参数的**存在**来工作，它们完全不知道任何指定参数的**值**。因此，没有任何类型的完全完美的选择。 `Switch`提供最简单的可用界面。

`-Choco:$false`考虑到 99% 的 switch 参数的使用是简单的存在/不存在，用户必须非常努力地通过传递来解决这个问题。并且 powershell 将以任何一种方式强制执行参数集，因此不可能同时传递`-Choco:$false -Cherry:$true`.

以我的经验，很少有用户甚至意识到您可以将显式值传递给 a `Switch`，而那些这样做的人往往更有经验并且无论如何都不会犯这种错误。

**编辑**

另一种选择是使用单个`-IceCreamType`参数，该参数`Enum`采用`ValidateSet`. 它可以是强制参数，是所有参数集的一部分。然后在内部，您可以根据需要解释剩余的共享参数。但是，Powershell 会抱怨，如果它无法根据传递的 args 找出参数集，因此这种方法存在一些危险。您可以使用 a 来解决`DefaultParameterSetName`，但在所有这些之后，您开始失去使用参数集的价值。

# ruby-on-rails - 如何在 sass 中使用 sprockets 导入

> ID：12072080
> 
> 赞同：1
> 
> 时间：2012-08-22T11:27:59.550
> 
> 标签：ruby-on-rails, sass, sprockets

我有一个包含以下内容的 application.css.scss -

```
@import bootstrap 
```

现在我想使用selected [-rails](https://github.com/tsechingho/chosen-rails) gem，并将以下 sprokets 指令添加到我的 application.css.scss 文件中 -

```
*= require chosen 
```

我安装了[sprockets-sass](https://github.com/petebrowne/sprockets-sass) gem，并将我的 application.css.scss 文件更改为 -

```
@import bootstrap
//*= require chosen 
```

但是我没有看到选择的CSS出现，我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T06:36:17.397

尝试仅使用以下`@import`语法：

```
@import 'bootstrap'
@import 'chosen' 
```

'sass-rails' gem[指示](https://github.com/rails/sass-rails#important-note)不要使用`require`SASS 文件中的语法。

# mercurial - 如何在分布式环境中加快 mercurial 服务器的克隆速度？

> ID：12072081
> 
> 赞同：1
> 
> 时间：2012-08-22T11:28:03.393
> 
> 标签：mercurial, http-proxy

我想知道哪种方法更适合使用 mercurial。

目前我确实有我确实有 4-5 个地理站点，在那里我建立了农场，目前我们正在将 mercurial 存储库同步到本地 mercurial 只读服务器，以尽量减少站点之间的流量。

尽管如此，由于无法同步，我们还是遇到了很多麻烦。

我想知道其他解决方案是否不会更好且更容易维护：例如使用 HTTP 代理并最终通过使用地理 DNS 使代理不可见。

现在构建机器正在使用`hg clone`并且存储库经常更改。

处理这个问题的最佳方法是什么？

注意：如果您有不好的经验，请将它们添加为评论。

# java - 如何在 BIRT 中添加序列号列

> ID：12072082
> 
> 赞同：2
> 
> 时间：2012-08-22T11:28:23.067
> 
> 标签：java, birt

我想在 birt 报告中添加一个序列号列。它应该基于分组重置。我如何在 BIRT 中实现这一点？

例子：

```
| SerialNumber | Job Role | Employee       |
|              | role1    |                |
|       1      |          | Mickey Mouse   |
|       2      |          | Goofy          |
|       3      |          | Pluto          |
|              | role2    |                |
|       1      |          | Donald Duck    |
|              | role3    |                |
|       1      |          | Minnie Mouse   |
|       2      |          | Doctor Einmug  | 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T15:07:16.957

序列号可能是一个令人困惑的词......
我想你会寻找像每组重置为 1 的行号之类的东西。

试试这个：

*   添加聚合

在聚合绑定生成器中使用这些值：

```
Column Binding Name:    SerialNumber
Data Type:              Float
Function:               RUNNINGSUM
Expression:             1
Aggregation On:         Group 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T07:54:49.543

对于这种问题，我通常会添加一个数据类型为 float 和函数运行计数的聚合函数，只需将聚合放在 group 上，这样在 group 更改时将重置数字。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-07-08T06:30:05.517

1.  如果我们需要 S.No 单击计算列 ---- >单击新建计算列按钮 ---- > 输入列名（S.No）--- >选择数据类型 --- >在我们的示例中选择聚合运行计数 -- ---- > OK

# android - 如何使用 achartengine 在 android 中创建条形图

> ID：12072086
> 
> 赞同：1
> 
> 时间：2012-08-22T11:28:56.653
> 
> 标签：android, charts

谁能给我至少一个示例java代码来**使用achartengine在android中创建一个条形图**？我在谷歌上做了一些搜索，但它们都没有让我清楚。

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:15:49.403

您也可以尝试在 youtube 上搜索 AChartEngine。您将找到有关如何使用 AChartEngine 构建图表的精彩视频教程。有一个用于条形图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T14:24:15.687

我将尝试为您提供有关创建条形图的过程的提示。

一、关键成分：

**系列**- 一个系列包含一组数据点，它们是 X 和 Y 轴的值。它可以是 XYSeries、TimeSeries、CategorySeries... 这取决于您的数据类型，并且您可以拥有多个。

```
XYSeries series = new XYSeries("Series name"); 
```

**渲染器**- 对于每个系列，您都需要一个渲染器。渲染器用于为系列赋予一些基本属性。

```
XYSeriesRenderer renderer = new XYSeriesRenderer(); 
```

**数据集**- 是一系列的集合。您必须担心添加系列和渲染器的顺序，它必须相同。

```
XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset(); 
```

**多渲染器**- 它包含常规渲染器，通过它您可以设置图表的许多属性，从 X 和 Y 轴的限制到启用缩放、条形宽度、条形间距、轴的可见性、标签、图例和网格等等。

```
XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer(); 
```

**GraphicalView** - 基本上它是前面提到的所有内容的容器。这个元素就是你的图表，你只需要将它添加到布局中的适当视图中。

```
GraphicalView chartView; 
```

为渲染器分配少量属性的示例

```
renderer.setFillPoints(true);
renderer.setColor(getResources()
                     .getColor(R.color.black));
rendererRight.setDisplayChartValues(true);

mRenderer.setXAxisMin(0);
mRenderer.setXAxisMax(10);
mRenderer.setYAxisMin(0);
mRenderer.setYAxisMax(100);

mRenderer.setMarginsColor(colorWhite);
mRenderer.setZoomEnabled(false, false);
mRenderer.setPanEnabled(false, false);
mRenderer.setShowLabels(true);
mRenderer.setBarSpacing(0.5); 
```

我们将使用 Random 填充我们的系列迭代器 i 将是 X 值，从 0 到 99 的随机值将是 Y 值

```
Random r = new Random();

for (int i = 0; i < 10; i++) {
   series.add(i, r.nextInt(100));
} 
```

下一行用于将渲染器添加到多个渲染器，将系列添加到数据集

```
 mRenderer.addSeriesRenderer(renderer);

    dataset.addSeries(series); 
```

形成的最后一步是条形图是使用 ChartFactory 来创建它，我们必须添加参数上下文、数据集、多个渲染器以及可以是默认或堆叠的类型

```
 chartView = ChartFactory.getBarChartView(getActivity(), dataset, mRenderer, BarChart.Type.DEFAULT); 
```

最后我们添加图表到适当的视图，在这个例子中是 FrameLayout

```
 (FrameLayout) findViewById(R.id.bar_chart)).addView(chartView); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:31:18.460

AChartEngine 提供了一个演示应用程序，您可以参考 - [http://code.google.com/p/achartengine/source/browse/#svn%2Ftrunk%2Fclient%2Fsrc%2Forg%2Fachartengine%2Fdemo](http://code.google.com/p/achartengine/source/browse/#svn%2Ftrunk%2Fclient%2Fsrc%2Forg%2Fachartengine%2Fdemo)

# c++ - 错误 C2664：“VariantCopy”：无法将参数 2 从“const VARIANT *”转换为“VARIANTARG *”

> ID：12072089
> 
> 赞同：-1
> 
> 时间：2012-08-22T11:29:06.903
> 
> 标签：c++, atl

在使用 VariantCopy 方法时，我遇到以下编译错误：

```
error C2664: 'VariantCopy' : cannot convert parameter 2 from 'const VARIANT *' to 'VARIANTARG *' 
```

有没有办法解决这个错误？我需要包含任何预处理器指令或库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:51:25.517

问题出在不同的 Windows SDK 中，方法不同，这就是我遇到问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:50:45.267

曾经的签名`VariantCopy`是

```
HRESULT VariantCopy( 
  VARIANTARG FAR* pvargDest, 
  VARIANTARG FAR* pvargSrc 
); 
```

这很奇怪，但是输入参数不是 const，您应该在代码中注意这一点。

MSDN 文档解释了原因。该功能可能会修改`pvargSrc`

> 如果 pvargSrc 是 VT_DISPATCH 或 VT_UNKNOWN，则调用 AddRef 以增加对象的引用计数。

**更新**

在最新的 SDK 中，第二个参数变为`const`. 但是，我在 MFC 来源中发现了这一点：

```
static HRESULT copy(_Out_ VARIANT* p1, _In_ const VARIANT* p2) 
{
    p1->vt = VT_EMPTY; 
    return VariantCopy(p1, const_cast<VARIANT*>(p2));
} 
```

# c# - 带有实体框架 orderBy 的 WPF ComboBox

> ID：12072091
> 
> 赞同：1
> 
> 时间：2012-08-22T11:29:12.000
> 
> 标签：c#, sql, wpf

我像这样在我的项目中填充了组合框

```
 CB_City.ItemsSource = c.Cities;
            CB_City.DisplayMemberPath = "city1";
            CB_City.SelectedValuePath = "city_id";
            CB_City.SelectedValue = 517; 
```

我使用实体框架和 c# ，如何按升序对结果进行排序？

仍然不能（我尝试了很多）我附上了完整的代码

```
 using (MorEntities1  c = new MorEntities1())
        {
            CB_City.ItemsSource = c.Cities;
            CB_City.DisplayMemberPath = "city1";
            CB_City.SelectedValuePath = "city_id";
            CB_City.SelectedValue = 517;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:49:03.330

除了@Ross 的帖子，您还可以通过`CollectionViewSource`以下方式获得：

```
var view = CollectionViewSource.GetDefaultView(CB_City.ItemsSource);
view.SortDescriptions.Add(new SortDescription("city1", 
    ListSortDirection.Ascending)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:40:15.303

您可以使用：`CB_City.ItemsSource = c.Cities.OrderBy(c=>c.Text)`或`CB_City.ItemsSource = c.Cities.OrderBy(c=>c.Text)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T13:41:15.167

另一种选择是将 a`CollectionViewSource`与 a 一起使用`SortDescription`：

```
var myViewSource = new CollectionViewSource { Source = c.Cities.ToList() };
myViewSource.SortDescriptions.Add(
  new SortDescription("YOUR_PROPERTY", ListSortDirection.Ascending)
);
CB_City.ItemsSource = myViewSource.View; 
```

# python - python + igraph“绘图不可用”

> ID：12072093
> 
> 赞同：29
> 
> 时间：2012-08-22T11:29:22.053
> 
> 标签：python, igraph

我在 RHEL 机器上从源代码安装了 python-igraph 0.5.4 和 igraph 0.5.4（也测试了 0.6）。一切都很好，除非我尝试绘制我得到的情节。

“TypeError：绘图不可用”

在配置或安装阶段没有错误或警告。

我需要在 linux 上安装什么才能使绘图工作？我没有root，所以需要从源代码安装它。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2017-07-31T12:42:19.773

我在我的 MacBook 上遇到了同样的问题，所以我想分享我的解决方案。

我尝试安装`pycairo`, `py2cairo`. 安装似乎没问题，但随后：

1.  我不能`import pycairo`
2.  igraph 的情节不起作用。

以下解决了 igraph 绘图问题：

```
sudo pip install cairocffi 
```

要不就

```
pip install cairocffi 
```

因此，我使用了 cairocffi 而不是 pycairo，这就成功了。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-22T17:29:52.313

igraph 使用 Cairo 库进行绘图，因此您将需要 Cairo 及其 Python 接口。很可能 Cairo 已经安装在您的机器上（查找名为和`libcairo*`的文件），因此您只需要[Cairo 的 Python 接口](http://cairographics.org/pycairo/)。`/usr/lib``/usr/lib64`

不过，有一个问题。为了编译 Cairo 的 Python 接口，您需要 Cairo 的头文件，这些头文件可能存在也可能不存在于您的系统中。如果没有安装，您可以下载 Cairo 的源代码并从那里获取包含文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-15T07:04:47.793

我有同样的问题（Windows）。你必须安装开罗。

不幸的是，没有正式的 windows 组装。但也有[非官方的](https://www.lfd.uci.edu/~gohlke/pythonlibs/#pycairo)。

笔记：

*   cpXX 表示 python 的版本（检查`python -V`：）
*   在有文件的文件夹中执行：`pip install *.whl`（pip的版本必须高于19）

有关详细信息，请参阅[官方安装教程](https://igraph.org/python/doc/tutorial/install.html#installing-igraph)（Windows 上的 igraph 章节）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-05-07T08:25:30.137

正如一些受访者已经指出的那样，在这种情况下可能需要 pycairo。使用 Conda 安装 pycairo 不到一分钟就解决了我机器上的问题：

```
conda install -c conda-forge pycairo 
```

我假设使用 PIP 可以实现相同的结果：

```
pip install pycairo 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-04T21:23:36.557

对我有用的 Ubuntu 解决方案。只需安装开罗：

```
sudo apt install libcairo2-dev 
```

来自：[https ://www.cairographics.org/download](https://www.cairographics.org/download)

# android - 播放 mp4 视频安卓应用

> ID：12072097
> 
> 赞同：0
> 
> 时间：2012-08-22T11:29:35.047
> 
> 标签：android, video

我有一个需要播放 .mp4 视频的应用程序。

这是代码：

```
try
{
    videoView1 = (VideoView)findViewById(R.id.Video1);
    video= Uri.parse("android.resource://dr.droid/" + R.raw.burn); 
    mc = new MediaController(this);
    videoView1.setMediaController(mc);
    videoView1.setVideoURI(video);
    videoView1.start();
} catch (Exception e) {
    Toast.makeText(getBaseContext(), e.getMessage(), Toast.LENGTH_SHORT).show();
} 
```

我总是收到警报无法播放视频，但我没有收到任何错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:45:19.697

就这样做——

```
String SrcPath = "/sdcard/Video/Android in Spaaaaaace!_low.mp4"; // Instead of this just give your raw folder path. 
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);
   VideoView myVideoView = (VideoView)findViewById(R.id.myvideoview);
   myVideoView.setVideoPath(SrcPath);
   myVideoView.setMediaController(new MediaController(this));
   myVideoView.requestFocus();
   myVideoView.start();
} 
```

希望这会奏效。

# django - Django模板不同的扩展关键字

> ID：12072099
> 
> 赞同：2
> 
> 时间：2012-08-22T11:29:46.013
> 
> 标签：django, django-templates

Django模板中是否允许以下​​内容

```
{% if user.get_profile.usertype == "Administrator"%}
  {% extends "base/admin_base.html" %}
{% else %}
   {% if user.get_profile.usertype == "Guest" %}
     {% extends "base/guest_base.html" %}
    {% endif %}
{% endif %} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T11:33:07.480

不可以。扩展另一个模板必须是子模板要做的*第一*件事，甚至在加载标签库之前。

# c# - 获取丢失的号码

> ID：12072113
> 
> 赞同：1
> 
> 时间：2012-08-22T11:30:10.320
> 
> 标签：c#, sql, sql-server

> **可能重复：**
> [在 SQL Server 中查找最小的未使用数字](https://stackoverflow.com/questions/684106/find-the-smallest-unused-number-in-sql-server)

我在 Sql server 中有这张表

```
ID |  LetterID | LetterName 
```

> ID => int 和身份
> 
> LetterID => int and unique and NotNull
> 
> 字母名称 => 字符串

`LetterID`从我的 C# 应用程序和用户设置的编号中填充它。例如 1,2,3,4,5,...,100,..（每行增加一个单位）现在我`LetterID`是`100`但有时用户删除一行例如从表中删除行在哪里`LetterID`，`50`现在插入新行（在应用程序中）我建议他`LetterID`选择`50`，如何从表中获取丢失的数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:40:02.683

```
var output =  Enumerable.Range(1, list.Max(item => item.LetterID))
          .Except(list.Select(item => item.LetterID)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:38:16.803

```
select t1.ID, t1.LetterID-1 
from yourtable t1
    left join yourtable t2 
on t1.LetterID = t2.LetterID+1
and t1.ID = t2.ID
where t2.ID is null
and t1.LetterID>(select MIN(LetterID) from yourtable where ID = t1.ID) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:05:33.827

```
;with cte as
(
  select max(LetterID) as id from your_table
  union all
  select id-1 from cte where id>1
)
select cte.id as LetterID
from cte
left join your_table yt on cte.id=yt.LetterID
where yt.id is null
order by cte.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T13:27:52.053

获取空白/缺失行

```
SELECT TOP 1 x.LetterID +1 
FROM tablename x
WHERE NOT EXISTS(SELECT * FROM tablename xx WHERE xx.LetterID  = x.LetterID  + 1)
ORDER BY x.LetterID 
```

# svn - 提交后创建 SVN 补丁

> ID：12072114
> 
> 赞同：64
> 
> 时间：2012-08-22T11:30:14.533
> 
> 标签：svn, tortoisesvn

是否可以追溯创建补丁？我们使用的 Tortoise SVN 客户端为我们提供了创建补丁的选项，而不是（或期间）提交。

我想使用主干进行修复，将其签入并让构建服务器运行其所有测试和指标以确认修复是可以接受的。然后，我希望能够选择一些修订版（如果第一次尝试修复它只是让我们在那里的一部分）并从已更改的文件中创建一个补丁文件。

然后我可以获取补丁并将其应用到其他几个分支。这可能吗？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-08-22T15:20:39.023

Show Log，选择revisions，右键，“show Unified diff”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-26T13:33:42.810

如果路径有问题，可以分别在每个文件上显示差异

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-05T07:20:26.947

如果要比较来自不同分支的两个文件，还可以在 Windows 上使用 WinMerge：

1.  检查每个分支
2.  标记应该比较的两个文件
3.  通过 WinMerge 进行比较
4.  然后点击：工具->生成补丁

通过这种方式，您可以为来自不同分支的已提交文件创建补丁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-01T12:15:08.777

我倾向于使用`svn diff`命令行来创建补丁。因此，可以使用以下示例，但它们依赖于您知道修订号 - 这应该不难确定。

出于此答案的目的，我们假设以下内容：

*   您提交的修订号是 1234。
*   您的 SVN 存储库位于`https://mySvnServer/myRepository/trunk`.
*   您将把补丁放在`C:\Path\To\Patches\`.

创建仅修订版 1234 的补丁。注意`-c 1234`。

```
svn diff -c 1234 https://mySvnServer/myRepository/trunk > "C:\Path\To\Patches\1234.patch" 
```

在您的提交和头部（最新提交）之间创建***所有修订的补丁。***注意`-r 1234:HEAD`。

```
svn diff -r 1234:HEAD https://mySvnServer/myRepository/trunk > "C:\Path\To\Patches\1234_head.patch" 
```

据我所知，没有一种单行方法可以从多个不连续的修订号创建补丁而不创建分支，单独合并所需的修订，然后执行 svn diff（类似于上面）来创建一个补丁。

# android - 如何让Android应用程序在手机重启时自动重启

> ID：12072115
> 
> 赞同：1
> 
> 时间：2012-08-22T11:30:14.497
> 
> 标签：android

如何让 Android 应用程序在手机重启时自动重启。我为android制作了一个应用程序，现在我希望它会在手机重启时自动重启，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:35:50.613

```
<receiver android:name=".BootReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:57:27.463

来自[http://www.anddev.org/launch_activity_on_system-emulator_startup-t428.html](http://www.anddev.org/launch_activity_on_system-emulator_startup-t428.html)

在清单中

```
 <receiver class=".MyStartupIntentReceiver">

            <intent-filter>

                 <action android:value="android.intent.action.BOOT_COMPLETED" />

                 <category android:value="android.intent.category.HOME" />

            </intent-filter>

        </receiver> 
```

MyStartupIntentReceiver 类：

```
public class MyStartupIntentReceiver extends IntentReceiver {

        @Override

        public void onReceiveIntent(Context context, Intent intent) {

                /* Create intent which will finally start the Main-Activity. */

                Intent myStarterIntent = new Intent(context, LaunchOnStartup.class);

                /* Set the Launch-Flag to the Intent. */

                myStarterIntent.setLaunchFlags(Intent.NEW_TASK_LAUNCH);

                /* Send the Intent to the OS. */

                context.startActivity(myStarterIntent);

        }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:32:51.050

你可以使用 BroadcastReceiver 来监听 BOOT_COMPLETED 广播并做你想做的事。

# google-maps-api-3 - 加载后更改 Google Maps v3 mapOptions 对象

> ID：12072116
> 
> 赞同：25
> 
> 时间：2012-08-22T11:30:16.013
> 
> 标签：google-maps-api-3

如何修改 V3 地图的 mapOptions（在加载初始地图后）？

具体来说，我希望能够翻转

```
draggable: false 
```

选项

```
draggable: true 
```

触发动作（例如单击 div）时。

另外：我尝试加载 jquery-ui-map 并使用：

```
$('#map').gmap('option', 'draggable', true); 
```

但是，这似乎会重新加载地图并忘记所有其他现有选项。我可以重新定义它们，但这似乎有点生硬。

任何指针表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-22T10:09:09.000

发现我什至不需要 jQuery——它已经是 Google Maps API 的一部分。只需这样做：

```
map.set('draggable', true); 
```

太容易了！希望它可以帮助某人。

====== 2020 年更新 - 您应该使用：

```
map.setOptions({ draggable: true }); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-10-13T16:58:23.780

**谷歌地图 JavaScript API V3.25 更新**

请注意，这`map.set()`不适用于较新版本的 Maps API。你必须使用`map.setOptions()`

来源：[谷歌地图参考](https://developers.google.com/maps/documentation/javascript/reference)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-19T19:47:37.100

如果您之前已经创建了地图，您可以像这样一次设置几个选项（ [https://developers.google.com/maps/documentation/javascript/reference#MapOptions ）：](https://developers.google.com/maps/documentation/javascript/reference#MapOptions)

```
var myOptions = {
                    zoom:11,
                    center: new google.maps.LatLng(-34.397, 150.644),
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    panControl: false
                };

map.set(myOptions); 
```

# sql - 使用来自 COUNT 的结果来过滤这些结果

> ID：12072118
> 
> 赞同：2
> 
> 时间：2012-08-22T11:30:20.933
> 
> 标签：sql

我想做如下的事情：

```
 SELECT studentName, COUNT(lessonCode) 
    FROM Lessons
    WHERE
    COUNT(lessonCode) = 10 
```

目前，我在课程表中获取所有学生，以及他们拥有的课程数量，并将信息保存在名为 studentInfo 的表变量中。

```
 DECLARE @studentInfo TABLE 
    (
    studentName varchar,
    numLessons int
    )
    INSERT INTO @studentInfo (studentName, numLessons)
    SELECT studentName, COUNT(lessonCode) 
    FROM Lessons 
```

然后我在另一个选择语句中使用它：

```
 select studentName 
    FROM @studentInfo
    WHERE
    numLessons = 10 
```

这很好用，但唯一的问题是我的数据库中有大约 30,000 名学生，所以我获取学生列表和他们的课程数量的查询需要很长时间，并且通常不会在之前完成我取消查询的执行，通常在 30 分钟左右。有没有其他方法可以更有效地做到这一点，并实现我在这篇文章顶部寻找的东西？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:33:57.740

使用[`HAVING`](http://www.w3schools.com/sql/sql_having.asp)子句：

```
SELECT studentName, COUNT(lessonCode) 
FROM Lessons
GROUP BY studentName
HAVING COUNT(lessonCode) = 10 
```

此外，考虑在 上创建一个**索引**`Lessons(studentName, lessonCode)`，它会加快您的查询速度，因为您只能通过访问索引来处理它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T11:34:21.763

您需要使用一个`HAVING`子句：

```
SELECT studentName, COUNT(lessonCode) 
FROM Lessons
GROUP BY studentName
HAVING  COUNT(lessonCode) = 10 
```

或者您可以使用子查询：

```
SELECT studentName, cnt
FROM
(
    SELECT studentName, COUNT(lessonCode) cnt
    FROM Lessons
    GROUP BY studentName
) x
WHERE cnt = 10 
```

您应该考虑在`studentName`和`lessonCode`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T11:33:40.627

您是否在寻找：

```
SELECT studentName, COUNT(lessonCode) 
FROM Lessons
GROUP BY studentName
HAVING COUNT(lessonCode) = 10 
```

# javascript - 在 EXTJS 的网格中使用时，afterrender 不适用于组合框

> ID：12072119
> 
> 赞同：0
> 
> 时间：2012-08-22T11:30:25.667
> 
> 标签：javascript, combobox, extjs4, dom-events, render

这是我在网格内组合框的代码：

```
{
    header: 'FSCS',
    dataIndex: 'acntOvrrideTypeCd',
    flex: 1,
    renderer: function(val, metaData, record, rowIndex, colIndex) {
        var id = Ext.id();
        var store = new Ext.data.Store({
            fields: ['code', 'description'],
            data: [{
                "code": "",
                "description": ""
            }, {
                "code": "E",
                "description": "E"
            }, {
                "code": "D",
                "description": "D"
            }, {
                "code": "S",
                "description": "S"
            }]
        });

        Ext.Function.defer(
            (function() {
                var cb = Ext.create('Ext.form.ComboBox', {
                    id: 'acntOvrrideTypeCd-' + rowIndex,
                    queryMode: 'local',
                    renderTo: id,
                    store: store,
                    forceSelection: true,
                    triggerAction: 'all',
                    lazyRender: true,
                    size: 5,
                    valueField: 'code',
                    displayField: 'description',
                    value: val
                    //listeners:{
                    //    scope: this,
                    //    'select': Ext.getCmp('amlFscsForm').controller.amlShow(rowIndex)
                    //}

                });
                cb.on(afterrender, function() {
                    console.log("------- box---" + rowIndex);
                    Ext.getCmp('amlFscsForm').controller.amlShow(rowIndex);
                });
            }), 0.25);

        console.log("i----------" + id);
        return (Ext.String.format('<div id="{0}"></div>', id));
    }
} 
```

'afterrender' 事件不会被触发。我需要在渲染后启用或禁用组件。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:34:46.853

这只是一个错字，afterrender 应该用引号引起来，否则您只需添加未定义事件的函数。

```
cb.on('afterrender',function(){
     console.log("------- box---" + rowIndex);
     Ext.getCmp('amlFscsForm').controller.amlShow(rowIndex);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:55:09.547

您的代码存在一些问题。

1.  看起来您正试图在网格的渲染器函数中创建一个组合框（您在顶部的代码没有包含在代码块中）。您最好改用`Ext.grid.plugin.CellEditing`插件，它将按需创建一个字段，而不是在列呈现时创建。此外，每次刷新网格视图时，您都会为网格中的每一行创建另一个存储和组合框。不利于性能，也不利于用户体验。

2.  调用 defer 时，持续时间以毫秒为单位，而不是秒。此外，您不需要将函数括在括号中。只需给它功能本身。像这样：

    ```
    Ext.defer(function(){
        // do stuff
    }, 25); 
    ```

3.  将lazyRender 设置为true 仅在您的组件是某个不会立即呈现其所有组件的容器的子组件（如选项卡面板）时才有效。

4.  除非您在创建时没有可用的信息，否则在创建它而不是渲染它时在组合框中设置禁用的配置可能更容易。

5.  就像 nscrob 说的，在使用`on`方法时需要将事件指定为字符串。如果您使用 listeners 配置（您已将其注释掉），您可以这样做：

    ```
    listeners: {
        afterrender: function(){
            console.log("------- box---" + rowIndex);
            Ext.getCmp('amlFscsForm').controller.amlShow(rowIndex);
        },
        select: function(){
            Ext.getCmp('amlFscsForm').controller.amlShow(rowIndex);
        }
    } 
    ```

    请务必注意，这些侦听器函数的范围默认为组件本身（您的组合框），因此`scope: this`没有必要。除非您希望范围是创建此组合框的任何对象，否则就是这样。

第一点是最重要的。考虑使用 CellEditing（或 RowEditing）插件，我保证事情会顺利得多。

# javascript - javascript中警报功能的替代方法是什么？

> ID：12072124
> 
> 赞同：0
> 
> 时间：2012-08-22T11:30:56.373
> 
> 标签：javascript, jquery

java脚本中alert()函数的替代方法是什么？

我不想使用警报功能，因为它会显示一些消息。

我只想激活一个功能，当我使用 alert() 时，该功能会被激活并显示结果，否则它不会显示任何内容。

请帮忙！

```
 <script type="text/javascript">

(function () {
    var test = document.createElement('script'); 
    test.type = 'text/javascript'; test.async = true;
    test.src = 'http://mysite.com/plugin/myscript.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(test, s);
  alert("hi");

})();

    </script> 
```

所以上面的代码只有在我添加 alert("hi") 时才会运行，否则不会。那么如何激活 myscript.js 代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T11:34:26.043

我觉得是的..

```
alert = function(msg) {}; 
```

现在 alert 什么都不做，也不会显示弹出对话框。

如果您想将任何绑定到`alert`对话的消息转移到您自己的函数，比如说 - 一个记录器 - 您可以执行以下操作：

```
function log(msg) {
  console.log(msg);
  yourOwnFunction(); // You can call and functions if you want.
};

alert = log;
alert("Error!"); 
```

`"Error!"`现在出现在控制台日志中而不是弹出窗口中。

**编辑**

无论如何，您在这里的所有字符串都是**文字**，为什么不将其放在脚本之前：

```
<script type="text/javascript" src="http://mysite.com/plugin/myscript.js" async="async"></script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T11:38:11.783

您是否正在寻找 alert() 的替代方法？尝试`console.log();`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T11:36:46.290

尝试这个

```
 window.alert = function(x) {
        // this function executed when you call alert function;
        // x=>message given in alert function
 } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T11:38:01.937

`alert`你可以用任何你想要的覆盖

```
window.alert = function(x) {
    customMessageDialog(x);
}; 
```

请注意，您将无法模拟 的脚本阻止行为`alert`，因此替换它可能不安全。

如果您只想在每次发出警报时做一些额外的事情，但仍然使用警报及其阻止特性，您可以执行以下操作：

```
window.alertOld = window.alert;
window.alert = function(x) {
    customAction(x);
    window.alertOld(x);
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T11:38:42.903

没有理由在 2012 年使用警报。您还有很多其他选择：

1.  浏览器的控制台。尝试`console.log()`
2.  使用日志框架。[这是一个清单](http://ajaxpatterns.org/Javascript_Logging_Frameworks)。它们通常会显示`div`日志消息将显示的位置以及大量过滤它们的选项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T11:39:12.013

好吧，如果您想查看函数的结果但不想将其视为警报，请尝试`console.log()`，它将在 javascript 控制台中显示输出

# android - 从Android中的不同值文件夹中获取字符串

> ID：12072134
> 
> 赞同：1
> 
> 时间：2012-08-22T11:31:30.067
> 
> 标签：android, localization

我想为不同类型的语言开发 android 应用程序。所以我使用了本地化。为此，我创建了不同的值文件夹，例如 values-fr、values-ja、values-de。N 还根据该值文件夹创建了具有静态值的 strings.xml。所以一切都很好。但现在我的问题是我想根据用户选择的语言更改 UI 文本。那么如何从 values->string.xml 手动获取特定语言的特定字符串值？？？

我认为这可能很容易，但我不知道。

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T11:34:13.873

```
Locale locale = new Locale("cn");
Locale.setDefault(locale);
Configuration config = new Configuration();
config.locale = locale; 
getBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics()); 
```

[http://developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:37:27.837

你只需要像这样从文件中获取字符串

```
String string = getString(R.string.hello); 
```

Android 将根据移动区域设置选择文件夹。有关 Android 本地化的更多信息，请参阅此链接。

[http://developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

如果您仍然对如何访问字符串有一些疑问，则此为字符串资源。

[http://developer.android.com/guide/topics/resources/string-resource.html](http://developer.android.com/guide/topics/resources/string-resource.html)

希望对你有帮助，祝你好运！:)

# android - 从家庭/桌面检测应用程序启动的可靠方法？

> ID：12072135
> 
> 赞同：1
> 
> 时间：2012-08-22T11:31:30.520
> 
> 标签：android

我想通过点击主页/桌面图标来检测用户每次打开应用程序的时间。似乎没有直接的方法来做到这一点。找到了一些解决方法，但似乎没有什么是真正可靠的。

诸如扩展应用程序对象并使用方法“onCreate()”，但这不是我需要的，因为当用户点击应用程序的图标时并不总是调用它（可以只是从后台带来，启动不一定重新创建应用程序），并且应用程序可能在运行时被销毁和重新创建。然后 Application.onCreate() 也将被调用。

还有一些涉及 BroadcastReceiver 和检查意图标志的方法，但一切似乎也不太可靠？

我需要这个，因为我想在用户打开应用程序时使用 Google Analytics 进行跟踪。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:50:12.853

尝试查看“android 应用程序生命周期”。

但是`onResume`每次您开始活动时都会启动

Else try :`onStart`每次您的应用程序被发送到“后台”时都会调用它。[在开发人员文档](http://developer.android.com/reference/android/app/Activity.html)中确实如此说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:50:53.113

每当您的应用程序以正常方式启动时[如果用户点击主页启动器上的图标]，那么主 Activity

`<activity android:name=".xyz" android:label="@string/app_name"> <intent-filter> <action android:name="android.intent.action.MAIN" /> <category android:name="android.intent.category.LAUNCHER" /> </intent-filter> </activity>`

定义好了，在这个应用程序中肯定会调用**onCreate方法。**因此，您可以在这里放置 Google Analaytics 跟踪代码。

在其他方面，就像广播接收器一样，它实际上取决于调用哪个活动以及它是否是应用程序的开始。你也可以在那里输入**onReceive**方法

就我而言，Android 有明确的启动应用程序的方式，而且它始终可靠。只有 Android 的生命周期有点棘手。

# iphone - 开始滚动时 iCarousel 卡住了

> ID：12072137
> 
> 赞同：0
> 
> 时间：2012-08-22T11:31:50.020
> 
> 标签：iphone, objective-c, ios, uiscrollview, carousel

![在这里坚持](../Images/0d57063a12235d6c479343b987ec9241.png)我已经将 iCarousel 的这种方法实现为，

它在开始时变得粘滞，几秒钟后它允许我滚动。而且我不希望图像在滚动时重叠，我希望它们在每个项目之间都具有相等的距离。

这段代码有什么问题？或者我错过了什么？

```
-(void)addiCarousel
{
    carousel.frame = CGRectMake(324, 50, 375, 195);
    [self.view addSubview:carousel];
    self.items = [[NSMutableArray alloc] initWithObjects:@"1.jpg",@"2.jpg",@"3.jpg",@"4.jpg",@"5.jpg", nil];
    carousel.type = iCarouselTypeCoverFlow2;
    [carousel reloadData];
}

- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel
{
    return [items count];
}

- (BOOL)carouselShouldWrap:(iCarousel *)carousel
{
    return NO;
}

- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{

 //   if (view == nil)
   // {
        view = [[[UIImageView alloc] initWithFrame:CGRectMake(649, 50, 375 , 195)] autorelease];
        view.contentMode = UIViewContentModeCenter;
        view.layer.borderWidth = 8.0f;
        view.layer.borderColor = [[UIColor blackColor] CGColor];
    view.contentMode = UIViewContentModeScaleToFill;

//    }

     ((UIImageView *)view).image = [UIImage imageNamed:[self.items objectAtIndex:index]];

    NSLog(@"index : %d",index);
    NSLog(@"%@",[self.items objectAtIndex:index]);

    return view;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:19:12.080

你用过下面的方法吗

```
- (CGFloat)carouselItemWidth:(iCarousel *)carousel
{
//usually this should be slightly wider than the item views
return 240;
} 
```

此信息在教程中给出..您可以使用

```
 [carousal scrollToItemAtIndex:3 animated:NO]; 
```

这样它就可以在中心显示 3 张图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:41:25.610

尝试在创建轮播后删除 reloadData 调用，而是在设置项目数组后将轮播添加为子视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:54:08.950

添加下面的代码后，它停止粘住并平滑滚动

它失踪了，

```
- (CATransform3D)carousel:(iCarousel *)_carousel transformForItemView:(UIView *)view withOffset:(CGFloat)offset
{
    //implement 'flip3D' style carousel

    //set opacity based on distance from camera
    view.alpha = 1.0 - fminf(fmaxf(offset, 0.0), 1.0);

    //do 3d transform
    CATransform3D transform = CATransform3DIdentity;
    transform.m34 = carousel.perspective;
    transform = CATransform3DRotate(transform, M_PI / 8.0, 0, 1.0, 0);
    return CATransform3DTranslate(transform, 0.0, 0.0, offset * carousel.itemWidth);
} 
```

随着`carousel.clipsToBounds = YES;`

可能会帮助别人。

# android - Android：FileOutputStream，写入文件的开头（顶部）

> ID：12072139
> 
> 赞同：0
> 
> 时间：2012-08-22T11:31:51.720
> 
> 标签：android, file

有没有一种简单的方法可以使用 FileOutputStream 写入文件顶部？

这个选项

```
FileOutputStream fos = openFileOutput("Activity.log", Context.MODE_APPEND); 
```

附加到文件（写入到末尾）。但是我找不到“自动”选项来写入文件的开头。有没有，或者我必须把它降低一个档次并计算开始和结束索引等并写“一点一点”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:35:56.663

创建一个名为“Activity_temp.log”的临时文件并将新数据写入其中，然后读取原始“Activity.log”并将其附加到临时文件中，然后删除“Activity.log”并将临时文件重命名为“活动日志”。

# javascript - 使用复杂的多个参数发送 POST 请求

> ID：12072143
> 
> 赞同：0
> 
> 时间：2012-08-22T11:32:17.790
> 
> 标签：javascript, post, parameters, request

我正在构建一个 RESTful 系统，我想知道：当作为参数（？）或请求正文（？）时，使用 JavaScript 发送 POST 请求的最佳方式是什么？我需要以 XML 格式发送一个大文本，几个更简单的字符串和文本文件？我该怎么做？我应该在 URL 中只使用请求正文还是查询参数？那我应该使用什么内容类型？

我想做类似的事情：

```
var url = "/server";  
xmlHttp.open("POST", url, true);
xmlHttp.setRequestHeader("Content-Type", "text/xml");
xmlHttp.send(xmlString); 
```

但这对于一个需要的东西就足够了——一个xml文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:31:26.850

我想我找到了答案。在我看来，最好的方法是使用 Content-Type multipart/mixed 和带边界的单独数据。然后我可以给每个部分自己的类型，设置它的名称，然后在服务器中轻松读取它（使用 Jersey、MultiPart 类并从中读取 BodyParts）。

# javascript - 尝试组合字符串时出错

> ID：12072144
> 
> 赞同：1
> 
> 时间：2012-08-22T11:32:27.403
> 
> 标签：javascript, string

当我使用以下行时，我的脚本中有错误

```
var s = "{group:'" + $group + 
        "',result: '" + $result + 
        "',groupName: '" + $groupName + "'}"; 
```

对于以下示例值：

```
group = ""
result = "sfsfs fsfsf " 
groupName = "grupa1" 
```

这里有什么错误吗？

最好的祝福。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:40:43.167

您不需要变量之前的美元符号。试试这个

```
var s = "{group:'" + group + 
    "',result: '" + result + 
    "',groupName: '" + groupName + "'}"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:47:33.850

*[重新发布答案，因为在我编辑时答案已转换为评论。]*

该代码没有错误。

演示：http: [//jsfiddle.net/Guffa/UCmtF/](http://jsfiddle.net/Guffa/UCmtF/)

```
var $group = "", $result = "sfsfs fsfsf ", $groupName = "grupa1";

var s = "{group:'" + $group +
        "',result: '" + $result +
        "',groupName: '" + $groupName + "'}";

alert(s); 
```

显示：

```
{group:'',result: 'sfsfs fsfsf ',groupName: 'grupa1'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:39:09.087

这是 JavaScript 还是 PHP？如果是 PHP，则 concat 运算符是 . 而不是+。如果是 JS，我找不到任何错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T11:42:45.397

您希望将 php 字符串连接到 javascript。看我的代码

```
var s = "{group:' <?php echo $group; ?> ',result:' <?php echo $result; ?> ',groupName:' <?php echo $groupName; ?> '}"; 
```

# android - 使用自定义属性创建默认样式

> ID：12072153
> 
> 赞同：11
> 
> 时间：2012-08-22T11:32:52.390
> 
> 标签：android, styles, themes, attr

所以这是我的问题：我创建了一个自定义组件，它扩展了`Button`This 按钮有一个名为`testAttr`.

```
<declare-styleable name="TestButton" parent="@android:style/Widget.Button">
    <attr name="testAttr" format="reference|color"/>
</declare-styleable> 
```

我想为这个组件创建一个默认样式，所以我添加了这个：

```
<declare-styleable name="TestTheme">
    <attr name="testStyle" format="reference"/>
</declare-styleable>

<style name="Theme.AppTheme" parent="@android:style/Theme" >
    <item name="testStyle">@style/test</item>
</style> 
```

问题是我想像这样使用android属性和我自己的属性，这是行不通的：

```
<style name="test" parent="@android:style/Widget.Button">
    <item name="android:background">#FF0000</item>
    <item name="testAttr">testText</item>
</style> 
```

我在自定义组件中设置默认样式如下：

```
public myButton(final Context context) {
    this(context, null);
}

public myButton(final Context context, final AttributeSet attrs) {
    this(context, attrs, R.styleable.TestTheme_testStyle);
}

public myButton(final Context context, final AttributeSet attrs, final int defStyle) {
    super(context, attrs, defStyle);

    final TypedArray array = context.obtainStyledAttributes(
            attrs,
            R.styleable.TestButton,
            defStyle,
            R.style.testDefault);
        final String s = array.getString(R.styleable.TestButton_testAttr);
        setText(s);
        array.recycle();
} 
```

当然，我在清单中设置了主题：

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.AppTheme" >

    <activity
        android:name=".TestActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

由于某种原因，它总是回退到默认样式，并且从不设置 android 属性。那么我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T12:03:01.750

好吧，我应该在提问之前看起来更好......

找到了解决方案：

替换了这个：

```
public myButton(final Context context, final AttributeSet attrs) {
    this(context, attrs, R.styleable.TestTheme_testStyle);
} 
```

有了这个：

```
public myButton(final Context context, final AttributeSet attrs) {
    this(context, attrs, R.attr.testStyle);
} 
```

# ios - 是否可以将所有资源移动到文档文件夹

> ID：12072155
> 
> 赞同：2
> 
> 时间：2012-08-22T11:33:05.873
> 
> 标签：ios, image, file, ios5

我想动态更改我的图像。在每次应用程序启动时，我都会向服务器请求更新。如果有，它正在发送新图像。我将图像存储在文档目录中。当我将现有图像添加到文档目录中时，旧图像被替换。

我在应用程序中嵌入了一些图像（它在资源下）。由于苹果签名政策，我无法替换资源中的图像。
我目前的实现

```
if(image is present in documents)
       use this
else
     take it from resources 
```

如果用户想要更改所有图像，资源将包含所有图像，文档将包含所有图像。所以会导致重复

所以我想从标准资源移动到文档目录我可以使用“容器迁移清单”吗？

# php - 如何使用 AJAX 和 JSON 将 PHP 变量从一个页面抓取到另一个页面？

> ID：12072159
> 
> 赞同：0
> 
> 时间：2012-08-22T11:33:20.693
> 
> 标签：php, javascript, ajax, jquery

我不确定我是否在这里做错了什么。我已经研究了很长时间了。我基本上已经浏览了谷歌和这个页面上的所有内容，但仍然不明白我的第一页应该是什么样子才能让它工作。

```
<script>
//firstpage.php

function fetch(){
   $.ajax({
      url: 'secondpage.php',
      type: 'POST',
      data: {
         id:'ok'
      },
      success: function(data){
         //var data = jQuery.parseJSON(data);
         if (data.phpvar == 'ok'){
            alert('Success!');// for testing
         }else{
            alert('Failure!');// for testing
         }
      }
   });
}
</script> 
```

ajax 请求第二页：

```
<?php
//secondpage.php

if($_POST['id'] == 'ok'){
    $return_data['phpvar'] = 'ok';
    return json_encode($return_data);
}
?> 
```

我究竟做错了什么？？？我是ajax的新手，所以请解释一下最好的方法。我的目标很简单，它是从第二页获取值为“ok”的 PHP 变量，并将其作为确认类型传递回第一页，以找出输入了哪个 PHP if() 条件->(取决于在 sql 数据库响应上）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:46:10.450

您需要摆脱`var obj = jQuery.parseJSON(data);`并`data`直接使用。jQuery 通常会检测 JSON 并自动解析它。添加`dataType: 'json'`到您的 ajax 参数以确保。

除此之外，您应该更改您的 PHP 脚本以*始终*返回*一些*JSON - 如果它只是一个空对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T23:04:04.887

没关系！我现在使用 ajax 的经验是，我真的不需要在任何时候获取 PHP 变量。因为如果需要检查某些东西是否存在，那么我们要么在第一页或第二页使用 SESSION 检查或 COOKIE 检查。否则，我们使用 jquery 数据来发送它，如下所示：

```
<script>
//firstpage.php

$.ajax({
   type:'POST',
   url:'secondpage.php',
   data:'id=ok&do=check',
   success:function(data){
   if(data=='good'){
      //do stuff
   }
   if(data=='bad'){
      //do stuff
   }
}});
</script> 
```

请求页面：

```
if($_POST['id'] == 'ok' AND $_POST['do'] != ''){//something was sent, do..
    echo 'good';
}else    
if($_POST['id'] == 'ok' AND $_POST['do'] == ''){//if nothing was sent, do..
    echo 'bad';
}else{/*do nothing*/}
?> 
```

最后，如果绝对必要，我们总是可以尝试找到一种在 JS 文件中运行 PHP 的方法，并尝试使用 PHP 函数对数据进行拆分，然后将拆分后的数据作为 ARRAY 返回，然后我们可以使用数组部分像我们的代码中的 $data[1] 或 $data[2].. 等，在 jQuery 中使用完全相同的数据字符串执行不同的任务。

# xslt - 无法使用 xsl 转换将 CDATA 附加到 xml 元素内容

> ID：12072165
> 
> 赞同：0
> 
> 时间：2012-08-22T11:33:41.643
> 
> 标签：xslt, bpel

我正在使用 bpel 复合，在复合中我使用调解器组件，并且我使用 xsl 将传入的有效负载数据转换为出站有效负载。我有一个要求，我需要附加到出站架构中的 xml 元素之一。我尝试在 .xsl 文件中使用以下代码：

```
<ns1:request>
        <xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text>
        <xsl:value-of disable-output-escaping="yes" select="/imp1:error-event-payload/imp1:error-payload"/>
        <xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>
      </ns1:request> 
```

但这不会生成输出为`<request><![CDATA somedata ]]> </request>`. 有什么方法可以用 CDATA 部分转换 xml 元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:47:27.187

那么 CDATA 部分是您可以指定的序列化选项

```
<xsl:output cdata-section-elements="ns1:request"/> 
```

这仅在您的 XSLT 处理器或工具链将结果树序列化为文件时才有效，而不是在传递结果树（例如 DOM 树或 XPath/XSLT 树实现）时有效。

# perl - IPC::Open3::open3() 不适用于 perl 5.14.2 和 perl 5.10.1？

> ID：12072168
> 
> 赞同：4
> 
> 时间：2012-08-22T11:33:46.383
> 
> 标签：perl, ipc, ipcopen3

在我们的一个模块中，我们检查给定的二进制文件 ( `varnishd`) 是否存在，如果存在，我们运行额外的测试。

为了执行检查，我们使用`IPC::Open3`，像这样（为了清楚起见，示例被剥离）：

```
perl -MIPC::Open3 -le '
    my $binary = "varnishd";
    my $pid = IPC::Open3::open3(my($in, $out), undef, $binary, "-V");
    waitpid $pid, 0; print $?' 
```

**在带有perl 5.10.1**的 Debian Squeeze 或 Ubuntu Natty 下，如果`varnishd`在系统上找不到，则会`65280`为我打印。如果您将 更改`$binary`为`perl`，则（正确）打印`0`.

但是，对于 Ubuntu Precise 和**perl 5.14.2**，这不再以相同的方式工作，并产生以下结果：

```
$ perl -MIPC::Open3 -le '
    my $binary = "varnishd";
    my $pid = IPC::Open3::open3(my($in, $out), undef, $binary, "-V");
    waitpid $pid, 0; print $?'
open3: exec of varnishd -V failed at -e line1 
```

例如，当我将 更改为`$binary`存在的东西时，`perl`它可以正常工作并打印`0`.

```
$ perl -MIPC::Open3 -le '
    my $binary = "perl";
    my $pid = IPC::Open3::open3(my($in, $out), undef, $binary, "-V");
    waitpid $pid, 0; print $?'
0 
```

阅读其他问题和答案，看起来我想研究[IPC::Run](https://metacpan.org/module/IPC%3a%3aRun)，但实际上我想：

*   了解这种行为差异
*   **如果可能的话，**避免更多的依赖****

 **编辑：忘了提到这些东西是在**chroot**环境下运行的，包括 Squeeze 和 Precise 系统，如果这完全相关（`/dev`例如文件系统差异？）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T12:41:46.573

您注意到一个[错误](https://rt.perl.org/rt3//Public/Bug/Display.html?id=72016) [修复](http://perl5.git.perl.org/perl.git/commit/8960aa876f446ad29b892204eeb41fc724123dcb)。

在您所谓的 5.10.1 版本中，`open3`报告该程序运行并以代码 255 退出。这些都不是真的。

在您所谓的 5.14.2 版本中，`open3`它会抛出异常，因为它一直被记录在案，而且它总是针对其他一些问题所做的。如果需要，您可能会发现使用 with 启动子进程失败`eval BLOCK`。**

# c# - 插入和更新不会更改数据库 (sdf)

> ID：12072169
> 
> 赞同：0
> 
> 时间：2012-08-22T11:08:33.497
> 
> 标签：c#, database, sql-server-ce

我在将数据保存到名为`Settings.sdf`. 我有几个文件：

```
- Settings.sdf
- SettingsDataSet.xsd
 - SettingsDataSet.Designer.cs
 - SettingsDataSet.xsc
 - SettingsDataSet.xss 
```

如果我尝试使用`UPDATE`或`INSERT INTO`查询，我不会更新我的数据库 ( `Settings.sdf`)，只更改缓存文件中的数据（无论它在哪里）。我正确使用所有`SqlCeCommands`. 例如：

```
string conString = "Data Source=Settings.sdf";
con = new SqlCeConnection(conString);
con.Open();
...
using (SqlCeCommand com = new SqlCeCommand("UPDATE Settings SET [Value] = (@loc) WHERE [Key] = 'Location'", con))
{
    com.Parameters.AddWithValue("@loc", device.Location);
    com.ExecuteNonQuery();
}
...
con.Close(); 
```

如何管理这个问题？为什么这个命令不直接更新我的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:03:19.020

你可以调整你的数据库路径，你必须设置完整路径：

1.  调整：

    ```
    string conString = "Data Source=" + Path.Combine(Your full path,"Settings.sdf");` 
    ```

2.  `;`在查询末尾添加

```
using (SqlCeCommand com = new SqlCeCommand("UPDATE Settings SET [Value] = (@loc) WHERE [Key] = 'Location';", con))
{
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:52:48.490

在调试目录中的 sdf 文件中进行了更改，但是当您再次运行时，将再次创建 sdf，始终删除创建并再次测试

# java - 如何在 JTextPane 中为文本和下划线设置不同的颜色？

> ID：12072171
> 
> 赞同：5
> 
> 时间：2012-08-22T11:33:53.030
> 
> 标签：java, swing, highlighting, jtextpane

只是试图在 JTextPane 中为文本着色 - 但问题是文本和下划线不能有不同的颜色。我应该怎么做，或者这甚至可能吗？下面的示例以 RED 打印所有文本和下划线。

```
JTextPane pane = new JTextPane();

StyleContext context = new StyleContext();

Style style = pane.addStyle("Black", null);
StyleConstants.setAlignment(style, StyleConstants.ALIGN_RIGHT);
StyleConstants.setFontSize(style, 14);
StyleConstants.setSpaceAbove(style, 4);
StyleConstants.setSpaceBelow(style, 4);
StyleConstants.setForeground(style, Color.BLACK);

StyledDocument document = pane.getStyledDocument();

style = pane.addStyle("Red Underline", style);
StyleConstants.setForeground(style, Color.RED);
StyleConstants.setUnderline(style, true);

pane.getDocument().insertString(0,  "Test String", style); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T12:05:11.110

这是我找到的解决方案...

[使用 AttributeSet 在不同颜色下划线 StyleConstant](https://stackoverflow.com/questions/9502654/underline-styleconstant-in-a-different-colour-with-attributeset)

这是示例代码的链接

[http://java-sl.com/tip_colored_strikethrough.html](http://java-sl.com/tip_colored_strikethrough.html)

只需更改以下行即可解决...

```
int y = a.getBounds().y + a.getBounds().height + 2 ; 
```

它工作正常

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T16:56:01.097

基本上你需要创建 3 个类：

*   您需要扩展[javax.swing.text.LabelView](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/LabelView.html)以执行您希望的修改视图（无论是否添加彩色下划线）。您将覆盖该`paint(Graphics, Shape)`方法。您可以在被覆盖的类中使用此行访问属性 - 属性应该是对文本执行其他操作（如添加下划线）的触发器。

    `getElement().getAttributes().getAttribute("attribute name");`

*   您需要创建一个新的[ViewFactory](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/ViewFactory.html)并覆盖该`create`方法。重要的是，在执行此操作时要处理所有元素类型（否则内容将无法正确显示。

*   您需要创建一个[StyledEditorKit](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/StyledEditorKit.html)来告诉窗格`ViewFactory`使用哪个。

这是一个简化且可运行的示例：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.plaf.basic.BasicTextPaneUI;
import javax.swing.text.*;

public class TempProject extends JPanel{

    public static void main(String args[])    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );

                //Adding pane
                JTextPane pane = new JTextPane();
                pane.setEditorKit(new CustomEditorKit());
                pane.setText("Underline With Different Color");

                //Set Style
                StyledDocument doc = (StyledDocument)pane.getDocument();
                MutableAttributeSet attrs = new SimpleAttributeSet();
                attrs.addAttribute("Underline-Color", Color.red);
                doc.setCharacterAttributes(0, doc.getLength()-1, attrs, true);

                JScrollPane sp = new JScrollPane(pane);
                frame.setContentPane(sp);  
                frame.setPreferredSize(new Dimension(400, 300));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

            }
        });
    }

    public static class CustomEditorKit extends StyledEditorKit{

        public ViewFactory getViewFactory(){
            return new CustomUI();
        }
    }

    public static class CustomUI extends BasicTextPaneUI{
        @Override
        public View create(Element elem){
            View result = null;
            String kind = elem.getName();
            if(kind != null){
                if(kind.equals(AbstractDocument.ContentElementName)){
                    result = new MyLabelView(elem);
                } else if(kind.equals(AbstractDocument.ParagraphElementName)){
                    result = new ParagraphView(elem);
                }else if(kind.equals(AbstractDocument.SectionElementName)){
                    result = new BoxView(elem, View.Y_AXIS);
                }else if(kind.equals(StyleConstants.ComponentElementName)){
                    result = new ComponentView(elem);
                }else if(kind.equals(StyleConstants.IconElementName)){
                    result = new IconView(elem);
                } else{
                    result = new LabelView(elem);
                }
            }else{
                result = super.create(elem);
            }

            return result;
        }
    }

    public static class MyLabelView extends LabelView{

        public MyLabelView(Element arg0) {
            super(arg0);
        }

        public void paint(Graphics g, Shape a){
            super.paint(g, a);
            //Do whatever other painting here;
            Color c = (Color)getElement().getAttributes().getAttribute("Underline-Color");
            if(c != null){
                int y = a.getBounds().y + (int)getGlyphPainter().getAscent(this);
                int x1 = a.getBounds().x;
                int x2 = a.getBounds().width + x1;

                g.setColor(c);
                g.drawLine(x1, y, x2, y);
            }

        }

    }

} 
```

这是另一个示例代码的链接：

[http://java-sl.com/tip_colored_strikethrough.html](http://java-sl.com/tip_colored_strikethrough.html)

这个答案主要是为了后代，我认为添加链接代码和解释的简化版本将有助于使事情更容易理解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T12:03:01.673

*   [例如](https://stackoverflow.com/a/9022901/714968)，[对于 Html](https://stackoverflow.com/questions/9071389/setting-jtextpane-to-content-type-html-and-using-string-builders/9072475#9072475)

*   `Document`返回模型以查看，可以确定行开始/结束的索引

# php - 如何将包含数字和字符的数组分成两个数组并打印它们？

> ID：12072175
> 
> 赞同：0
> 
> 时间：2012-08-22T11:34:15.790
> 
> 标签：php

这里我的问题是如何划分包含数字和字符的数组。例如：125 毫克。我从数据库中获取这个值，我正在尝试拆分它，但我无法拆分它。任何人都可以提供建议，我谷歌了很多。

这是代码示例：

```
<?php 
$sql="select * from medication_history where id=$id";
$result=mysql_query($sql)or die(mysql_error());
$row=mysql_fetch_array($result);
$dose=$row['dose'];
//echo $dose;
echo str_word_count($dose);
$dose=implode('',explode(',',$dose));
//print_r ($dose);
 echo $dose;?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:04:14.870

如果我理解你的问题。答案是：

```
$num=preg_replace("#[^0-9]#",'', $dose);

$char=preg_replace("#[^a-z]#",'', $dose); 
```

现在：

$num=125 和 $char=mg。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:58:11.317

我认为最合适的解决方案是将“剂量”列分成两个不同的列。第一个包含数量 (125)，第二个包含单位 (mg)。

我看到的另一种方法是使用正则表达式来识别数字部分和字母字符部分。

# python - CherryPy + Werkzeug 调试器？

> ID：12072181
> 
> 赞同：1
> 
> 时间：2012-08-22T11:34:21.890
> 
> 标签：python, debugging, cherrypy, werkzeug

当我遇到我非常喜欢的[Werkzeug Debugger时，我正在比较 CherryPy 和 Flask。](http://werkzeug.pocoo.org/docs/debug/)让我感到惊奇的是：

是否可以将 Werkzeug 的调试器集成到 CherryPy 中？如果是这样：如何？

当我尝试自己集成它时，我得到了控制台工作（`/console`），但不是异常处理程序。

**编辑：** 似乎 CherryPy 在 Werkzeug 得到错误之前捕获并处理它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:59:00.553

在我的编辑中，我描述了 CherryPy 捕获了错误。在配置`throw_errors`中可以设置为`True`. 对我来说，设置`cherrypy._cprequest.Request.throw_errors = True`做到了这一点。整个代码是：

```
import cherrypy
from cherrypy import wsgiserver

from werkzeug.debug import DebuggedApplication

class Root(object):

    @cherrypy.expose
    def index(self):
        return "Hello World :)"

    @cherrypy.expose
    def page(self):
        # Error:
        return self.self.self.pas

cherrypy._cprequest.Request.throw_errors = True

app = cherrypy.Application(Root(), script_name=None, config=None)
app = DebuggedApplication(app, evalex=True)

d = wsgiserver.WSGIPathInfoDispatcher({'/': app})
server = wsgiserver.CherryPyWSGIServer(('0.0.0.0', 8080), d)
try:
    server.start()
except KeyboardInterrupt:
    server.stop() 
```

我敢肯定，有更好的方法可以做到这一点，但我是 CherryPy 的新手，这个 hack 对我有用。

# c++ - 操作员 new 已经有一个身体

> ID：12072182
> 
> 赞同：4
> 
> 时间：2012-08-22T11:34:23.980
> 
> 标签：c++, operators, new-operator

我正在尝试使用参数作为全局的 operator new 来实现。如果没有 args 的 new 重载没有问题，但是在尝试编译时出现以下错误

```
inline void* operator new(size_t, void* p) {
    //...
    return p;
} 
```

> c:\bjarne_exercise_6.cpp(14): error C2084: function 'void *operator new(size_t,void *) throw()' has a body c:\program files\microsoft visual studio 10.0\vc\include\new( 55) : 见之前对“新”的定义
> 
> c:\bjarne_exercise_6.cpp(40): error C2264: 'operator new' : 函数定义或声明错误；未调用函数

我刚刚解决了这个问题，你必须在 #include stdafx.h 之前声明这个 不，不是真的。它编译得很好，但仍然没有调用这个函数，而是来自新头文件的版本。之所以如此，是因为新标头中已经定义了新位置（带有 2 个参数）。普通的 new （只有 1 个 size_t 参数）只在那里声明，所以你仍然可以重载它。因此，如果您想要具有超过 1 个参数的特殊新参数，则以下 @trion 建议的解决方案是合适的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T11:40:37.980

这种放置形式`operator new`（正如标准所称的那样）已经在全局命名空间中的 C++ 程序中定义，您不能自己在那里提供定义。与其他 global 不同`operator new`，这个是不可替换的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T11:45:00.050

C++ 标准在头文件中定义了`operator new`一个额外的位置。它的实现类似于这样：`void*``<new>`

```
void* operator new(size_t, void* m)
{
    return m;
} 
```

它通常用于在已分配的内存上实例化对象，例如通过将分配与实例化分开的 STL 容器。因此，如果您包含任何取决于 的标准标题`<new>`，则将已经定义了新的展示位置。

如果您想创建自己的`operator new`具有不同语义的版本，可以使用虚拟参数来消除歧义：

```
struct my_new_dummy {} dummy;
void* operator new(size_t, my_new_dummy, void* m);

//...

int mem;
int* ptr = new(dummy, &mem) int; 
```

**编辑：**您可以重新定义普通`operator new`但不能重新定义新位置的原因是前者默认由编译器定义并且可以手动覆盖，而新位置定义在标头中，因此与您的重新定义发生冲突.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T14:37:27.307

**1）您有编译错误，因为无法**替换全局级别放置新运算符！请参阅 c++ 11 标准（在以前的标准中也是如此）。

> ```
> 18.6.1.3 Placement forms [new.delete.placement]
> 1 These functions are reserved, a C++ program may not define functions that 
> ```
> 
> 替换标准 C++ 库 (17.6.4) 中的版本。(3.7.4) 的规定不适用于 operator new 和 operator delete 的这些保留放置形式。void* operator new(std::size_t size, void* ptr) noexcept;

所以基本上你可以替换其他全局 new 运算符（见下文），但**不能**替换标准禁止的放置形式！

```
void* operator new (std::size_t size) throw (std::bad_alloc) 
```

2）另一方面，您可以编写自己的类级别新运算符，包括在您的类中放置新运算符，没关系：

```
class Test
{
public:

    void* operator new (std::size_t size) throw (std::bad_alloc) {
        return malloc(size);
    }

    void* operator new (std::size_t size, const std::nothrow_t& nothrow_constant) throw() {
        return malloc(size);
    }

    void* operator new (std::size_t size, void* ptr) throw() {
        return malloc(size);
    }
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T19:13:41.077

是的。的这种放置形式`operator new`已经在全局命名空间中定义，因此您不能自己在那里提供定义。这是不可更换的。

# php - 在 GetOne 查询数据库失败

> ID：12072187
> 
> 赞同：0
> 
> 时间：2012-08-22T11:34:33.130
> 
> 标签：php, mysql, joomla, joomla2.5

[http://docs.joomla.org/Search_Engine_Optimisation](http://docs.joomla.org/Search_Engine_Optimisation)

在该部分`Dynamic MetaDesc in a list of articles by category`

我已关注，我收到一个致命错误，指出`Call to a member function GetOne() on a non-object in D:\xampp\htdocs\zoomla\includes\application.php on line 391`

有人可以帮我解决这个问题吗？谢谢。顺便说一句，上一节不适合 Joomla 2.5 你能帮我吗？

怎么样`Add Heading Tags in the Titles for More Relevance`？？？？对于 Joomla 2.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:45:45.877

这似乎适用于旧版本的 Joomla。

此代码片段：

```
if (strcasecmp($_GET['view'],'category')==0) {         
   $description = $database->GetOne("SELECT description FROM #__categories WHERE id={$_GET['id']}");       
} 
```

很可能与（在 Joomla 2.5 中）相同：

```
if (strcasecmp($_GET['view'],'category')==0) {
   $db = JFactory::getDBO();
   $db->setQuery("SELECT description FROM #__categories WHERE id=".(int)$_GET['id']);
   $description = $db->loadResult();       
} 
```

请注意，我的代码未经测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:27:00.463

那篇文章与 Joomla 无关！2.5\. 对于初学者，类别视图已经包含元描述和关键字，如果它们存在于`view.html.php`

```
if ($this->category->metadesc)
{
    $this->document->setDescription($this->category->metadesc);
}
elseif (!$this->category->metadesc && $this->params->get('menu-meta_description'))
{
    $this->document->setDescription($this->params->get('menu-meta_description'));
}
if ($this->category->metakey)
{
    $this->document->setMetadata('keywords', $this->category->metakey);
}
elseif (!$this->category->metakey && $this->params->get('menu-meta_keywords'))
{
    $this->document->setMetadata('keywords', $this->params->get('menu-meta_keywords'));
} 
```

这同样适用于为文章标题添加标题标签的部分：

```
<?php if ($params->get('show_title')) : ?>
    <h2>
    <?php if ($params->get('link_titles') && !empty($this->item->readmore_link)) : ?>
        <a href="<?php echo $this->item->readmore_link; ?>">
        <?php echo $this->escape($this->item->title); ?></a>
    <?php else : ?>
        <?php echo $this->escape($this->item->title); ?>
    <?php endif; ?>
    </h2>
<?php endif; ?> 
```

如果您确实想更改输出的完成方式，您应该在模板中创建[模板覆盖](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)。`com_content`

# jquery - ASP Button 在 jQuery 对话框中回发后显示页面全屏

> ID：12072191
> 
> 赞同：0
> 
> 时间：2012-08-22T11:34:37.170
> 
> 标签：jquery, asp.net, button, dialog, postback

我有一个显示 ASP 表单的 jQuery 对话框。在这个表格中，我有一个按钮。当我单击它时，一些服务器端代码应该触发并显示结果。但是当我这样做时，在回发时，对话框窗口消失了，对话框页面在浏览器中全屏打开，而不是对话框。

有谁知道如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:44:23.273

您想在回发后保持对话框打开吗？如果是，请参阅：[asp.net webforms and jquery: How to save/restore jquery state between postbacks?](https://stackoverflow.com/questions/500728/asp-net-webforms-and-jquery-how-to-save-restore-jquery-state-between-postbacks) . 简而言之，您应该记住 pb 之前的对话状态，即在隐藏字段中并在之后手动恢复。并且，在对话框表单中，将提交按钮的 PostBackUrl 设置为对话框所在的页面。

# iphone - 将第三个按钮添加到导航控制器

> ID：12072195
> 
> 赞同：0
> 
> 时间：2012-08-22T11:34:52.037
> 
> 标签：iphone, objective-c, ios, xcode

我在导航控制器中添加了两个按钮，一个是右键和左键，我想在右键之前添加第三个按钮。怎么做？

```
 UIButton *logo_btn =  [UIButton buttonWithType:UIButtonTypeCustom];
 [logo_btn setBackgroundImage:[UIImage imageNamed:@"logo-57.png"]  forState:UIControlStateNormal];

[logo_btn setFrame:CGRectMake(-2, 0, 47, 47)];

UIBarButtonItem *btnItem1 = [[UIBarButtonItem alloc] initWithCustomView:logo_btn];
self.navigationItem.leftBarButtonItem = btnItem1; 
```

这就是我在左侧添加一个按钮的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T11:43:01.183

iOS 5 帮助您在导航栏上创建超过 2 个条形按钮

```
self.navigationItem.leftBarButtonItems = [NSArray arrayWithObjects:uibarbuttonInstance1, uibarbuttonInstance2, nil]; 
```

右键相同

```
self.navigationItem.rightBarButtonItems = [NSArray arrayWithObjects:uibarbuttonInstance1, uibarbuttonInstance2, nil]; 
```

# php - sql 按最近日期查询

> ID：12072196
> 
> 赞同：1
> 
> 时间：2012-08-22T11:34:57.210
> 
> 标签：php, mysql, sql, codeigniter

我正在从数据库中列出许多数据库项目的数组中的项目。我知道我想要做的事情可以通过单独的表格来完成，但是对于这个要求，我想看看是否可以执行以下操作。

我的代码是：

```
$sql_list  ="SELECT  *
    FROM ".$this->tables_rma."
    ORDER BY dateCreated DESC"; 
```

这会在表中返回一个很好的数据数组，但是我有多个具有不同实体的相同项目的条目。

所以我想要做的是通过最近更新的数据行选择每个条目中的一个。

这是可能的，还是我只是想偷工减料？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:53:07.297

您可以使用`SELECT DISTINCT [column]`或`GROUP BY [column]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:54:13.643

LIMIT 1 是这样的吗？

```
$sql_list  ="SELECT  *
    FROM ".$this->tables_rma."
    ORDER BY dateCreated DESC LIMIT 1"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:55:01.680

假设您有 ID 唯一字段和 YourITEM 字段，然后：

```
select * from YourTable t1 where id = 
   (select id from YourTable t2 
     where t2.YourItem=t1.YourItem 
     order by DateCreated desc, id desc limit 1) 
```

如果您不需要选择中的最后一个 DateCreated 值，则只需：

```
select distinct YourItem from YourTable; 
```

# java - 将数据类型从 DB 类型转换为 java 数据类型

> ID：12072198
> 
> 赞同：2
> 
> 时间：2012-08-22T11:35:08.050
> 
> 标签：java, oracle, types, casting, type-conversion

我的数据库中有一个包含以下字段的表

```
field1 of type NUMBER(38)
other fields 
```

`field2`是类型`NUMBER(38)`

现在我有一些 DAOS，它以 Object 的形式为我提供这个 fileld1 信息

```
 Object field1Value 
```

现在我需要将它的类型转换为数据类型。它应该是哪个数据类型？在我的情况下它是 Integer
但为什么它被映射到 Integer，为什么不是 Long 或 BigDecimal ？
整数是 32 位，但字段在 db 中是 NUMBER 38

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:43:07.047

你不应该投射任何东西。这就是 DAO 的作用——在数据库和应用程序代码之间架起一座桥梁。

您需要更改 DAO 以提供适当的数据类型。[`BigInteger`](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html)将是最合适的，因为 a`long`只有 64 位精度，而[Oracle 的 number(38) 数据类型](http://ss64.com/ora/syntax-datatypes.html)具有 126 位精度，并且您的字段没有小数部分。

# forms - drupal 7 form api - 国家下拉列表

> ID：12072200
> 
> 赞同：4
> 
> 时间：2012-08-22T11:35:19.570
> 
> 标签：forms, api, drupal, select

有没有办法在不手动构建数组的情况下获得完整的国家列表

```
$options = array(
  '', => 'Please select your country.',
  'USA' => 'USA',
  'UK' => 'UK',
); 
```

有没有办法把所有国家的数组都填满？手动填充这个有点无聊

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T19:46:00.767

Drupal 核心存储了所有国家/地区/代码的列表，准备得当，因此您可以将其直接放入表单元素中：

```
require_once DRUPAL_ROOT . '/includes/locale.inc';

$options = country_get_list(); 
```

# php - 在php中将整数转换为双倍

> ID：12072208
> 
> 赞同：0
> 
> 时间：2012-08-22T11:35:36.167
> 
> 标签：php, mysql, phpmyadmin

我无法在 Mysql 中插入字段。输入从 HTML 表单作为字符串传递。我认为这个问题是由于类型不匹配造成的。DB类型为双

*而且我无法将其转换为 Double 或 float。使用 floatval() 或 Doubleval()。*

**通常输入是 8 我希望它转换为 8.0**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:37:19.227

您可以`8`完全安全地插入小数或浮点数。根本不必如此`8.0`。

如果您在插入值时遇到问题，则不是数据库上的数据类型，而是另一个问题。

如果您发布更多详细信息，我们将研究更多:)

编辑：这是一些输入数据`int`，`decimal`和`float`类型：

```
mysql> create table numberTest(inty int(2), decy decimal(3,2), floaty float(3,2));
Query OK, 0 rows affected (0.01 sec)

mysql> select * from numberTest;
Empty set (0.00 sec)

mysql> insert into numberTest values(7,7,7);
Query OK, 1 row affected (0.00 sec)

mysql> insert into numberTest values(7.2,7.2,7.2);
Query OK, 1 row affected (0.00 sec)

mysql> select * from numberTest;
+------+------+--------+
| inty | decy | floaty |
+------+------+--------+
|    7 | 7.00 |   7.00 |
|    7 | 7.20 |   7.20 |
+------+------+--------+
2 rows in set (0.01 sec) 
```

如果您不能插入您的值，请在 PHP 中显示您的插入命令，它不是数据类型。你用这个问题叫错了树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:45:43.257

```
 $number = 8;
        echo number_format($number, 1, '.', ' '); //8.0
        echo number_format($number, 2, '.', ' '); //8.00 
```

# iphone - 裁剪 UIImage 截图

> ID：12072216
> 
> 赞同：0
> 
> 时间：2012-08-22T11:36:00.150
> 
> 标签：iphone, objective-c, ios, ipad, uiimage

我目前正在我的代码中替换 UIGetScreenImage()，因为它会导致 C99 错误。

我用[来自 apple 的这段代码](http://developer.apple.com/library/ios/#qa/qa1703/_index.html)替换它，该`screenshot`方法返回一个`UIImage`.

我在裁剪和保存图像方面的尝试如下：

```
UIImage *returnedImage = [self screenshot];
// Get image to save
CGImageRef screen = returnedImage.CGImage;
UIImage *img = [UIImage imageWithCGImage:screen];

// Image cropping
CGImageRef imageRef = CGImageCreateWithImageInRect([img CGImage], CGRectMake(0, 5, 768, 1004));
UIImage *img2Save = [UIImage imageWithCGImage:imageRef];
CGImageRelease(imageRef);

// Request to save the image to camera roll
UIImageWriteToSavedPhotosAlbum(img2Save, self, nil, nil); 
```

在返回之前，我也尝试在`screenshot`方法中对其进行裁剪，但无济于事。

两次尝试都会保存`UIImage`从该`screenshot`方法返回的未裁剪的内容。

有什么明显的我要遗漏的吗？我看过[这个 SO 线程](https://stackoverflow.com/questions/2655176/problem-in-cropping-the-uiimage-using-cgcontext)，但看不到连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:48:49.620

请尝试以下代码

```
- (UIImage*)imageByCropping:(UIImage *)imageToCrop toRect:(CGRect)rect
{
   //create a context to do our clipping in
   UIGraphicsBeginImageContext(rect.size);
   CGContextRef currentContext = UIGraphicsGetCurrentContext();

   //create a rect with the size we want to crop the image to
   //the X and Y here are zero so we start at the beginning of our
   //newly created context
   CGRect clippedRect = CGRectMake(0, 0, rect.size.width, rect.size.height);
   CGContextClipToRect( currentContext, clippedRect);

   //create a rect equivalent to the full size of the image
   //offset the rect by the X and Y we want to start the crop
   //from in order to cut off anything before them
   CGRect drawRect = CGRectMake(rect.origin.x * -1,
                                rect.origin.y * -1,
                                imageToCrop.size.width,
                                imageToCrop.size.height);

   //draw the image to our clipped context using our offset rect
   CGContextDrawImage(currentContext, drawRect, imageToCrop.CGImage);

   //pull the image from our cropped context
   UIImage *cropped = UIGraphicsGetImageFromCurrentImageContext();

   //pop the context to get back to the default
   UIGraphicsEndImageContext();

   //Note: this is autoreleased
   return cropped;
} 
```

然后使用以下代码调用代码：

```
- (void)drawRect:(CGRect)rect
{
   //draw the whole lights off image
   //the on images will be drawn overtop
   [lightsOffImage drawInRect:rect];

   //if we don't have any lights on... no point in continuing
   if( numberOfLightsOn < 1 )
     return;

   //figure out the dimensions of numberOfLights on bulbs
   CGSize croppedSize = CGSizeMake(LIGHT_WIDTH * numberOfLightsOn, LIGHT_HEIGHT);
   CGRect clippedRect = CGRectMake(0, 0, croppedSize.width, croppedSize.height);

   //get the "on" bulbs by cropping the image
   UIImage *cropped = [self imageByCropping:lightsOnImage toRect:clippedRect];

   //create a rect to draw the newly cropped on images to
   CGRect lightsOnRect = CGRectMake(LIGHT_BULB_OFFSET_X,
                                    LIGHT_BULB_OFFSET_Y,
                                    croppedSize.width,
                                    croppedSize.height);

   //draw the "on" lights
   [cropped drawInRect:lightsOnRect];

   //cropped is autoreleased so no need to worry about cleanup
} 
```

愿此代码对您有所帮助。

# c# - ASP.NET 查询泛型 DBSet

> ID：12072223
> 
> 赞同：0
> 
> 时间：2012-08-22T11:36:21.160
> 
> 标签：c#, asp.net-mvc, linq, entity-framework, generics

我正在尝试解决一个场景，我可以传入一个实体模型并检查它是否有一个 UserFK，如果它有，并且当前用户不是管理员角色.. 检查 UserFK 是否与当前用户的 UserId 匹配从数据库...

我只是无法用泛型解决最后一点..我认为我在正确的轨道上，但不太确定..

```
[AttributeUsage(AttributeTargets.Method, Inherited = true, AllowMultiple = false)]
public class IsOwnerAttribute<T> : AuthorizeAttribute where T : class
{
    public IsOwnerAttribute(IUnitOfWork context)
    {
        this.context = context;
    }

    public string RouteParameter
    {
        get { return this.routeParameter; }
        set { this.routeParameter = value; }
    }

    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        if (filterContext == null)
        {
            throw new ArgumentNullException("filterContext");
        }

        if (!filterContext.HttpContext.User.Identity.IsAuthenticated)
        {
            filterContext.Result = new HttpUnauthorizedResult();
        }
        else if (IsOwner(filterContext))
        {
            return;
        }
        else
        {
            ViewDataDictionary viewData = new ViewDataDictionary();
            viewData.Add("Message", "You do not have sufficient privileges for this operation.");
            filterContext.Result = new ViewResult { ViewName = "Error", ViewData = viewData };
        }

    }

    bool IsOwner(AuthorizationContext filterContext)
    {
        bool result = false;

        int id = -1;
        if (filterContext.RouteData.Values.ContainsKey(this.RouteParameter))
        {
            id = Convert.ToInt32(filterContext.RouteData.Values[this.RouteParameter]);
        }

        var currentUser = Membership.GetUser();
        if (currentUser != null && !filterContext.HttpContext.User.IsInRole("Administrator"))
        {
            var userGuid = (Guid)currentUser.ProviderUserKey;

            // Stuck here.. trying to work out how with the Set<T> how i could then check if it has an Id property and a UserFK property and if it does then basically look up if the ID matches the ID in the route and the UserFK matches the userGuid then let them access the content...
            result = context.Set<T>().Where(c => c.Id == id && c.UserFK == userGuid).SingleOrDefault() != null;

        }

        return result;
    }

    string routeParameter = "id";
    readonly IUnitOfWork context;
    readonly IDbSet<T> dbset;
} 
```

我不知道我是否以错误的方式思考它，或者是否有更好的方法，但我很想知道什么是可能的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:54:45.130

为什么使用 Where 你可以使用 Find where Find 将搜索 T 主键，它使用对象作为参数。我认为这将解决您的问题。

示例更改此：

```
result = context.Set<T>().Where(c => c.Id == id && c.UserFK == userGuid).SingleOrDefault() != null; 
```

有了这个

```
result = context.Set<T>().Find(id);//and you don't need to filter also with user if your ID is primary key of the table 
```

# java - 如何在 JTable 上强制排序

> ID：12072224
> 
> 赞同：1
> 
> 时间：2012-08-22T11:36:28.960
> 
> 标签：java, swing, sorting, jtable, tablerowsorter

我已经有了这个：

```
TableRowSorter<FileTableModel> rs = new TableRowSorter<FileTableModel>(ftm);
    rs.setComparator(COL_NAME, new Comparator<DisplayFile>() {
            //<sorting code>
        }
    });
    setRowSorter(rs); 
```

它有效。当用户单击标题时，它将按应有的方式对行进行排序。如果不单击标题，我只是想不出一种简单的方法来对行进行排序。我希望行在显示时已经排序（然后用户可以通过单击列标题来更改 asc/desc/etc。）

我怎样才能强制排序？我知道我可以对我的 TableModel 中的行进行排序，但是我已经有一个工作比较器，为什么不使用它呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:55:27.670

```
rowSorter.toggleSortOrder(colIndex); 
```

# php - 登录系统 - 适用于 Firefox，但不适用于 IE、Chrome 等

> ID：12072225
> 
> 赞同：0
> 
> 时间：2012-08-22T11:36:30.250
> 
> 标签：php

我有一个似乎只能使用 Firefox 登录的登录系统，我曾尝试在 Internet Explorer 和 Chrome 中使用相同的登录详细信息，但它不允许我登录（验证失败！密码不正确，请重试。” )

在登录页面的代码中：

```
<body class="ui-state-processing">
<div id="cp-wrapper-div">
<div id="cp-topheader-div" class="ui-widget-header">
    <div id="cp-topheader-content-div">
        <img class="cp-topheader-customer-logo left" alt="Logo" src="images/logo.png" />
        <img class="cp-topheader-marandy-logo right" alt="Powered by CompanyName" src="images/powered_by_compname.png" />
    </div>
</div>
<div class="clear"></div>
<div id="login-page-wrap">
    <div id="login-wrapper" class="ui-corner-all page-div">
        <div id="login-input-wrapper" class="div-row-style">
            <div id="login-title-top" class="centre-div">
                <div id="login-title-icon">
                    <img src="images/padlock.png" alt="Online Booking Login" class="left" />
                </div>
                <div id="login-title-text">
                    <h1 class="drk-grey left">Online Booking Login</h1>
                </div>
            </div>
            <form action="?" method="post" id="frm-useracc-login" name="frm-useracc-login" >
                <div id="login-username-wrap" >
                    <div class="login-input-item left">
                        <div class="div-search-label left">
                            <div id="div-leftheader-wrap">
                                <p class="a-topheader-infotext left"><strong>Username: </strong></p>
                            </div>
                        </div>
                        <div class="login-input-content left div-subrow-style ui-corner-all">
                            <input type="text" tabindex="1" name="txt-username" id="txt-username" class="input-txt-med required addr-search-input txt-username left">
                        </div>
                    </div>
                </div>
                <div id="login-password-wrap" >
                    <div class="login-input-item left">
                        <div class="div-search-label left">
                            <div id="div-leftheader-wrap">
                                <p class="a-topheader-infotext left"><strong>Password: </strong></p>
                            </div>
                        </div>
                        <div class="login-input-content left div-subrow-style ui-corner-all">
                            <input type="password" tabindex="1" name="txt-password" id="txt-password" class="input-txt-med required addr-search-input txt-password left">
                        </div>
                    </div>
                </div>
                <div id="login-btn-bottom" class="centre-div">
                    <div id="login-btn-right">
                        <button name="btn-login" id="btn-login" class="btn-med ui-button ui-state-default ui-button-text-only ui-corner-all btn-hover-anim btn-row-wrapper left">Login</button>
                        <button name="btn-cancel" id="btn-cancel" class="btn-med ui-button ui-state-default ui-button-text-only ui-corner-all btn-hover-anim btn-row-wrapper left">Cancel</button><br /><br />
                    </div>
                </div>
            </form>
        </div>
        <p id="login-status" class="fail-text"><strong><? echo $_SESSION['login-status']; ?></strong></p>
    </div>
</div> 
```

这是我的 session.controller.php：

```
<?php

require_once("controllers/server.filter.php");
require_once('models/server.php');
require_once("models/useraccount.php");
require_once("models/sql.php");

class SessionController {

private static $login_status;
private static $redirect_url;
public static $form_action;

## Getters ##

private static function get_loginstatus() {return self::$login_status;}

## Setters ##

private static function set_loginstatus($in_str) {self::$login_status = $in_str;}

## Functions ##

public static function validate_user() {

    UserAccount::set_username($_REQUEST['txt-username']);
    UserAccount::set_password($_REQUEST['txt-password']);

    $pdo = new SQL();
    $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

    try {

        // Does user exist?
        $query = "SELECT COUNT(UserName) FROM tblusers WHERE UserName = :in_username";

        $stmt = $dbh->prepare($query);

        $param = Filter::san_str_html(UserAccount::get_username());

        $stmt->bindParam(':in_username', $param, PDO::PARAM_STR);

        $stmt->execute();

        $number_of_rows = $stmt->fetchColumn();

        $stmt->closeCursor();

        if ($number_of_rows <= 0) {

            self::set_loginstatus("The user does not exist in our database, please try again.");
            $_SESSION['login-status'] = self::get_loginstatus();
            self::redirect(false);

        } else {

            // User verified, check password...
            self::verify_password();

        }

    }

    catch (PDOException $pe) {
        die("Error: " .$pe->getMessage());
    }

    $pdo = null;

}

private static function verify_password() {

    $pdo = new SQL();
    $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

    try {

        // Does the password given match the password held?
        $query = "SELECT COUNT(*) FROM tblusers WHERE UserName = :in_username AND Password = :in_password";

        $stmt = $dbh->prepare($query);

        $param1 = UserAccount::get_password();
        $param2 = Filter::san_str_html(UserAccount::get_username());

        $stmt->bindParam(':in_username', $param2, PDO::PARAM_STR);
        $stmt->bindParam(':in_password', $param1, PDO::PARAM_STR);

        $stmt->execute();

        $number_of_rows = $stmt->fetchColumn();

    }

    catch (PDOException $pe) {
        die("Error: " .$pe->getMessage());
    }

    $pdo = null;

    if ($number_of_rows == 1) {

        $_SESSION['username'] = UserAccount::get_username();

        // Begin verification..
        self::set_useraccount(true);

    } else {

        self::set_loginstatus("Verification failed! Password incorrect, please try again.");
        $_SESSION['login-status'] = self::get_loginstatus();
        self::redirect(false);

    }

}

private static function verify_account() {

    // Account types: 9 = Disabled, 0 = Normal/Restricted, 1 = Administrative
    if (UserAccount::get_accounttype() == 9) {
        self::set_loginstatus("Verification failed! This account has been disabled."); ## Account disabled
        $_SESSION['login-status'] = self::get_loginstatus();
        self::redirect(false);

    } else

        // User login types: 9 = Disabled, 0 = Normal/Restricted, 1 = Administrative
        if (UserAccount::get_usertype() == 9) {
            self::set_loginstatus("Verification failed! This login has been disabled."); ## User login disabled
            $_SESSION['login-status'] = self::get_loginstatus();
            self::redirect(false);

        } else {

            // Set redirect url here
            if (UserAccount::get_accounttype() == 1) {
                self::$redirect_url = 'controlpanel.php';
            }

            if (UserAccount::get_accounttype() == 0 && UserAccount::get_usertype() == 1) {
                self::$redirect_url = 'controlpanel.php';
            }

            if (UserAccount::get_accounttype() == 0 && UserAccount::get_usertype() == 0) {
                self::$redirect_url = 'newbooking.php';
            }

            // All ok, set user and account properties
            return true;

        }

}

public static function set_useraccount($redirect_bool) {

    // If username session is set...
    if (isset($_SESSION['username'])) {

        UserAccount::set_username($_SESSION['username']);

        // Query Database for the rest of the data
        $pdo = new SQL();
        $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

        try {

            $query = "SELECT AccountName
                      FROM tblusers
                      WHERE UserName = :in_username";

            $stmt = $dbh->prepare($query);

            $param1 = UserAccount::get_username();

            $stmt->bindParam(':in_username', $param1, PDO::PARAM_STR);

            $stmt->execute();

            // Parse
            $row = $stmt->fetch(PDO::FETCH_BOTH);

            $stmt->closeCursor();

        }

        catch (PDOException $pe) {
            die("Error: " .$pe->getMessage());
        }

        UserAccount::set_accountname($row['AccountName']);

        try {

            $query = "SELECT a.Id, a.AccountName, a.AccountNumber, a.AccountEmail, a.AccountTel,
                             a.AccountContact, a.AccountType, a.PaymentType, u.UserName,
                             u.FullName, u.UserEmail, u.UserTel, u.UserType
                      FROM tblaccounts a JOIN tblusers u
                      ON a.AccountName = u.AccountName
                      WHERE a.AccountName = :in_accname
                      AND u.UserName = :in_username";

            $stmt = $dbh->prepare($query);

            $param2 = UserAccount::get_accountname();
            $param3 = UserAccount::get_username();

            $stmt->bindParam(':in_accname', $param2, PDO::PARAM_STR);
            $stmt->bindParam(':in_username', $param3, PDO::PARAM_STR);

            $stmt->execute();

            // Parse
            $row = $stmt->fetch(PDO::FETCH_BOTH);

        }

        catch (PDOException $pe) {
            die("Error: " .$pe->getMessage());
        }

        // Set properties and sessions variables
        UserAccount::set_id($row['Id']);
        UserAccount::set_accountname($row['AccountName']);
        UserAccount::set_accountnumber($row['AccountNumber']);
        UserAccount::set_accountemail($row['AccountEmail']);
        UserAccount::set_fullname($row['FullName']);
        UserAccount::set_accounttel($row['AccountTel']);
        UserAccount::set_accountcontact($row['AccountContact']);
        UserAccount::set_accounttype((int)$row['AccountType']);
        UserAccount::set_paymenttype((int)$row['PaymentType']);
        UserAccount::set_useremail($row['UserEmail']);
        UserAccount::set_usertel($row['UserTel']);
        UserAccount::set_usertype((int)$row['UserType']);

        if (self::verify_account()) {

            switch (UserAccount::get_paymenttype()) {
                case 0:
                $_SESSION['ua-paymenttype-asstr'] = 'Credit/Debit Card';
                self::$form_action = 'addressdetails.php';
                break;
                case 1:
                $_SESSION['ua-paymenttype-asstr'] = 'Account';
                self::$form_action = 'makebooking.php';
                break;
                case 2:
                $_SESSION['ua-paymenttype-asstr'] = 'Cash';
                self::$form_action = 'makebooking.php';
                break;
            }

            switch (UserAccount::get_usertype()) {
                case 9:
                $_SESSION['ua-usertype-asstr'] = 'Disabled/Suspended';
                break;
                case 0:
                $_SESSION['ua-usertype-asstr'] = 'Standard';
                break;
                case 1:
                $_SESSION['ua-usertype-asstr'] = 'Account Administrator';
                break;
            }

            switch (UserAccount::get_accounttype()) {
                case 9:
                $_SESSION['ua-accounttype-asstr'] = 'Disabled/Suspended';
                break;
                case 0:
                $_SESSION['ua-accounttype-asstr'] = '  ';
                break;
                case 1:
                $_SESSION['ua-accounttype-asstr'] = '(SA)';
                break;
            }

            // Redirect
            if ($redirect_bool) {
                self::redirect(true);
            }

        }

    } else {

        //self::set_loginstatus("Pre-requisite failure! Browser not supporting cookies!"); **Removed**
        $_SESSION['login-status'] = self::get_loginstatus();

        self::redirect(false);

    }

}

private static function redirect($auth_bool) {

    //parent::set_sessionstate(true); ## Set session to active -- persistance to DB

    //self::$determine_session_type(); ## Set session type --  persistance to DB

    if ($auth_bool == true) {

        $doc_root = $_SERVER['DOCUMENT_ROOT'];
        self::set_loginstatus('');
        $_SESSION['login-status'] = self::get_loginstatus();

        header("Location: ".self::$redirect_url);

    } else {

         header("Location: login.php");

    }

}

}

?> 
```

有人知道为什么它似乎只在 Firefox 中工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:15:18.927

检测登录尝试的 POST 请求的代码在哪里？

通常，当您在检测按钮或提交字段的 $_POST/$_REQUEST 变量时触发登录过程时，会发生这种情况。特别是 IE 并不总是将其与您的其他表单一起发布。

解决此问题的最佳方法是在表单中提交隐藏字段：

```
<form method = "post" >

<input type = "text" name = "username" value = "1" />
<input type = "password" name = "password" value = "1" />
<input type = "hidden" name = "login_attempt" value = "1" />

<input type = "submit" value = "submit" name = "submit" />
</form>
<?php

if($isset($_POST['login_attempt'])){

    $User->login();
}

?> 
```

尝试在一些大型浏览器中通过按回车键或单击提交来提交这样的表单，唯一不可靠的字段将是提交。

# asp.net-mvc - Spring.NET - 应用程序上下文 - 创建对象 - 共享实例

> ID：12072231
> 
> 赞同：0
> 
> 时间：2012-08-22T11:37:25.167
> 
> 标签：asp.net-mvc, spring.net

我正在使用 Spring.NET 创建我的 Command 对象（带有附加的 Advice）并在 MVC Web 应用程序中运行这些对象。

但是我观察到我回来的对象

```
IApplicationContext ctx = ContextRegistry.GetContext();
MyObject obj = (MyObject) ctx.GetObject ("MyObject"); 
```

正如我所料，它不是一个新对象，因为它已经“记住”了先前请求中的值。

更糟糕的是，我现在怀疑这个共享实例是跨应用程序的，并且由于 Web 请求的多线程性质，当我的命令执行并写入数据库时​​，这可能会导致写入的详细信息混杂在一起来自多个请求。

我的恐惧是否成立，是否有一个开关可以让我始终获得一个全新的、干净的新对象而不是共享对象？我觉得我应该仍然可以在我的 Web 应用程序中使用 Spring IOC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:21:43.817

Spring.NET Web 应用程序支持对象定义元素中的附加属性，允许您控制对象的范围：

```
<object id="myObject" type="MyType, MyAssembly" scope="application | session | request"/> 
```

请求、会话和应用程序范围仅在您使用 Web 感知 Spring IApplicationContext 实现时可用，例如 WebApplicationContext。

[http://www.springframework.net/doc-latest/reference/html/web.html#web-objectscope](http://www.springframework.net/doc-latest/reference/html/web.html#web-objectscope)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:18:30.120

回答我自己的问题，希望其他人会发现这很有用。

在一个新的 MVC 站点中使用 Spring.NET，我注意到一些奇怪的行为。我主要使用 Spring 来实现它的 AOP 能力，为此我利用它的 IOC 来创建命令对象。流程是：

控制器->“创建”命令对象：

var ctx = ContextRegistry.GetContext(); var updateContactCommand = (IUpdateCustomerCommand) ctx["UpdateCustomerCommand"]; 控制器 -> 使用新值设置命令对象

控制器 -> 执行命令对象，运行审计建议，该建议在数据库中创建一个审计行，其中包含命令详细信息

好东西。或者我是这么想的。

我有只在特定条件下设置特定字段的代码。但是当运行它时，我看到数据库总是存储最后一个输入的值，跨事务，即使条件不满足。该命令正在记住在先前事务中设置的值！

当然，它不记得值，只是当 Spring '创建'一个 updateContactCommand 时，它只是检索一个之前创建的 - 一个单例。

这对多线程 Web 应用程序有重大影响！使用相同命令对象的单独请求可能会导致一些非常不受欢迎的行为。

Spring.NET 的默认行为是创建一个单例，因此必须在对象声明的末尾添加“singleton=”false”，如下所示。但是，因为我使用的是 AOP，所以我的对象类型被声明为 ProxyFactoryObjects，此时单例无效。

答案仍在配置中，它是使用以下内容：

```
 <object id="UpdateCustomerCommand" type="DataLib.Commands.UpdateCustomerCommand, DataLib" singleton="false"/>
  <object type="Spring.Aop.Framework.AutoProxy.ObjectNameAutoProxyCreator, Spring.Aop">
    <property name="ObjectNames">
      <list>
        <value>UpdateCustomerCommand</value>
      </list>
    </property>
    <property name="InterceptorNames">
      <list>
        <value>beforeAdvice</value>
      </list>
    </property>
  </object> 
```

注意 AutoProxy.ObjectNameAutoProxyCreator 的使用。

这确实每次都给了我一个新的实例，这大概也将解决多线程问题——仍有待测试！

来源： http: [//forum.springframework.net/showthread.php?7027](http://forum.springframework.net/showthread.php?7027-Lifecycle-of-objects-how-to-get-a-new-instance-for-each-call-of-GetObject) -Lifecycle-of-objects-how-to-get-a-new-instance-for-each-call-of-GetObject ()

# php - Codeigniter 2.1，PHP - 使用 $_GET

> ID：12072232
> 
> 赞同：0
> 
> 时间：2012-08-22T11:37:26.513
> 
> 标签：php, codeigniter, codeigniter-2

我有这种网址：

> ..?brend=索尼&id=1

其中 brend 本身是可变的，它可以采用不同的值。我想知道如何获得这部分的价值（不是 brend 之后的部分，是 brend 本身的价值）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:59:20.660

简单的...

```
$brend_value = $_GET['brend']; 
```

或者它可以是

```
$brend_value = $this->input->GET['brend']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:38:15.547

使用[输入类](http://codeigniter.com/user_guide/libraries/input.html)：

```
$id = $this->input->get('id', true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:40:26.343

虽然您可以使用框架的功能，但使用 CodeIgniter 并不会阻止您仅使用`$_GET['brend'];`

# c# - Win 8 应用程序中的 FileIO

> ID：12072235
> 
> 赞同：1
> 
> 时间：2012-08-22T11:37:40.487
> 
> 标签：c#, windows-8

我必须将我的应用程序事件和异常记录在文档文件夹中 win 8 应用程序的文件中

```
Windows.Storage.StorageFolder localFolder = KnownFolders.DocumentsLibrary; 
```

问题是当我一个接一个地调用 WriteToFile 函数时，由于该文件仍在使用中，因此出现访问被拒绝异常。有没有办法使这项工作

```
public async void WriteToFile(string log)
            {
                try
                {

                    StorageFile sampleFile = await localFolder.CreateFileAsync("dataFile.txt", CreationCollisionOption.OpenIfExists);
                    //StorageFile sampleFile = await localFolder.GetFileAsync("dataFile.txt");
                    IRandomAccessStream writeStream = await sampleFile.OpenAsync(FileAccessMode.ReadWrite);
                    IOutputStream outputStream = writeStream.GetOutputStreamAt(writeStream.Size);
                    DataWriter dataWriter = new DataWriter(outputStream);
                    dataWriter.WriteString(log);

                    dataWriter.StoreAsync().AsTask().Wait();
                    outputStream.FlushAsync().AsTask().Wait();

                }
                finally
                {

                }

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:02:35.723

看起来您在写操作后忘记关闭 Stream 了。该文件将被锁定，直到您关闭 Stream。

```
dataWriter.Close(); 
```

[MSDN 链接](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.streams.datawriter.close)

或像这样使用“使用”关键字：

```
 using(DataWriter dataWriter = new DataWriter(outputStream)) 
 {
       dataWriter.WriteString(log);
       dataWriter.StoreAsync().AsTask().Wait(); 
 } 
```

检查文件是否被锁定是个好主意，这样您就不会遇到异常。

[如何检查锁定的文件](https://stackoverflow.com/questions/1304/how-to-check-for-file-lock-in-c)

问候，希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:50:56.870

你可以尝试以下

```
dataWriter.Dispose();
await outputStream.FlushAsync();
await stream.FlushAsync(); 
```

# c# - 链接基本构造函数时，如何在重载中重用初始化代码

> ID：12072241
> 
> 赞同：5
> 
> 时间：2012-08-22T11:38:04.323
> 
> 标签：c#, .net

请参阅下面评论中嵌入的问题。

```
public class CustomException : Exception
{
    private readonly string _customField;

    public CustomException(string customField, string message)
        : base(message)
    {
        // What's the best way to reuse the customField initialization code in the
        // overloaded constructor? Something like this(customField)
    }

    public CustomException(string customField)
    {
        _customField = customField;
    }
} 
```

我愿意考虑重用基本构造函数并最小化初始化代码的替代实现。我想保持 _customField 只读，如果我提取单独的初始化方法，这是不可能的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T11:39:52.560

```
public CustomException(string customField) : this(customField,"")
{
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T11:48:26.377

将其分解为一个单独的方法，并从两个构造函数中调用该方法。

```
public class CustomException : Exception
{
    private readonly string _customField;

    public CustomException(string customField, string message)
        : base(message)
    {
        Init(out _customField, customField);
    }

    public CustomException(string customField)
        : base()
    {
        Init(out _customField, customField);
    }

    private Init(out string _customField, string customField)
    {
        _customField = customField;
    }
} 
```

# r - 计算按列值链接的项目对

> ID：12072242
> 
> 赞同：5
> 
> 时间：2012-08-22T11:38:10.337
> 
> 标签：r, aggregation

我正在努力解决 R 中的这个问题。我有这样的数据：

```
item   id
1      500
2      500
2      600
2      700
3      500
3      600

data.frame(item = c(1, 2, 2, 2, 3, 3),
           id = c(500, 500, 600, 700, 500, 600)) 
```

我想计算一对项目链接到同一个id的次数。所以我想要这个输出：

```
item1    item2    count
    1        2        1
    2        3        2
    1        3        2 
```

我尝试使用以下命令来解决此问题：

```
x_agg = aggregate(x, by=list(x$id), c) 
```

进而

```
x_agg_id = lapply(x_agg$item, unique) 
```

认为我可以计算每个项目的出现。但是该`by`函数似乎创建了一个列表对象，我不知道如何操作。我希望有一个更简单的方法......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:47:32.837

```
# your data
df<-read.table(text="item   id
1      500
2      500
2      600
2      700
3      500
3      600",header=TRUE)

library(tnet)
item_item<-projecting_tm(df, method="sum")
names(item_item)<-c("item1","item2","count")

item_item

  #item1 item2 count
#1     1     2     1
#2     1     3     1
#3     2     1     1
#4     2     3     2
#5     3     1     1
#6     3     2     2 
```

**编辑**

你有多少个id和item？你总是可以重命名的东西。例如

```
numberitems<-length(unique(df$id))+9000
items<-data.frame(item=unique(df$item),newitems=c(9000:(numberitems-1)))
numberids<-length(unique(df$id))+1000
ids<-data.frame(id=unique(df$id),newids=c(1000:(numberids-1)))
newdf<-merge(df,items,by="item")
newdf<-merge(newdf,ids,by="id")
DF<-data.frame(item=newdf$newitems,id=newdf$newids)

library(tnet)
item_item<-projecting_tm(DF, method="sum")
names(item_item)<-c("item1","item2","count") 
```

然后合并回原来的名字......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T17:06:10.843

我建议采用这种方法，因为从您的示例输出中不清楚来自 @user1317221_G 的答案是否正是您正在寻找的。在该示例中，该组合`2 3`被计数***4***次，两次为`item1 = 2, item2 = 3`，两次为`item1 = 3, item2 = 2`。

我会尝试这个`combn`功能。它不会为您提供与您正在寻找的*完全相同*的输出，但可能可以针对该目的进行调整。

这是一个例子。

1.  编写一个基本函数，它将生成我们给它的任何组合。

    ```
    myfun = function(x) { apply(combn(x, 2), 2, paste, sep="", collapse="") } 
    ```

2.  `split()`您的`item`数据列，`id`并用于`lapply`在其中生成组合`id`。

    ```
    temp = split(df$item, df$id)
    # Drop any list items that have only one value--combn won't work there!
    temp = temp[-(which(sapply(temp,function(x) length(x) == 1),
                        arr.ind=TRUE))]
    temp1 = lapply(temp, function(x) myfun(unique(x))) 
    ```

3.  使用`unlist`和 然后`table`将每个组合的频率制成表格。

    ```
    table(unlist(temp1))
    # 
    # 12 13 23 
    #  1  1  2 
    ```

`data.frame`如果你愿意，你可以拥有一个。

```
data.frame(table(unlist(temp)))
#   Var1 Freq
# 1   12    1
# 2   13    1
# 3   23    2 
```

## 更新

如前所述，使用更多的肘部油脂，您也可以使用此方法来匹配您想要的输出：

```
myfun = function(x) { apply(combn(x, 2), 2, paste, sep="", collapse=",") }
temp = split(df$item, df$id)
temp = temp[-(which(sapply(temp,function(x) length(x) == 1),
                    arr.ind=TRUE))]
temp1 = lapply(temp, function(x) myfun(unique(x)))
temp1 = data.frame(table(unlist(temp1)))
OUT = data.frame(do.call(rbind, 
                         strsplit(as.character(temp1$Var1), ",")),
                 temp1$Freq)
names(OUT) = c("item1", "item2", "count")
OUT
#   item1 item2 count
# 1     1     2     1
# 2     1     3     1
# 3     2     3     2 
```

# javascript - Jquery 数组 - 设置和加载值

> ID：12072244
> 
> 赞同：1
> 
> 时间：2012-08-22T11:38:13.780
> 
> 标签：javascript, jquery, html, dom

我有 2 个 div：

```
<div id="player" class="setPlayers">value1</div>
<div id="player2" class="setPlayers">value2</div> 
```

我要做的就是将 div 的 value1 和 value2 设置为一个数组，以便以后读取；我尝试了这段代码，但不起作用：

```
var array = new Array();

$.each($('.setPlayers'), function(key, object) {
    console.log(index + ':' + value);
    array.push(value);
    alert(value);
});

$.each(array, function(index, value) {
    console.log(index + ':' + value);
    console.log(index + ':' + $(this).val());
});​ 
```

你怎么了？，干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T11:46:59.667

使用您的代码作为开始，我想出了：

```
$(function(){
  var array = [];

  $('.setPlayers').each(function(index) {
      console.log(index + ':' + $(this).text());
      array.push($(this).text());
      alert($(this).text());
  });

  $.each(array, function(index) {
      console.log(index + ':' + this);
      console.log(index + ':' + this);
  });
}); 
```

​</p>

很少有我喜欢的警报和调试。

如果您只想填充数组，则可以这样做：

```
$(function(){
  var array = $('.setPlayers').map(function() { return $(this).text()); }).get();
});
​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T11:41:27.583

试试这个（见演示：http: [//jsfiddle.net/GcjgH/](http://jsfiddle.net/GcjgH/)）：

```
var array = $('.setPlayers').map(function() {
  return $(this).text();
}).get();

alert(array[0]);
alert(array[1]);
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:39:47.647

正确的语法是`$('.setPlayers').each(function(){ ... });`

在问题的背景下：

```
$('.setPlayers').each(function(){
     console.log($(this).attr("id")+':'+$(this).text());
     array.push($(this).text());
     alert($(this).text());
});

for (var i=0; i<array.len; i++){
    console.log(arr[i]);
} 
```

等等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T11:40:44.723

这应该有效：

```
var array = new Array();
$(".setPlayers").each(function() {
    array.push($(this).text());
}); 
```

# iphone - 如何在工具栏上对齐 UIBarButtonItem？

> ID：12072248
> 
> 赞同：0
> 
> 时间：2012-08-22T11:38:24.197
> 
> 标签：iphone, objective-c, cocoa-touch

我添加了一个工具栏，我正在向该工具栏添加一个按钮。无论我为该按钮设置的框架如何，该按钮都会自动向左对齐。我希望该按钮成为工具栏的中心。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:40:51.617

在按钮左侧（和右侧）的选项卡栏中添加一个灵活的空间。

```
UIBarButtonItem *flexible = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace 
                            target:nil action:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:41:21.107

与按钮一起，在按钮的右侧和左侧添加一个灵活的空间项

# php - 使用 redis 和 php 发送电子邮件

> ID：12072249
> 
> 赞同：1
> 
> 时间：2012-08-22T11:38:26.037
> 
> 标签：php, redis

嘿伙计们，我是 php 的 redis 新手。我目前正在使用 symfony。我写了一个简单的表格来接受数据并发送邮件。这是我的控制器

```
namespace Ens\NewBundle\Controller;
use Ens\NewBundle\Entity\Product;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\Form\FormBuilder;

require '/var/www/predis/autoload.php';
        \Predis\Autoloader::register();

require_once('Services/Notification.php');

use Symfony\Bundle\FrameworkBundle\Controller\Controller;

class DefaultController extends Controller
{ 
```

启动时执行的功能。

```
 public function indexAction()
    {
            $x=array('to'=>'ucerturohit@gmail.com','name'=>'Rohitashv singhal');

$client = new \Predis\Client();

//$client->lpush('email','ucerturohit@gmail.com');

//$u=$client->blpop('emailnew',0);

//var_dump($u);

        $product=new Product();
        $product->setName('rohit');
        $product->setPass('rohit');

        $form=$this->createFormBuilder($product)
        ->add('name','text')
        ->add('pass','password')
        ->getForm();
    $z=notification_on_signup($x);

        if($z)
               $name='success';
        else
               $name='failed';

    return $this->render('EnsNewBundle:Email:ind.html.twig',
    array('form'=>$form->createView(),'name'=>'rohit'));

} 
```

}

这里的 notification_on_signup 函数是在另一个发送邮件的函数中定义的。当我单击提交按钮时，我再次调用相同的函数。我想要的是，当我提交表单时，表单应该首先出现，并且电子邮件功能`notification_on_signup`应该在后台运行。我应该如何使用redis在后台发送功能。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T13:05:19.387

如果我正确理解您的问题，我认为这与redis没有任何关系。相反，您必须使用作业服务器，例如[gearman](http://gearman.org/)

# python - 无法获取通过 exec 在 Python 中使用检查“声明”的方法的源代码

> ID：12072252
> 
> 赞同：8
> 
> 时间：2012-08-22T11:38:29.647
> 
> 标签：python, reflection

以下代码引发异常：

```
import inspect

def work():
    my_function_code = """def print_hello():
                              print('Hi!')
                       """
    exec(my_function_code, globals())
    inspect.getsource(print_hello) 
```

上面的代码抛出异常 IOError。如果我在不使用 exec 的情况下声明函数（如下所示），我可以获得它的源代码。

```
import inspect

def work():
    def print_hello():
        print('Hi!')
    inspect.getsource(print_hello) 
```

我有充分的理由做这样的事情。

有解决方法吗？有可能做这样的事情吗？如果不是，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T12:16:18.047

在阅读@jsbueno 的答案后，我刚刚查看了[inspect.py文件，这就是我发现的：](http://www.opensource.apple.com/source/python/python-3/python/Lib/inspect.py)

```
def findsource(object):
    """Return the entire source file and starting line number for an object.

    The argument may be a module, class, method, function, traceback, frame,
    or code object.  The source code is returned as a list of all the lines
    in the file and the line number indexes a line in that list.  An **IOError
    is raised if the source code cannot be retrieved.**"""
    try:
        file = open(getsourcefile(object))  
    except (TypeError, IOError):
        raise IOError, 'could not get source code'
    lines = file.readlines()               #reads the file
    file.close() 
```

它清楚地表明它试图打开源文件然后读取其内容，这就是为什么在`exec`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T11:54:00.723

这甚至是不可能的。python 获取它正在运行的任何代码的源代码的方法是将源代码文件加载到磁盘上。它通过查看`__file__`代码模块上的属性来定位该文件。

用于通过“exec”或“compiled”生成代码对象的字符串不会被这些调用产生的对象保留。

如果您`__file__`在生成的代码的全局字典上设置一个变量，然后在调用`inspect.getsource`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-21T21:29:11.173

这个解决方案当时并不存在，但从 Python 3.4 开始就存在了！

您现在可以修补 linecache.getlines 以使 inspect.getsource() 与来自 exec() 的代码一起工作。当您查看错误堆栈时，它会在 inspect.py 中的 findsource() 处停止。当你查看[findsource() 的代码时](https://github.com/python/cpython/blob/3.10/Lib/inspect.py#L932)，你会看到一个提示：

```
# Allow filenames in form of "<something>" to pass through.
# `doctest` monkeypatches `linecache` module to enable
# inspection, so let `linecache.getlines` to be called. 
```

然后，如果您查看[此测试功能](https://github.com/python/cpython/blob/3.10/Lib/test/test_inspect.py#L568)，您将了解它的含义。您可以临时更改核心 Python 函数之一以满足您的目的。

无论如何，这是从 Python 3.4 开始的解决方案：

```
import linecache
import inspect

def exec_getsource(code):
    getlines = linecache.getlines
    def monkey_patch(filename, module_globals=None):
        if filename == '<string>':
            return code.splitlines(keepends=True)
        else:
            return getlines(filename, module_globals)
    linecache.getlines = monkey_patch

    try:
        exec(code)
        #you can now use inspect.getsource() on the result of exec() here

    finally:
        linecache.getlines = getlines 
```

# php - preg_match_all()：编译失败：在偏移量 203 runescape 处没有可重复的内容

> ID：12072253
> 
> 赞同：0
> 
> 时间：2012-08-22T11:38:31.123
> 
> 标签：php, preg-match, preg-match-all

有人可以告诉我为什么这行不通吗？

我收到错误“preg_match_all(): Compilation failed: nothing to repeat at offset 203”

```
$html = file_get_contents('http://services.runescape.com/m=itemdb_rs/results.ws?query='.urlencode($term).'&price='.$pricerange.'&members='.$members);
$html = str_replace(array("\r","\n"), "", $html);
$regexp = '#<tr data-item-id="(.*?)"><td class="(.*?)"><img src="(.*?)" alt="(.*?)"><a href="(.*?)">(.*?)</a></td><td><img src="(.*?)" alt="(.*?)" title="(.*?)"></td><td class="(.*?)">(.*?)</td><td class="(.*?)">(.?*)</td></tr>#';
preg_match_all($regexp, $html, $matches);
print_r($matches); 
```

将在 file_get_contents 中使用的示例 url

```
http://services.runescape.com/m=itemdb_rs/results.ws?query=gold%20bar&price=all&members=no 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:06:42.107

我建议您的错误就在这里：

```
<td class="(.*?)">(.?*)</td></tr># 
```

替换为

```
<td class="(.*?)">(.*?)</td></tr># 
```

# android - 在前台杀死活动

> ID：12072255
> 
> 赞同：6
> 
> 时间：2012-08-22T11:38:41.123
> 
> 标签：android, android-intent, android-activity

我正在编写一个应用程序，遇到一个问题。我有三个活动 A、B 和 C。当我从活动 A 到 B 和 B 到 C 时，如果我按下设备上的菜单按钮。我的应用程序进入后台状态。当我重新打开应用程序时，它会显示 Activity C。我希望当我重新打开应用程序时，它应该显示 Activity A 而不是 Activity 堆栈中的任何其他活动。我已经完成了一些活动生命周期方法并尝试覆盖它。我已经覆盖了 onStart() ，onPause() 方法和完成活动 C 以及活动 B，我面临的问题是当我从活动 C 转到活动 D 活动时C 完成所有后台活动 nm 在活动 D 完成时无法返回活动 C。谁能帮助我如何在恢复应用程序时显示特定活动？提前谢谢。

这是我的 manifest.xml

```
<uses-sdk android:minSdkVersion="4" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<application    
              android:icon="@drawable/icon"
              android:label="@string/app_name"
              android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >

    <activity   
        android:label="@string/app_name"
        android:name="com.buttonpay.Login"
        android:screenOrientation="portrait"
        android:clearTaskOnLaunch="true" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

     <activity android:name=".ButtonPayActivity"
                android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
                android:screenOrientation="portrait"/>    

    <!-- HomeTab Activity -->

            <activity android:name="com.buttonpay.home.Utilities"
                        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
                        android:screenOrientation="portrait"/>

            <activity android:name="com.buttonpay.home.Top_up"
                        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
                        android:screenOrientation="portrait"/>
            <activity android:name="com.buttonpay.home.HomeScreen"
                        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
                        android:screenOrientation="portrait"/>

            <activity android:name="com.buttonpay.home.MyAccount"
                        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
                        android:screenOrientation="portrait"/>
             <activity android:name="com.buttonpay.home.TransactionHistory"
                        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
                        android:screenOrientation="portrait"/>
              <activity android:name="com.buttonpay.home.TransactionDetailsActivity"
                        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
                        android:screenOrientation="portrait"/>
                <activity android:name="com.buttonpay.home.TransactionList"
                        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
                        android:screenOrientation="portrait"/>
               <activity android:name="com.buttonpay.home.BusinessSummaryActivity"
                        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
                        android:screenOrientation="portrait"/>
               <activity android:name=".home.MobileMoneyActivity"
                        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
                        android:screenOrientation="portrait"/>

     <!-- balance tab Activity -->
            <activity android:name="com.buttonpay.balance.BalanceTab"
                        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
                        />

     <!-- Favouritetab Activity -->
             <activity android:name="com.buttonpay.favourite.FavouriteTab"
                        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
                        />

  <!-- ComingSoon -->
<activity android:name="com.buttonpay.home.ComingSoon"
                        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
                        android:screenOrientation="portrait"/>

 <!-- Settings -->
<activity android:name="com.buttonpay.settings.SettingList"
                        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen"
                        android:screenOrientation="portrait"/>

</application> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:46:02.367

在清单中，在您的**根活动**上设置它（这是在您的应用程序中启动的第一个活动，具有 ACTION_MAIN 和 CATEGORY_LAUNCHER 的活动）：

```
android:clearTaskOnLaunch="true" 
```

你不需要做任何其他事情。没有覆盖生命周期方法。

**编辑在一些经验实验后添加附加信息：**

您需要确保您的**根活动**始终位于任务的活动堆栈中以使其工作。这意味着您不能调用`finish()`根**活动**，直到用户真正想要退出您的应用程序（即：当他在您的**根活动**中按下 BACK 键时）。

在您的示例中，您有一个 LoginActivity、MenuActivity 和 DescriptionActivity，而 LoginActivity 是**根活动**。当 LoginActivity 启动 MenuActivity 时，它不能自行调用`finish()`。在这种情况下，当用户在 MenuActivity 中按下 BACK 键时，它将返回到 LoginActivity。如果这不是您想要的，那么您需要在已经启动 MenuActivity 的 LoginActivity 中设置一个标志，当`onResume()`被调用时，您可以检查该标志以确定您是否从 MenuActivity 返回，在这种情况下您可以马上打电话`finish()`。

# iphone - 将标签作为子视图添加到 UIView

> ID：12072257
> 
> 赞同：5
> 
> 时间：2012-08-22T11:38:45.060
> 
> 标签：iphone, uiview, uilabel

谁能告诉我如何为我添加到 UITableView Cell 上的视图添加两个标签。我已经将该视图创建为具有某些名称的 UIView。我在 UIView 类中创建了两个标签，并为标签设置框架，设置文本和etc.my 的问题是在 tableview 单元格中获取该视图，但不是那些标签。

```
 countLabel.text = @"4";
    countLabel.frame=CGRectMake(275, 10, 20, 15);
    countLabel.font=[UIFont boldSystemFontOfSize:15.0];
    countLabel.textColor=[UIColor colorWithWhite:0.0 alpha:0.5];
    countLabel.backgroundColor=[UIColor clearColor];

    hrsLabel.text = @"Hours";
    hrsLabel.frame=CGRectMake(260, 30, 45, 15);
    hrsLabel.font=[UIFont boldSystemFontOfSize:15.0];
    hrsLabel.textColor=[UIColor colorWithWhite:0.0 alpha:0.5];
    hrsLabel.backgroundColor=[UIColor clearColor]; 
```

这只是我正在设置框架，文本到 UIView 中的标签。

```
GreenView *greenView = [[GreenView alloc] initWithFrame:CGRectMake(250, 8, 60, 50)];
greenView.backgroundColor = [UIColor colorWithRed:0.000 green:0.690 blue:0.313 alpha:0.5];
[cell.contentView addSubview:greenView]; 
```

在这里，我将该 UIView 添加到 tableview 单元格。我不知道如何将这些标签添加到我的 UIView。请帮我。

抱歉，如果英语有任何错误。任何人请帮助我。提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T12:30:59.650

**创建 label 和 label1 之类的标签并添加到 UIView**

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 30, 250, 15)];

[label setText:@"Hello"];

UILabel *label1 = [[UILabel alloc] initWithFrame:CGRectMake(0, 50, 250, 15)];

[label1 setText:@"Hello1"];

UIView *myView = [UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 100)];

[myView addSubview:label];
[myView addSubview:label1]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T11:59:04.090

```
countLabel.text = @"4";
countLabel.frame=CGRectMake(275, 10, 20, 15);
countLabel.font=[UIFont boldSystemFontOfSize:15.0];
countLabel.textColor=[UIColor colorWithWhite:0.0 alpha:0.5];
countLabel.backgroundColor=[UIColor clearColor];

hrsLabel.text = @"Hours";
hrsLabel.frame=CGRectMake(260, 30, 45, 15);
hrsLabel.font=[UIFont boldSystemFontOfSize:15.0];
hrsLabel.textColor=[UIColor colorWithWhite:0.0 alpha:0.5];
hrsLabel.backgroundColor=[UIColor clearColor];

    [greenView  addSubview: countLabel];
    [greenView  addSubview: hrsLabel];
    [cell.contentview addSubview:greenView];

    return cell; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T11:45:02.313

像这样将标签添加到**GreeView**，

例如：

```
 GreenView *greenView = [[GreenView alloc] initWithFrame:CGRectMake(250, 8, 60, 50)];
    greenView.backgroundColor = [UIColor colorWithRed:0.000 green:0.690 blue:0.313 alpha:0.5];

    countLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 20, 15)];
    countLabel.text = @"4"; 
    countLabel.font=[UIFont boldSystemFontOfSize:15.0]; 
    countLabel.textColor=[UIColor whiteColor];
    countLabel.backgroundColor=[UIColor clearColor]; 
    [greenView addSubview:countLabel];

    hrsLabel = [[UILabel alloc] initWithFrame:CGRectMake(40, 40, 45, 15)];
    hrsLabel.text = @"Hours";
    hrsLabel.font=[UIFont boldSystemFontOfSize:15.0]; 
    hrsLabel.textColor=[UIColor whiteColor]; 
    hrsLabel.backgroundColor=[UIColor clearColor];
    [greenView addSubview:hrsLabel];

    [cell.contentView addSubview:greenView]; 
```

希望这会帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T12:45:11.850

```
countLabel.text = @"4";
countLabel.frame=CGRectMake(275, 10, 20, 15);
countLabel.font=[UIFont boldSystemFontOfSize:15.0];
countLabel.textColor=[UIColor colorWithWhite:0.0 alpha:0.5];
countLabel.backgroundColor=[UIColor clearColor];

hrsLabel.text = @"Hours";
hrsLabel.frame=CGRectMake(260, 30, 45, 15);
hrsLabel.font=[UIFont boldSystemFontOfSize:15.0];
hrsLabel.textColor=[UIColor colorWithWhite:0.0 alpha:0.5];
hrsLabel.backgroundColor=[UIColor clearColor];

[self addSubView:countLabel];
[self addSubView:hrsLabel]; 
```

最后我得到了上面的答案。非常感谢您的所有回复。

# objective-c - uiviewcontroller 之间的参数

> ID：12072259
> 
> 赞同：0
> 
> 时间：2012-08-22T11:38:50.487
> 
> 标签：objective-c, uiview, uiviewcontroller

在上一个按钮中按下按钮时，我打开了一个 UIViewController：

在第一个：

```
-(IBAction)info:(id)sender{

MapInfo *infoView = [[MapInfo alloc] initWithNibName:nil bundle:nil];
[self presentModalViewController:infoView animated:YES];
} 
```

我想向 MapInfo 发送两个参数，但我找不到怎么做。

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:44:46.220

您可以编写自定义 init 方法并使用它来代替`initWithNibName:bundle:`

```
- (id) initWithParameter1:(id)parameter1 parameter2:(id) parameter2:(id)parameter
{
    if (self = [super initWithNibName:nil bundle: nil]){
        // custom initialization here
    }
    return self;
} 
```

或者您可以为您的参数添加属性`MapInfo`并在呈现之前设置它们：

```
MapInfo *infoView = [[MapInfo alloc] initWithNibName:nil bundle:nil];
infoView.parameter1 = parameter1;
infoView.parameter2 = parameter2;
[self presentModalViewController:infoView animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:47:08.247

您应该阅读有关应用程序架构设计（设计模式、oop 等）的更多信息。

我会这样做：你有 Model 对象和两个控制器，每个控制器都可以访问 Model 实例。然后一个控制器更改模型中的数据并呈现另一个控制器。因此，另一个控制器也可以访问新数据。

阅读资源：

*   [http://www.amazon.com/Pro-Objective-C-Design-Patterns-iOS/dp/1430233303/ref=sr_1_5?ie=UTF8&qid=1345636110&sr=8-5&keywords=cocoa+design+pattern](https://rads.stackoverflow.com/amzn/click/com/1430233303)
*   [https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/OOP_ObjC/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/OOP_ObjC/Introduction/Introduction.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:48:16.893

使用参数在 MapInfo 中创建自定义方法

```
 //assuming you want NSString for parameter type
-(id)initWithParameterOne:(NSString*)one parameterTwo:(NSString*)two
{
    if (self = [super init]) {
       .......
    }

    return self;
} 
```

不要忘记添加`-(id)initWithParameterOne:(NSString*)one parameterTwo:(NSString*)two;`MapInfo 标题

你可以这样称呼它

```
-(IBAction)info:(id)sender{

MapInfo *infoView = [[MapInfo alloc] initWithParameterOne:dataOne parameterTwo:dataTwo];
[self presentModalViewController:infoView animated:YES];
} 
```

# c - 任何可用于将 c99 样式注释// 转换为 c 样式注释 /* ..*/ 到整个项目的工具/脚本？

> ID：12072264
> 
> 赞同：4
> 
> 时间：2012-08-22T11:39:05.483
> 
> 标签：c, linux, shell, comments

`c99`任何可用于将样式注释`//`转换为`c`样式注释`/* ..*/`到整个项目的工具/脚本？

如果我有这样的代码

```
// printf("stcakoverflow"); 
```

然后它将被转换为

```
 /* printf("stcakoverflow"); */ 
```

并且

```
int temp // this is temp varialbe 
```

转换成

```
int temp /* this is temp varialbe */ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T11:45:16.773

对于命令行示例，请尝试以下内容：

```
echo "int temp; // this is temp variable" | sed 's@//\(.*\)$@/*\1 */@' 
```

上述结果

```
国际温度；/* 这是临时变量 */

```

对于一个真实的文件，您可以使用例如`cat`而不是`echo`，它是管道`sed`和`sed`执行“魔术”的命令。

**编辑：**如何处理大量文件

可能是这样的：

```
cd /your/source/directory
mkdir converted-files
for f in *.cpp; do
    cat $f | sed 's@//\(.*\)$@/*\1 */@' > converted-files/$f
done 
```

现在所有转换的源文件都将在一个文件夹`converted-files`中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T11:52:40.980

对于喜欢使用 IDE/Editor 的人来说，使用 Notepad++（你也可以在 Linux 上用 Wine 运行它）正则表达式匹配和替换你可以对一堆文件进行匹配。

**查找内容**： `//(.*?)$`

**替换为**：`/\*\1\*/`

![在此处输入图像描述](../Images/186f72c4eeff7a734b6e023195dcfd09.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-22T12:11:00.270

> ccmtcnvt - 将 C++ 注释转换为 C 注释

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T13:12:41.127

在约阿希姆·皮勒博格的帮助下

我做了这个

```
find /path/to/project/ -type f -exec sed -i  's@//\(.*\)$@/*\1 */@' {} \; 
```

在这里它工作正常..但它适用于所有文件。

如果您希望它仅适用于 .c 和 .h 文件，那么

```
find /path/to/project/ -name '*.c' -o -name '*.h' -exec sed -i  's@//\(.*\)$@/*\1 */@' {} \; 
```

# c++ - 用于创建、可视化和算法操作数据结构的 C++ 库

> ID：12072268
> 
> 赞同：3
> 
> 时间：2012-08-22T11:39:09.320
> 
> 标签：c++, data-structures, tree, mesh

我需要一些 C++ 库，它可以让我创建树、网格等数据结构。一旦创建了树或网格，我应该能够将其可视化。并且一旦创建，我应该能够将我的算法插入结构中，以执行各种任务，例如找到最佳路径等等。

是否有一个已经可用的 c++ 库，还是我必须自己经历创建数据结构的痛苦？

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:44:40.647

不知道你说的可视化是什么意思。您通常需要为可视化部分使用一些 GUI 库。和数据结构。STL，boost 具有您甚至需要的各种数据结构。STL中有堆、链表、链表结构，boost中有循环缓冲区。你可以很容易地和他们一起玩。

# php - mysql 值 php 上的 href

> ID：12072273
> 
> 赞同：0
> 
> 时间：2012-08-22T11:39:18.840
> 
> 标签：php, mysql

您好，我的想法是显示我的数据库中的值到目前为止我一直在使用此代码。

```
 <td><?php echo @$get_display->student_id ?></td> 
```

现在我接下来要做的是让 student_id 值能够通过 href 将用户重定向到我的搜索页面，并且搜索页面能够检索 student_id，因此它可能能够搜索学生到目前为止这是我的代码。在我声明了我的 SQL 选择语句之后。

```
 $student_id= $_GET['student_id']; 
```

这是我到搜索页面的 href 代码，但我无法使其正常工作。

```
 <td  class="text"><a href="search_enroll.php?ID=<?php .$student_id ?>">
                    <?php echo @$get_display->student_id ?></a></td> 
```

非常感谢任何形式的帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:40:58.820

试试这个

```
<td class="text"><a href="search_enroll.php?ID=<?=$student_id; ?>"><?php echo $get_display->student_id ?></a>
 </td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:52:22.070

您的 code.dot(.) 中的语法错误不允许 bofore 变量 $student_id。我已经修改了你的代码检查它

```
<td  class="text"><a href="search_enroll.php?ID=<?php echo $student_id; ?>">
                    <?php echo @$get_display->student_id; ?></a></td> 
```

# tridion - 如何获取类别内的关键字？

> ID：12072275
> 
> 赞同：5
> 
> 时间：2012-08-22T11:39:23.853
> 
> 标签：tridion, tridion-2011

如何使用 coreservice 获取特定类别中的关键字？

我正在研究这个`CategoryData`类，但我没有看到任何相关的方法或属性`Keyword`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-22T11:56:59.843

在类别中获取关键字类似于在文件夹中获取组件。因此，您必须以`GetListXml`类别为主题进行调用。

```
var filter = new OrganizationalItemItemsFilterData();
var category = "tcm:1-2-512";
var keywords = client.GetListXml(category, filter);
foreach (var keywordElement in keywords.Descendants())
{
    ...
} 
```

* * *

***一些背景知识***：核心服务是一个面向服务的 API，所以没有一个`...Data`对象有任何方法来加载附加信息。相反，所有数据访问都通过`CoreServiceClient`，然后返回包含...数据的数据对象。

对于具有 Java 背景的人来说，这些可能更熟悉为 DAO/DTO、数据访问对象和数据传输对象：`CoreServiceClient`即 DAO，`...Data`对象即 DTO。

# c# - 同时读取 FromUri 和 FromBody

> ID：12072277
> 
> 赞同：27
> 
> 时间：2012-08-22T11:39:36.813
> 
> 标签：c#, asp.net, asp.net-web-api, http-post, frombodyattribute

我在 web api 中有一个新方法

```
[HttpPost]
public ApiResponse PushMessage( [FromUri] string x, [FromUri] string y, [FromBody] Request Request) 
```

请求类就像

```
public class Request
{
    public string Message { get; set; }
    public bool TestingMode { get; set; }
} 
```

我正在使用 PostBody 对 localhost/Pusher/PushMessage?x=foo&y=bar 进行查询：

```
{ Message: "foobar" , TestingMode:true } 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-22T11:48:05.203

帖子正文通常是这样的 URI 字符串：

```
Message=foobar&TestingMode=true 
```

您必须确保 HTTP 标头包含

```
Content-Type: application/x-www-form-urlencoded 
```

**编辑**：因为它仍然无法正常工作，所以我自己创建了一个完整的示例。
它打印正确的数据。
我还使用了 .NET 4.5 RC。

```
// server-side
public class ValuesController : ApiController {
    [HttpPost]
    public string PushMessage([FromUri] string x, [FromUri] string y, [FromBody] Person p) {
        return p.ToString();
    }
}

public class Person {
    public string Name { get; set; }
    public int Age { get; set; }

    public override string ToString() {
        return this.Name + ": " + this.Age;
    }
}

// client-side
public class Program {
    private static readonly string URL = "http://localhost:6299/api/values/PushMessage?x=asd&y=qwe";

    public static void Main(string[] args) {
        NameValueCollection data = new NameValueCollection();
        data.Add("Name", "Johannes");
        data.Add("Age", "24");

        WebClient client = new WebClient();
        client.UploadValuesCompleted += UploadValuesCompleted;
        client.Headers["Content-Type"] = "application/x-www-form-urlencoded";
        Task t = client.UploadValuesTaskAsync(new Uri(URL), "POST", data);
        t.Wait();
    }

    private static void UploadValuesCompleted(object sender, UploadValuesCompletedEventArgs e) {
        Console.WriteLine(Encoding.ASCII.GetString(e.Result));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:07:28.610

Web API 使用命名规则。帖子的方法应该以 Post 开头。

您应该将 PushMessage 重命名为方法名称 PostMessage。

此外，web api 默认侦听（取决于您的路由）“api/values/Message”而不是 Pusher/Pushmessage。

> [HttpPost] 属性不是必需的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:40:10.827

您可以使用以下代码在请求正文中发布 json：

```
var httpClient = new HttpClient();
httpClient.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

Request request = new Request();
HttpResponseMessage response = httpClient.PostAsJsonAsync("http://localhost/Pusher/PushMessage?x=foo&y=bar", request).Result;

//check if (response.IsSuccessStatusCode)
var createResult = response.Content.ReadAsAsync<YourResultObject>().Result; 
```

# sencha-touch - Sencha Touch 2如何清理资源

> ID：12072279
> 
> 赞同：7
> 
> 时间：2012-08-22T11:39:47.280
> 
> 标签：sencha-touch, sencha-touch-2

我开始使用 Sencha Touch 2，我只是想知道它（如果有的话）如何处理资源清理。

尤其是：

*   想象一下，我们有一堆由 url 重定向触发的控制器。这些 Controller 实例是否会被缓存，或者 Sencha 是否会在每次需要调用控制器上的方法时创建新实例

*   视图也一样。sencha 是缓存视图还是在每次需要再次渲染它们时重新创建它们。视图究竟是什么时候被销毁的（如果是的话）？

*   我可以控制煎茶如何处理这些事情吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T11:51:07.387

为了回答您的问题，

1.  Sencha 只创建每个控制器的一个实例。所以，我真的认为你不需要担心控制器实例。让 Sencha 来处理。

2.  清理实际上应该使用视图来完成，因为视图的数量和它们的复杂性与性能密切相关。

Sencha 并没有专门清理它的资源——开发人员必须明确地处理 DOM 清理（除了 Javascript 自己的垃圾收集机制）。因此，开发人员需要决定何时创建视图，是将其保存在 DOM 中以供将来使用，还是在隐藏后立即销毁它。让我举几个例子：

**一个。**

> 假设单击一个按钮，用户打开一个 INFO 弹出窗口，其中显示有关页面的一些信息。一旦用户阅读了信息，他就会关闭弹出窗口。现在，从用户的角度来看，用户重新打开弹出窗口的可能性很小。因此，最好是在用户关闭弹出窗口后立即将其从 DOM 中删除。无论如何，如果用户想重新打开它，请重新创建弹出窗口并显示它。

**B.**

> 同样假设用户在登录页面并登录到应用程序。用户在应用程序中几乎不会返回登录页面。因此，一旦隐藏登录视图实例，就销毁它。

因此，这些是可以在需要时显式删除视图的一些场景。下面是一些关于使用 Sencha 进行内存优化的参考资料：

a) [Sencha Touch：优化内存使用](http://www.sencha.com/blog/sencha-touch-optimizing-memory-usage)

b) [http://www.slideshare.net/senchainc/optimizing-performance](http://www.slideshare.net/senchainc/optimizing-performance)

# c# - Asp.net 中的 TextBox KeyDown 事件

> ID：12072281
> 
> 赞同：1
> 
> 时间：2012-08-22T11:39:54.380
> 
> 标签：c#, asp.net

我试图在 Windows 应用程序之类的 Asp.net 中找到 KeyDown 事件。在文本框内按 Enter 后我有几个 TextBox 我想专注于保存按钮如何实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:47:27.983

您不能从“ASP.NET”代码（即 C#）中执行此操作，因为`TextBox`当用户与其交互时，服务器上不存在该代码。相反，您需要做的是使用 JavaScript 连接客户端行为，该 JavaScript 可以响应用户浏览器中引发的文本框事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T11:48:25.327

建议为此目的使用 javascript。

```
Example:-

<script type="text/javascript" language="javascript"> 

     function handleEnter (obj, event) 
     {        
     var keyCode = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;        
     if (keyCode == 13) 
     {                    
        document.getElementById(obj).click();
                    return false;        
     }        
     else  {
           return true;   
            }   
     } 
</script> 

Relevant codes

protected void Page_Load(object sender, EventArgs e)
{

        TextBox1.Attributes.Add("onkeypress", "return handleEnter('" + Button1.ClientID + "', event)");

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T11:50:51.180

是的，你可以做到这一点！您可以使用 asp 面板。

将您的文本框和按钮 html 代码粘贴到 asp 面板中，然后将面板的属性设置`DefaultButton`为您的按钮名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T11:49:24.010

您可以使用 DefaultButton 选项。或者您可以将 JavaScript 函数用于 OnKeyDown 函数。

# java - 将 Java 与 SQL Express 连接起来

> ID：12072284
> 
> 赞同：2
> 
> 时间：2012-08-22T11:40:04.733
> 
> 标签：java, sql, sql-server-2008, jdbc

我设计了一个使用 Java 和 MySQL 的数据库管理系统。我使用**WAMP**作为服务器。一切都很完美……直到现在……

现在，我必须选择**SQL Express**而不是**WAMP**。我对 SQL Express 一无所知。我已经在默认情况下安装了它。

但是，现在我可以通过以下选择连接到**Microsoft SQL Server Management Studio**`LORDXAX-PC`中的数据库，（是我的计算机名称）

![在此处输入图像描述](../Images/4ca4b32b638c9725f12f6f6e0b6f0a2d.png)

但我需要将数据库与我的 Java 程序连接起来。*（我之前已经成功使用过**JDBC**，与 WAMP 一起使用）*

需要帮助才能成功？？我试过搜索发现某些东西，但它给出了错误。有人可以为我提供*干净*的说明..

任何帮助表示赞赏。谢谢！

* * *

## 编辑 (2)

这是演示问题的完整代码..

```
package ExpressTest;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;

public class MAIN {

    public static void main(String[] args) {
        new MAIN().start();
    }

    private void start() {
        System.out.println("START");
        String query = "SELECT * FROM logindata";
        getData(query);
        System.out.println("END");
    }

    public ResultSet getData(String query) {
        Connection CON = null;
        try {
            Class.forName("net.sourceforge.jtds.jdbc.Driver");
            CON = DriverManager.getConnection(URL, USER, PASS);
            RESULT = CON.createStatement().executeQuery(query);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        return RESULT;
    }
    private String URL = "jdbc:jtds:sqlserver://localhost/brandix;instance=sqlexpress";
    private String USER = "";
    private String PASS = "";
    private static ResultSet RESULT;
} 
```

这是完整的`NetBeans`输出。

```
run:
START
java.sql.SQLException: Network error IOException: Connection refused: connect
    at net.sourceforge.jtds.jdbc.ConnectionJDBC2.<init>(ConnectionJDBC2.java:417)
    at net.sourceforge.jtds.jdbc.ConnectionJDBC3.<init>(ConnectionJDBC3.java:50)
    at net.sourceforge.jtds.jdbc.Driver.connect(Driver.java:185)
    at java.sql.DriverManager.getConnection(DriverManager.java:582)
    at java.sql.DriverManager.getConnection(DriverManager.java:185)
    at ExpressTest.MAIN.getData(MAIN.java:24)
    at ExpressTest.MAIN.start(MAIN.java:16)
    at ExpressTest.MAIN.main(MAIN.java:10)
Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:519)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
END
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at net.sourceforge.jtds.jdbc.SharedSocket.createSocketForJDBC3(SharedSocket.java:311)
    at net.sourceforge.jtds.jdbc.SharedSocket.<init>(SharedSocket.java:261)
    at net.sourceforge.jtds.jdbc.ConnectionJDBC2.<init>(ConnectionJDBC2.java:318)
    ... 7 more
BUILD SUCCESSFUL (total time: 7 seconds) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T04:43:26.580

虽然有很多答案。我想给一个。

当您使用窗口身份验证时。

更改 JTDS URL 从

```
private String URL = "jdbc:jtds:sqlserver://localhost/brandix;instance=sqlexpress"; 
```

至

```
private String URL = "jdbc:jtds:sqlserver://localhost/brandix;instance=sqlexpress;useNTLMv2=tru‌​e;domain=workgroup"; 
```

或 另一种选择是：

下载 [Microsoft JDBC 驱动程序][1] 而不是 JTDS。添加`sqljdbc4.jar`到您的类路径。

更新服务器的连接字符串（JDBC URL）

利用`Class.forName(com.microsoft.sqlserver.jdbc.SQLServerDriver);`

网址：`jdbc:sqlserver://localhost;user=root;password=‌​123;"`

如果仍然有问题，请坚持。检查，

启用默认禁用的 TCP/IP 网络协议，并将 TCP/IP 端口设置为 1433，这也是默认端口号。

1.  打开 SQL Server 配置管理器开始 -> Microsoft SQL Server 2008 -> 配置工具 -> SQL Server 配置管理器

2.  然后在左边的树上。选择 SQL Server 2005 网络配置-> SQLEXPRESS 协议-> TCP/IP。

3.  右键单击并启用它。

4.  双击 TCP/IP 会出现一个窗口框。单击“IP 地址”选项卡

5.  将 TCP 端口值设置为 1433，然后单击应用

6.  重新启动 SQL 服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T12:16:28.127

您将不得不使用能够与 SQL Server 通信的驱动程序，例如[jTDS](http://jtds.sourceforge.net/index.html)。

现在对于这种情况，您的代码必须与此类似：

```
public ResultSet getData(String query) {
    Connection CON = null;
    try {
        Class.forName("net.sourceforge.jtds.jdbc.Driver");
        CON = DriverManager.getConnection(URL, USER, PASS);
        RESULT = CON.createStatement().executeQuery(query);
    } catch (Exception ex) {
        System.err.println(">> " + ex.getMessage());
    }
    return RESULT;
}
private String URL = "jdbc:jtds:sqlserver://servername/brandix;instance=sqlexpress";
private String USER = "";
private String PASS = "";
private static ResultSet RESULT; 
```

另请参阅@SPee 的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T13:47:44.470

首先从微软网站下载 JDBC-Driver。

[http://msdn.microsoft.com/en-us/sqlserver/aa937724.aspx](http://msdn.microsoft.com/en-us/sqlserver/aa937724.aspx)

添加`sqljdbc4.jar`到您的应用程序。

复制 java 安装的`sqljdbc_auth.dll`in`c:\windows\system32`和`/bin`文件夹。

您可以使用这样的连接网址：

```
jdbc:sqlserver://D-PC-IT-02;instanceName=LOKALEINSTANZ;databaseName=MyDatabase;integratedSecurity=true; 
```

可能需要重新启动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T12:11:42.377

[基本上你的步骤是](https://www.google.com/search?q=SQL+express+jdbc)：

1.  将SQL Express的[Microsoft JDBC 驱动程序安装到您的类路径中](http://www.microsoft.com/en-us/download/details.aspx?id=11774%20%22MS%20JDBC%20driver)
2.  更新服务器的连接字符串（JDBC URL）
3.  更新 SQL Express 查询

第 2 步可能需要您通过 TCP/IP 连接而不是本地管道/命名实例使 SQL Express 可用。

第 3 步可能是最难的。您必须检查您的查询是否对 SQL Express 有效，使用具有正确参数的函数。对于数据库管理系统，您还必须更新所有查询以进行用户管理、表管理等。

# css - 为什么当我更改一个 div 元素中的链接颜色时，它会更改另一个？

> ID：12072289
> 
> 赞同：1
> 
> 时间：2012-08-22T11:40:18.440
> 
> 标签：css

这是我的一些 CSS 代码。当我更改#container2 元素中的颜色时，它也会更改#container1 元素中链接的颜色。为什么是这样？

```
#container1 {
display:block;
position:relative;
margin: 0 auto 0 auto;
width:auto;
background-color: #f26822;
}
#container1 #mainnavigation {
height:20px;
width:960px;
background-color: #f26822;
margin: 0 auto 0 auto;
}

#container1 #mainnavigation ul {
    list-style-type: none;
    margin: 0;
    overflow: hidden;
    padding: 0;
}
#container1 #mainnavigation li {
    background-color: #f26822;
    float: left;
    height: 20px;
    width: 137px;
}

#container1 #mainnavigation a:link,a:visited {
    color: #FFFFFF;
    display: block;
    font-weight: bold;
    padding: 0%;
    text-align: center;
    text-decoration: none;
    text-transform: uppercase;
    width: 100%;
    border-radius:10px;
}

#container1 #mainnavigation a:hover,a:active {
    color: #27348B;
    background-color:#FF8000;
} 
```

这是我的第一组链接的代码，下面是另一个元素中的第二个链接的代码

```
#container2 #content a:link,a:visited {
font-family:calibri;
font-size:16px;
color: ;
text-decoration:none;
}

#container2 #content a:hover,a:active {
color: #000;
} 
```

好的，我刚刚将所有代码输入到 jsFiddle 中，它工作正常，但是当我使用浏览器对其进行测试时，它没有？帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:43:38.143

如果您再看一下您的 CSS，您会注意到您正在为全局级别的 a:visited 链接声明您的样式。相反，正如您为 a:link 和 a:hover 各自的父项声明样式一样，您也需要为 a:visited 这样做。您的样式表应反映以下内容：

```
...

#container1 #mainnavigation a:link, #container1 #mainnavigation a:visited {
 color: #FFFFFF;
 display: block;
 font-weight: bold;
 padding: 0%;
 text-align: center;
 text-decoration: none;
 text-transform: uppercase;
 width: 100%;
 border-radius:10px;
}

#container1 #mainnavigation a:hover, #container1 #mainnavigation a:active {
 color: #27348B;
 background-color:#FF8000;
}

#container2 #content a:link, #container2 #content a:visited {
 font-family:calibri;
 font-size:16px;
 color: #000;
 text-decoration:none;
}

#container2 #content a:hover, #container2 #content a:active {
 color: #000;
} 
```

# c++ - 从 qml 编辑 QObject 属性

> ID：12072300
> 
> 赞同：2
> 
> 时间：2012-08-22T11:41:02.867
> 
> 标签：c++, qt, qml, qt-quick

我正在编写一些类，它扩展了 QObject 并且几乎没有 Q_PROPERTY 我在 QList 中使用一个角色（总是返回 QObject* ）的 QAbstaction 模型中使用它；在 QML 中，我会使用 TextEdit 绑定属性，例如：

```
Binding
{
    target :currentReport
    property: description
    value: text_description_edit.text
} 
```

但是此条目返回错误并且不绑定我的属性：

```
file:///..somePath../ReportAddDelegate.qml:179: ReferenceError: Can't find variable: description 
```

如何在 qml 中编辑我的 QObject 属性？

UPD：我`property QtObject currentReport`在委托组件中使用

//对不起我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:51:38.307

解决了！我在 Binding 中犯了错误！`property: "description"`需要写`property: description`

# android - android 4.0 及更高版本上的视频查看问题

> ID：12072307
> 
> 赞同：5
> 
> 时间：2012-08-22T11:41:24.117
> 
> 标签：android, android-videoview

我正在尝试从流 url 播放视频。代码如下

```
public class VideoPlayer extends Activity  
{
    private VideoView mVideoView;            
    String videoURL="";
    static Utility utility;
    static Context context;
    MediaController mediaController;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {         
        super.onCreate(savedInstanceState);
        setContentView(R.layout.video_player);          
        setupViews();
    }

    private void setupViews() 
    {
        context=VideoPlayer.this;
        utility=new Utility(VideoPlayer.this);
        isActivityisRunning=true;
        showProgressDialog("Loading video..");
        videoURL=getIntent().getExtras().getString("url");            
        mVideoView=(VideoView)findViewById(R.id.video_view);
        mediaController=new MediaController(context);            
        mVideoView.setMediaController(mediaController);

        mVideoView.setOnPreparedListener(new OnPreparedListener() 
        {
            @Override
            public void onPrepared(MediaPlayer mp) 
            {
                hideProgressDialog();

                if(bIsOnPausedCalled)
                    mVideoView.seekTo(LastDuration);
                    mVideoView.start();                     
                    mVideoView.requestFocus();  
                    bIsOnPausedCalled=false;
                    LastDuration=0;
                }
            });

           mVideoView.setOnCompletionListener(new OnCompletionListener() 
            {

                @Override
                public void onCompletion(MediaPlayer mp) 
                {
                    finish();
                }
            }); 

           mVideoView.setOnErrorListener(new OnErrorListener() 
           {

            @Override
            public boolean onError(MediaPlayer mp, int what, int extra) 
            {
                utility.hideProgressDialog();
                return false;
            }
        });

           playVideoFile();      
        } 

    public static void showDialog(String Message)
    {       
                alertDialog = new AlertDialog.Builder(context).create();  
                alertDialog.setTitle(Constant.DialogTitle);  
                alertDialog.setMessage(Message);  
                alertDialog.setCancelable(false);
                alertDialog.setButton("Ok", new DialogInterface.OnClickListener() 
                {  
                          public void onClick(DialogInterface dialog, int which) 
                          {             
                             dialog.dismiss();                          
                          } 
                }); 
                if(isActivityisRunning)
                    alertDialog.show();
                else
                    utility.showToast(Message);
    }

    static ProgressDialog progressDialog;
    static AlertDialog alertDialog;

    public  void showProgressDialog(String Message)
    {   
            hideProgressDialog();
            progressDialog=new ProgressDialog(context);
            progressDialog.setTitle(Constant.DialogTitle);
            progressDialog.setMessage(Message);                         
            if(isActivityisRunning)
                progressDialog.show();
            else
                utility.showToast(Message);
    }

    public static boolean isActivityisRunning;
    public static boolean showProgressDialog;

    public static boolean bIsOnPausedCalled=false;
    public static int LastDuration=0;

        @Override
        protected void onPause() 
        {   

            hideProgressDialog();
            bIsOnPausedCalled=true;
            isActivityisRunning=false;
            if (mVideoView != null)
            {       
                if(LastDuration==0)
                {
                    LastDuration=mVideoView.getCurrentPosition();
                    mVideoView.suspend();
                    mVideoView.setVisibility(View.GONE);    
                }               
            }
            super.onPause();
        }

        @Override
        protected void onResume() 
        {

            isActivityisRunning=true;
                if(bIsOnPausedCalled)
                {                       
                    setupViews();               
                }
                super.onResume();       
        }

        @Override
        protected void onDestroy() 
        {
            super.onDestroy();
            try 
            {               
                if (mVideoView != null) 
                {   
                    mVideoView.stopPlayback();
                    mVideoView=null;                
                    hideProgressDialog();
                    isActivityisRunning=false;
                     bIsOnPausedCalled=false;
                     LastDuration=0;
                }

            } catch (Exception e) 
            {}              
        }

    public static void hideProgressDialog()
    {
        if(progressDialog!=null)
        {
            if(progressDialog.isShowing())
            {
                progressDialog.dismiss();
            }           
        }
    }

    private void playVideoFile() 
        {

                try 
                {                   
                    mVideoView.setVideoURI(Uri.parse(videoURL));
                }
                catch (Exception e) 
                {
                    utility.hideProgressDialog();
                    if (mVideoView != null) 
                    {                   
                        mVideoView.stopPlayback();
                    }
                }
            } 
```

这适用于版本低于 4.0 的 android 设备（使用睡眠模式按钮暂停和恢复）。但是当我尝试在具有 4.0 版或更高版本的 android 手机上播放视频时，视频可以正常播放，但是当手机进入睡眠模式并从睡眠模式恢复时，视频视图大小变成了屏幕的一半。如下![在此处输入图像描述](../Images/61008ea849891ec2f8ace49b740732c0.png)

请帮忙？

提前致谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:13:37.953

你所做的一切都是正确的，但你已经应用了 setContentView(R.layout.video_player); 只有那些，即使视频已恢复。所以代码应该是

```
@Override
public void onCreate(Bundle savedInstanceState) 
{         
    super.onCreate(savedInstanceState);                
    setupViews();
}

private void setupViews() 
{
    setContentView(R.layout.video_player);  
    context=VideoPlayer.this;
    -----
    ------
} 
```

代替

```
@Override
public void onCreate(Bundle savedInstanceState) 
{         
    super.onCreate(savedInstanceState);  
    setContentView(R.layout.video_player);       
    setupViews();
}

private void setupViews() 
{
    context=VideoPlayer.this;
    -----
    ------
} 
```

# visual-studio-2012 - Visual Studio 2012 杀死了我的 WCF 服务参考

> ID：12072308
> 
> 赞同：2
> 
> 时间：2012-08-22T11:41:26.500
> 
> 标签：visual-studio-2012

我不知道到底发生了什么。我将我在 Visual Studio 2010 中的一个项目升级到 Visual Studio 2012，现在它们中的任何一个都无法识别服务参考！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:16:41.247

事实证明，当我尝试在引用的程序集中重用类型时，我的引用 (Newtonsoft.Json) 中的特定库引发了异常。我只是将其排除在外，异常就消失了。

# string - How to load left parts of Uris using Linq in c#

> ID：12072312
> 
> 赞同：0
> 
> 时间：2012-08-22T11:41:49.657
> 
> 标签：string, linq, uri

I have a list of Url in file url.data like this

```
http://site1.org/info.php
http://site2.com/info/index.php
http://site3.edu/ 
```

I load in array of string with link function

```
string[] asUrlData = File.ReadAllLines("url.data").Where(s => !string.IsNullOrEmpty(s)) 
                                                  .Distinct().
                                                  .ToArray(); 
```

I want to get the left parts of Uris in the array like

```
http://site1.org/
http://site2.com/info/
http://site3.edu/ 
```

Is there any way to do this using LINQ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:53:11.023

你可以使用[`URI`](http://msdn.microsoft.com/en-us/library/system.uri.aspx)类。用于[`IsWellFormedUriString`](http://msdn.microsoft.com/en-us/library/system.uri.iswellformeduristring.aspx)检查它是否格式正确并`strUri.Substring(0, strUri.LastIndexOf('/') +1`获取没有文件的权限+路径。

```
String[] uris = File.ReadLines(path)
            .Where(u => Uri.IsWellFormedUriString(u, UriKind.Absolute))
            .Select(u => { 
                var p = new Uri(u).ToString();
                return p.Substring(0, p.LastIndexOf('/') +1); 
            })
            .Distinct()
            .ToArray();

Console.Write(String.Join(Environment.NewLine, uris)); 
```

**编辑**：这是一个演示：http: [//ideone.com/Uckov](http://ideone.com/UckoV)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:47:44.060

Tim Schmelter 发布了很好的解决方案，但我想出了另一个使用正则表达式的解决方案

如果您不想轻松操作输出 URL 表单，这可能会更好。

```
string[] urls2 = urls
                .Select(s => Regex.Match(s, @"(http://){0,1}[a-z0-9\-\.]{1,}\.[a-z]{2,5}", RegexOptions.IgnoreCase).ToString())
                .Where(s => !string.IsNullOrEmpty(s))
                .ToArray(); 
```

如果正则表达式将是从配置文件等中获取的字符串，您可以轻松更改它

演示：http: [//ideone.com/nRR0m](http://ideone.com/nRR0m)

PS @Tim Schmelter：这些演示的页面非常好，已添加到收藏夹；）

# javascript - Uncaught Error: INVALID_STATE_ERR: DOM Exception 11

> ID：12072315
> 
> 赞同：11
> 
> 时间：2012-08-22T11:41:59.283
> 
> 标签：javascript, android, cordova, xmlhttprequest, domexception

I am getting the below error.

> Uncaught Error: INVALID_STATE_ERR: DOM Exception 11

Here is the code where I am getting Error RUN TIME.

```
xhttp.setRequestHeader("Content-type","application/xhtml+xml");<br>
xhttp.open("POST",xmlFile,true);<br>
xhttp.send(postData); 
```

I tried with `false` in the third parameter of xhttp.open.
Can anyone tell me what's causing this?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-22T11:53:19.763

错误来自执行顺序：

```
xhttp.open("POST",xmlFile,true);
xhttp.setRequestHeader("Content-type","application/xhtml+xml");
xhttp.send(postData); 
```

您必须首先打开连接，然后设置请求标头，否则您将收到错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T13:03:06.650

在更改为ie`XMLHttpRequest::Status`之前不可用。已从服务器获取正确的响应，现在已填充到变量中。`XMLHttpRequest::readyState``4``Status`

因此，提前访问 XMLHttpRequest::Status 可能会导致此错误。

解决方案：首先验证`readyState`并且只有在成功时才能访问`Status`

```
if (xmlhttp.readyState==4)
{
    switch (xmlhttp.status)
    {
    case 200: // Do the Do
        break;
    case 404: // Error: 404 - Resource not found!
        break;
    default:  // Error: Unknown!
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-02T09:08:48.790

套接字尚未配置/初始化/打开连接并且已调用发送

# ruby-on-rails - Elastic Search/Tire: How to map to association attribute?

> ID：12072319
> 
> 赞同：4
> 
> 时间：2012-08-22T11:42:18.987
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, elasticsearch, tire

I'm using [Tire](https://github.com/karmi/tire) for Elastic Search. In my application I have 2 models; Price and Product.

I'm trying to search my Price class and use the Product it belongs to's `:name` attribute for the search field. Right now if I had a product called `Product 1` and type in "pro", "prod" or "duct", no results come up. But typing "product" or "Product" shows the results. I believe the problem lies in my mapping. I looked at the query and its:

```
...localhost:3000/search/results?utf8=%E2%9C%93&query=product 
```

When I think it should be:

```
...localhost:3000/search/results?utf8=%E2%9C%93&query:product=product 
```

Judging by this question: [ElasticSearch mapping doesn't work](https://stackoverflow.com/questions/6226546/elasticsearch-mapping-doesnt-work)

I don't know how to make my `params[:query]` to take the `product.name` only though. I tried to use: `string params[:query], default_field: "product.name"` but that didn't work.

I don't want to use the `_all` field.

Here is my code:

**Price.rb**

```
 include Tire::Model::Search
  include Tire::Model::Callbacks

  def self.search(params)
    tire.search(load: true, page: params[:page], per_page: 20) do
       query do
         boolean do
            must { string params[:query] } if params[:query].present?
            must { term :private, false }
         end
       end
       sort do
         by :date, "desc"
         by :amount, "asc"
       end
    end
  end

  def to_indexed_json
    to_json( include: { product: { only: [:name] } } )
  end

  mapping do
    indexes :id,        type: "integer"
    indexes :amount,    type: "string", index: "not_analyzed"
    indexes :date,      type: "date",   index: "not_analyzed"
    indexes :private,   type: "boolean"
    indexes :product do
      indexes :name, type: "string", analyzer: "custom_analyzer"
    end
  end

  settings analysis: {
    analyzer: {
      custom_analyzer: {
        tokenizer: [ "whitespace", "lowercase" ],
        filter: [ "ngram_filter", "word_delimiter_filter" ],
        type: "custom"
      }
    },
    filter: {
      ngram_filter: {
        type: "nGram",
        min_gram: 2,
        max_gram: 15
      }
    },
    filter: {
      word_delimiter_filter: {
        type: "word_delimiter",
        generate_word_parts: true,
        generate_number_parts: true,
        preserve_original: true,
        stem_english_possessive: true
      }
    }
  } 
```

So does anyone have any suggestions or know how to set the query field to use the Product name only?

Thank you.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T21:13:42.830

当你这样做

```
 query   { string params[:query] } 
```

并且查询未指定字段，您正在搜索魔术`_all`字段。此字段有自己的分析器设置 - 它不会使用您为名称字段设置的设置。

您可以配置该`_all`字段以使用您的分析器，更改默认分析器或更改您的查询以`name`专门查询该字段，例如

```
 query { string params[:query], :default_field => 'name'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:22:28.440

这让我非常头疼，所以我最终去了[Ransack](http://railscasts.com/episodes/370-ransack)，它非常容易理解和使用。

# java - Constructor's argument accessible from another method?

> ID：12072326
> 
> 赞同：0
> 
> 时间：2012-08-22T11:42:47.783
> 
> 标签：java, class

What is the correct way to make a constructor's argument accessible to different methods within a class?

For example, in the code snippet below, I want to make *N* accessible within a method called *aMethod*, without changing aMethod's existing argument signature. Is myArray.length the best alternative?

```
public class MyClass{

  private int[][] myArray;

  public MyClass(int N){

    if(N <= 0) 
      throw new IndexOutOfBoundsException("Input Error: N <= 0");  

    myArray = new int[N][N];            
  }

  public void aMethod(int i, int j){

    // N won't work here. Is myArray.length the best alternative?       
    if(i <= 1 || i > N) 
      throw new IndexOutOfBoundsException("Row index i out of bounds");
    if(j <= 1 || j > N) 
      throw new IndexOutOfBoundsException("Column index j out of bounds");            
  }
} 
```

**EDIT 1** I'm testing for inputs greater than 0 so if a user enters 0 for i or 0 for j, the input is invalid.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T11:44:08.763

Just create a field for it, like you did for the array.

```
 public class MyClass{

    private int[][] myArray;
    private int myArraySize;

    public MyClass(int N){

      if(N <= 0) 
        throw new IndexOutOfBoundsException("Input Error: N <= 0");  

      myArray = new int[N][N];
      myArraySize = N;            
    }

    ...
 } 
```

However in this case I wouldn't do that, I'd change aMethod() instead:

```
public void aMethod(int i, int j){

    // N won't work here. Is myArray.length the best alternative       
    if(i < 0 || i >= myArray.length ) 
      throw new IndexOutOfBoundsException("Index i out of bounds");
    if(j < 0 || j >= myArray[i].length) 
      throw new IndexOutOfBoundsException("Column index j out of bounds");            
} 
```

(I also changed the check to allow [0..N-1] instead of [1..N], as arrays are indexed from 0.)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T11:48:05.617

为什么不使用`length`数组`myArray.length` ？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T11:51:19.243

您可以将其存储为另一个字段，但它已经存储。

```
public class MyClass{

  private final int[][] myArray;

  public MyClass(int n){
    myArray = new int[n][n]; // will throw an exception if N < 0.
  }

  public void aMethod(int i, int j){
    int n = myArray.length;

    if(i < 0 || i >= n) 
      throw new IndexOutOfBoundsException("Index i out of bounds");
    if(j < 0 || j >= n) 
      throw new IndexOutOfBoundsException("Column index j out of bounds");            
  }
} 
```

当然，索引 0 和 1 对数组有效。如果您不执行这些检查，您将得到一个 IndexOutOfBoundException，但它会告诉您无效值是什么，这可能有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T11:45:49.670

创建一个字段（为了天堂的缘故，使用通常的命名约定命名它）：

```
public class MyClass{

  private int[][] myArray;
  private final int n; // it should be final, because the array has the same dimension 

  public MyClass(int n){
    this.n = n;
    // other stuff
  }

  public void aMethod(int i, int j){
    // use n here
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T11:44:10.513

It seems 'N' should be stored in a member in your class. If you do that, then it's anyway accessible to the aMethod() method also.

In any case, you should either call that method that needs the constructor parameters, in the constructor, or store those constructor parameters in member variables and make them available to other methods.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-22T11:46:04.770

我认为这`IndexOutOfBoundsException`会在你不注意的情况下被抛出，因为 java 在运行时检查数组边界。你确定你需要这个额外的检查吗？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-22T11:50:00.887

像我一样在你的类中添加一个新字段**nSize**

```
public class MyClass{

    private int[][] myArray;
    private int nSize;

    public MyClass(int N){

    if(N <= 0) 
      throw new IndexOutOfBoundsException("Input Error: N <= 0");  

    myArray = new int[N][N];
    this.nSize= N;            
 } 
```

# ruby-on-rails - Best Way to underscore params in rails

> ID：12072331
> 
> 赞同：0
> 
> 时间：2012-08-22T11:42:57.190
> 
> 标签：ruby-on-rails, rest, params

I'm writing REST JSON services for Android and iOS mobile devices, but Ruby, Java and Objecive-C have different code styles. I'm looking for best way to write code in Ruby style, but consider the requirements of other languages. Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:52:43.693

许多 Rails 开发人员都遇到了这个问题。JSON 和 JavaScript 的最佳实践是使用 camelCase 作为属性名称。

我发现在任何返回的 JSON 上使用 .camelize(:lower) 是最简单的方法。

此处描述了从 camelCase 到 under_score 的其他转换：[Converting camel case to underscore case in ruby](https://stackoverflow.com/questions/1509915/converting-camel-case-to-underscore-case-in-ruby)

就灵活性而言，我一直在寻找接近 C# 的 JSON.NET for Ruby 的东西，但还没有找到。

# javascript - jQuery .hide() does not work with my array

> ID：12072339
> 
> 赞同：-1
> 
> 时间：2012-08-22T11:43:24.563
> 
> 标签：javascript, jquery, html, css

Hello and thanks for your help.

I have a php script on my website that returns my last few tweets in form of an unordered list with the posts each being a list item.

```
<div id="latesttweet">
  <ul>
    <li>
      This is a tweet<br />
      <span>3 hours ago.</span>
    </li>
    <li>
      This is another tweet<br />
      <span>4 hours ago.</span>
    </li>
  </ul>
</div> 
```

I tried to hide some of them dynamically using JavaScript, but for some reason once I collect all the list items in an Array, I can't address them properly anymore. When I alert the length of the Array however, I get the right number. jQuery seems to be working alright in general.

```
var activeTweet = 0;
var tweet_ul = document.getElementById('latesttweet');
var tweetArray = tweet_ul.getElementsByTagName('li');

var tweetCount = tweetArray.length;
alert(tweetCount); //returns the right result

tweetArray[1].hide(); 
```

This way, one should expect that the second list item would have `display` set to `none`, but still both items remain visible.

What am I doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:44:44.897

基本上你没有使用 jQuery

```
$(tweetArray[1]).hide() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T11:46:03.290

您的数组是 DOM 对象，而不是 jQuery 对象。尝试以下操作：

```
var activeTweet = 0;
var tweet_ul = $('#latesttweet');
var tweetArray = $('li');

var tweetCount = tweetArray.length;
alert(tweetCount); //returns the right result

tweetArray[1].hide(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T11:44:50.903

尝试这个：

```
$(tweetArray[1]).hide(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T11:46:44.053

```
tweetArray[1].style.display="none"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T11:49:53.040

```
$(tweetArray[1]).hide(); 
```

这应该可以完成这项工作。tweetArray[1] 只是一个 html 元素，它没有为它定义 hide() 方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T12:04:41.857

```
var tweets = $( '#latesttweet ul' ).children( 'li' ); 
$( tweets[1] ).hide(); 
```

[http://jsbin.com/usiyex/2/](http://jsbin.com/usiyex/2/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-22T11:45:35.627

`hide()`是 jQuery 的一部分。你必须使用`$()`方法：`$(tweetArray[1]).hide()`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-22T11:45:36.267

您将不得不包装`tweetArray[1]`成一个 jquery 对象

尝试

`$(tweetArray[1]).hide();`

# php - how to create png image file from the memory ？

> ID：12072340
> 
> 赞同：0
> 
> 时间：2012-08-22T11:43:40.090
> 
> 标签：php, image, rrdtool

I create a png image in the memory ,the code like this

```
rrdtool_function_graph(605,0,$graph_data_array) 
```

when I run this

```
print rrdtool_function_graph(605,0,$graph_data_array) 
```

It will show the png image. the question is ,how to convert it to the image file ,like abc.png ,with php?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:58:06.990

您可以使用 PHP[`fwrite`](http://php.net/manual/en/function.fwrite.php)来实现这一点

```
$handle = fopen('abc.png', 'w');
fwrite($handle , rrdtool_function_graph(605,0,$graph_data_array));
fclose($handle); 
```

# asp.net - 在asp.net 中RequiredFieldValidator Text 和ErrorMessage 有什么区别？

> ID：12072345
> 
> 赞同：16
> 
> 时间：2012-08-22T11:44:01.293
> 
> 标签：asp.net, validation

在asp.net 中RequiredFieldValidator Text 和ErrorMessage 属性有什么区别？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-22T11:50:17.860

**文本：**验证失败时显示的消息。

**ErrorMessage ：**验证失败时在 ValidationSummary 控件中显示的文本。注意：如果未设置 Text 属性，此文本也将显示在验证控件中。

参考：[http ://www.w3schools.com/aspnet/control_reqfieldvalidator.asp](http://www.w3schools.com/aspnet/control_reqfieldvalidator.asp)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-22T11:48:18.633

ErrorMessage 属性显示在 ValidationSummary 控件中。文本显示在 controlToValidate 旁边。如果将 Display 属性设置为 None，则不会出现 Text。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T11:49:30.423

在正常设置中，文本属性显示在验证器旁边，错误消息显示在 ValidationSummary 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-05T13:11:14.007

Text 和 ErrorMessage 都用于显示错误消息。但请记住，如果您使用的是 Text 属性，那么在验证摘要中将不会显示任何内容。要在validationSummary 中显示错误，必须使用ErrorMessage。如果你想在文本框前面显示错误消息，那么两者都一样。如果您同时使用两者，则在文本中优先显示文本消息前面的错误消息。

# database - Best practice for implementing a "template of something that users can join" solution in a DB

> ID：12072346
> 
> 赞同：1
> 
> 时间：2012-08-22T11:44:02.277
> 
> 标签：database, oop, database-design

I'm looking for the best practice for designing a database schema where someone can post a template of something (for example how a certain 'schedule' looks like) and then user can 'join' that template but change stuff from it without of course changing the original template.

I'll add an example, as i'm not the best in explaining something in text form. (and english is not my native language)

Say you have 4 tables:

*   Schedule
*   Day
*   Task
*   TaskRule

A schedule can have N days, a day can have N tasks, and a task finally can have N taskRules. A user will 'join' this schedule via a join table (user_schedule that has the user id and the schedule_id).

Now the problem is that when a user changes something from the template (lets say he adds a few taskRules or he removes a task) the schedule will change for everyone that is connected to it.

My question is what is the best practice to handle this? I really can't see how this can be done other then row duplication which is not my favorite thing to do.

Edit: This schema means he will join the template schedule and choose 1 of 2 things (namely to change it or not to change it, if he doesn't change it duplication is clearly redundant)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:08:08.443

你有不同的选择：

1.  复制所有数据。这很容易做到，但会重复大量数据，这可能是个问题，尤其是在修改除外的情况下。

2.  一个变体通常只是链接到模板并仅在实际进行更改时复制它。这增加了代码的复杂性，但可能会节省大量数据。这也可以单独应用于每个表。

3.  链接数据+更改：您只能参考问题中建议的时间表，然后跟踪特定用户所做的所有更改。基本上正如 Spark 所描述的那样。但并不是说您可能还需要处理删除和更改。这是一种更复杂的处理方式，但甚至可能在“加入”发生后处理对时间表的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:39:43.670

我的建议是：

*   将任务重命名为 task_template。
*   使用 template_id、user_id 和 task_template 中的所有其他字段创建一个名为 task 的表。
*   添加数据时，仅在新表中插入差异。
*   加载数据时，您会读取 template_id 并用行中非空的内容覆盖。

这里的主要问题是您试图在 sql 数据库中实现继承/扩展/原型设计......

# python - Tornado's IO Loop doesn't support Windows file descriptors

> ID：12072348
> 
> 赞同：1
> 
> 时间：2012-08-22T11:44:09.463
> 
> 标签：python, windows, asynchronous, tornado

I'm trying to get Tornado's IO loop to support Windows file descriptors, but since it uses select, and select does not support Windows file descriptors, i'm in a bit of a problem.

What is the best workaround for using Tornado both as a web server and to read from files asynchronously?

I need to read asynchronously from files because I am reading from process pipes, which use file descriptors for IO.

# php - 使用正则表达式在 js 中进行函数修剪

> ID：12072350
> 
> 赞同：-2
> 
> 时间：2012-08-22T11:44:22.083
> 
> 标签：php, javascript, regex, trim

我想从字符串中删除开头和结尾的空格，就像`trim()`PHP 中的函数一样。我想用正则表达式来做到这一点。在 PHP 中，我会这样做：

```
$str = "    a s d  ";
$mytrim = preg_match_all("#^\s*([^\s].*)\s*$#U", $str, $mas);
echo $mas[1][0]; 
```

我不知道该怎么做，因为在 Javscript 正则表达式中，这是不正确的：“所有除了问符号 - `[^some symbols]`”。我可以用两个正则表达式来做到这一点，但我很感兴趣如何用一个来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:50:43.973

从“javascript trim”的第一个谷歌结果：

```
var text = '   hello   ';
text = text.replace(/^\s+|\s+$/g, ""); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T11:50:37.890

简单的`var newText = "text".replace(/#^\s*([^\s].*)\s*$#U/g, '');`

在 newText 中，与您的正则表达式匹配的数据被替换为 ''

或者你可以使用 phpjs [http://phpjs.org/functions/trim:566中的 trim](http://phpjs.org/functions/trim:566)

# php - 使用 angularJS 显示来自 phpmyadmin 的数据

> ID：12072353
> 
> 赞同：3
> 
> 时间：2012-08-22T11:44:25.023
> 
> 标签：php, angularjs

我希望显示`mysql database`使用的数据，`angularJS`但都是徒劳的。请查看我的代码并建议我哪里出错了？

```
 <?php
    $host = "localhost"; 
    $user = ""; 
    $pass = ""; 
    $database = "abc";
    $con = mysql_connect($host,$user,$pass);
    if (!$con) {
        die('Could not connect: ' . mysql_error());
    }
    echo 'Connected successfully'; 
    mysql_select_db($database,$con);  
     //select
    $query = "SELECT * FROM `product`"; 
    $result = mysql_query($query) OR die(mysql_error()); 
    $arr = array();
    //now we turn the results into an array and loop through them. 
    while ($row = mysql_fetch_array($result)) { 
        $name = $row['name']; 
        $description = $row['description']; 
        //echo 'This is: ' . $name . ' ' . $description . "<br/>\n"
        $arr[] = $row;
    } 
    echo json_encode($arr);
?> 
```

控制器.js

```
 function ProductListCtrl($scope,$http) {
    $http.get('php/connect.php').success(function(data) {
        $scope.products = data;
    });
    //$scope.orderProp = 'name';

} 
```

索引.html

```
 <html ng-app>
    <head>
        <script src="../angular-1.0.1.min.js"></script>
        <script src="js/controllers.js"></script>
    </head>
    <body>
    <ul ng:controller="ProductListCtrl">
        <li ng:repeat="product in products">
            {{product.name}}
        </li>
    </ul>
    </body>
</html> 
```

当我运行时`index.html`，我得到无限的子弹列表，没有显示结果。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T19:43:08.283

我同意 Alexander 的观点，如果您可以从浏览器控制台获取 JSON 数据会有所帮助。

我想你想在你的 php 代码中做这样的事情来只获取名称和描述 `$arr[] = array('name' => $name, 'description' => $description);`而不是`$arr[] = $row;`

您可能会以 html 的形式从您的 php 代码中返回一个错误，而 $http 正在将其分开，就好像它是一个数组一样。

希望这可以帮助

- 担

# jquery - 从子网格 Jqgrid 获取父行

> ID：12072355
> 
> 赞同：0
> 
> 时间：2012-08-22T11:44:37.783
> 
> 标签：jquery, jqgrid

单击子网格中工具栏中的按钮时，有什么方法可以获取父行的 id？

截至目前，我不能使用自定义按钮，因为我不知道它应该有哪个 FK..

我尝试了以下方法，但它只返回子网格的第一行。

```
 var grid = $(this);
var currentRow = grid.jqGrid('getRowData', 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:34:08.483

我发现子网格的名称得到了以下名称：Jqgrid_PARENTID_t

所以我最终用正则表达式提取了下划线之间的值。

# oracle - 从 JOBS 中的包调用过程

> ID：12072366
> 
> 赞同：0
> 
> 时间：2012-08-22T11:45:14.023
> 
> 标签：oracle, plsql, jobs, oracle-sqldeveloper

![在此处输入图像描述](../Images/6a35724b72cc94776beda0f57d05b1f9.png)

我在 Oracle SQL Developer 工作，我`UPDATE_CUSTOMERS_RECORDS`在包体中做了一个包“XXX”和一个过程。我测试了这个程序并且它有效。

但我想在 JOBS 中调用这个过程。我做了一份工作，在“工作类型”中选择`PL/SQL Block`选项和类型`MERITUM.update_customers_records()`，但它不起作用：

```
"ORA-06550: line ORA-06550: line 1, column 506:
PLS-00103: Encountered the symbol "" when expecting one of the following:

   := . ( % ;
The symbol ";" was substituted for "" to continue.
, column :" 
```

我也试过`call MERITUM.update_customers_records()`，但同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:56:02.083

尝试

```
MERITUM.update_customers_records(); 
```

`;`应该使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:38:21.597

J找到了解决办法。反而

```
MERITUM.update_customers_records(); 
```

在`PL/SQL Block`我放

```
declare
begin
  MERITUM.update_customers_records();
end; 
```

结束终于起作用了:)

# iphone - 在 iPhone 上用新文件更改旧文件

> ID：12072370
> 
> 赞同：0
> 
> 时间：2012-08-22T11:45:30.653
> 
> 标签：iphone, cocoa-touch

所以我的问题是我不知道如何更新一个简单的 txt 文件。所以我所拥有的是我的应用程序总是从一个文件中读取一些东西。比我想用我从互联网上下载的一些东西来更新这个文件。所以我能做的是：

```
 NSString *index2 = [documentsDirectory stringByAppendingPathComponent:@"something.txt"];
    NSURL *url = [NSURL URLWithString:@"url to file"];
    NSData *urlData = [NSData dataWithContentsOfURL:url];
    [urlData writeToFile:index2 atomically:YES]; 
```

所以我下载了更新的文件并将其保存到文件目录中的手机内存中。但我不明白的是如何覆盖我在捆绑资源中拥有的​​例如 index1 的文件。

感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:21:36.603

您不想覆盖捆绑包中的文件。您应该做的是应用程序启动时：

1.  检查您的文件是否在 Documents/（或 Library/ 取决于您的偏好）文件夹中
2.  如果它不存在，则使用捆绑包中的副本制作副本
3.  然后运行您的更新，如果需要，覆盖您刚刚放入 Documents/ 的副本

这个想法是您的捆绑包永远不会改变，但您的应用程序依赖于您在 Documents/ 中制作的副本，因此您必须保持最新。

# box-api - Box Rest APIv2：下载已删除文件返回 500：内部服务器错误

> ID：12072373
> 
> 赞同：0
> 
> 时间：2012-08-22T11:45:38.257
> 
> 标签：box-api

我正在使用 APIv2 对我的代码进行单元测试。

场景如下：

1.  上传新文件，说它返回 id "12345"
2.  删除新文件
3.  尝试下载已删除的新文件 ID“12345”

结果：500 内部服务器错误

我知道它不应该真的发生，但我期待像 404 not found 这样的错误。我相当有信心它不是我的代码，因为下载有效文件是有效的。

我是否有理由期待 500 以外的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:10:39.750

This is not the intended error code. As the resource no longer exists, we should be returning a `404 Not Found`. We'll be fixing this shortly.

# android - setVideoSurfaceTexture 失败：媒体播放器中的 -22

> ID：12072376
> 
> 赞同：8
> 
> 时间：2012-08-22T11:45:46.207
> 
> 标签：android, media-player, surfaceview

我尝试使用 MediaPlayer (Android ICS) 循环播放多个视频，并在每次调用 oncompletion() 时更改视频。

它工作得很好，但在随机时间后应用程序冻结并且我收到错误：

> [SurfaceView] 连接：已连接（cur=3，req=3）setVideoSurfaceTexture 失败：-22

当这个错误发生时，它会在内部调用重置播放器

参考：媒体播放器.cpp

```
if (err != OK) {
    LOGE("setVideoSurfaceTexture failed: %d", err);
    // Note that we must do the reset before disconnecting from the ANW.
    // Otherwise queue/dequeue calls could be made on the disconnected
    // ANW, which may result in errors.
    reset();
    disconnectNativeWindow();
    return err;
} 
```

根据我的代码，我收到 onprepared() 的通知并开始播放。

由于这个错误，实际上没有播放。

所以我尝试重置媒体播放器并在发生此问题且媒体播放器未播放时调用 prepare()，但我无法捕获此错误（ mp.isPlaying()->true (bec'z 在 onprepared 中调用 start() ())。

我试试这样的逻辑

```
onprepared() {
    mp.start();
    if (pbm : [SurfaceView] connect : already connected (cur=3, req=3)
                                      setVideoSurfaceTexture failed : -22  ) {
        reset the mediaplayer source and call prepare
    }
} 
```

如何找到此错误以再次重新启动媒体播放器？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T12:16:17.223

我们可以通过以下方式避免这个问题......

```
 mediaPlayer.setDisplay(null);

   mediaPlayer.reset(); 
```

在此之后再次设置surfaceholder，然后再启动媒体播放器

```
 mediaPlayer.setDisplay(surfaceHolder1);

    mediaPlayer.start();  in onprepared notification. 
```

# javascript - 整个项目的 Git 一个仓库（前端 + node.js）

> ID：12072379
> 
> 赞同：1
> 
> 时间：2012-08-22T11:45:51.603
> 
> 标签：javascript, git, node.js

假设我有一个项目，由以下部分组成：

1.  前端应用程序 (JavaScript)
2.  后端应用程序 (Node.js)

为前端应用程序和 node.js 后端应用程序设置一个文件夹是否明智？或者在什么情况下将它分成不同的回购是合理的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T12:08:16.757

后端是否本质上与前端相关联，您可以想象断开后端并将其用于另一个应用程序吗？如果您可以将它与另一个应用程序一起使用，那么它应该是单独的存储库，但如果不能，那么最好将它作为两个文件夹保存在同一个存储库中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T12:36:56.447

我会使用带有两个 git 子模块的主仓库。一个子模块用于前端，另一个用于后端。

每当发布前端和后端的兼容版本时，您都可以更新更新主模块上的引用并提交。

# git - 我可以将 SVN 存储库作为 GIT 存储库的来源吗

> ID：12072380
> 
> 赞同：0
> 
> 时间：2012-08-22T11:45:58.857
> 
> 标签：git, svn, migration

我在 SVN 源中有一个项目，必须将其迁移到 Git 存储库。我想做的是从现在开始提交对 Git repo 的所有更改，同时仍然从 SVN 获取最终更改，直到它被解雇。

目前，我创建了 Git Repo，用于`git svn`从原始 SVN 克隆它并将所有内容推送到 Git 中。问题是，如果我执行 Pull，我会从 Git 中获取修改，这不是我想要的。

在实践中，我试图将 SVN 存储库“分叉”到 Git 并跟踪 SVN 更改。有可能这样做吗？

提前感谢您的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:59:27.407

如果您想在让 3rd 方使用您的 SVN 存储库的同时使用 Git，您可以简单地使用任何透明的 Git<->SVN 网关，例如[SubGit](http://subgit.com)。您将继续使用 Git，忘记 SVN，SVN 用户永远不会知道您有 Git 界面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:59:56.763

目前，`git svn rebase`如前所述，有 . 可以让您从`svn`.

请注意，目前有一个用于添加 svn 遥控器的 GSoC 项目。它目前是补丁系列的第五个版本。

`git svn rebase`但是，这会给您带来极端问题，例如，如果您推送到公共存储库并且`git svn rebase`. 出于这个原因，您不能将更改推`svn`送到主`git`存储库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T11:50:39.160

是的，您可以这样做，在您的 git 存储库中，该`master`分支正在跟踪`git-svn`，因此当您运行它时，它会使用 SVN 中的内容进行`git svn rebase`更新。`master`在同一个存储库中，您可以拥有另一个定期合并`master`但包含不会发送回 SVN 的修改的分支。

从 svn 迁移到 git 时，我们的工作流程与[此答案](https://stackoverflow.com/a/4238528/592392)中描述的相同。

# smartgwt - SmartGWT、TabSet、向左移动标签标题

> ID：12072381
> 
> 赞同：0
> 
> 时间：2012-08-22T11:46:01.163
> 
> 标签：smartgwt

我已经在我的 GWT 应用程序中添加了一个带有几个选项卡的选项卡集，现在我想将选项卡标题向左移动一点。不是选项卡窗格，而是小选项卡标题。它们位于标签集的顶部。

有谁知道如何做到这一点？我更愿意以编程方式进行，但我也在研究如何使用 css 来实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T19:25:54.037

好的，所以现在我已经解决了这个问题，但我仍然希望有一个更好、更简单的解决方案。我将企业主题文件夹复制到我的 WAR（按照快速入门指南第 9 章）。我编辑了`load_skin.js`文件，在其中找到了名为`layoutStartMargin`（在第 6 节中的 Tabsets 中）的属性，并将其更改为我想要的缩进值。

我试图`TabSet.setProperty`用属性的名称和我的值来调用，但我得到了一个 JavaScriptException: (TypeError): widget is null 它可以工作，但我觉得它可以用另一种方式完成。对此有何评论？

# javascript - 来自 JSON 对象的多维数组

> ID：12072387
> 
> 赞同：0
> 
> 时间：2012-08-22T11:46:22.693
> 
> 标签：javascript, json

从下面的 JSON 对象

```
{cols:[{"id":"t","label":"Title","type":"string"},{"id":"l","label":"Avg ","type":"string"},{"id":"lb","label":"High","type":"string"},{"id":"lo","label":"Low","type":"string"}],rows:[{"c":[{"v":"Change navigation"},{"v":5.6666666666667},{"v":"10"},{"v":"1"}]},{"c":[{"v":"Executive leadership"},{"v":6.0666666666667},{"v":"7"},{"v":"3"}]},{"c":[{"v":"Business ownership"},{"v":5.8095238095238},{"v":"10"},{"v":"2"}]},{"c":[{"v":"Change enablement"},{"v":6.4285714285714},{"v":"9"},{"v":"5"}]}]} 
```

我怎么能得到类似的东西

```
[['Change navigation',6.5333333333333],['Executive leadership',6.0666666666667],['Business ownership',5.8095238095238],['Change enablement',6.4285714285714]] 
```

有人从this中发布了一维数组的代码。无法在javascript中找出多维

```
var arr = [],
i = 0;
for (; i < json.rows.length; i++) {
arr.push(json.rows[i].c[0].v + '=' + json.rows[i].c[1].v); 
```

}

这使

```
['Change navigation=6.5333333333333','Executive leadership=6.0666666666667', 'Business ownership=5.8095238095238','Change enablement=6.4285714285714'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:48:53.240

不要推送连接的字符串，而是将整个数组推送到现有数组：

```
var arr = [];
for(var i = 0, l = json.rows.length; i < l; i++) {
    arr.push([ json.rows[i].c[0].v, json.rows[i].c[1].v ]);
} 
```

# php - ajax 表单提交的编码问题

> ID：12072389
> 
> 赞同：2
> 
> 时间：2012-08-22T11:46:32.307
> 
> 标签：php, javascript, ajax, forms

我正在使用一个希望不会过时的方法的简单教程来提交带有 ajax 的表单，可以在[这里找到](http://www.simonerodriguez.com/ajax-form-submit-example/)

我担心（和问题）是，当我提交特殊字符（如希腊字母*αβγδ*等）时，它们会被编码，但我无法将它们解码以使其看起来正确......

我尝试了在线字符串[编码器/解码器](http://coderstoolbox.net/string/)，以找出正确的方法，而我得到的是 UTF-8 中的简单 URL 解码就可以了。不幸的是，这不适用于我的示例，并且字符保持不变。

我要解码的字符串是这个

```
%u03C3%u03B5 %u03B5%u03C5%u03C7%u03B1%u03C1%u03B9%u03C3%u03C4%u03CE %u03C0%u03BF%u03BB%u03CD 
```

结果应该是

```
σε ευχαριστώ πολύ 
```

我正在用 php 和 javascript 处理这个表单。可以在[此处](http://www.simonerodriguez.com/wp-content/plugins/downloads-manager/upload/ajaxsbmt.js)找到执行编码并可能导致问题的 js 文件 至于其余脚本，形式与示例中的相同，响应 php 只是回显`_POST`值。

任何帮助都感激不尽！多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:10:10.157

在将数据发送到您的 php 脚本之前尝试`encodeURIComponent()`使用 javascript。它应该在 php.ini 中自动正确解码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T11:56:24.783

尝试这个：

```
unescape('%u03C3%u03B5 %u03B5%u03C5%u03C7%u03B1%u03C1%u03B9%u03C3%u03C4%u03CE %u03C0%u03BF%u03BB%u03CD'); 
```

### [演示](http://jsfiddle.net/vn5Xj/)

# c++ - 在 CodeBlocks 中链接 Boost 库（使用 MinGW）

> ID：12072390
> 
> 赞同：1
> 
> 时间：2012-08-22T11:46:36.207
> 
> 标签：c++, boost, mingw

近三天来，我一直在尝试使用 mingw 让 boost 库在 CodeBlocks 中正常工作。在我自己设法解决的许多问题之间，现在我被困住了，这让我发疯。

我已经多次使用发送到的不同标志构建了该库，`bjam`但每次在 CodeBlocks 中使用这些库时，我都会得到相同的结果。很多行与

```
undefined reference to `___gxx_personality_sj0'
undefined reference to `__Unwind_SjLj_Register'
undefined reference to `__Unwind_SjLj_Resume'
undefined reference to `__Unwind_SjLj_Unregister' 
```

在人们开始抨击我之前，我在来这里之前已经搜索了问题。几乎所有的线程（[这里](https://stackoverflow.com/questions/7751640/undefined-reference-to-gxx-personality-sj0)和[这里](https://stackoverflow.com/questions/2189681/undefined-references-when-trying-to-link-qt-app-with-my-static-library)以及其他）都说这个问题来自于 boost 是用编译器构建的，现在我试图在 CodeBlocks 中使用另一个不同的编译器。我一次又一次地检查，我只有一个`MinGW`可用的安装。我检查了我的`Path`变量，里面没有任何不需要的东西，只有我想使用的 MinGW 的 bin 文件夹。我没有安装任何 QT，所以从那里没有第二个 MinGW。另外，我下载了**没有**捆绑 MinGW 的 CodeBlocks。

下面我将列出我采取的步骤：

1)`bootstrap.bat mingw`构建 bjam

2）如此[处](http://wiki.codeblocks.org/index.php?title=BoostWindowsQuickRef)`bjam --toolset=gcc "--prefix=<installpath>" install`所述

3）按照步骤2中的链接中的其余步骤进行操作）

4) 添加`Boost.Filesystem`, `Boost.System`,`Boost.DateTime`和(Boost.Log`Boost.Thread`的`Boost.Regex`依赖项取自[这里](http://boost-log.sourceforge.net/libs/log/doc/html/log/installation.html))

5）复制/粘贴[此示例](http://boost-log.sourceforge.net/libs/log/doc/html/log/tutorial.html#log.tutorial.trivial)

我尝试构建时 CodeBlocks 使用的命令：

> mingw32-g++.exe -Wall -fexceptions -g
> -ID:\libs\boost\include\boost-1_51 -c D:\example\example\main.cpp -o obj\Debug\main.o
> 
> mingw32-g++.exe -LD:\libs\boost\lib -o bin\Debug\example.exe obj\Debug\main.o D:\libs\boost\lib\libboost_filesystem-mgw44-mt-d-1_51.a D:\libs\boost\lib\libboost_system-mgw44-mt-d-1_51.a D:\libs\boost\lib\libboost_date_time-mgw44-mt-d-1_51.a D:\libs\boost\lib\libboost_thread -mgw44-mt-1_51.a D:\libs\boost\lib\libboost_regex-mgw44-mt-d-1_51.a D:\libs\boost\lib\libboost_log_setup-mgw44-mt-d-1_51.a

还有什么可能是造成这种情况的原因？

**后来补充：**

CodeBlocks 工具链可执行文件是：

```
c++ compiler: mingw32-g++.exe
linker for dynamic libs: mingw32-g++.exe
linker for static libs: ar.exe 
```

所有 .EXE 都在它们应该在的位置，但添加此信息可能很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:48:11.913

修复了问题。在`Mankarse`向我询问我检查的 gcc 版本后，它与用于编译库（4.4）的版本相同。我决定升级到最新版本（4.7）再试一次。更新后，我注意到编译后的库名称中仍然`mgw44`包含它们的名称，这让我认为也许我确实安装了第二个 mingw。

在检查了我的 Path 变量中的每个文件夹之后，我得出的结论是，我几周前安装的 Strawberry Perl 也捆绑了一个 gcc 版本。在我删除它并从 sctratch 重建提升后，错误消失了。

如果有人再次遇到此问题并确定他只有一个 mingw，以供将来参考，只需像这样再次检查：

1.  从 Path 变量中删除带有 mingw exe 的 bin 文件夹

2.  打开命令提示符并键入`g++`. 如果它说类似的`g++: fatal error: no input files`话，那么您有多个 mingw 安装。

# iphone - 如何根据 iPad 中标签大小的增加增加高度表单元格行？

> ID：12072393
> 
> 赞同：0
> 
> 时间：2012-08-22T11:46:49.993
> 
> 标签：iphone, objective-c, uitableview

当我在 textview 上写长字时，我的代码第一次不起作用，然后我的标签大小增加但表格高度不会随着标准标签宽度和高度的增加而增加。我的代码有什么问题？

我在视图 didload 方法中写了这两行

```
Addresslbl  = [[UILabel alloc]initWithFrame:CGRectMake(300, 10, 250, 30)];
    Addresslbl.backgroundColor = [UIColor whiteColor]; 
```

和以下代码写入`-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{`

```
if(indexPath.row == 0 && indexPath.section == 3)
        {

                NSString *dispalynotes=@"";
                dispalynotes=Peopledetailmodel.Address;
           // dispalynotes=Addresslbl.text;
                CGSize labelSize = CGSizeMake(200.0, 20.0);

                if ([dispalynotes length] > 0)
                    labelSize = [dispalynotes sizeWithFont: [UIFont boldSystemFontOfSize: 17.0] constrainedToSize: CGSizeMake(labelSize.width, 1000) lineBreakMode: UILineBreakModeWordWrap];
                return 25.0 + labelSize.height;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:55:17.653

您在方法 heightForRowAtIndexPath 中应用了相同的逻辑

```
 -(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath  *)indexPath{

 if ([dispalynotes length] > 0)
                labelSize = [dispalynotes sizeWithFont: [UIFont boldSystemFontOfSize:   17.0] constrainedToSize: CGSizeMake(labelSize.width, 1000) lineBreakMode: UILineBreakModeWordWrap];
            return 25.0 + labelSize.height;

} 
```

# c# - Spinner 包含用户名和用户 ID，只有用户名可见

> ID：12072394
> 
> 赞同：1
> 
> 时间：2012-08-22T11:46:51.620
> 
> 标签：c#, xamarin.android, android-spinner

我试图创建一个包含用户名和用户 ID 的微调器。我只想显示用户名而不是用户 ID。但是当一个用户被选中时，我想知道那个用户的用户 ID 是什么。我为用户 ID 使用唯一标识符 ID。

帮助将不胜感激，谢谢。

编辑：解决了！我只是保留一个数组，其 ID 与微调器的顺序相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:09:00.607

您可以为您的微调器制作自定义适配器：

```
public class CustomSpinnerAdapter : BaseAdapter
{
    readonly Activity _context;
    private List<Users> _items;
    public ComboBoxAdapter(Activity context, List<Users> listOfItems)
    {
        _context = context;
        _items = listOfItems;
    }

    public override int Count
    {
        get { return _items.Count; }
    }

    public override Java.Lang.Object GetItem(int position)
    {
        return position;
    }

    public override long GetItemId(int position)
    {
        return position;
    }

    public override View GetView(int position, View convertView, ViewGroup parent)
    {
        var item = _items[position];
        var view = (convertView ?? context.LayoutInflater.Inflate(Android.Resource.Layout.SimpleSpinnerDropDownItem,
            parent,
            false));
        var name = view.FindViewById<TextView>(Android.Resource.Id.Text1);
        name.Text = item.Name;
        return view;
    }

    public Users GetItemAtPosition(int position)
    {
        return _items[position];
    }
} 
```

您还需要创建包含用户信息的类：

```
public class Users
{
  int Id{get;set;}
  string Name{get;set;}
} 
```

然后，您可以创建并使用数据填充微调器：

```
[Activity(Label = "Spinner Activity")]
public class SpinnerActivity : Activity
{
    private List<Users> _users;
    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        SetContentView(Resource.Layout.LayoutWithSpinner);
        var spinner = FindViewById<Spinner>(Resource.Id.spinner);
        //you need to add data to _users before creating adapter
        var adapter = new CustomSpinnerAdapter(this,_users);
        spinner.Adapter = adapter;
        spinner.ItemSelected += SpinnerItemSelected;
    }

    private void SpinnerItemSelected(object sender, AdapterView.ItemSelectedEventArgs e)
    {
        Toast.MakeText(this, "Id:"+_users[e.Position].Id +" Name"+_users[e.Position].Name, ToastLength.Long).Show();
    }
} 
```

# c++ - 如何在 Code::Blocks 中向 C++ 应用程序添加版本信息

> ID：12072400
> 
> 赞同：1
> 
> 时间：2012-08-22T11:47:05.517
> 
> 标签：c++, versioning, codeblocks

我想将版本信息添加到我的应用程序中，但我不知道该怎么做。

我希望能够让我的应用在 Explorer 中看起来像这样：

![IE浏览器](../Images/87c9ae5141c4ccf70f31aa5cba09bc6a.png)

但我不知道怎么做。你能帮助我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:08:10.513

您必须创建、编译和链接包含资源的资源文件`VERSIONINFO`。有关资源文件的更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380599%28v=vs.85%29.aspx)。

# silverlight - RadGridView 不显示 PropertyChanged

> ID：12072409
> 
> 赞同：0
> 
> 时间：2012-08-22T11:47:28.487
> 
> 标签：silverlight, viewmodel, inotifypropertychanged, radgridview

第一次问题问了很长时间的潜伏者。

我正在开发一个具有实现 RadGridView 的视图的 Silverlight 应用程序。我有一个 ViewModel，它将 PersonSkills 的 ObservableCollection 绑定到该 RadGridView。在模型中，PersonSkills 是多对一技能。描述是技能的属性。他们通过 SkillId 上的外键加入（抱歉没有足够的代表来发布图片）

我在 RadGridView 中的列绑定到 Skill.Description 属性。一切正常，直到我在此处未表示的数据表单中进行编辑。PersonSkills 集合触发，我可以看到更改的值，并且更改发布到数据库，但 RadGridView 显示一个空单元格，而不是像它应该显示的 Skill.Description。

我需要做什么才能让 RadGridView 反映对作为 PersonSkills 集合的子项的 Skill 集合的 Property 所做的更改？

```
 <telerik:RadGridView
        x:Name="skillsGrid"
        ItemsSource="{Binding PersonSkills, Mode=TwoWay}"
        SelectedItem="{Binding CurrentPersonSkill, Mode=TwoWay}"
        ColumnWidth="*">
        <telerik:RadGridView.Columns>
            <telerik:GridViewDataColumn
                Header="SKILL"
                DataMemberBinding="{Binding Skill.Description}"
                IsGroupable="False"
                Width="2*" />
        </telerik:RadGridView.Columns>
   </telerik:RadGridView>

private ObservableCollection<PersonSkill> personSkills;
    public ObservableCollection<PersonSkill> PersonSkills
    {
        get
        {
            return this.personSkills;
        }
        set
        {
            this.personSkills = value;
            this.OnUiThread(() =>
            {
                this.RaisePropertyChanged("PersonSkills","CurrentPersonSkill");
            });

        }
    }

private PersonSkill currentPersonSkill;
    public PersonSkill CurrentPersonSkill
    {
        get
        {
            return this.currentPersonSkill;
        }
        set
        {
            if (this.currentPersonSkill != value)
            {
                this.currentPersonSkill = value;
                this.RaisePropertyChanged("PersonSkills","CurrentPersonSkill");
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:34:23.483

我应该提到我也在使用 RadDatForm。这是罪魁祸首。我放弃了使用 RadDataForm。更麻烦的是值得。相反，我通过视图模型中的绑定命令实现了一个本土数据表单。更清洁恕我直言。希望它可以帮助别人。

```
<Grid
        x:Name="readOnlyForm"
        Visibility="{Binding RequestFormInEdit, Converter={StaticResource InvertedBooleantToVisibilityConverter}}">
        <StackPanel>
        <TextBlock
            Text="{Binding PersonSkill.Skill.Description}"/>
        </StackPanel>
        <StackPanel>
            <telerik:RadButton
                Command="{Binding AddCommand}"
                Tag="ADD">
            </telerik:RadButton>
            <telerik:RadButton
                Command="{Binding EditCommand}"
                Tag="EDIT">
            </telerik:RadButton>
        </StackPanel>
    </Grid>
    <Grid
        x:Name="editForm"
        Visibility="{Binding FormInEdit, Converter={StaticResource BooleantToVisibilityConverter}}">
        <Grid>
            <StackPanel>
                <Grid>
                    <TextBlock
                        Text="SKILL"/>
                    <TextBox                                                                                                                Text="{Binding PersonSkill.Skill.Description, Mode=TwoWay}"/>
                </Grid>
            </StackPanel>
            <StackPanel>
                <telerik:RadButton
                    Tag="SAVE"
                    Command="{Binding SubmitCommand}">
                </telerik:RadButton>
                <telerik:RadButton
                    Tag="CANCEL"
                    Command="{Binding CancelCommand}">
                </telerik:RadButton>
            </StackPanel>
        </Grid>
    </Grid>
</Grid> 
```

在我的视图模型中，我添加了以下内容

```
private bool FormInEdit;
    public bool FormInEdit
    {
        get
        {
            return FormInEdit;
        }
        private set
        {
            if (FormInEdit != value)
            {
                FormInEdit = value;
                RaisePropertyChanged("FormInEdit");
            }
        }
    }

    private DelegateCommand addCommand;
    public DelegateCommand AddCommand
    {
        get
        {
            if (addCommand == null)
            {
                addCommand = new DelegateCommand(
                   OnAddCommand);
            }
            return addCommand;
        }
    }
    private void OnAddCommand()
    {

        // create a new personskill code goes here

        // and begin edit

        FormBeginEdit();

    }
    private DelegateCommand editCommand;
    public DelegateCommand EditCommand
    {
        get
        {
            if (editCommand == null)
            {
                editCommand = new DelegateCommand(
                    OnEditCommand);
            }
            return editCommand;
        }
    }
    private void OnEditCommand()
    {
       if (CurrentPersonSKill != null)
       {
            if (FormInEdit)
            {

            }
            else
            {
                FormBeginEdit();
            }
        }

    }

    private DelegateCommand cancelCommand;
    public DelegateCommand CancelCommand
    {
        get
        {
            if (cancelCommand == null)
            {
                cancelCommand = new DelegateCommand(
                    OnCancelCommand,
                                                                                            () => (CurrentPersonSkill != null) && FormInEdit);
            }
            return cancelCommand;
        }
    }
    private void OnCancelCommand()
    {
        if (CurrentPersonSkill != null)
        {
            FormCancelEdit();
        }
        FormEndEdit();
    }

    private DelegateCommand submitCommand;
    public DelegateCommand SubmitCommand
    {
        get
        {
            if (submitCommand == null)
            {
                submitCommand = new DelegateCommand(
                    OnSubmitCommand,
                                                                                            () => (CurrentPersonSkill != null) && FormInEdit);
            }
            return submitCommand;
        }
    }
    private void OnSubmitCommand()
    {
            if (CurrentPersonSkill != null)
            {
                //submit the PersonSkill here
                FormEndEdit();
            }
    }

    private void FormBeginEdit()
    {
        if CurrentPersonSkill != null)
        {
            FormInEdit = true;
        }
    }
    private void FormEndEdit()
    {
        FormInEdit = false;
    }
    private void FormCancelEdit()
    {
        if CurrentPersonSkill != null)
        {
            FormInEdit = false;
        }
    }

    private void OnViewModelPropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
    {
        switch (e.PropertyName)
        {
            case "FormInEdit":
                SubmitCommand.RaiseCanExecuteChanged();
                CancelCommand.RaiseCanExecuteChanged();
                break;
            case "CurrentPersonSkill":
                SubmitCommand.RaiseCanExecuteChanged();
                CancelCommand.RaiseCanExecuteChanged();
                break;
        }
    } 
```

# ios - CAKeyframeAnimation : 停止时内容变回第一张图片

> ID：12072410
> 
> 赞同：4
> 
> 时间：2012-08-22T11:47:28.843
> 
> 标签：ios, quartz-graphics, caanimation, cakeyframeanimation

`CALayer`我使用以下代码为 a 的内容设置动画：

```
CAKeyframeAnimation *countanimation = [CAKeyframeAnimation animation];
NSArray *images = [NSArray arrayWithObjects:(id)[UIImage imageNamed:@"number3"].CGImage, 
                        (id)[UIImage imageNamed:@"number2"].CGImage, 
                        (id)[UIImage imageNamed:@"number1"].CGImage, nil];
[countanimation setKeyPath:@"contents"];
[countanimation setValues:images];
[countanimation setCalculationMode:kCAAnimationDiscrete];
[countanimation setDuration:3.0f];
[countanimation setDelegate:self];
[countanimation setAutoreverses:NO];
[countanimation setRemovedOnCompletion:NO];
[countanimation setValue:@"Countdown" forKey:@"name"];
[countDown addAnimation:countanimation forKey:nil]; 
```

并且想在动画停止时隐藏图层：

```
- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag
{
    if([[anim valueForKey:@"name"] isEqual:@"Countdown"])
    {
        [countDown setHidden:YES];
        ...
    }
} 
```

问题是该层与原始图像（编号3）一起闪烁一次，然后隐藏。

我想知道为什么即使我设置`removedOnCompletion`为`NO`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T05:55:50.863

您可以将`FillMode`属性与`removedOnCompletion`属性结合使用，以在结束后将第一帧设置回其内容`repeatCount`。

```
[countanimation setFillMode:kCAFillModeBoth];
[countanimation setRemovedOnCompletion:NO]; 
```

我认为这两行代码可以帮助您获得所需的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-31T10:50:53.080

我曾经 `animation.fillMode = kCAFillModeForwards;`解决过这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T03:08:29.597

我把原图换成了number1，问题就解决了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-30T12:57:57.143

**斯威夫特 4+5**

更新 Jami 对 Swift 4 和 5 的回答

```
colorAnimation.fillMode = .both
colorAnimation.isRemovedOnCompletion = false 
```

# octave - 在 Octave 上设置曲面图的透明度

> ID：12072412
> 
> 赞同：4
> 
> 时间：2012-08-22T11:47:32.960
> 
> 标签：octave

我正在运行 Octave 3.4.0 并想创建一个透明的曲面图。`facealpha`但是，在弄乱、和时`edgealpha`，我无法这样做。`alphadata``alphadatamapping`

创建不透明表面的示例代码：

```
p = peaks(40);
f1 = figure(10);clf
s1 = surface(p)
view(3)
xlabel('x');ylabel('y');
hold on;plot3([0 40],[40 0],[-10 10],'k')
set(s1,'edgecolor','none')
set(s1,'facealpha',0.2) 
```

下图中给出的结果。正如你所看到的，在开始时绘制的线隐藏在表面后面，即使表面是半透明的。这是我的 Octave 版本中的错误，还是我错过了什么？

![在此处输入图像描述](../Images/8ced506097fad6c6d21cf986aa983c25.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:13:04.623

这适用于我在 Octave 3.6.2 上使用 gnuplot 作为图形工具包。所以你最好升级你的 Octave 安装。

不过要注意两点：

1.  在表面后面的对角线部分没有用打火机绘制，所以看起来仍然很奇怪；
2.  使用新的实验性 fltk 图形工具包，它根本不起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-11T21:53:57.140

我同意 Vidar：他的代码不适用于最新的 Octave 3.8.1 (Cygwin 1.7.30(0.272/5/3) setup_x86_64.exe:2.850 xterm 305-1 Gnuplot 4.6.3-3)。facealpha 只是让 surf 的颜色变浅。然而，一种解决方法是`mesh`八度音程中的命令具有丢弃面部的功能：（`hidden`手动[）](http://www.gnu.org/software/octave/doc/interpreter/Three_002dDimensional-Plots.html#XREFhidden)。

所以

```
p = peaks(40);
f1 = figure(10);clf
s1 = mesh(p)
view(3)
xlabel('x');ylabel('y');
hold on;plot3([0 40],[40 0],[-10 10],'k')
hidden('off') 
```

生产

![代码输出](../Images/951476be9f82ab6b7639dd8ff206381a.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-28T20:50:50.563

这实际上在 Octave 5.1.0 中对我有用，但命令的顺序很重要。您需要在绘制线之前设置 alpha。只尝试它自己的表面并使用 alpha - 它有效：

```
>> s1 = surface(p)
s1 = -2.7876
>> view(3)
>> set(s1,'facealpha',0.5)
>> colormap jet
>> grid on; % so you can see the grid through the transparent surface: 
```

[透明冲浪](https://i.stack.imgur.com/SpIEE.png)

# facebook - 使用 Heroku 部署 Flash 应用程序

> ID：12072415
> 
> 赞同：1
> 
> 时间：2012-08-22T11:47:58.307
> 
> 标签：facebook, git, facebook-graph-api, heroku, amazon-s3

前一段时间，

我使用 Heroku 服务器在 Facebook 上部署了我的第一个 Flash 游戏。当然，我正在将 swf-game 文件推送到 git 存储库。不幸的是，我的 swf 文件大约 9 mb 大，并且随着游戏的每个新版本，git 存储库都变得更大。现在它大约是 300 mb，我不能再拉它了。

有没有办法从存储库中删除旧版本的 swf 文件？

如果没有，是否可以将 swf 文件存储在 amazons-S3 服务器上并仍然使用 heroku 部署？

我已经阅读了Heroku 网站上的[文档](https://devcenter.heroku.com/articles/s3)，创建了一个 S3 帐户并将密钥存储为“应用程序配置变量”，但我还远远没有让它工作，因为我不明白如何将 S3 与 Heroku 连接。

或者也许我做错了，我的问题有一个简单的解决方案？

因此，任何帮助都会受到高度赞赏（！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:52:41.310

如果只是在页面上嵌入 SWF 并且您的应用程序不需要在运行时实际与 S3 交互，则您应该需要对应用程序中的键执行任何操作。相反，只需将 SWF 上传到 S3，使其可公开访问，然后将指向它的链接放在您的应用程序中。

有关公开 URL 的更多信息，请参阅[http://aws.amazon.com/articles/5050](http://aws.amazon.com/articles/5050)上*的让每个人都可以访问对象*。

例如，托管在 S3 上的嵌入式 SWF，请参阅 view-source：http://flashtuts.s3.amazonaws.com/080_DrawingApp/Src/preview.html。请注意，此示例恰好也将 HTML 页面托管在 S3 上，但这可能在任何地方，包括 Heroku。关键是嵌入对象指向S3：

```
<object width="600" height="290" data="http://flashtuts.s3.amazonaws.com/080_DrawingApp/Src/DrawingApp.swf" type="application/x-shockwave-flash"> 
```

# java - 在 Servlet/Tomcat 中获取请求编码

> ID：12072416
> 
> 赞同：2
> 
> 时间：2012-08-22T11:48:03.213
> 
> 标签：java, http, tomcat, servlets, character-encoding

我需要获取 HTTP 请求的实际字符编码。

我可以使用`HttpServletRequest.getCharacterEncoding()`，但是`null`当请求中未指定编码时，它会返回。[根据常见问题解答](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q1)和 HTTP 规范`ISO-8859-1`，我可以假设是这样。

我仍然宁愿调用一个简单地告诉我它是什么的方法，而不是根据规范假设事物。有没有这样的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:36:42.227

当有人发送请求时，他/她有责任为他们的请求设置正确的编码，如果他/她没有，那么它应该被安全地视为垃圾。推测服务器端的请求编码不是明智之举，因为这会导致以后出现意想不到的问题。请求失败总比自己承担事情要好。此外，尽可能早地使请求失败，因为不必要的处理会消耗资源，如果保护不当，可能会被证明是潜在的利用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:24:19.807

如果请求标头中不存在它，则无法获取它。

**但是，它与您**在呈现 POST 表单的 HTML 页面的响应中使用的编码相同。通常，这样的 HTML 页面由 JSP 提供，其默认响应编码确实是 ISO-8859-1，但可以通过

```
<%@page pageEncoding="UTF-8"%> 
```

这将设置`Content-Type: text/html;charset=UTF-8`响应标头，进而指示网络浏览器使用相同的字符集对任何提交的表单数据进行编码。要使用此编码正确处理 POST 请求正文，您应该显式调用

```
request.setCharacterEncoding("UTF-8"); 
```

事先当`getCharacterEncoding()`返回`null`。

### 也可以看看：

*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:54:05.593

如果http数据包中没有指定编码，那么这个函数就会有问题，一时间受到了很多批评。

显然在你的 doPost 方法中尽早调用它更有用，但我不打扰，我直接使用 Spring 的 CharacterEncodingFilter：

[http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/web/filter/CharacterEncodingFilter.html](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/web/filter/CharacterEncodingFilter.html)

它需要做更多的工作，但从长远来看，它会让生活更轻松。

* * *

没有简单的方法可以检查这一点。但是，一旦您获得请求的主体，您可以尝试从中创建一个字符串并捕获编码异常以确定编码。但我不认为这很优雅。

* * *

这是另一篇关于在处理之前检查请求的有效性的好文章：

[https://www.owasp.org/index.php/How_to_add_validation_logic_to_HttpServletRequest](https://www.owasp.org/index.php/How_to_add_validation_logic_to_HttpServletRequest)

# django - “NoneType”对象没有属性“模型”

> ID：12072417
> 
> 赞同：1
> 
> 时间：2012-08-22T11:48:03.367
> 
> 标签：django, forms, nonetype

提交表单时出现奇怪的错误。当调用 form.is_valid() 方法时，堆栈会向下运行，直到一些内置代码尝试访问一个属性，这并不常见......我不明白问题出在哪里。我只是跑

```
mform = InvAddMainForm(request.POST)
    if mform.is_valid():
        ... 
```

正如我在其他表格上做过几次而没有遇到麻烦一样。知道是什么原因造成的吗？

编辑：有问题的表格如下所示：

```
class InvAddMainForm(ModelForm):
    class Meta:
        model = Maintenance
        fields = ('serial','end','discount','vat')
    def __init__(self, *args, **kwargs):
        super(InvAddMainForm, self).__init__(*args, **kwargs)
        # The queryset of the field 'serial' is set to None here, as it is
        # Derived from the context
        self.fields['serial'] = SelectMaintenanceSerialField(required=True, queryset=None)
        self.fields['serial'].empty_label = None
        self.fields['end'].initial = Option.objects.get(pk='enddate').value
        self.fields['vat'].empty_label = None
        self.fields['vat'].queryset = Vat.objects.filter(disabled=False).order_by('name') 
```

视图的相关部分如下所示：

```
if 'addmain' in request.POST:
        mform = InvAddMainForm(request.POST)
        print str(mform)
        if mform.is_valid():
            mf = mform.save(commit=False)
            it = mf.serial

            if it.disabled:
                raise Exception('Cannot buy maintenance to disabled license')

            # check if maintenance for given item already is on invoice
            if Maintenance.objects.filter(invoice=inv, serial=it):
                raise Exception('Item already has maintenance on draft')

            startdate = None

            # continue maintenance
            latest = it.latest_main()
            if latest:
                startdate = latest.end

            # if maintenance date used, add one day
            if startdate:
                startdate += timedelta(days=1)

            if not startdate:
                startdate = it.pdate

            if not startdate:
                itinv = it.invoice()
                if itinv:
                    startdate = itinv.idate

            # otherwise use quote date
            if not startdate:
                ii = ItemInv.objects.filter(invoice=inv, item=it)
                if ii:
                    startdate = inv.qdate

            if not startdate:
                raise Exception('Could not determine start date')

            if startdate > mf.end:
                raise Exception("Start date after end date")

            # add back maintenance
            if startdate < inv.qdate:
                back = Maintenance(serial = mf.serial,
                                   invoice = inv,
                                   back = True,
                                   start = startdate,
                                   end = inv.qdate,
                                   price = it.prod.prodprice_set.get(cur=inv.cur).bmprice,
                                   discount = mf.discount,
                                   vat = mf.vat,
                                   parent = latest)
                latest = back.save()
                startdate = inv.qdate

            nm = Maintenance(serial = it,
                             invoice = inv,
                             start = startdate,
                             end = mf.end,
                             price = it.prod.prodprice_set.get(cur=inv.cur).mprice,
                             discount = mf.discount,
                             vat = mf.vat,
                             parent = latest)
            nm.save()
            updateinvoice(inv.iid)
            return redirect('invoice.invoice.invoice', inv.iid)
else:
        mform = InvAddMainForm()
    # vat = null AND pdate = null, license imported and removed
    mform.fields['serial'].queryset = Item.objects.filter(
                                                          account__in=cust_acc
                                                          ).exclude(
                                                                    prod__in=Product.objects.filter(prodprice__mprice__exact=0, prodprice__cur=inv.cur)
                                                                    ).exclude(
                                                                              disabled=True
                                                                              ).exclude(
                                                                                        vat__isnull=True,
                                                                                        pdate__isnull=True
                                                                                        )
    mform.fields['discount'].initial = def_discount
    mform.fields['vat'].initial = Vat.objects.get(name=calcVAT(inv.customer.main_address.country.cc, inv.customer.vatnr, 'PTS'), disabled=False)
... 
```

模板只是调用 form.as_table()... 没有魔法...

回溯如下所示：

```
AttributeError at /invoice/10013/
'NoneType' object has no attribute 'model'
Request Method: POST
Request URL:    http://127.0.0.1:8000/invoice/10013/
Django Version: 1.3.1
Exception Type: AttributeError
Exception Value:    
'NoneType' object has no attribute 'model'
Exception Location: /usr/lib/python2.7/dist-packages/django/forms/models.py in to_python, line 973
Python Executable:  /usr/bin/python
Python Version: 2.7.3
Python Path:    
['/home/ruben/mnt/derby/v2',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-linux2',
 '/usr/lib/python2.7/lib-tk',
 '/usr/lib/python2.7/lib-old',
 '/usr/lib/python2.7/lib-dynload',
 '/usr/local/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages/PIL',
 '/usr/lib/python2.7/dist-packages/gst-0.10',
 '/usr/lib/python2.7/dist-packages/gtk-2.0',
 '/usr/lib/python2.7/dist-packages/ubuntu-sso-client',
 '/usr/lib/python2.7/dist-packages/ubuntuone-client',
 '/usr/lib/python2.7/dist-packages/ubuntuone-control-panel',
 '/usr/lib/python2.7/dist-packages/ubuntuone-couch',
 '/usr/lib/python2.7/dist-packages/ubuntuone-installer',
 '/usr/lib/python2.7/dist-packages/ubuntuone-storage-protocol']
Server time:    Wed, 22 Aug 2012 14:13:06 +0200
Traceback Switch to copy-and-paste view

/usr/lib/python2.7/dist-packages/django/core/handlers/base.py in get_response
                        response = callback(request, *callback_args, **callback_kwargs) ...
▶ Local vars
/usr/lib/python2.7/dist-packages/django/db/transaction.py in inner
                res = func(*args, **kwargs) ...
▶ Local vars
/home/ruben/mnt/derby/v2/invoice/invoice.py in invoice
        print str(mform) ...
▶ Local vars
/usr/lib/python2.7/dist-packages/django/utils/encoding.py in __str__
        return self.__unicode__().encode('utf-8') ...
▶ Local vars
/usr/lib/python2.7/dist-packages/django/forms/forms.py in __unicode__
        return self.as_table() ...
▶ Local vars
/usr/lib/python2.7/dist-packages/django/forms/forms.py in as_table
            errors_on_separate_row = False) ...
▶ Local vars
/usr/lib/python2.7/dist-packages/django/forms/forms.py in _html_output
        top_errors = self.non_field_errors() # Errors that should be displayed above all fields. ...
▶ Local vars
/usr/lib/python2.7/dist-packages/django/forms/forms.py in non_field_errors
        return self.errors.get(NON_FIELD_ERRORS, self.error_class()) ...
▶ Local vars
/usr/lib/python2.7/dist-packages/django/forms/forms.py in _get_errors
            self.full_clean() ...
▶ Local vars
/usr/lib/python2.7/dist-packages/django/forms/forms.py in full_clean
        self._clean_fields() ...
▶ Local vars
/usr/lib/python2.7/dist-packages/django/forms/forms.py in _clean_fields
                    value = field.clean(value) ...
▶ Local vars
/usr/lib/python2.7/dist-packages/django/forms/fields.py in clean
    def clean(self, value):
        """
        Validates the given value and returns its "cleaned" value as an
        appropriate Python object.
        Raises ValidationError for any errors.
        """
        value = self.to_python(value) ...
        self.validate(value)
        self.run_validators(value)
        return value
    def bound_data(self, data, initial):
        """
▶ Local vars
/usr/lib/python2.7/dist-packages/django/forms/models.py in to_python
    def to_python(self, value):
        if value in EMPTY_VALUES:
            return None
        try:
            key = self.to_field_name or 'pk'
            value = self.queryset.get(**{key: value})
        except (ValueError, self.queryset.model.DoesNotExist): ...
            raise ValidationError(self.error_messages['invalid_choice'])
        return value
    def validate(self, value):
        return Field.validate(self, value)
▼ Local vars
Variable    Value
self    
<invoice.forms.SelectMaintenanceSerialField object at 0x7f14c83dc250>
value   
u'100035'
key 
'pk' 
```

我在最后一点感到困惑，内置代码不起作用

编辑：现在，我找到了问题，但不是原因......我为表单使用了定制的表单字段。该字段称为 SelectMaintenanceSerialField。当我使用默认字段时，一切正常。自定义字段的代码如下所示：

```
class SelectMaintenanceSerialField(ModelChoiceField):
    '''
    When adding maintenance to a product on a draft; formerly,
    only the serial of the product was shown. This field allows
    for a custom label for that form
    '''
    def label_from_instance(self, obj):
        '''
        This method sets the label for each of the objects of the queryset
        '''
        item = Item.objects.get(pk=str(obj.serial))
        name = item.prod.name
        return "%s, %s"%(str(obj.serial), str(name)) 
```

此表单有问题，或者需要添加一些内容。呈现模板时，表单按预期显示，但在提交数据时显然不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:37:10.143

很抱歉打扰您...我刚刚发现了问题...自定义字段是使用空查询集创建的，因为只能在评估视图时确定查询集。当从 FORM 数据创建表单实例时，我忘记了编辑查询集。现在它按预期工作

# codeigniter - 我的模型（由 Jamie Rumbelow 撰写）- 如何在模型中使用“位置”

> ID：12072418
> 
> 赞同：3
> 
> 时间：2012-08-22T11:48:03.113
> 
> 标签：codeigniter, activerecord, model

我已经集成了 Jamie Rumbelow 我的模型，用于使用来自 github 的 codeigniter 进行活动记录查询 - [https://github.com/jamierumbelow/codeigniter-base-model](https://github.com/jamierumbelow/codeigniter-base-model)

我想使用普通的codeigniter语法来做一个带有多个参数的地方，但不知道如何使用标准的codeigniter语法，如下所示：

```
$this->db->where('active', 1);
$this->db->where('type', 'news'); 
```

谁能建议如何使用此 MY_Model 完成此操作？

例如......这有效，但只允许一列及其值 - 我将如何使用多列和值执行此操作

```
$this->news_model->get_many_by('active', 1); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-29T15:22:36.463

**MY_Model**的`get_`方法接受与 CodeIgniter 的查询构建器（以前称为 Active Record）相同的参数`where`。这意味着你可以通过一个数组：

```
$this->news_model->get_many_by(array( 'key' => 'value', 'other_key' => 'value' )); 
```

如果您正在做比这更复杂的事情，您还可以创建自己的范围方法。范围方法是在**MY_Model**中进行查找的*正确*方法。

范围方法为查找提供上下文和可读性。在您的示例中，您正在查找活跃的新闻文章，因此我们可以在我们的模型上为这些确切的文章创建范围方法：

```
class News_model extends MY_Model
{
    public function active_news()
    {
        $this->db->where('active', 1);
        $this->db->where('type', 'news');

        return $this;
    }
} 
```

由于我们正在返回`$this`，我们可以将这些方法链接到其他**MY_Model**方法。在我们的控制器中：

```
$this->data['news'] = $this->news_model->active_news()->get_all(); 
```

这为我们提供了更令人难忘、更清晰、更人性化的语法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T11:54:39.370

对它进行排序 - 对于其他有同样问题的人 - 你需要传递一个数组。

```
$this->news_model->get_many_by( 
          array('active' => 1, 'another_column'=> 'value')
        ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T13:51:35.783

[本指南包含使用 MY_Model 所需的一切](http://www.codebyjeff.com/blog/2012/01/using-jamie-rumbelows-my_model)- 将其视为非官方手册/文档！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-01T19:36:27.593

您可以对多个条件执行类似的操作并使用**LIKE**操作：

```
$conditions = [
        'id' => $id
        ,'created_at LIKE' => $date.'%'
];
$object = $this->model1->get_by($conditions); 
```

这会给你查询：

```
SELECT * FROM table WHERE id = "$id" AND created_at LIKE "$date"% 
```

# linux - Linux：随机自动截屏

> ID：12072424
> 
> 赞同：0
> 
> 时间：2012-08-22T11:48:21.987
> 
> 标签：linux, automation, cron, screenshot

我希望在一天中的随机时间自动截取屏幕截图，最好是安排为独立随机时间安排的 30 个屏幕截图。

这样我就可以获得一种关于我如何度过我的时间的有代表性的样本，也可以向其他人展示，作为一种提高我实际做有用事情的动力的方式。我希望时间是随机的，这样我就不会看时间，而只会在截屏之前开始做有用的事情；这就像一个老板出乎意料地检查我。我还想要在截屏后立即收到某种通知。

我在一台标准的 Ubuntu 笔记本电脑上。我的问题：我对 cron-fu 不够精通，无法弄清楚如何让它在随机时间安排任务。我也不知道如何从命令行进行通知。

这对我来说似乎是一个相当困难的问题。你们中的任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:55:27.137

有`import`。[在这里](http://www.imagemagick.org/script/import.php)阅读。例子：

```
import -window root -delay 200 screenshot.png 
```

你可以写一个脚本来随机化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:57:53.930

不确定`cron`随机启动特定任务，但您当然可以将其编码到脚本中，该脚本将随机启动应用程序以截取屏幕截图并通过 CLI 或 GUI 执行某种通知。

# windows-runtime - 是否可以在 WinRT 应用程序中使用 COM 组件？

> ID：12072428
> 
> 赞同：2
> 
> 时间：2012-08-22T11:48:36.640
> 
> 标签：windows-runtime, unmanaged

是否可以在 WinRT (Windows 8) 应用程序中使用 COM 组件？

# javascript - Class.create() 上的昏迷（rails 插件）javascript 错误

> ID：12072430
> 
> 赞同：0
> 
> 时间：2012-08-22T11:48:43.657
> 
> 标签：javascript, ruby-on-rails

我在我的 rails 2.2.2 应用程序中使用 comatose 版本 2.0.5。它使用标准的 comatose 管理布局，加载自己的 javascript 库。

它在这条线上爆炸了：

```
Layout.LiquidBase = Class.create(); 
```

说`Uncaught ReferenceError: Class is not defined`。这是镀铬的。

我的 javascript 知识不完整，我不知道这是否可能是由于 chrome 使用了更高版本的 javascript 或什么？还是期望加载原型？有什么想法吗？

谢谢，最大

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:00:14.793

它与原型相关：我通过包含prototype.js 解决了这个问题。

很抱歉回答我自己的问题，但认为最好将其留在这里作为记录而不是删除它。

# php - mb_convert_encoding 问题

> ID：12072431
> 
> 赞同：6
> 
> 时间：2012-08-22T11:48:45.783
> 
> 标签：php, encoding, utf-8

我对 PHP 函数 mb_detect_encoding 有一些问题。我无法将其转换为 ISO-8859-1。有什么帮助吗？

**代码：**

```
$str = "åäö";
$encoding = mb_detect_encoding($str);
echo $encoding;

$encoding = mb_detect_encoding(mb_convert_encoding($str, "ISO-8859-1"));
echo $encoding; 
```

**输出：**

> UTF-8
> 
> UTF-8

**更新，解决方案：**

我将 mb_detect_order 更新为 array('UTF-8', 'ISO-8859-1') 并且它有效。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T12:41:02.833

你实际上并没有转换你的字符串。相反，对 的调用`mb_convert_encoding`并不假定原始字符串是 UTF-8 格式的。调用之前的字符串是一个字节序列，可能已经是 ISO-8859-1（并且会以不同的方式表示项目）。`mb_detect_encoding`您可以通过在字符串上使用而不是调用,`bin2hex`并在转换调用后查看字节序列来看到这种情况。你会看到字节序列没有改变。

要使转换工作，您需要告诉它（在这种情况下）原始编码。利用：

```
mb_convert_encoding($str, 'ISO-8859-1','utf-8'); 
```

如果您在此之后检查字节序列，您将看到发生了转换。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-22T12:37:21.470

我将 mb_detect_order 更新为 array('UTF-8', 'ISO-8859-1') 并且它有效

# bash - how to pass sbcl a string as a single argument

> ID：12072438
> 
> 赞同：2
> 
> 时间：2012-08-22T11:49:05.657
> 
> 标签：bash, common-lisp, sbcl

I want to pass sbcl a string as a single argument using a bashcript but sbcl splits the string into a list.

bashscript

```
#!/bin/bash

    sbcl --noinform --eval "(progn (FORMAT t \"~{~a~%~}\" sb-ext:*posix-argv*)(eval (read-from-string (second sb-ext:*posix-argv*))))" $1 
```

execution:

```
>sh bashsrcipt.bs "\"(FORMAT t \"YEAH\")\""
sbcl
"(FORMAT
t
"YEAH")"

debugger invoked on a END-OF-FILE in thread
#<THREAD "initial thread" RUNNING {1002999833}>:
  end of file on #<SB-IMPL::STRING-INPUT-STREAM {100443F523}> 
```

But the result should have been

```
>sh bashcript.bs "\"(FORMAT t \"YEAH~%\"\")"
sbcl
"(FORMAT t \"YEAH\")"
YEAH 
```

The [manual](http://www.sbcl.org/manual/index.html#Command-Line-Options) does not mention such behavior.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T12:45:47.487

You need to quote `$1` in your script, I think:

```
sbcl --noinform --eval "..." "$1" 
```

(argument to `--eval` elided for clarity)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T12:56:16.287

`$1` should be enclosed with `""` if you want it to be passed as a single argument when it contains whitespace characters:

```
#!/bin/bash
sbcl --noinform --eval "(progn (format t \"~{~a~%~}\" sb-ext:*posix-argv*) (eval (read-from-string (second sb-ext:*posix-argv*))))" "$1" 
```

Moreover, `\"` before and after `(FORMAT ...)` in the command-line argument should be removed, which is making `read-from-string` return a string, not a list, that evaluates to itself. That is, the two `\"`s are preventing `FORMAT` in the argument from being executed:

```
$ sh bashscript.bs "\"(FORMAT t \"YEAH~%\")\""
sbcl
"(FORMAT t "YEAH~%")" 
```

```
$ sh bashscript.bs "(FORMAT t \"YEAH~%\")"
sbcl
(FORMAT t "YEAH~%")
YEAH 
```

# php - 如何通过php中的while循环回显数据库中的所有MySQL表标题

> ID：12072439
> 
> 赞同：0
> 
> 时间：2012-08-22T11:49:07.870
> 
> 标签：php, mysql, database

我想我可以使用这个`MySQL`查询来选择数据库中的所有表

```
SELECT DISTINCT TABLE_NAME 
    FROM INFORMATION_SCHEMA.COLUMNS
        WHERE COLUMN_NAME IN ('columnA')
           AND TABLE_SCHEMA='YourDatabase'; 
```

那么如何在 while 循环中回显这些表标题中的每一个呢？

显然我不能照常行事，`$row['something']` 因为这些不是行而是表格标题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:50:16.737

您要查找的列名是`TABLE_NAME`; 每张桌子都有一行 - 所以你*可以*按照通常的方式来做。

除此之外，在使用不返回关联数组/对象的提取函数之一时，您始终可以使用列的索引。

# asp.net-mvc-3 - 验证基于组的权限

> ID：12072443
> 
> 赞同：1
> 
> 时间：2012-08-22T11:49:20.423
> 
> 标签：asp.net-mvc-3, isinrole

我有 ASP.NET MVC3 应用程序。我们添加了基于窗口的身份验证。在某些控制器上，我们必须做进一步的授权。

例如，我希望首选项页面可以查看我尝试使用的“ABCGroup”：IsInRole("ABCGroup") 方法。如果用户是它的直接成员，它会起作用。

如果登录用户不是 ABCGroup 的直接成员，则 IsInRole() 不起作用。例如，用户是管理员组的一部分，管理员组是“ABCGroup”的成员，那么如果管理员试图打开应用程序，IsInRole("ABCGroup" 将始终返回 false。

作为替代方案，我创建了一个自定义 Authorize 属性，该属性将创建允许组的集合（使用 DirectryEntry 类），然后选择登录用户的组集合（使用 HttpContext.Current.Request.LogonUserIdentity.Groups）并查看是否在允许的集合中。

它有效，但对于某些域它失败了。

“ABCGroup”中的成员如下： 1\. 管理员

“管理员”有：1.管理员 2.实验室/管理员 3.实验室/域管理员

我以“实验室\管理员”身份登录系统[实验室是一个域]。我打开了应用程序，它要求我提供凭据。在凭据对话框中，如果我输入 lab.sub.sub2\administrator 然后输入密码它可以工作，但我输入“superdomain.lab.sub.sub2\administrator”它失败了。默认情况下，系统使用“superdomain.lab.sub.sub2\administrator”，这就是要求提供凭据的原因。

是否有一些功能可以简单地验证登录用户在 LoggedUser.IsInRole(:Role name:) 之类的组下的访问能力

我看到了 CheckTokenMembership() 但确实无法在 C# 中使用它我从[http://www.pinvoke.net/default.aspx/advapi32.checktokenmembership尝试过](http://www.pinvoke.net/default.aspx/advapi32.checktokenmembership)

# asp.net-mvc-4 - 如何调用 WebApi 控制器方法？

> ID：12072447
> 
> 赞同：11
> 
> 时间：2012-08-22T11:49:40.853
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我刚刚创建了 asp.net mvc 4 应用程序并添加了默认 webapi 控制器

```
public class UserApiController : ApiController
{
    // GET api/default1
    public IEnumerable<string> Get()
    {
        return new string[] { "value1", "value2" };
    }

    // GET api/default1/5
    public string Get(int id)
    {
        return "value";
    }

    // POST api/default1
    public void Post(string value)
    {
    }

    // PUT api/default1/5
    public void Put(int id, string value)
    {
    }

    // DELETE api/default1/5
    public void Delete(int id)
    {
    }
} 
```

然后我试图通过`http://localhost:51416/api/get`在浏览器中输入来调用方法 get() 但出现错误：

```
<Error>
<Message>
No HTTP resource was found that matches the request URI 'http://localhost:51416/api/get'.
</Message>
<MessageDetail>
No type was found that matches the controller named 'get'.
</MessageDetail>
</Error> 
```

我的路线配置：

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                //defaults: new { controller = "UserApiController", id = RouteParameter.Optional }
                defaults: new { id = RouteParameter.Optional }
            );

            routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            );
        } 
```

为什么默认情况下它不起作用？我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T11:54:05.593

您不需要`get`输入 URL，因为 GET 是 HTTP 动词的类型。

默认情况下，如果您输入 URL，浏览器会发送 GET 请求。

所以尝试一下`http://localhost:51416/api/`

因为`UserApiController`如果您`defaults: new { controller = "UserApiController"...`在路由配置中取消注释该行，它是默认的 api 控制器

请注意，指定路线时不需要“控制器”后缀，因此正确的`dafaults`设置是`defaults: new { controller = "UserApi", id = RouteParameter.Optional }` :)

或者您需要明确指定控制器`http://localhost:51416/api/userapi`

[您可以在ASP.NET Web API 站点](http://www.asp.net/web-api)上开始了解 Wep.API 和基于 HTTP 动词的路由约定。

# java - 在 Java 中，我如何找出我的资源包可用的语言

> ID：12072454
> 
> 赞同：25
> 
> 时间：2012-08-22T11:50:02.070
> 
> 标签：java, internationalization, resourcebundle

我的主 jar 中打包了一些资源包

```
widget_en.properties
widget_de.properties 
```

我根据我的默认语言环境检索资源包，如下所示

```
ResourceBundle.getBundle("widget", Locale.getDefault()); 
```

但我想向用户展示支持的可用语言列表，以便可以选择可能与其计算机默认设置不同的语言

但是我在 ResourceBundle 中找不到列出可用语言环境的方法，我不想对列表进行硬编码，因为在添加另一个资源包时我可能会忘记更新它。

**编辑**

因为我只有不同语言的资源包（我没有国家细化），所以我通过遍历所有已知的语言代码生成了一个列表，并将每个语言代码检查为资源。

```
String[]langs = Locale.getISOLanguages();
for(String lang:langs)
{
      URL rb = ClassLoader.getSystemResource("widget_"+lang+".properties");
      if(rb!=null)
      {
            System.out.println("Found:"+rb.toString());
      }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T13:04:56.250

如果您真的将资源文件打包到*JAR*中，那么我会这样做：

```
public static void main(String[] args) {
  Set<ResourceBundle> resourceBundles = getResourceBundles(A.class.getName());
  if (resourceBundles.isEmpty())
    // ...
}

public static Set<ResourceBundle> getResourceBundles(String baseName) {
  Set<ResourceBundle> resourceBundles = new HashSet<>();

  for (Locale locale : Locale.getAvailableLocales()) {
    try {
      resourceBundles.add(ResourceBundle.getBundle(baseName, locale));
    } catch (MissingResourceException ex) {
      // ...
    }
  }

  return Collections.unmodifiableSet(resourceBundles);
} 
```

如果您关心您的 JAR，那么您至少会获得一组包含给定`baseName`.

如果您只有具有类似名称的资源，则`baseName_<country>`此方法可以完美运行，因为只有那些`ResourceBundles`将添加到 JAR 中存在的集合中。即使您决定需要单独的`baseName_en_US`和`baseName_en_UK`资源，它也会起作用，这并非闻所未闻。

[无耻的自插：我写了一个[`ResourceBundle.Control`](http://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.Control.html)以 a[`Charset`](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/Charset.html)为参数的，如果你想加载 UTF-8 编码的资源文件，你可能会对它感兴趣。[它在 GitHub 上可用。](https://github.com/kohanyirobert/java-util-resource-bundle-charset-control)]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T12:14:16.643

我不认为有一个 API，因为可以动态创建新的有效语言环境对象：

```
Locale locale = new Locale("abcd"); 
```

无需在某处注册。`widget_abcd.properties`然后您可以不受限制地使用资源包 ：

```
ResourceBundle resource= ResourceBundle.getBundle("widget", new Locale("abcd")); 
```

从`java.util.Locale`API 文档：

> 因为 Locale 对象只是区域的标识符，所以在构造 Locale 时不会执行有效性检查。如果您想查看特定资源是否可用于您构建的 Locale，则必须查询这些资源。

为了解决这个问题，您仍然可以遍历资源目录中所有名为“widget_”的文件并发现新添加的资源包。

请注意，由于上述原因，这`Locale.getAvailableLocales()` **不是 100% 确定**的：您可能有一天会定义一个非标准的语言环境。但是，如果您只添加几个标准语言环境，则可以使用此静态方法迭代系统语言环境并获取相应的包。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T12:48:56.683

如果你能做出两个基本假设：

1) 你有一个没有语言环境的默认资源包，或者至少有一个你知道的语言环境。

2）您所有的资源都在同一个位置（即单个 jar 文件中的相同路径）

然后您可以获取单个资源的 URL：

```
URL url = SomeClass.class.getClassLoader().getResource("widget.properties"); 
```

一旦你有了它，你应该能够解析 URL。

如果您使用 commons-vfs，您应该能够将 URL 转换为 FileObject：

```
FileSystemManager manager = VFS.getManager();
FileObject resource = manager.resolveFile(url.toExternalForm());
FileObject parent = resource.getParent();
FileObject children[] = parent.getChildren();
// figure out which ones are bundles, and parse the names into a list of locales. 
```

这将为您省去处理 jar:style url 等复杂性的麻烦，因为 vfs 会为您处理这些。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-31T20:21:09.737

A 通过列出文件来解决它。

```
public class JavaApplication1 {

    public static final ArrayList<String> LOCALES = new ArrayList<>();

    static {
        try {
            File f = new File(JavaApplication1.class.getResource("/l10n").toURI());
            final String bundle = "widget_";// Bundle name prefix.
            for (String s : f.list(new FilenameFilter() {
                @Override
                public boolean accept(File dir, String name) {
                    return name.startsWith(bundle);
                }
            })) {
                LOCALES.add(s.substring(bundle.length(), s.indexOf('.')));
            }
        } catch (URISyntaxException x) {
            throw new RuntimeException(x);
        }
        LOCALES.trimToSize();
    }

    ...

} 
```

# objective-c - iOS 应用程序在 4.3 中使用 GCD 崩溃

> ID：12072455
> 
> 赞同：1
> 
> 时间：2012-08-22T11:50:04.180
> 
> 标签：objective-c, ios, grand-central-dispatch

我在后台队列中调用一个方法，

```
dispatch_async(backgroundQueue, ^(void) {
[self loadImage:imageUrlString];
});
 // This is the loadImage method:

- (void)loadImage:(NSString *)imageUrlString
{        
    // calling a method in main queue to add a preloader

    dispatch_async(dispatch_get_main_queue(), ^(void) {

                  [self addPreloader];
    });

    // converting the url content to NSData
    NSData *imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:imageUrlString]];

    // calling a method in main queue to load the image with imageData.
    dispatch_async(dispatch_get_main_queue(), ^(void) {
        [self setImage:imageData];
    });  
} 
```

但是应用程序崩溃了。这是我的崩溃日志： bool _WebTryThreadLock(bool), 0xc9a5010: 试图从主线程或网络线程以外的线程获取网络锁。这可能是从辅助线程调用 UIKit 的结果。现在崩溃...

# string - 在为 GET 请求编码参数时如何处理空字符串？

> ID：12072461
> 
> 赞同：3
> 
> 时间：2012-08-22T11:50:16.690
> 
> 标签：string, java-me, char, urlencode

我正在开发一个使用 HTTP GET 请求与服务器通信的 J2ME 应用程序。我已经有了生成 URL 编码参数的方法。

在目前的形式中，它*不能*满足空字符串，我见过的其他代码片段也有这个缺陷，因为它们都依赖于比较字符串参数的各个字符。[我之前问过一个与这个空字符困境有关的问题](https://stackoverflow.com/q/12060061)

**编辑：**

对服务器的请求（Play 1.0）的格式为

[http://server.com/setName/firstname/othername/lastname](http://server.com/setName/firstname/othername/lastname)

参数不能为空，所以 http:server.com/setname/firstname//lastname 无效

参数是从 json 对象中检索的。目前，我拥有的 url 编码方法将正确编码所有提取的参数，并保留任何无法按原样转换的字符。字符串中的空格如“Jo e”和空格字符本身将分别编码为 Jo%20e 和 %20。JSON 对象

```
{ "firstname":"joe"
  "othername":""
  "lastname":"bloggs"
} 
```

但是，将导致无效的 url [http://server.com/setname/joe//bloggs](http://server.com/setname/joe//bloggs)因为 othername 参数是一个空字符串，并且由我的方法保留。

我可以检查要返回的字符串是否为空并返回一个空格字符。但我想知道是否对这种方法没有更好的修改或一种更强大的全新方法？

```
 public static String urlEncode(String s) {
    ByteArrayOutputStream bOut = null;
    DataOutputStream dOut = null;
    ByteArrayInputStream bIn = null;
    StringBuffer ret = new StringBuffer();
    try {
        bOut=new ByteArrayOutputStream();
        dOut = new DataOutputStream(bOut);
        //return value
        dOut.writeUTF(s);
        bIn = new ByteArrayInputStream(bOut.toByteArray());
        bIn.read();
        bIn.read();
        int c = bIn.read();
        while (c >= 0) {
            if ((c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z') || (c >= '0' && c <= '9') || c == '.' || c == '-' || c == '*' || c == '_') {
                ret.append((char) c);
            } else if (c == ' ' ) {
                //ret.append('+');
                ret.append("%20");
            } else {
                if (c < 128) {
                    appendHex(c, ret);
                } else if (c < 224) {
                    appendHex(c, ret);
                    appendHex(bIn.read(), ret);
                } else if (c < 240) {
                    appendHex(c, ret);
                    appendHex(bIn.read(), ret);
                    appendHex(bIn.read(), ret);
                }
            }
            c = bIn.read();
        }
    } catch (IOException ioe) {
        System.out.println("urlEncode:"+ioe);
        return s;
    }
       return ret.toString();
}

private static void appendHex(int arg0, StringBuffer buff) {
    buff.append('%');
    if (arg0 < 16) {
        buff.append('0');
    }
    buff.append(Integer.toHexString(arg0));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T15:27:31.103

根据[RFC 1738](http://www.ietf.org/rfc/rfc1738.txt)，没有空字符的 URL 编码。这给您留下了四个选择。

1.  要求填充所有字段。这可能不是一个好的选择，具体取决于您的应用程序的用途，因为用户可能没有特定字段的数据，或者不希望共享它。

2.  如果只有一个字段可以为空，请重新排序 URL 参数，使其位于最后。这将导致`/joe/bloggs/`而不是`/joe//bloggs`.

3.  如果一个 URL 可能有多个空参数，最好使用查询字符串。这看起来像`/setName?firstname=joe&othername=&lastname=bloggs`。可以省略或包含未使用的参数。

4.  使用 POST 而不是 GET。只需使用 url`/setName`并将所有字段放入表单中。根据 URL，显然正在执行的操作似乎更适合 POST 而不是 GET。

# c# - NUnit 测试被忽略

> ID：12072462
> 
> 赞同：1
> 
> 时间：2012-08-22T11:50:27.840
> 
> 标签：c#, .net, tdd, nunit

我有以下测试夹具类，出于我以外的原因，NUnit 决定围绕这一类而不是这一类运行所有测试类

```
using System.Workflow.Runtime;
using System.Workflow.Runtime.Hosting;   
using MyProject;
using NUnit.Framework;

namespace MyProject.Test
{
    [TestFixture]
    public class MyProjectTests
    {
        private const string Description = "This is a test Description generated through UNIT Tests";

        private ManualWorkflowSchedulerService scheduler;
        private WorkflowRuntime workflowRuntime;

        [SetUp]
        public void Init()
        {
            // set up workflow scheduler and runtime
            this.workflowRuntime = new WorkflowRuntime();
            this.scheduler = new ManualWorkflowSchedulerService(true); // run synchronously
            this.workflowRuntime.AddService(this.scheduler);
            this.workflowRuntime.StartRuntime();

            // create Test Case Sources
            object[] insertScenarios = 
                {
                    new object[] { typeof(RaiseScenario), this.workflowRuntime, Description, true, true, string.Empty },
                    new object[] { typeof(RaiseScenario), this.workflowRuntime, Description, true, false, "New Reason" }
                };
        }

        /// <summary>
        /// The insert tests.
        /// </summary>
        /// <param name="runtime">
        /// The runtime.
        /// </param>
        /// <param name="description">
        /// The description.
        /// </param>
        /// <param name="outstandingWorkDocUploaded">
        /// The Doc One Uploaded.
        /// </param>
        /// <param name="DocTwoUploaded">
        /// The Doc Two Uploaded.
        /// </param>
        /// <param name="shortageReason">
        /// The shortage Reason.
        /// </param>
        [Test, TestCaseSource("insertScenarios")]
        public void TestInsert(
            WorkflowRuntime runtime,
            string description,
            bool DocOneUploaded,
            bool DocTwoUploaded,
            string Reason)
        {
            var message = Business.InsertBoatHandoverOutsideCrew(runtime, description, DocOneUploaded, DocTwoUploaded, Reason);
            Assert.AreNotEqual(0, message.Id);
        }

    }
} 
```

测试项目的结构被分成它的组成部分，即解决方案的每个子项目在测试项目中都有自己的目录。这对于使用 .Net 3.5 编码的所有其他项目来说都不是问题，但该项目的测试现在被忽略了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T12:20:26.767

如果您将测试用例从`SetUp`

```
// create Test Case Sources
public object[] insertScenarios = 
        {
            new object[] { typeof(RaiseScenario), this.workflowRuntime, Description, true, true, string.Empty },
            new object[] { typeof(RaiseScenario), this.workflowRuntime, Description, true, false, "New Reason" }
        };

/// <summary>
/// The init.
/// </summary>
[SetUp]
public void Init()
{
    // set up workflow scheduler and runtime
    this.workflowRuntime = new WorkflowRuntime();
    this.scheduler = new ManualWorkflowSchedulerService(true); // run synchronously
    this.workflowRuntime.AddService(this.scheduler);
    this.workflowRuntime.StartRuntime();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:13:15.533

仍然不明白为什么 NUnit 应该忽略您的测试夹具（基于发布的代码片段）。代码片段是否缺少某些内容？

正如维克托所指出的，

> sourceName 参数表示用于提供测试用例的源的名称。它具有以下特点： 它可以是字段、属性或方法。它可以是实例或静态成员。它必须返回一个 IEnumerable 或实现 IEnumerable 的类型。枚举器返回的各个项目必须与出现该属性的方法的签名兼容。

但是，使用上面列出的代码片段，您应该将特定测试标记为 Invalid not Ignored（在 Fwk 4.0 上使用 NUnit v2.5.10）。

```
namespace AJack
{
    [TestFixture]
    public class ParameterizedTestsDemo
    {
        private object[][] _inputs;

        public ParameterizedTestsDemo()
        {
            Console.Out.WriteLine("Instantiating test class instance");
            _inputs = new[]{ new object[]{1,2,3}, 
                                 new object[]{4,5,6} }; 
        }

        [TestFixtureSetUp]
        public void BeforeAllTests()
        {
            Console.Out.WriteLine("In TestFixtureSetup");
            object[] localVarDoesNotWork = {   new object[]{1,2,3}, 
                                    new object[]{4,5,6} };
            /*this will NOT work too
            _inputs = new[]{ new object[]{1,2,3}, 
                                 new object[]{4,5,6} }; */
        }

        [TestCaseSource("localVarDoesNotWork")]
        public  void WillNotRun(int x, int y, int z)
        {
            Console.Out.WriteLine("Inputs {0}, {1}, {2}", x,y,z);
        }
        [TestCaseSource("PropertiesFieldsAndMethodsWork")]
        public void TryThisInstead(int x, int y, int z)
        {
            Console.Out.WriteLine("Inputs {0}, {1}, {2}", x, y, z);
        }
        private object[] PropertiesFieldsAndMethodsWork
        {
            get {
                Console.Out.WriteLine("Getting test input params");

                return _inputs;
            }
        }
    }
} 
```

如果您在 Console.Out.WriteLines 上设置跟踪点并附加调试器，您会看到加载程序集（构建测试树）时，命中的跟踪点是

```
Test Class constructor
Retrieve test case inputs from property/field/method 
```

当你运行测试时，

```
Test Class constructor
InTestFixtureSetup 
```

所以重点是，**您必须在测试类 ctor 中分​​配实例字段才能使其正常工作。**您不能使用 Setup 方法，因为在解析参数化测试输入时不会调用它们。此外，当它无法解析输入时，您应该会看到一个红色的异常，例如

```
AJack.ParameterizedTestsDemo.WillNotRun:
System.Exception : Unable to locate AJack.ParameterizedTestsDemo.localVarDoesNotWork 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:01:18.600

我从未见过 void 需要参数的测试用例，你打算这样做吗？我认为这就是为什么您在此类中的测试无法运行的原因。

```
[Test, TestCaseSource("insertScenarios")]
public void TestInsert()
{
    WorkflowRuntime runtime = //some value;
    string description = //some value; 
    bool DocOneUploaded = //some value;
    bool DocTwoUploaded = //some value;
    string Reason = //some value;

    var message = Business.InsertBoatHandoverOutsideCrew(runtime, description, DocOneUploaded, DocTwoUploaded, Reason);
    Assert.AreNotEqual(0, message.Id);
} 
```

如果您确实希望在测试用例之外使用此值，请在外部将它们指定为可以在`Init()`示例中设置的变量：

```
private WorkflowRuntime RunTime;

    [Setup]
    public void Init()
    {
    RunTime = new WorkflowRuntime();
    }

    [Test]
    public void TestInsert()
    {
    //RunTime can now be accessable here.
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:52:26.510

您可以为该案例应用 if 条件，并且此 if 条件适用于 [TestFixtureSetUp] 属性，因为您可以使用 Assert.Ignore("")。

# css - 如何使浮动 LI 平等地共享其父 UL 宽度？

> ID：12072463
> 
> 赞同：2
> 
> 时间：2012-08-22T11:50:37.287
> 
> 标签：css, width, html-lists, stretch

提前说明：我在提问之前确实寻找过答案，但我发现没有一个能准确解释如何正确地做到这一点。

我有一些 DIV，在我的某个地方有一个 UL，它应该伸展到父 DIV 的 100%，并且在 UL 中我有一个（由于动态内容而变化）数量的 LI 元素，我想平等分享父 UL 提供给他们的空间（显然应该是 100%）。

我尝试了各种解决方案，例如 LI 上的 inline-block，以及 LI 上的 float:left 和自动宽度

我在这里创建了一个[JSFiddle](http://jsfiddle.net/EfWze/)。

我怎样才能达到预期的结果（不使用 JS）和至少主要的跨浏览器兼容性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:54:51.053

在 UL 和LI 上使用`display: table;`with ：`width: 100%;``display: table-cell;`

```
ul {
    display: table;
    width: 100%;
}
li {
    display: table-cell;
    background: #eee;
} 
```

[http://jsfiddle.net/Kyle_Sevenoaks/EfWze/1/](http://jsfiddle.net/Kyle_Sevenoaks/EfWze/1/)

# php - Outlook 接收 PHP HTML 电子邮件作为代码？

> ID：12072470
> 
> 赞同：4
> 
> 时间：2012-08-22T11:50:51.347
> 
> 标签：php, html, outlook-2003

我使用 PHP 发送了一封 HTML 电子邮件，但我的客户将其作为纯代码接收。这是发送邮件的 PHP 代码：

```
$subject = 'HTML e-mail test';
$message = '<html>
    <body>
        <h1>TEST</h1>
    </body>
</html>';
$headers = "MIME-Version: 1.0\r\n"; 
$headers .= "Content-type: text/html; charset=iso-8859-1\r\n";
$headers .= "To: <".$to.">\r\n"; 
$headers .= "From: <".$email.">\r\n";

$mailb = mail($to, $subject, $message, $headers); 
```

它对我来说很好，但他们收到它是：

```
Content-type: text/html; charset=iso-8859-1

To: <email@email.com>
From: <email@email.com>

<html>
    <body>
        <h1>TEST</h1>
    </body>
</html> 
```

我的标题有问题吗？还是他们的**前景**？我该如何解决这个问题？
提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:53:05.023

我懂了：

```
Content-typetext/html; charset=iso-8859-1 
```

我应该在哪里看到：

```
Content-type: text/html; charset=iso-8859-1 
```

这是剪切/粘贴错误吗？在您的代码中，还是在您的结果中？

请注意，您可能希望在多部分邮件中同时包含*text* /plain 和 text/html 类型，因为仅 HTML 的邮件通常会获得较高的垃圾邮件分数（使用 SpamAssassin、SpamBouncer 等）。

**更新＃1：**

似乎`\r\n`被解释为两个换行符而不是一个。不同的平台在实现 SMTP 时可能存在不同的错误。将行尾更改为 just 是可能的`\n`。如果这适用于您的系统，请不要依赖它，因为它可能无法在其他系统上运行。

此外，请考虑切换到其他发送邮件的方法。 [phpMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)和[SwiftMailer](http://swiftmailer.org/)都比 PHP 的内部`mail()`函数更推荐。

**更新#2：**

基于 Incognito 的建议，您可以使用以下代码更好地组织标题，以及创建纯文本部分：

```
filter_var($to, FILTER_VALIDATE_EMAIL) or die("Invalid To address");
filter_var($email, FILTER_VALIDATE_EMAIL) or die("Invalid From address");

$subject = 'HTML e-mail test';

$messagetext = 'TEST in TEXT';

$messagehtml = '<html>
    <body>
        <h1>TEST</h1>
        <p>in HTML</p>
    </body>
</html>';

// We don't need real randomness here, it's just a MIME boundary.
$boundary="_boundary_" . str_shuffle(md5(time()));

// An array of headers. Note that it's up to YOU to insure they are correct.
// Personally, I don't care whether they're a string or an imploded array,
// as long as you do input validation.
$headers=array(
    'From: <' . $email . '>',
    'MIME-Version: 1.0',
    'Content-type: multipart/alternative; boundary="' . $boundary . '"',
);

// Each MIME section fits in $sectionfmt.
$sectionfmt = "--" . $boundary . "\r\n"
      . "Content-type: text/%s; charset=iso-8859-1\r\n"
      . "Content-Transfer-Encoding: quoted-printable\r\n\r\n"
      . "%s\n";

$body = "This is a multipart message.\r\n\r\n"
      . sprintf($sectionfmt, "html", $messagehtml)
      . sprintf($sectionfmt, "plain", $messagetext)
      . "--" . $boundary . "--\r\n";

$mailb = mail($to, $subject, $body, implode("\r\n", $headers)); 
```

我并不是说这是做这件事的正确方法，但是如果该策略对您有吸引力，并且您认为您可以在 6 或 12 个月没有查看它之后维护这样的代码（即它是有道理的乍一看），然后随意使用或调整它。

免责声明：这是未经测试的，有时我会打错字……只是为了让人们保持警惕。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:53:08.103

一种确定的好方法是将标题更改为以下内容：

```
$to = 'bob@example.com';

$subject = 'Website Change Reqest';

$headers = "From: " . strip_tags($_POST['req-email']) . "\r\n";
$headers .= "Reply-To: ". strip_tags($_POST['req-email']) . "\r\n";
$headers .= "CC: susan@example.com\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n"; 
```

另外，通过比较来仔细检查其余代码：

[http://css-tricks.com/sending-nice-html-email-with-php/](http://css-tricks.com/sending-nice-html-email-with-php/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T11:58:21.540

我建议不要使用 PHP 的`mail()`函数。是的，它可以发送电子邮件，但对于任何复杂的事情，它只会让事情变得困难。

我建议使用诸如[phpMailer 之](http://code.google.com/a/apache-extras.org/p/phpmailer/)类的类，这将为您提供更多的灵活性。它使发送 HTML 电子邮件、添加附件和使用替代 MTA 等事情变得更加容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:02:18.977

我自己也遇到过这个问题，通过使用 \n 而不是 \r\n 解决了这个问题。我只在标题的最后一行使用 \r\n。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-13T05:02:00.650

问题是某些防病毒电子邮件扫描程序将 mime 标头后面的任何内容视为正文。

解决方法是让您将标题设置为最后一个。

我刚刚和我的一个客户遇到了同样的问题，这让我很痛苦。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-20T16:47:00.717

这是 Microsoft Outlook (Windows) 的问题。

解决方案是删除标题末尾的“\r”，只使用“\n”。

# iphone - 如何从 NSString 获取整数的数字？

> ID：12072473
> 
> 赞同：3
> 
> 时间：2012-08-22T11:51:06.517
> 
> 标签：iphone, objective-c, xcode, ipad, uipickerview

我有一个类似的字符串`NSString *str = @"123"`。我想将此字符串的数字填充到 UIPickerView。但是如何从该字符串中获取数字？我添加了以下代码

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow: (NSInteger)row inComponent:(NSInteger)component 
{
 int number = [str intValue];
 if(component == 0)
 {

 }
 else if(component == 1)
 {

 }
 else 
 {

 }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T11:57:27.637

请看这个。。

```
NSMutableArray *arrNumbers = [[NSMutableArray] alloc] initWithCapacity:[YOURSTRING length]];

for (i=0;i<[YOURSTRING length];i++) 
{
  unichaar ch = [YOURSTRING characterAtIndex:i];
  NSLog(@"Processing charachter %c",ch);
  // If you really want
  [arrNumbers addObject:(id)ch];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T12:05:38.253

考虑到 NSString 已经是一个字符数组，其他解决方案似乎是多余的。更轻量级的解决方案：

```
NSString *str = @"123";
for (int i = 0; i < [str length]; i++) {
    int digit = [str characterAtIndex:i] - '0';
    // do something with your digit
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T11:55:15.113

如果你把它作为一个字符串，你可以这样做

```
NSArray * digitStrings = [str componentsSeparatedByString:""]; 
```

数组中的每个元素都是一个 NSString 形式的数字。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T12:01:27.550

未经测试，但你可以试一试，这应该扫描你的字符串的所有数字条目。

```
-(NSArray*)getDigitsFromString:(NSString*)str{
NSMutableString *outpuString = [NSMutableString
                                stringWithCapacity:str.length];

NSScanner *scanner = [NSScanner scannerWithString:str];
NSCharacterSet *numbers = [NSCharacterSet
                           characterSetWithCharactersInString:@"0123456789"];

while ([scanner isAtEnd] == NO) {
    NSString *buffer;

    if ([scanner scanCharactersFromSet:numbers intoString:&buffer]) {
        [outpuString appendString:buffer];

    } else {
        [scanner setScanLocation:([scanner scanLocation] + 1)];
    }
}

NSArray * digitStr = [outpuString componentsSeparatedByString:@""];

    return digitStr;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T12:16:45.413

```
 NSMutableArray * digit=[[NSMutableArray alloc]init];
    NSString *string = @"123456";
    for (int i=0;i<[string length]; i++) {
        NSString * newString = [string substringWithRange:NSMakeRange(i, 1)];

        [digit addObject:newString];
    }
    NSLog(@"String %@ ", digit) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T12:44:04.417

另一个答案通过解决将 int 分成数字的问题来解决原始问题的更多想法：

```
 NSString *numberString = @"68243";
  int result[numberString.length]; 
  NSInteger number = [numberString integerValue];
  int j = numberString.length - 1;
  while (j >= 0) 
  {
    int power = pow(10, j);
    int rest = (number %  power);
    result[j] = (number - rest)/power;
    number = rest;
    j--;
  } 
```

# c# - 在 VB.NET 中创建泛型数组

> ID：12072476
> 
> 赞同：0
> 
> 时间：2012-08-22T11:51:19.857
> 
> 标签：c#, .net, vb.net, linq

我想达到与使用此语法在 C# 中获得的结果相同的结果，但在 VB.NET 中：

```
// This is my generic object (coming from Json parsing!):
var genericContent = new { Name = "name1", Value = 0 };

// I would like to have a generic list, created by this generic item:
var myList = (new[] { genericContent }).ToList();

// So, I can add any other generic items (with the same structure)...
myList.Add(new { Name = "name2", Value = 1 });

// And treat them as a normal list, without declaring the class!
return myList.Count; 
```

...所以，我只想在 VB 中创建一个通用数组。

在 C# 中它运行良好，但我不知道这种 VB.NET 语法......

我正在使用 .NET 框架 3.5！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:56:09.273

这里没问题：

```
Dim genericContent = new with { .Name = "name1", .Value = 0 }
Dim myList = {genericContent}.ToList()
myList.Add(new with { .Name = "name2", .Value = 1 }) 
```

至少在 .Net 4.0 (VB.Net 10.0) 中。

对于早期版本：不，没有辅助方法是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:58:11.590

我认为使用该框架没有紧凑的语法，就像在 C# 中一样...

尝试使用这种方式...

声明这样的方法（我认为共享更好）：

```
Public Shared Function GetArray(Of T)(ByVal ParamArray values() As T) As T()
    Return values
End Function 
```

所以你可以创建一个传递泛型参数的数组，比使用 LINQ 创建泛型列表要容易：

```
Dim genericContent = New With { Name = "name1", Value = 0 }

Dim myList = (GetArray(genericContent)).ToList()

myList.Add(New With { Name = "name2", Value = 1 })

return myList.Count 
```

# php - 在 MySQL 中导入文件的 PHP 脚本

> ID：12072479
> 
> 赞同：0
> 
> 时间：2012-08-22T11:51:24.410
> 
> 标签：php, mysql, cpanel

我的`postwwwacct`脚本中有一些代码不起作用，它不导入 sql 文件

```
shell_exec("cd /home/".$opts['user']."/public_html/sbans/sql/");
$command="mysql -u ".$opts['user']." -p".$opts['pass']." ".$opts['user']."_bans < data.sql";
shell_exec($command); 
```

但是，在创建帐户后，我可以在 ssh 中手动运行

```
cd /home/jason/public_html/sbans/sql/
mysql -u jason -pmypass jason_bans < data.sql 
```

然后工作。

中的php代码有什么问题`postwwwacct`？

很抱歉重新编辑您的编辑，但该文件没有 php 扩展名，我使用手动调用 php 编译器

```
#!/usr/local/bin/php -q 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:03:29.190

在我的脑海中，您确定文件 data.sql 位于所有不同用户的 sql 文件夹中吗？您还可以创建一个单独的 bash 脚本并在您的脚本中调用它，这对我之前有用，您只需使用以下内容传入参数：

```
$t = shell_exec("path/command.sh '$opts['user']' '$opts['pass']' 2>&1");
echo $t 
```

并在 bash 脚本中像这样开始获取变量：#!/bin/bash

```
 #Get variables needed

 user=$1
 pass=$2 
```

然后，您可以继续将变量用作任何普通的 bash 变量，如果由于 shell_exec 命令末尾的 2>&1 它仍然不适合您，您将能够更轻松地调试它。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:06:56.257

问题是 shell_exec 执行 cd 并完成，因此找不到使用 sql 进行导入的命令并且失败。

尝试这样的事情：

```
<?php
$command="mysql -u ".$opts['user']." -p".$opts['pass']." ".$opts['user']."_bans < data.sql";
$output = shell_exec("cd /home/".$opts['user']."/public_html/sbans/sql/ && ".$command); 
```

如果您想查看命令的结果，请执行

回声$输出

# mysql - mysql错误：子查询返回多于1行

> ID：12072481
> 
> 赞同：0
> 
> 时间：2012-08-22T11:51:30.710
> 
> 标签：mysql, mysql-error-1242

我在这里使用两个表`projections_report p`和`access_rights a`. 我无法找出我收到错误的原因：

> 子查询返回多于一行

```
(case when paramChannel='AllC' then p.gl_sal_chan in 
      (case when dc_lob=0 then (select distinct pr.gl_sal_chan from 
          projections_report pr) else (select distinct pr1.gl_sal_chan
                 from projections_report pr1 where pr1.gl_sal_chan 
                 in (select distinct a.gl_sal_chan from access_rights 
                 a where a.userid= paramUserId)) end) 
 else p.gl_sal_chan = paramChannel end) 
```

我尝试使用所有和任何关键字。请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:58:21.660

我试图以另一种方式做到这一点并且做对了。首先，我将第二个 case 语句的 else 条件中的语句更改为

```
(select distinct gl_sal_chan from access_rights where userid = paramUserid) 
```

因为两者都返回相同的结果（我的错误），其次我将整个条件更改为

```
(case when (paramChannel = 'AllC' && dc_lob = 0) then '%' = '%' else 
    (case when (paramChannel='AllC' && dc_lob != 0) then 
    gl_sal_chan in (select distinct gl_sal_chan from access_rights where userid = paramUserid) 
else gl_sal_chan= paramChannel end)end) 
```

无论如何谢谢@all :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:01:40.557

在子查询中使用 LIMIT 以仅返回一条记录，因为您使用的是 distinct，它可能返回多条记录

# hadoop - INSERT INTO 生成一个新文件

> ID：12072483
> 
> 赞同：3
> 
> 时间：2012-08-22T11:51:36.657
> 
> 标签：hadoop, hive

我正在以文本格式在外部表上使用 hive。我每小时填充这个表，但我按月对表进行分区（数据集相对较小）。每小时我想将新数据插入一些分区。

INSERT INTO 子句导致在包含旧数据的现有分区中创建一个新文件。这样到月底我将在每个分区中有大约 700 个小文件。

HIVE 有没有办法将数据附加到分区中的旧文件（不对旧数据使用 UNION ALL）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T21:04:32.317

不幸的是，目前这是不可能的。希望随着这些天文件附加补丁获得更多关注，它最终将成为附加到现有文件的新功能。

我认为这是 Hive 的主要缺点之一......尤其是当您开始处理更小的插入时。

# c# - 具有不同列表的 C# Linq 类

> ID：12072487
> 
> 赞同：1
> 
> 时间：2012-08-22T11:51:50.357
> 
> 标签：c#, linq, distinct

我在尝试获取我的类对象的不同列表时遇到问题。

对于这个特定的查询，我只对获取 DLType 感兴趣，有 3 种类型的“DLType”多次出现在我的列表中。我只想从数据中获取这三种类型并将其用作组合框的数据源。

这是我的课：-

```
public class DistributionList
{
    public int DistributionID { get; set; }
    public string DistributionName { get; set; }
    public string  DLType { get; set; }
} 
```

这是我获取数据的地方：-

```
public List<DistributionList> GetDistributionLists()
{
    DataTable dt = new DataTable();

    OleDbCommand cmd = new OleDbCommand("Select * FROM [DistributionLists]",
                                                 Connection);
    Adapter.SelectCommand = cmd;

    Connection.Open();
    Adapter.SelectCommand.ExecuteNonQuery();
    Adapter.Fill(dt);
    Connection.Close();

    var DistributionLists = (from d in dt.AsEnumerable()
             select new DistributionList
             {
                 DistributionID = d.Field<int>("DistributionID"),
                 DistributionName = d.Field<string>("DistributionName"),
                 DLType = d.Field<string>("DLType")
             }).ToList();

    return DistributionLists;

} 
```

在这里，我将数据提取到我的表单中：-

```
var distributionData = dc.GetDistributionLists(); 
```

现在我需要从 distributionData 对象中获得一个不同的列表：-

```
var query = (from d in distributionData
                         select new DistributionList
                         {
                             DLType = d.DLType

                         }).Distinct().ToList(); 
```

但这不起作用，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:54:53.510

您的 Linq 的问题在于它`DistributionList`为每个值生成一个新值 - 因为它们都是不同的实例，所以`Distinct`将它们全部返回。尝试重新排序处理查询的方式，如下所示：

```
var query = (from d in distributionData select d.DLType)
                  .Distinct()
                  .Select(t => new DistributionList() { DLType = t })
                  .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:55:51.200

你需要`Equals`在你的`DistributionList`班级上实施。有关详细信息，请参阅[此答案](https://stackoverflow.com/questions/4786919/linq-distinct-implementing-the-equals-gethashcode)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T11:58:21.147

不要选择`new DistributionList`，选择`DLType`

```
distributionData.Select(d => d.DLType).Distinct().ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T11:59:22.867

您只需要按一些唯一键对列表进行分组，然后从每个组中选择第一个元素，就像这样

```
(from d in distributionData
                         select new DistributionList
                         {
                             DLType = d.DLType

                         }).GroupBy(a=>a.DLType).Select(a=>a.First()).ToList() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T13:05:02.077

您可以将 Lambda 比较器用于 Distinct 方法：

```
public class LambdaComparer<T> : IEqualityComparer<T>
{
    private readonly Func<T, T, bool> _lambdaComparer;
    private readonly Func<T, int> _lambdaHash;

    public LambdaComparer(Func<T, T, bool> lambdaComparer) :
        this(lambdaComparer, o => 0)
    {
    }

    public LambdaComparer(Func<T, T, bool> lambdaComparer, Func<T, int> lambdaHash)
    {
        if (lambdaComparer == null)
            throw new ArgumentNullException("lambdaComparer");
        if (lambdaHash == null)
            throw new ArgumentNullException("lambdaHash");

        _lambdaComparer = lambdaComparer;
        _lambdaHash = lambdaHash;
    }

    public bool Equals(T x, T y)
    {
        return _lambdaComparer(x, y);
    }

    public int GetHashCode(T obj)
    {
        return _lambdaHash(obj);
    }
} 
```

然后像下面这样使用它：

```
var query = (from d in distributionData
             select d)
             .Distinct<DistributionList>
             (new LambdaComparer<DistributionList>((x, y) 
                                 => x.DLType == y.DLType)); 
```

问候

# android-listview - 微调器在 ListView 中不起作用

> ID：12072489
> 
> 赞同：0
> 
> 时间：2012-08-22T11:51:58.170
> 
> 标签：android-listview, android-spinner

我正在自定义 ListView 并在其行中使用 Spinner。虽然列表显示正确，但是当我单击 Spinner 时会引发异常。

```
08-22 17:11:08.705: E/AndroidRuntime(1168): FATAL EXCEPTION: main
08-22 17:11:08.705: E/AndroidRuntime(1168): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
08-22 17:11:08.705: E/AndroidRuntime(1168):     at android.view.ViewRoot.setView(ViewRoot.java:531)
08-22 17:11:08.705: E/AndroidRuntime(1168):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
08-22 17:11:08.705: E/AndroidRuntime(1168):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
08-22 17:11:08.705: E/AndroidRuntime(1168):     at android.app.Dialog.show(Dialog.java:241)
08-22 17:11:08.705: E/AndroidRuntime(1168):     at android.app.AlertDialog$Builder.show(AlertDialog.java:802)
08-22 17:11:08.705: E/AndroidRuntime(1168):     at android.widget.Spinner.performClick(Spinner.java:260)
08-22 17:11:08.705: E/AndroidRuntime(1168):     at android.view.View$PerformClick.run(View.java:9080)
08-22 17:11:08.705: E/AndroidRuntime(1168):     at android.os.Handler.handleCallback(Handler.java:587)
08-22 17:11:08.705: E/AndroidRuntime(1168):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-22 17:11:08.705: E/AndroidRuntime(1168):     at android.os.Looper.loop(Looper.java:130)
08-22 17:11:08.705: E/AndroidRuntime(1168):     at android.app.ActivityThread.main(ActivityThread.java:3683)
08-22 17:11:08.705: E/AndroidRuntime(1168):     at java.lang.reflect.Method.invokeNative(Native Method)
08-22 17:11:08.705: E/AndroidRuntime(1168):     at java.lang.reflect.Method.invoke(Method.java:507)
08-22 17:11:08.705: E/AndroidRuntime(1168):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-22 17:11:08.705: E/AndroidRuntime(1168):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-22 17:11:08.705: E/AndroidRuntime(1168):     at dalvik.system.NativeStart.main(Native Method) 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:31:09.937

好的，我自己解决了问题。

在我`ListView`使用的 ArrayAdapter 中`getApplicationContext()`。我只是将其更改为`this`.

# android - Android WebView 内存泄漏

> ID：12072494
> 
> 赞同：-1
> 
> 时间：2012-08-22T11:52:20.093
> 
> 标签：android, android-webview

我正在为 android 开发自定义浏览器。当浏览器支持 javascript 时，当您上网时，站点应用程序会比我使用不支持 javascript 的浏览器获得更多的内存。请给一个建议如何解决这个问题

公共无效 onCreate(Bundle savedInstanceState) {

```
 mWebView=new WebView(getApplicationContext());
            mWebContainer=(FrameLayout)findViewById(R.id.web_container);
            mWebContainer.addView(mWebView);
            mWebView.getSettings().setUserAgentString("");
            mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.getSettings().setPluginsEnabled(true);
        mWebView.getSettings().setPluginState(PluginState.ON);
        mWebView.getSettings().setDatabaseEnabled(true);
        mWebView.getSettings().setGeolocationEnabled(true);
        mWebView.getSettings().setSupportZoom(true);
        mWebView.getSettings().setSavePassword(true);
        mWebView.getSettings().setSaveFormData(true);
        }
        ........................................

     private static class HelloWebViewClient extends WebViewClient 
        {

            @Override

            public boolean shouldOverrideUrlLoading(WebView view, String url) 
            {

                 view.loadUrl(url);

                 return true;
            }
        ........................

      protected void onDestroy()
        {

            super.onDestroy();
            mWebContainer.removeAllViews();
            mWebView.destroy();
            mWebView=null;
            System.gc();
        } 
```

创建了一个简单的WebView，比如内存泄漏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:04:38.173

我不确定你有什么选择。内存使用由 webview 小部件管理，因此由系统管理。

因此，您的应用程序将使用大量内存。

# java - 字符串的简单时间解析

> ID：12072496
> 
> 赞同：4
> 
> 时间：2012-08-22T11:52:22.873
> 
> 标签：java

在下面的代码中，我需要获取解析异常。但是程序以某种方式将其转换为有效日期。

但是，如果我将 dthours 设为“07:0567”，则会给出解析错误。那么如何保持显示的确切格式。

如果日期字符串偏离给定格式（“HH:MM:SS”），即使是单个字符，谁能告诉我该怎么做才能引发错误。

```
public static void main(String[] args) {

    String dthours="07:4856:35563333";
    SimpleDateFormat df = new SimpleDateFormat("HH:MM:SS"); 
    try
    {
        Date d = df.parse(dthours);
        System.out.println("d "+d);
    }
    catch (ParseException e)
    {
        System.out.println("parseError");

    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T11:54:35.313

将 df.setLenient() 设置为 false，以便 SimpleDateFormat 在这种情况下抛出解析异常。

```
public static void main(String[] args)
{
    String dthours = "07:4856:35563333";
    SimpleDateFormat df = new SimpleDateFormat("HH:MM:SS");
    df.setLenient(false);
    try
    {
        Date d = df.parse(dthours);
        System.out.println("d = " + d);
    }
    catch (ParseException e)
    {
        System.out.println("parseError");
    }
} 
```

上面的代码段将为该输入打印“parseError”。

# wpf - 尽管创建了新的 Window 实例，但我不能使用 Window.Show

> ID：12072497
> 
> 赞同：1
> 
> 时间：2012-08-22T11:52:27.063
> 
> 标签：wpf, vb.net, xaml, xamlreader

这是问题所在：在我的 WPF 应用程序中，我曾经使用 XamlReader.Load 方法加载/解析我的 .xaml 文件以在我的应用程序中打开一个窗口。

返回窗口的函数的代码片段：

```
Dim win As New Window()
Dim myObject As Object

Dim xml As XmlReader = XmlReader.Create("mysample.xaml")
myObject = System.Windows.Markup.XamlReader.Load(xml)
win = CType(myObject, Window)
Return win 
```

我用它来显示用户想要看到的所有不同的窗口。

当用户使用 win.Close 切换到另一个窗口时，我使用 win.Show 打开窗口并关闭它。它运作良好！

现在为了提高性能，我计划在应用程序启动时执行所有 XAMLReader.Load 并将信息存储到字典中：

```
Private Shared windict As Dictionary(Of String, Object)

Public Shared Sub ConvertXAMLToWindow(ByVal formName As String)
      windict = New Dictionary(Of String, Object)
      Dim myObject As Object
      Dim xml As XmlReader = XmlReader.Create(formName)
      myObject = System.Windows.Markup.XamlReader.Load(xml)
      windict.Add(formName, myObject)
End Sub 
```

然后我想在调用窗口时使用该信息：

```
If windict.ContainsKey(formName) Then
 Dim win As New Window()
 Dim myObject As Object

 myObject = windict(formName)
 win = CType(myObject, Window)
 Return win
End If 
```

现在这很好用，但是当我使用 win.Close 关闭窗口时，尝试使用 win.Show 再次打开它时出现错误，尽管我创建了一个新的 Window 实例？

> System.InvalidOperationException 在窗口关闭后无法设置可见性或调用 Show、ShowDialog...。

但是当我不使用 Dictionary Method 而是直接使用 XAMLReader.Load 时它可以工作 - 有什么想法吗？不知何故，我通过返回 XamlReader.Load 得到的窗口似乎与字典中存储的信息不同？我错过了什么吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:42:49.810

你可以使用`Hide()`而不是`Close()`

`Hide`隐藏表单，因此您无需处理表单（及其控件），而是使其不可见。`Show`将使其再次可见。

不过要小心，字典中的表格仍将保持上次使用时的状态。

# c# - Linq Any() 的哪种用法更有效？

> ID：12072498
> 
> 赞同：2
> 
> 时间：2012-08-22T11:52:30.417
> 
> 标签：c#, linq

我有一个 Linq 查询，如下所示：

```
return this._alarmObjectAlarmViolationList
   .Where(row => row.ObjectId == subId)
   .Where(row => row.AlarmInternalId == "WECO #1 (StdDev > UCL)")
   .Where(row => row.PositionInSequence == row.SequenceCount)
   .Any(); 
```

与将 Where 谓词放在 Any() 语句中相比，此功能是否有任何不同，或者效率更高或更低？

这是一个 Linq to Objects 查询。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T11:54:32.140

`.Where(predicate).Any()`不，和之间的执行速度没有真正的区别`Any(predicate)`。

但是，仅在`Any(predicate)`内部使用需要创建较少的对象。

我的建议是您使用更具可读性的变体。对于许多复杂的谓词，我认为在您使用时更容易阅读`Where`- 就像在您的示例中一样。

请注意：我的回答仅适用于 LINQ to Objects。

# java - Apache CXF - 不能满足任何策略替代方案

> ID：12072500
> 
> 赞同：14
> 
> 时间：2012-08-22T11:52:40.857
> 
> 标签：java, cxf

我正在尝试创建第 3 方 WS 的客户端。我的应用程序在 JBoss AS 6 上运行（带有 Apache CXF 2.3.1 堆栈）。我通过 wsconsume (wsdl2java) 生成了客户端代码。当我尝试连接到 WS 时出现异常：

```
No assertion builder for type http://schemas.microsoft.com/ws/06/2004/policy/http}BasicAuthentication registered. 
Exception in thread "main" org.apache.cxf.ws.policy.PolicyException: None of the policy alternatives can be satisfied. 
```

WSDL 的 Auth 部分如下所示：

```
<wsp:Policy wsu:Id="abc_ssl_policy">
    <wsp:ExactlyOne>
        <wsp:All>
            <http:BasicAuthentication
                xmlns:http="http://schemas.microsoft.com/ws/06/2004/policy/http" />
            <sp:TransportBinding
                xmlns:sp="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy">
                <wsp:Policy>
                    <sp:TransportToken>
                        <wsp:Policy>
                            <sp:HttpsToken RequireClientCertificate="false" />
                        </wsp:Policy>
                    </sp:TransportToken>
                    <sp:AlgorithmSuite>
                        <wsp:Policy>
                            <sp:Basic256 />
                        </wsp:Policy>
                    </sp:AlgorithmSuite>
                    <sp:Layout>
                        <wsp:Policy>
                            <sp:Strict />
                        </wsp:Policy>
                    </sp:Layout>
                </wsp:Policy>
            </sp:TransportBinding>
        </wsp:All>
    </wsp:ExactlyOne>
</wsp:Policy> 
```

客户端代码：

```
@WebServiceClient(name = "Abc", 
              wsdlLocation = "https://hiddendomain.com/abc/abc.svc?wsdl",
              targetNamespace = "http://tempuri.org/")                  
public class Abc extends Service {

public final static URL WSDL_LOCATION;

public final static QName SERVICE = new QName("http://tempuri.org/", "Abc");
public final static QName AbcSsl = new QName("http://tempuri.org/", "abc_ssl");
static {

    Authenticator.setDefault(new Authenticator() {
        @Override
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication("user", "pas".toCharArray());
        }

    });

    URL url = null;
    try {
        url = new URL("https://hiddendomain.com/abc/abc.svc?wsdl");

    } catch (MalformedURLException e) {
        java.util.logging.Logger.getLogger(DistrInfo.class.getName())
            .log(java.util.logging.Level.INFO, 
                 "Can not initialize the default wsdl from {0}", "...");
    }
    WSDL_LOCATION = url;
} 
```

当我尝试获取 Conduit 时抛出异常：

```
 Client client = ClientProxy.getClient(port);
    HTTPConduit con = (HTTPConduit) client.getConduit(); <- exception 
```

我怀疑这是因为非标准的 MS 政策，我需要适当的拦截器来处理这个政策，但是有人可以告诉我如何做到这一点吗？

我什至没有，我应该将我的 HTTPS 凭据放在哪里进行身份验证（我无法获得管道）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-23T11:31:37.357

当我使用此代码时问题消失了：

```
import org.apache.cxf.endpoint.Client;
import org.apache.cxf.frontend.ClientProxy;
import org.apache.cxf.jaxws.JaxWsProxyFactoryBean;
import org.apache.cxf.transport.http.HTTPConduit;

...

JaxWsProxyFactoryBean factory = new JaxWsProxyFactoryBean();

//factory.getInInterceptors().add(new LoggingInInterceptor());
//factory.getOutInterceptors().add(new LoggingOutInterceptor());

factory.setServiceClass(IAbc.class);
factory.setAddress("https://hiddendomain.com/abc/abc.svc/soap"); <- must be /soap there, otherwise 404

IAbc info = (IAbc) factory.create();

Client client = ClientProxy.getClient(info);
HTTPConduit http = (HTTPConduit) client.getConduit();

http.getAuthorization().setUserName("user");
http.getAuthorization().setPassword("pass");

String abc = info.abc(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-23T05:19:27.450

你太棒了。这解决了我 wsdl 中的 wsse:policy 安全问题。现在我可以使用 CXF 调用安全服务。

我需要在我的代码中添加以下内容

```
 JaxWsProxyFactoryBean factory = new JaxWsProxyFactoryBean(); 
    factory.setServiceClass(TicketServicePortType.class); 
    factory.setAddress("http://localhost:8090/services"); 
    TicketServicePortType port = (TicketServicePortType) factory.create();

    Client client = ClientProxy.getClient(port);
    HTTPConduit http = (HTTPConduit) client.getConduit();

    http.getAuthorization().setUserName("user");
    http.getAuthorization().setPassword("password");

    Endpoint cxfEndpoint = client.getEndpoint();

    Map<String,Object> outProps = new HashMap<String,Object>();

    outProps.put(WSHandlerConstants.ACTION, WSHandlerConstants.USERNAME_TOKEN);
    outProps.put(WSHandlerConstants.USER, "user");
    outProps.put(WSHandlerConstants.PASSWORD_TYPE, WSConstants.PW_TEXT);
    outProps.put(WSHandlerConstants.PW_CALLBACK_CLASS, 
    ClientPasswordCallback.class.getName());

    WSS4JOutInterceptor wssOut = new WSS4JOutInterceptor(outProps);
    cxfEndpoint.getOutInterceptors().add(wssOut); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-28T09:28:15.480

对我来说，从项目中删除**cxf-bundle**立即有帮助：

```
<dependency>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-bundle</artifactId>
    <version>2.7.17</version>
</dependency> 
```

# c++ - c和c++混合

> ID：12072502
> 
> 赞同：0
> 
> 时间：2012-08-22T11:52:50.267
> 
> 标签：c++, c, interface, mixing

我需要从 c 文件中调用 cpp 方法。我为此写了这个界面..

.cpp 文件

```
extern "C" void C_Test(int p){
      Class::CPP_Test(p);
} 
```

文件

```
extern void C_Test(int p);

void C_Function(){
   C_Test(10); //error
} 
```

我在 c 文件中收到错误**“未定义对 C_Test(int) 的引用”**

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:43:24.347

您必须只为函数原型声明 extern，并确保正确链接。除此之外，CPP_Test(p) 必须是 Class 的静态成员，否则您的代码将不起作用。最后，extern "C" 必须用括号括起来它的内容，更像

```
extern "C"
{
  void C_Test(int p)
  {
    Class::CPP_Test(p);
  }
} 
```

告诉我们这是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:17:15.850

您是否使用 C++ 编译器编译两者？C++ 编译器可能会将 C 源文件编译为 C++，在这种情况下它将执行名称修改，因此您需要确保使用 C 编译器编译 C 源文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T14:10:54.277

我对这两种类型的文件都使用了 C++ 编译器。没有“C”它可以工作！也没有 extern "c" 它可以工作！

# sql-server - PHP 5.3.13 上的 CodeIgniter 2.1.2 和 MS SQL

> ID：12072503
> 
> 赞同：0
> 
> 时间：2012-08-22T11:52:55.810
> 
> 标签：sql-server, codeigniter-2

我整晚都在这，我们的办公室在 69 分钟后开门。

我们的服务器刚刚更新到 PHP 5.3.13，连接到 MS SQL 2008 的关键在线应用程序正在生成一个空白页面 - 没有记录错误，只是下雪。它是用 CodeIgniter 2.1.2 编写的。

如果我不自动加载（或尝试连接到数据库），页面将显示静态元素。一旦我添加了 database.php 配置文件，它就是一个空白。

我正在尝试 mssql 和 sqldrv 驱动程序并获得相同的结果。

我希望找到一些关于如何以尽快的方式调试此解决方案的想法。

我在 database.php 中的违规配置（在升级之前一直有效）如下所示：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

$active_group = "default";
$active_record = TRUE;

$db['default']['hostname'] = "<<SQL SRV NAME>>";
$db['default']['username'] = "<<USERNAME>>";
$db['default']['password'] = "<<PASSWORD>>";
$db['default']['database'] = "<<DATABASE NAME>>";
$db['default']['dbdriver'] = "mssql";
$db['default']['dbprefix'] = "";
$db['default']['pconnect'] = FALSE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = "";
$db['default']['char_set'] = "utf8";
$db['default']['dbcollat'] = "utf8_general_ci"; 
```

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:44:11.803

现在我怀疑有点晚了，但当前版本的 CodeIgniter (2.1.2) 默认在其数据库配置文件中包含以下内容：

```
$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'username';
$db['default']['password'] = 'password';
$db['default']['database'] = 'database';
$db['default']['dbdriver'] = 'mssql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

请注意最后的额外配置。它可能正在寻找它们，但由于没有提供它们，所以它出错了......

# python - 在网卡上停止数据包

> ID：12072506
> 
> 赞同：0
> 
> 时间：2012-08-22T11:53:01.197
> 
> 标签：python, c, networking

这是我要解决的问题，

我想编写一个应用程序来读取同一台机器网卡上的出站 http 请求数据包。这将能够从中提取 GET url。根据这些信息，我希望能够停止数据包，或者重定向它，或者让它通过。

但是，我希望我的应用程序以混杂模式运行（就像 wireshark 一样），并且能够吃掉（停止）出站数据包。

我对此进行了一些搜索..

libpcap / pcap.h 允许我在网卡上读取数据包，但是我还没有找到阻止这些数据包或将新数据包注入网络的方法。

某些东西，如 python 中的 twisted 或 scapy，允许我设置一个正在侦听某个本地端口的服务器，然后我可以使用代理配置配置我的浏览器以连接到它。然后这个应用程序可以做这些事情..但我的主要目的是混杂在这里被打败了..

任何有关我如何实现这一目标的帮助将不胜感激..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T12:05:32.323

我建议您在应用层处理此问题并使用透明代理（例如[squid](http://www.squid-cache.org/)）和基于 iptables 的出站端口 80 流量拦截。

我建议这样做的原因是，它将避免请求在数据包之间拆分的问题。

但是，如果您仍想继续进行数据包拦截，您可以在用户空间中使用[netlink](http://en.wikipedia.org/wiki/Netlink)中的 netfilters 来完成。[我相信周围有libnl](http://www.infradead.org/~tgr/libnl/)的 python 包装器。

本质上，您为要拦截的流量创建指向“QUEUE”的 iptables 规则，并使用 netlink 库编写程序来处理队列、接受、拒绝和/或修改数据包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:29:38.637

我已经在 Windows 中通过使用两个单独的 NIC 并[**在此线程中使用它们之间的套接字/管道（无论你喜欢什么）来实现这个模块**](https://stackoverflow.com/questions/12619068/network-bridge-using-scapy-and-python)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:08:58.553

您在这里混淆了几件事：

*   “混杂”通常是指硬件以太网网卡的一种模式，在这种模式下，它将其冲突域中的*所有*数据包传递到内核网络堆栈并对其进行排序（而不是单播到给定的 MAC、订阅的多播和广播）卡的正常工作模式）。*这是在接收路径上。*

*   从您的机器出站的所有数据都将通过机器上的（其中一个）网卡，因此“混杂”在这里根本不适用。

*   您正在处理基于 TCP 的协议 (HTTP) 的过滤，但在数据包方面进行讨论。这是错误的。TCP 连接是一个可以（就套接字读取器和写入器而言）任意拆分为 IP 数据报的流。HTTP 请求标头中的 URL 可以拆分为多个链路层帧。无论如何，您都必须将它们缝合在一起并解析流。那么即使使用 SSL，你也没有机会。

如果您对 HTTP 过滤感兴趣，请阅读[HTTP RFC](http://en.wikipedia.org/wiki/Http#References)，并阅读现有的开源代码，例如[squid](http://www.squid-cache.org/)、[nginx](http://nginx.org/)等。

如果您正在挖掘网络堆栈以获得更好的理解，请阅读[W. Richard Stevens 的书籍](http://www.kohala.com/start/)，查看开源操作系统中的现有代码，查看[BPF](http://en.wikipedia.org/wiki/Berkeley_Packet_Filter)和[netlink](http://en.wikipedia.org/wiki/Netlink)。

希望这可以清除一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T14:33:00.370

使用 pcap 您无法停止数据包，如果您在 Windows 下，您必须进入驱动程序级别......但您只能停止机器发送的数据包。

一个解决方案是充当目标机器的管道：您需要两个网络接口（可能没有地址），当您在源网卡上收到一个您不感兴趣的数据包时，您只需将其发送到目标网卡。如果数据包很有趣，您就不会发送它，因此您充当过滤器。我已经完成了多媒体性能测试（在视频流中添加抖动、噪声等）

# c# - 如何通知父类有关属性更改

> ID：12072507
> 
> 赞同：3
> 
> 时间：2012-08-22T11:53:02.427
> 
> 标签：c#, wpf, binding, parent-child

我有 2 个 WinForms，其中一个是父级并将参数传递给它的子窗体。代码是这样的：

```
public class FormMain : Form {
private User user;

public FormMain (User user) {
InitializeComponent();
this.user = user;
}

private void btnUpdateAccount_Click(object sender, EventArgs e)
        {
            updateUser = new FormUsersUpdate(user);
            updateUser.Show();
        }
} 
```

还有这个：

```
public class FormUsersUpdate(User user){

//Update user in database

} 
```

用户类有一些常用属性，如姓名、姓氏等。所以我的问题是如何通知父类有关此更新的信息，而无需再次从数据库中检索用户？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T12:04:45.203

一些选项：

*   在您的第二个表单上定义一个事件 UserUpdated，并在 User 实例中发生任何更改时触发该事件。
*   在 User 类上实现 INotifyPropertyChanged，并在触发时在主窗体中处理此事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T12:08:32.870

您可以在更新后调用回调委托。在`FormMain`：

```
private void btnUpdateAccount_Click(object sender, EventArgs e)
{
    updateUser = new FormUsersUpdate(user, new Action<User>(OnUserUpdated));
    updateUser.Show();
}

private void OnUserUpdated(User user)
{
    // Whatever you wanted to do with the updated user.
} 
```

在`FormUsersUpdate`：

```
public class FormUsersUpdate(User user, Action<User> callback)
{
    // Update user, then invoke the callback using the updated user instance,
    // which will call the OnUserUpdated method of the FormMain:
    callback.Invoke(user);
} 
```

ShowDialog 主要是一个更好的选择，但我从未在 mdi 孩子身上尝试过：

```
private void btnUpdateAccount_Click(object sender, EventArgs e)
{
    updateUser = new FormUsersUpdate(user);
    updateUser.ShowDialog();

    // Will wait until the user closes the dialog box.
    // FormUserUpdate keeps the updated user in a property called User:
    OnUserUpdated(updateUser.User);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:02:01.097

如果您只是想将值传递回去，那么将它们公开为父级中的公共静态变量并在子窗口中设置它们。

家长：

```
public static User CurrentUser {get; set;} 
```

孩子：

```
FormMain.CurrentUser = user;    
FormMain.CurrentUser.LastName = "Menefee"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T14:00:06.033

这是使用委托和事件的上述问题的工作示例：

```
public partial class FormUsersUpdate : Form
{
    private readonly User user;
    public delegate void UserChangedEventHandler(object sender, EventArgs e);
    public event UserChangedEventHandler UsrChanged;

    private void InvokeUsrChanged()
    {
        var args = new EventArgs();
        if (UsrChanged != null) UsrChanged(this, args);
    }

    public FormUsersUpdate()
    {
        InitializeComponent();
    }

    public FormUsersUpdate(User usr)
    {
        InitializeComponent();
        this.user = usr;
        this.user.name = "Kishore";
    }

    private void FormUsersUpdate_Load(object sender, EventArgs e)
    {
        InvokeUsrChanged();
    }

} 
```

公共部分类Form1：Form {私人用户用户；FormUsersUpdate _frmusrUpdate;

```
 public Form1()
    {
        InitializeComponent();
        this.user = new User { name = "Test" };
    }

    private void button1_Click(object sender, EventArgs e)
    {
        _frmusrUpdate = new FormUsersUpdate(this.user);
        _frmusrUpdate.UsrChanged += new FormUsersUpdate.UserChangedEventHandler(_frmusrUpdate_UsrChanged);
        _frmusrUpdate.Show();
    }

    void _frmusrUpdate_UsrChanged(object sender, EventArgs e)
    {
        MessageBox.Show("User Details Changed");
    }
} 
```

# c# - C# 中的 Scoop.it API 访问

> ID：12072518
> 
> 赞同：0
> 
> 时间：2012-08-22T11:53:23.253
> 
> 标签：c#, php

我正在尝试通过 C# 访问 Scoop.it API 以检索主题中的帖子。在 PHP 中，C# 中如何管理对象以及如何访问属性非常简单明了？

这是我想获得相当于 C# 的 php 代码：

```
$topic = $scoop->topic(24001);
foreach($topic->curatedPosts as $post)
{
  echo $post->title;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:08:40.000

我在 C# 中找不到 API 参考`Scoop.it`，但我想它们符合 C# 中的命名标准。

因此转换为 C# 的 PHP 代码如下所示：

```
var topic = scoop.Topic(24001);

foreach(var post in topic.CuratedPosts)
{
    Console.WriteLine(post.Title);
} 
```

但是`echo`在 PHP 中会在网页上打印一些东西，所以我想你想`Console.WriteLine`用[`Response.Write`](http://msdn.microsoft.com/en-us/library/ms525585%28v=vs.90%29.aspx).

如果您有一个看起来像这样的类，`Name`那么属性在哪里：

```
class Topic
{
    public string Name { get; set; }
} 
```

然后你会创建一个这样的实例`Topic`：

`var topic = new Topic();`

现在您可以`Name`像这样访问该属性：`topic.Name`

# ruby-on-rails-3.2 - 在 rails 3.2 中预编译 svg 图像

> ID：12072519
> 
> 赞同：0
> 
> 时间：2012-08-22T11:53:31.523
> 
> 标签：ruby-on-rails-3.2

我在 Rails 应用程序中使用 svg 图像，它们位于 /app/assets/images 中。我还为预编译添加了 svg (config/application.rb)：

```
config.assets.precompile += %w( .svg ) 
```

但是，在生产中使用它会导致异常：

```
ActionView::Template::Error (image.svg isn't precompiled): 
```

我需要添加什么来预编译 svg 并使其可访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:09:18.300

这是我的 capistrano 脚本的问题。我引入了一个名为的命名空间，`rake`但也有一个变量`rake`定义了执行 rake 的命令行。命名空间覆盖了该变量，并且未正确调用预编译任务。

在我修复它之后，它工作得很好。

# php - php在其他页面上获取值

> ID：12072523
> 
> 赞同：-2
> 
> 时间：2012-08-22T11:53:36.800
> 
> 标签：php

我有三个图像。

```
<a href="a.php" class="btn"><img src="http://localhost/aaa/wp-content/themes/aaa/img/bouquet/1.png"><span class="bqy_no">1</span></a>
<a href="a.php" class="btn"><img src="http://localhost/aaa/wp-content/themes/aaa/img/bouquet/2.png"><span class="bqy_no">2</span></a>
<a class="show_img3 btn" href="a.php"><img src="http://localhost/aaa/wp-content/themes/aaa/img/bouquet/2.png"><span class="bqy_no">BRAUCHE MEHR</span></a><div class="hide_img3"><a href=#>2</a><a href="#">3</a>` 
```

我希望在第一次单击时，我应该被重定向到页面 a.php 并获取值，即如果单击 1，那么在 a.php 上我应该得到 1，如果单击 2，我应该在 a 上得到 2。 php

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:57:29.923

添加`ID`为 URL 查询，您将能够在网页上获取它们`$_GET['id']`

```
<a href="a.php?id=1" class="btn"><img src="http://localhost/aaa/wp-content/themes/aaa/img/bouquet/1.png"><span class="bqy_no">1</span></a>
<a href="a.php?id=2" class="btn"><img src="http://localhost/aaa/wp content/themes/aaa/img/bouquet/2.png"><span class="bqy_no">2</span></a>
<a class="show_img3 btn" href="a.php?id=3"><img src="http://localhost/aaa/wp-content/themes/aaa/img/bouquet/2.png"><span class="bqy_no">BRAUCHE MEHR</span></a><div class="hide_img3"><a href=#>2</a><a href="#">3</a> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T11:57:38.207

您应该在链接上使用 $_GET 变量，如下所示：

```
<a href="a.php?value=1" class="btn"><img src="http://localhost/aaa/wp-content/themes/aaa/img/bouquet/1.png"><span class="bqy_no">1</span></a>
<a href="a.php?value=2" class="btn"><img src="http://localhost/aaa/wp-content/themes/aaa/img/bouquet/1.png"><span class="bqy_no">1</span></a> 
```

然后，在您的 a.php 页面上，您可以像这样获取值：

```
<?php

echo $_GET['value'];

?> 
```

**注意：强烈建议不要在不保护数据的情况下使用 $_GET。请阅读 PHP 输入安全性。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T11:58:17.963

将 ?value=1, ?value=2, ?value=3 添加到每个链接，然后在 a.php 上，使用：

```
<?php

echo $_GET['value'];
// 1, 2 or 3 depending on the image clicked
?> 
```

# xcode - 我需要 Apple Developer 帐户吗？

> ID：12072524
> 
> 赞同：13
> 
> 时间：2012-08-22T11:53:38.353
> 
> 标签：xcode, macos, dmg

我是 Xcode 和 Mac 的新手。我可以使程序在模拟器上运行良好，但不能制作 dmg 文件。我听说我需要一个 Apple Developer 帐户（99 美元），但我不想在 App Store 上发布我的文件。我只需要将它安装在 1 或 2 台其他 Mac 上。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-06-09T10:35:52.423

使用**Xcode 7**，您不再需要拥有开发者帐户即可在**Mac**和/或**iOS 设备上****测试**您的应用程序：

 ****![在此处输入图像描述](../Images/c83411e65940a3008943f526e6724b21.png)

[在这里](https://developer.apple.com/xcode/)查看。

请注意，这是 Apple 官方支持的，但您必须使用 Xcode 7 或更高版本以及您的**iCloud 帐户**。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-22T11:56:32.213

在继续之前 - 您可以在没有开发人员帐户的情况下从**Xcode**开发 iOS 应用程序并部署到设备，但据我所知，它只能在越狱设备上完成。

检查[此链接](http://oneiros.altervista.org/jailcoder/)以获取更多信息。

**更新**

抱歉，我以为您的意思是为移动设备开发。查看[有关创建`.dmg`文件](http://www.youtube.com/watch?v=B9Y22JD9IvU)的视频以获取更多信息。

**原始答案**

查看[苹果开发者页面](https://developer.apple.com/programs/which-program/)以查看不同的帐户类型。具体来说，免费帐户：

> 如果您还没有准备好加入我们的开发者计划之一，您可以免费注册为 Apple 开发者。作为注册的 Apple 开发人员，您可以访问开发工具、资源和信息，以帮助您创建适用于 iOS 和 OS X 的应用程序。[了解更多](https://developer.apple.com/programs/register/) 使用免费帐户，您可以在任何 mac OS 以及连接到的 iPhone 上运行您的应用程序mac 操作系统。

使用付费帐户，您可以在任何配置设备上安装应用程序并将应用程序提交到商店。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-22T14:36:08.450

如果您正在为 mac 开发并且不打算在 mac 应用商店上发布，则不需要开发者帐户。

您确实需要一个用于以下任何一项的帐户：

*   在 iOS 设备上安装应用程序（甚至是您自己的用于调试的应用程序）
*   在任何应用商店（iOS 或 Mac）上发布应用

编辑：请注意，如果您没有帐户，您的 Os X 应用程序将未签名。它们会起作用，但您的每个用户都会收到警告，并且需要降低其 Mac 的安全设置才能运行该应用程序（或者，至少，他必须专门批准每个应用程序） .

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T11:59:04.240

您需要开发人员帐户才能在设备上开发和调试应用程序。当然，没有这个帐户，有几种方法可以做到这一点......看看：

[http://www.alexwhittemore.com/developing-jailbroken-iphone-ios-401/](http://www.alexwhittemore.com/developing-jailbroken-iphone-ios-401/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T11:59:19.113

您不需要 Apple 开发者帐户来制作应用程序，但如果您想将它们放在 App Store 上，获得开发者测试版软件和论坛的访问权限，那么您就可以。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T12:02:51.470

您可以在没有会员资格的情况下开发 Mac 应用程序，但如果您想开发 iOS 应用程序，您需要会员资格才能在任何设备上运行您的应用程序。

但是，如果您想在 iOS 模拟器中运行您的 iOS 应用程序，则不需要会员资格。您可以在任何运行 10.7 Lion 或更高版本的 Mac 上安装 Xcode 和 iOS 模拟器。

也许您想在其他 Mac 上使用模拟器二进制文件而无需在其他 Mac 上编译应用程序，那么您应该看看该工具：[https ://github.com/landonf/simlaunch](https://github.com/landonf/simlaunch)****

# html - 使用 CSS 定位的超链接图像并不总是有效

> ID：12072527
> 
> 赞同：1
> 
> 时间：2012-08-22T11:53:46.363
> 
> 标签：html, css

第一张图片上的超链接不起作用，第二张图片上的超链接起作用。如果我将第一张图像更向右移动，则只有图像的右侧部分有一个有效的超链接！任何帮助表示赞赏！

我使用以下样式：

```
.spc {position: absolute; top: 220px; }
.r   {position: relative; top: 1px; }
.k1  {position: relative; left: 1px; } 
```

.k2 {位置：相对；左：129px；}

图像定位：

```
<div class="spc"><div class="r"><div class="k1">
<a href="link.html"><img src="pic1"></a>
</div></div></div>
<div class="spc"><div class="r"><div class="k2">
<a href="link.html"><img src="pic2"></a>
</div></div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:29:04.173

这是因为你的第二个 div 与第一个 div 重叠（因为你取的是 left:129px）。

[这](http://jsfiddle.net/mKZz7/)是演示[http://jsfiddle.net/mKZz7/](http://jsfiddle.net/mKZz7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:59:54.733

在 div 之前放一个 href

```
<a href="link.html"><div class="spc"><div class="r"><div class="k1">
<img src="pic1"></a></a>
</div></div></div>
<a href="link.html"><div class="spc"><div class="r"><div class="k2">
<img src="pic2">
</div></div></div>
</a> 
```

# android - phonegap 中的水平滚动视图

> ID：12072532
> 
> 赞同：2
> 
> 时间：2012-08-22T11:54:07.480
> 
> 标签：android, css, html, cordova

在我的 phonegap 应用程序中，我想实现水平滚动视图。我的html代码

```
<div id="songsListPage" data-role="page">

    <div id="alphabets" > 
        <a href="#"  >#</a>
                    <a href="#" >A</a>
                    <a href="#"  >B</a>
                    <a href="#"  >C</a>
                    <a href="#"  >D</a>
                    <a href="#"  >E</a>
                    <a href="#"  >F</a>
                    <a href="#"  >G</a>
                    <a href="#"  >H</a>
                    <a href="#"  >I</a>
                    <a href="#"  >J</a>
                    <a href="#"  >K</a>
                    <a href="#"  >L</a>
                    <a href="#"  >M</a>
    </div>

<div id="songs_list" data-role="content"> <!-- this should not scroll, but it is and showing white background on right side -->

        <ul id="songsList" data-role="listview" data-theme="a"></ul> <!-- list is populated dynamically -->     

        <p>This is songs page</p>

        <a href="player.html" id="playerBtn" data-role="button" class="ui-btn-active" ></a>
        </div>
</div> 
```

我的 CSS

```
#alphabets {
    background:#000000;
    display: block;
    padding: 5px;
    clear: both;
    height: 30px;
    margin-bottom: 22px;
    padding-left: 5px;
    padding-right: 5px;
    padding-top: 5px;
    width: 200%;
    overflow-x: auto;
}
#alphabets a{ color: #ffffff; margin-left: 5px} 
```

通过给出“宽度：200%”和“溢出-x：自动”，我得到了水平滚动，但问题是我的屏幕的其余部分也在水平滚动，所以有什么办法可以实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:23:27.433

# 旧答案

新的 HTML

```
<div id="songsListPage" data-role="page">
<table id="alphabets"> <!-- change "div" tag to "table" tag -->
    <tr>
    <td href="#">#</td> <!-- and "a" to "td" tag -->
    <td href="#">A</td>
    <td href="#">B</td>
    <td href="#">C</td>
    <td href="#">D</td>
    <td href="#">E</td>
    <td href="#">F</td>
    <td href="#">G</td>
    <td href="#">H</td>
    <td href="#">I</td>
    <td href="#">J</td>
    <td href="#">K</td>
    <td href="#">L</td>
    <td href="#">M</td>
    <td href="#">N</td>
    <td href="#">O</td>
    <td href="#">P</td>
    <td href="#">Q</td>
    <td href="#">R</td>
    <td href="#">S</td>
    <td href="#">T</td>
    <td href="#">U</td>
    <td href="#">V</td>
    <td href="#">W</td>
    <td href="#">X</td>
    <td href="#">Y</td>
    <td href="#">Z</td>
    </tr>
</table>
<div id="songs_list" data-role="content">

<ul id="songsList" data-role="listview" data-theme="a"></ul>
<!-- list is populated dynamically -->     
<p>This is songs page</p>
<a href="player.html" id="playerBtn" data-role="button" class="ui-btn-active" ></a>
</div>
</div> 
```

更新的 CSS

```
#alphabets {
    background:#000000;
    display: block;
    padding: 5px;
    clear: both;
    height: auto;
    padding-left: 5px;
    padding-right: 5px;
    padding-top: 5px;
    width: auto;  <!-- changed width from 200% to auto -->
    overflow-x: auto;
}
#alphabets td{ color: #ffffff; font-size: large; 
margin-left: 5px; padding-left: 5px; padding-right: 5px;} 
<!-- rest of the changes in css are for proper view (UI) like height: auto; padding-left: 5px; (in td) etc --> 
```

[http://jsfiddle.net/CXAWE/](http://jsfiddle.net/CXAWE/)（对于那些不想要 TABLE TR TD 解决方案的人）

这将在手机（android）浏览器中完美运行。Table TR 更适用于手机 - 它将一直如此，并将继续如此。我总是使用 TABLE 来保证结果，尤其是在这种情况下。

# 更新的新答案

适用于任何移动解决方案的 HTML。

```
<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN" "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>HTML5 Alternative to Mobile WAP and iPad/iPhone etc</title>
<!-- Mobile Web App Acceleration - Powered by WordCompress.net //-->
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"/>
<link rel="stylesheet" href="css/style.css" type="text/css" media="all, handheld" />
</head>
<body>
<div id="b">
    <div id="content">
    </div>
</div>
</body>
</html> 
```

CSS

```
body { overflow-x: hidden; }
#b {
    margin: 1px;
}
#content {
    background: none repeat scroll 0 0 #FFFFFF;
} 
```

注意`viewport`宽度是`device-width`，也注意到主体没有宽度，内容也没有。您现在可以保证所有手机都将显示 100%。您可以更改`overflow`to`y`或`x`too。

# java - 如何使用javascript将对象传递给控制器

> ID：12072535
> 
> 赞同：0
> 
> 时间：2012-08-22T11:54:12.540
> 
> 标签：java, javascript, jsp, spring-mvc

我有一个模型

```
public class ABC
{
private String a;

private String b;

private Obj obj;

...getteres and setters.....
} 
```

在我的 jsp 中，我的 OnSubmit 函数是

```
function showMethod(rowid) 
{
    document.diamondSingleStoneLabForm.action = adminUrl + "/act.htm";
    document.diamondSingleStoneLabForm.suid.value =value1;
        document.diamondSingleStoneLabForm.obj.value = tempObj;

    document.diamondSingleStoneLabForm.submit();
} 
```

**现在，我的问题是**

如何将对象传递给指定的动作..???

或如何传递 obj.name 属性值（我无法使用 document.diamondSingleStoneLabForm.obj.name.value = nameVal; 访问它）..???

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:59:28.847

希望在您的 jsp 页面中，您有一个像这样的文本字段：

```
<input type="text"  name="obj" value="<%= rs.getString(n)%>" > 
```

但是您应该与 modelform & jsp（这将是您的逻辑部分）页面相符，您可以从中获取类似的值`<%= rs.getString(n)%>`

那么你可以做这件事

```
var obj = obj_value;
var action = adminUrl + "/act.htm";  
document.diamondSingleStoneLabForm.action = action ;
document.diamondSingleStoneLabForm.submit(); 
```

或者你可以使用：`jQuery.post()`这种格式的方法

```
jQuery.post( url [, data] [, success(data, textStatus, jqXHR)] [, dataType] ) 
```

你可以看看这个链接：[jQuery.post()](http://api.jquery.com/jQuery.post/)

# asp.net-mvc - 如何在 mvc 3 Grid 上使用 JqueryUi 弹出窗口打开编辑弹出窗口？

> ID：12072536
> 
> 赞同：0
> 
> 时间：2012-08-22T11:54:13.537
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery-ui, jquery

你好; 我有个问题。我想在网页上打开一个弹出窗口（Jqueryui 弹出窗口）。但是我不能。如何正确制作？

看法：

```
 grid.Column("", format: (item) => Html.ActionLink("Click", "", "", new { @customerId = ConvertUtil.ToInt(item.Id) }, new { @class = "popupLink" })),

### OR

   grid.Column("", format: (item) => Html.ActionLink("Click", "Edit", "Customer", new { @customerId = ConvertUtil.ToInt(item.Id) }, new { @class = "popupLink" })),

Jquery Code:

   $(".popupLink").click(function () {
                 jQuery('#dialog').dialog('open');
        }); 
```

### 控制器

```
 public ActionResult Edit()
        {
            return View();

        } 
```

我还需要 id 值。不仅弹出。我想打开编辑弹出窗口。如何打开编辑弹出任何行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:48:38.887

首先，你需要停止点击事件的默认动作

```
$(".popupLink").click(function (e) {
    $('#dialog').dialog('open');

    e.preventDefault();
}); 
```

这将显示空对话框（当然，如果您`#dialog`的视图中有容器）。在显示对话框之前，您必须加载正确的视图。我会这样做：

```
var url = $(this).attr('href');
$('#dialog').load(url); 
```

最后，整个解决方案：

```
$(".popupLink").click(function (e) {
    $('#dialog').load($(this).attr('href'));
    $('#dialog').dialog('open');

    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:07:42.017

以下解决方案可以在 ActionLink 上重复使用，而无需修改源文档。在加载完成之前，它也不会显示对话框：

```
$("a.popuplink").live("click", function (evt) {
    evt.preventDefault();        
    $("<div></div>").insertAfter(this);
    $.ajax({
        url: this.href,
        context: this
    }).done(function (data) {
        $(this).next('div').html(data);
        $(this).next('div').dialog();
    });
}); 
```

# servlets - JBoss 5.1 Servlet 在 60 秒后重复请求

> ID：12072538
> 
> 赞同：0
> 
> 时间：2012-08-22T11:54:33.117
> 
> 标签：servlets, jboss5.x

我们有一个 servlet，它接受请求并在外部系统上执行某些操作。很多时候，这些外部系统响应缓慢，请求时间超过 60 秒。在日志中我们注意到，只要客户端仍然连接，恰好在 60 秒后，就会向 servlet 发出一个新请求（使用相同的 post 参数）。

谷歌搜索发现其他应用服务器（如 Glassfish 等）也报告了相同的情况。原因似乎是在 60 秒超时后，servlet 或 Web 容器正在超时调用并重复请求。请注意，这似乎是 servlet 或容器启动的刷新，而不是真正从客户端发布的。避免这种情况的方法是显然增加超时。（在这里阅读更多关于类似问题的信息： [Java - 来自两个 WebContainer 线程的多个请求](https://stackoverflow.com/questions/4753276/java-multiple-requests-from-two-webcontainer-threads)）

我将 deploy/jbossweb.sar/server.xml 中的 connectionTimeout 增加到 120000（2 分钟），但调用仍然在 60 秒后重复。

知道如何增加超时或避免 JBoss 中的这种行为吗？

谢谢斯里尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:12:32.130

发现问题。问题根本与 JBoss 无关。我们的 JBoss 服务器在 Amazon EC2 实例上运行，并位于 ELB 负载均衡器后面。AWS ELB 负载均衡器在每 60 秒空闲时间后超时并重新提交请求。

# c# - 实体框架 - 在 Linq 中处理空值

> ID：12072540
> 
> 赞同：1
> 
> 时间：2012-08-22T11:54:35.403
> 
> 标签：c#, linq, entity-framework, linq-to-sql

我正在编写两个 LINQ 查询，我在第二个查询中使用第一个查询的结果集。

但在某些情况下，当数据库表中没有数据时，我的第一个查询返回 null，因此我的第二个查询失败，`wsdetails.location`并导致异常。`wsdetails.worklocation``null`

例外：

> *你调用的对象是空的*

我的代码是这样的：

```
 var wsdetails = (from assetTable in Repository.Asset
                         join userAsset in Repository.UserAsset on
                         assetTable.Asset_Id equals userAsset.Asset_Id
                         join subLocationTable in Repository.SubLocation on
                         assetTable.Sub_Location_Id equals subLocationTable.Sub_Location_ID
                         where userAsset.User_Id == userCode
                         && assetTable.Asset_TypeId == 1 && assetTable.Asset_SubType_Id == 1
                         select new { workstation = subLocationTable.Sub_Location_Name, location = assetTable.Location_Id }).FirstOrDefault();

            result = (from emp in this.Repository.Employee
                      join designation in this.Repository.Designation on
                      emp.DesignationId equals designation.Id
                      where emp.Code == userCode
                      select new EmployeeDetails
                      {                             
                          firstname = emp.FirstName,
                          lastname = emp.LastName,                              
                          designation = designation.Title,
                          LocationId = wsdetails.location,
                          WorkStationName = wsdetails.workstation
                      }).SingleOrDefault(); 
```

作为一种解决方法，我可以检查

```
if wsdetails == null 
```

并更改我的第二个 LINQ 逻辑，但我相信有一些方法可以`null`像运算符一样处理 LINQ 本身的值`??`。

但我试过这个，它对我不起作用。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:59:30.030

而不是“二元”运算符`??`，也许您应该使用旧的三元运算符`? :`，就像在

```
wsdetails != null ? wsdetails.location : null 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T12:07:30.170

问题是 EF 无法将[null 合并运算符](http://msdn.microsoft.com/en-us/library/ms173224)转换为 SQL。就我个人而言，我看不出在执行下一个查询之前用 if 语句检查结果有什么问题。但是，如果您不想这样做，那么因为您的结果总是一个查询，为什么不这样做：

```
var wsdetails = (from assetTable in Repository.Asset 
                 join userAsset in Repository.UserAsset on 
                 assetTable.Asset_Id equals userAsset.Asset_Id 
                 join subLocationTable in Repository.SubLocation on 
                 assetTable.Sub_Location_Id equals subLocationTable.Sub_Location_ID 
                 where userAsset.User_Id == userCode 
                 && assetTable.Asset_TypeId == 1 && assetTable.Asset_SubType_Id == 1 
                 select new { workstation = subLocationTable.Sub_Location_Name, location = assetTable.Location_Id }).FirstOrDefault();  

result = (from emp in this.Repository.Employee 
          join designation in this.Repository.Designation on 
          emp.DesignationId equals designation.Id 
          where emp.Code == userCode 
          select new EmployeeDetails 
          {                              
              firstname = emp.FirstName, 
              lastname = emp.LastName,                               
              designation = designation.Title
           }).SingleOrDefault();

result.LocationId = wsdetails != null ? wsdetails.location : "someDefaultValue";
result.WorkStationName = wsdetails != null ? wsdetails.workstation ?? "someDefaultValue"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T12:02:27.980

尝试不评估第一个查询，并在第二个查询中使用它。这应该会产生一个 SQL 语句。

```
var wsdetails = (from assetTable in Repository.Asset
                         join userAsset in Repository.UserAsset on
                         assetTable.Asset_Id equals userAsset.Asset_Id
                         join subLocationTable in Repository.SubLocation on
                         assetTable.Sub_Location_Id equals subLocationTable.Sub_Location_ID
                         where userAsset.User_Id == userCode
                         && assetTable.Asset_TypeId == 1 && assetTable.Asset_SubType_Id == 1
                         select new { workstation = subLocationTable.Sub_Location_Name, location = assetTable.Location_Id });
// wsdetails is still an IEnumerable/IQueryable

        result = (from emp in this.Repository.Employee
                  join designation in this.Repository.Designation on
                  emp.DesignationId equals designation.Id
                  where emp.Code == userCode
                  select new EmployeeDetails
                  {                             
                      firstname = emp.FirstName,
                      lastname = emp.LastName,                              
                      designation = designation.Title,
                      LocationId = wsdetails.First().location,
                      WorkStationName = wsdetails.First().workstation
                  }).SingleOrDefault(); 
```

# string - 解释将字符串转换为整数时“str - '0'”的用法。

> ID：12072541
> 
> 赞同：4
> 
> 时间：2012-08-22T11:54:36.427
> 
> 标签：string, matlab

我注意到转换字符串的一种非常酷的方法，比如说

```
str = '1234' 
```

到一个向量就是使用这个技巧。

```
vec = str - '0'
 = [1 2 3 4] 
```

我的问题是为什么这种方法有效？

此外，类似：

```
vec1 = str -'1'
  = [0 1 2 3] 
```

但

```
vec2 = str - '10'
  Error using  - 
  Matrix dimensions must agree. 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T12:07:53.450

当您对字符串使用算术运算符时，Matlab 将字符串转换为双精度数，从而将字符串转换为 ascii 值：

```
>> double('1')
ans =
    49 
```

因此，减法可以正常工作，尽管加法会产生奇怪的结果

```
>> '1'+'1'
ans =
    98 
```

将字符串数组转换为双精度数组会产生双精度*数组*，因此“矩阵维度必须一致”：

```
>> double('10')
ans =
    49    48 
```

因此，虽然减法`'0'`是一个很酷的捷径，但我建议您改用[STR2DOUBLE](http://www.mathworks.com/help/techdoc/ref/str2double.html)以避免混淆。

# html - 如果我设置了边框，则内部 div 的高度值（100%）错误

> ID：12072543
> 
> 赞同：0
> 
> 时间：2012-08-22T11:54:40.850
> 
> 标签：html, css

我有两个 div 的简单任务。我需要两者都有彩色边框，并且内部 div 必须使用所有空间。这是我的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<style type='text/css'>
   .d1{ width:150px;height:150px;border:solid 10px black;background:red;}
   .d2{ height:100%; width:100%; border:solid 20px blue; background:green;}
</style>
</head>
<body>
   <div class=d1>
       <div class=d2>some text</div>
   </div>
</body>
</html> 
```

但是浏览器（IE、Chrome）没有发现我设置了边框和“div”以显示工件。

有人抓住这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:10:57.753

改为这样做：

```
<style type='text/css'>
    .d1{ width:110px;height:110px;border:solid 10px black;background:blue; padding: 20px;}
    .d2{ height:100%; width:100%; background:green;}​
</style> 
```

我认为这会给你带来你想要的效果，基本上是通过在 .d1 上使用背景颜色来替换 .d2 上的边框，在 .d1 上添加填充以充当各种边框。

如果您向 .d2 添加任何边距或填充，它将添加到 100% 的高度和宽度值，这意​​味着它们会溢出。

希望这是有道理的。

编辑：注意我是如何通过将高度和宽度减少 40 像素来补偿 20 像素的填充（因为它会在左右以及顶部和底部添加填充，从而增加 40 像素的宽度和高度）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:14:31.253

如果你知道父 div 的宽度和高度，你可以为孩子设置正确的样式，没有百分比，所以这个[jsFiddle](http://jsfiddle.net/qnxR4/)可能会为你工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:15:01.173

边框不包含在您的宽度/高度中，那么您的 150x150 将“变成”具有 10px 边框的 170x170。

两种解决方案：

1.  考虑边框，增加你的 div 宽度/高度
2.  使用更多的 div，忘记了边框

这是一个[Jsfiddle](http://jsfiddle.net/samsamX/56Egb/1/)向您展示两种解决方案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:21:52.547

因为您指定了边框厚度，所以高度和宽度不会考虑到显示嵌套在边框内。如果我理解正确，您的问题的解决方案可以实现如下：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
<html> 
<head> 
<style type='text/css'> 
   .d1{ width:150px;height:150px;overflow:auto;border: solid 10px black;background:red;} 
   .d2{ height:73%; width:73%;border: solid 20px blue; background:green;} 
</style> 
</head> 
<body> 
   <div class="d1"> 
       <div class="d2">some text</div> 
   </div> 
</body> 
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T12:30:46.200

基本上你遇到了[Html box model](http://css-tricks.com/the-css-box-model/)的问题。

您可以自己计算数学，或者根据您必须支持的浏览器，有新的“box-sizing”css 样式可以改变盒子模型的工作方式。

这是一个显示如何使用它的小提琴：

[http://jsfiddle.net/EHUab/](http://jsfiddle.net/EHUab/)

# android - Android动态界面背景色

> ID：12072544
> 
> 赞同：0
> 
> 时间：2012-08-22T11:54:41.383
> 
> 标签：android, dynamic, interface, background-color

我正在基于来自 sharedpreferences 的字符串创建一个动态接口。

这是我的代码

```
@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    CreateInterface();

}//End-OnCreate 

public void CreateInterface()
{
    ScrollView sv = new ScrollView(this);
    LinearLayout ll = new LinearLayout(this);
    ll.setOrientation(LinearLayout.VERTICAL);

    TableLayout tl = new TableLayout(this);
    TableRow[] tr = null;

    // Here is a loop that creates tablerow, create button in that, and add tablerow to tablelayout tl. This part is irrelevant couse it works perfectly.

    ll.addView(tl);

    sv.addView(ll);
    setContentView(sv);
} 
```

现在，我想更改屏幕的背景颜色。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:00:33.563

ll.setBackgroundColor() 应该可以完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T11:58:08.630

使用以下方法设置 ScrollView 或 LinearLayout 背景颜色。

```
sv.setBackgroundColor(); or ll.setBackgroundColor(); 
```

使用获取颜色字符串`getResources().getColor(R.color.yourColorID);`

# javascript - 如何从 gradle 调用任意方法？

> ID：12072545
> 
> 赞同：1
> 
> 时间：2012-08-22T11:54:41.027
> 
> 标签：javascript, gradle, saga

试图从 Gradle 调用 Saga Javascript 代码覆盖率。在玩了很久之后，我终于可以让它工作了。但是，我是 gradle 新手，不知道我的做法是否最有意义！似乎有很多方法可以做到这一点，所以我想我会在这里发布我所做的事情，希望我可以了解这种方式是否可行或是否有更好的方法。

从 maven Central 下载 saga-core 后，发现没有 Java“main”。所以我认为我不能轻易使用 JavaExec。在我看来，我需要创建一个 Java 对象、设置一些参数并调用提供的“运行”方法。

这是我最终得到的最终 build.gradle：

```
apply plugin: 'groovy'

buildscript {    
    repositories {
        mavenCentral()
    }

    dependencies {
        // add the jar file withe the code you want to execute to gradle's classpath
        classpath 'com.github.timurstrekalov:saga-core:1.1.2'
    }
}

configurations {
    compile
    codeCoverageTask
}

dependencies {
    groovy localGroovy()
    codeCoverageTask 'com.github.timurstrekalov:saga-core:1.1.2'
}

// I thought this was simple and made sense to be co-located here rather than
// another file...
// getting the imports to compile requires adding the "buildscript" section above
import java.io.File
import com.github.timurstrekalov.saga.core.CoverageGenerator

class SagaCoverageTask extends DefaultTask {
    def outputDirectory
    def baseDirectory
    def includes = 'my_includesPattern_here'
    def excludes = 'my_excludesPattern_here'
    def noInstrumentPatterns = [ 'my_noIntrumentPatterns_here' ]

    @TaskAction
    def runCoverage() {
        // check these were set correctly!
        println outputDirectory
        println 'baseDir' + baseDirectory

        // create an instance of the object
        CoverageGenerator generator = new CoverageGenerator(baseDirectory, includes, excludes, outputDirectory)   
        generator.noInstrumentPatterns = noInstrumentPatterns
        // there are params, but they would be handled in the same way if needed
        generator.run()   // invoke the arbitrary method
    }
}

task genCodeCoverage(type: SagaCoverageTask)  {
    // needed the values of task properties, so these are set here
    outputDirectory = new File('' + reportsDir + '/coverage')
    baseDirectory = new File('' + projectDir + '/src')   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:22:49.807

看起来是一个不错的开始。通常应该使用该`project.file()`方法创建文件对象，因为它比处理相对路径更好`new File()`（尽管在这种特殊情况下这不是问题）。例如：`file("$reportsDir/coverage")`。

如果任务类变得更大或者您想在项目/构建中重用它，您应该将它移到其他地方（例如移入`buildSrc`）并添加一些测试覆盖率。

通过使用@InputDirectory、@OutputDirectory 等注释任务类属性，您可以使其仅在某些输入已更改或先前生成的输出不再可用时才运行。这可以加快构建速度。

# c# - 十进制和十进制的空合并运算符

> ID：12072553
> 
> 赞同：3
> 
> 时间：2012-08-22T11:54:59.827
> 
> 标签：c#, null, operator-keyword, coalescing

我在应用空合并运算符时遇到以下错误。

```
private decimal _currentImpulseId;
// ... later on used in public property getter as follows

public decimal CurrentImpulseId
{
  get { return _currentImpulseId ?? 0M; }
  set { _currentImpulseId = value; }
} 
```

返回以下错误：

> 操作员 '？？' 不能应用于“十进制”和“十进制”类型的操作数

为什么这不起作用？空合并运算符是否不适用于小数，或者我在这里遗漏了什么？我知道如何在不使用运算符的情况下解决此问题，但这让我有些困惑，所以我想知道您是否知道正确答案？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T11:56:00.073

您收到此错误是因为`decimal`它是值类型，而不是可为空的值类型（例如`decimal?`）或引用类型。

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms173224.aspx)：

> ...并且用于为可空值类型或引用类型定义默认值

类型变量的默认值`decimal`为零，所以我不太清楚为什么要在这种情况下使用此运算符。

`_currentImpulseId`此外，从.NET 3.0 开始，不需要支持字段变量 ( )，因为引入了[自动实现的属性](http://msdn.microsoft.com/en-us/library/bb384054.aspx)意味着您可以编写

```
public decimal CurrentImpulseId { get; set; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T11:59:54.900

因为 decimal 是一种值类型，请参见[HERE](http://msdn.microsoft.com/en-us/library/system.decimal%28v=vs.100%29.aspx)，您必须使其可为空。尝试

```
private decimal? _currentImpulseId;
// ... later on used in public property getter as follows

public decimal? CurrentImpulseId
{
  get { return _currentImpulseId ?? 0M; }
  set { _currentImpulseId = value; }
} 
```

# javascript - 更改 img src 由于某种原因无法正常工作

> ID：12072556
> 
> 赞同：0
> 
> 时间：2012-08-22T11:55:05.050
> 
> 标签：javascript, jquery, html

如果有人可以告诉我为什么此代码无法通过单击链接更改该图像的 src。对于了解 javascript 的人来说，这非常简单易行。我做了一个jsfiddle：http: [//jsfiddle.net/WWvfP/1/](http://jsfiddle.net/WWvfP/1/)

```
<ul id="nav">
            <li><a href="#" id="home_mic">Contact</a></li>
            <li><a href="#" id="services_mic">Services</a></li>
            <li><a href="#" id="prices_mic">Prices</a></li>
            <li><a href="#" id="contact_mic">About</a></li>
</ul>

<div id="imageWrap">

<img src="http://placehold.it/80x80" id="mainImage" style=""/>

</div>

<script language="javascript">
  $("#home_mic").click(function(event){
  $("#mainImage").attr("src","http://placehold.it/80x40");
});</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:57:49.977

你的代码是正确的。您只是没有在 jsfiddle 中选择 jQuery 作为 JS 框架。

更正了 jsfiddle：http: [//jsfiddle.net/Ralt/WWvfP/4/](http://jsfiddle.net/Ralt/WWvfP/4/)

# linux - 期待 bash 中的错误

> ID：12072557
> 
> 赞同：1
> 
> 时间：2012-08-22T11:55:14.470
> 
> 标签：linux, bash, shell, expect

```
 VAR1=$(expect -c '
     spawn ssh-keygen -t rsa -f '"$SSH_KEY_PATH_ID"' -N '' -q 
     expect -exact "Generating public/private rsa key pair.\r
     Enter file in which to save the key (/root/.ssh/id_rsa):"
     sleep 5
     send "\r";
     expect "Enter passphrase (empty for no passphrase): "
     sleep 5
     send "\r";
     expect "Enter same passphrase again: "
     sleep 5
     send  "\r";
     ') 
```

这是我在 bash 中响应 ssh-keygen 问题的命令。即使我删除“睡眠”行，此代码也可以在我的机器上运行。但在另一台机器上它不起作用。它给出了错误

```
 send: spawn id exp6 not open
     while executing
   "send "\r"" 
```

问题是什么

更新：我在 ubuntu 上运行良好，但在 Centos 上运行良好。预期版本相同

更新：我修复了它。问题是，使用 _N 选项它提供了一个密码短语，并且使用此代码我将它作为“”。然后它错误地期望。最后一个有效的代码是；

```
 VAR1=$(expect -c '
     spawn ssh-keygen -t rsa -f '"$SSH_KEY_PATH_ID"' -q 
     expect -exact "Generating public/private rsa key pair.\r
     Enter file in which to save the key (/root/.ssh/id_rsa):"
     send "\r";
     expect "Enter passphrase (empty for no passphrase): "
     send "\r";
     expect "Enter same passphrase again: "
     send  "\r";
     ') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:12:52.147

确保您的文件具有 POSIX 行结尾 (\r) 而不是 DOS 行结尾 (\r\n)

# javascript - JQuery 的计算问题

> ID：12072563
> 
> 赞同：1
> 
> 时间：2012-08-22T11:55:24.877
> 
> 标签：javascript, jquery

我知道这很简单。但它仍然不起作用。我将输入数字与固定数字相乘，但未显示预期结果。即使我输入一些整数，它也总是显示错误消息“请输入一些值”例如 6\. 这是 Html 代码。

```
 <input type="text" class="cc"  id="getdata" />
  <div id="result"> <input type="text" id="show" /></div>
   <input type="button" value="calculate" id="calculate" /> 
```

这是 jQuery 代码。

```
 $(document).ready(function () {
        $("#calculate").click(function () {
            if ($("#input").val() != ''  && $("#input").val() != undefined) {
             $("#result").html("total value is::" + parseInt($("#input").val()) * 5);
            }
            else {
                $("#result").html("Please enter some value");
            }
         });
         }); 
```

任何帮助将不胜感激。

谁能告诉我如何连接文本框中不同按钮的所有单击值？我想在文本框中显示按钮的先前和当前单击值。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:58:21.270

你不是这个意思`#getdata`吗？在哪里`#input`？

在您的代码中替换`("#input")`为。`("#getdata")`

**看看这个[小提琴](http://jsfiddle.net/YdKJN/)。**

```
$(document).ready(function () {
  $("#calculate").click(function () {
     if ($("#getdata").val() != '' && $("#getdata").val() != undefined) {
         $("#result").html("total value is::" + parseInt($("#getdata").val()) * 5);
     } else {
         $("#result").html("Please enter some value");
     }
  });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:59:31.473

```
 $(document).ready(function () {
            $("#calculate").click(function () {
                if ($("#getdata").val() != ''  && $("#getdata").val() != undefined) {
                 $("#result").html("total value is::" + parseInt($("#getdata").val()) * 5);
                }
                else {
                    $("#result").html("Please enter some value");
                }
             });
             }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:44:17.000

签出这个[小提琴](http://jsfiddle.net/PcYPR/5/)

我认为这就是你想要的。

```
<input type="text" class="cc"  id="getdata" />
<input type="button" value="calculate" id="calculate" />
<div id="result"></div>​

<script>
$("#calculate").click(calculate);
$("#getdata").keypress(function(ev){
    if(ev.keyCode == 13)
        calculate();
});

function calculate()
{
    var $getData = $("#getdata");
    var $result= $("#result");

    if ($getData .val() != ''  && $getData .val() != undefined && !isNaN($getData .val()))
    {
        $result.append((parseInt($getData .val()) * 5) + "<p>");
    }
    else
    {   
        $result.append("Please enter some value<p>");
    }
    $getData .val("").focus();
}
​
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T11:58:17.733

您没有 id 为“输入”的输入。[jquery 选择器](http://api.jquery.com/category/selectors/) `#somestring`正在寻找 id 为 的元素`somestring`。

在您的代码中替换`("#input")`为。`("#getdata")`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T11:58:19.407

您发布的 HTML中没有带有 ID`input`的字段，但您的 jQuery 正在寻找一个。也许你的意思是`$('#show')`

对于 jQuery 问题，总是先怀疑选择器，然后再想知道还有什么问题。确认它确实找到了你认为的元素——永远不要假设。

```
console.log($('#input').length); //0 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T11:58:28.603

```
if ($("#input").val() != ''  && $("#input").val() != undefined) { 
```

您的标记中没有任何带有 id 的字段`input`！

`#input`我认为您希望该脚本中的所有实例都是`#getdata`，但您也应该只将其值读入一次变量并使用它：

```
$("#calculate").click(function () {
     var val = $('#getdata').val();
        if (val != ''  && val != undefined) {
         $("#result").html("total value is::" + parseInt(val) * 5);
        }
        else {
            $("#result").html("Please enter some value");
        }
     }); 
```

现场示例：http: [//jsfiddle.net/82pf4/](http://jsfiddle.net/82pf4/)

# matlab - Matlab向量化：如何删除for循环？

> ID：12072564
> 
> 赞同：0
> 
> 时间：2012-08-22T11:55:24.407
> 
> 标签：matlab, vectorization

我有以下矩阵：

```
X=1 2 3    

A=1 2 3  
  4 5 6  
  7 8 9 
```

我想要做

```
for each (i,j) in A  
  B(i,j) = sum(A(i,j)*x) 
```

即 A 的每个元素都乘以向量 X，然后我们将该向量的所有 3 个元素相加。
可以在没有 for 循环的情况下完成吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T12:00:55.490

也许是这样的？

```
B = A.*sum(X) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:01:34.280

**编辑**正如[@HighPerformanceMark](https://stackoverflow.com/a/12072679/232610)指出的那样，您可以简单地乘以 的总和`X`，这显然是可取的。下面是一个完全执行您想要执行的步骤的解决方案，这可能使我的解决方案对问题的非线性变体有用。

您可以将`X`其转换为 1×1×3 数组，并将其与 A 相乘以得到一个 3×3×3 数组，然后您可以沿第三维求和：

```
X = permute(X,[1,3,2]); %# make X 1*1*3

B = sum( bsxfun(@times, A, X), 3); %# multiply and sum 
```

# codeigniter - 使用 Codeigniter form_validation 回调解析参数以进行文件输入

> ID：12072567
> 
> 赞同：0
> 
> 时间：2012-08-22T11:55:28.683
> 
> 标签：codeigniter, file-upload, validation

我有一个上传输入，并试图通过 CI form_validation 库解析回调函数的参数。

```
$this->form_validation->set_rules('orderfile', 'Order Form'," trim|callback_upload_check[$account_id]"); 
```

这调用：

```
public function upload_check($str, $id)
{
    $errors = $this->do_upload($id);

    if(isset($errors['error']))
    {
        $this->form_validation->set_message('upload_check', $errors['error']);

        return FALSE;
    }else{
        return TRUE;
    }
} 
```

Codeigniter[用户](http://codeigniter.com/user_guide/libraries/form_validation.html#callbacks)指南指出，在调用函数时，第一个参数被解析为函数内的第二个参数。

两个参数都没有被解析。我在[Codeigniter 论坛](http://codeigniter.com/forums/viewthread/100710/#531862)上找到了这篇文章 这似乎解释了正在发生的事情（变量被剥离）。如果我将`<input type="text" />`参数更改为工作...有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:20:16.410

我知道这是一个老问题，但我遇到了同样的问题，我终于意识到第二个参数用引号括起来，所以如果你传递`$id`带有 value的 an `1`，它实际上返回为`"1"`.

因此，对于原始问题，您需要像这样回调函数：

```
$this->form_validation->set_rules('orderfile', 'Order Form'," trim|callback_upload_check[".$account_id."]"); 
```

在你的回调函数中：

```
public function upload_check($str, $id){
  $actual_id=str_replace('"', "", $id)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:41:40.977

您需要将功能更改为：

```
public function upload_check($orderfile)
{
    $errors = $this->do_upload($orderfile);

    if(isset($errors['error']))
    {
        $this->form_validation->set_message('upload_check', $errors['error']);

        return FALSE;
    }else{
        return TRUE;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:20:39.930

你需要像这样编辑你的代码：

```
$this->form_validation->set_rules('orderfile', 'Order Form'," trim|callback_upload_check[".$account_id."]"); 
```

我还注意到，在您的 form_validation->set_rules 中，您没有为 id 传递任何值，因此在您的函数中您应该这样做：

```
public function upload_check($str, $id=0){..} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-28T14:01:38.973

```
 $config =array(

        array(
            "field" => "userEmail",
            "label" => ":userEmail:",
            "rules" => "required|valid_email",
        ),
        array(
            "field" => "userPassword",
            "label" => ":userPassword:",
            "rules" => "required|min_length[8]",
        ),

    );

    $error_messages = array(
        "required" => "{field} the field is required.",
        "min_length" => "{field} the field value is so short",
        "valid_email" => "{field} please valid email",
    );

    $this->form_validation->set_message($error_messages);
    $this->form_validation->set_rules($config);

    if($this->form_validation->run() == FALSE) {
        $alert =preg_replace("/(\n)+/m", ' ', strip_tags(validation_errors()));
        $explode =explode(':', $alert);

        $arr =array();
        for($i=1; $i < count($explode); $i+=2){
            $y=$i;
            $j =++$y;
            $arr[$explode[$i]] = $explode[$j];
        }
        print json_encode($arr);

    } else { 
            //process

    } 
```

# mongodb - MongoDB：为什么不按多个键排序使用索引？

> ID：12072569
> 
> 赞同：3
> 
> 时间：2012-08-22T11:55:31.133
> 
> 标签：mongodb, indexing, mongodb-indexes

**问题：** 我有一个按字段索引的非常大的集合`ts`：（时间戳）

```
> db.events.ensureIndex({'ts': -1}) 
```

我想获得最后 5 个条目。令我惊讶的是查询不使用索引，因此非常慢：

```
> db.events.find().sort({'ts': -1, '_id': -1}).limit(5) 
```

但是，仅按或其他字段排序`ts`使用索引，因为它应该：

```
> db.events.find().sort({'ts': -1}).limit(5)
> db.events.find().sort({'_id': -1}).limit(5) 
```

这是 MongoDB 中的一个错误，这确实是一个记录的功能还是我做错了什么？

**附加信息：**

```
> db.events.find().sort({'ts': -1, '_id': -1}).limit(5).explain()
{
    "cursor" : "BasicCursor",
    "nscanned" : 795609,
    "nscannedObjects" : 795609,
    "n" : 5,
    "scanAndOrder" : true,
    "millis" : 22866,
    "nYields" : 73,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {

    }
}
> db.events.find().sort({'ts': -1}).limit(5).explain()
{
    "cursor" : "BtreeCursor ts_-1",
    "nscanned" : 5,
    "nscannedObjects" : 5,
    "n" : 5,
    "millis" : 0,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {
            "ts" : [
                    [
                            {
                                    "$maxElement" : 1
                            },
                            {
                                    "$minElement" : 1
                            }
                    ]
            ]
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T12:23:21.197

值得一读 Indexing Advice & FAQ wiki 页面的[Indexing Strategies](http://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ#IndexingAdviceandFAQ-IndexingStrategies)部分。

您可能会遗漏一些注意事项：

*   MongoDB 每个查询只使用一个索引

*   使用的`sort`列必须是索引中的最后一列

`ts`因此，对于您的示例，您应该在and上添加一个复合索引`_id`：

> db.events.ensureIndex({'ts':-1, '_id':-1});

..并确认`explain()`排序现在正在使用预期的索引：

```
> db.events.find().sort({'ts': -1, '_id':-1}).limit(5).explain()
{
    "cursor" : "BtreeCursor ts_-1__id_-1",
    "nscanned" : 5,
    "nscannedObjects" : 5,
    "n" : 5,
    "millis" : 0,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {
        "ts" : [
            [
                {
                    "$maxElement" : 1
                },
                {
                    "$minElement" : 1
                }
            ]
        ],
        "_id" : [
            [
                {
                    "$maxElement" : 1
                },
                {
                    "$minElement" : 1
                }
            ]
        ]
    }
} 
```

# oracle - 通过 Spring 调用带有对象集合的过程（oracle ARRAY STRUCT）

> ID：12072571
> 
> 赞同：1
> 
> 时间：2012-08-22T11:55:37.613
> 
> 标签：oracle, spring, hibernate

我试图执行一个过程，该过程在其他过程中包含一个参数，该参数是对象（oracle）的集合。我已经在没有 spring 的情况下管理了很多次，但是我在尝试使用 spring 时有点迷失，尽管互联网上有一些信息，但我找不到完整的示例来比较我的代码。Spring doc 只有片段。可能我的代码是错误的，但我忽略了为什么，你能帮我吗？我正在运行更简单的程序而没有问题。我的 DAO 看起来像这样：

```
//[EDITED]
private SimpleJdbcCall pActualizaDia;

....

@Autowired
public void setDataSource(DataSource dataSource) {
  pActualizaDia = new SimpleJdbcCall(dataSource).withCatalogName("PTR_GRUPOS_TRABAJO").withProcedureName("UPDATE_DIA");
  pActualizaDia.getJdbcTemplate().setNativeJdbcExtractor(new OracleJdbc4NativeJdbcExtractor());
}
...

 public Calendario updateSingle(final Calendario calendario) {

    SqlTypeValue cambiosEmpresa = new AbstractSqlTypeValue() {

    protected Object createTypeValue(Connection conn, int sqlType, String typeName) throws SQLException {

    ArrayDescriptor arrayDescriptor = new ArrayDescriptor("TTPTR_CAMBIO_EMPRESA", conn);

    Object[] collection = new Object[calendario.getCambiosEmpresa().size()];
    int i = 0;
    for (CeAnoEmp ce : calendario.getCambiosEmpresa()) {
        collection[i++] = new STRUCT(new StructDescriptor("TPTR_CAMBIO_EMPRESA", conn), conn, new Object[] {
            ce.getSQLParam1(),
            //...more parameters here in order to fit your type.
            ce.getSQLparamn() });
    }

    ARRAY idArray = new ARRAY(arrayDescriptor, conn, collection);

    return idArray;

    }

};

     MapSqlParameterSource mapIn = new MapSqlParameterSource();
 mapIn.addValue("P_ID_ESCALA", calendario.getEscala().getIdEscala());
     //more simple params here

     //Here it is the Oracle ARRAY working properly
 pActualizaDia.declareParameters(new SqlParameter("P_CAMBIOS_EMPRESA",
 OracleTypes.STRUCT, "TTPR_CAMBIO_EMPRESA"));
 mapIn.addValue("P_CAMBIOS_EMPRESA",cambiosEmpresa);

     //When executing the procedure it just work :)
     pActualizaDia.execute(mapIn);
     return null;
   } 
```

我得到的例外是

```
java.lang.ClassCastException: $Proxy91 cannot be cast to oracle.jdbc.OracleConnection 
```

我一直在阅读有关此主题的更多信息，我发现如果使用 Oracle 阵列，您似乎还必须将连接强制转换为 oracle 连接。

但是，大多数 Spring jdbc 框架类（如 SimpleJDBCTemplate 和 StoredProcedure）对您隐藏了连接访问。我是否需要对其中一个进行子类化并在某处覆盖一个方法以获取 dbcp 连接，然后将其转换为 Oracle 连接？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:50:54.727

我终于解决了它，我编辑了这篇文章，以便为任何寻找一段代码来解决这个问题的人提供一个示例。

有两个重要的事情要记住：

1) 必须在 jdbctemplate 中设置 oracle 提取器才能正确转换连接以获得 oracle 功能。

2) 使用此提取器时，ojdbc 和 JRE 版本必须相同，否则会出现 abstractmethodinvocation 异常。

感谢任何试图解决它并希望它有所帮助的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-09T15:54:44.750

您可以使用 spring 调用带有 oracle 结构集合数组的过程：下面是一个简单的示例来执行此操作

```
import java.util.Collection;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;

import javax.sql.DataSource;

import oracle.jdbc.driver.OracleConnection;
import oracle.jdbc.driver.OracleTypes;
import oracle.sql.ARRAY;
import oracle.sql.ArrayDescriptor;
import oracle.sql.STRUCT;
import oracle.sql.StructDescriptor;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.jdbc.core.SqlParameter;
import org.springframework.jdbc.object.StoredProcedure;

public class SpringObjectMapper {

    public static class SaveObjectFunction extends StoredProcedure {
        final static Logger logger = LoggerFactory.getLogger(SavePackInterFunction.class);

        private static final String PROC_NAME = "schema.proc_name";
        private final static String ARRAY_OF_VALUE_PARAM_NAME = "ARRAY_OF_VALUE";
        private final static String OUT_PARAM_NAME = "out";

        public SaveObjectFunction(DataSource dataSource) {
            super(dataSource, PROC_NAME);
            declareParameter(new SqlParameter(ARRAY_OF_VALUE_PARAM_NAME, OracleTypes.ARRAY, "schema.array_object_type"));
            compile();
        }

        public String execute(Collection<Model> values) {
            logger.info("------------------------EnregInterlocuteurPrcedure::execute : begin----------------------------");
            String message = null;
            try {

                OracleConnection connection = getJdbcTemplate().getDataSource().getConnection().unwrap(OracleConnection.class);
                ArrayDescriptor arrayValueDescriptor = new ArrayDescriptor("schema.array_object_type", connection);
                StructDescriptor typeObjeDescriptor = new StructDescriptor("schema.object_type", connection);

                Object[] valueStructArray = new Object[values.size()];
                int i = 0;  
                for (Iterator<Model> iterator = values.iterator(); iterator.hasNext();) {
                    Model model = (Model) iterator.next();
                    STRUCT s = new STRUCT(typeObjeDescriptor, connection, new Object[] {model.getAttribute1(), model.getAttribute2(), model.getAttribute3(),
                            model.getAttribute4(), model.getAttribute5(), model.getAttribute6(), model.getAttribute7()});
                    valueStructArray[i++] = s;
                }
                ARRAY inZoneStructArray = new ARRAY(arrayValueDescriptor, connection, valueStructArray);
                Map<String, Object> inputs = new HashMap<String, Object>();
                inputs.put(ARRAY_OF_VALUE_PARAM_NAME, inZoneStructArray);
                Map<String, Object> out = super.execute(inputs);
                message = (String) out.get(OUT_PARAM_NAME);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return message;
        }
    }

} 
```

# ria - ria 服务提交更改

> ID：12072573
> 
> 赞同：0
> 
> 时间：2012-08-22T11:55:48.203
> 
> 标签：ria, silverlight-5.0

我将 Silverlight 与 RIA 服务一起使用，并具有选项卡式 UI。维护单个 DomainContext 对象。因此，当在 Context 上调用 SubmitChanges 时，我只想提交该特定对象的更改，而不是提交所有更改。

所以问题是我如何为 EntitySet 提交更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:15:32.047

这可能有点牵强，但这里有。

如果您使用事件来提交更改，例如提交按钮，您可以调用您的服务，然后您也可以调用您想要进行更改的实体，然后添加您想要对该实体进行的更改。

```
public <Your Service> _context = new <Your Service>(); 
```

然后在事件中做类似的事情..

```
private void OKButton_Click(object sender, RoutedEventArgs e)
    {
        JobMarket jm = new JobMarket();

        --Do whatever changes you want, set jm equal to tab contents etc.--

        _context.JobMarkets.Add(jm);
        SubmitOperation s = _context.SubmitChanges();
    } 
```

如果您在代码中设置断点，您将能够准确地看到 jm 包含的内容，以及 s 正在添加、修改、删除等内容，并进行相应的更改。希望这可以帮助。

# cloud - 面向射频应用的 SaaS、PaaS 解决方案

> ID：12072574
> 
> 赞同：1
> 
> 时间：2012-08-22T11:55:48.750
> 
> 标签：cloud, platform, rfid, wifi, zigbee

我正在寻找云中的 SaaS/PaaS 解决方案，它可以快速部署、配置和支持基于 ZigBee、RFID 和可能的 WLAN 客户端的无线应用程序。

我不想为端到端基础设施的开发和部署而烦恼 + 需要在该系统中进一步扩展基于 RF 的新功能。

理想情况下，我正在寻找类似 Twilio (twilio.com) 或云中基于小工具/小部件的应用程序平台，这将支持快速应用程序开发和部署。当然，应该提供开放 API 和一些应用程序示例。

这里有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:23:35.863

看看[iDigi](http://www.idigi.com)。iDigi 是一个托管的 PaaS/SaaS，它允许您通信和管理远程无线设备。简而言之：

1) 设备连接到 iDigi 并变得安全且全球可访问，即使它们位于 NAT 之后。

2) 您可以使用简单的网络服务请求与一台或多台设备进行通信。

3) iDigi Web 界面允许您管理远程设备配置、设置警报、为一台或数千台设备执行固件和应用程序更新。

它适用于 Digi International 的硬件，例如他们的 ConnectPort X 蜂窝无线网关*，并通过他们称为*[iDigi 连接器](http://www.idigi.com/idigiconnector/)的连接代理与您自己的第三方硬件一起使用。

# xml - 删除文本节点中的空白问题

> ID：12072581
> 
> 赞同：0
> 
> 时间：2012-08-22T11:56:07.900
> 
> 标签：xml, xslt, xpath

在删除文本节点中的空白时遇到一些问题。这是我使用的代码，但仍然没有空格。

```
 <xsl:output indent="yes" method="xml"/> 
 <xsl:template match="/">

    <Address>  <xsl:apply-templates/> </Address>
 </xsl:template>

 <xsl:template match="Address/Rowinfo ">

     <xsl:copy>
        <xsl:copy-of select="LocatorDesignator"/>
        <xsl:copy-of select="LocatorName"/>

    </xsl:copy>
    </xsl:template>

 <xsl:template match="Address/Rowinfo/LocatorDesignator">

    <xsl:value-of select = "normalize-space(LocatorDesignator)"/> 
    <xsl:apply-templates/>
     </xsl:template>

 <xsl:template match="Address/Rowinfo/LocatorName">

    <xsl:value-of select = "normalize-space(LocatorName)"/> 
    <xsl:apply-templates/>
 </xsl:template>
 </xsl:stylesheet> 
```

它产生相同的结果。这是一个示例 xml 数据，其文本节点中有空格。

```
<Address>
<Rowinfo>
<Locator>mr oga,    Ade  </Locator>
<LocatorDesignator>Dwelling(Part Of),   Null </LocatorDesignator>
</Rowinfo> 
```

我的预期输出是

```
 <Locator>mr oga, Ade</Locator>
  <LocatorDesignator>Dwelling(Part Of),Null</LocatorDesignator> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:06:51.267

**从文本节点中删除不需要的空间的一种众所周知的方法**是使用

**[规范化空间（）](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-normalize-space)**

功能。

**从 XML 文档中删除空白文本节点的另一种补充方法**是**[XSLT 指令](http://www.w3.org/TR/1999/REC-xslt-19991116#element-strip-space)**：

```
<xsl:strip-space elements="*"/> 
```

**删除与任何其他更具体的模板不匹配的文本节点的第三种方法**是使用以下模板：

```
<xsl:template match="text()"/> 
```

这更强大（并且不明智地使用会导致想要的文本节点在输出中被“删除”）。

人们通常使用这三种方法的组合来删除不需要的空白和文本节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:05:03.800

您的模板未使用

代替

```
<xsl:copy-of select="LocatorDesignator"/> 
```

做

```
<xsl:apply-templates select="LocatorDesignator"/> 
```

或者按照 JWiley 的建议，使用[翻译删除空格](http://www.dpawson.co.uk/xsl/sect2/N7998.html)

```
<xsl:template match="Address/Rowinfo/LocatorDesignator">  
    <xsl:value-of select = "translate(.,' ', '')"/>  
    <xsl:apply-templates/> 
</xsl:template> 
```

或者您有多种方式可以到达罗马：

```
 <xsl:copy-of select="translate(LocatorDesignator,' ','')"/> 
```

# git - GIT：管理多个平台

> ID：12072582
> 
> 赞同：0
> 
> 时间：2012-08-22T11:56:08.683
> 
> 标签：git, repository

我正在开发移动应用程序，我们每个项目有 1 个存储库。每个项目都可以为多个平台开发，例如 Android 和 iOS。我们现在拥有的是 GIT 存储库根目录中每个平台的子目录。出于某种原因，我认为这不是一个好习惯。在这种情况下，人们通常会怎么做？最常见的解决方案是什么？到目前为止，我只知道三个选项：单独的分支、存储库和原样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:58:42.753

我想你想使用[Git 子模块](http://git-scm.com/book/en/Git-Tools-Submodules)。您可以在一个项目中拥有多个“子项目”。

# api - 制作 REST API：如何使用 express for node 路由文件路径

> ID：12072584
> 
> 赞同：3
> 
> 时间：2012-08-22T11:56:08.267
> 
> 标签：api, node.js, rest, routing, express

```
var express = require('express');

var app = express();
app.get('/files/:service/:op/:file', function(req, res){
  console.log(req.params.file)
})

app.listen(3000); 
```

通话`http://localhost:3000/files/farm/get/chicken`将记录`chicken`。通话`http://localhost:3000/files/farm/get/barn/yard/chicken`将记录`barn`。

如何制作 Express`app.VERB(path, callback)` `path`日志`barn/yard/chicken`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T13:09:29.180

将您的路线更改为以下内容：

```
app.get('/files/:service/:op/*', function(req, res){
  console.dir(req.params);
  console.log(req.params[0]); // this is what you want
  res.writeHead(200, {'Content-Type': 'text/html'});
  res.end('OK');

}); 
```

请注意最后一个参数如何更改为 *，以便它接受单个值（如鸡）或多值（如谷仓/院子/鸡）。这里的问题是斜杠字符用于拆分 URL 组件，但您有时希望拆分值而不是其他值。* 会自动将最后一组值（1 或多个）集中到单个元素中。

见[http://expressjs.com/api.html#req.params](http://expressjs.com/api.html#req.params)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:08:59.580

试试这个：

```
console.log(req.params.service + "/" + req.params.op + "/" + req.params.file); 
```

# apache - 如何使用 mod_rewrite 编辑此 url

> ID：12072589
> 
> 赞同：0
> 
> 时间：2012-08-22T11:56:23.510
> 
> 标签：apache, mod-rewrite

我有一个godaddy linux服务器，我想编辑我的网址

这是我网站上 3 个 url 的示例

1.  www.website.com/b.php?n=30&t=big
2.  www.website.com/b.php?n=20&t=medium
3.  www.website.com/b.php?n=10&t=small

我希望能够将它们更改为

1.  www.website.com/30/big
2.  www.website.com/20/medium
3.  www.website.com/10/small

我的图像代码

```
echo '<img src="gifs/' . $_GET["t"] . '/' . $_GET["n"] . '.gif">'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:31:54.097

您可以通过将站点上的所有链接从`/b.php?n=30&t=big`样式链接更改为`/30/big`样式链接来更改它们。然后，您可以将这些规则放在文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?([^/]+)/(.*) /b.php?n=$1&b=$2 [L,QSA] 
```

这会将 URI 更改回路由通过的 URI `b.php`。

如果您的旧 URL 在 Internet 上浮动并且需要更改为新 URL，您可以在相同的 htaccess 文件中使用它们：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /b\.php\?n=([^&]+)&t=([^&\ ]+)
RewriteRule ^/?b\.php$ /%1/%2 [L,R=301] 
```

这将重定向浏览器（或 google index bot）以永久指向新的 URL。

# abap - 使用 TYPE REF TO 数据的正确方法？

> ID：12072592
> 
> 赞同：5
> 
> 时间：2012-08-22T11:56:30.117
> 
> 标签：abap, assignment-operator

我已经声明了一个类型为 ref to data 的类型。所以看起来像这样

```
my_type type ref to data. 
```

然后我声明一个内部表，我想将它分配给 my_type。

```
Data:
  ref_data type my_type.
  itable type it_table.

ref_data = itable. 
```

为什么我不能将 itable 分配给 ref_data，对数据的引用不是通用数据类型并且可以分配给任何东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:42:18.820

这与其他编程语言非常相似，输入变量或引用都不是问题。您正在尝试为指针变量赋值 - 这在任何地方都不起作用。您需要使用[GET REFERENCE OF itable INTO ref_data](https://help.sap.com/doc/abapdocu_751_index_htm/7.51/en-us/abapget_reference.htm)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T13:42:02.847

这不是数据引用的工作方式。必须键入数据引用，但您在运行时键入它。

```
data: ref_data type ref to data.
data: itable type it_table.

"you access the data in a data reference via a field symbol
field-symbols: <dref> type any.  

create data ref_data type it_table.

assign ref_data->* to <dref>.

<dref> = itable. 
```

现在，我的动态类型变量 ref_data 中有一个 itable 的副本，由字段 symbol 访问。

# java - java - 如何解析在java中具有另一个xml文件作为标签的xml文件？

> ID：12072596
> 
> 赞同：0
> 
> 时间：2012-08-22T11:56:48.747
> 
> 标签：java, xml, xml-parsing

我想解析一个 xml 文件，其标签/节点之一具有另一个 xml 文件作为数据，所以我如何解析该文件。以下是 xml 文件：

```
<?xml version="1.0"?>
<company>
<URL>
<RequestUrl>http://www.google.com
</RequestUrl>
<RequestData>
"<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance"     xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/"><v:Header /><v:Body><PingMe xmlns="visum.Server.Service" id="o0" c:root="1"><Data i:type="d:string">ping</Data></PingMe></v:Body></v:Envelope>"
</RequestData>
</company> 
```

当我要解析上面的 xml 文件并在请求数据标签下检索 xml 文件时，它不会返回另一个 xml 文件的整个字符串，而只是返回空白字符串，那么我应该如何处理呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:06:47.910

改为解析这个。您必须使用 CDATA 才能不解释额外的“XML”。

```
<?xml version="1.0"?>
<company>
<URL>
    <RequestUrl>http://www.google.com</RequestUrl>
    <RequestData>
    <![CDATA[
        <v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance"                 xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/"><v:Header /><v:Body><PingMe xmlns="visum.Server.Service" id="o0" c:root="1"><Data i:type="d:string">ping</Data></PingMe></v:Body></v:Envelope>
    ]]>
    </RequestData>
</URL>
</company> 
```

# php - 根据php中的开始日期计算日期并返回周数？

> ID：12072598
> 
> 赞同：0
> 
> 时间：2012-08-22T11:56:55.467
> 
> 标签：php

我试图创建一个`$start_date`以参数为参数的函数，它应该计算我们所处的周数，即

例如 $start_date 等于`2012-08-16`

```
private function get_week_number($start_date){
        // get current date
        // caluculate the difference between start_date and current_date
        // determine which week we are in 1, 2 or 3
        // return $week 
    } 
```

我怎样才能在php中实现这个？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T11:59:04.213

我认为您需要的只是[date_diff](http://php.net/manual/en/function.date-diff.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T12:00:12.233

```
function get_week_number($start_date){
    $date = date('U', strtotime($start_date));
    $now = date('U');
    return ceil(($now-$date)/60/60/24/7);
}

echo get_week_number('2012-08-16'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:01:33.507

```
private function get_week_number($start_date){
    return date('W') - date('W', strtotime($start_date)); 
} 
```

# c++ - 为什么 C++ 中的 main() 没有重载以使用 std::string？

> ID：12072600
> 
> 赞同：27
> 
> 时间：2012-08-22T11:57:04.983
> 
> 标签：c++, command-line-arguments, main

我试图创建一个使用`main()`函数参数通过命令行获取参数的程序。作为（基本）C++ 程序员（即使我非常了解 C 风格的指针和数组），我几乎从未使用过`char*`字符串和 C 数组。我花了一些时间来接受`main()`参数并将其转换为`std::string`......所以问自己：为什么在 C++ 中`main()`函数没有重载以采用 an`std::vector<std::string> argv`而不是 old `char* argv[]`？

`main()`对于“重载”，我的意思是 和 等函数的共存，`int main()`而`int main(int argc, char *argv[])`不是程序员制作的普通函数的重载。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-22T12:23:15.627

为什么不在标准中？简单的：

因为没有人*提议*。

事情进入 C++ 标准是因为有人为它写了一个提案，然后让其他人对其进行投票并合并它。除非有人真的*希望*它发生，否则它不会发生。

考虑到这个功能实际上是多么微不足道：

```
int main(int argc, char **argv)
{
    std::vector<std::string> args(argv, argv + argc);
    ...
} 
```

只是没有任何真正的*需要*。这是一个方便的功能，与替代方案相比，它甚至没有使事情变得方便。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-22T12:09:22.077

> 为什么在 C++ 中 main() 函数没有重载以采用 std::vector argv 而不是旧的 char* argv[]

因为这需要**依赖`<string>`library**。C++ 的理念始终是*“不要为不使用的东西付费*”。如果有人不想要提供的自动内存管理，`string`那么他们就无法强制执行。
*第二种观点*：如果某些平台没有任何库支持，那么您将无法启动您的 C++ 程序！！

相反，`int`参数`char**`是内置的和独立的类型。人们总是可以编写自定义包装器，`main()`它可以完全满足需要。

**编辑**：关于 AProgrammer 的评论：
假设这`main(vector<string>)`是允许的；那么如果一个平台符合所有 C++ 特性，但没有标准库支持，那么它将变得不符合标准。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-22T12:34:40.490

我怀疑，主要原因是因为通常的实现是`extern "C"`使用可变参数使其成为一个函数。在很多实现中，调用 main 的是 C 运行时库。

有很多方法可以解决这个问题，但考虑到将参数转换为您想要的任何内容是多么容易，它们似乎都不值得费心。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T12:23:23.573

编译器编译定义为的 main 将是微不足道的

```
int main(std::vector<std::string> args) {
    ...
} 
```

因为它被写成

```
int main(int __argc, char **__argv) {
    std::vector<std::string> args(__argv, __argv+__argc);
    ...
} 
```

允许任何容器，甚至是自定义容器，而不仅仅是`std::vector<std::string>`. 但它不是标准的，因为——标准答案*为什么不在标准中*——没有人提出它并说服足够多的人这是一个好主意。我不认为有一个提议，所以可能没有理由拒绝它。对于大多数相关人员来说，这种变化可能很简单。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T12:11:10.783

基本上，std::vector 与 char * 数组不同（在内存布局或其他方面）。为此，您必须让编译器识别新的主声明并在创建字符串向量的条目上添加一个包装器。

鉴于您正在这样做，您不妨也将 argc 扔掉，并声明 main be

```
int main(std::vector<std::string> argv) 
```

但它适用于编译器。你必须让很多人认为这是值得的。

否则你可以自己做

```
int main(int argc, char **argv)
{
    std::vector<std::string> args;
    args.reserve(argc);
    for (std::size_t arg = 0; arg < argc; ++arg)
    {
         args.push_back(argv[i]);
    }
    return mymain(args);
} 
```

代码不能保证编译或工作，因为我只是把它写在我的脑海中。

或（更好，感谢 AProgrammer）

```
int main(int argc, char **argv)
{
    return mymain(std::vector<std::string>(argv, argv + argc));
} 
```

# android - TextView中单词中每个字母的背景

> ID：12072601
> 
> 赞同：1
> 
> 时间：2012-08-22T11:57:08.900
> 
> 标签：android, android-layout

是否可以在 TextView 中的单词中的每个字母（而不是整个单词）周围有黑色背景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T11:58:59.630

我能想到的唯一方法是在您的`textView`.

把你的文本放在 HTML 中，然后做这样的事情

```
TextView contactWeb1 = (TextView) findViewById(R.id.contactWeb1);
String desc = "<font color=\"red\"><a href='http://www.mysite.com/'>Visit my site</a></font>";
contactWeb1.setText(Html.fromHtml(desc)); 
```

以上代码来自第三个链接

以下是一些相关问题

1.  [TextView 中是否可以有多种样式？](https://stackoverflow.com/q/1529068/492561)
2.  [如何在 TextView 中显示 HTML？](https://stackoverflow.com/q/2116162/492561)
3.  [Android Linkify 链接 textColor 被忽略，css 样式覆盖可能吗？](https://stackoverflow.com/a/7178045/492561)

# c# - 命名空间已包含 wsdl 生成的文件中的定义

> ID：12072602
> 
> 赞同：0
> 
> 时间：2012-08-22T11:57:12.760
> 
> 标签：c#, reporting-services, wsdl

我正在尝试将报告服务集成到 C# 应用程序中，但是当我尝试编译它时，我遇到了一堆“已经包含”错误，就像这两个错误一样：

```
error CS0101: The namespace 'Microsoft.SqlServer.ReportingServices2005' already contains a definition for 'ListSecureMethodsCompletedEventHandler'
error CS0101: The namespace 'Microsoft.SqlServer.ReportingServices2005' already contains a definition for 'GetRenderResourceCompletedEventHandler' 
```

它们都来自 ReportingServices2005.cs 文件，该文件是使用 wsdl 生成的，并且我包含在项目中。我在这里做错了什么？

我可能还应该提到我正在使用 ReportingService2010.cs 和 ReportExecution.cs。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:46:55.327

嗯，这很容易。这是我第一次在 C# 中使用 ReportingServices，但我误读了文档。我认为 ReportingService2005 和 2010 都需要。排除 ReportingService2005 并更改一些内容后，一切正常。

# android - 如何从txt文件加载listview的信息

> ID：12072603
> 
> 赞同：0
> 
> 时间：2012-08-22T11:57:15.383
> 
> 标签：android, android-listview

我希望将文本文件中的信息加载到列表视图中。请帮助我使用相同的代码。

我在阅读时获得的信息格式如下

```
1,demo,time,date:
2,sad,dad,sad: 
```

我需要以这样一种方式显示数据，即对于 int 值来说 0/1 应该有一个图像。必须显示低于该时间/爸爸和最后日期的下一个演示/悲伤。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:26:44.687

您必须覆盖 CursorAdapter.setViewText()

我在这里回答了类似的问题： [Custom CursorAdapter, ListView is shift](https://stackoverflow.com/questions/6429005/custom-cursoradapter-listview-is-shifting/6445805#6445805)

另一种方法很简单，在解析数据时使用 if 命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:43:16.440

您要问的内容需要大量代码才能完全回答该问题。查看您修改后的问题，您应该考虑通过实现`ListAdapter`接口来创建自定义适配器。对于`ListViews`和`ArrayAdapters`，以及创建您自己的自定义适配器，[本教程](http://www.vogella.com/articles/AndroidListView/article.html)非常好。

# android - 如何在 Android 中为警报对话框标题添加焦点

> ID：12072604
> 
> 赞同：2
> 
> 时间：2012-08-22T11:57:15.897
> 
> 标签：android, android-alertdialog, android-dialog

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="xyz" />
    <EditText 
           android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        />
</LinearLayout> 
```

我有一个如上所述的 XML 布局，当我单击那个 xyz 按钮时，我想启动我的应用程序“示例应用程序”，它将显示一个对话框。我已从设置 -> 辅助功能启用“对讲”应用程序。然后，一旦我单击 xyz 按钮，对讲应用程序会说“警报..”，但不会说“警报 + 对话框标题”。但是，如果我在我的应用程序中启动一个对话框，那么它会正确说出对话框标题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-22T12:01:10.647

在清单中声明您的活动，例如..

```
<activity
        android:name=".ActivityName"           
        android:theme="@android:style/Theme.Dialog" > 
```

# grails - 覆盖 Grails 错误消息以格式化日期和数字

> ID：12072607
> 
> 赞同：2
> 
> 时间：2012-08-22T11:57:26.960
> 
> 标签：grails, formatting

我创建了一个带有 Double 字段的域。当验证发生时，它会抛出带有大小值的错误消息，并用逗号显示数字。以下是详细内容

Groovy 类

```
class Quote {

    String content;
    Double size;

    static constraints = {
       content(maxSize:1000, blank:false)
       size(min: 0.00D, max:999.99D)
    }
} 
```

输入值“11111”，得到错误“大小 11,111 超出限制”。我在messages.properties 中添加了属性键/值对。

在这里，我想在没有逗号的情况下返回消息。我的主要目标是根据我的要求获取密钥并格式化返回的消息。我需要这个，因为我有其他需要转换的字段。例如，日期已验证，但在显示错误时需要将公历日期转换为伊斯兰日期并显示给用户。

有谁知道我是否可以做些什么来完成这项工作。

我已经尝试过[http://ishanf.tumblr.com/post/434379583/custom-property-editor-for-grails](http://ishanf.tumblr.com/post/434379583/custom-property-editor-for-grails)中提供的解决方案，但这不起作用。我也尝试过修改消息值，但是在我的日期问题的情况下这并不灵活。例如，对于键值对，我可以使用 {2, date, mm/dd/yyyy} 而不是使用 {2} 作为占位符，但对于伊斯兰日期，我想以不同的方式格式化和显示内容。

另外，请注意我已经为我的应用程序的默认日期格式创建了一个单独的键。

将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T19:06:27.880

在 grails 中，约束的返回是一个已经翻译的字符串。

您可以创建一个 taglib 来格式化，或增强

另一种选择是自定义验证器。自定义验证器在失败时可以返回 false 或 key。

例如，在您的域类中，要验证一个字段：

```
myDateField validator: {val, obj -> obj.myShinyDateValidatorMethod(val) }

private myShinyDateValidatorMethod() {
  if (isNotValidDate(val) {
    return [the_message_key, val.formatedAsYouWand]
  }
} 
```

并且，在您的属性文件中，您必须定义密钥：

```
the_message_key=This date: {3} is not valid 
```

这里的技巧是，在验证器的返回中，第一个字符串是键，其余的是该键的参数，但是 grails 已经使用 {0}、{1}、{2} 占位符来表示 className、fieldName 和 value，并且您传递的第一个参数将用作 {3} 占位符。

希望这可以帮助

# wcf - 非管理员用户的客户端无法使用 net.pipe 与服务进行通信

> ID：12072617
> 
> 赞同：1
> 
> 时间：2012-08-22T11:57:52.700
> 
> 标签：wcf, named-pipes, netnamedpipebinding

我有一个使用 net.pipe 协议托管 WCF 服务的客户端应用程序。客户端无法与在管理员用户下运行的其他 WCF 服务进行通信。

我已经读到您无法在不同用户之间使用 net.pipe 进行通信。

有办法绕过吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T15:14:16.513

> 我已经读到您无法在不同用户之间使用 net.pipe 进行通信。

这不是真的。以下是我认为您所指内容的摘要：

如果您在 Windows Vista 之前的操作系统上运行，则没有问题：任何进程都应该能够托管任何其他本地进程都可以访问的 WCF net.pipe 服务。

如果您在 Windows Vista 或更高版本上运行，则 WCF net.pipe 服务将只能由在同一登录会话中（例如，在同一交互式用户会话中）运行的进程访问，**除非**托管 WCF 服务的进程正在以提升的权限运行SeCreateGlobalPrivilege。

Windows 服务在它们自己的登录会话中运行，并具有 SeCreateGlobalPrivilege 特权，因此自托管和 IIS 托管的 WCF net.pipe 服务对同一台机器上的其他登录会话中的进程可见。

在我遇到的大多数情况下，这是一个问题，解决方法是始终在 Windows 服务中托管 WCF 服务，必要时使用双工合同在交互会话期间反转客户端和服务器角色。

也可以看看：

*   [创建命名管道 (WCF) 所需的最低操作系统权限](https://stackoverflow.com/questions/4098549/minimum-os-permissions-required-to-create-named-pipe-wcf)
*   [在 C# 中使用 NetNamedPipeBinding 获取 EndpointNotFoundException；需要创建全局命名管道](https://stackoverflow.com/questions/7477813/getting-endpointnotfoundexception-with-netnamedpipebinding-in-c-need-to-create)
*   [通过命名管道从 Windows 服务（会话#0）连接到桌面应用程序（会话#1）](https://stackoverflow.com/questions/4303154/connecting-via-named-pipe-from-windows-service-session0-to-desktop-app-sessi)

# c++ - 从 2d 图像像素获取 3d 坐标系中的 x,y

> ID：12072619
> 
> 赞同：1
> 
> 时间：2012-08-22T11:57:57.730
> 
> 标签：c++, opencv, camera-calibration, pose-estimation

使用具有固定位置的相机，我必须跟踪运动中的物体并将其定位在某个预先选择的坐标系中。想法是在已知高度的对象顶部放置一个特定的颜色标记，这样Z坐标就知道了。完成颜色跟踪后，我需要从找到颜色的 u 和 v 图像坐标中找出 X 和 Y。我已经完成了相机校准，我打算使用 cv::solvePnP 来获取旋转和平移向量。另外，我在[这里](http://www.aishack.in/2010/07/tracking-colored-objects-in-opencv/)学习了颜色跟踪，并从中编写了一个 C++ api。

我已经在[这里](https://stackoverflow.com/q/7836134)找到了一个类似的问题，并从中学到了很多，但不同的是我只需要评估 X 和 Y，因为 Z 坐标是已知的（之前测量过）。如何获得具有预先指定 Z 的 X 和 Y 坐标？感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:43:02.727

由于您已经校准（我假设 z=0），您可以使用相机、平移和旋转矩阵从像素到 rw 坐标。

1.  你找到一个你想知道 rw 坐标的点。（颜色标记）
2.  您查找该点的 x 和 y 坐标（假设 z=0）
3.  您计算 x 和 y 中的角度（相对于主点）
4.  您可以使用这些角度来计算 x 和 y 在 z=objectHeight 处的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:12:16.437

在您校准并获得外在参数和内在参数后，您可以使用有关的信息

*   u,v 坐标
*   z坐标

在世界坐标中找到 X e Y：

*   Pc = R * Pw + T

其中 Pc 凸轮坐标，Pw 世界坐标，R 旋转矩阵和 T 平移向量。

# java - Java 内部类的类引用

> ID：12072626
> 
> 赞同：7
> 
> 时间：2012-08-22T11:58:17.463
> 
> 标签：java, generics, inner-classes

有没有办法引用**任何**内部类？

我想指定一个与内部类兼容的返回类型，例如

```
Class<OuterClass.*> some_method(); 
```

我了解此语法无效。有没有办法表达这个？

我知道我不能使用类似的东西，`Class<? extends OuterClass>`因为内部类不扩展外部类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T12:03:07.410

好吧，您至少可以参考特定的内部类：

```
<T extends OuterClass.InnerClass> Class<T> some_method() 
```

除此之外，通过返回*任何*内部类的对象你会得到什么？这相当于返回任何对象加上内部实例与外部实例具有特殊关系的事实。但是，无论如何，您可能无法直接使用该特殊关系。

编辑：

正如其他人已经指出的那样，`InnerClass`可能是其他内部类扩展的超类。这将允许您返回*任何*扩展该类的类。

如果您使用接口，则不仅限于*内部*类，因为对于此限制，您需要非静态内部接口。但是，默认情况下，内部接口是静态的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T12:04:36.973

我宁愿定义一个（内部）接口，让所有内部类实现它，然后：

```
Class<OuterClass.MyInterface> someMethod(); 
```

这比试图引用任何内部类更安全。当您需要另一个内部类用于其他用途时，或者您决定提取一个类时，您不会有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:03:21.403

不，没有。就像您不能使用通配符引用包一样：

```
Class<com.example.*> some_method();
Class<com.example.?> some_method(); 
```

此类声明的用例将非常有限，以至于无法将其纳入 JLS。请注意，您也不能在泛型范围之外使用此类“位置匹配类型”。例如，您不能声明：

```
void some_method(OuterClass.*  argument);
void some_method(com.example.* argument); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:07:24.493

您可以定义标记接口并通过内部类实现它。

```
<T implements CustomMarkerInterface> Class<T> some_method() 
```

所以这将适用于所有内部类`OuterClass`

```
public class Outer {

    public class Inner implements CustomMarkerInterface{

    }

    public class Inner1 implements CustomMarkerInterface{

    }

    public class Inner2 implements CustomMarkerInterface{

    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T12:07:40.540

`Class<InnerClass>`在 java 中是允许的。您在寻找特定的东西吗？

```
public class Client
{
interface InnerType
{
}
public class InnerClass implements InnerType
{
}
public Class<? extends Client.InnerType> test()
{
    return InnerClass.class;
}

} 
```

# security - 是否可以以编程方式访问 RSA Secure Id 以用于测试自动化？

> ID：12072628
> 
> 赞同：11
> 
> 时间：2012-08-22T11:58:19.897
> 
> 标签：security, automation, rsa

我有一个要求，我需要在登录身份验证期间从 RSA 令牌输入安全 ID，然后开始运行自动化测试。

是否可以通过任何 api 或任何其他方式以编程方式访问 RSA 令牌值，以便可以完全自动化测试流程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-22T19:46:40.437

我们通过执行以下操作自动登录到使用 rsa 安全 ID 和 Cisco AnyConnect 的 vpn：

1）以您想要的方式以编程方式打开 rsa 安全 ID

2）运行以下.ps1

```
#Source http://www.lazywinadmin.com/2010/06/powershell-get-clipboard-set-clipboard.html
function Get-ClipBoard {
Add-Type -AssemblyName System.Windows.Forms
$tb = New-Object System.Windows.Forms.TextBox
$tb.Multiline = $true
$tb.Paste()
$tb.Text
}
# end Source http://www.lazywinadmin.com/2010/06/powershell-get-clipboard-set-clipboard.html

$wshell = New-Object -ComObject wscript.shell;
$wshell.AppActivate('the name')#Here you need to write the name that appears on the left top corner of the rsa secure id window
Sleep 1
$wshell.SendKeys('{TAB}')
$wshell.SendKeys('~')
$a = Get-ClipBoard

#Source http://www.cze.cz
#This script is tested with "Cisco AnyConnect Secure Mobility Client version 3.0.5080″
#Please change following variables

[string]$CiscoVPNHost = 'the vpn you are trying to connect'
[string]$Login = 'your user'
[string]$Password = $a

#Please check if file exists on following paths
[string]$vpncliAbsolutePath = 'C:\Program Files (x86)\Cisco\Cisco AnyConnect Secure Mobility Client\vpncli.exe'
[string]$vpnuiAbsolutePath = 'C:\Program Files (x86)\Cisco\Cisco AnyConnect Secure Mobility Client\vpnui.exe'

#****************************************************************************
#**** Please do not modify code below unless you know what you are doing ****
#****************************************************************************

Add-Type -AssemblyName System.Windows.Forms -ErrorAction Stop

#Set foreground window function
#This function is called in VPNConnect
Add-Type @'
using System;
using System.Runtime.InteropServices;
public class Win {
[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool SetForegroundWindow(IntPtr hWnd);
}
'@ -ErrorAction Stop

#quickly start VPN
#This function is called later in the code
Function VPNConnect()
{
Start-Process -FilePath $vpncliAbsolutePath -ArgumentList "connect $CiscoVPNHost"
$counter = 0; $h = 0;
while($counter++ -lt 1000 -and $h -eq 0)
{
sleep -m 10
$h = (Get-Process vpncli).MainWindowHandle
}
#if it takes more than 10 seconds then display message
if($h -eq 0){echo "Could not start VPNUI it takes too long."}
else{[void] [Win]::SetForegroundWindow($h)}
}

#Terminate all vpnui processes.
Get-Process | ForEach-Object {if($_.ProcessName.ToLower() -eq "vpnui")
{$Id = $_.Id; Stop-Process $Id; echo "Process vpnui with id: $Id was stopped"}}
#Terminate all vpncli processes.
Get-Process | ForEach-Object {if($_.ProcessName.ToLower() -eq "vpncli")
{$Id = $_.Id; Stop-Process $Id; echo "Process vpncli with id: $Id was stopped"}}

#Disconnect from VPN
echo "Trying to terminate remaining vpn connections"
start-Process -FilePath $vpncliAbsolutePath -ArgumentList 'disconnect' -wait
#Connect to VPN
echo "Connecting to VPN address '$CiscoVPNHost' as user '$Login'."
VPNConnect

#Write login and password
[System.Windows.Forms.SendKeys]::SendWait("$Login{Enter}")
[System.Windows.Forms.SendKeys]::SendWait("$Password{Enter}")

#Start vpnui
start-Process -FilePath $vpnuiAbsolutePath
#Wait for keydown
#echo "Press any key to continue …"
#try{$x = $host.UI.RawUI.ReadKey("NoEcho,IncludeKeyDown")}catch{}
#Exit 
```

您现在需要做的就是在上面的脚本中设置您的 vpn 和用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T09:25:30.750

您需要指定使用哪种令牌。

我听说这里有很多选择：

*   硬件令牌
*   软件令牌应用程序（Mac OS、Windows、iOS、Android、Windows Mobile 等）
*   网络浏览器令牌

请查看此链接了解更多详情： [http ://www.emc.com/security/rsa-securid/rsa-securid-software-authenticators.htm#!offerings_for_web_browsers](http://www.emc.com/security/rsa-securid/rsa-securid-software-authenticators.htm#!offerings_for_web_browsers)

使用硬件令牌，您将需要使用某种相机并读取所拍摄图像的像素（我无法帮助您）

软件令牌更简单。

我最近创建了能够执行、输入 PIN 和读取令牌应用程序中生成的密码的小型命令行工具。我无法将工具（我公司的财产）发送给您，但我可以为您提供一些提示，以创建您自己的应用程序来执行相同的操作。

但首先你需要告诉我你是否使用软件令牌。

* * *

好的。由于您有软件令牌，我将描述我的应用程序如何自动连接到 VPN。

1）您需要在执行此操作之前配置您的软件令牌。
除此之外，还需要配置 VPN 客户端，并且连接必须列在可用连接列表中。
配置完成后，您可以进行自动 VPN 连接。
我们有类似于这个的软件令牌：
[https](https://ssl.seagate.com/ssl/docs/soft_token_install_instructions.html)
://ssl.seagate.com/ssl/docs/soft_token_install_instructions.html 我们的 VPN 客户端看起来像这样：
[http://wireless-setup.wsu.edu/msIPSEC。 html](http://wireless-setup.wsu.edu/msIPSEC.html)

2) 配置完所有工具后，您就可以开始 VPN 连接了。

你需要做好深入调查的准备。
来自 RSA 的人非常努力地工作，以使我们在这里所做的事情变得不可能。
他们不使用普通控件。他们创建了自己的控件，我没有规范。

我已经使用 C++ 和 WIN32 API 函数完成了它。这是我的食谱。

**a)**读取传递给程序的参数

**b)**验证参数我有多个参数，如 PIN、要建立的连接数、建立连接时运行的命令等。它们当然可以硬编码，但为了灵活，我可以从命令行传递它们。

**c)**检查令牌应用程序**[EnumWindows]**
令牌应用程序可以有 2 个顶级窗口 [您输入 PIN 的一个，一个带有密码的窗口]
如果我检测到两个窗口都打开了，我关闭应用程序并重新启动它。
您可以尝试发送消息**WM_CLOSE**以关闭应用程序。我模拟用户按下“X”关闭按钮的动作

```
//restore it <if minimized>
SendMessage(hwndTokenApplicationPinWindow,WM_SYSCOMMAND,SC_RESTORE,NULL);
//close the app
SendMessage(hwndTokenApplicationPinWindow,WM_LBUTTONDOWN,MK_LBUTTON,MAKELPARAM(223,14));
SendMessage(hwndTokenApplicationPinWindow, WM_LBUTTONUP,0,MAKELPARAM(223,14)); 
```

要启动它，我使用**CreateProcess**函数。
当您重新启动应用程序或只打开一个窗口时，您现在可以输入 PIN 码。

**d)**输入密码

我模拟用户左键单击 pin 窗口 WM_LBUTTONDOWN、WM_LBUTTONUP。
我使用 WM_CHAR 输入引脚。
输入后，使用 WM_LBUTTONDOWN、WM_LBUTTONUP 单击确定按钮。
完成后，您应该会显示密码窗口。

**e)**读取密码
要获取密码，我使用令牌中的复制按钮。此按钮 将数据复制到剪贴板。
我们模拟按下这个按钮： WM_LBUTTONDOWN, WM_LBUTTONUP
并从剪贴板读取数据：

```
BOOL InvalidData = FALSE;
OpenClipboard(NULL);
HANDLE clip0 = GetClipboardData(CF_UNICODETEXT);
wchar_t* p=(wchar_t*)GlobalLock(clip0);
if(wcslen(p) == MaxPasscodeSize-1)
    wcscpy_s(currentPasscode,MaxPasscodeSize,p);
else if(wcslen(p) != MaxPasscodeSize-1 && wcslen(p) != 0)
{
    wprintf(L"Error: Passcode in clipboard is invalid\n");
    InvalidData = TRUE;
}
GlobalUnlock(clip0);
CloseClipboard(); 
```

现在您已准备好在 CISCO VPN 客户端中使用的密码。
请让我知道这对您是否有意义。
如果是这样，并且您的应用程序在这一点上工作，请告诉我，我将通过说明来处理 VPN 客户端。

如果您需要上述步骤的更详细说明，请告诉我。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-23T04:15:35.833

一个想法是记录一堆时钟/令牌对并为您的程序运行时钟并重播记录。实际上，如果你可以选择煮钟，你真的只需要一对。

（我没有说这是一个*好*主意。）

祝你好运，/鲍勃·布莱恩

# javascript - 如何在 Eclipse 上正确运行 NodeJS 的 VJET 开发工具？

> ID：12072633
> 
> 赞同：12
> 
> 时间：2012-08-22T11:58:32.207
> 
> 标签：javascript, eclipse, node.js, object-literal, vjet

的默认`javascript`编辑器`Eclipse`非常差`outlining`，并且`code completion`. 因此，对于任何现代 javascript 应用程序，例如`ExtJS`或`NodeJS`需要编写大量对象文字语句的地方，Eclipse 变得毫无用处。并且[不可能问](https://stackoverflow.com/questions/11309953/eclipse-javascript-editor-2012-with-full-outliner-support)如何正确地做到这一点。

现在我发现[Ebay Open Source](https://www.ebayopensource.org/index.php/VJET/HomePage)似乎有专门设计用于替换标准编辑器中的这个缺陷的工具，无论是针对一般的 javascript 还是[针对 NodeJS 的](https://www.ebayopensource.org/index.php/VJET/NodeJS)。

`V8 debugger`在默认`WDT`安装上安装普通的 NodeJS`Eclipse` [非常简单](https://github.com/joyent/node/wiki/Using-Eclipse-as-Node-Applications-Debugger)，除了设置一些[脚本映射](http://code.google.com/p/chromedevtools/wiki/FeatureDebugOnRealFiles)之外，它很容易开始工作。

但是当我尝试安装时`VJET`，东西就是没有用。根本没有代码辅助，不再调试，什么都没有。VJET 模式被设置为调试和其他东西的默认模式，但是当我无法让它工作时，我也找不到任何切换回正常 Eclipse/JS 编辑器/V8 调试器的选项。即使我删除了所有 VJET 的东西，我的 Eclipse 安装也被炸毁了，彻底清除了工作区和家庭配置 + 下载终于解决了这个问题。

所以我希望有人能解释一下： **让 VJET 在 Eclipse 中为 Node.JS 开发工作的确切步骤是什么**，以及如何在“VJET”模式和“默认”模式之间切换？

# oracle - 按未按预期工作进行分组

> ID：12072642
> 
> 赞同：1
> 
> 时间：2012-08-22T11:58:59.177
> 
> 标签：oracle, oracle11g, plsqldeveloper

我遇到了 GROUP BY 子句的问题，并且数据没有像我想要的那样显示：

我有这样的数据：

```
-------------------------------------------------------------------
| Company   | Division | Business Area | Unit   | Name Full  | ID |
-------------------------------------------------------------------
| Company 1 | Div 1    | Business 1    | Unit 1 | Customer 1 | 01 |
| Company 1 | Div 1    | Business 1    | Unit 1 | Customer 2 | 02 |
| Company 1 | Div 1    | Business 1    | Unit 2 | Customer 3 | 03 |
| Company 1 | Div 1    | Business 3    | Unit 3 | Customer 2 | 02 |
| Company 1 | Div 2    | Business 1    | Unit 1 | Customer 4 | 04 |
....
.... 
```

在 UI 中，我希望它像这样显示：

```
Company 1, Div 1, Business 1, Unit 1
   -- Customer 1  01
   -- Customer 2  02
Company 1, Div 1, Business 1, Unit 2
   -- Customer 3 03
Company 1, Div 1, Business 3, Unit 3
   -- Customer 2 02
Company 1, Div 2, Business 1, Unit 1
   -- Customer 4 04 
```

我尝试了查询，如果我尝试仅使用 company、div、business 和 unit 进行分组，则会收到错误：00979：not a group by expression 因为我没有使用 SELECT 中使用的所有列，但后来我没有得到我要求的结果。

知道我该如何进行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:39:14.787

贾安娜，

您的示例数据集有 5 行，您的预期输出包含 9 行。这些额外的 4 行是每个 (company,division,business_area,unit) 的聚合，其中 name_full 和 id 正在汇总。

您的示例数据：

```
SQL> create table mytable (company,division,business_area,unit,name_full,id)
  2  as
  3  select 'Company 1', 'Div 1', 'Business 1', 'Unit 1', 'Customer 1', '01' from dual union all
  4  select 'Company 1', 'Div 1', 'Business 1', 'Unit 1', 'Customer 2', '02' from dual union all
  5  select 'Company 1', 'Div 1', 'Business 1', 'Unit 2', 'Customer 3', '03' from dual union all
  6  select 'Company 1', 'Div 1', 'Business 3', 'Unit 3', 'Customer 2', '02' from dual union all
  7  select 'Company 1', 'Div 2', 'Business 1', 'Unit 1', 'Customer 4', '04' from dual
  8  /

Table created. 
```

查询：

```
SQL> select company
  2       , division
  3       , business_area
  4       , unit
  5       , name_full
  6       , id
  7    from mytable
  8   group by company
  9       , division
 10       , business_area
 11       , unit
 12       , rollup((name_full,id))
 13   order by company
 14       , division
 15       , business_area
 16       , unit
 17       , grouping(name_full) desc
 18       , name_full
 19  /

COMPANY   DIVISION BUSINESS_AREA UNIT   NAME_FULL  ID
--------- -------- ------------- ------ ---------- --
Company 1 Div 1    Business 1    Unit 1
Company 1 Div 1    Business 1    Unit 1 Customer 1 01
Company 1 Div 1    Business 1    Unit 1 Customer 2 02
Company 1 Div 1    Business 1    Unit 2
Company 1 Div 1    Business 1    Unit 2 Customer 3 03
Company 1 Div 1    Business 3    Unit 3
Company 1 Div 1    Business 3    Unit 3 Customer 2 02
Company 1 Div 2    Business 1    Unit 1
Company 1 Div 2    Business 1    Unit 1 Customer 4 04

9 rows selected. 
```

您可能希望有条件地显示某些列值或不显示，但我将其作为练习留给您。

问候，
罗布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T12:08:00.457

使用“分组依据”查询无法实现您想要做的事情。相反，您可以使用“order by”，例如：

```
select * from table order by Company, Division, BusinessArea, Unit asc 
```

希望能帮助到你

编辑：对不起，我无法对弗洛林的回答发表评论。Florin 的回答也很棒，但例如在 Web UI 上进一步处理它会更困难。如果它是 plsql 并且输出应该与您在问题中所写的完全一致，您应该使用循环来获取每个 Company、Division、BusinessArea、Unit 组的名称和 ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T12:04:04.153

我不熟悉环境，但通常 GROUP BY 查询要求每列都是 GROUP BY 字段或聚合字段。

你想要达到的目标对我来说更像是一个 ORDER BY。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T12:13:15.767

```
select 
   company, 
   division, 
   businessarea, 
   unit, 
   LISTAGG(fullname||' '||id , '|') WITHIN GROUP (ORDER BY fullname)
from your_table
group by company, division, businessarea, unit
order by company, division, businessarea, unit 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T13:43:25.597

```
select * from 

(
select Company, Division, BusinessArea,  Unit ,NameFull,ID 
       from t
union all
select distinct  Company, Division, BusinessArea,  Unit ,'' as NameFull,0 as ID 
       from t
) d 

order by Company, Division, BusinessArea,  Unit ,NameFull,ID 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-23T13:57:44.370

如果您为公司/部门/业务领域/单位集中的每个成员添加计数，例如：

```
SELECT company,
    division,
    business_area,
    unit,
    name_full,
    ID,
    ROW_NUMBER () OVER (PARTITION BY company, division, business_area, unit 
    ORDER BY  company, division, business_area, unit, name_full) AS rn
FROM t1 
```

这应该返回：

```
------------------------------------------------------------------------ 
| Company   | Division | Business Area | Unit   | Name Full  | ID | rn |  
------------------------------------------------------------------------ 
| Company 1 | Div 1    | Business 1    | Unit 1 | Customer 1 |  01 |1  |
| Company 1 | Div 1    | Business 1    | Unit 1 | Customer 2 |  02 |2  |
| Company 1 | Div 1    | Business 1    | Unit 2 | Customer 3 |  03 |1  |
| Company 1 | Div 1    | Business 3    | Unit 3 | Customer 2 |  02 |1  |
| Company 1 | Div 2    | Business 1    | Unit 1 | Customer 4 |  04 |1  | 
```

然后在您的用户界面中，您可以遍历结果并显示每条具有 rn = 1 作为标题的记录，然后显示全名和 ID，这是一些伪代码

```
for each record loop
 if rn=1 
   display t1.division, t1.business_area
 end if
 display t1.name_full,id
end loop 
```

# reporting-services - 如何根据以下数据结果在 SSRS 2008 中创建堆积柱形图

> ID：12072649
> 
> 赞同：1
> 
> 时间：2012-08-22T11:59:08.630
> 
> 标签：reporting-services, charts, ssrs-2008, stacked-area-chart

我面临的问题是我无法像客户想要的那样获得图表。
该图表必须如下所示：

![在此处输入图像描述](../Images/88dbad914b61f974878d93b7ef9f78ef.png)
一列始终为 100% - 100% 是合格零件值加上不合格零件值的结果。蓝色区域以百分比显示合格零件的数量，不同集合的区域以百分比显示不合格零件的数量。故障部件区域的每个集合代表不同的错误代码。

目前，我开发了一个返回以下数据的 sql 语句，
![在此处输入图像描述](../Images/dfff64db68eb77246e63194dd7cde69c.png)
我通过计算“Good Parts”/（除）“Started Parts”获得了良好部件的百分比数量。不合格零件的面积是“不合格零件%”栏的总和。所以两个结果的总和是~100%

正如您在数据结果中看到的，一个订单（在本例中为 80383805）有四个错误代码（0520、0800、0910、0915）。我现在需要的是显示每个错误代码堆积在图表中的好零件数量上。到目前为止，我没有找到解决方法。到目前为止，我创建的唯一一件事就是播种两个堆叠的区域，一个是好的部分，一个是失败的部分。下一步是将故障部分的区域拆分为每个错误代码。有人知道谁来完成这件事吗？谢谢！

* * *

谢谢帮助，但现在我遇到了另一个问题。
排序似乎无法正常工作 - 请参见下图：
![在此处输入图像描述](../Images/88dbad914b61f974878d93b7ef9f78ef.png)
正如您应该看到的错误代码的排序似乎不起作用。例如左起第二列。红色和灰色区域应该在橙色区域之前，而不是相反。sql 语句返回正确的排序：
![在此处输入图像描述](../Images/dfff64db68eb77246e63194dd7cde69c.png)

![在此处输入图像描述](../Images/224520e0feccca11a7a9be27456b083a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T17:00:46.603

创建一个返回以下内容的查询：

```
Order             ErrorCode           NumberOfParts
AAAA              04858               10
AAAA              03423               25
AAAA              01234               4
AAAA              00000               100
BBBB              04858               11
BBBB              03333               22
BBBB              00000               140
CCCC              04858               28
CCCC              00000               75 
```

错误代码“00000”的意思是`NoError`。

然后在 SSRS 上，创建一个**100% 堆积柱形图**，并将**ErrorCode**列放在 Series Groups 上，将**Order**列放在 Category Groups 上，将**NumberOfParts**放在 Values 上。

# iphone - 如何允许 uitextview 只接受退格键和删除键

> ID：12072650
> 
> 赞同：1
> 
> 时间：2012-08-22T11:59:13.610
> 
> 标签：iphone, ios5, ios4, ios-simulator

我希望 UItextView 在 TextView.contentSize.height 超过一定限制后不再接受任何字符。但可以删除内容。如何实现这一点。有什么建议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:15:56.743

使用文本字段和文本视图的委托和数据源。

下面是文本字段委托方法的示例

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{ if (textField == self.txtContact) {
            if ([DebugLog isEqualToString:@"1"]) {
                NSLog(@"%@",textField.text);
            }
            char *x = (char*)[string UTF8String];
            if([string isEqualToString:@"-"] || [string isEqualToString:@"("] || [string isEqualToString:@")"] || [string isEqualToString:@"0"] || [string isEqualToString:@"1"] ||  [string isEqualToString:@"2"] ||  [string isEqualToString:@"3"] ||  [string isEqualToString:@"4"] ||  [string isEqualToString:@"5"] ||  [string isEqualToString:@"6"] ||  [string isEqualToString:@"7"] ||  [string isEqualToString:@"8"] ||  [string isEqualToString:@"9"] || x[0]==0 || [string isEqualToString:@" "]) {
                    if ([DebugLog isEqualToString:@"1"]) {
                        NSLog(@"%d",[string length]);
                    }
                NSUInteger newLength = [textField.text length] + [string length];
                if (!CheckDigit) {
                    if ([textField.text length] == 4) {
                        textField.text =[NSString stringWithFormat:@"%@-",textField.text];
                        CheckDigit=TRUE;
                    }

                }
                if (!CheckDigit1) {
                    if ([textField.text length] == 9) {
                        textField.text =[NSString stringWithFormat:@"%@-",textField.text];
                        CheckDigit1=TRUE;
                    }

                }
                if ([textField.text length]<=4 ) {
                    CheckDigit=FALSE;
                }
                if ([textField.text length]<=9 && [textField.text length]>=4 ) {
                    CheckDigit1=FALSE;
                }

                return (newLength >  11) ? NO : YES;

            } else {
                return NO;
            }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:16:05.193

看看[UITextFieldDelegate](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)协议。
`- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string`是你的朋友。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:18:36.527

用户关注委托方法以避免用户输入任何内容

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
  {

   return 0;/// Dont allow user to type

return 1; ///Allow user to type

  } 
```

# php - 获取元标记数组 php

> ID：12072665
> 
> 赞同：1
> 
> 时间：2012-08-22T12:00:11.440
> 
> 标签：php, html, arrays, meta-tags

如何从`<meta>`命名的“标签”中获取所有值并在页面上回显它们？

这是使用的 HTML 即时消息：

```
<meta name="tag" content="plant"/>
<meta name="tag" content="leaf"/>
<meta name="tag" content="waterdroplet"/>
<meta name="tag" content="water"/> 
```

我正在使用的 PHP：

```
$tags = array (get_meta_tags ( "http://s0ulp1xel.x10.mx/background-garage/?p=photo&photo=1"));
echo $tags; 
```

结果是它只回显最后一个`<meta>`命名的“标签”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:04:20.110

`get_meta_tags`返回一个数组，用于`print_r()`查看它的结构，然后循环遍历它们以根据需要打印它们：

```
foreach($tags as $tag){
  echo $tag."\n";
} 
```

编辑：而且你不需要将结果粘贴`get_meta_tags`在另一个数组中，那么你就会无缘无故地多出一个。

```
explode(',',$meta['tags']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:28:28.433

如果您现在的问题是**如何将逗号分隔值作为不同的标签？**，你可以这样做：

```
<meta name="tag" content="plant, leaf, waterdroplet, water" />

$tags = get_meta_tags('yourfile.html');
$tags = array_map('trim', explode(',', $tags['tag'])); 
```

这会将单词分解为一个数组，并删除任何空格，然后您可以循环输出/其他任何内容：

**例子**

```
foreach($tags as $k => $v) {
  echo $k . ': ' . $v . '<br />' . "\n";
} 
```

会输出：

```
0: plant
1: leaf
2: waterdroplet
3: water 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:06:44.943

您在设置标签时犯了一个错误

```
<meta name="tag" content="xx" />
<meta name="tag" content="yz" /> 
```

当您执行`get_meta_tags()`它时，它只会显示**最后一个**值（在这种情况下`yz`：）

所以你需要在标签上放不同的名字

例如

```
<meta name="tag1" content="yz" />
<meta name="tag2" content="yz" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:02:55.223

您正确获取标签，但未正确显示它们。

您不能`echo`在数组上使用。

您可以使用[var_dump](http://php.net/manual/en/function.var-dump.php)查看您拥有的整个数组 - 它应该向您展示如何在代码中访问它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T12:08:03.120

名称必须是唯一的。[请参阅此功能的文档](http://php.net/manual/en/function.get-meta-tags.php)：

```
 If two meta tags have the same name, only the last one is returned. 
```

因此，您只能使用 name="tag" 的元标记，因此最好尝试使用逗号分隔的值。

# android - 带有 ListView 的自定义复选框

> ID：12072667
> 
> 赞同：1
> 
> 时间：2012-08-22T12:00:16.487
> 
> 标签：android, listview, checkbox

我已经使用列表视图实现了自定义复选框。我现在正在获取列表我想要在获取位置的帮助下检查的包名称列表。如何获取位置有什么方法可以做到这一点。

```
class Custom_List extends BaseAdapter {

                Activity activity = null;
                List<String>  app_name = null;
                List<String>  app_usage = null;
                List<String>  app_last_updated = null;
                List<String>  app_cpu_usage = null;
                List<String>  app_package = null;

                public Custom_List(Activity this_activity, List<String> app_name2, List<String> app_usage, List<String> app_last_modi_data, List<String> app_CPU_Usage,List<String> app_package) {
                    // TODO Auto-generated constructor stub

                    activity = this_activity;
                    this.app_name = app_name2;
                    this.app_usage = app_usage;
                    this.app_last_updated = app_last_modi_data;
                    this.app_cpu_usage = app_CPU_Usage;
                    this.app_package=app_package;
                }

                public int getCount() {
                    // TODO Auto-generated method stub
                    return app_name.size();
                }

                public Object getItem(int position) {
                    // TODO Auto-generated method stub
                    return position;
                }

                public long getItemId(int position) {
                    // TODO Auto-generated method stub
                    return position;
                }

                public  class ViewHolder {

                    public TextView textheader = null;
                    public TextView textcpu = null;
                    public TextView text_modified_date = null;
                    public TextView text_cpu = null;
                    public TextView text_checkbox = null;
                }

                ViewHolder holder = null;

                public View getView(int position, View convertView, ViewGroup parent) {
                    // TODO Auto-generated method stub

                    View vi = convertView;

                    if (convertView == null) { // if it's not recycled, initialize some
                        // attributes
                        LayoutInflater  inflater = (LayoutInflater) activity
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                        vi = inflater.inflate(R.layout.grid_item, null);
                        holder = new ViewHolder();

                        holder.textheader = (TextView) vi.findViewById(R.id.item1);
                        holder.textcpu = (TextView) vi.findViewById(R.id.item2);
                        holder.text_modified_date = (TextView) vi.findViewById(R.id.item4);
                        holder.text_cpu = (TextView) vi.findViewById(R.id.item3);
                        holder.text_checkbox=(CheckBox)vi.findViewById(R.id.checkBox1);
                        vi.setTag(holder);

                    } else {
                        holder = (ViewHolder) vi.getTag();

                    }

                    holder.text_checkbox.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View v) {

                            Toast.makeText(getApplicationContext(), "coming here", Toast.LENGTH_LONG).show();

                            String packag=app_package.toString();
                            Log.d("package listttttttttt", packag);
                            addListenerOnButton() ;

                        }
                    });

                    holder.textheader.setText(Html.fromHtml(app_name.get(position)).toString());

                    int usage=Integer.parseInt(app_usage.get(position).toString().trim())/10000;

                    holder.textcpu.setText("Mem: "+String.valueOf(usage)+" M");

        //          System.out.println("      app_last_updated       "+app_last_updated.get(position).toString().trim());

                    holder.text_modified_date.setText("Last Updated Date: "+app_last_updated.get(position).toString().trim());
                    holder.text_cpu.setText("CPU: "+app_cpu_usage.get(position).toString().trim()+" %");
                    return vi;
                }

            }   
            private void addListenerOnButton() {
                Clear = (Button) findViewById(R.id.button1);
                Clear.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        Toast.makeText(getApplicationContext(), "coming in button", Toast.LENGTH_LONG).show();

                    }
                });

            }
        } 
```

# jquery - 让 KnockOutJS 根据我的 JSON 数据显示下拉菜单

> ID：12072670
> 
> 赞同：0
> 
> 时间：2012-08-22T12:00:32.300
> 
> 标签：jquery, knockout.js

任何人都可以请帮忙，或者给我一个关于如何继续前进的提示。

我正在尝试与 KnockoutJS 一起制作一个示例应用程序（我正在学习 MVC 并尝试学习 jQuery/Knockout）。

该示例基于 Knockout 培训文档中的购物车示例 - 我的副本/版本在这里：

[JsFiddle示例](http://jsfiddle.net/marktait/3t6hP/3/)

JSON相当简单：

```
[{
    "occ": [
    {
        "name": "1 Room only",
        "price": 53.9},
    {
        "name": "1 B&B",
        "price": 62.16}, ],

    "TypeName": "Single",
    "TypeID": "3121",
    "TypeCount": "2"
    },
{
    "occ": [
    {
        "name": "2 B&B",
        "price": 24.23},
    {
        "name": "2 DBB",
        "price": 32.95}],

    "TypeName": "Double",
    "TypeID": "4056",
    "TypeCount": "2"
    }...... 
```

所以第一个下拉菜单链接到“TypeName”和“TypeID”。

当从中进行选择时，Occ（第二个下拉菜单）显示该房间可用的报价（例如 2 DBB @ 32.95）。

目前有一个文本框，您可以在其中输入您想要的数量 - 但是，我希望它被限制为一个数字，最多为 JSON 中的“TypeCount” - 或者更好的是，有另一个下拉列表，其数量最多为“TypeCount”。

如果可能的话，我还想限制单击“添加房间”并添加另一行时显示的内容 - 所以我不想在上面的下拉列表中看到任何已在上面的行中选择的房间类型下一行。

感谢您的任何指点，

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:18:22.253

Knockout 包含一个名为的实用程序`ko.utils.range`，您可以为其指定起始值和结束值。您可以使用它来创建从 1 到您的`TypeCount`.

有几种写法，这里举一个例子：

```
<td class='quantity' data-bind="with: category">
    <select data-bind="visible: $parent.product, options: ko.utils.range(1, TypeCount), value: $parent.quantity"></select>
</td> 
```

更新小提琴：http: [//jsfiddle.net/rniemeyer/3t6hP/4/](http://jsfiddle.net/rniemeyer/3t6hP/4/)

# spring - 弹簧工厂模式

> ID：12072672
> 
> 赞同：0
> 
> 时间：2012-08-22T12:00:37.533
> 
> 标签：spring

工厂模式用于创建对象运行时，它通过将对象创建放在一个地方来提供松散耦合。Spring 是否应用相同的模式，因为在 Spring 中我们对接口进行编码并将对象创建保存在 xml 配置文件中？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T20:22:43.653

是的，Spring 通过使用`FactoryBean`接口允许它。有关更多信息，请点击以下链接：

*   [什么是 FactoryBean？](http://spring.io/blog/2011/08/09/what-s-a-factorybean)
*   [超越 FactoryBean](http://spring.io/blog/2011/08/10/beyond-the-factorybean/)
*   [Spring Framework-介绍Bean和Bean的生命（BeanFactory）](http://navin-bansal.blogspot.nl/2012/05/spring-framework-introducing-bean-and.html)

# iphone - 在 iPhone 的不同 C 函数中访问相同的对象？

> ID：12072674
> 
> 赞同：4
> 
> 时间：2012-08-22T12:00:49.737
> 
> 标签：iphone, objective-c, ios5

我必须将方法编写为 C 函数以便每次都访问该对象，我想在函数内声明该对象并分配它。如何在所有 C 函数中维护一个公共对象。是否可以？

```
void method1
{
    NSMutableArray *sample = [[NSMutableArray alloc]init];
}

void method2
{
    NSMutableArray *sample = [[NSMutableArray alloc]init];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:08:07.410

我相信这应该可行（尽管这*绝对*不是线程安全的）：

```
NSMutableArray *sample = nil;

void method1 {
    if (sample == nil) {
        setupSample();
    }
    // ...
}

void method2 {
    if (sample == nil) {
        setupSample();
    }
    // ...
}

void setupSample {
    sample = [[NSMutableArray alloc] init];
    // Any other setup here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T12:22:55.643

```
 static NSMutableArray *sampleArray=nil;
 @implementation class
 void method1(void){
    if (sampleArray ==  nil){
       sampleArray = [[NSMutableArray alloc]init];
     }
  }                     
  void method2(void){
    if (sampleArray ==  nil){
       sampleArray = [[NSMutableArray alloc]init];
     }
} 
```

请使用这个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T12:18:46.307

您可能希望使用类方法来访问共享对象。

就像是...

```
void method {
NSMutableArray *mySharedObj = [SampleRelatedContextClass sample];
} 
```

这看起来更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:10:56.990

创建静态文件范围的变量。

```
static NSMutableArray *sample=nil;

@implementation class

void method1(){ //you can write c functions outside  @implementation also
if (sample==nil) {
        sample = [[NSMutableArray alloc]init];
    }   

}

void method2(){
if (sample==nil) {
    sample = [[NSMutableArray alloc]init];
}
}
@end 
```

**注意：**您不能在 c 函数中使用objective-c 实例变量

# dynamics-crm - 在哪里可以找到在 crm 2011 数据库的表中创建的活动

> ID：12072677
> 
> 赞同：1
> 
> 时间：2012-08-22T12:00:53.577
> 
> 标签：dynamics-crm, dynamics-crm-2011, crm

我想知道，创建的服务活动将存储在 crm 2011 数据库中的哪个表中。我正在尝试生成一个报告，我需要知道创建的所有服务活动将存储在哪个表中。当我打开 ServiceAppointmentBase 时，它​​只显示 ActivityId 列，这也是空的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T12:35:05.230

Crm 跨多个表存储数据。

您应该针对 FilteredViews 编写报告。例如 FilteredServiceAppointment 或 FilteredAccount。

这些视图结合了各种表，还应用了 Crm 的权限模型。

查看[MSDN](http://msdn.microsoft.com/en-us/library/gg328467)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T13:57:35.910

包括 在内的所有`Activity`s都存储在数据库`ServiceAppointments`中调用的单个表中。`ActivityPointerBase`

除了引用这个表的`FilteredServiceAppointment`视图`ActivityPointer`（`FilteredActivityPointer`值得注意的是，Linq 实体集合`ActivityPointerSet`在访问时指向过滤后的视图。

每种不同类型的`Activity`由`ActivityTypeCode`/`ActivityTypeCodeName`字段标识，这是您如何知道特定活动是否为`ServiceAppointment`.

至于关于操纵基表的警告，我认为您是成年人，所以对他们做任何您想做的事，但您确实需要过滤视图来报告。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T12:33:55.893

您不应该针对基表编写报告，而是使用视图。在这种情况下，您正在寻找的视图是`dbo.FilteredServiceAppointment`

更多信息在这里：http: [//msdn.microsoft.com/en-us/library/gg328467.aspx](http://msdn.microsoft.com/en-us/library/gg328467.aspx)

# delphi - 是否可以读取未嵌入应用程序的外部资源文件？

> ID：12072682
> 
> 赞同：4
> 
> 时间：2012-08-22T12:01:14.637
> 
> 标签：delphi, delphi-7, embedded-resource

是否可以读取未嵌入应用程序的外部资源文件？

我正在使用德尔福 7。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T15:10:03.373

要直接读取[res 文件](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648007%28v=vs.85%29.aspx)，您必须解析 [RESOURCEHEADER 结构](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648027%28v=vs.85%29.aspx)，然后根据文件的类型读取文件中的每个资源。如果您想避免自己编写此类代码，则可以使用[`Delphi Resource Utilities`](http://www.wilsonc.demon.co.uk/d7resourceutils.htm)Colin Wilson（该[`XN Resource Editor`](http://www.wilsonc.demon.co.uk/d10resourceeditor.htm)工具的作者）提供的。

# javascript - 试图将 bootstrap-datepicker 放在我的 rails 项目中

> ID：12072689
> 
> 赞同：1
> 
> 时间：2012-08-22T12:01:51.453
> 
> 标签：javascript, ruby-on-rails, twitter-bootstrap

[http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/) 我正在尝试将 datepicker 放入我的 rails 项目中。这里没有弹出日期。我按照说明使用 javascripts n all，但它没有弹出日期选择器。

它适用于我的 application.js 文件

```
//= require bootstrap-datepicker
    $('#dp5').datepicker() 
```

对于我的视图文件

```
<div class="well">
<div id="dp5" class="input-append date" data-date-format="dd-mm-yyyy" data-date="12-02-2012">
<input class="span2" type="dp5" readonly="" value="12-02-2012" size="16">
<span class="add-on">
<i class="icon-th"></i>
</span>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:08:48.103

添加 application.js

```
//= require_self 
```

并`$('#dp5').datepicker()`在加载 dom 时添加

```
$(function() {
   $('#dp5').datepicker()
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T13:11:45.293

`type`当应该在类或 id 上调用日期选择器时，您正试图在HTML 元素上调用它。尝试改变：

```
<input class="span2" type="dp5" readonly="" value="12-02-2012" size="16"> 
```

至：

```
<input class="span2" id="dp5" readonly="" value="12-02-2012" size="16"> 
```

它应该工作。

# jquery - jQuery 动画 - 内容卡在 IE 7、8、9 中

> ID：12072690
> 
> 赞同：1
> 
> 时间：2012-08-22T12:01:52.533
> 
> 标签：jquery, jquery-ui, internet-explorer, menu

我正在使用 jQuery 和 jQuery-UI 为我正在处理的项目制作导航菜单，并且在 Internet Explorer 中的 jQuery 动画存在一个奇怪的问题。代码找到一个按特定顺序嵌套的标签（li ul li a OR li ul li h3）并向标签添加一个类，该类用于切换内容的可见性。我正在使用的 jQuery 代码可以在这里看到：

```
(function ($) {
$.fn.menuLocator = function (options1) {
    var defaults = {

    };

    var options = $.extend(defaults, options1);

    return this.each(function () {
        var menu = this;
        var basePath = window.location.href.split(window.location.host)[1];
        var paths = basePath.split('.html').join('').split('/');
        for (var i = 1; i != paths.length; i++) {
            $(menu).find('a[href$="' + paths[i] + '"]').addClass('active').addClass('level_' + i).parent().find('ul:first').addClass('active');
            $('a.active').find('.has_children:first').addClass('open');
        }
        $(menu).find('li ul').parent().find('a:first').append('<span class="has_children"><span class="icon"></span></span>');

for (var i = 1; i != paths.length; i++) {
            $(menu).find('a[href$="' + paths[i] + '"]').addClass('active').addClass('level_' + i).parent().find('li h3').addClass('active');
            $('h3.active').find('.has_children').addClass('open');
        }

        $(menu).find('li ul').parent().find('h3').append('<span class="has_children"><span class="icon"></span></span>');

        $(menu).find('.has_children').toggle(

        function () {
            var is_old_ie = false;
            var speed = 200;

            if($.browser.msie){
                is_old_ie = true;
            }

            if(is_old_ie){
                speed = 1;
            }

            $(this).parent().parent().addClass('active');
            $(this).parent().next('ul').slideToggle(speed);
            $(this).toggleClass('open');
        },

        function () {
            var is_old_ie = false;
            var speed = 200;

            if($.browser.msie){
                is_old_ie = true;
            }

            if(is_old_ie){
                speed = 1;
            }

            $(this).prevAll(":has(.active):first").removeClass('active');
            $(this).parent().next('ul').slideToggle(speed);
            $(this).toggleClass('open');
        });
    });
};
}(jQuery)); 
```

在 Chrome、Firefox、Safari 和 Opera 中，一切正常。但在 IE (7, 8, 9) 中，我得到以下错误：

导航最初显示良好：

![初始导航](../Images/812a2889ddf7b6e2e2c48629a03edb15.png)

当用户单击图标时，每个部分都会展开以显示子导航：

![开场部分](../Images/251f19ac2ad51122a4515070549edc15.png) ![打开另一个部分](../Images/03d700d79ef50bfe35b4395c76331a33.png)

但是，当您关闭打开部分正上方的部分时，内容不会向上移动以匹配菜单。

![内容转变](../Images/460ada1a2e3eae7ddc190d3926319598.png)

如果您打开和关闭上面的部分，它将继续向下推送内容，但不会向上推送。

![继续推](../Images/d71c1fd1584fb095c4e656a40e3385d8.png)

关闭并重新打开子菜单会导致内容重置。在子菜单中打开项目会导致内容按预期上下移动。

菜单是使用以下 HTML 创建的：

```
<!-- Left zone -->
<div class = "zoneLeft" style = "float: left;" >
<div class = "leftColumn" >

<ul class = "menu" >
    <li>
        <a> In This Section < /a>
        <ul id="menuElem">
            <li><a href="/Legal / Sunshine - Laws / Open - Government / Your - Rights - to - an - Open - and - Accountable - Government " >Your Rights to an Open and Accountable Government</a></li>
        </ul>
    </li>
    <li>
        <a>Related</a>
        <ul>
            <li><a href=" / About - AG / Contact ">Contact</a></li><li><a href=" / Legal / Sunshine - Laws / Sign - Up - For - Updates - to - ohio - s - Sunshine - Laws ">Sign Up For Updates to Ohio&#39;s Sunshine Laws</a></li>
            <li><a href=" / FAQ / Sunshine - laws - FAQs ">Sunshine Laws FAQs</a></li><li><a href=" / Legal / Sunshine - Laws / Sunshine - Laws - Publication - Request - Form ">Sunshine Laws Publication Request Form</a></li>
            <li><a href=" / Legal / Sunshine - Laws / Sunshine - Law - Training ">Sunshine Laws Training</a></li>
        </ul>
    </li>
    <li>
        <a>Publications</a>
        <ul id="p_lt_zoneContent_pageplaceholder1_pageplaceholder1_lt_zoneLeft_TagDisplayPublications_BListTagged " class="subCMSListMenuUL ">
            <li><a href=" / Files / Publications / Publications -for -Legal / Sunshine - Laws / 2012 - Sunshine - Laws - Manual.aspx ">2012 Sunshine Laws Manual</a></li>
            <li><a href=" / Files / Publications / Publications - for -Legal / Sunshine - Laws / Appendix - A - % e2 % 80 % 93 - Statutes - Public - Records, - Open - Meeting.aspx ">Appendix A – Statutes: Public Records, Open Meetings &amp; Personal Information Systems Act</a></li>
            <li><a href=" / Files / Publications / Publications - for -Legal / Sunshine - Laws / Appendix - B - % e2 % 80 % 93 - Statutory - Excepting - Records - from - the.aspx">Appendix B – Statutory Excepting Records from the Ohio Public Records Act or Declaring Records</a></li>
            <li><a href=" / Files / Publications / Publications - for -Legal / Sunshine - Laws / Appendix - C - % e2 % 80 % 93 - Ohio - Attorney - General - Opinions - Interp.aspx ">Appendix C – Ohio Attorney General Opinions Interpreting Ohio’s Public Records Act</a></li>
            <li><a href=" / Files / Publications / Publications - for -Legal / Sunshine - Laws / Appendix - D - % e2 % 80 % 93 - Ohio - Attorney - General - Opinions - Interp.aspx ">Appendix D – Ohio Attorney General Opinions Interpreting Ohio’s Open Meetings Act</a></li>
            <li><a href=" / Files / Publications / Publications - for -Legal / Sunshine - Laws / Model - Public - Records - Policy.aspx ">Model Public Records Policy</a></li>
        </ul>
    </li>
</ul>
</div>
</div> 
```

任何想法表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:23:34.610

在我发布我对这个问题的解决方案之前，让我先说我知道这是修复这个错误的一种糟糕的方法。该问题仅出现在几页上，我们已决定在后期制作中修复它。希望这不会是最终的解决方案。

话虽如此，我通过在面板关闭时触发点击事件来修复动画问题。由于面板中的内容在关闭和重新打开时会重置，因此我使用以下代码在活动部分之后的每个部分上触发两个点击事件（关闭/重新打开）。在 IE 中，动画持续时间无论如何都设置为 0 毫秒，因此此内容重置对用户不可见。此外，性能损失很小，因为如果面板打开，则内容已经被渲染并且不需要重新加载。

```
$(menu).find('.has_children').toggle(

        function() {
            var speed = 200;

            if ($.browser.msie) {
                speed = 0;
            }

            $(this).parent().parent().addClass('active');
            $(this).parent().next('ul').slideToggle(speed);
            $(this).toggleClass('open');
        },

        function() {
            var speed = 200;

            if ($.browser.msie) {
                speed = 0;
            }

            $(this).parent().parent().removeClass('active');
            $(this).parent().next('ul').slideToggle(speed);
            $(this).toggleClass('open');

            /* IE7 Nav Push Bug Fix */
            if ( $.browser.msie && $.browser.version.slice(0,1) == "7" ) {
                $(this).parent().parent().nextAll().children('a').children().children().trigger('click');
                $(this).parent().parent().nextAll().children('a').children().children().trigger('click');
            }
            /* End */
        }); 
```

# silverlight - Silverlight 5 的功能不在 WinRT 中

> ID：12072693
> 
> 赞同：0
> 
> 时间：2012-08-22T12:01:57.797
> 
> 标签：silverlight, windows-runtime

我知道 WinRT 的一个子集是修改后的 Silverlight 5，如[本答案](https://stackoverflow.com/a/9935294/870815)中所述。作为了解 Silverlight API 的人，了解实际缺少哪些 SL 功能将非常有用。我知道[WinRT Genome Project](http://programmerpayback.com/2011/11/18/winrt-genome-project-details/)，它告诉我它会很小——但不是它实际上是什么。遍历差异列表是乏味的，并且可能会产生误导，因为某些成员或类可能只是被重命名。

有人知道 WinRT 中缺少的 SL 功能的简明列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:34:58.027

查看[http://xamldialects.codeplex.com](http://xamldialects.codeplex.com)。该工具将允许您实际探索任何 XAML 方言（WPF、SL、Windows Phone 和 WinRT）之间的差异和相似之处。

# svn - 用于将更改的文件部署到生产 Web 服务器的工具

> ID：12072695
> 
> 赞同：2
> 
> 时间：2012-08-22T12:02:17.453
> 
> 标签：svn, deployment

我的系统基于 LAMP 堆栈。我有 2 个同步的应用程序服务器。将更改的文件部署到我的两个生产服务器的最佳方法是什么。

目前的情况是：

*   有时我使用我的登台服务器，有时如果不需要，我直接将文件从开发服务器复制到生产服务器。
*   我可能会直接将一些问题热修复到我的生产服务器。
*   我们将 svn 用于开发服务器和测试服务器，但出于安全考虑，它不用于生产服务器。我什至不确定开发人员的承诺。
*   每次我必须查看文件之间的差异，然后将更改复制到我的生产服务器。有时，我必须合并文件。

我可以有一些工具可以通知我生产服务器中的给定文件发生更改，然后相应地合并/复制冲突并以优化的方式安全地部署所有更改的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:33:59.517

我可能会首先在本地存储部署服务器上的目录镜像，以便对其进行版本控制。使用像[rsync](http://rsync.samba.org/)这样的镜像工具可以确保你在两个地方都有相同的文件。

然后，您也可以将部署服务器上的确切内容添加到 subversion 中。如果它们不适合开发/测试版本，您可以为部署版本创建一个分支，您可以在其中从主分支进行定期合并。

通过这种方式检查修改变成了使用您最喜欢的 svn 工具在部署镜像上执行“svn 状态”或“检查修改”，然后您可以轻松地检查更改。

需要回放到开发/测试阶段的东西显然需要从部署分支合并回主分支。

# c# - 如何读取 XML 数据

> ID：12072697
> 
> 赞同：0
> 
> 时间：2012-08-22T12:02:19.303
> 
> 标签：c#, xml-parsing

我有试图用代码读取的 XML 字符串

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.LoadXml(XMLString);
XmlNode node = xmlDoc.SelectSingleNode("//cart/cart-item/url/text()");
Console.WriteLine(node.Value); 
```

但`node`始终为空。谁能解释什么是错的？

```
<order xmlns="http://ws.plimus.com">
<order-id>8301446</order-id>
<ordering-shopper>
<shopper-id>25879327</shopper-id>
</ordering-shopper>
<cart>
<charged-currency>USD</charged-currency>
<cart-item>
<sku>...</sku>
<quantity>1</quantity>
<url>
https://ws.plimus.com:443/services/2/subscriptions/9433117
</url>
<item-sub-total>9.00</item-sub-total>
</cart-item>
<tax>0.00</tax>
<tax-rate>0</tax-rate>
<total-cart-cost>9.00</total-cart-cost>
</cart>
</order> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T12:17:19.063

默认情况下，XPath 将无前缀名称视为“无命名空间”。您应该使用`XmlNamespaceManager`来解析 xmlns

```
XmlDocument xmlDoc = new XmlDocument();
XmlNamespaceManager nm = new XmlNamespaceManager(xmlDoc.NameTable);

nm.AddNamespace("ns", "http://ws.plimus.com");
xmlDoc.LoadXml(xmlString);
XmlNode node = xmlDoc.SelectSingleNode("//ns:cart/ns:cart-item/ns:url/text()", nm);

Console.WriteLine(node.Value); 
```

编辑：如果您有可能将 xml 根元素更改为

`<order xmlns:ns="http://ws.plimus.com">`

那么您不需要每次都在 XPath 中指定“ns”，它看起来像`//cart/cart-item/url/text()`.

`XmlNamespaceManager`无论如何都需要示例中所示的配置

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T12:09:06.163

当您在 xpath 中指定 // 时，它确定从根元素开始，因此您的 xpath 应该是：

`XmlNode node = xmlDoc.SelectSingleNode("//order/cart/cart-item/url/text()");`

# asp.net-mvc-3 - net tcp 绑定服务中的端口共享

> ID：12072700
> 
> 赞同：0
> 
> 时间：2012-08-22T12:02:38.967
> 
> 标签：asp.net-mvc-3, wcf, wcf-binding, wcf-client, nettcpbinding

我有一个使用 nettcp 绑定服务的站点，该服务在端口号 808 处打开。

现在我又创建了一个仅在端口号 808 上使用 nettcp 绑定的网站。

```
<endpoint address="net.tcp://ded3.demo.com:808/FileTransfer.svc">
<servicePrincipalName value="host/M04.ROUP.local" /> 
```

但问题是每当我从客户端运行时，都会调用第一个服务。

请让我知道如何提供正确的端点地址来调用相应的服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:10:45.387

要处理此问题，您需要打开 NetTCP 端口共享。打开 services.msc，然后找到 Net.TCP 端口共享服务，启用它，然后打开它。这应该允许您的 IIS 托管的 tcp 服务共享相同的端口。

编辑：鉴于您已经在运行 Net TCP PortSharing，您可能会遇到 IIS 的限制。您需要在同一个站点下设置这两个服务（但单独的应用程序），或者使用不同的端口。看看这个问题以获取更多信息：

[IIS 7 / WAS 上的 WCF net.tcp 端口共享](https://stackoverflow.com/q/8531800/941243)

# php - 支付宝付款后显示信息

> ID：12072701
> 
> 赞同：-1
> 
> 时间：2012-08-22T12:02:41.360
> 
> 标签：php, javascript, html, paypal

`$mymessage`成功支付宝付款后，我想在 php ( ) 中显示一条消息。

例如：

1.  一位客户想在 www.mysite.com/product 上购买我的产品，那里有一个“使用贝宝付款”按钮。
2.  客户在贝宝的网站上付款。
3.  客户端被重定向到 www.mysite.com/product，出现新消息 ( `$mymessage`)。

我知道如果付款完成并自动刷新显示消息的页面，可以使用 javascript 检查。

有人可以给我指路吗？（链接、想法或脚本）

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:12:08.643

您可以使用 php 变量：

```
$_SERVER['HTTP_REFERER'] 
```

但是您不应该输入消息敏感信息，因为可以修改标头。

看到：[$_SERVER['HTTP_REFERER'] 安全吗？](https://stackoverflow.com/questions/5934747/is-serverhttp-referer-safe)

顺便说一句，贝宝让你一个自定义网址（我认为）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:12:59.487

您可以通过在 paypal 中返回 url 来做到这一点。在返回 url 页面中，您必须检查付款状态。如果成功意味着您可以将消息存储在会话中并将其显示给用户。显示消息后，取消设置用于消息的会话变量。这是显示消息的简单方法。

我不知道你在尝试什么？我提到你的问题的最短方法

检查返回 url 中状态的示例代码

```
$address_url= (!empty($_SERVER['HTTPS'])) ? "https://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'] : "http://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'];
$req = 'cmd=_notify-synch';
$tx_token = $_REQUEST['tx'];
if(isset($_REQUEST['st']))
$st = $_REQUEST['st']; 
```

在 $st 中，检查状态。

# java - 在哪里可以找到 sendMessage() 方法？

> ID：12072704
> 
> 赞同：1
> 
> 时间：2012-08-22T12:02:57.617
> 
> 标签：java, android, xml, eclipse

我正在使用带有 ADT 的 Eclipse，并且正在遵循本教程：http: [//developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html) 来制作应用程序。但是我被困在我应该找到一个'sendMessage（）方法'并在其中创建一个'intent'的部分......但是我在哪里可以找到这个sendMessage方法？在布局>activity_main.xml 中？在 src>app_name>MainActivity.java 中？

编辑：所以我知道这个方法在哪里，但下一个问题是：我应该把“意图”放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:04:58.847

在 src>app_name>MainActivity.java 中。当然，您需要创建它。

```
public void sendMessage(View view) {
    Log.w("msg", "user click");

    Intent intent = new Intent(this, DisplayMessageActivity.class);
    startActivity(intent);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:07:55.880

方法始终是 java 代码部分的一部分（XML 用于接口设计，Java 用于逻辑）。

因此，为了添加方法，您必须始终修改 Java 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:08:17.147

本质上，您需要将函数名称与 XML 文件中 onClick 上的函数名称相匹配。这个名字是什么并不重要（在教程中他们调用了方法 sendMessage）。然而，重要的是该方法是相关活动的成员，并且具有完全相同的签名（返回类型 void、公共和参数 View），如所示。

由于编译器无法检查这些方法是否存在（或具有正确的签名），因此通常不建议使用这种用法（指 XML 中的函数），并且大多数开发人员更喜欢在运行时将自己的处理程序分配给按钮（在这种情况下，他们类型检查）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:09:30.547

做一件事，在 Eclipse **CTRL + H**中，然后在文件搜索选项卡中，查找 sendMessage 方法，您会在项目中的任何位置找到它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T12:15:50.863

您应该在 MainActivity.java 中创建它，然后创建一个 Intent 来启动一个名为 DisplayMessageActivity 的活动：

```
/** Called when the user clicks the Send button */
public void sendMessage(View view) {
Intent intent = new Intent(this, DisplayMessageActivity.class);
EditText editText = (EditText) findViewById(R.id.edit_message);
String message = editText.getText().toString();
intent.putExtra(EXTRA_MESSAGE, message);
startActivity(intent); 
```

}

# php - 使用 php 脚本执行 java 类文件

> ID：12072712
> 
> 赞同：0
> 
> 时间：2012-08-22T12:03:30.067
> 
> 标签：php, mysql

我正在使用 java 文件来生成报告。它位于我的本地硬盘上。当我使用 cmd 提示符调用它时，它会产生输出。我想使用 php 文件运行这个 java 文件。

cmd中的行是

```
D:\>cd class
D:\>class> java Reportgeneration username password id date 
```

这些行用于执行 java 文件，如何在 php 脚本中执行此代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:08:27.933

您可以使用 php 中的[exec](http://php.net/manual/en/function.exec.php)函数来执行命令行语句并返回结果。你也可以使用[系统](http://php.net/manual/en/function.system.php)

exec() 用于调用系统命令，并可能自己处理输出。system() 用于执行系统命令并立即显示输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:09:32.230

PHP 的[exec](http://php.net/manual/en/function.exec.php)可以解决问题。阅读手册！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:13:57.303

看一下[string shell_exec (string $cmd)](http://php.net/manual/en/function.shell-exec.php%20%22%22)它允许您在 shell 中执行命令并将输出作为字符串返回，以便在 PHP 中进行进一步处理。

```
<?php
  $output = shell_exec('ls -lart');
  echo "<pre>$output</pre>";
?> 
```

如果您有多个 shell 命令要执行，请将它们放在 .bat 文件中，然后调用 bat 文件。

请记住，PHP 需要访问目录的权限和执行权限。

# ldap - 如何将 wso2 身份与 wso2 治理注册表集成？

> ID：12072713
> 
> 赞同：0
> 
> 时间：2012-08-22T12:03:31.470
> 
> 标签：ldap, wso2, identity, wso2is

如何将 wso2 治理注册表与 wso2 身份集成？我的身份是使用 LDAP 配置的。我找不到这方面的教程...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:28:55.710

看一下`$GREG_HOME/repository/conf/user-mgt.xml`配置文件。在该`UserStoreManager`部分中，您将找到`ConnectionURL`默认指向 WSO2 Governance Registry Server 的嵌入式 LDAP 的属性，如下所示：

```
<Property name="ConnectionURL">ldap://localhost:${Ports.EmbeddedLDAP.LDAPServerPort}</Property> 
```

将此值更改为您的身份服务器的相应 LDAP URL。

# knockout.js - 从远程源分配一个淘汰赛可观察值

> ID：12072716
> 
> 赞同：2
> 
> 时间：2012-08-22T12:03:40.673
> 
> 标签：knockout.js

我有以下淘汰视图模型：

```
function DepartmentsViewModel() {
    var self = this;

    self.currentComplaint = ko.observable('');
    self.departments = ko.observableArray([]);
    self.selectedDepartment = ko.observable('').extend({
        required: true
    });

} 
```

然后我填充我的部门并`selectedDepartment`通过对我的控制器的一系列远程调用来分配值（`id`只是我根据用户所在的当前页面分配给变量的数字）：

```
$(function() {
    var self = new DepartmentsViewModel();

    self.currentComplaint(id);

    $.ajax({
        url: '@Url.Action("GetDepartments")',
        success: function (data) {
            self.departments(data);
        }
    });

    $.ajax({
        url: '@Url.Action("GetDetails")',
        data: { id: id },
        success: function (data) {
            self.selectedDepartment(data.DepartmentId);
        }
    });

    ko.applyBindings(self);

}); 
```

然后将其填充到我的 HTML 中，如下所示：

```
<select class="complaint-select" 
        data-bind="options: departments, 
                   optionsText: function(item) { 
                       return item.DepartmentCode + ' - ' + item.DepartmentName 
                   }, 
                   optionsValue: 'DepartmentId',
                   value: selectedDepartment, 
                   optionsCaption: 'Choose..'">
</select> 
```

我注意到有时我`selectedDepartment`在刷新页面时没有设置，因此，我的下拉列表没有设置任何值并告诉我从下拉列表中选择一个选项？知道为什么吗？我已经完成了我的 AJAX 请求`console.log(self.selectedDepartment());`的`complete`操作，有时它是设置的，但其他的它是未定义的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:37:33.930

您不必进行单独的 ajax 调用，而是必须链接这些 ajax 调用，以确保在您的 deparmantArray 中始终存在有效的 deparmantList 对于任何给定的 id。因为 ajax 调用的结果是随机出现的，所以你不能确定哪个是第一个出现的。

```
var departmantLoadProcess =  $.ajax({
        url: '@Url.Action("GetDepartments")'      
});

departmantLoadProcess.done(function(data){

    self.departments(data);

    var detailLoadProcess = $.ajax({
        url: '@Url.Action("GetDetails")',
        data: { id: id },
        success: function (data) {         
        }
    });

    detailLoadProcess.done(function(data){
       self.selectedDepartment(data.DepartmentId);
    });

}); 
```

有关更多信息，请检查 Jquery[延迟对象](http://api.jquery.com/category/deferred-object/)

**编辑：**

就像 Ryan 提到的那样，如果我们受到数百万次点击，序列化 ajax 请求会导致一些过载:) 如果它们的结果不依赖于彼此，我们不需要等待它们。我们可以进一步优化它。

```
// If both ajax request success

$.when( $.ajax({url: '@Url.Action("GetDepartments")'}),
        $.ajax({url: '@Url.Action("GetDetails")' , data : {id:id}}) ).done(function(deparmantsData,detailsData) {

   self.departments(deparmantsData);
   self.selectedDepartment(detailsData.DepartmentId);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:38:53.443

Knockout 会尝试强制您根据当前选项做出有效选择。听起来有时您对所选部门的 AJAX 请求会在部门列表之前返回。在这种情况下，所选部门实际上不在部门列表中。

一些选项：

*   找到一种方法来发出单个请求，返回您需要的所有数据
*   如果尚未填充部门，请在您的选项中添加一个虚拟条目。就像是：

    ```
    success: function (data) {
        if (!self.departments().length) {
            self.departments.push(data);
        }
        self.selectedDepartment(data.DepartmentId);
    } 
    ```

然后当部门进来时，他们可以覆盖这个虚拟条目。

# mysql - MYSQL MONTHNAME() 函数返回 Blob

> ID：12072717
> 
> 赞同：0
> 
> 时间：2012-08-22T12:03:42.510
> 
> 标签：mysql

有人可以帮我在 MYSQL 中找到月份名称吗？我已经阅读了许多与`MONTHNAME()`SO 中的方法相关的帖子，但没有找到我的答案。

我的代码示例：-

```
 select MONTHNAME(now())as MONTTH; 

   select MONTHNAME(str_to_date(6,'%m'))as MONTTH 
```

两者都是返回`BLOB`数据。为什么返回`BLOB`。提前致谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-22T12:21:32.880

```
SELECT MONTH(name) FROM tablename; 
```

如果这就是您的意思，将选择月份。

# java - 居中整个窗口Java

> ID：12072719
> 
> 赞同：3
> 
> 时间：2012-08-22T12:03:45.037
> 
> 标签：java, swing, awt, frame, center

我想我的问题很简单……我想在运行程序时让我的 java Frame 居中。

我使用了以下代码：

```
 setLocationRelativeTo(null); 
```

**问题 ：**

这是居中的框架的左上角，但**不是**整个框架。请问我该如何纠正这个问题，并使全帧居中？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T12:28:21.980

> `setLocationRelativeTo(null);`...这是框架的左上角...

在框架呈现自然大小之前，似乎是在错误的时间进行调用。要解决此问题，请按此顺序进行。

*   添加所有组件，给 GUI 一个大小。
*   调用`pack()`以使框架成为显示其当前包含的组件所需的最小尺寸。
*   称呼`setLocationRelativeTo(null);`

OTOH：如果它是您的程序在您的计算机上运行，​​那就去吧。但是，如果您需要提供该应用程序。对于像我这样的其他人，请考虑使用[`setLocationByPlatform(true)`](https://stackoverflow.com/q/7143287/418556)（Windows 演示。下面）。

![](../Images/2df12300d0a17e7b750c5283eff2a786.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T06:28:32.440

你可以试试这个。它在我的情况下工作。

```
Frame frame = new Frame("Centered Frame");
Dimension dimemsion = Toolkit.getDefaultToolkit().getScreenSize();
frame.setLocation(dimemsion.width/2-frame.getSize().width/2, 
                  dimemsion.height/2-frame.getSize().height/2); 
```

如果您使用的是 NetBeans，请转到板块管理器 -> 属性 -> 表单大小策略。

# facebook-graph-api - OAuth 错误：此 IP 无法为该应用程序发出请求

> ID：12072720
> 
> 赞同：17
> 
> 时间：2012-08-22T12:03:46.180
> 
> 标签：facebook-graph-api, oauth, facebook-opengraph, facebook-oauth

我刚开始在`This IP can't make requests for that application.`我的应用程序中遇到随机错误。我的服务器的 IP 地址在我的应用程序设置的白名单中，它运行良好，但我随机开始收到此错误。我检查了我的服务器的 IP（即使我已经知道它是静态的），我已经删除了白名单中的所有条目，但似乎没有一个有效。很奇怪，我可以在家中测试完全相同的代码并且它可以工作！问题的原因可能是什么？这甚至在几分钟前都没有发生，但现在我的服务器出现错误。

谢谢，坎。

**更新**：我似乎也无法删除白名单。我去了应用程序高级设置，IP又在那里了。我删除它们并保存，它说它已保存但当我向下滚动时，IP 仍然存在。我认为这是 Facebook 的一个严重错误。但是那个 [current un-editable] 列表确实包含我的服务器的 IP。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2015-04-28T13:09:28.590

正如 Victor Hugo Arango A. 所说，删除服务器白名单中的所有 IP 即可。去做这个：

1.  转到应用程序设置
2.  高级（选项卡）
3.  安全（部分）如果您看到任何 IP，请删除 IP。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-14T17:00:27.250

我有同样的问题...我刚刚删除了服务器白名单中列出的所有 ip。

我最近在 hostgator 中购买了 comodo 的 ssl 证书……他们更改了我的 IP，一切都停止工作……我收到此错误：“此 IP 无法为该应用程序发出请求。” 我认为 Facebook 服务器尚未更新 DNS，这就是错误发生的原因。

因此，您可以在 Facebook 应用程序高级配置中解决删除所有服务器白名单 ip 的问题......

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-03T15:24:20.323

尽管 Facebook 出现了错误（这导致我错误地在 Facebook 方面进行了更深入的调查），但我意识到我的虚拟主机的传出连接会在几个小时内随机变化。传入的专用 IP 保持原样，但是当我尝试在服务器端启动连接时，我意识到我的服务器没有使用分配给它的专用 IP。我联系了我的托管服务提供商 GoDaddy，他们告诉我情况正常，即使我有专用 IP，也无法修复。我已经清除了白名单（允许所有 IP 地址——默认），问题就解决了。（与此同时，Facebook 也分析并修复了我的白名单问题，因此我可以清除列表）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-22T07:31:07.117

我必须在我的域上删除 cloudFlare 服务

# java - 将 oracle 日期字段对象转换为 java 日期

> ID：12072721
> 
> 赞同：0
> 
> 时间：2012-08-22T12:03:49.677
> 
> 标签：java, oracle, date, casting

我在 Oracle DB 中有一个日期字段。

日期字段1

现在有一个现有的 DAO 以 Object 的形式获取这个 field1

```
Object field1 
```

现在我需要将它类型转换为 java Date

```
But if i do like following i get error:
Date dt = (Date) object;  //object holds date object
DateTime jdt = new DateTime(dt) ; //convert it to jodaDate 
```

错误 ：`cannot cast Long to Date.`

如何将其转换为 javaDate 而不是 Joda DateTime

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:28:24.127

您`DATE`将 Oracle DB 中的数据类型与 Java 类型混淆了`Date`。该错误`cannot cast Long to Date`表明您持有的对象是 Java 类型`Long`，这就是转换为 Java`Date`类型失败的原因。Long 表示自 1970 年 1 月 1 日以来的秒数或毫秒数，具体取决于您的 DOA 层（请参阅它的文档），因为 Oracle 中的 DATE 精度仅下降到秒。要接收日期，请分别使用`new Date((long) object)`或`new Date(1000 * (long) object)`。

您也可以使用这些毫秒数直接生成一个`DateTime`，而不使用 Java`Date`类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:26:58.603

从错误消息中可以看出，获取的对象是 Long 类型。现在，您可以从 Long 对象简单地构造*java.util.Date*对象，如下所示：

```
Date dt = new Date((Long)object) 
```

# c# - DataView RowFilter 没有给出正确的结果

> ID：12072723
> 
> 赞同：0
> 
> 时间：2012-08-22T12:04:07.820
> 
> 标签：c#, winforms, datagridview, dataview, rowfilter

我正在使用数据网格视图来显示 1000 行和 800 列数据（每个单元格只有一个字符）。还有一个复选框列。我添加了一个上下文菜单项，例如“查看选定的单元格”。点击那个我试图只显示选中的行。对于之前的那个，我通过循环遍历每一`Visible`行来设置未选中行的属性。`False`这要花很多时间。

所以我尝试`DataView`通过应用 Control 来使用`RowFilter`. 它看起来有些快但是。但是某些选中的行是不可见的。

例如，如果我有 10 行，则检查其中的 5 行。然后只有 4 行可见。实际上它应该显示被检查的 5 行。

我试过这些东西

1.  `dView.RowFilter="CheckBoxCol";`
2.  `dView.RowFilter="CheckBoxCol=true";`

这两件事我都遇到了同样的问题。谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-11T11:40:13.213

我认为大卫霍尔是正确的（对不起，我没有足够的评论点 - 这就是我打算在这里做的）

如果可能，在数据网格视图的基础源表上尝试 Table.AcceptChanges。

这应该将任何挥之不去的更改提交给表，然后提交给 DGV

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:34:56.037

您展示的两种方法都可以`RowFilter`在布尔列上使用。

您很可能遇到了`DataGridView`句柄编辑方式的问题 - 在当前编辑单元格失去焦点之前，它们不会提交到底层数据源，并且在网格上显示上下文菜单的最常见方式是单元格不会失去焦点。

也就是说，如果你显示你的上下文菜单做这样的事情：

```
void dataGridView1_CellMouseDown(object sender, DataGridViewCellMouseEventArgs e)
{
    if (e.Button == MouseButtons.Right)
    {            
        contextMenuStrip1.Show(dataGridView1, e.Location);
    }
} 
```

然后，您更改的最新复选框不会将其更改刷新到数据视图。

解决方案分为两部分。首先，您需要引入一个位于数据视图和数据网格之间的绑定源。

```
bindingSource1.DataSource = dView;
dataGridView1.DataSource = bindingSource1; 
```

然后，您需要将以下代码添加到数据网格视图上的“CurrentCellDirtyStateChanged”处理程序中：

```
void dataGridView1_CurrentCellDirtyStateChanged(object sender, EventArgs e)
{
    if (dataGridView1.IsCurrentCellDirty)
    {
        dataGridView1.CommitEdit(DataGridViewDataErrorContexts.Commit);
    }
} 
```

最后，在您应用过滤器的代码中，您还需要调用`EndEdit`绑定源：

```
private void filterToolStripMenuItem_Click(object sender, EventArgs e)
{
    bs.EndEdit();
    dvSections.RowFilter = "CheckBoxCol";
} 
```

* * *

在我之前的经验中，绑定源不是必需的，但是我没有尝试过将上下文菜单和数据视图完全混合在一起，当我尝试时发现它`bs.EndEdit()`是必需的。

# javascript - 在javascript中为onclick缓存对象

> ID：12072726
> 
> 赞同：0
> 
> 时间：2012-08-22T12:04:17.533
> 
> 标签：javascript

是否有理由`myId`像下面那样进行缓存（假设该对象`myId`仅用于此弹出功能，在 JavaScript 中没有其他地方）。

```
var myId = document.getElementById('myId');
myId.onclick = function () {
  alert('button was clicked');
} 
```

我认为该`onclick`事件只会设置一次并且没有必要。但我不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T12:07:19.937

缓存的唯一原因是，如果您想将`myid` *元素* 用于**不只是绑定 click 事件**。

出于这个原因，人们经常缓存元素，这样可以节省性能，因为您不必多次搜索 DOM 树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:07:33.060

多缓存一次元素可能最终会使用它通常是一个好主意，但是如果您确定不需要再次访问它，则没有理由必须保存它以供以后使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:09:39.230

您只是分配了一个变量，该变量可能与轨道上的另一个变量发生冲突。如果您只设置一次回调，只需这样做：

```
document.getElementById('myId').onclick = function () {
    alert('button was clicked');
} 
```

# java - 在 Java 中复制对象

> ID：12072727
> 
> 赞同：75
> 
> 时间：2012-08-22T12:04:19.183
> 
> 标签：java, variables, object, pointers, reference

我了解到，当您在 Java 中修改变量时，它不会更改它所基于的变量

```
int a = new Integer(5);
int b = a;
b = b + b;
System.out.println(a); // 5 as expected
System.out.println(b); // 10 as expected 
```

我假设对象也有类似的情况。考虑这个类。

```
public class SomeObject {
    public String text;

    public SomeObject(String text) {
        this.setText(text);
    }

    public String getText() {
        return text;
    }   

    public void setText(String text) {
        this.text = text;
    }
} 
```

尝试此代码后，我感到困惑。

```
SomeObject s1 = new SomeObject("first");
SomeObject s2 = s1;
s2.setText("second");
System.out.println(s1.getText()); // second as UNexpected
System.out.println(s2.getText()); // second as expected 
```

请向我解释为什么更改任何对象都会影响另一个对象。我知道变量文本的值存储在两个对象的内存中的相同位置。

为什么变量的值是独立的但与对象相关？

另外，如果简单的分配不能完成这项工作，如何复制 SomeObject？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-08-22T12:08:27.327

Java 中的每个变量都是一个**引用**。所以当你这样做时

```
SomeClass s2 = s1; 
```

您只需指向与指向`s2`相同的对象`s1`。您实际上是在将引用 s1（指向 的实例`SomeClass`）的值分配给 s2。**如果你修改`s1`,`s2`也会被修改**（因为它指向同一个对象）。

有一个例外，原始类型：`int, double, float, boolean, char, byte, short, long`. 它们按价值存储。所以在使用时`=`，你只赋值，但它们不能指向同一个对象（因为它们不是引用）。这意味着

```
int b = a; 
```

仅将 的值设置`b`为 的值`a`。**如果你改变了`a`，`b`就不会改变。**

归根结底，一切都是按值赋值的，它只是引用的值，而不是对象的值（上面提到的原始类型除外）。

所以在你的情况下，如果你想复制`s1`，你可以这样做：

```
SomeClass s1 = new SomeClass("first");
SomeClass s2 = new SomeClass(s1.getText()); 
```

或者，您可以添加一个复制构造函数`SomeClass`，将实例作为参数并将其复制到自己的实例中。

```
class SomeClass {
  private String text;
  // all your fields and methods go here

  public SomeClass(SomeClass copyInstance) {
    this.text = new String(copyInstance.text);
  }
} 
```

有了这个，你可以很容易地复制一个对象：

```
SomeClass s2 = new SomeClass(s1); 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-09-16T03:22:26.103

@brimborium 的回答非常好（他+1），但我只想用一些数字来详细说明。让我们首先进行原始分配：

```
int a = new Integer(5);
int b = a;
b = b + b;
System.out.println(a); // 5 as expected
System.out.println(b); // 10 as expected 
```

```
int a = new Integer(5); 
```

1- 第一条语句创建一个值为 5 的 Integer 对象。然后，在将其分配给变量`a`时，Integer 对象将被拆箱并`a`作为原语存储。

创建 Integer 对象后，赋值前：

![在此处输入图像描述](../Images/a42f5a678ef645447e4a5efbccdef3ae.png)

分配后：

![在此处输入图像描述](../Images/1e767373edea083d9a511f970d42669e.png)

```
int b = a; 
```

2-这只会读取 的值，`a`然后将其存储到`b`.

（Integer 对象现在可以进行垃圾收集，但此时还不一定是垃圾收集）

![在此处输入图像描述](../Images/b438ad2ec20981f5420de571ee3145bc.png)

```
b = b + b; 
```

3- 这会读取`b`两次的值，将它们加在一起，然后将新值放入`b`.

![在此处输入图像描述](../Images/0b068fd11965291aa6f228e06e0a96fe.png)

* * *

另一方面：

```
SomeObject s1 = new SomeObject("first");
SomeObject s2 = s1;
s2.setText("second");
System.out.println(s1.getText()); // second as UNexpected
System.out.println(s2.getText()); // second as expected 
```

```
SomeObject s1 = new SomeObject("first"); 
```

1- 创建一个新的`SomeObject`类实例，并将其分配给引用`s1`。

![在此处输入图像描述](../Images/0b29a4a95526381f3cb29e495fadd260.png)

```
SomeObject s2 = s1; 
```

2-这将使引用`s2`指向指向的对象`s1`。

![在此处输入图像描述](../Images/1ac5c2c6879798179fd4f5b0a1be63e7.png)

```
s2.setText("second"); 
```

3-当您在引用上使用设置器时，它将修改引用指向的对象。

![在此处输入图像描述](../Images/29d2c9cd58610595b76f882d4c7d91a2.png)

```
System.out.println(s1.getText());
System.out.println(s2.getText()); 
```

4- 两者都应该打印`second`，因为两个引用`s1`和`s2`指的是同一个对象（如上图所示）。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-08-22T12:07:33.810

当你这样做时

```
SomeObject s1 = new SomeObject("first");
SomeObject s2 = s1; 
```

您有 2 个对同一对象的引用。这意味着无论您使用哪个引用对象，您所做的更改都将在使用第二个引用时可见。

可以这样想：房间里有一台电视，但有两个遥控器：不管你使用哪个遥控器，你仍然会对同一个底层对象（电视）进行更改。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-08-22T12:07:39.093

当你写：

```
SomeObject s1 = new SomeObject("first"); 
```

`s1`不是一个`SomeObject`。它是对对象的*引用。*`SomeObject`

因此，如果您将 s2 分配给 s1，您只需分配引用/句柄，并且基础对象是相同的。这在 Java 中很重要。一切都是按值传递的，但你永远不会传递对象——只有对对象的引用。

因此，当您分配`s1 = s2`，然后调用`s2`更改对象的方法时，底层对象会更改，并且当您通过`s1`.

*这是对象不变性*的一个论据。通过使对象不可变，它们不会在您的控制下发生变化，从而以更可预测的方式表现。如果要复制对象，最简单/最实用的方法是编写一个`copy()`简单地创建新版本并复制字段的方法。您可以使用序列化/反射等进行巧妙的复制，但这显然更复杂。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-22T12:12:08.257

*Java程序员[犯的十大错误](http://www.javacoffeebreak.com/articles/toptenerrors.html)*：

> 6 - 对按值传递和按引用传递的困惑
> 
> 这可能是一个令人沮丧的诊断问题，因为当您查看代码时，您可能确定它是通过引用传递的，但发现它实际上是通过值传递的。Java 两者都使用，因此您需要了解何时通过值传递，何时通过引用传递。
> 
> 当您将原始数据类型（例如 char、int、float 或 double）传递给函数时，您就是按值传递。这意味着数据类型的副本被复制，并传递给函数。如果函数选择修改该值，它将仅修改副本。一旦函数完成，控制权返回给返回函数，“真实”变量将保持不变，并且不会保存任何更改。如果您需要修改原始数据类型，请将其作为函数的返回值，或将其包装在对象中。

因为`int`是原始类型，`int b = a;`是按值复制，这​​意味着`a`和`b`是两个不同的对象，但具有相同的值。

`SomeObject s2 = s1;`make`s1`和`s2`同一个对象的两个引用，所以如果你修改一个，另一个也会被修改。

一个好的解决方案是实现另一个这样的构造函数：

```
public class SomeObject{

    public SomeObject(SomeObject someObject) {
        setText(someObject.getText());
    }

    // your code

} 
```

然后，像这样使用它：

```
SomeObject s2 = new SomeObject(s1); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-22T12:10:55.517

让我们从你的第二个例子开始：

第一条语句将一个新对象分配给`s1`

```
SomeObject s1 = new SomeObject("first"); 
```

当您在第二条语句 ( `SomeObject s2 = s1`) 中进行赋值时，您是在告诉指向当前指向`s2`的同一个对象，因此您有两个对同一个对象的引用。`s1`

请注意，您没有复制`SomeObject`，而是两个变量只是指向同一个对象。因此，如果您是 modify`s1`或`s2`，您实际上是在修改同一个对象（请注意，如果您做了类似`s2 = new SomeObject("second")`它们现在指向不同对象的操作）。

在您的第一个示例中，`a`并且`b`是原始值，因此修改一个不会影响另一个。

在 Java 的底层，所有对象都使用按值传递来工作。对于对象，您传递的“值”是对象在内存中的位置（因此它似乎具有通过引用传递的类似效果）。基元的行为不同，只是传递值的副本。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-22T12:11:04.860

上面的答案解释了您所看到的行为。

在回答“另外，如果简单的分配不能完成这项工作，如何复制 SomeObject？” - 尝试搜索`cloneable`（它是一个 java 接口，提供了一种复制对象的方法）和“ `copy constructors`”（另一种方法，可以说是更好的方法）

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-22T12:08:31.030

在您的代码中`s1`和`s2`是*同一个*对象（您只使用创建了一个对象`new`）并且您让`s2`指向下一行中的同一个对象。因此，当您更改它时，如果您通过和`text`引用该值，它都会发生变化。`s1``s2`

Integers 上的`+`运算符创建一个*新*对象，它不会更改现有对象（因此添加 5+5 不会给 5 新值 10...）。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-08-22T12:09:32.090

这是因为 JVM 存储了一个指向`s1`. 当您调用 时`s2 = s1`，您基本上是在说`s2`指针（即内存地址）与 for 的值相同`s1`。由于它们都指向内存中的同一位置，因此它们代表完全相同的事物。

`=`运算符分配指针值。它不复制对象。

克隆对象本身就是一件复杂的事情。每个对象都有一个您可能很想使用的 clone() 方法，但它会进行浅拷贝（这基本上意味着它会复制顶级对象，但其中包含的任何对象都不会被克隆）。如果您想玩弄对象副本，请务必阅读 Joshua Bloch 的[Effective Java](http://books.google.com/books?id=ka2VUBqHiWkC&pg=PA55&lpg=PA55&dq=effective%20java%20clone&source=bl&ots=yXGhLnv4O4&sig=zvEip5tp5KGgwqO1sCWgtGyJ1Ns&hl=en&ei=CYANSqygK8jktgfM-JGcCA&sa=X&oi=book_result&ct=result&resnum=3#PPA54,M1)。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-08-22T12:12:41.517

对引用的对象分配不会克隆您的对象。引用就像指针。它们指向一个对象，当调用操作时，它是在指针指向的对象上完成的。在您的示例中， s1 和 s2 指向同一个对象，setter 更改同一个对象的状态，并且更改在引用中可见。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-09-16T17:11:17.133

```
int a = new Integer(5) 
```

在上述情况下，创建了一个新的 Integer。这里 Integer 是一种非原始类型，其中的值被转换（转换为 int）并分配给 int 'a'。

```
SomeObject s1 = new SomeObject("first");  
SomeObject s2 = s1; 
```

在这种情况下，s1 和 s2 都是引用类型。它们不是为了包含像原始类型这样的值而创建的，而是包含某个对象的引用。为了便于理解，我们可以将引用视为一个链接，它指示我在哪里可以找到被引用的对象。

这里引用 s1 告诉我们在哪里可以找到“first”的值（它实际上存储在计算机内存中的 SomeObject 实例中）。换句话说，s1 是类“SomeObject”的对象的地址。通过以下分配 -

```
SomeObject s2 = s1; 
```

我们只是将存储在 s1 中的值复制到 s2，我们现在知道 s1 包含字符串“first”的地址。在此分配之后，两个 println() 都会产生相同的输出，因为 s1 和 s2 都引用同一个对象。

如果您是 java 用户，则可以使用复制构造函数和 clone() 方法复制对象。可以通过以下方式使用克隆 -

```
SomeObject s3 = s1.clone(); 
```

有关 clone() 的更多信息，这是一个有用的链接[http://en.wikipedia.org/wiki/Clone_%28Java_method%29](http://en.wikipedia.org/wiki/Clone_%28Java_method%29)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2012-08-22T12:15:10.257

更改您的课程以创建新的参考而不是使用相同的参考：

```
public class SomeObject{

    public String text;

    public SomeObject(String text){
        this.setText(text);
    }

    public String getText(){
        return text;
    }   

    public void setText(String text){
        this.text = new String(text);
    }
} 
```

你可以使用这样的东西（我不假装有理想的解决方案）：

```
public class SomeObject{

    private String text;

    public SomeObject(String text){
        this.text = text;
    }

    public SomeObject(SomeObject object) {
        this.text = new String(object.getText());
    }

    public String getText(){
        return text;
    }   

    public void setText(String text){
        this.text = text;
    }
} 
```

用法：

```
SomeObject s1 = new SomeObject("first");
SomeObject s2 = new SomeObject(s1);
s2.setText("second");
System.out.println(s1.getText()); // first
System.out.println(s2.getText()); // second 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-08-22T12:11:27.790

由于对象被引用引用。所以如果你写 s2=s1 只有引用会被复制。就像在 C 中一样，您只处理内存地址。如果您复制内存地址并更改此地址后面的值，则两个指针（引用）都将更改内存中此时的一个值。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-08-22T12:07:23.910

第二行 ( `SomeObject s2 = s1;`) 只是将第二个变量分配给第一个变量。这导致第二个变量指向与第一个相同的对象实例。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2012-08-22T12:08:32.457

那是因为`s1`并且`s2`仅作为对您的对象的引用。分配时`s2 = s1`您只分配引用，这意味着两者都将指向内存中的同一个对象（具有当前文本“first”的对象）。

当您现在在 s1 或 s2 上执行 setter 时，两者都将修改同一个对象。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2012-08-22T12:08:39.737

当您将对象分配给变量时，您实际上是在将引用分配给该对象。所以这两个变量`s1`都`s2`指的是同一个对象。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-09-16T21:15:12.620

```
T copyDeep(T input) { 
    return new Gson().fromJson(new Gson().toJson(input), T.class);
} 
```

# .net - .net mvc3 razor - 多选：按所选顺序保存值

> ID：12072731
> 
> 赞同：1
> 
> 时间：2012-08-22T12:04:34.293
> 
> 标签：.net, html, asp.net-mvc-3, razor

我正在使用 .NET / MVC3 / Razor 开发一个项目。

我有一个带有多项选择的表单。

当用户按保存时，如何按选择顺序获取服务器端值？

假设我有：

```
<select multiple="multiple">
 <option>Volvo</option>
 <option>Saab</option>
 <option>Mercedes</option>
 <option>Audi</option>
</select> 
```

并且用户选择“Audi”和“Saab”，然后按保存。

目前，在服务器端，我收到“Saab”和“Audi”作为选定值。

我想收到“Audi”，然后是“Saab”。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:05:59.190

这基本上是不可能的；浏览器将始终按照它们出现的顺序发送值。

如果你愿意，你可以添加 Javascript 代码来跟踪其他地方的选择顺序。

但是，这会让用户感到困惑（大多数人不会期望选择顺序会产生影响）。
考虑使用不同的 UI。

# android - 是否可以将 OpenCL 用于移动设备？

> ID：12072736
> 
> 赞同：2
> 
> 时间：2012-08-22T12:04:43.153
> 
> 标签：android, parallel-processing, opencl

请告诉我是否可以使用 OpenCL 在移动应用程序中实现并行性。如果是，请参考我一些阅读材料，也建议我如何开始。

谢谢;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T00:40:50.780

是的，这是非常有可能的，并且提供了很好的加速。以下是我们在该领域进行的[一些演示。](http://accelereyes.com/mobile)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T07:13:04.887

在 Android 上，您可以使用[RenderScript](http://developer.android.com/guide/topics/renderscript/compute.html)。

> Renderscript 在您用 C（C99 标准）编写的本机级别提供高性能计算 API。Renderscript 使您的应用程序能够通过所有可用处理器内核的自动并行化运行操作。它还支持不同类型的处理器，例如 CPU、GPU 或 DSP。Renderscript 对于执行图像处理、数学建模或任何需要大量数学计算的操作的应用程序很有用。

# android - 在 Android 中启动服务需要很长时间

> ID：12072739
> 
> 赞同：0
> 
> 时间：2012-08-22T12:04:45.263
> 
> 标签：android, service

所以这里的情况。我的应用程序有一个登录屏幕（活动），然后在另一个屏幕之后显示一些东西（现在是另一个按钮）并启动服务。此服务正在为聊天启动 xmpp 连接。

我想要的是当我在登录屏幕上按连接时，会出现下一个屏幕并启动服务。

但是目前，当我按下连接时，登录屏幕会停留大约 2 秒，而下一个屏幕会启动服务。我知道这是服务调用减慢了一切，因为当评论时屏幕快速出现。

只有 onCreate 被编码在屏幕上，我也尝试使用 AsyncTask 但它没有改变任何东西：

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ecrancoreglayout);

    next = (Button)findViewById(R.id.boutonContinuer);
    next.setOnClickListener(this);

    Intent service_intent = new Intent(this, ChatService.class);
    startService(service_intent);
    //new ConnectWork().execute();
} 
```

该服务看起来像这样，initConnection 是连接到 xmpp 并获取名册和东西的函数......：

```
public class ChatService extends Service
{

@Override
public void onCreate()
{
    super.onCreate();
    packetListener = new MessageListener();
}

@Override  
public int onStartCommand(Intent intent, int flags, int startId)
{  
    initConnection();

    handler = new Handler();
    return START_NOT_STICKY;  
}  

@Override
public IBinder onBind(Intent intent)
{
    return null;
}
} 
```

我究竟做错了什么 ？

# android - 安卓模拟器中的视网膜显示

> ID：12072740
> 
> 赞同：1
> 
> 时间：2012-08-22T12:04:49.317
> 
> 标签：android, css, cordova, retina-display

是否有可能在 Android 中具有与视网膜显示（设备像素比：2）等效的功能`Emulator`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:18:21.407

不，到目前为止，您无法在 Android-sdk 提供的默认模拟器中显示视网膜，但不知道是否由第三方皮肤/模拟器为设备提供。

# php - 附加选项以使用 JQuery 进行选择

> ID：12072744
> 
> 赞同：0
> 
> 时间：2012-08-22T12:05:02.443
> 
> 标签：php, json, jquery, symfony

我有两个选择下拉菜单，其中需要根据第一个选择更改第二个选择框的选项。形式是

```
<form action="" method="post" >
        <div style="padding-bottom:6px;">
            <select id="portfolios" name="portfolio" style="width: 200px; height:25px;">
                <option selected="selected" value="default">Select Portfolio</option>
                {% for portfolio in portfolios %}
                    <option get-groups="{{ path('v2_pm_patents_getgroups') }}" value={{ portfolio.id }}>{{ portfolio.portfolioName }}</option>
                {% endfor %}
            </select>
            <span>OR</span>
            <a class="modalbox1" href="#inline1">[Add New Portfolio]</a>
        </div>

        <div style="padding-bottom:6px; display:none;" id="groups">
            <select id="portfolio-groups" name="portfolio-groups" style="width:200px; height:25px;">
                <option selected="selected" value="default">Select Portfolio Group</option>
            </select>
            <span> OR</span>
            <a class="modalbox2" href="#inline2">[Add New Group]</a>
        </div>
</form> 
```

最初，当我从第一个选择中选择一个选项时，第二个下拉列表是隐藏的，它变得可见。我写的 JQuery 是

```
<script>
    $(document).ready(function(){
        $('#portfolios').change(function() {
            $('#groups').show();
            var id = $("#portfolios").val();
            var url = $('option:selected', this).attr("get-groups");
            var data = {PID:id};
            $.getJSON(url, data, function(result) {
                var options = $("#portfolio-groups");
                $.each(result, function(item) {
                    options.append($("<option />").val(item.id).text(item.name));
                });
            });
        });
    }); 
</script> 
```

我调用的控制器方法是

```
public function getgroupsAction(Request $request){
    if ($request->isXmlHttpRequest()) {

        $id = $request->get("PID");
        $em = $this->getDoctrine()->getEntityManager();
        $portfolio_groups = $em->getRepository('MunichInnovationGroupPatentBundle:PmPatentgroups')
        ->getpatentgroups($id);
        echo json_encode($portfolio_groups);
        return new Response();
    }
} 
```

我从我的查询和 JSON 对象中得到了正确的组。响应的对象看起来像

```
[{"id":"09c0d4b2-ac25-11e1-96a5-9787dec335c2","name":"Group 2","description":"No Description Provided for this Group","order":500000,"is_deleted":false}] 
```

在我的 JQuery 中，我将选项附加到选择框，但问题是它附加了选项，但具有空值属性且没有文本。因此文本和 value 属性都不可见，只是添加了空选项。

我做错了什么？以及如何在附加选项之前清除选择框？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:28:19.757

[看这个演示](http://jsfiddle.net/xYbWC/2/)

```
$("#mSelect").append($("<option />").val('1').text('-- Select --'));

var myOptions = response.d;
                var mySelect = $("#MainContent_ddlnewType");
                mySelect.children().remove();
                //mySelect.append($("<option>").val("00").text("-- Select Type --"));
                for (var i = 0; i < myOptions.length; i++) {
                    var val = myOptions[i].Id;
                    var text = myOptions[i].Name;
                    mySelect.append($("<option>").val(val).text(text));
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:06:25.400

看起来您将 JSON 响应包装在一个数组中。尝试`$.each`像这样访问您的元素`item[0].name`，然后`item[0].id`

然后你需要考虑获取多个对象并遍历项目数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:07:33.270

你不能`.val()`在这种情况下使用。你必须使用`.attr("value",item.id)`

# asp.net-mvc - 模型和 Edmx 绑定

> ID：12072747
> 
> 赞同：0
> 
> 时间：2012-08-22T12:05:07.240
> 
> 标签：asp.net-mvc, entity-framework

我正在开发 MVC 应用程序，并且正在使用实体框架。

我无法弄清楚的是，每当通过 Model 类创建 View 时，在控制器中它直接与表绑定，而在这种情况下它应该与 Model 绑定。

请分享一些相同的信息。

# build - 如果我用 configure 更改前缀，autotools 会重新编译整个项目吗？

> ID：12072755
> 
> 赞同：2
> 
> 时间：2012-08-22T12:05:50.563
> 
> 标签：build, autotools, configure

我刚刚配置、构建和安装了 gcc，指定了错误的前缀。在使用不同的配置后，我会重建所有二进制文件`--prefix`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:20:01.827

不幸的是，它从头开始编译所有内容。

# mysql - 从 mySQL 将数据库模式导出为 ASCII，以便我可以将其发布到 SO

> ID：12072761
> 
> 赞同：5
> 
> 时间：2012-08-22T12:06:05.353
> 
> 标签：mysql, phpmyadmin, schema

当我需要询问一个 mySQL 数据库架构问题时——我尝试“写出”我的表架构——但它很长。

所以我检查了 SO - 但我找不到答案：**有没有办法自动从 mySQL（或 phpmyadmin）自动生成 ASCII 样式的数据库模式？**

即我想自动得到这样的东西：

```
+----------+---------+----------------------------+
|  user_ID | user    |   roles                    |
+----------+---------+----------------------------+
|        1 |   Smith |    1                       |
+----------+---------+----------------------------+
|        2 |   Jones |    1                       |
+----------+---------+----------------------------+ 
```

人们是怎么做到的？什么是最好的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T14:54:49.563

我不确定 phpMyAdmin 可以做你想做的事，但你可以通过使用 mysql 提示符来得到这个。就是这样：

假设您只需要 table 的架构`my_table`。

如果需要，打开终端并运行`mysql`传递用户名 (-u) 和密码 (-p)。在 Windows 上，您可能希望确保 mysql bin 目录位于路径上（如果您在 Windows 上工作，您可能还希望[mysql 在 PATH 上](http://dev.mysql.com/doc/refman/5.0/en/windows-start-command-line.html)）。

一旦你有一个 mysql 终端；

您可能想查看哪些数据库可用：

```
show databases; 
```

选择要使用的数据库：

```
use this_database; 
```

您可能还希望查看哪些表可用（在此数据库中）：

```
show tables; 
```

现在，要查看表的架构/定义，例如`my_table`，运行以下命令：

```
describe my_table; 
```

这应该会给你一个像这样的 ASCII 漂亮打印的输出，例如：

```
+--------------------+--------------+------+-----+---------+----------------+
| Field              | Type         | Null | Key | Default | Extra          |
+--------------------+--------------+------+-----+---------+----------------+
| id                 | int(11)      | NO   | PRI | NULL    | auto_increment |
| name               | varchar(50)  | NO   |     | NULL    |                |
| location_id        | int(11)      | NO   | MUL | NULL    |                |
| manager_id         | int(11)      | NO   | MUL | NULL    |                |
| other              | varchar(100) | YES  |     | NULL    |                |
| creation_timestamp | datetime     | NO   |     | NULL    |                |
| is_active          | tinyint(1)   | NO   |     | NULL    |                |
+--------------------+--------------+------+-----+---------+----------------+ 
```

如果它是您想要的模式+数据，那么您可能会通过`SELECT`查询来解决列名以及您想要的任何行。例如这样的：

```
SELECT * FROM stores LIMIT 2; 
```

将给出以下内容：

```
+----+------------+-------------+------------+-------+---------------------+-----------+
| id | name       | location_id | manager_id | other | creation_timestamp  | is_active |
+----+------------+-------------+------------+-------+---------------------+-----------+
|  1 | Good Store |           1 |          1 |       | 2012-06-17 19:14:15 |         1 |
|  2 | Neu Store  |           2 |          1 |       | 2012-06-29 05:14:24 |         1 |
+----+------------+-------------+------------+-------+---------------------+-----------+ 
```

**注意：**在上述所有示例中，mysql 肯定会为您提供我所显示的输出（除非分页或方向发生更改），但是如果您将这个输出复制并粘贴到 SO 上，您需要复制并粘贴从终端/控制台；在标准 linux/unix 终端上，您可以使用鼠标选择输出，然后使用 将其复制到剪贴板`Control+Shift+C`，然后将其粘贴到 SO。在Windows上，用鼠标选择后，我想你可以右键单击并选择`copy`，或者你需要`mark`从控制台窗口中选择，然后选择输出，之后它应该会自动出现在剪贴板上供你粘贴到SO .

此外，当您将输出粘贴到 SO 上的文本框中时，不要忘记 SO 将其显示为代码，您需要选择内容，然后单击`{}`以将其格式化为代码。或者，只需将其左缩进，每行 4 个空格。

希望这可以解决您的问题，尽管它不像`automatic`您希望的那样，但我相信使用类似的脚本`xclip`和`mysql`命令可以接近这个，完成`automatically`:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T04:25:47.730

您的问题实际上是指打印表数据，而不是模式。如果我理解正确，您正在考虑以漂亮的格式打印出数据，包括精美的框架和所有内容。

在这种情况下，请查看[将 MySQL 结果集导出到客户端文件的方法](http://code.openark.org/blog/mysql/ways-to-export-mysql-result-set-to-file-on-client-side)。

特别是，您可以`tee`在 MySQL 命令行中使用该命令，它将您在命令行上看到的所有内容复制到文件中。例如：

```
mysql> tee /tmp/nice_output.txt
mysql> SELECT 1 AS one, 2, 3 FROM DUAL;
+-----+---+---+
| one | 2 | 3 |
+-----+---+---+
|   1 | 2 | 3 |
+-----+---+---+ 
```

现在使用您喜欢的编辑器打开文件并找到：

```
mysql> SELECT 1 AS one, 2, 3 FROM DUAL;
+-----+---+---+
| one | 2 | 3 |
+-----+---+---+
|   1 | 2 | 3 |
+-----+---+---+
1 row in set (0.00 sec) 
```

这是您刚刚键入并在命令行上获得的内容的副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T12:33:18.343

在 phpMyAdmin 中，首先选择您的数据库，然后转到导出功能，并保持结构勾选，取消勾选数据，并取消勾选另存为文件。然后，单击开始。一般来说，我一次导出所有表，但您可以使用左侧的选择器选择要导出的表。

编辑：我刚刚注意到你要求一个“模式”，但你的插图是模式和数据。尽管您可以在 phpMyAdmin 中同时导出两者，但这不会像您的插图所示那样格式化。也许最好的方法是将导出为`CREATE TABLE`and `INSERT`，然后将其添加到[SQLFiddle](http://sqlfiddle.com/)？这样做的好处是，回答您问题的人可以轻松地创建示例并进行实验。

# c# - 用于为 ASP.NET MVC 创建 HTML 的类似 XElement 的 API

> ID：12072768
> 
> 赞同：1
> 
> 时间：2012-08-22T12:06:32.000
> 
> 标签：c#, .net, html

我想封装一些 HTML 创建逻辑（例如，最终在 ASP.NET MVC 剃须刀页面中使用）。我可以使用纯 C# 中的结构化 API 来执行此操作吗？

我想避免容易出错的基于字符串的构造，在这种构造中我需要手动构建标签并转义正确的字符串，因为这让我难以维护并且可能导致 html 注入漏洞。类似于`XElement`API 的东西（例如），但随后用于 html 生成：一个 API 至少要注意格式正确并避免样板。

这样的 API 存在吗？安全轻松地生成 html 片段的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:05:39.343

ASP.NET MVC 中有一个内置的 HTML 生成器。它被称为[TagBuilder](http://msdn.microsoft.com/en-us/library/system.web.mvc.tagbuilder.aspx)，所有[内置的 Html 助手](http://www.asp.net/mvc/tutorials/older-versions/views/using-the-tagbuilder-class-to-build-html-helpers-cs)都在内部使用它。

例如生成以下 HTML：

```
<div id="someId" class="someClass">
  <p class="paragraph">Some text</p>
  <input type="button" value="Click"/>
</div> 
```

好像：

```
var div = new TagBuilder("div");
    div.GenerateId("someId");
    div.AddCssClass("someClass");
var p = new TagBuilder("p");
    p.AddCssClass("paragraph");
    p.SetInnerText("Some text"); //HtmlEncode the parameter
var button = new TagBuilder("input");
    button.MergeAttribute("type","button");
    button.MergeAttribute("value","click");

div.InnerHtml = (p.ToString() + button.ToString()); 
```

[在我们的项目中，我们通常会在类似这样](http://trycatchfail.com/blog/post/Fluent-wrapper-for-ASPNET-MVC-TagBuilder.aspx)`TagBuilder`的东西周围创建一个薄的流体包装器，以使其 API 更加流畅。

如果可以使用一些第三方库并且您需要一些高级功能，您可以查看：

*   [MvcContrib.FluentHtml](http://lunaverse.wordpress.com/2008/11/24/mvcfluenthtml-fluent-html-interface-for-ms-mvc/) - 在[Nuget上可用](http://nuget.org/packages/MvcContrib.FluentHtml)
*   [HtmlTags.Fubu](http://htmltags.fubu-project.org/) - 在[Nuget上可用](http://nuget.org/packages/HtmlTags)

# rpm - install4j rpm 媒体文件忽略服务和 zip 文件操作

> ID：12072769
> 
> 赞同：0
> 
> 时间：2012-08-22T12:06:34.900
> 
> 标签：rpm, install4j

我正在尝试使用 install4j 多平台 v5.0.8 生成一个 rpm 媒体文件。我的启动器可执行文件是“服务”。我的安装程序包含“安装服务”操作。当我安装 rpm 时，成功创建了根目录和运行应用程序的脚本。但是，/etc/init.d 中没有放置链接。我试过了使用rpm -ivv 查了一下，好像没有发出添加链接的命令。

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:26:23.340

RPM 存档不会执行任何操作。只有安装人员执行屏幕和操作。您必须在 install4j IDE 的“媒体”步骤中为此定义一个 Unix/Linux GUI 安装程序。

# iphone - 如何用图像填充组 tableView 单元格

> ID：12072772
> 
> 赞同：2
> 
> 时间：2012-08-22T12:06:46.343
> 
> 标签：iphone, objective-c, ios, uitableview

我正在使用组表视图来显示用户设置，并且我想在其中一个单元格中显示图像。
众所周知，组表视图单元格具有圆角，所以我希望我的图像也具有相同的圆角填充整个单元格。

如何设置图像以用相同的圆角填充单元格？
当我尝试使用单元格的边界设置图像时，它会填充整个矩形（从 x = 0）而不是单元格的矩形（单元格的矩形以一些 x 偏移开始并具有圆角）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:12:06.087

一种方法是使用：

```
cell.contentView.backgroundColor = [UIColor colorWithPatternImage:@"cellImage.png"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:14:36.040

如果你在 Cell 中有 UIImageView 那么你可以这样做，因为每个层都可以设置一个角半径，这会给你你想要的：

实现如下：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    //......
    ///.......
    cell.yourImgView.layer setMasksToBounds:YES];
    cell.yourImgView.layer setCornerRadius:10.0]; //according to your requirement
 } 
```

# directory - 没有任何目录的 WiX 安装

> ID：12072774
> 
> 赞同：3
> 
> 时间：2012-08-22T12:06:49.750
> 
> 标签：directory, wix

维克斯 3.5。我的安装项目除了：

1.  创建具有值的注册表项；
2.  安装两个证书。

可以在没有任何“目录”元素的情况下构建 WiX 项目吗？

这是我的 WiX 项目中的 XML 代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:iis="http://schemas.microsoft.com/wix/IIsExtension">
  <Product
        Id="GUID"
        Name="SetupProject1" Language="1033" Version="1.0.0.0"
        Manufacturer="SetupProject1" UpgradeCode="GUID">
    <Package InstallerVersion="200" Compressed="yes" Languages="1033" SummaryCodepage="1252" />

    <Media Id="1" Cabinet="media1.cab" EmbedCab="yes" />

    <Binary Id="testRootCABinaryStream"
            SourceFile="D:\testRootCA.cer" />
    <Binary Id="testSigningBinaryStream"
            SourceFile="D:\testSigning.cer" />

    <Directory Id="TARGETDIR" Name="SourceDir">
      <Directory Id="ProgramFilesFolder">
        <Directory Id="INSTALLLOCATION" Name="SetupProject1">
          <Component Id="RegistrySetting" Guid="GUID">
            <iis:Certificate Id="testRootCA"
                             BinaryKey="testRootCABinaryStream"
                             Name="Test Root CA Certificate"
                             Overwrite="yes"
                             Request="no"
                             StoreLocation="localMachine"
                             StoreName="root"/>
            <iis:Certificate Id="testSigning"
                             BinaryKey="testSigningBinaryStream"
                             Name="Test Signing Certificate"
                             Overwrite="yes"
                             Request="no"
                             StoreLocation="localMachine"
                             StoreName="trustedPublisher"/>
            <RegistryValue Root="HKLM" Key="Software\Microsoft\Silverlight"
                           Name="AllowElevatedTrustAppsInBrowser"
                           Type="integer" Value="00000001" KeyPath="yes" />
          </Component>
        </Directory>
      </Directory>
    </Directory>

    <Feature Id="Complete" Title="SetupProject1" Level="1">
      <ComponentRef Id="RegistrySetting" />
      <ComponentGroupRef Id="Product.Generated" />
    </Feature>
  </Product>
</Wix> 
```

实际上，这段代码不会在 Program Files 文件夹中创建任何目录，但是如果我在没有 Directory 元素的情况下编译我的项目（在我的例子中，Component 元素紧跟在 Binary 元素之后）它会失败并出现以下错误：

“未找到 Component/@Directory 属性；它是必需的。”

**更新**

感谢严的详细解答。现在我在目录部分的代码片段看起来像（现在更正确了）：

```
<Directory Id="TARGETDIR" Name="SourceDir" />

<DirectoryRef Id="TARGETDIR">
  <Component  Id="CompleteInstallation" Guid="Guid">
    <iis:Certificate Id="testRootCA"
                     BinaryKey="testRootCABinaryStream"
                     Name="Test Root CA Certificate"
                     Overwrite="yes"
                     Request="no"
                     StoreLocation="localMachine"
                     StoreName="root"/>
    <iis:Certificate Id="testSigning"
                     BinaryKey="testSigningBinaryStream"
                     Name="Test Signing Certificate"
                     Overwrite="yes"
                     Request="no"
                     StoreLocation="localMachine"
                     StoreName="trustedPublisher"/>
    <RemoveFolder Id="ProgramMenuDir" On="uninstall"/>
    <RegistryKey Root="HKLM" Key="Software\Microsoft\Silverlight">
      <RegistryValue Name="AllowElevatedTrustAppsInBrowser"
                     Type="integer" Value="00000001" KeyPath="yes" />
    </RegistryKey>
  </Component>
</DirectoryRef> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-23T06:58:29.833

此行为的根源可归结为 Windows Installer 体系结构。如您所知，WiX 是一套创建 Windows Installer 包的工具，也就是说，它必须在一定程度上反映这项技术的关键概念，将最奇怪和最荒谬的东西隐藏在语法糖后面。它在这项工作上做得非常好，从一个版本到另一个版本都在改进！

每个 Windows 安装程序包都必须包含一个`Directory`表。来自[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368295%28v=vs.85%29.aspx)：

> Directory 表必须指定一个根目录，其 Directory 列值等于 TARGETDIR 属性。

对应的 WiX 元素是：

```
<Directory Id="TARGETDIR" Name="SourceDir">
  ...
</Directory> 
```

因此，它必须在您的 WiX 创作中。如果您不打算在安装中包含任何目录/文件，则可以将组件放在此根`Directory`元素的正下方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T12:20:42.250

如果您将其直接放在 Product 下，则必须在 Component 元素上设置您自己的 Directory 属性，因为它是必需的。

从文档：

> 设置组件的目录。如果此元素嵌套在 Directory 元素下，则此值默认为父 Directory/@Id 的值。

事实证明，在 Windows Installer 参考中指出，[组件](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368007%28v=vs.85%29.aspx)需要有一个 directory_ 属性，该属性指向[目录表](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368295%28v=vs.85%29.aspx)中的记录，或者通过从[AppSearch](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367578%28v=vs.85%29.aspx)获得的值。如果 AppSearch 为空，我不确定这将如何解决。

# c++ - QI 在查询 IAMStreamConfig 时返回 E_NOINTERFACE

> ID：12072775
> 
> 赞同：0
> 
> 时间：2012-08-22T12:06:50.500
> 
> 标签：c++, directshow

我正在尝试`IAMStreamConfig`从集成摄像头上的输出引脚检索接口，但未能成功`E_NOINTERFACE`。

我使用 IntCam 作为测试设备，实际上我将有一个带有两个输出引脚的源过滤器，每个引脚都支持不同的配置。

这就是为什么我不确定 using`ICaptureGraphBuilder2::FindInterface`是一个选项的原因，因为我还没有弄清楚如何从特定的输出引脚获取接口。

```
CComPtr<IEnumPins> pEnum = NULL;
IPin* pPin = NULL;

HRESULT hr = pFilter->EnumPins(&pEnum);
if (FAILED(hr))
    return hr;

while (S_OK == pEnum->Next(1, &pPin, NULL))
{
   IAMStreamConfig* pAMStreamConfig;
   hr = pPin->QueryInterface(IID_PPV_ARGS(&pAMStreamConfig));
   if (FAILED(hr))
      return hr;
   // ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T12:18:27.300

`IAMStreamConfig`不是强制性接口，我可能会丢失它，尽管在相机过滤器上它几乎总是可用的（否则许多应用程序会拒绝使用没有此接口的设备）。也就是说，您应该仔细检查您查询的过滤器和引脚是否正确，代码片段看起来不错。

真正的相机通常是通过[`WDM Video Capture Filter`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390974%28v=vs.85%29.aspx)which has实现的，`IAMStreamConfig`但是由于您使用的是虚拟设备，因此可能会有所不同。

# windows - Windows Batch 循环虽然具有动态令牌计数的变量

> ID：12072777
> 
> 赞同：5
> 
> 时间：2012-08-22T12:06:52.623
> 
> 标签：windows, loops, dynamic, batch-file, token

在我的 Windows 批处理文件中，我有一些带有不同数量字符串的变量。例如：

```
set string="-start" "-end someOption" 
```

我通过以下方式计算字符串的数量：

```
Set count=0
For %%j in (%string%) Do Set /A count+=1
echo.Total count: %count% 
```

输出将是：

```
Total count: 2 
```

现在，我想启动应用程序的次数与变量中有字符串一样多，并且我想为应用程序提供当前字符串作为参数。我试过这个：

```
 FOR /L %%H IN (1,1,%COUNT%) DO ( 

    echo %%H
        FOR /F "tokens=%%H " %%I IN ("%string%") Do (
            echo %%I
            rem java -jar app.jar %%I
        )
    ) 
```

但不幸的是，这不起作用：这就是输出：

> 当前字符串的数量：1 "%H "" kann syntaktisch an dieser Stelle nicht verarbeitet werden. (%H "" 在这个地方不能在语法上使用) 当前字符串的数量：2 "%H "" kann syntaktisch an dieser Stelle nicht verarbeitet werden。

如何循环遍历变量“字符串”中的两个字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T12:13:59.437

您不能在 的选项字段中使用 FOR 参数或延迟扩展变量`FOR/F`。
但是您可以创建一个函数并在那里使用百分比扩展。

拆分是 delim 字符的效果，它是每个默认的空格和制表符，它们也适用于带引号的参数。
因此，我将您的分隔符更改为分号，然后就可以了。

```
set string="-start";"-end someOption" 
set count=0
For %%j in (%string%) Do Set /A count+=1
echo.Total count: %count%

FOR /L %%H IN (1,1,%COUNT%) DO ( 

    echo %%H
    call :myFunc %%H
)
exit /b
:myFunc
FOR /F "tokens=%1 delims=;" %%I IN ("%string%") Do (
  echo %%~I
  rem java -jar app.jar %%I
)
exit /b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:35:19.430

Ok I will try to make it more clearly.

The answer above helped me just a bit.

As I showed at the beginning of my question I have the following variable:

```
set string="-start" "-end someOption" 
```

I wanted to loop through this variable so that at the end I have two complete parameters: first one:

```
"-start" 
```

second one:

```
"-end someOption" 
```

But after calling the function the echos are:

```
"-start" 
```

(this is correct) and

```
"-end 
```

/this is wrong because he slits the string at the whitespace.

But at the end for starting my application I need two correct parameters. They should look like this: first parameter:

```
-start 
```

and second parameter with one option:

```
-end someoption 
```

So I need to eliminate the quotation marks and the second paramert must not be splitted at the whitemark.

# ruby-on-rails - 覆盖注册控制器时设计“未知操作”

> ID：12072779
> 
> 赞同：3
> 
> 时间：2012-08-22T12:07:14.247
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我正在尝试覆盖`Devise`注册控制器，这是我的设置：

**注册控制器.rb**

```
class RegistrationsController < Devise::RegistrationsController
  before_filter :authenticate_user!, :only => :token

  def new
    super
  end

  def create
    @request.env["devise.mapping"] = Devise.mappings[:user]
    @user = User.new(params[:user])

    if @user.save
      render 'create.js', :success => true
    else
      render 'create.js', :success => false
    end
  end
end 
```

**路线.rb**

```
(...)
devise_for :users, :controllers => {:sessions => 'sessions', :registrations => 'registrations'}
match 'registrations/create'        => 'registrations#create'   , :as => :user_register
# not matter if i'll put `match 'registrations/create'` line above or under the `devise_for` line
(...) 
```

这一切（当我将浏览器指向时`registrations/create`）给了我一个错误：

> ## 未知动作
> 
> 找不到路径“/registrations/create”的设计映射。这可能有两个原因：1）您忘记将您的路线包装在范围块内。例如： devise_scope :user do match "/some/route" => "some_devise_controller" end 2) 您正在测试绕过路由器的设计控制器。如果是这样，您可以明确告诉 Devise 使用哪个映射：@request.env["devise.mapping"] = Devise.mappings[:user]

我发现一些线程描述了类似的问题，但它们根本没有帮助。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T13:08:02.597

正如错误消息明确指出的那样，您需要将您的设计路线包装在一个块中，如下所示：

```
devise_scope :user do
  match 'registrations/create' => 'registrations#create', :as => :user_register
end 
```

设计不接受该块之外的路线。

# javascript - Jquery-autocomplete：如果未选择任何项目，则使 tab 键选择第一个项目

> ID：12072780
> 
> 赞同：7
> 
> 时间：2012-08-22T12:07:15.120
> 
> 标签：javascript, jquery, jquery-ui, jquery-events, jquery-ui-autocomplete

这个问题的**目标**是：**通过使用 jquery-autocomplete，如果没有选择任何项目，则使`tab`key 能够选择第一个项目。**

我实现的代码 (1) 有效，但我有一些疑问，我想澄清它们，或者如果可能的话，改进/更改代码 (1) 以实现我的目标。

我的疑问是：

我太早触发 ENTER：事件调度是异步的（不同的监听器被同步调用，但它是触发器的异步），所以我可能在监听器处理 DONE 之前触发它）。
因此，我在这里仍然对两个事件使用相同的对象，所以我可能会产生讨厌的副作用（如果我在第一次调度期间阻止默认值，那么第二个事件也会被阻止，因为它是相同的对象） .

有什么建议/意见吗？

PS：

1.  这是 jsfiddle 链接：http: [//jsfiddle.net/uymYJ/31/](http://jsfiddle.net/uymYJ/31/)。
2.  这个问题与[如何避免在这种情况下修改事件对象有关](https://stackoverflow.com/questions/12041811/how-to-avoid-to-modify-the-event-object-in-this-situation/12050471#12050471)。

* * *

(1)

```
$("#box").keydown(function(event){
    var newEvent = $.Event('keydown', {
        keyCode: event.keyCode
    });

    if (newEvent.keyCode !== $.ui.keyCode.TAB) {
        return;
    }

    newEvent.keyCode = $.ui.keyCode.DOWN;
    $(this).trigger(newEvent);

    newEvent.keyCode = $.ui.keyCode.ENTER;
    $(this).trigger(newEvent);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:14:50.840

我认为你需要这样的东西：

```
$("#box").keydown(function(event){
    var newEvent = $.Event('keydown', {
        keyCode: event.keyCode
    });

    if (newEvent.keyCode !== $.ui.keyCode.TAB) {
        return;
    }

    if (newEvent.keyCode == $.ui.keyCode.TAB) {
        // custom logic for tab
        newEvent.keyCode = $.ui.keyCode.DOWN;
        $(this).trigger(newEvent);
        return false;
    }

    // ...
}); 
```

# android - Android ContentProvider NOSQL 数据库

> ID：12072795
> 
> 赞同：0
> 
> 时间：2012-08-22T12:07:57.067
> 
> 标签：android, nosql, android-contentprovider, android-syncadapter

我正在尝试开发一个自定义的 contentprovider，它使用 NOSQL DB 来存储数据，因为 sqlite 的静态列模型不适合我的需要。

我发现 CouchDB 为 Android 提供了一个名为 TouchDB 的移动版本，我还找到了一个将它用于其内容提供程序的[示例](https://github.com/deepwinter/rhus-android) ，但我真的不明白那里发生了什么......

所以我想问一下是否有人可以为我提供一些帮助，让我可以正确地实现 NOSQL-DB（TouchDB 或其他任何东西）以与内容提供者一起工作。

谢谢你的帮助。

# c++ - OpenGL 3.0 中 glDrawPixels 的替代方案？

> ID：12072799
> 
> 赞同：4
> 
> 时间：2012-08-22T12:08:06.500
> 
> 标签：c++, opengl, gldrawpixels

所以我知道 glDrawPixels 已被弃用。有没有做同样事情的功能？我想过使用纹理，但它们是由当前矩阵修改的，与 glDrawPixels 绘制的像素不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:11:07.983

> 我想过使用纹理，但它们被当前矩阵修改

“当前矩阵”在 3.0 中已弃用，在 3.1+ 中也已删除。因此，如果您不使用`glDrawPixels`，则也不会使用矩阵函数。所以没什么好担心的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:22:47.310

您需要绘制一个四边形：

*   一个特定的 ModelViewProjection 矩阵，它将把它放在你想要的位置（正如 Nicol 所说，不再有“当前”矩阵）
*   一个简单的顶点着色器，它将使用所述矩阵来实际变换顶点
*   一个简单的片段着色器，它将对纹理进行采样
*   当然，足够的纹理坐标。

对于初学者，请使用单位矩阵和 X 和 Y 坐标介于 0 和 1 之间的网格。

您可能想要混合使用[http://www.opengl-tutorial.org/beginners-tutorials/tutorial-2-the-first-triangle/](http://www.opengl-tutorial.org/beginners-tutorials/tutorial-2-the-first-triangle/)和[http://www.opengl-tutorial.org/intermediate-tutorials /tutorial-11-2d-text/](http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-11-2d-text/)（虽然后一个应该在使用的矩阵方面进行改进）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T12:22:47.217

您可以使用片段着色器，其中的函数`gl_FragCoord`用于对矩形纹理进行采样。

或者，您可以使用更传统的方法，只需设置转换矩阵以近似窗口的像素坐标系，然后使用图像绘制带纹理的四边形。

# java - 找到子字符串，但正则表达式失败

> ID：12072816
> 
> 赞同：5
> 
> 时间：2012-08-22T12:08:51.097
> 
> 标签：java, regex

假设我有一些字符串，并在其上运行以下测试：

```
response.indexOf("</p:panelGrid>");
response.matches(".*</p:panelGrid>.*"); 
```

怎么可能`indexOf`找到子字符串（它不返回`-1`），但第二个测试中的正则表达式**不**匹配？

我在尝试编写一个测试来检查标记库是否在使用 Pax Web 的 JSF 中正确呈现时遇到了这个问题。在此测试之外，我无法重现此行为。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T12:14:09.360

`.`匹配除换行符之外的所有内容。您必须将您的正则表达式字符串更改为

```
"(?s).*</p:panelGrid>.*" 
```

然后它将永远匹配。

# javascript - Sencha Touch 2 缩放面板内容

> ID：12072819
> 
> 赞同：1
> 
> 时间：2012-08-22T12:08:56.630
> 
> 标签：javascript, extjs, zooming, sencha-touch-2

是否有任何用于捏放大 ST2 的插件。我需要在 sencha 面板中加载的 html 的简单缩放。欢迎任何想法！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T01:12:26.007

请在煎茶市场查看[PinchZoomImage](http://goo.gl/iUuyp.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:57:58.153

我认为没有任何可用的插件，但我确实偶然发现了一个看起来具有您正在寻找的功能的 git：[https ://gist.github.com/1002303](https://gist.github.com/1002303)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T19:59:24.823

您是否检查过 Sencha Touch 论坛中[带有轮播代码的捏缩放？](http://www.sencha.com/forum/showthread.php?197903-Pinch-Image-with-carousel-and-working-fine)

# php - 在单个查询中选择不同的年份和月份

> ID：12072820
> 
> 赞同：1
> 
> 时间：2012-08-22T12:08:57.877
> 
> 标签：php, mysql

如何在单个查询中从时间戳列中选择不同年份和不同月份，如下所示

我试过`select distinct year(sc_ts) as years from posts where user_id = 1 order by years asc`了，我不知何故无法将月份部分放在那里。或者这需要两个不同的语句和php处理。

我打算将其输出为

```
2009 - Mar, Apr, May
2010 - Apr, Jun, Jul 
```

ETC

```
"2009-03-22 16:07:48"
"2009-04-22 16:07:48"
"2009-05-22 16:07:48"
"2010-04-22 16:07:48"
"2010-06-22 16:07:48"
"2010-07-22 16:07:48"
"2011-01-22 16:07:48"
"2011-02-22 16:07:48"
"2011-05-22 16:07:48"
"2011-06-22 16:07:48"
"2011-08-22 16:07:48"
"2012-01-22 16:07:48"
"2012-02-22 16:07:48"
"2012-03-22 16:07:48"
"2012-04-22 16:07:48"
"2012-08-22 16:07:48" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T12:11:20.500

```
select distinct year(sc_ts) as years, group_concat(monthname(sc_ts)) as months from posts where user_id = 1 order by years asc 
```

编辑：我`month()`最初使用它给出了月份编号，使用`monthname()`返回月份的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T12:18:38.673

```
SELECT x.`Year`, GROUP_CONCAT(x.`Month`) AS Months
FROM
    (
        SELECT DISTINCT YEAR(sc_ts) AS `Year`, MONTHNAME(sc_ts) AS `Month`
        FROM
            `posts`
        WHERE
            user_id = 1
        ORDER BY
            MONTH(sc_ts)
    ) x
GROUP BY
    x.`Year`
ORDER BY
    x.`Year` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:24:53.457

尝试`SELECT distinct SUBSTRING(year(sc_ts), 6)`

# php - mysql返回多级数组

> ID：12072832
> 
> 赞同：4
> 
> 时间：2012-08-22T12:09:33.357
> 
> 标签：php, mysql, multidimensional-array

我正在使用 PHP 应用程序中相关的三个 MySQL 表。有很多问题的测试，问题有很多答案。我想做的是循环遍历数据，如下所示：

```
foreach($tests as $test)
{
    echo $test->testName;

    foreach($test->questions as $question)
    {
        echo $question->questionText;

        foreach($question->answers as $answer)
        {
            echo $answer->answerText;
        }
    }
} 
```

我想知道的是 MySQL 查询和 PHP 代码会以这种方式循环遍历它吗？

**编辑**MySQL 不能返回这样的数组，我应该说的是 MySQL + PHP 代码会是什么样子。

为清楚起见，表格是测试、问题和答案。questions 表包含一个 test_id 列，answers 包含一个 question_id

谢谢！

我希望找回的结构类似于：

```
array(
    'testName' = 'Test name string',
    'questions' = array(
        array(
            'questionId' = 1,
            'questionText' = 'Question string',
            'answers' = array(
                array(
                    'answerId' = 1,
                    'answerText' = 'Answer string'
                ),
                array(
                    'answerId' = 2,
                    'answerText' = 'Answer string'
                )
            )
        )
    )
); 
```

**编辑**

我目前的实现如下，我想做的是急切地加载数据而不是执行这么多的查询

```
$tests = getTests();

foreach($tests as $test){

    $questions = getQuestions($test->id);

    foreach($questions as $question){

        $answers = getAnswers($question->id);

        foreach($answers as $answer){

            // do answer things

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T12:28:54.603

```
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

$query = "SELECT testname, question, answer
    FROM tests 
    JOIN questions ON (tests.id = question.test_id)
    JOIN answers ON (questions.id = answers.id)
    WHERE 'your condition'
    ORDER BY tests.id, question.id"

$result = $mysqli->query($query); 
```

您可以使用 in_array 函数来获得您想要的结果（您可以制作数组或打印结果）。这是打印值的示例。（您可以使用 id 代替 name 来改进）

```
$tests_arr = array();
$questions_arr = array();

while( $row = $result->fetch_array(MYSQLI_ASSOC) )
{
    if(!in_array($row['testname'], $test_arr)
    {
        $test_arr[] = $row['testname'];
        echo $row['testname'];
    }

    if(!in_array($result['question'], $question_arr))
    {
        $questions_arr[] = $row['question'];
        echo $row['question'];
    }

    echo $row['answer'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:16:35.277

MySQL 不能以您想要的格式返回数组结构 - 它可以做的最好的事情是 2D 数组来表示列/行。

两种选择都将在 PHP 中实现。

1.  为每个测试运行一个查询；遍历每个测试并运行查询以获取此测试的所有问题；遍历每个问题并运行查询以获取该问题的答案。

例子：

```
// get each test
$tests = array();
$results = $mysqli->query('SELECT id, name FROM tests;');
while ($test = $results->fetch_object()) $tests[] = $test;
foreach ($tests as $t => $test) {
    // get all questions for this test
    $tests[$t]['questions'] = array();
    $results = $mysqli->query('SELECT id, name FROM questions WHERE test_id = ' . $test['id']);
    while ($question = $results->fetch_object()) $tests[$t]['questions'][] = $question;
    foreach ($tests[$t]['questions'] as $q => $question) {
        // get all answers for this question
        $tests[$t]['questions'][$q]['answers'] = array();
        $results = $mysqli->query('SELECT id, name FROM answers WHERE question_id = ' . $question['id']);
        while ($answer = $results->fetch_object()) $tests[$t]['questions'][$q][] = $answer;
    }
} 
```

2\. 使用 MySQL 连接运行单个查询并预先遍历结果列表以构建您想要的格式的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T12:25:49.847

在纯 SQL 中，您可以进行连接，但这会使您的行变平，行数将是测试 * 问题 * 答案。然后，您必须解析属性并将其映射到适当的对象。像这样的东西：

```
$sql = "SELECT * FROM tests t, questions q, answers a  WHERE q.t_id = t.id AND a.q_id = q.id";
$rows = // do your fetching, pdo, mysqli, whatever, just get the rows

$tests = array();
foreach($rows as $row) {
    // map test
    if(!isset($tests[$row['t_id']])) $tests[$row['t_id']] = array(
       // set test attributes here (without the questions)
    );

    // map question
    if(!isset($tests[$row['t_id']]['questions'][$row['q_id']])) = array(
       // set question attributes here (without the answers)
    );

    // map answer
    if(!isset($tests[$row['t_id']]['questions'][$row['q_id']]['answers'][$row['a_id']])) = array(
       // set answer attributes here 
    );
} 
```

$tests 数组现在应该具有您需要的层次结构，但一定要对此进行测试，但即使它不起作用，您也会明白这一点。

话虽如此，看看一些 ORM-s。对于一个最简单的（以一种好的方式）看看这个： http: [//phpmaster.com/database-interaction-made-easy-with-notorm/](http://phpmaster.com/database-interaction-made-easy-with-notorm/)

本教程很容易完成，最后你会得到你所要求的，一组具有属性和基于表关系的良好层次结构的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:20:49.080

你会`LEFT JOIN`这样的结果是这样的：

```
test1|question1|answer1
test1|question1|answer2
test1|question2|answer1
test1|question2|answer2
test2|question1|answer1 
```

然后你以这样一种方式循环遍历它，使它们总是按那个顺序出现，所以编写一个循环来获取一行，如果测试自上一个测试以来发生了变化，则移动到数组中的下一个测试。重复问题，最后添加答案。

一些伪代码

```
fetcharray()
if test > lasttest
  arraytest++
  arrayquestion = 0
elif question > lastquestion
  arrayquestion++

array[arraytest][arrayquestion][] = fetched array 
```

# xml - 错误：通过 XSLT 导出 excel

> ID：12072836
> 
> 赞同：1
> 
> 时间：2012-08-22T12:09:41.360
> 
> 标签：xml, xslt, export-to-excel

我正在通过导出 excel 文件`xml`并`xslt`收到此错误..尝试打开此文件时...这是日志文件

```
XML ERROR in Table
REASON: Bad Value
FILE:   C:\Documents and Settings\mayankp\Desktop\PrintCheckList.xls
GROUP:  Row
TAG:    Cell
ATTRIB: Index
VALUE:  0

XML ERROR in Table
REASON: Bad Value
FILE:   C:\Documents and Settings\mayankp\Desktop\PrintCheckList.xls
GROUP:  Row
TAG:    Cell
ATTRIB: Index
VALUE:  1

XML ERROR in Table
REASON: Bad Value
FILE:   C:\Documents and Settings\mayankp\Desktop\PrintCheckList.xls
GROUP:  Row
TAG:    Cell
ATTRIB: Index
VALUE:  2

XML ERROR in Table
REASON: Bad Value
FILE:   C:\Documents and Settings\mayankp\Desktop\PrintCheckList.xls
GROUP:  Row
TAG:    Cell
ATTRIB: Index
VALUE:  0

XML ERROR in Table
REASON: Bad Value
FILE:   C:\Documents and Settings\mayankp\Desktop\PrintCheckList.xls
GROUP:  Row
TAG:    Cell
ATTRIB: Index
VALUE:  1

XML ERROR in Table
REASON: Bad Value
FILE:   C:\Documents and Settings\mayankp\Desktop\PrintCheckList.xls
GROUP:  Row
TAG:    Cell
ATTRIB: Index
VALUE:  2 
```

任何帮助表示赞赏。

**编辑：**[在此处](http://pastebin.mozilla.org/1770372)查看完整的 XML

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T13:03:15.107

XML 示例不完整，但仔细查看，问题可能出在您的第二行

```
 <Row ss:Height="15.75" ss:StyleID="s62">
        <Cell ss:MergeDown="2" ss:StyleID="m57097196">
           <Data ss:Type="String">S/N</Data>
        </Cell>
        <Cell ss:MergeDown="2" ss:StyleID="m57097216">
           <Data ss:Type="String">PRIORITY</Data>
        </Cell>
        <Cell ss:MergeDown="2" ss:StyleID="m57097076">
           <Data ss:Type="String">ITEM </Data>
        </Cell>
        <Cell ss:MergeAcross="2" ss:StyleID="m57097176">
           <Data ss:Type="String">AUDIT TYPE </Data>
        </Cell>
        <Cell ss:MergeDown="2" ss:StyleID="m57097236">
           <Data ss:Type="String">STATUS </Data>
        </Cell>
        <Cell ss:MergeDown="2" ss:StyleID="m57097280">
           <Data ss:Type="String">REFERENCE </Data>
        </Cell>
        <Cell ss:MergeDown="2" ss:StyleID="m57097056">
           <Data ss:Type="String">AUDIT REMARKS</Data>
        </Cell>
     </Row> 
```

特别是**ss:MergeDown**和**ss:MergeAcross**属性。如果您查看[Microsoft Xml 电子表格参考](http://msdn.microsoft.com/en-us/library/office/aa140066%28v=office.10%29.aspx)，您将看到**ss:MergeAcross**它说以下内容：

> 指定从当前单元格开始合并的相邻单元格的数量（右侧，除非在从右到左模式下）。如上所述，索引不得重叠。如果存在重复，则行为未指定并且 XML 电子表格文档被视为无效。

因此，您可能会收到错误消息，因为以下单元格位于第 5 列中，并且与第 4 列中的单元格重叠，后者分布在以下两个单元格中。您需要将第五个单元格的索引显式设置为第 7 列。（注意在第五个单元格中使用 ss:Index="7"）。

```
 <Row ss:Height="15.75" ss:StyleID="s62">
        <Cell ss:MergeDown="2" ss:StyleID="m57097196">
           <Data ss:Type="String">S/N</Data>
        </Cell>
        <Cell ss:MergeDown="2" ss:StyleID="m57097216">
           <Data ss:Type="String">PRIORITY</Data>
        </Cell>
        <Cell ss:MergeDown="2" ss:StyleID="m57097076">
           <Data ss:Type="String">ITEM </Data>
        </Cell>
        <Cell ss:MergeAcross="2" ss:StyleID="m57097176">
           <Data ss:Type="String">AUDIT TYPE </Data>
        </Cell>
        <Cell ss:Index="7" ss:MergeDown="2" ss:StyleID="m57097236">
           <Data ss:Type="String">STATUS </Data>
        </Cell>
        <Cell ss:MergeDown="2" ss:StyleID="m57097280">
           <Data ss:Type="String">REFERENCE </Data>
        </Cell>
        <Cell ss:MergeDown="2" ss:StyleID="m57097056">
           <Data ss:Type="String">AUDIT REMARKS</Data>
        </Cell>
     </Row> 
```

此外，由于使用**ss:Mergedown**，将单元格设置为 2，这意味着接下来的两行将被占用。因此，您的 xml 中的下一个 Row 元素应更改为将索引显式设置为 5，以免重叠。

```
 <Row ss:Index="5" ss:Height="30">
        <Cell ss:StyleID="s76">
           <Data ss:Type="String">1</Data>
        </Cell> 
```

这应该有望解决您的问题。

# ios - 我是否使用正确的格式模式来解析日期？

> ID：12072842
> 
> 赞同：1
> 
> 时间：2012-08-22T12:09:58.473
> 
> 标签：ios, nsdateformatter, date-formatting

我在使用**NSDateFormatter**解析日期字符串时遇到问题。我已经将下面的方法方法实现为**NSDate**类别。输入是以下日期字符串*Thu, 22 Dec 2011 16:03:39 +0100*并使用以下模式解析*EEE，dd MMM yyyy HH:mm:ss ZZZ*

问题是该方法返回*nil*

```
+(NSDate*) dateFromString:(NSString*)dateString pattern:(NSString*)pattern
{
    NSDateFormatter *dateParser = [[NSDateFormatter alloc] init];
    [dateParser setDateFormat:pattern];

    NSDate *parsedDate = [dateParser dateFromString:dateString];

return parsedDate;
} 
```

我查看了 Stackoverflow 和 Internet 上的其他地方，但没有找到解决此问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:32:52.547

`NSDateFormatter`在区域设置方面非常聪明，例如 12/24 小时显示、月份和工作日名称等。如果您初始化日期格式化程序，它始终使用当前区域设置，但您可以手动设置区域设置。您可以使用`en_US_POSIX`区域设置标识符来获取不尊重区域设置并始终使用相同行为的日期格式化程序。

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
dateFormatter.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]; 
```

例如，如果您需要解析从服务器返回的日期字符串，这很方便（实际上是必需的）。

如果你想在你的应用程序中显示日期字符串，你不应该`-setDateFormat:`直接使用该方法，顺便说一句。使用`+dateFormatFromTemplate:options:locale:`方法获取正确的日期格式。

在某些语言中，月份写在一天之前，...

```
 NSString *dateFormat = [NSDateFormatter dateFormatFromTemplate:@"dd MMMM yyyy" options:0 locale:[NSLocale currentLocale]];
    [dateFormatter setDateFormat:dateFormat]; 
```

# ruby-on-rails - 需要帮助在 ubuntu 10.04 上安装 rvm

> ID：12072845
> 
> 赞同：0
> 
> 时间：2012-08-22T12:10:07.380
> 
> 标签：ruby-on-rails, ubuntu, rvm, ubuntu-10.04

我按照本教程的说明进行操作。 [http://coding.smashingmagazine.com/2011/06/21/set-up-an-ubuntu-local-development-machine-for-ruby-on-rails/](http://coding.smashingmagazine.com/2011/06/21/set-up-an-ubuntu-local-development-machine-for-ruby-on-rails/)

我一直在安装 RVM。

```
$ bash < <(curl -s https://rvm.beginrescueend.com/install/rvm)
$ cd
$ nano .bashrc
$ [[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm"
$ source .bashrc
$ type rvm | head -1 
```

错误消息：bash：类型：rvm：未找到

我逐行返回检查，发现 .rvm 文件夹从未被创建。我在另一个 ubuntu 机器上使用相同的教程，完全没有问题。无法弄清楚我这次做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:45:17.777

你可以试试

```
curl -L https://get.rvm.io | bash -s stable 
```

根据[rvm 文档](https://rvm.io/rvm/install/#explained)。祝你好运

# python - 如何将数据从一个 Django 应用程序发送到另一个应用程序？

> ID：12072850
> 
> 赞同：0
> 
> 时间：2012-08-22T12:10:25.320
> 
> 标签：python, html, django

这是我的问题。我需要将表单从一个 Django 应用程序发送到另一个（在不同的机器上）。考虑到换行符，这就是我发布数据的方式。

```
<form id="codeid" method="post" enctype="application/x-www-form-urlencoded" name="code" action="192.168.56.2:8000/api/comp/">
    <input id="textarea_1" name="content" cols="80" rows="15"></input>
    <input id="thebutton" type="button" value="Submit"  onclick="document.forms.codeid.submit();" /> 
</form> 
```

表单动作 ie`action="192.168.56.2:8000/api/comp/`由 url.py 处理：

```
urlpatterns = patterns('',
    (r'^time/$', current_datetime),
    (r'^time/192.168.56.2:8000/api/comp/$', comp2),
)
urlpatterns += staticfiles_urlpatterns() 
```

在views.py 中，我不知道要写什么来将表单发送到其他应用程序。我试图从表单中提取数据并使用如下 URL 发送：

```
data=request.POST['content']
redirect('http://192.168.56.2:8000/api/comp/'+data)
url = urllib2.urlopen('http://192.168.56.2:8000/api/comp/'+data)
tml = url.read() 
```

但我失去了换行符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:23:11.990

我认为您可以以更好的方式发送数据，例如使用 HTML 表单直接将数据发送到目标服务器等。

无论如何，您将数据与`urllib2.urlopen`行中的 URL 混合的方法非常糟糕，当然您会丢失换行符和许多其他字符。您应该在将数据添加到 URL 之前对其进行编码，如下所示：

```
encoded_data = urllib.urlencode({'content': 'Hello,\nIt is a sample content!'})
url = urllib2.urlopen('http://192.168.56.2:8000/api/comp/?' + encoded_data) 
```

# php - 想用php在后台发送电子邮件

> ID：12072851
> 
> 赞同：1
> 
> 时间：2012-08-22T12:10:27.227
> 
> 标签：php, symfony, redis

最近我正在研究symfony。我创建了一个简单的表单，并希望提交该表单并将响应作为电子邮件发送给用户。

在`index`我写如下：

```
 $product=new Product();
    $product->setName('rohit');
    $product->setPass('rohit');

    $form=$this->createFormBuilder($product)
    ->add('name','text')
    ->add('pass','password')
    ->getForm();

    $name='rohit';
        return $this->render('EnsNewBundle:Email:ind.html.twig',
    array('form'=>$form->createView(),'name'=>$name)); 
```

当我提交此表格时，应执行以下操作：

i) 它应该打印`hello`和 ii) 电子邮件进程应该在后台运行。

我试图写如下：

```
$client = new \Predis\Client();

      $client->lpush('emailid','ucerturohit@gmail.com');

      $u=$client->lrange('emailid',0,10);
  //notification_on_signup($u);

     var_dump($u);

    return $this->render('EnsNewBundle:Email:header.html.twig'); 
```

我应该纠正什么才能有效运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:34:01.630

创建一个单独的 PHP 脚本来执行后台工作，并在您的主脚本中调用此脚本。关键是 & 符号！

```
<?php
$command = "/usr/bin/php5 -f /var/www/my/php/file.php";

exec( "$command > /dev/null &", $arrOutput );
?> 
```

# java - 采用泛型类型参数的 Java 基因类

> ID：12072853
> 
> 赞同：2
> 
> 时间：2012-08-22T12:10:29.480
> 
> 标签：java, generics

例如我有：

```
interface Consumer<F extends FoodType>
interface Vegetarian extends Consumer<Grass>
interface Predator extends Consumer<Meat> 
```

我想要类似的东西：

```
class Feeder<C extends Consumer<F>> 
```

在类声明中使用`F`类型参数。`Feeder`目的是仅传递信息类型参数并从传递的参数中获取其他类型参数：

```
new Feeder<Vegetarian>().buyFood(bluegrassIsGrassAndCouldNotBeMeat) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:16:50.950

您可以使用：

```
 class Feeder<C extends Consumer<? extends FoodType>> 
```

或者简单地说：

```
 class Feeder<C extends Consumer<?>> 
```

但它们之间是有区别的。据我从你的问题中了解到（不是很清楚）你想要这两个中的一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:21:17.023

如果该类要使用两个泛型类型，即使它们是依赖的，它也将需要两个泛型参数。

```
class Feeder<C extends Consumer<F>, F extends FoodType>{} 
```

如果更灵活一点可能会有用。

```
class Feeder<C extends Consumer<? super F>, F extends FoodType>{} 
```

（Josh Bloch 使用首字母缩写词 PECS：生产者的`extend`；消费者的`super`。）

# android - MDPI 到 HDPI SystemUI.apk 移植

> ID：12072855
> 
> 赞同：0
> 
> 时间：2012-08-22T12:10:35.633
> 
> 标签：android, hdpi, mdpi

我正在尝试将 MDPI SystemUI.apk 移植到 HDPI。我已经反编译了文件，添加了这一行 -

```
<supports-screens android:anyDensity="true" /> 
```

到 AndroidManifest.xml，我也用所需的图像制作了 drawable-hdpi 文件夹，但它仍然从 drawable-mdpi 加载资源。有什么办法可以解决这个问题？

顺便说一句，Android 版本是 4.0.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:18:38.940

如果系统未配置为 HDPI，Android 将不会加载 HDPI 资源。

系统根据配置的显示 dpi 值确定其密度，然后尝试加载适当的资源。有一个系统属性`ro.sf.lcd_density`。如果将该值设置为 240，则设备将认为自己是 HDPI。（120 = 低，160 = 中，320 = x 高）

[http://wccftech.com/article/increase-screen-dpi/](http://wccftech.com/article/increase-screen-dpi/)应该告诉您如何更改该值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:14:51.407

好吧，android会根据其工作的设备调整其屏幕密度，如果您同时拥有HDPI和MDPI文件夹，它将为您的应用程序占用最合适的资源。请检查设备是否为 HDPI。

还将以下内容添加到支持屏幕标签。

```
<supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="true"
    android:anyDensity="true" >
</supports-screens> 
```

# flash - DVF 上的 Flash 文件全屏播放

> ID：12072857
> 
> 赞同：0
> 
> 时间：2012-08-22T12:10:38.560
> 
> 标签：flash, dvd

已创建一个具有 1200 x 800 像素的舞台的 Flash 电影。该作品以投影仪的形式出版并刻录在 dvd 上。

但是，当在不同的屏幕尺寸（大于 1200 像素）上单击全屏时，Flash 文件中的图像和文本会变得像素化。

是否有任何解决方案可以通过处理多屏问题来避免显示质量差的 Flash 作品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:21:37.227

我找到了解决方案：1）在您的闪存文件中添加代码

stage.displayState = StageDisplayState.FULL_SCREEN;

2）选择库中的所有图形文件，选择它们的属性，将允许平滑设置为是和压缩：JPEG。图像质量：100%

这是因为图像不再全屏像素化！

# ruby - 从 TestCase 调用 Sinatra 应用程序实例方法

> ID：12072865
> 
> 赞同：13
> 
> 时间：2012-08-22T12:11:00.963
> 
> 标签：ruby, sinatra, rack

*我在Sinatra*应用程序中有一个 util 方法，我想从我的`TestCase`.

问题是我不知道如何调用它，如果我只是使用`app.util_method`我有错误`NameError: undefined local variable or method 'util_method' for #<Sinatra::ExtendedRack:0x007fc0c43305b8>`

### my_app.rb：

```
class MyApp < Sinatra::Base
  # [...] routes methods

  # utils methods
  def util_method
    return "hi"
  end
end 
```

### my_app_test.rb：

```
require "my_app.rb"
require "test/unit"
require "rack/test"

class MyAppTest < Test::Unit::TestCase
  include Rack::Test::Methods

  def app
    MyApp.new
  end

  # [...] routes methods tests

  def test_util_method
    assert_equal( "hi", app.util_method )
  end
end 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-22T22:44:13.030

Sinatra在重新定义之前将[方法](https://github.com/sinatra/sinatra/blob/v1.3.3/lib/sinatra/base.rb#L1369-1370)[别名为`new``new!`](https://github.com/sinatra/sinatra/blob/v1.3.3/lib/sinatra/base.rb#L1369-1370)，因此最简单的解决方案是使用它：

```
def app
  MyApp.new!
end 
```

当然，我只是注意到，*在*我提出以下内容之后，我会留下来，因为它可能有用/信息丰富。

* * *

绕过 Sinatra 的一种可能[的方法是重新定义`new`方法并返回一个完整的 Rack 应用程序](https://github.com/sinatra/sinatra/blob/v1.3.3/lib/sinatra/base.rb#L1372-1377)，获取一个实例，你的实际基类是做“真实”`new`方法自己做的事情：

```
def app
  a = MyApp.allocate
  a.send :initialize
  a
end 
```

这有点小技巧，但它可能对测试有用。

另一种技术是“遍历”中间件堆栈，直到您进入课堂。以下内容有点脆弱，因为它依赖于所有涉及的中间件来使用该名称`@app`来引用堆栈中的下一个应用程序，但这很常见。

```
def app
  a = MyApp.new
  while a.class != MyApp
    a = a.instance_variable_get(:@app)
  end
  a
end 
```

不过，这不适用于尚未发布的 Sinatra 1.4（至少不适用于当前的 master，即[commit 41840746e866e8e8e9a0eaafc53d8b9fe6615b12](https://github.com/sinatra/sinatra/tree/41840746e866e8e8e9a0eaafc53d8b9fe6615b12)），因为`new`现在返回一个[`Wrapper`类](https://github.com/sinatra/sinatra/blob/41840746e866e8e8e9a0eaafc53d8b9fe6615b12/lib/sinatra/base.rb#L1767-1787)并且循环永远不会结束。在这种情况下，您可以直接从`@instance`变量中获取基类：

```
def app
  MyApp.new.instance_variable_get :@instance
end 
```

（请注意，最后一种技术可能会在最终的 1.4 版本之前发生变化）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T16:27:44.567

您遇到的问题是，MyApp.new 不返回 MyApp 的实例，而是包装您的应用程序的中间件实例（通常是 Rack::Head 或 Sinatra::ShowExceptions）。可以在线程[Sinatra 使用问题/机架应用程序](https://groups.google.com/forum/?fromgroups=#!topic/sinatrarb/Xbn6RYm2qT8 "Sinatra 使用问题/机架应用程序")中找到一个很好的解释。

我能想到的唯一解决方案是将您的实例方法更改为可以在没有实例本身的情况下调用的类方法。由于您的应用程序的实例可能会为每个请求重新实例化，因此在您的场景中，实例方法可能与类方法相比没有太多优势。

**编辑：**

在即将到来的 Sinatra 1.4 中，初始化将会改变。Sinatra::Base.new 将返回一个 Sinatra::Wrapper 实例，它公开了#settings 和#helpers。这可能有助于解决访问 Sinatra::Base 实例方法的问题。有关更多信息，请参阅[Sinatra 变更日志](https://github.com/sinatra/sinatra/blob/master/CHANGES)。

# java - Xerces - SchemaFactory 无法识别功能但验证器可以

> ID：12072867
> 
> 赞同：1
> 
> 时间：2012-08-22T12:11:04.703
> 
> 标签：java, xerces, xml-validation

我正在尝试为 Xerces XML 验证设置功能。我很难找到/理解哪些功能`SchemaFactory`对`Validator`.

我有以下代码：

```
SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_US_URI);
factory.setFeature("http://xml.org/sax/features/validation", true);

Schema schema = factory.newSchema(mySchemaList);
Validator validator = schema.newValidator;
validator.setFeature("http://xml.org/sax/features/validation", true); 
```

如果我执行上述操作，我会得到： `SAXNotRecognizedException: Feature 'http://xml.org/sax/features/validation`

但是，如果我将 注释掉`setFeature`，`SchemaFactory`设置该功能适用​​于`Validator`.

所以问题：

1.  为什么我可以在 上设置该功能，`Validator`但不能在 上设置`SchemaFactory`？
2.  我在哪里可以找到哪些功能适用于`Validator`和的文档`SchemaFactory`？

仅供参考：`SchemaFactory`我得到的是`com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory`

# 编辑

我尝试设置但没有成功的其他一些功能是：

`http://xml.org/sax/features/namespaces`

`http://xml.org/sax/features/namespace-prefixes`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:32:21.583

来自[setFeature 的 JavaDoc](http://docs.oracle.com/javase/6/docs/api/javax/xml/validation/SchemaFactory.html#setFeature%28java.lang.String,%20boolean%29)

> 为这个 SchemaFactory 设置一个特性，这个工厂创建的 Schemas，以及这些 Schemas 创建的 Validators 和 ValidatorHandlers。
> 
> 实现者和开发者应该特别注意 newSchema() 返回的特殊 Schema 对象是如何被处理的。在某些情况下，例如，当 SchemaFactory 和实际加载模式的类来自不同的实现时，可能无法自动继承 SchemaFactory 功能。开发人员应确保在这两个地方都明确设置了诸如安全处理之类的功能。

如您所见，由于某些限制，某些功能可能不会被继承。话虽如此，[Xerces 2.7.x 版本似乎有一个从 2.8.x 开始修复的错误](https://issues.apache.org/jira/browse/XERCESJ-1143)。

# oracle - Oracle APEX 中的数据加载

> ID：12072870
> 
> 赞同：0
> 
> 时间：2012-08-22T12:11:16.147
> 
> 标签：oracle, oracle-apex

我通过数据加载向导创建用于从 CSV 加载数据的页面。CSV 文件包含并非所有字段的数据，但此字段是必需的。

如何在 CSV 中不包含的字段中插入数据，例如，使用对另一个表的查询？

我的 APEX 版本是 4.1.1.00.23

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:28:14.407

您可以使用 Oracle SQL 做到这一点。

如果您要加载到的表有一个唯一 ID（假设您在 csv 中有大部分员工），您可以使用该 ID 合并或更新其他表中的数据。

对于这样的表...

```
empid,
ename,
zip_code
state_code 
```

示例：您可以使用 CSV 加载它

```
EMP:

empid,
ename,
zip_code 
```

然后使用此查询更新状态。

```
update emp tgt
   set state = (select state
                  from zip_code_lookup src
                  where src.zip_code = tgt.zip_code
               ); 
```

如果有不止一列需要更新，我更喜欢使用合并命令。

[http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9016.htm#SQLRF01606](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9016.htm#SQLRF01606)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-20T07:18:21.093

您可以参考此链接以获取有关使用数据加载向导将数据加载到多个表的更多信息[http://vincentdeelen.blogspot.in/2014/03/data-load-for-multiple-tables.html](http://vincentdeelen.blogspot.in/2014/03/data-load-for-multiple-tables.html)

# java - Benefit of method hiding in java

> ID：12072877
> 
> 赞同：4
> 
> 时间：2012-08-22T12:11:51.177
> 
> 标签：java, overriding, method-hiding

I have read about method hiding concept in Java but I am not sure I understand the advantages. In which cases would method hiding be useful?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T12:16:20.177

You can read more here [http://docs.oracle.com/javase/tutorial/java/IandI/override.html](http://docs.oracle.com/javase/tutorial/java/IandI/override.html)

In short, the benefit is that you can implement a static method in a subclass which has the same signature as a static method in a superclass. If you could not do this, you couldn't add such methods to sub classes, and if you added such a method to a superclass all its subclasses would fail to compile.

BTW: You can make a static method not allow hiding by making it final.

```
class Superclass {
    public static final void method() { }
}

class Subclass extends Superclass {
    public static void method() { } // doesn't compile
} 
```

to allow a method to be hidden you can make it non-final

```
class Superclass {
    public static void method() { }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T12:20:17.233

There is no "benefit" to this, it is simply how the language specification decided to deal with situations when static methods of related classes happen to have the same signature. The language designers found no sensible way to provide an "override" functionality¹, so they took the easy way out.

* * *

¹ There is a way to make overrides of static methods work on an abstract OO level, as evidenced by the way it is done in Objective-C. However, the alternative is harder to understand.

# java - Netbeans 菜单和 i18n

> ID：12072878
> 
> 赞同：0
> 
> 时间：2012-08-22T12:11:51.633
> 
> 标签：java, netbeans, internationalization, netbeans-7

我有一个 netbeans 项目，我想将它国际化。我有一个作为向导的菜单，如何从包中上传数据而不是其中的字符串。

这是它现在的样子：

```
@ActionID(category = "Wizard", id = "com.xxx.xxx.EntWizWizardAction")
@ActionRegistration(iconBase = "com/xxxx/resources/wizard.png",
displayName = "Entities Wizard")
@ActionReferences({
@ActionReference(path = "Menu/Wizard", position = 0),
@ActionReference(path = "Toolbars/Wizard", position = 0)
}) 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T14:28:41.500

Netbeans 自动为您执行国际化此页面[这里](https://netbeans.org/kb/docs/java/gui-automatic-i18n.html)解释得很好 不确定这是否是您要找的

基本总结：开启自动国际化

1.在导航窗口中选择表单的根节点。

2.在“属性”窗口中，选中“自动国际化”属性中的复选框。

如果您需要将 Bundle.properties 文件放在不同的位置，可以单击 Properties Bundle File 右侧的省略号 (...) 按钮并选择一个位置或直接在属性的文本字段中键入路径。

3\. 在 Projects 窗口中，双击 Projects Window 中的 Bundle.properties 节点或右键单击该节点并选择 Edit。

属性文件在源代码编辑器中打开。如您所见，为 Form FindDialog.java 生成了所有适当的键和值。（每个键的名称是由表单文件名和组件变量名衍生而来的。例如，键FindDialog.jLabel1.text 是为一个放在表单文件FindDialog中变量名称为jLabel1的组件生成的。值jLabel1代表组件的本例中的文本属性。

# c# - 小型桌面应用程序如何与 ASP.NET 网页通信？

> ID：12072880
> 
> 赞同：1
> 
> 时间：2012-08-22T12:11:58.613
> 
> 标签：c#, asp.net, winforms

我已经构建了一个小型 Windows 应用程序，它可以找到计算机的 MAC 地址。我也有一个 ASP.NET 网页。当我的*登录*页面加载时，我正在运行该可执行文件。

我正在尝试获取 MAC 地址值。我怎样才能做到这一点？

我的桌面应用程序可以将该值返回到我的网页吗？

这是我到目前为止所尝试的。

**桌面应用程序代码：**

```
public string GetSystemMACID()
{
    string systemName = System.Windows.Forms.SystemInformation.ComputerName;
    try
    {
        ManagementScope theScope = new ManagementScope("\\\\" + Environment.MachineName + "\\root\\cimv2");
        ObjectQuery theQuery = new ObjectQuery("SELECT * FROM Win32_NetworkAdapter");
        ManagementObjectSearcher theSearcher = new ManagementObjectSearcher(theScope, theQuery);
        ManagementObjectCollection theCollectionOfResults = theSearcher.Get();

        foreach (ManagementObject theCurrentObject in theCollectionOfResults)
        {
            if (theCurrentObject["MACAddress"] != null)
            {
                 string macAdd = theCurrentObject["MACAddress"].ToString();
                 return macAdd.Replace(':', '-');
            }
        }
    }
    catch (ManagementException e)
    {
    }
    catch (System.UnauthorizedAccessException e)
    {

    }
    return string.Empty;
} 
```

返回值只是分配给 a `Label`。

如果可能的话，谁能建议我？欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:21:57.953

您可以将站点设置为接受名为 MACAddress 的查询参数。将桌面应用程序 POST 到网站；发布 cookie 的值。这可能会有所帮助：

```
using System.Net;

...

var httpWebRequest = (HttpWebRequest)WebRequest.Create(url);
httpWebRequest.UseDefaultCredentials = true;
httpWebRequest.ContentType = "application/x-www-form-urlencoded";
httpWebRequest.Method = "POST";

byte[] requestBytes = Encoding.UTF8.GetBytes(queryString);
httpWebRequest.ContentLength = requestBytes.Length;

using (var requestStream = httpWebRequest.GetRequestStream())
{
    requestStream.Write(requestBytes, 0, requestBytes.Length);
    requestStream.Close();
} 
```

查询字符串看起来像

```
"MACAddress=" + macAdd 
```

-------------根据要求更新---------------

在您的桌面应用程序中，添加 using 语句。您可能还需要在解决方案资源管理器中添加对 Dll 的引用。

然后，创建一个名为 PostMacAddress 的方法，如下所示：

```
public void PostMacAddress(string url, string macAdd)
{
   var httpWebRequest = (HttpWebRequest)WebRequest.Create(url);
   httpWebRequest.UseDefaultCredentials = true;
   httpWebRequest.ContentType = "application/x-www-form-urlencoded";
   httpWebRequest.Method = "POST";

   var queryString = "MACAddress=" + macAdd; 

   byte[] requestBytes = Encoding.UTF8.GetBytes(queryString);
   httpWebRequest.ContentLength = requestBytes.Length;

   using (var requestStream = httpWebRequest.GetRequestStream())
   {
      requestStream.Write(requestBytes, 0, requestBytes.Length);
      requestStream.Close();
   }
} 
```

我不确定你不理解的是什么（不是故意的）。我在这里进行了简化，但是，POST 是一种用于将数据发送到网站的 HTTP 协议。另一种是 GET（读取数据的协议）。

希望有帮助！

--------更新以显示网页端......------------

在您的 Page_Load 方法中，您需要像这样获取 QueryString：

```
protected void Page_Load(object sender, EventArgs e)
{
     if (!String.IsNullOrEmpty(Request.QueryString["MACAddress"])
         lblMacAddress.Text = Request.QueryString["MACAddress"];
} 
```

# php - 如何在 PHP 和 JS 中的并发会话之间进行通信？

> ID：12072882
> 
> 赞同：5
> 
> 时间：2012-08-22T12:12:05.460
> 
> 标签：php, javascript, jquery, concurrency, ipc

我有 PHP 服务器，我需要在其中更新客户端 A 的某些客户端 B 操作，目前它已完成。它通常是如何完成的？

我目前的解决方案是：

1.  A 对此表示公开`$.ajax(...).done(function myCallBack(){...});`呼吁。
2.  当 A 在其中时，`myCallBack(){...}`它会发出另一个`$.ajax(...).done(function myCallBack(){...});`. 这样，与服务器的通信就可以随时接收新信息
3.  PHP 将不得不不断检查会话间通信文件以将数据传输到/从两个并发会话

保持`$.ajax(...).done(function myCallBack(){...});`开放（并一直产生新的）是这样做的方法吗？

对于会话间通信 - 有没有办法发出事件或类似的信号（而不是持续监视某些文件 [浪费资源！]）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T21:42:57.013

这就是我解决它的方法：

客户端***A***在 PHP 服务器端（会话）留下一个 open `ajax`call: ， ***A***锁定using并等待。`$.ajax(...).done(function myCallBack(){...});`**`semaphore``sem_acquire($semaphore_A)`**

 **客户端***B***`$semaphore_A`使用删除信号量`sem_remove($semaphore_A)`，从而释放返回客户端 JS 回调的***A。***`myCallBack()`

当然，它非常简单，我使用[共享内存（例如`shm_attach()`）](http://php.net/manual/en/function.shm-attach.php)在进程之间交换状态和数据。

## 对于其他坚持使用此技术的开发人员：

what took me so long to debug it, is the fact the I opened a session (`session_start()`) and didn't close it (`session_ write_ close()`) - which locked other processes and prevented any concurrency !

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:16:25.057

客户端 A 将向服务器发送数据，客户端 B 需要轮询服务器以请求更改。当有变化时，客户 B 会在下一次民意调查中得到它们。**

# html - 在图像悬停时显示一个 div 区域，其中包含表单

> ID：12072885
> 
> 赞同：2
> 
> 时间：2012-08-22T12:12:11.813
> 
> 标签：html

我希望在图像悬停时出现 div 框，并且用户可以从该 div 中选择一个选项。

```
<a class="show_img3" href="frequenz?link=3" class="btn">
  <img style="padding-top: 8px;padding-bottom: 26px;" src="<?php echo bloginfo( 'template_url' );?> /img/bouquet/2.png">
  <span class="bqy_no">BRAUCHE MEHR</span></a>
<div class="hide_img3"><a href=#>2</a><br><a href="#">3</a></div> 
```

我的问题是我无法选择一个选项，因为如果我尝试悬停它就会消失。

这是[js小提琴](http://jsfiddle.net/m3qLx/)

我已经更新了小提琴以更准确地需要什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:18:07.617

我刚刚对此进行了测试，并且可以正常工作：

```
$(document).ready(function(){

    $('.show_img3').hover(function(){
        $('.hide_img3').show();
    });
    $('.close a').click(function(){
        $('.hide_img3').hide();
    });
});​ 
```

打开后，您必须单击 X 将其隐藏。

为您更新：

[http://jsfiddle.net/m3qLx/7/](http://jsfiddle.net/m3qLx/7/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T12:30:19.290

试试这个[小提琴](http://jsfiddle.net/gajjuthechamp/m3qLx/9/)

只是放置了一个父 div 并对其应用了一个额外的类。

您的 Html 和 css 非常杂乱无章，请使其可读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T12:17:37.517

用 jQuery 代替。在那里，您可以轻松地说，一旦用户将鼠标悬停在链接/图像上，div 就会保留。

下面是它的工作原理：

```
$('.show_img3').mouseover(function(){
    $('.hide_img3').show();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T12:18:28.627

你应该使用jquery

[http://jsfiddle.net/m3qLx/8/](http://jsfiddle.net/m3qLx/8/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T12:20:12.370

我会使用 jQuery 来解决这个问题。
如果我理解正确，那么具有类 hide_img3 的 div 是不可见的，但是当我指向标签中的 img 时，div 变得可见，是吗？为此，您可以使用此代码。

```
$('.show_img3').hover(function () {
    $('.hide_img3').fadeIn(1000);
}, function () {
    $('.hide_img3').fadeOut(1000);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T12:21:38.630

“如果我试图悬停它就会消失”

如果你想使用纯 CSS，你需要一个底层的包装器，它包含锚点和 div。如果悬停状态应用于该包装器，则该框将保持打开状态。

# linux - 在 Linux 中使用 xGrabPointer 锁定鼠标指针

> ID：12072886
> 
> 赞同：1
> 
> 时间：2012-08-22T12:12:15.477
> 
> 标签：linux, mouse, x11, xgrabpointer

`X11`当在没有任何窗口的终端上运行的应用程序中按下鼠标按钮时，我正在使用它来获取鼠标位置。

**获取鼠标位置：**

```
Display *dpy;
Window root, child;
int rootX, rootY, winX, winY;
unsigned int mask;
dpy = XOpenDisplay(NULL);
XQueryPointer(dpy,DefaultRootWindow(dpy),&root,&child,
             &rootX,&rootY,&winX,&winY,&mask); 
```

现在我想用来`XGrabPointer()`锁定鼠标，使其不与桌面上的对象（窗口、图标和停靠栏）交互。[这](http://tronche.com/gui/x/xlib/input/XGrabPointer.html)是 XGrabPointer 的文档，但我似乎不明白如何使用它以及要传递哪些参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:01:10.110

这是似乎对我有用的正确格式。

```
int g=XGrabPointer(dpy,DefaultRootWindow(dpy), true, ButtonPressMask |
                 ButtonReleaseMask |
                 PointerMotionMask |
                 FocusChangeMask |
                EnterWindowMask |
                  LeaveWindowMask,GrabModeAsync,GrabModeAsync, None, None, CurrentTime); 
```

# ruby-on-rails - 如何获取我扩展的关联对象的 ID？

> ID：12072889
> 
> 赞同：0
> 
> 时间：2012-08-22T12:12:29.407
> 
> 标签：ruby-on-rails, ruby

我有这样的事情：

```
class Person < ActiveRecord::Base

has_many :things do 
        def [](kind)
            find(:first, :conditions => ["kind = ?", kind.to_s])
        end
    def []=(kind, config)
        thing = self[kind]

        if thing.nil?
            #create  new thing
            ap self # prints all things that person has
        else
            # update 
        end
    end
end 
```

使用上面的代码，我可以做类似`person.things[:table]`的事情，它会找到一个带有 person_id 的东西，不管这个人的 id 是什么，以及一种表格。第一种方法很好。

这是我不知道如何实现的第二种方法。如果我想设置一个表的配置，我想这样做`person.things[:table] = {:my => "config"}`

如果表已经存在，那就没问题了。但是如果我想创建一个新的`thing`呢？

通常，创建一个事物应该是这样的：

```
thing = Thing.new({
  person_id => person[:id],
  kind => "table"
  config => {}
}) 
```

但是，由于我正在做一个关联扩展，并且想要创建一个新对象，我如何获取人员 ID？

使用
ruby​​ 1.8.7
rails 2.3.14

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:26:04.667

我最近没用过这个，你试过了吗

```
proxy_association.owner 
```

在扩展内？我相信这应该返回`Person`。

文档：[RoR 指南](http://guides.rubyonrails.org/association_basics.html#association-extensions)。

**编辑**：我刚刚注意到在您的示例中， a`Person`不是 ActiveRecord 模型？那是遗漏吗？

对于 Rails 2.3.14，您想使用[AssociationProxy 的](http://apidock.com/rails/v2.3.8/ActiveRecord/Associations/AssociationProxy) `proxy_owner`方法。然后就做`things.proxy_owner[:id]`

# sharepoint - 组中不同的 XSLT 计数（数据视图 Web 部件）

> ID：12072894
> 
> 赞同：0
> 
> 时间：2012-08-22T12:12:44.943
> 
> 标签：sharepoint, xslt, dataviewwebpart

我正在研究 SP 2010 中的数据视图 Web 部件，以汇总来自子站点的一些信息。这些站点包含项目任务列表，这些列表具有分配给用户的任务。客户希望看到一个汇总，该汇总将根据用户是否分配了任务列出项目。由于一个项目可以有多个任务，因此一个项目可能会显示在汇总中的多个用户下，具体取决于哪些任务分配给了哪些用户。

长话短说，我需要一种方法来**为每个用户选择不同项目的数量**。

xml结构是这样的：

```
<Rows>
  <Row Project="Project 1" TaskID="1" AssignedTo="Worker A" />
  <Row Project="Project 1" TaskID="2" AssignedTo="Worker B" />
</Rows> 
```

由此，我希望项目计数如下：
工人 A：1
工人 B：1

我正在尝试以下公式：

```
count($nodeset[not(@Project=preceding-sibling::Row/@Project) and @AssignedTo = current()/@AssignedTo]) 
```

这将为工人 A 返回 1 个项目的计数，但为工人 B 返回 0，因为已经为工人 A 计算了项目 1。

我对 xslt 了解不多，但据我了解，使用 current() 并不是最资源友好的方法。我试图做 muenchian 分组，但我无法让它工作。不过愿意再试一次。任何建议都会有所帮助，因为我再次对 xslt 感到厌恶。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:13:29.517

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kWorker" match="@AssignedTo" use="."/>
 <xsl:key name="kProjByWorker" match="@Project" use="../@AssignedTo"/>
 <xsl:key name="kProjWorker" match="@Project" use="concat(.,'+',../@AssignedTo)"/>

 <xsl:template match="/*">
  <xsl:apply-templates select=
  "//@AssignedTo
     [generate-id()
     =
      generate-id(key('kWorker',.)[1])
      ]"/>
 </xsl:template>

 <xsl:template match="@AssignedTo">
  <xsl:value-of select="concat('&#xA;',.,': ')"/>

  <xsl:value-of select=
   "count(
     key('kProjByWorker', .)
       [generate-id()
       =
        generate-id(key('kProjWorker', concat(.,'+',current()))[1])]
     )"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档**（所提供文档的更具挑战性的版本）时：

```
<Rows>
  <Row Project="Project 1" TaskID="1" AssignedTo="Worker A" />
  <Row Project="Project 1" TaskID="2" AssignedTo="Worker B" />
  <Row Project="Project 1" TaskID="2" AssignedTo="Worker A" />
  <Row Project="Project 2" TaskID="1" AssignedTo="Worker A" />
</Rows> 
```

**产生想要的正确结果**：

```
Worker A: 2
Worker B: 1 
```

**说明**：

使用**[Muenchian 分组方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**两次：查找所有不同的工人，然后找到分配给该工人的不同项目。

# uinavigationcontroller - 如何记录导航控制器附带的后退按钮

> ID：12072895
> 
> 赞同：0
> 
> 时间：2012-08-22T12:12:48.770
> 
> 标签：uinavigationcontroller

我正在使用创建一个新视图

```
[[self navigationController]pushViewController:newViewController animated:YES]; 
```

新视图 (newViewController) 堆叠在前一个视图的顶部，并带有一个后退按钮。我需要访问这个后退按钮来覆盖它。首先，了解如何在按下后退按钮时对字符串进行 NSLog 处理将有很大帮助。

最好的，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:29:09.263

我自己找到了答案。我必须在 viewDidLoad 函数中创建一个新的后退按钮，并添加一个选择器。

```
-(void) viewDidLoad
{
[super viewDidLoad];

    UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"myTitle"
                                                                   style:UIBarButtonItemStyleBordered
                                                                  target:self
                                                                  action:@selector(mySelector:)];

    self.navigationItem.leftBarButtonItem = backButton;
} 
```

然后选择器：

```
-(void)mySelector
{

NSLog(@"backButton pushed");

} 
```

# c++ - 生活问题游戏，C++

> ID：12072898
> 
> 赞同：-1
> 
> 时间：2012-08-22T12:13:04.300
> 
> 标签：c++, conways-game-of-life

我的人生游戏任务有问题。有两件事不能正常工作：

1.  游戏运行了太多代（输入数字的两倍）
2.  它没有正确更新世代：预定状态 2 是静态状态。然而，这也会消亡。

我检查并重新检查了我的生死状况，并将它们与互联网上的大量示例进行了比较，但我找不到任何东西。任何意见或指针都非常感谢！:)

## 这是代码：

函数.cpp：

```
#include <iostream>
#include <ctime>
#include "functions.h"

using namespace std;

void dspIntroMenu()
{
    cout << "Welcome to the Game Of Life! Please make a choice below" << endl << endl;
    cout << "Press \"P\" to play!" << endl;
    cout << "Press \"R\" to read more about the Game Of Life." << endl;
    cout << "Press \"Q\" to quit." << endl;
    cout << endl << "Choice: ";
}

void whatIs()
{
    cout << "The game of life ........";
}

void playMenu()
{
    cout << "Press \"P\" to choose from predetermined initial states." << endl;
    cout << "Press \"R\" to randomize." << endl;
    cout << endl << "Choice: ";
}

void dispPredStates()
{
    cout << "Please choose between the following states" << endl << endl;
    cout << "    State 1" << endl << "--------------" << endl;
    cout << "   1 0 1 1" << endl << "   0 0 0 0" << endl << "   1 0 1 0" << endl << "   0 1 1 1" << endl << endl;

    cout << "    State 2" << endl << "--------------" << endl;
    cout << "   1 1 1 0" << endl << "   0 1 1 1" << endl << endl;

    cout << "    State 3" << endl << "--------------" << endl;
    cout << "   0 1 0 1" << endl << "   1 1 0 0" << endl << "   0 1 0 1" << endl << "   1 1 1 0" << endl << endl;
} 
```

函数.h：

```
#ifndef HEADER_H
#define HEADER_H

void dspIntroMenu();
void whatIs();
void playMenu();
void dispPredStates();
int neighbours(int i, int j, int (*game)[21], int x, int y);

#endif 
```

in4.cpp，“主要”

```
#include <iostream>
#include <ctime>
#include <cstdlib>
//#include <windows.h>
#include "functions.h"

using namespace std;

int main()
{
    static int size = 22;
    int neighAlive, go=0, gen;
    int game[size][size];
    int gameTemp[size][size];
    char mChoice;

    //Fyll matriserna med nollor:
    for (int i=0; i<=size-1; i++)
    {
        for (int j=0; j<=size-1; j++)
        {
            game[i][j] = 0;
            gameTemp[i][j] = 0;
        }
    }
    //%-----------------------------%

    dspIntroMenu();
    cin >> mChoice;

    while (go==0)
    {
        char pMenuChoice;
        int psChoice, help;

        switch (mChoice)
        {
            case 'p':
            case 'P':
                cout << "How many generations do you wish to view?: ";
                cin >> gen;
                cout << endl << endl;
                playMenu();
                cin >> pMenuChoice;

                switch (pMenuChoice)
                {
                    case 'p':
                    case 'P':
                        dispPredStates();
                        cout << "Choice: ";
                        cin >> psChoice;
                        if (psChoice == 1)
                        {
                            game[9][9] = 1; game[9][10] = 0; game[9][11] = 1; game[9][12] = 1;
                            game[10][9] = 0; game[10][10] = 0; game[10][11] = 0; game[10][12] = 0;
                            game[11][9] = 1; game[11][10] = 0; game[11][11] = 1; game[11][12] = 0;
                            game[12][9] = 0; game[12][10] = 1; game[12][11] = 1; game[12][12] = 1;
                        }
                        else if (psChoice == 2)
                        {
                            game[10][9] = 1; game[10][10] = 1; game[10][11] = 1; game[10][12] = 0;
                            game[11][9] = 0; game[11][10] = 1; game[11][11] = 1; game[11][12] = 1;
                        }
                        else
                        {
                            game[9][9] = 0; game[9][10] = 1; game[9][11] = 0; game[9][12] = 1;
                            game[10][9] = 1; game[10][10] = 1; game[10][11] = 0; game[10][12] = 0;
                            game[11][9] = 0; game[11][10] = 1; game[11][11] = 0; game[11][12] = 1;
                            game[12][9] = 1; game[12][10] = 1; game[12][11] = 0; game[12][12] = 0;;
                        }
                        break;
                        go=1;
                    case 'r':
                    case 'R':
                        srand(time(0));
                        for(int i=9; i<=12; i++)
                        {
                            cout << endl;
                            for (int j=9; j<=12; j++)
                            {
                                help = rand() % 3;
                                if (help == 2)
                                {
                                    game[i][j] = 0;
                                }
                                else {game[i][j] = 1;}

                                //cout << game[i][j] << " " << endl;
                            }
                        }
                        break;
                }
                go=1;
                break;

            case 'r':
            case 'R':
                whatIs();
                break;

            case 'q':
            case 'Q':
                return 0;

            default:
                cout << "Please press \"P\", \"R\" or \"Q\": ";
                break;
        }
        break;
    }

    //The real game starts here!
    for (int k=0; k<=size-1; k++)
        {
            for (int l=0; l<=size-1; l++)
            {
                cout << game[k][l] << " ";
            }
            cout << endl;
        }
        cin.ignore(1024, '\n');
        cout << "Press enter to continue...";
        cin.get();
        //system("pause");
        //system("cls");

    for (int tid=1; tid<=gen; tid++)
    {
        for (int i=1; i<=size-2; i++)
        {
            for (int j=1; j<=size-2; j++)
            {
                neighAlive = game[i-1][j] + game[i+1][j] + game[i][j-1] + game[i][j+1] + game[i-1][j-1] + game[i+1][j-1] + game[i-1][j+1] + game[i+1][j+1];
                if ((game[i][j] == 1 && neighAlive < 2) || (game[i][j] == 1 && neighAlive > 3))
                {
                    gameTemp[i][j] = 0;
                }
                else if (game[i][j] == 0 && neighAlive == 3)
                {
                    gameTemp[i][j] = 1;
                }

            }
            //cout << endl;
        }
        for (int k=0; k<=size-1; k++)
        {
            for (int l=0; l<=size-1; l++)
            {
                game[k][l] = gameTemp[k][l];
                cout << game[k][l] << " ";
            }
            cout << endl;
        }
        //Sleep(1000);
        //system("pause");
        //system("CLS");
        cin.ignore(1024, '\n');
        cout << "Press enter to continue...";
        cin.get();
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T12:18:46.650

```
 break;
                     go=1; 
```

> **你的 go 永远无法到达**，它将永远循环。休息前放置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T12:38:56.687

我在这里看到了一个逻辑缺陷

```
 if ((game[i][j] == 1 && neighAlive < 2) || (game[i][j] == 1 && neighAlive > 3))
        {
            gameTemp[i][j] = 0;
        }
        else if (game[i][j] == 0 && neighAlive == 3)
        {
            gameTemp[i][j] = 1;
        } 
```

当语句`gameTemp[i][j]`中的条件都不成立时，会初始化什么？`if`

# sencha-touch-2 - 从控制器加载存储

> ID：12072902
> 
> 赞同：0
> 
> 时间：2012-08-22T12:13:17.917
> 
> 标签：sencha-touch-2

**控制器**

```
if(rec.data.category == "TestLinksList") {

    /* Assign new store before loading view */  

    /* ----- Start: Code not working ----- */       
    var testStore = Ext.getStore('linksStore');
    testStore.load();
    /* ----- End: Code not working ----- */     

    };

this.getHome().push({
    xtype : rec.data.category,
    // Assign testStore here
}); 
```

上述函数是在点击列表项时调用的。如果类别是“TestLinksList”，那么我必须分配一个新商店并使用“push”方法显示和显示视图。

谁能告诉我如何为控制器中的视图分配商店。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:22:56.267

你可以这样做（假设你的 xtype extends `Ext.List`）：

`this.getHome().push({ xtype: rec.data.category, store: testStore });`

# css - GWT - CSS 样式

> ID：12072903
> 
> 赞同：0
> 
> 时间：2012-08-22T12:13:22.077
> 
> 标签：css, gwt

在 GWT 中，在我的工作中有 flex 表，在每个 flex 表单元格中都有一个垂直面板，我想删除垂直面板边框
我试过 getElement().getStyle().clearBorderColor() 但它不起作用
并且在使用时firebug，发现它采用 flex 表格样式？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:47:49.480

您可能需要将 !important 添加到您的 CSS 样式中。

```
.verticalPanel {
 border: none !important;
} 
```

您还可以考虑使用具有易于覆盖的资源实例的单元表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:03:52.220

**用这个**

```
yourVerticalPanel.getElement().getStyle().setBorderStyle(BorderStyle.HIDDEN); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:21:56.097

获取它的类/ID 并编写另一种样式来覆盖默认样式。

# r - 整形台的性能

> ID：12072905
> 
> 赞同：2
> 
> 时间：2012-08-22T12:13:41.590
> 
> 标签：r, reshape, tapply, reshape2

我怎样才能从这样的表中走出来：

```
 ID  Day  car_id value
  1   1    1      0
  1   1    2      4
  1   2    1      1
  1   3    2      0
  2   1    3      0
  2   2    3      2
  2   3    3      0
  ... 
```

对这样的人？我尝试使用 reshape2 包中的 dcast。它工作正常，但由于数据集很大，所以有点慢。有没有另一种方法可以更快地做到这一点？

```
 ID  Day  c_id1 c_id2 c_id3 
  1   1    0      4    0   
  1   2    1      0    0
  1   3    0      0    0
  2   1    0      0    0
  2   2    0      0    3
  2   3    0      0    0 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T12:23:44.920

基础 R 中的函数`reshape()`非常快，但代价是难以理解参数的含义。

```
reshape(dat, idvar=c("ID", "Day"), timevar="car_id", direction="wide")
  ID Day value.1 value.2 value.3
1  1   1       0       4      NA
3  1   2       1      NA      NA
4  1   3      NA       0      NA
5  2   1      NA      NA       0
6  2   2      NA      NA       2
7  2   3      NA      NA       0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T23:10:25.500

另一种方法是使用 reshape2 包中的 dcast 函数。

```
dcast(dat, ID + Day ~ car_id, value.var = 'value') 
```

# java - 使用 OSGi 启动 JUnit 测试时出现 IllegalStateException

> ID：12072915
> 
> 赞同：1
> 
> 时间：2012-08-22T12:14:34.243
> 
> 标签：java, eclipse, junit, osgi

我的一个项目中有一些奇怪的问题。我正在尝试在 OSGi 环境中运行一些 JUnit 测试（测试位于由 osgi 包托管的片段中；使用 eclipse 中的“JUnit Plug-in Test”启动器启动操作）。当我尝试启动测试时，出现以下错误：

```
java.lang.IllegalStateException: Unable to acquire application service. Ensure that the    org.eclipse.core.runtime bundle is resolved and started (see config.ini).
    at  org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:619)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:574)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1407)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1383)
An error has occurred. See the log file 
```

在上面的日志中，我还得到：

```
!ENTRY org.eclipse.osgi 2 0 2012-08-22 13:53:24.058
!MESSAGE One or more bundles are not resolved because the following root constraints are not resolved:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-08-22 13:53:24.059
!MESSAGE Bundle reference:file:/C:/.../plugins/org.eclipse.pde.junit.runtime_3.4.200.v20120530-1435.jar was not resolved.
!SUBENTRY 2 org.eclipse.pde.junit.runtime 2 0 2012-08-22 13:53:24.059
!MESSAGE Missing required bundle org.eclipse.core.runtime_[3.3.0,4.0.0). 
```

但是，`org.eclipse.core.runtime`似乎可用（eclipse 运行没有任何问题，我可以使用 OSGi 运行启动项目）。根据“Eclipse 安装详细信息”，核心运行时的版本为 3.8.0.v20120521-2346，在 junit ( `[3.3.0,4.0.0)`) 所需的正确范围内。

我还有另一个相同的 Eclipse（相同的版本等......它来自相同的 .zip 存档），我可以在其中为另一个项目运行相同类型的测试。我检查了配置，但没有发现任何区别。因此，我目前无法理解可能导致此问题的原因。

非常感谢任何可以帮助我解决这个问题的想法，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T15:09:39.397

您的 JUnit 插件测试配置中似乎缺少一些包。您可以使用页面`Validate Plug-ins`上的功能`Plugins`来检查您的配置是否完整。当心：我遇到过一些使用这种方法的依赖关系蔓延的情况，通常来自一些原本不应该存在的“无辜”的 Eclipse 运行时插件。

也就是说，如果您使用 DS（声明式服务），您可以消除对 OSGi API 的所有依赖，因此使用 vainilla JUnit 来测试您的代码。DS 的一个特别隐藏的宝藏是这个服务激活签名`public void activate(ComponentContext context)`，它允许您`ComponentContext`向您的服务注入一个。使用模拟（我们使用 Mockito），您可以模拟任何所需的调用，例如加载资源。

同样，您可以模拟所有服务，因为它们可以通过 `osgi-inf`描述符中声明的生命周期方法（绑定、取消绑定）注入（我们使用 Equinox）：

```
<reference interface="com.service.itf" name="UsefulService"  cardinality="1..1" policy="static" bind="onDependencyServiceUp"  unbind="onDependencyServiceDown"/> 
```

然后，在你的单元测试准备中，你可以简单地声明一个 Mock 并使用 bind 方法注入它。

这将使您在 OSGi 中的测试工作变得更加容易，因为您不必为每个测试创建和维护捆绑配置，同时，普通的 Junit 测试运行得更快。

对于包间集成和系统测试，您可以选择`Junit plugin test`或查看[Pax Exam](http://team.ops4j.org/wiki/display/paxexam/Pax+Exam)。

# php - 数组中的ajax自动完成

> ID：12072922
> 
> 赞同：2
> 
> 时间：2012-08-22T12:15:02.410
> 
> 标签：php, ajax, autocomplete

我正在尝试创建一个简单的自动完成文本框，该文本框从数组中获取建议。我正在使用的代码（基于[此](http://www.youtube.com/watch?gl=GR&v=OISdZ4HeNIM)）是：

调用.php

```
<?php
$list = array(
    "Autocomplete",
    "Metapher",
    "Metatag");

for($i=0; $i<count($list); $i++){
    if(strpos($list[$i], $_GET['str']) !== FALSE && strlen($_GET['str']) >= 2){
        echo str_ireplace($_GET['str'], '<b style="color:   red;">'.$_GET['str'].'</b>', $list[$i]) . '<br>';
    }
}

?> 
```

索引.php

```
<!DOCTYPE html>
<html>
    <head>
        <title>AJAX - 03</title>
        <script type="text/javascript">
            var ajax = new XMLHttpRequest;

            function t(){           
                ajax.open("GET", "call.php?str=" + document.getElementById("test").value, false);
                ajax.send();

        ajax.onreadystatechange=function()
        {
          if (ajax.readyState==4 && ajax.status==200)
          {
                document.getElementById("container").innerHTML = ajax.responseText;
          }
       }
    }

        </script>
    </head>

<body>
    <div id="container" style="border: 3px; border-style: solid; font-size: 42pt; border-radius: 7px;">
    Text
    </div>

    <br><br>
    <input id="test" type="text" onkeyup="javascript:t()">
</body>
</html> 
```

但是建议框中什么也没有出现。我找不到任何语法错误，所以我想逻辑有问题？

**更新**：在 PLB 和 FAngel 的建议之后，我添加了 onreadystatechange 和检查。但是它仍然无法正常工作。实际上，我只是发现，如果您键入三个单词之一中的字母组合，则会出现建议正确。如果您键入单词的开头字母，它就不起作用。例如，如果我输入“com”作为输入，则会出现自动完成这个词。但是，如果我给出“Aut”则什么都没有。所以我想实际的问题就在这里：

```
if(**strpos($list[$i], $_GET['str']) !== FALSE** && strlen($_GET['str']) >= 2) 
```

从我在这里读到的[http://php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)问题可能是使用 != 但我应该使用 !== 。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:21:10.043

您错过了您的请求是异步的。因此，当您运行此行时：`document.getElementById("container").innerHTML = ajax.responseText;`，请求尚未完成。看看[这个](http://ajaxpatterns.org/XMLHttpRequest_Call)。`onreadystatechange`是你需要的。或使该调用同步

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T13:45:27.383

你也可以像这样工作。

[http://jsfiddle.net/qz29K/](http://jsfiddle.net/qz29K/)

您只需要像这样用 php jsonencoding 替换 json 数组

```
$list = array(
"Autocomplete",
"Metapher",
"Metatag");

<script>
var availableTags = <?php echo json_encode($list) ?>
</script> 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T12:18:11.977

它完全有效！

我尝试过这个。

我有输入：遇见

它给了我隐喻和另一个词。

但是，对于高级用法。看看这个，你会喜欢的。

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

# c# - 从 exe 及其依赖项创建安装程序

> ID：12072924
> 
> 赞同：0
> 
> 时间：2012-08-22T12:15:12.900
> 
> 标签：c#, visual-studio-2010

我有一个 exe 文件、一个 .vsto 文件和应用程序文件。我想用这些在 Visual-Studio 中创建一个安装程序文件。我尝试创建一个新的安装项目（在包含必要的 .csproj 文件之后）并构建了解决方案，但创建的 exe/msi 文件似乎不起作用。它只是被安装，但没有做任何事情。

我遵循的方法是否正确？有替代方法吗？

# android - viewpager 的 listview 上的不同项目 - Android

> ID：12072925
> 
> 赞同：1
> 
> 时间：2012-08-22T12:15:16.660
> 
> 标签：android, listview, android-viewpager, viewpagerindicator

我正在处理`quiz application`. 我在这里使用`Viewpager indicator`。在这我已经实现了`listview with radio button`。

我的问题是，如何`diffent values`在`viewpager`.

我尝试了谷歌，但我没有找到解决方案。请帮我。谢谢你

见下图：

![在此处输入图像描述](../Images/a0d1e3bb21d87803f515c5adbf20c46b.png) ![在此处输入图像描述](../Images/c717fa4d24e2c81ba8231fadfd8e606b.png)

检查我的代码：

```
 class PagerAdapter extends FragmentPagerAdapter implements SwipeyTabsAdapter{

    public final String[] list = new String[]
        {"Operating System", "Product Of Google", "Both Above", "None of above"}
; 

    private final Context mContext;

    public PagerAdapter(Context context, FragmentManager fm) {
        super(fm);

        this.mContext = context;
    }

    @Override
    public Fragment getItem(int pos) {

        return ItemFragment.newInstance(QUES[pos]);
        //return ItemFragment.newInstance(QUES[pos % TITLES.length]);

    }

    @Override
    public int getCount() {
        return TITLES.length;
    }

    public TextView getTab(final int position, SwipeyTabs root) {
        TextView view = (TextView) LayoutInflater.from(mContext).inflate(
                R.layout.swipey_tab_indicator, root, false);
        view.setText(TITLES[position]);
        view.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                mViewPager.setCurrentItem(position);

            }
        });
        return view;
    }

}

public static class ItemFragment extends  Fragment{

    static ItemFragment newInstance(String title) {
        ItemFragment f = new ItemFragment();

        // Supply num input as an argument.
        Bundle args = new Bundle();

        args.putString("title",title);
        f.setArguments(args);

        System.out.println("value of the title : ================>"+title);
        return f;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.view_question, container, false);
        View tv = v.findViewById(R.id.text);
        final View listvw = v.findViewById(R.id.listview);

         final String title = getArguments().getString("title");
         ((TextView)tv).setText(title);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),android.R.layout.simple_list_item_single_choice, list);
        ((ListView) listvw).setAdapter(adapter);
        ((ListView) listvw).setChoiceMode(ListView.CHOICE_MODE_SINGLE);

        return v;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

    }

    public void onListItemClick(ListView l, View v, int position, long id) {

        Log.i("FragmentList", "Item clicked: " + id);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:33:26.630

好吧，我建议为列表所在的每个“视图”设置一个 ID，然后当您想要检索该值时，您只需要循环遍历从 0 到适配器大小减 1 的所有 id。这将在每次迭代中为您提供完整视图，因此之后您需要迭代视图的子视图以找到复选框。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:07:27.827

试试这个：

首先根据`listvalue`下面的显示初始化

```
/*public final String[] list = new String[]
    {"Operating System", "Product Of Google", "Both Above", "None of above"};*/

public static final String[] listArray = new String[]
        {
        "Operating System,Product Of Google,Both Above,None of above",
        "os,Google,Both,None",
        "Operating System,Product Of Google,Both Above,None of above",
        "os,Google,Both,None",
        "Operating System,Product Of Google,Both Above,None of above",
        "os,Google,Both,None",
        "Operating System,Product Of Google,Both Above,None of above",
        "os,Google,Both,None"}; 
```

将参数添加到 getItem `listArray[pos]`Like 中：

```
@Override
    public Fragment getItem(int pos) {

        return ItemFragment.newInstance(QUES[pos],listArray[pos]);

    } 
```

并更改为 ItemFragment 类 Like ：

```
static ItemFragment newInstance(String title,String arrayList) {
        ItemFragment f = new ItemFragment();

        // Supply num input as an argument.
        Bundle args = new Bundle();

        args.putString("title",title);
        args.putString("listvalues",arrayList);
        f.setArguments(args);

        return f;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.view_question, container, false);
        View tv = v.findViewById(R.id.text);

        final String title = getArguments().getString("title");
        final String  Listvalues = getArguments().getString("listvalues");

        String[] arr=Listvalues.split(",");

        System.out.println("Array :"+arr.length);
        for(int i=0;i<arr.length;i++)
        {

          //  System.out.println("array"+i+":========================>"+arr[i]);
        } 

         ((TextView)tv).setText(title);

        final View listvw = v.findViewById(R.id.listview);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),android.R.layout.simple_list_item_single_choice, arr);
        ((ListView) listvw).setAdapter(adapter);
        ((ListView) listvw).setChoiceMode(ListView.CHOICE_MODE_SINGLE);

        return v;
    } 
```

# php - 字符串 %0D%0A 在 SQL 中导致比较问题？

> ID：12072932
> 
> 赞同：0
> 
> 时间：2012-08-22T12:15:40.223
> 
> 标签：php, sql

我有一个包含名称列表和搜索字段的下拉框。

下拉列表中填充了数据库中的名称列表，搜索字段允许您执行通配符搜索。

目前，通配符搜索按预期工作，但从下拉列表中选择名称不起作用。

我相信这可能是因为一些不需要的字符，因为我在浏览器的地址栏中看到以下内容，从下拉列表中选择了一个名称并单击了搜索按钮：

```
http://localhost:81/connect/players/?name=%0D%0A3&text=&action=search 
```

我认为上面的文本 (%0D%0A) 导致了一个问题，因为我的代码如下所示：

```
if (isset($_GET['action']) and $_GET['action'] == 'search')
{
include $_SERVER['DOCUMENT_ROOT'] . '/includes/db.inc.php';

    $id = $_GET['name'];  // name slightly confusing but does return the id
    $text = $_GET['text'];

try
{

$sql = "SELECT id, name, age FROM player
    WHERE player.id = '$id'
    OR player.name LIKE '%$text%'
    GROUP BY player.id";

$s = $pdo->query($sql);

}
catch (PDOException $e)
{
    $error = 'Error fetching names.' . $e->getMessage();;
    include 'error.html.php';
    exit();
}
// This is responsible for populating the new player info underneath all
foreach ($s as $row)
{
    $names[] = array('id' => $row['id'], 'name' => $row['name'], 'age' => $row['age']);
}
include 'searchprofiles.html.php';
exit(); 
```

}

而且我相信这会阻止它将数据库中的 id 与存储在变量 $id 中的 id 进行比较。

但是，我也只是手动从地址栏中删除了 %0D%0A ，但它仍然无法正常工作，所以可能还有另一个问题？

还应注意，如果未从下拉列表中选择任何值且未输入通配符，则返回所有行。

HTML如下：

搜索配置文件.HTML.PHP

```
<?php include_once $_SERVER['DOCUMENT_ROOT'] . '/includes/helpers.inc.php'; ?>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Manage Jokes: Search Results</title>
</head>

<body>

<h1>Search Results</h1>

<?php if (isset($names)): ?>

<table>
<tr><th>Name</th><th>Options</th></tr>
<?php foreach ($names as $name): ?>
<tr>
<td><?php htmlout($name['name']); ?></td>
<td><?php htmlout($name['age']); ?></td>
<td>
<form action="?" method="post">
<div>
<input type="" name="id" value="<?php
htmlout($name['id']); ?>">
<input type="submit" name="action" value="Edit">
<input type="submit" name="action" value="Delete">
</div>
</form>

</td>
</tr>
<?php endforeach; ?>
</table>
<?php endif; ?>
<p><a href="?">New search</a></p>
<p><a href="..">Return to JMS home</a></p>
</body>
</html> 
```

**以下是添加值的表单的 HTML。**

```
<?php include_once $_SERVER['DOCUMENT_ROOT'] . '/includes/helpers.inc.php'; ?>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Manage Profiles</title>
</head>

<body>

<h1>Manage Profile</h1>

<p><a href="?add">Add new profile</a></p>

<form action="" method="get">

<p>View player profiles satisfying the following criteria:</p>

<div>

<label for="name">By name:</label>

<select name="name" id="name">

<option value="">Any name</option>

<!-- populates the drop down with names -->
<?php foreach ($names as $name): ?>
<option value="
<?php htmlout($name['id']); ?>">
<?php htmlout($name['name']); ?>
</option>
<?php endforeach; ?>

</select>

</div>

<div>
<label for="text">Containing text:</label>
<input type="text" name="text" id="text">
</div>

<div>
<input type="hidden" name="action" value="search">
<input type="submit" value="Search">
</div>

</form>

</body>
</html> 
```

任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:43:18.343

原因是表单控件中的换行符：

改变

```
<option value="
<?php htmlout($name['id']); ?>">
<?php htmlout($name['name']); ?>
</option> 
```

到

```
<option value="<?php htmlout($name['id']); ?>">
    <?php htmlout($name['name']); ?>
</option> 
```

# c# - IOC 容器的命名空间

> ID：12072937
> 
> 赞同：0
> 
> 时间：2012-08-22T12:16:04.743
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, inversion-of-control

在 Global.asax 文件中，我有以下代码。

```
config.DependencyResolver = new IoCContainer(unity); 
```

在 IOCContainer 中，它显示为“找不到命名空间”。我们应该在这里包含什么命名空间。我已经包含了 Microsoft.Practices.Unity。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:18:06.563

您使用的是哪个版本的 EntLib？在 4.1 之前，它有 UnityContainer 而不是 IoCContainer。

编辑：您传递的统一对象是什么？您可能需要发布一些代码。同时，[这里](http://www.codeproject.com/Articles/42524/A-basic-introduction-to-the-Unity-Application-Bloc)有一个可以帮助你的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:19:35.957

> “找不到命名空间”？

查看文件顶部的“使用”指令，并检查其中是否有任何未用红色标记。也许你有一些错字？或者您可能忘记了对某个库“添加引用”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:10:24.900

您可以安装 Nuget 包[`Unity.Mvc3`](http://www.nuget.org/packages/Unity.Mvc3)，然后使用以下代码：

```
var container = new UnityContainer();
container.RegisterType<IFoo, Foo>();

DependencyResolver.SetResolver(new UnityDependencyResolver(container)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T21:09:05.103

您缺少以下课程。这也花了我一段时间才找到。[在此处](http://www.asp.net/web-api/overview/extensibility/using-the-web-api-dependency-resolver)
找到以下代码参考

```
class ScopeContainer : IDependencyScope
{
    protected IUnityContainer container;

    public ScopeContainer(IUnityContainer container)
    {
        if (container == null)
        {
            throw new ArgumentNullException("container");
        }
        this.container = container;
    }

    public object GetService(Type serviceType)
    {
        if (container.IsRegistered(serviceType))
        {
            return container.Resolve(serviceType);
        }
        else
        {
            return null;
        }
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        if (container.IsRegistered(serviceType))
        {
            return container.ResolveAll(serviceType);
        }
        else
        {
            return new List<object>();
        }
    }

    public void Dispose()
    {
        container.Dispose();
    }
}

class IoCContainer : ScopeContainer, IDependencyResolver
{
    public IoCContainer(IUnityContainer container)
        : base(container)
    {
    }

    public IDependencyScope BeginScope()
    {
        var child = container.CreateChildContainer();
        return new ScopeContainer(child);
    }
} 
```

# nhibernate - 在 Web App 中使用 IQuery 和存储库的不同结果

> ID：12072940
> 
> 赞同：0
> 
> 时间：2012-08-22T12:16:16.940
> 
> 标签：nhibernate

希望有人能指出我正确的方向。我刚开始使用 nHibernate，对此有点困惑。它在 .Net Web 应用程序中运行。

基本上我有 2 类 - 优惠券和出版商。

作为测试，并确保 NH 设置正确，我访问了 PublisherRepository 并按其名称提取了一个发布者。这工作正常并报告成功。

```
IPublisherRepository repo = new PublisherRepository();
Response.Write(repo.GetByName("Publisher 5")); 
```

作为第二个测试，然后我使用 CreateQuery 方法获取所有发布者，如下所示：

```
IQuery query = session.CreateQuery("from CartManData.Domain.Publisher pub"); 
```

这不返回任何数据 - 列表为空。使用 Linq 也是如此：

```
session.Query<Publisher>().Where(x=>x.Name == "Publisher 4").ToList<Publisher>() 
```

使用 Sql Profiler，我可以看到第一个测试命中数据库，并在延迟加载关闭时检索集合（称为 Coupons 属于发布者）。然而，后两种方法根本没有触及数据库——我不知道为什么。

这是 Publisher 和 Coupon 的映射文件。它们是嵌入的，我知道它们正在工作，否则 repo 也不会工作：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="CartManData"
                   namespace="CartManData.Domain">

  <class name="Publisher" lazy="false">
    <id name="Id">
      <generator class="guid"></generator>
    </id>
    <property name="Name"></property>
    <property name="AddressLine1"></property>
    <property name="AddressLine2"></property>
    <property name="AddressLine3"></property>
    <property name="Town"></property>
    <property name="PostCode"></property>
    <property name="Telephone"></property>
    <property name="Email"></property>
    <property name="Enabled"></property>
    <property name="CommissionRate"></property>
    <set name="Coupons" cascade="none" lazy="false">
      <key column="PublisherId" ></key>
      <one-to-many class="Coupon" />
    </set>
  </class>
</hibernate-mapping> 
```

和优惠券：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="CartManData"
                   namespace="CartManData.Domain">

  <class name="Coupon">
    <id name="Id">
      <generator class="guid"></generator>
    </id>
    <property name="Name"></property>
    <property name="EffectiveFrom"></property>
    <property name="EffectiveTo"></property>
    <property name="UnitPrice"></property>
    <property name="OriginalPrice"></property>
    <property name="CouponImage"></property>
    <property name="Enabled"></property>
    <property name="PublisherId" not-null="false"></property>
  </class>
</hibernate-mapping> 
```

对此的任何帮助真的很感激 - 确定这是我错过的东西。

干杯，托尼

**附加信息**

Session 对象通过 HttpModule 检索，其中会话对象绑定到 CurrentSessionContext。这似乎工作正常，就像您检查会话是否打开一样，它报告它是。

PublisherRepository.GetByName() 看起来像这样：

```
using (ISession session = NHibernateHelper.OpenSession())
            {
                return session.CreateCriteria(typeof(Publisher))
                    .Add(NHibernate.Criterion.Restrictions.Eq("Name", name))
                    .UniqueResult<Publisher>();
            } 
```

**Log4Net 输出**

在通过 CreateQuery 调用期间（上面的第二个示例），这是 NHibernate 报告的内容：

```
2012-08-22 16:22:28,075 [15] DEBUG rollingFile - START of retrieval
2012-08-22 16:22:28,081 [15] DEBUG NHibernate.Engine.Query.QueryPlanCache - unable to locate HQL query plan in cache; generating (from CartManData.Domain.Publisher pub)
2012-08-22 16:22:28,128 [15] DEBUG NHibernate.Hql.Ast.ANTLR.HqlParseEngine - parse() - HQL: from CartManData.Domain.Publisher pub
2012-08-22 16:22:28,174 [15] DEBUG NHibernate.Hql.Ast.ANTLR.ErrorCounter - throwQueryException() : no errors
2012-08-22 16:22:28,200 [15] DEBUG NHibernate.Engine.Query.QueryPlanCache - unable to locate HQL query plan in cache; generating (from CartManData.Domain.Publisher pub)
2012-08-22 16:22:28,201 [15] DEBUG NHibernate.Hql.Ast.ANTLR.HqlParseEngine - parse() - HQL: from CartManData.Domain.Publisher pub
2012-08-22 16:22:28,202 [15] DEBUG NHibernate.Hql.Ast.ANTLR.ErrorCounter - throwQueryException() : no errors
2012-08-22 16:22:28,206 [15] DEBUG NHibernate.Engine.Query.HQLQueryPlan - enumerable: from CartManData.Domain.Publisher pub
2012-08-22 16:22:28,208 [15] DEBUG NHibernate.Engine.QueryParameters - named parameters: {}
2012-08-22 16:22:28,210 [15] DEBUG rollingFile - End of retrieval 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:10:47.873

您的映射似乎有问题。
我试图重现你的情况，我已经稍微改变了你的 hbm 文件

**出版商**

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="CartManData"
                   namespace="CartManData.Domain">

    <class name="Publisher" lazy="false">
        <id name="Id">
            <generator class="guid"></generator>
        </id>
        <property name="Name"></property>
        <property name="AddressLine1"></property>
        <property name="AddressLine2"></property>
        <property name="AddressLine3"></property>
        <property name="Town"></property>
        <property name="PostCode"></property>
        <property name="Telephone"></property>
        <property name="Email"></property>
        <property name="Enabled"></property>
        <property name="CommissionRate"></property>

        <set name="Coupons" cascade="all-delete-orphan" inverse="true" lazy="false">
            <key column="PublisherId" />
            <one-to-many class="CartManData.Domain.Coupon, CartManData" />
        </set>

    </class>
</hibernate-mapping> 
```

**优惠券**

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="CartManData"
                   namespace="CartManData.Domain">

    <class name="Coupon">
        <id name="Id">
            <generator class="guid"></generator>
        </id>
        <property name="Name"></property>
        <property name="EffectiveFrom"></property>
        <property name="EffectiveTo"></property>
        <property name="UnitPrice"></property>
        <property name="OriginalPrice"></property>
        <property name="CouponImage"></property>
        <property name="Enabled"></property>

        <many-to-one class="CartManData.Domain.Publisher, CartManData" name="Publisher">
            <column name="PublisherId" not-null="true" />
        </many-to-one>

    </class>
</hibernate-mapping> 
```

如您所见，我在 Coupon 上使用了**多对一关系。**[你可以在这里](http://blogs.microsoft.co.il/blogs/arnona/archive/2011/07/12/understanding-one-to-many-relationships-in-nhibernate.aspx)
阅读这些关系是如何工作的。 我在为 Publisher 映射定义的集合中使用了 inverse="true"。[有关inverse](http://notherdev.blogspot.co.uk/2012/04/nhibernates-inverse-what-does-it-really.html)的更多信息。

如果你想看看 2 类：

```
public class Publisher
{
    public Publisher()
    {
        this.Coupons = new HashSet<Coupon>();
    }

    public virtual Guid Id { get; set; }
    public virtual string Name { get; set; }
    public virtual string AddressLine1 { get; set; }
    public virtual string AddressLine2 { get; set; }
    public virtual string AddressLine3 { get; set; }
    public virtual string Town { get; set; }
    public virtual string PostCode { get; set; }
    public virtual string Telephone { get; set; }
    public virtual string Email { get; set; }
    public virtual bool Enabled { get; set; }
    public virtual decimal CommissionRate { get; set; }

    public virtual ICollection<Coupon> Coupons { get; set; }
} 
```

和

```
public class Coupon
{
    public virtual Guid Id { get; set; }
    public virtual string Name { get; set; }
    public virtual DateTime EffectiveFrom { get; set; }
    public virtual DateTime EffectiveTo { get; set; }
    public virtual double UnitPrice { get; set; }
    public virtual double OriginalPrice { get; set; }
    public virtual string CouponImage { get; set; }
    public virtual bool Enabled { get; set; }

    public virtual Publisher Publisher { get; set; }

} 
```

[您可以在此处](https://skydrive.live.com/embed?cid=669ADF1AF64DF389&resid=669ADF1AF64DF389%21207&authkey=AL1RQQ1kD9MMNMg)下载一个工作示例 ( **NHVariousTests** ) 。

# hibernate - 如何创建 Jboss-web.xml 或 jboss-deployment-structure.xml？

> ID：12072950
> 
> 赞同：0
> 
> 时间：2012-08-22T12:16:49.273
> 
> 标签：hibernate, jboss, struts

我是 jboss 服务器的新手。我正在使用`Jboss EAP 6`. 我的项目在 Tomcat 7 中运行良好，但无法在 jboss EAP6 中启用。我正在为我的项目使用 struts2、hibernate3.3 和磁贴。我认为问题是我没有创建`jboss-web.xml`or `jboss-deployment-structure.xml`。有人可以告诉我如何创建这个文件或给我一些关于它的教程.. 谢谢....

这是日志文件数据：

```
17:12:22,571 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015876: Starting deployment of "XXXX.war"
17:12:26,362 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-3) JBAS010403: Deploying JDBC-compliant driver class oracle.jdbc.OracleDriver (version 11.2)
17:12:26,440 INFO  [org.jboss.as.osgi] (MSC service thread 1-1) JBAS011907: Register module: Module "deployment.XXXX.war:main" from Service Module Loader
17:12:26,534 INFO  [org.apache.tiles.impl.BasicTilesContainer] (MSC service thread 1-4) Initializing Tiles2 container. . .
17:12:26,581 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/XXXX]] (MSC service thread 1-4) Exception sending context initialized event to listener instance of class org.apache.struts2.tiles.StrutsTilesListener: java.lang.NoClassDefFoundError: org/apache/commons/beanutils/DynaProperty
    at org.apache.commons.digester.Digester.addSetProperty(Digester.java:2695) [commons-digester-1.8.1.jar:1.8.1]
    at org.apache.tiles.definition.digester.DigesterDefinitionsReader.initDigesterForTilesDefinitionsSyntax(DigesterDefinitionsReader.java:360) [tiles-core-2.0.6.jar:2.0.6]
    at org.apache.tiles.definition.digester.DigesterDefinitionsReader.init(DigesterDefinitionsReader.java:299) [tiles-core-2.0.6.jar:2.0.6]
    at org.apache.tiles.definition.UrlDefinitionsFactory.init(UrlDefinitionsFactory.java:120) [tiles-core-2.0.6.jar:2.0.6]
    at org.apache.tiles.impl.BasicTilesContainer.initializeDefinitionsFactory(BasicTilesContainer.java:406) [tiles-core-2.0.6.jar:2.0.6]
    at org.apache.tiles.impl.BasicTilesContainer.init(BasicTilesContainer.java:130) [tiles-core-2.0.6.jar:2.0.6]
    at org.apache.tiles.factory.TilesContainerFactory.initializeContainer(TilesContainerFactory.java:232) [tiles-core-2.0.6.jar:2.0.6]
    at org.apache.tiles.factory.TilesContainerFactory.createTilesContainer(TilesContainerFactory.java:198) [tiles-core-2.0.6.jar:2.0.6]
    at org.apache.tiles.factory.TilesContainerFactory.createContainer(TilesContainerFactory.java:163) [tiles-core-2.0.6.jar:2.0.6]
    at org.apache.tiles.web.startup.TilesListener.createContainer(TilesListener.java:90) [tiles-core-2.0.6.jar:2.0.6]
    at org.apache.struts2.tiles.StrutsTilesListener.createContainer(StrutsTilesListener.java:68) [struts2-tiles-plugin-2.1.8.1.jar:]
    at org.apache.tiles.web.startup.TilesListener.contextInitialized(TilesListener.java:57) [tiles-core-2.0.6.jar:2.0.6]
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.16.Final-redhat-1.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.16.Final-redhat-1.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_05]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_05]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_05]
Caused by: java.lang.ClassNotFoundException: org.apache.commons.beanutils.DynaProperty from [Module "deployment.XXXX.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    ... 20 more

17:12:26,705 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-4) Error listenerStart
17:12:26,705 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-4) Context [/XXXX] startup failed due to previous errors
17:12:26,721 INFO  [org.apache.tiles.access.TilesAccess] (MSC service thread 1-4) Removing TilesContext for context: org.apache.catalina.core.ApplicationContextFacade
17:12:26,737 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4) MSC000001: Failed to start service jboss.web.deployment.default-host./XXXX: org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./XXXX: JBAS018040: Failed to start context
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:95)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA-redhat-1.jar:1.0.2.GA-redhat-1]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA-redhat-1.jar:1.0.2.GA-redhat-1]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_05]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_05]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_05]

17:12:27,002 INFO  [org.jboss.as.server] (HttpManagementService-threads - 6) JBAS015870: Deploy of deployment "XXXX.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.web.deployment.default-host./XXXX" => "org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./XXXX: JBAS018040: Failed to start context"},"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.deployment.unit.\"XXXX.war\".jboss.security.jacc Missing[JBAS014861: <one or more transitive dependencies>]"]}
17:12:27,033 INFO  [org.jboss.as.osgi] (MSC service thread 1-4) JBAS011908: Unregister module: Module "deployment.XXXX.war:main" from Service Module Loader
17:12:27,532 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015877: Stopped deployment XXXX.war in 543ms
17:17:30,888 INFO  [org.jboss.as.repository] (HttpManagementService-threads - 7) JBAS014900: Content added at location C:\Program Files\EAP-6.0.0.GA\jboss-eap-6.0\standalone\data\content\11\5867cf3e99641e79fbf2b8bbf36390d31451d2\content
17:17:33,181 INFO  [org.jboss.as.repository] (HttpManagementService-threads - 7) JBAS014901: Content removed from location C:\Program Files\EAP-6.0.0.GA\jboss-eap-6.0\standalone\data\content\d9\fb56da17a261438f4b0d3387d6207fd857afb8\content
17:17:42,853 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015876: Starting deployment of "XXXX.war"
17:17:47,985 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-4) JBAS010403: Deploying JDBC-compliant driver class oracle.jdbc.OracleDriver (version 11.2)
17:17:48,001 INFO  [org.jboss.as.osgi] (MSC service thread 1-4) JBAS011907: Register module: Module "deployment.XXXX.war:main" from Service Module Loader
17:17:48,063 INFO  [org.apache.tiles.impl.BasicTilesContainer] (MSC service thread 1-2) Initializing Tiles2 container. . .
17:17:48,329 INFO  [org.apache.tiles.impl.BasicTilesContainer] (MSC service thread 1-2) Tiles2 container initialization complete.
17:17:48,329 INFO  [org.apache.tiles.access.TilesAccess] (MSC service thread 1-2) Publishing TilesContext for context: org.apache.catalina.core.ApplicationContextFacade
17:17:48,422 WARN  [com.opensymphony.xwork2.util.FileManager] (MSC service thread 1-2) Could not create JarEntryRevision!: java.io.FileNotFoundException: vfs:\C:\Windows\System32\content\XXXX.war\WEB-INF\lib\struts2-core-2.1.8.1 (The filename, directory name, or volume label syntax is incorrect)
    at java.util.zip.ZipFile.open(Native Method) [rt.jar:1.7.0_05]
    at java.util.zip.ZipFile.<init>(Unknown Source) [rt.jar:1.7.0_05]
    at java.util.zip.ZipFile.<init>(Unknown Source) [rt.jar:1.7.0_05]
    at java.util.jar.JarFile.<init>(Unknown Source) [rt.jar:1.7.0_05]
    at java.util.jar.JarFile.<init>(Unknown Source) [rt.jar:1.7.0_05]
    at com.opensymphony.xwork2.util.FileManager$JarEntryRevision.build(FileManager.java:297) [xwork-core-2.1.6.jar:]
    at com.opensymphony.xwork2.util.FileManager.loadFile(FileManager.java:133) [xwork-core-2.1.6.jar:]
    at com.opensymphony.xwork2.util.FileManager.loadFile(FileManager.java:93) [xwork-core-2.1.6.jar:]
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:887) [xwork-core-2.1.6.jar:]
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadDocuments(XmlConfigurationProvider.java:143) [xwork-core-2.1.6.jar:]
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.init(XmlConfigurationProvider.java:110) [xwork-core-2.1.6.jar:]
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:168) [xwork-core-2.1.6.jar:]
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:55) [xwork-core-2.1.6.jar:]
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:374) [struts2-core-2.1.8.1.jar:]
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:418) [struts2-core-2.1.8.1.jar:]
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69) [struts2-core-2.1.8.1.jar:]
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51) [struts2-core-2.1.8.1.jar:]
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:447) [jbossweb-7.0.16.Final-redhat-1.jar:]
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3269) [jbossweb-7.0.16.Final-redhat-1.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3865) [jbossweb-7.0.16.Final-redhat-1.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_05]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_05]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_05]

17:17:48,578 INFO  [com.opensymphony.xwork2.config.providers.XmlConfigurationProvider] (MSC service thread 1-2) Parsing configuration file [struts-default.xml]
17:17:48,609 ERROR [org.apache.struts2.dispatcher.Dispatcher] (MSC service thread 1-2) Dispatcher initialization failed: Unable to load configuration. - bean - vfs:/C:/Windows/System32/content/XXXX.war/WEB-INF/lib/struts2-core-2.1.8.1.jar/struts-default.xml:47:178
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:58) [xwork-core-2.1.6.jar:]
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:374) [struts2-core-2.1.8.1.jar:]
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:418) [struts2-core-2.1.8.1.jar:]
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69) [struts2-core-2.1.8.1.jar:]
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51) [struts2-core-2.1.8.1.jar:]
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:447) [jbossweb-7.0.16.Final-redhat-1.jar:]
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3269) [jbossweb-7.0.16.Final-redhat-1.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3865) [jbossweb-7.0.16.Final-redhat-1.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_05]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_05]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_05]
Caused by: Unable to load bean: type:org.apache.struts2.dispatcher.multipart.MultiPartRequest class:org.apache.struts2.dispatcher.multipart.JakartaMultiPartRequest - bean - vfs:/C:/Windows/System32/content/XXXX.war/WEB-INF/lib/struts2-core-2.1.8.1.jar/struts-default.xml:47:178
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.register(XmlConfigurationProvider.java:221) [xwork-core-2.1.6.jar:]
    at org.apache.struts2.config.StrutsXmlConfigurationProvider.register(StrutsXmlConfigurationProvider.java:101) [struts2-core-2.1.8.1.jar:]
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:169) [xwork-core-2.1.6.jar:]
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:55) [xwork-core-2.1.6.jar:]
    ... 13 more
Caused by: java.lang.NoClassDefFoundError: org/apache/commons/fileupload/RequestContext
    at java.lang.Class.getDeclaredConstructors0(Native Method) [rt.jar:1.7.0_05]
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source) [rt.jar:1.7.0_05]
    at java.lang.Class.getDeclaredConstructors(Unknown Source) [rt.jar:1.7.0_05]
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.register(XmlConfigurationProvider.java:211) [xwork-core-2.1.6.jar:]
    ... 16 more
Caused by: java.lang.ClassNotFoundException: org.apache.commons.fileupload.RequestContext from [Module "deployment.XXXX.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    ... 20 more

17:17:48,625 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/XXXX]] (MSC service thread 1-2) Exception starting filter struts2: Unable to load configuration. - bean - vfs:/C:/Windows/System32/content/XXXX.war/WEB-INF/lib/struts2-core-2.1.8.1.jar/struts-default.xml:47:178
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:431) [struts2-core-2.1.8.1.jar:]
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69) [struts2-core-2.1.8.1.jar:]
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51) [struts2-core-2.1.8.1.jar:]
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:447) [jbossweb-7.0.16.Final-redhat-1.jar:]
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3269) [jbossweb-7.0.16.Final-redhat-1.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3865) [jbossweb-7.0.16.Final-redhat-1.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_05]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_05]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_05]
Caused by: Unable to load configuration. - bean - vfs:/C:/Windows/System32/content/XXXX.war/WEB-INF/lib/struts2-core-2.1.8.1.jar/struts-default.xml:47:178
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:58) [xwork-core-2.1.6.jar:]
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:374) [struts2-core-2.1.8.1.jar:]
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:418) [struts2-core-2.1.8.1.jar:]
    ... 11 more
Caused by: Unable to load bean: type:org.apache.struts2.dispatcher.multipart.MultiPartRequest class:org.apache.struts2.dispatcher.multipart.JakartaMultiPartRequest - bean - vfs:/C:/Windows/System32/content/XXXX.war/WEB-INF/lib/struts2-core-2.1.8.1.jar/struts-default.xml:47:178
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.register(XmlConfigurationProvider.java:221) [xwork-core-2.1.6.jar:]
    at org.apache.struts2.config.StrutsXmlConfigurationProvider.register(StrutsXmlConfigurationProvider.java:101) [struts2-core-2.1.8.1.jar:]
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:169) [xwork-core-2.1.6.jar:]
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:55) [xwork-core-2.1.6.jar:]
    ... 13 more
Caused by: java.lang.NoClassDefFoundError: org/apache/commons/fileupload/RequestContext
    at java.lang.Class.getDeclaredConstructors0(Native Method) [rt.jar:1.7.0_05]
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source) [rt.jar:1.7.0_05]
    at java.lang.Class.getDeclaredConstructors(Unknown Source) [rt.jar:1.7.0_05]
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.register(XmlConfigurationProvider.java:211) [xwork-core-2.1.6.jar:]
    ... 16 more
Caused by: java.lang.ClassNotFoundException: org.apache.commons.fileupload.RequestContext from [Module "deployment.XXXX.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    ... 20 more

17:17:48,641 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-2) Error filterStart
17:17:48,641 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-2) Context [/XXXX] startup failed due to previous errors
17:17:48,641 INFO  [org.apache.tiles.access.TilesAccess] (MSC service thread 1-2) Removing TilesContext for context: org.apache.catalina.core.ApplicationContextFacade
17:17:48,641 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC000001: Failed to start service jboss.web.deployment.default-host./XXXX: org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./XXXX: JBAS018040: Failed to start context
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:95)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA-redhat-1.jar:1.0.2.GA-redhat-1]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA-redhat-1.jar:1.0.2.GA-redhat-1]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_05]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_05]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_05]

17:17:48,859 INFO  [org.jboss.as.server] (HttpManagementService-threads - 7) JBAS015870: Deploy of deployment "XXXX.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.web.deployment.default-host./XXXX" => "org.jboss.msc.service.StartException in service jboss.web.deployment.default-host./XXXX: JBAS018040: Failed to start context"},"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.deployment.unit.\"XXXX.war\".jboss.security.jacc Missing[JBAS014861: <one or more transitive dependencies>]"]}
17:17:48,859 INFO  [org.jboss.as.osgi] (MSC service thread 1-4) JBAS011908: Unregister module: Module "deployment.XXXX.war:main" from Service Module Loader
17:17:49,530 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015877: Stopped deployment XXXX.war in 680ms
17:23:46,068 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-4) Pausing Coyote HTTP/1.1 on http-/127.0.0.1:8080
17:23:46,068 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-4) Stopping Coyote HTTP/1.1 on http-/127.0.0.1:8080 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:48:52.097

在 JBoss 6 中，web 存档中的 uri 资源使用自定义协议“vfs”。Struts 2 在 struts 2.3 之前不支持这一点（spring 3.0 之前的 spring 也不支持？）。

见[https://community.jboss.org/thread/164784](https://community.jboss.org/thread/164784)。

此外，您在类路径中缺少 commons-beanutils.jar。它可能是由 tomcat 提供的，但不是由 jboss 提供的。你需要把它放在WEB-INF/lib 中。

# script# - 将生成的 JS 文件添加到 Web 项目的最佳选择

> ID：12072953
> 
> 赞同：1
> 
> 时间：2012-08-22T12:16:51.037
> 
> 标签：script#

据我所知，*.csproj 文件中的“DeploymentPath”属性现在已过时，那么将文件添加到 ASP.NET MVC 等 Web 项目的最佳方法是什么？构建后步骤是否足够？我想听听社区对此的看法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:05:37.760

实际上该属性并没有消失......如果它的设置仍然支持它。正如您将在 ScriptSharp.targets 文件中看到的，如果设置了该属性，它仍会使用该属性。消失的是在项目创建时设置它的 UI。

有一个更好的解决方案，但这需要一个更成熟的 vs 扩展，所以它现在还没有准备好。

对于演示，我所做的只是将 c# 项目的输出路径更改为指向要部署到的 Web 项目的 Scripts 目录。这样做的缺点是 .dll 文件也会被复制到那里，这对您的情况可能很重要，也可能无关紧要。

当然，构建后步骤也同样有效......基本上您可以使用 msbuild 执行任何操作。沿着这些思路，作为最后的手段，msbuild 任务的源代码都在 github 存储库中 - 您可以对其进行调整，甚至创建一个在您的工作流程中工作的非常具体的任务。

# mediawiki - MediaWiki：更改页面底部类别的标签

> ID：12072956
> 
> 赞同：2
> 
> 时间：2012-08-22T12:17:00.973
> 
> 标签：mediawiki, categories

在**mediawiki**中，是否可以更改文章底部的“类别”标签。

例如以下文章：

```
=Paris=
blablablablablabla

[[Category:place_id]] 
```

我希望看到更详细的内容（下面的示例不起作用）：

```
=Paris=
blablablablablabla

[[Category:place_id|France]] 
```

注意：我不想使用“重定向”，我想保留我奇怪的 id，因为它们链接到外部数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:39:31.030

我认为 mediawiki 不支持此功能。但是，如何使用：

```
[[Category:France]] 
```

在您的页面中，并将其设置为以您的 ID 命名的类别？France 只是“place_id”的子类别，您可以使用更多与父类别相关联的术语。为此，您只需编辑“法国”的类别页面，插入：

```
[[Category:place_id]] 
```

另一种方法是将您的页面放在两个类别中，但在这种情况下，仍然会显示 id：

```
[[Category:place_id]]
[[Category:France]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T15:33:57.537

你可以用一个[`OutputPageMakeCategoryLinks`钩子](http://www.mediawiki.org/wiki/Manual%3aHooks/OutputPageMakeCategoryLinks)来做到这一点。唉，那个钩子的接口似乎有点不方便——据我所知，它几乎只适用于完全替换标准类别链接生成代码。不过，您*可以*按照自己的意愿进行操作：

```
function myOutputPageMakeCategoryLinks( &$out, $categories, &$links ) {
    foreach ( $categories as $category => $type ) {
        $title = Title::makeTitleSafe( NS_CATEGORY, $category );
        $text = $title->getText();
        if ( $text == 'Place id' ) {
            // set $text to something else
        }
        $links[$type][] = Linker::link( $title, htmlspecialchars( $text ) );
    }
    return false;  // skip default link generation
}
$wgHooks['OutputPageMakeCategoryLinks'][] = 'myOutputPageMakeCategoryLinks'; 
```

（上面的代码基于[OutputPage.php](https://gerrit.wikimedia.org/r/gitweb?p=mediawiki/core.git;a=blob;f=includes/OutputPage.php)中的默认类别链接生成代码，有些简化；我假设您没有在 wiki 上使用[语言变体转换](http://www.mediawiki.org/wiki/Writing_systems#LanguageConverter)，因此我删除了处理该问题的部分。请注意，**此代码是未经测试！** 使用风险自负。）

# c# - Windows 应用商店应用手势设置

> ID：12072958
> 
> 赞同：1
> 
> 时间：2012-08-22T12:17:08.787
> 
> 标签：c#, xaml, event-handling, windows-runtime, windows-store-apps

我在 Metro 应用程序中实施`Holding`事件时遇到困难。`Image`

```
<Image Name="imgArrowUp" Source="Images/controls/arrow_up.png" Tapped="imgArrowUp_Tapped" Holding="imgArrowUp_Holding" /> 
```

`Tapped`事件工作得很好。但我无法设法`Holding`使用鼠标引发事件。我通过互联网搜索并找到了一些关于的信息`GestureSettings.HoldWithMouse`，但我不知道如何使用它。我认为这是一个 XAML 参数，但不幸的是它不是。

如何`Holding`使用鼠标左键在图像上引发事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T08:29:27.670

[这](https://stackoverflow.com/questions/12159855/metro-app-holding-event-in-games)是一个答案。唯一的问题是错误选择的事件。

尽管`Holding`事件最终使用平板电脑运行良好，但它并没有提供我试图找到的解决方案。使用`PointerPressed`和`PointerReleased`事件解决了这个问题。

# python - 如何使用连接字符串从python连接到mysql数据库

> ID：12072961
> 
> 赞同：8
> 
> 时间：2012-08-22T12:17:25.403
> 
> 标签：python, mysql

嗨，我正在使用`python`和数据库作为`Mysql`，现在我想从 python 连接到 Mysql 数据库，我写了下面的代码

**方法_1**

```
import MySQLdb as mdb

conn = mdb.connect('ip_address', 'user_name', 'pass_word', 'database_name') 
```

通过使用上面我可以成功连接到 Mysql，但我想知道我们是否可以通过使用连接字符串和访问来做同样的事情，如下所述

**方法_2**

```
connectString=Server=ip_address;Database=database_name;UID=user_name;PWD=pass_word
conn = mdb.connect(connectString) 
```

但是我在上面使用时遇到了一个错误，所以任何人都可以让我知道我们是否只能通过**method_1**访问 Mysql 数据库，或者有没有办法像我在**method_2中提到的那样声明对某个变量的访问凭据并使用该变量进行连接**

**编辑代码：**

实际上我正在尝试如下

**示例文件.ini**

```
[for_primary]

connectString=host="192.168.xx.xxx",user="username_1",passwd="password_1",db="database_1"

[for_secondary]

connectString=host="192.168.xx.xxx",user="username_2",passwd="password_2",db="database_2" 
```

**文件.py：**

```
import ConfigParser
import MySQLdb as mdb

configFeed = ConfigParser.ConfigParser()
configFeed.read('path to file/example_file.ini')
connectString = configFeed.get('for_primary', 'connectString')
conn = mdb.connect(connectString)
print conn 
```

**结果：**

```
 File "/usr/lib64/python2.7/site-packages/MySQLdb/__init__.py", line 81, in Connect
    return Connection(*args, **kwargs)
  File "/usr/lib64/python2.7/site-packages/MySQLdb/connections.py", line 187, in __init__
    super(Connection, self).__init__(*args, **kwargs2)
_mysql_exceptions.OperationalError: (2005, 'Unknown MySQL server host \'host="192.168.xx.xxx",user="username_1", passwd="password_1",db="database_1"\' (0)') 
```

所以我正在尝试这种方式，因为我需要根据`example_file.ini`文件中的选择连接到两个数据库。通过声明访问`.ini`文件中另一个变量的凭据，有什么方法可以像上面那样做吗？如果我从`.ini`文件中获取连接字符串，我期待的是这里`string`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T12:22:31.503

你不能，`MySQLdb.connect`只支持前一个选项。

当然，您可以将连接字符串解析为其组成部分，并将其用作`.connect()`函数的一组关键字参数：

```
connectParams = dict(entry.split('=') for entry in connectString.split(';'))
mdb.connect(**connectParams) 
```

然而，上述拆分方法相当幼稚；您可能需要一个更复杂的方法来删除不受支持的选项，转换某些参数值（想想`use_unicode`和`True`or `False`）并允许在它们是参数值的一部分的地方转义`;`和字符。有关支持的关键字参数，`=`请参阅[`.connect()`文档。](http://mysql-python.sourceforge.net/MySQLdb.html#functions-and-attributes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:23:02.563

根据文档，您应该能够做到这一点：

```
db=_mysql.connect(host="localhost",user="joebob", passwd="moonpie",db="thangs") 
```

[http://mysql-python.sourceforge.net/MySQLdb.html](http://mysql-python.sourceforge.net/MySQLdb.html)

下面的`_mysql examples`部分讨论了调用的不同方式`connect()`。

就个人而言，我不知道如何将其作为您引用的单个“connectionString”来执行。但是您应该能够将关键字参数与变量一起使用。

# tcl - 找出谁接了电话

> ID：12072962
> 
> 赞同：0
> 
> 时间：2012-08-22T12:17:27.257
> 
> 标签：tcl, voip, voice, ivr

我正在思科解决方案上开发 tcl ivr。我的问题是：在 tcl 脚本中，当呼叫一组号码（寻线飞行员）时，我们如何确定谁（哪个号码）接听了电话？

我们有什么办法可以在 tcl 脚本中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:54:39.210

来自[http://www.cisco.com/en/US/docs/ios/voice/tcl/developer/guide/tclivrv2_ch3.html#wp1049954](http://www.cisco.com/en/US/docs/ios/voice/tcl/developer/guide/tclivrv2_ch3.html#wp1049954)：

> 如果指定了多个目的号码，则该`leg setup`命令同时呼叫所有指定号码（使所有目的电话同时振铃）。当第一个目标电话被接听时，呼叫被接通，其余呼叫被断开。（这称为*爆炸调用*。）**因此，当您收到 ev_setup_done 事件然后发出`infotag get evt_legs`info-tag 命令时，将返回传入的分支。**

# git - 带有配置的下游 git repo

> ID：12072965
> 
> 赞同：0
> 
> 时间：2012-08-22T03:58:05.817
> 
> 标签：git

我有一个我已经分叉的开源项目，因为我希望回馈修复和功能。到目前为止，一切都很好。

这个项目有一个文件，configuration.h，它是特定于我的。我希望保留它的版本。默认文件已由项目进行版本控制。我知道有更好的方法来管理配置，但不幸的是，我必须以一种适合将它们推送到上游的方式保存这些文件。

管理这个 git repo 的最干净的方法是什么，以便我在我碰巧正在处理的任何功能/错误分支或标签中都可以使用我的配置？

我目前的尝试包括保留一个配置分支离开 master，并重新设置它。这很快就会出现问题。一定会有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T22:38:04.657

推荐的方法是修改您的应用程序，以便将跟踪/未跟踪的配置存储在不同的文件中。有关一些方法，请参阅[https://gist.github.com/1423106](https://gist.github.com/1423106)。摘录：

*   修改您的应用程序以在 foo.conf 之前查找 foo.local.conf（或在之后加载 foo.local.conf 并让这些配置设置覆盖 foo.conf，或从环境变量中读取配置文件的名称）。

*   跟踪 foo.sample.conf 并让您的编译过程将其复制到 foo.conf（如果它不存在）。

*   使用特殊的涂抹/清洁挂钩来应用您的配置更改（或从特殊的配置文件分支中获取它们）

*   使用[本地配置分支](http://thomasrast.ch/git/local-config.html)，将配置更改隔离在特殊分支上

*   在任何情况下都不应使用“假设不变”。它不会做你想要的或你认为它会做的事。使用它只会以泪水告终。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:27:49.077

可能最干净的方法是为您的工作维护两个分支 - 调用它们`dev`和`test`. `dev`将是您在除配置文件之外的所有内容上所做的所有工作，并且将是您用来向上游提交更改的内容。`test`只会是您的配置文件，您可以根据个人喜好经常合并`dev`或变基`test`到最新的`dev`提交（我更喜欢变基，我自己），并且这个分支永远不会被推送到上游。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:26:32.660

有 git 解决方案，例如[smudge clean](http://git-scm.com/book/ch7-2.html#Keyword-Expansion) hooks。其他钩子可以解决问题，但这不是一个很好的解决方案，因为我认为你的问题不在这里。

对于不同的开发人员，您不应该拥有不同的代码文件。您的代码库应处理存储在代码库之外的配置文件中的不同配置，这些配置文件具有默认模板版本`.config.template`和自定义版本，每个版本在其机器`.config`上都没有版本化（感谢.gitignore），但在运行时由代码使用。

# asp.net - ASP.NET SelectParameter / 控制参数用法

> ID：12072968
> 
> 赞同：3
> 
> 时间：2012-08-22T12:18:01.940
> 
> 标签：asp.net, sqldatasource

asp.net 的新手在这里。

我正在尝试根据日期范围的文本框 Web 控件设置 selectparameters 和 controlparameters 以检索 asp.net 页面上的数据。

```
SelectCommand="SELECT SUM(Turnover) AS TotalTurnover, (SUM(Turnover) / (SELECT COUNT(*) FROM (SELECT DISTINCT [Trade Date] FROM TradeSummary WHERE ([Trade Date] BETWEEN @T1 AND @T2)))) AS AverageTO FROM TradeSummary WHERE ([Trade Date] BETWEEN @T1 AND @T2)">
                        <SelectParameters>
                            <asp:ControlParameter ControlID="TradeDate1" DefaultValue="8-10-2012" Name="T1" Type="DateTime" PropertyName="Text" />
                            <asp:ControlParameter ControlID="TradeDate2" DefaultValue="8-11-2012" Name="T2" Type="DateTime" PropertyName="Text" />
                    </SelectParameters> 
```

TradeDate1 和 TradeDate2 指的是我为日期选择设置的 2 个文本框控件。

我想知道如何检查 @T1 和 @T2 的值，以便确保传递给数据库的查询是有效的，因为如果我要 eval("TotalTurnover") 那么我得到一个 dbnull 错误。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:27:58.883

检查值后，您还可以从后面的代码中传递控制参数。在您的 Page_Load 或任何其他控制事件（例如按钮）中添加以下代码

```
// check your textbox values
if( TradeDate1.Text != null )
{
   SqlDataSource1.SelectParameters.Add("@T1",TradeDate1.Text);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:34:46.580

我会在按钮的单击事件上检查文本框的输入值，如果它们都正常，则继续数据绑定数据源。然后在数据源的选择事件中，我使用 datsource.SelectParameters["T1"].DefaultValue = date; 设置必要的参数。

# python - 如何准确地将字符串形式的解析版本号更改为数字？

> ID：12072973
> 
> 赞同：1
> 
> 时间：2012-08-22T12:18:17.477
> 
> 标签：python

所以说我有一个检索到的目录名称“LibX_00.03”，我检索目录的版本信息：

```
lib = "LibX_00.03"

version = lib[-5:] 
```

完成此操作后，我想将此版本号与其他版本号进行比较以断言库的最新版本，问题在于必须以数字形式进行比较，而不是 str。转换为 int 或 float 都不起作用，因为 int 会给出一个整数，而 float 会给出一个不准确的转换：

```
>>> float(version)
0.299999... 
```

那么，我怎样才能准确地保留版本号，同时以我进行比较的形式保存它呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T12:25:18.677

```
>>> from distutils.version import StrictVersion
>>> StrictVersion('00.03') > StrictVersion('00.10')
False
>>> StrictVersion('00.03') > StrictVersion('00.02')
True 
```

`'1.0b'`请注意，如果您有版本字符串，这将不起作用，用于该用途`LooseVersion`：

```
>>> from distutils.version import LooseVersion
>>> LooseVersion('1.2b') > LooseVersion('0.1')
True
>>> LooseVersion('1.2b') > LooseVersion('1.2c')
False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T12:24:47.803

看来您知道在结束前总会有 4 个字符的格式。你为什么不尝试这样的事情？

```
versionnumbers = [int(x) for x in version if x != '.'] 
```

现在您可以从最高到最低访问您的版本列表。

```
versionnumbers[0] # Major
versionnumbers[1] # Minor
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T12:23:38.753

您可以使用模块中的`Decimal`类。`decimal`

```
>>> from decimal import Decimal
>>> Decimal('00.03')
Decimal('0.03') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T12:30:16.170

```
>>> import decimal
>>> lib = "LibX_00.03"
>>> version=lib[-5:]
>>> dec=decimal.Decimal(version)
>>> dec
Decimal('0.03')

>>> 0.05>dec
False
>>> dec>decimal.Decimal('0.05')
False
>>> dec<decimal.Decimal('0.05')
True
>>> dec==decimal.Decimal('0.03')
True
>>> dec==decimal.Decimal('0.0299999999999999')
False
>>> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-18T19:32:13.863

根据 Aesthete 的回答，我觉得这很好，因为您可以比其他人更多地定制它，您可以执行以下操作：

```
>>> import re
>>> version = "00.13"
>>> nums = [ int(x) for x in re.split("\.",version) ]
>>> nums
[0, 13] 
```

并将`nums`包含`.`原始版本字符串中的分隔元素。如果您的版本号大于一个字符，这很好，例如`13`在我的示例中，而不是`03`.

# silverlight - Silverlight 中的十进制转换器无法正确处理丢失焦点

> ID：12072977
> 
> 赞同：1
> 
> 时间：2012-08-22T12:18:28.020
> 
> 标签：silverlight, converters, lostfocus

我正在使用 Silverlight 中的绑定。我已将 TextBox 与 Decimal 实体绑定。下面是绑定的代码片段。

```
<TextBox x:Name="AmountBox" Text="{Binding SelectedEntity.Amount,Mode=TwoWay,StringFormat=\{0:n2\},Converter={StaticResource DecimalBlankValueConverter}}" Validate="True" TextChanged="AmountBox_TextChanged" LostFocus="AmountBox_LostFocus"/>
```

下面是转换器代码。

```
 decimal result;
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {            
        if (!Decimal.TryParse(value.ToString(),out result) || (decimal)value == decimal.Zero)
            return null;
        return decimal.Parse(value.ToString());
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value == null || !Decimal.TryParse(value.ToString(), out result))
            return 0.00;
        return decimal.Parse(value.ToString());
    } 
```

在失去焦点时，我正在使用 GetBindingExpression(TextBox.TextProperty).UpdateSource();

一切都很好，但是在失去焦点时不会调用转换，当我在文本框中输入字符串时，不会调用转换，它不会将文本框文本转换为空白。

谁能建议我，代码中的问题是什么。

提前致谢。----拉杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:21:59.233

根据您的描述，“在失去焦点时不会调用转换，当我在文本框中输入字符串时，不会调用转换，它不会将文本框文本转换为空白。”

在这里，只有在与 TextBox 的 Text 属性的绑定发生变化时才会调用 Convert 方法。因为，您已经提到了 Mode=TwoWay 进行绑定，所以当您在文本框中输入任何文本时，将调用**ConvertBack 方法**，并且从此方法返回的值将分配给 Source，在您的情况下，它是 SelectedEntity.Amount。

我不明白为什么我们需要显式编写 GetBindingExpression(TextBox.TextProperty).UpdateSource(); 失去焦点的代码更新源代码。

理想情况下，由于您保留了绑定模式两种方式，它应该在调用 Converter 的 ConvertBack 方法后更新源。转换器代码对我来说看起来不错。

如果您需要更多详细信息，或者我可能误解了某些内容，请告诉我，请澄清这些观点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:26:44.497

如果您手动更新 TextChanged 事件中的绑定，如下所示：

```
GetBindingExpression(TextBox.TextProperty).UpdateSource(); 
```

也许您将在 LostFocus 事件中获得的值与您在 TextChanged 事件中更新的值没有什么不同！

所以，很可能转换器不会被调用，只是因为绑定中的值没有改变！

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:16:40.567

`TwoWay``TextChanged`与事件绑定的模式`LostFocus`绝对不是最好的方法。为什么默认调用`GetBindingExpression(TextBox.TextProperty).UpdateSource();`if`LostFocus`绑定？如果要手动更新绑定，请设置`UpdateSourceTrigger=Explicit`.

无论如何，您的转换器看起来不错，但我认为您不需要它。如果我理解正确，如果无法将文本转换为十进制，则要清除文本。在这种情况下，您有几个选项，例如创建`TextBox`只允许数字的自定义，或者您可以从[Silverlight Toolkit](http://silverlight.codeplex.com/)`NumericUpDown`检查控件。我也在[这里](https://stackoverflow.com/questions/9044770/silverlight-textbox-to-accept-only-decimals)找到了类似的问题。

如果您已经安装`Microsoft Expression Blend`（如果没有，您可以`BlendSLSDK_en.msi`从[Microsoft Expression Blend Software Development Kit](http://www.microsoft.com/en-us/download/details.aspx?id=3062)下载），将`System.Windows.Interactivity`dll 添加到您的项目中并`Behavior`像这样简单地创建：

```
public class TextBoxClearTextBehavior : System.Windows.Interactivity.Behavior<System.Windows.Controls.TextBox>
{
    protected override void OnAttached()
    {
        AssociatedObject.LostFocus += AssociatedObjectLostFocus;
        base.OnAttached();
    }

    protected override void OnDetaching()
    {
        AssociatedObject.LostFocus -= AssociatedObjectLostFocus;
        base.OnDetaching();
    }

    private void AssociatedObjectLostFocus(object sender, System.Windows.RoutedEventArgs e)
    {
        decimal result;
        if (!decimal.TryParse(AssociatedObject.Text, out result))
            AssociatedObject.Text = string.Empty;
    }
} 
```

并像使用它一样

```
xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"

...    

<TextBox Text="{Binding Amount, Mode=TwoWay, StringFormat=\{0:n2\}}">
    <i:Interaction.Behaviors>
        <Behavior:TextBoxClearTextBehavior/>
    </i:Interaction.Behaviors>
</TextBox> 
```

# iphone - 在导航栏中向上移动按钮不起作用IOS

> ID：12072979
> 
> 赞同：1
> 
> 时间：2012-08-22T12:18:28.447
> 
> 标签：iphone, objective-c, ios, xcode

我在导航栏中有一个按钮。我正在尝试将文本向上移动一点，以便我可以再添加一个文本下行，但是它不起作用，无论我的矩形位置如何，文本总是在中间。是否可以在导航栏中向上或向下移动按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T12:29:56.887

如果你想要移动按钮标题，你可以使用它。

```
[button setTitleEdgeInsets:UIEdgeInsetsMake(0, 10, 0, 0)]; 
```

# oop - 封装与抽象现实世界的例子

> ID：12072980
> 
> 赞同：48
> 
> 时间：2012-08-22T12:18:29.513
> 
> 标签：oop, programming-languages

对于封装的一个例子，我可以想到用户和手机之间的交互。用户不需要知道手机的内部工作原理就可以进行操作，所以这叫做抽象。但是封装在这个例子中适合什么地方呢？有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-08-22T13:58:34.457

**封装**是实现[*“信息隐藏”*](http://en.wikipedia.org/wiki/Information_hiding)的一种方式，所以按照你的例子，你不需要*“知道手机内部的工作原理就可以操作”*。您有一个*接口*来使用设备行为，而无需了解实现细节。

**另一方面，**抽象**可以解释为对不同对象使用相同*接口的能力。*可以存在同一接口的不同实现。*封装*隐藏了细节。**

 *** * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-08-22T12:26:47.123

**抽象**：你永远不会买“设备”，但总是买更具体的东西：iPhone、GSII、诺基亚 3310……这里，iPhone、GSII 和 N3310 是具体的东西，设备是抽象的。

**封装**：你有几个设备，它们都有一个 USB 端口。你不知道后面是什么样的印刷电路，你只需要知道你可以将 USB 电缆插入其中。

抽象是一个概念，它被封装所允许。我的例子不是最好的（两个块之间没有真正的联系）。

您可以在不使用抽象的情况下进行封装，但是如果您想在项目中使用一些抽象，则需要封装。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-08-22T17:32:25.460

通俗地说，抽象就是把复杂的东西隐藏在一个特定的过程后面，使过程看起来简单。
示例：**Monitor ON/OFF** ::--用户不需要知道太多关于 Monitor 打开或 OFF 时发生的所有芯片功能..他只需要知道 On Function ON-Monitor is On and on功能OFF-显示器关闭...

或者更好地寻找汽车——每个人都知道有一个特殊的齿轮机器可以改变齿轮，没有人会费心知道齿轮改变的所有功能。所以，这就是抽象（避免不必要的实现以防止复杂性）。

因此，如果开发人员提供了良好的抽象，用户就不会想窥探对象的内部机制。

抽象是通过使具有一个或多个方法抽象的类抽象来实现的。这只是基本特征，应该由扩展它的类来实现。 `e.g.`当您发明/设计汽车时，您定义了一个特征，例如汽车应该有 4 个门、刹车、方向盘等……所以任何使用这种设计的人都应该包含这个特征。实现不是每个抽象的头。它只会定义应该包含的特征。

封装是限制用户遵循特定程序来访问特定进程的访问控制。它只是提供安全性并确保系统健壮性。

示例：我们可以将公司中的 HR 视为按照封装原则工作的人，`.i.e.`我们不能直接与其他部门交谈，我们需要通过 HR 进行沟通。这确保了公司记录的安全性和更好的维护。

我们可以一起举一个例子`UNDER CONSTRUCTION BUILDING..`，我们可以说“不”之类的事情。管理人员所需的材料类型、工人数量等作为他们在每个建筑施工中需要的抽象。

但是，与此同时，将每个此类字段包含在充当工人和建筑投资者之间调解人的承包商中可以被视为封装。因为，它将上述所有属性隐藏到一个实体中。

> 因此，如果您到目前为止已经理解，您可以说抽象只是 ENCAPSULATION 的一个子集。即每个执行抽象的实体都在内部封装，但每一个显示封装的东西都不一定是抽象。

例如`.ToString()`，几乎每个类中定义的方法都是实现的，`Abstraction`因为我们没有内部的功能，我们只关心它将几乎所有内容都更改为字符串。并且当它作为一个单元组装时，它也被封装了..但是，私有成员我们隐藏和访问`Properties`只是封装的一个例子，因为它基本上是在牢记数据安全性的情况下完成的......！！

希望这能回答你的问题..!!

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2015-02-04T05:32:03.013

**封装**就是把变量或者东西隐藏在一个类里面，防止未经授权的人使用。所以像getter和setter这样的公共方法可以访问它，其他类调用这些方法来访问

**抽象**涉及定义代表抽象“参与者”的对象的工具，这些参与者可以执行工作、报告和更改其状态，以及与系统中的其他对象“通信”。

考虑以下实时示例：

*封装*： **作为驾驶员，您知道如何通过按下启动按钮启动汽车，启动操作的内部细节对您隐藏。所以整个启动过程对你是隐藏的，否则我们可以看出启动操作是对你封装的。**

*或者*

**驱动轮封装了从你转动轮子的过程**。

*抽象*：

在提到抽象之前，我们可以在这里取三个不同的用户（我称他们为实体）

**1) 你 2) 本地机械师 3) 专家**

**You Entity：**因为你只知道按下一个按钮来启动汽车，而幕后的所有其他操作都是从你身上抽象出来的。

**Local Mechanic Entity：**我们当地的机械师知道一些启动汽车的实现，即他可以打开汽车的引擎盖并检查电池电缆或塞子等。所以总之Local Mechanic Entity 知道汽车的一些实现。

**专家实体：**由于我们的专家（汽车设计师）机械师了解我们汽车的所有操作，因此他可以很快修复它。所以简而言之，专家实体知道汽车的所有实现。

**汽车的操作完全从你那里抽象出来，部分实现给本地机械实体，完全实现给专家实体。所以你是一个只有抽象方法的抽象类，Local Mechanic Entity 扩展了 You（因为他也是一个普通用户），他实现了一些方法，最后是我们的专家实体扩展 Local Mechanic 并实现了所有方法**。

我认为这是一个很好的 [例子。](http://blogs.siliconindia.com/deepvijay/Technology/Encapsulation-and-Abstraction-a-real-time-example-bid-wvGh8f5F89208310.html)

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2015-12-01T05:40:44.087

一切都有许多属性和行为，所以随便拿电视、手机、汽车、人类或任何东西。

## **抽象：**

1.  挑选你真正需要的对象本质的过程
2.  换句话说，从对象示例中选择您需要的属性
    *：*电视 - 声音、视觉效果、电源输入、频道输入。
    *湾。*手机 - 按钮/触摸屏、电源按钮、音量按钮、SIM 端口。
    *C。*汽车 - 转向、刹车、离合器、加速器、钥匙孔。
    *d。*人类——声音、身体、视力、听力、情绪。

## **封装：**

1.  隐藏不需要的对象的详细信息的过程
2.  换句话说，隐藏对象中不需要但对象正常工作所需的属性和操作示例：
    *a。*电视 - 扬声器、显示器、配电 b/w 组件、通道机制的内部和连接。
    *湾。*移动 - 如何解析和处理输入，如何按下按钮开/关或更改音量，sim 如何连接到服务提供商。
    *C。*汽车 - 转向如何转动汽车，如何减速或停止汽车，离合器如何工作，加速器如何提高速度，钥匙孔如何打开/关闭汽车。
    *d。*人类 - 声音是如何产生的，身体内部是什么，视力是如何工作的，听力是如何工作的，情绪是如何产生和影响我们的。

**抽象你需要的一切，封装你不需要的一切；）**

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-08-22T17:44:39.033

您问题的措辞很奇怪-抽象与封装？应该是 - 有人解释抽象和封装......

抽象是理解事物的本质。

一个现实世界的例子是抽象艺术。这种风格的艺术家试图捕捉/描绘仍然允许它成为事物的事物的本质。这种 4 行的棕色涂片抓住了公牛的本质。

封装是黑盒。

手机就是一个很好的例子。我不知道手机如何连接到卫星、塔或其他电话。我不知道这该死的东西是如何理解我的按键的，也不知道它是如何拍摄照片并将照片发送到电子邮件地址或另一个电话号码的。我不知道现代智能手机的大部分工作原理的复杂细节。但是，我可以使用它！这些电话具有标准界面（是的 - 文字和软件设计），允许了解手机基础知识的人使用几乎所有这些界面。

两者有什么关系？

抽象和封装都是面向对象思想和设计的基础。因此，在我们的手机示例中。智能手机的概念是一种抽象，其中封装了某些功能和服务。iPhone 和 Galaxy 是更高层次抽象的进一步抽象。您的物理 iPhone 或 Galaxy 是包含封装功能和服务的多层抽象的具体示例。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-12-01T18:25:11.937

**抽象** 意味着我们专注于某件事的基本品质，而不是一个具体的例子，我们会自动丢弃不重要或不相关的东西。

**示例** 我们正在编写一个银行账户类，银行账户的基本特征是开户日期、账户名称、帐号、余额等...

**封装** 意味着封装或包围某些东西的想法，不仅是为了将内容保持在一起，而且还保护和限制表单访问外部。与保密性一起，它是关于减少应用程序不同部分之间的依赖关系。

**示例** 在我们的银行账户类中，有人访问了 Balance 的属性并试图改变它，如果没有封装，尝试可以成功。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-06-27T06:28:19.653

封装就是隐藏信息。

抽象隐藏了功能细节。

封装是通过构造类来执行的。抽象是通过在类之上创建抽象类或接口来实现的。

在问题中给出的示例中，我们使用该类来实现其功能，我们并不关心设备如何实现这一点。所以我们可以说手机的细节是从我们这里“抽象”出来的。

封装隐藏了手机使用什么来实现它的功能；抽象隐藏了它是如何做到的。-

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-04-26T21:20:49.833

封装有助于遵守单一职责原则，抽象有助于遵守代码到接口而不是实现。

假设我有一个汽车类：服务提供者类和司机类：服务消费者类。

对于抽象：我们为 CAR 定义了抽象类，并在其中定义了所有的抽象方法，这些抽象方法是汽车中可用的函数，例如：changeGear()、applyBrake()。

现在实际的 Car (Concrete Class 即像 Mercedes 一样，BMW 将以自己的方式实现这些方法并抽象执行，最终用户仍将为特定的具体汽车实例应用中断和换档，并且多态地执行将按照具体类中的定义发生.

对于封装：现在说梅赛德斯提出了新功能/技术：防滑制动，在实现 applyBrake() 时，它将将此功能封装在 applyBrake() 方法中，从而提供内聚力，服务消费者仍将通过相同的方法访问 applyBrake () 的汽车对象。因此，封装可以进一步实现相同的具体类实现。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-09-23T16:42:06.030

我觉得当你看到编程中的如何不做时，讨论封装可能更有意义。例如，考虑如下的 Car 类。

```
 class Car{
   public float speed =0;
   public boolean isReverse = false;
   public boolean isStarted = false;
 } 
```

客户端代码可以使用上面的汽车类，如下所示。

```
class Main{
  public static void main(args String[]){
   Car car = new Car();
   // No need to start??
   car.speed = 100; // Turbo mode directly to 100
   car.speed = 0; // Turbo break
  }
} 
```

查看更多信息：http: [//brevitaz.com/encapsulation-example-benefits-java/](http://brevitaz.com/encapsulation-example-benefits-java/)

这是对汽车速度和其他变量的不受控制的访问。通过封装，Car 类可以完全控制 car 类中的数据变量如何被修改。

任何具有某种行为的具体实体都是封装的示例。行为是通过包裹某些东西并向客户端隐藏某些东西来提供的。在移动设备的情况下，它是信号、芯片、电路、电池等。

对于同一示例的抽象 - 普通用户可能会说我可以使用任何可以拨打和接听电话的东西。这种抽象可以被任何具体的移动设备代替。查看[抽象示例](http://brevitaz.com/abstraction-in-java/)。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-12-16T23:37:49.983

让我给出一个与 IT 接近的现实世界示例类比的 2 美分。

假设您有一个订阅网站，例如 wordpress 网站

每个用户都有一个角色，例如管理员、订阅者等。许多用户可以是管理员、订阅者等。

所以这里的抽象*体现*在**任何具有管理员角色的用户都可以做一组事情，这与具体的用户无关**（这是**抽象**的一个例子）。

另一方面，订阅者用户无权访问网站的某些设置，因此**应用程序的某些内部被封装为普通订阅者**（这是**封装**的一个示例）

正如人们所看到的，抽象和封装是相对概念，它们适用于特定的事物。

可以按照这一推理路线解释**多态性**和**继承**性。

例如，超级管理员用户可以做管理员用户可以做的所有事情，还有更多。此外，如果管理员角色获得功能更新，超级管理员将获得相同的更新。因此可以在这里看到一个**继承**的例子，超级管理员角色*继承*了管理员角色的所有属性并对其进行了扩展。**请注意**，对于网站的大部分内容，管理员可以与超级管理员互换（这意味着超级管理员用户可以轻松地代替管理员用户，但反之亦然）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-09-19T11:51:00.867

将内部细节隐藏到外部世界的抽象，例如您创建一个类（如类中的计算器之一）但最终使用您提供类的对象，在对象的帮助下他们将播放和执行操作，他不知道什么内部使用的机制类型。抽象形式的类对象。

封装是使类中的字段成为私有并通过公共方法提供对字段的访问的技术。如果一个字段被声明为私有，则类外的任何人都无法访问它，从而隐藏了类内的字段。因此，封装也称为数据隐藏。例如包含私有方法 getAdd,getMultiply 的类计算器。

Mybe上面的答案将帮助您理解这个概念。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-07-10T14:30:53.043

如果您看过重要的电视机，电视机的连接线和电视机的彩管都隐藏在电视机壳内，像我们这样的观众没有暴露在外，只暴露了电视机的必要部件，如电视频道键、电视音量键、ON/OFF 开关、有线电视开关和电视遥控器供观众使用。这意味着电视机器、电视连接和电视彩色管是不需要的数据，观众不需要看到它们对外界隐藏

所以封装意味着隐藏类的重要特性，这些特性不需要暴露在类之外，只暴露类的必要内容。这里类的隐藏部分的行为类似于封装，而类的暴露部分的行为类似于抽象。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-09-05T09:35:05.873

只需将*抽象*视为隐藏键盘和显示屏细节， 将*封装*视为隐藏绑定它们的内部电路。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-10-04T22:24:40.493

我想蛋壳可以考虑封装和抽象的内容。外壳保护信息。没有壳你就不能拥有鸡蛋的内容。，，哈哈

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-06-25T16:10:14.727

抽象

它用于管理 OOP 的复杂性。通过使用此属性，我们可以向用户提供对象的基本特征，而不包括其背景说明。例如，当向朋友发送消息时，我们只需编写消息，说“hiiii”并按“发送”，消息就会被传递到其目的地（她，朋友）。在这里，我们看到了抽象的工作，即我们不太关心负责发送和接收消息的移动设备的内部工作

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-12-08T11:12:11.210

让我借助您给出的有关手机的示例来解释抽象和封装。

**抽象**

手机内部的工作对用户是隐藏的。用户通过屏幕/按钮与手机进行交互。这相当于通过对象与类进行交互。这里的类是移动设备，对象是屏幕/按钮。

**封装**

在手机中，我们可以看到电池、CPU、RAM、摄像头等一起被包含在一个盒子/容器内。这类似于类如何封装其所有方法和变量。方法和变量包含在类中。

另外，你不能访问手机的内部组件吧？为此，您需要特殊的螺丝刀。手机内部的组件是安全的。同样，我们可以保护类中的组件或变量。我们使用私有访问修饰符保护它。私有访问修饰符是手机的容器。我们可以在 setter 和 getter 的帮助下访问私有字段。这些 getter 和 setter 就像特殊的螺丝刀。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-03-15T13:19:50.943

**抽象**

我们在日常生活中使用了许多抽象概念。考虑一辆汽车。我们大多数人对汽车的工作原理都有一个抽象的看法。我们知道如何与它交互以让它做我们想做的事情：我们加油，转动钥匙，踩一些踏板，等等。但我们不一定了解汽车内部发生了什么以使其移动，我们也不需要。数以百万计的人每天使用汽车，却不了解汽车的工作细节。抽象帮助我们上学或上班！

程序可以设计为一组交互抽象。在 Java 中，这些抽象被捕获在类中。类的创建者显然必须知道它的接口，就像汽车司机可以在不知道引擎如何工作的情况下使用车辆一样。

**封装**

考虑一个银行系统。银行系统具有帐号、帐户类型、余额等属性。如果有人试图更改账户余额，如果没有封装，尝试可以成功。因此封装允许类完全控制它们的属性。**

# oracle - Oracle JPX 文件导入中止

> ID：12072981
> 
> 赞同：0
> 
> 时间：2012-08-22T12:18:29.973
> 
> 标签：oracle

我运行以下命令来导入我的 .jpx 文件（我已上传到服务器）：

```
C:\jdeveloper\jdevbin\oaext\bin\jpximport C:\jdeveloper\jdevhome\jdev\myclasses\ORAR12DEV.jpx -username username -password password -dbconnection "(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=mydb.mycompany.com)(PORT=1523))(CONNECT_DATA=(DEV)))" 
```

问题是导入刚刚退出并显示“已中止”的错误。没有其他的。有什么想法可能是错的吗？

（jpx文件是jDeveloper生成的，所以我**觉得**不错）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:23:08.577

条目`SID`中缺少关键字-`TNS``...(CONNECT_DATA=(DEV))...`

更正的命令-

```
C:\jdeveloper\jdevbin\oaext\bin\jpximport C:\jdeveloper\jdevhome\jdev\myclasses\ORAR12DEV.jpx -username username -password password -dbconnection "(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=mydb.mycompany.com)(PORT=1523))(CONNECT_DATA=(SID=DEV)))" 
```

# xamarin.ios - 仅为某些视图隐藏主 UISplitViewController

> ID：12072984
> 
> 赞同：3
> 
> 时间：2012-08-22T12:18:31.253
> 
> 标签：xamarin.ios, uisplitviewcontroller, uisplitviewdelegate

我有一个 UISplitViewController，它在 master 中有一个 UINavigationController，在 detail 中有一个 UIViewController。当设备定向为横向模式时，我希望保留正常行为。即大师以横向显示并以纵向隐藏。

但是，取决于用户在主控中单击的内容，取决于将哪个 UIViewController 加载到 UISplitViewController 的详细信息部分。我想要的是当用户单击详细 UIViewController 中的按钮时，master 以横向模式隐藏。问题是我无法让它工作。

我的代表看起来像这样（删除了一些行以便于查看）：

```
public class SplitControllerDelegate : UISplitViewControllerDelegate {
                    SplitViewController incomingController;

     private bool hideMaster = false;

     public override bool ShouldHideViewController (UISplitViewController svc,        
                                       UIViewController viewController, 
                                       UIInterfaceOrientation inOrientation) {
          return hideMaster;
     }
     public void SetHideMaster(bool value) {
          hideMaster = value;
     }

} 
```

然后我从详细的 UIViewController 中调用它，例如

```
 splitControllerDelegate.SetHideMaster(value); 
```

然而，什么都没有改变。我不确定如何使它执行更改？主人应该立即消失吗？是什么导致 WillHideViewController 触发？

谢谢

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T06:59:25.583

你想做的事情不能正式完成。`ShouldHideViewController()`仅在设备旋转时调用。因此，除非您前后旋转，否则您的控制器不会消失。

您有多种选择：

*   不要使用`UIListViewController`其他第三方替代品
*   使用 iOS5 的 UIViewController 包含特性，实现自己的拆分视图
*   应用 hack 到`UISplitViewController`

关于最后一点。如果您将属性设置为然后分配一个新的委托，您应该能够强制`ShouldHideViewController()`被调用。然后，使用当前方向调用拆分视图控制器的方法。`Delegate``NULL``WillRotate()`

我会选择第二个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:21:38.693

按照设计，您不能对标准 UISplitView 做太多事情，请尝试使用第三方控件：

[https://github.com/mattgemmell/MGSplitViewController](https://github.com/mattgemmell/MGSplitViewController)

# web2py - web2py sqlform错误

> ID：12072989
> 
> 赞同：0
> 
> 时间：2012-08-22T12:18:49.857
> 
> 标签：web2py

我是 web2py 的新手，我正在为此苦苦挣扎

我正在尝试创建一个注册和登录的东西。在模型中，我有以下代码为新用户创建表格

```
usersdb = DAL('postgres://postgres:postgres@localhost/'+ request.vars['school'], migrate=True)
auth = Auth(usersdb, hmac_key=Auth.get_or_create_key())
usersdb.define_table(
    'users',
    Field('first_name', length=128, default=''),
    Field('last_name', length=128, default=''),
    Field('email', length=128, default='', unique=True),
    Field('address', length=256, default=''),
    Field('postcode', length=128, default=''),
    Field('city', length=128, default=''),
    Field('password', 'password', length=512, readable=False, label='Password'),
    Field('registration_key', length=512, writable=False, readable=False, default=''),
    Field('reset_password_key', length=512, writable=False, readable=False, default=''),
    Field('registration_id', length=512, writable=False, readable=False, default=''),
    format='%(first_name)s %(last_name)s') 
```

所以现在在控制器中我有以下代码：

```
usersdb = DAL('postgres://postgres:postgres@localhost/'+ request.vars['school'], migrate=True)
auth = Auth(usersdb, hmac_key=Auth.get_or_create_key())
auth.settings.registration_requires_approval = True
form = SQLFORM(usersdb.users)
if form.process(session=None, formname='test').accepted:
    response.flash = 'form accepted'
elif form.errors:
    response.flash = 'form has errors'
else:
    response.flash = 'please fill the form'
 # Note: no form instance is passed to the view

 #set sample validator (do not allow empty nor duplicate names)
return dict(form=form,config=config) 
```

该错误记录在 SQLFORM (usersdb.users) 中。“用户”

我不知道这些东西实际上是如何工作的（将数据库连接到控制器）。我正在破解 smb 编写的代码。别的。

感谢您的任何建议或简短的解释。

再见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:37:08.110

您不应重复控制器中的`userdb`或的定义。`auth`模型文件在每个请求上执行（条件模型文件除外），并且控制器在包含模型中定义的任何对象的环境中执行。`userdb`在您的控制器中，您正在用一个新对象覆盖原始对象，并且您正在重新定义`auth`但没有重新创建“用户”表 - 因此`userdb`.

只需从控制器中删除`userdb`and`auth`定义。