# StackOverflow 问答 000914000-000914999

# c++ - C++ 中的单元测试

> ID：914000
> 
> 赞同：13
> 
> 时间：2009-05-27T04:53:08.820
> 
> 标签：c++, unit-testing, qt, tdd, qt-creator

我一直在阅读很多关于单元测试和测试驱动开发的文章。

最近也在看java单元测试代码。

然而，我更喜欢在 Qt 中开发。因此，我搜索了“C++ 中的单元测试”，并找到了大量有关 C++ 可用的各种单元测试框架的信息。

但是，我找不到各种框架的可靠比较。

所以我期待 SO 社区来指导我选择什么可能是 C++ 的“最佳”单元测试框架。

此外，如果有人对 Qt 中的 TDD（尤其是使用 Qt-Creator）有具体的评论，那么他们非常受欢迎。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-27T05:29:00.817

通常使用[Boost](http://www.boost.org/doc/libs/1_52_0/libs/test/doc/html/intro.html)，但如果您使用 Qt，他们的[QtTestLib](http://qt-project.org/doc/qt-5.0/qttestlib/qtest-overview.html)可能是更好的选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-10T12:30:47.583

我会推荐[doctest](https://github.com/onqtam/doctest)（由我创建）——它是所有流行测试框架中编译时间最轻的。它也是目前最常用的框架[Catch](https://github.com/philsquared/Catch)的直接竞争对手- 查看[常见问题解答中的差异](https://github.com/onqtam/doctest/blob/master/doc/markdown/faq.md#how-is-doctest-different-from-catch)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-27T05:04:26.570

这似乎也与以下问题相同：

[尽管有 URL 标题，但 C++ 中的单元测试](https://stackoverflow.com/questions/387272/unit-testing-in-c)实际上是 C++。

从那里，他们链接到另外两个应该有帮助的 SO 问题：

[C++ 代码的单元测试 - 工具和方法](https://stackoverflow.com/questions/91384/unit-testing-for-c-code-tools-and-methodology) [C++ 单元测试框架](https://stackoverflow.com/questions/87794/c-unit-testing-framework)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-27T05:19:48.717

“xUnit”系列测试框架通常非常可靠（jUnit、NUnit 等）。我自己没有使用过，但是有一个用于 C++ 的 jUnit 端口：

[http://sourceforge.net/projects/cppunit](http://sourceforge.net/projects/cppunit)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-27T06:31:03.140

有一个表格比较了所有（？）可从维基百科获得[的 C++ 单元测试框架。](http://en.wikipedia.org/wiki/List_of_unit_testing_frameworks#C.2B.2B)

还有一个旧[的 C++ 单元测试框架比较](http://gamesfromwithin.com/?p=29)可用。我不认为它没有更新，所以我把它作为补充提到它，因为它比表格更有争议。它涵盖了 CppUnit、CppUnitLite、Boost.Test、NanoCppUnit、Unit++、CxxTest，尤其是它不包括[Google C++ 框架](http://code.google.com/p/googletest)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-27T05:00:36.383

[Boost](http://www.boost.org/)通常是一个不错的选择，它包含一个测试框架，即[Boost 测试库](http://www.boost.org/doc/libs/1_39_0/libs/test/doc/html/index.html)。我已经将它用于小型测试用例，它达到了我的预期，但我没有像在 TTD 中那样广泛使用它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-05T21:28:16.210

如果您想在不弄清楚如何构建库的情况下快速起步，有一个头文件包含解决方案，它支持固定装置（设置和拆卸）、通常的 TEST() {} 和 CHECK_TRUE 等。它还具有内存泄漏检测和性能测试能力。

[https://gitlab.com/cppocl/unit_test_framework](https://gitlab.com/cppocl/unit_test_framework)

# oracle - 多个 Oracle 客户端

> ID：914006
> 
> 赞同：0
> 
> 时间：2009-05-27T04:54:43.610
> 
> 标签：oracle, ado

如果我在给定工作站上安装了多个 Oracle 客户端（即 Oracle 9 和 Oracle 10），我如何指定 ADO 使用哪一个？有没有办法在两个客户端之间进行交换？

我目前使用的是 Oracle 提供 - oraoledb，而不是 Microsoft 提供者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T03:14:08.787

显然，我问了一个技巧问题……虽然您确实可以使用多个 Oracle Home，但 Oraoledb 驱动程序不支持多个 Home。事实上，由于 OraOLEDB 组件是基于 COM 的，它一次只能正确安装到一个位置......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T05:05:11.110

Microsoft 提供程序取决于当前的 Oracle Home（环境路径）。现在您可以通过 Oracle Home 选择器更改此设置，但 Microsoft 提供程序不支持以编程方式更改路径的功能。

[来源](http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/b1d4da00-1c08-4f61-a6c1-3bba51ffdab3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T07:30:02.717

使用在 PATH 环境变量中指定的第一个 oracle home。请注意，这是特定于用户的，如果您在进程中更改它，它是该进程的本地。

一般来说，您不应该在软件中切换家庭，尽管只需使用最新的。除非您的目标是 8i，否则 10g 客户端可以毫无问题地连接到 9i。

# sql - 将 FOR XML AUTO 结果保存到 SQL 中的变量

> ID：914009
> 
> 赞同：20
> 
> 时间：2009-05-27T04:55:32.127
> 
> 标签：sql, sql-server, xml, tsql

```
select @result=@input.query('*')
for xml raw,type 
```

以上语句将生成以下警报：
消息 6819，级别 16，状态 3，第 2 行
ASSIGNMENT 语句中不允许使用 FOR XML 子句。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-05-27T04:59:34.717

例如

```
DECLARE @xml_var XML  
SET @xml_var =  
(
  SELECT   *,
    (  
      SELECT *

      FROM Orders

      WHERE Orders.CustomerID=Customers.CustomerID

      FOR XML AUTO, TYPE

    )

  FROM Customers WHERE CustomerID='ALFKI'

  FOR XML AUTO, TYPE

) 
```

参考：http: [//blogs.msdn.com/sqlprogrammability/articles/576095.aspx](http://blogs.msdn.com/sqlprogrammability/articles/576095.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-08-20T09:53:46.557

```
DECLARE @RESULTS XML
SET @RESULTS = (SELECT * FROM Table_Name FOR XML AUTO)
SELECT @RESULTS 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-16T23:19:32.217

对于那些使用 SQL SERVER 2000 的人来说，FOR XML 几乎是无用的；您不能将生成的 XML 分配给变量、插入表等。我必须在需要时手动完成，这是我的示例：

```
SET NOCOUNT ON

create table #parcelData (
    parcelID    int
    , [description] varchar(20)
)
--insert sample data
insert into #parcelData
select 1, 'apples' UNION
select 3, 'oranges' UNION
select 25, 'bananas' UNION
select 69, 'maracuja'

print '-- Example 1: FOR XML RAW --'
select parcelID as pID
from #parcelData
ORDER BY parcelID
FOR XML RAW
--> <row pID="17"/><row pID="25"/><row pID="26"/><row pID="333"/>

print '-- Example 2: Build XML Manually --'

declare   @parcelRow varchar(50), @dummy int
    , @xmlRowStr varchar(8000)
set @xmlRowStr = '' -- initialize.

DECLARE parcel_cursor CURSOR FOR 
    select DISTINCT '<row pID="' + cast(parcelID as varchar(10)) + '"/>', parcelID as parcelRow
    from #parcelData
    ORDER BY parcelID
OPEN parcel_cursor

FETCH NEXT FROM parcel_cursor
INTO @parcelRow, @dummy

WHILE @@FETCH_STATUS = 0 BEGIN
    -- build the xml row by row.
    set @xmlRowStr = @xmlRowStr + @parcelRow

    -- Get next row
    FETCH NEXT FROM parcel_cursor
    INTO @parcelRow, @dummy
END

CLOSE parcel_cursor
DEALLOCATE parcel_cursor
--print @xmlRowStr 

-- wrap a root element around 
if @xmlRowStr != '' begin
    set @xmlRowStr = '<ROOT>' + @xmlRowStr + '</ROOT>'
end
select @xmlRowStr as XmlOut

DROP TABLE #parcelData 

SET NOCOUNT OFF 
```

# java - NamespaceContext 和使用 XPath 的命名空间

> ID：914013
> 
> 赞同：17
> 
> 时间：2009-05-27T04:57:04.093
> 
> 标签：java, xml, xpath

在 Java 中解析包含命名空间的 xpath 似乎需要使用`NamespaceContext`对象，将前缀映射到命名空间 url，反之亦然。但是，除了自己实现之外，我找不到其他机制来获得`NamespaceContext`它。这似乎违反直觉。

**问题：**是否有任何简单的方法可以`NamespaceContext`从文档中获取，或者创建一个，或者失败，完全放弃前缀并指定具有完全限定名称的 xpath？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-28T10:47:50.497

无需编写自己的类即可获得*NamespaceContext实例。*它的[类使用](http://java.sun.com/javase/6/docs/api/javax/xml/namespace/class-use/NamespaceContext.html)页面显示您可以使用[javax.xml.stream](http://java.sun.com/javase/6/docs/api/javax/xml/stream/package-summary.html)包获得一个。

```
String ctxtTemplate = "<data xmlns=\"http://base\" xmlns:foo=\"http://foo\" />";
NamespaceContext nsContext = null;

XMLInputFactory factory = XMLInputFactory.newInstance();
XMLEventReader evtReader = factory
    .createXMLEventReader(new StringReader(ctxtTemplate));
while (evtReader.hasNext()) {
  XMLEvent event = evtReader.nextEvent();
  if (event.isStartElement()) {
    nsContext = ((StartElement) event)
        .getNamespaceContext();
    break;
  }
}

System.out.println(nsContext.getNamespaceURI(""));
System.out.println(nsContext.getNamespaceURI("foo"));
System.out.println(nsContext
    .getNamespaceURI(XMLConstants.XMLNS_ATTRIBUTE));
System.out.println(nsContext
    .getNamespaceURI(XMLConstants.XML_NS_PREFIX)); 
```

完全放弃前缀可能会导致模棱两可的表达式 - 如果您想删除名称空间前缀，您需要更改文档格式。从文档创建上下文不一定有意义。前缀必须与 XPath 表达式中使用的前缀匹配，而不是任何文档中的前缀，如以下代码所示：

```
String xml = "<data xmlns=\"http://base\" xmlns:foo=\"http://foo\" >"
    + "<foo:value>"
    + "hello"
    + "</foo:value>"
    + "</data>";
String expression = "/stack:data/overflow:value";
class BaseFooContext implements NamespaceContext {
  @Override
  public String getNamespaceURI(String prefix) {
    if ("stack".equals(prefix))
      return "http://base";
    if ("overflow".equals(prefix))
      return "http://foo";
    throw new IllegalArgumentException(prefix);
  }

  @Override
  public String getPrefix(String namespaceURI) {
    throw new UnsupportedOperationException();
  }

  @Override
  public Iterator<String> getPrefixes(
      String namespaceURI) {
    throw new UnsupportedOperationException();
  }
}
XPathFactory factory = XPathFactory.newInstance();
XPath xpath = factory.newXPath();
xpath.setNamespaceContext(new BaseFooContext());
String value = xpath.evaluate(expression,
    new InputSource(new StringReader(xml)));
System.out.println(value); 
```

StAX API 返回的实现和上面的实现都没有实现文档中定义的完整[类](http://java.sun.com/javase/6/docs/api/javax/xml/namespace/NamespaceContext.html)/[方法协定。](http://java.sun.com/javase/6/docs/api/javax/xml/namespace/NamespaceContext.html#getNamespaceURI(java.lang.String))[您可以在此处](http://illegalargumentexception.blogspot.com/2009/05/java-using-xpath-with-namespaces-and.html)获得完整的、基于地图的实现。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-11-24T05:00:32.187

我自己一直在使用 xpath 和 NamespaceContexts。[我在 developerworks 上](http://www.ibm.com/developerworks/xml/library/x-nmspccontext/index.html?ca=drs-)遇到了对这个问题的良好处理。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2010-12-06T09:18:53.003

**[我在“ Apache WebServices Common Utilities](http://ws.apache.org/commons/util/apidocs/index.html)** ”中找到了一个方便的实现，名为 NamespaceContextImpl。

您可以使用以下 maven 依赖项来获取此类：

```
<dependency>
    <groupId>org.apache.ws.commons</groupId>
    <artifactId>ws-commons-util</artifactId>
    <version>1.0.1</version>
</dependency> 
```

我以以下方式使用它（我知道它是为 sax 构建的，但在阅读代码后，它没问题）：

```
NamespaceContextImpl nsContext = new NamespaceContextImpl();
nsContext.startPrefixMapping("foo", "my.name.space.com"); 
```

您不需要调用 endPrefixMapping。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-03T05:47:44.273

如果您使用的是 Spring 框架，则可以重用它们的 NamespaceContext 实现 `org.springframework.util.xml.SimpleNamespaceContext`

这是一个类似于 Asaf Mesika 的答案。因此，它不会根据您的文档自动为您提供 NamespaceContext。您必须自己构建它。它仍然可以帮助您，因为它至少为您提供了一个开始的实现。

当我们遇到类似的问题时，spring`SimpleNamespaceContext`和“Apache WebServices Common Utilities”都起作用了。我们想避免对 Apache WebServices Common Utilities 的附加 jar 依赖并使用 Spring 之一，因为我们的应用程序是基于 Spring 的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-18T19:46:01.337

如果您使用[Jersey 2](https://jersey.java.net/documentation/latest/index.html)并且只有一个默认 XML 命名空间 ( `xmlns="..."`)，则可以使用[SimpleNamespaceResolver](https://github.com/jersey/jersey/blob/2.21/core-common/src/main/java/org/glassfish/jersey/internal/util/SimpleNamespaceResolver.java)：

```
<?xml version="1.0" encoding="UTF-8"?>
<Outer xmlns="http://host/namespace">
    <Inner />
</Outer> 
```

```
DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
docBuilderFactory.setNamespaceAware(true);
DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();

Document document = docBuilder.parse(new File("document.xml"));
String query = "/t:Outer/t:Inner";

XPath xpath = XPathFactory.newInstance().newXPath();
String xmlns = document.getDocumentElement().getAttribute("xmlns");
xpath.setNamespaceContext(new SimpleNamespaceResolver("t", xmlns));

NodeList nodeList = (NodeList) xpath.evaluate(query, document, XPathConstants.NODESET);

//nodeList will contain the <Inner> element 
```

如果需要，您也可以`xmlns`手动指定。

# ruby-on-rails - Ruby on Rails 在 FreeBSD 上启动非常缓慢

> ID：914019
> 
> 赞同：0
> 
> 时间：2009-05-27T04:59:15.870
> 
> 标签：ruby-on-rails, freebsd

我一直在 FreeBSD 上运行 Ruby on Rails。加载环境需要 10-20 秒。有什么办法可以让它加载得更快，还是 FreeBSD 不是 Ruby on Rails 的好平台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-10-13T17:38:05.177

Phusion 的 Ruby 企业版在 FreeBSD 上编译，运行速度更快，内存使用量更低。（还）没有端口，但您可以从他们的站点下载它并运行安装脚本。

# xml - 带有导入和命名空间的 XSD

> ID：914020
> 
> 赞同：6
> 
> 时间：2009-05-27T04:59:23.547
> 
> 标签：xml, import, xsd, namespaces

嗨，我正试图让我的想法围绕 XSD、XML 和命名空间，但我无法让事情按照我想要的方式工作。

我有一个 XSD，目前它的开头是这样的：

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="unqualified" 
           xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns="http://www.example.com">
    <xs:import namespace="http://www.example.com" schemaLocation="Include.xsd" /> 
```

如您所见，它导入了另一个 xsd 文件，其开头如下：

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="unqualified" 
           targetNamespace="http://www.example.com" 
           xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns="http://www.example.com"> 
```

然后我有一些基于此架构的 xml 文档：

```
<foobar>
    <whatever>.... 
```

基本上我不在乎命名空间是什么，我只想让这该死的东西起作用。以前我没有使用任何命名空间，但似乎我必须使用它们才能将一个 XSD 导入另一个 XSD。我不想做的是必须为我的 xml 文档中的所有元素提供前缀。

为了实现这一点，对于XSD 和 XML 文档中的各种属性（ *targetNamespace、命名空间、xmlns、elementFormDefault等），我需要什么样的值组合？*

目前，在导入的 XSD 文档中定义的任何元素都需要在 XML 中进行命名空间限定。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-27T07:53:27.350

如果您不使用命名空间或者您的模式共享相同的命名空间，那么使用 xs:include 而不是 xs:import 会更好。如果 B 具有与 A 相同的命名空间或没有声明命名空间（如果是后者，则 B 在包含时“采用”包含器的命名空间），则架构 A 可以包含架构 B。所以......像：

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="unqualified" 
           xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns="http://www.example.com">
    <xs:include schemaLocation="Include.xsd" />

<!-- ... -->

</xs:schema> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T05:15:10.027

如果您想避免 XML 元素上的前缀，我认为您需要将 elementFormDefault 设置为“不合格”。其余的应该没问题，我认为 - 您的主服务器和导入的 XSD 之间的命名空间是相同的 - 没关系。您指定不带前缀的 xmlns= - 这很好。你应该很高兴。

马克

# command-line - 制作用于复制的批处理文件

> ID：914025
> 
> 赞同：0
> 
> 时间：2009-05-27T05:02:50.627
> 
> 标签：command-line, copy, dos, xcopy

谁能告诉我，我在 C 驱动器上使用 Windows XP Pro，并且需要能够将文件从一个驱动器复制到另一个驱动器。此案例原始文件必须重命名，并且必须将旧文件放在服务器示例 K 驱动器上的另一个分区上。或者，还有另一个选项在另一台计算机上使用 Windows 7 而不是 Windows XP Pro。所以任何答案表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T07:07:26.777

输入`copy /?`或`xcopy /?`找出可用选项 - 如果您附加`>file.txt`，您将在文本文件中获得它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T05:15:46.253

快速浏览一下我保存的旧 DOS 书籍，以防万一我必须制作批处理文件，说 COPY 是正确的命令。
句法：

> 复制驱动器：文件名驱动器：文件名
> 复制这个文件那个文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T05:16:39.060

如果您的权限设置为允许复制，您可以使用“ [UNC](http://www.uwplatt.edu/oit/terms/uncpath.html) ”路径跨服务器和驱动器复制文件。

就像诺亚说的那样，看看[ROBOCOPY](http://en.wikipedia.org/wiki/Robocopy)或功能稍少的[XCOPY](http://www.computerhope.com/xcopyhlp.htm)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T15:31:19.913

XCOPY 命令：

```
xcopy c:\sourceDirectory\*.* d:\destinationDirectory\*.* /D /E /C /R /Y 
```

ROBOCOPY 命令：

```
robocopy c:\sourceDirectory\*.* d:\destinationDirectory\*.* /R:5 /W:3 /Z /XX /TEE 
```

这些中的任何一个都应该适合你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T05:08:33.027

你有没有研究过robocopy？

# asp.net - 从 ASP.NET 禁用所有浏览器的浏览器缓存

> ID：914027
> 
> 赞同：88
> 
> 时间：2009-05-27T05:03:08.053
> 
> 标签：asp.net, http, browser, caching

我正在明确参考禁用浏览器缓存页面所需的 ASP.NET 代码。有很多方法可以影响 HTTP 标头和元标记，我的印象是需要不同的设置才能让不同的浏览器正常运行。获得注释的参考代码位以指示哪些代码适用于所有浏览器以及特定浏览器（包括版本）需要哪些代码，这将是非常棒的。

那里有大量关于这个问题的信息，但我还没有找到一个很好的参考来描述每种方法的好处以及特定技术是否已被更高级别的 API 取代。

我对 ASP.NET 3.5 SP1 特别感兴趣，但最好也能获得早期版本的答案。

这篇博客文章[Firefox 和 IE 缓存之间的两个重要差异](http://blog.httpwatch.com/2008/10/15/two-important-differences-between-firefox-and-ie-caching/)描述了一些 HTTP 协议行为差异。

以下示例代码说明了我感兴趣的类型

```
public abstract class NoCacheBasePage : System.Web.UI.Page
{
    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);

        DisableClientCaching();
    }

    private void DisableClientCaching()
    {
        // Do any of these result in META tags e.g. <META HTTP-EQUIV="Expire" CONTENT="-1">
        // HTTP Headers or both?

        // Does this only work for IE?
        Response.Cache.SetCacheability(HttpCacheability.NoCache);

        // Is this required for FireFox? Would be good to do this without magic strings.
        // Won't it overwrite the previous setting
        Response.Headers.Add("Cache-Control", "no-cache, no-store");

        // Why is it necessary to explicitly call SetExpires. Presume it is still better than calling
        // Response.Headers.Add( directly
        Response.Cache.SetExpires(DateTime.UtcNow.AddYears(-1));
    }
} 
```

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2009-05-27T22:39:30.683

这是我们在 ASP.NET 中使用的：

```
// Stop Caching in IE
Response.Cache.SetCacheability(System.Web.HttpCacheability.NoCache);

// Stop Caching in Firefox
Response.Cache.SetNoStore(); 
```

它在 Firefox 和 IE 中停止缓存，但我们还没有尝试过其他浏览器。这些语句添加了以下响应标头：

```
Cache-Control: no-cache, no-store
Pragma: no-cache 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2011-04-14T14:06:31.620

对于它的价值，我只需要在我的 ASP.NET MVC 3 应用程序中处理它。这是我在 Global.asax 文件中用于处理所有请求的代码块。

```
 protected void Application_BeginRequest()
    {
        //NOTE: Stopping IE from being a caching whore
        HttpContext.Current.Response.Cache.SetAllowResponseInBrowserHistory(false);
        HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
        HttpContext.Current.Response.Cache.SetNoStore();
        Response.Cache.SetExpires(DateTime.Now);
        Response.Cache.SetValidUntilExpires(true);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-11-22T07:21:56.703

我尝试了各种组合并让它们在 FireFox 中失败。已经有一段时间了，所以上面的答案可能很好，或者我可能错过了一些东西。

一直对我有用的是将以下内容添加到每个页面的头部或模板（.net 中的母版页）。

```
<script language="javascript" type="text/javascript">
    window.onbeforeunload = function () {   
        // This function does nothing.  It won't spawn a confirmation dialog   
        // But it will ensure that the page is not cached by the browser.
    }  
</script> 
```

这已经为我禁用了所有浏览器中的所有缓存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T16:03:07.660

我知道有两种方法。首先是告诉浏览器不要缓存页面。将 Response 设置为 no cache 可以解决这个问题，但是您怀疑浏览器通常会忽略此指令。另一种方法是将响应的日期时间设置为未来的某个时间点。我相信所有浏览器在将页面添加到缓存时都会将其更正为当前时间，但在进行比较时它会将页面显示为较新的页面。我相信在某些情况下可能没有进行比较。我不确定细节，它们会随着每个新的浏览器版本而改变。最后一点我有更好的“刷新”自己的页面（另一个响应指令）。刷新似乎不太可能来自缓存。

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T03:00:00.920

我将测试将 no-store 标签添加到我们的网站，看看这是否会对浏览器缓存产生影响（Chrome 有时会缓存页面）。我还发现这篇文章对关于缓存如何以及为什么工作的文档非常有用，如果 no-store 不可靠，我将查看 ETag 的下一个：

[http://www.mnot.net/cache_docs/](http://www.mnot.net/cache_docs/)

[http://en.wikipedia.org/wiki/HTTP_ETag](http://en.wikipedia.org/wiki/HTTP_ETag)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-05T09:11:59.700

另请参阅[如何防止谷歌浏览器缓存我的输入，尤其是当用户单击返回时隐藏的输入？](https://stackoverflow.com/q/2629593/49942)没有它，Chrome 可能会重新加载，但会保留元素的先前内容`<input>`——换句话说，使用`autocomplete="off"`.

# ruby-on-rails - Netbeans/Ruby - 无关（？）自动完成信息

> ID：914031
> 
> 赞同：5
> 
> 时间：2009-05-27T05:04:52.497
> 
> 标签：ruby-on-rails, ruby, netbeans, autocomplete

我在 Ruby Netbeans 6.5.1 中获得了大量（我称之为）无关的自动完成信息。

例如，如果我键入一个模型对象的名称，然后键入一个句点（无论我在控制器还是视图中），它会显示一个令人眼花缭乱的下拉列表，其中包含数千种方法，其中包括数百个不同版本的“新" 方法（但没有文档 - 大多数方法签名后跟“未找到评论”）。

如果我们同意这是一个问题，是否有人遇到（并解决了）这个问题？难道我只是可以访问所有这数千种方法，所以它们必须通过自动完成来报告吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T05:11:29.950

我有完全相同的行为。

我猜是因为 Ruby 中的变量是动态类型的，Netbeans 有点热情。来自 Java 背景，这有点令人惊讶。

它似乎确实将我表中的列放在我的 ActiveRecord 对象的顶部......所以这很好！

# c++ - 如何将字符串转换为缩写形式？

> ID：914032
> 
> 赞同：6
> 
> 时间：2009-05-27T05:04:57.083
> 
> 标签：c++, algorithm, mfc, string, abbreviation

我想将*字符串*放入特定的宽度。例如，“Hello world” -> “...world”、“Hello...”、“He...rld”。

你知道我在哪里可以找到代码吗？这是一个巧妙的技巧，对于表示信息非常有用，我想将它添加到我的应用程序中（当然）。

**编辑**：对不起，我忘了提到**字体**部分。不仅适用于固定宽度的字符串，还适用于字体。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-27T05:09:59.187

如果您在任何地方都找不到它，这是一个非常简单的算法，可以自己编写 - 伪代码类似于：

```
if theString.Length > desiredWidth:
    theString = theString.Left(desiredWidth-3) + "..."; 
```

或者，如果您想在字符串的开头使用省略号，则第二行将是：

```
 theString = "..." + theString.Right(desiredWidth-3); 
```

或者如果你想要它在中间：

```
 theString = theString.Left((desiredWidth-3)/2) + "..." + theString.Right((desiredWidth-3)/2 + ((desiredWidth-3) mod 2)) 
```

**编辑：**
我假设您使用的是 MFC。由于您需要字体，因此可以使用[CDC::GetOutputTextExtent](http://msdn.microsoft.com/en-us/library/98e99kxk(VS.80).aspx)函数。尝试：

```
CString fullString
CSize size = pDC->GetOutputTextExtent(fullString);
bool isTooWide = size.cx > desiredWidth; 
```

如果太大，那么您可以进行搜索以尝试找到可以容纳的最长字符串；它可以是你想要的聪明的搜索 - 例如，你可以尝试“Hello Worl ...”然后“Hello Wor ...”然后“Hello Wo ...”; 删除一个字符，直到找到合适为止。或者，您可以进行[二分搜索](http://en.wikipedia.org/wiki/Binary_search)- 尝试“Hello Worl ...” - 如果这不起作用，则只需使用原始文本的一半字符：“Hello ...” - 如果合适，请尝试介于两者之间它和：“Hello Wo...”，直到找到仍然合适的最长。或者您可以尝试一些估计启发式方法（将总长度除以所需长度，按比例估计所需字符数，然后从那里搜索。

简单的解决方案类似于：

```
unsigned int numberOfCharsToUse = fullString.GetLength();
bool isTooWide = true;
CString ellipsis = "...";
while (isTooWide)
{
    numberOfCharsToUse--;
    CString string = fullString.Left(numberOfCharsToUse) + ellipsis;
    CSize size = pDC->GetOutputTextExtent(string);
    isTooWide = size.cx > desiredWidth;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-27T05:08:11.247

这真的很微不足道；我不认为你会找到特定的代码，除非你有更结构化的想法。

你基本上想要：

1.  获取您拥有的字符串的长度和窗口宽度。
2.  弄清楚你可以从原始字符串中取出多少个字符，这基本上是窗口宽度-3。称其为*k*。
3.  根据您是将省略号放在中间还是在右手端，从一端取一楼（k / 2）个字符，与“...”连接，然后与最后一层（k /2) 字符（由于除法，可能还需要一个字符）；或取前 k 个字符，后跟“...”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-27T05:13:36.207

我认为 Smashery 的回答是一个好的开始。获得最终结果的一种方法是编写一些带有一些测试输入和所需输出的测试代码。一旦你有一套好的测试设置，你就可以实现你的字符串操作代码，直到你通过所有的测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T05:39:48.497

*   计算文本的宽度（基于字体）

如果您使用 MFC，API [GetOutputTextExtent](http://msdn.microsoft.com/en-us/library/98e99kxk(VS.80).aspx)将为您提供值。

*   如果宽度超过给定的特定宽度，则首先计算椭圆宽度：

    ellipseWidth = 计算 (...) 的宽度

*   从末尾删除宽度为 ellipseWidth 的字符串部分并附加椭圆。

    比如：你好...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-28T08:59:39.217

对于那些对完整例程感兴趣的人，这是我的*答案*：

```
/**
 *  Returns a string abbreviation
 *  example: "hello world" -> "...orld" or "hell..." or "he...rd" or "h...rld"
 *
 *  style:
      0: clip left
      1: clip right
      2: clip middle
      3: pretty middle
 */
CString*
strabbr(
  CDC* pdc,
  const char* s,
  const int area_width,
  int style  )
{
  if (  !pdc || !s || !*s  ) return new CString;

  int len = strlen(s);
  if (  pdc->GetTextExtent(s, len).cx <= area_width  ) return new CString(s);

  int dots_width = pdc->GetTextExtent("...", 3).cx;
  if (  dots_width >= area_width  ) return new CString;

  // My algorithm uses 'left' and 'right' parts of the string, by turns.
  int n = len;
  int m = 1;
  int n_width = 0;
  int m_width = 0;
  int tmpwidth;
  // fromleft indicates where the clip is done so I can 'get' chars from the other part
  bool  fromleft = (style == 3  &&  n % 2 == 0)? false : (style > 0);
  while (  TRUE  ) {
    if (  n_width + m_width + dots_width > area_width  ) break;
    if (  n <= m  ) break; // keep my sanity check (WTF), it should never happen 'cause of the above line

    //  Here are extra 'swap turn' conditions
    if (  style == 3  &&  (!(n & 1))  )
      fromleft = (!fromleft);
    else if (  style < 2  )
      fromleft = (!fromleft); // (1)'disables' turn swapping for styles 0, 1

    if (  fromleft  ) {
      pdc->GetCharWidth(*(s+n-1), *(s+n-1), &tmpwidth);
      n_width += tmpwidth;
      n--;
    }
    else {
      pdc->GetCharWidth(*(s+m-1), *(s+m-1), &tmpwidth);
      m_width += tmpwidth;
      m++;
    }

    fromleft = (!fromleft); // (1)
  }

  if ( fromleft ) m--; else n++;

  // Final steps
  // 1\. CString version
  CString*  abbr = new CString;
  abbr->Format("%*.*s...%*.*s", m-1, m-1, s, len-n, len-n, s + n);
  return abbr;

  /* 2\. char* version, if you dont want to use CString (efficiency), replace CString with char*,
                       new CString with _strdup("") and use this code for the final steps:

  char* abbr = (char*)malloc(m + (len-n) + 3 +1);
  strncpy(abbr, s, m-1);
  strcpy(abbr + (m-1), "...");
  strncpy(abbr+ (m-1) + 3, s + n, len-n);
  abbr[(m-1) + (len-n) + 3] = 0;
  return abbr;
  */
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-31T06:42:47.193

如果您只想要“标准”省略号格式（“Hello...”），您可以使用 [DrawText](https://msdn.microsoft.com/en-us/library/windows/desktop/dd162498(v=vs.85).aspx)（或等效的[MFC 函数](https://msdn.microsoft.com/en-us/library/a6x7y2a4.aspx)）函数传递`DT_END_ELLIPSIS`.

还可以查看`DT_WORD_ELLIPSIS`（它会截断任何不适合矩形的单词并添加省略号）或`DT_PATH_ELLIPSIS`（Explorer 为显示长路径所做的工作）。

# apache - mod_rewrite vs symlink：浏览器没有被愚弄

> ID：914036
> 
> 赞同：0
> 
> 时间：2009-05-27T05:06:01.157
> 
> 标签：apache, firefox, mod-rewrite, symlink

我的服务器上有一个文件 foo.bar.1，当我尝试从浏览器（firefox）访问它时，我得到一个弹出窗口，上面写着“你选择打开 foo.bar.1 这是一个：1 文件.. . Firefox 应该如何处理这个文件..."。如果我为它创建一个符号链接 foo.dat，我可以正常访问它；内容按我的预期显示在浏览器中。

我的问题是我不想为所有这些文件创建符号链接，我想使用 mod_rewrite 规则，比如

```
RewriteRule ^([^/]+)\.dat$ $1.bar.1 
```

但这不像符号链接。它给出了相同的弹出窗口（尽管奇怪的是，它现在显示“您已选择打开 foo.dat 这是一个：DAT 文件......”。

我如何执行重写规则，以使浏览器被欺骗将其视为普通的 .dat 文件，正如符号链接所完成的那样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T05:10:33.900

如果您安装了 mod_mime，那么您可以执行以下操作：

```
AddType text/plain .1 
```

未经测试，但它应该显示文件而不是下载

有关AddType 文档，请参阅[http://httpd.apache.org/docs/2.0/mod/mod_mime.html#addtype](http://httpd.apache.org/docs/2.0/mod/mod_mime.html#addtype)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T05:12:40.747

查看指令的`[T]`参数`RewriteRule`：

[http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriterule](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriterule)

当您创建符号链接时，Apache 认为它正在提供`.dat`文件，而当您使用 mod_rewrite 时，Apache 仍然认为它正在提供`.1`文件。这出现在提供给浏览器的 Content-type 标头中。

# subsonic - 如何查看 SubSonic 中实体的前后状态？

> ID：914043
> 
> 赞同：0
> 
> 时间：2009-05-27T05:09:46.193
> 
> 标签：subsonic

我有一些大型表格需要提供有关之前/之后状态的视觉提示，因此批准表格的人可以看到已修改的内容（不是以前的答案，但那将是一个加号）。目前正在为每列数据（Name、Name_IsModified、Phone、Phone_IsModified 等）添加一个额外的列。我很好奇是否有更好的方法来解决这个问题，利用 SubSonic？

初始加载是通过从 3 个不同服务器上的 6 个源表中获取数据来完成的。此数据保存在表单表中，直到得到各种人员的批准，这些人员将手动将其更新到实时系统中，然后更新 6 个源表。视觉提示主要在批准过程中使用，但偶尔用于研究过去何时进行了更改。

由于我必须进行大量更新，我认为这可能是摆脱遗留的 2000 多行代码的好时机，让我的工作更轻松一些！！！

谢谢，

扎克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T06:07:36.487

SubSonic 对象上的所有属性实际上都是集合，您可以将其拉出并查看更改 - 所有这些都无需反射。

我们有一个用于运行更新的“DirtyColumns”集合（不确定它是否公开）——这将是您想要查看的内容。

# ruby-on-rails - Mocha：您如何为实例方法设置期望？

> ID：914044
> 
> 赞同：4
> 
> 时间：2009-05-27T05:09:58.610
> 
> 标签：ruby-on-rails, ruby, ruby-mocha

假设这个红宝石代码：

```
class User
  def self.failed_login!(email)
    user = User.find_by_email(email)
    if user
      user.failed_login_count = user.failed_login_count + 1
      user.save
    end
  end
end 
```

我想编写一个测试来测试 user.save 在给出无效电子邮件时永远不会被调用。例如：

```
it "should not increment failed login count" do
   User.expects(:save).never()
   User.failed_login!("doesnotexist")
end 
```

此测试当前通过，但当我提供有效的电子邮件地址时它也通过了。

如何使用 Mocha 设置期望值？（或任何其他模拟框架），以便它测试任何用户实例的保存方法永远不会被调用？

（最好不要存根/模拟 find_by_email 方法，因为将来如何获取用户的实现可能会改变）

干杯

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-27T06:59:00.600

对于可能偶然发现这一点的其他人，我在另一篇将 RR 作为模拟框架处理的帖子中找到了答案……在 Mocha 中，您可以这样做：

```
User.any_instance.expects(:save).never() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-28T19:12:09.213

或者你可以做类似的事情

```
user = mock
User.expects(:find).returns user
user.expects(:save).never 
```

# javascript - 为什么第一次尝试后执行时间更长？（JavaScript 性能测试）

> ID：914056
> 
> 赞同：0
> 
> 时间：2009-05-27T05:14:19.437
> 
> 标签：javascript, performance

在做一些 JavaScript 性能测试时，我想出了以下代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
        <title>Performance Test</title>
        <script>
            var time1;
            var time2;
            var executionTime;

            function writeALot(){
                time1 = new Date().getTime();
                var n = Number(document.getElementById("numberOfWrites").value);
                var strBuffer = "";
                document.getElementById("div1").innerHTML = "";

                for (var i = 1; i <= n; i++) {
                    strBuffer += i + "<br />";
                }

                document.getElementById("div1").innerHTML = "Number of Writes: " + n + "<br />";
                document.getElementById("div2").innerHTML = strBuffer;
            }

            function printExeTime(){
                time2 = new Date().getTime();
                executionTime = ((time2 - time1) / 1000).toString();
                document.getElementById("div1").innerHTML += "Execution Time: " + executionTime + " seconds";
            }

        </script>
    </head>
    <body>
        <div id="inputDiv">
            Number Of Writes
            <br/>
            <input type="text" id="numberOfWrites" value="10000">
            </input><input type="button" value="Go" onclick="writeALot();printExeTime()">
        </div>
        <br/>
        <div id="div1">
        </div>
        <div id="div2">
        </div>
    </body>
</html> 
```

基本上，它的作用是从 0 计数到文本框中的数字（默认为 10000）连接每个数字和字符串上的“ `<br>`”标签，用这个字符串替换 Div 的内容并显示我做的“时间”操作。

我这样做是为了测试生成的内容在文档上打印的速度。在尝试这段代码时，我注意到了几个问题：

当您第一次点击执行按钮时，在页面刷新后，代码运行速度比下一次尝试快得多。对于第二次按下按钮后小于 1000 的数字，第一次执行相同代码所需的时间可能是第一次执行相同代码所需时间的两倍，但是一旦您开始提高数字 100000，例如执行时间的差异就会得到大很多。

自己试试看，加载页面，点击一次按钮，代码执行速度很快，然后再点击一次，看看有什么不同吗？如果执行相同的代码，为什么在第一次之后需要这么长时间？

我注意到的另一个问题是，由于某种原因，我测量时间的方式无法正常工作，似乎我在错误的时刻得到了一个新的日期，是否有类似在 div 上的内容被修改后触发的事件?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T06:55:14.160

注释掉：

```
// document.getElementById("div2").innerHTML = strBuffer; 
```

看看你是否得到更多相同的时间。第一次 DOM 操作的数量`div2`比其他任何时候都简单得多，因为它必须：

1.  丢弃所有`div2`内容
2.  创建新内容

首次点击没有第 1 步。它还解释了当您拥有大量元素时与较小数量相比的区别。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-27T06:32:49.800

由于大多数 javascript 实现使用的线程模型，您将很难做您想做的事情。当您进行紧密循环时，时钟基本上是静止的。我没有关于如何准确计时像你这样的循环的建议。通常，如果我需要在做某事并更新某事时，我会使用 setTimeout 或 setInterval

# php - 有哪些方法可以禁用或更正 Web 应用程序中的向后浏览？

> ID：914058
> 
> 赞同：1
> 
> 时间：2009-05-27T05:14:39.590
> 
> 标签：php, javascript

当用户在程序中间点击后退按钮时，某些*“设计*”的网络应用程序无法正常运行。有哪些方法可以禁用或更正用户在易受攻击的应用程序部分点击后退按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T05:25:08.790

当用户点击后退按钮时无法运行的 Web 应用程序设计得很糟糕。用户希望后退按钮能够工作，通常所有禁用此功能的尝试都会极大地惹恼用户。所以我反对任何这样的计划，只能建议让应用程序使用后退按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T05:31:34.293

有几个 JavaScript 框架可以帮助解决这个问题。

Ext JS 是我肯定知道的。

以下是有关此问题的其他框架的讨论： [http ://extjs.com/forum/showthread.php?t=673](http://extjs.com/forum/showthread.php?t=673)

# ftp - 使用 ftp 或使用 telnet 将代码上传到开发或生产服务器，它们都不安全吗？

> ID：914069
> 
> 赞同：0
> 
> 时间：2009-05-27T05:18:05.627
> 
> 标签：ftp, ssh, sftp, telnet

我仍然看到人们使用 ftp 或 telnet 来工作，而不是 sftp 和 ssh。使用 ftp 或 telnet 真的可以让人们很容易地看到密码吗？谁能真正看到？

**更新：**例如，如果我不使用无线...我听说如果在发送或接收 1GB 流量时它是 WEP 可能会损坏...所以如果不使用无线，并且我使用的是 DSL、有线互联网等康卡斯特，或者 AT&T 的 U-verse 的光纤，那么谁能看懂呢？我的邻居或附近公司或大学数据中心的乔可以阅读它吗？或者，如果我从加利福尼亚通过 ftp'​​ 从加利福尼亚到芝加哥，那么在恰好位于加利福尼亚和芝加哥之间的某个大型托管公司或数据中心工作？

**更新 2：**所以别名 ftp='echo use sftp!!' 也在狂欢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T05:22:28.777

ftp 和 telnet 都未加密。这意味着任何可以捕获您的 Internet 流量的人（例如您的 isp、托管服务提供商，也许是政府）都可以在您每次登录时以纯文本格式读取您的密码。ssh 和 sftp/scp 将加密您的密码，并且没有人应该能够读取它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-27T05:24:47.840

简单地回答一下，从您的电脑到服务器的数据包路径上的任何人。在某些情况下（不安全的网络、无线网络等）更多的人。那是因为密码将以纯文本形式传输。

[您可以在http://en.wikipedia.org/wiki/Packet_capture](http://en.wikipedia.org/wiki/Packet_capture)了解更多关于数据包嗅探的信息。还要检查[http://en.wikipedia.org/wiki/File_Transfer_Protocol#Security_problems](http://en.wikipedia.org/wiki/File_Transfer_Protocol#Security_problems)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T05:28:04.327

是的，通过使用简单的数据包嗅探器，例如[Wireshark](http://www.wireshark.org)，可以读取 telnet 和 ftp 使用的明文密码。尝试在初始化 ftp 或 telnet 会话时使用此工具，您会发现这些机制有多不安全。

正如这篇文章所标记的，ssh 和 sftp 是更安全的选择，因为它们会在数据通过网络传输时对其进行加密。而且，一如既往，永远不要使用这些工具作恶！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T05:32:36.913

任何有嗅探器的人都可以看到它。请改用安全等效项，即 SFTP 和 SSH。它们受到强大的加密保护，所有内容都将被加密。

# javascript - obj 为空，javascript

> ID：914070
> 
> 赞同：1
> 
> 时间：2009-05-27T05:18:26.687
> 
> 标签：javascript

```
function init()

{

alert("init()");
    /**
     * Adds an event listener to onclick event on the start button.
     */
     xbEvent.addEventListener(document.getElementById("viewInvitation"), "click", function()
    {
        new Ajax().sendRequest("31260xml/invitations.xml", null, new PageMaster());

         xbEvent.addEventListener(document.getElementById("declinebutton"), "click", function ()
        {
           declineInvitation();
        });
     }); 
```

好的，所以我这里有一个事件监听器函数，这种情况是当点击 viewInvitation 时，程序将获取我的 xml 文件并运行页面主函数，在该函数中我使用 id="declinebutton" 创建了我的拒绝按钮，但是这不起作用，我得到的错误信息是 obj=null 或者程序找不到 id = 拒绝按钮，为什么会这样？当我使用 dom 调用 page master 时，我已经创建了它。任何帮助将不胜感激。

```
function PageMaster()
{
    this.contentDiv = document.getElementById("content");
}

/**
 * Builds the main part of the web page based on the given XML document object
 *
 * @param {Object} xmlDoc   the given XML document object
 */
var subjectList;
var i;

PageMaster.prototype.doIt = function(xmlDoc)
{
    alert("PageMaster()");

alert("Clear page...");
this.contentDiv.innerHTML = "";

if (null != xmlDoc) 
{
    alert("Build page...");

    //create div Post
    var divPost = document.createElement("div");
    divPost.className = "post";

    //create h1 element
    var h1Element = document.createElement("h1");
    var headingText = document.createTextNode("Invitations");
    h1Element.appendChild(headingText);

    //insert h1 element into div post
    divPost.appendChild(h1Element);

    subjectList = xmlDoc.getElementsByTagName("subject");   
    var groupList = xmlDoc.getElementsByTagName("group");

    for (i = 0; i < subjectList.length; i++) //for each subject
    {
        var divEntry = document.createElement("div");
        divEntry.className = "entry";

        var subjectNum = subjectList[i].attributes[0].nodeValue;
        var subjectName = subjectList[i].attributes[1].nodeValue;
        var groupId = groupList[i].attributes[0].nodeValue;
        var groupName = groupList[i].attributes[1].nodeValue;
        var ownerId = groupList[i].attributes[2].nodeValue;

        //set up the invitation table attributes    

        var table=document.createElement("table");
        table.width = 411;
        table.border = 3;
        table.borderColor = "#990000"

        var input=document.createElement("p");
        var inputText=document.createTextNode("You are invited to join " + groupName + "(groupId : " + groupId +")");
        input.className="style11";
        var blank=document.createElement("nbps");
        input.appendChild(inputText);

        var acceptButton=document.createElement("input");
        acceptButton.type="button";
        acceptButton.id="acceptbutton";
        acceptButton.value="accept";

        var declineButton=document.createElement("input");
        declineButton.type="button";
        declineButton.id="declinebutton";
        declineButton.value="decline";

        table.appendChild(input);
        table.appendChild(acceptButton);
        table.appendChild(declineButton);
        divEntry.appendChild(table);

        var blankSpace = document.createElement("p");
        divEntry.appendChild(blankSpace);
        divPost.appendChild(divEntry);
    }

    //insert div post into div content
    this.contentDiv.appendChild(divPost);
    }
};

/**function getValueOf()
{
    return i;
}**/
function declineInvitation()
{
    alert("decline");
}
function acceptInvitation()
{
    alert("hello");
    /**var pos=getValueOf();
    alert(subjectList[pos].attributes[0].nodeValue);**/
} 
```

那是我的页面主功能，我肯定已经创建了按钮。但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T05:24:52.753

尝试像这样调用你的函数：

```
window.onload=init; 
```

javascript 在页面加载时运行。此时，该元素尚不存在于 DOM 树中。您需要延迟脚本，直到页面加载完毕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T05:52:21.923

你在一个监听器中有一个监听器。那正确吗？

那这个呢？：

```
function init(){

alert("init()");

/**     * Adds an event listener to onclick event on the start button.     */
xbEvent.addEventListener(document.getElementById("viewInvitation"), "click", function()    
{        
     new Ajax().sendRequest("31260xml/invitations.xml", null, new PageMaster());
}

xbEvent.addEventListener(document.getElementById("declinebutton"), "click", function ()        
{                   
      declineInvitation();        
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T05:31:29.787

您给出的示例没有创建“拒绝”按钮，正如您的问题所暗示的那样。如果应该，你可能想看看那个。

当然，如果按钮已经存在，请忽略这个答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T10:55:09.543

据我了解，您为 xml 中的每个条目创建了 id="declinebutton" 的按钮，对吗？如果是，我建议您为每个按钮生成不同的 id（例如，将行索引附加到“declinebutton”，因此您有按钮“declinebutton0”、“declinebutton1”等），并将事件侦听器分别分配给按钮在循环。

# .htaccess - Q2：为什么这个配置代码在 .htaccess 中不起作用？

> ID：914071
> 
> 赞同：0
> 
> 时间：2009-05-27T05:19:03.240
> 
> 标签：.htaccess, mod-rewrite

我将使用什么来代替 .htaccess 中的 Document_Root？

以下是我的 linux 服务器的 htttp.conf。

```
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME}.php -f
RewriteRule ^/(.*)(/?)$ /$1.php [L]
RewriteRule ^/([a-zA-Z]+)([a-zA-Z0-9_]{3,15})(/?)$ /profile.php?fairid=$1$2 [L]
RewriteRule ^/([a-zA-Z]+)([a-zA-Z0-9_]{3,15})/([a-z]*)(/?)$ /$3.php?fairid=$1$2 [L] 
```

但现在我将我的域转移到共享服务器。因此，为了正确运行我的网站，在重写规则中需要在 .htaccess 中进行哪些更改？

我的 .htaccess 如下：

```
RewriteEngine On
RewriteBase /~laborfa2
RewriteCond %/~laborfa2/lf/main/com/%{REQUEST_FILENAME}.php -f
RewriteRule /(.*)(/?)$ /~laborfa2/lf/main/com/$1.php [L]
RewriteRule ^/([a-zA-Z]+)([a-zA-Z0-9_]{3,15})(/?)$ /~laborfa2/lf/main/com/profile.php?fairid=$1$2 [L] 
```

但它不起作用。请建议在 .htaccess 中需要进行更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-26T09:57:47.467

`REQUEST_FILENAME` already is an absolute file system path and prepending `DOCUMENT_ROOT` is wrong.

Additionally, when using mod_rewrite in a .htaccess file, Apache strips the per-directory path prefix from the requested URI path before testing the rules. And in case of the .htaccess file in the document root of the web server, it’s the leading `/` that’s stripped of. So your pattern must not begin with a leading slash like in the server or virtual host configuration.

So try this:

```
RewriteBase /~laborfa2/
RewriteCond %{DOCUMENT_ROOT}~laborfa2/lf/main/com/$1.php -f
RewriteRule (.*)(/?)$ /lf/main/com/$1.php [L]
RewriteRule ^([a-zA-Z]+[a-zA-Z0-9_]{3,15})(/?)$ /lf/main/com/profile.php?fairid=$1 [L] 
```

# .net - 我们可以在没有指针对象的情况下访问托管代码吗？

> ID：914074
> 
> 赞同：0
> 
> 时间：2009-05-27T05:19:51.507
> 
> 标签：.net, c++-cli

我在托管 c++ 中创建了一些应用程序。当我尝试实例化它时显示错误为

无法从 obj 转换为 *obj。当我实例化为指针 obj 时，它没有显示错误。

所以。有什么方法可以在不创建指针对象的情况下访问此类

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T06:44:56.253

问题说您使用的是托管 C++，标签说您使用的是 C++/CLI（在 VS 2005 或更高版本中可用）。您可能会在使用 C++/CLI 时感到不那么困惑。

如果这就是您正在使用的，那么有两种方法可以从 C#“翻译”。假设你有一些 C#：

```
// Construct
MyClass c = new MyClass();

// Call some method
c.MyMethod();

Console.Writeline(c); // will call ToString on MyClass

// Finished with it
c.Dispose(); 
```

您可以像这样在 C++/CLI 中编写它：

```
MyClass ^c = gcnew MyClass;

// Call some method
c->MyMethod();

Console.Writeline(c); // will call ToString on MyClass

// Finished with it
c->Dispose(); 
```

该变量`c`称为“句柄”，而不是指针，用 ^ 而不是 * 声明。我们也必须使用`gcnew`而不是`new`. 这与 C# 中的引用变量相同，与 C++ 中的指针类似（但不完全相同），因此我们用于`->`访问成员。

或者你可以这样写：

```
// Create with local scope
MyClass c;

// Call some method
c.MyMethod();

Console.Writeline(%c); // will call ToString on MyClass (note the %) 
```

首先要注意：我们以本地 C++ 变量的样式声明它。无需显式`gcnew`指定对象。其次，我们将对象视为局部变量（或对此类变量的 C++ 引用）。所以我们使用 . 而不是`->`. 第三，我们可以将此本地对象“转换”为句柄，方法是在它前面`%`加上`&`. 它的意思是“获取”或“给我一个句柄”一个对象。最后，我们不必调用`Dispose`对象。编译器在我们声明它的作用域的末尾为我们做这件事，因为`Dispose`方法是在 C++/CLI 中实现析构函数的机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T06:04:36.770

您可以在堆栈上创建它。

```
MyObject foo;
foo.bar();   // accessing bar method on object foo 
```

也许您正在寻找的语法是这样的：

```
MyObject *foo = new MyObject;
foo->bar; 
```

# jquery - 通过 ajax.get 或 ajax.post 发布密码

> ID：914076
> 
> 赞同：3
> 
> 时间：2009-05-27T05:22:15.907
> 
> 标签：jquery, ajax

我有一个登录表单。表单通过 ajax 提交到 .aspx 文件以实际执行登录操作。在这种情况下，我要么必须使用 $.get() 或 $.post() ，但它们中的每一个都会显示密码（当我查看 firebug 时）。

有没有办法向用户隐藏发布信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T05:24:42.363

使用 https - 纯 http 不是试图“隐藏”密码或其他有价值信息的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T05:34:15.260

ssl 应该是您唯一的选择，因为如果您尝试在简单的 http 上加密密码...由于客户端脚本，您会将您的加密逻辑暴露给用户......所以 ssl 是正确的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T05:27:00.380

您的逻辑和使用正常发布的网站没有区别；-) 您可以使用 ssl 证书来加密流量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T05:30:17.853

您可以使用 Alex & Shoban 提到的 SSL，也可以加密密码，然后通过 Ajax 请求发送。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T05:38:01.650

如果可能，强烈建议使用 SSL。[但是，您可以在使用JavaScript 加密库](http://pajhome.org.uk/crypt/md5/index.html)发送密码之前对其进行加密。

# iphone - UITableViewCell 操作徽章

> ID：914079
> 
> 赞同：0
> 
> 时间：2009-05-27T05:23:00.040
> 
> 标签：iphone

有谁知道如何实现一个动作徽章，就像下面看到的带有价格标签的那些。App Store 也有这些。

[替代文字 http://m.macupdate.com/images/screens/uploaded/30815_scr.png](http://m.macupdate.com/images/screens/uploaded/30815_scr.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T07:29:08.177

最简单的方法是将`accessoryView`标准的 设置`UITableViewCell`为`UIView`. 你可以让它们成为标准`UIButtons`的，设置它们的背景颜色和标签颜色和字体。

如果它们不是交互式的，那么您可以使用一个在背景中`UIView`带有 a并且在前面添加为子视图的容器。`UIImageView``UILabel`

如果您想对它感兴趣，您将不得不自己进行子类`UITableViewCell`化并布置各种位。这并不难。`TableViewSuite`示例代码向您展示了如何操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T16:42:47.767

我不确定框架内是否有创建这种类型的按钮。您可以使用自己的自定义图像轻松模拟它。在这种情况下，您需要的是在调整按钮大小时不会扭曲的可拉伸图像。

看一下 UIImage 类上的以下方法：

`- (UIImage *)stretchableImageWithLeftCapWidth:(NSInteger)leftCapWidth topCapHeight:(NSInteger)topCapHeight`

# c++ - svn 脚本在结帐/更新时重命名成员变量

> ID：914080
> 
> 赞同：1
> 
> 时间：2009-05-27T05:23:24.377
> 
> 标签：c++, svn

我与一个喜欢使用 mCamelCase 约定命名其成员变量的人一起工作，例如：mSomeVar 或 mSomeOtherVar。我受不了这种格式。我更喜欢 m_camelCase 对流，例如：m_someVar 或 m_someOtherVar。我们看着对方的代码让对方发疯。

现在我们在团队中添加了一个新人，他根本不喜欢前缀。由于我们使用 svn，我们想我们可以开发一个 svn 脚本，当您从服务器下载代码时，它可以即时重命名成员变量。这样，每个人都可以随意命名成员变量。

有没有人有任何可以做这种事情的示例 svn 脚本？我见过更改注释标题的脚本，但我们需要包含 C++ 处理器的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-27T05:40:06.093

听起来像是灾难的秘诀。为了让它工作，您需要决定一个存储库范围的标准，其中每个文件都使用相同的变量命名约定。如果你能做到这一点，为什么不让每个人都这样编码？！关于约定的重要之处不在于您使用***哪种***约定，而是每个人实际上都使用***相同***的约定！

找一个有资历的人来打电话（或者拉等级，如果可以的话），其他人都只能接受它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-27T06:51:19.190

我假设您想出于研究目的更改样式，而这个问题只是假设性的。Joel S. 似乎认为简单地说你做错事的答案根本不是好的答案，所以我会尝试为你提供一些解决问题的途径。

svn 在转换方面所做的最接近的事情是它可以更改结帐时结束的行，并在签入时再次更改它。这允许存储库对行结尾有一个单一的想法，并且不同的客户端可以根据他们的喜好修改文件。尽管此功能听起来相当简单，但许多人似乎无法使其正常工作。只需 Google **'svn eol-style'**。

由于 svn 不提供任何类型的可定制客户端过滤器，我认为可以安全地假设您将需要修改 svn 客户端，并为您自己的目的编译它。也许您可以将补丁或扩展提交回 svn。

所以此时，你应该已经下载了 svn 源码，并且可以拿到它来编译客户端。此时，将注意力转向`libsvn_subr/subst.c`。此文件包含转换为各种格式的例程。目前它对关键字扩展和eol进行翻译。

您只需要创建一个新属性，可能称为`member-variable-style`. 对于设置了此标志的文件，您可以在`subst.c`代码中调用特殊转换。您可以通过查看对`svn_subst_translate_stream3`.

好的。那是容易的部分。现在您需要获得一个函数来正确地将您的代码从一种形式转换为另一种形式。您不能简单地将 cpp 处理器从 gcc 中拉出，因为无法保证代码将有效/编译。你必须尽你最大的努力创建词法规则，希望能在正确的变量上做正确的事情。对于以 m_ 甚至 m 开头的变量，这是相当简单的。不幸的是，对于您团队中根本不使用 m_ 的成员来说，确定它是 C++ 中的成员变量是一个相当大的挑战。幸运的是，创建语法高亮代码的人在该领域进行了大量研究。我会四处寻找一些代码，这些代码可以很好地突出显示 C++ 代码。

最后，由于这些转换可能会变得相当复杂，我建议您在此阶段将 svn shell 用于过滤程序。这对性能来说不是很好，但它会使编写和调试过滤器变得更加容易。然后，您可以用 Perl 或您选择的语言编写过滤器。有关使用外部过滤器程序的一个很好的示例，请参阅[Squid 重定向器](http://wiki.squid-cache.org/Features/Redirectors)。

祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-27T05:34:20.830

Subversion 没有适用于更新的挂钩 - 您可以有一个提交后挂钩*，它允许您从一种约定转换为另一种（存储库标准），并且您可以使用自己编写的脚本来执行结帐，然后执行必要的调整，但这会给您`svn diff`等上的错误读数。

我的建议是和你的同事坐下来商定一个标准。不过，post-commit 钩子仍然有助于捕获错误。

*我在想一些事情，看到提交已经发生，自动签出并更改代码以遵守存储库标准约定，然后在必要时提交。另一种选择是有一个预提交钩子，如果代码不符合标准，则不允许提交。

# php - 未定义的偏移量：1

> ID：914081
> 
> 赞同：-1
> 
> 时间：2009-05-27T05:23:50.943
> 
> 标签：php, syntax

我收到与我的 PHP 错误处理函数相关的错误。

```
Undefined offset:  1 
```

这是错误处理代码：

```
function customError($errno, $errstr)
{
    error_log("Error: [$errno] $errstr",1,"ah@mysite.com","From: ah@mysite.com");
    die();
}
//set error handler

set_error_handler("customError"); 
```

任何人都可以帮助指出导致错误的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T05:31:52.657

好的，对不起，我误解了你的问题。

扩展您的 customError() 函数以同时使用 $errFile 和 $errLine，这样您就可以看到错误实际发生的位置。

这是文档[http://en.php.net/manual/en/function.set-error-handler.php](http://en.php.net/manual/en/function.set-error-handler.php)

# javascript - 如何在 Safari 中通过 JavaScript 确定/操作文本区域的选择？

> ID：914082
> 
> 赞同：1
> 
> 时间：2009-05-27T05:24:35.437
> 
> 标签：javascript, safari, webkit, selection

我有一些 JavaScript 代码可以做两件事：

*   从文本区域检索选定的文本
*   为所选文本添加前缀和后缀

该代码当前使用 textarea 的`selectionStart`和`selectionEnd`属性来确定选择的开始/结束位置，提取选择文本并对其进行处理，然后重新写入 textarea 的值，并在正确的位置插入前缀和后缀。

此实现在 Firefox 中运行良好，**但在 Safari 中不起作用**。显然WebKit 中不存在`selectionStart`and属性。`selectionEnd`（我怀疑该代码在同样基于 WebKit 的 Google Chrome 中也不起作用，尽管我没有对此进行测试。）

如何在 Safari 中执行这两个操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-12-20T08:34:06.450

请参阅 Closure 中的 goog.dom.selection。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T05:29:29.600

我相信您正在寻找 [https://developer.mozilla.org/En/DOM:Selection](https://developer.mozilla.org/En/DOM:Selection)

似乎也可以在 Safari 中使用（未经我测试）（请参阅： http: [//lists.apple.com/archives/Web-dev/2005/Nov/msg00114.html](http://lists.apple.com/archives/Web-dev/2005/Nov/msg00114.html)

# c# - ASP.NET HoverMenuExtender 延迟加载

> ID：914089
> 
> 赞同：1
> 
> 时间：2009-05-27T05:25:21.910
> 
> 标签：c#, asp.net, asp.net-ajax, hover, lazy-loading

我正在尝试让我的 hovermenuextenders 进行一些延迟加载。我在整个网站上都有头像，当悬停在上面时应该拉回各种东西（图像、最近的帖子、帖子计数等）。出于明显的原因，我不想对 page_load 上的所有头像执行此操作。

使用以下代码，我可以获得悬停事件以异步触发回发到服务器（断点在 onmouseover 上命中）。但是，回发中的命令在执行完成后似乎没有反映。加载图像/标签停留在悬停面板中。任何帮助表示赞赏！

**编辑**：我刚刚意识到页面上呈现的最后一个头像可以正常工作，但上面的头像都没有。任何想法可能导致这种奇怪的行为？

```
<script language="javascript" type="text/javascript">
    function OnHover(image) {        
        __doPostBack('<%= this.imageHoverTrigger.UniqueID %>', '');
    }
</script>

<!-- DUMMY Hover Trigger -->
<input id="imageHoverTrigger" runat="server" style="display:none;"
   type="button" onserverclick="imageHoverTrigger_Click" />

<!-- User Avatar -->
<div style="border: solid 1px #AAA; padding:2px; background-color:#fff;">    
    <asp:ImageButton ID="UserImg" runat="server" />  
</div>         

 <!-- Hover tooltip disabled by default 
    (Explicitly enabled if needed)-->
<ajax:HoverMenuExtender ID="UserInfoHoverMenu" Enabled="false" runat="server"
    OffsetX="-1"
    OffsetY="3" 
    TargetControlID="UserImg"
    PopupControlID="UserInfoPanel" dyn
    HoverCssClass="userInfoHover"
    PopupPosition="Bottom">
</ajax:HoverMenuExtender>

 <!-- User Profile Info -->
<asp:Panel ID="UserInfoHover" runat="server" CssClass="userInfoPopupMenu">            
    <asp:UpdatePanel ID="UserInfoUpdatePanel" runat="server" UpdateMode="Conditional" >
        <ContentTemplate> 
            <asp:Image ID="loadingImg" runat="server" ImageUrl="~/Design/images/ajax-loader-transp.gif" />                              
            <asp:Label ID="loadingLbl" runat="server" Text="LOADING..." ></asp:Label>  
            <asp:Panel ID="UserInfo" runat="server" Visible="false">
                <b><asp:Label ID="UserNameLbl" runat="server"></asp:Label><br /></b>  
                <span style="font-size:.8em">
                    <asp:Label ID="UserCityLbl" runat="server" Visible="false"></asp:Label> <asp:Label ID="UserStateLbl" runat="server" Visible="false"></asp:Label>
                </span>
            </asp:Panel>                        
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="imageHoverTrigger" />
        </Triggers>                    
    </asp:UpdatePanel>     
</asp:Panel> 
```

**和代码隐藏：**

```
protected void Page_Load(object sender, EventArgs e)
{
    UserImg.Attributes.Add("onmouseover", "javascript:OnHover(this)");
}

protected void imageHoverTrigger_Click(object sender, EventArgs args)
{
    // Hide loading image/label
    loadingLbl.Visible = false;        
    loadingImg.Visible = false;

    //TODO: Set user data here
    UserInfo.Visible = true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T13:46:15.080

弄清楚了：

我的 Page_Load 事件连接应该是：

```
 UserImg.Attributes.Add("onmouseover", "javascript:OnHover('" + this.imageHoverTrigger.UniqueID + "','" + this.hiddenLbl.ClientID + "')");
    UserImg.Attributes.Add("onmouseout", "javascript:ClearTimer()"); 
```

并且javascript函数应该是：

```
var hoverTimer;

    // Called on the hover of the user image
    function OnHover(trigger, hiddenTxt) {

        var field = document.getElementById(hiddenTxt);

        // Only post if this hover hasn't been done before
        if (field == null || field.innerHTML == "false") {
            hoverTimer = setTimeout(function() { ShowInfo(trigger) }, 500);          
        }            
    }

    // Clears timeout onmouseout
    function ClearTimer() {
        clearTimeout(hoverTimer);
    }

    // Retrieves user info from server
    function ShowInfo(trigger) {
        __doPostBack(trigger, '');
    } 
```

我还在表单上添加了一个隐藏字段，以便知道何时执行了悬停。后面的代码将隐藏字段设置为 true，我的 javascript 每次执行时都会检查隐藏字段的值。这会阻止代码在每次用户将鼠标悬停在图像上时进行往返。

# iphone - Interface builder的尺寸检查器中的框架和布局有什么区别？

> ID：914102
> 
> 赞同：43
> 
> 时间：2009-05-27T05:29:31.550
> 
> 标签：iphone, interface-builder

在 IB 中，Size Inspector 中有一个下拉菜单，显示“布局”和“框架”。我知道框架是什么，但在这种情况下我不知道布局是什么。有什么不同？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-06-03T02:51:17.303

当排列控件并测量它们之间的距离时，通常需要根据控件在屏幕上占据的视觉空间来考虑控件的位置，而不仅仅是它们的原始帧。在许多情况下，控件占据的可视矩形及其框架大不相同。例如，一个常规尺寸的按钮在屏幕上看起来大约 20 点高，带有 2 或 3 点的阴影。实际上，正确配置的按钮的框架是 32 磅高，而不是 23 磅。这额外的 9 点填充点在视觉上并不明显。

“布局矩形”是 Interface Builder 用于此概念的名称。

布局矩形对于查看测量和调整大小的应用很有用。Apple 人机界面指南可能会声明“两个垂直对齐的按钮，并且彼此相邻的水平方向应该有 12 点的空间将它们水平分隔。” 这 12 点分隔按钮的空间应该从按钮的布局框架而不是它们的原始框架来衡量。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-28T15:30:11.877

许多内置的 IB 元素具有单独的“布局”与“边界”矩形。您可以通过使用“布局>显示 XXX 矩形”显示它们来查看差异。下拉菜单指示坐标所指的矩形。

在 Mac 上，这会影响 UITextFields，例如标签。如果在 Layout 和 Frame 之间切换，X 坐标将改变 3 个像素。我还没有玩过 iPhone 控件来查看它是否会影响其中的任何一个。它不会出现很多。

# python - 嵌入在 Windows 注册表中的 Python 脚本

> ID：914106
> 
> 赞同：0
> 
> 时间：2009-05-27T05:30:49.303
> 
> 标签：python, winapi

我们都知道windows具有可以右键单击文件并显示许多选项的功能。好吧，您可以为此菜单添加一个值。我遵循了本指南：jfitz.com/tips/rclick_custom.html

基本上，当我右键单击某个文件类型时，我有一个脚本会运行。好的，所以一切都完美无缺，但是当我完成并尝试对其进行测试时，Windows 告诉我它只接受 .exe。

他们是否可以解决这个问题而无需使用 py2exe 或类似的东西？

**编辑好的，所以如果我的脚本将第一个参数作为参数，我将如何将它放入注册表？

"C:\Python26\pythonw.exe C:\Users\daved\Documents\Python\backup.py "%1"" ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T05:32:57.990

是的，调用 pythonw.exe 并将脚本路径作为参数传递

```
"C:\Python26\pythonw.exe" "C:\Users\daved\Documents\Python\backup.py" "%1" 
```

当您的脚本不在控制台中运行时，还建议（但不是必需）使用扩展名 .pyw。

# c# - 如何使用 LINQ 选择具有最小或最大属性值的对象

> ID：914109
> 
> 赞同：526
> 
> 时间：2009-05-27T05:31:25.870
> 
> 标签：c#, .net, linq

我有一个带有 Nullable DateOfBirth 属性的 Person 对象。有没有一种方法可以使用 LINQ 来查询 Person 对象列表中具有最早/最小 DateOfBirth 值的对象？

这是我开始的：

```
var firstBornDate = People.Min(p => p.DateOfBirth.GetValueOrDefault(DateTime.MaxValue)); 
```

Null DateOfBirth 值设置为 DateTime.MaxValue 以便将它们排除在 Min 考虑之外（假设至少有一个具有指定的 DOB）。

但对我来说所做的只是将 firstBornDate 设置为 DateTime 值。我想得到的是与之匹配的 Person 对象。我是否需要像这样编写第二个查询：

```
var firstBorn = People.Single(p=> (p.DateOfBirth ?? DateTime.MaxValue) == firstBornDate); 
```

还是有更精简的方法？

* * *

## 回答 #1

> 赞同：327
> 
> 时间：2009-05-27T05:53:47.443

```
People.Aggregate((curMin, x) => (curMin == null || (x.DateOfBirth ?? DateTime.MaxValue) <
    curMin.DateOfBirth ? x : curMin)) 
```

* * *

## 回答 #2

> 赞同：248
> 
> 时间：2009-05-27T06:07:40.073

不幸的是，没有内置的方法可以做到这一点，但它很容易为自己实现。这是它的胆量：

```
public static TSource MinBy<TSource, TKey>(this IEnumerable<TSource> source,
    Func<TSource, TKey> selector)
{
    return source.MinBy(selector, null);
}

public static TSource MinBy<TSource, TKey>(this IEnumerable<TSource> source,
    Func<TSource, TKey> selector, IComparer<TKey> comparer)
{
    if (source == null) throw new ArgumentNullException("source");
    if (selector == null) throw new ArgumentNullException("selector");
    comparer ??= Comparer<TKey>.Default;

    using (var sourceIterator = source.GetEnumerator())
    {
        if (!sourceIterator.MoveNext())
        {
            throw new InvalidOperationException("Sequence contains no elements");
        }
        var min = sourceIterator.Current;
        var minKey = selector(min);
        while (sourceIterator.MoveNext())
        {
            var candidate = sourceIterator.Current;
            var candidateProjected = selector(candidate);
            if (comparer.Compare(candidateProjected, minKey) < 0)
            {
                min = candidate;
                minKey = candidateProjected;
            }
        }
        return min;
    }
} 
```

示例用法：

```
var firstBorn = People.MinBy(p => p.DateOfBirth ?? DateTime.MaxValue); 
```

请注意，如果序列为空，这将引发异常，如果有多个，则返回具有最小值的*第一个元素。*

或者，您可以使用我们在[MinBy.cs](https://github.com/morelinq/MoreLINQ)中的[MoreLINQ](https://github.com/morelinq/MoreLINQ/blob/ec4bbd3c7ca61e3a98695aaa2afb23da001ee420/MoreLinq/MinBy.cs)中获得的实现。（当然，有一个对应`MaxBy`的 。）

通过包管理器控制台安装：

> PM> Install-Package morelinq

* * *

## 回答 #3

> 赞同：160
> 
> 时间：2009-05-27T06:38:34.220

注意：为了完整起见，我包含了这个答案，因为 OP 没有提到数据源是什么，我们不应该做出任何假设。

此查询给出了正确的答案，但*可能会更慢*，因为它可能必须对 中的*所有*项目进行排序`People`，具体取决于数据结构`People`是什么：

```
var oldest = People.OrderBy(p => p.DateOfBirth ?? DateTime.MaxValue).First(); 
```

更新：实际上我不应该将此解决方案称为“幼稚”，但用户确实需要知道他在查询什么。该解决方案的“缓慢性”取决于基础数据。如果这是一个数组 或`List<T>`，那么 LINQ to Objects 就别无选择，只能在选择第一项之前先对整个集合进行排序。在这种情况下，它会比建议的其他解决方案慢。但是，如果这是一个 LINQ to SQL 表并且`DateOfBirth`是一个索引列，那么 SQL Server 将使用索引而不是对所有行进行排序。其他自定义`IEnumerable<T>`实现也可以使用索引（请参阅[i4o：Indexed LINQ](http://i4o.codeplex.com/)或对象数据库[db4o](http://www.db4o.com/)）并使此解决方案比`Aggregate()`or `MaxBy()`/`MinBy()`这需要迭代整个集合一次。事实上，LINQ to Objects 可以（理论上）`OrderBy()`为排序集合（如）制作特殊情况`SortedList<T>`，但据我所知，它没有。

* * *

## 回答 #4

> 赞同：66
> 
> 时间：2009-05-27T09:12:37.847

```
People.OrderBy(p => p.DateOfBirth.GetValueOrDefault(DateTime.MaxValue)).First() 
```

会做的伎俩

* * *

## 回答 #5

> 赞同：58
> 
> 时间：2018-01-04T05:30:20.923

所以你要求`ArgMin`or `ArgMax`。C# 没有针对这些的内置 API。

我一直在寻找一种干净高效（O(n) 及时）的方式来做到这一点。我想我找到了一个：

这种模式的一般形式是：

```
var min = data.Select(x => (key(x), x)).Min().Item2;
                            ^           ^       ^
              the sorting key           |       take the associated original item
                                Min by key(.) 
```

特别是，使用原始问题中的示例：

**对于支持[value tuple](https://blogs.msdn.microsoft.com/mazhou/2017/05/26/c-7-series-part-1-value-tuples/)的 C# 7.0 及更高版本：**

```
var youngest = people.Select(p => (p.DateOfBirth, p)).Min().Item2; 
```

**对于 7.0 之前的 C# 版本，可以改用[匿名类型：](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/anonymous-types)**

```
var youngest = people.Select(p => new {age = p.DateOfBirth, ppl = p}).Min().ppl; 
```

它们之所以起作用，是因为值元组和匿名类型都有合理的默认比较器：对于 (x1, y1) 和 (x2, y2)，它首先比较`x1`vs `x2`，然后`y1`比较 vs `y2`。这就是为什么内置`.Min`可以用于这些类型的原因。

而且由于匿名类型和值元组都是值类型，因此它们都应该非常有效。

**笔记**

在我上面的实现中，为了简单明了，`ArgMin`我假设`DateOfBirth`采用类型。`DateTime`原始问题要求排除具有空`DateOfBirth`字段的条目：

> Null DateOfBirth 值设置为 DateTime.MaxValue 以便将它们排除在 Min 考虑之外（假设至少有一个具有指定的 DOB）。

它可以通过预过滤来实现

```
people.Where(p => p.DateOfBirth.HasValue) 
```

因此，这对于实施`ArgMin`or的问题无关紧要`ArgMax`。

**笔记2**

上述方法有一个警告，即当有两个实例具有相同的最小值时，`Min()`实现将尝试将实例作为平局进行比较。但是，如果实例的类没有实现`IComparable`，则会抛出运行时错误：

> 至少一个对象必须实现 IComparable

幸运的是，这仍然可以相当干净地修复。这个想法是将一个遥远的“ID”与作为明确的决胜局的每个条目相关联。我们可以为每个条目使用增量 ID。仍然以人的年龄为例：

```
var youngest = Enumerable.Range(0, int.MaxValue)
               .Zip(people, (idx, ppl) => (ppl.DateOfBirth, idx, ppl)).Min().Item3; 
```

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2017-01-02T03:24:38.257

没有额外包的解决方案：

```
var min = lst.OrderBy(i => i.StartDate).FirstOrDefault();
var max = lst.OrderBy(i => i.StartDate).LastOrDefault(); 
```

您也可以将其包装到扩展中：

```
public static class LinqExtensions
{
    public static T MinBy<T, TProp>(this IEnumerable<T> source, Func<T, TProp> propSelector)
    {
        return source.OrderBy(propSelector).FirstOrDefault();
    }

    public static T MaxBy<T, TProp>(this IEnumerable<T> source, Func<T, TProp> propSelector)
    {
        return source.OrderBy(propSelector).LastOrDefault();
    }
} 
```

在这种情况下：

```
var min = lst.MinBy(i => i.StartDate);
var max = lst.MaxBy(i => i.StartDate); 
```

* * *

顺便说一句... O(n^2) 不是最好的解决方案。**Paul Betts**给出了比我更胖的解决方案。但我的仍然是 LINQ 解决方案，它比这里的其他解决方案更简单、更短。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2021-05-11T19:38:50.130

[.NET 6](https://devblogs.microsoft.com/dotnet/announcing-net-6-preview-4/#maxby-minby)原生支持 MaxBy/MinBy。所以你可以用一个简单的方法来做到这一点

`People.MinBy(p => p.DateOfBirth)`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-06-23T13:01:02.400

```
public class Foo {
    public int bar;
    public int stuff;
};

void Main()
{
    List<Foo> fooList = new List<Foo>(){
    new Foo(){bar=1,stuff=2},
    new Foo(){bar=3,stuff=4},
    new Foo(){bar=2,stuff=3}};

    Foo result = fooList.Aggregate((u,v) => u.bar < v.bar ? u: v);
    result.Dump();
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-03-27T23:34:01.753

完全简单的聚合使用（相当于其他语言的折叠）：

```
var firstBorn = People.Aggregate((min, x) => x.DateOfBirth < min.DateOfBirth ? x : min); 
```

唯一的缺点是每个序列元素访问该属性两次，这可能很昂贵。这很难解决。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-09-05T06:49:57.360

从 .Net 6（Preview 7）或更高版本开始，有新的内置方法[Enumerable.MaxBy](https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.maxby?view=net-6.0)和[Enumerable.MinBy](https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.minby?view=net-6.0)来实现这一点。

```
var lastBorn = people.MaxBy(p => p.DateOfBirth);

var firstBorn = people.MinBy(p => p.DateOfBirth); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-06-16T20:57:11.137

以下是更通用的解决方案。它本质上做同样的事情（以 O(N) 顺序），但在任何 IEnumerable 类型上，并且可以与属性选择器可以返回 null 的类型混合。

```
public static class LinqExtensions
{
    public static T MinBy<T>(this IEnumerable<T> source, Func<T, IComparable> selector)
    {
        if (source == null)
        {
            throw new ArgumentNullException(nameof(source));
        }
        if (selector == null)
        {
            throw new ArgumentNullException(nameof(selector));
        }

        return source.Aggregate((min, cur) =>
        {
            if (min == null)
            {
                return cur;
            }

            var minComparer = selector(min);

            if (minComparer == null)
            {
                return cur;
            }

            var curComparer = selector(cur);

            if (curComparer == null)
            {
                return min;
            }

            return minComparer.CompareTo(curComparer) > 0 ? cur : min;
        });
    }
} 
```

测试：

```
var nullableInts = new int?[] {5, null, 1, 4, 0, 3, null, 1};
Assert.AreEqual(0, nullableInts.MinBy(i => i));//should pass 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-06-13T06:59:43.933

尝试以下想法：

```
var firstBornDate = People.GroupBy(p => p.DateOfBirth).Min(g => g.Key).FirstOrDefault(); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-05-18T19:24:27.400

你可以像 SQL 中的 order by 和 limit/fetch 一样来做。因此，您按 DateOfBirth 升序排序，然后仅获取第一行。

```
var query = from person in People
            where person.DateOfBirth!=null
            orderby person.DateOfBirth
            select person;
var firstBorn = query.Take(1).toList(); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-27T05:48:03.803

再次编辑：

对不起。除了缺少可空值之外，我还查看了错误的函数，

[Min<(Of <(TSource, TResult>)>)(IEnumerable<(Of <(TSource>)>), Func<(Of <(TSource, TResult>)>))](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.min.aspx)确实如您所说返回结果类型。

我想说一种可能的解决方案是实现 IComparable 并使用[Min<(Of <(TSource>)>)(IEnumerable<(Of <(TSource>)>))](http://msdn.microsoft.com/en-us/library/bb352408.aspx)，它确实从 IEnumerable 返回一个元素。当然，如果您无法修改元素，那将无济于事。我觉得 MS 的设计在这里有点奇怪。

当然，如果需要，您可以随时执行 for 循环，或者使用 Jon Skeet 提供的 MoreLINQ 实现。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-04-26T08:59:33.287

我自己也在寻找类似的东西，最好不使用库或对整个列表进行排序。我的解决方案最终类似于问题本身，只是简化了一点。

```
var min = People.Min(p => p.DateOfBirth);
var firstBorn = People.FirstOrDefault(p => p.DateOfBirth == min); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-05-07T13:26:54.167

另一种实现，它可以使用可为空的选择器键，并且对于引用类型的集合，如果没有找到合适的元素，则返回 null。例如，这可能有助于处理数据库结果。

```
 public static class IEnumerableExtensions
  {
    /// <summary>
    /// Returns the element with the maximum value of a selector function.
    /// </summary>
    /// <typeparam name="TSource">The type of the elements of source.</typeparam>
    /// <typeparam name="TKey">The type of the key returned by keySelector.</typeparam>
    /// <param name="source">An IEnumerable collection values to determine the element with the maximum value of.</param>
    /// <param name="keySelector">A function to extract the key for each element.</param>
    /// <exception cref="System.ArgumentNullException">source or keySelector is null.</exception>
    /// <exception cref="System.InvalidOperationException">source contains no elements.</exception>
    /// <returns>The element in source with the maximum value of a selector function.</returns>
    public static TSource MaxBy<TSource, TKey>(this IEnumerable<TSource> source, Func<TSource, TKey> keySelector) => MaxOrMinBy(source, keySelector, 1);

    /// <summary>
    /// Returns the element with the minimum value of a selector function.
    /// </summary>
    /// <typeparam name="TSource">The type of the elements of source.</typeparam>
    /// <typeparam name="TKey">The type of the key returned by keySelector.</typeparam>
    /// <param name="source">An IEnumerable collection values to determine the element with the minimum value of.</param>
    /// <param name="keySelector">A function to extract the key for each element.</param>
    /// <exception cref="System.ArgumentNullException">source or keySelector is null.</exception>
    /// <exception cref="System.InvalidOperationException">source contains no elements.</exception>
    /// <returns>The element in source with the minimum value of a selector function.</returns>
    public static TSource MinBy<TSource, TKey>(this IEnumerable<TSource> source, Func<TSource, TKey> keySelector) => MaxOrMinBy(source, keySelector, -1);

    private static TSource MaxOrMinBy<TSource, TKey>
      (IEnumerable<TSource> source, Func<TSource, TKey> keySelector, int sign)
    {
      if (source == null) throw new ArgumentNullException(nameof(source));
      if (keySelector == null) throw new ArgumentNullException(nameof(keySelector));
      Comparer<TKey> comparer = Comparer<TKey>.Default;
      TKey value = default(TKey);
      TSource result = default(TSource);

      bool hasValue = false;

      foreach (TSource element in source)
      {
        TKey x = keySelector(element);
        if (x != null)
        {
          if (!hasValue)
          {
            value = x;
            result = element;
            hasValue = true;
          }
          else if (sign * comparer.Compare(x, value) > 0)
          {
            value = x;
            result = element;
          }
        }
      }

      if ((result != null) && !hasValue)
        throw new InvalidOperationException("The source sequence is empty");

      return result;
    }
  } 
```

例子：

```
public class A
{
  public int? a;
  public A(int? a) { this.a = a; }
}

var b = a.MinBy(x => x.a);
var c = a.MaxBy(x => x.a); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-06-16T12:00:15.760

如果您想选择具有最小或最大属性值的对象。另一种方法是使用实​​现 IComparable。

```
public struct Money : IComparable<Money>
{
   public Money(decimal value) : this() { Value = value; }
   public decimal Value { get; private set; }
   public int CompareTo(Money other) { return Value.CompareTo(other.Value); }
} 
```

最大实施将是。

```
var amounts = new List<Money> { new Money(20), new Money(10) };
Money maxAmount = amounts.Max(); 
```

最小执行将。

```
var amounts = new List<Money> { new Money(20), new Money(10) };
Money maxAmount = amounts.Min(); 
```

这样，您可以在返回对象类型的同时比较任何对象并获取 Max 和 Min。

希望这会对某人有所帮助。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-08-12T12:23:06.033

一种通过 IEnumerable 上的扩展函数返回对象和找到的最小值的方法。它需要一个可以对集合中的对象执行任何操作的 Func：

```
public static (double min, T obj) tMin<T>(this IEnumerable<T> ienum, 
            Func<T, double> aFunc)
        {
            var okNull = default(T);
            if (okNull != null)
                throw new ApplicationException("object passed to Min not nullable");

            (double aMin, T okObj) best = (double.MaxValue, okNull);
            foreach (T obj in ienum)
            {
                double q = aFunc(obj);
                if (q < best.aMin)
                    best = (q, obj);
            }
            return (best);
        } 
```

对象是机场的示例，我们希望找到离给定（纬度、经度）最近的机场。机场具有 dist(lat, lon) 功能。

```
(double okDist, Airport best) greatestPort = airPorts.tMin(x => x.dist(okLat, okLon)); 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2021-06-29T12:48:51.780

您可以使用现有的 linq 扩展，例如 MoreLinq。但是如果你只需要这些方法，那么你可以在这里使用简单的代码：

```
public static IEnumerable<T> MinBys<T>(this IEnumerable<T> collection, Func<T, IComparable> selector)
{
    var dict = collection.GroupBy(selector).ToDictionary(g => g.Key);
    return dict[dict.Keys.Min()];
}
public static IEnumerable<T> MaxBys<T>(this IEnumerable<T> collection, Func<T, IComparable> selector)
{
    var dict = collection.GroupBy(selector).ToDictionary(g => g.Key);
    return dict[dict.Keys.Max()];
} 
```

# algorithm - 哪些排序算法可以更快地进行接近/近似排序？

> ID：914129
> 
> 赞同：12
> 
> 时间：2009-05-27T05:38:15.037
> 
> 标签：algorithm, language-agnostic, sorting

哪些排序算法会产生很好的近似值的中间排序？

“良好的近似值”是指根据 Kendall 的 tau 和 Spearman 的脚规则等指标来确定有序列表与另一个列表的“距离”（在这种情况下，是精确排序）

我想到的特定应用是人类进行主观成对比较的地方，可能无法完成堆排序或最佳情况快速排序所需的所有*n log n*比较。

哪些算法比其他算法更好地使列表更快地接近/近似排序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-27T05:56:46.877

您可能想查看 shell 排序算法。

AFAIK 它是唯一可以用于主观比较的算法（意味着您不会有任何关于中值的提示），每次通过都会更接近正确的排序。

这是更多信息[http://en.wikipedia.org/wiki/Shell_sort](http://en.wikipedia.org/wiki/Shell_sort)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-27T06:09:40.210

我会建议一些版本的快速排序。如果您知道要排序的数据在什么范围内，那么您可以巧妙地选择枢轴元素，并可能一次将问题分成两个以上的部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-27T06:10:08.447

从左到右的基数排序并过早停止*（*没有双关语）怎么样？

这将是 Nb 运行时，其中 b 是您决定检查的位数。你检查的位越多，它的排序就越多

未分类：
5 0101
8 1000
4 0100
13 1101
1 0001

在 1 位 (N) 之后：
5 0101
1 0001
4 0100
13 1101
8 1000

2 位后 (2N)
1 0001
5 0101
4 0100
8 1000
13 1101

等等...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T06:10:21.427

[我对本页排序](http://www.cs.ubc.ca/~harrison/Java/sorting-demo.html)的完全不科学和直观的调查表明“梳状排序”看起来不错。每次传球似乎都得到了更好的近似。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-02-07T05:02:37.777

我设计了一个 NlgN 排序算法，我前段时间称为“锦标赛排序”，它按顺序查找输出项目（即，它首先找到第一个项目，然后找到第二个项目，等等）。我不确定它是否完全实用，因为记账开销超过了快速排序、合并排序等，但是在对 1,000,000 个随机项目进行基准测试时，比较计数实际上低于标准库快速排序实现（尽管我不是确定它会如何对付较新的）。

就我的算法而言，每个项目的“分数”是它已知优于的项目数。最初每个项目的分数为 0。当比较两个项目时，较好的项目将另一个项目的分数加到它的分数上，再加一。要运行该算法，将所有项目声明为“合格”，并且只要剩余一个以上的合格项目，比较得分最低的两个合格项目，并将失败者设为“不合格”。一旦除了一项以外的所有项目都被宣布为不合格，输出剩下的一项，然后将该项目“击败”的所有项目都宣布为合格。

比较两个得分最低的项目所需的优先级队列会带来一些令人讨厌的簿记开销，但如果要对比较昂贵的事物进行排序，那么该算法可能会很有趣。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-05-27T05:55:36.770

我认为是冒泡排序。优点是您可以通过额外的数据扫描逐渐改进排序。

# spring - Restricting the scope of a model in JSP

> ID：914139
> 
> 赞同：2
> 
> 时间：2009-05-27T05:43:16.650
> 
> 标签：spring, jsp, jsp-tags

If i put an object named "foo" into model in Spring controller, and want to limit its scope, how can I do this.

Let's say I have a page which uses a jsp tag that takes as a parameter "foo". If I call the tag inside jsp, like `<tag foo="${bar}" />`, it seems to me that the model "foo" is interfering with the "bar".

Or even if not, if I just want to limit the scope of model "foo" to be accessible only in jsp page, and not in others (either in 'ed page or in a tag that first jsp page calls.)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T06:11:58.477

Basically you can't restrict the scope. The only way to pass objects from a Controller to the view is via the request scope attributes.

If you have a lot of different views/controllers for a single page you may want to have a naming convention for your request attributes, something like the class name of the controller. Only trouble is that accessing them is not so clean

```
${requestScope['com.your.app.Controller.RESULT']} 
```

One possible is to use to create page scope versions of the variables:

```
<c:set var='result' value="${requestScope['com.your.app.Controller.RESULT']}"/>
...
${result} 
```

In your example I'm not sure I'd say that 'foo' is interfering with 'bar' it looks like you are passing bar to the tag as a parameter?

# java - 如何从 Grails 中的控制器访问域属性？

> ID：914141
> 
> 赞同：3
> 
> 时间：2009-05-27T05:44:25.477
> 
> 标签：java, grails, groovy, controller, dns

我有以下 Grails 域类：

```
class Product {  
    String name  
    Float basePrice  
    Category category  
    String image = "default.jpg"  

    static constraints = {
        name(size:3..25, blank:false)
        basePrice(scale:2, nullable:false)
        category(inList:Category.list(), nullable:false)
        image(blank:false)
    }
} 
```

从控制器中，我想获取图像属性的默认值（在本例中为“default.jpg”）。像这样的东西：

```
def productInstance = new Product(params)
productInstance.image = getProductPicturePath() ?: Product().image 
```

getProductPicturePath 返回一个图像路径，但如果没有提交图像，控制器应将空值替换为默认值。虽然我当然可以写这样的东西：

```
productInstance.image = getProductPicturePath() ?: "default.jpg" 
```

它当然不是很干燥，我更愿意将默认值保留在一个地方。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-27T06:16:42.773

显而易见的解决方案是将其声明为常量，然后引用它。

```
class Product {  
    static DEFAULT_IMAGE = "default.jpg"
    String name  
    Float basePrice  
    Category category  
    String image = DEFAULT_IMAGE

    static constraints = {
        name(size:3..25, blank:false)
        basePrice(scale:2, nullable:false)
        category(inList:Category.list(), nullable:false)
        image(blank:false)
    }
}

productInstance.image = getProductPicturePath() ?: Product.DEFAULT_IMAGE 
```

更好`getProductPicturePath()`的是，返回默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T11:41:37.890

如果没有`image`钥匙`params`

```
def productInstance = new Product(params) 
```

将跳过此属性并保留域类中定义的默认值。因此，假设您的参数不包含`image`键，最简单的方法是完全跳过`image`那些没有图像的产品的属性分配：

```
def imagePath = getProductPicturePath()
if(imagePath) {
    productInstance.image = imagePath
} 
```

# asp.net - 在 ASP.NET 页面上显示 XML

> ID：914143
> 
> 赞同：15
> 
> 时间：2009-05-27T05:44:57.037
> 
> 标签：asp.net

我有一个包含使用 LinqtoXML 的 XML 文档的字符串

在 asp.net 页面上按原样显示它的最佳方式是什么。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-27T06:51:15.463

我本来希望按照丹尼斯提到的方式来做（使用`<asp:Xml>`控件）。但这需要使用 XSL 样式表来格式化 XML。Xml 控件不允许将 HTML 编码的字符串作为 DocumentContent 属性传递，并且不公开任何对内容进行编码的方法。

正如我在 Dennis 帖子的评论中提到的，msxml.dll 中包含的 defaultss.xsl 不公开（并且不符合 XSL 1.0）。但是，此处发布了一个公开的转换版本：[http](http://www.dpawson.co.uk/xsl/sect2/microsoft.html#d7615e227) ://www.dpawson.co.uk/xsl/sect2/microsoft.html#d7615e227 。我已经对其进行了测试，并且可以正常工作，尽管有些错误。

因此，我认为最简单的方法是使用`<asp:Literal>`控件将预编码的 XML 输出到页面。以下示例演示了此方法：

* * *

```
<%@ Page Language="C#" %>

<%@ Import Namespace="System.IO" %>
<%@ Import Namespace="System.Xml" %>

<script runat="server">
  protected void Page_Load(object sender, EventArgs e)
  {
    string theXML = Server.HtmlEncode(File.ReadAllText(Server.MapPath("~/XML/myxmlfile.xml")));
    lit1.Text = theXML;
  }
</script>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
  <title>Untitled Page</title>
</head>
<body>
  <form id="form1" runat="server">
    <div>
      <pre>
        <asp:Literal ID="lit1" runat="server" />
      </pre>
    </div>
  </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-27T06:08:24.923

将此`asp:Xml`控件与此[默认样式表](http://www.dennispalmer.com/files/defaultss.xsl)一起用作`TransformSource`. 这将使您的外观与您在 Internet Explorer 中打开带有语法突出显示和着色的 xml 文件时看到的非常相似。

我删除了扩展/折叠节点功能，因为我无法让它工作。这个文件是 xsl 1.0 并且对于我的目的来说工作得很好，没有错误。

**为避免我的链接文件将来出现任何问题，以下是内容：**

```
<!--
|
| XSLT REC Compliant Version of IE5 Default Stylesheet
|
| Original version by Jonathan Marsh (jmarsh@xxxxxxxxxxxxx)
| http://msdn.microsoft.com/xml/samples/defaultss/defaultss.xsl
|
| Conversion to XSLT 1.0 REC Syntax by Steve Muench (smuench@xxxxxxxxxx)
|
+-->
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output indent="no" method="html"/>
<xsl:template match="/">
    <xsl:apply-templates/>
</xsl:template>
<xsl:template match="processing-instruction()">
    <DIV class="e">
        <SPAN class="b">
            <xsl:call-template name="entity-ref">
                <xsl:with-param name="name">nbsp</xsl:with-param>
            </xsl:call-template>
        </SPAN>
        <SPAN class="m">
            <xsl:text>&lt;?</xsl:text>
        </SPAN>
        <SPAN class="pi">
            <xsl:value-of select="name(.)"/>
            <xsl:value-of select="."/>
        </SPAN>
        <SPAN class="m">
            <xsl:text>?></xsl:text>
        </SPAN>
    </DIV>
</xsl:template>
<xsl:template match="processing-instruction('xml')">
    <DIV class="e">
        <SPAN class="b">
            <xsl:call-template name="entity-ref">
                <xsl:with-param name="name">nbsp</xsl:with-param>
            </xsl:call-template>
        </SPAN>
        <SPAN class="m">
            <xsl:text>&lt;?</xsl:text>
        </SPAN>
        <SPAN class="pi">
            <xsl:text>xml </xsl:text>
            <xsl:for-each select="@*">
                <xsl:value-of select="name(.)"/>
                <xsl:text>="</xsl:text>
                <xsl:value-of select="."/>
                <xsl:text>" </xsl:text>
            </xsl:for-each>
        </SPAN>
        <SPAN class="m">
            <xsl:text>?></xsl:text>
        </SPAN>
    </DIV>
</xsl:template>
<xsl:template match="@*">
    <SPAN>
        <xsl:attribute name="class"><xsl:if test="xsl:*/@*"><xsl:text>x</xsl:text></xsl:if><xsl:text>t</xsl:text></xsl:attribute>
        <xsl:value-of select="name(.)"/>
    </SPAN>
    <SPAN class="m">="</SPAN>
    <B>
        <xsl:value-of select="."/>
    </B>
    <SPAN class="m">"</SPAN>
</xsl:template>
<xsl:template match="text()">
    <DIV class="e">
        <SPAN class="b"> </SPAN>
        <SPAN class="tx">
            <xsl:value-of select="."/>
        </SPAN>
    </DIV>
</xsl:template>
<xsl:template match="comment()">
    <DIV class="k">
        <SPAN>
            <!--<A STYLE="visibility:hidden" class="b" onclick="return false" onfocus="h()">-</A>-->
            <SPAN class="m">
                <xsl:text>&lt;!--</xsl:text>
            </SPAN>
        </SPAN>
        <SPAN class="ci" id="clean">
            <PRE>
                <xsl:value-of select="."/>
            </PRE>
        </SPAN>
        <SPAN class="b">
            <xsl:call-template name="entity-ref">
                <xsl:with-param name="name">nbsp</xsl:with-param>
            </xsl:call-template>
        </SPAN>
        <SPAN class="m">
            <xsl:text>--></xsl:text>
        </SPAN>
        <SCRIPT>f(clean);</SCRIPT>
    </DIV>
</xsl:template>
<xsl:template match="*">
    <DIV class="e">
        <DIV STYLE="margin-left:1em;text-indent:-2em">
            <SPAN class="b">
                <xsl:call-template name="entity-ref">
                    <xsl:with-param name="name">nbsp</xsl:with-param>
                </xsl:call-template>
            </SPAN>
            <SPAN class="m">&lt;</SPAN>
            <SPAN>
                <xsl:attribute name="class"><xsl:if test="xsl:*"><xsl:text>x</xsl:text></xsl:if><xsl:text>t</xsl:text></xsl:attribute>
                <xsl:value-of select="name(.)"/>
                <xsl:if test="@*">
                    <xsl:text> </xsl:text>
                </xsl:if>
            </SPAN>
            <xsl:apply-templates select="@*"/>
            <SPAN class="m">
                <xsl:text>/></xsl:text>
            </SPAN>
        </DIV>
    </DIV>
</xsl:template>
<xsl:template match="*[node()]">
    <DIV class="e">
        <DIV class="c">
            <!--<A class="b" href="#" onclick="return false" onfocus="h()">-</A>-->
            <SPAN class="m">&lt;</SPAN>
            <SPAN>
                <xsl:attribute name="class"><xsl:if test="xsl:*"><xsl:text>x</xsl:text></xsl:if><xsl:text>t</xsl:text></xsl:attribute>
                <xsl:value-of select="name(.)"/>
                <xsl:if test="@*">
                    <xsl:text> </xsl:text>
                </xsl:if>
            </SPAN>
            <xsl:apply-templates select="@*"/>
            <SPAN class="m">
                <xsl:text>></xsl:text>
            </SPAN>
        </DIV>
        <DIV>
            <xsl:apply-templates/>
            <DIV>
                <SPAN class="b">
                    <xsl:call-template name="entity-ref">
                        <xsl:with-param name="name">nbsp</xsl:with-param>
                    </xsl:call-template>
                </SPAN>
                <SPAN class="m">
                    <xsl:text>&lt;/</xsl:text>
                </SPAN>
                <SPAN>
                    <xsl:attribute name="class"><xsl:if test="xsl:*"><xsl:text>x</xsl:text></xsl:if><xsl:text>t</xsl:text></xsl:attribute>
                    <xsl:value-of select="name(.)"/>
                </SPAN>
                <SPAN class="m">
                    <xsl:text>></xsl:text>
                </SPAN>
            </DIV>
        </DIV>
    </DIV>
</xsl:template>
<xsl:template match="*[text() and not (comment() or processing-instruction())]">
    <DIV class="e">
        <DIV STYLE="margin-left:1em;text-indent:-2em">
            <SPAN class="b">
                <xsl:call-template name="entity-ref">
                    <xsl:with-param name="name">nbsp</xsl:with-param>
                </xsl:call-template>
            </SPAN>
            <SPAN class="m">
                <xsl:text>&lt;</xsl:text>
            </SPAN>
            <SPAN>
                <xsl:attribute name="class"><xsl:if test="xsl:*"><xsl:text>x</xsl:text></xsl:if><xsl:text>t</xsl:text></xsl:attribute>
                <xsl:value-of select="name(.)"/>
                <xsl:if test="@*">
                    <xsl:text> </xsl:text>
                </xsl:if>
            </SPAN>
            <xsl:apply-templates select="@*"/>
            <SPAN class="m">
                <xsl:text>></xsl:text>
            </SPAN>
            <SPAN class="tx">
                <xsl:value-of select="."/>
            </SPAN>
            <SPAN class="m">&lt;/</SPAN>
            <SPAN>
                <xsl:attribute name="class"><xsl:if test="xsl:*"><xsl:text>x</xsl:text></xsl:if><xsl:text>t</xsl:text></xsl:attribute>
                <xsl:value-of select="name(.)"/>
            </SPAN>
            <SPAN class="m">
                <xsl:text>></xsl:text>
            </SPAN>
        </DIV>
    </DIV>
</xsl:template>
<xsl:template match="*[*]" priority="20">
    <DIV class="e">
        <DIV STYLE="margin-left:1em;text-indent:-2em" class="c">
            <!--<A class="b" href="#" onclick="return false" onfocus="h()">-</A>-->
            <SPAN class="m">&lt;</SPAN>
            <SPAN>
                <xsl:attribute name="class"><xsl:if test="xsl:*"><xsl:text>x</xsl:text></xsl:if><xsl:text>t</xsl:text></xsl:attribute>
                <xsl:value-of select="name(.)"/>
                <xsl:if test="@*">
                    <xsl:text> </xsl:text>
                </xsl:if>
            </SPAN>
            <xsl:apply-templates select="@*"/>
            <SPAN class="m">
                <xsl:text>></xsl:text>
            </SPAN>
        </DIV>
        <DIV>
            <xsl:apply-templates/>
            <DIV>
                <SPAN class="b">
                    <xsl:call-template name="entity-ref">
                        <xsl:with-param name="name">nbsp</xsl:with-param>
                    </xsl:call-template>
                </SPAN>
                <SPAN class="m">
                    <xsl:text>&lt;/</xsl:text>
                </SPAN>
                <SPAN>
                    <xsl:attribute name="class"><xsl:if test="xsl:*"><xsl:text>x</xsl:text></xsl:if><xsl:text>t</xsl:text></xsl:attribute>
                    <xsl:value-of select="name(.)"/>
                </SPAN>
                <SPAN class="m">
                    <xsl:text>></xsl:text>
                </SPAN>
            </DIV>
        </DIV>
    </DIV>
</xsl:template>
<xsl:template name="entity-ref">
    <xsl:param name="name"/>
    <xsl:text disable-output-escaping="yes">&amp;</xsl:text>
    <xsl:value-of select="$name"/>
    <xsl:text>;</xsl:text>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-07T08:00:28.380

c# 解决方案这对我有用：

```
string encodedXml = String.Format("<pre>{0}</pre>", HttpUtility.HtmlEncode(xmlStr));
testLb.Text = encodedXml; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-12-31T19:06:58.897

**在不使用 XML 控件的情况下显示 XML 格式的代码**

这是一个 VB.NET 解决方案：

```
Public Shared Function FormatXml(ByVal xmlDoc As XmlDocument) As String  
    Dim sb As New StringBuilder()  
    `'We will use stringWriter to push the formated xml into our StringBuilder sb.`  
    Using stringWriter As New StringWriter(sb)  
        `'We will use the Formatting of our xmlTextWriter to provide our indentation.`  
        Using xmlTextWriter As New XmlTextWriter(stringWriter)  
            xmlTextWriter.Formatting = Formatting.Indented  
            xmlDoc.WriteTo(xmlTextWriter)  
        End Using
    End Using
    Return sb.ToString()
End Function 
```

使用此函数设置多行文本框或标签的文本：

```
XmlViewTextBox.Text = FormatXml(xmlDoc) 
```

如果您尝试使用 XML 字符串，请先将其转换为 XmlDocument：

```
Dim xmlDoc As New XmlDocument
xmlDoc.LoadXml(xmlString) 
```

此解决方案将在 HTML 页面上呈现 XML 代码，同时保留换行符和缩进。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T06:05:26.973

一个 div 中的 HTML PRE 标记，只是回显正确转义的字符串？

Div 为您提供对齐/格式化，而 PRE 应保留空格

# xcode - 隐藏/取消隐藏 xcode 中的所有注释

> ID：914149
> 
> 赞同：12
> 
> 时间：2009-05-27T05:49:37.247
> 
> 标签：xcode, comments

有没有办法隐藏/取消隐藏 xcode 源文件中的所有注释？

这在处理添加了太多注释的代码时非常有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-27T05:55:48.300

您可以使用折叠/展开来隐藏/显示评论，使用 ⌃⇧⌘↑ 和 ⌃⇧⌘↓。这也可以通过 View --> Code Folding --> Fold/Unfold Comment Blocks 访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T08:12:21.953

尝试：Ctrl + Command + Shift + Left 或 Ctrl + Command + Left

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-17T16:04:06.843

包围任何代码

```
/*   
....code here....  
*/ 
```

将该评论放入您可以折叠/展开的部分。

这甚至适用于已经在长块中用 // 注释掉的代码块。

希望这对某人有帮助，即使这个问题已经 4 岁了！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-23T00:22:09.473

扩展一点 Mish 的答案，因为 XCode 的 UI 非常微妙

正如@Mish 指出的那样，围绕任何代码`/* ... */`使该代码可以折叠/展开，就像您的`{ ... }`部分一样。

我还没有使用此答案页面上列出的任何键盘快捷键，但是如果您将*鼠标悬停*在该部分的左侧，`/*...*/`您会看到 UI 更改以响应如下：

![在此处输入图像描述](https://i.stack.imgur.com/OCGzb.png)

单击时将折叠评论。我打算从现在开始尝试使用 / *...* / 格式进行所有评论。

PS：请注意，`/*...*/`注释可以与任一侧的代码内联，并且仍然可以折叠。

编辑：我发现在某些`{...}`括号内折叠注释不起作用，因为 XCode 正在折叠整个`{}`部分......

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-08T00:28:50.177

// 隐藏所有注释的一种非常简单实用的方法是在 Xcode 首选项中将注释的颜色更改为黑色（或您正在使用的其他背景编辑器颜色，通常为深色）。

当您想再次看到它们时，只需将颜色更改为原始颜色，例如绿色

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-12T01:31:59.580

我做了一个总结，它对我有用。已经很晚了，但是好的流程有助于编写好的代码。`swift 3-4`只为

1.  如果您想在实际代码之前先编写伪代码，您可以将所有内容写入注释块

    `/* first, use http request in the callback, do a. b. c. */`

2.  然后因为你可能会重写但逻辑大多相同，所以你可能不想删除评论，这很好，但要确保它们不会挡住你的视线，**所以你定义一个方便折叠/的快捷方式将所有注释块展开为一行**。（这是你能做的最好的。）；然后当你折叠它们时，它看起来像这样：`/*...`

3.  要定义快捷方式，请转到 Xcode => Preference => Key Bindings =>`fold comment block`

就我而言 `alt⇧ctrl{`，我使用`alt⇧ctrl}`

然后随心所欲地定义它，但要小心冲突。

折叠伪代码注释真的很划算

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-02T16:01:06.913

`/*` 在 和 之间选择代码和 注释`*/` 。
不要选择 `/*` and `*/`。然后从编辑器菜单中选择代码折叠。这个对我有用。斯威夫特 5，Xcode 12.4

# javascript - 如何使用 Rails Helpers 对 JS 进行排队

> ID：914150
> 
> 赞同：1
> 
> 时间：2009-05-27T05:51:03.563
> 
> 标签：javascript, ruby-on-rails

假设我想将这些 JS 调用排队，可以使用 Rails 助手来完成吗？

```
render :update do |page|
 page.replace_html replace_html 'notice', flash[:notice]
 page.visual_effect :blind_down, "notice", :duration => 0.5
 page.visual_effect :blind_up, "notice", :duration => 0.5
end 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T20:03:16.500

Scriptaculous 效果有一个`queue`选项，您可以将其作为参数提供给`visual_effect`. 例如，

```
render :update do |page|
 page.replace_html replace_html 'notice', flash[:notice]
 page.visual_effect :blind_down, "notice", :duration => 0.5, :queue => 'end'
 page.visual_effect :blind_up, "notice", :duration => 0.5, :queue => 'end'
end 
```

将两个效果排队，以便在盲下完成之前盲上效果不会开始。

请参阅script.aculo.us github wiki 上的[Effect Queues](http://wiki.github.com/madrobby/scriptaculous/effect-queues)以获取有关队列如何工作以及可以为队列提供的参数的更多信息（例如，默认情况下，页面使用一个队列，但如果您可以定义多个队列希望各种效果队列并行运行）。`:queue`可以采用字符串（如上）或哈希，这使您可以进行更多自定义：

```
:queue => { :position => 'end', :scope => 'my_effect_queue' } 
```

# mysql - 网站战术：一个关于多少 SQL 查询就足够的问题

> ID：914151
> 
> 赞同：3
> 
> 时间：2009-05-27T05:52:01.923
> 
> 标签：mysql

我最近开始推出并慢慢推出自制的 CMS。该站点允许进行大量定制，并朝着国际化和定制的方向发展，无需源代码。这是一个个人项目，整个目的是看看我能把自己的编程限制推到多远（处理博客、网络漫画和小型论坛的 CMS 的分发问题不是我愿意做的考虑一下，直到我清理它并进行更多工作 - 同样，鉴于它是一个业余项目，我怀疑它与其他更精致的项目相比是否有任何重要性......但这些不是关注的主题手头的话题。）

我编写了一系列代码，让我可以查看每个页面的生成速度以及运行了多少查询；平均而言，我看到每页执行 9 到 13 个，最多 12 个 MySQL 查询。生成页面的平均时间在 10-20 毫秒之间。现在，没有任何专业设计经验，我应该争取的最佳选择是什么？

有什么方法可以减少生成时间（或者，平均每页 15 毫秒，这甚至不是问题），或者减少大部分内容从 MySQL 数据库加载的页面上的查询数量的策略，包括菜单项之类的内容。

请注意，这是一个非常广泛的问题；我的目的不是提出一般性问题或引发对话，而是找出减少此类系统可以创建的服务器上的负载（如果有的话）的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T06:43:16.083

*   通过跳过解析和编译成字节码，使用**[PHP 操作码缓存](http://en.wikipedia.org/wiki/PHP_accelerator)**将大大减少打开和编译 PHP 脚本所需的时间。

*   打开**[MySQL 查询缓存](http://dev.mysql.com/doc/refman/5.1/en/query-cache.html)**通常（尽管不总是）是个好主意。

*   与其关注查询的数量，不如关注通过**优化**查询来减少这些查询所花费的时间。拥有大量优化的小型查询通常比尝试减少查询的数量要高效得多。

*   **使用探查器**，例如[XDebug](http://www.xdebug.org/)内置的探查器。与 KCacheGrind 或 WinCacheGrind 之类的解释器一起，当您知道要关注什么时，优化代码真的很有帮助。不值得优化对您的总执行时间贡献微不足道的东西。有必要了解 *CacheGrind 中所有内容的含义。

我的 PHP 内容管理系统通常在大约相同的时间内加载一个页面（最低 8 毫秒，所有内容都是缓存命中）。但是偶尔，当你做一些复杂的事情时，它可能需要超过 500 毫秒。当关注用户体验时，典型时间更重要，而不是异常值，但当关注服务器负载时，平均时间更重要，所以那些 500ms 的异常值突然变得非常重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T06:03:06.977

如果您主要为小公司或其他您无法预测或想象高流量的原因开发这些站点（即没有像 Digg/Facebook/等那样），那么平均 15 毫秒应该没问题。

请问这12个查询是干什么用的？我想它们是用于获取菜单项、获取页面内容等。有多种组合/优化查询的方法，所以如果您发布一些我（和其他堆栈器）可能能够帮助您优化查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T06:29:07.637

这取决于......就像它总是与性能问题一样，如果系统当前满足您的性能要求，那么不要太担心。

通常，如果您的页面生成时间为 15 毫秒，则它只是用户体验的总点击到玻璃时间的一小部分，请参阅[yahoo 异常性能页面](http://developer.yahoo.com/performance/)为了获得尽可能快的页面加载时间，还需要查看其他内容.

在服务器上，数据库可能会将结果缓存到几乎所有（如果不是所有）您正在运行的查询中，因此页面计时非常快。如果您尚未加载更大的数据集来测试应用程序，您可能希望加载更大的数据集，您可能会发现性能会随着数据集的大小而降低。

# objective-c - 有没有办法在 Objective-C 中捕获发送到 nil 的消息？

> ID：914166
> 
> 赞同：11
> 
> 时间：2009-05-27T05:56:50.857
> 
> 标签：objective-c, debugging, null

我刚刚被一个烦人的[错误](https://stackoverflow.com/questions/913627/uiviewcontroller-viewdidload-not-being-called)所困扰，该错误被 Objective-C 中的“向 nil 发送消息是好的”行为变得模糊不清。

我看过[向 nil 发送消息？](https://stackoverflow.com/questions/156395/sending-a-message-to-nil)，并且共识似乎是在 Objective-C 中“我们就是这样滚动的”。

现在，也许我在 Objective-C 方面没有足够的经验，但似乎抓住它会很有用，因为我想不出一个很好的理由来说明为什么*大部分*时间都会发生这种情况。但是，这可能只是我不习惯的编码习惯。

所以除了像这样到处检查 nil 之外：

```
assert( object != nil );
[object message]; 
```

有没有办法让运行时捕获这种情况，并在何时`object`为 nil 时发出警告？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-27T06:11:15.793

您可以使用[ObjC 未记录的技巧或 dtrace](http://www.friday.com/bbum/2008/01/02/objective-c-logging-messages-to-nil/)（请参阅 dtrace 解决方案的注释）。

```
pid$1::objc_msgSend:entry
/arg0==0/
{
  ustack();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-27T13:02:21.940

nil 消息传递在 ObjC 中非常常用。人们可以争论这是好是坏；这只是你必须习惯的事情。如果你试图用技巧来打破它，那么你就会打破 Cocoa，因为 Cocoa 使用了它。有一些技巧（如 diciu 发布的）可以在您怀疑 nil 消息传递但似乎无法找到它的情况下进行调试。但是你不能只把它们留在你的代码中（上面的博客文章清楚地说明了这一点）。nil 消息传递在框架中太常见了。

但是，对于您的原始观点，比较：

```
- (void)doSomethingWith:(id)x {
    NSAssert(x != nil, @"Don't pass me nil");
    [x something];
} 
```

对比

```
void Bar::DoSomething(Foo *x) {
    assert(x != NULL);
    if (x != NULL) {
       x.something;
    }
} 
```

In both cases, you need to test, and in both cases the compiler won't warn you if you fail to test. The only difference is in what cases you crash/assert. Personally, I write macros around `NSAssert()` that make it *always* print a log message if it fails. It just only crashes in Debug. That way when a customer sends me logs, I can see what assertions failed.

# dotnetnuke - 除非我登录，否则不会显示 DotNetNuke 导航菜单？

> ID：914171
> 
> 赞同：0
> 
> 时间：2009-05-27T05:58:46.967
> 
> 标签：dotnetnuke

我正在使用 DotNetNuke(DNN) 站点，由于某种原因，DNN:NAV 控件仅在我登录时显示菜单。

菜单是模板文件本身的一部分，在本例中为“index.ascx”

我有什么方法可以解决菜单的可见性问题？为什么不会出现？页面上的其他内容都是。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-11-15T06:49:07.540

我可能会检查的一件事是，未登录的用户可以看到您的页面 - 如果没有可供所有用户使用的页面，这可能会发生。

# wpf - 如何停止更新绑定属性？

> ID：914173
> 
> 赞同：10
> 
> 时间：2009-05-27T05:59:47.293
> 
> 标签：wpf, binding

我的应用程序中有一个对话框，它会在主屏幕上弹出一个对话框（它实际上是一个用户控件，根据 Billy Hollis 的应用程序演示显示在页面上），其中包含要编辑的主屏幕数据。主屏幕是只读的。

我遇到的问题是，当我更改对话框中的数据时，主屏幕上的数据也会更新。显然它们绑定到同一个对象，但是有没有办法停止绑定更新，直到我在对话框中单击保存？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-27T08:23:04.047

您可以使用[BindingGroup](http://msdn.microsoft.com/en-us/library/system.windows.data.bindinggroup.aspx)：

```
...
<StackPanel Name="panel">
    <StackPanel.BindingGroup>
        <BindingGroup Name="bindingGroup"/>
    </StackPanel.BindingGroup>
    <TextBox Text="{Binding Foo}"/>
    <TextBox Text="{Binding Bar}"/>
    <Button Name="btnSubmit" Content="Submit" OnClick="btnSubmit_Click"/>
    <Button Name="btnCancel" Content="Cancel" OnClick="btnCancel_Click"/>
</StackPanel>
... 
```

后面的代码：

```
private void UserControl_Loaded(object sender, RoutedEventArgs e)
{
    panel.BindingGroup.BeginEdit();
}

private void btnSubmit_Click(object sender, RoutedEventArgs e)
{
    panel.BindingGroup.CommitEdit();
    panel.BindingGroup.BeginEdit();
}

private void btnCancel_Click(object sender, RoutedEventArgs e)
{
    panel.BindingGroup.CancelEdit();
    panel.BindingGroup.BeginEdit();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-27T08:29:43.223

查看[Binding.UpdateSourceTrigger](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.updatesourcetrigger.aspx)属性。

您可以`Binding`像这样在对话框中设置

```
<TextBox Name="myTextBox" 
    Text={Binding Path=MyProperty, UpdateSourceTrigger=Explicit} /> 
```

然后在按钮保存事件中调用 UpdateSource 方法

```
myTextBox.GetBindingExpression(TextBox.TextProperty).UpdateSource(); 
```

调用`UpdateSource`源对象后，将使用来自`TextBox`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T17:23:53.437

我也选择使用[BindingGroup](http://msdn.microsoft.com/en-us/library/system.windows.data.bindinggroup.aspx)。但不是`BeginEdit()`//模式，我显式调用`CommitEdit()`与BindingGroup 关联的所有绑定。这种方法允许我只添加一个事件处理程序而不是 3 个。`CancelEdit()``UpdateSource()`

```
private void OkButton_Click(object sender, RoutedEventArgs e)
{
    CommitChanges();
    DialogResult = true;
    Close();
}

private void CommitChanges()
{
    foreach (var bindingExpression in this.BindingGroup.BindingExpressions)
    {
        bindingExpression.UpdateSource();
    }
} 
```

# semantic-web - 如何在描述逻辑中表示这句话？

> ID：914175
> 
> 赞同：5
> 
> 时间：2009-05-27T06:00:23.940
> 
> 标签：semantic-web, description-logic

如何在描述逻辑中描述这个？

“每个人要么是男性要么是女性”

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-27T22:47:12.103

到目前为止，此处提供的答案不使用描述逻辑语法（无变量）。假设您想要有关描述逻辑的科学论文中使用的实际描述逻辑语法，请查看以下内容：

```
human \sqsubseteq (male \sqcup female) \sqcap \neg (male \sqcap female) 
```

它是用 LaTeX 编写的，你可以使用在线的 LaTeX 公式编辑器，例如[this](http://www.sciweavers.org/free-online-latex-equation-editor)来渲染这个表达式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-27T07:01:39.550

使用命题演算，这将被描述为：

∀xH(x) ⊃ (M(x) ∨ F(x)) ∧ (¬(M(x) ∧ F(x)))

在哪里：

```
H(x) = x is human
M(x) = x is male
F(x) = x is female 
```

在描述逻辑中，它有点不同：

```
human ⊆ (male ∪ female) ∩ ¬(male ∩ female) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T06:24:22.137

作为新手还没有能力发表评论，但我相信您会想使用“**独家或**”……再说一次，我想这取决于您的话语范围；）

# .htaccess - .htaccess 重写问题

> ID：914177
> 
> 赞同：1
> 
> 时间：2009-05-27T06:01:15.920
> 
> 标签：.htaccess, mod-rewrite

正如人们所期望的那样，我的网站中有许多页面。

例如：

index.php submit.php view.php?id=blah

我希望这些重写像

索引/提交/查看/等等

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T06:14:17.020

通过 .htaccess 重写来处理它的方式会让人有点头疼。这似乎是一个基本的答案，但除非您掌握正则表达式，否则您将迷失方向。

但是，有几种处理方法。我假设您只有 index.php、submit.php 和 view.php 以及关联的 id。

```
重写引擎开启
RewriteRule ^(index|submit|view)/(\d+)$ /$1.php?id=$2
重写规则 ^(index|submit|view)/(\d+)$ /$1.php

```

它是这样工作的：你告诉 .htaccess 打开重写引擎。第 2 步，你给网站一个参数，告诉它是如何完成的。本例中的参数为：url开头，域名后，检查index、submit、view。如果存在，它会寻找 id。如果两者都存在，它会将值作为`/(index, submit, or view)?id=$id`.

第二个是在ID不可行的情况下。

这是一种简单的处理方法。处理它的更复杂的方法是......

```
重写引擎开启
重写规则 ^([az]+)/?(\d+)?$ /$1.php?id=$2

```

这将仅加载以大写和小写字母的常规字母字符编写的任何内容，将其用作文件名，然后检测是否需要 id - 它会在没有的情况下加载。

`$_GET`如果名称错误或没有返回任何有价值的东西，您应该确保在您的行中包含一些保护措施以返回错误。

你应该玩弄它，用一壶咖啡和一些酒精来研究正则表达式（我相信正则表达式是现代程序员酗酒的第一大原因，但我可能是错的;-P ...）直到你找到一个适合您系统的方案。

作为旁注，您可以根据需要拥有尽可能多的 RewriteRules，但它们总是首先从顶部处理。我意识到这听起来像是常识，但在调试时知道这一点很重要。

# c# - 以编程方式连接和断开 USB “无需拔下和重新插入”

> ID：914179
> 
> 赞同：2
> 
> 时间：2009-05-27T06:01:32.610
> 
> 标签：c#, usb

我需要以编程方式连接和断开 USB。也就是说，我已经插入了 USB 设备。我需要使用 C#、.NET 应用程序传输文件。该应用程序将监视特定文件夹并将文件从该文件夹传输到 USB 驱动器。我需要在文件传输后断开 USB 设备并在需要时连接 USB - 无需拔下并重新插入。

有什么代码可以做到这一点，或者是否有任何可用的 DLL 文件？

主要内容：注意，注意：***无需拔下和重新插入 USB 设备***。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-28T16:50:54.923

如果您的目标是在不使用某个磁盘卷时使其不可用，则更明智的方法可能是使用卷管理 API，例如使用[`IOCTL_VOLUME_OFFLINE`](http://msdn.microsoft.com/en-us/library/bb309064(VS.85).aspx)控制代码。（我假设您知道哪个驱动器号属于您的 USB 磁盘。）

[或者，您可以使用 CfgMgr / SetupAPI 以编程方式禁用和启用卷设备——就像在设备管理器](http://en.wikipedia.org/wiki/Device_Manager)中右键单击卷并选择*禁用*一样。（有关使用 SetupAPI 的信息，请查看随 Windows WDK 提供的[DevCon](http://social.technet.microsoft.com/wiki/contents/articles/182.how-to-obtain-the-current-version-of-device-console-utility-devcon-exe.aspx)示例代码，并参阅 MSDN 了解[SetupDiChangeState](https://msdn.microsoft.com/en-us/library/windows/hardware/ff550930(v=vs.85).aspx)等函数。）

后一个选项可能需要特权用户帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T06:13:26.820

我不确定，但可以做到。在 Linux 中，我遇到过某些情况，即以编程方式断开设备的电源。如果连接的 USB 设备出现太多错误，内核通常会这样做。因此，即使在 Windows 中也应该可以做到这一点。您可能需要编写自己的外部 DLL 来执行此操作。

# sql-server - 有没有办法找出你的数据库表的大小？

> ID：914182
> 
> 赞同：8
> 
> 时间：2009-05-27T06:02:21.753
> 
> 标签：sql-server, size

我的 sql 2008 服务器中有大约 10 个表。

目前，我的 mdf 大约是 3.5Gig。（我在一些表中也有一些二进制数据）。所以，我想知道是否有一种方法可以查看哪些表是最大的。

这可能吗？

也许它是一个索引或 FTS 目录？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-27T06:07:24.303

运行这个：

```
/******************************************************************************
**    File: “GetTableSpaceUseage.sql”
**    Name: Get Table Space Useage for a specific schema
**    Auth: Robert C. Cain
**    Date: 01/27/2008
**
**    Desc: Calls the sp_spaceused proc for each table in a schema and returns
**        the Table Name, Number of Rows, and space used for each table.
**
**    Called by:
**     n/a – As needed
**
**    Input Parameters:
**     In the code check the value of @schemaname, if you need it for a
**     schema other than dbo be sure to change it.
**
**    Output Parameters:
**     NA
*******************************************************************************/

/*—————————————————————————*/
/* Drop the temp table if it's there from a previous run                     */
/*—————————————————————————*/
if object_id(N'tempdb..[#TableSizes]') is not null
  drop table #TableSizes ;
go

/*—————————————————————————*/
/* Create the temp table                                                     */
/*—————————————————————————*/
create table #TableSizes
  (
    [Table Name] nvarchar(128)   /* Name of the table */
  , [Number of Rows] char(11)    /* Number of rows existing in the table. */
  , [Reserved Space] varchar(18) /* Reserved space for table. */
  , [Data Space] varchar(18)    /* Amount of space used by data in table. */
  , [Index Size] varchar(18)    /* Amount of space used by indexes in table. */
  , [Unused Space] varchar(18)   /* Amount of space reserved but not used. */
  ) ;
go

/*—————————————————————————*/
/* Load the temp table                                                        */
/*—————————————————————————*/
declare @schemaname varchar(256) ;
-- Make sure to set next line to the Schema name you want!
set @schemaname = 'dbo' ;

-- Create a cursor to cycle through the names of each table in the schema
declare curSchemaTable cursor
  for select sys.schemas.name + '.' + sys.objects.name
      from    sys.objects
            , sys.schemas
      where   object_id > 100
              and sys.schemas.name = @schemaname
              /* For a specific table uncomment next line and supply name */
              --and sys.objects.name = 'specific-table-name-here'    
              and type_desc = 'USER_TABLE'
              and sys.objects.schema_id = sys.schemas.schema_id ;

open curSchemaTable ;
declare @name varchar(256) ;  /* This holds the name of the current table*/

-- Now loop thru the cursor, calling the sp_spaceused for each table
fetch curSchemaTable into @name ;
while ( @@FETCH_STATUS = 0 )
  begin    
    insert into #TableSizes
            exec sp_spaceused @objname = @name ;       
    fetch curSchemaTable into @name ;   
  end

/* Important to both close and deallocate! */
close curSchemaTable ;     
deallocate curSchemaTable ;

/*—————————————————————————*/
/* Feed the results back                                                     */
/*—————————————————————————*/
select [Table Name]
      , [Number of Rows]
      , [Reserved Space]
      , [Data Space]
      , [Index Size]
      , [Unused Space]
from    [#TableSizes]
order by [Table Name] ;

/*—————————————————————————*/
/* Remove the temp table                                                     */
/*—————————————————————————*/
drop table #TableSizes ; 
```

[取自](http://arcanecode.com/2008/01/28/getting-table-space-usage-in-sql-server-2005/)[罗伯特凯恩](http://arcanecode.com/)博客_

编辑要解析的代码，单引号中的几个字符使用特殊的单引号，以及 -- 符号。

此代码适用于 Microsoft SQL 2005+

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-27T06:06:15.847

```
exec sp_spaceused [tablename] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-27T08:15:17.230

[sys.allocations_units](http://msdn.microsoft.com/en-us/library/ms189792.aspx)包含您需要的信息。您加入[sys.partitions](http://msdn.microsoft.com/en-us/library/ms175012.aspx)以将分区的所有分配单元组合在一起，并获得更有用的 object_id 而不是深奥的 allocation_unit_id。

```
select object_name(p.object_id),
    sum(au.total_pages)*8 as [space_in_kb]
    from sys.partitions p
    join sys.allocation_units au on p.hobt_id = au.container_id
    group by p.object_id
    order by [space_in_kb]  desc 
```

是的，所有表（堆或集群）都是' `partitions`'，这些术语不指分区表。sys.partitions 也有您可能感兴趣的“行”列。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-27T06:04:46.273

```
 exec sp_spaceused <tablename> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-29T22:18:00.210

此查询显示当前数据库中每个表的大小。

```
SELECT sysobjects.[name] AS [TableName],
    SUM(sysindexes.reserved) * 8 AS [Size(KB)],
    SUM(sysindexes.dpages) * 8 AS [Data(KB)],
    (SUM(sysindexes.used) - SUM(sysindexes.dpages)) * 8 AS [Indexes(KB)],
    (SUM(sysindexes.reserved) - SUM(sysindexes.dpages)) * 8 AS [Unused(KB)]
FROM dbo.sysindexes AS sysindexes
    JOIN dbo.sysobjects AS sysobjects ON sysobjects.id = sysindexes.id
WHERE sysobjects.[type] = 'U'
GROUP BY sysobjects.[name]
ORDER BY [Size(KB)] DESC 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-07T15:08:18.620

在 SQL 2008+ 中：右键单击 SSMS 中的 DB 名称，选择`Reports`，然后`Standard Reports`，然后`Disk Usage by Table`。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-27T06:26:05.207

有时我会运行它...它将所有表获取到临时表，将其循环并获取所有表的大小。结果数据在@tablesizes 中，因此您可以随意查询。

适用于 Sql Server >2005

```
declare @tables TABLE
(
    table_name nvarchar(200)
)

declare @tablesizes TABLE
(
    [name] nvarchar(200),
    [rows] int,
    reserved nvarchar(200),
    data nvarchar(200),
    index_size nvarchar(200),
    unused nvarchar(200),
    reserved_int int,
    data_int int,
    index_size_int int,
    unused_int int
)

declare @t nvarchar(200)

insert into @tables
select Table_Name from information_schema.tables

while exists(select * from @tables)
begin
    set @t=(select top 1 table_name from @tables)

    insert into @tablesizes([name],[rows],reserved,data,index_size,unused)
    exec sp_spaceused @t

    delete top (1) from @tables
end

update @tablesizes set 
reserved_int=convert(int, replace(reserved,' KB','')),
data_int=convert(int, replace(data,' KB','')),
index_size_int=convert(int, replace(index_size,' KB','')),
unused_int=convert(int, replace(unused,' KB',''))

select * from @tablesizes order by data_int desc 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-07T15:57:55.520

你可以使用：

```
SELECT @@servername;

IF EXISTS(SELECT name FROM tempdb.sys.tables WHERE name LIKE '#spaceUsed%')
    BEGIN
        DROP TABLE #spaceUsed;
    END;
CREATE TABLE #spaceUsed  (
name VARCHAR(255) ,
rows INT ,
reserved VARCHAR(50) ,
data VARCHAR(50) ,
index_size VARCHAR(50) ,
unused VARCHAR(50));

EXEC sp_msforeachtable
@command1 =' 
--
INSERT INTO #spaceUsed
exec sp_spaceused N''?'';
'
,@whereand = ' And Object_id In (Select Object_id From sys.objects
Where SCHEMA_NAME(Schema_ID) like ''%'')';

DECLARE
   @spaceUsedData TABLE  (
   name VARCHAR(255) ,
   rows INT ,
   reservedMB BIGINT NULL ,
   dataMB BIGINT NULL ,
   index_sizeMB BIGINT NULL ,
   unusedMB BIGINT NULL);

INSERT INTO INTO @spaceUsedData (name , rows , reservedMB , dataMB ,index_sizeMB ,unusedMB)
SELECT                  name , rows ,
Convert ( BIGINT ,Ltrim(Rtrim(Replace(reserved ,'KB' ,'')) ))/1024 ,
Convert ( BIGINT ,Ltrim(Rtrim(Replace(data ,'KB' ,'')) ))/1024 ,
Convert ( BIGINT ,Ltrim(Rtrim(Replace(index_size ,'KB' ,'')) ))/1024 ,
Convert ( BIGINT ,Ltrim(Rtrim(Replace(unused ,'KB' ,'')) ))/1024
FROM #spaceUsed;

SELECT * , reservedMB+  dataMB+index_sizeMB+unusedMB AS TotalMB FROM @spaceUsedData
ORDER BY rows DESC; 
```

# c++ - 进一步的 std::set 问题

> ID：914184
> 
> 赞同：2
> 
> 时间：2009-05-27T06:04:09.550
> 
> 标签：c++, templates, stl, set

我之前问过[这个问题](https://stackoverflow.com/questions/912469/is-the-following-code-using-stdset-legal)。我对 std::set 很感兴趣，但我还有另一个令人困惑的场景。

即，对于 T=std::vector 和 T=std::set，以下代码是否合法、可移植的 c++：

```
template <typename T>
void remove_elements(T& collection, int removal_value)
{
    typename T::iterator new_end = 
        std::remove(collection.begin(), collection.end(), removal_value);
    collection.erase(new_end, collection.end());
} 
```

根据 SGI 参考，set::iterator 和 set::const_iterator 是一样的，所以我不知道这是否合法。但是，无论类型如何，我似乎都找不到另一种方法来获得我需要工作的操作。我可以求助于模板专业化，但是最好不必一开始就专门化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T06:43:40.030

擦除删除习语仅适用于序列容器。对于标准的关联容器，它不起作用，解决方案也不是那么简单。

两种方法：

1.  用于`remove_copy_if`将所有值复制到另一个临时容器中，然后将原始容器的内容与临时容器的内容交换。[参考我对相关问题的[回答]](https://stackoverflow.com/questions/800955/removeif-equivalent-for-stdmap/907606#907606)
2.  另一种是循环遍历容器元素并在将迭代器传递给擦除时发布增量。

有关更多详细信息，请参阅此 Q：[remove_if 等效于 std::map](https://stackoverflow.com/questions/800955/removeif-equivalent-for-stdmap/907606#907606)

另外，请参阅第 9 项。在 Scott Meyers 的 Effective STL 中仔细选择擦除选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T06:32:42.093

不，它不适用于`std::set`，因为 的要求之一`std::remove()`是迭代器是可变的迭代器，而`std::set`的迭代器是不可变的。

不幸的是，我没有任何好的替代方案可以建议。您可以做的一件事可能是使用`std::find()`找到元素出现的迭代器，然后使用`.erase()`迭代器上的方法（同时存在于`std::vector`and中`std::set`）来擦除它；并继续这样做，直到不再有这样的元素。但这可能非常低效，O(n^2) 而不是 O(n)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T11:58:21.773

我认为“正确”的答案是`remove_elements`为`std::set`. 由于 set 是有序的并且不包含重复项，因此删除等于removing_value 的元素比用于向量或通用序列要简单得多。你真的不想对所有事情都使用相同的算法，即使你可以：

```
template <typename T>
void remove_elements(T& collection, const typename T::value_type& removal_value)
{
    typename T::iterator new_end = 
        std::remove(collection.begin(), collection.end(), removal_value);
    collection.erase(new_end, collection.end());
}

template<typename T>
void remove_elements(std::set<T>& collection, const T& removal_value)
{
    collection.erase(removal_value);
} 
```

我有点担心这些是否模棱两可，但在最明显的用例中，它们似乎对我有用。

如果您有除 std::set 之外的其他唯一排序关联容器要担心，这会有点痛苦。您正在进入 std::swap 领域，您实现的每个类都必须提供 remove_elements 的重载。但是由于 set 是您要询问的唯一类，我认为它是您实际使用的唯一棘手的情况，至少目前是这样。如有必要，您可以使用特征根据容器的属性选择正确的算法版本。

# php - 通讯队列的复杂 MySQL 查询

> ID：914190
> 
> 赞同：1
> 
> 时间：2009-05-27T06:06:03.650
> 
> 标签：php, mysql, newsletter, swiftmailer

大家好，我回来了，期待你们的更多精彩。我有两张桌子：

1.  时事通讯——每行包含一个电子邮件的“id”、“主题”、“正文”和“发件人”标题
2.  newsletter_queue — 每行包含一个“id”、“email”地址、添加到队列中的“date”和“newsletterid”

我的目标是开发一个 MySQL 查询，该查询可以从“newsletter_queue”中提取 x 行，然后在使用 GROUP_CONCAT（或任何可行的方法）将所有电子邮件放入一个字符分隔的字符串中时按它们的“newsletterid”对它们进行分组，我将解析用 PHP。我想将它们放在一起的原因是因为我正在使用的邮件程序库 (swiftmailer) 接受一个包含电子邮件的数组以用于批量电子邮件。此外，如果可能的话，将两个表连接在一起会非常简洁，从而避免第二次查询。

这是我到目前为止所拥有的：

```
SELECT GROUP_CONCAT(email ORDER BY date ASC SEPARATOR '|'), newsletterid, date
FROM newsletter_queue
WHERE status='0'
GROUP BY newsletterid
LIMIT 125 
```

我的问题是 LIMIT 125 被应用于已经连接的行，由于我试图限制一次发送的电子邮件总数，而不是唯一的时事通讯，因此它变得无用。如果有人能引导我朝着正确的方向前进，我将不胜感激。如果你最终写了这个例子，那也很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-27T06:20:23.733

```
SELECT GROUP_CONCAT(email ORDER BY date ASC SEPARATOR '|'), newsletterid, date
FROM 
   (SELECT email, newsletterid, date 
    FROM newsletter_queue
    WHERE status="0"
    ORDER BY date ASC
    LIMIT 125) as Unsent
GROUP BY newsletterid 
```

This applies the limit to the inner query, before the group by statement is executed. It doesn't matter that the group by statement is in the outer query since a group by will need a temporary table and sort anyway. If you need some kind of ordering of the concatenated result, you can just apply it to the outer query, for instance by applying max or min to date and order by it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-09-10T20:01:20.123

This should also do what you want:

```
SELECT substring_index(GROUP_CONCAT(email ORDER BY date ASC SEPARATOR '|'),'|',125), newsletterid, date
FROM newsletter_queue
WHERE status='0'
GROUP BY newsletterid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T06:15:17.800

疯狂的想法，但这行得通吗？

```
SELECT GROUP_CONCAT(email ORDER BY date ASC SEPARATOR '|'), newsletterid, date
FROM newsletter_queue
WHERE status='0'
GROUP BY newsletterid, ID MOD 125 
```

我怀疑一个记录中电子邮件地址的最大数量是 125。
不幸的是，这个数量并不精确为 125。它可能在 1 到 125 之间。

# iphone - 移动时锁定 UIImageView

> ID：914195
> 
> 赞同：0
> 
> 时间：2009-05-27T06:07:08.703
> 
> 标签：iphone, cocoa-touch, animation, quartz-graphics

我`UIImageView`用`touchesBegan`, `touchesMoved`,`touchesEnded`移动a 它运作良好，但触摸也适用于其他`UIImageView`s，铺设。

如何在移动时锁定触摸活动`UIImageView`？我已经用一个布尔值尝试过这个，但它没有奏效，因为`touchesMoved`每次`UIImageView`移动都会被调用，而不仅仅是一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T06:24:38.423

如果我理解正确，您正试图做到这一点，以便在任何时候只有一个 imageView 会受到用户交互的影响。如果是这种情况，只需设置`imageView.exclusiveTouch = YES`. 一旦在`exclusiveTouch`启用的任何视图中开始触摸，该窗口中的其他视图都不会注册任何触摸。

# c - C 内联汇编中的 RDTSC 导致分段错误！

> ID：914199
> 
> 赞同：3
> 
> 时间：2009-05-27T06:07:48.297
> 
> 标签：c, assembly, segmentation-fault

感谢你们的一些帮助，我的小内联汇编程序几乎就在我想要的地方。但是，现在 rdtsc 命令似乎发生了一些非常奇怪的事情；基本上，我在调用它时遇到了分段错误。

```
int timings[64*N];
int main(void)
{

    int i;

    __asm__ __volatile__ (  
       "lea edx, [timings] \n\t"  
       "rdtsc \n\t"  
       ".rept 32 \n\t"  
       "mov eax,[edx] \n\t"  
       "inc eax \n\t"  
       "mov dword ptr [edx], eax \n\t"  
       "add edx, 4 \n\t"  
       ".endr \n\t"  
    : 
    : [timings] "m" (*timings)
   );

   for(i=0; i<32; i++)
      printf("%d\n", timings[i]); 

   return 0;
} 
```

省略 rdtsc，然后程序编译并执行它应该执行的操作。但是添加 rdtsc 行会导致分段错误。我在双核机器上运行这些东西并用于编译：gcc -masm=intel test.c

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-27T06:19:56.107

`rdtsc`用刻度计数器的部分覆盖`eax`和。`edx`由于您将 ( `lea`)加载`timings`到`edx`之前的地址会`rdtsc`扰乱您的程序运行。您可以移动到命令链的上层，也可以使用除程序功能`rdtsc`以外的寄存器`eax`。`edx`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-03T09:26:16.347

Besides the obvious RDTSC writing to EDX problem, you did not submit a clobber list for the **asm** statement. GCC assumes that every register that you do not list anywhere as output/clobber remains unchanged after the execution of your code, and can use those registers to keep some values across your code. Look up the syntax in the GCC documentation, as I don't remember it :).

# asp.net - 母版页

> ID：914201
> 
> 赞同：1
> 
> 时间：2009-05-27T06:08:24.487
> 
> 标签：asp.net, master-pages

我需要询问我是否有包含按钮的母版页作为示例，然后我添加新的网络表单（默认）并将该母版页指定为默认表单母版页。问题是我可以更改默认页面代码中按钮的文本?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-27T06:14:22.467

当然可以，不管怎样...

您应该看到有关 MAster Pages 的视频截屏，您将看到如何实现这一点以及更多！

> 视频#12 [MasterPages](http://www.asp.net/learn/videos/video-7024.aspx) 16 分 2 秒
> 
> 视频 # 36 [我如何：以声明方式和编程方式使用母版页](http://www.asp.net/learn/videos/video-265.aspx) 29 分 49 秒
> 
> 视频 # 37 [我如何：处理主页面和内容页面中的事件](http://www.asp.net/learn/videos/video-266.aspx) 23 分 26 秒

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T06:13:44.853

我会使用母版页上的一个属性来更改按钮，我认为您可以将其公开，但是嗯。

```
public String ButtonText { get { return button1.text; } set { button1.Text = value } } 
```

然后在默认页面上，设置主类型。

```
<%@ MasterType VirtualPath="~/mymaster.master"  %> 
```

然后在默认页面上，您应该可以通过该属性进行访问。

```
Master.ButtonText = "Hello, Master Page Button"; 
```

[对不起，假设 C#]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T06:14:08.597

如果您将 MasterType 指令放在默认页面上

```
<%@ MasterType VirtualPath="~/Master1.master" %> 
```

然后您可以在代码隐藏中调用母版页上的方法和属性：

```
MyButton.Text = "New text"; 
```

有关详细信息，请参阅 [ASP.Net 2.0 - 母版页：提示、技巧和陷阱](http://www.odetocode.com/articles/450.aspx)

# ruby-on-rails - Rails：跨多个控制器操作设置通用或全局实例变量

> ID：914226
> 
> 赞同：18
> 
> 时间：2009-05-27T06:18:37.560
> 
> 标签：ruby-on-rails, model-view-controller, filter

应该如何让几个不同的控制器动作设置一个公共实例变量**以在模板中使用**但**在动作运行之后**。

换句话说，我希望它在我的 application_controller 中工作。

```
class ApplicationController < ActionController::Base
  after_filter :set_something_common

  def set_something_common
    # All controllers' actions have queried the DB and set @foo for me...
    @bar = some_calculation_on(@foo)
    # ... and all templates expect @bar to bet set.
  end
end 
```

这**不起作用，**因为`after_filter`在渲染后运行。美好的。但正确的模式是什么？

同样，重要的是`set_something_common`在操作之后运行，因为这些操作会针对特定情况执行操作；但他们都设置了`@foo`。

我的想法似乎都不理想：

*   呼吁`set_something_common()`每一个需要它的行动的底部。
*   将所有控制器的特定于案例的代码重构为`case_specific_code()`并强制它们按顺序运行：

    ```
    before_filter :case_specific_code, :set_something_common 
    ```

*   子类`application_controller`化并重新定义`index`方法。

有什么想法吗？谢谢。

### 编辑：马修的回应促使我澄清：

几个控制器的 index() 都进行分页，每个都带参数`@offset`和`@limit`（通过全局`before_filter`）来查看数据切片。伟大的。现在我想要一种通用方法来计算“下一个切片”链接的 RESTful URL。我很高兴看到`url_for()`生成返回相同资源的 URL，所以我尝试了：

```
def set_something_common # really called set_next_url, truth be told
  @next_url = url_for(:offset => @offset + @limit, :limit => @limit)
end 
```

我会尝试猴子修补 Fixnum，所以我可以`@offset.next_url_for(self, @limit)`从模板中执行类似的操作，但我不确定它是否会起作用。想一想，如果我要修改模板，那我还不如设置一个应用程序助手。我仍然不确定最好的解决方案是什么。

## 更新：接受的答案是“使用助手”。

感谢大家的更新。我从我的教训中吸取了教训，像全局变量一样，辅助函数的存在是有原因的，当它们明显有益且简洁时，不要被回避。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-05-29T05:02:42.830

首先，您不想尝试在控制器操作和模板渲染“之间”插入代码。为什么？因为您希望控制器操作可以自由选择给出什么样的响应。它可以只返回 XML、JSON、标头、重定向、什么都没有等。这就是为什么在呈现响应之后执行过滤器之后的原因。

其次，你不想猴子补丁`Fixnum`。我的意思是，也许*你*有，但我没有。至少不经常，除非我从中得到一些完全邪恶的语义好处，比如能够说`3.blind_mice`。猴子为像这样的随机用例修补它似乎是一个令人头疼的维护问题。

您提到将所有控制器的特定于案例的代码重构到一个前置过滤器中并按顺序运行它们。哪个让我想到......`@foo`在每种情况下都是一样的？如果是这种情况，那么过滤器之前的一个就可以了：

```
before_filter :do_common_stuff
def do_common_stuff
  @foo = common_foo
  @bar = do_something_with @foo
end 
```

这是完全合法的做法。但是，如果 @foo 从一个控制器更改为另一个控制器……那么，您还有更多选择。

您可以将之前的过滤器分成两半，并为每个控制器自定义一个。

```
# application_controller:
before_filter :get_foo, :do_something_common
def do_something_common
  @bar = do_something_with @foo
end

# baz_controller:
def get_foo
  @foo = pull_from_mouth
end

#baf_controller:
def get_foo
  @foo = pull_from_ear
end 
```

但是你知道，如果这是一个简单的案例，不需要数据库访问或网络访问或类似的东西......你的案例不需要......不要自杀。不要出汗。把它扔给一个助手。这就是他们在那里的目的，提供帮助。你基本上只是将一些视图数据重新排列成一个更容易使用的表单。帮手是我的选票。你可以命名它`next_url`。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-27T11:10:06.597

我会有一个`@foo`返回条的方法，您可以`@foo.bar`在视图中使用这种方法。

`<% @bar = @foo.bar %>`#如果你真的不想改变你的观点，但你没有从我这里听到:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-31T07:42:46.693

`<%= do_some_calculations(@foo) %>`在您的模板中使用。那是直接的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-29T21:40:32.987

**在开发Rails 6**应用程序时，我遇到了这个挑战。

我想在部分 () 中使用一个实例变量，该变量在`app/views/shared/_header.html.erb`不同的控制器 ( `app/controllers/categories_controller.rb`) 中定义。

我想使用的实例变量`@categories`定义为：

```
# app/controllers/categories_controller.rb

class CategoriesController < ApplicationController

  def index
    @categories = Category.all
  end
  .
  .
  .
end 
```

**我是这样做的**：

首先，我在我的`app/controllers/application_controller.rb`文件中为实例变量定义了一个 helper_method：

```
class ApplicationController < ActionController::Base
  helper_method :categories

  def categories
    @categories = Category.all
  end
end 
```

这使得实例变量对于每个控制器操作和视图`@categories`全局可用：`categories`

接下来，我以这种方式渲染了`app/views/shared/_header.html.erb`部分`app/views/layouts/application.html.erb`：

```
<%= render partial: '/shared/header' %> 
```

这也使`@categories`实例变量全局可用，因为`categories`对于将使用部分的每个控制器视图都可用，而无需`@categories`在视图的相应控制器中定义实例变量。

因此，我以这种方式使用了`@categories`全局可用的实例变量`categories`：

```
# app/views/shared/_header.html.erb

<% categories.each do |category| %>
  <%= link_to category do %>
    <%= category.name %>
  <% end %>
<% end %> 
```

**注意**：您可以使用局部变量将变量传递到局部变量中：

```
<%= render partial: '/shared/header', locals: { categories: @categories } %> 
```

但是，这将需要一个控制器操作，`@categories`为将使用部分视图的每个控制器视图设置一个实例变量。

您可以在 Rails 官方文档中阅读有关 Helpers 和 Helper Methods 的更多信息：[https ://api.rubyonrails.org/classes/AbstractController/Helpers/ClassMethods.html](https://api.rubyonrails.org/classes/AbstractController/Helpers/ClassMethods.html)

就这样。

**我希望这有帮助**

# .net - 仅在 Vista (.net) 中的问题：从线程调用非托管 dll(Shell32.dll，函数：SHEmptyRecycleBin)

> ID：914227
> 
> 赞同：0
> 
> 时间：2009-05-27T06:18:40.057
> 
> 标签：.net, multithreading, dll, pinvoke, unmanaged

********平台：在 Vista（终极版或家庭/高级版）中它不起作用，其他操作系统（xp、windows7）它起作用***********

我在线程内使用 c++.net（或 c#.net）清空回收站。当我直接（没有线程）这样做时，它可以工作。但如果线程使用它不会。请看下面的代码片段：

```
namespace EmptyRecycleBin_C{
enum RecycleFlags
{
  SHERB_NOCONFIRMATION = 0x00000001,
  SHERB_NOPROGRESSUI = 0x00000002,
  SHERB_NOSOUND = 0x00000004
};
public ref class Form1 : public System::Windows::Forms::Form{

[DllImport("Shell32.dll",CharSet=CharSet::Unicode)]
static System::UInt32 SHEmptyRecycleBin(IntPtr hwnd, String^ pszRootPath, RecycleFlags dwFlags);

private: void button1_Click(System::Object^  sender, System::EventArgs^  e)
{
  Thread^ th = gcnew System::Threading::Thread(gcnew ThreadStart(this, &Form1::doEmpty));
  th->Start();
  //this->doEmpty(); // this line works just fine
}

private: void doEmpty()
{
  try{
        SHEmptyRecycleBin(IntPtr::Zero, String::Empty, RecycleFlags::SHERB_NOCONFIRMATION);
     }catch(Exception^ ex)
     {Diagnostics::Debug::Write(ex->Message);}
}
};
} 
```

这里有什么问题...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T22:22:36.770

可能是因为您创建的线程在默认安全上下文中执行，而不是在主线程的安全上下文中执行？

有关提示，请参阅[ExecutionContext 上的文档](http://msdn.microsoft.com/en-us/library/system.threading.executioncontext.aspx)。您可以在线程上设置 ExecutionContext 并重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-01-22T23:13:46.840

你有没有从你的线程中调用 CoInitialize ？

它返回什么错误代码？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-01-22T23:16:29.200

Shell 函数仅适用于 STA 线程，而 .NET 线程默认为 MTA。您可以将线程设置为使用单单元线程：

```
th->SetApartmentState(ApartmentState::STA);
th->Start(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T06:33:29.797

我不知道为什么会这样，但是您尝试过其他线程方法吗？比如 BackgroundWorker 组件或 ThreadPool.QueueUserWorkItem？错误是否仍然发生？

# c# - 我创建了一个资源，但其中的文件显示为不存在

> ID：914230
> 
> 赞同：0
> 
> 时间：2009-05-27T06:20:18.617
> 
> 标签：c#

我将我的文件作为资源嵌入到我的 C# 程序中。现在我试图通过查看文件是否存在

```
 if(File.Exists(path)) 
```

但即使路径是资源中文件的有效路径，它也不会进入 if 块。这些文件是 DTD，它们将在编译时作为资源嵌入到程序集中，并在运行时作为资源解析。请帮忙。可能是什么原因？我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T06:26:12.510

如果你想在 c# 中访问你的资源，你应该使用 Properties.Resources 类。

例如：

```
string data = Properties.Resources.dtd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T06:24:29.283

由于您已嵌入资源，因此文件（或资源）被嵌入到程序集清单中。您可能必须从清单中选择文件作为资源流。

```
string filePath = Assembly.GetExecutingAssembly().GetName().Name+"." + resourceFileName; 
Stream fileStream = Assembly.GetExecutingAssembly().GetManifestResourceStream(filePath); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T06:26:49.590

`File.Exists()`仅适用于文件系统。您应该能够使用

```
myProject.Properties.Resources.Image01; 
```

并且没有真正的理由检查文件是否存在。

# python - Python 列表的底层数据结构是什么？

> ID：914233
> 
> 赞同：81
> 
> 时间：2009-05-27T06:22:56.493
> 
> 标签：python, list, data-structures

用于实现 Python 内置列表数据类型的典型底层数据结构是什么？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2009-05-27T13:04:07.303

> 列表对象被实现为数组。它们针对快速固定长度操作进行了优化，并且会为 pop(0) 和 insert(0, v) 操作带来 O(n) 内存移动成本，这些操作会改变底层数据表示的大小和位置。

另请参阅： [http ://docs.python.org/library/collections.html#collections.deque](http://docs.python.org/library/collections.html#collections.deque)

顺便说一句，我觉得有趣的是，关于数据结构的 Python 教程建议使用 pop(0) 来模拟队列，但没有提到 O(n) 或 deque 选项。

[http://docs.python.org/tutorial/datastructures.html#using-lists-as-queues](http://docs.python.org/tutorial/datastructures.html#using-lists-as-queues)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-05-27T06:29:28.697

CPython：

```
typedef struct {
    PyObject_VAR_HEAD
    /* Vector of pointers to list elements.  list[0] is ob_item[0], etc. */
    PyObject **ob_item;

    /* ob_item contains space for 'allocated' elements.  The number
     * currently in use is ob_size.
     * Invariants:
     *     0 <= ob_size <= allocated
     *     len(list) == ob_size
     *     ob_item == NULL implies ob_size == allocated == 0
     * list.sort() temporarily sets allocated to -1 to detect mutations.
     *
     * Items must normally not be NULL, except during construction when
     * the list is not yet visible outside the function that builds it.
     */
    Py_ssize_t allocated;
} PyListObject; 
```

从下一行可以看出，该列表被声明为指向 的指针数组`PyObjects`。

```
PyObject **ob_item; 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-05-27T06:35:03.930

在[Jython 实现](http://fisheye3.atlassian.com/browse/jython/trunk/jython/src/org/python/core/PyList.java?r1=6244&r2=6257&u=-1&ignore=&k=)中，它是一个`ArrayList<PyObject>`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-18T18:02:34.143

尽管这可能很明显，但值得一提的是 Python 列表是`Dynamic`数组（而不是`Static`数组）。这是工作面试问题/学术界出现的一个重要区别。

因为数组是动态的，Python 在声明时会保留一定量的内存，例如：

```
somelist = [] 
```

因为已经预留了额外的内存，所以`somelist.append()`只执行写入下一个保留的内存插槽，因此`O(1)`大部分时间都是如此。对于静态数组，通常数组是满的（即如果有 4 个字节，则数组大小为 4）并且追加总是`O(n)`因为它们需要保留一组全新的内存（现在可能是 5 个字节）并复制内容。

# c - 为什么char的符号没有在C中定义？

> ID：914242
> 
> 赞同：21
> 
> 时间：2009-05-27T06:26:39.560
> 
> 标签：c, gcc, standards, char, unsigned

C标准规定：

ISO/IEC 9899:1999, 6.2.5.15（第 49 页）

> char、signed char 和 unsigned char 这三种类型统称为字符类型。实现应将 char 定义为与有符号字符或无符号字符具有相同的范围、表示和行为。

确实[gcc](http://www.network-theory.co.uk/docs/gccintro/gccintro_71.html)根据目标平台定义了它。

我的问题是，为什么标准会这样做？除了可怕且难以发现的错误之外，我看不到任何来自模棱两可的类型定义的东西。

不仅如此，在 ANSI C（C99 之前）中，唯一的字节大小类型是 char，因此有时不可避免地使用 char 进行数学运算。所以说“一个人永远不应该使用 char 进行数学运算”并不是那么正确。如果是这样的话，更明智的决定是包括三种类型“ `char`, `ubyte`, `sbyte`”。

这是有原因的，还是只是一些奇怪的向后兼容问题，以便允许将糟糕的（但常见的）编译器定义为标准兼容？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-05-27T06:43:40.187

具有未指定符号的“普通”字符允许编译器选择对目标体系结构更有效的表示：在某些体系结构上，零将一个字节值扩展到“int”的大小需要更少的操作（因此使普通 char ' unsigned')，而在其他指令集使符号扩展更加自然，并且普通字符被实现为有符号。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-27T06:42:09.050

也许从历史上看，一些实现的“char”是有符号的，有些是无符号的，因此为了与两者兼容，他们不能将其定义为一个或另一个。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-27T08:03:29.890

在那些美好的过去 C 被定义时，字符世界是 7 位的，所以符号位可以用于其他事情（如 EOF）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-12-08T04:31:38.157

在某些机器上，有符号字符太小，无法容纳 C 字符集中的所有字符（字母、数字、标准标点符号等）。在此类机器上，'char' 必须是无符号的。在其他机器上，unsigned char 可以保存比有符号 int 更大的值（因为 char 和 int 大小相同）。在那些机器上，'char' 必须被签名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T06:32:17.723

我想（不由自主地）他们的想法是这样的：

如果您关心 char 的符号（将其用作字节），则应明确选择有符号或无符号字符。

# subsonic - subsonic 3 alpha + ado.net 数据服务任何样本

> ID：914244
> 
> 赞同：0
> 
> 时间：2009-05-27T06:27:03.677
> 
> 标签：subsonic, wcf-data-services

互联网上有几个资源描述了 Astoria 的 subsonic 预览 2：

[http://theruntime.com/blogs/jaykimble/archive/2008/11/18/quotsubsonicquot-for-services-found-subsonic-3--ado.net-data-services.aspx](http://theruntime.com/blogs/jaykimble/archive/2008/11/18/quotsubsonicquot-for-services-found-subsonic-3--ado.net-data-services.aspx)

和工作样本

[http://code.msdn.microsoft.com/SubSonicForADONETDS](http://code.msdn.microsoft.com/SubSonicForADONETDS)

我对亚音速 tt(s) 应用了所有相应的更改，但是没有设法使 MSDN 项目工作。消除后：

a) Astoria 不喜欢 QuerySurface.tt 中的 private DB() { } ，所以我盲目地将构造函数公开

b) 不确定如何生成复合主键

```
<# if(EnableForUseWIthAstoria) {
#> [System.Data.Services.Common.DataServiceKey("<#=pk#>")] <# }#> 
```

结果是

```
[System.Data.Services.Common.DataServiceKey("")] 
```

代替

```
[System.Data.Services.Common.DataServiceKey("OrderID", "ProductID")] 
```

所以只是排除了桌子。

目前的障碍

```
 var q = from cust in ctx.Customers
                where cust.CustomerID == "ROMEY"
                select cust;

        Customers c = q.First(); 
```

导致异常：未找到段“客户”的资源

有没有人尝试过或知道另一个最新和最伟大的样本存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T04:28:14.013

有关数据服务的演示模板，请参阅此问题：

[http://code.google.com/p/subsonicthree/issues/detail?id=53](http://code.google.com/p/subsonicthree/issues/detail?id=53)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T07:01:34.150

是的，我使用 IUpdatable 接口签入了 ss3 版本，并从 UpdatableDatabase 类继承了 DB 查询表面类。我还为它提供了一个入门测试项目。好的部分是您可以使用 Uri 构造一个 DB 类，并开始针对服务工作。但它不是当前核心的一部分，它需要一个新的类和一些重新排列，加上小的模板更改。我认为这是人们将不断重新发明这件事而不是建立在以前的工作之上的领域之一。我想对项目进行一些更改，但他们没有做到，例如在运行时设置多个数据库、ado.net 服务等。我想我将不得不永久分支我自己的版本。

[此问题](http://code.google.com/p/subsonicthree/issues/detail?id=30)有一个显示 UpdatableDatabase 类的附件。

我将此添加到`SubSonicClasses.ttinclude`：

```
public string PrimaryKey
{
    get { return Utilities.CleanUp(this.Schema.GetTablePrimaryKey(TableSchema, TableNameRaw)); }
}

...

[System.Data.Services.Common.DataServiceKey("<#=PrimaryKey #>")] 
```

我看到我在 Northwind 中使用 OrderDetails 作弊，并通过直接编辑文件添加了第二个密钥。您可以轻松地在以下位置编写这样的方法`DatabaseSchema.ttinclude`：

```
public string[] GetTablePrimaryKeys(string tableSchema, string tableName) 
```

并建立正确的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T12:59:09.527

我不知道我是否可以压缩解决方案并将其发布，因为涉及亚音速许可证。它不是亚音速的，大约 2 个月大（过时）。我刚刚运行该项目以测试它是否仍在工作，并且确实如此。以下是执行此操作的步骤：

使用上面提到的 UpdatableDatabase 类。然后从中派生数据库（将其放入模板中）：

公共部分类数据库：UpdateableDatabase

UpdatableDatabase.cs 必须与生成的类一起使用，否则它将不起作用，因为它需要对表类进行 GetType()。

该服务只是具有此类的服务项目：

```
using System.Data.Services;
using Northwind;

namespace NorthwindService
{
    [System.ServiceModel.ServiceBehavior(IncludeExceptionDetailInFaults=true)]
    public class Northwind: DataService<DB>
    {
        // This method is called only once to initialize service-wide policies.
        public static void InitializeService(IDataServiceConfiguration config)
        {
            config.SetEntitySetAccessRule("*", EntitySetRights.All);
            config.UseVerboseErrors = true;
        }
    }
} 
```

web.config 的服务部分很简单：

```
 <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
  </system.serviceModel> 
```

然后对于测试项目，添加对服务的服务引用。我从我认为的 astoria 项目中获取了测试代码，已经有一段时间了：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using WcfClientTest.NorthwindService;

namespace WcfClientTest
{
    /// <summary>
    /// Summary description for WcfTest
    /// To run these tests, load this project, and somehow get a server running at the URI. 
    /// This can be done by updating the service reference to start the development server.
    /// </summary>
    [TestClass]
    public class WcfTest
    {
        private string baseURI = "http://127.0.0.1:49649/Northwind.svc";
        private DB ctx;

        /// <summary>
        /// Sets up test.
        /// </summary>
        [TestInitialize]
        public void SetUp()
        {
            ctx = new DB(new Uri(baseURI));
        }

        [TestCleanup]
        public void Cleanup()
        {
        }

        [TestMethod]
        public void Select_Simple_With_Variable()
        {
            int categoryID = 5;
            IQueryable<Product> result = from p in ctx.Products
                                         where p.CategoryID == categoryID
                                         select p;

            List<Product> products = result.ToList();
            Assert.AreEqual(7, products.Count());
        }

        [TestMethod]
        public void TestAddNew()
        {
            // add customer
            var c = new Customer
                        {
                            CustomerID = "XXXXX",
                            ContactTitle = "Prez",
                            Country = "USA",
                            ContactName = "Big Guy",
                            CompanyName = "Big Guy Company"
                        };
            ctx.AddToCustomers(c);
            ctx.SaveChanges();

            IQueryable<Customer> qCustomer = from cust in ctx.Customers
                                             where cust.CustomerID == "XXXXX"
                                             select cust;

            Customer c2 = qCustomer.FirstOrDefault();

            Assert.AreEqual("XXXXX", c2.CustomerID);

            if (c2 != null)
            {
                ctx.DeleteObject(c2);
            }
            ctx.SaveChanges();

            IQueryable<Customer> qCustomer2 = from cust in ctx.Customers
                                              where cust.ContactName == "Big Guy"
                                              select cust;
            // Returns null if the row isn't found.
            Customer c3 = qCustomer2.SingleOrDefault();
            Assert.AreEqual(null, c3);
        }
    }
} 
```

这就是我所拥有的，它并不难放在一起。现在它是寻找问题的解决方案，但我打算在某个时候使用它。可以完全绕过亚音速，直接使用 IQToolkit，以及一些 T4 模板有一个非常好的系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T19:11:06.390

这是 IUpdatable 接口的补丁和所需的模板更改。我 99% 确定这不会进入最终项目，但至少你可以看到我是如何做到的。

[http://code.google.com/p/subsonicthree/issues/detail?id=52](http://code.google.com/p/subsonicthree/issues/detail?id=52)

# netbeans6.5 - 这是使用 Jbutton 链接两个表单的最佳方式

> ID：914257
> 
> 赞同：1
> 
> 时间：2009-05-27T06:32:12.513
> 
> 标签：netbeans6.5

我有`JFrame Form`一些作为我的主页`JButtons`。我想，如果我单击 a `JButton`，`JFrame Form`将出现另一个，并且还可以找到一种从打开的导航回到我的主页的方法`Jframe Form`。实现这一目标的最佳方法是什么？

我的项目是`Java`>`Java Application`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-24T13:21:45.193

您可以将 jform 引用存储在某处并根据需要调用它们的方法。

# linux - 如何评估 bash shell 中的给定路径

> ID：914259
> 
> 赞同：6
> 
> 时间：2009-05-27T06:32:22.903
> 
> 标签：linux, bash, unix, filepath

是否有将文件路径作为输入并返回绝对文件路径的 bash 命令？更具体地说，我想要一个将路径作为输入的命令，例如：

```
/tmp/yaneeve/kit/linux/../../output/kit/SOURCES//usr//apps/myapp/lib
```

并返回路径：

```
/tmp/yaneeve/output/kit/SOURCES/usr/apps/myapp/lib
```

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-27T07:05:01.523

如果路径存在，则有一种可移植的方式（即使在 linux 上）更可靠：

```
canonicalPath=$(cd "$path"; pwd) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-27T06:34:09.203

尝试（Linux）

```
readlink -f 
```

# objective-c - 为什么我在 XCode 中调试时会在控制台中收到这些错误？

> ID：914260
> 
> 赞同：0
> 
> 时间：2009-05-27T06:32:37.193
> 
> 标签：objective-c, cocoa

我正在创建一个应用程序，当我运行它时，我检查了调试窗格，我在控制台中收到了这些错误：

**2009-05-27 07:18:03.852 Spark[1228:10b] [valueForUndefinedKey:]：实体项目不符合关键注释的关键值编码。**

**2009-05-27 07:18:09.029 Spark [1228:10b] 对象 [entity: Projects] 的键路径 selectionIndexPaths 设置值错误（来自名为 MainMenu.nib 的 Nib 中对象 ID 726 的绑定对象）：[valueForUndefinedKey:] ：实体项目不符合关键注释的关键值编码。**

仅当我将文本字段值绑定到 NSTreeController 的选择和控制器键“注释”时才会发生这种情况，我还注意到当我尝试在应用程序中编辑文本字段时，大纲视图会冻结（这是在控制台中显示上述错误时）。我该如何解决这个问题如果我没有正确绑定文本字段，这里是文本字段绑定的图片：http: [//snapplr.com/840y](http://snapplr.com/840y)

**实体图**

[http://snapplr.com/vqc9](http://snapplr.com/vqc9)

**新错误**

```
**2009-05-27 18:37:41.661 Spark[3957:10b] Unacceptable type of value for attribute: property = "notes"; desired type = NSString; given type = NSConcreteAttributedString; value = Alpha Nine Zeta{
    NSColor = NSNamedColorSpace System textColor;
    NSFont = "MarkerFelt-Thin 16.00 pt. P [] (0x001a7190) fobj=0x00146ef0, spc=4.00";
    NSOriginalFont = "MarkerFelt-Thin 16.00 pt. P [] (0x001a7190) fobj=0x00146ef0, spc=4.00";
    NSParagraphStyle = Alignment 3, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (
    28L,
    56L,
    84L,
    112L,
    140L,
    168L,
    196L,
    224L,
    252L,
    280L,
    308L,
    336L
), DefaultTabInterval 0, Blocks (null), Lists (null), BaseWritingDirection -1, HyphenationFactor 0, TighteningFactor 0.05, HeaderLevel 0;
}.** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T16:17:36.443

如果在大纲视图中选择了一个项目，则文本字段会尝试从“选定”树控制器项目中获取值注释，该项目是一个项目。由于 Projects 实体没有注释属性，因此 KVO 会引发异常。

在文本字段的“值”绑定中取消选择绑定选项“不适用的键引发”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T18:24:04.503

您已将文本字段绑定到项目的注释，但在您的模型中，只有任务有注释。如果您想让 Projectses 有注释，则需要将该属性添加到 Projects 实体；如果您打算绑定到 Taskses，那么您需要更改模型密钥路径，可能是`children.notes`.

（相关：那些实体名称应该真的是单数。）

至于新错误：文本字段不能显示样式文本，只能显示纯文本。改为创建一个文本视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T18:14:27.160

第二个错误：

在文本字段的属性中，您是否选择了富文本选项？看起来它正在向 Notes 属性发送一个 NSAttributedString，该属性需要一个 NSString。

如果已设置，请关闭此选项。

# java - 如何通过单击鼠标在 Eclipse 中运行一组选定的单元测试？

> ID：914265
> 
> 赞同：7
> 
> 时间：2009-05-27T06:33:30.360
> 
> 标签：java, eclipse, junit

我想创建一个启动器/运行配置，它仅在选定的一组测试类或一组选定的包中运行 JUnit 测试。现在看起来我必须为每个包含我想要运行的测试的包创建单独的运行配置。我还记得在旧版本的 Eclipse 中工作。

是的，我知道：应该组织测试，这样我就不会遇到这个问题，但是现在重新组织源文件夹不是一种选择。

我正在使用 Eclipse 3.4.2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-27T07:27:56.823

您可以像这样创建 JUnit 测试套件：

[![JUnit 测试套件](https://i.stack.imgur.com/DkW4d.jpg)](https://i.stack.imgur.com/DkW4d.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-28T11:10:54.287

> 如何在 Eclipse 中运行 JUnit 测试套件？是的，应该以理智的方式组织源文件夹，但是对于这个项目来说，这将是大量的工作（构建文件是一团糟），我们现在负担不起。

*奥拉莫*

您选择您的 TestSuite 并按`Alt`+ `Shift`+`X`或`T`执行`Run -> Run As -> JUnit Test`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T06:47:48.917

您可以为选定的测试添加测试套件。

我会将它们放在一个单独的源文件夹中，否则测试将运行多次，一次用于原始测试，一次用于它所在的每个套件。

# css - 加载 CSS、第二个 LINK 元素或 @import 时，速度会更糟吗？

> ID：914266
> 
> 赞同：4
> 
> 时间：2009-05-27T06:33:38.830
> 
> 标签：css, performance, caching

需要向页面添加第二个 css 样式表。

我是添加第二个链接行并通过 url 加载它，还是将 @import 添加到原始链接？

页面加载时间更糟的是什么？服务器负载更糟的是什么？

什么对客户端缓存更好？什么是“一般”更好/更容易接受的？

（注意：假设没有 cdn 或 memcache，只是正常的普通 LAMP 网络服务器设置）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-27T06:39:43.920

您绝对应该使用第二个链接。[从高性能网站](http://www.stevesouders.com/blog/2009/04/09/dont-use-import/)阅读所有相关信息。如果您混合使用链接和@import，则会出现最大的问题，因为它会中断并行下载样式表的能力。此外，IE 存在多个 @import 语句的问题。有关所有信息，请阅读文章。这是非常彻底的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T06:41:42.217

[这](http://www.stevesouders.com/blog/2009/04/09/dont-use-import/)是对问题的出色分析。简短的回答：不要使用@import。

# math - “someValuesFrom”和“allValuesFrom”有什么区别？

> ID：914267
> 
> 赞同：2
> 
> 时间：2009-05-27T06:33:49.360
> 
> 标签：math, logic, owl, description-logic

在描述逻辑中，“someValuesFrom”和“allValuesFrom”有什么区别？换句话说，（有限存在量化）和（价值限制）之间的差异。

例如，考虑一下：

Δ = {a, b, c, d, e}
ext(B) = {<c,d>}
ext(R) = {<a,b>, <a,c>, <d,c>, < c,e>}

那么下面这些有什么区别呢？

ext(∃R.B) = *?*
ext(∀R.B) = *?*

有什么方法可以简化 somevaluefrom 和 allvaluesfrom 的概念吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-27T08:39:49.053

首先，`allValuesFrom`听起来`someValuesFrom`像 OWL，它们在[规范](http://www.w3.org/TR/2004/REC-owl-guide-20040210/#allValuesFrom)中通过示例进行了解释。

在 OWL（这是一种 DL 语言）的上下文中，它们表示对属性的限制，尤其是对属性值的类的限制，这意味着例如，您要声明`Car`具有`manufactured_by`属性的 a ，该属性仅限于类`Manufacturer`。

`allValuesFrom`并且`someValuesFrom`在某种意义上有所不同，前者要求属性值的所有值，后者至少需要一个属于某个类别。

# struts2 - 文件上传使用 在 Struts2 中

> ID：914268
> 
> 赞同：0
> 
> 时间：2009-05-27T06:33:53.027
> 
> 标签：struts2

我正在研究 struts2 应用程序。我的 jsp 中有以下内容（比如 main.jsp）——

```
<s:file name="sampleDocument"/>
<s:submit action="uploadSample" value="Upload" /> 
```

在这里查看我的 struts.xml 如何处理该操作 -

```
<action name=" uploadSample " class=" UploadFiles">                 
        <result name="success"> /main.jsp</result>
        <result name="input"> /error.jsp</result>
</action> 
```

它一切运行良好。由于需要的文件正在上传。但是正如您所看到的，我在成功时调用了相同的 jsp 页面（即 main.jsp）。它来了，但`<s:file>`文本框是空的。我的意思是它在上传之前没有我浏览过的文件名。谁能知道如何得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:01:50.917

`<input type="file"/>`出于安全原因，默认情况下会清除元素的值。

请参阅[如何为 HTML 中的文件输入设置值？](https://stackoverflow.com/questions/1696877/how-to-set-a-value-to-a-file-input-in-html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T13:35:07.723

您需要反映 JSP 中参数名称的操作属性。查看[此文档](http://struts.apache.org/2.0.11.1/docs/file-upload-interceptor.html)以了解要查找的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-03-22T04:40:28.100

您应该为 fileName 定义 getter 和 setter 函数。这将确保该值在从操作返回后填充到视图中。

# sql-server - SQL Server 复制，如何同步。订阅者离线

> ID：914272
> 
> 赞同：1
> 
> 时间：2009-05-27T06:35:39.717
> 
> 标签：sql-server, sql-server-2005, replication, sql-server-2005-express

我们正在为外部应用程序使用 SQL Sever 2005 复制。每件事都运行良好，没有任何问题。但是，最近我们遇到了我无法解决的情况。

我们在一个地理区域中与发布者 (SQL Sever 2005) 和多个其他区域中的订阅者 (SQL Sever 2005 express) 一起使用合并复制。由于订阅者位置的网络问题，订阅者无法连接到发布者，因此无法同步。订阅者中的一些表已达到分配的范围，我们现在无法向其中插入条目。

有什么办法可以解决这个问题吗？我可以想到一些但不确定如何处理它们：i。备份订户数据库，将其放在另一台机器上。同步并恢复数据库。ii. 将所有数据从（修改/插入）复制到发布者（手动），重置发布者和所述订阅者之间的同步。

我不太确定上述选择是否可行。任何帮助将不胜感激。

# watin - IE 弹出窗口在 WATIN 中被阻止（需要帮助）

> ID：914273
> 
> 赞同：2
> 
> 时间：2009-05-27T06:35:58.733
> 
> 标签：watin

我有一个页面，其中有一个链接按钮。当我单击链接按钮时，会出现一个弹出窗口，但如果我通过“watin”进行操作，弹出窗口被阻止并显示消息“弹出窗口被阻止。按“Ctrl”键允许弹出“来了。

通过 watin 自动化，我无法在单击链接按钮时弹出弹出窗口，但如果我手动单击弹出窗口即将到来。我厌倦了寻找解决方案 :( 任何人都可以帮助我。

代码如下

链接链接 = myIE.Span(Find.ByText("hello"));
链接.点击（）；//这里没有弹出窗口

谢谢，凯沙夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T10:33:18.557

大概你已经禁用了内置的 IE 弹出窗口阻止程序，这就是它手动工作的原因......

您是否安装了任何其他 IE 工具栏，例如 Google、Yahoo 或 MSN？众所周知，工具栏和其他神秘的弹出窗口阻止程序可以使用 Watin 执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-10T12:37:34.783

您可以使用 .NET 更改 IE 的注册表项。

启用或禁用所有浏览器扩展：

```
[HKEY_CURRENT_USER\SOFTWARE\Microsoft\Internet Explorer\Main]

Set value of [Enable Browser Extensions] to "Yes" or "No" 
```

以下是通过 .NET 编写注册表项以将站点放入受信任区域的代码示例，这使 WatiN 能够下载文件：

[以编程方式将受信任的站点添加到 Internet Explorer](https://stackoverflow.com/questions/972345/programmatically-add-trusted-sites-to-internet-explorer)

# ruby-on-rails - 可以在视图中实例化一个对象吗？

> ID：914275
> 
> 赞同：0
> 
> 时间：2009-05-27T06:36:36.470
> 
> 标签：ruby-on-rails, model-view-controller, instantiation

在将对象传递给部分之前，可以在视图中实例化对象吗？

```
<%= render :partial => "trade_new", :locals => {:trade=>Trade.new("e", "b") } %> 
```

或者最好将 Controller 中的任何对象实例化为实例变量：

```
@trade = Trade.new("e", "b") 
```

然后将实例变量传递给视图中的一个部分，如下所示：

```
<%= render :partial => "trade_new", :locals => {:trade => @trade } %> 
```

我的猜测是最好在控制器中实例化新对象以避免重复 - 例如在多个模板可能需要将此新对象传递给同一操作的部分的情况下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T06:48:35.013

首先，可以在视图中实例化一个对象。什么都不会在你的脸上爆炸。但是，您会错过将架构拆分为多个层的全部优势。

最好在控制器中实例化对象。一些原因包括 - 更好的重用，更简单的测试，更好的设计，因为解耦。

[在此处](http://www.martinfowler.com/eaaDev/index.html)查看有关演示模式的文章。

# asp.net - 客户端的部分回发和操作

> ID：914276
> 
> 赞同：1
> 
> 时间：2009-05-27T06:37:11.150
> 
> 标签：asp.net, asp.net-ajax, partial-postback

我有两个 DropDownLists。第一个可见，第二个不可见。我想要这样的东西：

1.  从第一个 DDL 中选择值。
2.  然后发生部分回发 - 根据选择从数据库中检索数据。
3.  填充第二个 DDL
4.  第二个 DDL 显示为 ie 幻灯片效果 (javascript)

我不想有完整的回发。最终效果应该是：

从第一个 DDL 中选择值，然后在下方向下滑动填充的第二个 DDL。

我不知道如何开始。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-27T06:49:09.053

由于听起来您使用网络表单，因此解决问题的第一步是首先研究 ASP.Net UpdatePanel 控件及其提供的选项。

[http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.aspx)

忠告虽然，UpdatePanel 乍一看看起来很棒，但它通过网络发送的数据比必要的多 100 倍，并且随着您执行的 Ajax 操作越多，它很快就会变得性能缓慢。一旦功能变得复杂，由于性能问题，您真的可以将自己编码到死角。

我会看一下 encosia.com 上关于如何将 jQuery 与 Asp.net WebForms 一起使用的精彩教程，看看您是否可以学习该方法。UpdatePanel 并不是一个很棒的工具，您会对 jQuery 提供的功能感到惊讶。

[http://encosia.com/2008/05/29/using-jquery-to-directly-call-aspnet-ajax-page-methods/](http://encosia.com/2008/05/29/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

你还提到你想要一个“幻灯片”效果。我认为要做到这一点，您将不得不深入研究 asp.net ajax 动画扩展器的东西，而且该框架使用起来并不漂亮或令人愉快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T06:44:36.427

您可以从使用 UpdatePanel 开始。您可以更新事件以仅更新 UpdatePanel 中包含的内容。

官方链接[ASP UpdatePanel 概述](http://www.asp.net/Ajax/Documentation/Live/overview/UpdatePanelOverview.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T06:44:52.383

使用 UpdatePanel 是在 ASP.NET 中获得 AJAX 行为的一种简单方法。UpdatePanel 将为您处理大部分 AJAX。

这是一个很好的教程：

[http://www.asp.net/Ajax/Documentation/Live/tutorials/IntroductionUpdatePanel.aspx](http://www.asp.net/Ajax/Documentation/Live/tutorials/IntroductionUpdatePanel.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T06:47:31.227

你应该看看

[级联下拉](http://www.asp.net/ajax/ajaxcontroltoolkit/samples/CascadingDropDown/CascadingDropDown.aspx)

并使用 jQuery 更改第二个下拉列表的 div，请参见[此处](http://www.webdesignerwall.com/demo/jquery/simple-slide-panel.html)

和相关的 jQuery

```
<script type="text/javascript">
$(document).ready(function(){

$(".btn-slide").click(function(){
    $("#panel").slideToggle("slow");
    $(this).toggleClass("active"); return false;
});

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T07:21:19.657

也许来自 Ajax 控件工具包的 Cascading Dropdown 控件可以帮助您：
[http ://www.asp.net/AJAX/AjaxControlToolkit/Samples/CascadingDropDown/CascadingDropDown.aspx](http://www.asp.net/AJAX/AjaxControlToolkit/Samples/CascadingDropDown/CascadingDropDown.aspx)

# c# - 为什么 Visual Studio 会打破 C# 中方法的命名约定？

> ID：914280
> 
> 赞同：10
> 
> 时间：2009-05-27T06:38:57.730
> 
> 标签：c#, visual-studio, naming-conventions

我知道 C# 中类方法的命名约定是以大写字母开头，每个新单词都是大写字母（例如 GetDeviceName）。

所以我的问题是为什么当我创建一个表单时，在其上放置一个控件，然后双击该控件（对于由 IDE 自动为我创建的方法）我得到一个以非大写字母开头的方法？（例如**slectButton_Click** (object sender, EventArgs e) ）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-27T06:41:33.420

控件的事件处理程序的命名约定一直是`controlName_EventName`，所以基本上，它会重用您自己的控件命名约定，然后将事件的名称塞进去。

这可能与一般的命名标准相反，但一直都是这样。

这样做的结果是，像[GhostDoc](http://www.roland-weigelt.de/ghostdoc/)这样的工具可以识别这种格式，因此生成的文档虽然仍然是通用的，但比试图自行推断方法的目的更重要。

例如，“controlName_EventName”方法可以这样记录：

```
/// <summary>
/// Handles the EventName event of the controlName control.
/// </summary>
/// <param name="sender">The source of the event.</param>
/// <param name="e">The <see cref="System.EventArgs"/> instance
/// containing the event data.</param>
protected void controlName_EventName(object sender, EventArgs e)
{ 
```

而不是更像这样（因为 GhostDoc 处理了上述问题，我根据使用错误方法名称的经验在这里随意使用）：

```
/// <summary>
/// Control names the event name.
/// </summary>
/// <param name="sender">The sender.</param>
/// <param name="e">The e.</param>
protected void controlName_EventName(object sender, EventArgs e)
{ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-27T07:00:17.430

它并没有严格违反 .Net 命名约定，因为该指南仅适用于**公共**方法。但是，您可以认为它违反了指南的精神。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T06:50:00.957

因为在这种情况下，将使用表单控件的名称，因为这就是它的名称。我必须说我更喜欢这种方式，因为它告诉我正在使用的控件的真实名称，而不是重命名的版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T07:03:41.853

连接所述事件处理程序时不要这么快点击选项卡；）嗯，这一切都已生成。他们可以改变它的外壳，但另一半会为此哭泣。这对他们来说是一个双输的局面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T06:55:58.327

我感觉到你了。真的，我更喜欢以下命名约定：

```
OnselectButtonClick() 
```

# vb.net - 如何使用 LINQ to SQL 对 Gridview 列表中的持续时间求和？

> ID：914281
> 
> 赞同：0
> 
> 时间：2009-05-27T06:39:17.057
> 
> 标签：vb.net, linq

您今天怎么样？祝你们一切顺利。

顺便说一句，这是我的问题。我想使用 LINQ to SQL 在 gridview 中显示总和持续时间。我有两个表，Users 和 Log_Times

用户
UserID-----Name
1------------Bob
2------------Mary
3------------Jane

Log_Times
ID---------------UserID--------TimeIn----------- ----------超时
1--------------------1----------------- ------2009 年 1 月 1 日 10:00:00--------2009 年 1 月 1 日 11:05:00
2---------------- ----2-----------2009 年 1 月 1 日 10:00:00--------2009 年 1 月 1 日11:02:30
3---------------------3------------------------ 2009 年 1 月 1 日 10:00:00--------2009 年 1 月 1 日 11:00:00
4--------------------1- ----------------------2009 年 1 月 2 日 10:00:00--------2009 年 1 月 2 日 11:05:00
5 --------------------2------------------------ 2009 年 1 月 2 日 10 :00:00-------2009 年 1 月 2 日 11:02:30

如果我们的绅士可以生成如下所示的报告，那就太好了：
UserName-------TotalDuration
Bob---------------2 Hours, 10 Minutes
Mary- -------------2 小时，5 分钟
Jane--------------1 小时

我正在使用 LINQ to SQL 和 VB.NET。

我到目前为止的代码是：

Dim db = new LogTimeDataContext
Dim LogUser = from lu in db.Users select lu.Name, TotalDuration = ? ? ?
Gridview1.DataSource = LogUser
Gridview1.DataBind()

请帮我弄清楚这个 TotalDuration 代码背后的原因..

我非常感谢您抽出宝贵的时间来解决这个问题，我期待着最好的回应。非常感谢你提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T11:40:38.207

你可以写这样的东西

```
from t in db.Log_Times 
join u in db.Users on t.UserID equals u.UserID 
select new {user = u.name, Sum(t.TimeOut - t.TimeIn) AS Duration }; 
```

我不知道总和部分是否正确，但这可能是您想要走的那种路线。

我确信在 SQL 方面更有经验的人可以将查询修改为正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T11:56:11.467

**更新：**

```
Dim QueryLogUser = from u in db.Users 
                   Select u.Name, Duration = u.Log_Times.Select (Function(lt) SqlMethods.DateDiffSecond(lt.TimeIn, lt.TimeOut)).Sum).OrderbyDescending(function(o) o.Duration) 
```

下面的查询仅返回在 Log_times 表中有条目的用户。

```
Imports System.Data.Linq.SqlClient

Dim db = New LogTimeDataContext
Dim LogUser = From log In db.Log_Times _
              Group By _
                 Name = log.User.Name _
              Into _
                 Duration = Sum(SqlMethods.DateDiffMinute(log.TimeIn,log.TimeOut) _
              Select name, TotalDuration = TimeSpan.FromMinutes(If(Duration,0)).tostring 
```

最后一行只是在转换为时间跨度之前检查持续时间是否为空

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-29T04:36:57.180

运行良好的解决方案是这样的。

```
Imports System.Data.Linq.SqlClient 

Dim QueryLogUser = from u in db.Users 
Select u.Name, Duration = u.Log_Times.Select (Function(lt) SqlMethods.DateDiffSecond(lt.TimeIn, lt.TimeOut))

Dim LogUser = From u In QueryLogUser.AsEnumerable _
Select u.Name, TotalDuration = u.Duration.Sum Order By TotalDuration Descending 
```

通过这个我可以得到总秒数。然后我稍后会在gridview中再写一个函数来将秒转换为分钟和小时。

```
Dim totalSecond as Integer
Dim totalMinute as Integer
Dim totalHour as Integer

Protected Function FieldDisplayDuration(ByVal Second As Integer)
 Dim d As String = "DefaultValue"
 If (Second > 60)
   totalSecond = Second mod 60
   totalMinutes = Second / 60
   If (totalMinutes > 60)
      totalHour = totalMinute mod 60
      totalMinute = totalMinute + totalMinute mod 60
      return totalHour & totalMinute & totalSecond
   End If
   return totalMinute & totalSecond
 End If
 return totalSecond

End Function 
```

通过这种方式，我可以得到小时、分钟和秒格式的持续时间列。快乐编码:)

# sockets - 冲洗插座是什么意思？

> ID：914286
> 
> 赞同：28
> 
> 时间：2009-05-27T06:41:36.913
> 
> 标签：sockets, networking

除了如何像文件一样读取和写入它们之外，我对套接字的了解并不多。我对使用套接字选择器有所了解。我不明白为什么你必须刷新一个套接字，那里到底发生了什么？这些位只是在记忆中的某个地方闲逛，直到它们被推开？我在网上阅读了一些关于套接字的东西，但都是非常抽象和高级的。

这里到底发生了什么？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-05-27T06:51:35.103

写入网络套接字和发送数据会产生一定的开销。如果每次字节进入套接字时都发送数据，那么对于实际数据的每个字节，您最终会得到 40 多个字节的 TCP 标头。（当然，假设您使用的是 TCP 套接字。其他套接字将具有不同的值）。为了避免这种低效率，套接字维护了一个本地缓冲区，该缓冲区通常超过 1000 字节。当该缓冲区被填满时，将在数据周围包裹一个标头，并将数据包发送到其目的地。

在许多情况下，您不需要立即发送每个数据包；如果您正在传输文件，如果没有文件的最终数据，早期数据可能没有任何用处，因此效果很好。但是，如果您需要强制立即发送数据，则刷新缓冲区将发送任何尚未发送的数据。

请注意，当您关闭套接字时，它会自动刷新所有剩余数据，因此在关闭之前无需刷新。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2011-08-11T11:07:30.093

你不能真正冲洗插座。

（来自[How can I force a socket to send data in its buffer?](http://www.unixguide.net/network/socketfaq/2.11.shtml)）

> 你不能强迫它。时期。TCP 自己决定何时可以发送数据。现在，通常当您在 TCP 套接字上调用 write() 时，
> TCP 确实会发送一个段，但没有保证也没有办法强制这样做。TCP 不发送段的原因有很多
> ：关闭的窗口和 Nagle 算法是
> 立即想到的两件事。

阅读完整的帖子，它非常深入并为我澄清了很多事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-06T14:36:03.290

Nagle 的算法经常用在套接字上。简而言之，它一直等到有大量数据要发送。问题是要在传输延迟和发送数据包的开销成本之间取得平衡。

数据负载越大，浪费的带宽就越小，因为标头（大部分）是固定大小的。此外，中间系统的性能限制通常更明显地基于数据包速率，而不是整体数据速率。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T06:59:59.147

我没有使用flush进行套接字编程。我确实记得在某处可以设置一些模式，其中面向流的发送尝试减少发送的小数据包的数量。但是，您将使用 sendall() 来确保发送缓冲区中的所有内容。

当您进行后台处理时，shutdown() 函数非常有用。当然，如果您不希望有东西闲逛，则*必须使用 close() 调用。*

查看[Beej 的指南](http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html)以获取更多信息。

# delphi - 如何仅使用 TLabel 而不是 TProgressBar 在 Turbo Delphi 中制作进度条

> ID：914288
> 
> 赞同：0
> 
> 时间：2009-05-27T06:41:49.177
> 
> 标签：delphi, progress-bar, vcl

所以这里的逻辑

为 1%="|" 在 TLabel 和一个“|” 我们需要循环 10 次

所以要达到 100%= 100 次 "|" 我们需要循环 1000 次

你能帮我写代码吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-27T08:06:41.083

也许您可以使用 StringOfChar 函数？

像这样的东西：

```
 procedure TForm1.Button1Click(Sender: TObject);
    var
      X: Integer;
      Total: Integer;
      Percent: Integer;
    begin
      Total := 1000;
      for X := 1 to Total do
      begin
        Sleep(100);
        Percent := (X * 100) div Total;
        Label1.Caption := StringOfChar('|', Percent) + IntToStr(Percent) + '%';
        Label1.Repaint;
      end;
    end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-27T07:08:11.333

我不是 100% 确定我明白你的意思，但我认为它是这样的（假设“标签”是 TLabel）：

```
label.caption := '';

for i := 1 to 1000 do
begin
    ... do stuff ...
    if i mod 10 = 0 then 
    begin
        label.caption = label.caption + '|';
        label.repaint();
    end;
end; 
```

我不确定重绘与刷新，以及您是否应该重绘/刷新整个表单，但这取决于您。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T08:45:07.683

这是 Bing 解决方案的一种变体，它显示了条形图内部（中间）的百分比。

```
procedure TForm1.Button1Click(Sender: TObject);
var
  X: Integer;
  Total: Integer;
  Percent: Integer;
begin
  Total := 1000;
  for X := 1 to Total do begin
    Sleep(5);
    Percent := (X * 100) div Total;
    Label1.Caption := StringOfChar('|', Percent DIV 2) +
                      ' ' + IntToStr(Percent) + '% ' +
                      StringOfChar('|', Percent DIV 2);
    Label1.Repaint;

    Application.ProcessMessages;

  end;
end; 
```

对不起，我的英语不好。问候。

* * *

Neftalí -Germán Estévez-

# odp.net - 'Oracle.DataAccess.Client.OracleConnection' 的类型初始化程序引发异常

> ID：914291
> 
> 赞同：22
> 
> 时间：2009-05-27T06:42:56.380
> 
> 标签：odp.net, oracleclient

我开发了一个使用 Oracle Data Provider for .NET 的应用程序。我将应用程序文件 (.exe) 和 ODP 库 (Oracle.DataAccess.dll) 复制到另一台未安装 Oracle 客户端和 ODP.NET 的计算机上。当我运行应用程序时，我收到错误消息：“Oracle.DataAccess.Client.OracleConnection”的类型初始化程序引发了异常。

```
*****************Exception Text***************
System.TypeInitializationException: The type initlializer for 'Oracle.DataAccess.Client.OracleConnection at Oracle.DataAccess.Client.OracleConnection..cctor()
  --- End of inner exception stack trace ---
  at Oracle.DataAccess.Client.OracleConnection..ctor(String connectionString)
  ... 
```

我是否必须在要运行我的应用程序的计算机上安装 ODP.NET 和 Oracle 客户端？如果是，是否有其他方式我不必安装它们但仍然可以运行我的应用程序？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-17T11:10:58.360

两种选择：

*   在要运行程序的 PC 上安装 Oracle 客户端

*   使用**Oracle.ManagedDataAccess.dll**

您可以在 NuGet 上获得它（搜索“oracle managed”）或下载[ODP.NET_Managed.zip](http://www.oracle.com/technetwork/database/windows/downloads/odpmbeta-1696432.html) （链接是测试版，但指向正确的方向）

我使用它是为了让我部署到的计算机不需要安装 Oracle 客户端。

NB 在我看来这对控制台应用程序很好，但如果你打算安装你的应用程序会很烦人，所以我在这种情况下安装了客户端。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-27T07:05:14.003

[用于 .NET 的 Oracle 数据提供程序](http://www.oracle.com/technology/tech/windows/odpnet/index.html)（来自 Oracle）和[用于 Oracle 的 .NET Framework 数据提供程序](http://msdn.microsoft.com/en-us/library/2d7h4ycx.aspx)（来自 Microsoft）都需要在计算机上安装 Oracle 客户端。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-01-26T11:28:00.833

最简单的方法！！！

1.  右键单击项目并选择“**管理 NuGet 包...** ”
2.  搜索**Oracle.ManagedDataAccess**。安装它。

如果您使用的是**实体框架**并且您的**Visual Studio**版本是**2012 或更高版本**，那么

3.  再次搜索**Oracle.ManagedDataAccess.EntityFramework**。安装它。

4.  在 .cs 文件中使用以下名称空间：
    *using Oracle.ManagedDataAccess.Client;
    使用 Oracle.ManagedDataAccess.EntityFramework；*

**它完成了**。现在重新启动您的 Visual Studio 并构建您的代码。

**这些包有什么作用？**
安装这些软件包后，无需安装额外的 Oracle 客户端软件即可连接到数据库。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-05-29T20:12:17.337

好的，当您确定使用相同流程的其他应用程序有效时；在您的新应用程序上确保您有数据访问参考和三个 dll 文件...

我从 Oracle 站点下载**了 ODAC1120320Xcopy_32bit这个：**

[http://www.oracle.com/technetwork/database/windows/downloads/utilsoft-087491.html](http://www.oracle.com/technetwork/database/windows/downloads/utilsoft-087491.html)

参考：**Oracle.DataAccess.dll** (ODAC1120320Xcopy_32bit\odp.net4\odp.net\bin\4\Oracle.DataAccess.dll)

在您的项目中包含这 3 个文件：

*   **oci.dll** (ODAC1120320Xcopy_32bit\instantclient_11_2\oci.dll)
*   **oraociei11.dll** (ODAC1120320Xcopy_32bit\instantclient_11_2\oraociei11.dll)
*   **OraOps11w.dll** (ODAC1120320Xcopy_32bit\odp.net4\bin\OraOps11w.dll)

当我尝试使用正确的参考和文件创建另一个应用程序时，我会收到该错误消息。

修复：突出显示所有三个文件并选择“复制到输出”=如果更新则复制。如果更新，我确实复制了，因为其中一个 dll 超过 100MB，并且我所做的任何更新都不会再次复制这些文件。

我也遇到了注册表错误，这修复了它。

```
public void updateRegistryForOracleNLS()
{
    RegistryKey oracle = Registry.LocalMachine.CreateSubKey(@"SOFTWARE\ORACLE");
    oracle.SetValue("NLS_LANG", "AMERICAN_AMERICA.WE8MSWIN1252");
} 
```

有关 Oracle nls_lang 列表，请参阅此站点：[https ://docs.oracle.com/html/B13804_02/gblsupp.htm](https://docs.oracle.com/html/B13804_02/gblsupp.htm)

之后，一切顺利。

我希望它有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-27T06:46:28.233

您需要安装 oracle 客户端驱动程序才能使这些类正常工作。

那里可能有可以处理 Oracle 的 3rd 方连接框架，也许其他人可能知道一些特定的框架。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-27T07:27:02.643

您需要一个 Oracle 客户端：（2016 年之前）[http://www.oracle.com/technology/oramag/oracle/08-nov/o68odpnet.html](http://www.oracle.com/technology/oramag/oracle/08-nov/o68odpnet.html)

（大约 2019 年）重命名为“Oracle Instant Client” [https://www.oracle.com/database/technologies/instant-client/downloads.html](https://www.oracle.com/database/technologies/instant-client/downloads.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-07-26T19:19:35.470

这是一个古老但仍然相关的问题，虽然这里的答案很有帮助，但没有一个答案完全解决了 OP 的两个问题。

**1\. 我是否必须在要运行我的应用程序的计算机上安装 ODP.NET 和 Oracle 客户端？**

**是**-**如果您使用的是 ODP.NET，则为 Unmanaged**。这是您在 Oracle 客户端安装程序（例如）中选择“Oracle Data Provider for .NET”时通常安装的版本。你从甲骨文下载这个（只是谷歌它：甲骨文网址经常变化）。

但是，如果您使用的是 ODP.NET，托管（并且您可能希望使用这个代替）那么不，您只需要安装（或部署）ODP.NET，托管应用程序，而不是完整的 Oracle 客户端。详情见下文。

**2\. 如果是，是否有其他方式我不必安装它们但仍然可以运行我的应用程序？**

是的，至少有一种方法。它是 ODP.NET 的托管端口。

不幸的是，通常的解决方法，包括 ODBC，Microsoft 的 Oracle Provider for .NET（是的，那个旧的，已弃用的）和 ODP.NET，非托管 DLL 都需要安装 Oracle 客户端。直到我们在 Oracle 的朋友给了我们一个很好的小 (~5MB) DLL，它也是托管的。这意味着不再需要为 32 位和 64 位 Oracle 客户端部署 32 位和 64 位版本！并且在您针对 10.0.2.1（或其他）构建的程序集绑定方面没有更多问题，但是您的客户安装了从 9i 一直到 12c 的一系列客户端，包括中间的“g”客户端）因为您可以直接发布它使用您的应用程序，并通过 nuget 进行管理。

**但是，如果您使用 ODP.NET, Managed 作为 nuget 包提供，那么您不需要安装 Oracle 客户端。**您只需要 ODP.NET 托管 DLL。如果您之前使用的是 ODP.NET，非托管 DLL，那么切换非常容易：只需更改对托管 ODP.NET 的所有引用（csharp 中的 .csproj 文件等），然后更改任何`using`语句，例如示例：`using Oracle.DataAccess.Client`成为`using Oracle.ManagedDataAccess.Client`，就是这样！（除非您应该在 ODP.NET 中公开的完整客户端中使用一些更高级的数据库管理功能，非托管，我自己没有做过，所以祝你好运..）。并且还从您的/文件中删除所有那些烦人的`assemblyBindingRedirect`节点，并且再也不会为这些垃圾出汗了！`app.config``web.config`

参考：

*   ODP.NET 详细信息：[http ://www.oracle.com/technetwork/topics/dotnet/index-085163.html](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html)
*   ODP.NET 向后和向前兼容：[http ://www.oracle.com/technetwork/topics/dotnet/multipledbs-089665.html](http://www.oracle.com/technetwork/topics/dotnet/multipledbs-089665.html)
*   高级配置：[https ://docs.oracle.com/cd/E48297_01/doc/win.121/e41125/featConfig.htm](https://docs.oracle.com/cd/E48297_01/doc/win.121/e41125/featConfig.htm)

故障排除：

该错误通常意味着发现 ODP.NET 正常，但未找到或未安装 Oracle 客户端。当体系结构不匹配（安装了 32 位 Oracle 客户端，但尝试使用 64 位非托管 ODP.NET，反之亦然）时，也会发生这种情况。这也可能是由于权限问题和路径问题以及应用程序域（您的 Web 应用程序或您的 EXE 或其他）无法找到 Oracle DLL 以通过网络实际与 Oracle 通信（ODP.NET Unmanaged DLL 基本上只是挂接到 ADO 之类的包装器）。

我发现这个问题的常见解决方案：

应用程序是 64 位的？

*   安装 64 位 Oracle 客户端（32 位无法使用）

应用程序是 32 位的？

*   安装 32 位 Oracle 客户端（64 位无法使用）

已为正确的体系结构安装了 Oracle 客户端？

*   验证您的环境 PATH 和`ORACLE_HOME`变量，确保可以找到 Oracle（较新的版本可能使用 Registry）
*   验证注册表中的 ORACLE_HOME 和设置（请记住：注册表是 32 位或 64 位的，因此请确保检查与您的应用程序匹配的那个！）
*   `ORACLE_HOME`验证文件夹的权限。如果您不知道它在哪里，请检查注册表。我已经看到 ASP.NET 应用程序工作进程正在使用网络服务用户并且由于某种原因并排安装 32 位和 64 位客户端导致权限从该`Authorized Users`组的第一个客户端中删除..修复权限主文件夹解决了这个问题。
*   与往常一样，使用 SysInternals Process Monitor 找出丢失或无法读取的文件非常方便。

# windows - 为什么在 Windows 上使用 Perl-Tk 构建复杂的 GUI 时遇到问题？

> ID：914293
> 
> 赞同：3
> 
> 时间：2009-05-27T06:43:05.540
> 
> 标签：windows, perl, memory, perltk

我有一个带有大约 50 个子窗口的 Perl-Tk GUI。在每个子窗口中大约有 50 个按钮和 50 个菜单（每个菜单大约有 4 个选项）。

当我在 UNIX/Linux/Solaris 上运行它时，它运行流畅。

当我在 Windows 上运行它时，GUI 在加载过程中冻结，所以我只能看到一些按钮，或者 GUI 根本不显示——它似乎卡住了。

perl 进程高达 50000K 内存使用率和 100% 的 CPU 使用率。但是当我关闭一些按钮/菜单并再次运行时 - 很好。

看来，Perl-Tk 没有（拥有）足够的内存来在 Windows 上加载 GUI。

我能做些什么来让它正常运行吗？是否有任何特殊的配置、标志来告诉 Windows 给 Perl-TK 更多内存，或者告诉 perl 提供更多内存？

任何帮助，将不胜感激 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-21T10:30:52.587

获取有关潜在问题的一些详细信息的最佳方法是分析代码

```
perl -d:DProf <your program name> 
```

这将为您提供有关程序行为的完整详细信息。

然后，您可以继续调整导致此错误行为的代码。

这将引导我们朝着正确的方向前进。

# wcf - IIS 6.0 上 WCF 中的集成 Windows 身份验证

> ID：914302
> 
> 赞同：2
> 
> 时间：2009-05-27T06:44:50.153
> 
> 标签：wcf, iis, authentication

*我需要为没有证书*的 IIS 6.0 (Windows Server 2003) 上托管的 WCF 服务实现集成 Windows 身份验证。要求是在特定 Active Directory 组中的用户点击服务时简单地验证他们的 Windows 凭据。使用的框架版本是 3.0。

**WCF 配置：**

以下是服务的 web.config 文件的“绑定”部分：

```
<bindings>
<basicHttpBinding>
<binding name="Binding1">
    <security mode="TransportCredentialOnly">
    <transport clientCredentialType="Windows" />
    </security>
</binding>
</basicHttpBinding>

</bindings> 
```

没有“ *mex* ”端点。

即使虚拟目录以及 .svc 文件的安全设置在 IIS 中选择了“集成 Windows 身份验证”，当导航到 .svc 文件时仍会出现以下错误：

> 此服务的安全设置需要 Windows 身份验证，但托管此服务的 IIS 应用程序未启用它。

以下是服务托管的其他详细信息：

*   该服务在单独的应用程序池下运行
*   应用程序池在应用程序池的“身份”选项卡下配置的单独特权帐户下运行。

我在这些方面看到了许多其他问题，但没有一个修复程序真正解决了这个问题。您的意见将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-09-11T17:03:36.843

经过一番挖掘，我终于发现如果您将“Windows”更改为“Ntlm”，这将有效。我永远无法让它与 Kerberos 一起使用，但您提到无论如何都不想使用证书。

如果您仍然遇到问题，您可以在 NTAuthenticationProviders 下查看相关站点的 IIS 元数据库中的内容。如果您只想使用 Ntlm，您需要将该字符串设置为“NTLM”，并且您需要确保它在您的传输客户端CredentialType 中显示“Ntlm”而不是“Windows”，否则您会得到异常您在原始帖子中引用。

相反，如果有人遇到此错误并且想要使用 Kerberos 证书（如果可用），他们应该检查元数据库 NTAuthenticationProviders 是否显示“协商，NTLM”。这是默认设置，但在我今天尝试运行 WCF 服务的 VM 上对我来说神秘不同（最终将我带到了这个线程！）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-27T08:09:24.980

根据我使用 WCF 的经验，正确配置所有内容非常困难 - 大量的试验和错误！然而，我确实发现以下链接非常有用，因为它为不同的场景提供了清单：[CodePlex - WCF 安全指南](http://www.codeplex.com/WCFSecurityGuide)和主要的 WCF 部分：[WCF 安全](http://www.codeplex.com/WCFSecurity)。

我检查了我的应用场景的清单，问题得到了解决。希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-03-12T05:19:58.337

NTLM 的工作方式与 Windows 不同。如果你真的想要 Windows，只需删除一段代码

```
bindingConfiguration="your_basicHttpBinding_binding_name" 
```

从端点。那应该行得通。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-05-27T07:01:26.880

确保您确实取消选中“启用匿名访问”。

如果其中任何一个适用于您的情况，也许您可​​以尝试强制 NTML 身份验证

*   通过将工作进程身份配置为不同的域帐户，您可以在虚拟目录级别隔离网站。

*   您正在使用集成 Windows 身份验证，没有为运行 IIS 的服务器使用 WINS 或 DNS 名称，并且您希望使用本地用户帐户或 LocalService 帐户作为工作进程标识。

请参阅：[http ://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/524404dc-8586-46b0-89ac-0f5db6d33c9c.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/524404dc-8586-46b0-89ac-0f5db6d33c9c.mspx?mfr=true)

# c# - .NET 中的代理身份验证 - 用于外部 API

> ID：914306
> 
> 赞同：8
> 
> 时间：2009-05-27T06:46:12.197
> 
> 标签：c#, twitter, proxy-server

我正在使用 Twitter API (twitterizer) 开发一个 twitter 消息传递实用程序。但由于我在公司代理中，我收到错误“需要 407 代理身份验证”。在调用 API 或使用默认代理设置之前，有什么方法可以对用户进行身份验证？

PS 在内部，API 使用 HttpWebRequest。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-27T06:57:28.510

这不能回答你的问题。但是您得到的错误显然是代理身份验证错误。

您可能想要禁用或启用代理。

要禁用代理，请在 App.config 文件中添加以下配置

```
<system.net>
  <defaultProxy enabled="false" useDefaultCredentials="false">
    <proxy/>
    <bypasslist/>
    <module/>
  </defaultProxy>
</system.net> 
```

要启用代理并使用默认代理设置（在 IE 中指定），请在 App.config 中添加此配置

```
<system.net>
  <defaultProxy enabled="true" useDefaultCredentials="true">
    <proxy/>
    <bypasslist/>
    <module/>
  </defaultProxy>
</system.net> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-21T12:31:42.407

一种可能的编程解决方案是创建以下代理：

```
IWebProxy proxy=HttpWebRequest.GetSystemWebProxy();  
proxy.Credentials = CredentialCache.DefaultCredentials; 
```

然后将其分配给进行网络调用并接受代理的任何对象，例如：

WebClient 客户端 = 新 WebClient();
client.proxy=代理；

# php - 我可以在 PHP 中使用电话 api 吗？

> ID：914308
> 
> 赞同：1
> 
> 时间：2009-05-27T06:46:38.137
> 
> 标签：php

我需要知道如何使用 php 语言连接电话

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-27T07:00:58.613

如果您参考[Windows“TAPI”接口](http://msdn.microsoft.com/en-us/library/ms734273(VS.85).aspx)，请查看[w32api PHP 扩展](http://www.php.net/w32api)，它允许从 PHP 调用 Win32 API 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T06:51:36.477

AFAIK 你不能使用 php 通过电话线连接。PHP 是一种脚本语言。你可以试试[Asterisk](http://www.asterisk.org/)。SO中有关于Asterisk dev的[问题](https://stackoverflow.com/questions/tagged/asterisk)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T06:56:58.247

对于这类东西，我可能会选择[Erlang](http://erlang.org/)，因为这就是该语言的起源。

*   [Erlang 常见问题](http://erlang.org/faq/faq.html)
*   [二郎文档](http://erlang.org/doc.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T07:00:21.687

Php 理论上为此提供了必要的功能，但我不知道有任何库实现任何 VOIP 协议。而且我真的怀疑你想这样做：PHP 的解释器非常慢，而且该语言不是为这种事情而设计的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T07:03:14.913

这应该是可能的。不过有几点需要注意。

PHP 独立于平台，但电话 api 没有。例如 TAPI（windows phone api）是基于 COM 的，不能在 linux 上工作。linux上可能也有一个电话api。

对于 PHP 中的 TAPI 编程，您可以查看此处：

[http://uk3.php.net/com](http://uk3.php.net/com)有关在 PHP 中使用 COM api 的 信息[http://en.wikipedia.org/wiki/Telephony_Application_Programming_Interface](http://en.wikipedia.org/wiki/Telephony_Application_Programming_Interface)有关 TAPI的信息

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-10-02T15:45:57.593

[Twilio](http://www.twilio.com/)是一种 Web 服务，您可以使用可以在 Web 服务器上托管的任何语言（包括 PHP）来控制它。问题尚不清楚，但如果您想处理来电和去电，它们是一个很好的解决方案。

[Tropo](http://tropo.com/)是一个类似的服务，也可以与 PHP 一起使用。模型略有不同，但仍然很容易实现。

# flash - 在影片剪辑中的 as3 中创建和定位动态按钮

> ID：914310
> 
> 赞同：0
> 
> 时间：2009-05-27T06:46:49.870
> 
> 标签：flash, actionscript-3

嗨，我是 as3 的新手，任何人都可以帮助我创建动态按钮和分配点击事件，请查看附件图片以了解我的要求..

```
 http://i39.tinypic.com/9gkmds.jpg 
```

请指导我在 as3 中完成此功能。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T08:35:19.467

这是一个开始：

```
for (var i:int = 0; i < 8; i++)
{
   var button:SimpleButton = new MyButton(); //whatever the library linkage of your button is
   addChild(button);
   button.x = i * 100;
} 
```

# python - 从 python subprocess.Popen(command, stderr=subprocess.PIPE, stdout=subprocess.PIPE) 捕获标准错误

> ID：914320
> 
> 赞同：4
> 
> 时间：2009-05-27T06:51:33.480
> 
> 标签：python, subprocess

我在这里看过很多次这个帖子；但未能从命令中捕获故意错误。到目前为止我发现的最好的部分工作..

```
from Tkinter import *
import os
import Image, ImageTk
import subprocess as sub
p = sub.Popen('datdsade',stdout=sub.PIPE,stderr=sub.PIPE)
output, errors = p.communicate()

root = Tk()
text = Text(root)
text.pack()
text.insert(END, output+ "Error: " + errors )
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-11T20:03:47.940

这对我来说非常有效：

```
import subprocess
try:
    #prints results
    result = subprocess.check_output("echo %USERNAME%", stderr=subprocess.STDOUT, shell=True)
    print result
    #causes error
    result = subprocess.check_output("copy testfds", stderr=subprocess.STDOUT, shell=True)
except subprocess.CalledProcessError, ex:
    print "--------error------"
    print ex.cmd
    print ex.message
    print ex.returncode
    print ex.output 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-27T06:56:31.617

您是否 100% 确定“datdsade”实际上会写入标准错误？如果是这样，那么它可能正在缓冲它的标准错误，或者阻塞它。

编辑：我建议在 bash 中运行“datdsade”（你的程序）（假设你有 linux，你可以为 windows 使用 dl sh.exe），看看你是否可以将你的 stderr 捕获到一个文件 datdsade 2> errors.txt。请注意，**如果您在 Windows 上，stderr 将不会在 DOS 窗口中输出**。您可能会更幸运地先写入日志文件并将其读回或让 python 将其存储在变量中。

或者 stderr=sub.STDOUT 会将您的错误与标准输出合并。

再次编辑：忽略上述内容，因为communicate() 正在捕获所有这些。我会说问题肯定是您选择的程序永远不会写入stderr，或者您实际上并没有触发错误。这就是程序的编写方式。程序是什么？

# vb.net - 在 vb.net 中的表单上显示图标

> ID：914323
> 
> 赞同：3
> 
> 时间：2009-05-27T06:52:36.693
> 
> 标签：vb.net, imagelist

如何在 vb.net 的表单上显示 48x48 分辨率的图标？我查看了使用 imagelist ，但我不知道如何显示我使用代码添加到列表中的图像以及如何在表单上指定它的坐标。我做了一些谷歌搜索，但没有一个例子真正展示了我需要知道的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-27T07:14:09.857

当您拥有支持 alpha 透明度的图像格式时，ImageList 并不理想（至少以前是这种情况；我最近没有经常使用它们），因此您最好从磁盘上的文件中加载图标或从资源。如果你从磁盘加载它，你可以使用这种方法：

```
' Function for loading the icon from disk in 48x48 size '
Private Function LoadIconFromFile(ByVal fileName As String) As Icon
    Return New Icon(fileName, New Size(48, 48))
End Function

' code for loading the icon into a PictureBox '
Dim theIcon As Icon = LoadIconFromFile("C:\path\file.ico")
pbIcon.Image = theIcon.ToBitmap()
theIcon.Dispose()

' code for drawing the icon on the form, at x=20, y=20 '
Dim g As Graphics = Me.CreateGraphics()
Dim theIcon As Icon = LoadIconFromFile("C:\path\file.ico")
g.DrawIcon(theIcon, 20, 20)
g.Dispose()
theIcon.Dispose() 
```

更新：如果您希望将图标作为程序集中的嵌入资源，您可以更改 LoadIconFromFile 方法，使其看起来像这样：

```
Private Function LoadIconFromFile(ByVal fileName As String) As Icon
    Dim result As Icon
    Dim assembly As System.Reflection.Assembly = Me.GetType().Assembly
    Dim stream As System.IO.Stream = assembly.GetManifestResourceStream((assembly.GetName().Name & ".file.ico"))
    result = New Icon(stream, New Size(48, 48))
    stream.Dispose()
    Return result
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T07:00:05.183

您想要一个图片框控件将图像放置在窗体上。

然后，您可以将 Image 属性设置为您希望显示的图像，可以是来自磁盘上的文件、图像列表或资源文件的图像。

假设您有一个名为 pct 的图片框：

```
pct.Image = Image.FromFile("c:\Image_Name.jpg")  'file on disk 
```

或者

```
pct.Image = My.Resources.Image_Name 'project resources 
```

或者

```
pct.Image = imagelist.image(0)  'imagelist 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-05-31T11:41:16.933

```
 Me.Icon = Icon.FromHandle(DirectCast(ImgLs_ICONS.Images(0), Bitmap).GetHicon()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T20:03:43.393

您可以使用标签控件来做同样的事情。我用一个在图片框控件中的图像上画了一个点。它可能比使用 PictureBox 的开销更少。

```
 Dim label As Label = New Label()
        label.Size = My.Resources.DefectDot.Size
        label.Image = My.Resources.DefectDot ' Already an image so don't need ToBitmap 
        label.Location = New Point(40, 40)
        DefectPictureBox.Controls.Add(label) 
```

使用 OnPaint 方法可能是最好的方法。

```
Private Sub DefectPictureBox_Paint(ByVal sender As System.Object, ByVal e As System.Windows.Forms.PaintEventArgs) Handles DefectPictureBox.Paint
    e.Graphics.DrawIcon(My.Resources.MyDot, 20, 20)
End Sub 
```

# asp.net - 请求的 URL 授权失败

> ID：914332
> 
> 赞同：5
> 
> 时间：2009-05-27T06:57:29.353
> 
> 标签：asp.net, iis-6

我正在将一些站点移至运行 IIS6 的新 Windows 2003 安装。但是，我遇到了表单身份验证问题。有问题的站点在具有相同操作系统和 IIS 版本的旧机器上运行良好。

当我尝试登录网站时，我收到一个事件日志“请求的 URL 授权失败”并且页面重定向回：-

[http://www.demo.socialclause.net/logout.aspx?ReturnUrl=/Secure/Procurement/Default.aspx](http://www.demo.socialclause.net/logout.aspx?ReturnUrl=/Secure/Procurement/Default.aspx)

新旧服务器都包含相同的设置和相同的权限。显然我在某个地方错过了一个设置，但无法理解它。任何人都可以帮忙吗？

我的 web.config 包含以下内容：-

```
<authentication mode="Forms">
  <forms slidingExpiration="true" name=".ASPXAUTH" protection="All" loginUrl="~/logout.aspx" timeout="60" ></forms>
</authentication> 
```

在 /secure 目录（这不是虚拟目录）中，我的 web.config 包含：-

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <authorization>
      <allow roles="ClauseAdmin"/>
      <allow roles="ProcurementAdmin"/>
      <allow roles="ReportAdmin"/>
      <allow roles="SystemAdmin"/>
      <deny users="*"/>
    </authorization>
  </system.web>
</configuration> 
```

事件日志显示：

```
Event Type: Information
Event Source:   ASP.NET 2.0.50727.0
Event Category: Web Event 
Event ID:   1314
Date:       26/05/2009
Time:       21:01:05
User:       N/A
Computer:   WILDEAA1
Description:
Event code: 4007 
Event message: URL authorization failed for the request. 
Event time: 26/05/2009 21:01:05 
Event time (UTC): 26/05/2009 20:01:05 
Event ID: af3bac34e6d74630b937a5a05d0f25f2 
Event sequence: 4 
Event occurrence: 1 
Event detail code: 0 

Application information: 
    Application domain: /LM/W3SVC/2067908276/Root-1-128878416581538912 
    Trust level: Full 
    Application Virtual Path: / 
    Application Path: C:\Inetpub\websites\www.demo.socialclause.net\htdocs\ 
    Machine name: WILDEAA1 

Process information: 
    Process ID: 1076 
    Process name: w3wp.exe 
    Account name: NT AUTHORITY\NETWORK SERVICE 

Request information: 
    Request URL: http://demo.socialclause.net/Secure/Procurement/Default.aspx 
    Request path: /Secure/Procurement/Default.aspx 
    User host address: 91.84.25.241 
    User: richard@wildesoft.net 
    Is authenticated: True 
    Authentication Type: Forms 
    Thread account name: NT AUTHORITY\NETWORK SERVICE 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-27T07:05:57.793

尝试拒绝用户？（匿名）而不是 *（全部）

```
<authentication mode="Forms">
    <forms name=".ASPXFORMSAUTH" loginUrl="~/Common/Login.aspx" timeout="450" />
  </authentication>
  <authorization>
    <deny users="?" />
    <allow roles="Admin" />
  </authorization> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T22:07:17.767

到目前为止，我只使用了 sql 角色提供程序...我认为答案在于您正在使用的角色提供程序。您的用户似乎没有获得分配的角色。你能提供给你关于这个的 web.config 部分吗？例如这是我的：

```
 <roleManager enabled="true" defaultProvider="IDTSqlRoleProvider" cacheRolesInCookie="true" cookieProtection="All">
    <providers>
      <clear/>
      <add
        name="IDTSqlRoleProvider"
        type="System.Web.Security.SqlRoleProvider"
        connectionStringName="SqlMembershipConnectionString"
        applicationName="ConsumerSynergy"/>
    </providers>
  </roleManager> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-05-14T16:56:38.840

试试这个？基本上，您说的是允许 x、y、z，然后全部拒绝。

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <authorization>
      <deny users="*"/>
      <allow roles="ClauseAdmin"/>
      <allow roles="ProcurementAdmin"/>
      <allow roles="ReportAdmin"/>
      <allow roles="SystemAdmin"/>
    </authorization>
  </system.web>
</configuration> 
```

如果这不起作用，试试这个。

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <authorization>
      <allow roles="ClauseAdmin"/>
      <allow roles="ProcurementAdmin"/>
      <allow roles="ReportAdmin"/>
      <allow roles="SystemAdmin"/>
      <deny users="?"/>
    </authorization>
  </system.web>
</configuration> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-07-27T16:43:46.123

我出现了同样的错误消息，结果发现我在 web.config 的授权部分中的角色名称拼写错误。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2009-05-27T07:03:28.453

只是在这里猜测，因为如果您付钱给我，我不会使用 IIS，但也许您缺少一些需要在服务器上安装的证书或密码文件？也许您需要告诉 IIS 您要匹配的角色/用户。

编辑：根据您透露的其他信息，我将排除证书并专注于如何定义角色。您说它们是在数据库中定义的，但是当您切换服务器时它们变得无效的事实表明了三种可能性：

1.  您的角色定义为 Windows 系统帐户或 IIS 用户。
2.  您的角色被定义为数据库用户，但您只复制了数据表，而不是用户（我的意思是数据库用户，而不是数据库中的“用户”表）。
3.  您的角色已定义，但读取它们的权限已更改。

我怀疑是 1.) IIS 用户。

# file - 不同的文件格式存储方式不同

> ID：914344
> 
> 赞同：2
> 
> 时间：2009-05-27T07:01:40.580
> 
> 标签：file, operating-system, storage

这可能是一个非常微不足道的事情。

文件存储操作系统是否依赖？

为什么文本文件从 Dos 移动到 Unix 时会发生变化，是 Unix 中的编辑器对某些字符的解释不同，还是文件本身在从 Dos 移动到 Unix 时会发生变化，因此实用程序 Dos 到 Unix。

为什么 Java 类文件可以从 Dos 移动到 Unix 并且不会改变？

什么是平台无关存储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T07:06:12.600

字节和字符的存储方式存在根本区别。看：

[http://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

有关各种字符集的描述以及它们在各种操作系统之间的差异（以及更多）。

Java Class 文件是二进制文件，并且总是以 Big Endian 存储。这意味着无论它们在什么操作系统之间移动，它们总是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T07:30:56.333

文件存储不是独立于操作系统的，即使内容可能相同，它的解释方式也不同。以防万一，多年前我不得不将（Business Basic）程序和数据从 Datageneral 小型机移植到 DOS。这些文件使用 8 位编码，必须先翻译（到 7 位），然后才能在 DOS 上“理解”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T07:55:20.093

简短的回答：这取决于。

文本文件在从 DOS 移动到 Unix 时不会自行更改：例如，尝试使用 USB 密钥移动它们。

使用第三方软件复制时，它们可能会发生变化：`ftp`具有处理文本转换的选项。

此外，这不仅取决于操作系统，还取决于文件系统。在 OS X 之前的 mac（HFS 文件系统）上，文件存储在两个分支上：数据和资源。当在没有分叉概念的文件系统上复制时，文件可以复制为包含数据和资源分叉的单个文件 (AppleSingle) 或两个单独目录中的两个文件 (AppleDouble)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T07:06:22.490

不，文件不会更改。只有用于编辑它们的约定。

可以改变的是用于编目和列出目录等的文件系统结构和元数据（即时间戳）。此外，文件自然会在加密的文件系统上加密，但文件系统的复杂性对于通过系统调用读取文件的应用程序几乎总是透明的（如果您正在编写分区调整大小或其他低级磁盘工具，它们将是相关的）。

澄清一下，Linux 操作系统中没有任何内容**需要**vim 或 emacs 才能使用 unix 约定。事实上，许多编辑器和应用程序都可以检测换行编码并进行调整。如何处理文件取决于软件，而不是操作系统。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T07:08:41.317

有两个区别：

## [换行符](http://en.wikipedia.org/wiki/Newline)

*   Unix：\n
*   X 之前的 Mac OS：\r
*   窗口：\r\n

## [小/大字节序](http://en.wikipedia.org/wiki/Endianness)

edianess 可能会有所不同，但这通常只对 unicode 和二进制数据有意义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-27T08:19:14.710

通常，文件系统将按照要求写入文件的方式存储文件。读取文件的程序将解释文件中的字节。

For example, in DOS (and Windows) the newline consists of two bytes, but on Unix it's only one byte. But this is only an standard. Programs on Unix can read files with two-byte newlines. These programs just need to know how what the newlines are.

# java - 让它漂亮：同时处理一个数组

> ID：914346
> 
> 赞同：3
> 
> 时间：2009-05-27T07:02:55.570
> 
> 标签：java, multithreading, concurrency

我想将此线性循环转换为并发循环：

```
for(Item item : ItemList) {
    processItem(item);
} 
```

这真的是最短的方法吗？

```
class Worker implements Runnable {
    Item item;
    Worker(Item item) {
        this.item = item;
    }
    public void Run() {
        processItem(item);
    }
}

ExecutorService exec = Executors.newFixedThreadPool(THREADPOOL_SIZE);
for(Item item : ItemList) {
    exec.execute(new Worker(item));
}
exec.shutdown();

boolean properFinish = false;
try {
    properFinish = exec.awaitTermination(50, TimeUnit.SECONDS);
} catch (InterruptedException e) { 
    Thread.currentThread().interrupt();
} 
```

具体来说，我想要一种使用匿名类的方法，但实际上，任何能让它更短、更易读的方法都会受到赞赏。

**更新：**刚刚意识到我有点愚蠢，因为在这个例子中使用匿名类很容易：

```
for(final Item item : ItemList) {
    exec.execute(new Runnable() {
        public void run() {
            processItem(item);
        }
    });
} 
```

在我的原始代码中，循环很简单`for (i=0; i<=ItemList.length(); i++)`，我想不出一种方法让 i 以任何有意义的方式结束。我想使用“for each”循环会使情况变得更好。

不过，有什么方法可以摆脱其余的样板文件？

**更新 2**：使用`ExecutorCompletionService`, 假设`processItem`返回结果。

```
ExecutorService exec = Executors.newFixedThreadPool(THREADPOOL_SIZE);
CompletionService<ResultType> ecs = new ExecutorCompletionService<ResultType>(executor);
for(final Item item : ItemList) {
    ecs.submit(new Callable<ResultType>() {
        public ResultType call() {
            return processItem(item);
        }
    });
}

for(Item item : item) {
    // Do whatever with the results
    ecs.take().get();
} 
```

这看起来确实更好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-27T07:07:32.597

查看 JDK 6 中的**ExecutorCompletionService** - 而不是自己旋转。它允许您为分配的任务执行多个线程，并在处理每个线程时获取其结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-07T21:23:56.797

如果您确实需要结果，并且希望它们与提交的顺序相同，那么可以执行以下操作：

```
List<Future<ResultType>> futures = new ArrayList<Future<ResultType>>();
for(final Item item : items) {
  futures.add(executor.submit(...))
}
List<ResultType> results = new ArrayList<ResultType>();
for(Future<ResultType> future : futures) {
  results.add(future.get());
}
return results; 
```

编辑：如果您要进行一些过度工程，则可以返回一个迭代器，而不是执行第二个循环（以便调用者可以在所有结果可用之前开始处理结果）：

```
return Iterators.transform(results, new Function<Future<ResultType>,ResultType>() {
   public ResultType apply(Future<ResultType> future) {
       return future.get();
   }
}) 
```

使用谷歌收藏库中的“迭代器”。另一种可能性是只返回 Futures 列表并让调用者进行等待。

# c++ - 库使用者是否可以覆盖 C++ 异常处理？

> ID：914351
> 
> 赞同：0
> 
> 时间：2009-05-27T07:03:53.803
> 
> 标签：c++, windows, exception, service, messagebox

我有一个 C++ DLL，代码如下：

```
LogMessage( "Hello world" );
try {
    throw new int;
} catch( int* e ) {
    LogMessage( "Caught exception" );
    delete e;
}
LogMessage( "Done" ); 
```

此 DLL 由某些第三方应用程序加载，并调用上面的代码。问题只是第一个`LogMessage`被调用——即使有一个异常处理程序控制流被转移到未知的。

我看到了这一点，无法确定这是要调查的一些晦涩的错误还是只是消费者应用程序的邪恶力量。

消费者应用程序真的有可能覆盖 DLL 中的 C++ 异常处理吗？

编辑：在考虑了答案中列出的所有要检查的事情后，问题得到了解决。在实际代码中，它不仅仅是*throw*，还有一个用于抛出异常的特殊函数，它在调试版本中调用 MessageBoxW() Win32 调用。并且消费者应用程序在显示消息框（它是一个 NT 服务）时遇到了麻烦，并且有效地挂断了。因此，以任何方式处理 C++ 异常都不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T07:18:58.350

代码没问题。我用这个函数执行它：

```
void LogMessage( char* s )
{
  cout << s << endl;
} 
```

并得到正确的输出：

> 你好世界
> 
> 捕获异常
> 
> 完毕

*您的LogMessage*功能是否可能存在问题？

我建议调查（通过调试器或添加调试打印），您的流程是否到达 try 块，以及它是否到达 catch 块。

不是问题，仍然不清楚，你通过抛出一个指针而不是一个值来实现什么。我建议不要使用 catch-by-pointer，请参阅C++-FAQ-lite 中[的推理。](http://www.parashift.com/c++-faq-lite/exceptions.html#faq-17.8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T07:30:03.667

该代码对我来说看起来不错，但我很想在其中添加更多的 catch 子句，看看它是否会碰到其他的一个。也就是说，我会输入：

 `````
  catch (const std::exception &ex) {
    ... log exception ...
  }
  catch (...) {
    ... log exception ..
  }

````  `我希望它会命中指针捕获（即使这真的不是一个好主意，请参阅 Igor Oks 提供的链接）或 std::exception 以防它无法分配内存。也就是说，它应该命中三个 catch 子句之一，因此异常无法逃脱 DLL。

我还将抛出的对象更改为值类型（即使它是 int）并相应地更新 catch 子句以查看是否以这种方式改变了行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T07:44:48.553

首先，请检查`LogMessage`调用是否刷新输出（使用`<< endl`）。

虽然牵强，但新调用是否有可能引发异常（内存不足）？我认为这是不出现新例外的一个原因（只是为了补充伊戈尔所说的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T07:47:24.337

代码看起来没问题。但是你能在抛出结构化异常之前检查是否有任何未处理的异常`throw new int;`。

```
LogMessage( "Hello world" );
try {

     //some unhandled exception here 

    throw new int;
} catch( int* e ) {
    LogMessage( "Caught exception" );
    delete e;
}
LogMessage( "Done" ); 
```

如果是这种情况，那么您可以使用[SetUnhandledExceptionFilter](http://msdn.microsoft.com/en-us/library/ms680634.aspx)函数进行检查。

如果 DLL 已经提供了一个未处理的异常过滤器并且如果它返回，`EXCEPTION_EXECUTE_HANDLER`那么您的异常处理程序将不会被调用。

您需要使用[`_set_se_translator`](http://msdn.microsoft.com/en-us/library/5z4bw5h5(VS.80).aspx)将 win32 异常转换为 c++ 结构化异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-28T11:24:02.450

赠品实际上在编辑中。“MessageBoxW() ... NT 服务 ... 有效地挂断了。”。这是一个公平的描述。消息框位于未与登录用户关联的桌面上。因此，它仍然存在，等待永远不会发生的鼠标点击。

# sharepoint-2007 - 计算字段不适用于文档中的示例

> ID：914357
> 
> 赞同：1
> 
> 时间：2009-05-27T07:06:56.983
> 
> 标签：sharepoint-2007, wss-3.0

例如，我尝试了以下[文档](http://office.microsoft.com/en-us/sharepointtechnology/HA101054791033.aspx?pid=CH100650061033)中的示例：

```
=TEXT(WEEKDAY([Column1]), "dddd") 
```

但它不会起作用。异常表示 UpdateField 方法存在语法错误。好吧，我用适当的（本地化）列值替换了 Column1，甚至尝试了常量值。

我可以使用其他功能，例如 YEAR、MONTH，但不能使用 CHOOSE 或 TEXT。我可以用任何一个来实现我的目标，但没有一个有效。（我想按年对列表项进行分组）。

我有一个本地化的（嗯，带有语言包。SP2 语言包）MOSS2007 SP2。

PS 我检查了当我创建一个英文版网站时，我可以使用公式，但不能使用官方本地化的公式。有人有解决方法吗？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-11T09:31:36.917

使用语言包时，您需要将运算符翻译成您自己的语言。我在运行荷兰语语言包时遇到了同样的问题。

文档很难找到，您必须在 google 中搜索您自己的语言以获取“计算列公式的示例”

例如，这里是荷兰文档的链接

[荷兰语 Office Online 文章](http://office.microsoft.com/nl-nl/sharepointtechnology/HA101215881043.aspx?pid=CH100650061043)

这是英文版：

[Office Online 英文文章](http://office.microsoft.com/en-us/sharepointtechnology/HA101054791033.aspx?pid=CH100650061033)

PS 即使是正确的语言也不总是有效。一种解决方法是尝试将计算的列创建为站点列，以某种方式它在那里工作得更好，Sharepoint 将为您传输.....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-12-09T10:43:56.227

终于有办法了！

在特征中定义您的计算字段！我不知道 LCID="1033" 在这里是否有帮助，但我从我在英文版网站上创建的字段中复制了架构（计算字段工作的地方......）。

```
<Field Type="Calculated" DisplayName="Hours" Format="DateTime" LCID="1033" ResultType="Number" ReadOnly="TRUE" ID="{49820FB0-705D-4335-AA1F-EF6616D05F59}" StaticName="Hours" Name="Hours" Required="FALSE" Percentage="FALSE" Decimals="2">
    <Formula>=IF(ISBLANK(CheckoutTime),0,TEXT(CheckoutTime-CheckinTime,"[s]")/3600)</Formula>
    <FieldRefs>
      <FieldRef Name="CheckinTime" />
      <FieldRef Name="CheckoutTime" />
    </FieldRefs>
  </Field> 
```

# wpf - WPF 中的启动 URL

> ID：914360
> 
> 赞同：0
> 
> 时间：2009-05-27T07:07:37.277
> 
> 标签：wpf, startup

我对 WPF 中的 StartUp Url 有疑问。我有一个 LoginView.xaml 和 MainWindow.xaml。我想首先打开 LoginView，然后自动打开 MainWindow。

应用程序.xaml

```
<Application x:Class="XXX.App"
    xmlns="....."            
    Startup="App_Startup" 
    > 
```

应用程序.xaml.cs

/

```
// <summary>
    /// Called when the application starts.
    /// </summary>
    private void App_Startup(object sender, StartupEventArgs e)
    {
        LoginView frmLogin = new LoginView();
        bool? resultScreen = frmLogin.ShowDialog();
        if (frmLogin.ShowDialog())
        {
            Uri uri = new Uri("pack:/MainWindow.xaml", UriKind.RelativeOrAbsolute);
            Application.Current.StartupUri = uri;
        }
        else
        {
            Application.Current.Shutdown();
        }
    } 
```

LoginView 窗口正常打开，之后什么也没发生，应用程序关闭。

我尝试了另一种方法，但我得到了相同的结果。

应用程序.xaml

```
<Application x:Class="XXX.App"
    xmlns="....."            
    Startup="App_Startup" 
    > 
```

应用程序.xaml.cs

```
/// <summary>
    /// Called when the application starts.
    /// </summary>
    private void App_Startup(object sender, StartupEventArgs e)
    {
        LoginView frmLogin = new LoginView();
        bool? resultScreen = frmLogin.ShowDialog();
        if frmLogin.ShowDialog())
        {
            MainWindow frmMainWindow = new MainWindow();
            frmMainWindow.ShowDialog();
        }
        else
        {
            Application.Current.Shutdown();
        }
    } 
```

谁能告诉我，我怎样才能得到想要的结果？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T09:54:37.700

我再次自己找到了我的问题的解决方案:) 这里是解决方案

[http://www.ageektrapped.com/blog/the-wpf-application-class-overview-and-gotcha/](http://www.ageektrapped.com/blog/the-wpf-application-class-overview-and-gotcha/)

# php - 如何避免“没有这样的文件或目录”警告消息

> ID：914368
> 
> 赞同：1
> 
> 时间：2009-05-27T07:13:45.987
> 
> 标签：php, file-io, error-handling

最近我在需要重命名图片的项目中工作。问题是当我重命名它重命名的图片但显示如下警告消息时

> 警告：重命名（seeker/SeekerPhoto/katr.jpg,seeker/SeekerPhoto/ussl.jpg）[function.rename]：第 100 行的 /subdomains/www/html/ussl/job/insphoto.php 中没有这样的文件或目录

我怎样才能避免这个警告信息。这意味着无论警告是什么，它都会执行下一个任务。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-27T07:26:18.213

您可以在重命名文件之前对参数进行一些测试。

```
if ( !file_exists($oldfile) || !is_readable($oldfile) ) {
  // some error handling here
}
else {
  $b = rename($oldfile, $newfile);
}
```

编辑：与其他答案相比，我没想到这个答案会得到那么多的支持。请注意评论。在此处提前测试所有可能导致警告消息的条件非常困难/几乎不可能。在文件系统上做任何你想做的测试，当你执行实际操作时它可能会失败。测试表字段、权限或您想要的任何内容，但您的 sql 查询仍然可能失败（例如 2006-MySQL 服务器已消失，随时可能发生）。依此类推。不过，您可以测试参数以找出更可能的原因，并让脚本“优雅地”处理这些错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-27T07:19:42.063

您可以使用[@ 运算符](http://us.php.net/manual/en/language.operators.errorcontrol.php)，它会抑制单个语句的错误消息。

```
@rename($oldFileName, $newFileName); 
```

[`error_reporting`](http://us.php.net/manual/en/function.error-reporting.php)或者，如果您想抑制多个语句的警告，您可以减小该值：

```
$oldErrorReportingValue = error_reporting(0);
rename($oldFileName, $newFileName);
# do something else ....
error_reporting($oldErrorReportingValue); 
```

请注意，出现警告是有原因的。最好的方法是查看操作生成警告的*原因*并注意您的代码可以处理这些情况。作为最后的手段，您应该只忽略警告。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-27T07:46:43.667

一起使用的两件事应该最好地为您服务：

1.  [`error_reporting()`](http://www.php.net/error_reporting)
2.  [`ini_set( 'display_errors', (boolean)showInBrowser )`](http://www.php.net/ini_set)

用于`error_reporting()`为警告消息设置适当的详细级别。请注意，仅设置记录哪些警告、通知和/或错误，而不设置是否显示。

在你的情况下可能是“ `error_reporting( E_ERROR | E_USER_ERROR )`;” 如果它实际上是一个错误，它只会记录一些东西，而不仅仅是一个不会真正破坏任何东西的通知或警告。

总而言之，做这样的事情可能是个好主意：

```
if (getenv('PHP_DEBUG')=='1')
{
    error_reporting( E_ERROR | E_USER_ERROR );
    ini_set( 'display_errors', true );
}
else
{
    error_reporting( E_ERROR | E_USER_ERROR );
    ini_set( 'display_errors', false );
} 
```

然后在开发服务器上，您的 .htaccess 或 VirtualHost 指令中可以包含以下行：

```
SetEnv PHP_DEBUG=1 
```

因为 not set ≠ 1，所以在生产中根本不需要设置它。

附带说明一下，我个人更喜欢将我的 error_reporting 设置为：

```
error_reporting( E_ALL | E_STRICT ); 
```

您可以用英语将其读为“警告我可能做错的所有事情，以迫使我做得更好”，因为我觉得如果我可以通过在使用之前检查一些内容并初始化来击败所有通知和警告变量正确，最终结果可能至少会更安全一些。

**编辑**：一些澄清：

由于 Arif 没有要求确保操作成功，只是为了没有收到消息。我将其解释为“不在乎操作是否有效”。当然，更好的方法是对您的函数库进行以下操作：

```
/**
 * @author: Kris
 * @license: see http://sam.zoy.org/wtfpl/
 *
 * PLEASE NOTE THAT THE FOLLOWING CODE IS TESTED BY ME, NOT QUALITY ASSURANCE
 */

/**
 * Move a file
 *
 * If uses filename from $source if $destination is a directory
 * 
 * @param string $source
 * @param string $destination
 * @param bool $overwrite
 * @return bool
 */
function my_move_file( $source, $destination, $overwrite = false )
{
    return _internal_my_move_or_copy_file( $source, $destination, true, $overwrite );
}

/**
 * Copy a file
 * 
 * If uses filename from $source if $destination is a directory
 * 
 * @param string $source
 * @param string $destination
 * @param bool $overwrite
 * @return bool
 */
function my_copy_file( $source, $destination, $overwrite = false )
{
    return _internal_my_move_or_copy_file( $source, $destination, false, $overwrite );
}

define( '__internal_my_move_or_copy_file_e_error',  E_USER_ERROR );     // change to E_USER_NOTICE if not meant to be fatal
define( '__internal_my_move_or_copy_file_e_notice', E_USER_NOTICE );

/**
 * Should not be called by userland code, use my_move_file or my_copy_file instead
 *
 * one function to implement both move and copy because almost all of the required validations is identical.
 *
 * @param string $source
 * @param string $destination
 * @param bool $is_move
 * @param bool $overwrite
 * @return bool
 */
function _internal_my_move_or_copy_file( $source, $destination, $is_move, $overwrite )
{
// what we'll be returning
    $result = false;

    // input sanity checks
    if ( !is_string( $source ) || !is_callable( $source, '__toString' ) )
    {
        trigger_error( 
            "_internal_my_move_or_copy_file: expects \$source to be a string.", 
            __internal_my_move_or_copy_file_e_error );
        return false;
    }
    elseif ( !is_string( $destination ) || !is_callable( $destination, '__toString' ) )
    {
        trigger_error( 
            "_internal_my_move_or_copy_file: expects \$destination to be a string.", 
            __internal_my_move_or_copy_file_e_error );
        return false;
    }
    elseif ( ! is_bool( $is_move ) )
    {
        trigger_error( 
            "_internal_my_move_or_copy_file: expects \$is_move to be a bool.", 
            __internal_my_move_or_copy_file_e_error );
        return false;
    }
    elseif ( ! is_bool( $overwrite ) )
    {
        trigger_error( 
            "_internal_my_move_or_copy_file: expects \$overwrite to be a bool.", 
            __internal_my_move_or_copy_file_e_error );
        return false;
    }

    $action_word = $is_move ? 'move' : 'copy';

    if ( file_exists( $source ) && is_readable( $source ) )
    {
        $to = preg_split( '/\//', $destination, -1, PREG_SPLIT_NO_EMPTY );
        $destination = '/'.implode( '/', $to );

        if ( is_dir( $destination ) )
        {
        // make sure we don't accidentally allow ../ etc
            if ( in_array( '..', $to ) || in_array( '.', $to ) )
            {
                trigger_error( "my_{$action_word}_file: \$destination does not allow path traversion using /../ or /./", $e_error_code );
            }

            // make sure we have a filename on $destination
            if ( is_dir( $destination ) )
            {
            // user gave a directory but no filename so use the filename in $source
                $to[] = basename( $source );
                $destination = '/'.implode( '/', $to );
            }
        }

        if ( file_exists( $destination ) && is_writable( $destination ) )
        {
            if ( ! $overwrite )
            {
                trigger_error(
                    "my_{$action_word}_file: \$destination already exists and I am instructed not to overwrite.", 
                    __internal_my_move_or_copy_file_e_notice );
                return false;
            }
        }
        elseif ( is_dir( dirname( $destination ) ) || is_writable( dirname( $destination ) ) )
        {
        // we can write
        }
        else // all allowable situations are already passed
        {
            trigger_error( 
                "my_{$action_word}_file: $destination directory does not exist or cannot be written to.", 
                __internal_my_move_or_copy_file_e_error );
        }

        if ( $is_move )
        {
        // if we are going to move a file the source also needs to be writable
            if ( ! is_writable( $source ) )
            {
                trigger_error( 
                    "my_{$action_word}_file: Cannot {$action_word} \$source because it cannot be written.", 
                    __internal_my_move_or_copy_file_e_error );
            }

            $result = rename( $source, $destination );
        }
        else
        {
            $result = copy( $source, $destination );
        }

        // see if what php's built in function gave us is acceptible
        if ( $result === false )
        {
            trigger_error( 
                "my_{$action_word}_file: unexpected failure to {$action_word} \$source to \$destination.", 
                __internal_my_move_or_copy_file_e_error );
        }

        // postflight check if the work we did was successful
        if ( !file_exists( $destination ) )
        {
            trigger_error( 
                "my_{$action_word}_file: unexpected failure to {$action_word} \$destination does not exist after {$action_word} operation.", 
                __internal_my_move_or_copy_file_e_error );
        }
    }
    else // file does not exists or is unreadable 
    {
        trigger_error( 
            "my_{$action_word}_file: \$source \"$source\" does not exist or cannot be read.", 
            __internal_my_move_or_copy_file_e_error );
    }

    return $result; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T07:18:52.080

如果你的意思是你只想抑制警告，你可以使用@运算符

```
$file = @operation(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-08T14:40:07.003

你可以使用“ ***dispaly_errors*** ”

api在[这里](http://php.net/manual/en/errorfunc.configuration.php#ini.display-errors)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-27T07:26:14.830

您可以查看[ini_set](http://fr2.php.net/ini_set)方法的 PHP 手册以及[附录](http://fr2.php.net/manual/en/ini.list.php) ，您需要在 php 文件的顶部添加以下内容：

```
ini_set('display_errors','1'); 
```

# reporting-services - 已发布的 RDL 文件位于何处？

> ID：914370
> 
> 赞同：55
> 
> 时间：2009-05-27T07:14:56.000
> 
> 标签：reporting-services, reporting, rdl

发布 Reporting Services 报告时。实际的 .RDL 文件在服务器上的什么位置？

我可以通过浏览报表管理器重新下载 .RDL 文件吗？但是，此文件位于 Reporting Services 服务器的什么位置？

谢谢

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2009-05-27T07:17:13.953

它不是服务器上的文件。它作为 BLOB 存储在 ReportServer 数据库中。

（在 SSRS 2005 上准确的目录表中）

[扩展答案](https://stackoverflow.com/a/17991798/6868683)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2010-01-14T23:27:01.353

此页面显示如何使用 T-SQL 检索它

[http://mscrmuk.blogspot.com/2009/05/reading-rdl-definitions-directly-from.html](http://mscrmuk.blogspot.com/2009/05/reading-rdl-definitions-directly-from.html)

杰夫

**更新**：这是相关查询，以防该博客文章将来消失：

```
select convert(varchar(max), convert(varbinary(max), content))
from catalog
where content is not null 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-22T13:10:07.210

以下查询专门提供报告的 ​​blob

```
 SELECT Name, convert (varchar(max), convert (varbinary(max),[Content])) AS ReportRDL
 FROM [dbo].[Catalog] where TYPE =2 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-02-06T14:04:47.623

实现此目的的一种方法是在报表生成器中打开报表。然后单击文件->另存为，然后将其保存在所需位置。

另一种方式是，当您在 Internet Explorer 中打开报告 URL 时，将鼠标悬停在报告上时，您会看到一个下拉菜单，并且有一个下载报告的选项。

希望这可以帮助。

# database - 是否可以使用 NHibernate 创建数据库？

> ID：914371
> 
> 赞同：18
> 
> 时间：2009-05-27T07:15:42.723
> 
> 标签：database, nhibernate, fluent-nhibernate

我正在为我的 DAL 使用 NHibernate 和 FluentNHibernate。我也在使用`SchemaExport`and`SchemaUpdate`来创建和更新我的数据库模式。

我的问题是模式操作都需要数据库存在才能工作。我想以编程方式创建我的数据库并更新架构，因为可能有多个数据库，并且数据库的创建不仅仅是一次性操作。

我知道我可以通过在与主数据库的连接上执行创建数据库命令来手动执行此操作，但考虑到我以其他方式使用 NHibernate 进行所有数据库交互，这感觉不对。顺便说一句，我使用 SQLite 内存数据库进行单元测试，因此我编写的任何 sql 都必须知道我正在使用哪个数据库。

有没有办法让 NHibernate 为我创建我的数据库？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-27T07:36:06.857

如果您开始使用域模型开发应用程序，我认为使用 NHibernate 创建数据库很好。我的意思是 - 它可以让您了解您的数据库的外观。但总的来说 - 应该使用 sql 脚本。

我听说一些开发人员使用 NHibernate db generation 进行集成测试，他们动态创建轻量级 sqlite db。

如何使用 NHibernate 生成数据库？我就是这样做的：

```
 public static void InitSessionFactory()
    {
        var connectionString =
            ConfigurationManager
                .ConnectionStrings["MyConnectionString"]
                .ConnectionString;

        var cfgFromXml = new Configuration();
        cfgFromXml.Configure();

        var cfg = Fluently.Configure(cfgFromXml)
            .Database(MsSqlConfiguration.MsSql2005
                          .ConnectionString(x => x.Is(connectionString))
                          .UseReflectionOptimizer())
            .Mappings(x => x.FluentMappings
                               .AddFromAssemblyOf<NHibernateBootstrapper>())
            .ExposeConfiguration(BuildSchema);

        ObjectFactory.Inject(cfg.BuildSessionFactory());
    }

    private static void BuildSchema(Configuration config)
    {
        //Creates database structure
        //new SchemaExport(config)
        //   .Create(false, true);
    } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-27T08:28:26.563

不，NHibernate 不会为您创建数据库。创建数据库是您通常不希望即时完成的事情。它需要许多配置参数，这是非常特定于数据库的，甚至是特定于数据库版本的。

对于我们的产品，我编写了一个设置数据库的类。它用于安装程序、集成测试和数据库维护工具。

*   NHibernate 使用其配置创建连接。
*   我自己的实现创建了数据库。不同的方言有不同的实现。
*   NH 创建表和其他数据库对象
*   安装程序类创建初始数据

还有一种特殊情况，客户不想授予创建数据库的权限。然后我们希望他这样做并跳过这一部分。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-27T10:58:34.030

我们使用 SchemaExport 提供模式和 Nant 任务来删除和重新创建数据库。另一个 Nant 任务运行模式导出和数据加载代码，这些代码以 nunit 任务运行的集成测试的形式存在。这里有一个[样本](http://code.google.com/p/codecampserver/source/browse/trunk/nant.build)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T07:20:41.140

嗯，您确实可以使用您提到的 SchemaExport，但我认为 NHibernate 主要是一种弥合 OO 域模型和关系持久性存储之间差距的方法。也就是说，对我来说，NHibernate 的目的是在我的域模型中持久化和检索实体。

当你想做模式更新时，恕我直言，你不应该使用 NHibernate（如果可能的话），因为那不是 NHibernate 的目的；有一种名为 SQL 的“领域特定语言” :) 擅长做这些事情。

为了创建我的数据库并更新我的数据库模式，我使用了[Migrator.NET](https://github.com/migratordotnet/Migrator.NET)，它是一个框架，可以让您在指定需要完成的操作（创建表、添加列等）的地方编写 C# 类。 ..)。
这样做的好处是 Migrator.NET 还支持多个 DBMS，因此您最终不会编写特定于 DB 的 SQL 代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-27T08:12:31.993

看看[RhinoCommons](http://ayende.com/Wiki/Rhino+Commons.ashx)。在 Rhino.Commons.ForTesting 下，在[UnitOfWorkTestContextDbStrategy.cs](https://rhino-tools.svn.sourceforge.net/svnroot/rhino-tools/trunk/commons/Rhino.Commons.NHibernate/ForTesting/UnitOfWorkTestContextDbStrategy.cs)中，[Ayende](http://ayende.com/blog/)在那里完成了一些创建数据库的例程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-05-23T22:25:37.730

正如我在 java 中看到的那样，我自己正在寻找这个 - 类似的问题在这里：[Generate Database from NHibernate config files](https://stackoverflow.com/questions/432118/generate-database-from-nhibernate-config-files/)

# mysql - varchar 与 mediumtext

> ID：914372
> 
> 赞同：5
> 
> 时间：2009-05-27T07:16:22.020
> 
> 标签：mysql, text, varchar

我有一个网站，在 mysql 数据库中有大约 1000 个不同的字符串，用于显示我网站上的所有文本。字符串存储在数据库中的原因是因为我支持 2 种不同的语言，并且需要能够根据用户偏好（英语和中文）显示不同的语言

字符串的长度各不相同，其中 250 个可能太长而无法放入 varchar 中。

我即将实现这个数据库，但我不确定是否要使用适合 750 个字符串的 varchars 构建一个表，然后使用另一个使用 mediumtext 的表来存储剩余的 250 个较长的字符串。

varchar 和 mediumtext 之间的性能差异是否足以保证设置 2 个表的额外麻烦？或者您会建议只使用 1 个表格，所有内容都使用 mediumtext。

用户将无法搜索此数据，我正在使用 PHP 来显示数据。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-27T07:36:30.177

我建议使用 mediumtext 而不是将数据分成两个表。varchar 和 mediumtext 之间的性能差异足以保证您将 1000 条记录拆分为两个表。

正确索引的表应该可以很好地完成这项工作。

# c# - 简化代码的通用函数

> ID：914373
> 
> 赞同：0
> 
> 时间：2009-05-27T07:16:41.303
> 
> 标签：c#, generics

我有以下方法：

```
private JobCard PopulateObject(JobCard jc, DataRow dataRow)
{

    PropertyInfo[] proplist = jc.GetType().GetProperties();

    foreach (PropertyInfo propertyitem in proplist)
    {
        if (propertyitem.Name != "")
            if (propertyitem.PropertyType.BaseType.Namespace == "System")
            {
               propertyitem.SetValue(jc, dataRow[propertyitem.Name], null);                  
            }
            else
            {
                string typename = propertyitem.ToString().Replace("Pss.Common.Mia.", "");
                int i = typename.IndexOf("Base");
                typename = typename.Substring(0, i);
                Type type = propertyitem.PropertyType;

                switch (typename)
                {
                    case "Customer":
                        propertyitem.SetValue(jc, PopulateCustomerObject(propertyitem, dataRow, type), null);
                        break;
                    case "Meter":
                        propertyitem.SetValue(jc, PopulateMeterObject(propertyitem, dataRow, type), null);
                        break;
                    case "TimeSheet":
                        propertyitem.SetValue(jc, PopulateTimeSheetObject(propertyitem, dataRow, type), null);
                        break;
                }
            }
    }

    return jc;

} 
```

上面的方法调用这些：

```
 private Customer PopulateCustomerObject(object o, DataRow dataRow, Type type)
    {
            IDataStorable instance = (IDataStorable)AppDomain.CurrentDomain.CreateInstanceAndUnwrap(type.Assembly.FullName, type.FullName);
        PropertyInfo[] proplist = type.GetProperties(BindingFlags.Instance | BindingFlags.Public);

        Customer c = new Customer();

    Guid customerGuid = new Guid(dataRow["AddressId"].ToString());
    string view = ReflectionHelper.GetAttribute<DBObjectRetrieveAttribute>(type).View;

    string query = string.Format("select * from {0} where id = '{1}'", view, customerGuid);

    c = DataAccess.Retriever.Retrieve<Customer>(query);

    return c;
}

private Address PopulateAddressObject(object o, DataRow dataRow, Type type)
{
    IDataStorable instance = (IDataStorable)AppDomain.CurrentDomain.CreateInstanceAndUnwrap(type.Assembly.FullName, type.FullName);
    PropertyInfo[] proplist = type.GetProperties(BindingFlags.Instance | BindingFlags.Public);

    Address a = new Address();

    Guid AddressGuid = new Guid(dataRow["PhysicalAddressId"].ToString());
    string view = ReflectionHelper.GetAttribute<DBObjectRetrieveAttribute>(type).View;

    string query = string.Format("select * from {0} where id = '{1}'", view, AddressGuid);

    a = DataAccess.Retriever.Retrieve<Address>(query);
    return a;
}

private Meter PopulateMeterObject(object o, DataRow dataRow, Type type)
{

    IDataStorable instance = (IDataStorable)AppDomain.CurrentDomain.CreateInstanceAndUnwrap(type.Assembly.FullName, type.FullName);
    PropertyInfo[] proplist = type.GetProperties(BindingFlags.Instance | BindingFlags.Public);

    Meter m = new Meter();

    Guid meterGuid = new Guid(dataRow["MeterId"].ToString());
    string view = ReflectionHelper.GetAttribute<DBObjectRetrieveAttribute>(type).View;

    string query = string.Format("select * from {0} where id = '{1}'", view, meterGuid);

    m = DataAccess.Retriever.Retrieve<Meter>(query);
    return m;
} 
```

我可以看到最好用1个通用方法代替，但是如何？

没看懂怎么换

```
Customer c = new Customer();
Address a = new Address();
Meter m = new Meter();
TimeSheet t = new TimeSheet(); 
```

有 1 条通用线，还有

```
c = DataAccess.Retriever.Retrieve<Customer>(query);
a = DataAccess.Retriever.Retrieve<Address>(query);
m = DataAccess.Retriever.Retrieve<Meter>(query);
t = DataAccess.Retriever.Retrieve<TimeSheet>(query); 
```

我无法更改 Retriever.Retrieve。它被声明为

```
public static T Retrieve<T>(string query)
            where T : IDataStorable
        {
            return Retrieve<T>(query, new IDbDataParameter[0], string.Empty);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T07:34:45.687

这一切似乎有点晦涩和复杂，但要直接回答您的问题 - 为了通用化您的 PopulateAddressObject 函数，您可以执行以下操作：

```
private TPopulateAddressObject(object o, DataRow dataRow, Type type, string idColumnName) where T : IDataStorable, new()
{
    IDataStorable instance = (IDataStorable)AppDomain.CurrentDomain.CreateInstanceAndUnwrap(type.Assembly.FullName, type.FullName);
    PropertyInfo[] proplist = type.GetProperties(BindingFlags.Instance | BindingFlags.Public);

    T obj = new T();

    Guid id = new Guid(dataRow[idColumnName].ToString());
    string view = ReflectionHelper.GetAttribute<DBObjectRetrieveAttribute>(type).View;

    string query = string.Format("select * from {0} where id = '{1}'", view, id);

    obj = DataAccess.Retriever.Retrieve<T>(query);
    return obj;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T07:39:51.137

方法中有很多东西`Populate*`是你不使用的；例如，您实际上并没有使用您花费大量时间创建的对象...

如何向（保存映射列）添加`PrimaryKey`属性，例如：`[DBObjectRetrieveAttribute]``DataRow`

```
private static T Populate<T>(DataRow dataRow)
     where T : class, IDataStorable, new()
{
    DBObjectRetrieveAttribute ora =
        ReflectionHelper.GetAttribute<DBObjectRetrieveAttribute>(typeof(T));
    string view = ora.View;
    Guid pkid = new Guid(dataRow[ora.PrimaryKey].ToString());
    // beware SQL injection...
    string query = string.Format("select * from {0} where id = '{1}'",
         view, pkid);

    return DataAccess.Retriever.Retrieve<T>(query);
} 
```

那么就不需要切换不同的属性类型了；你可以使用`MakeGenericMethod`：

```
object obj = MethodInfo mtd = typeof(SomeType).GetMethod("Populate",
       BindingFlags.NonPublic | BindingFlags.Static)
     .MakeGenericMethod(propertyitem.PropertyType)
     .Invoke(null, new object[] {dataRow});
propertyitem.SetValue(jc, obj, null); 
```

或者; 将 id 作为参数传入：

```
private static T Populate<T>(DataRow dataRow, string primaryKey)
     where T : class, IDataStorable, new()
{
    ... snip
    Guid pkid = new Guid(dataRow[primaryKey].ToString());
    ... snip
} 
```

并执行以下操作：

```
object obj;
if(type == typeof(Customer)) {
    obj = Populate<Customer>(dataRow, "AddressId");
} else if (type == typeof(Meter)) {
    obj = Populate<Meter>(dataRow, "MeterId");
} else if (...etc...) {

} else {
    throw new InvalidOperationException("Type is not supported: " + type.Name);
}
propertyitem.SetValue(jc, obj, null); 
```

# javascript - YUI 日历：如何禁用下个月点击

> ID：914375
> 
> 赞同：0
> 
> 时间：2009-05-27T07:16:44.283
> 
> 标签：javascript, yui

在 YUI 日历标题中有改变当前月份的左/右箭头（链接）。我希望能够禁用此链接的点击事件。我尝试使用 changePageEvent() 但它发生在月份更改之后。YAHOO.util.Event.removeListener 似乎没有工作（也许我做错了）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T14:39:58.950

如果 changePageEvent() 触发得太晚，为什么不采取简单的方法呢？将以下内容添加到您的样式表中，按钮根本不会显示：

```
.yui-calendar .calnavleft, .yui-calendar .calnavright{ display:none; } 
```

如果这不是您想要的，您可以使用以下方法物理删除事件：

```
YAHOO.util.Event.removeListener(yourCalendarObject.linkLeft,'click');
YAHOO.util.Event.removeListener(yourCalendarObject.linkRight,'click'); 
```

但是，这些按钮仍然会出现，并且由于 YUI 在这些链接上使用了“#”的 href，因此您的页面将跳转到顶部。无论哪种方式，您都需要应用一些 CSS 来隐藏它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T15:42:49.183

您可能希望禁用“nextMonth click”，因为您实际上希望将输入限制在顶部的某个日期。如果是这样，您应该能够使用日历 API 设置最大日期值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-21T02:22:57.993

渲染日历后，您必须更改样式。

我做了以下操作，上一个和下一个按钮不再显示：

```
...

companyCalendar.render();

...

var Dom = YAHOO.util.Dom;
var navLeft = Dom.getElementsByClassName("calnavleft", "a", "companyCalendarContainer")[0];
var navRight = Dom.getElementsByClassName("calnavright", "a", "companyCalendarContainer")[0];

// hide the existing nav buttons
Dom.setAttribute(navLeft, "style", "display: none");
Dom.setAttribute(navRight, "style", "display: none"); 
```

# wcf - 获取 WCF 进度更新

> ID：914381
> 
> 赞同：1
> 
> 时间：2009-05-27T07:18:10.363
> 
> 标签：wcf, asp.net-ajax, asynchronous

我正在使用 AJAX.NET 调用 WCF 服务，并想知道以下是否可行。

例如，目前我有类似以下的内容

页面中的 AJAX.NET 调用..

```
ITeaMaker.MakeCupOfTea(onMakeCupOfTeaSuccess, onMakeCupOfTeaError); 
```

世博会..

```
public Tea MakeCupOfTea()
{
   FillKettle();
   BoilKettle();
   PutInTeaBag();
   PourWater();
   ...
} 
```

Web 服务进行调用，直到所有 MakeCupOfTea 都成功（或失败）后我才得到结果，是否有可能不需要我为 MakeCupOfTea 内部的每个方法单独调用 WCF 服务，我可以在我的 UI得到每个阶段的报告？我没有使用更新面板。

IE

灌装水壶....灌装

煮水壶....煮沸

放入茶包……完成

ETC...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T08:29:00.273

我自己从未使用过它，但您可能想尝试一个[WCF 双工服务](http://msdn.microsoft.com/en-us/library/ms731064.aspx)，它允许客户端和服务器相互发送消息。希望这将允许您执行您正在尝试的操作。

# python - 如何不区分大小写地计算纯文本文件中的唯一术语？

> ID：914382
> 
> 赞同：2
> 
> 时间：2009-05-27T07:18:15.637
> 
> 标签：python, perl, unix, count, awk

这可以是任何可能在典型的类 unix 系统上可用的高级语言（Python、Perl、awk、标准 unix utils {sort、uniq} 等）。希望它能够足够快地报告 2MB 文本文件的唯一术语总数。

我只需要它来进行快速的完整性检查，因此不需要精心设计。

请记住，不区分大小写。

非常感谢你们。

旁注：如果您使用 Python，请不要使用仅版本 3 的代码。我运行它的系统只有 2.4.4。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-27T07:38:23.917

在 Perl 中：

```
my %words; 
while (<>) { 
    map { $words{lc $_} = 1 } split /\s/); 
} 
print scalar keys %words, "\n"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-27T07:34:19.510

使用 bash/UNIX 命令：

```
sed -e 's/[[:space:]]\+/\n/g' $FILE | sort -fu | wc -l 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-27T07:19:54.450

在 Python 2.4 中（可能它也适用于早期系统）：

```
#! /usr/bin/python2.4
import sys
h = set()
for line in sys.stdin.xreadlines():
  for term in line.split():
    h.add(term)
print len(h) 
```

在 Perl 中：

```
$ perl -ne 'for (split(" ", $_)) { $H{$_} = 1 } END { print scalar(keys%H), "\n" }' <file.txt 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-27T07:34:47.933

仅使用标准 Unix 实用程序：

```
< somefile tr 'A-Z[:blank:][:punct:]' 'a-z\n' | sort | uniq -c 
```

如果您在没有 Gnu 的系统上`tr`，则需要将 " `[:blank:][:punct:]`" 替换为您希望将其视为单词分隔符的所有空格和标点字符的列表，而不是单词的一部分，例如，" `\t.,;`”。

如果您希望输出按频率降序排序，您可以`| sort -r -n`在其末尾附加“”。

请注意，这也会产生不相关的空白标记计数；如果您对此感到担忧，则`tr`可以使用 sed 过滤掉空行。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-27T09:55:37.293

这是一个 Perl 单行代码：

```
perl -lne '$h{lc $_}++ for split /[\s.,]+/; END{print scalar keys %h}' file.txt 
```

或者列出每个项目的计数：

```
perl -lne '$h{lc $_}++ for split /[\s.,]+/; END{printf "%-12s %d\n", $_, $h{$_} for sort keys %h}' file.txt 
```

这会尝试处理标点符号，以便“foo”。与“foo”一起计算，而“don't”被视为一个单词，但您可以调整正则表达式以满足您的需要。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-30T17:40:52.803

Python 中的较短版本：

```
print len(set(w.lower() for w in open('filename.dat').read().split())) 
```

将整个文件读入内存，使用空格将其拆分为单词，将每个单词转换为小写，从小写单词创建一个（唯一的）集合，对它们进行计数并打印输出。

也可以使用一个衬垫：

```
python -c "print len(set(w.lower() for w in open('filename.dat').read().split()))" 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-27T09:19:37.053

简单（52 次）：

```
perl -nE'@w{map lc,split/\W+/}=();END{say 0+keys%w}' 
```

对于较旧的 perl 版本（55 笔）：

```
perl -lne'@w{map lc,split/\W+/}=();END{print 0+keys%w}' 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-27T10:53:51.417

这是一个 awk oneliner。

```
$ gawk -v RS='[[:space:]]' 'NF&&!a[toupper($0)]++{i++}END{print i}' somefile 
```

*   “NF”的意思是“如果有一个角色”。
*   '!a[topuuer[$0]++]' 的意思是'只显示 uniq 单词'。

# endianness - 不同字节序有什么好处？

> ID：914394
> 
> 赞同：12
> 
> 时间：2009-05-27T07:21:21.093
> 
> 标签：endianness

为什么有些处理器制造商决定使用

*   小端
*   大端
*   中端
*   还有其他人吗？

?

我听说如果一个数字是负数还是正数，大端可以更快地找出，因为那个位是第一个。（这在现代 CPU 上无关紧要，因为无法再访问单个位。）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-27T07:38:56.053

小端序的好处是可以使用相同的地址以任意长度读取变量。

例如，可以将 32 位变量读取为 8 位或 16 位变量，而无需更改地址。如今，这可能带来的好处有限，但在汇编器和内存有限的时代，它可能是一个显着的优势

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-27T07:34:10.057

除了使用本机 CPU 字节序或处理指定的文件字节序之外，大字节序或小字节序没有特别的好处。

big endian 和 little endian 并存的原因是不同的 CPU 制造商使用不同的约定来表示多字节数据，并且当时没有标准出现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T07:26:48.307

使用 CPU 的字节顺序（无论大小）可以让您在算术上获得速度优势：您可以直接在内存中添加、减去等多字节整数。

在文件格式中使用预定义的、规定的字节序（无论大小）可以让您在任何系统上读取文件，而不管其他系统的 CPU 的字节序如何。具有正确字节序的系统可以更快地读取文件（如果正确编写和优化读取例程），但即使具有错误字节序的系统也可以读取它。通常，速度差异可以忽略不计（除了具有大量整数的非常大的文件），因此最好首先测量优化读取例程的最大可能速度增益。

某些文件格式（例如 TIFF）支持两种字节序。在这种情况下，最好使用 CPU 的字节序生成文件，假设文件将在同一台机器或类似机器上进行后处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-05-27T01:12:49.540

在 little endian 中，您不必费心更改地址，但在 big endian 中，您必须：[http://www.noveltheory.com/techpapers/endian.asp](http://www.noveltheory.com/techpapers/endian.asp)

我实际上不知道在现代 CPU 中，小端序是否比大端序有优势。我天真地认为切换地址会消耗 CPU 皮瓦的功率 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-16T19:56:08.463

某些操作受益于让某个值的一部分在另一部分之前可用。当添加两个太大而无法一次读取的无符号数或二进制补码数时，可以在高位可用之前计算结果的低位，但反之亦然，这意味着小端顺序在那里是有利的。访问串行闪存芯片时，行解码只能在定义行的所有位（通常除了最低有效位 8-12 位，具体取决于芯片）都可用时开始，这意味着大端顺序是有利的那里。

# flash - 插件/Flash 运行时如何在 IE 上工作

> ID：914397
> 
> 赞同：0
> 
> 时间：2009-05-27T07:23:01.870
> 
> 标签：flash, plugins, runtime

任何插件如何在网络浏览器上工作？

Flash 运行时是用哪种语言编写的？

插件是 IE 或任何网络浏览器的一部分，为什么它们不能进行系统调用？它们不是安全威胁吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T07:37:55.247

当然，他们使用 C++。

[使用 Visual Studio 2005 构建浏览器帮助程序对象](http://msdn.microsoft.com/en-us/library/bb250489.aspx)：*本文依靠 Microsoft Visual Studio 2005 和活动模板库 (ATL) 使用 C++ 开发 BHO。我们决定使用 ATL 是因为它方便地实现了一个基本样板，我们可以根据需要对其进行扩展。还有其他方法可以创建 BHO，例如使用 Microsoft 基础类 (MFC) 或 Win32 API 和 COM，但 ATL 是一个轻量级库，可以自动为我们处理很多细节，包括使用 BHO 设置注册表类标识符 (CLSID)。*

# c++ - Boost Fusion 文章、示例、教程？

> ID：914399
> 
> 赞同：27
> 
> 时间：2009-05-27T07:23:58.793
> 
> 标签：c++, templates, boost-fusion

您知道 boost::fusion 库使用的任何好的资源/文章/示例吗？

Boost Fusion 看起来非常有趣，我想我了解它的工作原理以及如何使用基础知识，但我正在寻找一些展示任何有趣用法/实践的资源，例如文章或博客（除了 boost.org 本身）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2011-07-10T13:18:49.320

我认为[johannes-schaub-litb 的评论](https://stackoverflow.com/users/34509/johannes-schaub-litb)应该是一个答案，因为我几乎忽略了它。

所以这里是： [约翰内斯的优秀例子](https://stackoverflow.com/questions/455904/print-information-in-test-mode-but-not-in-normal-execution/456184#456184)。

[Stackoverflow](https://stackoverflow.com/questions/tagged/boost-fusion)中还有其他一些示例。我特别喜欢[这里的第一个答案](https://stackoverflow.com/questions/6157584/boostspiritqi-how-to-turn-inlined-parser-expressions-into-standalone-grammar)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-30T14:14:15.623

[https://www.youtube.com/watch?v=6V73Q7ULFi0](https://www.youtube.com/watch?v=6V73Q7ULFi0)

Fusion 简介，但您可能更喜欢它而不是文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-08-24T02:11:50.620

似乎没有那么多关于使用的文章/帖子（当然除了实际的提升文档）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-28T18:19:14.543

这是我在尝试学习融合时发现的：

*   其作者之一的 boostcon 09 融合演示[的幻灯片](https://github.com/boostcon/2009_presentations/raw/master/thu/fusion.pdf)
*   [Michael Caisse 在 boostcon 13 上的演讲幻灯片](https://github.com/boostcon/cppnow_presentations_2013/blob/master/thu/solving_world_problems_with_fusion.pdf?raw=true)（NoSenseEtAl 提供了演讲录音的链接）

# javascript - 使用画布标签或创建一堆 什么更快？

> ID：914416
> 
> 赞同：1
> 
> 时间：2009-05-27T07:34:22.943
> 
> 标签：javascript, html

嘿，我有一个十六进制颜色数组，对于数组中的每种颜色，我想创建一个 80 像素乘 80 像素的正方形来表示该颜色。什么是更快的性能明智？

1：使用canvas标签遍历数组并使用fillStyle和fillRect()；

或者

2：遍历数组并创建一个div框并将div的背景颜色设置为数组中的当前颜色。

注意：我有 1034 种颜色，我打开了其他建议，但它必须是基于网络的，不能是 flash。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T07:36:50.613

我会使用 div，如果只是为了方便跨浏览器。

实际上，我会尝试用服务器端语言来做，然后缓存结果。客户是否需要与这些形状进行交互或对它们做任何使这无法选择的事情？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T07:52:41.020

我个人会选择画布（用于在 IE 中模拟 VML 的 excanvas.js 将完成这项工作）。出于简单和未来代码扩展的原因。

问题是，虽然具有本机画布实现的浏览器使用第一个选项会表现得更好，但 IE 使用 DIV 应该更快（第二个方法）。这是由于仿真实践，即动态创建 VML 元素（要创建的元素比仅 DIV 的方法所假设的要多）。

这只是一个推测:)，编写一些测试并进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T08:02:06.617

为了简单和快速，用 javascript 执行此`document.createElement('div')`操作（您无需下载 1034 个 HTML 标记块，它可以在任何地方使用）。

# sql-server-2005 - SQL Server 2005 中没有光标的循环

> ID：914417
> 
> 赞同：2
> 
> 时间：2009-05-27T07:34:27.997
> 
> 标签：sql-server-2005, tsql

我有一个像这样的表组织结构：

```
OrganisationID INT
ParentOrganisationID INT
OrganisationName VARCHAR(64)

1 | 0 | Company
2 | 1 | IT DIVISION 
3 | 2 | IT SYSTEM BUSINESS UNIT
4 | 1 | MARKETING DIVISION
5 | 4 | DONATION BUSINESS UNIT 
```

我想要一个查询，如果应用程序通过 let say`OrganisatinID = 1`意味着它将循环（查看父/子）直到该表的末尾并抓住所有可能的 Returned `OrganisatioIDs = (1, 2, 3, 4, 5)`。

其他如果通过`OrganisationID = 2`则返回`OrganisationID = (2, 3)`

其他如果通过`OrganisationID = 3` 则返回`OrganisationID = 3`

有什么想法可以在没有光标的情况下做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T07:49:41.557

您可以使用 SQL 2005 CTE 使 SQL 引擎以递归方式执行此操作。

基本方法的枚举位于[http://blogs.msdn.com/anthonybloesch/archive/2006/02/15/Hierarchies-in-SQL-Server-2005.aspx](http://blogs.msdn.com/anthonybloesch/archive/2006/02/15/Hierarchies-in-SQL-Server-2005.aspx)

Celko 也有一本关于 SQL 的树，其中涵盖了所有这些内容。

或者您可以通过将每个级别选择到本地表变量中然后循环，使用选择插入子级来强制它，直到您的@@ROWCOUNT 为零（即，您找不到更多的子级）。如果您没有大量数据，这很容易编写代码，但是您通过说您不想要游标来暗示您正在寻找性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-27T07:56:23.837

```
declare @rootID int;
select @rootID = 4;
with cte_anchor as (
    SELECT OrganisationID
        , ParentOrganisationID
        , OrganisationName
    FROM Organisation
    WHERE OrganisationID = @rootID)
, cte_recursive as (
    SELECT OrganisationID
        , ParentOrganisationID
        , OrganisationName
    FROM cte_anchor
    UNION ALL
    SELECT o.OrganisationID
        , o.ParentOrganisationID
        , o.OrganisationName
    FROM Organisation o JOIN cte_recursive r
        ON o.ParentOrganisationID = r.OrganisationID)
SELECT * FROM cte_recursive 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T07:58:24.533

使用普通的简单蛮力尝试 3 个级别 - 您可以根据需要添加级别。

> ```
> SELECT DISTINCT OrganizationID  
> FROM  
> (  
>     SELECT
>     ParentOrganizationID  
>     FROM OrganizationStructure  
>     WHERE ParentOrganizationID = @arg 
> ```

```
 UNION ALL  

    SELECT  
    OrganizationID  
    FROM OrganizationStructure  
    WHERE ParentOrganizationID = @arg  

    UNION ALL

    SELECT os2.OrganizationID  
    FROM OrganizationStructure os  
    JOIN OrganizationStructure os2 ON os.OrganizationID = is2.ParentOrganizationID  
    WHERE os.ParentOrganizationID = @arg   
) data 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T08:09:44.480

我相信这个问题已经得到了很好的回答，但是如果您对构建数据以获得更好效果的替代方法感兴趣，请在谷歌上搜索“使用分层数据的进化方式”，我还不允许发布链接:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-27T07:49:11.010

[在具有公用表表达式](http://msdn.microsoft.com/en-us/library/ms190766.aspx)的SqlServer 2005中，可以进行递归查询。有关示例，请参阅来自 4guysfromrolla[的 SQL Server 2005 中公用表表达式 (CTE) 中的“递归公用表表达式”。](http://www.4guysfromrolla.com/webtech/071906-1.shtml)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-27T07:49:52.007

你的父子结构能深多少级？

您可以在表格上进行自联接以排列祖父母/父母/子实体，但这受到您的父/子关系可以深入的级别数量的限制。

我知道您已经声明了 SQL 2005，但是您知道这种树结构映射正是 Sql 2008 中新的[HierarchyID](http://blogs.msdn.com/simonince/archive/2008/10/17/hierarchies-with-hierarchyid-in-sql-2008.aspx)（[视频在这里](http://wm.microsoft.com/ms/inetpub/sql2008/HierarchyId.wmv)）的用途。

# java - NetBeans gui 设计工具 (matisse) 似乎使用 Java 5 而不是 Java 6

> ID：914421
> 
> 赞同：0
> 
> 时间：2009-05-27T07:35:21.180
> 
> 标签：java, swing, netbeans, netbeans6.5, java-6

尝试在 NetBeans GUI 设计工具中打开自定义 JPanel 类时，出现以下错误：

警告 - 表单加载错误

加载组件属性时出错：[JPanel]->someScrollPane->somePlainJTable->autoCreateRowSorter 组件中不存在此类属性。

违规代码：

```
somePlainJTable.setAutoCreateRowSorter(true); 
```

在 maven pom 中：

```
<configuration>
    <source>1.6</source>
    <target>1.6</target>
</configuration> 
```

[javadocs 说：](http://java.sun.com/javase/6/docs/api/javax/swing/JTable.html)它在 1.6 中可用。

源代码编辑器也没有错误。

对我来说，GUI 编辑器似乎出于某种原因正在使用源代码级别 1.5。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-29T14:48:06.627

另一个可能的答案：

*   在“工具 | 选项 | 高级选项 | 选项 | 编辑 | GUI Builder' ，将 'Layout Generation' 样式设置为 'Standard Java 6 Code'。
*   确保“Swing Layout Extensions”库不是项目的一部分（从而确保它不会被打包到最终的应用程序 jar 文件中）。

这通常会影响使用哪个版本的 GroupLayout（即 1.5 JDesktop 版本或 JDK 1.6 版本）。但是，我已经多次看到这会影响其他非布局选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T15:19:43.003

这听起来像您的 Netbeans ISDE 使用的是 1.5 而不是 1.6。由于项目 JDK 与 IDE JRE 分离，因此您可以在较旧的 JDK 下运行 Netbeans 并为较新的 JDK 进行开发。

尝试这个：

打开`NETBEANS_INSTALL_DIR\etc\netbeans.conf`.

修改行：`netbeans_jdkhome="path_to_jdk"`

指向 JDK 1.6 安装。

# matrix - 计算 X = A - inv(B) * Y * inv(B) 和 X = Y + A' * inv(B) * A 的可能方法

> ID：914422
> 
> 赞同：1
> 
> 时间：2009-05-27T07:35:24.063
> 
> 标签：matrix, inversion

我有两个问题。我必须计算两个方程：

X = A - inv(B) * Y * inv(B)

和

X = Y + A' * inv(B) * A

其中，A、B 和 Y 是已知的 p*p 矩阵（p 可以小或大，视情况而定）。矩阵非常密集，没有任何结构（当然 B 是非奇异的）。

是否可以在不反转矩阵 B 的情况下求解这些方程中的 X？我必须计算这些方程 n 次，n 是数百或数千，并且所有矩阵都会随着时间而变化。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-06-17T00:27:35.950

如果您可以用以下术语表达对矩阵 B 的更新：

```
Bnew = B + u*s*v 
```

`inv(B)`那么您可以使用 Sherman-Morrison-Woodbury 公式明确表示更新：

```
inv(B + u*s*v) = inv(B) - inv(B)*u*inv(s + v*inv(B)*u)*v*inv(B) 
```

如果 u 和 v 是向量（分别是列和行）并且 s 是标量，那么这个表达式可以简化：

```
inv(B + u*s*v) = inv(B) - inv(B)*u*v*inv(B)/(s + v*inv(B)*u) 
```

您只需计算`inv(B)`一次，然后在它发生变化时更新它而无需额外的反转。

最好不要计算完整的逆，只是在 y 和 (ynew - y) 或 a 和 (anew - a) 上进行简单的“矩阵除法”，具体取决于问题中“n”相对于“p”的大小.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-18T15:47:17.027

Memo-ize inv(B)，即只在 B 变化时反转，并保持反转。

如果对 B 的更改很小，则可能您可以使用增量近似值。

# language-agnostic - 待机和休眠期间会发生什么？

> ID：914426
> 
> 赞同：8
> 
> 时间：2009-05-27T07:36:50.223
> 
> 标签：language-agnostic, operating-system

前几天它刚刚击中了我。当我告诉计算机进入待机或休眠状态时，实际上会发生什么？

更具体地说，它对正在运行的代码有什么影响（如果有的话）？例如，如果应用程序正在压缩某些文件、编码视频文件、检查电子邮件、运行数据库查询、生成报告或只是处理大量数据或做复杂的数学运算。发生什么了？你能在你的视频中发现一个错误吗？数据库查询会失败吗？数据处理最终会包含错误吗？

我问这个既是出于普遍的好奇心，也是因为我开始怀疑这是否是我在自己编程时应该考虑的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-27T07:45:46.413

您应该记住，操作系统（调度程序）每秒冻结您的程序大约数十亿次。这意味着当操作系统冻结它时，您的程序已经可以很好地运行。从您的角度来看，待机、休眠和上下文切换之间没有太大区别。

不同的是，你会被冻结很长时间。这是你唯一需要考虑的事情。在大多数情况下，这应该不是问题。

如果您有网络连接，您可能需要重新建立它，以及类似的问题。但这只是意味着检查所有 IO 操作中的错误，我相信你已经在做... :-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-27T07:48:15.100

我最初的想法是，只要您的程序及其生态系统包含在正在待机或休眠的 PC 中，那么在恢复时您的程序不应该受到影响。

但是，如果您说更新托管在单独机器上的某个数据库中的记录，那么休眠/待机将被视为超时。

如果您的程序依赖于“电源状态”的这种变化，您可以收听[msdn上提到的 WM_POWERBROADCAST 消息](http://msdn.microsoft.com/en-us/library/aa373247.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-27T07:40:02.277

**Stand-By**通过将其保存在 RAM 中来保持您的“状态”。因此，如果您断电，您将失去存储的“状态”。

但它可以更快地实现。

**休眠**将您的“状态”存储在硬盘上的虚拟 RAM 中，因此如果您断电，您仍然可以在三天后回来。但它更慢。

我想 Stand-By 的一个限制是你有多少 RAM，但我确信 Stand-By 在标准 RAM 用完时必须使用虚拟 RAM。不过我会查一下然后回来！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T07:47:18.113

[关于ACPI](http://en.wikipedia.org/wiki/Advanced_Configuration_and_Power_Interface)的 Wikipedia 文章包含有关现代 PC 中存在的不同省电模式的详细信息。

从我对事物的理解来看，这是基本思想：

基本思想是保持系统的当前状态持久化，因此当机器重新运行时，它可以恢复到机器进入睡眠/待机/休眠等之前的状态。可以把它想象成为您的 PC 序列化。

在待机状态下，计算机将继续为 RAM 供电，因为主存储器是[易失性存储器](http://en.wikipedia.org/wiki/Volatile_memory)，需要不断[刷新](http://en.wikipedia.org/wiki/Memory_refresh)才能保持其状态。这意味着可以关闭硬盘驱动器、CPU 和其他组件，只要有足够的电量来保持 DRAM 刷新以防止其内容消失。

在休眠状态下，主存储器也会被关闭，因此在关闭系统电源之前，必须将内容复制到永久存储器，例如硬盘驱动器。除此之外，休眠的基本前提与待机没有什么不同——存储机器的当前状态以便以后恢复。

考虑到这一点，进入待机或休眠状态可能不太可能导致当前正在执行的任务出现问题。但是，允许网络活动在执行过程中停止可能不是一个好主意，因为根据协议，您的网络连接可能会超时并且在系统返回其运行状态时无法恢复。

此外，可能有一些机器只有不稳定的节能驱动程序，这可能会导致它进入待机状态并且永远不会回来，但这是完全不同的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T07:50:20.087

对您的代码有一些影响。休眠不仅仅是调度程序的上下文切换。网络连接将关闭，网络驱动器或可移动媒体可能会在休眠期间断开连接，...

我认为您的应用程序不会收到休眠通知（但我可能错了）。您应该做的是尽可能优雅地处理错误情况（例如网络连接丢失）。请注意，这些错误情况也可能发生在正常操作期间，而不仅仅是在进入休眠状态时......

# ruby - Ruby 哈希的括号语法

> ID：914432
> 
> 赞同：3
> 
> 时间：2009-05-27T07:38:41.157
> 
> 标签：ruby, syntax, hash

这两个语句是否将相同类型的参数（哈希）传递给新方法？

```
@seat = Seat.new(:flight_id => @flight.id)

@seat = Seat.new({:flight_id => @flight.id}) 
```

哈希括号 {} 在第二个示例中是否改变了任何内容？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-27T07:41:55.987

它们都是相同的，{} 在第二个参数中不添加任何内容，除了使事情变得比以前更明确（使用 => 语法足以对使用任何长度的 ruby​​ 的任何人说“这是一个哈希”时间）。

Ruby 会自动打开一个参数列表，例如：

```
someFunction(:arg1 => value1, :arg2 => value2) 
```

成一个散列并将它作为一个参数传递给你。需要在散列周围添加 {} 的时候是当您有诸如散列散列或需要两个散列的函数（例如当您需要同时传递选项和 html_options 时的几个 rails 方法）时，如下所示：

```
someFunction({:arg1 => value1, :arg2 => value2}, {:arg3 => value3}) 
```

它将传入两个散列（如果留给它自己，解释器将无法推断出 2 个散列被拆分的位置，因此您需要给它 {} 来告诉它在这种情况下要做什么）

更多信息可在 Pickaxe 书籍章节：底部收集哈希参数部分中的有关[方法的更多信息中找到。](http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_methods.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T04:45:30.217

这似乎是提及另一种替代语法的好地方，使用逗号分隔大括号内的项目（使用您的示例）：

```
@seat = Seat.new({:flight_id, @flight.id}) 
```

我通常不在标准代码中使用逗号语法——就像 workmad3 说的那样，箭头 (=>) 使散列更加明显。但在交互式 Ruby 会话 (irb) 中，输入逗号比输入箭头更容易：

```
{:eyes, "blue", :height, 6.2}  # => {:height=>6.2, :eyes=>"blue"} 
```

在 Ruby 1.9 中，惯用版本的逗号更少：

```
{eyes: "blue", height: 6.2} 
```

# java - Tomcat 无法识别我的上下文

> ID：914436
> 
> 赞同：2
> 
> 时间：2009-05-27T07:41:33.677
> 
> 标签：java, tomcat, contextpath

我有一个 Web 应用程序并在打开的 SUSE 上使用 tomcat-5.5.27、eclipse 3.4。我从 Eclipse 中使用它（部署、运行、调试等）。我必须设置一些 JNDI 资源（数据源），Tomcat 会公开它们。这些资源现在在 \META-INF\context.xml 中定义。这工作正常。

但是，当我在 tomcat-5.5.27/conf/context.xml 或 tomcat-5.5.27/conf/Catalina/localhost/myapp.xml 中移动这个文件（context.xml）时，它不会加载定义在文件。

可能是什么问题？

我的 context.xml：

```
<Context path="/myapp" docBase="/myapp" debug="5" reloadable="true" crossContext="true">

<Resource name="jndi_name" auth="Container"   
    type="javax.sql.DataSource"         
    factory="org.apache.commons.dbcp.BasicDataSourceFactory"            
    driverClassName="COM.ibm.db2.jdbc.app.DB2Driver"
    url="jdbc:path_to_db"
    username="username"
    password="password" 
    validationQuery="SELECT 1 FROM SYSIBM.SYSDUMMY1"               
    defaultTransactionIsolation="READ_COMMITTED"
    removeAbandoned="true" logAbandoned="true" >
</Context> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-04T11:08:02.513

你的网络应用程序存储在哪里？它是自己的文件夹还是在 webapps 下？检查您的 docBase 是否有效，如果您的应用在 webapps 下，我认为您不需要“/”

Tomcat日志中的任何相关信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T23:24:14.067

启动时tomcat日志显示什么？

该标签未关闭，请检查您是否将其复制到正确的问题中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T14:48:00.697

如果您使用 Eclipse 中的 Web 工具项目功能来管理您的 Tomcat 实例，您需要知道它确实会更改 Tomcat 基本目录。

尝试使用单独的 Tomcat 安装，看看是否有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-20T13:19:29.533

在服务器视图中打开 tomcat 服务器，修改超时等任何内容，保存它，您的上下文将被识别。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-30T00:10:37.003

当 tomcat 加载 JDBC 驱动程序时（即在加载您的 web 应用程序之前），这可能是一个类路径问题。

您在 tomcat-5.5.27/common/lib 中有 DB2 驱动程序的 JAR 文件吗？它必须在那里，类加载器才能找到它，而不是在您的 web 应用程序的 WEB-INF/lib 目录中。

# c++ - 麻将纸牌求解算法，需要加速

> ID：914442
> 
> 赞同：1
> 
> 时间：2009-05-27T07:45:16.760
> 
> 标签：c++, algorithm, mahjong

我正在开发一个麻将纸牌解算器，到目前为止，我做得很好。但是，它并没有我希望的那么快，所以我要求你们可能知道的任何其他优化技术。

所有的瓦片都是从布局中知道的，但解决方案不是。目前，我几乎没有规则可以保证安全移除某些相同的瓷砖对（这不会成为可能的解决方案的障碍）。

为清楚起见，当可以随时拾取瓷砖并且瓷砖松动时，当它根本不绑定任何其他瓷砖时，它是免费的。

*   如果有四个免费的免费瓷砖可用，请立即删除它们。
*   如果可以拾取三块瓷砖，并且其中至少有一个是松散的，则移除非松散的。
*   如果可以拾取三张牌，而只有一张免费牌（两张松动），则移除免费和一张随机松动的牌。
*   如果有三个松散的瓷砖可用，请移除其中的两个（无论哪个都无所谓）。
*   由于有四次完全相同的瓷砖，如果剩下两个，请移除它们，因为它们是唯一剩下的。

我的算法递归地在多个线程中搜索解决方案。一旦一个分支完成（到一个没有更多移动的位置）并且它没有导致一个解决方案，它就会将该位置放在一个包含坏的向量中。现在，每次启动新分支时，它都会遍历错误位置以检查该特定位置是否已被检查。
这个过程一直持续到找到解决方案或检查所有可能的位置。

这适用于包含 36 或 72 个图块的布局。但是当有更多时，由于要搜索的位置很多，因此该算法变得非常无用。

所以，我再次问你，如果你们中的任何人有好的想法，如何实施更多的安全瓷砖移除规则或关于算法的任何其他特定加速。

最好的问候， nhaa123

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-10-14T23:19:58.590

几年前，我写了一个程序，通过偷看解决纸牌麻将牌。我用它检查了 100 万只海龟（在半台计算机上花了一天左右的时间：它有两个核心），似乎有 2.96% 的海龟无法解决。

[http://www.math.ru.nl/~debondt/mjsolver.html](http://www.math.ru.nl/~debondt/mjsolver.html)

好的，这不是您所要求的，但是您可能会查看代码以在其中找到一些迄今为止您还没有想到的修剪启发式方法。该程序不使用超过几兆字节的内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-27T07:57:57.687

我不完全理解你的求解器是如何工作的。当您可以选择移动时，您如何决定首先探索哪种可能性？

如果您选择任意一个，那还不够好-基本上只是蛮力搜索。您可能需要先探索“更好的分支”。要确定哪些分支“更好”，您需要一个评估位置的启发式函数。然后，您可以使用一种流行的启发式搜索算法。检查这些：

*   A* 搜索
*   束搜索

（谷歌是你的朋友）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T08:06:52.533

使用具有恒定查找时间而不是线性查找时间的集合，而不是包含“坏”位置的向量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-14T17:24:29.657

如果有 4 个 Tiles 可见但无法拾取，则必须先移除周围的其他 Tiles。路径应该使用您的规则来移除最少的瓷砖，朝向这些瓷砖，以打开它们。

如果 Tiles 被其他 Tiles 隐藏，则问题没有找到路径的完整信息，需要计算剩余 Tiles 的概率。

非常好的问题！

# c# - 在远程机器上读取事件日志的最快方法是什么？

> ID：914446
> 
> 赞同：14
> 
> 时间：2009-05-27T07:46:03.373
> 
> 标签：c#, event-log

我正在开发一个从远程机器读取事件日志（应用程序）的应用程序。我在 .net 中使用 EventLog 类，然后迭代日志条目，但这非常慢。在某些情况下，某些机器有 40000 多个日志条目，并且需要数小时来遍历这些条目。完成这项任务的最佳方法是什么？.net 中是否还有其他更快的类或任何其他技术？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-29T01:34:50.097

伙计，我感觉到你的痛苦。我们在我们的应用程序中遇到了完全相同的问题。

您的解决方案有一个分支，具体取决于您正在运行的服务器版本以及您的“目标”机器正在运行的服务器版本。

如果您同时使用 Vista 或 Windows Server 2008，那么您很幸运。你应该看看[`System.Diagnostics.Eventing.Reader.EventLogQuery`](https://msdn.microsoft.com/en-us/library/system.diagnostics.eventing.reader.eventlogquery)和[`System.Diagnostics.Eventing.Reader.EventLogReader`](https://msdn.microsoft.com/en-us/library/system.diagnostics.eventing.reader.eventlogreader)。这些是 .net 3.5 中的新功能。

基本上，您可以在 XML 中构建一个查询并将其发送到远程计算机上运行。也许您只是在搜索特定类型的事件，或者只是来自特定时间点的新事件。搜索在远程机器上运行，然后您只需返回匹配的事件。新类比旧的 .net 2.0 方式快得多，但同样，它们仅在 Vista 或 Windows Server 2008 上受支持。

对于目标不在 Vista/Win2008 上的应用程序，我们从远程系统下载原始 .evt 文件，然后使用其二进制格式解析文件。有几个关于 .evt 文件（Vista 之前）的事件日志格式的数据来源，包括[链接文本](http://www.whitehats.ca/main/members/Malik/malik_eventlogs/malik_eventlogs.html)和我记得在 codeproject.com 上包含一些 c# 代码的文章。

Vista 和 Windows Server 2008 机器使用新的 .evtx 格式，这是一种新格式，因此您不能在所有版本中使用相同的二进制解析方法。但是新的 EventLogQuery 和 EventLogReader 类非常快，您不必这样做。现在只使用内置类非常快速。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-23T08:27:57.883

可以在[MSDN](https://msdn.microsoft.com/en-us/library/bb671200(v=VS.90).aspx)上找到一个很好的解释/示例。

```
EventLogSession session = new EventLogSession(Environment.MachineName);

// [System/Level=2] filters out the errors
// Where "Log" is the log you want to get data from.
EventLogQuery query = new EventLogQuery("Log", PathType.LogName, "*[System/Level=2]");

EventLogReader reader = new EventLogReader(query);

for (EventRecord eventInstance = reader.ReadEvent();
    null != eventInstance;
    eventInstance = reader.ReadEvent())
{
    // Output or save your event data here.
} 
```

当使用旧代码等待 5-20 分钟时，这个代码在不到 10 秒内完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-27T21:45:58.560

事件日志阅读器非常慢……太慢了。微软？

使用 LogParser 2.2 - 在 Internet 上搜索 C# 和 LogParser（或者您可以从命令行使用日志解析器命令）。我不想重复其他人已经贡献的工作。

我通过将日志导出为 EVTX 文件从远程系统中提取日志。然后我从远程系统复制文件。这个过程非常快——即使网络跨越地球（我在将日志导出到网络资源时遇到问题）。将其本地化后，您可以进行搜索和处理。

拥有 EVTX 的原因有很多——我不会讨论我们这样做的原因。

以下是将日志副本保存为 EVTX 的代码的工作示例：（注意：“device”是网络主机名或 IP。“LogName”是所需日志的名称：“System”、“ Security”或“Application”。outputPathOnRemoteSystem 是远程计算机上的路径，例如“c:\temp\%hostname%.%LogName%.%YYYYMMDD_HH.MM%.evtx”。）

```
 static public bool DumpLog(string device, string LogName, string outputPathOnRemoteSystem, out string errMessage)
    {
        bool wasExported = false;
        string errorMessage = "";
        try
        {
            System.Diagnostics.Eventing.Reader.EventLogSession els = new System.Diagnostics.Eventing.Reader.EventLogSession(device);
            els.ExportLogAndMessages(LogName, PathType.LogName, "*", outputPathOnRemoteSystem);
            wasExported = true;

        }
        catch (UnauthorizedAccessException e)
        {
            errorMessage = "Unauthorized - Access Denied: " + e.Message;
        }
        catch (EventLogNotFoundException e)
        {
            errorMessage = "Event Log Not Found: " + e.Message;
        }
        catch (EventLogException e)
        {
            errorMessage = "Export Failed: " + e.Message + ", Log: " + LogName + ", Device: " + device;
        }
        errMessage = errorMessage;
        return wasExported;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T10:26:16.497

也许 WMI 可以帮助您：

[使用 C# 的 WMI](http://msdn.microsoft.com/de-de/library/ms811533(en-us).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-28T02:28:38.147

您是否尝试过使用 powershell 2.0 中的远程处理功能？它们允许您在远程机器上执行 cmdlet（如读取事件日志的命令）并将结果（当然作为对象）返回给调用会话。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-28T07:24:44.837

您可以在那些将日志保存到文件并将其发送到您的 web 应用程序的机器上放置一个程序，我认为这会更快，因为您可以在本地执行循环，但我不知道该怎么做，所以我不能给您任何代码： (

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-15T13:03:04.777

刚遇到同样的问题，想分享我的解决方案。它从 260 秒（使用 EventLog）开始搜索应用程序、系统和安全事件日志，大约快 100 倍（使用 EventLogQuery）。这样就可以检查事件消息是否包含模式或任何其他检查，而无需 FormatDescription() 的要求。

我的技巧是使用与 PowerShells Get-WinEvent 相同的机制，然后通过结果检查。

这是我的代码，用于查找过去 4 天内事件消息包含过滤器模式的所有事件。

```
string[] eventLogSources = {"Application", "System", "Security"};
var messagePattern = "*Your Message Search Pattern*";
var timeStamp = DateTime.Now.AddDays(-4);

var matchingEvents = new List<EventRecord>();

foreach (var eventLogSource in eventLogSources)
{ 
    var i = 0;
    var query = string.Format("*[System[TimeCreated[@SystemTime >= '{0}']]]",
        timeStamp.ToUniversalTime().ToString("o"));

    var elq = new EventLogQuery(eventLogSource, PathType.LogName, query);
    var elr = new EventLogReader(elq);
    EventRecord entryEventRecord;
    while ((entryEventRecord = elr.ReadEvent()) != null)
    {
        if ((entryEventRecord.Properties)
            .FirstOrDefault(x => (x.Value.ToString()).Contains(messagePattern)) != null)
        {
            matchingEvents.Add(entryEventRecord);
            i++;
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-16T11:34:41.763

我最近通过 WCF 回调接口做了这样的事情，但是我的客户通过 WCF 与服务器进行交互，并且在我的项目中添加 WCF 回调很容易，[这里提供了完整的示例代码](https://github.com/EvilLord666/WcfDiagnostic/tree/master/Examples/WcfDiagnosticUsageExample)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-05-28T02:13:17.100

也许远程计算机可以做一点计算。所以这样你的服务器只会处理相关信息。这将是一种使用远程计算机进行光过滤的集群，服务器将进行分析部分。

# objective-c - 10.5 基础 SDK，10.4 部署：如何实现缺少的方法

> ID：914447
> 
> 赞同：1
> 
> 时间：2009-05-27T07:46:13.247
> 
> 标签：objective-c, cocoa, backwards-compatibility

我有一个同时针对 Mac OS X 10.4 和 10.5 的项目，其中 10.5 是基础 SDK。

有些方法`-[NSString stringByReplacingOccurrencesOfString:withString]`在 10.4 中不可用。我可以手动实现该功能。另一种选择是将方法实现为一个类别，但这会与 10.5 实现混淆，这是我想避免的。

那么如何在 10.4 中实现这些方法而不会弄乱 10.5，并且当我决定停止支持 10.4 时，我可以轻松地取出实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T18:16:45.830

使用类别，但在方法名称上打上标签；例如，`stringByReplacingOccurrencesOfString_TigerCompatible:`。在实现中，调用 Leopard 的实现或您自己的实现。

当你只使用 Leopard 时，在项目中搜索“TigerCompatible”，然后烧毁所有这些方法并取消标记它们所有的调用站点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-27T12:02:54.837

```
if ([myString respondsToSelector: @selector(stringByReplacingOccurrencesOfString:withString:)])
{
  // 10.5 implementation
}
else
{
  // 10.4 implementation
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-27T08:15:41.347

如果该方法尚不存在，我认为您必须在运行时使用[`+load`并`+initialize`](http://www.mikeash.com/?page=pyblog/friday-qa-2009-05-22-objective-c-class-loading-and-initialization.html)[加载该方法。](http://theocacao.com/document.page/327)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-28T16:00:50.910

如果在 Tiger 下运行，则将所有缺少的实现放在一个包中，该包在启动时在 main() 中加载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T08:36:12.117

如果它是为 10.4 构建的，如何使用 C 预处理器宏插入相关方法？也许尝试在一个类别中做这样的事情，所以只有在为 10.4 构建时才包含 10.4 上不存在的那些方法？

```
#if defined(MAC_OS_X_VERSION_10_4) && MAC_OS_X_VERSION_MAX_ALLOWED <= MAC_OS_X_VERSION_10_4
// Put your implementations of the methods here
#endif 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-27T10:41:16.467

你需要支持10.4吗？如果您在应用程序的核心部分使用仅 10.5 的方法，那么可能是时候考虑仅使用 10.5。

无论如何，对于上面给出的具体示例，我建议远离它并制作字符串的可变副本，以便您可以在 NSMutableString 上使用类似的方法，该方法在 10.4 中有效

# mfc - 使用 /clr 编译 MFC 应用程序（步骤 1：链接动态 DLL）

> ID：914448
> 
> 赞同：2
> 
> 时间：2009-05-27T07:46:15.353
> 
> 标签：mfc, clr, linker, afx

我已成功将使用旧版 Developer Studio 编译的 MFC 应用程序升级到 Visual Studio 2008。由于 MFC 中的一些重大更改，需要进行少量更改。现在一切正常，我想采取下一步并使用`/clr`.

为此，我在 MSDN 网站上找到了有用的信息：

*   [如何：迁移到 /clr](http://msdn.microsoft.com/en-us/library/ms173265(VS.80).aspx)
*   [如何：使用 /clr 编译 MFC 和 ATL 代码](http://msdn.microsoft.com/en-us/library/ms235211(VS.80).aspx)

以下是我采取的步骤：

1.  将**运行时库**设置为**Multi-threaded Debug DLL (/MDd)**。
2.  将 MFC 的**使用设置为****在共享 DLL**中使用 MFC 。

但是，这样做会阻止我链接项目：

1.  `afxData`无法再解析对的引用；不知何故，`afxData`只有在静态链接到 MFC 时才可见。在我的代码中，我有以下声明：

    `extern AFX_DATA AUX_DATA afxData;`

    它适用于静态链接的 MFC 版本。

2.  `_afxThreadState`对和的引用`_afxWinState`也无法解析。

以下是完整的错误消息：

```
error LNK2001: unresolved external symbol "struct AUX_DATA afxData" (?afxData@@3UAUX_DATA@@A)
error LNK2001: unresolved external symbol "class CThreadLocal<class _AFX_THREAD_STATE> _afxThreadState" (?_afxThreadState@@3V?$CThreadLocal@V_AFX_THREAD_STATE@@@@A)
error LNK2001: unresolved external symbol "class CProcessLocal<class _AFX_WIN_STATE> _afxWinState" (?_afxWinState@@3V?$CProcessLocal@V_AFX_WIN_STATE@@@@A) 
```

万一这可能与名称修饰有关...

那么，我该怎么做才能动态链接到 MFC，但仍然引用`afxData`,`_afxThreadState`和`_afxWinState`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T12:40:34.480

在共享 DLL 中使用 MFC 时，必须`dllimport`编辑 AUX_DATA。

```
extern __declspec(dllimport) AUX_DATA afxData 
```

对于线程状态，而不是使用模板类，使用其中之一

```
AFX_MODULE_THREAD_STATE* pState = _AFX_CMDTARGET_GETSTATE()->m_thread;
AFX_THREAD_STATE* pState = AfxGetThreadState(); 
```

取决于您需要的状态信息。例如，请参阅[此处](http://msdn.microsoft.com/en-us/library/w1sc4t4k(vs.80).aspx)了解已移至模块状态以修复错误的一些成员。请注意，AfxGetModuleThreadState 存在，但未记录在案，可能会在未来版本中更改。

Win状态不敲钟，怎么用？可能有一种新的方法来完成它。

# c# - 对象、方法等的应用范围限制

> ID：914450
> 
> 赞同：1
> 
> 时间：2009-05-27T07:46:54.510
> 
> 标签：c#, .net, visual-studio

我有一个非常理论的问题：有没有办法禁止在 C#、.Net 和/或 Visual Studio 中的应用程序/项目映射中使用某些方法、对象等？

更具体地说：我正在开发一个 DMS 系统，它永远不可能从存档中删除文件。归档文件只是 Windows 文件夹结构中的文件。

因此，每当有人尝试执行 System.IO.File.Delete() 时，都应该禁止这样做。相反，我会强制使用定制的 FileDelete() 方法，该方法始终确保要删除的文件不是存档中的文件。（这不必自动发生。当有错误/异常通知开发人员禁止方法调用时，这是可以的。）

实现这一点的另一种方法是在运行时观察 System.IO.File.Delete() 的所有调用，捕获它们并执行我自己的 FileDelete() 方法。

当然，这些都是一个真正的理论问题，但我只想知道是否有办法实现这一点。

PS：我在 Visual Studio 2005 中使用 C#。因此，我是否可以通过我的编程语言或 Visual Studio（或通过我忘记的任何其他方式）来实现这一点并不重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-27T07:58:10.900

控制对存档文件的删除权限不是更简单吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T08:00:35.980

您可以定义方法并使用声明性安全属性装饰它们 [http://msdn.microsoft.com/en-us/library/dswfd229.aspx](http://msdn.microsoft.com/en-us/library/dswfd229.aspx)

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T08:04:48.640

为这种情况编写自己的 FxCop 规则怎么样？

使用这样的规则，如果您将警告视为错误，将无法编译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T07:53:09.940

不适用于现有的库函数。

对于您*自己的*代码，您可以在方法上应用代码访问安全性，但是以“完全信任”运行的代码将轻而易举地过去；因此，要通过反射检查滥用情况，您可能必须手动检查调用者（`Assembly.GetCallingAssembly`）——这很痛苦，但仍然不是 100% 健壮......

有特定的文件/IO 权限，但完全信任会再次忽略它。

我认为“不”是一个更安全的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T07:56:14.677

您可以这样做的一种方法是创建一个特殊的用户帐户，并仅授予该帐户删除文件所需的权限。请记住，用户可以控制他的计算机（如果他具有管理权限；），虽然您可以在他的方式上设置一些障碍，但您确实无能为力（这就是应该的方式）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-27T09:08:47.777

我能找到的最接近的解决方案是编写自己的 System.IO.File 类并将其保存在 exe 项目中。这样你会得到一个歧义的编译错误，可以通过在别名中给你自己的实现来解决（使用 File=System.IO.File, Version=[version], cultuer=[correctculture], publicKey=[public key ]）。如果您不确定要写什么，请创建一个断点并在即时窗口中编写类似 ?typeof(System.IO.File).AssemblyQualifiedName 之类的内容。

它不是防弹的，但至少它会强制开发人员意识到这个决定，你甚至可以（尽管我个人不会这样做）更改默认的类模板以包含每个类的 using 指令

# wcf - 离线客户端和消息到 azure

> ID：914453
> 
> 赞同：3
> 
> 时间：2009-05-27T07:47:05.850
> 
> 标签：wcf, azure

我正在玩 Windows azure，我想构建一个云服务器应用程序，用于接收来自许多不同客户端（例如移动和桌面）的消息。我想构建客户端，以便它们在“离线模式”下工作，即我希望客户端建立一个本地消息队列，一旦它们上线就发送到天蓝色服务器。

我是否可以使用 wcf 和/或 azure queing 机制来完成此操作，这样我在编写代码时就不必担心客户端是在线还是离线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T08:22:41.067

您无需在云中排队即可完成此操作。要使客户端应用程序“启用离线”，您需要在客户端上进行排队。为此，有许多选项，本地数据库、xml 文件等。只要应用程序检测到网络可用性，您就可以将队列上传到 Azure。是的，您可以为此使用 WCF。

对于客户端队列/同步的东西，你可以看看[Sync Framework](http://msdn.microsoft.com/en-us/sync)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-02T00:35:12.383

到目前为止，我还没有发现对队列的巨大需求。也许只是我没有在我的应用程序视图中看到它。也可能是您可以存储在队列中的数据很少。您基本上存储短文本字符串（如记录 ID），然后当您将其从队列中拉出时，您必须对 ID 执行某些操作，例如查找、删除它等等。

正如彼得建议的那样，在我的应用程序中，我根本没有使用队列。我从客户端直接写入表存储（使用 StorageClient 通过它的 REST 接口访问）。如果您想查看具体示例，请查看[http://www.netalerts.mobi/traffic](http://www.netalerts.mobi/traffic)。和你一样，我想学习 Azure，所以我建立了一个小型网站。

有一个每 60 秒唤醒一次的 worker_role。使用一个线程，它从其源中检索任何新数据（屏幕抓取网页）。新条目直接存储在表存储中（不需要队列）。另一个线程删除表存储中早于指定阈值的条目（针对表存储运行多个线程没有问题）。然后我正在研究第三个线程，该线程旨在向手持设备发送通知。

显然，应用程序本身就是一个 web_role。

# java - Java FileHandler 禁用日志轮换

> ID：914457
> 
> 赞同：0
> 
> 时间：2009-05-27T07:48:01.043
> 
> 标签：java, logging, filehandler

我正在尝试禁用日志轮换，以供文件处理程序使用，

```
FileHandler fh = new FileHandler
    ( "path" + "run.log", 1000000, 1, false); 
```

我想要的是一个日志，为每次运行创建我不想轮换或备份旧文件，但使用这个初始化我得到 run.log run.log.1 run.log.2 每次运行。

还

```
 logger.setUseParentHandlers(false); 
```

设置为假。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T08:21:17.327

尝试`0`作为限制而不是`1000000`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-12-21T08:29:40.697

尝试这个： `FileHandler fh = new FileHandler( "path" + "run.log", 1000000, 1, **true**);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-10-17T17:13:32.650

```
Handler fileHandler = new FileHandler(FILE_PATH, true); 
```

# c++ - 指针模板清除函数的向量无法通过“未定义引用”消息编译

> ID：914460
> 
> 赞同：0
> 
> 时间：2009-05-27T07:48:37.033
> 
> 标签：c++, templates, stl, stdvector

对于我的一个程序，我做了一个小函数来清除我拥有的各种 std::vectors 指针。

```
template <class S>
void clearPtrVector(std::vector<S*> &a,int size)
{
    for(size_t i = 0; i < size; i++)
         delete a[i];

    a.clear();
} 
```

我在这里一定做错了什么，因为在像这样的析构函数中调用这个函数时：

```
clearPtrVector(neurons,neurons.size()); 
```

我两次得到以下未定义的引用：

```
undefined reference to `void clearPtrVector<Neuron>(std::vector<Neuron*,std::allocator<Neuron*> >&, int)' 
```

我不得不承认我不熟悉 std::allocator 是什么，所以我猜不出问题可能出在哪里。非常感谢任何帮助。提前致谢！

-左撇子

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-27T07:54:40.437

**热修复**

请改写以下内容：

```
 template <class Vector>
  void clearPtrVector(Vector &a)
  {
    for(size_t i = 0; i < a.size(); i++)
         delete a[i];

    a.clear();
  } 
```

确保在每次使用模板之前在编译器可以看到的地方定义模板。如果你不创建声明，你应该是安全的，否则你应该得到一个编译错误。如果您出于任何原因确实创建了声明，请务必根据需要在任何地方包含定义。

**重新设计**

也就是说，我认为正确的解决方案是重新考虑您的设计并使用能够正确处理破坏的容器，这样您就不必手动进行操作，这很乏味，而且如果您需要，几乎不可能正确完成异常安全。使用`std::shared_ptr`而不是原始指针，或`std::auto_ptr`使用能够容纳它们的容器（`std::vector`不能存储`auto_ptr`值）。一种可能的解决方案是使用[Boost Pointer Container](http://www.boost.org/doc/libs/1_35_0/libs/ptr_container/doc/ptr_container.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-27T08:04:46.797

您的 clearPtrVector 实现是否在头文件中？因为如果它在单独的 .cpp 文件中，链接器将找不到它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-27T08:11:00.437

一些东西：

在您的原始代码中，不要传递大小；只需从向量中获取它：

```
template <class S>
void clearPtrVector(std::vector<S*> &a)
{
    for(size_t i = 0; i < a.size(); ++i)
    {
         delete a[i];
    }

    a.clear();
} 
```

其次，只需传入向量本身，而不是它指向的类型：

```
template <class Vector>
void clearPtrVector(Vector &vec)
{
    for(size_t i = 0; i < vec.size(); ++i)
    {
         delete vec[i];
    }

    vec.clear();
} 
```

第三，该错误听起来像是您将其放置在 .cpp 文件中。代码会在你第一次调用函数时生成，这意味着编译器需要知道函数的定义。将函数移动到头文件中，以便编译器可以找到它。

最后，考虑使用更适合此的东西：

*   [提升指针容器](http://www.boost.org/doc/libs/1_35_0/libs/ptr_container/doc/ptr_container.html)
*   带有[智能指针](http://www.boost.org/doc/libs/1_38_0/libs/smart_ptr/smart_ptr.htm)的 std::vector ，特别是[shared_ptr](http://www.boost.org/doc/libs/1_39_0/libs/smart_ptr/shared_ptr.htm)，因为[auto_ptr](http://www.cplusplus.com/reference/std/memory/auto_ptr/)将不起作用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-27T08:09:12.203

确保您在头文件（.h、*.hpp）中有此函数，因为如果您在源文件中定义它并在头文件中使用原型，您将收到未定义的引用链接器错误。

未定义的引用错误意味着编译器已找到函数的引用，但链接器未能在目标文件中找到该函数的引用。任何模板函数都必须在头文件中定义，以便编译器能够将其放入任何使用该函数的源文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T08:29:37.917

正如我在回答您的第一个问题[https://stackoverflow.com/questions/891913?sort=newest](https://stackoverflow.com/questions/891913?sort=newest)时提供的，一个答案如下：

```
template <class C> void FreeClear( C & cntr ) {
    for ( typename C::iterator it = cntr.begin(); 
              it != cntr.end(); ++it ) {
        delete * it;
    }
    cntr.clear();
} 
```

适用于所有容器类型。请注意，未提供 size 参数，而是从集合中获取的 - 这是设计此类函数的正确方法，将 size 作为单独的值提供只会导致灾难。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-27T08:12:04.333

重新设计不是 [清理-一个-stl-list-vector-of-pointers的副本吗](https://stackoverflow.com/questions/307082/cleaning-up-an-stl-list-vector-of-pointers)

**评论**

如果您不使用其中一个智能指针，请使用[boost::checked_delete](http://www.boost.org/doc/libs/1_39_0/libs/utility/checked_delete.html)函数而不是 delete 以确保您没有删除不完整的类型。

# c# - 从文本文件填充 TextBox

> ID：914461
> 
> 赞同：1
> 
> 时间：2009-05-27T07:48:51.340
> 
> 标签：c#

我试图从文件中获取特定行并将它们放在另一个字符串中，或​​者如果我们可以将它放在另一个文本框中，它不会是一个问题：P

```
string[] msglines;

msglines = System.IO.File.ReadAllLines(@"C:\\Users\xA\Desktop\MESSAGES.txt");

for (int x = 0; x < msglines.Length; x++)
{
    this.textBox5.Text = msglines[c];
    c = c + 2;
} 
```

我得到一个：索引超出了数组的范围。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-27T08:00:15.013

如果你想获得每隔一行。

将循环更改为

```
//Odd Lines
for (int x = 0; x < msglines.Length; x = x + 2)
{
    this.textBox5.Text += msglines[x];
}

//Even Lines
for (int x = 1; x < msglines.Length; x = x + 2)
{
    this.textBox5.Text += msglines[x];
} 
```

正如评论中指出的那样，您可以缩短`x = x + 2`为`x += 2`

为了 LinqY Goodness 的利益......

```
//ODDS
msgLines
    .Where((str, index) => index % 2 == 0)
    .ToList()
    .ForEach(str => textBox1.Text += String.Format("{0}\r\n", str));

//EVENS
msgLines
    .Where((str, index) => index % 2 == 1)
    .ToList()
    .ForEach(str => textBox1.Text += String.Format("{0}\r\n", str)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-27T07:50:47.840

您的循环由 x 控制，但您通过 c 进行索引 [因此您需要逻辑来防止 c 变得大于数组的大小]

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-27T07:54:38.847

`c`因为您每次都将行索引 ( ) 增加 2；只需使用`x`：

```
this.textBox5.Text = msglines[x]; 
```

当然，从循环中这将导致仅显示最后一行。你*真正*想展示的是哪条线？

* * *

编辑重新评论；在这种情况下，只需：

```
StringBuilder sb = new StringBuilder();
for (int x = 1; x < msglines.Length; x+=2)
{
    sb.AppendLine(msglines[x]);
}
this.textBox5.Text = sb.ToString(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-27T07:54:27.443

在你的 for 循环中，你正在使用 c. 您需要使用 x。我可以建议您看一下[for 的参考](http://msdn.microsoft.com/en-us/library/ch45axte.aspx)。

试试这个...

```
string[] msglines;

msglines = System.IO.File.ReadAllLines(@"C:\\Users\xA\Desktop\MESSAGES.txt");

for (int x = 0; x < msglines.Length; x++)
{
    this.textBox5.Text = msglines[x];                       
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-27T08:00:25.853

然后你应该使用 X 作为索引，步长为 2，而不是 1。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-27T08:03:36.753

为简单起见，我将使用一个从字符串中获取每个其他字符的示例，但是从字符串数组中获取每隔一行的情况是类似的。

让我们以“Hello”作为您的 msglines 字符串的示例

[![替代文字](https://i.stack.imgur.com/9fsEX.png)](https://i.stack.imgur.com/9fsEX.png)
[（来源：[javabat.com](http://www.javabat.com/doc/string_index.png)）]

让我们说您的全局变量 ci 在您进入 for 循环之前初始化为 0。您的 msglines.Lenght 将为 5。在循环的第四次迭代 (x == 3) 中，您将尝试访问 msglines[6]，它位于数组边界之外，因此会出现错误。

你可能想要一些类似的东西

```
int x = 0;
while(x <= msglines.Lenght){
  this.textBox5.Text += msglines[x];
  x = x + 2;
} 
```

或者

```
for(x=0; x <= msglines.Lenght ; x+=2){
  this.textBox5.Text += msglines[x];
} 
```

要获得奇数行，您将从 x 初始化为 1 开始。

至于使用上面两个完全等效的版本中的哪一个，我建议使用对您来说更具可读性的版本。根据我的经验，这始终是更好的选择。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-27T08:11:04.570

尝试这个

```
string[] msglines;

 msglines = System.IO.File.ReadAllLines(@"C:\Users\xA\Desktop\MESSAGES.txt");

 for (int x = 0; x < msglines.Length; x++)
  {

      this.textBox5.Text = msglines[x++];

  } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-27T08:21:41.770

你说你想要TextBox 中的*所有*奇数行，但你的循环只会显示最后一行，因为你会覆盖每次传递的内容。

显示所有奇数行，用换行符分隔：

```
string lineSep = "";
for (int x = 0; x < msglines.Length; x += 2)
{
    this.textBox5.Text += lineSep + msglines[x];
    lineSep = "\r\n";
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-27T08:30:53.127

除了已经提到的`c`vs的索引问题之外`x`，您还会`textBox5.Text`在每次迭代时进行覆盖，因此您只会看到最后一行。这似乎不太可能是预期的行为。您可能想要这样的东西：

```
this.textBox5.Text += msglines[x]; // note x instead of c 
```

或者，如果您真的想要所有内容并且 +2 本身就是一个错字，您可以在没有任何循环的情况下执行此操作：

```
this.textBox5.Text = String.Join( "\n", msglines ); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-27T07:50:12.663

您在调用中有一个双反斜杠`ReadAllLines()`，导致它无法打开文件。

此外，您正在`c`用作数组索引，看起来像您想要的`x`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-27T07:54:44.493

我写的代码正是我想要的......

我实际上希望将文件中的每一行奇数发送到文本框。是的，PS C 从 1 初始化

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-27T09:16:27.667

以下函数将返回一个 IEnumerable，它给出文件中的奇数行：

```
private IEnumerable<string> GetOddLines(string fileName)
{
    string[] lines = File.ReadAllLines(fileName);
    IEnumerator allLines = lines.GetEnumerator();
    while (allLines.MoveNext())
    {
        yield return (string)allLines.Current;
        if (!allLines.MoveNext())
        {
            break;
        }
    }
} 
```

如果您想要偶数行，只需在 while 循环之前添加对 allLines.MoveNext() 的调用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-06-26T15:16:29.373

您需要使用 Length -1 循环数组。长度为 45 的数组只会索引到 44。

# c - 如何使文件描述符阻塞？

> ID：914463
> 
> 赞同：11
> 
> 时间：2009-05-27T07:49:11.353
> 
> 标签：c, unix, file-io

给定一个任意文件描述符，如果它是非阻塞的，我可以让它阻塞吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-27T08:08:02.407

自从我玩 C 以来已经有一段时间了，但是您可以使用[fcntl()](http://linux.die.net/man/2/fcntl)函数来更改文件描述符的标志：

```
#include <unistd.h>
#include <fcntl.h>

// Save the existing flags

saved_flags = fcntl(fd, F_GETFL);

// Set the new flags with O_NONBLOCK masked out

fcntl(fd, F_SETFL, saved_flags & ~O_NONBLOCK); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-27T08:10:33.057

我希望简单地不设置`O_NONBLOCK`标志应该将文件描述符恢复为默认模式，这是阻塞的：

```
/* Makes the given file descriptor non-blocking.
 * Returns 1 on success, 0 on failure.
*/
int make_blocking(int fd)
{
  int flags;

  flags = fcntl(fd, F_GETFL, 0);
  if(flags == -1) /* Failed? */
   return 0;
  /* Clear the blocking flag. */
  flags &= ~O_NONBLOCK;
  return fcntl(fd, F_SETFL, flags) != -1;
} 
```

# 2d - 在等距世界中的瓷砖之间移动精灵

> ID：914472
> 
> 赞同：3
> 
> 时间：2009-05-27T07:52:37.307
> 
> 标签：2d, isometric

我正在寻找有关如何在等距游戏世界中移动（和动画） 2D 精灵的信息，但是在从一个瓷砖到另一个瓷砖的旅行时让它们的运动平滑地动画，而不是让它们从一个瓷砖的范围内跳跃到下一个的范围。

这方面的一个例子是在运输大亨游戏中，火车和马车通常一半在一块，一半在另一块。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-27T08:23:47.540

在正确的位置绘制精灵并不难。投影公式为：

```
screen_x = sprite_x - sprite_y
screen_y = (sprite_x + sprite_y) / 2 + sprite_z 
```

sprite_x 和 sprite_y 是定点值（如果需要，也可以是浮点值）。通常，固定点的精度是图块上的像素数 - 因此，如果您的图块图形是 32x16（投影的 32x32 正方形），您将有 5 位精度，即图块的 1/32。

真正困难的部分是将精灵排序成正确渲染的顺序。如果您使用 OpenGL 进行绘图，则可以使用 z-buffer 使这变得非常容易。使用 GDI、DirectX 等，真的很难。Transport Tycoon 不会在所有实例中正确渲染精灵。最初的运输大亨拥有你见过的最可怕的渲染引擎。它实现了三个缩放级别，是大规模 masm 宏的三个实例。TT 完全用汇编程序编写。我知道，因为我多年前将它移植到 Mac 上（并且还为 PS1 开发套件做了一个很酷的版本，不过它需要 6Mb）。

PS 游戏中的小平房图形之一是基于克里斯·索耶当时居住的房子。我们很想为 Mac 版添加一辆停在车道上的法拉利，因为那是他用版税购买的汽车。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-27T08:03:15.647

查找如何进行线性插值（这是一个非常简单的公式）。然后，您可以使用它来参数化单个 [0, 1] 范围内的转换。然后，您只需在 sprite 中有一个状态来存储事实：

1.  他们正在移动
2.  起点和终点
3.  开始和结束时间（或开始时间和持续时间

然后每一帧你都可以使用从起点到终点的插值将其绘制在正确的位置。一旦你超过了持续时间，精灵就会被更新为不动并定位在终点/瓦片中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T07:59:12.143

你为什么认为它会从一个瓷砖跳到另一个瓷砖？您可以将您的精灵定位在任何 x,y 坐标上。

首先创建背景屏幕缓冲区，然后将精灵放在它上面。

# jquery - 检测何时通过 ajax 加载资源

> ID：914492
> 
> 赞同：4
> 
> 时间：2009-05-27T08:00:00.613
> 
> 标签：jquery, ajax, dom

我最近询问如何检测页面的所有资源何时已加载，例如图像和样式表。答案回来了，使用 $(window).load(); jQuery中的方法。

我现在的问题是如何检测何时通过 AJAX 加载内容。AJAX 将一些 img 元素注入到 DOM 中……我如何知道这些图像何时完成加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T08:04:02.307

在`$.get()`or`$.post()`函数中，您可以提供将在 ajax 请求完成时调用的函数的名称。例如：

```
$.get("something.php",{data:'test'},foo);

function foo()
{
   // This function will be called when the request has completed
} 
```

或者：

```
$.get("something.php",{data:'test'},function()
  {
    //This function will be called in the same way
  }

); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-27T08:13:00.043

如果您正在调用**[$.ajax](http://docs.jquery.com/Ajax/jQuery.ajax)**，您可以为成功的请求设置一个回调函数：

```
$.ajax({
    url: _url,
    type: _type,
    data: _data,
    dataType: _dataType,
    success: _success
})

var _success = function(result) {
    $html = $(result);
    alert('HTML downloaded');

    // inject HTML into DOM here
} 
```

您需要通过 $html 获取图像元素，并为每个图像注册加载函数回调，该回调会在图像加载时触发：

```
$('#myImage').load(function() {  
    alert('Image Loaded');  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T08:07:17.027

检测 ajax 获取何时很容易：使用 jQuery 中定义的 Ajax 事件：http: [//docs.jquery.com/Ajax](http://docs.jquery.com/Ajax)

但我不确定你问的是同样的事情。要检测图像何时完成加载（假设这将等于图像的 src 属性更改时的事件），您可以使用突变事件。[http://wiki.github.com/jollytoad/jquery.mutation-events](http://wiki.github.com/jollytoad/jquery.mutation-events) 欢呼，

jrh

# java - 如何在 Windows 上使用 JPL（双向 Java/Prolog 接口）？

> ID：914495
> 
> 赞同：6
> 
> 时间：2009-05-27T08:00:21.487
> 
> 标签：java, swi-prolog, embedded-language, jpl

我对在 Java 中嵌入 Prolog 解释器很感兴趣。一种选择是使用[JPL](http://www.swi-prolog.org/packages/jpl/java_api/index.html)，但 JPL 站点上的下载链接已损坏，并且[安装页面](http://www.swi-prolog.org/packages/jpl/installation.html)提到了我找不到的 jpl.zip。我下载了似乎包含 JPL 的 SWI-Prolog（它在安装时将其列为组件），但我仍然不确定如何将它与 Java 一起使用。

关于如何在 Windows 上使用 JPL 的任何想法？我可以使用另一个库来实现相同的目标吗？我遇到过一些，但它们似乎不如 JPL 稳定。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-27T13:15:00.620

JPL 不再需要额外下载，因此您不需要 jpl.zip。如果您下载 SWI-Prolog，它将安装必要的文件。[与安装说明](http://www.swi-prolog.org/packages/jpl/installation.html)中显示的 jpl.zip 的结构相比，您会发现它现在看起来像这样：

```
C:\Program Files\Prolog\
 +--- doc\packages\examples\jpl
 |     +--- Exceptions
 |     +--- Exceptions2
 |     +--- Family
 |     +--- Test
 |     +--- Test2
 |     +--- Time
 |     +--- Zahed
 |     +--- (and maybe more...)
 |
 +--- bin\jpl.dll  (a native library - for Windows in this case)
 |
 +--- lib\jpl.jar  (a Java library)
 |
 +--- library\jpl.pl  (a Prolog library)
 |
 +--- doc\packages\jpl\index.html  (JPL's documentation "home page") 
```

# php - 如何查看 Smarty 模板为何静默失败？

> ID：914501
> 
> 赞同：2
> 
> 时间：2009-05-27T08:01:30.643
> 
> 标签：php, smarty

我正在使用调用对象方法的 Smarty 模板。我已将代码放在新服务器上，但它默默地无法正常工作。模板正在输出，但在某个点被切断，可能是因为错误。

`error_reporting`设置为`E_ALL`。即使使用`$smarty->error_reporting = E_ALL`and `$smarty->debugging = TRUE`，也不会显示错误。

如何查看模板失败的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T08:04:55.283

检查您的网络服务器上的 PHP 错误日志，该日志通常存储在 linux 发行版的 /var/log/apache/php.errors 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T08:17:53.963

我猜 'display_startup_errors' 的 php.ini 选项已关闭，因此它在尝试加载缺少的扩展而不显示/记录任何内容时静默失败。

自 php 4.0.3 起，它也默认为关闭。

# java - 非自签名证书是否会删除 Applet 的安全警告？

> ID：914509
> 
> 赞同：1
> 
> 时间：2009-05-27T08:03:53.117
> 
> 标签：java, security, applet, certificate, self-signed

从 CA 购买的证书又能做什么（在 Java 小程序的上下文中）？

假设我在访问用户文件的网站上有一个小程序（需要安全证书）。如果我制作了自签名证书，客户端将收到一条安全警告，询问客户端是否应该信任此应用程序。如果我从 CA 购买证书，是否不会出现该安全警告并自动授予访问权限？如果它没有消除安全警告，除了让客户放心之外，是否还有必要购买一个？

这适用于所有 CA，还是仅适用于 VeriSign 和 Thawte？

编辑：我发现这个关于如何设置来自 Thawte 的免费验证证书的 **非常有用的教程：** [http ://www.dallaway.com/acad/webstart/](http://www.dallaway.com/acad/webstart/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T11:06:11.003

在 Sun 的实现中，会为所有证书（JavaFX 证书除外）显示一个询问是否应删除安全性的对话框。对于自签名证书，对话框应具有警告颜色，并注意无法验证证书。对于来自任何已知 CA 的已验证证书，将显示一个蓝色对话框。提供了一个复选框，始终接受证书。Java 控制面板设置配置选项不允许用户信任证书（可能是一个非常好的主意）。

# wcf - 从 ASMX Web 服务导入 wsdl 时出现 WsdlImporter 错误

> ID：914523
> 
> 赞同：1
> 
> 时间：2009-05-27T08:08:58.567
> 
> 标签：wcf

当尝试为此[wsdl 文件](http://www.mediafire.com/file/hmttomjm4nx/test.wsdl)（从 ASMX Web 服务）生成代理代码时，WsdlImporter（和 svcutil）报告错误。我认为 WCF 完全向后兼容 ASMX Web 服务？请帮忙

下面是 svcutil 的输出（我使用 WsdlImporter 得到相同的错误）

```
Microsoft (R) 服务模型元数据工具
[Microsoft (R) Windows (R) Communication Foundation，版本 3.0.4506.648]
版权所有 (c) 微软公司。版权所有。

警告：来自命名空间“http://sch”的可选 WSDL 扩展元素“标头”
emas.xmlsoap.org/wsdl/soap/' 未处理。
XPath: //wsdl:definitions[@targetNamespace='http://mycompany.com/Enterprise/WebS
服务/财务/']/wsdl:binding[@name='FinanceServiceSoap']/wsdl:operation[@name=
'ProcessNonRefPayment']/wsdl:fault[@name='fault']

警告：来自命名空间“http://sch”的可选 WSDL 扩展元素“标头”
emas.xmlsoap.org/wsdl/soap/' 未处理。
XPath: //wsdl:definitions[@targetNamespace='http://mycompany.com/Enterprise/WebS
服务/财务/']/wsdl:binding[@name='FinanceServiceSoap']/wsdl:operation[@name=
'ProcessRefPayment']/wsdl:fault[@name='fault']

警告：来自命名空间“http://sch”的可选 WSDL 扩展元素“标头”
emas.xmlsoap.org/wsdl/soap/' 未处理。
XPath: //wsdl:definitions[@targetNamespace='http://mycompany.com/Enterprise/WebS
服务/财务/']/wsdl:binding[@name='FinanceServiceSoap']/wsdl:operation[@name=
'SearchPayments']/wsdl:fault[@name='fault']

警告：来自命名空间“http://sch”的可选 WSDL 扩展元素“标头”
emas.xmlsoap.org/wsdl/soap/' 未处理。
XPath: //wsdl:definitions[@targetNamespace='http://mycompany.com/Enterprise/WebS
服务/财务/']/wsdl:binding[@name='FinanceServiceSoap']/wsdl:operation[@name=
'GetPayments']/wsdl:fault[@name='fault']

**错误：无法导入 wsdl:binding**
详细信息：给定的键不在字典中。
错误源的 XPath：//wsdl:definitions[@targetNamespace='http://mycompany.com
/Enterprise/WebService/Finance/']/wsdl:binding[@name='FinanceServiceSoap12']

**错误：无法导入 wsdl:port**
详细信息：导入 wsdl:binding 时出错，该 wsdl:port 是依赖的
继续。
XPath 到 wsdl:binding: //wsdl:definitions[@targetNamespace='http://mycompany.com
/Enterprise/WebService/Finance/']/wsdl:binding[@name='FinanceServiceSoap12']
错误源的 XPath：//wsdl:definitions[@targetNamespace='http://mycompany.com
/Enterprise/WebService/Finance/']/wsdl:service[@name='FinanceService']/wsdl:port
[@name='FinanceServiceSoap12']

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-27T17:23:52.067

你没有要求这个，但它最终可能会帮助你更多......

您提供的 WSDL 设计过度且架构不足。

1.  几乎每个在 WSDL 中定义的 complexType 都有一个唯一的名称空间。这是不必要的。您不需要 XML 命名空间来保存事务消息的定义。Waaaaay 太多的命名空间。当我查看它时，我发现只有一个命名空间 ( `http:///blahblah/Finance/`) 是合理的。你可能需要更多，但肯定不需要那么多。大量的命名空间是 wsdl.exe 工具崩溃的原因之一——它根本无法处理它。

2.  没有模块化。XML Schema 应该与 WSDL 分开。对于那些合理的命名空间，为每个命名空间使用单独的 .xsd 文件，并为这些架构执行 xsd:import。可能是您有一个 XSD 文件。

3.  您有从通用基本类型派生的 complexTypes，但基本类型中没有任何内容。没有消息 ID，没有消息版本。这似乎很麻烦。

4.  提供的 WSDL 不会将端口类型映射到绑定。这是 wsdl.exe 不会从中生成代码的原因之一。wsdl.exe 在 porttype 中的 wsdl:input 元素上查找 name 属性，该属性必须与绑定上的 wsdl:input 上的 name 属性匹配。

5.  你的绑定太多了。你真的需要 SOAP1.1、SOAP1.2、HTTPGET 和 HTTPPOST 吗？真的吗？选择一个并坚持下去。

现在要做什么？
我想您无法控制 ASMX，并且您无权访问代码。我要做的是手动重新处理该 WSDL 以使其有意义 - 将所有这些模式分成单独的 .xsd 文件。然后从 WSDL 的一个简单子集开始，并获取它以使其工作。迭代地添加更复杂的部分，直到你拥有你需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T09:11:43.637

wsdl.exe 在导入这个 WSDL 时崩溃，所以肯定有什么问题。即使是 .NET 2.0 客户端也无法使用它。你能发布网络服务的代码吗？

# asp.net - 如何从 javascript 代码中调用 jquery 函数？

> ID：914528
> 
> 赞同：1
> 
> 时间：2009-05-27T08:10:23.883
> 
> 标签：asp.net, jquery, client-side

我正在使用 Telerik 的 RadAjaxPanel，它有 ClientEvents-OnResponseEnd 客户端事件。所以我写了 JavaScript 函数：

```
function OnResponseEnd(ajaxPanel, eventArgs) {
        // call jQuery here
    }; 
```

我的问题是如何在里面调用jQuery函数？我想用 .slide(..) 函数操作一些 html 元素。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-27T08:17:28.520

jQuery*是*javascript - 它是一个 js 库。只需调用该函数，例如 $(this).slide(); 在函数中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-27T08:21:29.587

您可以在上面显示的函数中调用 jQuery 函数。当然，您必须先导入 jQuery 库才能执行此操作。

例子：

```
function OnResponseEnd(ajaxPanel, eventArgs) {
    $('div').slide(...);
}; 
```

# jquery - jQuery：链接事件 - 代码更正

> ID：914530
> 
> 赞同：0
> 
> 时间：2009-05-27T08:10:33.900
> 
> 标签：jquery, events, chaining

谁能告诉我如何用 fadeout('slow') 替换以下代码的滑动功能

```
 div.slideUp(function() {        
        div.load("GetResults.aspx?mode=bymanu&mid="+manuId,
                         { symbol: $("#txtSymbol" ).val() },
                           function() {
                           $(this).slideDown();                               
                       }); 
```

而不是slideUp，我想快速使用FadeOut功能。我怎样才能链接事件？

我也想用 FadeIn('slow') 替换 SlideDown

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-27T08:19:20.497

[jQuery 文档](http://docs.jquery.com/Effects/fadeIn)实际上是检查此类语法的好地方。

```
div.fadeOut('slow', function() {        
    div.load(
        "GetResults.aspx?mode=bymanu&mid="+manuId,
        { symbol: $("#txtSymbol" ).val() },
        function() {
            $(this).fadeIn('slow');                               
        }
    );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-27T19:56:07.200

[SelectorGadget](http://www.selectorgadget.com/)确实有效。它允许您通过在页面部分上的每次鼠标单击来发展您的选择选择。您通过这样的快捷方式加载：

```
javascript:(function(){var%20s=document.createElement('div');s.innerHTML='Loading...';s.style.color='black';s.style.padding='20px';s.style.position='fixed';s.style.zIndex='9999';s.style.fontSize='3.0em';s.style.border='2px%20solid%20black';s.style.right='40px';s.style.top='40px';s.setAttribute('class','selector_gadget_loading');s.style.background='white';document.body.appendChild(s);s=document.createElement('script');s.setAttribute('type','text/javascript');s.setAttribute('src','http://www.selectorgadget.com/unstable/lib/selectorgadget_edge.js?raw=true');document.body.appendChild(s);})(); 
```

该网站有一个很棒的演示。

# internet-explorer - 在 IE 6 中无法点击

> ID：914531
> 
> 赞同：0
> 
> 时间：2009-05-27T08:10:50.263
> 
> 标签：internet-explorer, internet-explorer-6

这是我在 XSL 文件中编写的所有 html 代码。div body 我有一个 div 类别，左右两个区域在每一侧我都有相同的 div 包含一个链接，但右侧的链接可以点击，而左侧的链接不可点击。有同样问题的大神请指教！！

```
<xsl:for-each select="categories/category">
<div class="Categories-News">
<div class="Categories-News-Title">
<a href="/{@name}">
<xsl:value-of select="@label" />
</a>
</div>
<div class="Categories-News-Left">
<div class="Categories-Top-News">
<div class="Categories-Top-Wrap-Content">
<xsl:if test="article[1]/@image">
<div class="Wrap-Border">
<div class="Wrap-Image">
<img src="{article[1]/@image}-140x120.jpg" width="121" />
</div>
</div>
</xsl:if>
<p class="categories-title">
<a href="{article[1]/@seo-url}">
<xsl:value-of select="article[1]/@title"
disable-output-escaping="yes" />
</a>
</p>
<p>
<a href="{article[1]/@url}" class="edi">
<xsl:value-of select="article[1]/@edition" />
</a>
-
<xsl:value-of select="formater:date(article[1]/@date)" />
</p>
<xsl:value-of select="article[1]/@body"
disable-output-escaping="yes" />
</div>
</div>
<xsl:choose>
<xsl:when test="article[1]/related">
<xsl:for-each select="article[1]/related">
<div class="Relate-Items">
<div class="arrow"></div>
<div class="Linklink">
<a href="{@seo-url}">
<xsl:value-of select="@title"                                                   disable-output-escaping="yes" />
</a>
<span>
<a href="{@url}" class="edition">
<xsl:value-of select="@edition" />
</a>
</span>
</div>
</div>
</xsl:for-each>
</xsl:when>
<xsl:otherwise>
<xsl:for-each select="article">
<xsl:if test="position() &lt; 5 and position() &gt; 1">
<div class="Relate-Items">
<div class="arrow"></div>
<div class="Linklink">
<a href="{@seo-url}">
<xsl:value-of select="@title"
disable-output-escaping="yes" />
</a>
<span>
<a href="{@url}" class="edition">
<xsl:value-of select="@edition" />
</a>
</span>
</div>
</div>
</xsl:if>
</xsl:for-each>
</xsl:otherwise>
</xsl:choose>
</div>
<div class="Categories-News-Right">
<xsl:for-each select="article[position() &gt; 4]">
<div class="Relate-Items">
<div class="arrow"></div>
<div class="Linklink">
<a href="{@seo-url}">
<xsl:value-of select="@title" />
</a>
<span>
<a href="{@url}" class="edition">
<xsl:value-of select="@edition" />
</a>
</span>
</div>
</div>
</xsl:for-each>
</div>
</div>
</xsl:for-each> 
```

我看到当这个页面在 IE 6 中加载时我仍然可以点击左侧的链接但是当它完成加载页面时我无法点击链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-02T07:15:47.587

我最近也有类似的行为。问题是我有一个固定高度/宽度的 div 元素，但内容比“计算的”大。因此，显示了指定尺寸之外的所有内容，但不可点击。因此，如果指定，请尝试放大 div 大小。

# c# - 如何在我的 C# 应用程序中创建自己的事件，就像可用的默认事件一样？

> ID：914532
> 
> 赞同：1
> 
> 时间：2009-05-27T08:10:52.823
> 
> 标签：c#, events, event-handling

每当用户将鼠标悬停在其上时，我都需要更新我的应用程序的系统托盘图标的文本值。我注意到系统托盘图标不存在此类事件。是否可以为系统托盘图标创建悬停事件，如果可以，我该如何完成它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-27T08:26:00.140

怎么勾搭`NotifyIcon.MouseMove`？

作为一个基本示例，这似乎有效（使用 a `NotifyIcon`on a `Form`）：

```
 public Form1() {
        InitializeComponent();
        notifyIcon1.MouseMove += delegate
        {
            notifyIcon1.Text = DateTime.Now.TimeOfDay.ToString();
        };
        notifyIcon1.Icon = SystemIcons.Hand;
        notifyIcon1.Visible = true;            
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T08:27:31.837

在 WPF 中，UI 元素具有 ToolTipOpening/ToolTipClosing 事件。您应该更新开头的工具提示文本。我不知道系统托盘图标是否有这种行为，但我想有类似的东西。

# iphone - 录音 iPhone - AudioStreamBasicDescription 的值

> ID：914536
> 
> 赞同：4
> 
> 时间：2009-05-27T08:11:38.033
> 
> 标签：iphone, audio

这些是我传入的值，这是我得到的唯一值组合。

```
dataFormat.mSampleRate = 44100;    
dataFormat.mFormatID = kAudioFormatLinearPCM;
dataFormat.mFormatFlags = kAudioFormatFlagIsSignedInteger | kLinearPCMFormatFlagIsBigEndian;
dataFormat.mBytesPerPacket = 4;
dataFormat.mFramesPerPacket = 1;
dataFormat.mBytesPerFrame = 4;
dataFormat.mChannelsPerFrame = 2;
dataFormat.mBitsPerChannel = 16;

status = AudioQueueNewInput(  &dataFormat, AudioInputCallback, self, NULL, NULL,  0,  
                   &queue);

status = AudioFileCreateWithURL(fileUrl, kAudioFileCAFType, &dataformat, kAudioFileFlags_EraseFile, &audioFile 
```

录音有效，但在录音和播放过程中噪音很大。它与这段代码有什么关系吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-09-20T20:14:49.343

我可以看到两个可能的错误。首先，正如@invalidname 指出的那样，立体声录音可能不适用于iPhone 等单声道设备。好吧，它可能会起作用，但如果它起作用了，你无论如何都会得到双单声道立体声流，那何必呢？您不妨将流配置为以单声道工作并节省 CPU 开销。

第二个问题可能是你的声音失真的来源。您的流描述格式标志应该是：

```
kAudioFormatFlagIsSignedInteger |
kAudioFormatFlagsNativeEndian |
kAudioFormatFlagIsPacked 
```

此外，不要忘记将 mReserved 标志设置为 0。虽然此标志的值可能被忽略，但为了确保而明确地将其设置为 0 并没有什么坏处。

**编辑**：在 iPhone 上调试音频的另一个更通用的技巧——如果您遇到失真、削波或其他奇怪的效果，请从手机中获取数据有效负载并在波形编辑器中查看录音。能够缩小并查看单个样本将为您提供很多关于问题所在的线索。

为此，您需要打开“管理器”窗口，单击您的手机，然后展开您的应用程序旁边的小箭头（在您通常卸载它的同一位置）。现在您将看到一个向下的箭头，如果您单击它，Xcode 会将数据有效负载从您的应用程序复制到硬盘驱动器的某个位置。如果您要将录音转储到磁盘，您会在此处找到提取的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-06T19:09:23.727

你的输入设备是什么？提供的耳塞上的麦克风或手机的内置麦克风或什么？还是您正在录制到模拟器中？

除了噪音，其他一切听起来都对吗：速度、音高等等？

它可能不会引起任何问题，但您指定的是双通道输入，而您的输入设备可能是单声道的。

最后一个想法：这是第一代 iPhone 吗？我认为该模型存在一个奇怪的问题，即 8 KHz 输入上转换为 44.1。

# c - x86 汇编器中的动态标签

> ID：914549
> 
> 赞同：1
> 
> 时间：2009-05-27T08:17:31.407
> 
> 标签：c, assembly

我又遇到了一个问题，我找不到一个简单的解决方案......

我正在做一些内联汇编，我想通过使用 .rept 指令执行一些代码几次，该指令告诉汇编器就像 .rept 之后的行，直到 .endr 之前的行，重复指定数量的次。

明显的问题当然是已经指定了标签 18。我想知道是否有办法为每次迭代生成一些动态标签？

```
 __asm__ __volatile__ (".rept 10 \n\t");  
  __asm__ __volatile__(  "test eax, eax \n\t" );  
  __asm__ __volatile__(  "jne  18f\n\t" );  
  ...  
  __asm__ __volatile__(  "18: nop  18f\n\t" );   
  __asm__ __volatile__(  ".endr\n\t" ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-02T19:44:40.270

为什么不跳过 .rept 和 .endr 而只是循环呢？将 ecx 设置为 10（或者 0A，如果你想要 10 个循环，而不是 16 个），在你的 rept 语句所在的位置放置一个标签（比如 loopbegin:)，并且`loop loopbegin`在 .endr 语句所在的位置放置一个标签。这样你的 18 标签就不会模棱两可了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T08:59:18.730

如果您不介意手动完成一些工作，这应该可以通过使用内置`.`（点）符号来完成，该符号计算为当前目标地址。请参阅[文档](http://sourceware.org/binutils/docs-2.19/as/Dot.html#Dot)。您应该能够执行以下操作：

```
asm volatile("jne .+1"); 
```

哪里`1`需要根据你想跳多远来改变，当然。这是手动部分，因为您需要以字节为单位的偏移量。我没有对此进行测试，但我想它应该可以工作。

[文档中的此页面](http://sourceware.org/binutils/docs-2.19/as/TIC54X_002dSubsyms.html#TIC54X_002dSubsyms)还显示了如何使用字符串替换来生成标签，您也可以使用该技术。

# iphone - iPhone mp3播放问题

> ID：914552
> 
> 赞同：4
> 
> 时间：2009-05-27T08:18:14.087
> 
> 标签：iphone

我正在为 iphone 编写游戏，并且没有背景音乐，它以 30 fps 的速度流畅运行。但是如果我添加音乐（使用 AudioQueues 或 AVAudioPlayer，两者都给出类似的效果），帧率会周期性地下降到 10（大约每秒一次），然后返回到 30。音乐是 mp3@128kps，44kHz。它不是不断地降低性能，而是在某些时刻降低性能，这会导致非常生涩的游戏玩法。有没有人遇到过这样的问题？有什么方法可以让 mp3 解码/播放的 cpu 负载更均匀？大多数时候，我宁愿保持 29 fps 而不是 30 fps，每秒 10 次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-30T23:34:40.350

也许您可以提高渲染线程的优先级？或者把它放到一个不同的运行循环中（如果这是你做动画的方式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-18T20:05:10.950

这很可能是由使用`AmbientSound`音频会话类别引起的，请参阅[此问题](https://stackoverflow.com/questions/1009385)。您可以通过切换到`SoloAmbientSound`类别轻松解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-09T15:19:19.727

几个想法：

1）尝试将文件转换为另一种格式并查看是否仍然存在此问题可能会起作用。我在使用 CAF 文件方面取得了巨大成功，只需对它们运行 afconvert 即可。

```
afconvert -f caff -d ima4 <your mp3 file> 
```

2）另外，减速和轨道变化之间有什么联系吗？在更改曲目（或重新启动曲目）时，我经常看到类似的事情。我认为这与从“磁盘”读取文件所需的负载有关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-04T06:36:14.857

如果您向我们展示您的代码，那将是最好的。您是否检查了音频缓冲区选项，它可能不是您需要的最佳选择。您对音频单元感到满意吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-28T21:31:23.770

您需要分析您的应用程序。

无论比特率如何，我都会获得 60fps。

# javascript - 使用 JQuery 如何显示和隐藏不同 div 的 onClick 事件

> ID：914558
> 
> 赞同：5
> 
> 时间：2009-05-27T08:19:54.210
> 
> 标签：javascript, jquery, css

我想根据链接的 Onclick 事件显示一个 div。

第一次点击 - 显示 div1
第二次点击 - 隐藏剩余的 div 并显示 div2
第三次点击 - 隐藏剩余的 div 并显示 div3
第四次点击 - 隐藏剩余的 div 并显示 div1 => 重复循环并继续..

> ***代码如下：***

```
<div class="toggle_button">
      <a href="javascript:void(0);" id="toggle_value">Toggle</a>
</div>

<div id='div1' style="display:none;"> 
  <!-- content -->
</div>

<div id='div2' style="display:none;"> 
  <!-- content -->
</div>

<div id='div3' style="display:none;"> 
  <!-- content -->
</div> 
```

> ***jQuery代码：***

```
$(document).ready(function() {
        $("#toggle_value").click(function(){
           $("#div1").show("fast");
           $("#div2").show("fast");
           $("#div3").show("fast");
        });
}); 
```

上面的代码在第一次单击时显示所有 div，但它应该在第一次单击时显示 div1，如前所述。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-27T08:39:02.687

我会试试我的投篮。

* * *

编辑：虽然在第二个之后，为了避免使用全局变量，最好执行以下操作

```
$(document).ready(function() {
        $("#toggle_value").click((function(){
        var counter = 0;
        return function()
        {
           $("#div" + counter).hide("fast");
           counter = (counter % 3) + 1;
           $("#div" + counter).show("fast");
        }
        })());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T08:25:27.567

您应该在函数中添加一个计数器。

```
$(document).ready(function() {
    var count = 0;

    $("#toggle_value").click(function(){
        if (count == 0) {
            $("#div1").show("fast");
            $('#div2').hide();
            count++;
        }
        else if (count == 1) {
            $("#div2").show("fast");
            ...
            count++;
        }
        else if (count == 2) {
            $("#div3").show("fast");
            ....
            count++;
        }
        else {
             $('div').hide();
             count=0;
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T09:20:45.770

这个怎么样

**[此处的工作示例](http://jsbin.com/ozape)**- 添加**/edit**到 URL 以编辑代码

```
$('html').addClass('js'); // prevent hiding divs on DOM ready from 'flashing'

$(function() {

  var counter = 1;

  $('#toggle_value').click(function() {
    $('div','#container')
      // to stop current animations - clicking really fast could originally
      // cause more than one div to show 
      .stop() 
      // hide all divs in the container
      .hide() 
      // filter to only the div in question
      .filter( function() { return this.id.match('div' + counter); })
      // show the div 
      .show('fast');

    // increment counter or reset to 1 if counter equals 3
    counter == 3? counter = 1 : counter++; 

    // prevent default anchor click event
    return false; 

  });

}); 
```

和 HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<title>Div Example</title>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<style type="text/css" media="screen">

    body { background-color: #fff; font: 16px Helvetica, Arial; color: #000; }
    .display { width:300px; height:200px; border: 2px solid #000; }
    .js .display { display:none; }

</style>
</head>
<body>
<div class="toggle_button">
      <a href="#" id="toggle_value">Toggle</a>
</div>
<br/>
<div id='container'>
    <div id='div1' class='display' style="background-color: red;"> 
        div1
    </div>

    <div id='div2' class='display' style="background-color: green;"> 
        div2
    </div>

    <div id='div3' class='display' style="background-color: blue;"> 
        div3
    </div>
<div>

</body>
</html> 
```

这可以很容易地包含在插件中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T08:26:40.920

一种简单的方法是引入一个跟踪点击次数的变量，如下所示：

```
var tracker = 0;    
$(document).ready(function() {
    $("#toggle_value").click(function(){
       if(tracker == 0)
       {
          $("#div1").show("fast");
       }else if(tracker ==1)

       etc etc

       tracker ++;

    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T08:34:47.330

我的解决方案有点不同 - 我会根据当前 div 的状态（点击时）来做。请参阅下文了解我的意思。

```
$(document).ready(function() {
    $("#toggle_value").click(function(){
       if ($("#div1).is(':visible')) { // Second click
            // Hide all divs and show d2
            $("#div1").hide();
            $("#div2").show("fast");
            $("#div3").hide();
            $("#div4").hide();
       } else if ($("#div2").is(':visible')) { // Third click
            // follow above example for hiding all and showing div3
       } else if ($("#div3").is(':visible')) { // Fouth click
            // follow above example for hiding all and showing div1
       } else { // first click
            // All divs should be hidden first. Show div1 only.
            $("#div1").show("fast");
       }
    });
}); 
```

只是警告您-我尚未测试此代码:) 基于以下确定可见性： http: [//docs.jquery.com/Frequently_Asked_Questions#How_do_I_determine_the_state_of_a_toggled_element.3F](http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_determine_the_state_of_a_toggled_element.3F)

希望能帮助到你

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-27T08:39:29.427

```
var c = 1;
$("#toggle_value").click(function()
{
   $("#div" + c).hide("fast");        
   $("#div" + ++c).show("fast");
   if (c > 3) c=1;       
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-27T08:43:20.573

我可能会做类似的事情：（以下假设你所有的`<div>`s 都在一个 id 为“container”的容器中）

```
$(document).ready(function() {
  var $allDivs = $("#container > div");
  var counter = 0;

  $("#container > div").click(function(){
    counter = counter < $allDivs.length - 1 ? counter + 1 : 0;
    $allDivs.not(":eq("+counter +")").hide("fast");
    $allDivs.eq(counter).show("fast");
  });
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-27T08:48:46.273

我更喜欢使用“过滤器”方法并使用计数器更容易一些：

```
(function () {
    var divCounter = 0, divs;

    $(function () {
        divs = $('#div1, #div2, #div3');
        $('#toggle_value').click(function (e) {
            divs.hide() // hide other divs
                .filter(function (index) { return index == divCounter % 3; }) // select appropriate div
                .show('fast'); // and show it

            divCounter++;
        });
    });

})(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-27T09:05:22.557

jQuery 中的 .toggle 函数接受任意数量的参数函数，所以问题已经解决了。请参阅事件下的文档。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-27T09:10:56.790

```
$("#toggle_value").click(function()
{
   $("#div" + (++c) % 3).show().siblings().hide();        
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-04T05:35:00.540

首先，您必须添加查询基本文件：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script> 
```

然后你必须添加以下代码：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#hide").click(function(){
            $(".slider_area").hide(1000);
            $("#show").css("display","block");
            $("#hide").css("display","none");
        });
        $("#show").click(function(){
            $(".slider_area").show(1000);
            $("#show").css("display","none");
            $("#hide").css("display","block");
        });
    });
</script> 
```

将上面的代码添加到标题部分，将下面的代码添加到正文部分。

```
<img src="images/hide-banner.png" id="hide" class="link right"/>
<img src="images/show-banner.png" id="show" class="link right dis" /> 
```

该代码已准备好用于显示和隐藏 div 的不同图像单击。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-03-01T07:05:32.303

```
<div id="div_<%=id>">
</div>
<div id="Hide_<%=id>" style="display:none;">
</div>
<div id="div_<%=id>">
</div>
<div id="Hide_<%=id>" style="display:none;">
</div>
<div id="div_<%=id>">
</div>
<div id="Hide_<%=id>" style="display:none;">
</div>
<div id="div_<%=id>">
</div>
<div id="Hide_<%=id>" style="display:none;">
</div>
<script>
var temp = 0;
var temp1 = 0;
$("#div_<%=id>").click(function(){
    if (temp1 == 0)  {
        $('#' + temp).hide();
        temp = 'Hide_<%=id>';
        $('#Hide_<%=id>').show();
        temp1 = 1;
        }
        else{
        $('#' + temp).hide();   
        temp = 'Hide_<%=id>';
        $('#Hide_<%=id>').show();
        temp1 = 0;
        }
});
</script> 
```

# c++ - 如何删除 GtkTreeView 排序箭头？

> ID：914567
> 
> 赞同：1
> 
> 时间：2009-05-27T08:21:44.033
> 
> 标签：c++, gtk, gtkmm

我需要从列标题中删除排序箭头。这可以通过调用`[set_sort_indicator(false)](http://library.gnome.org/devel/gtk/stable/GtkTreeViewColumn.html#gtk-tree-view-column-set-sort-indicator)`列来完成。

箭头没有显示，但它的空间似乎仍然被保留。如果列的标题大到足以填满所有标题，则最后一部分将被剪裁（箭头应位于的位置）。

有没有办法让标题填满整个标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T08:55:23.623

这在 GTK+ 中似乎有点奇怪。我[下载](http://ftp.gnome.org/pub/gnome/sources/gtk+/2.16/)并阅读了 GtkTreeViewColumn 代码的相关部分，它似乎使用了这个逻辑：

```
 if (tree_column->show_sort_indicator ||
       (GTK_IS_TREE_SORTABLE (model) && tree_column->sort_column_id >= 0))
    gtk_widget_show (arrow);
  else
    gtk_widget_hide (arrow); 
```

`arrow`持有箭头的小部件在哪里。这似乎表明箭头小部件总是包装在构成列标题的水平框中，然后如果它不应该是可见的，则只是隐藏（不删除）。这意味着它仍然存在于盒子中，占用空间并导致标签被剪裁。

我建议通过[GTK+ bugtracker](http://bugzilla.gnome.org/browse.cgi?product=gtk%2B)搜索有关此的问题，如果没有找到，请创建一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-04T09:32:29.913

好的，所以我已经向 gtk 提交了一个错误报告。他们说这不是问题，也不会解决。

我查看了其他图形工具包（windows、qt），它们的实现有所不同，但这对 gtk 团队中的人来说似乎并不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:02:49.090

好的，您可以**对不希望它有箭头**`set_clickable`的列使用方法， 然后将其用于信号并将其绑定到将用于获取当前排序顺序*的***函数**，然后使用.**`signal_connect``clicked`**`get_sort_column_id`*`set_sort_column_id`*****

 *****# asp.net - Visual Studio 认为我的控件丢失了，但事实并非如此。“当前上下文中不存在名称 xx”

> ID：914568
> 
> 赞同：0
> 
> 时间：2009-05-27T08:22:16.247
> 
> 标签：asp.net, visual-studio, visual-studio-2008, compiler-construction

在 Visual Studio 2008 中使用 ASP.NET 应用程序时，我的错误窗口通常包含错误列表，例如：

当前上下文中不存在名称“txtUsername”。

当我双击错误时，它将转到源，显示红色下划线的控件，然后意识到它是错误并删除那些错误。这是一个真正的痛苦，因为如果你有一个真正的错误，你必须去寻找它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T09:17:04.437

您是否尝试过构建网站？

> 构建 -> 构建网站

# .net - XSLT html 输出问题

> ID：914575
> 
> 赞同：3
> 
> 时间：2009-05-27T08:24:35.230
> 
> 标签：.net, html, xslt, xhtml

问题是，我的 XSLT 转换过程（由 .NET 调用）不会将 HTML 内容单独留在 XSLT 文件中（它不像`<img>`没有结束斜杠符号的标记那样符合 xml），所以我'会得到如下错误：

```
<pre>System.Xml.Xsl.XslLoadException: XSLT-Compilererror. ---> System.Xml.XmlException:
The 'img'-Starttag in Line XY does'nt match with the Endtag of 'td'.</pre> 
```

我怎样才能防止这种情况？

我希望 XSLT 处理器要么忽略所有不是“”元素的内容，要么让它识别有效的 html-tags..

我的 XSL-Header 看起来像这样（从 C# 复制，所以想象一下附加的“不存在”）：

```
"<xsl:stylesheet version=\"2.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" " +
"xmlns:html=\"http://www.w3.org/1999/xhtml\" xmlns=\"http://www.w3.org/1999/xhtml\" " +
"exclude-result-prefixes=\"html\">" +
"<xsl:output method=\"xhtml\" omit-xml-declaration=\"yes\" indent=\"yes\"/>" +
"<xsl:preserve-space elements=\"*\" />" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T08:32:07.507

AFAIK 没有办法解决这个问题。XSLT*是*XML 的实现，XSLT 文档的内容必须遵守 XML 标准才能编译。

将您的 HTML 修复为 XHTML 格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T08:38:50.973

您要么必须使 XSLT 中的 HTML 符合 XML（这仍然是有效的 HTML），要么如果您确实必须使 HTML 不符合 XML，则将 html 封装在 CDATA 块中。

例如：

```
<xsl:template .... >
    <![CDATA[
        <img src='...' >
    ]]>
</xsl:template> 
```

请注意，这非常难看，最好让 HTML 与 XML 兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T09:32:04.750

你想输出什么？html还是xhtml？您总是将 xslt 写为有效的 xml：

```
<img src="somepath" ... /> 
```

或者

```
<img src="somepath{withvalues}" ... /> 
```

但是你用`xsl:output`来控制它；如果你想要 html (ie) 那么你会使用：

```
<xsl:output method="html" ... /> 
```

（注意上面没有“x”） - 或：

```
<xsl:output method="xml" ... /> 
```

AFAIK，“xhtml”不是 的有效选项[`xsl:output/@method`](http://www.w3schools.com/xsl/el_output.asp)，因为它已经被“xml”覆盖。如果您*不*指定`xsl:output/@method`依赖于顶部元素（即它是否开始`<html>...</html>`），您还应该注意微妙的默认行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T10:13:44.917

XHTML 正如名称 X 所暗示的那样，XML img 标签或任何其他非封闭标签都不符合 XHTML-strict 标准。然而，为了从 HTML 到 XHTML 的轻松转换，可以使用多个“严格”级别，其中一些不兼容 XML。

如果您将 HTML 重写为 XHTML-strict，您将没有问题

# c# - 在 c# 中使用 Type.GetType() 返回的类型

> ID：914578
> 
> 赞同：15
> 
> 时间：2009-05-27T08:26:28.890
> 
> 标签：c#, generics, reflection

我有一个关于如何（如果可能的话：）使用 Type.GetType() 返回的类型引用来创建该类型的 IList 的问题？

这是示例代码：

```
Type customer = Type.GetType("myapp.Customer");
IList<customer> customerList = new List<customer>(); // got an error here =[ 
```

先感谢您 ！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-27T08:30:13.283

像这样的东西：

```
Type listType = typeof(List<>).MakeGenericType(customer);
IList customerList = (IList)Activator.CreateInstance(listType); 
```

当然你不能将它声明为

```
IList<customer> 
```

因为它不是在编译时定义的。但是`List<T>`实现了IList，所以你可以使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-01-18T00:49:52.117

我最近遇到了这个问题..我意识到这是一个老问题，但认为有人可能会发现我找到的解决方案有用（使用 net 4.0 ）。这是我的设置：

```
public interface ISomeInterface{
     String GetEntityType{ get; }
}

public abstract class BaseClass : ISomeInterface{
     public String GetEntityType { 
          get{ return this.GetType().ToString(); }
     }
}

public class ChildA : BaseClass {  }

public class ChildB : BaseClass {  } 
```

我所做的是创建一个工厂方法：

```
public static dynamic GetRealType { ISomeInterface param } {
     return Activator.CreateInstance("dllname", param.GetEntityType);
} 
```

将对象创建为动态类型为我解决了这个问题。我通过一个方法来推断类型：

```
public void DoSomething<T>(T param){

     IList<T> list = somecode...
} 
```

这允许我调用该方法并让 .net 推断类型

```
public void myMethod( ISomeInterface param ) {
     dynamic value = Factory.GetRealType ( param );
     DoSomething(value);
} 
```

希望我没有让这一切变得混乱，它实际上有帮助，也，对不起文字墙

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T08:41:32.090

Stefan 已经为您的问题提供了解决方案。

你不能这样做的原因是你不能`IList<customer>`以这种方式混合编译时和运行时类型。当我试图推理这样的事情时，一个提示是：智能感知如何找出它必须显示的成员。在您的示例中，这只能在运行时解决。

Stefan给出的答案，可以使用。但是我认为它对你的潜在问题没有帮助，因为它不会给你智能。因此，我认为您与仅使用非通用列表相比没有优势。

# sharepoint - 我需要向共享点添加一个选择字段，该字段的值取决于当前选择

> ID：914583
> 
> 赞同：2
> 
> 时间：2009-05-27T08:28:13.553
> 
> 标签：sharepoint, choice, choicefield

我需要向共享点添加一个选择字段，该字段的值取决于当前选择。

例子：

如果当前选择是打开，那么选项必须是“打开的，并且正在进行中

```
**Current selection   |  Possible selections**
Open                  |  Open,In progress
In progress           |  In progress,To be communicates,rework
Rework                |  Rework,In Progress 
```

...

这样我就强迫用户遵循一些特定的流程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T12:14:31.863

我认为您不会立即使用此字段行为，但您可以通过实现自己的[CustomFieldType](http://msdn.microsoft.com/en-us/library/bb684919.aspx)来归档它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-02T02:39:06.580

看看这个：[ www.sharepointsnippets.com/post/2009/01/Cascading-Dropdown---Configuration.aspx ] 您无需下载任何第三方软件。否则，只需 google **SharePoint 级联/级联查找**就有很多这样的商业工具。

希望这个片段有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T19:15:31.843

您可以通过编辑列表的 EditForm.aspx 页面并向页面添加一些 JavaScript 来实现这种行为。

尽管我似乎找不到任何制作相关下拉列表的示例，但有几个修改 EditForm 以隐藏字段或使其只读的示例：

*   [将字段设为只读](http://cakriwut.wordpress.com/2006/07/31/how-can-javascripters-create-custom-editform-without-understanding-caml-and-net/)
*   [在编辑表单上隐藏整行](http://www.cleverworkarounds.com/2008/02/07/more-sharepoint-branding-customisation-using-javascript-part-1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-30T04:02:40.190

所以这些是两列，其中一列过滤另一列？

听起来像一个级联下拉列表，那里有一些（商业）解决方案。免费查看 [http://cascddlistwithfilter.codeplex.com](http://cascddlistwithfilter.codeplex.com) 。

# configuration - SubSonic 配置 - 如何忽略某些表格

> ID：914586
> 
> 赞同：2
> 
> 时间：2009-05-27T08:28:59.027
> 
> 标签：configuration, subsonic

在数据库中，我有大约 150 个表 - 其中大部分来自我目前正在处理的应用程序的早期版本。对于我的应用程序，我只需要大约 20 个表 - 有没有办法通过在 web.config 中设置一些参数来忽略一些表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-27T08:48:26.960

假设您有名称为 Table1、Table2、Table3 的表，并且您只想使用 Table1 和 Table3

您可以使用**excludeTableList**或**includeTableList**属性来控制它。

*包含表列表*

```
<add name="YourProvider" type="SubSonic.SqlDataProvider, SubSonic" 
 connectionStringName="YourConnection" 
 generatedNamespace="YourNamespace" includeTableList="Table1, Table3"/> 
```

*排除表列表*

```
<add name="YourProvider" type="SubSonic.SqlDataProvider, SubSonic" 
 connectionStringName="YourConnection" 
 generatedNamespace="YourNamespace" excludeTableList="Table2"/> 
```

通常，如果您要包含的表很少，您将使用**includeTableList**，因此您必须输入更少的名称。您也可以像这样使用 * 通配符 includeTableList="Table*" />

*viewStartsWith*

如果您的视图以 vw_ 开头，您可以添加以下选项：

```
viewStartsWith="vw_" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T08:39:52.547

是的，您可以使用 excludeTableList：[请参见此处](http://subsonicproject.com/configuration/defining-which-tables-and-views-you-want-to-generate-code-for/)

# java - 将java设置为使用一个cpu

> ID：914588
> 
> 赞同：8
> 
> 时间：2009-05-27T08:29:09.837
> 
> 标签：java, solaris, cpu-usage

我有一个应用程序具有一定数量的 cpus 的许可证，并且我希望能够在检查完成之前将 java 运行的 cpus 数量设置为 1。我正在运行 Solaris 并查看过`pbind`但认为如果我启动应用程序然后使用 pbind 它会在设置 java 可以使用的 CPU 数量之前检查许可证。

有谁知道在 Solaris 上使用一定数量的 CPU 启动应用程序的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-27T08:47:26.930

这是一种解决方法，但使用 Solaris 10，您可以设置一个具有单个 CPU 可用的区域，然后在该区域内运行应用程序。

如果您想在不运行完整应用程序的情况下进行测试，那么这部分 Java 很可能是他们用来获取 CPU 数量的：

```
Runtime runtime = Runtime.getRuntime();
int nrOfProcessors = runtime.availableProcessors(); 
```

一个完整的例子[在这里](http://www.javadb.com/get-number-of-available-processors)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T09:49:08.897

这不是一个完整的解决方案，但可能足以发展成一个。肯定`java`存在进程存在的点（因此可以由 控制`pbind`），此时它还没有运行代码来进行处理器检查。如果您可以暂停应用程序本身的启动，直到 pbind 完成它的工作，这应该没问题（假设 pbind 的想法将从 CPU 检查的角度工作）。

一种绝对应该在适当位置暂停 JVM 的方法是远程调试器的套接字附加并从挂起模式开始。如果将以下参数传递给`java`调用：

> -Xdebug -Xrunjdwp:transport=dt_socket,address=8000,suspend=y,server=y

然后 JVM 将在启动 java 进程后但在执行主类之前暂停，直到调试器/代理连接到端口 8000。

因此，也许可以使用包装脚本在后台使用这些参数启动程序，休眠一秒钟左右，使用 pbind 将 java 进程的处理器数量设置为一个，然后附加和分离一些代理到端口 8000（这足以让 Java 继续执行）。

这个想法的缺陷或潜在的问题是在调试模式下运行是否会显着影响您的应用程序的性能（它似乎总体上没有太大影响），您是否可以控制某种无操作 JDWP 代理命令行，以及您是否能够在机器上打开端口。这不是我之前尝试过的自动化（尽管我在`nice`释放 Java 进程之前以手动方式使用了大致相似的方法来增加 Java 进程的灵活性），因此我可能忽略了其他问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T17:35:05.820

我认为对您的问题最直接的答案是使用 pbind 绑定正在运行的 shell 进程，然后从该 shell 启动 Java。根据手册页，pbind 的效果由从绑定进程创建的进程继承。尝试这个：

```
% pbind -b 0 $$
% java ... 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-27T08:39:13.623

谷歌搜索，我发现你是对的，*pbind*将进程绑定到处理器。

更多信息和示例请访问：[http ://docs.sun.com/app/docs/doc/816-5166/pbind-1m?a=view](http://docs.sun.com/app/docs/doc/816-5166/pbind-1m?a=view)

# c++ - 有没有办法配置MSVS静态代码分析的细节？

> ID：914595
> 
> 赞同：3
> 
> 时间：2009-05-27T08:30:28.493
> 
> 标签：c++, visual-studio, configuration, code-analysis

MSVS（用于 C++）中的静态代码分析工具有大量误报，其中一些在 Windows SDK 文件中。有没有办法配置它以提高质量并忽略稳定的 SDK 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-10-27T20:54:41.990

最后我找到了我正在寻找的东西 - 这是直接来自 MSDN 的[http://msdn.microsoft.com/en-us/library/zyhb0b82.aspx](http://msdn.microsoft.com/en-us/library/zyhb0b82.aspx "如何：启用和禁用特定 C/C++ 警告的代码分析")的答案（VS2010 特定）：

```
#include <codeanalysis\warnings.h>
#pragma warning( push )
#pragma warning ( disable : ALL_CODE_ANALYSIS_WARNINGS )
#include <third-party include files here>
#pragma warning( pop ) 
```

# c++ - 关于 L 系统的信息

> ID：914596
> 
> 赞同：7
> 
> 时间：2009-05-27T08:30:34.157
> 
> 标签：c++, algorithm, procedural-programming, procedural-generation, l-systems

我即将为大学启动一个项目，为现有项目建立一个程序城市。

我想知道你们中是否有人以前有过 L-Systems 编码的经验，并且知道一个适合我开始的地方。在使用程序方法和 Perlin Noise 和 fBm 之前，我做了一些工作，所以我得到了分形意义上的 L-System 的前提。我更多的是寻找一个可以推动我向 L-System 编码方向发展的地方。您可以向我指出的任何帮助或技术文档都会很棒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-27T08:35:30.403

我做了一个关于使用 L-Systems 程序化生成 3D 树的项目，发现“[植物的算法之美](http://algorithmicbotany.org/papers/#abop)”一书很有帮助。它可以在该链接上免费获得。我认为与程序城市没有直接关系，但非常有趣，并且是学习 L-Systems 的好资源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-09-27T03:15:45.387

我也在做一个 L 系统项目，查看一些预先存在的代码非常有帮助：[lsystem.py -](http://www.berniepope.id.au/html/pycol/lsystem.py.html)[自然计算基础中](https://rads.stackoverflow.com/amzn/click/com/1584886439)还有伪代码，我发现它真的很有帮助。它带您完成使用海龟图形创建一个简单的 L 系统树的过程，并快速转向更高级的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-27T08:33:27.927

嗯……我先把[维基百科](http://en.wikipedia.org/wiki/L-system)链接交给你，它看起来相当丰富，并且有很多自己的外部链接。

# .net - 在 SQL Server 中使用 C# 程序集

> ID：914598
> 
> 赞同：4
> 
> 时间：2009-05-27T08:30:41.783
> 
> 标签：.net, sql-server, sql-server-2005, clr

我有我从 asp.net 应用程序调用的 ac# 类库。该程序集为学生计算成绩并使用数据表等执行计算。

如何在 SQL Server 2005 中使用此程序集并为数据库表中的每条记录调用一次？我想重用功能并避免用 T-SQL 编写东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-27T08:48:34.633

要在 SQL Server 中使用 .Net 程序集，您需要在 SQL Server 中启用 CLR 集成。[MSDN](http://msdn.microsoft.com/en-us/library/ms131046(SQL.90).aspx)上的这个部分有一些很好的例子。

由于您已经在.Net中拥有逻辑，在那里完成所有工作不是更好吗？随着应用程序的增长，最好将所有业务逻辑保留在代码中并将数据库用作数据存储。

# iphone - 如果我安装了 3.0 SDK，我还能制作兼容 2.0 的应用程序吗？

> ID：914602
> 
> 赞同：1
> 
> 时间：2009-05-27T08:32:15.447
> 
> 标签：iphone, macos, sdk, app-store

我一直在推迟安装 3.0 beta SDK，以防我无法让应用程序以 2.0 为目标。如果我在我的电脑和 iPhone 上安装了 3.0，我是否仍然可以将应用程序提交到应用商店供拥有 2.0 iPhone 的用户下载？我是否必须等到 3.0 发布才能提交更多应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T12:00:41.423

**实际上，我建议在 OS 3.0 上进行测试，**因为这是您的应用程序不会在新操作系统上中断的要求。

> “新的 iPhone 应用程序将被拒绝，除非它们为苹果即将推出的 iPhone 3.0 固件升级做好准备，开发人员已获悉。”

您仍然可以为 2.* 构建，但我可以看到仅在一台设备上进行测试会让您感到紧张。**一旦安装了 3.0，就无法回滚到以前的操作系统**。因此，如果此设备也是您的日常手机，请确保您接受可能存在的错误。（虽然我没有听说过任何严重的问题。OS 3.0 是值得的）

至于你解决的问题。苹果 说：

> “iPhone SDK for iPhone 3.0 不能用于向 App Store 提交 iPhone OS 2.2.1 应用程序。”

我认为他们没有很好地表达自己。虽然从技术上讲，他们是对的，**您只需选择适用于 2.2.1 的 SDK，一切顺利。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T11:17:40.667

是的，您可以构建 2.* 应用程序。不，您不能将 3.0 之前的应用程序提交到应用商店。由于我是新用户，因此无法为您粘贴链接，因此只需 google “iPhone 3.0 app submit”即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-11T13:01:07.653

我知道您前段时间写了这篇文章，并且您已经接受了答案，但我还有一些建议：

1.  [您应该按照这些说明](http://www.atnan.com/2009/7/10/running-two-or-more-versions-of-xcode-for-stable-beta-iphone-development)安装 SDK 的两个副本，最新的稳定版本（在“/Developer”中）和最新的 beta 版本（在“/Developer Beta”或类似版本中）。
2.  为构建 2.x 应用程序，按照[这些说明](http://www.clarkcox.com/blog/2009/06/23/sdks-and-deployment-targets/)将“Base SDK”设置为 3.0，将“iPhone OS 部署目标”设置为 2.2.1 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-23T17:10:08.230

[如果您不喜欢http://www.felixbruns.de/iPod/firmware/](http://www.felixbruns.de/iPod/firmware/)上的新软件，您可以免费获得或回滚

下载然后按照以下步骤

1.) 下载后打开 iTunes 并插入你的 ipod/iphone 2.) 如果在 windows 上按住 shift (Mac 上的 Option 键) 然后点击 resotre 3.) 选择 ipod 文件然后等待恢复 4.) 你需要设置为新的 ipod（如果从备份中恢复会很慢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-25T00:36:19.430

3.0 SDK的安装提到[了weaklinked框架](http://adcdownload.apple.com/iphone/iphone_sdk_3.0__final/iphone_os_3.0_sdk_readme.pdf)——

> Xcode UI 现在允许您将库或框架指定为弱链接，以支持使用较新的 SDK 进行构建，同时针对较旧的 OS 版本。

我还没有做到这一点，但一旦弄清楚就会更新。

# visual-studio-2008 - 调试对象快照

> ID：914604
> 
> 赞同：0
> 
> 时间：2009-05-27T08:32:18.287
> 
> 标签：visual-studio-2008, debugging

我想知道在 VS2008 中调试时是否可以“快照”一个对象，基本上我正在使用 WCF 服务并希望能够调试我的对象，并且只要我想在 IIS 杀死我之前查看它的属性就可以花费过程。

是否可以将整个对象移动到隔离中以便我可以继续查看它？

对象不是很大，我只关心它的属性，不需要调用其他调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T08:38:45.700

如果您只需要检查对象而不是单步执行应用程序，则可以创建内存转储并对其进行调试。查看[适用于 Windows 的调试工具](http://www.microsoft.com/whdc/devtools/debugging/)。

# c# - 保持 LinqToSQL 与数据库同步

> ID：914606
> 
> 赞同：2
> 
> 时间：2009-05-27T08:32:52.747
> 
> 标签：c#, visual-studio-2008, linq-to-sql, .net-3.5

我打算用 asp.net 3.5 和 LinqToSQL 开发一个新网站。出于可维护性的目的，如果将属性添加到数据库中的表中，我该如何修改 Linq 类？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-27T08:45:08.090

不幸的是，LinqToSQL 在 Visual Studio 中没有同步支持。选项包括：

1.  删除表并再次添加。当然，任何自定义更改都会丢失
2.  直接编辑 .dbml 文件文件并添加属性。该文件具有 xml 内容，保存时将重新生成 .cs 文件。
3.  使用第 3 方插件，例如：
    *   [http://www.huagati.com/dbmltools/](http://www.huagati.com/dbmltools/)
    *   [http://www.perpetuumsoft.com/Product.aspx?lang=en&pid=55&tid=linqtosqlsynchronization](http://www.perpetuumsoft.com/Product.aspx?lang=en&pid=55&tid=linqtosqlsynchronization)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T08:39:00.380

每次更改底层数据库时都需要重新生成模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-04-10T11:20:36.273

如果您不需要自定义数据模型，或者您可以通过`partial`类简单地自定义它，那么您可以使用它`SQLMetal.exe`来生成您的数据模型。它带有 .NET 3.5，并且有几个人在网上写了关于制作批处理文件的文章，您可以运行这些批处理文件来自动化该过程。

*   [http://csainty.blogspot.com/2008/02/linq-to-sql-sqlmetalexe.html](http://csainty.blogspot.com/2008/02/linq-to-sql-sqlmetalexe.html)
*   [http://blog.benhall.me.uk/2007/08/power-of-sqlmetal.html](http://blog.benhall.me.uk/2007/08/power-of-sqlmetal.html)

然后，如果您更新数据库，只需运行批处理文件，一切都会再次同步！

# git - 使用 git 保持对移动目标（例如 Linux）的更改

> ID：914608
> 
> 赞同：2
> 
> 时间：2009-05-27T08:33:04.680
> 
> 标签：git, linux-kernel

我有一组更改可以完美地针对某个 linux 版本，比如 2.6.25.4。

我有一个 git 树，并从标签 v2.6.25.4 创建了一个跟踪分支 vanilla-2.6.25.4。我由此创建了一个名为 my-changes-2.6.25.4 的分支，并完成了我所有的工作。

现在，我想将我的工作重新建立在任意较新版本的 Linux 之上。说 2.6.28.9。实现这一目标的最佳 git 工作流程是什么？

我知道如何从 2.6.28.9 创建一个新分支，但是执行类似 'git merge my-changes-2.6.25.4' 之类的操作会引起我不感兴趣的其他事情的各种冲突。无论如何，这似乎已经坏了。

我尝试从我的工作 my-changes-2.6.25.4 创建一个新分支，并执行 git rebase 2.6.28.9，假设这会将我的更改从 2.6.25.4 应用到 2.6.28.9 之上，但这给了我很多与我所做的任何更改无关的冲突。

我不确定这样做的正确方法是什么。我正在使用稳定的 linux 树[http://www.kernel.org/pub/scm/linux/kernel/git/stable/linux-2.6-stable.git](http://www.kernel.org/pub/scm/linux/kernel/git/stable/linux-2.6-stable.git)，我认为一些问题可能源于事实版本化标签 v2.6.xy 并非都来自同一血统。

有谁知道如何正确地做到这一点？额外的功劳是设计了一种通过二进制搜索尽可能自动前进的方法，以找到 Linux 通过更改接口破坏我的代码的下一个位置，但我想一旦我知道我实际上想要做什么，我可以自己自动化它.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T09:00:48.790

您的第二种方法听起来很正确——但是您是如何调用 rebase 的？您需要告诉它您正在更改哪个是您的基本修订版。我认为你需要类似的东西

```
# on changes-2.6.25.4
# make new branch
git checkout -b changes-2.6.28.9
# double-check local changes to transport
git log --pretty=oneline v2.6.25.4..
# transport changes to be against new base
git rebase --onto v2.6.28.9 v2.6.25.4
# should now have the same changes
git log --pretty=oneline v2.6.28.9.. 
```

避免在变基过程中被淘汰的另一种可能性是获取本地更改列表并使用“git cherry-pick”命令将它们手动添加到基于 v2.6.28.9 的新分支中。实际上，这实际上与 rebase 相同，但从某种意义上说，您可以更好地控制自己在做什么。

我认为你关于为什么这是一个问题的推理是正确的：v2.6.28.9 不是 v2.6.25.4 的后代 - 所以默认情况下 rebase 会尝试包含 v2.6.26..v2.6.25 中的所有更改.4 和你的一样，如果你只是做了“git rebase v2.6.28.9”。单参数变基将尝试将您的本地更改作为“git log $1..HEAD”，然后将它们应用回“$1”之上 - 所以你可以看到只有当变基的参数是一个分支时才有意义已经更新。如果您像以前一样重新使用相同的标签，则不会发生任何事情。如果您使用不同的标签进行变基，您会将其他人的更改与您的更改混合在一起。您需要将一个标签重新定位到另一个标签上。

# c++ - Ctrl-C 对 C++ Win32 控制台应用程序究竟有什么影响？

> ID：914613
> 
> 赞同：17
> 
> 时间：2009-05-27T08:34:28.797
> 
> 标签：c++, winapi, console, copy-paste

1.  是否有可能以某种方式处理此事件？
2.  在堆栈展开和静态/全局对象的释放方面会发生什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-27T08:42:00.920

控制台应用程序中的 Ctrl-C 将生成一个信号。此信号的默认处理程序调用 ExitProcess 来终止应用程序。[您可以通过使用SetConsoleCtrlHandler](http://msdn.microsoft.com/en-us/library/ms686016(VS.85).aspx)函数为信号设置自己的处理函数来覆盖此行为。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-27T08:37:46.280

编辑：SIGINT，而不是 SIGTERM。Assaf 报告说，没有任何对象因未经处理的 SIGINT 而被破坏（至少在 Windows 上）。

系统发送一个 SIGINT。这个概念适用于所有 C 实现（有一些差异）。为了处理它，你调用信号，指定一个信号处理程序。[请参阅Open Group](http://msdn.microsoft.com/en-us/library/xdkz3x12(vs.71).aspx)和[MSDN](http://msdn.microsoft.com/en-us/library/xdkz3x12(vs.71).aspx)上有关信号功能的文档。

第二个问题有点棘手，可能取决于实施。最好的办法是处理信号，它允许您使用`delete`和`exit()`手动。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-27T08:49:19.640

您可以使用一些简单的代码测试是否发生堆栈展开：

```
#include <iostream>
#include <windows.h>
using namespace std;

struct A {
    ~A() { cerr << "unwound" << endl; }
};

int main() {
    A a;
    while(1) {
        Sleep(1000);
    }
} 
```

它是否发生不应该取决于实现，取决于运行时如何处理 Ctrl-C。根据我的经验，它不会发生。

# ftp - 下载网络目录的内容？

> ID：914624
> 
> 赞同：1
> 
> 时间：2009-05-27T08:37:06.950
> 
> 标签：ftp, webserver

如果我有`example.com/dir`并且`dir`基本上是`example.com`服务器中的一个文件夹，我怎样才能将文件夹的内容下载到我的硬盘上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-27T08:46:43.593

这是一个网络服务器，你通过网络下载吗？然后（通过 shell 访问）您可以尝试：

```
$ wget --wait 2 -rkc --no-parent http://example.com/dir 
```

也适用于 ftp。

# python - 如何在 Python 中保存文件的缩进格式

> ID：914626
> 
> 赞同：1
> 
> 时间：2009-05-27T08:37:48.090
> 
> 标签：python

我正在保存文件中的所有单词，如下所示：

```
 sentence = " "
   fileName = sys.argv[1]
   fileIn = open(sys.argv[1],"r")
   for line in open(sys.argv[1]):
      for word in line.split(" "):
         sentence += word 
```

输出时一切正常，除了格式。我正在移动源代码，有什么办法可以保存缩进？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-27T08:43:44.880

既然您声明要*移动源代码文件*，为什么不直接复制/移动它们呢？

```
import shutil
shutil.move(src, dest) 
```

如果您阅读源文件，

```
fh = open("yourfilename", "r")
content = fh.read() 
```

应该按原样加载文件（带有缩进），还是不加载？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-27T08:59:02.383

调用`line.split()`时，会删除所有前导空格。

将文件读入单个字符串有什么问题？

```
textWithIndentation = open(sys.argv[1], "r").read() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T08:57:57.907

拆分删除所有空格：

```
>>> a="   a b   c"
>>> a.split(" ")
['', '', '', 'a', 'b', '', '', 'c'] 
```

如您所见，生成的数组不再包含任何空格。但是你可以看到这些奇怪的空字符串（''）。他们表示有一个空间。要恢复拆分的效果，请使用`join(" ")`：

```
>>> l=a.split(" ")
>>> " ".join(l)
'   a b   c' 
```

或在您的代码中：

```
sentence += " " + word 
```

或者您可以使用正则表达式来获取行首的所有空格：

```
>>> import re
>>> re.match(r'^\s*', "   a b   c").group(0)
'   ' 
```

# c# - C# 中例行数据库作业的计划任务或服务？

> ID：914627
> 
> 赞同：1
> 
> 时间：2009-05-27T08:38:01.987
> 
> 标签：c#, sql-server, clr, scheduled-tasks

我有一个 Web 服务器和一个数据库服务器，我想运行一个使用现有 C# DLL 访问数据库并执行一些计算的作业。

在 C# 中创建控制台应用程序并将其安排在 Web 服务器（应用程序服务器）上以针对数据库服务器运行的最简单方法是什么？

我认为 SSIS 是一种选择，但我不太了解，所以我认为将控制台应用程序安排为任务是最好的。

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T17:40:38.383

我是控制台应用程序 + 计划任务方法的忠实粉丝。它往往更清洁，更容易测试，并且如果出现问题，也更容易重新运行。也就是说，如果您可以用纯 SQL 编写计算，则可以将所有内容作为 SQL 作业运行。或者，您可以利用 SQLCLR（存在于 SQL Server 中并且基本上显示为 sproc 或 UDF 的 .NET 程序集），并且还可以完全在 SQL 作业引擎中运行事物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T08:44:13.193

如果工作非常小，您不需要为此编写单独的控制台应用程序。您可以单独编写一个页面并编写一个批处理文件，即相同的调度程序来调度它。您也可以通过窗口的用户界面安排它。除此之外，如果您的工作是维护计划的计划/步骤（例如重新索引、备份数据库、碎片整理、清理历史记录/日志等），则在“管理”下从您的 sql 服务器为其创建维护计划" 文件夹可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T08:52:08.777

您还可以从 PowerShell 脚本调用 C# DLL，并将该脚本作为计划任务执行。

对于需要在后台立即采取行动的操作，我更喜欢为我的每个项目提供服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T09:43:20.530

您可以使用 Quartz.NET 库 (quartznet.sourceforge.net) 在您的控制台应用程序中进行调度，它是开源的并且可以完美运行！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T09:51:14.773

是的，最简单的解决方案是创建一个单独的控制台应用程序并将其作为计划任务运行。

您可以访问 Web 服务器，并且所有工具都已经就位，无需安装任何其他工具。

# com - GetObject 和 VB6 ActiveX exe

> ID：914628
> 
> 赞同：8
> 
> 时间：2009-05-27T08:38:07.637
> 
> 标签：com, vb6, activex

GetObject的 VB6[帮助](http://msdn.microsoft.com/en-us/library/aa445016(VS.60).aspx)说“您不能使用 GetObject 来获取对使用 Visual Basic 创建的类的引用”（最后一句！）。我的 VB6 GUI 将对象公开为 ActiveX exe，以供其他组件操作。我希望其他组件连接到已经运行的 GUI，而不是启动 exe 的新实例。如果您使用以下语法，我发现使用 GetObject 确实有效：

```
Set myobj = GetObject("", "ProjectName.ClassName") 
```

我担心帮助说这不应该起作用，尽管我已经做了很多测试并且到目前为止还没有发现任何问题。任何 COM 专家可以告诉我我是否会遇到问题？无论如何，我可以使用 CreateObject 吗？

ActiveX exe 设置为：只有一个线程的线程池。该类具有 MultiUse 实例化。无论如何，这些设置可能足以阻止 CreateObject 启动 exe 的新实例。那是对的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-27T15:55:22.887

该文档令人困惑，但正确。您引用的 MSDN 页面有助于解释为什么您的`GetObject`调用不会引发错误：

> 如果***路径名***[*第一个参数*] 是零长度字符串 ("")，则**GetObject**返回指定类型的新对象实例。如果省略路径名参数， **GetObject**返回指定类型的当前活动对象。如果不存在指定类型的对象，则会发生错误。

这很微妙，但含义是

```
GetObject "", "ProjectName.ClassName 
```

实际上相当于

```
CreateObject "ProjectName.ClassName" 
```

也就是说，将一个空字符串传递给 的第一个参数`GetObject`使其运行方式与 完全相同`CreateObject`，这意味着它将创建该类的**新实例**，而不是返回对已运行实例的引用。

回到 MSDN 摘录，它提到完全省略第一个参数`GetObject`将导致`GetObject`返回对已运行实例的引用（如果存在）。这样的调用看起来像这样：

```
GetObject , "ProjectName.ClassName" 'Note nothing at all is passed for the first argument' 
```

但是，如果您尝试这样做，您将立即收到运行时错误。当文档说它`GetObject`不适用于使用 VB6 创建的类时，这就是文档所指的用例。

这不起作用的原因是`GetObject`它的魔力如何发挥作用。当省略第一个参数时，它会尝试通过查询运行对象表 (ROT) 来返回现有对象实例，ROT 是一个包含正在运行的 COM 对象的机器范围的查找表。问题是对象必须由创建它们的进程在运行对象表中显式注册，以便其他进程可以访问 - VB6 运行时不会在 ROT 中注册 ActiveX EXE 类，因此`GetObject`无法检索对已运行实例的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-09-23T18:33:59.020

> 我希望其他组件连接到已经运行的 GUI，而不是启动 exe 的新实例。

诀窍是要记住，在 ActiveX EXE 中，它可以设置为只有一个 LIBRARY 实例在运行。正确的是，您无法跨进程边界访问并仅提取类的给定实例。但是，可以设置 ActiveX EXE，以便任何类实例都可以访问 GLOBAL 变量。

如何准确地做到这一点变得有点复杂。您可以将 ActiveX EXE 用作普通 EXE，主要区别在于您必须使用 Sub Main。您还可以检查它是否独立运行。现在我假设 MarkJ 的应用程序就是这种情况。

如果是这种情况，您需要创建一个应用程序类并对其进行设置，以便在创建它时（通过使用 Class_Initialize）填充当前正在运行的表单和集合实例。

我强烈建议您创建一个 ActiveX DLL（不是 EXE），它除了作为接口实现的类之外什么都没有。而不是去

```
'Class ThisGUIApp
Public MainForm as Form 
```

您创建一个接口，该接口具有访问主窗体元素所需的所有属性和方法。然后你走

```
'Class ThisGUIApp
Public MainForm as IMainForm

Private Sub Class_Initialize
  Set MainForm = frmMyMainForm
End Sub

'Form frmMyMainForm
Implements IMainForm 
```

您这样做是因为虽然您可以跨应用程序进程发送表单，但当您尝试访问它的成员和控件时，事情会变得不稳定。如果您通过接口进行分配，那么连接会更加稳固。另外，它可以更好地记录您尝试做的事情的类型。

# sql - 具有聚集索引的表中的 DELETE 命令太慢

> ID：914637
> 
> 赞同：12
> 
> 时间：2009-05-27T08:39:33.450
> 
> 标签：sql, sql-server-2005

我有一个名为 FTPLog 的相当大的表，其中包含大约 300 万条记录，我想添加一个删除机制来删除旧日志，但删除命令需要很长时间。我发现删除聚集索引需要很长时间。

```
DECLARE @MaxFTPLogId as bigint
SELECT @MaxFTPLogId = Max(FTPLogId) FROM FTPLog WHERE LogTime <= DATEADD(day, -10 , GETDATE())
PRINT @MaxFTPLogId
DELETE FROM FTPLog WHERE FTPLogId <= @MaxFTPLogId 
```

我想知道如何提高删除性能？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-27T08:50:30.013

它可能很慢，因为大删除会生成大事务日志。尝试分块删除它，例如：

```
WHILE 1 = 1
BEGIN
    DELETE TOP (256) FROM FTPLog WHERE FTPLogId <= @MaxFTPLogId
    IF @@ROWCOUNT = 0
        BREAK
END 
```

这会产生较小的交易。它通过为其他进程创造喘息空间来缓解锁定问题。

您还可以查看[分区表](http://msdn.microsoft.com/en-us/library/ms345146.aspx)。这些可能允许您通过删除整个分区来清除旧条目。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-27T08:48:35.570

由于它是一个日志表，所以没有必要进行集群。

您不太可能在`Id`.

改变你的`PRIMARY KEY`，使其不成簇。这将使用`HEAP`更快的存储方法`DML`：

```
ALTER TABLE FTPLog DROP CONSTRAINT Primary_Key_Name
ALTER TABLE FTPLog ADD CONSTRAINT Primary_Key_Name PRIMARY KEY NONCLUSTERED (FTPLogId) 
```

，然后发出：

```
SELECT @MaxFTPLogTime = DATEADD(day, -10 , GETDATE())
PRINT @MaxFTPLogId
DELETE FROM FTPLog WHERE LogTime <= @MaxFTPLogTime 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T08:49:20.343

检查表的密度（使用命令 DBCC showcontig 检查密度） **Scan Density [Best Count:Actual Count]**此参数应接近 100%，**Logical Scan Fragmentation**参数应接近 0%，以获得表的最佳性能。如果不是，请重新索引并重新划分该表的索引以提高查询执行的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T09:05:24.150

我假设这个表不仅在行数方面很大，而且当您尝试清理它时，它确实被大量用于记录新条目。

Andomar 的建议应该会有所帮助，但是当没有插入时我会尝试清理它。

**替代方案：**当你写日志时，你可能不太关心事务隔离。因此，我会更改写入日志条目的代码/进程的事务隔离级别，这样您*就*可以避免创建巨大`tempdb`的（顺便说一下，检查 tempdb 在此 DELETE 操作期间是否增长很多）

另外，我认为从聚集索引中删除不应该比非聚集索引更慢：您仍然在*心理上*删除行。之后重建此索引可能需要一些时间。

# multithreading - 如何知道代码是在 ui 线程还是工作线程上运行（MFC Visual C++）

> ID：914646
> 
> 赞同：5
> 
> 时间：2009-05-27T08:41:39.283
> 
> 标签：multithreading, visual-c++, mfc, user-interface

我有一个从应用程序中的不同线程调用的函数。我需要知道执行代码的线程是主线程（ui线程）还是工作线程。

有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-27T09:53:35.563

如果您使用的是 MFC 应用程序，请使用以下代码。

```
if(GetCurrentThreadId() == AfxGetApp()->m_nThreadID)
{
    //Main Thread
}
else
{
    //Not Main Thread
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-27T08:45:35.857

使用**GetCurrentThread()**或**GetCurrentTreadId()**并将其与已知的 HANDLE 或主线程的 id 进行比较。

> 不能有多个 UI 线程吗？

当然可以，但只有一个*主*ui 线程。

> 行。但是，有没有办法从这段代码中知道主线程的 HANDLE 或 ID？我的意思是像 GetMainThread 或 GetMainThreadID 这样的东西。我不想修改应用程序的其他部分（如果可能）。顺便说一句，谢谢你的回答。

对不起，我出去吃午饭了，你已经得到了答案。但还是不妨回复一下。GetCurrentThreadId() 当然可以在你的主 ui 线程执行期间使用，并被缓存以供以后比较。在您的应用程序执行期间的某处，将只有一个线程，例如在创建任何其他线程之前在 WinMain() 中。

干杯！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-16T22:40:38.517

AfxGetApp()->GetMainWnd()

如果从主线程调用，将返回与 AfxGetMainWnd() 将返回的相同内容。

# c# - 如何根据指定的 DTD 验证 xhtml 文件？

> ID：914648
> 
> 赞同：1
> 
> 时间：2009-05-27T08:41:49.360
> 
> 标签：c#, validation, xhtml, dtd

我得到了我的资源文件

```
string filePath = Assembly.GetExecutingAssembly().GetName().Name+"." + resourceFileName;    
Stream fileStream = Assembly.GetExecutingAssembly().GetManifestResourceStream(filePath); 
```

现在我必须使用 fileStream 将我的 xhtml 文件与嵌入在资源文件中的 DTD 进行比较。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T09:00:28.417

好吧，我以为我知道的答案（[XmlValidatingReader](http://msdn.microsoft.com/en-us/library/system.xml.xmlvalidatingreader.aspx)）现在已弃用/过时，具体取决于您的平台，但替换似乎很简单。[这里](http://asp.dotnetheaven.com/howto/doc/Xml/ValidationReadingXML.aspx)和[这里](http://jerrytech.blogspot.com/2008/12/validate-xmlxsd-using-xmlreadersettings.html)的例子。

# java - 文本小部件的 SWT 拖放支持

> ID：914654
> 
> 赞同：2
> 
> 时间：2009-05-27T08:44:17.467
> 
> 标签：java, swt, drag-and-drop

我最近使用 SWT 编写了一个应用程序。在其中一个对话框中，我有一些小部件，其中之一是 Text，它旨在支持 DND 与其他小部件。我首先在同一个对话框（拖动源和放置目标）上添加了对 2 树小部件的 DND 支持。在我为那个 Text 小部件添加 DND 支持之前，我注意到在 Linux 平台 (gtk) 上，SWT Text 小部件自动获得拖放支持。也就是说，我已经可以从其他 Tree 小部件拖放到此 Text 上（在要插入的任何位置），以及从此 Text 中选择任何文本并将其拖动到其他 Tree 或 Text 小部件。

但是，这仅适用于 Linux 平台，不适用于 Windows。同一个程序，如果在 Windows 上运行，则不会对该文本小部件提供任何 DND 支持（树小部件当然支持 DND，因为我专门为它们编写）。

所以这也是我想在 Windows 上实现的目标：

1.  在文本小部件中的任何位置放置文本。
2.  在下降之前和悬停时，能够清楚地看到插入符号的位置，即预期下降的位置。插入符号位置应随鼠标光标移动。
3.  支持文本小部件中的多行

解决方案：

```
DropTarget target = new DropTarget(sytledText, DND.DROP_MOVE | DND.DROP_COPY);
target.setTransfer(new Transfer[] { TextTransfer.getInstance() });
target.addDropListener(new StyleTextDropTargetEffect(sytledText)); 
```

1.  使用 StyledText 而不是 Text 小部件
2.  使用 StyledTextDropTargetEffect（或扩展它）并将其添加为拖放侦听器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-22T12:24:39.983

1.  &
2.  AFAIK 在 Windows 中，您不能轻松地使用 Text 小部件来做到这一点。在放置时，您可以在最后一个光标位置或文本末尾插入文本。您可以考虑使用 StyledText 小部件，它支持在任何位置放置和“插入符号悬停”。
3.  Text 和 StyledText 都支持多行的 SWT.MULTI 样式。

[您可以在SWT 片段](http://www.eclipse.org/swt/snippets/)页面上找到许多很棒的代码片段，包括使用 StyledText 小部件进行拖放的示例。[SWT 中对 DND](http://www.eclipse.org/articles/Article-SWT-DND/DND-in-SWT.html)也有很好的介绍。

# mysql - mysql：如何释放空间（innodb）

> ID：914658
> 
> 赞同：6
> 
> 时间：2009-05-27T08:45:26.467
> 
> 标签：mysql

我有一个配置了 innoDB 存储引擎的 mysql 数据库。我删除了数据库（`drop database <dbname>`），但磁盘空间尚未释放。

那里有`/var/lib/mysql`一些名为 的“大”文件`ib_logfile0`，`ib_logfile1`而`ibdata1`最后一个文件非常大。我认为这些文件实际上是原始数据库。

我怎么知道我是否可以删除它们。或者更好的问题是如何删除数据库以便回收磁盘空间。

**澄清**
我想删除整个数据库并释放磁盘空间。我不想执行任何还原。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-27T09:01:07.027

不幸的是，一旦分配了空间，就无法缩小这些文件。但是，当添加新数据时，MySQL 将重新使用空间，但文件不会缩小。

要缩小大小，您需要转储数据库，然后再次恢复它们。

您还可以执行以下操作：

在配置文件中设置 innodb_file_per_table ，这将为每个表创建一个单独的文件。这将允许您在删除数据库后删除这些文件，如果您收缩特定表中的数据，还允许您使用 OPTIMIZE TABLE 命令重建 ibd 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T08:51:22.507

一种解决方案是转储然后恢复。

# java - 在 Spring 拦截器中访问 DWR 发布数据

> ID：914659
> 
> 赞同：1
> 
> 时间：2009-05-27T08:45:30.053
> 
> 标签：java, ajax, spring, dwr

我有一个带有方法签名的 DWR 操作，如下所示：

```
String joinGroup(String groupId, String groupName); 
```

这通过 DWR AJAX 请求调用并且工作正常。

但是，我正在尝试编写一个 Spring 拦截器（很像 ServletFilter）来在调用 DWR 操作之前进行一些身份验证工作。
拦截器被正确调用，但我需要访问拦截器中的 groupId 和 groupName 数据。

请求参数映射是空的，我已经在调试器中浏览了整个请求属性列表，但我在任何地方都看不到数据。
请求的 postData 也为空。

使用萤火虫我可以看到数据正在传递到服务器（当最终调用 joinGroup 方法时它就在那里）。
我似乎无法在我的拦截器中访问它。

有什么办法可以访问它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T06:05:09.370

使用 org.directwebremoting.AjaxFilter

AjaxFilter 的 doFilter 方法由 DWR 每次在针对配置此过滤器的方法发出 Ajax 请求时调用。传入此方法的 AjaxFilterChain 允许过滤器将方法详细信息传递给链中的下一个实体。

通常，该方法会执行以下操作：

1.  检查请求
2.  可选择更改方法、对象或参数
3.  要么使用 AjaxFilterChain 调用链中的下一个实体，要么决定采取其他行动。
4.  可选择修改返回给用户的值
5.  采取其他行动（例如记录）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T16:09:15.807

我将假设您使用仅在上述方法上被调用的**MethodInterceptor （这意味着您的配置是正确的）。**

```
...
@Override
public Object invoke(MethodInvocation inv) throws Thorwable {
   Object[] args = inv.getArguments();
   String groupId = args[0];
   String groupName = args[1];
   .... if user has access call inv.proceed, else throw AccessDeniedException
} 
```

**Spring Framework 中的**MethodInterceptor**与Spring Security中的**MethodSecurityInterceptor 几乎完全相同。****

 **# c# - 如何使用触发器更改 TextBlock 的可见性？

> ID：914660
> 
> 赞同：22
> 
> 时间：2009-05-27T08:45:30.100
> 
> 标签：c#, wpf, xaml, triggers

当我尝试编译以下代码时，我收到错误**“可见性”成员无效，因为它没有合格的类型名称。**

我必须更改什么才能**使 TextBlock**在 Status=off 时消失？

**XAML：**

```
<Window x:Class="TestTrigger123345.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="300" Width="300">
    <StackPanel>
        <TextBlock Text="This is a sentence.">
            <TextBlock.Triggers>
                <Trigger Property="{Binding Status}" Value="off">
                    <Setter Property="Visibility" Value="Collapsed"/>
                </Trigger>
            </TextBlock.Triggers>
        </TextBlock>
        <TextBlock Text="{Binding Status}"/>
    </StackPanel>
</Window> 
```

**代码背后：**

```
using System.Windows;

namespace TestTrigger123345
{
    public partial class Window1 : Window
    {
        public Window1()
        {
            InitializeComponent();
            DataContext = this;
            Status = "off";
        }

        public string Status { get; set; }

    }
} 
```

我更改为 DataTrigger 和 Dependency Properties 并得到相同的错误：

**XAML：**

```
<Window x:Class="TestTrigger123345.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="300" Width="300">
    <StackPanel HorizontalAlignment="Left">
        <TextBlock Text="{Binding Status}">
            <TextBlock.Triggers>
                <DataTrigger Binding="{Binding Status}" Value="off">
                    <Setter Property="TextBlock.Background" Value="Tan"/>
                </DataTrigger>
            </TextBlock.Triggers>
        </TextBlock>
    </StackPanel>
</Window> 
```

**代码背后：**

```
using System.Windows;

namespace TestTrigger123345
{
    public partial class Window1 : Window
    {
        public Window1()
        {
            InitializeComponent();
            DataContext = this;
            Status = "off";
        }

        #region DependencyProperty: Status
        public string Status
        {
            get
            {
                return (string)GetValue(StatusProperty);
            }
            set
            {
                SetValue(StatusProperty, value);
            }
        }

        public static readonly DependencyProperty StatusProperty =
            DependencyProperty.Register("Status", typeof(string), typeof(Window1),
            new FrameworkPropertyMetadata());
        #endregion

    }
} 
```

我使用具有实现 INotifyPropertyChanged 的​​属性 Status 的 ViewModel 重新执行此操作，并且它得到相同的错误：

**WindowViewModel.cs：**

```
using System.ComponentModel;

namespace TestTrigger123345
{
    class WindowViewModel
    {
        #region ViewModelProperty: Status
        private string _status;
        public string Status
        {
            get
            {
                return _status;
            }

            set
            {
                _status = value;
                OnPropertyChanged("Status");
            }
        }
        #endregion

        #region PropertChanged Block
        public event PropertyChangedEventHandler PropertyChanged;

        private void OnPropertyChanged(string property)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(property));
            }
        }
        #endregion
    }
} 
```

**代码背后：**

```
using System.Windows;

namespace TestTrigger123345
{
    public partial class Window1 : Window
    {
        public Window1()
        {
            InitializeComponent();
            WindowViewModel windowViewModel = new WindowViewModel();
            windowViewModel.Status = "off";
            DataContext = windowViewModel;
        }

    }
} 
```

当然，有一种方法可以通过某种方式使用触发器来做到这一点。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2009-10-22T10:45:40.970

您需要指定应设置可见性的类型

```
<Setter Property="FrameworkElement.Visibility" Value="Visible"/> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-01T15:45:55.930

尝试这样的事情：

```
<PasswordBox Name="pbxPassword" />
<TextBox Text="{Binding Password,
                        ElementName=pbxPassword,
                        UpdateSourceTrigger=PropertyChanged}">
    <TextBox.Style>
        <Style TargetType="TextBox">
            <Setter Property="Visibility" Value="Hidden" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsChecked, ElementName=chbShowPassword}" Value="True">
                    <Setter Property="Visibility" Value="Visible" />
                </DataTrigger>                  
            </Style.Triggers>
        </Style>
    </TextBox.Style>
</TextBox>
<CheckBox Name="chbShowPassword">
    Show password
</CheckBox> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-01-06T08:39:29.613

元素的触发器只支持EventTrigger，所以不能使用属性触发器（Trigger）。查看 FrameworkElement.Triggers 属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T09:17:18.307

也许您需要实现 INotifyPropertyChanged 并在 Status 更改时引发 PropertyChange ？

您可以在可见性和状态字符串之间使用转换器，而不是使用触发器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T09:25:36.120

对于绑定使用 DataTrigger，对于属性，您可以使用 Trigger.. 还要确保状态属性通知 ;) 将其设为依赖属性或使用 INotifyPropertyChanged 接口。

[MSDN 上的数据触发器](http://msdn.microsoft.com/en-us/library/system.windows.datatrigger.aspx)

[好文章如何结合所有这些触发善良](http://anders.janmyr.com/2007/09/combining-datatriggers-and-property.html)

# c# - 用于 C# 的最佳免费 Excel 编写器，用于将数据表输出到 excel

> ID：914663
> 
> 赞同：6
> 
> 时间：2009-05-27T08:46:53.140
> 
> 标签：c#, excel, writer

我有一个加载数据表的控制台应用程序；我想将其导出为 Excel 格式并将其附加到定期发送的电子邮件中。

最好的图书馆是什么，以便我可以免费下载？我在一家学术机构工作，我们没有第三方控制的预算。

* * *

可能的相关问题：[如何在不逐个单元格的情况下将数据从 DataSet 存储到 Excel？](https://stackoverflow.com/questions/918102/how-to-store-data-to-excel-from-dataset-without-going-cell-by-cell)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-27T08:57:44.210

另一个免费库是[CarlosAg Excel Xml Writer Library](http://www.carlosag.net/Tools/ExcelXmlWriter/)。支持新的基于 xml 的格式。

**澄清**：当我们在这里谈论 MS Excel 时，新的基于 xml 的格式是[MS Office XML](http://en.wikipedia.org/wiki/Microsoft_Office_XML_formats)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-27T08:51:16.127

我只会将 CSV 文件写入硬盘。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-27T08:53:39.087

当我由于某种原因不能使用商业工具时，我通常使用[MyXls 。](http://myxls.in2bits.org/wiki/Default.aspx?AspxAutoDetectCookieSupport=1)

无耻的自我推销：您可以看看我的[SpreadsheetFactory](http://code.google.com/p/spreadsheetfactory/)工具，该工具旨在使将 IEnumerable 集合导出到电子表格更容易。它使用 MyXls 作为底层 xls 引擎。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-27T10:00:48.640

您可以将 ODBCConnection 与指定电子表格文件的连接字符串一起使用。

**编辑**：这不需要服务器机器上的 Excel。它将生成一个 .xls 文件，该文件可以在客户端计算机上使用 MS Excel 读取。

请参阅[如何在不逐个单元格的情况下将数据从 DataSet 存储到 Excel？](https://stackoverflow.com/questions/918102/how-to-store-data-to-excel-from-dataset-without-going-cell-by-cell)了解更多详情。

# c# - C#.Net 中的异步交互示例？

> ID：914665
> 
> 赞同：-1
> 
> 时间：2009-05-27T08:48:10.313
> 
> 标签：c#, .net, asynchronous, delegates, callback

我知道可以使用以下方法隐式提供异步交互：

*   异步委托
*   异步回调

我只是想知道.Net 支持异步交互的其他方法是什么？

非常感谢帮助。

问候

编辑：

也许我没有正确解释自己......我完全理解线程和并发，我只是想要一个在.Net中实现异步交互的潜在方法列表，除了使用异步委托或回调。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T08:52:31.180

看看这个网页，它用很好的例子写得很好： [http ://www.yoda.arachsys.com/csharp/threads/](http://www.yoda.arachsys.com/csharp/threads/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T08:52:57.590

这可能超出了您的要求，但也支持消息队列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T08:56:25.697

.NET 中的异步操作是通过调用名为 的方法启动的，`BeginSomething`其中`Something`可能是`Invoke`,或其他操作。`Write``Send`

例子：

[http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.beginsend.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.beginsend.aspx)

您传递一个您自己的委托，该委托将在操作完成时执行。然后，您可以通过调用相应的方法来获取操作的结果`EndSomething`。

例子：

[http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.endsend(VS.80).aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.endsend(VS.80).aspx)

无论执行何种操作，模式*通常都是相同的。*奇怪的是，该`EndSomething`方法被命名为不一致的东西。

更多示例：

*   [http://msdn.microsoft.com/en-us/library/system.io.stream.beginread.aspx](http://msdn.microsoft.com/en-us/library/system.io.stream.beginread.aspx)
*   [http://msdn.microsoft.com/en-us/library/system.servicemodel.description.imetadataexchange.beginget.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.imetadataexchange.beginget.aspx)
*   [http://msdn.microsoft.com/en-us/library/system.net.webrequest.begingetresponse.aspx](http://msdn.microsoft.com/en-us/library/system.net.webrequest.begingetresponse.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T09:20:17.893

（我不确定我是否完全理解您在问题中的目标，但我会试一试）

为了允许在 winforms 应用程序中执行异步代码，[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)组件相当方便。我还经常使用[ThreadPool.QueueUserWorkItem](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.queueuserworkitem.aspx)方法作为在自己的线程上生成方法的简单方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T10:48:53.190

您可以基于 Expression tress 或其他单子（尚未允许链接，但该术语可以在 wiki 中找到，Calvin 也有关于该主题的精彩博客）

基本上所有允许你进行比较编码的东西都可以用于异步实现。

您也可以通过谷歌搜索继续传递。一种编码风格，其中所有方法都不返回值（void），而是接受一个参数（某种委托）告诉它完成后要执行什么。

# java - 如何捕获 System.exit 事件？

> ID：914666
> 
> 赞同：26
> 
> 时间：2009-05-27T08:48:18.613
> 
> 标签：java, listener

我在java中有一个应用程序，在其中我尝试确保如果有人在代码中退出代码 System.exit()，则应该调用一个侦听器来执行一些操作，例如记录消息和释放资源......

我该如何实现它，欢迎任何建议/方法。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-05-27T09:03:03.233

该[`Runtime.addShutdownHook`](http://docs.oracle.com/javase/8/docs/api/java/lang/Runtime.html#addShutdownHook-java.lang.Thread-)方法可用于添加一个关闭钩子，它基本上是一个 unstarted `Thread`，它在 Java 虚拟机关闭时执行。

然而，这是一个应该小心处理的领域，因为它是在 JVM 生命周期的一个非常敏感的时间执行的。来自该`Runtime.addShutdownHook`方法的 API 规范：

> 关闭挂钩在虚拟机生命周期的一个微妙时刻运行，因此应该进行防御性编码。特别是，它们应该写成线程安全的，并尽可能避免死锁。

无论如何，请务必阅读有关关闭挂钩如何工作的一些信息，因为如果没有做好充分准备，可能不应该接近它们。请务必仔细阅读该`Runtime.addShutdownHook`方法的 API 规范。

这是我在搜索此答案的信息时发现的几篇文章：

*   [Shutdown Hooks——](http://weblogs.java.net/blog/dwalend/archive/2004/05/shutdown_hooks_2.html)它展示了一个关于如何添加关闭挂钩以在关闭时进行日志记录的小例子。

*   [Shutdown Hooks API 的](https://docs.oracle.com/javase/8/docs/technotes/guides/lang/hook-design.html)设计——以问答方式解决了一些关闭挂钩的设计决策。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-27T08:59:47.203

该函数`Runtime.addShutdownHook(Thread thehook)`允许您将挂钩注册到 Java 虚拟机中。
该钩子作为一个已初始化但未启动的线程工作，该线程将在退出时由 JVM 调用。如果您注册了多个钩子，请注意调用钩子的顺序是未定义的。

# php - 在这种情况下发出 301 重定向的最佳方法是什么？

> ID：914667
> 
> 赞同：1
> 
> 时间：2009-05-27T08:48:23.777
> 
> 标签：php, zend-framework, mod-rewrite, http-status-code-301

我有一个 PHP5/Zend Framework 1.8.1 网站，位于：

```
http://www.example.com/foo 
```

该网站的旧版本，令人愤怒的是，仍然由谷歌的索引维护，位于：

```
http://www.example.com/foo/DEFAULT.ASP 
```

所以很多人都在请求上面的链接并且遇到了死胡同。

我想，解决这个问题的方法是发出 301 重定向以将他带到新站点。想到的两种方法是：

1.  我想到的第一种方法是在我们的 .htaccess 中添加一个重写规则。我们的站点实现是 PHP5 / Zend Framework 1.8.1，因此 .htaccess 中有一个现有的重写规则（根据 Zend Framework MVC 要求），即：

    ```
    RewriteRule !\.(js|ico|gif|jpg|png|css|jpeg)$ index.php 
    ```

    作为一个 mod_rewrite 菜鸟，我做了一些谷歌搜索，并提出了以下处理重定向的方法：

    ```
    RewriteCond %{HTTP_HOST} ^/foo/DEFAULT.ASP
    RewriteRule (.*) http://example.com/foo$1 [R=301,L] 
    ```

    我将这些行添加到 .htaccess 中，但它们不起作用。

2.  我想到的第二种方法是使用`Zend_Router_Route_Static`如下：

    ```
    $router = $frontController->getRouter();
    $route = new Zend_Controller_Router_Route_Static('foo/DEFAULT.ASP', array('controller' => 'foo', 'action' => 'index'));
    $router->addRoute('foo', $route); 
    ```

    这会重定向到正确的页面，但我也不知道如何设置 301 标头，而且在我的代码中包含这些代码行非常不雅`bootstrap.php`

任何人都可以就如何处理这种情况提供任何建议吗？我想知道所有或任何一个：

1.  如何让重写规则起作用
2.  `Zend_Controller_Router_Route`如果可能的话，如何做一个'301' 。
3.  还有另一种我想念的方式吗？
4.  哪种方法更好，为什么？
5.  为什么谷歌不解决这个问题？已经快半年了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-04T21:05:58.183

我最近通过添加解决了类似的问题

```
AddType application/x-httpd-php .asp 
```

到 .htaccess 文件，这使得服务器使用 php 运行 .asp 文件。

然后我创建了一个包含标题（'Location: /', etc）的文件 default.asp 来替换 Google 正在寻找的那个。我有一些其他带有复杂参数的 .asp 文件，在重定向之前需要将其转换为新的 URL，在某些情况下需要数据库查找，因此能够用 PHP 编写所有内容很方便，这样我就可以使用来自其他部分的包含文件的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-27T08:52:30.680

这应该有效（确保将其放在 Zend 规则之前）：

```
RewriteRule ^foo/DEFAULT.ASP /foo [R=301,L] 
```

我不确定为什么谷歌没有弄清楚 - 你确定你提供了正确的 404 状态代码吗？您可以通过查看标头来检查 - 在 Firefox 中我使用[Live HTTP Headers](http://livehttpheaders.mozdev.org/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-09T05:02:48.297

看起来你解决了你的问题，这对你的问题来说不是一个好的解决方案，但如果其他人被你的问题吸引到这个线程，他们可能会觉得有用的另一个资源：

[http://www.refreshinglyblue.com/2008/10/28/zend-framework-redirect-the-easy-way/](http://www.refreshinglyblue.com/2008/10/28/zend-framework-redirect-the-easy-way/)

他建议使用“Redirector Zend Controller Action Helper”来重定向内部 url。

PS 如果有人使用 _redirect，请确保传入 301 重定向代码（如果这是您想要的），因为它默认为 302。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T08:56:24.667

```
Redirect permanent /foo/DEFAULT.ASP /foo 
```

# python - Python 中 $HOME 中用户首选项的最佳实践

> ID：914675
> 
> 赞同：3
> 
> 时间：2009-05-27T08:49:25.880
> 
> 标签：python, preferences

对于 Python 中的一些小程序，我想以可移植（多平台）的方式在文件中设置、存储和检索用户首选项。

我正在考虑一个非常简单的 ConfigParser 文件，例如“~/.program”或​​“~/.program/program.cfg”。

是`os.path.expanduser()`实现这一目标的最佳方法，还是有更简单/直接的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-27T09:26:06.617

```
os.path.expanduser("~") 
```

比更便携

```
os.environ['HOME'] 
```

所以使用第一个应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T09:27:44.617

您可以使用 os.environ：

```
import os
print os.environ["HOME"] 
```

# c# - 订购 linq 查询

> ID：914681
> 
> 赞同：3
> 
> 时间：2009-05-27T08:51:00.230
> 
> 标签：c#, linq-to-sql

对于我的通用网格，我目前这样做是为了激活排序：

```
Elements.OrderBy(column.SortExpression).AsQueryable(); 
```

其中 SortExpression 是类型`Func<T, object>`，column 是泛型类`Column<T>`

我在这样的控制器中设置了 SortExpression：

```
new Column<OrderViewData>{Key = "ShippingDate", SortExpression = e => e.ShippingDate} 
```

**'OrderBy' 导致执行我不想要的 sql 语句。**

所以我试图用这个替换它：

```
Elements = from element in Elements
           orderby column.SortExpression
           select element; 
```

这不会触发 sql 执行。

现在，当然 column.SortExpression 应该是另一种类型。只有我无法真正弄清楚它应该是什么类型以及如何在控制器的泛型类上设置它。

我仍然应该能够以某种通用的强类型方式设置 SortExpression。

关于如何通过应用程序中其他地方的表达式集进行排序的任何建议，而无需在将订单应用于 IQueryable 时执行 sql？

**@Earwicker：**

这有效：

```
Expression<Func<Employee, DateTime?>> sortexpression = e => e.BirthDate;
var db = new NorthwindDataContext();
var query = from e in db.Employees
            select e;
query = query.OrderBy(sortexpression);
int count = query.Count(); 
```

并生成：

```
SELECT COUNT(*) AS [value]
FROM [dbo].[Employees] AS [t0] 
```

当我更换日期时间？在第一行有对象：

```
Expression<Func<Employee, object>> sortexpression = e => e.BirthDate; 
```

我收到 InvalidOperationException：无法按类型“System.Object”排序

现在，您可能会说：“那么只使用 DateTime？”，但我想在我的通用网格中构建列以尽可能少地使用代码。我不希望人们必须输入整个`Expression<Func<Employee, some_type>>`. 我希望人们能够像我的第一次尝试那样输入一些小的东西`SortExpression = e => e.BirthDate`，我利用通用 Column 类来定义“T”。

您是否认为有可能创建某种扩展，以某种方式获取类型`e.BirthDate`然后将其转换`Func<T, object>`为`Expression<Func<T,some_type>>`？然后我可以在内部代码中做一些事情，比如： Elements.OrderBy(column.SortExpression.FixCast())

我不太在乎我的内部代码此时是丑陋的还是复杂的。我需要正确处理 SQL 查询并注意使用网格的开发人员的可用性。

非常感谢您帮助我！

**@耳朵柳条2：**

```
var gridBuilder = new RainbowGridBuilder<Employee>("Examples_Employees")
{
    Elements = GetEmployees(), //The elements (records) we will show in our grid. 

    //Define the columns for our grid.
    Columns = new List<Column<Employee>>{
            new Column<Employee> {
                Key = "EmployeeId",                             //Key is used for sorting, selecting columns, ...
                Header = "Employee Id",                         //The header of the column. Also used as caption in the column selection checkboxlist.
                ValueExpression = e => e.EmployeeID.ToString(), //The Linq expression which will be executed on each element to fill the cell
                SortExpression = e => e.EmployeeID,             //The Linq expression by which to sort the elements in the grid. 
                Display = false},                               //Is this column visible by default?
            new Column<Employee> {Key = "Name", ValueExpression = e => e.FirstName + " " + e.LastName, SortExpression = e => e.LastName},
        },

    // Some other properties here that are irrelevant.

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-27T09:37:06.487

SortExpression 应该是类型`Expression<Func<T, object>>`。

通过将其设为 a `Func<T, object>`，您可以使编译器将其直接缩减为 IL，准备执行。Linq to SQL（或实体，或 NHibernate，或其他）将需要以表达式树的形式捕获的代码，以便它可以将其转换为 SQL 或其他查询语言以在其他地方执行。通过将您的 lambda 分配给`Expression<Func<...>>`您触发编译到表达式树。

如果你放这个有用吗？

```
Elements = Elements.OrderBy(e => e.ShippingDate); 
```

这个怎么样？

```
Expression<Func<OrderViewData, object>> sortExpression = e => e.ShippingDate;
Elements = Elements.OrderBy(sortExpression); 
```

根据您更新的问题，听起来您需要捕获具有静态类型返回值的表达式，而不是`object`.

很难知道什么是最适合您的安排，但在您的原始设置代码中，您有：

```
new Column<OrderViewData>{Key = "ShippingDate", SortExpression = e => e.ShippingDate} 
```

假设`Column`有两个类型参数，`TElem`（存储在列`TSort`中的值的类型）和（排序依据的值的类型）。

```
new Column<Employee, DateTime?> { SortExpression = e => e.BirthDate } 
```

这对我来说看起来并不太笨拙，`SortExpression`然后就是：

```
Expression<Func<TElem, TSort>> SortExpression { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-01T00:06:39.280

我想出了一个实现我所追求的解决方案。

**用法：在列上设置强类型排序表达式：**

```
Columns = new List<Column<Employee>>{
            new Column<Employee> {
                Key = "EmployeeId",   
                SortExpression = new SortExpression<Employee>(e => e.EmployeeID)
                // ... other irrelevant column properties ...  
            },
            new Column<Employee> {
                Key = "EmployeeBirthDate",      
                SortExpression = new SortExpression<Employee>(e => e.BirthDate)
            }
          }; 
```

**底层代码**

RainbowGridBuilder 类的“buildGrid()”方法中的这几行应用了排序：

```
if (columnToSort != null) //sort the elements according to the set column key and the sortexpression
{
    var column = Columns.Where(c => c.Key == columnToSort).SingleOrDefault();
    if (column != null)
    {
        Elements = column.SortExpression.ApplySortExpression(Elements, descending);
    }
} 
```

这个怎么运作：

通过在我制作的 SortExpression 类中使用重载构造函数，我可以设置一个 private `Expression<Func<T, some_specific_Type>>`。

SortExpression 类内部有一个方法 ApplySortExpression，它搜索非空私有成员并进行相应排序：

```
public class SortExpression<T>
{
    private Expression<Func<T, DateTime?>> DateTimeExpression { get; set; }
    private Expression<Func<T, int?>> intExpression { get; set; }
    private Expression<Func<T, string>> stringExpression { get; set; }

    public SortExpression(Expression<Func<T, DateTime?>> expression)
    {
        DateTimeExpression = expression;
    }

    public SortExpression(Expression<Func<T, int?>> expression)
    {
        intExpression = expression;
    }

    public SortExpression(Expression<Func<T, string>> expression)
    {
        stringExpression = expression;
    }

    public IQueryable<T> ApplySortExpression(IQueryable<T> elements, bool? descending)
    {
        if (DateTimeExpression != null)
        {
            if (descending.HasValue && descending.Value)
                return elements.OrderByDescending(DateTimeExpression);
            else
                return elements.OrderBy(DateTimeExpression);
        }
        else if (intExpression != null)
        {
            if (descending.HasValue && descending.Value)
                return elements.OrderByDescending(intExpression);
            else
                return elements.OrderBy(intExpression);
        }
        else if (stringExpression != null)
        {
            if (descending.HasValue && descending.Value)
                return elements.OrderByDescending(stringExpression);
            else
                return elements.OrderBy(stringExpression);
        }
        else
            throw new Exception("Unsuported sortkey type");
    }
} 
```

这个解决方案在底层可能不是超级干净，但它是我所追求的可用性。对消费代码的唯一更改是添加“ `new SortExpression<Employee>`”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T22:16:09.997

我认为问题的根源在于您在转换为 Queryable**之前执行了 OrderBy。**如果您在 IEnumerable<T> 上订购，那么您需要先订购一些东西。与 IQueryable<T> 不同，IEnumerable<T> 不构建表达式树...它将一个可枚举对象包装在另一个对象周围。要获得延迟执行的好处，您需要确保从一开始就使用 IQueryable。在执行完所有过滤、排序等操作后转换为一个不会带来任何好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-14T15:13:37.653

这是我对这个 orderby 问题的简单解决方案：

```
 var SampleData = new SampleDataContext();

        var text = from i in SampleData.Events
                   select i;
        var text2 = text.OrderByDescending(i => i.id);
        return View(text2); 
```

# javascript - 动态网页 (Javascript) - 从外部监控内容

> ID：914684
> 
> 赞同：0
> 
> 时间：2009-05-27T08:51:47.937
> 
> 标签：javascript, webkit

假设我浏览了一个使用 JavaScript 不断更新其视图的特定网页（使用 Web 2.0 技术与他们的服务器通信以检索数据更新）。

现在我喜欢在我自己的计算机上运行一些代码来监控内容并在页面上出现某些特定数据时提醒我，以便我可以记录这些数据。

我正在寻找实现这一目标的方法。因为它是一个私人项目，所以我可以灵活地选择我的工具（我可以用 C 和 REALbasic 编程，也可以管理一点 JavaScript）。我唯一无法控制的是我想要监控的页面。

我更喜欢可以在 Mac OS X 上使用的解决方案，但 Linux 或 Windows 也是可行的。

首先，我想知道是否已经有解决方案。例如，用户可编写脚本的 Web 浏览器之类的东西。

如果那不可用，我想知道如何通过自己编程来最好地解决这个问题。例如，谁能告诉我 Apple 的 Webkit 是否允许我内省动态更新的网页？

作为最后的手段，我想我必须将自己的 javascript 代码插入到查看的网页中（我认为，在通过 Internet 加载页面时，我可以很容易地做到这一点），然后让该脚本定期运行，内省它所在的页面。在这种情况下，我唯一不知道的是如何让它与外部通信，即我的计算机。我当然可以编写一个可以尝试与之交谈的应用程序，但它怎么可能访问我的计算机资源来建立这样的通信呢？据我了解网页沙盒，他们不能读/写本地文件或与他们正在运行的计算机上的套接字通信，或者他们可以吗？

因此，欢迎任何想法，只要他们清楚我必须让浏览器或其引擎呈现页面并运行页面的 Javascript 的概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T08:59:02.397

这听起来像是在 Firefox 中使用[Jetpack](http://labs.mozilla.com/2009/05/introducing-jetpack-call-for-participation/)很容易。

您可以使用 Javascript 创建浏览器扩展 - 它仍处于 alpha 阶段，但看起来可行（而且*很棒*）......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T09:43:04.633

我同意你绝对可以使用 Firefox 扩展来做到这一点（我没有使用过 JetPack，我不知道它是否可以处理这个问题）。Firefox 扩展可以与任意[XPCOM](http://en.wikipedia.org/wiki/XPCOM)组件通信。因此，扩展将有一个小的 JavaScript 部分从 DOM 中吸取数据，然后与 C(++) XPCOM 组件通信以执行其他任何操作。

请参阅使用 Mozilla 构建系统[创建 C++ XPCOM 组件](http://www.iosart.com/firefox/xpcom/)和 [创建自定义 Firefox 扩展](https://developer.mozilla.org/En/Creating_Custom_Firefox_Extensions_with_the_Mozilla_Build_System)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T12:12:03.100

实际上，我刚刚意识到 REALbasic 的 Monkeybread 插件提供了我所需要的一切，而且显然比使用 Jetpack 更容易，甚至：

[http://www.monkeybreadsoftware.de/pluginhelp/example-cocoa-domformfields.shtml](http://www.monkeybreadsoftware.de/pluginhelp/example-cocoa-domformfields.shtml)

因此，我可以编写自己的浏览器来获取网页，然后过滤掉 DOM 数据，甚至对其进行修改。

# wcf-security - 我的 ASP.net 应用程序和 WCF 服务之间是否需要安全性？

> ID：914691
> 
> 赞同：0
> 
> 时间：2009-05-27T08:53:39.227
> 
> 标签：wcf-security

[我知道这是相当主观的，并且取决于各种考虑，所以我只是整理一下想法，看看人们对这个主题的看法，以及他们正在考虑什么......]

我们有一个公开暴露的 asp.net 应用程序（需要用户名/密码验证），它反过来在后面使用一组 WCF 服务。

我正在尝试决定为这些服务使用哪个绑定，更具体地说 - 我们应该使用哪些安全元素（如果有的话）。

所有应用程序（Web 前端和所有服务）都驻留在防火墙后面的同一个服务器场上，这会阻止除 Web 应用程序之外的所有对服务的访问。在这种情况下——你会说没有任何安全元素是可以接受的吗（因此，大概，提高了性能？）

为了完整起见，我会说我们确实希望在某些时候在外部公开一些服务，但这将通过具有不同地址的不同端点来完成，使用包括联合身份在内的高安全性元素进行身份验证

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T08:57:24.883

安全就像一堵墙。墙越多越好。

这就是为什么我们为内部数据库设置安全密码但可以从 Web 应用程序访问的原因，以及我们对这些数据库中的敏感数据进行加密的原因。

如果安全性不会成为主要的痛苦，请添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T09:08:53.783

您应该使您的服务也受到用户名和密码的保护，例如使用摘要身份验证等。将提供的用户名和密码将在您的应用程序内部提供。因此，您增加了一个安全层。

# asp.net-mvc - ASP.NET MVC：跨多个请求保留 TempData

> ID：914692
> 
> 赞同：2
> 
> 时间：2009-05-27T08:54:13.360
> 
> 标签：asp.net-mvc, tempdata

当我执行重定向时，我需要传递一些值。我想使用 TempData 来完成此操作，但遇到了问题。

我使用一个特殊的控制器来生成动态 JavaScript。例如，可能有这样的脚本标签：

```
<script type="text/javascript" src="/Resource/Script/Login.js"></script> 
```

...但没有脚本文件“Login.js”。相反，正在调用 ResourceController 的脚本操作：

```
public class ResourceController : Controller {
    public ActionResult Script(string id) {
        // set script = some code
        return JavaScript(script);
    }
} 
```

问题是，这会占用下一个请求，这意味着我不能使用 TempData 从具有动态脚本的页面重定向。脚本操作（或整个 ResourceController）是否可以选择不使用 TempData，使其可用于下一个“真实”请求？

先感谢您！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2011-05-25T08:09:34.910

Asp.Net 团队通过引入 TempData.Keep() 消除了 MVC 2 中的这种痛苦，它确保所有 TempData 项都被标记为存在一个请求。*从您不想*吃 TempData的所有操作中调用它。

[阅读Jacques Eloffs 博客文章](http://weblogs.asp.net/jacqueseloff/archive/2009/11/17/tempdata-improvements.aspx)中引入 Keep() 背后的基本原理

[MSDN 文档中的 Keep()](http://msdn.microsoft.com/en-us/library/ee728654.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-27T09:07:03.863

你可以把线

```
<script type="text/javascript" src="/Resource/Script/Login.js"></script> 
```

在视图中使用 TempData 后。

这篇文章也可能对您有用：[ASP.NET MVC TempData Is RedirectData](http://blogs.teamb.com/craigstuntz/2009/01/23/37947/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-27T09:02:27.757

在多个请求之间保留会话。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-27T11:02:47.127

让您的控制器超类型覆盖 ExecuteCore，这会清除 TempData。我不是说这是个好主意...

```
protected override void ExecuteCore()
{
    string actionName = RouteData.GetRequiredString("action");
    if (!ActionInvoker.InvokeAction(ControllerContext, actionName))
    {
        HandleUnknownAction(actionName);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-08-11T14:05:15.487

为什么不创建一个 PreserveTempDataAttribute 来装饰您的脚本操作。如果它不为空，它可以重新分配 TempData。

# linux - 学习内核编程

> ID：914693
> 
> 赞同：53
> 
> 时间：2009-05-27T08:54:34.030
> 
> 标签：linux, kernel, linux-device-driver, embedded-linux

我想学习lLinux内核编程。

这样做的出发点是什么？可以针对哪些更简单的问题？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2015-01-05T15:03:42.817

```
**TODO** +editPic: Linux Kernel Developer -> (Ring Layer 0)
         +addSection: Kernel Virtualization Engine

KERN_WARN_CODING_STYLE: Do not Loop unless you absolutely have to. 
```

> ***未初始化*的推荐书籍*`void *i`***
> 
> *“人们只有在有一定的生命之后才能理解书籍，或者至少没有人能够理解一本深刻的书籍，直到他至少看到并经历了其中的一部分内容”。——以斯拉磅*

一千*码英里*的旅程必须从一个步骤开始。如果您对从以下哪本书开始感到困惑，请不要担心，选择您选择的任何一本。并非所有流浪的人都迷失了。由于*所有道路最终都连接到高速公路*，您将在内核旅程中随着页面的进展而探索新事物，而不会遇到任何死胡同，并最终连接到`code-set`. 用警觉的头脑阅读并记住：***代码不是文学***。

剩下的不是事物、情感、图像、心理画面、记忆甚至想法。它是一个函数。某种过程。生活的一个方面，可以被描述为“更大”事物的功能。因此，它似乎并没有真正与其他东西“分开”。就像刀的功能——切割东西——实际上并没有与刀本身分开。该功能目前可能正在使用，也可能未使用，但它可能永远不会分开。

[Solovay Strassen Derandomized Algorithm for Primality Test](http://en.wikipedia.org/wiki/Solovay%E2%80%93Strassen_primality_test) :

![素性检验的 Solovay Strassen 去随机化算法](https://i.stack.imgur.com/NojP4.png)

阅读不要矛盾和反驳；也不相信和认为是理所当然的；也找不到谈话和话语；但要权衡和考虑。有些书是要品尝的，有些是要吞下去的，有些书是要咀嚼消化的：也就是说，有些书只能部分阅读，有些书可以阅读，但不好奇，有些书可以完整阅读，并且用勤奋和专注。

```
static void tasklet_hi_action(struct softirq_action *a)
{
        struct tasklet_struct *list;

        local_irq_disable();
        list = __this_cpu_read(tasklet_hi_vec.head);
        __this_cpu_write(tasklet_hi_vec.head, NULL);
        __this_cpu_write(tasklet_hi_vec.tail, this_cpu_ptr(&tasklet_hi_vec.head));
        local_irq_enable();

        while (list) {
                struct tasklet_struct *t = list;

                list = list->next;

                if (tasklet_trylock(t)) {
                        if (!atomic_read(&t->count)) {
                                if (!test_and_clear_bit(TASKLET_STATE_SCHED,
                                                        &t->state))
                                        BUG();
                                t->func(t->data);
                                tasklet_unlock(t);
                                continue;
                        }
                        tasklet_unlock(t);
                }

                local_irq_disable();
                t->next = NULL;
                *__this_cpu_read(tasklet_hi_vec.tail) = t;
                __this_cpu_write(tasklet_hi_vec.tail, &(t->next));
                __raise_softirq_irqoff(HI_SOFTIRQ);
                local_irq_enable();
        }
} 
```

* * *

> **核心 Linux** ( 5 -> 1 -> 3 -> 2 -> 7 -> 4 -> 6 )
> 
> *“自然无核无壳；她是一切”——约翰·沃尔夫冈·冯·歌德*

读者应精通[操作系统概念](http://pages.cs.wisc.edu/~remzi/OSTEP/)；公平理解长期运行的流程及其与短期执行流程的区别；容错，同时满足软硬实时约束。阅读时，了解`n/ack`核心子系统中 linux 内核源代码所做的设计选择非常重要。

线程 [和] 信号 [是] 依赖于平台的痛苦、绝望、恐怖和疯狂的轨迹（~Anthony Baxte）。话虽如此，在深入内核之前，您应该是一名自我评估的 C 专家。您还应该对链表、堆栈、队列、红黑树、哈希函数等有良好的经验。

```
volatile int i;
int main(void)
{
    int c;
    for (i=0; i<3; i++) {
        c = i&&&i;
        printf("%d\n", c);    /* find c */
    }
    return 0;
} 
```

Linux Kernel 源代码的美妙之处和艺术在于它故意使用的代码混淆。这通常是必要的，以便以干净和优雅的方式传达涉及两个或多个操作的计算意义。在为多核架构编写代码时尤其如此。

[**实时系统**视频讲座****](https://www.youtube.com/playlist?list=PLD8F7759A8F75D841)**、[任务调度](https://www.youtube.com/watch?v=tp8n3ezVfkI)、[内存压缩](https://www.youtube.com/watch?v=jYLzokeRtd0)、[内存屏障](https://www.youtube.com/watch?v=6ORn6_35kKo)、 [SMP](https://www.youtube.com/watch?v=STWpu4KcqwE)**

 **```
#ifdef __compiler_offsetof
#define offsetof(TYPE,MEMBER) __compiler_offsetof(TYPE,MEMBER)
#else
#define offsetof(TYPE, MEMBER) ((size_t) &((TYPE *)0)->MEMBER)
#endif 
```

1.  [Linux 内核开发](http://www.amazon.in/Linux-Kernel-Development-Developers-Library/dp/0672329468)- *Robert Love*
2.  [了解 Linux 内核](http://shop.oreilly.com/product/9780596005658.do)- *Daniel P. Bovet、Marco Cesati*
3.  [Linux 内核设计的艺术](https://rads.stackoverflow.com/amzn/click/com/1466518030)-*杨立祥*
4.  [专业的 Linux 内核架构](http://www.amazon.in/Professional-Linux%C2%AE-Kernel-Architecture-Programmer/dp/0470343435)- *Wolfgang Mauerer*
5.  [UNIX 操作系统的设计](http://www.amazon.in/Design-UNIX-Operating-System-Prentice/dp/0132017997)- *Maurice J. Bach*
6.  [了解 Linux 虚拟内存管理器](https://www.kernel.org/doc/gorman/pdf/understand.pdf)- *Mel Gorman*
7.  [Linux 内核内部](http://www.tldp.org/LDP/lki/lki.pdf)结构- *Tigran Aivazian*
8.  [嵌入式 Linux 入门](https://rads.stackoverflow.com/amzn/click/com/0137017839)- *Christopher Hallinan*

* * *

> **Linux 设备驱动程序**( 1 -> 2 -> 4 -> 3 -> 8 -> ... )
> 
> *“音乐不能带你走。你必须严格按照你的能力来带它，真正专注于情感或故事的那个小内核”。——黛比·哈里*

你的任务基本上是在硬件设备和软件内核之间建立一个高速通信接口。您应该阅读硬件参考数据表/手册以了解设备的行为及其控制和数据状态以及提供的物理通道。从长远来看，您的特定架构的组装知识以及对 VHDL 或 Verilog 等 VLSI 硬件描述语言的公平知识将帮助您。

*   [英特尔® 64 和 IA-32 架构软件开发人员手册](http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-manual-325462.pdf)
*   [ARM 架构参考手册](https://rads.stackoverflow.com/amzn/click/com/0201737191)
*   [ARM 系统开发人员指南](http://www.amazon.in/ARM-System-Developers-Guide-Architecture/dp/1558608745)

**问**：但是，为什么我必须阅读硬件规格？

**答**：因为，“软件无法弥合碳和硅之间的鸿沟”——Rahul Sonnad

但是，以上对*计算算法*（[驱动程序代码](http://en.wikipedia.org/wiki/Interrupt_handler)-*[下半部分处理](http://en.wikibooks.org/wiki/Embedded_Systems/Interrupts)*）没有问题，因为它可以在[通用图灵机](http://en.wikipedia.org/wiki/Universal_Turing_machine)上完全模拟。如果计算结果在[数学领域成立，那么在](http://en.wikipedia.org/wiki/Church%E2%80%93Turing_thesis)[物理领域](http://en.wikipedia.org/wiki/Riemann_hypothesis)肯定也是成立的。

[**Linux 设备驱动程序**视频讲座****](https://www.youtube.com/playlist?list=PL-XXv-cvA_iB_5Q8G8kW5idSwNmXypmQE)**（第 17 和 18 课）、[嵌入式 KMS 驱动程序剖析](https://www.youtube.com/watch?v=Ja8fM7rTae4)、[引脚控制和 GPIO 更新](https://www.youtube.com/watch?v=z4EkzJDGxFo)、[通用时钟框架](https://www.youtube.com/watch?v=Mwr7eZUm1Nw)、[编写真正的 Linux 驱动程序 - Greg KH](http://video.linux.com/videos/write-a-real-linux-driver-greg-kh-2008)**

 **```
static irqreturn_t phy_interrupt(int irq, void *phy_dat)
{
         struct phy_device *phydev = phy_dat;

         if (PHY_HALTED == phydev->state)
                 return IRQ_NONE;                /* It can't be ours.  */

         /* The MDIO bus is not allowed to be written in interrupt
          * context, so we need to disable the irq here.  A work
          * queue will write the PHY to disable and clear the
          * interrupt, and then reenable the irq line.
          */
         disable_irq_nosync(irq);
         atomic_inc(&phydev->irq_disable);

         queue_work(system_power_efficient_wq, &phydev->phy_queue);

         return IRQ_HANDLED;
} 
```

1.  [Linux 设备驱动程序](http://lwn.net/Kernel/LDD3/)- *Jonathan Corbet、Alessandro Rubini 和 Greg Kroah-Hartman*
2.  [基本 Linux 设备驱动程序](https://rads.stackoverflow.com/amzn/click/com/0132396556)- *Sreekrishnan Venkateswaran*
3.  [编写 Linux 设备驱动程序](http://www.amazon.in/Writing-Linux-Device-Drivers-Solutions/dp/1449531245)- *Jerry Cooperstein*
4.  [Linux 内核模块编程指南](http://www.tldp.org/LDP/lkmpg/2.6/lkmpg.pdf)- *Peter Jay Salzman、Michael Burian、Ori Pomerantz*
5.  [Linux PCMCIA 程序员指南](http://pcmcia-cs.sourceforge.net/ftp/doc/PCMCIA-PROG.html)- *David Hinds*
6.  [Linux SCSI 编程指南](http://www.tldp.org/HOWTO/archived/SCSI-Programming-HOWTO/)- *Heiko Eibfeldt*
7.  [POSIX 操作系统的串行编程指南](http://www.tldp.org/HOWTO/pdf/Serial-Programming-HOWTO.pdf)- *Michael R. Sweet*
8.  [Linux 图形驱动程序：简介](http://people.freedesktop.org/~marcheu/linuxgraphicsdrivers.pdf)- *Stéphane Marchesin*
9.  [Linux USB 设备驱动程序编程指南](http://www.lrr.in.tum.de/Par/arch/usb/download/usbdoc/usbdoc-1.32.pdf)- *Detlef Fliegl*
10.  [Linux 内核设备模型](http://www.landley.net/kdocs/ols/2002/ols2002-pages-368-375.pdf)- *Patrick Mochel*

* * *

> **内核网络**（1 -> 2 -> 3 -> ...）
> 
> *“称其为氏族，称其为网络，称其为部落，称其为家庭：无论你怎么称呼它，无论你是谁，你都需要一个。” - 简霍华德*

理解内核中的数据包遍历是理解内核网络的关键。如果我们想了解 Netfilter 或 IPSec 内部结构等，必须了解它。`struct sk_buff`linux内核网络层最重要的两个结构是：`struct net_device`

```
static inline int sk_hashed(const struct sock *sk)
{
        return !sk_unhashed(sk);
} 
```

1.  [了解 Linux 网络内部](http://www.amazon.in/Understanding-Network-Internals-Christian-Benvenuti/dp/0596002556)结构- *Christian Benvenuti*
2.  [Linux 内核网络：实现和理论](http://www.amazon.in/Linux-Kernel-Networking-Implementation-Experts/dp/143026196X)- *Rami Rosen*
3.  [UNIX 网络编程](http://www.amazon.in/UNIX-Network-Programming-Richard-Stevens/dp/0139498761)- *W. Richard Stevens*
4.  [Linux 网络编程权威指南](http://www.amazon.in/Definitive-Guide-Network-Programming-Experts/dp/1590593227)- *Keir Davis、John W. Turner、Nathan Yocom*
5.  [Linux TCP/IP 堆栈：嵌入式系统的网络](http://www.amazon.in/The-Linux-TCP-Stack-Networking/dp/1584502843)- *Thomas F. Herbert*
6.  [Linux Socket 编程示例](http://www.amazon.in/Linux-Socket-Programming-Example-Warren/dp/0789722410)- *Warren W. Gay*
7.  [Linux 高级路由和流量控制 HOWTO](http://www.tldp.org/HOWTO/pdf/Adv-Routing-HOWTO.pdf) - *Bert Hubert*

* * *

> **内核调试**( 1 -> 4 -> 9 -> ... )
> 
> *除非在与它的交流中准确地说出一个意思，否则一定会导致麻烦。~艾伦·图灵，关于计算机*

Brian W. Kernighan 在 Unix for Beginners (1979) 一文中说：“最有效的调试工具仍然是仔细思考，加上明智地放置打印语句”。知道要收集什么将帮助您快速获得正确的数据以进行快速诊断。伟大的计算机科学家 Edsger Dijkstra 曾经说过，测试可以证明 bug 的存在，但不能证明它们不存在。良好的调查实践应该平衡快速解决问题的需求、培养技能的需求以及有效使用主题专家的需求。

有时您会跌到谷底，似乎没有任何效果，并且您用尽了所有选择。然后才是真正的调试开始。一个错误可能会为您提供摆脱对无效解决方案的固定所需的休息时间。

[**内核调试和分析**视频讲座****](https://www.youtube.com/watch?v=9OrTqDIjpLc)**，[核心转储分析](https://www.youtube.com/watch?v=CR569T-B2M0)，[使用 GDB 进行多核调试](https://www.youtube.com/watch?v=64bSuj8hlQ4)，[控制多核竞争条件](https://www.youtube.com/watch?v=UQvqLHD3rE8)，[调试电子设备](https://www.youtube.com/watch?v=W7LEXSqXsjc)**

 **```
/* Buggy Code -- Stack frame problem
 * If you require information, do not free memory containing the information
 */
char *initialize() {
  char string[80];
  char* ptr = string;
  return ptr;
}

int main() {
  char *myval = initialize();
  do_something_with(myval);
}
/*  “When debugging, novices insert corrective code; experts remove defective code.”
 *     – Richard Pattis
#if DEBUG
 printk("The above can be considered as Development and Review in Industrial Practises");
#endif
 */ 
```

1.  [Linux 调试和性能调优](http://www.amazon.in/Linux-Debugging-Performance-Tuning-Development/dp/0131492470)- *Steve Best*
2.  [Linux 应用程序调试技术](http://en.wikibooks.org/wiki/Linux_Applications_Debugging_Techniques)- *Aurelian Melinte*
3.  [使用 GDB 进行调试：GNU 源代码级调试器](https://rads.stackoverflow.com/amzn/click/com/1882114884)- *Roland H. Pesch*
4.  [调试嵌入式 Linux](http://www.amazon.in/Debugging-Embedded-Linux-Digital-Short-ebook/dp/B000P28W3U) - *Christopher Hallinan*
5.  [使用 GDB、DDD 和 Eclipse 进行调试的艺术](http://www.amazon.in/The-Art-Debugging-GDB-Eclipse/dp/1593271743)- *Norman S. Matloff*
6.  [为什么程序会失败：系统调试指南](http://www.amazon.in/Why-Programs-Fail-Systematic-Debugging/dp/0123745152)- *Andreas Zeller*
7.  [软件驱魔：调试和优化遗留代码的手册](http://www.amazon.in/Software-Exorcism-Handbook-Debugging-Optimizing/dp/1590592344)- *Bill Blunden*
8.  [调试：发现最难以捉摸的软件和硬件问题](http://www.amazon.in/Debugging-Indispensable-Software-Hardware-Problems/dp/0814474578)- *David J. Agans*
9.  [通过思考进行调试：一种多学科方法](http://www.amazon.in/Debugging-Thinking-Multidisciplinary-Approach-Technologies/dp/1555583075)- *Robert Charles Metzger*
10.  [找出错误：一本错误程序之书](http://www.amazon.in/Find-Bug-Book-Incorrect-Programs/dp/0321223918)- *Adam Barr*

* * *

> **文件系统**( 1 -> 2 -> 6 -> ... )
> 
> *“我想拥有虚拟内存，至少它与文件系统相结合”。——肯·汤普森*

在 UNIX 系统上，一切都是文件。如果某些东西不是文件，那么它就是一个进程，命名管道和套接字除外。在文件系统中，文件由 表示`inode`，这是一种序列号，包含有关构成文件的实际数据的信息。Linux 虚拟文件系统`VFS`在挂载和使用每个文件系统时将信息缓存在内存中。必须非常小心地正确更新文件系统，因为这些缓存中的数据会随着文件和目录的创建、写入和删除而被修改。这些缓存中最重要的是缓冲区缓存，它集成到各个文件系统访问其底层块存储设备的方式中。

[**存储系统**视频讲座****](https://www.youtube.com/playlist?list=PLbMVogVj5nJSaAL3dScnPN3AesqFJ4esR)**,[闪存友好文件系统](https://www.youtube.com/watch?v=t_4_Ba7PSg4)**

 **```
long do_sys_open(int dfd, const char __user *filename, int flags, umode_t mode)
{
        struct open_flags op;
        int fd = build_open_flags(flags, mode, &op);
        struct filename *tmp;

        if (fd)
                return fd;

        tmp = getname(filename);
        if (IS_ERR(tmp))
                return PTR_ERR(tmp);

        fd = get_unused_fd_flags(flags);
        if (fd >= 0) {
                struct file *f = do_filp_open(dfd, tmp, &op);
                if (IS_ERR(f)) {
                        put_unused_fd(fd);
                        fd = PTR_ERR(f);
                } else {
                        fsnotify_open(f);
                        fd_install(fd, f);
                }
        }
        putname(tmp);
        return fd;
}

SYSCALL_DEFINE3(open, const char __user *, filename, int, flags, umode_t, mode)
{
        if (force_o_largefile())
                flags |= O_LARGEFILE;

        return do_sys_open(AT_FDCWD, filename, flags, mode);
} 
```

1.  [Linux 文件系统](http://www.amazon.in/Linux-File-Systems-Application-Development/dp/0072129557)- *Moshe Bar*
2.  [Linux 文件系统](http://www.amazon.in/Linux-Filesystems-Kaleidoscope-William-Hagen/dp/0672322722)- *William Von Hagen*
3.  [UNIX 文件系统：演变、设计和实现](http://www.amazon.in/UNIX%C2%AE-Filesystems-Evolution-Implementation-Veritas/dp/0471164836)- *Steve D. Pate*
4.  [实用文件系统设计](https://rads.stackoverflow.com/amzn/click/com/1558604979)- *Dominic Giampaolo*
5.  [文件系统取证分析](http://www.amazon.in/System-Forensic-Analysis-Brian-Carrier/dp/0321268172)- *Brian Carrier*
6.  [Linux 文件系统层次结构](http://www.tldp.org/LDP/Linux-Filesystem-Hierarchy/Linux-Filesystem-Hierarchy.pdf)- *Binh Nguyen*
7.  [BTRFS：Linux B 树文件系统](http://domino.watson.ibm.com/library/CyberDig.nsf/papers/6E1C5B6A1B6EDD9885257A38006B6130/$File/rj10501.pdf)- *Ohad Rodeh*
8.  [StegFS：适用于 Linux 的隐写文件系统](http://link.springer.com/chapter/10.1007%2F10719724_32)- *Andrew D. McDonald、Markus G. Kuhn*

* * *

> **安全性**（ 1 -> 2 -> 8 -> 4 -> 3 -> ...）
> 
> *“UNIX 并非旨在阻止其用户做愚蠢的事情，因为这也会阻止他们做聪明的事情”。— 道格·格温*
> 
> 如果不使用，任何技术都不起作用。道德随着技术而改变。
> 
> “ ***F × S = k*** ” 自由与安全的乘积是一个常数。- 尼文定律

密码学构成了在线信任的基础。黑客正在利用技术、物理或基于人的元素中的安​​全控制。保护内核免受其他正在运行的程序的影响是迈向安全和稳定系统的第一步，但这显然还不够：不同用户级应用程序之间还必须存在某种程度的保护。漏洞可以针对本地或远程服务。

> “你无法破解你的命运，蛮力……你需要一扇后门，一条通往生活的侧通道。” *——克莱德·杜萨*
> 
> 计算机不解决问题，它们执行解决方案。[在每一个非确定性的](http://en.wikipedia.org/wiki/Nondeterministic_algorithm)算法代码背后，都有一颗[坚定](http://en.wikipedia.org/wiki/Deterministic_algorithm)的心。 *-- /var/log/dmesg*

[**密码学和网络安全**视频讲座****](https://www.youtube.com/playlist?list=PL71FE85723FD414D7)**,[安全的命名空间](https://www.youtube.com/watch?v=w0SYSJITGiM),[远程攻击防护](https://www.youtube.com/watch?v=JzwnTpTavCM),[安全嵌入式 Linux](https://www.youtube.com/watch?v=5zSC_dClriE)**

 **```
env x='() { :;}; echo vulnerable' bash -c "echo this is a test for Shellsock" 
```

1.  [黑客：剥削的艺术](http://shop.oreilly.com/product/9781593271442.do)——*乔恩·埃里克森*
2.  [Rootkit 兵工厂：系统黑暗角落的逃生与躲避](https://rads.stackoverflow.com/amzn/click/com/1598220616)- *比尔·布伦登*
3.  [黑客暴露：网络安全秘密](https://rads.stackoverflow.com/amzn/click/com/0072121270)- *Stuart McClure、Joel Scambray、George Kurtz*
4.  [内核开发指南：攻击内核](http://www.amazon.in/Guide-Kernel-Exploitation-Attacking-Core/dp/1597494860)- *Enrico Perla、Massimiliano Oldani*
5.  [记忆取证的艺术](http://www.amazon.in/The-Art-Memory-Forensics-Detecting/dp/1118825098)- *Michael Hale Ligh、Andrew Case、Jamie Levy、AAron Walters*
6.  [实用逆向工程](http://www.amazon.in/Practical-Reverse-Engineering-Reversing-Obfuscation/dp/1118787315)- *Bruce Dang、Alexandre Gazet、Elias Bachaalany*
7.  [实用恶意软件分析](http://www.amazon.in/Practical-Malware-Analysis-Dissecting-Malicious/dp/1593272901)- *Michael Sikorski、Andrew Honig*
8.  [最大的 Linux 安全性：保护 Linux 服务器的黑客指南](https://rads.stackoverflow.com/amzn/click/com/0672316706)-*匿名*
9.  [Linux 安全](http://www.amazon.in/Linux-Security-Craig-Hunt-Library/dp/078212741X)- *Craig Hunt*
10.  [真实世界的 Linux 安全](https://rads.stackoverflow.com/amzn/click/com/0130464562)性- *Bob Toxen*

* * *

> **内核源**（0.11 -> 2.4 -> 2.6 -> 3.18）
> 
> “就像葡萄酒一样，内核编程的掌握随着时间的推移而成熟。但是，与葡萄酒不同的是，它在这个过程中变得更甜了”。——劳伦斯·穆切卡

你可能不认为程序员是艺​​术家，但编程是一个极富创造力的职业。这是基于逻辑的创造力。计算机科学教育不能使任何人成为专家级程序员，正如学习画笔和颜料可以使某人成为专家级画家一样。正如你已经知道的，知道路径和走路径是有区别的。卷起袖子亲手接触内核源代码至关重要。最后，有了你这样获得的核心*知识*，无论你走到哪里，你都会*发光*。

不成熟的程序员模仿；成熟的程序员偷窃；糟糕的编码员会破坏他们所接受的东西，而优秀的编码员会将其变成更好的东西，或者至少是不同的东西。优秀的编码员将他的盗窃融入到一种独特的感觉中，与被撕裂的感觉完全不同。

[**内核食谱**视频讲座****](https://www.youtube.com/playlist?list=PLQ8PmP_dnN7KxrWl4LIRmaCLyKXFsxwJw)

 **```
linux-0.11
├── boot
│   ├── bootsect.s      head.s      setup.s
├── fs
│   ├── bitmap.c    block_dev.c buffer.c        char_dev.c  exec.c
│   ├── fcntl.c     file_dev.c  file_table.c    inode.c     ioctl.c
│   ├── namei.c     open.c      pipe.c          read_write.c
│   ├── stat.c      super.c     truncate.c
├── include
│   ├── a.out.h     const.h     ctype.h     errno.h     fcntl.h
│   ├── signal.h    stdarg.h    stddef.h    string.h    termios.h
│   ├── time.h      unistd.h    utime.h
│   ├── asm
│   │   ├── io.h    memory.h    segment.h   system.h
│   ├── linux
│   │   ├── config.h    fdreg.h fs.h    hdreg.h     head.h
│   │   ├── kernel.h    mm.h    sched.h sys.h       tty.h
│   ├── sys
│   │   ├── stat.h      times.h types.h utsname.h   wait.h
├── init
│   └── main.c
├── kernel
│   ├── asm.s       exit.c      fork.c      mktime.c    panic.c
│   ├── printk.c    sched.c     signal.c    sys.c       system_calls.s
│   ├── traps.c     vsprintf.c
│   ├── blk_drv
│   │   ├── blk.h   floppy.c    hd.c    ll_rw_blk.c     ramdisk.c
│   ├── chr_drv
│   │   ├── console.c   keyboard.S  rs_io.s
│   │   ├── serial.c    tty_io.c    tty_ioctl.c
│   ├── math
│   │   ├── math_emulate.c
├── lib
│   ├── close.c  ctype.c  dup.c     errno.c  execve.c  _exit.c
│   ├── malloc.c open.c   setsid.c  string.c wait.c    write.c
├── Makefile
├── mm
│   ├── memory.c page.s
└── tools
    └── build.c 
```

1.  初学者从[Linux 0.11 源代码](https://www.kernel.org/pub/linux/kernel/Historic/old-versions/)开始（少于 20,000 行源代码）。经过 20 年的发展，与 Linux 0.11 相比，Linux 变得非常庞大、复杂、难学。但设计理念和主体结构没有根本变化。学习Linux 0.11还是有重要的现实意义的。
2.  内核黑客必读 =>`Linux_source_dir/Documentation/*`
3.  您应该在至少一个内核邮件列表中订阅并处于活跃状态。[从内核新手](http://kernelnewbies.org/)开始。
4.  您无需阅读完整的源代码。熟悉内核 API 及其用法后，直接从您感兴趣的子系统的源代码开始。您也可以从编写自己的即插即用模块开始来试验内核。
5.  设备驱动程序编写者将受益于拥有自己的专用硬件。[从树莓派](http://www.raspberrypi.org/)开始。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2009-05-27T09:05:25.177

尝试获取 Robert Love 关于 Linux 内核编程的书。它非常简洁易懂。

在此之后或同时，您可能想看一下“了解 Linux 内核”。但我不建议在早期阶段阅读。

另外，请查看[Linux 内核编程指南](http://tldp.org/LDP/lkmpg/2.6/html/)。由于可以从编程内核模块中学到很多东西，因此该指南将对您有所帮助。是的，有关大量信息，请查阅内核源代码压缩包的“文档”子目录。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-27T09:35:08.050

查看[Linux 内核管理员项目](http://kernelnewbies.org/KernelJanitors)

> ''我们检查 Linux 内核源代码，进行代码审查，修复未维护的代码并进行其他清理和 API 转换。这是内核黑客的良好开端。''

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-18T19:11:01.073

以下书籍我阅读并发现非常有用：

1.  [Linux 内核开发](https://rads.stackoverflow.com/amzn/click/com/0672329468)
2.  [了解 Linux 内核，第三版](https://rads.stackoverflow.com/amzn/click/com/0596005652)
3.  [专业的 Linux 内核架构](https://rads.stackoverflow.com/amzn/click/com/0470343435)
4.  [基本 Linux 设备驱动程序](https://rads.stackoverflow.com/amzn/click/com/0132396556)
5.  [Linux 设备驱动程序](https://rads.stackoverflow.com/amzn/click/com/B0026OR2XQ)
6.  [Linux 内核编程（第 3 版）](https://rads.stackoverflow.com/amzn/click/com/0201719754)
7.  [LF320 Linux 内核内部结构和调试](http://books.google.co.in/books?id=oASWSQAACAAJ&dq=linux%20kernel%20internals&hl=en&sa=X&ei=Kp22T4K_NsqHrAfjmqzoBw&ved=0CFQQ6AEwBQ)
8.  [Linux 系统编程：直接与内核和 C 库对话](http://books.google.co.in/books?id=k_ocKY0iegsC&pg=PA57&dq=linux%20kernel%20internals&hl=en&sa=X&ei=Kp22T4K_NsqHrAfjmqzoBw&ved=0CE4Q6AEwBA#v=onepage&q=linux%20kernel%20internals&f=false)
9.  [编写 Linux 设备驱动程序：练习指南](https://rads.stackoverflow.com/amzn/click/com/1448672384)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-27T08:59:19.607

我不得不说：“学习C”。:)

试试这本免费的在线书籍。

**Linux 内核模块编程指南** [http://www.linuxhq.com/guides/LKMPG/mpg.html](http://www.linuxhq.com/guides/LKMPG/mpg.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-27T11:16:27.660

检查 kernelnewbies.org，订阅 Kernelnewbies 邮件列表，访问 irc.oftc.org #kernelnewbies

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-31T11:56:28.140

一些资源：

*   书籍：Robert Love，Linux 内核开发，第 3 版
*   书籍：Corbet，Rubini，Linux 设备驱动程序，第 3 版（[此处](http://www.oreilly.com/catalog/linuxdrive3/book/index.csp)为免费版）
*   书：简而言之 Linux 内核（[此处](http://free-electrons.com/community/kernel/lkn/)为免费版本）
*   [Free Electrons](http://free-electrons.com/ "Free Electrons")提供的免费材料

# php - PHP - MySQL 查询不起作用

> ID：914695
> 
> 赞同：-1
> 
> 时间：2009-05-27T08:55:52.840
> 
> 标签：php, mysql, apache-flex

```
<mx:RemoteObject id="zendAMF" destination="zend" showBusyCursor="true" source="test_class" >
<mx:method name="doLogin" result="onSayHelloResult(event)">
        <mx:arguments>
            <username>
                {username.text}
            </username>
            <password>
                {password.text}
            </password>
        </mx:arguments>
    </mx:method>
</mx:RemoteObject> 
```

这是我的 Flex 代码，我没有使用 POST....

我不确定我是否正确，尽管我输入了正确的用户名和密码，但我总是得到返回值 no。

谁能帮我吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-27T09:04:04.667

if (isset($_POST['username']) && isset($_POST['password']))

这是决定你是否得到是或否的行。这意味着您不使用 post 从表单中获取变量。

它与查询无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-27T09:12:42.917

这似乎是一个 HTML 问题，而不是一个查询问题，因为唯一会使此类返回“否”的是您的 $_POST 变量。

希望表单的基础知识在 HTML 中看起来像这样：

```
<form method='post' action='filename.php'>
<input type='text' name='username' /><br />
<input type='password' name='password' />
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T08:58:43.100

你确定你不存储散列的密码吗？

另外，不要使用这个丑陋的功能，使用绑定参数。它更干净，更好。

**更新：**

`no`只要以下条件失败，就会返回：

```
if (isset($_POST['username']) && isset($_POST['password'])) 
```

，无论发生什么`MySQL`。

检查您是否设置了这两个变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T09:02:17.120

这一点：

```
$result = mysql_fetch_array(mysql_query($query));
return 'yes'; 
```

无论变量包含什么，都只返回**是，尝试做**`$result`

```
if(empty($result)){
 return 'no'
}else{
return 'yes'
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T09:04:50.233

如果您得到“否”，那是因为此代码未能返回 true：

```
if (isset($_POST['username']) && isset($_POST['password'])) 
```

那么...您是否为输入字段提供了这些确切的名称？表格真的被张贴了吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-27T09:06:03.007

如果您提供了用户名和密码，无论数据库说什么，您的函数 doLogin() 都会返回“是”...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-27T09:21:16.830

你应该写这行

```
 $result = mysql_fetch_array(mysql_query($query)); 
```

作为

```
 $res = mysql_query($query);
 if (!$res) {
     die "doLogin: " . mysql_error();
 }
 $user = mysql_fetch_array($res); 
```

至少在测试此代码时。通过这种方式，您可以查看数据库调用中是否有错误。

# nhibernate - NHibernate缓存唯一索引？

> ID：914698
> 
> 赞同：2
> 
> 时间：2009-05-27T08:57:03.760
> 
> 标签：nhibernate, caching, unique-key

我有一些类具有该对象独有的属性，例如对于 User 类，属性 Username 永远不应重复。

NHibernate 似乎不支持通过唯一键加载对象，然后以与 Load() 或 Get() 相同的方式缓存该对象。我这样说对吗？

如果我是，那么我将不得不通过可能沿着 LoadByUniqueIndex(lambda property, object key) 行的扩展方法来扮演我自己的角色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T09:25:07.510

是的，你是对的，除了 id 之外，NH 不会直接从缓存中获取实体。请注意，除了 id 之外的所有内容都可能发生变化，需要在数据库中查找。

缓存时要小心。“过早的缓存是万恶之源”之类的。说真的，如果您不确定是否会遇到明显的性能问题，请不要编写自己的缓存。

*   编写将实体作为参数传递的代码，以避免多次加载同一实体。
*   避免使用比会话更长的缓存。如果您不通知所有更改，您将拥有过时的数据。
*   避免使用静态缓存，而是使用线程静态。这避免了会话之间共享数据，这会破坏事务隔离。
*   如果您确实需要，请使用二级缓存。

如果您考虑拥有一个与应用程序运行一样长的静态缓存，我可以告诉您，您最好完全避免它。如果付出合理的努力，它将无法正常工作。

# asp.net - 循环遍历数据集

> ID：914703
> 
> 赞同：1
> 
> 时间：2009-05-27T08:58:08.017
> 
> 标签：asp.net, sql-server

在循环数据集时，我应该使用哪个代码片段，我应该选择 2 个 foreach 还是一个 for

片段1：

```
 for (int i = 0; i < ds.Tables["TableName"].Rows.Count; i++)
       {
           // My Code

        } 
```

片段2：

```
 foreach (DataRow dr in ds.Tables["TableName"].Rows)
        {
            foreach (DataColumn dc in ds.Tables["TableName"].Columns)
            {
                //My Code
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T08:59:47.030

第二个。

```
foreach (DataRow dr in ds.Tables["TableName"].Rows) 
```

只是因为它更容易阅读。添加索引变量“i”只会增加复杂性。您需要确保获得所有行 [边界检查]。`foreach`做它所说的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T09:11:38.630

当您实际上不需要计数器/行号时，该`foreach`语句有利于该语句......`for`

这些`for`语句引入了`i`变量，您绝对不需要。（...在您的示例代码中）

所以我投票给第二个...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T09:03:10.127

第二个，foreach，我认为更具可读性。但这是一个品味和偏好的问题。选择您喜欢和最舒适的。

一个这个 - 两个代码片段不做同样的事情。您是否忘记在第一个中枚举列？

# sql-server - 我可以同时在不同的 sql 实例上附加数据库吗？

> ID：914705
> 
> 赞同：0
> 
> 时间：2009-05-27T08:58:39.810
> 
> 标签：sql-server, sql-server-2008

我将 sql 数据库存储在共享网络驱动器上，经过一组配置后，我可以通过网络将此数据库附加到 sql server 2008 实例上。

但是我想在包含不同sql实例的不同机器上附加相同的数据库（我认为逻辑上没有数据损坏，因为我希望它是只读的）。

所以我的问题是我可以同时将数据库附加到多个 sql 实例吗？如何？

我这样做是为了使用集中式数据库？如果我不能，那么支持不同机器上不同sql实例之间数据库共享的其他解决方案是什么？

（我知道有 SAN 存储但对我来说很贵，而且我认为 Fiber/SCSI 连接不支持共享）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T09:28:01.777

如果两台服务器都在线，我认为您不能将一个 db 文件附加到多个服务器或服务器实例中。

如果您的目标是在另一台服务器上复制数据库副本，请查看[SQL Server replication](http://209.85.129.132/search?q=cache:LKTT-OGkgrUJ:download.microsoft.com/download/d/9/4/d948f981-926e-40fa-a026-5bfcf076d9b9/ReplicationAndDBM.docx+sql+server+2008+replication&cd=1&hl=en&ct=clnk)。根据您的要求，您可以使用多种类型的复制。另一个选项是[Database Mirroring](http://msdn.microsoft.com/en-us/library/5h52hef8.aspx)，它允许您在另一台服务器上镜像您的数据库副本，但我认为它并不真正适合您的需要，因为镜像只能访问当前主体服务器中的数据库。

镜像主要用于高可用性和灾难恢复场景。在 SQL Server Replication 中，您可以让两个服务器都可用，甚至可以更新数据库的两个副本并使它们在两个服务器上同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T09:10:44.467

您将得到的最接近的是：[Scalable Shared Databases](http://technet.microsoft.com/en-us/library/ms345392.aspx)

否则，这是一个简单的不。每个实例都想独占使用这些文件。

在网络共享上使用文件也存在问题：磁盘应该在设备管理器中是本地的（本地、NAS 或 SAN）。您可能能够在 UNC 路径上附加文件，但您绝对不能在 UNC 路径上创建新的数据库（没有一些跟踪标志技巧）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T09:16:43.017

我不清楚你为什么要这样做：你为什么不只是附加到一个实例并让人们通过通常的连接访问它？如有需要，您可以设置一个用户，该用户只能访问该数据库，并且仅被授予对表和视图的 SELECT 权限（注意对存储过程的权限）并让他们离开，而不会冒其中一个访问未经授权的数据库的风险，对此执行非法操作或某个实例的某些问题会破坏所有数据库。
我会三思而后行这样做的可能风险

# visual-studio - Visual Studios - 在不同项目之间共享文件夹

> ID：914707
> 
> 赞同：1
> 
> 时间：2009-05-27T08:58:50.027
> 
> 标签：visual-studio, visual-studio-2005, c#-2.0, filesystems, shortcuts

我有两个项目，一个 CF2.0 项目和一个 NET2.0 项目。这些项目分别与一个CF2.0应用项目和一个NET2.0 WebService项目相关。

这些项目是我的数据访问层，它们都是相同的，除了 ProtoBuf Dll 版本。

有什么方法可以让我的 NET2.0 DAL 项目只引用我的 CF2.0 项目中的文件夹，而不必复制所有 500 个左右的源文件？我敢肯定，在将快捷方式添加到文件然后项目编译引用的文件之前，我已经看到过这样做。

我正在使用 Visual Studios 2005。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T09:06:20.590

是的，确实可以将链接添加到文件而不是复制它，但这仅适用于文件，而不适用于文件夹。

不能'你只是引用编译的 DAL 吗？

# python - 如何遍历列表中除最后一项之外的所有内容？

> ID：914715
> 
> 赞同：189
> 
> 时间：2009-05-27T08:59:35.987
> 
> 标签：python

我想遍历一个列表，检查每个项目与它后面的项目。

有没有一种方法可以循环使用 for x in y 除了最后一个项目之外的所有项目？如果可以的话，我宁愿在不使用索引的情况下这样做。

**笔记**

自由空间回答了我的实际问题，这就是我接受答案的原因，但 SilentGhost 回答了我应该问的问题。

为混乱道歉。

* * *

## 回答 #1

> 赞同：378
> 
> 时间：2009-05-27T09:04:36.257

```
for x in y[:-1] 
```

如果`y`是生成器，则上述方法将不起作用。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2009-05-27T09:26:29.753

将序列项与以下内容进行比较的最简单方法：

```
for i, j in zip(a, a[1:]):
     # compare i (the current) to j (the following) 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2009-05-27T09:18:47.973

如果要成对地获取序列中的所有元素，请使用这种方法（成对函数来自 itertools 模块中的示例）。

```
from itertools import tee, izip, chain

def pairwise(seq):
    a,b = tee(seq)
    b.next()
    return izip(a,b)

for current_item, next_item in pairwise(y):
    if compare(current_item, next_item):
        # do what you have to do 
```

如果您需要将最后一个值与某个特殊值进行比较，请将该值链接到末尾

```
for current, next_item in pairwise(chain(y, [None])): 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-05-27T09:26:25.697

如果您的意思是将第 n 个项目与列表中的第 n+1 个项目进行比较，您也可以使用

```
>>> for i in range(len(list[:-1])):
...     print list[i]>list[i+1] 
```

请注意，那里没有硬编码。除非您有其他感觉，否则这应该没问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-27T10:07:46.487

要在不实例化列表的情况下将每个项目与迭代器中的下一个项目进行比较：

```
import itertools
it = (x for x in range(10))
data1, data2 = itertools.tee(it)
data2.next()
for a, b in itertools.izip(data1, data2):
  print a, b 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-03T08:50:51.117

这回答了 OP*应该问*的问题，即遍历一个比较连续元素的列表（优秀的[SilentGhost](https://stackoverflow.com/a/914815/341320)答案），但对任何组（*n-gram*）进行了概括：2、3、... `n`：

`zip(*(l[start:] for start in range(0, n)))`

例子：

```
l = range(0, 4)  # [0, 1, 2, 3]

list(zip(*(l[start:] for start in range(0, 2)))) # == [(0, 1), (1, 2), (2, 3)]
list(zip(*(l[start:] for start in range(0, 3)))) # == [(0, 1, 2), (1, 2, 3)]
list(zip(*(l[start:] for start in range(0, 4)))) # == [(0, 1, 2, 3)]
list(zip(*(l[start:] for start in range(0, 5)))) # == [] 
```

说明：

*   `l[start:]`从索引开始生成一个列表/生成器`start`
*   `*list`or `*generator`: 将所有元素传递给封闭函数`zip`，就好像它是写的一样`zip(elem1, elem2, ...)`

笔记：

AFAIK，这段代码尽可能地懒惰。未测试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-14T04:34:07.197

我接到你了。假设这是您的列表`categoricals` ，其中包含您要迭代的列的名称，除了最后一列`ReversedPayment`。

```
categoricals = ['SeniorCitizen','CollegeDegree','Married','FulltimeJob','ReversedPayment'] 
```

像下面这样写你的`for`循环，这应该给你你正在寻找的东西。

```
for i in categoricals[:-1]:
print(i) 
```

# database - 在实体框架中创建取代条件

> ID：914720
> 
> 赞同：0
> 
> 时间：2009-05-27T09:00:58.870
> 
> 标签：database, entity-framework

正如问题的标题所述......我有一个使用替代模型来存储信息的数据库......这意味着每次编辑客户时，软件不会更新行，而是简单地敲击新记录进入数据库，然后更新旧记录以获得指向这条新记录的指针。

我试图绘制 1 <> 1 关系，但不确定如何有效地绘制它......任何提示将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T09:53:59.340

这是正常的 1:1 关系，FK 在每次更新时都指向一条新记录（实际上是插入和更新）。您只需要确保先插入，然后将 FK 引用更新到新插入的记录。

此外，如果您确实希望保留旧记录，您应该将它们移动到不同的表而不是膨胀现有的表，因为这些记录可能已经过时并且除了审计之外很少需要访问。

# c++ - 如何移植 USB RNDIS 设备驱动程序？

> ID：914723
> 
> 赞同：1
> 
> 时间：2009-05-27T09:01:54.810
> 
> 标签：c++, windows, linux-device-driver, usb-drive

首先：我完全是这种工作的新手。

我有一个[USB rndis](http://en.wikipedia.org/wiki/USB_communications_device_class)设备驱动程序，适用于某些只能在 XP/2000/Vista 中工作的硬件。但是我想把它移植到 CE 或 Linux 上，供应商也说开发人员应该这样做。

总之，我有 XP 驱动程序和驱动程序具有的接口/端点配置。我有两个相关的问题：

1.  为什么我需要编写驱动程序来使用 IP 号与设备通信？Windows 默认不支持吗？

2.  如果是这样，我需要知道什么才能将驱动程序移植到另一个操作系统？我使用了windriver，它得到了配置，但接下来我该怎么办？关于该设备，我还应该了解什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T10:59:04.793

我不能直接回答你的问题，但是有[Sync](http://www.synce.org)项目，它是 linux 的 MS ActiveSync 替代品。它允许通过 rndis 与 Windows Mobile 设备进行通信。因此，如果您浏览网站，您会找到适用于 linux 的[usb-rndis-lite](http://www.synce.org/moin/SynceInstallation/Source)驱动程序的源代码。

也许这可以作为您工作的一些起点。

# java - 如何使构造函数仅对工厂类可用？

> ID：914727
> 
> 赞同：8
> 
> 时间：2009-05-27T09:02:54.060
> 
> 标签：java, class, oop, singleton

好吧，这个问题可能不是很清楚。让我提供一些细节：

假设我有一个名为 CFactory 的 Shoe (CShoe) 对象工厂类。CFactory 是一个单例类，它使用简单的 hashmap 创建和存储所有实例化的鞋子。然后通过静态方法访问它以使用创建的对象。

有没有办法强制 CShoe 的构造函数让它只能被工厂调用？（也就是说，保证鞋子的创建只能由鞋厂单例类完成，不能由其他类完成）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-27T09:21:58.157

你可以做`Shoe`一个`inner class`：`ShoeFactory`

```
public class ShoeFactory {

    public static class Shoe {
        private String name;

        private Shoe() {
        }

        private Shoe(String name) {
            this.name = name;
        }
    }

    public static Shoe createShoe(String shoeName) {
        return new Shoe(shoeName);
    }
} 
```

我认为这几乎涵盖了所有情况，除了....*反射*：

```
public class SmellyShoe {

    public static void main(String[] args) {
        try {
            java.lang.reflect.Constructor c = Shoe.class.getDeclaredConstructors()[0];
            c.setAccessible(true);
            Shoe smelly = (Shoe)c.newInstance(null);
            // grr
        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-27T09:10:19.117

您可以授予 CShoe 构造函数包访问权限，并将 CShoe 和 CFactory 放在同一个包中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T09:13:41.650

由于您想将每个对象添加到地图中，您也可以将此逻辑移动到 CShoe 构造函数中 - 对象将自行添加。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T11:18:49.840

首先，如果您保留所有创建的实例，则称为泄漏。我将继续假设您的意思是非强引用、有界或某些此类缓存，而且它`Shoe`也是不可变的。

只需使用`static`方法返回工厂。

```
public final class Shoe implements Footwear {
    private static final FootwearFactory<Shoe,Something> FACTORY =
        new FootwearFactory<Shoe,Something>() {
            ...
            public Shoe get(Something value) {
                value = new Something(value);
                ...
                return new Show(value);
            }
        };
    private static FootwearFactory<Shoe,Something> getFactory() {
        return FACTORY;
    }

    private final Something value;
    private Shoe(Something value) {
        this.value = value;
    }
    ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T09:21:23.913

您也许可以将工厂对象传递给构造函数？

```
public CShoe(CFactory factory)
{
    if (factory == null ||
          !factory.isValid()) // or whatever
    {
        throw new IllegalArgumentException();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-27T09:22:13.180

难道你不能把调用者实例作为一个静态成员的参数传递给 shoe 并在那里做一个像“isInstanceOf”这样的检查，如果为真，它会调用构造函数吗？

# java - 是否有分析 Java 类和方法的访问级别的工具？

> ID：914736
> 
> 赞同：0
> 
> 时间：2009-05-27T09:05:08.987
> 
> 标签：java

在我们应用程序的 Java 代码中，我很确定有很多类和方法可以`public`访问，但可能只需要包级别的访问。

我想做的是按包级别整理我们的代码，只制作真正需要在每个包之外可见的东西，`public`因为这应该简化我想做的其他重构。

我想知道是否有可用的工具可以帮助我解决这个问题。理想情况下，它会分析所有代码并生成一份报告，说明哪些类和方法具有公共访问权限，但只能从同一个包中调用。

Netbeans 中的*Find Usages*选项可以帮助我解决这个问题，但是为每个类和方法手动运行它并逐行分析输出将需要很长时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-27T09:49:31.547

过去我使用过[ProGuard](http://proguard.sourceforge.net/ "ProGuard")（一种字节码操作工具）来查找死代码。[ProGuard 手册](http://proguard.sourceforge.net/manual/examples.html#deadcode "死码查找")中有一个关于如何使用它的示例。请注意，该工具还可以执行许多其他操作，并且它并不是真正的典型用途，但它是我所知道的唯一可以扫描整个应用程序以查找死代码的工具。

编辑：所以我误读了这个问题。也许[UCDetector](http://www.ucdetector.org/)是你想要的。它声称能够检测到“可见性可以更改为受保护、默认或私有的代码。虽然它与 Eclipse 相关。我刚刚在我的代码库上尝试了 UCDetector，它似乎可以完成这项工作。当然检测到一些方法和可能会降低其可见性的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T10:51:45.447

便宜的（并且可能比为单次通过安装工具更快）是搜索和替换`public class`到`class`和类似地为`abstract`,`final`和`interface`. 重新编译。修复什么中断，直到它编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T09:25:35.980

netbeans [SQE 插件](https://sqe.dev.java.net/) 可能会有所帮助。

它将 FindBugs、PMD、CheckStyle 和 Lint4j 集成到 netbeans 中。这应该提供警告，公共方法可以设为包私有等。

# sql - 使我的 SSIS 包可移植 - 如何做到这一点？

> ID：914740
> 
> 赞同：3
> 
> 时间：2009-05-27T09:05:50.480
> 
> 标签：sql, sql-server, database, ssis

我知道如何创建 SSIS 包并获取我的数据源和目标。但是，如果我想让它在我的包中移动到另一台 PC 时可以更改源和目​​标连接字符串的意义上使其可移植，我必须在我的包中做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-27T09:24:50.723

几个选项。您的意思是要使解决方案可移植，以便可以在不同的 PC 上进行开发，还是要使最终可部署包可移植？

您可以对两者都使用包配置。它们可以在 SSIS / 配置菜单下访问。您指定要动态化的对象的属性，并将其保存到 XML 文件中（例如连接字符串、路径位置、变量值）。

您可以在文本编辑器中更改此 xml 文件，当包运行时，它将使用这些值。但是，如果您在多台机器上进行开发，这仍然有点麻烦。在新 PC 上打开解决方案时，您可能需要重新指定要使用的配置文件。

相反，如果它是数据库连接字符串，请考虑使用受信任的连接。它们意味着您不必输入 SQL 凭据。如果它用于文件位置，这将不起作用，但您可以复制目录结构或其他东西来解决这个问题。

如果是为了部署，那么包配置绝对是要走的路。确保您的项目正在使用配置文件，然后在编译时可以选择创建“部署包”。我认为这是在构建选项下。这将创建一个与配置文件打包在一起的安装程序文件，当您运行此安装程序时，您可以查看/更改配置值。

编辑 - 在这里找到了一些更详细的回复：http: [//vyaskn.tripod.com/sql_server_2005_making_ssis_packages_portable.htm](http://vyaskn.tripod.com/sql_server_2005_making_ssis_packages_portable.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T22:59:41.780

连同包配置。您可以创建一个部署实用程序，然后您可以使用它来进行文件系统部署。当您运行部署的可执行文件时，您将能够选择运行包的配置文件。

此设置默认设置为“假”

项目 > 属性... > 部署实用程序 > CreateDeploymentUtility = true

# wpf - 如何将此 TextBlock 淡入触发器转换为样式

> ID：914752
> 
> 赞同：1
> 
> 时间：2009-05-27T09:08:59.850
> 
> 标签：wpf, xaml, styles, textblock

此 XAML 使文本在出现时淡入。

我想将此功能放入样式中。

但是，由于样式不知道要使用哪个元素，我应该为“TargetName”添加什么？

如何将此淡入效果转换为样式？

```
<TextBlock Name="Message" Text="This is a test.">
  <TextBlock.Triggers>
    <EventTrigger RoutedEvent="TextBlock.Loaded">
      <BeginStoryboard>
        <Storyboard>
          <DoubleAnimation
            Storyboard.TargetName="Message" 
            Storyboard.TargetProperty="(TextBlock.Opacity)"
            From="0.0" To="1.0" Duration="0:0:3"/>
        </Storyboard>
      </BeginStoryboard>
    </EventTrigger>
  </TextBlock.Triggers>
</TextBlock> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-27T09:22:44.677

您不必使用 TargetName。这有效：

```
<Page
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <Page.Resources>
    <Style TargetType="TextBlock">
      <Style.Triggers>
        <EventTrigger RoutedEvent="TextBlock.Loaded">
          <BeginStoryboard>
            <Storyboard>
              <DoubleAnimation
                Storyboard.TargetProperty="(TextBlock.Opacity)"
                From="0.0" To="1.0" Duration="0:0:3"/>
            </Storyboard>
          </BeginStoryboard>
        </EventTrigger>
      </Style.Triggers>
    </Style>  
  </Page.Resources>
  <Grid>
    <TextBlock Name="Message" Text="This is a test.">
    </TextBlock>
  </Grid>
</Page> 
```

# mysql - mysql查询

> ID：914754
> 
> 赞同：1
> 
> 时间：2009-05-27T09:09:32.360
> 
> 标签：mysql

在mysql中，你如何计算一行中的非空单元格？而且我只想计算某些列之间的单元格，例如第 3-10 列之间的单元格。不是所有的列......再次，仅在该行中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T09:12:41.327

如果你想这样做，只能在 sql 中使用名称而不是数字来处理列，你必须使用调用查询的编程语言来处理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T09:32:23.890

从理论上讲，relvar 的属性是无序的，因此您不应该这样做。但是，在 MySQL 中，我相信您可以查询目录以获取名称以及表列的“顺序”。您可以像这样获取列名和顺序：

```
select column_name, ordinal_position from information_schema.columns where table_name='my_table'; 
```

但是，我怀疑这会对您有太大帮助。您正在做的事情闻起来像糟糕的数据库设计，如果您对设计无能为力，不幸的是有时会发生这种情况，您可以使用编程语言（例如 PHP）从表中获取行，然后使用循环“手动” ' 计算您喜欢的任何单元格中的非空单元格。您可以将行提取到数组中，然后通过提供数组索引来访问各个单元格。

如果你很高兴这样做，那为什么不呢？绝对不应该太难。

# nsis - NSIS - 开始菜单左侧的快捷方式

> ID：914755
> 
> 赞同：1
> 
> 时间：2009-05-27T09:09:43.483
> 
> 标签：nsis, shortcuts

Windows XP 开始菜单分为左右两部分。我可以添加到开始菜单的所有程序文件夹，但是如何在开始菜单的左侧为您的应用程序添加快捷方式？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-27T11:27:13.347

没有官方（即受支持并且或多或少保证在未来和未来版本的 Windows 上工作）的方式来做到这一点（根本不只是使用 nsis - nsis 部分是问题的简单部分），请参阅[http://blogs.msdn.com/oldnewthing/archive/2003/09/03/54760.aspx](http://blogs.msdn.com/oldnewthing/archive/2003/09/03/54760.aspx)。

话虽如此，固定条目存储在注册表中的二进制 blob 中，在 HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\StartPage\Favorites 中。其他人已经完成了您正在尝试做的事情，请参阅例如[http://groups.google.gm/group/microsoft.public.platformsdk.shell/browse_thread/thread/c11161e98​​3dd8a32](http://groups.google.gm/group/microsoft.public.platformsdk.shell/browse_thread/thread/c11161e983dd8a32)，但我知道没有任何人可以使用代码解析这个二进制 blob。取决于你如何决心让它发挥作用，你可以自己做。

# regex - 如何找出 Perl 正则表达式中有多少个捕获括号？

> ID：914762
> 
> 赞同：3
> 
> 时间：2009-05-27T09:11:18.397
> 
> 标签：表达式, regex, perl

如果在 Perl 中给我一个正则[表达式](/questions/tagged/regexp "显示标记为“正则表达式”的问题")，我能找出有多少个捕获括号吗？因此，例如：

```
\w       -> 0
(\w)     -> 1
(\w(\w)) -> 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-27T10:05:47.817

你想知道有多少匹配或多少组括号？如果您希望能够计算括号，那么您可能想看看像[Text::Balanced](http://search.cpan.org/~dconway/Text-Balanced-v2.0.0/lib/Text/Balanced.pm)这样的模块，它解析分隔的文本。

另一方面，如果您想知道如何匹配，最好在列表上下文中执行正则表达式：

```
my @matches = $string_to_match_on =~ /(\w(\w))/; 
```

列表的大小将为您提供匹配的数量：

```
my $count = @matches; 
```

（作为标量上下文中的列表或数组给出列表或数组的大小）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-27T10:57:37.137

重要的是要知道你为什么需要这个。

YAPE [::Regex](http://search.cpan.org/~pinyan/YAPE-Regex-3.03/)有帮助吗？

**编辑：**这是演示：

```
#!/usr/bin/perl

use strict;
use warnings;

use Data::Dumper;
use YAPE::Regex;

my $regex = qr/^(A)(B)(C)[0-9]+(\w+)$/;

my $parser = YAPE::Regex->new($regex);

my $n_captures;

while (my $node = $parser->next) {
    if ( $parser->state =~ /^capture\(([0-9]+)\)$/ ) {
        $n_captures = $1;
    }
}

print "$n_captures\n";

C:\Temp> t
4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T10:23:55.737

有两个特殊数组 @- 和 @+ 包含成功匹配的开始位置和结束位置。匹配完成时使用数组长度。

静态分析：要了解所有对，您需要解析正则表达式字符串。计算所有未转义的开括号，其中包含一个闭括号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T10:31:50.230

这并不是微不足道的，因为并非所有括号都没有捕获 - 例如 (?:...)、(?=...) 等等。

通常，请记住您始终可以：

```
my @catch_all = $string =~ m/......................./; 
```

然后检查@catch_all；

# php - 根据 IP 表检查访问者 IP。一些通配符

> ID：914765
> 
> 赞同：1
> 
> 时间：2009-05-27T09:11:56.537
> 
> 标签：php, regex, performance, ip-address

我有一个脚本，它循环遍历一组 IP，并针对它们检查客户端 IP。

```
//filter IP address list
$ip = array();
$ip[] = '10.10.5.*';
$ip[] = '234.119.260.65';
$ip[] = '234.119.254.2';

function testIP($ip){
//testing that correct IP address used
for($i=0, $cnt=count($ip); $i<$cnt; $i++) {
    $ipregex = preg_replace(”/\./”, “\.”, $ip[$i]);
    $ipregex = preg_replace(”/\*/”, “.*”, $ipregex);

    if(preg_match('/'.$ipregex.'/', $_SERVER[REMOTE_ADDR])){
    // apply filter
    return true;
    }
    //do not apply filter
    return false;
} 
```

问题是，我希望我的 ip 地址列表在一个表中，并且我想让它尽可能高效。我能看到的唯一方法是 SELECT * ，然后依次循环遍历每一个。任何人都可以看到更有效的方法吗？也许在 MySQL 方面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-27T09:19:50.470

将“*”更改为“%”然后执行

```
SELECT 1 FROM filters WHERE '1.2.3.4' LIKE ip LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T09:29:15.410

您可以使用 cisco 风格：

```
$ip[] = '10.10.5.0/24'; 
```

匹配功能如下

```
# Matches:
# xxx.xxx.xxx.xxx        (exact)
# xxx.xxx.xxx.[yyy-zzz]  (range)
# xxx.xxx.xxx.xxx/nn     (nn = # bits, cisco style -- i.e. /24 = class C)
#
# Does not match:
# xxx.xxx.xxx.xx[yyy-zzz]  (range, partial octets not supported)
function matchIP($range, $ip) {
    $result = true;
    if (preg_match("`^(\d{1,3}) \. (\d{1,3}) \. (\d{1,3}) \. (\d{1,3})/(\d{1,2})$`x", $range, $regs)) {
        # perform a mask match
        $ipl = ip2long($ip);
        $rangel = ip2long($regs[1] . "." . $regs[2] . "." . $regs[3] . "." . $regs[4]);
        $maskl = 0;
        for ($i = 0; $i< 31; $i++) {
            if ($i < $regs[5]-1) {
                $maskl = $maskl + pow(2,(30-$i));
            }
        }
        if (($maskl & $rangel) == ($maskl & $ipl)) $result = true;
        else $result = false;
    } else {
        # range based
        $maskocts = explode(".",$range);
        $ipocts = explode(".",$ip);
        # perform a range match
        for ($i=0; $i<4; $i++) {
            if (preg_match("`^\[(\d{1,3}) \- (\d{1,3})\]$`x", $maskocts[$i], $regs)) {
                if ( ($ipocts[$i] > $regs[2]) || ($ipocts[$i] < $regs[1])) {
                    $result = false;
                }
            } else {
                if ($maskocts[$i] != $ipocts[$i]) {
                    $result = false;
                }
            }
        }
    }
    return $result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T10:10:32.597

如果您的输入保证是 IP 地址（您将其拉出`$_SERVER`，因此有效性检查或“理解”IP 地址在这里是没有目标的）：

```
//filter IP address list
$ip = array();
$ip[] = '10.10.5.*';
$ip[] = '234.119.260.65';
$ip[] = '234.119.254.2';

function testIP($ip){
  //testing that correct IP address used
  for($i=0, $cnt=count($ip); $i<$cnt; $i++) {
    $ipregex = preg_replace("/\\./", "\\\\.", $ip[$i]);
    $ipregex = preg_replace("/\\*/", "[.\\\\d]+", $ipregex);

    if(preg_match("/^".$ipregex."$/", $_SERVER[REMOTE_ADDR])){
      // apply filter
      return true;
    }
  }
  //do not apply filter
  return false;
} 
```

# java - JMX 和 Tomcat：在 servlet 中创建和使用 MBean

> ID：914775
> 
> 赞同：1
> 
> 时间：2009-05-27T09:16:27.510
> 
> 标签：java, tomcat, servlets, jmx

有人对如何实现这一目标有一些想法吗？甚至是关于如何做到这一点的好文档？

基本上一切都是在一个测试独立版本中完成的（通过一个java客户端或jconsole，我可以调用mbeans方法并且一切正常），但我需要把它放在我的Tomcat servlet中......

感谢您的每一个建议！

抢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T00:08:47.087

[Tomcat监控](http://tomcat.apache.org/tomcat-5.5-doc/monitoring.html)文档描述了如何为 Tomcat 进程的 JVM 启用 JMX。简短的回答是您必须以某种方式设置 com.sun.management.jmxremote.* 系统属性——通过 CATALINA_OPTS、启动脚本或 Windows 服务定义。

当然，在您部署的应用程序中拥有 MBean。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-27T18:46:04.693

只需将 jconsole 附加到您的 Tomcat 进程，您就应该能够看到您的 Servlet 定义的任何 MBean。

# windows-mobile - Windows Mobile 6 CPU 架构？

> ID：914778
> 
> 赞同：2
> 
> 时间：2009-05-27T09:16:41.893
> 
> 标签：windows-mobile, cpu-architecture

Windows Mobile 6 是否可以在多个处理器架构上运行？还是只是 ARM X 代？我问是因为我想知道我是否可以为它编译一个本机二进制程序并确保它可以在所有 Windows Mobile 6 设备上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T09:53:03.787

似乎很难找到确切的信息，但到目前为止我能找到的信息都指向仅支持 ARM 处理器的 Windows Mobile 6。

首先，[Getting Memory Status and Processor Information](http://msdn.microsoft.com/en-us/library/bb158599.aspx)页面有以下关于获取系统信息的说法：

> 所有运行 Pocket PC 2002 和 Smartphone 2002 软件及更高版本的设备均基于 ARM4 CPU，并且 `wProcessorArchitecture`结构成员报告 `PROCESSOR_ARCHITECTURE_ARM`.

其次，[移动设备硬件概述](http://msdn.microsoft.com/en-us/library/bb158549.aspx)页面对处理器进行了以下说明：

> **中央处理器。**Windows Mobile 驱动的设备使用 ARM 系列 CPU。ARM 处理器提供了高性能和低功耗的完美结合。

这是我能找到的关于 Windows Mobile 6 支持的处理器架构的唯一参考资料，因此可能只支持 ARM 架构的处理器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-28T09:58:46.913

Windows Mobile 6 仅适用于 ARMv4i 处理器

Windows Mobile 5 仅适用于 ARMv4 处理器。

混淆是因为两者都建立在 Windows CE 5 之上，支持多处理器架构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T10:03:26.917

Windows Mobile 仅支持 ARMv4 类型意味着多处理器不是一个可能的选择。

每当 CE 6 的 Windows Mobile 版本发布时，都可能会出现转机。我希望微软能够提供具有更好的多处理器支持的最低要求版本的 ARM。

我知道一些手机制造商正在研究多处理器支持，但我相信我们离在野外看到它们还有很长的路要走。

是的，您可以假设为 ARMv4i 编译意味着它可以在所有 Windows 移动设备上运行。它适用于我编写的应用程序。如果您以 WM5 为目标，它现在将在 WM5 - WM6.5 上运行。

# javascript - JavaScript 节点列表

> ID：914783
> 
> 赞同：27
> 
> 时间：2009-05-27T09:17:25.340
> 
> 标签：javascript, dom, concat, nodelist

有没有办法加入由 2 次 document.getElementsByTagName 调用返回的 2 个 NodeLists？

说，我有以下代码

```
var inputs = documentElement.getElementsByTagName('input');
var selects = document.getElementsByTagName('select'); 
```

我想遍历结果。是否可以在一个循环中？

先感谢您！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-05-27T10:22:11.967

似乎您可以使用相同的 Array.prototype.slice.call 使 args 类数组对象成为数组。（[见这里](https://stackoverflow.com/questions/499814/recursively-concatenating-a-javascript-functions-arguments)）

```
var inputs = document.getElementsByTagName('input');
var selects = document.getElementsByTagName('select');

inputs = Array.prototype.slice.call(inputs);
selects = Array.prototype.slice.call(selects);

var res = inputs.concat(selects);

alert(res.length); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-05-27T09:54:33.533

你不能加入它们，但你仍然可以像这样在一个循环中按顺序循环它们：

```
for ( var i = 0; i < inputs.length + selects.length; i++ ) {
    var element = ( i < inputs.length ) ? inputs[i] : selects[i-inputs.length];
} 
```

或者，使用 jQuery，您可以一次性选择它们：

```
$('input, select') 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2010-02-23T11:36:36.883

```
document.querySelectorAll("input, select"); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-27T09:34:54.230

据我所知，该`NodeList`类型是不可变的（例如，参见[这篇文章](http://www.xul.fr/en/dom/nodelist.php)），这意味着您必须生成自己的对象。

一个简单的方法就是创建一个数组并将所有元素复制到该数组中。

```
var inputs = documentElement.getElementsByTagName('input');
var selects = document.getElementsByTagName('select');
var all = new Array(inputs.length + selects.length);

var index = 0;
for (i = 0; i < inputs.length; i++)
    all[index++] = inputs[i];
for (i = 0; i < selects.length; i++)
    all[index++] = selects[i]; 
```

然后该`all`变量包含两组节点的并集。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-23T15:58:03.727

```
function mergeNodeLists(a, b) {
  var slice = Array.prototype.slice;
  return slice.call(a).concat(slice.call(b));
} 
```

`console.log( mergeNodeLists( inputs, selects ) ); // => [input, select]`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-04-04T22:45:30.563

我把这个扔在一起了。*为每个循环执行if*和*.length*可能会产生一些开销，但我认为它很小，除非元素数量变得极端。

```
inputs = div.getElementsByTagName('input');
selects = div.getElementsByTagName('select');
for (i=0; i<inputs.length+selects.length; i++) {
    element = (i<inputs.length ? inputs[i] : selects[i-inputs.length]);

    // do whatever with element
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-08T07:18:13.623

我的书签短代码：

```
var e, t = d.getElementsByTagName('textarea'), u = d.getElementsByTagName('input'), i = t.length;
    while(e = (i > 0) ? t[--i] : u[-i--]){ if(e.offsetHeight > 0)... } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-27T09:53:21.400

首先，我认为可以使用 Array.prototype 连接数组，如下所示：

```
Array.prototype.concat.call(selects, inputs); 
```

但它不起作用，所以我从节点集合中创建了一个数组并将其连接起来。看起来像这样：

```
(function () {

    var inputs = document.getElementsByTagName('input'),
        selects = document.getElementsByTagName('select'),
        result,
        i,
        node;

    function convert (collection) {
        var a = [];
        for (var i = 0, length = collection.length; i < length; i++) {
            a.push(collection[i]);
        }
        return a;
    }

    // concatenation && convertation
    result = Array.prototype.concat(convert(inputs), convert(selects));
    // traversing
    i = result.length;
    while(node = result[--i]) {
        alert(node.getAttribute('name'));
    }

})(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-15T09:37:14.090

现在我肯定会使用以下内容：

铬、火狐 3.5+、IE8+

```
var elements = document.querySelectorAll('a');

for (var i = 0, element; (element = elements[i]); i++) {
    console.log(element);
} 
```

IE11+、Firefox 24+、Chrome 30+（启用实验）

```
let elements = document.querySelectorAll('a');

for (let i = 0, element; (element = elements[i]); i++) {
    console.log(element);
} 
```

"element = elements[i]" 优于 "elements.length"，因为：

“节点列表通常被实现为带有过滤器的节点迭代器。这意味着获得像长度这样的属性是 O(n)，并且通过重新检查长度来迭代列表将是 O(n^2)。”

与数组访问不同，据我所知，这是 O(1)。

更多细节：

*   [https://developer.mozilla.org/en-US/docs/Web/API/Document.querySelectorAll](https://developer.mozilla.org/en-US/docs/Web/API/Document.querySelectorAll)
*   [http://kangax.github.io/es5-compat-table/es6/](http://kangax.github.io/es5-compat-table/es6/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-04-01T15:47:36.753

Array.prototype.slice.call() 在 IE 7 中失败，使用这个：

```
Object.prototype.getMyElements = function(tags){
    tags = tags.split(',');
    var i, j, col=[], ci=0;
    for(i=0; i<tags.length; i++) {
        var objs = this.getElementsByTagName(tags[i]);
        for(j=0; j<objs.length; j++) col[ci++] = objs[j];
    }
    return col;
}
var objs = document.getMyElements('INPUT,TEXTAREA');
var objs = document.getElementById('myform').getMyElements('INPUT,TEXTAREA'); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-02-24T12:05:51.380

试试我的方法：

```
 var allES = [];
 var inputs = document.getElementsByTagName("input");
        for (i = 0; i < inputs.length; i++) {
              allES.push(inputs[i]);
            }
    // gather SELECT elements
         var selects = document.getElementsByTagName("select");
            for ( i=0; i < selects.length; i++){
                allES.push(selects[i]);
                } 
```

# visual-studio-2005 - 在“创建实例”对话框中键入参数

> ID：914792
> 
> 赞同：0
> 
> 时间：2009-05-27T09:20:37.177
> 
> 标签：visual-studio-2005

我正在使用 Visual Studio 2005 Team Edition，并尝试使用类视图中的创建实例选项来实例化一个类。构造函数有三个参数，其中两个是 DateTime 结构。

我的问题是：如何在`Value`框中输入有效的 DateTime？

我尝试了以下方法无济于事：

```
28-05-2009 06:00:00
"28-05-2009 06:00:00"
new DateTime("28-05-2009 06:00:00")
new System.DateTime("28-05-2009 06:00:00") 
```

在所有情况下，它只显示一个`Type Mismatch: 'System.DateTime' expected`错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T09:45:05.737

目前在现有的 Object Test Bench 中是不可能的

请参阅此链接。目前是“暂停”功能请求

[http://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=113080](http://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=113080)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-19T17:44:42.683

您可以从类视图中创建一个新的 DateTime 实例，然后从网格的下拉列表中选择它。

# c# - TimeSpan 使用可为空的日期

> ID：914802
> 
> 赞同：10
> 
> 时间：2009-05-27T09:23:30.413
> 
> 标签：c#, datetime, .net-2.0, nullable

当其中一个可以为空时，如何减去两个日期？

```
public static int NumberOfWeeksOnPlan(User user)
{
    DateTime? planStartDate = user.PlanStartDate; // user.PlanStartDate is: DateTime?

    TimeSpan weeksOnPlanSpan;

    if (planStartDate.HasValue)
        weeksOnPlanSpan = DateTime.Now.Subtract(planStartDate); // This line is the problem.

    return weeksOnPlanSpan == null ? 0 : weeksOnPlanSpan.Days / 7;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-27T15:58:36.030

要在零、一个或两个都可以为空时减去两个日期，*只需减去它们*。减法运算符做正确的事；您无需自己编写已经在减法运算符中的所有逻辑。

```
TimeSpan? timeOnPlan = DateTime.Now - user.PlanStartDate;
return timeOnPlan == null ? 0 : timeOnPlan.Days / 7; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-27T09:25:05.497

试试这个：

```
weeksOnPlanSpan = DateTime.Now.Subtract(planStartDate.Value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T09:25:33.220

将可为空的日期时间转换为正常的日期时间。

如果您知道它不为空，那么演员表将正常工作。

# java - lotus-notes 插件中的 UnsatisfiedLinkError

> ID：914803
> 
> 赞同：1
> 
> 时间：2009-05-27T09:23:35.623
> 
> 标签：java, eclipse-plugin, java-native-interface, lotus-notes

我们在笔记插件中遇到了一个 dll 问题。

当我们调用它时：NotesFactory.createSession();

我们得到这个错误：

无法创建视图：nlsxbe（文件名或扩展名太长。java.lang.UnsatisfiedLinkError: nlsxbe（文件名或扩展名太长。）在 java.lang.ClassLoader.loadLibraryWithPath(ClassLoader.java:952) 在 java。 lang.ClassLoader.loadLibraryWithClassLoader(ClassLoader.java:921) at java.lang.System.loadLibrary(System.java:452) at lotus.domino.NotesThread.load(Unknown Source) at lotus.domino.NotesThread.checkLoaded(Unknown Source ) 在 com.atempo.adam.lotus.plugin.views.TopicView.createPartControl(TopicView.java:609) 的 lotus.domino.NotesThread.sinitThread(Unknown Source)

NotesFactory 位于 Notes.jar 中，我们已将其包含在依赖项选项卡中的“plugin.xml”中。（依赖是：“com.ibm.notes.java.api”）。

jar 的路径是：“C:\Archivos de programa\IBM\Lotus\Notes\framework\rcp\eclipse\plugins\com.ibm.rcp.j2se.win32.x86_1.5.0.SR4-200707311521\jre\lib \Notes.jar" 超过 128 个字符。如果我们在“c:\program files\IBM”而不是“C:\Archivos de programa\IBM”中安装注释，则生成的路径短于 128，我们不会收到错误。

我们也尝试将 nlsxbe.dll 复制到 WIN\System32 或使用 regsvr32 命令注册 nlsxbe.dll，但我们得到相同的错误。

版本是：Lotus notes 8.0，Revision 20070803.1143 java 1.5.0

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-02-29T09:41:18.397

尝试将`nlsxbe`路径添加到您的环境变量。它对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T14:44:18.660

您是否将 jar 作为外部 jar 添加到插件项目中？如果是这样，请尝试将 jar 和 dll 复制到插件项目中并从那里引用它们。

您可以尝试向 Mikkel 寻求帮助，他在 Lotus Notes 中的插件开发方面拥有丰富的经验 --> www.lekkimworld.com

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-02-29T11:34:40.337

Notes.jar 应该在“Notes\jvm\lib\ext”文件夹中。改用那个。将 Notes.jar 放入插件中存在已知问题，可能会导致客户端崩溃/失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T09:07:29.713

@Carlos Jaime 给我写了一封电子邮件，我肯定会回复的。

@Mitch Wheat 我不知道你最近是否看过Notes，但是自从Notes 8 发布以来，这不再是你的祖父Notes！Notes 现在基于 Eclipse 和一个非常现代且功能强大的客户端。可能是当今市场上最强大的企业客户之一，即使不是最强大的。许多拥有像您这样的观点的人要么很久没有看到（或使用）Notes 客户端，要么他们是一个组织的一部分，由于我无法理解的原因根本不升级。

# c# - 如何获得触发器以根据 DataContext 属性更改 TextBlock 的颜色？

> ID：914806
> 
> 赞同：8
> 
> 时间：2009-05-27T09:24:50.787
> 
> 标签：c#, wpf, xaml, triggers, styles

为什么以下代码会出现运行时错误：

> Triggers 集合的成员必须是 EventTrigger 类型

但是 EventTrigger 元素没有 Binding 属性。

那么如何根据 DataContext 属性改变 TextBlock 的颜色呢？

XAML：

```
<Window x:Class="TestTrigger123345.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="300" Width="300">
    <StackPanel HorizontalAlignment="Left">
        <TextBlock Text="{Binding Status}">
            <TextBlock.Triggers>
                <DataTrigger Binding="{Binding Status}" Value="off">
                    <Setter Property="TextBlock.Background" Value="Red"/>
                </DataTrigger>
            </TextBlock.Triggers>
        </TextBlock>
    </StackPanel>
</Window> 
```

代码：

```
namespace TestTriggers
{
    public partial class Window1 : Window
    {
        public Window1()
        {
            InitializeComponent();
            DataContext = this;
            Status = "off";
        }

        public string Status { get; set; }    
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-27T09:29:31.917

您可以按照以下方式进行操作：

```
<TextBlock Text="{Binding Status}">
    <TextBlock.Style>
        <Style TargetType="{x:Type TextBlock}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Status}" Value="off">
                    <Setter Property="Background" Value="Red"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </TextBlock.Style>
</TextBlock> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-05-27T09:30:13.117

那是因为您只能直接在 Trigger 属性上设置事件触发器。

使用一种风格来实现你想要的：

```
<Style x:Key="Triggers" TargetType="TextBlock">
    <Style.Triggers>
        <DataTrigger Binding="{Binding Status}" Value="off">
            <Setter Property="TextBlock.Background" Value="Red"/>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

以下对象具有可以包含列出的触发器类型的触发器集合：

```
FrameworkElement     Style, ControlTemplate, DataTemplate
----------------     ------------------------------------
EventTrigger         EventTrigger
                     Trigger or MultiTrigger
                     DataTrigger or MultiDataTrigger 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-07-22T16:13:42.113

有一个错字，因为您没有关闭 Style.Triggers。我发现我需要使用属性 TextBlock.Background。谢谢，你让我找到了解决方案。

```
 <TextBlock.Style>
        <Style TargetType="{x:Type TextBlock}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Status}" Value="off">
                    <Setter Property="TextBlock.Background" Value="Red"/>
                 </DataTrigger>
            </Style.Triggers>
        </Style>
    </TextBlock.Style> 
```

# ruby - 在 Ruby 中，如何在从文字创建的核心类的新对象中初始化实例变量

> ID：914814
> 
> 赞同：2
> 
> 时间：2009-05-27T09:26:29.003
> 
> 标签：ruby, oop

```
class Object
  attr_reader :foo
  def initialize
    @foo = 'bar'
  end
end

Object.new.foo # => 'bar'
''.foo # => nil
//.foo # => nil
[].foo # => nil 
```

我希望他们都回来`'bar'`

我知道你已经可以这样做了：

```
class Object
  def foo
    'bar'
  end
end 
```

但我特别想初始化一个状态变量。另请注意，这不起作用。

```
class String
  alias_method :old_init, :initialize
  def initialize(*args)
    super
    old_init(*args)
  end
end

class Object
  attr_reader :foo
  def initialize
    @foo = 'bar'
    super
  end
end

''.foo # => nil 
```

这也不是：

```
class String
  attr_reader :foo
  def initialize
    @foo = 'bar'
  end
end

''.instance_variables # => [] 
```

我开始认为这实际上是不可能的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-04-22T00:47:57.583

这**是**可能的。

```
class Object
  class << self
    Kernel.send :define_method, :foo do #Object.send to be more restrictive
      @foo = 'bar'
    end
  end
end 
```

.

```
irb(main):023:0> class Object
irb(main):024:1> class << self
irb(main):025:2> Kernel.send :define_method, :foo do 
irb(main):026:3* @foo = 'bar'
irb(main):027:3> end
irb(main):028:2> end
irb(main):029:1> end
=> #<Proc:0x00007f5ac89db168@(irb):25>
irb(main):030:0> x = Object.new
=> #<Object:0x7f5ac89d6348>
irb(main):031:0> x.foo
=> "bar"
irb(main):032:0> [].foo
=> "bar"
irb(main):033:0> //.foo
=> "bar" 
```

理解特征类很重要。每个类都被 Ruby 解释器神秘地实现为隐藏类类型：

```
irb(main):001:0> class Object
irb(main):002:1>   def eigenclass
irb(main):003:2>     class << self; self; end
irb(main):004:2>   end
irb(main):005:1> end
=> nil
irb(main):006:0> x = Object.new
=> #<Object:0x7fb6f285cd10>
irb(main):007:0> x.eigenclass
=> #<Class:#<Object:0x7fb6f285cd10>>
irb(main):008:0> Object.eigenclass
=> #<Class:Object>
irb(main):009:0> Object.class
=> Class 
```

因此，在您的示例中，当您尝试在对象上调用 foo 时，它在 class 上运行`#<Object:0x7fb6f285cd10>`。但是，您希望它操作的是秘密课程`#<Class:#<Object:0x7fb6f285cd10>>`

我希望这有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-27T11:40:57.970

如果您要返回的东西（这里，`'bar'`）需要比小字符串更多的设置成本，您可以使用 HermanD[答案](https://stackoverflow.com/questions/914814/in-ruby-how-can-i-initialize-instance-variables-in-new-objects-of-core-classes-c/914838#914838)的记忆版本：

```
class Object
  def foo
    @foo ||= begin
      'bar' # something far more complicated than just "'bar'"
    end
  end
end 
```

*如果你真的*需要设置实例变量（出于某种我现在想不起来的原因），你甚至可以将 memoization 用于像 Strings 这样的廉价东西：

```
class Object
  def foo
    @foo ||= 'bar'
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T09:35:09.580

它不是实例变量，但会满足您的示例的要求

```
class Object
  def foo
    'bar'
  end
end 
```

# python - python多处理的生产者/消费者问题

> ID：914821
> 
> 赞同：14
> 
> 时间：2009-05-27T09:28:56.987
> 
> 标签：python, multiprocessing

我正在编写一个具有一个生产者和多个消费者的服务器程序，让我感到困惑的是只有放入队列的第一个任务生产者被消费，之后排队的任务不再被消费，它们永远留在队列中。

```
from multiprocessing import Process, Queue, cpu_count
from http import httpserv
import time

def work(queue):
    while True:
        task = queue.get()
        if task is None:
            break
        time.sleep(5)
        print "task done:", task
    queue.put(None)

class Manager:
    def __init__(self):
        self.queue = Queue()
        self.NUMBER_OF_PROCESSES = cpu_count()

    def start(self):
        self.workers = [Process(target=work, args=(self.queue,))
                        for i in xrange(self.NUMBER_OF_PROCESSES)]
        for w in self.workers:
            w.start()

        httpserv(self.queue)

    def stop(self):
        self.queue.put(None)
        for i in range(self.NUMBER_OF_PROCESSES):
            self.workers[i].join()
        queue.close()

Manager().start() 
```

生产者是一个 HTTP 服务器，一旦收到用户的请求，它就会将任务放入队列中。当队列中有新任务时，消费者进程似乎仍然被阻塞，这很奇怪。

PS另外两个与上述无关的问题，我不确定将HTTP服务器放在主进程以外的自己的进程中是否更好，如果是，我怎样才能让主进程在所有子进程结束之前继续运行。第二个问题，优雅地停止 HTTP 服务器的最佳方法是什么？

**编辑**：添加生产者代码，它只是一个简单的 python wsgi 服务器：

```
import fapws._evwsgi as evwsgi
from fapws import base

def httpserv(queue):
    evwsgi.start("0.0.0.0", 8080)
    evwsgi.set_base_module(base)

    def request_1(environ, start_response):
        start_response('200 OK', [('Content-Type','text/html')])
        queue.put('task_1')
        return ["request 1!"]

    def request_2(environ, start_response):
        start_response('200 OK', [('Content-Type','text/html')])
        queue.put('task_2')
        return ["request 2!!"]

    evwsgi.wsgi_cb(("/request_1", request_1))
    evwsgi.wsgi_cb(("/request_2", request_2))

    evwsgi.run() 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-27T13:08:41.067

我认为 Web 服务器部分一定有问题，因为它完美地工作：

```
from multiprocessing import Process, Queue, cpu_count
import random
import time

def serve(queue):
    works = ["task_1", "task_2"]
    while True:
        time.sleep(0.01)
        queue.put(random.choice(works))

def work(id, queue):
    while True:
        task = queue.get()
        if task is None:
            break
        time.sleep(0.05)
        print "%d task:" % id, task
    queue.put(None)

class Manager:
    def __init__(self):
        self.queue = Queue()
        self.NUMBER_OF_PROCESSES = cpu_count()

    def start(self):
        print "starting %d workers" % self.NUMBER_OF_PROCESSES
        self.workers = [Process(target=work, args=(i, self.queue,))
                        for i in xrange(self.NUMBER_OF_PROCESSES)]
        for w in self.workers:
            w.start()

        serve(self.queue)

    def stop(self):
        self.queue.put(None)
        for i in range(self.NUMBER_OF_PROCESSES):
            self.workers[i].join()
        self.queue.close()

Manager().start() 
```

样本输出：

```
starting 2 workers
0 task: task_1
1 task: task_2
0 task: task_2
1 task: task_1
0 task: task_1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-27T14:16:14.987

**“第二个问题，优雅停止HTTP服务器的最佳方式是什么？”**

这很难。

进程间通信有两种选择：

*   带外控制。服务器有另一种通信机制。另一个套接字、Unix 信号或其他东西。其他东西可能是服务器本地目录中的“立即停止”文件。看起来很奇怪，但它确实工作得很好，并且比引入一个选择循环来监听多个套接字或一个信号处理程序来捕获 Unis 信号更简单。

    “立即停止”文件很容易实现。循环仅在`evwsgi.run()`每次请求后检查此文件。为了让服务器停止，你创建文件，执行一个`/control`请求（这将得到一个 500 错误或其他东西，这并不重要）并且服务器应该停止。请记住删除立即停止文件，否则您的服务器将无法重新启动。

*   带内控制。服务器有另一个 URL ( `/stop`) 将停止它。从表面上看，这似乎是一场安全噩梦，但这完全取决于该服务器的使用地点和方式。由于它似乎是内部请求队列的简单包装器，因此这个额外的 URL 运行良好。

    为了完成这项工作，您需要编写自己的版本`evwsgi.run()`，可以通过设置一些变量以跳出循环的方式终止该版本。

**编辑**

您可能不想终止您的服务器，因为您不知道它的工作线程的状态。您需要向服务器发出信号，然后您只需等待它正常完成即可。

如果你想强行杀死服务器，那么`os.kill()`（或`multiprocessing.terminate`）将起作用。当然，除非您不知道子线程在做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-02-27T10:18:38.230

这可以提供帮助： [http ://www.rsdcbabu.com/2011/02/multiprocessing-with-python.html](http://www.rsdcbabu.com/2011/02/multiprocessing-with-python.html)

# c++ - Linux/C++ 如何调试发布应用程序

> ID：914833
> 
> 赞同：10
> 
> 时间：2009-05-27T09:33:24.623
> 
> 标签：c++, linux, multithreading

我有 linux c++ 多线程应用程序。现在它在生产服务器上进行了测试并且有段错误。问题是我无法在我的任何测试服务器上重现该错误并且无法访问生产服务器。我没有转储或任何其他有用的信息。只有一行： 0000000046bf0fb8 处的段错误 rip 000000000048ac6b rsp 0000000046bf0fa0 错误 6

我想问社区我可以从这条线上获得一些信息，这将有助于减少我应该搜索的可能地方的面积。由于速度慢，我无法在生产环境中运行调试构建。我可以添加什么来帮助我调试的版本？这个错误看起来像多线程错误，并且很难重现。但我不确定，因为应用程序可以处理来自 MTA 的许多不同的电子邮件。

平台：Linux

编译器行：g++ -O3 -D_REENTRANT

谢谢你。

更新。：感谢您的回答。我可以包含调试信息。我想知道调试发布版本的基本方法。例如我有转储和发布版本。我该如何继续。我应该读什么？如果可能的话，你能用几句话解释你如何调试你的应用程序吗？谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-27T11:11:16.780

正如 Andy 所提到的，当您进行发布构建时，请保留调试符号。

如果这使得完成的可执行文件的大小变得无法接受，那么您可以制作最终可执行文件的副本并运行它`strip`以删除调试符号。这样你就有*了两个*相同的可执行文件，除了一个有调试符号而另一个没有。将没有符号的放在生产服务器上。当它出现段错误时，针对仍包含调试符号的可执行文件的副本进行调试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-27T09:52:52.227

我最近一直在阅读 gdb 手册，他们建议将调试符号留在 eg 中`g++ -g`。

由于您无权访问生产服务器，因此可能包含一些基本的日志记录功能，这些功能会将数据输出到文本文件。您应该能够大致缩小发生错误的位置，具体取决于已输出到日志文件的数据。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-06-03T18:31:16.123

即使您没有使用调试标志构建应用程序，您也可以使用 gdb 在程序出现段错误的位置获取程序的回溯。这至少会让您了解应用程序的段错误。

```
gdb <your_app_exe>
gdb> run
gdb> backtrace 
```

或者

```
gdb <your_app_exe>
gdb> core-file <generated_core_file> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-27T15:49:36.127

您可以（并且应该）使用调试信息构建发布可执行文件。如果您不想分发包含调试信息的可执行文件，则可以[将调试信息分开](https://stackoverflow.com/questions/866721/how-to-generate-gcc-debug-symbol-outside-the-build-target/866731#866731)，稍后安装以进行调试。这就是我们在应用程序中所做的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-07-19T05:07:49.190

好吧，我找到了另一个我经常使用的解决方案，我们通常会得到堆栈（在这种情况下我们得到了）。

我有一个我们在某些嵌入式平台上部署的可执行文件。假设我的可执行文件是服务器。我使用 addr2line -e ./server 并粘贴从客户那里获得的堆栈。它将为您提供发生问题的行的详细信息。

它可能会帮助你。

谢谢

# iphone - 具有最小 drawRect 的空 UIView：开销

> ID：914834
> 
> 赞同：1
> 
> 时间：2009-05-27T09:33:34.480
> 
> 标签：iphone, uiview, drawing, compositing

我有一个应用程序，它具有三个嵌套视图，这些视图在机械上很重要，但没有视觉元素：

*   没有任何内容的 vanila UIView，仅用作 CALayers 的主机。
*   一个 UIScrollView （查询它的来源并用于在 3d 中定位 CALayers：我真的只使用这个视图来忠实地复制滚动视图的“机制”），
*   滚动视图的内容：一个 UIView 子类。它只是拾取触摸事件并将它们传递给委托 - 重要的是它的 UIResponder 机制。

承载 CALayers 的 UIView 是 UIImageView 的兄弟，它是绘制 CALayers 的背景图像。

我真的很想确保这些空的 UIView 没有任何与它们相关的绘图或合成开销（在时间或存储上），或者如果这不可能，则尽可能少地获得这个开销，并理解它我也许可以决定是否应该尝试不同的方法。

在界面生成器中，我已将所有视图设置为在绘制之前不清除它们的上下文。我没有将它们设置为不透明，因为它们绝对不是不透明的——它们是完全透明的。我发现我需要给滚动视图内容一个透明的清晰颜色（再次在 IB 中通过将背景颜色的不透明度设置为零），这表明它正在被绘制，这是我不想要的。

所以，简而言之，我不太了解什么是被绘制的，什么不是被绘制的（有人知道像 Quartz Debug for iPhone / 模拟器这样的工具吗？），或者如何阻止事情被绘制。

建议将非常受欢迎！谢谢，本约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T13:33:02.220

除了我不能说的 UIScrollView 之外，除非您手动调用 setNeedsDisplay 或将其图层的 needsDisplayOnBoundsChange 属性设置为 YES，否则您的其他视图不应该有太多的绘制开销。视图绘制一次并将其图层缓存在 GPU 上。重绘很昂贵，但只有当您通过我上面描述的方式手动触发它时才会发生这种情况。这些视图和层将使用内存，因此这是一个问题，尤其是当封闭视图变得非常大时（尤其是在 2048 x 2048 纹理限制大小附近）。不幸的是，您对此无能为力。

作为建议，如果您所做的只是在 3-D 中旋转和缩放图层，我可能会建议您查看我为使用 Core Animation 在 iPhone 上进行 3-D 旋转和缩放而编写的[一些示例代码](http://www.sunsetlakesoftware.com/2008/10/22/3-d-rotation-without-trackball). 它基于Bill Dudney 编写的[代码](http://bill.dudney.net/roller/objc/entry/using_the_trackball)，其中触摸事件被处理为单点触摸移动和两指捏合手势，然后用于操作 3-D 图层。这可以通过消除对 UIScrollView 和您的自定义内容视图的需要来简化您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-12-14T01:05:53.417

实际上，您可以使用带有 Core Animation 工具的 Instruments 来查看正在绘制的内容（请务必在退出之前禁用闪烁，因为它是您设备上的全局设置）。

# php - 使用 PHP 作为后端的 Flex Remoting 问题

> ID：914840
> 
> 赞同：0
> 
> 时间：2009-05-27T09:36:16.833
> 
> 标签：php, mysql, apache-flex

无论有用户名和密码，我的 PHP 代码总是返回 NO。

Flex/MXML 代码：

```
<mx:RemoteObject id="zendAMF" destination="zend" showBusyCursor="true" source="test_class" >
  <mx:method name="doLogin" result="onSayHelloResult(event)">
    <mx:arguments>
      <username>
        {username.text}
      </username>
      <password>
        {password.text}
      </password>
    </mx:arguments>
  </mx:method>
</mx:RemoteObject> 
```

动作脚本代码：

```
private function callZend():void {
  zendAMF.doLogin();
} 
```

PHP代码：

```
class test_class { 

  public function __construct() {
  }

  public function doLogin($username,$password) {

    include("connection.php");

    if (isset($_POST['username']) && isset($_POST['password']))
    {
      $username= $_POST['username'];
      $password= $_POST['password'];
      $query = "SELECT *
                FROM users
                WHERE username = '".mysql_escape_string($username)."'
                AND password = '".mysql_escape_string($password)."'";
      $result = mysql_fetch_array(mysql_query($query));
      return 'yes';
    }
    else
    {
      return 'no';
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-28T12:37:47.467

我很确定，因为 $username 和 $password 是您的方法的参数，并且由于您通过 RemoteObject 发送这两个参数，因此您已经有了它们的值，因此您不需要使用 $_POST。

```
public function doLogin($username,$password) {

include("connection.php");

if (isset($username) && isset($password))
{
  $query = "SELECT *
            FROM users
            WHERE username = '".mysql_escape_string($username)."'
            AND password = '".mysql_escape_string($password)."'";
  $result = mysql_fetch_array(mysql_query($query));
  return 'yes';
}
else
{
  return 'no';
}} 
```

这应该足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T14:51:40.813

这条线失败了：

```
if (isset($_POST['username']) && isset($_POST['password'])) 
```

您确定您的 flex 方法使用的是 POST 而不是 GET 吗？

# iphone - 在 Iphone 模拟器或终端中运行 gcc 可执行文件

> ID：914841
> 
> 赞同：1
> 
> 时间：2009-05-27T09:36:35.770
> 
> 标签：iphone, simulator

我有一个 helloworld.c 文件，内容如下：

```
#include "stdio.h"
main{ printf"Hello World\n");} 
```

我使用 arm-apple-darwin-gcc-4.0.1 工具链编译它并创建一个 hello.out 可执行文件。

我可以在 iPhone 模拟器/终端上运行这个可执行文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T15:10:52.727

可悲的是没有。

Kernighan 和 Ritchie，C 编程语言的发明者，曾在 AT&T 贝尔实验室工作。“ *Hello World* ”是 AT&T 的合法商标，不允许在其网络上使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T16:39:37.057

不，因为模拟器仍在英特尔上运行。arm 编译器正在生成一个 ARM 可执行文件。此外，您需要为模拟器制作一个 .app 包以识别应用程序。

# ruby-on-rails - 使用 SMS Gateway 收发短信有什么好处

> ID：914847
> 
> 赞同：2
> 
> 时间：2009-05-27T09:38:17.063
> 
> 标签：ruby-on-rails, sms

我正在使用 Rails 应用程序，并希望通过我的应用程序发送/接收文本消息。我看到的两个解决方案是使用 SMS Gateway 和使用与我的 Mac 配对的蓝牙手机，我正在运行通过手机发送 SMS 的 ultraSMS 程序。第二种选择肯定要便宜很多，因为 SMS 网关对专用号码收取相当多的费用。据我所知，第二种选择的缺点是 1\. 可靠性：手机和计算机必须始终打开并配对 2\. 可扩展性

SMS网关还有其他值得付费的主要优势吗？还有其他选择吗？

谢谢，

谭

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T09:47:53.173

如果您的应用程序不是那么重要，您可以使用电子邮件发送短信。SO有一些关于电子邮件到短信的问题。你可以搜索它们。

与使用个人手机相比，我更喜欢 SMS 网关。您不能同时使用手机发送 BULK 短信。手机一次发送一条短信，因此非常耗时。

在印度，短信网关比手机便宜（用于批量购买）。您可以选择可以包含字母和数字的发件人 ID。这是群发短信的另一个优势，因为它看起来更专业。

当您使用手机发送短信时，发件人 ID 功能不可用。只有当接收方存储了您的号码时，才能显示姓名。

另一个优势是报告。网关通常有报告。您可以生成自定义报告。当您通过电话发送短信时，请考虑发送报告的选项；-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T09:47:03.177

至少在挪威这里，SMS 网关为传入消息提供短（4 位）号码。客户将使用代码字开始消息，这将使网关将消息路由到您的应用程序。您表明您想要一个专用号码，在这种情况下，该点可能是静音的。

SMS 网关提供商通常可以提供支付服务，以便通过电话账单轻松支付。

我猜 SMS 网关通常会提供日志和统计信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T09:51:31.933

*   如果您可以在海外发送消息，国际定价当然是需要考虑的因素。

*   吞吐量。第三方每秒可以推送数千条消息。你的手机不能。

*   鉴别。当您发送 SMS 时，它是您在消息中附加的号码。第三方可以将该号码掩盖为短号码。

*   支持大量商业短信。如果您使用的是常规关税合同，您可能会发现发送您的信息明显违反合同条款。如果是这种情况并且他们发现了，那么他们完全有权让你保持高度干燥。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T10:34:00.087

当然，您应该选择 SMS Gateway 解决方案。从长远来看，这将被证明是更好的投资回报率模型。

其次，您无需购买带网关的专用传入号码，您只需在网关号码上租一个关键字即可。您的所有客户都会将他们的 SMS 请求发送到 Gateway 的专用号码，并且所有以您雇用的关键字开头的消息都将被转发/路由到您的 Web 应用程序 URL，该 URL 接收传入的消息。

网关还提供诸如自动响应之类的服务，它可以为您提供 0 的传出消息费用。从网关接收传入消息的页面将使用业务规则处理传入消息，并以 160 个字符内的文本响应进行响应，然后由网关接收并发送回请求客户的手机号码。这主要是一个短代码模型。

谢谢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-17T20:23:11.317

如今，将手机与您的软件集成看起来是一个非常奇怪的解决方案。[因此，我将通过我们的 API](https://developer.wavecell.com)示例来描述使用 API 发送短信的优势：

**这更容易**。就像注册和发送 HTTP 请求一样简单：

```
curl -X "POST" https://api.wavecell.com/sms/v1/amazing_hq/single \
    -u amazing:1234512345 \
    -H "Content-Type: application/json" \
    -d $'{ "source": "AmazingDev", "destination": "+6512345678", "text": "Hello, World!" }' 
```

这是[完整且非常详细的教程](https://developer.wavecell.com/v1/tutorials/api-send-sms-single)。

**它更加可靠和稳定。**实现稳定的服务很难。如果您想要更长的正常运行时间，您需要开发一个具有监控和高级运营团队的分布式系统。如果您需要高发送率（不要丢失您的消息），您需要不断测量移动运营商和 SMS 聚合器指标。

**它是可扩展的**。每天可以增长到数百万条短信，质量稳定，这是国产手机解决方案无法实现的。

**它是全球性的**。例如，如果您要从加拿大向新加坡电话号码发送信息，则您的运营商将使用与当地不同的漫游资费对这条消息进行收费。通常，它们比全球网关提供的相同交付要贵得多。您可以查看[我们的价格](https://wavecell.com/messaging/)并进行比较。

**更多功能**。正如@Shoban 提到的，这些是：SenderIds 和交付报告。您可能还需要具有分析和监控功能的丰富仪表板。您可以选择一种可用的协议（HTTP、SMPP）。此外，我们还有批量短信、短信调度、移动验证 API，...

# capture - libdc1394 上捕获的帧有问题

> ID：914848
> 
> 赞同：0
> 
> 时间：2009-05-27T09:39:31.990
> 
> 标签：capture

我一直在尝试使用 libdc1394 为火线相机编写帧捕获器。相机初始化正常，视频模式设置为支持`DC1394_VIDEO_MODE_640x480_YUV422`，抓帧无任何错误。

然而问题是，返回的帧由 640x480x1.5 字节组成，实际上是 YUV411 封装。视频帧结构还指出使用的视频模式是 YUV411。

但是数据实际上并没有用 YUV411 解码。取而代之的是 YUV422 解码产生了一个有效的图像，但是图像的下部区域丢失了，显然是由于帧数据丢失了最后一个字节（YUV422 是每像素 16 位，YUV411 是每像素 12 位）。

现在相机符合 IIDC v1.30 并且 libdc1394 支持它。正在使用唯一支持的视频模式（如 libdc1394 所述），这是相机手册说明相机正在使用的模式。

我还没有通过谷歌搜索找到解决这个问题的方法。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-07T10:02:24.477

问题在于设备的固件未能返回正确的视频模式值。它可以通过修补 libdc1394 以返回所需的值来解决。

# tcp - 就 TCP 而言，ISCL 是什么

> ID：914850
> 
> 赞同：2
> 
> 时间：2009-05-27T09:39:54.063
> 
> 标签：tcp

就 TCP 而言，ISCL 是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T09:50:58.377

它代表用于 [安全医学图像管理系统的集成安全通信层协议](http://adsabs.harvard.edu/abs/1999SPIE.3662..120K)。

> ISCL 是一个安全层，它管理表示层和 TCP/IP 层之间的安全功能。ISCL机制依赖于智能IC卡的基本功能和对称密钥机制。每个会话的对称密钥是由具有随机数的智能IC卡的内部认证功能制成的。ISCL 具有确保身份验证、自信和完整性的三个功能。实体认证过程是通过3路4路方法使用智能iC卡的内部认证和外部认证功能完成的。可以选择机密算法和MAC算法的完整性。ISCL 协议通过消息块进行通信，消息块由消息头和消息数据组成。

更多信息可以在[ISCL 和 DICOM Security](http://www.leadtools.com/SDK/Medical/Medical-Security-ISCL.htm)中找到。据我所知，它基本上是一种 SSL 协议替代方案，它使用智能卡而不是 CA（证书颁发机构），由日本人发明并在日本使用。不知道它有多受欢迎。

# asp.net - 如何在表单视图中找到链接按钮以编写更改模式的代码？

> ID：914853
> 
> 赞同：0
> 
> 时间：2009-05-27T09:40:34.250
> 
> 标签：asp.net, formview

我有一个包含 formview(fv) 的 web 表单。我怎样才能在其中找到一个链接按钮（lnkbtnEdit）以编写更改模式的代码？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T11:53:42.140

Cerebus，感谢您的回复....但似乎我无法在 fv 中选择 lnkbtnEdit。如果可以，那么只需在设计视图中选择它，然后在属性窗口的事件部分中，我可以编写一个处理程序来单击它......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T10:02:57.340

你的问题很模糊，所以我会尽量让我的回答尽可能笼统。

ASP.NET 中的容器控件提供了一个[FindControl](http://msdn.microsoft.com/en-us/library/system.web.ui.control.findcontrol.aspx)方法，该方法使用反射在其子控件中定位具有指定名称的控件。使用此方法是在页面或面板或模板控件（如 FormView）中定位控件的公认方法。

如果要避免Reflection，如果知道控件在层次结构中的索引，也可以手动定位控件。

此外，了解您需要访问此控件的时间点非常有帮助，因为很有可能尚未创建子控件。（请参阅我对您问题的评论。）

# ruby - wsdl2ruby SOAP::FaultError 详细属性中的解组异常

> ID：914856
> 
> 赞同：1
> 
> 时间：2009-05-27T09:42:44.667
> 
> 标签：ruby, unmarshalling

我使用 wsdl2ruby 为 Web 服务生成客户端。当服务方法引发 WSDL 中定义的异常之一时，我想访问异常对象的属性。据我所知，异常对象已编组到 SOAP::Mapping::Object 中，该对象由可用于 RESCUE 块的 SOAP::FaultError 对象的 detail 属性引用。

尽管 SOAP::Mapping::Object 响应 marshal_load 方法，但该方法采用一个参数 dumpobj，这使我认为我应该提供该对象作为方法的参数，而不是将该对象用作方法的接收者。

谁能指出我解组异常对象的正确方法的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-18T22:57:52.510

如果您调查 SOAP::Mapping::Object ...

```
rescue SOAP::FaultError => ee
  ## InvalidLogin, InvalidLocale, NoPermission, RuntimeFault
  ## ee.detail.__xmlele[0][0] is an XSD::QName object, with accessors name and namespace
  ## ee.detail.__xmlele[0][1] is a VMware::VIM25::xxx fault object
  vim_fault = ee.detail.__xmlele[0][1]
  case vim_fault.class
  when VMware::VIM25::InvalidLogin
  when VMware::VIM25::InvalidLocale
  when VMware::VIM25::NoPermission
  when VMware::VIM25::RuntimeFault 
```

# c++ - 不允许创建临时对象

> ID：914861
> 
> 赞同：28
> 
> 时间：2009-05-27T09:44:30.980
> 
> 标签：c++, mfc, temporary

在多线程应用程序中调试崩溃时，我终于在以下语句中找到了问题：

```
CSingleLock(&m_criticalSection, TRUE); 
```

请注意，它正在创建一个未命名的 CSingleLock 类对象，因此临界区对象在此语句之后立即解锁。这显然不是程序员想要的。这个错误是由一个简单的打字错误引起的。我的问题是，有没有办法阻止在编译时创建类的临时对象，即上述类型的代码应该生成编译器错误。一般来说，我认为每当一个类试图进行某种资源获取时，就不应该允许该类的临时对象。有没有办法强制执行？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-27T10:10:10.070

**Edit:** As j_random_hacker notes, it is possible to force the user to declare a named object in order to take out a lock.

However, even if creation of temporaries was somehow banned for your class, then the user could make a similar mistake:

```
// take out a lock:
if (m_multiThreaded)
{
    CSingleLock c(&m_criticalSection, TRUE);
}

// do other stuff, assuming lock is held 
```

Ultimately, the user has to understand the impact of a line of code that they write. In this case, they have to know that they're creating an object and they have to know how long it lasts.

Another likely mistake:

```
 CSingleLock *c = new CSingleLock(&m_criticalSection, TRUE);

 // do other stuff, don't call delete on c... 
```

Which would lead you to ask "Is there any way I can stop the user of my class from allocating it on the heap"? To which the answer would be the same.

In C++0x there will be another way to do all this, by using lambdas. Define a function:

```
template <class TLock, class TLockedOperation>
void WithLock(TLock *lock, const TLockedOperation &op)
{
    CSingleLock c(lock, TRUE);
    op();
} 
```

That function captures the correct usage of CSingleLock. Now let users do this:

```
WithLock(&m_criticalSection, 
[&] {
        // do stuff, lock is held in this context.
    }); 
```

This is much harder for the user to screw up. The syntax looks weird at first, but [&] followed by a code block means "Define a function that takes no args, and if I refer to anything by name and it is the name of something outside (e.g. a local variable in the containing function) let me access it by non-const reference, so I can modify it.)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-27T16:15:26.307

First, [Earwicker makes some good points](https://stackoverflow.com/questions/914861/disallowing-creation-of-the-temporary-objects/914950#914950) -- you can't prevent every accidental misuse of this construct.

But for your specific case, this can in fact be avoided. That's because C++ does make one (strange) distinction regarding temporary objects: **Free functions cannot take non-const references to temporary objects.** So, in order to avoid locks that blip into and out of existence, just move the locking code out of the `CSingleLock` constructor and into a free function (which you can make a friend to avoid exposing internals as methods):

```
class CSingleLock {
    friend void Lock(CSingleLock& lock) {
        // Perform the actual locking here.
    }
}; 
```

Unlocking is still performed in the destructor.

To use:

```
CSingleLock myLock(&m_criticalSection, TRUE);
Lock(myLock); 
```

Yes, it's slightly more unwieldy to write. But now, the compiler will complain if you try:

```
Lock(CSingleLock(&m_criticalSection, TRUE));   // Error! Caught at compile time. 
```

Because the non-const ref parameter of `Lock()` cannot bind to a temporary.

Perhaps surprisingly, class methods *can* operate on temporaries -- that's why `Lock()` needs to be a free function. If you drop the `friend` specifier and the function parameter in the top snippet to make `Lock()` a method, then the compiler will happily allow you to write:

```
CSingleLock(&m_criticalSection, TRUE).Lock();  // Yikes! 
```

**MS COMPILER NOTE:** MSVC++ versions up to Visual Studio .NET 2003 incorrectly allowed functions to bind to non-const references in versions prior to VC++ 2005\. [This behaviour has been fixed in VC++ 2005 and above](http://msdn.microsoft.com/en-us/library/cfbk5ddc(VS.80).aspx).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-27T10:00:24.473

不，没有办法做到这一点。这样做会破坏几乎所有严重依赖于创建无名临时文件的 C++ 代码。您对特定类的唯一解决方案是将它们的构造函数设为私有，然后始终通过某种工厂构造它们。但我认为治疗比疾病更糟糕！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-27T09:49:17.257

我不这么认为。

虽然这不是一件明智的事情——正如你已经发现你的错误——但声明没有什么“非法”的。编译器无法知道该方法的返回值是否“重要”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-27T09:57:23.950

编译器不应该禁止创建临时对象，恕我直言。

特别是像缩小矢量这样的特殊情况，您确实需要创建临时对象。

```
std::vector<T>(v).swap(v); 
```

虽然有点困难，但代码审查和单元测试仍然应该抓住这些问题。

否则，这是一个穷人的解决方案：

```
CSingleLock aLock(&m_criticalSection); //Don't use the second parameter whose default is FALSE

aLock.Lock();  //an explicit lock should take care of your problem 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-28T22:53:47.100

What about the following? Slightly abuses the preprocessor, but it's clever enough that I think it should be included:

```
class CSingleLock
{
    ...
};
#define CSingleLock class CSingleLock 
```

Now forgetting to name the temporary results in an error, because while the following is valid C++:

```
class CSingleLock lock(&m_criticalSection, true); // Compiles just fine! 
```

The same code, but omitting the name, is not:

```
class CSingleLock(&m_criticalSection, true); // <-- ERROR! 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-01T10:47:32.573

I see that in 5 years nobody has come up with the most simple solution:

```
#define LOCK(x) CSingleLock lock(&x, TRUE);
...
void f() {
   LOCK(m_criticalSection); 
```

And now only use this macro for creating locks. No chance to create temporaries any more! This has the added benefit that the macro can be easily augmented to perform any kind of checking in debug builds, for example detecting inappropriate recursive locking, recording file and line of the lock, and much more.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-22T20:05:22.863

Old question, but I have a couple of points to add.

By define a macro function with the same name as the class, you can trigger a static assertion with a helpful message when someone forgets the variable name. [live here](https://wandbox.org/permlink/TcgakQxGthoky5gR)

```
class CSingleLock {
 public:
  CSingleLock (std::mutex*, bool) { }
};

// must come after class definition
#define CSingleLock(...) static_assert(false, \
    "Temporary CSingleLock objects are forbidden, did you forget a variable name?") 
```

The macro [won't match when there is a variable name](https://wandbox.org/permlink/l7ifywBVsFL8tSrC). However, this [doesn't help in the case of uniform initialization](https://wandbox.org/permlink/O3gNHhr26dijV0Aj); you can't catch `CSingleLock{&m, true}`. [PfhorSlayer's answer](https://stackoverflow.com/a/25559246/1013719) works with uniform initialization so it is safer to use, at the cost of a more confusing error message. I would still reccomend that solution over mine. Unfortunately all these macro solutions [fail when the type is in a namespace](https://wandbox.org/permlink/ZJcB6srD81pHblKc).

* * *

Another solution is to produce a compiler warning using `[[nodiscard]]`

```
class CSingleLock {
 public:
  [[nodiscard]] CSingleLock (std::mutex*, bool) { }
}; 
```

If you create a temporary [clang will warn you](https://wandbox.org/permlink/80Q1Nu9F4bX8ZGbl) saying:

```
warning: ignoring temporary created by a constructor declared with 'nodiscard' attribute [-Wunused-value]
  CSingleLock(&m, true);
  ^~~~~~~~~~~~~~~~~~~~~ 
```

GCC 9.2 seems to have a problem with [`[[nodiscard]]` on constructors](https://wandbox.org/permlink/54QVs5l58JSFE3yG) though. It still [gives additional warnings](https://wandbox.org/permlink/xjOBkGsfrJLdXUzI) if you don't use the result. The problem is [fixed on head](https://wandbox.org/permlink/T5eY2HyJtQYwYVvS) which at the time of writing this is gcc-10 20191217 on wandbox.

# iphone - 为什么加载视图控制器时不调用我的 initWithNib 方法？

> ID：914867
> 
> 赞同：2
> 
> 时间：2009-05-27T09:48:10.397
> 
> 标签：iphone, cocoa-touch, uikit, uiviewcontroller, nib

我有一个继承自 UIViewController 的类。在那里，我想像这样进行一些 ivar 初始化：

```
- (id)initWithNibName:(NSString *)nibName bundle:(NSBundle *)nibBundle { // Load the view nib
    NSLog(@"Hello Earth!");
    if (self = [super initWithNibName:nibName bundle:nibBundle]) {
        self.visibleIndex = 0;
        NSLog(@"Hello Planet!");
    }
    return self;
} 
```

出于某种原因，我确实看到了从笔尖加载的内容。但由于另一个原因，这个初始化程序永远不会被调用。我从来没有收到日志消息。那有什么问题？我肯定有笔尖，所以实际上必须调用它，对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-27T12:08:44.480

如果您的 UIViewController 是由 nib 创建的，则不使用此方法。您需要覆盖 viewDidLoad：

```
-(void) viewDidLoad {
    [super viewDidLoad];
    NSLog(@"Hello Planet");
} 
```

initWithNibName 仅在您实际通过代码实例化控制器时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-09-14T00:45:38.150

我想你是在想`viewLoaded`，不是`initWithNibName`。如果您想以编程方式设置视图，则调用 viewLoaded。`initWithNibName`如果您使用笔尖加载，则调用它....因此名称？但是视图的设置不应该在 之前完成`viewDidLoad`，但其他初始化工作应该在 中完成`initWithNibName`，例如，设置任何数组或其他变量。

# c# - 从枚举中获取值

> ID：914869
> 
> 赞同：1
> 
> 时间：2009-05-27T09:48:49.023
> 
> 标签：c#, .net, enums

我有一些代码可以为枚举设置一个带有一些默认值的字典：

```
foreach (string status in Enum.GetNames(typeof(TargetStatusType)))
{
    dict.Add((TargetStatusType)Enum.Parse(typeof(TargetStatusType), status), 0);
} 
```

有没有更简单的方法可以做到这一点，因为它看起来有点乱。

我希望我能做到

```
foreach(TargetStatusType status in ?) ... 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-27T09:52:39.887

使用[`Enum.GetValues()`](http://msdn.microsoft.com/en-us/library/system.enum.getvalues.aspx)：

```
foreach (TargetStatusType type in Enum.GetValues(typeof(TargetStatusType))) 
```

请注意，虽然`GetValues()`仅声明为 return `Array`，但`foreach`循环会自动为您执行强制转换。或者，`TargetStatusType[]`如果您想在不同的循环中使用它，则可以将结果转换为，在这种循环中转换每个值会很不方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T09:52:53.040

首先，这里不需要使用字典（或为此创建任何类型的新集合）。此外，获取枚举值的名称然后解析它们是一个非常复杂的方法，您只需调用`GetValues`.

以下应该做的工作：

```
foreach(var status in Enum.GetValues(typeof(TargetStatusType))
    .Cast<TargetStatusType>())
{
    // ...
} 
```

对`Cast`扩展方法的调用意味着您的`status`变量是强类型的（类型`TargetStatusType`）而不是简单的类型`object`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T10:35:31.533

如果这是字典的初始化（没有添加先前的值），您还可以使用 linq dict = Enum.GetValues(typeof(TargetStatusType)).ToDictinary(en => en,x => 0)

但我不禁想知道您为什么要将它们添加到字典中。你可能有很好的理由:) 我想知道因为价值是一样的。如果用于查找，则具有枚举的 int 值的数组索引将比字典快得多。如果您不关心值并且只想强制添加一次密钥，则可以改用 Hashset<>

# asp.net-2.0 - 显示最近的文件

> ID：914876
> 
> 赞同：0
> 
> 时间：2009-05-27T09:50:05.853
> 
> 标签：asp.net-2.0

我有一个包含所有 excel 文件的文件夹。我想在页面中以编程方式显示最新的 excel 文件以供下载。我正在使用 C#.net.plz 帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T10:06:36.723

如果*最近*您的意思是最近写入，那么您可以使用以下代码收集给定目录中的所有 excel 文件，并按上次写入时间对它们进行排序：

```
var files = from f in new DirectoryInfo(@"c:\some_directory").GetFiles("*.xls")
            orderby f.LastWriteTime descending
            select f;

foreach (var file in files)
{
    Console.WriteLine(file);
} 
```

您可能感兴趣的[FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)的其他属性是[LastAccessTime](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.lastaccesstime.aspx)和[CreationTime](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.creationtime.aspx)。

* * *

编辑：抱歉，我没有注意到您使用的是 .NET 2.0。因此，这是在给定目录中查找所有 excel 文件并按上次写入时间排序的等效代码：

```
List<FileInfo> files = new List<FileInfo>(new DirectoryInfo(@"c:\some_directory")
    .GetFiles("*.xls"));
files.Sort(delegate(FileInfo f1, FileInfo f2) 
{ 
    return f2.LastWriteTime.CompareTo(f1.LastWriteTime); 
}); 
```

在您的问题中，您提到在 ASP.NET 应用程序中下载文件。因此，一旦您检索到文件列表，您就可以在表格中将其显示给用户，以便他可以选择要下载的文件。

# debugging - 如何在 Visual Studio 的设备上查看 SqlCE 数据库中的数据？

> ID：914877
> 
> 赞同：0
> 
> 时间：2009-05-27T09:50:22.373
> 
> 标签：debugging, windows-mobile, compact-framework, sql-server-ce

我正在 Windows Mobile 设备上调试应用程序，并希望在设备上查看 SqlCE 数据库中的数据。有人告诉我将 SDF 文件从设备复制到我的开发盒中，但是有没有更简单的方法可以通过 Visual Studio 完成此操作而无需复制任何内容？

我正在使用 Visual Studio 2005、Compact Framework V2 和 Windows Mobile 5。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T12:54:48.117

使用 Studio 没有更简单的方法，没有（Studio '08 也有同样的限制）。 [PrimeWorks 的数据端口控制台](http://www.primeworks-mobile.com/Products/DataPortConsole.html)允许从 PC 上查看设备数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T20:29:23.567

在 2008 中，当您添加新连接时，可以选择“ActiveSync 连接设备”。尽管我在使用某些设备时遇到了问题，但这似乎大部分时间都有效。

尽管我发现将数据库复制到桌面通常会更好，因为它使用起来更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-04T14:07:41.213

我相信如果您转到服务器资源管理器（查看 -> 服务器资源管理器），单击“添加连接”按钮并选择“Microsoft SQL Server Compact 3.5（Microsoft SQL Server Compact 3.5 的 .NET Framework 数据提供程序）”（可能会说 2.0在您的情况下）作为您的数据源，您可以选择从本地计算机或 ActiveSync 连接设备中选择数据库。正如 tjjjohnson 所说，这将是一种检查数据库的相当慢的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-04T12:20:52.973

您是否必须在实际设备上运行它才能调试？如果不是，我建议将其部署到模拟器并使用 SD 卡位置中的数据库运行，该位置将出现在您 PC 上的文件系统中。从那里您可以在运行移动应用程序的同时浏览数据库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-05T00:38:20.630

我使用 WebMatrix 打开了我的 App_Data/database.sdf SQL Compact DB 文件所在的文件夹，并且工作起来就像一个魅力

# jquery - Jquery - 在文档准备好之前停止单击

> ID：914878
> 
> 赞同：0
> 
> 时间：2009-05-27T09:50:57.317
> 
> 标签：jquery

我想在页面加载之前停止点击任何链接。

你能帮我怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T09:54:30.633

```
变种唐点击=真；
$(文档).ready(函数 () {
  不要点击=假；
}
$(文档).click(函数(e){
  if(dontclick && e.target.tagName=='INPUT') e.preventDefault();
});

```

# eclipse - 如何在 Eclipse 中更改 SVN 存储库的凭据？

> ID：914895
> 
> 赞同：123
> 
> 时间：2009-05-27T09:53:40.243
> 
> 标签：eclipse, svn, subclipse, subversive

我在 Windows 上安装了带有 subclipse 的 Eclipse 3.4.2。另一位开发人员使用他的凭据添加了一个 SVN 存储库并选择了“保存密码”。现在，每次我对 SVN 做任何事情时，都会使用他缓存的凭据。我怎样才能将它们更改为我的？

我已经检查了“workspace/.metadata/.plugins/org.tigris ...”文件夹，但找不到任何方法来重置这些缓存的凭据。

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2009-05-27T10:02:09.573

[http://subclipse.tigris.org/wiki/PluginFAQ#head-d507c29676491f4419997a76735feb6ef0aa8cf8](http://subclipse.tigris.org/wiki/PluginFAQ#head-d507c29676491f4419997a76735feb6ef0aa8cf8)：

> **用户名和密码**
> 
> 在定义存储库时，Subclipse 不会收集或存储用户名和密码凭据。这是因为 JavaHL 和 SVNKit 客户端适配器足够智能，可以在需要时提示您输入此信息——包括您的密码已更改时。
> 
> 您还可以允许适配器缓存此信息，一个常见的问题是如何删除此缓存信息以便再次提示您？我们有一个开放的请求，希望将 API 添加到 JavaHL，以便我们可以提供 UI 来执行此操作。目前，您必须手动删除缓存。缓存的位置因使用的客户端适配器而异。
> 
> JavaHL 将信息缓存在与命令行客户端相同的位置——在 Subversion 运行时配置区域中。在 Windows 上，它位于 %APPDATA%\Subversion\auth。在 Linux 和 OSX 上，它位于 ~/.subversion/auth。只需找到并删除包含缓存信息的文件即可。
> 
> SVNKit 在 Eclipse 密钥环中缓存信息。默认情况下，这是一个名为 .keyring 的文件，存储在 Eclipse 配置文件夹的根目录中。这两个值都可以用命令行选项覆盖。要清除缓存，您必须删除该文件。Eclipse 将在您重新启动时创建一个新的空密钥环

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-09-22T16:01:39.193

我的妻子建议：

1.  打开 SVN 存储库视图
2.  打开位置属性...
3.  显示凭证：按 [X] 按钮
4.  选择用户，输入密码，按【完成】

所有的工作！

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2011-01-28T10:55:56.780

去`c:\Documents and Settings\[username]\Application Data\subversion\auth\svn.simple`

并删除十六进制文件。通常每个文件都与一个存储库相关联

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-03-19T08:25:35.820

在 Eclipse 中更改用户名和密码太简单了。

只需按照以下步骤操作：

在你的 Eclipse 中，

> Goto Window -> Show View -> Other -> (Type as) SVN Repositories -> 点击(SVN Repositories) -> 右键单击​​SVN Repositories -> Location Properties -> General 选项卡更改凭据的以下详细信息。，

就是这样。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2012-02-09T20:57:23.697

在 Mac OS X 上，转到文件夹 /$HOME (/Users/{user home}/)。您将看到文件“.eclipse_keyring”。去掉它。所有保存的凭据都将丢失。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-08-02T14:33:42.897

在任何 Windows 版本上删除以下文件夹：

> %APPDATA%\Subversion\auth

（您可以将其复制并粘贴到 RUN/Explorer，它会为您解析 App-Data-Folder。）

在 Linux 和 OSX 上，它位于

> ~/.subversion/auth

资料来源： [http ://www.techcrony.info/2008/03/26/admin/how-to-change-eclipse-svn-password/](http://www.techcrony.info/2008/03/26/admin/how-to-change-eclipse-svn-password/)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2012-01-31T17:04:26.877

在 Windows 7 上，转到 C:\Users\%User_Name%\AppData\Roaming\Subversion 并删除 auth 目录。请注意，如果您连接到多个 SVN 服务器，这将删除您配置的所有 SVN 服务器的身份验证。如果您只想重置单个服务器：

在 auth 目录中，您应该会看到一个名为 svn.simple 的文件夹。使用文本编辑器打开每个文件以确定要删除的文件，然后仅删除该单个文件。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2014-04-09T06:03:29.537

在窗口中：

1.  开放式运行类型`%APPDATA%\Subversion\auth\svn.simple`
2.  这将打开`svn.simple`文件夹
3.  您会找到一个文件，例如 Big Alpha Numeric 文件
4.  删除那个文件。
5.  重启日食。
6.  尝试从项目中编辑文件并提交
7.  您可以看到询问用户名密码的对话框

它对我有用.... ;)

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2013-02-20T08:10:31.633

非常简单的步骤：Eclipse：Window ----> Preferences -----> SVN -----> SVN Interface ----->Select SVNKit (pure Java)

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2013-10-16T21:07:31.200

我无法找到该`svn.simple`文件，但能够使用以下三个步骤更改凭据：

来自 SVN 的结帐项目

![在此处输入图像描述](https://i.stack.imgur.com/aSu2G.png)

选择您需要更改凭据的存储库（注意：您不会执行结帐，但这会将您带到屏幕以输入用户名/密码组合）。

![在此处输入图像描述](https://i.stack.imgur.com/gfTML.png)

最后，输入新的用户名和密码凭据：

![在此处输入图像描述](https://i.stack.imgur.com/BkMKU.png)

这有点令人困惑，因为您开始初始化新项目的过程，但您只是重置存储库凭据。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-05-27T13:00:27.230

在任何 Windows 版本上，请遵循以下路径：

`C:\Users\{user_name}\AppData\Roaming\Subversion\auth\svn.simple`

然后删除此文件夹中带有十六进制代码的文件并重新启动您的eclipse。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2013-07-10T15:34:34.193

（Windows 7 Eclipse 靛蓝 3.7）

C:\Users\\AppData\Roaming\Subversion\auth\svn.simple

找到svn信息文件并使其可写。
（它们是默认只读的）（不需要重启 Eclipse）

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2015-11-18T02:03:54.547

我想出了我在下面写的方法，它非常适合我

在 Eclipse 中，按照以下简单步骤操作：文件 -> 导入 -> 输入 svn -> 来自 svn 的项目 -> 下一个 -> 创建一个新的存储库位置 -> 下一个 -> 您将在身份验证菜单下方看到“安全存储”。单击此按钮“安全存储”。这是我们可以删除所有密码缓存的地方。现在，一旦您来到这里，请按照以下步骤操作：

1.  在密码选项卡下，单击“清除密码”
2.  在“内容”选项卡下，转到 SVN，选择每个子选项，然后单击“删除”
3.  重启日食

现在所有存储的密码都消失了，您可以使用新的 svn 密码进行同步

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-09-17T14:25:06.333

删除位置：configuration\org.eclipse.core.runtime下的.keyring文件，之后会提示你新的svn账号。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-01-22T14:24:14.140

删除位置：configuration\org.eclipse.core.runtime下的.keyring文件，之后会提示你新的svn账号。对我来说它有效。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-12-21T06:00:08.313

对于 Mac ，

1.  关闭 Eclipse 工作区
2.  转到 /Users/username/.subversion/auth/svn.simple
3.  删除。其中的文件具有加密（大字母数字）文件名。
4.  打开密钥链（/Applications/Utilities/）并删除为 SVN 保存的密钥。
5.  现在打开 Eclipse 工作区尝试更新您的项目，提示将显示询问您 SVN 凭据
6.  为您提供更新的 SVN 凭据并在 keychain 中更新它。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2012-05-29T03:15:51.110

我正在使用 svn+ssh 协议来访问 SVN。为了解决类似的问题，我必须做的是打开 Putty 并重新配置它，使其在保存的会话中没有 wrong_user_name@myserver 而是 correct_user_name@myserver。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-01-27T13:45:29.703

在 Eclipse 中：Ctrl + F8 -> SVN Repository Exploring -> 右键单击​​存储库 -> Location Properties -> Finish ;)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-11-19T02:10:11.167

`svn.simple`我在Windows机器（Windows 7）上的以下路径中删除了目录内的文件：

```
C:\Users\[user_name]\AppData\Roaming\Subversion\auth 
```

问题解决了。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-06-22T10:37:48.607

Windows 上有几个地方 SVN 将根据系统配置放置缓存的凭据。阅读[SVNBook | 客户凭证](http://svnbook.red-bean.com/en/1.8/svn.serverconfig.netmodel.html#svn.serverconfig.netmodel.creds)。

*   主凭证存储位于**`%APPDATA%\Subversion\auth`**，您可以运行[**`svn auth`**](http://subversion.apache.org/docs/release-notes/1.9.html#svn-auth)命令来查看和管理其内容。

*   您还可以运行[**`cmdkey`**](https://technet.microsoft.com/en-us/library/cc754243)以查看存储在 Windows 凭据管理器中的凭据。

*   如果您的 SVN 服务器与 Active Directory 集成并支持集成 Windows 身份验证，例如 VisualSVN Server，则您的 Windows 登录凭据将用于身份验证，但不会缓存它们。您可以运行[**`whoami`**](https://technet.microsoft.com/en-us/library/cc771299)以找出您的用户帐户名称。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-05-19T10:04:47.320

我一直在寻找相同的答案，但以上都不适用于我。但我做了以下步骤并得到纠正。

我的场景：-

1.  安装在 Linux 上的 Eclipse
2.  Eclipse版本：2019.03
3.  以前我选择在本地存储密码（因此，无论何时从现有的 svn 存储库进行任何更新，都不会提示输入密码）。

解决方案：- 删除本地存储的凭据。

脚步 ：

1.  在linux中允许显示隐藏文件（打开文件资源管理器，单击“查看”并单击“显示隐藏文件”
2.  转到用户主文件夹-> .eclipse/.org.eclipse.equinox.security/
3.  打开并编辑“secure_storage”文件任何文本编辑并删除所有内容并保存。（最好在编辑之前备份“secure_storage”文件）

现在会在连接SVN时询问

谢谢你

# django - 管理员表单验证

> ID：914896
> 
> 赞同：0
> 
> 时间：2009-05-27T09:53:48.670
> 
> 标签：django, django-models, django-admin

我有一个包含多个订单 (SupplierOrder) 的供应商发票 (SupplierInvoice) 父模型。现在，如果用户通过 django admin 将发票放在一起，django 会检查成本价表中的供应商和产品是否存在价格匹配，并通过相应的字段进行拉取。此过程发生在自定义保存方法上。

我需要添加的是代码，以涵盖没有价格匹配的任何情况，在这种情况下，验证应该启动并警告用户他们必须在提交之前在订单中输入一些内容。

我已经尝试了自定义 modelForm 'clean' 方法的几种变体，它们在 save 方法有机会查找价格并首先检查之前就开始了。

理想情况下，我想要的是 Django 检查价格匹配的适当表格，然后验证说没有匹配项，必须输入一个。

[http://dpaste.com/hold/47848/](http://dpaste.com/hold/47848/)获取相应代码。

感谢您的帮助-我完全被难住了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T10:05:30.987

是的，clean 发生在保存之前 - 必须在保存之前检查表单是否有效。因此，您需要在 clean 中进行价格查找。

# multithreading - 将线程设置为在特定内核上工作的优势？

> ID：914898
> 
> 赞同：2
> 
> 时间：2009-05-27T09:54:08.153
> 
> 标签：multithreading, performance, multicore, parallel-processing

是否有任何证据表明通过手动选择在哪个处理器上运行线程可以提高系统性能？

例如，假设您将完成最多工作的线程专用于一个核心，而将所有其他“帮助”线程专用于一秒钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T10:52:01.390

我看不出有这种情况。

请记住，任何支持多处理器的操作系统都会自动分配处理器时间，以尝试平衡处理器负载。

这意味着实际上您正在运行的任何进程线程都将根据线程优先级不断中断，以便操作系统可以将处理器时间分配给其他进程。同一线程中的单个计算甚至可能不在同一处理器上执行。

如果您将进程代码固定为仅在一个指定的处理器上运行，那么这可能会阻碍其性能，因为它不允许操作系统平衡处理器负载。

我想你可以把它的大部分作为关键部分，但这会阻碍你在其他领域的应用，尤其是任何子线程的处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T11:02:07.440

至少在理论上，如果线程在不同内核之间反弹，系统性能似乎可能会有所下降。由于许多多核设计为每个内核都涉及一个单独的 L1 缓存，因此每当线程移动到新内核时，线程之前访问的任何数据都不再缓存在新内核中，而必须从更高级别的缓存中获取（或记忆）。

保持线程在同一个核心上运行将增加 L1 缓存具有与线程正在执行的操作相关的数据的可能性。当然，这有多大影响也取决于其他因素，例如缓存的大小以及在核心上“同时”调度了多少其他线程。

# web-services - 使用 SoapUI 和 Windows 身份验证测试 Web 服务

> ID：914899
> 
> 赞同：47
> 
> 时间：2009-05-27T09:54:28.793
> 
> 标签：web-services, testing, soap, user-interface, soapui

是否可以包含 Windows 域凭据以使用 SOAP UI 测试我的 Web 服务？

我找到了一个属性页面，但 IIS 只是响应“错误的凭据”。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2009-09-18T16:28:11.300

SoapUI 似乎不能直接使用 NTLM 身份验证，但您可以使用 Burp Suite 等代理来为您进行身份验证。

1.  [从http://portswigger.net/burp/](http://portswigger.net/burp/)下载 Burp Suite并启动它。
2.  在 Burp 的“代理：拦截”选项卡上，单击按钮关闭拦截。
3.  在 Burp 的“代理：选项”选项卡上，确保将其设置为未使用的端口，默认为 8081
4.  在 Burp 的“选项”选项卡上，勾选“进行 www 身份验证”并为您希望访问的服务器添加一个设置。还要勾选“在身份验证失败时提示输入凭据”
5.  切换到 Burp 的“代理：历史”选项卡，这样您就可以看到正在处理的请求。
6.  在 SoapUI 中，选择 File > Preferences，然后选择“Proxy Settings”。输入主机“localhost”和端口“8081”。
7.  像往常一样使用 SoapUI。它将通过 Burp 代理发送请求，该代理将为您执行 NTLM 身份验证。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-03-07T15:09:30.897

soapUI 4.5 刚刚添加了对 NTLMv2 的支持，从而消除了对 Burp Suite 的需求。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-17T22:36:39.243

接受的解决方案将在大多数情况下工作。但是，如果该服务使用委托来访问其他服务器上的资源，您将遇到 Burp 代理使用的 NTLM 身份验证的双跳问题。代理将成功对服务进行身份验证，但服务使用委托对其他资源进行的后续调用将失败。

这篇文章很好地描述了这个问题：

[http://blogs.msdn.com/b/besidethepoint/archive/2010/05/09/double-hop-authentication-why-ntlm-fails-and-kerberos-works.aspx](http://blogs.msdn.com/b/besidethepoint/archive/2010/05/09/double-hop-authentication-why-ntlm-fails-and-kerberos-works.aspx)

我为此找到的最简单的解决方法是使用 Fiddler 作为代理。在 Fiddler 的规则菜单上，选择“自动验证”。然后更新您的 SoapUI 首选项以使用 fiddler 作为代理（默认位置是 localhost:8888）。现在，您的呼叫将包含在可以委托的凭证中。

如果您使用 LoadUI 执行 SoapUI 测试用例，SoapUI 测试运行器将使用您的 SoapUI 代理设置，并且您的调用将继续工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T10:57:37.353

我认为 SoapUI 可能只支持 WSDL 的 NT 身份验证。

你可以在这里看到它是如何实现的一些细节：

*   [http://www.soapui.org/xref/com/eviware/soapui/impl/wsdl/support/wsdl/UrlWsdlLoader.html](http://www.soapui.org/xref/com/eviware/soapui/impl/wsdl/support/wsdl/UrlWsdlLoader.html)

（顺便说一句，[这个谷歌搜索对你来说看起来并不乐观](http://www.google.co.uk/search?q=SoapUI+windows+authentication)！）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T12:28:32.063

当前版本的 SoapUI 4.5.1 不适用于 Windows 身份验证，但夜间构建版本再次运行良好。

[下载每晚构建版本](http://www.soapui.org/Downloads/soapui-nightly-builds.html)

# java - 以编程方式调用 Eclipse 的导出到 xml

> ID：914909
> 
> 赞同：0
> 
> 时间：2009-05-27T09:55:54.313
> 
> 标签：java, eclipse

我想以编程方式调用 eclipse 的导出到 xml 函数来创建 build.xml 文件，以便它可以处于持续集成过程中。

有没有一种简单的方法可以做到这一点，而无需打开 Eclipse？

谢谢，阿卡什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T19:33:58.577

org.eclipse.pde.build 提供了一个 ant 任务“ `eclipse.buildScript`”，它生成在导出和无头 pde 构建中使用的 build.xml 脚本。

有很多属性可用作此任务的输入。直接从命令行调用它的最简单方法是：

```
eclipse -application org.eclipse.ant.core.antRunner -f plugins/org.eclipse.pde.build_3.5.0.v20090521-1730/scripts/genericTargets.xml generateScript 
```

您还需要传递一堆 -Dproperty=value 参数来设置输入属性。编写一个使用 antRunner 运行的包装器 build.xml 脚本可能更简单，在这种情况下，genericTargets.xml 脚本将位于`${eclipse.pdebuild.scripts}/genericTargets.xml`.

[这里](http://help.eclipse.org/ganymede/index.jsp?topic=/org.eclipse.pde.doc.user/tasks/pde_feature_generating_antcommandline.htm)有一些关于该任务的文档。这被用作 pde.build 提供的更大的自动构建支持的一部分，从[这里](http://help.eclipse.org/ganymede/index.jsp?topic=/org.eclipse.pde.doc.user/tasks/pde_feature_build.htm)开始的文档。

# iphone - 设备中的奇怪错误：UITableView 的单元格内容未显示

> ID：914910
> 
> 赞同：1
> 
> 时间：2009-05-27T09:56:55.543
> 
> 标签：iphone, uitableview

我有这个非常奇怪的错误。当我向下滚动表格视图时，向下滚动到我称为“描述”的部分，该部分中的单元格将不会显示。相反，该部分的标题一次又一次地重复。听起来好像负责 iPhone 中屏幕显示的人没有找到任何要显示的内容，而是让之前屏幕上的内容（这是该部分的标题，因为我向下滚动）。

如果我截取屏幕截图，则只有黑色背景而不是单元格。

此错误不会发生在模拟器中，而只会发生在真实设备中。

有没有人遇到过这种事情？你能猜出问题出在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T10:18:13.923

尝试将单词描述更改为其他内容。Objective C 类使用描述这个词来表示一个对象可以用 NSString 描述自己的方法。如果更改名称可以修复它，那么您的错误与此有关。

你可以在工作中看到这样的描述：

```
NSString *aString = [[NSString alloc] initWithFormat:@"hi"];
NSLog(@"%@", [aString description]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-28T11:30:15.947

感谢您的回复，我将代码放在这里。但请记住，我的代码适用于所有其他单元格，因此它必须与该单元格的特定内容相关，但它只是 UILabel 中的一些文本......

不要犹豫，看看我制作的视频，这对 iPhone 来说是一个非常奇怪的行为，你见过吗？dl.free.fr/rlQmFyWS0

这是 cellForRowAtIndexPath: 方法的代码，只是描述 cell 所涉及的部分：

```
case 3: // A big cell containing the description
    {
        // Try to find an already allocated cell with the description (note : there is only one description cell per table so no need to check the content...)
        UITableViewCell * descriptionCell = [tableView dequeueReusableCellWithIdentifier:kTextCellIdentifier];
        if (descriptionCell == nil) {
            // As a frame, use the description label's one plus a little margin for the height
            descriptionCell = [[[UITableViewCell alloc] initWithFrame:CGRectMake(0, 0, tableView.frame.size.width, self.descriptionText.frame.size.height + (2*kCellInset)) reuseIdentifier:kTextCellIdentifier] autorelease];
            descriptionCell.selectionStyle = UITableViewCellSelectionStyleNone;
            // The descriptionText UILabel has been previously initialized properly by tableview:heightForRowAtIndexpath: method
            [descriptionCell.contentView addSubview:self.descriptionText];
        }
        return descriptionCell; 
```

这是我初始化 descriptionText 字段的部分：

```
// Customize row height for each cell
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
if (indexPath.section == 3) {
    CGSize realSize;
    if (self.descriptionText != nil) {
        // the description has been previously initialized
        realSize = descriptionText.frame.size;
    }
    else {
        // We need to dynamically resolve the height for the description zone
        NSString * desc = (NSString *)[product objectForKey:@"description"];
        UILabel * descLabel = [[UILabel alloc] initWithFrame:CGRectZero];
        // Unlimited number of lines
        descLabel.numberOfLines = 0;
        descLabel.text = desc;
        // Set a preferred width and anything for the height
        realSize = [descLabel sizeThatFits:CGSizeMake(tableView.frame.size.width - (2*kCellInset), 1)];
        // Take the opportunity to set the frame with the correct values
        descLabel.frame = CGRectMake(kCellInset, kCellInset, realSize.width, realSize.height);
        self.descriptionText = descLabel;
        [descLabel release];
    }
    return (realSize.height + (2*kCellInset));
}
else {
    return kImageCellHeight;
}   
return 0; 
```

}

任何猜测都会非常受欢迎......我一直在这里调查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-28T11:53:11.987

我找到了解决方案......这很明显，但仍然......

我的 UILabel 的尺寸大于 2048 像素。我们不允许使用比这个更大的尺寸，这就是渲染如此奇怪的原因。

这个线程 stackoverflow.com/questions/773386/inserting-various-views-into-uiscrollview 已经处理了这个问题。

# asp.net - Asp.Net (vb) 在代码隐藏中强制回发

> ID：914911
> 
> 赞同：5
> 
> 时间：2009-05-27T09:57:08.693
> 
> 标签：asp.net, postback, reload, code-behind

我需要一种在代码隐藏中强制回发或页面重新加载的方法。尝试使用一些javascript，但没有让它工作。浏览网络我看到第一个问题是“为什么”？

情况是我在自动回发上有一个下拉列表，而 gridview 数据源的选择参数是从该下拉列表的选定值派生的。因此，页面可以正常工作，并且每当更改所选项目时都会更新内容。但是有些链接和按钮会让客户离开页面，所以他们稍后会链接回来。

这个想法是将最后一个选择存储在会话中，如果会话选项不是默认选项，则检查第一个 page.load 事件。现在我可以基于此更改下拉列表的 selectedindex，但显然数据源的触发速度比 page.load 快，所以除非我可以强制重新加载，否则这无济于事。

有任何想法吗？整页回发/重新加载当然不是唯一的选择，只需强制刷新网格视图/数据源就足够了。除了重新加载整个页面之外，我只是不知道该怎么做。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-27T10:06:01.687

您可以在页面上放置一个 ajax 计时器，在它们返回时启用它，在页面呈现后立即导致 OnTick 自动回发，然后禁用它，但老实说......对于一个微不足道的问题来说，这是一个可怕的工作。

为什么不能在以编程方式更改下拉列表值后重新绑定 GridView。例如，时间线会是这样的。

*   人员返回页面（不是回帖）
*   GridView 与默认值绑定
*   页面加载
    *   检查您的会话变量
    *   如果找到一个值
    *   设置您的 DropDownList 选定值
    *   再次调用`.DataBind()`GridView/DataSource 以强制它重新绑定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-27T10:19:59.723

为什么不能使用不同的页面事件？您是否尝试过 PreRenderComplete？请记住，事件的顺序在回发中很重要。PreRenderComplete 是在呈现页面之前要调用的*最后一个事件。*Page_Load 实际上是在中间的某个地方。

我在工作中一直在做这样的事情。

```
Protected Sub Page_PreRenderComplete(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.PreRenderComplete
    Session("Value") = ddlList.SelectedValue
End Sub 
```

该代码可能不正确，但它只是让您了解事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T10:28:37.023

为什么不处理 GridView 的 DataBinding 事件并检查该处理程序中 Session 中的值？如果它不等于 dropdownlist 参数，您可以更改它并让数据绑定顺其自然。

有关更改 Datasource 控件的 SelectCommand 的更通用示例，请参见[我的答案。](https://stackoverflow.com/questions/802645/asp-net-gridview-how-to-access-datasource-before-data-is-bound)以同样的方式，您应该能够更改 ControlParameter 的值。[这个答案](https://stackoverflow.com/questions/491537/nested-repeaters-and-sqldatasource-parameters)是一样的，但是对于一个（嵌套的）中继器。

如果这不起作用，那么 Eoin 的答案将是最好的方法（重新绑定 GridView）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-06-08T20:01:53.473

我有一个类似的问题...... Kezzer 的修复对我有用。

只是说：

```
Chart1.databind() 
```

在代码隐藏中的 PreRenderComplete 事件中。

由于 PreRender complete 在图表渲染之前作为最后一件事运行，如果您在此处“绑定”图表，它可以确保在您的下拉列表中视觉“显示”的内容实际上将用作渲染图表的值.

我们的问题是自动回发级联下拉菜单。我们有国家、州、城市下拉菜单。如果用户选择“美国”、“俄亥俄”、“克利夫兰”，一切正常，但如果他们返回并将国家更改为“法国”，则会在图表上导致错误，即使下拉菜单有自动为此更改进行了调整，并将州和城市重置为可用的第一个值。

在 PreRenderComplete 中添加自动回发会强制图表“获取：自动更正下拉列表后的值......太棒了！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T11:08:31.217

谢谢大家的帮助。我正要听从 Cerebrus 的建议，但后来一位同事提出了不同的想法。注释行替换为未注释行，如下所示。

```
<选择参数>
   <%--<asp:Parameter Name="timevalue" Type="String" DefaultValue="now" />--%>
   <asp:ControlParameter ControlID="timevalueDropDownList" PropertyName="SelectedValue" Name="timevalue" DefaultValue="now" />
</选择参数>

```

除此之外，我第一篇文章中的所有内容都适用。在页面加载中，我检查了会话并将更改应用到 timevalueDropDownList 和以前一样。会话总是在 SelectedIndexChanged 事件等中更新。

但与往常一样，回复中的好主意，我一定会在未来的类似问题中提及这些。我有很多这些，但只是找到了其他方法，现在我可能不必这样做。;)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-03-27T22:39:39.537

另一种方式，如果您仍在寻找回帖以执行 `response.redirect("~/ImOnThisPageAlready");`同一页面。
很简单，不确定你的网站有多忙，但它对我的小应用程序运行得非常快。

# python - 从源代码中剥离字符串的正则表达式

> ID：914913
> 
> 赞同：0
> 
> 时间：2009-05-27T09:57:29.910
> 
> 标签：python, regex, string

我正在寻找一个正则表达式，它将用一些常量字符串值（例如“string”）替换输入源代码中的字符串，并且还将考虑转义由双字符串开头表示的字符串开头字符字符（例如“他说”“你好”“”）。

为了澄清，我将提供一些输入和预期输出的示例：

```
input: print("hello world, how are you?")
output: print("string")

input: print("hello" + "world")
output: print("string" + "string")

# here's the tricky part:
input: print("He told her ""how you doin?"", and she said ""I'm fine, thanks""")
output: print("string") 
```

我正在使用 Python，但我想这与语言无关。

编辑：根据其中一个答案，此要求可能不适合正则表达式。我不确定这是不是真的，但我不是专家。如果我尝试用单词来表达我的要求，我正在寻找的是找到双引号之间的字符集，其中即使是相邻的双引号组也应该被忽略，这听起来像是可以通过一个 DFA。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-27T15:04:10.820

如果您正在解析 Python 代码，请省去麻烦，让标准库的[解析器模块](http://docs.python.org/library/parser.html)完成繁重的工作。

如果您正在为某些自定义语言编写自己的解析器，那么从将一堆正则表达式组合在一起开始是非常诱人的，但不要这样做。你会把自己挖进一个无法维护的烂摊子。阅读解析技术并正确处理（维基百科[可以](http://en.wikipedia.org/wiki/LR_parser) [提供帮助](http://en.wikipedia.org/wiki/Recursive_descent_parser)）。

这个正则表达式对你的所有三个例子都有效：

```
re.sub(r'"(?:""|[^"])+"', '"string"', original) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T10:13:18.490

也许：

```
re.sub(r"[^\"]\"[^\"].*[^\"]\"[^\"]",'"string"',input) 
```

编辑：

不，这不适用于最后一个示例。

我不认为您的要求是常规的：它们不能被正则表达式匹配。这是因为问题的核心是，您需要匹配任意奇数个`"`组合在一起，因为那是您的分隔符。

我认为你必须手动完成，计算`"`s。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T14:28:38.240

在 ActiveState 上有一个非常好的[字符串匹配正则表达式。](http://code.activestate.com/recipes/475109/)如果它不能直接用于您的最后一个示例，那么将相邻的引用字符串组合在一起应该是一个相当简单的重复。

# sharepoint - SharePoint Server 2k7 / Office 2003 集成问题 (CT prob.)

> ID：914919
> 
> 赞同：0
> 
> 时间：2009-05-27T10:00:14.677
> 
> 标签：sharepoint, moss, types, wss

**我对 MOSS（在 2003 r2 下更新）和 Office 2003 集成有点问题。客户特别想要 Office 2003。**

**问题**

因此，当您在文档中心创建“新”文档并触发文档模板并点击“确定”时。在这里一切都很好。

您的文档被读取，您在 Office Word 2003 中点击“保存”，然后应该有一个窗口，其中*内容类型指定元数据字段窗口 - 您可以在其中输入您的信息*，但有一个窗口，其中所有 CT 元数据字段都已完全列出，我的意思是全部列出。它应该在一个窗口中列出特定 CT 的元字段信息，您可以在其中输入一些数据。

**项目**是典型的“非代码”实现，我们只是根据问题进行了基本的定制。

**定制（完全）：**

*   列表
*   内容类型
*   字段

*当您在 SC 选项中手动修改自定义列表定义（或文档中心定义）时，问题就会消失*。将 CT 添加到列表中，或者只是以某种方式修改了列表。或者当您只使用默认定义时它会起作用。

我认为问题出在内容类型中……不知道为什么，但我假设并且不知道具体

*如果您对此问题有一些提示，最好放弃一些提示。*

萨瓦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-28T06:19:49.080

我也知道这个问题（虽然不是解决方案）。我从正在工作的列表中取出 schema.xml 并检查了 schema.xml 并注意到在架构的字段中添加了 ContentType-field。

ContentType-field 的 ID 指向 WSS 自己的 fieldswss.xml 中的 ContentType-field，但有趣的是它的类型从 Text 更改为 Choice。在选项中列出了与列表关联的所有内容类型。我确实尝试将类似的字段添加到我的架构文件中，但它什么也没做:(

我还应该指出，我们不在内容类型中使用自定义文档模板，CT 继承自 Document-CT。此外，我们不必修改列表的设置以使其正常工作，还可以进入站点设置 > 内容类型并更新我们的 CT（只需按 OK）即可解决问题。如果我们在更新 CT 后创建新列表，则新列表不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T16:57:50.403

[您可以查看使用SharePoint Manager 2007](http://www.codeplex.com/spm)前后的 schema.xml 和内容类型吗？也许它可以给你一个线索。

# cakephp - CakePHP 助手和 i18n

> ID：914923
> 
> 赞同：0
> 
> 时间：2009-05-27T10:01:52.100
> 
> 标签：cakephp, internationalization, multilingual

我有一些关于 cakePHP 的问题，我花了很长时间在谷歌上搜索解决方案，但由于我没有找到任何问题，我不确定我是否采取了正确的方法。

所以，我有一个菜单/站点地图，它部分是静态的（xml 文件 - i10n），部分是动态的（数据库 i18n）

我被要求缓存菜单，以便：

1.  如果不存在，组件会为每种语言创建整个菜单的缓存 xml 文件

2.  帮助程序创建一个缓存 html，该缓存 html 从组件创建的 xml 文件格式化

3.  布局使用助手在页面中添加菜单

问题：

*   如何从帮助程序和组件中获取可用语言列表？

*   这是

    ```
    $this->L10n = new L10n(); $this->L10n->lang 
    ```

    获得实际语言的正确方法？

*   如果我在 app_controller 中导入助手/组件，而不是在每个控制器中输入它们

    ```
    class AppController extends Controller {
        var $components = array('menu', 'otherComponent');
        var $helpers = array('menuCache');

        function beforeFilter(){
            $this->menu->doSomething();
        }
    } 
    ```

我`call to undefined object $html`在`echo $html->charset();`布局中得到一个

无法理解为什么...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T07:41:02.183

您可以使用`Configure::read('Config.language')`. CakePHP 食谱的一部分指出：

> 当前语言环境是 Configure::read('Config.language') 的当前值。Config.language 的值在 L10n 类中分配 - 除非它已经设置。

负责翻译的类 I18n 使用`__()`它`Config.language`，除非您在 中覆盖它，否则`bootstrap.php`该变量包含所选语言。实际上，即使您覆盖它，它仍然会包含使用的语言（可能存在不一致，因为 I10n 并没有真正意识到更改，但我从未遇到过任何更改）。

要获取语言列表，您可以使用`L10n::catalog()`. 但是，我不确定它是否是您所追求的，因为它列出了 CakePHP 知道的所有语言，而不仅仅是实际在`app/locale`.

# c# - 有没有捷径可以做到这一点？

> ID：914929
> 
> 赞同：0
> 
> 时间：2009-05-27T10:03:53.907
> 
> 标签：c#

```
 public static string RatingCalculator(int input)
{
    if (input < 10)
    {
        return string.Empty;
    }
    if (input > 10 && input < 20)
    {
        return "<img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star_empty.png\" alt=\"-\" /><img src=\"/images/star_empty.png\" alt=\"-\" /><img src=\"/images/star_empty.png\" alt=\"-\" /><img src=\"/images/star_empty.png\" alt=\"-\" />";
    }
    if (input > 21 && input < 40)
    {
        return "<img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star_empty.png\" alt=\"-\" /><img src=\"/images/star_empty.png\" alt=\"-\" /><img src=\"/images/star_empty.png\" alt=\"-\" />";
    }
    if (input > 41 && input < 70)
    {
        return "<img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star_empty.png\" alt=\"-\" /><img src=\"/images/star_empty.png\" alt=\"-\" />";
    }
    if (input > 11 && input < 120)
    {
        return "<img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star_empty.png\" alt=\"-\" />";
    }
    else
    {
        return "<img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star.png\" alt=\"*\" />";
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-27T10:11:10.320

查看常见部分并尝试提取它们。

“满星”的图像标签永远不会改变“空星”的图像标签永远不会改变，因此您可以将这两个标签提取到变量中以提高可读性。

格式化字符串也是如此，总会有“5 个连续的星型”

怎么样

```
string fs = @"<img src=\"/images/star.png\" alt=\"*\" />"; //Full Star
string es = @"<img src=\"/images/star_empty.png\" alt=\"-\" />"; //Empty Star

string format = @"{0}{1}{2}{3}{4}";

if(input < 10)
   return string.Empty;
else if(input < 20)
   return string.Format(format, fs, es, es, es, es);
else if(input < 40)
   return string.Format(format, fs, fs, es, es, es);
else if(input < 70)
   return string.Format(format, fs, fs, fs, es, es);
else if(input < 120)
   return string.Format(format, fs, fs, fs, fs, es);
else 
   return string.Format(format, fs, fs, fs, fs, fs); 
```

或者，您可以使用字符串生成器

```
string fs = @"<img src=\"/images/star.png\" alt=\"*\" />"; //Full Star
string es = @"<img src=\"/images/star_empty.png\" alt=\"-\" />"; //Empty Star

StringBuilder sb = new StringBuilder(fs);  
//No need for `sb.Append (input > 10 ? fs : es);` as we'll test "input < 10" in the return statement.
sb.Append (input > 20 ? fs : es);
sb.Append (input > 40 ? fs : es);
sb.Append (input > 70 ? fs : es);
sb.Append (input > 120 ? fs : es);

return (input < 10) ? string.Empty : sb.ToString(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-27T10:13:16.477

代码中那么多的字符串字面量肯定会非常难看。另外，我不确定为什么值的差距是非恒定的（或者甚至没有定期增加），但这不是一个大问题。

试试这个：

```
public static string RatingCalculator(int input)
{
    int numStars;

    if (input < 10)
        return string.Empty;
    else if (input < 20)
        numStars = 1;
    else if (input < 40)
        numStars = 2;
    else if (input < 70)
        numStars = 3;
    else if (input < 120)
        numStars = 4;
    else
        numStars = 5;

    var sb = new StringBuilder();
    for (int i = 0; i < numStars; i++)
        sb.Append("<img src=\"/images/star.png\" alt=\"*\" />");
    for (int i = numStars; i < 5; i++)
        sb.Append("<img src=\"/images/star_empty.png\" alt=\"-\" />");

    return sb.ToString();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-27T10:15:56.067

很抱歉发布 JavaScript 解决方案（在 Mozilla Rhino 上测试），但我不太了解 C#，我相信这里的算法很有趣。

```
var rating = function(input) {
    var star  = '<img src="/images/star.png" alt="*" />',
        empty = '<img src="/images/star_empty.png" alt="*" />',
        steps = [10, 20, 40, 70, 120],
        max   = steps.length;

    for (var i=0; i<max; i++) {
        if (input > steps[i]) {
            print(star);
        } else {
            print(empty);
        }
    }
}; 
```

也许它以某种方式有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T10:05:30.050

```
 public static string RatingCalculator(int input)
{
    if (input < 10)
    {
        return string.Empty;
    }
    else if (input < 20)
    {
        return "<img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star_empty.png\" alt=\"-\" /><img src=\"/images/star_empty.png\" alt=\"-\" /><img src=\"/images/star_empty.png\" alt=\"-\" /><img src=\"/images/star_empty.png\" alt=\"-\" />";
    }
    else if (input < 40)
    {
        return "<img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star_empty.png\" alt=\"-\" /><img src=\"/images/star_empty.png\" alt=\"-\" /><img src=\"/images/star_empty.png\" alt=\"-\" />";
    }
    else if (input < 70)
    {
        return "<img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star_empty.png\" alt=\"-\" /><img src=\"/images/star_empty.png\" alt=\"-\" />";
    }
    else if (input < 120)
    {
        return "<img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star_empty.png\" alt=\"-\" />";
    }
    else
    {
        return "<img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star.png\" alt=\"*\" /><img src=\"/images/star.png\" alt=\"*\" />";
    }
} 
```

确实不会短很多，但可读性要好得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T10:13:01.657

```
public static string RatingCalculator(int input)
{
    int nStars = 0;

    if (input < 10)
        return string.Empty;
    else if (input < 20)
        nStars = 1;
    else if (input < 40)
        nStars = 2;
    else if (input < 70)
        nStars = 3;
    else if (input < 120)
        nStars = 4;
    else
        nStars = 5;

    StringBuilder sb = new StringBuilder();

    for(int i = 0; i < nStars; i++)
        sb.Append("<img src=\"/images/star.png\" alt=\"*\" />");
    for(int i = nStars; i < 5; i++)
        sb.Append("<img src=\"/images/star_empty.png\" alt=\"-\" />");

    return sb.ToString();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-27T10:14:02.450

我正在尝试一个循环，例如（注意逻辑已关闭，因为我放弃了解决方案）：

```
public static string RatingCalculator(int input) 
```

{ 字符串评分 = "";

```
for(i=0;i<120;i+=10)
{
    if(input > i)
        rating += "<img src=\"/images/star.png\" alt=\"*\" />";
    else
        rating += "<img src=\"/images/star_empty.png\" alt=\"-\" />";
}

return rating; 
```

}

但随后注意到收视率 10、20、40、70 等的非线性增长......

使用上面的答案，您可以通过将字符串分解为以下内容来缩短它并使其更具可读性：

```
String star = "<img src=\"/images/star.png\" alt=\"*\" />";
String emptyStar = "<img src=\"/images/star_empty.png\" alt=\"-\" />"; 
```

添加到上面的答案将使它：

```
if (input < 10)
    {
        return string.Empty;
    }
    else if (input < 20)
    {
        return star+emptyStar+emptyStar+emptyStar+emptyStar;
    }
... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-27T10:15:47.360

我会做这样的事情：

```
const string Star = "<img src=\"/images/star.png\" alt=\"*\" />";
const string Star_Empty = "<img src=\"/images/star_empty.png\" alt=\"-\" />";

public static string RatingCalculator(int input)
{
    if (input < 10)
    {
        return string.Empty;
    }
    else if (input > 10 && input < 20)
    {
        return string.concat(Star, Star_Empty, Star_Empty, Star_Empty, Star_Empty);
    }
    else if (input > 21 && input < 40)
    {
        return string.concat(Star, Star, Star_Empty, Star_Empty, Star_Empty);
    }
    else if (input > 41 && input < 70)
    {
        return string.concat(Star, Star, Star, Star_Empty, Star_Empty);
    }
    else if (input > 11 && input < 120)
    {
        return string.concat(Star, Star, Star, Star, Star_Empty);
    }
    else
    {
        return string.concat(Star, Star, Star, Star, Star);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-27T10:16:06.703

```
int starCount;
if (input < 10)
    return string.Empty;
else if (input < 20)
    starCount = 1;
else if (input < 40)
    starCount = 2
else if (input < 70)
    starCount = 3;
else if (input < 120)
    starCount = 4;
else
    starCount = 5;

StringBuilder build = new StringBuilder();
int i;
for(i = 0; i < starCount; i++)
    build.Append("<img src=\"/images/star.png\" alt=\"*\" />");
for(; i < 5; i++)
    build.Append("<img src=\"/images/star_empty.png\" alt=\"*\" />");

return build.ToString(); 
```

仍然不是很好，但如果你合理化你的输入（所以它不会跳跃任意数量），你可以从常规整数除法中得到 starCount。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-27T10:20:26.650

```
 public static string RatingCalculator(int input)
    {
        if (input > 120)
        {
            return GetStart(5);
        }
        if (input > 70)
        {
            return GetStars(4);
        }
        if (input > 40)
        {
            return GetStars(3);
        }
        if (input > 20)
        {
            return GetStars(2);
        }
        if (input > 10)
        {
            return GetStars(1);
        }
        else
        {
            return string.Empty;
        }
    }
    //populate dictionary with values in your class ctor
    private static IDictionary<int, string> images=new Dictionary<int,string>();

    private static string GetStars(int stars)
    {
        if(images.ContainsKey(stars))
            return images[stars];
        return string.Empty;
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-27T10:39:37.593

```
 if (input < 10) return string.Empty;

    int noOfStars = input >= 120 ? 5 : Math.Min(input / 10, 4);

    StringBuilder sb = new StringBuilder();

    for (int i = 0; i < 5; i++)
    {
        sb.Append(
            string.Format("<img src=\"/images/{0}\" alt=\"*\" />",
                          i < noOfStars ? "star" : "starEmpty")
            );
    }

    return sb.ToString(); 
```

# java - 数据库连接池数据结构

> ID：914930
> 
> 赞同：5
> 
> 时间：2009-05-27T10:04:27.400
> 
> 标签：java, database, algorithm, data-structures

我想开发数据库连接池。

谁能告诉我需要使用哪种数据结构来维护池？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-27T11:31:07.083

它应该使用**对象池设计模式**来实现。[你可以在Kircher, Michael](http://www.kircher-schwanninger.de/michael/publications/Pooling.pdf)中读到它 ；[普拉尚耆那教；](http://www.kircher-schwanninger.de/michael/publications/Pooling.pdf)[(2002-07-04)。](http://www.kircher-schwanninger.de/michael/publications/Pooling.pdf)[“池化模式”。](http://www.kircher-schwanninger.de/michael/publications/Pooling.pdf)[EuroPLoP 2002。检索于 2007-06-09。](http://www.kircher-schwanninger.de/michael/publications/Pooling.pdf)或在[对象池设计模式](http://sourcemaking.com/design_patterns/object_pool)中。`ObjectPool`和类的 Java 实现`JDBCConnectionPool`可以在[这里](http://sourcemaking.com/design_patterns/object_pool/java)找到。

对象池通常是一个**单例**，里面有**两个**对象集合（例如数据库连接）：

1.  **解锁**- 免费对象，可按要求提供给客户
2.  **锁定**- 锁定对象，现在正在使用

这个集合可以实现为`Lists`或`HashTables`其他，取决于您的需要。对于简单的 ObjectPool -**`LinkedList`**结构就足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-27T12:33:13.730

你一般需要：

*   围绕“原始”连接对象的某种包装器来管理诸如上次发出连接的时间、诊断信息、可能为该连接准备的语句的缓存等 - 您将其定义为包括您需要的内容
*   将连接包装器放入支持并发添加/删除的集合——任何正确同步的列表都可以，但 ConcurrentLinkedQueue 将是一个合理的选择
*   一种从池中管理分配的方法——考虑使用[Semaphore](http://www.javamex.com/tutorials/synchronization_concurrency_semaphore.shtml)类
*   可能，将各种池组合成一些“池管理类”（例如，您可以调用“getConnection（databaseName，readOnly）”并将其转到相关池）

最重要的是，您可以构建所需的任何日志记录/监控。

也有现成的连接池框架的倡导者。我知道有些人不同意，但我个人不会走这条路——连接池 (a) 确实不难编写，(b) 构成系统的关键部分，您可能需要了解和定制。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-27T10:56:42.677

请参阅[http://www.javaworld.com/jw-06-1998/jw-06-object-pool.html](http://www.javaworld.com/jw-06-1998/jw-06-object-pool.html)。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T10:42:52.173

您正在寻找一个开源解决方案吗？

请参阅[Apache 数据库连接池 API](http://commons.apache.org/dbcp/apidocs/org/apache/commons/dbcp/package-summary.html#package_description)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T10:43:52.547

请参阅此 Sun 开发人员教程：[连接池](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/conpool.html)：

> 在 JDBC 2.0 之前的版本中，每个数据库会话都需要新的连接和登录，即使之前的连接和登录使用相同的表和用户帐户也是如此。如果您使用的是 2.0 之前的 JDBC 版本并希望提高性能，则可以改为缓存 JDBC 连接。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-27T10:44:04.387

不确定创建自己的是否明智。

我在许多项目中使用了[c3p0](http://sourceforge.net/projects/c3p0)连接池（使用[Hibernate](http://www.hibernate.org/)）并取得了巨大的成功

# git - 使用 git 对整个文件“接受他们的”或“接受我的”的简单工具

> ID：914939
> 
> 赞同：467
> 
> 时间：2009-05-27T10:06:52.793
> 
> 标签：git, merge

我不想要一个可视化的合并工具，我也不想要 vi 冲突的文件并手动选择 HEAD（我的）和导入的更改（他们的）。大多数时候，我要么想要他们所有的改变，要么想要我的全部。通常这是因为我的更改使它顺势而为，并通过拉动返回给我，但可能会在各个地方稍作修改。

是否有一个命令行工具可以摆脱冲突标记并根据我的选择选择一种或另一种方式？或者一组 git 命令，我可以给自己设置别名来执行每个命令。

```
# accept mine
alias am="some_sequence;of;commands"
alias at="some_other_sequence;of;commands" 
```

这样做很烦人。对于“接受我的”，我尝试过：

```
randy@sabotage ~/linus $ git merge test-branch
Auto-merging Makefile
CONFLICT (content): Merge conflict in Makefile
Automatic merge failed; fix conflicts and then commit the result.

randy@sabotage ~/linus $ git checkout Makefile 
error: path 'Makefile' is unmerged

andy@sabotage ~/linus $ git reset --hard HEAD Makefile 
fatal: Cannot do hard reset with paths. 
```

我应该如何摆脱这些变化标记？

我可以：

```
git reset HEAD Makefile; rm Makefile; git checkout Makefile 
```

但这似乎有点绕，必须有更好的方法。在这一点上，我不确定 git 是否认为合并发生了，所以我认为这不一定有效。

反过来说，“接受他们的”同样是一团糟。我能弄清楚的唯一方法是：

```
git show test-branch:Makefile > Makefile; git add Makefile; 
```

这也给了我一个混乱的提交消息，其中包含 Conflicts: Makefile 两次。

有人可以指出如何以更简单的方式执行上述两个操作吗？谢谢

* * *

## 回答 #1

> 赞同：673
> 
> 时间：2009-05-27T19:40:14.867

解决方案非常简单。**尝试从索引**`git checkout <filename>`中检出文件，因此合并失败。

 **您需要做的是（即签出**提交**）：

**要签出您自己的版本**，您可以使用*以下之一*：

```
git checkout HEAD -- <filename> 
```

或者

```
git checkout --ours -- <filename> 
```

（警告！：如果你正在变基 `--ours`并被`--theirs`交换。）

或者

```
git show :2:<filename> > <filename> # (stage 2 is ours) 
```

**要签出其他版本**，您可以使用*以下之一*：

```
git checkout test-branch -- <filename> 
```

或者

```
git checkout --theirs -- <filename> 
```

或者

```
git show :3:<filename> > <filename> # (stage 3 is theirs) 
```

您还需要运行“添加”以将其标记为已解决：

```
git add <filename> 
```

* * *

## 回答 #2

> 赞同：139
> 
> 时间：2014-09-09T18:54:45.120

试试这个：

要接受他们的更改：`git merge --strategy-option theirs`

接受你的：`git merge --strategy-option ours`

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2012-08-07T10:25:55.150

根据 Jakub 的回答，为方便起见，您可以配置以下 git 别名：

```
accept-ours = "!f() { git checkout --ours -- \"${@:-.}\"; git add -u \"${@:-.}\"; }; f"
accept-theirs = "!f() { git checkout --theirs -- \"${@:-.}\"; git add -u \"${@:-.}\"; }; f" 
```

他们可以选择采用一个或多个文件路径来解析，如果没有给出，则默认解析当前目录下的所有内容。

将它们添加到`[alias]`您的部分`~/.gitconfig`或运行

```
git config --global alias.accept-ours '!f() { git checkout --ours -- "${@:-.}"; git add -u "${@:-.}"; }; f'
git config --global alias.accept-theirs '!f() { git checkout --theirs -- "${@:-.}"; git add -u "${@:-.}"; }; f' 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-06-21T04:42:50.507

根据 kynan 的回答，这里有相同的别名，经过修改后可以处理文件名中的空格和初始破折号：

```
accept-ours = "!f() { [ -z \"$@\" ] && set - '.'; git checkout --ours -- \"$@\"; git add -u -- \"$@\"; }; f"
accept-theirs = "!f() { [ -z \"$@\" ] && set - '.'; git checkout --theirs -- \"$@\"; git add -u -- \"$@\"; }; f" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-14T00:52:59.563

解决冲突的理想情况是当您提前知道要以哪种方式解决冲突并且可以传递`-Xours`或`-Xtheirs`递归合并策略选项时。除此之外，我可以看到三个场景：

1.  您只想保留文件的单个版本（这可能应该只用于不可合并的二进制文件，因为否则冲突和非冲突文件可能会彼此不同步）。
2.  你想简单地决定一个特定方向的所有冲突。
3.  您需要手动解决一些冲突，然后在特定方向解决所有其余冲突。

要解决这三种情况，您可以将以下行添加到您的`.gitconfig`文件（或等效文件）中：

```
[merge]
  conflictstyle = diff3
[mergetool.getours]
  cmd = git-checkout --ours ${MERGED}
  trustExitCode = true
[mergetool.mergeours]
  cmd = git-merge-file --ours ${LOCAL} ${BASE} ${REMOTE} -p > ${MERGED}
  trustExitCode = true
[mergetool.keepours]
  cmd = sed -i '' -e '/^<<<<<<</d' -e '/^|||||||/,/^>>>>>>>/d' ${MERGED}
  trustExitCode = true
[mergetool.gettheirs]
  cmd = git-checkout --theirs ${MERGED}
  trustExitCode = true
[mergetool.mergetheirs]
  cmd = git-merge-file --theirs ${LOCAL} ${BASE} ${REMOTE} -p > ${MERGED}
  trustExitCode = true
[mergetool.keeptheirs]
  cmd = sed -i '' -e '/^<<<<<<</,/^=======/d' -e '/^>>>>>>>/d' ${MERGED}
  trustExitCode = true 
```

该`get(ours|theirs)`工具仅保留文件的相应版本并丢弃来自其他版本的所有更改（因此不会发生合并）。

该`merge(ours|theirs)`工具从文件的本地、基本和远程版本重新执行三路合并，选择解决给定方向的冲突。这有一些警告，特别是：它忽略了传递给合并命令的差异选项（例如算法和空白处理）；是否从原始文件干净地合并（因此对文件的任何手动更改都将被丢弃，这可能是好是坏）；并且具有不会被文件中应该存在的差异标记混淆的优点。

该`keep(ours|theirs)`工具只需编辑差异标记和封闭部分，通过正则表达式检测它们。这样做的好处是它保留了合并命令中的差异选项，并允许您手动解决一些冲突，然后自动解决其余的冲突。它的缺点是如果文件中有其他冲突标记，它可能会混淆。

这些都是通过运行`git mergetool -t (get|merge|keep)(ours|theirs) [<filename>]`where if`<filename>`未提供它处理所有冲突的文件来使用的。

一般来说，假设您知道没有差异标记来混淆正则表达式，`keep*`那么命令的变体是最强大的。如果您将`mergetool.keepBackup`选项保留为 unset 或 true，则在合并后您可以将`*.orig`文件与合并结果进行比较，以检查它是否有意义。例如，我`mergetool`在提交前检查更改之后运行以下命令：

```
for f in `find . -name '*.orig'`; do vimdiff $f ${f%.orig}; done 
```

**注意**：如果`merge.conflictstyle`不是，`diff3`则规则`/^|||||||/`中的模式`sed`需要`/^=======/`改为。

# c# - 为 CRUD 创建 .NET 自定义控制按钮

> ID：914942
> 
> 赞同：0
> 
> 时间：2009-05-27T10:07:13.180
> 
> 标签：c#, .net, asp.net, design-patterns, delegates

我正在考虑创建一个自定义控件按钮来为我执行 CRUD 任务。让我详细说明：

我想要一些可以节省时间在每个 UI 上为 CRUD 任务编写代码的东西。我在这里是因为我想确保在我投入数小时和承受压力之前验证我所采取的方法。

一个自定义（可能是一个用户控件）控制按钮，它将接受一个委托。此委托将有一个自定义 EventArg 采用业务类引用和一个 CRUD 枚举（创建、读取、更新、删除）。每个业务类都将实现一个接口，该接口将强制定义 4 个函数（CRUD 函数）。现在，一旦您在表单上拖动此控件，您要做的就是创建一个委托，该委托将需要业务类引用和 CRUD 枚举来执行其中一个 CRUD 功能。

我不确定我采取的方法是否正确。但它看起来会让我的生活更轻松，代码更易于管理。请帮助我，你认为这会治愈我还是诅咒我:)

PS：如果解释带有示例示例，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T10:21:38.317

我会在 4 个单独的命令中分离 CRUD。所以一个用于创建，一个用于读取......然后我将在使用按钮的表单上实现 button.Click 事件。如果我会执行正确的 CRUD 命令。

例子：

```
public interface ICommand
  {
    void Execute ();
  }

  public class UpdateCommand : ICommand
  {
    public UpdateCommand ()
    {
      // Maybe some business logic has to be passed in the ctor.
    }

    public void Execute ()
    {
      // Do the update stuff here
    }
  }

  // somewhere in the Form:

  public void Button_Update_Click(object sender, EventArgs e)
  {
    UpdateCommand command = new UpdateCommand();
    command.Execute()
  } 
```

也许[这个链接](http://en.wikipedia.org/wiki/Command_pattern)会帮助你理解命令模式。

它可以帮助您分离功能并使用 TDD 轻松地对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T11:59:03.940

您可以使用内置的 ObjectDataSource 和 DetailsView 或 FormView 控件执行非常类似的操作。我会坚持那些而不是自己写。如果您真的想节省一些时间，请查看 ASP.NET 动态数据站点。

# php - PHP 中的 $_POST 问题

> ID：914949
> 
> 赞同：0
> 
> 时间：2009-05-27T10:09:55.813
> 
> 标签：php

```
public function doLogin($username,$password) { 
```

我将用户名和密码作为争论，而不是在我的表单中使用 POST 方法，它使用远程对象。

现在我应该如何在不使用正式方式的情况下在 PHP 中接收它。

```
if (isset($_POST['username']) && isset($_POST['password']))
        {
        $username= $_POST['username'];
        $password= $_POST['password']; 
```

我做了一个测试，下面的代码有效，现在我需要一种更好的接收方式，这也是安全的。

```
if($username == "rishi" && $password == "indian" ) 
            {
                return 'yes';

            }
            else {
                return 'no';
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-27T10:24:22.757

你可以用它[`phpinfo()`](http://php.net/phpinfo)来找出你的参数去哪里。似乎[register_globals](http://php.net/manual/en/security.globals.php)可能已启用，这是不可取的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T14:22:28.283

据我从你的问题可以看出，你的问题是这样的：

您的页面被 Adob​​e Flash 击中，显然不是您编写的代码所期望的 POST 请求。您如何获取传入的用户名和密码？

如果请求不是 POST，则很可能是 GET。然后，您可以简单地从 $_GET 数组中获取用户名和密码，如下所示：

```
if ($_GET["username"] == "monkey" && $_GET["password"] == "bar") {
    echo "Success!";
}
else {
    echo "Not allowed";
} 
```

不过，您实际上不应该这样编码；这只是为了说明如何从 $_GET 数组中获取参数。但是，如果没有更多关于您想要达到的目标的信息，我无法为您提供任何进一步的提示。

注意：如果您希望您的代码同时处理 GET 和 POST 请求，您还可以从 $_REQUEST 数组中读取参数。不过要小心，因为 cookie 也会出现在这个数组中，如果它们具有相同的名称，可能会产生意想不到的结果。

# javascript - 使用 jQuery 在特定时间间隔显示和隐藏 div

> ID：914951
> 
> 赞同：27
> 
> 时间：2009-05-27T10:10:17.700
> 
> 标签：javascript, jquery, css, html, timeout

我想以特定间隔（10 秒）显示 div 并显示下一个 div，然后继续重复相同的操作。

**

> ***顺序 ：***

** 第10秒显示div1，隐藏其他div， 5秒间隔后
显示div 2并隐藏其他div，
5秒间隔后显示div 3并隐藏其他div，
每10秒重复一次。

* * *

> ***代码如下：***

* * *

```
<div id='div1' style="display:none;"> 
  <!-- content -->
</div>

<div id='div2' style="display:none;"> 
  <!-- content -->
</div>

<div id='div3' style="display:none;"> 
  <!-- content -->
</div> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-05-27T10:29:40.343

**[此处的工作示例](http://jsbin.com/acumo)**- 将**/edit**添加到 URL 以使用代码

你只需要使用 JavaScript[`setInterval`](https://developer.mozilla.org/En/Window.setInterval)函数

```
$('html').addClass('js');

$(function() {

  var timer = setInterval(showDiv, 5000);

  var counter = 0;

  function showDiv() {
    if (counter == 0) {
      counter++;
      return;
    }

    $('div', '#container')
      .stop()
      .hide()
      .filter(function() {
        return this.id.match('div' + counter);
      })
      .show('fast');
    counter == 3 ? counter = 0 : counter++;

  }

});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
  <title>Sandbox</title>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
  <style type="text/css" media="screen">
    body {
      background-color: #fff;
      font: 16px Helvetica, Arial;
      color: #000;
    }

    .display {
      width: 300px;
      height: 200px;
      border: 2px solid #000;
    }

    .js .display {
      display: none;
    }
  </style>
</head>

<body>
  <h2>Example of using setInterval to trigger display of Div</h2>
  <p>The first div will display after 10 seconds...</p>
  <div id='container'>
    <div id='div1' class='display' style="background-color: red;">
      div1
    </div>
    <div id='div2' class='display' style="background-color: green;">
      div2
    </div>
    <div id='div3' class='display' style="background-color: blue;">
      div3
    </div>
    <div>
</body>

</html>
```

**编辑：**

为了回应您对容器 div 的评论，只需修改此

```
$('div','#container') 
```

对此

```
$('#div1, #div2, #div3') 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-05-27T10:38:06.893

每 10 秒循环一次 div。

```
$(function () {

    var counter = 0,
        divs = $('#div1, #div2, #div3');

    function showDiv () {
        divs.hide() // hide all divs
            .filter(function (index) { return index == counter % 3; }) // figure out correct div to show
            .show('fast'); // and show it

        counter++;
    }; // function to loop through divs and show correct div

    showDiv(); // show first div    

    setInterval(function () {
        showDiv(); // show next div
    }, 10 * 1000); // do this every 10 seconds    

}); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-27T10:39:12.167

这是我想出的一个 jQuery 插件：

```
$.fn.cycle = function(timeout){
    var $all_elem = $(this)

    show_cycle_elem = function(index){
        if(index == $all_elem.length) return; //you can make it start-over, if you want
        $all_elem.hide().eq(index).fadeIn()
        setTimeout(function(){show_cycle_elem(++index)}, timeout);
    }
    show_cycle_elem(0);
} 
```

您需要为要循环的所有 div 设置一个通用类名，如下所示：

```
$("div.cycleme").cycle(5000) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-27T10:25:17.717

请参阅[内部渐变](http://medienfreunde.com/lab/innerfade/)。

```
<script type="text/javascript">
    $(document).ready(

    function() {
        $('#portfolio').innerfade({
            speed: 'slow',
            timeout: 10000,
            type: 'sequence',
            containerheight: '220px'
        });
    });
</script>
<ul id="portfolio">
    <li>
        <a href="http://medienfreunde.com/deutsch/referenzen/kreation/good_guy__bad_guy.html">
        <img src="images/ggbg.gif" alt="Good Guy bad Guy" />
        </a>
    </li>
    <li>
        <a href="http://medienfreunde.com/deutsch/referenzen/kreation/whizzkids.html">
        <img src="images/whizzkids.gif" alt="Whizzkids" />
        </a>
    </li>
    <li>
        <a href="http://medienfreunde.com/deutsch/referenzen/printdesign/koenigin_mutter.html">
        <img src="images/km.jpg" alt="Königin Mutter" />
        </a>
    </li>
    <li>
        <a href="http://medienfreunde.com/deutsch/referenzen/webdesign/rt_reprotechnik_-_hybride_archivierung.html">
        <img src="images/rt_arch.jpg" alt="RT Hybride Archivierung" />
        </a>
    </li>
    <li>
        <a href="http://medienfreunde.com/deutsch/referenzen/kommunikation/tuev_sued_gruppe.html">
        <img src="images/tuev.jpg" alt="TÜV SÜD Gruppe" />
        </a>
    </li>
</ul> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-03T12:41:54.083

这是对这个问题的另一种看法，使用递归而不使用可变变量。另外，我没有使用`setInterval`，所以不需要进行清理。

拥有这个 HTML

```
<section id="testimonials">
    <h2>My testimonial spinner</h2>
    <div class="testimonial">
      <p>First content</p>
    </div>
    <div class="testimonial">
      <p>Second content</p>
    </div>
    <div class="testimonial">
       <p>Third content</p>
    </div>
</section> 
```

使用 ES2016

在这里，您递归地调用函数并更新参数。

```
 const testimonials = $('#testimonials')
      .children()
      .filter('div.testimonial');

  const showTestimonial = index => {

    testimonials.hide();
    $(testimonials[index]).fadeIn();

    return index === testimonials.length
      ? showTestimonial(0)
      : setTimeout(() => { showTestimonial(index + 1); }, 10000);
   }

showTestimonial(0); // id of the first element you want to show. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-24T07:42:09.440

试试这个

```
 $('document').ready(function(){
         window.setTimeout('test()',time in milliseconds);
      });

      function test(){

      $('#divid').hide();

      } 
```

# c# - 有没有办法订阅 IIs 应用程序池事件？

> ID：914952
> 
> 赞同：0
> 
> 时间：2009-05-27T10:10:23.067
> 
> 标签：c#, c++, iis, api, monitoring

我需要监控 IIs (v6) 事件。

更具体地说，应用程序池和网站事件。是否有一些 API 或 WMI 工具可以做到这一点？这不是从应用程序的角度来看，而是从管理的角度来看。

我对以编程方式启动、停止或回收不感兴趣。我有兴趣监视状态。轮询不是很优雅，有什么可以挂钩的事件吗？

无论是托管代码还是非托管代码，都没有关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T10:15:32.400

这些链接可能会对您有所帮助：

[http://leandrodg.wordpress.com/2008/02/12/find-and-recycle-current-application-pool-programmatically-for-iis-6/](http://leandrodg.wordpress.com/2008/02/12/find-and-recycle-current-application-pool-programmatically-for-iis-6/)

[http://forums.iis.net/t/1148327.aspx](http://forums.iis.net/t/1148327.aspx)

# wpf - 是否可以使用 WPF 在多台计算机上同步视频？

> ID：914958
> 
> 赞同：3
> 
> 时间：2009-05-27T10:11:13.220
> 
> 标签：wpf, video, synchronization

是否可以在两台或多台计算机上同步在 WPF 应用程序中运行的视频？使用 ParallelTimeline 类和 MediaTimelines 为每个视频实例同步在同一台机器上运行的多个视频似乎效果很好，但我还没有找到一种跨不同计算机执行此操作的方法，如果可能的话，这将启用一些令人难以置信的多屏幕安装。

那么对于所有那些 WPF 大师，你怎么看？这可以与 WPF 一起使用还是我需要退回到 DirectShow？关于如何做到这一点的一些指示也会很好。

[编辑]

我的问题似乎有些混乱，所以让我澄清一下。我正在考虑构建大型多屏幕视频装置的可能性，比如说 8 个或更多屏幕。每个屏幕播放一个全高清（至少 720p）视频，构建一个统一的显示器，在本例中为分辨率为 10,240 x 5,760 的视频墙。当然，所有视频都必须同步。从一台计算机上播放所有 8 部高清视频（即使计算机有能力）意味着对硬件、硬盘、内存、显卡等有很大的性能压力。另一方面，如果你能够让 8 台计算机上钩与 TCP 一起，每个人都负责通过与主计算机同步的时钟播放视频，您可以构建一些非常酷的东西，并且具有很大的灵活性。我已经看到使用 Max/Jitter 完成了类似的安装。

[/编辑]

非常感谢，

胡里奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-02T08:28:46.037

您可以尝试使用我的项目[WPF Mediakit](http://wpfmediakit.codeplex.com)。如果需要访问低级别的 DirectShow 内容，它应该会让您领先一步。

为此，基本上您将指定一台计算机作为“服务器”，将其余计算机指定为“客户端”。客户端将连接到服务器以获取当前位置，将其与当前位置进行比较......如果存在 n 数量的差异，则寻求调整。

在 MediaKit 中，MediaUriElement 控件具有一个名为“PreferedPositionFormat”的属性。如果您将其设置为 Frames（并且您使用的编解码器支持它..大多数时候它们不支持 MediaTime），您可以在何处设置“Position”属性的帧粒度。甚至 MediaTime 格式可能就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T11:30:20.703

让 WPF 通过 RTSP 流式传输 ASF，并使用 Windows Media Player 或 VLC / MPlayer 在一台或多台 PC 上播放流。从事物的声音来看，RTSP 流是非标准的，因此您很可能被 WMP 卡住了。

[http://www.windowskb.com/Uwe/Forum.aspx/windows-media-player/85238/RTSP-Problems](http://www.windowskb.com/Uwe/Forum.aspx/windows-media-player/85238/RTSP-Problems)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-30T04:11:26.557

对于可以在这里享受高清广播的客户，我认为更兼容的是您使用silverlight。如果您还没有关注它，它是一个浏览器托管的非常薄的 WPF 版本；）。

这篇由史诗“Karl Shifflett”撰写的 Codeplex 文章非常广泛地介绍了各种可用的编码选项和支持的平台（当然，除了 ASF 之外）。

Microsoft Live.com 托管的 silverlight 流媒体服务有一些重点，它也可能满足您的需求，至少对于原型设计而言。

[http://www.codeproject.com/KB/scrapbook/HowToCreateArticleVideos.aspx](http://www.codeproject.com/KB/scrapbook/HowToCreateArticleVideos.aspx)

就同​​步而言，这听起来像是您必须自己动手做的事情。

# iphone - 如何将核心动画块内的一段代码排除在动画之外？

> ID：914959
> 
> 赞同：3
> 
> 时间：2009-05-27T10:11:15.827
> 
> 标签：iphone, cocoa-touch, uikit, core-animation

我有一个核心动画块，我在其中调用将加载视图控制器的方法。两个视图控制器之间发生了自定义转换。然而，当视图控制器构建界面时，所有这些东西都会受到核心动画的影响。虽然它会产生一些有趣的效果，但我不希望这样；）

```
[UIView beginAnimations:@"jump to view controller" context:self];
[UIView setAnimationDuration:0.55];
[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];

// some animated property-changes here...

[self loadViewControllerForIndex:targetIndex]; // everything that happens in this method shall not be animated

UIViewController *controller = [viewControllers objectAtIndex:targetIndex];
[controller viewWillAppear:YES];
[controller viewDidAppear:YES];

[UIView commitAnimations]; 
```

不幸的是，我无法将那部分移出街区。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-27T12:23:48.553

您应该能够通过将该部分包装在 CATransaction 中并为其禁用动画来抑制 UIView 动画块的一部分的动画：

```
[CATransaction begin];
[CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions];    

// Changes to disable animation for here
[CATransaction commit]; 
```

# unit-testing - .Net fx 1.1 的模拟框架？

> ID：914960
> 
> 赞同：1
> 
> 时间：2009-05-27T10:11:16.903
> 
> 标签：unit-testing, mocking, .net-1.1

有人知道我能做什么吗？

请保留关于使用 1.1 的评论，这不在我的掌控之中:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-27T10:15:50.823

**根据他们的网站， Rhino Mocks**应该与框架 1.1 兼容。这是一个非常好的模拟框架，一旦你习惯了它

看看这里，看看你能做什么，不能做什么：

ayende.com/Wiki/(S(lqa0ob552sfbu545c5ss4b55))/Rhino+Mocks+Generics.ashx

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-27T10:19:12.597

在处理仅在 1.1 上运行的遗留产品时，我在工作中同时使用[NMock2](http://www.nmock.org/)和旧版本的[Typemock Isolator 。](http://www.typemock.com/learn_about_typemock_isolator.php)

# javascript - 在 JavaScript 函数的定义/执行中检查参数的名称/值

> ID：914968
> 
> 赞同：20
> 
> 时间：2009-05-27T10:14:48.563
> 
> 标签：javascript, arguments, inspection

我正在寻找`inspect.getargspec()`在 Javascript 中做相当于 Python 的东西。

我知道您可以`arguments`从 Javascript 函数中获取列表，但我真正要查找的是来自最初定义的函数的参数*名称*。

如果这实际上是不可能的，我将不得不通过获取函数的字符串来“蛮力”它，即`myFunc.toString()`然后`...`解析`function myFunc(...)`. 有谁知道如何以一般方式进行这种解析？

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-05-27T10:28:19.957

虽然我看不出有什么好的理由，

```
var reg = /\(([\s\S]*?)\)/;
var params = reg.exec(func);
if (params) 
     var param_names = params[1].split(','); 
```

假设`func`是您的函数的名称

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-03-29T11:44:56.237

以下函数将返回传入的任何函数的参数名称数组。

```
function getParamNames(func) {
    var funStr = func.toString();
    return funStr.slice(funStr.indexOf('(')+1, funStr.indexOf(')')).match(/([^\s,]+)/g);
} 
```

示例用法：

```
getParamNames(getParamNames) // returns ['func']
getParamNames(function (a,b,c,d){}) // returns ['a','b','c','d'] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-11-22T10:03:07.543

这里有一个小的 nodejs 模块。

[https://github.com/kilianc/node-introspect](https://github.com/kilianc/node-introspect)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-18T09:14:27.023

这是一个使用高阶函数的版本。我唯一不喜欢的是你必须将参数指定为数组的成员。但至少它们只需要指定一次。

```
<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">
<title></title>
<script type="text/javascript">
var withNamedParams = function(params, lambda) {
    return function() {
        var named = {};
        var max   = arguments.length;

        for (var i=0; i<max; i++) {
            named[params[i]] = arguments[i];
        }

        return lambda(named);
    };
};

var foo = withNamedParams(["a", "b", "c"], function(params) {
    for (var param in params) {
        alert(param + ": " + params[param]);
    }
});

foo(1, 2, 3);
</script>
</head>
<body>

</body>
</html> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-06-17T19:18:46.160

Jonathan Fingland 答案的明显改进版本：

```
// Utility function to extract arg name-value pairs
function getArgs(args) {
    var argsObj = {};

    var argList = /\(([^)]*)/.exec(args.callee)[1];
    var argCnt = 0;
    var tokens;

    while (tokens = /\s*([^,]+)/g.exec(argList)) {
        argsObj[tokens[1]] = args[argCnt++];
    }

    return argsObj;
}

// Test subject
function add(number1, number2) {
    var args = getArgs(arguments);
    alert(args.toSource()); // ({number1:3,number2:4})
}

// Invoke test subject
add(3, 4); 
```

注意：这仅适用于支持`arguments.callee`.

（也发布在[如何从 javascript 动态获取函数参数名称/值](https://stackoverflow.com/questions/1007981/how-to-get-function-parameter-names-values-dynamically-from-javascript/1009013#1009013)）

# php - 我如何在 PHP 中将文件从 S3 复制/上传到 EC2

> ID：914970
> 
> 赞同：0
> 
> 时间：2009-05-27T10:15:42.180
> 
> 标签：php, amazon-s3, amazon-ec2

我在 S3 上有一个文件示例：test-company/upload/abc.txt 我想用 php 将此 abc.txt 上传到我的 EC2 有任何想法的人请与示例分享..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-27T11:25:16.363

我使用[了 amazon-s3-php-class](https://github.com/tpyo/amazon-s3-php-class)效果很好。

Zend Framework 也有[AWS 支持](http://framework.zend.com/manual/en/zend.service.amazon.s3.html) ，但在 ZF 1.8.2 发布之前您不能在欧洲使用它。（由于 1.8.1 中的一个错误已在 svn 中修复）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T12:53:49.927

没有“上传到 EC2”的方法，因为它是虚拟服务器的实例，而不是存储服务。您需要将自己的服务放在 EC2 上才能上传到它。

但是，您可以从 S3 下载到 EC2。只需在 EC2 实例上运行 wget 或类似工具，即可从 S3 存储桶 URL 中提取文件（必要时进行身份验证）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T12:33:15.727

我会选择新的 Zend Framework (1.8) 实现。还没有真正检查过，但你可以在[http://framework.zend.com/](http://framework.zend.com)找到它。此处的文档：http: [//framework.zend.com/manual/en/zend.service.amazon.s3.html](http://framework.zend.com/manual/en/zend.service.amazon.s3.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-27T10:23:35.940

我使用了一个名为[s3cmd](http://s3tools.org/s3cmd)的 linux 实用程序。我猜你可以很容易地从 PHP 调用这个命令行实用程序。

# deployment - 在 Windows XP 64 位上配置命名空间保留

> ID：914975
> 
> 赞同：3
> 
> 时间：2009-05-27T10:16:03.617
> 
> 标签：deployment, windows-xp, httpcfg.exe

我需要将 HTTP URL 命名空间注册到特定的用户组。在 MSDN 上，解释说我必须使用 HttpCfg.exe，它似乎对于 Windows XP 64 位不存在。

有谁知道如何做到这一点？

问候，米塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T15:18:16.797

使用[http://blogs.msdn.com/paulwh/attachment/2416236.ashx](http://blogs.msdn.com/paulwh/attachment/2416236.ashx)应用程序解决了问题。我只是添加了 HTTP URL 命名空间并赋予特定用户执行权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-05T15:09:59.980

@Mita 发布的 zip 文件包含一个用于管理命名空间的有用项目，但我发现配套文章更有用：PaulWh 讨论了[AddressAccessDeniedException](http://blogs.msdn.com/paulwh/archive/2007/05/04/addressaccessdeniedexception-http-could-not-register-url-http-8080.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-09-30T17:33:37.813

从 Microsoft 网站下载 Windows Server 2003 Service Pack 2 支持工具：http: [//www.microsoft.com/downloads/en/details.aspx?FamilyID=96a35011 -fd83-419d-939b-9a772ea2df90&displaylang=en](http://www.microsoft.com/downloads/en/details.aspx?FamilyID=96a35011-fd83-419d-939b-9a772ea2df90&displaylang=en)

这些工具是 32 位的，但在 x64 上受支持。

# sql - 如何在 Excel 工作表中的命名范围上运行 SQL 语句？

> ID：914980
> 
> 赞同：16
> 
> 时间：2009-05-27T10:17:20.133
> 
> 标签：sql, vba, excel

我要做的就是在 Excel 工作表上取一个标准范围（即命名范围，甚至 A1:F100），并在其上运行一些 sql 查询，并返回一个我可以在 VBA 代码中逐步执行的记录集，甚至只是粘贴到同一工作簿中的其他工作表中。

使用 ADODB 是一种想法，但我如何设置连接字符串以指向当前工作簿中的某个范围？

我知道在我使用 Microsoft 查询向导之前，它并不理想，但会起作用。我似乎无法让它引用工作表中的范围，只有其他 excel 文件。

* * *

这是我剩下的功能。当我运行它几次时，我的 excel 崩溃并出现通常的资源不足错误消息。我已经从我的电子表格中删除了这个函数，并且一切都无缝运行了多次，因此它肯定是由这里的代码引起的。

我已经清理了所有的对象（对吗？）。有谁知道可能出了什么问题？连接字符串中是否有可以调整的内容，或者是否与从 GetRows 方法返回的变体有关？

我正在使用 MS ADO 2.8，并且也尝试过具有相同行为的 2.5。

```
Function getTimeBuckets() As Collection

Dim strFile As String
Dim strCon As String
Dim strSQL As String
Dim dateRows As Variant
Dim i As Integer
Dim today As Date

Dim cn As ADODB.Connection
Dim rs As ADODB.Recordset

Set cn = CreateObject("ADODB.Connection")
Set rs = CreateObject("ADODB.Recordset")
Set getTimeBuckets = New Collection

strFile = ThisWorkbook.FullName
strCon = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & strFile _
    & ";Extended Properties=""Excel 8.0;HDR=Yes;IMEX=1"";"
cn.Open strCon

strSQL = "SELECT DISTINCT(Expiration) FROM [PositionSummaryTable] where [Instrument Type] = 'LSTOPT'" 

rs.Open strSQL, cn

dateRows = rs.GetRows
rs.Close

'today = Date
today = "6-may-2009"

For i = 1 To UBound(dateRows, 2)
    If (dateRows(0, i) >= today) Then
        getTimeBuckets.Add (dateRows(0, i))
    End If
Next i

Set dateRows = Nothing
Set cn = Nothing
Set rs = Nothing
End Function 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-27T11:53:49.223

您可以只使用名称。

```
Dim cn As ADODB.Connection
Dim rs As ADODB.Recordset 

strFile = Workbooks(1).FullName
strCon = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & strFile _
    & ";Extended Properties=""Excel 8.0;HDR=Yes;IMEX=1"";"

Set cn = CreateObject("ADODB.Connection")
Set rs = CreateObject("ADODB.Recordset")

cn.Open strCon

''Pick one:
strSQL = "SELECT * FROM DataTable" ''Named range
strSQL = "SELECT * FROM [Sheet1$A1:E346]" ''Range

rs.Open strSQL, cn

Debug.Print rs.GetString 
```

**回答问题第 2 部分**

我注意到您只想要今天的记录，因此您应该能够将 sql 修改为：

```
strSQL = "SELECT DISTINCT(Expiration) FROM [PositionSummaryTable] " _
& "where [Instrument Type] = 'LSTOPT' AND [Expiration]=#" _
& Format(Date(),"yyyy/mm/dd") & "#" 
```

您尚未关闭连接：

```
cn.Close 
```

进而

```
 Set rs=Nothing
 Set cn=Nothing 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-28T18:41:11.460

如何使用 LIKE 子句？

我尝试使用：

```
select * from [PES$] where PID_TAG like '*5400001' 
```

没有成功....

这有效：

```
select * from [PES$] where PID_TAG = 'PIT5400001' 
```

但这不是我想要的。

**编辑**

嗯....我们需要更改通配符才能工作...不要使用 *，使用 %

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-27T10:43:17.413

我不了解 VBA，但是 Delphi 和 C# 中有使用该格式的在线代码

```
SELECT * FROM [SheetName$A1:B2] 
```

你试过了吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-23T13:13:52.500

如果您使用的是 powershell，则 $ 是一个内部字符。使用`$

例如：

```
"Select * from [VM`$A3:F30]" 
```

# f# - 并行化树递归过程

> ID：914982
> 
> 赞同：0
> 
> 时间：2009-05-27T10:17:43.410
> 
> 标签：f#, parallel-processing

我通过以下方式在 F# 中编写了来自 sicp 的更改计数问题

```
let count_change amount = 

    let first_denomination kinds_of_coins = 
        match kinds_of_coins with
        |1->1
        |2->5
        |3->10
        |4->25
        |5->50

    let rec cc amount kinds_of_coins = 
        match (amount,kinds_of_coins) with
        |(0,_) -> 1
        |(i,j) when i<0 || j=0 -> 0
        |(_,_) -> 
            [cc amount (kinds_of_coins-1) + 
             cc (amount - (first_denomination kinds_of_coins)) kinds_of_coins] 
              |> List.fold (+) 0

    cc amount 5 
```

我想并行化长时间运行的任务，这就是我所做的

```
let rec cc amount kinds_of_coins = 
    match (amount,kinds_of_coins) with
    |(0,_) -> 1
    |(i,j) when i<0 || j=0 -> 0
    |(_,_) -> 
      [async {return cc amount (kinds_of_coins-1)
       + cc (amount - (first_denomination kinds_of_coins)) kinds_of_coins}] 
       |> Async.Parallel |> Async.RunSynchronously |> Array.fold (+) 0 
```

这比第一个实现慢了几个订单。你能告诉我如何更有效地并行化它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T10:20:46.603

我可能是错的，但我认为您需要进行广度优先遍历而不是深度优先遍历，以便并行化显示任何好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-27T10:26:00.243

这根本不是平行的。您只需将单个任务作为并行启动，这比直接执行它更糟糕。另外，请注意您的函数不是尾递归的，因此它可能并不总是安全的。无论如何，我能想到的引入并行性的最快方法是：

```
let rec cc (amount,kinds_of_coins) = 
    match (amount,kinds_of_coins) with
    |(0,_) -> 1
    |(i,j) when i<0 || j=0 -> 0
    |(_,_) -> 
        [| (amount,(kinds_of_coins-1)); 
           ((amount - (first_denomination kinds_of_coins)), kinds_of_coins)
        |] |> Array.Parallel.map(cc) |> Array.fold (+) 0 
```

但我不保证这会比原来的快得多。

# java - 需要不在标头（JSP）中定义 pageEncoding/charset

> ID：914988
> 
> 赞同：1
> 
> 时间：2009-05-27T10:19:29.943
> 
> 标签：java, jsp

我编写了一个需要对现有程序做出反应的 JSP 程序。它获取 JSP 程序需要处理和生成响应的几个变量。

现有程序有他的自定义标题，如：

```
Content-Type: application/x-server-response 
```

但是 JSP 程序返回的内容带有错误的标头。像这样：

```
Content-Type: application/x-server-response;charset=UTF-8 
```

杀死现有程序的部分是字符集。该程序需要获得根本没有设置字符集的响应。

我已经在互联网上搜索了这个问题，并找到了更多有同样问题的人，但给定的结果并不能解决问题。

是否可以让 JSP 程序返回其内容而根本没有字符集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T10:28:06.370

您是否尝试过[setContentType](http://java.sun.com/j2ee/1.4/docs/api/javax/servlet/ServletResponse.html#setContentType(java.lang.String)) ("application/x-server-response")。我还没有测试过，但这就是该方法似乎要做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T10:28:21.767

JSP 创建文本输出，因此必须添加字符集。JSP 行为是正确的！使用JSP实现的服务器，客户端的实现似乎是错误的！字符集可能会被忽略，但实现似乎有`content-type == "application/x-server-response"`（可能是 PHP？）而不是以更正确的方式解析标头（有关标头格式的更多信息，请参阅[HTTP 1.1 ）。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17)

我认为您不会让 JSP 引擎抑制内容类型标头的字符集参数。*********************``