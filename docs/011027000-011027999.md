# StackOverflow 问答 11027000-11027999

# objective-c - 目标c：等到xml下载完成

> ID：11027001
> 
> 赞同：0
> 
> 时间：2012-06-14T05:11:55.167
> 
> 标签：objective-c, multithreading, download, wait

在我的应用程序中，我正在从 url 下载 xml。然后，我正在检查该 xml 中的 sessionID。如果 sessionID 为 0，则表示存在错误，如果不是，则更新 UILabel 以显示“SUCCESS”。但问题是：似乎应用程序在完成下载之前快速跳转到检查 xml。我这样说是因为它有时有效，有时无效。如何让应用程序等到 xml 完成下载并检查后，他们设置 UILabel （如果我对问题的假设是真的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:15:59.763

看来您有异步请求。尝试检查xml

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    //check your xml here and update your label
} 
```

# python - 如何仅在 python 虚拟环境中升级 django 包？

> ID：11027009
> 
> 赞同：2
> 
> 时间：2012-06-14T05:13:20.730
> 
> 标签：python, django, installation, package, virtualenv

我需要一个包含所有全局包的虚拟环境。我创建了一个，全局的Django版本是1.3.1。现在，我只需要在我的虚拟环境中将 Django 版本升级到 1.4。我通过激活它切换到我的环境，并尝试了

> sudo pip install Django=1.4

它已安装，不是在虚拟环境中，而是在全局 dist 包中。

如何仅在虚拟环境中安装软件包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:19:03.227

`activate`使用脚本切换到虚拟环境后。`pip install Django==1.4`无需使用`sudo`即可。

或者，您可以使用`pip install -E=/path/to/my/virtual/env Django==1.4`在这种情况下，您不需要先切换到虚拟环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T07:41:22.747

如果您只是想升级一个包并且不知道要升级到的版本号，可以使用

```
pip install <package_name> --upgrade 
```

在你的虚拟环境中。因此，在您的上述情况下，以下内容也可以：

```
pip install django --upgrade 
```

而`--upgrade`不仅仅是`-U`也足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T07:43:29.277

得到你的答案

[http://djangopaper.com/post/9334151791/install-multiple-django-version-using-virtualenvwrapper](http://djangopaper.com/post/9334151791/install-multiple-django-version-using-virtualenvwrapper)

# php - 查看我的公司页面上的帖子并对其发表评论或向 OP 发送消息

> ID：11027010
> 
> 赞同：-1
> 
> 时间：2012-06-14T05:13:22.773
> 
> 标签：php, facebook, api, sdk

我正在开发一个集成脚本，该脚本将允许我们公司从我们的 CRM 系统中查看公司 facebook 墙上的所有帖子，然后允许支持人员对提出的问题或无法在公众上讨论的问题发表评论wall 可以选择通过 Facebook 向该用户发送私人消息以请求详细信息。

这是否可以通过当前的 API 实现，如果可以，我会去哪里看。我一直在查看 Facebook 开发人员网站上的 PHP SDK，并且一直是 Facebook::api 对象，但我很难找到有关我需要调用哪些方法来完成我正在尝试做的事情以及我如何收集我的信息的信息后。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:05:17.457

PHP SDK 只是为您提供了*访问*Graph API 的方法。要了解 Graph API 的全部内容，请阅读[其文档](https://developers.facebook.com/docs/reference/api/)。

# macos - 应用程序如何响应 OSX 上的拖放

> ID：11027011
> 
> 赞同：0
> 
> 时间：2012-06-14T05:13:29.030
> 
> 标签：macos, drag-and-drop

假设我想创建一个响应从 Dock 拖放的应用程序。本质上，假设我将一个 .pdf 从桌面拖到 Dock 中的应用程序上。有什么功能可以接收该操作并对其做出反应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:07:04.907

在应用程序委托中：

```
- (void)application:(NSApplication *)sender openFiles:(NSArray *)filenames 
```

当然这也是需要的：![在此处输入图像描述](../Images/d8357514264e7d4fca340252cb8036c8.png)

# php - 在大型 Web 应用程序中使用 iframe？

> ID：11027014
> 
> 赞同：0
> 
> 时间：2012-06-14T05:13:36.520
> 
> 标签：php, jquery, web-applications, iframe

在过去的 1 年里，我正在构建自己的应用程序，并希望进一步改进它。我研究了很多应用程序，发现大型应用程序（由 Google 提供），例如分析使用 iframe。

我正在考虑在我的 Web 应用程序中实现 iframe，我正在寻找经验丰富的开发人员的见解。

我认为最大的好处之一是：加载速度更快。在这种情况下，不会加载整个页面。改进的时间响应 -> 我说的对吗？

我认为还考虑 ajaxifying 一个（主）容器，但我认为 iframe 在这种情况下会更好。

建议赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:23:54.303

多个服务器、域、系统中的大应用程序（Google）。例如：在这种情况下，Google 应用程序（跨 GMail、GPlus 等）`IFrame`用于用户身份验证。但如果您的应用程序是单系统，JSON,Cache-Control 可能会更高性能（低延迟）

# google-chrome - 即使对于 ajax POST 请求，Chrome 也会抛出多个请求（http 流水线）

> ID：11027019
> 
> 赞同：3
> 
> 时间：2012-06-14T05:14:17.833
> 
> 标签：google-chrome, xmlhttprequest, http-post

因此，当我们注意到我们的网站上存在重复订单的情况时，问题就开始了。当我们开始调查时，我们无法缩小页面上可能导致重复订单的范围，但无法解释重复数据的状态。最奇怪的部分是这些订单是在同一时刻（低至最小毫秒）创建的。在服务器的访问日志中，请求也是在同一时刻收到的。

因此，为了进一步调查，我们打电话给随机客户，他们中的大多数人的答案几乎相同，他们使用慢速连接（其中一些通过调制解调器）并且他们使用 chrome。大多数反馈是，页面卡住了，所以我按下了返回按钮。经过一番搜索，我们了解到 chrome 中的 Http 流水线功能，这是一种在连接缓慢时获取页面的激进技术。

所以这是交易，用户按下提交按钮 --> 验证 ajax JSON 调用 (GET) --> 表单数据通过 ajax JSON 调用发布 --> 向客户返回一些反馈，客户采取行动，然后被适当地重定向.

我不确定这是否是 AJAX 甚至 GET/POST 调用的最佳用途，但这就是我所坚持的。

由于这个问题发生在非常具体的情况下（慢速连接和 chrome 必须触发重复连接）并且说实话，我无法复制这个。然而，由于近 95% 的反馈指向 Chrome，我不得不考虑 http 流水线。这是唯一可能触发请求的解释，以便同时创建多个记录。

我还了解到，http 流水线仅适用于 GET 请求而不是 POST 请求。所以我不确定是否：

这涵盖了 AJAX POST 请求（我使用 jQuery，我确实使用 type:POST）Chrome 可能会以某种方式返回（错误地）为所有请求抛出多个请求（请参阅：[如何处理 chrome 发送额外请求？](https://stackoverflow.com/questions/4460661/what-to-do-with-chrome-sending-extra-requests)）

在 Chrome 的情况下，我能找到的唯一论点是默认情况下禁用了 http 管道。

我什至不确定在这种情况下要进行哪些检查，因为这两个请求都是同时处理的。我可以在后端检查是否创建了类似的记录，但这将是一个昂贵的检查，减慢订购速度，企业可能不欢迎它。

我在[http://www.chromium.org/developers/design-documents/network-stack/http-pipelining](http://www.chromium.org/developers/design-documents/network-stack/http-pipelining)找到了一些东西，但不确定我是否必须强制/破解我的请求才能满足停止 http 流水线的标准之一。

任何对此进行测试的点将不胜感激。

# javascript - 如何关闭发送到后台的javascript中的弹出窗口

> ID：11027020
> 
> 赞同：0
> 
> 时间：2012-06-14T05:14:21.403
> 
> 标签：javascript, html

所以我试图使用该`window.close`方法，但它似乎不起作用。这是代码：

```
 <script>
        var popup;
        function openPandora() {
            popup = window.open('http://www.pandora.com', '', 'width=100, height=100, resizable=no');
            popup.blur();
            document.getElementById('container').focus();
        }
        function closeWindow() {
            popup.close();
        }

    </script> 
```

HTML 只是`<a>`调用`onClick="closeWindow();"`

关于如何关闭该弹出窗口的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:21:43.307

这是我的工作代码---

```
 <!DOCTYPE html>
<html>
<head>
<title>For Alex</title>
<script>
        var popup;
        function openPandora() {
            popup = window.open('http://www.pandora.com', '', 'width=100, height=100, resizable=no');
            popup.blur();
            document.getElementById('container').focus();
        }
        function closeWindow() {
            popup.close();
        }

    </script>
</head>
<body>
<button id="add-friend" onClick="openPandora()">Add Friend</button>
<ul id="friends-list">
</ul>
<a href="javascript:closeWindow()">dfd</a>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:23:03.803

你确定 closeWindow() 是否被调用。

尝试这个

```
function closeWindow() {
   alert("Going to close popup");
   alert(popup);
   popup.close();
  } 
```

你看到了什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T05:23:13.633

您的代码似乎对我有用。

在这里试试：http: [//jsfiddle.net/zfSWX/](http://jsfiddle.net/zfSWX/)

# c# - 如何从 c# 后端获取 JavaScript 值

> ID：11027027
> 
> 赞同：0
> 
> 时间：2012-06-14T05:14:51.950
> 
> 标签：c#, javascript

嗨伙计，我有一个 javasciprt 将创建一个值，这对我来说是否可以在我的 c# 后端代码中捕获该值。

```
function GetKey(){ return Key; } //key is a combination value 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T05:33:08.793

**后端的 C#**

```
public String MyVariable;

MyVariable = "Some Value"; 
```

**ASPX**

```
<%=MyVariable %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T05:23:31.277

1.  通过 ajax
2.  您可以将它放入您的 aspx 页面代码并将其传递给您的 js（如果您使用的是 asp）。如果 Key 是一个对象，您可以将其序列化为 json 字符串并使用 JSON 解析器对其进行反序列化。如果是基本类型，在你的asp页面中使用**<%= Key %>就可以了。**（请注意，您不能将代码放入您的 js 文件中）

> ```
> <script type="text/javascript"> 
> var key = JSON.parse('<%=JsonConvert.SerializeObject(someObj.GetKey()) %>'); 
> //now you can use key in your js logic 
> </script> 
> ```

# ruby-on-rails - 未从 url 获取 [:id] 参数，默认路由不起作用

> ID：11027028
> 
> 赞同：0
> 
> 时间：2012-06-14T05:14:52.027
> 
> 标签：ruby-on-rails, ruby-on-rails-3, parameters, routes, url-parameters

当我请求如下 URL 时：

`http://localhost:3000/password_resets/edit/4RghIKJNygEDswIuuCo`

我没有得到`[:id]`参数，即**4RghIKJNygEDswIuuCo**。

这是我的路线文件，是否需要对此进行任何修改？

```
ActionController::Routing::Routes.draw do |map|

  match 'primary', :to => 'pages#primary', :as => "primary"
  match 'admins', :to => 'admin_users#list', :as => "admins"

  match 'login', :to => 'user_sessions#new', :as => "login"
  match 'logout', :to => 'user_sessions#destroy', :as => "logout"

  root :to =>"public#index"

  match 'HFA/:id/' => 'public#show'
  match 'HFA/:id/:uid' =>'public#show'
  match 'public/projectview/:projectid/' => 'public#projectview'
  map.connect ':controller/:action/:id.:format'
  map.connect ':controller/:action/:id'

  resources :users
  resources :usertypes
  resources :user_sessions
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T07:50:32.967

默认为`/controller/:id/edit`，遵循 REST 架构。

你真的想改变这个吗？

如果是这样，请验证声明的顺序：

> Rails 路由按照指定的顺序进行匹配，因此如果您在 get 'photos/poll' 上方有一个资源 :photos，则资源行的 show action 路由将在 get 行之前匹配。要解决此问题，请将 get 行移到资源行上方，以便首先匹配。

[http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)

`rake routes`并使用以下命令检查您的可用路线：

[http://guides.rubyonrails.org/routing.html#inspecting-and-testing-routes](http://guides.rubyonrails.org/routing.html#inspecting-and-testing-routes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T20:31:46.917

如果你把 match 而不是 'get' 你会得到所有 http (GET, POST, PUT, DELETE) 路由动词

```
 get 'password_resets/:id/edit', to: 'password_reset#create', as: :send_password_reset 
```

'to:' 定义控制器方法，'as:' 定义路径名，'get' 定义路由动词，':id' 是 app/views/user_mailer/password_reset.text.erb 中这一行创建的令牌

```
<%= send_password_reset_url(@user.password_reset_token) %> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-05T06:02:20.633

运行“rake routes”命令并检查“password_resets/edit/4RghIKJNygEDswIuuCo”的路由。

# pdf - 使用 swftools.org 的 PDF 到 SWF 无法正常运行

> ID：11027033
> 
> 赞同：1
> 
> 时间：2012-06-14T05:15:31.247
> 
> 标签：pdf, flash

当我将 pdf 转换为 swf 时，很少有文件没有转换，并且在转换期间服务器利用率非常高，导致服务器被挂起。有时我会运行数百个 pdf 文件的循环，如果某些 pdf 由于某些问题未转换为 swf，它会在该步骤停止，并且所有 pdf 都未转换为 swf。请帮助摆脱这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:47:03.303

我利用 swftools 即时转换 pdf 文件，因此可以在内联（flash）pdf 查看器中查看它们。对于某些文档，我遇到了关于 pdf 内容的错误 (swftools 0.9.2.)。我做了一个谷歌搜索，然后附加一个选项`-s poly2bitmap`有助于解决这个问题。现在，因为我从 Java 应用程序中调用 swftools，所以我会在 std.err 上监听并针对此处出现的错误采取行动。

这篇[文章](https://stackoverflow.com/questions/2965171/swftools-segmentation-fault)也可以解释你的问题。

# objective-c - 加快这种标准差方法

> ID：11027035
> 
> 赞同：1
> 
> 时间：2012-06-14T05:15:45.800
> 
> 标签：objective-c, c, nsdecimalnumber, standard-deviation

我有这种方法来计算 NSNumber 整数数组的标准偏差，给定一个平均值。计算使用 NSDecimals 来保留最高分辨率。这目前需要许多 cpu 周期，感谢您在保持所需分辨率的同时加快速度的任何帮助！谢谢你。

```
-(NSDecimal)standardDeviationOf:(NSMutableArray *)array withMean:(NSDecimal)mean {

if (![array count]) return CPTDecimalFromInt(0);

NSDecimal sumOfSquaredDifferences = CPTDecimalFromInt(0);

for (NSNumber *number in array) {

    NSDecimal valueOfNumber = CPTDecimalFromInt([number intValue]);
    NSDecimal difference = CPTDecimalSubtract(valueOfNumber, mean);
    sumOfSquaredDifferences = CPTDecimalAdd(sumOfSquaredDifferences, CPTDecimalMultiply(difference, difference));

}

return CPTDecimalFromDouble(
                            sqrt(
                                 CPTDecimalDoubleValue(sumOfSquaredDifferences) / [[NSNumber numberWithInt:[array count]] doubleValue]
                                 )
                            );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:13:43.343

An`NSDecimal`具有 38 位精度，而`double`具有大约 16 位精度。但是在循环结束时，当您转换`sumOfSquaredDifferences`为`double`for`sqrt`函数时，您在 中拥有的所有额外精度都`NSDecimal`“丢失”了。您不妨使用 执行内部循环的算术运算`double`，这应该比 快得多`NSDecimal`：

```
double sumOfSquaredDifferences = 0;
double valueOfMean = [mean doubleValue];
for (NSNumber *number in array) {

    double valueOfNumber = [number intValue];
    double difference = valueOfNumber - valueOfMean;
    sumOfSquaredDifferences += difference * difference;

}

return CPTDecimalFromDouble(sqrt(sumOfSquaredDifferences /
                                 double([array count]))); 
```

# perl - 登录用户的单独缓存

> ID：11027038
> 
> 赞同：0
> 
> 时间：2012-06-14T05:16:14.117
> 
> 标签：perl, caching, google-chrome

我目前有一个网站，其中大约有 20 个单独的页面。所有页面都有两个版本...查看者尚未登录的版本以及已登录的版本。登录版本可能与未登录版本完全不同......我想知道是否有一种简单的方法可以告诉浏览器在用户登录或注销时让我的域的所有缓存页面“无效”。

示例：未登录的查看者访问了我网站上的许多页面，这导致他们的浏览器缓存所有这些页面。登录时，我可以为用户提供一个特定的标头，这将使他们的浏览器在下次加载页面时不使用缓存版本？这需要在登录和注销时发生。

任何提示或技巧都会非常有帮助，我在缓存方面相当新......谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:44:01.590

不，您不能告诉用户的浏览器取消缓存页面。您可以为已登录用户使用与已注销用户不同的 URL（添加查询字符串就足够了），或者，首先不允许缓存其中任何一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T16:29:55.907

理想情况下，您不会有单独的页面来表示用户的登录状态。您的应用程序的该属性确实属于模型而不是视图。我想一个登录的用户永远不会通过控制器看到未登录的页面，对吧？在这种情况下，我会提出，哪个页面被缓存，哪个页面没有被缓存并不重要。

以下是我做你想做的事情的唯一方法，但它并不漂亮......如果用户已登录，但请求未登录页面，则使页面过期（例如 $q- >header( -expires => 'now' )) 并将登录的用户发送到未登录的页面。但是，如上所述，我怀疑你想这样做。您可以引用具有 js/ajax 的 .js 文件来检测这种情况，然后将用户重定向回登录页面。

你可以看到这可能是一场多么严峻的考验。我建议收紧你的应用程序设计，这样这个问题就会消失。希望这会有所帮助。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:56:12.097

看看[强制浏览器清除缓存](https://stackoverflow.com/questions/1922910/force-browser-to-clear-cache)。那里有一些有希望的线索。

否则，告诉您的用户按住 Shift 键并单击重新加载按钮。;-)

# asp.net - 在 iframe 中下载文件

> ID：11027044
> 
> 赞同：0
> 
> 时间：2012-06-14T05:16:47.530
> 
> 标签：asp.net, iframe, download

我正在使用以下方法下载文件。在**iframe**内单击按钮。它在除 IE 之外的所有浏览器中都可以正常工作。有人可以建议我一个解决方案

```
private void DownloadToBrowser(string filePath)
    {
        try
        {
            FileInfo file = new FileInfo(filePath);
            Context.Response.Clear();

            Context.Response.ClearHeaders();

            Context.Response.ClearContent();

            Context.Response.AddHeader("Content-Disposition", "attachment; filename=" + file.Name);

            Context.Response.AddHeader("Content-Length", file.Length.ToString());

            Context.Response.ContentType = "text/plain";

            Context.Response.Flush();

            Context.Response.TransmitFile(file.FullName);

            Context.Response.End();
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:54:12.367

我建议删除该`Context.Response.Flush();`行...我认为没有必要（因为它将作为`Context.Response.End();`行的一部分发生），并且可能会弄乱浏览器在下一行接收文件的方式。

另外，您传输的文件肯定是纯文本文件吗？如果没有，您需要提供不同的`Context.Response.ContentType();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:46:11.247

了解我正在使用数据集，下载为 Excel 文件

使用命名空间：

```
 using System.IO;
        using System.Data;   

        DataSet ds = new DataSet("Table");
        ds.Tables.Add("Table1");
        ds.Tables[0].Columns.Add("Field1");
        ds.Tables[0].Columns.Add("Field2");
        ds.Tables[0].Columns.Add("Field3");
        ds.Tables[0].Rows.Add();
        ds.Tables[0].Rows[0][0] = "1";
        ds.Tables[0].Rows[0][1] = "2";
        ds.Tables[0].Rows[0][2] = "3";

        HttpResponse response = HttpContext.Current.Response;

        // first let's clean up the response.object
        response.Clear();
        response.Charset = "";

        // set the response mime type for excel
        response.ContentType = "application/vnd.ms-excel";
        response.AddHeader("Content-Disposition", "attachment;filename=sample.xls");

        // create a string writer
        using (StringWriter sw = new StringWriter())
        {
            using (HtmlTextWriter htw = new HtmlTextWriter(sw))
            {
                // instantiate a datagrid
                DataGrid dg = new DataGrid();
                dg.DataSource = ds.Tables[0];
                dg.DataBind();
                dg.RenderControl(htw);
                response.Write(sw.ToString());
                response.End();
            }
        } 
```

下载为 Word 文件

代替

```
 response.ContentType = "application/msword";
        response.AddHeader("Content-Disposition", "attachment;filename=sample.doc"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T05:23:10.123

您很可能错过了 IE 所需的一些 HTTP 响应标头。

微软网站上有[KB](http://support.microsoft.com/kb/260519)。

还可以查看关于 SO 的类似问题：[PHP script to download file not working in IE](https://stackoverflow.com/questions/1218925/php-script-to-download-file-not-working-in-ie)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T05:28:47.407

你可以尝试这样的事情：

```
Context.Response.Buffer = true;
Context.Response.ContentType = "application/pdf";
Context.Response.AddHeader("Content-Disposition", "attachment;filename=" + FileName );
Context.Response.OutputStream.Write(dataBytes ,0,FileContentLength); 
```

也尝试将此添加到您的 aspx 页面：

```
<%@ Page aspCompat="True" other attributes %> 
```

# iphone - Cydia 的这个调整有什么问题？

> ID：11027045
> 
> 赞同：2
> 
> 时间：2012-06-14T05:16:47.863
> 
> 标签：iphone, objective-c, ios, cydia, tweak

我为 编写了一个调整`cydia`，但它似乎不起作用。我使用`Theos`. 我从**iosod 工具**得到了一个标头转储，发现

```
`$` - (void)searchBarTextDidBeginEditing:(id)searchBarText; 
```

在**SBSearchController**类内部。这是我在 Tweak 中的代码。

`%hook SBSearchController`

`- (void)searchBarTextDidBeginEditing:(id)searchBarText` `{` `%orig;`

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Tweak"
    message:@"Testing is running!"
    delegate:nil
    cancelButtonTitle:@"Ok"
    otherButtonTitles:nil];
[alert show];
[alert release];` 
```

`}`

`%end`

我的 Makefile 看起来像这样

```
include theos/makefiles/common.mk  

Testing_FRAMEWORKS = UIKit  

TWEAK_NAME = Testing  

Testing_FILES = Tweak.xm    

include $(THEOS_MAKE_PATH)/tweak.mk \ 
```

一切都正确编译和安装，但在运行时，当我点击搜索栏并开始输入时，什么也没有发生。有人知道我做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T07:27:08.593

请记住，由于这是一个委托方法，除非委托类实现了该方法，否则它不会被调用。您是否在处理此事件的应用程序上对此进行了测试？

尝试将一些日志记录添加到文件中，以便查看您的代码是否被调用。

# android - Flash Builder 4.6 移动方向

> ID：11027046
> 
> 赞同：0
> 
> 时间：2012-06-14T05:17:06.610
> 
> 标签：android, flash-builder

我正在使用 FlashBuilder 4.6 开发 Android 应用程序。在应用程序中，需要在设备方向更改时设置一些值。即当屏幕/设备方向从横向更改为纵向时设置值，反之亦然。

虽然最初我的应用程序具有**景观**方向。而这个要求是具体的。

我希望每次屏幕/设备方向更改时都必须在此处设置值。我没有得到想要的结果。
请指导我并告诉我我的代码是否有误，或者我该如何实现。

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" title="{data}" 
        xmlns:mx="library://ns.adobe.com/flex/mx"
        viewActivate="view1_viewActivateHandler(event)"
        creationComplete="view1_creationCompleteHandler(event)">
<fx:Script>
   <![CDATA[
protected function view1_viewActivateHandler(event:ViewNavigatorEvent):void
{
    if(Accelerometer.isSupported)
    {
    accl = new Accelerometer();
        accl.addEventListener(AccelerometerEvent.UPDATE,update);                //accl.addEventListener(AccelerometerEvent.UPDATE,adjustImage);
    }
}
private function update(event:AccelerometerEvent):void
{
     this.stage.autoOrients = true;
     //in the below line I am attaching StageOrienationEvent that will adjust the 
     //values.
     stage.addEventListener(StageOrientationEvent.ORIENTATION_CHANGE,adjust);
}
private function adjust(event:StageOrientationEvent):void
{
     if(event.afterOrientation == StageOrientation.ROTATED_LEFT)
     {
    testVal.text ="After OR is LEFT";
     }
     else if(event.afterOrientation == StageOrientation.ROTATED_RIGHT)
     {
    testVal.text ="After OR is RIGHT"; 
     }
     else if(StageAspectRatio.LANDSCAPE)
     {
    testVal.text ="StageAspectRatio is Landscape";
     }
     else if(StageAspectRatio.PORTRAIT)
     {
    testVal.text="StageAspectRatio is  Portrait";
     }
}

</fx:Script> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T04:41:23.050

花了两天时间终于找到了解决方案。

在更新函数中，在 stage.addEventListner 中 添加**OrientationChanging 事件。**

```
private function update(event:AccelerometerEvent):void
{
  this.stage.autoOrients  = true;
  stage.addEventListener(StageOrientationEvent.ORIENTATION_CHANGING,adjust);
}

private function adjust(event:StageOrientationEvent):void
{
  switch(event.afterOrientation)
  {
    case StageOrientation.DEFAULT:
       //Do Something here. The Portrait Position.
         break;
    case StageOrienatation.ROTATED_LEFT:
      //Do Something here when you rotate your phone portrait to left side.
       break;
    case StageOrienatation.ROTATED_RIGHT:
      //Do something here when you rotate your phone portrait to right side.
       break;
  }
} 
```

非常感谢所有查看此问题并尝试解决问题的人。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T18:18:23.177

我不是一个经过实验的编码器！但是：私有函数更新（事件：AccelerometerEvent）：void 应该是：私有函数acl（事件：AccelerometerEvent）：void ?? 或以下代码中的类似内容 if(stage[not event].afterOrientation == ??? 它只是一个意见！

# tfs - Team System 中的逻辑组

> ID：11027048
> 
> 赞同：2
> 
> 时间：2012-06-14T05:17:10.713
> 
> 标签：tfs, tfs-2010

我们使用 TFS2010，我们有一个开发团队和一个测试团队。目前，我们有一个显示开发团队创建的所有工作项的团队查询和一个显示测试团队创建的所有工作项的不同团队查询。这些列表在包含用户名方面非常明确，例如：

```
And/Or    Field         Operator    Value
          Team Project  =           @Project
And       Created By    =           John
And       Created By    =           Kane
And       Created By    =           Sam
And       Created By    =           Matt
And       Created By    =           Ben 
```

有没有办法在 TFS 中创建一个组，例如开发团队或测试团队，这样您只需要指定组名而不是单独列出每个用户？

例如：

```
And/Or    Field         Operator    Value
          Team Project  =           @Project
And       Created By    =           Testing Team 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T07:10:07.413

如果用户在不同的组中，使用 operator 应该很简单`In Group`：

![在此处输入图像描述](../Images/d4113790190c6c190933548faf7e27c8.png)

# bash - 使用 bash 处理文件和文本

> ID：11027049
> 
> 赞同：0
> 
> 时间：2012-06-14T05:17:24.633
> 
> 标签：bash, shell, sed, awk

我有两个文本文件。hash_only.txt 和 final_output.txt hash_only.txt 如下所示。

```
193548
401125
401275 
```

final_output.txt 如下所示。

```
193548      1199687744  5698758206701808640
193548      1216464960  5698758206761818112
193548      1216464960  5698758206778417152
193548      4236691520  5698758206778945280
401125      2138607488  5698762375908890880
401125       863932288  5698762375909423360
401125      3884158848  5698762375910044160
401125      2609483648  5698762375911032320 
```

我正在尝试编写一个执行以下操作的循环。

```
for i in `cat hash_only.txt` ;
do
    for j in `cat final_output.txt` ;
            do
                    if [ $i -eq $j ]
                    then
                            echo $i $j      
                    fi
            done
 done; 
```

对于 hash_only.txt 中的所有值，例如 193548,401125 等，我想从文件 'final_output.txt' 中提取第 2,3 列，其中第 1 列匹配 193548,401125 等，并将第 2,3 列输出到 print_193548、print_401125 等。

我该怎么做。在上面的代码中，我需要在 then 部分中放置一些代码。但我无法弄清楚，因为我对 bash 不是很精通。

编辑：

我现在已经修改了我的脚本，使其看起来像我在`cat hash_only.txt`；

```
do
        for j in `cat final_output.txt` ;
                do
                        if [ $i -eq $j ]
                        then
                                gawk 'FNR==NR
                                        { hash[$1]  
                                          next 
                                        }
                                       $1 in hash  { 
                                        print $2,$3 >> "print_"$1; 
                                }' hash_only.txt final_output.txt
                        fi
                done
done; 
```

它没有创建任何名为 print_[0-9]* 的文件。我不明白为什么不呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:40:48.030

试试这个：

```
nawk 'FNR==NR{a[$0];next}($1 in a){print $2,$3>$1}' hash_only.txt  final_output.txt 
```

这实际上将创建一个名称为第一个字段的文件，并以您请求的方式存储输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T05:36:06.223

```
awk '
FNR==NR {
    hash[$1]
    next
}
$1 in hash {
    printf("%s\t%s\n", $2, $3) > "print_"$1;
}' hash_only.txt final_output.txt 
```

多么神奇，我的解决方案几乎与彼得的解决方案相同。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-03-26T11:54:40.097

```
cat hash_only.txt | while read FNAME; do { cat final_output.txt |grep ${FNAME} |awk '{$1="";}1' > print_${FNAME}; } ; done ; find ./print_* -type f -size 0 -delete 
```

```
$ ls ./print_??????
./print_193548  ./print_401125 
```

```
$ cat ./print_193548
 1199687744 5698758206701808640
 1216464960 5698758206761818112
 1216464960 5698758206778417152
 4236691520 5698758206778945280 
```

```
$ cat ./print_401125
 2138607488 5698762375908890880
 863932288 5698762375909423360
 3884158848 5698762375910044160
 2609483648 5698762375911032320 
```

# c# - 开发一个在.NET 中在后台运行的程序？

> ID：11027051
> 
> 赞同：31
> 
> 时间：2012-06-14T05:17:31.777
> 
> 标签：c#, .net

我用 C# 编写了一个小程序，我想在后台运行它，它应该只在按下某个组合键时出现。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-14T05:39:08.697

至少有三种方法可以做到这一点：

*   经典的**Windows 服务**应用程序。CodeProject 中的“[在 C# 中创建基本 Windows 服务](http://www.codeproject.com/Articles/14353/Creating-a-Basic-Windows-Service-in-C)”一文将为您提供帮助。在这种情况下，您使用`System.ServiceProcess`命名空间。顺便说一句，在这种情况下，您应该阅读 MSDN 中的“ [System.ServiceProcess 命名空间](http://msdn.microsoft.com/en-us/library/3kwsb404)”文章。这是它的简短引述：

    > System.ServiceProcess 命名空间提供了允许您实现、安装和控制 Windows 服务应用程序的类。服务是长时间运行的可执行文件，无需用户界面即可运行。

*   **内存驻留**程序。但这对于 C# 来说几乎是不可能的。如果您愿意，可以使用 C++ 或更好的 C 来实现此目的。如果您想自己搜索，只需使用关键字即可`TSR`。

*   最后一张是脏的。只需创建一个**无形的 C# 应用程序**并[尝试](https://stackoverflow.com/questions/1212318/hide-a-c-sharp-program-from-the-task-manager)将其从任务管理器中[隐藏。](https://stackoverflow.com/questions/1209635/c-sharp-hide-program-at-start)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-14T05:21:01.730

在我看来，让程序完全不可见是个坏主意。因为用户无法与程序交互。我建议将它放在 SysTray 中（Windows 中的时钟图标）

```
 trayIcon      = new NotifyIcon();
    trayIcon.Text = "My application";
    trayIcon.Icon = TheIcon

    // Add menu to the tray icon and show it.
    trayIcon.ContextMenu = trayMenu;
    trayIcon.Visible     = true;

    Visible       = false; // Hide form window.
    ShowInTaskbar = false; // Remove from taskbar. 
```

要监控键盘，您可以使用 LowLevel Keyboard 挂钩（[参见示例](http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx)）或附加快捷键（[参见示例](http://www.codeproject.com/Articles/5914/Simple-steps-to-enable-Hotkey-and-ShortcutInput-us)）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-01-22T03:48:19.073

创建一个windows窗体应用程序，删除Form1

修改 program.cs`Application.Run(new Form1());`为 `Application.Run();`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-14T05:30:07.827

您可以创建 Windows 服务应用程序。它作为后台进程运行。没有用户界面。这也可以在计算机启动时自动启动。您可以在任务管理器中查看其余的后台进程，也可以在命令提示符中输入 services.msc。

这可能会有所帮助。[http://msdn.microsoft.com/en-us/library/9k985bc9%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/9k985bc9%28v=vs.80%29.aspx)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-22T02:23:42.177

一个快速而肮脏的解决方案（我认为 Window Service Application 模板在 Visual Studio Express 和 Standard 中不可用）：

启动一个新的 Windows 窗体应用程序。向解决方案添加一个新类并在其中编写所需的代码。

返回到窗体设计器，将 WindowState 属性设置为 Minimized，然后将 Load 事件添加到窗体。在事件处理程序中隐藏表单并调用您的类：

```
private void Form1_Load(object sender, EventArgs e)
{
    this.Hide(); 
    MyNewClass mynewclass=new MyNewClass();
} 
```

该应用程序不会出现在任务栏中，并且当您按 Alt+Tab 时您看不到它。如果你愿意，你可以添加一个系统托盘图标，就像 magol 写道：

```
NotifyIcon trayIcon = new NotifyIcon();
trayIcon.Icon=new Icon(@"C:\iconfilename.ico");
trayIcon.Visible = true; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T05:22:19.433

如果您真的想创建一个真正在后台运行的程序，请尝试创建一个 Windows 服务。如果你创建一个新项目，它就在那里

# magento - 如果用户中止交易，如何“取消”订单？

> ID：11027052
> 
> 赞同：1
> 
> 时间：2012-06-14T05:17:32.107
> 
> 标签：magento, payment-gateway

我正在一个 Magento (ver. 1.6.1.0) 网站上工作。有 2 种付款方式：货到付款和网上银行/信用卡。

每当用户进入支付网关（EBS 用于网上银行，但其他网关的解决方案必须相同）时，Magento Dash（销售 > 订单）显示“待处理”状态。现在，如果用户在填写卡片详细信息时关闭浏览器，Magento 中的状态仍然是“待定”，而现在应该是“已取消”。

我想我可以设置一个 cron 作业，在一定时间后，将状态更改为“已取消”。

我的问题-

1.  没有cron有什么办法吗？
2.  如果是 cron，则对程序进行一些解释（我是 cron 新手）。就像我在用户从我的（商家）网站继续之后调用 cron 一样？如果 cron 在 15 分钟后被调用，那么如何处理 1 秒前（比如说）开始的事务？
3.  如果用户点击支付网关站点上的返回按钮，状态仍然是“待处理”，如何“取消”这些订单？

> 编辑：我设计了这个状态图。现在我还需要添加一个状态。正如评论中所指出的，Cron 不应该“取消”它，而是将其更改为员工可以理解的某种状态，并打电话给客户。然后工作人员决定最终状态。~~所以还有一个问题：如何添加状态？~~[解决了]
> ![在此处输入图像描述](../Images/3493b571e0992c7479580a155f33a5c5.png)

请回答您知道的问题的尽可能多或尽可能少的部分。
谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:46:24.803

我认为这个链接将能够帮助你..

[http://www.magentocommerce.com/boards/viewthread/19427/](http://www.magentocommerce.com/boards/viewthread/19427/)

您还可以查看此链接中提到的文件.. [http://thinkclay.com/technology/magento-custom-status-in-admin](http://thinkclay.com/technology/magento-custom-status-in-admin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T07:10:31.997

这是一个更新的方法：

如果您使用社区 7 及更高版本，您可以通过转到系统 > 订单状态在管理部分设置您自己的订单状态

然后将您的状态更改为默认状态，它现在会在您订购评论时显示。

# xcode - DrawRect 在子视图中调用一次

> ID：11027066
> 
> 赞同：2
> 
> 时间：2012-06-14T05:19:56.207
> 
> 标签：xcode, drawrect

Xcode 的新手。设置一个带有一些自定义按钮和文本字段的视图控制器。在我的主视图中添加了一个小`UIview window`的 subView 来绘制图形。通过调用`[self.mySubView setNeedsDisplay]`我的`viewController`. MY `drawRect`in`mySubview`只被叫一次，再也不会被叫。

# data-distribution-service - 带有 ssl 配置的 OpenSpliceDDS

> ID：11027072
> 
> 赞同：1
> 
> 时间：2012-06-14T05:20:42.713
> 
> 标签：data-distribution-service

我喜欢如下配置 OpenSpliceDDS。

我必须配置集中式 OpenSpliceDDS。它将发送和接收来自全局的所有数据。在集中式 dds 服务器中，只会打开 443 端口。

如何使用端口 443（安全层）配置 OpenSpliceDDS？

客户端机器具有本地 OpenSpliceDDS。本地 OpenSpliceDDS 应负责将本地数据发送到具有安全层 (443) 的集中式 OpenSpliceDDS。

如何与客户端配置？

谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-13T02:03:42.990

我愿意打赌，任何对 TLS 的 DDS 支持都将涉及丧失 DDS 的许多好处。TLS（或 DTLS）和 DDS 的目标似乎截然相反。TLS 旨在创建一个单一的通信通道，允许对等方验证另一个是他们声称的身份（尽管它通常只在一个方向上）。DDS 的设计使得发送者和接收者完全解耦，并且在任何地方都没有信任的概念。

如果有，语义是什么？如果您希望您可以创建一个 QoS 将 TLS 分解为其组成功能 - 断言`DDS_ENCRYPTION_ENCRYPTED`但然后使用`DDS_AUTHENTICATION_NONE`? ...好吧，不幸的是，这些概念是密不可分的。在解密端点不受信任的情况下，拥有一个加密的通道是没有意义的。

长篇大论：指定端口不会为您提供安全性，并且 DDS 对于保护流量来说不是最佳选择。直接使用 TLS 来保护需要它的流量，并使用 DDS 来保护其他一切。

# eclipse - 无法连接到远程虚拟机。连接被拒绝。同时尝试调试 jar

> ID：11027073
> 
> 赞同：3
> 
> 时间：2012-06-14T05:20:44.257
> 
> 标签：eclipse, debugging, remote-debugging

我正在尝试使用远程 JAVA 应用程序调试来调试 jar 文件。我收到“无法连接到远程虚拟机”。连接被拒绝。' 以下错误是堆栈跟踪..

java.net.ConnectException：连接被拒绝：在 java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69) 在 java.net.DualStackPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java: 339) 在 java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200) 在 java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182) 在 java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157) 在 java. net.SocksSocketImpl.connect(SocksSocketImpl.java:391) 在 java.net.Socket.connect(Socket.java:579) 在 java.net.Socket.connect(Socket.java:528) 在 java.net.Socket.( Socket.java:425) 在 java.net.Socket.(Socket.java:208) 在 org.eclipse.jdi.internal.connect.SocketTransportService$2。在 java.lang.Thread.run(Thread.java:722) 处运行（SocketTransportService.java:136）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T05:30:00.230

您是否记得在您尝试连接的 JVM 上启用调试？当您运行远程 JVM 时，这是通过 JAVA_OPTS 完成的。

例如，要向 tomcat 添加调试，您可以在启动 java 进程时添加这些 JAVA_OPTS：

```
-Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-18T15:58:59.347

确保在引用 Java 程序之前添加调试标志，否则它们将被传递给程序本身而不是 Java。

此外，Eclipse 有时会很奇怪，当您运行“调试配置”时，它不会自动切换到“调试”透视图。建立成功的调试会话后，如果您再次运行它并认为它没有运行和/或静默失败，那么您会收到错误消息：“无法连接到远程 VM。连接被拒绝。” 因此，请始终切换到“调试”视角以查看发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-11T21:50:52.550

如果其他人观察到这种行为并检查了他们的 Java 命令行参数、端口号和主机名，我可以通过重新启动 Eclipse 来解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-23T22:01:21.940

对于 Java 的更新版本，参数应该是：

-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=XXXX

（挂起可以是 y 或 n 取决于您是否希望 java 进程等到您附加调试器后再执行程序）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-25T16:39:09.997

我不确定这是多么普遍，但是......
（在名为“tahoeServer”的树莓派上运行 openjdk 14+36）

您必须告诉 JVM 使用哪个接口。如果你只是说

-agentlib:jdwp=transport=dt_socket,server=y,address=4445

然后 JVM 将在“localhost”接口上侦听，并且不允许真正的远程调试。但是，如果你说

-agentlib:jdwp=transport=dt_socket,server=y,address=tahoeServer.local:4445

将允许来自远程机器的连接。

同样，我不知道这在其他版本的 JVM 或其他操作系统上是否正确。

# android - 在android中自动创建输入（新行）文本文件

> ID：11027074
> 
> 赞同：0
> 
> 时间：2012-06-14T05:21:01.027
> 
> 标签：android, string, file

我在 android 中*创建了一个文件应用程序*，我想将一个字符串变量写入`file.txt`，它应该自动插入一个`enter`（导航到新行）

我用了：

```
public void cekFile() {
    File root = Environment.getExternalStorageDirectory();
    try {
        BufferedWriter fw = new BufferedWriter(new FileWriter(new File(
                "/data/log/log.txt"), true));
        if (root.canWrite()) {
            fw.write("Monitoring Panggilan" + "\n");
            fw.close();
        }
    } catch (IOException e) {
        Log.e("One", "Could not write file " + e.getMessage());
    }
} 
```

它不是导航到新行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:51:21.973

在`fw.newLine()`方法之前或之后使用`fw.write()`方法。

# bash - bash 中配置文件中的变量：语法错误：预期操作数（错误标记为“<”）

> ID：11027077
> 
> 赞同：-1
> 
> 时间：2012-06-14T05:21:04.817
> 
> 标签：bash, ubuntu, for-loop, configuration-files

所以我有这个配置文件，其中设置了值，例如

```
config.sh

nFiles=2

myScript.sh

for ((i=0;i<$nFiles;i++));
do
     mv -v $FILE_GEN_SOURCE/${FILES[i]} $FILE_DEST;
done 
```

但这给了我这个

```
error: ((: i<: syntax error: operand expected (error token is "<") 
```

我尝试删除 $，然后 nFiles 的默认值变为 0。所以关于这里有什么问题以及可以做些什么来纠正这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:26:06.130

你需要`source config.sh`在开头`myScript.sh`。

`myScript.sh`无法`nFiles`从访问`config.sh`。

尝试：

```
#!/bin/bash
# myScript.sh

source config.sh

for ((i=0;i<$nFiles;i++));
do
     mv -v $FILE_GEN_SOURCE/${FILES[i]} $FILE_DEST;
done 
```

# php - 使我的 PHP 网站能够抵抗黑客攻击

> ID：11027088
> 
> 赞同：0
> 
> 时间：2012-06-14T05:22:29.560
> 
> 标签：php, mysql, content-management-system, pdo, salt

我正在为我一直在计划的网站制作自定义 CMS，安全性是一个大问题。

我可能缺乏抵御全面黑客社会工程进入服务器机房的专业知识，但这是我从这里和其他网站编译的内容列表，以防止黑客攻击，如果这里缺少任何内容或如果进一步，请发表评论应采取措施

**阶段1**

* * *

使用 PDO 进行数据库调用和 htaccess 重写 url 以隐藏诸如 index.php?get=variable 现在是 myurl.com/get/variable

并且上述变量通过 PDO 传递，如此[处所述](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

将数据库查询和功能移动到拒绝 HTTP 访问的文件夹中，并将某些管理功能锁定在服务器用户组后面，只有少数人可以访问该用户组。

所有密码都是加密的，永远不会被解密为纯文本，因为我没有理智的理由需要阅读其他人的密码。

基于 X 次尝试和 reCapatcha 的 IP 地址自动锁定导致登录和用户创建停止

**第二阶段**

* * *

这些步骤找到一个家主要是因为我打算有一天分发这个软件并且不想让我脸上有鸡蛋

用户跟踪以防止查找文件和记录入侵尝试

IP 跟踪以防止 XXS 劫持和出于类似原因可能的行为监控

我会想更多，但我的大脑现在跳到需要两阶段面部识别和状态 ID 数据库

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T05:28:27.093

除非您手头有大量时间和经验丰富的团队，否则您的 CMS 永远无法与 Joomla、Drupal 或 Wordpress 等相提并论。

由于它们已经存在了一段时间，它们已经防风雨，但即便如此，黑客也会发现漏洞。

不是想劝阻你，但如果安全是一个大问题，我会选择一个完善的 CMS。更具体地说，为了简单起见，我会使用 Wordpress。创建自定义主题和创建自定义功能和插件也非常容易。

和上面提到的 PST 一样，*不需要重新发明轮子*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:47:14.427

我认为令人钦佩的是，你有远大的想法，并希望在你的腰带下取得你已经编码并引以为豪的成就。我想我们都想编写一些真正可靠的代码，我们可以指向并说“我做到了”，并感受到真正的成就感。

我不会告诉你它不能完成，但我非常同意其他评论，即安全性是一个巨大的、巨大的、巨大的话题，而你在这里只触及了表面。您的步骤列表中有一些不错的项目，但是 Web 应用程序的安全性远远超出了身份验证和入侵。从您编写的步骤来看，您似乎了解了应用程序安全的一些基础知识。

话虽如此，一个真正彻底和全面的安全专业人士需要考虑： * 你建议人们在什么版本的 apache 上部署？您推荐的 mod_php 或 mod_fcgid 版本有哪些已知问题？* 你将运行什么版本的 PHP？您是否知道您将编码的解释器版本有任何突出的漏洞？* 您将如何建议人们强化服务器？例如，除了运行 apache 和 mysql 之外，还需要激活哪些其他服务？你会允许SSH到服务器吗？如果 web 服务器和 db 在两台不同的机器上，你如何确保只有 web 服务器可以与 db 服务器通信？

您提到的其他一些事情，例如入侵检测、面部识别等，都是非常复杂的主题，并且有整个公司围绕每个主题领域构建产品。

我的观点是：一个人基本上不可能想到所有可能出现的安全问题，而且——即使你今天*能*想到所有这些——明天有人可能会发现一个安全问题——以前听说过。

所以，雄心勃勃是件好事，但在你不知所措之前知道你正在处理的事情也是件好事。（这也是优秀安全专业人员的另一个特征）。

# java - Struts 2 带参数重定向

> ID：11027097
> 
> 赞同：2
> 
> 时间：2012-06-14T05:23:18.877
> 
> 标签：java, struts2

我的 Action 有用于 id 的 getter 和 setter。如何将 id 作为参数传递？我试过下面的代码它不起作用。

```
 <action name="FBLogin" class="FBLoginAction">
        <result type="redirect">
            <param name="location">https://graph.facebook.com/oauth/access_token</param>
            <param name="id">${id}</param>
        </result>
    </action> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-18T15:38:23.043

看起来您忘记添加要重定向到的 actionName

```
<action name="FBLogin" class="FBLoginAction">
        <result type="redirect">
            <param name="location">https://graph.facebook.com/oauth/access_token</param>
            <param name="id">${id}</param>
            <param name="actionName">"Action to redirect to"</param>
        </result>
</action> 
```

# java - 无法从主包（Eclipse）访问测试包中的类

> ID：11027100
> 
> 赞同：7
> 
> 时间：2012-06-14T05:23:32.247
> 
> 标签：java, eclipse, classnotfoundexception

我在 Eclipse 中有一个 Maven 项目，其文件夹结构如下 -

```
 - Project

    > src/main/java ..

    > src/test/java .. 
```

我发现当我尝试从主包中的代码初始化测试包中的任何类时，我得到一个 classNotFoundException。

我想知道为什么会发生这种情况以及不允许从主包访问测试类的原因是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-14T05:26:37.650

如果您的主代码需要 test 文件夹中的代码，那么 test 文件夹中的代码不是“测试”，而是主代码。测试的重点是它独立于您的主代码，而不是一个组成部分。

否则，如果您真的想这样做，请查看您用于启动程序的运行配置并设置类路径以包含测试内容。

# c - 在 C 中存储单词和行列表的最佳数据类型是什么？

> ID：11027104
> 
> 赞同：0
> 
> 时间：2012-06-14T05:23:53.240
> 
> 标签：c, malloc

我正在制作一个读取文本文件并将其存储在内存中的小程序。然后它允许用户在文件中添加另一行，替换一行，在特定行添加另一个单词等......

最后，用户可以将内存中的内容保存回文件。我在 Python 中做了同样的程序并使用了一个多维数组，所以数组中的每个元素都是一个单词数组。这使得访问特定行中的特定单词变得非常容易，以替换为其他内容

现在我正试图用 C 做同样的事情并感到困惑。经过一些混乱之后，我更倾向于拥有一个具有字符字[]的结构。这样我就可以通过从上一个到下一个取消引用 NextNode 来删除特定的行。

我有两个问题： 1\. 这是实现我目标的好方法吗？2\. 如何制作一个固定大小的链表（例如不使用malloc）。例如，如果我想拥有最多 10 行，我如何只制作 10 个节点并避免 malloc？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:35:28.120

首先，为什么要固定大小？

很容易制作一个固定大小的链表（例如不使用 malloc），它被称为结构数组:)

如果您可以创建结构，请说“节点”：

```
#define MAXLEN   100
typedef struct node
{
  int nLinenum;
  char Data[MAXLEN];

}; 
```

你可以写：

```
node static_linked_list[10]; 
```

但是您需要编写一些复杂的代码来删除特定的节点。与从链表中删除节点（使用 malloc）相比，这并不简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:54:06.063

以下是最简单的方法：（仅列出结构定义）。

```
 struct word {
        char m_word[MAX_WORD_LENGTH];
    };

    struct line {
        struct word[MAX_WORDS_PER_LINE];
    };

    struct _node {
        struct line m_line;
        struct _node *next;
    }; 
```

使用固定尺寸的 DS 将无法达到您的目的。稍后，您还应该将数组 (m_word & line->word) 替换为链接列表。

# wpf - 如何通过 xaml 和 C# 更改鼠标单击时的字体样式？

> ID：11027106
> 
> 赞同：1
> 
> 时间：2012-06-14T05:24:11.637
> 
> 标签：wpf

我有五个这样的按钮：

```
 <Button Name="btnAssets" Grid.Row="1" Margin="7,1,7,1" Click="btnDrawer_Click" >
                <StackPanel >
                    <StackPanel.Background>
                        <ImageBrush ImageSource="/Test;component/Images/DrawerSlid.png" />
                    </StackPanel.Background>
                    <Image Margin="0,0,0,0" Source="/Test;component/Images/DrawerUpper2.png" />
                    <TextBlock Margin="0,10,0,10" TextWrapping="WrapWithOverflow" TextAlignment="Center">Assets</TextBlock>
                    <Image Margin="0,0,0,0" Source="/Test;component/Images/DrawerSlid2.png" />
                </StackPanel>                    
            </Button> 
```

这些按钮的样式触发器如下：

```
 <Style TargetType="StackPanel">
        <Setter Property= "TextBlock.Foreground" Value="White"/>
        <Setter Property= "TextBlock.FontSize" Value="12"/>
        <Style.Triggers>
           <Trigger Property ="IsMouseOver" Value="True">
               <Setter Property= "TextBlock.Foreground" Value="Yellow"/>
               <Setter Property= "TextBlock.FontSize" Value="13"/>
            </Trigger>
        </Style.Triggers>                       
    </Style> 
```

这些代码工作正常。现在我希望当用户点击任何按钮时，它的前景色和字体大小应该改变。但我找不到任何简单的解决方案。如何通过 xaml 或通过 c# 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:11:01.243

您可以在按钮样式模板中使用触发器“IsPressed”。看到这个[http://geekswithblogs.net/cskardon/archive/2008/06/20/roundedbutton-button-style-wpf.aspx](http://geekswithblogs.net/cskardon/archive/2008/06/20/roundedbutton-button-style-wpf.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:23:33.390

按钮在 WPF 中具有不同的构造方式，因此需要更多的工作来让按钮按您的意愿工作。步骤通常是：

1.  派生自 Decorator 基类，为您自己的按钮创建模板
2.  为 XAML 中的按钮创建自己的控件模板
3.  将按钮连接到您的自定义模板！

这里给出了一篇很好的文章和例子：http: [//www.wiredprairie.us/journal/2006/09/wpf_decorators_build_your_own.html](http://www.wiredprairie.us/journal/2006/09/wpf_decorators_build_your_own.html)

# c# - 使用 ninject.extensions.factory - 根类会发生什么？

> ID：11027108
> 
> 赞同：2
> 
> 时间：2012-06-14T05:24:29.807
> 
> 标签：c#, dependency-injection, ninject

我是使用依赖注入的新手，正在尝试使用 Ninject。当我在探索 Ninject Factory 的功能时，有一件事情让我很困惑。

从[https://github.com/ninject/ninject.extensions.factory/wiki/Factory-interface](https://github.com/ninject/ninject.extensions.factory/wiki/Factory-interface)，

```
public class Foo
{
    readonly IBarFactory barFactory;

    public Foo(IBarFactory barFactory)
    {
        this.barFactory = barFactory;
    }

    public void Do()
    {
        var bar = this.barFactory.CreateBar();
        ...
    }
}

public interface IBarFactory
{
    Bar CreateBar();
} 
```

我们可以使用创建 Bar

```
 var bar = this.barFactory.CreateBar(); 
```

但是我们应该采取什么方法来创建 Foo 的实例呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T09:04:35.027

您需要在应用程序`kernel.Get<>()`的[组合根目录](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)中执行一项。

# mysql - MySql JOIN 日期太长

> ID：11027112
> 
> 赞同：1
> 
> 时间：2012-06-14T05:25:06.410
> 
> 标签：mysql

我正在运行两个非常简单的查询，如下所示。它们都包含我需要的日期和一条信息。我想在我的查询中将它们作为单个表返回。这两个查询运行大约需要 0.03 秒。每当我尝试加入他们时，他们都会永远。有人可以帮我解决这个语法吗？

```
SELECT date(date) AS Day, sum(total) / 3600.0 AS Hours 
FROM events.Site_Total 
WHERE date > '2012-01-01' 
GROUP BY Day; 

SELECT date(sdate) AS Day, sum(arg) AS Count
FROM events.uptimer 
WHERE state > '2012-01-01' 
GROUP BY Day; 
```

我知道这很简单，但是不会永远运行的正确 JOIN 语法让我望而却步。请注意，每天有多个不同时间的整体，这就是我做日期（日期）事情并按此分组的原因。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:32:40.510

希望这会奏效::

```
Select site.Day, site.Hours, uptimer.Day, uptimer.Count
from 
(SELECT date(date) AS Day, sum(total) / 3600.0 AS Hours 
FROM events.Site_Total 
WHERE DATE(date) > '2012-01-01' 
GROUP BY Day) as site 
inner join
(
SELECT date(sdate) AS Day, sum(arg) AS Count
FROM events.uptimer 
WHERE DATE(sdate)> '2012-01-01' 
GROUP BY Day) as uptimer 
on (site.Day=uptimer.Day) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:29:41.150

至少，您需要确保在要加入的列上为每个表添加索引。因此，如果您要加入*date*列，请确保每个表在*date*上有一个索引。

要考虑的第二件事是索引是否是所谓的查询*覆盖*。这意味着，索引包含（作为包含的列）完成查询所需的列。在您列出的那些中，这些列将是“Site_Total”表的*总计*，以及“events.uptimer”表的*arg*和*state*。

# testing - 如何使用 selenium RC 上传文件（使用 raduploader）？

> ID：11027114
> 
> 赞同：0
> 
> 时间：2012-06-14T05:25:25.940
> 
> 标签：testing, selenium, selenium-rc, radupload

我正在尝试使用`selenium`. 但问题是我的上传字段不像

```
<input type="file".....> [where i can directly say "selenium.type("xpath ","file path") ] 
```

但是在这里，为了上传文件，我们使用的是 Rad Uploader，即使我点击它，它也没有在 selenium IDE 中记录任何内容`uploader`。

有人知道如何使用**Raduploader**上传**文件**吗？**`Selenium`**

 **```
<object height="22px" type="application/x-silverlight-2" data="data:application/x-silverlight-2," 
id="ctl00_ctl00_ContentPlaceHolder1_mainTabContainer_thirdTab_ChildPlaceHolderCa‌​mpVolunteers_fileUploadVolunteersilverlight04"
class="ruObject" style="width: 100%;"> 
```

**这是上传字段**代码的一部分

 **谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:05:11.423

~~由于[Rad Uploader](http://www.radinks.com/upload/)基本上是一个 Java Applet，您可以使用[LiveConnect](http://en.wikipedia.org/wiki/LiveConnect)与之交互！~~

~~甚至还有一个用于它和 Selenium 的工具（虽然我没有使用它，所以我不知道它是否运作良好）： http: [//fest.codehaus.org/Selenium](http://fest.codehaus.org/Selenium)~~

如果它不起作用，那么您可能需要使用不同的自动化库来上传文件，因为 Selenium 既不能与 Java 小程序一起使用，也不能在浏览器之外工作。可能的解决方案包括将文件从窗口外拖放或 ( `Ctrl+C`+ `Ctrl+V`ing) 到您的上传器，或盲目单击“浏览”按钮...

* * *

## 编辑

我显然看错了产品，因为 OP 的代码显示它实际上是 Silverlight 元素，而不是 Java 小程序。

但是 - 知道有一个用于 Java 小程序的工具，我挖掘并找到了这些：

[有一个将 Selenium RC 与 Silverlight 一起使用的工具！](http://code.google.com/p/silverlight-selenium/)不知道它实际上有多好，但你可以试一试。是的，我知道它只是 Selenium RC，但你可以试试[`WebDriverBackedSelenium`](http://seleniumhq.org/docs/03_webdriver.html#webdriver-backed-selenium-rc)......

Scott Hanselman 的博客（非常易读！） - “滥用” Silverlight 可以运行`Scriptable`方法。它是为 Selenium IDE 编写的，但同样适用于`WebDriver`.

[Silverlight 的测试框架。](http://archive.msdn.microsoft.com/silverlightut)由微软。Selenium 用于网页，尝试使用 Silverlight 魔法。

* * *

**编辑2：**

总是有我前面提到的选项。由于上传的东西是 no `input`，而是一个 Silverlight 对象，并且没有用于 WebDriver 的 API 允许您使用浏览器对话框（或 Silverlight 对象），您可以试试这个：

单击 Silverlight 元素后，将弹出一个您无法控制的窗口。在我所知道的浏览器和操作系统中，您几乎可以假设在打开窗口后，光标在`File name`输入中。请确保这个假设在你的情况下也是正确的。

如果没有，您可以尝试按 跳到它`Alt + N`，至少在 Windows 上...

*（Java 代码如下！我真的不知道 C#。不过，它在 Java 中工作。C# 的类与 Java 的类是类似`Robot`的[`SendKeys`](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.aspx)）*

如果是，您可以使用[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)该类“盲目地”输入路径。在您的情况下，这将是一种方式：

```
driver.findElement(By.id("SWFUpload_0")).click();
Robot r = new Robot();
r.keyPress(KeyEvent.VK_C);        // C
r.keyRelease(KeyEvent.VK_C);
r.keyPress(KeyEvent.VK_COLON);    // : (colon)
r.keyRelease(KeyEvent.VK_COLON);
r.keyPress(KeyEvent.VK_SLASH);    // / (slash)
r.keyRelease(KeyEvent.VK_SLASH);
// etc. for the whole file path

r.keyPress(KeyEvent.VK_ENTER);    // confirm by pressing Enter in the end
r.keyRelease(KeyEvent.VK_ENTER); 
```

这很糟糕，但它应该工作。请注意，您可能需要这些：[如何让 Robot 键入 `:`？](https://stackoverflow.com/questions/5736129/how-can-i-make-robot-type-a)并将[字符串转换为 KeyEvents](https://stackoverflow.com/questions/1248510/convert-string-to-keyevents)****

# c# - 为什么 ASCII.GetBytes 返回错误的字节

> ID：11027119
> 
> 赞同：2
> 
> 时间：2012-06-14T05:25:40.117
> 
> 标签：c#, xml, encoding, ascii

我创建了一个类并将其转换为 xml。

问题是，当我将类 xml 字符串转换为字节
时，`ASCII.GetBytes`返回一个字节数组，
在`ascArray`

它总是一个？字符，所以 xml 像这样开始

```
?<?xml version="1.0" encoding="utf-8"?> 
```

为什么会这样？

这是代码：

```
 WorkItem p = new WorkItem();

  // Fill the class with whatever need to be sent to client
  OneItem posts1 = new OneItem();
  posts1.id = "id 1";
  posts1.username = "hasse";
  posts1.message = "hej again";
  posts1.time = "time1";
  p.setPost(posts1);

  OneItem posts2 = new OneItem();
  posts2.id = "id 2";
  posts2.username = "bella";
  posts2.message = "hej again again";
  posts2.time = "time2";
  p.setPost(posts2);

  // convert the class WorkItem to xml
  MemoryStream memoryStream = new MemoryStream();
  XmlSerializer xs = new XmlSerializer(typeof(WorkItem));
  XmlTextWriter xmlTextWriter = new XmlTextWriter(memoryStream, Encoding.UTF8);
  xs.Serialize(xmlTextWriter, p);

  // send the xml version of WorkItem to client
  byte[] data = memoryStream.ToArray();
  clientStream.Write(data, 0, data.Length);
  Console.WriteLine(" send.." + data);
  clientStream.Close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T05:47:15.770

我强烈怀疑数据以[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)开头，不能用 ASCII 表示。

不清楚你为什么要做你正在做的事情，尤其是在`MemoryStream`. 为什么要创建一个 UTF-8 编码的字节数组，然后将其解码为字符串（我们不知道是什么`UTF8ByteArrayToString`），然后将其转换*回*字节数组？为什么不直接将字节数组写入客户端呢？如果您需要将数据作为字符串，我会使用一个子类`StringWriter`来宣传它使用 UTF-8 作为编码。如果您*不需要*它作为字符串，只需坚持字节数组即可。

请注意，即使除了第一个字符之外，您已经获得了以 UTF-8 编码的 XML 文档这一事实意味着字符串中很可能还有其他非 ASCII 字符。你为什么在这里使用ASCII？

编辑：为了清楚起见，您从根本上应用了有损转换，*并且*不必要地进行了操作。即使你想要数据的本地副本，你也应该有这样的东西：

```
// Removed bad try/catch block - don't just catch Exception, and don't
// just swallow exceptions
MemoryStream memoryStream = new MemoryStream();
XmlSerializer xs = new XmlSerializer(typeof(WorkItem));
XmlTextWriter xmlTextWriter = new XmlTextWriter(memoryStream, Encoding.UTF8);
xs.Serialize(xmlTextWriter, p);

// Removed pointless conversion to/from string
// Removed pointless BinaryWriter (just use the stream)

// An alternative would be memoryStream.WriteTo(clientStream);
byte[] data = memoryStream.ToArray();
clientStream.Write(data, 0, data.Length);
Console.WriteLine(" send.." + data);

// Removed Close calls - you should use "using" statements to dispose of
// streams automatically. 
```

# c# - Vs2010构建的clr项目中的运行时错误

> ID：11027120
> 
> 赞同：1
> 
> 时间：2012-06-14T05:25:52.897
> 
> 标签：c#, .net, visual-studio-2010, command-line-interface

在我的 clr 项目中，当我使用 gcnew 创建托管类的实例时，它显示错误

未知模块中发生了“System.IO.FileNotFoundException”类型的未处理异常。

附加信息：无法加载文件或程序集“Test，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。

Test.dll 作为参考给出，也存在于指定路径中。原因是什么？

下面是代码片段

```
using namespace Test;<br>
int _tmain(int argc, _TCHAR* argv[])<br>
 {
int a = 10;<br>
Run^ aa = gcnew Run();<br>
aa->Execute();<br>
return 0;
} 
```

# wordpress - 页面模板在 Wordpress 3.4 中消失了

> ID：11027121
> 
> 赞同：6
> 
> 时间：2012-06-14T05:25:54.350
> 
> 标签：wordpress, wordpress-theming

我创建了一个使用多个自定义页面模板的 Wordpress 主题。根据文档[http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)我只需在模板文件顶部设置注释即可完成此操作：

```
/* Template Name: MyCustomTemplate */ 
```

只要我记得，它就一直很好用（这不是我第一次使用自定义页面模板）。今天我们更新到 Wodrpress 3.4，突然选择自定义模板的选项从管理员中消失了（它曾经是右侧“页面属性”框中的下拉菜单）。但是，如果您在页面列表中使用“快速编辑”，“模板”下拉菜单仍然可见，但您只能选择“默认模板” - 我设置的自定义模板都没有。

根据这篇博文：http: [//nacin.com/2012/03/29/page-templates-in-subdirectories-new-in-wordpress-3-4/](http://nacin.com/2012/03/29/page-templates-in-subdirectories-new-in-wordpress-3-4/) WP 3.4 增加了对子内自定义页面模板的支持-directory，但不清楚该目录是否需要命名为特殊名称，或者您是否仍需要文件顶部的“模板名称”注释。我尝试创建一个“页面”目录并首先在其中放入一个空的 .php 文件，但什么也没做。然后我尝试将我的一个自定义页面模板（带有“模板名称”-注释）放在那里，但这也无济于事。

值得注意的是，已经分配使用自定义页面模板的页面仍然使用该模板呈现 - 即使它在“快速编辑”中显示“默认模板”并且下拉列表中没有其他可用模板。

在互联网上几乎找不到任何东西，但我希望你们中的一个人会知道发生了什么。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T07:53:45.420

好吧，我们想通了。显然，从 3.4 开始，“模板名称”-注释需要如下所示：

```
/*
    Template Name: MyCustomTemplate
*/ 
```

如果它看起来像这样，它将不会显示在管理员中：

```
/* Template Name: MyCustomTemplate */ 
```

希望这对其他人有帮助。

编辑：“Wordpress”给我们发电子邮件说这是一个错误，将在下一个版本中修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T21:38:03.840

呼，大项目上线，吓到一分钟！我不确定子目录模板，但正如最后一个人评论的那样，在模板名称之前和之后有一个换行符（在自己的行上有 /* 和 */ ）就可以了。

在我工作的网站上，有 4 个用于不同社区的主要模板，包括不同的标题和导航。当自定义模板中断时，所发生的只是选择特定模板的下拉菜单消失了。网站功能没有受到干扰，所有页面都继续使用正确的模板。在 Dreamweaver 中更新模板文件修复了下拉选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T20:27:56.987

在 wordpress 3.4.2 中，我的主题中的以下代码破坏了模板选择框：

```
add_filter('stylesheet', 'theme_stylesheet');
function theme_stylesheet() {
    return 'img';
} 
```

# selenium - 如何使用 selenium IDE 将数据加载/写入新文件？

> ID：11027122
> 
> 赞同：3
> 
> 时间：2012-06-14T05:25:57.700
> 
> 标签：selenium, selenium-ide

我正在使用 selenium IDE 来记录和重放一些测试用例。在此期间，我将一些值存储在变量中。现在我必须将这些变量的值加载/写入新文件。我该怎么做？可能吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T07:35:43.407

使用 Selenium IDE 是不可能的，但您可以使用 Selenium RC 或 Webdriver（Junit 或 Nunit）进行存储。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-11T14:15:42.243

这绝对是可能的。您只需要使用 mozilla (firefox) 插件 API [https://developer.mozilla.org/en-US/Add-ons](https://developer.mozilla.org/en-US/Add-ons)创建一些 javascript 函数，将此函数保存在 selenium 核心扩展文件[http://www.seleniumhq.org /docs/08_user_extensions.jsp](http://www.seleniumhq.org/docs/08_user_extensions.jsp)并将这个扩展添加到 Selenium IDE 中。

编写文本文件的示例函数：

```
 // ==================== File Writer ====================
Selenium.prototype.doWriteData = function(textToSave, location)
{   
    var data = textToSave;
    var file = Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);
    file.initWithPath(location);
    var foStream = Components.classes["@mozilla.org/network/file-output-stream;1"].createInstance(Components.interfaces.nsIFileOutputStream);
    foStream.init(file, 0x02 | 0x08 | 0x20, 0666, 0);
    var converter = Components.classes["@mozilla.org/intl/converter-output-stream;1"].createInstance(Components.interfaces.nsIConverterOutputStream);
    converter.init(foStream, "UTF-8", 0, 0);
    converter.writeString(data);
    converter.close();
} 
```

读取也很简单，只需在此处添加另一个函数，例如“doReadData” 更多信息[https://developer.mozilla.org/en-US/Add-ons/Code_snippets/File_I_O](https://developer.mozilla.org/en-US/Add-ons/Code_snippets/File_I_O)

要将此脚本添加到 Selenium-IDE，请按照以下说明操作：

> 1.  创建您的用户扩展并将其保存为 user-extensions.js。虽然这个名称在技术上不是必需的，但保持一致是一种很好的做法。
> 2.  打开 Firefox 并打开 Selenium-IDE。
> 3.  点击工具，选项
> 4.  在 Selenium Core Extensions 中单击 Browse 并找到用户扩展。.js 文件。单击确定。
> 5.  您的用户扩展将不会被加载，您必须关闭并重新启动 Selenium-IDE。
> 6.  在您的空测试中，创建一个新命令，您的用户扩展现在应该是命令下拉列表中的一个选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-10T13:13:49.123

使用 selenium IDE 是不可能的，您需要使用 selenium webdriver，您可以在其中编写语言来对文件进行读/写操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T11:58:48.760

我不知道 selenium IDE 是否足以实现您想要做的事情，但是如果您可以将记录的测试用例导出到任何语言（如 java），然后您可以轻松修改导出的代码以将您存储的变量写入任何文件使用诸如 java 之类的语言的内置功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T09:03:06.907

尝试使用 storeEval 命令，它会评估 java 脚本片段并参考[http://www.tek-tips.com/viewthread.cfm?qid=1171273](http://www.tek-tips.com/viewthread.cfm?qid=1171273)中发布的提示。

让我知道结果。-谢谢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-23T14:29:36.897

在这里您可以找到如何从 CSV 文件中读取变量的答案（您应该在 selenium IDE 选项中将 .js 文件作为扩展名，并且在该页面上也是如何使用它的示例）

[http://openselenium.com/?p=19](http://openselenium.com/?p=19)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-08T10:22:12.860

您可以为此使用“文件记录”，试试下面的插件

[https://addons.mozilla.org/en-US/firefox/addon/file-logging-selenium-ide/](https://addons.mozilla.org/en-US/firefox/addon/file-logging-selenium-ide/)

脚步：

1.  安装插件
2.  将日志级别设置为“信息”
3.  在 IDE 中导航到“选项 - > FileLogging”并提供路径 ( `D:\Users\jmatthew\Desktop\Selenium\Log1.csv`)
4.  使用命令`storeText | id=abcd.aa | value`
5.  使用命令`echo | ${value}`
6.  `VLOOKUP`使用匹配结果读取 CSV 文件包含“回声”

# php - Codeigniter URI 页面重定向

> ID：11027124
> 
> 赞同：0
> 
> 时间：2012-06-14T05:26:03.507
> 
> 标签：php, codeigniter, redirect, controller, uri

我目前的 URI 有问题

示例我有一个名为`add`- users/add 的函数，如果我的输入表单有错误，它会在 users/add 页面上显示错误，但如果一切正常，它会返回用户页面并显示成功，但 uri 仍然存在 /用户/添加，我必须重新导航到用户页面。

**更新：**

**添加：**

```
 $data['message'] = '<div class="alert alert-success"><strong>Thank You</strong> Your User Has Been Added</div>';
   $this->session->set_userdata('message', $data['message']);
   redirect(site_url('dashboard/users')); 
```

**用户：**

```
$message = $this->session->userdata('message');

        if($message === FALSE)
        {
            $message='';
        }else{
            $this->session->unset_userdata('message');
        } 
```

**原来的：**

**控制器：**

```
public function add()
        {
            $this->form_validation->set_rules('userFirstName','First Name', 'required|trim|max_length[99]|xss_clean');
            $this->form_validation->set_rules('userLastName','Last Name', 'required|trim|max_length[99]|xss_clean');
    $this->form_validation->set_rules('userEmail','E-Mail', 'required|valid_email|trim|max_length[99]|xss_clean|is_unique[users.email]');
            $this->form_validation->set_rules('userPassword','Password', 'required|trim|max_length[99]|xss_clean');

            if($this->form_validation->run() === TRUE)
                {
                    $userData = array(
                        'fName' => $this->input->post('userFirstName', TRUE),
                        'lName' => $this->input->post('userLastName', TRUE),
                        'email' => $this->input->post('userEmail', TRUE),
                        'password' => sha1($this->input->post('userPassword', TRUE))
                    );  

                    $this->db->escape($userData);
                    $this->user_model->addUser($userData);

                    $data['contentMangement'] = $this->options_model->systemOptions();
                    $data['pageTitle'] = 'Add User';
                    $data['message'] = '<div class="alert alert-success"><strong>Thank You</strong> Your User Has Been Added</div>';
                    $this->load->view('_assets/dashHeader', $data);
                    $this->load->view('dashboard/users', $data);
                    $this->load->view('_assets/footer');

                }elseif($this->form_validation->run() === FALSE)
                {
                    $data['contentMangement'] = $this->options_model->systemOptions();
                    $data['pageTitle'] = 'Add User';
                    $data['message'] = validation_errors('<div class="alert alert-error">', '</div>'); 
                    $this->load->view('_assets/dashHeader', $data);
                    $this->load->view('dashboard/addUser', $data);
                    $this->load->view('_assets/footer');
                }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T05:35:14.633

发生这种情况是因为您没有从当前页面重定向。您只是从 加载“用户”视图`users/add`。

可以这样想：您所在的页面是`users/add`. 此页面显示的内容取决于您加载的视图。所以，即使你加载了`user`视图，你仍然在 page `users/add`。

如果你想重定向，而不是

```
$this->load->view('dashboard/users',$data); 
```

You need to do

```
redirect(site_url('users')); //or whatever your controller is called 
```

However, in the latter case, you cannot pass data as you do when you load a view. If you want to retain data after a redirect, you will need to store it in session.

So, in your above code, where you create $data['message'], add it to the session:

```
$this->session->set_userdata('message',$data['message']); 
```

When you redirect, at the other controller, retrieve the message, and remove it from session:

```
$message = $this->session->userdata('message');

if ($message === FALSE) {
   // message was not present in session
   $message = '';
} else {
    $this->session->unset_userdata('message');
} 
```

**EDIT**

In your edit, in the `users` controller, you are extracting the message from session. But, it's not available to the view. You still need to pass it on.

```
$message = $this->session->userdata('message');

if($message === FALSE)
{
    $message='';
} else {
    $this->session->unset_userdata('message');
}

//at this point, message is only available to the controller
// lets send it to the view

$data['message'] = $message;
$this->load->view('yourView',$data); 
```

# java - 如何使用回调函数避免 Java 线程中的忙循环

> ID：11027129
> 
> 赞同：5
> 
> 时间：2012-06-14T05:26:22.443
> 
> 标签：java, multithreading, callback

我试图弄清楚如何消除我在 Java 中拥有的线程中的繁忙循环。该线程除了等待来自 Listener 类的回调之外什么都不做。线程类看起来像这样：

```
class MyThread implements Runnable, MessageListener{
  private Listen Listener;

  public MyThread(){
    Listener = new Listener(this);
  }

  public void run(){
    while(true){}
  }

  public void messageReceived(Message m){
    //do stuff
  }
} 
```

我试图使这段代码尽可能简单。这个想法是侦听器正在等待从串行端口接收一些数据，当接收到消息时，线程将对它进行一些处理。我更喜欢使用一些同步变量，例如 Message 的 BlockingQueue，但我无法修改 Listener 代码。当然，问题在于运行循环会占用处理器周期。我的问题：

如果我在运行循环中等待或休眠，函数调用是否仍会按预期工作？（我不确定如何测试它是否 100% 有效）。

有没有更好的方法来完全避免这个循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:31:58.370

仅根据您发布的内容，似乎有人误解了线程是什么以及它是如何工作的。如果 while(true){} 内确实没有任何内容，并且不是为了简洁而将其剪掉，那么处理消息实际上不会在该线程上发生。

代码不会*仅仅*因为方法是在 runnable 的实现上定义的，就“在线程上”运行。

当您的`messageReceived(Message m)`方法被调用时，该方法的主体在调用线程中执行。它不会仅仅因为在那里被定义而被“移交”到这个线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T05:36:01.183

做这样的事情

```
class MyThread implements Runnable, MessageListener{
          private Listen Listener;
          private Object lock = new Object();
      public MyThread(){
        Listener = new Listener(this);
      }

      public void run(){
        while(true){
            synchronized (lock) {
                try{
                    lock.wait();
                    // use the updated status
                }catch (Exception e) {
                    e.printStackTrace()
                }
            }
        }
      }

      public void messageReceived(Message m){
          synchronized (lock) {
                try{
                    // Do something with the message here like update some status
                    lock.notify();                      
                }catch (Exception e) {
                    e.printStackTrace()
                }

      }
    } 
```

一旦你得到事件，你更新一些状态/存储消息并释放通知线程。然后从你的线程处理事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T07:23:19.443

如果无事可做，则您的线程不需要存在。

```
class AsyncMessageListener implements MessageListener{
    private final Listener listener;
    private final ExecutorService services = Executors.newSingleThreadExecutor();

    public MyThread(){
        listener = new Listener(this);
    }

    public void messageReceived(final Message m){
        services.submit(new Runnable() {
            @Override
            public void run() {
                // process message m
            }
        });
    }
} 
```

# serialization - oozie 上的 Avro Map-Reduce

> ID：11027131
> 
> 赞同：1
> 
> 时间：2012-06-14T05:26:38.563
> 
> 标签：serialization, hadoop, mapreduce, avro, oozie

我一直在尝试在 oozie 上运行 Avro map-reduce。我在 workflow.xml 中指定了 mapper 和 reducer 类，并提供了其他配置。但它给出了一个

```
java.lang.RunTime Exception - class mr.sales.avro.etl.SalesMapper not org.apache.hadoop.mapred.Mapper 
```

直接在 hadoop 集群（而不是通过 oozie）上运行时，相同的作业会完成并提供所需的输出。因此，我似乎可能缺少一些 oozie 配置。我从异常中猜想的是，oozie 要求映射器是一个子类，`org.apache.hadoop.mapred.Mapper`但 Avro 映射器具有不同的签名——它们扩展了 org.apache.avro.mapred.AvroMapper，这可能是错误的原因。

所以我的问题是如何配置 oozie 工作流/属性文件以允许它运行 Avro map-reduce 作业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:26:44.877

使用 AVRO，您需要配置一些额外的属性：

*   `org.apache.avro.mapred.HadoopMapper`是您需要设置的实际映射器类（这实现了 Mapper 接口）
*   `avro.mapper`属性应该命名你的`SalesMapper`类

组合器和减速器还有其他属性 - 检查 AvroJob 源和实用程序方法。

另一种方法是检查您手动提交的作业中的 job.xml，并将相关配置属性复制到您的 oozie workflow.xml

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T18:30:53.013

这周我也遇到了同样的问题。这是我的 workflow.xml（已修改）：

```
<workflow-app name='sample-wf' xmlns="uri:oozie:workflow:0.2">
<start to='start_here'/>
<action name='start_here'>
    <map-reduce>
        <job-tracker>${jobTracker}</job-tracker>
        <name-node>${nameNode}</name-node>
        <prepare>
            <delete path="${nameNode}/user/${wf:user()}/output"/>
        </prepare>
        <configuration>
            <property>
                <name>mapred.input.dir</name>
                <value>/user/${wf:user()}/input</value>
            </property>
            <property>
                <name>mapred.output.dir</name>
                <value>/user/${wf:user()}/output</value>
            </property>
            <property>
                <name>mapred.mapper.class</name>
                <value>org.apache.avro.mapred.HadoopMapper</value>
            </property>
            <property>
                <name>mapred.reducer.class</name>
                <value>org.apache.avro.mapred.HadoopReducer</value>
            </property>
            <property>
                <name>avro.mapper</name>
                <value>package.for.my.Mapper</value>
            </property>
            <property>
                <name>avro.reducer</name>
                <value>package.for.my.Reducer</value>
            </property>
            <property>
                <name>mapred.input.format.class</name>
                <value>org.apache.avro.mapred.AvroUtf8InputFormat</value>
            </property>
            <property>
                <name>mapred.output.format.class</name>
                <value>org.apache.avro.mapred.AvroOutputFormat</value>
            </property>
            <property>
                <name>mapred.output.key.class</name>
                <value>org.apache.avro.mapred.AvroWrapper</value>
            </property>
            <property>
                <name>mapred.mapoutput.key.class</name>
                <value>org.apache.avro.mapred.AvroKey</value>
            </property>
            <property>
                <name>mapred.mapoutput.value.class</name>
                <value>org.apache.avro.mapred.AvroValue</value>
            </property>
            <property>
                <name>avro.map.output.schema</name>
                <value>{put your schema here from job.xml via manual run}</value>
            </property>
            <property>
                <name>avro.input.schema</name>
                <value>"string"</value>
            </property>
            <property>
                <name>avro.output.schema</name>
                <value>{put your schema here from job.xml via manual run}</value>
            </property>
            <property>
                <name>mapred.output.key.comparator.class</name>
                <value>org.apache.avro.mapred.AvroKeyComparator</value>
            </property>
            <property>
                <name>io.serializations</name>
                <value>org.apache.hadoop.io.serializer.WritableSerialization,org.apache.avro.mapred.AvroSerialization</value>
            </property>
        </configuration>
    </map-reduce>
    <ok to='end'/>
    <error to='fail'/>
</action>
<kill name='fail'>
    <message>MapReduce failed, error message[$sf:errorMessage(sf:lastErrorNode())}]</message>
</kill>
<end name='end'/> 
```

您可能需要根据 map-reduce 作业的输入和输出对其进行更多修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-17T07:43:22.190

你也可以发布你的映射器和减速器类吗？我的 oozie 工作流程运行良好，但 o/p 文件不是 .avro 文件。这是我的工作流程：

```
<workflow-app name='sample-wf' xmlns="uri:oozie:workflow:0.2">
<start to='start_here'/>
<action name='start_here'>
    <map-reduce>
        <job-tracker>${jobTracker}</job-tracker>
        <name-node>${nameNode}</name-node>
        <prepare>
            <delete path="${nameNode}/user/hadoop/${workFlowRoot}/final-output-data"/>
        </prepare>
        <configuration>

            <property>
                <name>mapred.job.queue.name</name>
                <value>${queueName}</value>
            </property>
            <property>
                  <name>mapred.reducer.new-api</name>
                  <value>true</value>
                </property>
                <property>
                  <name>mapred.mapper.new-api</name>
                  <value>true</value>
                </property>
            <property>
                <name>mapred.input.dir</name>
                <value>/user/hadoop/${workFlowRoot}/input-data</value>
            </property>
            <property>
                <name>mapred.output.dir</name>
                <value>/user/hadoop/${workFlowRoot}/final-output-data</value>
            </property>

            <property>
                <name>mapreduce.mapper.class</name>
                <value>org.apache.avro.mapred.HadoopMapper</value>
            </property>
            <property>
                <name>mapreduce.reducer.class</name>
                <value>org.apache.avro.mapred.HadoopReducer</value>
            </property>
            <property>
                <name>avro.mapper</name>
                <value>com.flipkart.flap.data.batch.mapred.TestAvro$CFDetectionMapper</value>
            </property>
            <property>
                <name>avro.reducer</name>
                <value>com.flipkart.flap.data.batch.mapred.TestAvro$CFDetectionReducer</value>
            </property>
            <property>
                <name>mapreduce.input.format.class</name>
                <value>org.apache.avro.mapreduce.AvroKeyInputFormat</value>
            </property>
            <property>
                <name>avro.schema.input.key</name>
                <value>{... schema ...}</value>
            </property>

            <property>
                <name>mapreduce.mapoutput.key.class</name>
                <value>org.apache.hadoop.io.AvroKey</value>
            </property>
            <property>
                <name>avro.map.output.schema.key</name>
                <value>{... schema ...}</value>
            </property>

            <property>
                <name>mapreduce.mapoutput.value.class</name>
                <value>org.apache.hadoop.io.Text</value>
            </property>
             <property>
                <name>mapreduce.output.format.class</name>
                <value>org.apache.avro.mapred.AvroKeyValueOutputFormat</value>
            </property>
            <property>
                <name>mapreduce.output.key.class</name>
                <value>org.apache.avro.mapred.AvroKey</value>
            </property>

            <property>
                <name>mapreduce.output.value.class</name>
                <value>org.apache.avro.mapred.AvroValue</value>
            </property>

            <property>
                <name>avro.schema.output.key</name>
                <value>{ ....   schema .... }</value>
            </property>
             <property>
                <name>avro.schema.output.value</name>
                <value>"string"</value>
            </property>
            <property>
                <name>mapreduce.output.key.comparator.class</name>
                <value>org.apache.avro.mapred.AvroKeyComparator</value>
            </property>
            <property>
                <name>io.serializations</name>
                <value>org.apache.hadoop.io.serializer.WritableSerialization,org.apache.avro.mapred.AvroSerialization
                </value>
            </property>
        </configuration>
    </map-reduce>
    <ok to='end'/>
    <error to='fail'/>
</action>
<kill name='fail'>
    <message>MapReduce failed, error message[$sf:errorMessage(sf:lastErrorNode())}]</message>
</kill>
<end name='end'/>
</workflow-app>
```

我的映射器和减速器定义如下：

```
public static class CFDetectionMapper extends
                Mapper<AvroKey<AdClickFraudSignalsEntity>, NullWritable, AvroKey<AdClickFraudSignalsEntity>, Text> {}

 public static class CFDetectionReducer extends
               Reducer<AvroKey<AdClickFraudSignalsEntity>, Text, AvroKey<AdClickFraudSignalsEntity>, AvroValue<CharSequence>>
```

# c# - 对匹配指定绑定约束的类型调用构造函数引发异常

> ID：11027132
> 
> 赞同：7
> 
> 时间：2012-06-14T05:27:01.617
> 
> 标签：c#, wpf, xaml, exception-handling, ado.net

我正在尝试制作一个程序来删除由 excel 文件填充的 DataSet 中的列。它删除列的方式是将每列中的标题与每行中的第一个元素进行比较，并删除未出现在行中的任何字符串的列。我的问题是我遇到了一个我无法理解的奇怪错误。它说：

> 对匹配指定绑定约束的“Excel_Retriever.MainWindow”类型的构造函数的调用引发了异常。行号“3”和行位置“9”。

我是 C# 和 XAML 的新手，非常感谢解决此错误的任何帮助。谢谢！这是我的代码：

XAML：

```
<Window x:Class="Excel_Retriever.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid Name="ExcelGrid">
        <DataGrid ItemsSource="{Binding}" AutoGenerateColumns="True" Height="289"        HorizontalAlignment="Left" Margin="10,10,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="481" />
    </Grid>
</Window> 
```

C＃：

```
namespace Excel_Retriever
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            DataSet excel = GetDataTableFromExcel("C:\\Users\\Sweet Lou\\Desktop\\Adjusted research info.xlsx", "Research");
            //dataGrid1.DataContext = excel.Tables[0];
            DataSet ignoreds = Ignore_Names(excel);
            dataGrid1.DataContext = ignoreds.Tables[0];
        }

        public DataSet GetDataTableFromExcel(string FilePath, string strTableName)
        {
            try
            {
                OleDbConnection con = new OleDbConnection("Provider= Microsoft.ACE.OLEDB.12.0;Data Source=" + FilePath + "; Extended Properties=\"Excel 12.0;HDR=YES;\"");
                OleDbDataAdapter da = new OleDbDataAdapter("select * from [Sheet1$]", con);
                DataSet ds = new DataSet();
                da.Fill(ds);
                return ds;
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
            return null;
        }

        public DataSet Ignore_Names(DataSet sheet)
        {
            DataSet ignoreds = sheet;
            DataColumn columnNames = sheet.Tables[0].Columns["Name"]; //first column with names
            //ignoreds.Tables[0].Columns.Add(columnNames);
            int j = 1;
            for (int i = 0; i < 15; i++) //change 15 to variable
            {
                while (String.Compare(columnNames.Table.Rows[i].ToString(), sheet.Tables[0].Columns[j].ColumnName, true) != 0)
                {
                    ignoreds.Tables[0].Columns.RemoveAt(j);
                    j++;
                }
                j++;
            }
            return ignoreds;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T06:22:27.083

您不需要将 strTableName 传递给您的方法，因为您从不使用它。

如果您对字符串使用 @"" ，则不需要转义：@"c:\users....";

你得到了一个例外，因为你试图核对实际上并不存在的行。如果我正确理解您的目标，这就是您的方法应该是什么样子。

```
 public static void Ignore_Names(DataSet sheet) {
        var table = sheet.Tables[0];
        var columns = table.Columns;
        var nameColumn = columns["Name"];

        var names = new List<string>();
        foreach (DataRow row in nameColumn.Table.Rows)
            names.Add(row[0].ToString().ToLower());

        // Work from right to left.  If you delete column 3, is column 4 now 3, or still 4?  This fixes that issue.
        for (int i = columns.Count - 1; i >= 0; i--)
            if (!names.Contains(columns[i].ColumnName.ToLower()))
                columns.RemoveAt(i);
    } 
```

此外，在 MainWindow 构造函数中，您应该在设置 excel 后执行此操作：

```
 Ignore_Names(excel);       
   dataGrid1.ItemsSource = excel.Tables[0].DefaultView; 
```

请注意，我设置的是 ItemsSource，而不是 DataContext，并且我正在传递 DefaultView。您可以从 XAML 中完全删除 ItemsSource 绑定。

您确实应该使用[VSTO](http://msdn.microsoft.com/en-us/library/htx7t4k0.aspx)而不是 DataSet，但这是要学习的另一件事 :)

# .net - 如何确保表单的布局（尤其是字体）符合我的预期？

> ID：11027134
> 
> 赞同：1
> 
> 时间：2012-06-14T05:27:22.337
> 
> 标签：.net, winforms, fonts

我经常会创建一个 winforms 应用程序，当我运行它时一切看起来都很棒。然后我去一个用户的电脑，我看到标签被弄皱了，字体变大了，导致文本被截断等等。这是怎么回事？我怎样才能防止这种情况？

我尤其在较新的 Windows 操作系统（即 Windows 7 等）上看到了这一点。在多个 Windows 操作系统版本上，如何使所有用户的表单看起来相同（或至少好）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:35:05.327

如果由于系统上的字体较大或系统的 DPI 与您的预期不同而导致 UI 变得混乱，您应该做几件事：

*   不要**使用**固定的坐标和大小
*   确实使用停靠和锚定来定位和大小控件
*   使用 AutoSize 根据控件的内容调整控件大小
*   确实用于`Graphics.MeasureString()`计算字符串的大小而不是假设字体大小

**编辑**

当然，也可以分发字体（如果合法）以确保正确/预期的字体可用，但您仍然需要预期各种 DPI 设置。

# php - Firefox 无法邀请，使用 facebook api 在墙上发帖

> ID：11027136
> 
> 赞同：0
> 
> 时间：2012-06-14T05:27:42.023
> 
> 标签：php, facebook, firefox, facebook-graph-api, facebook-javascript-sdk

以下代码在 chrome 和 IE 上完美运行，但当我使用 Firefox 对其进行测试时，它返回“发生错误，请稍后再试”的错误。请问我知道代码中的问题是什么，下面是与Facebook API相关的代码。

```
$user_id = $facebook->getUser();
if ($user_id) {
  try {
    // Fetch the viewer's basic information
    $basic = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    // If the call fails we check if we still have a user. The user will be
    // cleared if the error is because of an invalid accesstoken
    if (!$facebook->getUser()) {
      header('Location: '. AppInfo::getUrl($_SERVER['REQUEST_URI']));
      exit();
    }
  }
if (check_user($user_id,$promo) && check_friend($user_id)>0){ 
    header('Location: Thankyou.php');
}
if (!check_promo()){
    header('Location: Thankyou.php');
}

// Fetch the basic info of the app that they are using
$app_info = $facebook->api('/'. AppInfo::appID());
$app_name = idx($app_info, 'name', '');
?>

<!DOCTYPE html>
<html xmlns:fb="http://ogp.me/ns/fb#" lang="en">
  <head>
    <script type="text/javascript">
      function logResponse(response) {
        if (console && console.log) {
          console.log('The response was', response);
        }
      }

     //Perhaps the problem come from here
      $(function(){
        // Set up so we handle click on the buttons
        $('#postToWall').click(function() {
          FB.ui(
            {
              method : 'feed',
              link   : $(this).attr('data-url')
            },
            function (response) {
              // If response is null the user canceled the dialog
              if (response != null) {
                logResponse(response);
              }
            }
          );
        });

        $('#sendRequest').click(function() {
          FB.ui(
            {
              method  : 'apprequests',
              message : $(this).attr('data-message')
            },
            function (response) {
              // If response is null the user canceled the dialog
              if (response != null) {
                var request_ids = [];
                var friend_ids = [];
                for(i=0; i<response.to.length; i++) {
                    //var temp = response.to[i] + '_' + response.to[i].name;
                    request_ids.push(response.request);
                    friend_ids.push(response.to[i]);
                }
                var requests = request_ids.join(',');
                var friends = friend_ids.join(',');
                $.post('friend_handler.php',{uid: <?php echo $user_id; ?>, fid: friends, rid: requests},function(resp) {
                    });
              }
            }
          );
        });
      });
    </script>

<?php $caption = "Hello";
$description = "Byebye";
?>
<script> 
      FB.init({appId: "<?php echo AppInfo::appID(); ?>", status: true, cookie: true});
      function postToFeed() {
        // calling the API ...
        var obj = {
          method: 'feed',
          link: 'http://apps.facebook.com/mas-amazing-journey/',
          picture: 'http://www.xman.com/content/mas-admin/my/en/site-configuration/homepagethreatre/book/AmazingWorldwideDeals/_jcr_content/contentpar/masimage_9126.img.jpg/1339349457238.jpg',
          name: 'Amazing Journey',
          caption: '<?php echo $caption; ?>',
          description: '<?php echo $description; ?>'
        };
        function callback(response) {
          document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
        }
        FB.ui(obj, callback);
      }
    </script>
    <!--[if IE]>
      <script type="text/javascript">
        var tags = ['header', 'section'];
        while(tags.length)
          document.createElement(tags.pop());
      </script>
    <![endif]-->
    <script src="//connect.facebook.net/en_US/all.js"></script>

  </head>
<body>
<header class="clearfix">
        <div id="fb-root"></div>
            <script type="text/javascript">
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '<?php echo AppInfo::appID(); ?>', // App ID
          channelUrl : '//<?php echo $_SERVER["HTTP_HOST"]; ?>/channel.html', // Channel File
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true // parse XFBML
        });

        // Listen to the auth.login which will be called when the user logs in
        // using the Login button
        FB.Event.subscribe('auth.login', function(response) {
          // We want to reload the page now so PHP can read the cookie that the
          // Javascript SDK sat. But we don't want to use
          // window.location.reload() because if this is in a canvas there was a
          // post made to this page and a reload will trigger a message to the
          // user asking if they want to send data again.
          window.location = window.location;
        });

        FB.Canvas.setAutoGrow();
      };

      // Load the SDK Asynchronously
      (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>
      <?php if (isset($basic)) { ?>
        <p id="picture" style="background-image: url(https://graph.facebook.com/<?php echo he($user_id); ?>/picture?type=normal)"></p>

        <h1>Welcome, <strong><?php echo he(idx($basic, 'name')); ?></strong></h1>
        <p class="tagline">
          Good Luck!
        </br>
        </p>
       <div id="share-app">
<!--          <p>Tools for your to invite your friends and spread your words:</p>-->
          <ul>
            <li>
                <a href="#" class="facebook-button" onclick='postToFeed(); return false;' >
                <span class="plus">Share this on my wall</span>
              </a>
            </li>  
<!--            <li>
              <a href="#" class="facebook-button speech-bubble" id="sendToFriends" data-url="<?php echo AppInfo::getUrl(); ?>">
                <span class="speech-bubble">Share Your Amazing Journey</span>
              </a>
            </li>-->
            <li>
              <a href="//<?php echo $_SERVER["HTTP_HOST"]; ?>/Thankyou.php" class="facebook-button speech-bubble" id="thankyou">
                <span class="speech-bubble">SUBMIT</span>
              </a>
            </li>
          </ul>
            <li>

              <a href="#" class="facebook-button apprequests" id="sendRequest" 
                 data-message="I have just invited you to fly with me">
            <span class="apprequests"><img border="0" class="facebook-button apprequests" id="sendRequest" src="http://i.imgur.com/lRdP3.jpg" style="width: 680px;margin-top:10px;z-index: -9999;"/></span>
                        </a>
            </li>
                      </div>
        <div id="guides"></div>

      <?php } else { ?>
      <section id="get-started">
      <p>Oops, You're out of track... Please reload the page to start over!</p>
      </section>
      <?php } ?>
    </header>
</body>
</html> 
```

Firefox 的 URL 返回错误

> [https://www.facebook.com/dialog/feed?caption=Amazing%20Journeys%20by%20Malaysia%20Airlines&description=Malaysia%20Airlines%20is%20back%20with%20Amazing%20Journeys%20from%20only%20RM272%20from%2011th% 20-%2018th%20June%202012.&display=popup&link=http%3A%2F%2Fwww.malaysiaairlines.com%2Fmy%2Fen%2Fdeals%2Fdeals-of-the-day.html%3Fcid%3D2145&locale=en_US&name=MAS%20Amazing %20Journey%20Deals&next=https%3A%2F%2Fs-static.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D8%23cb%3Df3bcbdb08f0cb22%26origin%3Dhttps%253A%252F%252Fmas-fb.net%252Ff3d2f4375cf26 %26domain%3Dmas-fb.net%26relation%3Dopener%26frame%3Df23819ec6e183c%26result%3D%2522xxRESULTTOKENxx%2522&picture=http%3A%2F%2Fwww.malaysiaairlines。com%2Fcontent%2Fmas-admin%2Fmy%2Fen%2Fsite-configuration%2Fhomepagethreatre%2Fbook%2FAmazingWorldwideDeals%2F_jcr_content%2Fcontentpar%2Fmasimage_9126.img.jpg%2F1339349457238.jpg&sdk=joey](https://www.facebook.com/dialog/feed?caption=Amazing%20Journeys%20by%20Malaysia%20Airlines&description=Malaysia%20Airlines%20is%20back%20with%20Amazing%20Journeys%20from%20only%20RM272%20from%2011th%20-%2018th%20June%202012.&display=popup&link=http%3A%2F%2Fwww.malaysiaairlines.com%2Fmy%2Fen%2Fdeals%2Fdeals-of-the-day.html%3Fcid%3D2145&locale=en_US&name=MAS%20Amazing%20Journey%20Deals&next=https%3A%2F%2Fs-static.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D8%23cb%3Df3bcbdb08f0cb22%26origin%3Dhttps%253A%252F%252Fmas-fb.net%252Ff3d2f4375cf26%26domain%3Dmas-fb.net%26relation%3Dopener%26frame%3Df23819ec6e183c%26result%3D%2522xxRESULTTOKENxx%2522&picture=http%3A%2F%2Fwww.malaysiaairlines.com%2Fcontent%2Fmas-admin%2Fmy%2Fen%2Fsite-configuration%2Fhomepagethreatre%2Fbook%2FAmazingWorldwideDeals%2F_jcr_content%2Fcontentpar%2Fmasimage_9126.img.jpg%2F1339349457238.jpg&sdk=joey)

由 Chrome 返回的 URL 错误

> [https://www.facebook.com/dialog/feed?access_token=AAAFd06xhTEYBAANOHKdNqP9q7KudRVNgYqpptGHgkVeXwaRBjqIzOP99O06h40ionI8GugH6ENBkTyAwj6l87Eb3zJZAi1vHNQI0o7gWZC9pfysDk9&api_key=384638688250950&app_id=384638688250950&caption=Amazing%20Journeys%20by%20Malaysia%20Airlines&channel=https%3A%2F%2Fs-static.ak.facebook.com%2Fconnect% 2Fxd_arbiter.php%3Fversion%3D8%23cb%3Df1ca796e2c%26origin%3Dhttps%253A%252F%252Fmas-fb.net%252Ff356d6e91%26domain%3Dmas-fb.net%26relation%3Dparent.parent&channel_url=https%3A%2F%2Fs- static.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D8%23cb%3Df1bb0a298c%26origin%3Dhttps%253A%252F%252Fmas-fb.net%252Ff356d6e91%26domain%3Dmas-fb.net%26relation%3Dparent。 parent&description=Malaysia%20Airlines%20is%20back%20with%20Amazing%20Journeys%20from%20only%20RM272%20from%2011th%20-%2018th%20June%202012.&display=iframe&link=http%3A%2F%2Fwww.malaysiaairlines.com%2Fmy%2Fen%2Fdeals%2Fdeals-of-the-day.html%3Fcid%3D2145&locale=en_US&name=MAS%20Amazing%20Journey%20Deals&next=https%3A% 2F%2Fs-static.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D8%23cb%3Df3b274234c%26origin%3Dhttps%253A%252F%252Fmas-fb.net%252Ff356d6e91%26domain%3Dmas-fb.net% 26relation%3Dparent%26frame%3Df3ebd35ae%26result%3D%2522xxRESULTTOKENxx%2522&picture=http%3A%2F%2Fwww.malaysiaairlines.com%2Fcontent%2Fmas-admin%2Fmy%2Fen%2Fsite-configuration%2Fhomepagethreatre%2Fbook%2FAmazingWorldwideDeals%2F_jcr_content% 2Fcontentpar%2Fmasimage_9126.img.jpg%2F1339349457238.jpg&sdk=joey下一个=https%3A%2F%2Fs-static.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D8%23cb%3Df3b274234c%26origin%3Dhttps%253A%252F%252Fmas-fb.net%252Ff356d6e91%26domain% 3Dmas-fb.net%26relation%3Dparent%26frame%3Df3ebd35ae%26result%3D%2522xxRESULTTOKENxx%2522&picture=http%3A%2F%2Fwww.malaysiaairlines.com%2Fcontent%2Fmas-admin%2Fmy%2Fen%2Fsite-configuration%2Fhomepagethreatre% 2Fbook%2FAmazingWorldwideDeals%2F_jcr_content%2Fcontentpar%2Fmasimage_9126.img.jpg%2F1339349457238.jpg&sdk=joey下一个=https%3A%2F%2Fs-static.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D8%23cb%3Df3b274234c%26origin%3Dhttps%253A%252F%252Fmas-fb.net%252Ff356d6e91%26domain% 3Dmas-fb.net%26relation%3Dparent%26frame%3Df3ebd35ae%26result%3D%2522xxRESULTTOKENxx%2522&picture=http%3A%2F%2Fwww.malaysiaairlines.com%2Fcontent%2Fmas-admin%2Fmy%2Fen%2Fsite-configuration%2Fhomepagethreatre% 2Fbook%2FAmazingWorldwideDeals%2F_jcr_content%2Fcontentpar%2Fmasimage_9126.img.jpg%2F1339349457238.jpg&sdk=joeycom%2Fcontent%2Fmas-admin%2Fmy%2Fen%2Fsite-configuration%2Fhomepagethreatre%2Fbook%2FAmazingWorldwideDeals%2F_jcr_content%2Fcontentpar%2Fmasimage_9126.img.jpg%2F1339349457238.jpg&sdk=joeycom%2Fcontent%2Fmas-admin%2Fmy%2Fen%2Fsite-configuration%2Fhomepagethreatre%2Fbook%2FAmazingWorldwideDeals%2F_jcr_content%2Fcontentpar%2Fmasimage_9126.img.jpg%2F1339349457238.jpg&sdk=joey](https://www.facebook.com/dialog/feed?access_token=AAAFd06xhTEYBAANOHKdNqP9q7KudRVNgYqpptGHgkVeXwaRBjqIzOP99O06h40ionI8GugH6ENBkTyAwj6l87Eb3zJZAi1vHNQI0o7gWZC9pfysDk9&api_key=384638688250950&app_id=384638688250950&caption=Amazing%20Journeys%20by%20Malaysia%20Airlines&channel=https%3A%2F%2Fs-static.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D8%23cb%3Df1ca796e2c%26origin%3Dhttps%253A%252F%252Fmas-fb.net%252Ff356d6e91%26domain%3Dmas-fb.net%26relation%3Dparent.parent&channel_url=https%3A%2F%2Fs-static.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D8%23cb%3Df1bb0a298c%26origin%3Dhttps%253A%252F%252Fmas-fb.net%252Ff356d6e91%26domain%3Dmas-fb.net%26relation%3Dparent.parent&description=Malaysia%20Airlines%20is%20back%20with%20Amazing%20Journeys%20from%20only%20RM272%20from%2011th%20-%2018th%20June%202012.&display=iframe&link=http%3A%2F%2Fwww.malaysiaairlines.com%2Fmy%2Fen%2Fdeals%2Fdeals-of-the-day.html%3Fcid%3D2145&locale=en_US&name=MAS%20Amazing%20Journey%20Deals&next=https%3A%2F%2Fs-static.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D8%23cb%3Df3b274234c%26origin%3Dhttps%253A%252F%252Fmas-fb.net%252Ff356d6e91%26domain%3Dmas-fb.net%26relation%3Dparent%26frame%3Df3ebd35ae%26result%3D%2522xxRESULTTOKENxx%2522&picture=http%3A%2F%2Fwww.malaysiaairlines.com%2Fcontent%2Fmas-admin%2Fmy%2Fen%2Fsite-configuration%2Fhomepagethreatre%2Fbook%2FAmazingWorldwideDeals%2F_jcr_content%2Fcontentpar%2Fmasimage_9126.img.jpg%2F1339349457238.jpg&sdk=joey)

# python - 在python中乘以大型稀疏矩阵

> ID：11027137
> 
> 赞同：7
> 
> 时间：2012-06-14T05:27:58.373
> 
> 标签：python, numpy, scipy, sparse-matrix, matrix-multiplication

我想将两个大型稀疏矩阵相乘。第一个是 150,000x300,000，第二个是 300,000x300,000。第一个矩阵有大约 1,000,000 个非零项，第二个矩阵有大约 20,000,000 个非零项。有没有一种直接的方法来获得这些矩阵的乘积？

我目前以 csr 或 csc 格式存储矩阵并尝试`matrix_a * matrix_b`. 这给出了错误`ValueError: array is too big`。

我猜我可以用 pytables 将单独的矩阵存储在磁盘上，将它们分成更小的块，然后从许多块的乘积中构造最终的矩阵乘积。但我希望实现一些相对简单的东西。

编辑：我希望有一个适用于任意大的稀疏矩阵的解决方案，同时隐藏（或避免）在内存和磁盘之间来回移动单个块所涉及的簿记。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T09:56:40.240

奇怪，因为以下内容对我有用：

```
import scipy.sparse
mat1 = scipy.sparse.rand(150e3, 300e3, density=1e6/150e3/300e3)
mat2 = scipy.sparse.rand(300e3, 300e3, density=20e6/150e3/300e3)
cmat1 = scipy.sparse.csc_matrix(mat1)
cmat2 = scipy.sparse.csc_matrix(mat2)
res = cmat1 * cmat2 
```

我正在使用最新的 scipy。python使用的RAM量约为3GB

所以也许你的矩阵是这样的，他们的产品不是很稀疏？

# haml - 如何在 HAML 代码中为文本添加引号

> ID：11027144
> 
> 赞同：-1
> 
> 时间：2012-06-14T05:29:14.660
> 
> 标签：haml, double-quotes

我有以下 HAML 代码

```
//add some text
%div.text
  <%= answer.text %> 
```

浏览器中的结果是这样的

![在此处输入图像描述](../Images/ae8b03e4106296f85a6063187a7b1e9c.png)

如何在此文本中添加引号，以便显示“test remuse”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:44:12.733

更自然的解决方案：

```
//add some text
%div.text
  "#{answer.text}" 
```

而且我认为您不需要 a `%div`，因为`.text`是 a `div`with `class="text"`：

```
.text
  "#{answer.text}" 
```

# java - 在Android中运行方法时显示加载对话框？

> ID：11027147
> 
> 赞同：3
> 
> 时间：2012-06-14T05:29:24.147
> 
> 标签：java, android, dialog, loading, progress

我有一个需要大约 3-5 秒才能运行的方法设置（因为它会在线执行某些操作），我想显示一个加载对话框，但我不知道该怎么做，我尝试在调用之前启动加载拨号然后该方法尝试像这样立即将其关闭：

```
dialog.show();
myMethod();
dialog.cancel(); 
```

但这没有用，有人有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T05:39:40.863

AsyncTask 是我的最爱，但你也可以使用 Handlers :)

花时间浏览这个不错的[博客](http://www.vogella.com/articles/AndroidPerformance/article.html)。

下面的片段会帮助你。

```
 package org.sample;

    import android.app.Activity;
    import android.app.ProgressDialog;
    import android.os.Bundle;
    import android.os.Handler;

    public class Hello extends Activity {

        private Handler handler;
        private ProgressDialog dialog;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            dialog = new ProgressDialog(this);
            dialog.setMessage("Please Wait!!");
            dialog.setCancelable(false);
            dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            dialog.show();

            new Thread() {
                public void run() {
                    // Do operation here.
                    // ...
                    // ...
                    // and then mark handler to notify to main thread 
                    // to  remove  progressbar
                    //
                    // handler.sendEmptyMessage(0);
                    //
                    // Or if you want to access UI elements here then
                    //
                    // runOnUiThread(new Runnable() {
                    //
                    //     public void run() {
                    //         Now here you can interact 
                    //         with ui elemements.
                    //
                    //     }
                    // });
                }
            }.start();

            handler = new Handler() {
                public void handleMessage(android.os.Message msg) {
                    dialog.dismiss();
                };
            };
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T05:32:44.423

在 UI 线程上运行长时间的任务是“不不”。用于[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)在后台运行长时间的任务并在完成时更新 UI。

# objective-c - iPad+将图像选择器质量设置为低

> ID：11027149
> 
> 赞同：0
> 
> 时间：2012-06-14T05:29:49.560
> 
> 标签：objective-c, ios, ipad

在我的 iPad 应用程序中，我允许用户拍摄多张照片，然后压缩所有图像并将其上传到服务器。我面临的问题是由于大尺寸图像，zip 文件的大小正在增加，并且在上传时失败。单击图像后如何立即保存低质量图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:19:43.590

图像以 png 格式捕获。将其转换为 JPG 格式。这将有助于在一定程度上减小图像的大小。

或者按某个因素压缩图像

这是代码

//代码

```
if(imagesize>[MAX_SIZE_IMAGE intValue]){

   while (imagesize>[MAX_SIZE_IMAGE intValue]){

        NSData *data=UIImageJPEGRepresentation(Image, 0.1f);

        imagesize=[data length];
    }
}

jpgImage =[UIImage imageWithData:data];

return jpgImage; 
```

这里将 MAX_SIZE_IMage 设置为某个值，然后将图像压缩 0.1 倍，直到它减小到小于最大图像大小的大小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:15:06.387

调整图像大小的功能：

```
 -(UIImage *)resizeImage:(UIImage *)image width:(float)imgwidth height:(float)imgheight
  {
   CGSize imgSize; 
   imgSize.width= imgwidth;
   imgSize.height= imgheight;
   UIGraphicsBeginImageContext(imgSize);
   [image drawInRect:CGRectMake(0,0,imgSize.width,imgSize.height)];
   UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
   UIGraphicsEndImageContext();
   return newImage;
  } 
```

您可以将所有选取的图像存储在数组中。现在在创建 zip 调整图像大小之前：

```
 for(int i = 0; [array count]; i++)
  {
    // call resize function here
    //Again store all resized image in another array Now u have all images in low quality for zip
  } 
```

# struts2 - 在我的 struts2 应用程序中调用 web 服务

> ID：11027150
> 
> 赞同：0
> 
> 时间：2012-06-14T05:29:53.943
> 
> 标签：struts2

谁能告诉我如何在我的struts2应用程序中调用webservice..我在struts2中创建了登录页面所以我需要访问web服务来验证，如果再次成功需要调用web服务来获取数据并在jsp中显示项目页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-16T12:46:27.420

打开您的 struts.xml 文件并指定如下操作：

```
<action class="CLASSNAME"
        name="ACTION_NAME" method="METHOD_NAME">
        <interceptor-ref name="authStack" />
        <interceptor-ref name="json">
            <param name="enableSMD">true</param>
        </interceptor-ref>
        <result name="success" type="json" redirect="index.jsp"></result>
    </action> 
```

使用 javascript / jquery post 将凭据发送到上述操作。像平常在 Struts 中写的一样写动作类

# macos - 在 Mac OS X 10.7.4 上使用 OpenCL 禁用 Nvidia 看门狗

> ID：11027151
> 
> 赞同：2
> 
> 时间：2012-06-14T05:29:53.927
> 
> 标签：macos, opencl, xcode4.3, nvidia

我有一个 OpenCL 程序，它可以很好地解决小问题，但是当运行较大的问题时，在 Nvidia 硬件上运行内核的时间超过了 8-10 秒。虽然我没有连接到我正在计算的 GPU（Nvidia GTX580）上的显示器，但内核在运行大约 8-10 秒后总是会终止。

我对这个问题所做的初步研究表明，只有当显示器连接到显卡时，Nvidia 看门狗才应该强制执行时间限制。但是，我没有任何显示器连接到 OpenCl 正在运行的 GPU，但仍然强制执行此限制。

是否可以禁用 Nvidia 看门狗或让驱动程序识别 Mac OS X 10.7.4 中的 GTX580 没有连接显示器？

我知道解决这个问题的一种可能方法是分解成更小的内核，但是由于我的工作性质，当我使用更细的颗粒时，我仍然可以达到这个限制。

我正在编译/运行的系统如下：

*   MacPro4,1 2 x 2.26 GHz 四核 Intel Xeon
*   Mac OS X 10.7.4
*   XCode 4.3.3
*   Nvidia GT120（已连接 2 个显示器）
*   NVidia GTX580（无附件）

有关运行 NVidia 设备查询时的额外信息，我会得到以下输出：

```
CUDA Device Query (Runtime API) version (CUDART static linking)

Found 2 CUDA Capable device(s)

Device 0: "GeForce GTX 580"
  CUDA Driver Version / Runtime Version          4.2 / 4.2
  CUDA Capability Major/Minor version number:    2.0
  Total amount of global memory:                 1536 MBytes (1610285056 bytes)
  (16) Multiprocessors x ( 32) CUDA Cores/MP:    512 CUDA Cores
  GPU Clock rate:                                1564 MHz (1.56 GHz)
  Memory Clock rate:                             2004 Mhz
  Memory Bus Width:                              384-bit
  L2 Cache Size:                                 786432 bytes
  Max Texture Dimension Size (x,y,z)             1D=(65536), 2D=(65536,65535), 3D=(2048,2048,2048)
  Max Layered Texture Size (dim) x layers        1D=(16384) x 2048, 2D=(16384,16384) x 2048
  Total amount of constant memory:               65536 bytes
  Total amount of shared memory per block:       49152 bytes
  Total number of registers available per block: 32768
  Warp size:                                     32
  Maximum number of threads per multiprocessor:  1536
  Maximum number of threads per block:           1024
  Maximum sizes of each dimension of a block:    1024 x 1024 x 64
  Maximum sizes of each dimension of a grid:     65535 x 65535 x 65535
  Maximum memory pitch:                          2147483647 bytes
  Texture alignment:                             512 bytes
  Concurrent copy and execution:                 Yes with 1 copy engine(s)
  Run time limit on kernels:                     Yes
  Integrated GPU sharing Host Memory:            No
  Support host page-locked memory mapping:       Yes
  Concurrent kernel execution:                   Yes
  Alignment requirement for Surfaces:            Yes
  Device has ECC support enabled:                No
  Device is using TCC driver mode:               No
  Device supports Unified Addressing (UVA):      Yes
  Device PCI Bus ID / PCI location ID:           6 / 0
  Compute Mode:
     < Default (multiple host threads can use ::cudaSetDevice() with device simultaneously) >

Device 1: "GeForce GT 120"
  CUDA Driver Version / Runtime Version          4.2 / 4.2
  CUDA Capability Major/Minor version number:    1.1
  Total amount of global memory:                 512 MBytes (536543232 bytes)
  ( 4) Multiprocessors x (  8) CUDA Cores/MP:    32 CUDA Cores
  GPU Clock rate:                                1400 MHz (1.40 GHz)
  Memory Clock rate:                             800 Mhz
  Memory Bus Width:                              128-bit
  Max Texture Dimension Size (x,y,z)             1D=(8192), 2D=(65536,32768), 3D=(2048,2048,2048)
  Max Layered Texture Size (dim) x layers        1D=(8192) x 512, 2D=(8192,8192) x 512
  Total amount of constant memory:               65536 bytes
  Total amount of shared memory per block:       16384 bytes
  Total number of registers available per block: 8192
  Warp size:                                     32
  Maximum number of threads per multiprocessor:  768
  Maximum number of threads per block:           512
  Maximum sizes of each dimension of a block:    512 x 512 x 64
  Maximum sizes of each dimension of a grid:     65535 x 65535 x 1
  Maximum memory pitch:                          2147483647 bytes
  Texture alignment:                             256 bytes
  Concurrent copy and execution:                 Yes with 1 copy engine(s)
  Run time limit on kernels:                     Yes
  Integrated GPU sharing Host Memory:            No
  Support host page-locked memory mapping:       Yes
  Concurrent kernel execution:                   No
  Alignment requirement for Surfaces:            Yes
  Device has ECC support enabled:                No
  Device is using TCC driver mode:               No
  Device supports Unified Addressing (UVA):      No
  Device PCI Bus ID / PCI location ID:           5 / 0
  Compute Mode:
     < Default (multiple host threads can use ::cudaSetDevice() with device simultaneously) >

deviceQuery, CUDA Driver = CUDART, CUDA Driver Version = 4.2, CUDA Runtime Version = 4.2, NumDevs = 2, Device = GeForce GTX 580, Device = GeForce GT 120
[deviceQuery] test results...
PASSED

> exiting in 3 seconds: 3...2...1...done! 
```

# iframe - joomla 之外的 Jomsocial 组件

> ID：11027152
> 
> 赞同：0
> 
> 时间：2012-06-14T05:29:58.373
> 
> 标签：iframe, joomla, joomla-extensions, joomla-component

[我在http://social.drishtant.com/social-network-for-social-impact](http://social.drishtant.com/social-network-for-social-impact)有一个 jomsocial 装置

如何在第三方网站中单独嵌入 jomsocial 组件（不包括 joomla 页眉和页脚）？具有上述 URL 的 iframe 也会获取 joomla 页眉和页脚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:36:29.793

您可以排除所有“CMS”内容，并通过将其添加到 url 的末尾仅显示组件

```
&tmpl=component 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T14:59:59.740

使用 Rockettheme 模板，您可以使用这些步骤……只需几个步骤，但我认为它会完成您想要的。

简而言之，您将创建另一个主菜单以在 iframe 中使用，然后您可以通过模板配置或模板分配以不同方式显示：

1.  创建一个新的“隐藏”菜单，它是您的 jomsocial 链接的别名，但不要在任何地方发布该菜单 - 它必须存在并被发布，以便 itemid 有效并且可以使用它访问您的 jomsocial 组件。
2.  从 Admin 复制或创建另一个新菜单并将其命名为“mainmenu_4iframe”
3.  在该菜单上，将您希望从 iframe 中获得的所有菜单选项添加为 menu *aliases*。然后运行这些菜单项，但使用不同的菜单 Itemid（这很关键）
4.  从您的模板配置中，为隐藏菜单项和 mainmenu_4iframe 进行菜单设置覆盖，以使您的模板在从该链接转到 jomSocal 时显示不同（这是他们将在 iframe SRC 属性中使用的那个）
5.  如果更改菜单项的默认模板不起作用或太麻烦，您可以改为使用“beez”之类的基本模板并将该模板分配给您的新菜单项。

我认为这涵盖了它，自从我完成它已经有一段时间了，但我认为我忽略的任何东西都可以很快弄清楚。- 祝你好运

# c# - 当我给 MyObject obj = new MyObject() 时会发生什么

> ID：11027155
> 
> 赞同：5
> 
> 时间：2012-06-14T05:30:12.977
> 
> 标签：c#, .net, garbage-collection, clr

```
MyObject obj = new MyObject(); 
```

我知道'new'关键字将调用构造函数并在托管堆中初始化对象。

我的问题是 CLR 如何执行以下操作。

1.  CLR如何执行上述行？
2.  CLR如何为对象分配内存？
3.  CLR如何确定对象的大小？
4.  如果没有空间为堆中的对象分配内存，CLR 将如何知道它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:07:05.453

当创建引用类型（类、委托、接口、字符串或对象）时，它被分配到堆上。Net 有四个不同的堆：（gen0、gen1、gen2）（小对象堆）和 LOH（大对象）堆）。根据创建时间（从 gen0 到 gen1 到 gen2 等），所有 85k 或更小的东西都放在前三个堆之一。大于 85k 的对象被放置在 LOH 上。LOH 永远不会被压缩，所以最终，我正在做的类型的分配最终会导致 OOM 错误，因为对象分散在该内存空间中。这些被称为托管堆。

要创建一个对象，您需要做的就是使用 new 关键字；.NET 将负责创建、初始化对象并将其放置在正确的堆上，并保留任何必要的额外内存。之后，您几乎可以忘记该对象，因为完成后您不必删除它。

当您使用 new 关键字创建引用类型对象时，它被放置在堆上，并且它的引用主要用于当前正在运行的堆栈中。还有其他可能的来源，您的对象可以用作参考：

1.  全局/静态对象引用
2.  CPU 寄存器
3.  对象终结参考（稍后更多）
4.  互操作引用（传递给 COM/API 调用的 .NET 对象）
5.  堆栈引用（这里主要使用）

这 5 个实际上是 GC 根节点，从中形成对象引用层次结构。想象一下经典的 Customer 类，它通常有一个存储 Order 类的集合。当一个 Order 被添加到 order 集合中时，集合本身会保存对添加的 order 的引用。如果 Customer 类的实例也有对它的堆栈引用。

这就是复杂对象的层次结构的形成方式，这就是 GC 查看引用的方式。

例如。客户对象的堆栈引用-> 对订单列表对象的引用-> 引用单个订单。

任何从这 5 个根中松散引用的东西都容易发生 GC。

如何将内存分配给对象有点复杂，并且它通常随着 MKK 的指定而随时间增长[http://msdn.microsoft.com/en-us/magazine/cc163791.aspx](http://msdn.microsoft.com/en-us/magazine/cc163791.aspx)

一个简单的例子可能是：

```
class MyClass 
{ 
    string Test="Hello world Wazzup!"; 
    byte[] data=new byte[86000];  
} 
```

很容易假设分配时 MyClass 的大小包括：

• 19 个字符

• 86,000 字节。

事实上，对象的大小将只包括一般类的东西，以及存储对象指向字符串和字节数组（类级变量）所需的内存，然后将它们分别分配到堆上。字符串将在 SOH 上分配，其对象引用由类的实例持有；字节数组将被分配到 LOH，因为它大于 85 KB。

SOH 可以被压缩，里面不会有碎片，而 LOH 可以在内存中有碎片。

问候。

# python - HTTPFound 返回的位置标头不包含非标准端口号

> ID：11027156
> 
> 赞同：2
> 
> 时间：2012-06-14T05:30:14.943
> 
> 标签：python, redirect, nginx, pyramid, gunicorn

我有一个 Pyramid 应用程序在 nginx（监听端口 8080）后面的 gunicorn（监听 Unix 套接字）上运行。当 Pyramid 视图返回`HTTPFound(location='/')`HTTP 响应时包含`Location: http://example.host/`没有端口号，因此用户会收到“无法连接”错误。我不知道在哪里指定非标准端口号，或者（最好）如何告诉 Pyramid 在生成`Location`标头时从请求中提取它。

摘自应用程序配置：

```
[server:main]
use = egg:gunicorn#main
host = unix:%(here)s/run/server.sock
workers = 4 
```

Nginx 配置：

```
server {
    listen 8080;
    root /path/to/app;
    location / {
        proxy_pass http://unix:/path/to/app/run/server.sock;
        include proxy_params;
    }
    location /static {
        root /path/to/app/static;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:53:54.570

要获取服务器端口，请使用[`host_port`](http://docs.pylonsproject.org/projects/pyramid/en/1.0-branch/api/request.html#pyramid.request.Request.host_port)

同样根据[`rfc2616`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30)，您确实应该在`Location`标头中发送绝对 URI 而不是相对 URI。

# java - 在 Java 中递归转储聚合结构（集合、数组）的内容

> ID：11027157
> 
> 赞同：7
> 
> 时间：2012-06-14T05:30:16.137
> 
> 标签：java

这是我在 Stackoverflow 上的第一个问题，所以如果您在我的第一篇文章中发现任何荒谬之处，请多多包涵。仅供参考，我已经阅读了 SO 常见问题解答，并且我知道它的各种政策。你看，我是一个大量使用 PHP、Perl、Python、ROR 等语言的人，最近我“上下文切换”到了 Java EE。你看，我研究过的几种语言都有一个结构，它使我能够递归地转储聚合结构的内容，而无需 for/foreach/for..in 循环

例如，

```
a = 任何复合数据结构
```

PHP有

```
var_dump() 和 print_r()
```

Perl 有

```
数据::自卸车
```

ROR 有

```
漂亮的打印
```

和 Python 有

```
打印模块
```

.

所以我的问题是，

Java 世界中是否存在与这些类​​似的东西？当我使用这些语言（PHP/Perl/Python/ROR）中的任何一种来转储复合数据结构的内容以检查它的外观然后进一步处理它（或决定如何处理）时，我发现它非常方便。进一步处理）

如果我的帖子忽略了任何 SO 规则，感谢您的时间和道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:37:41.287

`java.util`集合将`toString()`递归地转储列表/集合/映射等的详细信息。这要求存储在集合中的对象`toString()`定义了有用的 s。

然而，它对数组不适用，因为 Java 没有对`toString()`数组有用的默认值。如果您知道您正在处理一个数组，那么您可以使用`Arrays.deepToString()`实用程序方法（有关更多详细信息，请参阅[guido 的回复](https://stackoverflow.com/a/11027222/1212960)）。

例如，这段代码：

```
final Map<String, Object> map = new HashMap<String, Object>();
final List<String> nested = Arrays.asList("foo", "bar", "baz");

map.put("given", "Arthur");
map.put("family", "Dent");
map.put("nested", nested);

System.out.println(map); 
```

产生这个：

```
{nested=[foo, bar, baz], given=Arthur, family=Dent} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:36:26.083

您可以使用`java.util.Arrays`类中的实用程序静态方法：

```
public static String toString(Object[] a)
ie: String dump = Arrays.toString(array); 
```

返回指定数组内容的字符串表示形式。

如果数组包含其他数组作为元素，它们会通过继承自 Object 的 Object.toString() 方法转换为字符串，该方法描述的是它们的标识而不是它们的内容。

此方法返回的值等于 Arrays.asList(a).toString() 将返回的值，除非 a 为 null，在这种情况下返回“null”。

```
public static String deepToString(Object[] a)
ie: String dump = Arrays.deepToString(array); 
```

返回指定数组的“深层内容”的字符串表示形式。如果数组包含其他数组作为元素，则字符串表示包含它们的内容等等。此方法设计用于将多维数组转换为字符串。

字符串表示由数组元素的列表组成，括在方括号 ("[]") 中。相邻元素由字符“,”（逗号后跟一个空格）分隔。元素通过 String.valueOf(Object) 转换为字符串，除非它们本身是数组。

在集合的情况下，您可以使用方法 toArray()：

```
 List<YourObject> list = .....
 YourObject[] array = list.toArray(new YourObject[0]);
 String dump = Arrays.deepToString(array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-10T16:02:13.117

根据您的目的，我假设它是调试代码或探索复杂的数据结构，**不要打印**.

使用良好的 UI 调试器，例如 IntelliJ 或（颤抖，请不要）eclipse 中的调试器。与您列出的其他语言相比，Java 有一套更成熟、更完整的工具可供开发人员使用（我也使用过其中的大多数语言）。Php、Perl 等是原始的，出于某种原因，人们一直期望在简单的文本编辑器中进行开发。Java 不是那样工作的（至少如果你想保持清醒或者正在从事比玩具项目更大的工作）。

使用功能齐全的 IDE，它内置调试器。

在您列出的其他 IDE 中，IDE 并不是一个很好的选择，而且调试集成充其量也很糟糕……这实际上是 Java 的主要优势之一。

# android - Android 基础 - 不同的类文件

> ID：11027158
> 
> 赞同：1
> 
> 时间：2012-06-14T05:30:26.860
> 
> 标签：android, android-activity, android-service

我的应用程序中有不同的类文件。我有 5 个课程，其中 2 个是活动，1 个是正在运行的服务。其他2个只是类。这两个类中变量的生命周期是多少。我知道一个活动可以被操作系统杀死，所以当活动被杀死时，我将无法使用服务中活动的变量。我可以在应用程序生命周期内的任何时候使用其他 2 个类文件中的变量，它们既不是活动也不是服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:43:49.427

您可以使用这些变量，如果您将变量设为静态，那么在活动或服务中所做的值更改将持续存在。否则你可以在活动或服务类中创建这些类变量的对象（如果你想要每个活动或服务的单独变量实例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:11:40.240

如果您想在应用程序的整个生命周期中引用一些对象，我建议您将它们存储在应用程序上下文中。您可以通过以下方法之一获取对应用程序上下文的引用：

[上下文#getApplicationContext()](http://developer.android.com/reference/android/content/Context.html#getApplicationContext%28%29)

[活动#getApplication()](http://developer.android.com/reference/android/app/Activity.html#getApplication%28%29)

在清单中，您定义要使用的自定义应用程序类：选中[此](http://developer.android.com/guide/topics/manifest/application-element.html#nm)

然后只需在 Application 的 onCreate 方法中创建您想要的对象，并提供 getter(s) 供其他 Android 组件使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T05:35:22.753

```
The other 2 are just classes. What is the lifetime of the variables in these 2 classes. 
```

这取决于变量是否是实例变量的静态

if static ：当类加载第一次时，它将进入滚动状态。

if instance ：这将取决于您在何处创建该 claas 的实例以及该实例的范围是什么

```
so i wont be able to use the variables of the activities in the service when the activity is killed. 
```

是的，当活动被杀死时，该变量的活动也会被清除。

```
Can I use the variables in the other 2 class files anytime during the lifetime of the application, which are neither activities nor services? 
```

您可以通过以下方式使用应用程序的生命周期

```
 1- make them static 

  2- or if they are not static declare them in application file of you project. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T05:42:02.563

只要另一个类或活动或服务保持对它的引用，这些类就在那里。如果您的活动有一个类的引用，那么当活动被销毁时，该类就会消失。服务也一样。不幸的是，在 Android 中没有办法将 pojo（你称之为“普通类”）的引用从一个活动传递到另一个活动，所以你不能轻易地保持这些类的活动。

我使用 RoboGuice，通过制作 pojo 的 Injectable Roboguice 类，您可以从活动和服务中引用相同的对象，如果它们是单例，只要您的应用程序正在运行，它们就会保持活动状态。

# android - 在谷歌地图中搜索地点并返回经度和纬度

> ID：11027159
> 
> 赞同：1
> 
> 时间：2012-06-14T05:30:29.933
> 
> 标签：android, google-maps

我需要用户在文本视图中搜索一个地点的名称，并且 Mapview 会在 Map 中最近的匹配结果上放置一个标记/图钉。如果用户确认，则返回纬度和经度。我不知道该怎么做，如果这甚至可能。请指出正确的方向。我搜索了很多论坛，但没有得到任何想法。欣赏它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:42:50.163

您可以使用[GeoCoder](http://developer.android.com/reference/android/location/Geocoder.html)类来做到这一点。如果您知道某个位置的地址但想知道其纬度和经度，则可以通过**reverse-Geocoding**进行。

至于根据搜索结果添加地图图钉，您需要使用 ItemizedOverly。请遵循本教程，它非常详细，还提供您正在寻找的内容。
[在 Android 中使用 Google 地图](http://mobiforge.com/developing/story/using-google-maps-android)，请参阅**地理编码和反向地理编码部分**

# android - 姜饼应用程序：HonyComb 平板电脑

> ID：11027160
> 
> 赞同：1
> 
> 时间：2012-06-14T05:30:32.163
> 
> 标签：android

是否可以在具有蜂窝版本的平板电脑上安装基于 android 2.3 的应用程序？如果不可能，还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:04:11.187

是的，大多数 2.3 应用程序都可以安装在 Honeycomb 上，除非它们在清单中指定不安装在平板电脑上。

但是仅仅因为它安装在平板电脑上并不意味着它看起来也很好，如果你不缩放任何东西以适应更大的屏幕尺寸，你将在平板电脑屏幕的中心有一个小的活动矩形，其他地方都有黑色空间.

如果您正在研究如何扩展应用程序，大多数游戏引擎都能够自动扩展，例如[AndEngine](http://www.andengine.org/)。否则，您必须在运行时获取屏幕尺寸和密度，并按比例缩放屏幕上的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T05:37:10.447

对的，这是可能的。只是该应用程序可能看起来不太好。

如果它是您自己的应用程序，我建议您对其进行修改以在平板电脑上正常工作。您可以在 3.0 之前的设备中使用操作栏，使用`http://developer.android.com/resources/samples/ActionBarCompat/index.html`

我已经在许多应用程序中使用了它，它使您的应用程序看起来像一个 ics 应用程序，即使在 Gingerbread 设备上也是如此。此外，它允许您使用最新的 SDK 进行开发，并且仍然可以在旧设备上运行您的应用程序。

如果它不是您的应用程序，那么您就会被一个将其屏幕扩展到平板电脑大小的应用程序所困。不幸的是，有很多应用在我的平板电脑上看起来很糟糕。

# drupal-7 - 将 drupal 7 网站从服务器移动到本地主机的问题

> ID：11027161
> 
> 赞同：0
> 
> 时间：2012-06-14T05:30:39.800
> 
> 标签：drupal-7

我想将我的drupal网站更改为在localhost中运行。我刚刚下载了文件并将其放入我的localhost并安装了drupal。但是网站中的链接显示404。谁能告诉我真正的问题是什么。我更改了.htacess文件旧的。仍然显示 404 链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:47:53.203

也许，您需要在 apache httpd.conf 中打开 mod_rewrite？

# java - 哪个 CRC 用于更改 Desfire 卡中的密钥

> ID：11027162
> 
> 赞同：1
> 
> 时间：2012-06-14T05:30:52.180
> 
> 标签：java, mifare

哪种类型的 CRC 用于更改 Desfire 卡中的密钥？是否应该颠倒 CRC 字节的顺序。我无法更改 PICC 应用程序的密钥。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:33:44.430

CRC16/32 和 MAC/CMAC 选择取决于 Desfire 卡，CRC16 和 MAC 用于 MF3ICD40（向后兼容）。如果您的 DES 密钥长度为 16 字节，但前半部分和后半部分相同，则使用 CRC16。[您可以从此链接](http://www.repairfaq.org/filipg/LINK/F_crc_v3.html)中挖掘有关是否应该反转结果 CRC 的一些信息。

# html - 在用户提交的数据中保留与符号未转义是否存在安全风险？

> ID：11027167
> 
> 赞同：4
> 
> 时间：2012-06-14T05:31:41.353
> 
> 标签：html, string, security, validation, escaping

在显示用户生成/提交的信息时，转义其他特殊字符但不触及与号是否存在任何安全风险？我想让我的用户自由输入 html 实体、十六进制和十进制特殊字符，而不会给我的消毒剂增加不必要的复杂性。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T17:58:48.967

这完全取决于数据放入的上下文。

`&`在 HTML 中，用字符引用表示纯文本的主要原因是[避免歧义](https://stackoverflow.com/q/3493405/53114)，因为`&`也是这种字符引用的开始。这种歧义的一个流行示例是`&`作为 HTML 属性中 URL 参数的一部分的纯文本，如下所示：

```
<a href="/?lang=en&sect=foobar"> 
```

这里`&`没有使用相应的字符引用进行适当的编码，因此解析器将其视为字符引用的开始。并且由于*sect*是[HTML 中的已知实体](http://www.w3.org/TR/html4/sgml/entities.html#h-24.2)，表示*节字符* `§`，因此该属性值实际上被解释为`/?lang=en§=foobar`.

因此，保持`&`原样不会像 HTML 中的其他特殊字符那样造成实际威胁，因为它们可以更改数据放入的上下文：

*   标签分隔符`<`，`>`可以开始或结束标签声明，
*   属性值分隔符`"`，并且`'`可以开始或结束属性值声明。

为了安全起见，您应该使用[`htmlspecialchars`](http://php.net/htmlspecialchars)double_encode*参数*集`false`来避免对已经存在的字符引用进行双重编码：

```
var_dump(htmlspecialchars('<"&amp;\'>', ENT_QUOTES, 'UTF-8', false) === '&lt;&quot;&amp;&#039;&gt;'); // bool(true) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T05:41:56.207

***tldr;*** ***如果编码正确*****，留下与号（或其他“特殊字符”）不是安全问题***。也就是说，*输出/使用*很重要，而不是*输入*。*

 *这一切都取决于最终如何使用数据。例如，对于任意输入，执行 a`<input value="<? echo $input ?>" />`的*编码不正确。*

现在 an`&`通常比其他一些字符（例如 , 或 ）少得多的“问题” `'`，但`"`在某些情况下它*可能*会导致一些伪影（包括错误和未定义的行为），或者可能用于添加额外的查询参数一个网址`<``>`

 **   *.. 但是如果在输出时*URL 没有被适当编码，那么它的*编码不正确* ¹
*   .. 当然，如果 a`&`被逐字写入 XML/HTML 流，那么它的*编码不正确* ²
*   ..如果程序将原始`&`[来自用户输入]传递给“shell字符串执行”，那么它[很可能]*没有正确编码* ³
*   ..这一切都归结为使用。

我倾向于*不更改*输入，除非使其符合业务规则 - 这不*包括*上述情况！（但完全不接受＆符号可能是一个完全有效的业务规则。）

在适当的时间进行适当的转义（或者，更好的是，不需要 [手动] 转义的方法）会处理其余部分，并确保通过对*用法*的良好编码，减轻琐碎的攻击或意外错误。

事实上，我认为这种“输入清理”表明对其他地方使用的方法/代码缺乏信任，并可能导致需要*撤消*“清理”的*更多*问题。魔术引用任何人？

 ** * *

¹这是`&`用户输入中的 an 实际上会导致某种形式的注入的情况。想象一下：`format("http://site/view={0}", user_input)`，其中`user_input`包含`1&buy=1`。结果将是`"http://site/view=1&buy=1"`。正确的方法是对值进行[URI 编码（也称为百分比编码）](http://en.wikipedia.org/wiki/Percent-encoding)，这将导致`"http://site/view=1%26buy%3D1"`. （请注意，在正确编码的情况下只有一个查询参数。如果意图是能够允许“原始”输入通过，那么仔细定义/分析允许的规则并参见以下段落。）

²虽然“裸”`&`在 HTML 流中可能是有效的，但不应将用户输入视为“有效的 HTML”。也就是说，无论以 XML 还是 HTML 为目标，都应该使用正确的输出/呈现转义机制。（转义机制可能选择不编码“bare” `&`，但这是次要问题。[懒惰的程序员](http://c2.com/cgi/wiki?LazinessImpatienceHubris)将继续对所有适用的输出使用*相同*的转义技术，以获得一致、可靠和安全的输出。）

³不要使用带有必须解析的单个参数字符串的 shell-execute，而是使用带有参数列表的 exec-form。后者 [通常] 防止产生 shell 和相关的 shell-hacks。而且，当然，永远不要让用户手动指定可执行文件..***

# asp.net-3.5 - ASP.Net 3.5 的云托管和相关问题

> ID：11027172
> 
> 赞同：1
> 
> 时间：2012-06-14T05:32:03.420
> 
> 标签：asp.net-3.5, cloud-hosting

我开发了一个使用 Entity Framework 和 SQL Server 2005 Express 的 ASP.Net (VB.Net) 网站。

我的客户刚刚告诉我，他希望他的网站托管在某个云环境中。

我要问会不会有问题？我是说

1.  在开发应该托管在云环境中的应用程序时，是否应牢记一些事项？
2.  我必须更改我的代码吗？（我将 Session 用于登录目的）还是我现有的代码将在没有任何更改的情况下工作？目前，我的代码在共享的 ASP.Net 3.5 托管服务提供商上运行良好。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:07:30.710

肯定有一些事情要记住：

*   如果您希望您的应用程序能够扩展到多个实例，您应该非常注意任何共享状态，在您的情况下是内存会话状态。这是一篇关于在[AppHarbor上](https://appharbor.com/)[使用 Memcached 进行会话状态存储的文章](http://support.appharbor.com/kb/tips-and-tricks/using-memcached-backed-sessionprovider)
*   许多云提供商使用的范例是实例文件系统上的文件系统存储没有持久化，这意味着您必须将用户生成的文件内容存储在[AWS S3](http://aws.amazon.com/s3/)之类的地方。

除此之外，您的应用程序不需要修改（请注意，只有当您的应用程序需要文件上传或您计划将其扩展到多个实例时才需要修改）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T13:36:26.520

请理解，无需更改代码即可在云中托管您的应用程序。云托管只不过是具有先进基础设施的传统托管，具有硬件故障转移保护。以下文章将对您有所帮助...

[ASP.NET MVC3 应用程序可以在不更改特定代码的情况下托管在云中吗？](https://stackoverflow.com/questions/10007236/can-asp-net-mvc3-applications-host-in-cloud-without-specific-code-changes/10370182#10370182)

您的问题：我必须更改我的代码吗？（我将 Session 用于登录目的）还是我现有的代码将在没有任何更改的情况下工作？目前，我的代码在共享的 ASP.Net 3.5 托管服务提供商上运行良好。

> > > > > 是的，您可以直接在 Windows 云中上传您的 ASP.Net MVC Web 应用程序，而无需更改特定的代码……我在[AccuWebHosting.Com](http://www.accuwebhosting.com/) Windows 公共云服务器上托管我的几个应用程序。

# windows - 内核驱动程序检查内存是否被映射 (BugCheck 0xC2)

> ID：11027175
> 
> 赞同：0
> 
> 时间：2012-06-14T05:32:11.490
> 
> 标签：windows, device-driver, kernel, bsod

这似乎是一个简单的问题，但我找不到优雅的解决方案。我已将驱动程序追溯到对 的调用`MmUnmapIoSpace`，该调用会产生 BugCheck 0xC2 {7,,,} 消息。

有没有办法在调用之前测试特定区域是否在 Windows 驱动程序中映射`MmUnmapIoSpace`？我检查了指针是否存在，`NULL`但它似乎不起作用。

我似乎没有看到任何记录/未记录的函数来测试调用是否`MmUnmapIoSpace`会产生 0xC2 错误检查。

有什么万无一失的方法来测试这个而无需持有一堆布尔值或类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:06:13.497

不，没有要检查的功能。相反，我只是将指针包装在一个结构中，该结构包含一个布尔值，指示它是否已经被映射。

# ios - 用于白标应用的 iOS 静态库代码库

> ID：11027176
> 
> 赞同：5
> 
> 时间：2012-06-14T05:32:12.320
> 
> 标签：ios, xcode, white-labelling

我正在寻找定制我们的 iOS 应用程序的最佳方法，以便我们可以轻松地创建它的白标版本并使它们保持同步。

一种方法是将整个代码库放在一个静态库项目中。然后为我们的主应用程序和每个白标应用程序创建一个单独的项目。这些项目都将包含对代码库库的引用作为子项目，以及它们自己的资产，如图标、加载图像和 Info.plist 文件。

我的同事在 Eclipse 中成功地将这种方法用于我们的 Android 姊妹项目。

不幸的是，这种方法可能不适用于 xcode。xcode 似乎不允许将某些资源与静态库捆绑在一起，例如必不可少的 Settings.bundle 和 Localizable.strings。

有什么办法可以在 xcode 中使用这种方法，还是我最好只从每个项目中引用代码库文件夹？

**编辑：**

最初我打算只从每个项目中引用代码库文件夹，但发现每次在代码库中添加/删除/重命名文件时，这种方法都需要在每个项目中重新添加代码库目录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T06:13:38.523

我已经完成了白标应用程序。你应该先尝试目标。目标包含在项目中。您可以将源代码包含在同一个项目中。将所有变化的内容放入几个文件中，并改变您在每个目标中包含的那些文件。

您仍然需要确保文件在所有目标中，但您会收到提示或出现链接错误，如果您错过了包含该文件的文件，只需选中一个复选框。

您可以将特定于目标的文件保持在相当有限的范围内。我有一个通用的 xcassets 文件，每个目标都有一个。对于每个目标，我也有单独的 plist 和其他一些资源。其他一切都是共享的。

参考：

*   [Xcode 概念：目标](https://developer.apple.com/library/mac/#featuredarticles/XcodeConcepts/Concept-Targets.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T23:08:39.520

作为一个付费咨询项目，我正在审查一家公司的白标策略。他们创建了一系列 of.sh 文件，将整个构建复制到新名称中 - 包括新的 .plist 和项目文件。

他们没有考虑到这些应用程序的版本控制；因此，如果您可以这样构建您的应用程序，我认为库是最好的方法。您完全有可能拥有同一个白标应用程序的多个版本。（充其量是一场噩梦！！！哈哈）

您可能想要查看的另一件事是 CocoaPods。我没有使用过它，但我有朋友使用过——他们喜欢它，因为它有助于库管理——尤其是从一个开发环境到另一个开发环境。我需要在下个月使用它，因为每个人都要处理的 Zxing 路径混乱。

[https://github.com/CocoaPods/CocoaPods](https://github.com/CocoaPods/CocoaPods)

最后的建议 - 使用源代码管理就像没有明天一样！！！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T06:48:18.523

您不能自动将资源与静态库捆绑在一起，但是没有什么可以阻止您手动包含共享资源。您可以为自定义项目创建工作区，将库的项目插入工作区，然后将资源组从库的项目树中拖到主项目中。

# json - BB OS 版本 5 的黑莓 JSON 解析

> ID：11027179
> 
> 赞同：0
> 
> 时间：2012-06-14T05:32:23.723
> 
> 标签：json, parsing, blackberry

我需要在我的项目中解析一个 JSON 字符串，它在 BB OS 5 上运行。OS 版本 5 没有内置的 JSON 解析。我已经尝试了知识库文章[示例代码 - 在您的应用程序中实现 JSON 中的代码](http://supportforums.blackberry.com/t5/Java-Development/Sample-Code-Implementing-JSON-in-your-application/ta-p/539659)，但它也不能在 OS 5 上运行。

有人可以建议一个库或一些 jar 文件来解析 BB OS 5 的 JSON。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:38:03.300

这将对您有所帮助[-Json](https://github.com/upictec/org.json.me/tree/master/src/main/java/org/json/me)

```
 String jsonStr = "{\"team\":\"india\",\"manager\":\"meSağlam\",\"year\":\"2012\"}"; 
```

创建一个 JSONObject：

```
JSONObject obj = new JSONObject(jsonStr); 
```

如果您想使用“Bursaspor”的“团队”字段的值，那么您应该像这样使用您的 JSONObject：

```
obj.getString("team"); 
```

此调用将返回字符串值“india”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T07:31:53.657

嘿，感谢 Signare 的帮助。jar dint 对我有用，但导入源文件可以。:) 最初我已经导入了源文件，但与此同时我忘记了删除 BB json 导入。现在它工作正常......在所有操作系统版本上。

从这里获取源文件[https://bitbucket.org/liedman/json-me/src/501a54188df3/src/org/json/me](https://bitbucket.org/liedman/json-me/src/501a54188df3/src/org/json/me)

# ruby-on-rails - Rails 就地编辑器

> ID：11027183
> 
> 赞同：1
> 
> 时间：2012-06-14T05:32:47.700
> 
> 标签：ruby-on-rails

我正在寻找一个 rails 就地编辑器插件或 gem 来修改我在 rails 2.3.11 中使用 ruby​​ 版本 1.8.7 构建的 rails 应用程序。

请建议任何适用的 gem 或插件或任何替代解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:35:20.443

[https://github.com/bernat/best_in_place](https://github.com/bernat/best_in_place)

# .net - .NET 4.5 RC 框架 CLR - Windows XP 兼容性

> ID：11027185
> 
> 赞同：17
> 
> 时间：2012-06-14T05:32:53.283
> 
> 标签：.net, windows-xp, .net-4.5

简而言之，我的问题是：“.NET 框架 4.5 可以安装在 Windows XP 机器上吗？”

我有以下 MSDN 链接：

[.NET Framework 版本和依赖项](http://msdn.microsoft.com/en-us/library/bb822049%28v=vs.110%29)

> .NET Framework 的每个新版本都保留了以前版本的功能并添加了新功能。CLR 由它自己的版本号标识。.NET Framework 的某些版本包括新版本的 CLR，但其他版本使用早期版本。例如，.NET Framework 4 包含 CLR 4，但 .NET Framework 3.5 包含 CLR 2.0。（没有 CLR 版本 3。）**虽然 .NET Framework 4.5 RC 是 .NET Framework 4 的就地更新，但底层 CLR 版本号是 4.5。** ...

文档继续说您只能在 Windows XP Professional 和 Windows XP Home Edition 上安装 .NET Framework 4、.NET Framework 3.5 SP1、.NET Framework 2.0 SP2（即没有提到 4.5）。

我在其他地方读过 .NET 4.5 可以安装在 Win XP 上。本文档也只是指 4.5RC（不是最终的 4.5 框架）。

我的问题是，我们是否无法在 XP 机器上部署基于 4.5 构建的应用程序。微软会发布服务包吗？（不太可能，因为他们不支持 XP）

附上几篇关于这个主题的有趣文章：

[.NET 4.5 是对 .NET 4.0 的就地升级](http://www.hanselman.com/blog/NETVersioningAndMultiTargetingNET45IsAnInplaceUpgradeToNET40.aspx)

[.NET 4.5 重大更改 - .NET Framework 4 和 .NET Framework 4.5 R 之间的兼容性问题](http://msdn.microsoft.com/en-us/library/hh367887%28v=VS.110%29.aspx)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T05:48:24.560

通过查看 .NET Framework 系统要求文档 - 我认为您不走运。

[http://msdn.microsoft.com/en-us/library/8z6watww(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/8z6watww(v=vs.110).aspx)

根据文档，可以肯定它不在测试矩阵中，您将不会获得安装支持。假设它没有明确阻止不受支持的操作系统，安装程序可能仍然可以工作。YMMV。

XP 的生命周期支持延长至 2014 年——您只会看到关键的安全修复，而不是像这样的新功能。

[http://support.microsoft.com/lifecycle/search/default.aspx?alpha=Windows+XP](http://support.microsoft.com/lifecycle/search/default.aspx?alpha=Windows+XP)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T21:24:21.040

正如此[链接](http://social.msdn.microsoft.com/Forums/en-US/clr/thread/1c5cdc21-73bb-46f8-85e2-35318abb5b47)中所讨论的，不，Windows XP 将不支持 .NET 4.5。

[任何人都可以在此处](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2723735-make-net-4-5-work-on-any-os-that-supports-4-0)投票支持 .net 框架 4.5 支持 Windows XP

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T14:53:47.980

只需使用 Mono [http://www.mono-project.com/Main_Page](http://www.mono-project.com/Main_Page)

它与 XP 兼容。

# javascript - HTML/CSS：来自原始图像数据的背景图像，而不是 url

> ID：11027186
> 
> 赞同：1
> 
> 时间：2012-06-14T05:33:03.910
> 
> 标签：javascript, html, css, background-image

我从网络服务器获取 png 图像的原始图像数据，并希望将其用作 div 元素的背景图像。如果不先将数据保存为图像文件，这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T05:36:22.210

使用[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme)：

```
document.getElementById('e').src = 'data:image/png;base64,ton_of_crap'; 
```

在那篇 Wikipedia 文章中，有用于 PHP 和 Python 的代码输出 base-64 编码图像。您可以将其推入`url()`CSS 文件（或标签的`src`属性）中，它应该可以工作。`<img />`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T05:35:02.287

您是否尝试过（使用 jQuery）：

```
$('#divID').css("background-image", "url(/myimage.png)"); 
```

从[使用 jQuery 切换 DIV 背景图像](https://stackoverflow.com/questions/253689/switching-a-div-background-image-with-jquery)

# wpf - 自定义 WPF DataGrid 中的 Ctrl+C 行为

> ID：11027188
> 
> 赞同：4
> 
> 时间：2012-06-14T05:33:25.113
> 
> 标签：wpf, datagrid, copy-paste

我正在使用 WPF`DataGrid`来显示名称-值对。`SelectionUnit`设置为是`FullRow`因为它看起来不错，但是，当用户选择一行并按`Ctrl`+时`C`，他真的想要复制值文本，而不是默认行为，即名称和值的串联。在寻找解决方案时，我发现了`CopyingRowClipboardContent`事件，但[MSDN 页面](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.copyingrowclipboardcontent.aspx)没有关于如何使用它的信息。还是我应该抓住`PreviewKeyDown`自己？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:06:40.583

您可以`CopyingRowClipboardContent`使用`DataGridRowClipboardEventArgs`.

反编译的源代码

```
public class DataGridRowClipboardEventArgs 
{
    /// <summary>
    /// This list should be used to modify, add or remove a cell
    /// content before it gets stored into the clipboard.
    /// </summary> 
    public List<DataGridClipboardCellContent> ClipboardRowContent
    { 
       ... 
```

因此，例如，如果您有两列并且只想要第一列，则可以像这样删除第二项：

```
private void grid_CopyingRowClipboardContent(
    object sender, DataGridRowClipboardEventArgs e)
{
    e.ClipboardRowContent.RemoveAt(1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T07:52:53.063

也许这就是你要找的

`ClipboardCopyMode = DataGridClipboardCopyMode.ExcludeHeader;`

# xcode - Xcode 搜索路径和蓝色文件夹

> ID：11027189
> 
> 赞同：3
> 
> 时间：2012-06-14T05:33:36.140
> 
> 标签：xcode, build, header, include

我有一个简单的目录结构，用于构建与简单的 makefile 兼容的项目。

我的项目文件夹中有一个名为的目录`include/`，该目录包含标题，主要来自我链接到的库。

因此，在 Xcode 中，我想简单地包含这个充满包含的文件夹，以便我的 Xcode 项目中的源代码和标头可以找到它们，以便我可以编译。一旦我可以编译我的源文件，我将担心编译这些库以链接到它们。

我添加了我的包含文件夹，使其在 Xcode 项目中显示为蓝色文件夹，并且它也存在于文件系统中 Xcode 项目目录内的“真实目录”形式中。它被称为“包含”。

我还在`"include/**"`标题搜索路径和用户标题搜索路径下放入项目搜索路径配置设置，并打开始终搜索用户路径无济于事。构建无法找到我的标题。

我真的不希望有一种完全不同的方式来组织我的所有文件以使用 Xcode（它们太多了）。

这里肯定有人有经验让这样的现有项目在 Xcode 中编译。任何帮助表示赞赏。基本上，我正在尝试建立一种相当快速的方法来在 Xcode 中编译现有的 makefile 项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T06:13:37.947

试试这个步骤

1）不要在项目中添加标题

2) 命令 + 1

3）选择你的目标

4) 在“Build Settings->Header Search Paths”中添加“$(SRCROOT)/include”

# java - 自定义异常

> ID：11027190
> 
> 赞同：1
> 
> 时间：2012-06-14T05:33:41.163
> 
> 标签：java, exception

我做了一个自定义异常，但我不确定它是否正确，而且我不知道为什么会出现异常，程序没有打印异常消息，而只打印自定义异常的类的名称，以及如何在出现异常的情况下终止程序，因为此时程序只通知异常并继续。该程序正在eclipse上编译和运行。干杯，伙计们。这是代码。

```
import java.util.Scanner;
public class Stud
{
    public static void main(String[] args)
    {
        Scanner input = new Scanner(System.in);

        System.out.println("Enter age of the student");
        int age = input.nextInt();
        try
        {
                if(age < 7 || age > 18)
                {   
                    throw new InvalidStudentException("Age can't be less than 7 and more than 18");
                }
        }
        catch(InvalidStudentException e)
        {
                System.err.println(e) ;
        }

        System.out.println("Enter the gender of the student");
        String gender = input.next();
        try
        {
            if((!gender.equals("male")) || (!gender.equals("female")))
            {
                throw new InvalidStudentException("Gender can be only male or female");
            }
        }catch(InvalidStudentException e)
        {
            System.err.println(e) ;
        }

        System.out.println("Enter the name of the student");
        String name = input.next();
        try
        {

            if(name.length() < 10 || name.length() > 50)
            {
                throw new InvalidStudentException("The length of the name must be greater than 10 and less than 50 characters");
            }
        }catch(InvalidStudentException e)
        {
            System.err.println(e) ;
        }

        System.out.println("Enter the class number for the student");
        int classNumber = input.nextInt();

        try
        {
            if(classNumber < 1 || classNumber > 11)
            {
                throw new InvalidStudentException("Class number can be only between 1 and 11");
            }
        }catch(InvalidStudentException e)
        {
            System.err.println(e) ;
        }
    }
}

/** the class with the custom made exception
 */
public class InvalidStudentException extends Exception
{
    String msg;
    int num;

     public InvalidStudentException() 
     {
         super();
     }

     public InvalidStudentException(String msg) 
     {
         super();
         this.msg = msg;
     }
     public InvalidStudentException(int num) 
     {
         super();
         this.num = num;
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:49:54.790

如果性别不是男性也不是女性，则需要引发异常，因此将代码更改为：

```
try
    {
        if((!gender.equals("male")) && (!gender.equals("female")))
        {
            throw new InvalidStudentException("Gender can be only male or female");
        }
    }catch(InvalidStudentException e)
    {
        System.err.println(e.getMessage()) ;
        System.exit(0);
    } 
```

注意`&&`而不是`||`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T05:53:07.037

在您的 Exception 类中覆盖 toString() 方法

```
@Override
 public String toString()
 {
     return this.msg.toString();
 } 
```

打印堆栈跟踪是另一个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T05:36:08.183

您正在捕获异常，因此程序也会在异常情况下继续运行。您可以`throw`从 catch 块中重新使用它或使用`System.exit()`

打印异常的详细信息

利用

```
e.printStackTrace() 
```

代替`System.out.println(e);`

* * *

**另见**

*   [捕获和处理异常](http://docs.oracle.com/javase/tutorial/essential/exceptions/handling.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T05:38:58.040

尝试这个

```
 try
    {
        if((!gender.equals("male")) || (!gender.equals("female")))
        {
            throw new InvalidStudentException("Gender can be only male or female");
        }
    }catch(InvalidStudentException e)
    {
        System.err.println(e.getMessage()) ;
        System.exit(0);
    } 
```

# javascript - jquery调用spring控制器的get方法代替post

> ID：11027191
> 
> 赞同：0
> 
> 时间：2012-06-14T05:33:41.520
> 
> 标签：javascript, jquery, spring-mvc

我正在尝试使用 POST 方法调用我的 Spring MVC 控制器的 post 方法，这是我的控制器的方法

```
@Controller
@RequestMapping("springSecurity/login.json")
public class SpringSecurityLoginController
{

    @RequestMapping(method = RequestMethod.GET)
        @ResponseBody
        public SpringSecurityLoginStatus getStatus()
        {
            return springSecurityLoginService.getStatus();
        }

        @RequestMapping(method = RequestMethod.POST)
        @ResponseBody
        public SpringSecurityLoginStatus login(@RequestParam("j_username") final String username,
                @RequestParam("j_password") final String password, final HttpServletRequest request, final HttpServletResponse response)
        {

            LOG.info("Starting login process");
            return springSecurityLoginService.login(username, password, request, response);
        }
} 
```

## HTML

```
<form:form action="${request.contextPath}/j_spring_security_check" class="login-form " id="loginForm"  method="post" commandName="loginForm">

<form:input path="j_username" class="text" id="login_id" value="" name ="j_username"/>
<form:password path="j_password" class="text" value="Password" name="j_password" id="j_password"/>
<input type="submit" class="submit" value="LOGIN" id="login" />
</form:form> 
```

这是我的 Jquery 代码

```
jQuery("#login").live('click', function(e) {
        e.preventDefault();

        jQuery.ajax({url: getHost() + "${request.contextPath}/springSecurity/login.json",
            type: "POST",
            beforeSend: function(xhr) {
                xhr.withCredentials = true;
            },
            data: jQuery("#loginForm").serialize(),
            success: function(data, status) {
                if (data.loggedIn) {
                   // location.href = getHost() + '${ctx}/users';
                    //login_pannel

                } else {
                    loginFailed(data);
                }
            },
            error: loginFailed
        });
    }); 
```

但是上面的代码正在调用

```
@RequestMapping(method = RequestMethod.GET)
@ResponseBody
public SpringSecurityLoginStatus getStatus() 
```

并不是

```
@RequestMapping(method = RequestMethod.POST)
@ResponseBody
public SpringSecurityLoginStatus login(@RequestParam("j_username") final String username,
@RequestParam("j_password") final String password, final HttpServletRequest request, final HttpServletResponse response) 
```

我不确定为什么会发生这种行为

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:16:27.993

```
@Controller
@RequestMapping("/springSecurity")

public class SpringSecurityLoginController
{

    @RequestMapping(value="/login.json",method = RequestMethod.GET)
        @ResponseBody
        public SpringSecurityLoginStatus getStatus()
        {
            return springSecurityLoginService.getStatus();
        }

        @RequestMapping(value="/login.json",method = RequestMethod.POST)
        @ResponseBody
        public SpringSecurityLoginStatus login(@RequestParam("j_username") final String username,
                @RequestParam("j_password") final String password, final HttpServletRequest request, final HttpServletResponse response)
        {

            LOG.info("Starting login process");
            return springSecurityLoginService.login(username, password, request, response);
        }
} 
```

Make this small change and try.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T07:36:52.937

我猜您正在使用为普通 HTTP POST 设计的服务器端代码，然后在成功后进行重定向 GET。

如果您想使用 Ajax（并且为用户登录使用 Ajax 是一种非常危险的情况，不能掉以轻心），那么您希望返回更合适的内容，例如 JSON，而不是进行重定向。

在 Firebug for Firefox 中，在 Net 选项卡中，打开该 302 响应并查看响应标头。我打赌你会发现那里有一个 Location 标头告诉浏览器重定向。

# android - 在重新启动时保持“熄灯”模式 (View.setSystemUiVisibility)

> ID：11027193
> 
> 赞同：10
> 
> 时间：2012-06-14T05:33:50.793
> 
> 标签：android

当我的 android 应用在最近的手机和平板电脑上运行时，我正在为它设置“熄灯”模式。在我的 onCreate() 方法中，我添加了：

```
View rootView = getWindow().getDecorView();
rootView.setSystemUiVisibility(View.STATUS_BAR_HIDDEN); // aka View.SYSTEM_UI_FLAG_LOW_PROFILE 
```

这比我想象的要好。在我的 Android 3.2 平板电脑上，状态栏以低调模式启动（栏上的所有按钮都替换为点）。如果我与栏上的按钮交互，它将变得正常，然后返回低调模式（例如，如果我从状态栏检查配置/通知窗口）。所以看起来这更像是我的应用程序的属性，而不是直接隐藏 UI 的“命令”。

但是，有两个极端情况没有处理。首先，如果用户在没有点击任何点的情况下点击状态栏，状态栏就会变为活动状态。它永远不会回到低配置模式，直到用户实际与栏上的某些内容交互（例如，查看通知或截取屏幕截图）。因此，如果他们返回与我的应用程序交互，状态栏将不再处于低调模式。（Gallery 应用程序似乎也有这个问题，所以可能不只是我。）第二个角落案例是来自锁定屏幕的简历。如果我点击电源按钮锁定平板电脑，然后将其解锁并恢复应用程序，状态栏将完全可见（并且与之交互不会改变任何内容）。（图库应用程序没有这个问题。）

一些博客文章建议我可以设置一个处理程序来监听系统 UI 可见性的变化，然后在它变得可见时重新隐藏 UI。像这样：

```
rootView.setOnSystemUiVisibilityChangeListener(
  new View.OnSystemUiVisibilityChangeListener() {
    @Override
    public void onSystemUiVisibilityChange(int visibility) {
      if (visibility == View.STATUS_BAR_VISIBLE) {
        game.flagUIIsVisible();
      }
    }
  }); 
```

在我的例子中，`game`对象上的方法只是设置了一个标志，表示 UI 不可见。稍后，如果我的应用程序中有任何触摸事件（它们由同一个`game`对象处理），并且设置了此标志，那么我再次调用 STATUS_BAR_HIDDEN 调用。

但是，使用这些回调对 UI 没有明显的影响。我可以看到从一些日志消息中调用了正确的处理程序，并且我可以看到正在调用侦听器。

我还尝试在我的路径中调用 STATUS_BAR_HIDDEN 调用`onResume`，但这也没有什么不同。

我正在寻找有关这是某种已知错误的信息，或有关 Gallery 应用程序可能正在做什么的提示（假设它做的事情不同）。或对其他 API 尝试的建议（或其他可能相关的细节）。

我正在使用 libGDX，而我的应用程序只有一个视图，所以它非常简单。该视图也被设置为全屏，libGDX 没有标题。我在清单中将 targetSdkVersion 设置为 15。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T16:43:10.253

我怀疑 Android 3.2 中存在错误，因为我可以通过在`onResume`. 不需要`OnSystemUiVisibilityChangeListener`。

具体来说，在我的`onResume`路径中，我有这样的代码：

```
View rootView = getWindow().getDecorView();
rootView.setSystemUiVisibility(View.STATUS_BAR_VISIBLE);
rootView.setSystemUiVisibility(View.STATUS_BAR_HIDDEN); 
```

看似不必要的使状态栏可见的调用，似乎使后续调用使状态栏隐藏在解锁设备后真正起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-07T12:46:43.050

Android 4.2 在这里，在三星平板电脑上 - 你的解决方案对我不起作用，我实际上设法用在 onSystemUiVisibilityChange 之后触发的 ValuAnimator 和 onAnimationEnd 监听器做到了这一点

```
 topView.setOnSystemUiVisibilityChangeListener(new View.OnSystemUiVisibilityChangeListener() {
          @Override
          public void onSystemUiVisibilityChange(int visibility) {
             hideMenu();
          }
        });

    private void hideMenu(){

    ValueAnimator hideAnim = ValueAnimator.ofInt(1,2);
    hideAnim.setDuration(1);
    hideAnim.addListener(new AnimatorListenerAdapter() {
        @Override
        public void onAnimationEnd(Animator animation) {
            topView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE);
        }
    });
    hideAnim.start();

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T16:10:57.307

这解决了我的问题：

```
rootView.setOnSystemUiVisibilityChangeListener(new View.OnSystemUiVisibilityChangeListener() {
    @Override
    public void onSystemUiVisibilityChange(int visibility) {
        if (visibility == View.SYSTEM_UI_FLAG_VISIBLE) {
            rootView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_VISIBLE);
            rootView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE);
        }
    }
}); 
```

谢谢PT！

# android - 如何通过应用程序维护侧面图像图标？

> ID：11027194
> 
> 赞同：0
> 
> 时间：2012-06-14T05:33:55.117
> 
> 标签：android, xml, sidebar, android-image

！[在此处输入图像描述][1]我正在开发 Android XML 文件。在我的主要 XML 中，我们有 5 个服务图像图标。如果我单击相应服务 XML 正在打开的一个服务图标。但我需要是对应的 XML，在 XML 文件的左侧有 5 个服务图像我该怎么做。请查看我的图片以及我如何在 Android 中做

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:28:04.790

您可以使用片段（一个用于按钮，另一个用于内容）。您可以在布局 xml 文件中包含按钮栏 xml，确保您对横向和纵向都有正确的配置。您可以将 ActionBar 和 ActionBar Compat 用于 3.0 之前的设备。

ActionbarCompat：http: [//developer.android.com/resources/samples/ActionBarCompat/index.html](http://developer.android.com/resources/samples/ActionBarCompat/index.html)

包括：[http ://www.curious-creature.org/2009/02/25/android-layout-trick-2-include-to-reuse/](http://www.curious-creature.org/2009/02/25/android-layout-trick-2-include-to-reuse/)

# sql-server-2008 - 数据库查询数据到 SQL Server 2008 中的字符串

> ID：11027198
> 
> 赞同：0
> 
> 时间：2012-06-14T05:34:43.053
> 
> 标签：sql-server-2008

我有一个像这样的查询

```
SELECT EmployeeName FROM Employee 
```

查询结果将是：

```
Mr. Kamal
Mr. Karim
Mr. Rahim
Mr. Jamal 
```

但是我需要 ：

```
Mr. Kamal , Mr. Karim, Mr. Rahim, Mr. Jamal 
```

是否可以通过单个查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:56:50.900

你可以这样做：

```
# DATA SOURCE NAME
$dsn = "dbi:mysql:$database:localhost:3306";

# PERL DBI CONNECT
$connect = DBI->connect($dsn, $user, $pw);

# PREPARE THE QUERY
$query = "SELECT EmployeeName FROM  Employee ORDER BY id";
$query_handle = $connect->prepare($query);

# EXECUTE THE QUERY
$query_handle->execute();

# BIND TABLE COLUMNS TO VARIABLES
 $query_handle->bind_columns(undef, \$id);

 # LOOP THROUGH RESULTS
 while($query_handle->fetch()) {
   print "$employeeName" ,;
} 
```

# ruby-on-rails-3 - 在rails 3中转换map.with_options

> ID：11027204
> 
> 赞同：0
> 
> 时间：2012-06-14T05:35:07.000
> 
> 标签：ruby-on-rails-3, routes, ruby-on-rails-2

以下是**redmine 的 todos 插件的**路线，但它采用 rails 2 方式

```
 map.resources :todos, :name_prefix => 'project_', :path_prefix => '/projects/:project_id',
  :member => {:toggle_complete => :post }, :collection => {:sort => :post}

 map.with_options :controller => 'mytodos' do |mytodos_routes|
  mytodos_routes.new_personal_todo 'mytodos/:parent_id/new', :action => 'new'
  mytodos_routes.connect 'mytodos/:parent_id/new.:format', :action => 'new'
 end 
```

请帮我以rails 3方式转换它。
谢谢。

**编辑**：这是我所做的，但不知道天气是否正确

```
 RedmineApp::Application.routes.draw do
  scope ':project_id' do

resources :todos, :name_prefix => 'project_' do

  member do
    post :toggle_complete
  end

  collection do
    post :sort
  end

 end

end

 scope ':user_id' do

  resources :todos, :name_prefix => 'user_' do

  member do
    post :toggle_complete
  end

  collection do
    post :sort
  end

end

   end

   match 'mytodos/index',:to => 'mytodos#index', :via => 'get' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:54:45.213

看起来您的范围调用不正确。

但更重要的是……如果你已经完成了工作，你怎么不知道它是否有效？

# php - 我希望用户 ID 显示在 URL 栏上

> ID：11027206
> 
> 赞同：0
> 
> 时间：2012-06-14T05:35:19.000
> 
> 标签：php

我有一个名为 profile.php 的 php 文件，如果您在 URL 中键入 mywebsite.com/profile.php，您将转到您的个人资料，我希望其他个人资料显示为与其 ID 的链接，例如让我们说我想查看 Bob 的个人资料，他的 ID 是 25，我会去 mywebsite.com/profile.php?ID=25 或类似的东西，我该如何实现？

谢谢你。

伙计们，我在这方面遇到了很多麻烦，所以这是我为 profile.php 提供的代码，也请让我知道当用户单击名称时我应该怎么做，这也需要他们进行配置，这有很多麻烦伙计们谢谢你们！！

```
<?php 

session_start();
if (!isset($_SESSION['loggedin']) || $_SESSION['loggedin'] == false) {

header( 'Location: index.php' ) ;       
exit;
} 

include('get-info.php');

if ($_SESSION['email']) {

}else{
    header( 'Location: profile.php' ) ;
    }

?>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

    <head>
    <link rel="Icon" href="images/ricon.ico" >

        <title>

            Rate-Away | Profile

        </title>

        <link href='css.css' rel='stylesheet' type='text/css' />

    </head>

    <body class='home-body' >

        <div class='home-nav-bar'>

            <div class='home-nav-bar-content'>

                <a href="home.php"><img src='images/rateaway.png' class='home-nav-bar-logo' /></a>
                        <div class='home-nav-bar-links-container' >

                        <div class='dropdown'>
                        <ul>

                            <li class='nav-options'>

                                <a href="#" class='options-link' >Options</a>

                                <ul class='drop-down-options'>

                                    <li><a href="home.php" class='drop-down-links'>Home</a></li>
                                    <li><a href="#" class='drop-down-links'>Profile</a></li>
                                    <li><a href="settings.php" class='drop-down-links'>Settings</a></li>
                                    <li><a href="logout.php" class='drop-down-links'>Logout</a></li>

                                </ul>

                            </li>

                        </ul>

                    </div>  

                </div>

            </div>

        </div>

        <div class='home-main-content' >

            <div class='profile-current-info'>

                <p class='profile-name'> <?php get_info($_SESSION['email'], 'name'); ?> </p>

                <img src='<?php get_info($_SESSION['email'], 'profilepic'); ?>' class='profile-pic'/>

                <p class='profile-dob' > Born: <?php get_info($_SESSION['email'], 'dob_day'); ?> </p>

                <p class='profile-country' > Currently lives in: <?php get_info($_SESSION['email'], 'country'); ?> </p>

                <p class='profile-gender' > Gender: <?php get_info($_SESSION['email'], 'gender'); ?> </p>

            </div>

            <div class='profile-edit-info' >

            </div>

        </div>

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:48:17.273

```
 <a href="profile.php?ID=<?=$id?>">My Profile</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:46:41.133

使用`$_GET`通用变量

假设有人打开`profile.php?id=25`

然后在php标签中，如果你写

```
$idtoload=$_GET['id']; 
```

`$toload`将具有值 25。您可以在此之后继续您的数据库连接..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T05:49:32.670

在您的 profile.php 代码中，您可以通过使用从 url 中获取 id

```
$_GET['id'] 
```

然后，当您显示您的页面时......例如，您将检查 html 部分是否有通过使用“isset”或检查 id 是否为空传递的 id，然后根据例如显示页面：

```
 <?php 

if isset($_GET['id']){
    $userid = $_GET['id'];
    //CHECK THE DATABASE FOR $USERID NOW BUT MAKE SURE YOU mysql_real_escape_string($userid);
}else {
    //print users profile
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T05:52:04.993

假设您有某种用户数据数组：

```
$people = array(
    1 => array('name'=>"Harry", 'id'=>1),
    2 => array('name'=>"Sally", 'id'=>2)
); 
```

然后，无论您在哪里写出链接：

```
<a href="/profile.php?ID=<?php echo $people[1]['id'] ?>"><?php echo $people[1]['name'] ?></a> 
```

会给你：

```
<a href="/profile.php?ID=1">Harry</a> 
```

显然，这是一个简单而人为的示例，但是您需要做什么有意义吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T05:38:52.423

您需要`$_GET['id']`通过 GET 方法使用和发送数据到`profile.php`页面

```
<form action="profile.php" method="GET">
My ID<input type="text" name="id">
<input type="submit" value="submit" />
</form> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T05:41:35.253

在您的表单标签中

```
<form method='GET' action='profile.php' ...>
... 
```

因此，当它发送时，您可以按照您想要的方式在顶部看到它。

# controller - 两个 STD_LOGIC_VECTORS 的按位与运算

> ID：11027214
> 
> 赞同：3
> 
> 时间：2012-06-14T05:35:43.393
> 
> 标签：controller, vhdl, vga

嘿，我想知道在 VHDL 中是否有可能将两者`STD_LOGIC_VECTORS`结合在一起。例如，我正在编写一个将字符输出到 VGA 监视器的 VHDL 程序。我有一个向量`PixelRow: IN STD_LOGIC_VECTOR(9 DOWNTO 0)`和`PixelColumn: IN STD_LOGIC_VECTOR(9 DOWNTO 0)`。我想要做的是有一个`STD_LOGIC`输出，它采用两个像素向量并将它们与另一个向量进行与运算，例如。

```
 Output <= (PixelRow AND NOT "0000000000") OR (PixelColumn AND NOT "0000000000") OR      
              (PixelRow AND NOT "0111011111") OR (PixelColumn AND NOT "1001111111"); 
```

我希望这段代码可用于简化以下代码：

```
 Output <= ((NOT PixelRow(0) AND NOT PixelRow(1) AND NOT PixelRow(2) AND NOT   
              PixelRow(3) AND NOT PixelRow(4) AND NOT PixelRow(5) AND NOT PixelRow(6)      
              AND NOT PixelRow(7) AND NOT PixelRow(8) AND NOT PixelRow(9)))
          OR ((NOT PixelRow(0) AND PixelRow(1) AND PixelRow(2) AND PixelRow(3) AND 
              NOT PixelRow(4) AND PixelRow(5) AND PixelRow(6) AND PixelRow(7) AND 
              PixelRow(8) AND PixelRow(9)))
          OR ((NOT PixelColumn(0) AND NOT PixelColumn(1) AND NOT PixelColumn(2) AND 
              NOT PixelColumn(3) AND NOT PixelColumn(4) AND NOT PixelColumn(5) AND NOT 
              PixelColumn(6) AND NOT PixelColumn(7) AND NOT PixelColumn(8) AND NOT 
              PixelColumn(9)))
          OR ((PixelColumn(0) AND NOT PixelColumn(1) AND NOT PixelColumn(2) AND 
              PixelColumn(3) AND PixelColumn(4) AND PixelColumn(5) AND PixelColumn(6) 
              AND PixelColumn(7) AND PixelColumn(8) AND PixelColumn(9))); 
```

较大的代码块在屏幕周围绘制了一个框。我希望有一个更简单的方法来做到这一点。有人知道如何简化此代码吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T05:55:47.330

我不清楚你需要什么和/或，以及你需要减少什么。

当然有返回相同大小的向量的`and`和`or`位向量运算符。

如果您需要测试`PixelRow`和之间的相等/不等式`"0000000000"`，那么您可以编写：`PixelRow /= "0000000000"`或`PixelRow = "0000000000"`.

如果您需要将向量和减少`vect : std_logic_vector(7 downto 0)`到一位`bit : std_logic`，最简单的方法可能是使用一个过程：

```
process (vect) is
    variable tmp : std_logic;
begin
    tmp := '1';
    for I in 7 downto 0 loop
        tmp := tmp and vect(I);
    end loop;
    bit <= tmp;
end process; 
```

如果您需要经常执行此操作，则可以定义 a`function`而不是 a`process`来执行此操作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T06:05:59.203

如果您只想在 VHDL 中对两个 std_logic_vector 进行按位与运算，可以这样做：

```
signal a : std_logic_vector(15 downto 0);
signal b : std_logic_vector(15 downto 0);
signal x : std_logic_vector(15 downto 0);

x <= a AND b; 
```

Google 可以帮助您处理其余的按位运算符（它们非常直观，AND、NAND、OR、NOR、NOT 等）

如果你想减少这个：

```
Output <= ((NOT PixelRow(0) AND NOT PixelRow(1) AND NOT PixelRow(2) AND NOT   
...
          AND PixelColumn(7) AND PixelColumn(8) AND PixelColumn(9))); 
```

那么这很容易。

查看 AND 运算符真值表，您会发现唯一的情况是：

```
output <= PixelRow(0) AND PixelRow(1) AND 
    ... AND PixelRow(8) AND PixelRow(9) 
```

减少到 '1' 是 PixelRow = "1111111111";

因此，异步地，代码可以替换为：

```
output <= '1' when (PixelRow = "1111111111") else '0' 
```

同时列和行：

```
output <= '1' when (PixelRow = "1111111111") OR
                   (PixelColumn = "1111111111") else 
          '0'; 
```

上面提到的principals可以扩展到原帖中提到的其他操作，比如：

```
other_value <= "0111011111";
output <= '1' when ((PixelRow AND (NOT(other_value))) = "111111111") else '0' 
```

将列添加到方程中和/或同步执行操作留给读者作为练习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:39:53.163

在我看来，您真正想要做的是比较`PixelRow`并`PixelCol`与一些数值？

使它成为一个`unsigned`向量并执行类似的操作（我组成了数字 100 和 200 - 您可能最好为它们定义整数常量以使您的代码自记录）：

```
output <= '1' when pixelRow = 0 or pixelCol = 0 or pixelRow = 100 or pixelCol = 200
          else '0'; 
```

让合成器找出逻辑。

# c# - 获得焦点时突出显示 WPF 控件

> ID：11027215
> 
> 赞同：5
> 
> 时间：2012-06-14T05:35:48.900
> 
> 标签：c#, wpf, resourcedictionary

我正在开发一个有很多屏幕的 WPF 应用程序，每个屏幕上都有很多控件。确定哪个控件具有焦点变得非常困难。

所以我想突出显示当前关注它的控件。它可以是文本框、按钮、组合框、列表框或网格。

如果我们可以使用样式和触发器来做到这一点会更好。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T06:01:28.420

您应该为正确的事件使用触发器。在你的情况下，它是`IsFocused`. 简单的例子：

```
<Trigger Property="IsFocused" Value="true">
    <Setter Property="BorderBrush" Value="Red" />
    <Setter Property="BorderThickness" Value="1" />
</Trigger> 
```

`Style`如果要将此样式应用于**特定**控件类型（`TargetType="{x:Type TextBox}"`例如，使用 ），则应使用标记。

如果您想应用于应用程序中的**所有控件**类型，那么您应该考虑使用只有这种触发器的基本样式，而不是在`BasedOn`属性的帮助下在自定义样式中继承它： `<Style TargetType="{x:Type TextBox}" BasedOn="{StaticResource BaseFocusStyle}">`

如何做到这一点的一个很好的例子是一个 SO 问题：“[如何使 Style.Triggers 触发要应用的不同命名样式](https://stackoverflow.com/questions/1183982/wpf-how-to-make-style-triggers-trigger-a-different-named-style-to-be-applied)”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:01:47.110

我建议在每个控件的自定义样式中使用视觉状态。所有标准控件都将支持这种视觉状态。例如，查看 MSDN 样式的[按钮](http://msdn.microsoft.com/en-us/library/ms753328)，您会注意到 Focused 的视觉状态。[这篇](http://msdn.microsoft.com/en-us/library/cc903963%28v=vs.95%29.aspx)MSDN 文章也可能对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T06:42:05.610

您也可以尝试为此行为创建一个[装饰器；](http://msdn.microsoft.com/en-us/library/ms743737.aspx)如果您愿意使用第 3 方开源库，请查看 codeplex 上的此实现，您还可以通过代码了解如何实现自己的装饰器 -

[http://uiannotations.codeplex.com/wikipage?title=Adorners&referringTitle=Documentation](http://uiannotations.codeplex.com/wikipage?title=Adorners&referringTitle=Documentation)

> ![在此处输入图像描述](../Images/aef76bb59888336c840c303223fa0590.png)

另一个类似的问题有关于其他解决方案的详细信息 -[可重用的方式在当前关注的任何元素周围放置一个鲜红色的框？](https://stackoverflow.com/questions/10771504/reusable-way-to-put-a-bright-red-box-around-whatever-element-currently-has-focus)

# android - 横向模式下视频视图不是全屏

> ID：11027216
> 
> 赞同：3
> 
> 时间：2012-06-14T05:35:56.733
> 
> 标签：android, xml, landscape

我正在使用用 xml 设计的视频视图。该视频在纵向模式下是全屏的，但是当它变成横向模式时，它是左对齐的，并且宽度和高度都被包裹而不是全屏。

我提到了这些，但仍然没有解决方案。

[全屏 VideoView 不居中](https://stackoverflow.com/questions/10518283/fullscreen-videoview-isnt-centered)

[Android-全屏视频查看](https://stackoverflow.com/questions/3776254/android-video-view-in-fullscreen)

有人知道这个问题的答案吗？

**更新：**这是我的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" android:layout_height="fill_parent">

<VideoView android:id="@+id/youtubewebView"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:layout_alignParentLeft="true" android:layout_alignParentTop="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentBottom="true" android:layout_gravity="fill" />

</RelativeLayout> 
```

**更新 2：**

```
public class VideoStreamingActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final VideoView videoView = (VideoView)findViewById(R.id.your_video_view);
    String videoUrl = "http://www.pocketjourney.com/downloads/pj/video/famous.3gp";
    try {
    Uri uri = Uri.parse(videoUrl);
    videoView.setVideoURI(uri);
    videoView.setMediaController(new MediaController(this));
    videoView.requestFocus();
    //videoView.start();
    videoView.setOnErrorListener(new OnErrorListener() {

        @Override
        public boolean onError(MediaPlayer arg0, int arg1, int arg2) {
            Toast.makeText(getApplicationContext(), "error", Toast.LENGTH_SHORT).show();
            return true;
        }
    });

    }catch (Exception e) {
        e.printStackTrace();
    }

    videoView.setOnPreparedListener(new OnPreparedListener() {

        public void onPrepared(MediaPlayer mp) {
            videoView.start();
        }
    });

}

@Override
protected void onPause() {
    Toast.makeText(getApplicationContext(), "pause", Toast.LENGTH_SHORT).show();
    super.onPause();
}

@Override
protected void onRestart() {
    Toast.makeText(getApplicationContext(), "restart", Toast.LENGTH_SHORT).show();
    super.onRestart();
}

@Override
protected void onResume() {
    Toast.makeText(getApplicationContext(), "resume", Toast.LENGTH_SHORT).show();
    super.onResume();
} 
```

}

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-14T06:42:14.590

你确定它没有填满屏幕吗？这对我来说可以。这是xml文件，

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <VideoView android:id="@+id/video"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
       android:layout_alignParentRight="true"
       android:layout_alignParentBottom="true"
       android:layout_alignParentTop="true"
        />
</RelativeLayout> 
```

**onCreate()**

```
VideoView video=null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    video=(VideoView)findViewById(R.id.video);
    video.setVideoURI(Uri.parse("http://www.pocketjourney.com/downloads/pj/video/famous.3gp"));
    video.start();
} 
```

**纵向模式的屏幕截图**

![在此处输入图像描述](../Images/884a801009dde3e8a36bba9632214b21.png)

**横向模式的屏幕截图**

![在此处输入图像描述](../Images/66c68fe096aabe8ac0e367ca872a1817.png)

# java - 在单个 JPanel 中添加多个图像

> ID：11027219
> 
> 赞同：3
> 
> 时间：2012-06-14T05:36:06.973
> 
> 标签：java, image, swing, netbeans, jscrollpane

我有一个`JPanel`我想在该面板中添加多个图像并提供一个垂直滚动来显示图像。图像可能具有不同的大小。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T06:04:10.713

对于大小不等的图像，在 a 中使用文本和/或“小图标”渲染器`JList`，并将其放在`PAGE_START`a 中`BorderLayout`。`JLabel`给它添加一个监听器，然后在 a中的 a`JScrollPane`中显示选中的图像`CENTER`。像这样的东西：

![图像列表](../Images/c48b7336085fc656dfe8eca136dd777e.png)

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import java.io.*;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.filechooser.FileNameExtensionFilter;
import javax.imageio.ImageIO;

public class ImageList {

    private JPanel gui;
    private JFileChooser fileChooser;
    FilenameFilter fileNameFilter;
    private JMenuBar menuBar;
    DefaultListModel model; 

    ImageList() {
        gui = new JPanel(new GridLayout());

        JPanel imageViewContainer = new JPanel(new GridBagLayout());
        final JLabel imageView = new JLabel();
        imageViewContainer.add(imageView);

        model = new DefaultListModel(); 
        final JList imageList = new JList(model);
        imageList.setCellRenderer(new IconCellRenderer());
        ListSelectionListener listener = new ListSelectionListener() {

            @Override
            public void valueChanged(ListSelectionEvent lse) {
                Object o = imageList.getSelectedValue();
                if (o instanceof BufferedImage) {
                    imageView.setIcon(new ImageIcon((BufferedImage)o));
                }
            }

        };
        imageList.addListSelectionListener(listener);

        fileChooser = new JFileChooser();
        String[] imageTypes = ImageIO.getReaderFileSuffixes();
        FileNameExtensionFilter fnf = new FileNameExtensionFilter("Images", imageTypes);
        fileChooser.setFileFilter(fnf);
        File userHome = new File(System.getProperty("user.home"));
        fileChooser.setSelectedFile(userHome);

        fileNameFilter = new FilenameFilter() {
            @Override 
            public boolean accept(File file, String name) {
                return true;
            }
        };

        menuBar = new JMenuBar();
        JMenu menu = new JMenu("File");
        menuBar.add(menu);
        JMenuItem browse = new JMenuItem("Browse");
        menu.add(browse);
        browse.addActionListener(new ActionListener(){
            @Override 
            public void actionPerformed(ActionEvent ae) {
                int result = fileChooser.showOpenDialog(gui);
                if (result==JFileChooser.APPROVE_OPTION) {
                    File eg = fileChooser.getSelectedFile();
                    // this will be an image, we want the parent directory
                    File dir = eg.getParentFile();
                    try {
                        loadImages(dir);
                    } catch(Exception e) {
                        e.printStackTrace();
                        JOptionPane.showMessageDialog(
                                gui, 
                                e, 
                                "Load failure!", 
                                JOptionPane.ERROR_MESSAGE);
                    }
                }
            }
        });

        gui.add(new JSplitPane(
                JSplitPane.HORIZONTAL_SPLIT, 
                new JScrollPane(
                        imageList, 
                        JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, 
                        JScrollPane.HORIZONTAL_SCROLLBAR_NEVER), 
                new JScrollPane(imageViewContainer)));
    }

    public void loadImages(File directory) throws IOException {
        File[] imageFiles = directory.listFiles(fileNameFilter);
        BufferedImage[] images = new BufferedImage[imageFiles.length];
        model.removeAllElements();
        for (int ii=0; ii<images.length; ii++) {
            model.addElement(ImageIO.read(imageFiles[ii]));
        }
    }

    public Container getGui() {
        return gui;
    }

    public JMenuBar getMenuBar() {
        return menuBar;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run() {
                ImageList imageList = new ImageList();

                JFrame f = new JFrame("Image Browser");
                f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                f.add(imageList.getGui());
                f.setJMenuBar(imageList.getMenuBar());
                f.setLocationByPlatform(true);
                f.pack();
                f.setSize(800,600);
                f.setVisible(true);
            }
        });
    }
}

class IconCellRenderer extends DefaultListCellRenderer {

    private static final long serialVersionUID = 1L;

    private int size;
    private BufferedImage icon;

    IconCellRenderer() {
        this(100);
    }

    IconCellRenderer(int size) {
        this.size = size;
        icon = new BufferedImage(size,size,BufferedImage.TYPE_INT_ARGB);
    }

    @Override
    public Component getListCellRendererComponent(
            JList list, 
            Object value, 
            int index, 
            boolean isSelected, 
            boolean cellHasFocus) {
        Component c = super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
        if (c instanceof JLabel && value instanceof BufferedImage) {
            JLabel l = (JLabel)c;
            l.setText("");
            BufferedImage i = (BufferedImage)value;
            l.setIcon(new ImageIcon(icon));

            Graphics2D g = icon.createGraphics();
            g.setColor(new Color(0,0,0,0));
            g.clearRect(0, 0, size, size);
            g.drawImage(i,0,0,size,size,this);

            g.dispose();
        }
        return c;
    }

    @Override 
    public Dimension getPreferredSize() {
        return new Dimension(size, size);
    }
} 
```

* * *

如果图像大小相同，请参阅[此答案](https://stackoverflow.com/a/9544652/418556)。（在规范澄清之前，这是答案的顶部。我留下了它，因为它是一个非常可爱的屏幕截图。）

![](../Images/5152bfee426943ad788953392691cfb2.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T08:26:06.730

结合评论对这个问题做出有用的回答：

添加多个组件，如`JLabel`s in`JPanel`并将图像设置为它们的图标，将整个面板添加到`JScrollPane`. 组件的层次结构如下：

> `JFrame`/ `JWindow` **->** `JScrollPane` **->** `JPanel` **->** `JLabel(s)`

其中**->**代表'*包含*'。

# solr - 字段 ID 在 solr 中被覆盖

> ID：11027223
> 
> 赞同：0
> 
> 时间：2012-06-14T05:36:26.420
> 
> 标签：solr, dataimporthandler

我在我的 solr 项目中使用以下代码：

```
<document>
<entity name="node" dataSource="opennms" query="select * from node" deltaImportQuery="select * from node">
<field column="foreignid" name="id"/>
<field column="nodelabel" name="label"/>
</entity>
<entity name="service" dataSource="opennms" query="select * from service" deltaImportQuery="select * from service">
<field column="serviceid" name="id"/>
<field column="servicename" name="service_name"/>
</entity>
</document> 
```

在某些情况下，两个实体的 id 是相同的。问题是当我尝试导入数据时，第一个表中的 id 被第二个表中的 id 覆盖。有没有一种方法可以让我同时获得这两者？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T05:59:07.697

我认为这完全正常，因为 solr 模式中的 id 列被声明为 uniquekey。当我们遇到同样的问题时，我们所做的解决方法是将表名与 id 连接起来以使其唯一。在你的追逐中，类似：

```
select concat('node-', id) as nodeId from node 
```

和

```
select contact('service-', id) as serviceId from service 
```

**concat**函数会因您使用的数据库类型而异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:00:43.117

Solr 中的 ID 必须是唯一的。如果您插入具有相同 ID 的实体，则先前的记录将被覆盖。
Solr 不更新记录。它删除并重新插入记录。
如果您想要这两条记录，请定义一个唯一的 ID。
例如，将节点和服务添加到 id，这样节点和服务就不会相互覆盖。

```
SELECT A.*, 'NODE_' || ID PRIMARY_ID FROM NODE A

SELECT A.*, 'SERVICE_' || ID PRIMARY_ID FROM SERVICE A 
```

# iphone - 删除 NSDocumentDirectory 中的项目

> ID：11027229
> 
> 赞同：1
> 
> 时间：2012-06-14T05:37:24.237
> 
> 标签：iphone, ios, xcode

我正在使用`HSImageSidebarView`，当点击图像时，`AlertView`如果您想删除它，则会弹出一个。这是它删除侧栏中显示的图像的方式：

```
-(void)sidebar:(HSImageSidebarView *)sidebar didTapImageAtIndex:(NSUInteger)anIndex {
    NSLog(@"Touched image at index: %u", anIndex);
    if (sidebar.selectedIndex == anIndex) {
        UIActionSheet *sheet = [[UIActionSheet alloc] initWithTitle:@"Delete image?"
                                                           delegate:self
                                                  cancelButtonTitle:@"Cancel"
                                             destructiveButtonTitle:@"Delete" otherButtonTitles:nil];

        self.actionSheetBlock = ^(NSUInteger selectedIndex) {
            if (selectedIndex == sheet.destructiveButtonIndex) {
                [sidebar deleteRowAtIndex:anIndex];
                self.actionSheetBlock = nil;
            }
        };

        [sheet showFromRect:[sidebar frameOfImageAtIndex:anIndex]
                     inView:sidebar
                   animated:YES];

    }
}
- (void)sidebar:(HSImageSidebarView *)sidebar didRemoveImageAtIndex:(NSUInteger)anIndex {
    NSLog(@"Image at index %d removed", anIndex);
    [images removeObjectAtIndex:anIndex];
} 
```

顺便说一句，我的图像来自`NSDocumentDirectory`，但我想添加的是当在侧栏中点击图像时，它也会删除`NSDocumentDirectory`.

我知道这是如何删除中的图像`NSDocumentDirectory`，但我不知道如何在上面的代码中使用它。

```
- (void)removeImage:(NSString*)fileName {
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.png", fileName]];
    [fileManager removeItemAtPath: fullPath error:NULL];
    NSLog(@"image removed");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:59:43.393

I hope this may fix it:

```
 - (void)sidebar:(HSImageSidebarView *)sidebar didRemoveImageAtIndex:(NSUInteger)anIndex {
    NSLog(@"Image at index %d removed", anIndex);

```
//remove the image from Document dir
[self removeImage:[images objectAtIndex:anIndex]];

//then remove the image from the Array.
[images removeObjectAtIndex:anIndex]; 
```

}

```

```
- (void)removeImage:(NSString*)fileName {
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.png", fileName]];
    [fileManager removeItemAtPath: fullPath error:NULL];
    NSLog(@"image removed");
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:02:35.100

You need to keep a list of file names along with your images. Or, in your case, I saw in your last question that your filenames are predictable. So just substitute Document Directory/*image+index*.png for `fullPath` in the above example. If that is not the case anymore, then you need to keep track of the filenames when you read them in, and store them in another array with the same indices.

# jquery - 如何防止滚动效果使我的屏幕在滚动时闪烁

> ID：11027233
> 
> 赞同：2
> 
> 时间：2012-06-14T05:37:52.103
> 
> 标签：jquery, html, css

到目前为止，使用 chrome 和 ff 在使用 scrollTo 功能时产生了令人讨厌的故障？有谁知道如何防止这种情况发生？
**[实时代码](http://designobvio.us/para/)**

**HTML**

```
 <ul class="wrapper">
    <li class="listItem"><img src="asset/img/logo.png" ></li>
    <li class="listItem"><a onclick="scrollTo('#container',500);" href="#">Company</a><span> / </span></li>
    <li class="listItem"><a onclick="scrollTo('.flexslider-container',500);" href="#">Service</a><span> / </span></li>
    <li class="listItem"><a onclick="scrollTo('#map',500);" href="#">Map</a><span> / </span></li>
    <li class="listItem"><a onclick="scrollTo('#footer',500);" href="#">Contact</a></li>
    <li class="listItem">
      <p>250-610-9100</p>
    </li>
  </ul> 
```

**脚本**

```
<script type="text/javascript">
function scrollTo(o, s) {
    var d = $(o).offset().top;
    $("html:not(:animated),body:not(:animated)").animate({
        scrollTop: d
    }, s);
}
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T05:46:01.157

您应该通过 附加事件`.on()`，而不是将代码推入`onclick`属性。

（更多）正确的解决方案是为您提供链接`class`：

```
<a href="..." class="menu-link">...</a> 
```

然后是一些花哨的`data`属性：

```
<a href="..." class="menu-link" data-target="#container" data-duration="500">...</a> 
```

在您的代码中，添加以下内容：

```
$(document).ready(function() {
  $('.menu-link').on('click', function(event) {
    event.preventDefault();  // <---- This is the magic stuff

    scrollTo($(this).data('target'), $(this).data('duration'));
  });
}); 
```

基本上，你给你的元素提供了可以用 jQuery`.data()`函数读取的特殊属性。然后，不是为每个链接添加一个函数调用，而是将一个魔术函数附加到*所有*链接。

* * *

如果您想保留当前代码 (ehh)，只需在每个属性`return false;`的末尾添加：`onclick`

```
<a onclick="scrollTo('.flexslider-container',300);return false;" href="#">Service</a> 
```

这可以防止发生默认操作（滚动到页面顶部）。

我推荐我的第一个解决方案。如果您仅将 jQuery 发挥到其潜力的三分之一，那么您就没有为 jQuery 做任何正义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:50:53.840

用于`.stop()`清除动画队列

```
function scrollTo(o, s) {
        var d = $(o).offset().top;
        $("html:not(:animated),body:not(:animated)").stop().animate({
            scrollTop: d
        }, s);
    } 
```

在谈论锚点时，您应该使用以下方法防止默认锚点行为`preventDefault()`：

```
$('.wrapper a').on('click', function(e){
    e.preventDefault();
}); 
```

# java - eclipse无法导入项目

> ID：11027236
> 
> 赞同：3
> 
> 时间：2012-06-14T05:38:29.760
> 
> 标签：java, eclipse

我无法在 Eclipse 中添加项目。我在“存档文件”部分的导入向导中添加文件位置，**但未显示完成按钮**。

文件被压缩。

我已经在我的 eclipse 3.2.1 中导入了七个文件。这是我遇到问题的原因吗？

我以前没有将这些文件导入到 eclipse 中。

问题仅出现在某些特定项目中，而我可以轻松导入其他项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:02:28.950

The Import > "Existing Project into Workspace" feature is suited to import projects which are already configured for Eclipse. In this case, these projects should already have a .project file.

On the other hand, the Import > "Archive File" and "File System" options only import a directory or an archive content into a folder of a project that already resides in Eclipse Workspace.

Which one is the case?

If what you want to do is to import an archived file as though it were a project, then what you have to do is:

1.  Create a blank new project in Eclipse.

2.  Import the archived file into the new project base dir.

3.  Configure the imported content appropriately (i.e. define source directory and other proper configurations).

For additional information, please refer to [Eclipse Online Help](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.user/reference/ref-70.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-13T16:44:19.923

Appcelerator 的 Titanium Studio 3.2.3 版本也出现这种情况，所以问题肯定出在 Eclipse - 令人抓狂！除了创建一个新的空白项目然后将所有内容复制回其中之外，我还没有找到解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T05:51:00.860

检查存档文件是否是eclipse项目？？？一旦这些链接导入一个项目

[http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-importproject.htm](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-importproject.htm)

[http://docs.codehaus.org/display/GFS/howto+import+project+into+eclipse](http://docs.codehaus.org/display/GFS/howto+import+project+into+eclipse)

[http://agile.csc.ncsu.edu/SEMaterials/tutorials/import_export/](http://agile.csc.ncsu.edu/SEMaterials/tutorials/import_export/)

# javascript - 如何在 JQuery 中调整图像大小

> ID：11027237
> 
> 赞同：0
> 
> 时间：2012-06-14T05:38:30.010
> 
> 标签：javascript, jquery, image

在这里改变大小？我找不到正确的方法

```
var img = new Image();
img.src = newImg.ImagePath; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:41:21.190

```
$(img).width(width_in_pixels).height(height_in_pixels); 
```

您`$(img)`也可以使用`$('selector')`. 如果你想创建一个新的，使用这个：

```
$('<img/>', {src: 'url to the image'}).width(width_in_pixels).height(height_in_pixels).appendTo('#someElement'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T05:44:08.743

一个`100px x 100px`图像。

```
var img    = new Image();
img.src    = newImg.ImagePath;
img.width  = 100;
img.height = 100; 
```

# iphone - 如何避免我的应用程序在后台运行并跟踪我的位置时被终止？

> ID：11027239
> 
> 赞同：2
> 
> 时间：2012-06-14T05:38:48.247
> 
> 标签：iphone, ios, background, location, terminate

我正在制作一个应用程序，它需要每次都跟踪用户的位置。它也可以在后台模式下工作。问题是当我多次使用其他应用程序时。其他应用程序可能会导致大量内存。我的应用程序有时会被系统终止。没有崩溃日志。所以我想知道一些原因。有什么办法可以避免我的应用程序被终止？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T06:07:30.120

你不能阻止应用程序被终止，但你能做的最好的事情是让它保持活力是当它进入后台时尽可能多的内存 - 缓存的图像，文件......同时停止任何正在运行的计时器，UI更新一切都很耗​​时。通过遵循 MVC 规则，最好的实现是创建一个单独的类（模型），它只负责位置更新（带有`CLLocationManager`内部，并且该类实现其委托方法）。所以在后台你应该做的唯一一件事就是收集接收到的位置点，`CLLocationManager`而不是别的。`-applicationWillTerminate`也在你身上实现这个方法`AppDelegate`. 仅当应用程序处于后台并且它将被终止（由操作系统或用户）并在内部保留 CoreData 中的位置点时才调用此方法，或者无论如何您都这样做......我有这样的方法和到目前为止，我的应用程序已经存活了 24 小时（当然还有充电）而没有被杀死。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T05:46:44.143

后台运行的应用程序取决于内存使用情况，电池寿命等。当后台运行许多应用程序时，您的应用程序可能会终止。我认为您不能永久在后台运行您的应用程序。

# php - 在 Zend Framework 中操作 XML 文档和更改内容

> ID：11027240
> 
> 赞同：-1
> 
> 时间：2012-06-14T05:38:50.993
> 
> 标签：php, xml, zend-framework, xml-parsing

我正在 Zend Framework 上构建一个应用程序，现在需要操作一个 xml 文件并更改它的少量内容，以便我可以将 xml 用作请求文件以从其他服务器获取响应。现在经过谷歌搜索，我发现 simplexml 比其他人更受欢迎，但我不确定哪种实现更适合 Zend Framework。任何建议都会非常有帮助。我的请求 XML 文件是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
    <aa>
        <bb>
            <cc>
                <dd>
                    <ee/>
                </dd>
                <ff>
                    <Identification _FirstName="******" _LastName="*****" _Num="********">
                        <gg/>
                    </Identification>
                </ff>
            </cc>
        </bb>
    </aa> 
```

现在，我需要能够更改 _FirstName、_LastName 和 Num 的值。我应该在 Zend Framework 中使用哪种 XML 操作方法以及如何使用？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:17:54.120

Zend Framework 提供了[`Zend_DOM`库](http://framework.zend.com/manual/en/zend.dom.html)，它建立在[PHP 的本地 DOM 扩展](http://php.net/dom)（链接我的）之上：

> `Zend_Dom`提供用于处理 DOM 文档和结构的工具。目前，我们提供了一个使用[XPath](http://www.w3.org/TR/xpath/)和[CSS 选择器](http://www.w3.org/TR/CSS2/selector.html)`Zend_Dom_Query`查询 DOM 文档的统一接口。

如果不需要选择器，则不需要`Zend_DOM`，但可以使用任何[原生 XML 扩展](http://php.net/manual/de/refs.xml.php)。

`Zend_DOM`参考指南中解释了如何使用：

> 要使用`Zend_Dom_Query`，您可以实例化一个`Zend_Dom_Query`对象，可选择将文档传递给查询（字符串）。一旦你有了一个文件，你可以使用`query()`or`queryXpath()`方法；每个方法都将返回一个`Zend_Dom_Query_Result`具有任何匹配节点的对象。

简而言之：

```
$dom = new Zend_Dom_Query($xmlString);
$results = $dom->query('Identification');
$identification = $results->current(); 
```

然后 $identification 将包含一个`DOMElement`您可以像任何其他`DOMElement`. StackOverflow 上有很多关于[如何更改 XML 文件中的值的](https://stackoverflow.com/search?q=change%20value%20in%20xml%20file%20php)示例，所以我不会在这里重复。

更改后`DOMElement`，您需要获取将`DOMDocument`更改后的文档序列化回 XML 的方法。为此，您可以使用

```
$doc = $identification->ownerDocument;
$doc->save('filename.xml'); // to save it to a file
$xmlString = $doc->saveXML(); // to save it to a variable 
```

有关 X(HT)ML 解析器的概述，请参见

*   [PHP 的最佳 XML 解析器](https://stackoverflow.com/questions/188414/best-xml-parser-for-php/3616044#3616044)或
*   [您如何在 PHP 中解析和处理 HTML/XML？](https://stackoverflow.com/questions/3577641/best-methods-to-parse-html/3577662#3577662)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:10:25.010

最好使用以下结构：

```
<Identification>
     <FirstName>*****</FirstName>
     <LastName>*****</LastName>
     <Num>*****</Num>
   </Identification> 
```

并使用 Zend_Config_Xml 类： http: [//framework.zend.com/manual/en/zend.config.adapters.xml.html](http://framework.zend.com/manual/en/zend.config.adapters.xml.html)

# android - 在用户不知情的情况下使用前置摄像头拍摄照片

> ID：11027246
> 
> 赞同：3
> 
> 时间：2012-06-14T05:39:09.303
> 
> 标签：android, android-camera

我想通过前置摄像头拍摄照片，而用户不知道他是在身份验证失败时被拍摄的。有人可以建议我怎么做吗？

谢谢，柴坦亚.K

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-14T06:12:05.047

不确定，但可以尝试

此代码是[Android：拍照而不显示预览](http://www.41post.com/3794/programming/android-take-a-picture-without-displaying-a-preview)

所以你可以把你想显示的预览屏幕，比如显示消息并说用户按下确定或任何其他更好的选项说用户按下按钮并按下捕获图像............

# db2 - XQUERY：使用非 XML 列选择数据

> ID：11027249
> 
> 赞同：0
> 
> 时间：2012-06-14T05:39:21.673
> 
> 标签：db2, xquery

我有具有以下结构的 DB2 表

CREATE TABLE DUMMY (ID CHARACTER(10) NOT NULL, RECORD XML NOT NULL)

我想使用 XQUERY 根据 ID 选择 RECORD 列中的数据。并对 RECORD 列中存在的数据执行一些 XQUERY 操作。

例如：我想选择 ID 为 1 的 RECORD。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:24:58.900

您可以使用该`db2-fn:sqlquery`功能来执行此操作。请参阅[文档](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/topic/com.ibm.db2.luw.xml.doc/doc/xqrfnsqq.html)。

# javascript - 如何从 servlet 传递 javascript 对象

> ID：11027251
> 
> 赞同：2
> 
> 时间：2012-06-14T05:39:38.577
> 
> 标签：javascript, jquery, ajax, servlets

我有一个 javascript 变量，它看起来像：

```
data = [{
                y: 55.11,
                color: colors[0],
                drilldown: {
                    name: 'MSIE versions',
                    categories: ['MSIE 6.0', 'MSIE 7.0', 'MSIE 8.0', 'MSIE 9.0'],
                    data: [10.85, 7.35, 33.06, 2.81],
                    color: colors[0]
                }
            }, {
                y: 21.63,
                color: colors[1],
                drilldown: {
                    name: 'Firefox versions',
                    categories: ['Firefox 2.0', 'Firefox 3.0', 'Firefox 3.5', 'Firefox 3.6', 'Firefox 4.0'],
                    data: [0.20, 0.83, 1.58, 13.12, 5.43],
                    color: colors[1]
                }
            }, {
                y: 11.94,
                color: colors[2],
                drilldown: {
                    name: 'Chrome versions',
                    categories: ['Chrome 5.0', 'Chrome 6.0', 'Chrome 7.0', 'Chrome 8.0', 'Chrome 9.0',
                        'Chrome 10.0', 'Chrome 11.0', 'Chrome 12.0'],
                    data: [0.12, 0.19, 0.12, 0.36, 0.32, 9.91, 0.50, 0.22],
                    color: colors[2]
                }
            }, {
                y: 7.15,
                color: colors[3],
                drilldown: {
                    name: 'Safari versions',
                    categories: ['Safari 5.0', 'Safari 4.0', 'Safari Win 5.0', 'Safari 4.1', 'Safari/Maxthon',
                        'Safari 3.1', 'Safari 4.1'],
                    data: [4.55, 1.42, 0.23, 0.21, 0.20, 0.19, 0.14],
                    color: colors[3]
                }
            }, {
                y: 2.14,
                color: colors[4],
                drilldown: {
                    name: 'Opera versions',
                    categories: ['Opera 9.x', 'Opera 10.x', 'Opera 11.x'],
                    data: [ 0.12, 0.37, 1.65],
                    color: colors[4]
                }
            }]; 
```

我希望这个变量根据我的数据库中的数据从 servlet 创建，当我从 servlet 作为正常响应类型传递这个值时，`(response.setContentType("text/html;charset=UTF-8");)`我无法处理它。即使你看到这个变量它不是一个有效的 json 对象，所以我不能使用 JSON.parse。

请指导我如何通过 ajax 调用获取此变量，ajax 调用中的数据类型是什么，servlet 中的响应内容类型是什么。或者，如果有其他方法可以做到这一点，请提供帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T05:53:17.940

在 servlet 端，将文本写入 text/plain 响应：

```
response.getOutputStream().write(myKindaJsonString.getBytes()); 
```

使用jquery的ajax来获取：

```
$.ajax({ 
           url: CONTEXT_PATH + '/YourServlet',  
           processData: false, 
           type: "GET",               
           success: function(response) {
            // your string is response now
           },
           error: function(response) { 
              alert("There was an error while trying to get value.");
           } 
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T05:47:26.560

由于您的数据引用了其他对象 ( `colors`)，因此使其 JSON 不兼容，为什么不使用`eval`？

```
var colors = [1,2,3,4,5,6,7,8];

var data;
eval("data = [{...}]");

... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T10:13:43.260

在服务器端，您可以使用属性创建 bean 类（或称为 DTO 对象）并为其设置值，同时将其更改为 JSON 的返回类型。它将解析为 json 字符串并将其发送回客户端在那里，您可以使用 parseJSON 从 json 字符串更改为 json 对象。

# java - 什么是最终内部类？

> ID：11027252
> 
> 赞同：10
> 
> 时间：2012-06-14T05:39:38.757
> 
> 标签：java, inner-classes

将非静态内部类声明为 是什么意思`final`？

我也在 google 和[stackoverflow.com](http://www.stackoverflow.com)上尝试了许多链接，但它们似乎都在处理内部类访问最终成员而不是最终内部类本身。我在谷歌上找到[了这个](http://www.janeg.ca/scjp/overload/inner.html)链接，但即使它没有解释它。

提前谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T05:51:39.377

创建顶级类`final`和创建内部类之间没有语义区别`final`：它告诉编译器您不能从该类继承。标记类`final`有时是为了让编译器跳过虚拟表查找，但这通常被认为是过早的微优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:49:54.843

它与被声明为 final 的外部类具有相同的语义：该类不能扩展。

考虑这个例子：

```
public class MyClass {
  public class A {
  }
  public class B extends A {
  }
} 
```

如果将 final 修饰符添加到 A 它将产生编译错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T07:24:01.750

好吧，在这种情况下，内部类与外部类没有任何不同。所以下面的代码是完全有效的。

```
class Outer {
 int some_member;

 class Inner {
 void method();
 }
}

class OuterExtendsInner extends Outer.Inner{

} 
```

众所周知，声明一个类 final 的目的是防止任何外部入侵者继承该类并利用其设施，就像我们在内部类的情况下可以做的那样。

# javascript - 如何克隆 ImageData？

> ID：11027254
> 
> 赞同：11
> 
> 时间：2012-06-14T05:39:47.933
> 
> 标签：javascript, object, canvas, clone, getimagedata

这是有效的，但我觉得这段代码很长。我正在寻找更好的主意。

```
var clone = function(imageData) {
  var canvas, context;
  canvas = document.createElement('canvas');
  canvas.width = imageData.width;
  canvas.height = imageData.height;
  context = canvas.getContext('2d');
  context.putImageData(imageData, 0, 0);
  return context.getImageData(0, 0, imageData.width, imageData.height);
}; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2018-01-03T13:31:06.673

ImageData[构造](https://developer.mozilla.org/en-US/docs/Web/API/ImageData/ImageData)函数接受图像数据数组。

```
const imageDataCopy = new ImageData(
  new Uint8ClampedArray(imageData.data),
  imageData.width,
  imageData.height
) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-13T15:20:50.023

[`TypedArray.prototype.set()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/set)可以直接复制数据。

```
var imageDataCopy = new Uint8ClampedArray(originalImageData.data);
imageDataCopy.data.set(originalImageData.data); 
```

这会将 的内容设置`imageDataCopy`为与 相同`originalImageData`。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2021-09-11T00:51:51.833

大多数情况下，只需将 分配给一个新变量就足够了`imageData`，就像：

```
myImgData=ctx.getImageData(0,0,c.width,c.height); //get image data somewhere
imgDataCopy = myImgData;   // clone myImgData 
```

...现在`imgDataCopy`包含`myImgData`. ‍♂️</p>

* * *

# 演示

下面的代码片段在 's 数组中创建了 4 个“帧”，`ImageData`然后循环遍历它们。

```
const c = document.getElementById('canvas'),
      ctx = c.getContext("2d");
var wh=70, iDatas=[], i=0,
    lines=[[10,10,wh-10,wh-10], [wh/2,5,wh/2,wh-5],  // ⤡,↕
           [wh-10,10,10,wh-10], [5,wh/2,wh-5,wh/2]]; // ⤢,↔
c.width=wh;
c.height=wh;

ctx.strokeStyle='blue'; //setup to draw
ctx.lineWidth=9;
ctx.lineWidth='round';

for(var [x1,y1,x2,y2] of lines){ 
  ctx.beginPath();
  ctx.moveTo(x1,y1); //draw something
  ctx.lineTo(x2,y2);
  ctx.stroke();
  var d=ctx.getImageData(0,0,c.width,c.height); //get imgdata
  iDatas.push( d ); //save imgdata to array
  ctx.clearRect(0, 0, c.width, c.height); //clear canvas
}

ctx.strokeStyle='green'; //❌has no effect: 
  //  ↑ shows that color data comes from the source (can't be changed)
ctx.lineWidth='round'; //❌has no effect: 
  //  ↑ shows that non-color styling does NOT come from source (CAN'T be changed)

//now you can refer to the image data as iData[i] where i= 0 to 3
drawFrame();
function drawFrame(){
  ctx.putImageData( iDatas[i],0,0); //draw imgData from array
  i=(i==3?0:i+1); //set next iteration #
  setTimeout(function(){ drawFrame() }, 100); //schedule next frame
}
```

```
canvas{ border:2px dotted salmon; }
```

```
<canvas id='canvas'></canvas>
```

# c# - 有没有一种快速的方法可以使用 Castle ActiveRecord 或 nHibernate 删除表中的所有行？

> ID：11027256
> 
> 赞同：0
> 
> 时间：2012-06-14T05:40:02.440
> 
> 标签：c#, .net, nhibernate, castle-activerecord

我正在尝试使用 Castle ActiveRecord 删除表中的所有行。通常，我会这样做：

```
DB.ParseError.DeleteAll(); 
```

然而，这个表恰好有大约 190 万行。上面的命令将做的是为表中的每一行发出一个单独的`SELECT`和`DELETE`，看起来像这样：

```
SELECT page0_.Id as Id29_0_, ... FROM Indexer.Pages page0_ WHERE page0_.Id=:p0;:p0 = b03665aa-37d0-4a2d-a04c-c232ebd94dbc [Type: Guid (0)]
SELECT page0_.Id as Id29_0_, ... FROM Indexer.Pages page0_ WHERE page0_.Id=:p0;:p0 = 11cb69e3-1c6a-4ac1-908b-084dfe859639 [Type: Guid (0)]
--- 1.9 million more of these
DELETE FROM Indexer.ParseErrors WHERE Id = :p0;:p0 = b03665aa-37d0-4a2d-a04c-c232ebd94dbc [Type: Guid (0)]
DELETE FROM Indexer.ParseErrors WHERE Id = :p0;:p0 = 11cb69e3-1c6a-4ac1-908b-084dfe859639 [Type: Guid (0)]
--- 1.9 million more of these 
```

这需要......好吧，我不知道需要多长时间，因为我没有耐心让它真正完成。

我想要它做的是发出一条 SQL 语句；这个：

```
DELETE FROM Indexer.ParseErrors; 
```

这是我到目前为止所尝试的：

```
ISessionFactoryHolder holder = ActiveRecordMediator.GetSessionFactoryHolder();
ISession session = holder.CreateSession(typeof(DB.ParseError));
IDbCommand cmd = session.Connection.CreateCommand();
cmd.CommandType = CommandType.Text;
cmd.CommandText = "DELETE FROM Indexer.ParseErrors;";
cmd.CommandTimeout = 600;
cmd.ExecuteNonQuery();
holder.ReleaseSession(session); 
```

这似乎可行，但对我来说似乎是一种 hack，因为它完全避免了模型和 ActiveRecord 框架。另外，这可能不适用于 NHibernate 的任何缓存。

有没有更*正式*的方法来删除一个表，而不是每行执行 2 条 SQL 语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T09:27:49.833

对于具有这么多记录的表，您绝对不希望它为每一行创建一个实体然后将其删除——这将花费很长时间。

如果您的映射中没有定义任何未在数据库中强制执行的级联规则，那么最简单的方法是使用 SQL 查询：

```
ActiveRecordBase<ParseError>.Execute(
    (s, i) => s.CreateSQLQuery("DELETE FROM ParseErrors").ExecuteUpdate(),
                                           null); 
```

这将使 NHibernate 缓存无效（因此它将与 NHibernate 二级缓存很好地配合使用），但它不会执行任何未在 db 中定义的级联（我怀疑这对您的情况很好）。如果数据库中没有任何级联，那么您必须手动执行它们。

如果您真的希望它使用要删除的实体，那么至少使用 StatelessSessionScope 这将阻止它至少将所有实体添加到会话中。

**更新：**

该`Execute()`方法是 的受保护成员`ActiveRecordBase<T>`，因此要从类外部调用它，您必须将其包装在公共静态方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T05:45:11.117

您可以使用 nHibernate 使用以下语句从表中删除所有记录。取决于级联规则。您可能必须先清除另一个表。

```
session.Delete("from Indexer.ParseErrors p"); 
```

[使用完整链接](http://nhibernate.sourceforge.net/NHibernateEg/NHibernateEg.Tutorial1A.html#NHibernateEg.Tutorial1A-CRUD.Delete)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T15:04:56.807

每次我过去处理这个问题时，我都做了类似的事情：

```
session.CreateSQLQuery("DELETE FROM FOO").ExecuteUpdate(); 
```

是的，它绕过了各种各样的东西，但我从来没有遇到过问题。

Ayende 有一篇[关于此](http://ayende.com/blog/1294/bulk-data-operations-using-nhibernate)的帖子，它使用批量复制来执行此操作，但似乎没有解决您对缓存的担忧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T14:37:05.023

你好迈克克里斯滕森，

是的，有一种方法。这不是一个好方法（我认为），但它比普通 SQL 更好：

```
session.CreateQuery(@"UPDATE " + typeof(?).FullName + " SET Property = :value")
       .SetParameter("value",valueVariable)
       .ExecuteUpdate(); 
```

[NHibernate 中的批量更新](https://stackoverflow.com/questions/780940/batch-update-in-nhibernate/2281239#2281239)

问候 Juy Juka

# html - 带有空格的值被转换为隐藏字段的标签参数

> ID：11027257
> 
> 赞同：0
> 
> 时间：2012-06-14T05:40:08.747
> 
> 标签：html, struts2

下面是我在 jsp 中的代码行 - struts2

```
<s:iterator value="bean.persons"  status="stat" >
  <input type="hidden" id="myname" name="myname" value="%{name}"></input>
</s:iterator>

public class Person {
    private String name;
    // getters and setters 
} 
```

当 "name" 包含带有空格的值时，名称值的第二部分将被转换为 html 中的 struts2 属性

例如，如果名称的值为“pramod ashok”，则隐藏字段的 html 代码将转换如下。

```
<input id="myname" type="hidden" ashok=" " value="pramod" name="myname"></input> 
```

请注意，值“ashok”已被视为属性。请提出一个解决方案来避免这种情况并具有“pramod ashok”而不是 pramod 的价值

# android - 地图在我的模拟器中不可见

> ID：11027258
> 
> 赞同：0
> 
> 时间：2012-06-14T05:40:17.860
> 
> 标签：android, google-maps, android-emulator

我正在研究基于位置的服务项目。我想在我的模拟器中使用地图。在我的模拟器中我看不到地图应用程序。如何在模拟器中查看地图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:45:35.103

准备的 AVD 可能不是 googleapis，所以可能是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:45:59.317

确保您已经创建了 AVD

> 谷歌 API（谷歌公司）

![在此处输入图像描述](../Images/4174b1f4e3fb5f308e70669fda65bde3.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T05:54:37.330

*   您是否使用[正确的 API 密钥进行地图？](https://developers.google.com/android/maps-api-signup)如果没有，请从该链接中获取。您也不能使用其他地图 api 密钥。因此，只需尝试新的 API 密钥。

*   检查您是否为 Google 地图使用了正确的 SDK -

    ![图片](../Images/e24f171783e3e8df52d6d0d6f38011f5.png)

# java - 如何在运行时更改日志位置

> ID：11027259
> 
> 赞同：0
> 
> 时间：2012-06-14T05:40:44.700
> 
> 标签：java, log4j

嗨，我正在使用产品，我在运行时定位日志文件位置时遇到问题，我的文件附加程序如下，在给定位置静态我如何在运行时编辑它。

```
<appender name="fileAppender" class="org.apache.log4j.DailyRollingFileAppender">
    <param name="File" value="E:/log/SQLAppLog.log" />
    <param name="DatePattern" value="'_'yyyy-MM-dd'.log'" />
    <param name="Append" value="true" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern"
            value="%d{HH:mm:ss-SSS} | %t | %-5p | %C | %M | %L | %m%n" />
    </layout>
</appender> 
```

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:47:15.207

如果您使用 log4j.xml 文件配置 Log4j，那么您无法在运行时更改日志位置，因为它在启动时被加载...但是如果您使用 java 代码配置 log4j，那么您绝对可以在运行时更改它.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:47:30.340

检查 log4j api，它为您提供了使用 appender 对象更改 appender 位置的句柄。您还可以使用 log4j api 在运行时创建 appender，而不是使用静态 appender。

# internet-explorer - OpenCart - 如果产品 SEO 关键字被填满，OpenCart 在 IE 上崩溃

> ID：11027264
> 
> 赞同：0
> 
> 时间：2012-06-14T05:41:17.760
> 
> 标签：internet-explorer, crash, seo, opencart, keyword

我在 OpenCart 中遇到问题。

当为产品填写 SEO 关键字时，它在 Firefox 和 Chrome 上运行良好，但在 IE（版本 6）上崩溃。

错误：

> 您正在查找的页面当前不可用。该网站可能遇到技术问题，或者您可能需要调整您的浏览器设置。

[eBio链接](http://www.ebio.eu/ulei-argan-presat-rece)

知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:29:33.793

Opencart 不再支持 IE6。Opencart 的创建者 Daniel 说开发时间太费力了，几乎没有人再使用它了。仍然这样做的人在旧的公司服务器上，他们没有管理员权限来升级浏览器。

# c++ - 在类 a 声明之前从类 a 继承类 b

> ID：11027269
> 
> 赞同：1
> 
> 时间：2012-06-14T05:41:36.467
> 
> 标签：c++, inheritance, derived-class

我想在实际声明 CDocument 之前从另一个名为 CDocument 的类继承一个名为 CSprite 的类，因为 CDocument 类的某些成员实际上是 CSprite。我希望它看起来不会令人困惑？这是我的代码：

```
class CSprite: public CDocument {}

class CDocument
{
public:
    CDocument();
    ~CDocument();

    CSprite * AddSprite(string Name);
    CSprite * GetSprite(string Name);
}; 
```

我收到“未定义的基类”错误。我想知道这可能根本不可能。是吗？我这样做的原因是增加我的代码可读性。每个文档都可以有许多精灵。精灵是实际上可以在其中包含其他精灵的文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T05:46:11.157

从不完整类型继承是不可能的。
您可以通过以下不同方式解决问题：

1.  更改依赖是派生类依赖于基类的设计
2.  在基类中具有派生类的指针或引用，派生类被前向声明
3.  [以与CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)`template`类似的方式 使基类 a

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T05:51:56.610

由于CDocument.AddSprite/GetSprite都返回一个CSprite指针，你可能只需要在文档中声明CSprite的存在即可。

```
//declare CSprite
class CSprite;

class CDocument
{
public:
    CDocument();
    ~CDocument();

    CSprite * AddSprite(string Name);
    CSprite * GetSprite(string Name);
}; 
```

您可以稍后在此文件或另一个文件中定义 CSprite，此时您应该能够继承 CDocument。尽管如果遇到更多问题，您可能需要重新设计对象结构。

```
//CSprite Class
class CSprite : public CDocument
{
    ...
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T05:46:02.810

不，那是不可能的。在定义派生类之前，需要完全了解基类。

这看起来像一个破碎的设计。您可以通过先声明 CDocument 并更改签名来修复：

```
class CDocument
{
public:
    CDocument();
    ~CDocument();

    CDocument * AddSprite(string Name);
    CDocument * GetSprite(string Name);
};

class CSprite: public CDocument {} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-14T05:47:45.073

模板基础：

```
class Document;

template<class Document=Document> class Sprite_t : public Document {  };
typedef Sprite_t<Document> Sprite;

class Document { /* etc. */}; 
```

# namespaces - intellij IDEA 从 wsdl 创建 Web 客户端未正确创建命名空间

> ID：11027272
> 
> 赞同：0
> 
> 时间：2012-06-14T05:42:27.997
> 
> 标签：namespaces, wsdl, intellij-idea, webclient

当我在 IntelliJ 中通过 wsdl 创建 WebClient 时，它似乎无法正确读取命名空间标签，而是在扁平包中创建所有类。

我所做的是：创建一个新的 java 项目。启用网络服务。右键单击并转到 webservices 并选择从 wsdl 或 wadl 创建 java 代码。

然后我选择我的 wsdl 位置和 apache 轴，版本 1.1，然后选择输出包并保留其余选项。

它生成代码，但正如我所说的，所有这些都在一个扁平化包中。

然而 wsdl 看起来像这样：

```
<wsdl:types>
<xsd:schema targetNamespace="http://company.com/ServiceContracts/2008/08/Imports">
  <xsd:import namespace="http://company.com/ServiceContracts/2008/08" schemaLocation="http://999.999.999.98/company.Qrs.Consumer.Host/service.svc?xsd=xsd0"/>
  <xsd:import namespace="http://company.com/FaultContracts/2008/08" schemaLocation="http://999.999.999.98/company.Qrs.Consumer.Host/service.svc?xsd=xsd3"/>
  <xsd:import namespace="http://www.microsoft.com/practices/EnterpriseLibrary/2007/01/wcf/validation" schemaLocation="http://999.999.999.98/company.Qrs.Consumer.Host/service.svc?xsd=xsd4"/>
  <xsd:import namespace="http://schemas.microsoft.com/2003/10/Serialization/" schemaLocation="http://999.999.999.98/company.Qrs.Consumer.Host/service.svc?xsd=xsd1"/>
  <xsd:import namespace="http://company.com/DataContracts/2008/08" schemaLocation="http://999.999.999.98/company.Qrs.Consumer.Host/service.svc?xsd=xsd2"/>
  <xsd:import namespace="http://schemas.datacontract.org/2004/07/Microsoft.Practices.EnterpriseLibrary.Validation.Integration.WCF" schemaLocation="http://999.999.999.98/company.Qrs.Consumer.Host/service.svc?xsd=xsd5"/>
</xsd:schema>
</wsdl:types> 
```

当我用 Eclipse 导入相同的 wsdl 时，它会根据命名空间生成正确的包和子目录。

任何人都知道如何在 intelliJ IDEA 中导入 wsdl 以生成命名空间？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:10:20.667

它看起来像一个[最近修复的已知错误](http://youtrack.jetbrains.com/issue/IDEA-83005)。该修复程序将在 IDEA **12**中提供（将于 2012 年底发布，但[EAP 版本应在几周后出现](http://confluence.jetbrains.com/display/IDEADEV/EAP)）。

# xml - 如何将大型 XML 文件转换为 JSON 文件？

> ID：11027274
> 
> 赞同：1
> 
> 时间：2012-06-14T05:42:47.027
> 
> 标签：xml, json, converter

3 天前，我作为一种爱好开始为 iOS 编程。我创建了一个 CoreData 文件，我需要将一个大型 XML 文件转换为 Json 以便继续下一步。

我尝试了很多在线转换器，但我的文件太大而无法工作。

大家有什么软件可以推荐的吗？非常感激。

谢谢，

F

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:10:45.117

我使用这个非常好的 node.js 库来完成同样的事情：

[https://github.com/Leonidas-from-XIV/node-xml2js](https://github.com/Leonidas-from-XIV/node-xml2js)

当这失败时（由于内存问题或其他原因），您可能希望退回到类似

[https://github.com/isaacs/sax-js](https://github.com/isaacs/sax-js)

并在流式传输时解析 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-22T03:37:06.373

这是一款适用于 Mac 的付费应用，它可以将巨大的 XML 文件转换为 JSON（转换 188MB 完全没有问题）。

[https://itunes.apple.com/us/app/xmltojson-converter-for-big/id1136463292?mt=12](https://itunes.apple.com/us/app/xmltojson-converter-for-big/id1136463292?mt=12)

# java - 关于 required 和 valuechangeListener 的冲突

> ID：11027275
> 
> 赞同：0
> 
> 时间：2012-06-14T05:42:48.670
> 
> 标签：java, jsf-2, primefaces

```
<p:selectOneMenu id="roleId" value="#{accessPage.roleId}" required="true">                   
   <f:selectItem itemLabel="#{msg['label.common.selecthere']}" itemValue="#{null}" />          
   <f:selectItems var="code" value="#{accessPage.roleIdList}" itemLabel="#{code.codeDesc}" itemValue="#{code.codeId}" />    
   <f:valueChangeListener type="com.ncs.caseconnect.base.app.utils.ValueChangeCleanUtils"/>    
   <p:ajax listener="#{accessPage.roleOrModuleChanged}" update="accessRight" />
</p:selectOneMenu> 
```

当我们选择第一个 null 选项时，valueChangeListener 和 ajax 不起作用。如果我们删除所需的属性，它工作正常。required 和 valueChangeListener 之间是否冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:28:26.803

尝试更换

```
<f:selectItem itemLabel="#{msg['label.common.selecthere']}" itemValue="#{null}" /> 
```

和

```
<f:selectItem noSelectionOption="true" itemLabel="#{msg['label.common.selecthere']}"/> 
```

# javascript - ajax POST 后无法访问 JQuery $(this)？

> ID：11027276
> 
> 赞同：4
> 
> 时间：2012-06-14T05:42:49.600
> 
> 标签：javascript, jquery, asp.net, ajax, scope

假设我有一堆共享点击事件的链接：

```
<a href="#" class="do-stuff">Click me</a>
<a href="#" class="do-stuff">Click me</a>
<a href="#" class="do-stuff">Click me</a>
<a href="#" class="do-stuff">Click me</a> 
```

在 $('.do-stuff').click 函数中，我执行一个 JQuery ajax POST 请求，用东西更新数据库，我得到了成功的响应。ajax完成后，我只想将链接文本的值更改为我从服务器发回的任何内容......

```
$('.do-stuff').click(function () {
$.ajax({
  type: "POST",
  url: "MyWebService.asmx/DoSomething",
  data: '{CurrentLinkText: "'+ $(this).text() +'"}',
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function (result) {
    $(this).text(result.d);
  },
  error: function (XMLHttpRequest, textStatus, errorThrown) {
    alert(textStatus);
  }
}); 
```

});

这调用得很好，我验证了“result.d”确实是来自服务器的文本，但文本没有改变。我认为在 AJAX 发布之后不再可以访问 $(this) 元素？我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T05:45:51.813

一般来说，当你失去这样的上下文时，你可以保存对对象的引用。像这样：

```
function clickHandler() {
    var that = this;
    $.ajax( { url: '#',
        success: function (result) {
            $(that).text(result.d);
        }
    );
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T05:46:35.853

请参阅此处： [AJAX 成功中的 $(this) 不起作用](https://stackoverflow.com/questions/6394812/this-inside-of-ajax-success-not-working)

您可以设置[上下文选项](http://api.jquery.com/jQuery.ajax/)：

> 该对象将成为所有与 Ajax 相关的回调的上下文。默认情况下，上下文是一个对象，表示调用中使用的 ajax 设置（$.ajaxSettings 与传递给 $.ajax 的设置合并）。(...)

例子：

```
$.ajax({
    //...
    context: this,
    success: function(json) {
        //...
    }
}); 
```

或使用[$.proxy](http://api.jquery.com/jQuery.proxy/)：

```
$.ajax({
    //...
    success: $.proxy(function(json) {
         //...
    }, this)
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T05:47:04.077

尝试：

```
success: $.proxy(function(result) {
         //...
    }, this) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T05:58:19.370

There are lots of ways to do this, as you can see from the answers here. Personally, I prefer to construct a function bound to the current value of `this`:

```
success: (function(target) {
              return function(result) {
                   $(target).text(result.d);
              }
         })(this) 
```

It's neat, clean, and `$(this)` will remain the same as it is in the outer context; i.e. it will be the element that raised the event.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T05:48:03.340

```
jQuery('#youridvalue').html(result.d);
jQuery('.yourclassvalue').html(result.d); 
```

用它

# c# - 控制列表视图中项目的显示位置和外观

> ID：11027278
> 
> 赞同：0
> 
> 时间：2012-06-14T05:42:50.893
> 
> 标签：c#

我正在开发一个应用程序，我需要打印从数据库中获取的列表视图的内容。我已成功显示列表视图，但我需要在报告中添加支付总金额的聚合分组并查看它。我已经这样做了（来自我的查询..但我需要这些数据在“最后两个”下列表视图的列而不是前两个。此外，我还希望这些项目居中，并希望字体为粗体。我该如何实现这一点。以下是我到目前为止的代码：

```
 //setting up command 
            OdbcCommand commandSql = new OdbcCommand("SELECT stateid,surname,firstname,amount FROM scheduledpayment", _connection);
            OdbcDataReader odr = commandSql.ExecuteReader();
            while (odr.Read())
            {
                ListViewItem item = new ListViewItem(odr["stateid"].ToString());
                item.SubItems.Add(odr["surname"].ToString());
                item.SubItems.Add(odr["firstname"].ToString());
                item.SubItems.Add(odr["amount"].ToString());
                listView1.Items.Add(item);
            }
             OdbcCommand commandSql2 = new OdbcCommand("SELECT sum(amount) amount FROM scheduledpayment", _connection);
            OdbcDataReader odr2 = commandSql2.ExecuteReader();
            while (odr2.Read())
            {
                ListViewItem item3 = new ListViewItem("Total");
                item3.SubItems.Add(odr2["amount"].ToString());

                listView1.Items.Add(item3);
            } 
```

输出是：

```
 ------------------------------------------------------------------------  

              200502317 BLACK   GRAY    15000
              200604572 BROWN   PURPLE  45000
              Total     789900 
```

我怎样才能使列表视图的输出看起来像：

```
 200502317 BLACK   GRAY    15000
              200604572 BROWN   PURPLE  45000
                                Total  789900 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:46:54.700

你应该使用

```
ListViewItem item3 = new ListViewItem("");
item3.SubItems.Add("");
item3.SubItems.Add("Total");
item3.SubItems.Add(odr2["amount"].ToString());
listView1.Items.Add(item3); 
```

# c# - 从excel读取数据时出错

> ID：11027279
> 
> 赞同：-1
> 
> 时间：2012-06-14T05:43:04.373
> 
> 标签：c#, winforms

我已经编写了一些从 excel 读取数据并将数据显示在消息框中的代码。我从网站上获取了该代码。当我运行相同的程序时，我在两个特定的行中遇到了一些错误

我遇到错误的行如下

```
 for (int i = 1; i &lt;= rowCount; i++)
            {
                for (int j = 1; j &lt;= colCount; j++)
                {
                    MessageBox.Show(xlRange.Cells[i, j].Value2.ToString());
                }
            } 
```

完整代码如下

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

using Excel = Microsoft.Office.Interop.Excel;

namespace ExcelReader
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            Excel.Application xlApp = new Excel.Application();
            Excel.Workbook xlWorkbook = xlApp.Workbooks.Open(@"D:/C.xlsx");
            Excel._Worksheet xlWorksheet = xlWorkbook.Sheets[1];
            Excel.Range xlRange = xlWorksheet.UsedRange;

            int rowCount = xlRange.Rows.Count;
            int colCount = xlRange.Columns.Count;

            for (int i = 1; i &lt;= rowCount; i++)
            {
                for (int j = 1; j &lt;= colCount; j++)
                {
                    MessageBox.Show(xlRange.Cells[i, j].Value2.ToString());
                }
            }

        }

    }
} 
```

有人可以帮助我了解此代码的正确解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:52:44.693

代替

```
for (int i = 1; i &lt;= rowCount; i++)
{
    for (int j = 1; j &lt;= colCount; j++)
    { 
```

和

```
for (int i = 1; i <= rowCount; i++)
{
    for (int j = 1; j <= colCount; j++)
    { 
```

# android - 在不触摸Android屏幕的情况下更改悬停图像

> ID：11027282
> 
> 赞同：0
> 
> 时间：2012-06-14T05:43:19.493
> 
> 标签：android, android-layout, android-sensors

我有一个非常有创意的要求——我不确定这是否可行——但如果可以的话，它肯定会为我的应用程序增添趣味。

> 前提：在安卓手机上，如果屏幕被手遮住（不触摸，只是靠近屏幕）或者在通话过程中手机放在耳朵上，手机会锁定或基本上黑屏。所以必须有一些技术来识别我的手靠近屏幕。
> 
> 问题：我的应用中有一张图片。如果用户在不触屏的情况下指向图像，仅仅作为前提的延伸，我必须能够知道用户指向图像并改变图像。这可能吗 ？

更新：一个例子使用：

> 假设我想构建一个有趣的应用程序，触摸图像会导致其他地方。例如 - 我有两扇门，一扇通往汽车，一扇通往狮子。现在就在用户即将触摸门 1 时 - 门应该显示一条消息，说您确定，然后实际触摸它会将您带到另一个地方。有点基本的例子，但我希望你明白这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:46:55.823

您可以在带有广角前置摄像头的手机上完成这项工作，这样它就可以看到整个屏幕。您必须编写用于识别手部动作的软件，并将其转换为屏幕动作。

如果我可以问，为什么不直接使用触摸？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:51:49.920

您正在谈论的功能是接近传感器。见[`Sensor`](http://developer.android.com/reference/android/hardware/Sensor.html)和[`SensorEvent.values`](http://developer.android.com/reference/android/hardware/SensorEvent.html#values)为`Sensor.TYPE_PROXIMITY`。

你可以得到手到屏幕的距离，但你不能确定手在 XY 坐标系中的位置。因此，您将无法确定用户是指向“车门”还是“狮子门”。

# html - 单击链接时滚动到并突出显示 Div

> ID：11027284
> 
> 赞同：1
> 
> 时间：2012-06-14T05:43:25.230
> 
> 标签：html, css

我试图突出显示包含联系表单的 div，以便用户知道去哪里联系。我的链接将是这样的

```
<a href="#form" class="contacthighlight">Contact Us</a> 
```

上课，因为这将在两个地方的网站上使用。

现在#form的当前背景是#f5f5f5，所以我想做的是闪烁一个随机颜色，比如#ff0000，然后慢慢淡出到#f5f5f5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:48:08.443

## [dabblet.com 上的演示](http://dabblet.com/gist/2928193)

![在此处输入图像描述](../Images/6255c7849e10b8640247605976ac3f78.png) ![在此处输入图像描述](../Images/267b8c25b23ec744907504395be2522f.png) ![在此处输入图像描述](../Images/4170afb395d7392bf21f3716866b7360.png)

目标伪类应用于您滚动到的元素。将此添加到您的CSS：

**CSS：**

```
#form {
    background-color: #f5f5f5;
}

#form {
    background-color: #f5f5f5;
}

#form:target {
    animation: target-fade 1s 1;
}

@keyframes target-fade {
    0% { background-color: #ff0000; }
    100% { background-color: #f5f5f5; }
} 
```

**HTML 标记：**

```
<a href="#form"> link to target #form</a>
<form id="form">
    …
</form> 
```

**PS：** 根据[caniuse.com](http://caniuse.com/) CSS 属性：[动画和关键帧](http://caniuse.com/#feat=css-animation)需要供应商**前缀**，例如：

```
.box_animation:hover {
  -webkit-animation: myanim 1s infinite; /* value is demo only */
     -moz-animation: myanim 1s infinite;
       -o-animation: myanim 1s infinite;
          animation: myanim 1s infinite;
}

@-webkit-keyframes myanim {…}
@-moz-keyframes myanim {…}
@-o-keyframes myanim {…}
@keyframes myanim {…} 
```

**PPS：** *dabblet*使用[无前缀](http://leaverou.github.com/prefixfree/)JS 库粘贴所有必要的前缀。稍后如果没有这个*库*，你可以在[**css3please**](http://caniuse.com/#feat=css-animation)上看到所有你需要的**前缀语法**[](http://caniuse.com/#feat=css-animation)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T05:49:02.950

您可以使用 Ariel Flesler 的[ScrollTo jQuery 插件](http://demos.flesler.com/jquery/scrollTo/)来滚动动画。

为了用动画改变颜色，你可以使用[jQuery Color Animation Plugin](http://www.bitstorm.org/jquery/color-animation/)

例子

```
$('selector').scrollTo( '520px', 800 )
.animate({backgroundColor:'#ff0000'}, {duration:5000,queue:false}); 
```

## 编辑

如果你想淡出它，你可以使用切换功能。

```
 $('selector').scrollTo( '520px', 800 )
   .toggle(function() {
   $(this).animate({ 
     {backgroundColor:'#ff0000'}, {duration:5000,queue:false});
   },
   function() {
   $(this).animate({
     {backgroundColor:'#f5f5f5'}, {duration:5000,queue:false});
   }); 
```**

# javascript - Javascript 在 JSF 模板下不起作用

> ID：11027285
> 
> 赞同：5
> 
> 时间：2012-06-14T05:43:36.683
> 
> 标签：javascript, html, jsf, jsf-2, facelets

我正在使用 JSF 模板和 Primefaces。

Javascript 代码似乎无法在 ui:composition 和 ui:define 标记下工作。以下代码没有命中loaded() 方法。这是 content.xhtml 文件

```
<h:head>
<script language="javascript">
    function loaded() {
        alert("Working!!");
    }
</script>
</h:head>

<ui:composition template="/template/template.xhtml">
<ui:define name="content">
<h:body style="width:100%;height:100%;" onload="loaded()">
     <p class="item">Random text</p>
</h:body>
</ui:define>
</ui:composition> 
```

但是当我删除定义和组合标签时，加载的函数被调用。知道为什么会这样吗？

这是模板文件

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui">

<h:head>
<title><ui:insert name="title">Template</ui:insert></title>
</h:head>

<h:body>

<div id="header">
    <ui:insert name="header">
        <ui:include src="../menu.xhtml" />
    </ui:insert>
</div>

<div id="content">
    <ui:insert name="content">
        <ui:include src="../content.xhtml" />
    </ui:insert>
</div>

<div id="footer">
    <ui:insert name="footer">
        This is a footer
    </ui:insert>
</div> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T12:59:50.373

在构建视图期间，*外部* 的所有内容都会`<ui:composition>`被**忽略。**此外，`<h:body>`没有必要再次重新声明。要使用在页面加载期间运行的脚本，最好使用`<h:outputScript target="body">`. 这将被重新定位到正文的末尾，因此在构建必要的 HTML DOM 元素*后被调用。*这也比`onload`.

总而言之，你的*整个* `content.xhtml`必须看起来像这样：

```
<ui:composition template="/template/template.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
>
    <ui:define name="content">
        <h:outputScript target="body">
            alert("Working!!");
        </h:outputScript>

        <p class="item">Random text</p>
    </ui:define>
</ui:composition> 
```

### 也可以看看：

*   [如何使用 JSF 2.0 Facelets 在 XHTML 中包含另一个 XHTML？](https://stackoverflow.com/questions/4792862/how-to-include-another-xhtml-in-xhtml-using-jsf-2-0-facelets)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T05:46:32.750

您正在将“内容”传递给模板。如果您的模板不包含“内容”，则它不会包含在生成的 HTML 中。

发布template.xhtml，让我们看看......

# firefox - à,É 等重音字符不适用于 google chrome + silverlight 4

> ID：11027287
> 
> 赞同：4
> 
> 时间：2012-06-14T05:43:50.620
> 
> 标签：firefox, google-chrome, silverlight-4.0, telerik

像 à,É 这样的重音字符在 Silverlight 4 应用程序中无法与 Google chrome 和 Firefox 一起使用。

它在 IE 中工作。

如果我设置 Silverlight 对象的 windowless=false 那么它正在工作，但目前我`RadHtmlPlaceholder`在一页中使用了 Telerik 的控制并且它不工作。

在 Silverlight 应用程序中显示 HTML 页面的其他选项是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-22T21:50:33.663

你用什么字符集来控制？尝试指定一个支持您想要的所有字符的字符。

# c# - 保护许可证验证

> ID：11027292
> 
> 赞同：5
> 
> 时间：2012-06-14T05:44:09.007
> 
> 标签：c#, .net

我已经实现了一个 C# 程序集来验证应用程序的许可证。问题在于将其发送给客户，他们可以很容易地找到我们用来加密字符串的密钥。

## *签约*

对应用程序进行签名有点痛苦，因为正在使用的几个组件没有签名和编译。所以我们必须手动反汇编，再用snk文件重新组装。装配加载是一种连锁反应。我想澄清只有正在加载的直接程序集才需要签名？从这些附属程序集进一步加载的程序集也需要签名？

## *混淆*

社区版并没有真正混淆字符串。代码基本上是可见的。我应该去专业版吗？

我对此很陌生。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T07:21:12.563

我想指出一个问题，我相信您在尝试保护您的软件时会意识到这一点。由于将运行应用程序的计算机必须能够“看到”您使用的所有代码和数据，因此其他人总会有某种方式对您的应用程序进行逆向工程。用于保护您的软件的所有密钥和机密都将在随附的数据和程序集中可用...

## 签约

签名（强命名）用于阻止其他开发人员将您的关键程序集（许可证验证）替换为他们控制的允许他们绕过您的保护的程序集。由强命名程序集加载的所有程序集本身必须是强命名的。这样做的原因是，否则其他人可以用实际上破坏许可证验证功能的新实现来替换次要依赖项之一（在链下游的非强命名程序集）。

是的，您必须将所有程序集命名为更下游的所有程序集。我从经验中知道这可能会很痛苦，因为许多免费库不是作为强命名程序集分发的。在许多情况下，您可以使用 Ilmerge 合并两个 DLL，然后对生成的组合 dll 进行强命名来解决此问题。在此处查看[示例 ilmerge 调用](http://dotnetweblog.wordpress.com/2008/04/26/creating-a-strong-assembly-using-ilmerge/)。

## 混淆

有可用的免费混淆工具可以正确混淆字符串，否则是的，您必须使用更高级别的大多数付费混淆工具。我个人喜欢的工具是[Eazfuscator](http://www.foss.kharkov.ua/g1/projects/eazfuscator/dotnet/Default.aspx)，它功能齐全且免费。除了混淆之外，Eazfuscator 还支持合并程序集和强命名。

## 许可证验证注释

自己实施许可证验证既麻烦又容易出错。我建议您查看其他替代方案，或者根本不进行许可证验证，因为它为您的软件增加了一定程度的维护和复杂性，这实际上可能不会提供任何经济利益。或者查看现成的许可证实施，例如这个小选择（按初始价格顺序）：

*   [https://github.com/ayende/rhino-licensing](https://github.com/ayende/rhino-licensing)（免费/开源）
*   [http://www.simplesoftwarelicensing.com/pricing/hobbyist-edition/](http://www.simplesoftwarelicensing.com/pricing/hobbyist-edition/)（免费）
*   [http://www.simplesoftwarelicensing.com/（39](http://www.simplesoftwarelicensing.com/)美元起）
*   [http://www.ssware.com/cryptolicensing/cryptolicensing_net.htm（149](http://www.ssware.com/cryptolicensing/cryptolicensing_net.htm)美元起）
*   [http://www.infralution.com/licensing.html（170](http://www.infralution.com/licensing.html)美元起）
*   [http://ellipter.com/（249](http://ellipter.com/)美元起）
*   [http://desaware.com/products/licensingsystem/index.aspx（1495](http://desaware.com/products/licensingsystem/index.aspx)美元起）
*   [http://www.crypkey.com/products/instant.php（1895](http://www.crypkey.com/products/instant.php)美元起）

这只是可用的一小部分，搜索网络将提供许多现成的解决方案。

免责声明：我开发了上面的“简单软件许可”产品，作为[Donationcoder 新年编程挑战的](http://www.donationcoder.com/forum/index.php?topic=29453.msg273065#msg273065)一部分。

# php - PHP 表单转储整个 MySQL 数据库，除非数据库中不存在任何输入变量

> ID：11027294
> 
> 赞同：2
> 
> 时间：2012-06-14T05:44:31.797
> 
> 标签：php, mysql

我有一个使用 PHP 搜索 MySQL 数据库的表单。目前，当用户在两个字段之一中输入搜索时，会显示数据库的全部内容。此外，如果用户将两个字段都留空，则会再次显示数据库的全部内容。

**但是，如果用户在两个**字段中输入随机信息，则结果页面将为空白。

此表单的假定用法是用户可以通过填写其中一个或两个字段来根据文章标题、文章作者或组织或文章标题及其作者或组织来**搜索文章。**

我想弄清楚的是：

为什么结果页面一直显示所有数据库内容。

和

如何确保数据库实际上正在被查询，而不是仅仅因为编码错误而被转储。

代码如下：

搜索.php：

```
<div class="content">
    <form id="form1" name="form1" method="post" action="searchdb.php">
        <table width="100%" border="0" cellpadding="6">
            <tr>
              <td width="29%" align="right">Article Title:</td>
              <td width="71%" align="left"><input name="articletitle" type="text" id="articletitle" size="50" /></td>
            </tr>
            <tr>
              <td align="right">Author or Organization:</td>
              <td align="left"><input name="articleorganization" type="text" id="articleorganization" size="50" /></td>
            </tr>
        </table>

        <table width="100%" border="0" cellpadding="6">
          <tr>
            <td><input type="submit" name="submit" value="Submit" /></td>
          </tr>
        </table>
    </form>
</div> 
```

搜索数据库.php

```
<?php

include('settings.php');
$query = "select * from articles";
$where = array();
if (!empty($_POST['articletitle'])) {
   $where[] = "articletitle LIKE '%".mysql_real_escape_string($_POST['articletitle'])."%'";
}
    if (!empty($_POST['articleorganization'])) {
       $where[] = "articleorganization LIKE  '%".mysql_real_escape_string($_POST['articleorganization'])."%'";
}
    if (!empty($where)) {
        $query .= " WHERE " . implode(" OR ", $where);
        $sql = mysql_query($query);
    } else {
        // No results
}
while ($row = mysql_fetch_array($sql)){
    echo '<br/> Article Title: '.$row['articletitle'];
    echo '<br/> Article Organization: '.$row['articleorganization'];
    echo '<td><a href="edit.php?id=' . $row['id'] . '">Edit</a></td>';
    echo '<td><a href="delete.php?id=' . $row['id'] . '">Delete</a></td>';
    echo '<td><a href="entry.php?id=' . $row['id'] . '">View Full Entry</a></td>';
    echo '<br/><br/>';
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T05:47:43.123

当两者均为空白时，您的查询状态：

`WHERE field LIKE '%%'`

匹配一切。

当其中任何一个为空白时也会发生同样的情况，因为您使用 an`OR`来连接 where 子句。

您可以通过检查输入是否为空来防止这种情况发生：

```
<?php
if (!((empty($_POST['field1']) || empty($_POST['field2']))) {
  //run your query
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T06:31:44.877

关注@sberry 的帖子。

```
if (isset($_POST['articletitle']) && $_POST['articletitle'] != "") 
```

该变量可以设置，但仍然是一个空字符串。

@xbonez 使用的方法更简单

`if (!empty($_POST['articletitle']))`和上面的例子一样，需要两次测试

您是否尝试过 xbonez 方法？

为了完整起见，这将检查是否至少填写了一个字段：

```
if (!empty($_POST['articletitle']) || !empty($_POST['articleorganization'])) {
   $query = "SELECT * from `articles` WHERE ";

   $query .= "`articletitle` LIKE '%" . mysql_real_escape_string($_POST['articletitle']) . "%' ";

   $query .= "OR `articleorganization` LIKE '%" . mysql_real_escape_string($_POST['articleorganization']) . "%'";

    $sql = mysql_query($query);

} else {
    // No results
} 
```

仅在填写其中一个字段时才会使用的内容，例如：

```
$query = "SELECT * from `articles` WHERE "; 
```

放在 if() 语句中，否则它们会被不必要地解析。

无需创建数组然后将其转换为字符串。".=" 将字符串片段连接成最终的查询字符串。

**个人喜好问题：**
MySql 关键字全大写，我发现它使语句更易于阅读。
有很多关于它的讨论。
搜索“ [sql大写关键字样式](https://stackoverflow.com/search?q=sql%20uppercase%20keywords%20style&submit=search)”

在表和字段名周围使用反引号：
允许为表或字段名使用保留关键字（计数、大小写、默认值、div、索引、键、限制、选项、顺序等）。
减少mysql解析器的工作，不需要检查是否存在保留字冲突。
如果您的表或字段名称将来成为保留关键字，则可以避免出现问题。

再次，无数次讨论。搜索“ [mysql 反引号](https://stackoverflow.com/search?q=mysql%20backtick)”

**MySQL 文档：**
[9.3。保留字](http://dev.mysql.com/doc/refman/5.1/en/reserved-words.html)

[9.2\. 架构对象名称](http://dev.mysql.com/doc/refman/5.1/en/identifiers.html)
在此页面上查找“引用标识符”。
此外，如果您将来可能要迁移到不同的数据库应用程序，您可以使用双引号而不是反引号，查找“ANSI_QUOTES”。

[9.2.4。函数名称解析和解析](http://dev.mysql.com/doc/refman/5.1/en/function-resolution.html)
在此页面上查找“引用标识符”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T05:52:18.377

对此进行了测试，它应该完全符合您的要求。

```
$query = "select * from articles";
$where = array();
if (!empty($_POST['articletitle'])) {
   $where[] = "articletitle LIKE '%".mysql_real_escape_string($_POST['articletitle'])."%'";
}
if (!empty($_POST['articleorganization'])) {
   $where[] = "articleorganization LIKE '%".mysql_real_escape_string($_POST['articleorganization'])."%'";
}
if (!empty($where)) {
    $query .= " WHERE " . implode(" OR ", $where);
    $sql = mysql_query($query);
} else {
    // No results
} 
```

**编辑**
看来您的表单正在传递空值，因此不是检查`isset`，而是检查`!empty`。我已经更新了上面的代码。

# c++ - 调用由另一个没有名称的类创建的类对象

> ID：11027297
> 
> 赞同：0
> 
> 时间：2012-06-14T05:45:15.917
> 
> 标签：c++, class

我有一个创建另一个类的对象的类，FE：

```
University uni1("University 1");

uni1.createFaculty("Faculty 1"); 
```

现在我想调用创建的教师以使用其功能，但我不知道如何...

如果通过任何方式可以通过搜索找到，请原谅我，我不知道如何表达它。

学院存储在大学班级内的一个集合中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:49:24.323

您需要查看`University::createFaculty`返回的内容，并使用该返回值分配给某些内容：

```
Something x = uni1.createFaculty("hello"); 
```

我猜`Something`是`Faculty`, `const Faculty&`, `Faculty&`,`const Faculty*` 或`Faculty*`.

**编辑**：如果该方法创建`Faculties`并将它们存储在 private`std::set<Faculty>`中，则适当的返回值将是`const Faculty&`：

```
class University {
 public:
  const Faculty& createFaculty(args);
}; 
```

然后调用者可以获取参考，也可以复制：

```
const Faculty& f0 = uni1.createFaculty("hello"); // take reference
Faculty f1 = uni1.createFaculty("hi"); // make copy 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T05:48:00.517

如果您的方法`createFaculty`返回一个指向动态分配的 Faculty 对象的指针，只需执行以下操作：

```
Faculty* fac1 = uni1.createFaculty("Faculty 1"); 
```

这样您就可以通过 fac1 引用新的 Faculty。

# java - 如何捕获本地 HTTP 流量

> ID：11027299
> 
> 赞同：1
> 
> 时间：2012-06-14T05:45:27.510
> 
> 标签：java, c++, http

我正在开发 Web 服务器，其中客户端向服务器 s1 发出 HTTP 请求，服务器 s1 向服务器 s2 和服务器 s3 发出 HTTP 请求。现在你能告诉我如何捕获从客户端到 s1 和 s1 到 s2 和 s3 的 HTTP 请求/响应流量吗？所有服务器都在我的本地机器上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:02:32.663

I usually use [Wireshark](http://www.wireshark.org/). Its an all purpose packet capture program with a set of useful filters for looking through what was sent/received.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:49:12.543

您可以安装 Web 调试代理，它会像提琴手软件一样记录所有 HTTP(S)。它记录了您需要的一切。[提琴手链接] [http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

# ruby - 为什么我看不到输出？

> ID：11027300
> 
> 赞同：0
> 
> 时间：2012-06-14T05:45:31.340
> 
> 标签：ruby, singleton

`Singleton Class`当我运行以下代码时，我没有看到该消息。这是为什么 ？

```
ob = Object.new
class << ob
 def func
   "Singleton class"
 end
end
ob.func 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:46:35.183

该方法返回一个字符串。要显示它，您必须使用`puts`.

如果您在其中运行它，`irb`您将获得显示的结果字符串，因为在该模式下，每个返回值都会自动打印。

# java - 无法停止执行

> ID：11027301
> 
> 赞同：0
> 
> 时间：2012-06-14T05:45:33.527
> 
> 标签：java, multithreading, rmi, interrupted-exception

我开发了一个应用程序，旨在允许用户执行查询。一旦用户输入查询并单击执行按钮，控件就会传递给 RMI 服务器，然后启动线程。

用户应该能够一个接一个地执行其他查询，并且每个查询将在不同的线程中执行。

我无法停止线程的执行。我想在执行时停止执行，或者根据传递的线程 ID 在按钮单击事件上停止执行。我正在尝试下面的代码

```
public class AcQueryExecutor implements Runnable {  
    private volatile boolean paused = false;     
    private volatile boolean finished = false;  
    String request_id="",usrnamee="",pswd="",driver="",url="";   

    public AcQueryExecutor(String request_id,String usrnamee,String pswd,String driver,String url) {  
        this.request_id=request_id;   
        this.usrnamee=usrnamee;   
        this.pswd=pswd;   
        this.url=url;   
        this.driver=driver;   
    }   

    public void upload() throws InterruptedException {   
        //some code                
        stop();
        //some more code
    }   

    public void run() {   
        try {   
            while(!finished) {   
                upload();   
            }
        } catch (InterruptedException e) {   
            e.printStackTrace();   
        }   
    }   

    public void stop() {
        finished = true; 
    }
} 
```

我启动线程的 RMI 服务器类

```
 public class ExecutorServer extends UnicastRemoteObject implements ExecutorInterface

        {
        public ExecutorServer()throws RemoteException
        {
        System.out.println("Server is in listening mode");
        }
        public void executeJob(String req_id,String usrname,String pwd,String driver,String url)throws RemoteException  
{
    try{
    System.out.println("Inside executeJob.wew..");
    AcQueryExecutor a=new AcQueryExecutor(req_id,usrname,pwd,driver,url);
    Thread t1 = new Thread(a);
    t1.start();
    }
    catch(Exception e)
    {
        System.out.println("Exception " + e);
    }

}           
        public void killJob(String req_id)throws RemoteException{
            logger.debug("Kill task");  
            AcQueryExecutor a=new AcQueryExecutor(req_id,"","","","");
    a.stop();
                    }

        public static void main(String arg[])
        {
        try{
            LocateRegistry.createRegistry(2007);
        ExecutorServer p=new ExecutorServer();
        Naming.rebind("//localhost:2007/exec1",p);
        System.out.println ("Server is connected and ready for operation.");
        }catch(Exception e)
        {
        System.out.println("Exception occurred : "+e.getMessage());
        e.printStackTrace();
        }
        }
               } 
```

RMI 客户端

```
 ExecutorInterface p=(ExecutorInterface)Naming.lookup("//localhost:2007/exec1");
            System.out.println("Inside client.."+ p.toString());
                   p.executeJob(id, usrname, pswd);
                 p.killJob(id);
            } 
```

直到我的知识 p.killJob() 将不会被调用，直到 executeJob() 完成。我想在运行时停止执行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:47:59.003

问题似乎是您正在`Runnable` `AcQueryExecutor`为每个线程分配一个新的实例。这意味着每个人都看到了自己的`finished`旗帜。设置一个`killJob`不会导致任何其他线程退出，因为没有其他线程共享此标志。

您需要 share `Runnable`s 或创建`finish`field `static`。后者将导致所有线程在任何实例`stop`被调用时退出，因此可能不是您想要的。

# javascript - 更改页面 JS/D3 上的元素位置

> ID：11027303
> 
> 赞同：3
> 
> 时间：2012-06-14T05:45:43.507
> 
> 标签：javascript, svg, d3.js

这是一个我似乎无法弄清楚的简单问题——我想做的就是改变页面上元素的位置。我尝试了以下方法：

```
// Text
body = d3.select('body')
sometext = body.append('text').text('testing') // text appears

// Different Ways i've tried to move it
.attr('cx', 40)
.attr('x', 40)
.attr("transform", "translate("40, 100") 
```

然而，这些都没有移动文本——我错过了什么（http://jsfiddle.net/Hn5JX/）？我在页面上移动 svg 元素时遇到了同样的问题，我只是认为这在 jsfiddle 上更容易看到。感谢您对基本问题的帮助，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T06:44:55.320

这是使用 d3js 移动文本的示例。 [http://jsfiddle.net/JnNtZ/](http://jsfiddle.net/JnNtZ/)

确保包括：

```
"http://mbostock.github.com/d3/d3.js" 
```

然后包括以下javascript

```
// Create an svg "canvas" to place text on
var w = 400, h = 400;    
var vis = d3.select("body")
  .append("svg")
    .attr("width", w)
    .attr("height", h);

// Add text and set attributes
var text1 = vis.append('text').text('text1');
var text2 = vis.append('text').text('text2');
text1.attr("y", "300").style("fill", "red");
text2.attr("x", "200").attr("y", "403").style("fill", "blue");  // Notice how this text is on the edge of the canvas 
```

​我认为您遇到的问题是，在选择文本时，您将获得一个 HTML 元素而不是 SVGText 元素（似乎您需要一个 SVG 元素来允许 d3js 进行操作）。您还需要确保文本的 (x,y) 坐标位于给定画布内。

# unix - 浏览unix“man”命令页面时如何“向上翻页”？

> ID：11027304
> 
> 赞同：34
> 
> 时间：2012-06-14T05:45:44.730
> 
> 标签：unix

我知道我可以在 unix 终端窗口上浏览“man”命令输出时使用键盘“空格键”进行“向下翻页”。“向上翻页”是否有相应的键盘快捷键？笼统地说，是否有 man 命令的键盘快捷键列表？我没有运气做了“男人男人”。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-14T05:50:13.630

这取决于该`man`命令在您的系统上使用的寻呼机。

如果是`less`（如“少即是多”），那么您可以倒退。（使用`less`,`b`可以返回一个页面，以及执行此操作的其他选项；也是如此`Control-B`。该`h`命令为我提供了几个页面，其中包含我很少或从不使用的选项。）

如果寻呼机是`more`（如......哦，没有逆向嘲笑），那么答案很可能是“不，你不能倒退”。

在 Mac OS X (10.7.4) 上，该`man man`命令引用了可以设置的环境变量 MANPAGER 和 HTMLPAGER；默认的 MANPAGER 是`less`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-14T05:48:56.913

您可以键入`h`寻求帮助。

键入`Ctrl-f`和`Ctrl-b`向下和向上滚动。

* * *

`Ctrl-d`并将`Ctrl-u`滚动半个窗口。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T05:49:35.397

上一页 = CTRL + B 下一页 = CTRL + F

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-24T13:20:49.153

`C-v`(aka `Ctrl-v`or `^V`) 和`M-v`(aka `ESC-v`, `Alt-v`or `Meta-v`) 也适用于`less`（分别向下和向上滚动），对于那些熟悉 Emacs 键绑定的人。

# javascript - 3 种方式来表示 if：else，但哪一种？

> ID：11027305
> 
> 赞同：-2
> 
> 时间：2012-06-14T05:45:48.600
> 
> 标签：javascript, logic

在一篇[有趣的博客文章](http://www.thomasfrank.se/3_ways_2_say_if.html)中，我读到有三种方法可以编写`if:else`语句：

```
//method 1 - regular
if(boolean) {true condition} else {false condition}

//method 2 - shorthand
boolean ? (true condition) : (false condition)

//method 3 - logical operators
boolean && (true condition) || (false condition)
//eg: var c = r==0 && "small" || "big"; 
```

***编辑：***第三种方法是一个`if:else`语句，当它的第一部分变为真时，整个语句变为`true||(false condition)`. 所有现代编译器都忽略`false condition then`.

现在我有两个问题：

1.  其中哪一个是最优化的？（从性能来看，如果其中任何一个与另一个不同，请解释原因）
2.  还有其他写`if:else`语句的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:51:56.257

除非您计划每秒运行数千次，否则不要担心这些语句的性能。

如果您要经常运行它们，请自己进行测试，您可能会在不同的浏览器下发现不同的结果。

# python - Python io 流会在列表理解中自动关闭吗？

> ID：11027307
> 
> 赞同：10
> 
> 时间：2012-06-14T05:45:55.290
> 
> 标签：python, io

例如我有以下代码：

```
d = [l for l in open('a.txt', 'r')] 
```

创建后`d`，列表推导中打开的流会自动关闭吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-14T05:55:16.677

“也许”。

在使用引用计数的 cPython 中，一旦列表理解完成，文件将被关闭（并且对`file`对象的所有引用都将丢失）。

但是 Python 标准并不*要求*它被关闭。例如，在使用 JVM 垃圾收集器的 jython 中不会立即关闭文件。

确保正确关闭资源的“首选”方法是以下`with`语句：

```
with open(…) as f:
    d = [l for l in f] 
```

这*将*保证文件被关闭。

而且，正如@astynax 指出的那样，您也许可以在`d = f.readlines()`此处使用，因为它与列表推导具有相同的语义。

为了向自己证明这一点（在 cpython 中）：

```
>>> 类 Foo（对象）：
... def __del__(self):
...打印“在__del__”
...定义__iter__（自我）：
...返回迭代器（[1, 2, 3, 4]）
...
>>> [ x for x in Foo() ]
在__del__
[1、2、3、4]

```

# selenium - 在哪里单击以下对象（按钮），以便在 Selenium（Webdriver）中显示值？

> ID：11027312
> 
> 赞同：0
> 
> 时间：2012-06-14T05:46:04.917
> 
> 标签：selenium, webdriver, selenium-rc, sahi

```
<table id="ext-comp-1389" class="x-btn x-btn-text-icon " cellspacing="0" style="width: auto;">
<tbody class="x-btn-small x-btn-icon-small-left">
<tr>
<tr>
<td class="x-btn-ml">
<td class="x-btn-mc">
<em class="x-btn-split" unselectable="on">
<button id="ext-gen128" class="x-btn-text create" type="button">New</button>
</em>
</td>
<td class="x-btn-mr">
<i>&nbsp;</i>
</td>
</tr>
<tr>
</tbody>
</table> 
```

上面是方式，新建按钮出现在 HTML 文件中......

按钮的行为是它旁边有一个“+”号......只有当它被点击“+”号时，才会显示选项列表......当它被点击时按钮没有任何反应...

我正在尝试使用 Selenium Webdriver 自动执行此操作...下面是我单击按钮的最终方式...

```
private static int buttonwidth=24;//value got from firebug computation tab...
private static final int Xoffset = (buttonwidth/2)+6;
private static final int Yoffset = 0;
private static int buttonwidth1=42;   
private static final int Xoffset1 = (buttonwidth/2)-6;
private static final int Yoffset1 = 0;
.......    
......
.......

WebElement ele = driver.findElement(By.xpath("//*[@id='ext-gen128']"));//new button's id
Actions build = new Actions(driver);
build.moveToElement(ele, Xoffset, Yoffset).click().build().perform();
WebElement ele1 = driver.findElement(By.xpath("//*[@id='ext-comp-1389']/tbody/tr[2]/td[2]/em"));
Actions build1 = new Actions(driver);
build1.moveToElement(ele, Xoffset1, Yoffset1).click().build().perform(); 
```

按钮的布局如下，Em 类的宽度为 42，Button 的宽度为 24……它们的快照也是如此……

![Em_Class 布局](../Images/1ffe7ebad7ed00c34674c0d8f5bc293c.png)

![NewButton_Layout](../Images/c5902b104ce90d6ec65a9f3179753ba5.png)

![新按钮图像](../Images/52bd5723413aca4c4356b1eaa84d3692.png)

谁能帮我解决这个问题？我应该定位哪个坐标和对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T07:22:27.803

该`moveToElement(ele,x,y)`方法将鼠标移动到元素左上角的偏移处。

所以我想你必须做一些计算来确保你得到正确的坐标来点击**+**符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T18:58:47.317

**此类问题的最佳解决方案是，使用 Sahi ..发现它易于使用并且具有良好的功能.. 使用命令 _click(_xy(_cell("New"),-5,5));**

# php - 使用 Zend_Form 验证 Javascript 创建的输入

> ID：11027321
> 
> 赞同：1
> 
> 时间：2012-06-14T05:46:37.023
> 
> 标签：php, zend-framework

我使用jquery动态创建一个文本框（基于用户选择）..有没有办法从zend表单为该文本框提供验证..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T07:38:52.820

就在这里。

大多数学分都归于 jeremy kendall 参见[http://www.jeremykendall.net/2009/01/19/dynamically-adding-elements-to-zend-form/](http://www.jeremykendall.net/2009/01/19/dynamically-adding-elements-to-zend-form/)

我解决它的方法是通过对添加获取表单元素的操作执行 jquery/ajax 调用，例如：

```
$.ajax({
    type : "POST",
    url : "/<controller>/addfield/",
    success : function(newElements) {
        // Insert new element before the submit button
        $("#productsNew-submit-element").before(newElements);
    }
}); 
```

它的作用是调用一个动作，该动作生成一个表单元素并返回您可以添加的 html

```
public function addfieldAction()
{
    //use $ajaxContext = $this->_helper->getHelper('AjaxContext'); in the init to make it return html via ajax

    $element = new Zend_Form_Element_Text("extraElement_1");
    $element->setBelongsTo("yourForm");
    $element->setLabel('myElementName');

    /*
    set other stuff like decorators or so
    */

    //now create the html 
    $elements .= $element->__toString();

    $this->view->fields = $elements;
} 
```

之后，您将通过 ajax 在表单中获得一个新元素

现在，当您提交时，您必须再次执行此操作，然后进行预验证

1.  首先检查您的表单是否有额外的元素，如果有，请再次添加它们
2.  用发布的值填充添加元素
3.  证实

```
public function saveAction()
{
    function findFields($field) {
        // return field names that include 'extraElement_'
        if (strpos($field, 'extraElement_') !== false) {
            return $field;
        }
    }

    //set all stuff you need especially the form

    if($this->getRequest()->isPost()) {
        $postValues = $this->getRequest()->getPost();

        //step 1 
        $extraFields = array_filter(array_keys(current($postValues)), 'findFields');

        //add the element before validation
        if(count($extraFields) !== 0) {
            foreach(extraFields as $extraField) {
                $this->addFields($postValues[$extraField]); <-- step 2 add the field(s)
            }
        }

        //step 3 validate
        if($this->_form->isValid($postValues)) {
            //do post validation stuff
        } else {
            //show errors
        }
    }       
} 
```

# android - 没有“选择选项”的微调器，但它应该显示为空白

> ID：11027324
> 
> 赞同：1
> 
> 时间：2012-06-14T05:46:45.820
> 
> 标签：android, android-spinner

我正在创建一个微调器。微调器将第一行值显示为默认文本。我希望 Spinner 的文本最初是空白的。

我可以添加一个新的空行，`list.add(" ");`但我认为这种方法看起来很难看。

```
list.add("");//this make my ui ugly but with out this i can't make my spinner blank in starting.
list.add("1");//if i remove add("").then spinner take add("1") this should not happen
list.add("2"); 
```

如何创建最初不显示任何文本的 Spinner？

**更新：**

```
urineGlucoseSpinner =  (Spinner) view.findViewById(R.id.spnner_urine_glucose);
ArrayList<String> ugList = new ArrayList<String>();
ugList.add("select");
ugList.add("1.5");
ugList.add("5.5");
ugList.add("0.8");
ugList.add("9.5");
ugList.add("12.0");

//ArrayAdapter<String> urineGlucoseAdapter = new ArrayAdapter<String>(getActivity(),android.R.layout.simple_spinner_item, ugList);
ArrayAdapter<String> urineGlucoseAdapter = new ArrayAdapter<String>(getActivity(),R.layout.custom_spinner_text,ugList);
urineGlucoseAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
urineGlucoseSpinner.setAdapter(urineGlucoseAdapter);
urineGlucoseSpinner.setOnItemSelectedListener(new OnUGItemSelected()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T07:15:14.640

Write this code in oncreate method:

```
Spinner gender = (Spinner) findViewById(R.id.gender);
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                this, R.array.gender_array,
                android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        gender.setAdapter(adapter);
gender.setSelection(0); 
```

and copy the below code and paste in string.xml

String.xml

```
<string-array name="gender_array"> 
       <item> </item>          
        <item>Male</item>        
        <item>Female</item>          
    </string-array> 
```

it will work properly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:53:52.043

您应该在适配器中包含表示“选择”或其他内容的额外条目，并使其成为 Spinner 中的初始选定项。

或者可能是您将不得不创建自定义微调器或我不确定的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:00:44.487

将图像看起来像下拉菜单并将它们放在 textview 的背景中。

```
 Textview  gender=(Textview)findViewById(R.id.gender)
  gender.setText("");
  gender.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    AlertDialog.Builder conductor = new AlertDialog.Builder(
                            Calculator.this);
                    conductor.setTitle("Select Gender");

                    int resId = getResources().getIdentifier("gender_array",
                            "array", getPackageName());
                    conductor.setItems(resId,
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,
                                        int index) {                            
                                    int resId1 = getResources().getIdentifier(
                                            "gender_array", "array",
                                            getPackageName());

                                    gender.setText(getResources()
                                            .getStringArray(resId1)[index]);                                
                                }
                            });
                    AlertDialog alert = conductor.create();
                    alert.show();

                }
            }); 
```

字符串.xml

```
<string-array name="gender_array">      
        <item>Male</item>        
        <item>Female</item>          
</string-array> 
```

# jquery - 由于成功回调的异步性，jQuery 使用 Ajax 错误地替换图像

> ID：11027325
> 
> 赞同：0
> 
> 时间：2012-06-14T05:46:46.057
> 
> 标签：jquery, ajax, asynchronous, synchronization

所以我试图通过ajax调用替换一堆图像，但是在某些情况下，同一个图像被多次加载，这是由ajax调用的异步性质引起的。（不按顺序调用success函数）我意识到jQuery.ajax函数确实有一个async参数：false，但是我用ajax调用加载的页面有点大，如果同步加载，加载时间会很糟糕. 有没有办法仍然使用异步但同时确保每个图像都能正确加载？

```
jQuery(document).ready(function($) {
    var thumb = $('.ihPhotoThumb');                 //original image elements
    for(var i = 0; i < thumb.size(); i++){          //go through all the images
        replaceImage($('.ihPhotoThumb').eq(i));     //call this function to replace the images
    }
});

function replaceImage(elem1){
    jQuery.ajax({
        url: elem1.parent().attr('href'), 
        success: function(data){
        var image_url =(jQuery(data).find("#ihf_detail_mainphoto_lrg img").attr('src')); //get the image url, which is wrapped in "#ihf_detail_mainphoto_lrg img"
        elem1.attr('src', image_url);              //replace the picture
    }
}); 
```

}

有问题的页面位于此处：[http](http://www.idxre.com/toppicks/52813/OffBeachUnder3m/71472) ://www.idxre.com/toppicks/52813/OffBeachUnder3m/71472 脚本从第 1714 行开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:54:25.550

正如 Nosredna 在另一篇文章中所说（相同的基本问题）：

> “你有两个我能想到的选择。一个是通过回调将它们链接起来。另一个是使调用同步而不是异步。
> 
> 您是否有理由希望它们按顺序排列？这会让事情变慢。
> 
> 要使调用同步，您需要将 Ajax 调用中的 async 选项设置为 false。[请参阅http://docs.jquery.com/Ajax/jQuery.ajax#options](http://docs.jquery.com/Ajax/jQuery.ajax#options)上的文档 （单击选项选项卡查看它们）。

那里还有一个插件链接，您可能会觉得很方便。

链接：[如何使所有 AJAX 调用顺序？](https://stackoverflow.com/questions/1151598/how-to-make-all-ajax-calls-sequential)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:28:52.607

我能够通过这里描述的方法解决我的问题：http: [//damiannicholson.com/2010/07/07/jquery-ajax-queue.html](http://damiannicholson.com/2010/07/07/jquery-ajax-queue.html)

我想我一直在寻找的解决方案是使 Ajax 调用异步但顺序的，因此 Nosredna 为我指明了正确的方向。

我不是 javascript 专家，所以也许有人可以改进我的答案。但我认为最初导致问题的原因是成功函数异步返回，当两个成功函数同时执行时，elem1 变量被另一个成功函数覆盖，这对我来说没有意义，因为函数作用域变量，但也许有人可以详细说明。

# php - 在 codeigniter 中快速创建函数

> ID：11027334
> 
> 赞同：0
> 
> 时间：2012-06-14T05:47:15.543
> 
> 标签：php, function, codeigniter

如您所知，在 codeigniter 中，类中的函数名称变为 url，如：

```
class Example extends CI_Controller {  

    function sayHello() {

        echo "Hello";  

    }  

} 
```

要简单地显示函数的内容，您可以使用以下方法显示它：

```
www.mydomain.com/example/sayhello 
```

我的问题是，我如何使用循环或通过从数据库中获取函数名称来形成这些函数，而不是一一编写所有函数名称？例如，我的数据库中有 100 个函数名。是否可以编写清晰而简短的代码，或者我应该手动编写所有功能？谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T06:10:31.613

这与创建函数无关。你的问题是路由。解决这个问题：

```
class University extends CI_Controller {

    public function _remap( $university_name )
    {

    }

} 
```

更多信息：[http ://codeigniter.com/user_guide/general/controllers.html#remapping](http://codeigniter.com/user_guide/general/controllers.html#remapping)

# iphone - 删除数组索引时如何更新 UIScrollView

> ID：11027340
> 
> 赞同：-2
> 
> 时间：2012-06-14T05:47:38.990
> 
> 标签：iphone, objective-c, ios

我是 iPhone 开发的新手。有人能告诉我如何更新 UIScrollview 的内容吗？我有一个包含不同引号的 NSMutable 数组，因此如果我从滚动视图中删除其中一个引号，如何将其从视图中删除，如果中间一个被删除，页面应该移至下一页，如果删除数组的最后一个索引。请帮忙！提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:24:32.740

最简单的方法是创建两种方法 - 用于在其中添加和删除对象`NSMutableArray`以及在其中更改`UIScrollView`. 例如：

```
-(void)addObjectToArray:(id)obj
{
    [self.myArray addObject:obj];
    //Create and initialize a view with a quote for example and add it in the UIScrollView
    [self.scrollView addSubView:someView];
}

-(void)removeObjectFromArray:(id)obj
{
    [self.myArray removeObject:obj];
    //Find the view you need to remove, either by tag or your array is actually from views,
    //and remove it from the UIScrollView
    [someView removeFromSuperview];
} 
```

然后在从数组中插入或删除对象时使用这些方法

```
[self addObjectToArray:someObject];
[self removeObjectFromArray:someObject]; 
```

还有一些其他更优雅的方法使用 KVO，但需要阅读一些关于它的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:20:12.000

删除图像后，从数组
[dataarray removeObjectAtIndex:selectedindex] 中删除该数据；
现在再次调用scrollview方法

# erlang - 在 Erlang 中从 Eunit 获取测试结果

> ID：11027351
> 
> 赞同：4
> 
> 时间：2012-06-14T05:48:25.857
> 
> 标签：erlang, eunit

我正在使用 Erlang 和 EUnit 进行单元测试，我想编写一个测试运行器来自动运行我的单元测试。问题是 eunit:test/1 似乎只返回“错误”或“确定”，而不是测试列表以及它们根据通过或失败返回的内容。

那么有没有办法运行测试并取回某种形式的测试运行的数据结构及其通过/失败状态？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T07:31:20.617

如果您使用钢筋，则不必实现自己的跑步者。您可以简单地运行：

```
rebar eunit 
```

Rebar 将编译并运行`test`目录中的所有测试（以及模块内的 eunit 测试）。此外，rebar 允许您`rebar.config`在 shell 中设置相同的选项：

```
{eunit_opts, [verbose, {report,{eunit_surefire,[{dir,"."}]}}]}. 
```

您也可以在 shell 中使用这些选项：

```
> eunit:test([foo], [verbose, {report,{eunit_surefire,[{dir,"."}]}}]). 
```

另请参阅[详细选项](http://www.erlang.org/doc/man/eunit.html#test-2)和[结构化报告](http://www.erlang.org/doc/man/eunit_surefire.html)的文档。

另一种选择是使用 Common Test 而不是 Eunit。Common Test 带有一个运行器（`ct_run`命令），为您的测试设置提供了更大的灵活性，但使用起来也有点复杂。Common Test 缺少可用的宏，但会生成非常易于理解的 html 报告。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-14T10:16:16.800

没有简单的或记录在案的方法，但目前有两种方法可以做到这一点。一种是在运行测试时提供选项“event_log”：

```
eunit:test(my_module, [event_log]) 
```

（这是未记录的，实际上仅用于调试）。生成的文件“eunit-events.log”是一个文本文件，Erlang 可以使用 file:consult(Filename) 读取该文件。

更强大的方法（并不是那么困难）是实现一个自定义事件监听器并将它作为一个选项提供给 eunit：

```
eunit:test(my_module, [{report, my_listener_module}]) 
```

这还没有记录，但它应该是。监听器模块实现了 eunit_listener 行为（参见 src/eunit_listener.erl）。只有五个回调函数需要实现。查看 src/eunit_tty.erl 和 src/eunit_surefire.erl 以获取示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T08:48:03.250

我刚刚向 GitHub 推送了一个非常简单的侦听器，它将 EUnit 结果存储在 DETS 表中。如果您需要进一步处理这些数据，这可能很有用，因为它们作为 Erlang 术语存储在 DETS 表中。

[https://github.com/prof3ta/eunit_terms](https://github.com/prof3ta/eunit_terms)

使用示例：

```
> eunit:test([fact_test], [{report,{eunit_terms,[]}}]).
All 3 tests passed.
ok
> {ok, Ref} = dets:open_file(results).
{ok,#Ref<0.0.0.114>}
> dets:lookup(Ref, testsuite).
[{testsuite,<<"module 'fact_test'">>,8,<<>>,3,0,0,0,
        [{testcase,{fact_test,fact_zero_test,0,0},[],ok,0,<<>>},
         {testcase,{fact_test,fact_neg_test,0,0},[],ok,0,<<>>},
         {testcase,{fact_test,fact_pos_test,0,0},[],ok,0,<<>>}]}] 
```

希望这可以帮助。

# java - Java中的switch语句

> ID：11027352
> 
> 赞同：16
> 
> 时间：2012-06-14T05:48:40.000
> 
> 标签：java, switch-statement

Java中的switch语句可能有多少种情况？例如，如果我们检查一个整数，可能有多少个 case 块？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-14T07:39:34.730

您最有可能首先遇到的界限是每个类的常量池中的最大条目数，即 65535。这将允许几千个小复杂度的案例块。常量池为在类中至少使用一次的每个数字或字符串文字包含一个条目，但也为所有字段、方法和/或类引用包含一个或多个条目，因为这些条目代表其他常量，这些常量必须是也存在于常量池中。即，方法引用条目由对方法签名的字符串条目的引用和对声明类的类条目的引用组成。类条目本身再次引用类名的字符串条目。

请参阅： Java 虚拟机的[限制](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.11)和[Java 虚拟机规范](http://docs.oracle.com/javase/specs/jvms/se7/html/index.html)中[的常量池](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.4)

忽略或重用 case 块中的代码的 switch 的绝对上限略小于 2^30 case，因为每个 case 都有一个跳转目标，它是有符号的 32 位整数（参见[tableswitch](http://docs.oracle.com/javase/specs/jvms/se5.0/html/Instructions2.doc14.html#tableswitch)和[lookupswitch](http://docs.oracle.com/javase/specs/jvms/se5.0/html/Instructions2.doc8.html#lookupswitch)指令），因此需要 4 个字节每种情况，每种方法的字节码大小限制为略小于 2^32 字节。这是因为字节码包含在[代码属性](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7.3)中，并且属性的[长度](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7)以无符号 32 位整数的形式给出。这个大小被进一步减小了，因为 code 属性有一些头信息，方法需要一些进入和退出代码，tableswitch 语句需要一些字节，包括它的最小/最大值和最多 3 个字节的填充。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-14T05:53:21.497

没有限制，除了 JVM 的大小以容纳所有字节码

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-14T14:38:47.870

**16377**。至少对于像这样的简单代码：

```
public class SwitchLimit {

    public static void main(String[] args) {
        int x = 0;
        switch(x) {
        case 0:
        ...
        case 16376:
        default:
        }
        System.out.println("done.");
    }

} 
```

在这个例子中你可以有 16377 个 case 语句（不算`default`），如果你添加 a `case 16377:`，代码将不会编译并出现以下错误：

> 方法 main(String[]) 的代码超出了 65535 字节的限制

正如其他人指出的那样，如果您的方法确实做了任何有意义的事情，这个数字可能会大大降低。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-14T05:49:53.357

这取决于您的要求。你可以有很多范围 int 类型的情况。由于 int 类型的范围是有限的，之后整数循环的概念就会出现。

由于 int 的大小范围从 -2,147,483,648 到 2,147,483,647，因此您可以为每个数量设置一个案例。所以在整数的情况下，情况的数量是有限的。

但是如果你想使用 String in case，那么你可以像 Bohemian 所说的那样拥有无限数量的 case。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-14T05:54:01.870

根据硬件，案例总数将是 int 可以采用的最大数量。看看[java中的数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

因此，您将拥有尽可能多的案例块的整个范围。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-14T05:55:20.147

switch 中的 case 语句没有限制。在最坏的情况下，您可以获得堆空间，但并不容易。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-14T13:27:51.453

阅读问题、答案和评论，我不明白为什么它是相关的。您当然可以拥有`case`比手动编写更多的 s。而且，在您机器生成代码的不太可能的情况下，Java 中有比`switch`es 更好的选择。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-06-14T05:54:04.383

`Infinite!!`没有这样的限制。

# regex - 如何为这种情况编写这个正则表达式？

> ID：11027354
> 
> 赞同：1
> 
> 时间：2012-06-14T05:48:45.853
> 
> 标签：regex

我想用冒号分割输入字符串。例如，`a:int`。我可以`[^:]*`用来获取`a`and `int`。

但是，我不希望字符串被包含冒号的任何组合拆分，例如`A:=3:command`. 我想要的是`A:=3`and`command`但不是`A`, `=3`, `command`。

有人可以告诉我如何编写正则表达式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:07:14.893

在等待 OP 进行编辑之前，我将假设唯一应该出现在拆分中的冒号是那些后跟简单的 ASCII 字母或数字的冒号。该解决方案可以很容易地推广。

这是 JavaScript 中的一个具体示例：

```
s = "x:=3:comment"
s.split(/:(?=[\s\w])/) 
```

结果是

```
['x:=3','comment'] 
```

split 函数表示“在后跟空格或单词字符（ASCII 字母或数字或下划线）的冒号上拆分”。

其他语言有更强大的环视形式（特别是负环视），但基本思想是构造一个正则表达式，其中拆分值是*特定上下文中*的冒号。

**附录**

另一个例子：

```
"this:has:(some%:   7colons:$:6)".split(/:(?=[\s\w])/) 
```

产生：

```
['this','has:(some%','   7colons:$','6')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:04:46.267

从表面上看，您希望在字符串的最后一个冒号上进行拆分，因此您希望尾随材料是一串非冒号，而前面的材料是任何东西。您也没有指定（在我回答问题时）您想要哪个正则表达式的子类（您正在使用哪种语言编写），所以您得到 Perl 作为我的答案。

```
#!/usr/bin/env perl
use strict;
use warnings;

my @array = ( "a:int", "A:=3:comment" );

foreach my $item (@array)
{
    my($prefix, $suffix) = $item =~ m/^(.*):([^:]+)$/;
    print "$prefix and $suffix\n";
} 
```

该脚本的输出是：

```
a and int
A:=3 and comment 
```

显然，如果拆分规则不同（它不仅仅是“最后一个冒号”），那么模式将不得不改变。但这相当干净地达到了规定的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T06:13:13.080

除了 Ray 的回答之外，另一种选择是将您支持的运算符列入白名单，例如支持`:=`（JavaScript 示例）：

```
var s = "hello:world:=5:and:r";
var tokens = s.match(/(?:[^:]|:=)+/g); 
```

例如，如果您想要运算符`:=`、和`=:`，您可以编写：`:=:``::`

```
/(?:[^:]|:=|=:|:=:|::)+/g 
```

（这可以简化为，但我认为它很容易维护）。

# python - wxPython：针对不同的屏幕分辨率调整面板和大小调整器

> ID：11027366
> 
> 赞同：0
> 
> 时间：2012-06-14T05:49:29.190
> 
> 标签：python, user-interface, wxpython, alignment, screen-resolution

所以，我很高兴我在一天之内使用 wxPython 编写了一个看起来很棒的 GUI 的整个代码，但是当我发现面板不碍事时，它就消失了，在侧面留下了很多空白空间或变得拥挤（你知道怎么做！）在不同的屏幕分辨率上。

我想问的是，如果我想看到 GUI 的纵横比、框架对齐、面板对齐、尺寸比等保持不变或者是否有任何方法，我应该调整或关心 GUI 的所有属性这样做，建议我。

提前致谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:12:37.747

Sizer 会自动调整您的应用程序小部件的屏幕分辨率、调整大小等。如果它们没有自动执行此操作，那么您的代码中可能存在错误。由于我没有要查看的代码，因此请尝试非常仔细地阅读有关 sizer 的 wxPython 教程。我发现*wxPython In Action*这本书在这个主题上非常有用。

# c# - 如何正确处理向字典添加新项目？

> ID：11027369
> 
> 赞同：2
> 
> 时间：2012-06-14T05:49:40.720
> 
> 标签：c#, asp.net, dictionary, add

我有一个 ASP.NET 应用程序，我在其中使用静态类作为缓存。该静态类内部是内部字典，其中包含缓存的对象。当然，静态类中有 Add/Remove/Clear 之类的方法...看起来如下：

```
public static class CacheManager
{
    private static Dictionary<string, object> cacheItems = new Dictionary<string, object>();

    private static ReaderWriterLockSlim locker = new ReaderWriterLockSlim();

    public static Dictionary<string, object> CacheItems
    {
        get
        {
            return cacheItems;
        }
    }

    public static void AddCacheItem(string key, object data)
    {
        locker.EnterWriteLock();
        try
        {
            cacheItems.Add(key, data);
        }
        finally
        {
            locker.ExitWriteLock();
        }
    }

    ...
} 
```

当 ASP.NET 应用程序运行时，这些项目被添加到缓存（字典）中。我只想问我是否应该在 Add 方法中检查是否已经以这种方式添加了密钥：

```
 public static void AddCacheItem(string key, object data)
    {
        locker.EnterWriteLock();
        try
        {
            if (!cacheItems.ContainsKey(key))
            {
                cacheItems.Add(key, data);
            }
        }
        finally
        {
            locker.ExitWriteLock();
        }
    } 
```

还是将其保留在第一个代码片段中？

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T05:54:48.143

您可以实现另一种方法 TryAdd

```
public static bool TryAddCacheItem(string key, object data)
{
    locker.EnterWriteLock();
    try
    {
        if (cacheItems.ContainsKey(key))
        {
            return false;
        }
        cacheItems.Add(key, data);
        return true;
    }
    finally
    {
        locker.ExitWriteLock();
    }
} 
```

我也建议使用[ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd267291.aspx)。[这](http://code.google.com/p/codesmith/source/browse/trunk/Templates/Frameworks/PLINQO/Source/CodeSmith.Data/Collections/ConcurrentDictionary.cs?r=1991)是 ConcurrentDictionary 的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:57:50.103

只需执行两次：

`cacheItems.Add(key, data);`

......你会知道答案的。基本上，异常将被 try/finally 块抛出并捕获。我个人会使用 if 语句，而不是将所有逻辑责任放在 try 块上，但这是一个偏好问题......

# openerp - 更新 OpenERP 中的会计科目表

> ID：11027377
> 
> 赞同：0
> 
> 时间：2012-06-14T05:50:31.017
> 
> 标签：openerp

我想安装新的会计科目表。我设法安装它没有错误，但它没有出现在可供选择的会计科目表中。我是否需要在帐户模块中的某处添加指向我的会计科目表的链接才能识别，还是我需要其他东西？

我可以从第二个会计科目表中看到该模块。我的意思是，首先，当我从会计科目表列表中选择要使用的科目时，我看不到我的会计科目表，但如果我选择任何其他会计科目表并进入第二个窗口，我有选择公司，设置税金等。然后我可以看到第二个会计科目表，其中显示了已安装的会计科目表列表。然后我看到了我选择的那个，还有我的会计科目表。然后，如果我选择我的会计科目表，我会收到错误，即税名应该是唯一的。我认为这是因为以前的会计科目表是生成的。如果我关闭该窗口，我可以在配置中看到两个会计科目表都已生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T22:46:17.847

如果您希望您的模块出现在第一个会计向导的可用会计科目表列表中，请确保您已`Localization/Account Charts`在清单 ( `__openerp__.py`) 中正确设置模块类别。例如，从现有的会计科目表中获得灵感是一个非常好的主意`l10n_be`。查看现有[清单](http://bazaar.launchpad.net/~openerp/openobject-addons/6.1/view/head:/l10n_be/__openerp__.py)以查看要使用的确切语法/拼写。

但是，尚不清楚这是否会解决您的问题，因为此向导不会执行您认为的操作。6.0/6.1 OpenERP系列有2个主要的会计配置向导：

*   “**安装您的会计科目表**”：第一个向导有两个目的：安装适当的会计科目表模块，并为所选公司生成会计年度和会计期间。它将允许您安装属于该`Localization/Account Charts`类别的任何模块，并允许您为尚未安装会计科目表的公司之一配置会计期间。此向导实际上**并不**配置或创建会计科目表，它只安装一个模块和随附的模板。
*   “**从图表模板生成会计科目表**”：该向导完成了第一个开始的工作，通过使用已安装的模板之一（来自已安装的本地化模块）实际为所选公司创建完整的会计科目表。安装模块后，您将立即在此向导中看到可用的会计科目表。该向导应该只允许您为还没有会计科目表的公司配置会计科目表，因为您不能为同一家公司做两次。

如果您在运行第二个向导时收到有关重复税款的错误，则它不应与是否运行第一个向导直接相关。也许您确实已经在您的会计科目表中定义了多个具有相同名称的税务模板，或者您可能已经为同一家公司手动创建了税金，而它们现在与您的会计科目表中的模板冲突？可能有很多不同的原因，没有更多信息很难说。

在任何情况下，以示例为例，仔细检查您的模块`l10n_be`，并确保您阅读了[编写科目表模块的官方文档](http://doc.openerp.com/v6.0/contribute/15_guidelines/l10n_guidelines.html)（如果您尚未阅读）。

当你有不明白的地方，记住 OpenERP 是开源的，所以使用源代码，Luke :-)
第一个向导的源代码在[这里](http://bazaar.launchpad.net/~openerp/openobject-addons/6.1/view/head:/account/installer.py)，第二个向导的源代码在[那里](http://bazaar.launchpad.net/~openerp/openobject-addons/6.1/view/head:/account/account.py#L2955)。查看源代码将回答您当前的问题，也可能回答您未来的问题:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:37:49.457

您的图表可能不会在初始配置期间出现，因为您的模块尚未安装。您可能可以跳过新数据库的配置，安装模块，然后运行配置。

另一种选择可能是在配置期间安装最小或通用会计科目表。有“无”选项吗？之后，您可以安装自己的模块，其中包括您公司使用的所有额外帐户和税款。我认为这就是我们所做的，但它回到了第 5 版，所以现在的工作方式可能略有不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T11:30:48.600

终于设法解决了这个问题。当我将税收名称更改为唯一（应付和应收增值税名称相同）并将 close_method 更改为 unreconciled 在某些帐户类型上时，因为 openerp 需要使用它，现在我设法成功安装它，我可以在图表上看到它帐户列表。

# asp.net-mvc - Asp.Net - MVC - System.Collections.Generic.IEnumerable

> ID：11027379
> 
> 赞同：2
> 
> 时间：2012-06-14T05:50:48.157
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我是 Asp.net 和 MVC 的新手。我试图做编辑功能，但它给我一个错误。
**CS1061：“System.Collections.Generic.IEnumerable”不包含“Idx”的定义，并且找不到接受“System.Collections.Generic.IEnumerable”类型的第一个参数的扩展方法“Idx”（您是否缺少使用指令还是程序集引用？）**

代码

```
@model IEnumerable<SealManagementPortal_3._0.Models.VOC_CUSTODIAN>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            StaffID
        </th>
        <th>
            Name
        </th>
        <th>
            IC
        </th>
        <th>
            Phone
        </th>
        <th>
            Branch
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.StaffId)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.NRICNo)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.MobileNo)
        </td>
         <td>
            @Html.DisplayFor(modelItem => item.Branch)
        </td>
        <td>
         @Html.ActionLink("Details", "Details", new { id=Model.Idx }) // error here
         </td>

    </tr>
}

</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:53:12.950

您仍在引用*项目*枚举器。所以它需要是*item*而不是*Model*：

```
 @Html.ActionLink("Details", "Details", new { id = item.Idx }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T05:59:28.530

您尝试将 actionlink 的 id 属性设置为 Model.Idx，但您的模型是 VOC_CUSTODIAN 对象的 IEnumerable。您需要使用集合当前枚举器的 Idx 值。您只需将“模型”更改为“项目”，就像循环中的所有其他 html 控件一样：

```
@Html.ActionLink("Details", "Details", new { id= item.Idx }) 
```

# c# - 获取 Python 可执行路径

> ID：11027382
> 
> 赞同：1
> 
> 时间：2012-06-14T05:50:56.300
> 
> 标签：c#, python, windows, executable

我怎样才能：

1.  检查机器上是否安装了 Python，如果是，则
2.  获取它的可执行路径？

注意：我可以使用 Python、IronPython 等...只要我可以传递一个 .py 文件并让它运行它。

我可以对一些路径进行硬编码（例如 C:\Program Files (x86)\Iron Python... ），但我想要更优雅的东西，如果它存在的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:55:28.203

可能不是您要查找的内容，但 Powershell Cmdlet get-command 会输出完整的可执行路径。例如：

```
get-command python | ForEach-Object -Process {write-host $_.Definition} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:19:56.463

检查此注册表项工作正常：

```
HKEY_CLASSES_ROOT\Python.File\shell\open\command 
```

如果它不存在，那么我只是问用户。

# clojure - 用于clojure的Lamson？

> ID：11027386
> 
> 赞同：4
> 
> 时间：2012-06-14T05:51:10.450
> 
> 标签：clojure, jvm, lamson

是否有任何 java 或 clojure 邮件库可以做 lamson 的工作？尤其是lamson的邮件路由功能很爽[http://verpa.wordpress.com/2010/11/13/making-your-webapp-react-to-emails-with-lamson-pt-2/](http://verpa.wordpress.com/2010/11/13/making-your-webapp-react-to-emails-with-lamson-pt-2/)都有jvm有什么类似的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:42:14.493

[JavaMail](http://www.oracle.com/technetwork/java/javamail/index.html)相当复杂，可以通过STMP 发送邮件并使用POP3 和IMAP 接收邮件。您可以构建一个层来自己路由邮件。也许[Apache JAMES](http://james.apache.org/)对您也有用。

# asp.net - ASP.NET 实体数据模型获取具有关系的列表

> ID：11027393
> 
> 赞同：0
> 
> 时间：2012-06-14T05:51:50.063
> 
> 标签：asp.net, entity-framework, entity-relationship

我有“问题”和“问题类型”。在“问题”表中，有一个引用另一个表的外键。我想显示带有类型名称的问题属性。

中继器代码：

```
<ItemTemplate>
    <tr>
        <td>
             <%#Eval("QuestionSubject")%>
        </td>
        <td>
             <%#Eval("Question")%>
        </td>
        <td>
             <%#Eval("QuestionTypeName")%> //I want to get question typename
        </td>                          //TypeName is in other table
    </tr>
</ItemTemplate> 
```

这是后面的代码：

```
private IEnumerable<TableSurveyQuestion> Questions()
{
    int survey_id = Int32.Parse(Request.QueryString["survey_id"]);
    IEnumerable<TableSurveyQuestion> questions= db.TableSurveyQuestions.Where(a => a.SurveyId == survey_id);
    return questions;
} 
```

我将此功能绑定到转发器数据源。

我试过`select new TableQuestions {typeName=x.TableQuestionTypes.TypeName}`了，但这没有用。

在 mvc 中，我得到了这样的结果`question.TableQuestionType.TypeName`。如何在 ASP.NET Web 表单中执行此操作。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T10:54:28.860

我找到了

```
var sorular = from soru in db.TableSurveyQuestions
                  where soru.SurveyId == anket_id
                  orderby soru.QueueNo, soru.Subject ascending
                  select new
                  {
                      soru.TypeId,
                      soru.Subject,
                      soru.QuestionId,
                      soru.SurveyId,
                      soru.QueueNo,
                      SurveyTitle = soru.TableSurvey.Title,
                      TypeName = soru.TableSurveyQuestionType.TypeName,
                      SoruSayisi = db.TableSurveyQuestions.Where(a => a.SurveyId == anket_id).Count(),

                      Secenekler = from secenekler in soru.TableSurveyOptions
                                   select new
                                   {
                                       OptionId = secenekler.OptionId,
                                       OptionName = secenekler.OptionName,
                                       QuestionId = secenekler.QuestionId,
                                       VoteCount = secenekler.TableSurveyVotes.Count
                                   }
                  }; 
```

谢谢。

# php - echo 字体颜色输出

> ID：11027399
> 
> 赞同：1
> 
> 时间：2012-06-14T05:52:11.077
> 
> 标签：php, colors, echo

我编写了一个以红色显示错误的 php 代码。但不知何故，这似乎行不通。这是我的代码：

```
<?php
...    
if(!$name || !$email || !$contact || !$itemid){
                        //if not display an error message
                        echo "<span style="color: red;" /><center>Fields marked with <strong>&#40; &#42; &#421</strong> are mandatory!</center></span>";
                        }else{...

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T05:53:56.990

做这样的事情——

```
echo '<span style="color: red;" /><center>Fields marked with <strong>&#40; &#42; &#421</strong> are mandatory!</center></span>'; 
```

您的`""`报价相互矛盾

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T05:54:10.280

```
 <?php
...    
if(!$name || !$email || !$contact || !$itemid){
                        //if not display an error message
                        echo "<span style='color: red;' /><center>Fields marked with <strong>&#40; &#42; &#421</strong> are mandatory!</center></span>";
                        }else{...

?> 
```

试试这个，你正在关闭报价

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T06:02:10.603

问题是您的 PHP 表达式中未转义的引号。

```
echo "<span style="color: red;" />...
                //^ Right here 
```

因为，您的 PHP`echo`语句也以相同的引号开头，即`"`.

以下是您可以解决此问题的不同方法：

1.  使用混合引号

    ```
    echo "<span style='color: red;' />...
          // Single quote in the HTML part 
    ```

2.  转义引号

    ```
    echo "<span style=\"color: red;\" />...
         // Escape the quotes so that it gets treated as string rather than a modifier 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T05:53:30.907

您正在生成无效的 HTML。一个`<span>`元素不能包含一个`<center>`元素。`<center>`浏览器可能会通过将元素移动到外部来纠正错误`<span>`（因此应用于跨度的样式规则不会继承到`<center>`元素中）。

生成有效的标记（并将您的样式规则移动到样式表）。

```
echo "<p class='error'>Fields marked with <strong>&#40; &#42; &#421</strong> are mandatory!</p>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T05:53:55.600

你的报价是矛盾的。要么转义它们，要么使用单引号和双引号

```
 echo '<span style="color: red;" /><center>Fields marked with <strong>&#40; &#42; &#421</strong> are mandatory!</center></span>'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T05:55:38.363

用颜色属性中的单引号修改并删除“中心”， `echo "<span style='color: red;' />`

# html - cakephp css问题

> ID：11027405
> 
> 赞同：1
> 
> 时间：2012-06-14T05:53:05.850
> 
> 标签：html, css, cakephp, cakephp-2.0

我有一个 ctp 文件，其中我的代码是：--

```
<table>
    <tr>
        <td width="50%"><?php echo $this->Form->input('first_name'); ?></td>
        <td><?php echo $this->Form->input('middle_initial'); ?></td>
    </tr>
    <tr>
        <td><?php echo $this->Form->input('last_name'); ?></td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>
            <table>
                <tr><td colspan="3">Phone Number</td></tr>
                <tr>
                    <td><?php echo $this->Form->input('phone1', array('label' => false, 'type'=>'text','id' =>'phone1', 'maxlength' => 3)); ?></td>
                    <td><?php echo $this->Form->input('phone2', array('label' => false, 'type'=>'text','id' =>'phone2','maxlength' => 3)); ?></td>
                    <td><?php echo $this->Form->input('phone3', array('label' => false,'type'=>'text', 'id' =>'phone3','maxlength' => 4)); ?></td>
                </tr>
            </table>
        </td>
        <td>&nbsp;</td>
    </tr>
</table> 
```

在我的 CSS 中：-

```
.contentWrp .input input{ height: 20px; width: 200px; border: 1px solid #12192c; font-size: 14px;} 
```

![在此处输入图像描述](../Images/1c53293730a2c4a75abd93ccd7353d8a.png)

但是正如您所看到的，它在图像上使用不同的 css 作为文本框。即使我试图在我的 ctp (html) 文件中为此提供通用 css，但它需要不同的 css..

帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T07:14:17.573

CakePHP 的 $this->Form->input(...) 在输入控件周围生成自己的 html 包装器，并且在默认安装中还包括一个样式化它的 css 文件。您应该首先尝试删除默认的 CakePHP css 文件或查看生成的 html 的源代码并相应地修改您的 css 选择器。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T05:59:33.540

可能没有正确定义 CSS 选择器。你全局标签喜欢

```
input{ height: 20px; width: 200px; border: 1px solid #12192c; font-size: 14px;} 
```

# pdf - 标记的 PDF XML 架构

> ID：11027413
> 
> 赞同：1
> 
> 时间：2012-06-14T05:53:35.273
> 
> 标签：pdf

我想将从标记的 PDF（Acrobat --> Save as XML 1.0）生成的 XML 转换为 Html。我确实查看了 PDF 参考版本 1.7 中的“标记的 pdf”部分。我想知道这个转换是否已经有一个 XSL 样式表，或者标记的 pdf 有一个 XML 模式引用。

# jquery - 检索放置元素的索引

> ID：11027415
> 
> 赞同：2
> 
> 时间：2012-06-14T05:53:43.090
> 
> 标签：jquery, ipad, drag-and-drop

我正在使用 webkit 拖放功能，但是在拖动时我试图检索我想要删除的特定 div 的索引

```
var data = new Array ("a","b","c","d","e","f","g");
var data1 = new Array ("c","b","e","d","a","f","g");
var check ="" ;
var test = "";
var test1 = 0;
var str = "abcdefg";            
$(document).ready(function(){
alert("hello");

$('.content').each(function(){

var text1 = $(this).text();
var element = this;
var draggab = new webkit_draggable($(this).attr('id'),{

onStart : function(){
var text1 = $(element).text()
console.log("start"+text1);},
var dropable = webkit_drop.add($(this).attr('id'),{
accept : ['content'],

onDrop:function(){
   var thise = $(this);
   console.log($(thise).index(this));
    console.log("Drop");
   alert($('.content').index() )
   alert(text1)
   alert(data[$('.content').index(this)] == text1);
   if(data[$('.content').index(this)] == text1)
   {                                                                  
var condrop=$(this).html()
                                                      alert(condrop);
                                            $(element).html(condrop);
                                            $(this).html(text1);

                                        }
  }, 
```

这里的内容是 div id，我想要那个特定 div 的索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:56:02.707

它应该像这样简单：

```
onDrop:function(){
  var $this = $(this);

  console.log("Drop");
  console.log($this.index());
); 
```

# java - java中一个线程占用多少内存

> ID：11027427
> 
> 赞同：13
> 
> 时间：2012-06-14T05:54:10.297
> 
> 标签：java, multithreading, memory

一个普通线程在java中占用多少内存。假设没有与之关联的对象。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T05:59:07.687

为线程堆栈分配的内存量特定于您的 JVM 版本 + 操作系统。它配置了 -XX:ThreadStackSize 选项（旧版本上的 -Xss。）有趣的是 512KB 是“正常的”，尽管它在 64 位 linux 上是 1024，这可能是它最常见的关键平台（无论如何都是一个人的意见）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T05:58:33.257

Java 应用程序中的每个线程都有自己的堆栈。堆栈用于保存返回地址、函数/方法调用参数等，**默认堆栈大小为 512KB**。您可以通过`-Xss`jvm 命令进行更改。

```
java  -Xss128k 
```

# database - NoSuchElementException - 无法完成架构更新 - (SQLite,Hibernate,JPA,JSF,Spring)

> ID：11027443
> 
> 赞同：0
> 
> 时间：2012-06-14T05:55:33.460
> 
> 标签：database, spring, hibernate, sqlite, exception

我们总是在服务器启动时遇到这个休眠异常。我不知道在哪里可以搜索错误。也许有人知道出了什么问题？？

直到知道，我们忽略了这个异常，因为它不影响应用程序。

```
INFO: HV000001: Hibernate Validator 4.3.0.Final
14.06.2012 07:45:59 org.hibernate.tool.hbm2ddl.SchemaUpdate execute
INFO: HHH000228: Running hbm2ddl schema update
14.06.2012 07:45:59 org.hibernate.tool.hbm2ddl.SchemaUpdate execute
INFO: HHH000102: Fetching database metadata
14.06.2012 07:45:59 org.hibernate.tool.hbm2ddl.SchemaUpdate execute
INFO: HHH000396: Updating schema
14.06.2012 07:45:59 org.hibernate.tool.hbm2ddl.SchemaUpdate execute
ERROR: HHH000299: Could not complete schema update
java.util.NoSuchElementException
at java.util.StringTokenizer.nextToken(StringTokenizer.java:332)
at org.hibernate.tool.hbm2ddl.ColumnMetadata.<init>(ColumnMetadata.java:48)
at org.hibernate.tool.hbm2ddl.TableMetadata.addColumn(TableMetadata.java:153)
at org.hibernate.tool.hbm2ddl.TableMetadata.initColumns(TableMetadata.java:200)
at org.hibernate.tool.hbm2ddl.TableMetadata.<init>(TableMetadata.java:58)
at org.hibernate.tool.hbm2ddl.DatabaseMetadata.getTableMetadata(DatabaseMetadata.java:114)
at org.hibernate.cfg.Configuration.generateSchemaUpdateScript(Configuration.java:1133)
at org.hibernate.tool.hbm2ddl.SchemaUpdate.execute(SchemaUpdate.java:212)
at org.hibernate.tool.hbm2ddl.SchemaUpdate.execute(SchemaUpdate.java:178)
at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:497)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1744)
at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:94)
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:905)
at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:890)
at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:74)
at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:257)
at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findDefaultEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:530)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.findEntityManagerFactory(PersistenceAnnotationBeanPostProcessor.java:496)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.resolveEntityManager(PersistenceAnnotationBeanPostProcessor.java:657)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor$PersistenceElement.getResourceToInject(PersistenceAnnotationBeanPostProcessor.java:630)
at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:150)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
at org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor.postProcessPropertyValues(PersistenceAnnotationBeanPostProcessor.java:339)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:848)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:790)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:384)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4765)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5260)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1525)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1515)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:619) 
```

谢谢！

问候马蒂亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:09:27.297

下面是 ColumnMetada 源的样子：

```
ColumnMetadata(ResultSet rs) throws SQLException {
    name = rs.getString("COLUMN_NAME");
    columnSize = rs.getInt("COLUMN_SIZE");
    decimalDigits = rs.getInt("DECIMAL_DIGITS");
    isNullable = rs.getString("IS_NULLABLE");
    typeCode = rs.getInt("DATA_TYPE");
    typeName = new StringTokenizer( rs.getString("TYPE_NAME"), "() " ).nextToken();
} 
```

所以你可能对 TYPE_NAME 列有问题。当您执行 DESCRIBE 时会出现这种情况吗？

还要确保您使用的是最新的 JDBC 驱动程序、最新的 Hibernate，并且 Hibernate 方言与数据库匹配。

# ruby-on-rails - fb_graph rails：如何将所有朋友存储到mongoid？为什么使用 each/map 这么慢？

> ID：11027448
> 
> 赞同：1
> 
> 时间：2012-06-14T05:56:03.320
> 
> 标签：ruby-on-rails, mongoid, fb-graph

```
@fb_friends = @fb_user.friends
@fb_friends.each do |friend|
  friend_profile = friend.fetch
  puts friend_profile.name
end 
```

使用上面的代码，我能够检索所有朋友的名字，但他们运行速度非常慢。花了10多分钟找回所有的朋友。

所以我想知道什么问题？我可以通过将@fb_friends 转换为 json 并将它们存储到 mongoid 来直接存储它们，而不是使用迭代来遍历朋友吗？

谢谢

# jquery - 无法从以前选择的单选按钮中删除课程

> ID：11027451
> 
> 赞同：0
> 
> 时间：2012-06-14T05:56:17.000
> 
> 标签：jquery, radio-button, removeclass, checked

我想要做的是让用户单击一个表，该表在该表内选择一个单选按钮，然后将一个类添加到选定的表中。然后，如果用户在选中该收音机时选择了另一个表，则将添加该类，但也需要删除先前选择的表/收音机中的类。

现在大部分都有效，当我选择另一个收音机时，上一课不会被删除。只有当您切换收音机时，它才会被移除。

[这是 jsfidd 上的演示链接](http://jsfiddle.net/stevenschemers/cGTYm/21/)，您可以在其中查看所有 html 和其他 JS。

```
$(function() {

    $('table').click(function(event) {

        if (event.target.type != "radio") {

            var that = $(this).find('input:radio');

            that.attr('checked', !that.is(':checked'));

            if (that.is(':checked')) {
            that.closest('table').addClass('selected');
            }
            else {
                that.closest('table').removeClass('selected');
            }
        }

    });
}); 
```

在我修改它之前，我也忘记了我使用的是另一个版本。在这一个中，如果您实际单击单选按钮，样式将正确添加/删除，但在您单击表格时不会正确添加/删除。我试图将两者结合起来，这就是我获得上面发布的功能的方式..

[这是带有该演示的 jsfiddle 的链接，这](http://jsfiddle.net/stevenschemers/b2LpJ/)也是我使用的 jquery。

```
// jQuery to select radio button within clicked table
$(function() {

$('table').click(function(event) {  

    if(event.target.type != "radio") {

        var that = $(this).find('input:radio');
        that.attr('checked', !that.is(':checked'));

    }
});
});

// jQuery to change the style of the table containing the selected radio button
$(function() {
$('input[type="radio"]').change( function() {
  //   grab all the radio buttons with the same name as the one just changed
    var this_radio_set = $('input[name="'+$(this).attr("name")+'"]');

    for (var i=0; i < this_radio_set.length;i++) {
    if ( $(this_radio_set[i]).is(':checked') )         
      $(this_radio_set[i]).closest('table').addClass('selected');
        else 
        $(this_radio_set[i]).closest('table').removeClass('selected');
}
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T05:58:33.920

你需要做这样的事情：

```
$(this).closest('.container').addClass('selected').parent().siblings().each(function() {
    $(this).find('.container').removeClass('selected');
}); 
```

还有一个演示：http: [//jsfiddle.net/cGTYm/22/](http://jsfiddle.net/cGTYm/22/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:20:04.947

```
$(function() {
    $('table').click(function(event) {
        if (event.target.type != "radio") {
            var that = $(this).find('input:radio');
            that.attr('checked', !that.is(':checked'));

            $('table.selected').removeClass('selected');
            that.closest('table').addClass('selected');

        }
    });
}); 
```

# sql - sp_executesql 错误？

> ID：11027452
> 
> 赞同：0
> 
> 时间：2012-06-14T05:56:17.563
> 
> 标签：sql, sql-server, tsql

为什么使用 sp_executesql 调用存储过程时出现错误？

不工作。

```
exec sp_executesql N'sp_clnt_regional_experts_territories',
                   N'@action nvarchar(3), @regional_expert_id int,@region_id int,@territory_id int',
                   @action = N'SEL',
                   @regional_expert_id = 2,
                   @region_id = -1,
                   @territory_id = -1 
```

> 过程或函数“sp_clnt_regional_experts_territories”需要未提供的参数“@action”。

工作正常：

```
EXEC sp_clnt_regional_experts_territories                   
     @action = N'SEL',
     @regional_expert_id = 2,
     @region_id = -1,
     @territory_id = -1 
```

存储过程在哪里：

```
ALTER PROCEDURE [dbo].[sp_clnt_regional_experts_territories]
    @action NVARCHAR(3),
    @regional_expert_id INT = -1,
    @region_id INT = -1,
    @territory_id INT = -1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T06:25:35.647

你的 sp_executesql 是错误的。你需要像下面这样格式化它

```
 DECLARE @SQLString NVARCHAR(500)
 DECLARE @ParmDefinition NVARCHAR(500)
 DECLARE @action nvarchar(3)
 DECLARE @regional_expert_id int
 DECLARE @region_id int
 DECLARE @territory_id INT
 Set @SQLString=N'EXEC sp_clnt_regional_experts_territories @action,
                                             @regional_expert_id ,@region_id   ,@territory_id'

 Set @ParmDefinition='@action NVARCHAR(3),
            @regional_expert_id INT ,
            @region_id INT ,
            @territory_id INT '

EXECUTE sp_executesql
@SQLString,
@ParmDefinition,
@action=N'SEL',
@regional_expert_id=2,
@region_id=-1,
@territory_id=-1 
```

无需在一个语句中直接输入所有内容，而是将代码分解为不同的部分，这有助于您轻松找到问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T07:24:29.287

[`sp_executesql`](http://msdn.microsoft.com/en-us/library/ms188001.aspx)说`@params`：

> 是一个字符串，其中包含**已嵌入 @stmt**的所有参数的定义。

（重点补充）

`@stmt`因此，正如其他答案所指出的那样，您在那里识别的任何参数也必须在中提及。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T06:58:04.323

该错误是因为您没有在存储过程名称之后包含参数，这是 sp_executesql 所必需的

```
exec sp_executesql N'sp_clnt_regional_experts_territories @action,@regional_expert_id ,@region_id   ,@territory_id',
                   N'@action nvarchar(3), @regional_expert_id int,@region_id int,@territory_id int',
                   @action = N'SEL',
                   @regional_expert_id = 2,
                   @region_id = -1,
                   @territory_id = -1 
```

# extjs - extjs 中的 top.Ext.getCmp() 和 Ext.getCmp() 有什么区别

> ID：11027455
> 
> 赞同：1
> 
> 时间：2012-06-14T05:56:31.697
> 
> 标签：extjs

我是 Extjs 的新手。在一个程序中我看到 top.Ext.getCmp() 和 Ext.getCmp() 使用过。我不能

了解它们之间的区别。请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:09:47.553

来自 MDN：

> 返回对窗口层次结构中最顶层窗口的引用。

这通常在尝试引用 iframe 内的父框架中的内容时使用。

更多信息：[https ://developer.mozilla.org/en/DOM/window.top](https://developer.mozilla.org/en/DOM/window.top)

# ruby - ruby 中的插入排序算法有问题

> ID：11027456
> 
> 赞同：3
> 
> 时间：2012-06-14T05:56:32.427
> 
> 标签：ruby, sorting

所以我正在尝试学习如何在不使用 .sort 方法的情况下对数组进行排序，这是我目前所拥有的，但中间的数字正在下降。

```
def  my_sort(num)
for j in 1...num.length
    key = num[j]
    i = j - 1
    while i > 0 and num[i] = key
            num[i+1] = num[i]
            i = i - 1
    end
    num[i+1] = key
end     

end 
```

然后我运行该方法

```
my_sort([3,1,2]) 
```

我明白了

```
=> 1...3 
```

但我想要

```
=> 1,2,3 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:58:58.750

You're not returning the modified array, but instead the object fed into your `for` iterator.

What you're missing is simply leaving the array as the last thing in the method:

```
def my_sort(num)
  # ...

  num
end 
```

As a note it's usually bad form to wreck the arguments you're given. A more polite function would return a copy.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T07:41:00.013

插入排序的实际实现必须如下所示：

```
def my_sort(arr)
  for j in 1...arr.length
    key = arr[j]
    i = j-1
    while i>=0 and arr[i] > key # You used arr[i] = key here instead
      arr[i+1] = arr[i]
      i = i-1
    end 
    arr[i+1] = key
  end 
  arr #return the array
end 
```

# matlab - matlab中具有nan值的z得分（矢量化）

> ID：11027457
> 
> 赞同：2
> 
> 时间：2012-06-14T05:56:34.300
> 
> 标签：matlab, matrix, loops, vectorization, nan

我正在尝试计算具有许多 nan 值的 5000 行向量的 zscore。我必须计算很多次，所以我不想使用循环，我希望找到一个矢量化的解决方案。

循环解决方案：

```
for i = 1:end
   vec(i,1) = (val(i,1) - nanmean(:,1))/nanstd(:,1)
end 
```

部分矢量化解决方案：

```
zscore(vec(find(isnan(vec(1:end) == 0)))) 
```

但这会返回一个向量，其长度为原始向量减去 nan 值。因此它与原始大小不同。

我想计算向量的 zscore，然后在单词之后插入缺失的数据。我必须这样做 100 次，因此我正在寻找一种快速矢量化方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:18:48.293

这是一个矢量化解决方案：

% 用 s 生成一些示例数据`NaN`。

```
val = reshape(magic(4), 16, 1);
val(10) = NaN;
val(17) = NaN; 
```

这是代码：

```
valWithoutNaNs = val(~isnan(val));
valMean = mean(valWithoutNaNs);
valSD = std(valWithoutNaNs);
valZscore = (val-valMean)/valSD; 
```

然后列向量`valZscore`包含偏差（Z 分数），并且具有原始测量数据中的值`NaN`。`NaN``val`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:15:44.883

抱歉，这个答案晚了 6 个月，但对于遇到此线程的其他人：

接受的答案并没有完全矢量化，因为它没有做真实`zscore`做的那么漂亮：也就是说，沿着矩阵的特定维度做 zscores。

如果你想一次计算大量向量的 zscores，就像 OP 所说的那样，最好的解决方案是：

```
Z = bsxfun(@divide, bsxfun(@minus, X, nanmean(X)) , 
                   nanstd(X) ); 
```

要在任意维度上执行此操作，只需将维度放在`nanmean`and`nanstd`中，其余的由 bsxfun 处理。

```
nanzscore = @(X,DIM) bsxfun(@divide, bsxfun(@minus, X, nanmean(X,DIM)), ...
                                     nanstd(X,DIM)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T21:44:58.620

匿名函数：

nanZ = @(xIn)(xIn-nanmean(xIn))/nanstd(xIn);

nanZ(vectorWithNans)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-11T17:11:03.317

以下匿名函数的矢量化版本（假设观察在行中，变量在列中）：

```
nanZ = @(xIn)(xIn-repmat(nanmean(xIn),size(xIn,1),1))./repmat(nanstd(xIn),size(xIn,1),1);
nanZ(matrixWithNans) 
```

# mysql - Java & MySQL 性能问题

> ID：11027458
> 
> 赞同：0
> 
> 时间：2012-06-14T05:56:47.487
> 
> 标签：mysql, sql

所以我有一点性能问题。我制作了一个构建数据库的java程序。问题是在加载数据时。我正在将 5,000 个文件加载到 sql 数据库中。当程序启动时，它可以在 10 分钟内处理大约 10% 的文件，但是随着进程的进行它会变得慢得多。目前以 28% 的速度按目前的速度在 16 小时内完成。然而，这一速度正在显着放缓。

我的问题是为什么程序在运行时会逐渐变慢以及如何解决这个问题。

编辑：我有两个版本。一个是带螺纹的（上限为 5 个线程），一个不是。两者之间的差异可以忽略不计。如果有人喜欢，我可以再次发布代码，但我把它拿出来是因为我现在相当确定瓶颈是 MySQL（也适当地重新标记）。我继续使用批量插入。这确实导致了最初的速度提高，但在处理了大约 30% 的数据后，它再次迅速下降。

所以SQL点

1.  我的所有 64 个表的引擎是 InnoDB 版本 10。
2.  该表此时大约有 300k 行（约 30% 的数据）
3.  所有表都有一个“联合”主键。一个 ID 和一个日期。
4.  查看 MySQL WorkBench 我看到每个线程都有一个查询（5 个查询）
5.  我不确定时间单位（只是从 MySQL 管理员那里读取），但是检查文件是否已插入的查询需要 300。（这个查询应该很快，因为它是从 MyTable 限制 1 到 1 的 SELECT MyIndex，其中 Date = 日期。）因为我一直在启动和停止我在此检查中构建的程序以查看文件是否已插入。这样我就可以在每次更改后启动它，看看是否有任何改进，而无需再次启动该过程。
6.  我相当肯定性能的下降与表格的大小有关。（我现在可以停止和启动程序，但该过程仍然很慢。只有当表格很小时，该过程才能以可接受的速度进行。）
7.  请，请询问，我会发布您需要的任何信息。

完毕！好吧，我只是让它运行了它需要的 4 天。谢谢大家的帮助。

干杯，

——奥兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:32:27.040

您可以使用从文件直接插入到数据库（[在此处](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)阅读）。它工作得更快。当我为 postgres 做同样的事情时，我的性能提高了 20 倍。

还可以下载您的套件分析器并分析您的应用程序的性能。然后你会看到什么需要你的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:05:43.320

**Q1：为什么程序越来越慢？**

在您的问题空间中，您有 2 个系统交互：一个从文件系统读取并*生成*数据的**生产者**，以及一个将该数据转换为记录并将它们存储在数据库中的**消费者。**您的代码目前正在硬链接这两个进程，并且您的系统以两者中最慢的速度运行。

 ***在您的程序中，您有一个固定的到达率（1/秒 - 当您运行超过 10 个线程时的等待）。如果您在要填充的表中有索引，则随着表变大，插入将花费更长的时间。这意味着，虽然您的到达率固定为 1/秒，但您的退出率却在不断增加。因此，您将创建越来越多的线程来共享相同的 CPU/IO 资源，并且每单位时间完成的事情越来越少。创建线程也是一项非常昂贵的操作。

**Q2：这可能与我如何从字符串构造查询有关吗？**

只是部分。您的字符串操作是系统中的固定成本。它增加了服务一个请求的成本。但是字符串操作是 CPU 受限的，而你的问题是 I/O 受限的，这意味着改进字符串处理（你应该）只会略微提高系统的性能。（[见阿姆达尔定律](http://en.wikipedia.org/wiki/Amdahl%27s_law)）。

**Q3：如何解决（性能问题）**

*   **将文件阅读器进程与 db insert 进程分开**。请参阅[消费者-生产者](http://en.wikipedia.org/wiki/Producer-consumer_problem)模式。有关JDK 中内置的实现，另请参见[Completion Service ：](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CompletionService.html)

(FileReaderProducer) --> 队列 --> (DBBulkInsertConsumer)

*   不要创建新线程。使用 java.util.concurrent 包提供的工具，比如上面提到的执行器服务或完成服务。对于“裸”线程池，请使用[Executors](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool%28int,%20java.util.concurrent.ThreadFactory%29)工厂。

*   对于这个特定的问题，拥有 2 个单独的线程池（一个用于消费者，一个用于生产者）将允许您调整系统以获得最佳性能。文件读取随着并行化而提高（直到您的 I/O 限制），但数据库插入不是（I/O + 索引 + 关系一致性检查），因此您可能需要将文件读取线程的数量（3-5）限制为匹配插入率 (2-3)。您可以监控队列大小以评估系统性能。

*   使用 JDBC 批量插入：http: [//viralpatel.net/blogs/batch-insert-in-java-jdbc/](http://viralpatel.net/blogs/batch-insert-in-java-jdbc/)
*   使用 StringBuilder 而不是字符串连接。Java 中的字符串是不可变的。这意味着每次你这样做`myString += ","`：您正在创建一个新字符串并使旧字符串可以用于垃圾收集。反过来，这会增加垃圾收集性能损失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T06:29:12.280

您的代码中有很多东西可能会导致速度问题，并且您怀疑字符串起作用是正确的。

以这段代码为例：

字符串行String = ""; // - 末尾没有逗号的额外 1 for (int i = 0; i <= numberOfRows - 3; i++) { rowsString += "(DATA), \n"; } 行字符串+=“（数据）”；

根据有多少行，这是一个潜在的瓶颈和记忆猪。我认为最好在这里使用 StringBuilder 。我看到很多更适合 StringBuilders 的字符串操作。我是否可以建议您阅读一下字符串处理并优化这些内容，尤其是在您使用 += 字符串的地方？

那么下一个问题就是你的桌子是怎么设计的？可能会有一些事情使您的插入变慢，例如 varchars 的默认长度不正确、没有索引或索引过多等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T07:17:30.367

大多数数据库更有效地加载数据，如果，

*   您批量加载数据，
*   您加载的线程数量相对较少，例如一两个。

随着您添加更多线程，您会增加更多开销，因此您希望它会变慢。

尝试使用具有固定大小池（例如 2-4）的 ExecutorService，并尝试在事务中一次加载 100 个数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T13:34:57.297

您有几个很好的尝试和测试的选项来加速数据库访问。

1.  为您的线程使用一个`ExecutorService`。这可能对速度没有帮助，但它会帮助您实现以下内容。
2.  保留 a`ThreadLocal` `Connection`而不是为每个文件建立新连接。另外，显然，不要关闭它。
3.  创建一个`PreparedStatement`而不是每次都制作一个新的。
4.  批处理您的语句执行。***

# jquery - 用按钮打开一个新窗口？

> ID：11027459
> 
> 赞同：1
> 
> 时间：2012-06-14T05:56:48.077
> 
> 标签：jquery, asp.net-mvc, new-window

我需要为我的打印打开一个新窗口，谁能告诉我该怎么做？

**我的按钮点击代码：**

我的 window.location 工作，但不能使用 window.open

```
$('.btnFromIndexPrint').click(function () {
    if (document.URL.indexOf('index') > -1) {
         // window.location = '../Print/' + $(this).attr('id');
         window.open = '../Print/' + $(this).attr('id');
    } else {
        //window.location = 'Contract/Print/' + $(this).attr('id'); //Redirect  from Index page to print action
        window.open = 'Contract/Print/' + $(this).attr('id');
    }

}); 
```

**我的html：**

我知道有一个叫做 target ="blank" id 的东西，但我认为它不会起作用。

```
<input type="button" value="Print" class="btnFromIndexPrint" id="@item.SalesContractId"/> 
```

* * *

**我将如何在新页面上打开重定向？**

***重要的！！！！！！！***

```
return RedirectToAction("Print", new { id = contractInstance.SalesContractId }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T05:59:49.807

应该：

```
window.open(url_or_your_page); 
```

请参阅：[示例](http://www.javascript-coder.com/window-popup/javascript-window-open.phtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:09:35.983

`window.location`is 的语法

```
window.location = "url"; 
```

例如：

```
window.location ="http://www.mozilla.org"; 
```

因此它在您的代码中运行良好。

但是 for 的语法`window.open()`是

```
window.open(URL, windowName[, windowFeatures]) 
```

例如 ：

```
window.open ("http://www.javascript-coder.com","mywindow","status=1"); 
```

你的语法有问题。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T06:02:45.607

你应该试试 ：

```
window.open(url, [window name], "height=x,width=y"); 
```

当指定宽度/高度时，它会在新窗口中打开它。参见[window.open](http://www.w3schools.com/jsref/met_win_open.asp)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T07:02:26.923

首先，我希望您已将上述代码包含在 jQuery 的 document.ready 函数中或将代码放在页面底部。这是因为如果指定的打印按钮尚未加载到 DOM 中，选择器 ($) 将找不到它，因此您的点击侦听器将不会附加到它。

其次， window.open 是一个函数，不应像变量一样分配（您在上面已经完成了）。换句话说，它是

```
window.open( parameters ); //NOT window.open = value; 
```

请参阅下面的示例代码，它或多或少是您上面的更正和优化。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Window.Open</title>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
  <script type="text/javascript">
    //@Author: Prof. No Time
    $(document).ready(function(){
      $('.btnFromIndexPrint').click(function () {
         var urlToOpen = '';
         var docURL = document.URL;

         if (docURL.indexOf('index') > -1) {
            urlToOpen = '../Print/' + $(this).attr('id');
         }
         else {
            urlToOpen = 'Contract/Print/' + $(this).attr('id');
         }

         //alert('urlToOpen > ' + urlToOpen);
         if (urlToOpen != '') window.open(urlToOpen);
      });
   });
  </script>
 </head>

 <body>
    <input type="button" value="Print" class="btnFromIndexPrint" id="@item.SalesContractId"/>
 </body>
</html> 
```

最后，我建议不要使用如上所示的此类 ID (@item.SalesContractId)。我想相信那个值应该被服务器端处理代替？

希望这可以帮助。

# jquery - 一个ajax调用完成后如何进行其他ajax调用并且第二个ajax调用不应调用.stop函数

> ID：11027462
> 
> 赞同：4
> 
> 时间：2012-06-14T05:57:00.997
> 
> 标签：jquery, ajax

实际上我正在调用多个 ajax 调用，但我希望一些 ajax 调用首先完成并执行在其停止函数中定义的 atsk。但是一旦在 stop 方法中定义的函数执行并且那些 ajax 调用不应该 cal.stop 方法，就应该进行一些 ajax 调用再次

```
 $('.badgeContainer').ajaxStop(function() 
    {

          alert("ajax rqst completed");
    });

 $.ajax({

 type: "POST",

           url: "WebServices/abc.asmx/dosomething",
        data: "{  }",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function(serviceReply) {
                          var serviceReplyArray = serviceReply.d.split("#");

                    },
                    error: function(xhr, errDesc, exception) {
                                                                    }
                }); 
```

这里有另一个 ajax 调用，但这次不应该调用 .ajaxstop

我是这样提出我的问题的：

假设有两个对 web 服务的 ajax 调用。当一个 ajax 调用完成依赖于 taht 的函数时，应该在等待第二个 jax 调用执行之前执行 ajax 调用。例如：一个 ajax 调用创建图表和其他 ajax 调用日志用户活动。如果显示 chaet 的函数依赖于创建图表以便在为日志活动调用 aax 调用之前执行该函数。无需等待用户活动的 ajajx 调用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T06:06:26.383

我想你想设置：

```
 async: false 
```

默认情况下，所有请求都是异步发送的。如果您需要同步请求，请将此选项设置为 false。请注意，同步请求可能会暂时锁定浏览器，从而在请求处于活动状态时禁用任何操作。
另见这个老问题。
[如何让 jQuery 执行同步而不是异步的 Ajax 请求？](https://stackoverflow.com/questions/133310/how-can-i-get-jquery-to-perform-a-synchronous-rather-than-asynchronous-ajax-re)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T14:39:11.697

> 从 jQuery 1.8 开始，不推荐在 jqXHR ($.Deferred) 中使用 async: false ；您必须使用完成/成功/错误回调。
> 
> [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)（异步部分）

我发现这有点烦人......如果平台允许，开发人员应该可以*选择*进行阻塞调用`async: false`- 为什么要限制它？我只是设置了一个超时以最大程度地减少挂起的影响。

尽管如此，我现在在 1.8 中使用队列，它是非阻塞的，并且工作得很好。Sebastien Roch 创建了一个易于使用的实用程序，允许您对函数进行排队并运行/暂停它们。[https://github.com/sebastien-roch/Jquery-Async-queue](https://github.com/sebastien-roch/Jquery-Async-queue)

```
 queue = new $.AsyncQueue();
    queue.add(function (queue) { ajaxCall1(queue); });
    queue.add(function (queue) { ajaxCall2(queue); });
    queue.add(function() { ajaxCall3() });
    queue.run(); 
```

在前 2 个函数中，我将`queue`对象传递给调用，调用如下所示：

```
function ajaxCall1(queue) {
    queue.pause();
    $.ajax({
       // your parameters ....
       complete: function() {
         // your completing steps
         queue.run();
       }
    });
}

// similar for ajaxCall2 
```

注意`queue.pause();`每个函数开头的 ，并在语句`queue.run()`末尾继续队列执行。`complete`

# c# - 阻止在 Windows Phone 7 浏览器控件中存储缓存

> ID：11027463
> 
> 赞同：1
> 
> 时间：2012-06-14T05:57:23.507
> 
> 标签：c#, windows-phone-7, memory, webbrowser-control

任何人都知道如何防止在 Windows Phone 7 webbrowser 控件中存储缓存？我们正在使用显示一页的浏览器控件，但是每当我们打开此页面并返回主页面时，都会增加内存，因此我们需要删除缓存。

我们在页面中使用了元标记来防止缓存，但仍然存储缓存，这就是手机内存增加的原因。

提前致谢。

# jquery - 在 iPhone 上的移动 Safari 中动画效果不佳

> ID：11027465
> 
> 赞同：1
> 
> 时间：2012-06-14T05:57:24.630
> 
> 标签：jquery, html, css, mobile-safari, jquery-animate

嘿，我正在使用垂直选项卡列表创建选项卡式内容。我通过改变背景位置来做到这一点。它在 IE/CHROME 中运行良好，但在移动设备上浏览 safari 时，动画第一次运行良好，其他时候背景位置下降太多。

我添加了很多代码，但我认为问题不在于 HTML，因为它适用于其他浏览器，我刚刚发布了代码以供参考。

这是我的动画代码：

```
<!-- This part is responsible for tabbed content -->

    var $tabbed_area = jQuery('#side-tabs-tab ul'),
        $tab_content = jQuery('.tab-content-tab');

                    if ($tabbed_area.length) {

            var animating = false,
                divAnimated = false;
            jQuery('body.home #main-area-tab').css('backgroundImage','none');
            $tab_content.hide().filter(':first').show();
            $tabbed_area.css( {backgroundPosition: "0px 0px"} );
            var isFirstUse = true;
            $tabbed_area.find('li a').click(function(){
                this_element = jQuery(this);

                tab_order = this_element.parent('li').prevAll().length;
                previouslyActiveTab = jQuery('.tab-content-tab').filter(':visible').prevAll('.tab-content-tab').length;

                if ( (tab_order != previouslyActiveTab) && !animating ) {
                    $tabbed_area.find('li a.activeTab').removeClass('activeTab');
                    var marginDelimeter = 177;

                    if( parseInt(jQuery.browser.version, 10) == 7){
                        marginDelimeter = 177;
                    }

                    activeTop = this_element.position().top - marginDelimeter;
                        if( navigator.userAgent.match(/iPhone/i)){
                        //marginDelimeter = 213;

                        }
                    animating = true;
                    var $visibleDiv = $tab_content.filter(':visible'),
                        $divToAnimate = $tab_content.filter(':eq('+tab_order+')');

                    $visibleDiv.fadeOut(500,function(){
                       $visibleDiv.css({opacity:0});
                       $divToAnimate.css({opacity:1}).fadeIn(500,function(){if (jQuery.browser.msie) this.style.removeAttribute('filter');});
                       divAnimated = true;
                    });

                    $tabbed_area.stop().animate({backgroundPosition:"(0px "+activeTop+"px)"}, 500,function(){
                        this_element.addClass('activeTab');
                        if (divAnimated) { 
                            animating = false;
                            divAnimated = false;
                        } else {
                            var wait = setInterval(function() {
                                if (divAnimated) { 
                                    animating = false;
                                    divAnimated = false;
                                    clearInterval(wait);
                                };
                            }, 100);
                        };
                    });
                };

                return false;
            });
        };
<!-- End of tabbed content --> 
```

这是 HTML：

```
 <div id="side-tabs-tab">
    <ul style='padding:0px; padding-bottom: 20px;'>
        <?php for ($i = 1; $i <= $featured_num; $i++) { ?>
            <?php if ($arr[$i]["tabtitle"] == '') $arr[$i]["tabtitle"] = 'Tab Custom field'; ?>
            <li class="clearfix"><a href="#" <?php if ($i == 1) echo(' class="activeTab"'); ?>><?php if($arr[$i]["thumb"] <> '') echo('<img src="'.esc_url( $arr[$i]["thumb"] ).'" alt="" width="36" height="37" />'); ?><span><?php echo( esc_html( $arr[$i]["tabtitle"] ) ); ?></span></a></li>
        <?php }; ?>
    </ul>   
</div> <!-- end #side-tabs -->

<div id="main-area-tab">
    <?php for ($i = 1; $i <= $featured_num; $i++) { ?>
        <div class="tab-content-tab<?php if ($i == 1) echo(' active'); ?>">
            <h2 class="title-tab"><?php echo(esc_html($arr[$i]["title"])); ?></h2>
            <?php echo($arr[$i]["content"]); ?>
            <!--<a href="<?php echo esc_url($arr[$i]["permalink"]); ?>" class="readmore-tab"><span><?php esc_html_e('Read More','MyAppTheme'); ?></span></a> -->
        </div> <!-- end .tab-content -->
    <?php }; ?>
</div> <!-- end #main-area --> 
```

涉及的所有 PHP 有点混乱，但假设这一切都很好。

最后是 CSS ：

```
 #side-tabs-tab {background:url(images/tabs-shadow-tab.png) no-repeat scroll 116px 0 transparent; float: left; width: 205px; height: 353px; margin-top: -3px; }
    #side-tabs-tab ul {list-style: none; margin-top: 43px; margin-left: 12px; font-size: 16px; background:url(images/arrow-tab.png) no-repeat; padding-bottom: 20px; }
                #side-tabs-tab ul li { margin-bottom: 10px; height: 40px; }
                    #side-tabs-tab ul li a {text-decoration: none; color: #202d37; text-shadow: 1px 1px 0px #e7eff2; display: block}
                        #side-tabs-tab ul li a img {padding-top: 3px; padding-left: 4px; float: left;}
                        #side-tabs-tab ul li a span {padding-left: 14px; float: left; display: block; padding-top: 12px;}
                    #side-tabs-tab ul li a.activeTab  {width: 191px; color: #ffffff; text-shadow: 1px 1px 0px #3a515a; }

        #main-area-tab {float: left; margin-top: 50px; margin-left: 29px; width:483px;} 
            #main-area-tab p { line-height: 18px; }
            #main-area-tab .tab-content-tab {width: 424px;padding-right:45px;}
                #main-area-tab .tab-content-tab h2.title-tab {font-weight: bold; font-size: 20px; margin-bottom: 20px; }
                #main-area-tab .tab-content-tab p.post {line-height: 18px; padding-bottom: 23px; padding-top: 20px;}

                blockquote {background: url(images/blockquote-tab.png) no-repeat; border: none; margin: 0px; padding-left: 55px;line-height: 18px; color: #202d37; text-shadow: 1px 1px 0px #e7ecee; padding-top: 12px; padding-bottom: 22px; background-position: 0px 15px; }

                #main-area-tab a.readmore-tab { background: url(images/readmore-left-tab.png) no-repeat top right; display: block; height: 33px; padding-right: 18px; line-height: 35px; float: right; font-weight: bold; text-shadow: 1px 1px 0px #2d3a40; font-size: 11px; margin-bottom: 26px; margin-right: -36px; float: right; color: #c0cfd5;}
                    #main-area-tab a.readmore-tab span { display: block; background: url(images/readmore-right-tab.png) no-repeat; padding:0 6px 0 13px; height:33px; } 
```

有人可以告诉我我在做什么错吗？

如果你不明白我的意思，你可以在[这里](http://www.eric.co.il)查看它，进入并点击开发服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:37:16.873

您已经硬编码了动画元素的位置。使用单击按钮的位置来计算结束位置。

示例：http: [//jsbin.com/oteleh/3/edit#javascript,html](http://jsbin.com/oteleh/3/edit#javascript,html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:35:22.447

您要使用的是 CSS3 变换和过渡，而不是 jQuery 动画。通过这种方式，您可以在 iOS 和 Android 等移动设备上获得硬件加速性能。要移动元素，请使用 transform3d（即使是 2d 变换），您将获得最佳性能。

[http://www.quora.com/Are-CSS3-transitions-in-WebKit-browsers-hardware-accelerated](http://www.quora.com/Are-CSS3-transitions-in-WebKit-browsers-hardware-accelerated)

# asp.net-mvc-3 - Response.Redirect("http://url") 和 Response.Write("REDIRECT=http://url") 有什么区别？

> ID：11027467
> 
> 赞同：-2
> 
> 时间：2012-06-14T05:57:31.760
> 
> 标签：asp.net-mvc-3, c#-4.0, httpwebresponse

我正在使用 C# 开发 ASP.NET MVC3。

`Response.Redirect("http://www.google.com");`和有什么区别`Response.Write("REDIRECT=http://www.google.com");`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T06:05:43.690

不同之处在于第一个将用重定向页面替换响应并结束执行，而第二个只会将文本写入响应流并继续创建页面的其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:09:04.380

`Response.Redirect()`设置 HTTP 302 标头以及要重定向到的 URL。

`Response.Write("REDIRECT=http://www.google.com");`将该字符串写入响应正文，因为重定向文本将附加到您网页的 HTML 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T06:17:52.740

这将为您创建正确的完整 HTTP 标头：

```
Response.Redirect("http://www.google.com"); 
```

您可以设置或更改 HTTP 标头的一些参数。

```
HttpResponse Class 
```

例如，设置 HTTP 状态代码 404 或 500 或在您的情况下为 302 进行重定向。

例如为 jpg 设置 HTTP Mime-type

将在您的回复中写入正文……就像字符串输出一样

```
Response.Write("REDIRECT=http://www.google.com"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T12:17:01.237

有问题的方法是不言自明的:)

```
Response.Redirect("http://www.google.com"); 
```

它将把`Redirect`你重定向到另一个页面，如果它会把你带到[谷歌的](http://www.google.com)主页。

```
Response.Write("REDIRECT=http://www.google.com"); 
```

该`Write`方法会将一串文本写入网页。在这种情况下，它会将文本写入`"REDIRECT=http://www.google.com"`您的网页。

在您的 Web 项目中使用这两种方法，看看会发生什么。

# ruby-on-rails - 尝试使用 Koala gem 扩展 Facebook oauth 令牌

> ID：11027472
> 
> 赞同：5
> 
> 时间：2012-06-14T05:58:01.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, facebook-graph-api, koala

在参照：

[http://rubydoc.info/github/arsduo/koala/master/Koala/Facebook/GraphAPIMethods#graph_call-instance_method](http://rubydoc.info/github/arsduo/koala/master/Koala/Facebook/GraphAPIMethods#graph_call-instance_method)

[http://developers.facebook.com/roadmap/offline-access-removal/#extend_token](http://developers.facebook.com/roadmap/offline-access-removal/#extend_token)

* * *

我的代码看起来像这样：

```
fb = Koala::Facebook::API.new(access_token)
fb.graph_call("/oauth/access_token", {"client_id" => app_id, "client_secret" => app_secret, "grant_type" => "fb_exchange_token", "fb_exchange_token" => access_token }) 
```

虽然返回值包含扩展令牌但它抛出 MultiJson::DecodeError

```
MultiJson::DecodeError: 387: unexpected token at 'access_token=long-lived_token&expires=5184000]'
from /usr/local/rvm/gems/ruby-1.9.2-p136@dotcloud/gems/json-1.6.1/lib/json/common.rb:148:in `parse'
from /usr/local/rvm/gems/ruby-1.9.2-p136@dotcloud/gems/json-1.6.1/lib/json/common.rb:148:in `parse'
from /usr/local/rvm/gems/ruby-1.9.2-p136@dotcloud/gems/multi_json-1.0.3/lib/multi_json/engines/json_gem.rb:13:in `decode'
from /usr/local/rvm/gems/ruby-1.9.2-p136@dotcloud/gems/multi_json-1.0.3/lib/multi_json.rb:65:in `decode'
from /usr/local/rvm/gems/ruby-1.9.2-p136@dotcloud/gems/koala-1.3.0/lib/koala/api.rb:61:in `api'
from /usr/local/rvm/gems/ruby-1.9.2-p136@dotcloud/gems/koala-1.3.0/lib/koala/api/graph_api.rb:421:in `graph_call'
from (irb):7
from /usr/local/rvm/gems/ruby-1.9.2-p136@dotcloud/gems/railties-3.1.3/lib/rails/commands/console.rb:45:in `start'
from /usr/local/rvm/gems/ruby-1.9.2-p136@dotcloud/gems/railties-3.1.3/lib/rails/commands/console.rb:8:in `start'
from /usr/local/rvm/gems/ruby-1.9.2-p136@dotcloud/gems/railties-3.1.3/lib/rails/commands.rb:40:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

`]`我怀疑导致错误的结局。不确定这是 Facebook 错误还是我处理不当。感谢有人可以帮助我。谢谢！

* * *

我也尝试使用 Net::HTTP.get(uri) 代替。但得到以下错误。

```
Errno::ECONNRESET: Connection reset by peer
from /usr/local/rvm/rubies/ruby-1.9.2-p136/lib/ruby/1.9.1/net/protocol.rb:135:in `read_nonblock'
from /usr/local/rvm/rubies/ruby-1.9.2-p136/lib/ruby/1.9.1/net/protocol.rb:135:in `rbuf_fill'
from /usr/local/rvm/rubies/ruby-1.9.2-p136/lib/ruby/1.9.1/net/protocol.rb:116:in `readuntil'
from /usr/local/rvm/rubies/ruby-1.9.2-p136/lib/ruby/1.9.1/net/protocol.rb:126:in `readline'
from /usr/local/rvm/rubies/ruby-1.9.2-p136/lib/ruby/1.9.1/net/http.rb:2211:in `read_status_line'
from /usr/local/rvm/rubies/ruby-1.9.2-p136/lib/ruby/1.9.1/net/http.rb:2200:in `read_new'
from /usr/local/rvm/rubies/ruby-1.9.2-p136/lib/ruby/1.9.1/net/http.rb:1183:in `transport_request'
from /usr/local/rvm/rubies/ruby-1.9.2-p136/lib/ruby/1.9.1/net/http.rb:1169:in `request'
from /usr/local/rvm/rubies/ruby-1.9.2-p136/lib/ruby/1.9.1/net/http.rb:1073:in `request_get'
from /usr/local/rvm/rubies/ruby-1.9.2-p136/lib/ruby/1.9.1/net/http.rb:394:in `block in get_response'
from /usr/local/rvm/rubies/ruby-1.9.2-p136/lib/ruby/1.9.1/net/http.rb:627:in `start'
from /usr/local/rvm/rubies/ruby-1.9.2-p136/lib/ruby/1.9.1/net/http.rb:393:in `get_response'
from /usr/local/rvm/rubies/ruby-1.9.2-p136/lib/ruby/1.9.1/net/http.rb:370:in `get'
from (irb):11
from /usr/local/rvm/gems/ruby-1.9.2-p136@dotcloud/gems/railties-3.1.3/lib/rails/commands/console.rb:45:in `start'
from /usr/local/rvm/gems/ruby-1.9.2-p136@dotcloud/gems/railties-3.1.3/lib/rails/commands/console.rb:8:in `start'
from /usr/local/rvm/gems/ruby-1.9.2-p136@dotcloud/gems/railties-3.1.3/lib/rails/commands.rb:40:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

不知道是防火墙还是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T01:25:24.153

使用 OAuth`exchange_access_token_info`方法：

```
oauth = Koala::Facebook::OAuth.new("consumer_token", "consumer_secret")
oauth.exchange_access_token_info("auth_token") 
```

PS我也得到了你按照自己的方式做的错误。问题是 Koala 期望响应的主体是 JSON 格式，但在这种特殊情况下，它实际上是 URL（查询字符串）格式的名称/值对，例如：

```
access_token=[...]&expires=[...] 
```

# javascript - 如何为@Html.Editor() 编写 onfocus 和 onblur 事件？

> ID：11027474
> 
> 赞同：2
> 
> 时间：2012-06-14T05:58:18.597
> 
> 标签：javascript, html, asp.net-mvc

我想创建一个搜索字段。到目前为止我的代码：

```
<input type="text" value="Search" onfocus="if (this.value=='Search') 
{this.value='';}"  onblur="if (this.value=='') {this.value='Search';}" 
class="textbox"/> 
```

我想将`<input>`标签更改为`@Html.Editor("term").`

如何使用编写 onfocus 和 onblur 事件`@Html.Editor("term")?`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T06:08:13.970

为什么不使用 HTML5`placeholder`属性它做同样的事情

代替 -

```
<input type="text" value="Search" onfocus="if (this.value=='Search') 
{this.value='';}"  onblur="if (this.value=='') {this.value='Search';}" 
class="textbox"/> 
```

和

```
<input type="text" class="textbox" placeholder="Search" /> 
```

演示：http: [//jsfiddle.net/uCkef/1/](http://jsfiddle.net/uCkef/1/)

以下是如何使`'placeholder'`属性在 IE 浏览器中工作 - [http://dipaksblogonline.blogspot.in/2012/02/html5-placeholder-in-ie7-and-ie8-fixed.html](http://dipaksblogonline.blogspot.in/2012/02/html5-placeholder-in-ie7-and-ie8-fixed.html)

对于焦点和模糊事件 -

```
$('input').focus(function(){
   console.log('focused');
}).blur(function(){
   console.log('blured');
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T06:14:14.640

尝试将 javascript 添加为新的 html 属性

```
@HTML.TextboxFor(m => m.term, new { onfocus="if (this.value=='Search') {this.value='';}" }) 
```

# ant - 如何在ant中验证xml文件？

> ID：11027478
> 
> 赞同：1
> 
> 时间：2012-06-14T05:58:43.320
> 
> 标签：ant

这是我的 xml 文件 `<contacts>` `<contact>` `<firstname>Edwin</firstname>` `<lastname>Dankert</lastname>` `</contact>` `</contacts>`

我想在 ant 中验证它，我的目标是

```
<target name="WellFormed">
<xmlvalidate file="contacts.xml"/>
<echo>WELL FORMED</echo>
</target> 
```

C:\work\build\XML_VALIDATION>ant Buildfile: C:\work\build\XML_VALIDATION\build.xml

<===========================蚂蚁输出===================== =========>

```
WellFormed:
[xmlvalidate] contacts.xml:1:11: Document root element "contacts", must match DOCTYPE root "null".

[xmlvalidate] contacts.xml:1:11: Document is invalid: no grammar found.

BUILD FAILED
C:\work\build\XML_VALIDATION\build.xml:4: C:\work\build\XML_VALIDATION\contacts.xml is not a valid XML document. 
```

我没有根据任何 xsd 检查它，任何人都可以帮助我找到我需要插入到 xml 中的更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T07:17:56.857

如果您只是想确保您的 XML 格式正确，请将该`lenient`属性添加到您的[xmlvalidate](http://ant.apache.org/manual/Tasks/xmlvalidate.html)任务中，如下所示。

```
<xmlvalidate file="contacts.xml" lenient="yes"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:07:37.530

您的构建文件无效，您需要从

```
<?xml version="1.0"?>
<project name="name">
<target name="target-name">
...
</target>
</project> 
```

谷歌搜索示例 Ant 构建文件将提供您了解构建文件所需的一切。这个[链接](http://ant.apache.org/manual/tutorial-HelloWorldWithAnt.html)也会有所帮助。

# iphone - Childbrowser with Cordova 1.7 iPhone issue

> ID：11027479
> 
> 赞同：0
> 
> 时间：2012-06-14T05:58:47.453
> 
> 标签：iphone, cordova, childbrowser

Can any expert here please point me to some valid walkthrough on how to make the ChildBrowser work with Cordova 1.7 in iPhone? I have found lots of documents and blogs out there that tell you how to do it, but none of them have worked for me. It is not a whitelist issue for sure, as for the time being I have set it to the wildcard *, so whitelisting problems can be safely ruled out I guess. In some cases, ChildBrowser was successfully installed, but when I called the `showwebpage` function, it just would not show up (there wouldn't be any errors either!). Other times, it just won't even install. I have already spent 2 days on it, and am still clueless. Just hoping if you could help me out. Any help would be appreciated.

* * *

I could finally get the ChildBrowser to open up following what Dhawal has suggested below. But the `onLocationChange` event never seems to fire. Again, this seems to be a common problem with Cordova 1.7\. Any workarounds apart from rolling back to some older Cordova version? Any help would be appreciated.

Here's what I am trying to do:

```
window.plugins.childBrowser.showWebPage(url, { showLocationBar: true });
window.plugins.childBrowser.onLocationChange = function(loc){ alert("In index.html new loc = " + loc); }; 
```

* * *

Ok, got it to work. Seems like ChildBrowser is still compatible with older versions of Cordova only. Had to delve into Objective-C and make changes in the plugin to make it work.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T15:18:27.220

我有一个与 Cordova 1.7 集成子浏览器的基本应用程序。我已经将步骤也用于生成构建相同的应用程序。

[ios-cordova-childbrowser](https://github.com/dhavaln/cordova-examples/tree/master/ios-cordova-childbrowser)

## 编辑

Childbrowser 事件没有被正确调用，所以我在 ChildBrowser.js 文件中添加了这个修复来解决它。

```
if (cordovaRef && cordovaRef.addConstructor) {
    cordovaRef.addConstructor(ChildBrowser.install);

    // Make ChildBrowser global
    window.ChildBrowser = ChildBrowser;
 } else {
    console.log("ChildBrowser Cordova Plugin could not be installed.");
    return null;
 } 
```

# c++ - ActiveX control need to be signed

> ID：11027484
> 
> 赞同：1
> 
> 时间：2012-06-14T05:59:14.443
> 
> 标签：c++, internet-explorer, dll, activex

i have developed an activeX dll using visual studio 2005.when i run in ie browser it displays "activeX is unsafe to run" warning. to overcome this i have to sign the activeX dll. can you tell what is the procedure to sign a activeX dll?

i have tried signing using Self signed certificate using openssl and signtool.exe tool, and made the dll signed during the compilation and packaged with the signed dll. After Signing also i'm getting the same warning. Please can anyone give a correct method to sign an dll and use it properly ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:08:30.907

您必须从 Thawte、Verisign 或 GeoTrust 等证书提供商之一购买代码签名证书。他们将为您提供证书和私钥以进行签名。

否则，您可以使用 VS 提供的工具对您的 activex 控件进行自签名。首先，您需要使用 makecert 创建证书

见[http://msdn.microsoft.com/en-us/library/bfsktky3(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/bfsktky3%28v=vs.80%29.aspx)

创建证书后，您需要使用 signtool 对 activex 控件进行签名

见[http://msdn.microsoft.com/en-us/library/8s9b9yaz(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/8s9b9yaz%28v=vs.80%29.aspx)

阅读[这篇](http://blogs.msdn.com/b/asiatech/archive/2011/12/05/how-to-develop-and-deploy-activex-control-in-c.aspx)关于如何使用 makecert 和 signtool 的文章

# c - linking to glew in c

> ID：11027485
> 
> 赞同：5
> 
> 时间：2012-06-14T05:59:18.467
> 
> 标签：c, windows, opengl, glew

I can't link properly to glew.

I have done:

```
#define GLEW_STATIC
#include "glew/glew.h"
#pragma comment(lib, "glew/glew32s.lib") 
```

However, I still get the error:

LNK2019: unresolved external symbol __glewGenBuffersARB referenced in function initialize

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T22:11:32.717

为自己省去*很多*麻烦，只需将`glew.c`文件放入您的项目中即可。我从不费心在外部链接到 glew 库。一旦你在那里，`GLEW_STATIC`宏就可以工作了。它只是一个文件，并且（如果这对您很重要）它将很好地跨平台携带（而不是必须重建几个特定于操作系统的库）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-29T19:29:58.770

我想通过为项目提供更详细的答案来扩展出色的[@TheBuzzSaw](https://stackoverflow.com/users/264712/thebuzzsaw)`cmake`想法。

1.  [从这里](https://sourceforge.net/projects/glew/files/glew/2.1.0/)下载`GLEW`源代码。
2.  解压缩存档并将两个文件 (`src/glew.c`和`include/GL/glew.h`) 复制到项目目录中。
3.  编辑`glew.c`，使文件的开头看起来像这样：

```
#ifndef GLEW_INCLUDE
#include "glew.h"  /* Point to local glew.h file. */
#else
#include GLEW_INCLUDE
#endif 
```

4.  在您的文件中使用以下内容以`main.cpp`正确包含静态 GLEW：

```
#define GLEW_STATIC
#include "glew.h" 
```

5.  要构建项目，您必须编译并链接静态 GLEW 库。`CMakeLists.txt`使用复制文件的示例文件：

```
cmake_minimum_required(VERSION 3.17)
project(your-project-name)

add_library(STATIC_GLEW glew.c)
add_executable(your-project-name main.cpp)

target_link_libraries(your-project-name STATIC_GLEW) 
```

现在，您应该能够构建您的项目而不会出现任何链接错误

# javascript - 向下滚动时在顶部浏览器中以固定模式制作 div

> ID：11027494
> 
> 赞同：0
> 
> 时间：2012-06-14T06:00:17.047
> 
> 标签：javascript, css

我有一个 div 元素，它不在顶部，而是在页面中间。当我向下滚动到它时，我希望它固定在浏览器的顶部。我怎样才能做到这一点？特别是它的事件。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:02:45.753

您必须为该 div 编写一个 CSS 类，并且在该类中您应该使用 css 属性，例如

```
position:fixed
top:0;
left:0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:03:32.817

使用**position: fixed**，这是一个 CSS 作品

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T06:06:36.157

```
$(document).ready(function() {
    $(window).scroll(function() {
      // write code to move the div.
     var top = $("#mydiv").offset().top;
     var left = $("#mydiv").offset().left;
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T06:07:26.047

你可以添加我喜欢这个

```
 .notification-box {
      position: fixed;
       top:20px;
       right:20px;
       width:300px;
           border-radius: 8px 8px 8px 8px;
           z-index:99;
       } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T06:09:32.390

你可以做这样的事情

演示[http://jsfiddle.net/C3AmC/](http://jsfiddle.net/C3AmC/)

给出要滚动的位置。

**注意**虽然不知道这是否是最好的方法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T06:28:37.347

你可以这样写：

```
$(window).scroll(function(){
    var scrollTop = $(window).scrollTop(); 
    if(scrollTop>150){
        $('.middle').css({'position': 'fixed', 'top': '0'});
    }
});​ 
```

检查这个[http://jsfiddle.net/7ymuD/](http://jsfiddle.net/7ymuD/)

# r - How to add table of contents to R Markdown HTML file using pandoc?

> ID：11027495
> 
> 赞同：9
> 
> 时间：2012-06-14T06:00:26.690
> 
> 标签：r, knitr, pandoc

**How to add table of contents to R Markdown HTML file using pandoc but retain all the HTML formatting and header information?**

E.g., If I had a file called `test.html`, I tried:

```
pandoc -s -S --toc test.html -o test-toc.html 
```

This adds the table of contents but it removes the existing header information which makes all the formatting attractive.

Thus, it makes [this html file](http://cloud.github.com/downloads/jeromyanglim/assorted-files/rpubs-test.html) look like [this one](http://cloud.github.com/downloads/jeromyanglim/assorted-files/rpubs-test-toc.html). I'd like to preserve the formatting.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T08:20:59.433

我不确定如何告诉 Pandoc 保留所有样式和标题信息。但是，想必这种样式并没有太大的变化，那么为什么不将它复制到`.css`样式表文件中，并在生成输出 HTML 时指向该文件（使用`-c`or`--css`命令行选项）？`--self-contained`您可以使用命令行选项告诉 Pandoc 将此样式表信息嵌入到最终输出中（请参阅[此处](http://johnmacfarlane.net/pandoc/README.html)以获取完整的选项列表）。

对于输入 HTML 文件中的 MathJax 脚本，您可以使用

```
--mathjax=https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML 
```

最后，对于 R 语法荧光笔，您可以使用

```
--include-in-header=r_syntax.html 
```

其中`r_syntax.html`包含包装在`<script>`标签中的适当 JavaScript。

**更新：**说了这么多，您可以将所有样式和脚本信息包含在一个文件中（例如`r_styling.html`），并将其包含在输出 HTML 标题的末尾，使用

```
pandoc -s -S --toc -h r_styling.html --self-contained test.html -o test-toc.html 
```

该`-h`选项是 的简写`--include-in-header`。

# java - How to convert .wav to .mp3 using Java?

> ID：11027496
> 
> 赞同：16
> 
> 时间：2012-06-14T06:00:26.970
> 
> 标签：java, audio, jar

I am looking for a library (.jar) which help me to convert sound file from .wav format to .mp3 format. Infact i want to write an application which reads .wav file from a specified location in linux, convert it to mp3 and save it in DB.

Kindly suggest any opensource java library which serve this purpose.

waiting for your feedback.

Regards,

Amir Iqbal

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-14T06:10:03.210

[**JAVE** ( **J** ava **A udio** **V** ideo **E** ncoder ) 库](http://www.sauronsoftware.it/projects/jave/)是您正在寻找的：

> JAVE（Java 音频视频编码器）库是 ffmpeg 项目的 Java 包装器。开发人员可以利用 JAVE 将音频和视频文件从一种格式转码为另一种格式。例如，您可以将 AVI 文件转码为 MPEG 文件，可以将 DivX 视频流更改为（类似 YouTube 的）Flash FLV 文件，**可以将 WAV 音频文件转换为 MP3**或 Ogg Vorbis 文件，您可以分离和转码音频和视频轨道，您可以调整视频大小，更改其大小和比例等。JAVE 支持许多其他格式、容器和操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-30T06:49:58.403

[https://github.com/adrielcafe/AndroidAudioConverter](https://github.com/adrielcafe/AndroidAudioConverter)

在 github 上找到的最简单的 API 之一支持几乎所有格式，但它会增加您的 APK 大小

# google-app-engine - How to play mp3 file using Blob-key of blob store of app engine in jsp file with HTML5 audio tag?

> ID：11027502
> 
> 赞同：4
> 
> 时间：2012-06-14T06:01:06.300
> 
> 标签：google-app-engine, jsp, html5-audio, blobstore

I uploaded my 4MB mpe file in App engine blobstore. By retrieving its Blob-key, i tried to play it in jsp file using HTML 5 audio tag. But its not working . The code is given below:

```
<%@page import="com.google.appengine.api.blobstore.BlobKey" %>
<%@page import="com.google.appengine.api.blobstore.BlobstoreService" %>
<%@page import="com.google.appengine.api.blobstore.BlobstoreServiceFactory" %>
<html>
<head>
<meta http-equiv="Content-Type" content="audio/mpeg3; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<%
BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
BlobKey blobKey = new BlobKey(request.getParameter("blob-key"));
%><%=request.getParameter("blob-key")%>

<audio controls="controls">
  <source src="<%=request.getParameter("blob-key")%>" type="audio/mp3" />
</audio>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T06:42:15.060

您的音频标签的`src`属性应指向可以下载 blob（音频流）的 Url。相反，它只保存 blob 键的值（这是一个随机字符串，而不是 Url，因此它不指向任何地方）。

最好开始阅读如何[为 blob 提供服务](https://developers.google.com/appengine/docs/java/blobstore/overview#Serving_a_Blob)。

基本上，没有一个通用的 blob 服务 url，您只需向它发出请求，它就会为您的 blob 服务。您需要创建一个为 blob 提供服务的 servlet（请参阅链接中的示例），然后通过`src="/path/to/your/blob/servlet?key=<%=request.getParameter("blob-key")%>"`.

# cocos2d-iphone - Distorted Fonts

> ID：11027503
> 
> 赞同：0
> 
> 时间：2012-06-14T06:01:15.893
> 
> 标签：cocos2d-iphone

I am getting some weird distortion of my CCLabelBMFont labels in Cocos2D, as noted here:

![example](../Images/7bde93915c439612c0eaf3719882c914.png) ![example](../Images/1223a97e227627392d4076c53221942b.png)

The distortions appear on both iPad device and simulator. Notable points about this:

*   I have other labels using the same font file that are not showing this
*   I have made sure the coordinates of the labels are all integers, no floats
*   there is no scaling of the labels
*   I have tried with and without `[label.texture setAliasTexParameters];` no difference
*   If I move the label to a different coordinate, it sometimes corrects the distortion

Any idea what could be going on?

UPDATE: I changed my label to a TTF label, and the issue remains! Even when no font file is used, the distortion is appearing.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T07:28:34.850

在 Cocos2d 论坛上的一些挖掘使我添加了以下内容：

`[[CCDirector sharedDirector] setProjection:CCDirectorProjection2D];`

似乎可以解决问题。任何人都知道这是否有其他不良副作用，因为这不是 Cocos2d 中的默认投影。

*更新*这仅解决了我在 iOS 4 上的问题，但我的问题在 iOS 5 上仍然存在。我现在看到可以通过调整标签的锚点来消除失真，因此它似乎受到了影响。应该是bug吧？

*更新 2*事实证明，我的症状是由两种不同的事情引起的。事实上，投影确实对某种失真和所有 iOS 版本产生了影响，所以上面的代码很有用。但其次，我发现了一个设置字体标签位置的条件语句，它并不总是创建整数坐标。因此，通过将坐标的和部分放在`(int)`前面，问题就解决了。Sprites 可以处理浮点坐标而不失真，但 CClabels 似乎不能。`x``y`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:38:13.187

在每个字符周围添加一些间距。这通常是由纹理图集中的其他附近字形由于纹理过滤而“渗入”另一个造成的。Glyph Designer 和 Hiero 都允许您指定间距，通常每个字形之间的两个像素值足以止血。

# wix - Majorupgrade or Upgrade ID which is preferred for Major upgrade?

> ID：11027511
> 
> 赞同：12
> 
> 时间：2012-06-14T06:02:16.547
> 
> 标签：wix, windows-installer, major-upgrade

We are trying to do Major upgrade. While i was investigating i found 2 approaches.

One is using Upgrade Id and another one approach was Majorupgrade tag.

It seems Majorupgrade is easy to do it seems. But schedule doesn't contain any before installinitialize action.

I am not sure which should be using .

Which one is preferred [and recommended] mostly?

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-14T07:49:13.640

在wix 3.5 中引入了[MajorUpgrade](http://wix.sourceforge.net/manual-wix3/wix_xsd_majorupgrade.htm)元素，以简化您通常使用[Upgrade](http://wix.sourceforge.net/manual-wix3/wix_xsd_upgrade.htm)元素所做的事情。所以，而不是这样的东西：

```
<!– Major upgrade –&gt; 
<Upgrade Id="$(var.UpgradeCode)"> 
    <UpgradeVersion Minimum="$(var.ProductVersion)" OnlyDetect="yes" Property="NEWERVERSIONDETECTED" /> 
    <UpgradeVersion Minimum="1.0.0" IncludeMinimum="yes" Maximum="$(var.ProductVersion)" IncludeMaximum="no" Property="OLDERVERSIONBEINGUPGRADED" /> 
</Upgrade>

<InstallExecuteSequence> 
    <RemoveExistingProducts After="InstallValidate" /> 
</InstallExecuteSequence>

<Condition Message="Can't downgrade"> 
    NOT NEWERVERSIONDETECTED 
</Condition> 
```

你可以简单地这样做：

```
<MajorUpgrade DowngradeErrorMessage="Can’t downgrade." /> 
```

旧方法不仅更冗长，还要求您重复在[Product](http://wix.sourceforge.net/manual-wix3/wix_xsd_product.htm)元素中指定的升级代码和产品版本。所以上面的示例必须使用 wix 变量来保持它们同步。如果你弄错了，升级将无法正常工作。

新`MajorUpgrade`元素没有这些复杂性，因此我建议您使用它。另请参阅[Bob Arnson 的这篇博客文章，`MajorUpgrade`](http://www.joyofsetup.com/2010/01/16/major-upgrades-now-easier-than-ever/)以及有关该[主题的 wix 文档](http://wix.sourceforge.net/manual-wix3/major_upgrade.htm)中的主题。

# javascript - Javascript cannot get onmousemove script to work as intended

> ID：11027512
> 
> 赞同：0
> 
> 时间：2012-06-14T06:02:22.147
> 
> 标签：javascript, events, javascript-events

I have a function to follow the object after the mouse, and I want to be able to stop and start following at will, without hiding the object.

It almost works as I wanted, and is following the mouse indeed, but I cannot make it move initial position without actually moving the mouse.

E.G. When I trigger the function, the object is still somewhere in another place, until I move the mouse, but what I'm trying to do is to move it the initial position first, before attaching the mousemove event.

Here is how I want to trigger the function:

```
showtrail();

function showtrail(shit){
//this is how I tried to set the initial position first, but this get me an error:..
//followmouse(); 
document.onmousemove=followmouse; //and this is how I attach the event.
} 
```

This is a part of the actual function to move the object, but, I can't get the coordinates if I try to initilize/imitate the first movement.

```
 function followmouse(e){
var xcoord=offsetfrommouse[0]
var ycoord=offsetfrommouse[1]
if (typeof e != "undefined"){  //This- if triggered by mousemove, and it works
xcoord+=e.pageX
ycoord+=e.pageY
}
else {   //this was meant for the initial call, but... for some reason
xcoord+=document.body.scrollLeft+event.clientX // it triggers an error,
ycoord+=document.body.scrollTop+event.clientY // saying event.clientX undefined.
}
} 
```

So the event.clientX never seems to work, and I cannot figure out how to get the actual mouse position otherwise..

Please guide..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:38:47.267

event.clientX 和 event.clientY 是错误的。它们应该是 e.clientX 和 e.clientY

在 followmouse(e) 中获取 xcoord 和 ycoord 的更优雅的跨浏览器方法是：

```
xcoord = e.pageX||(e.clientX+(document.body.scrollLeft||document.documentElement.scrollLeft));
ycoord = e.pageY||(e.clientY+(document.body.scrollTop||document.documentElement.scrollTop)); 
```

现在，如果我做对了，后面的对象应该有一个初始的绝对位置并显示为一个块，这意味着你有初始的 x 和 y（左和上）。因此，通过使用全局 bool var 来判断当前是否跟随，你就完成了。

```
<style>
...
#trail {position:absolute;left:0;top:0;display:none}
...
</style>

<script>
var following = false;
...
function followmouse(e){
   if (!following){
       document.getElementById('trail').style.display='none';
       return;
   }
   ...
   document.getElementById('trail').style.display='block';
}
</script> 
```

通过更改显示，您可以选择将#trail 移动到其初始位置然后跟随鼠标，以及避免移动并让它从最新的跟随位置跟随鼠标的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T07:56:02.483

***编辑1：***

为此，我建议使用[`requestAnimationFrame`](https://developer.mozilla.org/en/DOM/window.requestAnimationFrame)API，而不是经典的 DOM 事件。说API对于创建动画和暂停它们更有效。

也看看这个：[requestAnimationFrame for smart animating](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)

* * *

这很可悲，但在网页上移动鼠标之前您无法获得鼠标的初始位置。我的意思是你不能在`mousemove`事件发生之前校准你的对象。这就是我将在类似项目中做的事情：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Title</title>
        <script type="text/javascript">
            var targetID = 'mydiv'; // div that is to follow the mouse
            var pauseFollowing = false;
            // (must be position:absolute)
            var offX = 15;          // X offset from mouse position
            var offY = 15;          // Y offset from mouse position

            function mouseX(evt) {if (!evt) evt = window.event; if (evt.pageX) return evt.pageX; else if (evt.clientX)return evt.clientX + (document.documentElement.scrollLeft ?  document.documentElement.scrollLeft : document.body.scrollLeft); else return 0;}
            function mouseY(evt) {if (!evt) evt = window.event; if (evt.pageY) return evt.pageY; else if (evt.clientY)return evt.clientY + (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop); else return 0;}

            function follow(evt) {
                if(pauseFollowing) {
                    //or do something else at pause
                    return false;
                }
                var obj = document.getElementById(targetID).style;
                obj.visibility = 'visible';
                obj.left = (parseInt(mouseX(evt))+offX) + 'px';
                obj.top = (parseInt(mouseY(evt))+offY) + 'px';
            }

            function toggleFollow() {
                pauseFollowing = !pauseFollowing;
            }

            window.onload = function() {
                window.onclick = toggleFollow;
                document.onmousemove = follow;
            }
        </script>
    </head>
    <body>
        <div id="mydiv" style="visibility: hidden; top:0; left:0 ;width: 100px; height: 100px; background: #ff0; position: absolute;"></div>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T19:04:40.793

好吧，我就是这样做的。最好的想法是始终捕捉在全局变量中设置位置的动作。现在我可以选择将其固定在任何特定位置（如果我将坐标传递给 showtrail）或实际跟随鼠标；我还添加了一个事件侦听器，因此如果鼠标在跟随时移出窗口，它将被隐藏。到目前为止，它完全按照我的意愿工作：

```
var trailimage=["scripts/loading_mouse.gif", 24, 24] //image path, plus width and height
var offsetfrommouse=[2,10] //image x,y offsets from cursor position in pixels. Enter 0,0 for no offset
var global_coord=[0,0]
var follow=false;

if (document.getElementById || document.all)
document.write('<div id="trailimageid" style="z-index: 10;position:absolute;display:none;left:0px;top:0px;width:1px;height:1px"><img src="'+trailimage[0]+'" border="0" width="'+trailimage[1]+'px" height="'+trailimage[2]+'px"></div>')

function gettrailobj(){
if (document.getElementById)
return document.getElementById("trailimageid").style
else if (document.all)
return document.all.trailimagid.style
}

function hidett(){  gettrailobj().display="none";   }
function showtt(){  gettrailobj().display="block";  }

function truebody(){    return (document.body||document.documentElement);   }

function showtrail(shit){
    if (typeof shit == "undefined"){    //Follow Mouse
        follow=true;
        setmousepos(global_coord[0],global_coord[1]);
    }
    else {              //Set fixed in specific place
        follow=false;
        showtt()
        gettrailobj().left=shit.left+6+"px"
        gettrailobj().top=shit.top-5+"px"
    }
}

function hidetrail(){
    hidett()
    follow=false;
}

function setcoord(e){
var xcoord=offsetfrommouse[0]
var ycoord=offsetfrommouse[1]
var xxcoord = e.pageX||(e.clientX+truebody().scrollLeft);
var yycoord = e.pageY||(e.clientY+truebody().scrollTop);
if (typeof xxcoord != "undefined"&&typeof yycoord != "undefined"){
    xcoord+=xxcoord;
    ycoord+=yycoord;
    global_coord=[xcoord,ycoord];
    if (follow) setmousepos(xcoord,ycoord);
}}

function setmousepos(xcoord,ycoord){
    var docwidth=truebody().scrollLeft+truebody().clientWidth   
    var docheight=Math.max(truebody().scrollHeight, truebody().clientHeight)
    if ((xcoord+trailimage[1]+3>docwidth || ycoord+trailimage[2]> docheight ||!follow)){
        hidett()
    }
    else{
        showtt();
        gettrailobj().left=xcoord+"px"
        gettrailobj().top=ycoord+"px"
    }
}

window.addEventListener("mouseout",
    function(e){
        mouseX = e.pageX;
        mouseY = e.pageY;
        if ((mouseY >= 0 && mouseY <= window.innerHeight)
        && (mouseX >= 0 && mouseX <= window.innerWidth)){
            return false;
        }else{
            if (follow) hidett()
        }
    },
    false);

document.onmousemove=setcoord; 
```

# css - Positioning a fixed background image in CSS with top and right margins

> ID：11027513
> 
> 赞同：3
> 
> 时间：2012-06-14T06:02:27.153
> 
> 标签：css, margin, fixed

I want to have a fixed position background image that scales and I need it to have a 220px top margin and a 170px right margin so that the image is not under the navigation bars. I have come close with the following code but the right margin varies due to the percent.

```
#container_hu
{
width: 100%;
text-align: left;
background: #fff;
border: 0px solid #000000;
height:100%;
padding-top:260px;
min-width:1100px;
background:url(../images/bg_image.jpg) no-repeat;
background-attachment:fixed;
background-position: 78%  220px;
background-size:25%;
} 
```

Thanks for any help!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T06:16:20.147

您可以使用 CSS3 的`background-clip`属性强制将背景剪辑到允许的内容区域内。即，您可以为您的 DIV 指定一个填充（以覆盖导航栏等）并指定要实现此目的的`background-clip`属性。`content-box`下面的示例 CSS：

```
#container_hu {

    /* this forces the bg to be rendered only within allowed content area (CSS3) */
    background-clip: content-box;
    background-image: url("your_image.jpg");
    background-repeat: no-repeat;

    /* this forces the bg to stretch with the container (CSS3) */
    background-size: 100% 100%;

    height: 300px;
    width: 400px;

    /* specify the top/left pixels to cover your nav-bar etc. */
    padding-left: 50px;
    padding-top: 50px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:17:00.753

所以从它的 170px 右边距开始，然后是你描述的百分比。

我会考虑2个选项：

1.  在 ems 中重做所有尺寸、边距、布丁等的整个布局，并在主体上使用基本单元。这样，您可能有更多的机会排队。（本质上我是说从 ems 开始，在 ems 中扩大规模，因为 %age 不起作用）

2.  您也可以从像素开始并以像素为单位放大，但您需要 JavaScript 来进行计算并在 onResize 上应用新的边距。

# java - Android OCR 库不支持

> ID：11027519
> 
> 赞同：1
> 
> 时间：2012-06-14T06:02:37.203
> 
> 标签：java, android

我正在创建一个从相机读取的应用程序 ocr，从相机获取捕获图像并从该图片或库中识别单词并将结果作为字符，所以我从[**这里**](https://github.com/rmtheis/android-ocr/tree/master/android)的 git hub 找到它，我已经在我的 eclipse 中导入了这些项目. 但是当我打开它时，它会收到关于没有库支持 tesseract API 的包错误，但我发现该项目中已经配置了它，所以它是如何引发错误的。所以请帮我解决这个...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T06:27:42.793

您需要将 [https://github.com/rmtheis/tess-two](https://github.com/rmtheis/tess-two/tree/master/tess-two)导入为库项目并将其引用到您的项目中

我建议您参考本教程，它非常简洁易学。

[http://gaut.am/making-an-ocr-android-app-using-tesseract/](http://gaut.am/making-an-ocr-android-app-using-tesseract/)

# regex - 如何获取组的正则表达式匹配列表？

> ID：11027525
> 
> 赞同：0
> 
> 时间：2012-06-14T06:03:36.640
> 
> 标签：regex

我有一个可以在输入字符串中出现任意次数的组。我需要获取所有匹配项目的列表。

例如，对于输入：

```
example repeattext 1 anything here repeattext 2 anything repeattext 3 
```

我的正则表达式是：

```
 (repeattext \d) 
```

我想获取该组的匹配列表。是否可以在这里使用正则表达式或者我需要自己解析它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:40:47.667

利用

```
result = subject.scan(/repeattext \d+/)
=> ["repeattext 1", "repeattext 2", "repeattext 3"] 
```

请参阅[该`.scan()`方法](http://ruby-doc.org/core-1.9.3/String.html#method-i-scan)的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:06:04.223

是的，您可以在这里使用正则表达式。您现有的正则表达式会很好。

请参阅[http://rubular.com/r/fS8c9C61rG](http://rubular.com/r/fS8c9C61rG)在您的示例中使用它。

如果数字将变为 10 或更高，请考虑以下正则表达式：

```
(repeattext \d+)
              ^
              |
              `- matches 1 or more repeating of previous 
```

# css - 我可以将我的 CSS 管理为 ModX 资源吗？

> ID：11027526
> 
> 赞同：0
> 
> 时间：2012-06-14T06:03:52.020
> 
> 标签：css, modx, modx-revolution, modx-templates

我一直在使用 ModX Revolution 管理器，并且想知道是否可以将我的 CSS 转换为 ModX 资源而不是文件。我还想利用模板及其变量。那可能吗？这样做的缺点是什么？有什么优势（除了我认为下面的那些）？

我更喜欢这个的原因是我使用了几个带有 @import 语句的 CSS 页面来更好地面向对象我的 CSS。如果我可以直接在 ModX 中执行此操作，它将节省我的上传和同步。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T06:03:52.690

在以前的 ModX 版本（Evo 和 Revo）中，您过去必须通过技巧。现在有了 2.2.2pl，只需很少的技巧就可以了。执行此操作的信息变得稀疏且不准确。这是你如何做到的：

* * *

### 创建您的模板

1.  创建一个新模板。我命名了我的 CSS 样式表。（就那么简单）

2.  对于内容，简单地说`[[*content]]`。

### 创建你的 CSS 页面

1.  创建新资源。随意命名。

2.  添加您的别名。确保不要`.css`在末尾添加。ModX 应该为您做到这一点。

3.  现在，确保您的新页面是`published`. 您可能还想`hide from menus`.

4.  添加您的 CSS 代码。没有有趣的技巧......只需像往常一样复制和粘贴它。

### 测试样式表

只需直接导航到您的新页面，就好像它是一个 html 文档一样。不要忘记`.css`代替`.html`。如果你看到 CSS 代码，那么你就成功了。

### 将您的 CSS 添加到模板中

这是棘手的部分。您将无法使用`<link rel=></link>`.

1.  只需转到您的`<head>`元素。添加以下代码：

    `<style type="text/css">` @import url(""); `</style>`

2.  测试

3.  在 中`url("");`，只需将 url 放置到您的新资源中。

### 好处

除了保存上传和下载之外，您现在还可以使用任何 ModX 工具编辑 CSS。此外，还有其他一些福利：

*   如果您像我一样，文件名很有用，但通常描述性不够。你可以给他们起任何你喜欢的名字！无论如何，它的别名很重要。

*   基于资源描述的便捷工具提示。

*   您还可以将资源摘要用于其他事情。我把重要的文件注释放在这里，这样我的 CSS 就更小了。

*   模板变量！在以前的 ModX 版本中，您的 CSS 无法使用模板。

*   块和片段，如果你愿意的话。您必须将它们编写为纯文本，而不是 HTML，但如果您有创意，它仍然很有用。

*   如果您愿意，您的 CSS 现在可以在所有上下文之间共享。这是由于`@import`声明的性质。

*   您可以在任何计算机上编辑 CSS。您甚至可以设置前端进行编辑。

### 缺点

总会有取舍，使用这种技术也没有什么不同。很大程度上取决于您如何为您的网站设置内容。

*   您的保存和编辑取决于您的服务器性能。

*   您的 URL 请求将更多地基于您的 ModX 性能。对于某些人来说，添加这些额外资源可能会减慢速度。通常，这不足以担心，但值得一提。

*   它现在由数据库管理，因此它受数据库安全性的约束。这可能是好是坏。即使它很好，它也可能需要您进行额外的设置。

*   如果编程不正确，您的模板、片段和插件可能会破坏您的 CSS。这是您真正要小心的事情。

*   ModX 将每个 CSS 请求视为一个单独的请求。模板变量和插件不适用于您正在查看的网页。它们适用于 CSS 内容。

* * *

### 结论

整个过程大约需要15分钟。最终，如果它不适合你，它会更快地恢复（只是在你确定之前不要删除原始文件）。增加的功能对我来说是值得的。

# python - 如何使用 Python 遍历网站的页面？

> ID：11027527
> 
> 赞同：0
> 
> 时间：2012-06-14T06:03:52.253
> 
> 标签：python, web, loops

我是软件开发的新手，我不知道该怎么做。我想访问网站的每个页面并从每个页面中获取特定的数据。我的问题是，我不知道如何在不提前知道各个网址的情况下遍历所有现有页面。例如，我想访问 url 开头的每个页面

> “http://stackoverflow.com/questions/”

有没有办法编译一个列表然后遍历它，或者是否可以在不创建一个巨大的 url 列表的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T06:18:30.487

尝试[刮擦](http://doc.scrapy.org/en/latest/intro/overview.html)。

它为您处理所有爬网，让您专注于处理数据，而不是提取数据。我不会复制粘贴教程中已有的代码，而是留给您阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:21:15.887

要从网站抓取特定的数据位，您可以使用一些网络抓取工具，例如[scrapy](http://doc.scrapy.org/en/latest/intro/overview.html)。

如果需要的数据是由 javascript 生成的，那么您可能需要类似浏览器的工具，例如[Selenium WebDriver](http://pypi.python.org/pypi/selenium)，并手动实现对链接的抓取。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-14T06:17:04.497

例如，您可以制作一个简单的 for 循环，如下所示：

```
def webIterate():
    base_link = "http://stackoverflow.com/questions/"
    for i in xrange(24):
        print "http://stackoverflow.com/questions/%d" % (i) 
```

输出将是：

```
http://stackoverflow.com/questions/0
http://stackoverflow.com/questions/2
http://stackoverflow.com/questions/3
...
http://stackoverflow.com/questions/23 
```

这只是一个例子。您可以传递许多问题并随心所欲地提出问题

# objective-c - 如何使用 openGL 制作多个阶段以运行多个电影文件？

> ID：11027532
> 
> 赞同：0
> 
> 时间：2012-06-14T06:04:10.453
> 
> 标签：objective-c, macos, opengl, bufferedimage, cgcontextdrawimage

我想在 Mac 上的 xcode 中制作程序，我想分两个阶段制作一个窗口，两部电影将在其上运行，这些电影文件数据将来自缓冲区。这意味着我有两个电影文件，我想播放这些文件同时在两个阶段的一个窗口中。我怎么能用 OpenGL 做到这一点？

注意：这个电影的时间间隔可能是不同的，不同的电影文件格式，但所有这些电影都将来自缓冲区，使用openGL在一个窗口中的不同阶段表示。

# java - 从 Axis Web 服务手动抛出什么样的异常？

> ID：11027535
> 
> 赞同：0
> 
> 时间：2012-06-14T06:04:22.723
> 
> 标签：java, exception, jax-ws

我有一些在轴 1.1 上开发的 web 服务，我需要进行一些更改。在此期间我正在修复异常处理代码，但我不知道当出现错误时我应该抛出什么样的异常。

我只需要将消息发送给客户端，我不需要担心异常中的堆栈跟踪和自定义信息。我不想处理扩展的肥皂错误，或提供失败的原因，以及所有这些爵士乐。

```
@WebMethod
public string[] myMethod() throws ..?.. {
    throw new AxisFault(); // not recommended
    throw new SOAPFaultException();  // seems overly general
    throw new Exception(); // what we have now
} 
```

有什么正确的方法可以做到这一点，或者是`throw new Exception`正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T07:16:36.770

您可以创建一个自定义异常（例如`FooException`）扩展`Exception`用 JAX-WS 注释[`@WebFault`](http://docs.oracle.com/javaee/5/api/javax/xml/ws/WebFault.html)。

```
@WebFault(faultBean = "org.foo.bar.FooFault")
public class FooException extends Exception {
    private FooFault fooFault;

    public FooException() {
        super();
    }

    public FooException(String message, FooFault fooFault, Throwable cause) {
        super(message, cause);
        this.fooFault = fooFault;
    }

    public FooException(String message, FooFault fooFault) {
        super(message);
        this.fooFault = fooFault;
    }

    public FooFault getFaultInfo() {
        return fooFault;
    }
}

// this is org.foo.bar.FooFault
public class FooFault {
    // POJO
} 
```

然后你声明你的 web 方法抛出了那个异常。

```
@WebMethod
public string[] myMethod() throws FooException {
    // do some stuff
    throw new FooException();
    // or with a cause
    try { 
        // something dangerous
    } catch (Exception e) {
        throw new FooException("Shit happens", new FooFault(), e);
    }
    // or like this
    throw new FooException("Foo", new FooFault());
} 
```

JAX-WS 应该做剩下的事情。

# jquery - .each 为 .hover 调用产生正确的类名，但不是为 .css

> ID：11027536
> 
> 赞同：1
> 
> 时间：2012-06-14T06:04:40.603
> 
> 标签：jquery, css

我正在尝试构建一个对 CSS 对象（.thumbposition1 -> 20）进行不透明度淡化的函数。我正在动态地为背景图像分配与其灰度对应物相同的 CSS 属性，该属性被鼠标悬停（在滚动条上）。

当我通过名称手动指定每个类时，这很有效，但是当我尝试通过引入 .each 调用来最小化事情时，会发生不好的事情： .hover 工作正常并返回被鼠标悬停的 CSS 类，但是当我去更改时（并测试）覆盖和底层图像的 CSS 属性，偏移值始终相同（顶部：0px，左侧：200px）。

我究竟做错了什么？请原谅任何愚蠢的错误/可怕的代码/等。我是菜鸟。

```
$(document).ready(function () {
$("img").each(function(i) {
    var i = i + 1;
    var iString = i.toString();
    var currentThumbPositionString_gs = ".thumbpositiongs" + iString;
    var currentThumbPositionString_c = ".thumbposition" + iString;
    var currentThumb_gs = $(currentThumbPositionString_gs);
    var currentThumb_c = $(currentThumbPositionString_c);
    var thumbPos = currentThumb_gs.offset();
    var thumbPos_c = currentThumb_c.offset();
    currentThumb_gs.hover(function() {  
            currentThumb_c.css({
                    left:thumbPos.left,
                    top:thumbPos.top,
                    height:"auto",
                    width:"auto",
                    "z-index":"-1000000",
                    visibility:"visible"});
            currentThumb_gs.stop().animate({"opacity": "0"}, "1500");
            },
            function() {
                    currentThumb_gs.stop().animate({"opacity": "1"}, "1500");
                    currentThumb_c.delay(355).queue( function() {
                    $(currentThumb_c).css({
                    height:"0",
                    width:"0",
                    visibility:"hidden"});
                currentThumb_c.clearQueue();
                });
            });
        });
    }); 
```

# c# - 我应该使用静态方法还是非静态方法？

> ID：11027540
> 
> 赞同：2
> 
> 时间：2012-06-14T06:05:21.353
> 
> 标签：c#, memory-management, static, console-application

我在 C# 中创建了一个控制台应用程序，并且有**main**方法（静态），我的要求是初始化 2 个计时器并分别处理 2 个方法，这些方法将被定期调用以执行某些任务。现在我已将所有其他方法/变量设为静态，因为它们是从计时器处理程序事件调用的（由于从 main 调用它是静态的）。

现在我想知道对于上述情况，如果这个控制台长时间运行，内存将如何消耗？如果我想应用 oops 概念，那么我是否需要将所有方法/变量设为非静态并通过创建类对象来访问它？在这种情况下，内存将如何消耗？

**更新：** 以下是我的代码片段

```
 public class Program
    {
        readonly static Timer timer = new Timer();
        static DateTime currentDateTime;
        //other static variables
        //-----
        static void Main()
        {
            timer.Interval = 1000 * 5;
            timer.AutoReset = true;
            timer.Enabled = true;
            timer.Elapsed += new ElapsedEventHandler(timer_Elapsed);
            timer.Start();

            //2nd timer
            //-----

            System.Console.ReadKey();
            timer.Stop();
        }

        static void timer_Elapsed(object sender, ElapsedEventArgs e)
        {
            currentDateTime = DateTime.UtcNow;
            PushData();

        }

        private static void PushData()
        {
            //Code to push data
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T06:11:24.073

您不应该根据内存消耗来决定是否使用静态字段/方法（这可能不会有太大改变）。相反，您应该使用产生更清洁、更可测试的代码的方法。

如果您不需要任何类型的多态行为，并且该方法在逻辑上不作用于该类型的实例，则静态*方法是可以的（IMO）。*但是，如果您*还*涉及静态变量，那就更成问题了。静态变量——除了常量——会使代码更难在多个线程中测试、重用和正确处理。

听起来您可能*应该*使用实例变量和方法。只需让您的`Main`方法创建该类的一个实例，它就可以使用该实例创建委托以传递给计时器。如果不知道更多关于你在做什么，很难比这更精确，但听起来你使用静态是为了立即方便，而不是因为它是正确的做法，这总是令人担忧。

# c# - 如何为窗口服务中的每个不同线程设置计时器

> ID：11027542
> 
> 赞同：0
> 
> 时间：2012-06-14T06:05:32.630
> 
> 标签：c#, multithreading, timer

尝试为具有不同时间的每个不同线程设置计时器，据我所知，如果我们在 main 方法中设置一个计时器，那么对于所有线程都一样，所以我想知道如何为每个不同的线程设置计时器而不会杀死线程，请就此提出建议

```
static Timer _timer;

static void Main(string[] args)
{
   _timer = new Timer(10000);
   _timer.Enabled = true;
   _timer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
 } 
```

上面粘贴的代码将为所有线程执行工作，每十秒运行一次，如何通过 main 方法中的计时器每十秒运行一次所有线程，我担心的是必须为每个线程设置不同时间的计时器

概括：

为什么我问这个问题，这里我有窗口服务的要求，要做什么意味着，例如在一个窗口服务中，有三个不同的线程（XYZ，ABC，PQR），如果我启动一个服务，所有三个线程被初始化并且这些线程应该被作为基于我们从应用程序配置传递的计时器设置，这些线程必须根据设置的时间被触发，请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:16:09.213

如果要在给定时间后启动一些线程，可以使用 System.Threading.Timer。

```
int[] times = new int[] { 10000, 14000, 17000 };
foreach (int time in times)
{
System.Threading.Timer t = new System.Threading.Timer(MyTimerCallback, null, time, 0);
...
}

private void MyTimerCallback(object state)
{
  //Do some awesome stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:06:00.340

您是否尝试过使用该`[ThreadStatic]`属性？这个属性定义了它所耦合的veriable不会在线程之间共享，并且会为每个线程创建一个他的副本。

```
[ThreadStatic]
static Timer _timer;

void MyThreadStartMethod()
{
    _timer=new Timer(value);
    ...
} 
```

而且，我在您的代码中看不到任何线程。该`Main`方法由 CLR 调用以启动应用程序，并且每次都在不同的进程中运行。

# c# - 当图像刷用作背景时，如何从 WPF 重复按钮中删除边框和效果

> ID：11027544
> 
> 赞同：5
> 
> 时间：2012-06-14T06:05:45.730
> 
> 标签：c#, wpf, xaml, repeatbutton

我正在使用 WPF 中的 repeatbutton 对象，该按钮需要基于图形（图像画笔背景，没有边框或其他多余的效果）。

我遇到的问题是，无论我尝试什么，按钮周围仍然有一个白色矩形，而且，在看了几个小时之后，我现在不确定我是否理解为什么或如何删除它。

我在 XAML 中使用以下内容创建了按钮

```
 <RepeatButton Content="" BorderThickness="0" HorizontalAlignment="Left" Margin="334,265,0,0" VerticalAlignment="Top" Width="149" Height="100" Background="{DynamicResource ImageBrush_Decrement}" Style="{DynamicResource RepeatButtonStyle_noflash}" d:LayoutOverrides="HorizontalAlignment"/> 
```

你会注意到我引用了一种“RepeatButtonNoFlash”样式，我用它来删除默认渲染（因为它会导致闪烁效果，这种样式在共享字典中定义如下

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero">
    <Style x:Key="ButtonFocusVisual">
        <Setter Property="Control.Template">
            <Setter.Value>
                <ControlTemplate>
                    <Rectangle Margin="2" SnapsToDevicePixels="true" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" StrokeThickness="0" StrokeDashArray="1 2"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <!-- Resource dictionary entries should be defined here. -->

    <Style x:Key="BaseButtonStyle" TargetType="{x:Type ButtonBase}">
        <Setter Property="FocusVisualStyle" Value="{StaticResource ButtonFocusVisual}"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ButtonBase}">
                    <Microsoft_Windows_Themes:ButtonChrome x:Name="Chrome" Background="{TemplateBinding Background}" RenderMouseOver="False" RenderPressed="{TemplateBinding IsPressed}" RenderDefaulted="False" SnapsToDevicePixels="true" Style="{DynamicResource ButtonChromeStyle_noborder}">
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Microsoft_Windows_Themes:ButtonChrome>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsKeyboardFocused" Value="true">
                            <Setter Property="RenderDefaulted" TargetName="Chrome" Value="true"/>
                        </Trigger>
                        <Trigger Property="ToggleButton.IsChecked" Value="true">
                            <Setter Property="RenderPressed" TargetName="Chrome" Value="true"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="#ADADAD"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="RepeatButtonStyle_noflash" BasedOn="{StaticResource BaseButtonStyle}" TargetType="{x:Type RepeatButton}">
        <Setter Property="Stylus.IsPressAndHoldEnabled" Value="false"/>
    </Style>
</ResourceDictionary> 
```

问候

担

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:05:05.787

它来自`Microsoft_Windows_Themes:ButtonChrome`尝试用边框或其他东西替换它，应该摆脱它。

```
<Style x:Key="BaseButtonStyle" TargetType="{x:Type ButtonBase}">
        <Setter Property="FocusVisualStyle" Value="{StaticResource ButtonFocusVisual}"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ButtonBase}">
                    <Border Background="{TemplateBinding Background}">
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="#ADADAD"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
</Style> 
```

# flash - 如何从 Flash 触发 Adob e Flash Player 设置隐私面板？

> ID：11027547
> 
> 赞同：0
> 
> 时间：2012-06-14T06:06:14.660
> 
> 标签：flash, privacy, setting

有人知道如何从 Flash 触发 Adob​​e Flash Player 设置隐私面板吗？这是示例。有一个“点击这里”，点击它会触发面板显示。 [http://chatroulette.com/](http://chatroulette.com/)

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:10:18.177

对于默认面板：

`Security.showSettings(SecurityPanel.DEFAULT);`

其他选项列在[SecurityPanel LiveDocs](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/SecurityPanel.html)上。

# javascript - 尝试将 json 转换为 xml 但显示错误

> ID：11027552
> 
> 赞同：0
> 
> 时间：2012-06-14T06:06:55.837
> 
> 标签：javascript, jquery, asp.net, xml, json

我正在尝试将 json 结果转换为 xml 类型。但是，它似乎不起作用。无法找出问题所在。请帮忙。

代码是：

```
<script src="../Jquery Autocomplete/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="../Jquery Autocomplete/jquery.json-2.2.min.js" type="text/javascript"></script>
<script language="javascript" type="text/javascript">
    $(document).ready(function() 
    {
        $(".openModalLink").click(function()
        {
        var start=$(this).parent().parent().find(".start").val();
        var end =$(this).parent().find(".end").val();
        $.ajax(
              {
                type: "POST",
                url: "frmCollegeExamScheduleMst.aspx/ServerSideMethod",
                data: "{'paraml': '" + start + "','param2': '" + end + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: true,
                cache: false,
                success:function(result)
                {
                    var xmlDoc = $.parseXML(result);
                    var xml = $(xmlDoc);
                    var customers = xml.find("Table");
                    var data = new Array();
                    var i =0;
                    $.each(customers, function () 
                    {
                        //do something
                    });
                },
                error: function(err) {
                     alert('Error:' + err.responseText + '  Status: ' + err.status);
                }
            });
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:14:02.813

当您指定 dataType: "json" 时，响应将转换为 JSON 对象，并且不会保留为字符串。

尝试删除参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:14:57.767

如果您的 AJAX 请求的响应是，`xml`那么您应该相应地设置它。

```
$.ajax({
  data: {paraml: start, param2: end},
  dataType: "xml",
  success:function(result) {
    var $xml = $(result);
  }
}); 
```

不需要`contentType`也不连接 in `data`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T06:20:57.350

试试这样：

```
success: function(result) {
    var xmlDoc = $.parseXML(result.d);
    ...
} 
```

注意`result.d`. 我猜你的 ASP.NET PageMethod 看起来像这样：

```
[WebMethod]
public static string ServerSideMethod(string param1, string param2)
{
    DataSet ds = ...
    return ds.GetXml();
} 
```

这个字符串是 JSON 序列化的。为了在客户端检索它，ASP.NET 基础结构添加了`d`参数：

```
{"d":"some xml here"} 
```

您绝对应该在代码中更改的另一件事是替换：

```
data: "{'paraml': '" + start + "','param2': '" + end + "'}" 
```

和：

```
data: JSON.stringify({ param1: start, param2: end }) 
```

以确保您的请求参数是正确的 JSON 编码。例如，想想如果 会发生什么`start = 'foo\'bar'`。你最终会得到：

```
data: {param1: 'foo'bar', param2: 'baz'} 
```

如您所见，这完全破坏了您的 JSON。

# architecture - 在 OTP/Erlang 中将 ID 映射到进程的惯用方式是什么？

> ID：11027555
> 
> 赞同：2
> 
> 时间：2012-06-14T06:07:12.827
> 
> 标签：architecture, erlang, erlang-otp

我有一个托管多个游戏实例的游戏服务器。玩家可以输入一个 ID 来加入当前正在运行的游戏。为了将客户端与他们想要的游戏实例配对，我有一个 ETS 表，它将游戏 ID 映射到处理该特定游戏实例的 Erlang 进程的 PID。虽然这可行，但我并不喜欢使用 ETS，因为它创建的全局数据不受任何进程的控制。

我想知道的是：**在 Erlang/OTP 中是否有一种惯用的方式将标识符映射到进程？** 在这种情况下使用 ETS 可以吗，因为数据本质上是全局的？或者我应该有一个进程来存储所有 ID 的字典来处理映射？我觉得这更像是 Erlang 风格，但可能不如高性能或并发。我在查看其他 SO 答案时也遇到了[gproc](https://github.com/esl/gproc)，这似乎是一个改进的过程字典。但是，我的印象是不赞成使用进程字典（[根据 erlang.org 网页](http://www.erlang.org/course/advanced.html#dict)）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T06:29:18.593

`ETS tables`可以由给定的进程/gen_server 控制，并且它们的所有权可以在出现问题时通过或在表创建期间从进程转移到进程。许多游戏开发者依赖于与. 但是，它是一个非常稳定的 OTP 应用程序，与. 我们在非常繁忙的应用程序中使用了 mnesia，并且它从未出现过故障，除非整个 VM 由于其他问题而出现故障。实际上，大多数在 erlang 中构建的可用系统确实依赖于或用于在冗余组件之间共享状态，以便当一个故障转移到另一个时，内存中的数据是可用的。 [`ets:give_away/3`](http://www.erlang.org/doc/man/ets.html#give_away-3) [`heir option`](http://www.erlang.org/doc/man/ets.html#heir)

`memcached``ETS``mnesia``ETS``mnesia``ETS`

[`gproc`](http://rustyklophaus.com/articles/20090916-GProcErlangGlobalProcessRegistry.html) 是一个非常方便的工具，尤其适用于游戏之类的东西。这是因为，一个进程依赖于它自己易于访问的数据。没有其他进程可以查找其他进程的数据。所以，与其保持游戏状态`ETS`，不如使用`gproc`.

无论如何，如果你有时间，你可以尝试每个选项并做一些负载测试，看看哪个表现更好。

# mysql - SQL 语句：如何在聚合函数中获取 NULL 值的特殊输出？

> ID：11027560
> 
> 赞同：1
> 
> 时间：2012-06-14T06:07:34.267
> 
> 标签：mysql, sql

```
+------+
| num  |
+------+
|    1 |
|    2 |
|    3 |
| NULL |
|    5 |
|    6 |
+------+ 
```

这是表格测试。

```
select max(num) from test;   ---> 6 
```

如何编写如果存在 NULL 值的 SQL 语句 --> 输出应该是“OK”

如果此列中不存在 NULL 值 --> 输出应为 6

我尝试了很多次，但没有运气。有什么帮助吗？如果解决方案是 ANSI SQL 就好了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T06:26:04.450

试试这个：[http ://www.sqlfiddle.com/#!2/dfcbd/2](http://www.sqlfiddle.com/#!2/dfcbd/2)

这：

```
CREATE TABLE tbl
    (`num` int);

INSERT INTO tbl
    (`num`)
VALUES
    (1),
    (2),
    (3),
    (NULL),
    (5),
    (6);

select if(bit_or(num is null), 'OK', max(num)) as max from tbl; 
```

输出：

```
OK 
```

这：

```
CREATE TABLE tblx
    (`num` int);

INSERT INTO tblx
    (`num`)
VALUES
    (1),
    (2),
    (3),    
    (5),
    (6);

select if(bit_or(num is null), 'OK', max(num)) as max from tblx; 
```

输出：

```
6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T06:57:54.120

ANSI SQL 下面[http://www.sqlfiddle.com/#!1/679b2/1](http://www.sqlfiddle.com/#!1/679b2/1)

大多数数据库没有一流的布尔类型，因此查询更长。和许多数据库一样，不要将整数隐式转换为 varchar

```
select

  case when count(case when num is null then 1 end) > 0 then 
     'OK' 
  else
     cast(max(num) as varchar(16))
  end

from tbl 
```

如果每个数据库都有一流的布尔值，则上面的内容可以缩短为：

```
select

  case when sum(cast( (num is null) as int )) > 0 then 
    'OK' 
  else
    cast(max(num) as varchar(16))
  end

from tbl 
```

虽然如果每个数据库上真的有一个一流的布尔值，他们也会制作 bool_or/bit_or ，而且它更短：[http ://www.sqlfiddle.com/#!1/679b2/6](http://www.sqlfiddle.com/#!1/679b2/6)

```
select

  case when bool_or( num is null )  then 
    'OK' 
  else
    cast(max(num) as varchar(16))
  end

from tbl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T06:18:24.970

由于`COUNT(column)`折扣空值，您可以使用：

```
SELECT CASE WHEN COUNT(*) = COUNT(num) THEN MAX(num) ELSE "OK" END
  FROM Test; 
```

我使用的 DBMS（Informix）要求 THEN 和 ELSE 中的类型相同，所以我最终测试了：

```
SELECT CASE WHEN COUNT(*) = COUNT(num) THEN CAST(MAX(num) AS CHAR(10)) ELSE "OK" END
  FROM Test; 
```

它是一种冗长的强制转换方式（但它是标准 SQL）；在给定的 DBMS 中通常有可用的速记。

示例输出：

```
+ CREATE TABLE Test(Num INTEGER);
+ INSERT INTO Test VALUES(1);
+ INSERT INTO Test VALUES(2);
+ INSERT INTO Test VALUES(3);
+ INSERT INTO Test VALUES(NULL);
+ INSERT INTO Test VALUES(5);
+ INSERT INTO Test VALUES(6);
+ SELECT CASE WHEN COUNT(*) = COUNT(num) THEN CAST(MAX(num) AS CHAR(10)) ELSE "OK" END
  FROM Test;
OK
+ DELETE FROM Test WHERE Num IS NULL;
+ SELECT CASE WHEN COUNT(*) = COUNT(num) THEN CAST(MAX(num) AS CHAR(10)) ELSE "OK" END
  FROM Test;
6 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T06:10:55.933

在我的 sql

```
Select (Case When hasNull > 0 Then 'OK' Else mx End) As Result
From
(
  Select Max(num) as mx,Sum(Case When numIs Null Then 1 Else 0 End) as hasNull 
  From test 
) as t 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T06:12:14.903

试试这个..

```
 select CASE num when num is null then "OK" else max(num) END from test; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T06:17:12.577

试试这个

```
select 
    case when ( select COUNT(*) from tableName where num is null ) > 0 then 'OK'
    else CONVERT(varchar, MAX(num) ) end as [num]
from tableName 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-14T06:25:19.453

如果您想避免运行两个查询（一个用于测试`NULL`值，然后一个用于计算`max`，您可以使用`count(*)`并`count(num)`计算有值和没有`NULL`值的值的数量，如下所示（SQL Server 语法）：

```
with TestQ as
(
   select max(num) as MaxNum, count(num) as NumCountNotNull, count(*) as NumCountTotal from nullAggTest
)
select 
   SpecialMax = case
      when NumCountNotNull < NumCountTotal then -1
      else MaxNum
   end
from TestQ 
```

请注意，为简单起见，我将您的特殊值`OK`替换`-1`为，否则您需要添加一些内容，这并不重要:-)

# delphi - Indy 在关闭套接字时抛出多个异常。如何进行干净的自动重新连接？

> ID：11027565
> 
> 赞同：0
> 
> 时间：2012-06-14T06:08:06.330
> 
> 标签：delphi, sockets, indy, disconnect

我有一个 Delphi 6 应用程序，它使用 Indy 9 组件来维护与外部设备的持久 IdTCPConnection。有时我想断开连接，然后重新连接到设备。我发现当我这样做时，Indy 会抛出多达 3 个单独的异常。这使得开发一个干净的重新连接策略有些混乱，因为 Indy 组件位于后台线程上，我不想打破线程 Execute() 循环。

在我尝试重新连接之前，有什么好的或干净的方法来吸收 3 个例外？我看到的 3 个异常是，按出现的顺序，EIdClosedSocket、EIdConnClosedGracefully、EIdSocketError（LastError = WSAECONNABORTED）。在尝试重新连接之前，我想等到与关闭套接字相关的所有异常都已经传播，但我不确定如何构建我的代码循环来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:08:27.083

一次只有一个异常会到达您的线程代码。只需用块将代码包装在线程循环中`try/except`，然后在下一次循环迭代中重新连接。

```
while not Terminated do
begin
  if not Client.Connected then
  try
    Client.Connect;
  except
    Sleep(2500);
    Continue;
  end;
  try
    // communicate with device as needed...
  except
    on E: EIdException do
    begin
      // Indy socket error, reconnect
      Client.Disconnect;
      Client.InputBuffer.Clear;
    end;
    on E: Exception do
    begin
      // something else happened in your code...
    end;
  end;
end; 
```

# linux - 如何在 UNIX 上删除带有特殊字符的目录名称和带有 env 变量名称的目录

> ID：11027566
> 
> 赞同：8
> 
> 时间：2012-06-14T06:08:12.817
> 
> 标签：linux, unix, special-characters

我在此存储库中进行了搜索，但没有找到任何类似的问题，或者可能是我的搜索不正确。

我在我的客户环境中遇到了这个问题，一个自定义应用程序正在使用环境变量“$SRCDIR”和“$HOME”创建目录以及创建这些目录的目录，它本身就是 HOME 目录路径。如果我说`rm -rf $HOME`，那么当前目录 $HOME 下的所有文件和子目录都将被删除。如何删除这些不需要的目录。

```
-rw-r--r--  1 grp domain users 418051450 Apr 18 18:09 $SRCDIR
-rw-r--r--  1 grp domain users 418051450 Apr 18 18:09 $HOME 
```

还有一些目录是垃圾字符，如下例所示。

```
-rwxr-xr-x  1 grp domain users  0 Feb  7  2106 ??????w?O???*????_6??t??Ó¡?>?tP??Ñ?|?C 
```

如何删除它们？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-14T06:40:37.350

对于垃圾名称，最简单的方法是构造一个只能捕获它们的通配符。选择名称的*可读*部分（例如`_6`子字符串）并将其包装在星号中。首先尝试一下：

```
ls *_6* 
```

如果它只列出*垃圾*名称，请继续删除它：

```
rm *_6* 
```

如果它还列出了其他名称，请尝试使通配符更具体，在名称中使用其他可读字符：

```
ls *w*_6*tP*N*x* 
```

继续，直到您找到一个只匹配不需要的文件的通配符。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-03-18T05:11:03.613

确定必要文件/文件夹的 inode 数量：

```
# ls -ila 
14549980 drwxr-xr-x  3 root root       4096 Mar  5 20:45 ">?< 
```

并将其传输到`rm`：

```
find . -inum 14549980  -exec rm -ir {} \; 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-27T15:48:26.167

如果你创建一个像 --rw-rr-- 这样的目录。要删除此文件，请执行以下操作 ``rm -rf ./--rw-r-r--``

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-14T09:04:39.613

在 Linux 中尝试 zsh shell

```
[root@rhel5-8 ~]# zsh
[root@rhel5-8]~ 
```

然后使用制表符完成删除该目录。

或者如果使用 bash

```
[root@rhel5-8 ~]# cd "??????w?O???*????_6??t??Ó¡?>?tP??Ñ?|?C???????>?Ì¤-???y?X???N?x??H?????Ð§)?n?5‌​??{@?~]?" 
```

进入那个目录

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-14T06:11:41.127

只需避开美元符号。试试这样-

```
rm -rf \$HOME 
```

连`?`符号也一样。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-11-21T09:43:28.673

您可以尝试 rm -rf '$HOME' '$SRCDIR' ，因为单引号会阻止 shell 变量的扩展。尝试使用 bash 和 ksh。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-14T06:41:33.423

您可以使用**c**程序来避免 shell/转义问题。看看[这个问题](https://stackoverflow.com/questions/11007494/how-to-delete-all-files-in-a-folder-but-not-delete-the-folder-c-linux)的答案。

# email - Facebook API 返回 ID 而不是电子邮件

> ID：11027570
> 
> 赞同：0
> 
> 时间：2012-06-14T06:08:28.630
> 
> 标签：email, facebook-graph-api

我正在统一制作游戏，并且正在使用 prime31 的 facebook connect 插件。以前我正在获取 Facebook 用户的电子邮件地址，但现在当我打电话时，我得到了 Facebook ID。我用[https://developers.facebook.com/tools/explorer/?method=GET&path=me%3Ffields%3Demail](https://developers.facebook.com/tools/explorer/?method=GET&path=me%3Ffields%3Demail)检查了它，它返回了 Facebook ID。

Facebook 最近有什么改变吗？你们能告诉我现在应该如何检索电子邮件地址吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:13:35.120

这是正确的调用 - 确保您有`email` [权限](https://developers.facebook.com/docs/authentication/permissions/) （一个调用`/me/permissions`将验证）并且用户实际上列出了一个电子邮件地址 - 可能有一个非常小的数字没有。

# c++ - 将 cv::Mat 转换为 const CvMat* 或 CvMat*

> ID：11027574
> 
> 赞同：9
> 
> 时间：2012-06-14T06:08:44.300
> 
> 标签：c++, opencv

我只知道**C**语言，所以我很困惑/不理解`openCV`数据类型的语法，尤其是在`cv::Mat, CvMat*, Mat.`

我的问题是如何转换`cv::Mat`为`const CvMat`* or `CvMat*`，并且任何人都可以提供文档链接以 **了解 opencv2.4**`CvMat *mat`中的和`cv::Mat`和之间`Mat`的区别。

 **以及如何将我的 int 数据转换为 CvMat 中的浮点数据？谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-14T06:12:29.413

`cv::Mat`有一个[操作符 CvMat()](http://opencv.willowgarage.com/documentation/cpp/core_basic_structures.html?highlight=cvmat#CvMat)如此简单的分配工作：

```
cv::Mat mat = ....;
CvMat cvMat = mat; 
```

这使用相同的基础数据，因此您必须小心，`cv::Mat`不要在`CvMat`.

如果您需要在采用`CvMat`的 API 中使用`CvMat*`，则传递对象的地址：

```
functionTakingCmMatptr(&cvMat); 
```

至于 和 之间的区别`cv::Mat`，`Mat`它们是相同的。在`OpenCV`示例中，通常假设（我认为这不是一个好主意）`using namespace cv`使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-22T20:29:05.550

尤其要回答 surya 的第二个问题：

泰铢，OpenCV 上的文档不是最好的。这里是最新类型的链接： cv::Mat [http://docs.opencv.org/2.4/modules/core/doc/basic_structures.html#mat](http://docs.opencv.org/2.4/modules/core/doc/basic_structures.html#mat)较新的类型比 c 风格更现代 c++。

这里还有两个类似主题的 OpenCV 论坛答案：http: [//answers.opencv.org/question/65224/conversion-between-cvmat-and-cvmat/](http://answers.opencv.org/question/65224/conversion-between-cvmat-and-cvmat/) 和[http://www.answers.opencv.org/question/第13437章](http://www.answers.opencv.org/question/13437/difference-between-cvmat-cvmat-cvmat-and-mat/)

特别是对于转换问题（如 juanchopanza 所述）：

```
cv::Mat mat = cv::Mat(10, 10, CV_32FC1); //CV_32FC1 equals float 
                                         //(reads 32bit floating-point 1 channel)
CvMat cvMat = mat; 
```

或与

```
using namespace cv; //this should be in the beginning where you include
Mat mat = Mat(10, 10, CV_32FC1); 
CvMat cvMat = mat; 
```

注意：通常您可能会使用`CvMat*`- 但您应该考虑完全切换到较新的类型。示例（取自我的第二个链接）：

```
CvMat* A = cvCreateMat(10, 10, CV_32F); //guess this works fine with no channels too 
```

将 int 更改为 float：

```
CvMat* A = cvCreateMat(10, 10, CV_16SC1);
//Feed A with data
CvMat* B = cvCreateMat(10, 10, CV_32FC1);
for( int i=0; i<10; ++i) 
    for( int i=0; i<10; ++i) 
        CV_MAT_ELEM(*A, float, i, j) = (float) cvmGet(B, i, j);
//Don't forget this unless you want to produce a memory leak. 
cvReleaseMat(&A);
cvReleaseMat(&B); 
```

前两个示例（没有指针）很好，因为 CvMat 然后保存在堆上。`cvCreateMat(...)`分配您以后必须自行释放的内存。使用`cv::Mat`.**

# sql - 关系代数自然连接

> ID：11027577
> 
> 赞同：0
> 
> 时间：2012-06-14T06:08:53.293
> 
> 标签：sql, join, relational-algebra, natural-join

大家好，我即将参加考试，但在练习考试的两个问题上没有得到讲师的太多帮助。她已经提供了答案，但没有回答我关于答案的问题，我希望这里有人能够解释为什么答案是这样的。

考虑以下两个表 R 和 S 及其实例：

```
R       S 
A B C  D E 
a x y  x y 
a z w  z w 
b x k    
b m j    
c x y    
f g h 
```

* * *

```
a) πA(R[natural join]B=D S) 
```

答案是`(a,b,c)`，为什么不是`(a,a,b,c)`？投影是否使它与众不同？

* * *

```
b) π A(R[natural join] B<>D S) 
```

答案是`(a,b,c,f)`，为什么是`a`答案？b=d 当值是 x 和 z 时，为什么要打印出来呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:21:55.780

a) 在关系代数中，投影算子提供重复消除。在 SQL 中，这不是默认操作，但它适用于关系代数。这是我的[来源](http://www.cs.utah.edu/~lifeifei/cs5530/slides/lecture5.pdf)。目前，我不记得为什么它会重复消除，但这是我的数据库教授，他知识渊博。（我认为这是因为关系代数使用集合逻辑并且集合没有重复项。）

b) 2 个表的连接在 2 个表之间创建了一个 CROSS PRODUCT。你有 6 行和 2 行。所以叉积是 6x2 = 12 行。对于表 R 的第 1 行，您有 ax y。这将与 xy AND zw 配对，产生 [axyxy] 和 [axyzw]。第二对对这个关系代数语句有效。B 列和 D 列不匹配 x != z。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:29:00.327

```
a) πA(R[natural join]B=D S)
the answer being (a,b,c), why isn't it (a,a,b,c)? does a projection make it distinct? 
```

在关系代数中，不允许重复元组；sql（需要不同的地方）和关系代数之间的主要区别

```
b) π A(R[natural join] B<>D S) 
the answer being (a,b,c,f), why is a an answer? b=d both times when values are x and z, so why is this being printed out? 
```

自然连接操作返回 R 和 S 中所有元组组合的集合，因此在这种情况下也返回元组 (axyzw) 和 (azwxy)；因此 a 必须在结果投影中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:15:49.620

【自然连接】B=D

这不是自然连接，因为“自然连接”是一种*仅通过同名属性*连接关系的连接。您描述的构造可能在某些地方被标记/称为“等值连接”左右，但它肯定不是“自然连接”。

[自然连接] B<>D

这不是自然连接，因为“自然连接”是将参数关系的元组连接在一起的连接，*当且仅当属性值相等时*。

你被无可救药地误导和误导了。参考资料：《数据库系统简介》，CJDate。这对你的考试没有任何好处，但如果你以后想从事数据库技术的工作，记住这一点可能是值得的。

但是要回答您的实际问题（与前面的答案一致）：

a) 属性值 'a' 不能在投影结果中出现两次，因为投影产生了一个***关系***，而一个关系被定义为一个***集合***，集合不能包含重复项。

b) [non-] 自然连接包含元组 (axyzw) 和 (azwxy)。来自 R 的“第一个”元组与来自 S 的“第二个”元组，反之亦然。投影包括结果 (a)。

# iphone - 在 iPhone 上搜索应用程序的 info.plist 首选项

> ID：11027578
> 
> 赞同：0
> 
> 时间：2012-06-14T06:08:56.650
> 
> 标签：iphone, search, info.plist, springboard

我的应用程序名称是`TestApplication`我的包显示名称，我的应用程序 PRODUCTNAME 是`MyTestApplication`.

当我`Simulator/Device`使用关键字“我的”搜索我的应用程序时，它不会搜索应用程序。

如何使用关键字“我的”搜索我的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:42:32.500

经过一个小时的研究，我发现 iPhone Spotlight 搜索具有 2 个名称的应用程序 1- 捆绑显示名称 2- Apple 商店名称 因此，如果我们在 appstore MyTestApplication 中设置名称，那么使用单词“My”搜索也会搜索应用程序 TestApplication。

# ios - IOS；MKMapView currentUser 注释精度圈正在流向父视图

> ID：11027580
> 
> 赞同：0
> 
> 时间：2012-06-14T06:09:17.030
> 
> 标签：ios, mkmapview

我有一个地图视图，作为半复杂视图层次结构中的子视图。一切正常，除了精度圈，脉冲波会导致底层地图视图流血到导航栏和标签栏上，只要蓝色的用户位置图钉靠近其中一个。我已经设置了所有父视图的剪辑子视图，所以想知道还有什么问题。视图层次结构是窗口/滚动视图/内容/地图视图。谢谢。

更新：

从那以后，我尝试重新排列视图层次结构以测试各种布局，并确认所有父视图都有 clipsToBounds = YES 并且在“脉冲”发生时仍然会出血。奇怪的是，唯一受此影响的两个视图是导航栏和标签栏。不良行为是，当脉冲环在标签栏或导航栏附近扩展时，底层地图视图开始绘制在脉冲与它们相交的那些视图中的区域下方；好像它们被擦掉并暴露在它下面的地图视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:52:23.570

以为我会分享一些最近的信息，以防其他人碰巧遇到同样的问题。

就我而言，我必须将 mkmapview（内容视图）clipsToBounds 属性的父视图设置为 NO，并且一切正常。我知道，这似乎违反直觉，但这是 iOS 支持工程师提出的解决方案。从技术上讲，它不是受支持的配置，但技术工程师也表示它不应该那样流血。正如他所建议的，我为此提交了一个错误。唯一的缺点是我不得不放弃圆角和阴影；如果没有 clipsToBounds=YES，就无法做到这一点。

# java - Java中通过引用传递的新对象引用

> ID：11027582
> 
> 赞同：0
> 
> 时间：2012-06-14T06:09:22.597
> 
> 标签：java, object

1级

```
private void checkDuplicateCustomer(BulkCustomerVO bulkCustomerVO) {
    PagedDuplicateCustomerVO duplicateCustomerVO = new PagedDuplicateCustomerVO();
    duplicateCustomerVO.setCustomer(bulkCustomerVO.getCustomerVO());
    duplicateCustomerVO = getCustomerBO().getDuplicateCustomerDetails(duplicateCustomerVO);
    if (!MyUtils.isNull(duplicateCustomerVO)) {
        if (duplicateCustomerVO.isValid()) {

             // some operation
            bulkCustomerVO.setErrorDetals(...........)

        }

    }
} 
```

2 级

```
public PagedDuplicateCustomerVO getDuplicateCustomerDetails(PagedDuplicateCustomerVO pagedDuplicateCustomer) {
    PagedDuplicateCustomerVO pagedDuplicateCustomerVO = pagedDuplicateCustomer;

        // some operation that changes customerVO reference in pagedDuplicateCustomer

    }
} 
```

在上述场景中，`BulkCustomerVO`有`CustomerVO`实例。它被设置为`PagedDuplicateCustomerVO` 并作为参数传递给`getDuplicateCustomerDetails()`它正在更改的方法。这些变化会影响我的方法流程`checkDuplicateCustomer`。

我想要做的是创建一个单独的`customerVO`实例`bulkCustomerVO.getCustomerVO()`，`checkDuplicateCustomer`其中特定`getDuplicateCustomerDetails`于第二类的任何更改都不会影响我在第一类的流程。

我能做什么将所有字段从复制`bulkCustomerVO.getCustomerVO()`到 new `CustomerVO`，但是 VO 很大，我不想这样做。这将是我班上不需要的代码。

那么，我该如何处理这种情况？

编辑-我不能使用克隆因为这将导致改变我的 VO 以实现可克隆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T06:17:28.183

请参阅[http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/BeanUtils.html#copyProperties(java.lang.Object](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/BeanUtils.html#copyProperties(java.lang.Object) , java.lang.Object)

也许这就是你想要的。

===================

```
public PagedDuplicateCustomerVO getDuplicateCustomerDetails(PagedDuplicateCustomerVO pagedDuplicateCustomer) {

    CustomerVO customer = new CustomerVO();
    BeanUtils.copyProperties(customer, pagedDuplicateCustomer.getCustomerVO());
    pagedDuplicateCustomer.setCustomer(customer);
    return pagedDuplicateCustomer;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:37:11.557

我已经解决了这个问题。Bu 使用 SerializationUtils 的克隆工具。

```
duplicateCustomerVO.setCustomer((CustomerVO) SerializationUtils
                .clone(bulkCustomerVO.getCustomerVO())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T06:20:00.533

您可以尝试进行克隆。为此，您`PagedDuplicateCustomerVO`必须实现接口 Clonnable 接口。然后可以在对象上调用 clone 方法来获取浅克隆。

# iphone - 关于添加图像导入

> ID：11027584
> 
> 赞同：-1
> 
> 时间：2012-06-14T06:09:34.777
> 
> 标签：iphone, objective-c, xcode

我在 uitableview 的 didselectmethod 中执行此操作

1- `[tableView reloadData];`
2-`cell.cell_ImageView.image=[UIImage imageNamed:[arrayMainMenuOnImages objectAtIndex:indexPath.row]];`

在这 2 行之后，它给出了 exc 错误访问，请帮助我为什么会发生这种情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:45:29.953

```
//  put your code in this way  in didSelect: method

UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
NSString *imgName = [arrayMainMenuOnImages objectAtIndex:indexPath.row];
UIImage *img ;
if(imgName)
  img = [UIImage imageNamed:imgName];
else 
  img = [UIImage imageNamed:@"noImage.png"];
[cell.cell_ImageVIew setImage:img ];
[tableView reloadData]; 
```

希望它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:50:49.630

尝试这个 。您需要将图像添加到您的 cell_imageview 中，然后执行 [tableview reloaddata]

```
cell.cell_ImageView.image = [UIImage imageNamed:[arrayMainMenuOnImages objectAtIndex:indexPath.row]];
[tableView reloadData]; 
```

# c++ - 如何在 C++ 接口中处理单位

> ID：11027587
> 
> 赞同：21
> 
> 时间：2012-06-14T06:09:47.183
> 
> 标签：c++

我目前正在设计一个 API，我希望用户能够编写如下代码：

```
PowerMeter.forceVoltage(1 mV);
PowerMeter.settlingTime(1 ms); 
```

目前我们使用如下定义来做到这一点：

```
#define mV *1.0e-03 
```

这使得用户编写代码非常方便，而且可读性也很好，但当然也有缺点：

```
int ms; 
```

会抛出一些难以理解的编译器错误。所以我正在寻找更好的解决方案。

我尝试了新的 C++11 文字，但有了这个，我所能实现的就是：

```
long double operator "" _mV(long double value) {
  return value * 1e-3;
}
PowerMeter.forceVoltage(1_mV); 
```

最后，API 并不关心像 Volt 或 second 这样的单位，而只接受数字，所以我不想做任何检查你是否真的在 forceVoltage 中输入了 Volts。所以这也应该是可能的：

```
PowerMeter.forceVoltage(2 ms); 
```

除了保持定义之外还有什么想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-14T06:29:58.343

不如通过为不同的电流创建类（ms，mV）来扭转它

例如

```
PowerMeter.forceVoltage( mV(1) );  
PowerMeter.settlingTime( ms(1) ) 
```

这对用户来说非常清楚，并且可以说不难阅读，而且您将免费获得类型检查。为不同的单元提供一个通用的基类将使其更容易实现。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-14T06:32:35.350

您可以看到 Calum Grant 的库“ [C++ Units](http://calumgrant.net/units/units.html) ”作为如何实现它的一个很好的例子。该库有点过时，但仍然值得一看或可能会使用。

另外，我认为阅读以下内容可能会很有趣：“ [SI UNITS 中的应用模板元编程：基于单元的计算库](https://docs.google.com/viewer?a=v&q=cache:pnWJuvx54gwJ:oonumerics.org/tmpw01/brown.pdf%20&hl=en&pid=bl&srcid=ADGEEShDZcVw-iVlTehB9GPGpV-HBVIPhoG2TNk26L7zCLIjfU4mqhy0WX_440nIxm9NLqkPRAlNmjTHDvVSVgim5dqtZE27dptuQjmM9le3kZP-32WGAvI3xAZSInozn3a_tPw7yjaF&sig=AHIEtbQS4ob9Z2xGy1atzljibDlwBdwkLA)”

还有一个很好的库：[UDUNITS-2](http://www.unidata.ucar.edu/software/udunits/udunits-2/udunits2.html)，它：

> 包含一个用于物理量单位的 C 库以及一个单位定义和值转换实用程序。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-14T06:20:46.027

您可以对单位使用 C++11 的[编译时有理算术](http://en.cppreference.com/w/cpp/numeric/ratio)支持，而不是为单位定义文字或宏。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-14T14:05:25.393

看看[Boost.Units](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_units/Quick_Start.html)。这是一些示例代码：

```
quantity<energy>
work(const quantity<force>& F, const quantity<length>& dx)
{
    return F * dx; // Defines the relation: work = force * distance.
}

...

/// Test calculation of work.
quantity<force>     F(2.0 * newton); // Define a quantity of force.
quantity<length>    dx(2.0 * meter); // and a distance,
quantity<energy>    E(work(F,dx));  // and calculate the work done. 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-14T06:46:20.973

这就是我想出的……与 Anders K 几乎相同的想法，但是由于我编写了代码，所以我会发布它：

```
#include <iostream>

using namespace std;

class MilliVoltsValue;
class VoltsValue;

class VoltsValue
{
public:
   explicit VoltsValue(float v = 0.0f) : _volts(v) {/* empty */}
   VoltsValue(const MilliVoltsValue & mV);

   operator float() const {return _volts;}

private:
   float _volts;
};

class MilliVoltsValue
{
public:
   explicit MilliVoltsValue(float mV = 0.0f) : _milliVolts(mV) {/* empty */}
   MilliVoltsValue(const VoltsValue & v) : _milliVolts(v*1000.0f) {/* empty */}

   operator float() const {return _milliVolts;}

private:
   float _milliVolts;
};

VoltsValue :: VoltsValue(const MilliVoltsValue & mV) : _volts(mV/1000.0f) {/* empty */}

class PowerMeter
{
public:
   PowerMeter() {/* empty */}

   void forceVoltage(const VoltsValue & v) {_voltsValue = v;}
   VoltsValue getVoltage() const {return _voltsValue;}

private:
   VoltsValue _voltsValue;
};

int main(int argc, char ** argv)
{
   PowerMeter meter;

   meter.forceVoltage(VoltsValue(5.0f));
   cout << "Current PowerMeter voltage is " << meter.getVoltage() << " volts!" << endl;

   meter.forceVoltage(MilliVoltsValue(2500.0f));
   cout << "Now PowerMeter voltage is " << meter.getVoltage() << " volts!" << endl;

   // The line below will give a compile error, because units aren't specified
   meter.forceVoltage(3.0f);   // error!

   return 0;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-14T12:10:11.177

我更喜欢尽可能避免使用宏，这是一个应该可行的例子。一种为您提供正确尺寸的轻量级解决方案是：

```
static double m = 1;
static double cm = 0.1;
static double mV = 0.001;

double distance = 10*m + 10*cm; 
```

这也反映了单位是与价值相乘的物理概念。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-14T06:34:43.287

考虑`enum`为您的单位使用 an 并将其作为第二个参数传递：

```
namespace Units
{
    enum Voltage
    {
        millivolts = -3,
        volts = 0,
        kilovolts = 3
    };

    enum Time
    {
        microseconds = -6,
        milliseconds = -3,
        seconds = 0
    };
}

class PowerMeter
{
public:
    void forceVoltage(float baseValue, Units::Voltage unit)
    {
         float value = baseValue * std::pow(10, unit);
         std::cout << "Voltage forced to " << value << " Volts\n";
    }

    void settlingTime(float baseValue, Units::Time unit)
    {
         float value = baseValue * std::pow(10, unit);
         std::cout << "Settling time set to " << value << " seconds\n";
    }
}

int main()
{
    using namespace Units;
    PowerMeter meter;
    meter.settlingTime(1.2, seconds);
    meter.forceVoltage(666, kilovolts);
    meter.forceVoltage(3.4, milliseconds); // Compiler Error
} 
```

将命名空间包裹`Units`在枚举周围可以避免单位名称污染全局命名空间。以这种方式使用枚举还强制在编译时将正确的物理单元传递给成员函数。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-14T15:09:31.870

在你为任何更复杂的事情发疯之前，每当你编写将数量作为参数的新代码时，你应该像这样命名你的方法，以便它 100% 清晰：

```
PowerMeter.forceInMilliVolts( ... )
PowerMeter.settlingTimeInSeconds( ... ) 
```

同样使用具有正确名称的变量，例如：

```
int seconds(10);
int milliVolts(100); 
```

这样，您是否必须转换并不重要，您在做什么仍然很清楚，例如

```
PowerMeter.settlingTimeInSeconds( minutes*60 ); 
```

当你准备好使用更强大的东西时，如果你真的需要，但要确保你不会失去使用哪个单元的清晰度。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-14T08:05:59.090

我更喜欢 Anders K 的解决方案，但是您可以使用模板来节省一些时间，将所有单元实现为单独的类，这可能很耗时且容易出错，因为您可能需要手动编写大量代码：

```
enum Unit {
    MILI_VOLT = -3,
    VOLT = 0,
    KILO_VOLT = 3
};

class PowerMeter
{
public:

    template<int N>
    void ForceVoltage(double val)
    {
        std::cout << val * pow(10.0, N) << endl;
    };
}; 
```

像这样使用：

```
 PowerMeter pm;
        pm.ForceVoltage<MILI_VOLT>(1);
        pm.ForceVoltage<VOLT>(1);
        pm.ForceVoltage<KILO_VOLT>(1); 
```

# xampp - 在 Windows RT 上安装 localhost 服务器

> ID：11027595
> 
> 赞同：0
> 
> 时间：2012-06-14T06:10:20.203
> 
> 标签：xampp, windows-8, wamp, wampserver

我想在装有 windows RT 32 位的平板电脑上安装 localhost 服务器。我尝试为 Windows 7 安装 xampp 32 位，但没有成功。

目前是否有可用于 Windows RT 的（xampp/wamp）服务器，或者我可以通过某种方式对其进行调整以使其正常工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:40:24.403

ARM 处理器不支持 XAMPP。

# windows-phone-7 - windows phone 7中的图钉点击事件错误？

> ID：11027603
> 
> 赞同：0
> 
> 时间：2012-06-14T06:11:09.553
> 
> 标签：windows-phone-7, windows-phone-7.1

```
private void Pushpin_Tap(object sender, 
        System.Windows.Input.GestureEventArgs e)
    {
        var _ppmodel = sender as Pushpin;
        ContextMenu contextMenu = 
            ContextMenuService.GetContextMenu(_ppmodel);
        contextMenu.DataContext = _viewModel.Pushpins.Where
            (c => (c.Location 
                == _ppmodel.Location)).FirstOrDefault();
        if (contextMenu.Parent == null)
        {
            contextMenu.IsOpen = true;
        }
    } 
```

在这种情况下，我遇到了“没有定义”之类的错误。请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T07:21:24.840

确保文件中有正确的 using 语句

```
using System.Linq; 
```

# php - 我应该如何构建我的 codeigniter 控制器？

> ID：11027606
> 
> 赞同：0
> 
> 时间：2012-06-14T06:11:24.383
> 
> 标签：php, codeigniter

**手头的问题：**

我正在创建一个不超过 10 页的“微型网站”。当用户未登录时，登录表单位于主页上。这里有一个快速分解。

公共访问页面：

*   主页（非会员）
*   信息页面
*   新闻页面
*   注册页面

会员访问页面：

*   首页（会员版）
*   我的帐户页面
*   进入比赛页面

**潜在解决方案：**

我不确定我的控制器的最佳解决方案。我正在考虑使用 2 个控制器，一个公共控制器和一个成员控制器。我的默认控制器是公开的。构造函数将检查用户是否已登录，如果已登录，则将其重定向到成员控制器：

```
redirect('member') 
```

会员页面将被加载，它比公共页面有更多的链接。并且当用户点击进入比赛时，成员构造函数确保他们已登录，然后显示比赛视图。

这是应该如何获得特权访问。我还将添加一个管理页面供管理员更改奖品。所以会有3个特权。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:49:35.150

您在那里命名所有视图文件做得很好。现在，除了 2 个主视图之外，您可以为每个视图创建一个控制器，并为需要访问数据库的控制器创建一个模型。

在每个特权控制器的构造中，检查人员的访问级别。如果他们无权访问这些页面，请将它们重定向到其他地方，或者可能加载带有错误消息的视图。

与主页视图相同，只是您只是根据是否登录来决定是否加载非会员或会员主页。即你真的不需要重定向失败。

# c# - System.FormatException：字符串未被识别为有效的 DateTime

> ID：11027607
> 
> 赞同：1
> 
> 时间：2012-06-14T06:11:30.197
> 
> 标签：c#, winforms, datetime

我正在使用 C# 在 winforms 中做客户端服务器项目。客户在特定日期请求文件。客户端在 windows 7 32 位系统中运行，服务器在 windows server 2008 R2 中运行。

此代码在我的客户端中将日期时间值转换为字符串。

```
string date = dateTimePickerFrom.Value.ToString("dd/MM/yyyy HH:MM", CultureInfo.InvariantCulture); 
```

这是服务器中用于从字符串中取回日期时间值的代码

```
string dat = Encoding.ASCII.GetString(bb.ReadBytes(len));
FromDate = DateTime.ParseExact(dat, "dd/MM/yyy HH:MM", CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.None); 
```

我在服务器端收到“System.FormatException：String 未被识别为有效的 DateTime。在 System.DateTimeParse.ParseExact(String s, String format, DateTimeFormatInfo dtfi, DateTimeStyles style)”这个错误。如何解决这个问题？请提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:43:58.697

您的 ParseExact() 格式看起来 `dd/MM/yyy HH:MM`应该是`dd/MM/yyyy HH:MM`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:23:59.020

尝试这个，

```
long longVar = BitConverter.ToInt64(bb.ReadBytes(len));
DateTime dateTimeVar = new DateTime(1980,1,1).AddMilliseconds(longVar); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T06:16:55.423

为什么要在日期时间值和字符串之间转换两次？
在客户端，将数据时间值转换为字符串，然后将字符串发送到服务器。
在服务器端，您获取字符串，并将其转换回日期时间。
你为什么要进行这些转换？datetime->string->datetime，胡说八道。
您应该将日期时间直接发送到服务器，然后直接获取日期时间。我猜您正在使用套接字来执行此操作。不要让字符串打扰你。
代码如下：

```
 DateTime now = DateTime.Now;
        long l0 = now.ToBinary();
        byte [] array = BitConverter.GetBytes(l0);
        //here you can send it to the server

        //on the server
        byte[] buffer = null;  //receive bytes 
        long l1 = BitConverter.ToInt64(buffer,0);
        DateTime time = DateTime.FromBinary(l1); 
```

# android - 更改 Android 应用程序列表视图中行的背景颜色

> ID：11027610
> 
> 赞同：1
> 
> 时间：2012-06-14T06:11:48.440
> 
> 标签：android

我有一个包含多列的列表视图...想要更改选中或单击的行项目的背景颜色。参考了关于stackoverflow的各种文章，但它们似乎没有帮助......我在OnItemClick中所做的是.setBackgroundColor。不能使用选择器，因为我想记住我已经改变颜色的行的颜色变化，当应用程序重新启动时应该记住变化......我将标志值放在数据库中，并且可以在 getView 中设置颜色但是第一次怎么做？这是代码......

```
public class AdminMultiColumn extends Activity
{
    private ArrayList<HashMap<String,String>> list;
    ArrayList<String> al;
     AlertDialog.Builder alertDialogBuilder;

    public void onCreate(Bundle savedInstanceState)  
    {  
       super.onCreate(savedInstanceState);  
       setContentView(R.layout.admin_checkoutlist);  

      lview = (ListView)findViewById(R.id.admin_list);  
      populateList();  
      Admin_checkoutlist adapter = new Admin_checkoutlist(this,list);  
      lview.setAdapter(adapter);  
    }  

    private void populateList() {  

        list = new ArrayList<HashMap<String,String>>();  

        al = new ArrayList<String>();

        testday = c.get(Calendar.DAY_OF_MONTH);
        testmonth = c.get(Calendar.MONTH)+1;
        testyear = c.get(Calendar.YEAR);
        dateget = testday+"-"+testmonth+"-"+testyear;

        mdb.open();
        va.open();
        Cursor c1 = va.getNameTimeinTimeout(dateget);
        DatabaseUtils.dumpCursor(c1);
        if(c1.moveToFirst())
        {
            do{ 
                idfromdb = c1.getString(0);
                al.add(idfromdb);
                namefromdb = c1.getString(1);
                al.add(namefromdb);
                timefromdb = c1.getString(2);   
                al.add(timefromdb);
                timeoutfromdb = c1.getString(3);
                al.add(timeoutfromdb);

              }while(c1.moveToNext());
        }
        c1.close();
        va.close();
        mdb.close();
        Log.d("pavan","data retrived "+namefromdb+" "+timeoutfromdb+" "+timefromdb+" "+idfromdb);

        for(int i = 0;i<al.size();i=i+4)
        {
            temp   = new HashMap<String,String>();  
            temp.put(FIRST_COLUMN, al.get(i));  
            temp.put(SECOND_COLUMN, al.get(i+1));
            temp.put(THIRD_COLUMN, al.get(i+2));
            temp.put(FOURTH_COLUMN, al.get(i+3));

            Log.d("pavan","test here for admin");
            list.add(temp); 
        }   
    }
    //adapter class goes here////////////
    public class Admin_checkoutlist extends BaseAdapter implements OnItemClickListener   
    {

        public ArrayList<HashMap<String,String>> list;  
        Activity activity;   

        public Admin_checkoutlist(Activity activity, ArrayList<HashMap<String,String>> list) 
        {  
            super();  
            this.activity = activity;  
            this.list = list;  
        }  

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return list.size(); 
        }

        @Override
        public Object getItem(int pos) {
            // TODO Auto-generated method stub
            return list.get(pos);
        }

        @Override
        public long getItemId(int pos) {
            // TODO Auto-generated method stub
            return 0;
        }
        public class ViewHolder 
        {  
            TextView txtFirst;  
            TextView txtSecond;  
            TextView txtThird;
            TextView txtFOURTH;
        }  

        @Override
        public View getView(int position, View convertView, ViewGroup parent) 
        {   
            LayoutInflater inflater = activity.getLayoutInflater();  

            if (convertView == null)  
            {  
                convertView = inflater.inflate(R.layout.temp, null);  
                holder = new ViewHolder();

                holder.txtFirst = (TextView)convertView.findViewById(R.id.uid); 
                holder.txtSecond = (TextView)convertView.findViewById(R.id.nametext); 
                holder.txtThird = (TextView)convertView.findViewById(R.id.checkintext);
                holder.txtFOURTH = (TextView)convertView.findViewById(R.id.checkouttext);
                convertView.setTag(holder); 
                lview.setOnItemClickListener(this);     
            }  
            else  
            {  
                holder = (ViewHolder) convertView.getTag();  
            }             
            HashMap<String, String> map = list.get(position);  
            holder.txtFirst.setText(map.get(FIRST_COLUMN));  
            holder.txtSecond.setText(map.get(SECOND_COLUMN));  
            holder.txtThird.setText(map.get(THIRD_COLUMN));
            holder.txtFOURTH.setText(map.get(FOURTH_COLUMN));
            return convertView;  
        }//getview ends here.

        @Override
        public void onItemClick(final AdapterView<?> parent, final View view, int pos,
                long id) {
            // TODO Auto-generated method stub
            Object  listItem = parent.getFirstVisiblePosition()+pos+1;
            //lview.getChildAt(pos).setBackgroundColor(R.color.blue);

            view.setBackgroundColor(pos);
            idtosend = listItem.toString();

            Log.d("pavan","id is"+idtosend);

            /////alert displaing block starts here////////////////////////////////
                     alertDialogBuilder = new AlertDialog.Builder(AdminMultiColumn.this);            
                        alertDialogBuilder.setTitle("Alert");    
                        alertDialogBuilder
                            .setMessage("Check out now")
                            .setCancelable(false)
                            .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,int id) {
                                    // if this button is clicked, close
                                    // current activity
                                    Toast.makeText(getApplicationContext(), "Checkout successfull", Toast.LENGTH_LONG).show();

                                    testhour = c.get(Calendar.HOUR_OF_DAY);
                                    testmin = c.get(Calendar.MINUTE);
                                    testsec = c.get(Calendar.SECOND);
                                    timings = testhour+":"+testmin+":"+testsec;

                                        mdb.open();
                                        va.open();
                                        va.upDate(idtosend,timings);
                                        Toast.makeText(getApplicationContext(), "update the checkout options "+timings, Toast.LENGTH_SHORT).show();
                                        va.close();
                                        mdb.close();    

                                        /*Intent go = new Intent(AdminMultiColumn.this,MultiColumn.class);
                                        startActivity(go);*/
                                }
                              })
                            .setNegativeButton("No",new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,int id) {
                                    // if this button is clicked, just close
                                    // the dialog box and do nothing
                                    dialog.cancel();
                                }
                            });                  
                            // create alert dialog
                            AlertDialog alertDialog = alertDialogBuilder.create();           
                            alertDialog.show();              
                 ///////alert displaing block ends here//////////////////////////////////           
        }

    }

} 
```

我现在所做的是在 getView 方法中，采用 convertView 并将背景资源设置为一种颜色，这也不起作用......下面是代码......

```
 if(holder.txtFOURTH!=null)
   {
    convertView.setBackgroundColor(R.drawable.image_border);
   }
   else
   {
    Toast.makeText(getApplicationContext(), "test", Toast.LENGTH_SHORT).show();
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:18:55.103

有两点——

1.  `pos`不是颜色的好选择

2.  而不是`view.setBackgroundColor(pos);`起诉

> ```
> LinearLayout row = (LinearLayout)view.findViewById(R.id.list_row);
>         if(null!=row){
>             //<listAdapter>.notifyDataSetChanged();
>             row.setBackgroundResource(R.drawable.);
>         } 
> ```

*   假设您的列表行在根中具有 id 为“list_row”的 LinearLayout，请根据您的布局进行更改。

但是会出现问题，因为当您单击第二行时，它也被选中，并且更好地调用`list.notifydatasetchaged`有更多选项查看它们，可能会满足您的要求

1.  [android-selected-state-listview-示例](http://bestsiteinthemultiverse.com/2009/12/android-selected-state-listview-example/)

2.  [android-how-do-i-highlight-a-row-in-listview](https://stackoverflow.com/questions/5925892/android-how-do-i-highlight-a-row-in-listview)

3.  [在 android 中的列表视图中突出显示所选项目](https://stackoverflow.com/questions/5853719/highlighting-the-selected-item-in-the-listview-in-android)

# sql - 创建索引视图

> ID：11027617
> 
> 赞同：2
> 
> 时间：2012-06-14T06:12:24.250
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我的表结构如下：

```
MyTable (ID Int, AccID1 Int, AccID2 Int, AccID3 int)

 ID      AccID1      AccID2      AccID3
----    --------    --------    --------
  1        12          2          NULL
  2        4           12           1
  3       NULL        NULL          5
  4        7          NULL          1 
```

我想用以下输出创建索引视图：

```
 ID    Level     Value
----   -----    -------
 1       1         12
 1       2         2 
 2       1         4
 2       2         12
 2       3         1
 3       3         5
 4       1         7
 4       3         1 
```

编辑 ：

我的桌子非常大，我想有以上的输出。我可以得到我的查询，如下所示：

```
Select  ID,
        Case StrLevel
            When  'AccID1' Then 1
            When  'AccID2' Then 2
            Else 3
        End AS [Level],
        AccID as Value
From    (
        Select A.ID, A.AccID1, A.AccID2, A.AccID3
        From MyTable A
        )as p
UNPIVOT (AccID FOR [StrLevel] IN (AccID1, AccID2, AccID3)) AS unpvt 
```

或者

```
Select *
from (
        select MyTable.ID,
                num.n as [Level],
                Case Num.n
                    When 1 Then MyTable.AccID1
                    When 2 Then MyTable.AccID2
                    Else MyTable.AccID3
                End AS AccID
        from myTable
        cross join (select 1
                    union select 2
                    union select 3)Num(n)
    )Z
Where Z.AccID IS NOT NULL 
```

或者

```
 Select  A.ID,
            2 AS [Level],
            A.AccID1 AS AccID
     From MyTable A
     Where A.AccID1 IS NOT NULL

    Union

    Select  A.ID,
            2 AS [Level],
            A.AccID2
     From MyTable A
     Where A.AccID2 IS NOT NULL

    Union

    Select  A.ID,
            3 AS [Level],
            A.AccID3
     From MyTable A
     Where A.AccID3 IS NOT NULL 
```

但是上面的查询很慢，我希望索引视图有更好的性能。在索引视图中我不能使用`UNION`or `UNPIVOT`or`CROSS JOIN`在索引视图中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:29:20.487

如果您创建了一个 Numbers 表来基本上完成您的非法工作怎么办`CROSS JOIN`？

```
Create Table Numbers (number INT NOT NULL PRIMARY KEY) 
Go

Insert Numbers 
Select top 30000 row_number() over (order by (select 1)) as rn
from sys.all_objects s1 cross join sys.all_objects s2
go

Create view v_unpivot with schemabinding
as  
Select MyTable.ID,
        n.number as [Level],
        Case n.number
            When 1 Then MyTable.AccID1
            When 2 Then MyTable.AccID2
            Else MyTable.AccID3
        End AS AccID
From dbo.Mytable
Join dbo.Numbers n on n.number BETWEEN 1 AND 3 
go

Create unique clustered index pk_v_unpivot on v_unpivot (ID, [Level]) 
go

Select 
  ID,
  [Level],
  AccID
From v_unpivot with (noexpand)
Where AccID IS NOT NULL 
Order by ID, [Level] 
```

必须是查询的`WHERE AccID IS NOT NULL`一部分，因为索引视图中不允许派生表。

# php - 使用面向对象编程将值插入数据库

> ID：11027619
> 
> 赞同：2
> 
> 时间：2012-06-14T06:12:29.153
> 
> 标签：php

> **可能重复：**
> [如何使用已弃用的 mysql_* 函数成功重写旧的 mysql-php 代码？](https://stackoverflow.com/questions/10919277/how-to-successfully-rewrite-old-mysql-php-code-with-deprecated-mysql-functions)

我无法将值插入到数据库中。但是我也没有收到任何错误消息。

```
<html>
<body>
<form action="database.php" method="post">
Name : <input type ="text" name = "name"/>
Number  :<input type ="text" name = "number"/>
<input type ="submit" value = "submit"/>
</form>
</body>
</html> 
```

数据库.php

```
<?php
class Database
{
    var $host;
    var $user;
    var $pass;
    var $data;
    var $con;
    var $table;
    var $db;

    public function controls()
    {
        $this->host="localhost";
        $this->user="cgiadmin";
        $this->pass="cgi";
        $this->data="j2";
    }

    public function connection()
    {
        $this->con="mysql_connect($this->host,$this->user,$this->pass)";
    }
    public function tablename()
    {
        $this->table="Insert into employee(name,number) values('$_POST[name]','$_POST[number]')";
    }
    public function databaseconnection()
    {
        $this->db="mysql_select_db($this->data,$this->con)";
    }

}
$name=new Database;
$name->connection();
if(!($name->con))
{
    echo "'Error: ' . mysql_error()";
}

$name->databaseconnection();
$name->tablename();

echo "thanks for taking the survey";

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T07:03:01.683

试试这个...

修改 tablename() 函数

```
public function tablename($nam,$num)
    {
        $this->table=mysql_query("INSERT INTO employee(name,number) VALUES ('$nam','$num')");
    } 
```

获取值并调用 tablename() 函数

```
$name=new Database;
$name->connection();
if(!($name->con))
{
    echo "'Error: ' . mysql_error()";
}

$name->databaseconnection();

$nam=$_POST[name];
$num=$_POST[number];
$name->tablename($nam,$num);

echo "thanks for taking the survey"; 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-14T06:16:55.753

你需要一些魔法 :) 阅读php 中的[引号](http://www.trans4mind.com/personal_development/phpTutorial/quotes.htm)

```
<?php
class Database
{
    var $host;
    var $user;
    var $pass;
    var $data;
    var $con;
    var $table;
    var $db;

    public function controls()
    {
        $this->host="localhost";
        $this->user="cgiadmin";
        $this->pass="cgi";
        $this->data="j2";
    }

    public function connection()
    {
        $this->con = mysql_connect($this->host,$this->user,$this->pass);
    }
    public function tablename()
    {
        $this->table=mysql_query("INSERT INTO employee(name,number) VALUES ('".$_POST[name]."','".$_POST[number]."')");
    }
    public function databaseconnection()
    {
        $this->db=mysql_select_db($this->data,$this->con);
    }

}
$name=new Database();
$name->controls();
$name->connection();
if(!($name->con))
{
    echo 'Error: ' . mysql_error();
}

$name->databaseconnection();
$name->tablename();

echo "thanks for taking the survey";

?> 
```

# ruby-on-rails - rails：从父（主题）控制器更新子（帖子）导致的批量分配错误（编辑视图）

> ID：11027621
> 
> 赞同：1
> 
> 时间：2012-06-14T06:13:00.630
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-forms, mass-assignment

我正在尝试编辑一个有很多帖子的主题。主题的编辑页面具有可以编辑的主题`name`和帖子。`content`

批量分配错误发生在 topic_controller.rb, `update`method, 中`post.update_attributes(params[:post])`。

如何避免批量分配错误。

主题.rb

```
class Topic < ActiveRecord::Base
  has_many :posts, :dependent => :destroy
  belongs_to :forum
  accepts_nested_attributes_for :posts, :allow_destroy => true
  attr_accessible :name, :last_post_id, :posts_attributes
end 
```

post.rb

```
class Post < ActiveRecord::Base
  belongs_to :topic
  attr_accessible :content
end 
```

主题控制器.rb

```
def update
  @topic = Topic.find(params[:id])
  post = @topic.posts.first
  if @topic.update_attributes(params[:topic]) && post.update_attributes(params[:post])
    topic = Topic.find(@post.topic_id)
    flash[:success] = "Success!"
    redirect_to topic_posts_path(topic)
  else
    render 'edit'
  end
end 
```

意见/主题/edit.html.erb

```
<%= form_for @topic do |f| %>
  <!-- render 'shared/error_messages_topic' -->

  <%= f.label :name %>
  <%= f.text_field :name %>

  <%= f.fields_for @topic.posts.first do |post| %>
    <%= render :partial => "posts/form", :locals => {:f => post} %>
  <% end %>

  <%= f.submit "Edit", class: "btn btn-large btn-primary" %>
<% end %> 
```

意见/帖子/_form.html.erb

```
<%= f.label :content %>
<%= f.text_area :content %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:27:40.307

在更新方法中，您不必更新两个模型的属性，而是`if @topic.update_attributes(params[:topic]) && post.update_attributes(params[:post])`应该这样做，`if @topic.update_attributes(params[:topic])`它只会自动更新帖子。

并将您的视图从这里更改`<%= f.fields_for @topic.posts.first do |post| %>`为`<%= f.fields_for :posts, @topic.posts.first do |post| %>`它会正常工作。

有关更多信息，请阅读此[http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)

# mysql - mysql 在删除原始数据时触发

> ID：11027622
> 
> 赞同：0
> 
> 时间：2012-06-14T06:13:08.053
> 
> 标签：mysql, triggers

我有两个表作为学生和证书，从学生表中删除学生时，我需要从证书表中删除与特定学生相关的证书。我对mysql触发器不太熟悉。请帮助我。

这是我尝试过的，但我不确定它是否正确

```
DELIMITER $$  
CREATE TRIGGER delCerts AFTER DELETE ON students
FOR EACH ROW
BEGIN
DELETE FROM certificates as certs WHERE certs.stCode = students.stCode;
END;
$$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:25:52.967

在 InnoDB 数据库中，您可以通过在证书表中使用外键来实现它：

```
idStudent INT NOT NULL,
FOREIGN KEY (idStudent) REFERENCES Students (id)
  ON DELETE CASCADE
  ON UPDATE CASCADE 
```

当您从 stuends 表中删除学生时 - 所有相关证书也将被删除。我认为它比触发器更好，因为如果您或某人将禁用触发器（意外或故意），您的数据库将不一致。

# apache - Apache2 Ubuntu 中的多个虚拟主机

> ID：11027633
> 
> 赞同：1
> 
> 时间：2012-06-14T06:14:14.690
> 
> 标签：apache

我试图在 apache 中配置一个新的虚拟主机。我已经复制了默认值。更新了路径。conf看起来像这样

```
 <VirtualHost *:8081>
        ServerAdmin webmaster@localhost

        DocumentRoot /home/ubuntu/video
        <Directory />
                Options FollowSymLinks
                AllowOverride All
        </Directory>
        <Directory /home/ubuntu/video>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride All
                Order allow,deny
                allow from all
        </Directory>

        ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
        <Directory "/usr/lib/cgi-bin">
                AllowOverride None
               Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
                Order allow,deny
                Allow from all
         </Directory>

        ErrorLog /home/ubuntu/video/error.log

        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn

        CustomLog /home/ubuntu/video/access.log combined

    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

</VirtualHost> 
```

我运行了命令

```
sudo a2ensite video 
```

这给出了虚拟主机成功添加并将在重新加载时运行的消息。但我无法访问相同的。我已经检查了`/home/ubuntu/video`error.log、access.log 文件的创建路径。我无法找到解决方案和问题。如果有人有同样的问题，我在互联网上搜索。

以下博客文章：[向 Ubuntu Apache 添加虚拟主机](http://brucewampler.wordpress.com/2009/02/28/adding-virtual-hosts-to-ubuntu-apache/)，在其更新中说我们不能创建多个虚拟主机。我已经安装了一个虚拟主机。这是否意味着无法在 Ubuntu 中为 apache 配置第二个虚拟主机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:36:32.473

阅读[这些说明](http://httpd.apache.org/docs/2.2/vhosts/examples.html#port)。

> 如果您尝试`<VirtualHost name:port>`不使用该指令`NameVirtualHost name:port`或尝试使用该`Listen`指令，您的配置将不起作用。

因此，请确保您在`<VirtualHost>`标签之外有这些指令：

```
Listen 8081
NameVirtualHost *:8081 
```

您还可以添加：

```
ServerName www.example.com 
```

到你的`VirtualHost`部分。

# azure - 我可以将我的域名指向 Azure 网站吗？

> ID：11027635
> 
> 赞同：39
> 
> 时间：2012-06-14T06:14:28.573
> 
> 标签：azure, azure-web-app-service

在当前的技术预览版中，Azure 允许您创建 10 个 ASP.NET 网站。他们被赋予了诸如[http://yourappname.azurewebsites.net](http://yourappname.azurewebsites.net)之类的域。目前有没有办法将域名指向该网站？或者有没有计划在未来支持这个？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-14T06:21:38.353

**2012 年 9 月 18 日更新：** Windows Azure 网站层：

*   免费：允许您测试网站功能
*   共享：廉价托管（每月免费 5 GB），同时支持**CNAME**、**A-Records**和**裸域**。
*   保留：与共享相同，但您将获得一个专用 VM

在 Scott Guthrie 的帖子中阅读所有相关信息：[宣布：Windows Azure 网站的重大改进](http://weblogs.asp.net/scottgu/archive/2012/09/17/announcing-great-improvements-to-windows-azure-web-sites.aspx)

**原答案：**

目前这仅适用于**保留**实例（使用 CNAME），这意味着您可以创建的免费站点（共享）是不可能的：

> 您只能在保留模式下使用自定义域。您不能像在 Web 角色中那样设置 CNAME，因为多个站点共享相同的 IP 地址。切换到保留模式并在配置中设置您的 CNAME，它应该可以工作。

[http://blog.ntotten.com/2012/06/07/10-things-about-windows-azure-web-sites/](http://blog.ntotten.com/2012/06/07/10-things-about-windows-azure-web-sites/)

微软确认他们将在未来添加支持共享站点：

[https://twitter.com/scottgu/status/210972290719031298](https://twitter.com/scottgu/status/210972290719031298)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-06-29T03:21:29.787

快进两年，仍然无法将 CNAME 定向到 Azure 免费网站。原因是商业而非技术。MS说这是不可能的，因为多个站点共享同一个IP。但不知道为什么我在 GoDaddy 有这个专用服务器，它有一个 IP，但托管 7 个不同的域 :-) 所以这不是技术原因。当然，如果他们开始允许，没有人愿意订阅付费版本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-18T03:55:37.407

就其价值而言，它现在（最终）在共享和保留模式下以每月 10 美元左右的价格提供）。在裸域的小 DNS 舞蹈之后，我已经对其进行了测试，它运行良好。对于我运行的一些小型站点，这是 Azure 所缺少的部分。

顾有所有信息：[http ://weblogs.asp.net/scottgu/archive/2012/09/17/announcing-great-improvements-to-windows-azure-web-sites.aspx](http://weblogs.asp.net/scottgu/archive/2012/09/17/announcing-great-improvements-to-windows-azure-web-sites.aspx)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-17T05:50:06.990

您很快就可以使用自定义域，而无需将您的计划升级到 RESERVED。我们正在引入一种新的共享模式。新的共享模式会有些成本，但比保留模式要少很多，而且会支持自定义域。请尽快返回[http://www.windowsazure.com/en-us/](http://www.windowsazure.com/en-us/)查看更多信息。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-14T06:49:25.867

正如 Sandrino 所提到的，这仅适用于保留实例。

不确定 Scott Guthrie的[回答](https://twitter.com/scottgu/status/210972290719031298)。检查这个[线程](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/92fa0be7-7c00-4dad-ac4a-1df73dbd49bd)。
据说目前没有计划支持共享实例的自定义域。
它还包含对斯科特的回答发表评论的请求。

更新：
它可能是收费的（相同的[线程](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/92fa0be7-7c00-4dad-ac4a-1df73dbd49bd)）

# axapta - Axe 2009 代码中的工作日扣除

> ID：11027641
> 
> 赞同：1
> 
> 时间：2012-06-14T06:15:13.077
> 
> 标签：axapta, dynamics-ax-2009, x++

我们在表格字段中有一个起始日期和截止日期。

我们通过使用 From Date 中的 To date 减号得到一个 int 值（Tot days）。

Totdays = Todate - FromDate；

到这里为止都很好，但是如果我们在从 date 到 Todate 之间有工作日，就会出现问题。

如何编写 X++ 代码以在范围内扣除工作日并根据工作日获取 TotDays。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:14:25.007

两个日期之间的天数不包括周六和周日：

```
static void WorkDayDiff(Args _args)
{
    int i;
    Days workDayDiff(date d1, date d2)
    {
        Days y1 = dayofwk(d1);          // Day of week 1
        Days y2 = dayofwk(d2);          // Day of week 2
        date t1 = d1 - y1;              // Sunday before d1
        date t2 = d2 - y2;              // Sunday before d2
        Days y3 = (t2 - t1) div 7 * 5;  // Work days between Sundays
        Days y4 = min(y1-1,5);          // Work days before d1
        Days y5 = min(y2,5);            // Work days after t2
        return y3 - y4 + y5 - 1;        // Work days between d1 and d2
    }
    ;
    setprefix(strFmt("Today %1 %2", today(), dayname(dayofwk(today()))));
    for (i = -10; i <= 10; i++)
        info(strFmt("Diff %1 %2 = %3", today()+i, dayname(dayofwk(today()+i)), int2str(workDayDiff(today(), today() + i))));
} 
```

如果 d2 小于 d1，则计数为负数，但这可能不是您所期望的。

# php - 如何将 HTML 页面集成到 WordPress 中？

> ID：11027642
> 
> 赞同：5
> 
> 时间：2012-06-14T06:15:15.577
> 
> 标签：php, wordpress, content-management-system, html-content-extraction

我有一个 HTML(index.html) 页面，以及其中使用的名为 images、css、js 的文件夹。

现在我必须在 WordPress 中执行此操作。是否有任何插件可以将 Html 转换为 WordPress 或在 WordPress 中执行此操作的任何其他方式？请帮助我.. 我是 WordPress 的初学者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T04:20:45.600

我不确定将 HTML 页面实现为 WordPress 主题的直接方法，但如果您已经为您的网站制作了`header`文件`footer`，那么您需要做的就是将它们转换为与 WordPress 兼容。

你应该参考[codex](http://codex.wordpress.org)。

您还可以选择[此处](http://vandelaydesign.com/blog/wordpress/free-frameworks/)列出的任何 WordPress 框架。

如果您了解基本的 PHP，WordPress 主题很容易理解。它有一组文件，如

*   header.php // 头文件
*   footer.php // 页脚文件
*   index.php // 索引文件
*   page.php // 用于您的 WP 页面
*   single.php // 用于您的 WP 帖子
*   和其他一些文件

仔细阅读法典，很快就会掌握它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T00:37:26.317

你需要[http://themematcher.com/](http://themematcher.com/)

它会自动获取您的网站、样式、图像等，并为您创建一个 wordpress 主题。看看这个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T13:02:10.060

搜索 HTML 到 WordPress 主题转换，你可以找到很多好的教程。

检查这篇文章： [http ://themefoundry.com/blog/html-wordpress/](http://thethemefoundry.com/blog/html-wordpress/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-12T16:23:55.030

其实只有三种方式：

1.  聘请自由职业者
2.  参考[http://codex.wordpress.org/手动转换](http://codex.wordpress.org/)
3.  使用自动转换器。市场上最好的一个是 [https://htmltowordpress.io](https://htmltowordpress.io)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-03T12:41:40.013

这是完整解决此问题的链接。 [http://wordpress.org/support/topic/how-to-integrate-htmlphp-page-to-wordpres?replies=6](http://wordpress.org/support/topic/how-to-integrate-htmlphp-page-to-wordpres?replies=6)

确保在您选择的主题文件夹顶部的 index.php 页面中添加 /* 模板名称：自定义页面模板 */ 一段代码，而不是在您的主 index.php 文件中。

# c# - 将数据保存到已从 Excel 文件中读取的变量中

> ID：11027644
> 
> 赞同：0
> 
> 时间：2012-06-14T06:15:27.430
> 
> 标签：c#

我用cSharp写了一个代码。它是一个控制台应用程序。我有一个包含一些数字数据的 excel 文件。我的应用程序读取 excel 文件并通过消息框显示每个单元格中的数据。例如，如果第一个单元格数据为 5，则消息框显示 5。当我单击消息框中的确定按钮时，消息框显示下一个单元格的下一个数据。

我希望从 excel 文件中读取的数据保存在某种变量中，以便它可以用于进一步的操作，例如加法或乘法或任何需要的操作。我该怎么做？任何帮助都会有很大帮助。

发布我的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data;
using System.Drawing;
using System.ComponentModel;
using Excel = Microsoft.Office.Interop.Excel;
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Excel.Application xlApp = new Excel.Application();
            Excel.Workbook xlWorkbook = xlApp.Workbooks.Open(@"D:/A.xlsx");
            Excel._Worksheet xlWorksheet = xlWorkbook.Sheets[1];
            Excel.Range xlRange = xlWorksheet.UsedRange;
            int rowCount = xlRange.Rows.Count;
            int colCount = xlRange.Columns.Count;
            for (int i = 1; i <= rowCount; i++)
            {
                for (int j = 1; j <= colCount; j++)
                {
                    MessageBox.Show(xlRange.Cells[i, j].Value2.ToString());
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:37:48.930

一种方法是创建一个类似这样的类

```
public class MyData
{
    public int column { get; set; }
    public int row { get; set; }
    public string data { get; set; }

}

 List<MyData> listdata = new List<MyData>();
         for (int i = 1; i <= rowCount; i++)
            {
                for (int j = 1; j <= colCount; j++)
                {
                    MyData mdata = new MyData();
                    MessageBox.Show(xlRange.Cells[i, j].Value2.ToString());
                    mdata.column=j;
                    mdata.row=i;
                    mdata.data=xlRange.Cells[i, j].Value2.ToString();
                    listdata.Add(mdata);
                }
            } 
```

然后您可以通过列表搜索并根据行列找到您想要的特定值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:21:56.133

您可能需要创建类型类型的集合，或者您可能必须编写自定义类型，就像在可以保存要从 excel 读取的数据的类中一样。

在 for 循环中，实例化集合或自定义类型，读取数据并输入集合/自定义类型。

# java - 将数组传递给方法（Java）

> ID：11027645
> 
> 赞同：0
> 
> 时间：2012-06-14T06:15:42.953
> 
> 标签：java

我有一个程序，它接受一个表示数组索引的数字和一个字符串来替换与索引对应的数组元素。

这是我的代码：

```
public static void main(String args[]){

    String names[]={"Alvin", "Einstein", "Ace", "Vino", "Vince"};

          for(int i=0; i<names.length;i++)
                 System.out.println(i + " - " + names[i]);

    replaceArrayElement(names);
}

   public static void replaceArrayElement(String name[]){

       int index = 0;
       String value = "";

       Scanner scan = new Scanner(System.in);

       System.out.print("\nEnter the index to be replaced:");
       index = scan.nextInt();

       if(index<name.length){

           System.out.print("Enter the new value:");
           value = scan.nextLine();

           name[index] = scan.nextLine(); 

           System.out.println("\nThe new elements of the array are");

           for(int j=0; j<name.length;j++)
               System.out.println(name[j]);
       } 
       else{     
            System.out.println("Error!");    
       }  
   } 
```

我需要做的是将 int 索引变量和 String 值变量作为参数放入方法 replaceArrayElement 中。但我不知道如何调用具有不同数据类型参数的方法。有人可以告诉我怎么做吗？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T06:18:44.140

好吧，尚不清楚您从哪里获取要传递的值，但这是您声明该方法的方式：

```
public static void replaceArrayElement(String[] name, int index, String value) 
```

你可以这样称呼它：

```
// Get the values from elsewhere, obviously
replaceArrayElement(array, 5, "fred"); 
```

请注意，我使用了 - 而`String[] name`不是`String name[]`- 虽然后一种语法是*允许*的，但出于风格问题，强烈建议不要使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:22:09.410

如下声明 replaceArrayElement -

```
public static void replaceArrayElement(int index, String value, String[] name) 
```

并将其称为 -

```
replaceArrayElement(2, "Einstein2", names); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T06:26:17.550

```
 public static void main(String args[]){

String names[]={"Alvin", "Einstein", "Ace", "Vino", "Vince"};

          for(int i=0; i<names.length;i++)
                 System.out.println(i + " - " + names[i]);

    replaceArrayElement(3,"alpesh",names);
}

   public static void replaceArrayElement(int index, String replacename, String names[]){

       if(index<names.length){

           names[index] = replacename;

           System.out.println("\nThe new elements of the array are");

           for(int j=0; j<names.length;j++)
               System.out.println(names[j]);
       } 
       else{     
            System.out.println("Error!");    
       }  
   } 
```

# wordpress - 老用户可以登录新的wordpress安装吗

> ID：11027652
> 
> 赞同：0
> 
> 时间：2012-06-14T06:16:55.893
> 
> 标签：wordpress, login, salt, wordpress-login

我在 wordpress 上有一个正在运行的网站，该网站已被黑客入侵，黑客更改了一些文件，包括 wp-config.php 文件。现在我想安装新版本的 wordpress，安装新的 wordpress 意味着新的密钥和盐。老用户可以使用相同的旧密码登录我的新 wordpress 网站吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:48:01.830

如果他更改了`wp-congfig.php`文件，那么他可以通过 cpanel 或 ftp 访问您的服务器。因此通过更改 WordPress 用户名/密码或重新安装 WordPress 不会影响黑客。因为 wp-config.php 文件在根文件夹中，而不是在主题文件夹中。

**解决方案：**

更改所有 cPanel 和 FTP 的密码。

一旦您重新安装了新的 WordPress 版本并使用相同的旧 wp 数据库，那么您所有的旧 WordPress 用户都可以使用旧用户名和密码登录您的网站。

# javascript - 使用 Javascript 的 div 布局

> ID：11027655
> 
> 赞同：0
> 
> 时间：2012-06-14T06:17:11.300
> 
> 标签：javascript, jquery, css, jquery-ui

使用 Javascript 的 div 布局

如果我单击 + 它应该打开，然后再次单击 - 它应该关闭它工作正常，但我需要的是，如果有更多 div 如何在运行时处理它们。

```
<html>
<head>
<script src="jquery-1.7.1.js"></script>
<script src="script.js"></script>

<style type="text/css">
#widnow{
width:100%;
border:solid 1px;
    float:left;
}

#title_bar{
background: #FEFEFE;
height: 25px;
width: 100%;
}
#button{
border:solid 1px;
width: 25px;
height: 23px;
float:right;
cursor:pointer;
}
.box{
height: 50%;
 width: 50%;
background: #DFDFDF;
float:left;
}
#title_bar1{
background: #FEFEFE;
height: 25px;
width: 100%;
}
#button1{
border:solid 1px;
width: 25px;
height: 23px;
float:right;
cursor:pointer;
}
.box1{
height: 50%;
width: 50%;
background:#C0C0C0;
float:left;
}

</style>
</head>
<body>

<div id="widnow">

<div class="box" >
<div id="title_bar">

        <div id="button">+</div>
</div>
</div>
<div  class="box1">
    <div id="title_bar1">
            <div id="button1">-</div>
    </div>
</div>
</div>

</body>

</html> 
```

脚本.js

```
 jQuery().ready(function() {

$("#button").click(function(){
if($(this).html() == "-"){
    $(this).html("+");
    $( ".box" ).css( "width","50%" );
    $( ".box1" ).show();

}
else{
    $(this).html("-");
    $( ".box" ).css( "width","100%" );
     $( ".box1" ).hide();
}

});

        }); 
```

请提出可以帮助我解决问题的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:21:04.563

不要对 div 的选择器进行硬编码。通过这种方式，您可以将其扩展到单个 div 之外。

使用这样的东西：

```
$('button').on('click',function(){
    $(this).parent('div').css({'width' : '50%'});
}); 
```

[**例子**](http://jsfiddle.net/Xk34w/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:20:29.633

尝试为每个 div 元素赋予不同的 id，并赋予类并使用 id (#) 而不是类 (.) 执行 jQuery 函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T06:25:10.047

使用相对路径/例如

```
$(this).parent().css("width","50%"); 
```

因此，您始终为包含已单击 (+/-) 元素的框设置样式。

您还需要调整 $(".box1") 显示/隐藏代码；正如 Pulkit 所说 - 你应该使用类而不是 id。（选择父级下面的类（“box1”）的子级是：

```
$(this).parent().children("#box1") 
```

# c# - 实体框架代码首先保存后不延迟加载

> ID：11027657
> 
> 赞同：6
> 
> 时间：2012-06-14T06:17:16.540
> 
> 标签：c#, .net, entity-framework-4, ef-code-first, lazy-loading

我的数据库中有一个查找表和一个数据表。我将以性别和人物为例。假设性别表如下所示：

```
Id         Code
1          Male
2          Female 
```

person 表如下所示：

```
Id         Name             GenderId
1          Bob              1
2          Jane             2 
```

我首先在 EF 代码中对这两个表进行了建模，如下所示：

```
public class Gender
{
    public int Id {get;set;}
    public string Code {get;set;}
}

public class Person
{
    public int Id {get;set;}
    public string Name {get;set;}
    public int GenderId {get;set;}

    public virtual Gender {get;set;}
} 
```

如果我已经在数据库中读取了一个人，那么我可以毫无问题地访问 person.Gender.Code。如果我这样做：

```
var person = new Person
             {
                 Name = "Bob",
                 GenderId = 1,
             };

context.People.Add(person);
context.SaveChanges();

var code = person.Gender.Code; 
```

然后它将正确保存，但由于性别为空而在最后一行失败。如果我然后打开一个新上下文并加载保存的实体，那么最后一行工作正常。有没有一种方法可以在保存后直接访问性别，就好像我刚刚从数据库中加载了实体一样？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T06:36:42.017

您的问题是，当您使用`new Person()`它时，它只会创建一个不知道如何获取它的`Gender`属性的 POCO 对象。因此，要使延迟加载工作，您需要[代理](http://blogs.msdn.com/b/adonet/archive/2011/02/02/using-dbcontext-in-ef-feature-ctp5-part-8-working-with-proxies.aspx)。

[您可以使用DbSet.Create()](http://msdn.microsoft.com/en-us/library/gg696136%28v=vs.103%29.aspx)创建您的人作为代理：

```
var person = context.People.Create();
person.Name = "Bob";
person.GenderId = 1;

context.People.Add(person);
context.SaveChanges(); 
```

# .net - 使用 Task 进行异步操作，但 UI 仍然无响应

> ID：11027660
> 
> 赞同：0
> 
> 时间：2012-06-14T06:17:46.117
> 
> 标签：.net, wpf, vb.net, task-parallel-library

我有一个 WPF 应用程序，我必须在其中执行一项长时间运行的任务（基本上是从网络读取）。只是为了给你一个快照我在按钮点击时做以下事情

```
 Dim t As Task(Of String) = Task.Factory.StartNew(Of String)(Function()
                                                                        'Thread.sleep is simulating long running task that will make UI unresponsive
                                                                        Thread.Sleep(10000)
                                                                        Return "Hello world from async task"
                                                                    End Function)

        TextBlock1.Text = t.Result 
```

我不能使用基于事件的异步方法，因为读取 API 实际上存在于我在我的程序中引用的 dll 中，其中包含一个函数`Public function ReadFromNetwork() as String`。此 API 正在对网络进行异步调用以读取长字符串并返回 UI。所以，简而言之，我在做`TextBlock1.Text = ExternalDll.ReadFromNetwork()`。

但问题是即使我使用任务异步，用户界面仍然没有响应。

您能否检测一下我是否在代码中遗漏了某些内容。

任何帮助/建议将不胜感激 Thanx 提前

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T06:21:29.067

你在`t.Result`开始任务后就行了。这将使线程阻塞，直到任务完成 - 所以所有的异步都是徒劳的。

您应该使用 附加一个延续[`Task.ContinueWith`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.continuewith.aspx)，并将使用任务结果的代码放入该延续中。这将允许 UI 在任务执行时返回处理事件，然后在任务完成时触发您的 continuation。传入[`TaskScheduler.FromCurrentSynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.fromcurrentsynchronizationcontext.aspx)以确保继续在正确的线程上触发。

请注意，在 VB/C# 的下一个版本中，所有这些都将使用异步方法变得更加容易*。*如果您能够使用 .NET 4.5 候选版本，您应该考虑立即尝试 - 它会让您的生活变得更加简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T06:27:51.500

您正在调用`t.Result`这将强制任务执行。您应该使用`ContinueWith`异步获取结果。

```
 var action = delegate(Task<string> s)  // to avoid cross thread exception 
        {
            Action ac = delegate() { TextBlock1.Text = s.Result; };
            this.Dispatcher.Invoke(ac);

        };

      t.ContinueWith(action); 
```

请原谅我使用 c#

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T06:21:21.330

我认为应该是这样的

```
t.ContinueWith((result) => { TextBlock1.Text = result.Result}); 
```

还是你在发帖时把它弄松了？您可能必须使用正确的调度程序，除此之外这应该可以解决问题

# jsf - Netbeans Maven 热部署

> ID：11027661
> 
> 赞同：0
> 
> 时间：2012-06-14T06:17:50.977
> 
> 标签：jsf, netbeans, glassfish

所以我已经将一个项目导入netbeans。我正在使用 jsf 和 xhtml 页面。我已经使用 maven 在 Glassfish 上部署了该项目。

当我对 xhtml 页面进行更改时，它不会反映在 UI 上。所以我去了项目属性->编译->在保存时编译应用程序和...。

但是我对代码所做的任何更改都没有反映在 UI 中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T23:39:11.117

[JRebel](http://zeroturnaround.com/jrebel)可以在这里提供帮助。它处理 Java 代码更改以及静态资源。它甚至与所有主要框架集成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T15:30:39.330

```
<context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
</context-param> 
```

设置你的 PROJECT_STAGE = Development

# c# - Linq 与同一天的日期比较

> ID：11027668
> 
> 赞同：0
> 
> 时间：2012-06-14T06:18:26.713
> 
> 标签：c#, linq, search, datetime

我有这个查询：

```
var q = from p in DB.treatments
    where p.start >= start && p.end <= end
    select p; 
```

在数据库中，最后说 06/14/2012 12:00 am 这应该包括整个 6 月 14 日，就在 6 月 15 日之前。

因此，如果我使用 06/14/2012 04:00 pm 发送结束参数，它不会返回任何内容，只有当它是 06/15/2012 但我希望它在 14 日而不是 15 日搜索一整天。

因此，我想搜索14天的整天，而DateTime选择14时，DateTime将返回此06/14/2012 12:00 AM。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:49:32.853

您需要比较 和的`Date`属性`start``end`

```
 var q = from p in DB.treatments
         where p.start >= start.Date && p.end <= end.Date
         select p; 
```

如果`start.Date`是，`6/14/2012 4:00 PM`那么您将只是在`6/14/2012`使用该`Date`属性时进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:12:59.953

您需要与.Date 进行比较。如果您正在查询数据库，则 .Date 函数将不起作用，因为它无法转换为 SQL。

LINQ to Objects 使用

```
var q = from p in DB.treatments
    where p.start >= start.Date && p.end <= end.Date
    select p; 
```

对于 LINQ to SQL 或 LINQ to ENTITIES 使用

```
var startDate = start.Date;  
var endDate = end.Date;  
var q = from p in DB.treatments  
        where p.start >= start && p.end <= end  
        select p; 
```

**更新：**如果正在使用 .NET 4.0+，您可以使用实体函数[TruncateTime](http://msdn.microsoft.com/en-us/library/dd395596.aspx)。就像是：

```
var q = from p in DB.treatments
    where EntityFunctions.TruncateTime(p.start) >= EntityFunctions.TruncateTime(start)      
        && EntityFunctions.TruncateTime(p.end) <= EntityFunctions.TruncateTime(end)
    select p; 
```

# c# - 在可执行文件中包含引用

> ID：11027670
> 
> 赞同：2
> 
> 时间：2012-06-14T06:18:32.517
> 
> 标签：c#, com, resources, unpack

这是针对 C# 的。

我知道我可以在我的可执行文件中包含一个 COM 文件作为资源，然后在需要时将其解压缩到当前目录中。一个 com 文件，例如 LibCurlNet。

我想知道的是 Visual C# 2010 Express 是否提供了一种自动执行此操作的方法。比如我可以选择的一个简单选项。我的意思不是使用发布者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:29:38.130

我什至认为 Visual Studio Professional/Ultimate 中没有自动执行此操作的方法，更不用说 VS Express。您可能需要使用更手动的方法，例如[此处](http://codeblog.larsholm.net/2011/06/embed-dlls-easily-in-a-net-assembly/)描述的方法（但我想您已经知道了）。

有一个用于打包 .NET DLL:s 和本机 DLL:s 的工具称为[NETZ](http://madebits.com/netz/index.php)。当然，我自己没有尝试过，但也许这个工具对你有帮助？

# jakarta-mail - 在 Mimemessage 中如何在 Content 中设置 Rawinputstream

> ID：11027674
> 
> 赞同：0
> 
> 时间：2012-06-14T06:18:46.433
> 
> 标签：jakarta-mail

我已经拥有以 base 64 格式编码的内容。我想在对象中设置 Mimemessage 中的内容，就好像内容是 base64 格式一样。有什么方法可以解决这个问题吗？请提供解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T07:36:22.310

[http://javamail.kenai.com/nonav/javadocs/javax/mail/internet/PreencodedMimeBodyPart.html](http://javamail.kenai.com/nonav/javadocs/javax/mail/internet/PreencodedMimeBodyPart.html)

# java - 使用ck上传图片

> ID：11027677
> 
> 赞同：0
> 
> 时间：2012-06-14T06:18:59.910
> 
> 标签：java, jsp, ckeditor, image-uploading

我需要使用 ck 编辑器中的发送到服务器按钮将图像上传到服务器，并在 ckeditor 编辑区域中显示图像。在ckeditor中完成所有这些事情，如下所示，

url : b.config.filebrowserImageBrowseLinkUrl 在 image.js 中的这段代码之后我设置 hidden=false; 和

```
CKEDITOR.editorConfig = function( config )
{
    config.filebrowserUploadUrl = '../ckeditorImage.jsp';
}

ckeditorImage.jsp is like this

try{

    String boundary="";
    String sz="";
    String fname="",sem="",sub="",mod="",empid="";
    Enumeration enum1 = request.getHeaderNames();
    while(enum1.hasMoreElements())
    {
            String header = (String)enum1.nextElement();
            String hvalue = request.getHeader(header);
            if("content-length".equalsIgnoreCase(header) )
        sz=""+hvalue;

    } 
        ServletInputStream sv=request.getInputStream();       
    int ch=0;
    String val="";  
    while((ch=sv.read())!=-1)
    {
        val+=(char)ch;      
                if(val.indexOf("Content-Type: ")>=0)
        {

            String tp="Content-Type: ";

            fname=val.substring(val.indexOf("filename=")+"filename=".length(),val.indexOf(tp));
                        fname=fname.replace('"',' ');
                        System.out.println(" =======fname============    :"+fname);           
            fname="home1.jpg";                  
            long size = fname.length();         

                        while((ch=sv.read())!='\n');
            byte[] b=new byte[Integer.parseInt(sz)];
            int cntr=0;
            while(cntr<b.length)
            {
                b[cntr]=(byte)sv.read();
                cntr++;
            }
                        String str=new String(b);
            int pos=str.indexOf(boundary)-2;
            pos=b.length;
            System.out.println(" =======fname============    :"+fname);  
                         File f=new File(config.getServletContext().getRealPath("/")+"/images/"+fname);
                         System.out.println(" creation of directory"+config.getServletContext().getRealPath("/")+"/images/"+fname);
                         System.out.println(" creation");
                       /*  if(f.isDirectory())
                         {
                             String fl[]=f.list();

                             for(int i=0;i<fl.length;i++)
                                 {
                                  File fd=new File(config.getServletContext().getRealPath("/")+"/users/"+sd+"/photos/"+fl[i]);
                                  fd.delete();
                             }
                         }*/
            if(!f.exists())
                f.mkdirs();
                         System.out.println(" creation of directory");
            java.io.FileOutputStream fout=new java.io.FileOutputStream(config.getServletContext().getRealPath("/")+"/images/"+fname);

            fout.write(b,2,pos-4);
            System.out.println(" creation of directory"+fout);
            fout.close();
        }
    }
    }
    catch(Exception e)
    {
        out.println(e);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:55:29.940

该项目还为您提供了 CKEditor 的文件浏览器。

[http://sourceforge.net/projects/jckconnector/](http://sourceforge.net/projects/jckconnector/)

如果只需要上传部分，那就看servlet代码

# bash - 将 stdout 和 stderr 捕获到不同的变量中

> ID：11027679
> 
> 赞同：92
> 
> 时间：2012-06-14T06:19:07.693
> 
> 标签：bash, shell, command-line, io-redirection

是否可以在不使用临时文件的情况下在*不同的变量*中存储或捕获标准输出和标准错误？现在我这样做是为了在运行时获取 stdout in`out`和 stderr in ，但我想避免使用临时文件。`err``some_command`

```
error_file=$(mktemp)
out=$(some_command 2>$error_file)
err=$(< $error_file)
rm $error_file 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-08-06T17:20:41.030

好的，它有点难看，但这里有一个解决方案：

```
unset t_std t_err
eval "$( (echo std; echo err >&2) \
        2> >(readarray -t t_err; typeset -p t_err) \
         > >(readarray -t t_std; typeset -p t_std) )" 
```

where`(echo std; echo err >&2)`需要替换为实际的命令。*stdout*的输出`$t_std`逐行保存到数组中，省略换行符 (the `-t`) 和*stderr* into `$t_err`。

如果你不喜欢数组，你可以做

```
unset t_std t_err
eval "$( (echo std; echo err >&2 ) \
        2> >(t_err=$(cat); typeset -p t_err) \
         > >(t_std=$(cat); typeset -p t_std) )" 
```

这几乎模仿了`var=$(cmd)`except 的行为，它的值`$?`将我们带到最后一个修改：

```
unset t_std t_err t_ret
eval "$( (echo std; echo err >&2; exit 2 ) \
        2> >(t_err=$(cat); typeset -p t_err) \
         > >(t_std=$(cat); typeset -p t_std); t_ret=$?; typeset -p t_ret )" 
```

这里`$?`被保存到`$t_ret`

*使用GNU* 在 Debian wheezy 上测试`bash`，版本*4.2.37(1)-release (i486-pc-linux-gnu)*。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-12-09T22:08:40.443

> 这是为了在不同的变量中捕获标准输出和标准错误。 [如果你只想抓住`stderr`，保持`stdout`原样，有一个更好更短的解决方案](https://stackoverflow.com/a/56577569/490291)。

为了读者的利益[总结](https://stackoverflow.com/a/18086548/490291)一切[，](https://stackoverflow.com/a/26827443/490291)这里有一个

# 易于重复使用的`bash`解决方案

这个版本确实使用了 subshel​​l 并且不带`tempfile`s 运行。（对于`tempfile`没有子外壳的版本，请参阅[我的其他答案](https://stackoverflow.com/a/41652679)。）

```
: catch STDOUT STDERR cmd args..
catch()
{
eval "$({
__2="$(
  { __1="$("${@:3}")"; } 2>&1;
  ret=$?;
  printf '%q=%q\n' "$1" "$__1" >&2;
  exit $ret
  )";
ret="$?";
printf '%s=%q\n' "$2" "$__2" >&2;
printf '( exit %q )' "$ret" >&2;
} 2>&1 )";
} 
```

示例使用：

```
dummy()
{
echo "$3" >&2
echo "$2" >&1
return "$1"
}

catch stdout stderr dummy 3 $'\ndiffcult\n data \n\n\n' $'\nother\n difficult \n  data  \n\n'

printf 'ret=%q\n' "$?"
printf 'stdout=%q\n' "$stdout"
printf 'stderr=%q\n' "$stderr" 
```

这打印

```
ret=3
stdout=$'\ndiffcult\n data '
stderr=$'\nother\n difficult \n  data  ' 
```

因此无需深入思考即可使用。只要放在`catch VAR1 VAR2`任何前面，`command args..`你就完成了。

有些`if cmd args..; then`会变成`if catch VAR1 VAR2 cmd args..; then`. 真的没有什么复杂的。

## 附录：在“[严格模式](https://github.com/tests-always-included/wick/blob/master/doc/bash-strict-mode.md)”下使用

`catch`在严格模式下同样适用于我。唯一需要注意的是，上面的示例返回错误代码 3，在严格模式下，它调用 ERR 陷阱。因此，如果您运行一些`set -e`预期会返回任意错误代码（不仅仅是 0）的命令，您需要将返回代码捕获到某个变量 `&& ret=$? || ret=$?`中，如下所示：

```
dummy()
{
echo "$3" >&2
echo "$2" >&1
return "$1"
}

catch stdout stderr dummy 3 $'\ndifficult\n data \n\n\n' $'\nother\n difficult \n  data  \n\n' && ret=$? || ret=$?

printf 'ret=%q\n' "$ret"
printf 'stdout=%q\n' "$stdout"
printf 'stderr=%q\n' "$stderr" 
```

## 讨论

问：它是如何工作的？

它只是将此处其他答案的想法包装到一个函数中，以便可以轻松地重复使用它。

`catch()`基本上`eval`用来设置这两个变量。这类似于[https://stackoverflow.com/a/18086548](https://stackoverflow.com/a/18086548)

考虑调用`catch out err dummy 1 2a 3b`：

*   让我们暂时跳过 the`eval "$({`和 the `__2="$(`。我稍后会谈到这个。

*   `__1="$("$("${@:3}")"; } 2>&1;`执行`dummy 1 2a 3b`并将其存储`stdout`到`__1`以供以后使用。就这样`__1`变成了`2a`。它还重定向to `stderr`，以便外部捕获可以聚集`dummy``stdout``stdout`

*   `ret=$?;`捕获退出代码，即`1`

*   `printf '%q=%q\n' "$1" "$__1" >&2;`然后输出`out=2a`到`stderr`. `stderr`在这里使用，因为当前`stdout`已经接管了命令的`stderr`作用`dummy`。

*   `exit $ret`然后将退出代码 ( `1`) 转发到下一阶段。

现在到外部`__2="$( ... )"`：

*   `stdout`这将上述（即`stderr`调用的）捕获`dummy`到变量`__2`中。（我们可以在这里重复使用`__1`，但我曾经`__2`让它不那么混乱。）。所以`__2`变成`3b`

*   `ret="$?";`再次捕获（返回的）返回码`1`（来自`dummy`）

*   `printf '%s=%q\n' "$2" "$__2" >&2;`然后输出`err=3a`到`stderr`. `stderr`再次使用，因为它已经用于输出另一个变量`out=2a`。

*   `printf '( exit %q )' "$ret" >&2;`然后输出代码以设置正确的返回值。我没有找到更好的方法，因为将其分配给变量需要一个变量名，然后不能将其用作`catch`.

请注意，作为一种优化，我们也可以将这两个`printf`写成一个单独的，比如`printf '%s=%q\n( exit %q )`"$__2" "$ret"`。

那么到目前为止我们有什么？

我们已将以下内容写入 stderr：

```
out=2a
err=3b
( exit 1 ) 
```

where `out`is from `$1`, `2a`is from `stdout`of `dummy`, `err`is from `$2`, `3b`is from `stderr`of `dummy`, the`1`来自返回码 from `dummy`。

请注意，`%q`在格式中`printf`注意引用，这样 shell 在涉及到`eval`. `2a`并且`3b`是如此简单，以至于它们被逐字复制。

现在到外部`eval "$({ ... } 2>&1 )";`：

这将执行以上所有输出 2 个变量和 的`exit`，捕获它（因此`2>&1`）并使用`eval`.

这样 2 个变量和返回码都被设置了。

问：它使用`eval`哪个是邪恶的。那么它安全吗？

*   只要`printf %q`没有错误，它应该是安全的。但是你总是要非常小心，想想 ShellShock。

问：虫子？

*   没有明显的错误已知，除了以下：

    *   捕获大输出需要大内存和 CPU，因为所有内容都进入变量并且需要由 shell 进行反向解析。所以明智地使用它。

    *   像往常一样`$(echo $'\n\n\n\n')` **吞下所有换行符**，而不仅仅是最后一个。这是 POSIX 要求。如果您需要让 LF 不受伤害，只需在输出中添加一些尾随字符，然后像下面的配方一样将其删除（查看`x`允许读取指向以 a 结尾的文件的软链接的尾随`$'\n'`）：

        ```
         target="$(readlink -e "$file")x"
            target="${target%x}" 
        ```

    *   Shell 变量不能携带字节 NUL ( `$'\0'`)。`stdout`如果它们碰巧出现在or中，它们就会被忽略`stderr`。

*   给定的命令在子子 shell 中运行。所以它无法访问`$PPID`，也无法更改 shell 变量。您可以`catch`使用 shell 函数，甚至是内置函数，但这些函数将无法更改 shell 变量（因为在其中运行的所有内容`$( .. )`都无法做到这一点）。因此，如果您需要在当前 shell 中运行一个函数并捕获它的 stderr/stdout，您需要以通常的方式使用`tempfile`s. （有很多方法可以做到这一点，打断外壳通常不会留下碎片，但这很复杂，值得自己回答。）

问：Bash 版本？

*   我认为您需要 Bash 4 及更高版本（由于`printf %q`）

问：这看起来仍然很尴尬。

*   对。 [此处的另一个答案](https://stackoverflow.com/a/11172617/490291)显示了如何`ksh`更干净地完成它。但是我不习惯`ksh`，所以我把它留给其他人来创建一个类似的易于重用的配方`ksh`。

问：那为什么不使用`ksh`呢？

*   因为这是一个`bash`解决方案

问：脚本可以改进

*   当然，您可以挤出一些字节并创建更小或更难以理解的解决方案。去吧；）

问：有错别字。 `: catch STDOUT STDERR cmd args..`应阅读`# catch STDOUT STDERR cmd args..`

*   其实这是有意的。 `:`在`bash -x`评论被默默吞下时出现。因此，如果您碰巧在函数定义中出现拼写错误，您可以看到解析器在哪里。这是一个古老的调试技巧。但请注意，您可以轻松地在`:`.

编辑：添加了更多内容`;`，以便更轻松地从`catch()`. 并添加了它是如何工作的部分。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2020-01-04T16:56:41.583

我认为在说“你不能”做某事之前，人们至少应该亲手尝试一下……</p>

# 简单而干净的解决方案，无需使用`eval`或任何异国情调

## 1\. 最小版本

```
{
    IFS=$'\n' read -r -d '' CAPTURED_STDERR;
    IFS=$'\n' read -r -d '' CAPTURED_STDOUT;
} < <((printf '\0%s\0' "$(some_command)" 1>&2) 2>&1) 
```

**要求：** `printf` ,`read`

## 2\. 一个简单的测试

### 用于生成`stdout`and的虚拟脚本`stderr`：`useless.sh`

```
#!/bin/bash
#
# useless.sh
#

echo "This is stderr" 1>&2
echo "This is stdout" 
```

### 将捕获`stdout`和的实际脚本`stderr`：`capture.sh`

```
#!/bin/bash
#
# capture.sh
#

{
    IFS=$'\n' read -r -d '' CAPTURED_STDERR;
    IFS=$'\n' read -r -d '' CAPTURED_STDOUT;
} < <((printf '\0%s\0' "$(./useless.sh)" 1>&2) 2>&1)

echo 'Here is the captured stdout:'
echo "${CAPTURED_STDOUT}"
echo

echo 'And here is the captured stderr:'
echo "${CAPTURED_STDERR}"
echo 
```

### 的输出`capture.sh`

```
Here is the captured stdout:
This is stdout

And here is the captured stderr:
This is stderr 
```

## 3\. 它是如何工作的

命令

```
(printf '\0%s\0' "$(some_command)" 1>&2) 2>&1 
```

`some_command`发送to的标准输出`printf '\0%s\0'`，从而创建字符串`\0${stdout}\n\0`（其中`\0`是一个`NUL`字节，`\n`是一个换行符）；然后将字符串`\0${stdout}\n\0`重定向到标准错误，其中`some_command`已经存在标准错误，从而组成字符串`${stderr}\n\0${stdout}\n\0`，然后将其重定向回标准输出。

之后，命令

```
IFS=$'\n' read -r -d '' CAPTURED_STDERR; 
```

开始读取字符串`${stderr}\n\0${stdout}\n\0`直到第一个`NUL`字节，并将内容保存到`${CAPTURED_STDERR}`. 然后命令

```
IFS=$'\n' read -r -d '' CAPTURED_STDOUT; 
```

一直读取相同的字符串直到下一个`NUL`字节，并将内容保存到`${CAPTURED_STDOUT}`.

## 4\. 使其牢不可破

上面的解决方案依赖于一个字节作为and`NUL`之间的分隔符，因此如果出于任何原因包含其他字节，它将不起作用。`stderr``stdout``stderr``NUL`

尽管这永远不会发生，但可以通过在将两个输出传递给（清理）之前和之前剥离所有可能的`NUL`字节来使脚本完全牢不可破——字节无论如何都会丢失，因为[不可能将它们存储到 shell 变量中](https://stackoverflow.com/questions/6570531/assign-string-containing-null-character-0-to-a-variable-in-bash/24511770#24511770)：`stdout``stderr``read``NUL`

```
{
    IFS=$'\n' read -r -d '' CAPTURED_STDOUT;
    IFS=$'\n' read -r -d '' CAPTURED_STDERR;
} < <((printf '\0%s\0' "$((some_command | tr -d '\0') 3>&1- 1>&2- 2>&3- | tr -d '\0')" 1>&2) 2>&1) 
```

**要求：** `printf` , `read`,`tr`

# 编辑

我已经删除了另一个将退出状态传播到当前 shell 的示例，因为正如**Andy**在评论中指出的那样，它并不像它应该的那样“牢不可破”（因为它没有`printf`用来缓冲其中一个流）。作为记录，我在此处粘贴有问题的代码：

> ## 保持退出状态（仍然牢不可破）
> 
> 以下变体还将退出状态传播`some_command`到当前 shell：
> 
> ```
> {
>   IFS= read -r -d '' CAPTURED_STDOUT;
>   IFS= read -r -d '' CAPTURED_STDERR;
>   (IFS= read -r -d '' CAPTURED_EXIT; exit "${CAPTURED_EXIT}");
> } < <((({ { some_command ; echo "${?}" 1>&3; } | tr -d '\0'; printf '\0'; } 2>&1- 1>&4- | tr -d '\0' 1>&4-) 3>&1- | xargs printf '\0%s\0' 1>&4-) 4>&1-) 
> ```
> 
> **要求：** `printf` , `read`, `tr`,`xargs`

**然后， Andy**提交了以下“建议编辑”以捕获退出代码：

> ## 简单而干净的解决方案，节省退出价值
> 
> 我们可以在末尾添加`stderr`第三条信息，另一个`NUL`加上`exit`命令的状态。它将在之后`stderr`但之前输出`stdout`
> 
> ```
> {
>   IFS= read -r -d '' CAPTURED_STDERR;
>   IFS= read -r -d '' CAPTURED_EXIT;
>   IFS= read -r -d '' CAPTURED_STDOUT;
> } < <((printf '\0%s\n\0' "$(some_command; printf '\0%d' "${?}" 1>&2)" 1>&2) 2>&1) 
> ```

他的解决方案似乎有效，但有一个小问题，即退出状态应该作为字符串的最后一个片段，以便我们能够`exit "${CAPTURED_EXIT}"`在圆括号内启动而不污染全局范围，就像我试图做的那样删除的例子。另一个问题是，当他最内层的输出`printf`立即附加到`stderr`of 时`some_command`，我们无法再清理 中的可能`NUL`字节`stderr`，因为其中现在还有*我们的* `NUL`分隔符。

## 5\. 保留退出状态 - 蓝图（未经清理）

在考虑了一些最终方法之后，我提出了一个解决方案，用于将退出代码和退出代码`printf`缓存为*两个* `stdout`不同的参数，这样它们就不会干扰。

我做的第一件事是概述一种将退出状态传达给 的第三个参数的方法`printf`，这很容易以最简单的形式（即无需清理）完成。

```
{
    IFS=$'\n' read -r -d '' CAPTURED_STDERR;
    IFS=$'\n' read -r -d '' CAPTURED_STDOUT;
    (IFS=$'\n' read -r -d '' _ERRNO_; exit ${_ERRNO_});
} < <((printf '\0%s\0%d\0' "$(some_command)" "${?}" 1>&2) 2>&1) 
```

**要求：** `exit` , `printf`,`read`

## 6\. 通过清理保持退出状态——牢不可破（重写）

但是，当我们尝试引入消毒时，事情变得非常混乱。启动`tr`以清理流实际上会覆盖我们之前的退出状态，因此显然唯一的解决方案是在后者丢失之前将后者重定向到单独的描述符，将其保留在那里直到`tr`完成它的工作两次，然后将其重定向回它的位置.

在文件描述符之间进行了一些相当杂技的重定向之后，这就是我想出来的。

下面的代码是对我已删除的示例的重写。它还清理`NUL`流中可能的字节，以便`read`始终正常工作。

```
{
    IFS=$'\n' read -r -d '' CAPTURED_STDOUT;
    IFS=$'\n' read -r -d '' CAPTURED_STDERR;
    (IFS=$'\n' read -r -d '' _ERRNO_; exit ${_ERRNO_});
} < <((printf '\0%s\0%d\0' "$(((({ some_command; echo "${?}" 1>&3-; } | tr -d '\0' 1>&4-) 4>&2- 2>&1- | tr -d '\0' 1>&4-) 3>&1- | exit "$(cat)") 4>&1-)" "${?}" 1>&2) 2>&1) 
```

**要求：** `exit` , `printf`, `read`,`tr`

这个解决方案非常强大。退出代码始终保持在不同的描述符中，直到它`printf`作为单独的参数直接到达。

## 7\. 终极解决方案——带有退出状态的通用函数

我们还可以将上面的代码转换为通用函数。

```
# SYNTAX:
#   catch STDOUT_VARIABLE STDERR_VARIABLE COMMAND
catch() {
    {
        IFS=$'\n' read -r -d '' "${1}";
        IFS=$'\n' read -r -d '' "${2}";
        (IFS=$'\n' read -r -d '' _ERRNO_; return ${_ERRNO_});
    } < <((printf '\0%s\0%d\0' "$(((({ ${3}; echo "${?}" 1>&3-; } | tr -d '\0' 1>&4-) 4>&2- 2>&1- | tr -d '\0' 1>&4-) 3>&1- | exit "$(cat)") 4>&1-)" "${?}" 1>&2) 2>&1)
} 
```

**要求：** `cat` , `exit`, `printf`, `read`,`tr`

使用该`catch`功能，我们可以启动以下代码段，

```
catch MY_STDOUT MY_STDERR './useless.sh'

echo "The \`./useless.sh\` program exited with code ${?}"
echo

echo 'Here is the captured stdout:'
echo "${MY_STDOUT}"
echo

echo 'And here is the captured stderr:'
echo "${MY_STDERR}"
echo 
```

并得到以下结果：

```
The `./useless.sh` program exited with code 0

Here is the captured stdout:
This is stderr 1
This is stderr 2

And here is the captured stderr:
This is stdout 1
This is stdout 2 
```

## 8\. 最后一个例子发生了什么

下面是一个快速的模式化：

1.  `some_command`启动：然后我们在描述符 1 上有`some_command`' ，在描述符 2 上有' ，并且' 退出代码重定向到描述符 3`stdout``some_command``stderr``some_command`
2.  `stdout`被输送到`tr`（消毒）
3.  `stderr`与`stdout`（临时使用描述符 4）交换并通过管道传输到`tr`（清理）
4.  退出代码（描述符 3）与`stderr`（现在的描述符 1）交换并通过管道传输到`exit $(cat)`
5.  `stderr`（现在是描述符 3）被重定向到描述符 1，结束扩展为的第二个参数`printf`
6.  的退出代码`exit $(cat)`由第三个参数捕获`printf`
7.  的输出`printf`被重定向到`stdout`已经存在的描述符 2
8.  的连接`stdout`和输出通过`printf`管道传送到`read`

## 9\. POSIX 兼容版本#1（易破解）

[进程替换](https://www.gnu.org/software/bash/manual/html_node/Process-Substitution.html)（`< <()`语法）不是 POSIX 标准（尽管它们*事实上*是）。在不支持`< <()`语法的 shell 中，获得相同结果的唯一方法是通过`<<EOF … EOF`语法。不幸的是，这不允许我们使用`NUL`字节作为分隔符，因为这些在到达`read`. 我们必须使用不同的分隔符。自然选择落在`CTRL+Z`字符上（ASCII 字符号 26）。这是一个*可破解*的版本（输出不得包含该`CTRL+Z`字符，否则它们将混合在一起）。

```
_CTRL_Z_=$'\cZ'

{
    IFS=$'\n'"${_CTRL_Z_}" read -r -d "${_CTRL_Z_}" CAPTURED_STDERR;
    IFS=$'\n'"${_CTRL_Z_}" read -r -d "${_CTRL_Z_}" CAPTURED_STDOUT;
    (IFS=$'\n'"${_CTRL_Z_}" read -r -d "${_CTRL_Z_}" _ERRNO_; exit ${_ERRNO_});
} <<EOF
$((printf "${_CTRL_Z_}%s${_CTRL_Z_}%d${_CTRL_Z_}" "$(some_command)" "${?}" 1>&2) 2>&1)
EOF 
```

**要求：** `exit` , `printf`,`read`

## 10\. POSIX 兼容版本 #2（牢不可破，但不如非 POSIX 版本）

这是它的牢不可破的版本，直接采用函数形式（如果其中一个`stdout`或`stderr`包含`CTRL+Z`字符，则流将被截断，但永远不会与另一个描述符交换）。

```
_CTRL_Z_=$'\cZ'

# SYNTAX:
#     catch_posix STDOUT_VARIABLE STDERR_VARIABLE COMMAND
catch_posix() {
    {
        IFS=$'\n'"${_CTRL_Z_}" read -r -d "${_CTRL_Z_}" "${1}";
        IFS=$'\n'"${_CTRL_Z_}" read -r -d "${_CTRL_Z_}" "${2}";
        (IFS=$'\n'"${_CTRL_Z_}" read -r -d "${_CTRL_Z_}" _ERRNO_; return ${_ERRNO_});
    } <<EOF
$((printf "${_CTRL_Z_}%s${_CTRL_Z_}%d${_CTRL_Z_}" "$(((({ ${3}; echo "${?}" 1>&3-; } | cut -z -d"${_CTRL_Z_}" -f1 | tr -d '\0' 1>&4-) 4>&2- 2>&1- | cut -z -d"${_CTRL_Z_}" -f1 | tr -d '\0' 1>&4-) 3>&1- | exit "$(cat)") 4>&1-)" "${?}" 1>&2) 2>&1)
EOF
} 
```

**要求：** `cat` , `cut`, `exit`, `printf`, `read`,`tr`

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-10-16T09:06:33.760

从技术上讲，命名管道不是临时文件，这里没有人提到它们。它们在文件系统中不存储任何内容，您可以在连接它们后立即删除它们（因此您将永远看不到它们）：

```
#!/bin/bash -e

foo () {
    echo stdout1
    echo stderr1 >&2
    sleep 1
    echo stdout2
    echo stderr2 >&2
}

rm -f stdout stderr
mkfifo stdout stderr
foo >stdout 2>stderr &             # blocks until reader is connected
exec {fdout}<stdout {fderr}<stderr # unblocks `foo &`
rm stdout stderr                   # filesystem objects are no longer needed

stdout=$(cat <&$fdout)
stderr=$(cat <&$fderr)

echo $stdout
echo $stderr

exec {fdout}<&- {fderr}<&- # free file descriptors, optional 
```

您可以通过这种方式拥有多个后台进程，并在方便的时候异步收集它们的标准输出和标准错误等。

如果你只需要一个进程，你也可以使用硬编码的 fd 数字，比如 3 和 4，而不是`{fdout}/{fderr}`语法（它会为你找到一个空闲的 fd）。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2015-03-01T16:47:40.537

此命令在当前运行的 shell 中设置 stdout (stdval) 和 stderr (errval) 值：

```
eval "$( execcommand 2> >(setval errval) > >(setval stdval); )" 
```

如果此函数已定义：

```
function setval { printf -v "$1" "%s" "$(cat)"; declare -p "$1"; } 
```

将 execcommand 更改为捕获的命令，可以是“ls”、“cp”、“df”等。

* * *

所有这些都是基于我们可以在函数 setval 的帮助下将所有捕获的值转换为文本行的想法，然后 setval 用于捕获此结构中的每个值：

```
execcommand 2> CaptureErr > CaptureOut 
```

将每个捕获值转换为 setval 调用：

```
execcommand 2> >(setval errval) > >(setval stdval) 
```

将所有内容包装在执行调用中并回显它：

```
echo "$( execcommand 2> >(setval errval) > >(setval stdval) )" 
```

您将获得每个 setval 创建的声明调用：

```
declare -- stdval="I'm std"
declare -- errval="I'm err" 
```

要执行该代码（并获取 vars 集），请使用 eval：

```
eval "$( execcommand 2> >(setval errval) > >(setval stdval) )" 
```

最后回显设置的变量：

```
echo "std out is : |$stdval| std err is : |$errval| 
```

* * *

也可以包含返回（退出）值。
一个完整的 bash 脚本示例如下所示：

```
#!/bin/bash --

# The only function to declare:
function setval { printf -v "$1" "%s" "$(cat)"; declare -p "$1"; }

# a dummy function with some example values:
function dummy { echo "I'm std"; echo "I'm err" >&2; return 34; }

# Running a command to capture all values
#      change execcommand to dummy or any other command to test.
eval "$( dummy 2> >(setval errval) > >(setval stdval); <<<"$?" setval retval; )"

echo "std out is : |$stdval| std err is : |$errval| return val is : |$retval|" 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2012-06-23T20:09:38.933

乔纳森有[答案](https://stackoverflow.com/a/11027843/495451)。作为参考，这是 ksh93 技巧。（需要非古代版本）。

```
function out {
    echo stdout
    echo stderr >&2
}

x=${ { y=$(out); } 2>&1; }
typeset -p x y # Show the values 
```

生产

```
x=stderr
y=stdout 
```

该`${ cmds;}`语法只是一个不会创建子shell 的命令替换。这些命令在当前 shell 环境中执行。开头的空格很重要（`{`是保留字）。

内部命令组的标准错误被重定向到标准输出（以便它适用于内部替换）。接下来，将 的 stdout`out`分配给`y`，并由 捕获重定向的 stderr ，而不会像命令替换的子 shell`x`一样丢失。`y`

这在其他 shell 中是不可能的，因为所有捕获输出的结构都需要将生产者放入子 shell 中，在这种情况下，子shell 将包括分配。

*更新：*现在 mksh 也支持。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-01-14T17:07:37.730

为了读者的利益，这里有一个使用`tempfile`s 的解决方案。

问题是不要使用`tempfile`s。然而，这可能是由于`/tmp/`在 shell 死机的情况下对 tempfile 造成了不必要的污染。万一`kill -9`有些`trap 'rm "$tmpfile1" "$tmpfile2"' 0`不火。

如果您处于可以**使用`tempfile`**但又不想**留下碎片**的情况下，这里有一个食谱。

再次调用它`catch()`（作为我的[另一个答案](https://stackoverflow.com/a/41069638)）并具有相同的调用语法：

`catch stdout stderr command args..`

```
# Wrappers to avoid polluting the current shell's environment with variables

: catch_read returncode FD variable
catch_read()
{
eval "$3=\"\`cat <&$2\`\"";
# You can use read instead to skip some fork()s.
# However read stops at the first NUL byte,
# also does no \n removal and needs bash 3 or above:
#IFS='' read -ru$2 -d '' "$3";
return $1;
}
: catch_1 tempfile variable comand args..
catch_1()
{
{
rm -f "$1";
"${@:3}" 66<&-;
catch_read $? 66 "$2";
} 2>&1 >"$1" 66<"$1";
}

: catch stdout stderr command args..
catch()
{
catch_1 "`tempfile`" "${2:-stderr}" catch_1 "`tempfile`" "${1:-stdout}" "${@:3}";
} 
```

它能做什么：

*   它为和创建两个`tempfile`s 。然而，它几乎立即删除了这些，因此它们只存在很短的时间。`stdout``stderr`

*   `catch_1()`将 (FD 1)捕获`stdout`到变量中并移动`stderr`到`stdout`，以便下一个（“左”）`catch_1`可以捕获它。

*   处理`catch`是从右到左完成的，所以左边`catch_1`最后执行并捕获`stderr`。

可能发生的最糟糕的情况是，一些临时文件出现在 上`/tmp/`，但在这种情况下它们总是空的。（它们在填充之前被移除。）。通常这应该不是问题，因为在 Linux 下，tmpfs 支持每 GB 主内存大约 128K 文件。

*   给定的命令也可以访问和更改所有本地 shell 变量。所以你可以调用一个有副作用的shell函数！

*   `tempfile`这只会为调用分叉两次。

错误：

*   `tempfile`在失败的情况下缺少良好的错误处理。

*   这通常会`\n`移除外壳。见评论`catch_read()`。

*   您不能使用文件描述符`66`将数据通过管道传输到您的命令。如果需要，请使用另一个描述符进行重定向，例如`42`（请注意，非常旧的 shell 只提供最多 9 个 FD）。

*   这无法处理和中的 NUL 字节 ( `$'\0'`) 。（NUL 只是被忽略。对于变体，NUL 后面的所有内容都被忽略。）`stdout``stderr``read`

供参考：

*   Unix 允许我们访问已删除的文件，只要您保留对它们的一些引用（例如打开的文件句柄）。这样我们就可以打开然后删除它们。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-01-08T09:23:25.413

不喜欢 eval，所以这里有一个解决方案，它使用一些重定向技巧将程序输出捕获到变量，然后解析该变量以提取不同的组件。-w 标志设置块大小并影响中间格式的 std-out/err 消息的顺序。1以开销为代价提供潜在的高分辨率。

```
#######                                                                                                                                                                                                                          
# runs "$@" and outputs both stdout and stderr on stdin, both in a prefixed format allowing both std in and out to be separately stored in variables later.                                                                  
# limitations: Bash does not allow null to be returned from subshells, limiting the usefullness of applying this function to commands with null in the output.                                                                   
# example:                                                                                                                                                                                                                       
#  var=$(keepBoth ls . notHere)                                                                                                                                                                                                  
#  echo ls had the exit code "$(extractOne r "$var")"                                                                                                                                                                            
#  echo ls had the stdErr of "$(extractOne e "$var")"                                                                                                                                                                            
#  echo ls had the stdOut of "$(extractOne o "$var")"                                                                                                                                                                            
keepBoth() {                                                                                                                                                                                                                     
  (                                                                                                                                                                                                                              
    prefix(){                                                                                                                                                                                                                    
      ( set -o pipefail                                                                                                                                                                                                          
        base64 -w 1 - | (                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
          while read c                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
          do echo -E "$1" "$c"                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
          done                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
        )                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
      )                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
    }                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
    ( (                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
        "$@" | prefix o >&3                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
        echo  ${PIPESTATUS[0]} | prefix r >&3                                                                                                                                                                                                                                                                                                                                                                                                                                                           
      ) 2>&1 | prefix e >&1                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
    ) 3>&1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
  )                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       

extractOne() { # extract                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
  echo "$2" | grep "^$1" | cut --delimiter=' ' --fields=2 | base64 --decode -                                                                                                                                                                                                                                                                                                                                                                                                                           
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2022-01-17T02:36:10.130

这是一张显示@madmurphy[非常简洁的解决方案](https://stackoverflow.com/a/59592881/1388292)如何工作的图表。

[![@madmurhy 的解决方案示意图](../Images/445b5d679f970127a865b435b02594a1.png)](https://i.stack.imgur.com/Wp8NK.png)

以及单线的缩进版本：

```
catch() {
  {
      IFS=$'\n' read -r -d '' "$out_var";
      IFS=$'\n' read -r -d '' "$err_var";
      (IFS=$'\n' read -r -d '' _ERRNO_; return ${_ERRNO_});
  }\
  < <(
    (printf '\0%s\0%d\0' \
      "$(
        (
          (
            (
              { ${3}; echo "${?}" 1>&3-; } | tr -d '\0' 1>&4-
            ) 4>&2- 2>&1- | tr -d '\0' 1>&4-
          ) 3>&1- | exit "$(cat)"
        ) 4>&1-
      )" "${?}" 1>&2
    ) 2>&1
  )
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-06-14T06:33:42.503

简而言之，我相信答案是“不”。捕获`$( ... )`仅将标准输出捕获到变量；没有办法将标准错误捕获到单独的变量中。所以，你所拥有的就是尽可能的整洁。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-12-10T17:04:52.260

怎么样... =D

```
GET_STDERR=""
GET_STDOUT=""
get_stderr_stdout() {
    GET_STDERR=""
    GET_STDOUT=""
    unset t_std t_err
    eval "$( (eval $1) 2> >(t_err=$(cat); typeset -p t_err) > >(t_std=$(cat); typeset -p t_std) )"
    GET_STDERR=$t_err
    GET_STDOUT=$t_std
}

get_stderr_stdout "command"
echo "$GET_STDERR"
echo "$GET_STDOUT" 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-06-02T21:19:54.853

一种解决方法是标记输出流，合并它们，然后根据标记进行拆分，这很hacky，但可能比此页面上的一些建议更直观。例如，我们可以用“STDOUT”前缀标记标准输出：

```
function someCmd {
    echo "I am stdout"
    echo "I am stderr" 1>&2
}

ALL=$({ someCmd | sed -e 's/^/STDOUT/g'; } 2>&1)
OUT=$(echo "$ALL" | grep    "^STDOUT" | sed -e 's/^STDOUT//g')
ERR=$(echo "$ALL" | grep -v "^STDOUT") 
```

```

如果您知道 stdout 和/或 stderr 是受限制的形式，您可以想出一个与其允许的内容不冲突的标签。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-07-27T18:13:42.713

**警告：（还没有？）工作！**

以下似乎可能导致它在不创建任何临时文件且仅在 POSIX sh 上工作的情况下工作；但是它需要base64，并且由于编码/解码可能不是那么有效并且还使用“更大”的内存。

*   即使在简单的情况下，当最后一个 stderr 行没有换行符时，它也会失败。至少在某些情况下，这可以通过将 exe 替换为“{ exe ; echo >&2 ; }”来解决，即添加一个换行符。
*   然而，主要问题是一切似乎都很活泼。尝试使用类似的exe：

    exe() { 猫 /usr/share/hunspell/de_DE.dic 猫 /usr/share/hunspell/en_GB.dic >&2 }

你会看到例如base64编码的部分在文件的顶部，部分在最后，未解码的stderr在中间。

**好吧，即使下面的想法不能发挥作用（我假设），它也可以作为那些可能错误地认为它可以像这样工作的人的反例。**

想法（或反例）：

```
#!/bin/sh

exe()
{
        echo out1
        echo err1 >&2
        echo out2
        echo out3
        echo err2 >&2
        echo out4
        echo err3 >&2
        echo -n err4 >&2
}

r="$(  { exe  |  base64 -w 0 ; }  2>&1 )"

echo RAW
printf '%s' "$r"
echo RAW

o="$( printf '%s' "$r" | tail -n 1 | base64 -d )"
e="$( printf '%s' "$r" | head -n -1  )"
unset r    

echo
echo OUT
printf '%s' "$o"
echo OUT
echo
echo ERR
printf '%s' "$e"
echo ERR 
```

给出（使用 stderr-newline 修复）：

```
$ ./ggg 
RAW
err1
err2
err3
err4

b3V0MQpvdXQyCm91dDMKb3V0NAo=RAW

OUT
out1
out2
out3
out4OUT

ERR
err1
err2
err3
err4ERR 
```

（至少在 Debian 的 dash 和 bash 上）

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-01-22T18:10:21.250

这是@madmurphy 解决方案的一个变体，它应该适用于任意大的 stdout/stderr 流，维护退出返回值，并处理流中的空值（通过将它们转换为换行符）

```
function buffer_plus_null()
{
  local buf
  IFS= read -r -d '' buf || :
  echo -n "${buf}"
  printf '\0'
}

{
    IFS= time read -r -d '' CAPTURED_STDOUT;
    IFS= time read -r -d '' CAPTURED_STDERR;
    (IFS= read -r -d '' CAPTURED_EXIT; exit "${CAPTURED_EXIT}");
} < <((({ { some_command ; echo "${?}" 1>&3; } | tr '\0' '\n' | buffer_plus_null; } 2>&1 1>&4 | tr '\0' '\n' | buffer_plus_null 1>&4 ) 3>&1 | xargs printf '%s\0' 1>&4) 4>&1 ) 
```

缺点：

*   `read`命令是操作中最昂贵的部分。例如：`find /proc`在一台计算机上运行 500 个进程，需要 20 秒（而命令只有 0.5 秒）。第一次阅读需要 10 秒，第二次阅读需要 10 秒，总时间翻了一番。

* * *

## 缓冲区说明

最初的解决方案是`printf`缓冲流的参数，但是由于需要将退出代码放在最后，一种解决方案是缓冲 stdout 和 stderr。我试过`xargs -0 printf`了，但你很快就开始达到“最大参数长度限制”。所以我决定一个解决方案是编写一个快速缓冲函数：

1.  用于`read`将流存储在变量中
2.  这`read`将在流结束或收到 null 时终止。由于我们已经删除了空值，因此它会在流关闭时结束，并返回非零值。由于这是预期的行为，我们添加`|| :`了“或真”的含义，以便该行始终评估为真 (0)
3.  现在我知道流已经结束，可以安全地开始回显它了。
4.  `echo -n "${buf}"`是内置命令，因此不受参数长度限制
5.  最后，在末尾添加一个空分隔符。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-06-18T21:53:16.613

如果命令 1) 没有有状态的副作用和 2) 在计算上很便宜，最简单的解决方案就是运行两次。当您还不知道磁盘是否可以工作时，我主要将其用于在引导序列期间运行的代码。就我而言，它很小`some_command`，因此运行两次不会影响性能，并且该命令没有副作用。

主要好处是它干净且易于阅读。这里的解决方案非常聪明，但我不想成为必须维护包含更复杂解决方案的脚本的人。如果您的方案适用于此，我建议使用简单的两次运行方法，因为它更清洁且更易于维护。

例子：

```
output=$(getopt -o '' -l test: -- "$@")
errout=$(getopt -o '' -l test: -- "$@" 2>&1 >/dev/null)
if [[ -n "$errout" ]]; then
        echo "Option Error: $errout"
fi 
```

同样，这只是可以做的，因为 getopt 没有副作用。我知道它是性能安全的，因为我的父代码在整个程序中调用它的次数不到 100 次，并且用户永远不会注意到 100 次 getopt 调用与 200 次 getopt 调用。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-03-05T01:28:25.197

这是一个更简单的变体，它不是 OP 想要的，但与其他任何选项都不同。您可以通过重新排列文件描述符来获得所需的任何内容。

测试命令：

```
%> cat xx.sh  
#!/bin/bash
echo stdout
>&2 echo stderr 
```

它本身就是：

```
%> ./xx.sh
stdout
stderr 
```

现在，打印标准输出，将标准错误捕获到一个变量，并将标准输出记录到一个文件中

```
%> export err=$(./xx.sh 3>&1 1>&2 2>&3 >"out")
stdout
%> cat out    
stdout
%> echo
$err 
stderr 
```

或将标准输出和捕获标准错误记录到变量中：

```
export err=$(./xx.sh 3>&1 1>out 2>&3 )
%> cat out
stdout
%> echo $err
stderr 
```

你明白了。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-12-17T18:14:04.060

实时输出并写入文件：

```
#!/usr/bin/env bash

# File where store the output
log_file=/tmp/out.log

# Empty file
echo > ${log_file}

outToLog() {
  # File where write (first parameter)
  local f="$1"
  # Start file output watcher in background
  tail -f "${f}" &
  # Capture background process PID
  local pid=$!
  # Write "stdin" to file
  cat /dev/stdin >> "${f}"
  # Kill background task
  kill -9 ${pid}
}

(
  # Long execution script example
  echo a
  sleep 1
  echo b >&2
  sleep 1
  echo c >&2
  sleep 1
  echo d
) 2>&1 | outToLog "${log_file}"

# File result
echo '==========='
cat "${log_file}" 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-10-25T22:28:14.617

我已经在这里发布了我对这个问题的解决方案。它确实使用进程替换并且需要 Bash > v4，但也将 stdout、stderr 和返回代码捕获到您在当前范围内命名的变量中：

[https://gist.github.com/pmarreck/5eacc6482bc19b55b7c2f48b4f1db4e8](https://gist.github.com/pmarreck/5eacc6482bc19b55b7c2f48b4f1db4e8)

这个练习的重点是让我可以在测试套件中断言这些东西。事实上，我整个下午都在弄清楚这个听起来很简单的事情......我希望这些解决方案中的一个可以帮助其他人！

# c# - int 不受 Math.Round 的影响

> ID：11027680
> 
> 赞同：-2
> 
> 时间：2012-06-14T06:19:08.590
> 
> 标签：c#, php, .net, .net-4.0, rounding

我现在有这段代码：我只是尝试将它转换为 PHP 到 C#

```
if (round($mounth)<="6") {
    $startYear=$year-1;
    $startMounth="-07";
    $startDay="-01";
    $endYear=$year;
    $endMounth="-06";
    $endDay="-30";
} 
```

在这里，我尝试转换为 C# 代码。但我刚开始编码时遇到了错误。我认为 .NET 的原因在某种程度上是不正确的。

```
if (Math.Round(month <= 6)
{
    string StartYear = Year-1;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T06:21:36.057

你需要舍入一个月`(month <= 6)`

```
if(Math.Round(month) <= 6)
          {

          } 
```

**编辑：**既然你提到那个月是今天。月份，它是 int 类型的，你不需要四舍五入。它应该是

```
if(month <= 6)
          {

          } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T06:22:03.297

你的意思是：

```
if(Math.Round(month) <= 6)
      {

      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T06:34:41.957

这是关于 math.round 的精彩讨论......但请使用 DateTime 来定义一个时间点和 TimeSpan 来定义一个持续时间。您可以比较它们、添加它们等。无需将 PHP hack 移植到 C#

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T06:23:52.000

你少了一个括号。改用这个：-

```
if(Math.Round(month) <= 6)
          {

          } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T06:25:30.080

你应该围绕月份而不是条件。

```
if (Math.Round(month) <= 6)
{
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T06:22:41.533

因为month是一个int（你告诉我`int month = today.Month;`）你应该简单地使用

```
if (month <= 6) 
{ 
    // ... 
} 
```

您的代码失败，因为您有错误的括号，并且您不是舍入一个浮点数或双精度数，而是一个布尔值。无论如何我重复一遍：月份是一个整数，所以你不需要四舍五入。

# iphone - 用于多个 idevices 的 usbmuxd

> ID：11027682
> 
> 赞同：1
> 
> 时间：2012-06-14T06:19:33.050
> 
> 标签：iphone, ssh, openssh

在以下命令的帮助下使用 usbmuxd..

> tcprelay.py -t 5900

我可以通过将主机名设置为 127.0.0.1 并将端口设置为 5900 来使用 VNC 查看器连接到 iphone。通过使用上述命令，我可以连接到最后连接的 iphone。

现在如何使用 usbmuxd 同时连接多个设备。我在 usbmuxd 的文档中研究了我们可以连接到多个设备。我看到了帮助，但无法对其进行锻炼。任何人都可以提出建议。

Iphone 被 veency 破解，安装了 openssh

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T14:27:59.167

在最新版本的 tcprelay.py ( [http://cgit.sukimashita.com/usbmuxd.git](http://cgit.sukimashita.com/usbmuxd.git) , v1.0.8 ) 中，尚未实现多设备支持。命令总是发送到第一个设备：

```
 print "Waiting for devices..."
    if not mux.devices:
        mux.process(1.0)
    if not mux.devices:
        print "No device found"
        self.request.close()
        return
    dev = mux.devices[0] 
```

这必须更改为：

```
 dev = None
    while dev is None:
        for d in mux.devices:
            if d.serial == self.server.serial:
                dev = d
                print "Found the device %s"%str(dev)
                break
        if dev is None:
            mux.process() 
```

这是完整的 tcprelay.py，我正在使用：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
#
#   tcprelay.py - TCP connection relay for usbmuxd
#
# Copyright (C) 2009    Hector Martin "marcan" <hector@marcansoft.com>
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 2 or version 3.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA

import usbmux
import SocketServer
import select
from optparse import OptionParser
import sys
import threading

class SocketRelay(object):
    def __init__(self, a, b, maxbuf=65535):
        self.a = a
        self.b = b
        self.atob = ""
        self.btoa = ""
        self.maxbuf = maxbuf
    def handle(self):
        while True:
            rlist = []
            wlist = []
            xlist = [self.a, self.b]
            if self.atob:
                wlist.append(self.b)
            if self.btoa:
                wlist.append(self.a)
            if len(self.atob) < self.maxbuf:
                rlist.append(self.a)
            if len(self.btoa) < self.maxbuf:
                rlist.append(self.b)
            rlo, wlo, xlo = select.select(rlist, wlist, xlist)
            if xlo:
                return
            if self.a in wlo:
                n = self.a.send(self.btoa)
                self.btoa = self.btoa[n:]
            if self.b in wlo:
                n = self.b.send(self.atob)
                self.atob = self.atob[n:]
            if self.a in rlo:
                s = self.a.recv(self.maxbuf - len(self.atob))
                if not s:
                    return
                self.atob += s
            if self.b in rlo:
                s = self.b.recv(self.maxbuf - len(self.btoa))
                if not s:
                    return
                self.btoa += s
            #print "Relay iter: %8d atob, %8d btoa, lists: %r %r %r"%(len(self.atob), len(self.btoa), rlo, wlo, xlo)

class TCPRelay(SocketServer.BaseRequestHandler):
    def handle(self):
        print "Incoming connection to %d"%self.server.server_address[1]
        mux = usbmux.USBMux(options.sockpath)

        #print "Waiting for devices..."
        #if not mux.devices:
        #   mux.process(1.0)
        #if not mux.devices:
        #   print "No device found"
        #   self.request.close()
        #   return
        #dev = mux.devices[0]

        dev = None
        while dev is None:
            for d in mux.devices:
                if d.serial == self.server.serial:
                    dev = d
                    print "Found the device %s"%str(dev)
                    break
            if dev is None:
                mux.process()

        print "Connecting to device %s"%str(dev)
        dsock = mux.connect(dev, self.server.rport)
        lsock = self.request
        print "Connection established, relaying data"
        try:
            fwd = SocketRelay(dsock, lsock, self.server.bufsize * 1024)
            fwd.handle()
        finally:
            dsock.close()
            lsock.close()
        print "Connection closed"

class TCPServer(SocketServer.TCPServer):
    allow_reuse_address = True

class ThreadedTCPServer(SocketServer.ThreadingMixIn, TCPServer):
    pass

HOST = "localhost"

parser = OptionParser(usage="usage: %prog [OPTIONS] RemotePort[:LocalPort] [RemotePort[:LocalPort]]...")
parser.add_option("-t", "--threaded", dest='threaded', action='store_true', default=False, help="use threading to handle multiple connections at once")
parser.add_option("-b", "--bufsize", dest='bufsize', action='store', metavar='KILOBYTES', type='int', default=128, help="specify buffer size for socket forwarding")
parser.add_option("-s", "--socket", dest='sockpath', action='store', metavar='PATH', type='str', default=None, help="specify the path of the usbmuxd socket")

options, args = parser.parse_args()

serverclass = TCPServer
if options.threaded:
    serverclass = ThreadedTCPServer

if len(args) == 0:
    parser.print_help()
    sys.exit(1)

ports = []

for arg in args:
    try:

#       if ':' in arg:
#           rport, lport = arg.split(":")
#           lport = int(lport)
#           ports.append((rport, lport))
#       else:
#           ports.append((int(arg), int(arg)))

        rport, lport, serial = arg.split(":")
        lport = int(lport)
        ports.append((int(rport), int(lport), serial))

    except:
        parser.print_help()
        sys.exit(1)

servers=[]

for rport, lport, serial in ports:
    print "Forwarding local port %d to remote port %d"%(lport, rport)
    server = serverclass((HOST, lport), TCPRelay)
    server.rport = rport
    server.bufsize = options.bufsize
    server.serial = serial
    servers.append(server)

alive = True

while alive:
    try:
        rl, wl, xl = select.select(servers, [], [])
        for server in rl:
            server.handle_request()
    except:
        alive = False 
```

# git - git责备多次修改的行？

> ID：11027683
> 
> 赞同：15
> 
> 时间：2012-06-14T06:19:41.313
> 
> 标签：git, blame

如果一行在 2 个版本之间来回修改了几次， git blame 似乎只显示该行的最新提交。

是否可以让它显示该行的所有提交？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-13T16:45:24.017

我不知道*同时显示该行上的*所有提交，但您可以使用`git blame SHA~ -- filename`. 对于责备的每次迭代，只需插入修改该行的下一个最近的“最新”SHA。

示例：第一次运行时，`git blame foo.php`您会看到该行已被 修改`f8e2e89a`，因此您退出并运行`git blame f8e2e89a~ -- foo.php`git 会显示之前谁修改了该行`f8e2e89a`。冲洗并根据需要重复。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-14T06:33:22.180

`git blame`不能这样做（但请参阅下面的解决方法）。

但是[`git gui`](http://git-scm.com/docs/git-gui)有一个责备模式，可以让您深入了解提交。

安装后调用它`git gui blame <filename>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T06:23:50.987

的目的`git blame`是显示哪个提交最近修改了特定文件中的哪些行。它没有显示同一行的多个版本的选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T07:43:28.203

你不能用 diff 做你想做的事`git blame`，但你可能会用 word-diff 算法或其他一些自定义 diff 工具来接近。特别是，您可以在日志输出中显示逐行单词差异，如下所示：

```
# Show deletions delimited with [- -], and additions with {+ +}.
git log --patch --word-diff=plain 
```

### 也可以看看

[从 git 存储库中提取作者信息](https://stackoverflow.com/questions/10922759/extract-authorship-information-from-git-repository)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-09T07:50:01.000

根据此处已经提供的答案，我`git-rblame`在我的 PATH 中创建了一个脚本，其中包含以下内容：

```
#!/bin/bash

revision="HEAD"

while [ -n "${revision}" ]
do
    result=$(git blame "${revision}" "$@")
    revision="${result%% *}"
    if [[ "${revision}" != [a-z0-9]*[a-z0-9] ]]
    then
        revision=""
    else
        echo "${result}"
        revision="${revision}~"
    fi
done 
```

Then I can call `git rblame -L xxx,yyy myfilename` and I'll get the full history for the file respective the content given. Given the fact that the line number might change, a meaningful regexp seems to work better.

# c# - 按多个表分组并且仍然可以访问原始查询？

> ID：11027690
> 
> 赞同：6
> 
> 时间：2012-06-14T06:20:08.940
> 
> 标签：c#, sql, linq, linq-to-entities, group-by

我试图加入然后分组，我返回的分组信息很棒！就像一个魅力，但我仍然需要访问分组之外的值，如果这有意义的话..

我在stackoverflow上找到了一个例子，这可能更好地解释了它

```
var query = from c in context.Contacts
            join o in context.Orders on c.Id equals o.CustomerId
            select new 
            { 
                Contact = c, 
                Order = o 
            } into ContactAndOrder
            group ContactAndOrder by ContactAndOrder.Order.Id into g
            select new 
            { 
                g.Key, 
                ContactWhatever = g.Sum(co => co.Contact.Whatever), 
                OrderWhatever = g.Sum(co => co.Order.Whatever) 
            }; 
```

现在这似乎很好用，问题是在我的情况下 co.Order.Whatever 是一个字符串，所以我收到一个错误，说不能将字符串转换为 int，我理解为聚合函数 Sum 需要一个 int....

我的问题真的是，是否有一个聚合函数或类似的东西我可以获得 co.Order.Whatever 的值（在我的例子中是一个字符串）

问题是一旦完成分组，我就会失去“c”和“o”

我希望有人能帮帮忙。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:47:27.483

如果在组中始终相同，则第一个就足够了...

```
ContactWhatever = g.First().Contact.Whatever 
```

否则使用@Andrei 回答或

```
ContactWhatever = g.Select(o => o.Contact.Whatever).Aggregate((a,b) => a + "," + b) 
```

# php - 在 yii 中导入不同模型的规则和数据

> ID：11027694
> 
> 赞同：0
> 
> 时间：2012-06-14T06:20:38.897
> 
> 标签：php, yii

如何从不同的表（模型）中提取数据到`yii`. 实际上我是用`loadModel`方法做到的。但我的问题是我们如何将规则也导入到视图中。我的场景来了，我有一个`User`模型和`Profile`模型。`User`模型包含用户名和密码，模型`Profile`包含用户名、姓名、地址等。所以在我的个人资料编辑视图中，我需要所有这些数据以及规则、用户名唯一、密码、确认密码等，我可以实现所需所有这些规则，但我不知道如何导入与表相关的规则，如唯一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T09:10:04.853

所以基本上这是一个接受两个模型并显示数据供您编辑和提交的表单。

只需对您的视图进行渲染调用并传递两个模型。例如`$this->render('aview', array('model1'=>$model1, 'model2'=>$model2));`

让您的视图显示基于这些模型的表单元素。当您提交时，只需为各个模型创建新对象并使用收到的数据填充它们。例如

```
$model1 = new model1;
$model1=>id = id; //id received from the form submit. 
............... 
```

填充模型后，您可以调用`validate()`它们中的每一个来确定数据是否符合您的规则。如果是你继续，否则你会显示错误。我希望这会有所帮助，除非我错过了您的问题中的某些内容。

# cakephp-2.0 - 如何在不涉及 URL 参数的情况下通过 CakePHP 中的路由传递默认值？

> ID：11027697
> 
> 赞同：1
> 
> 时间：2012-06-14T06:21:04.293
> 
> 标签：cakephp-2.0

我正在尝试向我的控制器（在本例中为 PagesController）传递一个不是来自 URL 的值。我只是想做这样的*事情*：

```
Router::connect('/', array('controller' => 'pages', 'action' => 'display', 'home'), array('foo' => 'bar')); 
```

然后，在 PagesController.php 中，我有：

```
public function display() {
    $path = func_get_args();
    error_log(var_export($path,TRUE));
    error_log(var_export($this->request->params,true));
} 
```

我希望我传递的参数 'foo' 在某处具有值 'bar'。

我尝试了一些看似有前途的方法：[http ://book.cakephp.org/2.0/en/development/routing.html](http://book.cakephp.org/2.0/en/development/routing.html)

但他们似乎都没有做我所追求的。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:22:23.113

答案显然是：

```
Router::connect('/', array('controller' => 'pages', 'action' => 'display', 'foo' => 'bar', 'home')); 
```

可以这样检索：

```
error_log($this->request->params['layout']); 
```

# c# - 在客户端运行的 Web 请求

> ID：11027702
> 
> 赞同：0
> 
> 时间：2012-06-14T06:21:33.487
> 
> 标签：c#, asp.net

我们有一个硬件要集成到我们的项目中，该设备充当 HTTP 服务器。在我们的本地网络中，一切都很好，但是当我们将它放在实时服务器上时出现了问题。这里用简单的代码解释一下原因

```
<form method="LINK" action="http://192.168.0.78:80/XXX/%3C%3Fxml%20version=%221.0%22%20encoding=%22UTF-8%22%3F%3E%3CRequest%3E%3CCallback%3EMirko%3C/Callback%3E%3CAction%3ESCAN%3C/Action%3E%3C/Request%3E">
<input value="Test callback" type="submit">
</form> 
```

如您所见，表单是在连接设备的我的 IP 上提交的，所以如果我把它放在我的网站上说 xyz.com 它工作正常，因为它重定向到我的本地 IP

但是现在我必须将它集成到 WebRequest 中，因为我无法进入客户端响应。所以如果我写

```
req = (HttpWebRequest)HttpWebRequest.Create("http://192.168.0.78:80/XXX/%3C%3Fxml%20version=%221.0%22%20encoding=%22UTF-8%22%3F%3E%3CRequest%3E%3CCallback%3EMirko%3C/Callback%3E%3CAction%3ESCAN%3C/Action%3E%3C/Request%3E"); 
```

现在这不起作用，显然是因为它试图在实时服务器中找到我的 IP 地址..

那么我还有其他方法可以在这里实现我的目标吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:08:39.427

我用`HTTPWebRequest`来解决问题

# encryption - 在 URL 中包含加密密码？可能的？

> ID：11027708
> 
> 赞同：1
> 
> 时间：2012-06-14T06:22:02.537
> 
> 标签：encryption, encryption-symmetric

我们有一个典型的基于 Web 的登录系统。我们希望客户能够生成一个**永不过期**的“登录链接”并包含他们的密码。因此，我们希望创建一个链接，其中包含加密形式的密码。注意：我知道最好的方法是查找表，其中每个链接都有一个唯一的键......我不会详细说明为什么这对我们不起作用；它不会。

我不熟悉公钥加密。也许这就是我需要的？

这就是我的想法。这可能还不够，所以请告诉我：

定义：user-password 是指我们想要在链接中加密的用户密码。

我们不能为所有用户密码使用一个加密密钥，因为可以通过生成大量链接来派生加密密钥，所以......

*   使用标准形式的对称加密。

*   服务器有一个包含 1000 个复杂加密密钥的文本文件。

*   生成链接时（使用具有该列表的 PHP 脚本），选择 1000 个加密密钥中的一个来加密其明文密码（按顺序选择，而不是随机选择以防止相同时间被选择） .

*   在加密用户密码之前，在它的开头添加“s345lm34l5k342342343534432324sdfs”之类的内容，以“加盐”它。（例如：password1 变为 s345lm34l5k342342343534432324sdfspassword1）。“加盐”使得解密字典攻击变得更加困难。这种盐是保密的。但是，当然，它存在被泄露的风险，它是所有密码的一种盐，所以......

*   此外，密码中还添加了第二个随机生成的盐。此盐使用单个强密码进行加密。因为盐和加密它的密码都是随机的字节模式，所以很难确定盐。

*   链接生成器工具仅允许您每 10 分钟生成 15 个链接，然后锁定 IP。

*   除非提供给它的用户/密码实际上是有效的用户/密码组合，否则链接制作工具不会生成链接。这样，如果有人只是尝试生成链接来确定加密信息，它将无法正常工作。尽管如此，从理论上讲，他们可以获得有效的用户/密码并尝试暴力破解。

这安全吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T20:23:57.720

不，因为加密的密码已经变成了密码。你试过 SSL 吗？SSL 应该可以解决您的问题，您可以在 HTTP 级别上使用纯 URL。

# java - 在 Jackson/Jaxb 中打开一个元素

> ID：11027713
> 
> 赞同：4
> 
> 时间：2012-06-14T06:22:10.347
> 
> 标签：java, jaxb, jersey, jackson

我正在使用 Jersey+Jackon 制作一个与 JSON 一起使用的 REST API。

假设我有一个类如下：

```
@XmlRootElement
public class A {
    public String s;
} 
```

这是我使用该类的球衣方法：

```
@GET
@Produces(MediaType.APPLICATION_JSON)
public Object get(@PathParam("id") String id) throws Exception{
    A[] a= new A[2];
    a[0] = new A();
    a[0].s="abc";
    a[1] = new A();
    a[1].s="def";
    return a;
} 
```

输出是：

```
{"a":[{"s":"abc"},{"s":"def"}]} 
```

但我希望它是这样的：

```
[{"s":"abc"},{"s":"def"}] 
```

我应该怎么办？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:28:38.720

您的要求似乎是从 json 字符串中删除根元素。这可以在 Jersey 中进行如下配置。在 Jersey 中，是否删除根元素由`JSONConfiguration.rootUnwrapping()`. 更多细节可以[在 Jersey 和 CXF 中的 JSON 支持中](http://good-good-study.appspot.com/blog/posts/6004)找到。

这是执行此操作的示例代码。

```
 @Provider
   public class MyJAXBContextResolver implements ContextResolver<JAXBContext> {

       private JAXBContext context;
       private Class[] types = {StatusInfoBean.class, JobInfoBean.class};

       public MyJAXBContextResolver() throws Exception {
           this.context = new JSONJAXBContext(
                   JSONConfiguration.mapped()
                                      .rootUnwrapping(true)
                                      .arrays("jobs")
                                      .nonStrings("pages", "tonerRemaining")
                                      .build(),
                   types);
       }

       public JAXBContext getContext(Class<?> objectType) {
           return (types[0].equals(objectType)) ? context : null;
       }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:28:12.387

第一个是有效的 JSON 字符串。

第二个不是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T18:38:15.453

`<servlet>`您可以尝试在相关节点下将以下内容添加到您的 web.xml ：

```
<init-param>
    <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
    <param-value>true</param-value>
</init-param> 
```

[Jersey 文档](http://jersey.java.net/nonav/documentation/latest/user-guide.html#json.pojo.approach.section)提供了有关此设置的更多信息。

此功能是在 Jersey 1.4 中引入的，依赖于 Jackson。如果您使用的是 Glassfish 3.0.1 或更低版本捆绑的版本，则需要[按照升级说明进行操作](http://jersey.java.net/nonav/documentation/latest/user-guide.html#glassfish)。

# php - 登录脚本中的冗余代码？

> ID：11027720
> 
> 赞同：0
> 
> 时间：2012-06-14T06:23:01.543
> 
> 标签：php, mysql

我前段时间在某个页面上找到了一个登录脚本，在查看检查用户是否有效的代码时，似乎有少量代码是多余的。

```
$qry = "SELECT username FROM users WHERE ".
"username = '". $username ."' AND password = '" . md5($password) . "'";
$result = mysql_query($qry);
if(mysql_num_rows($result) == 1) {
    while($row = mysql_fetch_assoc($result)) {
        $_SESSION['USERNAME'] = $username;
        $_SESSION['PASSWORD'] = $password;
    }
    session_write_close();
    header("location: memberpage.php");
} else { .... } 
```

对我来说，while 循环似乎是多余的，因为 if 代码已经检查用户是否有效（返回 1 行）。我可以删除while循环并获得相同的结果，还是我应该像某种额外的安全措施那样真正检查行数是否有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T06:25:57.490

是的，这绝对是多余的，您可以安全地删除`while`循环。至于查询的**安全性**，请查看：

*   [在 PHP 中防止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:27:15.937

不需要while循环，如果没有结果则条件失败

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T06:36:47.017

```
 $result=db_query("SELECT username FROM users WHERE ".
  "username = '". $username ."' AND password = '" . md5($password) . "'");
 $res=db_fetch_array($result);
if(isset($res['username']))
{
   $_SESSION['USERNAME'] = $username;
    $_SESSION['PASSWORD'] = $password;

 } 
```

# ios - 使用自定义按钮从 Core Data UITableView 中删除一行

> ID：11027721
> 
> 赞同：1
> 
> 时间：2012-06-14T06:23:07.740
> 
> 标签：ios, core-data, nsfetchedresultscontroller

我有一个`UITableView`由核心数据填充的单元格和一个`NSFetchedResultsController`. 我的自定义单元格上有一个自定义按钮，我打算用它来删除单元格。添加标准的滑动删除非常容易，但我宁愿使用这个自定义按钮。有谁知道我如何将一个动作连接到从数据模型中删除条目并从 中删除单元格的按钮`UITableView`？我无法为我的一生找到一个好的解决方案。

编辑：

这是我必须使用标准滑动删除的代码。有什么办法可以修改它以使用按钮？

```
if (editingStyle == UITableViewCellEditingStyleDelete) {

    [self.tableView beginUpdates];

    // Delete the task 
    Task *taskToDelete = [self.fetchedResultsController objectAtIndexPath:indexPath];
    NSLog(@"Deleting (%@)", taskToDelete.name);
    [self.managedObjectContext deleteObject:taskToDelete];
    [self.managedObjectContext save:nil];

    // Delete the row 
    [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    [self performFetch];

    [self.tableView endUpdates];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T06:34:11.613

总体概述：

1.  将按钮连接到控制器上的操作，`deleteRow:(id)sender`；
2.  将`sender`是按钮。获取它的superview，然后是它的superview 的superview，依此类推，直到你有对UITableViewCell 的引用。（使用 循环搜索`isKindOfClass:`，不要假设按钮仅向下 1、2、3 级。）
3.  调用表格视图的`indexPathForCell:`方法将单元格引用转换为索引路径。
4.  在获取的结果控制器上使用`objectAtIndexPath:`以获取对象。

然后删除它！如果您正在处理 NSFetchedResultsController 委托方法，他们将负责删除已删除的行。

示例代码（在没有编译器检查的情况下键入）：

```
- (void)deleteRow:(id)sender
{
    id view = [sender superview];
    while (view && ![view isKindOfClass:[UITableViewCell class]]) {
        view = [view superview];
    }
    UITableViewCell *cell = view;
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
    NSManagedObject *task = [fetchedResultsController objectAtIndexPath:indexPath];
    [self.managedObjectContext deleteObject:task];
    [self.managedObjectContext save:nil];
} 
```

而已。不要尝试从表格视图中删除该行。当对象被删除时，NSFetchedResultsController 将检测更改并更新您的表格视图，假设您按照 NSFetchedResultsController 文档中的描述设置了委托方法。如果您还没有，请阅读文档（只需在 Xcode 中选择双击“NSFetchedResultsController”）。

# ios - iPhone：一段时间后所有动画停止工作

> ID：11027722
> 
> 赞同：11
> 
> 时间：2012-06-14T06:23:10.860
> 
> 标签：ios, objective-c

我最近有一些奇怪的行为。所有动画有时会突然停止工作。有时一切都很顺利，有时会发生这种情况。推送和弹出视图只是卡入到位，`UITableView`cellrow 动画不起作用。

该应用程序使用了很多后台线程，所以那里可能有什么东西？

我不能真正发布代码，因为我不知道问题出在哪里。

有没有人有同样的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T03:06:14.490

那可能是您尝试在不同的后台线程中更新 UI/动画吗？

尝试？

```
dispatch_async(dispatch_get_main_queue(), ^{
  // code to update ui or start animation
}); 
```

# java - java中的快速语义角色标记工具

> ID：11027726
> 
> 赞同：2
> 
> 时间：2012-06-14T06:23:34.917
> 
> 标签：java, nlp

我正在开发一个需要在 java 中进行**FAST**语义角色标记的应用程序。你能给我推荐一些好的工具吗？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T07:29:41.820

你可以试试ff：

1.  [配合工具](http://code.google.com/p/mate-tools/)（我目前正在使用）
2.  [BioKIT](http://nlp.comp.nus.edu.sg/software) - 用于生物医学文本的 SRL
3.  [SEMAFOR](http://www.ark.cs.cmu.edu/SEMAFOR/) - 解析器 (MST) 需要 8GB 内存
4.  [Propbank-Nombank 框架](http://nlp.cs.lth.se/software/semantic_parsing:_propbank_nombank_frames/)和[The LTH System for Frame-Semantic Structure Extraction](http://nlp.cs.lth.se/software/semantic_parsing:_framenet_frames/) 可能与 Mate 工具有关
5.  [清除NLP](http://clearnlp.wikispaces.com/)
6.  [CogCompNLP 管道](https://github.com/CogComp/cogcomp-nlp/tree/master/pipeline)：SRL 的多个版本（动词、介词、逗号、名词）

我不太确定速度，但 Mate 工具并没有那么慢。它们都是用 Java 编写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T11:51:31.027

如果你愿意从你的 Java 程序中调用 C 代码，那么 Senna 可能是最快的语义角色标签软件，而且效果很好。它使用 PropBank。它带有适用于 Windows、Linux 和 OSX 的二进制文件。

# objective-c - 试图使 UITableView 的 tableHeaderView 超出表格范围

> ID：11027727
> 
> 赞同：4
> 
> 时间：2012-06-14T06:23:41.187
> 
> 标签：objective-c, ios, xcode

我正在尝试在我的桌子上添加一个“上限”。当您将桌子向下移动并看到它在上方有机地结束时。由于自定义单元格，这是必要的。我认为使用 tableHeaderView 会更好，但它已添加到 tableView 内容中并作为表格的一部分出现。我希望它被隐藏并且仅在您将表格从其范围移动时才可见并且它应该反弹回来。

```
|*cap here*|
|==========| <- top of device
|top cell  |
rest of table... 
```

希望这个完美绘制的示意图有助于理解我的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T07:18:39.693

在您的表格视图顶部添加您的视图

```
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f - yourHeight, self.view.frame.size.width, yourHeight)];
[self.tableView addSubview:view]; 
```

然后，将其添加到 tableview 的 scrollViewDidScroll 方法中

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    scrollView.contentInset = UIEdgeInsetsMake(scrollView.contentOffset.y, 0.0f, 0.0f, 0.0f);
} 
```

有关更多信息，请查看此项目

[https://github.com/enormego/EGOTableViewPullRefresh](https://github.com/enormego/EGOTableViewPullRefresh)

# iphone - 在 iPhone 上后台运行应用程序时发送电子邮件

> ID：11027732
> 
> 赞同：0
> 
> 时间：2012-06-14T06:23:53.747
> 
> 标签：iphone, background, scheduled-tasks

我想开发一个将在后台连续运行的 iPhone 应用程序。我想在应用程序在后台运行时以一定的时间间隔向特定的电子邮件 ID 发送电子邮件。我该怎么做呢？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T06:43:50.757

首先，您应该做更多的研究，而不仅仅是询问如何做到这一点。哪里不在这里为你编码。

其次，您打算如何在后台运行您的应用程序？只有播放音频、跟踪用户位置 (GPS) 或 VOIP 客户端的应用程序才允许在后台运行。

第三，您不能在没有用户交互的情况下发送电子邮件，除非您直接通过 SMTP 服务器或使用某种 Web 服务发送邮件。

# html - 在多个 html 页面中调用单个 css 菜单

> ID：11027738
> 
> 赞同：2
> 
> 时间：2012-06-14T06:24:36.367
> 
> 标签：html, css

我正在创建一个网站。

我有一个所有页面通用的菜单栏。我想从我的站点中的任何页面调用包含菜单栏的 HTML 页面。

是否有任何语法可以包含 HTML 文件，以便我可以解决我的问题。

如果有怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:27:27.770

您需要为您的文件使用 php 扩展名而不是 html 并使用

```
<?php include_once('header.php'); ?> 
```

您希望在哪里显示标题

如果您在本地机器上工作，请安装[xampp](http://www.apachefriends.org/en/xampp.html)，否则您将无法看到您的网站，因为 php 是服务器端脚本语言

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:33:58.397

**其他问题的回答**

您正在描述[服务器端包含](http://en.wikipedia.org/wiki/Server_Side_Includes).

> 服务器端包含对于在整个站点中包含一段通用代码很有用，例如页眉、页脚和导航菜单。

使用示例：

```
<!--#include virtual="../quote.txt" --> 
```

这会将 的文本添加`quote.txt`到页面 - 如果您将其添加到多个页面，您可以在这个文件中进行更改，它将显示在包含的所有页面上。

不同的 Web 服务器对这些有不同的支持和附加功能，因此您需要检查您的文档。

许多需要动态功能（例如从数据库中获取数据）的网站将使用某种服务器端脚本语言来实现这种功能 - 示例包括 PHP、Perl、ASP.NET、JSP 等等。

# c# - Httpwebrequest 未检索 Cookie

> ID：11027740
> 
> 赞同：0
> 
> 时间：2012-06-14T06:24:51.390
> 
> 标签：c#, windows-phone-7

我创建了以下代码，据我所知应该可以正常工作吗？它根本没有收到任何 cookie，我已经与 Wire Shark 进行了仔细检查，并且 cookie 正在被退回……这是在 Windows Phone 7 上开发的。

```
 byte[] content = GetLoginRequestContent(username, password);

        CookieContainer cookieContainer = new CookieContainer();
        HttpWebRequest httpWebRequest = (HttpWebRequest)WebRequest.Create(LoginUri);
        httpWebRequest.ContentType = AuthContentType;
        httpWebRequest.Method = "POST";
        httpWebRequest.Headers["referer"] = LoginRequestReferer;
        httpWebRequest.CookieContainer = cookieContainer;
        httpWebRequest.Headers[HttpRequestHeader.ContentLength] = content.Length.ToString();

        httpWebRequest.BeginGetRequestStream(async1 =>
        {
            using (Stream stream = httpWebRequest.EndGetRequestStream(async1))
                stream.Write(content, 0, content.Length);
            httpWebRequest.BeginGetResponse(async2 =>
            {
                HttpWebResponse rep = (HttpWebResponse)httpWebRequest.EndGetResponse(async2);
                CookieCollection cookies = rep.Cookies;
                using (Stream stream = rep.GetResponseStream())
                using (StreamReader sr = new StreamReader(stream))
                {
                    String contentX = sr.ReadToEnd();
                    //if blah blah
                }
            }, null);
        }, null); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:25:55.397

如果 cookie 标记为[HttpOnly](http://www.codinghorror.com/blog/2008/08/protecting-your-cookies-httponly.html)（会话 cookie 经常出现这种情况），出于安全原因，您无法通过客户端脚本访问它们。它被发送到客户端，客户端在后续请求中将其重新发送到服务器（如果它拥有 cookie 容器），但您无法在客户端读取它的值。

# ruby - 为什么 ruby 在 rvm 中需要 --enable-pthread 才能运行 TK

> ID：11027742
> 
> 赞同：1
> 
> 时间：2012-06-14T06:25:01.750
> 
> 标签：ruby, tk

什么是真正的 --enable-pthread ？以及 ruby​​ 如何使用线程来处理 tk。

# python - 当我按箭头键时，^[[A 和 ^[[B 出现在 python 解释器中

> ID：11027749
> 
> 赞同：5
> 
> 时间：2012-06-14T06:25:27.617
> 
> 标签：python, ipython

这是怎么回事？我尝试了 iPython 和常规 Python 解释器，都显示 ^[[A 和 ^[[B 用于向上和向下箭头，而不是以前的命令。

**平台：** Ubuntu 12.04。

**Python：** 2.7.3 与 pythonbrew 一起安装

**终端：** Mac OSX 10.6 上的 iTerm 2，通过 SSH 连接。

从未通过 SSH 在 Python shell 中工作，但在本地工作。

运行语言环境输出：

```
LANG=en_US.UTF-8
LANGUAGE=en_US:en
LC_CTYPE="en_US.UTF-8"
LC_NUMERIC="en_US.UTF-8"
LC_TIME="en_US.UTF-8"
LC_COLLATE="en_US.UTF-8"
LC_MONETARY="en_US.UTF-8"
LC_MESSAGES="en_US.UTF-8"
LC_PAPER="en_US.UTF-8"
LC_NAME="en_US.UTF-8"
LC_ADDRESS="en_US.UTF-8"
LC_TELEPHONE="en_US.UTF-8"
LC_MEASUREMENT="en_US.UTF-8"
LC_IDENTIFICATION="en_US.UTF-8"
LC_ALL= 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T06:39:41.443

由于您使用 pythonbrew 安装了 Python，因此您必须`libreadline-dev`在包管理器中安装该包，*然后*重新编译 Python。

`libreadline-dev`在大多数 Linux 发行版（Ubuntu、Debian、Fedora...）中，该软件包的名称或类似名称。Gentoo 或 Arch 系统不需要此步骤，它们始终包含对库的开发支持。

从包管理器安装的 Python 也不需要此步骤。

**脚注：**语言环境无关紧要。终端仿真器无关紧要。SSH 无关紧要。我从未见过这些因素会影响行编辑功能，尽管我认为一切皆有可能。

**脚注 2：**我将向 pythonbrew 的文档提交一个补丁，这不是第一次有人抱怨 readline 丢失了。 **更新：** [拉取请求](https://github.com/utahta/pythonbrew/pull/87) **更新 2：**合并。

# scala - Play Framework Form 只有 18 个参数

> ID：11027750
> 
> 赞同：6
> 
> 时间：2012-06-14T06:25:29.703
> 
> 标签：scala, playframework, playframework-2.0

我观察到，当我向 Play Framework Form-class 添加超过 18 个参数时，我得到了一个很长的（对我来说难以理解的）编译错误。

这是记录在案的限制吗？我需要在表单帖子中接收多达 29 个参数。当我从开放标准实现协议时，我不会决定参数的设计和数量。

我是这样映射的：

```
val registration = Form(mapping(
    "client_type" -> nonEmptyText,
    "client_id" -> optional(nonEmptyText),
    ... up to 29 args, all optional(nonEmptyText)
    ){ (clientType, clientId ...) => RegistrationRequest(clientType, clientId ...) }
     { req => None }) 
```

我的策略是以这种方式进行映射，而不是应用/取消应用并创建案例类的层次结构。原因是要解决 Case 类中的 22 个参数限制，这是我遇到的第一个看似任意的限制。最多 18 个 args 映射工作，之后我得到一个很长的编译错误。

可以在此处找到错误消息（太长而无法包含）：[https ://gist.github.com/2928297](https://gist.github.com/2928297)

我正在寻找有关如何解决此限制的建议。我知道在 Post 表单中发送 29 个参数是不好的设计，但它仍然应该是可能的。

* * *

**破解/解决方法/解决方案**

好的，这是我一起破解的解决方法（写这篇文章比实施花费的时间要长得多，我破解了大约 30 分钟）

我编写了预处理请求参数并添加组前缀以对某些参数进行分组的函数。然后我使用生成的 Map[String, String] 并继续处理表单类，像往常一样进行验证等。这允许我在映射中使用嵌套案例类并低于 18 个参数限制。

当心：前面有丑陋的代码！我可能不应该展示这样的早期 hacky 代码，但我希望它能帮助其他想要解决方法的人。

```
def preprocessFormParams(prefix:String, replace:String)(implicit request:Request[AnyContent]):Map[String, String] = request.body.asFormUrlEncoded.map( _.filterKeys( _.startsWith(prefix)).map( m => m._1.patch(0, replace, prefix.length)  -> m._2.head )).getOrElse(Map.empty)
def unprocessedFormParams(prefixes:Set[String])(implicit request:Request[AnyContent]):Map[String, String] = request.body.asFormUrlEncoded.map( _.filterKeys( !prefixes.contains(_) ).map( m => m._1 -> m._2.head )).getOrElse(Map.empty) 
```

所以这些函数可能应该用于理解或拆分，但这里是：preprocessedFormParms 接受一个前缀并替换它：

```
val clientParams = preprocessFormParams("client_", "client.")
("client_id" -> "val1", "client_type" -> "val2") becomes ("client.id" -> "val1", "client.type" -> "val2") 
```

当我有 group.key1, group.key2 形式的参数时，我可以像这样嵌套案例类

```
Form(mapping("client" -> mapping("type" -> nonEmptyText
    "id" -> optional(nonEmptyText),
    "secret" -> optional(nonEmptyText))
    (RegisterClient.apply)(RegisterClient.unapply)
    ... more params ...)
    (RegisterRequest.apply)(RegisterRequest.unapply) 
```

在我的行动中，我继续过滤掉我的每个组

```
implicit request =>
val clientParams = preprocessFormParams("client_", "client.")       
val applicationParams = preprocessFormParams("application_", "application.")
val unprocessedParams = unprocessedFormParams(Set("client_", "application_"))
val processedForm = clientParams ++ applicationParams ++ unprocessedParams 
```

最后，我可以像平常一样应用我的表单，但现在我得到了嵌套结构，它减少了参数的数量，并希望使案例类更易于管理。

```
clientRegistrationForm.bind(processedForm).fold( ... ) 
```

使用这种方法，您可以减少参数的数量。如果您的参数没有像我的问题那样易于分组的相同前缀，那么您仍然可以使用相同的基本方法，但可以根据其他标准进行过滤。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T06:50:38.270

你使用的`mapping`方法不是单一的方法，而是重载的。对于单个参数，它有两个类型参数，一个用于结果类型，一个用于您正在使用的元素。它构造一个`ObjectMapping1`. 对于两个参数，它具有三个类型参数，并构造一个`ObjectMapping2`.

正如您所注意到的，这些`ObjectMappingX`类被定义为 。`ObjectMapping18`您可以在 Play 的源代码中找到它 [`play/api/data/Forms.scala`](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/data/Forms.scala)

推荐的解决方案是避免这种大小的非嵌套形式。如果这是不可避免的，您可以使用与内置 Play 不同的库，或者您可以定义缺少的`ObjectMappingX`对象和相应的方法来自己构建它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T06:48:17.803

几周前，我就这个问题[开了一张票。](https://play.lighthouseapp.com/projects/82401/tickets/504-support-tuple-22-not-just-tuple-18-in-apidataformsscala)

如果你投票给它，也许它会得到 Play 开发者的关注。

怀疑它在他们的优先级列表中很高（不幸的是，它或多或少只是复制粘贴到 19、20、21 和 22 映射[T]）

如果你很绝望，你可以分叉 Play；否则，想出一个解决方法，例如，利用嵌套表单或将 > 22 个字段模型拆分为单独的表单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-13T14:10:17.130

前几天我不得不解决这个限制并且没有找到这个 SO 帖子并想出了一种不同的做事方法，尽管它看起来有点不稳定，但它似乎有效。

**我们的表单组件**

```
import play.api.data.Form
import play.api.data.Forms._

case class P1_18(f1: String,f2: String,f3: String,f4: String,f5: String,f6: String,f7: String,f8: String,f9: String,f10: String,f11: String,f12: String,f13: String,f14: String,f15: String,f16: String,f17: String,f18: String)

case class P2_18(f1: String,f2: String,f3: String,f4: String,f5: String,f6: String,f7: String,f8: String,f9: String,f10: String,f11: String,f12: String,f13: String,f14: String,f15: String,f16: String,f17: String,f18: String)

case class P36(f1: String,f2: String,f3: String,f4: String,f5: String,f6: String,f7: String,f8: String,f9: String,f10: String,f11: String,f12: String,f13: String,f14: String,f15: String,f16: String,f17: String,f18: String,f19: String,f20: String,f21: String,f22: String,f23: String,f24: String,f25: String,f26: String,f27: String,f28: String,f29: String,f30: String,f31: String,f32: String,f33: String,f34: String,f35: String,f36: String) 
```

P36 是你真正想要的对象，P1/P2 只是你用来在框架约束内构建它的类，我在我的实际应用程序中将这些私有到包装表单的对象。

然后我们有了表单定义，这就是神奇发生的地方：

```
val f = Form(
    mapping(
    "" -> mapping(
        "f1" -> text,
        "f2" -> text,
        "f3" -> text,
        "f4" -> text,
        "f5" -> text,
        "f6" -> text,
        "f7" -> text,
        "f8" -> text,
        "f9" -> text,
        "f10" -> text,
        "f11" -> text,
        "f12" -> text,
        "f13" -> text,
        "f14" -> text,
        "f15" -> text,
        "f16" -> text,
        "f17" -> text,
        "f18" -> text
    )(P1_18.apply)(P1_18.unapply),
    "" -> mapping(
        "f19" -> text,
        "f20" -> text,
        "f21" -> text,
        "f22" -> text,
        "f23" -> text,
        "f24" -> text,
        "f25" -> text,
        "f26" -> text,
        "f27" -> text,
        "f28" -> text,
        "f29" -> text,
        "f30" -> text,
        "f31" -> text,
        "f32" -> text,
        "f33" -> text,
        "f34" -> text,
        "f35" -> text,
        "f36" -> text
    )(P2_18.apply)(P2_18.unapply)
    )(
    (p1, p2) =>
        P36(
            f1 = p1.f1,
            f2 = p1.f2,
            f3 = p1.f3,
            f4 = p1.f4,
            f5 = p1.f5,
            f6 = p1.f6,
            f7 = p1.f7,
            f8 = p1.f8,
            f9 = p1.f9,
            f10 = p1.f10,
            f11 = p1.f11,
            f12 = p1.f12,
            f13 = p1.f13,
            f14 = p1.f14,
            f15 = p1.f15,
            f16 = p1.f16,
            f17 = p1.f17,
            f18 = p1.f18,
            f19 = p2.f1,
            f20 = p2.f2,
            f21 = p2.f3,
            f22 = p2.f4,
            f23 = p2.f5,
            f24 = p2.f6,
            f25 = p2.f7,
            f26 = p2.f8,
            f27 = p2.f9,
            f28 = p2.f10,
            f29 = p2.f11,
            f30 = p2.f12,
            f31 = p2.f13,
            f32 = p2.f14,
            f33 = p2.f15,
            f34 = p2.f16,
            f35 = p2.f17,
            f36 = p2.f18
        )
    )(
        p => {
            val p1 = P1_18(p.f1,p.f2,p.f3,p.f4,p.f5,p.f6,p.f7,p.f8,p.f9,p.f10,p.f11,p.f12,p.f13,p.f14,p.f15,p.f16,p.f17,p.f18)
            val p2 = P2_18(p.f19,p.f20,p.f21,p.f22,p.f23,p.f24,p.f25,p.f26,p.f27,p.f28,p.f29,p.f30,p.f31,p.f32,p.f33,p.f34,p.f35,p.f36)
            Option(
                (p1,p2)
            )
        }
    )
) 
```

你可能会说：嗯。呃，对不起，你有一个空键绑定了两次。这怎么可能行得通？我说：

```
val dataSeq = for(i <- 1 to 36) yield s"f${i}" -> s"text no. #${i}"
val filledFormFromMap = f.bind(dataSeq.toMap)

filledFormFromMap.value

// res9: Option[P36] = Some(P36(text no. #1,text no. #2,text no. #3,text no. #4,text no. #5,text no. #6,text no. #7,text no. #8,text no. #9,text no. #10,text no. #11,text no. #12,text no. #13,text no. #14,text no. #15,text no. #16,text no. #17,text no. #18,text no. #19,text no. #20,text no. #21,text no. #22,text no. #23,text no. #24,text no. #25,text no. #26,text no. #27,text no. #28,text no. #29,text no. #30,text no. #31,text no. #32,text no. #33,text no. #34,text no. #35,text no. #36)) 
```

事实上，它确实可以毫无问题地工作。*18 对象映射限制的问题不在于表单内部*不能支持超过 18 个字段，而是绑定不支持它。但是，当我查看[ObjectMapping 源](https://github.com/playframework/playframework/blob/2.3.x/framework/src/play/src/main/scala/play/core/hidden/ObjectMappings.scala#L70)时，我注意到默认情况下`key`ObjectMapping 是一个空字符串。并且字段绑定与给定的前缀绑定，然后还与所述前缀绑定：

```
val field1 = f1._2.withPrefix(f1._1).withPrefix(key) 
```

这让我意识到表单的“顶部”只是一个空键。除了猖獗的好奇之外，我无缘无故地尝试了两个空键，因为您可以[在 ObjectMapping 2](https://github.com/playframework/playframework/blob/2.3.x/framework/src/play/src/main/scala/play/core/hidden/ObjectMappings.scala#L112)中看到空键用于两个字段：

```
 val field1 = f1._2.withPrefix(f1._1).withPrefix(key)

  val field2 = f2._2.withPrefix(f2._1).withPrefix(key) 
```

由于`mappings`字段中的字段`Mapping`只是一个`Seq[Mapping]`，我认为在深层合并方法中的所有内容以及我们没有使用键会冲突的映射，而是它们以非破坏性方式组合，因为它们都分享这个顶级密钥，这就是（我相信）play`field.nested.thing`如何根据您嵌套映射本身的方式生成您的映射。因此，总而言之，这意味着您可以对同一个键（或至少与空字符串）进行多个绑定，因此可以通过将其分解为更小的组件然后提供手册`apply`和`unapply`组合事物的方法（反对尝试使用 P36.apply 和 P36.unapply ，因为我相信由于元组限制而这些不起作用）

# java - 如何使用 MyEclipse 7.0 中的 SVN 提交/比较/替换文件？

> ID：11027752
> 
> 赞同：0
> 
> 时间：2012-06-14T06:25:30.250
> 
> 标签：java, svn, myeclipse

我第一次使用 MyEclipse 7.0。以前我使用的是 MyEclipse 6.0。在那里我可以选择将文件提交到 SVN，将本地文件与 SVN 存储库文件进行比较，用 SVN 文件替换本地文件。为此，我正走这条路。

右键单击特定文件/项目-->团队-->与存储库/commit.update 同步。

但是在 MyEclipse 7.0 中我没有选择这样做..请帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:32:07.063

转到 MyEclipse > Manage plugins 并检查列表中列出的颠覆性内容。

如果它不存在，请升级到最新版本的 MyEclipse (7.1.1)，然后通过转到 MyEclipse > 管理插件打开仪表板。您应该在那里的列表中看到颠覆性列表。您可以从那里安装它。

安装后，您的问题将得到解决。

希望这可以帮助。

# windows - 如何将参数传递给 IUPnPService.InvokeAction？

> ID：11027761
> 
> 赞同：0
> 
> 时间：2012-06-14T06:26:10.373
> 
> 标签：windows, delphi, upnp

我为我的 UPnP 设备定义了以下 SCPD 文档：

```
<?xml version="1.0"?>
<scpd xmlns="urn:schemas-upnp-org:service-1-0" >
    <specVersion>
    <major>1</major>
    <minor>0</minor>
    </specVersion>
    <actionList>
    <action>
        <name>Echo</name>
        <argumentList>
        <argument>
            <name>InText</name>
            <relatedStateVariable>Text</relatedStateVariable>
            <direction>in</direction>
        </argument>
        <argument>
            <name>ReturnText</name>
            <relatedStateVariable>Text</relatedStateVariable>
            <direction>out</direction>
        </argument>
        </argumentList>
    </action>
    </actionList>
    <serviceStateTable>
    <stateVariable sendEvents="no">
        <name>Text</name>
        <dataType>string</dataType>
    </stateVariable>
    </serviceStateTable>
</scpd> 
```

我也注册了我的 UPnP 设备。我还能够检索我的 UPnPDevice。我将如何调用 SCPD 文档中定义的回显操作？

调用动作的代码应该是这样的：

```
var o: IUPnPDeviceFinder;
    d: IUPnPDevice;
    s: IUPnPService;
    E: IEnumVARIANT;
    K: OleVariant;
    iFetched: Cardinal;
    V1, V2: OleVariant;
    r: HRESULT;
begin
  o := CoUPnPDeviceFinder.Create;
  d := o.FindByUDN('uuid:a6d332da-f8ce-43ce-8210-79eacd4231c6');

  E := d.Services._NewEnum as IEnumVARIANT;
  E.Reset;
  CheckOSError(E.Next(1, K, iFetched));

  s := IDispatch(K) as IUPnPService;

  r := s.InvokeAction('Echo', v1, v2);
  ShowMessage(v2);
end; 
```

如何为 InvokeAction 形成 v1 和 v2 参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:06:59.567

根据[MSDN Docs](http://msdn.microsoft.com/en-us/library/windows/desktop/aa382237%28v=vs.85%29.aspx)，您应该将参数作为 Variant Array 传递。在 Delphi 中，您可以使用 VarArrayOf 或 VarArrayCreate 函数

# parsing - 如何在博客页面之前跳过一个wep页面，我必须解析哪个博客页面？

> ID：11027762
> 
> 赞同：0
> 
> 时间：2012-06-14T06:26:15.943
> 
> 标签：parsing, web

我有一个解析器，它解析一个正在解析其他页面的博客页面，而不是一个页面，该页面打开保护页面，要求用户希望继续与否，因为该博客页面有一些成人内容。所以我的解析器在那个保护页面出现时失败了。知道我如何解决这个问题吗？先感谢您 ！！！

这是图像-![在此处输入图像描述](../Images/30ce92a5c4b46d45c459ab2177dbba21.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:28:19.237

这取决于保护系统的设计方式。如果只是重定向，则可以跳过该页面。但是，如果它通过设置 cookie 起作用，您将必须访问该页面，接收 cookie，然后将该 cookie 传回。

您是在解析使用`cURL`还是其他？

# ipad - 不推荐使用两阶段旋转动画。此应用程序应使用更流畅的单阶段动画

> ID：11027764
> 
> 赞同：13
> 
> 时间：2012-06-14T06:26:25.650
> 
> 标签：ipad, uiinterfaceorientation, ios5.1

我正在构建一个 ipad 应用程序。当应用程序启动时，我以横向右模式显示它。但是，一旦应用程序启动，我就会收到此消息

```
Two-stage rotation animation is deprecated. This application should use the smoother single-stage animation 
```

我在所有课程中都使用了这种方法

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

我还在 plist 文件中将支持的界面方向 (iPad) 设置为横向。如何解决此警告消息？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-18T08:49:17.687

我刚刚意识到 - 在阅读[了这个](https://stackoverflow.com/questions/6636683/how-to-eliminate-two-stage-rotation-warning)答案之后 - 我只是错误地使用了标签栏控制器：标签栏应该只用作根控制器，但是我在它之前插入了一个导航控制器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-19T16:31:51.093

如果您在情节提要中以空标签栏控制器作为 root 运行应用程序，您也可能会收到此错误消息。我刚刚开始使用一个应用程序，我`UITabBarController`还没有视图控制器，但正在呈现一个登录模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T06:41:25.060

问题是您的应用程序正在使用以下方法之一，这些方法在 iOS 5.0 中已被弃用：

```
didAnimateFirstHalfOfRotationToInterfaceOrientation:
willAnimateFirstHalfOfRotationToInterfaceOrientation:duration:
willAnimateSecondHalfOfRotationFromInterfaceOrientation:duration: 
```

您需要修改视图控制器以替代`willAnimateRotationToInterfaceOrientation:duration:`，而*不是*覆盖任何“HalfOfRotation”方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-22T06:18:04.367

检查标签栏的数组声明..你可能犯的错误：我在分配后声明了数组对象

```
tabBarController.viewControllers = tabControlArry;
[tabControlArry addObject:navCOntroller];
[tabControlArry addObject:navController1]; 
```

正确方法：

```
[tabControlArry addObject:navCOntroller];
[tabControlArry addObject:navController1];
tabBarController.viewControllers = tabControlArry; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-12T12:18:47.207

此错误消息与 TabBarController 的使用有关。当您不将 tabBarController 作为应用程序的**“根控制器”**时，您可能会遇到此错误。因此，将您的 TabBarController 作为根控制器，此错误将不再困扰您。

# android - 从自定义列表适配器中删除项目

> ID：11027767
> 
> 赞同：3
> 
> 时间：2012-06-14T06:26:42.807
> 
> 标签：android, listview

**问题**我有带有复选框的自定义列表适配器视图我想在选中项目的基础上删除列表项目。这是我的代码

```
 for(int i=0;i<adapter.getCount();i++)
                    {   
                        System.out.println("Adapter Count:"+adapter.getCount());
                        if(checks.get(i)==true)
                        {
                            checks.put(i,false);
                            adapter.remove(feedbackList.get(i));                
                            adapter.notifyDataSetChanged();                                                 
                        }

                    } 
```

它几乎工作正常，项目正在删除，但有些项目即使检查也不会被删除......如果有人可以帮助我......提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:32:33.483

您正在修改您的适配器，同时您正在迭代它。你应该找到一个更好的方法来做到这一点。

例子：

您的适配器中有 3 个元素，并且想要删除所有（`1`、、、`2`）`3`。

卸下`1`适配器后，只剩下 ( `2`, `3`) 了。

你的计数器`i`在你的适配器的第二个字段所以你删除`3`并且你的'for'完成了。

`2`不会被删除。

**编辑**（一个解决方案）：我没有验证它，但这应该工作：

```
LinkedList<Integer> list = new LinkedList<Integer>();
for(int i=0;i<adapter.getCount();i++)
{   
     System.out.println("Adapter Count:"+adapter.getCount());
     if(checks.get(i)==true)
     {
         list.addFirst(i);                                           
     }
}  
//list will now contain all positions of checked items (e.g. 1,5,7,8,9,..)
for(int i=0;i<list.length;i++)
{
   //list.get(i) gets the index of the checked item   
   adapter.remove(feedbackList.get(list.get(i)));             
   adapter.notifyDataSetChanged();           
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T07:30:15.617

```
ArrayAdapter<String> adptr= new ArrayAdapter<String>(getActivity(),R.layout.custom_spinner_text,list)
String delete =adptr.getItem(0));
adptr.remove(delete); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T06:46:21.113

试试下面的代码

```
 for(int i=0;i<feedbackList.size();i++)
        {
            if(checks.get(i) == true)
            {
                feedbackList.remove(i);
                checks.remove(i);
                i--;
            }
        }

adapter.notifyDataSetChanged(); 
```

并使用 feedbackList 和检查作为类级别的变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T06:43:00.787

通过 notifyDataSetChanged 方法从位置和重新加载列表中删除数组项：

```
for(int i=0;i<adapter.getCount();i++)
                    {   
                        System.out.println("Adapter Count:"+adapter.getCount());
                        if(checks.get(i)==true)
                        {
                            checks.put(i,false);
                            //remove items from soruce                
                            adapter.notifyDataSetChanged();                                                 
                        }

                    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-25T19:28:33.187

你可能需要更新你的观察者

```
for(DataSetObserver observer : observers) {
        observer.onChanged();
    } 
```

# c# - 如何使用 c# 将 XSL 应用于带有 xsltargument 的 XML？

> ID：11027769
> 
> 赞同：0
> 
> 时间：2012-06-14T06:26:51.577
> 
> 标签：c#, asp.net, .net

我有一个用户控件，我想在其中将页面 url 传递给我的 XSL 表并将其应用于我的 XML 文件。因此它应该产生一些 HTML 输出。请解释如何做到这一点？

```
xml file name: myXml.xml 
Xsl file name: mwXsl.xsl
Parameter to be passed by usercontrol(.cs) file: url of parent page. 
```

我已经定义了 XSL 样式表。我只需要将参数传递给该文件。在 usercontrol(ascx) 文件中我有这个代码

```
<asp:Xml ID="BControl" runat="server" DocumentSource="/wsitemap.sitemap" TransformSource="/Bread.xslt"></asp:Xml> 
```

其中 wsitemap.sitemap 是一个 XML 文件。如果我的 XSLT 得到参数，上面的代码将能够产生所需的输出。所以我需要 C# 代码。

在用户控件（.cs 文件）中，我有：

```
public static string Transform(string xml, string xsl, XsltArgumentList argsList) 
    { 
        XDocument selectedXml = XDocument.Parse(xml);
        XslCompiledTransform xmlTransform = new XslCompiledTransform();
        StringBuilder htmlOutput = new StringBuilder();
        XmlWriter writer = XmlWriter.Create(htmlOutput);
        xmlTransform.Load(new XmlTextReader(new StringReader(xsl)));
        xmlTransform.Transform(selectedXml.CreateReader(), argsList, writer);
        return htmlOutput.ToString();
    } 
    protected void Page_Load(object sender, EventArgs e)
    {
        string curPageId = Page.Request.Url.AbsoluteUri;
        XsltArgumentList xslArgs = new XsltArgumentList();
        xslArgs.AddParam("curPage", "", curPageId);
        string output=Transform("wsitemap.sitemap","bread.xslt",xslArgs);
        Response.Clear(); Response.Write(output);
    } 
```

但是这段代码不起作用，请告诉我任何其他方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:31:25.993

您可以使用`XsltArgumentList`C# 类来传递参数。您可以在那里添加所有参数并传递给 xsl。

请查看以下 SO Link，

[通过 .NET 将参数传递给 XSLT 样式表](https://stackoverflow.com/questions/1521064/passing-parameters-to-xslt-stylesheet-via-net)

# gcc - 如何使用多个 GCC - LLVM 和 clang

> ID：11027771
> 
> 赞同：0
> 
> 时间：2012-06-14T06:27:09.363
> 
> 标签：gcc, llvm, clang, llvm-clang

在我的盒子里，我们以 root 用户身份安装了 GCC 4.1.2，但要编译 LLVM 和 clang，我需要更高版本的 GCC。所以我**在我的本地目录中下载并安装了 GCC 4.5.0**。

如何使现有程序引用 GCC 4.5.0 库和包含。

```
> gcc --version
gcc (GCC) 4.1.2 20080704 (Red Hat 4.1.2-46)
Copyright (C) 2006 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

> which gcc
/usr/bin/gcc

> setenv PATH gcc-4.5.0/bin/gcc/gcc-4.5.0/bin:$PATH

> gcc --version
gcc (GCC) 4.5.0
Copyright (C) 2010 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

> which gcc
gcc-4.5.0/bin/gcc/gcc-4.5.0/bin/gcc 
```

只是设置系统 PATH 对我有帮助，还是我需要为现有代码做任何其他事情来引用 GCC 4.5.0 套件？

```
gcc-4.5.0/bin/gcc/gcc-4.5.0/> ls -l
total 24
drwxrwxr-x 2 prasad ppusers 4096 Jun 13 21:32 bin
drwxrwxr-x 3 prasad ppusers 4096 Jun 13 21:32 include
drwxrwxr-x 3 prasad ppusers 4096 Jun 13 21:32 lib
drwxrwxr-x 2 prasad ppusers 4096 Jun 13 21:32 lib64
drwxrwxr-x 3 prasad ppusers 4096 Jun 13 21:32 libexec
drwxrwxr-x 6 prasad ppusers 4096 Jun 13 21:32 share 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:32:55.390

执行此操作的最佳方法因构建系统而异。

对于 make（可能还有其他系统），C 编译器在`CC`变量中指定，因此您可以调用

```
CC=/path/to/new/gcc make 
```

如果项目使用来自 autoconf 的配置脚本，您可以使用类似的东西

```
./configure CC=/path/to/new/gcc 
```

# android - Android：使用 AudioRecord 将音频流式传输到 Android 中的 URL

> ID：11027776
> 
> 赞同：1
> 
> 时间：2012-06-14T06:27:33.607
> 
> 标签：android, http-post, audio-streaming, localserver

我正在尝试使用音频记录立即将发送的语音数据发送到本地服务器。我能够录制语音并将其存储在 SD 卡中。但我想将音频语音存储在缓冲区中并使用 HTTP POST 立即发送到服务器。**我该如何继续**.被击中..？我在 ICS 即 android 4.0.3 版本中创建这个应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T10:17:57.273

得到了解决方案.. 将语音数据作为 jsonarray 发送到服务器并作为 json 对象接收。将 jsonobject 转换回短数组 n 写入音轨然后播放。这是示例代码工作。

```
 public void SendAudio() {

    String LOG_TAG = null;
    long SAMPLE_INTERVAL = 1;

    Log.e(LOG_TAG, "start send thread, thread id: ");

    int bytes_read = 0;
    int bytes_count = 0;

    br = br % 5;
    br++;
    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpClient httpclient_recv = new DefaultHttpClient();
        // System.out.println("mmdata--------- " + value);
        HttpPost httppost = new HttpPost("http://192.168.1.39/call");
        HttpPost httppost_recv = new HttpPost("http://192.168.1.39/ping");
        // Unix time stamp
        long unixTime = System.currentTimeMillis();
        String timestamp = String.valueOf(unixTime);

        // Json Format
        JSONObject holder = new JSONObject();
        JSONObject holder_recv = new JSONObject();
        JSONArray jArray = new JSONArray();
        try {

            holder.put("UserId", "1");
            holder.put("TimeStamp", timestamp);
            holder.put("SessionId", "1");

            Queue<byte[]> qArray = new LinkedList<byte[]>();
            qArray.add(bData);

            byte[] tmparr = qArray.poll();
            for (int i = 0; i < tmparr.length; i++) {
                jArray.put(i, tmparr[i]);
            }
            System.out.println("send audio -- " + jArray);
            holder.put("MMData", jArray.toString());
            System.out.println("JSON -- " + holder.toString());

            holder_recv.put("UserId", "1");
            holder_recv.put("TimeStamp", timestamp);
            holder_recv.put("SeqNo", "100");
            holder_recv.put("SessionId", "0");

        } catch (JSONException e1) {
            e1.printStackTrace();
        }
        System.out.println("time " + timestamp);
        try {

            StringEntity se = new StringEntity(holder.toString());
            StringEntity se_recv = new StringEntity(holder_recv.toString());

            se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE,
                    "application/json"));
            se_recv.setContentType(new BasicHeader(HTTP.CONTENT_TYPE,
                    "application/json"));

            httppost.setEntity(se);
            httppost_recv.setEntity(se_recv);
            HttpResponse response = httpclient.execute(httppost);
            HttpResponse response_recv = httpclient_recv
                    .execute(httppost_recv);

            if (response_recv != null) {
                t = EntityUtils.toString(response_recv.getEntity());
                System.out.println("after response -- " + t);
                Queue<String> qe = new LinkedList<String>();
                qe.add(t);

                t = null;
                System.out.println("on play side ...1 ");
                try {
                    System.out.println("on play side ...2 ");
                    JSONObject get = new JSONObject(qe.poll());

                    // JSONArray jArray_recv = get.getJSONArray("MMData");

                    String mmdata = (String) get.get("MMData");
                    JSONObject temp2 = new JSONObject("{ \"MMData\" : "
                            + mmdata + "}");
                    JSONArray jArray_recv = temp2.getJSONArray("MMData");
                    System.out.println("jsonarray -- " + jArray_recv);
                    // String timeData = (String) get.get("TimeStamp");
                    String userData = (String) get.get("UserId");
                    // String sessionId = (String) get.get("TimeStamp");
                    System.out.println("on play side ...3 ");
                    // if (Long.valueOf(timeData) > ts)
                    {
                        // ts = Long.valueOf(timeData);
                        System.out.println("on play side ...4 ");
                        if (at != null) {
                            System.out.println("on play side ...5 ");
                            byte[] shortArray = new byte[jArray_recv
                                    .length()];
                            for (int i = 0; i < jArray_recv.length(); i++) {
                                shortArray[i] = (byte) jArray_recv
                                        .getInt(i);
                            }
                            jArray_recv = null;
                            System.out.println("recv audio -- " + br
                                    + " ----" + shortArray);
                            byte[] temp = shortArray;
                            shortArray = null;

                            byte[] bArray = temp;
                            temp = null;
                            byte[][] newbarray = new byte[5][1024];
                            newbarray[br - 1] = bArray;
                            byte[] sbayyay = new byte[1024 * 5];
                            System.arraycopy(bArray, 0, sbayyay,
                                    (br - 1) * 1024, bArray.length);
                            if (br == 5) {
                                for (int i = 0; i < 5; i++) {
                                    System.out.println("in for---" + i
                                            + "----" + sbayyay.length);
                                    // System.arraycopy(newbarray[i], 0,
                                    // sbayyay, i * 1024,
                                    // bArray.length);
                                }
                                System.out.println("bsbsbsbs --- "
                                        + new String(sbayyay));
                                at.write(sbayyay, 0, sbayyay.length);
                                at.play();

                            }

                        }

                        else {
                            Log.d("Audio",
                                    "audio track is not initialised ");
                        }
                    }
                } catch (Exception e) {
                    e.printStackTrace();

                }
            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e) {
            System.out.println("Exception");
            e.printStackTrace();
        }
        bytes_count += bytes_read;
        Log.d(LOG_TAG, "bytes_count : " + bytes_count);
        Thread.sleep(SAMPLE_INTERVAL, 0);
    } catch (InterruptedException ie) {
        Log.e(LOG_TAG, "InterruptedException");
    }

} 
```

# sql - 连接sql表的CASE

> ID：11027780
> 
> 赞同：3
> 
> 时间：2012-06-14T06:27:50.717
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我需要 sql 数据库方面的帮助。我有

表 1：ENTITY_TYPE

```
entity_type_id  entity_name
     1            Task
     2            Page
     3            Project
     4            Message
     5            User 
```

和表 2： MESSAGE ，其中包含来自每个实体值的消息，例如

```
message_id entity_type owner_tableid message
    1           1             12       A message on task level
    2           3             14       A message on project level 
```

我想根据每个实体类型和使用'owner_tableid'的所有者表中的详细信息选择这些消息，即类似...的查询

```
select * from MESSAGE JOIN
case entity_type when 1 then taskTable
when 2 then pageTable
when 3 then projectTable
when 4 then MessageTable
when 5 then UserTable 
```

哪个是在单个程序上解决此问题的最佳方法。任何想法 ？？现在我为每个实体使用 IF 子句......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T06:40:03.767

您不能参数化查询中涉及的*表*（因此您不能将表名放在变量中并期望使用它）。

一种方法是作为左连接链：

```
select
  * /* TODO - Pick columns */
from
   MESSAGE m
      left join
   taskTable tt
      on
         m.entity_type = 1 and
         m.owner_entity_id = tt.id
      left join
   pageTable pt
      on
         m.entity_type = 2 and
         m.owner_entity_id = pt.id
      left join
   projectTable prt
      on
         m.entity_type = 3 and
         m.owner_entity_id = prt.id
      left join
   MessageTable mt
      on
         m.entity_type = 4 and
         m.owner_entity_id = mt.id
      left join
   UserTable ut
      on
         m.entity_type = 5 and
         m.owner_entity_id = ut.id 
```

如果您希望这些表中的值出现在结果的单个列中，请`COALESCE`在所有值中使用 a，例如

```
COALESCE(tt.Value,pt.Value,prt.Value,mt.Value,ut.Value) as Value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:43:41.460

将联合条款与您的个人 entity_type 一起使用

```
SELECT * FROM Message
JOIN pageTable ON ....
WHERE entity_type = 1

UNION ALL
..........
entity_type = 2

UNION ALL
..........
entity_type = 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T06:41:30.007

```
Select  ...
From Message
    Join    (
            Select 1 As entity_type, id
            From taskTable
            Union All
            Select 2, id
            From pageTable
            Union All
            Select 3, id
            From projectTable
            Union All
            Select 4, id
            From messageTable
            Union All
            Select 5, id
            From userTable
            ) As Z
        On Z.entity_type = Message.entity_type
            And Z.id = Message.owner_tableid 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T06:38:28.573

如果您需要在一个查询中返回多个 entity_types 详细信息，则`UNION`可能会有所帮助：

```
SELECT interesting_columns FROM Message
JOIN pageTable ON (joinPredicate)
WHERE entity_type = 1

UNION ALL

SELECT interesting_columns FROM Message
JOIN pageTable ON (joinPredicate)
WHERE entity_type = 2

-- ... 
```

但是，如果您只需要某些 entity_type 的详细信息，那么您使用的原始解决方案`IF`会好得多。

# python - Virtualenv ".venv/bin/activate" 与 "source venv/bin/activate"

> ID：11027782
> 
> 赞同：17
> 
> 时间：2012-06-14T06:27:52.417
> 
> 标签：python, virtualenv

假设我创建了一个名为 venv (virtualenv venv) 的 virtualenv

从阅读教程中，我读到有两种激活虚拟环境的方法：

1.  `. venv/bin/activate`

2.  `source venv/bin/activate`

我认为他们都完成了同样的事情，但我不明白发生了什么。

同样对于数字 1，不是“。” 只是指当前文件夹？但如果我只输入“venv/bin/activate”而没有“.”，它就不起作用。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-14T07:36:45.073

`.`并`source`做完全相同的事情，唯一的区别是虽然`source`更具可读性，但它可能并非在所有 shell 中都可用。

该命令在当前 shell 中运行脚本的内容，这在 的情况下很重要`activate`，因为脚本所做的其中一件事是导出和修改当前 shell 中的环境变量。

如果您使用 运行它`./path/to/activate`，脚本将在子shell 中运行，并且一旦脚本完成并且子shell 终止，所有设置的环境变量都将丢失。

> *同样对于数字 1，“。”不是吗？只是指当前文件夹？*

`.`根据上下文有不同的含义。当用作路径（或路径的一部分）时，它仅表示“当前文件夹”。

来自[http://en.wikipedia.org/wiki/Dot_%28Unix%29](http://en.wikipedia.org/wiki/Dot_%28Unix%29)：

> 点命令不要与点文件混淆，[点文件是点前缀的隐藏文件或隐藏目录](http://en.wikipedia.org/wiki/Dot_file)。

* * *

顺便说一句，我建议您看看[`virtualenvwrapper`](http://www.doughellmann.com/docs/virtualenvwrapper/)哪些提供了额外的包装器命令，这些命令`virtualenv`更容易使用。

使用`virtualenvwrapper`，只需调用以下命令即可切换到环境：

```
workon YOUR_ENV 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T07:34:05.443

该`.`命令本质上是`source`. 它们都在当前 shell 中执行给定的脚本，而无需派生新的 shell。

[这里](http://www.thegeekstuff.com/2010/07/execute-shell-script/)有一些很好的例子。

# emacs - 如何将一对列表添加到自动模式列表中？

> ID：11027783
> 
> 赞同：4
> 
> 时间：2012-06-14T06:27:54.160
> 
> 标签：emacs, elisp

我有一长串文件和文件扩展名，我想让 Emacs 在 ruby​​ 模式下自动打开。从使用谷歌开始，最基本的解决方案是：

```
(setq auto-mode-alist (cons '("\.rake$"    . ruby-mode) auto-mode-alist))
(setq auto-mode-alist (cons '("\.thor$"    . ruby-mode) auto-mode-alist))
(setq auto-mode-alist (cons '("Gemfile$"   . ruby-mode) auto-mode-alist))
(setq auto-mode-alist (cons '("Rakefile$"  . ruby-mode) auto-mode-alist))
(setq auto-mode-alist (cons '("Crushfile$" . ruby-mode) auto-mode-alist))
(setq auto-mode-alist (cons '("Capfile$"   . ruby-mode) auto-mode-alist)) 
```

这对我来说似乎是重复的。有没有一种方法可以定义对列表一次，然后循环或直接将其添加到`auto-mode-alist`？我试过了

```
(cons '(("\\.rake" . ruby-mode)
         ("\\.thor" . ruby-mode)) auto-mode-alist) 
```

但这似乎不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T09:17:16.940

You only need a single regexp (and hence entry in `auto-mode-alist`) to match all those options, and you can let `regexp-opt` do the work of building it for you.

```
(let* ((ruby-files '(".rake" ".thor" "Gemfile" "Rakefile" "Crushfile" "Capfile"))
       (ruby-regexp (concat (regexp-opt ruby-files t) "\\'")))
  (add-to-list 'auto-mode-alist (cons ruby-regexp 'ruby-mode))) 
```

If you especially want individual entries, you might do something like this:

```
(mapc
 (lambda (file)
   (add-to-list 'auto-mode-alist
                (cons (concat (regexp-quote file) "\\'") 'ruby-mode)))
 '(".rake" ".thor" "Gemfile" "Rakefile" "Crushfile" "Capfile")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T01:43:26.783

我最喜欢的是

```
(push '("\\(\\.\\(rake\\|thor\\)\\|\\(Gem\\|Rake\\|Crush\\|Cap\\)file\\)\\'" . ruby-mode) auto-mode-alist) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T06:37:28.870

`cons`接受一个项目和一个列表，并返回一个以该项目为开头的新列表。（例如`(cons 1 '(2 3))`给出`'(1 2 3)`）

你想要做的是把一个列表和一个列表和`append`它们放在一起

```
(setq auto-mode-alist
  (append '(("\\.rake" . ruby-mode)
            ("\\.thor" . ruby-mode))
   auto-mode-alist)) 
```

# jsf - 从 glassfish 2 移至 Glassfish 3 时项目未运行

> ID：11027785
> 
> 赞同：0
> 
> 时间：2012-06-14T06:28:08.667
> 
> 标签：jsf, jsf-2, glassfish-3

我从 svn 签出了一个项目。该项目最初是使用 UI 组件（拖放）在 Netbeans 6.1 上构建的。我还看到所有的网页都是使用 JSP 构建的。他们使用的是 Glass fish 2。我在 Netbeans 6.9 上打开它。当我打开它时，我得到了服务器丢失错误。我通过添加玻璃鱼 3 解决了它。然后在代码中，我在以下导入中得到了包丢失错误（包不存在）

```
import com.sun.data.provider.impl.CachedRowSetDataProvider;
import com.sun.rave.web.ui.appbase.AbstractPageBean;
import com.sun.sql.rowset.CachedRowSetXImpl;
import com.sun.webui.jsf.component.Calendar;
import com.sun.webui.jsf.model.DefaultTableDataProvider;
import com.sun.webui.jsf.model.SingleSelectOptionsList; 
```

我谷歌它，发现改变了 sun-web.xml 中的行

```
in the sun-web.xml change
<class-loader delegate="true"/>
    to
<class-loader delegate="false"/> 
```

我做到了。但什么也没有发生。然后我尝试清理并构建项目，但随后出现以下错误

```
D:\Office Work\eAudit Prototype\nbproject\build-impl.xml:663: Warning: Could 
not find file D:\Office Work\eAudit Prototype\${libs.jsf12-support.classpath} to 
copy.
BUILD FAILED (total time: 3 seconds) 
```

如何解决这些错误，以便我可以使用 glass fish 3 在 netbeans 6.9 上运行项目。？我正在考虑使用 jsf 2.0。我可以将它与现有项目一起使用吗？谢谢。

# facebook - 浏览器阻止弹出窗口

> ID：11027788
> 
> 赞同：-1
> 
> 时间：2012-06-14T06:28:13.680
> 
> 标签：facebook, twitter, popup

我有一个页面，其中有一个用于输入状态的文本框。当我单击“更新”按钮时，我需要按顺序在“Facebook”和“Twitter”中更新该状态。我们还需要检查用户是否使用“Facebook”和“Twitter”登录

目前我面临的问题是我的浏览器允许“Facebook”弹出窗口进行身份验证并发布状态。但是当推特身份验证的时候到了，它被浏览器阻止了。有什么方法可以显示两个弹出窗口按顺序出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:41:54.783

如果浏览器允许出现 facebook 弹出窗口而不是 twitter，则可能存在两个问题，

1.  该问题在某一时刻已经存在于 facebook，并且您在弹出窗口方面单击始终允许从 facebook。

2.  “弹出窗口”是如何生成的，因为您没有代码我无法猜测您为生成这样的“弹出窗口”做了什么，但我的猜测是否定的，如果您实际上是在打开一个新窗口或“弹出窗口”并且客户端浏览器设置是拒绝该操作，您的运气非常差。

同样，没有任何代码，我无法进一步诊断您的问题

# android - Android 在屏幕上拖放图像？

> ID：11027792
> 
> 赞同：4
> 
> 时间：2012-06-14T06:28:34.127
> 
> 标签：android, drag-and-drop, imageview

我正在让项目用户将图像从一个位置移动到屏幕上的另一个位置。我已经编写了一个示例代码来移动图像，但这里的问题是，如果我移动一个图像，相邻图像也会开始移动。这是示例代码。任何一个想法。

主.java

```
public class MainActivity extends Activity  {
   int windowwidth;
   int windowheight;    
   ImageView ima1,ima2;

   private android.widget.RelativeLayout.LayoutParams layoutParams ;
   // private android.widget.RelativeLayout.LayoutParams layoutParams ;
   //private android.widget.RelativeLayout.LayoutParams layoutParams ;           

     @Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);

         windowwidth = getWindowManager().getDefaultDisplay().getWidth();
         windowheight = getWindowManager().getDefaultDisplay().getHeight();

         System.out.println("width" +windowwidth);
         System.out.println("height" +windowheight);             

         ima1 = (ImageView)findViewById(R.id.imageview1);
         ima1.setOnTouchListener(new View.OnTouchListener() {  

public boolean onTouch(View v, MotionEvent event) {
       layoutParams = (RelativeLayout.LayoutParams) ima1.getLayoutParams();

         switch(event.getAction())                   
            {
              case MotionEvent.ACTION_DOWN:                          
                    break;     

              case MotionEvent.ACTION_MOVE:
                    int x_cord = (int) event.getRawX();
                    int y_cord = (int) event.getRawY();

              System.out.println("value of x" +x_cord);
              System.out.println("value of y" +y_cord);           

                    if (x_cord > windowwidth) {
                        x_cord = windowwidth;
                       }
                    if (y_cord > windowheight) {
                        y_cord = windowheight;
                       }
             layoutParams.leftMargin = x_cord-25;
             layoutParams.topMargin = y_cord-25;
             //   layoutParams.rightMargin = x_cord-25;
             //   layoutParams.bottomMargin = y_cord-25;
             ima1.setLayoutParams(layoutParams);
                     break;
               default: break;
              }  
               return true;
            }
         });

         ima2 = (ImageView)findViewById(R.id.imageview2);
         ima2.setOnTouchListener(new View.OnTouchListener() {         

     public boolean onTouch(View v, MotionEvent event) {
         layoutParams = (RelativeLayout.LayoutParams) ima2.getLayoutParams();
              switch(event.getActionMasked())
                 {
                   case MotionEvent.ACTION_DOWN:
                       break;
                   case MotionEvent.ACTION_MOVE:
                       int x_cord = (int) event.getRawX();
                       int y_cord = (int) event.getRawY();

                       System.out.println("value of x1" +x_cord);
                   System.out.println("value of y1" +y_cord);                            

                        if (x_cord > windowwidth) {
                            x_cord = windowwidth;
                        }
                        if (y_cord > windowheight) {
                            y_cord = windowheight;
                        }
                        layoutParams.leftMargin = x_cord - 25;
                        layoutParams.topMargin = y_cord - 75;
                        ima2.setLayoutParams(layoutParams);
                        break;
                    default: break;
                }
                return true;
            }
        });
       }
   } 
```

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout 
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
  <ImageView 
    android:layout_width="100dp" 
    android:layout_height="100dp"
    android:id="@+id/imageview1" 
    android:src="@drawable/image1"  />    
<ImageView
    android:layout_width="100sp" 
    android:layout_height="100sp" 
    android:id="@+id/imageview2"
    android:src="@drawable/image2"   />             
 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T07:27:11.267

将以下代码写入您的活动文件。

```
windowwidth = getWindowManager().getDefaultDisplay().getWidth();
windowheight = getWindowManager().getDefaultDisplay().getHeight();

tv1 = (ImageView)findViewById(R.id.image);
tv1.setOnTouchListener(new View.OnTouchListener() {         

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        layoutParams1 = (RelativeLayout.LayoutParams) tv1.getLayoutParams();
        switch(event.getActionMasked())
        {
            case MotionEvent.ACTION_DOWN:
                break;
            case MotionEvent.ACTION_MOVE:
                int x_cord = (int) event.getRawX();
                int y_cord = (int) event.getRawY();
                if (x_cord > windowwidth) {
                    x_cord = windowwidth;
                }
                if (y_cord > windowheight) {
                    y_cord = windowheight;
                }
                layoutParams1.leftMargin = x_cord - 25;
                layoutParams1.topMargin = y_cord - 75;
                tv1.setLayoutParams(layoutParams1);
                break;
            default:
                break;
        }
        return true;
    }
});

tv2 = (ImageView)findViewById(R.id.image1);
tv2.setOnTouchListener(new View.OnTouchListener() {         

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        layoutParams2 = (RelativeLayout.LayoutParams) tv2.getLayoutParams();
        switch(event.getActionMasked())
        {
            case MotionEvent.ACTION_DOWN:
                break;
            case MotionEvent.ACTION_MOVE:
                int x_cord = (int) event.getRawX();
                int y_cord = (int) event.getRawY();
                if (x_cord > windowwidth) {
                    x_cord = windowwidth;
                }
                if (y_cord > windowheight) {
                    y_cord = windowheight;
                }
                layoutParams2.leftMargin = x_cord - 25;
                layoutParams2.topMargin = y_cord - 75;
                tv2.setLayoutParams(layoutParams2);
                break;
            default:
                break;
        }
        return true;
    }
}); 
```

XML 文件：-

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <ImageView android:layout_width="50sp" android:layout_height="50sp"
        android:id="@+id/image" android:src="@drawable/image">
    </ImageView>
    <ImageView android:layout_y="30dip" android:layout_x="118dip"
        android:layout_width="50sp" android:layout_height="50sp" android:id="@+id/image1"
        android:src="@drawable/image1">
    </ImageView>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T06:59:29.517

那是因为你把所有东西都放在了一个 中`LinearLayout`，这意味着你不能把这些东西放在你想要的地方，它们总是一个接一个。您可以尝试使用 a`RelativeLayout`代替。如果这不够灵活，您应该查看`Canvas`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:23:28.127

原因是：你的屏幕上传action_move太懒了。

在正常情况下，即使您的手指不在屏幕上移动，动作动作也会非常频繁地上传。但有些手机屏幕不是那么敏感。

您可以修改手机的阈值。它需要内核支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T23:08:18.353

我冒昧地交替使用您的代码来管理 RelativeLayout 和随机位置中的多个图像视图。我还添加了一种更好的获取窗口大小的方法，因为`Display.getHeight()`已弃用。

```
 if(Build.VERSION.SDK_INT >= 13){
        android.graphics.Point p = new android.graphics.Point();
        this.getWindowManager().getDefaultDisplay().getSize(p); 
        width = p.x;
        height = p.y;
    }
    else{
        Display display = getWindowManager().getDefaultDisplay();
        width = display.getWidth();
        height = display.getHeight();
    }

    RelativeLayout rel = new RelativeLayout(this);
    rel.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT)); 
    rel.setBackgroundResource(R.drawable.bg);

    pic = new ImageView[10];
    layoutParams1 = new LayoutParams[10];

    for(int i = 0; i < 10; i++){
        pic[i] = new ImageView(this);
        pic[i].setImageResource(R.drawable.img);  
        pic[i].setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));  
        pic[i].setAdjustViewBounds(true);  
        pic[i].setScaleType(ScaleType.FIT_XY);  
        pic[i].setMaxHeight(88);  
        pic[i].setMaxWidth(100);
        pic[i].setMinimumHeight(88);
        pic[i].setMinimumWidth(100);
        pic[i].setTag(i);
        int x = rand.nextInt(width);
        while(x > width - 88){
            x = rand.nextInt(width);
        }
        int y = rand.nextInt(height);
        while(y > height - 100){
            y = rand.nextInt(height);
        }
        layoutParams1[i] = (RelativeLayout.LayoutParams) pic[i].getLayoutParams();
        layoutParams1[i].leftMargin = x;
        layoutParams1[i].topMargin = y;
        pic[i].setLayoutParams(layoutParams1[i]);
        pic[i].setOnTouchListener(new View.OnTouchListener() {         

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                int index = Integer.valueOf(v.getTag().toString());
                layoutParams1[index] = (RelativeLayout.LayoutParams) v.getLayoutParams();
                switch(event.getActionMasked())
                {
                    case MotionEvent.ACTION_DOWN:
                        break;
                    case MotionEvent.ACTION_MOVE:
                        int x_cord = (int) event.getRawX();
                        int y_cord = (int) event.getRawY();
                        if (x_cord > width) {
                            x_cord = width;
                        }
                        if (y_cord > height) {
                            y_cord = height;
                        }
                        layoutParams1[index].leftMargin = x_cord - 44;
                        layoutParams1[index].topMargin = y_cord - 50;
                        pic[index].setLayoutParams(layoutParams1[index]);
                        break;
                    default:
                        break;
                }
                return true;
            }
        });

        rel.addView(pic[i]);
    }

    setContentView(rel); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-04T06:37:32.530

实际上，您可以通过以编程方式声明图像来避免这个问题。

```
int id = getResources().getIdentifier("image1", "drawable", getPackageName());
ImageView imageView1 = new ImageView(this);
LinearLayout.LayoutParams vp = 
new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, 
                LayoutParams.WRAP_CONTENT);
imageView1.setLayoutParams(vp);        
imageView1.setImageResource(id);        
someLinearLayout.addView(imageView1); 

 int id = getResources().getIdentifier("image2", "drawable", getPackageName());
ImageView imageView2 = new ImageView(this);
LinearLayout.LayoutParams vp1 = 
new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, 
                LayoutParams.WRAP_CONTENT);
imageView2.setLayoutParams(vp1);        
imageView2.setImageResource(id);        
someLinearLayout.addView(imageView2); 
```

并将触摸事件添加到添加的图像视图

# php - Codeigniter 的面向对象方案

> ID：11027796
> 
> 赞同：3
> 
> 时间：2012-06-14T06:28:41.470
> 
> 标签：php, oop, codeigniter, object

我想明确这一点。我正在使用代码点火器。

在构建 Web 应用程序时，在 codeigniter 中 OOP 设计的更好/正确/标准/最受赞赏的方式是什么/哪种？

一般来说，

一、**创建一个像User这样的自定义类并具有登录功能？**像，

```
 class User{ 
            var $db, $id, $username, $password, $role; //have all user attributes here

            function __construct() {
               //instance for accessing the database
               $this->db =& get_instance();
            }

            public function login(){
                //do the login here
                $this->db->load->model('user_model');   
                $success = $this->db->user_model->login($this->username, $this->password);      
                //isn't this redundant using models? or should I rename the model function name like checkLogin?
                return $success;
            }

            //other class functions 
        } 
```

或者

二、**直接从控制器调用模型中的登录函数而不创建用户对象？**

o_o

在方案 1 中，我使模型仅在数据库中查询。我还可以让“用户”对象像“客户”、“管理员”一样被继承，并为每个对象添加特定功能。我的优势是让 CI 控制器专注于布局和将变量传递给视图，这主要是它的目的（不太确定），并让我的自定义类/对象处理我的 Web 应用程序中的操作。 **但是**我觉得我的登录功能有冗余，我在模型中调用了另一个登录功能。这个好吗？

在方案 2 中，让我的控制器处理所有操作（如登录、注册或创建日志并接收输入帖子并将变量传递给视图）是否合适？

我真的需要一些指导。我的 OO 技能需要提高。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:42:26.700

首先，我认为阅读这篇文章对您很有用：

[访问控制列表](http://en.wikipedia.org/wiki/Access_control_list)

我现在正在开发一个使用 CodeIgniter 的项目，我们在这里使用的方法可能也适合您。如果您需要检查授权，我认为最好的地方是在类的构造函数中，如果用户尚未注册，则调用登录函数。但这是一种有点通用的方法，所以如果你有一些函数应该只对注册用户可用的类，那么你应该在函数内部进行检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:38:28.050

If you really want to follow strict OO model you should consider using DataMapper. Many will say it will slow down the application, true, but this is the price you pay for full OO. What you can do is create a User class that handles all the data manipulation and move the login to a Auth library, that would work with your User model. And remember Models work with/do data manipulation Controllers store the business logic.I am also learning and hope this post helps you.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T06:35:54.647

如果这个模型将被使用更多次，那么创建一个对象并在构造函数中加载模块总是一个好主意。

但我不建议你 `$this->db =& get_instance();`在构造函数中使用。这应该已经自动加载了。

# cmake - 使用 CMake 将 `src` 目录中的源代码编译为 `bin` 目录中的二进制文件

> ID：11027798
> 
> 赞同：1
> 
> 时间：2012-06-14T06:29:07.393
> 
> 标签：cmake

我的项目目录在其根目录包含一个`CMakeLists.txt`文件和`src`目录。还包含它自己的，它由根处的那个链接。有没有一种方法可以指定 CMake 来设置默认的全局构建目录，以便语法接近以下？`include``src``CMakeLists.txt``src/CMakeLists.txt`

```
include_directories(include)
add_executable(first main.cpp foo.cpp)
add_executable(second bar.cpp) 
```

我想建立这个目录树：

```
CMakeLists.txt

src/
    CMakeLists.txt
    main.cpp
    foo.cpp
    bar.cpp

include/
    ...

bin/ (or build/)
    first
    second 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T10:14:43.307

你可以设置`CMAKE_RUNTIME_OUTPUT_DIRECTORY`：

```
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/bin) 
```

但是，这不会`bin/`为每个不同的目标在内部创建子目录。

如果你愿意，你可以创建一个辅助函数来包装`add_subdirectories`：

```
function(my_add_executable TargetName)
  set(Files ${ARGV})
  list(REMOVE_AT Files 0)
  add_executable(${TargetName} ${Files})
  set_target_properties(${TargetName} PROPERTIES
                            RUNTIME_OUTPUT_DIRECTORY
                                "${CMAKE_SOURCE_DIR}/bin/${TargetName}")
endfunction() 
```

然后只需将您的电话更改为：

```
my_add_executable(first main.cpp foo.cpp)
my_add_executable(second bar.cpp) 
```

有关更多详细信息，请运行

```
cmake --help-variable "CMAKE_RUNTIME_OUTPUT_DIRECTORY"
cmake --help-property "RUNTIME_OUTPUT_DIRECTORY"
cmake --help-property "RUNTIME_OUTPUT_DIRECTORY_<CONFIG>" 
```

# vba - 在 VBA 中使用 DatePicker 控件

> ID：11027801
> 
> 赞同：2
> 
> 时间：2012-06-14T06:29:24.620
> 
> 标签：vba, powerpoint

我正在尝试在 PowerPoint 2007 幻灯片中添加 DatePicker VBA 控件。但我找不到任何这样的控制。

我已经添加了 Microsoft Office 12.0 对象库以及 Microsoft Excel 和 Powerpoint 对象库，但我仍然找不到与 DatePicker 相关的任何控件。

如果有人可以指导我阅读一些文章或文档、添加它的教程，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:42:24.347

这是你想要的吗？

开发人员 > 控件 > 更多控件...（锤子和扳手图标）> Microsoft MonthView 控件

![在此处输入图像描述](../Images/e6feef2c908639a67a0c3ba0fc8fc1b2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:06:44.483

该控件不包含在 Office/VBA 中。如果它已安装在您的 PC 上，Jean-François Corbett 发布的答案将使您到达那里，但您的代码将无法在其他 PC 上运行，除非它们也安装了所需的控件。

看看这里： [http ://www.excelbanter.com/showthread.php?t=241456](http://www.excelbanter.com/showthread.php?t=241456)

# jquery - Rails 找不到我的 .js.erb 模板

> ID：11027802
> 
> 赞同：1
> 
> 时间：2012-06-14T06:29:48.193
> 
> 标签：jquery, ruby-on-rails-3

使用 jQuery 我`$.getScript("/airports.js")`从*移动*设备调用。应用程序以这种方式处理请求……</p>

/app/controllers/ **airports_controller.rb** (def index)

```
respond_to do |format|
  format.html # index.html.erb
  format.js # index.js.erb
  format.json { render json: @airports } 
```

可悲的是，我从服务器收到了这个响应……</p>

**服务器日志：**

```
ActionView::MissingTemplate (Missing template airports/index, 
application/index with  {:locale=>[:en], :formats=>[:mobile], 
:handlers=>[:erb, :builder]}. Searched in:
* "/Users/tom/Documents/14-Utveckling/WhichTerminal/app/views"
):
app/controllers/airports_controller.rb:7:in `index' 
```

怎么了？我猜你希望服务器告诉你的是`:formats => [:js]`而不是`:mobile`. 我该如何做到这一点？

（ .js.erb 文件存储在`/app/views/airports/index.js.erb` 为了更好地衡量，我把另一个叫做`airports.js`in `/app/assets`。）

# c# - 从 web 浏览器控件中的 silverlight 调用 WPF 中的函数

> ID：11027804
> 
> 赞同：0
> 
> 时间：2012-06-14T06:30:03.990
> 
> 标签：c#, javascript, wpf, silverlight

我有一个 WPF 应用程序，里面有一个 web 浏览器控件，它是一个 silveriight 应用程序。早些时候，我已经能够使用 HTML 桥从 WPF 应用程序调用函数到 sliverlight 应用程序。

现在，我必须与此相反，即我必须从 silverlight 调用 WPF 应用程序内部的一个函数。
如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:45:56.197

您可以使用如下所示的属性来执行此操作：

**C#部分：**

```
webBrowserControlName.ObjectForScripting = new ScriptInterface(); 
```

其中ScriptInterface如下

```
[System.Runtime.InteropServices.ComVisibleAttribute(true)]
public class ScriptInterface
{

    public void CSharpMethod(string data)
    {
        MessageBox.Show(data);
    }
} 
```

**HTML 部分**

在您在 Web 浏览器控件中加载的页面中，执行以下操作：

```
window.External.CSharpMethod('from html page to WPF'); 
```

# node.js - 在 node-sqlite3 中使用 Gyp 中的共享库

> ID：11027806
> 
> 赞同：5
> 
> 时间：2012-06-14T06:30:23.383
> 
> 标签：node.js, sqlite, gyp

我是吉普的新手。我不想编译我的依赖项，而是想使用一个共享库，特别是我机器上已经存在的 libsqlite3.so。主要的 binding.gyp 目前看起来像

```
{
  'targets': [
    {
      'target_name': 'node_sqlite3',
      'sources': [
        'src/database.cc',
        'src/node_sqlite3.cc',
        'src/statement.cc'
      ],
      'dependencies': [
        'deps/sqlite3/binding.gyp:sqlite3'
      ]
    }
  ]
} 
```

如何更改它以便使用共享的 sqlite3 库？deps 文件夹中的 binding.gyp 有一个部分，如下所示。我认为我不需要 gyp 为我做任何 sqlite3 的编译，所以将类型切换到 shared_library 可能不是正确的答案。

```
'targets': [
    {
      'target_name': 'sqlite3',
      'type': 'static_library',
      'include_dirs': [ '.' ],
      'direct_dependent_settings': {
        'include_dirs': [ '.' ],
        'defines': [
          'SQLITE_THREADSAFE=1',
          'SQLITE_ENABLE_FTS3',
          'SQLITE_ENABLE_RTREE'
        ],
      },
      'defines': [
        '_REENTRANT=1',
        'SQLITE_THREADSAFE=1',
        'SQLITE_ENABLE_FTS3',
        'SQLITE_ENABLE_RTREE'
      ],
      'sources': [ './sqlite3.c', ],
    },

    {
      'target_name': 'shell',
      'type': 'executable',
      'dependencies': [ 'sqlite3' ],
      'sources': [ './shell.c' ]
    }
  ]
} 
```

**更新。**我可以通过将 binding.gyp 更改为此来编译

```
{
  'targets': [
    {
      'target_name': 'node_sqlite3',
      'sources': [
        'src/database.cc',
        'src/node_sqlite3.cc',
        'src/statement.cc'
      ],
      'ldflags': [
        '-lsqlite3'
      ]
    }
  ]
} 
```

但是，当我使用该模块运行程序时，我得到

> 节点：符号查找错误：/usr/local/lib/node_modules/sqlite3/build/Release/node_sqlite3.node：未定义符号：sqlite3_open_v2

好像共享库未加载或不可访问。我想我很接近了。libsqlite3 安装到 /usr/local/lib

> ```
> /usr/local/lib$ ls
> libsqlite3.a   libsqlite3.so    libsqlite3.so.0.8.6  node_modules  python2.7
> libsqlite3.la  libsqlite3.so.0  node                 pkgconfig 
> ```

**更新2。**情节变厚了。我在 node-sqlite3 创建的可执行文件上尝试了 ldd

> ```
>  linux-vdso.so.1 =>  (0x00007fffd7168000)
>     libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007fc9451df000)
>     libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fc944fc2000)
>     libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fc944c04000)
>     libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007fc94490a000)
>     /lib64/ld-linux-x86-64.so.2 (0x00007fc945704000)
>     libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007fc9446f4000) 
> ```

显然缺少 libsqlite3。所以也许我的 ldflags 声明并没有真正按计划工作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-14T07:47:30.370

这是答案。

```
{
  'targets': [
    {
      'target_name': 'node_sqlite3',
      'sources': [
        'src/database.cc',
        'src/node_sqlite3.cc',
        'src/statement.cc'
      ],
      'link_settings': {
          'libraries': [
              '-lsqlite3'
          ]
      }
    }
  ]
} 
```

使用 ldd 时：

> ~/node-sqlite3/build/Release$ ldd node_sqlite3.node linux-vdso.so.1 => (0x00007fffe9548000) **> libsqlite3.so.0 => /usr/local/lib/libsqlite3.so.0 (0x00007f6649504000)** libstdc++ .so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f66491ff000) libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f6648fe1000) libc .so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f6648c24000) libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f6648a20000) libm.so .6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f6648725000) /lib64/ld-linux-x86-64.so.2 (0x00007f66499cd000) libgcc_s.so.1 => /lib/x86_64- linux-gnu/libgcc_s.so.1 (0x00007f664850f000)

# iphone - 使用 Tabku 库创建菜单的 Coverflow 但不能包含头文件

> ID：11027807
> 
> 赞同：1
> 
> 时间：2012-06-14T06:30:46.177
> 
> 标签：iphone, xcode, ios4, xcode4.3

我已经为菜单的封面流程创建了应用程序。我在我的项目中遵循了包括 tabku 库在内的教程。我已经完成了以下链接中的所有步骤

[http://www.applausible.com/blog/?p=657](http://www.applausible.com/blog/?p=657)

但它会引发错误，因为“找不到文件”。下面是我的代码。

```
#import <UIKit/UIKit.h>
#import <TabkuLibrary/TabkuLibrary.h>

@interface ViewController :UIViewController<TKCoverflowViewDelegate,TKCoverflowViewDataSource>{
TKCoverFlowView * Coverflow;
NSMutableArray *arr;
}

@end 
```

我已经学习了很多教程，最终在上面的链接中结束了......任何人都可以帮忙......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:53:00.053

该库实际上称为 Tapku，我遇到了同样的问题。我最终将 $(SRCROOT)/tapkulibrary/src 添加到我的搜索头路径中，然后得到了另一个错误：“Interface Builder 无法打开 CocoaTouch XIB 类型的文档。” 幸运的是，由于另一个 SO 线程，上述错误得到了修复：[接口生成器无法打开 iPad XIB 类型的文档](https://stackoverflow.com/questions/3499751/interface-builder-is-unable-to-open-documents-of-type-ipad-xib)

# php - iframe GET url 变量

> ID：11027809
> 
> 赞同：0
> 
> 时间：2012-06-14T06:30:59.263
> 
> 标签：php, iframe, get

我正在尝试为我的网站的用户提供外部嵌入 html5 播放器的选项，为了做到这一点，我想通过从父页面读取 iframe 的 src 中的值，然后将其作为变量传递在将显示给用户的 php 文件中。

让我们这么说 `$value_from_parent_page = "song1"`

父页面包含用户可复制的代码 `<iframe src="http://example.com/load.php?embed='$value_from_parent_page'" ></iframe>`

load.php 包含 `<?php $val  =  $_GET['embed']; echo "<audio src='"$val".mp3'></audio>"; ?>`

结果必须像 `<audio src='song1.mp3'></audio>`

是否可以这样工作并且代码是否有效？（我很抱歉我无法使用普通计算机进行测试）。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:35:51.120

这应该有效，并且有效，现在使用 iframe 的问题会很好，请确保它是您需要的 iframe，因为可能有更好的方法来解决这个问题，但在您的情况下，我会说这是最好的方法来做到这一点并有效的最佳跨平台支持。

# list - Sencha Touch 2 列表/商店

> ID：11027810
> 
> 赞同：0
> 
> 时间：2012-06-14T06:31:05.557
> 
> 标签：list, sencha-touch, extjs, store

我对 sencha touch 2 框架上的列表组件有疑问。我的问题是，我的列表没有显示当前位置和地点之间的计算距离。
首先，当用户单击名称时，我使用带有列表（名称+距离）的导航视图，出现更多关于它们的详细信息（+ 后退按钮将自动生成）。如果按下后退按钮，列表会在列表中显示正确的距离。但我真的需要在第一时间显示距离。我尝试了很多，但没有任何帮助。我使用模型和商店：

```
 'Ext.define('Guide.store.ProjekteList', {
     extend: 'Ext.data.Store',

    config:{
        model: "Guide.model.ProjekteList", 
        autoLoad:true, 
        sorters: ['distance'],
        storeId: 'ProjekteList',
        proxy: {
           type: 'ajax',
           url : 'PHP/get_MainList.php',
           reader: {
              type: 'json', 
              rootProperty:'items'
           }
       },
       listeners: {
           load : function(){
                   this.each(function(store){
                       var newData = getDis(store.data);
                   });//each                    
            }//load func
        }// listener
    }//config
});// klasse

var getDis = function(dataset) {
    var geo = Ext.create('Ext.util.Geolocation', {
    autoUpdate: false,
    listeners: {
        locationupdate: function(geo) {
           polat = geo.getLatitude(); 
           polng = geo.getLongitude();  
           var B1 = dataset.Lat / 180 * Math.PI; 
           var B2 = polat / 180 * Math.PI;
           var L1 = dataset.Lng / 180 * Math.PI;
           var L2 = polng / 180 * Math.PI;
           var zwi = Math.acos(Math.sin(B1)*Math.sin(B2)     + Math.cos(B1)*Math.cos(B2)*Math.cos(L2-L1));  
           var r = 6378.137; //km
           dataset.distance  =  r * zwi;
           dataset.distance = Math.round(dataset.distance*100)/100; 

         },
        locationerror: function(geo, bTimeout, bPermissionDenied, bLocationUnavailable, message) {
            if(bTimeout){
                alert('Timeout occurred.');
            } else {
                alert('Error occurred.');
            }
        }
    }
});
geo.updateLocation();
 return dataset;

};' 
```

和我的模型：

```
'Ext.define('Guide.model.ProjekteList', {
     extend: 'Ext.data.Model',  

     config: {
         fields:  ['Projektname', 'Lat', 'Lng', 'distance', 'ID'],
     }
 }); 
```

这是我的导航视图：

```
'Ext.define('Guide.view.ProjekteList', {
extend: 'Ext.navigation.View', 

xtype: 'projektelist',

config: {

        title: 'Orte',
        iconCls:'Projekte' , 
        id: 'listButton',

        items:[

        { 
            xtype: 'list', 
            onItemDisclosure: true, 
        /*  plugins: [
                    {
                        xclass: 'Ext.plugin.ListPaging',
                        autoPaging: false,

                    }
                ], */   
            title: 'Sehenswerte Orte',  
                store: 'ProjekteList',
            itemId: 'liste',
            itemTpl: '<h2>{Projektname}</h2> Entfernung: {distance} km',    
            listeners: {
                           show: function(){  

                                   this.refresh();   

                             } //show function
            }, //listeners 
       } // item
      ] //items 
}// config 

}); ' 
```

和我的控制器

```
 Ext.define("Guide.controller.ProjekteList", {
extend: "Ext.app.Controller",

views: ['ProjektList'],

config: {

        refs: {  
            projekt: 'projektelist',

        },
        control: {
            'projektelist list': {
                itemtap: 'showDetail'
            }   
        }                          
    },
    showDetail: function(list, index, element, record) {    
        var projektid = record.get('ID');  

Ext.StoreMgr.get('ProjektDetail').setProxy({url:'PHP/get_Detail.php?
ID='+projektid}).load();    
         this.getProjekt().push({  
         xtype: 'projektdetails', 
         });  

    }  //     showDetail function 

}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:58:46.257

我找到了解决方案：

只需将导航视图中的侦听器从“显示”更改为“绘制”，它就可以正常工作。

# android - Advanced Task Killer 如何真正杀死一个进程？

> ID：11027813
> 
> 赞同：2
> 
> 时间：2012-06-14T06:31:23.337
> 
> 标签：android, kill-process

上面的问题基本上解释了我的问题。Advanced Task Killer 如何杀死应用程序？

[我已经尝试过这个](https://stackoverflow.com/questions/8814696/how-to-kill-currently-running-task-in-android)问题的第二个答案中提到的方法。哪个正在使用`ActivityManager.killBackgroundProcesses.`

```
for(RunningAppProcessInfo runningProcess : runningProcesses){
                    for(ApplicationInfo nonCompliantApp : nonCompliantApps){
                        if(runningProcess.pkgList != null) for(String runningAppPackageName : runningProcess.pkgList){
    //                      if(runningProcess.processName.startsWith("gameapps.avatar.")){
    ////                            FileManager.writeToLogFile(SystemApplicationManager.class, "run", LogMessageType.DEBUG, "Game Apps: " + runningProcess.processName + "  pkg: " + runningProcess.pkgList.length + " - " + runningProcess.pkgList[0]);
    //                      }

                            if(runningAppPackageName.equals(nonCompliantApp.packageName)){
                                ActivityManager amgr = (ActivityManager)context.getSystemService(Context.ACTIVITY_SERVICE);
                                ShellCommandManager.executeShellCommand("kill " + runningProcess.pid);
                            amgr.killBackgroundProcesses(nonCompliantApp.packageName);
                                FileManager.writeToLogFile(SystemApplicationManager.class, "run", LogMessageType.DEBUG, "Process found and killed: " + nonCompliantApp.packageName);
                            }

                            if(!keepRunning)break;
                        }
                    } 
```

问题是，执行上述代码后，我在 settings -> apps -> running 下查看，却发现同一个应用程序仍在运行。我正在测试的设备是运行 Android ICS 的 HTC One X。

我究竟做错了什么 ？一些帮助或澄清将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:38:20.370

它获取正在运行的应用程序并使用其进程 ID 来终止正在运行的进程。一小段代码可能会对您有所帮助。

```
int pid = android.os.Process.myPid();
android.os.Process.killProcess(pid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:14:00.167

尝试这个：

```
private static void killProcess(String process_name)
{
     ActivityManager  manager = (ActivityManager)context.getSystemService(Context.ACTIVITY_SERVICE);
     List<ActivityManager.RunningAppProcessInfo> listOfProcesses = manager.getRunningAppProcesses();

     for (ActivityManager.RunningAppProcessInfo process : listOfProcesses)
     {
         if (process.processName.equals(process_name))
         {

                 manager.restartPackage(process.pkgList[0]);
                 Log.e(TAG, "Killed process [" + process.pkgList[0] + "]"); 

         }
     }
} 
```

# linux - 如何将解析的命令通过管道传输到 shell 解释器中？

> ID：11027814
> 
> 赞同：0
> 
> 时间：2012-06-14T06:31:24.367
> 
> 标签：linux, shell, pipe

我有一个“fancy_awk_script”，它将文件名解析为 shell 命令

```
myself@supercomputer /home/myself $ ls -1 *.MYLOG.csv | fancy_awk_script 
cp 20120607.MYLOG.csv 20120607.MYLOG.csv2
mv 20120606.MYLOG.csv 20120607.MYLOG2.csv
cp 20120605.MYLOG.csv 20120606.MYLOG.csv
... 
```

我想将上面的结果直接传递给 shell 解释器，我该怎么办？像这样的东西？

```
myself@supercomputer /home/myself $ ls -1 *.MYLOG.csv | fancy_awk_script | xargs -E 
```

谁能帮忙？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:33:14.627

如果您不希望有任何用户输入（比如说是 cp -i），则直接通过管道连接到 sh 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T17:12:14.667

ls -1 *.MYLOG.csv | fancy_awk_script |xargs -i bash -c {}

# c# - 如何在 PDFsharp 中设置 DPI（每英寸点数）

> ID：11027817
> 
> 赞同：6
> 
> 时间：2012-06-14T06:31:37.050
> 
> 标签：c#, pdf, pdf-generation, pdfsharp

在 PDFsharp 的情况下，有什么方法可以设置 DPI（每英寸点数）？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T08:14:05.657

不，PDF 文件是没有 DPI 的矢量文件。

如果您的问题是关于存储在 PDF 文件中的图像：

PDFsharp 存储图像，因为它们来了。PDFsharp （尚未）调整图像大小以降低 DPI 以减小文件大小。您的应用程序知道将在何处以何种尺寸使用哪个图像，因此在将光栅图像与 PDFsharp 一起使用之前，您应该将它们降低到所需的 DPI (*)。

请注意，图像只会包含在 PDF 中一次，即使它们被绘制了多次 - 并且它们可以以不同的尺寸绘制（例如，第一页上的大公司徽标，随后页面上的较小）。

我希望我回答了这个问题。如果不是，请解释您的要求。

(*) 根据图像在 PDF 页面上的大小和所需的 DPI 计算图像的像素宽度和高度；一些光栅图像具有 DPI 设置，但这不会影响图像文件的大小。

# php - 在 odbc 数据库中按 DATE 查询选择数据

> ID：11027819
> 
> 赞同：0
> 
> 时间：2012-06-14T06:32:00.590
> 
> 标签：php, ms-access

谁能告诉我如何使用 PHP 在 MS.ACCESS 数据库中按日期选择数据？我正在尝试使用通配符 (absent = 14/06/2012*) 选择数据，例如 (absent = 14/06/2012 13:00:00)

这是我的查询

```
$sql = "SELECT TOP 1 * FROM absent WHERE id = $id AND absent LIKE '#14/06/2012#'"
$result = odbc_exec($connect, $sql); 
```

缺席字段有一个日期（一般日期）类型。而 id = 自动编号。

使用该查询，我没有得到任何结果。我的错误在哪里？

已经在尝试这个

```
absent = #14/06/2012#
absent = '14/06/2012*' 
```

但不是成功。

**编辑** 好吧，我已经成功但没有使用通配符。这是我的解决方案，我使用范围日期来限制搜索

```
WHERE absent >= #14/06/2012 AND absent < #15/06/2012#; 
```

该死的你Ms-Access！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T10:46:53.723

当您通过 ODBC 查询 MS Access 中的日期时间字段时，ODBC 驱动程序会将其转换为时间戳，例如：

```
select * from table where col=#2012-06-15# 
```

这将转换为 {ts '2012-06-15 00:00:00'} ，因此您只会得到该值为 true 的匹配项。

您使用范围的答案更好，但是您应该真正使用：-

```
select * from table where col>{d '2012-06-15'} and col<{d '2012-06-16'} 
```

使用 ODBC 格式`{d 'yyyy-mm-dd'}`意味着您的代码将可移植到大多数其他 ODBC 驱动程序，而不仅仅是 MS Access。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T09:44:46.510

您已经包含了两种类型的分隔符，字符串和日期。MS Access 中的查询将是：

```
$sql = "SELECT TOP 1 * FROM absent WHERE id = $id AND absent = #2012/06/14#" 
```

最好使用年月日格式，因为它可以避免语言环境格式的任何矛盾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T07:35:12.307

我无法尝试我的答案，因为我没有可用的 php，但这里有一些想法（假设 Absent 是一个 Date 字段）。

*   LIKE 进行字符串比较，所以在使用 LIKE 时我不会包含 #。
*   出于同样的原因，您绝对应该包含引号`'`，`"`否则您将得到除法
*   这是所有美国产品，所以我会尝试 mm/dd/yyyy 格式的日期

因此我的猜测是`absent LIKE '06/04/2012*'`

其他 - 可能效率较低但更安全 - 标准可能是：

```
...AND day(absent) = 14 AND month(absent) = 6 AND year(absent) = 2012 
```

或者

```
... AND Format(Absent, "dd\/mm\/yyyy") = "14/06/2012" 
```

祝你好运

# android - jmethodID 的 NewGlobalRef

> ID：11027822
> 
> 赞同：7
> 
> 时间：2012-06-14T06:32:08.110
> 
> 标签：android, java-native-interface, android-ndk

我有一个问题，否则这似乎是一件容易的事。我有一个本机方法，它返回 Java 类（自定义）实例的 jobjectArray。我所做的是获取我想要实例化并返回的类的 jclass，然后获取它的构造函数的 jmethodID。

本机方法的签名是：

```
JNIEXPORT jobjectArray JNICALL
Java_com_mn_rootscape_utils_NativeMethods_getFilesPermissions( JNIEnv* env, jobject thizz, jobjectArray filePathsArray ) 
```

命名空间和构造函数签名定义如下：

```
const char* kFilePermissionInfoPath = "com/mn/rootscape/utils/FilePermissionInfo";
const char* kFilePermInfoConstructorSig = "(IIIIIJJJLjava/lang/String;Ljava/lang/String;ZLjava/lang/String;)V"; 
```

对于 jclass 和 jmethodID，我将按照[此处](http://android-developers.blogspot.ro/2011/11/jni-local-reference-changes-in-ics.html)发布的说明进行操作。所以我得到了他们的全球参考，所以我以后可以使用它们。请注意，我的库中还没有 oninit，代码目前仅用于测试。

问题是当我尝试检索 jmethodID 的全局引用时出现分段错误。

执行此操作的代码是：

```
jclass filePermInfoCls = (*env)->FindClass(env, kFilePermissionInfoPath);
if(!filePermInfoCls)
{
    LOGE("getFilesPermissions: failed to get class reference.");
    return NULL;
}

gFilePermInfoClass = (jclass)(*env)->NewGlobalRef(env, filePermInfoCls);
LOGI("got gFilePermInfoClass");

jmethodID filePermInfoClsConstructor = (*env)->GetMethodID(env, gFilePermInfoClass, "<init>", kFilePermInfoConstructorSig1);
if(!filePermInfoClsConstructor)
{
    LOGE("getFilesPermissions: failed to get method reference.");
    return NULL;
}

gFilePermInfoClsConstructor = (jmethodID)(*env)->NewGlobalRef(env, filePermInfoClsConstructor);
LOGI("got gFilePermInfoClsConstructor"); 
```

实际错误是：

> 06-14 09:17:26.648: W/dalvikvm(26012): decodeIndirectRef 06-14 09:17:26.648 中的无效间接引用 0x4c0bdc40: E/dalvikvm(26012): VM 中止

gFilePermInfoClass 和 gFilePermInfoClsConstructor 是全局 jclass 和 jmethodID 对象，用于保存全局引用。

对此的任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-14T10:20:16.163

A`jmethodID`不是一个对象。您无需将其转换为`GlobalRef`. 同上`jfieldID`。

# uitableview - 如何动态创建分段的tableview iphone sdk？

> ID：11027825
> 
> 赞同：1
> 
> 时间：2012-06-14T06:32:10.123
> 
> 标签：uitableview, dynamic, grouped-table

我是 iPhone 应用程序开发的新手。我正在尝试实现一个应用程序，我想在其中列出部分中的项目。所以假设我有三个以“A”开头的项目，5 个以“B”开头的项目，依此类推。编号。不是每个部分都固定的。如何实现这一点。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T06:57:31.713

请参考这个苹果示例。查看所有 tableview 示例。

*   一个普通的表格视图
*   分段表视图
*   索引表视图
*   TableViewCell 子视图
*   自定义单元格

[http://developer.apple.com/library/ios/#samplecode/TableViewSuite/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007318](http://developer.apple.com/library/ios/#samplecode/TableViewSuite/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007318)

# html - 是否可以在 css 的帮助下更改段落中某些单词的样式而不在这些单词上使用任何 html 标记

> ID：11027828
> 
> 赞同：1
> 
> 时间：2012-06-14T06:32:29.560
> 
> 标签：html, css

可能吗？我想在 css 的帮助下更改段落中某些单词的样式，而不在这些特定单词上使用任何 html 标签。喜欢等。等待肯定的答复。谢谢：

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T06:34:27.890

CSS 只能选择元素和伪元素。您不能选择单词。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T06:37:20.573

仅使用 CSS 是不可能的。但是您*可以*使用 JavaScript 来匹配特定的单词并将这些单词动态地包装在 HTML 元素中（例如 a `span`），并使用 CSS 设置样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T06:43:01.063

没有标签是不可能的。即使是 Jquery 也无法理解您要更改的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T06:37:08.340

不，纯 css 不可能，但是有些伪元素的范围有限，例如

`:first-letter`,`:first-line`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T06:44:45.903

不可能仅使用 CSS，但使用例如 jQuery，您可以将一些单词搜索到文本中并更改样式，例如：

```
$('p').html(html.replace(/world/gi, '<strong>$&</strong>')); 
```

# android - 适用于 FeliCa 的 Android NFC 阅读器

> ID：11027829
> 
> 赞同：0
> 
> 时间：2012-06-14T06:32:29.717
> 
> 标签：android, nfc

我是 NFC 新手，但在 Android 方面有很好的经验，正在寻找一个示例应用程序来读取/cummunicate FeliCa 启用设备与 Android NFC 应用程序。

你能提供一个很好的教程的链接吗............

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:32:24.833

nfc-felica 项目中有一些代码。请注意，您将只能读取共享区域数据。

[http://code.google.com/p/nfc-felica/](http://code.google.com/p/nfc-felica/)

# perl - 如何在 Perl 读取管道处理程序中扩展变量？

> ID：11027832
> 
> 赞同：5
> 
> 时间：2012-06-14T06:32:35.753
> 
> 标签：perl, unit-testing, backticks

似乎反引号中的变量在传递给 readpipe 函数时没有扩展。如果我重写 readpipe 函数，我如何扩展变量？

```
BEGIN {
*CORE::GLOBAL::readpipe = sub {print "Run:@_\n"};
}

`ls /root`;
my $dir = "/var";
`ls $dir`; 
```

运行这个给出：

```
Run:ls /root
Run:ls $dir 
```

我正在尝试模拟我正在编写的测试代码的外部调用。如果某个地方有一个 CPAN 模块可以帮助解决所有这些问题，那也会有所帮助。

**更新**：

我决定对我的问题使用一个非常丑陋的解决方法。事实证明，使用`readpipe()`而不是反引号可以正确扩展变量。我在运行测试之前使用自动脚本清理器，它将所有反引号转换为`readpipe()`在运行测试之前。

例如运行：

```
$ cat t.pl

BEGIN {
    *CORE::GLOBAL::readpipe = sub {print "Run:@_\n"};
}

`ls /root`;
my $dir = "/var";
`ls $dir`;
readpipe("ls $dir"); 
```

给出：

```
$ perl t.pl
Run:ls /root
Run:ls $dir
Run:ls /var 
```

不过，我仍在寻找更清洁的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T06:54:57.507

这似乎是 Perl 中的一个错误。使用[perlbug](http://perldoc.perl.org/perlbug.html)报告它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:27:21.593

您可能想[`IPC::Run`](http://metacpan.org/module/IPC%3a%3aRun)改用。

```
use IPC::Run 'run';

run [ "ls", $dir ], ">", \my $stdout or die "Cannot run - $!"; 
```

或者，如果您不想捕获输出，`system()`可能会更好

```
system( "ls", $dir ) == 0 or die "Cannot system - $!"; 
```

# java - 使用http post将文件上传到localhost？

> ID：11027834
> 
> 赞同：1
> 
> 时间：2012-06-14T06:32:50.370
> 
> 标签：java, http, post

我做了研究，我找不到一个很好的教程来发布一个带有 http 的文件。我是否必须做一个 servlet 才能发布 http 帖子，还是只能用 java 来完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:43:21.670

要使 http post 不需要 servlet，您可以使用 HttpClient 库来完成

查看

[如何使用与 PHP 一起使用的 Java HttpClient 库上传文件](https://stackoverflow.com/questions/1067655/how-to-upload-a-file-using-java-httpclient-library-working-with-php-strange-pr)

您绝对需要一个 servlet 来处理服务器端的发布请求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:45:51.490

客户端可能可以执行文件的发布，但是如果没有一些服务器应用程序等待它，您将无法测试它。如果您了解 php，您可以在 servlet 中创建或使用 WampServer 之类的东西，重要的是让某些东西能够监听您的帖子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T06:46:22.923

您需要两个软件：一个 HTTP 客户端和一个 HTTP 服务器。您可以使用 Java 来实现两者，但是，根据您的操作系统，在服务器端使用 PHP 可能更容易。我前段时间写[了一篇博文，将数据发布到 PHP 脚本，这可能很有用。](http://zybnet.com/java-http-client-and-post-requests/)它展示了如何一次发送文件和任意数据：关键是`multipart/form-data`请求的 MIME 类型。它还演示了如何在 PHP 端发送数据，使其像数组一样排列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T06:44:20.133

您可以使用 Apache 的 FileUpload 库：http: [//commons.apache.org/fileupload/](http://commons.apache.org/fileupload/)

一个很好的入门教程是这个[http://www.addictosaltrabajo.com/tutoriales/tutoriales.php?pagina=fileupload](http://www.adictosaltrabajo.com/tutoriales/tutoriales.php?pagina=fileupload)

问候

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T06:44:42.980

您可以使用 Apache Commons FileUpload 库。这应该可以帮助您处理文件上传和存储文件，因此您可以编写更少的代码:)

[阿帕奇公地](http://commons.apache.org/fileupload/)

# codeigniter - Codeigniter - 如何在两个应用程序之间共享模型

> ID：11027837
> 
> 赞同：2
> 
> 时间：2012-06-14T06:33:05.380
> 
> 标签：codeigniter

我在 codeigniter 中有两个应用程序。在应用程序文件夹下调用 App1 和 App2。我为应用程序创建了两个 App1.php 和 App2.php。现在我想在 App2 中分享 App1 的模型，反之亦然。你能告诉我如何在 App2 中共享模型和 App1 库，反之亦然？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T06:40:07.037

> 应用程序“包”
> 
> 应用程序包允许在单个目录中轻松分发完整的资源集，包括自己的库、模型、帮助程序、配置和语言文件。建议将这些包放在 application/third_party 文件夹中。下面是一个包目录的示例图

查看用户指南“加载器类”以获取有关它们的更多信息。

# sql - 仅将更新的表数据从一个数据库复制到另一个数据库

> ID：11027840
> 
> 赞同：0
> 
> 时间：2012-06-14T06:33:16.783
> 
> 标签：sql, sql-server, copy

我有两个数据库，比如 backenddb 和 liveb（大小约为 10 gb，有超过 50 个表）。我正在使用 backenddb 更新 livedb，以便使用 mysqldump 使用新数据对其进行更新，然后对其进行扩展。此过程首先删除所有表行、表，然后在扩展期间将 backenddb sql-dump 重新插入 livedb。

那么有没有其他方法可以让我只将更新的数据行从后端数据库插入到livedb而不删除整个livedb数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:55:31.843

据我了解您的问题，我可以回答您可以对后端数据库进行**差异**备份并将其放入您的 livedb。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T02:15:36.470

通过更多的研究，我最终确定了这种方法：使用以下方法创建一个后端数据库转储：
**mysqldump --no-create-db --no-create-info -uroot -hxx.xx.xx.xxx Db_dump > dump_name**
这将创建一个转储不包括表删除命令的行数据。然后在转储文件中将**INSERT INTO**替换为**INSERT IGNORE Into**：
**替换 'INSERT INTO' 'INSERT IGNORE INTO' -- dump_name**
然后将转储正常扩展至 liveb 这将只插入更新的数据，而忽略已经存在的数据。

注意：-INSERT INTO 的任何文本出现都将被替换命令的 sql 转储中的 INSERT IGNORE Into 替换。

# objective-c - 可变数组中自定义类对象的内存处理

> ID：11027842
> 
> 赞同：-1
> 
> 时间：2012-06-14T06:33:38.920
> 
> 标签：objective-c, arrays

我搜索了这个问题，但找不到任何合适的答案：我已经工作`java`了很长时间，现在我想学习`Objective-C`

这是场景：我有一个`Objective C`扩展`NSObject`类的类，该类包含`NSString`类型和`CustomObject`类型的保存字段，我在那里创建了带有`@property(nonatomic,retain) NSString or MyObjec`t 的属性。创建自定义类的对象后，我将其放入 NSArray 中`[myArray addObject:myObject]`

现在我想问的是，如果我释放 myArray，我是否必须释放该数组内的对象和该对象内的字段，并且某些字段也`CustomObject`属于另一个类；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:47:41.423

当你释放一个 NSArray 时，释放消息会发送到数组中的每个对象。如果对您的对象的唯一引用是在数组中，那么您的对象将调用其 dealloc 方法，该方法负责释放其所有属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:40:31.520

我仍在学习 objc，我认为当您创建自定义对象时，保留计数会增加，并将其添加到数组中也会增加保留计数。因此，当您释放数组内的对象时，它仍然有一个需要释放的保留计数。这只是我的想法。

# jquery - django 将 ajax 响应传递给 php 变量

> ID：11027846
> 
> 赞同：-2
> 
> 时间：2012-06-14T06:34:07.340
> 
> 标签：jquery, python, ajax, django

我正在使用 ajax 向我的 django 函数发送请求，然后生成一个 zip 文件并将其提供给用户。如果我转到该 url `domain.com/django/builder/zipit/`，文件会按预期生成并下载到我的计算机，但是当使用 ajax 并返回响应时，ajax 无法下载它。我可以将响应传递给 php 变量并以这种方式下载吗？使用 iframe 将不起作用，因为该文件是动态创建的。

阿贾克斯

```
$.ajax({
    type: 'POST',
    url: '/django/builder/zipit/',
    data: serialize,
    success: function(response){
        //pass response to php somehow
    } 
```

视图.py

```
def send_zipfile(request):
temp = tempfile.TemporaryFile()
archive = zipfile.ZipFile(temp, 'w', zipfile.ZIP_DEFLATED)
filename = '/home/dbs/public_html/download/video.html'
archive.write(filename, 'file.html')
archive.close()
wrapper = FileWrapper(temp)
response = HttpResponse(wrapper, content_type='application/zip', mimetype='application/x-download')
response['Content-Disposition'] = 'attachment; filename=dbs_content.zip'
response['Content-Length'] = temp.tell()
temp.seek(0)
return response 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:48:32.783

您不需要将它传递给 PHP 变量。在 django 本身中一切皆有可能。

mimetype 设置为 application/x-zip-compressed

但请注意，在每个请求上创建 zip 存档是个坏主意，这可能会杀死您的服务器（如果存档很大，则不计算超时）。性能方面的方法是将生成的输出缓存在文件系统中的某处，并仅在源文件发生更改时重新生成它。更好的主意是提前准备档案（例如，通过 cron 作业）并让您的 Web 服务器像往常一样为它们提供服务。

```
# archive_list = ["ZipTest1.txt", "ZipTest2.txt", "ZipTest3.txt"]
# # save the files in the archive_list into a PKZIP format .zip file
# zfilename = "Wife101.zip"
# zout = zipfile.ZipFile(zfilename, "w")
# for fname in archive_list:
# zout.write(fname)
# zout.close()
return HttpResponse(zout,mimetupe="application/x-zip-compressed") 
```

# ajax - REST Web 服务和 API 密钥

> ID：11027849
> 
> 赞同：7
> 
> 时间：2012-06-14T06:34:16.283
> 
> 标签：ajax, web-services, rest, api-key

我有一个网络服务，我提供给用户以访问我的应用程序数据库并获取一些信息。用户必须注册 API 密钥并在发出请求时提供该密钥。一切正常，但我如何检查注册密钥的用户是否确实在发出请求，而不是他可能将密钥交给的其他人？

这两天我一直在考虑想出一个解决方案，但到目前为止还没有。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T07:27:40.627

您需要使用签名请求。基本上它是这样工作的：

*   你给你的用户一个 API 密钥*和*一个只有你和客户知道的“秘密”（一个随机字符串）。
*   每当他们提出请求时，他们都会向其中添加一个“签名”参数。这个签名基本上是请求参数 + API 密钥 + 其他参数（见下文） + 秘密的哈希。
*   由于您也知道秘密，因此您可以验证签名是否正确。

为避免重放攻击，您还可以添加随机数和时间戳。随机数只是一个数字，客户端必须在每次请求时递增。当您收到请求时，您会检查您之前是否已经收到过这个随机数/时间戳。如果你这样做了，你就会拒绝该请求（因为它很可能是重放攻击）。如果没有，则将随机数/时间戳存储在数据库中，以便以后查找。

这或多或少是在[OAuth](http://oauth.net/core/1.0/#signing_process)中签署请求的方式。在链接中查看他们的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-24T22:14:55.737

验证 REST API 调用有两个部分。当用户注册您的服务时，您通常会分配一个标识该用户的 KEY。有时，这已经足够了。但是这个 KEY 可以被共享，也可以被盗。在这种情况下，您的服务仍会认为 KEY 有效。现在，为了防止密钥劫持等，您还将分发密钥。此密钥永远不会随 REST API 请求一起传输。此密钥用于执行 API 请求的单向哈希，并创建签名 (HMAC)。

这个签名加上 API 请求（URL 形式的 HTTP 请求）然后被发送到 API 服务器。服务器执行 URL 的单向哈希，并使用该用户的私钥与签名进行比较。如果它们匹配，则“假定”请求者可以访问私钥，因此请求是有效的。

为了避免重放攻击，除了随机数（如上一张海报所建议的那样），您还可以使用哈希链。

# ios - iOS 模拟器是否支持自定义插件？

> ID：11027851
> 
> 赞同：0
> 
> 时间：2012-06-14T06:34:28.123
> 
> 标签：ios, xcode4, ios-simulator

有谁知道 iOS 模拟器（与 XCode 一起使用）是否支持任何类型的插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:38:24.440

iOS 模拟器没有用于插件的公共 API。

# c# - 为什么 XMLTextReader 在将 StringReader 对象传递给它时不返回任何内容？

> ID：11027853
> 
> 赞同：3
> 
> 时间：2012-06-14T06:34:37.610
> 
> 标签：c#, .net, xml, xml-serialization

我想将xml字符串反序列化为定义如下的类型类的对象

```
 [Serializable]
    [XmlRoot("rt")]
    public class XMLSessionParameters
    {
        [XmlArrayItem("el")]
        public List<Elements> Elements { get; set; }
    }

    public class Elements
    {
        [XmlAttribute("nm")]
        public string Name { get; set; }

        [XmlAttribute("vl")]
        public string Value { get; set; }
    } 
```

以下是我要反序列化的 XML

```
<rt>
  <el nm="Name" vl="ABCD_test"/>
  <el nm="Dual" vl="AA"/>
  <el nm="Quad" vl="ABCD"/>
  <el nm="YYMMDD" vl="120614"/>
</rt> 
```

以下是我用于反序列化 XML 字符串的方法

```
public static XMLSessionParameters DeserializeSessionParameters(string xmlString)
    {
        XMLSessionParameters parameters = (XMLSessionParameters)Deserialize(typeof(XMLSessionParameters), xmlString);
        XElement root = XElement.Parse(xmlString);
        List<XElement> fileElements = root.Elements().ToList();
        foreach (XElement fileEle in fileElements)
        {
            string xml = fileEle.ToString();
            Elements ele = (Elements)Deserialize(typeof(Elements), xml);                
            parameters.Elements.Add(ele);
        }
        return parameters;
    }

private static object Deserialize(Type type, string XmlString)
{
    XmlSerializer serializer = new XmlSerializer(type);
    StringReader stringReader = new StringReader(XmlString);
    XmlReader xmlReader = new XmlTextReader(stringReader);
    object serializedObj = serializer.Deserialize(xmlReader);
    return serializedObj;
} 
```

当我将上述 XML 作为字符串传递并且调用 Deserialize 函数时，XMLReader 对象将值作为 None 并且我的程序突然结束，没有给出任何异常。这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T06:38:40.303

xml 与类不匹配；你需要：

```
 [XmlElement("el")]
    public List<Elements> Elements { get; set; } 
```

您对`[XmlArrayItem]`（带有隐式`[XmlArray]`）的使用适用于 xml：

```
<rt>
  <Elements>
    <el nm="Name" vl="ABCD_test"/>
    <el nm="Dual" vl="AA"/>
    <el nm="Quad" vl="ABCD"/>
    <el nm="YYMMDD" vl="120614"/>
  </Elements>
</rt> 
```

（注意额外的`Elements`包装元素）。如果您`[XmlElement]`改为使用，则会将其删除。另外：删除`[Serializable]`：XmlSerializer 不需要。

检查您的属性是否正确的一种简单方法：设置一些典型对象并将*它们序列化*- 将您获得的内容与您需要的 xml 进行比较。

* * *

完整示例：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Xml;
using System.Xml.Serialization;

static class Program
{
    static void Main()
    {
        string xmlString = @"<rt>
  <el nm=""Name"" vl=""ABCD_test""/>
  <el nm=""Dual"" vl=""AA""/>
  <el nm=""Quad"" vl=""ABCD""/>
  <el nm=""YYMMDD"" vl=""120614""/>
</rt>";
        XMLSessionParameters parameters = (XMLSessionParameters)Deserialize(typeof(XMLSessionParameters), xmlString);
        // parameters now has 4 elements, all correctly configured
    }
    private static object Deserialize(Type type, string XmlString)
    {
        XmlSerializer serializer = new XmlSerializer(type);
        StringReader stringReader = new StringReader(XmlString);
        XmlReader xmlReader = new XmlTextReader(stringReader);
        object serializedObj = serializer.Deserialize(xmlReader);
        return serializedObj;
    }

}

[XmlRoot("rt")]
public class XMLSessionParameters
{
    [XmlElement("el")]
    public List<Elements> Elements { get; set; }
}

public class Elements
{
    [XmlAttribute("nm")]
    public string Name { get; set; }

    [XmlAttribute("vl")]
    public string Value { get; set; }
} 
```

# sql - 使用arraylist的sql查询

> ID：11027858
> 
> 赞同：0
> 
> 时间：2012-06-14T06:35:09.317
> 
> 标签：sql, oracle

我有一个`arraylist of Strings`和一个`string which is the csv format of this list`。
我想编写一个 sql 查询，在此列表的基础上优化结果。所以，我想要类似的东西——

```
select * from table_name where name in (`ArrayList<String> values` or `csv format string`). 
```

我相信可以制作类似的东西`procedure`来`functions`解决这个目的。
我只想知道我怎样才能做到这一点。
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:46:02.357

目前还不清楚 ArrayList 到底是什么意思；您是在谈论 C#/Java/这里的任何类型（因为 Oracle PL/SQL 没有泛型）？

无论如何，这是将 PL/SQL 中的逗号分隔列表转换为 PL/SQL 表并将其用于 IN 搜索的一种方法：

（见[AskTom](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:210612357425)）

```
CREATE OR REPLACE TYPE STRINGLISTT as table of varchar2(4000);

create or replace function in_list(p_string    in varchar2,
                       p_delimiter in varchar2) return StringListT is
        l_string long default p_string || p_delimiter;
        l_data   StringListT := StringListT();
        n        number;
      begin
        loop
          exit when l_string is null;
          n := instr(l_string,
                     p_delimiter);
          l_data.extend;
          l_data(l_data.count) := ltrim(rtrim(substr(l_string,
                                                     1,
                                                     n - 1)));
          l_string := substr(l_string,
                             n + 1);
        end loop;      
        return l_data;      
      end; 
```

用法：

```
 select * from my_tab t where t.name in 
   (select * from table(in_list('A,B', ','))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:17:43.777

如果我理解正确，那么您可以尝试：

```
declare
  v_al  arrayList := new arrayList('11', '22', '33');
  v_csv varchar2(32767) := '111,222,333,444';

  i number;
begin

  select count(*)
    into i
    from table_name
   where val in (select column_value from table(v_al))
      or val in (select distinct regexp_substr(v_csv, '[^,]+', 1, level) token
                   from dual
                 connect by level <= regexp_count(v_csv, ',') + 1);

  dbms_output.put_line(i);

end; 
```

在这个例子中我使用`count(*)`了但它不是必需的（也可以在游标中或作为 sql 查询）

[这](http://www.sqlfiddle.com/#!4/1be5c/1)是一个小提琴（仅使用 sql）

# c# - 如何在xaml中TextBlock的Text属性中放置&符号？

> ID：11027859
> 
> 赞同：1
> 
> 时间：2012-06-14T06:35:13.973
> 
> 标签：c#, xaml, windows-phone-7.1

我需要在 TextBlock 中显示带有 & 符号的文本...有什么方法可以在 xaml 中显示...即使我在 TextBlock 的 Text 属性中用 & 符号编写文本 .. 它显示一个错误 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T06:38:20.867

那么你应该尝试使用`&amp;`which 应该显示为`&`

也许您也可以使用 CDATA 实现相同的目的`<![CDATA[&]]>`

[XAML 中的特殊字符](http://msdn.microsoft.com/en-us/library/aa970677.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:38:01.423

这一定是xaml的编码问题，你可以使用html编码的字符串在那里打印一些特殊字符。

对于＆符号，您可以使用`&amp;`. 希望这可以帮助。

# java - FileWriter：如何设置目标文件夹？

> ID：11027861
> 
> 赞同：0
> 
> 时间：2012-06-14T06:35:20.850
> 
> 标签：java, android, filewriter

我正在开发一个小游戏（Android-App），我想将我的高分保存到一个 .txt 文件中，因为如果我将它保存在一个列表中，那么每次启动应用程序时列表都是空的新的。对于一般的 java 程序，这对我来说不是问题，因为 FileWriter 在程序文件夹中创建了一个 .txt。如果我在 Android 中这样做，我（当然）会得到错误，即他无法创建文件。

那么如何告诉 FileWriter 将文件保存在哪里以及应该保存在哪里呢？如果文件名已经存在，如 FileOutput 中的“MODE_PRIVATE”模式，FileWriter 是否会删除现有文件并创建一个具有相同名称的新文件？

我知道我可以使用 FileOutput/InputStream 将文件保存在内部存储中，但 FileOutput 只接受字节（.getBytes()-Method 没有问题），但我找不到将字节转换回来的方法当我想阅读它们时进入字符串。

（我为任何语法错误道歉，因为英语不是我的母语）

**更新：**

首先非常感谢到目前为止的帮助。但我仍然需要一些具体的帮助。这就是我想做的：每次我的游戏结束时，我都会切换到积分活动并给他达到的积分。在积分活动中，我将积分放入一个列表中，并将此列表写入内部存储中的一个文件中。在 Highscores-Activity 中，我想读取这个文件并将文件的内容放在一个列表中，以便使用 ListView 在屏幕上打印它。这是编写文件的代码：

```
ArrayList<Integer> highscoreListe = new ArrayList<Integer>();
punkte = getIntent().getExtras().getInt("Punkte");
public void writeToExternalStoragePublic() throws IOException
 {
     String filename = "highscores.txt"; 

     FileOutputStream fos= null;
     OutputStreamWriter osw = null;
     fos= openFileOutput(filename,Context.MODE_PRIVATE);
     osw = new OutputStreamWriter(fos);
     for(Integer score : highscoreListe)
     {
         osw.write(score);
         osw.append(System.getProperty("line.separator"));
     }
     osw.close();
     fos.close();
 } 
```

我在 stackoverflow 上阅读了很多关于此的问题，但我仍然不知道如何读取此文件以将文件中的每一行都放入一个新字符串或 int 到列表中。我希望你明白我想做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:38:03.583

请参考此链接以添加文件

[http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

[在模拟器模式下以“APPEND模式”写入文本文件，](https://stackoverflow.com/questions/8692297/writing-to-text-file-in-append-mode-in-emulator-mode)

```
does the FileWriter deletes an existing file and creates a new file with the same name if the filename already exists 
```

是的，但考虑

```
public FileWriter(File file,
                  boolean append)
append - if true, then bytes will be written to the end of the file rather than the beginning 
```

你想让你的文件私有写入内部存储。

# java - 在Java中将参数从一个进程传递到另一个进程

> ID：11027862
> 
> 赞同：4
> 
> 时间：2012-06-14T06:35:33.800
> 
> 标签：java

我正在编写一个桌面 Java 应用程序，它基本上在系统托盘中运行。此应用程序可以接受命令行参数。如果有一个应用程序的实例正在运行并且另一个实例使用命令行参数调用，它只是将它传递给系统托盘中正在运行的进程。

我对如何实现这一点非常迷茫？我见过一些应用程序这样做，但我不记得名字了。我想传递的只是字符串参数，然后退出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:40:27.717

实施此解决方案有两个部分：

1.  检测是否已经有程序实例在运行
2.  如果程序已经在运行，则将字符串参数传递给程序

使用 Sockets 可以同时完成 1 和 2。

你可以做的是让你的程序在你的程序启动时监听一个端口。当你启动另一个程序实例时，它会尝试监听同一个端口，如果该端口被占用，你可以假定已经有一个程序实例在运行。当然，您应该选择一个任何应用程序都不常用的端口。

然后，如果程序的实例已经启动，只需使用 Sockets 传递 String 参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T06:41:10.100

换句话说，您希望您的应用程序是单例的。当用户尝试运行另一个应用程序实例时，它应该向已经存在的应用程序发送某种命令。

您可以按以下方式进行。

应用程序启动时应该打开服务器套接字到您选择的端口。如果成功，它应该开始。这是您的应用程序的第一个实例。如果失败，则表示该端口已经很忙，因此您的应用程序的其他实例正在侦听它。在这种情况下，连接到此套接字，发送命令并终止。

选择端口号时要小心。它应该足够高（> 10000）并且不应该被任何其他流行的应用程序使用。选择一些数字，然后尝试用谷歌搜索。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T06:53:40.860

基本上这个想法是在启动时绑定一个本地端口，如果失败连接到它并发送参数。

```
public class StartOnce {

  public static void main(String args[]) throws IOException {
    SocketAddress addr = new InetSocketAddress("127.0.0.1", 9999);

    try {
        ServerSocket ss = new ServerSocket();
        // tries to bind to localhost:9999
        ss.bind(addr);
        // Ok, I'm the first instance, listen for other instances for update.
        while(true) {
            Socket s = ss.accept();
            BufferedReader br = new BufferedReader(new InputStreamReader(s.getInputStream()));
            String line = null;
            while ((line = br.readLine()) != null) {
                System.out.println(line);
            }
            br.close();
            s.close();
        }
    } catch (BindException e) {
        // BindException, tries to send message to the first instance.
        System.out.println("Another instance is running. Say hi.");
        Socket s = new Socket();
        s.connect(addr);
        PrintWriter pw = new PrintWriter(s.getOutputStream());
        pw.println("Hello.");
        for (String arg : args) {
            pw.println(arg);
        }
        pw.close();
        s.close();
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T06:40:23.107

您需要执行某种进程间通信。有许多技术可以用来实现这一目标，包括：

*   插座
*   网页服务
*   Java 远程方法调用 (RMI)
*   使用数据库
*   写入文件

（写入文件对于 IPC 来说是一个糟糕的选择，除非您使用的是 POSIX 命名管道而不是普通文件）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T06:37:13.840

有多种方法可以实现这一目标。在 Java 中，您可以将[JMS](http://en.wikipedia.org/wiki/Java_Message_Service)用于此类事情。如果您使用的是 Spring，则有此模板。这是一个关于如何开始使用 JMS的[教程。](http://docs.oracle.com/javaee/6/tutorial/doc/bncdq.html)

或者您可以使用套接字，甚至[RMI](http://docs.oracle.com/javase/6/docs/technotes/guides/rmi/index.html)在多个进程内交换数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-09T22:25:25.117

另一种选择是使用在单独进程中运行的缓存。

# jquery - JQuery UI - 可调整大小（'destroy'）不适用于 setTimeout fn

> ID：11027863
> 
> 赞同：0
> 
> 时间：2012-06-14T06:35:35.270
> 
> 标签：jquery, jquery-ui, jquery-resizable

这是 jsFiddle[演示链接。](http://jsfiddle.net/e2yfC/43/)

我可以看到警报在 5 秒后被触发，但销毁不起作用..

请提出任何建议或替代方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:46:06.810

[在 jsfiddle 上](http://jsfiddle.net/e2yfC/44/)查看**DEMO**

实际上`this`是无法访问的`settimeout`

# matlab - 不同大小的 matlab 矩阵（索引、for 循环和 bsxfun）

> ID：11027864
> 
> 赞同：0
> 
> 时间：2012-06-14T06:35:43.817
> 
> 标签：matlab, loops, matrix, bsxfun

我有两个不同大小的矩阵。让我们将矩阵 {a} 定义为 a(1:10) <10 x 1> 并将矩阵 {b} 定义为 b(6:10) <5 x 1>。我需要一个 for 循环或等效的 (bsxfun) 来获取矩阵 {a} 和 {b} 之间的差异，代码将根据矩阵 {b} 的大小进行迭代。例如，矩阵 {a} 的第一个值为 1，代码将获取所有矩阵 {b} 值的差。因此，它将总共运行 5 次。矩阵 {a} 的下一个值为 2，代码将迭代 5 次。代码将迭代直到矩阵 {a} 结束，即值为 10。

如果可以的话，您可以编写一个不带 bsxfun 的 for 循环和一个带 bsxfun 的循环，并解释您是如何索引这些值的。另外，只是为了我的启发，如果有 N 个矩阵（N>2），而不是两个矩阵，代码将如何变化？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T07:30:35.393

这是一个循环解决方案和一个`repmat`解决方案。

% 定义一些示例数据。

**Edit:** `a` and `b` are column vectors, not row vectors.

```
a = [ 1:10 ]'; 
```

`b = [ 6:10 ]';` % `5:10` has vertical size of 6, not 5, so to match the question `6:10` is used.

First, the very basic loop solution: loop through all `aIndex`,`bIndex` pairs, subtract the difference of elements addressed by `aIndex` and `bIndex` and store the result in `LoopDifferenceMatrix(aIndex, bIndex)`.

```
for aIndex = 1:size(a,1)
    for bIndex = 1:size(b,1)
        LoopDifferenceMatrix(aIndex, bIndex) = a(aIndex) - b(bIndex);
    end
end 
```

This is an alternative `repmat` solution. Replicate `a` horizontally by using `repmat` so that its horizontal size matches `size(b,1)` (the horizontal size of `b`). Then replicate transposed `b` vertically by using `repmat` so that its vertical size matches `size(a,1)` (the original horizontal size of `a`). Subtract replicated `a` from replicated `b` and store the result in `DifferenceMatrix`.

```
DifferenceMatrix = repmat(a, 1, size(b,1)) - repmat(b', size(a,1), 1);

DifferenceMatrix =
-5    -6    -7    -8    -9
-4    -5    -6    -7    -8
-3    -4    -5    -6    -7
-2    -3    -4    -5    -6
-1    -2    -3    -4    -5
 0    -1    -2    -3    -4
 1     0    -1    -2    -3
 2     1     0    -1    -2
 3     2     1     0    -1
 4     3     2     1     0 

isequal(DifferenceMatrix, LoopDifferenceMatrix)
ans =
1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T07:42:12.117

这是你想要做的吗？

```
a = 1:10;
b = 6:10;
c = zeros(length(b),length(a));
d = zeros(length(b),length(a));

for n = 1:length(b)
    c(n,:) = bsxfun(@minus,a,b(n));
    d(n,:) = a - b(n);
end 
```

至于如何用 N 个矩阵来做，你必须指定你想用第 N 个矩阵做什么。

# python - 使用 ssl 和套接字的 python 客户端身份验证

> ID：11027865
> 
> 赞同：2
> 
> 时间：2012-06-14T06:35:44.347
> 
> 标签：python, sockets, ssl, openssl

我有一个需要客户端使用证书进行身份验证的 python 服务器，我如何制作一个使用客户端证书的客户端脚本，以便由 python 中的服务器使用 ssl 和套接字模块进行身份验证。

有没有使用套接字和 ssl 的例子，但没有扭曲？

```
from OpenSSL import SSL
from twisted.internet import ssl, reactor
from twisted.internet.protocol import ClientFactory, Protocol

class EchoClient(Protocol):
    def connectionMade(self):
    "print connected"

    def dataReceived(self, data):
        print "Server said:", data
        self.transport.loseConnection()

class EchoClientFactory(ClientFactory):
    protocol = EchoClient

    def clientConnectionFailed(self, connector, reason):
        print "Connection failed - goodbye!"
        reactor.stop()

    def clientConnectionLost(self, connector, reason):
        print "Connection lost - goodbye!"
        reactor.stop()

class CtxFactory(ssl.ClientContextFactory):
    def getContext(self):
        self.method = SSL.TLSv1_METHOD
        ctx = ssl.ClientContextFactory.getContext(self)
        ctx.use_certificate_file('client.crt')
        ctx.use_privatekey_file('client.key')
        return ctx

if __name__ == '__main__':

    factory = EchoClientFactory()
    reactor.connectSSL('localhost', 8080, factory, CtxFactory())
    reactor.run() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:52:11.260

```
import socket, ssl, pprint

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

# require a certificate from the server
ssl_sock = ssl.wrap_socket(s,
                keyfile="client.key",
                certfile="client.crt",
                ca_certs="ca.crt",
                cert_reqs=ssl.CERT_REQUIRED)

ssl_sock.connect(('127.0.0.1', 8080))

print repr(ssl_sock.getpeername())
print ssl_sock.cipher()
print pprint.pformat(ssl_sock.getpeercert())

ssl_sock.write("testing")
data = ssl_sock.read()
print data

ssl_sock.close() 
```

# jquery - 防止后退按钮jquery mobile

> ID：11027869
> 
> 赞同：1
> 
> 时间：2012-06-14T06:35:51.740
> 
> 标签：jquery, jquery-mobile

我正在开发一个 jQuery 移动项目，需要防止用户返回某些页面，UI 显然没有提供用户不应该返回的后退按钮，但是当用户单击浏览器上的后退按钮。

我试图通过将 pagebeforechange 事件绑定到一个函数来阻止用户返回，该函数通过查看目标页面的 URL 可以知道用户是否返回。这在我的项目中有点简单，因为只有 2 个 URL 可通过 UI 访问，因此任何其他 URL 都意味着用户点击了后退按钮。由于 URL 的性质，我正在使用正则表达式来验证这一点：

```
$( document ).bind('pagebeforechange', function(event, data) {  

  if(typeof data.toPage === "string") {
    var url = data.toPage;
    var regex = /.../
    var paramsIndex = url.indexOf('?'); // Get rid of possible params

    if(paramsIndex > 0) {
      url = url.substr(0, paramsIndex);
    }

    if(regex.test(url)) {   
       event.preventDefault(); // Prevent the user from going back..
    }       
  }

}); 
```

不幸的是，这不起作用，即使正则表达式工作正常并且每次用户点击后退按钮时都匹配（并且只有在那时）。我想知道您是否有任何想法，我更愿意继续使用 jquery mobile 的 ajax 导航。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:20:53.387

`return false;`正如塞缪尔所说或添加`event.stopImmediatePropagation();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T07:27:36.300

我不是移动开发专家，但看到[这个问题](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)，也许你应该试试这个：在你的事件处理程序中，替换`event.preventDefault();`为`return false;`. 这只会给你更多的机会来实现你的目标。

# android - 我们如何在 relativelayout 中的 listview 下面添加自定义视图（gif 图像下载表单 url）

> ID：11027871
> 
> 赞同：0
> 
> 时间：2012-06-14T06:35:57.820
> 
> 标签：android

我需要从 url 下载 gif 图像并将其提供给 xml 中的 custonview。

需要在gif图片listview下方添加。问题是 listview 没有在相对布局中添加到 gif 图像下方。下面是我的布局 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/Mainlay"
    android:orientation="vertical" >
     <com.android.gif.GIFView
        android:layout_marginLeft="30dp" android:layout_gravity="center"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:id="@+id/GIFSingle">
</com.android.gif.GIFView>
    <ListView android:id="@+id/ListView01"
        android:layout_height="wrap_content"
android:layout_width="fill_parent" 
android:cacheColorHint="#FFFFFF"
android:divider="#FFFFFF"
></ListView>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:41:32.207

你必须使用 Android RelativeLayout 属性

```
<ListView android:id="@+id/ListView01"
android:layout_below="@+id/GIFSingle"
                            android:layout_height="wrap_content"
                    android:layout_width="fill_parent" 
                    android:cacheColorHint="#FFFFFF"
                    android:divider="#FFFFFF"
                    ></ListView> 
```

此属性在前一个视图下方定义新视图，或者查看设置为右、左、上、下的不同属性。

希望这能解决你的问题..

# ruby-on-rails - Capistrano 抱怨资产预编译中缺少“eventmachine”

> ID：11027872
> 
> 赞同：1
> 
> 时间：2012-06-14T06:36:05.550
> 
> 标签：ruby-on-rails, rake, capistrano, asset-pipeline

我正在尝试按照 Ryan Bates 截屏视频部署到 VPS。

我使用瘦作为网络服务器而不是独角兽，它让我很头疼......当它试图编译服务器上的资产时，它给了我这个：

```
triggering after callbacks for `deploy:update_code'
* executing `deploy:assets:precompile'
* executing "cd /home/deployer/apps/my-app/releases/20120614062157 && b
undle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile"
servers: ["**.**.**.**"]
[xx.xx.xx.xx] executing command
** [out :: **.**.**.**] rake aborted!
** [out :: **.**.**.**] cannot load such file -- eventmachine
** [out :: **.**.**.**]
** [out :: **.**.**.**] (See full trace by running task with --trace)
command finished in 3891ms
*** [deploy:update_code] rolling back
* executing "rm -rf /home/deployer/apps/my-app/releases/20120614062157;
true"
servers: ["**.**.**.**"]
[**.**.**.**] executing command 
```

我无法检查是否在捆绑包中安装了 eventmachine，因为 capistrano 总是回滚所有内容，所以我实际上并没有在脚本之后安装应用程序..这使得几乎不可能进一步追溯......

所以我完全迷路了。谷歌搜索“rake assets:precompile eventmachine”不会返回任何相关的内容..

感谢您的帮助。

亲切的问候斯特凡诺

我的宝石文件：

```
source 'http://rubygems.org'

gem 'rails', '3.2.2'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

# gem 'sqlite3'
gem 'pg'
gem 'bootstrap-sass-rails'

group :development do 
    # To generate the class diagrams.
    gem 'annotate', :git => 'git://github.com/jeremyolliver/annotate_models.git', :branch => 'rake_compatibility'
end

group :test do
    gem 'rspec-rails'
    gem 'capybara'
    gem 'spork', '0.9.0'
    gem 'factory_girl_rails'
    gem 'guard-spork', '0.3.2'
end 

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer'

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

#To use ActiveModel has_secure_password
gem 'bcrypt-ruby', '~> 3.0.0'

# Form helpers
gem 'simple_form'
gem 'country_select'

# RMagick
gem 'mini_magick'

# Active merchant
gem 'activemerchant', :require => 'active_merchant'

# To validate IBAN numbers
gem 'iban-tools'

# For the google maps stuff
gem 'gmaps4rails'

# To generate PDFs
gem 'prawn', '1.0.0.rc1'

# HAML test
gem 'haml'
gem 'haml-rails'

# For HTML emails
gem 'roadie'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# gem "thin", "1.3.1"
# gem "unicorn"

# Deploy with Capistrano
gem 'capistrano'

platform :ruby do
    gem "unicorn"
end

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug' 
```

如您所见，我将瘦身换成了独角兽……我想我也将其范围缩小到 capistrano 从不真正调用捆绑安装？因为现在它抱怨没有找到 nokogiri。

我设法在共享/缓存副本目录下找到 capistrano 存储在服务器上的实际版本，并且捆绑安装在那里工作得很好！

是的，“使用 rails 部署很容易！” 很容易在它上面浪费一整个星期..

如果我执行 bundle exec cap deploy，则捆绑安装有效：

```
 triggering after callbacks for `deploy:finalize_update'
  * executing `bundle:install'
  * executing "ls -x /home/deployer/apps/hemd-mit-stil/releases"
    servers: ["xx.xx.xx.xx"]
    [xx.xx.xx.xx] executing command
    command finished in 1453ms
  * executing "cd /home/deployer/apps/hemd-mit-stil/releases/20120615043946 && b
undle install --gemfile /home/deployer/apps/hemd-mit-stil/releases/2012061504394
6/Gemfile --path /home/deployer/apps/hemd-mit-stil/shared/bundle --deployment --
quiet --without development test"
    servers: ["xx.xx.xx.xx"]
    [xx.xx.xx.xx] executing command
    command finished in 29813ms
  * executing `deploy:symlink_config'
  * executing "ln -nfs /home/deployer/apps/hemd-mit-stil/shared/config/database.
yml /home/deployer/apps/hemd-mit-stil/releases/20120615043946/config/database.ym
l"
    servers: ["xx.xx.xx.xx"]
    [xx.xx.xx.xx] executing command
    command finished in 1484ms
    triggering after callbacks for `deploy:update_code'
  * executing `deploy:assets:precompile'
  * executing "cd /home/deployer/apps/hemd-mit-stil/releases/20120615043946 && b
undle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile"
    servers: ["xx.xx.xx.xx"]
    [xx.xx.xx.xx] executing command
 ** [out :: xx.xx.xx.xx] rake aborted!
 ** [out :: xx.xx.xx.xx] cannot load such file -- nokogiri
 ** [out :: xx.xx.xx.xx]
 ** [out :: xx.xx.xx.xx] (See full trace by running task with --trace)
    command finished in 3563ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/deployer/apps/hemd-mit-stil/releases/20120615043946;
 true"
    servers: ["xx.xx.xx.xx"]
    [xx.xx.xx.xx] executing command
    command finished in 1453ms
failed: "sh -c 'cd /home/deployer/apps/hemd-mit-stil/releases/20120615043946 &&
bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile'" on
 xx.xx.xx.xx 
```

我的 deploy.rb 文件（基本上是从 railscasts 直接复制）

```
require "bundler/capistrano"

server "xx.xx.xx.xx", :web, :app, :db, primary: true

set :application, "hemd-mit-stil"
set :user, "deployer"
set :deploy_to, "/home/#{user}/apps/#{application}"
set :deploy_via, :remote_cache
set :use_sudo, false

set :scm, "git"
set :repository, "git@github.com:Stefano1990/#{application}.git"
set :branch, "master"

default_run_options[:pty] = true
ssh_options[:forward_agent] = true
ssh_options[:paranoid] = false 

after "deploy", "deploy:cleanup" # keep only the last 5 releases

namespace :deploy do
  %w[start stop restart].each do |command|
    desc "#{command} unicorn server"
    task command, roles: :app, except: {no_release: true} do
      run "/etc/init.d/unicorn_#{application} #{command}"
    end
  end

  task :setup_config, roles: :app do
    sudo "ln -nfs #{current_path}/config/nginx.conf /etc/nginx/sites-enabled/#{application}"
    sudo "ln -nfs #{current_path}/config/unicorn_init.sh /etc/init.d/unicorn_#{application}"
    run "mkdir -p #{shared_path}/config"
    put File.read("config/database.example.yml"), "#{shared_path}/config/database.yml"
    puts "Now edit the config files in #{shared_path}."
  end
  after "deploy:setup", "deploy:setup_config"

  task :symlink_config, roles: :app do
    run "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml"
  end
  after "deploy:finalize_update", "deploy:symlink_config"

  desc "Make sure local git is in sync with remote."
  task :check_revision, roles: :web do
    unless `git rev-parse HEAD` == `git rev-parse origin/master`
      puts "WARNING: HEAD is not the same as origin/master"
      puts "Run `git push` to sync changes."
      exit
    end
  end
  before "deploy", "deploy:check_revision"
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T04:56:02.557

我真的发现了问题...

如果您将 Gemfile.lock 保存在您的存储库中（这是推荐的）并且您在 Windows 机器上生成 Gemfile.lock，那么您基本上就完蛋了。

来自 Windows 机器的 Gemfile.lock 将执行此操作：

```
bcrypt-ruby (3.0.1-x86-mingw32) 
```

在您的生产环境（linux）中，这将默默地失败。

**“解决方案”：** 不要将 Gemfile.lock 检入您的版本控制中。这可能会导致稍后出现问题，但是当您重新部署并且您的应用决定更新其 gem 时，因为它自己构建了 Gemfile.lock。

**“*真正的*解决方案”：** 不要在 Windows 上工作。

要从存储库中删除 Gemfile.lock，请执行以下操作：

```
git rm Gemfile.lock 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T03:37:13.443

你不需要`cap deploy:cold`，但你需要确保你的 capistrano 脚本知道`bundle install`。你需要做的就是`require 'bundler/capistrano'`。这应该会有所帮助： http: [//gembundler.com/deploying.html](http://gembundler.com/deploying.html)

# javascript - javascript中的分割函数

> ID：11027877
> 
> 赞同：0
> 
> 时间：2012-06-14T06:36:42.193
> 
> 标签：javascript

我有一个包含不同值的数组，我想将它们拆分并在浏览器中打印。但我想提醒它第一个值。我做了一个功能，但它不是工作

```
<script type="text/javascript">
$(function(){
    var jam= new Array("first","second","third","fourth");
    var Klnew= jam.split(",");

    //for(i=0;i<Klnew.length;i++) {}

    alert(Klnew[0])     
});    
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T06:40:44.173

您不能拆分数组。它已经分裂了。

你可能正在寻找这样的东西：

```
var foo = ['a', 'b', 'c']; 
console.log(foo.shift());    // Outputs "a"
console.log(foo.join(','));  // Outputs "b,c" 
```

......但很难从你的问题中看出你的目标是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:39:09.347

```
var jam= new Array("first","second","third","fourth");
alert(jam[0]); // alert before the join.
var Klnew= jam.join(","); // join, not split the array... 
```

**输出：**

```
"first,second,third,fourth" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T06:40:11.927

```
 $(function(){
        var jam= new Array("first","second","third","fourth");
        var Klnew= jam.slice();
    //  for(i=0;i<Klnew.length;i++) {}
        alert(Klnew[0])
   }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T06:42:21.953

您将使用 split 从字符串中获取数组：

> "第一，第二，第三，第四".split(',') ==> ['第一'，'第二'，'第三'，'第四']

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T06:44:17.777

即使这样也行得通——

```
var jam = new Array("first", "second", "third", "fourth");
alert(jam[0]); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T06:45:39.457

`split`(of string) 方法将字符串拆分为数组。

`join`(of array) 方法将数组元素连接成字符串。所以：

```
arr = Array("first","second","third","fourth");
str = arr.join(",")
alert(str) // will alert "first,second,third,fourth"
alert(arr == str.split(","))// will alert true 
```

# asp.net-mvc-3 - asp.net mvc3 应用程序的性能

> ID：11027879
> 
> 赞同：1
> 
> 时间：2012-06-14T06:36:59.107
> 
> 标签：asp.net-mvc-3, performance-testing

我知道一个 asp.net mvc3 应用程序在 150 多个用户同时访问该站点时崩溃。该架构使用 2 台服务器进行负载平衡，每台服务器具有 4 GB RAM。对于上述场景，此应用程序在两台服务器中的 w3wp 进程占用超过 1.5 GB。这是资源次优还是编码不佳的实例？如何使用给定的资源执行更好的代码？后端有ms-sql服务器，没有网络相关问题

# c++ - 从析构函数内部调用 delete 会导致堆栈溢出吗？

> ID：11027884
> 
> 赞同：1
> 
> 时间：2012-06-14T06:37:16.123
> 
> 标签：c++, memory-management, stack-overflow, destructor

下面的代码创建一个指向 a 的双`B**`指针`B*`。它将使用该指针为另一个指针分配内存，该指针将指向调用`B`时创建的实例`start()`：

`class A`：

```
class A
{
public:
    A()
    {
        fb = new B*;
        *fb = NULL;
    }

    ~A()
    {
        if(*fb)
            delete *fb;

        delete fb;
    }

    B** getfb()
    {
        return fb;
    }

private:
    B** fb;
}; 
```

`class B`：

```
class B
{
public:
    B()
    {
        B** fb = a->getfb();

        *fb = this;
    }

    ~B()
    {
        B** fb = a->getfb();

        delete *fb;            // <--- stack overflow

        *fb = NULL;
    }

private:
    A* a;
}; 
```

`start()`（的成员函数`class C`）：

```
void C::start()
{
    B** fb = a->getfb();        // 'a' is a pointer to an 'A' instance

    if(*fb == NULL)
        B* f = new B;
} 
```

所以，每当我调用`start()`然后调用`~B()`时，我都会遇到堆栈溢出！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T06:39:56.857

听起来不错。

的类型`fb`是`B**`所以的类型`*fb`是`B*`。

因此，当您说`delete *fb`您正在调用析构函数时，该析构函数`class B`是一个递归调用，不会朝着基本情况取得进展，因此堆栈溢出。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-14T06:42:06.247

在`B()`你分配`*fb = this;`然后：

```
~B()
{
  ...
  delete *fb; // delete this;
  ...
} 
```

.. 相当于`delete this;`在析构函数内部`~B()`一次又一次地调用，因此由于递归函数太多而导致 stackoveflow。

这是一个很好的线程[是否安全`delete this`](https://stackoverflow.com/questions/550189/is-it-safe-to-delete-this)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-14T06:43:47.567

这并不奇怪。您在 B 类的析构函数中，访问当前正在调用其析构函数的 B 的相同实例，然后再次将其删除。这将导致析构函数调用中的递归，从而导致堆栈溢出。您在 A 类删除 fb 足以清理您的记忆，您不希望 B 类自行删除。

您也不需要在 B 类构造函数中执行您正在执行的操作。你在 A 类中的代码是有道理的，你在 B 类中的代码是危险的和不必要的。在 B 类中，您没有设置其成员 a 的功能。这意味着指针未初始化，然后您尝试将此 B 类实例分配给此*未初始化*A 实例的B 类成员指针。

```
 B()
    {
        B** fb = a->getfb(); // a never gets set to a meaningful value!!!!!

        *fb = this;
    } 
```

# php - 使用 PHP 5.4 内部服务器加载 .user.ini PHP conf 文件？

> ID：11027886
> 
> 赞同：1
> 
> 时间：2012-06-14T06:37:17.343
> 
> 标签：php

`.user.ini`使用内置 Web 服务器时如何加载PHP 配置文件？

我的设置是这样的：

```
site
│   include.php
│
├───bin
│       router.php
│       server.bat
│
└───public
        .user.ini
        index.php 
```

文档根目录是`public`，如果文件不存在则`bin\router.php`路由到。`public\index.php`

我做了一个`phpinfo()`, 来验证`.user.ini`没有被加载。我要更改的设置是`error_log`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:11:19.983

Petah，我刚刚从您的评论中发现了问题所在。内置 webserver 仅在 5.4 中引入

> 此 Web 服务器仅用于开发目的，不应在生产中使用。

它充当监听指定套接字的网络服务器。.user.ini[声明](http://php.net/manual/en/configuration.file.per-user.php)：

> 这些文件***仅***由 CGI/FastCGI SAPI 处理。此功能淘汰了 PECL htscanner 扩展。如果您使用的是 Apache，请使用 .htaccess 文件以获得相同的效果。

换句话说，您不能将 .user.ini 文件与内置网络服务器或 Apache/mod_php 等一起使用。您必须使用自定义 php.ini。最安全的方法是克隆默认的 php.ini（或 Apache/mod_php 的 php_value/flag 指令），然后添加您想要开发的行。当然，您也可以随时在脚本启动中添加一个 ini_set 命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:57:57.147

虽然不是我问题的确切答案，但我找到了解决问题的方法。

在`server.bat`我正在使用的文件中运行 php 服务器

```
php -S 0.0.0.0:3000 -t public bin/router.php 
```

通过将其更改为：

```
php -c public/.user.ini -S 0.0.0.0:3000 -t public bin/router.php 
```

达到了同样的效果。

# javascript - 如何使用 jquery mobile 动态创建单选按钮？

> ID：11027890
> 
> 赞同：1
> 
> 时间：2012-06-14T06:37:44.003
> 
> 标签：javascript, android, jquery, jquery-mobile

使用 for 循环条件动态创建单选按钮时，不会创建单选按钮。我遵循的代码是

Polldetails.html

```
 <div data-role="content" class="pollsdetailsscreen">
            <p>Polls details page with radio buttons created dynamically.</p>
        </div>
        <div>   
             <ul id="radiopolls" data-theme="e" >
            </ul>
            comments:<textarea name="pollscomments" id="pollscomments"></textarea>
            <div data-role="content"  >
                <a href="#" data-role="button" style="width: 100px;float:right">Submit</a>
            </div>  
        </div> 
```

投票详情.js

```
 var pollsDetails = function pollsDetails(){

//for(var i=0;i<4;i++)
//  {
//var radiobutton = document.createElement('label');
//radiobutton.innerHTML="<input type='radio' name='hello'>hii000";
// $('#radiopolls').prepend(radiobutton).trigger('create');
//  }

for(var i=0; i<4; i++)
    {
        if(data.type == "poll")
            {
                             console.log("this is polls page");
                            //here i need to create four radio buttons dynamically based on below **data** options. 
            }
        else if(data.type == "review")
            {
              console.log("this is reviews page");              
            }                       
    }
     }

        var data = {
       type:"poll",
       question : "How are you?",
       options : [{
           type : "radio",
           name: "radioTest",
           text: "Good"
       },
       {
           type:"radio",
           name: "radioTest",
           text: "Fine"
       },
       {
           type:"radio",
           name: "radioTest2",
           text: "Nice"
       },
       {
           type:"radio",
           name: "radioTest2",
           text: "V Nice"
       },
       {
           type:"checkbox",
           name:"check",
           text:"This is a check box"
       },
       {
           type:"textarea",
           name:"comments",
           text:"Comments Please"
       }    
       ]
    }; 
```

根据通过检查条件的代码，我需要在条件为**data.type = "poll"**时动态创建 4 个单选按钮，但我无法根据代码动态创建单选按钮.. 任何人都可以帮我解决这个问题.. ...........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:17:17.693

请注意，您不能混合和匹配单个表单值的单选按钮和其他输入类型。通过用 2 个不同的名称命名 4 个单选按钮，您实际上创建了 2 个单独的问题，每个问题都有 2 个答案。我很确定下面的代码不会产生你想要的东西，但它应该能让你走得更远，你可以根据需要调整它：

```
if (data.type === 'poll') {
    var poll = {};
    for (optionIndex = 0; optionIndex < data.options.length; optionIndex++) {
        var option = data.options[optionIndex];
        if (option.type === 'radio') {
            var fieldset = poll[option.name];
            if (!fieldset) {
                poll[option.name] = fieldset = $('<fieldset data-role="controlgroup">');
                fieldset.append( $('<legend>').html(data.question) );
            }

            var answerID = 'poll-answer-' + (optionIndex + 1);
            fieldset.append( $('<input type="radio" />').attr('name', option.name).attr('value', option.text).attr('id', answerID) );
            fieldset.append( $('<label>').attr('for', answerID).html(option.text) );
        }
    }

    var containerElement = $('#radiopolls');
    for (answerSet in poll) {
        poll[answerSet].appendTo(containerElement).trigger('create');
    }
} 
```

如果您需要任何帮助来适应它，请问。祝你好运！

# c# - 用于测试 C# 控制台应用程序并生成分析结果的脚本

> ID：11027891
> 
> 赞同：0
> 
> 时间：2012-06-14T06:37:47.273
> 
> 标签：c#, .net, scripting, mono

我编写了一个 C# 控制台应用程序，在其中我接受来自用户的一组输入`Console.ReadLine();`。我返回集合中一个输入的可能替换项。这些作为列表返回。现在我想为大约 100 组输入值测试我的应用程序，并且想知道给定集中的每个输入变量可以进行多少次替换。我还想要每次运行的分析结果。

有没有一种方法我可以做到这一点，而无需自己针对 100 套代码进行测试？我希望有一种方法可以在某个文件（可能是 csv 文件）中列出我的输入集，每次都从该文件中重定向输入。

如果那里有解决方案，我可以在 linux 中使用 MONO。谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:08:30.997

你可以考虑做的是使用`Process`类。

```
var processInfo = new ProcessStartInfo
{
    FileName = "consoleapp.exe",
    WindowStyle = ProcessWindowStyle.Hidden,
    CreateNoWindow = false,
    UseShellExecute = false,
    RedirectStandardOutput = true,
    RedirectStandardInput = true
};

using (Process clconfigureclient = Process.Start(processInfo))
{
    // Write input to your application.
    clconfigureclient.StandardInput.WriteLine(value1);
    clconfigureclient.StandardInput.WriteLine(value1);
    clconfigureclient.WaitForExit();
}

output = cm.StandardOutput.ReadToEnd();
// Do checks on output. 
```

# objective-c - 如何使用 loadnibnamed 来 pushviewController

> ID：11027892
> 
> 赞同：1
> 
> 时间：2012-06-14T06:37:47.867
> 
> 标签：objective-c, cocoa, uinavigationcontroller, uinavigationbar

我正在编写一个使用 NavigationBar 的程序。

我正在使用这个网站上的项目 [http://www.edumobile.org/iphone/iphone-programming-tutorials/pagecontrol-example-in-iphone/](http://www.edumobile.org/iphone/iphone-programming-tutorials/pagecontrol-example-in-iphone/)

通常，我们将视图控制器推送到导航控制器上。就我而言，我的 xib 连接到一个作为对象的类

```
#import <UIKit/UIKit.h>
@interface PageControlExampleAppDelegate : NSObject  {
UIWindow *window;
IBOutlet UIScrollView *scrollView;
IBOutlet UIPageControl *pageControl;
NSMutableArray *viewControllers;
BOOL pageControlUsed;
}
@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) UIScrollView *scrollView;
@property (nonatomic, retain) UIPageControl *pageControl;
@property (nonatomic, retain) NSMutableArray *viewControllers;

- (IBAction)changePage:(id)sender; 
```

问题是因为这不是 viewController，所以我无法将它推送到 navigationController 上。

视图使用 loadNibNamed 加载，对象使用 awakeFromNib 加载。

我的问题是，当我调用 loadNibNamed 时，它会打开这个对象，并且由于导航栏消失了，我无法返回到以前的视图。这个视图似乎把自己加载到了一切之上。

我尝试创建一个新类，它是一个 viewController，并且有一个 ContentController 的对象，但它会加载新的 viewController（它是空的）。如果我从新的 viewController 调用 loadNibNamed，新的视图仍然会出现在所有内容之上。

1-将这个对象（打开一个视图）推送到我的导航控制器上的最佳方法是什么？

2-我如何将这个 contentController 变成 UIViewController 而不是对象，它的外观和工作方式是否仍与 NSObject 相同？

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-14T06:45:56.387

我没有清楚地理解你所说的。
但是对于导航控制器，试试这个
[self.navigationController setNavigationBarHidden:NO animated:animated];

# android - 在 Android 内存中保存多个字符串以供以后使用

> ID：11027897
> 
> 赞同：0
> 
> 时间：2012-06-14T06:38:05.033
> 
> 标签：android, sql

我有一个应用程序，每次使用它都会生成五个字符串，我希望保存这些字符串以供以后使用，即。当我再次打开并运行该应用程序时。当我第二次使用该应用程序时，我想保存新的五个字符串以供以后使用，以及我第一次运行该应用程序时生成的前五个字符串。一直持续到我说出这五根弦的 10 组为止。

我对执行此操作的最佳方法感到困惑，内部存储器，sql 数据库等，有人可以为我指出一个最佳实践的好例子。我对 sql 数据库的经验非常有限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:40:57.527

**在我看来， Sqlite**将是最佳实践，`SharedPreferences`如果您有固定数量的字符串，您也可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:41:15.750

您可以`SharedPreferences`用于存储字符串

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T06:47:39.440

Android 实际上为您提供了广泛的存储机制，例如，

1.  共享偏好
2.  方镁石
3.  文件
4.  外部或内部目录。

看看这些：[Android中的](http://www.skill-guru.com/blog/2011/01/17/data-storage-mechanisms-in-android/)[数据存储](http://developer.android.com/guide/topics/data/data-storage.html)和数据存储机制

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T07:02:20.327

来自安卓网站：http: [//developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

保存：

```
// We need an Editor object to make preference changes. 
// All objects are from android.context.Context
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
SharedPreferences.Editor editor = settings.edit();
editor.putBoolean("silentMode", mSilentMode);

// Commit the edits!
editor.commit(); 
```

装载：

```
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
boolean silent = settings.getBoolean("silentMode", false); 
```

# c# - 水晶报告标题行与子项目合并可能吗？

> ID：11027898
> 
> 赞同：-1
> 
> 时间：2012-06-14T06:38:09.727
> 
> 标签：c#, .net, formatting, crystal-reports-2008

我有一个水晶报表，其中我按销售员对项目进行分组，如下所示：

`Sam`

```
item11  $22 OK
itemt2  $3  return
item3   $11 OK 
```

`Saneesh`

```
item15  $212    OK
itemt12 $13 OK
item3   $11 OK 
```

但我需要显示报告，如下所示：

```
Sam        item11 $22    OK

           itemt2 $3   return

           item3  $11  OK

Saneesh    item15   $212 OK

           itemt12  $13 OK

           item3    $11 OK 
```

...IE。组标题显示在项目的第一个子行上，并且不重复。这在水晶报告中可能吗？Sam 显示在项目 (item11) 的第一行，Saneesh 显示在 item15 旁边。PLZ帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:49:17.377

您可以将组标题名称放在详细信息部分中，然后从该标题名称的格式对话框中选择“禁止重复”选项，这将防止重复销售员名称。而且您可能需要抑制组标题部分，以避免空白部分

假设您的报告中只有一组，因此结构如下

```
Group Header 1     
  Details         SAM     item11  $22   OK                   
                          itemt2  $3    return                   
                          item3   $11   OK  
                  Saneesh item15  $212  OK                   
                          itemt12 $13   OK                   
                          item3   $11   OK  
Group Footer 1 
```

# c++ - 持有指向函数返回对象值的引用/指针是否合法？

> ID：11027901
> 
> 赞同：0
> 
> 时间：2012-06-14T06:38:21.360
> 
> 标签：c++

通过值传递函数的返回对象是否合法？我有一个函数，`A::getA()`它按值返回一个对象。在同一行中引用此值是否合法，请参见该行 `b.processA(a.getA());`

请在下面查看我的代码：

```
class A
{
public:
    int a;
    std::list<int*> m_list;

    A(int a)
    {
        this->a =a;
    }

    A(A& _a)
    {
        this->a =_a.a;
        m_list.push_back(&a);
    }

    A getA()
    {
        A localA(20);
        localA.m_list.push_back(&localA.a);
        return localA;
    }
};

class B
{
public:
    char b;

    B(char b)
    {
    }

    void processA(A& a)
    {
            a.a = 1;
            processA2(a);
    }

    void processA2(A& a)
    {
        a.a = 2;
    }
};

void main()
{
    B b('a');
    A a(11111);
    //************
    // IS THE FOLLOWING LINE LEGAL??
    // I mean, is it legal to pass the return object of the function by value
    //************
    b.processA(a.getA());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T06:40:40.737

```
b.processA(a.getA()); 
```

不，它甚至不会编译。原因是`a.getA()`返回一个临时对象，不能绑定到非常量引用类型。

但是，如果您将参数 const 引用设置为：

```
void processA(A const & a) 
```

然后就好了。

**注意**：MSVC++ 提供对非常量引用的临时对象绑定作为扩展。它不是标准的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T06:42:12.513

所以基本上你问的是：

```
X f();
void g(X& x);

g(f()); 
```

是否合法？

作为安全预防措施，非成本参考不能绑定到临时参考。所以以上是不合法的。

但是以下是合法的：

```
X f();
void g(const X& x);

g(f()); 
```

临时对象将一直存在，直到 g 返回。

第一个版本合法的原因是因为 g 所做的任何更改都将被丢弃，那么您为什么要这样做呢？它很可能表示逻辑错误，因此作为语言设计决策，它是编译时错误。

# c# - 如何查询内存数据库？

> ID：11027904
> 
> 赞同：1
> 
> 时间：2012-06-14T06:38:27.887
> 
> 标签：c#, database, datatable

我有一个使用断开连接的类创建的内存数据库。我已经填充了数据表，现在我想查询以从数据表中选择特定的行。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:56:55.153

如果您使用 C#，`DataTable`您可以查询它，例如：

```
private void GetRowsByFilter()
{
    DataTable table = DataSet1.Tables["Orders"];
    // Presuming the DataTable has a column named Date.
    string expression;
    expression = "Date > #1/1/00#";
    DataRow[] foundRows;

    // Use the Select method to find all rows matching the filter.
    foundRows = table.Select(expression);

    // Print column 0 of each returned row.
    for(int i = 0; i < foundRows.Length; i ++)
    {
        Console.WriteLine(foundRows[i][0]);
    }
} 
```

示例来自：http: [//msdn.microsoft.com/en-GB/library/det4aw50.aspx](http://msdn.microsoft.com/en-GB/library/det4aw50.aspx)

您还可以使用 LINQ 通过以下方式查询集合`DataTable.AsEnumarable`

# android - Android：当按下后退隐藏键盘时如何使布局可见？

> ID：11027907
> 
> 赞同：0
> 
> 时间：2012-06-14T06:38:34.840
> 
> 标签：android, android-layout, keyboard

我正在使用`alignParentBottom="true"`具有相同属性但在线性布局上方对齐的线性布局和相对布局。我已经放置了一个编辑文本。聚焦edittext时会显示键盘。在显示键盘的时候，底部的线性布局隐藏了edittext。用户将无法看到编辑文本中输入的内容。

现在，我通过在显示键盘时设置活动的可见性来隐藏底部线性布局。`OnFocusChanged`在edittext中，我正在使底部线性布局可见。但是，当按下后退隐藏键盘时，如何使布局可见？

在 Manifest.xml 中，我为我的活动使用以下代码：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<RelativeLayout
    android:id="@+id/relativetop"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingTop="5dp" >

    <Button
        android:id="@+id/mymenu"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="10dp"
        android:background="@drawable/top_arrow_r_click" />

    <RelativeLayout
        android:id="@+id/rel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginBottom="5dp"
        android:layout_centerHorizontal="true"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:layout_marginTop="5dp"
        android:layout_toRightOf="@+id/mymenu"
        android:background="@drawable/sera" >

        <EditText
            android:id="@+id/editText1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toLeftOf="@+id/search"
            android:layout_toRightOf="@+id/textView1"
            android:ems="10"
            android:paddingLeft="15dp"
            android:paddingRight="10dp"
            android:singleLine="true" >
        </EditText>

        <!-- android:background="@drawable/search_edittext_round_corner" -->

        <Button
            android:id="@+id/search"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:background="@drawable/search_icon_click" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:layout_marginBottom="10dp"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="5dp"
            android:layout_marginTop="10dp"
            android:background="@drawable/of" />
    </RelativeLayout>
</RelativeLayout>

<RelativeLayout
     android:id="@+id/relativecent1"
     android:layout_above="@+id/linearbottom"
     android:layout_below="@+id/relativetop"
     android:layout_marginLeft="10dp"
     android:layout_width="wrap_content"
     android:layout_height="fill_parent"
     android:layout_marginRight="10dp"
 > 
```

```
<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="2dp"
    android:maxLines="2"
    android:textSize="12dp"
    android:text="Pay Just Rs 4999 and get a Professional Fashion Portfolio with Make up worth "
    android:textColor="#2d3438" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="80dp"
    android:layout_height="60dp"
    android:layout_alignLeft="@+id/textView2"
    android:layout_below="@+id/textView2"
    android:scaleType="fitXY"
    android:background="@drawable/nor_bg"
    android:src="@drawable/loading" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/imageView1"
    android:layout_marginLeft="5dp"
    android:layout_toRightOf="@+id/imageView1"
    android:text="$ 299"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="#be2e33"
    android:textStyle="bold" />

<LinearLayout
    android:id="@+id/updown"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView3"
    android:layout_below="@+id/textView3"
    android:layout_marginRight="15dp"
    android:weightSum="1"
    android:layout_toLeftOf="@+id/button1"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/up"
        android:layout_width="0dip"
        android:layout_height="25dp"
        android:layout_weight="0.5"
        android:background="@drawable/like_click" />

    <Button
        android:id="@+id/down"
        android:layout_width="0dip"
        android:layout_height="25dp"
        android:layout_toRightOf="@+id/up"
        android:layout_weight="0.5"
        android:background="@drawable/unlike_click" />
</LinearLayout>

<LinearLayout
    android:id="@+id/updowncount"
     android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView3"
    android:layout_below="@+id/updown"
    android:layout_marginRight="15dp"
    android:weightSum="1"
    android:layout_toLeftOf="@+id/button1"
    android:orientation="horizontal" 
    >

    <TextView
        android:id="@+id/upcount"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:gravity="center"
        android:text="6" />

    <TextView
        android:id="@+id/downcount"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:gravity="center"
        android:text="0" />
</LinearLayout>

<TextView
    android:id="@+id/textView5"
    android:layout_width="90dp"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/textView2"
    android:layout_alignTop="@+id/textView3"
    android:layout_marginLeft="5dp"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    android:singleLine="true"
    android:text="Times Deals"
    android:textSize="12dp"
    android:textColor="#3b84c4" />

<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/textView5"
    android:layout_toLeftOf="@+id/textView5"
    android:text="At"
    android:textSize="12dp"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView4"
    android:layout_toLeftOf="@+id/textView4"
    android:background="@drawable/wallet_click" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button1"
    android:layout_below="@+id/button1"
    android:layout_marginTop="2dp"
    android:background="@drawable/map_click"
    android:visibility="invisible" />

<TextView
    android:id="@+id/textView7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView6"
    android:layout_alignLeft="@+id/textView6"
    android:layout_toRightOf="@+id/button2"
    android:layout_alignBottom="@+id/imageView1"
    android:text="Show on Map"
    android:textSize="12dp"
    android:gravity="center"
    android:paddingTop="5dp"
     android:textColor="#3b84c4" 
    android:visibility="invisible" />

<TextView
    android:id="@+id/textView6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/button1"
    android:layout_alignLeft="@+id/textView4"
    android:text="Add to Wallet"
    android:textSize="12dp"
    android:layout_marginBottom="3dp"
    android:layout_marginLeft="5dp"
    android:textColor="#3b84c4" /> 
```

```
<RelativeLayout

    android:id="@+id/relativedetail"
     android:layout_alignParentBottom="true"
android:layout_alignParentLeft="true"
android:layout_alignParentRight="true"
android:layout_marginTop="5dp"
android:layout_marginBottom="5dp"
android:layout_below="@+id/relativecenter"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <!-- android:background="@drawable/round_corner_deals_detail" --> 

    <!-- DETAILS -->
    <ScrollView
     android:id="@+id/scrolview"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentLeft="true"
     android:layout_below="@+id/line"
     android:visibility="visible"
     android:layout_margin="5dp" >

         <TextView
             android:id="@+id/detailsText"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:text="lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit amet lorem ipsum dolor sit ametttt"
             android:textColor="#2d3438"
             android:visibility="visible" /> 
```

```
 <!-- REVIEW -->
    <ScrollView android:id="@+id/relativereview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/linearbottom"
     android:layout_alignParentLeft="true"
     android:layout_below="@+id/line"

        >
<RelativeLayout

     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_margin="5dp"  
    >
    <EditText
        android:id="@+id/postreview" 
        android:ems="10"
        android:paddingLeft="10dp"
        android:paddingRight="10dp"
        android:gravity="top|left"
        android:background="@drawable/round_corner_edittext"
        android:inputType="textMultiLine"
        android:layout_width="fill_parent" 
        android:layout_height="60dp" 
        android:textSize="12dp"
        android:layout_margin="2dp" >
        </EditText>
      <Button
             android:id="@+id/post"
             android:layout_below="@+id/postreview"
             android:background="@drawable/apply_click"
             android:layout_alignRight="@+id/postreview"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:textColor="#ffffff"
             android:paddingRight="35dp"
             android:paddingLeft="5dp"
             android:text="Post Review" />

</RelativeLayout>
</ScrollView>
<RelativeLayout
    android:id="@+id/rlist"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentLeft="true"
     android:layout_below="@+id/relativereview"
     >
     <ListView
                 android:layout_below="@+id/post"
                 android:id="@+id/listreview"
             android:cacheColorHint="#00000000"
             android:listSelector="#00000000"
             android:divider="#00000000"
             android:background="#00000000"
             android:dividerHeight="1dp"
             android:layout_width="wrap_content"
             android:layout_height="fill_parent"
             android:layout_marginRight="5dp"
             android:layout_marginTop="5dp" 
                      />
</RelativeLayout> 
```

```
 <RelativeLayout
        android:visibility="invisible"
          android:layout_below="@+id/line" 
         android:id="@+id/relativedetails_layout"
           android:layout_alignParentBottom="true"
             android:layout_alignParentLeft="true"
             android:layout_margin="5dp"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent" >

        <ImageView
             android:id="@+id/imageView2"
             android:layout_width="120dp"
             android:layout_height="90dp"
             android:scaleType="fitXY"
             android:layout_alignLeft="@+id/detailsText"
             android:layout_alignTop="@+id/detailsText"
             android:src="@drawable/reliance_logo" />
         <!-- android:background="@drawable/round_corner_category_listing_page" -->

         <TextView
             android:id="@+id/textView8"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_alignTop="@+id/detailsText"
             android:layout_margin="5dp"
             android:layout_toRightOf="@+id/imageView2"
             android:text="Reliance Fresh"
             android:textColor="#000000"
             android:textStyle="bold" />

         <ListView
             android:id="@+id/ListViewMalls"
             android:cacheColorHint="#00000000"
             android:listSelector="@drawable/deals_details_bg"
             android:divider="#00000000"
             android:dividerHeight="1dp"
             android:layout_width="wrap_content"
             android:layout_height="fill_parent"
             android:layout_alignLeft="@+id/textView8"
             android:layout_below="@+id/textView8"
             android:layout_marginRight="5dp"
             android:layout_marginTop="5dp" />

         <TextView
             android:id="@+id/textView14"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_below="@+id/imageView2"
             android:layout_alignLeft="@+id/imageView2"
             android:layout_marginTop="10dp"
             android:background="@drawable/bagg" />

         <TextView
             android:id="@+id/textView15"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_alignRight="@+id/imageView2"
             android:layout_alignTop="@+id/textView14"
             android:layout_toRightOf="@+id/textView14"
             android:text="More deals from"
             android:focusable="true"
             android:focusableInTouchMode="true"
             android:marqueeRepeatLimit="marquee_forever"
             android:ellipsize="marquee"
             android:scrollHorizontally="true"
             android:layout_toLeftOf="@+id/ListViewMalls"
             android:textSize="10dp"
             android:layout_marginLeft="5dp"
             android:textColor="#3b84c4" />

         <TextView
             android:id="@+id/textView16"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_alignLeft="@+id/textView15"
             android:layout_below="@+id/textView15"
              android:textColor="#000000"
             android:text="Reliance Fresh"
              android:textSize="12dp"
               android:marqueeRepeatLimit="marquee_forever"
             android:ellipsize="marquee"
             android:scrollHorizontally="true"
             />

     </RelativeLayout>
     <LinearLayout
        android:id="@+id/line"
        android:layout_alignParentTop="true"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_margin="1dp"
        android:weightSum="3" >

        <!-- android:background="@drawable/round_corner_sort" -->

        <Button
            android:id="@+id/details"
            android:layout_width="wrap_content"
            android:layout_height="35dp"
            android:layout_gravity="center_vertical"
            android:layout_marginRight="2dp"
            android:layout_weight="1"
             android:textColor="#ffffff"
            android:text="Details"
            android:textAppearance="?android:attr/textAppearanceSmall"
            />
          <!-- android:background="@drawable/round_corner_button_sort" -->

        <Button
            android:id="@+id/store"
            android:layout_width="wrap_content"
            android:layout_height="35dp"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:layout_weight="1"
            android:background="#00000000"
            android:text="Store"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="#000000" />

        <Button
            android:id="@+id/review"
            android:layout_width="wrap_content"
            android:layout_height="35dp"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="2dp"
             android:textColor="#000000"
             android:background="#00000000"
            android:layout_weight="1"
            android:text="Review"
            android:textAppearance="?android:attr/textAppearanceSmall"
            />

    </LinearLayout>

</RelativeLayout>

</RelativeLayout>

<LinearLayout
    android:id="@+id/linearbottom"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/linebg"
    android:layout_alignParentBottom="true"
    android:orientation="horizontal"
    android:gravity="center_vertical"
    android:weightSum="5" >

    <LinearLayout
        android:id="@+id/linearmap"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical"
        android:weightSum="2" >

        <Button
            android:id="@+id/map"
            android:layout_width="wrap_content"
            android:layout_height="0dip"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:background="@drawable/map_norm"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/textMap"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="Map"
            android:textColor="#000000" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/lineartrends"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical"
        android:weightSum="2" >

        <Button
            android:id="@+id/trends"
            android:layout_width="wrap_content"
            android:layout_height="0dip"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:background="@drawable/trends_nor"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/textTrends"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="Trends"
            android:textColor="#000000" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearwatch"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical"
        android:weightSum="2" >

        <Button
            android:id="@+id/watch"
            android:layout_width="wrap_content"
            android:layout_height="0dip"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:background="@drawable/watch_nor"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/textWatch"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="Watch"
            android:textColor="#000000" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearcontrol"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical"
        android:weightSum="2" >

        <Button
            android:id="@+id/control"
            android:layout_width="wrap_content"
            android:layout_height="0dip"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:background="@drawable/control_nor"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/textControl"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="Control"
            android:textColor="#000000" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearme"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical"
        android:weightSum="2" >

        <Button
            android:id="@+id/me"
            android:layout_width="wrap_content"
            android:layout_height="0dip"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:background="@drawable/me_nor"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/textMe"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="Me"
            android:textColor="#000000" />
    </LinearLayout>
</LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T12:50:17.093

您在此处放置的代码非常混乱，因此我将只专注于您提出的问题。覆盖 onBackPressed 方法。在那，无论你想让哪种布局可见，使用 setVisible 方法并将其设置为 true 并隐藏键盘：-

```
InputMethodManager imm = (InputMethodManager) Login.this.getSystemService(android.content.Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(Login.this.getCurrentFocus().getWindowToken(), 0); 
```

或者如果您想查看当前由于键盘而被隐藏的编辑文本，您可以向上移动您的视图。Android 默认提供此功能例如：- 在我的登录活动中，我的密码编辑文本在键盘出现时向上移动，我能够看到我正在输入的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T07:00:42.000

您可以为此使用 onBackPressed，但问题是您将无法检测到键盘是否显示。实际上，如果您检查您的布局是否不可见，这可能意味着键盘已显示，并且在 onBackPressed 中您可以再次使其可见，仅此而已。

# sql-server - Sql server 默认语言列表

> ID：11027911
> 
> 赞同：1
> 
> 时间：2012-06-14T06:38:49.160
> 
> 标签：sql-server

任何人都可以给出默认语言列表及其在sql server中的代码吗

例如：

> sp_configure '默认语言', 23

在此示例中，我将默认语言更改为 23（英国）。所以我想要语言列表（例如英国）和它的代码（例如23）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:53:19.207

看看[sys.syslanguages](http://msdn.microsoft.com/en-us/library/ms190303.aspx)。

> 包含 SQL Server 实例中存在的每种语言的一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-22T10:58:35.140

```
USE master;

GO

SELECT * FROM sys.syslanguages; 
```

或者

```
USE master;

GO

EXEC SP_HELPLANGUAGE; 
```

# python - 如何将 python 文件作为 python 脚本单独执行？

> ID：11027917
> 
> 赞同：1
> 
> 时间：2012-06-14T06:39:24.530
> 
> 标签：python

我想做的是有一个python脚本（这是一个python IRC bot），它可以在后台/单独运行另一个python脚本。

我可以做这样的事情：

```
#irc codey stuff here...
if x == y:
    os.system('s%\stuff.py') % path 
```

但这会停止**main.py**，然后运行我不想做的**stuff.py （在 1 个命令提示符中）。**
所以我想让这个脚本做的是当 IRC 机器人通过 IRC 接收命令时，我希望它单独运行 stuff.py，比如双击**stuff.py**并让**main.py**和**stuff.py**在同时。

如果在 windows/linux 中有单独的方法可以做到这一点，请问，你能同时显示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T06:48:08.210

要生成后台进程，请使用子进程模块中的 Popen 类。

例子：

```
from subprocess import Popen
process = Popen(['firefox', '-P', '-no-remote']) 
```

这`process`是一个进程对象，可以用来杀死进程，等待它完成，与它通信等。如果你只是想生成进程并忘记它，你不需要保留返回值弹出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:50:02.057

[子流程](http://www.doughellmann.com/PyMOTW/subprocess/)库可能很有用。它允许后台进程并为您处理一些分叉和子管理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T06:55:21.720

要在 Windows 中打开单独的 shell，您可以执行以下操作：

```
os.system('cmd.exe /c stuff.py') 
```

或者，正如其他人指出的那样，使用该`subprocess`模块。实际上，`subprocess`应该是一种反射-您在启动其他进程时要使用的工具...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T08:01:04.910

要在后台执行 CPU 密集型 Python 代码，您可以使用[`multiprocessing`](http://docs.python.org/library/multiprocessing.html)：

```
import multiprocessing as mp
from stuff import some_function

if __name__=='__main__':
   pool = mp.Pool()
   # ...
   if x == y:
      pool.apply_async(some_function, args) # use mp.Queue or 
                                            # save returned value or 
                                            # specify a callback
                                            # to get deferred result from the function 
```

如果你走这`subprocess`条路，那么使用与当前脚本相同的 Python 启动器，你可以尝试[`sys.executable`](http://docs.python.org/library/sys.html#sys.executable)：

```
import os
import sys
from subprocess import Popen

p = Popen([sys.executable, os.path.join(path, 'stuff.py')]) 
```

# security - 将 JBoss 7 DatabaseServerLoginModule 与远程客户端一起使用

> ID：11027918
> 
> 赞同：1
> 
> 时间：2012-06-14T06:39:24.860
> 
> 标签：security, jboss7.x

我们目前正在将 Java EE 应用程序从 JBoss 6 移植到 JBoss 7.1.1。该应用程序没有 Web 界面，只有一个基于 Eclipse RCP 的远程客户端。为了对客户端进行身份验证，远程客户端使用“javax.security.auth.login.LoginContext”来提供所需的凭据。服务器正在使用“DatabaseServerLoginModule”来验证对应用程序安全域的所有访问。

为了将该应用程序移植到 JBoss 7.1.1，我执行了以下操作：

我在“standalone-full.xml”中配置了一个安全域：

```
<security-domain name="myDomain" cache-type="default">
  <authentication>
    <login-module code="org.jboss.security.auth.spi.DatabaseServerLoginModule" flag="required">
      <module-option name="dsJndiName" value="jdbc/myDS"/>
      <module-option name="principalsQuery" value="select u.password from users u left join authorizables a on u.id=a.id where a.name=?"/>
      <module-option name="rolesQuery" value="SELECT 'user', 'Roles' FROM authorizables WHERE name=?"/>
    </login-module>
  </authentication>
</security-domain> 
```

接下来我配置了一个安全领域：

```
<security-realm name="MyAppRealm">
  <authentication>
    <jaas name="myDomain"/>
  </authentication>
</security-realm> 
```

最后我将远程连接器绑定到我的自定义领域

```
<connector name="remoting-connector" socket-binding="remoting" security realm="MyAppRealm"/> 
```

现在，当尝试访问服务器时，会引发以下异常：

```
ERROR connection:99 - JBREM000200: Remote connection failed: javax.security.sasl.SaslException: Authentication failed: all available authentication mechanisms failed

javax.naming.NamingException: Failed to create remoting connection [Root exception is java.lang.RuntimeException: javax.security.sasl.SaslException: Authentication failed: all available authentication mechanisms failed]
at org.jboss.naming.remote.client.ClientUtil.namingException(ClientUtil.java:36)
at org.jboss.naming.remote.client.InitialContextFactory.getInitialContext(InitialContextFactory.java:121)
at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:667)
at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288)
at javax.naming.InitialContext.init(InitialContext.java:223)
at javax.naming.InitialContext.<init>(InitialContext.java:197)
at my.SampleClient.login(SampleClient.java:110)
... 26 more
Caused by: java.lang.RuntimeException: javax.security.sasl.SaslException: Authentication failed: all available authentication mechanisms failed
at org.jboss.naming.remote.protocol.IoFutureHelper.get(IoFutureHelper.java:87)
at org.jboss.naming.remote.client.NamingStoreCache.getRemoteNamingStore(NamingStoreCache.java:56)
at org.jboss.naming.remote.client.InitialContextFactory.getOrCreateCachedNamingStore(InitialContextFactory.java:166)
at org.jboss.naming.remote.client.InitialContextFactory.getOrCreateNamingStore(InitialContextFactory.java:139)
at org.jboss.naming.remote.client.InitialContextFactory.getInitialContext(InitialContextFactory.java:104)
... 31 more
Caused by: javax.security.sasl.SaslException: Authentication failed: all available authentication mechanisms failed
at org.jboss.remoting3.remote.ClientConnectionOpenListener$Capabilities.handleEvent(ClientConnectionOpenListener.java:365)
at org.jboss.remoting3.remote.ClientConnectionOpenListener$Capabilities.handleEvent(ClientConnectionOpenListener.java:214)
at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:72)
at org.xnio.channels.TranslatingSuspendableChannel.handleReadable(TranslatingSuspendableChannel.java:189)
at org.xnio.channels.TranslatingSuspendableChannel$1.handleEvent(TranslatingSuspendableChannel.java:103)
at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:72)
at org.xnio.nio.NioHandle.run(NioHandle.java:90)
at org.xnio.nio.WorkerThread.run(WorkerThread.java:184)
at ...asynchronous invocation...(Unknown Source)
at org.jboss.remoting3.EndpointImpl.doConnect(EndpointImpl.java:270)
at org.jboss.remoting3.EndpointImpl.doConnect(EndpointImpl.java:251)
at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:349)
at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:333)
at org.jboss.naming.remote.client.EndpointCache$EndpointWrapper.connect(EndpointCache.java:105)
at org.jboss.naming.remote.client.NamingStoreCache.getRemoteNamingStore(NamingStoreCache.java:55)
... 34 more 
```

有谁知道我做错了什么。谁能给我一个关于如何设置这个场景的提示。我一直在 JBoss 文档中搜索，但没有找到解决此问题的方法。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-17T19:12:49.253

那个部分：

`<login-module code="org.jboss.security.auth.spi.DatabaseServerLoginModule" flag="required">`

它错了。**不使用“ org.jboss.security.auth.spi.DatabaseServerLoginModule** ”的全名类，是“**数据库**”，根据链接[https://docs.jboss.org/author/display/AS71/Security+subsystem+configuration](https://docs.jboss.org/author/display/AS71/Security+subsystem+configuration) where存在与此“代码”相关联的“全名限定类”的表。

# .net - 视图和视图模型关系

> ID：11027921
> 
> 赞同：1
> 
> 时间：2012-06-14T06:39:46.883
> 
> 标签：.net, wpf, silverlight, mvvm

我的问题是：

1.  可以/应该`ViewModel`支持多个`Views`吗？
2.  可以/应该`View`由多个支持`ViewModels`吗？（我相信这个问题的答案是肯定的）。

对于相对较小的模块，您的视图相对较小的这种情况的最佳做法是什么。因此，在这种情况下，我们应该`ViewModels`为每个视图创建多个视图，还是应该使用单个`ViewModel`视图来为同一模块中的所有视图提供服务。注意：较小模块中的视图数量限制为 5-6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:58:55.727

这是我对此的看法——

1.  **是的，同一个 ViewModel 可以用于多个视图**；例如，假设您有`CustomerViewModel`一个客户的详细信息和一些命令，您可以将此 ViewModel 与一个具有`DataGrid`显示所有客户的视图一起使用（因此`ObservableCollection<CustomerViewModel>`将使用一个），并且还可以将相同的 ViewModel 与一个具有要编辑的表单的视图一起使用单个客户的详细信息。

2.  **这取决于，但通常 No**。如果一个视图包含多个视图，则它可以依赖于多个 ViewModel；比如说，一个具有多个视图的窗口。例如具有客户列表的仪表板、添加新客户的表单、显示产品的部分等； **但**即使在这种情况下，最好创建一个包含其他子视图模型实例的单个父 ViewModel。

    我总是喜欢为单个视图使用一个 ViewModel，并尝试以这种方式设计我的应用程序。

但是是的，这一切都取决于应用程序以及您如何设计视图和视图模型。在 MVVM 中，您首先根据业务逻辑设计模型和视图模型，然后将它们与您的视图一起使用。

也看看这个类似的问题 - [ViewModel per View or per Model？](https://stackoverflow.com/questions/9413034/viewmodel-per-view-or-per-model)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:57:51.513

这取决于。例如，如果您有一个包含一系列观察的模型，您可以拥有相同的两个视图，一个带有图表，一个带有网格。我的意思是你对同一个概念模型有不同的看法。如果视图是一个页面，其中包含具有不同内容的子视图，最好为所有这些部分提供一个特定的视图模型为它们服务。作为个人经验，我过去曾有过由单个模型提供的铰接视图，但我对此并不满意，您最终会遇到视图模型代码变得过于复杂并最终需要重构的情况。

# batch-file - 使用批处理文件跨驱动器移动目录

> ID：11027928
> 
> 赞同：2
> 
> 时间：2012-06-14T06:40:13.830
> 
> 标签：batch-file

`C:\`我想`D:\`使用批处理文件将文件夹及其子文件从移动到移动。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T06:45:50.617

我认为没有办法跨驱动器移动文件夹。这种“移动”只是复制后删除。所以你可以这样做：

```
xcopy c:\example d:\example /S /E
rmdir /S c:\example 
```

# objective-c - 拖放 NSTabViewItem

> ID：11027935
> 
> 赞同：0
> 
> 时间：2012-06-14T06:40:44.733
> 
> 标签：objective-c, cocoa, drag-and-drop, nstabview

在我的应用程序中，我们在 NSTab 中有 NSTabViewItem，并且可能有多个 NSTabViewItem，
为了支持其中一项功能，我们需要在 NSTabViewItem 中支持 Drag-n-Drop，即我应该能够重新排列 NSTabViewItem，如果它在其他地方被我们的应用程序控制，然后应该发生一些特定的动作，

我浏览了文档，但没有找到任何支持，但这似乎是很明显的用例，

我错过了什么吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:58:16.460

老实说，我*从未*见过这样的行为。我会建议您使用不带标签的 NSTabView 并使用[AMButtonBar](http://www.harmless.de/cocoa-code.php)例如以`selectTabViewItemAtIndex:`编程方式选择 tabviewitem。您可以在此代码中采用`NSDraggingSource`和`NSDraggingDestination`协议，以使元素（按钮栏而不是表格视图本身）可重新排列。

# javascript - JavaScript - 使用回车符和换行符解析 JSON

> ID：11027938
> 
> 赞同：4
> 
> 时间：2012-06-14T06:40:55.967
> 
> 标签：javascript, jquery, json, parsing

我正在使用以下 JS 代码从单独的 JS 文件中解析 JSON 字符串：

```
// extract JSON from a module's JS
var jsonMatch = data.match( /\/\*JSON\[\*\/([\s\S]*?)\/\*\]JSON\*\// );
data = JSON.parse( jsonMatch ? jsonMatch[1] : data ); 
```

这是我从中提取 JSON 字符串的 JS 文件示例：

```
JsonString = /*JSON[*/{"entities":[{"type":"EntityPlayer","x":88,"y":138}]}/*]JSON*/; 
```

这段代码工作得很好，但是如果带有 JSON 字符串的 JS 文件包含回车并且不在一个完整的行上，那么我会收到语法错误。

例子：

```
JsonString = /*JSON[*/{
     "entities":[{
         "type":"EntityPlayer",
         "x":88,
         "y":138}]
     }/*]JSON*/; 
```

返回以下错误：

```
JSON.parse: unexpected non-whitespace character after JSON data 
```

知道如何通过删除空格或删除回车符和换行符来修改我的解析工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T06:54:54.557

```
data = JSON.parse( (jsonMatch ? jsonMatch[1] : data).replace(/\n/g,"") ); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T06:45:18.430

没有测试它，但也许这就是你要找的？

```
var JsonString = JsonString.replace(new RegExp( "\\n", "g" ),""); 
```

（来自[http://www.bennadel.com/blog/161-Ask-Ben-Javascript-Replace-And-Multiple-Lines-Line-Breaks.htm](http://www.bennadel.com/blog/161-Ask-Ben-Javascript-Replace-And-Multiple-Lines-Line-Breaks.htm)）

# maven - 使用版本插件在新版本后更新 Maven 属性

> ID：11027944
> 
> 赞同：4
> 
> 时间：2012-06-14T06:41:18.383
> 
> 标签：maven, maven-plugin, versions-maven-plugin

我在 maven/jenkins 中遇到了一个多模块项目的问题。例如我的结构是这样的：

```
---ProjectA
----pom.xml
--------ModuleA
---------pom.xml
--------ModuleB
---------pom.xml

---ProjectB
-----pom.xml 
```

例如，ModuleA 对 ProjectB 中的某些内容具有依赖关系，该依赖关系在 ModuleA 的 pom 中定义，除了仅定义为属性并从 ProjectA 的属性部分继承的版本。

我想自动化发布过程，以摆脱所有 pom 中所有版本的手动更新。因此，在发布 ProjectB 之后，我将在 ProjectA 中添加所有引用。

**编辑** 更准确地说，我想发布 ProjectB，它必须包含 ProjectA 的发布（因为依赖关系），并且在 ProjectA 的新快照中，我想要引用最新的 ProjectB。

如果在同一个 pom.xml 中指定依赖项和版本号，maven 插件版本可以很好地做到这一点。如您所见，我的问题是（我在推测）当版本插件尝试检查 ProjectA 的 pom 中的属性字段时，该属性不能与依赖项关联。而且我猜版本插件看起来在有效的 pom 上，因为它可以发现 ModuleA 的 pom 中的依赖项应该被更新。它只是无法更新它，因为它没有在那里定义。

对于可以将我的属性保留在父 pom.xml 中的解决方案将非常有必要。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T08:00:04.587

行。所以我想我已经解决了一些问题，但我会在这里发布给其他人看。

因此，我认为问题在于 autoLinkItem 仅搜索当前文件以进行链接，如果您希望属性与未在同一文件中指定的依赖项相关联，则可以在其中明确告诉插件。

像这样：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>versions-maven-plugin</artifactId>
    <version>1.2</version>
    <configuration>
        <properties>
            <property>
                <name>basis.version</name>
                <dependencies>
                    <dependency>
                        <groupId>com.mycompany.app.basis</groupId>
                        <artifactId>ModuleBasis</artifactId>
                    </dependency>
                </dependencies>
            </property>
        </properties>
        <includeProperties>basis.version</includeProperties>
        <generateBackupPoms>false</generateBackupPoms>
        <allowSnapshots>true</allowSnapshots>
    </configuration>
</plugin> 
```

# ruby - 为什么我不能从类中访问私有函数？

> ID：11027945
> 
> 赞同：2
> 
> 时间：2012-06-14T06:41:22.520
> 
> 标签：ruby, oop, private

以下代码打印`NoMethodError`. 我不明白原因。虽然我调用的方法是私有的，但我是从类中调用它。类 var 不能访问它的私有变量/函数吗？我可以在 Java 中做到这一点。

```
class Tester
 private
   def func_pri
     puts("From a private function")
   end

 protected 
  def func_prot
    puts("From a protected function")
  end

 public
  def func_pub
     puts("From a public function")
  end

 public
  def caller(object)
    object.func_pub
    object.func_pri # This statement causes error
    object.func_prot
  end
 end

 o = Tester.new
 o.caller(o) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T06:50:46.227

您不能在对象上调用私有方法，甚至在`self`. 移除`object.`部件，然后通话将继续`self`。

如果你确实想调用私有方法，你总是可以使用`object.send(:func_pri)`.

在这些方面，Ruby 与 Java 等语言完全不同。有关更多信息，您可能需要查看[http://www.ruby-doc.org/docs/ProgrammingRuby/](http://www.ruby-doc.org/docs/ProgrammingRuby/)，“类、对象和变量”一章，“访问控制”部分

# wcf - 无法访问托管在服务器上的远程 WCF Web 服务

> ID：11027955
> 
> 赞同：0
> 
> 时间：2012-06-14T06:41:48.677
> 
> 标签：wcf, iis-7, vb.net-2010

您好我已经在服务器机器上部署了 WCF Web 服务。我可以在浏览器中浏览它。但是当我要将其服务引用添加到开发机器上的 Web 应用程序时，我收到以下详细错误：

> 元数据包含无法解析的引用：“http://ServerMachineName:500/ITCAMSWebService_deploy/Services/Authentication.svc?wsdl”。WSDL 文档包含无法解析的链接。下载“http://ServerMachineName:500/ITCAMSWebService_deploy/Services/Authentication.svc?xsd=xsd0”时出错。底层连接已关闭：接收时发生意外错误。无法从传输连接读取数据：现有连接被远程主机强行关闭。远程主机强制关闭现有连接 元数据包含无法解析的引用：“http://ServerMachineName:500/ITCAMSWebService_deploy/Services/Authentication.svc”。内容类型应用程序/soap+xml； `http://ServerMachineName:500/ITCAMSWebService_deploy/Services/Authentication.svc`. 客户端和服务绑定可能不匹配。远程服务器返回错误：（415）无法处理消息，因为内容类型'application/soap+xml; charset=utf-8' 不是预期的类型 'text/xml; charset=utf-8'.. 如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。

服务器的 Web.config 中生成的服务模型部分如下：

```
<system.serviceModel>
      <services>
          <service name="Authentication" behaviorConfiguration="Behavior_Authentication">
              <host>
                  <baseAddresses>
                      <add baseAddress="http://ServerMachineName:500/ITCAMSWebService_deploy/Services/Authentication.svc"></add>
                  </baseAddresses>
              </host>
              <endpoint address="" contract="IAuthentication" binding="basicHttpBinding" bindingConfiguration="ITCAMSWebService.IAuthentication" />

          </service>
      </services>
    <behaviors>

      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true" />
            <dataContractSerializer maxItemsInObjectGraph="2147483646" />
        </behavior>
      </serviceBehaviors>

    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="true" />
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:32:54.757

解决 ！！！通过添加`Everyone`对服务器上的 C:\Windows\Temp 具有完全权限的用户。IIS 需要在服务器上的 Temp 文件夹中生成 Metadata 文件的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:45:53.230

请在地址中提供服务器的 IP 地址而不是 ServerMachineName，并检查两个客户端 n 服务器的绑定

# iphone - 组织者中缺少存档文件？

> ID：11027957
> 
> 赞同：0
> 
> 时间：2012-06-14T06:41:55.517
> 
> 标签：iphone, ios5, xcode4.3

我是手机开发的初学者。我已经完成了一个应用程序。现在我正在考虑创建一个存档以供提交。我能够为存档成功构建，当我单击产品中的存档时，它会显示成功消息。但是管理器中缺少存档文件。

我包含了一个带有警告的最新凹凸 api

警告：(armv7) /Users/Desktop/Mobile/Myapp/Myapp/libBump.a(boss.pb-co) 目标文件不包含 DWARF 调试信息

我怀疑是否因为这个错误而没有创建归档文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:30:01.000

选择您的项目文件并到达目标并打开“构建设置”选项卡，然后将“跳过安装”更改为“否”

![在此处输入图像描述](../Images/d9df543184dafede617e832fffaa3ec1.png)

# javascript - jQuery函数正在重置下拉选择

> ID：11027958
> 
> 赞同：0
> 
> 时间：2012-06-14T06:42:00.283
> 
> 标签：javascript, jquery

我的页面中有一个下拉菜单，它是这样的：

```
 <select id="my_dropdown" name="my_dropdown">
       <option value="one">ONE</option>
       <option value="two">TWO</option>
       <option value="three">THREE</option>
   </select>
   <input type="text" size="10" id="foobar" value="0" /> 
```

我的 jQuery 代码是：

```
 $('#foobar').keyup(function(){
       notOptionOne();
   }

   function notOptionOne() {
       if ( !$('#my_dropdown').val('one') ) {
           alert('Option ONE was not selected');
       }
   } 
```

无论我的下拉列表中的选择是什么，当我在输入框中输入任何文本时，它都会显示警告框并将我的下拉选择重置回一个。当我关闭警报框或执行任何其他操作时，我想保留我离开的位置。是什么导致了这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T06:43:24.763

```
 function notOptionOne() {
   if ( $('#my_dropdown').val()!='one' ) {
       alert('Option ONE was not selected');
   }
   } 
```

jQuery 中的 val() 函数既可以获取值，也可以设置值。当你向它传递一个参数时，jQuery 所做的就是设置控件的值。如果没有参数，则获取值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:46:06.387

尝试这个：

```
$('#my_dropdown').change(function(){
   if ($(this).val() != 'one') {
      alert('Option ONE was not selected');
   }
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T06:44:11.973

尝试这个：

```
$('#my_dropdown').val() !== 'one' 
```

`$('#my_dropdown').val('one')`是jquery wrapper，类数组对象。这就是为什么`!$('#my_dropdown').val('one')`总是 is`false`而你没有得到`alert`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T06:49:31.403

`$('#my_dropdown').val('one')`将#my_dropdown 的值设置为`one`（即使在构造中）。

您应该获取`#my_dropdown`element 的值并将其与 string 进行比较`one`：

```
function notOptionOne() {
    if ($('#my_dropdown').val() != "one") {
       alert('Option ONE was not selected');
    }
} 
```

# java - 使用java更改Web服务器上php文件中的字符串？

> ID：11027964
> 
> 赞同：0
> 
> 时间：2012-06-14T06:42:15.703
> 
> 标签：java, php

基本上我有这两个页面......每个页面都有一个我通过 minecraft bukkit 插件获得的字符串。我需要知道是否可以使用 java 方法更改位于 Web 服务器上的 index.php 文件中的字符串。基本上，我每次发布插件更新时都懒得编辑文件。要获得有关我在说什么的更多信息.... [http://updates.milkycraft.net/](http://updates.milkycraft.net/) - 版本。我的插件的源代码可以在[http://github.com/milkywayz/entitymanager/](http://github.com/milkywayz/entitymanager/)找到。我可能只想用 swing 创建一个单独的 java 应用程序并让它更新值。两个字符串的 index.php 文件都非常简单，我只是声明了一个字符串变量然后回显它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T07:03:07.660

当然，您可以更改 PHP 文件，但这不是最好的解决方案——它真的很容易出错。还有另一种选择：以众所周知的格式（XML、JSON、YAML、INI 等）将数据写入单独的文件，然后让 PHP 脚本读取它。

```
Map<String, String> data = new HashMap<String, String>();
data.put("a", "value a");
data.put("b", "value b");
data.put("c", "value c");

// Convert a Map to JSON using GSON:
String data = new Gson().toJson(data);

// Write data to the file:
BufferedWriter writer = null;

try {
    writer = new BufferedWriter(new FileWriter("/path/to/file"));
    writer.write(data);
    writer.flush();
} catch ( ... ) {
   ...
} finally {
    if (writer != null) {
        writer.close();
    }
}

// Read the data
$data = json_decode(file_get_contents('/path/to/file'));

print_r($data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:51:01.173

当然可以。

您可以采取不同的方法

*   有一个 index.template ，您可以在其中放置一个占位符，例如在 java 中打开该文件，将 替换为您的值并将其保存为 index.php

*   或者您可以将 index.php 中的字符串用 mystring 之类的内容括起来然后打开 index.php 并替换 START/END replace 之间的内容

安德烈

# c# - 从当前返回具有日期时间的每条记录的大型 linq 查询中获取“最新”日期时间

> ID：11027968
> 
> 赞同：2
> 
> 时间：2012-06-14T06:42:39.523
> 
> 标签：c#, .net, linq, group-by, inner-join

我有一个相当长的 linq 查询，一切正常。但在最终连接中，我正在对有日志的表进行内部连接，日志返回 50 多条记录，我只想要最新的记录。

这是一个例子

```
var tst = from w in context.storage
          join p in context.products on w.id equals p.wid
          join l in context.logger on p.id equals l.pid
          select new
          {
              storageid = w.id,
              productid = p.id
              productname = p.name
              bought = l.when
          }; 
```

所以快速解释发生了什么，每个产品都存储在一个存储中心，并且在购买该产品时有一个日志，如果它被购买了 100 次，那么记录器中有 100 条记录。

所以目前它返回 50 条 productid = 5 的记录...为什么 .. 因为它被购买了 50 次但我只想要 1 条记录，因此我只想要记录器的最新日期时间。

任何人都可以帮忙吗？我有点卡住了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T06:46:19.710

仅用于`result.Distinct(x => x.Prop)`获取唯一条目

用于`result.Max(x => x.Prop)`获取最新日期和`Min()`最早获取日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T07:16:35.573

在这种情况下，您希望限制要连接的记录集合，您可以通过手动编码连接来完成（有点）：

```
from w in context.storage
join p in context.products on w.id equals p.wid
// "manual" join:
from l in context.logger.Where(l => l.pid == p.id).OrderByDescencing(l => l.when).Take(1)
select new
{
    storageid = w.id,
    productid = p.id
    productname = p.name
    bought = l.when
}; 
```

在流畅的 linq 语法中，这是一个[带有结果选择器的 SelectMany](http://msdn.microsoft.com/en-us/library/bb549040)。

# animation - 如何使用 OpenCV 创建动画数字刻度盘/指示器？

> ID：11027969
> 
> 赞同：2
> 
> 时间：2012-06-14T06:42:40.303
> 
> 标签：animation, opencv, gdi+

我必须开发一个强度计，它基本上可以显示均匀曝光图像的平均强度水平。随着相机焦点的改变，指针开始移动到以下显示中的正确值：

![在此处输入图像描述](../Images/b7b5674049354953fb447b565a403a6b.png)

除此之外，文本字段还将以数字显示确切的强度值，如图所示。

到目前为止，我已经能够捕获图像并将其强度值存储在文本文件中。现在我必须开发这个动画图像。我从来没有使用 OpenCV 做过任何动画，所以我正在寻找一些想法如何使用 OpenCV 来制作这种动画。

这里有任何指示吗？

我的完整应用程序基于 Windows 窗体 (C++)，我正在使用 OpenCV 执行其他
图像处理任务（此处未列出）。

注意：仪表将基本上显示均匀曝光区域的平均强度水平。

**更新**

我这里有一些解决方案。

因此，通过一些研究，我现在知道了算法：

θ= A * I

在哪里，

Theta= 指针旋转的角度

A = 比例因子

I= 强度等级

旋转角度将与强度水平成正比。

所以现在这是我计划的方式：

1- 使用 cvNamedWindow 创建一个新窗口

2-显示图像的静态部分，即图中的表盘，永远不变

3-显示一个指向中间的垂直指针

4- 获取强度级别 I 的值，并应用上述公式计算 Theta。

5- 根据上面计算的角度，使用 OpenCv 函数旋转指针。

有人可以验证我的理解吗？特别是请告诉我旋转指针最快的功能是什么？如果您可以进一步改进它，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:51:08.167

我会建议两个选项。

1.  使用库：我在评论中链接的[WxIndustrialControls](http://www.koansoftware.com/kwic/index.htm)之类的东西。
2.  如果您真的想在opencv中绘制东西，请发布您到目前为止的代码，以便答案可以集中在您卡住的部分。

我还没有在opencv中绘图，但我想我找到了你需要的部分：

*   简单的图像加载（例如 imread 或[cvLoadImage](http://opencv.willowgarage.com/documentation/c/reading_and_writing_images_and_video.html#cvLoadImage)）
*   绘图功能（例如[fillPoly](http://opencv.itseez.com/modules/core/doc/drawing_functions.html#fillpoly)绘制你的针
*   似乎您可以使用简单的 cvShowImage 快速更新图像，就像[这个人使用相机提要一样](http://r3dux.org/2010/11/how-to-perform-real-time-opencv-edge-detection-o-a-webcam-stream/)
*   将您的输入强度值转换为 fillPoly 的一组点的方程

请更新问题，详细说明您卡住了哪些部分。对不起，如果我链接到多个版本的 opencv 文档。我猜这些基本功能应该没关系。

***更新方程：***

我根本没有测试过这个，但它看起来很有趣：

# 假设：

*   中心左侧 ==> 180 度
*   中心右侧 ==> 0 度
*   图像原点在左上角
*   像素顺序为[column, row]（即[x, y]）

# 配置变量：

*   min_v ==> 表盘左边缘的值
*   max_v ==> 表盘右边缘的值
*   arc_size ==> 要用于强度范围的圆顶部的度数
*   半径 ==> 从表盘顶部到虚拟圆中心的距离（更大的半径 ==> 更平的表盘）
*   top_padding ==> 笔直向上时静态图像顶部到针的距离
*   needle_l ==> 要绘制的针/多边形的长度

# 输入变量：

*   needle_v ==> 要表示的针的值

# 输出变量：

*   needle_end ==> 针的外点在您的图像坐标方面
*   needle_start ==> 针的内部点在您的图像坐标方面

# 计算：

为了可读性：

```
left_a =  90 + (arc_size / 2)             (angle for min_v)
right_a = 90 - (arc_size / 2)             (angle for max_v)
value_range = (max_v - min_v) 
```

获取针的角度

```
value_proportion = (needle_v - min_v) / value_range
needle_a = left_a - (value_proportion * arc_size) 
```

获取圆的虚拟中心（例如，您的示例图像中的中心将在图像之外）

```
dial_origin = [int(image_width / 2) , top_padding + radius] 
```

获取针的起点和终点

```
needle_end[x] = dial_origin[x] - radius * cos(needle_a)
needle_end[y] = dial_origin[y] - radius * sin(needle_a)
needle_start[x] = dial_origin[x] - (radius - needle_l) * cos(needle_a)
needle_start[y] = dial_origin[x] - (radius - needle_l) * sin(needle_a) 
```

# android - 如何在 libgdx 中的 .obj 渲染视图上绘制矩形

> ID：11027970
> 
> 赞同：0
> 
> 时间：2012-06-14T06:42:43.323
> 
> 标签：android, libgdx

我已经使用 libgdx 渲染了 .obj 文件。现在我要在上面画不同颜色的正方形，我怎么能做到呢？

![在此处输入图像描述](../Images/9ce85e33e3a611fb76e35da6311013b7.png)

# cakephp - 将 3 维转换为 2 维

> ID：11027971
> 
> 赞同：0
> 
> 时间：2012-06-14T06:42:48.160
> 
> 标签：cakephp

我得到这样的查询结果：-

```
Array(
[0] => Array
    (
        [0] => Array
            (
                [id] => 1
                [name] => Japan
            )

    )

[1] => Array
    (
        [0] => Array
            (
                [id] => 2
                [name] => Nepal
            )

    ) 
```

}

我怎样才能将其转换为

```
Array
(
  [0] => Japan
  [1] => Nepal

) 
```

用于获取第一个数组的查询是 'select id , name from country;'
请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:49:32.500

```
foreach ($element as $array) {
    $element = $element[0]["name"];
} 
```

或者，

```
function extractName($element) {
    return $element[0]["name"];
}

$newArray = array_map("extractName", $array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:39:29.573

提炼！

```
$newArray = Set::extract($oldArray, '{n}.0.name'); 
```

更多[在这里](http://debuggable.com/posts/cake-12s-set-class-eats-arrays-for-breakfast:480f4dd6-d084-4fb7-bacc-49fdcbdd56cb)。

# php - PHP：生成唯一的字符串

> ID：11027972
> 
> 赞同：4
> 
> 时间：2012-06-14T06:42:51.643
> 
> 标签：php, string

> **可能重复：**
> [PHP：如何生成随机、唯一的字母数字字符串？](https://stackoverflow.com/questions/1846202/php-how-to-generate-a-random-unique-alphanumeric-string)

我正在尝试生成唯一 ID（字母数字字符串）。我为此使用了当前时间戳。我有两个问题：

1.  将`md5(stamp1)`不同于`md5(stamp2)`if `stamp1 != stamp2`。
2.  有没有一种通用的方法来生成唯一的字符串？

**PS：**最简单的原因就是以stamp为id。我仍然不希望很容易找出 id 是如何生成的

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T06:44:02.407

1.  是的，在大多数情况下，它们会有所不同。哈希冲突的可能性非常非常低（想想十亿分之一）。

2.  内置功能[`uniqid()`](http://php.net/manual/en/function.uniqid.php)对此非常有用。您甚至可以这样做`md5(uniqid())`，但请注意，**这不会增加 GUID 的熵**。为了增加熵，您可以像这样调用函数：`uniqid('',TRUE);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T07:45:22.427

使用散列函数永远不会真正唯一，但您可以将另一个更接近的字符串组合在一起，即获取它们的 IP 地址并附加请求微时间，如下所示：

```
$strUnique = sprintf('%u', ip2long($_SERVER['REMOTE_ADDR'])) . floor(microtime(true) * 1000); 
```

为了使这不是唯一的，两个访问者必须在完全相同的微秒内从相同的 IP 地址加载页面，这比两个哈希相等的可能性更小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T06:47:40.640

我完全同意 xbonez 的回答，但我想补充一点，这取决于您使用它的用途，因为还有其他一些考虑因素。

*   如果这是针对数据库 id，您通常可以依靠数据库系统的自动增量或其他唯一键功能来生成 id
*   如果这是用于文件名，请改用[tempnam](http://php.net/manual/en/function.tempnam.php)
*   您可能希望在 md5 中同时使用时间戳和随机数，因为可以想象多个用户可能会在同一个时间戳上点击页面

# sql-server-2008 - 创建表 - 引号中的 int？

> ID：11027976
> 
> 赞同：-1
> 
> 时间：2012-06-14T06:43:06.590
> 
> 标签：sql-server-2008, int

当我创建一个表并放入一个 int 时，这样可以吗：

```
insert into Employee_T
(Emp_Id)
values
(
'100' /*WILL THERE BE A PROBLEM IF I PUT IT LIKE THIS, IE WITH THE QUOTES*/? 
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:45:09.877

将整数文字放在引号中是完全有效的，但完全没有必要。

它将被解析为字符串并自动转换为整数。

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!3/464db/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:46:51.830

不，

这应该工作得很好。sql server 将解析字符串并将其转换为整数。当然，这对于性能来说并不是最优的，而且如果字符串中有一些格式，如 1.000 或 12,000，它也会导致问题......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T06:46:55.763

不，这不是问题。我的意思是，它不会导致错误。也许转换类型只会带来一点性能开销。它很少但没有必要，并且可能会在高负载时出现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T06:45:02.330

没问题：字符串文字将在插入时转换为 int。

我通常不会自己做，因为它会误导...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T06:47:23.807

如果类型为`char`或，则使用引号`varchar`。如果您正在使用`int`，则无需为插入值提供引号。您应该使用以下查询：-

```
insert into Employee_T (Emp_Id) values (100); 
```

但是，SQLServer 也支持`int`. 但如果您不使用引号，这是一个很好的做法`int`。

# ruby-on-rails - EngineYard：分离代码和资产

> ID：11027979
> 
> 赞同：0
> 
> 时间：2012-06-14T06:43:23.527
> 
> 标签：ruby-on-rails, paperclip, engineyard

我正在使用 EngineYard 来托管我的 Rails 3.2 应用程序。此应用程序允许用户发布图像/资产。我将它们保存在公共目录中（使用 Paperclip Gem）。现在，我的问题是 - 对于新部署，我必须手动将资产复制到当前版本。

虽然，我可以使用 AmazonS3，但我仍然想知道 EngineYard 中是否有一种方法可以让我从与代码不同的目录保存/提供资产，例如 /data/assets。

如果您也看到任何其他替代实现，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T07:39:54.770

通常你的结构看起来像

```
/data
  myapp/
    shared/
      images 
    releases/
      20120613000000
      20120601000000
      ...
    current (symlink to one of the releases) 
```

部署时，您将 public/images 符号链接到 shared/images ，因此您的图像始终存储在不依赖于发布的位置。

我鼓励你使用类似 s3 的东西：当你想在多个实例上托管应用程序时，你会让事情变得更容易。

# javascript - 如何根据传递给函数的值在javascript中从数据库中获取数据

> ID：11027982
> 
> 赞同：3
> 
> 时间：2012-06-14T06:43:38.380
> 
> 标签：javascript, database

在我的 Web 应用程序中，我想根据传递给函数的值从数据库中检索数据。我写的查询如下。

```
<script> 
 //Functions to open database and to create, insert data into tables

 getSelectedRow = function(val)
    {
        db.transaction(function(transaction) {
              transaction.executeSql('SELECT * FROM Employ where number = parseInt(val);',[], selectedRowValues, errorHandler);

        });
    };
    selectedRowValues = function(transaction,results)
    {
         for(var i = 0; i < results.rows.length; i++)
         {
             var row = results.rows.item(i);
             alert(row['number']);
             alert(row['name']);                 
         }
    };
</script> 
```

在body标签中，

```
<body>
   ---
     <a href = "#" onClick = "javascript:getSelectedRow('1')>getValues</a> 
```

我在从数据库中检索数据时遇到了问题，即在 SELECT 查询中。它不接受值 parseInt(val)，如果我将条件设为“name = 1”，它只会接受条件并给出结果，但它不接受“name = parseInt(val)”并抛出错误作为'没有这样的列：val code：1'请告诉我如何在'val'中传递值..在此先感谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:47:56.150

```
'SELECT * FROM Employ where number = ' + parseInt(val, 10) + ';' 
```

例如，如果`val`is `"10"`then 这将最终构建字符串：

```
"SELECT * FROM Employ where number = 10;" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T06:49:56.243

当您的查询形成为

```
SELECT * FROM Employ where number = parseInt(val); 
```

我不知道您使用的是哪个数据库，但没有数据库会理解`parseInt`。

您可以做的是使用一个变量说 temp 并将值存储`parseInt(val)`在 temp 变量中并将查询设为

```
SELECT * FROM Employ where number = temp; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T06:56:34.430

尝试以下操作：

```
<script> 
 //Functions to open database and to create, insert data into tables

 getSelectedRow = function(val)
    {
        db.transaction(function(transaction) {
              transaction.executeSql('SELECT * FROM Employ where number = ?;',[parseInt(val)], selectedRowValues, errorHandler);

        });
    };
    selectedRowValues = function(transaction,results)
    {
         for(var i = 0; i < results.rows.length; i++)
         {
             var row = results.rows.item(i);
             alert(row['number']);
             alert(row['name']);                 
         }
    };
</script> 
```

您无权访问 SQL 中的 javascript 变量名称，您必须将值传递给数据库。

# jcarousel - jcarousel 幻灯片

> ID：11027984
> 
> 赞同：0
> 
> 时间：2012-06-14T06:43:44.480
> 
> 标签：jcarousel

我正在为我的图像滑块使用 jquery jcarousel，但遇到了问题。问题是每当我点击特定的图像滑块图像时都看不到。我的意思是主图像没有变化。欢迎任何帮助。我已经包含了所有需要的 jquery 和 css 和脚本。代码：

```
<?php
                    if(!empty($detailArr))
                    {
                        foreach($detailArr as $models)
                        {
                        ?>
                        <h1><?php echo $models['model_name'];?></h1>

                       <div class="model_info">
                            <div id="slideshow-main">
                                <ul>
                                    <li class="<?php echo $models['gallery_id'];?> active">
                                        <a href="#">
                                      <img  src="<?php echo base_url();?>images/gallery/large/<?php echo $models['gallery_image'];?>" width="410" height="290" alt="" />
                                        </a>
                                    </li>
                                </ul>
                            </div>

                          <div id="slideshow-carousel"> 
                                <ul id="carousel" class="jcarousel jcarousel-skin-tango">
                                    <?php
                                       if(!empty($slideshowArr))
                                            {
                                                foreach($slideshowArr as $models)
                                                {
                                     ?>
                                    <li>
                                        <a href="<?php echo base_url().$models['model_url']."/".$models['gallery_id'];?>" rel="<?php echo $models['gallery_id'];?>">
                                            <img src="<?php echo base_url();?>images/gallery/large/<?php echo $models['gallery_image'];?>" width="129px" height="95px" alt="#"/>
                                        </a>
                                    </li>
                                    <?php
                                               }
                                            }
                                    ?>
                                </ul>
                            </div>

<script type="text/javascript">
$(document).ready(function () {

     //jCarousel Plugin
    $('#carousel').jcarousel({
        vertical: true, //display vertical carousel
        scroll: 1,  //auto scroll
        auto: 2,    //the speed of scrolling
        wrap: 'last',   //go back to top when reach last item
        initCallback: mycarousel_initCallback   //extra called back function
    });

    //Front page Carousel - Initial Setup
    //set all the item to full opacity
    $('div#slideshow-carousel a img').css({'opacity': '0.5'});

    //readjust the first item to 50% opacity
    $('div#slideshow-carousel a img:first').css({'opacity': '1.0'});

    //append the arrow to the first item
    $('div#slideshow-carousel li a:first').append('<span class="arrow"></span>')

    //Add hover and click event to each of the item in the carousel
    $('div#slideshow-carousel li a').hover(
        function () {

            //check to make sure the item is not selected
            if (!$(this).has('span').length) {
                //reset all the item's opacity to 50%
                $('div#slideshow-carousel li a img').stop(true, true).css({'opacity': '0.5'});

                //adust the current selected item to full opacity
                $(this).stop(true, true).children('img').css({'opacity': '1.0'});
            }      
        },
        function () {

            //on mouse out, reset all the item back to 50% opacity
            $('div#slideshow-carousel li a img').stop(true, true).css({'opacity': '0.5'});

            //reactivate the selected item by loop through them and look for the one
            //that has the span arrow
            $('div#slideshow-carousel li a').each(function () {
                //found the span and reset the opacity back to full opacity
                if ($(this).has('span').length) $(this).children('img').css({'opacity': '1.0'});

            });

        }
    ).click(function () {

        //remove the span.arrow
        $('span.arrow').remove();

        //append it to the current item       
        $(this).append('<span class="arrow"></span>');

        //remove the active class from the slideshow main
        $('div#slideshow-main li').removeClass('active');

        //display the main image by appending active class to it.       
        $('div#slideshow-main li.' + $(this).attr('rel')).addClass('active');  

        return false;
    });

});

//Carousel Tweaking
function mycarousel_initCallback(carousel) {

    // Pause autoscrolling if `enter code here`the user moves with the cursor over the clip.
    // resume otherwise
    carousel.clip.hover(function() {
        carousel.stopAuto();
    }, function() {
        carousel.startAuto();
    });
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T06:53:42.593

首先，你确定你已经导入了 jQuery 库吗？你可以像这样检查它： $(document).ready(function () { alert(1); });

# hibernate - grails：如何从 Group 中获取 userList

> ID：11027989
> 
> 赞同：0
> 
> 时间：2012-06-14T06:43:57.433
> 
> 标签：hibernate, grails, grails-orm, grails-plugin, grails-domain-class

我有三个班。

```
class User {
    String userFirstName    
    String userLastName
}

class Group {
    List<User> userList
    String groupName     
    static hasMany = [userList: User]
}

class work {
    User worker
    Group group    
} 
```

现在，我想显示工作组等于用户组的作品列表。并且用户也可以在多个组中。

而且我还需要我组中的所有唯一用户。

# django - UpdateView 中的success_url，基于传递的值

> ID：11027996
> 
> 赞同：39
> 
> 时间：2012-06-14T06:44:26.730
> 
> 标签：django, django-class-based-views

如何`success_url`根据参数进行设置？
我真的很想回到我来的地方，而不是某个静止的地方。在伪代码中：

```
url(r'^entry/(?P<pk>\d+)/edit/(?P<category>\d+)',
    UpdateView.as_view(model=Entry, 
                       template_name='generic_form_popup.html',
                       success_url='/category/%(category)')), 
```

这意味着：编辑条目`pk`，然后返回“类别”。这里一个条目可以是多个类别的一部分。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-14T08:38:23.133

创建一个`MyUpdateView`继承自`UpdateView`并覆盖`get_success_url`方法的类：

```
class MyUpdateView(UpdateView):
    def get_success_url(self):
        pass #return the appropriate success url 
```

我也喜欢在继承的类视图中传递模板名称和模型等参数，但不在`.as_view()`urls.py 中

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-10-08T16:54:50.127

有同样的问题。正如 Dima 所说，能够从 self.kwargs 获取参数：

```
def get_success_url(self):
        if 'slug' in self.kwargs:
            slug = self.kwargs['slug']
        else:
            slug = 'demo'
        return reverse('app_upload', kwargs={'pk': self._id, 'slug': slug}) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-09-28T19:40:54.433

我找到了一种有用且非常简单的方法。看看这个。

```
class EmployerUpdateView(UpdateView):
        model = Employer
        #other stuff.... to be specified

        def get_success_url(self):
           pk = self.kwargs["pk"]
           return reverse("view-employer", kwargs={"pk": pk}) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-05-21T08:44:58.317

`get_absolute_url(self)`在您的模型上定义。例子

```
class Poll(models.Model):
    question = models.CharField(max_length=100)
    slug = models.SlugField(max_length=50)
    # etc ...

    def get_absolute_url(self):
        return reverse('poll', args=[self.slug]) 
```

如果您`PollUpdateView(UpdateView)`将该模型的实例加载为`object`，默认情况下它将寻找一种`get_absolute_url()`方法来确定在`POST`. 然后

```
url(r'^polls/(?P<slug>\w+)/, UpdateView.as_view(
    model=Poll, template_name='generic_form_popup.html'), 
```

应该做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T07:27:20.907

为什么不向表单（模板）添加“下一个”参数并在视图中捕获它。以这种方式实现重定向是常见的做法。