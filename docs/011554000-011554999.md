# StackOverflow 问答 11554000-11554999

# facebook - 无法使用 Facebook API 标记照片

> ID：11554000
> 
> 赞同：0
> 
> 时间：2012-07-19T04:33:32.310
> 
> 标签：facebook, facebook-graph-api, tagging

我尝试使用 Facebook API 中的标记功能，但它不起作用。

这是权限代码：

```
$facebook->getLoginUrl(
    array(
        'canvas' => 1,
        'fbconnect' => 0,
        'req_perms' => 'user_photos, friends_photos, publish_stream,
                        offline_access, user_likes, user_photo_video_tags',
        'next' => $appCanvasPage.'index.php',
        'cancel_url' => $appCanvasPage
    )
); 
```

这是我尝试的第一种方法：

```
$photoId = $userid."_".$upload_photo['id'];
$post_url = "https://graph.facebook.com/"
            .$$photoId . "/tags/" . $friendid
            . "?access_token=". $access_token
            . "&x=" . $x_coordinate 
            . "&y=" . $y_coordinate 
            . "&method=POST";
file_get_contents($post_url); 
```

这将返回一个错误：

```
"message": "Unsupported post request.",
"type": "GraphMethodException",
"code": 100 
```

我试过的第二种方法：

```
$fd = 'XXXX';
$tag = array(
    'tag_uid' => $fd,
    'x' => '10.0',
    'y' => '10.0'
);
$tags = array($tag0);
$facebook->api(
    array(
        'method' => 'photos.addTag',
        'pid' => $photoId,
        'tags' => json_encode($tags)
    )
); 
```

此代码也不标记照片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:25:31.347

好的..我找到了解决方案..可以使用此代码进行标记

```
$tag = array(
            'tag_uid' => $fb->getUser(),
            'x' => 0,
            'y' => 0
        );
        $tags[] = $tag;
        $image = array(
            'access_token' => $session['access_token'],
            'tags' => $tags,
        );
        $fb->setFileUploadSupport(true);
        $image['image'] = '@'.realpath($image_path);
        $fb->api('/me/photos', 'POST', $image); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:55:33.100

`photos.addTag`是一个旧的遗留 REST API。你应该这样称呼：

```
$fd = 'XXXX';
$tag0 = array('to' => $fd, 'x' => '10.0', 'y' => '10.0');
$tags = array($tag0);
$facebook->api('/' . $photoId . '/tags', 'POST', $tags); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T09:24:35.327

```
$post_url = "https://graph.facebook.com/"
        .$$photoId . "/tags/" . $friendid 
```

你真的应该做一些*调试*，而不是仅仅“想知道”为什么会失败……</p>

你在那里写了 $$photoId，有两个 $ 符号。这就是 PHP 中所谓的“变量变量”，它会尝试访问*名称*为 $photoId 内容的变量——但我怀疑您的脚本中*没有*设置名为“$someuserid_somepictureid”的变量。

所以除了给出一个错误（*如果*你已经将你的 error_reporting 设置为一些明智的东西，就像我已经告诉你的那样），*如果*你刚刚做了一个 $post_url 的调试输出，你很容易发现它有问题……< /p>

# javascript - JS幻灯片重叠CSS下拉图像菜单

> ID：11554001
> 
> 赞同：0
> 
> 时间：2012-07-19T04:33:51.577
> 
> 标签：javascript, css, drop-down-menu, menu, slideshow

好吧，我有点不好意思寻求帮助，但我真的需要你的意见，因为我有截止日期......

我有一个图像下拉菜单，但我的幻灯片与它重叠。我在 css 中放置了 z-index 和 position 属性，但它根本不起作用。

[您可以在http://preview.tinyurl.com/7hwcr4u](http://preview.tinyurl.com/7hwcr4u)看到该网站

尝试将鼠标悬停在商店菜单上。应该有一个男装、女装等下拉列表。

下面尝试：

> ```
>  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
> <html xmlns="http://www.w3.org/1999/xhtml">
> <head>
> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
> <link href="css/style.css" rel="stylesheet" type="text/css" />
> <link rel="stylesheet" href="menu.css">
> <link href="Slideshow/style.css" rel="stylesheet" type="text/css" />
> </head>
> 
> <body>
> <div id="header">
> 
>   <div id="header-links">Sign Up   • Login | 0 Items   •   Checkout
>   </div>
> 
>     <div id="logo">
>     </div>
> 
>     <div id="navigation">
>     <div id="menu">
> <ul class="tabs">
>   <li><a href="#"><img src="images/menuhome1.gif"></a>
>   <li class="hasmore"><a href="#"><img src="images/menushop1.gif"></a>
>       <ul class="dropdown">
>           <li><a href="#"><img src="images/menushopmens2.gif"></a></li>
>           <li><a href="#"><img src="images/menushopwomens2.gif"></a></li>
>           <li><a href="#"><img src="images/menushoplimitededition2.gif"></a></li>
>           <li><a href="#"><img src="images/menushopsale2.gif"></a></li>
>           <li><a href="#"><img src="images/menushophotpicks2.gif"></a></li>
>       </ul>
>   </li>
> 
>   <li class="hasmore"><a href="#"><img src="images/menuparticipate.gif"></a>
> <!--      <ul class="dropdown">
>           <li><a href="#">Topic 1</a></li>
>           <li><a href="#">Topic 2</a></li>
>           <li><a href="#">Topic 3</a></li>
>           <li class="last"><a href="#">Topic 4</a></li>
>       </ul> -->
>   </li>
> 
>   <li class="hasmore"><a href="#"><img src="images/menucommunity1.gif"></a>
> <!--      <ul class="dropdown">
>           <li><a href="#">Topic 1</a></li>
>           <li><a href="#">Topic 2</a></li>
>           <li><a href="#">Topic 3</a></li>
>           <li class="last"><a href="#">Topic 4</a></li>
>       </ul> -->
>   </li>
> 
>   <li class="hasmore"><a href="#"><img src="images/menuhelp1.gif"></a>
> <!--      <ul class="dropdown">
>           <li><a href="#">Topic 1</a></li>
>           <li><a href="#">Topic 2</a></li>
>           <li><a href="#">Topic 3</a></li>
>           <li class="last"><a href="#">Topic 4</a></li>
>       </ul> -->
>   </li>
> 
> </ul> <!-- class=tabs*/ -->
> </div>
> 
> <script type="text/javascript" src="menu.js"></script>
>   </div>
> 
> </div> <!--header-links closing div -->
> 
> <!-- start slideshow -->
> <div id="slider">
> 
> <!--slideshow content -->
> 
>   <ul id="slideshow">
>       <li>
>           <h3> </h3>
>           <span>Slideshow/photos/img1.jpg</span>
>           <p> </p>
>           <a href="#"><img src="Slideshow/thumbnails/slidenewthumb.jpg" alt="Orange Fish" /></a>
>       </li>
>     <li>
>           <h3> </h3>
>           <span>Slideshow/photos/img1.jpg</span>
>           <p> </p>
>         <img src="Slideshow/thumbnails/slidefeatthumb.jpg" alt="Sea Turtle" />
>           </li>
>       <li>
>           <h3> </h3>
>           <span>Slideshow/photos/img1.jpg</span>
>           <p> </p>
>           <a href="#"><img src="Slideshow/thumbnails/slidepoputhumb.jpg" alt="Red Coral" /></a>
>       </li>
>       <li>
>           <h3> </h3>
>           <span>Slideshow/photos/img1.jpg</span>
>           <p> </p>
>           <a href="#"><img src="Slideshow/thumbnails/slidenewsthumb.jpg" alt="Coral Reef" /></a>
>       </li>
>       <li>
>           <h3> </h3>
>           <span>Slideshow/photos/img1.jpg</span>
>           <p> </p>
>           <img src="Slideshow/thumbnails/slidesubmitthumb.jpg" alt="Blue Fish" />
>       </li>
> 
>   </ul>
> 
> <!-- start slideshow output -->
> <div id="wrapper">
>       <div id="fullsize">
>           <div id="imgprev" class="imgnav" title="Previous Image"></div>
>         <div id="imglink"></div>
>           <div id="imgnext" class="imgnav" title="Next Image"></div>
>           <div id="image"></div>
>           <div id="information">
>               <h3></h3>
>               <p></p>
>           </div>
>   </div>
> <div id="thumbnails">
>           <div id="slideleft" title="Slide Left"></div>
>           <div id="slidearea">
>               <div id="slider"></div>
>           </div>
>   <div id="slideright" title="Slide Right"></div>
>       </div>
>   </div>
> <script type="text/javascript" src="Slideshow/compressed.js"></script>
> <script type="text/javascript">
>   $('slideshow').style.display='none';
>   $('wrapper').style.display='block';
>   var slideshow=new TINY.slideshow("slideshow");
>   window.onload=function(){
>       slideshow.auto=true;
>       slideshow.speed=5;
>       slideshow.link="linkhover";
>       slideshow.info="information";
>       slideshow.thumbs="slider";
>       slideshow.left="slideleft";
>       slideshow.right="slideright";
>       slideshow.scrollSpeed=4;
>       slideshow.spacing=12;
>       slideshow.active="#000";
>       slideshow.init("slideshow","image","imgprev","imgnext","imglink");
>   }
> </script>
> 
> </div>
> 
> <!-- end slideshow --> 
> ```

**还有幻灯片/style.css：**

```
body {margin:0; background:#fff; padding:5px; font:11px Verdana,Arial}
#slideshow {list-style:none; color:#fff;}
#slideshow span {display:none}
#wrapper {width:872px; margin:50px auto; display:none; z-index: 1; position: relative;}
#wrapper * {margin:0; padding:0}
#fullsize {position:relative; width:872px; height:496px; padding:2px; background:#fff}
#information {position:absolute; bottom:0; width:500px; height:0; background: ; color:#fff; overflow:hidden; z-index:200; opacity:.7; filter:alpha(opacity=70)}
#information h3 {padding:4px 8px 3px; font-size:14px}
#information p {padding:0 8px 8px}
#image {width:500px}
#image img {position:absolute; z-index:25; width:auto}
.imgnav {position:absolute; width:25%; height:306px; cursor:pointer; z-index:150}
#imgprev {float: left; background:url(images/scroll-left.gif) left center no-repeat; left:-50px; top: 50px;}
#imgnext {float: right; right: -50px; background:url(images/scroll-right.gif) right center no-repeat;  top: 50px;}
#imglink {position:absolute; height:306px; width:100%; z-index:100; opacity:.4; filter:alpha(opacity=40)}
.linkhover {background:url(images/link.gif) center center no-repeat}
#thumbnails {margin-top:15px}
#thumb {margin-right: 10px;}
#slideleft {float:left; width:0px; height:133px;}
#slideleft:hover {background-color:#333}
#slideright {float:right; width:0px; height:133px;}
#slideright:hover {background-color:#333}
#slideshowwrapper { width: 900px;}
#slidearea {float:left; position:relative; width:870px; margin-left:0px; height:133px; overflow: visible;}
#slider {position:absolute; left:0; height:81px}
#slider img {cursor:pointer; border:1px solid #fff; padding:2px} 
```

**Menu.css 下面：**

```
/* hack reset (for production, use Yahoo! reset CSS)
*************************/

*
{
    margin: 0;
    padding: 0;
}

/* body
*************************/

body
{
    font: 14px/21px Georgia, serif;
    color: #370707;
    background: none;
}

/* links
*************************/

a:link, a:visited, a:hover, a:active
{
    text-decoration: none;
}

/* inline elements
*************************/

strong
{
    font-weight: bold;
}

/* tabs
*************************/

ul.tabs
{
    display: table;
    margin: 0;
    padding: 0;
    list-style: none;
    position: relative;
}

ul.tabs li
{
    margin: 0;
    padding: 0;
    list-style: none;
    display: table-cell;
    float: left;
    position: relative;
}

ul.tabs a
{
    position: relative;
    display: block;
}

/* dropdowns
*************************/

ul.dropdown
{
    margin: 0;
    padding: 0;
    display: block;
    position: absolute;
    z-index: 1000;
    top: 100%;
    width: 250px;
    display: none;
    left: 0;
}

ul.dropdown ul.dropdown
{
    top: 0;
    left: 95%;

}

ul.dropdown li
{
    margin: 0;
    padding: 0;
    float: none;
    position: relative;
    list-style: none;
    display: block;
    z-index: 1900;
}

ul.dropdown li a
{
    display: block;
}

/* menu-specifc
*************************/

#menu
{

    z-index: 999;
    top: 0;
    left: 0;
    line-height: 40px;
    font-family: "Arial Narrow";
    color: #1b1a1a;
    font-size: 20px;
    float: left;
    height: 30px;
    width: 700px;
    margin-top: 65px;
    text-align: center;
    text-transform: uppercase;
    font-weight: bold;
    position: relative;
}

#menu ul
{
    margin: 0 auto;
}

#menu ul li.hasmore
{
}

#menu ul li h4
{
    margin: 0;
}

#menu ul li h4 a
{
    font-size: 14px;
    color: #000;
    font-weight: bold;
    padding: 0 15px;
}

#menu ul li a
{
    color: #9b2021;
    padding-left: 4px;
}

#menu ul li a img
{
    vertical-align: middle;
}

#menu ul li a:hover
{

}

#menu ul li a span
{
    display: block;
    padding: 0 15px 0 11px;
}

#menu ul li a:hover span
{
    background: url(images/topselectionright.png) top right;
}

#menu ul.dropdown
{
    padding: 5px;
    overflow:hidden;
    width: 290px;
}

#menu ul.dropdown li a
{
    line-height: 60px;
    overflow: hidden;
    height: 60px;
}

#menu ul.dropdown li.last a
{
    border-bottom-width: 0;
}

#menu ul.dropdown li a:hover
{
    background: url(images/menuarrow.png) no-repeat left center;
}

#menu ul li h4 a:hover
{
    background-image: none;
} 
```

**还有……全局 style.css**

```
#header {
    height: 160px;
    width: 8720px;
    margin-right: auto;
    margin-left: auto;
}
#header-links {
    font-family: "DejaVu Sans";
    font-size: 10px;
    float: right;
    width: 100%;
    color: #1b1a1a;
    text-align: right;
}
#logo {
    float: left;
    height: 100px;
    width: 200px;
    background-attachment: scroll;
    background-color: black;
    background-repeat: no-repeat;
    float: left;
    margin-top: 40px;
}
#navigation {
/* see menu.css */
}
#slider {
    z-index: 0;
    position:relative;
    margin-right: auto;
    margin-left: auto;
}
#indemandclothes {
    height: 300px;
    width: 960px;
    margin-top: 30px;
    margin-right: auto;
    margin-left: auto;
    font-family: "Arial Narrow";
    font-size: 12px;
}

#indemandclothesbox{font-family: Arial, Helvetica, sans-serif, "Trebuchet MS";
                    font-size: 10px;
                    width: 100px;
                    padding-right: 20px;
                    float: left;}

#home-block-container {
    width: 960px;
    margin-right: auto;
    margin-left: auto;
    margin-top: 20px;
}

#home-block1 {
    float: left;
    height: 400px;
    width: 310px;
    color: #1b1a1a;
    padding-top: 10px;
    padding-right: 10px;
    padding-bottom: 10px;
    font-family: "Arial Narrow";
    font-size: 12px;
    border-right: 1px solid #CCCCCC;
}

#home-block1title{font-size: 24px;
                    font-family: Arial, Helvetica, sans-serif, "Trebuchet MS";
                    font-weight: bold;
                    }

#home-block2 {
    float: left;
    height: 400px;
    width: 310px;
    color: #1b1a1a;
    padding-top: 10px;
    padding-right: 5px;
    padding-bottom: 10px;
    padding-left: 5px;
    font-family: "Arial Narrow";
    font-size: 12px;
}
#home-block3 {
    float: left;
    height: 400px;
    width: 200px;
    color: #1b1a1a;
    padding-top: 10px;
    padding-right: 5px;
    padding-bottom: 10px;
    padding-left: 5px;
    font-family: "Arial Narrow";
    font-size: 12px;
}
#socialmedia {
    width: 960px;
    margin-right: auto;
    margin-left: auto;
    font-family: "Arial Narrow";
    font-size: 12px;
    float: none;
    margin-top: 20px;
    height: auto;
    font-weight:bold;
}
#footer {
    font-family: "Arial Narrow";
    font-size: 11px;
    padding-top: 10px;
    padding-bottom: 10px;
    min-height: 150px;
    width: 960px;
    margin-top: 100px;
    margin-right: auto;
    margin-left: auto;
    clear: both;
    margin-bottom: 0px;
    border-top-width: 1px;
    border-top-style: solid;
    border-right-style: none;
    border-bottom-style: none;
    border-left-style: none;
    border-top-color: #333;
}

#socialbox{float:left;
            width: 110px;
            height: 60px;
            border: solid thin #ccc;
            margin-right: 15px;}

#emailbox{float:left;
            width: 300px;
            height: 60px;
            border: solid thin #ccc;
}

#footer1 {
    font-family: "Arial Narrow";
    font-size: 11px;
    color: #1b1a1a;
    text-align: center;
    height: 20px;
    width: 960px;
    margin-right: auto;
    margin-left: auto;
    clear: both;
    margin-bottom: 0px;
    display: block;
}
#body {
    font-family: "Arial Narrow";
    font-size: 14px;
    float: none;
    width: 960px;
    color: #1b1a1a;
    margin-top: 20px;
    margin-right: auto;
    margin-left: auto;
    min-height: 500px;
}
#productbodycontainer {
    font-family: "Arial Narrow";
    font-size: 14px;
    float: none;
    color: #1b1a1a;
    min-height: 500px;
    width: 960px;
    margin-top: 20px;
    margin-right: auto;
    margin-left: auto;
    clear: both;
}
#productbody {
    font-family: "Arial Narrow";
    font-size: 12px;
    float: left;
    color: #1b1a1a;
    height: 400px;
    width: 649px;
    padding-right: 10px;
}
#productheading {
    float: left;
    height: 50px;
    width: 649px;
    color: #1b1a1a;
    padding-bottom: 10px;
    padding-right: 10px;
}

#productbody2 {
    font-family: "Arial Narrow";
    font-size: 12px;
    float: right;
    color: #1b1a1a;
    height: 400px;
    width: 649px;
    padding-right: 10px;
}
#productheading2 {
    float: right;
    height: 50px;
    width: 649px;
    color: #1b1a1a;
    padding-bottom: 10px;
    padding-right: 10px;
}

#comments {
    font-family: "Arial Narrow";
    font-size: 14px;
    float: left;
    color: #1b1a1a;
    min-height: 300px;
    width: 649px;
    padding-left: 10px;
}
#shopheadingcontainer {
    float: left;
    height: 30px;
    width: 649px;
}
#shoplandingpageheading {
    font-family: "DejaVu Sans";
    font-size: 12px;
    font-weight: bold;
    text-transform: uppercase;
    color: #FFF;
    background-image: url(../images/shopheadingbg.png);
    float: left;
    height: 30px;
    width: 157px;
    padding-left: 10px;
    padding-top: 3px;
    background-repeat: no-repeat;
    background-attachment: scroll;
}

#sidebar-container {
    float: right;
    min-height: 500px;
    width: 289px;
}

#sidebar-container2 {
    float: left;
    min-height: 500px;
    width: 289px;
    margin-right: 5px;
}

#sidebar {
    float: left;
    width: 270px;
    padding-left: 20px;
    min-height: 150px;
    margin-top: -10px;
    text-align:justify;
    padding-bottom: 5px;
    font-family:Geneva, Arial, Helvetica, sans-serif;
    font-size: 12px;
}

#sidebar2 {
    float: left;
    width: 270px;
    padding-left: 60px;
    min-height: 100px;
    margin-top: -10px;
    text-align:justify;
    padding-bottom: 5px;
    font-family:Geneva, Arial, Helvetica, sans-serif;
    font-size: 12px;
}

#sidebarchoices {border: thin solid #333; width:80px; height: 30px; float: left; margin: 5px; text-align: center; padding-top: 10px;}

#sidebarchoicessize {border: thin solid #333; width:25px; height: 20px; float: left; margin: 5px; text-align: center; padding-top: 10px;}

#sidebar-heading {
    font-family: Arial, Helvetica, sans-serif, "Trebuchet MS";
    font-size: 12px;
    font-weight: bold;
    text-transform: uppercase;
    color: #ffffff;
    float: right;
    height: 35px;
    width: 272px;
    background-attachment: scroll;
    background-image: url(../images/sidebarbackground.png);
    background-repeat: no-repeat;
    vertical-align: middle;
    margin-right: -10px;
    padding-top: 3px;
    padding-left: 3px;
}

#sidebarcolors{width: 15px; height: 15px; float: left; margin: 3px; border: 1px solid #CCCCCC;}
#seeall {
    font-family: "DejaVu Sans";
    font-size: 11px;
    font-weight: bold;
    background-attachment: scroll;
    background-image: url(../images/seeallbg.png);
    background-repeat: no-repeat;
    float: right;
    height: 30px;
    width: 59px;
    color: #FFF;
    padding-top: 3px;
    padding-left: 3px;
}
#featuredproducts {
    float: left;
    height: 300px;
    width: 649px;
    padding-top: 10px;
    padding-left: 5px;
    clear: both;
}

#productfeature {
    font-family: "Arial Narrow";
    font-size: 12px;
    float: left;
    color: #1b1a1a;
    height: 300px;
    width: 649px;
    padding-right: 10px;
    clear: both;
}

#productfeature2 {
    font-family: "Arial Narrow";
    font-size: 12px;
    float: right;
    color: #1b1a1a;
    height: 300px;
    width: 649px;
    padding-right: 10px;
    clear: both;
}

#shopbodycontainer {
    font-family: "Arial Narrow";
    font-size: 14px;
    float: none;
    color: #1b1a1a;
    min-height: 500px;
    width: 960px;
    margin-top: 20px;
    margin-right: auto;
    margin-left: auto;
}
#shopbody {
    font-family: "Arial Narrow";
    font-size: 12px;
    float: right;
    color: #1b1a1a;
    height: 400px;
    width: 650px;
    padding-left: 10px;
}
#shopheading {
    float: right;
    height: 25px;
    width: 650px;
    color: #1b1a1a;
    padding-bottom: 10px;
    padding-left: 10px;
}
#left-sidebar-container {
    float: left;
    min-height: 500px;
    width: 289px;
}

#left-sidebar {
    float: left;
    width: 270px;
    padding-right: 10px;
    min-height: 200px;
    margin-top: -10px;
    padding-left: 10px;
}
#left-sidebar-heading {
    font-family: "DejaVu Sans";
    font-size: 12px;
    font-weight: bold;
    text-transform: uppercase;
    color: #ffffff;
    float: left;
    height: 35px;
    width: 272px;
    background-attachment: scroll;
    background-image: url(../images/leftsidebarbackground.png);
    background-repeat: no-repeat;
    vertical-align: middle;
    padding-top: 3px;
    padding-left: 3px;
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:24:40.940

我在 menu.js 的第 40 行（在 chrome 中）看到一个 javascript 错误。这可能是让您的菜单无法下拉的原因。

# delphi - TIdHTTP.Get EIdIOHandlerPropInvalid 错误

> ID：11554003
> 
> 赞同：9
> 
> 时间：2012-07-19T04:34:19.847
> 
> 标签：delphi

我正在尝试使用 TIdHTTP.Get 将 USPS Zip4 结果网页源加载到变量中（以提取 4 位邮政编码后缀），例如，

```
PgSrc := IdHTTP1.Get('https://tools.usps.com/go/ZipLookupResultsAction!input.action?resultMode=0&companyName=&address1=1600+PENNSYLVANIA+AVE+NW&address2=&city=&state=Select&urbanCode=&postalCode=&zip=20500'); 
```

如果我将上面的示例 url 粘贴到任何浏览器中，它就可以正常工作。但是，在我的代码中，我收到 EIdIOHandlerPropInvalid 错误，并显示以下消息“IOHandler 值无效”。

我有很多邮政编码要查找，因此我将不胜感激任何帮助以避免此错误或提出不同方法的建议。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-19T14:08:23.597

要避免此异常，您必须分配 IOHandler 属性。

检查这个样本。

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  IdHTTP,
  IdSSLOpenSSL,
  SysUtils;

Var
  IdHTTP1 : TIdHTTP;
  Src : string;
  LHandler: TIdSSLIOHandlerSocketOpenSSL;
begin
  try
   IdHTTP1:=TIdHTTP.Create(nil);
   try
    LHandler := TIdSSLIOHandlerSocketOpenSSL.Create(nil);
    try
      IdHTTP1.IOHandler:=LHandler;
      Src:= IdHTTP1.Get('https://tools.usps.com/go/ZipLookupResultsAction!input.action?resultMode=0&companyName=&address1=1600+PENNSYLVANIA+AVE+NW&address2=&city=&state=Select&urbanCode=&postalCode=&zip=20500');
      Writeln(Src);
    finally
      LHandler.Free;
    end;
   finally
     IdHTTP1.Free;
   end;
  except on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  Readln;
end. 
```

注意：还记得将 SSL DLL（libeay32.dll、ssleay32.dll）复制到您的系统。

# opencl - opencl中同一设备上的多个上下文

> ID：11554004
> 
> 赞同：0
> 
> 时间：2012-07-19T04:34:21.627
> 
> 标签：opencl, pyopencl

我们可以在同一设备上拥有多个上下文吗？如果是，那么它是同时可用还是并行（在同一时间点）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:00:19.417

Yes you can have multiple OpenCL Contexts on the same device.

Are really asking if you can create multiple context from within the same host process? I don't see any benefits for that configuration, as GPU utilization is controlled from the Command Queues and the order commands are submitted.

The device driver implementation decides how the Contexts are managed. At present, GPU's are not multi-tasking, so Kernels are run as the Device driver decides, I expect first come first served. Roll on the Nvidia K20 ..

# sql-server-2008-r2 - sql 异常无效的字符串或缓冲区长度

> ID：11554005
> 
> 赞同：0
> 
> 时间：2012-07-19T04:34:30.427
> 
> 标签：sql-server-2008-r2

我已经启动了java并且刚刚完成了核心java ...但由于sqlException我无法继续进行。我已经成功加载驱动程序并想要执行查询...但是每次我发现异常怎么能我摆脱了这个问题......

我的代码如下：

```
if(e.getSource()==b1)
    {
        if(t1.getText().equals(""))
        {
            JOptionPane.showMessageDialog(null,"provide username to login");
            t1.requestFocus();
        }
        else if(t2.getText().equals(""))
        {
            JOptionPane.showMessageDialog(null,"provide password to login");
            t2.requestFocus();
        }
        else 
        {
            String tablename=null;
            if(rb==1)
            {tablename="Admin";}
            else if(rb==2)
            {tablename="Clerks";}
            else if(rb==3)
            {tablename="members";}
                try
                {
                    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
                    Connection con=DriverManager.getConnection("Jdbc:Odbc:librarysystem","","");
                    PreparedStatement ps=con.prepareStatement("select * from "+tablename+" where username=? and password=?");
                    ps.setString(1,t1.getText());
                    ps.setString(2,t2.getText());
                    ResultSet rs=ps.executeQuery();
                    if(rs.next())
                    {
                        //System.out.println(res);
                        //JOptionPane.showMessageDialog(new JFrame(),"Registered user successful");
                        l=new library();
                    }
                    else
                    {
                        JOptionPane.showMessageDialog(new JFrame(),"wrong details entered");
                    }
                }
                catch(Exception sql)
                {

                    t1.setText ("");
                    t2.setText ("");
                    t1.requestFocus ();
                    System.out.println(sql);
                    JOptionPane.showMessageDialog (null, "Incorrect excep Information Provided.");
                }
        }
    }
    else if(e.getSource()==jrb1)
    {
        rb=1;
    }
    else if(e.getSource()==jrb2)
    {
        rb=2;
    }
    else if(e.getSource()==jrb3)
    {
        rb=3;
    }
    else if(e.getSource()==b2)
    {
        f.setVisible(false);
        f.dispose();
        System.exit(152);
    } 
```

这总是显示： SQLException[Microsoft][ODBC Driver Manager] Invalid string or buffer length

请帮助我..fnds

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:46:06.183

这可能是由作为您的 sql 登录名的零长度字符串引起的：

连接 con=DriverManager.getConnection("Jdbc:Odbc:librarysystem","sa","sa_password");

# javascript - javascript ArrayBuffer，它有什么用？

> ID：11554006
> 
> 赞同：90
> 
> 时间：2012-07-19T04:34:32.580
> 
> 标签：javascript

也许它已经晚了，或者也许是为了，但我只是阅读了[ArrayBuffer](https://developer.mozilla.org/en/JavaScript_typed_arrays/ArrayBuffer)的文档并且想不出任何它会真正有用的东西。

有人可以启发我吗？

有没有任何人能想到的不涉及图像的用途？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-07-19T06:25:21.267

基本上 ArrayBuffer 用于保存二进制数据。例如，它可以是图像的二进制数据。

在其他语言中，缓冲区被证明非常有用。是的，当然它比其他数据类型更难理解/使用。

ArrayBuffer 可用于获取jpg 图像（RGB 字节）的数据，并通过添加alpha 字节（即RGBA）从中生成一个png。

[Mozilla 网站在这里](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays#Working_with_complex_data_structures)对 ArrayBuffer 进行了少量使用

> ## 处理复杂的数据结构
> 
> 通过将单个缓冲区与不同类型的多个视图组合，从缓冲区的不同偏移量开始，您可以与包含多种数据类型的数据对象进行交互。例如，这使您可以与来自[WebGL的复杂数据结构、数据文件或您在使用](https://developer.mozilla.org/en-US/docs/Web/WebGL)[js-ctypes](https://developer.mozilla.org/en-US/docs/Mozilla/js-ctypes)时需要使用的 C 结构进行交互。
> 
> 考虑这个 C 结构：
> 
> ```
> struct someStruct {  
>   unsigned long id;  
>   char username[16];  
>   float amountDue;  
> }; 
> ```
> 
> 您可以访问包含这种格式的数据的缓冲区，如下所示：
> 
> ```
> var buffer = new ArrayBuffer(24);  
> 
> // ... read the data into the buffer ...  
> 
> var idView = new Uint32Array(buffer, 0, 1);  
> var usernameView = new Uint8Array(buffer, 4, 16);  
> var amountDueView = new Float32Array(buffer, 20, 1); 
> ```
> 
> 然后，您可以访问，例如，到期金额 `amountDueView[0]`。
> 
> > **注意：** C 结构中的[数据结构对齐](http://en.wikipedia.org/wiki/Data_structure_alignment)是平台相关的。对这些填充差异采取预防措施和注意事项。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-07-30T06:25:15.140

An[`ArrayBuffer`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer)是 RAM 中的一大块二进制数据。有几种方法可以“打开”`ArrayBuffer`阅读和写作：

*   [类型化数组](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray)，例如`Uint16Array`，可以通过将缓冲区视为整数数组来读取和写入缓冲区。他们不允许你控制[字节顺序](https://package.elm-lang.org/packages/elm/bytes/latest/Bytes#Endianness)；它使用 CPU 的首选字节序。`Uint8Array`对于控制单个字节（复制、切片等）很有用。

*   [`DataView`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView)不是那么简单，但它给了你更多的控制权。它允许您选择字节顺序、整数大小和字节索引（例如，您可以在不能被 32 位整除的索引处访问 32 位整数）。这些东西可以在你每次读写一个整数时指定`DataView`。

更多信息：[https ://javascript.info/arraybuffer-binary-arrays](https://javascript.info/arraybuffer-binary-arrays)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-08-18T03:03:25.070

除了图像之外，它还可以用于精确构造和破坏 UDP 等协议中使用的低级网络数据包。

# search - IBM Omnifind：如何在点击位置周围获取几行文本？

> ID：11554010
> 
> 赞同：0
> 
> 时间：2012-07-19T04:35:33.560
> 
> 标签：search, full-text-search, search-engine

亲爱的大家

我正在使用 Omnifind 实现一个解决方案，一个要求是针对每个“搜索命中”，我们应该在命中位置周围向最终用户显示几行。Omnifind 可以做到这一点吗？

我正在使用 Omnifind 企业版 9.1

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T10:41:03.050

在完全爬网和重新组织索引之后，它运行我们的“摘要”字段现在看起来不错。干杯!

# java - 接受其他语言的正则表达式

> ID：11554012
> 
> 赞同：0
> 
> 时间：2012-07-19T04:35:45.520
> 
> 标签：java, regex, utf-8

对不起，伙计们，我是新手，我重新构建了我的问题。我有一个正则表达式`[A-Za-z0-9._]*[A-Za-z]+[A-Za-z0-9._]*`，它只接受字母，字母数字但不只接受数字，允许的特殊字符是.（点）和（下划线）。

有效条目是

1.  ABC123de（字母数字 - 无论大小写）
2.  ABCDEfgh（仅字母 - 不分大小写）
3.  Abc.123（仅允许特殊字符为 _ 和 .）

**它正在接受上述要求**。

但是，如果我输入诸如 之类的字符`ààâüüúúàççé`，则不接受。然后一位朋友给了这个`[\p{L}\d._]*\p{L}+[\p{L}\d._]*`不起作用。让我知道我们是否需要修改`[\p{L}\d._]*\p{L}+[\p{L}\d._]*`才能接受`ààâüüúúàççé`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:01:31.513

这个对我有用：

```
"ààâüüúúàççé".matches( "^[\\p{L}\\d._]*\\p{L}+[\\p{L}\\d._]*$" ); // true 
```

# jquery - 一旦添加了移动脚本，网站就会在移动设备上中断

> ID：11554013
> 
> 赞同：1
> 
> 时间：2012-07-19T04:35:50.593
> 
> 标签：jquery, mobile

我正在使用来自网站[http://mobilizejs.com/](http://mobilizejs.com/)的移动脚本，它适用于我的其他网站。

我退出的网站有一个 js 函数，比如

```
var anchors = document.getElementsByTagName("a");
  for (var i=0; i<anchors.length; i++)
  {
    var anchor = $( anchors[i] );
    if (anchor.getAttribute("href") && anchor.getAttribute("rel") == "external")
    { 
```

当我从 mobilizejs 添加 js 时

```
<script type="text/javascript" src="http://cdn.mobilizejs.com/releases/0.1/js/mobilize.core.min.js"></script> 
```

移动网站中断，我收到类似 js 的错误

```
anchor.getattribute is not a function 
```

解决此错误的任何方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:41:51.543

您正在从锚点制作 jQuery 对象，而 jQuery 对象没有`getAttribute`方法。当您使用 jQuery 时，您可以使用`each`和`attr`方法。尝试以下操作：

```
var anchors = $('a')
anchors.each(function(i, v){
   if ($(this).attr('rel') == 'external') {
       // do something here
   }
}) 
```

# c++ - arm的交叉编译

> ID：11554014
> 
> 赞同：8
> 
> 时间：2012-07-19T04:35:52.123
> 
> 标签：c++, c, cross-compiling

我正在编写一个 c++ 应用程序并尝试为 arm 交叉编译：sudo apt-get install gcc-4.4-arm-linux-gnueabi

但是在 /usr/arm-linux-gnueabi/include 目录中，我找不到 c++ 目录。谁能告诉我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T04:41:55.123

安装 C++ 编译器：

```
sudo apt-get install g++-4.4-arm-linux-gnueabi 
```

# php - 语法 SQL（WHERE、AND、LIKE）

> ID：11554015
> 
> 赞同：1
> 
> 时间：2012-07-19T04:35:54.640
> 
> 标签：php, mysql, sql

这种语法有什么问题？

`select * from registered_members where username = '$username' AND LIKE '%LOL%'`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T04:39:00.633

您没有指定要与哪一列进行比较`LIKE`。

```
"select * from registered_members where username = '" . mysql_real_escape_string($username) . "' and username like '%LOL%'" 
```

此外，您需要保护自己免受 SQL 注入...您应该真正使用参数化查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T04:40:55.427

除了添加要搜索的列名之外，您还应该转义`$username`变量以防止 SQL 注入：请参阅[bobby-tables.com](http://bobby-tables.com/)。否则，正如您编写的那样，人们可以在您的页面中执行任意 SQL 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T04:38:11.633

你需要一个介于“AND”和“LIKE”之间的列名

IE

```
 SELECT * FROM Registered_Members WHERE UserName = '$username' AND UserName LIKE '%LOL%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T04:38:35.243

```
select * from registered_members where username = '$username' AND username LIKE '%LOL%' 
```

# acrobat - 如何正确退出 CAcroApp？

> ID：11554018
> 
> 赞同：3
> 
> 时间：2012-07-19T04:36:52.190
> 
> 标签：acrobat, acrobat-sdk

我在一个简单的 C# 控制台程序中引用了 Acrobat.dll，然后编写了几行代码来运行 Acrobat。

```
CAcroApp mApp = new AcroAppClass();
Console.WriteLine("Acrobat is running");
bool bClose = mApp.CloseAllDocs();
bool bExit = mApp.Exit(); 
```

但是，虽然 CloseAllDocs() 返回 true，但 Exit() 始终返回 false。

因此，我仍然可以看到 Acrobat 进程在任务管理器中运行。

但是，一旦程序结束，该进程也会自动终止。

我怎样才能做到这一点，以便我可以从程序中关闭 Acrobat 进程而不必退出程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:04:00.313

根据我的经验，只有当所有相关对象都被垃圾回收时，Acrobat 进程才会关闭。要强制收集，请使用以下代码：

```
GC.Collect();
GC.WaitForPendingFinalizers();
GC.Collect(); 
```

注意：垃圾收集仅在相关对象（例如 mApp）不再在范围内时才有效。

# android - Infuse 在通话记录中放置短信联系人

> ID：11554025
> 
> 赞同：1
> 
> 时间：2012-07-19T04:37:29.253
> 
> 标签：android, sms, android-contentprovider, calllog

我正在寻找其他人也问过的答案，但还没有人回答......

我有一个三星 Infuse。它在通话记录中显示`SMS-Text`消息信息。我已经编写了代码来列出通话记录，但是代码没有列出这些消息。知道如何像手机一样同时获取通话和短信记录吗？

我尝试了 managedQuery 和 getContentResolver().query 的 URI 为“content://call_log/calls”。这确实会从日志中返回 PHONE CALLS，但会跳过我查看通话记录时存在的 SMS-Text 条目。有趣的是，手机按每个条目显示不同的图标（因此它知道哪个条目来自通话，哪个来自短信），它还提供了`MENU OPTION`过滤显示的功能：

`All Logs`

`Missed Calls`

`Dialed Calls`

`Received Calls`

`Sent Messages`

`Received Messages`

这让我认为它可能只是一个`different type`日志条目，但这似乎与查询返回的内容不匹配。这也让我想知道这个设备是否有自己的日志内容提供商，因为这似乎是我的设备独有的，因为模拟器不会将 SMS 联系信息放在通话记录中，我朋友的任何 Android 设备也没有。我讨厌它，并想编写一个应用程序，从我的通话记录中删除 SMS 联系人条目，以便只保留电话条目！请注意，因为其他人已经提出了这个问题，所以我不是唯一一个想要从通话记录中自动删除 SMS 文本的三星用户（如果我们能弄清楚如何在日志中找到它们，应用程序就会出现！）

谢谢你的帮助...

坦率

# android - 如何正确居中 GridView？

> ID：11554027
> 
> 赞同：10
> 
> 时间：2012-07-19T04:37:59.097
> 
> 标签：android, android-gridview

我一直在尝试和尝试，但没有这样的运气。我在这里的所有其他答案以及与居中相关的所有其他答案都很`GridView`幸运，也没有运气。这是我的`GridView`xml：

```
<GridView
        android:id="@+id/calendar_grid"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:numColumns="7"
        android:columnWidth="40dp"
        android:verticalSpacing="1dp"
        android:horizontalSpacing="1dp"
        android:paddingTop="2dp"
        android:stretchMode="columnWidth"
        android:layout_gravity="right"
        android:gravity="right"
        android:background="#696969" ></GridView> 
```

我已经尝试了所有我能想到的组合，但效果并不明显。至少它在设备之间不一致。这是它一直在做的事情的形象。

![在此处输入图像描述](../Images/7e28a1909b48ccbdad93edc1448a3647.png)

正如您在 GridView 的右侧看到的那样，有间距。我试图不断改变这一点，但它几乎永远不会奏效。使用`android:stretchMode`确实会改变它，但它会弄乱我在单元格之间的间距，所以这不起作用。如您所见，使用 Gravity 也会失败。我已经为它尝试了所有其他值，但它仍然没有改变。它粘在左边。我也觉得很奇怪，试图`android:columnWidth`从 40 岁以下的任何东西改变大小它也没有任何作用。当我将 40 增加到 45 时，它也没有任何变化。但是将其更改为 50 会使右侧的空间消失。但是当它放在我的手机上时，间距就在那里！两周前我跳过了这个，继续做其他事情，但看起来我还没有解决这个问题，甚至不明白为什么我没有尝试任何工作。

如果它可以帮助任何人在这里帮助我，我还可以提供构成单元格的 xml。但我不确定这是否重要。但这里是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <TextView 
        android:id="@+id/day_num"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:textSize="10dp"
        android:background="#000000"
        android:height="35dp"
        android:gravity="center_vertical|center_horizontal" />

</LinearLayout> 
```

如果它有帮助，则`GridView`' 的父母是`LinearLayout`这样的：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_weight="0"
    android:gravity="center" > 
```

还有一个权重为 1 的兄弟姐妹，但我认为这不应该是因为权重 0 使该部分首先设置其空间。

**编辑**：

所以我一直在玩它，非常恼火，特别是因为似乎没有多少人有这个问题，但看起来不管我做多小`columnWidth`，GridView 几乎没有变小。事实上，在我达到 50dp 之前，你看到的同样的差距就是它。但是当我进入纵向模式时，间隙再次出现，所以我将它提高到 90dp（我尝试过，没有改变任何东西），它就消失了。奇怪的是`GridView`除了填补空白之外没有改变。所以我可以把它设为 200dp，它在我的屏幕尺寸和任何其他较小的屏幕上看起来都很完美。一旦我使用平板电脑，我怀疑我需要增加更多，但关键是，这是一种奇怪的行为。有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T07:34:29.523

您可能希望将您的`GridView`内部 a`RelativeLayout`然后将`GridView`'`layout_centerInParent`属性设置为`true`. 像这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <GridView
            android:id="@+id/calendar_grid"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:numColumns="7"
            android:columnWidth="40dp"
            android:verticalSpacing="1dp"
            android:horizontalSpacing="1dp"
            android:paddingTop="2dp"
            android:stretchMode="columnWidth"
            android:background="#696969"
            android:layout_centerInParent="true" />

</RelativeLayout> 
```

`RelativeLayout`让您更好地控制孩子的位置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-06T11:23:21.767

这是我的工作配置：

```
 <GridView
        android:id="@+id/gridView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:cacheColorHint="@color/white"
        android:verticalSpacing="10dp"
        android:horizontalSpacing="10dp"
        android:numColumns="3"
        android:padding="5dp"
        android:scrollbars="none"
        android:stretchMode="columnWidth"
        android:gravity="center"
        /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T04:41:22.277

您需要设置 TextView 的 Parent Layout 的 Gravity 或 TextView 的 LayoutGravity，请更改 Cell Layout 如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:gravity="center_vertical|center_horizontal" >
    <TextView 
        android:id="@+id/day_num"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:textSize="10dp"
        android:background="#000000"
        android:height="35dp"
        />

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T02:38:20.927

我遇到了同样的问题，并且使用 centerInParent 的 RelativeLayout 也没有帮助。

基本上，划分可能包含将根据屏幕宽度截断的剩余部分。

因此，使 GridView 居中的唯一方法是计算一个不带余数的宽度，并使用余数作为填充。

```
WindowManager manager = window.getWindowManager();
int  screenWidth      = manager.getDefaultDisplay().getWidth();
int contentWidth      = screenWidth;

while( 0 != contentWidth%COLUMN_NUMBER ) contentWidth--;

columnWidth = contentWidth / COLUMN_NUMBER;
int padding = screenWidth - contentWidth; 
```

然后，当您创建 GridView 时：

```
gridView.setColumnWidth(columnWidth);
gridView.setPadding(padding / 2, 0, padding / 2, 0); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-05T10:48:11.283

```
There is more specific method to do this. You can define custom layout. And add TextView as the element. Then apply the properties what you want. To center make gravity = center like wise. Then apply that layout as the layout for your grid view.

Ex :
Sample layout name : myCellitemlayout.xml
<TextView>
      android:id="@+id/text_id"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:gravity="center"
</TextView>

Now add this to your gridView adapter.
Ex: GridView

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                R.id.myCellitemlayout, numbers);

gridView.setAdapter(adapter); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-18T16:03:52.403

centerInParent 也不适合我。

将 GridView 的 layout_height 属性更改为 wrap_content，如下所示：

```
<GridView
    android:id="@+id/calendar_grid"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:numColumns="7"
    android:columnWidth="40dp"
    android:verticalSpacing="1dp"
    android:horizontalSpacing="1dp"
    android:paddingTop="2dp"
    android:stretchMode="columnWidth"
    android:layout_gravity="right"
    android:gravity="right"
    android:background="#696969" ></GridView> 
```

如果您使用的是 RelativeLayout 或 LinearLayout 并不重要，但您必须像这样指定重力属性居中：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center"
android:orientation="vertical"> 
```

它对我很有用。

# scrapy - exceptions.TypeError：“模块”对象不可调用

> ID：11554033
> 
> 赞同：0
> 
> 时间：2012-07-19T04:38:37.240
> 
> 标签：scrapy

我有一个文件ccbank_spider.py，下面是内容

```
class LoginSpider(BaseSpider):

 #some code

 #for hitting and parsing of the Account URL
 for accountURL in (strip(s) for itemArr in items for s in itemArr['accountURL']):
    print accountURL
    yield request(accountURL, callback=self.account_transactions)

 def account_transactions(self, response):
  print 'print text'
  return None 
```

我收到以下错误

```
 File "D:\NextGen\workspace\tutorial\tutorial\spiders\ccbank_spider.py", line       45, in after_login
       yield request(accountURL, callback=self.account_transactions)
   exceptions.TypeError: 'module' object is not callable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:07:57.423

```
 File "D:\NextGen\workspace\tutorial\tutorial\spiders\ccbank_spider.py", line       45, in after_login
       yield request(accountURL, callback=self.account_transactions)
   exceptions.TypeError: 'module' object is not callable 
```

应该`Request`不是`request`,你做了`from scrapy.http import Request`

# python - 我们可以为特定用户在 Plone 中的 Plone formgen 表单字段上授予“字段”的读/写访问权限吗？

> ID：11554040
> 
> 赞同：0
> 
> 时间：2012-07-19T04:39:13.807
> 
> 标签：python, plone

我希望使用表单生成创建一个表单。在此表单中，基于添加、编辑或查看等登录权限，我希望用户可以编辑表单字段的输入数据。默认 Plone 是否有任何此类功能随时可用，无需任何编码工作？使用 Plone 4.1 换句话说，有些用户应该不能添加某些字段数据，他们只能在表单上查看该字段的默认值。

# database - 异步调用Web服务并将数据保存到mysql数据库的最佳方式/程序/语言？

> ID：11554043
> 
> 赞同：0
> 
> 时间：2012-07-19T04:39:30.687
> 
> 标签：database, web-services, rest, asynchronous

我想异步调用 google book、openlibrary 等网络服务并获取图书数据并将其存储到我自己的 MySQL 服务器中。我想写一个脚本来做到这一点。它类似于我认为的网络爬虫，除了它不必处理 html 页面而是 JSON/XML。

进行此操作的最佳方法是什么？这可以使用 PHP 或 NodeJS 来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:54:12.643

除非您正在调用的 api 会减慢您的应用程序，否则有理由异步执行此操作。

但是，如果您遇到某种瓶颈并且不想在您从这些 api 获得响应时让您的应用程序挂起，那么 Nodejs 将是异步执行此操作的好选择。

# android - 通过摄像头进行人脸检测

> ID：11554046
> 
> 赞同：1
> 
> 时间：2012-07-19T04:40:00.130
> 
> 标签：android, image-processing

我正在尝试做一个 android 应用程序，它可以从相机中检测到脸上的微笑。任何人都可以指出我如何开始？是否有我可以使用的与相机挂钩的人脸检测/识别库或 sdk？任何指针表示赞赏

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:02:04.103

对于人脸检测，您可以使用[OpenCV](http://opencv.willowgarage.com/wiki/)库。为了检测脸上的微笑，您可能必须设计自己的算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T00:38:15.180

从 Android 4.0 (ICS) 开始，相机 API 包括对[硬件人脸检测](http://developer.android.com/reference/android/hardware/Camera.html#startFaceDetection%28%29)的支持。但是，并非所有设备都支持这一点，因为它依赖于设备上的人脸检测单元。您必须查询[相机参数](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getMaxNumDetectedFaces%28%29)以查看您的设备是否支持人脸检测。

或者，您可以使用 ICS 中添加的[效果 API](http://developer.android.com/reference/android/media/effect/EffectFactory.html)，它与[Google Add-on API](https://developers.google.com/android/add-ons/google-apis/)一起支持软件人脸检测。附加 API 包含额外的效果定义，例如人脸检测。您必须安装插件并查看文档以查找有关软件人脸检测的信息，并且您将设置 OpenGL 环境以将图像数据传递给人脸检测效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T23:57:16.127

除了 Android 4 中引入的硬件库之外，还有一个基于软件的人脸检测库，该库自 android 1 以来就一直存在。查看[FaceDetector](http://developer.android.com/reference/android/media/FaceDetector.html)和[FaceDetector.Face](http://developer.android.com/reference/android/media/FaceDetector.Face.html)以获取有关它们的更多信息。

虽然这只能检测面部，但我想您会想要检测预览帧中的所有面部，然后运行自定义微笑检测算法。您很可能希望在 openCV 中执行此操作，为此您可以创建 openCV 方法并使用 android NDK 作为本机库导入它们并在它们上调用方法。

# jasper-reports - 如何避免下一页中 13 列的一部分我想让每一页都有完整的价值而不拆分到下一页？

> ID：11554048
> 
> 赞同：1
> 
> 时间：2012-07-19T04:40:19.627
> 
> 标签：jasper-reports, ireport

![如何避免下一页中 13 列的一部分我想让每一页都有完整的价值而不拆分到下一页？](../Images/fd05d94c4138bb818bd85fa3af021127.png)

如何避免下一页中 13 列的一部分我想让每一页都有完整的价值而不拆分到下一页？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T04:56:00.943

您需要将 Detail band 的 Split Type 设置为`Prevent`或`Immediate`。我不记得它是哪一个，但它就是其中之一。我认为它是`Immediate`，它应该导致它在可以完全适合的最后一行之后放置一个分页符。

# android - 如何在android中滚动添加浮动按钮？

> ID：11554049
> 
> 赞同：2
> 
> 时间：2012-07-19T04:40:49.583
> 
> 标签：android, button, scrollview

我的页面中有一个滚动视图，其中包含一个线性布局。我的要求是在滚动此布局时添加一个浮动按钮并在此按钮单击时执行操作。如何才能做到这一点。请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T01:09:27.717

也许我误解了你的问题，但听起来你想要一个固定`Button`在你之外的东西，`ScrollView`这样你就可以滚动并总是看到`Button`?

如果是这样，只需添加`Button`OUTSIDE `ScrollView`：

```
<Button
    android:id="@+id/button_save"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Save" />

<ScrollView
    android:id="@+id/scrollView_list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-09T07:43:34.917

使用[这个库](https://github.com/shamanland/floating-action-button)，它已经完成了你需要的事情。

将其包含在您的项目中：

```
dependencies {
    compile 'com.shamanland:fab:0.0.5'
} 
```

添加`FloatingActionButton`到您的布局而不是常规`Button`：

```
<com.shamanland.fab.FloatingActionButton
    android:id="@+id/button_save"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    /> 
```

将其与`ScrollView`：

```
FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.button_save);
ScrollView scrollView = (ListView) findViewById(R.id.scrollView_list);
scrollView.setOnTouchListener(new ShowHideOnScroll(fab)); 
```

就是这样，它应该工作！

在此处查看我的[原始帖子](https://stackoverflow.com/a/25098626/1891118)并查看[示例应用程序](https://github.com/shamanland/floating-action-button/blob/master/app/src/main/java/com/shamanland/fab/example/ExampleListActivity.java#L26)。

# php - Zend框架中的url传递参数

> ID：11554051
> 
> 赞同：0
> 
> 时间：2012-07-19T04:40:58.300
> 
> 标签：php, zend-framework, zend-framework-routing

在 zendframework 中，当我使用代码移动到带有参数的新页面时

`$this->_helper->redirector('my-action','my-controller',null,$params-array);`,

它在应用程序的每个 url 中显示参数。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T05:09:14.130

您可以使用

```
$params = array('user' => $user, 'mail' => $mail);
$this->_helper->redirector($action, $controller, $module, $params); 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:07:15.000

你可以试试这个

```
$this->_redirect('Controllername/action?para1=value&para2=value'); 
```

试试这个它的工作

我希望它可以帮助你......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:21:03.317

url() 视图助手由 Zend Framework 2 提供，用于创建我们需要的链接。url() 的第一个参数是我们希望用于构建 URL 的路由名称，第二个参数是一个包含所有变量的数组，以适合使用的占位符。在这种情况下，我们使用我们的“专辑”路由，该路由设置为接受两个占位符变量：action 和 id。

# objective-c - substringWithRange 获取范围或索引超出范围错误

> ID：11554056
> 
> 赞同：0
> 
> 时间：2012-07-19T04:41:21.237
> 
> 标签：objective-c, nsstring, substring, nsrange

首先是代码

```
// It's a test string 
NSString* aString =
    @",{id:\"bd\",name:\"ac\",latlng {lat:37.492488999999999,lng:127.014357}}";
// NSString *strRegex = @"latlng:\\ \\{(\\S*?)[^}]*\\}";
NSString *strRegex = @"latlng:\\{(\\S*?)[^}]*\\}";
NSRegularExpression* regEx = [NSRegularExpression
                                          regularExpressionWithPattern:strRegex
                                                               options:0
                                                                 error:NULL];
NSArray* matches = [regEx matchesInString:dataString
                                  options:0 
                                    range:NSMakeRange(0,[dataString length])];
NSInteger num=0;
for(NSTextCheckingResult* i in matches) {
    NSRange range = i.range;
    NSUInteger index = range.location; //the index you were looking for!
    //do something here
    num++;
    NSLog(@"%i",num);
    NSLog(@"index: %d",range.location);
    NSLog(@"length: %d", range.length);
    NSLog(@"%@",[aString substringWithRange:range]);
} 
```

使用测试字符串时，一切顺利。

我的问题是当我使用数据中的字符串（其大小约为 50k）时，它会变成错误...

* * *

编辑于 2012/07/19

下面是字符串发生错误

```
NSError *error = nil;

NSString *urlString = [NSString stringWithFormat:@"http://maps.google.co.kr?q=%@&output=json", [address stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
//#define NSKoreanEncoding 0x80000422
NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:urlString]
                                     options:kNilOptions
                                       error:&error];
NSString *dataString = [[NSString alloc] initWithData:data
                                             encoding:NSKoreanEncoding]; 
```

它可以匹配 10 个结果。

运行`substringWithRange:range`线路时它会崩溃。

下面是错误日志。

```
2012-07-19 13:31:08.792 testView[6514:11c03] index: 649
2012-07-19 13:31:08.793 testView[6514:11c03] length: 46
2012-07-19 13:31:08.793 testView[6514:11c03] *** WebKit discarded an uncaught exception in the webView:shouldInsertText:replacingDOMRange:givenAction: delegate: <NSRangeException> -[__NSCFConstantString substringWithRange:]: Range or index out of bounds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:02:20.760

你没有检查你是否真的*得到了*一个有效的范围。从[类文档](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)：

> 如果捕获组之一未参与此特定匹配，则返回范围 {NSNotFound, 0}。

在使用范围之前，您需要在代码中测试这种情况，例如`substringWithRange:`.

# css - 什么是 CSS、JS 和图像的过期标头？

> ID：11554059
> 
> 赞同：0
> 
> 时间：2012-07-19T04:41:41.857
> 
> 标签：css, caching

在使用 pagespeed（firefox 插件）分析我的网站后，我得到了 mydomain.com/css/common.css (expiration not specified)。这是什么意思？我将如何给到期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:00:49.103

**过期标头：**

缓存 CSS、图像和 JS 的持续时间或时间。这意味着您决定所有 CSS、JS 和图像的到期日期。浏览器将在到期时间后查找内容，或者如果您删除了所有浏览器缓存。如果您在 Amazon 上托管 Cloudberry 等工具，您可以选择添加过期标头。

# vba - 使用 DataObject.PutInClipboard 方法时出现运行时错误

> ID：11554063
> 
> 赞同：3
> 
> 时间：2012-07-19T04:41:58.853
> 
> 标签：vba, clipboard

我有一个在我的电脑上运行的宏。当其他人运行它时，它会抛出以下异常：

```
"Run-time error '-2147221036 (800401d4)'
DataObject:PutInClipboard CloseClipboard Failed" 
```

这是我的代码：

```
Dim buf As String, FSO As Object
Dim CB As New DataObject

Set FSO = CreateObject("Scripting.FileSystemObject")
With FSO.OpenTextFile(sFile, 1)
    buf = .ReadAll
    buf = Replace(buf, ",", Chr(9))
    .Close
End With

With CB
    .SetText buf
    .PutInClipboard   // Here cause the exception.
End With 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-15T21:09:31.950

我有同样的问题。我不知道是什么原因造成的；我的猜测是，如果您的 PC 资源被征税，剪贴板可能不会像您希望的那样快速运行。我的解决方案是将代码放在一个循环中，并在它工作时中断。

```
Dim buf As String, FSO As Object
Dim CB As New DataObject
dim errnum as long
dim errdesc as string
dim i as long

Set FSO = CreateObject("Scripting.FileSystemObject")
With FSO.OpenTextFile(sFile, 1)
    buf = .ReadAll
    buf = Replace(buf, ",", Chr(9))
    .Close
End With

With CB
    .SetText buf

    On Error Resume Next
        For i=1 to 200
            .PutInClipboard
            errnum = Err.Number
            errdesc = Err.Description
            If errnum = 0 Then Exit For
        Next i
    On Error Goto 0

    If errnum > 0 Then
        ' Do something to handle an epic failure... didn't work even after
        ' 200 tries.
        Err.Raise errnum, errdesc
    End If

End With 
```

我不得不对`Worksheet.PasteSpecial`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-14T04:55:31.527

我在 Windows 10（64 位）、Word 2003 中也遇到过同样的错误。我用过时错误消失了：

```
.Clear 
```

即已经清除了DataObject，就在之前：

```
.SetText 
```

编辑：也适用于 Windows 10（32 位）、Word 2013

# ruby-on-rails - Nokogiri 无法退出打开网址

> ID：11554071
> 
> 赞同：0
> 
> 时间：2012-07-19T04:44:26.110
> 
> 标签：ruby-on-rails, nokogiri, irb, pry

当我尝试 pry 时（这是 IRB 或 rails 控制台的替代品）

```
doc = Nokogiri::HTML(open(url)) 
```

它读取文件（尽管我必须一直按空格键）。然而，最后，它说

```
(END) 
```

它不会将命令行返回给我。

我需要做什么才能退出并返回提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:14:04.603

键入`q`以退出较少的查看器。Nokogiri::HTML 的结果太长，因此您会看到绕过 less 命令的结果

# ios - 在通用 iOS 应用程序中打包多个分辨率

> ID：11554072
> 
> 赞同：0
> 
> 时间：2012-07-19T04:44:33.850
> 
> 标签：ios, screen-resolution, high-resolution

我正在 Unity3d 中编写一个 3D iOS 游戏，并且找不到关于为不同设备包含不同纹理大小的完整而直接的答案。

首先，我假设一个真正通用的应用程序需要每个纹理的 3 个版本......（非视网膜 iPhone/iPod 的分辨率低，视网膜 iPhone/iPod 和非视网膜 iPad 的分辨率为 2x，现在为 4x res forretina iPad）我还假设基于苹果定义的命名约定，将应用程序下载到特定设备将仅下载适当的纹理。否则将所有三种分辨率下载到旧的非视网膜手机将包含 95% 的自重。

链接的 Apple 文档说在视网膜设备的纹理文件名中使用“@2x”，以及适用于设备的“~ipad”或“~iphone”。

[https://developer.apple.com/library/ios/documentation/2DDrawing/Conceptual/DrawingPrintingiOS/SupportingHiResScreens/SupportingHiResScreens.html#//apple_ref/doc/uid/TP40010156-CH15-SW8](https://developer.apple.com/library/ios/documentation/2DDrawing/Conceptual/DrawingPrintingiOS/SupportingHiResScreens/SupportingHiResScreens.html#//apple_ref/doc/uid/TP40010156-CH15-SW8)

假设一个 1024x1024 的低分辨率图集文件，并遵循上述命名约定，我们现在必须在每个图像中包含四个文件，但是除了文件名之外，其中两个文件是相同的吗？

例如：

```
(1024 x 1024) myAtlas~iphone.png
(2048 x 2048) myAtlas@2x~iphone.png 
(2048 x 2048) myAtlas~ipad.png 
(4096 x 4096) myAtlas@2x~ipad.png 
```

这个对吗？

我想我的困惑源于能够轻松地为非视网膜 iPad 和视网膜 iPhone/iPod 使用相同的纹理分辨率，因为屏幕分辨率相当相似，但苹果建议的命名约定似乎没有利用这一点。

这将是我在 iOS 上发布的第一个应用程序，也许我完全错过了一些要点？或者也许我的一些假设是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:26:05.667

1.  是的，命名约定没有为 iPhone Retina 和 iPad 非 Retina 提供共享图像的方法。

2.  命名约定仅适用于`UIImage`类和相关 API。虽然您*可以*`UIImage`从/加载 OpenGL ES 纹理`CGImage`，但您绝不需要这样做。随意命名文件，使用`UIDevice`类（或相应的 GL API）来确定屏幕大小，并使用`NSBundle`类自己定位适当的纹理文件。（有关使用 PVR 纹理文件的一些示例，另请参阅 Apple 示例代码站点。）

3.  恐怕您对下载到设备的内容的假设是不正确的。您提交到 App Store的`.ipa`捆绑软件会原封不动地下载到您的用户安装它的任何设备上——如果您提交的通用应用程序包含四种不同设备分辨率的资源，它会在设备上安装所有四组资源，即使三个闲置。

# gcc - 我网站的 GCC 编译器在线版本

> ID：11554073
> 
> 赞同：0
> 
> 时间：2012-07-19T04:44:39.093
> 
> 标签：gcc

我有一个为初学者教授 C 的网站。

我正在尝试拥有一个 C 编译器在线版本，以便用户可以轻松地在线编译他们的代码。

有没有可用的编译器？如果可以的话，哪个是最好的？

我找到了一些编译器，但它们没有从用户那里获取输入的能力，但它们只能显示输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:07:17.243

没有可以直接添加到博客的软件包，因此人们可以在线尝试 C 并查看结果。

您可以提供 gcc 或其他编译器的链接，以便您的读者可以自己尝试。

如果你真的很认真，可以在服务器端创建一个 CGI 脚本：

1.  在沙箱中运行（这对于正确执行至关重要，如果操作不当可能会造成危险）
2.  编译源代码
3.  运行编译后的代码
4.  返回结果

对不起，我不能给你一个简单的答案，但就是这样。

# iphone - 图层的过渡效果

> ID：11554075
> 
> 赞同：0
> 
> 时间：2012-07-19T04:44:42.337
> 
> 标签：iphone, ios, cocos2d-iphone

在 cocos2d for iPhone 中，在一个场景中，如何淡出一层并淡入另一层？

这个想法是我有一个屏幕：

*   一层在顶部具有分页控件（作为带有切换和选择器的菜单项完成）
*   屏幕的其余部分被另一层填充，显示当前页面的内容。

现在，一旦用户单击任何分页控件，我想淡出当前页面的内容层（但保留分页层），并淡入下一页的内容层。这些都是相同的层，它们根据`currentPage`变量从 plist 中提取数据，因此我需要有效地刷新层。

我知道对于场景，调用时`replaceScene`可以指定过渡效果。并以这种方式进行所有工作。但显然，它也会淡出分页控件，这看起来很愚蠢。那么它是如何对图层起作用的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:24:11.657

嗯 .... 使用 CCLayerColor （它实现 CCRGBAProtocol 协议），淡入淡出将传播到其中的任何对象。然后做这样的事情：

```
-(void) buttonTouchedCallBack{
    id out = [CCFadeTo actionWithDuration:.35 opacity:0];
    id callFunc = [CCCallFunc actionWithTarget:self selector:@selector(changeContent)];
    id in = [CCFadeTo actionWithDuration:.35 opacity:255];
    id enableMenus = [CCCallFunc actionWithTarget:self selector:@selector(layerInView)];

    _menu.isTouchEnabled=NO;
    [_contentLayer stopAllActions];
    [_contentLayer runAction:[CCSequence actions:out,callFunc,in,enableMenus,nil]];
}

-(void) changeContent{
    // do your stuff here
}

-(void) layerInView{
    _menu.isTouchEnabled=YES;
    // and anything else that is appropriate
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:36:01.487

我认为你可以使用[`runAction:`](http://www.cocos2d-iphone.org/api-ref/2.0.0/interface_c_c_node.html#a5d6d868cc1a0ba72820a055b05661aa5)let your `CCLayer`s do [`CCAction`](http://www.cocos2d-iphone.org/api-ref/2.0.0/interface_c_c_action.html)s （例如[`CCFadeIn`](http://www.cocos2d-iphone.org/api-ref/2.0.0/interface_c_c_fade_in.html)and [`CCFadeOut`](http://www.cocos2d-iphone.org/api-ref/2.0.0/interface_c_c_fade_out.html)），这样你就可以实现你想要的。

您将需要两个“内容层”来分别保存当前页面（页面 A）和下一页（页面 B）。在两个内容层的淡入淡出操作结束后，您可以清理页面 A。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T17:06:41.117

我写了一个小函数，它将使用块来提供与场景转换相同的淡入淡出效果，但针对单个图层。只需传入您要覆盖的图层、淡出和淡入的速度、要淡入的颜色以及您希望在隐藏图层时执行的块。

```
-(void)fadeLayer:(CCLayer*)layer withOutDuration:(float)outTime inDuration:(float)inTime color:(ccColor3B)color withBlock: (void(^)())block
{
    CGSize winSize = [[CCDirector sharedDirector] winSize];
    CCLayerColor *toplayer = [CCLayerColor layerWithColor:ccc4(color.r, color.g, color.b, 0) width:winSize.width height:winSize.height];

    [layer addChild:toplayer z:INT_MAX];

    [toplayer runAction:
      [CCSequence actions:
      [CCFadeIn actionWithDuration:outTime],
      [CCCallBlock actionWithBlock:block],
      [CCFadeOut actionWithDuration:inTime],
      [CCCallBlockN actionWithBlock:^(CCNode *node) {
         [node removeFromParentAndCleanup:YES];
      }],
  nil]];
} 
```

# android - 以编程方式设置 textCursorDrawable

> ID：11554078
> 
> 赞同：43
> 
> 时间：2012-07-19T04:45:01.773
> 
> 标签：android, android-edittext

如果我`EditText`在 XML 中添加一个，我可以设置`textCursorDrawable="@null"`：

```
<EditText
    android:id="@+id/txtE3Casecode4"
    android:layout_width="30dp"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:background="#C7C7C5"
    android:textCursorDrawable="@null"
    android:ems="10"
    android:inputType="number"
    android:maxLength="2"
    android:text="01"
    android:textColor="#000000" /> 
```

现在我`EditText`用Java画一个。我要设置`android:textCursorDrawable="@null"`。

```
LinearLayout.LayoutParams paramtext = new LinearLayout.LayoutParams(
    LinearLayout.LayoutParams.FILL_PARENT,
    LinearLayout.LayoutParams.WRAP_CONTENT);
EditText txtOther = new EditText(this);
txtOther.setLayoutParams(paramtext);
txtOther.setBackgroundColor(Color.WHITE);
txtOther.setTextColor(Color.BLACK);
txtOther.setId(99999);
// txtOther.setCursorDrawable ? 
```

怎么设置？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2014-10-24T08:33:22.923

2019 年更新：~~没有用于设置可绘制光标的公共 API。~~有关 29 及更高版本上可用的 API，请参阅[https://stackoverflow.com/a/57555148/253468](https://stackoverflow.com/a/57555148/253468)，在此之前，您需要有条件地使用反射，如下所述。

在 API 29 之前，您可以使用反射以编程方式设置它。该字段`mCursorDrawableRes`没有更改，因此这应该适用于所有设备，除非制造商更改了某些内容或稍后更改。

## 使用反射设置光标：

```
EditText yourEditText = new EditText(context);

...

try {
    // https://github.com/android/platform_frameworks_base/blob/kitkat-release/core/java/android/widget/TextView.java#L562-564
    Field f = TextView.class.getDeclaredField("mCursorDrawableRes");
    f.setAccessible(true);
    f.set(yourEditText, R.drawable.cursor);
} catch (Exception ignored) {
} 
```

在您的应用程序中定义一个可绘制的光标：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <solid android:color="#ff000000" />

    <size android:width="1dp" />

</shape> 
```

* * *

## 另一种方法：

您还可以使用以下方法设置光标颜色：

```
public static void setCursorDrawableColor(EditText editText, int color) {
    try { 
        Field fCursorDrawableRes = TextView.class.getDeclaredField("mCursorDrawableRes");
        fCursorDrawableRes.setAccessible(true);
        int mCursorDrawableRes = fCursorDrawableRes.getInt(editText);
        Field fEditor = TextView.class.getDeclaredField("mEditor");
        fEditor.setAccessible(true);
        Object editor = fEditor.get(editText);
        Class<?> clazz = editor.getClass();
        Field fCursorDrawable = clazz.getDeclaredField("mCursorDrawable");
        fCursorDrawable.setAccessible(true);
        Drawable[] drawables = new Drawable[2];
        drawables[0] = editText.getContext().getResources().getDrawable(mCursorDrawableRes);
        drawables[1] = editText.getContext().getResources().getDrawable(mCursorDrawableRes);
        drawables[0].setColorFilter(color, PorterDuff.Mode.SRC_IN);
        drawables[1].setColorFilter(color, PorterDuff.Mode.SRC_IN);
        fCursorDrawable.set(editor, drawables);
    } catch (Throwable ignored) {
    } 
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-08-19T10:43:00.840

[Android Q 禁止](https://developer.android.com/preview/non-sdk-q)对可绘制的光标使用反射。

相反，有一个新的[setTextCursorDrawable API](https://developer.android.com/reference/android/widget/TextView#setTextCursorDrawable(int)) ，我们可以使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T08:15:40.323

答案是------------> 这是无法实现的。

其实我在工作中也遇到过这个问题，但是查了google的doc和source code之后，我喜欢你不能在java代码中设置这个属性。

在`TextView`课堂上你可以找到下面的代码

```
case com.android.internal.R.styleable.TextView_textCursorDrawable:
    mCursorDrawableRes = a.getResourceId(attr, 0);
    break; 
```

但是该方法`textCursorDrawable()`只存在于 中`R.attr`，如果你想设置这个属性，你只能通过在 XML 文件中包含一个 editText 来调用下面的构造方法。

```
public EditText(Context context, AttributeSet attrs) {
    this(context, attrs, com.android.internal.R.attr.editTextStyle);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-09T20:36:31.037

如果您使用[AppCompat 库并且您的 Activity 扩展了 AppCompatActivity，您可以使用](https://developer.android.com/topic/libraries/support-library/packages.html#v7-appcompat)**colorAccent**的 XML 样式设置文本光标的颜色（对于所有 EditText）：

```
<style name="AppTheme" parent="@style/Theme.AppCompat">
    <item name="colorAccent">#FF4081</item>
</style> 
```

这适用于 Android 5+，并且向后兼容从 Android 4.4 (API 19) 到 Android 4.0 (API 14) 的旧 Android 版本。注意：如果您使用的是 AutoCompleteTextView，请确保它的任何自定义子类都扩展了 AppCompatAutoCompleteTextView，否则文本光标样式将不起作用。

另请参阅本指南，了解如何将颜色强调（色调）应用于对话框按钮：[Android v21 Theme.Appcompat 颜色强调被忽略，对话框上没有填充](https://stackoverflow.com/questions/26608390)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-12T03:45:19.893

这对我有用

```
 public void setCursorDrawable(@DrawableRes int resId) {
        if (mEditText == null)
            return;
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q) {
            mEditText.setTextCursorDrawable(resId);
            return;
        }
        try {
            @SuppressLint("SoonBlockedPrivateApi") Field field = TextView.class.getDeclaredField("mCursorDrawableRes");
            field.setAccessible(true);
            field.set(mEditText, resId);
        } catch (Throwable throwable) {
            Logger.e(TAG, throwable);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-11-30T04:50:40.427

你应该`TextInputLayout`在 2020 年使用你，它适用于所有设备

```
<com.google.android.material.textfield.TextInputLayout
    style="@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox.Dense"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginStart="30dp"
        android:layout_marginTop="26dp"
        android:layout_marginEnd="30dp"
        android:theme="@style/TextInputLayoutAppearance"
        app:endIconMode="clear_text"
        app:hintEnabled="false">

        <com.google.android.material.textfield.TextInputEditText
            android:id="@+id/gallery_search"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:fontFamily="@font/inter_medium"
            android:hint="Hint here"
            android:inputType="text"
            android:cursorVisible="true"
            android:focusable="true"
            />

    </com.google.android.material.textfield.TextInputLayout> 
```

这是主要的不要忘记添加这个，您可以从这里更改光标的颜色

```
<style name="TextInputLayoutAppearance" parent="Widget.Design.TextInputLayout">
        <item name="colorControlNormal">@color/black</item>
        <item name="colorControlActivated">@color/black</item>
        <item name="colorControlHighlight">@color/blue</item>
    </style> 
```

有关 TextInputLayout 的更多信息，请访问此处：- [https://material.io/develop/android/components/text-fields](https://material.io/develop/android/components/text-fields)

# python - PYPATH 使用 Python 安装 Gaphor 时没有注册表项错误

> ID：11554079
> 
> 赞同：2
> 
> 时间：2012-07-19T04:45:02.203
> 
> 标签：python

我已经从[http://sourceforge.net/projects/gaphor](http://sourceforge.net/projects/gaphor)下载了 setup exe 。我已经安装了 Python2.7、PyGTK（完整包）。所以当我开始安装时，我取消选择 Python2.5、PyGtk 等（因为我已经有了 python2.7）。但是当我开始安装时，我得到了错误：

> PyGtkGUI 无法安装，因为在此系统上找不到 Python。PYPATH = 未找到注册表项。

注意：我可以继续，实际上我下载了源代码并构建它并从那里开始工作。但是我想知道报告的原始问题的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:17:34.493

你必须添加一个环境变量

[http://www.itechtalk.com/thread3595.html](http://www.itechtalk.com/thread3595.html)

并使用官方网站wi​​ki：

[https://github.com/amolenaar/gaphor/wiki/Custom-Python-Installation-Location](https://github.com/amolenaar/gaphor/wiki/Custom-Python-Installation-Location)

# c++ - STL deque pop_front() 会自动回收内存吗？

> ID：11554083
> 
> 赞同：1
> 
> 时间：2012-07-19T04:46:05.420
> 
> 标签：c++, memory-leaks, stl, vector, deque

我有一个程序，我在其中收集一些数据并将它们临时存储在双端队列中

```
 typedef vector<float> floatVector;
    ...
    floatVector * currRecord;
    deque<floatVector *> data;
    ...
    ...

    for (...)
    {
        ...
        currRecord = new floatVector(10); 
        data.push_back(currRecord);
    } 
```

稍后，我想将数据保存到文件

```
 while (data.size() > 0) 
    {
        for (int i=0; i < 10; i++) 
        {
            fprintf(fPtr, "%lf\t", data[0]->at(i) );
        }
    fprintf(fPtr,"\n");
    data.pop_front();
    } 
```

所以，我的问题是，这个程序会导致内存泄漏吗？我使用`new`运算符为每个`currRecord`向量分配内存。deque`pop_front`函数会自动回收内存吗？或者我需要把

```
 delete [] data[0] 
```

前

```
 data.pop_front(); 
```

? 另外，如果`data`是向量而不是双端队列，一切都会一样吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T05:42:09.390

你有一个`std::deque`指针，每个指针都拥有一个资源（内存）。调用`pop_front()`将从容器中删除指针，但不会释放指针拥有的内存。由于您分配内存，因此`new`您还必须调用`delete`. 如果容器是`std::vector`.

如果您更改为一个`std::deque<floatvector>`或一个智能指针容器，例如`std::shared_ptr`.

`[]`请注意，您在调用时没有使用，因此请使用没有方括号的`new`纯文本。`delete`

# android - 通过单击小部件开始活动

> ID：11554085
> 
> 赞同：25
> 
> 时间：2012-07-19T04:46:31.190
> 
> 标签：android, android-activity, click, widget

我是 Android 编程的新手，我尝试做一个小部件，它能够从 ISP 获取一些关于我的帐户的数据。有很多未知的事情怎么做，但我做了一些事情——我有一个带有配置活动的小部件，用户应该在其中输入登录名和密码。小部件将数据存储在 SharedPerferences 中，当需要更新小部件时，我使用服务启动 AsyncTask 以从 ISP 获取帐户数据。现在我想通过单击小部件来启动一个活动。我已经尝试了在此站点上找到的所有建议，并且小部件无法启动活动。我的小部件基于放置在这里的另一个小部件[https://github.com/Arturus/MetrikaWidget](https://github.com/Arturus/MetrikaWidget)。我不明白我应该通过单击我的小部件来更改什么以及在哪里开始活动。谢谢。

更新：我的更新功能，我建议我应该放置 PendingIntent

```
@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds)
{
    Log.d(TAG, "onUpdate");

    for (int appWidgetId : appWidgetIds)
    {
        updateAppWidget(context, appWidgetManager, appWidgetId);
    }

    /* An updateAppWidget functions looks like as:

    Intent intent = new Intent(context, UpdateWidgetService.class);
    intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);
    context.startService(intent);
    */

    Intent intent = new Intent(context, DetailedStatActivity.class);
    PendingIntent pendingIntent = PendingIntent.getService(context, 0, intent, 0);

    RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.layout);

    views.setOnClickPendingIntent(R.id.layout, pendingIntent);

    ComponentName componentName = new ComponentName(context.getPackageName(), WidgetProvider.class.getName());

    appWidgetManager.updateAppWidget(componentName, views);
} 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-19T05:01:55.350

在您的小部件类 的`onUpdate()`方法中使用此代码段：`AppWidgetProvider`

```
@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widgetlayout);
    Intent configIntent = new Intent(context, Activity.class);

    PendingIntent configPendingIntent = PendingIntent.getActivity(context, 0, configIntent, 0);

    remoteViews.setOnClickPendingIntent(R.id.widget, configPendingIntent);
    appWidgetManager.updateAppWidget(appWidgetIds, remoteViews);
} 
```

这`widgetlayout`是您的小部件布局的名称，`R.id.widget`它是父布局 ID。

**编辑**：
现在，我看到了您添加到问题中的代码。您会这样做：

```
PendingIntent.getActivity(context, 0, configIntent, 0); 
```

（开始的活动）而不是

```
PendingIntent.getService(...); 
```

尝试开始服务。祝你好运。

参考资料：
[doityyourselfandroid.com](http://blog.doityourselfandroid.com/2011/05/24/developing-android-home-screenwidgets/)

[helloandroid.com](http://www.helloandroid.com/files/xmaswidget/android_howto-hellowidget.pdf)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-19T05:04:47.040

```
Intent inet = new Intent(your_action);
inet.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
PendingIntent pIntentNetworkInfo = PendingIntent.getActivity(context, 2, 
            inet, Intent.FLAG_ACTIVITY_NEW_TASK);
remoteViews.setOnClickPendingIntent(you_component_when_the_user_pressing_this_activity_should_start, pIntentNetworkInfo); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T04:55:17.927

我不知道“从另一个小部件创建小部件”。这是我不知道的，但我建议您构建自己的小部件。

除此之外，从小部件调用活动应该使用[PendingIntent](http://developer.android.com/reference/android/app/PendingIntent.html)

这是一个简单的例子

```
Intent iSetting = new Intent(this, MyConfig.class);
PendingIntent piSetting = PendingIntent.getActivity(this, 0, iSetting, 0);
views.setOnClickPendingIntent(R.id.IdComponent, piSetting); 
```

或者您可能需要查看[此链接](https://stackoverflow.com/questions/1937236/launching-activity-from-widget)和[此链接](http://developer.android.com/guide/topics/appwidgets/index.html)

# r - read.zoo 有效，但 as.xts 因“当前不受支持的数据类型”而失败

> ID：11554087
> 
> 赞同：2
> 
> 时间：2012-07-19T04:46:35.653
> 
> 标签：r, xts

我有一个每日柱的 csv 文件，只有两行：

```
"datestamp","Open","High","Low","Close","Volume"
"2012-07-02",79.862,79.9795,79.313,79.509,48455 
```

（该文件是一个 xts 被转换为 data.frame 然后传递给`write.csv`）

我用这个加载它：

```
z=read.zoo(file='tmp.csv',sep=',',header=T,format = "%Y-%m-%d") 
```

如图所示，这很好`print(z)`：

```
 Open   High    Low    Close  Volume
2012-07-02 79.862 79.9795 79.313 79.509 48455 
```

但随后`as.xts(z)`给出：*coredata.xts(x) 中的错误：当前不支持的数据类型*

这是`str(z)`输出：

```
‘zoo’ series from 2012-07-02 to 2012-07-02
  Data:List of 5
 $ : num 79.9
 $ : num 80
 $ : num 79.3
 $ : num 79.5
 $ : int 48455
 - attr(*, "dim")= int [1:2] 1 5
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:5] "Open" "High" "Low" "Close" ...
  Index:  Date[1:1], format: "2012-07-02" 
```

到目前为止，我已经确认不是 4 列`num`和 1 列是`int`，因为即使在删除 Volume 列后我仍然会收到错误消息。但是，那么，该错误消息可能在谈论什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:49:12.103

正如塞巴斯蒂安在评论中指出的那样，问题出在单行上。具体来说，当 read.zoo 读取单行时 coredata 是一个列表，但是当有 2 行以上时，coredata 是一个列表（矩阵？）。

我用以下内容替换了对 read.zoo 的调用，无论是 1 行还是 2 行以上，它都可以正常工作：

```
d=read.table(fname,sep=',',header=T)
x=as.xts(subset(d,select=-datestamp),order.by=as.Date(d$datestamp)) 
```

# javascript - 循环读取xml文件的所有节点

> ID：11554088
> 
> 赞同：0
> 
> 时间：2012-07-19T04:46:52.210
> 
> 标签：javascript

我有这样的xml文件

```
 <bookstore>
      <book category="cooking">
      <title lang="en">Everyday Italian</title>
      <author>Giada De Laurentiis</author>
      <year>2005</year>
      <price>30.00</price>
      </book>
      <book category="children">
      <title lang="en">Harry Potter</title>
      <author>J K. Rowling</author>
      <year>2005</year>
      <price>29.99</price>
      </book>
      <book category="web" cover="paperback">
      <title lang="en">Learning XML</title>
      <author>Erik T. Ray</author>
      <year>2003</year>
      <price>39.95</price>
     </book>
</bookstore> 
```

我想读取这个xml的所有值。即我需要所有节点的值。是否可以在不使用服务器端脚本语言的情况下读取所有节点的值。我用来读取xml所有标题的代码是下面给出。

```
<script type="text/javascript">
        function loadXMLDoc()
        {
        //var item = document.getElementById('search').value;
        var request = new XMLHttpRequest();
        var url = "http://saletrack.cynere.net/test2.xml";
        request.open("GET",url, true);
        request.send();
        request.onreadystatechange = function() {
        if (request.readyState == 4) {
            if (request.status == 200 || request.status == 0) {
                var myxml = request.responseXML;
                var theHTML = '';
                var x = myxml.getElementsByTagName("title");
                for (var i = 0; i < x.length; i++) {
                var y = x[i].childNodes[0].nodeValue;
                theHTML += ['<div class="result"',
                '<div ul="content">',
                '<li><h3>'+y+'</h3></li>',
                '</ul>',
                '</div>'].join('');
                    }
            }
        }
        document.getElementById('list').innerHTML = theHTML;
        }
        }

        document.addEventListener("deviceready", loadXMLDoc, false);

    </script> 
```

提前致谢..........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:56:23.670

你能用jquery代替核心javascript吗？我正在使用以下代码来显示本地 xml 文件内容。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
//Code Starts
$(document).ready(function(){
  $("#list").append("<ul></ul>");
  $.ajax({
    type: "GET",
    url: "test2.xml",
    //url: "test2.xml",
    crossDomain: true,
    dataType: "xml",
    success: function(xml){
    $(xml).find('book').each(function(){
      var sTitle = $(this).find('title').text();
      var author = $(this).find('author').text();
      var year = $(this).find('year').text();
      var price = $(this).find('price').text();
      $("<li></li>").html(sTitle + ", " + author + ", " + year + ", " + price ).appendTo("#list ul");
    });
  },
  error: (function(xhr, ajaxOptions, thrownError) {
    ///show error message ie. "Status Code: ("+xhr.status+")<br>Description: "+xhr.statusText
    alert("An error occurred while processing XML file. Status Code: ("+xhr.status+")<br>Description: "+xhr.statusText );
  })
  });
});
</script> 
```

html代码：

```
<body>
<div id="list"></div>
</body> 
```

输出是：

*   日常意大利语，Giada De Laurentiis，2005，30.00
*   哈利·波特，J·K·罗琳，2005，29.99
*   XQuery Kick Start，James McGovernPer BothnerKurt CagleJames LinnVaidyanathan Nagarajan，2003，49.99
*   学习 XML，Erik T. Ray，2003，39.95

# php - PHP - 浏览器返回按钮使网站崩溃

> ID：11554089
> 
> 赞同：0
> 
> 时间：2012-07-19T04:46:54.740
> 
> 标签：php, back-button

我是编程新手。我有一个 PHP 网站，其工作方式如下

索引页面 - 搜索结果 - 显示产品

站点用户在索引页面上输入搜索条件，页面被发布到搜索结果页面。从那里，站点用户单击将他带到产品详细信息的产品 href。到这里为止一切正常。

当用户单击浏览器的 BACK 按钮时会出现此问题。搜索结果页面出现完全崩溃，用户必须按 F5/浏览器刷新重新提交。我可以用来避免这种崩溃的任何想法/技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:49:14.997

一个想法是使用 GET 作为搜索表单的方法，而不是 POST（显然你正在使用）。这样，即使返回浏览器历史记录，您的服务器也可以重新提供其搜索结果。

您将需要以下内容：

*   在您的搜索表单中更改`method="post"`为`method="get"`
*   将`$_POST`与搜索表单数据相关的所有内容更改为`$_GET`您的搜索表单处理 php 文件。

当然，它不适用于您的特定用例。这只是一个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T04:50:32.680

当浏览器返回来自 POST 某些数据的页面时，浏览器通常需要重新 POST 数据才能返回相同的页面。由于这有时会很糟糕（例如重新发布订单），许多浏览器要求用户强制刷新并发出警告。

您通常可以使用 GET 而不是 POST 表单来避免这种情况。

# c - 为什么释放内存时这个函数总是崩溃？

> ID：11554091
> 
> 赞同：1
> 
> 时间：2012-07-19T04:47:07.727
> 
> 标签：c, winapi, memory-management

```
int gb2Utf8(const char* source, int sourceLen, void *target, int targetLen)
{
    int result = 0;
    int bufLen = strlen(source) * 2;
    wchar_t *buffer = (wchar_t *)malloc(bufLen);
    if (!buffer)
    {
        result = 1;
        goto RETURN;
    }

    //GB18030 code page: 54936
    int m2wResult = MultiByteToWideChar(54936, MB_ERR_INVALID_CHARS, source, -1, buffer, bufLen);
    if (!m2wResult)
    {
        result = 2;
        goto RETURN;
    }

    int w2mResult = WideCharToMultiByte(CP_UTF8, WC_ERR_INVALID_CHARS, buffer, -1, (char *)target, targetLen, NULL, NULL);
    if (!w2mResult)
    {
        result = 3;
        goto RETURN;
    }

    RETURN:
    free(buffer);
    return result;
} 
```

当程序运行到 时`free(buffer)`，它会崩溃，但我不知道为什么。
如果修改`bufLen`成一个常数值，或者删除`MultiByteToWideChar`函数，它不会崩溃，我也不知道为什么。这是崩溃时的调用堆栈：

> msvcr100d.dll!_free_dbg_nolock(void * pUserData, int nBlockUse) 第 1376 行 + 0x3b 字节 C++
> msvcr100d.dll!_free_dbg(void * pUserData, int nBlockUse) 第 1265 行 + 0xd 字节 C++
> msvcr100d.dll!free(void * pUserData) 第 49 行+ 0xb 字节 C++
> New.exe!gb2Utf8(const char * source, int sourceLen, void * target, int targetLen) 第 156 行 + 0xc 字节 C++
> New.exe!wWinMain(HINSTANCE__ * hInstance, HINSTANCE__ * hPrevInstance, wchar_t * lpCmdLine, int nCmdShow) 第 29 行 + 0x11 字节 C++
> New.exe!__tmainCRTStartup() 第 547 行 + 0x2c 字节 C
> New.exe!wWinMainCRTStartup() 第 371 行 C
> kernel32.dll!7509339a()
> [下面的帧可能不正确和/或丢失，否为 kernel32.dll 加载的符号]
> ntdll.dll!77979ef2()
> ntdll.dll!77979ec5()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T04:55:13.073

也许对于缓冲区，您也需要为 NULL 终止符分配内存：

```
int bufLen = strlen(source) * 2 + 2; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T04:54:44.887

您不需要自己假设缓冲区大小，当您将 0 作为最后一个参数传递给函数`MultiByteToWideChar`时，它会返回缓冲区大小，包括终端空字符。然后您可以使用返回的大小创建缓冲区并使用它。

试试这个

```
int wchars_num =  MultiByteToWideChar( CP_UTF8 , 0 , source , -1, NULL , 0 );
wchar_t* buffer = (wchar_t *)malloc(wchars_num);

MultiByteToWideChar( CP_UTF8 , 0 , source  , -1, buffer , wchars_num );
// do whatever with buffer 
free(buffer) ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T04:54:35.157

for的最后一个参数`MultiByteToWideChar()`是宽**字符**缓冲区中的字符数，而不是字节数。您传递字节数，该函数可能会写入实际缓冲区并`free()`在调试模式下编译时检查该缓冲区。

正如 Jeeva 所提到的，调用此函数的正确方法是使用 NULL 输出缓冲区调用它一次，分配具有请求大小的缓冲区，然后再次调用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T05:12:45.347

首先，让我们看一下：

```
if (!buffer)
{
    result = 1;
    goto RETURN;
} 
```

如果`malloc`函数失败，它返回 NULL，然后`buffer`被赋值为 NULL，然后程序转向标签`RETURN`由于`goto RETURN`，然后`free`函数被调用并且`free(buffer)`意味着 to `free(NULL)`，这是一种非法行为。

其次，通过声明`int bufLen = strlen(source) * 2;`，您假设它`bufLen`始终为正数，但是，如果 strlen(source)==0，它将为 0。malloc(0) 是 ANSI-C 中未定义的行为，因此不同的平台可能会返回不同的结果。

此外，您最好仔细查看函数的用法`MultiByteToWideChar`。这是 MSDN 中的链接：[MultiByteToWideChar 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072%28v=vs.85%29.aspx)

# c# - 计算一个位置与许多其他位置之间的接近度

> ID：11554095
> 
> 赞同：3
> 
> 时间：2012-07-19T04:47:32.923
> 
> 标签：c#, php, math, geolocation, proximity

我有一个包含纬度和经度列表的数据库

```
-DeviceName
-Latitude
-Longitude 
```

鉴于我当前设备的纬度和经度，我想获取数据库列表中距离/接近 X 公里的所有设备。

如何计算我的位置与其他位置的距离？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:00:55.413

我想你想看看这个[惊人的演示](http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL)。它会告诉你如何使用（并解释加分！）[haversine 公式](http://en.wikipedia.org/wiki/Haversine_formula)来计算地球表面的距离，考虑曲率以及如何避免数据库查询中的一些常见错误等。他的数据集几乎就是什么你的是 - 项目，经度和纬度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:21:33.463

如果您追求原始代码，这应该可以帮助您：

```
private static Double rad2deg(Double rad) {
    return (rad / Math.PI * 180.0);
}

private static Double deg2rad(Double deg) {
    return (deg * Math.PI / 180.0);
}

private const Double kEarthRadiusKms = 6376.5;

private static Double CalculateDistance(Double latitude1, Double longitude1, Double latitude2, Double longitude2) {
    double theta = longitude1 - longitude2;
    double dist = Math.Sin(deg2rad(latitude1)) * Math.Sin(deg2rad(latitude2)) + Math.Cos(deg2rad(latitude1)) * Math.Cos(deg2rad(latitude2)) * Math.Cos(deg2rad(theta));
    dist = Math.Acos(dist);
    dist = rad2deg(dist);
    dist = dist * 60 * 1.1515;
    dist = dist * 1.609344;
    return (dist);
} 
```

# sql - 如何制定截止时间

> ID：11554096
> 
> 赞同：2
> 
> 时间：2012-07-19T04:47:38.023
> 
> 标签：sql, sql-server, sql-server-2000

使用 SQL Server 2000

`01:00:00`我想像or `01:30:00`or `02:00:00`or or `02:30:00`or这样的时间来四舍五入`03:00:00`

表格1

```
ID TIME

001 02:15:00 'Format (HH:mm:ss)
002 02:17:00
003 02:47:00
004 03:00:00
005 02:00:00
.... 
```

`Time`列的数据类型是`nvarchar`

健康）状况

```
02:00:00 to 02:15:00 - I want to show 02:00:00 only
02:16:00 to 02:44:00 - I want to show 02:30:00 only
02:45:00 to 03:00:00 - I want to show 03:00:00 only
... 
```

表 1 的预期输出

```
ID TIME

001 02:00:00 'Less than or equal to 2.15 mins so it should change to 02 hrs
002 02:30:00 'Less than 2.44 mins so it should change to 2.30 mins
003 03:00:00 'Greather than 2.45 mins so it should change to 03 hrs
004 03:00:00 'Same
005 02:00:00 'Same
.... 
```

如何查询此条件

需要查询帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:27:29.957

试试这个：

```
CREATE TABLE #time(ID int, TIME nvarchar(25))

INSERT INTO #time
VALUES(001,'02:15:00'),
(002,'02:17:00'),
(003,'02:47:00'),
(004,'03:00:00'),
(005,'02:00:00')

SELECT time,CASE  
             WHEN CAST(SUBSTRING(time,CHARINDEX(':',time,1)+1,2) as int) <= 15 then LEFT(time,2)+':00:00'
             WHEN CAST(SUBSTRING(time,CHARINDEX(':',time,1)+1,2) as int) >15 and CAST(SUBSTRING(time,CHARINDEX(':',time,1)+1,2) as int) <=45 then LEFT(time,2)+':30:00' 
             WHEN CAST(SUBSTRING(time,CHARINDEX(':',time,1)+1,2) as int) >45 and CAST(SUBSTRING(time,CHARINDEX(':',time,1)+1,2) as int) <=59 then '0'+cast((cast(LEFT(time,2) as int)+1) as varchar(3))+':00:00' 
             END
FROM #time 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:54:21.920

使用以下

```
CREATE FUNCTION [dbo].[RoundTime] (@Time VARCHAR(8), @RoundTo float)
RETURNS VARCHAR(8)
AS
BEGIN
   DECLARE @RoundedTime smalldatetime
   DECLARE @Multiplier float

   SET @Multiplier= 24.0/@RoundTo

   SET @RoundedTime= ROUND(CAST(CAST(CONVERT(varchar,@Time,121) AS datetime) AS float) * @Multiplier,0)/@Multiplier

   RETURN CONVERT(VARCHAR(8),@RoundedTime,108)
END

--select dbo.roundtime('02:47:00',0.5) 
```

**在一个声明中**

```
select CONVERT(VARCHAR(8),dateadd(mi, (datediff(mi,0,'02:47:00')+29)/30*30, 0),108) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T05:32:31.047

```
convert(char(8), dateadd(minute, ((14+datediff(minute, 0, cast(Time as datetime)))/30)*30, 0), 108) as Time 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/75652)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T09:14:35.843

也试试这个

```
select 
    id,
    time,
    convert(varchar(10),dateadd(minute,datediff
        (
        minute,
        case when hours<=15 then -15 when hours>15 then 15  else 0 end,
        time)/30*30,0) ,108)
    as cut_off_time
from
(
    select id,time,
        datepart(minute,cast(time as datetime)) as hours from #time
) as t 
```

# c# - 模型类中的mvc c#缓存

> ID：11554099
> 
> 赞同：0
> 
> 时间：2012-07-19T04:47:58.460
> 
> 标签：c#, asp.net-mvc, caching

我有一个这样的模型

```
public class School{
   public int Id {get;set;}
   public string Name {get;set;}

   static private IEnumerable<School> school;
   static public IEnumerable<School> Schools(ContextDb context){
      if(school != null)
         return school;

      return(school = context.Schools.ToList());
   }
} 
```

现在我有一个使用 ajax 将数据插入表中的页面。问题是当弹出窗口关闭时，我会再次重新生成 Academy.Schools 但由于“学校”变量不为空（或已缓存），它将返回以前的数据而不是刷新的数据（带有新添加的记录。

话虽如此，我如何清空该私有变量，以便触发“return(school = ..);” 在课堂上排队？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:54:56.943

您的模型设计非常奇怪（根据给定的信息，很难提供更好的模型，是某种 ActiveRecord 模式吗？），但是对于当前的设计，您需要一种清空“缓存”的新方法，例如设置`school`为`null`：

```
public class School{
   public int Id {get;set;}
   public string Name {get;set;}

   static private IEnumerable<School> school;
   static public IEnumerable<School> Schools(ContextDb context){
      if(school != null)
         return school;

      return(school = context.Schools.ToList());
   }

   public static void InvalidateSchools()
   { 
       school = null;
   }
} 
```

调用`School.InvalidateSchools`后续调用`School.Schools`后将返回新数据。

# mysql - 规范化中“JOIN”表的索引

> ID：11554100
> 
> 赞同：0
> 
> 时间：2012-07-19T04:48:05.483
> 
> 标签：mysql

我有用户角色。

用户可以有多个角色。我有一张桌子叫`users_roles`.

我有三列 - `id`, `user`, `role`.

`id`是一个自增列。

所以，

1.  `id`由于我从不在代码中使用该列，因此删除该列是个好主意吗？

2.  如果是，那么该表的索引应该是哪一列？还是根本不应该有索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:11:57.333

如果您打算删除“id”字段，那么您将如何在 user 和 user_roles 表之间建立关系。

定义主键总是更好。默认索引是在您定义主键时创建的。它以某种方式提高了性能。

此外，当您定义外键时，也会生成外键索引。因此您的表查询执行将变得更快。

**这是您的第一个答案：** 根据您的要求，目前您可以从 user_roles 表中删除“id”主键，因为它只是用作用户和角色之间的关系表。但是在大多数 PHP 框架中，即使在关系表中删除主键也不是一个好习惯。

**这是您的第二个答案：**如果您要删除主键，那么您将不得不将“用户”和“角色”字段上的索引维护为外键索引。如果您不打算从 user_roles 表中删除主键。然后将为“id”、“user”和“role”字段生成 3 个索引。第一个索引将是主索引，其余两个是foreignKey 索引。

在表上显式定义更多索引也会导致查询执行的一些额外开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:12:24.993

`users_roles`是一个很多很多的链接表。

在 many:many 表上至少有两种常用的主键方法：

*   `users_roles`有自己的代理主键，如这里的情况 ( `users_roles.id`)
*   或者，您创建一个由 (user, role) 组成的复合键，因为用户不应多次处于同一角色。

有很多关于简单键和复合键的讨论，例如[为什么单主键比复合键好？](https://stackoverflow.com/questions/2667988/why-single-primary-key-is-better-than-composite-keys)

请注意，索引和主键是不同的概念。主键是唯一性，索引是性能。（一个表可以有多个索引，但只有一个PK）

如果，正如您似乎在说的那样，没有其他表引用 user_roles，那么您实际上不需要主键。

如果您的`users_roles`表变大，您可能希望在用户列上添加索引，也可能在角色表上添加索引，例如，如果您经常搜索具有特定角色的用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T04:55:24.493

我同意，如果用户是用户 ID，那么您不需要 id 列，用户 ID 可以是您的索引 PK。

如果 user 是用户的名称，那么您将要保留 id，或者创建一个 user_id 以便您可以拥有有效的索引键。

# windows - 将应用程序的屏幕截图保存到位图中

> ID：11554101
> 
> 赞同：0
> 
> 时间：2012-07-19T04:48:07.393
> 
> 标签：windows, screenshot

我正在解决一个问题，我试图将窗口的屏幕截图（包括标题栏和边框）保存到 PNG 文件中。对于 Google Chrome 和 Visual Studio 等某些应用程序，我无法获得使用 Alt + PrintScreen 获得的完整窗口图像。

问题是：

1.  对于谷歌浏览器，我没有得到最小化、最大化和关闭按钮
2.  对于 Visual Studio，我只得到某些部分并且缺少解决方案资源管理器和输出窗口。

我已经确定我使用的句柄是根窗口的句柄

下面是我用来获取位图的代码：

```
hdc = GetDCEx(hwnd, 0, DCX_WINDOW);
hDest = CreateCompatibleDC (hdc);

GetWindowRect (hwnd, &rt);
hBitmap = CreateCompatibleBitmap (hdc, rt.right - rt.left, rt.bottom - rt.top);
SelectObject(hDest, hBitmap);
BitBlt( hDest, 0, 0, rt.right - rt.left, rt.bottom - rt.top, hdc, 0, 0, SRCCOPY); 
```

谢谢， 拉贾

# android - GPS精度计算

> ID：11554107
> 
> 赞同：1
> 
> 时间：2012-07-19T04:49:15.420
> 
> 标签：android

我在 Android 中开发了 GPS 应用程序，它以 20 米的精度返回 gps 值，但我的实际位置距离返回的位置值 20 米。

从这里如何使用返回的位置值和精度值来计算我的原始位置值。

请帮我

谢谢南达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:54:08.317

你不能。精度级别的整个点意味着您保证在 X 距离内。您返回的位置值距离您的实际位置 20 米；精度为20米。这是你能做到的最好的准确性。如果您使用 GPS 与简单的蜂窝塔三角测量相比，您应该获得更好的精度。

编辑：虽然我认为理论上你可以进行多次测量，每次测量都会形成一个 [精度] 半径的圆，并通过这些部分相交的位置缩小范围。但是从单个返回值和准确性来看，没有。

# windows - 在 windows 7 32bit 上安装 posix 可行吗？

> ID：11554108
> 
> 赞同：0
> 
> 时间：2012-07-19T04:49:16.870
> 
> 标签：windows, posix

我正在使用 xampp 1.7，现在想安装 posix。可以在 windows 7 32bit 上安装 posix 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:33:28.553

以下是 Microsoft 为 Windows 7 Ultimate 和 Enterprise 版本提供的内容： [Microsoft Windows 7 和 Windows Server 2008 R2 中基于 UNIX 的应用程序的子系统实用程序和 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=2391)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:51:26.497

Cygwin 为 Windows 提供了一种 POSIX 类型的环境。另一种选择是使用像 VirtualBox（免费）这样的 VM 工具并在虚拟机中运行 linux。

# objective-c - 运行我的应用程序的问题

> ID：11554109
> 
> 赞同：0
> 
> 时间：2012-07-19T04:49:24.030
> 
> 标签：objective-c, xcode, cocoa-touch

我已经完成了我的第一个应用程序，调试器在我的代码中没有显示任何问题，但是一旦我运行程序，它就会暂停并在我的 main.m 文件中显示“线程 1：信号 SIGABRT”错误。当我查看模拟器时，它被卡住并显示两个状态栏一个接一个（灰色样式超过黑色样式）。我根本无法在我的代码中找到错误！我为我的应用程序使用了黑色不透明样式的状态栏。我在`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`应用程序委托的方法中做到了这一点：

```
[application setStatusBarStyle:UIStatusBarStyleBlackOpaque]; 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:58:42.037

啊，我解决了这个问题，我有一个连接到 UIButton 对象之一的插座。但是我已经从我的 viewController 中删除了这个 outlet 定义，但连接仍然存在于 nib 中。我从笔尖上移除了连接，一切正常。

# asp.net - 为什么删除*.dll.refresh 文件没有影响？

> ID：11554110
> 
> 赞同：1
> 
> 时间：2012-07-19T04:49:30.300
> 
> 标签：asp.net, visual-studio-2010

*.dll.refresh 文件告诉 Visual Studio 类库的位置，但每当我删除它时，应用程序仍然在调试模式下工作。

为什么是这样？不需要位置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T04:59:30.430

因为那只是一个指向被引用 DLL 的指针。

它用于将 DLL 复制到*bin*位置，但如果您已经复制了 DLL，则删除*.refresh*文件不会影响 Visual Studio

如果您从*bin*文件夹和 _*.refresh_ 文件中删除 DLL，那么如果您尝试访问引用的 DLL 中定义的类型，则会出现编译错误

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T05:11:52.560

dll.refresh 文件给出了相关 DLL 的路径，以告诉 Visual Studio 在哪里可以找到它。每次添加对项目的引用时都会创建它们。

当您使用不创建标准 Visual Studio 项目文件的项目类型时，它们通常会出现，因为通常引用的 DLL 的路径会在那里。

```
Their role ends once DLL gets loaded in your project. Hence you will not get any error
 when you delete *.dll.refresh files from your project. 
```

# winforms - 在窗口中查找单词

> ID：11554111
> 
> 赞同：0
> 
> 时间：2012-07-19T04:49:49.403
> 
> 标签：winforms, string, find

如何在我搜索的字符串中找到一个单词：

```
myProcess.MainWindowTitle 
```

可以说我想要：

```
if myProcess.MainWindowTitle = something.contains("calc.exe") then 
```

或者

```
 if myProcess.MainWindowTitle = contains.myproccessNAme then 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:52:55.453

[`Process.MainWindowTitle`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.mainwindowtitle.aspx)是一个`string`，所以你可以简单地使用[String.Contains](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)方法：

```
if (myProcess.MainWindowTitle.Contains("calc.exe")) then 
```

# version-control - Xcode 4 版本编辑器从左到右

> ID：11554114
> 
> 赞同：3
> 
> 时间：2012-07-19T04:50:09.163
> 
> 标签：version-control, xcode4

现在，Xcode 4 的版本编辑器在左侧显示我的本地更改，在右侧显示最新修订。将其反转似乎更合乎逻辑，以便稍后的时间点（我的本地更改）在右侧。有没有为此设置的地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:57:09.697

除了描述的“webjprgm”之外没有其他选项 - 通过选择版本手动切换它们。我相信你每次都必须这样做，所以它不会真正让你满意。

我对显示同行的助手也有同样的感觉。我总是有一个分屏，顶部是 .h，底部是 .m，因为这对我来说是合乎逻辑的（它被称为“标题”是有原因的）。它让我烦恼不已，但没有“顶部助理编辑”的选项。

[在http://bugreporter.apple.com](http://bugreporter.apple.com)提交增强请求

# cuda - 用于 SFU 的特殊 CUDA 双精度三角函数

> ID：11554122
> 
> 赞同：1
> 
> 时间：2012-07-19T04:51:05.760
> 
> 标签：cuda, trigonometry

我想知道如何在 CUDA 的内核代码中使用`__cos(x)`（和分别`__sin(x)`）。我在 CUDA 手册中查找了这样一个设备函数，但是当我实现它时，编译器只是说我不能在设备中调用主机函数。

但是，我发现有两个姐妹函数`cosf(x)`，后者在 SFU 上运行，总体上比原始函数`__cosf(x)`快得多。`cosf(x)`编译器当然不会抱怨该`__cosf(x)`功能。

有没有我想念的图书馆？我对这个三角函数有误解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T05:02:54.037

由于 SFU 仅支持某些单精度运算，因此没有双精度 __cos() 和 __sin() 设备函数。有单精度 __cosf() 和 __sinf() 设备函数，以及 CUDA 4.2 编程手册的表 C-4 中详述的其他函数。

我假设您正在寻找标准数学函数 sin() 和 cos() 的双精度版本的更快替代方案？如果需要相同参数的正弦和余弦，则应该使用 sincos() 来显着提升性能。如果 sine 或 cosine 的参数乘以 π，您可能希望使用 sinpi()、cospi() 或 sincospi()，以获得更高的性能。例如，sincospi() 在实现 Box-Muller 算法以生成正态分布的随机数时非常有用。此外，请查看 CUDA 5.0 预览以获得最佳性能（请注意，预览提供 alpha-release 质量）。

# javascript - 有什么更好的方法来优化 javascript？

> ID：11554123
> 
> 赞同：2
> 
> 时间：2012-07-19T04:51:18.150
> 
> 标签：javascript, optimization, frontend

我正在做一个有几个 javascript 文件的 web 项目，发现前端响应有点慢，尤其是在 firefox 上。已经排除了与服务器端相关的因素，所以我得出结论，它一定与我的javascripts有关。
我目前使用 firebug 进行调试，使用 console.log()，或者在这里和那里注释一些代码。
但事实证明这非常耗时！有没有人有其他有效或更好的方法来帮助我？提前致谢。

****** *** ** *** *****下面是占用大部分时间的部分代码，@Bill。Firebug 向“mainTabs”报告了一个未定义的错误。但是当我尝试在加载回调中重新声明 mainTabs 时，它保持不变。******* *** *********

 ****```
var mainTabs = $("#main-tabs").tabs({
    selected: defaultTab,
    cache: true, //set tabs to cache the content
    load: function(event, ui){
            //want to preload the non-active tabs' content
            console.log("mainTbas: "+mainTabs.html());
            mainTabs.tabs("load", ui.index+1);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:53:48.537

Firebug 有一个脚本分析器，您可以使用它来找出问题所在。它在`Console`选项卡下，就在`All`按钮之前。单击`Profile`按钮，然后刷新您的页面（或执行页面上运行缓慢的任何操作）。再次单击该`Profile`按钮以获取一个表格，该表格将告诉您哪些功能花费的时间最多。从那里开始尝试和优化。

对于您的示例代码，您需要先声明 mainTabs。这应该可以工作（至少根据我假设您开始使用[的背景中的 Preload JQuery UI 选项卡）：](https://stackoverflow.com/questions/1724353/preload-jquery-ui-tabs-in-the-background)

```
var mainTabs;  // declare mainTabs first.
mainTabs = $("#main-tabs").tabs({
                selected: defaultTab,
                cache: true, //set tabs to cache the content
                load: function(event, ui){
                    mainTabs.tabs("load", ui.index+1);
                }
            }); 
```****

# android - Android：设备独立像素

> ID：11554126
> 
> 赞同：0
> 
> 时间：2012-07-19T04:51:42.023
> 
> 标签：android, device, pixel, density-independent-pixel

我知道使用 dip 有利于兼容不同的屏幕设备。但我想以 600*800 的 ia 平板电脑为例，其文本字段为 600 dip 适合屏幕。它是否仍然适合 400*320 的屏幕。

# php - facebook like 按钮无法正常工作

> ID：11554129
> 
> 赞同：0
> 
> 时间：2012-07-19T04:52:02.563
> 
> 标签：php, jquery, facebook

我已经集成了 facebook like 按钮的所有代码。但它不能正常工作。

假设我在我的产品详细信息页面上，并且我已将 facebook like 按钮添加到产品图片中。如果用户单击此按钮计数将增加，并且此帖子将在用户的个人资料页面上看到。我的问题是，当我单击此按钮时，计数会适当增加，但是当我在我的 facebook 个人资料页面上看到它时，它会共享我的域链接、标题、描述和图像。而不是我想显示产品 URL、产品标题、产品描述和产品图片。我已经完成了以下代码。

在“head”标签中我写了这段代码

```
<meta property="fb:app_id" content="123456789012345"/>
<meta property="og:title" content="Bliise"/>
<meta property="og:url" content="{$siteroot}/products/{$smarty.get.id1}/{$smarty.get.id2}/products"/>
<meta property="og:image" content="{$siteroot}/image.php?height=500&width=360&image=/product/{$prodDetails.product_image}"/>
<meta property="og:description" content="Bliise"/>
<meta property="og:site_name" content="Bliise"/>
<meta property="og:type" content="Brand"/> 
```

在“body”标签中我写了这段代码

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

＆这是我的 facebook like 按钮的代码

```
<fb:like href="{$siteroot}/products/{$smarty.get.id1}/{$smarty.get.id2}/products" layout="button_count" style="float:left; width:70px; margin:12px 0px 0px 12px;" show_faces="false" width="240" height="40" action="like" colorscheme="light"></fb:like> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:58:47.120

[这](https://developers.facebook.com/tools/debug)将帮助您找到问题

也不要忘记添加：

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml"> 
```

# objective-c - NSManagedObject 的唯一标识符

> ID：11554138
> 
> 赞同：10
> 
> 时间：2012-07-19T04:53:04.807
> 
> 标签：objective-c, core-data, guid

我需要为`NSManagedObject`我创建的一种类型获取唯一标识符。它需要在创建对象后立即可用，永不更改，并且完全独一无二。

这排除了`NSManagedObjectID`, 因为这可以在保存上下文时更改。如果我的对象具有相同的属性，我相信该`-hash`方法可能是非唯一的。

我真的很想避免在实体上创建一个否则无用的 uniqueIdentifier UUID 字段，因为这看起来既浪费又混乱。这里有公认的最佳实践吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-19T08:48:03.953

尝试 的`URIRepresentation`属性`NSManagedObjectID`。这是当前非常独特的 ID，`NSManagerObject`但要小心**，直到** `NSManagedObject` **它没有保存它只给你一个临时 ID**，而不是永久 ID，它们可能会有所不同。*（我之所以这么说，是因为我不知道您想要什么以及如何使用唯一 ID。）*

**更新#1**

这**不仅仅是**一个虚构的唯一 ID，这是每个人的**纯**唯一 URL （就像每个文件都有一个唯一的 URL），使用它们您可以在丢失指针后`NSManagedObject`再次找到原始的。`NSManagedObject`我知道这很难理解，但这就是 the`NSManagedObjectID`及其属性的重点。

[*（如果您不了解 the`CoreData`及其对象的工作原理，则不会对答案投反对票。请阅读更多文档，而不是毫无意义的投反对票。）*]

**更新#2**

根据@NickLocking 评论，我将扩展我上面答案的粗体部分：

**直到** `NSManagedObjectContext` **为新的且仍未保存的** `NSManagedObject` **类保存之前，它只有一个临时的唯一 ID。他们将在第一次保存后获得永久唯一 ID。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T03:54:46.977

最终我决定没有好的方法来做到这一点，所以我只是创建了一个 uniqueIdentifier 字段，我在 awakeFromInsert 上应用了一个 UUID。

保存对象会导致我的应用程序的其他部分，特别是 NSFetchedResultsControllers，在我完成对象之前更新。我简单地尝试了 NSManagedObjectContext 的 gainPermanentObjectIds:withError: 方法，以为它会在不保存上下文的情况下获取对象 ID，但实际上它只是保存了上下文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T15:51:32.927

CoreData 自动提供的唯一唯一标识符是对象 ID，但正如您所注意到的，它在最初创建后会发生变化。但在您想出另一种解决此问题的方法之前，您可能需要考虑在托管对象类中定义如下内容：

```
- (NSManagedObjectID *)permID {
    if ([[self objectID] isTemporaryID]) {
        // Save myself, returning nil if there are errors
    }
    return [self objectID];
} 
```

这种方法无论如何都不是完美的，特别是如果您需要在对象处于有效状态并且可以保存到数据库之前公开永久 ID。但它允许您以一致的方式公开永久 ID，只要在保存对象之前不需要它即可。

# api - 针对 Symfony2 项目中使用的实时服务器进行身份验证

> ID：11554140
> 
> 赞同：1
> 
> 时间：2012-07-19T04:53:38.177
> 
> 标签：api, node.js, authentication, symfony, socket.io

我最近使用不同的精心挑选的技术开始了一个新项目，我的项目构建如下：

该方法是以 API 为中心的，这意味着我正在构建一个网站和一个 iOS 应用程序，它与使用`Symfony2`. 我已经成功地编写了我的 API，并且它运行良好。要访问 API 提供的服务，主要参与者（*网站用户*、*iOS 应用程序用户*和*开发人员*）可以通过多种方式进行身份验证：

*   客户端可以通过网站界面通过登录/密码对获得访问权限，该界面通过 AJAX 直接与 API 通信，以验证提供的凭据并设置会话。因此，当有人登录我们的网站时，他们也可以自动访问 API。

*   开发人员可以通过 API 使用`HTTP-Basic`over进行身份验证`SSL`，这也将生成一个会话并授予他们访问他们被授权调用的服务的权限。

*   *此外，开发人员和客户可以通过Facebook Connect*功能使用他们的 Facebook 帐户访问网站和 API 。这删除了每个参与者必须在我们的网站上创建帐户的步骤。

因此，基本上，凭据是通过`HTTP-Basic`或使用`Facebook Login`功能提供的。

现在我的身份验证系统正在运行并且我的客户能够访问该网站，我希望他们在登录时连接到实时服务器。如果您想要实时服务器管理的位置，就像在 Facebook 或 Google+ 中一样聊天和推送信息。

在这种情况下，我正在使用`Node.js`强大的`socket.io`库来管理处理实时方面的所有内容。当然，实时服务将需要一些凭据来验证用户，因为他通过会话向 Symfony 安全系统进行了身份验证，但没有针对实时服务器进行身份验证。

我一直在考虑的一个解决方案是`PdoSessionStorage`在我的 API（Symfony 端）中使用，并将所有活动会话存储在 MySQL 或 PostgreSQL 等数据库中。这样做，我将能够将 symfony 生成的会话 ID 发送到我的实时服务器，并检查数据库提供的会话 ID 是否正确。如果他是，我会让用户访问我的实时服务器提供的服务，并将他的会话与身份相关联。但我真的不知道这是否是一个好的解决方案，我想要一些更有经验的建议，以及如何处理这个问题。

*`OAuth`注意：由于某些原因，即使它可能是使用单点登录方法解决此问题的解决方案，我也无法实施。*

# python - Python文件移动错误

> ID：11554145
> 
> 赞同：0
> 
> 时间：2012-07-19T04:53:50.317
> 
> 标签：python, windows, file, extract

帮助！我正在编写一个脚本来通过移动具有某些扩展名的文件来组织我的桌面。它似乎工作正常，但是当我让它在我的桌面上松开时，发生了一些奇怪的事情。

因此，我将所有文件复制到动态创建的文件夹中，例如“PDFs”和“IMAGES”，但由于某种原因，当我运行脚本时，它没有创建文件夹而是创建文件，并继续将文件存储在另一个文件中。

我需要让这些人回来，但我不知道该怎么做。顺便说一句，我正在使用 Windows 7。下面是我的代码。任何帮助，将不胜感激。

```
import shutil
import os

pwd = os.getcwd()
working_path = 'C:\\Users\\grayson\\Desktop'
wp = working_path
folders = {'pdf':'PDFS','img':'IMAGES'}

def main():
    create_folders();

    for d in os.walk(wp):
        files = d[2]
        break
    print files

    for filename in files:
        order_file( filename )

def create_folders():
    for fol in folders.keys():
        fol_name = folders[fol]
        if not os.path.isdir(fol_name):
            os.mkdir(fol_name)

def order_file(fname):
    split_name = fname.split('.')
    exten = split_name[len(split_name)-1]

    if exten == 'pdf':
        shutil.move(wp + '\\' + fname, wp + '\\' + folders['pdf'])
    elif exten == 'jpg' or exten == 'png' or exten == 'gif':
        shutil.move(wp + '\\' + fname, wp + '\\' + folders['img'])
    else:
        print 'Sumin else'

main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:25:52.300

这是一个非常尴尬的脚本，用于将文件移动到已排序的目录中。但这是我对出了什么问题的猜测。如果您没有将其`Desktop`作为当前工作目录运行（意味着您在运行脚本时不在此目录中），那么这些文件夹是在其他位置创建的。然后，当您的文件开始移动时，目录不存在，因此它只是将它们作为新文件相互移动。

不幸的是，您无法扭转这种损害。你唯一的希望是你有备份。

让我更详细地解释你的脚本的某些部分......

```
pwd = os.getcwd()
working_path = 'C:\\Users\\grayson\\Desktop' 
```

如果`pwd`与 不同`working_path`，则脚本中的一切都会出错。此外，您应该始终使用正斜杠，即使在 Windows 上也是如此。它有效且更容易构建路径：`working_path = 'C:/Users/grayson/Desktop'`

您的文件夹创建部分：

```
# BEFORE
def create_folders():
    for fol in folders.keys():
        fol_name = folders[fol]
        if not os.path.isdir(fol_name):
            os.mkdir(fol_name) 
```

您不能确保目录实际上是在您的`working_path`变量下创建的。你可以这样写：

```
# AFTER
def create_folders():
    for fol_name in folders.itervalues():
        fol_path = os.path.join(working_path, fol_name)
        if not os.path.isdir(fol_path):
            os.mkdir(fol_path) 
```

那里的权利可能会救你。它会将目录专门放在下面，`Desktop`而不是从您运行脚本的地方。

```
# BEFORE
split_name = fname.split('.')
exten = split_name[len(split_name)-1] 
```

大量输入以获取扩展名。您可以通过以下方式使这更容易：

```
# AFTER
exten = fname.split('.')[-1] 
```

最后，移动文件的部分：

```
# BEFORE
if exten == 'pdf':
    shutil.move(wp + '\\' + fname, wp + '\\' + folders['pdf'])
elif exten == 'jpg' or exten == 'png' or exten == 'gif':
    shutil.move(wp + '\\' + fname, wp + '\\' + folders['img'])
else:
    print 'Sumin else' 
```

您通过添加斜杠来构建路径，并且仅将目标构建到目录名称。如果该目录不存在，它将假定它是一个文件。您应该已将其构建为特定的文件名：

```
# AFTER
src = os.path.join(wp, fname)
key = None

if exten == 'pdf':
    key = 'pdf'
elif exten in ('jpg', 'png', 'gif'):
    key = 'img'

if key:
    shutil.move(src, os.path.join(wp, folders['img'], fname))
else:
    print 'Sumin else' 
```

这样，如果目录不存在，它肯定会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T05:15:54.350

您没有以安全的方式创建目录。

可以猜测，但也许你有以前尝试过的称为 PDFS 等的文件，并且没有创建目录。因此，您将所有图像一个接一个地“重命名”为 IMAGES... 没有回头路。

我希望你事先备份。

# javascript - Javascript 闭包错误

> ID：11554146
> 
> 赞同：0
> 
> 时间：2012-07-19T04:53:57.243
> 
> 标签：javascript, closures, javascript-objects

几天前，我被 Javascript 的关闭错误严重咬伤，但太忙没时间问。我正在尝试使用`jQuery`模板引擎进行以下操作。

```
<ul id="container"></ul>
<script type="text/jq-tmpl" id="myTmpl">
  <li>
    <span style="background:#fafafa">X:${X}</span>
    <span style="background:#ababab">Y:${Inner.Y}</span>
    <span style="background:#9a9a9a">Z:${Inner.Z}</span>
  </li>
</script>

function OuterObject(x,y,z){
  this.X = x;
  this.Inner = InnerObject(y,z);
}

function InnerObject(y,z){
  this.Y=y;
  this.Z=z;
}

$(function(){
  var l=[];
  l.push(OuterObject(1,"One","inner-1"));
  l.push(OuterObject(2,"Two","inner-2"));
  $("#myTmpl").tmpl(l).appendTo("#container");
}); 
```

问题是它显示`inner-2`了`Two`两个项目。我也试过这样：

```
var a=OuterObject(1,"One","inner-1");
l.push(a);
var b=OuterObject(2,"Two","inner-2");
l.push(b); 
```

但是都是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:01:58.480

调用构造函数时，您似乎需要使用“new”。

例如`new Outerobject(...)`和`new InnerObject(...)`

否则，该`this`对象将不会被返回。

# xslt - 如何在 Tomcat 中设置 XSLT 2.0？

> ID：11554147
> 
> 赞同：2
> 
> 时间：2012-07-19T04:54:00.720
> 
> 标签：xslt, tomcat, xslt-2.0

现在我正在尝试使用 Tomcat 设置 XSLT 2.0。那可能吗？请指导我。

问候

卡西克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:29:12.730

只需将 saxon9he.jar 复制到 Web 应用程序的 lib 目录中，即可开始使用。如果您想使用 Saxon Enterprise Edition，请安装 saxon9ee.jar 以及来自 Saxonica 的许可证文件。

如果您使用的是 JAXP API 而不是 Saxon 的 s9api API（s9api 更适合利用 XSLT 2.0 功能），那么您需要确保您的应用程序调用 Saxon 而不是 Xalan。最好的方法是直接实例化 TransformerFactory：对于 Saxon-HE，使用

```
TransformerFactory factory = new net.sf.saxon.TransformerFactoryImpl(); 
```

代替通常的

```
TransformerFactory factory = TransformerFactory.newInstance(); 
```

它加载它首先在类路径中找到的任何 XSLT 引擎。

# android - 和引擎瓦片地图重生

> ID：11554150
> 
> 赞同：0
> 
> 时间：2012-07-19T04:54:16.570
> 
> 标签：android, andengine, tmx

我开始使用 AndEngine gles2 开发一个安卓游戏，它是一个非常好的游戏引擎，我发现了很多如何使用它的例子。我的游戏是一种使用平铺地图、精灵等的 RPG 传统游戏：我的问题是如何设置 mounster 重生区域（如口袋妖怪游戏中的长草区域）我阅读了很多平铺地图示例但没有有一个关于这个的例子，我使用平铺地图编辑器，在那里我可以设置图层的属性并指定是否有芒斯特重生区域，如果有人可以告诉我该怎么做，我会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:54:40.297

您是否使用此处找到的 tilemapeditor：

[http://www.mapeditor.org/](http://www.mapeditor.org/)

（注意，您需要使用正确的压缩类型保存它，否则引擎将无法正确解析它，不记得我开始工作的是哪一个，但需要几分钟才能尝试）。

然后您可以右键单击特定图块并向其添加属性，例如： IsMonsterSpawnArea value = true

然后你可以检查“碰撞”

```
if(pTMXTileProperties.containsTMXProperty("IsMonsterSpawnArea ", "true")) {
    // SPAWN BIG UGLY MONSTER(or initiate fight!)
} 
```

查看 andengine 源代码中的 andengine TMX 示例，它们确实可以帮助您入门。

# json - 从 Joomla K2 网站解析 JSON

> ID：11554155
> 
> 赞同：1
> 
> 时间：2012-07-19T04:54:39.720
> 
> 标签：json, joomla2.5, joomla-k2

我正在尝试从我的 k2 驱动的 Joomla 网站获取 JSON。据我了解，我需要添加`index.php?option=com_k2&id=1&lang=mk&task=category&view=itemlist&format=json`到我的 URL，然后它会下载一个 joomla.json 文件。我现在知道我需要解析这些内容，但我怀疑 joomla.json 文件中的正确格式。这是json文件的部分内容：

```
{"id":"6","title":"\u0424\u0443\u0441\u0442\u0430\u043d \u041a\u0440\u0438\u0441\u0442\u0438\u043d\u0430","alias":"fustan-kristina","link":"\/katalog\/vencanici\/fustan-kristina.html","catid":"1","introtext":"<ul>\r\n<li>\u041e\u0432\u043e\u0458 \u0444\u0443\u0441\u0442\u0430\u043d \u0435 \u0438\u0437\u0440\u0430\u0431\u043e\u0442\u0435\u043d \u043e\u0434 100% \u0441\u0432\u0438\u043b\u0430.<\/li>\r\n<li>\u041d\u0435\u0436\u0435\u043d \u043c\u0430\u0442\u0435\u0440\u0438\u0458\u0430\u043b<\/li>\r\n<li>\u0414\u043e\u0434\u0430\u0434\u0435\u043d\u0438 \u0446\u0438\u0440\u043a\u043e\u043d\u0438<\/li>\r\n<\/ul>\r\n<p>\u0412\u0438\u0441\u0442\u0438\u043d\u0441\u043a\u0438 \u043d\u0435\u0432\u0435\u0441\u0442\u0438\u043d\u0441\u043a\u0438 \u0444\u0443\u0441\u0442\u0430\u043d<\/p>\r\n<p>\u0411\u0443\u0442\u0438\u043a \u0412\u0438\u043a\u0442\u043e\u0440<\/p>","fulltext":"","extra_fields":[{"id":"1","name":"\u0426\u0435\u043d\u0430","value":"12000 \u0434\u0435\u043d.","type":"textfield","group":"1","published":"1","ordering":"1"},{"id":"6","name":"\u0412\u0435\u0431 \u0421\u0442\u0440\u0430\u043d\u0430","value":"<a href=\"http:\/\/www.domain.mk\" target=\"_blank\">http:\/\/www.domain.mk<\/a>","type":"link","group":"1","published":"1","ordering":"2"}],"created":"2012-07-11 09:42:04","created_by_alias":"","modified":"2012-07-11 11:26:34","featured":"0","image":"\/media\/k2\/items\/cache\/ada9a09acea936d776a6f55c82778c43_S.jpg","imageWidth":"200","image_caption":"\u0424\u0443\u0441\u0442\u0430\u043d \u041a\u0440\u0438\u0441\u0442\u0438\u043d\u0430","image_credits":"","imageXSmall":"\/media\/k2\/items\/cache\/ada9a09acea936d776a6f55c82778c43_XS.jpg","imageSmall":"\/media\/k2\/items\/cache\/ada9a09acea936d776a6f55c82778c43_S.jpg","imageMedium":"\/media\/k2\/items\/cache\/ada9a09acea936d776a6f55c82778c43_M.jpg","imageLarge":"\/media\/k2\/items\/cache\/ada9a09acea936d776a6f55c82778c43_L.jpg","imageXLarge":"\/media\/k2\/items\/cache\/ada9a09acea936d776a6f55c82778c43_XL.jpg","video":null,"video_caption":"","video_credits":"","gallery":null,"hits":"50","category":{"id":"1","name":"\u0412\u0435\u043d\u0447\u0430\u043d\u0438\u0446\u0438","alias":"vencanici","link":"\/katalog\/katalog\/vencanici.html","description":"","image":"","ordering":"1"},"tags":[{"id":"1","name":"kristina","published":"1","link":"\/tag\/kristina.html"},{"id":"2","name":"fustan","published":"1","link":"\/tag\/fustan.html"},{"id":"3","name":"vencanica","published":"1","link":"\/tag\/vencanica.html"}],"attachments":[],"votingPercentage":100,"numOfvotes":"(1 \u0413\u043b\u0430\u0441\u0430\u0458)","author":{"name":"\u0414\u0430\u0440\u043a\u043e \u041f\u0435\u0442\u043a\u043e\u0432\u0441\u043a\u0438","link":"\/blog\/\u0414\u0430\u0440\u043a\u043e-\u041f\u0435\u0442\u043a\u043e\u0432\u0441\u043a\u0438.html","avatar":"http:\/\/www.gravatar.com\/avatar\/bb9f8918a0a63b260d46eb419bf1a894?s=100&amp;default=http%3A%2F%domain.mk%2Fcomponents%2Fcom_k2%2Fimages%2Fplaceholder%2Fuser.png","profile":{"gender":null}},"numOfComments":"0","events":{"BeforeDisplay":"","AfterDisplay":"","AfterDisplayTitle":"","BeforeDisplayContent":"","AfterDisplayContent":"","K2BeforeDisplay":"","K2AfterDisplay":"","K2AfterDisplayTitle":"","K2BeforeDisplayContent":"","K2AfterDisplayContent":"","K2CommentsCounter":""}}]} 
```

这个 json 格式是否正确，这是我从 K2 网站获取 json 内容的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:45:25.433

`] and }`您在 JSON 字符串的末尾有一个额外的内容。

删除它们后，您的 JSON 变得正常且合法。

```
{"id":"6","title":"\u0424\u0443\u0441\u0442\u0430\u043d \u041a\u0440\u0438\u0441\u0442\u0438\u043d\u0430","alias":"fustan-kristina","link":"\/katalog\/vencanici\/fustan-kristina.html","catid":"1","introtext":"<ul>\r\n<li>\u041e\u0432\u043e\u0458 \u0444\u0443\u0441\u0442\u0430\u043d \u0435 \u0438\u0437\u0440\u0430\u0431\u043e\u0442\u0435\u043d \u043e\u0434 100% \u0441\u0432\u0438\u043b\u0430.<\/li>\r\n<li>\u041d\u0435\u0436\u0435\u043d \u043c\u0430\u0442\u0435\u0440\u0438\u0458\u0430\u043b<\/li>\r\n<li>\u0414\u043e\u0434\u0430\u0434\u0435\u043d\u0438 \u0446\u0438\u0440\u043a\u043e\u043d\u0438<\/li>\r\n<\/ul>\r\n<p>\u0412\u0438\u0441\u0442\u0438\u043d\u0441\u043a\u0438 \u043d\u0435\u0432\u0435\u0441\u0442\u0438\u043d\u0441\u043a\u0438 \u0444\u0443\u0441\u0442\u0430\u043d<\/p>\r\n<p>\u0411\u0443\u0442\u0438\u043a \u0412\u0438\u043a\u0442\u043e\u0440<\/p>","fulltext":"","extra_fields":[{"id":"1","name":"\u0426\u0435\u043d\u0430","value":"12000 \u0434\u0435\u043d.","type":"textfield","group":"1","published":"1","ordering":"1"},{"id":"6","name":"\u0412\u0435\u0431 \u0421\u0442\u0440\u0430\u043d\u0430","value":"<a href=\"http:\/\/www.domain.mk\" target=\"_blank\">http:\/\/www.domain.mk<\/a>","type":"link","group":"1","published":"1","ordering":"2"}],"created":"2012-07-11 09:42:04","created_by_alias":"","modified":"2012-07-11 11:26:34","featured":"0","image":"\/media\/k2\/items\/cache\/ada9a09acea936d776a6f55c82778c43_S.jpg","imageWidth":"200","image_caption":"\u0424\u0443\u0441\u0442\u0430\u043d \u041a\u0440\u0438\u0441\u0442\u0438\u043d\u0430","image_credits":"","imageXSmall":"\/media\/k2\/items\/cache\/ada9a09acea936d776a6f55c82778c43_XS.jpg","imageSmall":"\/media\/k2\/items\/cache\/ada9a09acea936d776a6f55c82778c43_S.jpg","imageMedium":"\/media\/k2\/items\/cache\/ada9a09acea936d776a6f55c82778c43_M.jpg","imageLarge":"\/media\/k2\/items\/cache\/ada9a09acea936d776a6f55c82778c43_L.jpg","imageXLarge":"\/media\/k2\/items\/cache\/ada9a09acea936d776a6f55c82778c43_XL.jpg","video":null,"video_caption":"","video_credits":"","gallery":null,"hits":"50","category":{"id":"1","name":"\u0412\u0435\u043d\u0447\u0430\u043d\u0438\u0446\u0438","alias":"vencanici","link":"\/katalog\/katalog\/vencanici.html","description":"","image":"","ordering":"1"},"tags":[{"id":"1","name":"kristina","published":"1","link":"\/tag\/kristina.html"},{"id":"2","name":"fustan","published":"1","link":"\/tag\/fustan.html"},{"id":"3","name":"vencanica","published":"1","link":"\/tag\/vencanica.html"}],"attachments":[],"votingPercentage":100,"numOfvotes":"(1 \u0413\u043b\u0430\u0441\u0430\u0458)","author":{"name":"\u0414\u0430\u0440\u043a\u043e \u041f\u0435\u0442\u043a\u043e\u0432\u0441\u043a\u0438","link":"\/blog\/\u0414\u0430\u0440\u043a\u043e-\u041f\u0435\u0442\u043a\u043e\u0432\u0441\u043a\u0438.html","avatar":"http:\/\/www.gravatar.com\/avatar\/bb9f8918a0a63b260d46eb419bf1a894?s=100&amp;default=http%3A%2F%domain.mk%2Fcomponents%2Fcom_k2%2Fimages%2Fplaceholder%2Fuser.png","profile":{"gender":null}},"numOfComments":"0","events":{"BeforeDisplay":"","AfterDisplay":"","AfterDisplayTitle":"","BeforeDisplayContent":"","AfterDisplayContent":"","K2BeforeDisplay":"","K2AfterDisplay":"","K2AfterDisplayTitle":"","K2BeforeDisplayContent":"","K2AfterDisplayContent":"","K2CommentsCounter":""}} 
```

使用此站点测试您的 JSON 字符串。

[http://jsonlint.com/](http://jsonlint.com/)

如果您在 3D 中可视化 JSON 字符串时遇到困难，请尝试[http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)您可以格式化字符串以可视化 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-17T14:43:49.407

我`&format=json`也用它来构建我的网站。

```
$.get('//url with format=json',function(d){$('.k2ItemTitle').html(d.item.title)}) 
```

我什至不必使用 $.pareJSON

# cakephp - cakephp is授权函数

> ID：11554159
> 
> 赞同：0
> 
> 时间：2012-07-19T04:54:59.470
> 
> 标签：cakephp

在 cakephp 2 书中 -> 授权示例 -> （允许谁访问什么）。

[实际链接](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)

该函数`isAuthorized($user)`已声明但从未调用。它是如何工作的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:56:12.607

您还需要添加`public $components`

```
public $components = array(
    'Auth' => array(
        'authorize' => array('Controller') // Added this line
    )
); 
```

并且`isAuthorized()`仅在用户登录后调用。

# iphone - 从 iphone 中的可用声音为 UILocalNotification 分配警报音

> ID：11554170
> 
> 赞同：3
> 
> 时间：2012-07-19T04:56:01.513
> 
> 标签：iphone, ios, audio, alert, uilocalnotification

我正在开发一个使用 UILocalNotification 的应用程序。我想从 iPhone 附带的默认声音中选择声音。我如何列出声音以指定为警报音。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T05:05:50.253

`UILocalNotificationDefaultSoundName`来自系统 ( )的通知只有一种标准声音。您可以播放任何短于 30 秒的自定义声音。因此，如果您可以从任何地方从 ios 下载任何本机声音，您将能够将其用作自定义声音。[文档](http://developer.apple.com/library/ios/documentation/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html#//apple_ref/occ/instp/UILocalNotification/soundName)

# objective-c - iOS - NSDate/NSCalendar 差异的天数错误

> ID：11554173
> 
> 赞同：1
> 
> 时间：2012-07-19T04:56:32.113
> 
> 标签：objective-c, ios, cocoa-touch, nsdate, nscalendar

我试图获取今天*[NSDate date]*和用户从 UIDatePicker, *d*中选择的日期之间的天数差异，它将作为整数返回。

这是我用来找出差异的方法：

```
NSDate *startDate = d;
NSDate *endDate =  [NSDate date];
NSLog(@"startDate: %@",startDate);
NSLog(@"endDate: %@",endDate);

NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
[gregorian setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
NSDateComponents *components = [gregorian components:NSDayCalendarUnit
                                            fromDate:endDate
                                              toDate:startDate
                                             options:0];
NSInteger days = [components day];

NSLog(@"Days: %i",days); 
```

*startDate*和*endDate*都正确返回，但我得到的问题是我得到的天差是错误的。比如我选择今天的日期，差为0，我选择明天，差还是0，我选择后天，差只有1，什么时候应该是2。

有人对我能做些什么来解决这个问题有任何想法吗？这让我发疯了，我不知道这是怎么回事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:09:02.493

*   *比如我选择今天的日期，差为0，我选择明天，差还是0，我选择后天，差只有1，什么时候应该是2。*

假设明天选择的日期是 05:00 pm，而今天的当前日期是 08:00 PM。然后，如果尝试根据天数获取日期之间的差异，那么它应该为零。因为上述日期之间的差异是 2 小时不到一整天。我希望这能解决你的问题。始终将要比较的两个日期的组成部分设置为相同。为此目的使用 NSDateComponent。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:00:34.027

通常与此类问题有关，它与导致此确切问题的不同日期格式有关。

检查这个问题作为参考：[find total number of days between two dates in iphone](https://stackoverflow.com/questions/6069480/find-total-number-of-days-between-two-dates-in-iphone)

或者

[目标 C - 计算两个日期之间的天数](https://stackoverflow.com/questions/4575689/objective-c-calculating-the-number-of-days-between-two-dates)

# android - 切换活动时android应用程序崩溃

> ID：11554175
> 
> 赞同：0
> 
> 时间：2012-07-19T04:57:06.523
> 
> 标签：android

我是 android 新手，我一直在为我的应用程序苦苦挣扎。我创建了一个迷宫类型的游戏。主要活动从一个启动屏幕开始，该屏幕有一个小简介和一个用于启动游戏的按钮，它只是创建一个在其上绘制精灵和迷宫的表面视图。这是我遇到的第一个问题。由于某种原因，我的应用程序占用了我手机上大约 50% 的 CPU。我认为这可能是因为我在表面视图的 onDraw 方法中反复在屏幕上绘制矩形：

```
protected void onDraw(Canvas canvas) {
   canvas.drawColor(Color.BLACK);
// draws the blocks and the droid sprite
for (int i = 0; i < blocks.size(); i++) {
        MapBlock piece = blocks.get(i);
        canvas.drawRect(piece.getBlock(), piece.getColor());
        canvas.drawRect(getRectWithinRect(piece.getBlock()), piece.getInnerRectColor());
    }
    droid.draw(canvas);
} 
```

如果我移动绘图代码或者只是在迷宫没有留在屏幕上时才这样做。有一个更好的方法吗？我不是 100% 确定我是否在正确的地方做这件事。

我的第二个问题发生在用户获胜时。获胜后，我使用以下方法更改活动：

```
Intent intent = new Intent();         
intent.setClass(getContext(), FinishActivity.class); 
intent.putExtra("code", 1);
((Activity)getContext()).startActivity(intent); 
```

切换似乎工作正常。我切换到一个只有一些“你赢了”文本和一个退出按钮的活动。这是除 onDestroy 和 onStop 之外的类中唯一的代码：

```
public class FinishActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Log.d("tga", "made it herE!");
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    // making it full screen
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.finish);

} 
```

当您点击新屏幕的任何部分并且退出按钮没有响应时，应用程序会崩溃。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-09T14:35:30.693

安装的

```
intent.putExtra("code", 1);
((Activity)getContext()).startActivity(intent); 
```

把这个

```
intent.putExtra("code", 1);
((AppCompatActivity)getContext()).startActivity(intent); 
```

# java - 如何在 MAT Eclipse 中使用 OQL 进行嵌入式查询

> ID：11554176
> 
> 赞同：2
> 
> 时间：2012-07-19T04:57:08.017
> 
> 标签：java, eclipse, oql

我可以通过使用如下查询来获取所有 Thread 对象

```
SELECT OBJECTS dominators(s) FROM java.lang.Thread s 
```

那么如果我想进一步分析返回的结果对象，我认为 OQL 应该如下所示：

```
SELECT * from (SELECT OBJECTS dominators(s) FROM java.lang.Thread s) 
```

但它转向 ClassCastException。

```
Problem reported: 
ClassCastException occured. Remember: sub queries with the modifier INSTANCESOF or INCLUDING SUBCLASSES must return only class objects 

java.lang.ClassCastException: org.eclipse.mat.parser.model.InstanceImpl cannot be cast to org.eclipse.mat.snapshot.model.IClass
    at org.eclipse.mat.parser.internal.oql.OQLQueryImpl.doSubQuery(OQLQueryImpl.java:752)
    at org.eclipse.mat.parser.internal.oql.OQLQueryImpl.internalExecute(OQLQueryImpl.java:642)
    at org.eclipse.mat.parser.internal.oql.OQLQueryImpl.execute(OQLQueryImpl.java:627)
    at org.eclipse.mat.inspections.OQLQuery.execute(OQLQuery.java:50)
    at org.eclipse.mat.inspections.OQLQuery.execute(OQLQuery.java:1)
    at org.eclipse.mat.query.registry.ArgumentSet.execute(ArgumentSet.java:129)
    at org.eclipse.mat.ui.snapshot.panes.OQLPane$OQLJob.doRun(OQLPane.java:339)
    at org.eclipse.mat.ui.editor.AbstractPaneJob.run(AbstractPaneJob.java:34)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

MAT Eclipse 中的 OQL 是否支持嵌入式查询，如何获得我想要的结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-11T02:38:13.437

使子查询工作有点棘手。尝试以下操作：

```
SELECT * from OBJECTS (SELECT OBJECTS dominators(s) FROM java.lang.Thread s) 
```

我从以下链接获得了解决方案： [https ://www.eclipse.org/forums/index.php/t/608746/](https://www.eclipse.org/forums/index.php/t/608746/)

# azure - 天蓝色窗口中一个应用程序下多个webroles / workerroles的目的是什么

> ID：11554179
> 
> 赞同：1
> 
> 时间：2012-07-19T04:57:21.293
> 
> 标签：azure, azure-web-roles

在使用 Azure 一年之后，我仍然没有发现任何关于一个应用程序下的多个 webrole 的真实场景。

当我们当时创建托管服务时，我们需要选择区域以及应用程序的 URL，所以在我们的解决方案中，如果我们创建了多个项目（webroles/wrokerroles），那么这个 URL 映射到哪个 webrole/wrokerrole 应用程序？

作为最终用户，webrole 是一个应用程序，但在 Azure 中，我们可以在一个应用程序下托管多个 webrole 应用程序！

谁能解释一下这个 Azure 术语和它的目的，请给我一些我们需要这种类型术语的真实场景/示例？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T05:38:35.323

当您的应用程序很复杂并且您需要以不同的方式扩展不同的事物时，多个角色很有用。

不同的 Web 角色可能会处理组成一个应用程序的两个不同站点，但以不同的模式扩展（例如一些 BusinessAppWebRole 和 AdministrationAppWebRole）。这两个应用程序都是一个“系统”的一部分，并且部署在一起，甚至可能共享一些 .DLL 或类似的文件，但 BusinessAppWebRole 可能需要在上午 9 点到晚上 9 点之间进行扩展，并且需要为用户提供超快的执行速度，而 AdinistrationAppWebRole可能正在做一些复杂的数学或报告，并且需要自己的规模模式，这不应该影响 BusinessApp

或者，您可以选择在一个 Web 角色上拥有一个网站，而在另一个 Web 角色上拥有一个 WCF 服务。再一次，两者都将是同一个“系统”的一部分并部署在一起，但具有不同的用途和扩展策略，需要将它们保留在不同的服务器上

Worker Role 与 WebRole 也是一个很好的例子。Workeroles 通常是后台处理器。他们的目标是根据剩余的工作量进行扩展。面向客户的 WebRoles 需要有不同的扩展策略，并且不能受到通常繁重/忙碌的工作角色的影响......

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:54:15.473

关于您在一个 Windows Azure 应用程序中具有“多个 webrole”的问题，我个人认为在单个应用程序中具有两个或多个 webrole 没有任何具体原因。在一个 web 角色中有两个 webrole 将导致一个角色使用端口 80 和其他一些端口（默认为 8080）用于其他角色。因为您将有一个 VIP 来处理两个 Web 角色，所以您不能在两个角色上都设置端口 80。在某些情况下，您可以将此类功能插入在端口 80 和 8080 上配置的单个 Web 角色中。我可以想到一个示例，即在一个应用程序中拥有两个或多个 Web 角色，其中用户希望从一个特定的 Web 角色为数百个用户提供服务它配置为具有多个实例的端口 80，但是在端口 8080（其他非 80）上配置的其他 Web 角色具有 1-2 个实例的管理站点。

Having web role and worker role in one Windows Azure application is very common scenario in which you can serve content through a web server configured over HTTP/HTTPS and have a worker role to do background processing without suffocating resources on web server. You can also configure internal endpoints by defining specific ports in Web and Worker role to communicate between Web role and worker roles internally over TCP endpoints. In this scenario you can have number of web role instances to handling web traffic and several instances of worker role for background processing separately. The best example for such scenario is like having a web site where users upload video content from a web server and once the content is upload, worker role star encoding the video and when the video is encoded the video is available on web server for users to enjoy. In real world scenario if you have 1,000,0000 users using such website, you might end up having 100s of instances of web and worker role to facilitate overall activity.

# java - Java中的正则表达式分组

> ID：11554180
> 
> 赞同：1
> 
> 时间：2012-07-19T04:57:24.277
> 
> 标签：java, regex, pattern-matching, package

我希望从完全限定的类名中清除除类名之外的所有内容。所以，我可能有类似的东西......

```
"class gqlMain.Node" 
```

......我想结束......

```
"Node" 
```

...我很确定我的模式...

```
"*.[\\.][^\\.]*" 
```

..是正确的，如果只是像上面那样运行它并使用...进行测试

```
myMatcherObject.matches() 
```

...它总是返回 true，但是当我尝试添加分组时，比如...

```
"(.*[\\.])([^\\.]*)" 
```

...我总是得到找不到匹配的错误。不知道发生了什么。

添加：

感谢您的快速回复，伙计们。是的，我真的不明白这个。我的确切代码是....

```
public String toString() {
    Pattern packagePatt = Pattern.compile("(.*[\\.])([^\\.]*)");
    // 
    System.out.println(this.compClass.getName().toString());

    Matcher packageMatch = packagePatt.matcher(this.compClass.getName().toString());

    //
    System.out.println(packageMatch.group(2));
    return packageMatch.group(2);
} 
```

例如，第一个打印语句会生成一个类似“gqlMain.Node”的字符串（我知道 toString() 是多余的，我出于恼怒添加了它）。第二个 print 语句会产生错误，return 语句也会产生错误。使用调试器，我可以看到 Matcher 对象的组列表在每个索引处都为空。但是如果我插入一个...

```
if (packageMatcher.matches()) {
    // print true
} 
```

...我总是得到“真实”。这真的没有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:23:37.263

以下程序报告“真实”：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class so {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Pattern p = Pattern.compile("(.*[\\.])([^\\.]*)");
        Matcher m = p.matcher("class gqlMain.Node");
        System.out.println(m.matches());
        System.out.println(m.group(0));
        System.out.println(m.group(1));
        System.out.println(m.group(2));

    }

} 
```

完整的输出是：

```
true
class gqlMain.Node
class gqlMain.
Node 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T22:24:53.550

I wouldn't recommend to scan for the identifiers in that way (but I believe you wanted not to over-engineer), and you probably will like the following solution that is more strict for scanning the identifiers in general (however, speaking frankly, I don't believe I'm scanning for an identifier in the most correct way too). Additionally, it can scan for several fully/partially qualified identifiers within a single string, but it completely ignores non-qualified one (e.g. `class` is ambiguous).

```
package stackoverflow;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

import static java.lang.System.out;
import static java.util.regex.Pattern.CASE_INSENSITIVE;
import static java.util.regex.Pattern.compile;

public final class Q11554180 {

    private Q11554180() {
    }

    //
    // (3) The same as item (1) however we're       ------------------------------------------------+
    //     capturing the group to get the class                                                     |
    //     name only                                                                                |
    // (2) At least one package name is required    ---------------------------------+              |
    // (1) We're searching valid package names only -----------------+               |              |
    //     and we do not need to capture it ?:                       |               |              |
    //                                              +----------------+--------------+|+-------------+-------------+
    //                                              |                               |||                           |
    private static final Pattern pattern = compile("(?:[\\p{Alpha}_][\\p{Alnum}_]*\\.)+([\\p{Alpha}_][\\p{Alnum}_]*)", CASE_INSENSITIVE);

    private static void find(CharSequence s) {
        final Matcher matcher = pattern.matcher(s);
        while ( matcher.find() ) {
            out.println(matcher.group(1));
        }
    }

    public static void main(String[] args) {
        find("class gqlMain.Node; class gqlMain.p1.NodeA");
        find("class gqlMain.p1.p11.NodeB");
        find("class gqlMain.p1.p11.p111.NodeC");
        find(Q11554180.class.getCanonicalName());
    }

} 
```

The code above will produce the following output:

```
Node
NodeA
NodeB
NodeC
Q11554180 
```

# ssis - 将具有多个布局的平面文件解析到多个目标表？

> ID：11554188
> 
> 赞同：0
> 
> 时间：2012-07-19T04:58:23.893
> 
> 标签：ssis

我正在尝试加载一个混合了多个数据集的平面文件。平面文件看起来像。

```
1999XX9999
2XXX99
1999XX9999
2XXX99
3XXXXX999.99
1999XX9999

```

每行的第一个字符定义该行的记录类型。我想在数据流中创建一个脚本组件并解析原始行（如下所示）并将三个输出（1、2、3）保存到三个不同的表中。是否可以？

```
表 1（col1，col2，col3）：
999, XX, 9999
999, XX, 9999
999, XX, 9999

表 2（col1，col2）：
XXX, 99
XXX, 99

表 3（col1，col2）：
XXXXXX, 999.99

```

如果脚本组件无法做到这一点，SSIS 中还有其他方式吗？最好的解决方案是编写一个程序将文件拆分为三个文件并使用 SSIS 加载它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:26:58.223

这是可能的，您可能应该使用脚本转换来创建可维护的解决方案。

您将无法使用平面文件源和连接管理器将输入文件完全解析为列。完整阅读您的行，并在脚本转换中使用字符串函数将每一行解析为所需的列。

现在要将记录分发到不同的目的地，您可以：

1.  在转换中定义多个输出，并在每行的第一个字符上使用条件来确定将列发送到的输出。
2.  仅使用脚本转换将行解析为列，并使用 a`Conditional Split Transformation`将您的记录在逻辑上划分为多个数据路径。

两种方法在逻辑上相似，实现方式不同。

# android - 一键获取联系人

> ID：11554189
> 
> 赞同：0
> 
> 时间：2012-07-19T04:58:34.180
> 
> 标签：android, android-listview, android-contacts

我希望在单击按钮时弹出一个可滚动的联系人列表。我无法弄清楚如何获取它以及内容解析器、托管查询和适配器​​如何工作。

我尝试过使用以下代码：

```
package com.hapybay.rad;

import android.app.Activity;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.view.View;
import android.widget.Button;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.database.Cursor;

public class startingPoint extends Activity {
    Button redcandle;
    private ListView mContactList;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        /*Obtain handles to UI objects (Constructor)*/
        redcandle = (Button) findViewById(R.id.button1);

        /*Register handle for UI element*/
        redcandle.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                populateContactList();
            }
        });
    }

    private void populateContactList() {
        // Build adapter with contact entries
        Cursor cursor = getContacts();
        String[] fields = new String[] {
                ContactsContract.Data.DISPLAY_NAME
        };
        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.contact_entry,   cursor,
                fields, new int[]{R.id.contactEntryText});
        mContactList.setAdapter(adapter);
    }

    private Cursor getContacts()
    {
        // Run query
        Uri uri = ContactsContract.Contacts.CONTENT_URI;
        String[] projection = new String[] {
                ContactsContract.Contacts.LOOKUP_KEY,
                ContactsContract.Contacts.DISPLAY_NAME };
        String selection = null;
        String[] selectionArgs = null;
        String sortOrder = null;

        return managedQuery(uri, projection, selection, selectionArgs, sortOrder);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:18:01.690

```
Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
startActivityForResult(intent, PICK_CONTACT); 
```

并在您的活动中覆盖它

```
public void onActivityResult(int reqCode, int resultCode, Intent data) {
  super.onActivityResult(reqCode, resultCode, data);

  switch (reqCode) {
    case (PICK_CONTACT) :
      if (resultCode == Activity.RESULT_OK) {
        Uri contactData = data.getData();
        Cursor c =  managedQuery(contactData, null, null, null, null);
        if (c.moveToFirst()) {
          String name = c.getString(c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
          // TODO Whatever you want to do with the selected contact name.
        }
      }
      break;
  }
} 
```

不要忘记添加权限

`<uses-permission android:name="android.permission.READ_CONTACTS"/>`

# shell - Shell编程——提取2个关键词的值

> ID：11554190
> 
> 赞同：1
> 
> 时间：2012-07-19T04:58:37.303
> 
> 标签：shell, sed, key, extract

输入文件（HTTP 请求日志文件）：

获取 /dynamic_branding_playlist.fmil？**domain=915oGLbNZhb** &pluginVersion=3.2.7_2.6&pubchannel=usa& **sdk_ver=2.4.6.3** &width=680&height=290&embeddedIn=http%3A%2F%2Fviewster.com%2Fsplash%2FOscar-Videos-1.aspx%3Futm_source%3Dadon_272024_113535%26utm_113535%26490 %26utm_campaign%3DUSYME%26adv %3D573900%26req%3D5006e9ce1ca8b26347b88a7.1.825&sdk_url=http%3A%2F%2Fdivaag.vo.llnwd.net%2Fo42%2Fhtt p_only%2Fviewster_com%2Fv25%2Fyume%=

输出文件：

域 sdk_version

915oGLbNZhb 2.4.6.3

上千条日志类似上面的例子，所以需要想办法提取domain&sdk_version的值。并且 domain 和 sdk_version 的位置不固定。有时出现在第 2 个字段中，有时出现在最后一个字段中（如果用 & 分隔）。

谁能帮我解决这个问题（使用 sed 命令）？非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:05:59.210

使用 sed：

```
sed -n 's/.*domain=\([^&]*\).*sdk_ver=\([^&]*\).*/\1 \2/p' input_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:25:02.497

使用`awk`：

```
BEGIN {
    FS = "[&?]"
    printf "domain\tsdk_version\n"
}

{
    for (i = 1; i <= NF; i++) {
        split ($i, array, "=")
        if (array[1] == "domain") {
            printf array[2]
        }
        if (array[1] == "sdk_ver") {
            printf "\t%s", array[2]
        }
    }
    printf "\n"
} 
```

或作为单行：

```
awk -F "[&?]" 'BEGIN { printf "domain\tsdk_version\n" } { for (i = 1; i <= NF; i++) { split ($i, array, "="); if (array[1] == "domain") printf array[2]; if (array[1] == "sdk_ver") printf "\t%s", array[2]; } printf "\n"; }' file.txt 
```

结果：

```
domain  sdk_version
915oGLbNZhb 2.4.6.3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T05:58:25.527

这可能对您有用（GNU sed）：

```
sed 's/.*\<\(domain\)=\([^&]*\).*\<\(sdk_ver\)=\([^&]*\).*/\1 \3sion\n\2 \4/p;d' file 
```

# java - 如何在 Java 中获取具有泛型类型的类

> ID：11554192
> 
> 赞同：9
> 
> 时间：2012-07-19T04:58:48.720
> 
> 标签：java, generics

我正在尝试进行这样的方法调用，

```
public class GenericsTest<T> {

    public static <T> Map<String, T> createMap(Class<? extends Map<String, T>> clazz) {
        return null;
    }

    public static void main(String[] argv) {
        Map<String, Integer> result = createMap(TreeMap.class);
    }
} 
```

但是我收到了这个错误，

```
<T>createMap(java.lang.Class<? extends java.util.Map<java.lang.String,T>>) in test.GenericsTest<T> cannot be applied to (java.lang.Class<java.util.TreeMap>) 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T05:35:53.600

```
Map<String, Integer> instance = new TreeMap<String, Integer>();

@SuppressWarnings("unchecked")
Map<String, Integer> map =
    createMap((Class<? extends Map<String, Integer>>)instance.getClass());

map.put("x", 1);

System.out.println("THIS IS x: " + map.get("x")); 
```

这将适当地打印出 1\. 方法的实现最有可能

```
try
{
    return clazz.newInstance();
}
catch (Exception e)
{
    throw new RuntimeException(e);
} 
```

他们的 API 的一个更好的实现是让他们向您询问类型 , `T`，并让他们回馈`Map`他们选择的 a，而不是向您询问所有细节。否则，只要它们没有填充任何数据，您就可以像这样使用泛型类型参数`Map`实例化 a ：`Map`

```
public static <T> Map<String, T> getMap()
{
    return new TreeMap<String, T>();
} 
```

然后，您可以在没有警告的情况下访问它：

```
// note the lack of type arguments, which are inferred
Map<String, Integer> instance = getMap();

// alternatively, you could do it more explicitly:
// Map<String, Integer> instance = ClassName.<Integer>getMap(); 
```

他们真的没有理由问你你的`Class`类型，`Map`除了给你一个完全匹配的实现（例如，如果你坚持 a `HashMap`，那么你会得到 a `HashMap`，如果你坚持 a `TreeMap`，那么你会回来一个`TreeMap`）。但是，我怀疑它`TreeMap`会丢失任何`Comparator`构造它的东西，并且由于这是一个不可变的 ( `final`) 字段`TreeMap`，所以你无法修复它；这意味着`Map`在这种情况下不一样，也不太可能是你想要的。

如果他们正在填充`Map`数据，那么它就更没有意义了。你总是可以传入一个 a 的实例`Map`来填充，或者让他们返回`Map`你可以简单地包装的 a （例如，`new TreeMap<String, Integer>(instance);`），他们应该知道哪个`Map`为数据提供了最大的实用性。

# eclipse - 导入 Eclipse Indigo 项目时出现 Eclipse Juno 错误

> ID：11554193
> 
> 赞同：0
> 
> 时间：2012-07-19T04:58:52.323
> 
> 标签：eclipse, jakarta-ee, ide, eclipse-indigo, eclipse-juno

大家好，当我将在 eclipse indigo 中创建的项目导入 eclipse juno 时，eclipse juno 无法识别我的 servlet 类，并且它在所有 servlet 类（如 etc）上显示错误。`HTTPServlet`我现在该怎么办？但是当我创建一个新的动态项目时，servlet 工作正常。这意味着它只有在我导入任何 eclipse indigo 项目时找不到 servlet API 路径。![](../Images/af66b68bf1116305e075efeb918856c8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:14:42.407

打开项目的设置，“java Build Path”选项卡。检查您的 servlet 容器的适当运行时库是否在列表中。我怀疑不是。

如果没有丢失，则展开库并检查是否有 servlet.jar 或 servlet-api.jar。

如果缺少，请单击“添加库...”按钮，选择“服务器运行时”，单击下一步并从列表中选择一个。

如果此列表再次为空（可能），则需要先配置服务器运行时。为此，请从 Eclipse 菜单中选择窗口、首选项，转到“服务器”，子菜单“运行时环境”并添加一个合适的选项。然后将其添加到您的项目构建路径中。

# scsf - 如何根据用户在 SCSF 中的角色自定义模块加载行为

> ID：11554194
> 
> 赞同：0
> 
> 时间：2012-07-19T04:58:58.843
> 
> 标签：scsf, role-base-authorization

有谁知道如何根据用户在 SCSF 中的角色自定义模块加载行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:28:55.500

我相信您要问的是能够动态加载 SCSF 模块，而不是使用默认方法（从 ProfileCatalog.xml 读取模块列表）。

我已经尝试了这两篇文章中概述的方法，发现它工作得很好，希望它们可以对你有所帮助。

[http://blogs.msdn.com/b/mszcool/archive/2005/12/20/505976.aspx](http://blogs.msdn.com/b/mszcool/archive/2005/12/20/505976.aspx)

[http://aspadvice.com/blogs/krishna_kishore/pages/Dynamically-Loading-Modules-in-SCSF.aspx](http://aspadvice.com/blogs/krishna_kishore/pages/Dynamically-Loading-Modules-in-SCSF.aspx)

希望有帮助！

# javascript - 使用 window.location 时变量未定义

> ID：11554198
> 
> 赞同：0
> 
> 时间：2012-07-19T04:59:09.737
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile

大家好，我在一个 js 文件中定义了变量。现在从这个 js 文件中，我将页面导航到一个 html 文件，并且我想访问该 html 文件中的该变量。我使用 window.location 作为：

```
window.location = "UI/demo/home.html"; 
```

但是在 home.html 中，当我尝试访问在 js 文件中声明的变量时，我得到的变量是未定义的。如果我使用 changePage 而不是 window.location 我得到了变量的值。为什么会这样？任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:05:34.533

`changePage`在不重新加载加载的 Javascript 的情况下更改页面的 DOM。`window.location`更改浏览器本身的页面，重新加载所有内容，包括 Javascript。

因此，虽然这两者似乎具有相同的效果，`changePage`但可能是您正在寻找的，除非您想故意重新加载 URL。

另请注意，`changePage`有一个`reloadPage`参数基本上可以在`window.location`没有花哨的动画等的情况下完成。

[http://jquerymobile.com/test/docs/api/methods.html](http://jquerymobile.com/test/docs/api/methods.html)

# flash - Flex - 桌面应用程序的启动画面（非移动应用程序）

> ID：11554212
> 
> 赞同：1
> 
> 时间：2012-07-19T05:01:57.377
> 
> 标签：flash, apache-flex, desktop-application, splash-screen, preloader

我正在使用 fb4linux，我正在开发一个非移动设备（即桌面应用程序），我想为其添加一个启动画面。

我已将 mobilecomponents.swc 添加到库路径中，应用程序如下所示：

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
   xmlns:s="library://ns.adobe.com/flex/spark"
   xmlns:mx="library://ns.adobe.com/flex/mx"
   width="400" height="400" xmlns:local="*"
   preloader="spark.preloaders.SplashScreen"
   splashScreenImage="@Embed('assets/splashscreen.png')"
   splashScreenMinimumDisplayTime="1500"> 
```

当我调试它时，没有显示启动画面，并且我收到以下错误：

```
ReferenceError: Error #1065: Variable flash.display::StageAspectRatio is not defined.
    at spark.preloaders::SplashScreen/prepareSplashScreen()[E:\dev\4.5.1\frameworks\projects\mobilecomponents\src\spark\preloaders\SplashScreen.as:340]
    at spark.preloaders::SplashScreen/Stage_resizeHandler()[E:\dev\4.5.1\frameworks\projects\mobilecomponents\src\spark\preloaders\SplashScreen.as:407] 
```

问题似乎是由设置预加载器的行触发的，因为如果我删除它，错误就消失了（尽管也没有显示启动画面）。

任何想法如何使它工作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:47:59.747

你应该添加

`import [install folder]\Adobe\Adobe Flash Builder 4.6\sdks\4.6.0\frameworks\libs\mobile`

到您的构建路径。

# c# - 如何通过单击按钮运行 c# 代码？

> ID：11554215
> 
> 赞同：0
> 
> 时间：2012-07-19T05:02:05.597
> 
> 标签：c#, winforms, events

*我在 C# 中制作了一个程序，并在制作程序时使用了对Program Files*目录的硬编码引用。我现在想删除硬编码的引用。

在最近的一个主题中，Eric 在 stackoverflow 上向我推荐了这种方法。但是，我无法理解如何从 button_click 运行代码：

**埃里克 说：**

```
string programFilesFolder = 
    Environment.GetFolderPath(Environment.SpecialFolder.ProgramFilesX86) 
```

**继续这个例子，你可以做这样的事情**

```
string pathToFile = 
    Path.Combine(programFilesFolder, @"TEST\ok.txt");

if (File.Exists(pathToFile)) 
    File.Delete(pathToFile); 
```

100% 对你们说实话，我对 c# 很陌生，而且还在学习......

有人可以举例说明如何从 button_click 调用上面的代码吗？我将使用同一个按钮对多个文件执行此操作。

我确实在另一个帖子的评论中问过这个问题，但我认为他们都继续前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:13:36.883

假设您要创建一个 Windows 窗体应用程序来执行此操作：

[http://msdn.microsoft.com/en-us/library/z9w2f38k(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/z9w2f38k(v=vs.90).aspx)

这将显示如何执行 Windows 窗体示例的示例，您可以将按钮拖到画布上，然后对按钮进行单击操作。

在示例中，它说要放置

```
MessageBox.Show ("Hello, World!") 
```

但是您可以将代码放在那里删除文件，它会在单击按钮时删除您要删除的任何内容。

```
string programFilesFolder = Environment.GetFolderPath(Environment.SpecialFolder.ProgramFilesX86)
string pathToFile = Path.Combine(programFilesFolder, @"TEST\ok.txt");
File.Delete(pathToFile); 
```

# ajax - 如何在 ExtJs AjaxRequest 中实现 CSRFGuard？

> ID：11554220
> 
> 赞同：2
> 
> 时间：2012-07-19T05:02:23.973
> 
> 标签：ajax, extjs, csrf, extjs3

我正在将 ExtJs 用于 UI，并且怀疑在 extjs 的 AjaxRequest 中使用 CSRFGuard。我目前正在将 CSRFName 和值附加到 ajax 的 URL 中，它工作得很好。

有什么方法可以将令牌名称和值添加为 Ajax 的标头，以便不需要为每个 AjaxRequest 编写它。

寻求早期反应。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:26:04.280

你可以把它放在[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Ajax-event-beforerequest](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Ajax-event-beforerequest)

这将适用于每个 AJAX 请求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-28T06:27:54.127

这是另一个解决方案。它将 csrf 令牌添加到每个请求中。

```
Ext.Ajax.on('beforerequest', function(conn, options) {
    options.params._token = Laravel.csrfToken;
}); 
```

# php - 无法使用 PHP 将参数发送到 Python Web 服务

> ID：11554221
> 
> 赞同：0
> 
> 时间：2012-07-19T05:02:32.433
> 
> 标签：php, python, web-services

服务器：

```
import soaplib
from soaplib.core.service import rpc, DefinitionBase
from soaplib.core.model.primitive import String, Integer
from soaplib.core.server import wsgi
from soaplib.core.model.clazz import Array

class HelloWorldService(DefinitionBase):
   @soap(String,Integer,_returns=Array(String))
   def say_hello(self,name,times):
      results = []
      for i in range(0,times):
         results.append('Hello, %s'%name)
      return results

if __name__=='__main__':
   try:
        from wsgiref.simple_server import make_server
        soap_application = soaplib.core.Application([HelloWorldService], 'tns')
        wsgi_application = wsgi.Application(soap_application)
        server = make_server('173.252.236.136', 7789, wsgi_application)
        server.serve_forever()
   except ImportError:
        print "Error: example server code requires Python >= 2.5" 
```

PHP：

```
$client=new SoapClient("http://173.252.236.136:7789/?wsdl");
try{
ini_set('default_socket_timeout', 5);
var_dump($client->say_hello("Dave", 5));
echo("<br />");
//print_r($client->add(1,2));
}catch(Exception $e){
 echo $e->__toString();
 ini_restore('default_socket_timeout');
} 
```

当我运行我的 PHP 代码时，它会报告以下信息：

```
SoapFault exception: [senv:Server] range() integer end argument expected, got NoneType.     in E:\web\webservice\client.php:6 Stack trace: #0 E:\web\webservice\client.php(6): SoapClient->__call('say_hello', Array) #1 E:\web\webservice\client.php(6): SoapClient->say_hello('Dave', 5) #2 {main} 
```

但它使用 Python 的客户端工作：

```
from suds.client import Client
hello_client = Client('http://173.252.236.136:7789/?wsdl')
result = hello_client.service.say_hello("Dave", 5)
print result 
```

我发现我无法使用 PHP 客户端将参数发送`name`到`times`Python 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-05T08:15:45.067

我遇到了这个问题。如果要将参数传递给 python webservice。你只需要传递一个数组作为参数。像这样：

var_dump($client->say_hello(array("name"=>"Dave","times"=>5)));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:44:03.380

我猜问题是，`soaplib`将参数和返回值包装在 Soap-structs 中。如果您查看以下输出，您会看到：

```
 var_dump($client->__getFunctions());
 var_dump($client->__getTypes()); 
```

所以解决方案是只提供结构：

```
class SayHelloStruct {
    function __construct($name, $times) {
        $this->name = $name;
        $this->times = $times;
    }
}

$struct = new SayHelloStruct("Dave", 5);
// here "say_hello" is not the method name but the name of the struct
$soapstruct = new SoapVar($struct, SOAP_ENC_OBJECT, "say_hello");
$param = new SoapParam($soapstruct, "say_hello");

var_dump($client->say_hello($param)); 
```

您可以通过将哈希数组转换为对象来缩短这一点：

```
$struct = (object)array("name" => "Dave", "times" => 5);
// here "say_hello" is not the method name but the name of the struct
$soapstruct = new SoapVar($struct, SOAP_ENC_OBJECT, "say_hello");
$param = new SoapParam($soapstruct, "say_hello");

var_dump($client->say_hello($param)); 
```

-thing`SoapParam`最终不是必需的。您可以省略它而不会破坏它。

好吧，老实说，我不知道是否有更好的解决方案，例如服务器或客户端上的某种标志。

# domain-driven-design - 领域驱动设计如何处理报告？

> ID：11554231
> 
> 赞同：26
> 
> 时间：2012-07-19T05:04:10.963
> 
> 标签：domain-driven-design

如果我正在处理操作/事务类型的应用程序，我发现 DDD 很自然。但是，我总是以一种合理的方式来处理报告类型的函数。

我所说的报告不限于报告生成，还包括执行相对复杂查询的函数。（例如，给出交易者所做的所有订单的摘要，或显示具有特定股票的交易账户的账户摘要等）。它们可以只是与那些操作功能一起使用的一些查询或支持功能。

对于这样的函数，如果我们可以在 SQL（或任何查询语言）中执行连接，获取我们感兴趣的列，并返回经过处理的结果集，那是很自然的。但是，DDD 似乎不太适合这种方式：我们需要一个额外的特殊存储库，或者让现有的最相关的存储库返回一个特殊的“实体/值对象”（这是专门的结果集）。这些特殊的“实体”实际上没有任何领域意义。

如果我们想利用有意义的领域层，可能会产生大量来自不同存储库的额外查找，加上领域或服务层中的大量聚合工作，这很容易导致可怕的性能下降。

我也想过为这类功能设置另一个“路径”，它不通过“DDD路径”，有自己的方式从数据库中获取报告数据，组合显示结果。然而，这会使应用程序变得不必要的复杂，更糟糕的是，我们提供了一个额外的路径，以便更习惯于传统的面向 DB 开发的开发人员可能倾向于使用这条路径，即使它不合适。

我认为这种情况很常见（通常一个大系统不会包含操作但也包含报告和查询功能），我想知道人们是如何处理它的？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-19T16:47:42.330

在大多数情况下，就 DDD 报告而言，它是一个单独的限界上下文和一个支持子域，在这种情况下，域驱动设计会显得过大。记住 DDD 最重要的概念：将您的建模工作集中在核心域上，并使用最简单的解决方案实现其他所有内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T16:27:27.220

我们最近开始使用 DDD 进行系统开发。我和你有同样的担忧，但最终选择了命令查询职责分离 (CQRS) [Fowler, Young, Dahan]。虽然查询需要“数据库路径”，但我一点也不觉得直接对数据库进行命令（那些改变域状态的那些）变得很诱人。分离非常清楚——命令通过域，查询直接到数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T05:08:59.237

一种方法是拥有一个单独的报告系统，该系统运行来自应用程序数据存储的数据馈送，以更相关的格式存储数据的另一个副本。

我使用的一个快捷方式是创建一个视图或存储过程，以将连接的数据返回到一个简单的哑对象中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T09:01:38.250

> 比较复杂的查询。（例如，给出交易者所做的所有订单的摘要，或显示具有特定股票的交易账户的账户摘要等）

存储库执行此类任务很常见。我认为您担心如何有效地实现这一点，而答案是“延迟加载”。

例如，让我们以“交易者所做的所有订单的汇总”为例。“摘要”是一个报告任务，所以让我们把它放在一边。域任务是“查找交易者的所有订单”。您可能有这样的存储库方法：

```
List<Order> findOrdersByTrader(Trader trader); 
```

您可以通过仅加载每个订单的最低限度（摘要）信息来实现这一点。如果您随后将存储库接口注入`Order`实体，则实体本身可以在需要时调用存储库以加载其他子实体。

* * *

**更新：**您的评论使问题更清楚——我之前误解了聚合部分。似乎“订单摘要”确实属于您的域。有时，一个概念是否属于域的一部分并不明显，但如果它是用户谈论的一个功能（“我想查看该交易者所下订单的摘要”）并且不存在可以执行此操作的现有对象，这是您的域中隐藏概念的标志。毕竟，您需要*一些*对象来跟踪“每只股票有多少订单”，而且这个对象没有理由不能成为您域的一部分。

# android - 将图像从 Android 发送到 Datasnap Restful Server

> ID：11554234
> 
> 赞同：3
> 
> 时间：2012-07-19T05:04:28.740
> 
> 标签：android, delphi, datasnap

我有一个 Android 应用程序，它使用 XE2 中的 RESTFul 客户端内容将数据发送回 datasnap 服务器。

我可以很好地发送标准基本数据，但应用程序的一部分包括存储用户拍摄的图像。

我最初尝试使用 TStream，但从未返回到服务器 - 它似乎只是挂起。我目前的想法是将图像的 byte[] 转换为 base64 字符串并在 datasnap 端重新转换。

要在 Android 端将图像转换为 base64 字符串，我执行以下操作：

```
ByteArrayOutputStream stream = new ByteArrayOutputStream();
image.compress(Bitmap.CompressFormat.JPEG, 100, stream); 
String encodedString = Base64.encode(stream.toByteArray) 
```

`encodedString`然后作为标准 Delphi 字符串发送

在服务器端，要解码的代码是

```
 function Base64Decode(const EncodedText: string): TBytes;
  var
    DecodedStm: TBytesStream;
    Decoder: TIdDecoderMIME;
  begin
    Decoder := TIdDecoderMIME.Create(nil);
    try
      DecodedStm := TBytesStream.Create;
      try
        Decoder.DecodeBegin(DecodedStm);
        Decoder.Decode(EncodedText);
        Decoder.DecodeEnd;
        Result := DecodedStm.Bytes;
        SetLength(Result, DecodedStm.Size);  // add this line
      finally
        DecodedStm.Free;
      end;
    finally
      Decoder.Free;
    end;
end; 
```

然后

```
var
    Bytes : TBytes;
  image : TJPEGImage;
  stream : TBytesStream;
begin
  Bytes := Base64Decode(Photo);
  stream := TBytesStream.Create(Bytes);
  image := TJPegImage.Create;
  image.LoadFromStream(stream); 
```

这会在方法中产生错误`loadFromStream`，基本上 jpeg 已损坏。我猜要么编码有问题（不太可能），要么转换为delphi字符串然后解码为字节[]（可能）。

所以这是一个冗长的方式来询问是否有人对如何将图像从 Android 应用程序发送到 Delphi XE2 中的 DataSnap 服务器有任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:59:10.360

```
uses
DBXJSONCommon, 

function TServerImageMethods.ConvertJPEGToJSon(pFilePath: string): TJSONArray;
var
  AFileStream: TFileStream;
begin
  AFileStream := TFileStream.Create(pFilePath, fmOpenRead);

  Result := TDBXJSONTools.StreamToJSON(AFileStream, 0, AFileStream.Size);
end; 
```

我用以下方法转换回 TStream：

```
AFileStream := TDBXJSONTools.JSONToStream(JSONArray); 
```

PS.：您可以使用 ZLIB 压缩流以获得最佳性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T14:37:54.767

我正在加载 JPEG 图像，但我在开头设置了指针，并配置了图像：

```
stream.Seek(0,soFromBeginning);
image.PixelFormat := jf24Bit;
image.Scale := jsFullSize;
image.GrayScale := False;
image.Performance := jpBestQuality;
image.ProgressiveDisplay := True;
image.ProgressiveEncoding := True;
image.LoadFromStream(stream);

If stream.size > 0 then
 // OK
else
 // not OK 
```

我还将尝试解码一个 ANSIString，以检查它是否与 Unicode 更改有关。

# struts2 - 在 OGNL 中使用 OGNL 是 Struts2 标签

> ID：11554236
> 
> 赞同：0
> 
> 时间：2012-07-19T05:04:48.707
> 
> 标签：struts2, ognl

我有一个迭代器标签，它同时创建 < s:url > 和 < sj:a > 标签，前者是后者要访问的 href。这是代码：

```
<s:iterator value="areas">
    <s:url id="show_element_%{id_element}_url" action="some_action">
        <s:param name="id_current_element" value="%{id_element}" />
    </s:url>
    <sj:a href="%{show_element_?_url}" targets="...">...</sj:a>
</s:iterator> 
```

问题是，如何获取 < sj:a > 的属性 href 中的 url 的 id？请注意，我需要使用 OGNL 来获取 url 的完整 id，但我已经使用 OGNL 将 url 与锚标记相关联，那么，我应该在 OGNL 中使用 OGNL 吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:23:29.283

没关系，我找到了答案。没有必要给每个 url 一个不同的 id。既然如此，代码就相当简单：

```
<s:iterator value="areas">
    <s:url id="show_element_url" action="some_action">
        <s:param name="id_current_element" value="%{id_element}" />
    </s:url>
    <sj:a href="%{show_element_url}" targets="...">...</sj:a>
</s:iterator> 
```

谢谢。

# javascript - 使用动态变量作为多维对象的键

> ID：11554241
> 
> 赞同：3
> 
> 时间：2012-07-19T05:05:27.713
> 
> 标签：javascript

我已经疯狂地点击 Stackflow 和谷歌试图找到解决方案，最后在这几个小时后征求意见。

这是我的数组：

```
endangered = '#FFA500';
shutdown = '#FF0000';
active = '#00BB00';

// Build state array
var state = {};
state = {
        NV: {
            status: shutdown,
            name: 'Las Vegas Charter School for the Deaf',
            SchoolLink: 'http://www.lvcsd.org',
            SourceLink: 'http://www.lvrj.com/news/charter-school-for-deaf-signs-off-in-bankruptcy-141399423.html',
            ClosureDate: 'March 5, 2012',
            Comment: 'Closure due to bankruptcy. State also adopted exclusive mainstreaming approach.'
        },
        WY: {
            status: shutdown,
            name: 'Wyoming School for the Deaf',
            SchoolLink: 'http://www.wyomingdeaf.com/',
            SourceLink: 'http://trib.com/news/local/article_94be7523-5bc5-5031-97ee-9431a205cfe9.html',
            ClosureDate: '2000',
            Comment: 'School replaced by a mainstream school. State also adopted exclusive mainstreaming approach.'
        }
} 
```

此时访问它类似于：

```
stateCode = 'NV';
currentColor = state[stateCode].status; 
```

它会检查**状态**数组，查找具有自己数组的“NV”数组，然后最后查找状态，该状态也有自己的变量，该变量引用与该状态关联的颜色。在这种情况下，它将返回“#FF0000”以进行关机。

如果我这样做，它会说“未定义”失败。但是，如果我这样做：

```
currentColor = state['NV'].status; 
```

然后它完美地工作。但这违背了目的，因为它变成了静态的。我需要能够保持 stateCode 动态，因为它基于函数的反馈，并且会一直在变化。

我可以这样做：

```
if(stateCode === 'NV') currentColor = state['NV'].status;
if(stateCode === 'WY') currentColor = state['WY'].status; 
```

但它很快就变得臃肿。必须有更好的方法来处理这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:22:14.943

顺便说一句，你正在构建的是[`Objects`而不是`Arrays`](http://nfriedly.com/techblog/2009/06/advanced-javascript-objects-arrays-and-array-like-objects/)

如果要保持代码动态，请保留一个颜色对象：

```
var colors = {
 endangered: '#FFA500',
 shutdown: '#FF0000',
 active: '#00BB00'
}; 
```

然后使用字符串来指示状态，而不是状态对象上的变量：

```
var state = {};
state = {
    NV: {
        status: 'shutdown', 
```

并像这样评估您当前的颜色：

```
var currentColor = colors[state[stateCode].status]; 
```

`var`除非你想构造一个全局变量，否则总是给你的变量添加前缀，[但通常，局部变量就足够了](http://www.svennerberg.com/2009/02/global-variables-in-javascript/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T05:18:48.037

这个结构不是一个数组，这是一个对象初始化器。无论如何，你需要这样的东西：

```
var colorCodes = {
    endangered: '#FFA500',
    shutdown: '#FF0000',
    active: '#00BB00'
};

var state = {
    // What you have there
};

var stateCode = '[State Code]';
var currentColor = colorCodes[state[stateCode].status]; 
```

# excel - 将数据从excel导出到数据集的功能有什么错误？

> ID：11554242
> 
> 赞同：0
> 
> 时间：2012-07-19T05:05:30.897
> 
> 标签：excel, oledb

我有一个将数据从excel导出到数据集的功能，如下所示，

```
public DataSet GetDataFromExcel(string filePath)
{
    string strConn;
    strConn = "Provider=Microsoft.Jet.OLEDB.4.0;" +
    "Data Source=" + filePath + ";" +
    "Extended Properties=Excel 8.0;";
    DataTable dt = new DataTable();
    dt = null;
    using (OleDbConnection oleDB = new OleDbConnection(strConn))
    {
        oleDB.Open();
        dt = oleDB.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
        if (dt == null)
            return null;

        ArrayList arr = new ArrayList();
        //ListItemCollection items = new ListItemCollection();
        int i = 0;

        for (int rowIndex = 0; rowIndex < dt.Rows.Count; rowIndex++)
        {
            string excelSheetName;
            string lastCharacter = "";

            excelSheetName = dt.Rows[rowIndex]["TABLE_NAME"].ToString();
            excelSheetName = excelSheetName.Replace("'", "");
            lastCharacter = excelSheetName.Substring(excelSheetName.Length - 1, 1);
            if (lastCharacter == "$")
            {
                arr.Add(dt.Rows[rowIndex]["TABLE_NAME"].ToString());
                //items.Add(dt.Rows[rowIndex]["TABLE_NAME"].ToString());
            }
        }
        //if (items.Count > 1)
        if (arr.Count > 1)
            return null;

        string sName;
        string query;

        //sName = items[0].ToString();
        sName = arr[0].ToString();
        sName = sName.Replace("'", "");
        sName = sName.Replace("$", "");

        query = "";
        query = String.Format("select * from [{0}$]", sName);
        OleDbDataAdapter da = new OleDbDataAdapter(query, strConn);
        DataSet ds = new DataSet();
        da.Fill(ds);
        return ds;
    }
} 
```

我试图从我的一张有 900 行的 Excel 表中导出数据。该函数仅获得 253 行。但我想要所有的行。功能有什么问题？你能帮帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:10:48.950

下载[它](http://www.microsoft.com/en-us/download/details.aspx?id=13255)，然后使用`Microsoft.ACE.OLEDB.12.0`提供程序。Jet 提供程序有一个硬性限制。

# javascript - 嵌套的 document.writes 和第三方广告在 IE 中不起作用！！！！有什么安全的解决方法吗？

> ID：11554244
> 
> 赞同：9
> 
> 时间：2012-07-19T05:05:36.890
> 
> 标签：javascript, jquery

**注意：我用更多关于我从第三方获得的信息进行了编辑。**

简而言之，我的任务是包含一个 JS 广告标签，该标签调用我们的内部广告服务器机制，然后重试 document.writes 到其外部文件的第三方脚本......它在 IE 中不起作用。有人向我提到嵌套 document.writes 在 IE 中不起作用。我尝试了各种各样的东西.. appendTo / writeln / 分解脚本标签 / 解码脚本标签等.. 似乎没有任何效果。由于这对我来说有些新鲜，也许我忽略了显而易见的事情。

这是它的样子：

```
my html:
<script language="JavaScript" type="text/javascript">
   document.write('\x3Cscript type="text/javascript" src="_some_Path_to_internal_ad_server">\x3C/script>';);
</script> 
```

该调用最终引入了一些如下所示的代码：正如您所见，没有封闭的脚本标签。

```
 tl1 = '989';
   tl2 = 'xnlll';
   document.write('<script type=\"text/javascript\" src=\"_some_Path_to_third_party.js\"><\/script>'); 
```

现在，“_some_Path_to_third_party.js”引入了一些具有 document.writes 和 document.writeln 的 js 代码

我正在脑海中写下这个，所以我不记得脚本标签是如何分解的，但我不认为这是问题所在。我相信它是 IE 中的嵌套 document.writes。

我尝试了各种方法，甚至在我的页面中布置了我的第一个脚本调用。没有 document.writes - 只是

```
<script language="JavaScript" type="text/javascript" src="_some_Path_to_internal_ad_server"> 
```

没有骰子。

但是直接调用外部 js 确实有效（删除了我对内部广告服务器的调用，该服务器随后调用了第三方调用），ala：

```
<script language="JavaScript" type="text/javascript" src="_some_Path_to_internal_ad_server"> 
```

任何人都有处理此类事情的经验以及如何克服它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T01:57:01.270

由于您没有发布足够的详细信息来为您的问题写下完整的答案（您写道：“我正在头脑中写下这个，所以我不记得到底脚本标签是如何分解的”）所以在这里是一些帮助您入门的一般技巧，而不是直接的解决方案。您说您确信问题在于`document.write`呼叫过多，因此我将尽可能集中精力尽量减少他们的数量。希望它能让你最终解决你的问题。

# 额外分号

在您的第一个示例中，您有：

```
document.write(' ... ';); 
```

删除多余的分号将是：

```
document.write(' ... '); 
```

这会导致一些问题吗？如果没有，请继续阅读...

首先是一些基础知识：

# 脚本类型和语言

```
<script language="JavaScript" type="text/javascript"> 
```

“语言”属性已被弃用，所以不要使用它。“type”属性的问题在于 text/javascript MIME 类型已过时（请参阅[RFC4329](http://www.ietf.org/rfc/rfc4329.txt)）并且 application/javascript（正确的类型）并未得到普遍支持。在实践中，每个浏览器都知道没有“类型”它只是 JavaScript，这就是为什么我建议在它是可选的每个标记版本（如 HTML5）中将其排除在外。（除了 MIME 类型之外，还应由服务器指定。）有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/2267476/html-script-tag-type-or-language)。话虽如此，我将仅`<script>`在下面的示例中使用。

# 最小化文档写入

在你的 HTML 中有这个：

```
<script>
    document.write('\x3Cscript src="file.js">\x3C/script>');
</script> 
```

完全等同于：

```
<script src="file.js"></script> 
```

在这种情况下使用它非常有意义`document.write`，除非您在 JavaScript 或类似的东西中动态构建脚本名称，但即使那样，您也可以在没有`document.write`.

如果您不知道脚本的路径并且您正在使用例如。一个名为`path`then 的 JavaScript 变量，你可能会想写这样的东西：

```
<script>
    document.write('\x3Cscript src="' + path + '">\x3C/script>');
</script> 
```

但是您可以使用类似于 Google 用于分析的东西来获得几乎相同的结果：

```
var newScript = document.createElement('script');
newScript.src = path; // or newScript.src = 'file.js';
var firstScript = document.getElementsByTagName('script')[0];
firstScript.parentNode.insertBefore(newScript, firstScript); 
```

或更短，使用`appendChild`：

```
var newScript = document.createElement('script');
newScript.src = path; // or newScript.src = 'file.js';
document.body.appendChild(newScript); 
```

或者更容易使用 jQuery：

```
$('<script />', {src: path}).appendTo('body'); 
```

`path`您的脚本的 URL在哪里。或者部分使用 jQuery 来插入 DOM：

```
var newScript = document.createElement('script');
newScript.src = path; // or newScript.src = 'file.js';
$('body').append(newScript); 
```

你也可以使用 jQuery.getScript：

```
$.getScript(path); 
```

# 更多创意

有关其他想法，请参阅：

*   [Google Analytics 代码异步语法](https://developers.google.com/analytics/devguides/collection/gajs/)
*   [Google Analytics 代码传统语法](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingOverview)（带`document.write`）
*   [jQuery 获取脚本](http://api.jquery.com/jQuery.getScript/)
*   [YUI 得到](http://yuilibrary.com/yui/docs/get/)
*   [要求JS](http://requirejs.org/)

这些是您可以做的一些基本操作，以尽量减少`document.write`. 希望这会让你开始。

# wpf - 带边框的透明窗口

> ID：11554247
> 
> 赞同：1
> 
> 时间：2012-07-19T05:05:54.637
> 
> 标签：wpf, transparent

我正在尝试使 WPF 中的窗口透明，包括边框（最小化、最大化按钮等）。我想让一个窗口的行为类似于 Notepad++ 中的搜索窗口，当它不聚焦时它应该是透明的（透视），而当它聚焦时它应该是不透明的。我不想将 WindowStyle 设置为 None，因为我想保留 WindowStyle。

有任何想法吗？

# c#-4.0 - 协变和逆变是否适用于泛型类型参数？

> ID：11554250
> 
> 赞同：1
> 
> 时间：2012-07-19T05:06:08.640
> 
> 标签：c#-4.0, delegates, covariance

我正在尝试协变地使用委托 Func <object, T>，但没有成功。尽管 T 可以转换为对象，但 Func<object, T> 似乎不能转换为 Func<object, object> 即使 Func<object, string> （或任何其他具体类型）可以转换为 Func<object, object > 正如预期的那样。请参阅下面演示问题的代码。

```
public void Register<T>(Expression<Func<object[], T>> factory, Func<bool> constructorSelectionPredicate) 
    {   object o1;
        T o2 = default(T);
        o1 = o2; // works fine

        Func<object, object> f1 = o => o.GetType();
        Func<object, T> f2 = o => o as T;

        f1 = f2; //gives conversion error.
        f1 = f2 as Func<object, object>; // f2 as Func<object, object> is always null

        Func<object[], string> f1 = input => input.GetType().Name;
        Func<object[], object> f2 = input => new object();

        f2 = f1 // works fine

    } 
```

[msdn 文档](http://msdn.microsoft.com/en-us/library/dd799517.aspx#DelegateVariantTypeParameters)没有直接从我所看到的中解决泛型类型参数的情况。谁能解释这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:15:27.003

您需要对泛型参数应用类型约束。

将您的函数原型更改为：

```
public void Register<T>(Expression<Func<object[], T>> factory, Func<bool> constructorSelectionPredicate) where T : class 
```

在这一行：

```
Func<object[], object> f2 = input => new object(); 
```

...您还需要将您正在创建的对象转换为 T。

# javascript - 禁用 JavaScript，使用 tag can we do validations

> ID：11554251
> 
> 赞同：-3
> 
> 时间：2012-07-19T05:06:09.200
> 
> 标签：javascript

I have a web form it contains some javascript validtions, but when user explicitly turned off Javascript in the browser, validations are not performed and data submitted by the user gets wrong.

My first concern is that how to prevent the user to submit the form.

I have googled and I got that **noscript** tag can be used to tell the user that Javascript is disabled in your browser. What I want to ask is that when the user has disabled the Javascript in the browser, can we do any client side validation so user will not submit wrong data.

And can I write code to disable the submit button like

`document.getElementById("submit").disabled=true` Is this possible.

Any help or suggestion would a great help for me.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T05:10:51.907

如果 JavaScript 被禁用，您的客户端验证都不会正常工作。此外，您禁用按钮的代码也将不起作用，因为它是 javascript :(

如果 JavaScript 被禁用，您可以尝试这样的方法来隐藏您的表单并向用户显示消息。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
.hidden {
    display:none;
}
</style>
</head>

<body>
<noscript>JavaScript is disabled. </noscript>
  <form method="POST" action="http://www.google.com" id="my-form" class="hidden">
     <input type="text" value="Some text here" />

     <input type="submit" value="Submit"  />
  </form>
<script type="text/javascript">
   document.getElementById("my-form").style.display = "block";
</script>
</body>
</html> 
```

​或者您可以执行任何这些方法将用户重定向到另一个页面。

```
<noscript>
  <meta http-equiv="refresh" content="0;url=your-noscript-page.html">
</noscript> 
```

或这个

```
<noscript>
  <a href="your-noscript-page.html">JavaScript is disabled in your browser. Click here to continue</a>
</noscript> 
```

或不使用 Modernizr 库的 Modernizr 方法。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
.no-js form {
    display:none;
}
.js-disabled {
    display:none;
}
.no-js .js-disabled {
    display:block;
}
</style>
</head>

<body class="no-js">
<div class="js-disabled">JavaScript is disabled in your browser.</div>
<form method="POST" action="http://www.google.com" id="my-form">
    <input type="text" value="Some text here" />
    <input type="submit" value="Submit"  />
</form>
<script type="text/javascript">
document.getElementsByTagName("body")[0].className = "";
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T05:14:07.927

**简短的回答：**没有。**长答案：**您应该始终在服务器上进行验证，即使您已经（或者您认为）在客户端进行了验证。期望所有用户都是恶意用户总是最安全的，并将“好”用户视为例外。

# mongodb - MongoDB insert field to existing document if does not already exist

> ID：11554254
> 
> 赞同：5
> 
> 时间：2012-07-19T05:06:33.397
> 
> 标签：mongodb, mongodb-php

I have a document like this (this is very simplified):

```
{
    'name' : 'test',
    'age' : 16
} 
```

and also this

```
{
    'name' : 'test2'
} 
```

I want to set all 'age' to 14 if it does not exist.

How can I do this?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T05:51:32.987

试试`$exists` [运营商](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24exists)：

```
$this->mongolib->update('people', array('age' => array('$exists' => false)), array('$set' => array('age' => 14)), array('upsert' => true, 'multiple' => true)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:48:59.987

我有一个我能想到的迂回方式。我建议您使用正常的更新命令，但只需在您的选择标准中添加一个正则表达式条件，以仅匹配那些没有为“年龄”属性设置值（或数值）的文档。

# visual-c++ - error while running face recognize program

> ID：11554255
> 
> 赞同：1
> 
> 时间：2012-07-19T05:06:53.933
> 
> 标签：visual-c++, opencv

While running face recognition program using OpenCV vr 1.0 I am getting a error commands like unsupported format or combination of formats (unsupported combination of input/output formats) in function `cvConvertImage`.

But I am not using this function in my program, so please give me a solution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:14:42.613

不知何故，其他 opencv 函数也可能调用此函数。当您收到此错误时，您能否提供更多代码？

一些 opencv 函数只接受某些类型的 inpur 图像格式。如果您正在尝试将图像转换为其他格式，请确保 opencv 是否支持此功能。

# ios - Issues XMPP framework (iOS) and EJabberd server

> ID：11554257
> 
> 赞同：3
> 
> 时间：2012-07-19T05:06:56.383
> 
> 标签：ios, xml, xmpp, chat, ejabberd

I want to create a chat application that uses Ejabberd as the server. I setup the ejabberd on my laptop Ubuntu 12.04 and port forward to my public ip. I try to use Pidgin(Ubuntu), Adium(MacOS), IM+(Andriod, IOS). All of them can connect and chat with each other.

However, when I follow the tutorial here [http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-xmpp-integration/](http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-xmpp-integration/) to build my own chat app. I got a number of issues that cant let me chat with other accounts.

Here are the messages sent and received:

```
2012-07-19 11:59:59:749 XMPPStream[49107:403] RosterController: awakeFromNib
2012-07-19 11:59:59:973 XMPPStream[49107:403] AppDelegate: applicationDidFinishLaunching:
2012-07-19 12:00:06:460 XMPPStream[49107:4603] SEND: <?xml version='1.0'?>
2012-07-19 12:00:06:460 XMPPStream[49107:4603] SEND: <stream:stream xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams' version='1.0' to='xxx.xxx.xxx.xxx'>
2012-07-19 12:00:06:464 XMPPStream[49107:4603] RECV: <stream:stream xmlns="jabber:client" xmlns:stream="http://etherx.jabber.org/streams" id="1582664547" from="xxx.xxx.xxx.xxx" version="1.0" stream:lang="en"/>
2012-07-19 12:00:06:465 XMPPStream[49107:4603] RECV: <stream:features xmlns:stream="http://etherx.jabber.org/streams"><starttls xmlns="urn:ietf:params:xml:ns:xmpp-tls"/><mechanisms xmlns="urn:ietf:params:xml:ns:xmpp-sasl"><mechanism>PLAIN</mechanism><mechanism>DIGEST-MD5</mechanism><mechanism>SCRAM-SHA-1</mechanism></mechanisms><c xmlns="http://jabber.org/protocol/caps" hash="sha-1" node="http://www.process-one.net/en/ejabberd/" ver="wwrSvLFOLzC92POh074kJuEqYxE="/><register xmlns="http://jabber.org/features/iq-register"/></stream:features>
2012-07-19 12:00:06:465 XMPPStream[49107:403] RosterController: xmppStreamDidConnect:
2012-07-19 12:00:06:466 XMPPStream[49107:403] SEND: <auth xmlns="urn:ietf:params:xml:ns:xmpp-sasl" mechanism="DIGEST-MD5"/>
2012-07-19 12:00:06:468 XMPPStream[49107:3e0b] RECV: <challenge xmlns="urn:ietf:params:xml:ns:xmpp-sasl">bm9uY2U9IjIxNTYzMTM4ODEiLHFvcD0iYXV0aCIsY2hhcnNldD11dGYtOCxhbGdvcml0aG09bWQ1LXNlc3M=</challenge>
2012-07-19 12:00:06:468 XMPPStream[49107:3e0b] SEND: <response xmlns="urn:ietf:params:xml:ns:xmpp-sasl">dXNlcm5hbWU9Imt3ZWluZXIxIixyZWFsbT0iMjAzLjIwNS4xMC4xMjciLG5vbmNlPSIyMTU2MzEzODgxIixjbm9uY2U9Ijg1RUU5MTczLTQ0RTEtNDNDMS1CNzFBLTY3OEE5NTQ2MjU1MiIsbmM9MDAwMDAwMDEscW9wPWF1dGgsZGlnZXN0LXVyaT0ieG1wcC8yMDMuMjA1LjEwLjEyNyIscmVzcG9uc2U9NzMwZWZjNzUxOWIwNzNiNDEzMGU0NjFjMmVmMjliNmIsY2hhcnNldD11dGYtOA==</response>
2012-07-19 12:00:06:502 XMPPStream[49107:4603] RECV: <challenge xmlns="urn:ietf:params:xml:ns:xmpp-sasl">cnNwYXV0aD00YzRjMDk4ZGJhYjk2NmNiMTg3MzVhOTMyYTZhMDkxYw==</challenge>
2012-07-19 12:00:06:502 XMPPStream[49107:4603] SEND: <response xmlns="urn:ietf:params:xml:ns:xmpp-sasl"/>
2012-07-19 12:00:06:854 XMPPStream[49107:4603] RECV: <success xmlns="urn:ietf:params:xml:ns:xmpp-sasl"/>
2012-07-19 12:00:06:854 XMPPStream[49107:4603] SEND: <stream:stream xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams' version='1.0' to='xxx.xxx.xxx.xxx'> 
```

Here are what I observed:

*   When I turn off the ejabberd server, the client app stops working. This mean it tried to connect to the server.
*   On Android, Ubuntu, and MacOS, everytime I login it ask for accepting a certificate. But I dont see it on MY iOs app.
*   It seems that after success, it renegotiates and doesnt receive any response.
*   On the web admin of ejabberd, I dont see any online user. However, I see request is coming in the log. What documents and steps should I follow to debug XMPP application on iOS?

I'm using XCode 4.3.2 iOS 5.1 Ejabberd 2.1.11 on Ubuntu (Linux 32 bits). I tried to debug and google for 2 days but no clue

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T11:50:27.417

我深入研究了框架并在此处提出了修复建议。[https://github.com/robbiehanson/XMPPFramework/issues/81](https://github.com/robbiehanson/XMPPFramework/issues/81)

它现在正在工作。希望它可以节省其他人的时间。

# c - 将 char* 转换为小写会引发段错误

> ID：11554262
> 
> 赞同：1
> 
> 时间：2012-07-19T05:07:38.250
> 
> 标签：c, pointers, char

> **可能重复：**
> [是否可以在 C 中修改 char 字符串？](https://stackoverflow.com/questions/1011455/is-it-possible-to-modify-a-string-of-char-in-c)

我有一个将 char* 转换为小写的功能。这是功能：

```
void toLower(char* word, int length)
{
    int i;

    for(i = 0; i < length; i++) {
        // this I can do
        // printf("%c", tolower(word[i]));

        // this throws segfault
        word[i] = tolower(word[i]);
    }
} 
```

当我从 main 中这样调用它时，它会引发一个段错误：

```
char* needle = "foobar";
toLower(needle, strlen(needle)); 
```

我确定问题出在此处的作业中：

```
word[i] = tolower(word[i]); 
```

但我似乎无法找出正确的方法来做到这一点。我尝试将其传递为`char**`，或做`*(word+i)`，但都导致相同的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T05:09:59.487

您正在尝试*更改*常量 string `"foobar"`。尝试：

```
char needle[] = "foobar"; 
```

这将创建一个包含字符串的*数组*`"foobar"`（编译器安排将数据从常量字符串复制到您可以修改`"foobar"`的数组）。`needle`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T05:11:21.733

您不能修改字符串文字。您可以创建一个动态字符串：

```
char *str = strdup(needle);
toLower(str, strlen(str));
/* ... */
free(str); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T05:10:30.193

问题是这`char *needle = "foobar"`是一个字符串文字——它是一个 const char。为了编译器生成可写字符串，请使用

```
char needle[] = "foobar"; 
```

反而。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T05:27:49.057

无法更改字符串文字。
你可以这样做

```
 word[i] = tolower(word[i]); 
```

仅在两种情况下，要么

```
char needle[] = "foobar"; 
```

或
首先使用 malloc 为 char * 创建内存，然后为其分配一个字符串，如下所示

```
char * str = (char *) malloc(size0f(char)*10);
strcpy(str,"foobar"); 
```

现在你可以使用这个

# html - HTML Canvas - 检索用户绘制的位置

> ID：11554269
> 
> 赞同：1
> 
> 时间：2012-07-19T05:08:28.577
> 
> 标签：html, canvas

我一直在使用以下教程来允许用户在图像上绘制：

[http://www.williammalone.com/articles/create-html5-canvas-javascript-drawing-app/#demo-simple](http://www.williammalone.com/articles/create-html5-canvas-javascript-drawing-app/#demo-simple)

只是简单的演示就足以让用户做我想做的事。

我的下一个任务是获取用户绘制的区域的坐标并将它们存储在数据库中。该申请适用于物理治疗师。这个想法是，用户在他们受伤的身体上画画，然后理疗师可以在以后将图像与绘制的图像一起显示。

真的有2个问题：

1.  如何检索绘制的屏幕区域？
2.  从数据库中检索时，如何将形状重新绘制到图像上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:22:30.900

在本教程中，您有两个数组 - clickX、clickY。在 mouseleave 和 mouseup 之后从这些数组中保存点。这将是该地区。要绘制形状序列化所有区域，以便它们在客户端上可用，并使用重绘方法中的代码绘制所有区域，例如

```
for(var i=0; i < clickX.length; i++)
  {     
    context.beginPath();
    if(clickDrag[i] && i){
      context.moveTo(clickX[i-1], clickY[i-1]);
     }else{
       context.moveTo(clickX[i]-1, clickY[i]);
     }
     context.lineTo(clickX[i], clickY[i]);
     context.closePath();
     context.stroke();
  } 
```

我理解你正确吗？

# liferay - 我可以在 HTML 页面的一部分和 Portal 中使用 Rikulo 吗？

> ID：11554270
> 
> 赞同：1
> 
> 时间：2012-07-19T05:08:57.327
> 
> 标签：liferay, portal, dart, rikulo

是否可以在 HTML 页面的一部分中使用 Rikulo，而不是像 Hello World 示例中所示占用整个空间？此外，我可以将它用作 Liferay 中的 portlet 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:47:05.083

是的，您需要做的就是分配与 Activity.run() 的 containerId 参数匹配的 id。默认情况下，它是 v-main。例如，

```
<link rel="stylesheet" type="text/css" href="../../resources/css/view.css" />
...
<div>Foo Header</div>
....
<div id="v-main" style="width:300px;height:200px"></div>
...
<script type="application/dart" src="Foo.dart"></script>
<script src="../../resources/js/dart.js"></script> 
```

有关详细信息，请参阅[嵌入 HTML 页面](http://docs.rikulo.org/rikulo/latest/Views/Fundamentals/Embed_in_HTML_Page.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:50:36.750

以编程方式，调用 View#addToDocument 并将您希望此视图附加到的 DOM 节点作为第一个参数传递也会有所帮助。

另见： [https ://github.com/rikulo/rikulo/blob/master/client/view/src/View.dart#L476](https://github.com/rikulo/rikulo/blob/master/client/view/src/View.dart#L476)

# algorithm - 在 2^n 组合中找到最佳顺序

> ID：11554274
> 
> 赞同：1
> 
> 时间：2012-07-19T05:09:14.287
> 
> 标签：algorithm

我被要求为我的学校开发一个用于制造环境的简单软件。

这是场景：

我得到了一个尺寸列表 - 每个尺寸都反映了一块木板，例如，我有一块 24" x 30" 的木板、30" x 30"、30" x 48" 等等。这些板是他们切割原材料的过程的副产品。

原材料采用两种不同类型的板尺寸 60" x 120" 和 48" x 96"。

他们想知道从原材料中切割板材的最佳方式——“最佳”方式被定义为原材料和残留物最少的方式。他们还想知道将使用的原材料数量，例如 30 块 60 英寸 x 120 英寸的板和 3 块 48 英寸 x 96 英寸的板。

他们能够水平或垂直切割任何板，这意味着 24" x 30" 可以切割成 24" x 30" 或 30" x 24"。

如果给我总共 50 个板（可能是相同尺寸），我可以有 2^50 种不同的组合 - 这对我来说似乎太长了，因为他们将在数千个不同尺寸的板上运行软件。

我想知道是否有人知道可能适合这种情况的算法。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T05:29:15.883

用于矩形二维切割和包装问题的经典简单算法是[Wang 算法](http://paginas.fe.up.pt/~esicup/tiki-download_file.php?fileId=66)

然而，纯王的算法能够产生最佳的*断头台*切割模式，即所有切割从剩余材料的一个边缘一直移动到相对边缘的模式。它不能产生如下一种非断头台图案

```
+---------+---+
|         |   |
+---+-----+   |
|   |     |   |
|   |     |   |
|   +-----+---+
|   |         |
+---+---------+ 
```

然而，对于许多应用来说，断头台切割模式被认为是足够好的。因此，您可能需要考虑该算法（因为它非常简单）。

还有基于模拟退火技术的近似随机算法（详细描述可以在[VLSI 设计的模拟退火](http://books.google.com/books/about/Simulated_Annealing_for_Vlsi_Design.html?id=1ldJR6BDjkIC)一书中找到（在网上找不到），它们能够产生非断头台图案。

在任何情况下，为此类问题找到精确的解决方案通常需要大量的计算来生成和分析各种可能的变体，这在大多数情况下是不切实际的。大多数时候，人们更喜欢坚持使用好的近似/启发式算法，这些算法工作得更快。Wang 的算法可以使用启发式过滤器的数量进行定制，从而加快搜索速度（冒着丢失最佳解决方案并将其替换为“几乎”最佳解决方案的风险）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:18:33.090

首先想到的是，您可以使用[装箱](http://en.wikipedia.org/wiki/Bin_packing_problem)算法从给定的一块原材料中*包装尽可能多的板。*

您也可以尝试并使用[遗传算法](http://en.wikipedia.org/wiki/Genetic_algorithm)来搜索最佳切割模式。GA 可能（也可能不会）像装箱算法一样持续有效，但是您可以在 GA 上规定运行时间，例如，在一定时间后选择最佳解决方案。

话虽如此，我认为工厂倾向于使用相同尺寸的材料进行批处理，因此最好在实际切割发生之前允许（可能更慢的）装箱算法运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T05:19:42.680

这是一个难题，它与[切削库存问题](http://en.wikipedia.org/wiki/Cutting_stock_problem)非常相似。另见[装箱问题](http://en.wikipedia.org/wiki/Bin_packing)。

# javascript - charAt(i) 方法是否比仅使用 [i] 更快？

> ID：11554275
> 
> 赞同：2
> 
> 时间：2012-07-19T05:09:18.467
> 
> 标签：javascript, string

我正在开发一个处理大字符串的网络应用程序，所以我想知道哪种方式获取单个字符更快，这个：

```
var myStr = 'foo';
return myStr[i]; 
```

或者这个：

```
var myStr = 'foo';
return myStr.charAt(i); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T05:31:01.280

通过括号符号 ( ) 按索引访问字符串中的字符`myStr[i]`不仅在 IE 中不起作用，而且在 ES3 标准中也没有指定（*所有*浏览器都正确实现的标准）。

但是，ES5 规范（当前标准）[确实包含](http://ecma-international.org/ecma-262/5.1/#sec-15.5.5)索引字符（现代浏览器支持）：

> 名为属性的数组索引对应于字符串值的各个字符。

因此，要编写**向后兼容的跨浏览器**代码，您应该通过`charAt`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T05:15:19.830

我不确定哪个更快，但您可能想查看[string.charAt(x) 或 string[x]？](https://stackoverflow.com/questions/5943726/string-charatx-or-stringx) 查看有关为什么 myStr.charAt(i) 比使用 myStr[i] 更好的讨论（答案是浏览器兼容性）

# php - 复杂的 PHP 数学转换，一行

> ID：11554278
> 
> 赞同：1
> 
> 时间：2012-07-19T05:09:27.843
> 
> 标签：php, math

这是我想要做的：

变量`$input`可以等于以下任何值：`-2` `-1` `0` `1` `2`

我需要处理这个输入，以便唯一可能的结果是`-1`、`0`和`1`。数字应转换为最接近的数字，因此`-2`会变成`-1`，`2`会变成`1`，但是`1`，`0`，并且`-1`都将保持原样。

我知道如何使用多行来做到这一点，但我确信有一些方法可以通过嵌套在一起的一组计算来做到这一点。

那有意义吗？让我知道我是否应该澄清。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T05:13:19.940

如果你知道你肯定会得到这些值，你可以使用：

```
<?php
$value = max(-1, min(1, $value));
?> 
```

为了以防万一，我通常会将它们显式转换为整数。

```
<?php
$value = max(-1, min(1, intval($value)));
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:53:54.270

如果你有 GMP 扩展，你可以使用：

```
int gmp_sign(resource $a); 
```

像这样：

```
<?php $value = gmp_sign($value); ?> 
```

如果您没有 GMP 扩展，那么您可以像这样创建这样的函数：

```
<?php
function sign( $number ) {
    return ( $number > 0 ) ? 1 : ( ( $number < 0 ) ? -1 : 0 );
} 
```

由于 -2 和 -1 的符号为负，因此上述函数将返回 -1。符号是 1 和 2 是正数，所以上面的函数会返回 1。0 没有符号，所以上面的函数会返回 0。

# cuda - CUDA：3D 网格中的全局唯一线程索引

> ID：11554280
> 
> 赞同：3
> 
> 时间：2012-07-19T05:09:36.650
> 
> 标签：cuda

正如问题所述，如果我有一个 3D 网格块，获取一个线程的全局唯一索引的公式是什么？

让我们将块本身保持为一维。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T22:37:03.207

```
// unique block index inside a 3D block grid
const unsigned long long int blockId = blockIdx.x //1D
        + blockIdx.y * gridDim.x //2D
        + gridDim.x * gridDim.y * blockIdx.z; //3D

// global unique thread index, block dimension uses only x-coordinate
const unsigned long long int threadId = blockId * blockDim.x + threadIdx.x; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-12T08:25:39.307

派对有点晚了，但这是我通常以非常通用的方式处理这个问题的方式，因为它支持任意数量和大小的块（甚至是 2D）：

```
// Compute the offset in each dimension
const size_t offsetX = blockDim.x * blockIdx.x + threadIdx.x;
const size_t offsetY = blockDim.y * blockIdx.y + threadIdx.y;
const size_t offsetZ = blockDim.z * blockIdx.z + threadIdx.z;

// Make sure that you are not actually outs
if (offsetX >= sizeX || offsetY >= sizeY || offsetZ >= sizeZ)
  return;

// Compute the linear index assuming that X,Y then Z memory ordering
const size_t idx = offsetZ * sizeX * sizeY + offsetY * sizeX + offsetX; 
```

请注意，我不是 CUDA 忍者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-02T02:32:37.370

@djmj 的现有答案很好，但是一些重新格式化使它更清楚发生了什么（至少对我的大脑来说 - 这对 CUDA 来说是新的）：

```
long blockId = blockIdx.z  *  gridDim.x*gridDim.y
             + blockIdx.y  *  gridDim.x
             + blockIdx.x;
long threadsPerBlock = blockDim.x;
long i = blockId * threadsPerBlock + threadIdx.x; 
```

`blockId`是*完整* `z`维度“切片”（2D 网格）中的块的总和，加上最终（不完整）切片的*完整*行中的块，加上该（不完整）切片的最后（不完整）行中的块.

“完成”是指当前 (x, y, z) 块“之前”的块（关于我们将它们求和以确定整体块 id 的方式）。

# c# - 为什么我的比赛成功是假的？

> ID：11554282
> 
> 赞同：1
> 
> 时间：2012-07-19T05:09:45.473
> 
> 标签：c#, regex

为什么我的匹配成功等于 false？我已经在 Regexbuddy 中测试了以下模式和输入，它是成功的。

```
string pattern = @"(?i)(<!-- START -->)(.*?)(?i)(<!-- END -->)";
string input = @"Hello
    <!-- START -->
    is there anyone out there?
    <!-- END -->";

Match match = Regex.Match(input, pattern, RegexOptions.Multiline);
if (match.Success) //-- FALSE!
{
    string found = match.Groups[1].Value;
    Console.WriteLine(found);
} 
```

![在此处输入图像描述](../Images/26cdd2fe98e6709143811151cb0f7663.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T05:18:57.173

来自：http: [//msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)

`RegexOptions.Multiline`原因`^`并`$`更改它们的含义，以便它们匹配输入的任何行。它不会导致`.`匹配`\n`。为此，您需要使用`RegexOptions.Singleline`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T05:22:16.313

**试试这个**

```
string pattern = @"(?is)(<!-- START -->)(.*?)(<!-- END -->)";
string input = @"Hello
    <!-- START -->
    is there anyone out there?
    <!-- END -->";

Match match = Regex.Match(input, pattern, RegexOptions.None);
if (match.Success) //-- FALSE!
{
    string found = match.Groups[1].Value;
    Console.WriteLine(found);
} 
```

**使用`s`选项强制您的模式匹配`.`任何字符，包括`\r`and `\n`。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T05:20:07.680

使用单行选项

```
Regex RegexObj = new Regex("(?i)(<!-- START -->)(.*?)(?i)(<!-- END -->)",
        RegexOptions.Singleline); 
```

# php - 重新登录cookie（是否足够安全）

> ID：11554284
> 
> 赞同：0
> 
> 时间：2012-07-19T05:09:58.093
> 
> 标签：php, cookies, pdo

所以我的网站设置为在 30 分钟后销毁会话，我想为用户提供一个记住我的选项。

基本上它会像这样工作，请原谅我的伪代码

```
setcookie("sitename[id]", $userid, time()+60*60*24*30);
setcookie("sitename[pass]", $hasedandsaltedpassword);
setcookie("sitename[username]", $username); 
```

因此，当用户自动注销时，我会检查 cookie 的可用性

```
$count = $dbh->prepare("SELECT id FROM users WHERE name = :name AND id = :id AND pass = :pass");
    $count->bindParam(":name", $_COOKIE["sitename"]["username"]);
    $count->bindParam(":id", $_COOKIE["sitename"]["id"]);
    $count->bindParam(":pass", $_COOKIE["sitename"]["pass"]);
    $count->execute();
    $count = $count->rowCount(); 
```

如果行数大于 0 但不大于 1，那么我为它们设置新的会话变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:04:58.883

这会起作用，但不是特别安全。您只是将预先散列的密码与您的数据库进行比较......因此，由于密码永远不会更改，因此您基本上可以让任何有权访问 cookie 的人只要通过修改 cookie 数据就可以随时登录。

我建议向数据库添加另一个表（或扩展当前用户表）以包含被“记住”的计算机，同样也是该纪念何时到期的字段。这样，您可以做两件额外的事情：1) 如果需要，请提前使登录过期，以及 2) 验证 cookie 没有被扩展。即使那样，它在技术上也不是“安全的”，但你会更接近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:52:52.457

就是这样...但是您需要检查以下内容->如果用户选择记住我，则只需检查此条件->如果您已成功注销，则无需再次检查

# javascript - 在ajax成功中调用self对象失败

> ID：11554286
> 
> 赞同：0
> 
> 时间：2012-07-19T05:10:21.227
> 
> 标签：javascript, ajax

我定义了一个这样的类：

```
var LoadingPolecy={
    initialize:function(){
        return function(){
               this.initialize.apply(this,arguments);
        }    
    }
}
var AjaxLoadingPolecy= LoadingPolecy.initialize();
AjaxLoadingPolecy.prototype={
    initialize:function(name){
        this.name=name;
    },
    AjaxStartPolecy : function(){
        ...
    },
    AjaxStopPolecy : function(){
        ...   
    },
    SetName : function(name){
        ...
    }
}
var TempLoadingPolecy=LoadingPolecy.initialize();
TempLoadingPolecy.prototype={
    initialize:function(displayArea,source,data){
        this.loadingMsgPolecy = new AjaxLoadingPolecy();
                ...
        },
        StartLoadingTempPolecy : function(callback){
        this.loadingMsgPolecy.SetName('view');
        this.loadingMsgPolecy.AjaxStartPolecy();
        var a = $.ajax({
          ...
          success:function(html){
              callback(html);
          }
        });
    },
        EndLoadingTempPolecy : function(html){
           //Cannot call method 'AjaxStopPolecy' of undefined error
        this.loadingMsgPolecy.AjaxStopPolecy();
                ....
        }
} 
```

我似乎这个对象已经改变了，我怎样才能调用/使用我在初始化中定义的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:11:57.733

ajax 成功回调（与大多数其他回调相同）不会给您相同的`this`. 但是，您可以将之前的副本保存`this`到另一个变量中并以这种方式访问​​它：

我不明白你在问你代码的哪一部分，但这里有一个简单的例子，你可以从中调整：

```
initialize:function(displayArea,source,data){
    StartLoadingTempPolecy : function(callback) {
        this.loadingMsgPolecy.SetName('view');
        this.loadingMsgPolecy.AjaxStartPolecy();
        // save copy of `this` for future use in the success handler
        var self = this;
        var a = $.ajax({
          ...
          success:function(html) {
              // you can use the variable `self` here to access the previous this ptr
              callback(html);
          }
    });
}, 
```

# java - 在java中使用抽象类的方法重载的困惑

> ID：11554290
> 
> 赞同：0
> 
> 时间：2012-07-19T05:10:45.533
> 
> 标签：java, abstract-class, overloading

```
abstract class Cell<Q> {
           public abstract Q getValue(); // abstract method
        }
        class Cell1 extends Cell<Integer> {
            public Integer getValue() {// abstract method implementation
                return 0;
            }
        }
        class Cell2 extends Cell<String> {
            public String getValue() {  // abstract method implementation
                return "razeel";
            }
        }
        class test
        {
        public static void main(String[] a)
            {
                Cell obj=new Cell1();
            int ab=(Integer) obj.getValue();  
            Cell objs=new Cell2();
            String str=objs.getValue().toString();
            System.out.println("ab=================== "+ab);
            System.out.println("String=================== "+str);
            }
        } 
```

*   我们可以称之为java中方法重载的例子吗？如果不是为什么？
*   java中是否可以有具有相同签名但返回类型不同的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:21:50.010

这显然不是方法重载。重载意味着您​​的方法具有不同的参数返回类型与重载无关。

```
public void method(int a,int b);
public void method(String s,int b); 
```

或者你可以说不同数量的参数。

```
public void method(int a,int b,int c);
public void method(int a,int b); 
```

你在做什么是压倒一切的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:01:26.593

上面显示的代码示例是方法覆盖的示例。这是java实现运行时多态的方式。在 java 中，如果使用超类引用调用被覆盖的方法，java 会根据调用时引用的对象的类型而不是变量的类型来确定要执行该方法的哪个版本。考虑

```
 class Figure{

        double dim1;
        double dim2;

        Figure(double dim1,double dim2){
            this.dim1=dim1;
            this.dim2=dim2;
        }
        double area(){
            return 0;
        }

    }
    class Rectangle extends Figure{

        Rectangle(double dim1,double dim2){
            super(dim1,dim2);
        }
        double area(){
            double a;
            a=dim1*dim2;
            System.out.println("dimensions of rectangle are "+dim1+" "+dim2);
            return a;
        }

    }
class Triangle extends Figure{

    Triangle(double dim1,double dim2){
        super(dim1,dim2);
    }
    double area(){
        double a=(dim1*dim2)/2;
        System.out.println("base & altitude of triangle are "+dim1+" "+dim2);
        return a;
    }

}
class test{

public static void main(String[] args){
    Figure r;
    Rectangle b=new Rectangle(10,10);
    Triangle c=new Triangle(10,10);
    r=b;
    System.out.println("area of rectangle fig "+r.area());
    r=c;
    System.out.println("area of triangle fig "+r.area());
    } 
```

}

输出：矩形的尺寸为 10.0 10.0 矩形图 100.0 的面积 三角形的底和高度为 10.0 10.0 三角形的面积 50.0

对于第二个 qstn：不。签名意味着独一无二。返回类型不是签名的一部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T05:27:07.333

> 我们可以称之为java中方法重载的例子吗？

不。

> 如果不是为什么？

重载意味着“同名，不同的参数”，但是你有实现方法的子类，仅此而已。

> java中是否可以有具有相同签名但返回类型不同的方法？

不。

# android - 忘记密码发送到android中的电子邮件

> ID：11554295
> 
> 赞同：0
> 
> 时间：2012-07-19T05:11:09.573
> 
> 标签：android

我通过我的android应用程序中的soap web-services使用MySQL连接成功开发了一个登录表单（包括用户名、密码和提交按钮）。
在这里我忘记密码意味着我无法访问我的帐户。那么如何访问我的帐户。所以我添加了一个文本视图（忘记密码？？？点击这里）。我完成了注册页面。注册页面有用户名，密码和电子邮件，所以当我忘记密码时，点击忘记密码文本视图。
然后是忘记密码活动。在这里，当我输入我注册的电子邮件 ID 时，意味着我的密码已发送到我的电子邮件 ID。所以我现在知道我的密码了。我该怎么办？请指导我。

请让我知道遵循的步骤是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:28:43.360

你可以试试这个过程。

1.  让注册的邮箱对所有用户都是唯一的
2.  现在在登录屏幕上保留忘记的用户名和密码按钮。
3.  当用户单击此按钮时，仅询问他的电子邮件地址
4.  继续检查此电子邮件地址，如果找到该电子邮件地址，则将用户名和密码（重置为）发送到该电子邮件地址
5.  否则 Toast 一条消息，表明此电子邮件地址未注册。

# android - 升级到 android sdk tools 20/platform sdk tools 12 后无法再启动应用程序

> ID：11554300
> 
> 赞同：4
> 
> 时间：2012-07-19T05:11:27.150
> 
> 标签：android, adt

我升级了我的 sdk 工具，现在我不能再从 Eclipse 启动应用程序（我仍然可以从命令行安装。当我启动时，我得到一个错误窗口和一个空的设备选择器。错误窗口显示：

```
An error has occurred. See error log for more details.
com.android.ddmlib.IDevice.getName()Ljava/lang/String; 
```

我不确定要查找什么日志。

DDMS 也认为设备正常。我不确定这里出了什么问题，在谷歌或 SO 上找不到任何东西。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T05:29:17.850

卸载然后重新安装工具解决了这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T07:12:57.423

我有同样的问题。这是我的情况。我安装了 adt r18。在 eclipse 中，我将 adt r18 升级到 r20。这个问题出来了。升级 ddms 插件后，它是固定的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T15:04:38.173

我不得不在 Eclipse 中重新安装所有 Android 插件，而不仅仅是 Android 开发工具。现在再次工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-28T21:12:04.927

在 Eclipse 中，转到**Help->Check For Updates**，然后将 Android Tools 更新到最新版本

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T14:18:32.163

只需将您的 DDMS 更新到最新版本的**帮助 > 安装新软件 > 已安装 > Android DDMS**。这解决了我的问题！

# java - 如何在不更改Java中第一个arraylist值的情况下找到两个arraylist之间的区别？

> ID：11554301
> 
> 赞同：3
> 
> 时间：2012-07-19T05:11:32.337
> 
> 标签：java

我有两个名为 fw_week 和 sw_week 的数组列表...现在必须计算 fw_diff 是 fw_week 和 sw_week 之间的差异以及 sw_diff 是 sw_week 和 fw_week 之间的差异...

我用过像下面的脚本，

```
 fw_diff=fw_week;
    sw_diff=sw_week;
    fw_diff.removeAll(sw_week);
    sw_diff.removeAll(fw_week); 
```

在这里，我得到了正确的 fw_diff，但是 fw_week 的值也改变了，现在等于 fw_diff，所以第二个值 sw_diff 给出了错误的值，但我不想改变 fw_week 和 sw_week 值......所以请谁能帮我解决这个问题....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T05:19:29.893

```
fw_diff= fw_week.clone().removeAll(sw_week)
sw_diff=sw_week.clone().removeAll(fw_week) 
```

更高效的一种：

```
fw_diff= fw_week.clone().removeAll(sw_week)
sw_diff=sw_week.clone().removeAll(fw_diff) 
```

在这里，`fw_diff`包含两个列表的交互。所以现在，对于`sw_diff`，我们只需要从 中`fw_diff` 删除`sw_week`。无需删除所有`fw_week`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:15:06.960

您需要克隆阵列：

```
fw_diff=fw_week.clone();
sw_diff=sw_week.clone(); 
```

在您进行任何删除之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T05:18:38.863

我们在我们的应用程序中做同样的事情，如下所示：-

我们的场景是我们有 2 个数组列表，我需要找到第一个和第二个数组列表之间的区别。

以下是代码片段：-

```
this.lstDifference=(ArrayList<String>) ListUtils.subtract(FirstArrayList,SecondArrayList); 
```

可以根据您的两个数组列表更改数组列表的类型。

# c - BullsEye 代码覆盖率

> ID：11554308
> 
> 赞同：1
> 
> 时间：2012-07-19T05:12:27.333
> 
> 标签：c, arm, code-coverage

谁能告诉我如何在手臂处理器上执行代码覆盖率分析？

我可以通过编写测试用例并在我的计算机上运行它们来进行代码覆盖率分析，但是是否有可能在目标设备（ARM 处理器）上不安装代码覆盖率工具的情况下，在代码运行时执行覆盖率分析arm处理器本身？

这将节省大量时间，因为我不会为嵌入式 C 代码中涉及的所有函数和条件显式编写测试用例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:49:55.723

我没有具体的手臂经验。我确实有如何在嵌入式系统中收集测试覆盖率数据的经验（作为嵌入式测试覆盖率工具的设计者）。

您需要以下内容：

*   一种以紧凑格式收集运行时测试覆盖率数据的工具，在嵌入式系统中采用简单且易于定位的结构。
*   嵌入式系统中的一些额外*空间*，足以容纳运行时测试覆盖率数据。在一些空间极其有限的嵌入式系统中，这可能是一个问题。
*   一种导出机制，可以在方便的时候将该数据从嵌入式系统复制到开发系统。
*   工具中的导入机制，可以接受此类导出的数据

有了这三个元素，您现在可以收集测试覆盖率数据：

1.  根据开发系统检测您的代码并编译它。
2.  将目标文件导出到嵌入式系统。
3.  运行您的嵌入式应用程序，以您认为合适的任何方式执行测试
4.  将覆盖数据导出到开发系统
5.  导入测试覆盖工具以解释结果。

我不能说“靶心”，它确实做了某种仪器。我们的[测试覆盖率工具](http://www.semanticdesigns.com/Products/TestCoverage)涵盖多种语言（Java、C、C#、C++ 等等）并具有所有必要的属性（尽管我无法想象一个嵌入式 PL/SQL 应用程序！）。

我们的工具将测试覆盖率数据存储为密集的布尔字节/位向量块（C 和 C++ 的选择，其他语言的字节向量）。这最大限度地减少了嵌入式系统的额外存储需求。即使这太多了，我们的工具也可以让您收集应用程序较小部分的测试覆盖率数据，并结合结果为整个嵌入式应用程序提供测试覆盖率。作为权衡，您可以运行多个测试，但您至少可以做到，并且脚本可以帮助改善步骤的单调乏味。

我们没有规定如何从嵌入式系统导出测试覆盖向量 (TCV)，因为这会限制我们的工具可以处理哪些系统。我们提供了一个“标准”导出功能，可以简单地将向量块直接写入开发系统磁盘文件；在开发系统本身上进行测试覆盖率收集时，该导出系统的使用保持不变（正如您所指出的那样，您已经在某种程度上这样做了）。导出功能被添加到、编译/链接到检测的应用程序以启用使用。通常在程序退出时调用它，但您可以在应用程序中的任何方便点调用它，包括由外部事件触发的点。

在嵌入式上下文中，您将导出函数替换为您自己的函数。它只有大约 50 行代码，所以没有太多可替换的。在大多数嵌入式系统上，都有可用的额外 I/O 端口（并行输出位、串行端口，应有尽有）；编写一个例程，将二进制测试覆盖数据检测到该输出位。任何嵌入式工程师都可以轻松编写位串行器或发送字节到串行端口的代码块。此时，可以从嵌入式系统中导出测试覆盖率数据。如果您的嵌入式系统具有文件系统，那么对代码的更改即使不是不存在也是微不足道的。

最后一步是*捕获*这个比特流。这需要构建一个在开发系统上运行的自定义程序，该程序读取一些可用的硬件输入（串行端口很容易找到，因此很受欢迎）并在内存中重新生成测试覆盖数据的位图。可以将默认导出功能复制到自定义程序中，只需稍作更改即可将此数据移动到磁盘文件中。在这一步之后，测试覆盖交互组件可以读取覆盖数据；它并不关心它来自哪里。

因此，通过对导出过程进行一些自定义，您可以在几乎任意的嵌入式上下文中使用我们的工具。（我们让一位客户使用它来测试嵌入在笔记本电脑电池中的微处理器！）。一位称职的嵌入式工程师大约需要一天的时间来摆弄嵌入式版本的导出功能，以及开发系统驻留部分，然后您就可以尽情收集测试覆盖率了。

我们的客户已经使用我们的 C、C++、C# 和 Java 测试覆盖工具在嵌入式系统中实施了这项技术。

# iphone - 如何确定 iPhone/iPad 中的 App 下载日期

> ID：11554309
> 
> 赞同：1
> 
> 时间：2012-07-19T05:12:38.107
> 
> 标签：iphone, ios, cocoa, ipad

我已经将一个免费应用程序上传到应用程序商店，如果用户下载它，然后如果他/她删除该应用程序，几个月后如果他们下载相同的应用程序，那么此时我如何才能获得免费的第一个下载日期用户第一次下载我的应用的应用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T05:18:47.503

在您的应用程序首次启动时，您可以将日期存储在钥匙串中。从设备中删除应用程序时，不会删除钥匙串项。因此，当用户重新安装应用程序时，您再次检查钥匙串是否存在您的第一个启动日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T05:18:15.817

您可以使用 Flurry 查看下载了多少次，但您无法了解下载时间、下载者以及下载次数。

为此，您可以编写自定义数据库，并且每当您的应用程序成功安装时，您都可以使用 web 服务在该数据库中插入 UDID 和安装日期。

我希望你能理解我试图解释的内容。

只是告诉您，如果您在未经设备所有者许可的情况下存储 UDID，Apple 会拒绝应用程序，因此请在启动时添加一条消息，说明您将保存 UDID，否则 Apple 可能会在 Ios6 版本中拒绝它。

感谢

# ios - 在 iOS 上，从免费版链接到完整版的选项有哪些？

> ID：11554310
> 
> 赞同：0
> 
> 时间：2012-07-19T05:12:41.483
> 
> 标签：ios, uikit

在 iPhone / iPad 屏幕底部显示以下内容： ![在此处输入图像描述](../Images/32dbdc3449f790807a6ff157254962f0.png)

（字体为灰色，“完整版”字样下方有一条虚线......如果用户点击“完整版”，它将把用户带到App Store上的完整版应用程序 - 如果全部都可以2行或所有底线均可点击）

似乎有几个选择：

1.  使用 2 `UILabel`，并使其在底部标签处可点击
2.  使用`UITextView`-- 但是链接的 URL 是否必须在文本中才能被点击，因此也会显示给用户？
3.  使用`UIButton`...并使其可点击...但似乎无法以这种方式制作第二行样式的边框？
4.  使用`UIWebView`——事实上，上面显示的 2 条所需的行是使用 HTML 和 CSS 设置样式的……但是使用`UIWebView`会不会太过分或占用太多内存？

添加这样的链接的好的或最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:27:43.683

如果您以编程方式完成所有操作，则可以使用`UIButton`with type `Custom`，然后添加一些标签作为子视图或进行自定义绘图。

另一种方法是继承 a `UITextView`，并且由于它继承自`UIView`，因此您可以覆盖该`-touchesBegan:withEvent:`方法以打开 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:35:26.430

在完整版本的顶部抛出一个 UILabel 文本和一个空按钮，背景颜色设置为清除

# c# - 连接对象不能加入事务范围

> ID：11554314
> 
> 赞同：1
> 
> 时间：2012-07-19T05:13:34.177
> 
> 标签：c#, entity-framework, sql-server-ce, transactionscope

我正在使用 TransactionScope 来测试数据库操作。这是测试类：

```
// Test class

private TransactionScope _transactionScope = null;

[TestInitialize]
public void Initialize()
{
    _transactionScope = new TransactionScope();
}

[TestCleanup]
public void Cleanup()
{
    if (_transactionScope != null)
    {
        _transactionScope.Dispose();
        _transactionScope = null;
    }
}

[TestMethod]
[DeploymentItem("Db.sdf")]
public void AddToPresentationsTest()
{           
    var item = TestItem();
    var db = new DbEntities();
    var target = new DatabaseController {Entities = db};
    target.AddToItems(item);
    var result = db.Items.Any(p => p.Text.Equals(item.Text));
    Assert.IsTrue(result);
} 
```

TransactionScope 在每次测试之前创建，并在测试完成后处置。当调用 AddToItems 方法时，我收到以下错误：

`System.Data.EntityException: The underlying provider failed on Open. ---> System.InvalidOperationException: The connection object can not be enlisted in transaction scope.`

DatabaseController 具有以下代码：

```
// DatabaseController class

private DbEntities _entities;

public DbEntities Entities
{
    get { return _entities ?? (_entities = new DbEntities());}
    set { _entities = value; }
}

protected override void Dispose(bool disposing)
{
    if (disposing && _entities != null)
    {
        _entities.Dispose();
    }
    base.Dispose(disposing);
}

public void AddToItems(Item item)
{
    Entities.Items.Add(item);
    Entities.SaveChanges();
} 
```

我使用 Sql Server Compact 4.0。你能指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T05:25:32.657

猜测一下，TransactionScope 需要升级为分布式或嵌套事务，[CE 都不支持这两种](http://msdn.microsoft.com/en-us/library/ms172400%28v=sql.90%29.aspx)事务。

这可能会发生，例如因为同时打开了多个连接 - [TransactionScope 和 SQL Server Compact](https://stackoverflow.com/questions/6690475/transactionscope-and-sql-server-compact)

然而，CE 确实支持[轻量级事务](http://msdn.microsoft.com/en-us/library/bb896149%28v=sql.100%29.aspx)，因此理论上只要您的所有连接都使用相同的连接字符串，并且您在打开另一个连接之前关闭每个连接，`TransactionScope`就不应该升级为分布式。

# android - 是否可以在 Android 上构建像 WebOS 这样的 UI 应用程序

> ID：11554321
> 
> 赞同：1
> 
> 时间：2012-07-19T05:14:23.863
> 
> 标签：android, user-interface, webos

WebOS UI 真的很棒。我怀疑是否有可能在 Android 上构建这样的应用程序。例如，我想管理卡片中正在运行的应用程序，就像 WebOS 中的卡片一样，我只需将卡片翻转即可退出应用程序。这很酷，但我不知道是否可以创建这样的应用程序。如果有人有任何想法或解决方案，请给我帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:56:06.533

我对 webOS 不太了解，但它可以使用 phonegap 构建像 web-app 这样的应用程序。
您可以将其转换为 android 应用程序、i-phone 应用程序或 black-berry 应用程序。
它真的很棒。
访问此[链接](http://phonegap.com/)以获取更多信息。

# android-actionbar - GoogleTv LeftNavBar 焦点

> ID：11554322
> 
> 赞同：2
> 
> 时间：2012-07-19T05:14:25.193
> 
> 标签：android-actionbar, google-tv

我正在为谷歌电视开发应用程序，我必须`left navigation bar`在我的应用程序中使用。我下载了 google tv 示例并正在使用 leftnavbar 以使其按照我的要求工作。我希望它表现得像谷歌电视的一个电视和电影或 youtube 应用程序。当焦点通过 LEFT D-Pad 键移动到其选项卡时它应该展开，当我使用 RIGHT D-Pad 键将焦点从它移开时它应该折叠。

我不知道是否有任何属性可以帮助我实现此功能。

所以我尝试通过注册`setOnFocusChangeListener`监听器并在其中调用`flipOption(LeftNavBar.DISPLAY_AUTO_EXPAND)`函数来强制它按照我想要的方式运行：

```
 private LeftNavBar getLeftNavBar() {
    if (mLeftNavBar == null) {
       -------
       -------
        mLeftNavBar.setOnFocusChangeListener(new View.OnFocusChangeListener() {

            @Override
            public void onFocusChange(View v, boolean hasFocus) {

                flipOption(LeftNavBar.DISPLAY_AUTO_EXPAND);
            }
        });

    }
    return mLeftNavBar;
} 
```

现在，当 leftNavBar 中没有任何内容时，上面的代码可以正常工作。它在接收/失去焦点时显示/隐藏。但是当我在其中添加一些选项卡时它不起作用。

任何想法如何实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:38:05.767

googletv [-android-samples](http://code.google.com/p/googletv-android-samples/)有 LeftNavBar 代码和 LeftNavBarDemo。如果您使用 LeftNavBarDemo，您可以查看需要哪些设置来完成您正在寻找的行为。

它只是设置了正确的选项——你真的不需要 FlipOption onFocusChange——如果你设置了正确的初始选项，它会自动扩展和收缩。我会给你细节，但每个应用程序都是不同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T15:11:59.793

我猜 GTV 团队在 GoogleTV 操作系统中的 View Hierarchy 中添加了一些特殊的调味料，因为当 LeftNavBar 的任何子项获得焦点时，会以某种方式调用下面的这个神奇方法。

```
protected void onDescendantFocusChanged(boolean hasFocus) {
        super.onWindowFocusChanged(hasFocus);
        if (has(mDisplayOptions, LeftNavBar.DISPLAY_AUTO_EXPAND)) {
            setExpanded(hasFocus);
        }
    } 
```

我看不出如何使用其他方法来模仿它，所以我实现了下面的 hack。

1) 在 LeftNavView.java 的 onFinishInflate() 末尾添加以下代码来检测底层列表视图何时获得焦点，以便您可以展开菜单。不幸的是，它并不像使用 hasFocus == false 那样简单地可靠地关闭菜单，因此请参阅第 2 步。

```
@Override
protected void onFinishInflate() {
   //...
   //existing code
   //...
   TabListView tabListView = (TabListView)mTabs.getView();
   tabListView.setOnFocusChangeListener(new OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if (hasFocus)
                setExpanded(true, true);
        }
    });
} 
```

2) 在LeftNavView.java 的focusSearch(boolean hasFocus) 顶部添加以下内容以折叠菜单（如果LeftNavBar 已经有焦点并且DPAD 方向是正确的。

```
@Override
public View focusSearch(View focused, int direction) {
    //if leftnav hasFocus but direction is right then collapse the nav menu
    if (hasFocus() && direction == View.FOCUS_RIGHT) {
        setExpanded(false, true);
    }

    //...
    //existing code
    //...
} 
```

CAVEAT：使用这个 hack，您需要注意在加载时没有请求焦点的视图（调用 .requesFocus() 或在布局中实现 requestFocus/> 标签）。在这种情况下，您的视图将获得焦点，但菜单仍将展开，并且在某些情况下，您将无法使用 dpad 将焦点重新放在菜单上（取决于视图的布局）

如果您想将某些内容集中在新加载的片段中，那么您可以实现并调用下面的方法（在 onActivityCreated() 的末尾）作为解决方法。

```
//e.g. passing in KeyEvent.KEYCODE_DPAD_RIGHT
public static void simulateKey(final int KeyCode) {
        new Thread() {
            @Override
            public void run() {
                try {
                    Instrumentation inst = new Instrumentation();
                    inst.sendKeyDownUpSync(KeyCode);
                } catch (Exception e) {
                    Log.e(TAG, "Exception when sendKeyDownUpSync " + e.toString());
                }
            }
        }.start();
    } 
```

# scala - 为什么 `Some(123).isInstanceOf[Option[List[String]]]` *not* 会给出未经检查的警告？

> ID：11554323
> 
> 赞同：15
> 
> 时间：2012-07-19T05:14:37.677
> 
> 标签：scala, warnings, compiler-warnings, type-erasure, unchecked

当使用`.isInstanceOf[GenericType[SomeOtherType]]`, where`GenericType`和`SomeOtherType`是任意类型（合适的类型）时，由于类型擦除，Scala 编译器会给出未经检查的警告：

```
scala> Some(123).isInstanceOf[Option[Int]]
<console>:8: warning: non variable type-argument Int in type Option[Int] is unchecked since it is eliminated by erasure
              Some(123).isInstanceOf[Option[Int]]
                                    ^
res0: Boolean = true

scala> Some(123).isInstanceOf[Option[String]]
<console>:8: warning: non variable type-argument String in type Option[String] is unchecked since it is eliminated by erasure
              Some(123).isInstanceOf[Option[String]]
                                    ^
res1: Boolean = true 
```

但是，如果`SomeOtherType`它本身是泛型类型（例如`List[String]`），则不会发出警告：

```
scala> Some(123).isInstanceOf[Option[List[String]]]
res2: Boolean = true

scala> Some(123).isInstanceOf[Option[Option[Int]]]
res3: Boolean = true

scala> Some(123).isInstanceOf[Option[List[Int => String]]]
res4: Boolean = true

scala> Some(123).isInstanceOf[Option[(String, Double)]]
res5: Boolean = true

scala> Some(123).isInstanceOf[Option[String => Double]]
res6: Boolean = true 
```

（回想一下元组和是泛型类型`=>`的语法糖）`Tuple2[]``Function2[]`

为什么没有发出警告？（所有这些都在 Scala REPL 2.9.1 中，带有`-unchecked`选项。）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-19T07:11:38.527

我查看了 Scala 编译器源代码，发现了一些有趣的东西

```
scala.tools.nsc.typechecker.Infer 
```

这是您找到警告的地方。如果您仔细查看第 1399 行：

```
def checkCheckable(pos: Position, tp: Type, kind: String) 
```

这是生成警告的地方，您会看到一些嵌套方法，包括检查方法：

```
 def check(tp: Type, bound: List[Symbol]) {
        def isLocalBinding(sym: Symbol) =
          sym.isAbstractType &&
          ((bound contains sym) ||
           sym.name == tpnme.WILDCARD || {
            val e = context.scope.lookupEntry(sym.name)
            (e ne null) && e.sym == sym && !e.sym.isTypeParameterOrSkolem && e.owner == context.scope
          })
        tp match {
          case SingleType(pre, _) =>
            check(pre, bound)
          case TypeRef(pre, sym, args) =>
            if (sym.isAbstractType) {
              if (!isLocalBinding(sym)) patternWarning(tp, "abstract type ")
            } else if (sym.isAliasType) {
              check(tp.normalize, bound)
            } else if (sym == NothingClass || sym == NullClass || sym == AnyValClass) {
              error(pos, "type "+tp+" cannot be used in a type pattern or isInstanceOf test")
            } else {
              for (arg <- args) {
                if (sym == ArrayClass) check(arg, bound)
                else if (arg.typeArgs.nonEmpty) ()   // avoid spurious warnings with higher-kinded types
                else arg match {
                  case TypeRef(_, sym, _) if isLocalBinding(sym) =>
                    ;
                  case _ =>
                    patternWarning(arg, "non variable type-argument ")
                }
              }
            }
            check(pre, bound)
          case RefinedType(parents, decls) =>
            if (decls.isEmpty) for (p <- parents) check(p, bound)
            else patternWarning(tp, "refinement ")
          case ExistentialType(quantified, tp1) =>
            check(tp1, bound ::: quantified)
          case ThisType(_) =>
            ;
          case NoPrefix =>
            ;
          case _ =>
            patternWarning(tp, "type ")
        }
  } 
```

虽然我不是 Scala 编译器方面的专家，但我们都应该感谢这些家伙使代码如此不言自明。让我们看看`tp match`块内部和处理过的案例：

*   如果它是单一类型
*   如果是类型 ref
    *   如果是抽象类型
    *   if 是别名类型
    *   如果它的 Null、Nothing 或 Anyval
    *   **所有其他情况**

如果您查看所有其他情况，还有一行也被评论：

```
else if (arg.typeArgs.nonEmpty) ()   // avoid spurious warnings with higher-kinded types 
```

如果您的类型有其他类型参数（如 Function2 或 Tuple2），这会准确告诉您会发生什么。检查函数返回单元而不执行任何测试。

我不知道这样做的原因是什么，但您可能想在 [https://issues.scala-lang.org/browse/SI](https://issues.scala-lang.org/browse/SI)上打开一个错误， 提供您在此处发布的代码作为出色的测试用例，并且参考我在上面复制的 Infer.scala 源。

# java - 批处理文件错误级别问题

> ID：11554324
> 
> 赞同：2
> 
> 时间：2012-07-19T05:14:49.390
> 
> 标签：java, batch-file

我在 Windows 7 Enterprise 上并从批处理文件中调用一个 jar，该文件根据条件返回 0、1 或 2，我也使用了“System.exit”，

以下是我的批处理脚本

```
@echo off

java -jar "test.jar" %*
set exitcode=%ERRORLEVEL%
echo here is 1st exit code %exitcode%
if %exitcode% == 2 (    
        VERIFY > nul
        set exitcode=%ERRORLEVEL%
        echo here is 2nd exit code after VERIFY %exitcode%
        call test.exe %*
        echo here is 2nd exit code %ERRORLEVEL% 

    if %ERRORLEVEL% == 0    (
           cmd /c "exit /b 0"
           call test1.exe -f
           echo here is 3rd exit code %errorlevel%
    )
)exit /b %errorlevel% 
```

我在上面的代码中所做的是，调用一个 jar 并根据它返回的错误级别，我正在调用另一个 exe，并且再次根据该 exe 的错误级别，我正在调用第三个 exe。问题是，我得到的退出代码是分配的第一个退出代码，即如果 test.jar 存在 2 即使在其他 exe 成功执行后错误级别没有改变。第三个exe永远不会被执行。尝试了不同的调用方法

> 命令退出 /b 0

用于将错误级别重置为 0 但它不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T05:19:28.200

您的问题是在*解析*`cmd`语句时立即扩展环境变量，而不是在执行语句时。这种意义上的陈述包括包括块在内的整体。您需要使用延迟扩展，因此在批处理开始时坚持以下内容：*`if`*

 *```
setlocal enabledelayedexpansion 
```

然后在条件语句中使用`!errorlevel!`而不是`%errorlevel%`（同样 for `exitcode`）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T05:23:29.270

到达第一个 IF 语句时，所有出现的 %ERRORLEVEL% 都将替换为当前的任何内容（与第一个退出代码相同）。

使用！错误级别！和/或 !EXITCODE! 延迟扩展，以便这些变量稍后会扩展，并具有最新的值。

这需要您`setlocal enabledelayedexpansion`在脚本顶部添加。

例如

```
@echo 关闭
setlocal enabledelayedexpansion
设置 FOO=foo
回声%FOO%
如果 1==1 (
   设置 FOO=bar
   回声%FOO%
   回声！FOO！
)

```

产生：

```
富
富
酒吧

```*

# java - 改进开发的 Android 框架/技术

> ID：11554326
> 
> 赞同：2
> 
> 时间：2012-07-19T05:15:03.853
> 
> 标签：java, android, jakarta-ee

我正在计划我的新 Android 项目，我想知道您可以推荐哪些框架/技术。目前我想使用：

*   机械人
*   绿道

还有其他改进Android开发的好工具吗？

感谢帮助！

问候，

马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:34:02.063

如果这是您的第一个项目，请不要使用任何框架。这将使您了解核心平台的工作原理，而不会混淆其上的层。一旦你相当舒服地编写（和阅读！）Android 代码，一定要添加框架以提高工作效率。

至于实际的框架，你想让开发的哪一部分变得更有效率/更容易等等？如果您现在无法回答这个问题，请参见上文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:48:57.977

对于 UI，[ActionBarSherlock](http://actionbarsherlock.com/)非常方便。如果您正在使用数据库，您可能会查看[ORMlite](http://ormlite.com/sqlite_java_android_orm.shtml)。

# delphi - 是什么导致“错误的进程 ID”？

> ID：11554328
> 
> 赞同：3
> 
> 时间：2012-07-19T05:15:17.987
> 
> 标签：delphi, winapi

Delphi 应用程序集合中大约七个 .exe 中的三个仅在一个客户的 64 位 Win7 计算机上失败。

消息是：

> 002f2baf
> 错误进程 ID处的模块 ProgName.exe 中的异常异常

两个应用程序的地址相同，第三个应用程序的地址是 002bd3f。

这是一个独立的应用程序，运行 Paradox/BDE，尽管它的年代久远且我们需要迁移，但它继续在该领域的许多机器上运行我们的应用程序。

我们不做任何线程。

谷歌搜索消息“错误的进程 ID”没有发现任何相关的信息。

关于这条消息的内容有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:35:03.673

根据提供的信息，几乎不可能说出问题的原因。所以你需要的是一种收集更具体信息的方法。我建议使用 madExcept 或 EurekaLog 等调试工具。这些将在错误发生时产生堆栈跟踪，并且通常会为您提供足够的信息来找出根本原因。

# objective-c - 我收到 __NSCFNumber isEqualToString:] 错误

> ID：11554329
> 
> 赞同：1
> 
> 时间：2012-07-19T05:15:18.783
> 
> 标签：objective-c, ios

首先，对不起我的英语，这不是我的母语:)

我遇到了这个崩溃

> “由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'-[__NSCFNumber isEqualToString:]：无法识别的选择器发送到实例 0x68b9d00'”。

我在这里看到了很多类似的错误和问题，但原因与我的非常不同。

我有一个`NSObject`我试图通过一个`prepareForSegue`名为的事件。事件由 3 组成`NSString`，这是我的 Event.h ：

```
@interface              Event : NSObject
{
    NSString*           idEvent;
    NSString*           lat;
    NSString*           lng;
}

@property NSString*     idEvent;
@property NSString*     lat;
@property NSString*     lng;

@end 
```

当我得到另一边的 Event 对象时，我可以输出 Event 的内容`get(NSLog(@"%@", eventGet.lat); )`并且它工作正常。但是当我尝试将其`"eventGet.lat"`放入 a`UILabel`时，我得到了错误。

这是发生错误的代码： DetailEvent 是我获取事件的视图。

细节事件.h：

```
@interface  DetailEvent : UIViewController

@property (weak, nonatomic) IBOutlet UILabel *latEvent;
@property (weak, nonatomic) IBOutlet UILabel *lngEvent;

@property (strong, nonatomic) Event* eventGet;

@end 
```

和 DetailEvent.m ：

```
@implementation DetailEvent

@synthesize latEvent            = _latEvent;
@synthesize lngEvent            = _lngEvent;

@synthesize eventToDisplay      = _eventToDisplay;

- (void)viewDidLoad
{
    [super viewDidLoad];

    // works fine
    NSLog(@"Event lat : %@", _eventToDisplay.lat);

    // here is the crash
    _latEvent.text = _eventToDisplay.lat;
} 
```

这让我很困惑，我将不胜感激！

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T05:18:46.710

据推测，这是因为设置的变量是 NSNumber，而不是 NSString（如声明的那样）。你可以为这个变量实现 setter 并在设置为查找违规者时测试类型是否为 NSString。

# android - 如何在 C++ 中使用 ffmpeg 动态更改视频的音轨？

> ID：11554334
> 
> 赞同：1
> 
> 时间：2012-07-19T05:15:35.187
> 
> 标签：android, c++, audio, video, ffmpeg

我正在尝试在 android 中开发媒体播放器应用程序。我使用海豚播放器的代码作为参考。但我不知道如何在播放视频时动态更改音频和字幕轨道。使用 ffmpeg 的命令行是可能的，但是如何使用 ffmpeg c++ 代码来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T08:03:27.720

视频文件是一个包含一堆流的容器。首先，您必须打开视频文件并提取流信息（对于较小的代码避免错误检查）：

```
AVFormatContext *pFormatCtx;
av_open_input_file( &pFormatCtx, argv[1], NULL, 0, NULL );
av_find_stream_info( pFormatCtx ); 
```

现在您可以迭代流并查找所有音频流：

```
for ( i=0; i != pFormatCtx->nb_streams; i++ )
{
   if (pFormatCtx->streams[i]->codec->codec_type==CODEC_TYPE_AUDIO) audioStreams.push_back( i );
} 
```

选择您要播放的流并获取指向编解码器的指针并打开它：

```
AVCodecContext* aCodecCtx = pFormatCtx->streams[SelectedAudioStream]->codec;
AVCodec* aCodec = avcodec_find_decoder(aCodecCtx->codec_id);
avcodec_open(aCodecCtx, aCodec); 
```

之后像往常一样解码流。

# php - 使用我的页眉和页脚为错误页面设置自定义路由

> ID：11554337
> 
> 赞同：0
> 
> 时间：2012-07-19T05:15:49.597
> 
> 标签：php, codeigniter, routes

在应用程序文件夹中有一个错误文件夹，我可以使用自定义路由覆盖 404 页面，例如：

```
$route['404_override'] = 'my page' 
```

但是其他页面呢？它们是如何被覆盖的？例如 error_general 我尝试了 error_general_override 并没有奏效。我该如何为这些设置路线？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:08:42.633

在最新版本的 CodeIgniter（以及可能的后续版本）中，所有错误视图都在该`/Application/Views/Errors`文件夹中。

您需要手动更新这些以使用您的页眉/页脚。

404覆盖通常用于CMS页面，因此您可以读取路径，检查数据库以查看页面是否存在，如果存在则显示页面，否则显示您自己的404。

高温高压

# android - 谷歌日历 API 构建

> ID：11554340
> 
> 赞同：1
> 
> 时间：2012-07-19T05:16:15.857
> 
> 标签：android, oauth-2.0, google-calendar-api

我正在尝试在使用日历应用程序时了解 Google 服务和 OAuth 2.0。我遇到了这个问题，无法找到解决方案。请让我知道任何方式。`calendar.builder`在下面的代码中，我收到了已弃用的警告。另一种选择是什么？

```
public static Calendar build(GoogleCredential credentials) {
HttpTransport transport = AndroidHttp.newCompatibleTransport();
JacksonFactory jsonFactory = new JacksonFactory();

com.google.api.services.calendar.Calendar service;

service = Calendar.builder(transport, jsonFactory)
 .setApplicationName("Meetrbus/1.0")
    .setJsonHttpRequestInitializer(new JsonHttpRequestInitializer() {
      @Override
      public void initialize(JsonHttpRequest request) {
        CalendarRequest calendarRequest = (CalendarRequest) request;

        //TODO: Get an API key from Google's APIs Console:
       // https://code.google.com/apis/console.
        calendarRequest.setKey(<My Key>);
      }
    }).setHttpRequestInitializer(credentials).build(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:57:40.420

对于[`Calendar.Builder`](http://javadoc.google-api-java-client.googlecode.com/hg/apis/calendar/v3/index.html?com/google/api/services/calendar/Calendar.Builder.html)构造函数已经改变了一点：

```
public Calendar.Builder(HttpTransport transport,
                    JsonFactory jsonFactory,
                    HttpRequestInitializer httpRequestInitializer) 
```

所以你的代码是：

```
service = new Calendar.Builder(transport, jsonFactory, credentials)
    .setApplicationName("Meetrbus/1.0")
    .setJsonHttpRequestInitializer(new JsonHttpRequestInitializer() {
        @Override
        public void initialize(JsonHttpRequest request) {
            CalendarRequest calendarRequest = (CalendarRequest) request;

            //TODO: Get an API key from Google's APIs Console:
            // https://code.google.com/apis/console.
            calendarRequest.setKey(<My Key>);
        }
    }).build(); 
```

# api - 用于游戏开发的图形 API

> ID：11554344
> 
> 赞同：0
> 
> 时间：2012-07-19T05:17:39.653
> 
> 标签：api, graphics, 3d

好吧，我研究了很多，得出了一个关于 API 的基本结论：似乎学习的 API 选择没有那么重要，只要你真的可以学习 3D 编程，或者看起来是这样。

我的背景/当前研究领域：我在编程、算法和面向对象设计方面有扎实的背景。

我制作了一些 2D 游戏：使用 XNA(C#) 和 allegro 5(C++)，我什至为我必须为课程（使用 allegro）制作的一些 2D 游戏编写了一种小框架，以加快我的游戏制作过程，所以对游戏逻辑和游戏循环结构的基本概念比较熟悉。

我用 XNA 做了一些 3D 实验，实际上只是得到了基本的想法。

我对线性代数和微积分有基本但扎实的知识。

我目前正在研究人工智能，机器学习（更具体地说，如果有人想知道：使用马尔可夫逻辑进行阅读系统的关系数据库的规则提取），现在在这个领域做一些研究。

嗯，我喜欢游戏，并且喜欢游戏编程，尤其是 AI 和游戏逻辑。

我现在想转向 3D 游戏开发，尽管我真的不想在图形编程和其他东西上工作太多，但我想拥有知识（嗯，我想知道发生了什么以及如何要利用这一点：如果我想为 3D 环境编写一些好的 AI，我需要很好地了解如何处理它）。

我刚开始（今天）从我读过的内容中阅读 Direct3D 的示例和文档（9 和 11）如果我要学习 DirectX 如果低硬件兼容性和 XP 用户不是我的目标，我应该选择 11 .

我想听听您对我是否应该使用 DirectX 或 SDL/OpenGL/OpenAL 之类的东西的意见我没有任何反对意见我只是想知道对于想要专注于游戏和游戏逻辑的一些新 AI 的人来说，哪个会更好。我将在游戏中使用 C++/Python，在某些工具等中使用一些 C#/XML。好吧，我基本上将在 Windows 环境中/为 Windows 环境开发东西（不反对 linux 或其他东西 - 我将 linux 用于我使用的一些软件的一些 AI 研究）。

好吧，我希望我把我的问题说清楚了，并提前感谢任何愿意提供帮助的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T05:34:54.367

正如[这里](http://en.wikipedia.org/wiki/Comparison_of_OpenGL_and_Direct3D)和@leppie 所说，OpenGL 是跨平台的，因此您必须学习使用*一种*适用于当今大多数平台的框架。

虽然我从未真正使用过 OpenGL，但从我在开源项目方面的经验来看，很难找到好的文档，尽管你很可能会在网上找到大量的示例。因此，您*可能*很难找到好的文档（再次，基于我以前使用过的开源项目）。

另一方面，DirectX 是在 Windows 环境中运行的东西。它似乎也是许多游戏开发者的首选工具，这似乎是您所追求的。使用 DirectX 还可以让您利用 Visual Studio（在我看来，即使不是我用过的最强大的 IDE，它也是一个非常强大的 IDE），如下[所示](http://takinginitiative.net/2010/07/02/setting-up-the-directx-sdk-with-visual-studio-2010/)。

总而言之，您要问的是一场已经持续多年的辩论（[这里](http://blog.wolfire.com/2010/01/Why-you-should-use-OpenGL-and-not-DirectX)和[这里](http://blog.wolfire.com/2010/01/DirectX-vs-OpenGL-revisited)仅举几例）。

编辑：

就像编程世界中的大多数事情一样，如果你尝试列出给定的事情，某个平台会给你带来优势。不同的列表需要不同的平台/框架等。我从来没有真正搞砸过这些技术，但是，我认为微软有时倾向于让使用他们的产品的开发人员的生活比使用开源产品的开发人员更容易一些。

您可以做的是尝试浏览一些代码，或者尝试提出自己的代码，使用这两个框架做同样的事情，然后选择更容易的一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T11:07:04.757

您可能需要记住一些事情：据我所知，OpenGL（毕竟，如果我没有完全错误的树，它代表开放图形库）仅用于图形。另一方面，DirectX 还提供声音、音乐、通过各种控制器等输入的东西，所以如果跨平台不是您的主要问题，并且您想专注于逻辑和 AI，DirectX 可能会帮助您获得一些东西相当快地开始工作，而使用 OpenGL（我不是一般意义上的敲门），您可能需要寻找声音和输入 API。

# iphone - 视图添加但不可见（通过 Storyboard 添加的组件不可见，但通过代码添加的组件可见）

> ID：11554347
> 
> 赞同：2
> 
> 时间：2012-07-19T05:18:07.033
> 
> 标签：iphone, cocoa-touch

**查看结构**

我使用情节提要创建了两个视图（如下所示的“主页”视图和“菜单”视图）：

![在此处输入图像描述](../Images/167a7facc020071dc868bfbaf1c226ff.png)

“主页”视图是带有“静态”单元格的表格视图。菜单视图也是一个带有“动态”（填充从数据库中获取的数据）单元格的表格。

**面临的问题** 当应用程序启动时，我想显示“菜单”视图，在它上方（即隐藏它），我想显示“主页”视图（就像 Facebook 或 Path 应用程序一样，这样当主视图被平移/拖动/滑动，下面的视图即“菜单”视图被显示）。

我在菜单视图的“viewDidLoad”方法中执行此操作：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.viewControllerHome = [[ViewController_Home alloc] init];
    self.viewHome = self.viewControllerHome.view;
    self.viewHome.frame = CGRectMake(0.0,0.0,320.0,480.0);
    [self.view addSubview:self.viewHome];                                     
 } 
```

似乎添加了子视图“viewHome”，但它不可见（尽管我已经设置了框架大小）！我什至尝试在视图上说“setVisible = YES”，但徒劳无功。我肯定说它已添加，因为我在“通过代码”的“主页”视图中添加了一个表情符号（在主页视图控制器代码中使用 self.addSubview）。这个表情是可见的！，但不是我使用 Storyboard 设计的其余组件。见下文：主页视图的表情符号显示在页面的左下角，但视图的其余部分“不可见”。当我点击“view1”、view2'等时，它没有被选中，这意味着 View Home 在它的顶部，但不可见（我通过将 View Home 调整到不同的高度来检查这一点）。

这是主视图的情节提要属性列表...我认为“视图”连接不正常...我说的对吗？

![在此处输入图像描述](../Images/8cddb2f7de60f2d99a21d61a129bf946.png)

以及 Storyboard 中的视图层次结构

![在此处输入图像描述](../Images/c3a5905eef2776d50f1580645e62e3dc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:03:51.740

经过半天多的挣扎，我找到了答案！

这就是我所做的并且它有效：

```
UIStoryboard *myStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
ViewController_Home *viewControllerHome = (ViewController_Home *)[myStoryboard instantiateViewControllerWithIdentifier:@"ViewController_Home"]; 
```

# php - 如何在没有用户名和密码的情况下使用 gmail oauth 获取电子邮件

> ID：11554348
> 
> 赞同：0
> 
> 时间：2012-07-19T05:18:11.137
> 
> 标签：php, gmail

我使用 xoauth 来获取没有用户名和密码的邮件，但它每次都要求授予访问权限

有没有办法将它与谷歌身份验证登录集成

或者我可以将此选项添加到 apiClient 页面，这样它就不会在每次登录时都请求许可

```
 $options = array(
        'requestScheme' => Zend_Oauth::REQUEST_SCHEME_HEADER,
        'version' => '1.0',
        'consumerKey' => $THREE_LEGGED_CONSUMER_KEY,
        'callbackUrl' => getCurrentUrl(),
        'requestTokenUrl' => 'https://www.google.com/accounts/OAuthGetRequestToken',
        'userAuthorizationUrl' => 'https://www.google.com/accounts/OAuthAuthorizeToken',
        'accessTokenUrl' => 'https://www.google.com/accounts/OAuthGetAccessToken'
    ); 
```

此选项用于

```
$consumer = new Zend_Oauth_Consumer($options); 
```

每次我登录时都会出现这个屏幕：

![我希望禁用此批准屏幕](../Images/2c66265e6bd4d067fadddcc1c2d51733.png)

我希望禁用此批准屏幕

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:47:01.397

做不到。如果用户不同意，Google 将不允许您访问用户的详细信息（因此出现确认屏幕）。用户可以选择记住这个选择并且不再显示它，但这不在你的掌控之中。

# php - shell_exec 不能使用动态命令

> ID：11554351
> 
> 赞同：0
> 
> 时间：2012-07-19T05:18:20.630
> 
> 标签：php, bots, shell-exec, dynamic-code

```
<?php 
    ini_set('max_execution_time', 864000);
    $seq = "D:/Ractip/Sequence.txt";
    $mir = "D:/Ractip/mirhominid.txt";
    $shandle = fopen($seq, 'r');
    $sdata = fread($shandle, filesize($seq));
    $mhandle = fopen($mir, 'r');
    $mdata = fread($mhandle, filesize($mir));
    $sexp = explode(">", $sdata);
    $mexp = explode(">", $mdata);
    $i = 1;
    $a = 1;
    $count = count($sexp);

    while($i < $count)
    {
        $name = explode("\n", $mexp[$a]);
        $name = explode(" ", $name[0]);
        $name1 = explode("\n", $sexp[$i]);

        $file2 = "D:\Ractip\mir\\"."$name[1]".".txt";
        $file1 = "D:\Ractip\sequence\\"."name1[0]".".txt";

        if ($i == 1){
            mkdir("D:/Ractip/Interactions/"."$name[1]", 0777);
        }

        $file = "D:/Ractip/Interactions/"."$name[1]"."/"."$name1[0]"."+"."$name[1]".".txt";
        $fhandle = fopen($file, 'w');
        $query = "ractip "."$file1"." "."$file2";

        $exec = shell_exec($query);
        print $exec;
        fwrite($fhandle, $exec);
        fclose($fhandle);
        if ($i == $count){
            $i = 1;
            $a++;
        }else{
            $i++;
        }
    }
?> 
```

这是脚本。我基本上是在使用一个工具来获得大约 3750 万个组合的结果，所以你可以理解这不是我自己可以做的事情，因此出现了这个脚本，之前我将所有候选人分成单独的文件，所以就是我这样称呼它们的 $name 变量的解释。

问题是`shell_exec`命令，初步的谷歌搜索确实没有解释为什么它会这样，但`shell_exec`拒绝处理动态命令，相反，如果我要制作一个静态命令，就像`ractip xy.txt zy.txt`它会处理那样，我需要做的是构建该命令，然后进行`shell_exec`处理，不幸的是它没有这样做，如果有人可以解释为什么这个命令会以这种方式运行以及是否有解决这个故障的方法，那将非常有帮助。

当论坛上的一个人说这些只是 php 做得不好的一些事情时，我终于明白了他的意思。

哦，是的，我正在通过浏览器部署它，不知道这是否有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:07:38.347

在 Windows 和 Linux 上，最好保留所有像“/”这样的斜线。

另外，**看起来您在 $file1 中忘记了 $**：

```
$file2 = "D:/Ractip/mir/" . $name[1] . '.txt';
$file1 = "D:/Ractip/sequence/" . $name1[0] . ".txt"; 
```

最后，以防万一，为了清楚起见，我会写

```
$query = "ractip '$file1' '$file2'"; 
```

或者

```
$query = 'ractip ' . $file1 . ' ' . $file2 ; 
```

您实际上不需要引用单个字符串变量，即 $string 和 "$string" 是同一件事。我确实用单引号 /inside/ $query 引用了 $file1 和 $file2，因为如果名称包含空格，ractip 实用程序会混淆一个文件名在哪里停止而另一个文件名从哪里开始。也许这不是你的情况，但无论如何......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:00:16.793

我在您的代码中观察到的是，在您传递的文件名中，斜杠没有正确转义：

```
$file2 = "D:\\Ractip\\mir\\"."$name[1]".".txt";
$file1 = "D:\\Ractip\\sequence\\"."name1[0]".".txt"; 
```

这可能会导致命令搜索错误的文件

# javascript - 使用 Javascript 将字符串拆分为两个

> ID：11554352
> 
> 赞同：1
> 
> 时间：2012-07-19T05:18:22.600
> 
> 标签：javascript

我有一个字符串 COR000001。我想拆分它，以便我只得到整数 1。如果字符串像 COR000555，我应该得到整数 555。谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T05:28:10.437

最简单的使用方法是去掉前三个字符`"COR"`、`"MCR"`、`"TCP"`等。然后使用`parseInt`适当的参数，如下所示。

```
var str = "COR000555";
var n   = parseInt (str.substr (3), 10); // force parseInt to treat every
                                         // given number as base10 (decimal)

console.log (n); 
```

```
555 
```

* * *

如果开头的“键”并不总是限制为三个字符，您可以使用正则表达式来获取字符串末尾的所有数字。

.. 如下所示；

```
var n = parseInt (str.match (/\d+$/)[0], 10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:33:53.560

我刚刚看到有人回答了这个问题，在我投票之前它被删除了，因此代表他发布了解决方案。

```
var str='COR000050ABC';
var variable=parseFloat(/[0-9]+/g.exec(str)); 
```

虽然有一个小的修改，添加了 parseFloat

# php - HTML 5/PHP 多文件上传字段

> ID：11554353
> 
> 赞同：0
> 
> 时间：2012-07-19T05:18:25.600
> 
> 标签：php, html

我正在尝试构建一个简单的 HTML5 多文件上传器。

```
<input type="file" name="listingimages[]" multiple> 
```

我想修改我在下面提出的代码，使其适用于listingimages []而不是$ _FILES。我尝试了几种不同的变体，但似乎无法获取列表图像 [] 中的文件。我下面的脚本适用于每个单一的上传字段，但我也需要它适用于每个单独的上传数组。

```
$files = $_FILES;

foreach ($files as $field_name => $val) 
{  
        $target_path = "../../uploads/listing/files/";
        $target_path = $target_path . basename($files[$field_name]['name']); 
        move_uploaded_file($files[$field_name]['tmp_name'], $target_path);
        $_POST[$field_name] = $files[$field_name]['name'];  
} 
```

我想做的是修改上述内容以仅适用于listingimages []而不是所有$ _FILES。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:50:24.233

经过进一步研究，我想出了答案：

```
for ($i = 0; $i < count($_FILES['listingimages']['name']); $i++) {
    $target_path = "../../uploads/listing/files/";
    $target_path = $target_path . basename($_FILES['listingimages']['name'][$i]); 
    move_uploaded_file($_FILES['listingimages']['tmp_name'][$i], $target_path);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:21:51.243

您应该能够只修改 foreach：

```
foreach($_FILES['listingimages'] as $field_name => $val) { 
```

# python - Mac OS X Lion Python Ctype CDLL 错误 lib.so.6：找不到图像

> ID：11554355
> 
> 赞同：9
> 
> 时间：2012-07-19T05:18:34.083
> 
> 标签：python, macos, osx-lion

我是 Python 的初学者。当我在 Mac OS X Lion 上使用类型库尝试以下 Python 示例代码时：

```
#hello.py
from ctypes import *
cdll.LoadLibrary("libc.so.6")
libc = CDLL("libc.so.6")
message_string = "Hello World! Hello Python!\n"
libc.printf("Testing :%s",message_string)
// 
```

发生如下错误：

```
Traceback (most recent call last):
File "cprintf.py", line 2, in <module>
cdll.LoadLibrary("libc.so.6")
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ctypes/__init__.py", line 431, in LoadLibrary
return self._dlltype(name)
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ctypes/__init__.py", line 353, in __init__
self._handle = _dlopen(self._name, mode)
OSError: dlopen(libc.so.6, 6): image not found 
```

谁能告诉我这是怎么回事？顺便说一句，我在 Windows 和 Linux 上试过这个；它运作良好。需要我为 ctype 做一些配置。

非常感谢，

瑞奇

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-19T05:22:37.373

Mac OS X 上的共享库往往具有扩展名`.dylib`而不是`.so`. 在这种情况下，`/usr/lib/libc.dylib`就是你想要的 load `libc.dylib`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T05:20:43.453

OS X 使用“.dylib”来扩展它的共享对象，所以你需要使用“libc.dylib”来代替。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-27T21:41:26.713

一个跨平台的解决方案是使用这样的东西：

```
import platform
import ctypes

libc = ctypes.cdll.LoadLibrary("libc.{}".format("so.6" if platform.uname()[0] != "Darwin" else "dylib"))
# or ctypes.CDLL("libc.{}".format("so.6" if platform.uname()[0] != "Darwin" else "dylib")) 
```

不太确定这些替代方案之间有什么区别，因为两者似乎都很好用！

# php - 对在 symfony2 Doctrine 中使用“接口”感到困惑

> ID：11554364
> 
> 赞同：0
> 
> 时间：2012-07-19T05:19:06.423
> 
> 标签：php, interface, symfony, doctrine-orm

我有这门课

`UserInterface ---abstract class User implements Userinterface -------- class Teacher extends User`

现在我很困惑我应该在我的 php 文件中期望什么类型的类

我的意思是在我的论点中我需要输入

`Class Test(UserInterface $user)`

`Class Test(User $user)`

`Class Test (Teacher $user)` 或者`Class Test (Teacher $teacher)`

我很困惑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:12:11.090

使用适合您需求的最通用的一种，因为它使您的代码更加灵活。例如，如果您需要调用的方法存在于 中`UserInterface`，则使用它；另一方面，如果在`User`or中定义了所需的方法`Teacher`，请改用相应的方法。

期待一个接口比期待一个类更灵活，因为在并行层次结构的情况下扩展一个类是不可能的，而在这种情况下你可以实现一个接口。

# python - 将日期时间转换为 unix 时间戳

> ID：11554365
> 
> 赞同：1
> 
> 时间：2012-07-19T05:19:11.263
> 
> 标签：python, datetime, unix-timestamp

今天我和一些同事试图正确地将日期时间转换为非本地时区的时间戳。经过多次讨论，我们仍然不确定如何在一般意义上正确地将日期时间转换为时间戳，并且仅部分确定如何为我们的用例执行此操作：America/New_York 中的日期时间实例来自 pytz 的时区。

所以，我想我会经历一些排列并尝试凭经验弄清楚，因为阅读文档并试图从逻辑上推理出来并没有让我有任何收获。

这是输入数据：

```
pst = pytz.timezone('America/Los_Angeles')
est = pytz.timezone('America/New_York')
utc = pytz.timezone('UTC')

epoch = int(time.time())
# local time for me is Pacific
local_naive = datetime.datetime.fromtimestamp(epoch)
local_aware = datetime.datetime.fromtimestamp(epoch, pst)
est_aware = datetime.datetime.fromtimestamp(epoch, est)
utc_naive = datetime.datetime.utcfromtimestamp(epoch)
utc_aware = datetime.datetime.fromtimestamp(epoch, utc) 
```

结果以四种方式计算：

1.  time.mktime(dt.timetuple())
2.  time.mktime(dt.utctimetuple())
3.  calendar.timegm(dt.timetuple())
4.  calendar.timegm(dt.utctimetuple())

我意识到其中一些本质上是荒谬的，但我试图做到完整:)。

这是输出。这`diff=`部分是为了帮助显示不正确的转换。

```
now epoch                       : 1342671099
est   aware mktime(timetuple)   : 1342681899 diff=-10800
local aware mktime(timetuple)   : 1342671099 diff=0
local naive mktime(timetuple)   : 1342671099 diff=0
utc   aware mktime(timetuple)   : 1342699899 diff=-28800
utc   naive mktime(timetuple)   : 1342696299 diff=-25200
est   aware mktime(utctimetuple): 1342699899 diff=-28800
local aware mktime(utctimetuple): 1342699899 diff=-28800
local naive mktime(utctimetuple): 1342674699 diff=-3600
utc   aware mktime(utctimetuple): 1342699899 diff=-28800
utc   naive mktime(utctimetuple): 1342699899 diff=-28800
est   aware timegm(timetuple)   : 1342656699 diff=14400
local aware timegm(timetuple)   : 1342645899 diff=25200
local naive timegm(timetuple)   : 1342645899 diff=25200
utc   aware timegm(timetuple)   : 1342671099 diff=0
utc   naive timegm(timetuple)   : 1342671099 diff=0
est   aware timegm(utctimetuple): 1342671099 diff=0
local aware timegm(utctimetuple): 1342671099 diff=0
local naive timegm(utctimetuple): 1342645899 diff=25200
utc   aware timegm(utctimetuple): 1342671099 diff=0
utc   naive timegm(utctimetuple): 1342671099 diff=0 
```

从我从这个输出中可以看出，一般来说，调用 calendar.timegm(dt.utctimetuple())*通常*是正确的方法——除非它是一个幼稚的本地时间。好的，我可以解决这个问题......除了我看不到如何区分本地天真时间与任何其他天真时间，这使得无法将任意日期时间对象正确转换为时间戳？真的是这样吗，还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T05:13:21.640

> 我看不出你如何区分当地的天真时间和任何其他天真的时间

确切地。如您所知，naive 意味着“没有附加时区信息”，因此`timegm`被迫推断缺少的信息，并且您的结果表明它推断 naive datetimes 为 UTC。

正如评论中所说，附加了 TZ 的时间应该被视为烫手山芋 - 您应该在获得输入后立即转换为 UTC，并在输出给用户之前转换为本地时间。从长远来看，这将为您节省很多心痛。

# php - 在 while 循环中包含自定义语言文件

> ID：11554366
> 
> 赞同：0
> 
> 时间：2012-07-19T05:19:13.563
> 
> 标签：php, include, while-loop

对不起，如果标题不够清楚，我不知道如何写得更好。

情况是我有一个向用户发送邮件的 cron 作业。我有语言文件，根据用户的配置，我想用他的语言发送邮件。

但我不知道该怎么做。

每个语言文件都有常量定义，例如：

> **en.php**定义（'日期'，'日期'）；定义（'时间'，'时间'）；
> 
> **es.php**定义('DATE','Fecha'); 定义（'时间'，'霍拉'）；

而且我需要根据用户语言显示正确的标签，但我处于一个循环中：

```
while ($row = mysql_fetch_array($res)) {
   if ($row['lang'] == en) //load the english labels 
} 
```

所以我认为我不能在每次迭代中使用像“include_once”这样的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:25:47.980

问题是您使用 PHP 常量，因此一旦设置它们，您就无法在脚本中真正更改它们。尝试将常量及其所有引用重写为变量。

假设您的语言文件是这样命名`lang.code.php`的，并且发送电子邮件的脚本位于`sendemail.php`. 你可以这样做：

```
In lang.en.php
<?php
  $terms['date'] = 'Date';

In lang.es.php
<?php
  $terms['date'] = 'Fecha';

In sendemail.php:
<?php
  function sendEmail($language = 'en')
  {
    include "lang.$language.php";
    extract($terms);
    $to = 'foo@bar.com';
    $subject = 'Test';
    $body = "The $date today is: " . date('r');
    mail(...);
  }

  foreach($users as $user)
    sendEmail($user->preferredLanguage); 
```

`$terms`然后，您可以使用它们在数组中的键来引用语言文件中的术语。当然，您必须为语言文件、目录遍历等创建验证检查。但这是实现它的一种方法。

如果您无法重写代码，那么我建议将所有电子邮件内容放在一个文件中，并用于`file_get_contents()`通过 HTTP 获取电子邮件内容。在该文件中，您将有一个条件来加载您需要的语言文件。

假设将生成电子邮件内容的文件称为`emailcontent.php`，您可以执行以下操作：

```
In lang.en.php
<?php
  define('DATE', 'Date');

In lang.es.php
<?php
  define('DATE, 'Fecha');

In emailcontent.php
<?php
  require "lang.{$_GET['lang']}.php";

  echo 'The ' . DATE . ' today is: ' . date('r');

In sendemail.php
<?php

  $to = 'foo@bar.com';
  $subject = 'Test';

  foreach($users as $user)
  {
    $contents = file_get_contents('http://yourhost.com/emailcontent.php?lang=en');
    mail(...); 
  } 
```

当然，您需要添加一些安全检查以防止本地文件包含、访问 emailcontent.php 等。但这就是它的要点。然而，这在延迟和 PHP 代码的重复编译方面有很大的开销。如果有任何其他方法可以清除每封电子邮件的全局分数，那么这是更好的方法。但如果你不能重写你的代码，这是我能想到的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:20:12.310

在这件事上，您应该根据可以从数据库中获取的语言将模板存储到其自身的数据库中

或者

另一种方法是你必须让每个变量都有条件，比如

```
en.php define('DATE_EN','Date'); define('TIME','Time');
es.php define('DATE_FR','Fecha'); define('TIME','Hora');

if ($row['lang'] == en)
  DATE_EN 
else 
   DATE_FR 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T07:13:23.450

在您的情况下，常量将不起作用，因为它们在执行期间无法更改。

相反，我建议将所有语言信息包含在一个文件中，这些可以是包含不同数组的常量：

**langs.php**

```
define('EN', array(
    'DATE' => 'Date',
    'TIME' => 'Time',
));

define('ES', array(
    'DATE' => 'Fecha',
    'TIME' => 'Hora',
)); 
```

`$row`接下来，您可以为每个用户添加一个值到数组中，或者您可以使用一个变量，如`$lang`每个 while 循环都会覆盖该变量。

```
require_once 'langs.php' //or include_once

while ($row = mysql_fetch_array($res)) {
    if ($row['lang'] == en) { //load the english labels
        $lang = EN;
    } elseif ($row['lang'] == es {
        $lang = ES;
    }

    echo "Welcome {$row['name']}, today it's {$lang['DATE']}" //will display the corresponding $lang value
} 
```

# c# - 如何使用正则表达式提取带有续行的文本？

> ID：11554369
> 
> 赞同：1
> 
> 时间：2012-07-19T05:19:20.357
> 
> 标签：c#, regex

如何使用正则表达式从使用行继续符“_”的源字符串中提取以下内容。请注意，行继续字符必须是该行的最后一个字符。此外，搜索应该从字符串的末尾开始，并在遇到的第一个“（”处终止。那是因为我只对文本末尾发生的事情感兴趣。

想要的输出：

```
var1, _
    var2, _
    var3 
```

来源：

```
...
Func(var1, _
    var2, _
    var3 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T05:31:45.993

**试试这个**

```
(?<=Func\()(?<match>(?:[^\r\n]+_\r\n)+[^\r\n]+) 
```

**解释**

```
@"
(?<=             # Assert that the regex below can be matched, with the match ending at this position (positive lookbehind)
   Func             # Match the characters “Func” literally
   \(               # Match the character “(” literally
)
(?<match>        # Match the regular expression below and capture its match into backreference with name “match”
   (?:              # Match the regular expression below
      [^\r\n]          # Match a single character NOT present in the list below
                          # A carriage return character
                          # A line feed character
         +                # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
      _                # Match the character “_” literally
      \r               # Match a carriage return character
      \n               # Match a line feed character
   )+               # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
   [^\r\n]          # Match a single character NOT present in the list below
                       # A carriage return character
                       # A line feed character
      +                # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
)
" 
```

# java - 使用 java 在 Selenium WebDriver 中垂直向下滚动和向上滚动

> ID：11554370
> 
> 赞同：5
> 
> 时间：2012-07-19T05:19:23.477
> 
> 标签：java, scroll, selenium-webdriver, webdriver

任何人都可以帮助我使用**Java**使用**WebDriver自动****向下滚动功能**吗？

 ****就我而言，一旦我垂直向下滚动鼠标，`"Sign In"`就会显示雅虎邮件（**可见）。**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-26T14:39:59.373

**滚动到页面的元素：**

```
((JavascriptExecutor)driver).executeScript("arguments[0].scrollIntoView();"
                                                              ,webElement); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-19T05:52:32.817

您可以使用以下代码垂直向下滚动：

```
((JavascriptExecutor) driver).executeScript("scroll(0,250);"); 
```

同样，也可以通过将 y 坐标更改为负数来向上滚动：

```
((JavascriptExecutor) driver).executeScript("scroll(0, -250);"); 
```

您还可以使用以下代码： **对于向下滚动：**

```
((JavascriptExecutor) driver).executeScript("window.scrollBy(0,250)", ""); 
```

**向上滚动：**

```
((JavascriptExecutor) driver).executeScript("window.scrollBy(0, -250)", ""); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-24T23:24:51.223

向上滚动应该如下：

```
((JavascriptExecutor) driver).executeScript("scroll(0,-250);"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-01T18:41:13.520

如果您不确定页面的高度并且您要向下滚动到页面的下部，您可以找到该页面的主框架并使用以下代码向下滚动而不使用 scroll 或 scrollBy

```
scr1 = driver.find_element_by_xpath('xpath')
driver.execute_script("arguments[0].scrollTop = arguments[0].scrollHeight", scr1) 
```

这将自动转到页面的最下方。[你可以在这里](https://github.com/tahamokfi/Insta/blob/master/My_Followers.py)看到一个例子。****

# iphone - SDWebImage - 如何从缓存加载图像？

> ID：11554376
> 
> 赞同：2
> 
> 时间：2012-07-19T05:19:51.183
> 
> 标签：iphone, uitableview, uiimage, sdwebimage

我使用`SDWebImage`将图像下载到我的`UITableView`使用中：

```
[cell.imageView setImageWithURL:[NSURL URLWithString:tempPhotoURL] placeholderImage:[UIImage imageNamed:@"temp.jpg"]]; 
```

这完美地工作 - 没有问题。但是，当我单击 TableView 中的任何给定行时，我想将该行的缩略图加载`UIImageView`到我正在导航到的即将到来的详细信息屏幕中。那么我该怎么做呢？我现在是否必须从缓存中获取图像，因为它已经下载了？如果是这样，这个方法/过程是什么？如果这不是要走的路，那是什么？我无法从库中包含的所有文件和方法中弄清楚`SDWebImage`...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:10:21.203

只需使用几乎完全相同的代码来设置图像 - SDWebImage 将检查它是否已经缓存，如果是，它将使用它而不是从 url 获取图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-12T17:28:10.723

尝试这个，

```
 [self.imgView sd_setImageWithURL:[NSURL URLWithString:imageUrl placeholderImage:placeholderUrl options:0 progress:^(NSInteger receivedSize, NSInteger expectedSize) {

//Progress block

} completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL){
             //Completion block
         }]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-11T10:31:18.660

调用同样的方法，你在设置图片时在你的`TableView`in中下载`DetailView`的，它会先检查缓存。这是下载图像的代码片段`SDWebImage`

```
[yourImageView sd_setImageWithURL:[NSURL URLWithString:yourImageUrl]
                          placeholderImage:[UIImage imageNamed:@"placeholder.jpg"]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T22:53:41.967

编码时有很多方法可以实现。想到的一个是确保 UIImageView 是您的详细视图控制器（详细视图控制器 API 的一部分）的可访问属性。然后，您需要做的就是在推送详细视图控制器之前，将单元格的图像视图分配给详细视图的 UIImageView 属性。

或者

创建一个方便的初始化程序并将单元格的图像视图传递给它......等等等等。

# git - 在 GIT 中切换分支的命令

> ID：11554378
> 
> 赞同：1
> 
> 时间：2012-07-19T05:20:00.943
> 
> 标签：git, svn

我曾使用过 SVN，它有一个切换分支的选项，例如 svn switch 分支名称。我不确定 git 是否需要相同的切换才能在另一个分支上工作。我有 2 个分支，例如 1.0 和 1.1。到目前为止，我已经在 1.0 上工作，git pull origin 1.1 和 git push origin 1.1 够吗？还是我应该切换分支？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T05:22:41.027

Git 命令[`git checkout`](http://git-scm.com/docs/git-checkout)用于在分支之间切换。这类似于`svn switch`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T08:19:21.373

```
git checkout branch_name 
```

将切换到 branch_name

如果要创建新分支，则以下命令将很有用

```
$git checkout -b branch_name 
```

# eclipse - 移动eclipse安装目录导致问题

> ID：11554381
> 
> 赞同：3
> 
> 时间：2012-07-19T05:20:17.467
> 
> 标签：eclipse

我最近重新组织了我的 Eclipse 安装目录，以适应各种口味的 Eclipse（Helios、Indigo、Juno），但这导致了一个问题，因为“.eclipse”目录（位于我的主目录中）有子标识 eclipse 版本但以我认为标识安装目录的后缀结尾的文件夹

```
for example: org.eclipse.platform_3.6.1_12345678 
```

因此，通过更改 Eclipse 安装目录，然后启动 Eclipse，创建了一个新的子文件夹，并且我安装的插件的知识丢失了。

为什么 Eclipse 这样做？以及如何管理 Eclipse，以便我可以将 2 个目录绑定在一起，这样我就可以自由移动安装文件夹而不会破坏任何东西？

关于配置（插件）和工作空间，管理多个 Eclipse 安装是否有任何好的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-09T22:27:37.400

默认情况下，eclipse 总是将其本地配置存储在用户的主 .eclipse 文件夹中。不过，您可以覆盖默认值。

在每个不同版本的 eclipse.ini 文件中，您可以添加以下 JVM 参数（确保将此行添加到 -vmargs 行下方）

```
-Dosgi.configuration.area=@user.home/.eclipse<version> 
```

在哪里

```
<version> 
```

是您为该特定版本的 eclipse 选择的任何标识符。

这应该有助于保持不同的配置分开，并防止它们相互踩踏。

希望这可以帮助。

# sql - 排序查询结果而不选择该列但按该列排序？

> ID：11554383
> 
> 赞同：12
> 
> 时间：2012-07-19T05:20:52.617
> 
> 标签：sql, database, sorting, db2

我有一个查询，我必须对 DB2 数据库中的结果进行排序。查询将选择列`empname,salary,status`。但是我必须使用 empno 的 order 对结果进行排序
但是查询不起作用.. 这是查询。

```
select empname, salary, status from emp where salary>5000 order by empno 
```

您可以更新查询以进行排序`empno`而不在选择列时使用它吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T05:29:14.433

除了最后的点（。）之外，您的语法对我来说似乎是正确的。删除点后如果不起作用...

尝试类似的东西

```
SELECT empname, salary, status
  FROM (SELECT   *
            FROM emp
        ORDER BY empno)
 WHERE salary > 5000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-19T19:22:01.817

另一种可能更容易的语法，取决于您如何看待它是使用`with`关键字。这显式地创建了一个具有所需顺序的命名临时表，然后从中进行查询。新查询的顺序将与临时表的顺序相同。

```
WITH temp_table AS (SELECT   *
            FROM emp
        ORDER BY empno)

SELECT empname, salary, status
  FROM temp_table
 WHERE salary > 5000; 
```

@jaychapani 的答案更简洁，并且在功能上做同样的事情，但是`with`语法对于很多其他用例来说是强大的，并且在视觉上将两者分开，这可能会很有帮助，特别是如果你有一个长子查询来做其他事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-29T13:00:50.070

我使用下面的查询来解决这个问题。在这种情况下，我们可以在不显示列的情况下对查询结果进行排序：

```
WITH temp_table
     AS (select distinct(s1.Name),s1.id
         from students s1
         where marks>75
         order by right(s1.Name ,3) asc,s1.id asc
        )

SELECT Name
  FROM temp_table; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-22T10:43:44.503

我不确定，但 DB 上最快的方法是这样的：

```
SELECT empname, salary, status
FROM (
    select empname, salary, status, empno 
    from emp 
    where salary > 5000 
    order by empno ASC
) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-19T05:29:14.440

试试这个

```
select empname, salary, status from emp where salary>5000 order by empno asc 
```

确保列和表名确实存在。

看看：[ORDER BY 子句](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=/sqlp/rbafyorderby.htm)

最好的祝福

# android - 登录/注销功能问题

> ID：11554384
> 
> 赞同：1
> 
> 时间：2012-07-19T05:20:54.033
> 
> 标签：android, sharedpreferences

你好，朋友们早安，

我正在为需要功能的应用程序工作`login/logout`。在这里我登录成功，之后注销也很完美，但是当我尝试`again login`进入给我的应用程序时`406 status code`。在这里，我使用`sharedpreference`s 作为登录/注销功能。

但是当我`restart the application`它随机工作时，意味着它有时可能登录或有时不登录。但是，当`close the emulator`再次开始时，它就完美了。

登录.java

> 请检查`onPostExecute()`以下代码的方法

```
 @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub

            String loginURL = "http://www.cheerfoolz.com/rest/user/login";

            strResponse = util.makeWebCall(loginURL, uName, Password);

              try {
                JSONObject jsonSession = new JSONObject(strResponse);

                session = new SessionID();
                SessionID.sessionId = jsonSession.getString("sessid");
                SessionID.sessionName = jsonSession.getString("session_name");

                JSONObject jsonuser=jsonSession.getJSONObject("user");
                SessionID.userID = jsonuser.getInt("uid");

            } catch (JSONException e1) {
                e1.printStackTrace();
            }

        return null;
    }

    @Override
    public void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

            try {
                if (strResponse.substring(KEY_SUCCESS) != null) {
                    txterror.setText("");

                    SharedPreferences userDetails =getSharedPreferences("userdetails", MODE_PRIVATE);
                    Editor edit = userDetails.edit();
                    edit.putString("username", uName);
                    edit.putString("password", Password);
                    edit.commit();

                } else {
                    txterror.setText("Username and Password Not valid !!!");
                }
            } catch (Exception e) {
                // TODO: handle exception
            }
    } 
```

主.java

> 在主课中，我有一个注销按钮。

```
case R.id.home_btn_feature_logout:

        SessionID.setUserID(0);

        SharedPreferences settings = getSharedPreferences("userdetails", MODE_PRIVATE);
        SharedPreferences.Editor editor = settings.edit();
        editor.remove("username");
        editor.remove("password");
        editor.clear();
        editor.commit();

        login.setVisibility(View.VISIBLE);
        logout.setVisibility(View.GONE);

        break; 
```

在这里我认为会话数据没有正确清除，请让我知道我在哪里做错了。还有另一种登录/注销的解决方案，然后通知我。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:16:57.393

我认为您的 SharedPreferences API 没有任何问题。我检查了您正在使用的 Rest Web 服务 URL 及其 Drupal 站点。您必须先调用 user.logout 才能注销。既然您使用的是 REST，请尝试此操作。我没有对此进行了测试，但它应该可以工作

```
String loginURL = "http://www.cheerfoolz.com/rest/user/logout";

strResponse = util.makeWebCall(loginURL,sessionid); 
```

此外，您可能需要检查是否已正确配置 REST 服务器端点。检查是否已启用 REST 服务端点的 application/x-www-form-urlencoded 内容类型。从服务中的编辑资源转到服务器。因为它是第一次调用登录时工作正常我怀疑这可能是问题。但仍然检查它。

# php - 菜单选项卡选择/活动样式取决于 url 中的 file.php，javascript 函数

> ID：11554385
> 
> 赞同：0
> 
> 时间：2012-07-19T05:21:01.447
> 
> 标签：php, javascript, html

我目前正在使用这个：

```
<a href="t1.php" class="<?php if(end(explode("/", $_SERVER["PHP_SELF"])) == "t1.php") { echo 'active'; } else {} ?>">Tab2</a>
<a href="t2.php" class="<?php if(end(explode("/", $_SERVER["PHP_SELF"])) == "t2.php") { echo 'active'; } else {} ?>">Tab2</a> 
```

但我不喜欢以这种方式使用 php，我认为我在浪费时间在 php 服务器端处理它。基本上我想在javaScript中做这个，当页面加载或加载时，一个javascript函数触发并根据url中的file.php更改类。另外，请避免使用所有 JQuery 脚本/插件和所有类似的东西。

也许还有另一种方法可以有效地做到这一点？

希望我解释得很好。~谢谢，我是人类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:32:24.887

如果您可以向这些元素添加一个 ID attr（只是为了便于操作），您可以执行以下操作（将脚本附加到正文的加载或脚本末尾）：

```
<a href="t1.php" id="tab1">Tab2</a>
<a href="t2.php" id="tab2">Tab2</a> 
```

JavaScript：

```
var ThisLocation = document.location.href;
if(ThisLocation.indexOf('t1.php') !== -1)
{
    document.getElementById('tab1').setAttribute('class', 'active');
}
else if(ThisLocation.indexOf('t2.php') !== -1)
{
    document.getElementById('tab2').setAttribute('class', 'active');
} 
```

# mysql - sql用union和orderby查询一张表

> ID：11554386
> 
> 赞同：0
> 
> 时间：2012-07-19T05:21:03.880
> 
> 标签：mysql, sql, phpmyadmin

我这里有问题。

现在我有三个表（宠物，地址，联系人）：

```
USER TABLE COLUMNS:
          PET_ID_PK
          PETNAME
          ADDRESS_ID_FK
          CONTACT_ID_FK
          GENDER
          OWNER_ID
          BOUGHT_DATE

ADDRESS TABLE COLUMNS:
          ADDRESS_ID_PK
          ADDRESS_STRING

CONTACT TABLE COLUMNS:
          CONTACT_ID_PK
          CONTACT_NUMBER 
```

我想将这些表连接到一个包含列的表中：

```
 PET_ID_PK
          PETNAME
          ADDRESS_STRING
          CONTACT_NUMBER
          GENDER 
```

并且我希望得到属于特定OWNER_ID的宠物，并按照GENDER的顺序显示行（先FEMALE，然后是MALE）。在这种情况下，我可以使用 ORDER BY CASE。

但在每个用户表条目中，ADDRESS_ID_FK 或 CONTACT_ID_FK 将是 NULL 值。因此，参考[联合两个具有不同列数的表](https://stackoverflow.com/questions/2309943/unioning-two-tables-with-different-number-of-columns)中提供的解决方案来抵消具有 NULL 值的列，我想出了查询：

```
SELECT DISTINCT ON (pets.pet_id_pk) * FROM 
((SELECT pet_id_pk, petname, address_string, NULL AS contact_id_fk, gender 
     FROM user JOIN address ON address.address_id_pk=address_id_fk) 
UNION 
(SELECT pet_id_pk, petname, NULL AS address_string, contact_id_fk, gender 
    FROM user JOIN address ON contact.contact_id_pk=contact_id_fk) AS pets 
WHERE OWNER_ID=$1 ORDER BY (CASE WHEN gender=female ELSE 2 END), bought_date DESC 
```

但是，此查询没有相应地工作。

希望有人可以帮助我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:28:45.290

请尝试以下：

```
SELECT u.pet_id_pk, u.petname, a.address_string, c.contact_number, u.gender 
FROM user u
LEFT JOIN address a ON u.address_id_fk=a.address_id_pk
LEFT JOIN contact c ON u.contact_id_fk=c.contact_id_pk
WHERE OWNER_ID=$1 ORDER BY u.gender,bought_date DESC 
```

您可以使用左连接。即使没有匹配结果，LEFT JOIN 也会显示表格。

对于 ORDER BY，我真的不认为需要使用 CASE，因为只使用 ORDER BY，它将显示 FEMALE 跟随 MALE。您有使用 ORDER BY CASE 的具体原因吗？

# version-control - 线下团队发展

> ID：11554388
> 
> 赞同：0
> 
> 时间：2012-07-19T05:21:13.103
> 
> 标签：version-control

我想要一个版本控制系统工具，但离线。就像我在我的计算机上开发一个项目，而有人正在另一台计算机上处​​理这个项目的不同部分。有没有一种工具可以让我从不同的计算机上带来项目挖掘并同步所有更改。

我想拥有版本控制系统的所有功能，如差异、回滚、提交

请推荐一个合适的工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:29:44.587

Git 是一个免费和开源的分布式版本控制系统，旨在快速高效地处理从小型项目到大型项目的所有项目。

[http://git-scm.com](http://git-scm.com)

它可以轻松地在线或离线使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T02:18:00.697

市面上几乎所有的版本控制工具都支持这些功能：diff、rollback、commit、offline等。我在这里列出一些工具供大家参考：

开源

1.  吉特
2.  SVN

商业的

1.  SourceAnywhere（由我工作的公司开发）
2.  微软团队基础服务器

# jquery - jQuery.ajax() 调用返回 JSON.parse 意外字符错误

> ID：11554389
> 
> 赞同：0
> 
> 时间：2012-07-19T05:21:28.893
> 
> 标签：jquery, ajax, json, xmlhttprequest

我正在尝试调试以下 jQuery.ajax() 调用：

```
var rollnum = $('#rollNum').val()
$.ajax({
url: sURL + "myController/myMethod",
type: "POST",
data: {rollnum: rollnum},
dataType: 'json', 
success: function(json){alert(json)},
error:function (xhr, ajaxOptions, thrownError){
       alert(xhr.status);
       alert(thrownError);}
}); 
```

这是方法：

```
function myMethod(){
$query = $this->db->query("SELECT tblontario.Address, tblontario.Municipality FROM tblontario WHERE RollNum = 211010002528200");
$json_address = array();
$json_municipality = array();
foreach ($query->result_array() as $row){
    $json_address[]     = $row['Address'];
    $json_municipality[] = $row['Municipality'];
}
$json['address'] = $json_address;
$json['municipality'] = $json_municipality;
echo json_encode($json);
exit;
    } 
```

目前正在发生的事情是我收到一个错误回复。错误包含以下详细信息：

```
xhr.status: 200; and
thrownError: SyntaxError: JSON.parse: unexpected character 
```

当我查看 firebug 中的 XHR Response 选项卡时，它显示：

```
Reload the page to get source for: http://www.mysite.ca/myController/myMethod 
```

自从我们获得 200 的 xhr.status 以来，某些东西似乎工作正常，但我似乎无法从此调用中检索回 json 数据。谁能给我一个关于问题可能是什么的建议？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T05:36:14.357

将内容的标头设置为 json 类型...这里是设置标头类型的示例。

```
header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json'); 
```

从 jQuery 1.4 开始，JSON 数据以严格的方式解析。

拒绝任何格式错误的 JSON 并引发解析错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T05:31:27.583

服务器返回一个带有代码 200 的重定向页面，而不是其中一个重定向代码。AJAX 调用不会重定向，因为状态代码是 200，并且它无法解码响应，因为它不是 JSON。

要么让服务器返回正确的状态代码，要么以纯文本形式请求页面，以便您可以检查它并在解码之前查找重定向消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T21:27:02.020

在文本编辑器中关闭 BOM（编码 UTF-8 没有 BOM）。BOM 是 UTF8 文件开头的系统（不可见）符号。

# java - OnClicklistener 不工作

> ID：11554396
> 
> 赞同：0
> 
> 时间：2012-07-19T05:22:12.423
> 
> 标签：java, android

我以编程方式加载图像并设置 onclicklistener 但如果我单击图像则它不起作用。

```
ImageView ImgBook = new ImageView(this);
    ImgBook.setImageResource(R.drawable.one);       
    ImgBook.setClickable(true);

ImgBook.setOnClickListener(new OnClickListener() 
{
    public void onClick(View v) 
    {
        //exit code
    }
}); 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:29:13.437

您需要设置 View.onClick .... 所以替换此代码

```
 ImgBook.setOnClickListener(new OnClickListener() 
{

        public void onClick(View v) 
        {
            //exit code
        }
    }); 
```

与下面

```
 ImgBook.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.d("TEST","in onclick");

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:26:06.110

首先弄清楚 imageView 是否注册为监听 onClick 事件。放一个 toast 或 Log.d 消息以查明控件是否将转到 onClick 方法。如果您仍有问题，请参阅以下链接。

要以编程方式设置 ImageView，请执行以下操作：

[以编程方式将图像添加到 RelativeLayout](https://stackoverflow.com/a/10436234/735675)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T05:49:16.037

试试这个代码..

ImageView ImgBook = new ImageView(this); ImgBook.setImageResource(R.drawable.ic_launcher);

```
 LinearLayout lyt=new LinearLayout(this);
    LinearLayout.LayoutParams Params = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    Params.setMargins(6, 0, 6, 0);

    lyt.addView(ImgBook);
    setContentView(lyt);

    ImgBook.setClickable(true);

    ImgBook.setOnClickListener(new OnClickListener() 
    {

        public void onClick(View v) 
        {

        }
    }); 
```

# iphone - 在 NSUserDefaults 中保存 ALAsset URL

> ID：11554399
> 
> 赞同：4
> 
> 时间：2012-07-19T05:22:17.067
> 
> 标签：iphone, ios, xcode

嗨，我有我的`ALAsset URL`保存`NSMutableArray`，

```
"ALAsset - Type:Photo, URLs:assets-library://asset/asset.JPG?id=119A0D2D-C267-4B69-A200-59890B2B0FE5&ex‌​t=JPG", 
"ALAsset - Type:Photo, URLs:assets-library://asset/asset.JPG?id=92A7A24F-D54B-496E-B250-542BBE37BE8C&ex‌​t=JPG", 
"ALAsset - Type:Photo, URLs:assets-library://asset/asset.JPG?id=77AC7205-68E6-4062-B80C-FC288DF96F24&ex‌​t=JPG 
```

我无法保存`NSMutableArray`，`NSUserDefaults`因为它有一个错误`Note that dictionaries and arrays in property lists must also contain only property values.` 我正在考虑使用这个：

```
 - (void)encodeWithCoder:(NSCoder *)encoder {
                //Encode properties, other class variables, etc
                [encoder encodeObject:self.selectedPhotos forKey:@"selectedPhotos"];
            }

            - (id)initWithCoder:(NSCoder *)decoder {
                if((self = [super init])) {
                    //decode properties, other class vars
                    self.selectedPhotos = [decoder decodeObjectForKey:@"selectedPhotos"];
                }
                return self;
            } 
```

然后使用以下代码保存并检索它：

```
 - (void)saveCustomObject:(MyCustomObject *)obj {
                NSData *myEncodedObject = [NSKeyedArchiver archivedDataWithRootObject:obj];
                NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
                [defaults setObject:myEncodedObject forKey:@"myEncodedObjectKey"];
            }

            - (MyCustomObject *)loadCustomObjectWithKey:(NSString *)key {
                NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
                NSData *myEncodedObject = [defaults objectForKey:key];
                MyCustomObject *obj = (MyCustomObject *)[NSKeyedUnarchiver unarchiveObjectWithData: myEncodedObject];
                return obj;
            } 
```

但我不知何故不太明白，仍然在我的代码中崩溃。不知道如何。而且我无法将其保存在 NSUserDefaults 中。希望有人帮忙。确实有一段时间有这个问题。希望有人指导我正确的保存和检索它的路径`NSUserDefaults`。然后回到一个`NSMutableArray`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T11:32:35.547

唯一将`NSUserDefaults`一组受限制的类作为对象。请参阅[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html#//apple_ref/occ/instm/NSUserDefaults/setObject%3aforKey%3a)。您必须注意仅在字典中存储这些类型的值（NSData、NSString、NSNumber、NSDate、NSArray 或 NSDictionary，当然它以递归方式应用）。

要将 URL 存储在 中`NSUserDefaults`，请将它们存储为字符串，然后将它们作为 URL 读回。如果您需要当前格式的字典，您可能需要在保存之前对其进行转换。

```
- (void) saveMyUrls
{
    NSMutableArray* urls = [NSMutableArray arrayWithCapacity:self.myUrls.count];
    for(NSURL* url in self.myUrls) {
        [urls addObject:[url absoluteString]];
    }
    [[NSUserDefaults standardUserDefaults] setObject:urls forKey:@"myUrls"];
}

- (void) loadUrls
{
    NSArray* urls = [[NSUserDefaults standardUserDefaults] objectForKey:@"myUrls"];
    self.myUrls = [NSMutableArray arrayWithCapacity:urls.count];
    for(NSString* urlString in urls) {
        [self.myUrls addObject:[NSURL URLWithString:urlString]];
    }
    [[NSUserDefaults standardUserDefaults] setObject:urls forKey:@"myUrls"];
} 
```

如果您需要保存比 URL 更多的信息，比如用户指定的标签，您可以将对象另存为 a `NSDictionary`，例如

```
- (void) saveMyUrlsWithLabels
{
    NSMutableArray* objs = [NSMutableArray arrayWithCapacity:self.myObjects.count];
    for(MyObject* obj in self.myObjects) {
        [objs addObject:[NSDictionary dictionaryWithKeys:@"url", @"label"
            forObjects:obj.url.absoluteString, obj.userSpecifiedLabel];
    }
    [[NSUserDefaults standardUserDefaults] setObject:objs forKey:@"myObjects"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:40:07.753

也许你应该这样做：

```
- (MyCustomObject *)loadCustomObjectWithKey:(NSString *)key {

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults synchronize]; // note this
    NSData *myEncodedObject = [defaults objectForKey:key];
    MyCustomObject *obj = nil;

    // it would be even better
    // to wrap this into @try-@catch block
    if(myEncodedObject)
    {
        obj = (MyCustomObject *)[NSKeyedUnarchiver unarchiveObjectWithData: myEncodedObject];
    }

    return obj;
} 
```

另请注意，如果您想使用`NSKeyedArchiver`并且`NSKeyedUNarchiver`您的`MyCustomObject`类必须符合`NSCoding`协议。检查[NSCoding 协议参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)和[Archives and Serializations Programming Guide](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/Archiving/Articles/archives.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-04T01:01:58.290

这是另一种方法，是的，您可以使用 NSUserDefaults。基本上你得到资产 URL，保存它，然后将它转换回资产/图像

```
//SET IT
ALAsset *asset3 = [self.assets objectAtIndex:[indexPath row]];
    NSMutableString *testStr = [NSMutableString stringWithFormat:@"%@", asset3.defaultRepresentation.url];

    //NSLog(@"testStr: %@ ...", testStr);

    [[NSUserDefaults standardUserDefaults] setObject:testStr forKey:@"userPhotoAsset"];
    [[NSUserDefaults standardUserDefaults] synchronize];

//GET IT 
NSString *assetUrlStr = [[NSUserDefaults standardUserDefaults] objectForKey:@"userPhotoAsset"];
    NSURL* aURL = [NSURL URLWithString:assetUrlStr];
    NSLog(@"aURL: %@ ...", aURL);

    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    [library assetForURL:aURL resultBlock:^(ALAsset *asset)
     {
         UIImage  *copyOfOriginalImage = [UIImage imageWithCGImage:[[asset defaultRepresentation] fullScreenImage] scale:1.0 orientation:UIImageOrientationUp];

         imgVwPortrait.image = copyOfOriginalImage;

     }
            failureBlock:^(NSError *error)
     {
         // error handling
         NSLog(@"failure-----");
     }]; 
```

# drupal-7 - drupal #default_value 未应用于 drupal_render 中的选择选项

> ID：11554404
> 
> 赞同：5
> 
> 时间：2012-07-19T05:22:37.043
> 
> 标签：drupal-7, render, default-value, drupal-forms, drupal-render

我尝试在表单中打印一个drupal“选择选项”元素。我认为`drupal_render`不应用。`#default_value`除了`#default_value`不应用之外，一切都可以。
问题出在哪里？有人知道我该怎么做吗？接受`#default_value`价值`string`吗？

**这是我的代码的伪代码：**

```
function test_menu(){
$items=array();

    $items['admin/config/regional/test']=array(
    'title' => 'test',
    'description' => t('test'),
    'page callback' =>'drupal_get_form',
    'page arguments' => array('test_function'),

);
$items[]=array();
return $items;
}

function test_function(){
 $header = array
  (
  'test1' => t('test1'),
  'test2'=> t('test2'),
  );
 $a=(1,2,3);
 $$options=array();
 foreach($a as $i=>$v)
  {
    $f['type'] = array(
   '#type' => 'select',
   '#options' => array(1,2,3,4),
   '#default_value'=>1,
    );
$options += array($name=>array( 'test1' => $v,
   'test2'=> drupal_render($f['type']) ,
  }
   $form['table'] = array
   (
   '#type' => 'tableselect',
   '#header' => $header,
   '#options' => $options,
   '#multiple' => FALSE
   //'#empty' => t('No users found'),
   );
   $form['submit'] = array
       (
   '#type' => 'submit',
   '#value' => t('Submit'),
    );
   return $form;
 } 
```

我测试 `textfield`但它也不起作用并且`#default_value`在 drupal_render 中不接受

```
 $f['test3']=array(
    '#type'=>'textfield',
    '#title'=>'test3',
    '#default_value' =>'aaa',
); 
```

我想这是因为使用 drupal_render 。有人有解决方案吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T14:25:54.103

在 drupal_get_form 中使用的 Drupal_render 中，#default_value not set use 必须使用 #value instaed。

```
$f['type'] = array(
'#type' => 'select',
'#options' => drupal_map_assoc(array('1','2','3','4')),
'#value'=> '1',
); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T09:07:18.697

以下代码不起作用：

```
$form['title'] = array(
'#type' => 'select',
'#options' => drupal_map_assoc(array(t('opt1'), t('opt3'), t('opt4'), t('opt5'), t('opt6'))),
'#default_value' => array($default_value_key));

$form['title1'] = array(
'#type' => 'select',
'#options' => drupal_map_assoc(array(t('opt1'), t('opt3'), t('opt4'), t('opt5'), t('opt6'))),
'#default_value' => array($default_value_key));

return $form; 
```

但后来我做了以下事情：

```
$form['group'] = array('#tree' => TRUE);

$form['group']['title'] = array(
'#type' => 'select',
'#options' => drupal_map_assoc(array(t('opt1'), t('opt3'), t('opt4'), t('opt5'), t('opt6'))),
'#default_value' => array($default_value_key));

$form['group']['title1'] = array(
'#type' => 'select',
'#options' => drupal_map_assoc(array(t('opt1'), t('opt3'), t('opt4'), t('opt5'), t('opt6'))),
'#default_value' => array($default_value_key));

return $form; 
```

现在默认值有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-22T21:37:31.530

我也有同样的问题。最后，我找到了一种方法。正如你所说， default_value 不起作用。因此，将 default_value 固定为 0。并更改选项数组，将默认值放在顶部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T12:10:22.167

如果您查看[Drupal 的 Form API](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#select)中的示例，您会看到该`#options`设置采用键值对数组，并且在 中`#default_value`，您应该指定默认值的**键**，而不是字符串值。

此外，根据设置的[文档](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#options)[，`#options`](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#options)期望`#options`String 值。所以你的选择应该更像：

```
$f['type'] = array(
   '#type' => 'select',
   '#options' => drupal_map_assoc(array('1','2','3','4')),
   '#default_value'=> '1',
); 
```

# c++ - 在 Windows 7 中释放写入权限

> ID：11554407
> 
> 赞同：2
> 
> 时间：2012-07-19T05:22:49.957
> 
> 标签：c++, windows-7, uac, .net

我正在尝试发布一个 C++ .Net 应用程序，并且对 Windows UAC 感到非常沮丧。我一直没有太多的经验，因为一直在为 XP 编写。

该程序需要更新一些存储在两个 XML 文件中的属性，如果它没有使用管理员帐户运行，则每次尝试都会被拒绝访问。我已遵循 Microsoft 的建议，并将所有需要修改的文件写入 CSIDL_COMMON_APPDATA 文件夹。安装程序有一个动作，在后者中创建 [Organization}[Program] 结构，并添加具有完全控制权限的安全组 Every One，因为默认情况下，该目录是只读的。我已经验证创建的目录 [Organization}[Program] 实际上包含安装后分配的组和权限。此外，该应用程序有一个带有请求执行级别的清单，我已经尝试过 asinvoker 和 Highestavailable。

除非用户未以管理员身份登录，否则应用程序仍然无法写入目录...

这些机器位于由服务器 2003 控制的域中，但客户端是 XP、vista 和 7 的混合。

拜托，有比我更有经验的人能启发我吗？我应该使用其他文件夹吗？问题是不同的用户可能会登录到计算机并且这些设置是通用的，因此明显的用户文件夹不是一个选项。

我无法使用安装程序将用户添加到文件夹的安全性中，因为我不知道域中的哪个用户将使用该程序，并且在启动时我无法从程序中执行此操作，因为如果用户没有管理员权限程序将被阻止。

请，关于我在这里缺少什么的任何建议或指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:46:14.153

[这](http://social.msdn.microsoft.com/Forums/en/windowssecurity/thread/e87516e7-8983-45bc-ba9e-e32c3e748b73) 可能会讨论您的问题。尤其看

> 应用程序的安装程序需要在 CSIDL_COMMON_APPDATA 的子目录上设置 ACL，以允许用户根据应用程序的要求访问该目录

# python - 在文本中查找字符串和行号 - python

> ID：11554408
> 
> 赞同：0
> 
> 时间：2012-07-19T05:23:01.327
> 
> 标签：python, string

我想在大文本中搜索字符串并检索其行号。是否有一种方法不包括 python 中的 2 个 for 循环。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T05:58:45.597

```
for i, line in enumerate(filehandle, 1):
    if text in line:
        print i, line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:14:28.090

你可以用`filter`它来过滤掉它。提供一个 lambda 函数，该函数对于您想要的条件是正确的（例如，这里是该行的匹配项）。

作为第二个参数，给出你想要检查的所有行的列表（迭代器）。请注意，我使用`izip`, 将`(line, line-number)`元组的迭代器指向 lambda 函数。

请在下面找到函数： 如您所见，这里的限制是这仅适用于少于`2^31 - 1`行数的文件。

另外，请注意，它返回所有匹配行的行号列表。

```
from itertools import izip
def find_line_num_in_file(file, line):
    f = open(file, "r")
    matches = filter(lambda x: line in x[0], izip(f.readlines(), xrange(-1 + 2**31)))
    f.close()
    return [m[1] for m in matches] 
```

如果您碰巧已经拥有这些行（即，不是迭代器），您可以这样做。

```
def find_line_num_in_lines(lines, line):
    matches = filter(lambda x: line in x[0], zip(lines, range(len(lines))))
    return [m[1] for m in matches] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T05:27:13.200

这应该给你索引

```
In [112]: lines = filehandle.readlines()

In [113]: for elem in lines:
   .....:     if elem.find(substr) > -1:
   .....:         print lines.index(elem)
   .....: 
```

包括 substr 多次出现的所有索引

```
In [122]: text = ['abc', 'def', 'ghi']

In [123]: for elem in text:
   .....:     if elem.find('e') > -1:
   .....:         print text.index(elem)
   .....:
1 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-19T05:28:54.470

```
try:
    lstLines = fileHandle.readlines():
    lineNumber = lstLines.index("strSearch")
except:
    print "not found" 
```

# c# - 如何使用 LINQ 选择一个对象？

> ID：11554414
> 
> 赞同：30
> 
> 时间：2012-07-19T05:23:35.273
> 
> 标签：c#, .net, linq, linq-to-entities

我有看起来像这样的数据：

```
UserId   |  SongId
--------   --------
1          1
1          4
1          12
2          95 
```

我也有以下课程：

```
class SongsForUser
{
    public int User;
    public List<int> Songs;
} 
```

我想做的是使用 LINQ 从我的数据中进行选择以创建 SongsForUser 对象的集合。以下是我到目前为止提出的内容：

```
var userCombos = songs.UserSongs.Select(x => new SongsForUser() { User = x.UserId, 
                                                                  Songs = /*What goes here?*/ }); 
```

我将如何填充我的`Songs`列表？

所以结果应该是两个 SongsForUser 对象。对于用户`1`，列表中有 3 个项目`Songs`。对于用户`2`，列表中将有 1 个项目`Songs`。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-19T05:28:39.627

```
songs.UserSongs.GroupBy(x => x.User).Select(g => new SongsForUser() 
{ 
    User = g.Key,
    Songs = g.Select(s => s.SongId).ToList()
}); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-19T05:30:11.467

我怀疑你想要：

```
var songsByUser = songs.UserSongs
                       .GroupBy(song => song.UserId, song => song.SongId)
                       .Select(g => new SongsForUser { User = g.Key,
                                                       Songs = g.ToList() }); 
```

解释一下，之后`GroupBy`你会有一堆组，其中每个组的键是用户 ID，组内的值是歌曲 ID：

```
Key = 1, Values = 1, 4, 12
Key = 2, Value = 95 
```

然后，您只需将其转换为您的`SongsForUser`类型。请注意，在对象初始化程序中调用构造函数时，您不需要显式包含`()`——除非您需要指定构造函数参数，否则它是隐式的。

顺便说一句，您*可以*在一个`GroupBy`电话中完成所有操作：

```
var songsByUser = songs.UserSongs
         .GroupBy(song => song.UserId, song => song.SongId,
                  (user, ids) => new SongsForUser { User = user,
                                                    Songs = ids.ToList() }); 
```

就我个人而言，我通常会发现一个单独的`Select`调用更具可读性。

您还可以使用查询表达式完成所有这些操作：

```
var songsByUser = from song in songs.UserSongs
                  group song.SongId by song.UserId into g
                  select new SongsForUser { User = g.Key, Songs = g.ToList() }; 
```

编辑：以上是“提供者中立的”，但听起来它不适用于 LINQ to Entities。你*也许*可以让它像这样工作：

```
var songsByUser = songs.UserSongs
                       .GroupBy(song => song.UserId, song => song.SongId)
                       .AsEnumerable()
                       .Select(g => new SongsForUser { User = g.Key,
                                                       Songs = g.ToList() }); 
```

该`AsEnumerable`调用将强制在数据库中完成分组，但最终投影（包括`ToList`调用）在本地完成。不过，您应该检查生成的 SQL 的效率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T05:35:42.360

假设您有以下内容：

```
public class SongsForUser
{
    public int UserId;
    public List<int> Songs;
} 
```

然后像这里这样的功能就可以了。该列表只是为了有一些数据进行测试。

```
 public void Group()
    {
        List<Tuple<int, int>> SongRelations = new List<Tuple<int, int>>();

        SongRelations.Add(new Tuple<int, int>(1, 1));
        SongRelations.Add(new Tuple<int, int>(1, 4));
        SongRelations.Add(new Tuple<int, int>(1, 12));
        SongRelations.Add(new Tuple<int, int>(2, 95));

        var list = SongRelations.GroupBy(s => s.Item1)
                                .Select(r => new SongsForUser()
                                {
                                    UserId = r.Key,
                                    Songs = r.Select(t => t.Item2).ToList(),
                                });
    } 
```

`list`之后包含 2 个 SongsForUser 类型的项目。一个用户 1 和一个包含 1、4 和 12 的歌曲列表和一个用户 2 和一个包含 95 的歌曲列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-05T00:09:24.550

以最简单的形式，您可以：

```
List<MapPoint> points = db.PropertyResearches.Where(a => a.deptId == 66).Select(x => new MapPoint { property = x.notes.Substring(0, 10), latitude = x.lat, longitude = x.@long }).ToList(); 
```

# javascript - 如何可靠地去除破坏代码的不可见字符？

> ID：11554416
> 
> 赞同：7
> 
> 时间：2012-07-19T05:23:53.740
> 
> 标签：javascript, unicode, utf-8

我正在尝试构建一个小书签并被这个问题猛烈抨击，我只是能够弄清楚：一个`\u8203`字符，Chrome 在我的代码块中（在粘贴到 JS 控制台后）无济于事地告诉我是一个“无效字符 ILLEGAL” ”。

幸运的是，Safari 告诉我这是一个`\u8203`.

我正在 Sublime Text 2 编辑器中编辑代码，并且以某种方式复制进出它（我也尝试过 TextEdit）无法删除它。

是否有某种网站可以删除除 ASCII 以外的所有字符？

当我尝试另存为 ISO 8859 但它会将其另存为 UTF-8 “因为不支持的字符”。

... 是的。这才是重点。摆脱我不受支持的邪恶角色。

我应该做些什么？在十六进制编辑器中编辑我的文件？

仅供参考，我实际上是通过重新输入代码（顺便说一下来自这个站点）来解决的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-21T12:44:16.137

> 是否有某种网站可以删除除 ASCII 以外的所有字符？

你可以使用[这个网站](http://jsfiddle.net/n9PNs/)

您可以使用以下代码重新创建网站：

```
<!DOCTYPE html>
<html>

    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>- jsFiddle demo</title>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="/css/normalize.css">
        <link rel="stylesheet" type="text/css" href="/css/result-light.css">
        <style type="text/css">
            textarea {
                width: 800px;
                height: 480px;
                outline: none;
                font-family: Monaco, Consolas, monospace;
                border: 0;
                padding: 15px;
                color: hsl(0, 0%, 27%);
                background-color: #F6F6F6;
            }
        </style>
        <script type="text/javascript">
            //<![CDATA[ 
            $(function () {
                $("button").click(function () {
                    $("textarea").val(
                             $("textarea").val().replace(/[^\u0000-\u007E]/g, "")
                    );
                    $("textarea").focus()[0].select();
                });
            }); //]]>
        </script>
    </head>

    <body>
        <textarea></textarea>
        <button>Remove</button>
    </body>

</html> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-02T22:14:52.057

您可以使用正则表达式过滤掉 0-127 中的所有内容。例如在 javascript 中：

```
text.replace(/[^\x00-\x7F]/g, "") 
```

x00 = 0, x7f = 127

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-19T05:32:57.393

好吧，我能想到的最简单的方法是使用`sed`

```
sed -i 's/[^[:print:]]//g' your_script.js
//            ^^^^^ this can also be 'ascii' 
```

或使用`tr`

```
tr -cd '\11\12\15\40-\176' < old_script.js > new_script.js 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-27T19:28:19.363

非技术解决方案：将您的文本粘贴到 Gmail 中的新电子邮件中，然后单击 Tx（清除格式，在格式菜单中）。为我工作。

# ios - 我的 iOS 开发者证书或私钥在 git 中吗？

> ID：11554420
> 
> 赞同：2
> 
> 时间：2012-07-19T05:24:27.853
> 
> 标签：ios, xcode, git

我想知道当我在没有 .gitignore 文件的情况下提交并推送它们时，我的开发人员证书或私钥（或任何我的私人身份）是否存储在 git 中。

如果是，我该如何删除它们或防止在创建新存储库时出现这种情况。

** 当我删除一个本地项目并从 git 克隆整个新项目时，我的代码签名仍然是一样的。

我读过这个链接：[Git ignore file for Xcode projects](https://stackoverflow.com/questions/49478/git-ignore-file-for-xcode-projects) 但似乎他们甚至不关心任何代码签名或者我只是太担心了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:08:27.567

如果这些证书或密钥存储在您的本地存储库中，则*可以*通过 git 添加和提交（然后推送）它们。

但是阅读“[获取”在您的钥匙串中找不到与此配置文件匹配的有效签名身份“警告](https://stackoverflow.com/questions/2714517/getting-a-valid-signing-identity-matching-this-profile-could-not-be-found-in-yo)”，我认为它们根本不会存储在任何存储库中。
它们位于浏览器的密钥库或钥匙串中（最好是 Safari 浏览器），与您的存储库无关。私人 ssh 密钥 ( `~/.ssh`) 也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T05:16:19.847

感谢[Ray Wenderlich](http://www.raywenderlich.com/2915/ios-code-signing-under-the-hood)提供了有关 iOS 代码签名过程的详细信息。

它说项目中不包含任何私人身份（感谢 VonC）。因此，无论如何，不​​要担心在公共 git 存储库上发布您的私人身份，使用[此处](https://stackoverflow.com/questions/49478/git-ignore-file-for-xcode-projects)讨论的 .gitignore是一种很好的做法。

谢谢你们。

# .net - GetLastWin32Error 返回 int 而不是 uint

> ID：11554422
> 
> 赞同：3
> 
> 时间：2012-07-19T05:24:42.517
> 
> 标签：.net, pinvoke

如果从那时起`Marshal.GetLastWin32Error`公开该`Win32` `GetLastError`函数，`Kernel32.DLL`为什么它要重新调整一个 int，而`GetLastError`返回一个无符号的 DWORD。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T09:40:36.113

因为无符号整数不[符合 CLS](http://msdn.microsoft.com/en-us/library/bhc3fa7f.aspx)。在早期，VB.NET 和 J# 无法处理它们，这是四种支持的语言中的两种。这已得到修复，但仍有许多语言可以在 CLR 上运行，但不支持无符号整数，Java 是最著名的例子。

# android - 在可搜索的活动中使用 CursorLoaders

> ID：11554427
> 
> 赞同：0
> 
> 时间：2012-07-19T05:25:47.510
> 
> 标签：android, android-actionbar, android-contentprovider, android-cursor, android-cursorloader

我正在尝试创建一个可与操作栏一起使用的可搜索活动。我有一个从 ContentProvider 提供数据的 CursorAdapter。

我难以理解的是为什么 API 示例（即 searchableDictonary）执行 managedQuery 而不是与 CursorLoaders 进行异步操作。

也许我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:31:48.037

因为这个例子相当古老，`CursorLoaders`当时还不存在。如果装载机适合您，请务必使用它们。你有什么具体问题吗？

# java - 需要澄清 VOIP

> ID：11554428
> 
> 赞同：0
> 
> 时间：2012-07-19T05:25:48.690
> 
> 标签：java, android, servlets, sip, voip

这是我上一个问题的延续[Java SipServlet to build VOIP phone calls (在计算机和模拟电话/移动设备之间)](https://stackoverflow.com/questions/11541847/java-sipservlet-to-build-voip-phone-calls-between-computer-and-analog-phone-mob)

我偶然发现了一个开源软件电话，可以用它来尝试拨打电话，但该软件需要 SIP 提供商。根据我目前在谷歌上的搜索，SIP 电话的目的是在两个 SIP 呼叫者和被呼叫者之间进行电话呼叫，这意味着这两个人必须在其中一个 SIP 提供商处注册。但我目前的目标是让 VOIP 能够呼叫我的普通手机或固定电话（无论他们使用什么电话提供商），而像 Skype 或 Google 电话这样的软件已经可以做到这一点。我现在正在研究 sip servlet，我现在是不是走错了方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:14:48.900

要将 SIP 呼叫转到手机或陆线电话，您需要一个称为 VoIP 网关的硬件，它在 SIP 协议和数字或模拟电话线路之间进行转换。我确信 Skype 和 Google 有一个直接连接到大型运营商的基础设施设置来处理这个问题。

顺便说一句，Skype 不是 SIP，而是使用他们自己专有的 VoIP 协议。

什么是谷歌手机？你指的是谷歌语音吗？

# hadoop - Hadoop mapreduce 示例文档

> ID：11554430
> 
> 赞同：1
> 
> 时间：2012-07-19T05:26:05.010
> 
> 标签：hadoop, mapreduce

我在哪里可以找到下面提到的示例程序的详细文档，我无法在文档中找到它。

```
hduser@canberra:~/work/software/cloudera/hadoop-2.0.0-cdh4.0.0$ hadoop jar src/hadoop-mapreduce-project/hadoop-mapreduce-examples/target/hadoop-mapreduce-examples-2.0.0-cdh4.0.0.jar 
An example program must be given as the first argument.
Valid program names are:
  aggregatewordcount: An Aggregate based map/reduce program that counts the words in the input files.
  aggregatewordhist: An Aggregate based map/reduce program that computes the histogram of the words in the input files.
  bbp: A map/reduce program that uses Bailey-Borwein-Plouffe to compute exact digits of Pi.
  dbcount: An example job that count the pageview counts from a database.
  distbbp: A map/reduce program that uses a BBP-type formula to compute exact bits of Pi.
  grep: A map/reduce program that counts the matches of a regex in the input.
  join: A job that effects a join over sorted, equally partitioned datasets
  multifilewc: A job that counts words from several files.
  pentomino: A map/reduce tile laying program to find solutions to pentomino problems.
  pi: A map/reduce program that estimates Pi using a quasi-Monte Carlo method.
  randomtextwriter: A map/reduce program that writes 10GB of random textual data per node.
  randomwriter: A map/reduce program that writes 10GB of random data per node.
  secondarysort: An example defining a secondary sort to the reduce.
  sort: A map/reduce program that sorts the data written by the random writer.
  sudoku: A sudoku solver.
  teragen: Generate data for the terasort
  terasort: Run the terasort
  teravalidate: Checking results of terasort
  wordcount: A map/reduce program that counts the words in the input files. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T11:06:03.787

AFAIK，所有示例都没有单独的文档。因此，代码是唯一的信息来源。

首先，必须从[ExampleDriver.java](http://svn.apache.org/repos/asf/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-examples/src/main/java/org/apache/hadoop/examples/ExampleDriver.java)中找到有效程序名称 (distbbp) 和 java 类 (oahexamples.pi.DistBbp) 之间的关联。大多数情况下的实际代码（[oahexamples.pi.DistBbp](http://svn.apache.org/repos/asf/hadoop/common/trunk/hadoop-mapreduce-project/hadoop-mapreduce-examples/src/main/java/org/apache/hadoop/examples/pi/DistBbp.java)）都有要发送的参数及其在注释中的描述，如果没有通过代码。

# php - php $POST 动态变量名安全问题

> ID：11554432
> 
> 赞同：2
> 
> 时间：2012-07-19T05:26:14.453
> 
> 标签：php, security, post

我正在考虑制作一个循环来收集我所有的 $_POST 变量并将它们分配给动态命名的变量。像这样的东西（未经测试）

```
 for($i; $i <= $_POST[].length; $i++){
  ${$_POST[i]} = $_POST[i]
  } 
```

但我想知道这样的事情的安全性。然后，这将为发送到页面的每一位发布数据在系统中创建一个变量。即使我编写的脚本没有引用它，该变量是否会造成破坏？这是我应该完全避免的事情吗？我有一些页面发送了很多变量，这样的脚本会阻止大量的写作，但它足够安全吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T05:44:07.603

是的，存在*可能的*安全风险。

假设您`$is_admin`在代码中前面定义了一个变量，该变量赋予某人管理员权限。如果有人发布到该页面

```
$_POST['is_admin'] = true; 
```

那么`$is_admin`现在是真的。不好。

使用有什么问题`$_POST`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T05:44:35.867

这对于安全性和可维护性来说是一个非常糟糕的主意。简单的例子为什么...

```
<?php

if (someRandomSessionCheck()) {
    $isAdminUser = true;
}

if ($isAdminUser) {
    // give access to everything
}

?> 
```

有人可以使用变量“isAdminUser=1”发布到页面，并且可以访问所有内容。

这是一个坏主意的另一个原因是您无法从脚本中清楚地看到创建变量的位置。这会降低脚本的可维护性。如果您现在想要运行脚本，但需要从其他地方而不是 POST 获取数据，该怎么办？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T05:50:35.290

是的，可能存在安全问题/问题，例如，可能会覆盖任何已设置的局部变量，如数据库、配置值等。

所以应该避免这样的事情：

```
$yourImportantVar = 'Something relies on this';

//User POSTS yourImportantVar=overwritten
foreach ($_POST as $key => $value) {
    $$key = $value; 
}
echo $yourImportantVar; //overwritten 
```

但是如果你想实现一个循环来保存一段代码，你可以创建一个允许的数组，你可以循环并从 $_POST 中提取值。

```
foreach (array(
    'name',
    'address',
    'somethingelse',
    'ect'
) as $key) {
    $$key = isset($_POST[$key]) ? $_POST[$key] : null;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T05:46:14.900

目前我能想到的唯一问题是它会覆盖范围内的现有变量。这可能**非常**不安全，具体取决于您对它的处理方式。考虑变量是您正在向其发出 HTTP 请求的 URL。或者更糟的是，一些标志变量会访问代码的某些关键部分。

我将发布一个有关 HTTP 请求的示例：

```
<?php
    $url = "http://safe/url/to/POSTto";
    $var = array("url" => "http://www.mysite.com/url"); //assume this is $_POST
    foreach($var as $key => $value){
        ${$key} = $value;
    }

    //now upon the HttpRequest, your site can receive the (critical) data which was actually meant for the safe site.
?> 
```

编辑：@Galen 已经发布了我正在谈论的标志变量，所以我可能不需要发布任何示例来突出问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T05:53:29.653

PHP 有一个名为[`register_globals`](http://php.net/manual/en/security.globals.php). 它已被弃用（PHP 5.3）并被删除（PHP 5.4），但它反映了您正在寻找的功能。它执行与 PHP 函数相同的[`extract()`](http://php.net/manual/en/function.extract.php)操作，即在当前范围内设置变量，其中包含键名和匹配数组值的值。 **这绝对是一个安全风险**。考虑对身份验证进行不良检查的示例：

```
if($is_logged_in) {
    // Allow execution of destructive actions
} 
```

如果启用此功能（或您模仿它），恶意用户将能够设置变量`$is_logged_in`并绕过登录屏幕。不用担心节省打字。如果您需要在文件开头复制并粘贴这样的代码块：

```
$something = $_POST['something'];
$another   = $_POST['another'];
$stuff     = $_POST['stuff'];
//etc. 
```

它不仅更安全，而且`register_globals`当开始使用未声明的变量时，它不会让开发人员（他们不期待）感到困惑。此外，PHP 已将其删除并且有[很多](https://stackoverflow.com/questions/1417373/why-is-register-globals-so-bad)[反对](http://forum.coppermine-gallery.net/index.php?topic=59569.0)[使用](http://bytes.com/topic/php/answers/518577-register_globals)[它](https://www.cerias.purdue.edu/site/blog/post/as-if-we-needed-more-evidence-that-register_globals-is-bad/)的[论据](http://www.sitepoint.com/forums/showthread.php?312377-register_globals-bad-idea-I-use-extract-is-it-safe) 这一事实应该是足够的证据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T05:43:11.697

```
 <?php

/* Suppose that $var_array is an array returned from
  wddx_deserialize */

 $size = "large";
 $var_array = array("color" => "blue",
               "size"  => "medium",
               "shape" => "sphere");
 extract($var_array, EXTR_PREFIX_SAME, "wddx");

 echo "$color, $size, $shape, $wddx_size\n";

  ?> 
```

请检查这个。您将通过使用循环来做同样的事情。可以帮助你

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-19T07:09:18.610

您基本上是在实现`extract($_POST, EXTR_OVERWRITE)`它将覆盖任何已经存在的变量。该手册已经警告您以[`extract`](http://php.net/extract)您的方式使用：

> 不要`extract()`在不受信任的数据上使用，例如用户输入（即`$_GET`，`$_FILES`等）。如果您这样做，例如，如果您想临时运行依赖于*register_globals*的旧代码，请确保使用不可覆盖的*extract_type*值之一，例如，`EXTR_SKIP`并注意您应该按照*variables_order*中定义的相同顺序提取php.ini。

这可能会导致覆盖基本变量和敏感变量，包括那些不能真正直接修改的变量，例如`$_SESSION`、`$_SERVER`和`$GLOBALS`：

```
POST /foo.php HTTP/1.1
Content-Type: application/x-www-urlencoded

_SESSION[user]=admin 
```

这将具有与 相同的效果`$_SESSION = array('user'=>'admin')`。

# java - 我的 res/layout/main.xml 文件在哪里？

> ID：11554439
> 
> 赞同：2
> 
> 时间：2012-07-19T05:27:29.927
> 
> 标签：java, android, xml, android-layout, android-activity

所以我开始潜入 Android 世界，并试图`getting started`从这里遵循官方指南：[building-ui](http://developer.android.com/training/basics/firstapp/building-ui.html)。该教程看起来很简单，但我遇到了一些不完全匹配的问题。

例如：

1.  在教程中，他们说默认创建了一个 layout/main.xml 文件。我没有得到这个文件，而是得到了 layout/my_first_activity.xml。这些文件的内容也不同。

为什么是这样？我究竟做错了什么？文档是否旧？（我正在使用`Eclipse Juno`，并使用`Android 2.3 SDK`）。我尝试完全格式化（从教程中复制代码），但是当我尝试运行应用程序时出现错误。

--

教程说 main.xml 文件是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >
</LinearLayout>
.
.
. 
```

我的 my_first_activity.xml 看起来像这样：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:padding="@dimen/padding_medium"
        android:text="@string/hello_world"
        tools:context=".MyFirstActivity" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:35:59.903

是的，文档有点旧。你说得对；它们是同一个文件，但名称不同。如果它让您感觉更好，您可以放心地将其重命名为 main.xml。

您选择了默认创建“hello world”文本视图的设置，因此它继续为您创建了该 TextView。

如果需要，可以将 替换为`RelativeLayout`以`LinearLayout`按照教程进行操作。我认为这部分在新的 ADT 中不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:33:43.823

[似乎 ADT（android 开发工具）最近更新了 - 请参阅此处](http://developer.android.com/tools/sdk/eclipse-adt.html)更改的详细信息。可能文档没有同时更新。您提供的布局文件的差异并不显着，因此请尝试使用 my_first_activity.xml 遵循本教程的其他步骤。

# iphone - iOS 中的基本 Sprite/UIImage 运动？

> ID：11554444
> 
> 赞同：0
> 
> 时间：2012-07-19T05:27:56.490
> 
> 标签：iphone, ios

我想将图像从屏幕的一侧移动到另一侧。

我有两个 UIImageViews，ball1 和 ball2。一个在左边，一个在右边。设备处于横向模式。当用户单击按钮时，我希望他们切换侧面，就像补间动画一样。我尝试过使用 CGPoint，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:31:34.120

```
CGPoint firstCenter = ball1.center;
CGPoint secondCenter = ball2.center;
[UIView animateWithDuration:1.0 animations:^{
    ball1.center = secondCenter;
    ball2.center = firstCenter;
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:34:27.300

以及精灵运动试试这个[链接](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3alesson_2._your_first_game)

关于您的问题，您可以使用核心动画并更改我猜应该做的球的位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T05:44:44.373

在标题中创建两个 CGPoints 和一个 NSTimer，

```
CGPoint pos1;
CGPoint pos2;
NSTimer *timer; 
```

在移动图像之前的任何其他方法中，设置将用作图像速度的 CGPoints。由于您在水平移动，因此 CGPoint 分别要求 x 和 y 参数。在本例中，分别使用`(2.0,0.0);`和`(-2.0,0.0);`表示右和左。

```
pos = CGPointMake(2.0,0.0);    
pos2 = CGPointMake(-2.0,0.0); 
```

然后设置计时器以触发一个名为“move”的方法

```
timer = [NSTimer scheduledTimerWithTimeInterval:0.01 target:self selector:@selector (move) userInfo:nil repeats:YES]; 
```

创建另一个未全局声明的计时器，以使用名为 的方法阻止球移动`stopBalls`。（假设这需要两秒钟。实验并`2.0`用任何可行的方法替换）

```
[NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector (stopBall) userInfo:nil repeats:YES]; 
```

创建`-(void)move`使用 CGPoints 和`pos`变量来移动图像的方法。假设图像被命名为`ball1`和`ball2`。

```
-(void)move
{
    ball1.center = CGPointMake(ball1.center.x+pos1.x,ball1.center.y +pos1.y);
    if (ball1.center.x > 2024 || ball1.center.x < 0)
        pos1.x = -pos1.x;
    if (ball1.center.y > 768 || ball1.center.y < 0)
        pos1.y = -pos1.y;

    ball2.center = CGPointMake(ball2.center.x+pos2.x,ball2.center.y +pos2.y);
    if (ball2.center.x > 2024 || ball2.center.x < 0)
        pos2.x = -pos2.x;
    if (ball2.center.y > 768 || ball2.center.y < 0)
        pos2.y = -pos2.y;
} 
```

然后创建`stopBalls`阻止球移动的方法。这将重置 CGPoint 并停止`timer`。

```
-(void)stopBalls
{
    pos = CGPointMake(0.0,0.0);    
    pos2 = CGPointMake(0.0,0.0); 
    [timer invalidate];
} 
```

只需重新运行用于启动运动的方法即可再次进行。

在球移动时也不要多次运行该方法，因为这会使速度加倍，因为另一个计时器`(2.0,0.0);`会`(-2.0,0.0);`被触发。

# javascript - 使 javascript 按钮工作

> ID：11554449
> 
> 赞同：0
> 
> 时间：2012-07-19T05:28:26.917
> 
> 标签：javascript

*   被告知在这里问这个问题。

我的问题是如何让它工作。一张带背景的图片和两个可点击的按钮。

我编写了一些 javascript 代码来尝试使它们按照我需要的方式运行，但无法按照我需要的方式运行。

我需要的是让此代码与图像一起使用

Javascript代码：

```
function NewGame() {
document.forms[0].reset();
location.reload();
} 
```

html代码：

```
<input type=button name=newgamebutton value="Restart" onClick="NewGame();"> 
```

重启按钮

当您单击重新启动按钮时如何制作它会显示此图像，该图像将被分成两部分：是和否图像。

[http://img821.imageshack.us/img821/1061/nnbo.jpg](http://img821.imageshack.us/img821/1061/nnbo.jpg)

两个切片按钮

当您单击重新启动时，弹出框将触发一个是/否模式问题，如果您单击是重新启动游戏，当您单击否时它会回到您离开游戏的地方。

# oop - 一棵树，其中每个节点可以有多个父节点

> ID：11554450
> 
> 赞同：13
> 
> 时间：2012-07-19T05:28:30.860
> 
> 标签：oop, design-patterns, tree, graph-theory, composite

这是一个理论/迂腐的问题：想象一下每个可以由多个其他人拥有的属性。此外，从所有权的一次迭代到下一次，两个相邻的所有者可以决定部分合并所有权。例如：

```
territory 1, t=0: a,b,c,d
territory 2, t=0: e,f,g,h

territory 1, t=1: a,b,g,h
territory 2, t=1: g,h 
```

也就是说，`c`不再`d`拥有财产；并且变成了肥猫，可以这么说`g`。`h`

我目前将此数据结构表示为一棵树，其中每个孩子都可以有多个父母。我的目标是把它塞进复合设计模式中；但我在获得关于客户如何返回并更新以前的所有权而不破坏整个结构的概念基础上遇到问题。

我的问题是双重的。

1.  简单：这个数据结构的方便名称是什么，以便我可以自己搜索它？

2.  硬：我做错了什么？当我编写代码时，我试图在脑海中保持“保持简单，愚蠢”的口头禅，我觉得我正在打破这个信条。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-19T06:02:40.963

> 我的问题有两个： 简单：这个数据结构的方便名称是什么，以便我可以自己搜索它？

你在这里拥有的不是一棵树，而是一个图表。多图将在这里为您提供帮助。但是任何邻接表或邻接矩阵都会给你一个好的开始。

这是关于邻接矩阵和列表的视频：[Youtube on adjacency matrix and list](http://www.youtube.com/watch?v=2guA5uMEmZQ)

> 硬：我做错了什么？

这真的很难说。也许您没有以适当的方式对关系进行建模。考虑到一个好的数据结构，这并不难。

而且，当您询问设计模式时（但您可能自己发现了），复合模式可以让您轻松地为这样的设置建模。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T05:41:52.050

您的所有者和您的区域（属性）之间存在*多对多的关系。*我不确定您使用的是哪种语言，但这种事情可以很容易地在关系数据库中表示和跟踪。（您可能需要为每个实体创建一个表，并且该关系可能需要第三个“联结”表。如果需要能够查询“及时”，这可能有某种“时间索引”列也一样。）

如果您使用面向对象的语言，您可能会创建两个类，即 Territory 和 Owner，其中 Territory 类有一个属性/成员/字段，它是指向 Owners 的引用/指针的集合，而 Owner 类有一个类似的集合的领土。（这两个集合之一可能需要包含“弱”引用，具体取决于语言。）

在这种情况下，如果您希望能够返回并查看较早某个特定时间点的网络状态，则可能会出现一些困难。（如果这是您需要的，请说出来，我（或其他人）可以发布适用于此的解决方案。）

我不确定您要追求的简单程度，但在这两种情况下，更新所有权关系都不是那么“难”。也许如果您发布了一些代码，可能会更容易为您提供更具体的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-23T18:12:54.603

如果没有有关业务规则的更多信息，很难说。尽管我在设计每个节点可能有许多父节点的图表方面有丰富的经验。

一个常见的结构是有向无[环图](https://en.wikipedia.org/wiki/Directed_acyclic_graph)。这里的基本规则是，通过图形的任何路径都不能循环回到自身。例如采用 path `"A/B/C/B"`，这将是无效的，因为 B 重复了两次。

1.  有效：- `"A/B/C"`, `"D/E/C"`, 节点`C`有两个父节点`E`和`B`.
2.  无效：- `"A/B/C/B"`，节点`B`在同一路径中重复导致循环。

# c# - 将姓名拆分为名字和姓氏

> ID：11554457
> 
> 赞同：-5
> 
> 时间：2012-07-19T05:28:56.147
> 
> 标签：c#, string, visual-studio-2008

> **可能重复：**
> [c#中的字符串拆分](https://stackoverflow.com/questions/4207374/string-split-in-c-sharp)

如何根据字符串中名字和姓氏之间**的空格将名称字符串拆分为名字和姓氏**。例如： **输入字符串**：“Visual Studio” **必需输出名**：“Visual” **姓**：“Studio”

如何在**C#**中完成？有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T05:31:09.363

如果您所要做的就是按空格分割，那么使用[String.Split](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)怎么样：

```
var names = Name.Split(new char[]{' '});
var firstName = names[0];
var lastName = names[1]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T05:34:42.253

尝试这个：

```
string fullName = "Visual Studio";
var names = fullName.Split(' ');
string firstName = names[0];
string lastName = names[1]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-19T06:40:39.040

在查看您的功能需求时，您无法确定仅使用字符串拆分。

你能确定你的数据源中只有名字和姓氏吗？例如，在荷兰语中，我们有如下名称：

```
"Maurice Peterse"  // OK
"Daniel Van Puffelen" // FAILS (Prefix in LastName)
"Marieke Peterse Deijn" // FAILS (Maiden Name)
"Jan Pieter Balkenende" // FAILS (Double first name) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-19T05:47:52.300

对于您的情况，您甚至不必提供分隔符：

```
var name = "Visual Studio";
var split = name.Split(); 
```

这为您提供了拆分，其中包含两个字符串，“Visual”和“Studio”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T06:49:54.083

使用 String.split

```
var names = Name.Split(new char[]{' '});
var firstName = names[0];
var lastName = names[1]; 
```

但请确保在验证中满足您的要求。有时名称也可能包含 2 个空格。

# templates - 使用 C++ 模板分配 CUDA 设备内存时出现警告

> ID：11554458
> 
> 赞同：2
> 
> 时间：2012-07-19T05:28:59.783
> 
> 标签：templates, cuda, nvidia

我已经声明了以下模板以使代码更短：

```
template <typename T>
void allocateGPUSpace(T* ptr, int size){

    cudaMalloc((void**)&ptr,size * sizeof(T));
} 
```

此外，我使用的模板如下：

`float* alphaWiMinusOne;`

`allocateGPUSpace<float>( alphaWiMinusOne,numUnigrams);`

但是，当我编译代码时，VS 2008 会发出警告

```
 warning: variable "alphaWiMinusOne" is used before its value is set 
```

和

```
uninitialized local variable 'alphaWiMinusOne' used 
```

cuda 不理解 C++ 中的模板吗？天哪，这对英伟达来说是必须做的

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T06:47:03.967

首先，该警告不是来自 CUDA，而是来自主机编译器（因此 Microsoft 的 C++ 编译器或 GCC 取决于您的平台），这是一个完全有效的警告。您犯了与[此处](https://stackoverflow.com/q/11487012/681865)相同的错误，并且此代码不会像您希望的那样工作，因为您传递的是按值而不是按引用进行操作的指针。你的代码应该是这样的：

```
template <typename T> 
void allocateGPUSpace(T ** ptr, int size){   
    cudaMalloc((void**)ptr, size * sizeof(T)); 
} 
```

和这样的电话：

```
float * alphaWiMinusOne;
allocateGPUSpace<float>(&alphaWiMinusOne, numUnigrams); 
```

也许

```
template <typename T> 
T * allocateGPUSpace(int size){
    T * ptr;   
    cudaMalloc((void**)&ptr, size * sizeof(T));
    return ptr;
} 
```

进而

```
float * alphaWiMinusOne = allocateGPUSpace<float>(numUnigrams); 
```

使用其中任何一个都将消除编译器警告，并且代码将起作用。作为风格说明，这将是一个相当短视的辅助功能设计，不包括任何错误检查......

# maven - maven 测试结果编码

> ID：11554475
> 
> 赞同：3
> 
> 时间：2012-07-19T05:30:16.943
> 
> 标签：maven

我在我的 Mac 上通过 MVN clean test 运行测试，控制台输出如下所示：

```
 \u8F93\u5165\u6B63\u5E38\u53C2\u6570uid\u548Climit\uFF0C\u6570\u636E\u5E93\u65E0\u8BB0 
```

信息：

```
Apache Maven 3.0.3 (r1075438; 2011-03-01 01:31:09+0800)
Maven home: /usr/local/apache-maven-3.0.3
Java version: 1.6.0_33, vendor: Apple Inc.
Java home: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
Default locale: en_US, platform encoding: MacRoman
OS name: "mac os x", version: "10.7.4", arch: "x86_64", family: "mac" 
```

我的测试用例是用**中文**写的。如何设置测试结果编码？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:16:20.720

您必须在 pom.xml 中设置以下内容：

```
<project>
  ...
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
  ...
</project> 
```

可能您必须使用以下方法来增强它：

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
</properties> 
```

# c# - C# 和 VB 中的可覆盖和覆盖

> ID：11554478
> 
> 赞同：19
> 
> 时间：2012-07-19T05:30:30.663
> 
> 标签：c#, .net, oop

在 C# 中，`override`默认情况下是启用的，所以不需要在基类中*显式*声明一个方法为可覆盖的吗？如果是这样的话

1.  Overridable 是仅限于 VB.NET 还是在 C# 中也是必需的？
2.  因此可以覆盖哪种类型的方法？它只是抽象类的抽象方法还是任何方法？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-19T05:35:11.607

`Overridable`VB 中的关键字对应于`virtual`C# 中的关键字。

您必须创建一个虚拟方法才能覆盖它。抽象方法是自动虚拟的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T05:34:36.073

在 C# 中，任何标记为“虚拟”的方法都可以被覆盖。标记为“抽象”的方法不一定被覆盖，它们在实现抽象类的类中实现。它们可以在实现中标记为虚拟。虚拟方法可以被覆盖的次数没有限制。

您需要 VB.NET 的答案吗？

# c# - WCF 请求中缺少日期时间？

> ID：11554482
> 
> 赞同：1
> 
> 时间：2012-07-19T05:30:50.117
> 
> 标签：c#, wcf

我有一个使用外部 Web 服务的程序。我需要在请求中发送的 1 个字段是 DateTime 字段，但是即使我已经设置了它，它似乎永远不会出现，以及同一个对象中的许多其他字段，并且它们被很好地传递。

我放置了一个消息检查器并查看了它发送的内容，这是请求：

```
 <bettingRequest xmlns="">
    <accountPin>0</accountPin>
    <betDetailsRequestList>
      <acceptPartial>0</acceptPartial>
      <accumulatorBet>false</accumulatorBet>
      <accumulatorId>0</accumulatorId>
      <allUpFormula>0</allUpFormula>
      <betAmountList>
        <amountInvested>25</amountInvested>
        <returnsPerBet>0</returnsPerBet>
      </betAmountList>
      <betRefId>0</betRefId>
      <betType>Parimutuel</betType>
      <scheduledType>1</scheduledType>
      <fixedOddsProdCode>0</fixedOddsProdCode>
      <flexiBet>false</flexiBet>
      <legList>
        <prodCode>1</prodCode>
        <propositionNumber>0</propositionNumber>
        <raceNumber>2</raceNumber>
        <selectionList>
          <selectionName>TIM FIN</selectionName>
          <selectionNumber>6</selectionNumber>
          <selectionSeparator />
        </selectionList>
      </legList>
      <mystery>false</mystery>
      <notifyMethod>0</notifyMethod>
      <numMultiParlayBet>0</numMultiParlayBet>
      <ordinalNumber>1</ordinalNumber>
      <meetingCode>13</meetingCode>
    </betDetailsRequestList>
  </bettingRequest> 
```

这是创建它的原因：

```
 bettingRequest betReq = new bettingRequest();
        betDetailsReq betDetReq = new betDetailsReq();

        List<legDetailsReq> leglist = new List<legDetailsReq>();
        List<betSelection> sellist = new List<betSelection>();
        List<betAmount> betamtlist = new List<betAmount>();
        List<betDetailsReq> betdetaillist = new List<betDetailsReq>();

        betSelection sel = new betSelection();
        sel.selectionNumber = selection.ToString();
        sel.selectionName = Runner;
        sel.selectionSeparator = "";
        sellist.Add(sel);

        legDetailsReq leg = new legDetailsReq();
        leg.prodCode = 1;
        leg.propositionNumber = 0;
        leg.raceNumber = racenum;
        leg.selectionList = sellist.ToArray();
        leglist.Add(leg);

        betAmount betAmt = new betAmount();
        betAmt.amountInvested = betamt;
        betAmt.returnsPerBet = "0";
        betamtlist.Add(betAmt);

        betDetReq.betType = "Parimutuel";
        betDetReq.betAmountList = betamtlist.ToArray();
        betDetReq.legList = leglist.ToArray();
        betDetReq.allUpFormula = "0";
        betDetReq.acceptPartial = 0;
        betDetReq.accumulatorBet = false;
        betDetReq.betRefId = 0;
        betDetReq.scheduledType = 1;
        betDetReq.fixedOddsProdCode = 0;
        betDetReq.flexiBet = false;
        betDetReq.mystery = false;
        betDetReq.notifyMethod = 0;
        betDetReq.ordinalNumber = 1;
        betDetReq.meetingCode = meetingcode;
        betDetReq.meetingDate = DateTime.Now;
        betdetaillist.Add(betDetReq);

        betReq.betDetailsRequestList = betdetaillist.ToArray();
        bettingResponse resp = bet.validateBet(meta, betReq); 
```

这是序列化的代码：

```
 [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified, Order=11)]
    public System.DateTime meetingDate {
        get {
            return this.meetingDateField;
        }
        set {
            this.meetingDateField = value;
            this.RaisePropertyChanged("meetingDate");
        }
    } 
```

缺少的属性是 betDetReq.meetingDate，WSDL 可以在[https://api.tab.com.au/tabapi/services/betting?wsdl查看](https://api.tab.com.au/tabapi/services/betting?wsdl)

有人可以告诉我哪里出错了吗？我尝试了许多不同的 DataTime 变体，但都缺少相同的结果。

谢谢院长

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:44:58.477

确保您已将“指定”属性设置为 true。

```
betDetReq.meetingDate = DateTime.Now;
betDetReq.meetingDateSpecified = true; 
```

如果您有一个可选字段（即`minOccurs`属性为的字段`0`），则代理包含“指定”属性。除非您将此设置为 true，否则该字段不会添加到请求正文中。

# java - Android视图添加孩子

> ID：11554486
> 
> 赞同：10
> 
> 时间：2012-07-19T05:31:29.133
> 
> 标签：java, android, view, textview

我有以下视图和 TextView，如何将 TextView 作为子视图添加到视图中？

```
public class MyView extends View {

    public MyView(Context context, AttributeSet attrs) {
        super(context);

        TextView textView = new TextView(context);
        textView.setText("Hello My Friends");

    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-19T05:37:47.533

而不是`View`用来`ViewGroup`扩展你的`CustomView`类..

[ViewGroup](http://developer.android.com/reference/android/view/ViewGroup.html)是可以包含其他视图（称为子视图）的特殊视图。视图组是布局和视图容器的基类。

就像是，

```
public class MyView extends ViewGroup 
```

现在，您可以使用名为的方法

```
public void addView (View child) 
```

添加子视图。如果尚未在子级上设置布局参数，则在子级上设置此 ViewGroup 的默认参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T05:36:57.180

您不能将孩子添加到视图中。仅适用于 ViewGroup

# javascript - JavaScript 简写 if 语句，没有 else 部分

> ID：11554492
> 
> 赞同：44
> 
> 时间：2012-07-19T05:32:04.557
> 
> 标签：javascript, if-statement, conditional-operator, shorthand

所以我使用的是简写的 JavaScript `if`/`else`语句（我在某处读到它们被称为三元语句？）

```
this.dragHandle.hasClass('handle-low') ? direction = "left" : direction = "right" 
```

这很好用，但是如果以后我只想使用简写`if`，而不使用该`else`部分怎么办。喜欢：

```
direction == "right" ? slideOffset += $(".range-slide").width() 
```

这可能吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-07-19T05:42:09.747

您可以使用`&&`运算符 - 只有当第一个为真时才执行第二个操作数表达式

```
direction == "right" && slideOffset += $(".range-slide").width() 
```

在我看来`if(conditon) expression`比`condition && expression`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-19T05:44:28.130

不要将其视为控制块（即：if-else 或开关）。它并不是真正用于在其中运行代码。

你可以。它变得非常丑陋，非常快，这违背了目的。

您真正想要使用它的是***ASSIGNING VALUES***。

以你最初的例子为例，稍微改变一下，你会得到：

```
direction = (this.dragHandle.hasClass("handle-low")) ? "left" : "right"; 
```

看。现在我所做的是我已经采取了一些需要 if/else 或 switch 的东西，这将被用来分配给那个值，我已经把它清理得很好很漂亮。

你甚至可以做一个 else-if 类型的三元：

```
y = (x === 2) ? 1 : (x === 3) ? 2 : (x === 4) ? 7 : 1000; 
```

如果您愿意，您也可以使用它来触发代码，但是一段时间后就很难知道发生了什么（请参阅前面的示例，看看即使分配如何开始看起来很奇怪）...

```
((this.dragHandle.hasClass("...")) ? fireMe(something) : noMe(somethingElse)); 
```

...这通常会起作用。

但它并没有比 if 或分支、立即调用函数更漂亮或更有用（非 JS 程序员或未经训练的 JS 程序员会为了维护你的代码而自欺欺人）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-19T05:45:44.303

条件运算符*不是*`if`语句的简写。它是一个运算符，而不是一个语句。

如果使用它，则应将其用作运算符，而不是语句。

只需对第三个操作数使用零值：

```
slideOffset += direction == "right" ? $(".range-slide").width() : 0; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-19T05:41:56.040

你所拥有的将不起作用，但为什么不使用单行 if 语句来代替。

`if(direction == "right") slideOffset += $(".range-slide").width();`

与 Ray 建议的方法相比，这涉及更少的输入。当然，如果您真的想坚持这种格式，他的回答是有效的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-19T05:35:47.353

不，这是不可能的，因为三元运算符需要三个操作数。

```
first-operand ? second-operand (if first evaluates to true) : third-operand (if false) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-19T05:41:58.883

这并不能完全回答您的问题，但是三元组允许您写的比您展示的要少：

```
direction = this.dragHandle.hasClass('handle-low') ? "left" : "right"; 
```

现在我想起来了，是的，你也可以提出你的问题：

```
slideOffset + direction == "right" ? = $(".range-slide").width() : = 0; 
```

这是一个理论。下次我有机会去`+=`三元组我会试试这个。让我知道它是如何工作的！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-19T10:52:35.120

你可以使用`&&`运算符

```
direction == "right" && slideOffset += $(".range-slide").width() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-29T15:50:27.847

如果在某些情况下你真的想使用`if`速记。尽管它可能不是最好的选择，但它是可能的。

`condition ? fireMe() : ""`

看起来很奇怪，确实有效。在像 Vue 这样的框架中可能会派上用场，您可以在模板中编写它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-15T02:01:17.747

您可以使用以下速记：

```
if (condition) expression 
```

# android - 我可以在 android 布局包含标签上设置自定义属性吗？

> ID：11554493
> 
> 赞同：2
> 
> 时间：2012-07-19T05:32:17.223
> 
> 标签：android, xml, android-layout, android-xml

我正在尝试在其根为自定义视图的布局的包含标记上设置自定义属性：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:archxs="http://schemas.android.com/apk/res/com.archxs.bincalc"
    android:id="@+id/calculatorRowMenuAnchor" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_vertical"
    android:visibility="gone">

    <include android:id="@+id/calculatorrowmenu_result_running"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             archxs:isRunningResult="true"
             layout="@layout/single_line_result" />
... 
```

包括：

```
<?xml version="1.0" encoding="utf-8"?>
<com.archxs.bincalc.SmallIntegerResultView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:orientation="horizontal"
    android:clickable="true">
...
</com.archxs.bincalc.SmallIntegerResultView> 
```

但未设置自定义属性：

```
public SmallIntegerResultView(Context context, AttributeSet attrs) {
    super(context,attrs);
    final TypedArray styled = context.obtainStyledAttributes(attrs, R.styleable.ResultView);
    try {
        m_isRunningResult = styled.getBoolean(R.styleable.ResultView_isRunningResult, false);
    } finally {
        styled.recycle();
    }
} 
```

这应该工作吗？如果不是为什么？如果是，我做错了什么？

谢谢大家？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T03:13:40.713

抱歉，可能有点晚了，但我遇到了类似的问题：

您是否在 attrs.xml 中声明了您的自定义属性？

查看此链接以获得更多解释：[custom-xml-attributes-for-android-widgets](http://kevindion.com/2011/01/custom-xml-attributes-for-android-widgets/)

# asp.net - ASP.net 中的自定义错误

> ID：11554494
> 
> 赞同：1
> 
> 时间：2012-07-19T05:32:21.497
> 
> 标签：asp.net

我有一个网站，假设它是

```
www.mydomain.com/a 
```

我也有一个名为

```
list.aspx 
```

我在 web.config 文件中添加了配置设置来自定义错误（主要是 404,500）。

它可以完美地工作，除非请求不是页面，例如

```
 www.mydomain.com/a/lEst.aspx    //my custom page appears
 www.mydomain.com/a/list         //doesn't work   (without aspx extension)
 www.mydomain.com/B/aasd.aspx    //doesn't work 
```

当自定义错误不起作用时，托管服务器会显示他自己的自定义页面。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:53:06.887

`customErrors`in`system.web`仅适用于 ASP.Net 扩展，因为它由 ASP.Net 工作进程 ahndled。如果您使用的是 IIS7，则为用户`system.Webserver`部分。

```
<httpErrors errorMode="Custom" existingResponse="Replace" >
    <remove statusCode="404"/>
    <error statusCode="404" path="/error404.aspx" responseMode="ExecuteURL"/>
</httpErrors> 
```

# database - 我怎样才能使我的数据库对 Mac OS X 开发安全？

> ID：11554497
> 
> 赞同：0
> 
> 时间：2012-07-19T05:32:38.860
> 
> 标签：database, macos, cocoa, security, core-data

我正在开发一个包含用户数据的 Mac OS X 应用程序。核心数据/Sqlite 是存储用户数据库的好选择。但我想确保用户数据是高度安全的。那么我们在 Mac 平台上有哪些用于开发安全数据库的选项..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:19:25.700

您有几个可以与 Core Data 一起使用的选项。但是当软件正在运行并且解密密钥是“活动的”时，这些方法都不会保护您的数据。

第一种选择是使用加密的磁盘映像来存储您的数据库文件。这在 iOS 上不是必需的，默认情况下所有文件都是加密的，但您可以配置一些加密方面以进行更严格的安全设置（谷歌搜索`NSFileProtectionKey`）。在 OS X 上，等效的技术是 FileVault，但它大部分时间都不会激活，所以你不应该指望它。所以是的，一个磁盘映像，在您的软件启动时安装并提供正确的密码，在软件退出时卸载。您可能希望使用辅助进程监视主应用程序并在应用程序崩溃或退出时卸载映像而未正确卸载它，从而保护您的磁盘映像免受应用程序崩溃的影响。

第二个选项是编写一个`NSValueTransformer`来加密实体中的每个敏感属性。保护在这里是属性级别。它可能足够好，也可能不够好，它会影响获取请求的工作方式。

第三种选择是编写自己的持久存储（通过子类化`NSAtomicStore`）。这并非没有后果，但必须仔细评估该解决方案。

除此之外，不要忘记课程的基础：钥匙串，像 PBKDF2 这样的按键拉伸功能，密码盐，诸如此类。

# matlab - matlab如何选择数据的百分比

> ID：11554499
> 
> 赞同：2
> 
> 时间：2012-07-19T05:32:43.633
> 
> 标签：matlab, dataset, percentage

嗨，我有一个数据集，可以调用它`dataset A`，该数据集包含 500x10 个样本。我还有另一个`dataset B`是每一行的类标签。

```
Dataset A   | Dataset B 
1 0.2 | 0.3 = Green 
2 0.1 | 0.1 = Red 
3 0.2 | 0.4 = Blue 
```

等等...

我想从数据集 A 中选择蓝色和红色的百分比，我们称之为 percentOfA 并有另一个数据集对应于数据集 B 中的数据集，我们称之为`ResultOfA`只是将颜色与从 A 中选择的颜色百分比相匹配。

所以新的数据集`percentOfA`看起来像：

```
1 0.2 | 0.4 
2 0.2 | 0.4 
3 0.2 | 0.4 
4 0.1 | 0.1 
```

75% 蓝色和 25% 红色，那么新的`resultOfA`将如下所示：

```
1 Blue.
2 Blue.
3 Blue.
4 Red. 
```

这在matlab中是如何实现的？

抱歉，我会尝试显示代码，但我在文档中找不到任何相关内容。

**新编辑：**

所以我有点迷失如何更好地解释这一点。数据集 B 包含 500x1 的颜色，蓝色、绿色、红色等

该数据集 B 与数据集 A 匹配，但数据集 A 包含构成这些颜色的数值。

我要做的就是使用数据集 B 选择 75% 的蓝色，它选择的那些会跟踪行号，然后使用这些行号从数据集 A 中取出数据并将其放入新数据集中.

因此，我的“新数据集”将只是数据集 A 的 75% 的蓝色和 25% 的红色（数值）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:05:32.613

研究使用[`crossvalind`](http://www.mathworks.com/help/toolbox/bioinfo/ref/crossvalind.html)生物信息学工具箱中的函数，特别是使用`Group`参数。无需自己编写此功能，这将使您的生活更轻松。

在您的情况下，您只需执行以下操作：

```
percentage = 75;
[train, test] = crossvalind('HoldOut', B, size(A, 1), percentage/100);
percentOfA = A(train, :);
resultOfA = B(train, :); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T16:48:38.143

首先用于`find`确定`blue`行：`idx=find(B==0.4);`

`blue`然后随机选择这些行中的 75% ：

```
n = numel(idx);
n75 = round(n*0.75);
r = randperm(n);
idx_blue = idx(r(1:n75)); 
```

对应`blue`的行`A`是：`A_blue = A(idx_blue);`

重复这些步骤以选择`red`行。

HTH。

# android - 每个活动上的 Android Tabbar 都会给出 java.lang.StackOverflowError

> ID：11554504
> 
> 赞同：1
> 
> 时间：2012-07-19T05:33:32.980
> 
> 标签：android, tabs, stack-overflow

我的问题是，我在 TabActivity 的单个选项卡下有多个活动，但问题是如果我从一个活动移动到另一个活动超过 3 次，则会发生“java.lang.StackOverflowError”，对不起我的不好英语交流。

任何帮助，将不胜感激。

我的代码是：-

第一活动.java

```
public class FirstActivity extends ActivityGroup implements
        OnClickListener {

    Button mBtnAdd;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.screen1);
        mBtnAdd = (Button) findViewById(R.id.mBtnAddManageAccount);
        mBtnAdd.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if (v == mBtnAdd) {
            Intent mInSecond = new Intent(v.getContext(), SecondActivity.class);
            replaceContentView("SecondActivity", mInSecond);
        }
    }

    public void replaceContentView(String id, Intent newIntent) {
        View view = getLocalActivityManager().startActivity(id,
                newIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))
                .getDecorView();
        this.setContentView(view);
    }
} 
```

SecondActivity.java

```
public class SecondActivity extends ActivityGroup implements
        OnClickListener {

    Button mBtnBack;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.screen2);
        mBtnBack=(Button)findViewById(R.id.mBtnBackNewCustomer);
        mBtnBack.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(v==mBtnBack){
            Intent mInBack = new Intent(v.getContext(),
                    FirstActivity.class);
            replaceContentView("FirstActivity", mInBack);
        }
    }

    public void replaceContentView(String id, Intent newIntent) {
        View view = getLocalActivityManager().startActivity(id,
                newIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))
                .getDecorView();
        this.setContentView(view);
    }
} 
```

错误日志猫：-

```
07-19 11:02:01.731: E/AndroidRuntime(528): FATAL EXCEPTION: main
07-19 11:02:01.731: E/AndroidRuntime(528): java.lang.StackOverflowError
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.View.draw(View.java:6986)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.widget.ScrollView.draw(ScrollView.java:1409)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.View.draw(View.java:6883)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.View.draw(View.java:6883)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.View.draw(View.java:6883)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.View.draw(View.java:6883)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.View.draw(View.java:6883)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.View.draw(View.java:6883)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.View.draw(View.java:6883)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.View.draw(View.java:6883)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.View.draw(View.java:6883)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.widget.FrameLayout.draw(FrameLayout.java:357)
07-19 11:02:01.731: E/AndroidRuntime(528):  at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1862)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewRoot.draw(ViewRoot.java:1522)
07-19 11:02:01.731: E/AndroidRuntime(528):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1258)
07-19 11:02:01.731: E/AndroidRuntime(528):  a 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T15:48:18.080

[ActivityGroup](http://developer.android.com/reference/android/app/ActivityGroup.html)实际上已被弃用。您应该改用 Fragments。这将有助于管理您的内存，从而避免您的堆栈溢出错误。

基本上，您可以像第一项一样在 XML 中声明您的片段，也可以给它们一个占位符，就像第二项一样。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <fragment android:name="com.example.news.ArticleListFragment"
            android:id="@+id/fragment"
            android:layout_weight="1"
            android:layout_width="0dp"
            android:layout_height="match_parent" />
    <FrameLayout
            android:id="@+id/fragment_container"
            android:layout_weight="2"
            android:layout_width="0dp"
            android:layout_height="match_parent" />
</LinearLayout> 
```

现在第一个片段将自动膨胀并显示。然而，@id/fragmentContainer 将需要膨胀，因为我们只是将它存根。

```
FragmentManager fragmentManager = getFragmentManager()
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
ExampleFragment fragment = new ExampleFragment();
fragmentTransaction.add(R.id.fragment_container, fragment);
fragmentTransaction.commit(); 
```

要创建一个片段，只需扩展 Fragment（同时确保持有该片段的 Activity 扩展了 FragmentActivity）。然后确保创建并返回要显示的视图，类似于为 ListView 行创建和返回视图的方式。

```
public class ExampleFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
            View view = inflater.inflate(R.layout.example_fragment_layout);

            /* All your find view by id's */
            return view;
    }
} 
```

更多信息可以在这里找到 [http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html) http://developer.android.com/reference/android/app/Fragment.html

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:56:51.877

这是我的解决方案

```
public class ActivityStack extends ActivityGroup {

  private Stack<String> stack;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (stack == null) stack = new Stack<String>();
    //start default activity
    push("FirstStackActivity", new Intent(this, FirstStackActivity.class));
  }

  @Override
  public void finishFromChild(Activity child) {
    pop();
  }

  @Override
  public void onBackPressed() {
    pop();
  }

  public void push(String id, Intent intent) {
    Window window = getLocalActivityManager().startActivity(id, intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    if (window != null) {
      stack.push(id);
      setContentView(window.getDecorView());
    }
  }

  public void pop() {
    if (stack.size() == 1) finish();
    LocalActivityManager manager = getLocalActivityManager();
    manager.destroyActivity(stack.pop(), true);
    if (stack.size() > 0) {
      Intent lastIntent = manager.getActivity(stack.peek()).getIntent();
      Window newWindow = manager.startActivity(stack.peek(), lastIntent);
      setContentView(newWindow.getDecorView());
    }
  }
} 
```

启动选项卡

```
Intent intent = new Intent().setClass(this, ActivityStack.class);
TabHost.TabSpec spec = tabHost.newTabSpec("tabId")
spec.setContent(intent); 
```

调用下一个活动

```
public class FirstStackActivity extends Activity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    TextView textView = new TextView(this);
    textView.setText("First Stack Activity ");
    textView.setOnClickListener(new View.OnClickListener() {
      @Override
      public void onClick(View v) {
          Intent intent = new Intent();
          intent.setClass(getParent(), SecondStackActivity .class);
          ActivityStack activityStack = (ActivityStack) getParent();
          activityStack.push("SecondStackActivity", intent);

      }
    });
    setContentView(textView);
  }
} 
```

再次调用下一个

```
public class SecondStackActivity extends Activity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    TextView textView = new TextView(this);
    textView.setText("First Stack Activity ");
    textView.setOnClickListener(new View.OnClickListener() {
      @Override
      public void onClick(View v) {
          Intent intent = new Intent();
          intent.setClass(getParent(), ThirdStackActivity .class);
          ActivityStack activityStack = (ActivityStack) getParent();
          activityStack.push("ThirdStackActivity", intent);

      }
    });
    setContentView(textView);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T09:28:44.223

只有`FirstActivity`应该从 扩展`ActivityGroup`，其余的应该是扩展`Activity`类，比如你的`SecondActivity`等等。不要启动`FirstActivity`from `SecondActivity`。

本教程中的更多详细信息：

[http://www.gamma-point.com/content/android-how-have-multiple-activities-under-single-tab-tabactivity](http://www.gamma-point.com/content/android-how-have-multiple-activities-under-single-tab-tabactivity)

# php - 在浏览器中模拟 PHP 的 CLI

> ID：11554507
> 
> 赞同：8
> 
> 时间：2012-07-19T05:33:50.200
> 
> 标签：php, php-5.3, command-line-interface

我正在考虑基于浏览器的 PHP IDE 的想法，并且对通过浏览器模拟命令行的可能性感到好奇，但我对 CLI 的开发工具不够熟悉，无法知道它是否可以完成很容易或根本没有。我想做更多的调查，但到目前为止还没有找到很多关于它的资源。

从高层次来看，我的第一个直觉是设置一个文本输入，它将通过 AJAX 将命令提供给 PHP 脚本并将任何输出返回到页面上。我只是对 CLI 不够熟悉，不知道如何在这种情况下与之交互。

我不需要实际的代码，虽然这也很有用，但我正在寻找更多我应该进一步研究的函数、类或 API。理想情况下，我更喜欢 PHP（假设是 PHP 5.3）而不是第三方库。你会如何解决这个问题？有什么我应该知道的资源或项目吗？

**编辑**：这个用例将是本地主机或开发服务器，而不是面向公众的站点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:07:40.980

通过 RPC 或来自 javascript 的直接 POST 调用此函数，它按以下顺序执行操作：

*   将 PHP 代码写入文件夹（具有随机名称）中的文件（具有随机名称），该文件将单独放置、执行，然后在执行结束时被删除。
*   当前的 PHP 进程**不会**运行该文件中的代码。相反，它必须具有执行权限（安全模式关闭）。`exec('php -c /path/to/security_tight/php.ini')`（见 php -？）
*   捕获任何输出并将其发送回浏览器。您可以避免任何奇怪的错误。我建议不要执行 exec，`popen`这样您就可以终止进程并手动控制等待它完成的超时时间（如果您终止该进程，您可以轻松地将错误发送回浏览器）；

对于通过浏览器调用时运行的普通 PHP 进程，您需要宽松/正常的安全性（与整个 IDE 后端相同）。

您需要为运行临时脚本的 php.ini 和 php 进程提供严格和偏执的安全性（继续，甚至将其分离到另一台没有网络/互联网访问权限的机器上，并且每隔一小时将其状态恢复为出厂状态以确保） .

不要使用`eval()`，它不适合这种场景。攻击者可以跳入您的应用程序并使用您当前的权限和变量状态来对付您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T10:06:59.080

最近我读到了一个用 Javascript [php.js](http://phpjs.hertzen.com/)编写的 PHP 解释器，因此您可以仅使用浏览器编写和执行 PHP 代码。我不确定这是否是你最终需要的，但听起来很有趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T23:17:39.737

基本版本是

1.  您的脚本输出带有行输入的表单
2.  表单动作指向您的脚本
3.  该脚本接受表单上的输入并将其传递给 eval
4.  将 eval 的任何输出传递给浏览器
5.  再次输出表格

问题是，定义的函数和变量在每个请求之间都会丢失。

您是否可以将输入的每一行添加到您的会话中。让我们说

```
$inputline = $_GET['line'];
$_SESSION['script'] .= $inputline . PHP_EOL;
eval($_SESSION['script']; 
```

这样，在每个会话中都会执行一个完整的 PHP 脚本（当然你会得到完整的输出）。

另一种选择是创建某种守护进程（基本上是`php -a`调用的实例），它在后台的服务器上运行并从浏览器获取您的输入并传递输出。

您可以将此守护程序连接到两个 FIFO 设备（一个用于输入，一个用于输出）并通过简单的`fopen`.

对于使用您的脚本的每个用户，都必须生成一个新的守护进程。

不用说，保护您的脚本免受滥用很重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T15:36:05.640

我们已经在我的大学测试了一些产品，用于通过 ssh 访问我们的实验室服务器，并使用了一些[Web-SSH-Tools](http://en.wikipedia.org/wiki/Web-based_SSH) - 它们基本上完全符合您的要求。[Shell-In-A-Box](http://code.google.com/p/shellinabox/) -Project 可以绑定到您喜欢的任何解释器，并且可以根据需要与交互式 php 解释器一起使用（在演示页面上，他们使用了基本解释器）。该项目可以作为真正 PHP-IDE 的基础。它们的优点是能够与任何基于控制台的编辑器（例如 vi、emacs 或 nano）进行交互，以及能够提供管理命令（例如创建文件夹、更改所有权或 ACL 或重新启动服务）。

Mozilla 还有一个功能齐全的基于 Web 的 IDE，称为[Bespin](https://bespin.mozilla.com/)，它也是[高度可扩展和可配置](http://arstechnica.com/information-technology/2009/02/ide-in-the-cloud-mozilla-labs-browser-based-ide-prototype/)的。

正如您所说，该页面不面向公众，您当然必须使用身份验证和 SSL 保护该页面以对抗[会话劫持](http://en.wikipedia.org/wiki/Session_hijacking)。

# objective-c - Cocoa - NSTabView 中的 WebView

> ID：11554509
> 
> 赞同：1
> 
> 时间：2012-07-19T05:33:58.050
> 
> 标签：objective-c, macos, cocoa, webview, nstabview

我正在开发一个带有多个 NSTabViewItem 的 NSTabView 的应用程序。每个 NSTabViewItems 都有一个 WebView 子视图。WebView 按预期工作，除非 Flash 或 Silverlight 在其中一个 WebView 中运行。如果在 Flash 或 Silverlight 运行时选择了不同的选项卡，则媒体将停止。再次选择该选项卡时，媒体将重新启动。有什么方法可以解决此问题（即选择不同的NSTABViewItem时允许媒体继续运行）？Does the NSTabViewItem send a message to its subviews when a different NSTabViewItem has been selected?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:14:31.950

我不确定这是否是原因，但如果`shouldUpdateWhileOffscreen`启用了它们，请尝试检查您的网络视图。如果它已启用但其他选项卡仍未加载，那么我猜这是 NSTabView 的设计，这是在选项卡切换时对其进行编码，然后在用户再次选择该选项卡时对其进行解码. 在这种情况下，我可能会做一些事情，比如拥有一个带有空视图的 NSTabView，并将 WebViews 作为内容视图的子视图，相互重叠并将 WebViews 设置为隐藏/可见，只要选择另一个 tabview。

# django - Django 1.4 debug_toolbar 和 htmltidy 检查 html5 语法

> ID：11554517
> 
> 赞同：1
> 
> 时间：2012-07-19T05:35:04.367
> 
> 标签：django, html, htmltidy, django-debug-toolbar

htmltidy 检查 html 4 语法错误，它向我显示了无聊的消息，例如

```
Current page have following errors:

Position    Error or Warning
line 5 column 5 
    Warning: <meta> proprietary attribute "charset" 
line 5 column 5 
    Warning: <meta> lacks "content" attribute 
```

因为我用的是html5。

如何将 htmltidy 检查语法说成 html5 验证器？

`Django 1.4` `debug_toolbar 0.9.4` `debug_toolbar_htmltidy 0.1.1`

# ruby-on-rails - 如何正确设置 Active Paypal 自适应支付 IPN 通知？

> ID：11554524
> 
> 赞同：0
> 
> 时间：2012-07-19T05:35:33.010
> 
> 标签：ruby-on-rails, ruby, paypal, paypal-ipn

我在我的应用程序上设置 IPN 通知以将所有信息发送回我的应用程序时遇到问题。我的付款工作正常且功能正常。我在使用 notify_action 时遇到问题。我想检索付款信息并将其发送回我的应用程序以获取付款中的所有信息。

```
 def checkout
  ....
  response = @gateway.setup_purchase(
     :return_url => "http://localhost:3000",
     :cancel_url => "http://localhost:3000",
     :ipn_notification_url => orders_notify_action_url,
     :receiver_list => recipients
     )
  ..
  redirect_to (@gateway.redirect_url_for(response["payKey"]))
 end

 def notify_action
     notify =  ActiveMerchant::Billing::Integrations::PaypalAdaptivePayment::Notification.new(request.raw_post)
    p "Notification object is #{notify}"
    if notify.acknowledge
      p "Transaction ID is #{notify.transaction_id}"
      p "Notification object is #{notify}"
      p "Notification status is #{notify.status}"
    end
    render :nothing => true
end 
```

[https://gist.github.com/8acceeee72fe12312c09](https://gist.github.com/8acceeee72fe12312c09)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:34:24.703

如果您指定您遇到的问题，这将有很大帮助。比如notify_action没有被Paypal的IPN命中的问题？还是 notify.acknowledge 返回 false？

对于严格的 IPN，这就是我的工作控制器的样子：

```
class PayController < ApplicationController
    include ActiveMerchant::Billing::Integrations   

    def paypal
        notify = Paypal::Notification.new(request.raw_post)
        logger.debug "Notification object is #{notify}"
        if notify.acknowledge
            logger.debug "Transaction ID is #{notify.transaction_id}"
            logger.debug "Notification object is #{notify}"
            logger.debug "Notification status is #{notify.status}"
        end        
        render :nothing => true
    end
end 
```

然后我给 Paypal 的 URL 是 www.yourwebsite.com/pay/paypal

然后简单地匹配 route.rb 中的路由

```
match 'pay/paypal' => 'pay#paypal' 
```

通知对象应包含给定购买的所有数据。

重要提示：查看日志文件以查看函数是否被调用，如果是，打印的内容是什么？

# gwt - 将不同 GWT 活动所需的状态放在哪里？

> ID：11554525
> 
> 赞同：3
> 
> 时间：2012-07-19T05:35:33.960
> 
> 标签：gwt, gwt-mvp, gwt-places, gwt-activities

我目前正在开发一个 GWT 应用程序，但我仍然对它如何组合在一起有些模糊（在没有首先了解整个框架的情况下进行更改的乐趣，尽管这可能很困难）。

我们有一些活动，它们都对应于 UI 的各个部分（例如，主要内容、工具栏和事物列表）。我不确定这是否是活动的意图，但我想我现在不能轻易改变。我现在的问题是，事物列表包含主要内容也需要的状态（当前选择），并且在某种程度上工具栏也需要（至少工具栏当前*有*它——我已经问不出来了）。

但实际上存储它的合适地方是什么*？*我猜想将实际的视图实现结合在一起并将选择仅存储在列表中并不是一个好主意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T06:42:03.067

我在这里看到两个主要的解决方案：

*   保持每个活动中的状态，并通过事件（在 上`EventBus`）保持它们同步。即：“事物列表”有一个当前选择，主视图也有一个，工具栏也有；并且每次该值更改时，进行更改的活动都会在事件总线上触发一个事件，以便其他活动可以更新它们的状态，以便所有活动在它们自己的状态下具有相同的值。

*   使用单例对象（如果您使用 GIN 和依赖注入，只需使用注释对象`@Singleton`并将其注入所有活动）将状态保持在中心位置。*活动在状态持有者*对象上注册事件处理程序，以便在它更改时得到通知。也就是说，每次活动调用`setCurrentSelection`（例如）时，都会触发一个事件（例如 a `ValueChangeEvent`），并且由于所有活动都在侦听它，因此它们可以根据新值更新其视图或任何内容。您可以选择在事件总线上分派事件（类似于`PlaceController`）或让*状态持有者*实现`HasValueChangeHandlers`。只要确保在活动时取消注册处理程序`stop`避免内存泄漏（在事件总线上调度更容易：只需在总线上注册作为参数传递给`start`方法的处理程序，当活动停止时它们将自动取消注册，您甚至不必考虑它）。

实际上，`PlaceController`是这种*共享状态*（*当前位置*）的一个很好的例子。

# playframework - 分页头未在视图中显示值

> ID：11554532
> 
> 赞同：0
> 
> 时间：2012-07-19T05:36:30.547
> 
> 标签：playframework, pagination, playframework-1.x

我编译并将 paginate-head.jar 添加到我的构建路径中。在我的控制器中，我得到了分页器，并将其传递给渲染。

```
public static void newjoinee() {
    ValuePaginator vp = help.showNewJoineesList();
    render(vp);
} 
```

除了作为查询结果创建的列表之外，我还将虚拟值添加到列表中，并使用此列表实例化分页器。

```
public ValuePaginator showNewJoineesList() {
        List<String> foo = new ArrayList<String>();
        ArrayList<String> bar = new ArrayList<String>();
        bar.add("Ek");
        bar.add("Don");
        bar.add("Teen");
        ValuePaginator vpaginator = new ValuePaginator(bar);

        //Also tried to pass a list obtained as a result of a query.
        //foo = databaseAgent.getloginuserdata();    
        //ValuePaginator vpaginator = new ValuePaginator(foo);
        return vpaginator;
    } 
```

在我看来，我尝试显示如下列表，取自另一个 SO [question](https://stackoverflow.com/questions/8671850/pagination-in-playframework)。

```
#{paginate.list items:paginator, as:'r'} 
  <table>
    <tr>
      <td>${r[0]}</td>
      <td>${r[1]}</td>
      <td>${r[2]}</td>
    </tr>
  </table>
#{/paginate.list} 
```

我在视图中看不到列表。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:01:01.420

您的示例中的第一件奇怪的事情是您渲染了一个“vp”变量并在您的视图中使用了一个“分页器”变量，尝试在您的控制器中将您的变量重命名为“分页器”

# jquery - ajax 替换为数据库的新输出

> ID：11554533
> 
> 赞同：1
> 
> 时间：2012-07-19T05:36:46.370
> 
> 标签：jquery, ajax

您好我在 jquery 中使用 ajax post 和 json 从 php 读取数据库输出。现在，一旦我获得 onClick 数据，如果我再次按下按钮，数据就会再次填充到它下方。我想用新内容替换数据。我对 jquery 和 ajax 有点陌生。我正在使用的代码是：

```
 $.ajax({
type:'POST',
dataType: 'json',
url:'database.php',
data:{search: $("#search").val()},
success:function(rows){
    for (var i = 0, len = rows.length; i < len; i++) {
        $('#output').html($('#output').html() + '<tr><td>'+ rows[i].Cat_Name +'</td><td>'+ rows[i].Drug_Caty +'</td><td>'+ rows[i].G_Name +'</td><td>'+ rows[i].B_Name +'</td><td>'+ rows[i].D_Indications +'</td></tr>'        
        );
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:40:05.310

您可以使用`empty()`方法，然后`append()`使用新数据，尝试以下操作：

```
success:function(rows){
    $('#output').empty(); // Removes all child nodes of the set of matched elements from the DOM.
    for (var i = 0, len = rows.length; i < len; i++) {
        $('#output').append('<tr><td>'+ rows[i].Cat_Name +'</td><td>'+ rows[i].Drug_Caty +'</td><td>'+ rows[i].G_Name +'</td><td>'+ rows[i].B_Name +'</td><td>'+ rows[i].D_Indications +'</td></tr>'        
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:41:05.297

你在做

```
output.html = output.html + x;

doing it 3 times will produce

(((output.html + x) + y) + z) 
```

可能是你想要做的是

```
output.html = x; 
```

如果您只想替换 Ajax 加载的内容并保持其他行不变：

```
success:function(rows){
    if($('.ajaxloaded').length)$('.ajaxloaded').remove();
    for (var i = 0, len = rows.length; i < len; i++) {
        $('#output').html('<tr class="ajaxloaded"><td>'+ rows[i].Cat_Name +'</td><td>'+ rows[i].Drug_Caty +'</td><td>'+ rows[i].G_Name +'</td><td>'+ rows[i].B_Name +'</td><td>'+ rows[i].D_Indications +'</td></tr>');
        }
    } 
```

如果您的#output 是表格，还请检查@SangeethMenon 建议一个 tbody

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T05:54:48.233

假设是a`output`的 id`<tbody>``<table>`

然后试试这个

```
$("#output").html("");

for (var i = 0, len = rows.length; i < len; i++) {
        $('#output').html('<tr class="ajaxloaded"><td>'+ rows[i].Cat_Name +'</td><td>'+ rows[i].Drug_Caty +'</td><td>'+ rows[i].G_Name +'</td><td>'+ rows[i].B_Name +'</td><td>'+ rows[i].D_Indications +'</td></tr>');
        }
    } 
```

否则，如果它本身`output`的 id`<table>`

然后试试这个

```
$("#output tbody").html("");

for (var i = 0, len = rows.length; i < len; i++) {
        $('#output').html('<tr class="ajaxloaded"><td>'+ rows[i].Cat_Name +'</td><td>'+ rows[i].Drug_Caty +'</td><td>'+ rows[i].G_Name +'</td><td>'+ rows[i].B_Name +'</td><td>'+ rows[i].D_Indications +'</td></tr>');
        }
    } 
```

PS要保留表格的标题，您应该将它们放在`<thead>`标签内

# sql - 我可以在不使用游标的情况下从单个 SQL 连接返回多个不匹配的结果吗？

> ID：11554534
> 
> 赞同：2
> 
> 时间：2012-07-19T05:36:50.753
> 
> 标签：sql, join, exists, repeat

我有两张桌子。

**员工**

```
EmployeeID, EmployeeName, DocumentType 
```

和

**文档类型**

```
DocumentTypeID, DocumentType 
```

有多个员工和多个文档类型。

对于每个员工，我试图显示哪些 DocumentTypes 不存在。

我似乎无法为每个 EmployeeID/Employee Name 执行此操作。我只能获取所有员工都不存在的 DocumentTypes 列表。

我可以在没有光标穿过每个 EmployeeID 的情况下执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:06:22.027

我猜你正在寻找类似这样的数据

```
EmployeeID EmployeeName DocumentTypeNotMapped
1          abc          doctype1, doctype3, doctype4
2          def          doctype3, doctype2, doctype7 
```

使用查询

```
SELECT ET.EmployeeID, ET.EmployeeName,
SELECT LEFT(DocumentType, LEN(DocumentType) - 1)
FROM (
    SELECT DISTINCT DocumentType + ', '
    FROM DocumentTypeTable 
    WHERE DocumentType != ET.DocumentType 
    FOR XML PATH ('')
  ) D (DocumentType)
FROM EmployeeTable ET 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:11:35.397

**编辑更好的版本**

```
select distinct e.EmployeeID, e.EmployeeName, t.DocumentTypeID, t.DocumentType
from Employee e
cross join DocumentType t
left join Employee e2 on e2.EmployeeID = e.EmployeeID and t.DocumentTypeID = e2.DocumentTypeID
where e2.EmployeeID is null 
```

**原创**- 这可行，但感觉不是最优雅的解决方案

```
select distinct e.EmployeeID, e.EmployeeName, dt.DocumentTypeID, dt.DocumentType
from Employee e
outer apply (
    select * from DocumentType t
    where not exists (
        select 1 
        from Employee e2 
        where e2.DocumentTypeID = t.DocumentTypeID 
        and e2.EmployeeID = e.EmployeeID)
) dt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T06:44:13.387

假设您使用的是 sql server

```
;with cte as (
select E.EmployeeID, E.DocumentType,D.DocumentTypeID from Employee E
 left outer join Document D
on E.DocumentType<>D.DocumentTypeID),
cte1 as (select EmployeeID,DocumentTypeID  from cte
group by  EmployeeID,DocumentTypeID
having count(*)>1)
select * from cte1
union all
select EmployeeID,DocumentTypeID from cte where EmployeeID not in
(select EmployeeID from cte1)
order by EmployeeID,DocumentTypeID 
```

# python - openid通信中MAC的key是如何共享的

> ID：11554536
> 
> 赞同：1
> 
> 时间：2012-07-19T05:37:02.453
> 
> 标签：python, security, openid

我正在查看 janrain python-openid，我在从 OP 到 RP 的通信中看到以下参数 -

1)`openid.assoc_handle:{HMAC-SHA1}{50054f83}{NXBefg==}`

算法名称后面的两个参数是什么？是关键吗？

2)

```
openid.sig:eQwD7bcwAyfC9HrwQzEXFIGsKq8=
openid.signed:assoc_handle,claimed_id,identity,mode,ns,ns.sreg,op_endpoint,response_nonce,return_to,signed 
```

上面两个参数是OP返回的签名，以及被签名的字段。RP 现在如何解密签名，我没有看到共享密钥？

3）或者，如果在请求期间共享密钥，那么为什么攻击者不能抓住它并更改响应？

谢谢，穆尔塔萨

# spring-mvc - @RequestParam defaultvalue 不接受枚举值作为默认值

> ID：11554538
> 
> 赞同：27
> 
> 时间：2012-07-19T05:37:08.767
> 
> 标签：spring-mvc, enums, annotations

我正在使用弹簧休息控制器。

这是代码。

```
@RequestParam(value = "status", required = false, defaultValue = StatusEnum.STATUS.toString()) 
```

如果我使用枚举作为默认值，我得到注释属性 RequestParam.defaultValue 的值必须是一个常量表达式。

根据我的理解，它应该接受枚举作为默认值。

请指教。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-11-21T02:17:35.363

由于它必须是一个字符串，并且它必须是一个常量表达式，因此您唯一真正的选择是使用适用于 的值`Enum.valueOf()`，因为这就是最终解决问题的方式。

具体来说，您应该阅读

```
@RequestParam(value = "status", required = false, defaultValue = "STATUS") 
```

当然，假设这`"STATUS"`是`StatusEnum.STATUS`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-03T14:26:11.183

避免在不同位置使用字符串的解决方法是使用类似的东西

```
public enum StatusEnum {
    STATUS();

    public class Names {
       public static final String STATUS = "STATUS";
    }

 } 
```

在查询参数中

```
@RequestParam(value = "status", required = false, defaultValue = StatusEnum.Names.STATUS) 
```

# jquery - Zend Framework 和 jQuery - 在页面之间传递对象

> ID：11554542
> 
> 赞同：1
> 
> 时间：2012-07-19T05:37:25.480
> 
> 标签：jquery, zend-framework

我可能把自己编码到了这里的一个角落。我正在 Zend Framework 中开发一个聊天应用程序。我拥有的是一个“动作”页面 ( `action.phtml`)，它处理 jQuery 发送的所有请求（在`index.phtml`动作触发时加载）。动作脚本运行静态方法并返回一个 json 编码的响应。( `$response = Chat::Static_Method`)

我的问题是，当我运行应用程序时，一切正常，我可以`action.phtml?run=whatever`在浏览器控制台中看到各种操作 ()。我似乎无法弄清楚如何`index.phtml`读取响应到 action.phtml 的响应。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T02:36:32.880

我希望我能更清楚地解释我的问题。发布代码根本不是一种选择，仅聊天应用程序就涉及数十个文件和数百行代码。

原来问题是布局。我的操作页面生成的 json 没有被 jquery 使用，因为它周围有所有其他 html。解决方案相当简单（在通读文档一夜之后） - 我只是在该操作中停用了布局；

```
$this->_helper->layout()->disableLayout(); 
```

所以，我希望这可以帮助某人......虽然我知道这是一个非常独特的问题。

# jquery - JQuery 和 MVC 会话超时未重定向

> ID：11554546
> 
> 赞同：0
> 
> 时间：2012-07-19T05:37:51.087
> 
> 标签：jquery, asp.net-mvc

我有一个 MVC 应用程序，它使用 $.ajax 从 Controller 获取数据。

不幸的是，当会话超时时，页面不会被重定向到登录页面。有人可以帮助解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:57:02.897

您可以编写一个自定义的 [Authorize] 属性，该属性将返回 JSON 而不是在未经授权的访问情况下引发 401 异常，这将允许客户端脚本优雅地处理该场景：

```
AttributeUsage(AttributeTargets.Class | AttributeTargets.Method)]
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
    {
        if (filterContext.HttpContext.Request.IsAjaxRequest())
        {
            filterContext.Result = new JsonResult
            {
                Data = new 
                { 
                    // put whatever data you want which will be sent
                    // to the client
                    message = "sorry, but you were logged out" 

                },
                JsonRequestBehavior = JsonRequestBehavior.AllowGet
            };
        }
        else
        {
            base.HandleUnauthorizedRequest(filterContext);
        }
    }
} 
```

在 ajax 你可以这样做：

```
$.get('@Url.Action("SomeAction")', function (result) {
    if (result.message) {
        alert(result.message);
        window.location.reload();
    } else {
        // do whatever you were doing before with the results
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:47:00.577

如果默认情况下页面假设重定向，您可以尝试捕获特定的超时/身份验证错误，并基于此错误从客户端重定向到登录控制器

这里是取自这篇文章的一个例子

[http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx)

```
 $.ajax({
  url: "/yourservlet",
  data: { },
  complete: function(xmlHttp) {
     if(xmlHttp.status==401)
      {
    // redirect to login page

     }
  }
}); 
```

# python - 使用python一次读取一个整数

> ID：11554549
> 
> 赞同：5
> 
> 时间：2012-07-19T05:38:30.607
> 
> 标签：python, file-io, python-2.7

如何从文件中读取 int？我有一个大 (512MB) txt 文件，其中包含整数数据：

```
0 0 0 10 5 0 0 140
0 20 6 0 9 5 0 0 
```

现在，如果我使用`c = file.read(1)`，我一次只能得到一个字符，但我一次需要一个整数。像：

```
c = 0
c = 10
c = 5
c = 140 and so on... 
```

任何伟大的心脏请帮助。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T05:45:36.203

这是一种方法：

```
with open('in.txt', 'r') as f:
  for line in f:
    for s in line.split(' '):
      num = int(s)
      print num 
```

通过这样做`for line in f`，您正在一点一点地阅读（既不使用`read() all`也不使用`readlines`）。很重要，因为您的文件很大。

然后你用空格分割每一行，并在你去的时候阅读每个数字。

您可以进行比那个简单示例更多的错误检查，如果文件包含损坏的数据，它将失败。

正如评论所说，这对你来说应该足够了——否则，如果你的文件可能有非常长的行，你可以做一些更棘手的事情，比如一次读取块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T06:05:20.507

512 MB 真的没有那么大。如果您仍然要创建数据列表，我认为一次性完成阅读步骤没有问题：

```
my_int_list = [int(v) for v in open('myfile.txt').read().split()] 
```

如果你可以构建你的代码，这样你就不需要内存中的整个列表，最好使用生成器：

```
def my_ints(fname):
    for line in open(fname):
        for val in line.split():
            yield int(val) 
```

然后使用它：

```
for c in my_ints('myfile.txt'):
    # do something with c (which is the next int) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-19T05:46:10.940

我会这样做：

*   缓冲区 = file.read(8192)
*   内容 += 缓冲区
*   按空格分割输出字符串
*   从数组中删除最后一个元素（可能不是完整的数字）
*   用最后一个元素字符串替换内容
*   重复直到缓冲区为无`

# python - 使用 django-allauth 扩展 Django 用户模型

> ID：11554551
> 
> 赞同：3
> 
> 时间：2012-07-19T05:38:33.560
> 
> 标签：python, django, django-models, django-authentication

我正在使用 django-allauth，我希望能够将新字段添加到我的用户模型中。对你来说最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T05:55:57.477

我使用用户名。但我相信它看起来几乎一样;）

```
class UserProfile(UserenaBaseProfile):

        user = models.OneToOneField(User, unique=True)
        city = models.CharField(max_length=32, blank=True, null=True) 
```

在 settings.py 中：

```
AUTH_PROFILE_MODULE = 'accounts.UserProfile' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T05:56:14.800

请参阅文档[存储有关用户的其他信息](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)，制作与`OneToOneField`相关的模型`User`。

```
from django.contrib.auth.models import User

class UserProfile(models.Model):
    # This field is required.
    user = models.OneToOneField(User)

    # Other fields here
    accepted_eula = models.BooleanField()
    favorite_animal = models.CharField(max_length=20, default="Dragons.") 
```

# java - 将纬度和经度值设置为文本框

> ID：11554556
> 
> 赞同：0
> 
> 时间：2012-07-19T05:39:28.020
> 
> 标签：java, android, locationmanager

> **可能重复：**
> [Android AVD wifi 错误](https://stackoverflow.com/questions/10834164/android-avd-wifi-error)

我正在使用 Android，我想在文本框中显示当前纬度值，在另一个文本框中显示当前经度值。我写了下面的代码，但它不起作用。它没有在相应的文本框中设置任何纬度或经度值。我的代码有问题吗？

```
public class MainActivity extends Activity implements LocationListener {
    private TextView latituteField;
    private TextView longitudeField;
    private LocationManager locationManager;
    private String provider;

    private static final String TAG = "CurrentLocation";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        latituteField = (TextView) findViewById(R.id.lat1);
        longitudeField = (TextView) findViewById(R.id.lat2);

     // Get the location manager
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        // Define the criteria how to select the location provider -> use
        // default
        Criteria criteria = new Criteria();
        provider = locationManager.getBestProvider(criteria, false);
        locationManager.requestLocationUpdates(provider, 0, 0, this);
        Location location = locationManager.getLastKnownLocation(provider);
        onLocationChanged(location);
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        locationManager.removeUpdates(this);
    }

    @Override
    public void onLocationChanged(Location location) {
       if (location != null) {
           System.out.println("Provider " + provider + " has been selected.");
           int lat = (int) (location.getLatitude());
           int lng = (int) (location.getLongitude());
           Log.e("GPS", "location changed: lat="+lat+", lon="+lng);
           latituteField.setText(String.valueOf(lat));
           longitudeField.setText(String.valueOf(lng));
       } else {
           latituteField.setText("Provider not available");
           longitudeField.setText("Provider not available");
       }
    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }
} 
```

或者我需要做一些事情，比如从某个地方传递纬度或经度值？还是会自动获取当前位置值？

我的清单文件中有这些-

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
    <uses-permission android:name="android.permission.CONTROL_LOCATION_UPDATES" />
    <uses-permission android:name="android.permission.INTERNET" /> 
```

还有什么我需要补充的吗？

当我在 logCAT 中看到时，我也收到了这个错误

```
07-18 22:43:59.836: E/Trace(3410): error opening trace file: No such file or directory (2) 
```

我正在进入我的文本框，`Provider Not Available`因为它将进入其他循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:02:37.237

正如您在[评论](https://stackoverflow.com/questions/11554556/set-latitude-and-longitude-value-to-text-box#comment15281574_11554556)中提到的，您正在从 Eclipse 运行代码。让我告诉你，在 Eclipse 中无法获取真正的 GPS 坐标。但是，您可以通过将 .gpx 文件加载到 DDMS 来模拟它。

出于相同目的访问我的[答案。](https://stackoverflow.com/a/10834224/996493)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:45:15.030

```
int lat = (int) (location.getLatitude());
           int lng = (int) (location.getLongitude()); 
```

你应该有 double 而不是 int，你知道 lat，long 是 double 的，你只取整数部分。即使在小数点后 4 位后位置也会发生变化。

# iphone - 推送通知警报视图操作？

> ID：11554557
> 
> 赞同：1
> 
> 时间：2012-07-19T05:39:31.813
> 
> 标签：iphone, ios, ipad, apple-push-notifications

我有一个 iphone 应用程序，我在其中将推送通知作为警报视图。当我的应用程序处于后台状态时，推送通知即将到来，当我单击它或解锁手机时，它直接进入应用程序我把它留在了前台状态。我在警报中添加一个动作，点击视图按钮，它将转到另一个视图控制器。当我点击通知时，我不想进入应用程序。我需要显示警报视图，当单击视图按钮时，我需要执行我的操作。任何人都可以帮助我实现这一点。这是我的代码片段`-

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    //check application in forground or background
    if(application.applicationState == UIApplicationStateActive)
    {
        //NSLog(@"FOreGround");
        //NSLog(@"and Showing %@",userInfo)
    }
    else
    {   
        NSDictionary *curDict= [userInfo objectForKey:@"aps"];
        UIAlertView *connectionAlert = [[UIAlertView alloc] initWithTitle:@"app" message:[NSString stringWithFormat:@"%@",[curDict objectForKey:@"alert"]] delegate:self cancelButtonTitle:@"View" otherButtonTitles:@"Cancel",nil];
        [connectionAlert show];
        [connectionAlert release];
        [UIApplication sharedApplication].applicationIconBadgeNumber =[[curDict objectForKey:@"badge"] intValue];   
    }
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    NSLog(@"applicationWillEnterForeground");
    [UIApplication sharedApplication].applicationIconBadgeNumber = 0;
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

    if ([title isEqualToString:@"View"]) 
    {   
        NSArray *mycontrollers = self.tabBarController.viewControllers;
        NSLog(@"%@",mycontrollers);
        [[mycontrollers objectAtIndex:0] popToRootViewControllerAnimated:NO];
        mycontrollers = nil;  
        tabBarController.selectedIndex = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T08:10:12.677

您向用户显示 UIAlertView，当收到通知时会调用**didReceiveRemoteNotification:**函数。

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
    {
        NSLog(@"userInfo :%@",userInfo);

        NSString* msg = [userInfo valueForKey:@"aps"];

        if (self._VCObj.isViewLoaded && self._VCObj.view.window) {
                // viewController is visible don't show.
        }
            else { // viewController is not visible
                [[[UIAlertView alloc]initWithTitle:@"Title" message:msg delegate:self cancelButtonTitle:@"ok" otherButtonTitles: nil] show];
            }
        }
    } 
```

[见教程](http://www.raywenderlich.com/32960/apple-push-notification-services-in-ios-6-tutorial-part-1)

# android - android如何使其他应用程序可访问数据文件夹内容

> ID：11554559
> 
> 赞同：1
> 
> 时间：2012-07-19T05:39:46.667
> 
> 标签：android, android-contentprovider

我想使用 pdf 查看器应用程序打开保存在应用程序数据文件夹中的 pdf 文件。如何使其他应用程序可访问数据文件夹内容。一些代码片段会对我有很大帮助。

```
Intent intent = new Intent(Intent.ACTION_VIEW);
                 intent.setDataAndType( Uri.parse("content://" + pdf_path), "application/pdf" );
                 startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:47:39.177

```
File file = new File(“/sdcard/read.pdf”);
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(file),”application/pdf”);
intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
startActivity(intent); 
```

您可以通过此从外部存储器访问 pdf 文件。确保您提供正确的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:47:28.557

首先确保您的`.pdf`文件具有`MODE_WORLD_READABLE`权限，例如，

现在从应用程序数据文件夹访问`.pdf`文件意味着，`/data/data/<package_Name>/`

使用，`getFilesDir()`返回Application数据目录的路径，

然后，

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new File(getFilesDir()+ "pdf_path")),"application/pdf" );
startActivity(intent); 
```

# javascript - 访问通过 Flixter API 生成的 JSON

> ID：11554560
> 
> 赞同：0
> 
> 时间：2012-07-19T05:39:57.683
> 
> 标签：javascript, json, rotten-tomatoes

我正在尝试开发一个 Web 应用程序来利用 flixster API (Rotten Tomatoes) 我试图访问以下网址：`http://api.rottentomatoes.com/api/public/v1.0/movies.json?apikey=w697y3tvc9n4arza5vcnx9zt&q=alien`

我很确定有一种方法可以包含这个跨域 JSON，或者我应该像任何其他 src/css 一样简单地包含应用程序的 url 吗？

```
function callflixapi() {
    var url ='http://api.rottentomatoes.com/api/public/v1.0/movies.json?callback=jsonprequest&apikey=w697y3tvc9n4arza5vcnx9zt&q=alien';
}

function jsonprequest(response){
    console.log(response);
} 
```

这是我使用 jsonp 使用的代码。我在文档的正文负载上调用 callflixapi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:49:50.357

使用 JSONP 支持

[http://developer.rottentomatoes.com/docs/read/JSON](http://developer.rottentomatoes.com/docs/read/JSON)

编辑：JSONP 解释

[http://json-p.org/](http://json-p.org/)

# svn - SVN-ANT 复制任务不起作用，来自 CLI 的 svn 复制可以，相同的参数

> ID：11554564
> 
> 赞同：2
> 
> 时间：2012-07-19T05:40:06.483
> 
> 标签：svn, ant, tagging, svnant

我正在使用 SVN ANT 版本 1.3.1、ANT 1.7.1、Java 1.6u，并且 SVN 存储库是 1.6（我认为 -`prod\db\format`文件显示为“4”。）

我有两个 SVN 目标（我想知道在“复制”任务尝试执行之前“提交”任务是否没有完成，这就是为什么我将它作为我的 build.xml 的一部分引用。）

我正在尝试将发布标记为生产版本（对于依赖 SVN-ANT 的 ANT 构建来说，这似乎是一项相当常见的任务，对吧？）我可以在命令行上执行以下操作：

```
svn copy http://svnserver/svn/prod/Production/App \
     http://svnserver/svn/prod/Archive/App/1.5 \
     -m "Tagging Release of App as Version 1.5" 
```

我当然明白了

```
Committed revision 27. 
```

但是，当我尝试：

```
<target name="check-in" >
    <svn refid="svn.settings">
        <commit message="${application.name} - Committed to Prod" > 
            <fileset dir="${src.dir}">
                <include name= "**/*"/>
            </fileset>
        </commit>
    </svn>
</target>

<target name="tag-version-number" depends="check-in" >
    <svn refid="svn.settings">
        <copy
            srcUrl="http://svnserver/svn/prod/Production/App/"
            destUrl="http://svnserver/svn/prod/Archive/App/1.5/"
            message="Tagging Release of App as Version 1.5">
        </copy>
    </svn>
</target> 
```

我回来了奇怪的错误：

```
check-in:

tag-version-number:
      [svn] svn: File not found: revision 28, path '/Production/App/Production/App'
      [svn] svn: '/svn/prod/!svn/bc/28/Production/summons' path not found: 404 Not Found (http://svnserver)
      [svn] svn: File not found: revision 28, path '/Production/App/Production/App'
      [svn] svn: '/svn/prod/!svn/bc/28/Production/summons' path not found: 404 Not Found (http:/svnserver)
      [svn] <Copy> failed.

BUILD FAILED
C:\build\promote_prod.xml:210: Can't copy 
```

他们让我认为，在尝试访问 SVN 存储库上的路径之前，提交可能没有完成？如果是这样，我该怎么做才能确保它等待提交通过？在我添加这个新的“tag-version-number”目标之前，一切都很好（并且，为了记录，这是构建脚本中唯一一次运行目标“check-in”。）

问题是别的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T05:44:31.453

你用的是svn-kit吗？如果是这样，我今天在尝试将一些经过验证的真实构建脚本迁移到工作中的新 Jenkins 实例时遇到了同样的问题。在准备正式发布时，我们打上发布号的标签，然后根据标签拉取代码来构建它。像 OP 一样，我觉得这一定是一个非常标准的用例。

顺便说一句，使用 -v 标志运行 ant，svnant 会报告它是使用 svnkit、javahl 还是回退到命令行：

```
 [svn] Using svnkit
  [svn] <Export> started ...
  [svn] export -r HEAD https://foo.com/svn/project 
```

据我所知，svnant 1.3.1（以及它所依赖的 svnkit 版本）根本无法 100% 与 SVN 服务器 1.7.x 一起工作。它适用于我们的某些命令，包括导出，但是当使用 svn copy 进行标记时，我们遇到了上述相同的错误：

```
22:06:48        [svn] copy -rHEAD https://foo.com/svn/project/trunk https://foo.com/svn/project/tags/tag3
22:06:48        [svn] svn: File not found: revision 64, path '/project/trunk/project/trunk'
22:06:48        [svn] svn: '/svn/project/!svn/bc/64/project/trunk' path not found: 404 Not Found (https://foo.com) 
```

值得庆幸的是，一个名为 opticylic 的救世主就在那里。在浏览器中打开一个新选项卡，然后转到：

[https://github.com/opticyclic/svntask](https://github.com/opticyclic/svntask)

从下载部分获取 svntask-1.7-1.0.9.zip 并按照安装说明进行操作，主要是使用适当的类路径声明 taskdef。该任务的用法与tigris的svnant略有不同。具体是

```
<copy src="url" dst="url2" commitMessage="tmbg"/> 
```

代替

```
<copy srcUrl="url" destUrl="url2" message="flood"/>, 
```

并且不再支持新的 svnsettings，因此您必须直接在标签中指定用户名和密码。

完成此操作后，svn copy 应该可以正常工作，从而可以从 ant 应用标签。注意确保 opticylic 的 svnant 任务在执行期间看不到任何旧的 svnant 库。我以前在我的 ant/lib 中有 svn 相关的 jar，所以必须删除它们才能使用 opticyclic 的 svnant。

最后，我意识到 opticylic 的 svnant 不支持 svn 导出，但我们需要它用于我正在处理的构建。因此，我被迫让 BOTH svnant 可用于我的构建。只要您独立指定它们的两个类路径并且（重要！）给其中一个指定一个新名称，因为它们都默认使用 svn 作为标记名），您应该能够执行相同的操作：

```
<path id="svnant.classpath">
        <fileset dir="lib/svnant">
          <include name="*.jar"/>
        </fileset>
</path>
<typedef resource="org/tigris/subversion/svnant/svnantlib.xml" classpathref="svnant.classpath"/>

<path id="svnant2.classpath">
            <fileset dir="lib/svn2">
              <include name="*.jar"/>
            </fileset>
</path>
<taskdef name="svn2" classname="com.googlecode.svntask.SvnTask" classpathref="svnant2.classpath"/> 
```

在这里，我允许 tigris 的 svnant 声明默认的 'svn' 标签名称，同时给 opticyclic 的标签 svn2。通过这种方式，我们可以在 ant 脚本的过程中调用任何一个。请记住要注意您在任何给定时刻都使用了您正在使用的 svnant 所需的正确语法。

也许 opticyclic 会为他们的 svnant 增加出口，因为他们有了一些新的粉丝。这将使我们能够简化上述内容并直接使用较新的 svnant。

# ios - iOS 阻止应用切换

> ID：11554567
> 
> 赞同：1
> 
> 时间：2012-07-19T05:40:11.170
> 
> 标签：ios, admin

我想防止在 iPad 上切换应用程序。我需要为我的员工加载一个自定义应用程序，他们可以使用该应用程序而在 iPad 上什么都不做。我听说 Apple 允许在不通过应用商店的情况下加载自定义应用程序用于商业用途。

General > Restrictions 下的基本设置让我关闭了一些应用程序，但这还不够。理想情况下，我需要两个提供两种模式：Guest 和 Admin。管理员可以使用其他应用程序和设置。如果可以为此利用密码功能，那就太好了。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:41:56.897

禁用设备上的主页按钮的功能将在 iOS 6 中提供，如[iOS 6 Preview: Accessibility](http://www.apple.com/ios/ios6/#accessibility)所示。

您也可以使用 Apple 的配置工具通过设置来配置 iPad 以禁用主页按钮`SBStoreDemoAppLock`。请参阅 Stack Overflow 上的另一个问题，[Lock-down iPhone/iPod/iPad so it can only run one app](https://stackoverflow.com/questions/5011774/lock-down-iphone-ipod-ipad-so-it-can-only-run-one-app)。

最后，至于部署您的应用程序，您可能需要[iOS Developer Enterprise Program](https://developer.apple.com/programs/ios/enterprise/)。

# cocos2d-iphone - Cocos2d - 旋转精灵的碰撞检测

> ID：11554568
> 
> 赞同：1
> 
> 时间：2012-07-19T05:40:13.787
> 
> 标签：cocos2d-iphone

我尝试检测两个精灵之间的碰撞。

```
if(CGRectIntersectsRect([SpriteA BoundingBox], [SpriteB boundingBox])) 
```

但是当我旋转任何精灵时，碰撞检测并不完美。我知道使用像素完美碰撞，但我不知道。请任何人帮助我了解如何检测碰撞，如果有的话，请给我任何代码块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:53:46.300

您可以通过两种方式进行操作。

1.  为您的精灵使用 box2D 身体。示例：[点击这里](http://www.raywenderlich.com/606/how-to-use-box2d-for-just-collision-detection-with-cocos2d-iphone)
2.  使用 CGMutablePathRef，并使用 CGPathContainsPoint() 代替 CGRectIntersectsRect。示例：[点击这里](http://bobueland.com/cocos2d/2011/the-magic-of-cgpaths/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T05:52:02.213

您可以使用 box2d 让它为您检测所有碰撞

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T11:27:05.337

这是可能的！尝试使用 CGPath。我有同样的问题。我已经用这个教程解决了：http: [//bobueland.com/cocos2d/2011/the-magic-of-cgpaths/](http://bobueland.com/cocos2d/2011/the-magic-of-cgpaths/)

旋转路径试试这个方法，它围绕边界框的中心旋转路径：

```
-(CGPathRef) rotateCGPath:(CGPathRef)path corner:(CGFloat)radians
{
    CGRect bounds = CGPathGetBoundingBox(path); 
    CGPoint center = CGPointMake(CGRectGetMidX(bounds), CGRectGetMidY(bounds));
    CGAffineTransform transf = CGAffineTransformIdentity;
    transf = CGAffineTransformTranslate(transf, center.x, center.y);
    transf = CGAffineTransformRotate(transf, -radians);
    transf = CGAffineTransformTranslate(transf, -center.x, -center.y);
    return CGPathCreateCopyByTransformingPath(path, &transf);
} 
```

在此之后，您可以通过以下方式简单地检测碰撞：

```
if (CGPathContainsPoint(Collisionpath, NULL, collisionPoint, NO))
{ //is inside the path } 
```

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T07:09:02.633

您还可以参考[Ray Wenderlich 教程](http://www.raywenderlich.com/606/how-to-use-box2d-for-just-collision-detection-with-cocos2d-iphone)来检测任意 2 个 Box2D 物体之间的碰撞。

# codeigniter - 从模型中下拉框的输入中获取价值

> ID：11554570
> 
> 赞同：0
> 
> 时间：2012-07-19T05:40:36.347
> 
> 标签：codeigniter, model, views

我有一个名为**f_chapter**的下拉框，id 也是**f_chapter**。由于当用户选择其中一个选项时它有不同的选择，在模型中我可以通过调用 $this->input->post('f_chapter') 来获取输入。但我不需要这个，我需要输入的值。

例子：

```
<option value=""></option>
<option value="id1">Chapter1</option>
<option value="id2">Chapter5</option>
................... 
```

现在，如果我想在我的模型中获取价值，我应该如何获得？因为我不需要第 1 章，第 5 章.........而我需要 id1，id2......因为这些是我的主键，我需要它们来进行数据库查询。请帮忙。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:48:38.073

默认情况下，您将获得这些值而无需任何更改。我的意思是你只会得到 id1,id2,.. 而不是第 1,2 章 ..

# ssis - 是否可以自动生成 SSIS 派生列转换？

> ID：11554571
> 
> 赞同：1
> 
> 时间：2012-07-19T05:40:42.610
> 
> 标签：ssis

我需要在控件中创建数百个派生列转换。但是，我已经在文本文件中有元数据。是否可以从我的元数据生成控件的标记代码并将其插入到 dtsx 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:20:13.530

可以以编程方式操作包。[开始阅读这个 msdn 部分](http://msdn.microsoft.com/en-us/library/ms345167.aspx)。

# android - 如何设置自定义视图大小？

> ID：11554572
> 
> 赞同：1
> 
> 时间：2012-07-19T05:40:50.727
> 
> 标签：android, android-custom-view

我正在创建一个三角形（自定义视图），然后将其添加到父视图（RelativeLayout）。我在这里面临的问题是查看父级的全屏，我如何将自定义视图的大小设置为该边界。三角形从视图延伸，它有触摸监听器。我动态地改变三角形的大小。

我被添加到该视图中的 onMeasure() 但它需要一些固定的宽度和高度..

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    Log.d(TAG, "Width spec: " + MeasureSpec.toString(widthMeasureSpec));
    Log.d(TAG, "Height spec: " + MeasureSpec.toString(heightMeasureSpec));

    int widthMode = MeasureSpec.getMode(widthMeasureSpec);
    int widthSize = MeasureSpec.getSize(widthMeasureSpec);

    int heightMode = MeasureSpec.getMode(heightMeasureSpec);
    int heightSize = MeasureSpec.getSize(heightMeasureSpec);

    int chosenWidth = chooseDimension(widthMode, widthSize);
    int chosenHeight = chooseDimension(heightMode, heightSize);

    int chosenDimension = Math.min(chosenWidth, chosenHeight);

    setMeasuredDimension(chosenDimension, chosenDimension);
} 
```

当用户更改视图的大小时，我想根据视图的大小设置自定义视图的宽度和高度。看图像。

![在此处输入图像描述](../Images/3eaa6be6a0c76b64e54e7dc3d605e886.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:33:30.010

点在哪里并不重要。您可以绘制任何方向的三角形。但自定义视图将始终是一个矩形。如果您不在三角形之外绘制任何内容，则视图将显示为三角形。

# sql - Powershell 和 SQL Server - 设置 nocount

> ID：11554573
> 
> 赞同：1
> 
> 时间：2012-07-19T05:40:53.187
> 
> 标签：sql, sql-server, powershell, nocount

我正在编写一个 powershell 函数来从我们的数据库中检索学生列表，但返回的第一项始终是记录数。我想不出将 set nocount on 合并到脚本中的方法 - 有什么想法吗？

到目前为止的功能是：

```
Function CheckMIS{
  $Table = new-object System.Data.DataTable
  $sqlConn = new-object System.Data.SqlClient.SqlConnection("Server=blah blah")
  $adapter = new-object System.Data.SqlClient.SqlDataAdapter(
     "select txtSchoolID,
             intSystemStatus,
             txtForename, txtSurname,
             txtForm
      from TblPupils
      where intSystemStatus = 1 ",$sqlConn)
  $adapter.Fill($Table)
  $sqlConn.Close()
  write-output $table
} 
```

它返回一个可爱的表格 - 但第一行始终是记录数。我只需要抑制该输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:41:26.773

您可以捕获行数以供以后使用。

```
$rowCount = $adapter.Fill($Table) 
```

或者只是忽略它。

```
$adapter.Fill($Table)  | Out-Null 
```

添加“Set Nocount On; select txtSchoolID”...在我的测试中没有任何效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:11:55.360

您应该能够添加`SET NOCOUNT ON`到您的 SQL。

IE`SET NOCOUNT ON select txtSchoolId, intSystemStatus, txtForename, txtSurname, txtForm from TblPupils where intSystemStatus = 1`

# actionscript-3 - 旧版本检测

> ID：11554574
> 
> 赞同：0
> 
> 时间：2012-07-19T05:41:04.657
> 
> 标签：actionscript-3

每当我上传构建时，我都在开发社交游戏（动作脚本），对于某些用户来说，似乎没有下载新构建，而是将旧版本（缓存）提供给他们。我怎样才能检测到用户使用的是旧版本，并可能向他们抛出一个弹出窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:03:46.017

我认为这更多的是关于您的 Web 服务器配置。缓存相关的标头更精确。但是我们在某个时候决定通过在每次部署时发布应用程序####.swf 来解决这个问题，其中#### 是内部版本号。并相应地更新了 HTML 包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:26:21.743

您可以使用的一个小技巧是将一些 FlashVars 附加到嵌入代码的末尾，例如

```
<embed src="file.swf?version=1.01" .. /> 
```

您需要做的就是在`version`每次更新 SWF 时更新 的值。

# ios - 当视图控制器以模态方式加载新的视图控制器时，有没有办法得到通知？

> ID：11554577
> 
> 赞同：0
> 
> 时间：2012-07-19T05:41:12.780
> 
> 标签：ios, uiviewcontroller, notifications, modal-dialog, delegation

我需要收到有关模态视图控制器演示的通知，我知道我可以使用`NSNotificationCenter`发布和观察我的自定义通知来完成，但我想知道这些通知是否已经存在。
谢谢，
安德里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T05:28:49.060

我找到了解决方案。我刚刚创建了一个抽象类，它覆盖了呈现模式视图的方法，如下所示：

```
- (void) presentModalViewController:(UIViewController *)modalViewController animated:(BOOL)animated{
    [[NSNotificationCenter defaultCenter] postNotificationName:PresentingModal object:self];
    [super presentModalViewController:modalViewController animated: animated];
} 
```

当然，我所有的视图控制器都继承自它。
希望这可以帮助。

# matlab - 如何在matlab中为x和y不能取向量值的自定义函数f（x，y）制作等高线图？

> ID：11554581
> 
> 赞同：4
> 
> 时间：2012-07-19T05:41:43.237
> 
> 标签：matlab, contour, matlab-figure

我们知道在 Matlab 中为函数 Z(x,y) 绘制等高线图的常用方法是
`[X,Y] = meshgrid(-2:.2:2,-2:.2:3);`
`Z = X.*exp(-X.^2-Y.^2);`（例如）
`contour(X,Y,Z);`

但是，这种方式不适用于以下函数 f(x,y)：
假设 h_{ij}(x,y) 是一个大矩阵（例如 100x100），其中每个分量都是一个（自定义）函数x 和 y。我们定义另一个函数

f(x,y)=det(h_{ij}(x,y))

并想要制作函数 f(x,y) 的等高线图。

f=det(h) 中的行列式要求矩阵 h 的每个分量都是一个数字。所以 f(x,y) 只有当 x 和 y 是数字而不是向量时才能由 Matlab 计算。如果我们使用[X,Y]=meshgrid(...)，则表示矩阵h的每个分量都是一个向量，而f(X,Y)无法计算。

有没有办法为上述函数 f(x,y) 制作等高线图，其中 x 和 y 不能取向量值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:14:39.653

假设它`h`被预定义为一个函数矩阵，每个函数接受两个标量参数并输出一个矩阵（或`det`函数的任何有效输入），以及下标`i`并`j`引用该参数的 X 和 Y 中的索引函数，类似下面的代码应该可以工作（X 和 Y 的大小应该与 h 相同）：

```
applyh = @(fn, x, y) fn(x, y);
[I, J] = meshgrid(1:m, 1:n);
Z = arrayfun(@(i, j) det(applyh(h(i, j), X(i), Y(j))), I, J); 
```

我认为你误解了`meshgrid`它的作用——meshgrid 的输出可以很容易地输入到上面的函数中。它们不是每个元素中的向量（只是一个二维矩阵）。然后，您可以`Z`像往常一样绘制。

# java - JTree节点重命名保留用户对象

> ID：11554583
> 
> 赞同：3
> 
> 时间：2012-07-19T05:41:53.887
> 
> 标签：java, swing, jtree

编辑 JTree 节点时，该节点的用户对象会丢失（设置为字符串）。如何获取原始用户对象？因为我想获取用户对象的 id 以便更新数据库中编辑的名称。

我正在使用 TreeModelListener 的 treeNodesChanged 方法，如下所示。

```
public void treeNodesChanged(TreeModelEvent e) {
    DefaultMutableTreeNode node;
    node = (DefaultMutableTreeNode) (e.getTreePath().getLastPathComponent());
    try {
        int index = e.getChildIndices()[0];
        node = (DefaultMutableTreeNode) (node.getChildAt(index));
    } catch (NullPointerException ex) {}        
    System.out.println(node.getUserObject().getClass()); // my user object gone
} 
```

那么有什么方法可以在编辑之前获取原始用户对象吗？任何要覆盖的 DefaultTreeCellRenderer 或 DefaultTreeCellEditor 方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T06:09:52.480

实施[TreeModel.valueForPathChanged()](http://docs.oracle.com/javase/6/docs/api/javax/swing/tree/TreeModel.html#valueForPathChanged%28javax.swing.tree.TreePath,%20java.lang.Object%29)。或者如果您使用的是覆盖[DefaultTreeModel.valueForPathChanged()](http://docs.oracle.com/javase/6/docs/api/javax/swing/tree/DefaultTreeModel.html#valueForPathChanged%28javax.swing.tree.TreePath,%20java.lang.Object%29)`DefaultTreeModel`。这是设置新用户对象的地方，它使您有机会访问原始用户对象。

# svn - 如何更改 SVN 存储库以使用主干/分支/标签结构并将工作副本切换到它

> ID：11554587
> 
> 赞同：3
> 
> 时间：2012-07-19T05:42:08.987
> 
> 标签：svn

我当前的存储库是：**/var/www/svn/project** .我在项目文件夹中的所有文件。它现在没有主干、分支、标签结构。现在我创建了带有主干、分支、标签的新项目**“/var/www/svn/projectnew” 。****我将“/var/www/svn/project”**的转储加载到**“/var/www/svn/projectnew/trunck”并在****“/var/www/svn/projectnew/branches/site1”**中创建了一个分支树干。

目前我的工作副本指向**"/var/www/svn/project"**。我试图将我的工作副本从“/var/www/svn/project”切换到**“/var/www/svn/projectnew/branches/site1”**，但它说，

*存储库 UUID 'd3f06af7-c344-2d45-b1bd-7799e0e99d7a' 与预期的 UID 'f5f9f6ac-3f50-7e4d-a9d4-0bc9a9b443b8' 不匹配。*

帮我看看我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T11:30:38.257

原始回复：

您可以在这里做两件事 -`db/uuid`如果您只是将 svn 存储库转移到一台新机器并且您打算关闭旧服务器，则将文件从旧服务器复制到新服务器。另一件事取决于您使用的 SVN 版本。如果您使用的是 1.7，请使用`svn relocate`（请参阅[文档](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.relocate.html)），或者对于较旧的客户端，请使用适用于此场景`--relocate`的命令选项。`svn switch`

编辑：

我误解了——你想用trunk/branches/tags 结构重新创建你的存储库。在这种情况下，转储和重新加载项目将无济于事，因为它不会神奇地创建新结构——它只会重新创建你已经拥有的东西。您可以在存储库浏览器中（如果您使用 TortoiseSVN）或直接从您的工作副本轻松创建新结构。如果您是从命令行执行此操作，则语法将是这样的，具体取决于确切的目录结构。替换`http:.../`为您的 svn 服务器的地址。哦，**先备份存储库！**

```
# check out top-level directory
svn co http://.../
# make new trunk dir and move all contents to it -- note spelling of 'trunk'
mkdir trunk
svn add trunk
svn mv * trunk

# now create tags and branches
mkdir tags
mkdir branches
svn add trunk tags branches

svn commit -m "Created new repository layout" 
```

现在，您需要做的就是切换现有的工作副本：

```
svn switch http://.../project  http://.../trunk/project 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T08:39:45.107

另一种方法是保持历史不变，并从新版本开始切换到新结构。在这种情况下，您不需要对存储库进行转储/加载操作。

1.  “svn删除”存储库根目录中的所有内容
2.  创建主干/分支/标签结构
3.  “svn copy”从修订版删除到主干之前的存储库内容

# java - 空 SimpleDateFormat.parse() 分配的日期

> ID：11554595
> 
> 赞同：1
> 
> 时间：2012-07-19T05:42:58.853
> 
> 标签：java

我讨厌发布另一个 SimpleDateFormat 问题，但在 Google 或其他线程中找不到我的答案。我的代码在下面，评论指出了问题。

```
// The dateString format is "Thu Jul 19 00:04:11 +0000 2012". I confirmed that there
// is no preceding or trailing white space.
public static GregorianCalendar stringToDate(String dateString) {

    GregorianCalendar calendar = new GregorianCalendar();

    ParsePosition pos = new ParsePosition(0);

    SimpleDateFormat simpleDateFormat = new SimpleDateFormat("EEE MMM d H:mm:ss Z yyyy");

    Date date = simpleDateFormat.parse(dateString, pos);

    // 'Unknown Source' error thrown by setTime() as date is ultimately null.
    calendar.setTime(date);

    return calendar;

} 
```

[我已经确认我的 dateString 参数正确通过，我的位置对象从 0 开始，并且我已经根据http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)多次查看 SimpleDateFormat [.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)。它看起来对我来说是正确的，但我仍然测试了“d”和“H”的各种排列。我唯一能想到的是，使用这个我缺少一些细微差别，或者我离基地很远。

这会编译（javac 1.6.0_33），但是当运行（java 版本“1.6.0_33”）时，它甚至不会处理传递给它的第一个 dateString 值。我正在运行 Windows 7 64 位日文版。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T05:49:00.893

如果您计算机上的当前语言环境是日语（这里很可能是这种情况），那么`SimpleDateFormat`将采用默认语言环境（日语）并尝试使用它解析日期。

如果日期字符串始终为英文，则应`Locale.US`在[`SimpleDateFormat`构造函数](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html#SimpleDateFormat%28java.lang.String,%20java.util.Locale%29)中指定。

# python - 带有聚合的 AppEngine Python 查询

> ID：11554596
> 
> 赞同：0
> 
> 时间：2012-07-19T05:43:00.990
> 
> 标签：python, google-app-engine, properties, aggregate

我有以下模型：

```
class Conversation:
    questionId = db.IntegerProperty(required=True)
    count = db.IntegerProperty(required=True)
    message = db.StringProperty(required=True) 
```

对话由原始问题 ID、消息计数和消息组成。所以数据的一个例子是：

```
- questionId: 2; count: 0; message: How are you?
- questionId: 2; count: 1; message: I'm fine thanks, how are your kids?
- questionId: 2; count: 2; message: They're great, growing to fast!
- questionId: 3; count: 0; message: John, your late!
- questionId: 3; count: 1; message: I know, I'm so sorry! 
```

我的问题是，如何查询以获取每个问题 ID 的最新（最大）计数？从上面的示例中，它将返回：

```
- questionId: 2; count: 2; message: They're great, growing to fast!
- questionId: 3; count: 1; message: I know, I'm so sorry! 
```

请记住，不幸的是，数据并未像示例中那样按排序方式存储，因此请想象所有行都乱序。餐桌数量也很大！非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:47:08.203

```
question_id = 'whatever'
latest_convo = Conversation.gql('WHERE questionId = :1 ORDER BY count DESC', question_id).get() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:22:45.763

你有两个选择：

*   为每条记录添加一个“最新”标志，仅针对具有给定 ID 的最新问题将其设置为 true，并在新记录替换它时设置为 false。
*   对每个 ID 使用单独的查询，仅获取每个 ID 的最新问题（使用 sort 和`.get()`.

哪个最有意义取决于您在任何给定时间检索到多少独特的问题。如果它不止几个，你可能应该修改你的模型。

# node.js - HTML到jade-语法错误：意外的保留字

> ID：11554597
> 
> 赞同：0
> 
> 时间：2012-07-19T05:43:03.593
> 
> 标签：node.js, express, pug

嘿伙计们请帮助我正在尝试使用 express 将此 html 转换为翡翠，但我收到以下语法错误：意外的保留字这是我要转换为翡翠的 html 代码

```
<html>

<head>

<title>New Todolist</title>

<link rel="stylesheet" href="/stylesheets/jquery-ui-1.8.20.custom.css"></link>

<link rel="stylesheet" href="/stylesheets/jquery.ui.selectable.css"></link>

<script type="text/javascript" src="/javascripts/jquery-1.7.2.min.js"></script>

<script type="text/javascript" src="/javascripts/jquery-ui-1.8.20.custom.min.js"></script>

<script type="text/javascript" src="/javascripts/jquery.ui.selectable.js"></script>

<script type="text/javascript" src="/javascripts/show.js"></script>

</head>

<body>

<h1>Checklist</h1>

<a href='' id='shorcuts' style="left: 90%; position: relative;">Shotcuts</a>

    <div class='display-url' style="left: 40%; position: relative; top: 70px; width: 400px;">

                <tr id='url'>

        <td>URL :</td>

        <td><input type='text' id='url-txt'></input></td>

        <td><input type='button' id='url-btn' value='Copy'></input></td>

       </tr>

    </tr>

        <td><input type='hidden' id='url-hidden'></input></td>

    </tr>

</div>  

<div class='display-title' style="left: 40%; position: relative; top: 150px; width: 400px;">

    <tr id='title'>

        <td>Title (optional) :</td>

        <td><input type='text' id='title-txt' autocomplete='off'></input></td>

    </tr>

</div>

<div class='display-content' style="left: 40%; position: relative; top: 200px; width:400px;">

    <table class='content' tabindex="0" style=" table-layout: fixed;">

        <tr>

            <td><input type="checkbox" class='task-done'></input></td>

            <td><input type="textArea" class="descript-task" autocomplete="off"        

                              autofocus="autofocus" ></input></td>

            <td><input type="hidden" class='hidden-input'></input></td>

        </tr>

    </table>

</div>  

</body>

</html> 
```

这是我的玉码

```
h1 Checklist

div.display-url

 tr

  td

   p URL :

  td

   input(type='text')

  td

    input(type='button' ,value='Copy')

  tr

   td

    input(type='hidden',id='url-hidden')

div.display-title

 tr

  td 

   p Title (optional)

  td

   input(type='text',id='title-txt',autocomplete='off') 

div.display-content

 table.content

  tbody

   tr

    td

     input(type="checkbox" ,class='task-done')

    td

     input(type="textArea" ,class='descript-task',autocomplete="off" autofocus="autofocus") 

    td 

     input(type="hidden",class='hidden-input') 
```

布局代码

```
!!!

html

  head

    title= title

    link(rel='stylesheet', href='/stylesheets/jquery-ui-1.8.20.custom.css')

    link(rel='stylesheet', href='/stylesheets/jquery.ui.selectable.css')

    script(type="text/javascript",src="/javascripts/jquery-1.7.2.min.js")

    script(type="text/javascript",src="/javascripts/jquery-ui-1.8.20.custom.min.js")

    script(type="text/javascript",src="/javascripts/jquery.ui.selectable.js")

    script(type="text/javascript",src="/javascripts/show.js")

  body!= body 
```

这是我在 app.js 中的 app.cnfigure

```
app.configure(function(){

  app.set('views', __dirname + '/views');

  app.set('view engine', 'jade');

  app.set("view options", {layout: false});

  app.use(express.bodyParser());

  app.use(express.methodOverride());

  app.use(app.router);

  app.use(express.static(__dirname + '/public'));

});

app.get('/', function(req, res){

   res.render("show",{title:'newtodo'});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:49:35.157

看起来你在“复选框”之后缺少一个逗号：

```
input(type="checkbox" class='task-done')
                     ^ 
```

并且，正如乔纳森所指出的，在“自动完成”之后：

```
input(type="textArea" ,class='descript-task',autocomplete="off" autofocus="autofocus")
                                                               ^ 
```

# jsp - 会话过期后清除登录字段并重定向到登录页面？

> ID：11554602
> 
> 赞同：0
> 
> 时间：2012-07-19T05:43:39.850
> 
> 标签：jsp, session, struts

我正在使用 struts 框架，会话到期后我将用户重定向到登录页面。空闲时间到期后，它会正确重定向到登录页面，但会在文本字段中显示用户名和密码。重定向到登录页面时如何清除字段？

```
<%
    int timeout = session.getMaxInactiveInterval();
    String redirect=request.getContextPath()+"/jsp/login.jsp";
    response.setHeader("Refresh", timeout + "; URL ="+redirect);
    response.addHeader("Cache-Control", "max-age=0,no-cache,no-store");
%> 
```

这是会话到期和重定向到登录页面的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:53:51.753

您可以通过将 value="" 放在文本字段中来做到这一点。

像，

```
<s:textfield name="username" value=""/>
<s:textfield name="password" value=""/> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:53:17.097

登录字段可能由浏览器填充。不是通过服务器（检查生成的 HTML 代码会立即告诉您）。

这是一件好事：如果用户选择让浏览器记住你的应用程序的登录名和密码，那么这就是他想要的，你不应该禁止它。

# html - 如何在 HTML 中添加块注释？

> ID：11554606
> 
> 赞同：3
> 
> 时间：2012-07-19T05:43:52.083
> 
> 标签：html

我知道有一种方法可以注释掉代码块，但我在使用 Google 时找不到任何帮助。所有搜索都会导致其他与 HTML 相关的内容，但不是我要查找的内容。

例如，我想在我的网站中有代码，但我不想拥有功能，所以我想分别注释掉它。

# mysql - 识别和更新 MySQL 中的值

> ID：11554610
> 
> 赞同：0
> 
> 时间：2012-07-19T05:44:03.610
> 
> 标签：mysql

我有一张充满这些类型值的表

```
AU$97-AU$130 
```

我想用破折号之前的所有内容替换这些值所以上面会变成

```
AU$97 
```

我知道如何使用 PHP/MySQL 使用几个单独的步骤来做到这一点，但是 MySQL 中是否有一次性查询来做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T05:47:29.650

```
SELECT SUBSTRING_INDEX(col_name, '-',1) from tblNAME 
```

编辑：更新 col

```
UPDATE tblNAME set col_name=SUBSTRING_INDEX(col_name, '-',1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T05:51:11.420

```
UPDATE tbl_name SET col_name=SUBSTRING_INDEX(col_name, '-',1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T05:52:30.340

假设您希望所有带有破折号的东西都受到影响：

```
UPDATE my_table SET col = SUBSTRING_INDEX(col, '-',1) 
```

# iphone - iOS 显示有关 PNG 图像的一些错误

> ID：11554614
> 
> 赞同：2
> 
> 时间：2012-07-19T05:44:13.940
> 
> 标签：iphone, ios, png

我正在使用 Xcode 4.3.3，我之前已经尝试构建我的应用程序并运行它。但是现在我将我的文件安排在我的项目文件夹中，按 'button' ， 'icon' ， 'background' 分组......我还在其他文件夹中复制了一些资源/图像，将它们按顺序排列，但现在我遇到了麻烦。

## 我试图在 Xcode 中再次构建我的应用程序，我发现了 CopyPNG 错误：

*找不到/Users/vella/Desktop/Sample/res/2.png 命令/Users/vella/Desktop/installer/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/PrivatePlugIns/ iPhoneOS 构建系统 Support.xcplugin/Contents/Resources/copypng 失败，退出代码为 1*

现在，我不知道我是否错过了一些 png 文件。我还阅读了一些答案，例如我应该将 PNG 文件保存为 NOT INTERLACED 或 PNG 文件已损坏。我如何知道哪个 PNG 文件丢失或损坏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T05:50:25.943

检查是否将 2.png 添加到项目文件夹中。在将图像添加到项目中时，单击复选框“将项目复制到目标组文件夹”。如果您的 png 文件已损坏，它将在您的项目中显示为红色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T10:33:16.980

您必须将 PNG 文件保存为 NOT INTERLACED。例如，使用 Photoshop 时，转到菜单文件->保存为 Web 和设备。取消选中“隔行扫描”框并保存文件。通常交错框已经取消选中。希望有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:13:49.323

清理项目中的 png 文件并重新导入：

1.  在项目导航器中删除（备份）该文件。只需删除并将文件移动到垃圾桶。
2.  转到项目构建阶段：i。选择根项目 ii. 选择目标 iii。选择构建阶段标签 iv。展开 Copy Bundle Resources 列表如果您看到刚刚删除的文件仍然存在（可能是红色），请将其删除
3.  再次重新导入文件

这对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T13:44:49.617

我只是有同样的问题。我总是做同样的事情来将图像添加到我的项目中，但我以前从未遇到过这样的问题。

我在错误消息中发现，Xcode 试图查找图像的图像路径错误。Xcode 正在搜索的路径类似于“...../My Project Folder/images/favourites.png”，但正确的路径类似于“...../My Project Folder/myProjectName/images/favourites.png” . 为了解决这个问题，我创建了一个路径为“...../My Project Folder/images”的文件夹，然后我备份了我的图像并从项目窗口中删除了所有这些并选择了“移至垃圾箱”。我将备份文件夹中的图像复制并粘贴到这个新文件夹中。然后我将它们拖放到“支持文件”并选择“将项目复制到目标组的文件夹（如果需要）”。最后我清理了项目并运行它。它对我有用。祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T08:08:24.100

是的，再次添加它，这次不要排列或重新排列资源文件夹中的任何东西。还要对图像进行特定命名，以便您稍后在项目中轻松记住和实施它们。

# objective-c - 有没有办法检查从块引用的局部变量是否保留？

> ID：11554624
> 
> 赞同：2
> 
> 时间：2012-07-19T05:44:49.087
> 
> 标签：objective-c

苹果文档说“在手动引用计数的环境中，复制块时保留块内使用的局部变量。在块内使用实例变量将导致对象本身被保留。”

我打算检查局部变量是按块保留还是不使用retainCount，但失败了。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:29:59.703

除非复制块，否则块不会保留对象。由于块只能捕获与捕获状态相同的范围内的状态，因此实现假定不需​​要实际保留任何内容，除非为了逃避声明范围而复制块。

* * *

从“执行指针”的角度来考虑它（有点像在调试器中单步执行代码时）。

当执行指针越过块的声明时，该块将捕获快照——复制——在块范围内使用但未在块本身内声明的所有变量。对于一个对象，这意味着该块复制对*object 的引用*，而不是对象本身的副本。

一个块从堆栈开始。当第一次复制一个块时，它会使用编译器生成的每块“复制助手”从堆栈复制到堆中（一个简单的块可能没有复制助手，实际上可能永远不会在堆栈上）。该复制助手将保留块引用的任何对象（无论如何都没有通过`__block`变量引用）。

在块被释放和释放之前，它们不会被释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:56:20.043

`retainCount`没用。

相信实施的文档。如果由于某种原因失败或违背您的期望，请提供一个示例程序。

无需验证保留计数，因为它就是这样工作的。

如果您确实对此表示怀疑并想对其进行完整性检查，则可以将 Instruments 配置为记录`NSObject`s 的引用计数操作。在这种情况下，像往常一样运行（当然是从 Instruments 启动），在分配的对象列表中找到感兴趣的实例，然后评估感兴趣对象的 ref-count-ops 的回溯。你应该在那里看到它。

# unit-testing - 为什么我在这个 TestNG DataProvider 注释方法中得到一个空指针？

> ID：11554626
> 
> 赞同：0
> 
> 时间：2012-07-19T05:44:57.527
> 
> 标签：unit-testing, junit, testng

我遇到了这个 TestNG DataProvider 方法的问题。谁能告诉我为什么会发生这个错误并帮助我修复这个类？我无法插入数组。

我得到的错误是模糊的：

```
Caused by: java.lang.NullPointerException
    at tr.test.TestScript.createData(TestScript.java:55) 
```

这是我的代码：

```
@SuppressWarnings("resource")
@DataProvider(name = "addresses")
public Object[][] createData() {
    Object[][] objs = new Object[100][];
    CSVReader reader = null;
    try {
        reader = new CSVReader( new FileReader("input.csv"), ',' );
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
    Object[] nextLine;
    int row = 0;
    try {
        while ( ( nextLine = reader.readNext() ) != null ) {
            System.out.println( "Adding test case " + (row+1) + ": " + nextLine[0] + ", " + nextLine[1] + ", " + nextLine[2] );
            objs[row][0] = nextLine[0]; //this is line #55
            objs[row][1] = nextLine[1];
            objs[row][2] = nextLine[2];
            row++;
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    if ( objs == null ) {
        System.out.println("Error: Input file empty.");
        System.exit(0);
    }
    return objs;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:37:40.240

因为你还没有初始化`objs`。就个人而言，我会构建一个 ArrayList 并且：

```
return list.toArray(); 
```

此外，您需要添加到列表中的项目也需要初始化：

```
ArrayList<Object[]> = new ArrayList<Object[]>();
...
Object[] foo = new Object[2];
foo[0] = nextLine[0];
foo[1] = nextLine[1];
foo[2] = nextLine[2];
System.out.println( "Adding test case " + (i+1) + ": " + a + ", " + c + ", " + s );
list.add(foo);

...
Object[][] objs = new Object[list.size()][];

for (int i = 0; i < objs.length; i++) {
    objs[i] = list.get(i);
}

return objs; 
```

# jquery - jqgrid自定义函数访问其他字段值

> ID：11554627
> 
> 赞同：0
> 
> 时间：2012-07-19T05:44:58.377
> 
> 标签：jquery, jquery-ui, jqgrid

我在我的项目中使用 Jqgrid。出于验证目的，我在每一列上定义了自定义函数。喜欢，

```
 { label: 'Name', name: 'Name', width: 300,
            editable:true, edittype:"custom", sortable:false,
            editoptions:{custom_element: getDatabaseColumnSelector,
                         custom_value:getSelectedDatabaseColumn},
            editrules:{required:true, custom:true, custom_func:somefunction}
          }, 
```

在这里，我使用 somefunction() 进行验证，在此函数中，我也使用其他列值进行验证。就像是

```
 if employeecountry = "US" then name.length < 10 
```

但是在这个函数中，我怎样才能在 Name 列的自定义函数中获取employeecountry 的值。我试过了

```
 "# + rowId + _columnname" 
```

但这在添加表单的情况下不起作用，因为当时未设置 rowId。如何在另一列中定义的自定义函数中获取其他列值，这将在编辑表单、内联编辑和添加表单中工作。任何帮助都会非常显着。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:03:16.773

不幸[`custom_func`](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acommon_rules#editrules)的是非常严格，只提供`value`和`colname`参数值。但是您也许可以编写一些代码来解决这个问题。

您应该能够使用类似于以下的代码检测表单：

```
jQuery('#FrmGrid_mygrid').length > 0 
```

然后你应该能够使用像这样的代码访问表单上的输入元素，尽管它会根据可用的输入控件类型而有所不同：

```
jQuery('#mycolname', '#FrmGrid_mygrid').val() 
```

这有帮助吗？

听起来您已经有代码可以在其他场景（例如内联编辑）中进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T22:24:20.237

你可以使用这样的东西：

```
 function my_custom_funct(v){ 
        thisId=$.jgrid.jqID(this.id); 
        var myval = $("#mycolname","#FrmGrid_"+thisId).val();
        alert (myval);
    } 
```

$.jgrid.jqID(this.id); 获取当前网格 ID。

$("#FrmGrid_"+thisId).val(); 获取当前的 Formr id

# c++ - C++ 构建过程

> ID：11554632
> 
> 赞同：4
> 
> 时间：2012-07-19T05:45:51.623
> 
> 标签：c++, build-process

我目前正在开发一个开源 C++ 项目。我在 C++ 方面没有太多经验，因为我的日常工作主要涉及 Java。我现在正计划发布我的 C++ 项目，我想知道我应该如何安排我的项目的打包。例如，在 Java 中，所有的类文件都打包成 jar 文件。那么 C++ 中的等效方法是什么？组织源代码/二进制文件有什么好的做法吗？顺便说一下，我的目标平台是 Linux。

另一个问题是我目前正在使用 Eclipse CDT 插件进行开发和构建。那么无论如何我可以从 Eclipse 项目中提取构建脚本并将其用作通用构建脚本吗？关于 C++ 构建/打包有什么好的参考吗？提前致谢。

* * *

已编辑

再澄清一点，我认为我的项目的发布可以被视为一个应用程序。它是用于软件配置管理的命令行工具。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T09:32:27.263

> 我目前正在开发一个开源 C++ 项目。

这简化了很多事情。您应该为您的项目提供构建脚本并支持它们用于不同的用例（了解 Makefile，有类似的概念，如“目标”）。

> 我在 C++ 方面没有太多经验，因为我的日常工作主要涉及 Java。

您过去在 Java 中拥有（并且现在要求）的大多数东西都是发明的，因为它们缺乏 C/C++。至少了解一些关于动态（共享）/静态库（简单来说就是 .so 和 .a 文件）的知识。

> 我现在正计划发布我的 C++ 项目，我想知道我应该如何安排我的项目的打包。

“C++ 项目的打包”是非正式的。您可以为知名 IDE 提供源代码、构建脚本和一些项目文件。

编辑：您已指定您正在构建命令行应用程序。我相信您所需要的只是从该应用程序的简单 Makfile 开始。参考 Makefile 可以由 Eclipse 自动生成。如果您打算将应用程序部署为独立软件，那么您必须了解打包（rpm、deb、tgz）。

> 例如，在 Java 中，所有的类文件都打包成 jar 文件。

由于没有二进制标准来编码 C++ 类 (ABI)，因此没有跨编译器兼容 C++“包”之类的东西（即使“模块”在最新的 C++11 标准中也被拒绝）。在 linux 上，您最有可能使用 GCC（或 Intel 的编译器，或 LLVM 的 CLang，或 OpenWatcom 的自定义构建或......），但您链接到的标准库版本使二进制构建的发布几乎无用. 这就是重新分发源代码的原因。

> 那么 C++ 中的等效方法是什么？

这里没有明确的答案。

> 组织源代码/二进制文件有什么好的做法吗？

看看大型项目，看看他们组织构建的方式。“构建工程师”这个职业强调了大型项目编译/链接的困难。

> 顺便说一下，我的目标平台是 Linux。

这也是不完整的描述。“Linux”是一个模糊的术语。您应该谈论 Linux 发行版、编译器工具链和包管理器。例如，Ubuntu 12、amd64、GCC 4.6 工具链、APT 包管理器。

围绕相同的内核源构建了不同的“linux”。有不同的编译器。至少要考虑三个主要的包管理器：Debian/Ubuntu(deb,apt)、Red Hat(rpm)、Slackware(tgz)。

> 另一个问题是我目前正在使用 Eclipse CDT 插件进行开发和构建。那么无论如何我可以从 Eclipse 项目中提取构建脚本吗

有一种“元技术”：您编写项目的“描述”，然后一个工具生成项目文件并为您的源构建脚本。看看[CMake](http://cmake.org)。由于您使用的是“linux”，因此请尝试查看一些标准的 autotools (autoconf) 方式。

> 关于 C++ 构建/打包有什么好的参考吗？

您应该从构建应用程序开始，然后继续解决部署问题。C/C++ 是一个难以学习的传统，有很多在 Java 中被避免的微妙之处。

# objective-c - 具有不同颜色和图标的 NSTableViewCell

> ID：11554637
> 
> 赞同：0
> 
> 时间：2012-07-19T05:46:33.130
> 
> 标签：objective-c, macos, cocoa, nstableview

如何在不同的行中制作具有不同颜色和图标的 NSTableViewCell，就像查找器中的应用程序一样？（图标和文字在同一列）

![发现者](../Images/a9bc1bc76dc3ff9e69d8617d5544fb06.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T05:53:54.287

在`NSTableView`，呼叫`setUsesAlternatingRowBackgroundColors:YES`。

# android - 添加到 JNI 本地引用表失败（有 512 个条目）

> ID：11554638
> 
> 赞同：2
> 
> 时间：2012-07-19T05:46:44.140
> 
> 标签：android

我在一个 android 应用程序中工作，当我尝试在某些设备上运行我的应用程序时，我收到错误“dalvikvm(11625): Failed added to JNI local ref table (has 512 entries)”。请帮我纠正错误。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:36:03.173

您可能在 jni 中分配了很多对象但未释放

或者，NewGlobalRef 没有对应的 DeleteGlobalRef

# jsf - JSF 2.0 Managed Property 对象有两个不同的实例，当我打开页面和做 ajax 请求时

> ID：11554649
> 
> 赞同：3
> 
> 时间：2012-07-19T05:47:57.320
> 
> 标签：jsf, jsf-2, primefaces, managed-bean, mojarra

全部

我是 JSF2 的新手（在 tomcat7 上使用 Mojarra + primeFaces），我得到了 ManagedProperty 对象的奇怪行为：

```
@ManagedBean
@ViewScoped
public class CreateFactMB implements Serializable{

    @ManagedProperty(value="#{collectionFactTable}") 
    private CollectionFactTable collectionFactTable; //SessionBean
    ...
    //setters/getters 
```

我在**打开页面**时打印了对象（刷新 brouser）我看到了一个 collectionTree 实例

```
mbeans.CollectionFactTable@12803ba 
```

但是当我做ajax请求时

```
<p:commandButton id="btn1" value="Save" update="growl"
                actionListener="#{createFactMB.doUpdate}" /> 
```

在**doUpdate**我看到我的 collectionTree 的另一个实例

```
mbeans.CollectionFactTable@625c49 
```

这是问题，因为我无法在 ajax 操作时进行更改（因为我刚刚复制）

任何人都可以帮助我吗？我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:10:21.547

我认为您对 SessionScoped 持久性在 JSF 中的工作方式存在误解。这种行为是预期的和正常的。

![在此处输入图像描述](../Images/45daad46f8c96f26378f0cc8fd8b819b.png)

在请求开始时，无论范围如何，都会实例化所有托管 bean。在恢复视图阶段，基于会话的持久性值被设置为新的托管 bean 对象，有效地将 SessionScoped bean 恢复到发送最后一个响应之前的最后一个状态。

一旦响应完成并被发送，这些托管 bean 实例中的数据将被持久化，并且对象被取消引用以进行垃圾回收。该过程在下一个请求时重新开始，无论它是否是 Ajax。

# php - 我可以使用 Doctrine2 和 symfony 将抽象类保存在数据库中吗

> ID：11554653
> 
> 赞同：0
> 
> 时间：2012-07-19T05:48:28.863
> 
> 标签：php, symfony, doctrine-orm, abstract-class, persist

我有这个班级结构

`UserInterface`---`abstract Class User extends UserInterface`

`class Teacher extends User`

现在我正在使用类表继承

所以在数据库中我有两个表`User`和`Teacher with FK to User`

我坚持这样的抽象类

```
/**
 * @ORM\Entity(repositoryClass="xxxx\UserBundle\Repository\UserRepository")
 * @ORM\HasLifecycleCallbacks
 * @ORM\Table(name="user")
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="discr", type="string")
 * @ORM\DiscriminatorMap({"puser" = "User", "teacher" = "Teacher"})
 */
abstract class User implements UserInterface, GroupableInterface
{ 
```

我想知道我做得对吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:58:37.487

由于无法启动抽象类，因此您不能使用 Doctrine 持久化它。您可以保留扩展抽象类的类，在这种情况下是教师。

# webgl - WebGL blendFunc bug 还是误解？

> ID：11554654
> 
> 赞同：1
> 
> 时间：2012-07-19T05:48:36.363
> 
> 标签：webgl, alphablending, glblendfunc

我正在尝试在黑色背景上绘制一个半透明的黑色三角形。

![在此处输入图像描述](../Images/4e46e567cd0019809e9a5a56b776be69.png)

这是我的示例：[http ://codewithoutborders.com/posted/blend.html](http://codewithoutborders.com/posted/blend.html)

blendFunc 已设置并启用（第 151 行）：

```
gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);
gl.enable(gl.BLEND); 
```

缓冲区被清除为黑色（第 129 行）：

```
gl.clearColor(0.0, 0.0, 0.0, 1.0);
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT); 
```

着色器填充半透明黑色（第 10 行）：

```
gl_FragColor = vec4(0.0, 0.0, 0.0, .5); 
```

我希望三角形是黑色的，因为文档指出

```
result = {foreground}*sourceAlpha + {background}*(1-sourceAlpha)
       = (0,0,0,.5)*.5 + (0,0,0,1)*.5
       = (0,0,0,.75) 
```

哪个是黑色的，对吧？

那么灰色是从哪里来的呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T05:54:47.687

（多么尴尬。在发布后 3 分钟回答我自己的问题，但不是在严重脱发之前）

灰色来自 HTML 页面的白色背景，在通过其他黑色画布“打孔”一个 3/4 透明孔后显示出来。

添加

```
style="background:black;" 
```

到标签解决了这个问题。

[下面gman的评论是一个更好的解决方法]

# openlayers - Openlayers TypeError：a.geometry.getBounds 不是函数

> ID：11554657
> 
> 赞同：1
> 
> 时间：2012-07-19T05:48:57.247
> 
> 标签：openlayers

我在 Openlayers.js 文件中遇到错误，如下所述：

```
"TypeError: a.geometry.getBounds is not a function"
[Break On This Error]   

...=this.resolution||this.map.getResolution()},drawFeature:function(a,b){null==b&&(... 
```

如果有人知道解决方案，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:30:08.983

如何将功能添加到图层。

我今天遇到了同样的问题并找到了解决方案。

当我这样做时发生了错误：

```
var marker = new OpenLayers.Feature.Vector(new OpenLayers.LatLon(lat, lng); 
```

修复方法是将 LatLon 更改为 Point ，如下所示：

```
var marker = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(lat, lng)); 
```

# c# - 在 Windows Phone 7 中的特定时间运行任务

> ID：11554669
> 
> 赞同：0
> 
> 时间：2012-07-19T05:49:55.140
> 
> 标签：c#, silverlight, windows-phone-7

如果我的应用程序正在运行或处于休眠状态，我们可以在后台的特定时间运行一些任务吗？这在 windows phone 7.5 Mango 中是否可行。如果不可能，那么借助推送通知可以解决任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:37:28.150

如果您不是 Windows Phone 中当前活动的应用程序，您的应用程序将被删除，这意味着您的一些状态被保存并且您的应用程序被暂停（例如，您的应用程序不再运行任何代码）。因此，您无法创建允许您的应用程序在特定时间执行任何操作的代码，而无需使用推送通知。即使使用推送通知，您的选择也非常有限。这实际上取决于您希望在收到通知时发生什么。

# java - 在 Java 的某个时间段内从一个国家/地区获取所有推文

> ID：11554672
> 
> 赞同：4
> 
> 时间：2012-07-19T05:50:25.937
> 
> 标签：java, twitter, twitter4j

我正在做一个项目，我将从某个国家/地区获得所有推文，该国家在特定时间段内发布推文。之后我将对其进行数据挖掘（检查某个学生说了多少积极的想法等）。我想使用 Java 作为编程语言。但是我不知道如何开始这个项目。我进行了搜索，我知道有：

*   Twitter 的搜索 API
*   Twitter 的流媒体 API
*   Twitter4J 一个用于 Java 的 Twitter API
*   Java 中的一些有趣的东西：http: [//dev.datasift.com/discussions/category/csdl-language](http://dev.datasift.com/discussions/category/csdl-language)

我可以在哪里开始在一段时间内从一个国家（如果它可以来自给定的州）获取所有推文。一些示例如下：您提供了一个用户名，如果它是公共个人资料，它会返回推文。我没有所有公开个人资料的列表。我应该处理这个问题以及如何处理？

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T22:52:38.087

如果你要使用 Java，Twitter4j 是你最好的选择。

但是你必须选择一种策略来检索你想要的推文。

您可以从 Twitter 本身获取数据，也可以从具有完整 Firehose 访问权限的数据提供者获取数据。DataSift 和 Gnip 是那些可以完全访问 Firehose 的提供程序。如果你想使用数据提供程序，DataSift 是要走的路，因为它自己的查询语言非常酷。

如果您自己检索数据。

*   首先，如果您想实时获取推文，您需要使用 Twitter Streaming API，而 Twitter4j 使其非常易于使用。但不幸的是，Streaming API 不支持国家或语言过滤。您可以收听 Streaming API 进行搜索您注册的查询。

*   您的第二个选项是 Search API。Twitter4j 也使使用 Search API 变得非常容易。Search API 支持更多的过滤选项。但是没有任何方法可以过滤国家/地区的推文。但不是根据**语言**过滤推文更多有用的方法来做到这一点。例如，过滤 en、fr 等的推文。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:04:34.227

您想使用[搜索 API](https://dev.twitter.com/docs/api/1/get/search)。但是，API 不允许按国家/地区进行搜索，只能通过地理编码进行搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-12T12:29:41.643

在 Twitter4J

你可以得到这样的位置。

*tweet.getUser().getLocation()*

但它会获取用户的位置输入字段。

# java - 通过换行麻烦拆分字符串

> ID：11554673
> 
> 赞同：1
> 
> 时间：2012-07-19T05:50:28.610
> 
> 标签：java, regex, sockets, netbeans, split

我正在读取通过套接字发送的文件，然后尝试通过换行符 (\n) 将其拆分，当我读取文件时，我使用的是 byte[] 并将字节数组转换为字符串，以便我可以拆分它。

```
public String getUserFileData()
{
    try
    {
        byte[] mybytearray = new byte[1024];
        InputStream is = clientSocket.getInputStream();
        int bytesRead = is.read(mybytearray, 0, mybytearray.length);

        is.close();

        return new String(mybytearray);
    }
    catch(IOException e)
    {

    }

    return "";
} 
```

这是用于尝试拆分字符串的代码

```
public void readUserFile(String userData, Log logger)
{
    String[] data;
    String companyName;

    data = userData.split("\n");

    username = data[0];
    password = data[1].toCharArray();
    companyName = data[2];
    quota = Float.parseFloat(data[3]);

    company = new Company();            
    company.readCompanyFile("C:\\Users\\Chris\\Documents\\NetBeansProjects\\ArFile\\ArFile Clients\\" + companyName + "\\"
            + companyName + ".cmp");

    cloudFiles = new CloudFiles();
    cloudFiles.readCloudFiles(this, logger);
} 
```

它会导致此错误

```
Exception in thread "AWT-EventQueue-1" java.lang.ArrayIndexOutOfBoundsException 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T06:02:53.687

如评论中所述，`BufferedReader`最好使用 a - 您应该使用 an`InputStreamReader`来从二进制转换为文本。

```
// Or use a different encoding - whatever's appropriate
BufferedReader reader = new BufferedReader(
    new InputStreamReader(clientSocket.getInputStream(), "UTF-8");
try {
    String line;
    // I'm assuming you want to read every incoming line
    while ((line = reader.readLine()) != null) {
        processLine(line);
    }
} finally {
    reader.close();
} 
```

请注意，说明您要使用哪种编码很重要 - 否则它将使用平台的默认编码，该编码因机器而异，而数据可能*采用*一种特定的编码。如果您还不知道是哪种编码，您需要找出答案。在那之前，您根本无法可靠地理解数据。

（顺便说一句，我希望你的真实代码没有空的 catch 块。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T06:03:42.987

您可以使用[BufferedReader](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html)类中的[readLine](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine%28%29)方法。

把`InputStream`下面`InputStreamReader`包起来，然后把它包在下面`BufferedReader`：

```
InputStream is = clientSocket.getInputStream();
BufferedReader reader = new BufferedReader(new InputStreamReader(is)); 
```

还请检查流的编码 - 您可能需要在`InputStreamReader`.

# python - python中的数据结构：在数据库中维护文件系统结构

> ID：11554676
> 
> 赞同：4
> 
> 时间：2012-07-19T05:50:44.890
> 
> 标签：python, database, data-structures, filesystems

我有一个数据组织问题。我正在开发一个客户端/服务器项目，其中服务器必须在驻留在服务器上的数据库中维护客户端文件系统结构的副本。这个想法是在 AJAX 化的 Web 界面中显示服务器端的文件系统内容。现在，我只是将文件列表上传到按顺序转储文件的数据库。问题是一旦它们在数据库中，如何在服务器端重新捕获文件系统结构。通过遍历一个巨大的文件列表来重建服务器端的父->子结构似乎并不可行。但是，当文件对象没有相互引用时，这似乎是唯一的选择。

我不完全确定如何处理。据我所知，我需要在服务器端复制某种类型的文件系统数据结构（也许在 Btree 中？），对象维护指向其父和/或子的指针。我想知道是否有人可以分享任何类似的过去经历，或者可能有一些有用的资源可以为我指明正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:06:08.133

我建议遵循Unix方式。每个文件都被认为是一个字节流，不多也不少。每个文件在技术上由称为*i-node*（索引节点）的单个结构表示，该结构保存与数据物理流相关的所有信息（包括属性、所有权等）。

i 节点不包含有关可读名称的任何内容。每个 i 节点都有一个唯一的编号（永远），作为文件的技术名称。您可以使用类似的数字来为数据库中的字节流赋予其唯一标识。i-node 存储在磁盘上一个单独的连续部分中——想想 i-node 结构的数组（在抽象意义上），或者数据库中的单独表。

回到文件。这样，它由唯一的数字表示。对于您的数据库表示，该数字将是唯一键。如果您需要其他索引节点信息（文件属性），您可以将其他列添加到表中。一列将是 blob 类型，它将表示文件的内容（字节流）。对于 AJAX，我认为文件会很小；所以，你不应该对 blob 的大小限制有问题。

到目前为止，文件存储*为平面结构*（物理磁盘和关系数据库一样）。

目录名的结构和文件的文件名分别保存在另一个文件中（与其他文件一起保存在相同的结构中，也由它们的 i 节点表示）。基本上，目录文件捕获 tuples `(bare_name, i-node number)`。（这种方式硬链接在 Unix 中实现——两个名称与相同的 i-none 编号配对。）根目录文件必须有一个固定的技术标识——即保留的 i-node 编号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T06:55:51.970

如果“数据库”是指 SQL 数据库，那么您正在寻找的神奇词是“自引用表”，或者“修改的预排序树遍历”（MPTT）

基本上，第一种方法处理具有 和 属性的“节点`id`” 。因此，要选择根级目录，您可以执行类似的操作`parent_id``name`

```
SELECT id, name from mytable WHERE parent_id IS NULL AND kind="directory"; 
```

让我们假设返回你

```
[(1, "Documents and Settings"), (2, "Program Files"), (3, "Windows")] 
```

然后，要获取“文档和设置”中的目录，请发出另一个查询：

```
SELECT id, name from mytable WHERE parent_id=1 AND kind="directory"; 
```

等等。简单的！

MPTT 有点棘手，但您会找到一个很好的教程，例如，[在 Wikipedia 中](http://en.wikipedia.org/wiki/MPTT)。这种方法对于诸如“查找给定节点的所有子节点”、“此目录中有多少文件，包括子目录”等查询非常有效，并且当树发生更改时效率较低，因为您需要重新排序所有节点。

由于您使用的是 Python，因此您必须使用 ORM，您不会手动构建这些查询，对吗？SQLAlchemy 能够对[自引用关系](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#self-referential-query-strategies)进行建模，包括通过单个查询将树“急切地加载”到一定深度。

# java - 从 TextField 获取的字符串无法在 J2ME 中转换为小写

> ID：11554677
> 
> 赞同：0
> 
> 时间：2012-07-19T05:51:06.363
> 
> 标签：java, string

我有一个 TextField，我想获取它的内容并将其转换为小写字符串。这是我的代码：

```
TextField searchWord = new TextField("label", "Some Text", 35, TextField.ANY);
String word = searchWord.getString();
String word2 = word.toLowerCase();
System.out.println(word2); 
```

如果我在文本框中输入一个单词**"Book"**它工作正常，即 word2 将是一个字符串**"book"**，但如果我输入一个俄语单词**"Книга"**它根本不起作用，即 word2 仍然是**"Книга"** .

在这种情况下是否有任何黑客攻击？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:53:29.123

我认为您需要使用以下[`toLowerCase(Locale loc)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toLowerCase%28java.util.Locale%29)方法：

> 使用给定语言环境的规则将此字符串中的所有字符转换为小写。

[这](http://www.oracle.com/technetwork/java/javase/javase7locales-334809.html)是 Java SE 7 平台中可用的语言环境列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:06:09.780

我认为答案是：“它在 J2ME 上不起作用！”

参考： [在 J2ME 中将 char 转换为小写，而不使用 Character 类](https://stackoverflow.com/questions/3719711/convert-char-to-lower-case-in-j2me-without-using-the-character-class)...这需要解决方法。

我不知道它不起作用的原因（而且我无法访问 J2ME 源代码来找出答案！），但我怀疑原因是`Character.toLower()`您的 Java ME 平台上的实现仅适用于 ASCII。

我注意到，虽然这些方法的 Java SE javadocs 说它们遵循 Unicode 标准所说的，但 Java ME javadocs 只是含糊不清。这让 Java ME 平台实现者来决定要做什么，在您的情况下，他们似乎搞砸了。

意见：这是一种胡说八道，导致人们说 Sun / Oracle 对 J2ME 管理不善。

# android - Android 无法将变量从广播接收器传递到其他类

> ID：11554680
> 
> 赞同：0
> 
> 时间：2012-07-19T05:51:14.867
> 
> 标签：android, service, broadcastreceiver

嘿，我正在开发需要将变量接收从广播接收器传递到服务类的应用程序

我已经看到这篇文章 [How to pass value from Broadcast receiver to Activity in android?](https://stackoverflow.com/questions/5184437/how-to-pass-value-from-broadcast-receiver-to-activity-in-android) 但它不起作用。

这是我的代码

```
public class BatteryReceiver extends BroadcastReceiver {
int batteryLevel;
int batteryScale;
private int status;
private boolean isCharging;
@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    Log.v("test battery", "battery:" + batteryLevel);
    batteryLevel = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, 0);
    batteryScale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, 0);

    //Log.v("charging state", "state:" + isCharging);
    status = intent.getIntExtra(BatteryManager.EXTRA_STATUS, -1);
    isCharging = status == BatteryManager.BATTERY_STATUS_FULL||status == BatteryManager.BATTERY_STATUS_CHARGING;

    Intent service = new Intent(context, MyService.class);      
    service.putExtra("BatteryLevel", batteryLevel);
    service.putExtra("BatteryScale", batteryScale);
    service.putExtra("Charging", isCharging);
context.startService(service);
}

} 
```

接收 3 个变量的服务类

```
public class MyService extends Service {
int batteryLevel;
int batteryScale;
private boolean isCharging;
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    batteryLevel = intent.getIntExtra("BatteryLevel", batteryLevel);
    batteryScale = intent.getIntExtra("BatteryScale", batteryScale);
    isCharging = intent.getBooleanExtra("Charging", isCharging);

    Log.v("test battery", "battery:" + batteryLevel);
    Log.v("charging state", "state:" + isCharging);

           //other method

           return Service.START_STICKY;
} 
```

最后日志总是显示电池电量为0，充电状态为假，这意味着变量没有传递给服务

正如人们指导我的那样，我已将值分配给如上所示的变量，但这仍然行不通

这是我的主要活动，我认为这里可能有问题

```
 <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".MyApp">
    </activity>

    <service 
        android:name=".MyService"
        android:enabled="true">
    </service>

    <receiver 
        android:name=".BatteryReceiver">
        <intent-filter>
             <action android:name="android.intent.action.BATTERY_CHANGED"></action>
        </intent-filter>
    </receiver>

</application> 
```

在接收器部分，eclispe 返回“导出的接收器不需要许可”

在我的应用程序中，该服务将继续在后台运行并尝试从 braodcastreceiver 接收变量以执行该功能

我不确定我做错了哪一部分，如果您发现错误请告诉我，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:58:10.383

你应该做类似下面的事情，你怎么能期望变量有价值而不考虑它们

```
batteryLevel   =    intent.getIntExtra("BatteryLevel", batteryLevel);
 batteryScale  =       intent.getIntExtra("BatteryScale", batteryScale);
   isCharging   =       intent.getBooleanExtra("Charging", isCharging); 
```

并从哪里接收器呼叫服务。

你应该调用`startService(intent);`// 这个意图应该是你分配/设置值的那个。

```
intent.putExtra("BatteryLevel", batteryLevel);
intent.putExtra("BatteryScale", batteryScale);
intent.putExtra("Charging", isCharging); 
```

就像在上面的代码中一样，您将值设置为意图，但没有将此意图传递给服务，调用`startService(intent);`并在服务中获取`onstart()`方法中的这些值

*在接收器中，您将服务名称设置为 WifiService.class，而您的服务名称是 MyService，这怎么可能。使其成为单一名称*

# tridion - 我们能否在 Tridion 2009 中根据结构组定义发布目标

> ID：11554681
> 
> 赞同：2
> 
> 时间：2012-07-19T05:51:27.563
> 
> 标签：tridion, tridion2009

我们可以根据结构组有不同的发布目标，那么如果我们在我的出版物[07全球英语]中有两个结构组如下：

```
1) My Website
2) My Mobile 
```

因此，每当用户尝试从“我的网站”发布页面/结构组时，他可以看到发布目标“Webiste LIVE”和“网站登台”，但是如果他尝试从“我的手机”结构组发布同一用户，他不会看到上面的发布目标，他会得到“Mobile - LIVE”和“Mobile - Staging”。

请建议上述情况是否可能

谢谢。

此致，

多发性硬化症

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T07:02:56.107

我强烈建议在默认网站旁边为移动网站创建同级出版物。然后，您无需模仿内容管理器的功能，尤其是开箱即用的标准蓝图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T08:35:23.117

我同意 Arjen 的观点，您描述的场景应该通过单独的 Publication 和 BluePrinting 来解决，而不是尝试破解 Publishing Security 模型并将其应用于结构组而不是 Publications（因为它是设计的）。

但在 Rob 关于尝试基于结构组隐藏非相关目标的 UI 扩展的答案旁边，我认为唯一的其他选择是编写一个自定义解析器，该解析器将从发布事务中删除项目。

现在，如果我没记错的话，在 SDL Tridion 2009 中已经可以使用自定义解析器，但出于安全原因，我将仅针对 SDL Tridion 2011 指出此解决方案（我知道该解决方案有效）。

自定义解析器是一个`IResolver`通过方法实现接口的类`Resolve()`，删除项目的解析器的一些示例代码如下：

```
public void Resolve(IdentifiableObject item, ResolveInstruction instruction, PublishContext context, Tridion.Collections.ISet<ResolvedItem> resolvedItems)
{
   List<ResolvedItem> itemsToRemove = new List<ResolvedItem>();
   foreach (ResolvedItem resolvedItem in resolvedItems)
   {
      // check if resolved item belongs here
      if (MyResolvedItemCheck(resolvedItem.Item.Id))
      {
         itemsToRemove.Add(resolvedItem);
      }
   }
   // remove all items that we need to discard
   foreach (ResolvedItem itemToRemove in itemsToRemove)
   {
      resolvedItems.Remove(itemToRemove);
   }
} 
```

请注意，尽管解析器代码可能比 UI 扩展更容易编写且成本更低，但我仍然认为它比使用 Publications 和 BluePrinting 成本更高（即使您当前的 SDL Tridion 许可证包含 Blueprint 限制你已经达到了）。您将不得不在`MyResolvedItemCheck()`方法中进行一些编码，并且根据发布者选择的目标，您最终可能会以这种方式获得空的发布事务和编辑器的不明确性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T05:56:47.283

我相信您只能在出版物上设置出版物目标（比我更有经验的人可能会说其他）。

但是，您可以将所有 4 个目标添加到发布中，并编写一个扩展，根据父结构组的 TCM ID 是否与为移动/网站配置的 ID 匹配来隐藏目标。不过，这将是一个 hack，我不会推荐它。

# iphone - 如何在我的应用程序中实现 Instagram 的模糊效果

> ID：11554683
> 
> 赞同：0
> 
> 时间：2012-07-19T05:51:40.717
> 
> 标签：iphone, cocoa-touch, ios4, image-processing, instagram

在我的应用程序中，需要使用像 instagram 这样的模糊效果。我经历过

[这](https://github.com/esilverberg/ios-image-filters) [这](https://github.com/tomsoft1/StackBluriOS) 这[这](http://incubator.quasimondo.com/processing/fast_blur_deluxe.php)

在第二个链接的帮助下，我可以完全模糊图像，但我必须对一些图像片段应用模糊效果，请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T15:25:31.873

您正在寻找移轴效果或选择性模糊。

在我的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架中，我有这两者的 GPU 加速实现。

有关这些效果，请参阅[GPUImageTiltShiftFilter](https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageTiltShiftFilter.m)和[GPUImageGaussianSelectiveBlurFilter](https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageGaussianSelectiveBlurFilter.m)。

# iphone - 将 Cipher Buffer 转换为 nsdata 并返回 cipherBuffer

> ID：11554689
> 
> 赞同：0
> 
> 时间：2012-07-19T05:52:37.340
> 
> 标签：iphone, objective-c, rsa, private-key

我的问题是`CipherBuffer`uint8_t 我无法将其转换为`NSData`并取回相同的值。问题是我需要将加密的数据发送到服务器。

即使我`NSData`是从服务器端获取的，我也需要将其转换为（unit8_t *）。他们是一种方法吗，我正在使用下面的方法来解密

`- (void)decryptWithPrivateKey:(uint8_t *)cipherBuffer plainBuffer:(uint8_t *)decryptedBuffer`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T07:57:31.963

将 uint8_t 转换为 NSData

```
NSData *data = [NSData dataWithBytes:(const void *)encrypted length:bufferSize]; 
```

并将 NSData 转换为 uint8_t 你可以尝试下面的 NSData 方法

```
- (const void *)bytes; 
```

# jquery - jQuery 数据表

> ID：11554691
> 
> 赞同：0
> 
> 时间：2012-07-19T05:52:52.863
> 
> 标签：jquery, internet-explorer-8, datatables, jquery-datatables

fnGetSelected 函数可以很好地突出显示 chrome 中的数据表行，但是在 IE 中，当我们倾向于使用鼠标选择所选行的单元格值时（就像我们复制数据一样），那么行突出显示被删除！它只发生在 IE 中，我正在使用 IE8。谁能帮我解决这个问题？以下数据表示例在使用 IE 运行时也有同样的问题：http: [//datatables.net/examples/api/select_single_row.html](http://datatables.net/examples/api/select_single_row.html)

当我们选择多个单元格值时也会发生这种情况，只选择一个单元格值不会发生任何奇怪的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:01:48.427

您是否按照给定的参考正确地遵循了说明？

[http://datatables.net/examples/api/select_single_row.html](http://datatables.net/examples/api/select_single_row.html)

我检查了。这个给定的例子即使在 IE 6 上也能很好地工作。你能在这里发布你的代码来确定错误隐藏在哪里吗？

或者

这个谷歌代码示例甚至在 IE 6 上也能正常工作。

[jquery-datatables-editable.googlecode.com/svn/trunk/index.html](http://jquery-datatables-editable.googlecode.com/svn/trunk/index.html)

但这还有更多功能，例如

**内联单元格编辑**

**选择/删除表格中的行**

**添加新记录**

尝试比较 borth 代码以获取错误或删除 google 代码中的额外功能

# jquery - 在 Rails 3.2.6 中从开发切换到生产

> ID：11554694
> 
> 赞同：0
> 
> 时间：2012-07-19T05:53:12.683
> 
> 标签：jquery, css, ruby-on-rails, ruby-on-rails-3, asset-pipeline

我有使用 Rails 3.2.6 和 Ruby 1.9.3p0 版本的 rails 应用程序。我的资产文件夹中有许多 CSS 和 JS（使用 JQuery）文件和资产管道。一切正常，但我从**开发切换到生产并压缩**到名为 application.css 和 application.js 的单个文件，然后我的大部分**JQuery 代码都不起作用**。我已经尝试了许多现有的解决方案，但没有任何帮助。

请帮助。在此先感谢。

这是我的 application.html.erb

```
<!DOCTYPE html>
<html>
<head>
<title>Tritinum   <%#= controller.action_name %></title>
<%= stylesheet_link_tag    "application", :media => "all" %>
<%= javascript_include_tag "application" %>
<%= javascript_include_tag "http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.17/jquery-     ui.min.js", "jquery.rails.js" %>
<%= stylesheet_link_tag 'http://fonts.googleapis.com/css?family=Droid+Sans:400,700'%>

<%= csrf_meta_tags %>
</head>
<body>
<!-- BEGIN MAIN -->

<section id="main" class="container_16">
<p class="notice"><%#= notice %></p>
   <p class="alert"><%= alert %></p>

    <%= yield %>

 <!-- BEGIN FOOTER -->
      <section class="footer">

        <p>
<span class="left">�Copyright 2012 - All rights reserved.  </span>
   <span class="right">Web Tool v1.0 - Product By<a href="http://www.google.com">Personal.</a></span>
        </p>

        <div class="clear"></div><!-- CLEAR BOTH -->

    </section><!-- end section .footer -->
    <!-- END FOOTER -->

        </section><!-- end section #main -->
     <!-- END MAIN -->

    <!-- BEGIN LOADING OVERLAY -->
    <div id="loading_overlay">
    <div class="loading_message round_bottom">
        <%= image_tag "loading.gif" %>
    </div>
</div>
<!-- END LOADING OVERLAY -->
       </body>
   </html> 
```

应用程序.rb

```
require File.expand_path('../boot', __FILE__)

require 'rails/all'

if defined?(Bundler)
 # If you precompile assets before deploying to production, use this line
 Bundler.require(*Rails.groups(:assets => %w(development test)))
 # If you want your assets lazily compiled in production, use this line
 # Bundler.require(:default, :assets, Rails.env)
  end

module Tritinum
class Application < Rails::Application
# Settings in config/environments/* take precedence over those specified here.
# Application configuration should go into files in config/initializers
# -- all .rb files in that directory are automatically loaded.

# Custom directories with classes and modules you want to be autoloadable.
# config.autoload_paths += %W(#{config.root}/extras)

# Only load the plugins named here, in the order given (default is alphabetical).
# :all can be used as a placeholder for all plugins not explicitly named.
# config.plugins = [ :exception_notification, :ssl_requirement, :all ]

# Activate observers that should always be running.
# config.active_record.observers = :cacher, :garbage_collector, :forum_observer

# Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.
# Run "rake -D time" for a list of tasks for finding time zone names. Default is UTC.
# config.time_zone = 'Central Time (US & Canada)'

# The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.
# config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]
# config.i18n.default_locale = :de

# Configure the default encoding used in templates for Ruby 1.9.
config.encoding = "utf-8"

# Configure sensitive parameters which will be filtered from the log file.
config.filter_parameters += [:password]

# Use SQL instead of Active Record's schema dumper when creating the database.
# This is necessary if your schema can't be completely dumped by the schema dumper,
# like if you have constraints or database-specific column types
# config.active_record.schema_format = :sql

# Enforce whitelist mode for mass assignment.
# This will create an empty whitelist of attributes available for mass-assignment for all models
# in your app. As such, your models will need to explicitly whitelist or blacklist accessible
# parameters by using an attr_accessible or attr_protected declaration.
config.active_record.whitelist_attributes = true

# Enable the asset pipeline
  config.assets.enabled = true
  config.assets.initialize_on_precompile = false
 # config.assets.precompile = ['*.css']
# Version of your assets, change this if you want to expire all your assets
   config.assets.version = '1.0'
 end
 end 
```

生产.rb

```
 Tritinum::Application.configure do
 # Settings specified here will take precedence over those in config/application.rb

 # Code is not reloaded between requests
 config.cache_classes = true

 # C hoose the compressors to use
 config.assets.js_compressor  = :uglifier
   config.assets.css_compressor = :yui
  # Full error reports are disabled and caching is turned on
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true

 # Disable Rails's static asset server (Apache or nginx will already do this)
    config.serve_static_assets = false

   # Compress JavaScripts and CSS
   config.assets.compress = false

   # Don't fallback to assets pipeline if a precompiled asset is missed
    config.assets.compile = true

  # Generate digests for assets URLs
      config.assets.digest = true

  # Defaults to Rails.root.join("public/assets")
  # config.assets.manifest = YOUR_PATH

  # Specifies the header that your server uses for sending files
  # config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
    # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx

      # Force all access to the app over SSL, use Strict-Transport-Security, and use secure    cookies.
    # config.force_ssl = true

      # See everything in the log (default is :info)
      # config.log_level = :debug

       # Prepend all log lines with the following tags
    # config.log_tags = [ :subdomain, :uuid ]

       # Use a different logger for distributed setups
        # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)

        # Use a different cache store in production
           # config.cache_store = :mem_cache_store

          # Enable serving of images, stylesheets, and JavaScripts from an asset server
          # config.action_controller.asset_host = "http://assets.example.com"

       # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
      # config.assets.precompile += %w( search.js )

      # Disable delivery errors, bad email addresses will be ignored
         # config.action_mailer.raise_delivery_errors = false

        # Enable threaded mode
              # config.threadsafe!

       # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
        # the I18n.default_locale when a translation can not be found)
        config.i18n.fallbacks = true

    #  Send deprecation notices to registered listeners
        config.active_support.deprecation = :notify

          # Log the query plan for queries taking more than this (works
           # with SQLite, MySQL, and PostgreSQL)
             # config.active_record.auto_explain_threshold_in_seconds = 0.5
         end 
```

同时，在使用此命令编译后，我正在生产中启动 Rails 服务器

```
 RAILS_ENV=production bundle exec rake assets:precompile 
```

我的大部分 JQuery 代码停止工作。

宝石文件

```
 source 'https://rubygems.org'

 gem 'rails', '3.2.3'
 gem 'haml'

 # Bundle edge Rails instead:
 # gem 'rails', :git => 'git://github.com/rails/rails.git'
gem 'wkhtmltopdf-binary'
gem 'sqlite3'
gem 'devise'
gem 'cancan'
gem 'faker'
gem 'rb-readline'
gem 'paperclip'
gem 'wicked_pdf'
gem "nested_form", :git => 'https://github.com/ryanb/nested_form.git'

 # Gems used only for assets and not required
 # in production environments by default.
 group :assets do
 gem 'sass-rails',   '~> 3.2.3'
 gem 'coffee-rails', '~> 3.2.1'

 # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

   gem 'uglifier', '>= 1.0.3'
    end

 gem 'jquery-rails'

 # To use ActiveModel has_secure_password
    # gem 'bcrypt-ruby', '~> 3.0.0'

      # To use Jbuilder templates for JSON
      # gem 'jbuilder'

     # Use unicorn as the app server
       # gem 'unicorn'

      # Deploy with Capistrano
      # gem 'capistrano'

     # To use debugger
      # gem 'ruby-debug19', :require => 'ruby-debug' 
```

应用程序/资产/javascripts/application.js 文件

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the  bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery_nested_form
//= require jquery
//= require jquery_ujs
//= require_tree .
  function remove_fields(link) {
    $(link).previous("input[type=hidden]").value = "1";
    $(link).up(".fields").hide();
  }
  $(document).ready(function(){
    $("select#finding_category_id").change(function(){
        var id_value_string = $(this).val();
        if (id_value_string == "") {
            // if the id is empty remove all the sub_selection options from being selectable and do not do any ajax
            $("select#finding_finding_template_id option").remove();
            var row = "<option value=\"" + "" + "\">" + "" + "</option>";
            $(row).appendTo("select#finding_finding_template_id");
         }
        else {
            // Send the request and update sub category dropdown
            $.ajax({
                dataType: "json",
                cache: false,
                url: '/finding_templates/for_categoryid/' + id_value_string,
                error: function(XMLHttpRequest, errorTextStatus, error){
                    alert("Failed to submit : "+ errorTextStatus+" ;"+error);
                },
                success: function(data){                    
                    // Clear all options from sub category select
                    $("select#finding_finding_template_id option").remove();
                    //put in a empty default line
                    var row = "<option value=\"" + "Select" + "\">" + "" + "</option>";
                    $(row).appendTo("select#finding_finding_template_id");                        
                    // Fill sub category select
                    $.each(data, function(i, j){
                        row = "<option value=\"" + j.finding_template.id + "\">" +          j.finding_template.name + "</option>";  
                        $(row).appendTo("select#finding_finding_template_id");                    
                    });            
                 }
            });
        };
            });
  }); 
```

请人帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T14:27:37.317

```
config.assets.initialize_on_precompile = false 
```

^ 你的那一行`application.rb`是告诉预编译函数懒惰地预编译。这意味着它将仅在您的主应用程序中预编译资产。如果将此设置为 true，它将能够预编译包含在其他引用的 Gems 中的资产。因此，除非您**在**`jquery`应用程序的资产文件夹中明确包含这些文件，否则它可能会在预编译时丢失 - 因此它不包含在您的.**`application.js`**

 ****笔记**

这一行：`config.assets.compile = true`应该告诉您的应用程序在丢失预编译资产时回退到资产管道 -**理想情况下**，这意味着它会从正常管道中找到 jquery 资产。

但是我的猜测是，从**技术上讲**，它确实 find `application.js`，您的应用程序不知道有丢失的资产，因此它会加载预编译的`application.js`，然后就无法获取`jquery`代码。

**解决方案**

很抱歉解释冗长，但请尝试以下操作 - 在您的`config/application.rb`

```
config.assets.initialize_on_precompile 
```

成为`true`

然后你当然必须重建和重新部署:) 如果这有帮助，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:21:55.523

宝石`jquery-rails`已经有了`jquery-ui.min.js`

你只需要将这些行添加到`assets/javascript/application.js`文件中

`//= require jquery //= require jquery_ujs`

并且只有这一行`application.html.erb`

`<%= javascript_include_tag "application" %>`**

# dynamics-crm - CRM 2011 现有视图筛选条件在运行时更改

> ID：11554698
> 
> 赞同：-2
> 
> 时间：2012-07-19T05:53:30.740
> 
> 标签：dynamics-crm, dynamics-crm-2011, crm, dynamics-crm-4, dynamics-crm-online

我正在尝试更改运行时系统中存在的视图（MSCRM 2011）的过滤条件？我不想添加自定义视图。我想做的只是在运行时更改视图的过滤条件？请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:37:55.177

好吧，如果您想应用临时过滤器，那就是这个：

[http://www.powerobjects.com/blog/2011/01/05/crm-2011-filtering-your-views-without-the-advanced-find/](http://www.powerobjects.com/blog/2011/01/05/crm-2011-filtering-your-views-without-the-advanced-find/)

# installation - 安装相关问题

> ID：11554700
> 
> 赞同：1
> 
> 时间：2012-07-19T05:53:34.563
> 
> 标签：installation, installshield

我对为公司软件创建安装程序包非常陌生。我们使用 InstallShield 作为构建块。

我有以下基本疑问：

1）需要将应用程序数据写入注册表吗？
2）当我们发布更新版本的软件时，一般我们应该自动删除旧版本并安装新版本吗？
3) 在安装的生命周期中需要注意哪些不同的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:28:52.490

1.  应用程序数据由安装程序本身输入注册表，它将用于任何未来的参考。它具有版本、GUID 等，将在升级、卸载等过程中使用。
2.  除非需要，否则不需要删除旧文件。但是，您可以设置选项以卸载以前的版本以进行升级。
3.  您需要检查版本、GUID、升级信息、是否有硬编码值等。

# tfs - Team Foundation Server - 查看用户上次提交中的文件

> ID：11554702
> 
> 赞同：1
> 
> 时间：2012-07-19T05:53:39.493
> 
> 标签：tfs

我想知道如何查看用户**在上次提交中提交的所有文件的列表。**并非他们提交的所有文件都只是最后一批提交的文件。例如，假设我刚刚在 TFS 中提交了 10 个文件，现在我想查看这 10 个文件的列表。

我怎么做？

谢谢，

-R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T08:26:10.880

在 Visual Studio 2010 中，您还可以从该窗口转到文件、源代码控制、变更集并搜索变更集。您可以选择按用户、日期或更改集 ID 对更改集应用过滤器。获取结果，您可以双击以查看作为更改集的一部分显示在新窗口中的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T08:48:21.913

或者您安装[Team Foundation Sidekicks](http://www.attrice.info/cm/tfs/)并查看搁置的 Sidekick 菜单并获取[此屏幕](http://www.attrice.info/images/shelveset1_sk_screen.gif)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T06:03:09.840

好的，我知道了。打开你记得是 Visual Studio 中变更集的一部分的任何单个文件。右键单击该文件，转到源代码管理并单击查看历史记录。选择您提交的版本并右键单击，然后选择查看变更集详细信息。

-R

# c# - 正确的序列化但不正确的反序列化

> ID：11554712
> 
> 赞同：2
> 
> 时间：2012-07-19T05:54:12.057
> 
> 标签：c#, xmlserializer, ixmlserializable

考虑以下代码和类：

```
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Xml.Serialization;

namespace ConsoleApplication1
{

    public class Element1
    {
        [XmlAttribute]
        public int Order { get; set; }
        public string name1 { get; set; }
        public ElementCollcetion collection { get; set; }
    }

    public class Element2
    {
        [XmlAttribute]
        public int Order { get; set; }
        public string name2 { get; set; }
    }

    public class Elements
    {
        public Element1 element1 { get; set; }
        public Element2 element2 { get; set; }
    }

    public interface IFoo
    {
        string FooName { get; set; }
    }

    public class Foo1 : IFoo
    {
        public string FooName { get; set; }
        public int deff1 { get; set; }
    }

    public class Foo2 : IFoo
    {
        public string FooName { get; set; }
        public bool deff2 { get; set; }
    }

    public class ElementCollcetion : List<IFoo>, IXmlSerializable
    {
        public System.Xml.Schema.XmlSchema GetSchema()
        {
            return null;
        }

        public void ReadXml(System.Xml.XmlReader reader)
        {
            XmlSerializer serializer = null;
            bool flag;

            reader.Read();
            while (true)
            {
                flag = false;

                if (string.Compare(reader.Name, typeof(Foo1).Name) == 0)
                {
                    serializer = new XmlSerializer(typeof(Foo1));
                    flag = true;
                }
                else if (string.Compare(reader.Name, typeof(Foo2).Name) == 0)
                {
                    serializer = new XmlSerializer(typeof(Foo2));
                    flag = true;
                }

                if (flag)
                    this.Add((IFoo)serializer.Deserialize(reader));
                else
                    break;
            }
        }

        public void WriteXml(System.Xml.XmlWriter writer)
        {
            foreach (IFoo foo in this.AsEnumerable())
            {
                XmlSerializer serializer = new XmlSerializer(foo.GetType());
                serializer.Serialize(writer, foo);
            }
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Elements elements = new Elements()
            {
                element1 = new Element1
                {
                    name1 = "Name1",
                    Order = 1,
                    collection = new ElementCollcetion(){ 
                        new Foo1{deff1=10,FooName="FooName1"},
                        new Foo2{deff2=true,FooName="FooName2"}
                    },
                },

                element2 = new Element2
                {
                    name2 = "Name2",
                    Order = 2
                }
            };

            XmlSerializer serializer = new XmlSerializer(typeof(Elements));
            TextWriter textWriter = new StreamWriter(@"d:\ser.xml");
            serializer.Serialize(textWriter, elements);
            textWriter.Close();

            TextReader textReader = new StreamReader(@"d:\ser.xml");
            Elements element = (Elements)serializer.Deserialize(textReader);
            textReader.Close();
        }
    }
} 
```

当我运行它时，一个 xml 将生成到 ser.xml 中，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Elements xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <element1 Order="1">
    <name1>Name1</name1>
    <collection>
       <Foo1>
        <FooName>FooName1</FooName>
        <deff1>10</deff1>
      </Foo1>
      <Foo2>
        <FooName>FooName2</FooName>
        <deff2>true</deff2>
      </Foo2>
    </collection>
  </element1>
  <element2 Order="2">
    <name2>Name2</name2>
  </element2>
</Elements> 
```

但它无法正确反序列化文件，除非我像这样重新排序 xml 中的元素：

```
<?xml version="1.0" encoding="utf-8"?>
<Elements xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <element2 Order="2">
    <name2>Name2</name2>
  </element2>
  <element1 Order="1">
    <name1>Name1</name1>
    <collection>
      <Foo1>
        <FooName>FooName1</FooName>
        <deff1>10</deff1>
      </Foo1>
      <Foo2>
        <FooName>FooName2</FooName>
        <deff2>true</deff2>
      </Foo2>
    </collection>
  </element1>
</Elements> 
```

请注意，`serializer.UnknownAttribute`并且`serializer.UnknownElement`不会在两次执行期间引发。
问题是什么？我该如何解决？

--------------- EDIT------------
我知道问题正在`IXmlSerializable.ReadXml()`实施中。但什么样的问题，我应该如何治愈它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T06:34:08.497

基本上，您没有正确地将阅读器推进到子树的末尾。添加`reader.Read();`到`ReadXml`修复它的末尾，但有点难看；`ReadSubtree()`可能更安全。

坦率地说，`IXmlSerializable` ***正确而稳健地***实施是很困难的。我总是反对它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:23:23.913

尽管我必须查看您的 IXmlSerializable 实现，但我敢打赌，您的 ReadXml 实现具有相反的处理顺序……例如：它首先查找 element2 而不是 element1。如果不是这样，请发布您的 IXmlSerializable 实现。

**编辑**

正如 Marc 指出的那样，您需要添加另一个读取。问题是，XmlReader 通过调用 reader.Read() 处理**集合**条目标签，但在您的方法结束时，您没有处理结束标签**/collection**，因此另一个 reader.Read() 调用。这基本上阻止了反序列化的正确进行。

通常，ReadXml 实现的正确模式是从以下开始：

```
 bool isEmpty = reader.IsEmptyElement;

 reader.ReadStartElement(); //Start reading the element
 if (isEmpty) //Return on empty element
 {
     return;
 } 
```

并完成：

```
reader.ReadEndElement(); 
```

这也是您使用该模式的实现：

```
public void ReadXml(System.Xml.XmlReader reader)
{
    XmlSerializer serializer = null;
    bool flag;

    bool isEmpty = reader.IsEmptyElement;

    reader.ReadStartElement();
    if (isEmpty)
    {
        return;
    }

    while (true)
    {
       flag = false;

       if (string.Compare(reader.Name, typeof(Foo1).Name) == 0)
       {
          serializer = new XmlSerializer(typeof(Foo1));
          flag = true;
       }
       else if (string.Compare(reader.Name, typeof(Foo2).Name) == 0)
       {
          serializer = new XmlSerializer(typeof(Foo2));
          flag = true;
       }

       if (flag)
          this.Add((IFoo)serializer.Deserialize(reader));
       else
          break;
    }

    reader.ReadEndElement();
} 
```

# c# - InputBindings 的 WinRT 等价物是什么？

> ID：11554715
> 
> 赞同：7
> 
> 时间：2012-07-19T05:54:42.397
> 
> 标签：c#, wpf, keyboard-shortcuts, windows-runtime

WPF 允许我轻松地将窗口级别的键盘快捷键绑定到使用 InputBindings 属性的方法。WinRT 中的等价物是什么？将键盘快捷键绑定到 WinRT 中的方法的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T00:27:42.060

[此处](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868161%28v=win.10%29.aspx#keyboard_shortcuts)描述了键盘快捷键。我认为您想要[访问键](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.automation.automationproperties.accesskey.aspx)或[加速键](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.automation.automationproperties.acceleratorkey.aspx)。

> 访问键是应用程序中一段 UI 的快捷方式。访问键由 Alt 键和一个字母键组成。
> 
> 加速键是应用命令的快捷方式。你的应用可能有也可能没有与命令完全对应的 UI。加速键由 Ctrl 键和一个字母键组成。
> 
> 以下示例演示了媒体播放、暂停和停止按钮的快捷键的可访问实现：

```
<MediaElement x:Name="Movie" Source="sample.wmv"
  AutoPlay="False" Width="320" Height="240"/>

<StackPanel Orientation="Horizontal" HorizontalAlignment="Center">

  <Button x:Name="Play" Margin="1,2"
    ToolTipService.ToolTip="shortcut key: Ctrl+P"
    AutomationProperties.AccessKey="Control P">
    <TextBlock><Underline>P</Underline>lay</TextBlock>
  </Button>

  <Button x:Name="Pause" Margin="1,2"
    ToolTipService.ToolTip="shortcut key: Ctrl+A"
    AutomationProperties.AccessKey="Control A">
    <TextBlock>P<Underline>a</Underline>use</TextBlock>
  </Button>

  <Button x:Name="Stop" Margin="1,2"
    ToolTipService.ToolTip="shortcut key: Ctrl+S"
    AutomationProperties.AccessKey="Control S">
    <TextBlock><Underline>S</Underline>top</TextBlock>
  </Button>

</StackPanel>

<object AutomationProperties.AcceleratorKey="ALT+F" /> 
```

> [重要提示：设置 AutomationProperties.AcceleratorKey 或 AutomationProperties.AccessKey 不会启用键盘功能。它只向 UI 自动化框架报告应该使用哪些键，以便这些信息可以通过辅助技术传递给用户。密钥处理的实现仍然需要在代码中完成，而不是 XAML。您仍然需要在相关控件上附加 KeyDown 或 KeyUp 事件的处理程序，以便在您的应用程序中实际实现键盘快捷键行为。此外，访问键的下划线文本装饰不会自动提供。如果您希望在 UI 中显示带下划线的文本，则必须将助记符中特定键的文本显式下划线作为内联下划线格式。](http://msdn.microsoft.com/en-us/library/windows/apps/hh868161.aspx)

有关代码方面的实现细节，请参阅@Magiel 的答案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-15T17:23:43.207

重要的！！设置 AutomationProperties.AcceleratorKey 或 AutomationProperties.AccessKey 不会启用键盘功能。它只向 UI 自动化框架报告应该使用哪些键，以便这些信息可以通过辅助技术传递给用户。密钥处理的实现仍然需要在代码中完成，而不是 XAML。

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    // Set the input focus to ensure that keyboard events are raised.
    this.Loaded += delegate { this.Focus(FocusState.Programmatic); };
}

private void Grid_KeyUp(object sender, KeyRoutedEventArgs e)
{
    if (e.Key == VirtualKey.Control) isCtrlKeyPressed = false;
}

private void Grid_KeyDown(object sender, KeyRoutedEventArgs e)
{
    if (e.Key == VirtualKey.Control) isCtrlKeyPressed = true;
    else if (isCtrlKeyPressed)
    {
        switch (e.Key)
        {
            case VirtualKey.P: DemoMovie.Play(); break;
            case VirtualKey.A: DemoMovie.Pause(); break;
            case VirtualKey.S: DemoMovie.Stop(); break;
        }
    }
} 
```

# bash - 为什么在 bash 块中输出到 fifo 而在重定向时不输出

> ID：11554716
> 
> 赞同：2
> 
> 时间：2012-07-19T05:54:43.290
> 
> 标签：bash, shell

> mkfifo fifo
> echo 1 >fifo 在最后一个命令上阻塞。

我在[gnu libc中找到了对此的解释](http://www.gnu.org/software/libc/manual/html_node/FIFO-Special-Files.html#FIFO-Special-Files)

> 但是，它必须同时在两端打开，然后才能继续对其进行任何输入或输出操作。打开一个 FIFO 进行读取通常会阻塞，直到某个其他进程打开同一个 FIFO 进行写入，反之亦然。

但

```
>mkfifo fifo  
>exec 5<>fifo  
>echo 1 >&5 
```

不会阻塞并且运行良好。再次，AFAIK shell 使用 dup2 进行重定向，但这有什么不同呢？

实际上，当我提出问题时，我找到了答案。我会在下面贴出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:54:43.290

答案很简短。

从我的 linux 发行版`man 7 fifo`

> 在 Linux 下，打开一个 FIFO 进行读写将在阻塞和非阻塞模式下都成功。POSIX 未定义此行为。

所以这是由于`<>`重定向。

# php - Magento 1.7：top.phtml 文件在哪里？

> ID：11554720
> 
> 赞同：0
> 
> 时间：2012-07-19T05:54:55.760
> 
> 标签：php, magento

当我搜索它时，我在这个路径上找到了这个文件：

```
app/design/frontend/BASE/default/template/catalog/navigation/top.phtml 
```

但是，当我对其进行任何寻求更改时，它不起作用或没有显示任何更改。我想我在错误的文件中工作。我真正想做的是在前端的菜单中添加缩略图。

我是 magento 的新手。请在这方面帮助我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T07:24:58.670

了解任何模板文件路径的最佳方法是：使用**模板路径提示**

转到**管理->系统->配置->开发人员**

然后从 左侧的**当前配置范围下拉菜单中选择****主网站**选项 。然后启用**模板路径提示**。

 ****导航到前端刷新，您可以看到各种块的路径。

为了更好地理解模板路径提示，请尝试[此视频教程](http://www.google.co.in/url?sa=t&rct=j&q=template%20path%20hint%20tutorial&source=web&cd=3&ved=0CFUQtwIwAg&url=http://www.youtube.com/watch?v=d5siD-7TM4o&ei=c7UHUKCWApGGrAeO64DpAg&usg=AFQjCNEnJPhv187uvX7tSDkM8tap7003Pg&cad=rja)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T08:00:58.393

实际上`top.phtml`文件在`app/design/frontend/base/default/template/catalog/navigation/top.phtml`你提到的

转到`admin->system->configuration`，现在在左侧面板上单击设计，然后在包区域中查看当前包名称。这是您正在使用的当前**包。**说这是...... **“默认”**

现在在主题区域中，检查模板字段。这是您正在使用的上述包的**模板。**说这是**“现代”** 如果该字段为空白，则表示您使用的是默认模板。

现在你需要编辑的 top.phtml 文件在或者应该复制到**app/design/frontend/default/modern/........** 粘贴到那里并编辑它.....复制的原因编辑是保留原始基础包的备份。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T06:46:20.940

你可能想看看天气你有不同的主题活动`app/design/frontend/<themename>/<themevariation>/template/catalog/navigation/top.phtml`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T20:16:38.623

见[http://www.newsjournal3.com/12-magento/13-how-to-override-magento-top-navigation](http://www.newsjournal3.com/12-magento/13-how-to-override-magento-top-navigation)

您必须将 topmenu.phtml 放在 html 目录中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T06:22:14.683

尝试在后端刷新 magento 缓存：“配置 => 缓存管理”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T06:41:10.240

您可能想检查是否在 Magento 的主题设置中配置了“基础”。也许它在另一个包中被覆盖。****

# jquery-mobile - 如何将 themeroller 自定义主题添加到我的网站？

> ID：11554725
> 
> 赞同：1
> 
> 时间：2012-07-19T05:55:29.823
> 
> 标签：jquery-mobile, themeroller

我使用 Jquerymobile.com themeroller 创建了一个自定义主题。我使用默认主题值（如 .js 和 .css 文件夹）创建的移动网站。现在我想将我网站的主题更改为我的新自定义主题，使用 themeroller 创建。如何将这些文件包含到我的编码中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T22:50:50.837

当您下载您创建的 themerolloer 时，会有一个示例 index.html 文件使用随附的主题。查看它以查看页面中需要包含哪些文件，但更重要的是，查看该代码以查看正在使用哪些 CSS 类 - 如果您不使用 Themeroller 类，则将它们包含在您的页面中没有意义

[您可以在入门](https://learn.jquery.com/jquery-ui/getting-started/)页面上查看所有步骤和完整教程

# webserver - 从 Web 服务连接本地主机

> ID：11554727
> 
> 赞同：0
> 
> 时间：2012-07-19T05:55:50.697
> 
> 标签：webserver

我有一台笔记本电脑，带有 msSql 服务器 2005，它连接到我的 Wifi 路由器，它可以上网。所以我的笔记本电脑连接到互联网。但我需要从 Internet 访问我的 msSql Sever 以连接我使用 ASP.Net 制作的网页。

请帮助我...并请为此提供解决方案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:01:40.730

您需要您的 IP 地址进行连接，然后在您的路由器中打开 SQL 端口。（默认为`3306`）当您连接到服务器时，只需使用您当前的 IP 地址。也许你想要一个静态 ip 或类似[http://dyndns.org的东西](http://dyndns.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:02:03.437

您想编写 Web 服务并将该服务托管在 sql 机器中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T06:12:22.913

首先在您的笔记本电脑上设置一个静态 IP 地址，然后您需要在路由器中设置端口转发。根据您的路由器制造商和型号，此过程略有不同。

正确设置后，确保 SQL Server 端口在您的笔记本电脑防火墙上打开。

通过使用动态 DNS，您可以使用静态名称指向您可能更改的 IP 地址，这样您就不必在连接字符串中不断更改它。

# parsing - 使用 NSIS 拼接功能会导致崩溃

> ID：11554738
> 
> 赞同：1
> 
> 时间：2012-07-19T05:56:25.173
> 
> 标签：parsing, installation, nsis

我在我的 NSIS 安装程序中使用了[Splice功能。](http://nsis.sourceforge.net/Splice%3a_Cut_string_@_index_from_array_type_string)

**我的问题：**当我执行下面的代码时，Splice 函数会导致安装程序进入无限循环或崩溃（它没有响应）。怎么了？

我使用 Splice 错了吗？如果我不能使用 splice 按照我想要的方式拆分字符串，**是否还有另一个函数可以用来拆分字符串？**

```
Section "Dummy"

    Push "user_lib_4d C:\12d\9.00\DTEI_Customisation\SURVEY_12d9\DTEI_Survey_User_Lib"  # "user_lib_4d C:/blah"
    Push "0"
    Push "user_lib_4d"
    Call Splice   # causes an infinite loop/crash

SectionEnd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T18:11:30.110

在使用 Splice 功能时，我不小心遇到了同样的问题。但我只在谷歌上搜索了一下就找到了正确的解决方案。关键是 Splice 不是为此而设计的。该`Push "user_lib_4d"`行实际上需要一个分隔符字符串。解决方案是使用任何用于此目的的实际字符串函数。那里有[很多，](http://nsis.sourceforge.net/Category%3aString_Functions)因此无法在此一并提及。您可以依赖搜索子字符串、删除或替换函数。我使用并取得成功的是[dirtydingus](http://nsis.sourceforge.net/Another_String_Replace_%28and_Slash/BackSlash_Converter%29)的StrRep。

在你的情况下：

“假人”部分

```
Push "user_lib_4d C:\12d\9.00\DTEI_Customisation\SURVEY_12d9\DTEI_Survey_User_Lib"
Push "user_lib_4d"
Push ""
Call StrRep
Pop $R0 ;result

MessageBox mb_ok $R0 
```

部分结束

编辑：对于高级操作，您可以使用[StrStrAdv](http://nsis.sourceforge.net/StrStrAdv)

# iphone - 将唯一条目添加到数组中 - Xcode/Objective-C

> ID：11554740
> 
> 赞同：0
> 
> 时间：2012-07-19T05:56:35.630
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我在文件中有以下文本`.txt`::

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
            <key>aa</key>
            <string>2012-07-19 11:16:00</string>
    </dict>
    <dict>
            <key>bb</key>
            <string>2012-07-19 11:16:02</string>
    </dict>
    <dict>
            <key>cc</key>
            <string>2012-07-19 11:16:05</string>
    </dict>
    <dict>
            <key>dd</key>
            <string>2012-07-19 11:16:07</string>
    </dict>
    <dict>
            <key>aa</key>
            <string>2012-07-19 11:16:10</string>
    </dict>
    <dict>
            <key>bb</key>
            <string>2012-07-19 11:16:13</string>
    </dict> 
```

我使用以下代码行将这些内容放入一个数组::

```
self.kkkk = [NSMutableArray array];

NSString *Dir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
NSString *filePath = [Dir stringByAppendingPathComponent:@"abcd.txt"];

NSArray *array = [NSArray arrayWithContentsOfFile:filePath ];
kkkk = [[NSMutableArray alloc] init];
for (NSDictionary *dict in array) {
    [kkkk addObjectsFromArray:[dict allKeys]];

} 
```

在添加内容时，我希望只输入 aa、bb、cc 和 dd 的唯一值。为此，我想将他们的一个条目连同他们的最新时间戳一起放入数组 kkkk 中。

我怎样才能做到这一点 ？？特别是两个时间戳的比较..有人可以帮我吗？谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:23:18.277

首先从字典中获取所有对象，然后检查以下内容

```
for (NSDictionary *dict in array) 
{
    if(![kkkk containsObject:objectFromDictionary])
    {
       [kkkk addObjectsFromArray:[dict allKeys]];
    }
} 
```

这可能有效，但您应该一个一个地添加对象，而不是添加所有键。

# apache - 使用 IP 生成子域会破坏 url？

> ID：11554741
> 
> 赞同：0
> 
> 时间：2012-07-19T05:56:38.757
> 
> 标签：apache, .htaccess, subdomain, configuration-files

直到今天，在我的网站上，这 2 个 URL 给了我相同的结果：

> www.mysite.com/test.jpg
> 
> 10.10.10.10/test.jpg

（其中 10.10.10.10 是我的静态 IP 地址）

今天我使用 cPanel 生成了一个新的子域（**博客**.mysite.com），从那时起

> 10.10.10.10/test.jpg

解决为

> www.mysite.com/blog/test.jpg **_** _

（不存在）

我的 ISP 技术支持人员表示，默认情况下，任何新的子域都位于 apache conf 文件的顶部，因此通过创建一个新的子域，它会在通过 IP 调用 URL 时插入。

恢复原始功能的最佳方法是什么？我无法编辑服务器 conf 文件，但可以编辑我自己的 htaccess。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:09:28.920

您可以使用 mod_rewrite。尝试将其放在文档根目录中的 .htaccess 文件中（对于 blog.mysite.com 站点）

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^10.10.10.10$
RewriteRule ^(.*)$ http://www.mysite.com/$1 [R=301,L] 
```

如果您真的不想重定向浏览器，或者将`R=301`标志替换为。`P`

# android - 片段后不返回对话框片段

> ID：11554745
> 
> 赞同：0
> 
> 时间：2012-07-19T05:57:11.547
> 
> 标签：android, fragment

我有片段1。在他们身上，我按下按钮并启动 DialogFramgent。在 DialogFragment 上，我按下按钮并启动 Fragment2。当我按下后，我返回 Fragment1，但不是 DialogFragmnet

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:37:03.950

您可以将片段添加到后台堆栈。调用 addToBackStack() 应该可以解决问题。直接来自文档：“这个后退堆栈由活动管理，并允许用户通过按下后退按钮返回到之前的片段状态”。详见：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

碧玉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-19T18:51:23.370

在 Activity 中使用 Fragment 的一个很棒的特性是能够添加、删除、替换和执行其他操作，以响应用户交互。您提交给活动的每一组更改都称为一个事务，您可以使用 FragmentTransaction 中的 API 执行一个事务。您还可以将每个事务保存到由 Activity 管理的回退堆栈中，从而允许用户在片段更改中向后导航（类似于在 Activity 中向后导航）。

您可以像这样从 FragmentManager 获取 FragmentTransaction 的实例：

```
FragmentManager fragmentManager = getFragmentManager();
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction(); 
```

每个事务都是您要同时执行的一组更改。您可以使用 add()、remove() 和 replace() 等方法设置要对给定事务执行的所有更改。然后，要将事务应用到活动，您必须调用 commit()。

但是，在调用 commit() 之前，您可能需要调用 addToBackStack()，以便将事务添加到片段事务的回栈。这个后退堆栈由活动管理，并允许用户通过按下后退按钮返回到之前的片段状态。

# join - OpenJPA 如何在集合中使用 WHERE 条件与连接提取？

> ID：11554746
> 
> 赞同：0
> 
> 时间：2012-07-19T05:57:11.353
> 
> 标签：join, jpql, openjpa

我在 WebSphere Application Server 8 上使用 OpenJPA 2.1。我有一个双向 oneToMay 关系，如下所示：

```
@Entity(name = "table1")
public class Table1  {
    @Id
    @Column(columnDefinition = "DATE")
    private Date date;
    @OneToMany(mappedBy = "date", targetEntity = Table2.class, fetch = FetchType.LAZY, cascade = CascadeType.PERSIST)
    private List<Table2> table2List;
}

@Entity(name = "table2")
public class Tabl2{
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private long id;

    @ManyToOne(cascade = CascadeType.ALL)
    @JoinColumn(name = "fk_date", nullable = false)
    private Table1 table1;

    @Column(name = "value", nullable = false, columnDefinition = "INT")
    private int value;

} 
```

现在我想在 table2 上选择整个 table1 实体，如下所示：

```
TypedQuery<WeekBean> q = em.createQuery(
    "SELECT t1 from table1 t1 JOIN FETCH t1.table2List t2 WHERE t2.value = :value",
    t1.class); 
```

但这不起作用，因为我得到一个 ArgumentException：

```
Exception in thread "main" <openjpa-2.1.1-SNAPSHOT-r422266:1141200 nonfatal user error> org.apache.openjpa.persistence.ArgumentException: " Encountered "f" at character 50, but expected [",", ".", "GROUP", "HAVING", "INNER", "JOIN", "LEFT", "ORDER", "WHERE", <EOF>]." 
    at org.apache.openjpa.kernel.jpql.JPQLParser.parse(JPQLParser.java:51)
    at org.apache.openjpa.kernel.ExpressionStoreQuery.newCompilation(ExpressionStoreQuery.java:154)
    at org.apache.openjpa.datacache.QueryCacheStoreQuery.newCompilation(QueryCacheStoreQuery.java:262)
    at org.apache.openjpa.kernel.QueryImpl.newCompilation(QueryImpl.java:672)
    at org.apache.openjpa.kernel.QueryImpl.compilationFromCache(QueryImpl.java:654)
    at org.apache.openjpa.kernel.QueryImpl.compileForCompilation(QueryImpl.java:620)
    at org.apache.openjpa.kernel.QueryImpl.compileForExecutor(QueryImpl.java:682)
    at org.apache.openjpa.kernel.QueryImpl.compile(QueryImpl.java:589)
    at org.apache.openjpa.persistence.EntityManagerImpl.createQuery(EntityManagerImpl.java:996)
    at com.ibm.ws.persistence.EntityManagerImpl.createQuery(EntityManagerImpl.java:107)
    at com.ibm.ws.persistence.EntityManagerImpl.createQuery(EntityManagerImpl.java:86)
    at com.ibm.ws.persistence.EntityManagerImpl.createQuery(EntityManagerImpl.java:34)
    at org.apache.openjpa.persistence.EntityManagerImpl.createQuery(EntityManagerImpl.java:974) 
```

如何在集合上使用带有条件的 JOIN FETCH？

最好的问候投票

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T07:17:55.493

根据 JPA 2.0 规范，不支持这样的构造，并且看起来 OpenJPA 也不提供作为供应商扩展的功能：

> FETCH JOIN 子句右侧引用的关联必须是属于作为查询结果返回的实体的关联。不允许为 FETCH JOIN 子句右侧引用的实体指定标识变量，因此对隐式获取的实体的引用不能出现在查询的其他地方。

在您的情况下，这意味着您无法定义`t2`，因此您无法在 WHERE 子句中使用它。

# iphone - 从 URL 下载文件并将其放在 iPhone 的资源文件夹中

> ID：11554750
> 
> 赞同：1
> 
> 时间：2012-07-19T05:57:48.973
> 
> 标签：iphone, ipad, nsurl, resourcebundle, nsbundle

我是 iPhone 开发者的新手，

如何从资源文件夹下载 epub 文件`url`并将其存储在资源文件夹中？

这是我的代码片段，

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    fileData = [NSMutableData data];
    NSString *file = [NSString stringWithFormat:@"http://www.google.co.in/url?sa=t&rct=j&q=sample%20epub%20filetype%3Aepub&source=web&cd=2&ved=0CFMQFjAB&url=http%3A%2F%2Fdl.dropbox.com%2Fu%2F1177388%2Fflagship_july_4_2010_flying_island_press.epub&ei=i5gHUIOWJI3RrQeGro3YAg&usg=AFQjCNFPKsV-tieF4vKv7BXYmS-QEvd7Uw"];
    NSURL *fileURL = [NSURL URLWithString:file];

    NSURLRequest *req = [NSURLRequest requestWithURL:fileURL];
    NSURLConnection *conn = [NSURLConnection connectionWithRequest:req delegate:self];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [self.fileData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [self.fileData appendData:data];        
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSArray *dirArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,    NSUserDomainMask, YES);
    NSLog(@"%@", [dirArray objectAtIndex:0]);

    NSString *path = [NSString stringWithFormat:@"%@", [dirArray objectAtIndex:0]];

    if ([self.fileData writeToFile:path options:NSAtomicWrite error:nil] == NO) {
        NSLog(@"writeToFile error");
    }
    else {
        NSLog(@"Written!");
    }
} 
```

我无法在我的`NSLog`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:42:56.400

写入时创建文件路径也存在问题。您没有在路径中指定任何文件名。在下面的行中，我使用文件名作为“filename.txt”。给一些正确的名字，它会写。

```
NSString *path = [NSString stringWithFormat:@"%@/filename.txt", [dirArray objectAtIndex:0]]; 
```

创建 URL 也有问题。像这样做，

```
NSString *file = [NSString stringWithString:@"http://www.google.co.in/url?sa=t&rct=j&q=sample%20epub%20filetype%3Aepub&source=web&cd=2&ved=0CFMQFjAB&url=http%3A%2F%2Fdl.dropbox.com%2Fu%2F1177388%2Fflagship_july_4_2010_flying_island_press.epub&ei=i5gHUIOWJI3RrQeGro3YAg&usg=AFQjCNFPKsV-tieF4vKv7BXYmS-QEvd7Uw"];
     NSURL *fileURL = [NSURL URLWithString:file]; 
```

您已使用以下行创建了文件数据。

```
fileData = [NSMutableData data]; 
```

像下面这样，

```
fileData = [[NSMutableData alloc]init]; 
```

或者

```
self.fileData = [NSMutableData data]; 
```

在这里，iOS 在调用连接委托之前释放文件数据。

# java - 数组找到第二高的值

> ID：11554752
> 
> 赞同：6
> 
> 时间：2012-07-19T05:58:11.243
> 
> 标签：java

我有一个包含 10 个整数值的数组。现在我想找出第二高的数字。我不应该使用任何 java API。这个问题是一位面试官问我的。他想要逻辑。他的要求是，我不应该遍历整个元素。有没有什么方法可以不用遍历就可以达到结果？遍历意味着遍历数组中的所有元素。想了很久，最后还是放弃了。如果有人能解释一下，那就太好了。我还问了关于排序的问题。他不希望对数组进行排序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T06:00:24.500

不，这完全不可能。如果你不看所有的数据，你*不可能*知道第二高的值。

当然，您不必对所有数据进行*排序*，这可能是您的面试官的意思——但您确实需要至少查看每个元素一次。每个元素都有可能改变结果，因此需要检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:34:50.567

如果您不至少查看每个元素一次，您将无法知道答案。但是，如果这不是您关心的问题，您可以使用二叉搜索树：

在计算机科学中，二叉搜索树 (BST)，有时也称为有序或排序二叉树，是一种基于节点的二叉树数据结构，具有以下特性：[1]

节点的左子树仅包含键小于节点键的节点。节点的右子树仅包含键大于或等于节点键的节点。左右子树也必须是二叉搜索树。
来源：[http ://en.wikipedia.org/wiki/Binary_search_tree](http://en.wikipedia.org/wiki/Binary_search_tree)

* * *

你将如何找到第二大元素？

那么从BST是如何形成的，你知道最大的元素是最右边的元素（从根节点开始，取正确的孩子，直到你无处可去）。

* * *

现在，如何识别第二大？
好吧，这可能不是最有效的方法，但让我们在以下情况下对其进行分解：

1.  最大节点是树根并且没有子节点 - 没有第二大元素，因为树中只有一个节点

2.  最大节点是树根（没有右子节点） - 第二大元素是左子树中的最大元素

3.  最大元素不是树根，但不是叶子（有左孩子） - 第二大元素是他的左孩子

4.  最大的元素不是树根，而是叶子（没有孩子）-第二大元素是他的父母

我相信你现在可以弄清楚模式和一个简单的算法：D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T21:40:00.367

我知道这已经得到回答，但我在想这样的事情。

```
 double maxVal = array[0];
    for (int i=1; i < array.length; i++) {
        if (array[i] > maxVal) {
            maxVal = array[i];
        }
    } 
```

从技术上讲，我不是遍历整个数组，而是遍历长度的 n-1，因为我将第一个值分配给最大值。我相信还有其他方法，但这似乎是关于面试官可能想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-08T07:38:40.230

逻辑是如此简单，我已经在一个 for 循环中实现了这一点。

我给你我的程序，如果你想要算法，我也可以给你。

公共静态无效主要（字符串[]参数）{

```
 int[] arr={0,12,74,56,2,63,45};
    int f1=1,f2=0,temp=0;
    int num=0;

    for(int i=0;i<arr.length;i++){
        num=arr[i];
        if(f1<num)
        {
            temp=f1;
            f1=num;
            num=temp;
        }
        if(f2<num)
        {
            temp=f2;
            f2=num;
            num=temp;
        }
    }
    System.out.println("First Highest "+f1+" Second Highest "+f2+" Third "+num);

} 
```

# linux-kernel - 在 ubuntu 和 fedora 或任何基于 Linux 的操作系统中使用的内核是否相同？

> ID：11554755
> 
> 赞同：0
> 
> 时间：2012-07-19T05:58:23.597
> 
> 标签：linux-kernel

在各种基于 Linux 的操作系统中使用的内核是相同的还是不同的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:55:53.167

它们都基于 kernel.org 上的版本，但它们通常会添加自己的补丁和反向移植修复以及硬件支持。

在大多数情况下，这些差异并不值得担心。

# mongodb - 如何在 MongoDB 中将集合从一个数据库复制到另一个数据库

> ID：11554762
> 
> 赞同：267
> 
> 时间：2012-07-19T05:58:51.633
> 
> 标签：mongodb, mongo-collection

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：351
> 
> 时间：2012-07-19T06:09:43.353

最好的方法是做一个`mongodump`then `mongorestore`。您可以通过以下方式选择集合：

```
mongodump -d some_database -c some_collection 
```

[可选地，压缩转储 ( `zip some_database.zip some_database/* -r`) 并将`scp`其压缩到其他地方]

然后恢复它：

```
mongorestore -d some_other_db -c some_or_other_collection dump/some_collection.bson 
```

中的现有数据`some_or_other_collection`将被保留。这样，您就可以将集合从一个数据库“附加”到另一个数据库。

在版本 2.4.3 之前，您还需要在复制数据后重新添加索引。从 2.4.3 开始，此过程是自动的，您可以使用`--noIndexRestore`.

* * *

## 回答 #2

> 赞同：250
> 
> 时间：2012-07-19T06:13:49.917

目前 MongoDB 中没有可以执行此操作的命令。请注意[带有相关功能请求的 JIRA 票证](https://jira.mongodb.org/browse/SERVER-732)。

您可以执行以下操作：

```
db.<collection_name>.find().forEach(function(d){ db.getSiblingDB('<new_database>')['<collection_name>'].insert(d); }); 
```

请注意，这样，两个数据库需要共享同一个 mongod 才能工作。

除此之外，您可以对一个数据库中的集合进行 mongodump，然后将集合 mongorestore 到另一个数据库。

* * *

## 回答 #3

> 赞同：117
> 
> 时间：2013-04-29T11:51:14.303

实际上，有一个命令可以**将**集合从一个数据库移动到另一个数据库。它只是不称为“移动”或“复制”。

要复制一个集合，您可以在同一个数据库上克隆它，然后移动克隆的集合。

克隆：

```
> use db1
switched to db db1

> db.source_collection.find().forEach(
      function(x){
          db.collection_copy.insert(x)
      }
  ); 
```

移动：

```
> use admin
switched to db admin

> db.runCommand(
      {
          renameCollection: 'db1.source_collection',
          to              : 'db2.target_collection'
      }
  ); 
```

其他答案更适合复制集合，但如果您要移动它，这尤其有用。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2012-07-31T01:54:39.780

我会滥用 mongo cli [mongo doc](http://www.mongodb.org/display/DOCS/Overview+-+The+MongoDB+Interactive+Shell "蒙哥文档")中的连接功能。这意味着您可以启动一个或多个连接。如果您想将客户集合从 test 复制到同一服务器中的 test2。首先你启动 mongo shell

```
use test
var db2 = connect('localhost:27017/test2') 
```

正常查找并将前 20 条记录复制到 test2。

```
db.customer.find().limit(20).forEach(function(p) { db2.customer.insert(p); }); 
```

或按某些标准过滤

```
db.customer.find({"active": 1}).forEach(function(p) { db2.customer.insert(p); }); 
```

只需将 localhost 更改为 IP 或主机名即可连接到远程服务器。我使用它将测试数据复制到测试数据库进行测试。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2013-10-16T13:07:25.823

如果在两个远程 mongod 实例之间，请使用

```
{ cloneCollection: "<collection>", from: "<hostname>", query: { <query> }, copyIndexes: <true|false> } 
```

请参阅[http://docs.mongodb.org/manual/reference/command/cloneCollection/](http://docs.mongodb.org/manual/reference/command/cloneCollection/)

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2013-08-20T02:19:26.027

我通常会这样做：

```
use sourcedatabase;
var docs=db.sourcetable.find();
use targetdatabase;
docs.forEach(function(doc) { db.targettable.insert(doc); }); 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2018-08-30T03:32:45.870

对于大型集合，您可以使用[Bulk.insert()](https://docs.mongodb.com/manual/reference/method/Bulk.insert/)

```
var bulk = db.getSiblingDB(dbName)[targetCollectionName].initializeUnorderedBulkOp();
db.getCollection(sourceCollectionName).find().forEach(function (d) {
    bulk.insert(d);
});
bulk.execute(); 
```

这将节省**大量时间**。就我而言，我正在复制包含 1219 个文档的集合：iter vs Bulk (67 secs vs 3 secs)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-09-11T08:14:18.153

您可以使用聚合框架来解决您的问题

```
db.oldCollection.aggregate([{$out : "newCollection"}]) 
```

应该注意的是，oldCollection 中的索引不会复制到 newCollection 中。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2012-07-19T13:12:12.223

我知道这个问题已经得到解答，但是我个人不会回答@JasonMcCays，因为游标流式传输，如果仍在使用该集合，这可能会导致无限游标循环。相反，我会使用快照（）：

[http://www.mongodb.org/display/DOCS/How+to+do+Snapshotted+Queries+in+the+Mongo+Database](http://www.mongodb.org/display/DOCS/How+to+do+Snapshotted+Queries+in+the+Mongo+Database)

@bens 答案也是一个很好的答案，不仅适用于集合的热备份，而且 mongorestore 不需要共享同一个 mongod。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2013-06-25T23:22:11.950

这可能只是一个特例，但是对于具有两个随机字符串字段（长度为 15-20 个字符）的 100k 文档的集合，使用哑 mapreduce 的速度几乎是 find-insert/copyTo 的两倍：

```
db.coll.mapReduce(function() { emit(this._id, this); }, function(k,vs) { return vs[0]; }, { out : "coll2" }) 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2017-05-24T17:11:13.383

使用 pymongo，您需要在同一个 mongod 上拥有两个数据库，我做了以下操作：

* * *

**db** = 原始数据库
**db2** = 要复制到的数据库

```
cursor = db["<collection to copy from>"].find()
for data in cursor:
    db2["<new collection>"].insert(data) 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2020-09-19T06:29:38.290

有不同的方法来做收藏副本。请注意，复制可以发生在同一个数据库、不同的数据库、分片数据库或`mongod`实例中。一些工具可以有效地用于大型集合复制。

**使用 $merge 进行聚合：** 将聚合管道的结果写入指定的集合。请注意，复制可以跨数据库发生，甚至是分片集合。创建一个新集合或替换现有集合。4.2 版中的新功能。例子：`db.test.aggregate([ { $merge: { db: "newdb", coll: "newcoll" }} ])`

**使用 $out 进行聚合：** 将聚合管道的结果写入指定的集合。请注意，复制只能发生在同一个数据库中。创建一个新集合或替换现有集合。例子：`db.test.aggregate([ { $out: "newcoll" } ])`

**mongoexport 和 mongoimport：** 这些是命令行工具。 `mongoexport`生成集合数据的 JSON 或 CSV 导出。导出的输出用作目标集合的源，使用`mongoimport`.

**mongodump 和 mongorestore：** 这些是命令行工具。 `mongodump`实用程序用于创建数据库或集合内容的二进制导出。该`mongorestore`程序将数据从创建的二进制数据库转储加载`mongodump`到目标中。

**db.cloneCollection()：** 将集合从远程`mongod`实例复制到当前`mongod`实例。自 4.2 版起已弃用。

**db.collection.copyTo()：** 将集合中的所有文档复制到新的集合中（在同一数据库中）。自 3.0 版起已弃用。从版本 4.2 开始，MongoDB 这条命令无效。

**注意：**除非说上述命令是从`mongo`shell 运行的。

**参考：** [MongoDB 手册](https://docs.mongodb.com/v4.2/)。

您还可以使用喜欢的编程语言（例如，Java）或环境（例如，NodeJS），使用适当的驱动程序软件编写程序来执行复制 - 这可能涉及使用查找和插入操作或其他方法。这个查找插入也可以从`mongo`shell 中执行。

您还可以使用 MongoDB Compass 等 GUI 程序进行收集复制。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2021-04-13T15:04:13.520

正如其他答案中给出的那样，最快的解决方案应该是`mongodump / mongorestore`. 无需将转储保存到本地磁盘，您可以将转储直接通过管道传输到 mongorestore：

```
mongodump --db=some_database --collection=some_collection --archive=- | mongorestore --nsFrom="some_database.some_collection" --nsTo="some_or_other_database.some_or_other_collection" --archive=- 
```

如果您运行共享集群，则默认情况下不会对新集合进行分片。所有数据最初都写入您的主分片。这可能会导致磁盘空间出现问题，并为您的集群增加额外的负载以进行[平衡](https://docs.mongodb.com/manual/core/sharding-balancer-administration/)。在导入数据之前，最好像这样[预先拆分](https://docs.mongodb.com/manual/reference/glossary/#std-term-pre-splitting)您的集合：

```
sh.shardCollection("some_or_other_database.some_or_other_collection", { <shard_key>: 1 });
db.getSiblingDB("config").getCollection("chunks").aggregate([
   { $match: { ns: "some_database.some_collection"} },
   { $sort: { min: 1 } },
   { $skip: 1 }
], { allowDiskUse: true }).forEach(function (chunk) {
   sh.splitAt("some_or_other_database.some_or_other_collection", chunk.min)
}) 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2018-06-28T05:39:41.537

如果 RAM 不是问题，则使用`insertMany`比`forEach`循环快得多。

```
var db1 = connect('<ip_1>:<port_1>/<db_name_1>')
var db2 = connect('<ip_2>:<port_2>/<db_name_2>')

var _list = db1.getCollection('collection_to_copy_from').find({})
db2.collection_to_copy_to.insertMany(_list.toArray()) 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2013-09-11T09:57:00.663

这不会解决您的问题，但是 mongodb shell 有一种方法可以将集合复制到*同一数据库中的*[`copyTo`](http://docs.mongodb.org/manual/reference/method/db.collection.copyTo/)另一个集合中：

 *```
db.mycoll.copyTo('my_other_collection'); 
```

它还从 BSON 转换为 JSON，因此`mongodump`/`mongorestore`是最好的方法，正如其他人所说的那样。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-12-09T18:33:25.230

您可以随时使用 Robomongo。从 v0.8.3 开始，有一个工具可以通过右键单击集合并选择“将集合复制到数据库”来执行此操作

详情见[http://blog.robomongo.org/whats-new-in-robomongo-0-8-3/](http://blog.robomongo.org/whats-new-in-robomongo-0-8-3/)

此功能[在 0.8.5 中已被删除，](https://github.com/Studio3T/robomongo/issues/807)因为它存在漏洞，因此如果您想试用，则必须使用 0.8.3 或 0.8.4。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-09-28T09:48:53.067

万一有些heroku用户在这里绊倒了，像我一样想将一些数据从临时数据库复制到生产数据库，反之亦然，这就是你如何非常方便地做到这一点（注意我希望那里没有错别字，不能在atm检查它。，我会尽快确认代码的有效性）：

```
to_app="The name of the app you want to migrate data to"
from_app="The name of the app you want to migrate data from"
collection="the collection you want to copy"
mongohq_url=`heroku config:get --app "$to_app" MONGOHQ_URL`
parts=(`echo $mongohq_url | sed "s_mongodb://heroku:__" | sed "s_[@/]_ _g"`)
to_token=${parts[0]}; to_url=${parts[1]}; to_db=${parts[2]}
mongohq_url=`heroku config:get --app "$from_app" MONGOHQ_URL`
parts=(`echo $mongohq_url | sed "s_mongodb://heroku:__" | sed "s_[@/]_ _g"`)
from_token=${parts[0]}; from_url=${parts[1]}; from_db=${parts[2]}
mongodump -h "$from_url" -u heroku -d "$from_db" -p"$from_token" -c "$collection" -o col_dump
mongorestore -h "$prod_url" -u heroku -d "$to_app" -p"$to_token" --dir col_dump/"$col_dump"/$collection".bson -c "$collection" 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-01-27T07:29:20.773

通过单击数据库、集合或特定集合下载链接，使用具有导出和导入工具的“Studio3T for MongoDB”：[https ://studio3t.com/download/](https://studio3t.com/download/)

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-10-29T10:22:01.250

这里有很多正确的答案。我会以管道`mongodump`的`mongorestore`方式购买大型收藏品：

```
mongodump --db fromDB --gzip --archive | mongorestore --drop --gzip --archive --nsFrom "fromDB.collectionName" --nsTo "toDB.collectionName" 
```

虽然如果我想做快速复制，它很慢但它有效：

```
use fromDB 
db.collectionName.find().forEach(function(x){
   db.getSiblingDB('toDB')['collectionName'].insert(x);
});" 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-06-24T18:06:11.560

就我而言，我必须在新集合中使用旧集合中的属性子集。所以我最终在新集合上调用 insert 时选择了这些属性。

```
db.<sourceColl>.find().forEach(function(doc) { 
    db.<newColl>.insert({
        "new_field1":doc.field1,
        "new_field2":doc.field2,
        ....
    })
});` 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-06-04T03:50:40.830

要将集合 (myCollection1) 从一个数据库复制到 MongoDB 中的另一个数据库，

```
**Server1:**
myHost1.com 
myDbUser1
myDbPasword1
myDb1
myCollection1

outputfile:
myfile.json 

**Server2:**
myHost2.com 
myDbUser2
myDbPasword2
myDb2
myCollection2 
```

你可以这样做：

```
mongoexport  --host myHost1.com --db myDb1 -u myDbUser1  -p myDbPasword1 --collection myCollection1   --out  myfile.json 
```

然后：

```
mongoimport  --host myHost2.com --db myDb2 -u myDbUser2  -p myDbPasword2 --collection myCollection2   --file myfile.json 
```

另一种情况，使用 CSV 文件：

```
Server1:
myHost1.com 
myDbUser1
myDbPasword1
myDb1
myCollection1
fields.txt
    fieldName1
    fieldName2

outputfile:
myfile.csv

Server2:
myHost2.com 
myDbUser2
myDbPasword2
myDb2
myCollection2 
```

你可以这样做：

```
mongoexport  --host myHost1.com --db myDb1 -u myDbUser1  -p myDbPasword1 --collection myCollection1   --out  myfile.csv --type=csv 
```

在 csv 文件 (name1.decimal(),name1.string()..) 中添加 clolumn 类型，然后：

```
mongoimport  --host myHost2.com --db myDb2 -u myDbUser2  -p myDbPasword2 --collection myCollection2   --file myfile.csv --type csv --headerline --columnsHaveTypes 
```

* * *

## 回答 #22

> 赞同：-2
> 
> 时间：2014-11-18T16:02:09.213

这可以使用 Mongo 的`db.copyDatabase`方法来完成：

```
db.copyDatabase(fromdb, todb, fromhost, username, password) 
```

参考：[http ://docs.mongodb.org/manual/reference/method/db.copyDatabase/](http://docs.mongodb.org/manual/reference/method/db.copyDatabase/)*

# iphone - 向几个 UIView 添加一个手势识别器

> ID：11554763
> 
> 赞同：2
> 
> 时间：2012-07-19T05:58:55.437
> 
> 标签：iphone, objective-c, ios, ipad

所以我有以下代码：

```
UITapGestureRecognizer *showNewsStoryTapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(showNewsStory:)];
[self.storyImageView_ addGestureRecognizer:showNewsStoryTapGestureRecognizer];
[self.storyTitleLabel_ addGestureRecognizer:showNewsStoryTapGestureRecognizer];
[self.storyImageFailedLabel_ addGestureRecognizer:showNewsStoryTapGestureRecognizer];
[self.storyImageFailedTextView_ addGestureRecognizer:showNewsStoryTapGestureRecognizer];
[showNewsStoryTapGestureRecognizer release]; 
```

似乎这只适用于 one `UIView`，这是添加的最后一个 换句话说`UITapGestureRecognizer`，它的视图是一对一的关系。这个对吗？我该如何解决？我必须`UITapGestureRecog`为每个单独创建一个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T06:06:58.080

是的，只能`UITapRecogniser`一对一`UIView`。您必须为不同的视图采用不同的识别器，尽管它们的操作可能相同。
另请参阅[**此**](https://stackoverflow.com/questions/4747238/can-you-attach-a-uigesturerecognizer-to-multiple-views)链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:02:49.420

尝试这个，

```
UITapGestureRecognizer *showNewsStoryTapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(showNewsStory:)];

[self.storyImageView_ addGestureRecognizer:showNewsStoryTapGestureRecognizer];
[showNewsStoryTapGestureRecognizer release];

showNewsStoryTapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(showNewsStory:)];
[self.storyTitleLabel_ addGestureRecognizer:showNewsStoryTapGestureRecognizer];
[showNewsStoryTapGestureRecognizer release];

showNewsStoryTapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(showNewsStory:)];
[self.storyImageFailedLabel_ addGestureRecognizer:showNewsStoryTapGestureRecognizer];
[showNewsStoryTapGestureRecognizer release];

showNewsStoryTapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(showNewsStory:)];
[self.storyImageFailedTextView_ addGestureRecognizer:showNewsStoryTapGestureRecognizer];
[showNewsStoryTapGestureRecognizer release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T06:07:03.477

我认为您只需将手势识别器添加到包含您的`storyImageView`,`storyTitleLabel`等作为其子视图的视图中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-31T10:36:38.960

您可以`UITapGestureRecognizer`使用此代码将相同添加到多个视图。

步骤是：

1.  首先我们用标签创建三个视图
2.  然后我们创建`NSMutableArray`这个视图并将其添加到数组中
3.  之后添加 UITapGestureRecognizer 以查看
4.  在 UITapGestureRecognizer 方法中，我们检查视图的标签以区分哪个视图被点击。

> 以下是步骤的代码：

```
-(Void)viewDidLoad {
    [super viewDidLoad];

    //First create three View
    UIView  *view1 = [[UIView alloc] initWithFrame: CGRectMake (5 , 171, 152, 152)];    
    view1.tag = 1;    //add tag to view
    view1.backgroundColor = [UIColor whiteColor];
    [self.view addSubview: view1];

    UIView  *  view2 = [[UIView alloc] initWithFrame: CGRectMake ( 163, 171,  152, 152)];   
    view2.tag = 2;   //add tag to view
    view2.backgroundColor = [UIColor whiteColor];
    [self.view addSubview: view2];

    UIView * view3 = [[UIView alloc] initWithFrame: CGRectMake ( 5, 330,  152, 152)];    
    view2.tag = 3;    //add tag to view
    view2.backgroundColor = [UIColor whiteColor];
    [self.view addSubview: view2];

    //Now create mutable array to hold our view
    NSMutableArray * ary=[[NSMutableArray alloc] init];
    [ary addObject:view1];
    [ary addObject:view2];
    [ary addObject:view3];

    //now we add tap gesture to view
    for (UIView *view in ary) {
        UITapGestureRecognizer * answerDoubleTapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(answerDoubleTapped:)];
        answerDoubleTapGesture.numberOfTapsRequired = 2;
        [answer4View addGestureRecognizer:answerDoubleTapGesture];
    }
   }

-(void)answerDoubleTapped:(UITapGestureRecognizer *)recognizer {
    //Check which view is tapped
    switch (recognizer.view.tag) {
        case 1:
        {
            NSLog(@"First View Tapped");
            break;
        }case 2:
        {
            NSLog(@"Second View Tapped");
            break;
        }case 3:
        {
            NSLog(@"Third View Tapped");
            break;
        }case 4:
        {
            NSLog(@"Forth View Tapped");
            break;
        }default:
        {
            break;
        }
    }
} 
```

# asp.net - asp.net 中的 DataRow 显示错误

> ID：11554764
> 
> 赞同：0
> 
> 时间：2012-07-19T05:59:08.340
> 
> 标签：asp.net

我有代码，我将表中的值获取到数据行，然后进一步将其复制到数据表。

```
DataRow[] dr = datatable.Select("Name=Name");
document = dr.CopyToDataTable() 
```

其中 datatable 是 DataTable 的对象，document 也是一个 DataTable，其中存储了“Name”列的值。我在 DropDownList 中进一步绑定。

它工作得很好。但突然我开始收到错误，因为“对象引用未设置为对象的实例。

我能做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:02:02.923

尝试，

```
DataRow[] dr = datatable.Select("Name='Name'");
if(dr.Length!=0)
{
  //
} 
```

# ruby-on-rails - 按下link_to标签生成的按钮时的路由设置

> ID：11554765
> 
> 赞同：0
> 
> 时间：2012-07-19T05:59:16.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view, routes

当我单击下面的链接时，它会转到`/messages/discard.1`而不是`/messages/discard/1`. 知道我在做什么错吗？

我的观点：

```
 <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
              messages_discard_path(@messages.id),
              :method => 'post',
              :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')),
              :class => 'btn btn-danger' %> 
```

我的路线：

```
 match '/messages/discard' => 'messages#discard', :via => :post 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:09:39.937

尝试修改 link_to 方法并使用：

```
messages_discard_path(@messages) 
```

反而。

此外，看起来该路线缺少 :id 。我假设您需要匹配`'/messages/:id/discard' => 'messages#discard', :via => :post`。

# android - AutocompleteTextView 建议列表上升

> ID：11554766
> 
> 赞同：24
> 
> 时间：2012-07-19T05:59:36.143
> 
> 标签：android, autocompletetextview

可能重复 [Android：自动完成文本视图，建议列表显示在文本视图上方？](https://stackoverflow.com/q/6668473/760489)

当建议列表由用户滚动时，我正在完全尝试在键盘上显示重叠的建议列表，但它总是打开的一面。

我在这里

![在此处输入图像描述](../Images/d390917400e7c60f6d39712535f40b63.png)

这是我的清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.sl"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"
            android:name=".SuggestionListActivity" 
            android:windowSoftInputMode="adjustResize|adjustPan|stateHidden">
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

这是我的 main.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" android:padding="10dp">

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" 
        android:layout_margin="10dp"/>

    <TextView android:layout_margin="10dp"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="This is testing for the auto complete textview in this application to display suggestion list overlapping on keyboard." />

    <AutoCompleteTextView android:id="@+id/autocomplete"
            android:layout_width="fill_parent" android:layout_margin="5dp"
            android:layout_height="wrap_content" android:hint="Search"
            android:layout_marginLeft="5dp" android:dropDownHeight="300dp"
            android:inputType="textAutoComplete" android:singleLine="true"
            />

</LinearLayout> 
```

当列表成为焦点时，如何在此代码中通过键盘显示建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T10:55:34.983

我以前遇到过这个问题。对我来说，上面的屏幕空间`AutocompleteTextView`比下面的多（在“普通”设备上测试），所以列表向上打开。我稍微调整了布局，以便下方有更多空间，`AutocompleteTextView`并开始向下打开。这就是为我解决的问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T04:45:07.553

您可以调整布局，以便在下方有更多空间`AutoCompleteTextView`

或者

您可以更改下拉高度`android:dropDownHeight`并设置一些较高的值，当它在 a 内部`scrollView`并且`AutoCompleteTextView`靠近顶部时，这将起作用。

要显示焦点选项列表，请执行以下操作

```
autoCompleteTextView.setOnFocusChangeListener(new OnFocusChangeListener() {
    public void onFocusChange(View v, boolean hasFocus) {
        if(hasFocus) {
            autoCompleteTextView.showDropDown();
        }
    }
}); 
```

当用户专注于`AutoCompleteTextView`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-01-16T08:43:21.597

诀窍是确保所需的下拉高度永远不会大于下面的可用空间。我的方法是创建一个覆盖的子类`showDropDown`：

```
public class DownOnlyAutoCompleteTextView extends AppCompatAutoCompleteTextView {

    private final static int MINIMAL_HEIGHT = 50;

    public DownOnlyAutoCompleteTextView(Context context) {
        super(context);
    }

    public DownOnlyAutoCompleteTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public DownOnlyAutoCompleteTextView(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    @Override
    public void showDropDown() {
        Rect displayFrame = new Rect();
        getWindowVisibleDisplayFrame(displayFrame);

        int[] locationOnScreen = new int[2];
        getLocationOnScreen(locationOnScreen);

        int bottom = locationOnScreen[1] + getHeight();
        int availableHeightBelow = displayFrame.bottom - bottom;
        if (availableHeightBelow >= MINIMAL_HEIGHT) {
            setDropDownHeight(availableHeightBelow);
        }

        super.showDropDown();
    }
} 
```

然后在您的布局中使用它，例如：

```
<your.package.DownOnlyAutoCompleteTextView
    android:id="@+id/auto_complete_text_view"
    android:layout_margin="12dp"
    android:hint="AutoComplete"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    tools:ignore="HardcodedText" /> 
```

调整`MINIMAL_HEIGHT`以适应您的要求 - 如果下面没有空间或空间很小，最好不要强迫这个问题。

**编辑**

[正如评论中提到的](https://stackoverflow.com/questions/49406773/illegalargumentexception-in-autocompletetextview-showdropdown)，在某些 Android 版本中传递负数`setDropDownHeight`会触发异常。只要您定义`MINIMAL_HEIGHT`大于零，那应该不是问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-22T06:46:21.630

这是我的解决方案

```
private final static int DELAY_MS = 500;
autoCompletionTextView.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            autoCompletionTextView.requestFocus();
            new Handler().postDelayed(() -> autoCompletionTextView.showDropDown(), DELAY_MS);
            return false;
        }
    }); 
```

键盘显示后，建议列表会列在您的 AutoCompletionTextView 上方。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-09T12:31:11.820

利用： `android:dropDownHeight="wrap_content" in AutoCompleteTextView`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-19T11:42:25.970

只需在布局文件中添加`android:dropDownHeight="100dp"`标签`AutoCompleteTextView`将是我猜的最佳解决方案！它将简单地控制下拉高度的高度并允许我们滚动！

```
<AutoCompleteTextView
        android:id="@+id/acetxt_assignclient"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"   
        android:dropDownHeight="100dp">
</AutoCompleteTextView> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-14T06:03:29.847

我发现如果您使用的是嵌套滚动视图，则更容易在它认为合适的情况下打开上方或下方的视图，而当您使用常规滚动视图时，它会在下方打开。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-02-20T06:14:14.683

在 Scrollview 中设置包含 Autocompletetextview 的完整布局

这将解决您的问题！

# hadoop - apache Hadoop-2.0.0 aplha 版本在全集群中使用联邦安装

> ID：11554768
> 
> 赞同：0
> 
> 时间：2012-07-19T06:00:02.900
> 
> 标签：hadoop, hadoop-streaming, hadoop-plugins, hadoopy

我已经成功安装了hadoop稳定版。但在安装 hadoop -2.0.0 版本时感到困惑。

我想在两个节点上安装 hadoop-2.0.0-alpha，在两台机器上使用联合。rsi-1、rsi-2 是主机名。

以下属性的值应该是什么来实现联邦。两台机器也都用于数据节点。

fs.defaulFS dfs.federation.nameservices dfs.namenode.name.dir dfs.datanode.data.dir yarn.nodemanager.localizer.address yarn.resourcemanager.resource-tracker.address yarn.resourcemanager.scheduler.address yarn.resourcemanager.address

还有一点，在稳定版本的 hadoop 中，我在安装目录的 conf 文件夹下有配置文件。

但是在 2.0.0-aplha 版本中，有 etc/hadoop 目录，它没有 mapred-site.xml、hadoop-env.sh。我需要将共享文件夹下的conf文件夹复制到hadoop-home目录吗？还是我需要将这些文件从共享文件夹复制到 etc/hadoop 目录中？

问候， 拉什米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T01:06:43.817

You can run hadoop-setup-conf.sh in sbin folder. It instructs you step-by-step to configure. Please remember when it asks you to input the directory path, you should use full link e.g., when it asks for conf directory, you should input /home/user/Documents/hadoop-2.0.0/etc/hadoop After completed, remember to check every configuration file in etc/hadoop. As my experience, I modified JAVA_HOME variable in hadoop-env.sh and some properties in core-site.xml, mapred-site.xml. Regards

# ruby-on-rails - Rails 2 意外“丢失宝石”错误

> ID：11554769
> 
> 赞同：0
> 
> 时间：2012-07-19T06:00:06.227
> 
> 标签：ruby-on-rails

美好的一天，我的 rails 开发设置有一个非常奇怪的问题：RVM，最新的 rails 2，ruby 1.8.7 当我运行任何命令或启动服务器时，有时它会运行，但有时它不会运行并显示缺少 gems 错误：

```
Missing these required gems:
  omniauth-facebook  >= 0
  omniauth-twitter  >= 0

You're running:
  ruby 1.8.7.358 at /home/dfr/.rvm/rubies/ruby-1.8.7-p358/bin/ruby
  rubygems 1.8.24 at /home/dfr/.rvm/gems/ruby-1.8.7-p358@rails2312, /home/dfr/.rvm/gems/ruby-1.8.7-p358@global

Run `rake gems:install` to install the missing gems. 
```

当我在收到此消息后再次运行相同的命令时，一切都只是以正常方式开始，然后再次运行命令并再次获得相同的消息，非常奇怪。

Gems 当然安装并添加到 environment.rb 中：

```
 config.gem 'omniauth'
  config.gem 'omniauth-facebook'
  config.gem 'omniauth-twitter' 
```

不幸的是，这里无法迁移到 rails 3 - 我试过了，但工作量太大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:23:06.507

我建议仅手动安装这些 gem 以阻止出现此错误。

您还可以考虑使用[Bundler](http://gembundler.com)来管理应用程序的 gem 依赖项。这里有一个关于在[Rails 2.3 中使用 Bundler](http://gembundler.com/rails23.html)的部分。

# ruby-on-rails - Rails 代码在本地工作，但在 Heroku 上不工作

> ID：11554770
> 
> 赞同：0
> 
> 时间：2012-07-19T06:00:09.557
> 
> 标签：ruby-on-rails, heroku

任何人有任何理由为什么这条线可以在本地工作，但 Heroku 会抛出错误？

```
where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user| 
```

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:41:41.957

你可能忘记做一个`heroku run rake db:migrate`.

# c++ - 欧拉计划#11。我的程序中的逻辑是错误的吗？

> ID：11554771
> 
> 赞同：1
> 
> 时间：2012-07-19T06:00:14.663
> 
> 标签：c++

问题可以在这里找到：[http ://projecteuler.net/problem=11](http://projecteuler.net/problem=11)

昨天我看到了 Euler 项目，我迷上了它。我编写了一个代码来解决问题 11，但由于某种我看不到的原因，答案是错误的。

任何人都可以阅读我的代码并提出任何建议吗？

```
#include <iostream>
using namespace std;

int input [20][20] = {
{8,2,22,97,38,15,0,40,0,75,4,5,7,78,52,12,50,77,91,8},
{49,49,99,40,17,81,18,57,60,87,17,40,98,43,69,48,4,56,62,0},
{81,49,31,73,55,79,14,29,93,71,40,67,53,88,30,3,49,13,36,65},
{52,70,95,23,4,60,11,42,69,24,68,56,1,32,56,71,37,2,36,91},
{22,31,16,71,51,67,63,89,41,92,36,54,22,40,40,28,66,33,13,80},
{24,47,32,60,99,3,45,2,44,75,33,53,78,36,84,20,35,17,12,50},
{32,98,81,28,64,23,67,10,26,38,40,67,59,54,70,66,18,38,64,70},
{67,26,20,68,2,62,12,20,95,63,94,39,63,8,40,91,66,49,94,21},
{24,55,58,5,66,73,99,26,97,17,78,78,96,83,14,88,34,89,63,72},
{21,36,23,9,75,0,76,44,20,45,35,14,0,61,33,97,34,31,33,95},
{78,17,53,28,22,75,31,67,15,94,3,80,4,62,16,14,9,53,56,92},
{16,39,5,42,96,35,31,47,55,58,88,24,0,17,54,24,36,29,85,57},
{86,56,0,48,35,71,89,7,5,44,44,37,44,60,21,58,51,54,17,58},
{19,80,81,68,5,94,47,69,28,73,92,13,86,52,17,77,4,89,55,40},
{4,52,8,83,97,35,99,16,7,97,57,32,16,26,26,79,33,27,98,66},
{88,36,68,87,57,62,20,72,3,46,33,67,46,55,12,32,63,93,53,69},
{4,42,16,73,38,25,39,11,24,94,72,18,8,46,29,32,40,62,76,36},
{20,69,36,41,72,30,23,88,34,62,99,69,82,67,59,85,74,4,36,16},
{20,73,35,29,78,31,90,1,74,31,49,71,48,86,81,16,23,57,5,54},
{1,70,54,71,83,51,54,69,16,92,33,48,61,43,52,1,89,19,67,48}
};

/* if element is a[i][j], its diagonal to the right is a[i+1][j+1]
if element is a[i][j], its diagonal to the left is a[i-1][j-1]  
IF element is a[i][j], the element below it is a[i+1][j]
IF element is a[i][j], the element on right of it is a[i][j+1]
*/

/*
approach:

=> find the greatest product of diagonals
=> find the greatest prodct of elements below each other
=> find the greatest prodct of element on right of each other
=> compare them
*/

int main(void)
{

unsigned long hr=0,hb=0,hdr=0, hdl=0;
//hr is the highest product on the right side traversal
//similraly for others

//for diagonal right
for(int i =0; i<17;i++) //going from 0 to 16 so that we dont land up beyond the array for (i+1),(j+1) etc
{
    for(int j=0;j<17;j++)
    {
        if(input[i][j]*input[i+1][j+1]*input[i+2][j+2]*input[i+3][j+3] > hdr)
        {
            hdr = input[i][j]*input[i+1][j+1]*input[i+2][j+2]*input[i+3][j+3];

        }
    }
}

for(int i =19; i>=3;i--)        //for diagonal left
{
    for(int j=19;j>=3;j--)
    {
        if(input[i][j]*input[i-1][j-1]*input[i-2][j-2]*input[i-3][j-3] > hdl)
        {
            hdl = input[i][j]*input[i-1][j-1]*input[i-2][j-2]*input[i-3][j-3];

        }
    }
}

for(int i =0; i<17;i++)     //for elements below each other
{
    for(int j=0;j<20;j++)
    {
        if(input[i][j]*input[i+1][j]*input[i+2][j]*input[i+3][j] > hb)
        {
            hb = input[i][j]*input[i+1][j]*input[i+2][j]*input[i+3][j];
        }
    }
}

for(int i =0; i<20;i++)     //on right
{
    for(int j=0;j<17;j++)
    {
        if(input[i][j]*input[i][j+1]*input[i][j+2]*input[i][j+3] > hr)
        {
            hr = input[i][j]*input[i][j+1]*input[i][j]*input[i][j+3];
        }
    }
}

if(hdr>hb && hdr > hr && hdr>hdl )
{
    cout<<hdr<<endl;
}
else if (hb > hdr && hb > hr && hb>hdl)
{
    cout<<hb<<endl;
}
else if(hr>hb && hr> hdr && hr > hdl)
{
    cout<<hr<<endl;
}
else
{
    cout<<hdl<<endl;
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:21:46.653

这是正确的代码。我建议任何尝试这个问题的人花一些时间用铅笔和纸实际查看图案。这个问题本身很容易。

```
#include <iostream>
using namespace std;

int input [20][20] ={{8,2,22,97,38,15,0,40,0,75,4,5,7,78,52,12,50,77,91,8},   {49,49,99,40,17,81,18,57,60,87,17,40,98,43,69,48,4,56,62,0},
{81,49,31,73,55,79,14,29,93,71,40,67,53,88,30,3,49,13,36,65},
{52,70,95,23,4,60,11,42,69,24,68,56,1,32,56,71,37,2,36,91},
{22,31,16,71,51,67,63,89,41,92,36,54,22,40,40,28,66,33,13,80},
{24,47,32,60,99,3,45,2,44,75,33,53,78,36,84,20,35,17,12,50},
{32,98,81,28,64,23,67,10,26,38,40,67,59,54,70,66,18,38,64,70},
{67,26,20,68,2,62,12,20,95,63,94,39,63,8,40,91,66,49,94,21},
{24,55,58,5,66,73,99,26,97,17,78,78,96,83,14,88,34,89,63,72},
{21,36,23,9,75,0,76,44,20,45,35,14,0,61,33,97,34,31,33,95},
{78,17,53,28,22,75,31,67,15,94,3,80,4,62,16,14,9,53,56,92},
{16,39,5,42,96,35,31,47,55,58,88,24,0,17,54,24,36,29,85,57},
{86,56,0,48,35,71,89,7,5,44,44,37,44,60,21,58,51,54,17,58},
{19,80,81,68,5,94,47,69,28,73,92,13,86,52,17,77,4,89,55,40},
{4,52,8,83,97,35,99,16,7,97,57,32,16,26,26,79,33,27,98,66},
{88,36,68,87,57,62,20,72,3,46,33,67,46,55,12,32,63,93,53,69},
{4,42,16,73,38,25,39,11,24,94,72,18,8,46,29,32,40,62,76,36},
{20,69,36,41,72,30,23,88,34,62,99,69,82,67,59,85,74,4,36,16},
{20,73,35,29,78,31,90,1,74,31,49,71,48,86,81,16,23,57,5,54},
{1,70,54,71,83,51,54,69,16,92,33,48,61,43,52,1,89,19,67,48}};

/* if element is a[i][j], its diagonal to the right is a[i+1][j+1]
   if element is a[i][j], its diagonal to the left is a[i+1][j-1]   
   IF element is a[i][j], the element below it is a[i+1][j]
   IF element is a[i][j], the element on right of it is a[i][j+1]
*/

/*
approach:

=> find the greatest product of diagonals
=> find the greatest prodct of elements below each other
=> find the greatest prodct of element on right of each other
=> compare  them
*/

int main(void)
{

unsigned long hr=0,hb=0,hdr=0, hdl=0;
//hr is the highest product on the right side traversal
//similraly for others

//for diagonal right
for(int i =0; i<17;i++) //going from 0 to 16 so that we dont land up beyond the     array for (i+1),(j+1) etc
{
    for(int j=0;j<17;j++)
    {
        if(input[i][j]*input[i+1][j+1]*input[i+2][j+2]*input[i+3][j+3] > hdr)
        {
            hdr = input[i][j]*input[i+1][j+1]*input[i+2][j+2]*input[i+3][j+3];

        }
    }
}

for(int i =0; i<17;i++)     //for diagonal left
{
    for(int j=19;j>=3;j--)
    {
        if(input[i][j]*input[i+1][j-1]*input[i+2][j-2]*input[i+3][j-3] > hdl)
        {
            hdl = input[i][j]*input[i+1][j-1]*input[i+2][j-2]*input[i+3][j-3];

        }
    }
}

for(int i =0; i<17;i++)     //for elements below each other
{
    for(int j=0;j<20;j++)
    {
        if(input[i][j]*input[i+1][j]*input[i+2][j]*input[i+3][j] > hb)
        {
            hb = input[i][j]*input[i+1][j]*input[i+2][j]*input[i+3][j];
        }
    }
}

for(int i =0; i<20;i++)     //on right
{
    for(int j=0;j<17;j++)
    {
        if(input[i][j]*input[i][j+1]*input[i][j+2]*input[i][j+3] > hr)
        {
            hr = input[i][j]*input[i][j+1]*input[i][j]*input[i][j+3];
        }
    }
}

if(hdr>hb && hdr > hr && hdr>hdl )
{
    cout<<hdr<<endl;
}
else if (hb > hdr && hb > hr && hb>hdl)
{
    cout<<hb<<endl;
}
else if(hr>hb && hr> hdr && hr > hdl)
{
    cout<<hr<<endl;
}
else
{
    cout<<hdl<<endl;
}
return 0;
} 
```

# apache - mod_rewrite 移动到 .htaccess 时表现奇怪

> ID：11554775
> 
> 赞同：1
> 
> 时间：2012-07-19T06:00:46.000
> 
> 标签：apache, .htaccess, mod-rewrite

我的 httpd conf 文件中有这个重写规则：

```
RewriteRule (.*?)\.html $1.php?%{QUERY_STRING} [NC] 
```

它工作得很好。但是，当我将它放入同一虚拟主机的 .htaccess 中时，它现在以 1 美元的价格返回整个文档路径，而不是 http 主机。它需要做的就是用“php”替换“html”。

我显然不明白 .htaccess 如何与重写规则一起工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:05:47.453

您需要在规则的目标中添加前导斜杠：

```
RewriteRule (.*?)\.html /$1.php?%{QUERY_STRING} [NC] 
```

此外，您也可以摆脱`?%{QUERY_STRING}`目标中的位。如果没有**?** .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:08:10.590

看着这丑陋的东西，我的眼睛几乎要流血了……

```
 RewriteRule ^(.*).html?(.*)$ $1\.php?$2 [NC] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T10:32:13.330

```
RewriteRule ^(.*)\.html$ $1.php [nc] 
```

# java - JetS3t 更新内容\mime 类型

> ID：11554776
> 
> 赞同：1
> 
> 时间：2012-07-19T06:00:46.657
> 
> 标签：java, amazon-s3, mime-types, content-type, jets3t

由于[此处描述](https://forums.aws.amazon.com/thread.jspa?messageID=294542)的问题，我希望更新已上传文件的 content\mime 类型。我正在使用[JetS3t](http://www.jets3t.org/) 0.9.0 来检索感兴趣的对象，我使用[Getting A File's Mime Type In Java](https://stackoverflow.com/questions/51438/getting-a-files-mime-type-in-java)来更新更新 content\mime 类型，但我不知道如何在对象本身上提交它，即如何将其反映到 S3 存储。

附上一段代码，任何帮助将不胜感激。

```
final String bucketName = "myBucketName";
final S3Bucket s3Bucket = s3Service.getBucket(bucketName);
final S3Object[] objects = s3Service.listObjects(bucketName);
String contentType = null;
for (S3Object object : objects) {
    contentType = MimetypesFileTypeMap().getContentType(object.getName());
    object.setContentType(contentType);
    //how to commit the changes?
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:36:22.627

You have to copy the object by using [copyVersionedObject](http://www.jets3t.org/api/org/jets3t/service/S3Service.html#copyVersionedObject%28java.lang.String,java.lang.String,java.lang.String,java.lang.String,org.jets3t.service.model.S3Object,boolean%29) to update it's metadata. By using the same source and destination key only the metadata are updated.

# objective-c - Objective-C：根据字典条目对 NSDictionary 的键进行排序

> ID：11554780
> 
> 赞同：13
> 
> 时间：2012-07-19T06:00:59.670
> 
> 标签：objective-c, xcode, cocoa-touch

好的，所以我知道字典无法排序。但是，假设我`NSMutableArray *keys = [someDictionary allKeys];`现在，我想根据字典中的相应值（按字母顺序）对这些键进行排序。因此，如果字典包含`key=someString`，那么我想`keys`根据它们对应的字符串进行排序。我认为它的一些应用，`sortUsingComparator`但在这一点上它有点超出我的能力范围。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-19T06:16:25.557

```
NSArray *keys = [someDictionary allKeys];
NSArray *sortedKeys = [keys sortedArrayUsingComparator:^NSComparisonResult(id a, id b) {
    NSString *first = [someDictionary objectForKey:a];
    NSString *second = [someDictionary objectForKey:b];
    return [first compare:second];
}]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T06:13:13.243

```
NSDictionary *dict = // however you obtain the dictionary
NSMutableArray *sortedKeys = [NSMutableArray array];

NSArray *objs = [dict allValues];
NSArray *sortedObjs = [objs sortedArrayUsingSelector:@selector(compare:)];
for (NSString *s in sortedObjs)
    [sortedKeys addObjectsFromArray:[dict allKeysForObject:s]]; 
```

现在`sortedKey`将包含按其对应对象排序的键。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-04T09:00:31.073

**NSDictionary 基于字典键的排序*键***

Abobe 用于返回基于字典内容的排序数组，这是用于返回**按字典键排序**的数组：

```
NSArray *keys = [theDictionary allKeys];
NSArray *sortedKeys = [keys sortedArrayUsingComparator:^NSComparisonResult(id a, id b) {
    return [a compare:b];
}];
NSMutableArray *sortedValues = [NSMutableArray new];
for(NSString *key in sortedKeys)
    [sortedValues addObject:[dictFilterValues objectForKey:key]]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-27T15:22:50.880

只需将其写在这里，因为我在任何地方都找不到它：要根据值从 NSDictionary 中获取按字母数字排序的 NSDictionary - 在我的情况下这是必要的 - 您可以执行以下操作：

```
//sort typeDict alphanumeric to show it in order of values
    NSArray *keys = [typeDict allKeys];

    NSArray *sortedKeys = [keys sortedArrayUsingComparator:^NSComparisonResult(id a, id b) {
        NSString *first = [typeDict objectForKey:a];
        NSString *second = [typeDict objectForKey:b];
        return [first compare:second];
    }];
    NSLog(@"sorted Array: %@", sortedKeys);

    NSMutableDictionary *sortedTypeDict = [NSMutableDictionary dictionary];
    int counter = 0;
    for(int i=0; i < [typeDict count]; i++){
        NSString *val = [typeDict objectForKey:[sortedKeys objectAtIndex:counter]];
        NSString *thekey = [sortedKeys objectAtIndex:counter];
        [sortedTypeDict setObject:val forKey:thekey];
        counter++;
    }
    NSLog(@"\n\nsorted dict: %@", sortedTypeDict); 
```

没有大碍！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-27T10:07:42.630

如果字典中的任何值为空，则使用此代码

```
NSArray *keys = [typeDict allKeys];   
NSSortDescriptor *sd = [[NSSortDescriptor alloc] initWithKey:nil ascending:YES];
NSArray *sortedKeys = [keys sortedArrayUsingDescriptors:@[sd]];
NSLog(@"SORT 1 %@",sortedKeys);

NSMutableDictionary *sortedTypeDict = [NSMutableDictionary dictionary];
int counter = 0;
for(int i=0; i < [typeDict count]; i++){
    id val = [typeDict objectForKey:[sortedKeys objectAtIndex:counter]];
    NSString *thekey = [sortedKeys objectAtIndex:counter];
    [sortedTypeDict setObject:val forKey:thekey];
    counter++;
}
NSLog(@"\n\nsorted dict: %@", sortedTypeDict); 
```

# html - 网站的 html 介绍页面

> ID：11554781
> 
> 赞同：-4
> 
> 时间：2012-07-19T06:01:12.590
> 
> 标签：html

我在“head”标签之间创建了一个带有以下代码的html页面：

```
meta http-equiv="Refresh" content="5; url= contacts.html" 
```

现在，当上面的代码被添加到网页时，它会等待 5 秒并移动contacts.html 页面。如果您按浏览器上的“返回”按钮，浏览器会将您带到上一个页面，即“介绍页面”或我输入上述代码的页面。

但是我需要阻止这种情况发生（当按下浏览器上的“返回”按钮时返回到介绍页面）。有可能这样做吗？如果可能，那怎么办？o_O

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:08:56.580

您可以使用 javascript 来执行此操作，但 JavaScript 并非万无一失，因为有人可能会关闭他们的 javascript 并绕过您的机制。

将此添加到您的内容中并添加`onload="preventHistoryBack()"`到您的 content.html 中的 -tag 中：

```
<script type="text/javascript">
    function preventHistoryBack() {
        for(var i = 0; i < window.history.length; i++) {
            window.history.back(i) = window.location;
        }
    }
</script>

<body onload="preventHistoryBack()"> 
```

这将用您当前的位置替换浏览器的完整历史记录。因此，当用户点击后退按钮时，它将转到与他现在相同的页面。

# javascript - MVC3 Ajax - 提交复选框以形成带有复选框的空白页面

> ID：11554790
> 
> 赞同：0
> 
> 时间：2012-07-19T06:02:03.627
> 
> 标签：javascript, ajax, asp.net-mvc-3, forms, checkbox

我尝试使用按钮提交我的表单并且一切正常（控制器被调用并且 POST 工作正常）。然后我在它旁边添加一个复选框，当我单击它时，它会返回一个只有复选框的空白页面。我在用着：

```
<script src="@Url.Content("~/Scripts/jquery-1.4.4.js")" type="text/javascript"></script> 
<script src="@Url.Content("~/Scripts/jquery.unobtrusiveajax.js")"type="text/javascript"></script> 
```

我的部分观点（我使用部分视图）：
Index.cshtml：

```
<td id="ProjectFieldset">
     @Html.Partial("_ProjectSelect") 
</td> 
```

_ProjectSelect.cshtml：

```
@using (Ajax.BeginForm("test", "Project", new AjaxOptions() { InsertionMode = InsertionMode.Replace, UpdateTargetId = "ProjectFieldset" }))
         {
        <td>
            @Html.CheckBox("ckboxItem", true , new {onchange="this.form.submit();"})
            <input type="submit" value="allo" id="allo" />
        </td>
         } 
```

控制器：

```
[AcceptVerbs(HttpVerbs.Post)]
    public ActionResult test(bool ckboxItem)
    {
        ViewData["projects"] = db.Projects;
        return PartialView("_ProjectSelect");
    } 
```

这只是我的代码的一部分。没有 HTML 错误。因此，复选框和按钮显示良好，按下按钮时，一切正常。当我单击复选框时，它会进入控制器，但在那之后，它会显示一个空白页面。这里有什么帮助吗？？？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:04:21.980

代替：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusiveajax.js")"type="text/javascript"></script> 
```

和：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")"type="text/javascript"></script> 
```

请注意`jquery.unobtrusive-ajax.js`脚本名称中的拼写错误。

现在也`jquery 1.4.4`有点老了。我建议您使用更新的版本。

# wordpress - 如何根据页面中的类别显示wordpress帖子

> ID：11554799
> 
> 赞同：0
> 
> 时间：2012-07-19T06:02:44.047
> 
> 标签：wordpress

我在一个网站上工作。问题是我必须在各自的页面中显示分类的帖子。我正在使用我正在研究的自定义主题。基本上我在 WordPress 中创建一个网站。其他有用的制作教程的链接会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:22:20.253

这是您需要在网页中添加的代码。将 1 替换为您想要的类别 ID。

```
<?php
$posts = get_posts(array('category' => 1));
?> 
```

您可以参考[此](http://www.dev4press.com/2010/tutorials/wordpress/tips/get-posts-for-a-category/)链接以获取更多详细信息。

编辑：更详细的信息。

```
<?php
$category = get_the_category(); 
echo $category[0]->cat_name;
?> 
```

现在`$category`是您的类别数组。您可以通过获取类别名称 `$category[$i]->cat_name`因此，您可以在数组中搜索您的类别并获取它的“id”。并从第一个代码中您可以获得帖子。

# java - Hector 无法正确处理 Java 字符串中的控制字符 - 如何从 Hector 获取十六进制而不是文本字符串？

> ID：11554805
> 
> 赞同：1
> 
> 时间：2012-07-19T06:03:07.563
> 
> 标签：java, hex, hector, control-characters

我对 Hector 处理键名和列名中的控制字符有疑问。我正在编写一个使用 Hector 与 Cassandra 实例对话的程序，并且有预先存在的键和列名称，例如十六进制“ **594d69e0b8e611e10000242d50cf1ff7** ”。

我已将该十六进制输入到 Java 字符串中，并通过一些简单的转换为文本的代码将其插入：

```
StringBuilder sb = new StringBuilder();
for (int i = 0; i < s1.length() - 1; i+=2 ){
    /*Grab the hex in pairs*/
    String output = s1.substring(i, (i + 2));
    /*Convert Hex to Decimal*/
    int decimal = Integer.parseInt(output, 16);                  
    sb.append((char)decimal);              
}            
return sb.toString(); 
```

（通过调用 hexString.append(Integer.toHexString(textString.charAt(i))) 将返回的 Java 字符串转换回十六进制；对于每个字符，返回原始的十六进制，因此 Java 应该能够处理这些数据。）打印说Java String 产生下图中的第一行：

**[图片未发布，因为不允许新用户发布图片。]** 图片在这里：http: [//i.stack.imgur.com/yUJxs.png](http://i.stack.imgur.com/yUJxs.png)

不幸的是，当我调用以下代码时，底线（损坏）是 Hector 返回给我的内容（为简单起见，省略了许多检查和设置）：

```
OrderedRows<String, String, String> orderedRows;
orderedRows = rangeSlicesQuery.execute().get();
Row<String,String,String> lastRow = orderedRows.peekLast();
for (Row<String, String, String> r : orderedRows) {
    String key = r.getKey();
    System.out.println(key);
... 
```

因此，Hector 在返回 Java 字符串时没有正确处理控制字符。如何让 Hector 将**十六进制**的键和列返回给我，而不是（损坏的）基于文本的 Java 字符串？我试图查找它，但基本上缺少有关如何执行此操作的文档（[http://hector-client.github.com/hector//source/content/API/core/1.0-1/me/prettyprint/ hector/api/beans/OrderedRows.html](http://hector-client.github.com/hector//source/content/API/core/1.0-1/me/prettyprint/hector/api/beans/OrderedRows.html) - 什么是 K、V 和 N？）。我想它应该很简单，因为如果您不使用 ascii('') 包装输入，Cassandra CLI 假定为十六进制，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T21:53:58.137

在 Cassandra 中，所有内容都存储为十六进制字节。Cassandra thrift API 也接受二进制文件。然而，在现实生活中，人们喜欢处理字符串、整数等人类类型。Hector 通过抽象出序列化/反序列化逻辑，让您可以轻松地使用 thrift API。

K、N 和 V 分别是行键、列名和列值的类型。当您使用字符串、字符串、字符串时，您是在告诉赫克托您的列族的所有三种类型都是字符串。

如果将行键和列名存储为字节，则应使用 byte[] 代替检索，使用 BytesArraySerializer 进行序列化。

# dataform - 如何在 hyperion 规划中将计算脚本附加到数据表单

> ID：11554811
> 
> 赞同：0
> 
> 时间：2012-07-19T06:04:10.907
> 
> 标签：dataform, hyperion, essbase

我是新来`Hyperion`完成小任务。我已经创建了数据表单来`Hyperion`规划它的工作正常。现在我必须将`calc script`（计算脚本）附加到我的数据表单中。是否可以附加`calc script`到数据表格？我怎么能附上我`calc script`的`data form`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:52:25.167

您可以将业务规则附加到表单，这将允许您从表单运行计算。只需创建业务规则，然后将其附加到表单。

该文档有一个逐步的过程来做到这一点：

[http://docs.oracle.com/cd/E17236_01/epm.1112/hp_admin_11122/frameset.htm?rule_sel.html](http://docs.oracle.com/cd/E17236_01/epm.1112/hp_admin_11122/frameset.htm?rule_sel.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T07:10:25.633

晚了几年...希望你已经想通了。

您需要首先区分计算脚本和业务规则。对于表单，您只能将业务规则附加到它们。

# android - 开放 CV 与 NDK 进行图像处理

> ID：11554813
> 
> 赞同：0
> 
> 时间：2012-07-19T06:04:22.560
> 
> 标签：android

我正在编写一个程序来处理图像，即改变它的颜色、亮度、对比度等... DVM 不支持处理超出限制大小的图像...谁能告诉我使用 Open CV 是否可以解决问题（因为这似乎是比 NDK 更好的选择）？还是我必须使用 NDK？我做了很多搜索，但无法找到答案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:41:51.780

首先，Android 中的图像处理有不同的选项，请参阅此处以比较最流行的选项：请参阅[Android 计算机视觉 JavaCV OpenCV FastCV 比较](https://stackoverflow.com/questions/10673099/android-computer-vision-javacv-opencv-fastv-comparison)和[Android 和 Java 的图像处理库](https://stackoverflow.com/questions/6682878/image-processing-library-for-android-and-java)

回到您的问题：如果您处理的图像真的非常大，以至于它们不适合设备的内存，您需要以称为图块的小块处理图像。

如果您的图像不是那么大，我建议您使用 OpenCv，如果您需要做的不仅仅是非常简单的任务，例如亮度/对比度调整。

# android - 图像从 android 应用程序共享到 facebook

> ID：11554814
> 
> 赞同：2
> 
> 时间：2012-07-19T06:04:30.510
> 
> 标签：android, facebook

在我的 android 应用程序中，我可以通过 facebook SDK for android 将文本分享到 facebook 墙。我可以使用它直接从我的应用程序中共享图像吗？我希望通过我的应用程序提供的动态更改的 url 共享图像。请提供任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:43:07.630

访问[此](https://developers.facebook.com/docs/reference/api/photo/)链接。

您必须编写的代码将是这样的

```
bundle.putString("name", "name you want to give"); 
```

同样，您可以向图像添加其他参数。

# ios - 如何在 iOS5 中的正方形上使用图像放置 2D 纹理

> ID：11554816
> 
> 赞同：2
> 
> 时间：2012-07-19T06:04:42.003
> 
> 标签：ios, opengl-es, textures, glkit

这是我在 iphone 中的第一个应用程序，我正在尝试在`GLKView`. 我没有使用`GLKVIewController`类。. 经过大量搜索后，我想我已经将图像加载到 2D 纹理中，但我仍然不确定如何将其映射到矩形上。以下是我用来绘制矩形的代码。

创建顶点数组：

```
GLfloat gSqaureVertexData[216] = 
{
    // Data layout for each line below is:
    // positionX, positionY, positionZ,     normalX, normalY, normalZ,
    0.5f, -0.5f, -0.5f,        0.0f, 0.0f, -1.0f,
    -0.5f, -0.5f, -0.5f,       0.0f, 0.0f, -1.0f,
    0.5f, 0.5f, -0.5f,         0.0f, 0.0f, -1.0f,
    0.5f, 0.5f, -0.5f,         0.0f, 0.0f, -1.0f,
    -0.5f, -0.5f, -0.5f,       0.0f, 0.0f, -1.0f,
    -0.5f, 0.5f, -0.5f,        0.0f, 0.0f, -1.0f
}; 
```

在 viewDidLoad 中初始化上下文：

```
 context = [[EAGLContext alloc]initWithAPI:kEAGLRenderingAPIOpenGLES2];
    CAEAGLLayer *eaglLayer = (CAEAGLLayer*)self.view.layer;
    eaglLayer.opaque=NO;

    glView = [[GLKView alloc]initWithFrame:CGRectMake(self.view.frame.origin.x, self.view.frame.origin.y+45, self.view.frame.size.width, self.view.frame.size.height-100.0f)];

    glView.context=context;
    glView.delegate=self;
    glView.backgroundColor=[UIColor clearColor];
    glView.drawableDepthFormat = GLKViewDrawableDepthFormat24;
    [self setupGL];
    [self.view addSubview:glView]; 
```

将 png 图像加载到 TEXTURE 对象和其他设置

```
-(void) setupGL
{
    [EAGLContext setCurrentContext:context];

    //[self loadShaders];

    self.effect = [[GLKBaseEffect alloc] init];
    //self.effect.light0.enabled = GL_TRUE;
    //self.effect.light0.diffuseColor = GLKVector4Make(1.0f, 0.4f, 0.4f, 1.0f);

    glEnable(GL_DEPTH_TEST);

    glGenVertexArraysOES(1, &_vertexArray);
    glBindVertexArrayOES(_vertexArray);

    glGenBuffers(1, &_vertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(gSqaureVertexData), gSqaureVertexData, GL_STATIC_DRAW);

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 24, BUFFER_OFFSET(0));
    glEnableVertexAttribArray(GLKVertexAttribNormal);
    glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 24, BUFFER_OFFSET(12));

    glBindVertexArrayOES(0);
    glBindTexture(GL_TEXTURE_2D, texture[0]);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

    NSString *path = [[NSBundle mainBundle] pathForResource:@"texture" ofType:@"png"];
    NSData *texData = [[NSData alloc] initWithContentsOfFile:path];
    UIImage *image = [[UIImage alloc] initWithData:texData];
    if (image == nil)
        NSLog(@"Do real error checking here");

    GLuint width = CGImageGetWidth(image.CGImage);
    GLuint height = CGImageGetHeight(image.CGImage);
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    void *imageData = malloc( height * width * 4 );
    CGContextRef contextTex = CGBitmapContextCreate( imageData, width, height, 8, 4 * width, colorSpace, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big );
    CGColorSpaceRelease( colorSpace );
    CGContextClearRect( contextTex, CGRectMake( 0, 0, width, height ) );
    CGContextTranslateCTM( contextTex, 0, height - height );
    CGContextDrawImage( contextTex, CGRectMake( 0, 0, width, height ), image.CGImage );

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, imageData);

    CGContextRelease(contextTex);

    free(imageData);
    [image release];
    [texData release];    
} 
```

在 drawInRect 中绘制正方形：

```
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect {
    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

    glBindVertexArrayOES(_vertexArray);

    // Render the object[[ with GLKit
    [self.effect prepareToDraw];

    glDrawArrays(GL_TRIANGLES, 0, 36);

    // Render the object again with ES2
    glUseProgram(_program);

    glUniformMatrix4fv(uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX], 1, 0, _modelViewProjectionMatrix.m);
    glUniformMatrix3fv(uniforms[UNIFORM_NORMAL_MATRIX], 1, 0, _normalMatrix.m);

    glDrawArrays(GL_TRIANGLES, 0, 36);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:30:26.217

您需要为每个顶点添加纹理坐标，将纹理设置为活动纹理并为纹理坐标添加顶点属性：

顶点数据：

```
//Vertex, Normal, Texture coordinate (ranges from 0 to 1)
0.5f, -0.5f, -0.5f,        0.0f, 0.0f, -1.0f,  1, 1,
-0.5f, -0.5f, -0.5f,       0.0f, 0.0f, -1.0f,  0, 1,
0.5f, 0.5f, -0.5f,         0.0f, 0.0f, -1.0f,  1, 0,
0.5f, 0.5f, -0.5f,         0.0f, 0.0f, -1.0f,  1, 0, etc 
```

设置活动纹理（这是标准的 OpenGL 方式，不确定 GLKit）：

```
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, textures[0]); 
```

设置纹理属性（可能不完全正确，我对 GLKit 不熟悉）：

```
glEnableVertexAttribArray(GLKVertexAttribTexCoord);
glVertexAttribPointer(GLKVertexAttribTexCoord, 2, GL_FLOAT, GL_FALSE, 24, BUFFER_OFFSET(16)); 
```

# tridion - 防止插入相同的组件和模板组合：

> ID：11554820
> 
> 赞同：2
> 
> 时间：2012-07-19T06:05:08.573
> 
> 标签：tridion, tridion-2011

在一个页面中，当我们单击**组件演示选项卡**时，我们可以看到那里列出的组件和模板。单击其下方的**插入**按钮，它将打开另一个窗口“**插入组件演示**”，我们还将有**插入**和关闭按钮。所以现在我需要做什么在插入时我需要检查**所选组件和模板**的组合是否已经存在于页面上。如果是，那么它应该防止插入相同的弹出窗口，如“此组合已存在，选择其他组件”。知道我该如何继续。如何在**插入**按钮上触发 Javascript？

**编辑：**

当我订阅页面时，我得到了错误。我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Text;
using Tridion.ContentManager.Extensibility.Events;
using Tridion.ContentManager.Extensibility;
using Tridion.ContentManager.ContentManagement;
using System.IO;
using System.Windows.Forms;

namespace MyEventHandlers
{
[TcmExtension("MyEventHandlerExtension")]

public class MyEventHandler : TcmExtension 
{
    public MyEventHandler()
{
  Subscribe();
}

public void Subscribe()
{
    EventSystem.Subscribe<Page, SaveEventArgs>(SaveBtnInitiated, EventPhases.Initiated);

}

private void SaveBtnInitiated(Page subject, SaveEventArgs args, EventPhases phase)
{

    try
    {
        List<string> allcplist = new List<string>();
        List<string> allcplist = new List<string>();
        foreach (ComponentPresentation cp in subject.ComponentPresentations)
        {
            allcplist.Add(cp.Component.Id + "," + cp.ComponentTemplate.Id);   
        }
        List<string> uniquecplist = allcplist.Distinct().ToList();
        if (allcplist.Count != uniquecplist.Count)
        {
            subject.Checkin(false);
            throw new Exception("Page has duplicate component presentation");

    }
    catch(Exception)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T07:17:03.150

您可以在订阅 Page Save 事件和 Initiated 阶段的事件处理程序中实现这一点。当存在重复的组件表示时，您可以通过抛出异常来取消保存。该消息将显示在 TCM Explorer 的消息中心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T11:29:35.580

为什么要订阅组件？我认为它应该是页面。然后，您可以步行穿过该`ComponentPresentations`物业。

当发现重复演示时，遍历组件演示并抛出异常的代码：

```
foreach (var cpA in subject.ComponentPresentations)
{
    if (subject.ComponentPresentations.Where(cpB => ComponentPresentationsAreEqual(cpA, cpB)).ToList().Count() > 2)
    {
        throw new DuplicateComponentPresentationsEmbeddedOnPageException();
    }
} 
```

当 cpB 等于 cpA 时，将 cpB 包含在列表中的函数：

```
function ComponentPresentationsAreEqual(ComponentPresentation cpA, ComponentPresentation cpB)
{
    return cpA.Component.Id == cpB.Component.Id && cpA.ComponentTemplate.Id == cpB.ComponentTemplate.Id;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T06:50:39.953

**感谢@Arjen Stobbe，我得到了这段代码的结果**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Text;
using Tridion.ContentManager.Extensibility.Events;
using Tridion.ContentManager.Extensibility;
using Tridion.ContentManager.ContentManagement;
using System.IO;
using System.Windows.Forms;

namespace MyEventHandlers
{
[TcmExtension("MyEventHandlerExtension")]

public class MyEventHandler : TcmExtension 
{
    public MyEventHandler()
{
  Subscribe();
}

public void Subscribe()
{
    EventSystem.Subscribe<Page, SaveEventArgs>(SaveBtnInitiated, EventPhases.Initiated);

}

private void SaveBtnInitiated(Page subject, SaveEventArgs args, EventPhases phase)
{

    try
    {
        List<string> allcplist = new List<string>();
        List<string> allcplist = new List<string>();
        foreach (ComponentPresentation cp in subject.ComponentPresentations)
        {
            allcplist.Add(cp.Component.Id + "," + cp.ComponentTemplate.Id);   
        }
        List<string> uniquecplist = allcplist.Distinct().ToList();
        if (allcplist.Count != uniquecplist.Count)
        {
            subject.Save(false);
            throw new Exception("Page has duplicate component presentation");

    }
    catch(Exception)
    {

    }
} 
```

但我不会删除页面上存在的重复 CP。需要补充吗，

```
for each() 
```

里面

```
if (allcplist.Count != uniquecplist.Count)
{
} 
```

# mysql - 加入mysql需要为每个主键返回单个记录

> ID：11554821
> 
> 赞同：0
> 
> 时间：2012-07-19T06:05:12.730
> 
> 标签：mysql

我有两个用于属性和图像的表，它们在两个表中具有相同的列名，例如 id,name。父列是图像中的外键。

```
SELECT DISTINCT(A.id),A.name,B.name AS img 
FROM `jos_properties_products` AS A
LEFT JOIN `jos_properties_images` AS B ON A.id = B.parent 
```

![在此处输入图像描述](../Images/086e71e0c5186d5bfbff38c0f45ca581.png)

从上面我想删除重复的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:08:05.023

试试这个 ：

```
 SELECT A.id,A.name,max(B.name) AS img 
FROM `jos_properties_products` AS A
LEFT JOIN `jos_properties_images` AS B ON A.id = B.parent
group by A.id,A.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:10:11.230

SELECT DISTINCT(A.id) as ids,A.name aName,B.name AS img FROM `jos_properties_products`AS A LEFT JOIN `jos_properties_images`AS B ON A.id = B.parent group by ids,aName,img;

我认为这会做

# php - 如果 id 遍历数组插入

> ID：11554827
> 
> 赞同：0
> 
> 时间：2012-07-19T06:06:06.087
> 
> 标签：php, mysql, multidimensional-array

我在这里回答了我的第一个问题：[link](https://stackoverflow.com/questions/11546184/html-form-array-for-each-update-into-mysql)

我的扩展问题是，我可以成功地将行更新到数据库中，但由于某些原因，如果 itemid = 0，我无法插入？下面的代码，如果我这样做，它会再增加 8 行？：

```
for ($i = 0; $i < count($values); $i++)
{
$item           = $values['item'][$i];
$description    = $values['description'][$i];
$rate           = $values['rate'][$i];
$itemid         = $values['itemid'][$i];

if($itemid)
{
    // Update item
    $query = "UPDATE `invoice_items`...";
}
else
{
    // Add new item
    $query = "INSERT INTO `invoice_items`...';
}

} 
```

#

更新

#

这是我现在所拥有的，但是当我只更新项目时，我仍在向数据库中插入另外 7 个项目：

```
foreach ($outArray as $row)
{
$item           = $row['item'];
$description    = $row['description'];
$rate           = $row['rate'];
$qty            = $row['qty'];
$price          = $row['price'];
$itemid         = $row['itemid'];

if($row['itemid'] >= 1)
{
    $query = "UPDATE `invoice_items` SET `item` = '?', `description` = '?', `rate` = '?', `qty` = '?', `price` = '?' WHERE `id` = '?' LIMIT 1;";
    $query_prepare = $this->prep_q($query,array($item,$description,$rate,$qty,$price,$itemid));
}
else
{
    $query = "INSERT INTO `invoice_items` (`item`,`invoice_id`,`description`,`rate`,`qty`,`price`) VALUES ('?','?','?','?','?','?') LIMIT 1;";
    $query_prepare = $this->prep_q($query,array($item,$invoice_id,$description,$rate,$qty,$price));
}

$this->setquery($query_prepare);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:43:30.220

您还应该创建一个可行的数组，每一行都有自己的名称、描述、速率、itemid。

**所以而不是：**

```
Array
(
[item] => Array
    (
        [0] => item listing 1
        [1] => item listing 2
    )

[description] => Array
    (
        [0] => item testing description
        [1] => item testing description
    )

[rate] => Array
    (
        [0] => 1.00
        [1] => 2.00
    )

[itemid] => Array
    (
        [0] => 1
        [1] => 2
    )
) 
```

**您的数组应如下所示：**

```
Array
(
[0] => Array
(
        [item] => item listing 1
        [description] => item testing description
        [rate] => 1.00
        [itemid] => 1
)
[1] => Array
(
        [item] => item listing 2
        [description] => item testing description
        [rate] => 2.00
        [itemid] => 2
) 
```

然后你可以简单地使用 foreach 和***PDO 或 mysqli***：

```
$sql['update'] = "UPDATE `invoice_items`
                  SET `item` = :item, `description` = :description, `rate` = :rate
                  WHERE `itemid` = :itemid";

$sql['insert'] = "INSERT INTO `invoice_items` (itemid,item,description,rate)
                  VALUES (:itemid, :item, :description,:rate)";

foreach ($array as $row){
    if($row['itemid'] >= 1){
        $stmt = $db->prepare($sql['update']);
    }else{
        $stmt = $db->prepare($sql['insert']);
    }
    $stmt->execute($row);
} 
```

# c# - C# Oracle 数据提供程序 (Oracle DataAccess.Dll) 连接请求超时

> ID：11554831
> 
> 赞同：0
> 
> 时间：2012-07-19T06:06:24.903
> 
> 标签：c#, oracle9i

**oracle db中特定表的select语句工作正常**。

**但是当我使用其主键更新记录时，由于连接请求超时而**引发错误

 **-阿南德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:51:28.513

我想问题是你的桌子上有锁。

你有蟾蜍或其他连接到数据库的连接吗？如果是这样，请提交/回滚所有其他连接，然后重试。您还可以使用 Toad 或其他程序来查看您在该表上是否有任何锁。**

# python - 使用 WSGIref 进行重定向

> ID：11554833
> 
> 赞同：0
> 
> 时间：2012-07-19T06:06:26.100
> 
> 标签：python, wsgi

我正在开发一个玩具网络框架，并且我已经实现了一个方法 redirect_to 用于将用户重定向到指定的 URL。这里的代码

```
def _redirect_to(_self, _url):
  """Takes an url as argument and returns a location header"""

  return ([('Location', _url)], "")                   # --- (i) 
```

返回的元组然后由应用程序处理，这里是代码

```
...
else:                                                             
  status = '200 OK'                                               
  params['_GET'] = get_data(_environment)                         
  params['_POST'] = post_data(_environment)                       
  (headers, response) = objview(objcontroller, _params = params)  # tuple from (i) is stored here

_start_response(status, headers) 
```

但是它不起作用。以下是我的浏览器收到的标头：

```
Content-Length:0
Date:Thu, 19 Jul 2012 06:03:52 GMT
Location:http://google.com
Server:WSGIServer/0.1 Python/2.7.3 
```

标题有问题吗？？

干杯，

乌察夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:25:30.620

要进行 HTTP 重定向，您需要两者：

*   `'Location'`HTTP 标头
*   `'302 Found'`HTTP 状态码

您似乎没有将 HTTP 状态代码从 200 更改为 302。

# google-apps-script - 谷歌电子表格脚本函数调用

> ID：11554834
> 
> 赞同：0
> 
> 时间：2012-07-19T06:06:31.883
> 
> 标签：google-apps-script, google-sheets

我在 Google 文档中使用表单。我有一个脚本，用于为每个条目自动增加一列，还有另一个函数来检查当前条目是否有类似的条目。代码如下。

```
function onFormSubmit(e) {
var sheet = SpreadsheetApp.getActiveSheet();
var row =  SpreadsheetApp.getActiveSheet().getLastRow();
sheet.getRange(row,7).setValue('sn'+(row-1));
}

function removeDuplicates() {
var sheet = SpreadsheetApp.getActiveSheet();
var data = sheet.getDataRange().getValues();
var newData = new Array();
for(i in data){
var row = data[i];
var duplicate = false;
for(j in newData){
if(row[1] == newData[j][1] && row[2] == newData[j][2]){
duplicate = true;
}
}
if(!duplicate){
newData.push(row);
formSubmitReply();
}

}
sheet.clearContents();
sheet.getRange(1, 1, newData.length, newData[0].length).setValues(newData);
} 
```

如您所见，第一个功能用于自动增加一列，第二个功能用于检查重复条目。我可以以不同的方式触发它们，但我想做的是，在第二个函数中调用第一个函数，这样当我触发提交表单的第二个函数时，它会自动在其中运行第一个函数。我怎样才能做到这一点？？

注意：简单的调用`onFormSubmit()`不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T18:48:31.360

分解出要从多个位置运行的代码。而不是这样做：

```
function eventHandler(e) {
   // code to increase column
}

function otherFunction() {
   // code to remove duplicates
   eventHandler(e);   // won't work, e is undefined!
} 
```

你可以这样做：

```
function tinyHelperFunction() {
  // code to increase column
}

function eventHandler(e) {
  tinyHelperFunction();
  // other stuff, maybe
}

function otherFunction() {
  // code to remove duplicates
  tinyHelperFunction();
} 
```

# c - 在 Mac OS X 上将 GNU 科学库链接到 R

> ID：11554840
> 
> 赞同：1
> 
> 时间：2012-07-19T06:07:00.340
> 
> 标签：c, r, shared-libraries, static-libraries, gsl

我一直在研究我用 C 语言编写的一个程序，该程序使用 GSL 中的函数运行 MCMC。我已经阅读了很多 GNU 文档和编写 R 扩展，并且我已经阅读了很多关于使用 RcppGSL 的内容，但在我看来，用 C 编写然后将函数动态加载到 R 中更容易。我见过许多资源描述了如何在 Windows 上构建该功能，但我看到的关于如何在基于 Unix 的系统上使用它的一切都是它“相对简单”和“简单”，但我无法让它工作。

我渴望有人开始工作的 C 脚本是一个简单的脚本。它只是取一个具有给定行数和列数的数组，将其转换为 gsl_matrix，然后将其转换回数组（这基本上是我的程序所做的，除了整个改变条目是什么）。C脚本是

```
#include <R.h>
#include <stdio.h>
#include <gsl/gsl_linalg.h>

void simple( int *n, int *rows, int *cols)
{
  int r,c;
  int Cols = *cols; //This step, and the step below it are unnecessary except for readability
  int Rows = *rows;
  gsl_matrix * m = gsl_matrix_alloc (Rows, Cols); // Declares a gsl_matrix m of size Rows x Cols

  for( r = 0; r< Rows; r++)
    for (c=0; c< Cols; c++)
      gsl_matrix_set(m,r,c, *(n+sizeof(int)*(Cols*r+c))); // The array is organized by rows, sets matrix values

  for( r=0; r< Rows; r++)
    for (c=0; c < Cols; c++)
      *(n+sizeof(int)*(Cols*r+c))=gsl_matrix_get(m,r,c); // This return matrix values to the array (should be the same as before)
} 
```

我所做的是确保我的终端（Mac OS X）和 R 共享保存 simple.c 的同一目录。我编译上面的打字

```
R CMD SHLIB simple.c 
```

进入我的终端创建对应的simple.so文件，也保存到桌面。然后在 R i 可以做

```
dyn.load("simple.so") 
```

这是我收到错误的地方

```
Symbol not found: _gsl_matrix_alloc 
Expected in: flat namespace 
```

我对这个错误感到困惑，因为编译器似乎识别了 make 文件`< gsl/gsl_linalg.h >`，所以我认为它无法识别函数的原因是因为 R 没有连接到库，但我不知道如何解决这个问题。

此时，如果函数都可以识别，那么我可以在 R 中执行该函数

```
x=.C("simple", c(as.integer(c(1,4,7,2,5,8,3,6,9)),as.integer(3),as.integer(3))) 
```

如果我的函数动态加载正确，它将起作用，并且我将返回 X 正是我作为 .C 的第二个输入输入的内容

任何见解都会非常有帮助，无论是否有人成功地将 GSL 库链接到 Mac OS X 上的 R 都可以给我发消息或评论将不胜感激。我在帮助论坛上唯一能找到的是它“直截了当”或“相对简单”，但我不知道该怎么做！请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T07:07:35.397

您需要指定 gsl 函数的位置：

```
R CMD SHLIB simple.c -lgsl -lgslcblas 
```

# c# - 如何在 C# 中通过 Datatable 的单元格值获取行索引

> ID：11554841
> 
> 赞同：2
> 
> 时间：2012-07-19T06:07:00.513
> 
> 标签：c#, datatable

我有一个数据表，大约有 100 行。我想对单元格中的一个值的数据表进行选择查询，以获取单元格值匹配的所有行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T06:16:05.947

可能就像您想要的 DataTable.Select 方法一样简单...

[DataTable.Select 方法（字符串）](http://msdn.microsoft.com/en-us/library/det4aw50.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:18:28.493

```
var query = (from x in dataTable.Rows.OfType<DataRow>()
                         where x.Field<string>("columnName") == "someValue"
                         select x).ToList(); 
```

# python - Django 中的游标是否在打开的事务中运行？

> ID：11554844
> 
> 赞同：6
> 
> 时间：2012-07-19T06:07:25.123
> 
> 标签：python, sql, django, postgresql, python-db-api

我的 Django 应用程序正在使用一些自定义 SQL，我在这样的视图中执行这些 SQL：

```
db = router.db_for_write(model)
cursor = connections[db].cursor()
cursor.execute("INSERT INTO ....") 
```

由于我使用的是`TransactionMiddleware`，因此我的视图在事务中运行，但我不清楚获取这样的新游标是否会“转义”当前打开的事务，或者游标是否仍然是打开事务的一部分。我收到一些错误消息，让我相信游标正在事务中运行。

我希望能够使用游标在由`TransactionMiddleware`. 这可能吗？

如果重要的话，我正在运行带有 PostgreSQL 8.4 数据库的 Django 1.4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:42:56.150

我相信你需要一个单独的数据库连接来获得一个单独的、同时的事务。我也很确定 django 每个数据库只管理一个连接。但是你可以创建另一个。可能有一些很好的理由不这样做。复杂性浮现在脑海中。

我认为这样的事情会起作用：

```
from django.conf import settings
from django.db.utils import ConnectionHandler

def my_view(request):
    """Flirt with complexity by using two connections to db"""
    private_connections = ConnectionHandler(settings.DATABASES)
    db = router.db_for_write(model)
    new_conn = private_connections[db]
    new_conn.enter_transaction_management()
    new_conn.managed(True)
    new_cur = new_conn.cursor()
    new_cur.execute("INSERT INTO ...")
    new_conn.commit()
    new_conn.close() 
```

请注意，您不能使用`django.db.transaction`它，因为它在 中的全局连接实例上运行`django.db.connections`，但无论如何，这只是连接对象上事务管理方法的一个薄包装器。

我想真正的问题是**你为什么要这样做？！** Lakshman Prasad 的回答有什么问题？您可以随时提交/回滚，因此没有什么可以阻止您在单个视图中的不同事务中执行不同的任务。事务必须是并行的而不是连续的这一事实暗示了它们之间的某种逻辑联系，在我看来，这表明它们确实应该在同一个事务中。

另一方面，如果您只是试图模拟某种离线处理，其成功或失败根本与视图无关，请考虑设置消息队列并在单独的过程。 [Celery](http://celeryproject.org/)是一个很受欢迎的包。但是，如果响应时间不是主要问题，我仍然认为连续事务就足够了。

### 更新：

如果您希望数据库支持的缓存在自动提交模式下运行，同时仍然在单个（单独的）事务中运行业务逻辑，那么有一种 django 方式。您需要做的就是确保缓存发生*在*`commit_on_success`:

*   如果您只是使用缓存中间件，请确保它位于`TransactionMiddleware`.

*   如果您使用缓存视图装饰器，我敢猜测您可以禁用`TransactionMiddleware` （或将问题视图放在`autocommit`装饰器中）并在缓存装饰器中使用*装饰*器`commit_on_success`。它看起来很有趣，但我不知道为什么它不起作用：

     *```
    @transaction.autocommit
    @cache_page(500)
    @transaction.commit_on_success
    def my_view(request):
        "..." 
    ```* 
**   如果您使用模板缓存或进行更多涉及的手动缓存，您还可以禁用`TransactionMiddleware`（或将问题视图放入`autocommit`装饰器中）并`commit_on_success`用作上下文管理器，仅将您需要的代码放入托管事务中，保留视图的其余部分在自动提交中。

    ```
    @transaction.autocommit
    def my_view(request):
        data = cache.get(some_key)
        with transaction.commit_on_success():
            context = do_some_processing(data)
        cache.set(some_key, context['data'])
        return render('template/with/cache/blocks.html', context=context) 
    ```* 

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T06:53:21.627

如果有要手动管理事务的视图，则应使用该视图中的装饰器来手动提交。

从[文档](https://docs.djangoproject.com/en/dev/topics/db/transactions/?from=olddocs#django.db.transaction.commit_manually)中。

```
from django.db import transaction

@transaction.commit_manually
def viewfunc(request):
    ...
    # You can commit/rollback however and whenever you want
    transaction.commit()
    ...

    # But you've got to remember to do it yourself!
    try:
        ...
    except:
        transaction.rollback()
    else:
        transaction.commit()

@transaction.commit_manually(using="my_other_database")
def viewfunc2(request):
    .... 
```

是的，导入事务游标只提供事务的游标，并不会创建新事务。*

# java - .zip 文件在 java 中发送电子邮件时被转换为 .bin 文件

> ID：11554847
> 
> 赞同：1
> 
> 时间：2012-07-19T06:07:31.893
> 
> 标签：java, email, smtp

我正在尝试使用以下带有`zip file`附件的片段发送邮件，我可以发送电子邮件，但作为 zip 文件的附件被转换为某个`.bin`文件。我需要设置一些属性吗？为什么 zip 文件被转换为 .bin 文件？

```
Properties props = new Properties();
            props.setProperty("mail.transport.protocol", "smtp");
            props.setProperty("mail.host", "smtp.gmail.com");

            Session mailSession = Session.getDefaultInstance(props, null);
            mailSession.setDebug(true);
            Transport transport = mailSession.getTransport();

            MimeMessage message = new MimeMessage(mailSession);
            message.setSubject("HTML  mail with images");
            message.setFrom(new InternetAddress("b@gmail.com"));
            message.addRecipient(Message.RecipientType.TO,
                 new InternetAddress("a@gmail.com"));
            MimeMultipart multipart = new MimeMultipart("related");

            // first part  (the html)
            BodyPart messageBodyPart = new MimeBodyPart();
            String htmlText = "PFA Query Output.";
            messageBodyPart.setContent(htmlText, "text/html");

            // add it
            multipart.addBodyPart(messageBodyPart);

            // second part (the image)
            messageBodyPart = new MimeBodyPart();
            DataSource fds = new FileDataSource(zipFilePath);
            messageBodyPart.setDataHandler(new DataHandler(fds));
            messageBodyPart.setHeader("Content-ID","<image>");

            // add it
            multipart.addBodyPart(messageBodyPart);

            // put everything together
            message.setContent(multipart);

            transport.connect();
            transport.sendMessage(message,
                message.getRecipients(Message.RecipientType.TO));
            transport.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:17:32.787

`messageBodyPart.setHeader("Content-ID","<image>")`如果您不发送图像，请删除。

添加以下语句设置附件文件名，

```
 messageBodyPart.setFileName(zipFilePath); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:15:52.623

代替

```
 DataSource fds = new FileDataSource(zipFilePath); 
```

尝试

```
 DataSource fds = new FileDataSource(new File(zipFilePath)); 
```

也尝试删除，

```
 messageBodyPart.setHeader("Content-ID","<image>"); 
```

# static - Ninject 的 Singleton 范围与静态字段相似吗？

> ID：11554850
> 
> 赞同：0
> 
> 时间：2012-07-19T06:07:38.047
> 
> 标签：static, ninject

过去，我使用原始的反射类并设置为静态字段，如下

```
public class ServiceHelper{
    private static IFoo _iFoo=null;
    public static IFoo Foo{
        get{
            if(_iFoo==null)
            {
              _iFoo=Activator.CreateInstance("assembly") as IFoo;

             }
             return _iFoo;
           }
    }

} 
```

现在我们正在使用 Ninject

```
kernel.Bind(x => x.FromAssembliesInPath("assembilypath")
.SelectAllClasses()
.BindDefaultInterface().Configure(binding => binding.InSingletonScope())); 
```

问题：

1.  这两种方法是一样的吗？

2.  Ninject 只会加载一次程序集吗？

3.  如果更改程序集，是否可以检测到 ninject 并重新加载新程序集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:18:02.507

1.  是的，会有一个共享的 Foo 实例
2.  .NET Framework 将最多加载每个程序集一次（每个 AppDomain）。
3.  不 - 您将不得不重新启动。

# css - Firefox 无法正确呈现菜单图像

> ID：11554853
> 
> 赞同：0
> 
> 时间：2012-07-19T06:07:48.470
> 
> 标签：css, firefox, menu

大家好 - 我想知道是否有人可以对我遇到的问题提供任何见解，我无法理解。最初这是 Chrome 的一个问题，但自从修复后，它现在是 Firefox 的问题。

查看以下左侧菜单图像。当它渲染 Firefox 时，“go”按钮出于某种原因悬停在下方。这在其他浏览器中不会发生。

火狐菜单：http: [//imageshack.us/photo/my-images/254/20212630.jpg/](http://imageshack.us/photo/my-images/254/20212630.jpg/)

对于其他浏览器：[http ://cit.edu.au/future](http://cit.edu.au/future)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:46:52.863

现在定义你的 CSS

```
#quickAccess .askUs form, #site-search {
position:relative;
}

#quickAccess .accessBox input.formSearch{
right:0;
} 
```

# delphi - 为什么编译器警告变量可能未初始化？

> ID：11554857
> 
> 赞同：4
> 
> 时间：2012-07-19T06:08:25.363
> 
> 标签：delphi, delphi-2010

我收到一个我不明白的编译器警告：

```
procedure Test;
var
  Var1: Integer;
begin
    while True do
    begin
        try
            if System.Random > 0.5 then
            begin
                ShowMessage('Skipping');
                continue; // If I remove this line, the warning goes away
            end;
            Var1:=6;
        except on
            E:Exception do
            begin
                ShowMessage('Error');
                raise;
            end;
        end;
        ShowMessage(IntToStr(Var1)); // Compiler warning on this line
    end;
end; 
```

当我在 Delphi 2010 中编译它时，我得到：

> [DCC 警告] OnlineClaimManagerMainU.pas(554)：W1036 变量“Var1”可能尚未初始化

如果我取消对“继续”的调用，警告就会消失。

此外，如果我删除 try/except 子句（并离开 continue），警告就会消失。

在没有初始化 Var1 的情况下，执行将如何到达有问题的行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T06:13:56.643

`Var1`将始终在使用之前进行初始化。`try`编译器会因-处理而感到困惑`except`：您的代码太复杂，编译器无法实际确定`Var1`始终初始化的代码。它看到之前可能有一个已处理的异常`Var1:=6;`，这将导致`Var1`未初始化，但它没有看到该异常总是会被重新引发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:04:57.143

您应该`ShowMessage(IntToStr(Var1));`进入 try except 块。然后编译器应该很清楚，它`Var1`已经初始化并且看起来更像是干净的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T13:20:04.103

这是一个非常好的警告。它告诉您没有为可能在代码中其他地方使用的变量分配任何值。警告还告诉如果它被使用，那么分配给它的值可能不是你所期望的。

# clojure - 如何在 clojure 中定义类型列表？

> ID：11554858
> 
> 赞同：2
> 
> 时间：2012-07-19T06:08:25.770
> 
> 标签：clojure

我想有一些东西来定义我的 UDT 所以以下

```
(defrecord Foo [a b]) 
```

现在我可以将这种类型的实例声明为

```
(def f (Foo. 10 20)) 
```

但是我如何在clojure中有一个类似java的数组。

我想拥有`new ArrayList<Foo>()`（或接近的东西），这样我就可以反复调用 Add 方法来将新的 Foo 添加到列表中。

似乎找不到办法做到这一点。

编辑：

我需要告诉 clojure 将我的东西映射到 Foo 的键。所以，我需要一种方法来说明我的 foo 数据，然后用它制作一个 Foo 类型的 ArrayList

```
(defrecord Foo [a b c])
(def foo-data
  [ "foo1"   1 8
    "foo2"   2 7
    "foo3"   3 6
    "foo4"   4 5]) 
```

我可以通过doseq 访问这些，但是我需要创建一个ArrayList，然后使用它来进行一些操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T09:06:22.193

我建议使用自动创建构造函数的内置 Clojure 功能：

```
 (defrecord Foo [a b])

 (->Foo 1 2)   ;; auto-generated constructor
 => #user.Foo{:a 1, :b 2} 
```

然后您可以使用标准的 Clojure 高阶函数来构造`Foo`您喜欢的任何 s 集合，例如

```
(def foo-data [["Bob" 2] 
               ["Fred" 4] 
               ["Len" 6]])

(into [] (map (partial apply ->Foo) foo-data))
=> (A vector of Foos with the provided data) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T06:11:36.853

它将很简单：

```
user=> (import 'java.util.ArrayList)
user=> (def data (ArrayList.)) 
#'user/data
user=> (.add data (Foo. 10 20)) 
```

我建议在这种情况下使用像向量这样的 clojure 数据结构。

向量示例：

```
user=> (def data (atom []))
#'user/data
user=> (swap! data conj (Foo. 10 20)) ;Add item to data vector 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T11:57:38.230

如果您不需要立即将 ArrayList 传递回强类型，最好在 Clojure 中操作您的数据结构。[我发现http://clojure.org/cheatsheet](http://clojure.org/cheatsheet)的“Seq In, Seq Out”部分是一个方便的参考。如果您喜欢通过示例学习，[http](http://www.4clojure.com) ://www.4clojure.com 非常适合学习数据结构转换。

# c++ - 将 int64_t 转换为 int 时如何让 g++ 发出警告？

> ID：11554863
> 
> 赞同：3
> 
> 时间：2012-07-19T06:08:50.387
> 
> 标签：c++, linux, x86, g++

我使用这个命令来编译下面的代码：

```
g++  -ansi -pedantic -Wall -Wextra myfile.cpp 
```

我想得到一个警告*int64_t 被转换成 int*。但是根本没有任何警告。我怎样才能做到这一点？

我的 g++ 版本是 4.6.1。

```
//file:myfile.cpp
#include <iostream>
using namespace std;
int main()
{
    int64_t yy = 10;
    int size = yy;
    cout << size << endl;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T06:12:06.643

尝试-Wconversion；由于此警告往往会产生大量噪音，因此它不是 -Wall 的一部分

# java - Wifi 扫描结果给了我奇怪的结果

> ID：11554864
> 
> 赞同：2
> 
> 时间：2012-07-19T06:08:53.710
> 
> 标签：java, android, timer

我正在尝试保存各种 wifi 扫描的 BSSID 和信号强度。但是，我只关心最近的四次扫描。当它扫描四次时它工作正常，但奇怪的事情开始发生，就像每次扫描的大小（结果的数量）在大约第 6 次扫描后是相同的。这段代码有问题吗？我将结果存储在一个集合列表中（尽管在处理数据时我只保留四个最新的集合）

```
 public class MainActivity extends Activity {

    List<HashSet<Pair>> addresses = new ArrayList<HashSet<Pair>>();
    List <ScanResults> results;

    ...
    @Override
    public void onCreate(Bundle savedInstanceState) {
    //This whole part of the code is run once every ten seconds through use of a timer
    mainWifi.startScan();
    results = mainWifi.getScanResults();

    int entry = addresses.size();

        if (entry == 4) { // already has 4 addresses
        addresses.remove(0); // remove the
                                                    // oldest
                                                    // set
                            entry = 3;
                        }
    addresses.add(entry, new HashSet<Pair>());

    for (int i = 0; i < results.size(); i++) {

        addresses.get(entry).add(new Pair(results.get(i).BSSID,results.get(i).level));
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:31:02.993

**更新**

我建议等待[WifiManager.startScan()](http://developer.android.com/reference/android/net/wifi/WifiManager.html#startScan%28%29)完成存储最新 Wifi 列表时广播的[SCAN_RESULTS_AVAILABLE_ACTION](http://developer.android.com/reference/android/net/wifi/WifiManager.html#SCAN_RESULTS_AVAILABLE_ACTION) Intent 。

我还建议使用 for-each 循环并创建对最新列表的引用，而不是使用 get()。在您的活动中：

```
List<List<Pair<String, Integer>>> addresses = new ArrayList<List<Pair<String, Integer>>>();
List<Pair<String, Integer>> list;
...

public void newWifiResults() {
    list = new ArrayList<Pair<String, Integer>>();
    if(addresses.size() > 3) {
        addresses.remove(0);

    results = mainWifi.getScanResults();
    for(ScanResult result : results) 
        list.add(new Pair<String, Integer>(result.BSSID, result.level));

    addresses.add(list);
    // call mainWifi.startScan() again after a delay
} 
```

`SCAN_RESULTS_AVAILABLE_ACTION`您在 BroadcastReceiver 中捕获：

```
public class WifiReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        // We are only listening for one type of intent, no verifying necessary 
        newWifiResults();
    }
} 
```

如果你把它作为一个嵌套/子类也放在你的活动中，onReceive() 将很容易调用 newWifiActivity()。

最后，您需要在 Activity 中创建对接收器的引用：

```
private WifiReceiver wifiReceiver = new WifiReceiver(); 
```

在 onCreate() 或 onResume() 中，注册接收者：

```
registerReceiver(wifiReceiver, new IntentFilter(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION)); 
```

并在匹配方法（onDestroy() 或 onPause()）中注销您的接收器：

```
unregisterReceiver(wifiReceiver); 
```

这涉及更多，但是您的代码仅在从 startScan() 返回新结果集时才会运行。

# java - 在 Android 屏幕的上半部分使用 Canvas 绘制一个圆圈

> ID：11554866
> 
> 赞同：1
> 
> 时间：2012-07-19T06:08:57.440
> 
> 标签：java, android, android-canvas

这是 main.xml 文件，它将屏幕分成两半。在下半部分，它有纬度和经度标签，并且对应于每个标签，它有一个文本框，将在文本框中显示当前的纬度和经度值。

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="match_parent" 
    android:layout_height="match_parent" 
    android:orientation="vertical" 
    android:background="@android:color/black" > 

    <LinearLayout 
        android:layout_width="match_parent" 
        android:layout_height="match_parent" 
        android:layout_weight="1" 
        android:orientation="vertical" > 

        <!-- currently empty --> 

    </LinearLayout> 

    <LinearLayout 
        android:layout_width="match_parent" 
        android:layout_height="match_parent" 
        android:layout_weight="1" 
        android:orientation="vertical" > 

        <LinearLayout 
            android:layout_width="match_parent" 
            android:layout_height="match_parent" 
            android:layout_weight="1" 
            android:orientation="horizontal" > 

            <!-- Latitude Label --> 

            <TextView 
                android:layout_width="match_parent" 
                android:layout_height="wrap_content" 
                android:layout_weight="1" 
                android:text="Latitude" 
                android:textColor="#FFFFFF" /> 

            <EditText 
                android:id = "@+id/lat1"
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content" 
                android:layout_marginBottom="20dip" 
                android:layout_marginTop="5dip" 
                android:layout_weight="0.35" 
                android:singleLine="true" 
                android:textColor="#FFFFFF"
                /> 
        </LinearLayout> 

        <LinearLayout 
            android:layout_width="match_parent" 
            android:layout_height="match_parent" 
            android:layout_weight="1" 
            android:orientation="horizontal" > 

            <!-- Longitude Label --> 

            <TextView 
                android:layout_width="match_parent" 
                android:layout_height="wrap_content" 
                android:layout_weight="1" 
                android:text="Longitude" 
                android:textColor="#FFFFFF" /> 

            <EditText 
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content" 
                android:layout_marginTop="5dip" 
                android:layout_weight="0.35" 
                android:singleLine="true" 
                android:textColor="#FFFFFF"
                android:id = "@+id/lat2" /> 
        </LinearLayout> 
    </LinearLayout> 

</LinearLayout> 
```

但我的问题是 - 我如何在上半部分画一个圆圈。下面是我在绘画中创建的示例。我需要在上半部分使用画布绘制一个圆圈。下半部分对我来说很好。 ![在此处输入图像描述](../Images/1975dd29be3758e68dc153a45c9a32f4.png)

我创建了另一个用于在画布上绘制圆圈的类文件-

```
public class DrawCanvasCircle extends View{
    public DrawCanvasCircle(Context mContext) {
        super(mContext);
    }
    protected void onDraw(Canvas canvas) { 
        super.onDraw(canvas); 
        Paint p = new Paint(); 
        p.setColor(Color.WHITE); 
        DashPathEffect dashPath = new DashPathEffect(new float[]{5,5}, (float)1.0); 

        p.setPathEffect(dashPath); 
        p.setStyle(Style.STROKE); 

        for (int i = 0; i < 7; i ++) { 
            canvas.drawCircle(100, 100, 50+(i*10), p); 
        } 

        invalidate(); 
    } 

} 
```

下面是主类，我试图在其中添加我在主类中创建的画布。

```
 @Override
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ll = (LinearLayout) findViewById(R.id.lc);
        DrawCanvasCircle pcc = new DrawCanvasCircle (this);
        Bitmap result = Bitmap.createBitmap(25, 25, Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(result);
        pcc.draw(canvas);
        pcc.setLayoutParams(new LayoutParams(1000, 1000));
        ll.addView(pcc);
} 
```

但它没有正确显示。我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:08:07.513

更改您的 customView 类，例如

```
public class DrawCanvasCircle extends View
{
    Context context;

    public DrawCanvasCircle(Context mContext)
    {
        super(mContext);
        context = mContext;
    }

    protected void onDraw(Canvas canvas)
    {
        super.onDraw(canvas);

        Paint paint = new Paint();
        paint.setColor(0xFF0000);
        paint.setAlpha(255);
        paint.setStrokeWidth(2.0f);
        paint.setStyle(Paint.Style.STROKE);
        WindowManager mWinMgr = (WindowManager)context.getSystemService(Context.WINDOW_SERVICE);
        int displayWidth = mWinMgr.getDefaultDisplay().getWidth();
        int displayHeight = mWinMgr.getDefaultDisplay().getHeight();
        int circleRadius = 100;
        canvas.drawCircle(displayWidth/2, displayHeight/4, circleRadius, paint);
        invalidate();
    }

} 
```

并将下面的代码行写入您的`onCreate`方法

```
LinearLayout ll = (LinearLayout) findViewById(R.id.lc);
DrawCanvasCircle pcc = new DrawCanvasCircle (this);
ll.addView(pcc); 
```

# javascript - KendoUI Grid 服务器分页

> ID：11554868
> 
> 赞同：5
> 
> 时间：2012-07-19T06:09:00.457
> 
> 标签：javascript, grid, knockout.js, kendo-ui

我正在使用 KendoUI Grid 在启用了 KnockoutJS MVVM 的应用程序中显示我的数据。由于 MVVM 是客户端的体系结构，我正在维护一个 knockoutjs 可观察数组并将数据从服务器加载到该数组。

```
self.loadForGrid = function() {
    $.ajax({
        url: "api/matchingservicewebapi/GetAllMatchItemForClient/1",
        type: 'GET',
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function (data) {
            console.log(data);
            $.each(data, function (i, obj) {
                self.users.push(self.items.push({ BirthDate: obj.BDate, Ref: obj.Ref, Amount: obj.Amount, Account: obj.Account, MatchItem_Id: obj.MatchItem_Id }));

            });
            window.alert('User(s) loaded successfully');
        },
        statusCode: {
            401: function (jqXHR, textStatus, errorThrown) {
                alert('Error loading users2');
            }
        }
    });
}; 
```

这工作正常。但我想为我的网格实现分页。我可以像这样在客户端做到这一点。这是我的视图模型代码。

```
self.items = ko.observableArray([]);

ko.bindingHandlers.kendoGrid.options = {
    groupable: true,
    scrollable: true,
    sortable: true,
    pageable: {
        pageSizes: [5, 10, 15]
    }
}; 
```

这是我在 HTML 文件中的绑定（我使用了[Knockout-Kendo.js](http://rniemeyer.github.com/knockout-kendo/web/Grid.html)）。

```
<div data-bind="kendoGrid: items"> </div> 
```

但我想要的是启用服务器分页。这意味着当我转到下一页（当我转到第 2 页时）时，我希望将数据（比如说第 2 页的数据）再次加载到我的 knockoutjs 可观察数组中。我怎样才能做到这一点？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-13T17:54:50.560

无需将 kendoGrid 绑定到项目，您需要将其绑定到 kendo.data.DataSource 并指定传输。

参考：[http ://docs.telerik.com/kendo-ui/api/javascript/data/datasource](http://docs.telerik.com/kendo-ui/api/javascript/data/datasource)

例如：

为您的加载方法添加分页和“成功”参数。这将直接来自 DataSource 上的 read 方法。

选项：您可以使用可观察数组或其内容调用成功方法。我在使用 observable 数组时遇到了行内编辑异常，我发现通过使用 observable 数组的内容，网格更加稳定。

```
self.loadForGrid = function(pageIndex, success) {
    /* Consider adding an argument for page size to the api call. */
    $.ajax({
        url: "api/matchingservicewebapi/GetAllMatchItemForClient/" + pageIndex,
        type: 'GET',
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function (data) {
            console.log(data);
            $.each(data, function (i, obj) {
                self.users.push(self.items.push({ BirthDate: obj.BDate, Ref: obj.Ref, Amount: obj.Amount, Account: obj.Account, MatchItem_Id: obj.MatchItem_Id }));

            });

            /* Invoke the dataSource.read success method. */
            success(self.items());

            window.alert('User(s) loaded successfully');
        },
        statusCode: {
            401: function (jqXHR, textStatus, errorThrown) {
                alert('Error loading users2');
            }
        }
    });
}; 
```

将您的数据源创建为实质上围绕您的读取的包装器。

```
self.gridDataSource = new kendo.data.DataSource({
    transport: {
        read: function(options) { self.loadForGrid(options.data.page, options.success); }
    },
    pageSize: 20,  // options.data.pageSize
    page: 1, // options.data.page
    serverPaging: true
}); 
```

绑定到您的数据源。

```
<div data-bind="kendoGrid: gridDataSource"> </div> 
```

之后，如果您需要以编程方式更改页面，可以调用 dataSource 上的 page 方法：

```
self.gridDataSource.page(4); 
```

# gwt - 如何为 GWT 中的小部件子兄弟添加样式

> ID：11554874
> 
> 赞同：1
> 
> 时间：2012-07-19T06:09:35.257
> 
> 标签：gwt, twitter-bootstrap

如何为 GWT 中的小部件子兄弟添加样式

如果假设对象 ObjParent 的 html 是这样的

```
<li>
<a class="" href="javascript:;">
<i></i>
<span class=""> Some Text </span>
</a>
</li> 
```

考虑上面的代码是由一个小部件 ObjParent 构造的

只有 ObjParent，我如何设置跨度一些文本的样式

我试过`ObjParent.getWidget(0).getElement().getChild(0).addStyleName("style1");`

但它显示错误，因为 addStyleName 无法添加到节点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:43:38.603

该方法`#addStyleName(String)`仅适用于小部件。要在 Element 上设置类，请使用`#addClassName(String)`. 您可以直接将节点转换为元素：

```
import com.google.gwt.user.client.Element;
...
Node node = objParent.getWidget(0).getElement().getChild(0);
Element element = (Element) node;
element.addClassName("style1"); 
```

# ruby-on-rails - Rails 3.2.6 字体路由错误

> ID：11554880
> 
> 赞同：2
> 
> 时间：2012-07-19T06:09:58.733
> 
> 标签：ruby-on-rails, exception, fonts, routing, asset-pipeline

我有一个使用 web-app-theme gem 的基于 Rails 3.2.6 的应用程序。在生产中部署后，我在`/var/log/apache2/error.log`.

```
[Wed Jul 18 23:00:14 2012] [error] [client 50.53.58.188] Premature end of script headers: fonts, referer: https://xxx.xxx.xx.xxx
[ pid=8920 thr=139857209571072 file=ext/apache2/Hooks.cpp:819 time=2012-07-18 23:00:14.743 ]: The backend application (process 9474) did not send a valid HTTP response; instead, it sent nothing at all. It is possible that it has crashed; please check whether there are crashing bugs in this application.
[ pid=9474 thr=9488700 file=utils.rb:176 time=2012-07-18 23:00:14.744 ]: *** Exception ActionController::RoutingError in application (No route matches [GET] "/assets/fonts/museosans_500-webfont.svg") (process 9474, thread #<Thread:0x00000001219278>):
    from /usr/lib/ruby/gems/1.9.1/gems/actionpack-3.1.3/lib/action_dispatch/middleware/show_exceptions.rb:53:in `call'
    from /usr/lib/ruby/gems/1.9.1/gems/railties-3.1.3/lib/rails/rack/logger.rb:13:in `call'
    from /usr/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/methodoverride.rb:24:in `call'
    from /usr/lib/ruby/gems/1.9.1/gems/rack-1.3.6/lib/rack/runtime.rb:17:in `call'
    from /usr/lib/ruby/gems/1.9.1/gems/activesupport-3.1.3/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
..... 
```

我已将提到的文件`museosans_500-webfont.svg`放在`app/assets/fonts/`目录中。但是为什么我还是这个错误。对于其他资产，我也看到类似的错误，例如`/assets/fonts/museosans_500-webfont.ttf`等。

非常感谢任何反馈。谢谢。
——阿塔朗普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-06T17:07:43.953

我在集成 Katex 库时遇到了同样的问题。

问题是 Rails 的 Asset Pipeline 将资产编译到目录中，`public/assets`而不保留`fonts`or目录。`images``javascript`

所以当你在寻找的时候`/assets/fonts/museosans_500-webfont.svg`，它并不存在，那个字体已经被编译成`/assets/museosans_500-webfont.svg`.

要解决此问题，您有两种选择：

1.  **更新 CSS 或 JS 中的路径：**

    `/assets/fonts/museosans_500-webfont.svg`

    变成

    `/assets/museosans_500-webfont.svg`

2.  **将字体放在`fonts`子目录中：**

    *如果您不想（或不能）更新 CSS 或 JS（例如，它是一个缩小的第三方库），那么您可以使用以下方法来确保存在一个`public/assets/fonts`包含所有字体的目录。*

    只需将您的字体放在以下路径中：

    `/assets/fonts/fonts/museosans_500-webfont.svg`

    现在您的`public/assets`目录将包含一个`fonts`目录，并且您的 GET 请求会很高兴。

*有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/29475775/293280)。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T14:14:54.870

您的 CSS / HTML 中的 url 似乎是错误的：

`/assets/fonts/museosans_500-webfont.svg`

您应该将其更改为：

`/assets/museosans_500-webfont.svg`

但是**将**文件保留在`app/assets/fonts`目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:51:53.200

尝试将字体目录添加到 environment.rb 中的资产路径：

```
config.assets.enabled = true
config.assets.paths << "#{Rails.root}/app/assets/fonts" 
```

# jquery - ui-hidden-accessible 和 ui-hide-label 之间的区别

> ID：11554883
> 
> 赞同：0
> 
> 时间：2012-07-19T06:10:14.427
> 
> 标签：jquery, jquery-ui, jquery-mobile

我是 jquery 的新手。我对上述问题有疑问。即使在他们的官方文件中也没有被清除。那就是他们没有提供有关可访问和隐藏标签的附加信息。任何其他建议[资源链接](http://jquerymobile.com/test/docs/forms/docs-forms.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T15:57:04.690

我看到的一个主要区别是 ui-hide-label 应用于其中存在标签以隐藏所有标签的容器元素。通过将 ui-hidden-accessible 应用于单个标签，您可以控制要隐藏的标签。文件也是这么说的。两者都使标签对辅助技术可见。

# mysql - 使用 mysql 我需要将更改的记录从一个表更新到另一个表

> ID：11554884
> 
> 赞同：0
> 
> 时间：2012-07-19T06:10:14.897
> 
> 标签：mysql

我有两个表“主要”和“导入”

导入有字段 id, a, b, c, d

Main 有字段 id, a, b, c, d, x, y, z

Main 是我的应用程序使用的表，Import 是我转储从 Web 服务中提取的数据的表。

对于已存在于 Main 中的 Import 中的每个条目（按 id），如果 a、b、c 或 d 已更改而不更改 x、y 或 z（导入后添加的数据），我需要更新 Main

我目前有这样的东西

```
UPDATE Main, Import
Main.a = Import.a, 
Main.b = Import.b, 
Main.c = Import.c, 
Main.d = Import.d, 
WHERE 
Main.id = Import.id AND (
Main.a != Import.a OR 
Main.b != Import.b OR 
Main.c != Import.c OR 
Main.d != Import.d) 
```

但想知道是否有更优雅的方式来做到这一点。

我的实际数据结构如上，但有更多字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:19:48.160

尝试使用单个表并使用 cron 作业通过 Web 服务提取您的数据，同时将为您通过 Web 服务获得的数据返回 JSON 和 maintian 数组，然后如果任何条目 oid 更改，请尝试更新该特定字段... .

# cordova - phonegap 的 e-pub 阅读器

> ID：11554885
> 
> 赞同：1
> 
> 时间：2012-07-19T06:10:16.427
> 
> 标签：cordova, epub

我正在尝试开发一个 phonegap 应用程序来读取 ePub 文件。我不知道如何读取这种文件格式。请通过提供链接帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T04:57:21.363

调查 epub-google 告诉我它是开放电子书格式的一部分。 [http://en.wikipedia.org/wiki/Open_eBook](http://en.wikipedia.org/wiki/Open_eBook)

使用 Phonegap API，您可以读取文件 - [http://docs.phonegap.com/en/1.9.0/cordova_file_file.md.html#File](http://docs.phonegap.com/en/1.9.0/cordova_file_file.md.html#File)

所以剩下的就看你了。研究文件的存储方式，然后练习如何使用 API 读取文件。使用phonegap阅读它的方式似乎并不多。

我会说这将是相当具有挑战性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T15:33:35.333

另请查看有关 epub 格式的其他 SO 帖子：[阅读 ePub 格式](https://stackoverflow.com/questions/1388467/reading-epub-format?rq=1)。请注意，虽然给出的一些建议是针对 iPhone 开发/objective-C 的，但也有很多关于 epub 格式本身的信息。

# oracle - oracle如何刷新物化视图

> ID：11554886
> 
> 赞同：63
> 
> 时间：2012-07-19T06:10:15.397
> 
> 标签：oracle, materialized-views

我正在尝试使用以下方法刷新物化视图：

```
DBMS_MVIEW.REFRESH('v_materialized_foo_tbl') 
```

但它抛出了无效的 sql 语句。

然后我创建了一个这样的存储过程：

```
CREATE OR REPLACE 
PROCEDURE MAT_VIEW_FOO_TBL 
IS
BEGIN
   DBMS_MVIEW.REFRESH('v_materialized_foo_tbl')
END MAT_VIEW_FOO_TBL IS; 
```

此过程已成功创建，但是当我调用此过程时

```
MAT_VIEW_FOO_TBL; 
```

它再次抛出错误。

请为此问题提出解决方案。

谢谢， 斯里尼瓦斯

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-01-22T07:26:32.237

运行此脚本以刷新物化视图中的数据：

```
BEGIN
DBMS_SNAPSHOT.REFRESH('Name here');
END; 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-12-19T04:50:56.713

试试这个：

```
DBMS_SNAPSHOT.REFRESH( 'v_materialized_foo_tbl','f'); 
```

**第一个**参数是名称，`mat_view`第二**个**定义类型`refresh`。**f**表示快速刷新。但请记住这一点，它将**覆盖**任何其他刷新时间选项。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-10-06T22:57:03.637

游戏有点晚了，但我找到了一种方法可以使这个问题中的原始语法起作用（我在 Oracle 11g 上）

** 首先切换到您的 MV 架构 **

```
EXECUTE DBMS_MVIEW.REFRESH(LIST=>'MV_MY_VIEW'); 
```

或者，您可以添加一些选项：

```
EXECUTE DBMS_MVIEW.REFRESH(LIST=>'MV_MY_VIEW',PARALLELISM=>4); 
```

这实际上对我有用，并且添加并行选项将我的执行速度提高了大约 2.5 倍。

此处的更多信息：[如何并行刷新物化视图](http://www.doug.org/newsletter/march/mv_refresh_parallel.pdf)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-01-20T07:39:22.863

您可以按如下方式完全刷新物化视图：

```
EXECUTE  
DBMS_SNAPSHOT.REFRESH('Materialized_VIEW_OWNER_NAME.Materialized_VIEW_NAME','COMPLETE'); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-09-02T23:21:51.137

最好的选择是使用“？” 方法的论据。这样 DBMS_MVIEW 会选择最好的刷新方式，所以它会为你做最快的刷新。，并且如果您在实际需要完全刷新时尝试类似 method=>'f' 之类的方法，则不会失败。:-)

从 SQL*Plus 提示符：

```
EXEC DBMS_MVIEW.REFRESH('my_schema.my_mview', method => '?'); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-07-14T14:17:36.293

如果您使用 SQL Developer，则必须将 dbms_view 设为小写。其余的对我来说编译得很好，尽管我还没有从代码中调用这个过程。

```
CREATE OR REPLACE PROCEDURE "MAT_VIEW_FOO_TBL" AS 
BEGIN
  dbms_mview.refresh('v_materialized_foo_tbl');
END; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-04-11T01:10:05.047

尝试使用以下语法：

常用语法：

```
begin
dbms_mview.refresh('mview_name');
end; 
```

例子：

```
begin
dbms_mview.refresh('inv_trans');
end; 
```

希望以上有所帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-02-14T09:45:13.660

EXECUTE dbms_mview.refresh('视图名称','cf');

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-02-09T06:51:43.293

当我们必须使用内置程序或包时，我们必须使用“EXECUTE”命令，然后它就会起作用。

前任：

执行 exec DBMS_MVIEW.REFRESH('v_materialized_foo_tbl');

# c# - 用于获取 VM 性能指标的 powershell 命令

> ID：11554887
> 
> 赞同：0
> 
> 时间：2012-07-19T06:10:29.840
> 
> 标签：c#, asp.net, azure, cloud

我正在尝试获取虚拟机性能的指标，例如 CPU 利用率、磁盘读取吞吐量等，在天蓝色中我想通过调用 powershell 命令以编程方式获得它，但我没有根据新版本获得 powershell 命令天蓝色，即 IaaS。请帮助我..等待答复....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:37:46.203

我认为此类操作没有 PowerShell。特别是对于 IaaS。PaaS 故事是您配置要遵循[的监控指标，然后从表存储中读取它们（](http://msdn.microsoft.com/en-us/library/windowsazure/gg433052.aspx)[此处有用参考](http://msdn.microsoft.com/en-us/library/windowsazure/gg433048.aspx)）。这只是 PaaS 世界的优势之一。现有的 PowerShell cmdLets 将在一定程度上帮助您 - 即下载 perf。计数器数据。就是这样。

在 IaaS 中，您必须处理自己的监控和跟踪机制。

# jquery - span 覆盖：不应该在 IE 中触发点击

> ID：11554888
> 
> 赞同：1
> 
> 时间：2012-07-19T06:10:35.340
> 
> 标签：jquery, html, css, internet-explorer

我有以下代码。当您单击按钮时，将触发跨度覆盖上的单击处理程序，然后禁用该按钮。有效地切换按钮状态。在 Chrome 和 FireFox 中，这是有效的，按钮被禁用，点击它不会触发跨度覆盖上的点击处理程序。但是，在 IE 中，该按钮被禁用，但您可以单击它，它将触发跨度覆盖上的单击处理程序。

有没有办法在保持类似形式的同时解决这个问题？我无法删除跨度覆盖上的处理程序，因为我找不到在需要时重新附加它的方法（覆盖/按钮是动态生成的），并且我需要额外 id 参数的覆盖。有任何想法吗？

```
 <span id="id_1" style="display:inline-block">
       <button id="id_2">Click Me</button>
    </span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:35:48.307

一个小问题，内联样式也正在生成？

也许您可以尝试将跨度设置为 z-index 为 1，按钮设置为绝对位置，并为其设置 z-index 10（或更多）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:41:29.157

您可以在运行代码之前检查按钮的 disabled-property：

```
$('#id_1')
 .click(function(e)
        {
         if(e.target.disabled){return;}
         /* code to execute when button is enabled*/
        }); 
```

# javascript - 从 javascript 打开 Word 并放在前面

> ID：11554891
> 
> 赞同：2
> 
> 时间：2012-07-19T06:11:03.930
> 
> 标签：javascript, ms-word, activexobject

我正在使用以下代码从 javascript 打开 Word 文档：

```
 function openWord(file) {
    try {
        var objword = new ActiveXObject("Word.Application");
    } catch (e) {
        alert(e + 'Cannot open Word');
    }

    if (objword != null) {
        objword.Visible = true;
        objword.Documents.Open(file);
    }
} 
```

这很好用，唯一的问题是 Word 应用程序在打开时不会出现在前面，而是在浏览器后面打开。有没有办法强制 Word 在任何其他窗口之上打开？还是在打开时将其带到前面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T07:16:17.100

不完全完美，但这对我有用：

```
$(document).ready(function() {
  $("#open").click(function() {
    openWord('https://www.google.com.mx/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0ahUKEwjp7ajpqoTLAhUUwGMKHc3UB5AQFggbMAA&url=http%3A%2F%2Fblog.espol.edu.ec%2Fgfflores%2Ffiles%2F2012%2F02%2FC%25C3%25B3digo-de-Hola-Mundo-para-Simulador-BlackBerry.docx&usg=AFQjCNHoFTUJxMonRG1lpr44K9eZjuxEvA&sig2=9bgOMw8yYzWhFXz0q_JbKg');
  });
});

function openWord(file) {
  try {
    var objword = new ActiveXObject("Word.Application");
  } catch (e) {
    alert(e + 'Error Word');
  }

  if (objword != null) {
    objword.Visible = true;
    objword.Documents.Open(file);
    objword.WindowState = 2;
    objword.WindowState = 1;
  }
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<button id="open">Try</button>
```

它仍然在后台打开 Word，但随后强制最小化 - 最大化并将其置于前面。

# python - 命名仅包含一个应用程序的 django 项目的好方法

> ID：11554892
> 
> 赞同：16
> 
> 时间：2012-07-19T06:11:12.557
> 
> 标签：python, django

在创建仅包含单个应用程序的项目时，有什么好的方法来命名项目？

我可以毫无疑问地思考如何命名我的应用程序，但我需要一个项目名称。（我可以在没有项目的情况下创建应用程序吗？如果可以，这样做好吗？）

[更新] 我在 github 上看到一些包含单个应用程序的项目被命名为 django-[appname]。我喜欢它，并将遵循它来命名包含单个应用程序的项目。对于单个应用程序项目来说，Django 可能是矫枉过正，但到目前为止，我刚刚开始学习 django，所以我的项目中只有一个应用程序。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T06:51:39.650

通常，对于仅由一个安装使用的项目，我通常将我的项目命名为“谁将使用系统”（例如组织的名称），将应用程序命名为“系统的主要功能”。

但是，如果您的应用程序真的那么简单，以至于您不希望使用多个应用程序，那么 django 可能太重了，使用更简单的东西实际上可能会更好地为您服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:44:12.187

我对 Django 很陌生，但是在我阅读的文档中，我没有找到任何项目的命名约定，因为它们依赖于太多的因素。相反，对项目使用通用名称，对应用程序使用更具体的名称：

```
project = humanresource
apps = salaries, badge, whatelse... 
```

请记住，项目是第一位的，应用程序可以在不同的项目中重复使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T06:48:35.270

使用 django，您需要一个项目——它包含设置、urls 模块。一个项目至少需要一个应用程序。

大多数项目都包含很多应用程序。组织是必要的，这是首选方法。但是，如果它是一个非常简单的应用程序，您认为所有这些样板文件都过大了，并且喜欢将其保存在一个文件中，那么您可以使用其他一些微框架（例如[Flask](http://flask.pocoo.org/) ）来实现。

# .net - 数据注释 MVC3

> ID：11554893
> 
> 赞同：2
> 
> 时间：2012-07-19T06:11:15.943
> 
> 标签：.net, asp.net-mvc-3

是否可以使用 DataAnnotations 来限制用户输入特殊字符？

我希望用户只在文本框中输入 AZ、az 和 0-9。

我需要在客户端执行此操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T06:13:18.123

您可以尝试使用该[`[RegularExpression]`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.regularexpressionattribute.aspx)属性：

```
[RegularExpression(@"^[a-zA-Z0-9]+$")]
public string Foo { get; set; } 
```

它还支持不显眼的客户端验证，因此此正则表达式将在客户端上转置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T06:16:00.593

是的，您可以为此使用正则表达式...

```
[Required(ErrorMessage = "Enter Foo !")]
[RegularExpression(@"^[a-zA-Z0-9]+$", ErrorMessage = "Incorrect Entry dude !")]
public string Foo { get; set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T06:16:07.700

我很确定有一个 RegularExpression 属性，不确定它与客户端的配合如何。

```
[RegularExpression(@"your-reg-exp", ErrorMessage = "Your error message")] 
```

# android - SurfaceView 内容在 FLAG_TURN_SCREEN_ON 活动中不可见

> ID：11554894
> 
> 赞同：0
> 
> 时间：2012-07-19T06:11:20.060
> 
> 标签：android, surfaceview

我有一个表面视图来显示来自 IP 摄像机的 MJPEG 流。除了在一种情况下，它工作得很好。

在显示表面视图的活动中，我有以下标志：

```
WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD
WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON
WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED
WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON 
```

如果我正常启动活动（从应用程序），它会显示相机图片。但是，如果我在手机处于睡眠状态时从后台服务启动活动，则活动启动，手机解锁，屏幕打开，一切看起来都很好，除了表面视图上没有绘制任何内容。MJPEG 流开始正确接收，它似乎在画布上绘制它，但没有显示任何内容。如果我旋转手机，则会显示图片，从那时起一切正常。

我试着把相关的代码片段放在这里，但是如果你需要别的东西，我也会放在这里。MjpegView.class 它是在网上找到的类（在 Stackoverflow 上也看到了这里的代码），我对它做了一些小改动（主要是在 MjpegInputStream 中）。

单独线程中的绘图代码：

```
while (mRun && mIn != null)
{
    if (surfaceDone)
    {
        try
        {

            try
            {
                bm = mIn.readMjpegFrame();
            }
            catch (IOException e1)
            {
                bm = null;
            }

            if (bm == null) continue;

            c = mSurfaceHolder.lockCanvas();

            synchronized (mSurfaceHolder)
            {

                destRect = destRect(bm.getWidth(), bm.getHeight());

                c.drawColor(Color.BLACK);

                c.drawBitmap(bm, null, destRect, p);

                if (requestscreenshot)
                {
                    requestscreenshot = false;

                    try
                    {
                        FileOutputStream out = new FileOutputStream(requestfile);
                        bm.compress(Bitmap.CompressFormat.PNG, 90, out);
                    }
                    catch (Exception ex)
                    {
                        // ignore
                    }

                    requestfile = "";
                }

                if (showFps)
                {

                    p.setXfermode(mode);

                    if (ovl != null)
                    {

                        // false indentation to fix forum layout

                        height = ((ovlPos & 1) == 1) ? destRect.top : destRect.bottom - ovl.getHeight();

                        width = ((ovlPos & 8) == 8) ? destRect.left : destRect.right - ovl.getWidth();

                        c.drawBitmap(ovl, width, height, null);

                    }

                    p.setXfermode(null);

                    frameCounter++;

                    if ((System.currentTimeMillis() - start) >= 1000)
                    {

                        fps = String.valueOf(frameCounter) + "fps";

                        frameCounter = 0;

                        start = System.currentTimeMillis();

                        ovl = makeFpsOverlay(overlayPaint);
                    }

                }

            }

        }
        finally
        {
            if (c != null) mSurfaceHolder.unlockCanvasAndPost(c);
        }

    }
    else
    {
        try
        {
            Thread.sleep(100);
        }
        catch (Exception ex)
        {
        }
    }
} 
```

然后在surfaceview中回调：

```
public void surfaceChanged(SurfaceHolder holder, int f, int w, int h)
{
    Log.d(Constants.TAG, "MjpegView.surfaceChanged");
    if (thread != null)
    {
        thread.mSurfaceHolder = holder;
        thread.setSurfaceSize(w, h);
    }
}

public void surfaceDestroyed(SurfaceHolder holder)
{
    Log.d(Constants.TAG, "MjpegView.surfaceDestroyed");

    surfaceDone = false;

    stopPlayback();
}

public void surfaceCreated(SurfaceHolder holder)
{
    Log.d(Constants.TAG, "MjpegView surfaceCreated");
    surfaceDone = true;
}

public void startPlayback()
{
    if (thread == null)
    {
        thread = new MjpegViewThread(getHolder(), context);
        if (URL != null)
        {
            mRun = true;
            thread.start();
        }
    }
    else
    {
        thread.mSurfaceHolder = getHolder();
    }
}

public void stopPlayback()
{

    mRun = false;

    boolean retry = true;

    while (retry && thread != null)
    {

        try
        {

            thread.join();

            retry = false;

        }
        catch (InterruptedException e)
        {
        }

    }

    thread = null;
} 
```

在活动中，我只在 onCreate 中使用了一些初始化：

```
mv.setSource(device.getCameraURL());
mv.setMessageHandler(messageHandler);

mv.setDisplayMode(MjpegView.SIZE_BEST_FIT);

mv.showFps(false); 
```

（其中 mv 是 MjpegView）

在 onResume 我调用 MjpegView 的 startPlayback 方法

我想就是这样。

感谢任何帮助！谢谢！

更新：

可能会找到解决方法：

```
PowerManager pm = (PowerManager) MjpegtestActivity.this.getSystemService(Context.POWER_SERVICE);
wl = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK | PowerManager.ON_AFTER_RELEASE | PowerManager.ACQUIRE_CAUSES_WAKEUP, Constants.TAG);
wl.acquire(); 

Intent intent = new Intent(MjpegtestActivity.this, Camera.class);
intent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
intent.putExtra("PLAYSOUND", false);
intent.putExtra("DEVICEID", "a73d3ffd-bebb-aae4-f133-39a81eba6e");
MjpegtestActivity.this.startActivity(intent);

wl.release();
wl = null; 
```

如果我在获得唤醒锁后开始活动，则 IP 摄像机图片会正确显示在表面视图上。

但我不知道为什么:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T06:14:41.217

好的，这可能是一个解决方案，也适用于后台服务：

```
// start the activity in new thread to allow sleep times
new Thread(new Runnable()
{
    @Override
    public void run()
    {
        PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
        PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK | PowerManager.ON_AFTER_RELEASE | PowerManager.ACQUIRE_CAUSES_WAKEUP, Constants.TAG);
        wl.acquire(); 

        try
        {
            // give 500ms for device to wake up
            Thread.sleep(500);
        }
        catch (InterruptedException e)
        {
        }

        // start the activity
        Intent intent = new Intent(context, EntryPhoneControl.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
        intent.putExtra("PLAYSOUND", true);
        intent.putExtra("DEVICEID", dev.getId());
        context.startActivity(intent);

        // wait 5 sec to start the activity before releasing wakelock
        // within 5 sec the activity should be displayed already
        try
        {
            Thread.sleep(5000);
        }
        catch (InterruptedException e)
        {
        }

        wl.release();
        wl = null;
    }
}).start(); 
```

所以我认为这是一个相当稳定的解决方案。

# javascript - if 和 else 都不会触发

> ID：11554896
> 
> 赞同：4
> 
> 时间：2012-07-19T06:11:28.250
> 
> 标签：javascript, jquery

这是我的声明：

```
$(document).ready(function() {
    $('#search_option').change(function() {
        alert('changed');
        if( $('#search_option').val() == "wiki" ) {
            $('#search_form').setAttribute('action', "http://www.wikipedia.org/search-redirect.php");
            $('#search_bar').setAttribute('name', "search");
            alert('Got inside wiki');
        } else {
            $('#search_form').setAttribute('action', "http://www.google.com/search");
            $('#search_bar').setAttribute('name', "q");
            alert('Got inside google');
        }
    });
}); 
```

两个“进入”警报都没有触发，这意味着它们都没有运行，对吗？我似乎无法弄清楚为什么 if 语句的任何部分都没有运行，至少应该有一个

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T06:15:18.247

[`setAttribute`](https://developer.mozilla.org/en/DOM/element.setAttribute)是一个 dom 元素节点方法使用[`.attr()`](http://api.jquery.com/attr/)这就是 jQuery 方法

```
$(document).ready(function() {
    $('#search_option').change(function() {
        alert('changed');
        if( $('#search_option').val() == "wiki" ) {
            $('#search_form').attr('action', "http://www.wikipedia.org/search-redirect.php");
            $('#search_bar').attr('name', "search");
            alert('Got inside wiki');
        } else {
            $('#search_form').attr('action', "http://www.google.com/search");
            $('#search_bar').attr('name', "q");
            alert('Got inside google');
        }
    });
}); 
```

由于`setAttribute`不是 jQuery 对象的方法，因此会产生错误并且代码停止执行，因此它永远不会到达警报。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T06:15:35.067

`.setAttribute()`不是有效的 jQuery 方法。使用[`.attr()`](http://api.jquery.com/attr/).

```
$(document).ready(function() {
    $('#search_option').change(function() {
        alert('changed');
        if( $('#search_option').val() == "wiki" ) {
            $('#search_form').attr('action', "http://www.wikipedia.org/search-redirect.php");
            $('#search_bar').attr('name', "search");
            alert('Got inside wiki');
        } else {
            $('#search_form').attr('action', "http://www.google.com/search");
            $('#search_bar').attr('name', "q");
            alert('Got inside google');
        }
    });
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T06:15:53.583

尝试以下获取警报：在您的情况下，javascript执行在进入 if 或 else 后停止，然后在到达警报语句之前抛出错误，以检查类似情况，您可以逐行向下移动警报语句。使用 firebug 或其他 devTools 检查断点以获得更好的解决方案

```
$(document).ready(function() {
    $('#search_option').change(function() {
        alert('changed');
        if( $('#search_option').val() == "wiki" ) {
            alert('Got inside wiki');
            $('#search_form').setAttribute('action', "http://www.wikipedia.org/search-redirect.php");
            $('#search_bar').setAttribute('name', "search");

        } else {
            alert('Got inside google');
            $('#search_form').setAttribute('action', "http://www.google.com/search");
            $('#search_bar').setAttribute('name', "q");

        }
    });
}); 
```

更改为 jQuery而`attr()`不是jQuery 对象而不是 DOM 节点，以修复错误。`setAttribute``$('#something')`

最终代码：

```
$(document).ready(function() {
    $('#search_option').change(function() {
        alert('changed');
        if( $('#search_option').val() == "wiki" ) {
            alert('Got inside wiki');
            $('#search_form').attr('action', "http://www.wikipedia.org/search-redirect.php");
            $('#search_bar').attr('name', "search");

        } else {
            alert('Got inside google');
            $('#search_form').attr('action', "http://www.google.com/search");
            $('#search_bar').attr('name', "q");

        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T06:14:08.660

在这里换行

```
if( $('#search_option').val() == "wiki" ) { 
```

到

```
if($(this).find('option:selected').val() == "wiki") { 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T06:17:03.837

尝试：

```
if($('#search_option option:selected').val()=="wiki"){ 
```

# python - 谷歌自定义搜索下一页

> ID：11554916
> 
> 赞同：10
> 
> 时间：2012-07-19T06:12:50.613
> 
> 标签：python, google-api-python-client

我有以下代码，我不知道如何打印下一页的链接，如何转到下一页？

```
#!/usr/bin/python2.4
# -*- coding: utf-8 -*-

import pprint

from apiclient.discovery import build

def main():

    service = build("customsearch", "v1",
                 developerKey="")

    res = service.cse().list(
         q='lectures',
         cx='013036536707430787589:_pqjad5hr1a',
         num=10, #Valid values are integers between 1 and 10, inclusive.
    ).execute() 

    for value in res:
        #print value
        if 'items' in value:
            for results in res[value]:
                print results['formattedUrl'] 

if __name__ == '__main__':
  main() 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-19T08:27:23.597

响应对象包含一个“nextPage”字典。您可以使用它来确定下一个请求的开始索引。像这样：

```
res = service.cse().list(
     q='lectures',
     cx='013036536707430787589:_pqjad5hr1a',
     num=10, #Valid values are integers between 1 and 10, inclusive.
).execute() 

next_response = service.cse().list(
     q='lectures',
     cx='013036536707430787589:_pqjad5hr1a',
     num=10,
     start=res['queries']['nextPage'][0]['startIndex'],
).execute() 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-19T08:18:12.720

我的建议是添加下一个参数。在当前软件中，您有 q、cx 和 num。您可以尝试添加 start=10 然后执行代码。

```
res = service.cse().list(
    q='lectures',
    cx='013036536707430787589:_pqjad5hr1a',
    num=10,
    start=10,
).execute() 
```

第一个结果页面 URL 没有开始参数。第二页的 URL 包含 start=10 参数。第三页的 URL 包含 start=20 ...

祝你好运

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-18T09:00:51.700

```
# define the pages you want to scrape
max_page = 3

def google_search(service, query_keywords, api_key, cse_id):
    res = service.cse().list(q=query_keywords, cx=cse_id).execute()
    return res

def google_next_page(service, query_keywords, api_key, cse_id, res, page, max_page, url_items):
    next_res = service.cse().list(q=query_keywords, cx=cse_id, num=10, start=res['queries']['nextPage'][0]['startIndex'],).execute()
    for item in next_res['items']:
        url_items.append(item)
    page += 1

    if page == max_page:
        return url_items

    return google_next_page(service, query_keywords, api_key, cse_id, next_res, page, max_page, url_items) 
```

# android - 使用活动作为布局

> ID：11554917
> 
> 赞同：0
> 
> 时间：2012-07-19T06:12:53.973
> 
> 标签：android, android-layout, android-activity

我在活动类中制作了一个动画。现在我需要在布局中实现这个活动。所以我打开新的活动类和新的 xml。然后在活动中调用布局。但它不起作用。

这是 main1.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<com.frame.animation.FrameAnimationActivity
    android:id="@+id/layout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"/>
</LinearLayout> 
```

还有活动课

```
public class LaunchActivity extends Activity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);
 }
} 
```

注意：我在 Androidmanifest 中添加了活动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:15:23.410

布局文件中的每个条目都应该是 View 的子类。

XML 文件中不能有活动。

将您的代码移动到继承自 View 或 ViewGroup 的新类。

# windows-phone-7.1 - Windows Phone 云应用程序 ASPProviders 返回无法使用 Azure SDK 1.7 加载文件或程序集“Microsoft.WindowsAzure.StorageClient”

> ID：11554922
> 
> 赞同：1
> 
> 时间：2012-07-19T06:13:43.583
> 
> 标签：windows-phone-7.1

将 azure sdk 更新到 1.7 后，我的用于 azure 应用程序的 windows phone 工具包现在在 Visual Studio 中停止工作并显示异常。我的 windows phone 7 应用程序最好在 ASPProviders 上运行，当它在模拟器中运行时，页面返回错误。

查看我在下面看到的异常：无法加载文件或程序集'Microsoft.WindowsAzure.StorageClient，Version=1.1.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35'或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

关于如何解决此错误的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:57:11.557

我认为问题在于 Windows Phone 7.1 工具包基于 Windows Azure SDK 1.6，当您安装了 Windows Azure SDK 1.7 时，Microsoft.WindowsAzure.StorageClient.dll 的更新版本会导致此问题。

要解决此问题，您可以在应用程序中设置绑定重定向到较新版本的 Windows Azure 存储客户端 DLL，如下所示：

```
<dependentAssembly>
 <assemblyIdentity name="Microsoft.WindowsAzure.StorageClient" publicKeyToken="31bf3856ad364e35"/>
 <bindingRedirect oldVersion="1.0.0.0-1.7.0.0" newVersion="1.7.0.0" />
</dependentAssembly> 
```

这应该可以解决您的问题。

# javascript - 在 JavaScript 中将具有多个分隔符的字符串拆分为哈希表

> ID：11554923
> 
> 赞同：2
> 
> 时间：2012-07-19T06:13:44.510
> 
> 标签：javascript, jquery

我试图弄清楚如何使用正则表达式拆分字符串，同时将结果放入哈希表中。

例子：

```
var x = "Name: John Doe
Age: 30
Birth Date: 12/12/1981";

var arr = x.split(/Name:|Age:|Birth Date:/); 
```

但是，虽然我可以吐出一个字符串，但问题是我无法将值存储为有用的格式，例如哈希等。因为某些信息可能并不总是显示。

我希望结果类似于：

```
var myHash = {}; // New object
myHash['Name'] = "John Doe";
myHash['Age'] = "30";
myHash['Birth Date'] = "12/12/1981"; 
```

有一个简单的原因吗？

编辑：该脚本用于从生成的报告中解析数据。而且格式并不总是有回车。它将用于自动生成通知，而不是手动输入所有内容。

例子：

```
Name: John Doe       Birth Date: 12/12/1981
Age: 30 
```

但是，在查看示例之后，如果我首先在正则表达式匹配项前添加回车符或其他特殊字符，我可能会这样做。需要首先弄清楚如何在正则表达式匹配前添加一个值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T06:22:07.257

您可以使用两个拆分首先将其拆分为项目，然后拆分每个项目：

```
var results = {};
var x = "Name: John Doe\nAge: 30\nBirth Date: 12/12/1981";
var pieces = x.split("\n"), part;
for (var i = 0; i < pieces.length; i++) {
    part = pieces[i].split(":");
    results[part[0]] = part[1];
} 
```

工作示例：http: [//jsfiddle.net/jfriend00/kYwq6/](http://jsfiddle.net/jfriend00/kYwq6/)

根据您所做的具体操作，您可能希望在将每个键和值放入结果对象之前修剪每个键和值的开头和结尾的空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T05:16:11.137

大声笑，其他人都在循环！我决定接受一点挑战，并尝试做一个快速测试，看看我如何在没有任何 while 或 fors 的情况下进行编码，同时保持字符串输入的原样：

```
 var x = "Name: John Doe Age: 30 Birth Date: 12/12/1981";

    x = x.replace(/[\t]/g,'');  //replace all tabs returns
    x = x.replace(/[\n\r]/g, '');  //replace all carriage returns
    x = "{" + x.replace("Name:","'Name':'").replace("Age:","','Age':'").replace("Birth","','Birth").replace("Date:","Date':'") + "'}";

    var results =  eval('(' + x + ')');

    var name = trim(results.Name);
    var age = trim(results.Age);
    var bday = trim(results.BirthDate); 
```

我在这里所做的是将 x 转换为对象键值对。所以它看起来像这样：

{'Name':'John Doe','Age':'30','Birth Date':'12/12/1981'}

然后你只需调用 results.key

无论如何，看起来你在我有机会提出这个问题之前就已经找到了答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T06:29:35.817

如果您的输入有回车或换行，您可以先在其上拆分，然后在冒号上拆分：

```
var x = "Name: John Doe\nAge: 30\nBirth Date: 12/12/1981";

function foo(s) {
  var a = s.split(/\n|\r/);
  var i = a.length;
  var b, obj = {};

  while (i--) {
    b = a[i].split(/\s*:\s*/);
    obj[b[0]] = b[1];
  }
  return obj;
}

var o = foo(x);
alert(o.Name); // John Doe 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T07:01:23.863

像这样的东西：

```
 var str = "Name: John Doe\nAge: 30\nBirth Date: 12/12/1981"
    var obj = {};
    var parts = str.split(/\n|\r/);
    for( var key in parts ){
      var tmp = parts[key].split(': ');
       obj[tmp[0]] = tmp[1];
    }
    alert(obj.Name) 
```

PS抱歉加倍 - 无法删除消息

# sql - 如何提高sql中的查询性能？

> ID：11554928
> 
> 赞同：-1
> 
> 时间：2012-07-19T06:13:59.653
> 
> 标签：sql, query-performance, select-query

我有一张有 2900000 条记录的表。现在我正在使用选择查询来查找数据，它需要 5 秒来获取记录。它只是选择查询，运行它需要 4-5 秒。

我不知道为什么要花这么多时间？

在表中，有 4 个字段是 varchar(Max)。有什么原因有问题吗？

谁能建议我如何减少执行时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:37:52.637

对于 WHERE 子句中使用的列，您很可能需要为表添加索引。在不知道您的表架构、数据和查询（或 rdbms 风格）的细节的情况下，任何人都几乎不可能提供进一步的帮助。

我将假设您使用的是 SQL Server（因为您没有指定）。如果是这样，我建议在 SQL Management Studio 中复制您的查询，但在执行之前先按 ctrl+m（这将显示实际执行计划）。现在运行查询，完成后，结果区域中将出现一个选项卡，其中将显示建议的索引（如果有）。

如果可能，请用更具体的细节更新您的问题。

# c++ - 如何获取多图中的所有唯一键

> ID：11554932
> 
> 赞同：25
> 
> 时间：2012-07-19T06:14:14.753
> 
> 标签：c++, stl, std, multimap

我有一个多图，我希望将其中的所有唯一键存储在一个向量中。

```
 multimap<char,int> mymm;
  multimap<char,int>::iterator it;
  char c;

  mymm.insert(pair<char,int>('x',50));
  mymm.insert(pair<char,int>('y',100));
  mymm.insert(pair<char,int>('y',150));
  mymm.insert(pair<char,int>('y',200));
  mymm.insert(pair<char,int>('z',250));
  mymm.insert(pair<char,int>('z',300)); 
```

我怎样才能做到这一点？有办法用一个键计算元素的数量，但没有办法计算多重映射中唯一键的数量。

**补充：**唯一是指多图中的所有键一次 - 它们可以在多图中重复或出现一次。

所以这里的唯一键是 - **x**，**y**和**z**

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-19T06:20:40.957

我试过了，它奏效了

```
for(  multimap<char,int>::iterator it = mymm.begin(), end = mymm.end(); it != end; it = mymm.upper_bound(it->first))
  {
      cout << it->first << ' ' << it->second << endl;
  } 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-19T06:47:12.717

由于 a 的条目`std::multimap<>`是隐式排序的，并且在遍历它们时按排序顺序出现，因此您可以使用以下`std::unique_copy`算法：

```
#include <iostream>
#include <map>
#include <algorithm>
#include <vector>

using namespace std;

int main() {

  /* ...Your existing code... */

  /* Create vector of deduplicated entries: */
  vector<pair<char,int>> keys_dedup;
  unique_copy(begin(mymm),
              end(mymm),
              back_inserter(keys_dedup),
              [](const pair<char,int> &entry1,
                 const pair<char,int> &entry2) {
                   return (entry1.first == entry2.first);
               }
             );

  /* Print unique keys, just to confirm. */
  for (const auto &entry : keys_dedup)
    cout << entry.first << '\n';

  cout.flush();
  return 0;
} 
```

**由此增加的额外工作与多重映射的条目数量呈线性关系，而使用 a`std::set`或 Jeeva 的重复数据删除方法都增加了 O(n log n) 计算步骤。**

*备注：*我使用的 lambda 表达式假定 C++11。可以为 C++03 重写它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-19T06:17:08.840

遍历 的所有元素`mymm`，并存储`it->first`在`set<char>`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-05T11:10:29.203

最简单的方法是将 multimap 的键放在 unordered_set

```
unordered_multimap<string, string> m;

//insert data in multimap

unordered_set<string> s;         //set to store the unique keys

for(auto it = m.begin(); it != m.end(); it++){
    if(s.find(it->first) == s.end()){
        s.insert(it->first);
        auto its = m.equal_range(it->first);
        for(auto itr=its.first;itr!=its.second;itr++){
            cout<<itr->second<<" ";
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-19T06:16:35.157

我认为你可以做这样的事情，以防`unique`你的意思是包含在`multimap`唯一一次中的密钥：

1）在你的地图中构造一个排序`list`的所有键

2）遍历列表并找到唯一键。这很简单，因为所有重复项将在排序容器中彼此靠近

如果你只想要所有的钥匙 -`std::set`按照 Donotalo 的建议使用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-22T21:45:15.520

其他选择是将它们插入向量中，然后使用，`std::sort`并且`std::unique`

```
template<typename Container> static
std::vector<typename Container::key_type> unique_keys(Container A)
{

    using ValueType = typename Container::key_type;

    std::vector<ValueType> v;

    for(auto ele : A)
    {
        v.push_back(ele.first);
    }

    std::sort(v.begin(), v.end());
    auto it = std::unique(v.begin(), v.end());
    v.resize(distance(v.begin(),it));

    return v;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-10T16:27:42.157

这可以在 O(N) 中完成，其中 N 是地图的大小；您的密钥不需要有订单运算符：

```
template<typename Container>
std::vector<typename Container::key_type> UniqueKeys (const Container &A)
{
std::vector<typename Container::key_type> v;
auto prevIter = A.begin ();

for (auto iter = A.begin (); iter != A.end(); ++iter)
    {
    if (prevIter->first == iter->first)
        continue;

    v.push_back (prevIter->first);
    prevIter = iter;
    }

if (prevIter != A.end ())
    v.push_back (prevIter->first);

return v;
} 
```

# java - 不确定Java中变量的默认初始化

> ID：11554935
> 
> 赞同：2
> 
> 时间：2012-07-19T06:14:32.023
> 
> 标签：java, variables, initialization

> **可能重复： Java 中**
> [未初始化的变量和成员](https://stackoverflow.com/questions/268814/uninitialized-variables-and-members-in-java)
> [为什么在 Java 中未初始化局部变量？](https://stackoverflow.com/questions/415687/why-are-local-variables-not-initialized-in-java)

在`Java`变量中有默认值，对吧？甚至数组也由编译器初始化。
所以我无法理解以下内容：

```
int c;  
for(int i = 0; i < 10; i++){  
   c = i + 5;  
}  
System.out.println("Result = "+c); 
```

为什么会出现编译器错误：

> 局部变量 c 可能尚未初始化

编译器默认没有`c`初始化为？ 那么为什么我会得到这个错误，如果我明确这样做，为什么错误会消失？ `0`
`int c = 0`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T06:15:48.357

**不必**初始化局部变量，类字段变量具有默认值

> 局部变量略有不同；编译器永远不会为未初始化的局部变量分配默认值。如果您无法在声明它的地方初始化局部变量，请确保在尝试使用它之前为其分配一个值。访问未初始化的局部变量将导致编译时错误[[...]](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:17:20.873

Beucase`forloop`是条件循环。`c` 如果没有进入那个条件循环，编译器可能没有初始化

# matlab - 朴素分类器matlab

> ID：11554938
> 
> 赞同：3
> 
> 时间：2012-07-19T06:14:53.240
> 
> 标签：matlab, machine-learning, classification, probability, naivebayes

在 matlab 中测试朴素分类器时，即使我对相同的样本数据进行了训练和测试，我也会得到不同的结果，我想知道我的代码是否正确，是否有人可以帮助解释这是为什么？

```
%% dimensionality reduction 
columns = 6
[U,S,V]=svds(fulldata,columns);

%% randomly select dataset
rows = 1000;
columns = 6;

%# pick random rows
indX = randperm( size(fulldata,1) );
indX = indX(1:rows)';

%# pick random columns
%indY = randperm( size(fulldata,2) );
indY = indY(1:columns);

%# filter data
data = U(indX,indY);

%% apply normalization method to every cell
data = zscore(data);

%create a training set the same as datasample
training_data = data;

%match the class labels to the corresponding rows
target_class = classlabels(indX,:)

%classify the same data sample to check if naive bayes works
class  = classify(data, training_data, target_class, 'diaglinear')
confusionmat(test_class, class) 
```

这是一个例子：

![在此处输入图像描述](../Images/3dabaa470829b67e8e82ddde594f2a33.png)

请注意，它得到了*ipsweep、teardrop 和 back*与正常流量混合。我还没有到对看不见的数据进行分类的阶段，但我只是想测试它是否会对相同的数据进行分类。

混淆矩阵输出：

```
ans =

   537     0     0     0     0     0     0     1     0
     0   224     0     0     0     1     0     1     0
     0     0    91    79     0    17    24     4     0
     0     0     0     8     0     0     2     0     0
     0     0     0     0     3     0     0     0     0
     0     0     0     0     0     1     0     0     0
     0     0     0     0     0     0     2     0     0
     0     0     0     0     0     0     0     3     0
     0     0     0     0     0     1     0     0     1 
```

尽管我不知道这实际上是什么，而且我的代码中可能有这个错误，但我想我只是测试一下它的输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T08:08:10.900

您正在对降维数据使用分类器。分类器意味着稍微不精确，因为它需要泛化。在降维阶段，您会丢失信息，这也会导致分类性能下降。

即使在训练集上也不要期望完美的表现，这将是**过拟合**的坏情况。

至于混淆矩阵的使用。`C(3,4)=79`仅意味着对于 79 个数据点，该类应该是 3，它们被归类为 4 类。完整的矩阵表明您的分类器适用于 1 类和 2 类，但对 3 类有问题。其余的类几乎没有数据，因此很难判断分类器对他们的效果如何。

# java - 使用 ftp 上传文件/目录

> ID：11554939
> 
> 赞同：1
> 
> 时间：2012-07-19T06:14:53.160
> 
> 标签：java, ftp

我在 ububntu 机器上设置了 openssh 服务器。我想使用 java api 将文件和目录上传到 ftp 服务器。所以，到目前为止，我已经使用了两个不同的供应商 java api（jscape，zehon）来上传文件/目录。

我能够将文件/目录从本地机器上传到本地 ftp 服务器。但我无法使用 api 从本地机器上传到远程 ftp 服务器。但是使用 scp 或 ftp 或 sftp 等命令行工具，我可以将文件/目录从任何本地机器上传到远程 ftp 服务器。

我很困惑我是否没有正确安装/配置 openssh 服务器。或者我可能无法正确使用 (zehon/jscape)java api。

你能给我一个测试代码来使用java api上传文件和目录吗？

这是我用来将文件从本地机器上传到远程 ftp 服务器的代码。我正在使用来自 jscape 的 sftp.jar。

```
Ftp ftp = new Ftp(hostname,username,password);
ftp.connect();
ftp.setDir(destFolder);
ftp.upload(new File("local file path...");
ftp.disconnect(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T06:53:30.513

我们一直在使用[Apache Commons Net](http://commons.apache.org/net/)库，我可以推荐它。使用示例：（我已经删除了 try-catch 块并检查 FtpClient 是否已连接）

```
import org.apache.commons.net.ftp.FTPClient;
import org.apache.commons.net.ftp.FTPFile;
..
private FTPClient ftpClient; //needs to be initialized
..
ftpClient.setConnectTimeout(timeout);
ftpClient.setDataTimeout(timeout);
ftpClient.setDefaultTimeout(timeout);
ftpClient.connect(hostname, port);
ftpClient.setSoTimeout(timeout);
ftpClient.login(username, password);
ftpClient.setFileType(FTPClient.BINARY_FILE_TYPE); // or FtpClient.ASCII_FILE_TYPE, up to you
ftpClient.changeWorkingDirectory(destFolder);
srcFile = new File("local file path.."); // replace with actual path
FileInputStream fis = new FileInputStream(srcFile);
ftpClient.storeFile(filename, fis); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:47:00.953

通过使用 Apache 提供的 commons-net-3.0.jar，您可以通过 FTP 与服务器通信。

FTPUtils 类具有连接、断开、上传和下载等核心方法。和 FTPMain 具有上传文件的主要方法。

FTPUtils：

```
package com.ftpclient.test;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;

import org.apache.commons.net.ftp.FTP;
import org.apache.commons.net.ftp.FTPClient;

public class FTPUtils {
    public static void ftpConnect(FTPClient ftpclient, String host, String username, String password) throws IOException {
        System.out.println("FTPUtils :: Logging in FTP..");
        try{
            ftpclient.connect(host);
            if (!ftpclient.login(username, password)) {
                throw new IOException("Supplied wrong credentials to FTP Server");
            }

            if (ftpclient.getReplyCode() != 0) {
                System.out.println(ftpclient.getReplyString());
            }
        }catch(IOException ioe){
            ioe.printStackTrace();
            System.out.println("FTP Client is not able to Connect to host");
            throw new IOException("FTP Client is not able to Connect to host");
        }
        System.out.println("FTPUtils :: FTP Login Successful..");
    }

    /**
     * disconnect to FTP server
     * 
     * @param ftpclient is Object which is having details of FTP server like IP, user name and password
     * @throws IOException throws Exception
     */
    public static void ftpDisConnect(FTPClient ftpclient) throws IOException {
        System.out.println("FTPUtils :: FTP Logging out..");
        ftpclient.logout();
        ftpclient.disconnect();
        System.out.println("FTPUtils :: FTP Disconnected Successfully..");
    }

    /**
     * download's file from source path to destination path by using FTP Client.
     * 
     * @param ftpclient is Object which is having details of FTP server like IP, user name and password
     * @param sourcePath is String from where to download's file
     * @param destinationPath is String to where to download's file.
     * @return boolean true if download's with out any fail else false
     * @throws IOException will throw any problem with file system
     */
    public static boolean downloadFile(FTPClient ftpclient, String sourcePath, String destinationPath) throws IOException {
        System.out.println("FTPUtils :: RemoteFile download starts ..FTP SOURCE " + sourcePath + " DESTINATION " + destinationPath);
        FileOutputStream fos = null;
        boolean result = false;
        try{            
            ftpclient.setFileTransferMode(FTP.BINARY_FILE_TYPE);
            ftpclient.setFileType(FTP.BINARY_FILE_TYPE);
            File fDestination = new File(destinationPath);
            fos = new FileOutputStream(fDestination);
            result = ftpclient.retrieveFile(sourcePath, fos);
            if (result) {
                System.out.println("FTPUtils :: RemoteFile download Completed..FTP " + sourcePath);
            }
        }catch(IOException ioe){
            ioe.printStackTrace();
            System.out.println("FTP is not able to Download the files from host");
            throw new IOException("FTP is not able to Download the files from host");
        }finally{
            fos.close();
        }
        return result;
    }

    /**
     * @param ftpclient
     * @param sourcePath
     * @param destinationPath
     * @throws IOException
     */
    public static void uploadFile(FTPClient ftpclient, String sourcePath, String destinationPath) throws IOException {
        FileInputStream fis = null;
        try {
            //
            // Create an InputStream of the file to be uploaded
            //
            fis = new FileInputStream(sourcePath);

            //
            // Store file to server
            //
            ftpclient.storeFile(destinationPath, fis);
        }catch(IOException ioe){
            ioe.printStackTrace();
            System.out.println("FTP is not able to upload the files from host");
            throw new IOException("FTP is not able to upload the files from host");
        }finally{
            fis.close();
        }
    }
} 
```

FTP主要：

```
import java.io.IOException;
import org.apache.commons.net.ftp.FTPClient;

public class FTPMain {
    public static void main(String[] str){
        FTPClient ftpclient = new FTPClient();
        try {
            FTPUtils.ftpConnect(ftpclient, "ipaddress", "username", "password");
            FTPUtils.uploadFile(ftpclient, "sourcePath", "destinationPath");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

# android - 连接到服务器时，套接字不连接

> ID：11554941
> 
> 赞同：0
> 
> 时间：2012-07-19T06:15:16.227
> 
> 标签：android, sockets

我在 android 上有一个服务器-客户端应用程序，它支持客户端之间的消息传递。我在同一台计算机上的不同模拟器上运行服务器和客户端程序。当服务器正在侦听端口时，客户端尝试使用这些语句连接它。

```
String serverIpAddresss = "10.0.2.2"; 
InetAddress addr = InetAddress.getByName(serverIpAddresss);
Socket socket = new Socket(addr,REDIRECTED_SERVERPORT); 
```

在此之前我重定向了 5000:6000 因为 5000 是客户端，而 6000 是服务器的端口。新的套接字线它不起作用并且不创建套接字。谁能帮我如何连接客户端和服务器以及如何相互通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:25:28.473

将此添加到您的 android 清单文件中：

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

**编辑**

Android 模拟器与您的主机连接到同一网络，但使用它自己的 IP。默认情况下，它使用 NAT 连接。您应该能够连接。

检查您的服务器端口是否已打开以及防火墙规则。

# php - 日期时间/时区？

> ID：11554948
> 
> 赞同：0
> 
> 时间：2012-07-19T06:15:45.703
> 
> 标签：php, mysqli

我正在使用它在 mysql 中存储 DATETIME

**验证.php**

```
//more code
$date = new DateTime("2012-01-01 23:59:59", new DateTimeZone('Europe/Paris'));
$dt = $date->format('Y-m-d H:i:s');

//and I am posting into my DATETIME field:

Insert...Value($dt) 
```

1.. 我没有收到任何错误，但发布的日期/时间是 0000-00-00 00-00-00

我究竟做错了什么？

2.. 有没有办法存储格式为 DD-MM-YYYY 的日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:08:21.853

做到了吗...正确的语法是：

```
$date = new DateTime(null, new DateTimeZone('Europe/Paris')); 
$dt = $date->format('Y-m-d H:i:sP'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:28:27.243

您可以在存储到数据库之前使用 PHP 设置时区

```
$date = new DateTime("2012-07-05 16:43:21", new DateTimeZone('Europe/Paris')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:39:04.383

你必须发布

```
$var_date = $date->format('Y-m-d H:i:sP') 
```

不是直接 $date

# android - 获取校园内特定建筑物的地理坐标

> ID：11554950
> 
> 赞同：1
> 
> 时间：2012-07-19T06:15:51.290
> 
> 标签：android, map, geolocation

我必须创建一个显示校园地图的应用程序，并且在校园内很短的距离内有 10-12 座建筑物。我必须显示用户在校园内的当前位置以及从一栋建筑物到另一栋建筑物的方向。据我所知，我无法获得特定建筑物的地理坐标，因为整个校园的地理坐标相同。

有什么方法可以获取用户在校园内的位置吗？或任何可能对我有帮助的参考链接。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:26:38.443

我认为以下链接包含的文档将帮助您使用 geolocation.getCurrentLocation() 找出确切位置。[文档]

[http://docs.phonegap.com/en/1.9.0/cordova_geolocation_geolocation.md.html#Geolocation](http://docs.phonegap.com/en/1.9.0/cordova_geolocation_geolocation.md.html#Geolocation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:23:06.913

1.  您可以尝试获取真实的 GPS 坐标并计算它的确切建筑物。 [这](https://stackoverflow.com/questions/1513485/how-do-i-get-the-current-gps-location-programmatically-in-android)是适当的链接。
2.  如果可以步行扔掉所有校园，您可以尝试通过 wifi 网络列表检查确切的建筑物。[这](https://stackoverflow.com/questions/5452940/how-can-i-get-android-wifi-scan-results-into-a-list)是一些代码。

# android - 从 SQLite DB 表的 BLOB 字段播放音频

> ID：11554961
> 
> 赞同：4
> 
> 时间：2012-07-19T06:16:24.237
> 
> 标签：android, database, audio, blob, playback

我将音频文件存储到 sqlite 数据库（作为 BLOB），现在我想从 db 中获取它，并在单击按钮时播放它。我的数据库表有三个字段：rowID、图像、我表的每一行中的音频、一个图像和一个存储的音频（作为 BLOB）。

我尝试了这个，但对我不起作用：

```
byte[] byteAudio2 = null;

Cursor cur1 = db.query("audiofromdb_tbl", null, null, null, null, null, null);

cur1.moveToFirst();
byteAudio2 = cur1.getBlob(cur1.getColumnIndex("audio"));        
File tempWav = null;
    FileOutputStream fos = new FileOutputStream(tempWav);
    fos.write(byteAudio2);
fos.close();

MediaPlayer mp = new MediaPlayer();
mp.setDataSource(fos.getFD());
mp.prepare();
mp.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:20:12.270

尝试这样的事情：

```
byte[] buffer = new byte[2048];
int size = 0;
ByteArrayInputStream byteArrayStream = new ByteArrayInputStream(byteAudio2); 

while ((size = byteArrayStream.read(buffer, 0, buffer.length)) > 0) {
    fos.write(buffer, 0, size);
} 
```

[]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-04T17:16:00.207

也许为时已晚，但如果有人需要的话。

这对我有用：

```
 File file;
 FileOutputStream fos;

 byteaudio = cursor.getBlob(cursor.getColumnIndex("sonido"));

 try {

        file = File.createTempFile("sound", "sound");
        fos = new FileOutputStream(file);
        fos.write(byteaudio);
        fos.close();

        Log.d("File", file.toString());
    } catch (IOException e) {
        e.printStackTrace();
    }
mp = MediaPlayer.create(getActivity(), Uri.fromFile(file));
            mp.start(); 
```

# algorithm - 三堆 Wythoff 博弈的冷仓位

> ID：11554963
> 
> 赞同：4
> 
> 时间：2012-07-19T06:16:33.427
> 
> 标签：algorithm

这是硬件：

Wythoff 的游戏中有两个玩家，在这种情况下有 3 堆石头。每个玩家轮流从堆中取出石头，如果他们拿起最后一块石头，则玩家获胜。每回合玩家可以从一堆中取出 N 块石头，从两堆中取出 N 块，或者从所有三堆中取出 N 块。

获胜配置是第一个玩家可以强制获胜的配置。例如，(0,0,13)、(0,11,11) 和 (5,5,5) 是获胜配置，因为第一个玩家可以立即移除所有棋子。

失败的配置是第二个玩家可以强制获胜，无论第一个玩家做什么。例如，(0,1,2) 和 (1,3,3) 正在输掉配置：任何合法的移动都会为第二个玩家留下获胜配置。

考虑所有丢失的配置 (xi,yi,zi)，其中 xi <= yi <= zi <= 100。我们可以验证 Σ(xi+yi+zi) = 173895。

我已经搜索和搜索，但无法弄清楚如何找到所有丢失（冷）的位置。通过对坐标的二进制值求和得到 nimnumber，如果 nimnumber > 0 则它是冷位置。但我最终得到 Σ(xi+yi+zi) > 1mil。谁能帮我指出正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:17:29.790

由于是作业，我不会发布完整的解决方案，但这里有一个提示：

你已经知道 xi <= yi <= zi <= 100，所以配置的数量永远不会超过 2*101^3（轮到谁的 x2），不会超过 200 万。尝试制作一个查找表（例如，`isWinningPosition[][][][]`其中`isWinningPosition[a][b][c][d]`对应于大小为 a、b、c 的堆，轮到 d）并递归。（警告：查找表中的每个条目都需要将 、 和 作为三个独立的东西来`true`处理`false`。`not computed`）

# drupal - 将提交按钮移动到顶部而不是底部

> ID：11554966
> 
> 赞同：0
> 
> 时间：2012-07-19T06:16:53.767
> 
> 标签：drupal

我想将我的 drupal 表单的提交按钮移动到表单的顶部位置。默认情况下，它总是出现在每个表单的底部。但我希望它位居榜首。

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:04:08.000

hook_form_alter 是你的朋友。

在您的主题的 template.php 文件中，您要调用 YOUR_THEME_NAME_form_alter。

```
function YOUR_THEME_NAME_form_alter(&$form, &$form_state, $form_id) {
      if ($form_id == 'YOUR_FORM_ID') {  // Targets the specific form.      
        $form['actions']['submit']['#weight'] = 0; // Set this until your button is in the right place. You can include negative integers.
      } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T05:31:35.233

有一个名为[Content Type Extras](https://drupal.org/project/content_type_extras)的 Drupal 模块可以很容易地在编辑页面的顶部添加另一个“保存”按钮。它还包括其他额外的按钮，例如“保存和新建”按钮和“保存和编辑”按钮。最好的祝愿，斯蒂芬

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T00:28:11.163

将按钮放在您想要的任何位置，只需将其放到表单的模板文件中即可。

```
<?php print drupal_render($form['actions']['submit']); ?> 
```

并确保添加

```
<?php print drupal_render_children($form) ?> 
```

在页面底部附近的某个地方。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-19T08:47:12.753

默认会在 bootom 上，你可以用 CSS 设置，top:px;

> 您的问题还有另一种解决方案，您可以使用[排列字段](http://drupal.org/project/arrange_fields)模块，您可以拖放您形成的组件。希望它会帮助你 ![在此处输入图像描述](../Images/c169bf4bf2d47c8d8578898d3108d6f2.png)

# php - 如何从 MySQL 表数据创建 Word 文档？

> ID：11554968
> 
> 赞同：0
> 
> 时间：2012-07-19T06:17:00.523
> 
> 标签：php, mysql, csv

我正在从 PHP 中的 MySQL 表数据生成 Word 文档。为此，我编写了以下代码：

```
$fh = fopen('C:\wamp\www\data.txt', 'w');
mysql_connect("localhost","root","admin");
 mysql_select_db("appulentoweb", $con);  

$result = mysql_query("SELECT * FROM freeadvice");
while ($row = mysql_fetch_array($result)) {
    $last = end($row);
    foreach ($row as $item) {
        fwrite($fh, $item);
        if ($item != $last)
            fwrite($fh, "\t");
    }
    fwrite($fh, "\n");
}
fclose($fh); 
```

我已经创建了一个名为 Data.txt 的空文本文件，但数据没有进入该文件。还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:43:13.093

如果您愿意，请随时使用我放在一起的这个脚本来从我们工作的数据仓库中提取大型（有时以千兆字节为单位）CSV 文件。它几乎不使用系统资源，并且足够轻巧，既美观又快速。我从命令行界面运行它，因此编写输出以进行漂亮的简单显示。

它将检查连接以确保它可以连接，然后确保查询可以运行（即没有语法错误）并将数据提取到 CSV 文件中，以便您将查询列名称作为文件的第一行. 它会在运行时让您了解它所在的行（最接近的千位），因此如果您知道结果集的预期大小，您可以猜测还剩下多少。

```
<?php

    // I have this set up for a few databases, so I keep all my usernames, passwords and extra options.
    // DWH
    $dwhusername = 'user';
    $dwhpassword = 'pass';
    $dwhhostname = 'oci:dbname=databaseName';
    $options = array(PDO::ATTR_AUTOCOMMIT=>FALSE);

    // EDW
    $edwusername = 'user';
    $edwpassword = 'pass';
    $edwhostname = 'oci:dbname=databaseName';

    // MySQL
    $musername = 'user';
    $mpassword = 'pass';
    $mhostname = 'mysql:host=localhost;dbname=databaseName';

    // Feel free to set this to anything you like. It is just used to give you a visual start and end time.
    date_default_timezone_set('Australia/Sydney');

    // Enter the filename that you want to save to below.
    $File = "C:\Server\yourFileName.csv";

    // Enter your SQL query that you use here.
    $sql="
    select
        col1 as Column1,
        col2 as Sales,
        col3 as TradeDate
    from
        myTable
    where
        col1=someCondition;
    ";

    function time_diff_conv($start, $s)
    {
        $string="";
        $t = array( //suffixes
            'd' => 86400,
            'h' => 3600,
            'm' => 60,
        );
        $s = abs($s - $start);
        foreach($t as $key => &$val) {
            $$key = floor($s/$val);
            $s -= ($$key*$val);
            $string .= ($$key==0) ? '' : $$key . "$key ";
        }
        return $string . $s. 's';
    }

    echo "\n\nStarting extract job on ".date('l jS \of F Y \a\t h:i:s A')."\n";

    $Handle = fopen($File, 'w');

    try{
        $dbh = new PDO($dwhhostname, $dwhusername, $dwhpassword, $options);
        //$dbh = new PDO($edwhostname, $edwusername, $edwpassword, $options);
        //$dbh = new PDO($mhostname, $musername, $mpassword);
        echo "Connection to database appears fine. Running query.\n";
        $timeQuery=time();
        $sth = $dbh->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));
        $dbh->beginTransaction();
        $stmt = $dbh->query($sql);
        $Data="";
        $data2="";

        $obj = $stmt->fetch(PDO::FETCH_ASSOC);
        foreach($obj as $key => $value)
        {
            $Data.=$key.",";
            $data2.=$value.",";

        }
        $i++;
        $Data=substr($Data,0,-1);
        $Data.="\n".substr($data2,0,-1)."\n";
        $data2=null;
        fwrite($Handle, $Data);
        $timeResult=time();
        echo "Query Result Returned on ".date('l jS \of F Y \a\t h:i:s A')."\nExporting data now...\n\n";

        $Data="";

        while($obj = $stmt->fetch(PDO::FETCH_ASSOC))
        {
            foreach($obj as $key => $value)
            {
                $Data.=$value.",";
            }
            $Data=substr($Data,0,-1);
            $Data.="\n";
            if($i%1000==0)
            {
                fwrite($Handle, $Data);
                $Data="";
                echo "\rWritten $i rows of data to the file.\r";
            }
            $i++;
        }
        fwrite($Handle, $Data);
        $Data="";
        $stmt=null;
        $dbh->commit();
        $dbh=null;

    }
    catch(PDOException $e){
        echo 'Error : '.$e->getMessage();
        exit();
    }

    $timeComplete=time();

    $timeQueryRes=time_diff_conv($timeQuery, $timeResult);
    $timeResRes=time_diff_conv($timeResult, $timeComplete);
    $timeAverage=number_format(round($i/($timeComplete-$timeResult+1),0));
    echo "Query took ".$timeQueryRes." to return a result\n";
    echo "The resultset of $i rows took ".$timeResRes." to completely extract at an average of ".$timeAverage." rows per second.\n";

    fclose($Handle);

    echo "Data written to: ".$File."\n";
    echo "Finished extract job on ".date('l jS \of F Y \a\t h:i:s A')."\n\n\n";

?> 
```

终端/控制台中的输出如下所示：

```
U:\>c:\server\wamp\bin\php\php5.3.0\php.exe -f "C:\server\wamp\www\store\inc\out
putData2.php"

Starting extract job on Thursday 19th of July 2012 at 04:25:44 PM
Connection to database appears fine. Running query.
Query Result Returned on Thursday 19th of July 2012 at 04:29:28 PM
Exporting data now...

Query took 3m 43s to return a resultfile.
The resultset of 1341447 rows took 4m 37s to completely extract at an average of
 4,825 rows per second.
Data written to: C:\Server\DailyStoreSales-2012-06-27.csv
Finished extract job on Thursday 19th of July 2012 at 04:34:05 PM

U:\> 
```

# orm - 我需要在 symfony2 中使用哪个类进行自定义身份验证

> ID：11554972
> 
> 赞同：0
> 
> 时间：2012-07-19T06:17:31.053
> 
> 标签：orm, symfony, doctrine-orm, mapping, relationships

我完全对面向对象的继承感到困惑

我有这种情况

`Class User`

然后

`Class Employee extends User` 属性`username, password`

然后

`Class Owners extend User`

每个类都有不同的属性

现在所有登录详细信息都将在用户表中。

但我很困惑，假设

1.  如果我`class User`用于身份验证并且员工登录，那么我将拥有的对象类型是用户而不是员工

2.  我将如何从该 User 对象访问 Employee 的属性。如果点击编辑，那么员工详细信息将如何加载

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:54:55.673

您需要使用某种继承（单表或多表，学说应该返回正确的类型，即使您在普通用户实体上查询），并让每个对象根据它们的类型返回不同的角色（如果你想限制他们的访问）。

[https://github.com/netmeansnet/NmnMultiUserBundle](https://github.com/netmeansnet/NmnMultiUserBundle)这可能会很有启发性。

# git - 我可以在git中合并文件吗？

> ID：11554974
> 
> 赞同：8
> 
> 时间：2012-07-19T06:17:51.027
> 
> 标签：git, github

我有三个文件`Shell-ijk-ArrayList.java`，在这个[git-repository](https://github.com/MartinThoma/matrix-multiplication/tree/master/Java)`Shell-ijk-Vektor.java`中。我已将它们手动“合并”到. 现在我想摆脱其他三个，但我想保留他们的历史。做这个的最好方式是什么？`Shell-ikj-ArrayList.java``MatrixMultiplication.java`

我找到了[git merge-file](http://www.kernel.org/pub/software/scm/git/docs/git-merge-file.html)，但是当我尝试

```
git merge-file MatrixMultiplication.java Shell-ijk-ArrayList.java Shell-ijk-Vektor.java 
```

我明白了

```
error: Could not stat MatrixMultiplication.java 
```

我可以简单地用 删除旧文件`git rm`，但是我会丢失历史记录，不是吗？

我也可以用 移动它`git mv`，但是对于过时的文件来说，什么是一个好的文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:42:30.567

在我看来，您正在将具有不同逻辑的不同文件合并到一个文件中？这不是 git merge-file 的用途。

从*git help merge-file*：

```
git merge-file incorporates all changes that lead from the <base-file> to 
<other-file>  into <current-file>. The result ordinarily goes into 
<current-file>. 

git merge-file is useful for combining separate changes to an original. 
Suppose <base-file> is the original, and both <current-file> and <other-file> 
are modifications of <base-file>, then git merge-file combines both changes. 
```

示例（也来自帮助页面）：

```
 git merge-file README.my README README.upstream
       combines the changes of README.my and README.upstream since README, 
       tries to merge them and writes the result into README.my. 
```

要将完全独立的文件中的逻辑合并为一个，手动合并它们是正确的。

删除文件不会删除其历史记录，您可以通过以下方式查看已删除文件的日志：

```
git log -- <path_to_file> 
```

请参阅相关问答：

[Git：如何在项目提交历史中搜索已删除的文件？](https://stackoverflow.com/questions/7203515/git-how-to-search-for-a-deleted-file-on-the-project-history)

[在 Git 存储库中查找和恢复已删除的文件](https://stackoverflow.com/questions/953481/restore-a-deleted-file-in-a-git-repo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:27:41.580

我不确定 git merge-file 是你需要的。这听起来更像是代码重构/改组。

git rm 保留历史记录，并且不可追溯。如果您恢复到以前的版本，它们将在那里。当我去检查我的旧签入时，我“git rm”d 的文件仍然存在，并且具有完整的历史记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T06:31:54.007

`git rm`不会丢失这些文件的历史记录：请参阅“[在 git 中查询已删除的内容](http://feeding.cloud.geek.nz/2010/07/querying-deleted-content-in-git.html)”：

> 要查看该文件的提交历史记录，您不能以通常的方式进行：

```
$ git log file2
fatal: ambiguous argument 'file2': unknown revision or path not in the working tree.
Use '--' to separate paths from revisions 
```

> 相反，您需要这样做：

```
$ git log -- file2 
```

至于`git-merge-file`，尝试将它应用到一个空的，但添加到索引`MatrixMultiplication.java`文件中。

# windows - Macintosh 是否有像 Windows 这样的基于消息的范例？

> ID：11554976
> 
> 赞同：2
> 
> 时间：2012-07-19T06:18:15.290
> 
> 标签：windows, macos, unix, system

我是系统编程的新手，我认为您可能会提供帮助。

我正在 Windows 上学习基于消息的编程（如 getmessage()），我的许多消息来源都将其称为 Windows 特有的东西。

这是Mac上的范例吗？在基于 Unix 的操作系统上是否有等效的 getmessage() 或 peekmessage() ？还是事件处理方式不同？

如果它们有很大不同，我很想听听赞成和反对的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T08:38:55.647

我当然不是苹果 IOS 编程方面的专家，但我已经做了足够多的事情来了解它的基础知识。我所知道的是，它都是基于事件的，例如 Windows .NET Forms 和 WPF。我没有看到任何使用 Cocoa 的代码与消息循环等效。同样在我读过的书中，我没有看到或读过任何能引导读者转向任何这样的 API 的东西。如果你打算在 IOS 中编程，我强烈建议你坚持 IOS 公认的规范。这意味着不要将一个编程概念强加于一个并非旨在接受它的系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T06:11:49.463

有一个[消息队列](http://linux.die.net/man/7/mq_overview)，里面是[一](https://stackoverflow.com/questions/7401642/how-to-peek-into-a-linux-posix-message-queue-without-removing-an-item)[两个](https://stackoverflow.com/questions/7401642/how-to-peek-into-a-linux-posix-message-queue-without-removing-an-item)不相关的问题，讽刺的是[反问](https://stackoverflow.com/questions/10989702/is-there-was-a-mechanism-in-windows-works-like-message-queue-in-linux)。它适用于大多数基于 Unix 的操作系统，但不适用于[像 OSX 这样的 BSD 衍生](http://www.gnu.org/software/gnulib/manual/html_node/mq_005fsend.html)系统，它有自己的基于 Cocoa 的[NSOperationQueue](https://stackoverflow.com/questions/tagged/nsoperationqueue)以及对[Grand Central Dispatch](https://stackoverflow.com/questions/tagged/grand-central-dispatch)的支持。这里有几个命令：

*   `mq_send`
*   `mq_receive`

**参考**

*   [库调度](http://libdispatch.macosforge.org/)

# .htaccess - 添加 URL 重写规则时遇到问题

> ID：11554978
> 
> 赞同：0
> 
> 时间：2012-07-19T06:18:29.697
> 
> 标签：.htaccess, mod-rewrite

我正在尝试重定向 URL：

```
http://goalcandy.com/workspace/edit 
```

到以下

```
http://goalcandy.com/?module=workspace&editgb=1 
```

并且无法添加正确的规则。请帮忙。哦，如果有什么不同的话，我已经为工作区页面制定了一个有效的重写*规则*：

```
RewriteRule ^workspace/$ /workspace [R]
RewriteRule ^workspace$ index.php?module=workspace 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:21:39.820

终于明白了：

```
RewriteRule ^workspace/edit/$ /workspace/edit [R]
RewriteRule ^workspace/edit$ index.php?module=workspace&editgb=1 
```

# android - 如何将图层的大小设置为百分比？

> ID：11554982
> 
> 赞同：1
> 
> 时间：2012-07-19T06:19:09.610
> 
> 标签：android, xml, android-layout

我现在用浸。但是在具有 mdpi、hdpi、xhdpi... 的设备上，比例是不同的。例如： ![在此处输入图像描述](../Images/d1fa294c62cca7aed02a7e6bb7d69da6.png)

我知道在 mdpi 1px = 1dp 上。hdpi 1.00dp = 1.50px xhdpi 1.00dp = 2.00px

hdpi 480x800 上的分辨率，xhdi 通常 720x1280 上的分辨率 ... DP 没用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T06:21:09.363

用于`android:layout_weight="25"`25% 的项目并继续以此类推，直到您完成`LinearLayout`.

例如：

```
android:layout_weight="25"
android:layout_weight="15"
android:layout_weight="50"
android:layout_weight="35" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T06:20:54.577

您不能提及维度的百分比。

相反，您可以`android:layout_weight`在 LinearLayout 中使用属性。

阅读更多：[android:layout_weight 是什么意思？](https://stackoverflow.com/questions/3995825/what-does-androidlayout-weight-mean)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T06:26:46.710

您应该使用`LinearLayout`孩子的 'android:layout_weight' 参数：

```
<LinearLayout>
    <View 
        android:layout_height="0dp"
        android:layout_width="fill_parent"
        android:layout_weight="25" />
    <View 
        android:layout_height="0dp"
        android:layout_width="fill_parent"
        android:layout_weight="15" />
    <View 
        android:layout_height="0dp"
        android:layout_width="fill_parent"
        android:layout_weight="50" />
    <View 
        android:layout_height="0dp"
        android:layout_width="fill_parent"
        android:layout_weight="35" />
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T06:31:40.310

虽然您不能从 XML 中执行此操作，但您始终可以通过计算设置宽度、高度（取决于屏幕的总大小，并相应地设置您的视图参数），就像在这个链接中一样

[关联](https://stackoverflow.com/a/11256947/519718)

# android - 搜索栏进度级别达到 0 到最大值之间的限制

> ID：11554985
> 
> 赞同：-4
> 
> 时间：2012-07-19T06:19:31.240
> 
> 标签：android, seekbar

您好，我在 android 中有一个最大进度值为 100 的搜索栏。我希望搜索栏只能在 0-100 之间上升到 50。它不允许进度超过 50。我的逻辑是，我不想更改搜索栏进度的最大值。

请帮助我如何在 android 的 seekbar 中做到这一点。提前致谢。

```
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    sb1=(SeekBar) findViewById(R.id.seekBar1);
    sb2=(SeekBar) findViewById(R.id.seekBar2);
    sb3=(SeekBar) findViewById(R.id.seekBar3);

    tv1=(TextView) findViewById(R.id.textView1);
    tv2=(TextView) findViewById(R.id.textView2);
    tv3=(TextView) findViewById(R.id.textView3);

    tvremaining=(TextView) findViewById(R.id.textView4);
    tvused=(TextView) findViewById(R.id.textView5);

    sb1.setOnSeekBarChangeListener(this);
    sb2.setOnSeekBarChangeListener(this);
    sb3.setOnSeekBarChangeListener(this);

    total=100;
    used=0;
    remaining=total-used;
    tvremaining.setText(Integer.toString(remaining));
    tvused.setText(Integer.toString(used));

}

@Override
public void onProgressChanged(SeekBar arg0, int arg1, boolean arg2) 
{
    switch (arg0.getId()) 
    {
    case R.id.seekBar1:
        if(arg2)
        {
            tv1.setText(Integer.toString(arg1));
            //arg0.setProgressDrawable(getResources().getDrawable(R.drawable.progress_normal));
        }
        break;
    case R.id.seekBar2:
        if(arg2)
        {
            tv2.setText(Integer.toString(arg1));
            //arg0.setProgressDrawable(getResources().getDrawable(R.drawable.progress_normal));
        }
        break;
    case R.id.seekBar3:
        if(arg2)
        {
            tv3.setText(Integer.toString(arg1));
            //arg0.setProgressDrawable(getResources().getDrawable(R.drawable.progress_normal));
        }
        break;
    }
    progress=arg1;
}

@Override
public void onStartTrackingTouch(SeekBar arg0) 
{
    //arg0.setMax(remaining);

    // TODO Auto-generated method stub
}

@Override
public void onStopTrackingTouch(SeekBar arg0) 
{
    switch (arg0.getId()) 
    {
    case R.id.seekBar1:
        //sb2.setProgressDrawable(getResources().getDrawable(R.drawable.progress_applied));
        //sb3.setProgressDrawable(getResources().getDrawable(R.drawable.progress_applied));

        sb2.setProgress(progress);
        sb3.setProgress(progress);
        break;
    case R.id.seekBar2:
        //sb1.setProgressDrawable(getResources().getDrawable(R.drawable.progress_applied));
        //sb3.setProgressDrawable(getResources().getDrawable(R.drawable.progress_applied));

        sb1.setProgress(progress);
        sb3.setProgress(progress);
        break;
    case R.id.seekBar3:
        //sb1.setProgressDrawable(getResources().getDrawable(R.drawable.progress_applied));
        //sb2.setProgressDrawable(getResources().getDrawable(R.drawable.progress_applied));

        sb1.setProgress(progress);
        sb2.setProgress(progress);
        break;
    }

    used= (Integer.parseInt(tv1.getText().toString()))+(Integer.parseInt(tv2.getText().toString()))+(Integer.parseInt(tv3.getText().toString()));
    remaining = total-used;
    tvremaining.setText(Integer.toString(remaining));
    tvused.setText(Integer.toString(used));

    // TODO Auto-generated method stub
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T08:00:01.653

尝试这个

```
final SeekBar mSeekBar=(SeekBar) findViewById(R.id.SeekBar);

    mSeekBar.setMax(100);
    mSeekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            if(progress>=50)
            {
                mSeekBar.setProgress(50);
            }

            // TODO Auto-generated method stub

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:07:27.143

我已经为逻辑实现了以下代码：

```
public class MainActivity extends Activity implements OnSeekBarChangeListener{
public SeekBar sb1,sb2,sb3;
public TextView tv1,tv2,tv3,tvremaining,tvused;
public int remaining, total,used;
public int progress;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    sb1=(SeekBar) findViewById(R.id.seekBar1);
    sb2=(SeekBar) findViewById(R.id.seekBar2);
    sb3=(SeekBar) findViewById(R.id.seekBar3);

    tv1=(TextView) findViewById(R.id.textView1);
    tv2=(TextView) findViewById(R.id.textView2);
    tv3=(TextView) findViewById(R.id.textView3);

    tvremaining=(TextView) findViewById(R.id.textView4);
    tvused=(TextView) findViewById(R.id.textView5);

    sb1.setOnSeekBarChangeListener(this);
    sb2.setOnSeekBarChangeListener(this);
    sb3.setOnSeekBarChangeListener(this);

    total=100;
    used=0;
    remaining=total-used;
    tvremaining.setText(Integer.toString(remaining));
    tvused.setText(Integer.toString(used));

}

@Override
public void onProgressChanged(SeekBar arg0, int arg1, boolean arg2) 
{
    switch (arg0.getId()) 
    {
    case R.id.seekBar1:
        if((arg1-progress)<=remaining || progress>=arg1)
            tv1.setText(Integer.toString(arg1));
        else
        {
            arg0.setProgress(progress);
            tv1.setText(Integer.toString(progress));
        }
        break;
    case R.id.seekBar2:
        if((arg1-progress)<=remaining || progress>arg1)
            tv2.setText(Integer.toString(arg1));
        else
        {
            arg0.setProgress(progress);
            tv2.setText(Integer.toString(progress));
        }
        break;
    case R.id.seekBar3:
        if((arg1-progress)<=remaining || progress>arg1)
            tv3.setText(Integer.toString(arg1));
        else
        {
            arg0.setProgress(progress);
            tv3.setText(Integer.toString(progress));
        }
        break;
    }

    used= (Integer.parseInt(tv1.getText().toString()))+(Integer.parseInt(tv2.getText().toString()))+(Integer.parseInt(tv3.getText().toString()));
    remaining = total-used;
    tvremaining.setText(Integer.toString(remaining));
    tvused.setText(Integer.toString(used));
}

@Override
public void onStartTrackingTouch(SeekBar arg0) 
{
    progress= arg0.getProgress();
    //arg0.setMax(remaining);

    // TODO Auto-generated method stub
}

@Override
public void onStopTrackingTouch(SeekBar arg0) 
{

    // TODO Auto-generated method stub
} } 
```

以下是布局文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_alignParentTop="true"
    android:layout_margin="40dp" />
<SeekBar
    android:id="@+id/seekBar2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_below="@+id/seekBar1"
    android:layout_margin="40dp" />

<SeekBar
    android:id="@+id/seekBar3"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_below="@+id/seekBar2"
    android:layout_margin="40dp"  />
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/seekBar1"
    android:text="0" />
<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/seekBar2"
    android:text="0" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/seekBar3"
    android:text="0" />
<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView3"
    android:layout_marginTop="108dp"
    android:text="TextView" /> 
```

# android - 果冻豆中 webview 的性能急剧下降？

> ID：11554988
> 
> 赞同：1
> 
> 时间：2012-07-19T06:19:54.180
> 
> 标签：android, cordova, android-webview, android-4.2-jelly-bean

我正在用 Javascript/HTML/CSS 开发游戏，并使用 Phonegap 将其打包到 Android 应用程序中。游戏包括一堆动画（许多是用 jquery 完成的），例如淡入淡出/淡出、div 移动等 - 没有什么不寻常的，但相对于大多数网站来说肯定很重。

在 ICS 中，游戏运行得非常好——非常高的 fps，没有延迟等。但是，现在我将 Galaxy Nexus 升级到 4.1，Jelly Bean 导致游戏速度变慢。淡入现在更类似于显示，我经常注意到触摸响应缓慢，被射击的弹丸偶尔会冻结，等等。

我意识到这是很笼统的，但我只是好奇是否有其他人在他们的应用程序中看到/看到过类似的东西，以及你是否有关于如何解决这个混乱的建议。非常感谢任何提示。

更新：在启用 3D 转换并重写部分代码以将所有内容包含在动画框架中之后，问题似乎已得到解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T05:08:40.257

更一般的陈述然后回答你的问题

您是否尝试过使用 webkit 动画而不是 Jquery 动画？这些更有可能由 GPU 处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T15:51:04.997

在启用 3D 转换并重写部分代码以将所有内容包含在动画帧中之后，问题似乎已得到解决。

# html - 没有负边距的绝对中心 div

> ID：11554989
> 
> 赞同：3
> 
> 时间：2012-07-19T06:19:57.053
> 
> 标签：html, css

我已经尝试了大约 6 种不同的方法，但都无法让它发挥作用。

我试图在使用时将“div.content”水平居中在页面上`position:absolute;`

此方法适用于所有浏览器，但如果缩小页面大小，底部会出现滚动条：

[http://jsfiddle.net/AuqXY/16/](http://jsfiddle.net/AuqXY/16/)

**HTML：**

```
<div class="wrapper">
    <div class="header"></div>
    <div class="footer"></div>
    <div class="content">
        <div class="content2">CENTER THIS DIV</div>
    </div>
</div> 
```

**CSS：**

```
div.header {
    background:url('http://i.istockimg.com/file_thumbview_approve/11670843/2/stock-illustration-11670843-seamless-wallpaper-background-tile.jpg') top center repeat-x;
    height:150px;        
}

div.footer {
    background:url('http://www.featurepics.com/FI/Thumb300/20081029/Blue-Tile-Background-947601.jpg') top left repeat-x;
    height:150px;        
}

div.content {
    position:absolute;
    top:20px;
    left:50%;
    height:250px;
    width:300px;        
}

div.content2 {
    position:relative;
    left:-50%;
    background:white;  
    height:250px;
} 
```

​</p>

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:33:33.613

我建议使用这样的负边距：http: [//jsfiddle.net/joshnh/HFwMT/](http://jsfiddle.net/joshnh/HFwMT/)

这是调整后的代码：

**HTML：**

```
<div class="header"></div>
<div class="content">
   <div class="content2">HERE</div>
</div>
<div class="footer"></div>​ 
```

**CSS：**

```
.header {
    background: url('http://i.istockimg.com/file_thumbview_approve/11670843/2/stock-illustration-11670843-seamless-wallpaper-background-tile.jpg') top center repeat-x;
    height: 150px;        
}
.footer {
    background: url('http://www.featurepics.com/FI/Thumb300/20081029/Blue-Tile-Background-947601.jpg') top left repeat-x;
    height: 150px;        
}
.content2 {
    background: #fff;  
    height: 250px;
    left: 50%;
    margin-left: -150px; /* Half of the width */
    margin-top: -130px;   
    position: absolute;
    width: 300px;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:39:09.587

你可以试试这个..我没有测试过..

```
div.content {
        position: fixed;
        top: 0%;
        left: 0%;
        width: 100%;
        height: 100%;      
    }

    div.content2 {
        position: fixed;
        top: 50%;
        left: 50%;
        border: 0px;    
        overflow: none;
    } 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-07-19T06:25:50.190

我不太清楚这意味着什么：我正在尝试使用绝对中心的 div。但我发现标签效果很好。

```
<div class="wrapper">
    <div class="header"></div>
    <div class="footer"></div>
    <div class="content">
        <center><div class="content2">HERE</div></center>
    </div>
</div> 
```

该死的CSS。除此之外，您还需要一根魔杖（就我而言）。

# javascript - 在没有ajax的情况下将多个变量传递给不同页面的最佳方法

> ID：11554990
> 
> 赞同：0
> 
> 时间：2012-07-19T06:20:07.763
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile, cordova

嗨，在我的移动应用程序中，我想创建多个变量并希望在不同的 html 文件中访问它们，而不使用 ajax。做这个的最好方式是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T06:22:12.003

你可以用老式的方式做到这一点

1.  使用 cookie
2.  在 URL 中使用查询字符串参数

# ios - Cordova iOS Filetransfer 下载文件到 www 文件夹

> ID：11554993
> 
> 赞同：3
> 
> 时间：2012-07-19T06:20:23.453
> 
> 标签：ios, file, download, cordova

我正在使用 Cordova/phonegap 做一个 IOS 应用程序，我必须从远程服务器下载一个 XML 文件，在成功事件中，我需要用刚刚下载的文件覆盖 www 文件夹中已经存在的 XML 文件。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-13T10:07:28.390

您无法更新应用程序包中包含的文件。这将需要安装您的应用程序的更新版本。

但是，您可以让外部目录在设备磁盘的其他位置托管一些动态数据。你可以在你的包中包含一些默认的离线数据，当应用程序上线时，可以通过下载这个备用目录中的内容来更新这些数据。

这里是一个 Cordova 下载 FileTransfer for iOS 的例子：http: [//mythoughtsandexperiments.blogspot.fr/2013/10/phonegap-file-downloading-and.html](http://mythoughtsandexperiments.blogspot.fr/2013/10/phonegap-file-downloading-and.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T13:58:17.540

使用此处描述的对象的`download`方法[http://docs.phonegap.com/en/1.9.0/cordova_file_file.md.html#FileTransfer](http://docs.phonegap.com/en/1.9.0/cordova_file_file.md.html#FileTransfer)`FileTransfer`

# nhibernate - 枚举为数据库中的字符串和数字

> ID：11554999
> 
> 赞同：0
> 
> 时间：2012-07-19T06:20:42.450
> 
> 标签：nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我有一张桌子

```
table Foo
(
    id,
    FooType,
    FooTypeName,
) 
```

FooType 是一个具有固定值的枚举，因此我想将它映射到

```
public virtual FooType FooType { get; set; } 
```

如何序列化两列中的属性但只使用一个来读取和查询？

哪个映射（xml、代码映射、FluentMapping）无关紧要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:28:18.863

您可以将 的值创建`FooTypeName`为字符串属性`FooType`，并将其映射为`readonly`。

* * *

或者，如果您根本*不需要* `FooTypeName`，只需在模型中忽略它并使用触发器保持更新。

* * *

或者，如果您想编写很多代码，请创建一个映射`FooType`到两列的用户类型。